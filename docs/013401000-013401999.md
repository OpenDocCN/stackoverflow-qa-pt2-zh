# StackOverflow 问答 13401000-13401999

# php - 从 php 菜单运行 select 语句

> ID：13401000
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:42:41.497
> 
> 标签：php, sql

> **可能重复：**
> [如何组合选择列表以确定哪个选择语句](https://stackoverflow.com/questions/13388736/how-to-combine-a-list-of-choices-to-determine-which-select-statement)

之前有人问过这个问题——我很困惑。不幸的是，我似乎找不到我的帖子来修改它。:(

所以。简单版。

1.  创建一个菜单，其中的选项将运行 mysql select 语句。-- 声明不必显示。

示例菜单选项：
1\. Update_Inventory
2\. Conduct_Training
3\. Conduct_Repairs

当我选择 1-3 时，它应该运行 SELECT、UPDATE 或 ... 语句。我可以编写sql语句，只是不知道如何将菜单选项与语句链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:53:09.890

我猜你说的是阿贾克斯？

将每个菜单选项视为一个独特的操作。您已经将它们命名为：

```
$menu = array('Update_Inventory', 'Conduct_Training', 'Conduct_Repairs'); 
```

遍历菜单数组并将 onclick 事件处理程序应用于您打印出的每个链接：

```
<?php foreach($menu as $menuItem): ?>
    <a href="#" onclick="run_action('<?php echo $menuItem; ?>')">
        <?php echo $menuItem; ?>
    </a>
    <br />
<?php endforeach; ?> 
```

用于处理 onclick 事件的 JS 函数：

```
function run_action(action){
     //perform an ajax request to PHP script that runs whatever query
     //corresponds to the action that has been received.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:44:52.363

a) 将菜单项设置为指向 PHP 文件的普通锚标记链接。该文件运行 MySQL 查询。或者 b) 使用 Ajax 来访问同一个 PHP 文件。

# sublimetext2 - SublimeText2 自定义范围

> ID：13401012
> 
> 赞同：1
> 
> 时间：2012-11-15T15:43:12.100
> 
> 标签：sublimetext2

我有许多使用类似代码的不同类型的项目，我的目标是在 SublimeText2 中制作仅在给定项目上激活的片段和键绑定。

所以，例如，我有`jsg1.html`through `jsg40.html`，我也有`kwa1.html`through `kwa40.html`。这两个组中的每一个都有自己独特的代码，我想为每个组创建不同的片段和键绑定。

这导致我想要创建自定义文件类型，例如`.kwa`and `.jsg`，以便我可以创建范围设置为这些文件类型的片段/键绑定。

但是，我无法让它工作。这是我尝试过的：

a.sublime-snippet

```
<snippet>
<content><![CDATA[
<a href="$1" style="font-family: Segoe UI, Lucida Sans Unicode, Arial;  color:#2f6497; font-size:14px; text-decoration:underline;">$2</a>
]]></content>
<tabTrigger>aj</tabTrigger>
<scope>source.jsg</scope>
</snippet> 
```

jsg.tmLanguage

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"    "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>fileTypes</key>
  <array>
    <string>jsg</string>
  </array>
  <key>name</key>
  <string>jsg</string>
  <key>scopeName</key>
  <string>source.jsg</string>
</dict>
</plist> 
```

这两个文件都在我的`Packages/User`文件夹中。但是，我有一个文件 ，`test.jsg`并且片段不会在其中激活。

所以问题是：

为将使用相同键绑定和片段的 HTML 文件组创建自定义范围的最佳方法是什么？是否通过为新文件类型创建自定义语法来创建自定义范围？或者，还有更好的方法？如果这是最好的方法，为什么我的片段在我的`.jsg`文件中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:35:38.520

所以我想通了。要生成您自己的键绑定和片段，您需要创建一个自定义的`scope`. 要显示文档的当前范围，可以使用热键：

`Ctrl + ⇧ + Alt + P`

如果您打开一个`html`文件并运行此命令，您应该会看到它显示`text.html`. 目标是创建一个突出`html`语法的文件类型，但显示我们自定义文件类型`scope`的`text.we`位置`.we`（也就是说，它可以是我们想要的任何东西）。然后我们可以`scope`在我们的键绑定和片段文件中使用它。

首先要做的事情是：我们需要确保我们的自定义文件类型尚未与`html`. 如果您在 下设置设置`View - Syntax - Open all with current extension as...`，则会发生这种情况，您最初可能会这样做以使您的文件类型具有与`html`. 别担心，我们仍然会这样做，但我们必须以另一种方式去做。

如果您已经这样做了，请找到该`JSON`文件`../Path/to/Sublime Text 2/Packages/Users/HTML.sublime-settings`并从属性中删除您关联的扩展名`extensions`。如果您在 Windows 上找不到该`Packages`文件夹​​，它通常隐藏在`User/AppData/Roaming`.

所以现在我们已经解除了文件的关联，我们必须首先找到使用我们想要的突出显示的语言的设置文件。就我而言，它是`html`，所以我去了`../Path/to/Sublime Text 2/Packages/HTML`。复制文件`html.tmLanguage`并将`Comments.tmPreferences`它们放在`Packages`. 对于组织，我将它们放在我的自定义文件类型`Packages/Users/xxx`所在的位置。`xxx`当我们稍后制作片段时，我还建议您将它们保留在那里，以便与您的文件类型相关的所有内容都在一个地方。

Anyway, rename the files accordingly, based on your filetype. Within the file, you'll need to change three attributes: `fileTypes` (it's at the beginning), `name`, and `scope` (those last two are at the very end). Replace the content of those accordingly. Be sure the `scopeName` takes the form `text.___`.

Change up the `scope` of the `Comments.tmPreferences` file and you'll be good to go with your custom filetype. It'll now display the highlighting of `html` files and allow you to use it as a `scope` in snippets and key-bindings.

Also, if your custom files are `HTML` files, browsers won't have any problem displaying them when you open them up.

Mission accomplished!

# apple-push-notifications - APNS 证书：更改服务器 - 新 IP 地址但域相同

> ID：13401016
> 
> 赞同：0
> 
> 时间：2012-11-15T15:43:26.643
> 
> 标签：apple-push-notifications

我即将更改保留我的 APNS 推送通知的服务器的 VPS 提供商。域名将保持不变，但 IP 地址正在更改。

我可以将我的 APNS 证书从旧服务器复制到新服务器还是必须重新创建它们？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:49:08.437

在证书未过期之前，您无需重新生成 APNS 证书。

证书适用于所有服务器，并且不是为特定服务器生成的。

# mysql - 可以组合多个 TINYINT/布尔列并在 MySQL 存储过程中作为位列返回？

> ID：13401019
> 
> 赞同：0
> 
> 时间：2012-11-15T15:43:30.927
> 
> 标签：mysql, sql

有一个带有 TINYINT(1) 值的单独列的表，是否可以将它们组合并作为具有位（编辑：位字段）数据类型的单列返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:48:48.260

我想你想申请`Logical Operators`很多`TINYINT`专栏。

您可以使用`&&`或`||`。

详情请看[这里](http://dev.mysql.com/doc/refman/5.0/en/logical-operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:53:53.213

我认为您需要[按位运算符](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html)。逻辑运算符的单数版本。

```
BIT_COUNT() Return the number of bits that are set
&   Bitwise AND
~   Invert bits
|   Bitwise OR
^   Bitwise XOR
<<  Left shift
>>  Right shift 
```

# jquery - JQGrid - 无法使用参数向网格添加行

> ID：13401021
> 
> 赞同：2
> 
> 时间：2012-11-15T15:43:32.290
> 
> 标签：jquery, asp.net-mvc, jqgrid

我想在 jqgrid 中添加一行。这样做时，我想发送一个参数，但我无法获得正确的语法，我尝试使用 AddRowParams;

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Maintenance
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <fieldset>
        <legend>Maintenance of Departments and Divisions</legend>
        <p>Add, edit or delete a department or division: <%: Html.DropDownList("BusinessUnitTypes")%></p>
        <p>To amend the department or division, select the row, make the change and then press the return key.</p>
        <table id="list" class="scroll"></table>
        <div id="pager" class="scroll" style="text-align:center;font-size: 11px;"></div>
    </fieldset>
    <!-- "BusinessUnitTypeId", (SelectList)ViewData["BusinessUnitTypes"] -->
<script type="text/javascript">
    $(document).ready(function () { reloadGrid(); });

    $('#BusinessUnitTypes').change(function () {
        $("#list").trigger("reloadGrid");
    });

    function reloadGrid() {
        var lastSelectedId;

        $('#list').jqGrid({
            url: '<%: Url.Action("GetBusinessUnits", "BusinessUnit")%>',
            postData: {
                businessUnitTypeId: function () { return $("#BusinessUnitTypes option:selected").val(); }
            },
            datatype: 'json',
            mtype: 'POST',
            colNames: ['ID', 'Name', 'Fax', 'Email', "Employees"],
            colModel: [
                { name: 'BusinessUnitId', index: 'BusinessUnitId', width: 25, editable: false, key: true },
                { name: 'BusinessUnitName', index: 'BusinessUnitName', width: 200, editable: true, edittype: 'text' },
                { name: 'Fax', index: 'Fax', width: 80, align: 'right', edittype: 'text', editable: true },
                { name: 'Email', index: 'Email', width: 200, editable: true, edittype: 'text' },
                { name: 'NumberOfEmployees', index: 'NumberOfEmployees', width: 70, editable: false}],
            rowNum: 20,
            rowList: [10, 20, 30],
            pager: '#pager',
            gridview: true,
            sortname: 'BusinessUnitName',
            viewrecords: true,
            sortorder: "asc",
            caption: "Edit",
            height: 575,
            onSelectRow: function (id) {
                if (id && id !== lastSelectedId) {
                    $(this).restoreRow(lastSelectedId);
                    lastSelectedId = id;
                }
                $(this).editRow(id, true);
            },
            editurl: '<%: Url.Action("Save", "BusinessUnit")%>'
        });
        $('#list').jqGrid('navGrid', '#pager',
                { add: true, del: true, edit: false, search: false },
                {},
                { width: 'auto', url: '<%:Url.Action("Add", "BusinessUnit")%>', addRowParams: { extraparam: { businessUnitTypeId: function () { return $("#BusinessUnitTypes option:selected").val(); } } } },
                { width: 'auto', url: '<%:Url.Action("Delete", "BusinessUnit")%>' });
    }

</script>
</asp:Content> 
```

编辑 - 我已将我的代码更新为以下内容，尽管现在它仍然不起作用 - 请参阅与 Oleg 的讨论。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Maintenance
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <fieldset>
        <legend>Maintenance of Departments and Divisions</legend>
        <p>Add, edit or delete a department or division: <%: Html.DropDownList("BusinessUnitTypes")%></p>
        <p>To amend the department or division, select the row, make the change and then press the return key.</p>
        <table id="list" class="scroll"></table>
        <div id="pager" class="scroll" style="text-align:center;font-size: 11px;"></div>
    </fieldset>
    <!-- "BusinessUnitTypeId", (SelectList)ViewData["BusinessUnitTypes"] -->
<script type="text/javascript">
    $(document).ready(function () { reloadGrid(); });

    $('#BusinessUnitTypes').change(function () {
        $("#list").trigger("reloadGrid");
    });

        function reloadGrid() {
            //var businessUnitTypeId = function() { return $("#BusinessUnitTypes option:selected").val(); };
            // var businessUnitTypeId =  $("#BusinessUnitTypes option:selected").val();

        var lastSelectedId,
            inlineEditParam = {
                keys: true,
                extraparam: {
                    businessUnitTypeId: function() { return $("#BusinessUnitTypes option:selected").val(); }
                }
            },
            $grid = $('#list');

        $('#list').jqGrid({
            url: '<%: Url.Action("GetBusinessUnits", "BusinessUnit")%>',
            postData: {
                businessUnitTypeId: function () { return $("#BusinessUnitTypes option:selected").val(); }
            },
            datatype: 'json',
            mtype: 'POST',
            colNames: ['ID', 'Name', 'Fax', 'Email', "Employees"],
            colModel: [
                { name: 'BusinessUnitId', index: 'BusinessUnitId', hidden: true, editable: false, key: true },
                { name: 'BusinessUnitName', index: 'BusinessUnitName', width: 200, editable: true, edittype: 'text' },
                { name: 'Fax', index: 'Fax', width: 80, align: 'right', edittype: 'text', editable: true },
                { name: 'Email', index: 'Email', width: 200, editable: true, edittype: 'text' },
                { name: 'NumberOfEmployees', index: 'NumberOfEmployees', width: 70, editable: false}],
            rowNum: 30,
            rowList: [10, 20, 30],
            pager: '#pager',
            gridview: true,
            sortname: 'BusinessUnitName',
            viewrecords: true,
            sortorder: "asc",
            caption: "Edit",
            width: 700,
            height: "auto",
            onSelectRow: function (id) {
                if (id && id !== lastSelectedId) {
                    $(this).restoreRow(lastSelectedId);
                    lastSelectedId = id;
                }
                $(this).jqGrid('editRow', id, inlineEditParam);

            },
            editurl: '<%: Url.Action("Save", "BusinessUnit")%>'
        });
        // change defaults of delGridRow to use short for for navGrid
        $.extend($.jgrid.del, {
            width: 'auto',
            url: '<%:Url.Action("Delete", "BusinessUnit")%>'
        });

        // create navigator bar
        $grid.jqGrid('navGrid', '#pager',
            { add: true, del: true, edit: false, search: false });

        // add buttons to navigator bar
        $('#list').jqGrid('inlineNav', {
            edit: false,
            addParams: { addRowParams: inlineEditParam }
        });
    }

</script>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:25:31.683

如果我理解你是正确的，你尝试在项目中使用[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)。该方法`navGrid`添加导航栏，可用于添加“删除”按钮。要添加“添加”按钮，该按钮可用于添加空的新行并使用内联编辑来填充您需要*在*调用后使用[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#inlinenav) 的数据。对应的代码大概如下：*`navGrid`*

 *```
$('#list').jqGrid('navGrid', '#pager',
    { add: true, del: true, edit: false, search: false },
    {}, // Edit
    {}, // Add
    { width: 'auto', url: '<%:Url.Action("Delete", "BusinessUnit")%>' });
$('#list').jqGrid('inlineNav', {
    edit: false,
    addParams: {
        addRowParams: {
            keys: true,
            extraparam: {
                businessUnitTypeId: function () {
                    return $("#BusinessUnitTypes option:selected").val();
                }
            }
        }
    }
}); 
```

**更新**：顺便说一句，您可以定义一个变量并将其用于添加和编辑行：

```
var lastSelectedId,
    inlineEditParam = {
        keys: true,
        extraparam: {
            businessUnitTypeId: function () {
                return $("#BusinessUnitTypes option:selected").val();
            }
        }
    },
    $grid = $('#list');

$grid.jqGrid({
    url: '<%: Url.Action("GetBusinessUnits", "BusinessUnit")%>',
    ... // all other parameters
    height: "auto",
    onSelectRow: function (id) {
        if (id && id !== lastSelectedId) {
            $(this).jqGrid('restoreRow', lastSelectedId);
            lastSelectedId = id;
        }
        $(this).jqGrid('editRow', id, inlineEditParam);
    },
    editurl: '<%: Url.Action("Save", "BusinessUnit")%>'
});

// change defaults of delGridRow to use short for for navGrid
$.extend($.jgrid.del, {
    width: 'auto',
    url: '<%:Url.Action("Delete", "BusinessUnit")%>'
});

// create navigator bar
$grid.jqGrid('navGrid', '#pager',
    { add: true, del: true, edit: false, search: false });

// add buttons to navigator bar
$grid.jqGrid('inlineNav', '#pager', {
    edit: false,
    addParams: { addRowParams: inlineEditParam }
}); 
```*

# php - Joomla 超时时执行脚本？

> ID：13401025
> 
> 赞同：0
> 
> 时间：2012-11-15T15:43:50.137
> 
> 标签：php, joomla, timeout

我的问题可能是菜鸟，但是：

我想在用户超时时执行一个 php 脚本。我发现这样做的唯一方法是让服务器每秒或每分钟执行一次脚本，例如，获取每个用户的最后一个活动并在最后一个活动早于（now（） - 超时）时执行脚本。

这是合适的解决方案吗？这会显着降低网站速度吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:58:28.207

我相信这个文件应该可以帮助你。位于**site_root/libraries/joomla/database/table/session.php** 第**152**行：

```
public function exists($userid)
{
    $query = $this->_db->getQuery(true);
    $query->select('COUNT(userid)');
    $query->from($this->_db->quoteName($this->_tbl));
    $query->where($this->_db->quoteName('userid') . ' = ' . $this->_db->quote($userid));
    $this->_db->setQuery($query);

    if (!$result = $this->_db->loadResult())
    {
        $this->setError($this->_db->stderr());
        return false;
    }

    return (boolean) $result;
} 
```

# matlab - 生成一个向量，其元素包含固定数量的唯一值

> ID：13401031
> 
> 赞同：0
> 
> 时间：2012-11-15T15:44:05.357
> 
> 标签：matlab, indexing, unique, sorting

假设我有一个向量 A =

```
 3     5     3     3     2     2     4     2     6 
```

我需要生成一个新向量 B，它将包含来自起始向量 A 的所有这些值，这将导致唯一数量的 n 个元素（假设 n=3，出于本示例的目的）。新向量应该是 B =

```
 3     5     3     3     2 
```

因为直到向量 A 的第五个元素，我们有 3 个唯一值 (3,5,2)。实际向量要大得多，所以我宁愿需要一个通用解决方案，最好避免循环。有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:05:06.680

你可以使用[`unique`](http://www.mathworks.de/de/help/matlab/ref/unique.html)这个问题。但是，请务必使用该`'stable'`选项。

```
A = [3     5     3     3     2     2     4     2     6]; 
n = 3; 

[x, id] = unique(A,'stable'); 

B = A(1:id(3)) 
```

这导致

```
B =

     3     5     3     3     2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:15:33.110

请执行下列操作：

```
A = [3  5  3  3  2  2  4  2  6];
n = 3;

[b,i] = unique(A,'first');
h = sort(i);
A(1:h(n)) 
```

# javascript - chrome 内容脚本：window.postMessage()“消息”事件不包含“源”属性

> ID：13401033
> 
> 赞同：4
> 
> 时间：2012-11-15T15:44:06.387
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, content-script

我正在构建一个 chrome 扩展，将内容脚本添加到站点（我们称它为主机）。内容脚本在主机中创建了一个 iframe，它指向我的域（跨域）。

我可以通过 parent.postMessage() 从 iframe 向主机发送消息。但是，收到的“消息”事件不包含阻止我将消息传回给孩子的“源”属性。

**更新** 我正在寻找客户端解决方案或对此行为的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:50:07.463

你必须以困难的方式去做。

执行 iframe 时，在 url 中发送一个唯一的安装 ID。

例如 [http://www.trackingdomain.tld/trackingscript.php?uid=38736238](http://www.trackingdomain.tld/trackingscript.php?uid=38736238)

然后让您的脚本每隔 1000 毫秒从您的域中使用相同的 uid 提取一个 JSON 脚本回复，以获取返回的消息。

您也可以使用 json 来发送消息。

但是这个解决方案意味着你将被迫使用服务器端脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:08:23.577

`window`扩展中可用的沙盒对象似乎存在问题。

一个快速的解决方法是通过元素将 javascript 代码直接注入 DOM，`src`而不是从扩展中运行它。这样您就可以处理常规的窗口对象。

你可以在[这个问题的答案中看到一个例子](https://stackoverflow.com/questions/3622219/can-chrome-extension-content-scripts-access-window-opener)

# java - 从 Java 程序运行 grep

> ID：13401042
> 
> 赞同：4
> 
> 时间：2012-11-15T15:44:35.077
> 
> 标签：java, linux, process, grep, processbuilder

在过去的 3 天里，我在谷歌上没有太多运气来了解如何从 Java 中运行 grep 进程。

我有以下代码来运行 grep 进程，但是，我只得到响应的第一行。

```
package com.example.parser;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Main {

    public static void main(String[] args) {
        try {
            Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"", "/home/user/dev/java/").start();

            BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String line = "";
            while((line = br.readLine()) != null) {
                System.out.println(line);
            }

            System.out.println("Exit Code: " + process.exitValue());

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

我只收到以下回复：

```
Binary file /home/user/dev/java/Parser/parser/bin/com/example/parser/Main.class matches
Exit Code: 0 
```

当我应该得到以下响应时：

```
Binary file /home/user/dev/java/Parser/parser/com/example/parser/Main.class matches
/home/user/dev/java/Parser/parser/src/com/example/parser/Main.java:10:  public static void main(String[] args) {
/home/user/dev/java/Parser/parser/src/com/example/parser/Main.java:12:          Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"", "/home/user/dev/java/Parser/parser").start();
Exit Code: 0 
```

我想知道为什么我只得到第一个发现的输出？grep 是否分叉了几个进程来运行搜索，而我只处理第一个进程？

* * *

我也尝试过从线程运行进程：

包 com.example.parser;

```
public class Main {

    public static void main(String[] args) {
        try {
            Analyzer analyzer = new Analyzer();
            analyzer.start();
            analyzer.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}

package com.example.parser;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Analyzer extends Thread {

    public Analyzer() {
    }

    @Override
    public void run() {
        try {
            Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"", "/home/user/dev/java/Parser/parser").start();
            process.waitFor();
            BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String line = "";
            while((line = br.readLine()) != null) {
                System.out.println(line);
            }

            System.out.println("Exit Code: " + process.exitValue());

        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

以及以下内容：

```
package com.example.parser;

import java.io.IOException;

public class Main {

    public static void main(String[] args) {
        try {
            Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"", "/home/user/dev/java/Parser/parser").start();
            process.waitFor();

            Analyzer analyzer_is = new Analyzer(process.getInputStream());
            Analyzer analyzer_es = new Analyzer(process.getErrorStream());

            analyzer_is.start();
            analyzer_es.start();

            analyzer_is.join();
            analyzer_es.join();

            System.out.println("Exit Code: " + process.exitValue());

        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}

package com.example.parser;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class Analyzer extends Thread {

    InputStream is = null;

    public Analyzer(InputStream is) {
        this.is = is;
    }

    @Override
    public void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(this.is));

            String line = "";
            while((line = br.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

正如以下文章所建议的那样：[http ://www.javaworld.com/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:54:40.337

我能够通过启动带有 -c 标志的 shell 来解决这个问题。以下代码符合我最初的意图：

```
package com.example.parser;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Main {

    public static void main(String[] args) {
        try {
            List<String> commands = new ArrayList<String>();
            commands.add("/bin/sh");
            commands.add("-c");
            commands.add("grep -rni --include \"*.java\" \"public static void main(\" /home/user/dev/java/Parser/parser");

            Process process = new ProcessBuilder(commands).start();
            Analyzer analyzer_is = new Analyzer(process.getInputStream());
            Analyzer analyzer_es = new Analyzer(process.getErrorStream());

            analyzer_is.start();
            analyzer_es.start();

            process.waitFor();

            analyzer_is.join();
            analyzer_es.join();

            System.out.println("Exit Code: " + process.exitValue());

        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

}

package com.example.parser;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class Analyzer extends Thread {

    InputStream is = null;

    public Analyzer(InputStream is) {
        this.is = is;
    }

    @Override
    public void run() {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(this.is));

            String line = "";
            while((line = br.readLine()) != null) {
                  System.out.println(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:47:37.900

这可能是因为您没有等待 grep 完成。

使用[waitFor 方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#waitFor%28%29)：

```
Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"", "/home/user/dev/java/").start();
BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));
process.waitFor();
String line = "";
while((line = br.readLine()) != null) {
      System.out.println(line);
} 
```

请注意，您还可以在使用处理输出时读取输出（主要是为了了解发生了什么）

```
Process process = new ProcessBuilder("grep", "-rni", "\"public static void main(\"",     String line;
while (true) {
    line = reader.readLine(); // add IO exception catching
    if (line != null) {
      System.out.println(line);
    } else {
        Thread.sleep(DELAY);   // DELAY could be 100 (ms) for example     
    }
} 
```

我想你确定 java 程序的所有者启动的 grep 不止一行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:50:22.487

另一个原因可能是您的进程仍在运行，但您的 Java 程序刚刚退出。

使用 process.waitFor(); 并在线程中读取您的输入流。

开始这个过程。以进程输入流作为输入的午餐线程。现在使用 process.waitFor(); 等待进程退出

这可能会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:00:36.213

看看这个项目在java中的grep [https://code.google.com/p/grep4j](https://code.google.com/p/grep4j)

# c# - 如何使字段在课堂外只读

> ID：13401045
> 
> 赞同：5
> 
> 时间：2012-11-15T15:44:49.663
> 
> 标签：c#, .net, access-modifiers

我有以下课程（示例）：

```
public class Dog
{
    int numberOfTeeth;

    public Dog() 
    { 
        countTeeth(); 
    }

    private void countTeeth()
    {
        this.numberOfTeeth = 5; //this dog has seen better days, apparently
    }

} 
```

创建狗对象后，它应该计算出牙齿的数量。我希望能够访问该值，而不能在类本身之外对其进行修改。

```
Dog d = new Dog();
int dogTeeth = d.numberOfTeeth; //this should be possible
d.numberOfTeeth = 10; //this should not 
```

但是，我不知道哪个访问修饰符可以让我这样做。我已经尝试了以下所有方法：

如果我设为`numberOfTeeth` **private**，我将无法访问它。
如果我设置`numberOfTeeth` **protected internal**，我可以在类外更改这个值。
如果我做`numberOfTeeth` **internal**，我可以在课堂外更改这个值。
如果我设置`numberOfTeeth` **protected**，我将无法访问它。
如果我`numberOfTeeth` **公开**，我可以在课堂外更改此值。

我也尝试将其设为**只读**，但随后无法将其设置在构造函数之外。

是否有任何访问修饰符可以让我这样做？还是有其他方法可以实现这种保护？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:47:06.130

使用私有设置器创建属性：

```
public int NumberOfTeeth
{
 get; private set;
} 
```

请注意，我将其更改为 Pascal Case 以匹配大多数 .NET 样式标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:46:54.770

你不能那样做。您可以将字段设置为只读并创建一个返回其值的方法。您还可以使用公共 getter 和受保护的 setter 创建自动属性：

```
public int NumberOfTeeth { get; protected set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:47:40.243

您应该创建该字段`private`并创建一个只读（无设置器）`public`属性：

```
public class Dog
{
    private int numberOfTeeth;
    public int NumberOfTeeth {get {return numberOfTeeth;}}

    public Dog() 
    { 
        countTeeth(); 
    }

    private void countTeeth()
    {
        this.numberOfTeeth = 5; //this dog has seen better days, apparently
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:47:39.037

```
public class Dog
{
    public int numberOfTeeth { get; private set; }

    public Dog() 
    {   
        countTeeth(); 
    }
} 
```

# javascript - 如何将 div 从左侧滑动到页面中间的绝对位置？

> ID：13401049
> 
> 赞同：-4
> 
> 时间：2012-11-15T15:44:52.170
> 
> 标签：javascript, jquery, html, css

我想使用 jQuery 或 Javascript 来获取我的徽标，当页面加载时，将其从页面的左侧滑动并使其停止并停留在页面中间的静止位置。（徽标 div `id="mylogo"`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:00:15.037

你可能想要这样的东西：http: [//jsfiddle.net/SATMY/1/](http://jsfiddle.net/SATMY/1/)

您的问题根本不清楚，因此很难说我的答案是否确实是正确的答案。

```
$("div#logo").animate({"marginLeft":"-50px"}, 800);​ 
```

和初始CSS：

```
margin-left: -900px; /* Before slide-in */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:49:38.613

```
$(document).ready( function () {
  $("#myLogo").animate("aCSSAttribute", "toThisValue");
}); 
```

还要检查： [http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

如果你表现出你的努力，那么我可以更好地帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:56:21.563

您需要计算出它需要移动多远，下面的示例假设 x%，但您可以根据需要对像素执行此操作。

不要忘记定位您的徽标，并确保外部元素具有一些宽度/显示定义。

[小提琴](http://jsfiddle.net/GcYQz/5)

```
 <!DOCTYPE HTML>
    <html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style type="text/css">
        #main {width:100%;}
        #mylogo{border:1px solid red;width:200px;height:100px;display:block;position:relative}
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){
    $('#mylogo').animate({left:'+=25%'});
    });    
    </script>

    </head>
    <body>
    <div id="main">        
        <div id="mylogo"></div>
        </div>
    </body>
    </html> 
```

# sql - 更新时，更改日期

> ID：13401050
> 
> 赞同：0
> 
> 时间：2012-11-15T15:44:56.697
> 
> 标签：sql, sql-server-2005, datetime, insert

我正在使用 SqlServer 2005。我想设置一个可以更新日期的属性（如默认值，但对于任何更改，而不仅仅是插入）。换句话说，在每次更新和插入时，当前日期都会放在列中。这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:55:16.190

假设你有一张`A`桌子：

```
CREATE TABLE A (
  ID INT,
  Name VARCHAR(20),
  SomeDate DATE NULL) 
```

您可以创建触发器：

```
CREATE TRIGGER INSTEAD_OF_A_INSERT
ON A
INSTEAD OF INSERT AS
BEGIN

INSERT INTO A (ID, Name, SomeDate)
SELECT ID, Name, GETDATE ()
FROM inserted 

END
GO

CREATE TRIGGER INSTEAD_OF_A_UPDATE
ON A
INSTEAD OF UPDATE AS
BEGIN

UPDATE A
SET SomeDate = GETDATE(),
    Name = I.Name
FROM A A1 JOIN INSERTED I ON A1.ID = I.ID

END
GO 
```

哪个会给你想要的

```
INSERT INTO A (ID, Name)
VALUES(1, 'John');

INSERT INTO A (ID, Name)
VALUES(2, 'Jack');

UPDATE A
SET Name = 'Jane'

    SELECT *
    FROM A 
```

这是一个你可以玩的[小提琴。](http://sqlfiddle.com/#!3/0ac20/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:48:19.827

最简单（但不一定最有效）的方法是使用触发器。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms189799.aspx)。

您可以使用 an`AFTER INSERT,UPDATE`或 an `INSTEAD OF INSERT,UPDATE`- 可以根据您的确切要求来完成这项工作。

# python - 在 pymongo 中查找嵌套值

> ID：13401052
> 
> 赞同：2
> 
> 时间：2012-11-15T15:45:01.660
> 
> 标签：python, mongodb, mongoid, pymongo

我有一个数据：

```
{'_id': 0, 'values': [{'value': 1, 'value_type': 'type1'}, {'value': 2, 'value_type': 'type2'}, {'value': 134, 'value_type' : 'type1'}, {'value': 2564, 'value_type': 'type212'}]} 
{'_id': 1, 'values': [{'value': 136, 'value_type': 'type1'}, {'value': 465652, 'value_type': 'type1'}, {'value': 4, 'value_type' : 'type299'}, {'value': 112564, 'value_type': 'type2456'}]} 
```

我正在使用 pymongo 2.2 和 Python 3.2。

目标是找到`value_type`等于`type1`和最小值的字典（value 和 value_type）`value`来删除它们。就我而言，就是这样`{'value': 1, 'value_type': 'type1'} and {'value': 136, 'value_type': 'type1'}`，我想删除它们。

我该如何实现呢？

**- 编辑 -**

我知道如何更新（在我的情况下删除），我将使用 $unset 运算符。我不知道如何找到我需要删除的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:55:21.317

使用 $pull 更新查询 [http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull)

```
coll.update({}, {"$pull" :{"values": {"value":1}}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:10:33.437

像这样使用[`$pull`](http://docs.mongodb.org/manual/reference/operator/pull/)运算符：

```
value = 150
coll.update({}, 
    {'$pull': {'values': {'value_type': 'type1', 'value': {'$lt': value}}}},
    multi=True) 
```

将`multi`参数设置为`True`告诉更新更新所有文档，而不仅仅是第一个。

# google-apps-script - 通过 Google Apps 脚本访问 Google Task API

> ID：13401053
> 
> 赞同：0
> 
> 时间：2012-11-15T15:45:05.607
> 
> 标签：google-apps-script, google-tasks-api

当您查询所有任务的任务对象时，每个“页面”将包含结果的 maxResults 数（默认 maxResults=100）。如果您在特定任务列表中有超过 100 个任务或想要使用分页，则需要使用 pageToken 来请求任务的后续“页面”。

这可以通过运行 list()（TasksCollection 类）来完成，然后检索 nextPageToken()。随后运行 list() 并传入 nextPageToken，作为可选参数将为您提供第二页结果。

```
 var tasksObj = Tasks.Tasks.list(MytaskListId, {maxResults : 20});
  var nextPageToken = tasksObj.getNextPageToken();
  tasksObj = Tasks.Tasks.list(MytaskListId, {maxResults : 20, pageToken: nextPageToken});
  var tasks = tasksObj.getItems();
  //"tasks" will hold the Tasks 20 to 40. 
```

但是，我对为什么文档显示 setNextPageToken 方法感到困惑 [https://developers.google.com/apps-script/class_tasks_v1_schema_tasks#setNextPageToken](https://developers.google.com/apps-script/class_tasks_v1_schema_tasks#setNextPageToken) 这可以用来做什么？下面的代码不起作用，因为后续调用没有 nextPageToken 参数的 list() 将返回第一个集合（即项目 1 到 20）。

```
 var tasksObj = Tasks.Tasks.list(MytaskListId, {maxResults : 20});
  var nextPageToken = tasksObj.getNextPageToken();
  tasksObj.setNextPageToken(nextPageToken);
  tasksObj = Tasks.Tasks.list(MytaskListId, {maxResults : 20});
  var tasks = tasksObj.getItems();
  //"tasks" will hold the Tasks 1 to 20. 
```

我错过了什么...... setNextPageToken() 方法的目的是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:30:18.313

我相信这是一个文档问题。有两个任务类，一个公开行为，另一个只公开模式/属性。

[https://developers.google.com/apps-script/class_tasks](https://developers.google.com/apps-script/class_tasks)

[https://developers.google.com/apps-script/class_tasks_v1_schema_tasks](https://developers.google.com/apps-script/class_tasks_v1_schema_tasks)

使用第一个并忽略第二个。我们会尽快清理这个。

# symfony - 当用户不提供值时，表单将其清空

> ID：13401056
> 
> 赞同：2
> 
> 时间：2012-11-15T15:45:19.690
> 
> 标签：symfony, doctrine, symfony-2.1

阅读[此](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)页面，我设置了一个表单来处理 PATCH 请求。

我有一个 Player 实体：

```
<?php

namespace Acme\PlayerBundle\Entity;

use Symfony\Component\Validator\Constraints as Assert;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\PlayerBundle\Entity\Player
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Acme\PlayerBundle\Entity\PlayerRepository")
 */
class Player
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     * @Assert\NotBlank()
     */
    private $name;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="players")
     * @ORM\JoinColumn(nullable=false)
     */
    private $owner;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\TeamBundle\Entity\Team", inversedBy="players")
     * @ORM\JoinColumn(nullable=false)
     * @Assert\NotBlank()
     */
    private $team;

    /**
     * @var integer $shirtNumber
     *
     * @ORM\Column(name="shirtNumber", type="smallint")
     * @Assert\NotBlank()
     */
    private $shirtNumber;

    /**
     * @var integer $vsid
     *
     * @ORM\Column(name="vsid", type="integer", nullable=true)
     */
    private $vsid;

    /**
     * @var string $firstname
     *
     * @ORM\Column(name="firstname", type="string", length=255, nullable=true)
     */
    private $firstname;

    /**
     * @var string $lastname
     *
     * @ORM\Column(name="lastname", type="string", length=255, nullable=true)
     */
    private $lastname;

    /**
     * @var boolean $deleted
     *
     * @ORM\Column(name="deleted", type="boolean")
     */
    private $deleted = false;

    /**
     * @var integer $role
     *
     * @ORM\Column(type="integer", nullable=true)
     */
    private $role;

    /**
     * Create the user salt
     */
    public function __construct()
    {
        //TODO: just for test
        $this->uniqueId = substr(uniqid(), 0, 14);
    }

    /* MANAGED BY DOCTRINE, DON'T EDIT */

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Player
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set shirtNumber
     *
     * @param integer $shirtNumber
     * @return Player
     */
    public function setShirtNumber($shirtNumber)
    {
        $this->shirtNumber = $shirtNumber;

        return $this;
    }

    /**
     * Get shirtNumber
     *
     * @return integer 
     */
    public function getShirtNumber()
    {
        return $this->shirtNumber;
    }

    /**
     * Set vsid
     *
     * @param integer $vsid
     * @return Player
     */
    public function setVsid($vsid)
    {
        $this->vsid = $vsid;

        return $this;
    }

    /**
     * Get vsid
     *
     * @return integer 
     */
    public function getVsid()
    {
        return $this->vsid;
    }

    /**
     * Set firstname
     *
     * @param string $firstname
     * @return Player
     */
    public function setFirstname($firstname)
    {
        $this->firstname = $firstname;

        return $this;
    }

    /**
     * Get firstname
     *
     * @return string 
     */
    public function getFirstname()
    {
        return $this->firstname;
    }

    /**
     * Set lastname
     *
     * @param string $lastname
     * @return Player
     */
    public function setLastname($lastname)
    {
        $this->lastname = $lastname;

        return $this;
    }

    /**
     * Get lastname
     *
     * @return string 
     */
    public function getLastname()
    {
        return $this->lastname;
    }

    /**
     * Set deleted
     *
     * @param boolean $deleted
     * @return Player
     */
    public function setDeleted($deleted)
    {
        $this->deleted = $deleted;

        return $this;
    }

    /**
     * Get deleted
     *
     * @return boolean 
     */
    public function getDeleted()
    {
        return $this->deleted;
    }

    /**
     * Set role
     *
     * @param integer $role
     * @return Player
     */
    public function setRole($role)
    {
        $this->role = $role;

        return $this;
    }

    /**
     * Get role
     *
     * @return integer 
     */
    public function getRole()
    {
        return $this->role;
    }

    /**
     * Set owner
     *
     * @param Acme\UserBundle\Entity\User $owner
     * @return Player
     */
    public function setOwner(\Acme\UserBundle\Entity\User $owner)
    {
        $this->owner = $owner;

        return $this;
    }

    /**
     * Get owner
     *
     * @return Acme\UserBundle\Entity\User 
     */
    public function getOwner()
    {
        return $this->owner;
    }

    /**
     * Set team
     *
     * @param Acme\TeamBundle\Entity\Team $team
     * @return Player
     */
    public function setTeam(\Acme\TeamBundle\Entity\Team $team)
    {
        $this->team = $team;

        return $this;
    }

    /**
     * Get team
     *
     * @return Acme\TeamBundle\Entity\Team 
     */
    public function getTeam()
    {
        return $this->team;
    }
} 
```

和一个团队实体：

```
<?php

namespace Acme\TeamBundle\Entity;

use Symfony\Component\Validator\Constraints as Assert;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\TeamBundle\Entity\Team
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Acme\TeamBundle\Entity\TeamRepository")
 */
class Team
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $uniqueId
     *
     * @ORM\Column(name="uniqueId", type="string", length=15)
     */
    private $uniqueId;

    /**
     * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="teams")
     * @ORM\JoinColumn(nullable=false)
     */
    private $owner;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=50)
     * @Assert\NotBlank()
     */
    private $name;

    /**
     * @var string $homeColor
     *
     * @ORM\Column(name="homeColor", type="string", length=7, nullable=true)
     */
    private $homeColor;

    /**
     * @var string $awayColor
     *
     * @ORM\Column(name="awayColor", type="string", length=7, nullable=true)
     */
    private $awayColor;

    /**
     * @var string $homeShirt
     *
     * @ORM\Column(name="homeShirt", type="string", length=50, nullable=true)
     */
    private $homeShirt;

    /**
     * @var string $awayShirt
     *
     * @ORM\Column(name="awayShirt", type="string", length=50, nullable=true)
     */
    private $awayShirt;

    /**
     * @var string $teamLogo
     *
     * @ORM\Column(name="teamLogo", type="string", length=50, nullable=true)
     */
    private $teamLogo;

    /**
     * @var boolean $deleted
     *
     * @ORM\Column(name="deleted", type="boolean")
     */
    private $deleted = false;

    /**
     * @ORM\OneToMany(targetEntity="Acme\PlayerBundle\Entity\Player", mappedBy="team", cascade={"persist", "remove"})
     */
    private $players;

    /**
     * @ORM\OneToMany(targetEntity="Acme\MatchBundle\Entity\Match", mappedBy="homeTeam")
     */
    private $homeMatches;

    /**
     * @ORM\OneToMany(targetEntity="Acme\MatchBundle\Entity\Match", mappedBy="awayTeam")
     */
    private $awayMatches;

    /**
     * Create the user salt
     */
    public function __construct()
    {
        $this->players = new ArrayCollection();
        $this->homeMatches = new ArrayCollection();
        $this->awayMatches = new ArrayCollection();

        //TODO: just for test
        $this->uniqueId = substr(uniqid(), 0, 14);
    }

    public function getMatches()
    {
        return array_merge($this->awayMatches->toArray(), $this->homeMatches->toArray());
    }

    /* MANAGED BY DOCTRINE, DON'T EDIT */

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set uniqueId
     *
     * @param string $uniqueId
     * @return Team
     */
    public function setUniqueId($uniqueId)
    {
        $this->uniqueId = $uniqueId;

        return $this;
    }

    /**
     * Get uniqueId
     *
     * @return string 
     */
    public function getUniqueId()
    {
        return $this->uniqueId;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Team
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set homeColor
     *
     * @param string $homeColor
     * @return Team
     */
    public function setHomeColor($homeColor)
    {
        $this->homeColor = $homeColor;

        return $this;
    }

    /**
     * Get homeColor
     *
     * @return string 
     */
    public function getHomeColor()
    {
        return $this->homeColor;
    }

    /**
     * Set awayColor
     *
     * @param string $awayColor
     * @return Team
     */
    public function setAwayColor($awayColor)
    {
        $this->awayColor = $awayColor;

        return $this;
    }

    /**
     * Get awayColor
     *
     * @return string 
     */
    public function getAwayColor()
    {
        return $this->awayColor;
    }

    /**
     * Set homeShirt
     *
     * @param string $homeShirt
     * @return Team
     */
    public function setHomeShirt($homeShirt)
    {
        $this->homeShirt = $homeShirt;

        return $this;
    }

    /**
     * Get homeShirt
     *
     * @return string 
     */
    public function getHomeShirt()
    {
        return $this->homeShirt;
    }

    /**
     * Set awayShirt
     *
     * @param string $awayShirt
     * @return Team
     */
    public function setAwayShirt($awayShirt)
    {
        $this->awayShirt = $awayShirt;

        return $this;
    }

    /**
     * Get awayShirt
     *
     * @return string 
     */
    public function getAwayShirt()
    {
        return $this->awayShirt;
    }

    /**
     * Set teamLogo
     *
     * @param string $teamLogo
     * @return Team
     */
    public function setTeamLogo($teamLogo)
    {
        $this->teamLogo = $teamLogo;

        return $this;
    }

    /**
     * Get teamLogo
     *
     * @return string 
     */
    public function getTeamLogo()
    {
        return $this->teamLogo;
    }

    /**
     * Set deleted
     *
     * @param boolean $deleted
     * @return Team
     */
    public function setDeleted($deleted)
    {
        $this->deleted = $deleted;

        return $this;
    }

    /**
     * Get deleted
     *
     * @return boolean 
     */
    public function getDeleted()
    {
        return $this->deleted;
    }

    /**
     * Add players
     *
     * @param Acme\PlayerBundle\Entity\Player $players
     * @return Team
     */
    public function addPlayer(\Acme\PlayerBundle\Entity\Player $players)
    {
        $this->players[] = $players;

        return $this;
    }

    /**
     * Remove players
     *
     * @param Acme\PlayerBundle\Entity\Player $players
     */
    public function removePlayer(\Acme\PlayerBundle\Entity\Player $players)
    {
        $this->players->removeElement($players);
    }

    /**
     * Get players
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getPlayers()
    {
        return $this->players;
    }

    /**
     * Add homeMatches
     *
     * @param Acme\MatchBundle\Entity\Match $homeMatches
     * @return Team
     */
    public function addHomeMatche(\Acme\MatchBundle\Entity\Match $homeMatches)
    {
        $this->homeMatches[] = $homeMatches;

        return $this;
    }

    /**
     * Remove homeMatches
     *
     * @param Acme\MatchBundle\Entity\Match $homeMatches
     */
    public function removeHomeMatche(\Acme\MatchBundle\Entity\Match $homeMatches)
    {
        $this->homeMatches->removeElement($homeMatches);
    }

    /**
     * Get homeMatches
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getHomeMatches()
    {
        return $this->homeMatches;
    }

    /**
     * Add awayMatches
     *
     * @param Acme\MatchBundle\Entity\Match $awayMatches
     * @return Team
     */
    public function addAwayMatche(\Acme\MatchBundle\Entity\Match $awayMatches)
    {
        $this->awayMatches[] = $awayMatches;

        return $this;
    }

    /**
     * Remove awayMatches
     *
     * @param Acme\MatchBundle\Entity\Match $awayMatches
     */
    public function removeAwayMatche(\Acme\MatchBundle\Entity\Match $awayMatches)
    {
        $this->awayMatches->removeElement($awayMatches);
    }

    /**
     * Get awayMatches
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getAwayMatches()
    {
        return $this->awayMatches;
    }

    /**
     * Set owner
     *
     * @param Acme\UserBundle\Entity\User $owner
     * @return Team
     */
    public function setOwner(\Acme\UserBundle\Entity\User $owner)
    {
        $this->owner = $owner;

        return $this;
    }

    /**
     * Get owner
     *
     * @return Acme\UserBundle\Entity\User 
     */
    public function getOwner()
    {
        return $this->owner;
    }
} 
```

现在，我使用 app/console 创建了一个玩家表单类，并将 team 字段编辑为 Team 实体的一个实例，这样：

```
<?php

namespace Acme\PlayerBundle\Form;

use Acme\TeamBundle\Entity\TeamRepository;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class PlayerType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('shirtNumber')
            ->add('firstname')
            ->add('lastname')
            ->add('role')
            ->add('team', 'entity', array(
                'class' => 'AcmeTeamBundle:Team',
                'query_builder' => function(TeamRepository $er) {
                        $query = $er->createQueryBuilder('t');
                        return $query;
                    }
                ));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'        => 'Acme\PlayerBundle\Entity\Player',
            'csrf_protection'   => false
        ));
    }

    public function getName()
    {
        return 'player';
    }
} 
```

这是我的控制器的相关部分：

```
/**
 * Create a new player
 *
 * @Route(".{_format}", name="api_player_create")
 * @Method("POST")
 * @ApiDoc(
 *  description="Create a new player",
 *  statusCodes={
 *   201="Player created and informations are returned",
 *   400="Missing informations",
 *   403="The user isn't authorized"
 *  },
 *  input="Acme\PlayerBundle\Form\PlayerType",
 *  return="Acme\PlayerBundle\Entity\Player"
 * )
 *
 * @return Renders the player just created
 */
public function createPlayerAction()
{
    return $this->processForm(new Player());
}

/**
 * Edit a player
 *
 * @param integer $id The id of the player to be created
 *
 * @Route("/{id}.{_format}", name="api_player_patch", requirements={ "id": "\d+" })
 * @Method("PATCH")
 * @ApiDoc(
 *  description="Edit a player",
 *  statusCodes={
 *   200="Player is updated",
 *   400="Missing informations",
 *   403="The user isn't authorized"
 *  },
 *  input="Acme\PlayerBundle\Form\PlayerType",
 *  return="Acme\PlayerBundle\Entity\Player"
 * )
 *
 * @return Renders the player just edited
 */
public function editPlayerAction(Player $player)
{
    if ($player->getOwner() != $this->getUser()) {
        throw new ApiException\PermissionDeniedException;
    }
    return $this->processForm($player);
}

/**
 * Function to handle a form to create/edit a player
 *
 * @param Player $player The player to be created or edited
 *
 * @return Api Response
 */
private function processForm(Player $player)
{
    /**
     * Check if the player is new (to be created) or we're editing a player
     */
    $statusCode = is_null($player->getId()) ? 201 : 200;
    $form = $this->createForm(new PlayerType(), $player);
    $form->bind($this->getRequest());
    if ($form->isValid()) {
        if($player->getTeam()->getOwner() != $this->getUser()) {
            throw new ApiException\PermissionDeniedException;
        }
        $player->setOwner($this->getUser());
        $this->entityManager->persist($player);
        $this->entityManager->flush();

        return $this->apiResponse->getResponse($player, $statusCode);
    }

    return $this->apiResponse->getResponse($form, 400, 'Missing arguments');
} 
```

播放器创建工作正常，播放器编辑没有，当用户发出 api 请求时，在 url 中传递 ID 和我得到的播放器名称：

```
Catchable Fatal Error: Argument 1 passed to Acme\PlayerBundle\Entity\Player::setTeam() must be an instance of Acme\TeamBundle\Entity\Team, null given, called in /Volumes/Dati/Users/alessandro/Sites/acme-api/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php on line 538 and defined in /Volumes/Dati/Users/alessandro/Sites/acme-api/src/Acme/PlayerBundle/Entity/Player.php line 278 
```

似乎表单试图将 Team 设置为 null，为什么？

我已经尝试将发送而不是团队作为表单参数，但它不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:20:06.180

发现表单中的空未发送字段是 symfony 中的默认行为。在 symfony 中有一个对部分表单绑定的开放请求。现在，一个人创建了一个表单事件订阅者，它使用实际值添加缺少的字段：

[https://gist.github.com/3720535](https://gist.github.com/3720535)

这是他的代码：

```
<?php
namespace Foo;

use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormEvent;

/**
 * Changes Form->bind() behavior so that it treats not set values as if they
 * were sent unchanged.
 *
 * Use when you don't want fields to be set to NULL when they are not displayed
 * on the page (or to implement PUT/PATCH requests).
 */
class PatchSubscriber implements EventSubscriberInterface
{
    public function onPreBind(FormEvent $event)
    {
        $form = $event->getForm();
        $clientData = $event->getData();
        $clientData = array_replace($this->unbind($form), $clientData ?: array());
        $event->setData($clientData);
    }

    /**
     * Returns the form's data like $form->bind() expects it
     */
    protected function unbind($form)
    {
        if ($form->hasChildren()) {
            $ary = array();
            foreach ($form->getChildren() as $name => $child) {
                $ary[$name] = $this->unbind($child);
            }
            return $ary;
        } else {
            return $form->getClientData();
        }
    }

    static public function getSubscribedEvents()
    {
        return array(
            FormEvents::PRE_BIND => 'onPreBind',
        );
    }
} 
```

要添加到表单中，您必须在表单类中编辑 buildForm 方法：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $subscriber = new PatchSubscriber();
    $builder->addEventSubscriber($subscriber);
    $builder->add('name');
    ....
} 
```

在这种情况下，您可以使用 PATCH REST 请求仅通过发送的字段来编辑实体

# eclipse - Eclipse 无法导入在 maven 中定义为依赖项的包

> ID：13401058
> 
> 赞同：1
> 
> 时间：2012-11-15T15:45:28.753
> 
> 标签：eclipse, maven, import, maven-eclipse-plugin

我已经使用 subclipse 将一个 maven 项目检出到 eclipse 中。

我尝试在我的项目中使用 spring 框架，并将其定义为必需的依赖项：

```
 <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-expression</artifactId>
    <version>3.0.5.RELEASE</version>
  </dependency> 
```

我通过将 M2_REPO 添加到我的 CLASS_PATH 中添加了 maven 存储库。我通过在 cmd 提示符下执行此命令来做到这一点：

```
mvn -Declipse.workspace="your Eclipse Workspace" eclipse:configure-workspace 
```

我在 Eclipse 首选项中验证了 M2_REPO 变量在我的 Classpath 变量中，并且该路径引用了 Maven 的存储库目录。

但是，像这样的导入语句：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext; 
```

不起作用。

这里有什么问题？

编辑：

由于这是根目录下的一个模块，我认为我不需要在这个模块中再次定义对 Spring 的依赖。但是，包括（从根目录复制粘贴列表：s）解决了这个问题。但这不可能是正确的，因为根目录中的 POM.xml 已经要求包含此模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:33:31.853

如果您不使用 m2eclipse 并且 mvn eclipse:configure-workspace 不起作用，请尝试将 M2_REPO 添加到 eclipse 中的类路径变量中。

> Windows-> Preferences -> Java -> Build Path -> ClassPath Variables -> new -> M2_REPO 或 MAVEN_REPO 以及您的 Repo 位置

# sql - 使用 SQL 将 UPR 页面放入一组表中

> ID：13401059
> 
> 赞同：1
> 
> 时间：2012-11-15T15:45:32.813
> 
> 标签：sql, database, relational-database, oracle-sqldeveloper

我正在尝试将 UPR 页面放入数据库的一组表中，到目前为止，我已经想出了以下表格

*   UPR：代码、名称、结构、附录、文件
*   结构：STR_NAME、STR_CODE
*   附录：APP_NAME、APP_CODE
*   文档：DOC_NAME、DOC_CODE

这些表将用于存储 UPR 的每个部分，但是我在尝试解决如何将所有表连接起来以使它们能够一起工作并且有一种方法可以拉动所有相关附录时遇到了麻烦，文件和结构一起为一个UPR代码。我有一种感觉，我可能在这里失明，但看不到如何解决这个问题，任何帮助都将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:24:56.887

```
CREATE TABLE UPR
(
    CODE  NUMBER(9) NOT NULL,
    NAME  VARCHAR2(50)
)
;

ALTER TABLE UPR ADD CONSTRAINT PK_UPR 
    PRIMARY KEY (CODE) 
 USING INDEX 
;

    -- -------------------------------------

CREATE TABLE STRUCTURES
(
    ID        NUMBER(9) NOT NULL,
    UPR       NUMBER(9) NOT NULL,
    SEQUENCE  NUMBER(9) NOT NULL,
    NAME      VARCHAR2(50) NOT NULL
)
;

ALTER TABLE STRUCTURES ADD CONSTRAINT PK_STRUCTURES 
    PRIMARY KEY (ID) 
 USING INDEX 
;

ALTER TABLE STRUCTURES ADD CONSTRAINT FK_STRUCTURES_UPR 
    FOREIGN KEY (UPR) REFERENCES UPR (CODE)
; 
```

“附录”和“文档”的结构将遵循与“结构”相同的模式。

这有帮助吗？

**编辑**

要构建完整的 UPR，您将执行类似的操作

```
SELECT S.NAME, D.SEQUENCE FROM STRUCTURES S WHERE CODE = :SomeCode
UNION SELECT A.NAME, D.SEQUENCE FROM APPENDIX A WHERE A.UPR = S.CODE
UNION SELECT D.NAME, D.SEQUENCE FROM DOCUMENT D WHERE D.UPR = S.CODE
ORDER BY 2 
```

顺便一提 ？什么是普遍定期审议？:)

# php - ±（加/减字符）转换为黑色问号

> ID：13401068
> 
> 赞同：3
> 
> 时间：2012-11-15T15:46:01.297
> 
> 标签：php, html, ascii, special-characters

我正在输入的一些文本包括几个向上和向下箭头（↑ 和 ↓），以及一个加号/减号 (±)。

这些特殊字符作为 HTML ASCII 输入：`&uarr;` `&darr;` `&plusmn;`. 在 POST 上，HTML 在保存到 MySQL 表之前使用 htmlentities 进行处理。

```
$data   = htmlentities($data,ENT_QUOTES); 
```

需要注意的是，向上和向下箭头符号不会转换为黑色箭头。发布数据后，然后返回编辑相同的文本 - 我在 HTML 源代码中看到`&uarr;`和。`&darr;`只有`&plusmn;`被转换为黑色问号。

检查 MySQL 中保存的文本确认所有三个符号都存储如下（这是在应用 htmlentites 之后）：`&amp;uarr;` `&amp;darr;`和`&amp;plusmn;`.

然后 PHP 应用程序使用 unhtmlentities($data) [下文] 将实体转换回符号。这适用于`&uarr;`and `&darr;`。这是我输的地方`&plusmn;`。

非实体：

```
function unhtmlentities ($string) {
    // Restores HTML code to inserted data
    // use when pulling from Database
    $trans_tbl = get_html_translation_table (HTML_ENTITIES);
    $trans_tbl = array_flip ($trans_tbl);
    return strtr ($string, $trans_tbl);
    // $c = unhtmlentities($a);
} 
```

为什么这适用于 uarr 和 darr，但不适用于 plusmn？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:54:27.640

如果您仍然`&plusmn;`在发送到浏览器的源中看到，但**`<?>`**显示了 a，那么很可能是您的浏览器的故障。检查您的字符编码设置为。

编辑：就像马里奥评论的那样，也可能只是您使用的字体中不存在该字符。

# memory - 如何在多个 cuda 设备上使用常量内存

> ID：13401073
> 
> 赞同：1
> 
> 时间：2012-11-15T15:46:13.527
> 
> 标签：memory, cuda, constants, device

我正在尝试使用我拥有的两个 cuda 设备（我现在正在尝试使用 GF 690GTX 这实际上是两个独立的设备），并且我的程序使用常量内存将数据传输到设备。

我清楚地了解我应该如何处理全局内存以在两个设备中使用它：

```
//working with device 0
cudaSetDevice(0);
void* mem_on_dev_0 = cudaMalloc(...);
cudaMemcpy(mem_on_dev_0, mem_on_host, ...);
kernel_call<<<...>>>(mem_on_dev_0);

//working with device 1
cudaSetDevice(1);
void* mem_on_dev_1 = cudaMalloc(...);
cudaMemcpy(mem_on_dev_1, mem_on_host, ...);
kernel_call<<<...>>>(mem_on_dev_1); 
```

但是当使用常量内存时，使用它的普通方法是在文件中的某处声明常量变量，然后使用“符号”函数来处理它：

```
// What device this memory is on?
__device__ __constant__ float g_const_memory[CONST_MEM_SIZE];

// dev_func can be told to be called on any device
__global__ void dev_func()
{
    //using const memory
    float f = g_const_memory[const_index];
}

void host_func()
{
    //cudaSetDevice(0);  //any sense?
    cudaMemcpyToSymbol(g_const_memory, host_mem, ...);
    dev_func<<<...>>>();
} 
```

在问这个问题之前我已经用谷歌搜索了很多，但我没有找到任何答案。真的没有办法吗？

# ios - 在情节提要的模式堆栈中关闭/委托第二个视图

> ID：13401074
> 
> 赞同：0
> 
> 时间：2012-11-15T15:46:16.293
> 
> 标签：ios, delegates, storyboard, modal-dialog

我有一个 TableView，它描述了一本书，其中的部分代表了代表经文的章节和行。

在这个 TableView 的顶部，我在导航栏中有一个按钮，允许“导航”。

此导航按钮的目的是让用户无需手动滚动（可能很长）即可轻松跳转到给定的章节/诗句。

按下按钮时，称为显示本书的所有可用章节的表观视图控制器，并且选择了一章时，将另一个表视图称为显示当前章节中可用经文的列表。Finally when the line is chosen the tablew view displaying the book should scroll to the given index/row.

所以这个想法：从代表这本书的表格视图中，我将章节视图称为模态，将经文称为章节视图的推动。

![在此处输入图像描述](../Images/69041501f886ff0315daae2342bc399a.png)

我的问题是我没有得到管理委托并从第二个模式视图中解散的意义。

使用 1 个模态视图，我会做这样的事情。

在显示的 VC（视图控制器）中，我添加了协议和委托

```
@protocol ChapitresTableViewControllerDelegate <NSObject>
- (void)didDismissPresentedViewController;
@end

@interface ChapitresTableViewController : UITableViewController
@property (nonatomic, weak) id <ChapitresTableViewControllerDelegate> delegate;
@end 
```

我在 didSelectRow

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.delegate didDismissPresentedViewController];
} 
```

在显示 VC 我添加以下行

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  ChapitresTableViewController *chapitresTableViewController = segue.destinationViewController;
  chapitresTableViewController.delegate = self;
} 
```

而且当然

```
-(void)didDismissPresentedViewController
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

如果我想在第一个模态 VC 之后关闭，这会很好用，但我想要的是在我点击第二个后关闭第二个。好的，我可以在第二个模态 VC 中编写协议和内容，但是我如何设法将委托发送到第二个 VC。

希望我的问题足够清楚，解释起来并不容易。

有人了解我并可以帮助我吗？

**注意**：我知道现在我没有将任何参数传递回委托，稍后我将执行此操作来进行滚动。现在我只想能够关闭第二个视图，然后我将添加所需的东西以将参数传递回委托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:09:24.560

我相信你可以做到这一点，但是比起带有导航栏的模态视图控制器，使用导航控制器不是更容易吗？然后，您可以使用[`popToViewController`](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934-CH3-SW5)返回到特定视图控制器的任意多个级别。您可以传递`UIViewController*`您可能想要弹出到的各种控制器，或者以编程方式执行此操作：例如[，如何从 navigationController(viewControllers/stack) 弹出指定 viewController？](http://www.stackoverflow.com/a/13393333/1271826)

在这种情况下，以前的视图控制器被保留。您弹出的那些被释放（就像您关闭的模态的被释放），但是您从中推送的那些被保留（就像您在模态世界中呈现的那些被保留）。

但是，如果这本书很大，则您必须对内存使用情况敏感。因此，您可能希望`didReceiveMemoryWarning`在模态序列或推送序列中处理释放先前视图的模型数据，在这种情况下，`viewDidAppear`您需要查看您的应用程序是否必须释放内存以响应`didReceiveMemoryWarning`和在这种情况下重新加载它。但这是所期望的行为，无论哪种方式，如果需要，优雅地释放页面（并在特定视图重新出现时重新加载它们），但如果可以的话，将其保留在内存中。

最后，您可能还想考虑使用[`UIPageViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html). 鉴于您所描述的，我想`UIPageViewController`首先考虑，`UINavigationController`然后推动 segues，然后使用模态 segues。

# php - MySQL从两个不同的表中选择唯一的？

> ID：13401076
> 
> 赞同：1
> 
> 时间：2012-11-15T15:46:17.970
> 
> 标签：php, mysql

我有两张不同的桌子，我想获得唯一的，就好像它们在一张桌子上一样。表结构相同。我尝试过`UNION`, `UNION DISTINCT`, `SELECT DISTINCT with a UNION`, 和各种各样的东西。但我仍然得到重复和东西。

无论如何都可以获得唯一的电子邮件地址以及其他数据

```
SELECT DISTINCT email_address, first_name, last_name,
    street_address, city, postal_code, province, created_date
FROM entries
WHERE subscribe='1' 
```

这是从一张桌子上得到的。

请注意，如果我只想要电子邮件地址，UNION 可以。但是当我添加其他数据时，它不再做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:54:27.170

```
 (SELECT /*Fields*/ FROM entries e1)
    UNION
    (SELECT /*same Fields*/ FROM entries2 e2)
    WHERE subscribe=1
    GROUP BY email_address 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:53:10.730

尝试这个

```
SELECT email_address, first_name, last_name,
    street_address, city, postal_code, province, created_date
FROM 
    (SELECT * FROM entries WHERE subscribe='1'
    UNION
    SELECT * FROM entries2 WHERE subscribe='1') AS tmp
GROUP BY email_address 
```

# javascript - Javascript 正则表达式对象无法识别 {n,m}

> ID：13401078
> 
> 赞同：0
> 
> 时间：2012-11-15T15:46:21.547
> 
> 标签：javascript, regex

我正在尝试在 JS 中编写一个正则表达式来识别最多七次的任何数字，然后是“-”，然后是 2 个数字，然后是“-”，然后是一个数字。这是我拥有的简单正则表达式：

```
/\d{1,7}-\d{2}-\d/g 
```

这应该匹配以下字符串：

*   `123-12-7`
*   `1-12-7`
*   `1234567-12-7`

但不是`12345678-12-1`

但是，以上内容返回 true。当第一组中有任意数量的数字时，正则表达式返回 true。

JavaScript Regex 对象不支持 {n,m} 吗？

这是我正在谈论的一个例子。

```
var pattern = new RegExp(/\d{1,7}-\d{2}-\d/);
alert(pattern.test("12345678-13-1")); 
```

[http://jsfiddle.net/XTRAc/1/](http://jsfiddle.net/XTRAc/1/)现场示例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T15:49:23.537

它匹配`2345678-13-1`。您需要将其[锚定](http://www.regular-expressions.info/anchors.html)到字符串的开头和结尾：

```
/^\d{1,7}-\d{2}-\d$/ 
```

`RegExp`但是请注意，（正如 Rocket Hazmat 指出的那样）如果您使用正则表达式文字（没有字符串引号的东西），则不需要使用构造函数。

[JSFiddle](http://jsfiddle.net/bSPg8/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T15:48:19.343

它确实支持[`{min,max}`-syntax](http://www.regular-expressions.info/repeat.html)，但[`.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)会[`.test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)尝试查找匹配的子字符串。您将必须包括[开始和结束锚点](http://www.regular-expressions.info/anchors.html)。另请注意，您应该使用构造函数从字符串*或*`RegExp`正则表达式文字构建正则表达式，但不能同时使用两者（参见[MDN：创建正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Creating_a_Regular_Expression)）。

 *```
/^\d{1,7}-\d{2}-\d$/
new RegExp("^\\d{1,7}-\\d{2}-\\d$") // the worse choice 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:48:51.630

您正在错误地构建您的正则表达式。试试这个（注意锚点，它确保字符串只包含你的模式）：

```
var pattern= /^\d{1,7}-\d{2}-\d$/; 
```

否则现有字符串的子集将匹配您的正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T16:04:52.967

如果您需要**验证整个输入字符串**，请使用正则表达式模式

```
/^\d{1,7}-\d{2}-\d$/ 
```

* * *

如果您需要**验证整行输入字符串**，请使用正则表达式模式

```
/^\d{1,7}-\d{2}-\d$/mg 
```

* * *

如果您需要**在输入字符串中查找匹配项**，请使用正则表达式模式

```
/(?:\D|^)(\d{1,7}-\d{2}-\d)(?!\d)/g 
```

...并`$1`因此使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T15:51:47.353

它确实支持 {n,m} 部分，这里的问题是您的示例匹配`2345678`，因此您需要一种在第一组数字之前匹配字符的方法*

# php - Gif 图像仅在完全加载后调整大小

> ID：13401079
> 
> 赞同：2
> 
> 时间：2012-11-15T15:46:23.903
> 
> 标签：php, javascript

Gif 只会在 gif 完全加载后调整大小。如何在加载时调整 gif 大小？

我使用了多个 gif，所以它们有不同的尺寸，所以我不能只做通常的 100% 高度和宽度，我想保持这些方面的正确性。

**我用来调整 gif 大小的脚本**

```
<script>
function resizeToMax(id){
    myImage = new Image() 
    var img = document.getElementById(id);
    myImage.src = img.src; 
    if(myImage.width / document.body.clientWidth > myImage.height / document.body.clientHeight){
        img.style.width = "100%";
    } else {
        img.style.height = "100%";
    }
}
</script> 
```

**显示图像的 php**

```
<?php 
echo '<img id="image" onload="resizeToMax(this.id)" src="gifs/' . $myTokens[1] . '/' . $myTokens[2] . '.gif">';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:50:23.860

您可以做的一件事是在加载图像之前隐藏图像（例如添加一个 CSS 类），然后在您的`resizeToMax` 函数中删除隐藏图像的 CSS 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:49:23.037

使用`window.onload`事件确保您的调整大小在窗口加载开始时有效。

```
<script>
window.onload = function() {
    resizeToMax("image");
};

function resizeToMax(id){
    myImage = new Image() 
    var img = document.getElementById(id);
    myImage.src = img.src; 
    if(myImage.width / document.body.clientWidth > myImage.height / document.body.clientHeight){
        img.style.width = "100%";
    } else {
        img.style.height = "100%";
    }
    document.getElementById(id).style.display = "block";
}
</script>

<?php 
echo '<img id="image" style="display:none;" src="gifs/' . $myTokens[1] . '/' . $myTokens[2] . '.gif">';
?> 
```

或者在 css 中隐藏您的图像并在调整大小后将其显示在您的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:51:54.340

仅当图像完成加载时才会触发 onload 事件。同时，您可以使用 css 的宽度和/或高度属性，甚至是最大宽度和最大高度。

风险是您还不知道图像比例，因此图像在加载时可能看起来失真。

恕我直言，最好的解决方案是用占位符替换图像，加载图像而不显示它（例如，在屏幕窗口之外），然后调整大小并将其显示在正确的位置，删除占位符。

# mysql - 杀死大型 InnoDB 回滚会伤害我的表吗？

> ID：13401080
> 
> 赞同：0
> 
> 时间：2012-11-15T15:46:24.713
> 
> 标签：mysql, innodb, rollback

使用 phpMyAdmin 的“复制数据库”功能，我开始将一个大约 5M 行的数据库复制到同一台服务器上的另一个数据库。大约中途（2 小时左右）服务器开始崩溃，我不得不终止该`mysqld`进程。

MySQL 现在正在杀死我的服务器，试图回滚在我杀死进程之前它已经启动的表。它现在已经运行了 50 多分钟，一切都变慢了。

使用`show engine innodb status`我能够找到进程号。我应该杀死这个进程吗？**它会伤害我的桌子，或伤害任何东西，或者停止回滚是否安全？**

这是条目。按照目前的速度，完成剩下的 983k 日志条目似乎还需要大约 3 个小时。

`---TRANSACTION 0 1853619464, ACTIVE 3214 sec, process no 5552, OS thread id 3028249488 ROLLING BACK , undo log entries 983813`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:49:32.317

如果你杀死你的回滚，它只会在下次再次进行回滚。它必须完成回滚以使表恢复到一致状态。

# nhibernate - Fluent NHibernate 表命名约定不起作用

> ID：13401081
> 
> 赞同：4
> 
> 时间：2012-11-15T15:46:33.500
> 
> 标签：nhibernate, fluent-nhibernate, conventions

我有以下约定，我将其加载到我的 FNH 配置中

```
public class TableNameConvention : IClassConvention, IClassConventionAcceptance
{
    public void Accept(IAcceptanceCriteria<IClassInspector> criteria)
    {
        criteria.Expect(x => x.TableName, Is.Not.Set);
    }

    public void Apply(IClassInstance instance)
    {
        var tableName = instance.EntityType.Name.Pluralise();

        instance.Table(tableName);
    }
} 
```

我没有在我的*任何*映射上指定表名，但没有应用此约定。我正在使用 Fluent NHibernate 1.4.1.1。谁能发现我可能做错了什么？

**更新**

约定按以下方式加载：

```
public static NHibernate.Cfg.Configuration BuildConfiguration()
{
    var connectionStringName = "mydb";
    return Fluently.Configure(new NHibernate.Cfg.Configuration())
        .Database(MsSqlConfiguration
                      .MsSql2008.ConnectionString(c => c.FromConnectionStringWithKey(connectionStringName))
                      .Dialect<MsSql2008Dialect>()
                      .AdoNetBatchSize(50))
        .Mappings(m =>
        {
            m.FluentMappings.AddFromAssemblyOf<Profile>();
            m.FluentMappings.Conventions.Add(DefaultLazy.Always(), DynamicUpdate.AlwaysTrue(), DynamicInsert.AlwaysTrue());
            m.FluentMappings.Conventions.AddFromAssemblyOf<HiLoConvention>();
        })
        .ExposeConfiguration(config => config.SetProperty(NHibernate.Cfg.Environment.CurrentSessionContextClass, typeof(ManagedWebSessionContext).AssemblyQualifiedName))
        .ExposeConfiguration(HiLoConvention.CreateScript)
        .ExposeConfiguration(RunSchemaUpdate)
        .BuildConfiguration();
} 
```

所有约定与上面在 .AddFromAssembly() 方法调用中引用的 HiLoConvention 位于相同的程序集和命名空间中。

**更新 2：**

问题出在 Accept() 方法中，因为如果我删除了这个方法（以及类声明中的 IClassConventionAcceptance 接口），那么就会应用约定。我也尝试过这种期望无济于事

```
criteria.Expect(x => string.IsNullOrEmpty(x.TableName)) 
```

原始代码适用于 Fluent 1.2.1 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T08:34:25.120

这个问题很老，但也许这可以帮助其他人：

我假设您想为每个实体设置约定，除非在地图中明确指定了表名。因此，要实现这一点，您只需执行以下操作：

```
public class TableNameConvention : IClassConvention
{
    public void Apply(IClassInstance instance)
    {
        var tableName = instance.EntityType.Name.Pluralise();

        instance.Table(tableName);
    }
} 
```

这将对所有实体应用约定，除非在地图中明确指定了 TableName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:13:46.843

你有没有尝试过

```
m.FluentMappings.ConventionDiscovery.AddFromAssemblyOf<HiLoConvention>() 
```

代替

```
m.FluentMappings.Conventions.AddFromAssemblyOf<HiLoConvention>() 
```

# android - 安卓条码扫描器

> ID：13401083
> 
> 赞同：0
> 
> 时间：2012-11-15T15:46:53.963
> 
> 标签：android, barcode

我正在使用 Biggu 条形码库。

打包的库已经列出了使用演示和示例应用程序的所有内容。

但我没有找到类定义错误

```
 java.lang.NoClassDefFoundError: com.biggu.scannerdemo.ScannerActivity 
```

但是该类在包中，并且清单文件列出了所有活动。构建路径`biggu_scanner-1.1.0.jar`在其路径中有文件。

```
package com.biggu.scannerdemo;

import com.biggu.barcodescanner.client.android.Intents;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Demo extends Activity {

private static final int SCANNER_REQUEST_CODE = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button)findViewById(R.id.btn);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Intent intent = new Intent(v.getContext(), com.biggu.scannerdemo.ScannerActivity.class);
            intent.putExtra(Intents.Preferences.ENABLE_BEEP, true);
            intent.putExtra(Intents.Preferences.ENABLE_VIBRATE, true);

            ((Activity)v.getContext()).startActivityForResult(intent, SCANNER_REQUEST_CODE);
        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == Activity.RESULT_OK && requestCode == SCANNER_REQUEST_CODE) {

        Bundle extras = data.getExtras();
        String result = extras.getString("SCAN_RESULT");
        TextView textView = (TextView)findViewById(R.id.txt);
        textView.setText(result);
    }
}} 
```

ScannerActivity 具有以下代码

```
package com.biggu.scannerdemo;

import com.biggu.barcodescanner.client.android.CaptureActivity;

public class ScannerActivity extends CaptureActivity {

@Override
public int get_R_id_preview_view() {

    return R.id.preview_view;
}

@Override
public int get_R_id_viewfinder_view() {

    return R.id.viewfinder_view;
}

@Override
public int get_R_layout_scanner() {

    return R.layout.scanner;
}

@Override
public int get_R_raw_beep() {

    return R.raw.beep;
}
} 
```

安卓清单文件

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.biggu.scannerdemo"
  android:versionCode="1"
  android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Demo"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".ScannerActivity"
        android:label="Scanner Activity" android:screenOrientation="landscape"
        android:configChanges="orientation|keyboardHidden" android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
    </activity>

</application>
<uses-sdk android:minSdkVersion="4" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.FLASHLIGHT" /> 
```

尝试一切设置正确谁能让我知道代码中可能有什么问题。期待您的回复。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:53:01.570

您必须确保在构建 APK 时导出您的库。

在 Project properties > Java Build Path > Order and Export => 检查你的库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:48:23.297

您需要在项目首选项中添加库。

# facebook - 在“通过应用程序”链接中添加 facebook 页面

> ID：13401085
> 
> 赞同：0
> 
> 时间：2012-11-15T15:46:58.380
> 
> 标签：facebook, facebook-apps

我开发了一个 android 移动应用程序，它发布在 Facebook 墙上。因此，在发布帖子后，它会在帖子下方显示**“通过 MyAppName”**。它显示为一个链接。如果我点击它，它会显示 **The page you requested was not found**。

现在我想用这个链接添加一个 Facebook 页面，假设我的应用程序有一个宣传页面。或者可能是我在 Play 商店中的应用程序链接的 URL。

我怎样才能做到这一点？如果我这样做，我的应用程序是否会产生负面影响！目前，该应用的 Facebook 开发者网站上的**“选择您的应用如何与 Facebook 集成**”下的**“原生 Android 应用”**是目前唯一选择的选项 。我已经搜索了很多，但找不到任何东西............请帮助......

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:50:52.763

这通常链接到 Canvas URL（开发设置）。如果您没有设置一个，您会收到错误消息。因此，如果您希望链接指向某个地方，只需使用画布 URL 并重定向到页面。

请记住，您需要一个带有 SSL 的服务器，顺便说一句。**

# java - 在 Play 2 框架 (Java) 中，如何在身份验证后将用户对象添加到会话

> ID：13401091
> 
> 赞同：0
> 
> 时间：2012-11-15T15:47:05.757
> 
> 标签：java, playframework, playframework-2.0

我查看了[“zentasks”示例代码](https://github.com/playframework/Play20/tree/master/samples/java/zentasks)来学习一些基本的用户登录和安全知识。Appication 控制器有一个[authenticate 方法](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Application.java#L41)，在该方法期间调用[User.authenticate 方法](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Application.java#L21)。以下是这些链接中的几个代码片段：

```
public static Result authenticate() {
    Form<Login> loginForm = form(Login.class).bindFromRequest();
    if(loginForm.hasErrors()) {
        return badRequest(login.render(loginForm));
    } else {
        session("email", loginForm.get().email);
        return redirect(
            routes.Projects.index()
        );
    }
}
...
public static class Login {

    public String email;
    public String password;

    public String validate() {
        if(User.authenticate(email, password) == null) {
            return "Invalid user or password";
        }
        return null;
    }

} 
```

如您所见，如果它进行了身份验证（即找到了一个用户对象），该`authenticate`方法会将“电子邮件”添加到会话中。我想添加完整的用户对象，但是在我有会话的控制器操作中，我没有`User`对象。我不想重新查询数据库，我想使用`User`刚刚在`Login.validate`. 这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:28:37.077

您是否有理由不能简单地将字段添加到您的登录类？

```
public static class Login {

    public String email;
    public String password;
    public User user;

    public String validate() {
        user = User.authenticate(email, password);
        if(user == null) {
            return "Invalid user or password";
        }
        return null;
    }
} 
```

并不是说这一定会对您有所帮助，查看 API 似乎您无法将对象添加到会话中，只能添加字符串。

[http://www.playframework.org/documentation/api/2.0.4/java/play/mvc/Http.Session.html](http://www.playframework.org/documentation/api/2.0.4/java/play/mvc/Http.Session.html)

# c - Netfilter 字符串模块示例用法

> ID：13401096
> 
> 赞同：6
> 
> 时间：2012-11-15T15:47:19.267
> 
> 标签：c, linux-kernel, netfilter

任何人都可以指出一些将 xt_string 模块与 netfilter 一起使用的示例或提供示例。我要做的是编写 netfilter 模块，该模块将丢弃在 skb->data 字段中包含特定字符串的数据包。

我最初只是简单地尝试过`strnstr(skb->data, "mystring", strlen("mystring"))`，但这似乎是解决这个问题的不正确方法（而且它似乎不起作用，因为我没有看到任何数据包被丢弃）。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T05:12:22.660

如果您的意思是在用户空间中使用 iptables 字符串匹配，这里有一个示例：

```
iptables -I INPUT 1 -p tcp --dport 80 -m string --string "domain.com" --algo kmp -j DROP 
```

或者如果你的意思是在内核空间，你可以使用提供 KMP/BM/FSM 算法的 textsearch API，以下示例来自内核源 lib/textsearch.c：

```
int pos;
struct ts_config *conf;
struct ts_state state;
const char *pattern = "chicken";
const char *example = "We dance the funky chicken";
conf = textsearch_prepare("kmp", pattern, strlen(pattern),
                             GFP_KERNEL, TS_AUTOLOAD);
if (IS_ERR(conf)) {
    err = PTR_ERR(conf);
    goto errout;
}
pos = textsearch_find_continuous(conf, &state, example, strlen(example));
if (pos != UINT_MAX)
    panic("Oh my god, dancing chickens at %d\n", pos);
textsearch_destroy(conf); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-18T10:34:41.107

您正在寻找的可能是这个，“skb_find_text”。它使用@Cong Wang 提到的linux infra。您还可以在内核代码中找到一些示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T15:57:52.470

这里是netfilter的源代码之后。这是一个丢弃收到的 ICMP ECHO 的模块

您可以使用此代码来帮助您开发模块。您只需从 skb 获取数据，然后检查它。

```
#define __KERNEL__
#define MODULE
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/slab.h>
#include <linux/list.h>
#include <linux/netfilter_ipv4.h>
#include <linux/ip.h>
#include <linux/icmp.h>
#include <linux/netdevice.h>
#include <linux/netfilter.h>

#include <linux/skbuff.h>
#include <linux/string.h>
#include <linux/inet.h>

MODULE_LICENSE("GPL");

static struct nf_hook_ops netfilter_ops_in;/* IP PRE ROUTING */
static struct nf_hook_ops netfilter_ops_out; /* NF_IP_POST_ROUTING */
struct sk_buff *sock_buff;
struct iphdr *ip_header;
struct net_device *dev;
char *in_face = "eth0";
char *out_face = "eth1";

void log_ip(int sadd,int dadd)
{
    int b1,b2,b3,b4;
    b1 = 255 & sadd;
    b2 = (0xff00 & sadd) >> 8;
    b3 = (0xff0000 & sadd) >> 16;
    b4 = (0xff000000 &sadd) >>24;

    printk("SrcIP: %d.%d.%d.%d",b1,b2,b3,b4);

    b1 = 255 & dadd;
    b2 = (0xff00 & dadd) >> 8;
    b3 = (0xff0000 & dadd) >> 16;
    b4 = (0xff000000 & dadd) >>24;

    printk("  DstIP: %d.%d.%d.%d",b1,b2,b3,b4);
}

unsigned int main_hook(unsigned int hooknum,
                        const struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int(*okfn)(struct sk_buff*))
{
    struct icmphdr* icmp;
    sock_buff = skb_copy(skb,GFP_ATOMIC);
    ip_header = (struct iphdr*)(sock_buff->network_header);
    //ip_header = ip_hdr(sock_buff);

    icmp = (struct icmphdr*) ((char*)ip_header + sizeof(struct iphdr));
    //icmp = icmp_hdr(skb); /* do not return a good value in all cases*/
    log_ip(ip_header->saddr,ip_header->daddr);
    printk("  Dev:%s\n",sock_buff->dev);

    if (icmp->type == ICMP_ECHO)
    {
        printk("ICMP ECHO received and droped\n");
        return NF_DROP;
    }
    return NF_ACCEPT;
}

int init_module(void)
{
    netfilter_ops_in.hook       = main_hook;
    netfilter_ops_in.pf         = PF_INET;
    netfilter_ops_in.hooknum    = NF_INET_PRE_ROUTING; /*NF_INET_PRE_ROUTING;*/
    netfilter_ops_in.priority   = NF_IP_PRI_FIRST;

    nf_register_hook(&netfilter_ops_in);

    printk(KERN_INFO "sw: init_module() called\n");
    return 0;
}

void cleanup_module(void)
{
    printk(KERN_INFO "sw: cleanup_module() called\n");
    nf_unregister_hook(&netfilter_ops_in);
    //nf_unregister_hook(&netfilter_ops_out);
    printk(KERN_INFO "sw: hook unregisted, quit called\n");
} 
```

# c# - 在 Silverlight 中同时为多个对象设置动画

> ID：13401097
> 
> 赞同：1
> 
> 时间：2012-11-15T15:47:21.513
> 
> 标签：c#, silverlight, mvvm

我目前正在进行 Silverlight 游戏。

目前有几个矩形每个都与一个类相关联，它们一次可以很好地动画化：

```
 foreach (Object O in Objects)
            {
        // Generate Random Number
                    Random rnd = new Random();
                    int r = rnd.Next(40);

                    // Move Object
                    O.Move
             } 
```

Object 中的 Move 方法使用 System.Threading.Thread.Sleep(10) 处理所有动画，包括暂停。

问题在于，此时对象 A 将移动并停止，然后对象 B 将移动并停止，然后对象 C。

一次为所有对象设置动画的最佳方法是什么？

立即想到的策略是为每个对象创建一个单独的线程，但这似乎有很多可能出错的地方。

我正在使用 MVVM，因此所有动画等都是在 XAML 之外处理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:55:40.863

如果您的对象负责在屏幕上绘制自己，那么每个对象都应该有自己的线程。但只有 UIThread 应该操作 GUI。因此，您应该将代码放在对象之外的超级对象（游戏板之王）中，它会告诉所有对象计算它们的位置，要求它们刷新并定义是否必须暂停。

如果 UI 从一个中心点（一个线程）刷新，您应该只在计算所有对象的位置并重绘屏幕时使用 Thread.Sleep。

无论如何，对象中的 Thread.Sleep 并不是很好。

哔叽

# java - 我可以将参数传递给 GWT 模块构造函数吗？

> ID：13401100
> 
> 赞同：3
> 
> 时间：2012-11-15T15:47:31.013
> 
> 标签：java, gwt, dependency-injection, gwt-gin

我有以下 GWT 模块：

```
public class FizzModule implements EntryPoint {
    private Buzz buzz;

    public FizzModule() {
        this(null);
    }

    public FizzModule(Buzz bz) {
        super();

        setBuzz(bz);
    }

    @Override
    public void onModuleLoad() {
        // ...etc.
    }
} 
```

我想`FizzModule`用一个`Buzz`实例“注入”。但是，我看到的所有 GWT 模块代码示例都没有使用构造函数。相反，它们从方法内部引导 DI 机制（通常是 ClientFactory 或 GIN）`onModuleLoad()`。这是 GWT 强制执行的，还是我可以在模块加载到客户端之前以某种方式注入模块？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:14:30.663

GWT 总是使用它的零参数构造函数来实例化你的模块。

（从技术上讲，我认为它使用`GWT.create()`，所以你可以使用延迟绑定规则，但这不会改变任何东西。它是如何实例化的）

顺便说一句，`Buzz`实例来自哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:18:38.237

您可以将参数添加到 URL 并使用 PlaceController。然后在模块加载时获取这些值。

```
public void onModuleLoad() {
    SimplePanel mainPanel = new SimplePanel();
    EventBus eventBus = GWT.creat(EventBus.class);
    // Start ActivityManager for the main widget with ActivityMapper
    ActivityManager activityManager = new ActivityManager(injector.getActivityMapper(),
            eventBus);
    activityManager.setDisplay(mainPanel);
    RootPanel.get().add(mainPanel);

    // Start PlaceHistoryHandler with our PlaceHistoryMapper
    AppPlaceHistoryMapper contentHistoryMapper = GWT.create(AppPlaceHistoryMapper.class);
    PlaceHistoryHandler historyHandler = new PlaceHistoryHandler(contentHistoryMapper);
    PlaceController placeController = new PlaceController(eventBus)
    historyHandler.register(placeController, injector.getEventBus(), new MainPlace());

    // Goes to the place represented on URL else default place
    historyHandler.handleCurrentHistory();
    if(placeController.getWhere() instanceof MainPlace) {
        (MainPlace).getFoo();
    }
}

public class MainPlace extends Place {

    private String foo;

    public MainPlace(String token) {
        String foo = token;
    }

    @Override
    public String getFoo() {
        return foo;
    }

    public static class Tokenizer implements PlaceTokenizer<MainPlace> {

        @Override
        public MainPlace getPlace(String token) {
            return new MainPlace(token);
        }

        @Override
        public String getToken(MainPlace place) {
            return place.getFoo();
        }
    }
} 
```

# xcode - Xcode 4 构建但不运行 OpenFrameworks 示例应用程序

> ID：13401106
> 
> 赞同：3
> 
> 时间：2012-11-15T15:47:44.747
> 
> 标签：xcode, openframeworks

我刚刚安装了 Xcode 4（在 Mac OS 10.8 上）并下载了 OpenFrameworks (OF) 库和示例。我将 Openframeworks 文件放在一个随机位置，当我打开 OF 示例应用程序并尝试使用 Xcode 构建和运行它们时，它告诉我“构建成功”但它实际上并没有运行应用程序。我不是开发人员，我不知道该怎么做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T20:02:06.223

是的，该链接说明了它，但把它放在这里：

问题是您没有在构建设置中为该方案选择应用程序。所以要做到这一点：

1.  单击方案的名称（它在左上角的“停止”按钮旁边，可能显示“emptyExample Debug”或“emptyExample Release”。
2.  点击“编辑方案...”
3.  将出现一个窗口。从左侧栏中选择“运行”。
4.  从窗口顶部的选项中选择“信息”。
5.  从“可执行文件”旁边的下拉菜单中，选择“emptyExample.app”

现在您的 OF 应用程序应该按预期构建。

# java - Java：将背景图像添加到框架

> ID：13401109
> 
> 赞同：-1
> 
> 时间：2012-11-15T15:47:52.240
> 
> 标签：java, swing, jpanel, paintcomponent, imageicon

> **可能重复：**
> [java swing 背景](https://stackoverflow.com/questions/2227423/java-swing-background-image)
> [图像在框架上绘制您自己的缓冲图像](https://stackoverflow.com/questions/11163925/drawing-your-own-buffered-image-on-frame)

我正在尝试将背景图像添加到我的框架中，但我所做的没有任何工作。

我设计了一个老虎机，由添加到容器中的几个面板组成。现在，我正在尝试为框架添加一个漂亮的背景。

我尝试使用绘画方法。但是，由于我已经在使用paint 方法来绘制卷轴图像，因此它不适用于背景。

我也尝试添加一个 JLabel，但是当我这样做时，它会覆盖所有内容或被覆盖，具体取决于我如何调用它。以下是我的代码；任何帮助都感激不尽：

```
import javax.swing.event.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import sun.audio.*;

public class SlotMachine extends JFrame {

    private Container c = getContentPane();

    private ImageIcon handleIcon = new ImageIcon("starWars/slot-handle.png");
    private ImageIcon quitIcon = new ImageIcon("starWars/quit2.jpg");
    private ImageIcon logoIcon = new ImageIcon("starWars/logo3.jpg");
    private ImageIcon BG = new ImageIcon("space.jpg");
    private JButton spin = new JButton("Spin", handleIcon);
    private JButton quit = new JButton("Quit", quitIcon);
    private JLabel logo = new JLabel(logoIcon);
    private JLabel bankTotal = new JLabel("Empire Total");
    private JLabel bankLabel = new JLabel("$1000.00");
    private JLabel playerLabel = new JLabel("$1000.00");
    private JLabel playerTotal = new JLabel("Rebellion Total");
    private Font newFont = new Font("DialogInput",Font.ITALIC, 25);
    private JPanel logoPanel = new JPanel(new BorderLayout());
    private JPanel moneyPanel = new JPanel(new GridLayout(1, 3, 5, 5));
    private JPanel imagePanel;
    private JPanel mainPanel = new JPanel(new BorderLayout());
    private JPanel bankPanel = new JPanel(new GridLayout(2, 1, 5, 5));
    private JPanel playerPanel = new JPanel(new GridLayout(2, 1, 5, 5));
    private JPanel panel = new JPanel(new FlowLayout());
    private SlotMachine.ReelPanel reel1 = new SlotMachine.ReelPanel();
    private SlotMachine.ReelPanel reel2 = new SlotMachine.ReelPanel();
    private SlotMachine.ReelPanel reel3 = new SlotMachine.ReelPanel();
    private AudioPlayer audioPlayer = AudioPlayer.player;
    private AudioDataStream continuousMusic;
    private AudioDataStream winMusic;
    private AudioDataStream force;
    private AudioDataStream force2;
    //private AudioDataStream intro;
    private ContinuousAudioDataStream audioLoop;
    private static final int DELAY = 1000;
    private static final double FUNDS = 1000.00;
    private static final float PRICE = 1;
    private int timerCounter = 0;
    private double bank = FUNDS;
    private double playerMoney = 1000.00;
    private Timer timer = new Timer(DELAY, new SlotMachine.TimeHandler());

public SlotMachine() {

        try {
            FileInputStream inputStream = new FileInputStream(new File("cantina4.wav"));
            AudioStream audioStream = new AudioStream(inputStream);
            AudioData audioData = audioStream.getData();
            continuousMusic = new AudioDataStream(audioData);            
            audioLoop = new ContinuousAudioDataStream(audioData);

            inputStream = new FileInputStream(new File("Cheer.wav"));
            audioStream = new AudioStream(inputStream);
            audioData = audioStream.getData();
            winMusic = new AudioDataStream(audioData);

            inputStream = new FileInputStream(new File("forceNN.wav"));
            audioStream = new AudioStream(inputStream);
            audioData = audioStream.getData();
            force = new AudioDataStream(audioData);

            inputStream = new FileInputStream(new File("force2NN.wav"));
            audioStream = new AudioStream(inputStream);
            audioData = audioStream.getData();
            force2 = new AudioDataStream(audioData);   

        } catch (Exception e) {
            e.printStackTrace();
        }

        audioPlayer.start(force);        

        // Set the font
        spin.setFont(newFont);
        quit.setFont(newFont);
        bankLabel.setFont(newFont);
        bankTotal.setFont(newFont);
        playerLabel.setFont(newFont);
        playerTotal.setFont(newFont);

        // implements start button
        spin.setVerticalTextPosition(SwingConstants.BOTTOM);
        spin.setHorizontalTextPosition(SwingConstants.CENTER);
        spin.setBackground(Color.GREEN);
        spin.setForeground(Color.WHITE);
        spin.setPreferredSize(new Dimension(100, 370));
        spin.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                audioPlayer.stop(force);
                audioPlayer.stop(force2);
                timer.start();
                reel1.startAnimation();
                reel2.startAnimation();
                reel3.startAnimation();
                spin.setEnabled(false);
                audioPlayer.start(audioLoop);
            }
        });
        // implements quit button    
        quit.setBackground(Color.RED);
        quit.setForeground(Color.WHITE);
        quit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                spin.setEnabled(true);
                reel1.stopAnimation();
                reel2.stopAnimation();
                reel3.stopAnimation();
                timer.stop();
                audioPlayer.stop(continuousMusic);
                audioPlayer.stop(audioLoop);
                audioPlayer.stop(winMusic);
                timerCounter = 0;
                audioPlayer.stop(force);
                audioPlayer.start(force2);
                imagePanel.repaint(); // without this call for repaint,  if you press quit but then choose to cancel
                //  the curent image and the next image would sometimes overlap this repaint may change the images but they do not overlap.
                if (JOptionPane.showConfirmDialog(SlotMachine.this,
                        "Are you sure you want to quit?", "Quit Option",
                        JOptionPane.OK_CANCEL_OPTION) == 0) {
                    audioPlayer.start(force2);
                    System.exit(0);
                }
            }
        });
        // create image panel
        imagePanel = new JPanel(new GridLayout(1, 3, 15, 15));
        imagePanel.setBackground(Color.WHITE);
        imagePanel.add(reel1);
        imagePanel.add(reel2);
        imagePanel.add(reel3);

        // create a panel to hold bank values
        bankTotal.setForeground(Color.WHITE);
        bankLabel.setForeground(Color.WHITE);
        bankPanel.setBackground(Color.GRAY);
        bankPanel.add(bankTotal);
        bankPanel.add(bankLabel);

        // panel to hold player values
        playerTotal.setForeground(Color.WHITE);
        playerLabel.setForeground(Color.WHITE);
        playerPanel.setBackground(Color.GRAY);
        playerPanel.add(playerTotal);
        playerPanel.add(playerLabel);

        // create a panel to add bank and player panels and quit button
        //moneyPanel.setBackground(Color.BLACK);
        moneyPanel.add(bankPanel);
        moneyPanel.add(playerPanel);
        moneyPanel.add(quit);
        moneyPanel.setOpaque(false);

        // this panel adds the reel panel and spin button
        panel.setPreferredSize(new Dimension(650, 350));
        //panel.setBackground(Color.BLACK);
        panel.add(imagePanel);
        panel.add(spin);
        panel.setOpaque(false);

        // create the logo panel
        logoPanel.add(logo);
        //logoPanel.setBackground(Color.BLACK);
        logoPanel.setOpaque(false);        

        mainPanel.add(logoPanel, BorderLayout.NORTH);
        mainPanel.add(panel, BorderLayout.CENTER);
        mainPanel.add(moneyPanel, BorderLayout.SOUTH);
        mainPanel.setOpaque(false);            

        //////////////////////////////////// background ???????????????????
        /// I could just set backgroung black but i want to add a image

        add(mainPanel, BorderLayout.CENTER);

        setTitle("Slot Machine");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        setSize(950, 750);
        setResizable(false);
        setLocationRelativeTo(null);                      

    }

    public static void main(String[] args) {
        new SlotMachine();
    }

    public class ReelPanel extends JPanel {

        private final static String IMAGE_NAME = "starWars/icon";
        protected ImageIcon images[];
        private int currentImage = 0;
        private final int ANIMATION_DELAY = 150;
        private final int TOTAL_IMAGES = 12;
        private int width;
        private int height;
        private Timer animationTimer = new Timer(ANIMATION_DELAY, new SlotMachine.ReelPanel.TimerHandler());
        private int index;

        public ReelPanel() {
            try {
                images = new ImageIcon[TOTAL_IMAGES];
                for (int count = 0; count < images.length; count++) {
                    images[ count] = new ImageIcon(IMAGE_NAME + (count + 1) + ".jpg");
                }

                width = images[ 1].getIconWidth();
                height = images[ 1].getIconHeight();
                currentImage = 0;
                index = 0;
                animationTimer.setInitialDelay(0);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        public void paintComponent(Graphics g) {

            super.paintComponent(g);

            images[ currentImage].paintIcon(this, g, 0, 0);

            if (animationTimer.isRunning()) {
                currentImage = (int) (Math.random() * TOTAL_IMAGES);
            }
        }

        public void startAnimation() {

            animationTimer.start();
        }

        public void stopAnimation() {
            animationTimer.stop();
        }

        public int getIndex() {
            return index;
        }

        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        public Dimension getPreferredSize() {
            return new Dimension(width, height);
        }

        private class TimerHandler implements ActionListener {

            public void actionPerformed(ActionEvent actionEvent) {
                repaint();
                index = currentImage;
            }
        }
    }

    private class TimeHandler implements ActionListener {

        public void actionPerformed(ActionEvent actionEvent) {
            audioPlayer.stop(winMusic);
            ++timerCounter;
            if (timerCounter == 2) {
                reel1.stopAnimation();
            } else if (timerCounter == 3) {
                reel2.stopAnimation();
            } else if (timerCounter == 4) {
                reel3.stopAnimation();
                audioPlayer.stop(continuousMusic);
                audioPlayer.stop(audioLoop);
                timerCounter = 0;
                timer.stop();
                spin.setEnabled(true);
                if (reel1.getIndex() == reel2.getIndex() && reel1.getIndex() == reel3.getIndex()) {
                    if (playerMoney > 0) {
                        playerMoney += bank;
                    } else {
                        playerMoney = bank;
                    }
                    bank = FUNDS;
                    winMusic.reset();
                    audioPlayer.start(winMusic);
                } else {
                    bank += PRICE;
                    playerMoney -= PRICE;
                }

                bankLabel.setText("$" + bank + 0);
                playerLabel.setText("$" + playerMoney + 0);
                if (playerMoney <= 0) {
                    JOptionPane.showMessageDialog(SlotMachine.this,
                            "You are out of funds. GAME IS OVER", "Error", JOptionPane.ERROR_MESSAGE);
                    System.exit(1);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:26:29.903

您可以简单地覆盖`paintComponent`您的`mainPanel`并在该方法中绘制背景图像。您应该选择适当的策略来绘制图像（拉伸、保持纵横比、水平/垂直重复），但这不应该太难。

这是一个在内容窗格上拉伸图像的示例。

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestBackgroundImage {

    private static final String BACKHGROUND_IMAGE_URL = "http://cache2.allpostersimages.com/p/LRG/27/2740/AEPND00Z/affiches/blue-fiber-optic-wires-against-black-background.jpg";

    protected void initUI() throws MalformedURLException {
        JFrame frame = new JFrame(TestBackgroundImage.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final ImageIcon backgroundImage = new ImageIcon(new URL(BACKHGROUND_IMAGE_URL));
        JPanel mainPanel = new JPanel(new BorderLayout()) {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(backgroundImage.getImage(), 0, 0, getWidth(), getHeight(), this);
            }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = super.getPreferredSize();
            size.width = Math.max(backgroundImage.getIconWidth(), size.width);
            size.height = Math.max(backgroundImage.getIconHeight(), size.height);
            return size;
        }

        };
        mainPanel.add(new JButton("A button"), BorderLayout.WEST);
        frame.add(mainPanel);
        frame.setSize(400, 300);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestBackgroundImage().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T20:41:28.470

1.  将主面板的布局设置为`BorderLayout`
2.  创建一个`JLabel`并将其添加到您的主面板
3.  使用背景图像设置标签的图像图标
4.  将标签的布局设置为您想要使用的任何内容
5.  像往常一样继续将组件添加到标签中

一个例子可以在[这里找到](https://stackoverflow.com/questions/12253979/place-jlabel-on-top-of-jlabel-with-image-in/12254063#12254063)

# hadoop - hadoop HDFS中是否有ln

> ID：13401118
> 
> 赞同：11
> 
> 时间：2012-11-15T15:48:13.197
> 
> 标签：hadoop, hdfs

`ln -s`hadoop HDFS中有吗？

例如：

我在 HDFS 中有 10 个文件

`/user/hadoop/input`，即`1.txt, 2.txt ... 10.txt`

HDFS 中的另一个目录是`/user/hadoop/test`

我只想将 1 个文件从 复制 `/user/hadoop/input/1.txt`到 `/user/hadoop/test/1.txt`.

最简单的方法是使用`hadoop dfs -cp /user/hadoop/1.txt /user/hadoop/test`.

但它会花费更多的时间和磁盘空间。有没有像shell这样的方法`hadoop dfs -ln /user/hadoop/1.txt /user/hadoop/test/1.txt`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T01:04:52.607

HDFS 支持符号链接。检查[1](http://blog.cloudera.com/blog/2010/08/what%E2%80%99s-new-in-apache-hadoop-0-21/) , [2](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileContext.html#createSymlink%28org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.Path,%20boolean%29) , [3](https://issues.apache.org/jira/browse/HDFS-245) , [4](https://issues.apache.org/jira/browse/HADOOP-6421)了解更多详情。因此，它可以使用 Java API 完成，但从未遇到过相同的 CLI。

# asp.net - “上次登录”存储过程的问题

> ID：13401119
> 
> 赞同：0
> 
> 时间：2012-11-15T15:48:15.063
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008

在 User 表中添加了“LastLogin”列，但是，它仅存储用户第一次登录受密码保护的页面时的最后登录日期。

当同一用户第二次登录时，单元格不会反映他的最后一次登录。这是我的存储过程：

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[UpdateLastLogin] (
@intUserID int
)
    -- Add the parameters for the stored procedure here
AS

SET NOCOUNT ON

UPDATE Users SET LastLogin = GETDATE() WHERE UserID = @intUserID 
```

这是我的代码：

```
public partial class Login : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
     {
        //SqlConnection oConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["XXXConnectionString"].ConnectionString);
        //SqlCommand oCommand = new SqlCommand();
        //oCommand.Connection = oConnection;
        //oCommand.CommandText = "UpdateLastLogin";
        //oCommand.CommandType = CommandType.StoredProcedure;
        //oCommand.Parameters.Add(new SqlParameter("@intUserID", SqlDbType.NVarChar, 10)).Value = Int32.MaxValue;
        //SqlDataAdapter adpt = new SqlDataAdapter(oCommand);
        //DataSet ds = new DataSet();
        //adpt.Fill(ds);
    }
    protected void loginButton_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["3GPSConnectionString"].ConnectionString);
        con.Open();
        string cmdStr = "Select count(*) from Users where UserName='" + userTextBox.Text + "'";
        SqlCommand Checkuser = new SqlCommand(cmdStr, con);
        int temp = Convert.ToInt32(Checkuser.ExecuteScalar().ToString());
        if (temp == 1)
        {
            string cmdStr2 = "Select Password from Users where UserName='" + userTextBox.Text + "'";
            SqlCommand pass = new SqlCommand(cmdStr2, con);
            string password = pass.ExecuteScalar().ToString();
            con.Close();

            if (password == pwdTextBox.Text)
            {
                Session["New"] = userTextBox.Text;
                Response.Redirect("/Protected/Default.aspx");
            }
            else
            {
                userCompareLbl.Visible = true;
                userCompareLbl.Text = "Invalid Password!";
            }
        }
        else
        {
            userCompareLbl.Visible = true;
            userCompareLbl.Text = "Invalid Username!";
        }
    }
} 
```

# cuda - 一维纹理内存限制

> ID：13401124
> 
> 赞同：2
> 
> 时间：2012-11-15T15:48:23.653
> 
> 标签：cuda, gpu, gnupg

我对纹理内存的限制有点困惑。是 65536 还是我能够处理更大的数组。

目前我正在使用 2D 纹理。将问题带到一维纹理会更容易。

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:37:03.617

CUDA 中有两种类型的一维纹理。`tex1d()`正如您在问题中所怀疑的那样，绑定到数组的纹理被读取并限制为 65536 个元素的大小。绑定到线性内存的纹理是通过访问的，[`tex1dfetch()`](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#texture-functions)并且具有更大的限制，即 2 ^(27) = 134,217,728 个元素。检查编程手册的[表 14](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-and-technical-specifications)。

# html - 组织 或其他东西

> ID：13401125
> 
> 赞同：1
> 
> 时间：2012-11-15T15:48:25.547
> 
> 标签：html, css-float

我对 html 和 css 很陌生。无论如何，我有一个页面要设计，特别是一个表格，每个单元格中都有不同的信息。所以我需要把信息放在每个角落和中心。

我找到了一个解决方案，但我并不完全满意，因为我无法减小单元格的大小。

这是我的html：

```
<td>
  <div class ="upperleft"> x </div>
  <div class = "upperRight"> x </div>
  <div class = "center"> x </div>
  <div class ="bottomleft"> x </div>
  <div class = "bottomRight"> x </div>   
</td> 
```

在我的 css 中，我使用 float left 或 rigth 作为底部或上部 DIV。

对于这种情况，您还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:52:56.240

为了让我的评论成为答案：

```
<td>
  <table>
    <tr>
      <td>top-left</td>
      <td>bottom-left</td>
    </tr>
    <tr>
      <td rowspan="2">center</td>
    </td>
    <tr>
      <td>top-right</td>
      <td>bottom-right</td>
    </tr>
  </table>
</td> 
```

# wix - 安装到 GAC 并在注册表中注册

> ID：13401126
> 
> 赞同：5
> 
> 时间：2012-11-15T15:48:25.847
> 
> 标签：wix, gac

好吧，我显然错过了一些东西。我正在尝试遵循[这一点](http://blogs.msdn.com/b/heaths/archive/2006/09/20/installing-assemblies-for-runtime-and-design_2d00_time-use.aspx)，以便安装到 GAC 并使其可用于开发。但是，唯一发生的事情是 DLL 被放入 ProductDirectory。它没有出现在 GAC 中，也没有添加注册表项。我怎样才能让它工作？

下面 Product.wxs 的相关部分。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" Name="Me.Common" Language="1033" Version="1.0.0.0" Manufacturer="Me" UpgradeCode="ea52947a-0980-435d-a8f5-280d3526cb90">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />
    <!-- The feature to install. -->
        <Feature Id="ProductFeature" Title="Me.Common" Level="1">
            <ComponentGroupRef Id="ProductComponents" />
        </Feature>
    </Product>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
        <Directory Id="ProductDirectory" Name="Me.Common">
          <Directory Id="GAC" Name="GAC" />
        </Directory>
            </Directory>
        </Directory>
    </Fragment>

    <Fragment>
        <ComponentGroup Id="ProductComponents">
      <Component Id="RunTime_Me.Common" Directory="GAC" Guid="E2B19C22-DC01-432D-85B0-0E4948F95A43">
        <!-- Add to GAC. -->
        <File Id="RunTime_Me.Common"
              Source="$(var.Me.Common.TargetDir)$(var.Me.Common.TargetFileName)"
              Assembly=".net"
              KeyPath="yes" />
      </Component>
      <Component Id="DesignTime_Me.Common" Directory="ProductDirectory" Guid="C1BD8CD1-E834-49D5-B499-D9E313E70669">
        <!-- Add locally. -->
        <File Id="DesignTime_Me.Common"
              Source="$(var.Me.Common.TargetDir)$(var.Me.Common.TargetFileName)"
              KeyPath="yes" />
        <!-- Add to registry so that Visual Studio can find it via Add Reference. -->
        <Registry Id="Registry_DesignTime_Me.Common_AssemblyFolders"
                  Root="HKLM"
                  Key="SOFTWARE\Microsoft\.NETFramework\AssemblyFolders\[ProductName]"
                  Value="[$DesignTime_Me.Common]"
                  Type="string" />
      </Component>
        </ComponentGroup>
    </Fragment>
</Wix> 
```

* * *

原来它已经安装在 GAC 中。我找错地方了；.NET 现在有第二个 GAC 用于 4.0 项目 (C:\Windows\Microsoft.NET\assembly)。这留下了注册表项。我收到了一条已弃用的警告`Registry`，因此我用以下内容替换了该组件，但仍然无法正常工作：

```
 <Component Id="DesignTime_Me.Common" Directory="ProductDirectory" Guid="C1BD8CD1-E834-49D5-B499-D9E313E70669">
    <!-- Add locally. -->
    <File Id="DesignTime_Me.Common"
          Source="$(var.Me.Common.TargetDir)$(var.Me.Common.TargetFileName)"
          KeyPath="yes" />
    <!-- Add to registry so that Visual Studio can find it via Add Reference.
         These require .NET v4.0 minimum. -->
    <RegistryKey Root="HKLM"
                 Key="SOFTWARE\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\[ProductName]">
      <RegistryValue Type="string" Value="[$DesignTime_Me.Common]" />
    </RegistryKey>
  </Component>
</ComponentGroup> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:51:01.760

一切正常；我只是在错误的地方寻找。

4.0 GAC 位于`C:\Windows\Microsoft.NET\assembly`. `SOFTWARE\Wow6432Node\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\[ProductName]`因为安装程序是 32 位的，所以正在放置注册表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:32:48.137

由于至少有一个文件正在出现，我猜你没有运行提升。尝试将 InstallPrivileges="elevated" 添加到您的包元素中。

```
<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" InstallPrivileges="elevated" /> 
```

# machine-learning - 用于英语句子转换的机器学习算法

> ID：13401128
> 
> 赞同：1
> 
> 时间：2012-11-15T15:48:28.963
> 
> 标签：machine-learning, nlp, artificial-intelligence

是否开发了任何机器学习算法来转换英语句子及其语音（主动到被动，反之亦然）？我正在考虑开发一个小工具，用于将英语句子从主动语态转换为被动语态，反之亦然。我想知道是否已经存在任何此类工具？

# c# - 从 Windows 服务使用 YouTube API

> ID：13401129
> 
> 赞同：0
> 
> 时间：2012-11-15T15:48:33.227
> 
> 标签：c#, windows-services, youtube-api

是否可以从 Windows 服务应用程序使用 YouTube API？

我看到的所有示例看起来都只能从 Web 服务应用程序中使用。

我安装 Windows 服务的机器将有互联网连接。

**更新：如果我进入细节可能会有所帮助。**

在 Windows 服务中，我想监视服务器上的特定文件夹中的新视频文件。将视频放入文件夹后，我想将视频上传到 YouTube 播放列表。

任何方向都会有所帮助。

编程语言：C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:55:34.113

是的。它是作为一组[RESTful web-services](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)实现的 API ，您可以从 Windows 服务中使用它们。大概，您在谈论[Data API](https://developers.google.com/youtube/getting_started#data_api)，因为 Player API 在没有用户界面的应用程序中没有多大意义！

# ajax - 是否可以限制我想收听的事件的范围？例如，来自某个组件？

> ID：13401132
> 
> 赞同：1
> 
> 时间：2012-11-15T15:48:40.603
> 
> 标签：ajax, jsf, primefaces

我的页面上有两个 p:dataTable 元素。我想要一个 ajax 元素分别监听每个数据表上的 rowSelectRadio 事件。问题是这些侦听器正在从两个表中捕获 rowSelectRadio 事件。有什么方法可以限制我正在收听的事件的范围？我想我假设一个 ajax 元素只会在其父组件的范围内侦听，但事实似乎并非如此。

这是一个示例：我希望 rowSelectRadio 事件仅被作为特定数据表的子元素的 ajax 元素捕获。

```
<p:panel id="parentPanel">
    <p:dataTable id="dataTable1" >
    <p:ajax event="rowSelectRadio"
    listener="#{myBean.onData1RowSelect}"
    update="parentPanel"/>
        <p:column/>
    </p:dataTable>

    <p:dataTable id="dataTable2" >
    <p:ajax event="rowSelectRadio"
    listener="#{myBean.onData2RowSelect}"
    update="parentPanel"/>
        <p:column/>
    </p:dataTable>
</p:panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:18:00.253

添加一个`process`属性到你的`p:ajax`：

```
<p:dataTable id="dataTable2" >
<p:ajax event="rowSelectRadio"
    listener="#{myBean.onData2RowSelect}"
    update="dataTable2" process="@this" />
    <p:column/>
</p:dataTable> 
```

**请参阅**： [PPR - 部分树过程](http://www.primefaces.org/showcase/ui/pprPartialTree.jsf)

# reporting-services - 将由参数过滤的数据集中特定行的值添加到文本框

> ID：13401133
> 
> 赞同：0
> 
> 时间：2012-11-15T15:48:45.563
> 
> 标签：reporting-services

我希望这很容易，但我还没有找到解决方案。我有一个包含描述的文本框。但是，此描述存在于具有 id 和描述的数据集中。我需要的 id 作为参数提供。所以我需要做的就是根据参数的值以某种方式“搜索”该数据集，并检索我需要的描述并将其添加到文本框中。

我努力了 -

```
Lookup(Parameters!Id.Value, Fields!Id.Value, Fields!Desc.Value, "DatasetName") 
```

但它似乎不喜欢那样。

有谁知道该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:12:57.533

刚刚让它与一个不同的例子一起工作，使用：

```
=lookup(Fields!FilmDirectorID.Value,Fields!DirectorID.Value,Fields!DirectorName.Value, "DataSet2") 
```

您的语法看起来不错，但您拼错了**Parameters**。这可能是问题所在？

# ssis - SSIS 和可用性组

> ID：13401136
> 
> 赞同：0
> 
> 时间：2012-11-15T15:48:47.470
> 
> 标签：ssis

我想知道是否有人可以帮助我解决一个小问题……我正在使用 alwaysOn 设置我的服务器，并且我已经在可用性组中添加了 SSIS 目录。当我进行故障转移时，它可以工作，但我需要运行一个命令来重新加密故障转移节点上的主密钥：

更改主密钥 通过服务主密钥添加加密

我想知道是否有一种方法可以在辅助节点上线时运行命令以自动执行此过程……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T21:46:47.440

尝试在镜像上使用 sp_control_dbmasterkey_password 添加要使用的数据库和密码。当主体切换到镜像时，它会查看密钥存储以找到打开 db 密钥的密码。打开后，服务主密钥会自动加密。

# c++ - C ++如何从字符串中删除一个字符（输入）

> ID：13401139
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:48:46.953
> 
> 标签：c++, string, erase

我正在尝试制作一个程序，尽管我已经完成了它，但我还需要更多东西。因此，如果字符串包含 * 我想擦除第一个 * 并 cout 输入，用户要求提供输入

```
 getline(cin,str);
    int k=str.length();
    for(int i=0; i<=k; i++)
        if(str[i]=='*')
            string::iterator it;
            it=str.begin()+i;
            str.erase(it);
            break;
    cout<<str<<endl; 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:51:38.240

要非常小心，您需要使用括号`{}`来控制范围，而不是制表！

此外，`=`在 a中使用`if`是分配，而不是检查，您需要使用`==`

您迭代使用`i`但您删除使用`x`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:54:06.377

您可以通过`std::find`删除第一次出现的 来简化这一点`*`：

```
str.erase(std::find(str.begin(), str.end(), '*')); 
```

# java - 如何将地图集合写入文件并读取？

> ID：13401151
> 
> 赞同：0
> 
> 时间：2012-11-15T15:49:24.033
> 
> 标签：java, file, collections, iostream

我想用文件路径和每个文件的状态进行收集，然后将其保存在文件中
，并在我需要时再次读取它在 java 中以及最好的收集类型。
状态布尔锁定或解锁的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:53:46.723

使用 Properties 对象，因为您可以使用基于字符串的保存和加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:53:08.997

由于状态是布尔值，因此以下将起作用：

```
Map<File,Boolean> status = new HashMap<File,Boolean>(); 
```

由于[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html),[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)并且[`Boolean`](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html)所有实现[`Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)，您都可以使用 an 将地图写入文件[`ObjectOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)并使用 an 读回[`ObjectInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)：

```
 FileOutputStream fos = new FileOutputStream("status.dat");
  ObjectOutputStream oos = new ObjectOutputStream(fos);
  oos.writeObject(status);
  oos.close(); 
```

如果状态变得更复杂，那么请确保使用实现的类，`Serializable`或者如果它是您`Serializable`自己实现的自定义类。

# ios - 显示具有自定义边距的 .doc 文件

> ID：13401159
> 
> 赞同：2
> 
> 时间：2012-11-15T15:49:44.173
> 
> 标签：ios, xcode, uiwebview, margin, doc

这段代码在可滚动的 UIWebView 中显示一个文档：

```
- (void)viewDidLoad
{
   [super viewDidLoad];   
   _myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 760)];   
   NSURL *myUrl = [NSURL URLWithString:@"http://pathToDoc/myDoc.doc"];  
   NSURLRequest *myRequest = [NSURLRequest requestWithURL:myUrl];
   [_myWebView loadRequest:myRequest];    
   [self.view addSubview:_myWebView]; 

} 
```

这工作正常，除非尝试显示使用小于标准的自定义边距创建的横向文档。

结果是文档右侧边缘的内容被切掉。

有没有办法显示整个文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:18:52.157

好吧，经过几个月的挫折（简直不敢相信花了多长时间！），结果证明只需要一行代码就可以解决问题。

```
_documentWebView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

在最后一行之后添加，突然间一切都很好。

# android - Android 通过 TCP/IP 到计算机

> ID：13401161
> 
> 赞同：2
> 
> 时间：2012-11-15T15:49:46.140
> 
> 标签：android, tcp

我无法将我的安卓模拟器连接到我的电脑。我可以将信息发送到 android，但是发送回来时它就失败了。

这是我到目前为止所拥有的：

```
public class sendDataToRegion extends AsyncTask<String,Void,List<String> >{

        final TextView who = (TextView)findViewById(R.id.txtWho);
        final TextView what = (TextView)findViewById(R.id.txtWhat);
        final TextView when = (TextView)findViewById(R.id.txtWhen);
        final TextView where = (TextView)findViewById(R.id.txtWhere);
        final TextView actionTaken = (TextView)findViewById(R.id.txtActionTaken);
        final TextView lengthOfTime = (TextView)findViewById(R.id.txtLengthOfTime);

        public List<String> dataSend2 = new ArrayList<String>();

        @Override
        protected List<String> doInBackground(String... params) {
            try
            {
                System.out.println("Mobile Server Program");

                String whoString = who.getText().toString();
                String whatString = what.getText().toString();
                String whenString = when.getText().toString();
                String whereString = where.getText().toString();
                String actionString = actionTaken.getText().toString();
                String lengthString = lengthOfTime.getText().toString();

                dataSend2.add(whoString);
                dataSend2.add(whatString);
                dataSend2.add(whenString);
                dataSend2.add(whereString);
                dataSend2.add(actionString);
                dataSend2.add(lengthString);

                int port = 4444;

                ServerSocket server = new ServerSocket(port);

                Socket socket=server.accept();

                DataOutputStream network = new DataOutputStream(socket.getOutputStream());

                for(int i = 0; i< dataSend2.size();i++){
                    network.writeUTF(dataSend2.get(i));
                }

            }
            catch (Exception e) {

            Log.e("TCP", "S: Error", e);

            }

            return dataSend2;
        }

        protected void onPostExecute( ) {
            System.out.println("Thread Finished " + dataSend2.size());

        }

    }//End of inner class 
```

它甚至可以创建服务器套接字，但之后就没有了。有人能指出我正确的方向吗？

谢谢

更新

这是客户：

```
try
        {

            String ip = "146.176.230.192";
            System.out.println("IP connected");

            int port = 4444;
            System.out.println("port connected");

            // Connect to the server
            Socket sock = new Socket(ip, port);
            System.out.println("socket created");

            // Create the incoming stream to read messages from
            DataInputStream network = new DataInputStream(sock.getInputStream());

            // Display our address
            System.out.println("Address: " + sock.getInetAddress());
            String line;

            while ((line = network.readUTF()) != null)
            {

                System.out.println(line);
            }

            sock.close();
        }
        catch (IOException ioe)
        {
            System.out.println("Connection failed");

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:03:42.593

`7612`在运行程序之前，使用 port并运行此命令来转发端口：

```
adb forward tcp:7612 tcp:7612 
```

客户端：默认IP：127.0.0.1

服务器端：IP地址为通配符地址

**服务器端：**

```
 private ServerThread mServer;
    ....
    java.net.ServerSocket s = new java.net.ServerSocket();

// bind, only port used 
java.net.InetSocketAddressendPoint = new InetSocketAddress(port);

  if( !s.isBound() ){
    s.bind(7612);
  }
      .... 
```

**客户端**

```
 private           Socket mSocket;
 private static final int mConnectTimeout = 2500; // 2.5 seconds

 ....
 mSocket = new Socket();
 InetSocketAddress remoteAddr = new InetSocketAddress(127.0.0.1, 7612); 
    mSocket.connect(remoteAddr, mConnectTimeout); 
 .... 
```

**服务器线程类**

```
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class ServerThread implements Runnable{
public ServerThread(ServerSocket socket, OnConnectItf onConnect) // OnConnectItf is some callback
   {
    mServer   = socket;
    mCallback  = onConnect;
    mCancel    = false;
}

public void cancel(){
    mCancel = true;
}

public void run() {
    while (true){
        try {
            Socket s = mServer.accept();
            if (mCancel == true) break;

             ....
        }
        catch (IOException e) {
            // optional: implement on error handler
            break;
        }
    }

    return;
}

private ServerSocket mServer;
private OnConnectItf mCallback;
private boolean      mCancel; 
```

}

# wix - 安装或主要升级的自定义操作

> ID：13401163
> 
> 赞同：3
> 
> 时间：2012-11-15T15:49:55.173
> 
> 标签：wix, wix3.5

我有一些我正在部署的 TopShelf 服务的 Wix 安装程序。如何在重大升级期间配置完全卸载和重新安装？

目前我有一个一致的 UPGRADECODE、一个递增的 VERSION 和这个：

```
<MajorUpgrade AllowSameVersionUpgrades="yes" DowngradeErrorMessage="A later version of [ProductName] is already installed. Setup will now exit." />

<InstallExecuteSequence>

  <!-- always run configure/install/start after installation OR after upgrading -->
  <Custom Action="ConfigureFor" Before="InstallFinalize">(NOT INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="InstallExporter" After="ConfigureFor">(NOT INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="StartExporter" After="InstallExporter">(NOT INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="InstallScheduler" After="ConfigureFor">(NOT INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="StartScheduler" After="InstallScheduler">(NOT INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>

  <!-- always run stop/uninstall before uninstallation OR before upgrading -->
  <Custom Action="StopExporter" Before="UninstallExporter">(INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="StopScheduler" Before="UninstallScheduler">(INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="UninstallExporter" After="InstallInitialize">(INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>
  <Custom Action="UninstallScheduler" After="InstallInitialize">(INSTALLED OR UPGRADINGPRODUCTCODE)</Custom>

</InstallExecuteSequence> 
```

问题似乎是在重大升级的卸载部分期间调用了自定义操作 ConfigureFor...

```
Action start 17:36:08: INSTALL.
Action start 17:36:08: FindRelatedProducts.
Action ended 17:36:08: FindRelatedProducts. Return value 0.
Action start 17:36:08: AppSearch.
Action ended 17:36:08: AppSearch. Return value 1.
Action start 17:36:08: LaunchConditions.
Action ended 17:36:08: LaunchConditions. Return value 1.
Action start 17:36:08: ValidateProductID.
Action ended 17:36:08: ValidateProductID. Return value 1.
Action start 17:36:08: CostInitialize.
Action ended 17:36:08: CostInitialize. Return value 1.
Action start 17:36:08: FileCost.
Action ended 17:36:08: FileCost. Return value 1.
Action start 17:36:08: CostFinalize.
Action ended 17:36:08: CostFinalize. Return value 1.
Action start 17:36:08: MigrateFeatureStates.
Action ended 17:36:08: MigrateFeatureStates. Return value 0.
Action start 17:36:08: InstallValidate.
Action ended 17:36:22: InstallValidate. Return value 1.
Action start 17:36:22: RemoveExistingProducts.
Action ended 17:36:22: RemoveExistingProducts. Return value 0.
Action start 17:36:22: InstallInitialize.
Action ended 17:36:22: InstallInitialize. Return value 1.
Action start 17:36:22: SetUninstallExporter.
Action ended 17:36:22: SetUninstallExporter. Return value 1.
Action start 17:36:22: SetStopExporter.
Action ended 17:36:22: SetStopExporter. Return value 1.
Action start 17:36:22: SetUninstallScheduler.
Action ended 17:36:22: SetUninstallScheduler. Return value 1.
Action start 17:36:22: SetStopScheduler.
Action ended 17:36:22: SetStopScheduler. Return value 1.
Action start 17:36:22: ProcessComponents.
Action ended 17:36:22: ProcessComponents. Return value 1.
Action start 17:36:22: UnpublishFeatures.
Action ended 17:36:22: UnpublishFeatures. Return value 1.
Action start 17:36:22: RemoveRegistryValues.
Action ended 17:36:22: RemoveRegistryValues. Return value 1.
Action start 17:36:22: RemoveFiles.
Action ended 17:36:22: RemoveFiles. Return value 1.
Action start 17:36:22: InstallFiles.
Action ended 17:36:22: InstallFiles. Return value 1.
Action start 17:36:22: WriteRegistryValues.
Action ended 17:36:22: WriteRegistryValues. Return value 1.
Action start 17:36:22: RegisterUser.
Action ended 17:36:22: RegisterUser. Return value 0.
Action start 17:36:22: RegisterProduct.
Action ended 17:36:22: RegisterProduct. Return value 1.
Action start 17:36:22: PublishFeatures.
Action ended 17:36:22: PublishFeatures. Return value 1.
Action start 17:36:22: PublishProduct.
Action ended 17:36:22: PublishProduct. Return value 1.
Action start 17:36:22: SetConfigureFor.
Action ended 17:36:22: SetConfigureFor. Return value 1.
Action start 17:36:22: ConfigureFor.
Action ended 17:36:22: ConfigureFor. Return value 1.
Action start 17:36:22: SetInstallExporter.
Action ended 17:36:22: SetInstallExporter. Return value 1.
Action start 17:36:22: InstallExporter.
Action ended 17:36:22: InstallExporter. Return value 1.
Action start 17:36:22: SetStartExporter.
Action ended 17:36:22: SetStartExporter. Return value 1.
Action start 17:36:22: StartExporter.
Action ended 17:36:22: StartExporter. Return value 1.
Action start 17:36:22: SetInstallScheduler.
Action ended 17:36:22: SetInstallScheduler. Return value 1.
Action start 17:36:22: InstallScheduler.
Action ended 17:36:22: InstallScheduler. Return value 1.
Action start 17:36:22: SetStartScheduler.
Action ended 17:36:22: SetStartScheduler. Return value 1.
Action start 17:36:22: StartScheduler.
Action ended 17:36:22: StartScheduler. Return value 1.
Action start 17:36:22: InstallFinalize.
CAQuietExec:  The term 'c:\Program Files (x86)\Sunshine\configureFor.ps1' is not recognized a
CAQuietExec:  s the name of a cmdlet, function, script file, or operable program. Check the s
CAQuietExec:  pelling of the name, or if a path was included, verify that the path is correct
CAQuietExec:   and try again.
CAQuietExec:  At line:1 char:2
CAQuietExec:  + & <<<<  'c:\Program Files (x86)\Sunshine\configureFor.ps1' -environment   > '
CAQuietExec:  c:\Program Files (x86)\Sunshine\configureFor.log.txt'
CAQuietExec:      + CategoryInfo          : ObjectNotFound: (c:\Program File...onfigureFor.p 
CAQuietExec:     s1:String) , CommandNotFoundException
CAQuietExec:      + FullyQualifiedErrorId : CommandNotFoundException
CAQuietExec:   
CAQuietExec:  Error 0x80070001: Command line returned an error.
CAQuietExec:  Error 0x80070001: CAQuietExec Failed
CustomAction ConfigureFor returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)
Action ended 17:36:25: InstallFinalize. Return value 3.
Action ended 17:36:26: INSTALL. Return value 3. 
```

我已经更新了上面的配置。这是我目前正在使用的。基本上，我们需要做的是：

*   安装后或升级后始终运行配置/安装/启动
*   在卸载或升级之前始终运行停止/卸载

经进一步测试。似乎 ConfigureFor 一直在运行，即使在“RemovePreviousProducts”阶段也是如此 - 为什么它不尊重我的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:05:58.590

这个怎么样：

```
<InstallExecuteSequence>

  <!-- always run configure/install/start after installation OR after upgrading -->
  <Custom Action="ConfigureFor" Before="InstallFinalize">NOT (REMOVE ~= "ALL")</Custom>
  <Custom Action="InstallExporter" After="ConfigureFor">NOT (REMOVE ~= "ALL"))</Custom>
  <Custom Action="StartExporter" After="InstallExporter">NOT (REMOVE ~= "ALL")</Custom>
  <Custom Action="InstallScheduler" After="ConfigureFor">NOT (REMOVE ~= "ALL")</Custom>
  <Custom Action="StartScheduler" After="InstallScheduler">NOT (REMOVE ~= "ALL")</Custom>

  <!-- always run stop/uninstall before uninstallation OR before upgrading -->
  <Custom Action="StopExporter" Before="UninstallExporter">REMOVE ~= "ALL"</Custom>
  <Custom Action="StopScheduler" Before="UninstallScheduler">REMOVE ~= "ALL"</Custom>
  <Custom Action="UninstallExporter" After="InstallInitialize">REMOVE ~= "ALL"</Custom>
  <Custom Action="UninstallScheduler" After="InstallInitialize">REMOVE ~= "ALL"</Custom>

</InstallExecuteSequence> 
```

此外，这篇 SO 帖子可能会对您有所帮助： [如何添加仅在卸载时发生的 WiX 自定义操作（通过 MSI）？](https://stackoverflow.com/questions/320921/how-to-add-a-wix-custom-action-that-happens-only-on-uninstall-via-msi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:18:30.273

尝试使用添加`AND OR UPGRADINGPRODUCTCODE`使您的代码看起来像：

```
<Custom Action="ConfigureFor" Before="InstallFinalize">(NOT INSTALLED OR NOT UPGRADINGPRODUCTCODE)</Custom> 
```

您可以[在此处](http://msdn.microsoft.com/en-us/library/aa372380%28v=vs.85%29.aspx)找到更多由 Windows 安装程序设置的属性。

# vba - 目标寻找多行 - MS-Excel 宏

> ID：13401165
> 
> 赞同：1
> 
> 时间：2012-11-15T15:50:00.537
> 
> 标签：vba, excel

我有 5028 行，不包括标题和 3 列，想通过更改“B”列中的值在“C”列中设置值 1.7。

使用目标搜索选项只能用于一个单元格。我想对 5028 行做同样的事情，请通过运行一些宏来帮助完成任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:02:14.517

John Bustos 指出了正确的想法，这是一个可行的解决方案：

```
Public Sub Demo()
  Dim rngRow As Range
  For Each rngRow In UsedRange.Rows
    rngRow.Cells(1, 3).GoalSeek Goal:=1.7, ChangingCell:=rngRow.Cells(1, 2)
  Next rngRow
End Sub 
```

*编辑：*

如果您打算将其用作模块中的宏，而不是用作工作表之一 - 或对有效范围的任何其他引用，请使用`ActiveSheet.UsedRange.Rows`代替。`UsedRange.Rows`

对于您的示例，您可能更喜欢使用：`Range("A2:C5028").Rows` 或`MySheet.Range("A2:C5028").Rows`.

*编辑：*

```
Public Sub Demo()
  On Error Resume Next
  Dim rngRow As Range
  For Each rngRow In ActiveSheet.UsedRange.Rows 
    rngRow.Cells(1, 3).GoalSeek Goal:=1.7, ChangingCell:=rngRow.Cells(1, 2)
  Next rngRow
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:57:02.060

您可以创建一个循环然后执行 Range-Goal 搜索的宏 - [http://msdn.microsoft.com/en-us/library/office/bb209907%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb209907%28v=office.12%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T14:02:42.310

这是很好的代码。我出于我的目的对其进行了修改，这不仅适用于一列，而且适用于多列。为了运行我的代码，您必须首先选择（突出显示）您希望 GoalSeek 的所有单元格（像表格一样连接，而不是单独的区域）。我的代码：

```
Sub GoalSeek_To_0()
' Macro created 15 Jun '18 by Benjamin Cohen

On Error Resume Next

Dim row_, col_ As Range
Dim i_, j_ As Integer
' i_ = 1
  j_ = 1

For Each col_ In Selection.Columns
 For Each row_ In Selection.Rows
  row_.Cells(1, j_).GoalSeek Goal:=0, ChangingCell:=row_.Cells(1, j_).Offset(0, -1)
   row_.Cells(1, j_).Value = 1
 Next row_
  j_ = j_ + 1
Next col_

End Sub 
```

# javascript - 获取上一页 URL，打开新窗口，然后通过 Javascript 重定向

> ID：13401174
> 
> 赞同：2
> 
> 时间：2012-11-15T15:50:30.693
> 
> 标签：javascript, redirect

我被困在使用只能让我修改内容的 CMS 中`<body>`，所以当我想重定向人们时，我使用了这个

```
<script type="text/javascript">
window.location = "http://www.example.com/"
</script> 
```

所以，是的，页面首先加载，然后 5 毫秒后，重定向发生，它适用于所有密集目的。现在，我想知道是否可以使用 javascript 来做其他事情。

是否可以使用指定的 URL 打开一个新的浏览器选项卡，然后通过 Javascript 将用户重定向回上一页？

非常感谢，所以。

编辑 - 老实说，它是否打开一个新窗口或选项卡并不像它实际运行那么重要。我需要 Javascript 来确定前一页（如果可能），然后打开一个新窗口/标签到我指定的 URL，然后将当前窗口/标签重定向到它的前一页。有人说`window.open`这只适用于点击事件，这对我正在尝试完成的事情也不起作用......仅供参考。

所以，从字面上看，没有点击，我需要 Javascript 来执行以下操作 -

1.  确定用户来自的上一页/上一页/最后一页，将其存储为变量
2.  打开一个新窗口或标签，到一个指定的 URL
3.  `window.location`返回上一页，我将其存储为变量

希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:56:13.817

根据用户的浏览器设置，使用`window.open`可以在新选项卡中打开新窗口，但您不能通过浏览器直接控制它。这完全取决于用户的设置。

要打开一个新窗口：

```
window.open("http://www.google.com", "windowName", "window options (optional parameter)"); 
```

然后只需使用：

```
history.back(); 
```

您还可以使用 referer 属性：

```
var previousUrl = document.referrer; 
```

有关更多信息`window.open`，请参阅：[http ://www.javascript-coder.com/window-popup/javascript-window-open.phtml](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

有关 document.referrer 属性的更多信息，请查看： http: [//www.netmechanic.com/news/vol4/javascript_no14.htm](http://www.netmechanic.com/news/vol4/javascript_no14.htm)

# sql-server - 已安装 VS2012 - 现在无法使用 SSMS 连接到 SQL 服务器

> ID：13401176
> 
> 赞同：4
> 
> 时间：2012-11-15T15:50:32.003
> 
> 标签：sql-server, visual-studio-2010, visual-studio-2012, ssms

由于安装了 VS 2012 并卸载了 VS 2010，我现在无法使用 Management Studio 2012（已安装）连接到我们的 SQL Server

我得到的只是

> *与服务器成功建立连接，但在登录前握手期间发生错误。(privider: SSL Provider, error: 0 - 等待操作超时) (Microsoft SQL Server, Error: 258)
> 等待操作超时*

我已经“修复”了我的 SQL Server 2012 工具实例，但仍然没有工作。我可以连接到本地实例 - 不幸的是，这根本没有用

关于这个有什么想法吗？我在想我将不得不卸载该地段并重新开始，这让我感到惊讶，我宁愿不必这样做

**编辑：好的，所以在谷歌上搜索了一下，我卸载了.net 4.5（并安装了.net 4.0）并神奇地再次连接了 SMSS，但当然 VS2012 然后停止工作。所以我再次安装了 VS2012，结果 SMSS 拒绝再次连接。弗里金给了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:57:00.427

在安装 VS 2012 之前，您应该先安装 SQL Server 2012。

卸载 VS 2010 也会破坏 SQL Server 2010 中包含的 VS 2010 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:10:48.383

在我的情况下，我有一个名为 Covenant Eyes 的内容过滤器/代理，这可能是原因。

我尝试修复 SQL Server 2012 的安装（仅适用于管理工作室！），它使安装崩溃，但仍然没有解决问题。一旦我生成了卸载代码并卸载了过滤器，我就可以连接；我什至不必重新启动。

检查机器上的代理和内容过滤器并禁用它们！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T18:46:17.037

信不信由你！错误是由 Apple Itunes 弄乱机器上的 winsock 引起的。由于糟糕的iTunes，我经常需要重置winsock。您不需要卸载 .net 或 studio 等。

在 admin priv 下打开命令提示符键入 netsh winsock reset reboot

可以连接的魔术。

别客气。

# python - 来自linux上的urlopen“找不到哈希代码”的错误

> ID：13401180
> 
> 赞同：3
> 
> 时间：2012-11-15T15:50:44.780
> 
> 标签：python, hash, urlopen

我已经尝试了几次搜索，但我认为没有人问过这个问题，但如果这是重复的，请原谅我。我正在尝试在 python-2.7 上使用 urllib 来读取网页。非常简单的应用程序，我要做的就是从页面中获取一些文本。不幸的是以下代码：

```
import urllib
address = "http://google.co.uk"
page = urllib.urlopen(address) 
```

返回一个关于未找到“哈希码”的错误：

```
 ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/hashlib.py", line 139, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha512 
```

我已经尝试了很多谷歌搜索，但到目前为止没有任何发现非常有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:53:42.290

以下页面解释了您需要安装的软件包：

[http://new2python.blogspot.com/2012/07/errorrootcode-for-hash-sha224-was-not.html](http://new2python.blogspot.com/2012/07/errorrootcode-for-hash-sha224-was-not.html)

总之：您需要使用以下命令安装 hashlib 库：

```
tar xvfz hashlib-20081119.tar.gz
cd hashlib-20081119
sudo python setup.py install 
```

# windows - Windows 不信任 VeriSign Class 3 证书？

> ID：13401184
> 
> 赞同：7
> 
> 时间：2012-11-15T15:51:12.573
> 
> 标签：windows, code-signing, digital-signature, digital-certificate, verisign

我分发了一个 Windows 桌面应用程序，其中包含由 Verisign Class 3 代码签名证书数字签名的所有可执行文件。对于绝大多数用户来说，这似乎工作正常。

然而，少数用户报告证书无效。他们说它会出现消息**“已处理证书链，但在信任提供者不信任的根证书中终止”**。这对应于错误代码`CERT_E_UNTRUSTEDROOT (0x800B0109)`。这也已在完全更新的 Windows 7 机器上报告。所以大概我的证书没问题，但 Windows 有时不信任 VeriSign 证书。

为什么 Windows 有时不信任 VeriSign？有什么我可以添加到我的安装程序（也签名）中来告诉 Windows 信任证书的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T16:16:19.743

微软通过 Windows 更新推出的根证书经常更新，但这些更新被标记为“可选更新”。因此，并非所有用户都安装了它们，并且可能需要手动安装它们。这也适用于“完全更新”的机器，因为自动安装通常设置为仅安装“重要更新”，而根证书更新不是。

根据桌面应用程序的类型，您在签名时也可能必须遵循某些规则。例如，与 Windows 安全中心交互的应用程序需要与驱动程序基本相同的签名方法。也就是说，证书链与签名一起嵌入（`/ac`切换到`signtool`）。您可以在[此处](https://knowledge.verisign.com/support/code-signing-support/index?page=content&actp=CROSSLINK&id=SO5820)`MSCV-VSClass3.cer`获取适用于 VeriSign 的证书。

这个过程通常被称为交叉签名，这似乎是用词不当。虽然这是让您的驱动程序二进制文件或目录交叉签名的一个步骤，但至关重要的一步是 Microsoft 对驱动程序（或者现在更常见的目录文件）进行签名，这是实际的交叉签名。

# html - 在css中用渐变创建一个箭头框

> ID：13401185
> 
> 赞同：1
> 
> 时间：2012-11-15T15:51:15.350
> 
> 标签：html, css, gradient

我正在尝试在 css 中创建一个带有箭头的框，这是我到目前为止的结果：http: [//dabblet.com/gist/4079318](http://dabblet.com/gist/4079318)

如您所见，渐变未正确应用于箭头，并且它使用了箭头的附加标记。还有其他人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:04:08.397

使用具有对角渐变的旋转伪元素：

```
.fancy-arrow:after {
  content:"";
  display:block;
  width:25px;height:25px;
  background:#f00;
  position:absolute;
  right:-12px;top:5px;

  background: -webkit-linear-gradient(left top,  #7d7e7d 0%,#0e0e0e 100%); 
  -webkit-transform:rotate(45deg);
  z-index:-1;
} 
```

仅用于带有 webkit 前缀的演示目的。在带有一些过滤器魔法的 IE 中也可以实现同样的效果。

**[工作演示](http://dabblet.com/gist/4079405)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:19:19.620

这是另一个不需要 CSS3 的解决方案，但它又只适用于单色框：http: [//jsfiddle.net/T4A2Q/](http://jsfiddle.net/T4A2Q/)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

#Box {
 width: 300px;
 height: 40px;
 background: #0094FF;
 border-color: #0094FF;
}

#Box:after {
 content: '';
 clear: both;
 float: right;
 margin-right: -20px;
 border-width: 10px;
 border-style: solid;
 border-bottom-color: transparent;
 border-left-color: inherit;
 border-top-color: inherit;
 border-right-color: transparent;
}

#Box:before {
 content: '';
 clear: both;
 float: right;
 margin-right: -20px;
 border-width: 10px;
 border-style: solid;
 border-bottom-color: inherit;
 border-left-color: inherit;
 border-top-color: transparent;
 border-right-color: transparent;
}

body {
 background: #FFF;
}

</style>
</head>

<body>

<div id="Box">

</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:58:41.080

文本渐变还没有得到很好的支持。

您可能需要使用现有的矩形，然后在角上放置几个白色蒙版以形成箭头。

# mysql - MySql 在另一列具有自动增量时不接受唯一约束

> ID：13401187
> 
> 赞同：0
> 
> 时间：2012-11-15T15:51:19.330
> 
> 标签：mysql

我有以下查询：

```
CREATE TABLE UserDetails (
    sno INT UNSIGNED AUTO_INCREMENT,
    username VARCHAR(20) NOT NULL,
    location VARCHAR(20) NOT NULL,
    country VARCHAR(20) NOT NULL,
    UNIQUE KEY(username)
); 
```

它给出以下错误：

> ERROR 1075 (42000)：表定义不正确；只能有一个自动列，并且必须将其定义为键

我想设置`sno`为自动递增`username`和`UNIQUE`AND `NOT NULL`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:54:31.383

`sno``PRIMARY KEY`如果您希望它自动递增，则需要为 a 。代替：

```
sno INT UNSIGNED AUTO_INCREMENT, 
```

和

```
sno INT UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:54:52.570

`sno`必须定义为主键（例如唯一键）才能使 auto_increment 起作用：

```
CREATE TABLE UserDetails (
    sno INT unsigned auto_increment primary key,
    etc...
) 
```

# sql-server-2008 - 将 ftp 服务器上的文件中的数据直接导入 sql server

> ID：13401188
> 
> 赞同：1
> 
> 时间：2012-11-15T15:51:19.553
> 
> 标签：sql-server-2008

是否可以使用 SSIS 包或其他东西将文件从 ftp 服务器直接导入 sql server 2008 表？我曾想过通过 ftp 将文件传输到本地服务器，然后进行导入，但只是想知道在空间和内存方面是否有更经济的方式来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:35:02.633

如果您可以访问物理文件位置（即您可以将驱动器映射到它），那么是的，您可以绕过 FTP 进程。如果不是，SSIS 不支持将 ftp 作为数据流中的源连接。您将需要在控制流中使用 FTP 任务来复制文件，然后在数据流中使用文件源组件

# knockout.js - Knockout JS 计算数组：无效的对象初始化器

> ID：13401190
> 
> 赞同：0
> 
> 时间：2012-11-15T15:51:35.883
> 
> 标签：knockout.js, knockout-mapping-plugin

我从 API 取回 JSON 数据，我想计算 InvestmentSummary.InvestmentDetails 数组中所有“成本”字段的总成本。我收到以下错误：

```
Error: Unable to parse bindings.
Message: SyntaxError: invalid object initializer;
Bindings value: totalCost 
```

我的 viewModel 代码如下所示：

```
 var init = { InvestmentSummary: { InvestmentDetails: [] } };
        ko.mapping.fromJS(init, {}, self);

        self.totalCost = ko.computed({
            read: function () {
                var result = 0;
                ko.utils.arrayForEach(self.InvestmentSummary.InvestmentDetails, function () {
                    result += item.Cost();
                });
                return result;
            }
        },self); 

        self.createBtnClick = function () {
            self.layoutView(true);
            var investAPI = "some_api";
            $.getJSON(investAPI, function (result) {
                ko.mapping.fromJS(result, {}, self);   
            });
        }; 
```

我的 JSON 数据如下所示：

```
{
   InvestmentSummary: {
     InvestmentDetails: [
     {
        Cost: 0
     },
     {
        Cost: 1
     }]
   }
} 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:01:53.860

如果没有完整的结构，很难说，但这里有几件事是您想要更新的：

*   `InvestmentDetails`在经过映射后将是一个 observableArray，所以在你`arrayForEach`的第一个参数是`self.InvestmentSummary.InvestmentDetails()`，这样你就可以在底层数组上循环。

*   在每个细节上运行的函数中，您正在访问`item.Cost()`，您需要将`item`其作为唯一参数传递给该函数。

*   当您使用映射插件更新数据时，如果结构已经创建，您可以省略第二个参数（映射选项）。

这里是这些更新的一个小提琴：http: [//jsfiddle.net/rniemeyer/6dqfC/](http://jsfiddle.net/rniemeyer/6dqfC/)

# c# - 为什么没有设置器的属性没有序列化

> ID：13401192
> 
> 赞同：112
> 
> 时间：2012-11-15T15:51:40.903
> 
> 标签：c#, .net, xml-serialization

我有一个可序列化的类，我的类中的一个属性在`Guid`getter 中生成一个。该属性不实现 setter，并且在序列化期间被忽略。为什么会这样，我是否总是必须实现一个 setter 才能序列化我的属性。

```
[Serializable]
public class Example
{
    [XmlAttribute("id")]
    public string Id
    {
        get
        {
             return Guid.NewGuid().ToString();
        }
    }
} 
```

我尝试实现一个空设置器，它被正确序列化。

```
[Serializable]
public class Example
{
    [XmlAttribute("id")]
    public string Id
    {
        get
        {
             return Guid.NewGuid().ToString();
        }
        set {}
    }
} 
```

**更新**：

你能指出我应该如何定义其值永远不会改变的属性或值是内部生成的属性吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-15T15:53:06.253

这是`XmlSerializer`它不序列化只读属性的限制，您在第二个示例中所做的基本上是使其序列化的黑客行为，但是，如果您稍后需要它反序列化，它是无用的。

或者，您可以切换到使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)，它更灵活。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-15T16:13:42.760

请参阅 MSDN 文档中的“[介绍 XML 序列化](http://msdn.microsoft.com/en-us/library/182eeyhh.aspx)”。除其他外，它说：

> # 可序列化的项目
> 
> 可以使用 XmlSerializer 类对以下项目进行序列化：
> 
> ```
> Public read/write properties and fields of public classes.
> 
> Classes that implement ICollection or IEnumerable. 
> ```
> 
> > ### 笔记：
> > 
> > ```
> > Only collections are serialized, not public properties. 
> > ```
> 
> ```
> XmlElement objects.
> 
> XmlNode objects.
> 
> DataSet objects. 
> ```

另请参阅“[为什么 XML-Serializable 类需要无参数构造函数](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor/)”

* * *

## 此外，IXmlSerializable

除了上述可以被 XML Serializer 序列化的类型外，任何实现了 IXmlSerializable 接口的类型都可以进行序列化和反序列化。特别是，这意味着可以序列化 XElement 和 XDocument 类型。

请参阅“ [IXmlSerializable 接口](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-15T16:05:00.750

限制`XMLSerializer`- 没有 setter 的属性不能被序列化。

但是您可以使用`DataContractSerializer`序列化`private setter properties`-

```
[DataMember]
public string Id
{
    get
    {
         return Guid.NewGuid().ToString();
    }
    private set {}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-20T20:06:16.583

如果您想拥有私有设置器，并使对象可序列化/可反序列化，请实现 ISerializable，并创建像 MyObject(SerializationInfo info, StreamingContext context) 这样的构造函数。[在这里可以找到](https://stackoverflow.com/questions/2479158/c-sharp-iserializable-question)一个示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T15:56:24.340

序列化属性用于序列化和反序列化对象。XmlSerializer 将假定您不需要序列化任何没有设置器的属性。将字符串反序列化为对象时将使用 Setter，因为需要创建对象的实例，然后使用 setter 填充属性值。

# macos - NSURLDownload downloadDidFinish: 调用太早

> ID：13401195
> 
> 赞同：0
> 
> 时间：2012-11-15T15:51:47.813
> 
> 标签：macos, cocoa, nsurl

我使用的 OS X 应用程序的主要组件之一是下载系统，它是围绕 NSURLDownload 构建的。

我们的绝大多数用户（以及我们的内部开发团队）在下载文件方面没有任何问题。然而，我们似乎在全球范围内有一小部分随机用户 (1-2%) 这样做。对于这些用户，NSURLDownload 的 downloadDidFinish: 委托方法在下载完成之前被调用。例如，如果用户尝试下载 5 GB 的文件，则可能会在仅传输 3.5 GB 的数据后调用 downloadDidFinish:，从而导致文件不完整。显然，这引起了用户的极大不满。

我们在这个问题上花了很多时间，但没有取得太大进展。我们已经看到，至少有一种情况是 OS X（错误地？）调用 downloadDidFinish: 太早了，此时 Mac 的可用空间不足。这让我觉得很奇怪，因为为什么不调用 download:didFailWithError: 委托方法呢？但是绝大多数下载不完整的用户都有足够的磁盘空间，所以我们认为磁盘空间不足不是他们的问题。

所以我想我的问题是：你们知道为什么 NSURLDownload downloadDidFinish: 可能在下载完成之前被调用的任何原因（除了磁盘空间不足）吗？感谢您给我们的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:42:42.413

Anoop's suggestion above looks to be correct. We went back to the drawing board and simulated Server-side disconnects better than we had been. We found that by doing so, our Client software would receive NSURLDownload:downloadDidFinish: notifications.

Personally I think it's strange that OS X would send our NSURLDownload objects a "finish" (rather than a "fail") notification in this situation. But I guess that's the way Apple wants it to work.

# android - 浏览器请求的意图

> ID：13401197
> 
> 赞同：0
> 
> 时间：2012-11-15T15:51:51.937
> 
> 标签：android, android-intent

我们想创建一个意图过滤器来捕获浏览器请求。是否有可能通过例如意图服务或广播接收器捕捉到这样的东西？服务的意图拟合器应该具有哪个类别等？我们找到了一段代码，但是没有用：

```
 <action android:name="android.intent.action.VIEW" />
 <category android:name="android.intent.category.DEFAULT"/>
 <category android:name="android.intent.category.BROWSABLE"/>
 <category android:name="android.intent.category.LAUNCHER" />
 <data android:scheme="http" /> 
```

也许有人可以帮助我们解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:11:58.333

在 AndroidManifest.xml 文件中添加以下行将使 BrowserActivity 接收用于捕获浏览器请求的意图：

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
  <activity android:name=".BrowserActivitiy"
            android:label="@string/app_name">
      <intent-filter>
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.DEFAULT" />
          <data android:scheme="http"/> 
      </intent-filter>
  </activity> 
```

[这](http://www.vogella.com/blog/2011/02/21/android-intents/)是一个详细描述的链接。

不要忘记为您的清单添加互联网访问权限。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

# c++ - binary_oarchive 和 basic_binary_oarchive 有什么区别？

> ID：13401199
> 
> 赞同：3
> 
> 时间：2012-11-15T15:51:55.557
> 
> 标签：c++, serialization, boost, binary

找不到任何关于此的讨论，我应该使用什么？

# powershell - 为 powershell 命令创建日志

> ID：13401202
> 
> 赞同：1
> 
> 时间：2012-11-15T15:52:04.570
> 
> 标签：powershell

我有一个简单的命令可以在 powershell 中创建一个 CSV 文件。有没有办法将这些信息与文件分开记录？我将需要操作 CSV 文件，所以我不想依赖它作为我记录数据的唯一方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:19:25.147

您还可以使用`>`and`>>`运算符导出命令的输出。

示例：您可以使用以下代码将所有 Adob​​e 服务及其信息写入文件：

```
get-service -DisplayName Adobe* > C:\services.txt 
```

如果您想使用 Windows 服务附加到它：

```
get-service -DisplayName Windows* >> C:\services.txt 
```

`>`因此，如果您想将 CSV 导出到文件，您可以通过在命令末尾添加指向您希望将其导出到的文件名的a 来轻松地做到这一点：

```
> C:\Log_$date.csv 
```

如果您需要附加更多日志，您只需使用`>>`

```
>> C:\Log_$date.csv 
```

如果您使用`>`它将用新数据覆盖文件中的现有数据。`>>`附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:26:34.157

如果您需要负责生产的人员的日志，您可以使用专用 Cmdlet 添加您自己的应用程序日志。当我为我的所有脚本创建并使用一个 PowerShell 日志来为负责生产的人员发布执行（信息）和错误（与良好的异常处理相协调）的详细信息时。您可以为一个脚本专用一个日志（因为它存在一个用于 DNS 等的日志）

这是一个例子：

```
# List of logs
Get-EventLog -list

# Creating your own log
New-EventLog -LogName "SlxScripting" -Source "MaSource"

# List of logs
Get-EventLog -list

# Writting in your own log
Write-EventLog -LogName "SlxScripting" -EventId 12 `
               -Message "Mon Message" 
               -Source "MaSource" -EntryType Warning

# Reading in your own log
Get-EventLog -LogName "SlxScripting"  

# Suppressing your log
Remove-EventLog -LogName "SlxScripting" 
```

# asynchronous - dojo/延迟链接机制不尊重异步调用

> ID：13401204
> 
> 赞同：1
> 
> 时间：2012-11-15T15:52:09.160
> 
> 标签：asynchronous, dojo, callback, chaining, deferred

我对 dojo 很陌生，但是在处理 Deferred API 时遇到了一定的错误，我无能为力

我的调用代码是

```
function openEditor(id, fieldName) {
    editOptionsDialog_fetchData(id, fieldName).then(function(data){
    console.log("done!");
    });
    console.log("leaving openEditor!");
} 
```

调用此函数

```
function editOptionsDialog_fetchData(id, fieldName) {
    require(["dojo/ready", "dojo/data/ObjectStore", "dojo/Deferred"], function(ready,     ObjectStore, Deferred) {
        var store;
        var def;

        switch (fieldName) {
            case "degree":
                store = new degreeStore();
                def = store.getJsonData();
                break;
            case "faculty":
                store = new facultyStore();
                def = store.getJsonData();
                break;
            default:
                console.log("error in editOptionsDialog_fetchData: " + fieldName);
        }

        return def.then(function(data){
            store.data = data.items;
            editOptionsDialog_select.setStore(new ObjectStore({ objectStore : store }));
            editOptionsDialog_select.store.query({ "id" : id });
            editOptionsDialog_select.startup();
        });
    });
} 
```

其中 store.getJsonData() 创建了一个 Deferred，我想用它来链接 Deferred 解析（请参阅正文后面的附加代码）。

我收到的错误是

```
editOptionsDialog_fetchData(id, fieldName).then(function(data)...) is undefined 
```

由于错误消息在访问 openEditor 函数后立即出现，很明显，函数调用的值必须是未定义的，因为回调尚未完成。

我的问题是，对 Deferred API 的这种误解必须在我的代码中，因为目的是在异步调用完成并被调用后立即评估 editOptionsDialog 的函数调用，而不是在此调用完成之前（在函数调用仍然导致未定义的状态，但我认为这是 then-return 的目的）。

谢谢你的帮助

--- getJsonData() 的附加代码 ---

```
getJsonData: function() {
        return xhr(this.handlerUrl, {
            handleAs: "json",
            method: "POST",
            data: {
                action: "getJsonData"
            }
        }).then(function(data){
            return data;
        }, function(err){
            alert("Data cannot be fetched in degreeStore.getJsonData! " + err);
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:18:25.470

我创建了一个小提琴来展示你想要做什么。

基本上我将 Deferred 返回到`editOptionsDialog_fetchData`从`getJsonData`. `editOptionsDialog_fetchData`创建另一个`Deferred`它返回到`openEditor`. 在`editOptionsDialog_fetchData`中，我将第一个`Deferred`的解析连接到第二个的解析`Deferred`。

[http://jsfiddle.net/cswing/yUTT8/](http://jsfiddle.net/cswing/yUTT8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:13:07.933

通过重构代码解决了这个问题。原则上，Deferred-object 似乎无法返回到不同的 require 子句。因此，这对我有用：

```
var editMultilanguageDialog_Startup;
// one require-clause, wrapping all the Deferred-sensitive statements
require(["dojo/request/xhr", "dojo/json", "dojo/Deferred", "dojo/store/Memory", "dojox/timing", "dojo/domReady!"], function(xhr, json, Deferred, Memory, timing, domReady) {

   function editMultilanguageDialog_Startup(id, fieldName) {
    // code from former mainForm -> moved into this require-clause
    //[...]
    // here, the invocation is no longer undefined and waits for the resolve        
    editMultilanguageDialog_fetchData(id, fieldName).then(function(data){
            //[...]
            editMultilanguageDialog.show(); 
        });    
    }

    function editMultilanguageDialog_fetchData(id, fieldName) {
        // unchanged, returns Deferred
    }

}); 
```

这是一个解决方法，我不知道这个功能是否是dojo故意的。

# android - 关闭应用程序时计数的 Android 计时器

> ID：13401205
> 
> 赞同：0
> 
> 时间：2012-11-15T15:52:10.793
> 
> 标签：android

我有一个活动，我想跟踪两个动作之间经过的时间（例如 startAction 和 endAction）。我使用以下代码实现了一个计时器，在用户按下 startAction 按钮后每 500 毫秒递增一次：

```
TextView dayTimer = (TextView)findViewById(R.id.tvDayTimer);
long startTime;
class DayTimer extends TimerTask {

             @Override
             public void run() {
                 BBCAndroid.this.runOnUiThread(new Runnable() {

                     public void run() {
                        long millis = SystemClock.elapsedRealtime() - startTime;
                        int seconds = (int) (millis / 1000);
                        int minutes = seconds / 60;
                        seconds     = seconds % 60;

                        dayTimer.setText(String.format("%d:%02d", minutes, seconds));
                     }
                 });
             }
        };

      startDayButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                            startTime = SystemClock.elapsedRealtime();
                        timer.schedule(new DayTimer(),  0,500);
                        LoginResult.DayState = 1;
                        startDayButton.setEnabled(false);
                        endDayButton.setEnabled(true);
            }
        }); 
```

现在我的问题是，如果我退出应用程序，计时器会停止。即使用户退出应用程序，我怎样才能让它运行？总而言之，即使应用程序关闭，我也需要一个计时器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:56:53.207

您可以启动一个[服务](http://developer.android.com/reference/android/app/Service.html)，即使您的应用程序关闭，它也会启动并运行。

[这](http://www.vogella.com/articles/AndroidServices/article.html)是一个很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:01:18.747

我使用生命周期解决了您的问题。

如果应用程序没有被破坏，您可以通过将代码应用到 onPause 或 onStop 来计算时间。

但是当用户要销毁应用程序时，ypu 必须为用户做广告。

这是我在前台运行我的应用程序时继续接收消息并避免过度耗电的解决方案。

在此处阅读有关 de lifeCycle 的信息：

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

我希望这会很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:54:41.573

您可以创建一个[服务](http://developer.android.com/reference/android/app/Service.html)或创建一个运行计时器的线程。当您关闭应用程序时，这不会破坏您的计时器。

我希望这有帮助。

# ios - IOS addPeriodicTimeObserverForInterval 触发太多次

> ID：13401206
> 
> 赞同：3
> 
> 时间：2012-11-15T15:52:14.947
> 
> 标签：ios, ios5, avplayer

我注意到我的应用发生了一件奇怪的事情。这是一个使用 AVFoundation 类的视频应用程序。

我需要在给定的时间触发一些事件。我放了一些代码然后我评论它：

```
/* I prepare the movie clip */
AVMutableComposition *composition = [[AVMutableComposition alloc] init];
NSBundle *bundle = [NSBundle mainBundle];
NSDictionary *optionsDictionary = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
NSString *path = [bundle pathForResource:@"13.VIDEO_A (BAULE)" ofType:@"mp4"];
NSURL *videoUrl = [NSURL fileURLWithPath:path];
AVURLAsset* sourceAsset = [AVURLAsset URLAssetWithURL:videoUrl options:optionsDictionary];
[composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [sourceAsset duration]) ofAsset:sourceAsset atTime:currentTime error:NULL]; 
```

在我的 viewDidLoad 中，我准备了剪辑。我使用 AVUrlAsset 能够将选项字典与 AVURLAssetPreferPreciseDurationAndTimingKey 一起使用以进行更精确的使用。

```
/* I create the player */
AVPlayer *mPlayer = [AVPlayer playerWithPlayerItem:[AVPlayerItem playerItemWithAsset:composition]];
AVPlayerLayer *mPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:mPlayer];
mPlayerLayer.frame = CGRectMake(0.00, 96.00, 1024.00, 576.00);
[self.view.layer addSublayer: mPlayerLayer]; 
```

我用我的 AVUrlasset 中的项目创建一个播放器，然后在我的视图中创建一个布局

```
/* I set the observer */
[mPlayer addPeriodicTimeObserverForInterval:CMTimeMake(5,25) queue:NULL usingBlock:^(CMTime time) { 
     NSLog(@"Event : value: %lld, timescale %d, seconds: %f",
         time.value, time.timescale,(float) time.value / time.timescale); }]; 
```

我设置观察者，每 5/25 秒，0,2 秒（25 是电影的帧速率）。在我的块中，我现在只写日志。

```
/* Play the movie */
[mPlayer play]; 
```

最后我玩。

似乎一切正常，除了我的日志是错误的：

```
2012-11-15 16:43:05.382 PerfectCircle Beta[6680:707] Evento : value: 0, timescale 1, seconds: 0.000000
2012-11-15 16:43:05.410 PerfectCircle Beta[6680:707] Evento : value: 0, timescale 1, seconds: 0.000000
2012-11-15 16:43:05.563 PerfectCircle Beta[6680:707] Evento : value: 0, timescale 1, seconds: 0.000000
2012-11-15 16:43:05.580 PerfectCircle Beta[6680:707] Evento : value: 0, timescale 1, seconds: 0.000000
2012-11-15 16:43:05.747 PerfectCircle Beta[6680:707] Evento : value: 5489807, timescale 1000000000, seconds: 0.005490
2012-11-15 16:43:05.751 PerfectCircle Beta[6680:707] Evento : value: 8949705, timescale 1000000000, seconds: 0.008950
2012-11-15 16:43:05.753 PerfectCircle Beta[6680:707] Evento : value: 10679967, timescale 1000000000, seconds: 0.010680
2012-11-15 16:43:05.990 PerfectCircle Beta[6680:707] Evento : value: 248121672, timescale 1000000000, seconds: 0.248122
2012-11-15 16:43:06.169 PerfectCircle Beta[6680:707] Evento : value: 426865945, timescale 1000000000, seconds: 0.426866 
```

在随机数量的火灾之后，它的开始计数很好。但它在开始时触发事件的次数增加了 5/6 倍。我尝试了不同的电影和编解码器。如果我提高费率（es: CMTimeMake(25,25) ）没有任何改变。

`addBoundaryTimeObserverForTimes`我以这种方式开始我的工作：

```
NSArray *starts = [NSArray arrayWithObjects:[NSValue valueWithCMTime:CMTimeMakeWithSeconds(0.2,25)],nil];
[_player addBoundaryTimeObserverForTimes:starts queue:NULL usingBlock:^{ log_function }]; 
```

但我有同样的问题。但是在这里，如果我提高利率，我就不会再看到问题了（但这对我的目标不利）。我的问题是我必须精确计算电影在一个精确时刻播放了多少次。而且我无法对其进行测试，`if (currenttime==0.3)`因为它不精确。

这是一个错误？我想念什么？你听说过类似的事情吗？

感谢您的帮助。丹尼尔

更新：在开始和结束时似乎是一个问题。

```
2012-11-15 16:43:05.747 PerfectCircle Beta[6680:707] Evento : value: 0, timescale 1, seconds: 0.000000
2012-11-15 16:43:05.747 PerfectCircle Beta[6680:707] Evento : value: 5489807, timescale 1000000000, seconds: 0.005490 
```

错误的日志与正确的日志有不同的时间尺度。在播放结束时也会发生同样的情况。似乎在开始和结束时它会执行计时器，但电影尚未加载或已经关闭。我尝试在比赛后放置观察者，但没有任何改变。

我还为我的 CMTimeMake 尝试了不同且更高的时间尺度......但没有效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-15T18:57:03.457

我知道这个问题有点老了，但无论如何.......

第一件事：

如果您查看[文档](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVPlayer_Class/index.html#//apple_ref/occ/instm/AVPlayer/addPeriodicTimeObserverForInterval:queue:usingBlock: "文件")，您可能会看到以下声明。

> 该块以指定的时间间隔定期调用，根据当前项目的时间线进行解释。**每当时间跳跃以及播放开始或停止时，也会调用该块**。如果该间隔实时对应于一个非常短的间隔，则玩家调用该块的频率可能低于请求的频率。即便如此，播放器将足够频繁地调用该块，以便客户端在其最终用户界面中适当地更新当前时间的指示。

这表明为什么在开始和结束播放时调用它。

关于函数被多次调用，我猜这是因为玩家正在遭受的内部状态变化。我检查了播放器的“rate”、“status”和“playerItem”属性，但似乎没有说明发生了什么。

您可以做的一件事是仅在玩家真正玩游戏后才考虑事件。

在调用 play 方法之前添加以下代码。

```
__block AVPlayer* blockPlayer = self.player;
__block typeof(self) blockSelf = self;

// Setup boundary time observer to trigger when audio really begins,
// specifically after 1/3 of a second playback
self.startObserver = [self.player addBoundaryTimeObserverForTimes:
        @[[NSValue valueWithCMTime:CMTimeAdd(self.player.currentTime, CMTimeMake(1, 3))]]
                             queue:NULL
                        usingBlock:^{                    
                          blockSelf.isPlaying = YES;    
                          // Remove the boundary time observer
                          [blockPlayer removeTimeObserver:blockSelf.startObserver];
                        }]; 
```

现在在**addPeriodicTimeObserverForInterval**块上，您只需要检查我们刚刚分配的变量。

```
__block typeof(self) blockSelf = self;  
[self addPeriodicTimeObserverForInterval:CMTimeMake(60, 1)
                                   queue:dispatch_get_main_queue()
                              usingBlock:^(CMTime time)
                                  {
                                      if (blockSelf.isPlaying) {
                                         ... do some stuff here
                                      }
                                  }]; 
```

好吧，这不是更清洁的解决方案，但对我来说效果很好。如果我找到更好的东西，我会来编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:11:10.870

也许在您的 CMTime 调用中，您需要设置更高的精度。目前，您将其设置为 25 秒，但这不允许对浮点值进行舍入。尝试使用 25,000 作为您的时间表，看看是否可行。

# c# - Lambda 表达式从 DataView 中删除带有条件的行

> ID：13401210
> 
> 赞同：0
> 
> 时间：2012-11-15T15:52:24.163
> 
> 标签：c#, lambda, dataview

我有以下内容：

```
 DataView studentInfo=ds.Tales[0].DefaultView;//Assuming I have a DataTabe ds with data
 studentInfo.RowFilter=myRowfilter 
```

我想做类似的事情：

```
studentInfo(x=>x.remove(all students where some function returns true) 
```

我不想使用行过滤器。我知道我可以在那里添加一个子句来过滤该行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:21:35.857

使用类型<>

```
view.Table.Rows.OfType<DataRow>()
               .Where (row => row["Name"] == "Candy") 
```

# android - 同一传感器事件的两个侦听器

> ID：13401226
> 
> 赞同：0
> 
> 时间：2012-11-15T15:53:22.897
> 
> 标签：android, accelerometer, android-sensors

我想了解更多关于在 Android 中使用传感器的信息。我做了一个小应用程序来测试加速度计。当它检测到震动时，它会显示*Toast*消息。我在服务中放置了适当的监听器。

我的手机上还有一个手电筒应用程序（从市场下载）。手电筒可以通过摇动手机来启动。但是当我安装我的应用程序并试图摇晃手机时，我总是收到*Toast*消息。手电筒永远不会启动。

当有两个应用程序应该对相同的传感器事件做出反应时，Android 应该如何表现？

编辑

我又申请了一份。它与第一个相同。只有我的*Toast*信息不同。当我尝试摇晃手机时，我会收到两条*Toast*消息。

# asp.net - “无法解码 PKCS7SignedData 对象” - ASP.NET iTextSharp

> ID：13401227
> 
> 赞同：0
> 
> 时间：2012-11-15T15:53:23.660
> 
> 标签：asp.net, pdf, itextsharp

我正在尝试验证是否已使用 iTextSharp 从服务器端对 pdf 进行数字签名，但收到以下错误：代码上的“无法解码 PKCS7SignedData 对象”

```
PdfPKCS7 pk = af.VerifySignature(name); 
```

这是功能：

```
public string verifyPdfSignature(string pdfFile)
    {
        var parser = new X509CertificateParser();

        PdfReader reader = new PdfReader(pdfFile);
        AcroFields af = reader.AcroFields;
        var names = af.GetSignatureNames();

        if (names.Count == 0)
        {
            return "No Signature present in pdf file.";
        }
        foreach (string name in names)
        {
            if (!af.SignatureCoversWholeDocument(name))
            {
                return (string.Format("The signature: {0} does not cover the whole document.", name));
            }
            PdfPKCS7 pk = af.VerifySignature(name);  //<--- ERROR HERE
            var cal = pk.SignDate;
            var pkc = pk.Certificates;

            if (!pk.Verify())
            {
                return "The signature could not be verified.";
            }
            if (!pk.VerifyTimestampImprint())
            {
                return "The signature timestamp could not be verified.";
            }
        }
        return "nothing";
    } 
```

# mysql - MySQL计算百分比，我可以使用变量吗？

> ID：13401231
> 
> 赞同：0
> 
> 时间：2012-11-15T15:53:27.533
> 
> 标签：mysql, variables, count, percentage

我有一个查询，它返回会话数量以及这些会话中的订单数量。简单的东西，但我想做的是显示下订单的会话百分比。

```
SELECT COUNT(*) FROM table.session //Save this as variable 'Amount1'?
WHERE ses_Date BETWEEN ('2006/01/01') AND ('2011/01/01')
UNION ALL
SELECT COUNT(*) FROM table.session
WHERE Ses_ID
IN
(
SELECT Ses_ID FROM session //Save this as variable 'Amount2'?
JOIN table.order ON order.Session_ID = session.Ses_ID
WHERE ses_Date BETWEEN ('2006/01/01') AND ('2011/01/01')
GROUP by ses_ID
)

//Then do this, Display the percentage of the two
union all   
Select(SUM(amount2) /SUM(amount1) * 100) 
```

在对代码的评论中，我写了我在理论上想做的事情，希望对您有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:21:49.117

你可以这样做：

```
SELECT COUNT(*) / (SELECT COUNT(*) 
                   FROM table.session
                   WHERE ses_Date BETWEEN ('2006/01/01') AND ('2011/01/01')) * 100

FROM table.session
WHERE Ses_ID
IN
(
SELECT Ses_ID FROM session //Save this as variable 'Amount2'?
JOIN table.order ON order.Session_ID = session.Ses_ID
WHERE ses_Date BETWEEN ('2006/01/01') AND ('2011/01/01')
GROUP by ses_ID
) 
```

# jquery - 使用 jQuery 读取 xml

> ID：13401238
> 
> 赞同：2
> 
> 时间：2012-11-15T15:53:44.710
> 
> 标签：jquery, xml, ajax, dom

如果更容易的话，我想用 jQuery 或其他东西来阅读这个 xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Film SYSTEM "film_commentaries_opinion.dtd">

<Film lang="fr" title="Mixed" originalTitle="">
 <Actors>
 </Actors>
 <Comments>
  <Comment>films adapted from comic <Tag length="5" />books have had plenty
    of success, whether they're about superheroes (batman, superman, spawn), 
    or geared toward kids (casper) or the arthouse crowd (ghost world), but 
    there's never really been a comic <Tag length="4" />book like from 
    hell before. For starters, it was created by Alan Moore 
    (and Eddie Campbell), who brought the medium to a whole new level in the 
    mid '80s with a 12-part series called the watchmen.</Comment>
 </Comments>
</Film> 
```

当然我无法更改我的富皇帝客户端给出的xml **，当然我要检索的是单词“ *books* ”和单词“ *book* ”。`<Tag />`给我一个“*长度*”，它代表我需要选择的以下单词的长度。**

我怎样才能做到这一点？

现在我使用：

```
 $.ajax({
    type: 'GET', url: 'data/mergedXML_PangLee.xml.tag.xml', dataType: 'xml',
    success: function(xml) {
        var tags = $(xml).find("Tag");
        // other code here...
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:37:31.140

jQuery 方式

```
success: function(xml) {

    var liveXml = $(xml),
        inTagMode = false,
        tagLength,
        tags = [];

    liveXml.find('Comment').contents().each(function(){
        var node = $(this),
            value = node.text();

        if (inTagMode){
            tags.push( value.substring(0,tagLength) );
            inTagMode = false;
        } else {
            if (this.nodeName.toLowerCase() === 'tag'){
                inTagMode = true;
                tagLength = node.attr('length');
            }
        }
    });

} 
```

**演示在** [http://jsfiddle.net/gaby/wtykx/](http://jsfiddle.net/gaby/wtykx/)

* * *

正则表达式方式（*假设标签为全词*）

```
success: function(xml) {
    var regex = /(?:<tag.*?\/>)(..*?\b)/gi;
    var tags = [], result;
    while(result = regex.exec(xml)){
        tags.push(result[1]);
    }
} 
```

**演示在** [http://jsfiddle.net/gaby/wtykx/1/](http://jsfiddle.net/gaby/wtykx/1/)

# c++ - OpenGL中的内存分配

> ID：13401242
> 
> 赞同：1
> 
> 时间：2012-11-15T15:53:54.050
> 
> 标签：c++, opengl, memory, glut, allocation

这更像是一个有直接答案的讨论问题。我正在 OpenGL 中开发一个相当简单的场景，并且遇到了我正在使用的类结构的问题。我有一个“原始”基类，从中构建派生类，例如 Cube、Tetrahedron、Sphere 等。基类包含有关对象的所有数据，例如它的顶点和法线。从这里开始，我有几个从 Model 类派生的类，例如 Fence，它包含几个排列成正确结构的立方体。我将所有顶点和法线存储在堆中，并且需要一种释放内存的方法。然而，当试图释放 Primitive 的构造函数中的内存时，我遇到了一个错误。

我认为这是因为在使用 GLUT 时，模型是在 glutMainLoop() 之外定义的，因此在程序完成使用它们之前它们就超出了范围。有没有更有效的方法来管理 OpenGL 中顶点数组的内存？或者有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:25:52.010

不要为您的模型使用客户端缓冲区，而是使用服务器端缓冲区。这些是使用绑定的`glGenBuffer glBindBuffer and glBufferData`。这些 API 将您的缓冲区上传到服务器内存中，上传后您可以立即释放数据。

较新版本的 OpenGL 具有顶点数组对象 (VAO)，它们也可能对您有所帮助。

# ajax - 目录的 AJAX 重写规则

> ID：13401243
> 
> 赞同：1
> 
> 时间：2012-11-15T15:53:57.173
> 
> 标签：ajax, wordpress, mod-rewrite

除了 wordpress 之外，我还尝试编写重写规则：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我不希望所有内容都重定向到主页。我有多个子目录也需要重定向： [http://www.example.com/sub1](http://www.example.com/sub1)和[http://www.example.com/sub2](http://www.example.com/sub2)。我这样做是为了让我的内容可以通过 Ajax 加载。

我以为这只是

```
RewriteRule ^/(sub1|sub2)/(.*)$ http://www.example.com/$1/ [L] 
```

我把它放在这里的块中：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(sub1|sub2)/(.*)$ http://www.example.com/$1/ [L]
RewriteRule . /index.php [L]
</IfModule> 
```

也许使用 wordpress 你必须使用 wp_rewrite_rule？我想我可以弄乱 .htaccess 文件，让我的规则起作用，然后将它移到函数中。

任何帮助，将不胜感激。

谢谢。

更新：我还尝试将 .htacces 文件设置回 wordpress 默认值...并将此代码添加到我的子主题的 functions.php 文件中：

```
function AJAX_rewrite_rule() {
add_rewrite_rule(
    '^/(sub1|sub2)/(.*)$',
    'http://www.example.com/$1',
    'top' );
};
add_action( 'init', 'AJAX_rewrite_rule' ); 
```

似乎减慢了所有内容的加载速度，但所有未找到的文件仍被重定向到主页，而不是子目录。

更新#2 我认为我走错了方向，因为 add_rewrite_rule 只是向 wordpress 已经到位的结构添加规则。这一切都是通过解释 URL 并将它们更改为由索引运行的数据库查询的变量来实现的。

我很确定我需要使用 $wp_rewrite->non_wp_rules。如果有人有更多想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:10:47.427

试试这个，你似乎有错误的线路：

```
<IfModule mod_rewrite.c>
RewriteEngine On
# RewriteBase /
# RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f #Means DONT redirect if file exists.
RewriteCond %{REQUEST_FILENAME} !-d #Means DONT redirect if directory exists.
RewriteCond %{REQUEST_URI} !^/sub1/
RewriteCond %{REQUEST_URI} !^/sub2/
# RewriteRule ^/(sub1|sub2)/(.*)$ http://www.example.com/$1/ [L]
RewriteRule . /index.php [L]
</IfModule> 
```

发生的情况是，每次添加“RewriteRule”时，所有“RewriteCond”都会应用于该规则，然后从空白开始：

```
RewriteCond A
RewriteCond B
RewriteCond C
RewriteRule Whatever [L] #This applies A, B, and C
RewriteRule Another [L] #This applies no rules 
```

也许这会有所帮助。

此外，如果这不起作用，您可以尝试在“RewriteEngine On”之后立即添加“RewriteRule ^/(sub1|sub2)/(.*)$ [http://www.example.com/](http://www.example.com/) $1/ [L]” …</p>

# git - 没有更新时 Git 运行服务器端钩子

> ID：13401244
> 
> 赞同：3
> 
> 时间：2012-11-15T15:54:04.050
> 
> 标签：git

我有一个服务器端挂钩（更新后），它将在我每次推送代码后运行。即使没有要推送的新更改，是否有任何方法（或者可能是另一个钩子？）来运行它？

例子：

```
$ git push origin master
remote: Hook running....
$
$ git push origin master
Everything up-to-date
$ 
```

我希望它再次运行。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:55:31.860

创建一个`pre-receive`钩子，制作它`exit 1`，并从客户端`git push origin master HEAD:non-existing-branch`。这将触发`pre-receive`钩子，即使`master`.

为避免错误消息，请让`pre-receive`钩子成功退出 ( `exit 0`)，然后手动`non-existing-branch`从`post-receive`钩子中删除 。但是，这会创建一个小的时间窗口（当文件`non-existing-branch`存在时），`git push ...`从另一个客户端启动不会运行挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:49:58.813

非常感谢[@pts](https://stackoverflow.com/a/15986555/277826)的回答（今天使用了我所有的选票，不能立即投票`:)`）；对于那些（像我一样）在理解它的确切功能方面有一点问题的人，这里有一个简单的命令行日志，演示了`non-existing-branch`to trigger的用法`pre-receive`：

```
# create original repo:

$ cd /tmp
$ mkdir repotest_git
$ cd repotest_git/
$ git init
Initialized empty Git repository in /tmp/repotest_git/.git/
$ git config user.name "Your Name"
$ git config user.email you@example.com

# populate repo with 1 commit:

$ echo "test" > test.txt
$ git add test.txt
$ git commit -m "initial commit"
[master (root-commit) 2b60608] initial commit
 1 file changed, 1 insertion(+)
 create mode 100644 test.txt
$ 

# create remote "bare" repo; and add pre-receive hook there:

$ cd /tmp
$ git clone --bare repotest_git repotest-remote.git
Cloning into bare repository 'repotest-remote.git'...
done.
$ cd repotest-remote.git
$ 
$ cat > hooks/pre-receive <<"EOF"
#!/bin/sh
echo from pre-receive: HELLO_VAR [$HELLO_VAR]
exit 1
EOF
$ chmod +x hooks/pre-receive

# go back to original repo, add a remote reference
# to the newly created remote "bare" repo; update with pull:

$ cd /tmp
$ cd repotest_git
$ git remote add origin file:///tmp/repotest-remote.git
$ git pull origin master
From file:///tmp/repotest-remote
 * branch            master     -> FETCH_HEAD
Already up-to-date.

# try testing the hook script;
# since we don't have any changes, Everything is 
# up-to-date, and the pre-receive won't trigger:

$ git push
Everything up-to-date

# try testing with HEAD:non-existing-branch
# pre-receive gets triggered - and 
# we can see variable is not there:

$ git push origin master HEAD:non-existing-branch
Total 0 (delta 0), reused 0 (delta 0)
remote: from pre-receive: HELLO_VAR []
To file:///tmp/repotest-remote.git
 ! [remote rejected] HEAD -> non-existing-branch (pre-receive hook declined)
error: failed to push some refs to 'file:///tmp/repotest-remote.git'

# try testing again, this time specify 
# env. variable on command line....
# pre-receive gets triggered - and 
# we can see variable is there:

$ HELLO_VAR=hello git push origin master HEAD:non-existing-branch
Total 0 (delta 0), reused 0 (delta 0)
remote: from pre-receive: HELLO_VAR [hello]
To file:///tmp/repotest-remote.git
 ! [remote rejected] HEAD -> non-existing-branch (pre-receive hook declined)
error: failed to push some refs to 'file:///tmp/repotest-remote.git' 
```

在这里，对于本地工作，一切都按预期使用变量；但是，显然，如果您的远程存储库位于服务器等后面，那么查看变量的结束方式/位置可能会出现问题 - 因此仅调试该方面非常有用，而不必每次都对文件进行更改 + `git add`/ `commit`/ `push`，只是为了触发脚本。

# vb.net - 如何使用 VB.NET 在 AddHandler 中传递参数

> ID：13401246
> 
> 赞同：1
> 
> 时间：2012-11-15T15:54:05.833
> 
> 标签：vb.net

这就是我想要做的。我正在创建一个带有自动返回的动态检查，当单击它时，它将转到我的子例程并执行某些操作。我试图传递的两个参数是 checkox 所在的表和复选框 id 的名称。但我得到了错误

> AddressOf 必须是不带括号的方法的名称或
> 
> 方法没有与发送者兼容的签名作为对象，e system.eventArgs”。这是我的代码。

```
 chkSel = New CheckBox
 chkSel.ID = "check_" & CStr(a)              
 chkSel.AutoPostBack = True

  'This is where I get the error
  AddHandler chkSel.CheckedChanged, AddressOf change_operating_items(tableName, "check_" & CStr(a))  
 tblcell.Controls.Add(chkSel)
 tblrow.Cells.Add(tblcell) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T16:02:12.647

注册事件处理程序时不能传递参数。

相反，如果发生自定义事件，您可以在引发该事件时传递它们。

在这里，您需要处理`CheckedChanged`事件，将其`Sender`转换为`CheckBox`并使用它的`ID`属性。

```
Sub change_operating_items(sender As Object, e As EventArgs) 
    Dim chk = DirectCast(sender, CheckBox)
    Dim id = chk.ID
    ' do something with it '
EndSub 
```

# javascript - 使用 jsPlumb 和 jquery-ui 的行偏移不正确

> ID：13401247
> 
> 赞同：2
> 
> 时间：2012-11-15T15:54:11.040
> 
> 标签：javascript, jquery-ui, jsplumb

我想使用 jsPlumb 连接 div。当我使用样式时它可以工作，但是当我使用 jquery-ui 装饰（如[手风琴](http://jqueryui.com/accordion/)）时，最后一行的偏移量不正确。

代码：

```
<!doctype html>
<html lang="us">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>
    <link href="css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet"/>
    <script src="js/jquery-1.8.2.js"></script>
    <script src="js/jquery-ui-1.9.1.custom.js"></script>
    <script src="js/jquery.jsPlumb-1.3.16-all.js"></script>

    <script>
    $(function() {
        $( "#top" ).accordion({
            collapsible: false,
            icons: false
            });
    });
    </script>
</head>

<body>

<h1>jsPlumb tests</h1>

<div id="top"  style="border-width: 2px; border-style: solid; border-color: red;">
    <h1>TOP</h1>
</div>
<div>
    <p>Text Text Text</p>
</div>
<div id="bottom" style="margin: 0px 100px 0px 50px; border-width: 2px; border-style: solid; border-color: red;">
    <h1>Bottom</h1>
</div>

<script>
jsPlumb.ready(function() {

jsPlumb.importDefaults({
    ConnectorZIndex:5
});

var jsP = jsPlumb.getInstance({
    PaintStyle:{ lineWidth:1, strokeStyle:"#567567", outlineColor:"black", outlineWidth:1 },
    Connector: "Straight",
    Endpoint: "Blank"
});

var e0 = jsP.addEndpoint("top", { 
    anchor: ["Perimeter", {shape:"square", anchorCount:100}]
});

var e1 = jsP.addEndpoint("bottom", { 
    anchor: ["TopCenter"]
});

jsP.connect({ source:e0, target:e1});

}); 

</script>

</body>
</html> 
```

产生： ![代码结果](../Images/71b0798ae9ba6e4d4384224bf65fd3cf.png)

想要的效果（没有手风琴装饰）是： ![期望的结果](../Images/1cd785f7566ec1ce142038b0da082f89.png)

我做错了什么？似乎在手风琴装饰之前渲染了线条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:04:31.170

我找到了一个改变脚本顺序的解决方案，包括 jsPlumb 中的样式之一：

```
<!doctype html>
<html lang="us">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>
    <link href="css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet"/>
    <script src="js/jquery-1.8.2.js"></script>
    <script src="js/jquery-ui-1.9.1.custom.js"></script>
    <script src="js/jquery.jsPlumb-1.3.16-all.js"></script>
</head>

<body>

<h1>jsPlumb tests</h1>

<div id="top"  style="border-width: 2px; border-style: solid; border-color: red;">
    <h1>TOP</h1>
</div>
<div>
    <p>Text Text Text</p>
</div>
<div id="bottom" style="margin: 0px 100px 0px 50px; border-width: 2px; border-style: solid; border-color: red;">
    <h1>Bottom</h1>
</div>

<script>
        $( "#top" ).accordion({
            collapsible: false,
            icons: false
            });

jsPlumb.ready(function() {

jsPlumb.importDefaults({
    ConnectorZIndex:5
});

var jsP = jsPlumb.getInstance({
    PaintStyle:{ lineWidth:1, strokeStyle:"#567567", outlineColor:"black", outlineWidth:1 },
    Connector: "Straight",
    Endpoint: "Blank"
});

var e0 = jsP.addEndpoint("top", { 
    anchor: ["Perimeter", {shape:"square", anchorCount:100}]
});

var e1 = jsP.addEndpoint("bottom", { 
    anchor: ["TopCenter"]
});

jsP.connect({ source:e0, target:e1});

}); 

</script>

</body>
</html> 
```

结果是： ![期望的结果](../Images/265c4e6b0c907630f421309618ae40b1.png)

# php - 单元测试 Yii 行为

> ID：13401258
> 
> 赞同：4
> 
> 时间：2012-11-15T15:54:51.213
> 
> 标签：php, unit-testing, yii

我正在寻找一种基于 CActiveRecordBehavior 对 Yii 行为进行单元测试的方法。

由于有关行为可以与许多模型一起使用，我想独立于任何模型来测试它们，但我不知道如何去做。

Yii 源使用专门为测试制作的数据库表对 CTimestampBehavior 进行了单元测试。我有很多行为要测试，并且不想为每个行为创建一个表 - 任何人都可以建议一个更好的策略来测试行为而不依赖于特定的模型或表吗？也许某种方式可以“伪造” CActiveRecord 模型？

[编辑]澄清-我不希望我的测试依赖于特定的模型或存在的数据库表-我只想测试行为。为了让事情变得更有趣，该行为附加到 onAfterConstruct 事件，因此需要在构造之前将其应用于假模型！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:54:23.697

取决于你想测试什么。

我通常这样实现它们：

```
private $_oBehavior
private $_oObject;
private $_oEvent

$this->_oObject   = Object::model()->findByPk(n1);
$this->_oEvent    = new CModelEvent($this->oJob);
$this->_oBehavior = new TestBehavior;
$this->_oBehavior->attach($this->_oEvent->sender);

$this->_oBehavior->afterSave($this->_oEvent);
// asserts 
```

这样，您可以通过像事件一样实例化需要模型来测试所有需要模型的内容。所有不需要模型的东西也可以这样测试。

# asp-classic - ASP Classic - 如何计算嵌套列表中的子项数

> ID：13401270
> 
> 赞同：1
> 
> 时间：2012-11-15T15:55:19.807
> 
> 标签：asp-classic, vbscript

我有一个嵌套列表，用于显示来自数据库的可用视频，这些视频分组在各自的标题下。我想知道是否可以计算每个分组中的视频数量，以便我可以像这样显示它：

视频组标题 1（3 个视频）
1\. 视频 1
2\. 视频 2
3\. 视频 3
视频组标题 2（6 个视频）
1\. 视频 1
2\. 视频 2
...等。

SQL 现在非常简单：

```
SELECT * FROM video_module_type; 
```

我正在使用 ASP VBscript，我所拥有的代码是：

```
<%
'----------------------------------------------------------------------------------------------------
    'VARIABLES
'----------------------------------------------------------------------------------------------------

Dim previous_video_module_name
Dim first_video_module_name
Dim DIV_vms_vid_title
Dim DIV_vms_grouping
Dim DIV_video_section_group
Dim DIV_vms_video_holder
Dim DIV_vms_sm_thumb
Dim DIV_vms_results
Dim vms_shim
Dim DIV_end

previous_video_module_name = ""
first_video_module_name = true

DIV_vms_vid_title = "<div class=""vms_vid_title"">"
DIV_vms_grouping = "<div id=""sustvid_webinar"" class=""vms_grouping"">"
DIV_video_section_group = "<div class=""video_section_group"">"
DIV_vms_video_holder = "<div class=""vms_video_holder"">"
DIV_vms_sm_thumb = "<div class=""vms_sm_thumb"">"
DIV_vms_vid_synopsis = "<div class=""vms_vid_synopsis"">"
DIV_vms_results = "<div class=""vms_results"">"
vms_shim = "<img src=""/images/shim.gif"" width=""16"" height=""16"">"
DIV_end = "</div>"
'----------------------------------------------------------------------------------------------------
    'IF NOT THE SAME VALUE AS PREVIOUS
'----------------------------------------------------------------------------------------------------
for i = 0 to videoModulesListerNumber-1

    if video_module_name(i) <> previous_video_module_name then
        '------------------------------------------------------------------------------------------
            'IF NOT THE FIRST TIME, CLOSE THE NESTED LIST
        '------------------------------------------------------------------------------------------
            if first_video_module_name then
              response.Write("<h2>" & video_module_name(i) & "</h2>")
            end if
        '------------------------------------------------------------------------------------------
            'DISPLAY THE CATEGORY
        '------------------------------------------------------------------------------------------
        response.Write("<!--START VIDEO GROUP: " & video_module_name(i) & "-->")
        '------------------------------------------------------------------------------------------
            'IF NOT THE SAME VALUE AS PREVIOUS OPEN THE NESTED LIST AND STORE THE CURRENT 
            'VALUE FOR COMPARISON NEXT TIME
        '------------------------------------------------------------------------------------------
        previous_video_module_name = video_module_name(i)
    end if
    '------------------------------------------------------------------------------------------
    'DISPLAY THE VIDEOS 
    '------------------------------------------------------------------------------------------
    response.Write(DIV_vms_grouping)
    response.Write(DIV_video_section_group)
    response.Write(DIV_vms_video_holder)
    response.Write(DIV_vms_vid_title & "<h2>" & video_module_video_name(i) & "</h2>" & DIV_end)
    response.Write(DIV_vms_sm_thumb & video_module_thumbnail(i) & DIV_end)
    response.Write(DIV_vms_vid_synopsis)
    response.Write("<p>" & video_module_synopsis(i) & "</p>")
    response.Write(DIV_vms_results & vms_shim & DIV_end)
    response.Write(DIV_end) ' close DIV_vms_grouping
    response.Write(DIV_end) ' close DIV_video_section_group
    response.Write(DIV_end) ' close DIV_vms_video_holder
    '------------------------------------------------------------------------------------------
        'IT'S NO LONGER THE FIRST TIME; CHANGE THE "first_video_module_name" VARIABLE
    '------------------------------------------------------------------------------------------
    first_video_module_name = false
next

%> 
```

我认为问题可能是我不知道这个术语是什么，所以我无法搜索它，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:29:37.247

您可以将查询更改为类似

```
SELECT video_module_type.*, (SELECT COUNT(*) 
                             FROM video_module_type as t2 
                             WHERE t2.Group = video_module_type.VideoGroup) as GroupCount 
FROM video_module_type 
```

并使用该`GroupCount`领域。

**或者**

可以将结果遍历两次，第一次统计项目，第二次显示结果

**或者**

您可以使用 Javascript 来计算项目并显示结果 [-> JsFiddle 示例](http://jsfiddle.net/RVuxP/)

# javascript - Node.js 调用 json 数据的问题

> ID：13401275
> 
> 赞同：2
> 
> 时间：2012-11-15T15:55:41.240
> 
> 标签：javascript, json, node.js, express

我在从 json 文件中获取 json 数据时遇到了一些问题，首先是错误： `"NetworkError: 404 Not Found - http://localhost:8000/channels.json"`

这是在我的 html 文件中获取 json 数据的代码：

```
 <div id="result"></div>
      <script type="text/javascript">
    // read episodes in channel
    function ajaxRequest(){
        if (window.XMLHttpRequest) // if Mozilla, Safari etc
            return new XMLHttpRequest();
        else
            return false;
    }

    var mygetrequest=new ajaxRequest();
    mygetrequest.onreadystatechange=function(){
        if (mygetrequest.readyState==4){
            if (mygetrequest.status==200 || window.location.href.indexOf("http")==-1){
                var jsondata=eval("("+mygetrequest.responseText+")"); //retrieve result as an JavaScript object
                var rssentries=jsondata.channels;
                var output='<ul>';
                for (var i=0; i<rssentries.length; i++){
                    output+='<li>';
                    output+=rssentries[i].channel_id+'</a><br>';
                    output+='<a href="multiroom.html">'+rssentries[i].name+'</a>';
                    output+='</li>';
                }
                output+='</ul>';
                document.getElementById("result").innerHTML=output;
            }else{
                alert("An error has occured making the request");
            }
        }
    }

    mygetrequest.open("GET", "channels.json", true);
    mygetrequest.send(null);

    </script> 
```

所以 html 单独工作，但是当我尝试在我的节点服务器中呈现它时，我得到错误，我的节点服务器中的代码在 express 中：

```
var express = require('express');
var http = require('http'); 
var app = express();
var server = module.exports = http.createServer(app);

server.listen(8000);
console.log("Express server listening on port 8000 in %s mode");

app.set('views', __dirname + '/views');
app.engine('html', require('ejs').renderFile);

app.get('/episodes', function(req, res){
    res.render('episodes.html');
}); 
```

所以我必须在服务器中进行json数据调用以避免错误，没有别的办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:08:19.773

如果你在服务器上渲染，你不能使用 Ajax。Ajax 只在浏览器中运行，而不是在服务器上运行。在服务器上，您必须直接读取文件，将其传递给渲染器，然后在模板中渲染它。例如：

```
var fs = require('fs');
app.get('/episodes', function(req, res){
    fs.readFile('./public/channels.json', 'utf8', function (err, data) {
        var channels = JSON.parse(data);
        res.render('episodes.html', channels);
    });
}); 
```

在您的 ejs 模板中，您必须将通道直接呈现到页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:11:31.360

Max 建议的另一个选择是使用 res.format() 返回您想要的特定内容类型。

[http://expressjs.com/api.html#res.format](http://expressjs.com/api.html#res.format)

```
res.format({
  text: function(){
      res.send(...);
  },
  html: function(){
      res.send(...);
  },
  json: function(){
    fs.readFile('./public/channels.json', 'utf8', function (err, data) {
        var channels = JSON.parse(data);
        res.send(channels);
    });
  }
}); 
```

# c# - 为什么这段代码是有效的 C# 代码？

> ID：13401276
> 
> 赞同：3
> 
> 时间：2012-11-15T15:55:41.150
> 
> 标签：c#, .net, string, null, concatenation

> **可能重复：**
> [C#：为什么在字符串中添加 null 是合法的？](https://stackoverflow.com/questions/637308/c-why-is-adding-null-to-a-string-legal)

这是有效的 C# 代码：

```
var samsung= "xyz" + null + null + null + null + "890";  // xyz890 
```

这是无效的 C# 代码：

```
var iphone= null.ToString(); // compiler error 
```

为什么以及如何第一个语句有效而第二个语句无效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:06:35.627

`+`运算符用于连接字符串，因为它是字符串类的`null`一个实例，所以它可以用作运算符的参数。`"xyz" + null` 最终返回字符串“xyz”，所以这个过程只是重复，直到你真正添加`"890"`.

虽然 null 可以用作方法参数的字符串对象，但您实际上不能在其上调用方法，因为没有任何东西可以处理方法调用。

将方法视为对象处理外部请求的一种方式，事情就更有意义了。您可以向对象发送请求，并`null`作为处理内容的参数，但您实际上不能要求`null`处理某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:58:17.347

C# 编译器将连接中的 null 视为空字符串。

```
 var samsung= "xyz" + null + null + null + null + "890"; 
```

等于

```
 var samsung= "xyz" + ""+ ""+ ""+ ""+ "890"; 
```

当您尝试调用时，`null.toString()`您实际上是在尝试调用空对象上的方法，该方法（如果已编译）总是会导致`NullReferenceException`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:58:19.163

使用第一行，您正在连接字符串。 `null`什么都不是，所以基本上你得到`xyz890`. 这就像做`1+0+0+0+4`但是用你的第二个，你打电话`ToString()`给`null`. `null`什么都不是，所以没有什么可以调用`ToString()`的。您正在尝试在未初始化的变量上调用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T15:59:36.410

由于`string`是引用类型，因此 null 可以隐式转换为`string`. 在第一种情况下，运算符序列`+`只是转换为`String.Concat(obj1, obj2, obj3, ...)`

要编译您的代码，您可以调用`Convert.ToString`：

```
var iphone = Convert.ToString(null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T16:07:04.753

您可以将`+`运算符视为全局静态函数，如下所示：

```
+(string leftHandSide, string rightHandSide) {
  if (leftHandSide == null)
     leftHandSide = string.Empty;
  if (rightHandSide == null)
     rightHandSide = string.Empty;
  string returnValue;

  // concatenate string

  return returnValue;
} 
```

由于这个字符串连接方法是静态的，它不需要实例来调用它，它处理空值。但是，当您尝试调用`ToString`时`null`，没有对象的实例，因此没有`ToString`方法可以调用，因此出现异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T16:40:53.677

这是设计使然。您可以阅读[C# Language Specification](http://msdn.microsoft.com/en-us/library/ms228593.aspx)。引用：

> 字符串连接：
> 
> ```
> string operator +(string x, string y);
> string operator +(string x, object y);
> string operator +(object x, string y); 
> ```
> 
> 二元运算符的这些重载`+`执行字符串连接。如果字符串连接的操作数是`null`，则替换为空字符串。否则，任何非字符串参数都会通过调用`ToString`从 type 继承的虚拟方法转换为其字符串表示形式`object`。如果`ToString`返回`null`，则替换为空字符串。
> 
> [...]

因此，正如其他人所说，将其`+`视为一种接受两个参数并且可以接受一个或两个参数的方法`null`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T15:58:04.777

~~因为在任何情况下都不能在引用上调用方法`null`，所以编译器不允许这样做。~~ 在您的第一种情况下，编译器会将字符串常量预编译`"xyz890"`为合法赋值。

通常，`+`用于`string`编译的运算符`String.Concat(s1, s2, ...)`支持`null`参数。

在第二种情况下更准确地说，实际问题不在于它是一个空指针，而在于没有将方法绑定到的*类型。*正如其他评论中指出的那样，您可以`null`转换为任何引用类型，并且编译得很好：

```
((string)null).ToString();   // compiles, but fails at run-time. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T16:04:17.850

+ 运算符将被转换为一个看起来很像的静态函数：

```
public static string Concat(string first, string second) {...} 
```

将 null 作为参数传递给函数不是问题。它通过就好了。该函数碰巧在连接参数之前检查两个参数是否为空；如果任何参数为空，则将它们视为空字符串，以免导致异常。这里的关键点是字符串的实例成员在此函数第一次检查为空之前不会被调用。

至于在编译时`null.ToString()`对任何计算`null`结果调用实例函数会导致异常。这就是这种情况的定义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-15T16:04:37.133

如果您查看 IL，您会发现编译器足够聪明，只需删除空值并创建连接字符串。如前所述，您不能执行 null.ToString(); 您可以执行 string.Empty 或将字符串分配为空。

```
.method private hidebysig static void  Main() cil managed
{
  .entrypoint
  // Code size       8 (0x8)
  .maxstack  1
  .locals init ([0] string samsung)
  IL_0000:  nop
  IL_0001:  ldstr      "xyz890"        //null has been removed by compiler.  
  IL_0006:  stloc.0
  IL_0007:  ret
} // end of method Program::Main 
```

**编辑**
扩大尼尔森的评论。由于 null 表示 nil 引用，因此可以公平地说处理字符串 concat 的方式是 C# 允许的操作。我想它使用字节数组构建，它会省略空值，因此只是让它看起来好像它正在连接空值。

# ruby-on-rails - 从 JavaScript 获取资产路径

> ID：13401281
> 
> 赞同：22
> 
> 时间：2012-11-15T15:55:52.940
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, js-routes

我需要在 Rails 资产管道中的 HTML5 画布上显示图像，但我需要知道来自 JavaScript 的资产路径。我正在将[js-routes](https://github.com/railsware/js-routes)用于应用程序的其他部分，但它似乎没有提供一种方法来获取资产管道中某些内容的路径。

从 JavaScript 获取 Rails 资产（例如图像）路径的正确方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-15T16:04:42.563

在 Rails[资产管道指南](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)中，他们通过使用 ERB 预处理样式表，提供了在样式表中编码资产的示例。您可以在 JavaScript 中使用相同的技术，假设您`.erb`在文件名的末尾添加了一个：

```
var someAssetPath = "<%= asset_path('some_image.png') %>"; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-02T17:03:36.343

查看[js_assets（rails 项目中的 Javascript 助手）](https://github.com/kavkaz/js_assets) gem。我认为这正是您所需要的。

从文档中：

> 在 javascript 中获取模板 app/assets/javascripts/rubrics/views/index.html 的路径： `var path = asset_path('rubrics/views/index.html')`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-03T03:20:28.047

为什么不在 .erb 文件中的元素内为路径添加数据属性，然后使用 JQuery 检索它？

在 some_template.html.erb 里面

```
<%= content_tag(:div, "", id: 'some-id', data:{path_to_asset: asset_path("some_image.png")}) %> 
```

然后在 some_javascript.js

```
var assetPath = $("#some-id").data("pathToAsset"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-15T23:00:26.203

对于使用 HAML 的用户，您可以执行以下操作：

```
:javascript
   var assetPath = "#{asset_path('some_image.jpg')}"; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-13T07:39:25.187

我在 Rails 4.1 中遇到了同样的问题，并在咖啡脚本中使用了[引用 rails 资产来](http://dennisreimann.de/blog/referencing-rails-assets-in-coffeescript/)获取图像。不需要额外的库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-05T14:38:10.883

在我的例子中，我想获得样式表路径和 rails 为缓存破坏生成的哈希值，这使得硬编码变得不可能。

最终对我来说效果很好的是为html（布局）中的主要样式表链接元素分配一个ID，然后使用javascript提取href。如果您想要基本资产路径，也许可以创建一个通用元素，其中包含您需要的数据作为属性。

呈现的 HTML

```
<link rel="stylesheet" href="mypath/main.css" type="text/css" id="main-css"> 
```

JS

```
$("#main-css").attr("href"); // "mypath/main.css" 
```

# android - 将图像保存到android中的本地文件夹

> ID：13401282
> 
> 赞同：0
> 
> 时间：2012-11-15T15:55:59.790
> 
> 标签：android

我创建了从 url 读取图像的 android 应用程序。现在我想将这些图像存储在本地文件结构或 SD 卡中。所以我在我的 android 项目中创建了一个名为“images”的文件夹，并手动添加了图像 xyz.png 来测试图像的读取。

并写了下面的代码来阅读。

```
 Bitmap bMap = BitmapFactory.decodeFile("/images/xyz.png");

    ImageView imgView = (ImageView) this.findViewById(R.id.imgViewId);

    imgView.setImageBitmap(bMap); 
```

但是eclipse说找不到资源！！

在 android 应用程序中存储和读取图像的最佳方式是什么？

我做了缓存，但如果我强制关闭应用程序，缓存会被清除。

我想存储在 android 手机/平板电脑中，它应该是应用程序的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:58:40.920

尝试环境变量来获取directoty

```
Bitmap bMap = BitmapFactory.decodeFile("/images/xyz.png");
Bitmap bMap = BitmapFactory.decodeFile(Environment.getRootDirectory()+"/images/xyz.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:32:50.450

试试这个....

```
private String filepath = "MyFileStorage";
  ContextWrapper contextWrapper = new ContextWrapper(getApplicationContext());
  File directory = contextWrapper.getDir(filepath, Context.MODE_PRIVATE);
  myInternalFile = new File(directory , "abc.png");
 FileOutputStream fos = new FileOutputStream(myInternalFile);
  bMap.compress(CompressFormat.PNG, 90, fos); //output image is the image bitmap that you obtain 
```

检查这个[android 描述](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# php - XAMPP + PostgreSQL = 错误

> ID：13401285
> 
> 赞同：2
> 
> 时间：2012-11-15T15:56:06.900
> 
> 标签：php, windows, apache, postgresql, xampp

我在 Windows 7 机器上安装了 XAMPP 和 PostgreSQL。

我很好地配置了 apache httpd.conf 和 PHP.ini 文件，它们可以正常工作。我取消注释 php.ini 文件中的“扩展 php_pgsql.dll”行，并将 \php、\php\ext 以及 PostgreSQL \bin 和 \lib 目录添加到我的 PATH 变量中。

```
C:\Program Files\PostgreSQL\9.2\lib;C:\Program Files\PostgreSQL\9.2\bin;C:\xampp\php\ext;C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\php;C:\xampp\php; 
```

我下载了与windows兼容的php_pgsql.dll文件，复制到\php\ext

当我尝试启动 apache 服务器时，出现两个错误：

> “无法在动态链接库 php5ts.dll 中找到程序入口点 _regexec@20。”

和

> “PHP 启动：无法加载动态库 'C:\xampp\php\ext\php_pgsql.dll' - 找不到指定的过程。”

因此，这些错误显然不是致命的，这意味着服务器会继续启动并完成启动。另外，如果我注释掉 php.ini 中的“扩展 php_pgsql.dll”行，错误就会消失。以下是来自 PHP 和 apache 的相关错误日志：

阿帕奇：

```
[Thu Nov 15 10:48:11.763770 2012] [mpm_winnt:notice] [pid 5420:tid 320] AH00455: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 configured -- resuming normal operations
[Thu Nov 15 10:48:11.763770 2012] [mpm_winnt:notice] [pid 5420:tid 320] AH00456: Server built: Aug 18 2012 12:41:37
[Thu Nov 15 10:48:11.763770 2012] [core:notice] [pid 5420:tid 320] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'
[Thu Nov 15 10:48:11.764770 2012] [mpm_winnt:notice] [pid 5420:tid 320] AH00418: Parent: Created child process 5728
[Thu Nov 15 10:48:13.489869 2012] [ssl:warn] [pid 5728:tid 328] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Thu Nov 15 10:48:16.520042 2012] [mpm_winnt:notice] [pid 5728:tid 328] AH00354: Child: Starting 150 worker threads. 
```

PHP：

```
[15-Nov-2012 15:48:11 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext\php_pgsql.dll' - The specified procedure could not be found.

 in Unknown on line 0

[15-Nov-2012 15:48:16 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\xampp\php\ext\php_pgsql.dll' - The specified procedure could not be found.

 in Unknown on line 0 
```

我想进行此设置，以便为 PostgeSQL 数据库编写 PHP 接口。这只是为了好玩，而不是在专业背景下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:58:36.107

试试[这个](https://stackoverflow.com/questions/551734/php-not-loading-php-pgsql-dll-on-windows)，我遇到了这个问题，我将服务器安装路径`Windows 7 (64bit)`的完整路径添加到，问题就解决了。`libpq.dll``PostgreSQL``httpd.conf`

# css - 仅在 IE8 中的 css 媒体查询问题

> ID：13401287
> 
> 赞同：0
> 
> 时间：2012-11-15T15:56:10.460
> 
> 标签：css, media-queries

为什么以下媒体查询在 Google Chrome (23.0)、Firefox (16.0.2) 和 IE9 浏览器中有效，但在 IE8 中无效？

```
@media all and (min-width:720px){
  /* relevant css in here */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:58:14.073

IE8[不支持媒体查询](http://caniuse.com/css-mediaqueries)，如果您想在旧版浏览器中使用该功能，则需要使用像[Respond.js这样的 javascript 库](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:59:46.613

我认为问题在于 IE 不理解媒体查询。

试试这个[链接](http://www.webmonkey.com/2011/04/how-to-have-your-media-queries-and-eat-ie-too/)

# asp.net - 如何在 GridView 中排序

> ID：13401288
> 
> 赞同：0
> 
> 时间：2012-11-15T15:56:11.313
> 
> 标签：asp.net, sorting, gridview

这是我的GV。

```
<asp:GridView ID="Grid1" runat="server" AutoGenerateColumns="false"
            AllowPaging="True" OnPageIndexChanging="Grid1_PageIndexChanging">
            <Columns>
                <asp:BoundField DataField="One" HeaderText="One" />
                <asp:BoundField DataField="Two" HeaderText="Two" />
                <asp:BoundField DataField="Three" HeaderText="Three" />
            </Columns>
</asp:GridView> 
```

我正在使用存储过程填充 GV。

```
table = PublicClass.Sql_GetTable("usp_GetReportGridView", "NCIU");
Grid1.DataSource = table;
Grid1.DataBind(); 
```

如何使用列标题进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T03:59:22.993

首先，您需要启用 AllowSorting 属性为真。启用后，网格会在每列的标题中呈现 LinkBut​​ton 控件。单击按钮时，将引发网格的 SortCommand 事件。由您在代码中处理此事件。因为 DataGrid 总是按照它在数据源中出现的顺序显示数据，典型的逻辑是先对数据源进行排序，然后将数据重新绑定到网格中。看下面的代码：

```
//AllowSorting="True"
//OnSorting="GridView2_Sorting"
//SortExpression="name"

protected void GridView2_Sorting(object sender, GridViewSortEventArgs e)
{
  //to check whether to display in ascending order or descending order
  if (e.SortExpression.Trim() == this.SortField)
    this.SortDirection = (this.SortDirection == "D" ? "A" : "D");
  else
    this.SortDirection = "A";
  this.SortField = e.SortExpression;
  TempTable();
} 
```

# c# - DLL 可以启动 word 文件吗？

> ID：13401294
> 
> 赞同：0
> 
> 时间：2012-11-15T15:56:28.493
> 
> 标签：c#, dll

我有一个 DLL，它在计算后识别出需要打开的特定单词文件。我可以让DLL打开特定的word文件，或者返回调用DLL的特定程序的路径，让程序处理DLL文件的打开。

如果有一个 DLL 可以启动文件的可能解决方案，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:58:36.237

它是一个 DLL 没有任何区别。只要代码执行并有权访问该文件，您就可以打开它。

您将需要使用类似`Process.Start()`但使用 ShellExecute 选项的东西，以便它加载关联的程序（很可能是 Word）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T16:01:22.920

如果需要，您可以使用 DLL，这真的没关系。只要你有东西可以调用 DLL 中的代码，它就会像在 exe 中一样工作。

```
public static void OpenWord()
{
    Process.Start(@"C:\Worddoc.doc");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:10:18.400

我不确定我是否遗漏了什么，因为从表面上看，这似乎很简单。不管它是否是dll。在 msdn 网站上有一个[使用 Microsoft.Office.Interop.Word 的链接，](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/5db48b80-59ec-44e7-afdd-04c53f4526fc)它向您展示了如何做您所追求的。

我最后一次做这样的事情是使用 ShellExecute 但这似乎是“新”方式。

# python - 如何在定义的字符集python中加密所有可能的字符串？

> ID：13401296
> 
> 赞同：0
> 
> 时间：2012-11-15T15:56:53.777
> 
> 标签：python, hash, python-3.x

我试图在定义的字符集中加密所有可能的字符串，然后将它们与用户输入给出的哈希值进行比较。

这是我目前拥有的

```
import string
from itertools import product
import crypt

def decrypt():
    hash1 = input("Please enter the hash: ")
    salt = input("Please enter the salt: ")
    charSet = string.ascii_letters + string.digits
    for wordchars in product(charSet, repeat=2):
        hash2 = crypt.METHOD_CRYPT((wordchars), (salt))
        print (hash2) 
```

显然它还没有完成，但我在加密“wordchars”时遇到了麻烦

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:09:21.890

`crypt.METHOD_CRYPT`不可调用，因此您提供的回溯与您问题中的代码不对应。`crypt.METHOD_CRYPT`可以用作[`crypt.crypt()`function](http://docs.python.org/3/library/crypt.html)的第二个参数。

同样正如[@martineau](https://stackoverflow.com/a/13404223/4279)指出的那样，`wordchars`它是一个元组，但您需要一个字符串才能传递给`crypt.crypt()`函数。

从[文档](http://docs.python.org/3/library/crypt.html)：

> 由于一些 crypt(3) 扩展允许不同的值，在 salt 中具有不同的大小，因此建议在检查密码时使用完整的加密密码作为 salt。

要从给定加密形式的已定义字符集中查找纯文本：salt plus hash，您可以：

```
from crypt import crypt
from itertools import product
from string import ascii_letters, digits

def decrypt(crypted, charset=ascii_letters + digits):
    # find hash for all 4-char strings from the charset
    # and compare with the given hash
    for candidate in map(''.join, product(charset, repeat=4)):
        if crypted == crypt(candidate, crypted):
            return candidate 
```

### 例子

```
salt, hashed = 'qb', '1Y.qWr.DHs6'
print(decrypt(salt + hashed))
# -> e2e4
assert crypt('e2e4', 'qb') == (salt + hashed) 
```

断言行确保`crypt`使用单词`e2e4`和盐调用`qb`会产生盐`qb1Y.qWr.DHs6`在哪里`qb`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:51:06.723

嗯可能更好地使用bcrypt？ [https://github.com/fwenzel/python-bcrypt](https://github.com/fwenzel/python-bcrypt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:54:49.407

这是我完全不同的答案，基于 JF Sebastian 的[回答](https://stackoverflow.com/a/13409383/355230)和对我之前回答的评论。最重要的一点是它`crypt.METHOD_CRYPT`不是可调用的，即使文档有点混淆地调用[散列方法](http://docs.python.org/3/library/crypt.html#hashing-methods)，就好像它是模块或实例的方法函数一样。`crypt`它不是 - 只是将其视为模块支持的各种加密之一的 id 或名称。

所以你的代码的问题是双重的：一个是你试图`wordchars`用作一个字符串，而它实际上是一个由生成的元组`product()`，第二个是你试图调用 id `crypt.METHOD_CRYPT`。

我在回答这个问题时有点不利，因为我没有运行 Unix，没有安装 Python v3.3，也没有完全理解你想要用你的代码完成什么。鉴于所有这些警告，*我认为*从您的代码派生的类似以下内容至少应该运行：

```
import string
from itertools import product
import crypt

def decrypt():
    hash1 = input("Please enter the hash: ")
    salt = input("Please enter the salt: ")
    charSet = string.ascii_letters + string.digits
    for wordchars in product(charSet, repeat=2):
        hash2 = crypt.crypt(''.join(wordchars), salt=salt)  # or salt=crypt.METHOD_CRYPT
        print(hash2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T17:18:35.157

下面是一个简单的程序，可以满足您的要求：

```
def gen_word(charset, L):
    if L == 1: 
        for char in charset:
            yield char
        raise StopIteration
    for char in charset:
        for word in gen_word(charset, L - 1):
            yield char + word

def encrypt(word):
    '''Your encrypt function, replace with what you wish'''
    return word[::-1]

charset = ['1', '2', '3']

user_word = '12'
user_hash = encrypt(user_word)
max_length = 3

for length in range(1, max_length):
    for word in gen_word(charset, length):
        if encrypt(word) == user_hash:
            print 'Word found: %s' % word 
```

基本上，它使用 python 生成器从固定长度的字符集中生成单词。您可以用您想要的任何内容替换 encrypt 函数（在示例中是用作哈希的字符串反转）。

请注意，使用实际的现代散列方法，解密普通密码需要很长时间，所以我认为你不能真正使用它。

# c# - 使用实体框架创建新记录

> ID：13401297
> 
> 赞同：5
> 
> 时间：2012-11-15T15:56:53.843
> 
> 标签：c#, sql-server, entity-framework

我有一个表，其主键 id 是一个标识列。我认为当创建新记录时，id 将增加 1。

但是我在调​​试时发现它是0。为什么？

必要的代码：

```
 public DbSet<testDetails> testDetailRecords { get; set; }
  testDetails test = testContext.testDetailRecords.Create();
  // test.id is 0 when hover over it
  public class testDetails : IEntityWithRelationships
  {
      [Key]
       [Required]
       [Display(Name = "Primary Key", Description = "Primary Key")]
       [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
       public long id { get; set; } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:59:09.987

直到您使用`SaveChanges()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T16:05:32.917

它是 0，因为它尚未创建。

```
 TestContext context = new TestContext();

        var increment = context.IncrementTest.Create();
        increment.name = "testbyme";

        context.IncrementTest.Add(increment);

        context.SaveChanges(); 
```

这对我来说没有任何异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:59:15.157

> 我认为当创建新记录时，id 将增加 1。

谁这样做？数据库管理系统。唱片目前在哪里？仅在您的应用程序中。

调用`testContext.SaveChanges()`在数据库中插入记录，之后实体的`id`属性将被更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T02:56:09.823

SaveChanges() 返回受影响的行数。如果它返回 0，则没有保存任何内容。要检查项目是否已保存：

```
int rows affected = 0;
if(rows_affected = context.SaveChanges() > 0)
   System.Writeline("Saved!");
else
   System.Writeline("Nothing saved! Check error using try catch"); 
```

# iphone - convertRect:toView: 在 iPad Retina 和 iPad 2 上的工作方式不同

> ID：13401299
> 
> 赞同：3
> 
> 时间：2012-11-15T15:57:00.913
> 
> 标签：iphone, ios, ipad, uiview, retina-display

我有这段代码在 iPad2 上完美运行，但在 Retina iPad 上缩放错误。

我在两台 iPad 上都执行了该应用程序，但行为完全不同。在 Retina iPad 上，图像会回到原始位置，并且不会发生转换。

该代码采用一组视图，将它们添加到时间视图，调整时间视图的大小，然后将这些视图添加回来，这样我就可以同时调整所有视图的大小。

```
- (IBAction)scaleParts:(UIPinchGestureRecognizer *)sender {
if (sender.state == UIGestureRecognizerStateBegan) {
    self.tempCanvasView = [[UIView alloc] initWithFrame:self.canvas.bounds];
    self.tempCanvasView.backgroundColor = [UIColor redColor];
    for (UIView *view in [self.canvas subviews]) {
        CGRect currentFrame = view.bounds;
        CGRect newFrame = [view convertRect:currentFrame toView:self.tempCanvasView];
        view.bounds = newFrame;
        [self.tempCanvasView addSubview:view];
    }
    [self.canvas addSubview:self.tempCanvasView];
} else if (sender.state == UIGestureRecognizerStateChanged) {
    self.tempCanvasView.transform = CGAffineTransformScale(self.tempCanvasView.transform, sender.scale, sender.scale);
    sender.scale = 1.0;
} else if (sender.state == UIGestureRecognizerStateEnded) {
    for (UIView *view in [self.tempCanvasView subviews]) {
        CGRect currentFrame = view.bounds;
        CGRect newFrame = [view convertRect:currentFrame toView:self.canvas];
        view.frame = newFrame;
        [self.canvas addSubview:view];
    }
    [self.tempCanvasView removeFromSuperview];
    self.tempCanvasView = nil;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:03:44.160

也许您需要检测应用程序正在使用哪种屏幕类型（iPad 为 scale=1，iPadRetina 为 2）。

```
CGFloat scale = [[UIScreen mainScreen] scale]; 
```

在那之后..

```
 if (scale==1) {
        //code from above
    } else {
        //code from above with small modification
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T12:36:56.097

这是一个正确的方法：

迅速：

```
extension UIView {

    func convertRectCorrectly(rect: CGRect, toView view: UIView) -> CGRect {
        if UIScreen.mainScreen().scale == 1 {
            return self.convertRect(rect, toView: view)
        }
        else if self == view {
            return rect
        }
        else {
            var rectInParent = self.convertRect(rect, toView: self.superview)
            rectInParent.origin.x /= UIScreen.mainScreen().scale
            rectInParent.origin.y /= UIScreen.mainScreen().scale
            let superViewRect = self.superview!.convertRectCorrectly(self.superview!.frame, toView: view)
            rectInParent.origin.x += superViewRect.origin.x
            rectInParent.origin.y += superViewRect.origin.y
            return rectInParent
        }
    }
} 
```

# java - JAAS 真的需要进行身份验证吗？

> ID：13401304
> 
> 赞同：2
> 
> 时间：2012-11-15T15:57:03.713
> 
> 标签：java, security, jakarta-ee, authentication, jaas

如果[这](https://stackoverflow.com/a/2207147/1341526)是在 Java EE 6 中验证用户的最佳方法之一。

在身份验证/用户登录中使用 JAAS 是否有充分的理由？谈包：

```
javax.security.auth 
```

JAAS 应用程序到一个简单的 web 应用程序并不是微不足道的，所以这就是我要问的原因。这是一个[例子。](https://github.com/agoncal/agoncal-application-petstore-ee6/tree/master/src/main/java/org/agoncal/application/petstore/security)

无论如何，它可能需要授权。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:28:06.530

如果您打算依靠容器通过使用`@RolesAllowed`注释来强制授权，那么答案是肯定的，您将需要 JAAS。

至于它是否复杂，这实际上取决于`LoginModule`您将使用的实现。容器确实带有`LoginModule`开箱即用的实现，尤其是针对身份存储（如文件、LDAP 服务器或数据库）进行身份验证。如果这就是您所需要的，您可以使用它们而不是连接您自己的实现。

如果你真的想写出`LoginModule`Antonio Goncalves 所做的那样，你需要了解 a`LoginModule`和 JAAS 的作用。他的模块`CustomerService`在身份验证过程中使用内置到他的应用程序中。该模块只是通过 CDI 查找`CustomerService`bean`BeanManager`并将所有身份验证请求委托给该`findCustomer(username, password)`方法。`LoginException`如果未找到提供的凭据的客户，则抛出A。

# java - 用于编译代码的简单 ant 脚本找不到库

> ID：13401305
> 
> 赞同：1
> 
> 时间：2012-11-15T15:57:11.830
> 
> 标签：java, ant, war

我的项目结构是：

```
├── WebContent
│   ├── META-INF
│   ├── WEB-INF
│   │   ├── lib
│   │   └── views
│   ├── css
│   ├── img
├── src
│   └── com
│       └── mycode
│           └── morecode 
```

我正在尝试编译代码，然后有一个 WAR：

以下是我用于编译的 ant 脚本任务，但是，它失败并抱怨最基本的事情，例如`error: package javax.servlet.http does not exist`但是，代码在我的 IDE 中编译得很好。所以，我怀疑我的任务没有在 ant 中配置属性。

```
<path id="compile.classpath">
    <fileset dir="WebContent/WEB-INF/lib">
        <include name="*.jar"/>
    </fileset>
</path>

<target name="init">
    <mkdir dir="build/classes"/>
    <mkdir dir="dist" />
</target>

<target name="compile" depends="init" >
    <javac destdir="build/classes" debug="true" srcdir="src">
        <classpath refid="compile.classpath"/>
    </javac>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:07:08.077

大概您的 .xml 文件中没有 servlet API JAR `WEB-INF/lib`，因为这些类通常由 servlet 容器提供。您的 IDE 将从其他地方提供它们，但是对于您的 Ant 构建，您需要获取[相关 JAR](http://search.maven.org/#artifactdetails%7Cjavax.servlet%7Cjavax.servlet-api%7C3.0.1%7Cjar)的副本，将其放在您的项目中的某个位置`build/lib`（即不在.`WEB-INF``compile.classpath`

# ios - Mixpanel iOS SDK 和 ARC

> ID：13401306
> 
> 赞同：0
> 
> 时间：2012-11-15T15:57:15.077
> 
> 标签：ios, automatic-ref-counting, mixpanel

我正在尝试将 Mixpanel SDK 添加到使用 ARC 的 iOS 应用程序中。添加 SDK 后，我得到一些与 ARC 使用相关的编译错误。**如何将 Mixpanel 集成到使用 ARC 的项目中？**

在我的个人项目中，我总是手动管理内存。也许有一些方法可以告诉编译器这段代码使用 ARC 而这段代码没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:04:59.927

在导航器中单击您的项目名称。从右侧窗口的列表标题中选择“构建阶段”。您应该会看到一个名为“编译源”的栏；展开它，您应该会看到项目中的源文件列表和标有“编译器标志”的列。对于 Mixpanel SDK 中的每个文件，双击此列并添加以下行：

```
-fno-objc-arc 
```

这将指示编译器在编译这些文件时不使用自动引用计数。如果你需要做相反的事情（在非 ARC 项目中编译 ARC 代码）做同样的事情，但添加这一行：

```
-fobj-arc 
```

我相信这可能是[这个问题的重复。](https://stackoverflow.com/questions/13392521/how-to-force-xcode-to-use-arc-on-a-specific-file)

# ejb-3.0 - weblogic ejb3 两阶段提交

> ID：13401308
> 
> 赞同：0
> 
> 时间：2012-11-15T15:57:21.983
> 
> 标签：ejb-3.0, weblogic12c, 2phase-commit

任何人都可以用 ejb3 教程指出我在 weblogic 上的一个很好的两阶段提交吗？

我环顾四周，发现只有[一个](http://docs.oracle.com/cd/B14099_19/web.1012/b14012/jta.htm#i1084720)，但它不使用 XA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:29:16.630

[这](http://entjavastuff.blogspot.pt/2011/02/ejb-transaction-management-going-deeper.html)是一个很好的。weblogic 12c 数据源为我们提供了 XA 驱动程序，因此，所有内容大部分都在 WL 控制台上配置

# java - taglib json 从数组创建对象

> ID：13401309
> 
> 赞同：1
> 
> 时间：2012-11-15T15:57:22.750
> 
> 标签：java, json, jsp, taglib

我在我的 jsp 项目中使用 json taglib。目前我正在使用以下代码构建我的 json 对象：

```
<json:object prettyPrint="true">
    <json:array name="categories" var="cat" items="${categories}">
        <json:object>
            <json:property name="id" value="${cat.getId()}" />
            <json:array name="languages" var="lang" items="${cat.getCategorieslanguageses()}">
                <json:object>
                    <json:property name="${lang.getLanguages().getShortname()}" value="${lang.getValue()}" />
                </json:object>
            </json:array>
        </json:object>
    </json:array>
</json:object> 
```

getCategorieslanguageses() 返回一个语言数组。此代码提供以下输出：

```
{"categories": [
  {
    "id": 3,
    "languages": [
      {"nl": "Vlees"},
      {"eng": "Meat"}
    ]
  },
  {
    "id": 2,
    "languages": [
      {"eng": "Fish"},
      {"nl": "Vis"}
    ]
  }
]} 
```

所以，这段代码很好用，但我更喜欢的输出是：

```
{
    "categories": [
        {
            "id": 2,
            "languages": [
                {
                    "nl": "Vis",
                    "eng": "Fish"
                }
            ]
        },
        {
            "id": 3,
            "languages": [
                {
                    "eng": "Meat",
                    "nl": "Vlees"
                }
            ]
        }
    ]
} 
```

谁能帮我用 taglib json 创建这个输出？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:05:19.113

这样做的方法很少。

1.  设置`prettyPrint="true"`在每个`json:object`或`json:array`。

2.  通过将页面、请求、会话或应用程序属性`atg.taglib.json.prettyPrint`设置为 true 或 false。

3.  通过在您的网络应用程序的 web.xml 文件中设置上下文参数。

[http://json-taglib.sourceforge.net/tutorial.html](http://json-taglib.sourceforge.net/tutorial.html)

**编辑**：起初我以为你是在格式化输出之后。

```
"languages": [
      {"eng": "Fish"},
      {"nl": "Vis"}
    ] 
```

对此的解释是，你有一个名为 的数组`languages`，并且在这个数组中包含两个对象，第一个对象有一个名为 的属性`eng`，其值为`Fish`。第二个对象有一个名为的属性`n1`，其值为`Fish`。

```
"languages": [
                {
                    "eng": "Meat",
                    "nl": "Vlees"
                }
            ] 
```

对此的解释是，您有一个名为 的数组`languages`，并且该数组中仅包含一个对象。该对象有两个属性，一个以`eng`value命名，另一个以value`Meat`命名。`n1``Vlees`

只是好奇，不应该

```
<json:property name="${lang.getLanguages().getShortname()}" value="${lang.getValue()}" /> 
```

是

```
<json:property name="${lang.getLanguages().getShortname()}" value="${lang.getLanguages().getValue()}" /> 
```

# html - 如何防止 HTML 元素被 CSS 规则定位？

> ID：13401313
> 
> 赞同：3
> 
> 时间：2012-11-15T15:57:38.863
> 
> 标签：html, css, inheritance, css-selectors, css-specificity

这是我试图解决的一个困难。我正在客户页面内开发滚动界面。基本上，我无法更改文档类型、周围元素以及已经在客户端页面中的样式表或脚本，我必须让我的小代码块“适合”其中。这对于 Web 开发人员来说很常见。现在棘手的部分是我的块中的一些 img 元素实际上被继承的客户端样式表中的 CSS 规则定位（当然，我不能删除或更改）。解释为什么在这种情况下我实际上不能自己使用更具体的 CSS 规则来弥补这一点太长了，但这是事实。所以我的问题是：除了创建另一个规则或删除规则之外，有没有办法防止 HTML 元素成为 CSS 规则的目标？困难在于像这样的规则

```
.containter1 .containter3 { ... } 
```

将针对内部的一个元素：

```
<div class="container1">
   <div class="containter2">
      <div class="containter3">Element
      ... 
```

页面内的元素不会为 CSS 规则制造“墙”，这些规则会“跳过”容器以到达目标元素。所以像这样的规则

```
img { ... } 
```

将针对任何 img 标签。我知道弥补这一点的唯一方法是创建一个更具体的 CSS 规则，针对要保护的精确 img。但我不能在这里这样做。有没有办法在不创建 CSS 规则的情况下仅通过添加 HTML 来获得相同的结果？

/ *** 编辑澄清***** /

我知道 CSS 规则、特异性、继承等。我的问题更务实。考虑这个例子来澄清问题：假设您有一个您无法触摸的客户样式表，它定义了以下一般规则：

```
img { display:none; } 
```

问题是您不能设置相应的通用规则来做相反的事情，例如：

```
img { display:not-none; } 
```

因为没有对立面这样的事情。的反义词`"none"`可以是`"inline"`, `"block"`, `"inline-block"`, 等等。

所以基本上，这意味着第一个通用规则会强制您为页面中`display`的每一个明确定义属性`img`。这很糟糕。所以我试图找到一个破解方法来解决这样的情况（我的实际问题比这更糟糕，相信我，但这个例子更清晰，更容易解释）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:27:31.073

如果您说要在不更改任何代码的情况下阻止定位，那么不，这显然是不可能的。

内联样式总是覆盖样式表规则（除非它们使用`!important`标签，否则您也需要使用它）。

您应该能够使用您最喜欢的 CSS 重置中的语法重置您需要的任何元素。以下是一些选项：

[http://www.cssreset.com/](http://www.cssreset.com/)

所以，像 -

```
<div style="border:0 !important;padding:0 !important;margin:0 !important;height:auto;"></div> 
```

是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:30:54.303

元素的默认`display`值为。如果要重置所有图像的显示值，为什么不使用它呢？`img``inline-block`

如果您有多种不同类型的元素被设置为奇怪的值，那么问题可能会更复杂一些，因为您需要考虑将哪些元素设置为什么显示类型。但是所有的 HTML 元素都有明确定义的默认显示类型，因此将它们全部重置应该不会太难。

```
img {display: inline-block;}
span, a, etc {display:inline;}
div, etc {display:block;}
... etc ... 
```

如果归根结底，您可以只使用可用的[重置 CSS 脚本](http://meyerweb.com/eric/tools/css/reset/)之一，将所有内容设置回正确的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:26:53.333

您可以更改特定元素的 CSS 的唯一方法是修改现有样式或创建更具体的新样式并将重载其他样式。

> 我必须让我的小代码块“适合”其中。

一旦你做了一些代码块，你可以像这样将样式标签放在那个 HTML 代码块中，例如：

```
<div id="block_of_code_available_for_modification">
   <style type="text/css">
       //css code which will fix styles of your content without influencing other elements on a page.
   </style>
</div> 
```

或者，如果你只有几个元素需要修改样式，你可以使用`style`HTML 元素的属性（一旦你可以设置修改 HTML，你总是可以添加类似下面的东西......好吧，与添加样式标签相同） . style 属性中的 css 属性的优先级最高。除非`!important`在某些先前的样式中没有：

```
<img style="any css properties you need" src="..." /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T11:58:53.287

不，您无法阻止其他规则应用于特定元素。您必须为该 html 元素重新定义所有这些规则，以便它们将覆盖所有其他规则。

# jquery - 表格排序器排序编号，其中包含逗号

> ID：13401316
> 
> 赞同：3
> 
> 时间：2012-11-15T15:57:43.590
> 
> 标签：jquery, tablesorter

我在使用带有 a 的货币的 tablesorter 插件时遇到问题，例如：9,789,000.00 等。

有谁知道解决这个问题？

请不要向我推荐其他图书馆。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T15:59:26.710

Tablesorter 允许您为这样的事情定义[“自定义解析器” 。](http://tablesorter.com/docs/example-parsers.html)

```
// add parser through the tablesorter addParser method 
$.tablesorter.addParser({ 
    // set a unique id 
    id: 'thousands',
    is: function(s) { 
        // return false so this parser is not auto detected 
        return false; 
    }, 
    format: function(s) {
        // format your data for normalization 
        return s.replace('$','').replace(/,/g,'');
    }, 
    // set type, either numeric or text 
    type: 'numeric' 
}); 

$(function() {
    $("table").tablesorter({
        headers: {
            6: {//zero-based column index
                sorter:'thousands'
            }
        }
    });
}); 
```

您可能需要调整格式功能。

也尝试在页面上搜索here，该主题已被多次讨论，例如[here](https://stackoverflow.com/questions/3403726/jquery-tablesorter-plugin-comma-decimals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T02:10:41.600

有趣的问题，发现我的所有列都在 id:text 下考虑，所以我修改了这样的格式：

```
format: function(s) {
    s=s.replace(new RegExp(/[^0-9A-Za-z ]/g),"");
    return $.trim(s.toLowerCase());
} 
```

替换了除 0-9、az、AZ 以及空格字符之外的所有内容。

我花了 5 个小时把头撞在墙上（从字面上看）来解决这个问题。

无论如何都要接受@Jacta 的回答，因为它是起点，在头撞之前:)

# javascript - 使用javascript将url参数传递给隐藏字段

> ID：13401321
> 
> 赞同：2
> 
> 时间：2012-11-15T15:57:56.760
> 
> 标签：javascript, url, parameters, field, hidden

我需要以下代码的帮助。

我需要做的是将 URL 参数传递给这两个隐藏字段。 [http://www.yoursite.com/index.php?fieldOne=Work&fieldTwo=Play](http://www.yoursite.com/index.php?fieldOne=Work&fieldTwo=Play)

它似乎不起作用。我也无法将 id 添加到表单字段。

```
<input type="hidden" name="fieldOne">
    <input type="hidden" name="fieldTwo">
    <script>
    function FillForm() {
        var FormName = "myformname";
        var qLoc = location.href.indexOf('?');
    if(qLoc < 0) { return; }
    var q = location.href.substr(qLoc + 1);
    var list = q.split('&');
    for(var i = 0; i < list.length; i++) {
        var kv = list[i].split('=');
        if(! eval('document.'+FormName+'.'+kv[0])) { continue; }
        kv[1] = unescape(kv[1]);
        if(kv[1].indexOf('"') > -1) {
            var re = /"/g;
            kv[1] = kv[1].replace(re,'\\"');
        }
      eval('document.'+FormName+'.'+kv[0]+'.value="'+kv[1]+'"');
      }
     }
    FillForm();
    </script>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:05:44.027

**您可以简化代码：**

```
var formName = "myformname",
    query = location.href.split("?").pop().split("&"),
    i = 0,
    len = query.length,
    split, elem;

for ( ; i < len; i++ ) {
    split = query.split("=");
    elem = document[formName][split[0]];

    if ( elem ) {
        elem.value = split[1].replace(/"/g, '\\"');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:24:27.303

NULL 有一种简化（尽管您的代码中有一个关于查询迭代的小错误）。这是 NULL 的简化更正，也是我对您为什么没有得到预期结果的猜测：

```
<form name="myformname">
<input type="hidden" name="fieldOne">
<input type="hidden" name="fieldTwo">
</form>
<script type="text/javascript">

  var formName = "myformname",
  query = location.href.split("?").pop().split("&"),
  i = 0,
  len = query.length,
  split, elem;

  for ( ; i < len; i++ ) {
      split = query[i].split("=");

      //alert(split);

      elem = document[formName][split[0]];

      if ( elem ) {
          elem.value = split[1].replace(/"/g, '\\"');
      }
  }
</script> 
```

1) 确保您使用的是`form`带有 id 的标签。我看不到你的 HTML。

2) 确保您没有看到新数据出现在 hidden 中`<input>`？我建议使用调试器并检查实时 DOM 树而不是源代码。一些调试器不会实时更新源代码。

编辑：

根据来自提问方的新信息，这是另一个修复方法：

```
<script type="text/javascript">

$(document).ready(function(){

    var formName = "dSOfferAllE10Test-1349977611926";

    var query = location.href.split("?").pop().split("&");
    var len = query.length;
    var split, elem;

    for (var i = 0; i < len; i++ ) {

        split = query[i].split("=");

        $('form[name="'+formName+'"]').find('input[name="'+split[0]+'"]').each(function(){

          $(this).val(split[1].replace(/"/g, '\\"'));

        });
    }
});

</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这使用 jQuery，因此请确保在您的`<head>`（或至少在顶部附近，`<body>`如果您无权访问. ）中附加对 jQuery 的引用`<head>`。最好从 Google 托管的版本中获取片段：[https：/ /developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

# mysql - MySQL：多个 SELECT 和 OUTER JOIN

> ID：13401325
> 
> 赞同：1
> 
> 时间：2012-11-15T15:58:03.810
> 
> 标签：mysql

我对 MySQL 很陌生，在安排一些表格时遇到了麻烦，我似乎在任何地方都找不到解决方案......

为了简化，假设我有两种类型的桌子，a 和 b，第一种是 3 块，第二种是 2 块。所以我想在第一列与 b1、b2 合并 a1、a2、a3。

要加入 a1 和 b1，我会这样做：

```
SELECT a.column1, a.column2
FROM table_a1 AS a
LEFT OUTER JOIN table_b1 AS b ON (a.column1=b.column1) 
```

现在我如何从 a1, a2, a3 中选择并加入 b1, b2 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:02:42.487

看起来设计可能需要一些工作。

但现在，你可以这样做：

```
SELECT 
  a.column1, a.column2
FROM 
  (SELECT * FROM table_a1
   UNION ALL SELECT * FROM table_a2
   UNION ALL SELECT * FROM table_a3) AS a 
LEFT OUTER JOIN 
  (SELECT * FROM table_b1
   UNION ALL SELECT * FROM table_b2) AS b
ON (a.column1 = b.column1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:04:08.413

您似乎想要一些简单的东西：

```
SELECT * FROM table_a1 a
LEFT JOIN table_b1 b ON b.column1 = a.column1 
```

但是 Golez 有一个完全不同的答案，这让我觉得我读错了这个问题 =/

# php - Magento 在 Ajax 中调用 collectTotals() 后计算总计两次

> ID：13401326
> 
> 赞同：0
> 
> 时间：2012-11-15T15:58:04.870
> 
> 标签：php, magento

我正在尝试在 Magento 结帐中应用折扣后的运费

我使用的是按价格计算的 UPS 免费送货，所以如果您在折扣后的总额低于免费送货的最低金额，它将不会为您提供免费送货服务。

Magento 在折扣前计算免费送货，因此我在本地 ups.php 文件中计算了折扣后的正确金额并将其应用于代码：

```
$coupon_code=Mage::getSingleton('checkout/cart')->getQuote()->getCouponCode();
         Mage::getSingleton("checkout/session")->setData("coupon_code",$coupon_code);
         Mage::getSingleton('checkout/session')->getQuote()->setCouponCode($coupon_code)->setTotalsCollectedFlag(false)->collectTotals();
         //Mage::getSingleton('checkout/cart')->getQuote()->setCouponCode($coupon_code)->collectTotals()->save();
         $totals =Mage::getSingleton('checkout/session')->getQuote()->getTotals(); //Total object
         $subtotal = $totals["subtotal"]->getValue(); //Subtotal value

        if(isset($totals['discount']) && $totals['discount']->getValue()) {
            $discount = $totals['discount']->getValue(); //Discount value if applied
        } else {
            $discount = '';
        }       
    $r->setValue($request->getPackageValueWithDiscount( ) - $giftCardPrice);
    if($discount!='')  $r->setValueWithDiscount($subtotal-abs($discount));  
    else $r->setValueWithDiscount($request->getPackageValueWithDiscount( )- $giftCardPrice); 
```

这解决了我的问题，因为在每次 Ajax 调用中，Magento 都会计算购物车的总数两次

我能做些什么？

# php - link_to 和传递变量

> ID：13401327
> 
> 赞同：1
> 
> 时间：2012-11-15T15:58:07.237
> 
> 标签：php, symfony-1.4

我有一个页面：`my-account/my-templates/view/1`- 它只是使用`id`字段`1`来显示项目

我想要做的是创建一个复制操作，它只是获取这个项目中的所有值并创建一个新项目

我有一个`link_to()`包含以下内容：

```
<?php echo link_to('Copy', '@copy_template', array('id' => $template->getId())); ?> 
```

我正在传递模板的 id。

我可以在复制操作中访问此 ID 吗？

编辑：

行动：

```
public function executeViewTemplate(sfWebRequest $request)
{
  $this->template = Doctrine_Core::getTable('UserTemplate')->getUserTemplate($request->getParameter('id'));
}

public function executeTemplateCopy(sfWebRequest $request)
{
   $this->id = $request->getParameter('id');
   // get the passed template id 
} 
```

模板：

viewTemplateSuccess.php

```
<?php echo link_to('Copy', '@copy_template', array('id' => $sf_request->getParameter('id'), 'class'=>'button green')); ?> 
```

模板复制成功.php

```
<?php echo "ID". $id;?> --> doesn't return the passed id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:00:54.803

在操作中，您可以使用以下方法检索参数：

```
$id = $request->getParameter('id'); 
```

例如，如果您有此操作：

```
public function executeCopyTemplate(sfWebRequest $request)
{
  $id = $request->getParameter('id');
} 
```

并从模板：

```
<?php $id = $sf_request->getParameter('id') ?> 
```

在你的情况下：

```
<?php echo link_to('Copy', '@copy_template?id='.$sf_request->getParameter('id')); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:13:41.353

link_to 函数末尾的数组会更改 HTML 属性，例如 class 和 id。它不会正常传递 url 参数。这将起作用：

```
<?php echo link_to('Copy', '@copy_template?id='. $template->getId(), array()); ?> 
```

# azure - Azure 父/子差异磁盘

> ID：13401332
> 
> 赞同：1
> 
> 时间：2012-11-15T15:58:20.080
> 
> 标签：azure

我正在测试 Azure IaaS 并遇到了一个非常基本的问题。我有一个父子 VHD，我已使用 csupload 作为页面 blob 上传，并且门户中显示了图像和磁盘。然后我尝试将父母与孩子联系起来：

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10\bin>csupload set-parent -child "visualstudio60-000001.vhd" -parent "visualstudio60.vhd"
Windows(R) Azure(TM) Upload Tool version 1.8.0.0
for Microsoft(R) .NET Framework 3.5
Copyright (c) Microsoft Corporation. All rights reserved.

Using the saved connection string...
The specified resource does not exist 
```

如何获得查看磁盘的工具？我尝试了很多不同的变体，但无法完成这个简单的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:27:43.670

如果您使用的是 IaaS VM 并使用“Csupload Set-Parent”，那么您使用的命令错误。如果您查看 set-parent 命令的 csuplaod 帮助，您将看到该命令仅适用于仍然存在的旧 VM 角色功能，如下所示：

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10>csupload get-help
 set-parent
Windows(R) Azure(TM) Upload Tool version 1.8.0.0
for Microsoft(R) .NET Framework 3.5
Copyright (c) Microsoft Corporation. All rights reserved.

NAME
    Set-Parent

CATEGORY
    VmRole

SYNOPSIS
    Set the parent of an existing uploaded and commited VM image.

SYNTAX
    Set-Parent -Child <string> [-Connection SubscriptionId={subscriptionId};Cert
ificateThumbprint={subscriptionManagementCertificate};ServiceManagementEndpoint=
{azureManagementEndpoint}] -Parent <string> 
```

在 Windows Azure 虚拟机 (IaaS) 中，您将上传归类为操作系统磁盘和数据磁盘的多个磁盘。正确设置操作系统/数据 VHD 并使用 PowerShell 命令或直接从门户上载后，您可以创建虚拟机并将数据磁盘添加到其中。以下链接应该可以帮助您：

*   [创建和上传包含 Windows Server 操作系统的虚拟硬盘](https://www.windowsazure.com/en-us/manage/windows/common-tasks/upload-a-vhd/)
*   [如何将数据磁盘附加到虚拟机](https://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/)

# javascript - document.write(xmlDoc..) 从 XML 文件中获取文本

> ID：13401335
> 
> 赞同：1
> 
> 时间：2012-11-15T15:58:25.777
> 
> 标签：javascript, xml, getelementsbytagname

我正在尝试从 XML 文档中读取特定行。它在直接“调用”它们时有效，但我不知道如何使用底层线路。

**这是 XML 文件：**

[http://rapidimg.org/server/files/50a55cca752a9ciUnOM.png](http://rapidimg.org/server/files/50a55cca752a9ciUnOM.png)

**加载 XML：**

```
// load xml file
if (window.XMLHttpRequest) 
{
    xhttp = new XMLHttpRequest();
} 
else 
{    
    // IE 5/6
    xhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xhttp.open("GET", "vragen.xml", false);
xhttp.send();
xmlDoc = xhttp.responseXML; 
```

**现在我该如何做到，以便在 for 循环中只显示答案 A？我得到了 for 循环，但我该如何继续？**

```
for(i=0; i < totalQuestions; i++)
{
    document.write("<br />");
    document.write((i + 1) + ") " + 
                  xmlDoc.getElementsByTagName("vragen")[i].childNodes[1].textContent +
                 "<br />");

    document.write(xmlDoc.getElementsByTagName("vragen")[i].childNodes[2].childNodex[1].textContent);
        //It has to read: vragen/antwoorden/a
} 
```

无论我遇到什么问题，我都希望它显示第一个答案。

# git - Git Hub 工作流程

> ID：13401340
> 
> 赞同：0
> 
> 时间：2012-11-15T15:58:42.357
> 
> 标签：git, workflow

在我的工作中，我们正在开发一个新的工作流程，我担心从开发分支合并回每个人的分支。如果每个人在批准的代码合并到开发后继续合并到他们各自的分支中，会不会引起任何问题？基于 git 如何合并。

```
 (Master)
                  ^
                  |
                (UAT)
                  ^
                  |
(Person C)---->(Develop)<----(Person A)

           <--    ^ |    ---->
                  | V
               (Person B) 
```

在进行开发更改后，每个人都会合并。所有存储库都是远程的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:14:42.397

不，将公共代码分支合并到单独的分支中是可以的并且很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:20:30.823

事实上，这很常见。每个开发人员都在自己的分支上工作，经常将“开发”分支合并到自己的分支中。

一旦他准备好一个功能，它将被提供给测试人员、审阅者等。一旦获得批准，它将被合并到“开发”分支中。

一旦这一步完成，“开发”分支就会有新的提交，其他开发人员将再次获取并合并到他们的分支中，从而流程循环！

# wordpress - wordpress 变量 if 语句

> ID：13401351
> 
> 赞同：0
> 
> 时间：2012-11-15T15:59:19.917
> 
> 标签：wordpress, variables

我在为类定义 wordpress 变量时遇到问题。这是我的代码：我为带有 anme 类的帖子创建了一个自定义字段。在这里，我想检索课程。如果自定义字段为空，则默认应将类设置为“col1”

```
$masonry_col_class = get_post_meta($post->ID, 'class', true);
if (!empty($masonry_col_class)){ $masonry_col_class='col1'; }; 
```

这是css的输出：

```
<ul class="<?php echo $masonry_col_class ?>"> 
```

if (!empty...) 似乎不起作用。

如果有任何帮助，我将不胜感激。-n-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:03:40.080

您实际上已经写了：如果我刚刚定义的变量不为空，则将其设置为“col1”。您应该完全相反：如果变量为空，如下所示：

```
$masonry_col_class = get_post_meta($post->ID, 'class', true);
if (empty($masonry_col_class)){ $masonry_col_class='col1'; }; 
```

（我猜你的想法是：要么类是在自定义字段中定义的，我们在这里有它，要么我使用通用的“col1”类......对吗？

# javascript - 需要更好的 Node.js http.get 请求错误处理

> ID：13401354
> 
> 赞同：5
> 
> 时间：2012-11-15T15:59:26.143
> 
> 标签：javascript, node.js

我使用以下`http.get()`调用来调用本地端点：

```
http.get({
    host: 'localhost',
    port: 80,
    path: '/service/info?id=' + id
}, function(response) {
            console.log(response);
    response.setEncoding('utf8');
    var data = "";

    response.on('data', function(chunk) {
        data += chunk;
    });

    response.on('end', function() {
        if(data.length > 0) {
            try {
                var data_object = JSON.parse(data);
            } catch(e) {
                return;
            }
        }
    });
}).on("error", function (){console.log("GET request error")}); 
```

但是，如果我发送一个格式错误的请求，这将触发 HTTP 400，请求综合不正确等，即使`response.statusCode`in`function(response)`是 400，它最终会导致`catch() response.on('end', function() {}`而不是在 上发出错误事件`http.get()`，我想知道为什么会这样以及如何将 HTTP 400 响应作为 node.js 上的错误处理。

如果它到达`catch(e)`，它会等待很长时间，直到它向客户端响应任何内容，这也很奇怪。我希望服务器尽快响应客户端达到 400。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-24T10:58:25.203

详细说明 jeremy 的答案，这是一个检查适用于我的状态代码的示例：

```
 http.get(url, function (res) {
    if (res.statusCode != 200) {
      console.log("non-200 response status code:", res.statusCode);
      console.log("for url:", url);
      return;
    }
    // do something great :-)

  }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T18:22:04.463

response.statusCode 包含状态码，你可以在 http.get(...,cb()) 中得到它，或者你可以设置一个监听器

```
    request.on('response', function (response) {}); 

```

可以获取状态码。然后，如果您想取消 GET，则可以销毁该请求，或者根据需要处理它。

# java - Java Arraylist 搜索特定字符串，如果找到则打印

> ID：13401363
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:59:53.860
> 
> 标签：java, string, search, printing, arraylist

这个 java 作业有问题，我将 Olympians 输入到数组列表中：姓名、金牌、银牌、铜牌。如果找到了所搜索的奥运选手的名字，则打印出他获得的名字和奖牌，否则打印一条错误消息。这是迄今为止输入姓名和奖牌的代码。

```
 public class Analyser {

     private ArrayList <Olympian> olympians;

        public Analyser() {
            olympians = new ArrayList<Olympian>();    
        } 

        public void addOlympian (String name, int gold, int silver, int bronze) {
            olympians.add(new Olympian(name, gold, silver, bronze));       
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:14:51.457

在就代码本身寻求帮助之前，您需要弄清楚一些事情：

*   `searchOlympian()`你的函数应该采用什么参数。
*   给定名称，您将如何在 中找到所需`Olympian`的内容。`ArrayList`
*   您将如何确定是否`Olympian`不在您的列表中。

一些提示：

*   `String.equals(String otherString)`如果字符串相等，将返回 true。
*   `for (Olympian olympian : olympians)`将帮助您完成每个`Olympian`.
*   如果您通过上述循环而没有找到`Olympian`，则`Olympian`不在列表中。

# java - 自动设置反向引用

> ID：13401364
> 
> 赞同：3
> 
> 时间：2012-11-15T15:59:54.657
> 
> 标签：java, spring, hibernate, jpa, aop

我正在使用**Spring**、**JPA**、**Hibernate**开发 Java EE 应用程序。

在我们的业务模型中，我们有几个反向引用，OneToMany 或 OneToOne。我们需要它来进行处理。

我们最终有许多自动处理反向引用的设置器：

```
class Dog {

    @OneToOne
    private DogOwner owner;

    public void setOwner(DogOwner owner) {
       this.owner = owner;
       if (!this.owner.getDog().equal(this)) {
          owner.setDog(this);
       }
    }

    [...]
 }

class DogOwner {

    @OneToOne(mappedBy="owner")
    private Dog dog;

    public void setDog(Dog dog) {
       this.dog = dog;
       if (!this.dog.getOwner().equal(this)) {
          dog.setOwner(this)
       }
    }

    [...]
 } 
```

集合/列表上的 OneToMany 关联和方法也是**如此**。`add()`

这可行，但是为所有反向引用编写那些自动设置器有点乏味且容易出错。

由于**JPA**具有所有必需的注释并具有 Spring / OAP 的强大功能，是否有一些配置或框架可以自动处理？

**编辑：示例**

澄清一下，我希望反向引用在我的模型中自动保持连贯，甚至在执行“持久化”之前。

这是我想要的行为：

```
Dog rex = new Dog();
Dog mirza = new Dog();
DogOwner bob = new DogOwner();

bob.setDog(rex);
assert(rex.getOwner() == bob);

bob.setDog(mirza);
assert(rex.getOwner() == null);
assert(mirza.getOwner() == bob); 
```

如果没有，我想我要自己写了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:34:42.247

我认为不会自动进行反向引用。根据我的经验，我使用`overload constructor`它。

例子

```
public class DogOwner {
    private Dog dog;

    public DogOwner () {
    }

    public DogOwner (Dog dog) {
        this.dog = dog;
        dog.setDogOwner(this);
    }
    //getter and setter
}

public class Dog {
    private DogOwner dogOwner;

    public Dog() {
    }
    //getter and setter
} 
```

如果是这样，您可以减少初始化代码如下；

```
Dog d = new Dog();
DogOwner owner = new DogOwner(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:18:14.510

您需要确保反向 relp 工作正常。可以试试这个：

```
@OneToOne
@JoinColumn(name="OWNER_ID", unique= true, nullable=true, insertable=true, updatable=true)
private DogOwner owner; 
```

就是这样：JPA/OneToOneMappingBidirectional.htm">http://www.java2s.com/Tutorial/Java/0355_JPA/OneToOneMappingBidirectional.htm

# sql - 仅当有足够的余额可用时才编写更新查询

> ID：13401366
> 
> 赞同：0
> 
> 时间：2012-11-15T16:00:01.077
> 
> 标签：sql

我有这个要求，我需要在购买后更新帐户余额。有时，余额不足。所以，我只想在余额足以购买时更新。如何为此编写正确的 sql

我需要类似的东西

```
Update account set balance = balance - amount only if balance >= amount. 
```

我怎样才能在sql中写这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:04:34.750

您正在寻找 WHERE 关键字。它允许您将命令过滤到表的子集。例子：

```
Update account
SET balance = balance - amount
WHERE balance >= amount 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:01:23.800

您可以`CASE`像这样使用表达式：

```
Update account 
SET balance = CASE 
                WHEN balance >= amount THEN balance - amount 
                ELSE balance 
              END; 
```

# c# - 使用 Log4Net 的 .NET Web 服务日志记录无法从单独的客户端运行

> ID：13401368
> 
> 赞同：0
> 
> 时间：2012-11-15T16:00:07.487
> 
> 标签：c#, .net, web-services, log4net

在我在本地构建的基本 .NET Web 服务 (asmx) 中，我正在尝试使用 Log4NET 将日志记录到文件中。如果我在 Visual Studio 中启动调试模式并使用提供的 wsdl/test 页面测试服务，这将正常工作。但是，如果我尝试使用单独的客户端（我制作了一个 C# 控制台应用程序来调用该服务），我会看到预期的响应，但没有记录。
（下面列出了单独的客户端代码。我必须导入对 Web 服务的内置 DLL 的引用。）

我对此有点陌生，但我推测问题是因为在 VS 服务器或 IIS 之外（我没有使用），没有使用 Global.asax（其中包含我的日志记录初始化命令）。但我需要从外部客户端进行测试。如何让 Global.asax 从客户端应用程序的角度进行初始化，或者如何避免需要？这听起来像是可以解决我的日志记录问题吗？

我的 Web 服务项目中的 Global.asax 包含以下语句：

```
protected void Application_Start(object sender, EventArgs e)
{
    log4net.Config.XmlConfigurator.Configure();
} 
```

我单独的客户端（控制台）应用程序如下所示：

```
static void Main(string[] args)
{
    MyWebService proxy = new MyWebService();

    MyWebService.Request request = new MyWebService.Request();
    request.Type = "Test";

    MyWebService.Response response = proxy.GetResponse(request);

    Console.WriteLine("RESPONSE CODE: " + response.StatusCode);
    Console.WriteLine("RESPONSE MSG: " + response.StatusMessage);
    Console.WriteLine("Press any key to continue...");
    Console.ReadKey(true);
} 
```

我也不清楚如何更改此控制台应用程序以引用 Visual Studio 服务器实例（例如：localhost:1583/MyWebService.asmx?op=GetResponse），而不是创建 Web 服务的代理实例。我认为这也可以解决问题，因为 Visual Studio 服务器使用 Global.asax，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T16:06:37.723

## 更简单的方法

就是将 log4net 初始化移到里面`static void Main`：

```
static void Main(string[] args)
{
    log4net.Config.XmlConfigurator.Configure();
} 
```

不要忘记在新主机`log4net`的文件中包含配置。`app.config`

## 更好的方法

将您的服务移动到单独的项目（它已经是，对吗？）所以它被编译到它自己的程序集中。比申请

```
[assembly: log4net.Config.XmlConfigurator(Watch=true)] 
```

归因于`assemlyInfo.cs`. 详细请参考[log4net配置手册](http://logging.apache.org/log4net/release/manual/configuration.html)（在页面上搜索word `assembly`）。这种方式更好，因为您不必添加

```
log4net.Config.XmlConfigurator.Configure(); 
```

进入您拥有的所有主机环境的初始化。

但请确保您有 log4net 配置`app.config`，`web.config`或者您拥有的任何配置文件。

# c++ - GCC vs VC++ 模板语法错误（为什么不能同时编译？）

> ID：13401371
> 
> 赞同：1
> 
> 时间：2012-11-15T16:00:13.147
> 
> 标签：c++, templates

我购买了一个 Ogre 插件（粒子宇宙）的源代码，它是（或应该是）用独立于平台的 C++ 编写的。它带有一个编译得很好的 Visual Studio 解决方案，但是因为我的整个项目都是用 G++ 编译的，所以我也想用 G++ 编译那个库。但是由于某种原因，模板声明会在 G++ 中引发错误。这是代码片段。

```
typedef Ogre::Any Any;
template <typename ValueType> ValueType* any_cast(Any* operand) : public any_cast(operand){}; 
```

是否有任何 C++ 大师能够告诉我为什么会出现此错误？（也许不同的语法？）

```
include/ParticleUniverseAny.h: In function 'ValueType*
ParticleUniverse::any_cast(ParticleUniverse::Any*)':
include/ParticleUniverseAny.h:21:68: error: only constructors take member initializers
include/ParticleUniverseAny.h:21:68: error: expected identifier before 'public'
include/ParticleUniverseAny.h:21:68: error: expected '{' before 'public'
include/ParticleUniverseAny.h: At global scope:
include/ParticleUniverseAny.h:21:68: error: expected unqualified-id before 'public' 
```

我会很高兴并感谢任何帮助！

编辑：any_cast 在 OgreAny.h 中定义

```
friend ValueType * any_cast(Any *);

template<typename ValueType>
ValueType * any_cast(Any * operand)
{
    return operand && operand->getType() == typeid(ValueType)
                ? &static_cast<Any::holder<ValueType> *>(operand->mContent)->held
                : 0;
}

template<typename ValueType>
ValueType * any_cast(Any * operand)
{
    return operand && operand->getType() == typeid(ValueType)
                ? &static_cast<Any::holder<ValueType> *>(operand->mContent)->held
                : 0;
}

template<typename ValueType>
const ValueType * any_cast(const Any * operand)
{
    return any_cast<ValueType>(const_cast<Any *>(operand));
}

template<typename ValueType>
ValueType any_cast(const Any & operand)
{
    const ValueType * result = any_cast<ValueType>(&operand);
    if(!result)
    {
        StringUtil::StrStreamType str;
        str << "Bad cast from type '" << operand.getType().name() << "' "
            << "to '" << typeid(ValueType).name() << "'";
        OGRE_EXCEPT(Exception::ERR_INVALIDPARAMS,
            str.str(), 
            "Ogre::any_cast");
    }
    return *result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:07:14.273

这段代码完全是胡说八道：

```
template <typename ValueType> ValueType* any_cast(Any* operand) : public any_cast(operand){}; 
```

它看起来像一个模板函数定义：

```
template <typename ValueType> ValueType* any_cast(Any* operand) 
```

部分。但是还有一个冒号，它只在构造函数初始化列表中是合法的，然后是`public`，它只在类声明中是合法的。这两个令牌`:`根本`public:`不能像这样一起出现。

这里一定有一些宏黑魔法在 MSVC 下编译并且在 GCC 下不起作用。如果是这样，这就是为什么宏可能是邪恶的一个典型例子。当被滥用时，它们会产生一种新的秘密语言，除了作者之外没有人知道。

除非你能从库的作者那里得到直接的支持，否则你可能会在 GCC 下编译它。

# activemq - ActiveMQ 到 Apollo 的过渡，Openwire 到 Stomp 协议配置

> ID：13401374
> 
> 赞同：2
> 
> 时间：2012-11-15T16:00:18.320
> 
> 标签：activemq, messagebroker, apollo

我正在尝试从 ActiveMQ 5.6 切换到 Apollo 1.5。我有两个软件正在交换消息，使用发布/订阅主题。

*   第一个是 c++ 并使用带有 tcp 的 openwire
*   第二个是 Javascript 并使用 stomp 和 websockets

使用 ActiveMQ 一切正常，我发送的消息可以在两个软件上读取和写入，此后我没有更改客户端。

现在，我从 c++ 软件（使用 openwire）发送消息，并尝试用 JS 软件读取它们，但我得到了错误。事实上，我收到带有标题内容类型的消息：“protocol/openwire”，但我期待 stomp。

这就是我配置 apollo.xml 连接器部分的方式：

```
<connector id="tcp" bind="tcp://0.0.0.0:61613">
    <openwire max_inactivity_duration="-1" max_inactivity_duration_delay="-1" />
    <stomp max_header_length="10000" die_delay="-1" />
</connector>
<connector id="ws" bind="tcp://0.0.0.0:61623">
    <stomp max_header_length="10000" die_delay="-1" />
</connector> 
```

我还尝试在 tcp 和 ws 连接器中使用 <detect />，它应该自动检测客户端协议，但也不起作用。

有人可以帮我解决这个问题吗？

谢谢，

* * *

编辑 ：

我发现我确实收到了 stomp 协议消息，但它们的格式非常奇怪，甚至包含使 stomp.js 无法解析消息并正确填充消息正文的非文本字符。

这是从 activemq openwire 和 apollo openwire 收到的相同消息，使用相同的 c++ 发布者和 js 订阅者：

活跃的MQ

```
    “信息
    消息 ID：ID：myID-61443-1352999572576-0:0:0:0:0
    类：Message.PointToPoint
    目的地：/主题/我的主题
    时间戳：1352999626186
    过期：0
    订阅：sub-0
    优先级：4

    <PointToPoint xmlns="Message" ><SourceId>u_23</SourceId><TargetId>u_75</TargetId></PointToPoint>"

```

阿波罗

```
    “信息
    订阅：sub-0
    目的地：
    内容长度：331
    内容类型：协议/openwire
    消息 ID：xps-broker-291

    Eç{#ID:myID-61463-1352999939140-0:0emy-topicn{#ID:myID-61463-1352999939140-0:0; Å??<PointToPoint xmlns="Message" ><SourceId>u_23</SourceId><TargetId>u_75</TargetId></PointToPoint>(Message.PointToPoint 类
"

```

你认为这可能是阿波罗的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:43:36.157

ActiveMQ 5.6 处理将逻辑 OpenWire 消息转换为 STOMP 客户端的文本表示。Apollo，目前还不支持该功能！：（ 看：

[https://issues.apache.org/jira/browse/APLO-267](https://issues.apache.org/jira/browse/APLO-267)

它只接收完整的 openwire 消息并将其用作 STOMP 消息的主体。顺便说一句，只要正确设置了内容长度标头，在 STOMP 消息中使用二进制数据是完全有效的。

# asp.net-mvc - 使用 JSON 和 ASP.NET MVC 4 显示“已接受用户名”消息

> ID：13401375
> 
> 赞同：0
> 
> 时间：2012-11-15T16:00:17.893
> 
> 标签：asp.net-mvc, json

我创建了一个方法来检查数据库中是否存在重复的用户名，然后使用 JSON 显示一条消息，如果用户名已被使用，则该用户名不可用。

尽管一切似乎都正常，但如果用户名是新的，例如使用 JSON 的“用户名已接受”，我将无法显示成功消息。以下是我的完美方法，只是希望它也显示成功消息。

有人可以指导我吗..？

```
public JsonResult doesUsernameExist(string UserName)
{
      //Fetch usernames from the database.
      var userNames = UserServiceInstance.GetAllUsers().Where(a => a.UserName == UserName);

      if (userNames.Count() > 0)
          return Json(string.Format("{0} is not available.", UserName), JsonRequestBehavior.AllowGet);
      else
        return Json(true, JsonRequestBehavior.AllowGet);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:18:27.847

你可以这样做：

```
if(userNames.Count() > 0)
    return Json(new { Success = false, Message = "This username is taken"}, JsonRequestBehavior.AllowGet);
else 
    return Json(new { Success = true, Message = "Username accepted"}, JsonRequestBehavior.AllowGet); 
```

然后在客户端对服务器进行 Ajax 调用，在回调方法中：

```
...
success: function(response){
   if(response.Success){
      // user name accepted, do what ever you want, e.g alert response.Message
      ...  
   }else{
      // user name taken
      ...
   }
} 
```

希望有帮助。

# c++ - C++ 关于 cin.ignore()

> ID：13401377
> 
> 赞同：0
> 
> 时间：2012-11-15T16:00:27.417
> 
> 标签：c++

我希望有人可以修改我的代码，因为它太有问题了。有时它的工作，有时它不..

所以让我解释一下.. 文本文件数据如下

```
Line3D, [70, -120, -3], [-29, 1, 268]
Line3D, [25, -69, -33], [-2, -41, 58] 
```

要阅读上面的行..我使用以下

```
char buffer[30];

cout << "Please enter filename: ";
cin.ignore();
getline(cin,filename);

readFile.open(filename.c_str());

//if successfully open
if(readFile.is_open())
{
//record counter set to 0
numberOfRecords = 0;

while(readFile.good())
{
//input stream get line by line
readFile.getline(buffer,20,',');

if(strstr(buffer,"Point3D"))
{
Point3D point3d_tmp;
readFile>>point3d_tmp;

// and so on... 
```

然后我对 Line3d 的 ifstream 做了一个重载

```
ifstream& operator>>(ifstream &input,Line3D &line3d)
{
int x1,y1,z1,x2,y2,z2;

//get x1
input.ignore(2);
input>>x1;

//get y1
input.ignore();
input>>y1;

//get z1
input.ignore();
input>>z1;

//get x2
input.ignore(4);
input>>x2;

//get y2
input.ignore();
input>>y2;

//get z2
input.ignore();
input>>z2;
input.ignore(2);

Point3D pt1(x1,y1,z1);
Point3D pt2(x2,y2,z2);

line3d.setPt1(pt1);
line3d.setPt2(pt2);

line3d.setLength();
} 
```

但问题是有时记录工作，有时不工作..我的意思是如果在这一点上

```
//i add a cout
cout << x1 << y1 << z1;
cout << x2 << y2 << z2;

//its works!
Point3D pt1(x1,y1,z1);
Point3D pt2(x2,y2,z2);

line3d.setPt1(pt1);
line3d.setPt2(pt2);

line3d.setLength(); 
```

但如果我拿走 cout 它就行不通了。我如何更改我的 cin.ignore() 以便可以正确处理数据，考虑数字范围是 -999 到 999

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:57:57.860

我无法解释为什么这段代码会崩溃。这可能是因为您有未在此处发布的错误。但是，您会发现以这种方式编写 operator>> 更容易。

```
istream& operator>>(istream &input,Line3D &line3d)
{
    int x1,y1,z1,x2,y2,z2;
    char c1,c2,c3,c4,c5,c6,c7;

    input >> c1 >> x1 >> c2 >> y1 >> c3 >> z1 >> c4 >> c5 >> x2 >> c6 >> y2 >> c7 >> z2;

    Point3D pt1(x1,y1,z1);
    Point3D pt2(x2,y2,z2);

    line3d.setPt1(pt1);
    line3d.setPt2(pt2);
    line3d.setLength();
    return input;

} 
```

使用 dummy char 变量（c1、c2 等）读取您不感兴趣的逗号和括号。此技术还将跳过您不感兴趣的空格。这是一种比使用忽略更可靠的方法。

您的代码中的其他错误`operator>>`应该使用`istream`not `ifstream`，并且应该`return input;`在最后。通过编写您`operator>>`的使用`istream`它，它将与任何类型的输入流（包括`cin`例如）一起使用，而不仅仅是文件流。

# c - K&R:C - 检测到堆栈粉碎

> ID：13401379
> 
> 赞同：3
> 
> 时间：2012-11-15T16:00:42.127
> 
> 标签：c, stack-corruption

我的代码是这样的：

```
int find_test(int argc, char *argv[])
{
    char line[MAX_LINES];
    int c, except = 0, found = 0, number = 0;
    long lineno = 0;
    int i = 0;

    while(--argc > 0 && (*++argv)[0] == '-'){
        while(c = *++argv[0]){
            switch(c){
                case 'x':
                    except = 1;
                    break;
                case 'n':
                    number = 1;
                    break;
                default:
                    printf("find:illegal option %c\n", c);
                    argc = 0;
                    found = -1;
                    break;
            }
        }
    }
    if(argc != 1){
        printf("Usage:find -x -n pattern\n");
    }else{
        while(getline(line, MAX_LENGTH) > 0){
            lineno++;
            if((strstr(line, *argv) != NULL) != except){
                if(number)
                    printf("%ld:", lineno);
                printf("%s\n", line);
                found++;
            }
        }
    }
    return found;
} 
```

`getline`像这样：

```
int getline(char *line, int maxline)
{
    char *p = line;
    int c;

    while(maxline-- && (c = getchar()) != EOF && c != '\n'){
        *line++ = c;
    }
    if(maxline > 0)
        *line = '\0';

    return line - p;
} 
```

当我使用`gcc -Wall -O2 -g a.c -o a.out`和执行`a.out -x -n 111<find_test`时，`find_test`我的测试数据在哪里：

```
line1:111111111111111
line2:222222222222222
line3:222222222222222
line4:444444444444444
line2:kasdskskdk 
```

我收到错误消息：

```
*** stack smashing detected ***: ./a.out terminated
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(__fortify_fail+0x48)[0xb7ead138]
/lib/tls/i686/cmov/libc.so.6(__fortify_fail+0x0)[0xb7ead0f0]
./a.out[0x8048e95]
./a.out[0x8048ec2]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe0)[0xb7dd6450]
./a.out[0x8048641]
======= Memory map: ========
08048000-0804a000 r-xp 00000000 08:08 17488      /home/jyc/prgm/the_c_p_l/a.out
0804a000-0804b000 rw-p 00001000 08:08 17488      /home/jyc/prgm/the_c_p_l/a.out
0804b000-0806c000 rw-p 0804b000 00:00 0          [heap]
b7dbf000-b7dc0000 rw-p b7dbf000 00:00 0 
b7dc0000-b7f09000 r-xp 00000000 08:08 694644     /lib/tls/i686/cmov/libc-2.7.so
b7f09000-b7f0a000 r--p 00149000 08:08 694644     /lib/tls/i686/cmov/libc-2.7.so
b7f0a000-b7f0c000 rw-p 0014a000 08:08 694644     /lib/tls/i686/cmov/libc-2.7.so
b7f0c000-b7f0f000 rw-p b7f0c000 00:00 0 
b7f0f000-b7f32000 r-xp 00000000 08:08 694648     /lib/tls/i686/cmov/libm-2.7.so
b7f32000-b7f34000 rw-p 00023000 08:08 694648     /lib/tls/i686/cmov/libm-2.7.so
b7f3a000-b7f44000 r-xp 00000000 08:08 677855     /lib/libgcc_s.so.1
b7f44000-b7f45000 rw-p 0000a000 08:08 677855     /lib/libgcc_s.so.1
b7f45000-b7f49000 rw-p b7f45000 00:00 0 
b7f49000-b7f4a000 r-xp b7f49000 00:00 0          [vdso]
b7f4a000-b7f64000 r-xp 00000000 08:08 678556     /lib/ld-2.7.so
b7f64000-b7f66000 rw-p 00019000 08:08 678556     /lib/ld-2.7.so
bfa26000-bfa3b000 rw-p bffeb000 00:00 0          [stack] 
```

但如果我使用`gcc -Wall -O2 -g -fno-stack-protector a.c -o a.out`并执行`a.out -x -n 111<find_test`一切都可以。我找不到原因。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:14:16.000

你好像搞混`MAX_LINES`了`MAX_LENGTH`。看起来您为前者分配了空间，但您读入的是后者。

```
int find_test(int argc, char *argv[])
{
    char line[MAX_LINES];            <-------------
    int c...

    ....

    while(getline(line, MAX_LENGTH) > 0){  <------- 
```

顺便说一句，你为什么不使用`fgets()`而不是`getline()`？

## 更新

> 但是，如果我使用 gcc -Wall -O2 -g -fno-stack-protector ac -o a.out，并执行 a.out -x -n 111 < find_test，一切正常

**不**，绝对一切*都不*好。您*仍在*覆盖内存区域；*现在*和在*这个*特定平台上，覆盖可能“几乎无害” ，但它仍然可能是致命的。在另一种情况下，同样的错误，除非有一些保护措施（幸运的是，现在它经常是——但你不能指望*运气*！）可能[允许远程攻击者控制你的机器](https://www.google.it/search?q=stack%20smashing%20attack)。如果您尝试使用更长的行，那么没有堆栈保护器的“OK”程序很可能会再次出现段错误（或者，对于更复杂的程序，返回不正确的结果甚至对系统造成损坏）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:20:48.763

当您到达`MAX_LENGTH`您的行时，您`strstr`可以扫描超出缓冲区，因为缓冲区没有 '\0' 字符。

编辑：还有一点我想说。那是有争议的，因为这两种可能性都有争论。`unsigned`在我看来，使用缓冲区索引会更好。这将迫使以不同的方式处理循环，这更容易纠正。此外，当使用 索引数组时`unsigned`，如果发生下溢，您将更有可能`segmentation fault`使用它而不是使用有符号积分。我们最近在我们的项目中遇到了这种情况（自 1998 年以来一直在生产的系统），我将代码中的一个变量更改为 a`size_t`并捕获了 2 个从一开始就被遗漏的下溢错误。

EDIT2：我想提出的另一个文体观点。避免循环表达式中的后(in|de)crement，它们通常会导致细微的错误（如上面的错误）。预（减少|减少）减少不是问题。post-(in|de)crement 有问题的原因是，当您在心理上解析表达式的条件（继续或中断）时，它立即无效，即在表达式的末尾，您在脑海中使用的值看到结果已经不存在了。也许只有我一个人，但是在我用 C 编程的 25 年中，有很多次我在循环中得到了后（in|de）增量错误，并且总是通过前（in|de）增量来纠正或从布尔表达式中取出增量。

# c# - 是否可以从哈希码创建 SqlHierarchyId？

> ID：13401381
> 
> 赞同：0
> 
> 时间：2012-11-15T16:00:46.003
> 
> 标签：c#, sql-server-2008, hierarchical-data

在 C# 中，是否可以`SqlHierarchyId`从哈希码创建一个新的？我正在网页上创建一个树形视图，并且我认为能够将哈希码从服务器传递到客户端比传递`SqlHierarchyId`. 我知道一旦我`SqlHierarchyId`从 SQL 中提取一个，我就可以调用`SqlHierarchyId.GetHashCode()`来获取哈希码，但我不知道如何`SqlHierarchyId`从该哈希码创建一个新的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:23:47.663

不可能将哈希映射回 SqlHierarchyId 并获得您想要的行为。哈希码并不意味着唯一，多个 SqlHierarchyId 可能返回相同的哈希码。

维基百科上有关于散列的高级描述。[http://en.wikipedia.org/wiki/Hash_function](http://en.wikipedia.org/wiki/Hash_function)。请注意页面上的第一张图片说明了哈希冲突。

除此之外，散列通常旨在作为一种单向操作。SqlHierarchyId 上没有任何方法可以倒退（并且 SqlHierarchyId 用自己的实现覆盖 GetHashCode）。即使查看 GetHashCode 的实现，我也无法看到能够重新创建 SqlHierarchyId 的状态。代码在一个循环中循环通过 id 和 xor'ing 值的二进制表示（不能倒退）。

# python - Python Scrapy - 基于 mimetype 的过滤器，以避免非文本文件下载

> ID：13401382
> 
> 赞同：6
> 
> 时间：2012-11-15T16:00:49.030
> 
> 标签：python, twisted, mime-types, scrapy

我有一个正在运行的 scrapy 项目，但它占用大量带宽，因为它会尝试下载大量二进制文件（zip、tar、mp3、..etc）。

我认为最好的解决方案是根据 mimetype (Content-Type:) HTTP 标头过滤请求。我查看了scrapy代码，发现了这个设置：

```
DOWNLOADER_HTTPCLIENTFACTORY = 'scrapy.core.downloader.webclient.ScrapyHTTPClientFactory' 
```

我将其更改为： DOWNLOADER_HTTPCLIENTFACTORY = 'myproject.webclients.ScrapyHTTPClientFactory'

并玩了一点`ScrapyHTTPPageGetter`，这里是突出显示的编辑：

```
class ScrapyHTTPPageGetter(HTTPClient):
    # this is my edit
    def handleEndHeaders(self):
        if 'Content-Type' in self.headers.keys():
            mimetype = str(self.headers['Content-Type'])
            # Actually I need only the html, but just in 
            # case I've preserved all the text
            if mimetype.find('text/') > -1: 
                # Good, this page is needed
                self.factory.gotHeaders(self.headers)
            else:
                self.factory.noPage(Exception('Incorrect Content-Type')) 
```

我觉得这是错误的，在确定它是不需要的 mimetype 之后，我需要更友好的方式来取消/删除请求。而不是等待整个数据被下载。

**编辑：**
我特别要求这部分`self.factory.noPage(Exception('Incorrect Content-Type'))`是取消请求的正确方法。

**更新 1：**
我当前的设置已经使 Scrapy 服务器崩溃，所以请不要尝试使用上面相同的代码来解决问题。

**更新 2：**
我已经设置了一个基于 Apache 的网站，用于使用以下结构进行测试：

```
/var/www/scrapper-test/Zend -> /var/www/scrapper-test/Zend.zip (symlink)
/var/www/scrapper-test/Zend.zip 
```

我注意到 Scrapy 会丢弃带有`.zip`扩展名的那些，但会丢弃没有 .zip 的那个，即使它只是一个符号链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-12T20:05:28.747

我构建了这个中间件来排除任何不在正则表达式白名单中的响应类型：

```
from scrapy.http.response.html import HtmlResponse
from scrapy.exceptions import IgnoreRequest
from scrapy import log
import re

class FilterResponses(object):
    """Limit the HTTP response types that Scrapy dowloads."""

    @staticmethod
    def is_valid_response(type_whitelist, content_type_header):
        for type_regex in type_whitelist:
            if re.search(type_regex, content_type_header):
                return True
        return False

    def process_response(self, request, response, spider):
        """
        Only allow HTTP response types that that match the given list of 
        filtering regexs
        """
        # each spider must define the variable response_type_whitelist as an
        # iterable of regular expressions. ex. (r'text', )
        type_whitelist = getattr(spider, "response_type_whitelist", None)
        content_type_header = response.headers.get('content-type', None)
        if not type_whitelist:
            return response
        elif not content_type_header:
            log.msg("no content type header: {}".format(response.url), level=log.DEBUG, spider=spider)
            raise IgnoreRequest()
        elif self.is_valid_response(type_whitelist, content_type_header):
            log.msg("valid response {}".format(response.url), level=log.DEBUG, spider=spider)
            return response
        else:
            msg = "Ignoring request {}, content-type was not in whitelist".format(response.url)
            log.msg(msg, level=log.DEBUG, spider=spider)
            raise IgnoreRequest() 
```

要使用它，请将其添加到 settings.py：

```
DOWNLOADER_MIDDLEWARES = {
    '[project_name].middlewares.FilterResponses': 999,
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:22:02.150

可能为时已晚。您可以使用 Accept 标头过滤您要查找的数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-12T11:58:36.670

解决方案是设置`Node.js`代理并配置 Scrapy 以通过`http_proxy`环境变量使用它。

[代理](http://en.wikipedia.org/wiki/Proxy_server)应该做的是：

*   从 Scrapy 获取 HTTP 请求并将其发送到被爬取的服务器。然后它将响应返回给 Scrapy，即拦截所有 HTTP 流量。
*   对于二进制文件（基于您实现的启发式），它会向`403 Forbidden`Scrapy 发送错误并立即关闭请求/响应。这有助于节省时间、流量和 Scrapy 不会崩溃。

### 示例代理代码

这确实有效！

```
http.createServer(function(clientReq, clientRes) {
    var options = {
        host: clientReq.headers['host'],
        port: 80,
        path: clientReq.url,
        method: clientReq.method,
        headers: clientReq.headers
    };

    var fullUrl = clientReq.headers['host'] + clientReq.url;

    var proxyReq = http.request(options, function(proxyRes) {
        var contentType = proxyRes.headers['content-type'] || '';
        if (!contentType.startsWith('text/')) {
            proxyRes.destroy();            
            var httpForbidden = 403;
            clientRes.writeHead(httpForbidden);
            clientRes.write('Binary download is disabled.');
            clientRes.end();
        }

        clientRes.writeHead(proxyRes.statusCode, proxyRes.headers);
        proxyRes.pipe(clientRes);
    });

    proxyReq.on('error', function(e) {
        console.log('problem with clientReq: ' + e.message);
    });

    proxyReq.end();

}).listen(8080); 
```

# if-statement - Google Sheets IF 语句与 concatenate 合并

> ID：13401387
> 
> 赞同：2
> 
> 时间：2012-11-15T16:01:00.450
> 
> 标签：if-statement, google-sheets, concatenation, google-sheets-formula

我正在尝试使以下语句起作用。

```
=IF(N3=100, (=concatenate("Text",A3;)), "Result"). 
```

继续出现错误。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:06:32.557

改为这样做：

```
=IF(N3=100, concatenate("Text",A3), "Result") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-10T21:46:23.973

你可以简单地这样做：

```
=IF(N3=100, "Text "&A3), "Result") 
```

# ruby-on-rails - 如何让 rspec 给我更多有用的输出？

> ID：13401390
> 
> 赞同：0
> 
> 时间：2012-11-15T16:01:03.960
> 
> 标签：ruby-on-rails, rspec

我有一些测试在我可以手动验证应该通过的非常简单的请求上失败。

```
it { should have_selector('title', text: app_title('Sign in')) } 
```

输出：

```
expected css "title" with text "CredSimple - Sign in" to return something 
```

除了无法通过测试的消息之外，我想 rspec 告诉我它遇到了什么。是否有一个指令可以用来告诉引擎输出它看到的页面？就像是：

```
expected css "title" with text "CredSimple - Sign in" to return something **instead returned text "Wrong Page Title"** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:52:00.783

我在 rspec 中找到了一种使用`save_and_open_page`语句的方法。这将创建一个可以在编辑器或浏览器中查看的 HTML 转储，以便您可以确定测试源中的内容。

为了实现这一点，我采取了以下步骤

*   将 gem 'launchy' 添加到 Gemfile
*   $捆绑安装
*   将 save_and_open_page 插入我正在尝试调试的测试的 it { } 块中
*   位置很重要：

    它 { save_and_open_page 应该有_selector('div.alert') }

# c# - C#，max，在列表中找到面积最大的矩形

> ID：13401391
> 
> 赞同：2
> 
> 时间：2012-11-15T16:01:08.873
> 
> 标签：c#, max

我有一个矩形列表“colliedrects”我想将面积最大的矩形传递给函数_playership.Collide() 到目前为止我有......

```
var item = collidedrects.Max(x => x.Height*x.Width);
_playership.Collide(collidedrects[item]); 
```

我不熟悉 max 以及 C# 中的 => 东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:05:28.860

您可以使用`Aggregate`而不是`Max`找到最大的矩形：

```
var largestRect = collidedrects.Aggregate( (r1,r2) => 
    (r1.Height * r1.Width) > (r2.Height * r2.Width) ? r1 : r2);
_playership.Collide(largestRect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:25:09.500

问题是`Max`返回您比较的值，而不是生成该值的项目。如果您创建一个`MaxBy`返回生成值的项目的函数，那么它将正常工作。

```
public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source,
    Func<TSource, TKey> selector, IComparer<TKey> comparer = null)
{
    comparer = comparer ?? Comparer<TKey>.Default;
    using (IEnumerator<TSource> sourceIterator = source.GetEnumerator())
    {
        if (!sourceIterator.MoveNext())
        {
            throw new InvalidOperationException("Sequence was empty");
        }
        TSource max = sourceIterator.Current;
        TKey maxKey = selector(max);
        while (sourceIterator.MoveNext())
        {
            TSource candidate = sourceIterator.Current;
            TKey candidateProjected = selector(candidate);
            if (comparer.Compare(candidateProjected, maxKey) > 0)
            {
                max = candidate;
                maxKey = candidateProjected;
            }
        }
        return max;
    }
} 
```

有了它，你可以这样做：

```
var item = collidedrects.MaxBy(x => x.Height*x.Width);
_playership.Collide(collidedrects[item]); 
```

# eclipse - Eclipse GWT 插件是否可以配置为在您使用非模拟方法时发出警告

> ID：13401392
> 
> 赞同：2
> 
> 时间：2012-11-15T16:01:15.863
> 
> 标签：eclipse, gwt, eclipse-plugin, warnings

目前，eclipse 很乐意让您使用编译版本中实际上不可用的方法，因为它们没有被模拟，从而导致运行时失败。可以将 GWT 插件配置为对此类使用发出警告/错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:04:57.523

我遇到了这个问题，如果我没记错的话，编译日志会警告这个问题。
我建议您将 GWT 日志级别设置为 Info 或 Trace。转到：Google -> GWT 编译项目 -> 编译器和 Shell -> 日志级别。

# clearcase - 什么是 RTC 源代码管理中的“待定补丁”

> ID：13401395
> 
> 赞同：2
> 
> 时间：2012-11-15T16:01:22.397
> 
> 标签：clearcase, rtc

在我的“待更改”视图中，我看到了这个：

![在此处输入图像描述](../Images/a401b78a853d177e9bfed0d85e7c9c8f.png)

什么是“待定补丁”以及它们是如何创建的？我认为有人可能无意中创建了它。我似乎没有查看哪些文件已更改的选项，我应该没有这个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:21:29.987

待处理的补丁是等待在本地工作区应用的差异。

它可以是合并的结果，也可以是显式删除变更集（“暂停”），作为“补丁”（同样，差异）放在一边，以便清除您不进行修改的当前本地工作区'暂时还不想申请。

您还可以在[接受传入的 changet](https://jazz.net/library/article/126#AcceptWithGaps)时创建一个：

> 当它所依赖的所有先前更改集都存在于您的存储库工作区中时，接受更改集将起作用。
> 当其中一个变更集丢失[时，历史上就会出现空白](https://jazz.net/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/170658)。
> 在这种情况下，RTC SCM 会阻止接受完成。
> 有两个选项可以将更改导入您的存储库工作区：
> 
> 1.  接受将填补空白的变更集。如果您想要的更改集在您的传入更改中，这可能就像接受所有传入更改一样简单。
> 2.  接受更改集并选择**作为补丁接受**的选项。
>     这将创建可以合并到 Eclipse 工作区并签入的更改。将创建一个新的变更集，该变更集将不依赖于填补空白的变更集。

![接受为补丁](../Images/7a1cde8cefa32b5e2e1f7419ab2ed61a.png)

[帮助页面](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.scm.doc/topics/t_scm_patch.html)解释了如何*创建*补丁。

请注意，没有简单的方法可以在 ClearCase 中获得相同的功能。
看：

*   “ [ClearCase 中是否存在与 RTC 等效的“暂停模式”](https://stackoverflow.com/questions/8110401/is-there-rtc-equivalent-suspend-mode-in-clearcase/8112509#8112509)？
*   “[其他版本控制系统中的 git stash 等价物？](https://stackoverflow.com/questions/3272923/git-stash-equivalents-in-other-revision-control-systems/3272973#3272973) ”

# java - 在 Java 中：从网络路径读取时出现“打开的文件过多”错误

> ID：13401398
> 
> 赞同：9
> 
> 时间：2012-11-15T16:01:25.630
> 
> 标签：java, networking, io

我有下面的代码，它只是从一个文件夹中读取所有文件。此文件夹中有 20,000 个文件。该代码在本地文件夹 ( ) 上运行良好，但在读取大约 1,000 - 2,000 个文件后`d:/files`在网络路径 ( ) 上失败。`//robot/files`

**更新**：文件夹是彼此的副本。

是什么导致了这个问题以及如何解决它？

```
package cef_debug;

import java.io.*;

public class Main {

    public static void main(String[] args) throws Throwable {
        String folder = args[0];
        File[] files = (new File(folder)).listFiles();
        String line;
        for (int i = 0; i < files.length; i++) {
            BufferedReader br = new BufferedReader(new FileReader(files[i]));
            while ((line = br.readLine()) != null) {
            }
            br.close();
        }
    }
} 
```

从网络路径 ( `//robot/files`) 读取时出现以下错误：

```
Exception in thread "main" java.io.IOException: Too many open files
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at java.io.FileReader.<init>(FileReader.java:55)
        at cef_debug.Main.main(Main.java:12)
Java Result: 1 
```

第 12 行是以下行：

```
BufferedReader br = new BufferedReader(new FileReader(files[i])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:04:54.347

某些 java 版本有一个[记录在案的错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4189011)，并且某些文件打开时达到了 2035 的限制。您可能刚刚达到了这个限制。

从评论：

> 为了澄清这个问题，在win32系统上打开文件有三种方式：
> 
> 1：使用Win32 API
> 
> 2：使用MFC类框架库。
> 
> 3：使用 C-Library API（open() 和 fopen()）
> 
> 除了第三个选项，即选项1和2，几乎没有打开文件数的限制。第三种方法被限制（由于我不知道的原因）只能打开大约。2035 个文件。这就是为什么 MS JVM 能够打开无限（实际上）文件，但 SUN JVM 在 2035 个文件之后失败（我猜它是使用第三种方法打开文件）。

现在，这是很久以前修复的一个老问题，但他们可能会在*网络*访问中使用相同的功能，但该错误仍然存​​在。

即使*不*关闭句柄或流，windows 也应该能够打开 >10000 个文件句柄并保持它们打开，如错误注释中的测试代码所示：

```
import java.util.*;
import java.io.*;

// if run with "java maxfiles 10000", will create 10k files in the current folder
public class maxfiles
{
    static int count = 0;
    static List files = new ArrayList();

    public static void main(String args[]) throws Exception
    {
        for (int n = 0; n < Integer.parseInt(args[0]); n++) {
            File f = new File("file" + count++);
            //save ref, so not gc'ed
            files.add(new PrintStream(new FileOutputStream(f)));
        }
        Iterator it = files.iterator();
        while (it.hasNext()) {
            PrintStream out = ( PrintStream) it.next();
            out.println("foo");
            out.flush();
        }
        System.out.println("current files open: " + files.size());
    } //~main
} 
```

您可以测试在网络共享上运行它，如果失败则报告错误。您也可以尝试使用不同的 JDK。至少对于[OpenJDK](http://openjdk.java.net/)源，我看不到除 WinAPI 调用之外的任何其他调用，所以我会尝试行为是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:39:35.247

尝试：

```
package cef_debug;

import java.io.*;

public class Main {

    public static void main(String[] args) throws Throwable {
        String folder = args[0];
        File[] files = (new File(folder)).listFiles();
        String line;
        for (int i = 0; i < files.length; i++) {
            try {
                BufferedReader br = new BufferedReader(new FileReader(files[i]));
                while ((line = br.readLine()) != null) {
                }
            } finally {
                try {
                    if (br != null){
                        br.close();
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

# c# - 使用 TrulyObservableCollection 从 CollectionChanged 事件中获取更改的项目

> ID：13401403
> 
> 赞同：1
> 
> 时间：2012-11-15T16:01:45.197
> 
> 标签：c#, wpf, class, events, observablecollection

我`TrulyObservableCollection`在 WPF DataGrid 中使用 a 作为数据源。我的班级`PropertyChange`正确地实现了事件（属性更改时我会收到通知）。该`CollectionChanged`事件也被触发。但是，我的问题在于`PropertyChanged`事件与`CollectionChanged`事件之间的联系。我可以在`PropertyChanged`事件中看到哪个项目被更改（在这种情况下是`sender`对象），但是我似乎无法找到一种方法来查看在`CollectionChanged`事件中更改了哪个项目。`sender`对象是整个集合。查看活动中哪个项目发生变化的最佳方式是什么`CollectionChanged`？相关的代码片段如下。感谢您的帮助，如果需要澄清，请告诉我。

设置集合的代码：

```
 private void populateBret()
    {
        bretList = new TrulyObservableCollection<BestServiceLibrary.bretItem>(BestClass.BestService.getBretList().ToList());
        bretList.CollectionChanged += bretList_CollectionChanged;
        dgBretList.ItemsSource = bretList;
        dgBretList.Items.Refresh();
    }

    void bretList_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        //Do stuff here with the specific item that has changed
    } 
```

集合中使用的类：

```
public class bretItem : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private int _blID;
    public string _blGroup;

    [DataMember]
    public int blID
    {
        get { return _blID; }
        set
        {
            _blID = value;
            OnPropertyChanged("blID");
        }
    }

    [DataMember]
    public string blGroup
    {
        get { return _blGroup; }
        set
        {
            _blGroup = value;
            OnPropertyChanged("blGroup");
        }
    }

    protected void OnPropertyChanged (String name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

TrulyObservableCollection 类

```
public class TrulyObservableCollection<T> : ObservableCollection<T> where T : INotifyPropertyChanged
    {
        public TrulyObservableCollection()
            : base()
        {
            CollectionChanged += new NotifyCollectionChangedEventHandler(TrulyObservableCollection_CollectionChanged);
        }
        public TrulyObservableCollection(List<T> list)
            : base(list)
        {
            foreach (var item in list)
            {
                item.PropertyChanged += new PropertyChangedEventHandler(item_PropertyChanged);
            }
            CollectionChanged += new NotifyCollectionChangedEventHandler(TrulyObservableCollection_CollectionChanged);
        }

        void TrulyObservableCollection_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (Object item in e.NewItems)
                {
                    (item as INotifyPropertyChanged).PropertyChanged += new PropertyChangedEventHandler(item_PropertyChanged);
                }
            }
            if (e.OldItems != null)
            {
                foreach (Object item in e.OldItems)
                {
                    (item as INotifyPropertyChanged).PropertyChanged -= new PropertyChangedEventHandler(item_PropertyChanged);
                }
            }
        }

        void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            NotifyCollectionChangedEventArgs a = new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset);
            OnCollectionChanged(a);
        }
    } 
```

**编辑：**

如果设置`item_PropertyChanged`为. 这导致and为空，因此在这种情况下我无法获得更改的项目。我不能使用，因为 Datagrid 已使用附加项目进行了更新。我似乎也无法开始工作以获取更改的项目。`NotifyCollectionChangedEventArgs``NotifyCollectionChangedAction.Reset``OldItems``NewItems``.Add``.Replace`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:48:46.863

这个怎么样：

在`ViewModel`包含 的`ObservableCollection`中`bretItem`，ViewModel 订阅了 的`CollectionChanged`事件`ObservableCollection`。

`TrulyObservableCollection`这将防止需要派生的新类`ObservableCollection`与其集合中的项目耦合。

在您的处理程序中，您可以像现在一样`ViewModel`添加和删除事件处理程序。`PropertyChanged`由于您现在`ViewModel`被告知集合中对象的更改，因此您可以采取适当的措施。

```
public class BretListViewModel
{

    private void populateBret()
    {
        bretList = new ObservableCollection<BestServiceLibrary.bretItem>(BestClass.BestService.getBretList().ToList());
        bretList.CollectionChanged += bretList_CollectionChanged;              
    }

    void bretList_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
         if (e.NewItems != null)
        {
            foreach (Object item in e.NewItems)
            {
                (item as INotifyPropertyChanged).PropertyChanged += new PropertyChangedEventHandler(item_PropertyChanged);
            }
        }
        if (e.OldItems != null)
        {
            foreach (Object item in e.OldItems)
            {
                (item as INotifyPropertyChanged).PropertyChanged -= new PropertyChangedEventHandler(item_PropertyChanged);
            }
        }
    }

    void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        var bret = sender as bretItem;

        //Update the database now!

        //One note:
        //The ObservableCollection raises its change event as each item changes.
        //You should consider a method of batching the changes (probably using an ICommand)
    }

} 
```

**注意事项：**

顺便说一句，您似乎正在打破`MVVM`基于此代码段的模式：

```
dgBretList.ItemsSource = bretList;
dgBretList.Items.Refresh(); 
```

您可能应该考虑加载您的`ViewModel`并将您绑定`View`到它，而不是在`View`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:13:00.200

以这种方式使用集合更改事件是不合适的，因为它仅在从集合中添加/删除项目时被触发。这就是你撞墙的原因。你也有可能用这种方法打破 Liskov 替换原则。

在您的集合类上实现`INotifyPropertyChanged`接口并在您的项目之一触发其属性更改事件时触发该事件可能会更好。

# iphone - iPad应用程序中的内存增加（泄漏）

> ID：13401408
> 
> 赞同：0
> 
> 时间：2012-11-15T16:01:56.360
> 
> 标签：iphone, ios, ipad, sqlite, memory-leaks

我的代码运行时出现内存问题。我设备的 RAM 不断增加，但从未减少。我不明白为什么。

供您参考，我的代码中有一部分循环了大约 7000 次。（我已经尝试将这个循环分成几个更小的循环，但没有效果）在这个循环中，我解析一个 XML 文件，然后将一些解析的信息添加到一个 sqlite 数据库中。为了杀死我的对象，我使用了以下块：“@autoreleasepool”。它限制了 RAM 的使用，但不足以使内存减少。

这里的问题不是我的 7000 次迭代；他们工作得很好。但是如果我稍后尝试进行更多迭代，那么内存就会饱和，iOS 会杀死我的应用程序。我需要更多信息来了解我的代码有什么问题。

这是我使用的代码部分：

```
-(void)MultiInsertFamille:(NSArray *)familles
{
NSMutableArray *produits = [[NSMutableArray alloc] init];
NSMutableArray *famillesRetry = [[NSMutableArray alloc] init];
sqlite3_stmt *stmt=nil;
sqlite3 *bdd;

NSString *database = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"mybdd.sqlite"];
if (sqlite3_open([database UTF8String], &bdd) == SQLITE_OK)
{
    sqlite3_exec(bdd, "BEGIN", 0, 0, 0);
    const char *sqlstatement="insert into Famille values(?,?,?,?,?,?,?)";

    if(sqlite3_prepare_v2(bdd,sqlstatement , -1, &stmt, NULL)==SQLITE_OK)
    {
        int hasError= 0;
        for(NSString *path in familles)
        {
            @autoreleasepool
            {
                XMLParserFamille *fa = [[XMLParserFamille alloc] initXMLParserFamille:path parseError:nil];
                for (ProduitData *p in fa.famille.Produits.Produit)
                {
                    [produits addObject:p];
                }
                FamilleData *fam = [fa.famille retain];
                [fa release];

                if (fam.champ_Recherche)
                    sqlite3_bind_text(stmt, 1, [fam.champ_Recherche cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
                else
                    sqlite3_bind_text(stmt, 1, "NULL", -1, SQLITE_TRANSIENT);

                NSString *pathImTh = @"";
                for (Attribut *att in fam.Attributs)
                {
                    if ([att.name isEqualToString:@"ProductThumbnail"])
                    {
                        pathImTh = att.value;
                        break;
                    }
                }
                if (![pathImTh isEqualToString:@""])
                    sqlite3_bind_text(stmt, 2, [pathImTh cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
                else
                    sqlite3_bind_text(stmt, 2, "NULL", -1, SQLITE_TRANSIENT);

                if (fam.nom)
                    sqlite3_bind_text(stmt, 3, [fam.nom cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
                else
                    sqlite3_bind_text(stmt, 3, "NULL", -1, SQLITE_TRANSIENT);

                if (fam.ordre)
                    sqlite3_bind_int(stmt, 4, [fam.ordre intValue]);
                else
                    sqlite3_bind_int(stmt, 4, 0);

                if (fam.uid)
                    sqlite3_bind_text(stmt, 5, [fam.uid cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
                else
                    sqlite3_bind_text(stmt, 5, "NULL", -1, SQLITE_TRANSIENT);

                if (fam.uid_Categorie)
                    sqlite3_bind_text(stmt, 6, [fam.uid_Categorie cStringUsingEncoding:NSUTF8StringEncoding], -1, SQLITE_TRANSIENT);
                else
                    sqlite3_bind_text(stmt, 6, "NULL", -1, SQLITE_TRANSIENT);

                if (fam.xmlErrone)
                    sqlite3_bind_int(stmt, 7, [fam.xmlErrone intValue]);
                else
                    sqlite3_bind_int(stmt, 7, 0);

                if(sqlite3_step(stmt)==SQLITE_DONE)
                {
                    NSLog(@"OK FAMILLE");
                }
                else
                {
                    [famillesRetry addObject:fam.uid];
                    NSLog(@"sqlite3_step error famille: '%s'", sqlite3_errmsg(bdd));
                    hasError= 1;
                }
                [fam release];
                sqlite3_reset(stmt);
            }
        }
        if( hasError == 0 ) {
            sqlite3_exec(bdd, "COMMIT", 0, 0, 0);
        }
        else {
            sqlite3_exec(bdd, "ROLLBACK", 0, 0, 0);
        }
    }
    sqlite3_finalize(stmt);
}
sqlite3_close(bdd);
if (famillesRetry.count > 0)
    [self retryFamille:famillesRetry familleToInsert:familles];
[famillesRetry release];
[self MultiInsertProduit:produits];
[produits release];
} 
```

提前感谢您的考虑。

# android - 在 Android 中为 WebView 充气时出现 NullPointerException

> ID：13401409
> 
> 赞同：1
> 
> 时间：2012-11-15T16:01:57.157
> 
> 标签：android, layout, webview, nullpointerexception, inflate

我在尝试在我的一个布局中膨胀 webview 时遇到了这个奇怪的错误

```
11-15 10:49:30.790: E/AndroidRuntime(18749): FATAL EXCEPTION: main
11-15 10:49:30.790: E/AndroidRuntime(18749): android.view.InflateException: Binary XML file line #9: Error inflating class android.webkit.WebView
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at com.philly.prosportsframework.fragments.HomeLauncherFragment.buildView(HomeLauncherFragment.java:317)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at com.philly.prosportsframework.fragments.HomeLauncherFragment$LauncherListAdapter.getView(HomeLauncherFragment.java:299)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.AbsListView.obtainView(AbsListView.java:2267)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.ListView.onMeasure(ListView.java:1156)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.View.measure(View.java:15172)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.Choreographer.doFrame(Choreographer.java:525)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.os.Handler.handleCallback(Handler.java:615)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.os.Looper.loop(Looper.java:137)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at java.lang.reflect.Method.invokeNative(Native Method)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at java.lang.reflect.Method.invoke(Method.java:511)
11-15 10:49:30.790: E/AndroidRuntime(18749):    at c
11-15 10:49:30.850: D/dalvikvm(18749): GC_CONCURRENT freed 314K, 6% free 7612K/8071K, paused 13ms+4ms, total 51ms
11-15 10:49:30.850: E/System(18749): Uncaught exception thrown by finalizer
11-15 10:49:30.850: E/System(18749): java.lang.NullPointerException
11-15 10:49:30.850: E/System(18749):    at android.webkit.WebViewClassic.destroyJava(WebViewClassic.java:2087)
11-15 10:49:30.850: E/System(18749):    at android.webkit.WebViewClassic.destroy(WebViewClassic.java:2072)
11-15 10:49:30.850: E/System(18749):    at android.webkit.WebViewClassic.finalize(WebViewClassic.java:4126)
11-15 10:49:30.850: E/System(18749):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:186)
11-15 10:49:30.850: E/System(18749):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:169)
11-15 10:49:30.850: E/System(18749):    at java.lang.Thread.run(Thread.java:856) 
```

跟踪中引用的代码行是：

```
v = LayoutInflater.from(parent.getContext()).inflate(R.layout.home_launcher_item, null); 
```

布局文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

           <WebView
        android:id="@+id/photo" 
        android:layout_width="330dip" 
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"        
        android:background="@drawable/thumb"/>

    <TextView   
        android:id="@+id/title" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"                
        android:layout_above="@+id/byline"
        android:layout_alignRight="@+id/photo"
        android:layout_marginTop="20px"
        android:textColor="#ffffffff"
        android:textSize="25px"
        android:lines="2"
        android:background="#dd000000"/>                

    <TextView   
        android:id="@+id/byline"    
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/photo"
        android:layout_alignRight="@+id/photo"
        android:textColor="#ff565656"
        android:textStyle="italic"
        android:background="#dd000000"/>   
</RelativeLayout> 
```

任何想法都会有所帮助。我正在使用运行 Android 4.1.1 的 Xoom 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:04:59.753

`res/drawable/thumb.png`可能是丢失了。您需要添加它或更改对现有可绘制资源的引用。

XML 布局验证器有时有问题。不要相信他；）

# bash - 如何使用 Bash 糟糕的 dirs 内置命令来利用笨拙的 pushd 和 popd

> ID：13401410
> 
> 赞同：10
> 
> 时间：2012-11-15T16:02:00.587
> 
> 标签：bash, stack, directory-structure, built-in

`pushd`难道没有比and更直观的处理目录堆栈的方法`popd`吗？

我发现呈现给用户的 CLI`pushd`和`popd`内置命令令人难以置信。但与此同时，我希望经常使用`dirs`内置命令提供的目录堆栈。

所以我花了很长时间来弄清楚用例，然后记住以下几个：

1.  `pushd`- 从顶部切换两个目录。
2.  `pushd +1`- 从顶级目录更改为第二个。
3.  `pushd -0`- 从顶部目录更改到底部。
4.  `popd +0`- 从顶部目录弹出顶部更改为第二个。
5.  `pushd -0; popd +1`- 从顶部目录更改到底部并弹出前顶部。

仍然必须每次都键入它们来处理目录堆栈，这对我来说感觉很重。我什至无法想出助记名称来给这五个用例起别名。

有什么见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:02:00.587

最近，我发现了 GNU 的 readline 库的强大功能，以及它可以在 Bash 命令行上为用户提供的击键方面的快捷方式。

`~/.inputrc`因此，我在文件中定义了以下热键。GNU readline 的配置文件：

```
# "pushd" use case.
"\C-^": "\C-a\C-kpushd\C-m"

# "pushd +1" use case.
"\e<": "\C-a\C-kpushd +1\C-m"

# "popd +0" use case.
"\ex\e<": "\C-a\C-kpopd +0\C-m"

# "pushd -0" use case.
"\e>": "\C-a\C-kpushd -0\C-m"

# "pushd -0; popd +1" use case.
"\ex\e>": "\C-a\C-kpushd -0; popd +1\C-m" 
```

我将上面的热键关联如下：

1.  `<ctrl>-^`-`vim`热键切换当前与前一个缓冲区。
2.  `<alt>-<`- 左移并携带。
3.  `<alt>-x<`- 左移和裁剪。
4.  `<alt>->`- 右移并进位。
5.  `<alt>-x>`- 右移和裁剪。

`<ctrl>-ak`击键将光标定位在行 (a) 的开头并删除 (k) 它。这很重要，因为当`<ctrl-m>`(enter) 被击中时，用户很有可能在句子中间按下热键。热键值会因当前用户输入而出现乱码，bash 无法执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T03:45:12.047

对于我自己的个人使用，我有几个我*常用*的目录，并希望能够在使用`pushd`. 我想出了以下功能`.bashrc`：

```
p() {
  pushd +"$(($(dirs -p | sed -n '1d;s,.*/,,;/^'"$1"'/{=;q;}')-1))" >/dev/null
} 
```

假设我有一个这样的目录堆栈：

```
$ dirs -v
 0  ~/repos/local_only/configs
 1  ~/repos/virtualization
 2  ~/repos/local_only/work
 3  ~/repos/core
 4  ~/repos/local_only/my_test_repo 
```

我可以使用 just 从当前目录切换到任何其他目录`p <letter>`，其中`<letter>`是目录名称的开头。（当然，它可以不止一个字母。）例如，`p m`将切换为`my_test_repo`; `p w`将切换到`work`.

如果我`p c`从我的`work`目录中使用，它将切换到堆栈中以 开头的下一个目录`c`，在本例中为`core`. （命令的`q`一部分`sed`阻止它返回比第一个结果更多的结果。）要专门切换到`configs`目录，我可以使用`p con`, 或者只是`p c`然后再`p c`一次。

`1d`命令中的是`sed`让我永远不会切换到当前目录。因此，我可以使用 just在我的`configs`目录和我的目录之间切换。`core``p c`

to的重定向`stdout`可以`/dev/null`防止`dirs`每次执行`pushd`. （无论如何，我的提示中都列出了当前目录。）但是我不会沉默——所以`stderr`如果我运行`p q`，例如，我会看到：

```
$ p q
-bash: pushd: +-1: directory stack index out of range 
```

* * *

**与内建互补**

这不会取代`pushd`and `popd`; 它用于快速切换。要添加到目录堆栈，我仍然使用`pushd <directory_name>`. 如果我在特定目录中完成（例如，`virtualization`），我可以`p v`然后`popd`.

* * *

**不太可能的错误：**

这可能不适用于包含换行符的目录名称，但这对我的目的无关紧要。无论如何，它可能做的最糟糕的事情就是`pushd`您进入错误的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T16:08:14.230

这是我的工作流程：

**0\. CONF（假数据）**

```
cd /tmp
mkdir -p foo/bar baz qux 
```

**1\. 会议**

```
dirs -v
cd foo/bar; pushd .; cd ../..
cd baz; pushd .; cd ..
cd qux; pushd .; cd .. 
```

**2\. 运行**

```
dirs -v
cd $(dirs +1) # switch to dir 1
cd $(dirs +2) # switch to dir 2
cd $(dirs +3) # switch to dir 3 
```

在这里快速记录一下可能会更好地解释：[https ://asciinema.org/a/148441](https://asciinema.org/a/148441)

**专业版**

*   at conf：原始和快捷方式的最小集
*   运行时：同上。只使用索引。大多是只读的，它们甚至永远不会改变。

# wpf - 使用来自 WPF .net 应用程序的 Apache 基本身份验证以编程方式登录到站点

> ID：13401415
> 
> 赞同：0
> 
> 时间：2012-11-15T16:02:13.253
> 
> 标签：wpf, apache, internet-explorer, basic-authentication, autologin

我们需要从我们的 WPF 应用程序在客户端计算机的默认浏览器中打开一个网站 URL。一直以来，我们都在使用 simple`Process.Start(URL)`并且运行良好。到目前为止，其中一位客户在基本身份验证后拥有此“URL”。他们希望我们使用 URL 浏览的站点托管在 Apache Web 服务器上。据我所知，如果我们有`https://username:password@domain.com`它直接将我们带入站点而无需用户名/密码挑战，并且它在 Chrome 和 Firefox 中运行良好，但是出于安全原因，IE 上的较新版本停止支持它。

考虑到以下目标，有人可以提出一些替代方法来实现相同的目标吗？

1.  项目清单
2.  通过输入用户名密码浏览到 URL。
3.  在客户端的桌面计算机中打开默认浏览器。
4.  不想用户浏览器控制
5.  至少应该在 3 个浏览器中工作 - IE、Firefox 和 Chrome
6.  我们无法更改客户端桌面的机器，因此解决方案不需要任何特殊设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:21:39.347

来自 Microsoft 支持站点的开发人员解决方法：http: [//support.microsoft.com/kb/834489](http://support.microsoft.com/kb/834489)

> 应用程序和网站开发人员的解决方法
> 
> 由调用 WinInet 或 Urlmon 函数的对象打开的 URL
> 
> 对于在调用 WinInet 或 Urlmon 函数（如 InternetOpenURL）时使用包含用户信息的 HTTP 或 HTTPS URL 的对象，请重写该对象以使用以下方法之一将用户信息发送到网站：使用 InternetSetOption 函数和包括以下选项标志： INTERNET_OPTION_USERNAME INTERNET_OPTION_PASSWORD 注意对于这些标志，InternetSetOption 选项必须具有由 InternetConnect 函数返回的句柄。因此，如果应用程序使用 InternetOpenUrl 函数，请将应用程序修改为使用 InternetConnect、HttpOpenRequest 和 HttpSendRequest WinInet 函数。有关如何使用这些功能的详细信息，请访问以下 Microsoft 网站：http: [//msdn2.microsoft.com/en-us/library/Aa384363](http://msdn2.microsoft.com/en-us/library/Aa384363)
> 
> [http://msdn2.microsoft.com/en-us/library/Aa384233](http://msdn2.microsoft.com/en-us/library/Aa384233)
> 
> [http://msdn2.microsoft.com/en-us/library/aa384247.aspx](http://msdn2.microsoft.com/en-us/library/aa384247.aspx)使用 IAuthenticate 接口。有关如何使用 IAuthenticate 接口的详细信息，请访问以下 Microsoft 网站：http: [//msdn2.microsoft.com/en-us/library/ms775080.aspx](http://msdn2.microsoft.com/en-us/library/ms775080.aspx)

是否尝试过此选项？

# ios - 无法从 mainBundle 播放 MP4 视频文件

> ID：13401417
> 
> 赞同：22
> 
> 时间：2012-11-15T16:02:14.877
> 
> 标签：ios, video, mpmovieplayercontroller, mp4, mainbundle

所以我正在尝试播放一个简单的介绍动画视频文件，我已经将它拖到 XCode 中的项目中，因此应该能够从我的 mainBundle 中播放，对吧？

使用此代码：

```
 NSURL *urlString = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"introvideo" ofType:@"mp4"]]; 
MPMoviePlayerController *player  = [[MPMoviePlayerController alloc] initWithContentURL:urlString];
[player play]; 
```

我收到此错误消息： *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSURL initFileURLWithPath:]: nil string parameter”

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-15T16:06:48.967

这意味着您的代码找不到您的 introvideo.mp4 文件。确保您已成功将该文件添加到您的捆绑包中。您可以检查项目的设置：复制捆绑资源。 ![在此处输入图像描述](../Images/08865193b72b306176246b424f3c6906.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T21:40:31.137

你的代码不正确。请根据以下内容进行相应更改。仍然将您的视频复制到您的捆绑资源中。

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"MacBook Pro with Retina Display" ofType:@"m4v"]];
MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
                                                 initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:playercontroller];
playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[playercontroller.moviePlayer play];
[playercontroller release];
playercontroller = nil;
NSLog(@"Video is Playing"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T16:09:49.707

似乎 pathForResource:ofType: 返回 nil。检查

1.  该文件确实已添加到“复制资源”构建阶段；
2.  你没有弄错文件名 - 设备上的路径区分大小写。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T16:22:40.537

您需要检查该视频是否在您的应用程序的资源包中可用。

正如你提到 `you getting this error message: * Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '* -[NSURL initFileURLWithPath:]: nil string parameter`的。

它只是表明问题出在资源路径中，意味着资源包中不存在这样的文件。这就是`pathForResource`返回`nil`路径的原因。

您需要再次放置该视频文件并确保该文件存在于资源包中。

然后你应该继续使用`Rehan`同样发布的代码。

```
 NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"video" ofType:@"mov" inDirectory:@""]];

  MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
  [[player view] setFrame:[self.view bounds]]; // Frame must match parent view
  [self.view addSubview:[player view]];
  [player play];
  [player release]; 
```

我希望它对你来说是值得的。

谢谢

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-21T04:33:08.947

# Xcode 9

这是更新的图像。

转到**Build Phases > Copy Bundle Resources**并查看您的文件是否存在。如果不是，您可以通过按“+”按钮添加它。

[![在此处输入图像描述](../Images/a1369dfbcafe3964b65719ae345e276c.png)](https://i.stack.imgur.com/4zwIy.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-15T16:08:31.493

```
NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"video" ofType:@"mov" inDirectory:@""]];

MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
[[player view] setFrame:[self.view bounds]]; // Frame must match parent view
[self.view addSubview:[player view]];
[player play];
[player release]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-01T20:44:26.603

我已将整个“声音”目录放入项目中，并将其添加到“复制捆绑资源”部分。它工作正常，但随后开始崩溃。

修复方法是将目录名称添加到文件名之前。例如，这**不起作用**：

```
SKAction.playSoundFileNamed("crash.caf", waitForCompletion: false) 
```

...但这**确实**有效：

```
SKAction.playSoundFileNamed("Sounds/crash.caf", waitForCompletion: false) 
```

# bash - 如何使管道中的程序在没有临时文件的情况下第一个数据到达之前不被执行？

> ID：13401418
> 
> 赞同：5
> 
> 时间：2012-11-15T16:02:17.747
> 
> 标签：bash, curl, pipe

具体案例：

```
generate_data | curl -T - http://someserver/path 
```

这意味着，我有一个在标准输出中生成输出的程序，然后我将它放在带有 curl 的远程服务器上。

问题是如果`generate_data`花费太多时间，服务器将返回 408。

我知道管道执行所有命令而不等待数据准备好，所以我的下一次迭代是：

```
generate_data | ( sleep 20 ; curl -T - http://someserver/path ) 
```

该时间是运行 generate_data 所需最大时间的两倍，所以一切正常。但是......这不是一个最佳解决方案。

我知道我可以通过 read 和适当的 shell 脚本创建更复杂的东西，但感觉我缺少一些明显的东西。

所以......我可以用什么来代替`sleep 20;`不创建临时文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:41:53.860

```
generate_data > /tmp/generated_data; cat /tmp/generated_data | curl -T - http://someserver/path 
```

# android - 滑动时钟 - 翻译图像，但它会在时钟继续运行之前重置翻译

> ID：13401420
> 
> 赞同：2
> 
> 时间：2012-11-15T16:02:27.310
> 
> 标签：android, clock, translate-animation

我正在做一个类似于算盘的时钟。我的问题是我无法理解为什么我的图像每秒都会重置，而不是继续向右。我的想法是我可能需要使用不同类型的动画？到目前为止，这是我的代码：

```
public class MainActivity extends Activity implements AnimationListener {
Button start, stop;

TextView time;

LinearLayout layout;

Animation movement;

private Handler mHandler = new Handler();
private long startTime;
private long elapsedTime;
private final int REFRESH_RATE = 1000;
private String seconds;
private long secs;
private boolean stopped = false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    start = (Button) findViewById(R.id.buttonStart);

    start.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            // Start animation on each image

            if(stopped){
                startTime = System.currentTimeMillis() - elapsedTime;
            }
            else{
                startTime = System.currentTimeMillis();
            }
            mHandler.removeCallbacks(startTimer);
            mHandler.postDelayed(startTimer, 0);

        }

    });

    stop = (Button) findViewById(R.id.buttonStop);

    stop.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            mHandler.removeCallbacks(startTimer);
            stopped = true;

        }

    });

    time = (TextView) findViewById(R.id.textTime);

    // Get the layouts
    layout = (LinearLayout) findViewById(R.id.linearLayout1);

    // Create animation for right image
    movement = AnimationUtils.loadAnimation(this, R.layout.animation_test);
    movement.setAnimationListener(this);   

    }

// Listen for animations to be finished
// There are more efficient ways, I'm just being lazy.
public void onAnimationEnd(Animation animation) {
    // or do whatever it is you wanted to do here, like launch another activity?
} 

public void onAnimationRepeat(Animation animation) {    
} 

public void onAnimationStart(Animation animation) { 
} 

private Runnable startTimer = new Runnable() {
       public void run() {
           elapsedTime = System.currentTimeMillis() - startTime;
           update(elapsedTime);
           mHandler.postDelayed(this,REFRESH_RATE);
        }
    };

private void update (float time){
    secs = (long)(time/1000);

    layout.startAnimation(movement);

    secs = secs % 60;
    seconds=String.valueOf(secs);
    if(secs == 0){
        seconds = "00";
    }
    if(secs <10 && secs > 0){
        seconds = "0"+seconds;
    }

    /* Setting the timer text to the elapsed time */
    ((TextView)findViewById(R.id.textTime)).setText(seconds);
}
} 
```

我的animation.xml如下

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
 android:fromXDelta="0" 
 android:toXDelta="15%p" 
 android:fromYDelta="0"
 android:toYDelta="0%" 
 android:duration="500"
 android:zAdjustment="top"/> 
```

我处于停滞状态，一直在尝试通读开发部分，但我找不到正确的解决方案，或者必须忽略某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:18:17.660

尝试添加：

```
android:fillEnabled="true"
android:fillAfter="true" 
```

到你的动画。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T16:37:26.337

如果您的目标是 Android 3.0 或更高版本，则可以改用新的动画框架：http: [//developer.android.com/guide/topics/graphics/prop-animation.html](http://developer.android.com/guide/topics/graphics/prop-animation.html)

# java - 如何将值列表传递到水晶报表中

> ID：13401421
> 
> 赞同：0
> 
> 时间：2012-11-15T16:02:27.420
> 
> 标签：java, jsp, crystal-reports

我有一个整数值列表（员工 ID），我需要将其传递给 Crystal Report。我正在使用 Action 类来传递这些值。到目前为止，我已经成功传递了一个值，但我找不到传递值列表的方法。

```
Fields fields = new Fields();
Values vals1 = new Values();
ParameterFieldDiscreteValue pfieldDV1 = new ParameterFieldDiscreteValue();

pfield1.setName("fromDate");
pfieldDV1.setValue(start_Date);

vals1.add(pfieldDV1);
pfield1.setCurrentValues(vals1);
fields.add(pfield1);

CrystalReportViewer viewer = new CrystalReportViewer();
//some code to set CrystalReportViewer settings
viewer.setParameterFields(fields); 
```

通过这种方式，我能够将 fromDate 值放入水晶报表中。有谁知道如何获得这种清单

```
int employeeList[] 
```

或者一个

```
String[] empListOptions 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:29:16.593

```
 foreach (string in string_array)
        {
            param.Value = string;
            report.ParameterFields[parameter].CurrentValues.Add(param);
        } 
```

在这里找到：[http ://www.logicaltrinkets.com/wordpress/?p=227](http://www.logicaltrinkets.com/wordpress/?p=227)

# windows - Glassfish 安装 JRE 未找到

> ID：13401427
> 
> 赞同：6
> 
> 时间：2012-11-15T16:03:04.763
> 
> 标签：windows, glassfish, java

我无法安装 Oracle Glassfish Server 3.1.2.2
当我（以管理员身份）运行安装程序时，会出现一个对话框，显示“正在提取文件”，然后出现以下错误框，提示我没有安装 JRE。

![需要 JRE](../Images/c7363b5eecb93ee7ed801b675e595ef2.png)

我安装了 JRE 和 JDK 1.6 和 1.7（都是 64 位的）。
所有都在 PATH 系统变量中。
我已经使用错误中的说明从 CMD 尝试了该程序。
我用来运行的命令是：
`OracleGlassfishServer(OGS)-3.1.2.2-windows.exe" -j "c:\Program Files\Java\jdk1.7.0_09\bin`
我也尝试过使用 1.6 bin。
我正在运行 Win 7 64 位。

我唯一没有想过尝试的是在 Program Files(x86) 目录中安装 32 位 JRE。这需要 32 位 JRE 是否有意义？

还有什么可能的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:25:29.763

Glassfish 安装程序要求 JRE 安装文件夹的路径在 JAVA_HOME 环境变量中；如果未设置变量，则可以在命令行上指定文件夹。在这两种情况下，文件夹都必须是 JRE 的根文件夹，而不是 bin 子文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-24T18:29:04.230

不幸的是，我发现设置 JAVA_HOME 对我无效。

在我的服务器上运行的解决方案是使用指向我的 JDK 的 -j 选项运行 Glassfish 安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T13:37:21.963

使用命令行并指向JRE安装目录应该可以正常工作，上面命令的问题是您指向bin目录，只需指向主目录“c:\Program Files\Java\jdk1.7.0_09 "

# java - GWT 多个会话 - 在开发模式下调试

> ID：13401430
> 
> 赞同：1
> 
> 时间：2012-11-15T16:03:22.430
> 
> 标签：java, gwt, eclipse-plugin, gwt-rpc, gwt2

我正在尝试从多个/相同的浏览器进行多个调试会话，我收到一个空白屏幕。

例如，当我尝试`http://127.0.0.1:8888/browser.html?gwt.codesvr=127.0.0.1:9997`使用不同的浏览器选项卡时。它只是在eclipse中跟踪如下，

> 从 [源 ip] 收到的连接。开通[新港口]

并发送**EOF**和**favicon.ico**

除此之外，我什至无法在浏览器上按 F5（重新加载）。它被认为是一个新的连接，它只是再次将我发送到一个空白屏幕。

只有第一个浏览器会话有效。

```
GWT version: 2.5.0
Extjs GWT version: 2.2.5 
```

[https://developers.google.com/eclipse/docs/running_and_debugging_2_0](https://developers.google.com/eclipse/docs/running_and_debugging_2_0)似乎没有解释很多多个会话。

# c# - Silverlight CustomControl 依赖属性不能绑定到父视图模型

> ID：13401432
> 
> 赞同：1
> 
> 时间：2012-11-15T16:03:25.810
> 
> 标签：c#, .net, silverlight, mvvm

我有一个具有依赖属性的自定义控件

```
 public static readonly DependencyProperty SelectedUserCodeProperty = DependencyProperty.Register(
    "SelectedUserCode",                               
    typeof(decimal),                           
    typeof(SystemUsersControl),             
    new PropertyMetadata(SelectedUserCodeChanged));
public decimal SelectedUserCode
    {
        get
        {
            return (decimal)this.GetValue(SelectedUserCodeProperty);
        }
        set
        {
            this.SetValue(SelectedUserCodeProperty, value);
            RaisePropertyChanged("SelectedUserCode");
        }
    } 
```

此控件位于另一个用户控件中，我试图在其视图模型中获取上面的依赖项属性此 xaml 位于父控件中

```
<SystemUsers:SystemUsersControl Name="ctrlSystemUsersControl" SelectedUserCode="{Binding SelectedSystemUserCode, Mode=TwoWay}" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,2,0,0"/> 
```

但没有任何东西绑定到父控件视图模型

我不知道是什么问题，这是我第一次处理依赖属性，我正在考虑将两个控件合二为一:(除非我得到任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:32:09.180

不用担心，

SelectedSystemUserCode 必须是一个属性。如果它是一个属性，您将看到初始值，但是完全支持您的类绑定的是 INotifyPropertyChanged 的​​实现。这个基本界面将成为我们的信使。

1）当你实现 INotifyPropertyChanged 时，下面的事件将被添加到你的类中。

```
 public event PropertyChangedEventHandler PropertyChanged; 
```

2）然后创建一个烧制方法

```
 public void FirePropertyChanged(string prop)
 {
     if(PropertyChanged!=null)
     {
       PropertyChanged(prop);
      }
  } 
```

3) 注册此事件以不获取空引用。

```
 in constructor this.PropertyChanged(s,a)=>{ //may do nothing }; 
```

4) //你可以用 Lazy < T > 代替这个。

```
 public decimal SelectedSystemUserCode
 {
    get{
          if(_selectedSystemUserCode==null)
              {
                      _selectedSystemUserCode=default(decimal);
              }
        return _selectedSystemUserCode;
      }
    set
      {
     _selectedSystemUserCode=value;
      FirePropertyChanged("SelectedSystemUserCode"); 
      //This will be messanger for our binding
      }
   } 
```

另外，我记得是默认值，所以你可以给它一个十进制值，SelectedUserCodeChanged 是回调方法也可以。

```
 //new PropertyMetadata(SelectedUserCodeChanged) 
 new PropertyMetadata(0) or null 
```

希望有所帮助。

# iphone - 维护 AppStore 上的免费和付费应用程序

> ID：13401444
> 
> 赞同：0
> 
> 时间：2012-11-15T16:04:22.080
> 
> 标签：iphone, ios

我尝试搜索有关此的参考，但我找不到任何参考。我想知道是否有办法为两个不同版本的应用程序向 AppStore 提交 1 个二进制文件：1 个带广告的免费版本和 1 个不带应用程序的付费版本。

一旦用户付费，我怎么可能将免费版本转换为付费和无广告版本？有没有办法在 1 个二进制文件下做到这一点？我是否总是需要为此维护 2 个二进制文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:08:23.457

这更像是您的业务决策，您可以在代码中使用 1 个二进制文件并切换到付费版本（无广告、新功能）并使用“应用内购买”付款方式。

[应用内购买方式链接](https://developer.apple.com/appstore/in-app-purchase/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:05:54.150

为什么不创建一个单独的许可证应用程序，由单个二进制文件检查然后解锁付费内容？许多 Android 应用程序都有此功能，但我不确定 iOS 是否允许此功能。

# database - 多表访问数据库

> ID：13401445
> 
> 赞同：1
> 
> 时间：2012-11-15T16:04:24.187
> 
> 标签：database, database-design, ms-access-2007

我对 Access 很陌生，我正在研究数据库，我需要帮助来提出解决方案：

我正在记录一群沥青铺设人员的数据。每个工作人员都有一个生产和设备领域的记录。每个船员都有不同类型的设备和不同数量的设备。因此，每次输入新记录时，我都需要为设备的类型和数量创建一个新表......有人可以帮我想出一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:11:02.547

您不需要为每条记录创建一个新表，您只需要一个正确设置的表。让我们说：

```
Crews table
CrewID
Location
Etc

CrewMembers table
MemberID
Etc

CrewEquipment table
CrewID
EquipmentID
DateIn
DateOut
Etc

Equipment table
EquipmentID
Details
Etc 
```

您可能想阅读[http://r937.com/relational.html](http://r937.com/relational.html)

通过上述设置，您可以拥有一个 Crew 表单，其中包含成员和设备的子表单。你可以从这个创建表单中得到一个想法，[在多个表中添加记录](https://stackoverflow.com/questions/12131211/create-form-to-add-records-in-multiple-tables/12132196#12132196)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:14:40.603

每次都创建新表不是解决方案，您应该首先清除一些 RDBMS 概念，如规范化。为

```
crew member (which include crew member id, his name, salary/wages
List item per hour) equipments (which include equipments id, operation cost per hour etc) 
Shift (can be separated by date and shift time etc) 
```

然后在表之间创建适当的关系，这样您就可以创建适当的关系数据库系统。所以先完成一些基础教程然后开始开发。

# android - StartIntent() 在自定义适配器中不起作用

> ID：13401446
> 
> 赞同：0
> 
> 时间：2012-11-15T16:04:30.020
> 
> 标签：android, android-intent

我为我的列表视图创建了一个自定义适配器，这样我的复选框和列表上也可以有监听器事件。以下是我的代码：

```
public class CustomAdapter extends ArrayAdapter<String> {
    private final Activity context;
    private final String[] names;
    private final String TAG = "MyPerformanceArrayAdapter";
    private static final int TASK_CREATE = 0;
    private static final int ACTIVITY_EDIT = 1;

    static class ViewHolder {
        public TextView text;
        public CheckBox reminderCheckBox;
    }

    public CustomAdapter(Activity context, String[] names) {
        super(context, R.layout.reminder_row, names);
        this.context = context;
        this.names = names;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.reminder_row, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) rowView.findViewById(R.id.reminderRowTextId);
            viewHolder.reminderCheckBox = (CheckBox) rowView.findViewById(R.id.CheckBoxId);
            rowView.setTag(viewHolder);
        }
        final int pos = position;
        final ViewHolder holder = (ViewHolder) rowView.getTag();

        String s = names[position];
        holder.text.setText(s);

        holder.reminderCheckBox.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (holder.reminderCheckBox.isChecked()) {
                    Toast.makeText(getContext(), "pos-->chkd" + pos, Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(getContext(), "pos-->un--chkd" + pos, Toast.LENGTH_SHORT).show();
                }
            }

        });

        holder.text.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(getContext(), "TEXT CLICKED" + pos , Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(context,ReminderModificationActivity.class);
                intent.putExtra(TasksDBAdapter.KEY_ROWID, pos);
                Log.i(TAG, "row clickd --> " + pos);
                startActivity(intent,ACTIVITY_EDIT); <<<<-------ERROR ON THIS LINE
            }
        });
        return rowView;
    }
} 
```

我在尖线 (startActivity(intent,ACTIVITY_EDIT);) 上遇到的错误是：

> 未为类型 new View.OnClickListener(){} 定义方法 startActivity(Intent, int)

任何人都可以提供一些相同的指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:07:54.053

由于您的代码位于 View.OnClickListener 中，因此使用了错误的上下文。您需要在 Activity 类而不是 View.OnClickListener 类上调用 startActivity()。

为此，您应该能够：

`context.startActivity(intent, ACTIVITY_EDIT);`

或者

`((Activity) context).startActivity(intent, ACTIVITY_EDIT);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:26:11.807

```
Intent mintent = new Intent(context,ReminderModificationActivity.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

context.startActivity(mintent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:13:34.427

改为使用`CustomAdapter.this.getContext().startActivity()`。

为什么：

要从内部匿名类引用外部实例，请使用`OuterClassName.this`. 在你的情况下`CustomAdapter.this`。

而且，要开始活动，您需要`Context`，您可以通过调用`getContext()`的方法获得`ArrayAdapter`。

# android - 在 Android 中检索动态表单的值

> ID：13401453
> 
> 赞同：0
> 
> 时间：2012-11-15T16:04:46.790
> 
> 标签：android, listener, dynamically-generated

我创建了一个没有太多问题的动态表单，但我需要从表单的字段（控件）中恢复值，但我不确定如何执行此操作。

例如，我有这段代码：

```
if(tipoP.equals("TEXTAREA")){
   EditText ta = new EditText(this);
   ta.setId(i);
   LayoutParams params3 = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, (float) 0.3);
   params3.setMargins(20, 0, 20, 0);
   ta.setLayoutParams(params3);
   ta.setLines(3);
   ta.setRawInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
   ll.addView(ta);
} 
```

如何添加一个捕获 EditText 文本并将其放入 Vector 变量的侦听器？

我试过这个：

```
ta.setOnClickListener(new OnClickListener(){
   public void onClick(View view){
       EditText t = (EditText) findViewById(i);
       res.add(t.getText().toString);
   }
}); 
```

但我没有得到 id（变量 i），因为它在另一个执行环境中。我该如何解决这个问题？任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:08:22.037

您不应该将 setId 用于动态创建的视图，`setTag`但`findViewByTag`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:57:21.073

您可以动态创建一个按钮并在其上设置一个 onClickListener。在侦听器内部，您可以直接引用 EditText（不需要标签或 id），只要您已将其设为最终版本。

# java - 字节码指令和处理器操作之间的关系

> ID：13401457
> 
> 赞同：10
> 
> 时间：2012-11-15T16:04:53.903
> 
> 标签：java, x86, bytecode, processor, atomic

Java 规范保证原始变量赋值始终是原子的（期望`long`和 double `types`.

相反，与著名的增量操作相对应的[Fetch-and-Add](http://en.wikipedia.org/wiki/Fetch-and-add)`i++`操作将是非原子的，因为会导致读-修改-写操作。

假设这段代码：

```
public void assign(int b) {
    int a = b;
} 
```

生成的字节码是：

```
public void assign(int);
    Code:
       0: iload_1       
       1: istore_2      
       2: return 
```

因此，我们看到分配由**两个**步骤（加载和存储）组成。

假设这段代码：

```
public void assign(int b) {
        int i = b++;
} 
```

字节码：

```
public void assign(int);
    Code:
       0: iload_1       
       1: iinc          1, 1    //extra step here regarding the previous sample
       4: istore_2      
       5: return 
```

知道 X86 处理器可以（至少是现代处理器）可以原子地操作增量操作，如下所述：

> 在计算机科学中，获取和添加 CPU 指令是一种特殊指令，可以原子地修改内存位置的内容。它用于在多处理器系统中实现互斥和并发算法，是信号量的推广。

**因此，第一个问题：**尽管字节码需要两个步骤（加载和存储），Java 是否依赖于这样一个事实，即无论处理器的体系结构如何，赋值操作都是原子执行的操作，因此可以确保永久的原子性（对于原始赋值） ) 在其规范中？

**第二个问题：**确认使用非常现代的 X86 处理器并且没有跨不同架构共享编译代码，根本不需要同步`i++`操作（或`AtomicInteger`）是错误的吗？考虑到它已经是原子的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:52:08.610

即使 i++ 将转换为 X86 Fetch-And-Add 指令也不会改变任何内容，因为 Fetch-And-Add 指令中提到的内存是指 CPU 的本地内存寄存器，而不是设备/应用程序的通用内存. 在现代 CPU 上，此属性将扩展到 CPU 的本地内存缓存，甚至可以扩展到多核 CPU 的不同内核使用的各种缓存，但在多线程应用程序的情况下；绝对不能保证此分布将扩展到线程本身使用的内存副本。

很明显，在多线程应用程序中，如果一个变量可以被同时运行的不同线程修改，那么你必须使用系统提供的一些同步机制，不能依赖指令 i++ 占用一行 java代码是原子的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T16:19:05.460

考虑**第二个问题**。

您暗示这`i++`将转换为不正确的 X86 Fetch-And-Add 指令。如果代码是由 JVM 编译和优化的，那*可能*是真的（必须检查 JVM 的源代码来确认），但是该代码也可以在解释模式下运行，其中*fetch*和*add*是分开的而不是同步的。

出于好奇，我检查了为此 Java 代码生成了哪些汇编代码：

```
public class Main {
    volatile int a;

  static public final void main (String[] args) throws Exception {
    new Main ().run ();
  }

  private void run () {
      for (int i = 0; i < 1000000; i++) {
        increase ();
      }  
  } 

  private void increase () {
    a++;
  }
} 
```

我使用`Java HotSpot(TM) Server VM (17.0-b12-fastdebug) for windows-x86 JRE (1.6.0_20-ea-fastdebug-b02), built on Apr 1 2010 03:25:33`了 JVM 版本（这是我在驱动器上某处的版本）。

这些是运行它的关键输出（`java -server -XX:+PrintAssembly -cp . Main`）：

起初它被编译成这样：

```
00c     PUSHL  EBP
    SUB    ESP,8    # Create frame
013     MOV    EBX,[ECX + #8]   # int ! Field  VolatileMain.a
016     MEMBAR-acquire ! (empty encoding)
016     MEMBAR-release ! (empty encoding)
016     INC    EBX
017     MOV    [ECX + #8],EBX ! Field  VolatileMain.a
01a     MEMBAR-volatile (unnecessary so empty encoding)
01a     LOCK ADDL [ESP + #0], 0 ! membar_volatile
01f     ADD    ESP,8    # Destroy frame
    POPL   EBP
    TEST   PollPage,EAX ! Poll Safepoint

029     RET 
```

然后它被内联并编译成这样：

```
0a8   B11: #    B11 B12 &lt;- B10 B11   Loop: B11-B11 inner stride: not constant post of N161 Freq: 0.999997
0a8     MOV    EBX,[ESI]    # int ! Field  VolatileMain.a
0aa     MEMBAR-acquire ! (empty encoding)
0aa     MEMBAR-release ! (empty encoding)
0aa     INC    EDI
0ab     INC    EBX
0ac     MOV    [ESI],EBX ! Field  VolatileMain.a
0ae     MEMBAR-volatile (unnecessary so empty encoding)
0ae     LOCK ADDL [ESP + #0], 0 ! membar_volatile
0b3     CMP    EDI,#1000000
0b9     Jl,s  B11   # Loop end  P=0.500000 C=126282.000000 
```

如您所见，它不使用`a++`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:32:49.387

关于你的第一个问题：读和写是原子的，但读/写操作不是。我找不到关于原语的具体参考，但[JLS #17.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)对参考说了类似的话：

> 对引用的写入和读取始终是原子的，无论它们是作为 32 位还是 64 位值实现的。

因此，在您的情况下， iload 和 istore 都是原子的，但整个 (iload, istore) 操作不是。

> [认为]根本不需要同步 i++ 操作是否有错？

关于您的第二个问题，下面的代码在我的 x86 机器上打印 982（而不是 1,000），这表明有些在翻译中丢失了 ==>即使在支持 fetch-and-add 的处理器架构上，`++`您也需要正确同步操作`++`操作说明。

```
public class Test1 {

    private static int i = 0;

    public static void main(String args[]) throws InterruptedException {
        ExecutorService executor = Executors.newFixedThreadPool(10);
        final CountDownLatch start = new CountDownLatch(1);
        final Set<Integer> set = new ConcurrentSkipListSet<>();
        Runnable r = new Runnable() {
            @Override
            public void run() {
                try {
                    start.await();
                } catch (InterruptedException ignore) {}
                for (int j = 0; j < 100; j++) {
                    set.add(i++);
                }
            }
        };

        for (int j = 0; j < 10; j++) {
            executor.submit(r);
        }
        start.countDown();
        executor.shutdown();
        executor.awaitTermination(1, TimeUnit.SECONDS);
        System.out.println(set.size());
    }
} 
```

# android - NV21 图像到位图的转换

> ID：13401463
> 
> 赞同：0
> 
> 时间：2012-11-15T16:05:06.570
> 
> 标签：android, image-processing, android-camera, android-image

我正在尝试将 NV21 图像从 LG 3D Android 手机转换为位图，以便我可以通过 TCP 套接字将其发送到计算机。

目前它必须经过 NV21->YUV->JPEG->ByteBuffer->Bitmap 转换，这只会杀死 CPU，有没有更好的方法来减少一些转换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:52:28.907

也许计算机可以直接接受 NV21 缓冲区？如果您坚持使用Bitmap格式，请注意Android位图与Windows位图不同。如果你在Android端需要RGB，你可以使用这里描述的recepy：[yuv to rgb in assembler](https://stackoverflow.com/questions/11102576/yuv-to-rgb-in-assembler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T20:35:25.467

您可以使用 RenderScript 直接将 NV21 转换为位图（或字节数组）。在具有 720p 图像的 SGS3 上，我能够获得大约 20 FPS。

RenderSctipt 是一个 Android 子系统，主要作为 CPU 代码的本机运行（在某些神奇的情况下甚至在 GPU 上），并且可以很好地并行化以使用所有可用的内核。

你可以在这里阅读更多关于它的信息 - [Converting camera YUV-data to ARGB with renderscript](https://stackoverflow.com/questions/13509360/converting-camera-yuv-data-to-argb-with-renderscript/20788170#20788170)

# html - UIWebView Background-Image: url('image.png') 不起作用？

> ID：13401464
> 
> 赞同：0
> 
> 时间：2012-11-15T16:05:08.320
> 
> 标签：html, objective-c, uiwebview

我正在尝试模仿 Mobile Safari 的行为并创建一个 StandardError.html 文件以在无法加载时在 webview 上显示有关错误的图像和一些文本。我在使用 Background-Image: url('image.png') css 时无法显示图像，但在使用 div 的 html 中完成所有操作时却没有。我不确定为什么一个有效而另一个失败，任何帮助将不胜感激！

附带说明一下，使用 html 使该图像居中的任何帮助都很棒！

谢谢！

编辑：HTML 到中心 url：

```
<div name="backgroundImage"> <center> <img src="image.png"/> </center> </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:16:58.740

这是我在 web 视图中加载的 HTML 页面的示例，它应该可以作为完成任务的良好指南。我使用 CSS 来定位我的元素，并使用 HTML 加载它。css 将图像水平居中在宽度为 320px（iphone 宽度）的屏幕上

```
// in css block
#product { 
    margin: 0 auto;
    position:relative; 
    width: 320px;
}

in html block
<div id="container">
    <div id="product"><img src="products-product-in-library.jpg" /></div>
</div> 
```

# android - 运行 AOSP 测试

> ID：13401465
> 
> 赞同：1
> 
> 时间：2012-11-15T16:05:12.343
> 
> 标签：android, android-source

我正在尝试运行一些 AOSP 测试，但除了 cts 之外，我无法运行任何测试。我提到我正在尝试使用模拟器来做到这一点。这是我的终端的输出：

```
manuel@banstyle:~/aosp/development/testrunner$ ./runtest.py -v core
Building tests...
about to run adb  shell cat /data/local.prop
about to run adb  shell ls -l /data/local.prop
about to run adb  root
ONE_SHOT_MAKEFILE="frameworks/base/tests/CoreTests/Android.mk" make -j16 -C "/home/manuel/aosp" all_modules 
about to run adb  shell pm list instrumentation | grep android.core/android.test.InstrumentationTestRunner
Error: adb  shell pm list instrumentation | grep android.core/android.test.InstrumentationTestRunner returned 1 error code
Could not find instrumentation android.core/android.test.InstrumentationTestRunner on device. Try forcing a rebuild by updating a source file, and re-executing runtest.
Exiting due to AbortError...
manuel@banstyle:~/aosp/development/testrunner$ ./runtest.py -v calculator
Building tests...
about to run adb  root
ONE_SHOT_MAKEFILE="packages/apps/Calculator/Android.mk" make -j16 -C "/home/manuel/aosp" all_modules 
adb push /home/manuel/aosp/out/target/product/generic/data/app/CalculatorTests.odex data/app/CalculatorTests.odex
about to run adb  push /home/manuel/aosp/out/target/product/generic/data/app/CalculatorTests.odex data/app/CalculatorTests.odex
adb install -r /home/manuel/aosp/out/target/product/generic/data/app/CalculatorTests.apk
about to run adb  install -r /home/manuel/aosp/out/target/product/generic/data/app/CalculatorTests.apk
32 KB/s (2699 bytes in 0.080s)
pkg: /data/local/tmp/CalculatorTests.apk
Failure [INSTALL_FAILED_DEXOPT]

about to run adb  shell pm list instrumentation | grep com.android.calculator2.tests/android.test.InstrumentationTestRunner
Error: adb  shell pm list instrumentation | grep com.android.calculator2.tests/android.test.InstrumentationTestRunner returned 1 error code
Could not find instrumentation com.android.calculator2.tests/android.test.InstrumentationTestRunner on device. Try forcing a rebuild by updating a source file, and re-executing runtest.
Exiting due to AbortError...
manuel@banstyle:~/aosp/development/testrunner$ 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T15:20:27.180

当我尝试 4.2.2 时，我也遇到了同样的问题。但是，我在 4.3 上工作时没有问题。谷歌搜索后，我意识到问题是由 apk 和 odex 引起的。在 4.2.2 中，测试被编译成 apk 和 odex，这意味着 apk 不包含 classes.dex。odex 文件包含所有类。当你只“adb install apk”时，这实际上会导致失败，因为 pm 找不到 classes.dex。

解决这个问题的方法是`LOCAL_DEX_PREOPT := false`在 Android.mk 中添加。这会将 dex 放回 apk。我已经在 4.2.2 full-eng 中尝试过了。

该线程还提供了一些信息。[https://groups.google.com/forum/#!topic/android-building/OrBJsS2J3sw](https://groups.google.com/forum/#!topic/android-building/OrBJsS2J3sw)

# c++ - 为什么这个 constexpr 代码会导致 GCC 吃掉我所有的 RAM？

> ID：13401466
> 
> 赞同：8
> 
> 时间：2012-11-15T16:05:13.173
> 
> 标签：c++, gcc, c++11, metaprogramming, constexpr

以下程序将调用*fun* 2 ^ (MAXD + 1) 次。不过，最大递归深度不应该超过 MAXD（如果我的想法是正确的）。因此编译可能需要一些时间，但它不应该吃掉我的 RAM。

```
#include<iostream>

const int MAXD = 20;

constexpr int fun(int x, int depth=0){
  return depth == MAXD ? x : fun(fun(x + 1, depth + 1) + 1, depth + 1);
}

int main(){
  constexpr int i = fun(1);
  std::cout << i << std::endl;
} 
```

问题是吃我的内存正是它的作用。当我将 MAXD 提高到 30 时，我的笔记本电脑在 GCC 4.7.2 快速分配 3 GB 左右后开始交换。我还没有尝试使用 clang 3.1，因为我现在无法访问它。

我唯一的猜测是，这与 GCC 试图过于聪明并记住函数调用有关，就像它对模板所做的那样。如果是这样，他们没有限制他们做多少记忆似乎并不奇怪，比如 MRU 缓存表的大小或其他什么？我还没有找到禁用它的开关。

我为什么要这样做？我正在考虑制作一个高级编译时库的想法，比如基因编程之类的。由于编译器没有编译时尾调用优化，我担心任何循环都需要递归并且（即使我调高最大递归深度参数，这看起来有点难看）会快速分配我所有的 RAM 并填充它带有毫无意义的堆栈帧。因此，我想出了上述解决方案，用于在没有深堆栈的情况下获得任意多个函数调用。这样的功能可用于折叠/循环或蹦床。

编辑：现在我已经在clang 3.1中尝试过了，它根本不会泄漏内存，无论我让它工作多长时间（即我做MAXD多高）。CPU 使用率几乎是 100%，内存使用率几乎是 0%，正如预期的那样。也许这只是 GCC 中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:30:08.580

这可能不是关于 constexpr 的最终文档，但它是从[gcc constexpr wiki 链接到的主要文档。](http://gcc.gnu.org/wiki/Constexpr)

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2235.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2235.pdf)

...它说...

> 我们（仍然）禁止常量表达式中所有形式的递归。这并不是绝对必要的，因为在常量表达式求值中对递归深度的实现限制将使我们免于编译器永远递归的可能性。然而，在我们看到一个令人信服的递归用例之前，我们不建议允许它。

所以，我希望你遇到语言边界和 gcc 选择实现 constexpr 的方式（可能试图内联生成整个函数，然后评估/执行它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:39:20.513

您的答案在您的评论中“通过运行函数运行时并观察到虽然我可以让它运行很长时间”，这是由您对 fun(x + 1, depth + 1) 的内部最递归调用引起的。

当您通过删除 constexpr 将其更改为运行时函数而不是编译时函数并观察到它运行了很长时间时，这表明它正在非常深入地递归。

当编译器执行该函数时，它必须深度递归，但不使用堆栈进行递归，因为它实际上并没有生成和执行机器代码。

# sql - 如何使用从两个表中选择来更新我已经找到的行列表

> ID：13401469
> 
> 赞同：1
> 
> 时间：2012-11-15T16:05:29.187
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我能够使用以下代码找到需要更新的行。old_pris 将使用 new_pris 进行更新。在更新和插入操作方面，我总是退后一步。据我所知，我可以在下面插入和选择语句以进行插入，但要进行更新！！。只是看看是否有我应该考虑调查的东西。

```
SELECT  o.no as old_no 
      ,o.name as old_name 
      ,n.kid as new_kid     
      ,o.aPris  as old_pris
       ,n.pro_pris as new_pris   

      ,n.id as new_id 

  FROM [db1].[dbv].[tb1] n 
  left join db1.dbv.tb2  o
  on n.barcode =o.code 
   where 
  o.code =n.barcode 
  and o.no !='' 
  and n.barcode !=''
  and o.code!='' 
```

选择术语混合在一起，让您知道我正在处理的表格的内容。我只需要通过 new_pris 更新 old_pris，但 join 和 where 条件保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:07:55.237

你可以[**`UPDATE`**](http://msdn.microsoft.com/en-us//library/ms177523.aspx)这样`JOIN`：

```
UPDATE o
SET o.aPris = n.pro_pris,
    ...
  FROM [db1].[dbv].[tb1] n 
  left join db1.dbv.tb2  o
  on n.barcode =o.code 
   where 
  o.code =n.barcode 
  and o.no !='' 
  and n.barcode !=''
  and o.code!=' 
```

# wpf - WPF 中的 3D 线框

> ID：13401475
> 
> 赞同：0
> 
> 时间：2012-11-15T16:05:45.683
> 
> 标签：wpf, vb.net, 3d, wireframe

我想创造这样的东西

```
 o---o---o
 |   |   |
 o---o---o
(o are points, -- | are lines) 
```

简而言之，一个线框。我有一堆我知道坐标的点，现在我想将它们连接起来形成一个线框。我对 wpf 真的很陌生，不知道如何开始。有没有人有想法。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:48:25.467

免费的 Helix 3D 工具包 ( [http://helixtoolkit.codeplex.com](http://helixtoolkit.codeplex.com) ) 是 WPF 3D 的良好开端。

# javascript - Javascript回调方法没有被调用？

> ID：13401478
> 
> 赞同：-1
> 
> 时间：2012-11-15T16:05:48.680
> 
> 标签：javascript, callback

我正在尝试使用右键创建一个可重用的 Header 对象。我在单击按钮时的回调方法有问题。它从来没有被调用过。

我的对象：

```
myHeader:function(params)   
{       
    opt = {
        title: "Title",  //header tittle
        fs: PrecApp.DEFAULT_HEADER_FONTSIZE, //font size
        ignoreStack :true, //ignore stack
        height: "70", //header height
        rightButton: {
            show :false, //show right button
            background: "none", //background for right button
            text: "Button", //text for right button
            width: "auto",
            height:"auto",              
            color:"black",
            fontize:1,
            extraCss: null,
            onClick:function(){}
        }
    }
for (i in params) opt[i] = params[i];

    if (opt.rightButton.show){
        var right = $("#header .right");            
        right.click(opt.rightButton.onClick);           

    }       
} 
```

在我的 html 中：

```
function updateLayout(){
                PrecAppComponents.myHeader({
                    title:"My Title",
                    fs:1.5,
                    height:50,
                    rightButton:{
                        show:true,
                        background:"#ffff00",
                        text:"Right",
                        width:70,
                        height:30,
                        fontsize:1.1,
                        extraCss: {"float":"left", "font-size":"0.5em"},
                        onClick: PrecAppComponents.toggleDarkOverlay(true)

                    }
} 
```

其他一切工作正常。如果我更换

```
right.click(opt.rightButton.onClick); 
```

和

```
 right.click(function(
  console.log("clicked")
)); 
```

它工作正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:12:11.887

看起来您的 onClick 选项正在调用一个函数。除非该调用返回另一个函数，否则这将不起作用：

```
onClick: PrecAppComponents.toggleDarkOverlay(true) 
```

您必须将其更改为：

```
onClick: function() {
  PrecAppComponents.toggleDarkOverlay(true);
}

// or with bind, perhaps

onClick: PrecAppComponents.toggleDarkOverlay.bind(PrecAppComponents, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:16:45.413

似乎`PrecAppComponents.toggleDarkOverlay(true)`不*返回*要作为事件处理程序调用的函数-您立即执行它。您将需要使用

```
function(e) {
    PrecAppComponents.toggleDarkOverlay(true);
} 
```

或者

```
PrecAppComponents.toggleDarkOverlay.bind(PrecAppComponents, true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:13:08.407

尝试封装在匿名函数中：

```
right.click(function(){opt.rightButton.onClick();}); 
```

# jquery - 添加新行时获取总数，删除行时减少

> ID：13401483
> 
> 赞同：0
> 
> 时间：2012-11-15T16:06:04.027
> 
> 标签：jquery

我正在我的表中进行一些操作，因此如果用户添加新行，则可以设置数量、单价，并且自动计算总数。这发生在每一行。我试图在添加每一行时累积表格下方的总数。否则在删除一行时应该减少。

到目前为止，我只得到我正在设置的行的总值。

```
$('.tablePuc, .tablePus, .tableQuantity').live('keyup', function () {
    var $row = $(this).closest('tr'); // all based on parent row
    var unitPc = $row.find('.tablePuc').val();
    var unitPs = $row.find('.tablePus').val();
    var qty = $row.find('.tableQuantity').val();
    var imp = 0.21;
    var totalSimp = unitPs * qty;
    var totalCimp = unitPc * qty + ((unitPc * qty) * imp);
    if (totalCimp) {
        $row.find('.tableTotal').val(totalCimp);
    } else if (totalSimp) {
        $row.find('.tableTotal').val(totalSimp);
    }
    $('#labelResult').html(totalSimp);
    $('#labelResult2').html(totalCimp);
}); 
```

可以在这个[小提琴上看到例子](http://jsfiddle.net/6q6mb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:14:27.233

.live 应该被删除并使用 .on 代替！

除此之外：

```
var rowCount = $('#table_id >tbody >tr').length;  //rowCount = number of rows of the table tbody! 
```

您可以在每次添加/删除后使用它来重新计算总行数，或者将其存储在变量中并根据需要增加/减少它。我可能每次都重新计算它，因为桌子不大。

你也可以这样使用它：

```
sum=0;
$('#table_id >tbody >tr').children().eq(n).each(function(){ //n is the row column where u want to get the data
     sum+=$(this).val();
}); 
```

如果你想一次性完成所有的行子：

```
sum=[];
$('#table_id >tbody >tr').each(function(){
     x=0; 
     $(this).children().each(function(){ 
         sum[x]+=$(this).val();
         x++;
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:23:07.070

您应该遍历表中的所有行......这样的东西应该可以工作：

```
$('table').on('keyup', '.tablePuc, .tablePus, .tableQuantity', updateTotal);

function updateTotal() {
    var totalSimpGlobal = 0;
    var totalCimpGlobal = 0;

    $("#tableSo").find("tr:gt(0)").each(function() {
        var $row = $(this); // all based on parent row
        var unitPc = $row.find('.tablePuc').val();
        var unitPs = $row.find('.tablePus').val();
        var qty = $row.find('.tableQuantity').val();
        var imp = 0.21;
        var totalSimp = unitPs * qty;
        totalSimpGlobal += totalSimp;
        var totalCimp = unitPc * qty + ((unitPc * qty) * imp);
        totalCimpGlobal += totalCimp;
        if (totalCimp) {
        $row.find('.tableTotal').val(totalCimp);
        } else if (totalSimp) {
            $row.find('.tableTotal').val(totalSimp);
        }

    });

    $('#labelResult').html(totalSimpGlobal);
    $('#labelResult2').html(totalCimpGlobal);
} 
```

更新小提琴：http: [//jsfiddle.net/3zV2G/3](http://jsfiddle.net/3zV2G/3)。

* * *

**编辑**

我已经更新了第一行以处理新行。

# ios - UIView 动画未按预期工作

> ID：13401487
> 
> 赞同：1
> 
> 时间：2012-11-15T16:06:32.853
> 
> 标签：ios, uiimageview, uiviewanimation

我有两个`UIImageView`填充视图控制器，第一个填充上半部分，第二个填充下半部分。我直接在故事板文件中设置它们。

在该`viewDidLoad`方法中，我正在设置代码以便为两者执行动画`UIImageView`，使其看起来像一个打开的篮子（第一个`UIImageView`移动到顶部直到它离开视图，第二个`UIImageView`移动到底部直到它离开视图）。

到目前为止，这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    CGRect basketTopFrame = self.basketTop.frame;
    basketTopFrame.origin.y = -basketTopFrame.size.height;

    CGRect basketBottomFrame = self.basketBottom.frame;
    basketBottomFrame.origin.y = self.view.bounds.size.height;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelay:1.0];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

    self.basketTop.frame = basketTopFrame;
    self.basketBottom.frame = basketBottomFrame;

    [UIView commitAnimations];

} 
```

但行为与我预期的不同，顶部框架没有移动，底部框架从左上角到底部动画（原点位置，而不是移出视图）。

这是`UIImageViews`我在情节提要中设置的位置： ![在此处输入图像描述](../Images/270d28a95c1ff0b9ebb3a2939bf3018e.png)

这是`UIImageViews`我启动应用程序的时间：

![在此处输入图像描述](../Images/fa97d175cc465cba346ea35ed7051300.png)

这是`UIImageViews`应用程序完成动画的时间（`viewDidLoad`）： ![在此处输入图像描述](../Images/e3df030c8378adfb0f8f375341575704.png)

请注意，此代码在 Xcode 4.2 中有效，但自从升级到 Xcode 4.5 并使用 Storyboard 后，我开始遇到此问题。提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:14:13.487

您可能在情节提要上启用了自动布局。在这种情况下，视图组件在 viewDidLoad 处将没有有效的帧值，因此您的代码将无法工作。

您可以通过在情节提要中选择文件检查器并取消选中“使用自动布局”来禁用自动布局。

无论如何，这是开始动画的错误方法。尝试将代码移动到 viewDidAppear。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:47:35.280

一旦你关闭了“自动布局”，并且如果你的目标是 IOS 4 及之后的基于块的 UIView 动画，Apple 建议你这样做，因为它简化了流程，你可以在一行中完成。请查看[UIView 参考](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)以获取更多信息。

在您的情况下，无论您打算在 ViewDidLoad / ViewWillAppear 中制作动画，都可以使用基于块的动画通过以下方式完成：

```
CGRect basketTopFrame = self.boxTop.frame;
CGRect basketBottomFrame = self.boxBottom.frame;

[UIView animateWithDuration: 0.5 delay:0.1 options:UIViewAnimationOptionCurveEaseOut animations:^{
    [self.boxTop setFrame:CGRectMake(basketTopFrame.origin.x, -basketTopFrame.size.height, basketTopFrame.size.width, basketTopFrame.size.height)];

    [self.boxBottom setFrame:CGRectMake(basketBottomFrame.origin.x, self.view.bounds.size.height, basketBottomFrame.size.width, basketBottomFrame.size.height)];

} completion:^(BOOL finished) {
    // TODO : Do any additional stuffs.
}]; 
```

# ruby-on-rails - Rails 渲染子动作 gem

> ID：13401490
> 
> 赞同：2
> 
> 时间：2012-11-15T16:06:38.363
> 
> 标签：ruby-on-rails, ruby

这是我对 Rails 的问题。

有时页面上有独立的块（例如“最新消息”）与当前控制器或动作没有逻辑关系。`@news = News.latest`在常规的 Rails MVC 堆栈中，我会在我的控制器和`render 'shared/latest_news', news: @news`视图中编写。然而，出于几个原因，它对我来说太多了。相反，我想`render 'shared/latest_news', locals_call: "NewsController#latest"`在视图中写，就是这样。这一行后面应该发生的是调用“NewsController#latest”方法来接收渲染此模板时使用的本地哈希。

有谁知道这种电话的宝石？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:23:19.980

您可以在 ApplicationHelper 中创建一个通用辅助方法：

```
def latest_news_tag
  render partial: 'shared/latest_news', locals: { news: News.latest }
end 
```

您可以在任何您想要的视图中调用此方法，例如`<%= latest_news_tag %>`.

# c# - 在 ASP.NET 中显示消息框或确认框的最佳方式

> ID：13401491
> 
> 赞同：1
> 
> 时间：2012-11-15T16:06:39.143
> 
> 标签：c#, asp.net, sharepoint, dialog, custom-action

大约一年以来，我每天都遇到对消息框的需求，我尝试了 jQuery 插件，JavaScripts alert 但仍然不确定哪种方式是最好的方式。

我想在 ASP.NET 页面（实际上它的共享点应用程序页面）中显示一个消息框。

```
<%@ Page Language="C#" MasterPageFile="~/_layouts/abc/simple.master"  Inherits="Microsoft.SharePoint.WebControls.LayoutsPageBase" %>
<%@ Assembly Name="Microsoft.SharePoint.ApplicationPages, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c"%> 
<%@ Import Namespace="Microsoft.SharePoint.ApplicationPages" %> 
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Register Tagprefix="Utilities" Namespace="Microsoft.SharePoint.Utilities" Assembly="Microsoft.SharePoint, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
<%@ Import Namespace="Microsoft.SharePoint" %>
<%@ Import Namespace="System" %>

<script runat="server">

    protected void Page_Load(object sender, EventArgs e)
    {
        string a= aa(Request.UrlReferrer.ToString());
        string b= bb(Request.UrlReferrer.ToString());

        mm(a, b);

        Uri uu= Request.UrlReferrer;
        if (uu!= null)
            Response.Redirect(uu.ToString());

        System.Web.HttpContext.Current.Response.Write("alert(\"write here what you want\")");
    } 
```

现在它不起作用，但它可能是一些语法错误，但如果我想显示一个正确的消息框（例如 jquery 的插件[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)以它不做的方式刷新到页面）我能做什么。

实际开发的是 SharePoint 文档库的自定义操作。

> **编辑**
> 
> 我已经解释过的摘要是在 SharePoint 2007 中我必须在大多数时候（服务器端）开发/设计或使用消息框插件代码，例如在 C# 后面的 ASP.NET 代码中。现在我看到了数十个问题，但实际上没有一个问题是根据最佳实践给出适当的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:35:12.100

您不能在服务器中引发 MessageBox。您必须编写代码，以便客户端 HTML+JS 在需要时发出警报。如果您需要一些确认页面，则需要构建页面并在用户按“是”或“否”时将结果发布回来

# c# - FileStream/StreamWriter 如果另一个用户打开了文件

> ID：13401492
> 
> 赞同：1
> 
> 时间：2012-11-15T16:06:40.313
> 
> 标签：c#, io, streamwriter

当用户提交信息时，我正在将数据写入日志文件。办公室内的其他用户可能需要查看此日志文件，但我无法继续写入日志文件，因为如果办公室用户打开了文件，则会提交更多信息。即使另一个用户打开了文件的实例，是否有办法继续写入文件？

```
using(StreamWriter writer = new StreamWriter(@"\\filelocation\filename.csv"))
{
     writer.WriteLine("Testing, testing");

     writer.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:28:35.437

如果您需要继续创建日志文件，我可以建议使用 Trace 吗？您可以像这样将“侦听器”附加到 Trace。

```
Trace.Listeners.Add(new TextWriterTraceListener("myfilename.txt")); 
```

当然，如果你给它传递一个文件名，它不会自动刷新，在文件关闭或缓冲区填满之前，文件中不会有任何内容。因此，您可以在程序开始时创建流。

```
FileInfo fi = new FileInfo("myLogFile.txt");
StreamWriter _sw;

void Main()
{
    _sw = fi.CreateText();
    _sw.AutoFlush = true;
    Trace.Listeners.Add(new TextWriterTraceListener(sw));
}

void Close()
{
    if(_sw != null)
    {
        _sw.Flush();
        _sw.Dispose();
    }
} 
```

然后在您的程序中，您可以直接执行此操作，而不是为每次写入“日志”打开和关闭文件。

```
Trace.WriteLine("My message here"); 
```

Trace 也有一个很酷的东西，叫做类别，它非常适合日志......

```
Trace.WriteLine("My message here", "INFO");

//Output:
//INFO: My message here 
```

我发现的一件事是，在某些系统上，您无法打开文本文件，但您可以复制它以打开，原始文件将继续填充。

# javascript - 组织大列表结构和 jquery 以淡入淡出项目

> ID：13401502
> 
> 赞同：1
> 
> 时间：2012-11-15T16:07:06.830
> 
> 标签：javascript, jquery, html, css, ajax

我正在开发的网站中有三个这样的列表：

```
 <ul class="sublist first_sublist_b">
        <li><a href="javascript:void(0)">Item Title 1</a></li>
        <li><a href="javascript:void(0)">Item Title 2</a></li>
        <li><a href="javascript:void(0)">Item Title 3</a></li>
        <li><a href="javascript:void(0)">Item Title 4</a></li>
        <li><a href="javascript:void(0)">Item Title 5</a></li>
        <li><a href="javascript:void(0)">Item Title 6</a></li>
        <li><a href="javascript:void(0)">Item Title 7</a></li>
        <li><a href="javascript:void(0)">Item Title 8</a></li>
        <li><a href="javascript:void(0)">Item Title 9</a></li>
        <li><a href="javascript:void(0)">Item Title 10</a></li>
        <li><a href="javascript:void(0)">Item Title 11</a></li>
        <li><a href="javascript:void(0)">Item Title 12</a></li>
        <li><a href="javascript:void(0)">Item Title 13</a></li>
        <li><a href="javascript:void(0)">Item Title 14</a></li>
        <li><a href="javascript:void(0)">Item Title 15</a></li>
    </ul> 
```

每个“li”都会在像这样的隐藏 div 中淡出：

```
<div class="product_box">
    <h3>Item Title 1</h3>
    <p>Description</p>
</div> 
```

问题是我不知道**构建这个的最佳方式**是什么，请记住三个列表有 15 个项目，所以总共有 45 个项目。我应该将每个**项目 div 放在每个 "li" 中**吗？我怎样才能用jquery解决这个问题？

编辑：product_box div 将出现在列表下方，而不是模式窗口或“li”内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:19:17.427

```
<ul class="sublist first_sublist_b">
    <li><a href="javascript:void(0)">Item Title 1</a></li>
    <li><a href="javascript:void(0)">Item Title 2</a></li>
    .....

</ul>

<div class="product_box_wrapper">
    <div class="product_box">Item description 1</div>
    <div class="product_box">Item description 2</div>
    ......
</div> 
```

JavaScript：

```
jQuery(function($) {
    $(".first_sublist_b a").on("click", function() {
        var index = $(this).parent().index(); // li index in ul;

        $(".product_box_wrapper .product_box").eq(index).fadeIn(500);
        /**
        * You can add fadeOut to the siblings:
        * .siblings().fadeOut();
        *
        * $(".product_box_wrapper .product_box").eq(index).fadeIn(500).siblings().fadeOut();;
        */
    });
}); 
```

# c# - 问题循环遍历从 ASP.NET MVC 控制器返回的数据

> ID：13401504
> 
> 赞同：2
> 
> 时间：2012-11-15T16:07:12.040
> 
> 标签：c#, asp.net-mvc

当试图遍历从控制器返回的视图中的数据时，我得到一个错误“'object'不包含'CustomerID'的定义并且没有扩展方法'CustomerID'接受'object'类型的第一个参数可以被发现”

这是我的看法

```
<% using (Html.BeginForm()) {%>

    <%foreach (var item in (IEnumerable)Model)
      { %>
      <%= Html.Encode(item.CustomerID) %>

    <%} %>

 <% } %> 
```

这是控制器：

```
public ActionResult Index()
        {
            Models.NorthwindDataContext nw = new Models.NorthwindDataContext();

            var qry = from ord in nw.Orders
               join cust in nw.Customers on ord.CustomerID equals cust.CustomerID
               select new Models.OrdersModel
                      {
                          CustomerID = ord.CustomerID,
                          OrderID = ord.OrderID,                          
                          OrderDate = ord.OrderDate.Value,
                          ShipCountry = ord.ShipCountry
                      };
            var ordrs = qry.ToList();
                          return View(ordrs);

        } 
```

这是我的课

```
public class OrdersModel
    {
        [Required]
        [Display(Name = "OrderID")]
        public int OrderID { get; set; }

        [Required]   
        [Display(Name = "OrderDate")]
        public DateTime OrderDate { get; set; }

        [Required]
        [Display(Name = "CustomerID")]
        public string CustomerID { get; set; }

        [Display(Name = "ShipCountry")]
        public string ShipCountry { get; set; }  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:13:46.453

```
<%foreach (var item in (IEnumerable<OrdersModel>)Model)
      { %>
      <%= Html.Encode(item.CustomerID) %>

    <%} %> 
```

没有出现`CustomerID`是因为你没有为你的`IEnumerable`演员提供类型。

.NET 尽其所能，将每个项目视为`object`不包含`CustomerID`属性的 .

**编辑：**

受 Jan 的评论的启发，这就是我实际去做的方式。

创建一个更好的模型，其中 Orders 是视图模型的一个属性。

```
public class OrderListVM 
{
  public List<OrdersModel> Orders { get; set; }

  // The benefit of using this model is you can include extra stuff here.
} 
```

然后在你的控制器中： -

```
var vm = new OrderListVM { Orders = qry.ToList() };

return View(vm); 
```

正如 Jan 所说，确保视图是强类型的，并准备好接受 OrdersListVM 作为其类型。

您可以通过查看 .aspx 页面中的 page 指令来检查这一点。

```
<%@ Page Title="" 
    Language="C#" MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<YourNameSpace.OrderListVM>" %> 
```

最后，将您的标记更改为：-

```
<%foreach (var item in Model.Orders)
      { %>
      <%= Html.Encode(item.CustomerID) %>

    <%} %> 
```

一切都将具有正确的类型，如果您需要在视图中放置除裸订单列表之外的任何其他内容，则可以将其放入容器中。

# node.js - 如何在 Node.JS 中不建立缓冲区的情况下通过管道传输文件？

> ID：13401509
> 
> 赞同：2
> 
> 时间：2012-11-15T16:07:33.660
> 
> 标签：node.js

我正在使用 Node.JS 代理文件上传到远程端点，并且需要确保我的 Node 服务器不会过度缓冲文件。

我使用`res.write`以下方式推送：

```
apiRes.on('data', function (chunk) {
    body += chunk;
    res.write(chunk);
}); 
```

（从客户端到节点的连接比从节点到远程的连接要快）。

请注意，客户端是浏览器，如果不清楚的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:26:20.793

[Node.js API 文档](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)

```
apiRes.pipe(res); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:29:37.067

*   [在FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)的帮助下使用 xhr.send 文件。
*   按照 Dream707 的建议使用 apiRes.pipe(res)

# neo4j - Spring Data Neo4j - 如何将 NodeEntity 连接到参考节点 0？

> ID：13401511
> 
> 赞同：1
> 
> 时间：2012-11-15T16:07:43.617
> 
> 标签：neo4j, spring-data-neo4j, spring-data-graph

我想要一个 Neo4j 图，其中所有内容都连接到参考节点（node0）。我的想法是将node0连接到“类类型”节点（rootNode），然后将某个类的所有节点连接到它。例如：

```
node0 --> unique RootUser --> many User 
```

我正在使用 SpringNeo4j，所以我用`@NodeEntity`. 我不知道如何在 Spring 中将 node0 连接到 RootUser。我试图在 RootUser 类中添加以下内容，但它不起作用（referenceNode 来自`neo4jTemplate.getReferenceNode()`）：

```
@RelatedTo(type = "partition", direction = Direction.INCOMING)
    private Node referenceNode; 
```

实现这种架构的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:31:57.193

最终将起作用的是手动将参考节点连接到弹簧数据实体：

```
RelationshipType relationshipType = ...; // Whatever...

RootUser rootUser = new RootUser();
rootUser.persist();
neo4jTemplate.getReferenceNode().createRelationshipTo(rootUser.getPersistentState(), relationshipType); 
```

您可以尝试为引用节点声明一个类：

```
@NodeEntity
public class ReferenceNode {
}

@NodeEntity
public class RootUser {
    @RelatedTo(type = "partition", direction = Direction.INCOMING)
    private ReferenceNode referenceNode;

    public void setReferenceNode(ReferenceNode referenceNode) {
        this.referenceNode = root;
    }
} 
```

...并加载并设置参考节点：

```
ReferenceNode referenceNode = neo4jTemplate.load(neo4jTemplate.getReferenceNode(), ReferenceNode.class);
RootUser rootUser = new RootUser();
rootUser.persist();
rootUser.setReferenceNode(referenceNode); 
```

这是未经测试的，我不确定这`neo4jTemplate.load()`部分是否有效。

# ruby - 使用 /.* 有什么好处？/

> ID：13401514
> 
> 赞同：10
> 
> 时间：2012-11-15T16:07:52.493
> 
> 标签：ruby, regex, cucumber

在一些 Rails 代码（黄瓜功能的步骤定义、javascripts、`rails_admin`gem）中，我发现了这个正则表达式部分：

```
string =~ /some regexp.+rules should match "(.*?)"/i 
```

我确实对正则表达式有一些了解，我知道`*`和`?`符号是相似的，但星号表示`zero and more`，问号表示`could be present or could be not`。

因此，在符号组附近使用问号使得在被测试的短语中**不需要它的存在。**什么是......嗯......在不需要的已经组附近使用它的技巧（使用星号 afaik 进行跳过要求）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T16:09:54.140

在量词（如`*`）之后，`?`具有不同的含义并使其“不贪婪”。因此，虽然默认是`*`尽可能多地消耗，但尽可能`*?`少地匹配。

在您的特定情况下，这与以下字符串相关：

```
some regexp rules should match "some string" or "another" 
```

没有问号，正则表达式匹配完整的字符串（因为可以像其他任何东西一样`.*`消费）并被捕获。使用问号，匹配会尽快停止，（所以在 之后）并且只会捕获。`"``some string" or "another``...some string"``some string`

[进一步阅读。](http://www.regular-expressions.info/repeat.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T16:11:33.043

`?`有双重意义。

```
/foo?/ 
```

意味着最后一个`o`可以出现零次或一次。

```
/foo*?/ 
```

表示最后一个`o`将出现零次或多次，但选择最小的次数，即它是非贪婪的。

这些可能有助于解释：

```
'foo'[/foo?/]   # => "foo"
'fo'[/foo?/]    # => "fo"
'fo'[/foo*?/]   # => "fo"
'foo'[/foo*?/]  # => "fo"
'fooo'[/foo*?/] # => "fo" 
```

`non-greedy`我认为使用`?`是不幸的。他们重用了一个我们期望具有单一含义“零或一”的运算符，并以一种很难破译的方式将其扔给我们。

但是，需求是真实的：太多次我们编写的模式会大错特错，吞噬眼前的一切，因为正则表达式引擎正在使用无法预料的字符模式执行我们所说的操作。正则表达式可能非常复杂和令人费解，但“非贪婪”的使用`?`有助于驯服这一点。有时，使用它是一种草率或快速的方法，但我们没有时间重写模式来正确地做到这一点。有时它是灵丹妙药，而且很优雅。我认为这取决于您是否在截止日期之前并编写代码来完成某事，或者您在事实发生多年后进行调试并最终发现这`?`不是最佳解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T16:09:47.870

它使搜索[不贪婪](http://robertpyke.blogspot.ch/2009/02/ruby-regex-non-greedy-operator-using_05.html)。这意味着，它将满足于最短的匹配，而不是最长的匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T16:13:43.410

考虑这个字符串

`"<person>1</person><person>2</person>"`

正则表达式

`<person>.*</person>`会匹配`<person>1</person><person>2</person>`

所以，`.*`是**贪心**..

正则表达式

`<person>.*?</person>`将匹配`<person>1</person>`并`<person>2</person>`在下一场比赛中

所以，`.*?`是**懒惰**..

# c++ - 下面的宏可能会给应用程序带来什么问题？

> ID：13401518
> 
> 赞同：1
> 
> 时间：2012-11-15T16:07:57.797
> 
> 标签：c++, c, macros

下面的宏会带来问题吗？

```
#define sq(x) x*x 
```

如果是，那么如何以及为什么？请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T16:11:29.050

是的，它可能会出现问题。除了宏根本不尊重命名空间这一明显事实（这意味着您不能调用其他任何东西`sq`）之外，请尝试以下操作：

```
int result = sq(4) / sq(4); 
```

你应该`x * x`用括号括起来，这样它就变成了`((x) * (x))`。

另一个问题：

```
int a = 0;
int result = sq(++a); 
```

这是宏的固有问题，也是应该首选内联函数的原因之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T16:15:24.503

我不会给你一个直接的答案（这看起来像是一个家庭作业问题），但我会给你一个例子，希望能让你思考并得出一个正确的答案：

```
#include <iostream>

#define sq_macro(x) x * x

int sq_function(int x)
{
    return x * x;
}

int print_and_ret(int x)
{
    std::cout << x << '\n';
    return x;
}

int main()
{
    std::cout << "Calling sq_macro:\n";
    sq_macro(print_and_ret(10));

    std::cout << "Calling sq_function:\n";
    sq_function(print_and_ret(10));
} 
```

当您运行程序时，宏和函数会给出两种不同的行为。想想什么是宏，什么是函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T16:15:50.020

编写宏时过度使用括号。重写宏如下

```
#define sq(x) ((x)*(x)) 
```

如果您不这样做，那么在将宏用作`sq(5+4)`

要了解问题，请做宏扩展并查看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T16:13:04.647

正如所指出的，您应该将参数的每次使用都括在括号中以确保正确的行为，例如，当参数类似于`i * 2`：

```
#define sq(x) ((x)*(x)) 
```

但还有另一个潜在问题。考虑以下：

```
result = sq(++i); 
```

这被翻译成：

```
result = ((++i)*(++i)) 
```

当意图可能`i`只增加一次时，它会增加两次。这是宏的常见副作用。

一种方法是在调用它时注意这一点，但更好的方法是放入`sq()`它自己的内联函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T16:11:15.043

所有这些都可能导致麻烦：

```
int x = 12;
int n = sq(x+3);
int y = sq(x++);
int z = 2 * sq(2 + n) * n; 
```

与一个函数相比`sq`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T16:12:57.970

一方面，运算符优先级会被打乱：

```
sq(2+2); // author wants 4*4, but gets 2+2*2+2\. 
```

# version-control - Perforce 即将集成未更改的文件

> ID：13401520
> 
> 赞同：1
> 
> 时间：2012-11-15T16:08:06.393
> 
> 标签：version-control, perforce

我使用 P4V Windows 客户端将更改从我自己的分支集成到主线。解析文件后，P4V 仍然在集成更改列表中显示几个文件，尽管这些文件在两个分支上是相同的，而且我从未在我的分支上提交过它们。在环顾四周和谷歌搜索时，我发现了一些模糊的提示，例如[这个问题](https://stackoverflow.com/questions/4800814/should-i-submit-unchanged-files-to-perforce)，但是阅读了这些我仍然无法理解发生了什么。你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:32:03.853

对支线和主线分别进行的独立编辑可能具有相同的内容。然后，在从一条线集成到另一条线之后，结果不会有任何差异，但提交它仍然很有用，因为它记录了将来您已经查看了更改并有意决定包含它们的事实在这两行中。

当您解析文件时，Perforce 合并工具会告诉您更改出现在两个代码行中，但是在您练习使用合并和解析工具之前，很难发现这些指标。

您可能需要研究这些文档以了解如何解释 P4V 在合并/解决工作期间向您显示的所有信息：[http ://www.perforce.com/perforce/doc.current/manuals/p4v/merging_files .html](http://www.perforce.com/perforce/doc.current/manuals/p4v/merging_files.html)

# grails - grails发布插件错误“找不到加载插件资源[spring.resources]的类”

> ID：13401524
> 
> 赞同：6
> 
> 时间：2012-11-15T16:08:22.223
> 
> 标签：grails, publish

当发布我使用“Realease-2.0.4”和 Grails 2.0.1 构建的特定插件时，我遇到了一个奇怪的异常，我似乎无法摆脱它。我有许多具有类似设置的插件，但没有一个会产生此异常。

```
| Error 2012-11-15 17:00:25,604 [main] ERROR plugins.DefaultGrailsPlugin  - Class not found loading plugin resource [spring.resources]. Resource skipped.
Message: spring.resources
   Line | Method
->> 202 | run       in java.net.URLClassLoader$1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   190 | findClass in java.net.URLClassLoader
|   306 | loadClass in java.lang.ClassLoader
|   247 | loadClass in     ''
|   178 | doCall .  in _PluginDependencies_groovy$_run_closure5_closure23
|   176 | doCall    in _PluginDependencies_groovy$_run_closure5
|    60 | doCall .  in _GrailsPackage_groovy$_run_closure2
|    45 | doCall    in PublishPlugin$_run_closure1
^    62 | doCall .  in     ''
| Error 2012-11-15 17:00:25,977 [main] ERROR plugins.DefaultGrailsPlugin  - Class not found loading plugin resource [spring.resources]. Resource skipped.
Message: spring.resources
   Line | Method
->> 202 | run       in java.net.URLClassLoader$1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   190 | findClass in java.net.URLClassLoader
|   306 | loadClass in java.lang.ClassLoader
|   247 | loadClass in     ''
|   178 | doCall .  in _PluginDependencies_groovy$_run_closure5_closure23
|   176 | doCall    in _PluginDependencies_groovy$_run_closure5
|    60 | doCall .  in _GrailsPackage_groovy$_run_closure2
|    45 | doCall    in PublishPlugin$_run_closure1
^    62 | doCall .  in     '' 
```

这就是堆栈跟踪的全部内容。

grails-app/conf/spring/resources 下没有定义资源。

知道我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T19:10:09.360

# 1.上下文

我正在使用 grails 2.4.3 和 java 1.7 开发一个自定义插件并在应用程序中使用它。自定义插件使用**spring-security-core**插件并添加了一些功能。该应用程序使用自定义插件并添加其他功能。这个想法是在自定义插件中设置 spring-security 和其他常见功能，并在多个项目中使用它。

当我在**conf/BuildConfig.groovy**文件中使用下一个配置运行应用程序时，没有问题：

```
...
grails.plugin.location.'author-security-plugin' = "../AuthorSecurityPlugin"
... 
```

但是，当我打包插件并将其安装在我的 Maven 本地存储库中时，使用以下命令：

```
$ grails clean
$ grails refresh-dependencies
$ grails maven-install 
```

**在conf/BuildConfig.groovy**文件中使用下一个配置：

```
dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes e.g.
    compile: ':domino-connection-lib:'
    runtime: 'postgresql:postgresql:9.2-1002.jdbc4'

    //custom plugin
    compile: "com.company:author-security-plugin:0.1"
}
...
//grails.plugin.location.'author-security-plugin' = "../AuthorSecurityPlugin"
... 
```

并执行“grails run-app”命令，项目抛出下一个异常：

```
| Packaging Grails application.....
2015-04-20 17:12:42,067 [main] ERROR plugins.DefaultGrailsPlugin  - Class not found loading plugin resource [spring.resources]. Resource skipped.
java.lang.ClassNotFoundException: spring.resources
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
at _PluginDependencies$_run_closure2.doCall(_PluginDependencies.groovy:48)
at _GrailsPackage$_run_closure2.doCall(_GrailsPackage.groovy:57)
at RunApp$_run_closure1.doCall(RunApp.groovy:28) 
```

**注意：** spring **/resources.groovy**文件包含：

```
// Place your Spring DSL code here
beans = {
    customAuthenticationProvider(CustomAuthenticationProvider){
        springSecurityService=ref('springSecurityService')
        customUserService=ref('customUserService')
    }
    ...
} 
```

# 2.解决方案

就我而言，解决方案是删除自定义插件中的 grails-app/conf/spring/resources.groovy 文件，并将其内容移动到应用程序中的 grails-app/conf/spring/resources.groovy。

我希望这可以帮助你。

# php - 使用 Codeigniter 的动态用户选项

> ID：13401528
> 
> 赞同：1
> 
> 时间：2012-11-15T16:08:29.793
> 
> 标签：php, codeigniter, pdo

我试图让我的用户选择以更多语言加载文章。我正在尝试显示用户尚未选择的可用语言列表，并在顶部选择已选择的语言供用户从他们的选项中删除。

这是我到目前为止所得到的：

```
class Options_model extends CI_Model{

    protected $options = array(
            'en' => 'English',
            'it' => 'Italiano',
            'fr' => 'Français',
            'de' => 'Deutsch',
            'es' => 'Español',
            'no' => 'Norsk',
            'ru' => 'Русский язык',
            'ar' =>'العربية',
            'zu' => '中文',
            );

    public function my_lang($user_id) {
            $sql = 
            "SELECT lang_id 
            FROM languages 
            WHERE user_id = :user_id";

            $stmt = $this->db->conn_id->prepare($sql);
            $stmt->bindParam(':user_id', $user_id);
            $stmt->execute();
            return $result = $stmt-> fetch();
    }

    public function languages($result) {
            return array_diff_key($this->options, $result);
    }
} 
```

并在我的视图文件中（为了测试，我将在控制器运行时将其中的一些放入控制器中，并添加链接以删除语言并从我的数据库中删除表）。

```
$mylang = $this->Options_model->my_lang($user_id);
print_r($mylang);
foreach ($mylang as $value) {
    echo "Value: $value<br />\n";
}

$options = $this->Options_model->languages($mylang);
echo form_dropdown('languages', $options); 
```

我的数据库结构如下：

```
| id | user_id | lang_id |
|------------------------|
| 1  | 12      | en      |
|————————————————————————| 
```

当我尝试返回我的 $myLang 变量时，我得到的只是“数组”。我无法让我的 array_diff_key 函数工作，并且 print_r 看起来完全不像我想象的那样。我只想让自己回到我的图形设计舒适区，并消除这个后端头痛。有没有更简单的方法来做到这一点？或者我应该如何编码用户选项而不看起来像个白痴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:41:35.733

我对 PDO 不是很熟悉，但我认为您应该使用 fetchAll() 而不是 fetch，因为这将获取所有语言，而不仅仅是下一行。您还想告诉它使用 FETCH_COLUMN 模式，例如

```
return $result = $stmt->->fetchAll(PDO::FETCH_COLUMN, 0); 
```

然后，这将返回您期望的所有语言的数组，然后您应该能够对其进行 array_diff_key 操作。

# php - Wordpress - 生成 PDF 的帖子

> ID：13401530
> 
> 赞同：2
> 
> 时间：2012-11-15T16:08:36.687
> 
> 标签：php, function, wordpress, pdf-generation

我已经在网上搜索了这个，但找不到代码（首选）或插件（不理想）来做我正在寻找的东西：

## **问题**

是否有一个自定义 php 函数我可以使用 OR 放置在我的`functions.php`文件中，或者使用一个 Wordpress 插件来自动生成 Wordpress 帖子的 PDF（仅限 single.php）并链接到用户可以下载的帖子中？

或者，如果有人知道如何仅在 PHP 中执行此操作，那也可以。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:09:57.260

试试这个插件：

[http://wordpress.org/extend/plugins/wp-post-to-pdf/](http://wordpress.org/extend/plugins/wp-post-to-pdf/)

Wordpress 网站有一个方便的插件搜索页面 - [http://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/) :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:13:19.717

您也可以考虑 DOMPDF：[http ://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:12:04.447

您是否考虑过尝试：[http](http://www.fpdf.org/) ://www.fpdf.org/ 。

# html - 跨域接收 XML 响应（XHR 或 Websockets）

> ID：13401532
> 
> 赞同：0
> 
> 时间：2012-11-15T16:08:40.897
> 
> 标签：html, xml, websocket, xmlhttprequest

我正在寻找一种从 Google 的广告服务 DoubleClick 中提取 XML 响应的解决方案。如果我按照自己的方式进行操作，我只会使用 XHR 来处理响应，但这违反了同源政策。所以我正在研究 websockets 作为一种替代解决方案，因为它似乎以不同的方式处理相同的来源策略。

谁能给我一些关于处理此 XML 响应客户端的最佳方法的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:15:02.427

看看[xReader](http://kincrew.github.com/xReader/)

```
<script src="http://kincrew.github.com/xReader/xReader.full.js"></script> 
<script type="text/javascript"> 
xReader("http://www.yahoo.com/", function(data) { 
    alert(data.content); 
})
</script> 
```

这很简单！

xReader 在使用 YQL 方面与其他的有所不同。xReader 未被 robots.txt 阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:12:59.967

最简单的方法是有一个本地脚本来获取这个域

```
 behold getter.php
 $url="http://service-url.com/falana-dinka.xml"
 echo file_get_contents($url) 
```

现在您可以将 XHR 发送到该文件（getter.php）并在客户端解析响应。您甚至可以处理数据并仅向客户端发送必要的内容（从而减少其负载）

如果您正在寻找的服务提供 jsonp api，您可以直接使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:29:24.243

我实际上找到了一个很棒的插件，可以处理所有客户端：[https ://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

# r - R堆积条形图

> ID：13401533
> 
> 赞同：-4
> 
> 时间：2012-11-15T16:08:43.020
> 
> 标签：r, plot, statistics

我有以下数据框：

```
Var1    Var2
FALSE   FALSE
FALSE   TRUE
TRUE    FALSE
FALSE   TRUE
FALSE   FALSE 
```

问题 1：当我们只看 1 列时，我如何生成一个简单的堆积条形图（所有的假都在真之上）？

问题 2：如何将这两个（堆叠的）条形图彼此相邻放在一个图中？

我需要这些图作为作业的一部分，并且不允许使用外部库（例如 ggplot）

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:17:55.493

您的数据：

```
dat<-read.table(text="Var1    Var2
FALSE   FALSE
FALSE   TRUE
TRUE    FALSE
FALSE   TRUE
FALSE   FALSE", header = TRUE) 
```

它适用于

```
barplot(rbind(colSums(dat), colSums(!dat))) 
```

![在此处输入图像描述](../Images/67cbdb32eea03b418369f793d5d5435d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T16:27:11.070

这些问题已经得到解答，但我还是会提供我的，因为我已经完成了这项工作。:)

```
 df<-data.frame(Var1=c(FALSE, FALSE, TRUE, FALSE, FALSE), 
                   Var2=c(FALSE, TRUE, FALSE, TRUE, FALSE))
    barplot(t(rbind(Var1=table(df$Var1), var2=table(df$Var2)))) 
```

![逻辑计数](../Images/4938a929f62e40d8952e79ce6a23612f.png)

# jquery - jQuery 播放特定的 HTML5 视频

> ID：13401534
> 
> 赞同：2
> 
> 时间：2012-11-15T16:08:49.913
> 
> 标签：jquery

我目前有一个与下面类似的 div 的站点设置。一次只能看到一个。

```
<div id="intro_page" class="sub_page">

        <div class="sub_header"><img src="assets/img/intro_header.jpg" /></div>

        <div class="video_holder">
        <div class="play_button"></div>
            <video class="video_player" autobuffer>
                <source type="video/ogg" src="assets/media/test_video.ogg">
            </video>
        </div>

        <div class="page_text"><img src="assets/img/intro_text.jpg" width="1020" /></div>

    </div><!-- /intro_page --> 
```

每个页面都有一个类似的`video_holder`div，我正在尝试在该当前 div 中播放视频。

我尝试过类似的事情，但没有运气。

```
$(".play_button").click(function() {

    $(this).fadeOut("slow");

    $(".video_player:visible").play();

}); 
```

# php - 在 Zend 框架中外部化内容

> ID：13401536
> 
> 赞同：0
> 
> 时间：2012-11-15T16:08:58.310
> 
> 标签：php, zend-framework

我想将我的内容和观点分开（我知道，这很反高潮）。我想要的是 gettext 之类的东西，我可以在视图中有一个键。类似的东西`Content_Materials_Index_Description`，然后使用类似`echo "@Content_Materials_Index_Description"`的东西来呈现我存储在单独文件中的 3-4 段内容。

我知道如何在 Java/J2EE 应用程序甚至 VB.net 中执行此操作，并且希望获得有关使用 Zend Framework 执行此操作的建议。

解释：

看法：

```
 <div id="wrapper"> 
  <a href="/Home">HomePage</a>
  <div id="content"><?echo "@content_materials_index_Description"?></div>
 </div> 
```

messageResource.ini 文件

```
content_materials_index_Description=Materials for production can be edited here. Click on the name of a material to edit it. The cross sign... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:11:34.307

您可以为此使用部分，您可以将一些参数传递给它以呈现内容，例如表格、列表等。

查看文件

```
$this->partial('path-to-partial/partial-name.phtml', array(
    'var1'=>$myVar1, 
    'var2' => $myVar2
)); 
```

部分文件

```
$this->myVar1;
$this->myVar2; 
```

除此之外，您可以使用[View helpers](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:42:49.383

这很简单，

在 IndexController.php

```
public function indexAction()
{
    //here you need to read the values from *.ini file. for ex. with Zend_Config_Ini
    $this->view->content_materials_index_Description = 'text for description....';
} 
```

在查看 index.phtml

```
<div><?php echo $this->content_materials_index_Description; ?></div> 
```

# matlab - 在 MATLAB 中比较文件

> ID：13401538
> 
> 赞同：0
> 
> 时间：2012-11-15T16:08:59.293
> 
> 标签：matlab, diff

> **可能重复：**
> [使用 MATLAB 比较文件](https://stackoverflow.com/questions/9315878/compare-files-with-matlab)

我想使用 MATLAB 比较 2 个 txt 文件并在文件不相等时打印差异

我发现 visdiff 是图形工具，但我想知道是否有一些 MATLAB 函数进行这样的比较？

如果文件之间存在差异，则仅打印 + 或 - 文件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:13:01.103

在 linux/unix 中，您可以使用 bash `diff`，`system()`在 matlab 中使用。[（相关文章）](http://blogs.mathworks.com/community/2010/05/17/calling-shell-commands-from-matlab/)

它是这样的：

```
[content_differs, printout] = system('diff --side-by-side --left-column file1 file2'); 
```

`content_differs`如果 file1 和 file2 具有相同的内容，则为 0，`printout`是一个字符串。您可以逐行访问其数据（您可以在 matlab 中使用 split 或管道其他命令）。' 可以根据中间的字符来解析差异。正如我所观察到的，“（”出于某种原因表示没有区别。“<”，“>”和“|”指的是添加和更改的行。

（您也有很多 diff 选项来显示常见内容 -[查看此链接了解详细信息](https://unix.stackexchange.com/a/1085)）

更新：

一个简单的文件解析脚本，显示所有常见部分。

```
file1 = 'your_file.m'
file2 = 'your_other_file.m';

[is_diff,output] = system(['diff --side-by-side --left-column ',file1,' ',file2]);

lines = regexp(output, '\n', 'split');

for i=1:(length(lines)-1)
    line = lines{i};
    if line(end) == '(' % common part
        disp( line(1:(end-1)) ); 
    end
end 
```

# autohotkey - 使用相同的热键打开和关闭程序（Autohotkey？）

> ID：13401541
> 
> 赞同：4
> 
> 时间：2012-11-15T16:09:14.267
> 
> 标签：autohotkey, hotkeys

我正在尝试在 Windows 中使用相同的 hokey 打开和关闭程序（例如记事本），比如说 Strg+Alt+X。因此，当程序关闭时，我希望用“X”打开它，而当它打开时，我希望用“X”关闭它。

这很容易用两个热键来完成，一个打开程序，一个关闭程序。但我不知道如何为同一个热键解决这个问题。有人能指出我正确的方向吗？也许这可以通过 Autohotkey 实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:39:27.140

我相信这就是您正在寻找的。`StartClose`如果您还想为其他应用程序制作热键，我已经创建了该方法以供将来使用。您可以使用 Window Spy 找到窗口标题和类，可以通过右键单击 AutoHotkey 托盘图标找到。

```
x::StartClose("ahk_class Notepad", "notepad.exe")

StartClose(title, exe)
{
    IfWinExist, %title%
        WinClose
    else
    {
        Run, %exe%
        WinActivate
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:18:13.810

Elliot 的回答为我指明了正确的方向（我对`AutoHotKey`语法完全陌生）。他的方法使用窗口标题，该标题适用于不最小化到系统托盘的程序。但是如果你有这样的程序，最好根据进程ID关闭它：

```
^!x::StartClose("XMouseButtonControl.exe")

StartClose(exe)
{
Process, Exist, %exe% ; check to see if program is running
If (ErrorLevel = 0) ; If program is not running -> Run
    {
    Run, %exe%
    }
Else ; If program is running, ErrorLevel = process id for the target program -> Close
    {
    Process, Close, %ErrorLevel%
    }
} 
```

# c# - 添加到根子元素的不需要的命名空间属性

> ID：13401546
> 
> 赞同：2
> 
> 时间：2012-11-15T16:09:40.197
> 
> 标签：c#, xml, xml-namespaces, linq-to-xml

我曾多次尝试将默认命名空间添加到根，尽管它也将命名空间添加到它的子节点。我想将命名空间添加到现有的 XDocument。

我的代码尝试；

```
// add default namespace - attempt 1
XNamespace xmlns = "http://www.myschema/schema.xsd";
xDocument.Root.Name = xmlns + xDocument.Root.Name.LocalName;

// add default namespace - attempt 2
XNamespace MyNS = "http://www.myschema/schema.xsd";
xDocument.Element("testFile").Name = MyNS.GetName("testFile"); 
```

XML；

```
<testFile version="1" xmlns="http://www.myschema/schema.xsd">
  <testResults xmlns="">  <!-- *** Unwanted Attribute *** -->
    <result resultID="abcdefgh" comment="blah blah blah blah">
  </testResults>
</testFile> 
```

我想知道为什么 testResults 附加了一个 xmlns 命名空间属性？

这是一些要测试的测试 C# 代码；

```
XDocument xDocument = new XDocument(
    new XElement("testFile",
        new XAttribute("version", "1"),
        new XElement("testResults",
            new XElement("result",
                new XAttribute("resultID", "abcdefgh"),
                new XAttribute("comment", "blah blah blah blah")
        )))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:26:59.397

```
XNamespace ns = "http://www.myschema/schema.xsd";
XDocument xDocument = new XDocument(
new XElement(ns + "testFile",
    new XAttribute("version", "1"),
    new XElement(ns + "testResults",
        new XElement(ns + "result",
            new XAttribute("resultID", "abcdefgh"),
            new XAttribute("comment", "blah blah blah blah")
    )))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:40:28.343

以下代码：

```
var xDocument = new XmlDocument();
var element1 = xDocument.CreateElement("testFile", "http://www.myschema/schema.xsd");
element1.SetAttribute("version", "1");
xDocument.AppendChild(element1);

var element2 = xDocument.CreateElement("testResults", "http://www.myschema/schema.xsd");
element1.AppendChild(element2);

var element3 = xDocument.CreateElement("result", "http://www.myschema/schema.xsd");
element3.SetAttribute("resultID", "abcdefgh");
element3.SetAttribute("comment", "blah blah blah blah");
element2.AppendChild(element3); 
```

生成以下 xml 文件：

```
<testFile version="1" xmlns="http://www.myschema/schema.xsd">
  <testResults>
    <result resultID="abcdefgh" comment="blah blah blah blah" /> 
  </testResults>
</testFile> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:46:09.343

您不能“将命名空间添加到 XDocument”。文档没有*命名*空间。元素和属性名称具有命名空间。

您必须更改文档中每个元素的命名空间，可能还需要更改一些属性。

# java - 在具有多个边界的类型参数上出现编译错误

> ID：13401549
> 
> 赞同：5
> 
> 时间：2012-11-15T16:09:43.857
> 
> 标签：java, generics

为什么我在*FuzzyWuzzyContainer*上收到此编译器错误？

> `<T extends Fuzzy & Comparable<T>>`Bound mismatch：FuzzyWuzzy 类型不是 FuzzyContainer 类型的有界参数的有效替代品

*FuzzyWuzzy*实际上实现了在有界泛型中定义的两个接口。

```
public interface Fuzzy
{
    boolean isFuzzy();
}

public class FuzzyWuzzy implements Fuzzy, Comparable<Fuzzy>
{
    public boolean isFuzzy() {return true;}
    public int compare(Fuzzy o) {return 0;)
}

public abstract class FuzzyContainer<T extends Fuzzy & Comparable<T>>
{
   :
}

public class FuzzyWuzzyContainer extends Fuzzycontainer<FuzzyWuzzy> // Error is here
{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:13:42.087

问题是`FuzzyWuzzy implements Comparable<Fuzzy>`。`FuzzyContainer`期望两个`T`s in是`FuzzyContainer<T extends Fuzzy & Comparable<T>>`同一类型。`FuzzyWuzzy`实现`Fuzzy`但它没有实现`Comparable<FuzzyWuzzy>`。

尝试，`FuzzyWuzzy implements Fuzzy, Comparable<FuzzyWuzzy>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T16:17:10.037

尝试`FuzzyContainer`这样声明：

```
public abstract class FuzzyContainer<T extends Fuzzy & Comparable<? super T>> 
```

这是必要的，因为`FuzzyWuzzy`实现`Comparable<Fuzzy>`而不是`Comparable<FuzzyWuzzy>`（你也可以做出改变，正如[猫指出的那样](https://stackoverflow.com/a/13401620/697449)）。

# android - Android 使用 SOAP 访问 web 服务

> ID：13401553
> 
> 赞同：0
> 
> 时间：2012-11-15T16:09:49.617
> 
> 标签：android, web-services, ksoap2, android-ksoap2, ksoap

我正在使用实时数据制作货币转换器，使用 ksoap 访问网络服务。然而，来自 web 服务的响应是 org.ksoap2.SoapFault。但是这个答案并没有作为异常抛出。这个答案出现在我的文本区域我的代码有什么问题？

这是源代码：

```
 package com.example.deneme;

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.PropertyInfo;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapPrimitive;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.AndroidHttpTransport;
    import org.ksoap2.transport.HttpTransportSE;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    public class MainActivity extends Activity {

        TextView input;
        TextView output;
        Button convert;

        private static final String NAMESPACE = "http://www.webserviceX.NET/";

        private static String URL = "http://www.webserviceX.NET/CurrencyConvertor.asmx"; 
        private static final String METHOD_NAME = "ConversionRate";
        private static final String SOAP_ACTION =  "http://www.webserviceX.NET/ConversionRate";

     // Yararlanacağımız web servisin yerini belirtiyoruz.
        /*
        final static String NAMESPACE = "http://tempuri.org/";
        // Web servis üzerinde hangi metodu kullanacağımızı ayarlıyoruz.
        final static String METHOD_NAME = "CelsiusToFahrenheit";
        // SOAP_ACTION : NAMESPACE ve METHOD_NAME birleşiminden oluşuyor.
        final static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
        // Son olarak Web servise ait URL tanımlamasını burada yapıyoruz.
        final static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
        */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

         input=(EditText)findViewById(R.id.editText1);
         convert=(Button)findViewById(R.id.convertt);
         convert.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

                /*
                  PropertyInfo propInfo=new PropertyInfo();
                  propInfo.name="FromCurrency";
                  propInfo.type=PropertyInfo.STRING_CLASS;
                  propInfo.setValue("GBP");

                  PropertyInfo propInfo2 = new PropertyInfo();
                  propInfo2.name="ToCurrency";
                  propInfo2.type = PropertyInfo.STRING_CLASS;
                  propInfo2.setValue("EUR");
            */
                //  request.addProperty(propInfo);
                  //request.addProperty(propInfo2);
                request.addProperty("FromCurrency","GBP");
                request.addProperty("ToCurrency","AFA");

                  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

                  envelope.setOutputSoapObject(request);
                  envelope.dotNet=true;

                  AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);

                  try {
                      httpTransport.call(SOAP_ACTION, envelope);
                   System.out.println("2!!!!!!!!!!!!!!!!");
                   SoapObject result = (SoapObject)envelope.bodyIn;

                   System.out.println("1!!!!!!!!!!!!!!!!");

                  input.setText(result.getProperty(0).toString());

                  } catch (Exception e) {
                      input.setText(e.getMessage());

                  }
            }
        });

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }
    }][1]

  [1]: http://i.stack.imgur.com/QtUoD.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:43:51.363

在您的代码中有一个这样的代码段，

```
AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);
try {
   httpTransport.call(SOAP_ACTION, envelope);
   System.out.println("2!!!!!!!!!!!!!!!!");
   SoapObject result = (SoapObject)envelope.bodyIn;
   System.out.println("1!!!!!!!!!!!!!!!!");
   input.setText(result.getProperty(0).toString());
} catch (Exception e) {
  input.setText(e.getMessage());
} 
```

请用这个替换上面的部分，

```
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION, envelope);
Object result = envelope.getResponse();
System.out.println(result.toString()); 
```

这将起作用。另请阅读此博客。它有一个适合你的工作代码。[http://www.insightforfuture.blogspot.com/2012/02/accessing-apache-axis2-web-service_24.html](http://www.insightforfuture.blogspot.com/2012/02/accessing-apache-axis2-web-service_24.html)

# spring - 带有 @Async 注释的 Spring SimpleAsyncTaskExecutor 和 ThreadPoolTask Executor

> ID：13401558
> 
> 赞同：7
> 
> 时间：2012-11-15T16:10:03.513
> 
> 标签：spring, spring-integration, spring-annotations

我有以下配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    <context:component-scan base-package="com.abc" />
    <task:annotation-driven executor="executor"/>
    <task:executor id="executor" pool-size="2"/>

</beans> 
```

然后下面的课

```
public class SomeClassImpl implements SomeClass {

   @Async
   @Override // overridden from the interface
   public void doSomething(){
      System.out.println("doing something async");
   }
} 
```

一个测试：

```
@ContextConfiguration("classpath:test-config.xml") // with the xml config above
@RunWith(value = SpringJUnit4ClassRunner.class)
public class SomeClassTest {

   @Autowired
   private SomeClass someClass;

   @Test
   public void testSomething() throws Exception {

      System.out.println("Calling doSomething");
      someClass.doSomething();
      Thread.sleep(5000);
   }
} 
```

当我运行测试时，一切都按预期工作。但是后来我附加了调试器以逐步了解调用 someClass.doSomething() 时实际发生的情况，我注意到以下内容：

![在此处输入图像描述](../Images/556aa0f068a3d6087204c28c8c2619b5.png)

为什么 SimpleAsyncTaskExecutor 创建了 4 个线程？我知道如果我从 task:annotation-driven xml 元素中删除 executor 属性，AsyncExecutionInterceptor 将使用 SimpleAsyncTaskExecutor。但是既然我已经声明了一个任务执行器并从注释驱动的元素中引用了它，为什么要创建一个 SimpleAsyncTaskExecutor 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-17T16:12:52.200

首先，如果使用 Java 5 及更高版本（Java Futures 等需要），默认的 TaskExecutor 实现应该是 ThreadPoolTask​​Executor，它与您的调试跟踪输出相匹配。这是实际执行您的测试代码的线程管理器。

SimpleAsyncTaskExecutor 可能作为 Spring 任务执行器框架的一部分启动，可能来自测试上下文文件中的另一个注释。Spring 容器可能正在启动 SimpleAsyncTaskExecutor 类的四个实例。根据 Spring 文档，这个版本的 TaskExecutor 从不重用线程来满足新请求（它将启动一个新线程）：

SimpleAsyncTaskExecutor

> 此实现不重用任何线程，而是为每次调用启动一个新线程。但是，它确实支持并发限制，该限制将阻止任何超过限制的调用，直到插槽被释放。如果您正在寻找真正的池，请继续向下滚动页面。

参考：[http ://docs.spring.io/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-task-executor](http://docs.spring.io/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-task-executor)

因此，这可能是测试上下文和 Spring 容器之间交互的结果。

我相信您有一个线程在这种情况下运行您的测试代码，这是您所期望的，基于单个请求。Spring TaskExecutor 实现利用了一个名为 ConcurrencyThrottleSupport 的辅助类，它应该限制（限制）正在执行的并发线程的数量。在您的情况下，这应该是 2，如 pool-size 属性所示。但是，要运行这一测试，它永远不需要分配额外的线程，并且跟踪输出与此一致。

# hibernate - 如何为连接表自动生成 GUID？

> ID：13401559
> 
> 赞同：5
> 
> 时间：2012-11-15T16:10:03.097
> 
> 标签：hibernate, jpa, uuid, auto-generate

我正在使用 Hibernate 4.1.0.Final、JPA 2.0 和 MySQL 5.5。我有以下实体：

```
@GenericGenerator(name = "uuid-strategy", strategy = "uuid.hex")
@Entity
@Table(name = "cb_organization", uniqueConstraints = {@UniqueConstraint(columnNames={"organization_id"})})
public class Organization implements Serializable
{

    …

    @OneToMany(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinTable(name = "cb_organization_address",
              joinColumns = @JoinColumn(name = "organization_id"),
              inverseJoinColumns = @JoinColumn(name = "address_id"))
    /* List of addresses associated with this organization */
    private List<Address> addresses; 
```

注意连接表“cb_organization_address”。它的主键是一个 varchar(32) not null 字段，我想成为一个 GUID，类似于组织实体的 ID。如何为该表自动生成 ID？当我尝试使用地址保存组织时，我得到了异常......</p>

```
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Field 'ID' doesn't have a default value
    org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361)
    org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289)
    org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
    org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:976)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    $Proxy47.flush(Unknown Source)
    org.mainco.subco.organization.repo.OrganizationDaoImpl.save(OrganizationDaoImpl.java:63)
    org.mainco.subco.organization.service.OrganizationServiceImpl.save(OrganizationServiceImpl.java:64)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy62.save(Unknown Source)
    org.mainco.subco.sbadmin.controllers.OrganizationController.save(OrganizationController.java:204)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
        org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T18:30:18.810

您不应为连接表自动生成 ID。相反，您应该从 中删除 ID 列`cb_organization_address`。

连接表通常没有自己的 ID，它们仅表示两个事物之间的关联。因此，关系本身的“同一性”通常是相关两件事的复合键。对于您的用例，我会说这是正确的数据模型：每个组织可以有任何地址零次或一次，每个地址可以在任意数量的组织中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-26T12:53:53.043

你应该让连接表的 id 不是`uuid`类型，而是类似`bigserial`（在 postgres 中）。这个解决方案对我有帮助。我认为连接表实体的 id 不应该像`uuid`. 通常，此 ID 是隐藏的

# java - 防止覆盖 bean 的 bean 定义

> ID：13401561
> 
> 赞同：3
> 
> 时间：2012-11-15T16:10:05.030
> 
> 标签：java, spring

我知道我们可以通过以下方式禁用 spring bean 的重载：

```
GenericApplicationContext.setAllowBeanDefinitionOverriding(boolean b) 
```

[弹簧参考](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/GenericApplicationContext.html#setAllowBeanDefinitionOverriding%28boolean%29)

但是，我认为 WebApplicationContext 不是以编程方式加载的，而是通过我的 web.xml 文件加载的。那么，如何防止在 WebApplicationContext 中覆盖 Spring bean

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:05:48.200

一种不是特别优雅的方法是覆盖默认的 WebApplicationContext。在 web.xml 中：

```
<context-param>
  <param-name>contextClass</param-name>
  <param-value>my.package.MyWebApplicationContext</param-value>
</context-param> 
```

在哪里

```
public class MyWebApplicationContext extends XmlWebApplicationContext {
  public MyWebApplicationContext() {
    super();
    this.setAllowBeanDefinitionOverriding(false);
  }
} 
```

# android - 设置列表视图的最大高度

> ID：13401562
> 
> 赞同：4
> 
> 时间：2012-11-15T16:10:10.907
> 
> 标签：android, listview, height

真的很愚蠢，但我想为我的列表视图设置一个最大高度，但我似乎找不到有用的东西。有人谈论为列表视图设置最大高度，但我找不到这个选项？我现在有

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="40dp" >

    <ListView
        android:id="@+id/lvSwitch"
        android:layout_width="fill_parent"
        android:layout_height="120dp" >
    </ListView>
</LinearLayout> 
```

但是当列表中只有一项时，它的高度仍然是 120dp，当然这不是必需的，它只是不能超过那个高度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:14:27.203

尝试这个：

```
 android:layout_height="wrap_content". 
```

编辑：您可以检查列表视图中的项目数量并设置大小以防其高于 20。类似于：

```
if(numberOfItems>20){
listview.setWidth(yourSize)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:21:29.700

```
android:layout_height="0dp"
android:layout_weight="1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T08:22:34.127

与 try一起或代替`android:layout="120dp"`try `android:minHeight="20dp"`，假设 20dp 是单个列表项的高度。这样，如果 ListView 有 1 或 2 个东西，它就不会占用整个 120dp。

# python - Python 2.x 中的 True=False 赋值

> ID：13401563
> 
> 赞同：15
> 
> 时间：2012-11-15T16:10:11.817
> 
> 标签：python, boolean, keyword, python-2.x

> **可能重复：**
> [为什么 Python 不能按我的预期处理真/假值？](https://stackoverflow.com/questions/2055029/why-cant-python-handle-true-false-values-as-i-expect)

似乎是一个愚蠢的问题，但为什么 Python 中的以下语句没有明确禁止？

```
>> True=False
>> True
False 
```

Python解释器如何处理`True`和处理？`False`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:12:54.850

`True`，就像`str`或任何其他内置函数一样，只是默认情况下存在于范围内的名称。您可以像任何其他此类名称一样重新绑定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:17:16.447

```
>>> True = False
False 
```

在上面的赋值中，`True`只是一个变量，就像您使用的任何其他变量一样。它的范围仅限于当前范围。因此，您可以为它分配任何值，如下例所示。请注意，比较`2 < 3`仍然会打印`True`，因为您仍然可以访问`builtin`.

```
>>> True = 3
>>> True
3
>>> 2 < 3
True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T16:12:55.350

Python 实际上有很少的[保留字](http://docs.python.org/2/reference/lexical_analysis.html#keywords)。其余的都需要重新定义。你要小心！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T16:28:57.483

打字

```
True = False 
```

您创建一个名为 True 的新变量，将其值分配给 False。

回答您的第二个问题，True 和 False 是整数 1 和 0（从技术上讲，是子类）的自定义版本，它们只是具有不同的字符串表示形式。

# java - 如何使 Primefaces graphicsImage 与 Spring Web Flow 一起使用

> ID：13401569
> 
> 赞同：0
> 
> 时间：2012-11-15T16:10:37.460
> 
> 标签：java, spring, primefaces, facelets, spring-webflow

com.I 有用户上传图像的 SWF 应用程序，并且该图像必须在下一个流状态下显示。该流程使用存储所有用户输入数据的对话范围 bean（实际上是一个 JPA 实体）。我可以上传图像，将其存储在 bean 中，但 PrimeFaces graphicsImage facelet 不会渲染它。我做了一些研究，似乎在渲染 PF GI 组件期间存储要使用会话评估的 EL 表达式，随后对 ResourceHandler 的调用（由渲染 HTML 中的 IMG 标记进行）获取相同的 EL 表达式并实际评估它。问题是 ResourceHandler 无法访问我存储所有数据的流变量，因此无法渲染图像。

我扩展了 PF GI 组件以使用会话而不是 EL 表达式存储实际图像，但这具有明显的性能影响：在 Session 中存储二进制数据不是一个好主意。此外，出于安全原因，我宁愿将所有数据保留在流/对话范围内，而不是会话中。

有什么干净的方法可以让 PF GI 组件访问我的流变量吗？

我的代码片段如下

流程：

```
<on-start>
    <evaluate expression="new my.models.Customers()" result="conversationScope.customer"></evaluate>
</on-start>

<view-state id="scanImage" view="s1-scan.xhtml" model="customer" >
    <secured attributes="ROLE_WEB" />
    <transition on="submit" to="verifyImage"></transition>
    <transition on="cancel" to="canceled"></transition>
</view-state>

<view-state id="verifyImage" view="s2-verifyscan.xhtml" model="customer">
    <secured attributes="ROLE_WEB" />
    <transition on="submit" to="enterDetails"></transition>
    <transition on="back" to="scanImage"></transition>
    <transition on="cancel" to="canceled"></transition>
</view-state> 
```

图像渲染：

```
<p:graphicImage value="#{customer.getImageSC()}"></p:graphicImage> 
```

已修补的 GraphicImageRenderer.getImageSrc()

```
protected String getImageSrc(FacesContext context, GraphicImage image) {
    String src = null;
String name = image.getName();

if(name != null) {
    String libName = image.getLibrary();
    ResourceHandler handler = context.getApplication().getResourceHandler();
    Resource res = handler.createResource(name, libName);

    if(res == null) {
        return "RES_NOT_FOUND";
    } 
    else {
        String requestPath = res.getRequestPath();

        return context.getExternalContext().encodeResourceURL(requestPath);
    }
}
else {
    Object value = image.getValue();

    if(value == null) {
        return "";
    }
    else  if(value instanceof String) {
        src = getResourceURL(context, (String) value);
    }
    else if(value instanceof StreamedContent) {
        StreamedContent streamedContent = (StreamedContent) value;
        Resource resource = context.getApplication().getResourceHandler().createResource("dynamiccontent", "primefaces", streamedContent.getContentType());
        String resourcePath = resource.getRequestPath();
        String rid = createUniqueContentId(context);
        StringBuilder builder = new StringBuilder(resourcePath);

        builder.append("&").append(Constants.DYNAMIC_CONTENT_PARAM).append("=").append(rid);

        for(UIComponent kid : image.getChildren()) {
            if(kid instanceof UIParameter) {
                UIParameter param = (UIParameter) kid;

                builder.append("&").append(param.getName()).append("=").append(param.getValue());
            }
        }

        src = builder.toString();

        context.getExternalContext().getSessionMap().put(rid, value);
        // context.getExternalContext().getSessionMap().put(rid, image.getValueExpression("value").getExpressionString());
    }

    if(!image.isCache()) {
        src += src.contains("?") ? "&" : "?";
        src += "primefaces_image=" + UUID.randomUUID().toString();
    }

    src = context.getExternalContext().encodeResourceURL(src);
}

    return src;
} 
```

处理程序：

```
public void handleResourceRequest(FacesContext context) throws IOException {
Map<String,String> params = context.getExternalContext().getRequestParameterMap();
String library = params.get("ln");
String dynamicContentId = params.get(Constants.DYNAMIC_CONTENT_PARAM);

if(dynamicContentId != null && library != null && library.equals("primefaces")) {
    Map<String,Object> session = context.getExternalContext().getSessionMap();
    StreamedContent streamedContent = null;

    try {

        Object dynamicContentEL = (Object) session.get(dynamicContentId);

        //String dynamicContentEL = (String) session.get(dynamicContentId);
        //ELContext eLContext = context.getELContext();
        //ValueExpression ve = context.getApplication().getExpressionFactory().createValueExpression(context.getELContext(), dynamicContentEL, StreamedContent.class);
        //streamedContent = (StreamedContent) ve.getValue(eLContext);

        streamedContent = (StreamedContent) dynamicContentEL;

        ExternalContext externalContext = context.getExternalContext();
        externalContext.setResponseStatus(200);
        externalContext.setResponseContentType(streamedContent.getContentType());

        byte[] buffer = new byte[2048];

        int length;
        InputStream inputStream = streamedContent.getStream();
        while ((length = (inputStream.read(buffer))) >= 0) {
            externalContext.getResponseOutputStream().write(buffer, 0, length);
        }

        externalContext.responseFlushBuffer();
        context.responseComplete();

    } catch(Exception e) {
        logger.log(Level.SEVERE, "Error in streaming dynamic resource. {0}", new Object[]{e.getMessage()});
    }
    finally {
        //cleanup
        session.remove(dynamicContentId);

        if(streamedContent != null) {
            streamedContent.getStream().close();
        }
    }
}
else {
   super.handleResourceRequest(context); 
} 
```

}

面孔配置：

```
 <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
        <resource-handler>com.my.PrimeResourceHandler</resource-handler>
    </application>

<render-kit>    
    <renderer>
         <component-family>org.primefaces.component</component-family>
         <renderer-type>org.primefaces.component.graphicimage.GraphicImageRenderer</renderer-type>
         <renderer-class>com.my.GraphicImageRenderer</renderer-class>
    </renderer>
</render-kit> 
```

我怀疑有可能将 webflow 上下文与 EL 一起存储在 Session 对象中，并让资源处理程序在评估 EL 时使用该上下文......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:24:09.457

您是否修改了 primefaces 代码（即 GraphicImageRenderer 和 PrimeResourceHandler 类）或扩展了它们？如果您扩展它们，代码是如何知道使用/调用扩展类的？

我正在使用请求范围并将所有图像存储在 WEB-INF 文件夹中并使用以下方法检索它们：

```
<p:graphicImage value="/images/{springBean.imageFileName}"> 
```

我没有对 primefaces 代码进行任何更改，因为它们可能会在以后的版本中解决此问题。我喜欢使用流范围，也想使用如下 bean 来检索它们：

```
<p:graphicImage value="#{springBean.imageFile}"> 
```

我还尝试将图像保存到不在 webapproot 中的硬盘驱动器位置，并且无法显示图形图像。希望我可以将所有请求映射到 /images/* 到某个本地文件夹，而无需在 websphere 中使用如下的控制器/托管 bean？

[如何在 java webapp 中的服务器上保存和检索图像](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server)

# java - C++ Fork/Exec 父子通信

> ID：13401574
> 
> 赞同：1
> 
> 时间：2012-11-15T16:10:58.473
> 
> 标签：java, c++, fork, minecraft

我正在 Ubuntu 上编写一个 C++ 控制台程序来专门管理游戏服务器“我的世界”，编写它是为了学习目的，因此对任何选项都持开放态度，它确实必须遵循我所做的。

我想执行 minecraft 服务器，然后检查它是否还活着，我还希望能够从 C++ 程序向它发送命令，例如“/stop”，它将优雅地关闭它，而不是仅仅使用“kill” ”。

```
pid_t pid;
pid = fork();
cout << pid << endl;

switch (pid)
{
    case -1:
        break;
    case 0:
        cout << "Child Process" << endl;

        //WAITS HERE, CANT MOVE ON, IS THERE A FIX?
        execlp("java", "java", "-jar", filetoexec, "nogui");
        cerr << "Failed" << endl;
        while(true)
        {
            //WANT if (isMinecraftAlive()) echo yay!!!
            cout << "Child Tick..." << getpid() << endl;
            sleep(4);
        }
        break;
    default:
        cout << "Parent Process" << endl;
        while(true)
        {
            cout << "Parent Tick..." << getpid() << endl;
            //WANT TO SEND "/list" to CHILD and it EXEC on MINECRAFT;
            sleep(4);
        }
        //execv("test", NULL);
        break;
} 
```

# 我想做的事：

在“ `execlp("java", "java", "-jar", filetoexec, "nogui");`”之后，我希望能够对其进行操作`IsAlive()`，基本上确保服务器仍在响应。我注意到在继续`execlp`之前等待进程完成它正在做的事情是一个问题，因为它是一个永远活着的游戏服务器。

非常感谢所有帮助，正如我上面所说，这是一项学习任务，但我对此感到困惑。

# solr - solr - 同义词过滤器和缓存故障排除

> ID：13401579
> 
> 赞同：0
> 
> 时间：2012-11-15T16:11:24.323
> 
> 标签：solr

我所有的旧同义词都在分析器中工作。

我最近添加了 teddy => roosevelt 只是为了测试它并且它不会解析。我想知道这是否是缓存问题，尽管我在一周前进行了更改。

更有问题的是，即使我看到我的旧同义词正在分析器上被解析，它们并没有在我的实际应用程序（WordPress）中被解析。

如果我有 A，B：A：10 次点击 B：26 次点击

到目前为止，我的故障排除清单是：

*   分析器和应用程序指向已安装的实例（data/solr/conf/synonyms.txt）
*   删除 synonyms.txt 中的一个工作同义词并分析：**这实际上没有通过。**让我相信这是一个缓存问题。我无法弄清楚为什么在我删除它们后分析器仍然会报告同义词。

*   Schema.xml 在查询类型有 solr.SynonymFilterFactory，synonyms=synonyms.txt, expand=true

有人有什么建议吗？

**编辑**这是我的 solr.xml

```
vi /etc/tomcat6/Catalina/localhost/solr.xml
-----
<Context docBase="/data/solr/solr.war" debug="0" privileged="true" allowLinking="true" crossContext="true">
  <Environment name="solr/home" type="java.lang.String" value="/data/solr" override="true" />
</Context>
----- 
```

# jquery - 使用 jQuery 的 XML 循环 - 直接后代

> ID：13401580
> 
> 赞同：1
> 
> 时间：2012-11-15T16:11:24.837
> 
> 标签：jquery, xml

使用下面的 XML，我想用 jQuery 将数据解析成一个表。不幸的是，我在获得用户学位（而不是审阅者学位）时遇到了一些麻烦。我还没有考虑获取名字或姓氏（我认为它会相似）。

XML:

```
<data>
<status>true</status>
<candidates>
    <user>
        <username>user1</username>
        <degree>BS</degree>
        <email>test1@test.com</email>
        <firstname>John</firstname>
        <lastname>Candidate</lastname>
        <reviewedby></reviewedby>
        <notreviewedby>
            <reviewer>
                <degree>BSc</degree>
                <firstname>Eric</firstname>
                <lastname>Reviewer</lastname>
                <username>e_reviewer</username>
            </reviewer>
        </notreviewedby>
    </user>
    <user>
        <username>user2</username>
        <degree>BS</degree>
        <email>test2@test.com</email>
        <firstname>Francis</firstname>
        <lastname>CandidateAswell</lastname>
        <reviewedby></reviewedby>
            <notreviewedby>
                <reviewer>
                    <degree>BS</degree>
                    <firstname>Fred</firstname>
                    <lastname>Reviews</lastname>
                    <username>f_reviewer</username>
                </reviewer>
            </notreviewedby>
    </user>
</candidates> 
```

我不完全确定为什么：

```
$(response).find('user').each(function(){
    var degree = $("> degree", this).text();
    alert(degree);
}); 
```

不工作...

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:19:11.040

获得`<degree>`每个`<user>`做的价值

```
$(response).find('user').each(function(){
    var degree = $(this).children('degree').text();
}); 
```

`<user>`这将获取命名`degree`使用的所有子元素[`.children([selector])`](http://api.jquery.com/children/)

[这里的工作示例](http://jsfiddle.net/pUDNc/)

# java - 如何创建作为一组杰克逊注释的注释？

> ID：13401581
> 
> 赞同：47
> 
> 时间：2012-11-15T16:11:26.150
> 
> 标签：java, annotations, jackson

大约一年后，我读了一篇文章，解释了如何创建一个基本上是其他注释容器的注释。这样，如果我总是在特定用例中使用相同的 5 个注释，我会创建一个包含它们的注释并改为使用它。

不幸的是，我再也找不到这篇文章了，我现在真的很想为我的杰克逊配置做这件事。

由于我自己找不到任何相关信息，我开始质疑我的记忆力。这是可能的还是我错了？

**编辑**

我想要的是这样的：

```
@Target(ElementType.METHOD)
@com.fasterxml.jackson.databind.annotation.JsonSerialize(using=MySerializerThatIsUsedEverywhere.class
@javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(MyCustomXmlAdapter.class)
@SomeOtherEvaluatedByTheSerializer
public @interface SerializerUseCase01 {
    public String a();
    public int b();
) 
```

我的场景是我有一堆序列化用例，可以由具有不同配置的相同序列化程序处理。为了使一切更易于使用和更透明，我想将杰克逊配置和序列化程序配置包装到一个注释中。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-16T00:48:32.080

对于杰克逊来说，这可以通过`@JacksonAnnotationsInside`元注释来完成。有关更多信息，请参阅[本文](http://www.cowtowncoder.com/blog/archives/2012/03/entry_466.html)，但其中的代码片段是：

```
@Retention(RetentionPolicy.RUNTIME) // IMPORTANT
@JacksonAnnotationsInside
@JsonInclude(Include.NON_NULL)
@JsonPropertyOrder({ "id", "name" }) 
public @interface MyStdAnnotations 
```

从那时起，您可以将这种类型用于您自己的类，如下所示：

```
@MyStdAnnotations
public class MyBean {
   public String name, id;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T16:17:00.813

这里有一些示例说明[如何](https://blogs.oracle.com/toddfast/entry/creating_nested_complex_java_annotations)制作包含其他注释的各种注释组合。这是你要找的吗？

来源示例：

```
@Target(ElementType.METHOD)
public @interface SimpleAnnotation {
    public String a();
    public int b();
)

@Target(ElementType.METHOD)
public @interface ReallyComplexAnnotation {
    public SimpleAnnotation[] value();
) 
```

像这样使用：

```
@ReallyComplexAnnotation(
    { @SimpleAnnotation(a="...", b=3), @SimpleAnnotation(a="...", b=4) }
) 
```

# python - 在 Windows 中的 Python 中获取日期格式

> ID：13401587
> 
> 赞同：9
> 
> 时间：2012-11-15T16:11:35.027
> 
> 标签：python, locale, date-format, localeconv

在给我的家庭作业示例代码中，出现了这一行：

```
date_format = locale.nl_langinfo(locale.D_FMT) 
```

但在 Windows 中，该行返回以下错误：

```
File "C:\Users\Shadark\Dropbox\IHM\P3\p3_files\www\cgi-bin\todolist.py", line 11, in <module>
date_format = locale.nl_langinfo(locale.D_FMT)
AttributeError: 'module' object has no attribute 'nl_langinfo' 
```

我已经阅读了有关使用**localeconv**的信息，但我只阅读了有关使用货币或数字的信息。关于我的代码示例或其他类型的功能的用途有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:30:41.903

您的问题可能是`locale.nl_langinfo`Windows Python 2.7.x 中似乎不可用的事实（我在我的 Windows 64 位 Python 2.7.3 副本中没有看到它）。查看[http://docs.python.org/2.7/library/locale.html#locale.nl_langinfo](http://docs.python.org/2.7/library/locale.html#locale.nl_langinfo)上的文档，他们特别说：

> 此功能并非在所有系统上都可用，并且可能的选项集也可能因平台而异。

一旦您使用以下内容设置了语言环境：

```
locale.setlocale(locale.LC_ALL, 'english') 
```

然后调用 some_date.strftime() 将使用正确的语言环境特定格式和字符串。因此，如果您想要字符串格式的日期，请调用`some_date.strftime('%x')`替换`%x`为`%X`时间或`%c`两者。[此处](http://docs.python.org/2.7/library/datetime.html#strftime-and-strptime-behavior)记录了 strftime 格式的完整列表。

```
>>> d = datetime.datetime.now()
... for loc in ('english', 'german', 'french'):
...     locale.setlocale(locale.LC_ALL, loc)
...     print loc, d.strftime('%c -- %x -- %X -- %B -- %A')
english 11/15/2012 4:10:56 PM -- 11/15/2012 -- 4:10:56 PM -- November -- Thursday
german 15.11.2012 16:10:56 -- 15.11.2012 -- 16:10:56 -- November -- Donnerstag
french 15/11/2012 16:10:56 -- 15/11/2012 -- 16:10:56 -- novembre -- jeudi
14: 'French_France.1252' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:22:28.790

尝试从测试目录中删除任何预编译文件。

如果问题仍然存在，请尝试重新安装您的编译扩展。可能是安装有问题

# jquery - jQuery - 访问函数返回值（x 和 y）

> ID：13401588
> 
> 赞同：0
> 
> 时间：2012-11-15T16:11:36.290
> 
> 标签：jquery, function, events, touch, return

（首先：我对 JS 和 jQuery 很陌生）

我目前正在使用 jQuery 制作图像幻灯片。我已经通过工具提示、动态高度、100% 宽度等使其非常先进。现在我的下一步是启用触摸滑动/滑动。

我发现这篇关于制作鼠标事件和触摸事件的文章（ [http://blog.safaribooksonline.com/2012/04/18/mapping-mouse-events-and-touch-events-onto-a-single-event/](http://blog.safaribooksonline.com/2012/04/18/mapping-mouse-events-and-touch-events-onto-a-single-event/) ）一个（例如 mousedown 和 touchstart 等于相同的事件）。在这篇文章中，作者一直说使用这段代码访问 X 和 Y 值更简单（通过制作“normalizeEvent”）。但我的问题是，如果没有“未定义”，我似乎根本无法访问这些。

这是我当前的代码，此刻我只想“拖放”我的幻灯片来做某事。但我根本不知道如何获得 X 值..

```
jQuery(new_slide).bind(TouchMouseEvent.DOWN, function (e){

            // Get current slide position coords
            var position = current_slide.position();

            // X-position for mouse
            var startX  = e.pageX; //this is "undefined"

            // X-position for current slide
            var slideX  = parseInt(position.left);

            // Prevent browser to drag image
            new_slide.bind('dragstart', function(e){

                e.preventDefault();

            })

            jQuery(new_slide).bind(TouchMouseEvent.MOVE, function (){

                // Drag slide
                new_slide.css('left', slideX + e.pageX - startX + 'px');

            });

        });

// Release slide
jQuery(new_slide).bind(TouchMouseEvent.UP, function (){

    jQuery(new_slide).unbind(TouchMouseEvent.MOVE);

}); 
```

# checkbox - 我可以向枚举支持的 Wicket 1.5 CheckBoxMultipleChoice 添加“空白/不适用”选项吗？

> ID：13401590
> 
> 赞同：1
> 
> 时间：2012-11-15T16:11:49.360
> 
> 标签：checkbox, wicket-1.5

在我的应用程序中，每个 Foo 都有一个类别。Foo.Category 是类 Foo 中的一个内部枚举。在其给定的表单页面上创建 Foo 时，用户从键入到枚举的下拉列表中选择一个类别。但是，此选择是可选的。

现在，在另一个页面上，我希望能够按名称和类别搜索 Foo。此搜索表单`CheckBoxMultipleChoice<Foo.Category>`也键入了相同的内部枚举。检查的值被发送到 DAO，它使用“where category in”子句查询我的数据库。

我想在复选框中添加“空白/无”选项，以便在发送到 DAO 时，如果选中，我可以在查询中添加“或类别为空”。由于我的复选框是键入到枚举中的，这甚至可能吗？

编辑：不确定这是否重要，但我的枚举具有由 SHORTNAME 指定的值，但每个都有一个字符串 LongerAndMoreDescriptiveName，并且枚举覆盖`toString()`以返回此值。SHORTNAME 是我存储在数据库中的内容，并在 where 子句中使用，但 Longer 是 UI 上显示的内容。我曾短暂考虑过更改为 CheckBoxMultipleChoice 并添加空白选项，但我将如何解决值之间的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:38:33.410

直接是不可能的。CheckBoxMultipleChoice 中没有“无值”选项（如 DropDownChoice 中），因为在未选择任何内容时组件的模型为 null。

我想，你有两个选择：

1) 将常量 Category.NONE 添加到 Foo.Category 枚举中，并在用户选择类别的下拉选项中对其进行相应处理。

2) 为 Foo.Category 常量创建一个包装类（类似于 Optional<Foo.Category>），并在 CheckBoxMultipleChoice 中使用它，而不是直接使用 Foo.Category 常量。Optional<Foo.Category> 的实例将能够具有或不具有相应的 Foo.Category 常量，因此您对选择模型的处理应该是适当的。

# ruby-on-rails-3.2 - 重定向到外部 URL 后，cookie_store 中的 Rails 3.2 会话 cookie 被删除

> ID：13401592
> 
> 赞同：4
> 
> 时间：2012-11-15T16:12:00.440
> 
> 标签：ruby-on-rails-3.2, session-cookies, dalli

我们面临一个奇怪的问题，在我们的 rails 3.2 应用程序（暂存环境）的会话中，很少有键/cookie 被删除/丢失，该应用程序具有以下缓存设置/配置。session store是cookie store，配置如下：

```
 Appsrv::Application.config.session_store :cookie_store, {
      :key =>           'SSID',
      :path =>          '/',
      :domain =>        APP_CONFIG['site_url'].sub(/^https?:\/\//, ""),
      :expire_after =>  30.minutes,
      :secret =>        's23asdfe443534afdgstreggv234324we434',
      :secure =>        false # cookie not for just https
   } 
```

rails cache store 是一个memcache store，我们使用dalli gem 来集成rails 和memcache。

以下配置已添加到不同的 .rb 文件中：

```
 config.cache_store = :dalli_store, 'staging01:11211', 'staging02:11211',  'staging03:11211', 'staging04:11211'
                     {:namespace => "appsrv", :expires_in => 86400, :compression => true}  
    config.action_controller.perform_caching = true 
```

不过，这种丢失 cookie 的情况发生的流程有点复杂。发生这种情况的场景如下：

1.  用户通过访问 Appsrv 上的页面启动会话（rails 3.2 应用程序，此时在会话中设置了一些标识用户事务的变量）
2.  转到外部网站进行身份验证。
3.  认证成功后，外部网站重定向到 Java App 服务器。
4.  Java App 服务器记录身份验证并重定向回 Appsrv。
5.  但是在此重定向之后，步骤 1 中设置的会话变量消失了。

一些奇怪的发现：事情在开发环境中完美运行，唯一的区别是：

```
 config.action_controller.perform_caching = false 
```

如果我们在暂存“config.action_controller.perform_caching=false”中有相同的设置，那么暂存也可以正常工作。即使“config.action_controller.perform_caching”设置为 false，缓存实际上在控制器和模型中正确发生。

所以问题是： 1\. 当 config.action_controller.perform_caching 设置为 true 时，为什么会话 cookie 会被删除？2\. config.action_controller.perform_caching 配置如果设置为 false 也允许缓存正常发生有什么意义？

# c++ - 标准::地图 .lower_bound/upper_bound 前缀搜索，没有找到后缀的最小/最大元素

> ID：13401597
> 
> 赞同：2
> 
> 时间：2012-11-15T16:12:41.780
> 
> 标签：c++, stl, c++11

我正在构建一个使用 a`std::map<tuple<...>>`作为查找数据结构的类。我希望能够在地图上进行前缀搜索，以查找在元组内共享某个前缀的所有元素。例如：

```
using namespace std;
map<tuple<int,int,int,string>,Value> index;
index.insert(make_tuple(1,1,1,"a"),Value());
index.insert(make_tuple(1,1,2,"b"),Value());
index.lower_bound(make_tuple(1,1,std::numeric_limits<int>::min(),"")); 
```

这正是我需要的**，但**我必须手动（对于非 POD 类型）找出最小值。更糟糕的是，当我想找到具有某个前缀的最高元素（我会这样做）时，我必须找到某种类型的最大元素值，这在这种情况下`string`是相当有问题的。

理想情况下，我将能够提供`map.find/lower_bound/upper_bound`（不是 std::find 这是地图上的线性复杂性）与不考虑后缀的单独比较，但不幸的是这是不可能的，很可能是因为前缀搜索或多或少是只有明智的应用。

我认为选项将修改 map 在运行时使用的比较（我认为这是非常糟糕的风格）或为我将在元组中拥有的所有类型实现 numeric_limits 等效项。

在地图/集合上进行前缀搜索是否有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:37:44.963

`map`您可以在定义它时将“静态”比较函子传递给。默认排序`tuple<...>`是对类型的字典排序。

将键类型扩展到允许将字段标记为`max`或`min`值的类型，并提供接受它们的排序算法。

即，像这样：

```
template<typename T>
struct InfiniteExtensionOf
{
  enum ExtendedOrder {NegInfinity=-1, Normal=0, PosInfinity=1};
  ExtendedOrder order;
  T value;
  bool operator<(InfiniteExtensionOf const& other) const
  {
    if (order != other.order)
      return order<other.order;
    return value < other.value;
  }
  template<typename U>
  InfiniteExtensionOf( U&& u ):order(Normal),value(std::forward(u)) {}
  InfiniteExtensionOf( InfiniteExtensionOf&& other ):order(other.order),value(std::move(other.value)) {}
  InfiniteExtensionOf( InfiniteExtensionOf& other ):order(other.order),value(other.value) {}
  InfiniteExtensionOf( InfiniteExtensionOf const& other ):order(other.order),value(other.value) {}
  InfiniteExtensionOf( ExtendedOrder& eo ):order(eo), value() {}
  InfiniteExtensionOf( ExtendedOrder&& eo ):order(eo), value() {}
  InfiniteExtensionOf( ExtendedOrder const& eo ):order(eo), value() {}
}; 
```

然后像这样键：

```
map<tuple<InfiniteExtensionOf<int>, InfiniteExtensionOf<int>, InfiniteExtensionOf<int>, InfiniteExtensionOf<string>>, Value> myMap; 
```

它应该接受`tuple`不带`InfiniteExtensionOf`参数的 s （我希望这样的元组隐式转换），并且您可以在调用时轻松地将 +inf 或 -inf 指定为特定字段的值`lower_bound`or `upper_bound`。

...

请注意，如果`lower_bound`采用模板参数并且只要求它以与现有排序一致的方式与地图中的元素兼容，那么麻烦会更少。:) 但遗憾的是，这不是真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:43:34.717

您可以做的不是直接使用键类型，而是使用可选类型的三态版本：

1.  如果设置了值，则比较只使用该值。
2.  如果`small`设置了标志，则认为该值小于所有其他值。
3.  如果`large`设置了标志，则认为该值大于任何其他值。

要找到下限，您将搜索，例如，使用以下`small`值：

```
map.lower_bound(srd::make_tuple(
    tristate<int>(17),
    tristate<std::string>(tristate_small))); 
```

这适用于具有由 an`int`和 a组成的键的地图`std::string`，每个都可能被一个小值或大值替换。

# sublimetext2 - 如何在 Sublime Text 2 中解析来自 TypeScript 的错误消息？

> ID：13401598
> 
> 赞同：2
> 
> 时间：2012-11-15T16:12:41.807
> 
> 标签：sublimetext2, typescript

我正在尝试为 TypeScript 设置一个 Sublime Text 2 构建系统。我已按照我在[这里](https://stackoverflow.com/questions/12779631/how-to-configure-a-sublime-build-system-for-typescript)找到的指示进行操作。实际上调用编译器是可行的，但是它不能正确地提取错误消息。

这是我的示例 TypeScript 程序：

```
function greeter(person: string) {
     return "Hello, " + person;
}
var user = "Jane User";
document.body.innerHTML = greeter(us-er); 
```

当我从命令行编译时，我看到以下输出：

> C:/data/helloworld.ts(5,34)：当前作用域中不存在名称“us” C:/data/helloworld.ts(5,37)：当前作用域中不存在名称“er”当前范围 C:/data/helloworld.ts(5,26)：提供的参数与调用目标的任何签名都不匹配

当我从 Sublime Text 2 中构建时，我看到以下输出：

> C:/Data/helloworld.ts(5,34)：【0.6s完成】

如原始问题中所述，我尝试了 file_regex 的不同变体，结果都相同。我当前版本的文件如下所示：

```
{
    "selector": "source.ts",
    "cmd": ["tsc.cmd", "--target","ES5", "$file"],
    "file_regex": "^(.+?)\\(([0-9]+,[0-9]+)\\)\\: (.+)$"
} 
```

当我使用[Python 正则表达式工具](http://www.pythonregex.com/)测试正则表达式时，此版本正确匹配 3 个部分。但是，Sublime Text 拒绝向我显示实际的错误消息。

谁能指出我做错了什么？

这是非常令人沮丧的，尤其是当一个站点甚至显示了一个正确显示错误消息的 Sublime Text 示例时。

这是 Windows 7 64 位上的 Sublime Text 2.01 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:28:31.887

看起来该进程在刷新输出缓冲区之前已终止。您可以通过以下方式验证这一点：

```
{
    "selector": "source.ts",
    "cmd": ["tsc.cmd", "--target","ES5", "$file"],
    "file_regex": "(.*)"
} 
```

你仍然应该只得到类似的东西

```
C:/Data/helloworld.ts(5,34): [Finished in 0.6s] 
```

* * *

要解决此问题，您可以尝试在批处理文件中添加一些延迟`tsc.cmd`：

```
@echo off
:: Run the compiler
node "C:\typescript\tsc.js" %*

:: Waits for 500ms
ping 1.1.1.1 -n 1 -w 500 
```

**EDIT:** See Markus' comment about using Windows Script Host instead of node. This fixes the problem. Further research suggests this is actually a known issue with node on Windows: see [here](https://github.com/joyent/node/issues/3479) and [here](https://github.com/joyent/node/issues/3584).

# erlang - 单独终止 simple_one_for_one 孩子

> ID：13401599
> 
> 赞同：2
> 
> 时间：2012-11-15T16:12:44.617
> 
> 标签：erlang, erlang-otp

我有一个由 gen_servers 作为临时子级组成的监督树，它们的寿命很短。每个孩子在清理和终止时都会收到一条消息。

[受我从tinymq](https://github.com/evanmiller/tinymq/blob/master/src/tinymq_controller.erl)项目中阅读的代码的启发，有一个控制器进程可以保存这些孩子的 Pid 的字典。

在他们的情况下，他们使用 max_age 设置和一些我不太明白的[代码来过期他们的频道。](https://github.com/rambocoder/tinymq/commit/76f875b6e050c761ea275aeeec65926d96fb0c71)

在我的情况下，我在进行一些清理后尝试使用`supervisor:terminate_child(Sup, Pid)`，如下所示：

孩子本身在控制器上执行 RPC：

```
fs_outbound_controller:deallocate_me(UUID, self()); 
```

控制器：

```
deallocate_me(UUID, Pid) ->
    gen_server:cast(?SERVER, {deallocate_me, UUID, Pid}).

handle_cast({deallocate_me, UUID, Pid}, #state{dict = Uuid2Pid} = State) ->
    NewDict = dict:erase(UUID, Uuid2Pid),
    supervisor:terminate_child(fs_outbound_extn_sup, Pid),
    error_logger:info_msg("Successfully deallocated ~p", [UUID]),
    {noreply, State#state{dict=NewDict}}. 
```

我观察到的问题是 ERROR 记录器报告了关于 gen_server 终止返回值的崩溃？

```
** Reason for termination == 
** {bad_return_value,ok} 
```

感谢您的帮助。

**编辑**

我做了其他事情，我将对 deallocate_me 的调用从 RPC 移动到从子级到控制器的消息。认为也许孩子对控制器进行 RPC 调用，而这反过来又终止了孩子，这导致了一些返回问题。处理程序保持不变

handle_info({deallocate_me, UUID, Pid}, #state{dict = Uuid2Pid} = State) -> NewDict = dict:erase(UUID, Uuid2Pid), supervisor:terminate_child(fs_outbound_extn_sup, Pid), error_logger:info_msg("成功释放~ p", [UUID]), {noreply, State#state{dict=NewDict}}。

但现在我仍然得到：

```
** Reason for termination == 
** {bad_return_value,{deallocate_me,"49d9f7cb-62d3-4c3f-abf1-a19848967a9a",
                                    <0.50.0>}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:40:22.353

在我看来

```
fs_outbound_controller:deallocate_me(UUID, self()); 
```

被称为`handle_call/3`,`handle_cast/2`或中的最后一条语句`handle_info/2`。这些正在期待类似的东西`{reply, ...}`，`{noreply, ...}`或者`{stop, ...}`你可能知道的。

请记住，`gen_server:cast/2`总是返回`ok`并且`ServerPid ! Message`总是返回`Message`自身。这就是为什么第一次告诉你`{bad_return_value, ok}`，第二次告诉你`{bad_return_value, MessageSent}`。

在你的情况下，我会坚持下去`gen_server:cast`，只是在错误的调用之后放置正确的返回值：

```
fs_outbound_controller:deallocate_me(UUID, self()),
{noreply, State}; %% strongly depends on what your logic there is 
```

# python - 用python解压二进制数据

> ID：13401600
> 
> 赞同：13
> 
> 时间：2012-11-15T16:12:46.347
> 
> 标签：python, arrays, struct, unpack, uint16

我想`uint16`用 Python 将一组二进制数据解压缩为数据。

互联网上到处都是使用`struct.unpack`但只有处理大小为 4 的二进制数组的示例。

这些示例中的大多数如下（`B`是来自文件的二进制数组）

```
U = struct.unpack("HH",B[0:4]); 
```

所以我试图解压一个大小为 6 的数组：

```
U = struct.unpack("HHH",B[0:6]); 
```

有用。

但是如果我想解压一个大小为`L`( `L`is pair) 的数组怎么办？我试过了：

```
U = struct.unpack("H"*(L/2),B[0:L]); 
```

但它不起作用，提示器给我一个错误（`L=512`例如）：

```
struct.error: unpack requires a string argument of length 512 
```

这条消息很奇怪，因为如果我想将二进制数组解包到`uint16`，我需要一个`"HHH...HHH"`该数组一半大小的字符串......

如果有人可以为我提供一些帮助，我将不胜感激。

* * *

我进步了一点......事实上，我尝试过：

```
U = struct.unpack("H"*8,B[0:8]); 
```

有用。

```
U = struct.unpack("H"*10,B[0:10]); 
```

有用。

```
U = struct.unpack("H"*222,B[0:444]); 
```

它仍然有效

```
U = struct.unpack("H"*223,B[0:446]); 
```

它不起作用！它永远不会适用于大于 446 的尺寸

希望它会帮助任何人回答我。

* * *

@MarkRansom 我检查了 len(B) ，实际上长度是 444。我非常确定 B 是一个大小为 512 的数组，因为 B 来自 : `B = f.read(512)`其中 F 是一个 8000 字节大小的文件。所以 read() 有问题...感谢您的回答！但是，如果有人帮助解压大小为 L 的二进制数组，我将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T16:59:26.037

使用 array.fromstring 或 array.fromfile （参见[http://docs.python.org/2/library/array.html](http://docs.python.org/2/library/array.html)）：

```
import array
U = array.array("H")
U.fromstring(B) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-22T23:25:40.970

同一事物的可变长度版本：

```
n = 999
U = struct.unpack(str(n)+"H", B) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-07T08:38:51.003

如果要从二进制数据中解压缩 n 个元素，请指定元素的数量和数据类型。对于 n=999：

```
U = struct.unpack("999H", B) 
```

# python - 在 python 中有效地处理一个大的 .txt 文件

> ID：13401601
> 
> 赞同：6
> 
> 时间：2012-11-15T16:12:46.800
> 
> 标签：python, tabs, sliding-window, delimited

我对 python 和一般编程很陌生，但我试图在包含大约 700 万行 python 的制表符分隔的 .txt 文件上运行“滑动窗口”计算。我所说的滑动窗口的意思是，它将运行一个计算，比如 50,000 行，报告数字，然后向上移动说 10,000 行，并在另外 50,000 行上执行相同的计算。我的计算和“滑动窗口”工作正常，如果我在一小部分数据上测试它，它运行良好。但是，如果我尝试在我的整个数据集上运行该程序，它会非常慢（我现在已经运行了大约 40 个小时）。数学很简单，所以我认为它不应该花这么长时间。

我现在阅读 .txt 文件的方式是使用 csv.DictReader 模块。我的代码如下：

```
file1='/Users/Shared/SmallSetbee.txt'
newfile=open(file1, 'rb')
reader=csv.DictReader((line.replace('\0','') for line in newfile), delimiter="\t") 
```

我相信这是一次从所有 700 万行中制作一本字典，我认为这可能是它对于较大文件的速度如此之慢的原因。

由于我只对一次对“块”或“窗口”数据运行我的计算感兴趣，有没有更有效的方法来一次只读取指定的行，执行计算，然后用新的指定“重复”指定行的块”或“窗口”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:28:52.127

A`collections.deque`是可以采用最大尺寸的有序项目集合。当您将一个项目添加到一端时，一个项目会从另一端落下。这意味着要遍历 csv 上的“窗口”，您只需要继续向其中添加行`deque`，它就会处理已经丢弃的完整行。

```
dq = collections.deque(maxlen=50000)
with open(...) as csv_file:
    reader = csv.DictReader((line.replace("\0", "") for line in csv_file), delimiter="\t")

    # initial fill
    for _ in range(50000):
        dq.append(reader.next())

    # repeated compute
    try:
        while 1:
            compute(dq)
            for _ in range(10000):
                dq.append(reader.next())
    except StopIteration:
            compute(dq) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T17:02:35.310

不要使用`csv.DictReader`，而是使用`csv.reader`. 为每一行创建一个字典比为每一行创建一个列表需要更长的时间。此外，通过索引访问列表比通过键访问字典要快一些。

我使用两个 csv 阅读器对 300,000 行 4 列的 csv 文件进行了定时迭代。 `csv.DictReader`花费的时间是 a 的**七倍**`csv.reader`。

将此与[katrielalex 的](https://stackoverflow.com/a/13401920/1322401)使用建议结合起来`collections.deque`，您应该会看到一个不错的加速。

此外，[分析](http://docs.python.org/2/library/profile.html)您的代码以查明您花费大部分时间的位置。

# java - setEnabled 在 android 中不起作用

> ID：13401602
> 
> 赞同：3
> 
> 时间：2012-11-15T16:12:50.060
> 
> 标签：java, android

我有这个代码：

```
public TextView main_text;//begining of the class

main_text = (TextView) findViewById(R.id.TextMain); //inside OnCreate

main_text.setEnabled(false); //inside button handler 
```

现在是 Xml 的一部分

```
 <TextView
        android:id="@+id/TextMain"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="left"
        android:textColor="#FFFFFF"
        android:text="@string/home_load" >

    </TextView> 
```

为什么 SetEnable 不起作用？这似乎很明显，它应该。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T16:23:42.297

你希望`setEnabled(false)`对 TextView 做什么？

如果你想隐藏 TextView，你应该打电话`setVisibility(View.INVISIBLE)`

如果你想禁用点击，你应该打电话`setOnClickListener(null)`

如果希望文本以禁用状态显示，则需要在单独的 XML 文件中定义视图的状态。

例如 textView.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="true" android:color="@color/enabled" />
    <item android:state_enabled="false" android:color="@color/disabled" />
</selector> 
```

然后在您的 TextView 定义中使用

```
android:textColor="@drawable/textView" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T09:47:29.917

视图可以由多个可触摸元素组成。您必须将它们全部禁用，如下所示：

```
for(View lol : text_view.getTouchables() ) {
    lol.setEnabled(false);
} 
```

如果它是一个简单的，因为它也返回自己：

> 查找并返回作为该视图后代的所有可触摸视图，如果它本身是可触摸的，则可能包括该视图。

[查看#getTouchables()](http://developer.android.com/reference/android/view/View.html#getTouchables%28%29)

# c++ - C++ 类初始化语法和错误“未命名类型”

> ID：13401606
> 
> 赞同：0
> 
> 时间：2012-11-15T16:12:56.707
> 
> 标签：c++

我有一段时间没有接触 C++，希望有人能指出我的类定义中的问题所在。我不断收到一条错误消息，提示“错误：'IPsource' 没有命名类型”。

```
class AddressPacket {
    std::string address;
    int packets;

    public:
    void initialize(std::string add) {
        address = add;
        packets = 1;
    }
    std::string getAddress() {
        return address;
    }
    int getPackets() {
        return packets;
    }
    bool checkAddress(std::string add) {
        return address == add;
    }
    void addPacket() {
        packets++;
    }
};

class AddressPacketList {
    AddressPacket masterList[100];
    int listCounter;

    public:
    AddressPacketList() { listCounter = 0; }
    void add(std::string add) {
        masterList[listCounter].initialize(add);
        listCounter++;
    }
}; 
```

然后在 main 我有...

```
AddressPacketList IPsource();
IPsource.add("Hello"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:15:13.563

这并不意味着您认为它意味着什么：

```
AddressPacketList IPsource(); 
```

您认为它声明了一个名为`IPsource`type的对象`AddressPacketList`并使用`AddressPacketList`的默认构造函数对其进行初始化。

它*实际上*是一个函数声明。您正在声明一个名为的函数`IPsource`，它不接受任何参数并按值返回一个`AddressPacketList`对象。

这个看似离奇的结论，就是所谓的[最烦解析](http://en.wikipedia.org/wiki/Most_vexing_parse)的结果。

只需将行更改为：

```
AddressPacketList IPsource; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:15:22.737

好吧，您正在声明一个名为 的函数`IPSource`，它返回一个`AddressPacketList`：

```
AddressPacketList IPsource(); // parsed as function declaration 
```

然后您尝试将其用作对象。您可以通过将声明更改为来修复它

```
AddressPacketList IPsource; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:15:14.657

尝试这个：

```
AddressPacketList IPsource; 
```

仅当您声明一个变量并希望使用非默认构造函数对其进行初始化时，才允许使用括号。如果你有这样的构造函数：

```
AddressPacketList(std::string packet) { 
    masterList[0].initialize(packet);
    listCounter = 1; 
} 
```

然后你可以像这样声明你的局部变量：

```
AddressPacketList IPsource("ABC"); 
```

# gcc - GCC 什么时候插入 xor eax,eax？

> ID：13401612
> 
> 赞同：2
> 
> 时间：2012-11-15T16:13:07.957
> 
> 标签：gcc, assembly, x86

我正在二进制文件中搜索特定指令，对于`xor eax,eax`指令，我有一个类似的函数：

```
int foo(){
  return 0;
} 
```

如果我使用 GCC 4.7.2 和 -O2 或 -O3 优化标志编译它，则汇编结果`foo()`很好

```
xor eax,eax 
```

在退出函数之前。相反，如果编译时使用 -O1 甚至没有优化，经典的

```
mov eax,0x0 
```

被生产。

问题是：是否有任何其他方式（就 C 代码和没有 __asm 指令而言）来生成

```
xor eax,eax 
```

带有 GCC 和 -O1 的指令还是没有优化集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:01:31.833

`xor %eax, %eax`在窥视孔优化期间生成insn 。粗略地说，窥视孔优化通过遍历代码以寻找常见的模式/习语，已知这些模式/习语在目标 CPU 上表现更好。

要回答您的问题，您必须使用 启用窥视孔优化`-fpeephole2`。

PS。`-fpeephole2`由 启用`-O2`，但不是由启用`-O1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:15:33.437

要获得`xor`指令，您可以使用 xor 运算符：

```
register int i = 1;
i = i ^ i; 
```

但是，确保`i`使用`eax`可能更加不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:27:46.263

如果不使用 a或高级优化（并且不使用二进制操作本身），`xor eax,eax`在 GCC 中生成带有寄存器的a 真的很困难。`-O2`

那是因为`xor eax,eax`相当于`mov eax,0`，但是由于某种原因，GCC 使用 xor 方法进行优化（我不知道哪个更快）。因此，如果您想在没有任何优化的情况下生成这样的汇编代码，您可能不会那么容易获得它，除非在 C/C++ ( `^`) 中使用真正的 xor 运算符。

现在如果你使用`-O2`及以上，很容易得到这种指令，例如：

```
#include <stdio.h>

int main(void)
{
    int a = 0;
    printf("%d", a);
    return 0;
} 
```

这将产生两个`xor r1,r1`where`r1`是一个任意寄存器，如果用`-O2`. 第一个异或指令在`a`'s 的初始化中。第二个在`return`值中，即 0，所以它正在生成一个`xor eax,eax`.

要测试我的示例，您可以使用带有选项的[GCC Explorer 。](http://gcc.godbolt.org/)`-O2`

# eclipse - 修改 .java 文件的 Ant 脚本适用于“常规”Eclipse 项目，但不适用于 Maven Eclipse 项目

> ID：13401613
> 
> 赞同：0
> 
> 时间：2012-11-15T16:13:14.647
> 
> 标签：eclipse, maven, ant

我有一个相对简单的 Ant 脚本`commentOutXmlAnnotations.xml`，它可以编辑所有子目录中 Java 文件的内容，以通过正则表达式注释掉某些行：

```
<?xml version="1.0"?>
<project
    name="CommentOutXmlAnnotations"  
    basedir="."  
    default="commentOutXmlAnnotations" >

    <!-- This Ant script comments out the following lines from the Java files in this directory
         and all subdirectories:
        -import javax.xml.bind.annotation.*;
        -@Xml*

        To run this in Eclipse, right-click on this file and click "Run As->Ant Build".             
     -->

    <target
        name="commentOutXmlAnnotations"        
        description="Run" >
            <replaceregexp
                byline="false"
                flags="g" >

                <regexp pattern="(@Xml[A-Za-z0-9]+(\([^)]+\))?|import javax\.xml\.bind\.annotation\.[A-Za-z0-9.]+;)[ \t]*(\r?\n)" />

                <substitution expression="/*\1*/\3" />

                <fileset dir="." >
                    <include name="*/*.java" />
               </fileset>
            </replaceregexp>        
    </target> 
</project> 
```

如果我`commentOutXmlAnnotations.xml`进入一个新的 General Eclipse 项目，在子目录中包含 .java 文件，然后右键单击并执行“Run As->Ant Build”，一切正常，并且 .java 文件中的行被注释掉。

但是，如果我将此`commentOutXmlAnnotations.xml`文件放入 Eclipse Maven 项目并尝试做同样的事情，它似乎会执行并且我会得到控制台输出：

```
Buildfile: D:\Eclipse_Juno_SR1_OTP\opentripplanner-pojos-unversioned\commentOutXmlAnnotations.xml
commentOutXmlAnnotations:
BUILD SUCCESSFUL
Total time: 302 milliseconds 
```

但是子目录中 .java 文件的内容不会改变。我认为这与 Maven 项目目录设置有关。

如何在 Eclipse Maven 项目中配置项目/ant 脚本以在放置它的同一目录中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:44:50.357

所以，愚蠢的错误。

上面的脚本只搜索一个目录，所以看起来脚本没有任何影响，因为所有 java 文件的包名都比一个目录长。

要搜索所有子目录多层次的深度，`fileset`元素应该是：

```
<fileset dir="." >
    <include name="**/*.java" />
</fileset> 
```

# unix - 如何告诉分支给定的更改列表？

> ID：13401614
> 
> 赞同：0
> 
> 时间：2012-11-15T16:13:17.627
> 
> 标签：unix, perforce

听起来应该比我发现的要容易；这是

```
p4 change -so <changenum> | grep Client |sed/awk magic| p4 client -o <userclient> | grep -1 View: | tail -1 | <sed/awk magic for depot path> 
```

-克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:20:43.443

Perforce 分支通常仅由目录结构中的位置标识（除非您使用流）。如果您知道贵公司使用的约定，则很容易发现，例如：

`//depot/project/main/src/foo.c`

您还可以使用 P4V 中的修订图来查看分支历史记录。

# maven - Maven cxf插件错误

> ID：13401618
> 
> 赞同：5
> 
> 时间：2012-11-15T16:13:33.993
> 
> 标签：maven, cxf, pom.xml, maven-plugin, cxf-codegen-plugin

`pom.xml`为什么我在添加 apache cxf 插件时在我的文件中看到此错误？

> 生命周期配置未涵盖插件执行：org.apache.cxf:cxf-codegen-plugin:2.5.4:wsdl2java（执行：generate-sources，阶段：generate-sources）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T17:17:44.120

或者移动到 2.6.3/2.7.0，其中嵌入了 M2E lifecylce 东西，因此不需要连接器。这也有连接警告的好处，以及从代码生成直接进入日食警告系统的好处。

2.7.1-SNAPSHOT 还有许多与 m2e 相关的其他修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T17:10:50.423

您需要从[此处](http://code.google.com/a/eclipselabs.org/p/m2e-cxf-codegen-connector/)安装 m2e-cxf-codegen-connector 。此外，您可能对最新版本的 Eclipse 有问题，所以也请检查这个[问题](http://code.google.com/a/eclipselabs.org/p/m2e-cxf-codegen-connector/issues/detail?id=1)。

# c# - 从 xml 中读取子元素

> ID：13401627
> 
> 赞同：0
> 
> 时间：2012-11-15T16:13:59.373
> 
> 标签：c#, asp.net-mvc-3, razor, xml-parsing

我有一个 xml 文件，其中存储了图像 url、描述及其类别。在我看来，我有一个下拉列表，它也是从 xml 文件的“类别名称”中提取的，现在我需要显示所选类别的图像。我一直在关注[MVC](https://stackoverflow.com/questions/10112567/populate-dropdown-list-in-mvc)和[http://forums.asp.net/t/1580460.aspx/1](http://forums.asp.net/t/1580460.aspx/1)中的几个示例填充下拉列表。我得到了下拉列表部分的工作，但卡住了图像 url 和 desctiption。

这是我的 xml 文件的样子：

```
<?xml version="1.0" encoding="utf-8" ?>

<SymbolOption>
  <Category id="1" name="categoryA">
      <image url="A.png" desc="image a"/>
      <image url="B.png" desc="image b"/>
      <image url="C.png" desc="image c"/>      
  </Category>
  <Category id="2" name="categoryB">
      <image url="x.png" desc="image x"/>
      <image url="y.png" desc="image y"/>      
  </Category>
</SymbolOption> 
```

控制器：

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var imageFile = Server.MapPath("~/Data/ImageSource.xml");
            var category =
                from symbolCategory in XDocument.Load(imageFile).Descendants("Category")
                select new SelectListItem
                {
                    Value = symbolCategory.Attribute("id").Value,
                    Text = symbolCategory.Attribute("name").Value
                };
            var model = new SymbolCategoryViewModel
            {
                Categories = category
            };
            return View(model);            
        }
    } 
```

视图模型：

```
public class SymbolCategoryViewModel
{
    public string Category { get; set; }
    public IEnumerable<SelectListItem> Categories { get; set; }
} 
```

看法：

```
@Html.DropDownListFor(x => x.Category, Model.Categories)

<div id="displayImage">
    <img  src="@Url.Content("~/Content/img/" + URLfromXML)">
    @Html.DisplayFor(image description)
<div> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:42:30.850

我确实解决了您的问题，但这不是最好的解决方案，因为您没有指定您希望如何完成。

控制器：

```
public ActionResult Index()
    {
        List<MySelectListItem> category =
          (from symbolCategory in XDocument.Load("d:\\data.xml").Descendants("Category")
           select new MySelectListItem
           {
               Value = symbolCategory.Attribute("id").Value,
               Text = symbolCategory.Attribute("name").Value,
               Images = GetImgUrl(symbolCategory.Descendants("image"))
           }).ToList();
        return View(category);
    }

    private List<ImageUrl> GetImgUrl(IEnumerable<XElement> list)
    {
        List<ImageUrl> retVal = new List<ImageUrl>();
        foreach (XElement el in list)
        {
            ImageUrl url = new ImageUrl();
            url.Description = el.Attribute("desc").Value;
            url.Url = el.Attribute("url").Value;
            retVal.Add(url);
        }
        return retVal;
    } 
```

模型

```
 public class MySelectListItem
{
    public string Value { set; get; }
    public string Text { set; get; }
    public List<ImageUrl> Images { set; get; }
}
public class ImageUrl
{
    public string Url { set; get; }
    public string Description { set; get; }
} 
```

看法

```
@{
    Layout = null;
}
@model List<MySelectListItem>
<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
    <script type="text/javascript">
        var images = [];
        @foreach (var item in Model)
        {
            <text>images["@item.Value"] = 
            [
            @{int i=0;}

                @foreach(var img in item.Images){
                <text>{url : "@img.Url",desc:"@img.Description"},</text>
                i++;

        }]
        </text>
        }

        function changeImgs(obj) {
            var img = images[obj.value];
            var divImg = document.getElementById("images");
            divImg.innerHTML = "";
            var html = "";
            for (var i = 0; i < img.length; i++) {
                html += img[i].desc + "<br />" + "<img src='" + img[i].url + "' /><br/>";
            }
            divImg.innerHTML = html;
        }
    </script>
</head>
<body>

    <select onchange="changeImgs(this)">
        @foreach(var item in Model)
        {
            <option   value="@item.Value">@item.Text</option>

        }
    </select>
    <div id="images">

    </div>
</body>
</html> 
```

# android - Android，应用程序在屏幕旋转时崩溃，对话框打开

> ID：13401632
> 
> 赞同：5
> 
> 时间：2012-11-15T16:14:22.880
> 
> 标签：android, dialog, rotation

我的应用程序有一个对话框和两个活动，横向和纵向。

当我在其中一项活动中并且在打开对话框时屏幕旋转时，应用程序崩溃。

为了不发生这种情况，我应该“处理”什么？

这是 logcat 输出：（空格表示事情开始向南的地方）

```
11-15 15:56:25.322: D/AndroidRuntime(956): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-15 15:56:25.322: D/AndroidRuntime(956): CheckJNI is ON
11-15 15:56:26.342: W/ThrottleService(77): unable to find stats for iface rmnet0
11-15 15:56:26.382: D/AndroidRuntime(956): Calling main entry com.android.commands.pm.Pm
11-15 15:56:26.442: D/AndroidRuntime(956): Shutting down VM
11-15 15:56:26.452: D/dalvikvm(956): GC_CONCURRENT freed 101K, 78% free 463K/2048K, paused 1ms+1ms
11-15 15:56:26.462: D/dalvikvm(956): Debugger has detached; object registry had 1 entries
11-15 15:56:26.472: I/AndroidRuntime(956): NOTE: attach of thread 'Binder Thread #3' failed
11-15 15:56:27.112: D/AndroidRuntime(969): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-15 15:56:27.112: D/AndroidRuntime(969): CheckJNI is ON
11-15 15:56:28.002: D/AndroidRuntime(969): Calling main entry com.android.commands.am.Am
11-15 15:56:28.032: I/ActivityManager(77): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.soft.test/.myActivity} from pid 969
11-15 15:56:28.032: W/WindowManager(77): Failure taking screenshot for (130x178) to layer 21005
11-15 15:56:28.092: D/AndroidRuntime(969): Shutting down VM
11-15 15:56:28.142: D/dalvikvm(980): Not late-enabling CheckJNI (already on)
11-15 15:56:28.163: D/dalvikvm(969): GC_CONCURRENT freed 102K, 77% free 485K/2048K, paused 1ms+1ms
11-15 15:56:28.163: D/dalvikvm(969): Debugger has detached; object registry had 1 entries
11-15 15:56:28.172: I/AndroidRuntime(969): NOTE: attach of thread 'Binder Thread #3' failed
11-15 15:56:28.252: I/ActivityManager(77): Start proc com.soft.test for activity com.soft.test/.myActivity: pid=980 uid=10046 gids={3003}
11-15 15:56:28.362: I/dalvikvm(980): Turning on JNI app bug workarounds for target SDK version 8...
11-15 15:56:28.452: W/NetworkManagementSocketTagger(77): setKernelCountSet(10046, 1) failed with errno -2
11-15 15:56:29.652: D/dalvikvm(980): GC_CONCURRENT freed 222K, 5% free 6723K/7047K, paused 5ms+16ms
11-15 15:56:29.873: V/PhoneStatusBar(141): setLightsOn(true)
11-15 15:56:29.953: D/gralloc_goldfish(980): Emulator without GPU emulation detected.
11-15 15:56:30.303: I/ActivityManager(77): Displayed com.soft.test/.myActivity: +2s234ms
11-15 15:56:38.073: W/ActivityManager(77): Launch timeout has expired, giving up wake lock!
11-15 15:56:38.510: W/ActivityManager(77): Activity idle timeout for ActivityRecord{4119aad0 com.soft.test/.myActivity}
11-15 15:56:38.563: W/NetworkManagementSocketTagger(77): setKernelCountSet(10009, 0) failed with errno -2
11-15 15:56:54.973: D/dalvikvm(980): GC_CONCURRENT freed 93K, 3% free 7095K/7303K, paused 7ms+27ms
11-15 15:57:00.052: I/InputReader(77): Reconfiguring input devices.  changes=0x00000004
11-15 15:57:00.052: I/InputReader(77): Device reconfigured: id=0, name='qwerty2', surface size is now 320x480, mode is 1
11-15 15:57:00.052: W/SurfaceFlinger(35): createScreenshotSurface failed (Function not implemented)
11-15 15:57:00.062: I/ActivityManager(77): Config changed: {1.0 310mcc260mnc en_US layoutdir=0 sw320dp w320dp h407dp smll port finger -keyb/v/h tball/v s.14}
11-15 15:57:01.072: D/dalvikvm(980): newInstance failed: no <init>()
11-15 15:57:01.072: D/AndroidRuntime(980): Shutting down VM
11-15 15:57:01.082: W/dalvikvm(980): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)

11-15 15:57:01.122: E/AndroidRuntime(980): FATAL EXCEPTION: main
11-15 15:57:01.122: E/AndroidRuntime(980): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.soft.test/com.soft.test.myActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.soft.test.HistoryDialogFragment: make sure class name exists, is public, and has an empty constructor that is public
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.access$700(ActivityThread.java:123)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.os.Looper.loop(Looper.java:137)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.main(ActivityThread.java:4424)
11-15 15:57:01.122: E/AndroidRuntime(980):  at java.lang.reflect.Method.invokeNative(Native Method)
11-15 15:57:01.122: E/AndroidRuntime(980):  at java.lang.reflect.Method.invoke(Method.java:511)
11-15 15:57:01.122: E/AndroidRuntime(980):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-15 15:57:01.122: E/AndroidRuntime(980):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-15 15:57:01.122: E/AndroidRuntime(980):  at dalvik.system.NativeStart.main(Native Method)
11-15 15:57:01.122: E/AndroidRuntime(980): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.soft.test.HistoryDialogFragment: make sure class name exists, is public, and has an empty constructor that is public
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.support.v4.app.Fragment.instantiate(Fragment.java:399)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1760)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)
11-15 15:57:01.122: E/AndroidRuntime(980):  at com.soft.test.myActivity.onCreate(myActivity.java:66)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.Activity.performCreate(Activity.java:4465)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-15 15:57:01.122: E/AndroidRuntime(980):  ... 12 more
11-15 15:57:01.122: E/AndroidRuntime(980): Caused by: java.lang.InstantiationException: can't instantiate class com.soft.test.HistoryDialogFragment; no empty constructor
11-15 15:57:01.122: E/AndroidRuntime(980):  at java.lang.Class.newInstanceImpl(Native Method)
11-15 15:57:01.122: E/AndroidRuntime(980):  at java.lang.Class.newInstance(Class.java:1319)
11-15 15:57:01.122: E/AndroidRuntime(980):  at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
11-15 15:57:01.122: E/AndroidRuntime(980):  ... 19 more
11-15 15:57:01.192: W/ActivityManager(77):   Force finishing activity com.soft.test/.myActivity
11-15 15:57:01.312: I/ARMAssembler(35): generated scanline__00000077:03545404_00008500_00000000 [ 29 ipp] (43 ins) at [0x41357cd8:0x41357d84] in 5238733 ns
11-15 15:57:01.322: W/WindowManager(77): Failure taking screenshot for (120x162) to layer 21010
11-15 15:57:01.832: W/ActivityManager(77): Activity pause timeout for ActivityRecord{4119aad0 com.soft.test/.myActivity}
11-15 15:57:01.932: W/NetworkManagementSocketTagger(77): setKernelCountSet(10009, 1) failed with errno -2
11-15 15:57:02.152: D/dalvikvm(141): GC_CONCURRENT freed 376K, 21% free 7320K/9159K, paused 4ms+121ms
11-15 15:57:02.282: D/dalvikvm(183): GC_EXPLICIT freed 201K, 8% free 7501K/8071K, paused 22ms+14ms
11-15 15:57:02.292: E/StrictMode(183): class com.android.launcher2.Launcher; instances=2; limit=1
11-15 15:57:02.292: E/StrictMode(183): android.os.StrictMode$InstanceCountViolation: class com.android.launcher2.Launcher; instances=2; limit=1
11-15 15:57:02.292: E/StrictMode(183):  at android.os.StrictMode.setClassInstanceLimit(StrictMode.java:1)
11-15 15:57:03.432: W/NetworkManagementSocketTagger(77): setKernelCountSet(10046, 0) failed with errno -2
11-15 15:57:03.792: D/dalvikvm(209): GC_CONCURRENT freed 155K, 4% free 6694K/6919K, paused 4ms+3ms
11-15 15:57:04.933: I/Process(980): Sending signal. PID: 980 SIG: 9
11-15 15:57:05.273: I/ActivityManager(77): Process com.soft.test (pid 980) has died.
11-15 15:57:05.273: I/WindowManager(77): WIN DEATH: Window{4122bc60 com.soft.test/com.soft.test.myActivity paused=false}
11-15 15:57:05.513: D/dalvikvm(77): GC_EXPLICIT freed 237K, 11% free 8967K/10055K, paused 6ms+11ms
11-15 15:57:13.477: W/ActivityManager(77): Activity destroy timeout for ActivityRecord{4119aad0 com.soft.test/.myActivity} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T16:17:21.237

当手机旋转时，Activity 总是会被销毁并重新创建。这意味着它还将尝试重新创建 Fragment。由于您的 Fragment 缺少空构造函数，因此无法重新创建它，因此错误：“ `com.soft.test.HistoryDialogFragment; no empty constructor`”。

您还可以`setRetainInstance(true)`在 Fragments onCreate() 中使用 " " 来制作它，这样它就不会被杀死，而只是暂时删除（从活动中分离）。

这是一个例子： [http ://android-er.blogspot.se/2012/08/retain-fragment-instance-across.html](http://android-er.blogspot.se/2012/08/retain-fragment-instance-across.html)

在这里您可以阅读更多信息： [https ://stackoverflow.com/a/11318942/1068167](https://stackoverflow.com/a/11318942/1068167)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-07T16:50:43.220

如果您同意`DialogFragment` 在屏幕旋转时关闭，这是另一种可能的解决方案。`current_dialog`保留一个跟踪`DialogFragment`当前打开的实例变量，然后将此代码添加到您的`onPause()`：

```
if (current_dialog != null)
    current_dialog.dismiss(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:30:05.607

尝试在 AndroidManifest.xml 中为您的活动添加 android:configChanges="orientation"

# java - Android SQLite 在复杂查询中的性能

> ID：13401642
> 
> 赞同：9
> 
> 时间：2012-11-15T16:15:00.340
> 
> 标签：java, android, sqlite

假设我有这种查询

```
String sql = "SELECT s.team_id, s.team_name, s.gp, s.w, s.t, s.l, s.go, s.ga, s.score, s.p FROM "
           + "(SELECT team_id, team_name, SUM (gp) gp, SUM (w) w, SUM (t) t, SUM (l) l, SUM (GO) go, SUM (GA) ga, SUM (GO)- SUM (GA) score, SUM (2*w+t) p FROM "
           + "(SELECT t._id team_id, t.name team_name, COUNT(CASE WHEN score_home IS NOT NULL THEN 1 END) gp, COUNT (CASE WHEN score_home > score_away THEN 1 END) w,"
           + " COUNT (CASE WHEN score_home = score_away THEN 1 END) t, COUNT (CASE WHEN score_home < score_away THEN 1 END) l,"
           + " SUM (score_home) go, SUM (score_away) ga"
           + " FROM team_table t LEFT OUTER JOIN match_table m ON m.team_home = t._id"
           + " WHERE t.tournament_id = ? GROUP BY t._id, t.name"
           + " UNION ALL"
           + " SELECT t._id team_id, t.name team_name, COUNT(CASE WHEN score_away IS NOT NULL THEN 1 END) gp, COUNT (CASE WHEN score_home < score_away THEN 1 END) w,"
           + " COUNT (CASE WHEN score_home = score_away THEN 1 END) t, COUNT (CASE WHEN score_home > score_away THEN 1 END) l,"
           + " SUM (score_away) go, SUM (score_home) ga"
           + " FROM team_table t LEFT OUTER JOIN match_table m ON m.team_away = t._id"
           + " WHERE t.tournament_id = ? GROUP BY t._id, t.name)"
           + " GROUP BY team_id, team_name) s"
           + " ORDER BY s.p DESC, s.score DESC, s.go ASC"; 
```

然后像这样使用

```
Cursor cursor = database.rawQuery(sql, args);

cursor.moveToFirst();
while (!cursor.isAfterLast()) {
    TeamStats stat = new TeamStats();

    stat.setTeamId(cursor.getLong(0));
    stat.setTeamName(cursor.getString(1));
    stat.setGamesPlayed(cursor.getInt(2));
    stat.setWins(cursor.getInt(3));
    stat.setTies(cursor.getInt(4));
    stat.setLoses(cursor.getInt(5));
    stat.setGoalsOwn(cursor.getInt(6));
    stat.setGoalsAgaist(cursor.getInt(7));
    stat.setScore(cursor.getInt(8));
    stat.setPoints(cursor.getInt(9));

    stats.add(stat);
    cursor.moveToNext();
}
cursor.close(); 
```

所以它从许多表中选择值，执行一些操作等。正如您所见，查询非常复杂（非常难以调试），并且性能似乎没有我预期的那么好。我的问题是：

1.  我可以使用某种准备好的语句来提高性能吗？
2.  执行更简单的查询并使用一些自定义代码手动处理它们会更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T10:03:46.797

如果我是你，我会将你的 sqlite 数据库复制到主机，然后尝试在一些 SQLite GUI 中手动执行它，同时用`?`你拥有的实际变量值替换绑定变量 ()。对于 Windows 上的 GUI，我非常喜欢[SQLite Expert Personal](http://www.sqliteexpert.com/download.html)，并且在 Linux`sqliteman`上非常好。

在调试 SQL（在命令行或 GUI 中）时，请务必通过在`EXPLAIN`和/或下运行 SQL 语句来分析它们[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/eqp.html)。注意表扫描。您应该尝试通过添加索引来消除昂贵的扫描。但不要索引所有内容 - 这可能会使事情变得更糟。通常，您可以通过使用复合（多列）索引来获得很大的性能提升。请注意，在任何给定的表上，SQLite 不能只使用一个索引（在运行给定的 SQL 语句时） - 所以，明智地选择你的索引。（另请参阅[查询计划](http://www.sqlite.org/queryplanner.html)中的基本解释。）

为了解决您对 Java 与 SQLite 中的数据处理的担忧——我认为*针对关系数据*的完全优化（使用适当的索引等）SQLite 查询将（几乎）总是比在 Java 中手动处理这些数据要快。在您的情况下尤其如此 - 您的所有数据基本上都是相关的。

一个小提示：您使用 Java 的 Android APK 可能会比 SQLite 默认访问更多的内存 - 您可能希望使用[`setMaxSqlCacheSize()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#setMaxSqlCacheSize%28int%29)（等效于`PRAGMA cache_size`）增加数据库的 SQLite 缓存大小。Android 默认值为 10（最大 100），尝试增加它，看看是否对您的查询有任何影响。请注意，此设置的桌面 SQLite 默认值要高得多 - 2000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T18:13:16.057

首先，我对 SQLite 了解不多，但我认为它的行为或多或少类似于 MS SQL-Server。

大多数情况下，像这样的简单查询的性能问题通常与缺少索引的情况有关，导致全表扫描而不是部分表扫描或表搜索。如果您在 team_table.tournament_id 上没有索引，那么 SQLite 将不得不扫描整个表以执行“t.tournament_id =？” 手术。match_table.team_home 和 match_table.team_away 也会发生同样的事情：缺少索引将导致对 m.team_home 和 m.team_away 的连接操作进行全表扫描。

对于其余部分，您可以通过两种方式简化查询。第一个是删除外部子查询并在您的 Order by 中使用表达式或列排序；即，您可以将“ORDER BY sp DESC, s.score DESC, s.go ASC”替换为“ORDER BY SUM (2*w+t) DESC, SUM (GO)- SUM (GA) DESC, SUM ( GO) ASC" 并去掉子查询 s。

第二种方法是通过同时对 m.team_home 和 m.team_away 执行左连接操作来用单个查询替换 UNION：

... FROM team_table t LEFT OUTER JOIN match_table m ON (m.team_home = t._id or m.team_away = t._id) ...

之后，很容易更改您的案例语句以正确计算 t._id 是否等于 m.team_home 或 m.team_away 的各种分数。这样，您不仅可以删除 UNION，还可以删除第二个子查询。

最后，一定要看看Left Join的使用；因为我不确定是否真的需要使用常规的内部连接。

之后，您应该得到一个简单的连接查询，其中包含 Group By 和 Order By，并且没有子查询或联合，​​并且可能没有任何左连接。但是，此时，Order By 中的表达式可能变得有点复杂，因此您必须做出决定，要么保持这种方式，要么放回子查询，要么使用列排序（我最后一个最喜欢的选择）。

如果没有联合，查询的执行速度至少要快两倍，但最终，要获得良好的性能，最终要求将是拥有所有正确的索引；否则，如果 sql server 需要执行多次全表扫描，性能永远不会好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:38:08.080

我个人建议您在 Android 上保持查询和数据库结构尽可能简单，并通过代码进行主要处理。

原因之一是复杂的数据库结构与处理不同版本应用程序的升级和降级而不丢失数据的需求混合在一起，可能会很快失控。我现在倾向于以一种 NoSQL 方式设置和处理数据。

另一个原因是因为 SQLite 缺少许多现实世界任务中需要的功能，而且您最终将通过代码处理数据。例如，没有三角函数，因此查找最近的项目可能会变得复杂；）

```
private String getRelitiveDistanceQuery( double lng, double lat, int max){
    return "SELECT *, " +
    // NOTE: this long query was done because there are no trig functions in SQLite so this is an series expansion of some of the functions
    "((3.14159265358979/2-( ((("+Double.toString(lat)+"*0.0174532925199433)-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/6+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/120-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/5040)*((`lat`*0.0174532925199433)-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/6+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/120-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/5040)+(1-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/2+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/24-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/720)*(1-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/2+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/24-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/720)*(1-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/2+(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/24-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/720))+1/6*((("+Double.toString(lat)+"*0.0174532925199433)-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/6+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/120-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/5040)*((`lat`*0.0174532925199433)-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/6+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/120-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/5040)+(1-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/2+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/24-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/720)*(1-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/2+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/24-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/720)*(1-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/2+(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/24-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/720))*((("+Double.toString(lat)+"*0.0174532925199433)-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/6+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/120-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/5040)*((`lat`*0.0174532925199433)-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/6+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/120-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/5040)+(1-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/2+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/24-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/720)*(1-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/2+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/24-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/720)*(1-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/2+(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/24-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/720))*((("+Double.toString(lat)+"*0.0174532925199433)-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/6+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/120-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/5040)*((`lat`*0.0174532925199433)-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/6+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/120-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/5040)+(1-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/2+("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/24-("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)*("+Double.toString(lat)+"*0.0174532925199433)/720)*(1-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/2+(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/24-(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)*(`lat`*0.0174532925199433)/720)*(1-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/2+(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/24-(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)*(("+Double.toString(lng)+" -`lng`)*0.0174532925199433)/720)) ))) AS relDistance " +
    "FROM `"+TABLE_ITEMS+"` ORDER BY relDistance ASC LIMIT "+Integer.toString(max);
} 
```

我编写了一个 perl 脚本来生成此代码，它扩展了三角函数，它实际上工作得很好，但它难以管理，我不推荐它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:26:34.870

不完全是关于快速查询的答案，但是：您可以尝试使用其他帮助表并通过在实际数据表上定义触发器来填充它们。这样，您将准备好大部分聚合数据，并且查询会更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T15:39:24.317

如果您使用准备好的语句，那么它对您有利，因为 1\. 准备好的语句更安全 2\. sql 注入很困难 3\. 它们没有那么复杂 4\. 维护很容易

# jquery - if :checked 向此添加类

> ID：13401653
> 
> 赞同：3
> 
> 时间：2012-11-15T16:15:50.290
> 
> 标签：jquery

我有一个小问题。我想检查一个复选框是否被选中，如果它被选中，我想给他的第一个兄弟添加一个类。HTML：

```
 <input class="box" type="checkbox">
    <p class="red">Red text </p>

    <input class="box" checked type="checkbox">
    <p class="red">I want this text in blue </p> 
```

JS：

```
 if(jQuery(".box").is(":checked")) {
    jQuery(this).next().attr('class', 'blue');                              
} 
```

这里的例子：http: [//jsfiddle.net/LVEqn/](http://jsfiddle.net/LVEqn/)

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:17:07.087

如果要在选中框后的所有元素中添加“蓝色”类，请执行以下操作：

```
$(".box:checked").next().addClass('blue'); 
```

如果要替换现有类，请执行

```
$(".box:checked").next().attr('class', 'blue'); 
```

如果您希望这是动态的，即在用户选中或取消选中时进行更改，请执行

```
$(".box").change(function(){
    $(this).next().attr('class', $(this).is(':checked') ? 'blue' : 'red');
}); 
```

[示范](http://jsfiddle.net/dystroy/uuChJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:17:51.903

试试这个：

```
jQuery(".box:checked").each(function(){
    jQuery(this).next().attr('class', 'blue');
}) 
```

演示： http: [//jsfiddle.net/LVEqn/2/](http://jsfiddle.net/LVEqn/2/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:17:56.350

jQuery

```
$(".box:checked").next().addClass("blue"); 
```

CSS

```
.blue {color: blue !important;} 
```

# c# - LINQ QueryProvider 选择

> ID：13401655
> 
> 赞同：2
> 
> 时间：2012-11-15T16:15:51.990
> 
> 标签：c#, linq, select, iqueryable

我正在尝试为选择编写一个简单的 QueryProvider 并一直失败。这是我的示例查询：

```
var query = from elem in MyIQueryableImplementation
            select new {Name = elem.Name}; 
```

紧随其后的是一个 foreach 语句，该语句调用：

```
public IEnumerator<T> GetEnumerator()
{
    return ((IEnumerable<T>)this.provider.Execute(this.expression)).GetEnumerator();
} 
```

哪个调用（暂时忽略表达式树）：

```
public override object Execute(Expression expression)
{
       return Exec();
} 
```

进而：

```
public static IEnumerable<object> Exec()
{
     for(int i = 0; i < 10; i++)
     {
        yield return new {Name = "TEST"};
     } 
     yield break;
} 
```

运行它，它会抛出异常（在 GetEnumerator() 调用中）：

```
Unable to cast object of type '<Exec>d__0' to type 'System.Collections.Generic.IEnumerable`1[<>f__AnonymousType0`1[System.String]]'. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:23:59.633

`IEnumerable`从 Exec 返回的是一个`IEnumerable<object>`. 它恰好返回从 object 派生的类型的元素，但它的接口类型只是`IEnumerable<object>`. 这就是为什么您不能将其转换为`IEnumerable1[<>f__AnonymousType01[System.String]]`.

不过，您可以按元素进行转换：

```
return ((IEnumerable)this.provider.Execute(this.expression)).Cast<T>().GetEnumerator(); 
```

# coffeescript - 将条件和函数调用放在一行中

> ID：13401656
> 
> 赞同：0
> 
> 时间：2012-11-15T16:16:05.657
> 
> 标签：coffeescript

有没有办法（希望干净）我可以在这里做同样的事情而不分配状态值？当 if 条件在同一行时，我一直遇到 if 条件返回布尔值（而不是函数）的问题。

```
onItemChanged = (event,ui) ->
  input_element = event.target
  list_id = input_element.getAttribute('list_id')
  state = if input_element.checked
            onItemChecked //function of int -> nothing
          else
            onItemUnchecked //function of int -> nothing

  state (list_id ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:58:53.050

像这样：

```
onItemChanged = (event, ui) ->
  input = event.target
  state = if input.checked then onItemChecked else onItemUnchecked
  state input.getAttribute('list_id') 
```

甚至：

```
onItemChanged = ({target: input}, ui) ->
  state = if input.checked then onItemChecked else onItemUnchecked
  state input.getAttribute('list_id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:58:34.493

不确定您是否认为它更干净，但您也可以`if`直接调用表达式的结果：

```
onItemChanged = (event,ui) ->
  input_element = event.target
  list_id = input_element.getAttribute('list_id')
  (if input_element.checked then onItemChecked else onItemUnchecked) list_id 
```

或者也许只是在里面调用`onItemChecked`or ：`onItemUnchecked``if`

```
onItemChanged = (event,ui) ->
  input_element = event.target
  list_id = input_element.getAttribute('list_id')
  if input_element.checked 
    onItemChecked list_id
  else 
    onItemUnchecked list_id 
```

# javascript - 正则表达式 - 在 JS 中使用 /* 而不在注释中获取我的代码

> ID：13401658
> 
> 赞同：5
> 
> 时间：2012-11-15T16:16:17.023
> 
> 标签：javascript, regex

我需要做一些拆分，如下所示：

```
$(element).split(/*(.+)?/)[1]); 
```

但是那些`/*`字符，让我的代码成为注释。我该如何使用它并避免这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:17:53.633

转义`*`字符以从字面上匹配它。这意味着正则表达式中的某些内容。这意味着前一个令牌匹配了 0 次或多次。

```
/\* 
```

正则表达式应该是：

```
/\*(.+)?/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:20:33.227

您可以在开头添加一个没有区别的表达式：

```
/.{0,}*(.+)?/ 
```

# php - 来自 2 个 mysql 表的动态下拉列表

> ID：13401666
> 
> 赞同：1
> 
> 时间：2012-11-15T16:16:47.043
> 
> 标签：php, mysql, sql, database, drop-down-menu

我希望创建一系列从 MYSQL 数据库填充的下拉框。

我在数据库中有2个表，

1.  id, name -
    1|热
    2|冷
    3|蠕虫

2.  id, 表 #1 中的 id (1, 3, 4) -
    1|1, 3, ...
    2|2, 3, ...
    3|1, 2, ...

我需要从表 2 中选择记录并使用表 1 中的名称创建下拉菜单。

我使用以下代码创建了一个下拉列表，但它只显示一个下拉列表并停止。

任何帮助深表感谢

```
 <?php
    $getRss = mysql_query("SELECT * FROM optionals_groups where resid=".$_SESSION['restaid']." order by id asc");
    while ($rss = @mysql_fetch_array($getRss)) { ?>
    <select name="a_<?=$rss['id']?>" id="a_<?=$rss['id']?>" >
      <option value="1" >Select Options</option>
      <?php
        $ot=0;
        $last_ot="";
        $goptionals=explode(', ',($rss['goptionals']));  
    $getRss= mysql_query("SELECT * FROM optionals order by id asc");
        while ($rsso = mysql_fetch_array($getRss)) {
            if (in_array($rsso['id'],$goptionals)) {
                $ot++;
                $last_ot=$rsso['optional'];    
    ?>
      <option value="<?=$rsso['id']?>" ><?=$rsso['optional']?></option>
      <?php 
      } 
    }
    ?>
    </select>
    <br />
    <?php } ?> 
```

更新

这是我到目前为止的位置。我能够使用表 2 创建下拉列表，我需要弄清楚如何从表 1 中为我从表 2 中列出的每个 id 获取名称。

我觉得加入的东西可以完成这项工作，但不太确定。

有任何想法吗？

```
 <?php
      $getRss = mysql_query("SELECT * FROM optionals_groups where       resid=".$_SESSION['restaid']." order by id asc");
    while ($rsr = @mysql_fetch_array($getRss)) {
    $goptionals=explode(', ',($rsr['goptionals']));

echo "<select name='a_".$rsr['id']." id='a_".$rsr['id']."' >";
echo "<option value='1' >Select Options</option>";
    foreach($goptionals as $v)
    {
        echo "<option value=".$v." >".$v."</option>";
    }
         echo "</select><br>";       
    }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:25:06.927

这样做的正确方法是编写一个`join`已经为您提供所需信息的查询，然后创建下拉列表。永远不要在循环中查询您的数据库！

更多提示：

*   不要像那样混合 PHP 和标记，在连接的帮助下创建标记，然后将其发送到视图
*   不要使用错误抑制器`@`。它会混淆你真正想知道的错误。
*   不要再使用古老的、不安全的 mysql_* API，而是使用 PDO 和准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:19:36.947

在您的示例中，`INNER JOIN` 当两个表（id）中至少有一个匹配时返回行

的语法`INNER JOIN`是

```
SELECT column_name(s)
FROM table_name1
INNER JOIN table_name2
ON table_name1.column_name=table_name2.column_name 
```

见[**JOIN**](http://en.wikipedia.org/wiki/Join_%28SQL%29)[描述](http://en.wikipedia.org/wiki/Join_%28SQL%29)

# visual-studio - 如何使用 TFS 2012 在 Visual Studio 2012 中实现签到舞功能

> ID：13401668
> 
> 赞同：1
> 
> 时间：2012-11-15T16:16:53.373
> 
> 标签：visual-studio, visual-studio-macros

我们想要一个我们认为可以为我们的团队节省大量时间的功能。

我们有一个执行门控签入的构建服务器，但它很旧并且负担很重。如果我们可以避免在构建服务器上增加负载，那么我们需要这样做。

当开发人员尝试签入 TFS [如果可能，还有 git、Mercurial] 时，Visual Studio 应该：

1.  获取最新信息。
2.  清洁溶液。
3.  构建解决方案。
4.  运行所有的烟雾单元测试。
5.  如果他们通过，则检查到 TFS。

有谁知道如何在视觉工作室或使用宏或开源或商业工具来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:51:33.550

在 TFS 中，您可以添加一些签入策略以确保开发人员已构建并运行测试。

以下是有关签到政策的更多信息

[http://blogs.msdn.com/b/jjameson/archive/2009/10/31/recommended-check-in-policies-for-team-foundation-server.aspx](http://blogs.msdn.com/b/jjameson/archive/2009/10/31/recommended-check-in-policies-for-team-foundation-server.aspx)

# ios - iOS - 初始加载大量数据

> ID：13401673
> 
> 赞同：2
> 
> 时间：2012-11-15T16:16:59.803
> 
> 标签：ios, json, ios5, core-data

我正在开发一个 B2B 应用程序，客户端需要从其服务器下载相当大的 JSON 数据块 (504 KB)，然后在本地将 JSON 数据处理为核心数据。大约有 4000 条记录，目前将解析的 JSON 数据保存到核心数据需要大约 44 秒。**我的问题不是下载速度或解析。**初次下载后，要更新的新记录不应超过 100 条（很可能 <10 条）。我计划在他们启动应用程序并开始处理请求时弹出一个初始模式屏幕。这是糟糕的设计吗？由于这是一个 B2B 应用程序，我们的客户很可能会接受最初的 45 秒加载时间，但**有没有更有效的方法可以设计它？**

我曾考虑将 JSON 数据直接用作字典，然后在我开始将核心数据保存在后台线程上时将本地核心数据添加到 tableview 但我还没有尝试这样做，这是我应该采取的路线吗?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:42:11.240

好的，所以这是我做的愚蠢的错误。我在每次调用时都初始化了一个日期格式化程序，在我的初始加载中，我正在对每条记录运行一次获取，以查看它是否存在（显然它不存在）删除日期格式后，我从 45 秒变为 20 秒，然后我从 20 秒当我删除提取时到 700 毫秒。

# vb.net - 如何在winform面板上检索找到的控件的值？

> ID：13401682
> 
> 赞同：1
> 
> 时间：2012-11-15T16:17:24.353
> 
> 标签：vb.net, winforms, controls, panels

我会尽量保持简短和甜蜜。

我正在制作一个 UI 来运行 sql 查询，对于用于查询的每个参数，它会为每个参数生成一个标签和一个文本框，并将控件放在面板上。我让这部分正常工作，但现在我需要遍历每个控件并从文本框中为每个参数提取值。因此，如果查询有 2 个参数，它会在面板上生成 2 个标签和 2 个文本框控件。然后我遍历面板上的控件并从每个控件中提取 textbox.text。问题是我找不到如何从文本框控件获取文本来设置每个参数的值来运行查询。

```
 Dim CurrentParameters As New List(Of ParameterDT)
    CurrentParameters = BCWorkerParam.GetData(cboQueries.SelectedValue)

    For Each ctl In pnlParameters.Controls
        If TypeOf ctl Is TextBox Then
            If CurrentParameters.Count > 0 Then

                CurrentParameters.Item(0).DataValue = ""

            End If
        End If
    Next 
```

这里的想法是，我在 CurrentParameters 中有查询的参数列表。然后，我遍历面板上的控件，对于找到的每个文本框，我将参数值设置为该行所述的 textbox.text， `CurrentParameters.Item(0).DataValue = ""`其中`""`需要是当前找到的文本框控件文本。

如果还有其他方法可以做到这一点，请随时向我提出这些想法。我认为这会起作用是因为即使我使用索引将控件与参数匹配，它也会根据每个参数创建控件，因此它们应该是同步的。

* * *

好吧，我给出建议，下面的代码是在面板上生成控件的内容。我添加了 .Tag 部分，其余部分与上述相同。

```
'Generate query parameters
        Dim CurrentTopPosition As Integer = 10
        For Each param In Parameters

            pnlParameters.AutoSize = True
            Dim lblParam As New Label

            lblParam.Text = param.DisplayName
            lblParam.TextAlign = ContentAlignment.MiddleRight
            lblParam.Top = CurrentTopPosition
            lblParam.Left = 5
            lblParam.Width = 100
            pnlParameters.Controls.Add(lblParam)

            Dim ctlParam As New Object
            Select Case param.DataType
                Case "String"
                    ctlParam = New TextBox
                    ctlParam.tag = param
                Case "DateTime"
                    ctlParam = New DateTimePicker
                    ctlParam.tag = param
                Case "Integer"
                    ctlParam = New TextBox
                    ctlParam.tag = param
                Case "Double"
                    ctlParam = New TextBox
                    ctlParam.tag = param
            End Select
            ctlParam.Top = CurrentTopPosition
            ctlParam.Left = 110
            ctlParam.Width = 150
            ctlParam.Tag = param
            pnlParameters.Controls.Add(ctlParam)
            CurrentTopPosition += 30
        Next 
```

现在，一旦生成了这些控件，我将遍历它们并执行此代码以执行查询。

```
 Dim CurrentParameters As New List(Of ParameterDT)
    CurrentParameters = BCWorkerParam.GetData(cboQueries.SelectedValue)
    Dim index As Integer = 0
    For Each ctl In pnlParameters.Controls
        If TypeOf ctl Is TextBox Then
            DirectCast(ctl.Tag, ParameterDT).DataValue = ctl.Text
            'CurrentParameters.Item(index).DataValue = ctl.text
            'index += 1
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:33:22.117

创建 TextBox 时，可以使用 TextBox 的 Tag 属性来保存每个参数对象：

```
For Each p As ParameterDT In BCWorkerParam.GetData(cboQueries.SelectedValue)
  Dim txtBox As New TextBox()
  txtBox.Properties = yada-yada-yada
  txtBox.Tag = p
  pnlParameters.Controls.Add(txtBox)
Next 
```

然后，当您需要读取值时，可以尝试以下操作：

```
For Each txtBox As TextBox In pnlParameters.Controls.OfType(Of Textbox)()
  DirectCast(txtBox.Tag, ParameterDT).DataValue = txtBox.Text
Next 
```

# java - postgres id 生成和休眠的问题

> ID：13401683
> 
> 赞同：2
> 
> 时间：2012-11-15T16:17:27.537
> 
> 标签：java, hibernate, postgresql, hibernate-annotations

由于某种原因，当我从应用程序 id 插入数据库时​​，它始终为 0。这是用于 spring security auth 表用户的表，从 pgadmin II 复制：

```
 id serial NOT NULL,
  username character varying(100),
  password character varying(200),
  groupfk integer,
  CONSTRAINT users_pk PRIMARY KEY (id ),
  CONSTRAINT users_groupfk_fkey FOREIGN KEY (groupfk)
  REFERENCES groups (id) MATCH SIMPLE
  ON UPDATE NO ACTION ON DELETE NO ACTION 
```

我的用户域类中有以下相关 ID 部分：

```
 @Id
    @Column(name = "id", columnDefinition = "serial")
    @Generated(GenerationTime.INSERT)
    public int getId() {
        return id;
    }

    @ManyToOne
@JoinColumn(name = "groupfk")
public Group getGroup() {
    return group;
}

public void setGroup(Group group) {
    this.group = group;
} 
```

所以我像这样插入用户：

```
User user = new User();
        user.setPassword(password);
        user.setUsername(username);

        Group group = new Group();
        group.setId(usergroup);
        user.setGroup(group);
                dao.saveUser(user); 
```

道方法 impl :

```
public void save(User user) {
        Session session = sessionFactory.getCurrentSession();
        session.save(user);
    } 
```

所以这是我得到的例外：

```
Could not execute JDBC batch update; SQL [insert into users (groupfk, password, username, id) values (?, ?, ?, ?)]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update 
```

真实查询：

```
Batch entry 0 insert into users (groupfk, password, username, id) values ('1', '098f6bcd4621d373cade4e832627b4f6', 'test3', '0') was aborted.  Call getNextException to see the cause. 
```

所以我用 id 插入了以前的用户，`0`它成功了。我试图插入另一个，但因为它具有相同的 ID，所以发生了这个错误。

通常，如果我尝试使用 sql trough sql client (pgadmin) 插入它，它可以正常工作，这可以按预期工作：

```
insert into users (username, password, groupfk) VALUES ('test', 'c20ad4d76fe97759aa27a0c99bff6710',1); 
```

因此，由于某种原因，hibernate 无法适当地生成我的 id，事实是，如果上述语句有效，则根本不应该生成它。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:19:25.560

您的 ID 应该是`Integer`，而不是`int`。每次创建类的实例时，它都会将 的值初始化`this.id`为 0。Hibernate 会认为这个对象已经被持久化，但已断开连接。您希望将其视为瞬态的，这由具有空 ID 表示。[请参阅手册中有关 Hibernate 对象状态](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html)的讨论。

当你 时`session.save(user)`，Hibernate 会看到 ID 为 null，意识到对象是瞬态的，为它生成一个 ID，并保存它。

# iphone - 从 ios 应用程序简单地登录到 facebook

> ID：13401686
> 
> 赞同：0
> 
> 时间：2012-11-15T16:17:30.423
> 
> 标签：iphone, ios, facebook

我正在尝试使用 ios 应用程序登录 facebook。当我单击应用程序中的登录按钮时，它会崩溃。

它在这一点上崩溃：

[self presentModalViewController:_loginDialog 动画：YES];

并在日志中返回：

```
fbconnect=1&skip_api_login=1&m=m&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D169265183116528%26redirect_uri%3Dhttp%253A%252F%252Fwww.facebook.com%252Fconnect%252Flogin_success.html%26display%3Dtouch%26type%3Duser_agent%26perms%3Dpublish_stream%26fbconnect%3D1%26from_login%3D1%26client_id%3D169265183116528&refsrc=http%3A%2F%2Fm.facebook.com%2Flogin.php&cancel=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&landing_serial=1&refid=9> 
```

在这方面需要一些指导......关于将 facebook 链接到 ios 的新功能

**已编辑**

```
#import "FBFunViewController.h"
#import "ASIHTTPRequest.h"
#import "ASIFormDataRequest.h"
#import "JSON.h"
#import "faceAppDelegate.h"

@implementation FBFunViewController
@synthesize loginStatusLabel = _loginStatusLabel;
@synthesize loginButton = _loginButton;
@synthesize loginDialog = _loginDialog;
@synthesize loginDialogView = _loginDialogView;
@synthesize textView = _textView;
@synthesize imageView = _imageView;
@synthesize segControl = _segControl;
@synthesize webView = _webView;
@synthesize accessToken = _accessToken;
@synthesize postmessage, act;

#pragma mark Main

- (void)dealloc {
    self.loginStatusLabel = nil;
    self.loginButton = nil;
    self.loginDialog = nil;
    self.loginDialogView = nil;
    self.textView = nil;
    self.imageView = nil;
    self.segControl = nil;
    self.webView = nil;
    self.accessToken = nil;
    self.postmessage=nil;
    [super dealloc];
}

- (void) setLoginState
{
    NSString *appId = @"";  //
    NSString *permissions = @"publish_stream";
    _loginState = LoginStateStartup;
    self.loginDialog = [[[FBFunLoginDialog alloc] initWithAppId:appId requestedPermissions:permissions delegate:self] autorelease];
    self.loginDialogView = _loginDialog.view;
    [self showActivityIndicator];
}

- (void)refresh {

    if (_loginState == LoginStateStartup || _loginState == LoginStateLoggedOut) {
        _loginStatusLabel.text = @"Not connected to Facebook";
        //[_loginButton setTitle:@"Login" forState:UIControlStateNormal];
        _loginButton.hidden = NO;
         NSLog(@"_login state: <%d>",_loginState);
         [self componentsVisibility:YES];

         if (_loginState == LoginStateLoggedOut) {
             faceAppDelegate *pdel = (faceAppDelegate *)[[UIApplication sharedApplication] delegate];
             [pdel removeFBVC];
             [self.navigationController popViewControllerAnimated:YES];
         }
         else {
             [self loginButtonTapped:nil];
         }

    } else if (_loginState == LoginStateLoggingIn) {
        _loginStatusLabel.text = @"Connecting to Facebook...";
        _loginButton.hidden = YES;
    } else if (_loginState == LoginStateLoggedIn) {
        _loginStatusLabel.text = @"Connected to Facebook";
       // [_loginButton setTitle:@"Logout" forState:UIControlStateNormal];
        _loginButton.hidden = NO;
         [self hideActivityIndicator];
         [self componentsVisibility:NO];
    }  
    _textView.text = self.postmessage;
    _textView.font = [UIFont systemFontOfSize:13];
}

- (void) componentsVisibility:(BOOL) flag
{
    NSLog(@"control in components visibility setting:  <%d>",flag);
    [lblPostToWall setHidden:flag];
    [btnCancel setHidden:flag];
    [btnPublish setHidden:flag];
    [self.textView setHidden:flag];
}

- (void)viewWillAppear:(BOOL)animated {
    [self refresh];
}

- (IBAction) btnCancelClicked: (id) sender
{
    faceAppDelegate *pdel = (faceAppDelegate *)[[UIApplication sharedApplication] delegate];
    [pdel removeFBVC];
    [self.navigationController popViewControllerAnimated:YES];
}

#pragma mark Login Button

- (IBAction)loginButtonTapped:(id)sender {

    //NSLog(@"login tapped");
    NSString *appId = @"";  //
    NSString *permissions = @"publish_stream";
    // NSString *permissions = @"email";

    if (_loginDialog == nil) {
        self.loginDialog = [[[FBFunLoginDialog alloc] initWithAppId:appId requestedPermissions:permissions delegate:self] autorelease];
        self.loginDialogView = _loginDialog.view;
    }

    if (_loginState == LoginStateStartup || _loginState == LoginStateLoggedOut) {
         [self showActivityIndicator];
        _loginState = LoginStateLoggingIn;
        [_loginDialog login];
    } else if (_loginState == LoginStateLoggedIn) {
        _loginState = LoginStateLoggedOut;        
        [_loginDialog logout];
         [self hideActivityIndicator];
    }
    [self refresh];

}

- (void ) showActivityIndicator
{
    //NSLog(@"control in show activity indicator view>>>>>>>>>>>>>>>");
    //act = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(150, 220, 50, 50)];
    if (self.act == nil) {
        self.act = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    }

    [self.act setCenter:CGPointMake(self.view.frame.size.width/2.0, self.view.frame.size.height/2.0)];
    [self.view addSubview:self.act];
    //act.backgroundColor = [UIColor grayColor];
    [self.act startAnimating];
}

- (void ) hideActivityIndicator
{
    //NSLog(@"hide activity indicator");
    [self.act stopAnimating];
    [self.act removeFromSuperview];
    [self.act setFrame:CGRectMake(-100, -100, 20, 20)];
    self.act = nil;
}

#pragma mark FB Requests

- (void)showLikeButton {

    // Source: http://developers.facebook.com/docs/reference/plugins/like-box
    NSString *likeButtonIframe = @"<iframe src=\"http://www.facebook.com/plugins/likebox.php?id=122723294429312&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:282px; height:62px;\" allowTransparency=\"true\"></iframe>";
    NSString *likeButtonHtml = [NSString stringWithFormat:@"<HTML><BODY>%@</BODY></HTML>", likeButtonIframe];

    [_webView loadHTMLString:likeButtonHtml baseURL:[NSURL URLWithString:@""]];

}

- (void)getFacebookProfile {
    NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=%@", [_accessToken stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSURL *url = [NSURL URLWithString:urlString];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDidFinishSelector:@selector(getFacebookProfileFinished:)];

    [request setDelegate:self];
    [request startAsynchronous];
}

- (void)rateTapped:(id)sender {
    NSLog(@"control in rate tapped with message:  <%@>",self.postmessage);

    NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];
    ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url];
    [newRequest setPostValue:self.postmessage forKey:@"message"];
    [newRequest setPostValue:@"" forKey:@"name"];
    [newRequest setPostValue:@"" forKey:@"caption"];
    [newRequest setPostValue:@"" forKey:@"description"];
   [newRequest setPostValue:@"" forKey:@"link"];
   [newRequest setPostValue:@"http://CMS/images/forlogo/" forKey:@"picture"];
    [newRequest setPostValue:_accessToken forKey:@"access_token"];
    [newRequest setDidFinishSelector:@selector(postToWallFinished:)];

    [newRequest setDelegate:self];
    [newRequest startAsynchronous];

    /*
    NSString *likeString;

   // NSString *message = [NSString stringWithFormat:@"I think this is a %@ %@!", adjectiveString, likeString];

    NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/photos"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
  //  [request addFile:filePath forKey:@"file"];
    [request setPostValue:self.postmessage forKey:@"message"];
    [request setPostValue:_accessToken forKey:@"access_token"];
   // [request setDidFinishSelector:@selector(sendToPhotosFinished:)];
    [request setDidFinishSelector:@selector(getFacebookPhotoFinished:)];

    [request setDelegate:self];
    [request startAsynchronous];*/

}

- (void)sendToPhotosFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];

    NSMutableDictionary *responseJSON = [responseString JSONValue];
    NSString *photoId = [responseJSON objectForKey:@"id"];
    NSLog(@"Photo id is: %@", photoId);

    NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/%@?access_token=%@", photoId, [_accessToken stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSURL *url = [NSURL URLWithString:urlString];
    ASIHTTPRequest *newRequest = [ASIHTTPRequest requestWithURL:url];
    [newRequest setDidFinishSelector:@selector(getFacebookPhotoFinished:)];

    [newRequest setDelegate:self];
    [newRequest startAsynchronous];

}

#pragma mark FB Responses

- (void)getFacebookProfileFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];
    NSLog(@"Got Facebook Profile: %@", responseString);

    NSString *likesString;
    NSMutableDictionary *responseJSON = [responseString JSONValue];   
    NSArray *interestedIn = [responseJSON objectForKey:@"interested_in"];
    if (interestedIn != nil) {
        NSString *firstInterest = [interestedIn objectAtIndex:0];
        if ([firstInterest compare:@"male"] == 0) {
            [_imageView setImage:[UIImage imageNamed:@"depp.jpg"]];
            likesString = @"dudes";
        } else if ([firstInterest compare:@"female"] == 0) {
            [_imageView setImage:[UIImage imageNamed:@"angelina.jpg"]];
            likesString = @"babes";
        }        
    } else {
        [_imageView setImage:[UIImage imageNamed:@"maltese.jpg"]];
        likesString = @"puppies";
    }

    NSString *username;
    NSString *firstName = [responseJSON objectForKey:@"first_name"];
    NSString *lastName = [responseJSON objectForKey:@"last_name"];
    if (firstName && lastName) {
        username = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
    } else {
        username = @"mysterious user";
    }

   // _textView.text = [NSString stringWithFormat:@"Hi %@!  I noticed you like %@, so tell me if you think this pic is hot or not!",
     //                 username, likesString];
    _textView.text = self.postmessage;
    [self refresh];    
}

- (void)getFacebookPhotoFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];
    NSLog(@"Got Facebook Photo: %@", responseString);

    NSMutableDictionary *responseJSON = [responseString JSONValue];   

   // NSString *link = [responseJSON objectForKey:@"link"];
//    if (link == nil) return;
//    NSLog(@"Link to photo: %@", link);

    /*
    NSString *adjectiveString;
    if (_segControl.selectedSegmentIndex == 0) {
        adjectiveString = @"cute";
    } else {
        adjectiveString = @"ugly";
    }
    */

    // Ideally I would have liked to include this as the image for the wall post, but Facebook doesn't allow this :P
    // See: http://forum.developers.facebook.com/viewtopic.php?id=62521&p=2
    // Update: actually now you can!

    NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];
    ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url];
    [newRequest setPostValue:self.postmessage forKey:@"message"];
    [newRequest setPostValue:@"" forKey:@"name"];
   // [newRequest setPostValue:@"via " forKey:@"caption"];
    //[newRequest setPostValue:[NSString stringWithFormat:@"And by the way - check out this %@ pic.", adjectiveString] forKey:@"description"];
  //  [newRequest setPostValue:@"From Ray Wenderlich's blog - an blog about iPhone and iOS development." forKey:@"description"];
   // [newRequest setPostValue:@"http://www.raywenderlich.com" forKey:@"link"];
   // [newRequest setPostValue:link forKey:@"picture"];
    //[newRequest setPostValue:@"http://www.raywenderlich.com/wp-content/themes/raywenderlich/images/logo.png" forKey:@"picture"];
    [newRequest setPostValue:_accessToken forKey:@"access_token"];
    [newRequest setDidFinishSelector:@selector(postToWallFinished:)];

    [newRequest setDelegate:self];
    [newRequest startAsynchronous];

}

- (void)postToWallFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];
    NSLog(@"response string:  <%@>",responseString);

    NSMutableDictionary *responseJSON = [responseString JSONValue];
    NSString *postId = [responseJSON objectForKey:@"id"];
    NSLog(@"Post id is: %@", postId);
    NSString *msg;
    NSRange aRange = [responseString rangeOfString:@"error"];
    NSRange bRange = [responseString rangeOfString:@"Feed action request limit reached"];
    if (aRange.location ==NSNotFound) {
        msg = @"Posted to Facebook successfully";
    }
    else    if (bRange.location != NSNotFound ){
        msg = @"You have reached the maximum post limit to Facebook for today. Please try again later.";
    }
    else {
        msg = @"Error occurred. Please try again later";
    }

    UIAlertView *av = [[[UIAlertView alloc] initWithTitle:msg
                                                  message:@""
                                                 delegate:self 
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil] autorelease];
    [av show];

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    faceAppDelegate *pdel = (faceAppDelegate *)[[UIApplication sharedApplication] delegate];
    [pdel removeFBVC];
    [self.navigationController popViewControllerAnimated:YES];
}

#pragma mark FBFunLoginDialogDelegate

- (void)accessTokenFound:(NSString *)accessToken {
    NSLog(@"Access token found: %@", accessToken);
    self.accessToken = accessToken;
    _loginState = LoginStateLoggedIn;
    [self dismissModalViewControllerAnimated:YES];    
    [self getFacebookProfile];  
    [self showLikeButton];
    [self refresh];
}

- (void)displayRequired {
    [self presentModalViewController:_loginDialog animated:YES];
    [self hideActivityIndicator];
}

- (void)closeTapped {
    [self dismissModalViewControllerAnimated:YES];
    _loginState = LoginStateLoggedOut;        
    [_loginDialog logout];
    [self refresh];
    [self hideActivityIndicator];

}

@end 
```

错误：

```
fbconnect=1&skip_api_login=1&m=m&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26%26redirect_uri%3Dhttp%253A%252F%252Fwww.facebook.com%252Fconnect%252Flogin_success.html%26display%3Dtouch%26type%3Duser_agent%26perms%3Dpublish_stream%26fbconnect%3D1%26from_login%3D1%26client_id%3D169265183116528&refsrc=http%3A%2F%2Fm.facebook.com%2Flogin.php&cancel=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&landing_serial=1&refid=9> 
```

![在此处输入图像描述](../Images/6895f665c3e646b454ffd39d88b4fc16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:30:54.790

您的代码似乎没有任何问题。我猜您正在关注 Ray 的旧教程。

如您所见，您的日志`r%3Daccess_denied%26error_`访问被 facebook 拒绝。现在可能有各种原因。你需要找出来。

最简单的原因可能是您没有在 info.plist 中添加或更改您的 appID（在 URL 类型中 info.plist 下的 Supporting Files 文件夹中添加/更改 NSdictionary 项，确保字符串等于您的 appID 在您的情况下它是 `3D169265183116528`或`fb3D169265183116528`）

如果那不起作用，我建议您查看这两个问题：

[安装 Facebook 应用程序的身份验证失败 (iOS)](https://stackoverflow.com/questions/7257894/authentication-fails-with-facebook-app-installed-ios)

[iOS：无需离开应用授权即可连接 Facebook](https://stackoverflow.com/questions/5666523/ios-connect-to-facebook-without-leaving-the-app-for-authorization)

如果我记得正确的 grap api 应该在你的 plist 中 ![在此处输入图像描述](../Images/487ad33c4b2feace7bf1c30fc2fe13ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:30:59.410

@lakesh 我认为[这](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)会对您有所帮助。

# powershell - Powershell：无法从远程计算机获取网络打印机列表并将这些打印机安装在新计算机上

> ID：13401687
> 
> 赞同：2
> 
> 时间：2012-11-15T16:17:44.277
> 
> 标签：powershell, wmi

学习powershell 2周，所以慢慢解释。$oldMachineName 通常由用户使用 Read-host 设置。在下面的脚本中，我将其替换为各种名称以测试不同的场景。

我的脚本：

```
$oldPcName = Read-Host "Please enter the name or IP address of the old pc."

$oldNetworkPrinters = Get-WmiObject win32_printer -ComputerName "$oldPcName" 

foreach ($printer in $oldNetworkPrinters)
    {
    $fullPath =$printer.name
    write-host $fullPath
     (New-Object -ComObject WScript.Network).AddWindowsPrinterConnection($fullPath)           
    } 
```

当我在旧计算机上运行脚本时 $fullPath 的结果值，得到它自己的打印机列表：

> PDF-XChange 4.0
> 
> Microsoft XPS 文档编写器
> 
> 传真
> 
> 可爱的PDF Writer
> 
> \PPAS0969I\PPAP_RIVERHOUNDS_PCL
> 
> \PPAS0969I\PPAP_HP5KIT_PCL
> 
> \PPAS0969I\PPAP_HP5KIT_PS
> 
> \PPAS0969I\PPAP_RIVERHOUNDS_PS
> 
> \PPAS0969I\ppap_panthers_pcl

当我在新计算机上运行脚本时 $fullPath 的结果值，获取旧计算机的打印机列表：

> PDF-XChange 4.0
> 
> Microsoft XPS 文档编写器
> 
> 传真
> 
> 可爱的PDF Writer

当我在新计算机上运行脚本时 $fullPath 的结果值，得到它自己的打印机列表：

> PDF-XChange 4.0
> 
> Microsoft XPS 文档编写器
> 
> 传真

从新计算机获取旧列表时CutePDF writer的存在以及新计算机获取自己的列表时不存在来看，我会说新计算机成功地从旧计算机接收打印机列表。现在，为什么网络打印机不包含在该列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:04:29.180

网络打印机（与另一台服务器共享的打印机，即 PPAS0969I）是每个用户的，因此当您查询时`Win32_Printer`，您只能看到本地打印机以及加载在当前配置文件中的打印机。

为了帮助说明，请尝试运行以下命令：

```
gwmi win32_printer | select name,local | ft -a 
```

# php - 在 PHP 中如何使用函数作为 IF 语句的参数？

> ID：13401694
> 
> 赞同：0
> 
> 时间：2012-11-15T16:17:55.180
> 
> 标签：php, mysql

我从教程中获得了以下代码，但是即使在查看了几个教程之后，我也无法完全理解它的确切工作原理，尽管它非常基础。

```
 if(mysql_num_rows($result)) { 
    while($term = mysql_fetch_assoc($result)) {   
      $terms[] = array('term'=>$term);    
    }
  } 
```

我无法理解 IF 语句在这里实际测试的内容。我知道 MySQL_num_rows 函数正在计算我的数据库查询返回的行数并返回一个整数（在此查询的情况下只有一行），但这对 IF 语句意味着什么。我假设它正在测试以确保它不为空，这是正确的吗？即使这背后的确切逻辑是什么。

对不起初学者的问题，刚刚开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:21:15.657

在`if`语句中，值在检查之前被转换为布尔值。

所以，`mysql_num_rows`返回一个数字。如果它是`0`，它将转换为`false`，并且`1`（或更高）变为`true`。然后`if`运行与否取决于布尔转换。

来自[PHP 文档](http://php.net/manual/en/language.types.boolean.php)：

转换为布尔值时，会考虑以下值`FALSE`：

*   布尔值 FALSE 本身
*   整数 0（零）
*   浮点数 0.0（零）
*   空字符串和字符串“0”
*   一个元素为零的数组
*   具有零成员变量的对象（仅限 PHP 4）
*   特殊类型 NULL（包括未设置的变量）
*   从空标签创建的 SimpleXML 对象

考虑所有其他值`TRUE`（包括任何资源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:20:40.847

它正在测试以了解是否有结果。如果没有返回结果，则值为 0，其计算结果为 false，因此将跳过循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:21:04.417

此函数`mysql_num_rows($result)`返回所选行的数量，如果超过 0 则转换为 TRUE，否则为 0 -> FALSE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:23:39.287

PHP 在解释 if 语句的方式上非常松散，它正在测试函数是否返回了任何东西或者它是否为真（任何实例化的东西都算作真，所以如果它返回了任何行，它就算作真） , false（即未实例化已返回 0 或错误）或 null/none（与 false 基本相同）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T16:26:54.227

在这个循环的每个序列中，它获取指针指向的记录。然后指针转到下一条记录。但是如果没有记录（最后），则`$term`数组将为空，相当于布尔值`FALSE`

看看这个： http: [//php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php)

所以while循环在这一点上停止。

# java - 在 TestNG 套件 xml 文件中按顺序运行测试

> ID：13401696
> 
> 赞同：2
> 
> 时间：2012-11-15T16:18:00.097
> 
> 标签：java, automated-tests, testng

我有以下*testng.xml*文件。我希望 testng 按顺序运行这些测试。我不想将这些测试中的每一个分离到一个新文件中。

```
<suite name="framework-tests" allow-return-values="true" verbose="10">
        <test name="framework-tests-single-program">
            <classes>
                <class name="testngdriver.TestFactory"/>
            </classes>
            <groups>
                <run>
                    <include name="framework-tests" />
                </run>  
            </groups>
            <parameter name="testInterfaceXML" value="programSingleInterface.xml"></parameter>       
            <parameter name="testSuiteXML" value="programTestSingleProgram.xml"></parameter>       
        </test>

        <test name="framework-tests-two-programs">
            <classes>
                <class name="testngdriver.TestFactory"/>
            </classes>
            <groups>
                <run>
                    <include name="framework-tests" />
                </run>  
            </groups>
            <parameter name="testInterfaceXML" value="programTwoInterface.xml"></parameter>       
            <parameter name="testSuiteXML" value="programTestTwoPrograms.xml"></parameter>       
        </test>
    </suite> 
```

我在套件级别尝试了*并行*=“*测试*”、“*类*”、“*方法*”和*线程计数 = 1*的组合，但没有一个有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:40:00.677

测试应按以下顺序运行：

> 默认情况下，TestNG 将按照它们在 XML 文件中的顺序运行您的测试。如果您希望此文件中列出的类和方法以不可预测的顺序运行，请将 preserve-order 属性设置为 false [[1]](http://testng.org/doc/documentation-main.html#testng-xml)

*`parallel`*不应使用该属性，或者您可以将其设置为*'false'*。

# android - android中的SocketTimeoutException

> ID：13401697
> 
> 赞同：1
> 
> 时间：2012-11-15T16:18:03.947
> 
> 标签：android

当我调用`androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);` 它抛出 SocketTimeoutException 的方法时，代码如下：

```
public SoapObject CallWebService() throws IOException, XmlPullParserException 
    {       
        SoapObject response=null;
        SoapSerializationEnvelope Envelope = GetEnvelope(request);
        Envelope.bodyOut=request;
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport (URL);
        androidHttpTransport.debug=true;
        try
           { 
            if(Envelope!=null)
            {
               androidHttpTransport.call(NAMESPACE + METHOD_NAME, Envelope);
            }
               response = (SoapObject) Envelope.getResponse();
               Envelope_class = Envelope;
           }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.d("AndroidRequest",androidHttpTransport.requestDump);
            Log.d("AndroidResponse",androidHttpTransport.responseDump);
            return null;
        }
        return response;
    } 
```

堆栈跟踪：11-15 16:08:10.767：W/System.err(833)：java.net.SocketTimeoutException 11-15 16:08:10.845：W/System.err(833)：在 org.ksoap2.transport .HttpTransportSE.call(HttpTransportSE.java:130) 11-15 16:08:10.860: W/System.err(833): 在 ApplicationManager.ps.webServices.CallWebService(webServices.java:75) 11-15 16:08 :10.875: W/System.err(833): 在 ApplicationManager.ps.MainActivity.connect(MainActivity.java:352) 11-15 16:08:10.895: W/System.err(833): 在 ApplicationManager.ps。 MainActivity.getBoughtApps(MainActivity.java:165) 11-15 16:08:10.925: W/System.err(833): 在 ApplicationManager.ps.MainActivity$2.onClick(MainActivity.java:108) 11-15 16:08 :10.925: W/System.err(833): 在 android.view.View.performClick(View.java:2485) 11-15 16:08:10.966: W/System.err(833): 在 android.view。 View$PerformClick.run(View.java:9080) 11-15 16:08:10.966：W/系统。错误（833）：在 android.os.Handler.handleCallback（Handler.java:587）11-15 16:08:10.985：W/System.err（833）：在 android.os.Handler.dispatchMessage（Handler.java :92) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err (833): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method ) 11-15 16:08:11.005: W/System.err(833): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err (833): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err(833): at dalvik.system.NativeStart.main(Native Method)在 android.os.Handler.handleCallback(Handler.java:587) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11- 15 16:08:10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在android.app.ActivityThread.main(ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16 :08:11.005: W/System.err(833): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os.ZygoteInit.main （ZygoteInit.java:597）11-15 16:08:11.005：W/System.err（833）：在 dalvik.system.NativeStart.main（本机方法）在 android.os.Handler.handleCallback(Handler.java:587) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11- 15 16:08:10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在android.app.ActivityThread.main(ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16 :08:11.005: W/System.err(833): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os.ZygoteInit.main （ZygoteInit.java:597）11-15 16:08:11.005：W/System.err（833）：在 dalvik.system.NativeStart.main（本机方法）handleCallback(Handler.java:587) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread.main (ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/ System.err(833): at java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err(833): 在 dalvik.system.NativeStart.main(Native Method)handleCallback(Handler.java:587) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread.main (ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/ System.err(833): at java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err(833): 在 dalvik.system.NativeStart.main(Native Method)985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Looper .loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 11-15 16:08:10.999 : W/System.err(833): at java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): at java.lang.reflect.Method .invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11- 15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err( 833）：在 dalvik.system.NativeStart.main（本机方法）985: W/System.err(833): 在 android.os.Handler.dispatchMessage(Handler.java:92) 11-15 16:08:10.985: W/System.err(833): 在 android.os.Looper .loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 11-15 16:08:10.999 : W/System.err(833): at java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): at java.lang.reflect.Method .invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11- 15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err( 833）：在 dalvik.system.NativeStart.main（本机方法）10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread .main(ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 597）11-15 16:08:11.005：W/System.err（833）：在 dalvik.system.NativeStart.main（本机方法）10.985: W/System.err(833): 在 android.os.Looper.loop(Looper.java:123) 11-15 16:08:10.999: W/System.err(833): 在 android.app.ActivityThread .main(ActivityThread.java:3683) 11-15 16:08:10.999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-15 16:08:11.005: W/System.err(833): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 597）11-15 16:08:11.005：W/System.err（833）：在 dalvik.system.NativeStart.main（本机方法）999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): 在 java.lang.reflect。 Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11 -15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err （833）：在 dalvik.system.NativeStart.main（本机方法）999: W/System.err(833): 在 java.lang.reflect.Method.invokeNative(Native Method) 11-15 16:08:11.005: W/System.err(833): 在 java.lang.reflect。 Method.invoke(Method.java:507) 11-15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11 -15 16:08:11.005: W/System.err(833): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err （833）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err(833): at dalvik.system.NativeStart.main(Native Method)ZygoteInit.main(ZygoteInit.java:597) 11-15 16:08:11.005: W/System.err(833): at dalvik.system.NativeStart.main(Native Method)

问题出在哪里 ？

# asp.net - ASP.NET：如何从 LinkBut ton 单击中找到我的其他行元素？

> ID：13401702
> 
> 赞同：0
> 
> 时间：2012-11-15T16:18:26.303
> 
> 标签：asp.net, vb.net, repeater, linkbutton

我每行都有`Repeater`一个`LinkButton`。我希望能够读取`Label`与`LinkButton`. 这是我当前正在使用的代码，但我不确定在我的“单击”方法中放置什么链接按钮以获取我行中其他控件的值。

**中继器 ItemDataBound**

```
Private Sub Repeater_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles Repeater.ItemDataBound

   Dim oRow As xsdTable.MyDataTableRow
   Dim RemoveLinkButton As LinkButton

   RemoveLinkButton = e.Item.FindControl("RemoveLinkButton")
   AddHandler RemoveLinkButton.Click, AddressOf RemoveLinkButton_Click

   // Set other Controls Information   

End Sub 
```

**RemoveLinkBut​​ton 点击​​事件**

```
Public Sub RemoveLinkButton_Click(sender As Object, e As System.EventArgs)

    // Not sure what to do here to get the id for that row and identify the other 
    // controls to get the information from them...

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:23:03.597

您可以使用 [`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)控件的属性来获取`RepeaterItem`：

```
Public Sub RemoveLinkButton_Click(sender As Object, e As System.EventArgs)

    Dim control = DirectCast(sender, Control)
    Dim item = DirectCast(control.NamingContainer, RepeaterItem)
    ' now use FindControl to get the other controls in this item '

End Sub 
```

# powershell - Powershell - Where 子句意外行为？

> ID：13401704
> 
> 赞同：0
> 
> 时间：2012-11-15T16:18:30.313
> 
> 标签：powershell, powershell-2.0, where-clause

我有一个复杂的脚本来评估来自 Web 服务的“属性”。**我在一个名为$global:attributes**的列表中构建了所有属性和有关它们的信息的列表，并确定它们是否是单值/多值值并且是引用。

下面是一个片段：

```
#Build the object
$obj = new-object object
$obj | Add-Member -MemberType NoteProperty -Name AttributeName -Value "Applications"
$obj | Add-Member -MemberType NoteProperty -Name IsReference -Value $true
$obj | Add-Member -MemberType NoteProperty -Name IsMultiValued -Value $true
$global:attributes = $obj 
```

现在以下命令返回“true”对吗？

```
(($global:attributes | where { $_.AttributeName -eq "Applications" }).IsReference -eq $true)
(($global:attributes | where { $_.AttributeName -eq "Applications" }).IsMultiValued -eq $true) 
```

那么为什么下面给定的函数没有按预期进行评估？是因为我在嵌套的 if 语句中调用 where 子句吗？

```
Function doTest($key)
{
    if (($global:attributes | where { $_.AttributeName -eq $key}).IsReference -eq $true)
    {
        write-host "$key is of type Reference"
        if (($global:attributes | where { $_.AttributeName -eq $key}).IsMulitValued -eq $true)
        {
            write-host "$key is multivalued"
        }
        else {
            write-host "$key is single value"
        }
    } else {
        if (($global:attributes | where { $_.AttributeName -eq $key}).IsMultiValued -eq $true)
        {
            write-host "$key is Multivalue other"
        } else {
            write-host "$key is single value other"
        }
    }
} 
```

该命令 `doTest -key "Applications"`返回

```
Applications is of type Reference
Applications is single value 
```

应该是多值的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:58:56.877

您在上面的代码中有错字...“IsMulitValued”而不是“IsMultiValued”。当我更改它并在本地运行它时，它会产生您预期的输出。

# android - 拖放 ListView 防止编辑列表中的 TextView

> ID：13401705
> 
> 赞同：0
> 
> 时间：2012-11-15T16:18:35.363
> 
> 标签：android, listview, textview

我有一个列表视图，可以使用 Android 中的 Drag/Drop 框架拖动每一行。奇怪的是，在一个列表视图中，我可以拖放到另一行的 textView 并插入底层数据元素。

因此，如果我显示带有电话号码数据元素的名称，并且我将 John Smith 拖放到 Johnny Football 上，则变为 John321-231-5232ny Football

电话号码会自动掉到我手指在文本视图上的位置。我不想要这个，并为可能导致它的原因而绞尽脑汁。

我以为我可以让我的片段（包括我的 listView）实现 OnDragListener，然后返回 true .. 但这并没有帮助..

也许我缺少一些 xml 属性？

我有另一个列表视图不这样做，我不知道有什么不同..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:18:09.930

所以看起来我的问题是要在我的 textViews 上启用褪色边缘，我必须启用 inputType="text"

这看起来像是自动实现了放置目标。

我只需要添加我自己的 onDrag 监听器，然后忽略。

# sql - Linq to SQL，使用包含或重写查询将内存列表与数据库结果连接起来

> ID：13401707
> 
> 赞同：1
> 
> 时间：2012-11-15T16:18:41.530
> 
> 标签：sql, linq, linq-to-sql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:23:25.030

简短的回答：`.ToList()`从您的第一个查询声明 ( `q1`) 的末尾删除调用。

当您打电话时，`ToList()`您正在具体化该查询的结果。或者更确切地说，您正在枚举它们。如果您删除`ToList`调用，那么您将拥有一个数据，而不是`q1`数据，如果加入另一个查询，LINQ 可以进一步优化。`List``IEnumerable`

# javascript - 用 JS 删除选项标签

> ID：13401708
> 
> 赞同：1
> 
> 时间：2012-11-15T16:18:48.063
> 
> 标签：javascript, jquery, ajax

我有这个生成的代码：

```
<select class="generic-widget" id="auth_user_group_id" name="group_id">
<option value=""></option>
<option value="2">admin</option>
<option value="3">user</option>
<option value="1">guest</option>
</select> 
```

我需要使用 JS 删除来宾选项并尝试将用户选项设置为默认值...

我尝试使用此 JQuery 代码删除来宾选项，但失败了：

```
<script>
$('option').each(function(){
    if($(this).attr('value') == '1') {
        $(this).remove();
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:24:10.380

[从选择框中删除项目](https://stackoverflow.com/questions/375508/removing-an-item-from-a-select-box)

删除一个选项：

```
$("#auth_user_group_id option[value='1']").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:20:31.377

关于什么：

```
$('#auth_user_group_id > option[value="1"]').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:20:56.483

只要在 DOM 准备好后运行代码，就可以正常工作。

```
 // v----this handler will run after the DOM has loaded
$(function() {
    $('option').each(function(){
        if($(this).attr('value') == '1') {
            $(this).remove();
        }
    });
}); 
```

***演示：http:*** [//jsfiddle.net/TTUkS/](http://jsfiddle.net/TTUkS/)

如果您的代码放在页面顶部，那么它会在元素存在之前运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:21:48.900

您可以将值条件放在选择器中：

```
$('#auth_user_group_id option[value="1"]').remove(); 
```

然后您可以使用该`val`方法选择一个选项：

```
$('#auth_user_group_id').val('3'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T16:21:59.010

您可以通过以下方式检查选项项的值：

```
$('option').each(function(){
if($(this).val() == '1') {
    $(this).remove();
    }
}); 
```

# c++ - 需要一个例子：#define 可能在源代码到达编译器之前被预处理器删除

> ID：13401709
> 
> 赞同：1
> 
> 时间：2012-11-15T16:18:59.453
> 
> 标签：c++

我正在阅读有效的 C++。当谈到第 2 项（更喜欢 const、枚举和内联而不是 #define）时，Scott 说：#define 通常被视为不是语言的一部分，它可能会在源代码到达之前被预处理器删除编译器。

谁能给我举个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:28:13.253

这是一个有点模糊的陈述，但从形式上讲，预处理器是一个单独的编译阶段，而在过去，预处理器是一个单独的程序，它在编译器看到代码之前就完成了它的工作。大多数编译器都可以选择只进行预处理，这有时有助于找出某些代码误入歧途的地方。但是在“好像”规则下，编译器不必**在**单独的阶段进行预处理；它只需要产生与它已经完成的结果相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:26:49.437

这是一个非常简单的例子：

```
#define MAX_COUNT 256 
```

`MAX_COUNT`预处理器将在将相关范围内的每个出现替换为`256`之前，然后将其传递给编译器。

从广义上讲，您可以将其视为宏：

```
#define FOO(a,b) a*b+a+b 
```

将替换`FOO(a,b)`为`a*b+a+b`

更多关于预处理器的阅读，你也可以参考这个[页面](http://www.cprogramming.com/tutorial/cpreprocessor.html)。

# python - 正数输出

> ID：13401711
> 
> 赞同：0
> 
> 时间：2012-11-15T16:19:03.460
> 
> 标签：python, output

我有一个问题，我不知道如何解决它。

好吧，我写了一个小的 Python 程序。它计算一个数字，然后应该输出另一个数字。例如，当解决方案低于 100 时，它应该打印 '100m'，当它小于 200 时，它应该打印 '101m'，<300 = '102m' 等等......

我可以写类似的东西

```
if solution < 100:
  print '100m'
elif solution < 200:
  print '101m'
elif solution < 300:
  print '102m' 
```

有可能，但我认为在 1000 或 2000 之前一次又一次地这样做是不可能的，而且它在代码中看起来很奇怪。;-)

希望有答案...（哦，抱歉我的英语和 Python 知识不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:23:16.197

```
print("10{}m".format(x//100)) 
```

（你真的只想除以 100 并向下取整。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:24:18.200

似乎您想为解决方案变量采用的每 100 步将打印的数字增加 1？

如果是这样，您可以轻松计算加数：

```
addend = (solution / 100)
print str(100 + addend) + "m" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:21:30.620

除以 100；向下舍入。该数字是您示例中的最后一位数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:37:35.333

你的逻辑对我来说是：

```
print solution / 100 + 100 
```

# html - 地图上的 HTML“甜甜圈”

> ID：13401713
> 
> 赞同：2
> 
> 时间：2012-11-15T16:19:09.843
> 
> 标签：html, map

我知道可以在 a 上制作一个正方形/矩形和一个圆形`<map>`，但是是否可以制作一个“甜甜圈”形状，即一个带有小同心圆的大圆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:32:56.550

这是带有小提琴的代码：

[http://jsfiddle.net/DUgBB/1/](http://jsfiddle.net/DUgBB/1/)

```
<div style="text-align:center; width:300px; margin-left:auto; margin-right:auto;">
<img id="mapimg" src="http://1.bp.blogspot.com/-ddhpRGckLK8/Tu3MuGz111I/AAAAAAAABbM/imvskMreBFs/s1600/dunkin+donuts+printable+coupons_25281_2529.jpg" usemap="#map" border="0" width="300" height="300" alt="" />
<map id="map" name="map">
<area shape="poly" coords="34,81,87,35,142,17,218,36,265,82,280,159,237,240,165,278,82,265,13,161,32,89,121,128,109,164,126,191,169,182,190,147,179,126,151,120,128,128,39,82," href="http://google.com/" alt="" title=""   />
</map>
</div>
        ​ 
```

这是一个演示它的图像：

![可怕的手绘甜甜圈](../Images/c41500df7cd527bc8392484bf178c953.png)

**可怕的手绘甜甜圈**

我基本上已经制作了一个自定义多边形，其中的点环绕成一个甜甜圈形状。

# android - 如何在 ksoap2 中将字符串转换为 SoapObject？

> ID：13401715
> 
> 赞同：0
> 
> 时间：2012-11-15T16:19:09.627
> 
> 标签：android, string, soap, casting, ksoap2

在我的 Android 应用程序中，我使用 ksoap2 与服务器通信。我通过soap请求下载了一个复杂的体育信息结构，稍后在我的程序中解析它。

我想要做的是以某种方式“保存”这个复杂的结构，以便稍后当该结构中的所有信息都是最终的并且不再更改时我可以再次解析它，这样我就可以在不再次调用 Web 服务的情况下显示它。

到目前为止，我可以使用 SoapObject 类中的 toString() 方法将整个结构转换为字符串，以便可以将其保存在应用程序的共享首选项中。

但是：要使用我直接从 Web 服务器下载数据时使用的解析器解析字符串，我需要它作为 SoapObject。我试过这样的事情：

```
SoapObject soapObj = (SoapObject) dataAsStringFromSharedPrefs; 
```

但是我不能以这种方式将字符串转换为 SoapObject。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T11:27:27.300

这似乎工作：

```
public SoapObject createSoapObjectFromSoapObjectString(String soapObjectString)
{
// Create a SoapSerializationEnvelope with some config
SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);
env.dotNet = true;

// Set your string as output
env.setOutputSoapObject(soapObjectString);

// Get response
SoapObject so = (SoapObject) env.getResponse();

return so;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T05:45:32.040

希望这可以很好地将肥皂 XML 字符串转换为 SoapObject

```
public SoapObject string2SoapObject(byte[] bytes)
{
    SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER12);
    SoapObject soap=null;
    try {
        ByteArrayInputStream inputStream=new ByteArrayInputStream(bytes);
        XmlPullParser p= Xml.newPullParser();
        p.setInput(inputStream, "UTF8");
        envelope.parse(p);
        soap=(SoapObject)envelope.bodyIn;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return soap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T19:57:52.697

可以说，someObject 是一个具有成员 CategoryId、Name、Description 的对象。如果您在响应中获取这些对象成员，则可以通过执行以下操作将它们保存到 someObject：

```
SoapObject response = (SoapObject)envelope.getResponse();

someObject.CategoryId =  Integer.parseInt(response.getProperty(0).toString());
someObject.Name =  response.getProperty(1).toString();
someObject.Description = response.getProperty(2).toString(); 
```

编辑：

好的，我现在看到了问题。

要获得一个肥皂对象，我能想到的唯一方法是：

1）解析存储的字符串 2）将所有数据字段存储在局部变量中

```
Parse stored string:

start loop
int x = something
string y = something
double z = something
end loop 
```

3）使用变量创建一个新对象

```
someObject.fieldx = x
someObject.fieldy = y
someObject.fieldz = z 
```

4）创建一个新的肥皂对象

```
SoapObject sp_Object = new SoapObject(NAMESPACE, METHOD_NAME); 
```

5）使用第3步中的对象创建一个propertyinfo

```
PropertyInfo prop = new PropertyInfo();
prop.setNamespace(NAMESPACE);
prop.setType(someObject.getClass());
prop.setValue(someObject); 
```

6）在步骤 4 中将 propertyinfo 添加到 soapobject

```
sp_Object.addProperty(prop); 
```

然后您可以将soapobject sp_Object 用于您的解析器。

# c++ - 使用不同的 enable_if 条件选择成员函数

> ID：13401716
> 
> 赞同：31
> 
> 时间：2012-11-15T16:19:11.370
> 
> 标签：c++, templates, c++11, sfinae, specialization

我正在尝试根据类模板参数确定调用哪个版本的成员函数。我试过这个：

```
#include <iostream>
#include <type_traits>

template<typename T>
struct Point
{
  void MyFunction(typename std::enable_if<std::is_same<T, int>::value, T >::type* = 0)
  {
    std::cout << "T is int." << std::endl;
  }

  void MyFunction(typename std::enable_if<!std::is_same<T, int>::value, float >::type* = 0)
  {
    std::cout << "T is not int." << std::endl;
  }
};

int main()
{
  Point<int> intPoint;
  intPoint.MyFunction();

  Point<float> floatPoint;
  floatPoint.MyFunction();
} 
```

我认为这是说“如果 T 是 int，则使用第一个 MyFunction，如果 T 不是 int，则使用第二个 MyFunction，但是我收到编译器错误，说“错误：'struct std::enable_if' 中没有名为'type'的类型” . 谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-15T16:31:19.067

`enable_if`之所以有效，是因为[模板参数的替换导致了错误](https://en.wikipedia.org/wiki/SFINAE)，因此从重载决议集中删除了替换，并且编译器只考虑其他可行的重载。

在您的示例中，实例化成员函数时不会发生替换，因为当时模板参数`T`是已知的。实现您正在尝试的最简单方法是创建一个默认为的虚拟模板参数`T`并使用它来执行 SFINAE。

```
template<typename T>
struct Point
{
  template<typename U = T>
  typename std::enable_if<std::is_same<U, int>::value>::type
    MyFunction()
  {
    std::cout << "T is int." << std::endl;
  }

  template<typename U = T>
  typename std::enable_if<std::is_same<U, float>::value>::type
    MyFunction()
  {
    std::cout << "T is not int." << std::endl;
  }
}; 
```

* * *

**编辑：**

正如 HostileFork 在评论中提到的那样，原始示例留下了用户为成员函数显式指定模板参数并获得不正确结果的可能性。以下内容应防止编译成员函数的显式特化。

```
template<typename T>
struct Point
{
  template<typename... Dummy, typename U = T>
  typename std::enable_if<std::is_same<U, int>::value>::type
    MyFunction()
  {
    static_assert(sizeof...(Dummy)==0, "Do not specify template arguments!");
    std::cout << "T is int." << std::endl;
  }

  template<typename... Dummy, typename U = T>
  typename std::enable_if<std::is_same<U, float>::value>::type
    MyFunction()
  {
    static_assert(sizeof...(Dummy)==0, "Do not specify template arguments!");
    std::cout << "T is not int." << std::endl;
  }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T16:39:27.463

一个简单的解决方案是使用委托给工作人员*私有*函数：

```
template<typename T>
struct Point
{

  void MyFunction()
  {
     worker(static_cast<T*>(nullptr)); //pass null argument of type T*
  }

private:

  void worker(int*)
  {
    std::cout << "T is int." << std::endl;
  }

  template<typename U>
  void worker(U*)
  {
    std::cout << "T is not int." << std::endl;
  }
}; 
```

当`T`is时，将调用`int`第一个函数，因为结果是 type 。在所有其他情况下，将调用 worker 的模板版本。`worker``static_cast<T*>(0)``int*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:32:47.407

`enable_if`仅适用于**推导**的函数模板参数或专门的类模板参数。你正在做的事情不起作用，因为显然使用 fixed `T = int`，第二个声明是错误的。

这是可以做到的：

```
template <typename T>
void MyFreeFunction(Point<T> const & p,
                    typename std::enable_if<std::is_same<T, int>::value>::type * = nullptr)
{
    std::cout << "T is int" << std::endl;
}

// etc.

int main()
{
    Point<int> ip;
    MyFreeFunction(ip);
} 
```

另一种方法是专门`Point`针对各种类型`T`，或者将上述自由函数放入嵌套成员模板包装器中（这可能是更“正确”的解决方案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T16:44:56.193

根据 Praetorian 的建议（但不更改函数的返回类型），这似乎可行：

```
#include <iostream>
#include <type_traits>

template<typename T>
struct Point
{
  template<typename U = T>
  void MyFunction(typename std::enable_if<std::is_same<U, int>::value, U >::type* = 0)
  {
    std::cout << "T is int." << std::endl;
  }

  template<typename U = T>
  void MyFunction(typename std::enable_if<!std::is_same<U, int>::value, float >::type* = 0)
  {
    std::cout << "T is not int." << std::endl;
  }
};

int main()
{
  Point<int> intPoint;
  intPoint.MyFunction();

  Point<float> floatPoint;
  floatPoint.MyFunction();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-19T17:42:13.337

我认为这遵循@Praetorian 的解决方案，但我发现它更容易：

```
template<typename T>
struct Point
{
    template<typename U = T>
    std::enable_if_t<std::is_same<U, T>::value && std::is_same<T, int>::value>
    MyFunction()
    {
        std::cout << "T is int." << std::endl;
    }

    template<typename U = T>
    std::enable_if_t<std::is_same<U, T>::value && std::is_same<T, float>::value>
    MyFunction()
    {
        std::cout << "T is not int." << std::endl;
    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T13:10:59.650

下面的点模板只能使用 int 或 float 作为模板参数 T 进行实例化。

回答这个问题：这里 worker() 的调用完全取决于 method() 调用的模板参数，但您仍然可以控制类型。

```
 template<typename T>
    struct Point
    {
        static_assert (
              std::is_same<T, int>()  ||
              std::is_same<T, float>()
            );

        template<typename U>
        void method(U x_, U y_)
        {
            if constexpr (std::is_same<T, U>()) {
                worker(x_, y_);
                return;
            }
            // else 
            worker(
                static_cast<T>(x_),
                static_cast<T>(y_)
            );
            return ;
        }

    private:

        mutable T x{}, y{};

        void worker(T x_, T y_)
        {
            // nothing but T x, T y
        }

    }; 
```

上面的 worker() 当然会工作，即使它被声明为静态的。出于某种正当理由。对上述内容的其他扩展很少（而且很简单），但让我们坚持答案。

# c++ - 如何在mingw中启用异常处理

> ID：13401719
> 
> 赞同：1
> 
> 时间：2012-11-15T16:19:30.153
> 
> 标签：c++, exception-handling, build, qmake, mingw32

我是 Mingw 和 C++ 编程的新手。我正在尝试构建一个 C++ 项目，但出现以下错误。

> 错误：异常处理已禁用，使用 -fexceptions 启用。

我需要传递这个 -fexceptions 参数的地方。当我尝试

> mingw32-make -fexceptions

我收到以下错误。

> mingw32-make：异常：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:27:03.053

如果你从命令行直接使用 g++，你应该这样做：

```
g++ -fexceptions ...rest of command... 
```

如果您使用的是 Makefile，请将其添加到 CXXFLAGS（然后`make`像往常一样构建）：

```
# in your Makefile
CXXFLAGS := -fexceptions
...rest of your makefile... 
```

你得到“没有这样的文件或目录”错误的原因是因为它是一个指定要使用的文件`-f`的选项，所以当你传递给它时说“意味着他想使用以下文件” “......让我试试并找到一个名为“exceptions”的文件，当然，当它找不到该名称的文件时，它会出错。`make``-fexceptions``make``-f``exceptions`

Makefile 中的`CXXFLAGS`变量作为标志/选项传递给编译器，您应该在其中粘贴任何额外的编译器标志（如`-fexceptions`）。

**编辑**：如果您正在使用`qmake`，请尝试添加`CONFIG += exceptions`到您的项目文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T16:31:54.430

由于您使用的是 Qt，因此将“例外”添加到项目文件（*.pro 文件）中的 CONFIG 变量中：

```
CONFIG += exceptions 
```

This should take care of passing the correct compiler flags.

In any event, do not modify the generated Makefile. With Qt's qmake, the Makefile is just an auto-generated file.

# ruby-on-rails - 三元运算符和html

> ID：13401720
> 
> 赞同：2
> 
> 时间：2012-11-15T16:19:34.507
> 
> 标签：ruby-on-rails, ruby

我正在尝试在三元运算符的视图中输出一些 html：

`<%params[:type]=="0" ? "<span class=\"active\">Links</span>" : link_to("Links",:type=>0)%>`

它不起作用，而不是链接或跨度元素，它输出我的 html 标签`<span class="active">Links</span>` 我是 ruby​​/rails 的新手，试图移动 <%= %> 标签，但找不到办法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:21:51.787

尝试使用[原始方法](http://apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw)：

```
<%= params[:type] == "0" ? raw("<span class=\"active\">Links</span>") : link_to("Links",:type=>0) %> 
```

或[html_safe](http://apidock.com/rails/String/html_safe)：

```
<%= params[:type] == "0" ? "<span class=\"active\">Links</span>".html_safe : link_to("Links",:type => 0) %> 
```

# sharepoint - 在 Powershell 中从 Sharepoint 文档库中打开 xml

> ID：13401722
> 
> 赞同：0
> 
> 时间：2012-11-15T16:19:40.513
> 
> 标签：sharepoint, powershell

我正在尝试使用 powershell 从 sharepoint 文档库中操作 xml 文件。不幸的是，我无法打开它并将其转换为 xml。:( 我在文档库和本地硬盘驱动器上有相同的文件。当我从硬盘驱动器打开它时，一切都很好。当我从 Sharepoint 文档库打开它时，由于开头有一个额外字符，转换为 xml 失败文件。我二进制比较了 $splistitem.File.OpenBinary() 和 get-content C:..\file.xml 的结果，它是相同的。问题是从字节中获取字符串。我尝试了所有可用的编码，但没有任何效果。这是我的代码：

```
 # Add SharePoint snapin if needed
    if ((Get-PSSnapin -Name Microsoft.SharePoint.Powershell -ErrorAction SilentlyContinue)     -eq $null)
    {
        Add-PSSnapin Microsoft.SharePoint.Powershell
    }

...
    $splistitem = ...
...

    $encode = New-Object System.Text.UTF8Encoding

    [xml]$xmlFromSharepoint = $encode.GetString($splistitem.File.OpenBinary()) #throws exception
    [xml]$xmlFromFile = get-content C:\....\file.xml #works fine

    $web.Dispose()

    Write-Host "Press any key to close ..."
    $x = $host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") 
```

抛出的异常带有消息：

```
 Cannot convert value "?<?xml version="1.0" encoding="utf-8"?> 
..." to type "System.Xml.XmlDocument". Error: "Data at the
    root level is invalid. Line 1, position 1."
    At C:\aaa.ps1:14 char:24
    + [xml]$xmlFromSharepoint <<<<  = $encode.GetString($splistitem.File.OpenBinary
    ())
        + CategoryInfo          : MetadataError: (:) [], ArgumentTransformationMet
       adataException
        + FullyQualifiedErrorId : RuntimeException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:52:11.777

我自己回答。:)

file 前面的字符是 UTF8 编码的字节顺序标记。我发现我可以直接从共享点流加载 xml 文件。这解决了这个问题。我的目标是在共享点库中更改 Reporting Services 数据源的连接字符串。.rsds 文件是保存连接字符串的普通 xml 文件。这是修改它的代码：

```
# Add SharePoint snapin if needed
if ((Get-PSSnapin -Name Microsoft.SharePoint.Powershell -ErrorAction SilentlyContinue)     -eq $null)
{
    Add-PSSnapin Microsoft.SharePoint.Powershell
}

#Configure Connection strings
$web = Get-SPWeb "http://localhost/c1"
$reportsList = $web.Lists | Where-Object { $_.Title -eq "Reports" }
$dataSource = $reportsList.Items | Where-Object { $_.Name -eq "Datasource.rsds" }
$dataSource.File.CheckOut();
$xml = New-Object System.Xml.XmlDocument
$stream = $dataSource.File.OpenBinaryStream();
$xml.Load($stream)
$xml.DataSourceDefinition.ConnectString = "test"
$stream.Position = 0;
$stream.SetLength(0);
$xml.Save($stream);
$dataSource.File.SaveBinary($stream)
$dataSource.File.CheckIn("");
$web.Dispose()

Write-Host "Press any key to continue ..."
$x = $host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") 
```

实际上我意识到上面的代码不起作用。要修改报告，我必须使用 ReportServer Web 服务。现在是工作代码：

```
function ConfigureConnectionString
{
param($webUrl, $connectionString)
    $reportServerURI = "http://$serverUrl/ReportServer"
    $ReportPathWildCard = "/";
    $NameSharedSchedule="NeverExpireCache";

    $reportServerURI2010 = "$reportServerURI/ReportService2010.asmx?WSDL"
    $RS = New-WebServiceProxy -Class 'RS' -NameSpace 'RS' -Uri $reportServerURI2010 -UseDefaultCredential
    $dataSources = $RS.ListChildren($ReportPathWildCard,$true) | Where-Object {$_.TypeName -eq "DataSource" -and $_.Path -like "*$webUrl*"}
    foreach($ds in $dataSources) {
        $dsDefinition = $RS.GetDataSourceContents($ds.Path)

        $dsDefinition.CredentialRetrieval = "Store"
        $dsDefinition.Enabled = "TRUE";
        $dsDefinition.UserName = "domain\user";
        $dsDefinition.Password = "Password";
        $dsDefinition.ConnectString = $connectionString;

        #Update the DataSource with this new content
        $RS.SetDataSourceContents($ds.Path, $dsDefinition);
    }
} 
```

# css - CSS - 另一个 % / px 问题

> ID：13401723
> 
> 赞同：0
> 
> 时间：2012-11-15T16:19:51.583
> 
> 标签：css, pixel, target, stretch

我希望我的页面由两部分组成：左侧的面板块和右侧的内容块。页面必须被拉伸以适应视口，这两个块也必须如此。

这是代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Void Museum</title>
        <meta charset="utf-8">
        <style type="text/css">
        html * {
            margin: 0;
            padding: 0;
            }
        #panel,
        #content {
            position: absolute;
            top: 0;
            bottom: 0;
            }
        #panel {
            left: 0;
            width: 250px;
            background: #CFC;
            }
        #content {
            left: 250px;
            right: 0;
            background: #FCC;
            }
        .AccordionMenu {
            width: 250px;
            height: 100%;
            overflow: hidden;
            }
        .AccordionMenu > header {
            width: 100%;
            height: 50px;
            }
        .AccordionMenu > section {
            width: 100%;
            }
        .AccordionMenu > section > p {
            width: 100%;
            height: 0;
            overflow: hidden;
            background: #F00;
            -webkit-transition: all 1s;
               -moz-transition: all 1s;
                -ms-transition: all 1s;
                 -o-transition: all 1s;
                    transition: all 1s;
            }
        .AccordionMenu section:target p {
            height: 300px;
            }
        .AccordionMenu header {
            background: #0F0;
            }
        </style>
        <script type="text/javascript">
        </script>
    </head>
    <body>
        <div id="panel">
            <div class="AccordionMenu">
                <section id="block0">
                    <header><a href="#block0">BLOCK 0</a></header>
                    <p>CONTENT 0</p>
                </section>
                <section id="block1">
                    <header><a href="#block1">BLOCK 1</a></header>
                    <p>CONTENT 1</p>
                </section>
                <section id="block2">
                    <header><a href="#block2">BLOCK 2</a></header>
                    <p>CONTENT 2</p>
                </section>
                <section id="block3">
                    <header><a href="#block3">BLOCK 3</a></header>
                    <p>CONTENT 3</p>
                </section>
            </div>
        </div>
        <div id="content">
        </div>
    </body>
</html> 
```

我的问题是我希望手风琴适合页面高度，但标题的像素大小是固定的。我需要做类似的事情：

```
.AccordionMenu section:target p {
    height: 100% - 40px;
    } 
```

关于如何在不使用丑陋黑客的情况下做到这一点的任何提示？还有一种方法可以使用锚点和 :target 而不必使用 ID？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:23:41.190

```
.AccordionMenu { 
position:relative;
}
.AccordionMenu section:target p {
position: absolute;
top:40px;
bottom:0;
} 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T21:38:03.997

对于您的身高，请使用[calc() 函数](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)：

```
height: calc(100% - 40px); 
```

确保在减号周围保留空格，否则它将不起作用。

# android - 如何按需更改软键盘布局？

> ID：13401724
> 
> 赞同：1
> 
> 时间：2012-11-15T16:19:52.200
> 
> 标签：android, cordova

我在 Android 上使用 PhoneGap。我需要根据特定需要更改键盘布局。一个很好的例子是查看 GMail 应用程序在从一个文本项移动到另一个文本项时如何更改键盘布局。当您需要输入电子邮件时，您会看到 @ 符号显示，但当焦点位于其他文本字段时，它将被移除。

我的 UI 不是原生的，而是 html。我正在使用 PhoneGap 并通过 JS API 显示键盘。我可能不得不将代码添加到我目前正在使用的软键盘插件中。

谢谢，伊兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:25:07.270

你不能。在本机应用程序中，您可以在每个字段上设置不同的 IMEOptions，将它们描述为不同类型的字段，然后键盘将决定适合的布局。我不确定你是否可以通过 phonegap 做到这一点，但如果可以的话，这就是方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:42:49.140

尝试：

```
<input type="email" />
<input type="tel" />
<input type="url" /> 
```

# linux - rpmbuild 已安装（但未打包）的文件源

> ID：13401727
> 
> 赞同：16
> 
> 时间：2012-11-15T16:20:01.913
> 
> 标签：linux, packaging, redhat, rpm, rpmbuild

我正在尝试从 REDHAT 6 系统上的二进制文件构建 RPM。我将所有文件都包含在`%files`( `find /path/to/fake/install -type f >> specfile`)部分中

当我跑步时，`rpmbuild -bb specfile --target x86_64` 我得到

```
Checking for unpackaged file(s): /usr/lib/rpm/check-files /path/to/rpmbuild/BUILDROOT/Package-1.0.0-1.el6.x86_64
error: Installed (but unpackaged) file(s) found:

RPM build errors:
    Installed (but unpackaged) file(s) found: 
```

请注意，错误消息中未列出任何文件。我不确定出了什么问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T02:47:12.437

您可以通过使用忽略这些类型的错误

```
%define _unpackaged_files_terminate_build 0 
```

[也可以看看](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch09s05s07.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-16T16:12:05.790

我猜你的 /path/to/fake/install 不正确。

该`%files`部分中的路径必须是最终安装文件的路径，例如`/usr/local/bin/myprog`. 在 rpm 构建期间，在该`%build`部分中，您需要确保将文件放在您在该`%files`部分中指定的相同位置，或者在您的规范文件中使用与列表匹配的子路径的`buildroot`选项`rpmbuild`和使用变量，在这个例子中。有关详细信息，请参阅[http://www.rpm.org/max-rpm-snapshot/ch-rpm-anywhere.html](http://www.rpm.org/max-rpm-snapshot/ch-rpm-anywhere.html)。`$RPM_BUILD_ROOT``%files``$RPM_BUILD_ROOT/usr/local/bin/myprog`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T13:00:08.280

可能发生这种情况的一个示例：假设在该`%post`部分中有一个`%install_info`并且在该`%postun`部分中有一个关联的`%install_info_delete`。这需要在该`%install`部分中使用类似`rm -f %{buildroot}/%{_infodir}/dir`.

# ldap - 这是针对 LDAP 注入的合法保护吗？

> ID：13401728
> 
> 赞同：1
> 
> 时间：2012-11-15T16:20:03.027
> 
> 标签：ldap, code-injection, protection, sanitize

我们的软件从用户输入中获取用户名并将其放入 ldap-request 中，如下所示：

```
(& () (sAMAccountName=userinput)) 
```

它对我来说看起来很可疑，但到目前为止，我无法通过利用缺失的卫生设施来打破它。一旦我尝试任何特殊字符，我总是会得到“缺失的等号”。会不会是 com.sun.jndi.ldap.Filter.encodeFilter 正在处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:24:57.780

使用 LDAP 注入需要注意的一件事是用户输入末尾的通配符 ('*')。对于搜索查询来说，它是一个完全有效的字符，但是如果您期望一个唯一的用户名，那么您绝对应该在构建过滤器并将其传递之前对其进行清理。正则表达式通常用于此目的。

Java`Filter`类的代码可以在这里找到：

[http://www.docjar.com/html/api/com/sun/jndi/ldap/Filter.java.html](https://serverfault.com/questions/280042/how-do-you-trace-debug-ldap-connections-against-active-directory)

看起来`encodeSimpleFilter`函数是引发*Missing 'equals'*异常的原因。

如果您想检查传递给 AD 的最终 LDAP 过滤器，您可以轻松地使用 WireShark 进行未加密连接或使用来自此服务器故障线程的信息查看查询：

[https://serverfault.com/questions/280042/how-do-you-trace-debug-ldap-connections-against-active-directory](https://serverfault.com/questions/280042/how-do-you-trace-debug-ldap-connections-against-active-directory)

# php - 如何在 PHPunit 中实现测试替身（站在模拟中），我错过了什么琐事？

> ID：13401730
> 
> 赞同：1
> 
> 时间：2012-11-15T16:20:09.797
> 
> 标签：php, mocking, phpunit

我可能在这里遗漏了一些非常微不足道的东西，但我无法让 phpunit 使用替代模拟类。

下面是一个示例，其中`Foo`我正在测试`Bar`的类和我想要模拟的类。

我希望下面的示例能够通过，因为我已经嘲笑`Bar`了 stubed`Bar::heavy_lifting`以返回“not bar”，然后调用那个 trough `Foo::do_stuff()`。然而它失败了，这个例子仍然返回“bar”，似乎完全忽略了我的存根。

```
class Foo {
  public function do_stuff() {
    $b = new Bar();
    return $b->heavy_lifting();
  }
}

class Bar {
  public function heavy_lifting() {
    return "bar";
  }
}

class FooTest extends PHPUnit_Framework_TestCase {
  public function testBar() {
    $fake     = "not bar";
    $stand_in = $this->getMock("Bar");
    $stand_in->expects($this->any())
             ->method("heavy_lifting")
             ->will($this->returnValue($fake));

    $foo = new Foo();
    $this->assertEquals($foo->do_stuff(), $fake);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:11:18.397

您的代码将无法按预期工作。存根不是要替换 Bar 类，而是创建可以传递到预期 Bar 的对象。您应该重构您的 Foo 类，例如：

```
class Foo {

    /* inject your dependency to Foo, it can be injected in many ways,
       using constructor, setter, or DI Container */

    public function __construct(Bar $bar) {
        $this->bar = $bar;
    }

    public  function do_stuff() {
        $this->bar->heavy_lifting();
    }

} 
```

比您可以将模拟的 Bar 传递给 Foo 类。

# java - 单例克隆攻击

> ID：13401732
> 
> 赞同：0
> 
> 时间：2012-11-15T16:20:17.623
> 
> 标签：java, reflection, singleton, clone

我看到很多人实现了`clone`单例的方法，它们抛出了一个`CloneNotSupportedException`. 为什么？

例如，如何通过克隆或任何其他方式破解？顺便提一句。我已经阅读了有效的 java 并且了解枚举。

```
public final class Elvis implements Serializable {

    public final static transient Elvis INSTANCE = new Elvis();

    private Elvis() {
        if(INSTANCE != null) {
            throw new IllegalStateException("This is a singleton. Don't try to instantiate it.");
        }
    }

    private Object readResolve() {
        //serialization protection
        return INSTANCE;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:23:34.547

否则，可以使用克隆创建多个单例类的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:28:17.823

> ...抛出一个 CloneNotSupportedException。为什么？

[你可以在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)查看文档：

```
protected Object clone() throws CloneNotSupportedException 
```

> 抛出： CloneNotSupportedException - 如果对象的类不支持 Cloneable 接口。覆盖 clone 方法的子类也可以抛出此异常，表示无法克隆实例。

# svn - 将工作副本存储库 URL 从 svn 更改为 http 协议

> ID：13401733
> 
> 赞同：2
> 
> 时间：2012-11-15T16:20:17.267
> 
> 标签：svn, protocols

我有一个签出的存储库，例如

```
svn://sub.domain.com/path/to/repo/trunk
```

我需要切换到类似的东西

```
http://domain.com/path/to/repo/trunk
```

我试过“switch --relocate”命令，但这就是我得到的

```
svn：存储库永久移动到“http://domain.com/path/to/repo/trunk”；请搬迁
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:22:54.083

检查您是否编写了正确的 url，
然后从工作副本的根目录尝试此操作：

```
svn switch --relocate svn:///HOST_1/PATH_1 http://HOST_2/PATH_2

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:39:13.603

我必须注意：`--relocate`不推荐使用选项`svn switch`，并且如错误消息中所述，您必须使用 relocate 命令

如果必须更改`svn://sub.domain.com`为`http://domain.com`，可以使用 1-st 形式的 relocate 命令

从`svn help relocate`

> 重新定位 FROM-PREFIX TO-PREFIX [路径...]
> 
> ...
> 
> FROM-PREFIX 和 TO-PREFIX 分别是工作副本当前和新 URL 的初始子字符串。

在您的情况下（在工作副本根目录中）

`svn relocate svn://sub.domain.com http://domain.com`

`svn info`并在搬迁后检查结果

# php - Codeigniter 2.1，PHP - foreach 帖子

> ID：13401744
> 
> 赞同：0
> 
> 时间：2012-11-15T16:20:49.543
> 
> 标签：php, codeigniter, codeigniter-2

我有以下问题：

我有输入字段名称和输入字段电话，它们绑定在一起（例如 Home - 555-5555-555，Hideout - 333-333-3 ），用户可以插入任意数量的电话对。目前（这是需要升级的旧数据库版本）用户有一行用于插入数据。电话字段按以下方式制作；

**333-333-333,55-555-555....**，当需要显示电话号码时，它会爆炸。我想保留这个并按照以下方式进行电话配对**Home_55555-55,Hideout_333-33-33...**。

我该怎么做？这是一个很好的方法还是我应该用经典的方式（每对电话一行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:29:43.407

不，这不是这样做的方法，您确实希望每个电话号码有一行，此外，您还需要电话类型（例如家庭或藏身处）的单独字段（列）。数据库表应如下所示：

```
+----+----------------+--------------+
| id | phone_location | phone_number |
+----+----------------+--------------+
| 1  | Home           | 333-3333-333 |
| 2  | Hideout        | 555-5555-555 |
  ... 
```

您甚至可能需要考虑为位置创建一个单独的表（以防“位置”名称是某种固定的，即用户不能随机选择名称）。您将创建一个像这样的表：

```
+----+----------------+
| id | phone_loaction |
+----+----------------+
| 1  | Home           |
| 2  | Hideout        |
  ... 
```

您的原始表格如下所示：

```
| id | phone_location | phone_number |
+----+----------------+--------------+
| 1  | 1              | 333-3333-333 |
| 2  | 2              | 555-5555-555 |
  ... 
```

当然这不考虑不同的用户，所以你会在 phone_number 表中添加一个额外的`user_id`列，其中包含一个指向该`users`表的列

# macos - 解决 OS X Java 7 中 JTable 中的导航错误（使用箭头键对 setValueAt 进行虚假调用）

> ID：13401745
> 
> 赞同：1
> 
> 时间：2012-11-15T16:20:51.527
> 
> 标签：macos, swing, jtable, java-7

我在 Oracle 的 JDK 7 for OS X 中遇到了这个错误：[在 OS X Lion 上使用 Java 7 中的 JTables 对 setValueAt 进行虚假调用？](https://stackoverflow.com/questions/11553197/spurious-calls-to-setvalueat-with-jtables-in-java-7-on-os-x-lion)快速总结是，当您使用箭头键在 JTable 中导航时，`setValueAt()`会使用空字符串调用。当您在表格中移动时，看着您的数据消失有点令人不安。

它仍然没有修复，Oracle 已经删除了我提交的错误报告。我该如何解决这个问题？

理想情况下，我希望它不会`setValueAt()`在错误的时间调用，但如果不是这种情况，我想找到一种解决方法，让代码`setValueAt()`明白它被调用时没有真正的所做的编辑。

不幸的是，我不了解 JTable 中事件/方法的工作原理。所以这是我的（不幸的是含糊不清）的问题。我该如何解决这个问题？

# browser - 使用 vbscript 在变量页面上打开浏览器

> ID：13401749
> 
> 赞同：6
> 
> 时间：2012-11-15T16:21:00.953
> 
> 标签：browser, vbscript

我正在尝试编写一些 VBScript 来在特定网页上打开浏览器。最终，这个网页将是每个脚本唯一的。目前我有以下代码有效：

```
Dim objShell

objShell = CreateObject("Shell.Application")
objShell.ShellExecute("C:\Program Files (x86)\Google\Chrome\Application\chrome.exe", "www.google.ie", "", "", 1) 
```

但我想让以下工作：

```
Dim iURL As String
Dim objShell

iURL = "www.google.ie"

objShell = CreateObject("Shell.Application")
objShell.ShellExecute("C:\Program Files (x86)\Google\Chrome\Application\chrome.exe", iURL, "", "", 1) 
```

任何想法我做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T16:26:31.543

不`As String`，因为 VBScript 不是强类型，所以`set`在创建 COM 对象的实例时需要一个并且在方法调用周围没有括号；

```
Dim iURL 
Dim objShell

iURL = "www.google.ie"

set objShell = CreateObject("Shell.Application")
objShell.ShellExecute "chrome.exe", iURL, "", "", 1 
```

或者如果 chrome 是默认的

```
set objShell = CreateObject("WScript.Shell")
objShell.run(iURL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-27T15:16:06.560

我发现最简单的方法是这样做：

```
set WshShell=WScript.CreateObject("WScript.Shell")
WshShell.run "chrome.exe"
WScript.sleep 400
WshShell.sendkeys "URL HERE"
WshShell.sendkeys "{ENTER}" 
```

也只是一个 fyi 你可以这样做来关闭 chrome：

```
WshShell.sendkeys "%{F4}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-23T06:53:41.170

你能在“objShell.ShellExecute”中插入“Call”前缀吗

```
Dim objShell
Set objShell = CreateObject("Shell.Application")

iURL = "www.google.com"

Call objShell.ShellExecute("C:\Program Files (x86)\Google\Chrome\Application\chrome.exe", iURL, "", "", 1) 
```

对于 IE：

```
'Call objShell.ShellExecute("iexplore.exe", iURL, "", "", 1)

For more info below code also works,

Dim objShell
Set objShell = CreateObject("Shell.Application") 
```

铬合金：

```
iURL = "www.google.com"
'objShell.ShellExecute "chrome.exe", iURL, "", "", 1 
```

IE：

```
'objShell.ShellExecute "iexplore.exe", iURL, "", "", 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-09T15:30:47.427

```
 Sub RickRoller()
   Dim counter, myNum, objShell, iURL
   counter = 0
   myNum = 100
   Do Until myNum = 1
     myNum = myNum - 1
     counter = counter + 1
     Set WshShell = CreateObject("WScript.Shell")
     WshShell.SendKeys(chr(&hAF))
   Loop
   set objShell = CreateObject("WScript.Shell")
   iURL = "https://youtu.be/oHg5SJYRHA0?autoplay=1&t=44"
   objShell.run(iURL)
 End Sub

 RickRoller() 
```

# selenium - 如何使用 Selenium 测试网页

> ID：13401750
> 
> 赞同：0
> 
> 时间：2012-11-15T16:21:02.447
> 
> 标签：selenium, phpunit

当我使用 PHPUnit 隔离和测试应用程序代码时，我们的 QA 团队一直在使用 Selenium 测试 UI。我听说测试需要 10 多个小时才能完成，我认为这太长了。然后我的问题真正涉及在处理页面时如何等待 AJAX 调用。

例如，我们有一个包含大量输入的页面，它将调用 AJAX 调用来与我们的服务对话以显示数据。我们有多个输入，然后在更改后过滤后续选择框。

分区都已加载，分区（属于分区）然后存储（属于分区）也是如此

```
Division 1
    +- District 10
        +-  Store 100
        +-  Store 101
        +-  Store 102
    +- District 11
        +-  Store 200
        +-  Store 201
        +-  Store 202
Division 2
    +- District 20
        +-  Store 300
        +-  Store 301
        +-  Store 302
    +- District 21
        +-  Store 150
        +-  Store 151
        +-  Store 2002
... 
```

现在选择框都初始加载了，所以最终用户可以选择其中的任何一个。但是，一旦选择框进行了选择，AJAX 调用就会根据父项的选择重新加载其他选择框。IE：选择 Division 2，然后仅筛选 District 20 和 21 的 District 列表（使用对服务的调用），并且商店列表也筛选为仅针对这些地区的商店。

如果您跳过选择部门，而是选择一个地区，那么商店列表将被重新过滤为该地区的商店，再次使用我们在后端的服务。

我的问题是如何知道 AJAX 调用何时从我们的服务返回，并且选择框已更改？我们的 QA 团队正在等待，然后循环选择框以检查所有返回的值是否正确。有没有办法让他们知道选择框何时完成重新加载，以便他们可以检查内容？

显然，我想将这些检查中的大部分移动到带有 Mock 对象的 PHPUnit 测试中，以验证我们的服务是否正常工作，但我们的 QA 团队仍然希望验证实际呈现的结果是否匹配。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:27:23.927

指出问题“如何等到 Ajax 调用完成”

在这种情况下有 2 种不同的方法，并将列出优缺点。

***方法： 1*** 添加一段带有全局变量的代码，该变量指示有多少 Ajax 调用处于待处理状态，因此也可以在 selenium 文本中访问相同的变量。

```
$.activeAjaxRequestCount = 0;

$().ajaxSend(function() {
  $.activeAjaxRequestCount++;
  // register lazily to make sure it's the last handler of 
  // ajaxError event and get executed after all production handlers
  if(!$._ajaxErrorHandlerAdded) {
    $().ajaxError(function() {
      $.activeAjaxRequestCount--;
    });
    $._ajaxErrorHandlerAdded = true;
  }
})
.ajaxSuccess(function() {
  $.activeAjaxRequestCount--;
});

/* C# code in selenium tests */

// run this js code somehow before selenium test
// to turn off animation of jQuery
Selenium.executeScript("$.fx.off = true");

private void WaitComplete(Action action, int timeout)
{
  // do default selenium action
  action();
  // wait for active ajax request count becomes zero, 
  // none ajax selenium action will return immediately
  selenium.WaitForCondition("selenium.browserbot.getCurrentWindow();
                             window.jQuery.activeAjaxRequestCount===0;", 
                             timeout.ToString());
} 
```

*优点*：完全客户端

*缺点：*很难确定从单个页面触发的多个 ajax 调用中完成了哪个 ajax 调用。因此，在这种方法中......您需要等到所有 ajax 调用完成，尽管数据可能已经在页面上加载。

参考：[https ://gist.github.com/111525](https://gist.github.com/111525)

***方法二：***

在这种方法中，我们等待 ajax 调用成功并显示/显示数据。以 Selenium 方式呈现：我们等待测试的执行，直到特定的 HTML 实体/数据出现在页面上。

```
var Waiting = new WebDriverWait(X, TimeSpan.FromSeconds(5));
var Data_Loaded = Waiting.Until(driver => driver.FindElement(By.Id("Divisionxyz"))); 
```

***优点***：当触发多个 ajax 调用以在单个页面上获取数据时很简单。

***缺点***：加载动态元素/对象时，这将不起作用。

希望这会有所帮助......所有最好的伙伴:)

# jquery - 使用 Jquery $('#id').attr("value", 'val'); 设置隐藏字段值 不能在 IE 中工作

> ID：13401759
> 
> 赞同：6
> 
> 时间：2012-11-15T16:21:30.773
> 
> 标签：jquery, hidden-field

我注意到 IE 没有填充隐藏字段的值，使用下面的代码，而 Chrome 和 FF 对此没有问题。

```
$('#id').attr("value", 'val'); 
```

我尝试了其他一些事情，例如`.setAttribute`或`.val() = "val";`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T16:22:14.907

您需要将值传递给[**val()**](http://api.jquery.com/val/) jquery 函数，

```
$('#id').val("your value"); 
```

# android - Android ListActivity - 固定页眉和页脚

> ID：13401760
> 
> 赞同：6
> 
> 时间：2012-11-15T16:21:37.417
> 
> 标签：android, header, footer, listactivity, fixed

是否可以将 ListActivity 的页眉和页脚设置为固定在顶部和底部，所以只有内容（列表）在滚动，而不是页眉和页脚？

我都这样设置：

```
View header = getLayoutInflater().inflate(R.layout.list_header, null);
View footer = getLayoutInflater().inflate(R.layout.list_footer, null);
ListView listView = getListView();
listView.addHeaderView(header);
listView.addFooterView(footer); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T16:40:50.430

您可以通过使用自定义 XML 布局来实现它，您将在其中设置页眉、页脚和列表的布局。

请注意，要与`ListActivity`此布局兼容，必须包含`ListView`带有 id的 a `android.R.id.list`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="HEADER" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="FOOTER" />

</LinearLayout> 
```

并像这样设置它`ListActivity`：

```
public class TestActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T16:49:43.330

根据项目场景，这种方法会比任何其他方法更好，因为如果你想自定义页眉和页脚，你可以在适当的页眉和页脚布局中进行更改。在您的布局 xml 文件中遵循以下内容：

## 在 main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

   <include
        android:id="@+id/header_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/header.xml" />

   <ListView
        android:id="@+id/list_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:below="@id/header_layout"
        android:above="@id/footer_layout" />

    <include
        android:id="@+id/footer_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/footer.xml" />
 </RelativeLayout> 
```

## 在 header.xml 中

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

    <TextView
           android:id="@+id/header_text_view"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:text="Your Application Title"/>
   </LinearLayout> 
```

## 在页脚.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

     <Button
           android:id="@+id/done_button"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:text="Done"/>
   </LinearLayout> 
```

## 在活动中，这里

```
 public class MainActivity extends ListActivity {

   private ListView mListView;
   @Override
   protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mListView = (ListView) findViewById(R.id.list_view);
        // Now you can do whatever you want

   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T21:39:08.863

您可以通过以下方式进行操作：

```
 //your adapter for listview
    mAdapter = new ToDoListAdapter(getApplicationContext());

    // Put divider between ToDoItems and FooterView
    getListView().setFooterDividersEnabled(true);

    // TODO - Inflate footerView for footer_view.xml file
    LayoutInflater layoutInflater = getLayoutInflater();

    //text view or whatever you have for your footer
    TextView footerView = null;
    footerView=(TextView)layoutInflater.inflate(R.layout.footer_view,null);

    // TODO - Add footerView to ListView

    getListView().addFooterView(footerView);
    getListView().setAdapter(mAdapter); 
```

这是在您的 onCreate() 方法中。它对我有用。如果您在这里发现任何错误，请发表评论

# android - 可以绑定到 API 16 (4.1.2) 中的本地服务，但不能绑定到 API 8 (2.2) 中的本地服务

> ID：13401763
> 
> 赞同：0
> 
> 时间：2012-11-15T16:21:45.123
> 
> 标签：android, binding, service

我正在开发一个从 API 8 到 API 16 的应用程序。

在启动时，该程序应该绑定到我的本地服务。

在使用 API 16 设置测试 AVD 时，我没有遇到服务绑定或其他任何问题。

在使用 API 8 设置对 AVD 进行测试时，它根本不会绑定到我的本地服务。

这是我的日志：

```
11-15 10:35:57.220: E/AndroidRuntime(326): FATAL EXCEPTION: main
11-15 10:35:57.220: E/AndroidRuntime(326): java.lang.RuntimeException: Unable to start activity ComponentInfo{timesheetdb.Login/timesheetdb.Login.TimesheetConnect}: java.lang.SecurityException: Not allowed to bind to service Intent { cmp=timesheetdb.Login/timesheetdb.Services.SocketService }
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.os.Looper.loop(Looper.java:123)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-15 10:35:57.220: E/AndroidRuntime(326):  at java.lang.reflect.Method.invokeNative(Native Method)
11-15 10:35:57.220: E/AndroidRuntime(326):  at java.lang.reflect.Method.invoke(Method.java:521)
11-15 10:35:57.220: E/AndroidRuntime(326):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-15 10:35:57.220: E/AndroidRuntime(326):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-15 10:35:57.220: E/AndroidRuntime(326):  at dalvik.system.NativeStart.main(Native Method)
11-15 10:35:57.220: E/AndroidRuntime(326): Caused by: java.lang.SecurityException: Not allowed to bind to service Intent { cmp=timesheetdb.Login/timesheetdb.Services.SocketService }
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ContextImpl.bindService(ContextImpl.java:874)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.content.ContextWrapper.bindService(ContextWrapper.java:347)
11-15 10:35:57.220: E/AndroidRuntime(326):  at timesheetdb.Login.TimesheetConnect.onStart(TimesheetConnect.java:47)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.Activity.performStart(Activity.java:3781)
11-15 10:35:57.220: E/AndroidRuntime(326):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
11-15 10:35:57.220: E/AndroidRuntime(326):  ... 11 more 
```

我不明白的是为什么会有一个 SecurityException 说我不允许绑定到服务。我可以在 API 16 中绑定它，但我不能在 API 8 中绑定。这不合逻辑。

请问，有人可以帮忙吗？

根据要求：这不是整个代码，只是在活动开始时处理绑定的部分。

```
private SocketService mainService;
private ServiceConnection serviceConn;
private boolean isServiceBound;

@Override
protected void onStart() {
    super.onStart();

    // First create ServiceConnection
    createServiceConnection();

    // Bind to SocketService
    Intent sInt = new Intent(this, SocketService.class);
    if ((isServiceBound = bindService(sInt, this.serviceConn,
            Context.BIND_AUTO_CREATE))) {
        Log.i("info", "Service has been bound.");
    }
}

@Override
protected void onStop() {
    super.onStop();

    if (isServiceBound) {
        unbindService(serviceConn);
        isServiceBound = false;
    }
}

@Override
protected void onDestroy(){
    super.onDestroy();

    if (isServiceBound) {
        unbindService(serviceConn);
        isServiceBound = false;
    }
}

private void createServiceConnection() {
    this.serviceConn = new ServiceConnection() {
        public void onServiceDisconnected(ComponentName name) {
            mainService = null;
            isServiceBound = false;
            Log.i("info", "Service disconnected.");
        }

        public void onServiceConnected(ComponentName name, IBinder service) {
            mainService = ((SocketService.SocketBinder) service)
                    .getService();
            isServiceBound = true;
            Log.i("info", "Service connected.");
        }
    };
} 
```

并且服务的 Manifest 定义是：

```
 <service
        android:name="timesheetdb.Services.SocketService"
        android:exported="false"
        android:permission="normal" android:stopWithTask="true" android:enabled="true">
        <intent-filter>
            <action android:name="timesheetdb.Services.SocketService" />
        </intent-filter>
    </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:31:12.510

**使用 google api（api 8）尝试用户模拟器**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:31:08.390

这是服务定义的有效属性列表

```
http://developer.android.com/guide/topics/manifest/service-element.html 
```

您可以尝试从清单中的服务定义中删除权限和 stopWithTask 属性。

让我知道这是否有效

# crystal-reports - Crystal Reports 10 命令对象更改数据源位置

> ID：13401764
> 
> 赞同：6
> 
> 时间：2012-11-15T16:21:46.527
> 
> 标签：crystal-reports

我在 Crystal Report 中使用了命令对象，现在我需要更改数据源。我已按照知识库文章 c2016958 中的说明下载、解压缩并应用 cr10win_en.zip 和 dbex10win_en.zip，但我仍然没有更新我的连接。

有没有其他人遇到过这个问题？你能解决吗？我正在运行 64 位 Windows 7 和 CR 10。

谢谢，莱斯利

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T15:18:31.247

我想 CR10 的过程与 CRXI 及以后的过程相同：

1.  转到“设置数据源位置”
2.  在顶部窗格中，突出显示**数据源**而不是命令。数据源有一个带有插头图标的黄色圆柱体。
3.  在底部窗格中，突出显示您希望命令指向的**新数据源。**不要突出显示“添加命令”，因为这将在新数据源上创建一个新命令。该命令必须包含新数据源的有效 SQL。请注意，您不必添加任何新代码或参数。
4.  点击更新。Crystal 可能会在完成更新之前要求您为参数提供值。

如果 SQL 有效，您的报告应该有一个更新的数据源。

# wpf - 在 wpf 中触摸 DragDrop

> ID：13401768
> 
> 赞同：3
> 
> 时间：2012-11-15T16:21:51.967
> 
> 标签：wpf, drag-and-drop, touch

我有一个启用触摸屏的应用程序，我想使用触摸事件而不是鼠标事件进行一些拖放。问题是当我从触摸事件（触摸向下和触摸移动组合）触发拖放操作时，DragDrop.DoDragDrop 返回 DragDropEffects.None。

使用鼠标事件，一切都按预期工作。

我没有提出任何例外，并且不能选择使用 Surface 工具包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:52:38.140

好吧，作为遇到同样问题的其他人之一，我自己解决了这个问题。

简而言之，这是： 1.我必须在 DragDrop 中为 QueryContinueDragHandler 添加一个处理程序。当监视的触摸处于活动状态时，操作是继续，否则丢弃 2。在顶层容器上设置的预览触摸移动中，我必须使用一些 pinvoke 来模拟光标移动（Win32 API 中的 SetCursorPos）

我希望存在更好的解决方案。

# c# - 获取sql server中最后插入的100条记录

> ID：13401769
> 
> 赞同：3
> 
> 时间：2012-11-15T16:21:52.470
> 
> 标签：c#, sql-server, linq, tsql

我想检索 sql server 2008 中最后插入的 100 条记录。

请更正我的代码。表 testContext.testDetailRecords 中的 Pkey 是一个标识列。

```
var pkeys = (from tests in testContext.testDetailRecords
                         where tests.Pkey > (select max(tests.Pkey)-100 from testContext.testDetailRecords))
                                select tests.Pkey).ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:24:34.283

怎么样

```
var pkeys = testContext.testDetailRecords
                 .OrderByDescending(x => x.PKey)
                 .Take(100)
                 .Select(x => x.PKey); 
```

这应该大致转换为 SQL

```
SELECT TOP 100 PKey
FROM testDetailRecords
ORDER BY PKey DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:24:34.103

```
var pkeys = (from tests in testContext.testDetailRecords
             orderby tests.Pkey descending
             select tests.Pkey).Take(100).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:24:17.413

```
var result = testContext.testDetailRecords.OrderByDescending(tests.Pkey).Take(100).Select(...); 
```

# actionscript-3 - 比较两个图像并检查相等性

> ID：13401773
> 
> 赞同：5
> 
> 时间：2012-11-15T16:22:05.953
> 
> 标签：actionscript-3, flash, image-processing

您知道有关在 as3/flash 中比较图像的任何来源或信息吗？

我想比较两张图像并检查图像是否相同。

检查这个例子：http: [//imageshack.us/photo/my-images/825/imagecompare.jpg/](http://imageshack.us/photo/my-images/825/imagecompare.jpg/)

有什么线索吗？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:24:58.673

除了重复的答案，

我相信你也可以使用[BitmapData.compare()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#compare%28%29)

取自链接的示例，请考虑以下两个 BitmapData 对象：

```
 var bmd1:BitmapData = new BitmapData(50, 50, true, 0xFFFF8800);
 var bmd2:BitmapData = new BitmapData(50, 50, true, 0xCCCC6600);
 var diffBmpData:BitmapData = bmd1.compare(bmd2) as BitmapData;
 trace ("0x" + diffBmpData.getPixel(0,0).toString(16); // 0x332200 
```

* * *

**代码示例（百分比差异）：**

不要知道结果有多正确，这是我为一个百分比酝酿的：

```
var bmd1:BitmapData = new BitmapData(225, 225);
bmd1.draw(mc1);
var bmd2:BitmapData = new BitmapData(225, 225);
bmd2.draw(mc2);

var diffBmpData:BitmapData = bmd1.compare(bmd2) as BitmapData;

var diff:int = 0;
var total:int = 225 * 225;

for(var i=0; i<225; i++)
    for(var j=0; j<225; j++)
        diff += (diffBmpData.getPixel(i,j) != 0)? 1 : 0; 

info.text = Math.round((diff / total * 100)).toString(); 
```

其中：**info**是一个文本框，**mc1**和**mc2**是舞台上的两个影片剪辑。

我认为您可以通过比较单个值（即像素有多少不同）而不是布尔值*是像素相似*匹配来使其变得更好。

* * *

**结果：（**将包括圆形图像周围的空白区域）

![在此处输入图像描述](../Images/484bb614b1f8f0fea11e4608e717b764.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T21:32:26.663

如果像素值相同，则使用[`BitmapData.compare()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#compare%28%29)将返回。`0`

```
trace(bmd1.compare(bmd2)); // 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T22:30:24.777

除了 loxxy & xLite 的答案，如果您需要知道如何从图像文件中获取 BitmapData：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaded);

loader.load( new URLRequest ( "http://www.fake.url.path/image.jpg" ) );

function onLoaded(e:Event):void {
    var bmp:Bitmap = loader.content as Bitmap;
    var bitmapData:BitmapData = bmp.data; 
    //bitmapData.Compare(...)
} 
```

另请参阅[Loader.loadBytes(byteArray) 加载图像](https://stackoverflow.com/questions/8110803/loading-image-by-loader-loadbytesbytearray?rq=1)

# jquery - Ajax 调用状态未能加载资源。简单的 asp.net 联系人类

> ID：13401776
> 
> 赞同：5
> 
> 时间：2012-11-15T16:22:12.003
> 
> 标签：jquery, asp.net, json

尝试在这里学习一些 jquery / js 和一些 ajax。我创建了一个简单的 asp.net Web 表单项目，其中包含以下内容：

```
namespace JSONTest
{
    public partial class _Default : System.Web.UI.Page
    {
        public class Contact
        {
            public string Name { get; set; }
        }

        List<Contact> contacts = new List<Contact>
        { 
            new Contact{ Name = "George" }, 
            new Contact{ Name = "Mike" }, 
            new Contact{ Name = "Steve"} 
        };

        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
        public List<Contact> GetContacts()
        {
            return contacts;
        }
    }
} 
```

我的 js 文件就是这样的：

```
$(document).ready(function () {

    $.ajax({
        type: "POST",
        async: true,
        url: "Default.aspx/GetContacts",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            $.each(data, function (key, val) {
                console.log(val.Name);
            });
        }
    });
}); 
```

我预计 javascript 控制台会显示联系人的姓名，但它只是说`Failed to load resource: The server responded with a status of 500 (internal server error) http://localhost:someNumber/Default.aspx/GetContacts`. 我不确定我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:38:10.720

我的语法有点不对劲。注意添加`static`到 web 方法。

```
public partial class Default : System.Web.UI.Page
{
    public class Contact
    {
        public string Name { get; set; }
    }

    static List<Contact> contacts = new List<Contact>
    { 
        new Contact{ Name = "George" }, 
        new Contact{ Name = "Mike" }, 
        new Contact{ Name = "Steve"} 
    };

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static List<Contact> GetContacts()
    {
        return contacts;
    }
} 
```

服务器返回包装好的 JSON - 所以你需要使用`data.d`.

```
$(document).ready(function () {

    $.ajax({
        type: "POST",
        async: true,
        url: "Default.aspx/GetContacts",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            $.each(data.d, function (key, val) {
                console.log(val.Name);
            });
        }
    });
}); 
```

另一种方法是使用 ASMX 服务，而不仅仅是页面上的方法。这使得方法不必是静态的，它是一个实际的 Web 服务。

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    public class Contact
    {
        public string Name { get; set; }
    }

    List<Contact> contacts = new List<Contact>
    { 
        new Contact{ Name = "George" }, 
        new Contact{ Name = "Mike" }, 
        new Contact{ Name = "Steve"} 
    };

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<Contact> GetContacts()
    {
        return contacts;
    }
} 
```

和javascript：

```
$(document).ready(function () {

    $.ajax({
        type: "POST",
        async: true,
        url: "WebService1.asmx/GetContacts",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            $.each(data.d, function (key, val) {
                console.log(val.Name);
            });
        }
    });
}); 
```

# web-services - 使用 SAML 保护 JBoss 中的 Web 服务

> ID：13401780
> 
> 赞同：2
> 
> 时间：2012-11-15T16:22:17.873
> 
> 标签：web-services, jboss, saml, ws-trust

使用 SAML 保护 Web 服务的工作流程是什么？在 JBoss 中是否可以使用特定的 ws-trust 实现。

目前，我在 JBoss AS7 中部署了一个 pojo-ws (SP)，使用 picketlink SAML 处理程序和使用 SAML2STSLoginModule 的安全域配置。

我还有一个 pojo-ws-client 与 STS（picketlink-sts）联系，获取一个令牌（SAML 断言）并以编程方式将 SAML 断言插入 SOAP 标头以调用 pojo-ws。

在这种情况下，客户端知道要联系 STS，但没有 ws-client 需要联系 STS 的事实，有没有办法在调用 SP(pojo-ws) 时启动联系 STS(picketlink-sts)

# filesystems - Exfat 驱动器显示为 HPFS/NTFS

> ID：13401781
> 
> 赞同：1
> 
> 时间：2012-11-15T16:22:19.343
> 
> 标签：filesystems, fuse

我有一个格式化为 exfat 并使用 exfat-fuse 安装到 debian 挤压的拇指驱动器。当我使用命令`sudo fdisk -l`时，它会给出

```
Device Boot         Start         End      Blocks   Id  System
/dev/sdb1               1         976     7833599    7  HPFS/NTFS 
```

那么它显示为NTFS而不是exfat的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T04:53:02.837

如果它在 exFat 中的格式正确，那么当你执行 fdisk 时它应该显示 exFat 文件系统。您可以尝试将它安装在 Windows 文件系统上并检查它显示的内容。我不确定windows xp是否会，但我认为xp以上的任何东西都应该将磁盘显示为exFat。

# facebook - 如何使用 Facebook Open Graph 获得最多评论

> ID：13401783
> 
> 赞同：3
> 
> 时间：2012-11-15T16:22:22.173
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql, facebook-comments

我们目前在我们的网站上发表 Facebook 评论，并且我们正在寻求制作“评论最多”的小部件。我们希望显示过去 24 小时内收到最多评论的标题列表。

是否可以使用 Facebook 的开放图表或任何其他工具在给定时间范围内查询我们网站的“评论最多”或“分享最多”的故事？

我们目前用于`http://graph.facebook.com/?callback=?&ids=' + someURL;`获取有关单个故事的数据，例如评论计数和分享数量，但我一直无法找到一种方法，让我一次获取所有页面上的信息并进行任何高级过滤。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:00:10.073

您可以使用此 FQL 查询来获取任何外部链接的点赞数、评论数、分享数等。

```
https://api.facebook.com/method/fql.query?query=select%20total_count,like_count,comment_count,share_count,click_count%20from%20link_stat%20where%20url=%27http://google.com%27&format=json 
```

您会收到如下响应：

> [{"total_count":5189603,"like_count":986662,"comment_count":1125601,"share_count":3077340,"click_count":265614}]

你可以json_decode。或者，如果您想要 xml，请`format=json`从查询字符串中删除 。

所以我现在想到的是跟踪所有 url 的所有计数，并定期更新它们以获得最喜欢的、共享的 url 等。

# ios - NSMutableArray 按 release 发布两次

> ID：13401784
> 
> 赞同：-1
> 
> 时间：2012-11-15T16:22:26.247
> 
> 标签：ios, nsmutablearray, retain, dealloc

在 didFinishLaunchingWithOptions 中，第一个代码是：

```
NSMutableArray *k = [[NSMutableArray alloc] initWithCapacity:10];
[k release]; 
```

（经过多次调试，我将其简化为这种情况）并且我得到了

```
*** -[__NSArrayM class]: message sent to deallocated instance 0x7576c90
*** -[__NSArrayM respondsToSelector:]: message sent to deallocated instance 0x7576c90 
```

如果我在 alloc 行之后检查'k'上的 retainCount，它是 1。如果我用 NSArray 替换 NSMutableArray 一切都很好。这到底是怎么回事？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:47:24.913

该错误必须来自其他地方。这意味着你正在使用它。否则，你不会有

```
*** -[__NSArrayM respondsToSelector:]: message sent to deallocated instance 0x7576c90 
```

但类似：

```
*** -[__NSArrayM release]: message sent to deallocated instance 0x7576c90 
```

另外，您不应该使用 retainCount（请参阅[此处](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)的原因）。

只需检查您没有在其他任何地方使用它。或者，也许你正在使用 ARC ？在这种情况下，您不需要释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T21:26:10.443

如果您启用了僵尸并且仍然在控制台中看到错误，例如：

2013-08-26 16:08:22.540 测试[1231:303] *** -[__NSDictionaryM respondsToSelector:]：消息发送到已释放实例 0x101b039a0

而且您已将代码精简为几行，并且您确定您没有过度释放该对象，该问题很可能是由于调试器在您单步跳过它时向已正确释放的对象发送消息引起的。当您不单步执行代码时，不会发出控制台消息。要看到它发生，请启用僵尸并单步执行以下代码。发布后，上述消息将发送到控制台。

```
-(void)testDictionary
{
  NSMutableDictionary *outboundDictionary = [[NSMutableDictionary alloc] init];
  [outboundDictionary release];
} 
```

# eclipse - 文件没有嵌入式样式表指令：使用 logback 时出错

> ID：13401789
> 
> 赞同：17
> 
> 时间：2012-11-15T16:22:44.313
> 
> 标签：eclipse, logback

我有以下`logback.xml`配置：

```
<configuration>
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <!-- encoders are assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
    <encoder>
      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg %n</pattern>
    </encoder>
  </appender>

    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>logFile.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!-- daily rollover -->
      <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>

      <!-- keep 30 days' worth of history -->
      <maxHistory>30</maxHistory>
    </rollingPolicy>

    <encoder>
      <pattern>%-4relative [%thread] %highlight(%-5level) %cyan(%logger{35}) - %msg%n</pattern>
    </encoder>
  </appender> 

  <root level="DEBUG">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" /> 

  </root>
</configuration> 
```

如果我在 eclipse (Juno) 中编辑配置文件，我会收到以下错误：

```
11:02:54,114 INFO  [main] Main  - javax.xml.transform.TransformerFactory=null
11:02:54,115 INFO  [main] Main  - java.endorsed.dirs=C:\Program Files\Java\jre7\lib\endorsed
11:02:54,117 INFO  [main] Main  - launchFile: C:\Users\roberth\Programming_Projects\eclipse\.metadata\.plugins\org.eclipse.wst.xsl.jaxp.launching\launch\launch.xml
11:02:54,145 FATAL [main] Main  - No embedded stylesheet instruction for file: file:/C:/Users/roberth/Programming_Projects/eclipse/javaport/src/logback.xml
org.eclipse.wst.xsl.jaxp.debug.invoker.TransformationException: No embedded stylesheet instruction for file: file:/C:/Users/roberth/Programming_Projects/eclipse/javaport/src/logback.xml
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.transform(JAXPSAXProcessorInvoker.java:225)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.transform(JAXPSAXProcessorInvoker.java:186)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.Main.main(Main.java:73)
Caused by: org.eclipse.wst.xsl.jaxp.debug.invoker.TransformationException: No embedded stylesheet instruction for file: file:/C:/Users/roberth/Programming_Projects/eclipse/javaport/src/logback.xml
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.transform(JAXPSAXProcessorInvoker.java:214)
    ... 2 more 
```

如果我删除并重新创建配置，有时它可以工作，有时不能。如果我在 Notepad++ 或其他文本编辑器中编辑文件，它工作正常。这是日食问题还是我错过了什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-16T08:47:00.270

这是一个 Eclipse 错误，我也注意到了。确保您正在运行正确的 Eclipse 运行时配置（即，如果您单击顶部的绿色小“播放”按钮，认为它会重新运行您运行的最后一个（有效）运行时，重新运行检查（通过单击它旁边的向下箭头）以确保没有创建新的运行时）。

我注意到的是，即使我创建了一个指向 Java 主类和所有内容的完全有效的运行时，我运行了几次并且一切都很好，过了一会儿，如果我选择一个 xml 文件（因为我例如想要编辑它）然后在我单击运行按钮时将其保持选中状态，Eclipse 将为该 xml 文件创建一个新的 XSLT 转换运行时并尝试运行它，但由于您报告的异常而失败。**解决方案是删除该运行时间，确保我没有选择 xml 文件，然后重新运行正确的运行时间。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-07T20:27:14.937

我对最新的 Eclipse Juno 版本有同样的问题。首先，它似乎是 Eclipse 中的一个错误。关闭 Eclipse 内的活动窗口（使用 spring-configuration.xml openend）后，我能够启动 spring 容器而不会出现此错误。所以这取决于运行配置。注意启动“主”类，不要尝试“运行”xml 配置。这为我解决了这个问题（Eclipse 自动选择了要运行的 xml）。

# html - 在 html 中嵌入 flash .swf；Flashplayer 版本问题

> ID：13401790
> 
> 赞同：0
> 
> 时间：2012-11-15T16:22:51.003
> 
> 标签：html, plugins, browser, flash

我有一个嵌入在 html 文件中的 flash 应用程序。

发布我的 swf 文件时，最大目标 Flash 播放器为 11.2。

如果我用来打开 html 的浏览器具有最新的播放器 (Shockwave Flash 11.5)，那么我的应用程序无法正常运行。

html 代码中有没有办法强制使用旧的 Flash 播放器？还有其他解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:08:10.037

抱歉，没有办法针对较旧的 Flash 版本。浏览器将使用系统上安装的任何 Flash 实例。唯一真正的解决方案是修改您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:47:49.240

在 11.5 中有一些安全更新和修复。

我遇到了安全错误。解决方法是将crossdomain.xml 文件添加到我的flash 应用程序正在联系的服务器中。

关于政策： http: [//kb2.adobe.com/cps/142/tn_14213.html](http://kb2.adobe.com/cps/142/tn_14213.html)

# php - 工作登录系统

> ID：13401792
> 
> 赞同：-3
> 
> 时间：2012-11-15T16:22:55.910
> 
> 标签：php, html, mysql, login

> **可能重复：**
> [登录脚本未按要求工作](https://stackoverflow.com/questions/13400971/login-script-not-working-as-required)

这是一个与我的代码一起重复的新问题

这是我的代码

```
<?php include "../utilities/config.php"; 

foreach($_GET as $key=>$value)
{
${$key} = trim($value);
}
$error = '';
if($checking_member_availability == 'yes'){
if(empty($user_name)){
    $error .= "Please enter user name.<br />";
}
if(empty($password)){
    $error .= "Please enter password.<br />";
}
if(empty($error)){
        $sql = "select * from `".SITE_TABLE_PREFIX."user` where     email='".$user_name."' and pwd='".$password."'";
        $resultUser  = mysql_query($sql) or die(mysql_error().$sql);
        if(mysql_num_rows($resultUser)>0){
        $rowUser  = mysql_fetch_array($resultUser);
        $error .= '';
        $_SESSION['email']=$user_name;
        }else{
        $error .= "Please check Email and Password.";
    }
}

if(empty($error)){

    echo "myaccount.php";
}
else{
    echo "<font color='#A01D49'>$error</font>";
}
}
?> 
```

请任何人都可以帮助我我花了很多时间都没有成功

这是html代码

```
<script type="text/javascript" language="javascript">
function validation()
{
var password = trim(document.form1.password.value);
var user_name = trim(document.form1.user_name.value);
var type = trim(document.form1.type.value);
http.open("GET", "processor.php?checking_member_availability=yes&password="+
                    escape(password)+"&user_name="+   escape(user_name)+"&type=" + escape(type)  , true);
http.onreadystatechange = handleHttpResponse;
http.send(null);
return false;
}
</script>
</head>
<table width="241" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td><table width="100%" border="0" cellspacing="0" cellpadding="0" <?php   if($_SESSION['user_id']!=''){?> style="display:none;"<?php }?>>
              <tr>
                <td align="left" valign="top" class="loginBg">
                    <img src="img/logintxt.jpg" alt = '' width='100' height='29' border='0'>
                </td>
              </tr>
              <tr>
                <td align="left" valign="top" class="login"><form name="form1" id="form1" action="" method="post" onSubmit="return validation();">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                     <tr><td colspan="3"><span id="user"></span></td></tr>
                      <tr>
                        <td align="left" valign="middle" class="height"><label class="boldtxt">Email:</label></td>
                        <td align="left" valign="middle" class="heightMid"><input type="text" name="email" id="email" />
                        </td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle"><label class="boldtxt">Password:</label></td>
                        <td align="left" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                              <td align="left" valign="top"><input type="password" name="password" id='password' class="loginfld" />
                              </td>
                              <td align="left" valign="middle"><input type="image" src="img/submit.jpg" class="submit" onClick="return validation();" />
                              </td>
                            </tr>
                          </table></td>
                      </tr>
                      <tr>
                        <td align="left" valign="top">&nbsp;</td>
                        <td align="left" valign="top"><a href="forget_password.php" class="normalTxt">Forgot your password?</a><br />
                        </td>
                      </tr>
                    </table>
                  </form></td>
              </tr>
            </table></td>
        </tr>
        <tr>
          <td align="left" valign="top">
          <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td align="left" valign="top"><a href="provider_registration.php"><img src="images/applybut.jpg" alt="" border="0" class="apply" /></a></td>
                    </tr>
                    <tr>
                      <td align="left" valign="top">
                      <?=$value?>
                      </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">&nbsp;</td>
                    </tr>
                    <tr>
                      <td align="left" valign="top">&nbsp;</td>
                    </tr>
                </table>
          </td>
        </tr>
      </table> 
```

现在有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:33:56.123

你能包括你的问题的原始背景吗？什么是错误/不正确的行为？这是托管在某个地方进行测试吗？

据我所知，它不是基于成功登录重定向

```
if(empty($error)){
    echo "myaccount.php";
} 
```

此行仅**输出**“myaccount.php”。我相信如果您更改**空（$error）**检查以包含重定向，它应该可以工作。

```
if(empty($error)) {
    $sql = "select * from `".SITE_TABLE_PREFIX."user` where     email='".$user_name."' and pwd='".$password."'";
        $resultUser  = mysql_query($sql) or die(mysql_error().$sql);
        if(mysql_num_rows($resultUser) > 0) {
        $rowUser  = mysql_fetch_array($resultUser);
        $error .= '';
        $_SESSION['email'] = $user_name;

        /* Redirect user if successful login */
        header('Location: myaccount.php');
    } else {
        $error .= "Please check Email and Password.";
} 
```

# vb.net - 使用 VB.NET 测试网络延迟

> ID：13401797
> 
> 赞同：5
> 
> 时间：2012-11-15T16:23:14.140
> 
> 标签：vb.net

**目标：**获取服务器的外部 IP 地址列表。执行 ping 以测试延迟。与 CMD 一样，ping 命令显示平均延迟。但在 Visual Studio 中，我发现 ping 仅作为布尔值用于连接到服务器。我该如何测试服务器的延迟以在 vb.net 中找到最快的连接？除了其他方法，我找不到任何其他方法来进行 ping。`my.computer.network.ping(192.168.1.1)`. 那么是否有另一种方法可以在 vb.net 中完成延迟测试？谢谢！

**技能等级：**接近绝对初学者

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T16:29:42.327

这里有一个 VB.NET 的 ping 示例

```
Dim host As String = "82.123.23.XX" ' use any other machine name
Dim pingreq As Ping = New Ping()
Dim rep As PingReply = pingreq.Send(host )
Console.WriteLine("Pinging {0} [{1}]", host , rep.Address.ToString())
Console.WriteLine("Reply From {0} : time={1} TTL={2}", rep.Address.ToString(), rep.RoundtripTime, rep.Options.Ttl) 
```

您将需要导入

> System.Net.NetworkInformation

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:31:45.853

```
Public Shared Function GetPingMs(ByRef hostNameOrAddress As String)
    Dim ping As New System.Net.NetworkInformation.Ping
    Return ping.Send(hostNameOrAddress).RoundtripTime
End Function

GetPingMs("127.0.0.1")

GetPingMs("www.dreamincode.net") 
```

来源：[http ://www.dreamincode.net/code/snippet1511.htm](http://www.dreamincode.net/code/snippet1511.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-09T07:14:34.417

只需在按钮单击时编写此代码，无需导入任何内容。

```
Dim IP As String = InputBox("Enter Client's IP", "Ping To Client")

Shell("CMD.exe /C ping " & IP & " -t", AppWinStyle.NormalFocus) 
```

# jsf - 在 applet 中嵌入自包含的 Java Server Faces 或 Servlet（模拟）Web 应用程序（用于分发示例应用程序）

> ID：13401799
> 
> 赞同：0
> 
> 时间：2012-11-15T16:23:16.197
> 
> 标签：jsf, web-applications, servlets, applet, portability

（经过一番思考，我不知道我所说的小程序是什么意思。我应该说的是带有 Swing 浏览器的独立 Swing 应用程序）。

我无法访问我想向其发送示例工作的人的计算机上的 URL 或 Java Web 服务器（尤其是）。我希望能够在短时间内编写他们当前网站的 Java Server Faces 版本，以展示技能水平。我想知道是否有任何简单的方法可以将 Servlet 或 Java Server Faces 应用程序放入 applet，并通过利用？JSF Servlet？或 Servlet。我可能/想要模拟一条 HTTP 消息（通过本地方法调用发送一条 http 消息）到运行 Servlet 的小程序，以便我可以处理 servlet 请求并将响应发送回运行在小程序。我可能只是打开一个本地 ?TCP/IP 端口（在小程序中）并以这种方式将请求从浏览器发送到 JSF ?Servlet 或 Servlet？使用 JSF，

我已经阅读了几次 JSF 规范。我知道加载了与网页中显示的元素有关的节点，但我不确定（比如说）Glassfish Server 是否真的负责管理初始化生命周期阶段的各个方面，将它们与 JSF 包分开初始化。

如果不能通过 JSF 轻松实现，那么 Servlet 就可以了，如果需要，我什至可以使用 Jetty，但我想尽可能地减小整个小程序的大小（如果我需要的话，请避免使用 Jetty 进行调试是一个端口：

***我只需要一个应用程序实例，在浏览器上运行，（两者都运行）在一个小程序中，其中浏览器不与小程序外部的任何东西通信）。

我也可能喜欢使用 JSP，但我不确定 JSF 包是否会处理这个问题，是否 ?JavaEE 主包会处理这个问题，或者哪些包会处理这个问题。我可以避免使用 JSP，但最好将 Derby 与 JSP 和支持 bean 结合使用，以处理网页中数据库生成的元素。

如果我没有涵盖任何内容，您可能会提到它。如果我以后想起来，我可能会在这篇文章中写下来。

我想要的是这样的：

Applet( SwingWebBrowser <-(?port in applet)-> ?Some container class(Servlet <--> JSF or JSP/HTML)

我认为我可能需要一些东西来加载 servlet，除了在小程序中写几行之外，但情况可能并非如此。此外，我不确定当我在这些页面中有 JSP 代码时，将处理对数据库的调用。不过，返回静态 HTML 页面更简单，我可以使用 Java 代码生成它们并通过该代码调用数据库。

谢谢你。

# sql-server-2008 - 在所有表上使用 CHANGETABLE()

> ID：13401801
> 
> 赞同：0
> 
> 时间：2012-11-15T16:23:23.427
> 
> 标签：sql-server-2008

我需要知道使用更改跟踪在数据库中更改了哪些表。是否有任何表格可以在其中找到带有提交 ID 的最后更新的表格？我可以使用`select * from CHANGETABLE(CHANGES taitemnames,25262)ct order by sys_change_version desc`，但这需要我为每个表运行一次以检查更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:51:15.023

我不熟悉此功能，但如果您的问题是如何使用查询多个表，`CHANGETABLE()`那么我假设您可以使用存储过程来循环所有表名并使用动态 SQL 运行查询：

```
declare 
    @sql nvarchar(max), 
    @parameters nvarchar(max), 
    @TableName nvarchar(128), 
    @Version bigint

set @Version = CHANGE_TRACKING_CURRENT_VERSION()

declare Tables cursor local fast_forward
for 
select name from sys.tables where... -- add conditions here if necessary

open Tables
fetch next from Tables into @TableName
while @@fetch_status = 0
begin
    set @sql = N'select * from CHANGETABLE(CHANGES ' + quotename(@TableName) + ', @LastVersion)ct order by sys_change_version desc'
    set @parameters = N'@LastVersion bigint'
    exec sp_executesql @sql, @parameters, @LastVersion = @Version
    fetch next from Tables into @TableName
end

close Tables
deallocate Tables 
```

您可以将其与`INSERT`动态 SQL 中的一个结合起来，将结果写入一个表中，然后查询该表以进行报告和分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T22:19:51.153

尝试`sys.CHANGE_TRACKING_TABLES`（[在 MSDN 上](http://msdn.microsoft.com/en-us/library/bb895362.aspx)记录）。

您必须使用`OBJECT_NAME`从第一列获取表名。

# slider - 将 Fancybox 添加到此 Elastislider 中：http://tympanus.net/Development/Elastislide/index3.html

> ID：13401803
> 
> 赞同：0
> 
> 时间：2012-11-15T16:23:25.857
> 
> 标签：slider, fancybox

我需要将新的响应式花式弹出框添加到此滑块[http://tympanus.net/Development/Elastislide/index3.html](http://tympanus.net/Development/Elastislide/index3.html)

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:50:02.480

在 jquery.elastislide.js 第 265 行，替换：

```
// item click event
this.jQueryitems.bind(‘click.elastislide’, function( event ) {
instance.options.onClick( jQuery(this) );
return false;
});
with
// item click event
this.jQueryitems.bind(‘click.elastislide’, function( event ) {
instance.options.onClick( jQuery(this) );
//return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:43:12.830

我刚刚在我们的网站上写了一篇关于灯箱/elastislide 的错误的帖子。见这里：[http ://www.think-creative.co.uk/blog/68/getting-a-lightbox-to-work-with-elastislide](http://www.think-creative.co.uk/blog/68/getting-a-lightbox-to-work-with-elastislide)

您需要将“onClick：null”添加到页面上的选项中，以便灯箱部分与 elastislide 一起使用。

# jquery - jQuery .animate 宽度在 IE7/IE8 中不起作用

> ID：13401804
> 
> 赞同：1
> 
> 时间：2012-11-15T16:23:28.103
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, jquery-animate

我正在开发一个有弹出计算器的网站。单击“报价计算器”按钮时，一个 div 动画，首先是高度，然后是宽度，并位于页面上所有其他元素的顶部。这适用于 IE9、Chrome、FireFox 和 Safari，不幸的是它拒绝在 IE7/IE8 中运行。

单击“报价计算器”时，它只会对高度进行动画处理，然后停止 - 在页面上留下一条粗蓝线，它不会对宽度进行动画处理。

我在这里和谷歌上搜索过类似的问题，但无济于事。问题是什么？

这是我的代码：

```
$("#calcbutton").click(function () {
    $("#pnecontainer").show();
    $("#pnecontainer").animate({height: "550px", position: "absolute", top: "75px"});
    $("#pnecontainer").animate({width: "925px", left: "-635px"});
}); 
```

有没有办法让它在 IE7/IE8 上运行，或者我是否必须满足于一些不太美观的东西，比如消失/重新出现的盒子？

**更新：**

我已经在一行上实现了所有动画/作为同一功能的一部分。

有趣的是，由于某种原因，虽然它不允许我在第一次单击时在同一个函数中实现 2 个动画，但它确实允许我在最小化函数上这样做，如下所示：

```
$("#minimizebutton").click(function () {
    $("#pnecontainer").animate({width: "-925px"});
    $("#pnecontainer").animate({height: "-550px", top: "-635px"});
    $("#pnecontainer").hide(100);
}); 
```

奇怪..想法有人吗？（仅限评论，已采纳）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:26:12.553

您想使用**回调函数**，等待为宽度设置动画，直到其他动画完成，或者只是将所有动画放在同一个`.animate()`

IE7/8 不适合 JS，更不用说动画了，所以同一项目上的 2 个动画同时运行可能是导致问题的原因。

```
$("#pnecontainer").animate({height: "550px", position: "absolute", top: "75px"}
    , function () {
         $("#pnecontainer").animate({width: "925px", left: "-635px"});
}); 
```

或者在 1 行中全部设置动画

```
$("#pnecontainer").animate({height: "550px", position: "absolute", top: "75px", 
                            width: "925px", left: "-635px"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:27:57.390

IE7 无法识别`'position'`jquery中的属性`.animate()`。

试试这个 ：

**CSS**

```
#pnecontainer { position: absolute; } 
```

**JS**

```
$("#calcbutton").click(function () {
    $("#pnecontainer").show();
    $("#pnecontainer").animate({height: "550px", top: "75px"});
    $("#pnecontainer").animate({width: "925px", left: "-635px"});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:35:07.167

IE7 浏览器内部无法识别属性“位置”，您不能同时运行 2 个动画

# php - 查找用户位置并显示特定的 HTML 代码

> ID：13401820
> 
> 赞同：-4
> 
> 时间：2012-11-15T16:24:04.440
> 
> 标签：php

> **可能重复：**
> [仅向地理位置中的用户显示内容](https://stackoverflow.com/questions/2200652/show-content-only-to-users-in-a-geo-location)

有谁知道我可以用来查找用户位置并仅针对该位置/国家显示特定 HTML 代码的 php 或 jquery 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:27:38.187

您可能可以在 javascript 中使用 getTimezoneOffset() 来获取本地系统的时区，并在此基础上使用特定内容填充您的 html 容器。只是我的两分钱。

[http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)

# java - 从位于网络服务器上运行 java 程序。

> ID：13401836
> 
> 赞同：0
> 
> 时间：2012-11-15T16:24:32.027
> 
> 标签：java, networking, network-programming, classpath

我有一个使用以下命令运行的 java 应用程序：

```
java -cp .;lib\*;myapp.jar com.app.myapp.MyAppStart 
```

myapp.jar 位于具有以下文件和结构的文件夹中

```
/demo
    /lib
    /conf
    myapp.jar
    myapp.bat 
```

myapp.bat 包含上面的运行命令，所以当你双击它时，它会运行程序。如果我将文件夹复制到本地路径，一切正常。例如，如果文件夹在 `c:\program\myapps\demo`我可以进入该文件夹并双击 myapp.bat 脚本并启动程序。

我现在遇到的问题是我想将演示文件夹复制到网络上的路径。我通过将其复制到它来测试它，`\\London-server01\applications\client\demo\`但这会引发以下异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/app.myapp/MyAppStart
Caused by: java.lang.ClassNotFoundException: com.app.myapp.MyAppStart
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: com.app.myapp.MyAppStart.  Program will exit. 
```

看起来它不喜欢程序从网络驱动器运行的事实。我通过映射`\\London-server01\applications\client\demo\`到本地驱动器号尝试了另一种方法，并且可以正常工作而没有任何问题。如果我使用完整的网络路径来访问文件夹，它只会失败。有什么方法可以让它工作而无需映射网络路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:30:34.403

而是使用 . （对于当前目录）。将它分配给一个变量并使用整个路径限定 jar 以运行它。

设置 MY_JAR_PATH=\London-server01\applications\client\demo\

java -cp %MY_JAR_PATH%;lib*;%MY_JAR_PATH%\myapp.jar com.app.myapp.MyAppStart

这可能会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:39:08.293

试试这样，这就是我运行我的应用程序的方式。和你的有点不同。

```
java -cp "myapp.jar;lib/*" com.app.myapp.MyAppStart 
```

# php - 将 PHP 变量传递给 AJAX

> ID：13401839
> 
> 赞同：0
> 
> 时间：2012-11-15T16:24:37.223
> 
> 标签：php, ajax

我正在尽力学习 AJAX 并将这些 php 变量传递给另一个 php 文件。我正在努力使用一些代码。

这是我的问题。当 onClick 执行 javascript 功能时，我有一个按钮

```
<input type='image' src='images/download-all.png' alt='Submit' onclick='download(".$y['imageURL'].")'> 
```

$y['imageURL'] 来自从表中提取结果的代码。

```
$sql1 = "SELECT * FROM digital_materials WHERE id = '".$x['itemID']."'";
$res1 = mysql_query($sql1);
$y = mysql_fetch_assoc($res1); 
```

因为我事先运行了一个 while 循环，所以我得到了两个数组，它们都有 imageURL 键。我在这里部分使用了其他人的代码，所以如果有什么就指出来。

这是我的下载功能。

```
function download(x)
    {
        $.ajax({
                url:'download.php',
                data:"image="+x,
                success:function(e){
                        alert("Hey, this worked.");
                },
                error:function(e, f, g){
                    alert("Error removing from cart, please try again. "+e+" : "+f+" : "+g);
                }
        });
    } 
```

如何将这两个键从数组传递到要处理的 php 文件？现在它只是在我的源代码上给我这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:46:40.857

您可以像这样在查询字符串中发送数组

```
image[first]=image.jpg&image[second]=image.png 
```

然后，您将能够通过 PHP 超级变量`$_GET`或`$_POST`根据您的 ajax 请求中设置的方法访问每个图像（我认为`$_GET`默认情况下使用 jQuery）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:30:27.167

缺少`<?php ?>`没有？

```
<input type='image' src='images/download-all.png' alt='Submit' onclick='download("<?php echo $y['imageURL']; ?>")'> 
```

# php - 使用 Enter 键提交没有提交按钮的 textarea 表单

> ID：13401840
> 
> 赞同：0
> 
> 时间：2012-11-15T16:24:51.397
> 
> 标签：php, javascript, forms, submit, enter

背景：我正在制作一个类似于 facebook 墙的页面，该页面将有很多帖子，您应该能够评论每一个帖子。所以在这一页中有很多形式（当然）。我只需要提交其中一个。

所以是的，我找到了这个问题的答案，但没有一个有效，所以在这里问：

我得到了这样的表格：

```
 <form enctype="text/plain" action="submitcomment.php" method="post" target="output_frame" id="comment<?php echo $prepare_data['post_id']; ?>">
    <textarea name="comment" id="comment" onkeypress="return submitViaEnter(event)" value="" autocomplete="off"></textarea>
    <input type="hidden" name="hiddenid" id="hiddenid" value="<?php echo $prepare_data['post_id']; ?>" />
    </form> 
```

我的 JavaScript 函数如下所示：

```
function submitViaEnter(evt) {
    evt = (evt) ? evt : event;
    var target = (evt.target) ? evt.target : evt.srcElement;
    var form = target.form;
    var charCode = (evt.charCode) ? evt.charCode : ((evt.which) ? evt.which : evt.keyCode);
    if (charCode == 13) {
        document.forms[this.form.id].submit();
        alert("sent!");
        return false;
    }
    return true;
} 
```

如果我使用文本框，它可以工作，但是当我使用 textarea 时，它就不能工作。尝试按 enter 没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:32:35.333

使用 jQuery 并通过 javascript 将函数绑定到事件：

```
$(function(){
    $('form > textarea').on('keyup', function(e){
        if (e.keyCode == 13) {
            // do whatever you want to do, for example submit form
            $(this).parent('form').trigger('submit');
        }
    });
}); 
```

不过要小心 - 它会在每一个新行上提交。人们倾向于在 textareas 中编写多行文本，因此这种行为可能是意料之外的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:22:57.503

此代码流在[jsfiddle 测试](http://jsfiddle.net/8ZAu2/)中运行良好。请注意，您不应该使用`e.charCode`, 因为`e.keyCode`（IE）和`e.which`（其他）就足够了。看到[这个问题](https://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion)。

此外，您查找表单的代码过于复杂且没有必要，请更改以下内容：

```
var form = target.form;
...
document.forms[this.form.id].submit(); 
```

对此：

```
target.form.submit(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-15T16:56:50.783

像以前一样让你的文本区域嵌套在你的表单中，但是给它们类名而不是 id。这样，jquery 可以使用该特定类名引用 DOM 中的所有文本区域。

```
<form name="form1" enctype="text/plain" action="submitcomment1.php" method="post" target="output_frame">
<textarea name="comment1" class="comment" value="" autocomplete="off"></textarea>
</form>
<form name="form2" enctype="text/plain" action="submitcomment2.php" method="post" target="output_frame">
<textarea name="comment2" class="comment" value="" autocomplete="off"></textarea>
</form> 
```

然后，像这样调整 Jura 的代码，它应该引用文本字段所在的正确形式。

```
$(function(){

  $('.comment').on('keyup', function(e){

    if (e.keyCode == 13) {

      $(this).parent('form').trigger('submit');

    }
  });
}); 
```

# html - 获取十六进制颜色

> ID：13401846
> 
> 赞同：-5
> 
> 时间：2012-11-15T16:25:22.527
> 
> 标签：html, css, image, hex

我正在尝试获取随机网页上特定点的十六进制颜色。（停顿）有没有办法用代码做到这一点，或者有一个网站可以让我找出十六进制颜色吗？我难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:28:22.613

例如，您的浏览器需要一个插件

[https://addons.mozilla.org/en-us/firefox/addon/colorzilla/](https://addons.mozilla.org/en-us/firefox/addon/colorzilla/) （火狐）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:39:37.343

我使用[即时吸管](http://instant-eyedropper.com/)。

我喜欢的好处是，如果我需要获取我喜欢的东西的 html 颜色代码，我会使用吸管来获取代码。一个缺点是它不能很好地与多个显示器一起使用。如果需要颜色，则需要将对象移动到主监视器并获取颜色代码。就选项而言，鼠标与鼠标有很多关系，但我已经使用它将近 2 年了，没有失败。

# c# - OracleBulkCopy 从文本文件 - 如何设置主键

> ID：13401849
> 
> 赞同：0
> 
> 时间：2012-11-15T16:25:28.850
> 
> 标签：c#, .net, database, oracle, odp.net

我正在尝试使用 OracleBulkCopy 将大型分隔文件读入单个表中。主键是列 ID，定义为 number(20,0)，我相信，nHibernate 通常在插入时通过序列递增。如果我通过 odp.net 使用 oracleBulkCopy，如何确保 ID 在插入时递增，并且在其他人通过应用程序插入时不会出现并发问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T14:22:21.993

答案是不正确的。

使用 OracleBulkCopy 时需要禁用触发器。

[http://ora-26086.ora-code.com/](http://ora-26086.ora-code.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:26:43.203

您需要在 oracle 中创建一个序列，以便它可以自动增加您的 id

CREATE SEQUENCE **MY_TABLE_SEQ** INCREMENT BY 1 START WITH 1 NOMAXVALUE NOMINVALUE NOCYCLE NOCACHE NOORDER;

CREATE TRIGGER **MY_TABLE_INSERT_TRIGGER**在插入到 MY_TABLE 之前**，每行都**引用新的作为新的旧的作为旧的，开始 选择**MY_TABLE_SEQ** .NEXTVAL INTO :NEW。**来自双重的 MY_ID_FIELD**；结尾;

# netbeans - Netbeans 7.2.1 + XAMPP

> ID：13401852
> 
> 赞同：0
> 
> 时间：2012-11-15T16:25:33.680
> 
> 标签：netbeans, xampp, phpdoc

我主要使用 NetBeans 7.2.1 进行远程开发。我开始看到 NetBeans 可以使用本地 php 解释器，而不仅仅是在本地运行代码。我偶然发现了有关 phpDoc 的大量信息，我目前正在尝试使其正常工作。

将 NetBeans 与 XAMPP 结合使用可以实现哪些其他好处或其他巧妙的技巧，而我在保存时上传到远程服务器时无法做到这一点？我觉得我错过了各种整洁的东西。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:36:21.547

拥有本地服务器总是好的，以防您的 Internet 提供商死机，或者您的 wifi 用完。我用于 Web 开发的环境是本地 xampp、netbeans 和 svn。

当我有重大更改时，我会在 assembla 中提交对我的 repo 的更改，然后在服务器中进行更新。您始终可以使用更复杂的 cvs 来同步更新服务器（例如 git，使用 bitbucket 免费托管）。

# python - 获取给定时间序列的每月数据总和

> ID：13401853
> 
> 赞同：0
> 
> 时间：2012-11-15T16:25:34.310
> 
> 标签：python, scikits

我有`timeseries`50 年的每日降雨量。我正在对冬季（10 月至 11 月）进行季节性趋势分析：

```
import scikits.timeseries as ts
import datetime as dt

start_date = dt.datetime(1954,1,1)
end_date = dt.datetime(2003,12,31)

dateRange = ts.date_array(start_date,end_date,freq='D')
dly_series = ts.time_series(dates=dateRange,freq='D',data=rain)

# Autumn season OctNov
oct_series = dly_series[dly_series.month == 10]
nov_series = dly_series[dly_series.month == 11]

# October November months daily series
on_dly_series = ts.concatenate((oct_series,nov_series)) 
loc = np.where(on_dly_series.data >= 1.0)[0]
corr_dates = on_dly_series.dates[loc] 
```

我有兴趣获得满足上述条件的一年中所有 10 月每日降雨量的总和`> 1mm`。11 月份也是如此。

# mysql - 从一个表中加入两个 select 语句

> ID：13401857
> 
> 赞同：4
> 
> 时间：2012-11-15T16:25:46.023
> 
> 标签：mysql, database, postgresql

我有一个名为出席的表，有 2 个属性（id、备注）。我想从考勤表中显示每个 id 的缺勤或迟到记录。

```
Attendance Table
|ID         | Remarks       |
=============================
|1          | Absent        |
|1          | Late          |
|2          | Absent        |
|2          | Absent        |
|3          | Late          |

Sample Output
|ID         | Absent   | Late    |
==================================
|1          | 1        | 1       |
|2          | 2        |         |
|3          |          | 1       | 
```

目前，我只能使用以下代码输出 2 列，（ID 和 Absent）或（ID 和 Late）：

```
SELECT id, count(remarks) AS Absent 
FROM attendance 
WHERE remarks = 'Absent' 
GROUP BY id; 
```

我不能同时显示缺席和迟到的列..请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:28:12.833

这基本上是一个`PIVOT`. 如果您无权访问`PIVOT`函数，则可以使用聚合函数和`CASE`语句复制它：

```
select id,
  sum(case when remarks = 'Absent' then 1 else 0 end) Absent,
  sum(case when remarks = 'Late' then 1 else 0 end) Late
from attendance
group by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e48c1/1)

或者您可以使用`COUNT()`：

```
select id,
  count(case when remarks = 'Absent' then 1 else null end) Absent,
  count(case when remarks = 'Late' then 1 else null end) Late
from attendance
group by id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e48c1/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:28:12.333

使用`SUM(CASE)`构造来分隔`Absent`和`Late`。对于每一个，如果值匹配，则 CASE 返回 1 或 0，然后通过聚合`SUM()`得到总数。这里起作用的概念称为[数据透视表](http://en.wikipedia.org/wiki/Pivot_table)。

```
SELECT
  id,
  SUM(CASE WHEN Remarks = 'Absent' THEN 1 ELSE 0 END) AS Absent,
  SUM(CASE WHEN Remarks = 'Late' THEN 1 ELSE 0 END) AS Late
FROM
  attendance
GROUP BY id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:28:30.147

尝试：

```
 SELECT id, 
     Sum (Case remarks When 'Absent' Then 1 End) Absent,
     Sum (Case remarks When 'Late' Then 1 End) Late
 FROM attendance 
 GROUP BY id; 
```

# rdf - 创建owl本体类的实例并将它们保存在rdf store中

> ID：13401859
> 
> 赞同：3
> 
> 时间：2012-11-15T16:25:59.403
> 
> 标签：rdf, jena, owl

我使用 Protege 生成了 OWL 本体。我想使用我的 OWL 本体并创建要使用 Jena 保存在三元组存储中的 RDF 三元组。

我知道如何读/写 RDF，但我不知道如何为那些 OWL 类创建实例。例如：

我拥有的示例 OWL 本体

```
 <owl:Class rdf:about="Person"/>
   <owl:Class rdf:about="Animal"/>

   <owl:DatatypeProperty rdf:about="salary">
     <rdfs:domain rdf:resource="Person"/>
     <rdfs:range rdf:resource="&xsd;real"/>
   </owl:DatatypeProperty> 
```

所需的 RDF 是这样的

```
 <Person rdf:about="Jack">
      <salary>1234</salary> 
    </Person> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T19:36:20.987

您可以使用 Jena Ontology API 以编程方式创建实例。有两种方法可以做到这一点。两者都要求您提供一个[`OntClass`对象](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntClass.html)和一个[`OntModel`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html)

1.  调用对象的[`createIndividual`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntClass.html#createIndividual%28%29)方法`OntClass` 。

    ```
    OntClass class = ontModel.createClass( yourNamespace + "SomeClass" );
    Individual instance = class.createIndividual( yourNamespace + "individual1"); 
    ```

2.  调用对象的[`createIndividual`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntModel.html#createIndividual%28com.hp.hpl.jena.rdf.model.Resource%29)方法`OntModel`并将`OntClass`对象作为参数传递。

    ```
    OntClass class = ontModel.createClass( yourNamespace + "SomeClass");
    Individual individual = ontModel.createIndividual( yourNameSpace + "individual2", class); 
    ```

更多信息可以访问[Jena Ontology API 官方教程](http://jena.apache.org/documentation/ontology/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T10:22:45.247

方法 #1 当您使用 Jena 或 Sesame 解析 OWL 时，您将在模型或图表中以三元组的形式获得猫头鹰。这些三元组可以存储在三元组存储中。

方法#2 你可以通过以三元组的形式创建实例来解决这个问题。以下是示例 java 代码。请注意，我没有测试此代码，这只是为了理解。

StringBuilder sb = new StringBuilder();

sb.append("xmlns:drug=\" [http](http://www.healthcare.com/patient/drug#) ://www.healthcare.com/patient/drug# \""); sb.append("xmlns:rdf=\" [http](http://www.w3.org/1999/02/22-rdf-syntax-ns#) ://www.w3.org/1999/02/22-rdf-syntax-ns# \"");

sb.append("compliance:treatmensub rdf:resource=\" [http://www.healthcare.com/patient/drug##id_pa_](http://www.healthcare.com/patient/drug##id_pa_) "+id+" *pr* "+"_"+drugname+"\"/>");

但我建议遵循方法＃1，因为您有一个 OWL 文件。

# javascript - 在 webview 中调用 createWebViewWithRequest 时自动调整窗口大小

> ID：13401860
> 
> 赞同：1
> 
> 时间：2012-11-15T16:26:05.897
> 
> 标签：javascript, macos, cocoa, webview

我想在 webview 中打开许多窗口。我设置

```
[webView setUIDelegate: self]; 
```

当 webview 加载 Javascript 的 html 字符串时。在javascript代码中，单击按钮时，它将打开新窗口。所以，程序调用

```
- (WebView*)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    return sender;
} 
```

我的问题是调用 createWebViewWithRequest 时窗口自动调整大小。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:35:29.077

经过长时间的研究寻找解决方案，我再次决定 setFrame for window ：

```
- (void)webViewShow:(WebView *)sender
{
    [window setFrame:originRect display:YES];
} 
```

我解决了我的问题。

# c# - SQL 事务超时

> ID：13401861
> 
> 赞同：0
> 
> 时间：2012-11-15T16:26:06.150
> 
> 标签：c#, sql, winforms, transactions

当我在管理工作室中执行以下 SQL 时，查询返回预期结果：

```
SELECT MAX(ID) FROM table WHERE field = value; 
```

但是，当我的客户端应用程序（WinForms）在事务中间执行此 SQL 时，查询超时而不返回值。我怀疑这是因为 Transaction 包含其他 SQL 语句，这些语句正在添加/修改同一个“表”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:33:03.867

“SELECT MAX(ID)”是一个聚合函数，会在表上进行大量锁定——共享读锁可能会被用于表中的所有记录，当然是所有符合您条件的记录，以及其他取决于关于是否使用行锁或页锁。*如果 MAX 想要锁定的任何*这些记录上存在未完成的写锁定，则 MAX 将超时​​。您需要了解同时还有哪些其他锁。如果您使用的是 SQL Server，那么您可以使用 SQL Profiler 来获取跟踪，该跟踪将显示该表上的所有锁，包括来自其他事务的锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:28:08.060

最后，我只是在事务开始之前使用 MAX 函数移动了 SQL 语句，并将值存储为变量以供以后在事务中使用。

# mysql - MySQL 代理 HA，节点故障后无需重新连接

> ID：13401866
> 
> 赞同：0
> 
> 时间：2012-11-15T16:26:15.600
> 
> 标签：mysql, database-replication, mysql-proxy

我使用 MySQL 和 Galera wsrep 来获得同步复制，这部分已经启动并运行

我需要设置一种代理来处理客户端连接。由于集群中的任何节点都可能发生故障，因此客户端不会直接连接节点，而只能通过代理连接。

目前我使用 Galera 负载均衡器，它可以工作，但有一个例外：如果一个节点发生故障，所有通过代理连接到该节点的客户端都会出现连接错误并需要重新连接。

我无法控制连接到代理的服务器应用程序，其中一些无法自动重新连接，需要手动重启。所以问题是如何强制代理自动将已经连接的应用程序重定向到新的数据节点，而不需要重新连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:14:57.283

其实有2个问题：

1.  glbd 向故障节点发送大多数（不是全部）新连接，因为默认情况下它使用“最少连接”平衡策略，如果节点接受 TCP 连接，那么它将是它，因为连接将是短暂的，并且负载最少从glbd的角度来看。所以它只有在节点崩溃时才有效。使用循环平衡策略，以确保最终应用程序将连接到工作服务器或使用 glb-1.0.0beta 可以使用 mysql 客户端轮询服务器状态并做出更智能的决策。
2.  一般来说，在不重新连接和重新验证的情况下迁移客户端连接几乎是不可能的，因为即使代理代表应用程序重新连接并重新验证服务器（这意味着代理可以以与 mysqld 相同的方式验证客户端，或者它可以窥探并重播与服务器的客户端身份验证握手（这种可能性更小））——即使在崩溃的服务器上重新创建应用程序具有的相同会话上下文几乎是不可能的（因此它不会注意到重新连接)

# c# - WPF Datagrid：清除列排序

> ID：13401869
> 
> 赞同：14
> 
> 时间：2012-11-15T16:26:21.463
> 
> 标签：c#, wpf, wpfdatagrid

我在我的应用程序中使用 WPF Datagrid，可以通过单击标题对列进行排序。

我想知道是否有任何方法可以以编程方式清除列的排序？

我尝试对一列进行排序然后清除`MyDataGrid.Items.SortDescriptions`，但该集合是空的（即使一列已排序）。

我也试过：

```
MyDataGridColumn.SortDirection = null; 
```

问题是列指示消失了，但是在编辑单元格和切换行时仍然会发生排序。

有没有办法清除列的排序？

编辑（为清楚起见）：问题是如果用户重新单击同一列标题，我想允许再次排序，因此将 CanUserSort 设置为 false 将是有问题的，即使它是在 XAML 中完成的。简而言之，我试图做的是，一旦排序的列有一个被修改的单元格，就阻止对行进行排序。我想强制用户重新点击标题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-05T20:45:14.523

这是您需要的：

```
using System.Windows.Data;
using System.ComponentModel;

ICollectionView view = CollectionViewSource.GetDefaultView(grid.ItemsSource);
if (view != null)
{
    view.SortDescriptions.Clear();
    foreach (DataGridColumn column in grid.Columns)
    {
        column.SortDirection = null;
    }
} 
```

原文来源：[https ://stackoverflow.com/a/9533076/964053](https://stackoverflow.com/a/9533076/964053)

我想知道的是，M$ 不使用 ClearSort() 方法的想法是什么……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T16:32:57.937

为所有列设置`CanUserSort`为-`false`

```
foreach (var a in MyDataGrid.Columns)
{
    a.CanUserSort = false;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-09T08:06:45.183

作为扩展...

```
 public static  void ClearSort(this DataGrid grid)
    {
        var view = CollectionViewSource.GetDefaultView(grid.ItemsSource);
        view?.SortDescriptions.Clear();

        foreach (var column in grid.Columns)
        {
            column.SortDirection = null;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T07:15:58.713

在 XAML 中，您可以使用此代码将其关闭。

```
<DataGridTextColumn Header="Header Name" CanUserSort="False"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T19:40:17.030

这就是我在我的程序中使用的（我有一个 RESET 按钮并使用它来清除数据网格上的排序）。

```
System.Windows.Data.CollectionViewSource.GetDefaultView(MY_DATA_GRID.ItemsSource).SortDescriptions.Clear(); 
```

奇迹般有效。

干杯，伊托

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-26T09:13:56.203

在 DataGrid 的 XAML 代码中，您可以添加 CanUserSortColumns="False"。然后没有人将能够在 rumtime 对任何列进行排序。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-26T10:02:59.423

这是一个小代码片段，用于禁用`DataGridView`.

```
for (int i = 0; i < dataGridView1.ColumnCount; i++)
{
    dataGridView1.Columns[i].SortMode = DataGridViewColumnSortMode.NotSortable;
} 
```

# c# - 删除十进制的拖尾零

> ID：13401870
> 
> 赞同：0
> 
> 时间：2012-11-15T16:26:22.977
> 
> 标签：c#, .net, string, format, decimal

我想删除小数的拖尾零。它从 DB 加载，精度为 5。

我正在使用逗号 (,) 是小数点的文化。

例如：

*   10,00050 -> 10,0005
*   10,00000 -> 10
*   0,00000 -> 0
*   0,00001 -> 0,00001

我可以使用[通用（“G”）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString)，但我在任何时候都不想要科学记数法。

BR，米。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:37:06.807

您可以使用[自定义数字格式字符串](http://msdn.microsoft.com/library/0c899ak8.aspx)

```
decimal d = 12.45600m;
d.ToString("0.#####"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:37:02.920

可能有更优雅的解决方案，但这适用于字符串。

```
string[] decimals = {
                                "10,00050",// -> 10,0005
                                "10,00000",// -> 10
                                "0,00000",// -> 0
                                "0,00001",// -> 0,00001
                             };
        foreach (string dec in decimals)
        {
            Console.WriteLine(" {0} -> {1}", dec, decimal.Parse(dec.TrimEnd(new char[] { '0' })));
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T16:33:33.943

试试“N”，如果数字是一千或更高，它会添加逗号。

# plsql - plsql程序中的异常

> ID：13401873
> 
> 赞同：1
> 
> 时间：2012-11-15T16:26:32.337
> 
> 标签：plsql

```
DECLARE
past_due exception;
CURSOR emp_cur IS
select distinct e.empno as enum,e.ename,e.hiredate,e.sal,e.job1,e.comm,e.deptno,e.mgr

from emp e join emp m
on m.mgr=e.empno;
c1 emp_cur%ROWTYPE;
BEGIN
OPEN emp_cur;
LOOP
    FETCH emp_cur INTO c1;
     if emp_cur%NOTFOUND then
 raise past_due;

/*  INSERT INTO newempl(emp_id,emp_nm,emp_sal)*/
     insert into newemp(dno,dname,ddate,dbasic,djob,dcomm,dept)
   values( c1.enum,c1.ename,c1.hiredate,c1.sal,c1.job1,c1.comm,c1.deptno);
   dbms_output.put_line(c1.enum||' '||c1.ename);
END LOOP;
exception
when past_due then
raise_application_error(-2100,'fetching the records is completed');

END; 
```

我的错误是

错误报告：ORA-06550：第 20 行，PLS-00103 列：在预期以下情况之一时遇到符号“LOOP”：

如果 ORA-06550：第 25 行，第 4 列：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：

end not pragma final 可实例化顺序覆盖静态成员构造函数映射 06550。00000 -“行 %s，列 %s:\n%s” *原因：通常是 PL/SQL 编译错误。*行动：我不明白错误是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:42:18.303

试试这个，`end if;`引发异常后丢失。

```
DECLARE
   past_due   EXCEPTION;

   CURSOR emp_cur
   IS
      SELECT DISTINCT e.empno AS enum,
                      e.ename,
                      e.hiredate,
                      e.sal,
                      e.job1,
                      e.comm,
                      e.deptno,
                      e.mgr
        FROM emp e JOIN emp m ON m.mgr = e.empno;

   c1         emp_cur%ROWTYPE;
BEGIN
   OPEN emp_cur;

   LOOP
      FETCH emp_cur INTO c1;

      IF emp_cur%NOTFOUND
      THEN
         RAISE past_due;
      END IF;

      /*  INSERT INTO newempl(emp_id,emp_nm,emp_sal)*/
      INSERT INTO newemp (dno,
                          dname,
                          ddate,
                          dbasic,
                          djob,
                          dcomm,
                          dept)
           VALUES (c1.enum,
                   c1.ename,
                   c1.hiredate,
                   c1.sal,
                   c1.job1,
                   c1.comm,
                   c1.deptno);

      DBMS_OUTPUT.put_line (c1.enum || ' ' || c1.ename);
   END LOOP;
EXCEPTION
   WHEN past_due
   THEN
      raise_application_error (-2100, 'fetching the records is completed');
END; 
```

# opencart - Opencart：如何使用不同的选项将相同的产品两次添加到购物车？

> ID：13401877
> 
> 赞同：1
> 
> 时间：2012-11-15T16:26:42.387
> 
> 标签：opencart, options, product

我现在正试图让它工作一段时间。

我的产品是隐形眼镜，当您想要订购时，您需要填写一些选项，例如半径、厚度、屈光度等两次（左眼和右眼）。

我想当我按添加到购物车时，在购物车中添加两次相同的产品（第一次是左眼选项，第二次是右眼选项）。

这在 Opencart 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:53:35.707

基本上，您希望（对于某些产品）在屏幕上显示所有产品信息和选项两次，并在单击“添加到购物车”时将这两个集合添加到购物车中，以便它们显示为单独的产品。

在某些条件下重复这些选项是相当微不足道的。

然而遗憾的是，OpenCart 的 Add To Cart 只需要一组产品数据。它期望在四个地方做到这一点：

*   通过 Ajax 提交选项的 jQuery 脚本
*   从 Ajax 提交中实际添加产品的例程
*   从标准表单提交添加产品的例程
*   显示“成功！您已将 Bongo 隐形眼镜添加到您的购物车！”的例程

即使这样，在添加产品的代码中也存在一组产品选项的假设。

有很多代码可能需要更改 - 以及您通常不想弄乱的东西。

但是有办法。

让我们假设您不想弄乱 index.php?route=checkout/cart/add 并希望将代码保留在 product.tpl 模板和 JavaScript 中。

您首先需要做的是将产品输入（包括隐藏输入）包装在具有唯一类（例如 .lens-left）的 div 中，并使用该类名称代替行中的每个 .product-info 实例：

```
data: $('.product-info input[type=\'text\'], .product-info input[type=\'hidden\'], .product-info input[type=\'radio\']:checked, .product-info input[type=\'checkbox\']:checked, .product-info select, .product-info textarea'), 
```

接下来，编写一些在加载时在相关产品页面上触发的 JS，并且：

1.  添加一个具有 lens-right 类的新 div 并将 lens-left 的内容复制到其中。
2.  将第二个 Ajax 调用绑定到购物车按钮，该调用是标准调用的精确副本，但使用第二组的类名。

完成所有这些后，单击“添加到购物车”会将第一个产品添加到购物车，然后将第二个产品添加到购物车。按顺序而不是一起执行此操作意味着您一次只传递一组数据。使用JS添加第二套意味着没有JS的用户看不到它。

这可以通过使加载的 JS 添加一个按钮来进一步改进，该按钮显示“我的左眼和右眼需要不同的镜片”，然后会触发所有其他内容。

# javascript - 骨干路由器添加路由作为功能

> ID：13401882
> 
> 赞同：1
> 
> 时间：2012-11-15T16:26:55.910
> 
> 标签：javascript, backbone.js

我正在使用 Backbone.js，并且我有一个路由器。这是我的路由属性：

```
routes: {
    "pagea": "pageafunc",
    "pageb": "pagebfunc",
    "pagec": "pagecfunc",
} 
```

是否可以添加如下所示的路线：

```
"mypath/*subroute": function(subroute) {
    //do somethong  
} 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:16:27.283

不，`routes`对象只能有字符串值。

如果要传递自己的回调，则需要以编程方式设置路由。例如，在路由器的初始化函数中，您可以这样做：

```
this.route('mypath/*subroute', 'mypath_subroute', function(){
  // Route callback stuff.
}); 
```

也就是说，这很快就会变得非常不可读，这意味着您必须扫描您的初始化函数以了解您定义的所有路由，因此将所有路由存储在`routes`对象中要干净得多。或者至少将路由函数体保留在路由器本身上，并将路由路径保留在单独的部分中以提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T16:48:23.323

接受的答案不正确，或者可能只是过时了。在任何一种情况下，根据官方[Backbone 文档](http://backbonejs.org/#Router-routes)：

> 路由哈希将 URLs 映射到路由器上的函数*（**或者只是直接函数定义，如果您愿意的话**）*

哇！这意味着您应该能够执行以下操作：

```
var
Router= Backbone.router.extend({
  routes:{
    "path/to/:view": function(view){ console.log(view); }
    }
  }); 
```

例如，如果您想`{routes}`在初始实例化或类似情况之前扩展修改对象，这是一个方便的简写。但是，值得注意的是，使用匿名回调将禁用命名空间事件触发该路由。（请参阅上面[的@loganfsmyth 评论](//stackoverflow.com/questions/13401882/backbone-router-add-route-as-function/45443497#comment-18311102)。）不过，这可能不是最糟糕的权衡，具体取决于您的用例。

# php - PHP文件上传代码注入

> ID：13401883
> 
> 赞同：1
> 
> 时间：2012-11-15T16:26:59.387
> 
> 标签：php, file-upload

> **可能重复：**
> [阻止人们通过表单上传恶意 PHP 文件](https://stackoverflow.com/questions/602539/stop-people-uploading-malicious-php-files-via-forms)

我找到了一种从注入代码中清除图像的方法，方法是使用 PHP GD 库向上传的图像添加一个非常小的透明图像，这将破坏注入的代码（有更好的方法吗？）。

但是如果有人在文本文件或任何扩展名中注入了代码，那么其他扩展名呢？攻击者可以在我的服务器中做什么以及如何防止这种类型的代码注入。

我正在编写一个文件上传脚本，我对安全性感到很困惑，我搜索了很多，但没有什么能真正帮助我。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:38:15.720

您可以使用 CHMOD 将所有上传文件的文件权限设置为读取，例如

```
<?php
  $filename = 'path/to/your/file.zip';
  chmod($filename, '744');
?> 
```

# c++ - std::thread 是 boost::thread 的替代品吗？

> ID：13401884
> 
> 赞同：1
> 
> 时间：2012-11-15T16:27:02.230
> 
> 标签：c++, boost

我有一个代码库，它使用了许多分离的实例`boost::thread`作为跟随

```
boost::thread th( boost::bind(&myFunc,var1, var2 )); 
```

我可以简单地进行搜索替换并开始使用`std::thread`吗？

我是否也需要更换`boost::bind`或者`std::bind`那是不必要的？

（我发现到目前为止我可以`boost::shared_ptr`用`std::shared_ptr`和`boost::scoped_ptr`用搜索替换没有任何问题。`std::unique_ptr`

我的平台是 Windows 7 上的 Visual Studio 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:42:51.297

> 我可以简单地进行搜索替换并开始使用 std::thread 吗？

当前版本的`boost::thread`有一些没有的功能`std::thread`：

*   加入超时
*   线程属性
*   中断
*   `yield()`和`sleep()`（已弃用）

请参阅[boost 文档](http://www.boost.org/doc/libs/release/doc/html/thread/thread_management.html#thread.thread_management.thread)，它们在其中被标记`EXTENSION`。如果您不使用其中任何一个，那么它应该是直接替代品。

正如评论中提到的，旧版本的`boost::thread`破坏行为不同。如果线程仍然可以连接，他们会分离线程；`std::thread`和当前`boost::thread`通话`std::terminate`。

> 我是否也需要更换`boost::bind`或者`std::bind`那是不必要的？

那没有必要；`thread`可以给定任何可调用的类型。它也根本不需要使用`bind`，因为它有一个可变参数构造函数：

```
std::thread th(&myFunc, var1, var2); 
```

# wordpress - Wordpress：创建缩略图列表

> ID：13401886
> 
> 赞同：0
> 
> 时间：2012-11-15T16:27:04.847
> 
> 标签：wordpress, list

我是 WP 新手，所以我仍在寻找解决方法

我想创建一个简单的缩略图列表。在html中我这样做了

```
 <section class="imgSection">
      <ul>
        <li><a href="images/personal01.jpg"><img src="images/personal01.jpg" /></a></li>
        <li><a href="images/personal03.jpg"><img src="images/personal03.jpg" /></a></li>
        <li><a href="images/personal04.jpg"><img src="images/personal04.jpg" /></a></li>
        <li><a href="images/personal05.jpg"><img src="images/personal05.jpg" /></a></li>

      </ul>
    </section> 
```

在 WP 中，我只是将缩略图添加到带有上传/插入的页面，并从“添加媒体”窗口中选择了缩略图。

我已经使用这个 php 将内容添加到页面

```
 <?php if(have_posts()) : while(have_posts()) : the_post(); ?>

    <section class="imgSection">

        <?php the_content(); ?>

    </section>  

    <?php endwhile; ?>
    <?php endif; ?> 
```

这会输出这样的代码，每个“a”标签都包含在一个“p”标签中

```
 <section class="imgSection">
       <p><a href="http://localhost/wordpress/wp-content/uploads/2012/11/personal14.jpg"><img class="alignnone size-thumbnail wp-image-32" title="personal14" src="http://localhost/wordpress/wp-content/uploads/2012/11/personal14-221x150.jpg" alt="" width="221" height="150" /></a></p>
       <p><a href="http://localhost/wordpress/wp-content/uploads/2012/11/personal13.jpg"><img class="alignnone size-thumbnail wp-image-31" title="personal13" src="http://localhost/wordpress/wp-content/uploads/2012/11/personal13-199x150.jpg" alt="" width="199" height="150" /></a></p>
       <p><a href="http://localhost/wordpress/wp-content/uploads/2012/11/personal12.jpg"><img class="alignnone size-thumbnail wp-image-30" title="personal12" src="http://localhost/wordpress/wp-content/uploads/2012/11/personal12-199x150.jpg" alt="" width="199" height="150" /></a></p>
    </section> 
```

是否可以将每个“a”标签宽度包围一个“li”而不是“p”标签，这样它就像原始的 html 代码一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:32:10.560

我相信这就是您正在寻找的。

[[画廊]](http://codex.wordpress.org/Gallery_Shortcode)

您可以设置许多选项，包括您希望包装每个项目的标签。您无需将图像插入帖子或页面，只需将它们上传到该帖子或页面的图库并使用简码. 如果您将短代码放在模板文件中，您需要像这样引用它：`<?php echo do_shortcode('[gallery]'); ?>`. 您也可以通过这种方式将您的选项放在简码中。

# migration - 如何与（“集中式”）DVCS 存储库并行运行 CVS？

> ID：13401887
> 
> 赞同：2
> 
> 时间：2012-11-15T16:27:04.443
> 
> 标签：migration, cvs, dvcs

目前，我正在研究如何引入 DVCS（特别是我正在研究 Hg 和 Git），同时保留并行的 CVS 存储库（甚至只是通过 CVS 协议的访问机制）。这里有一些开发人员非常不愿意从 CVS 切换，但是如果它们可以自动同步或具有 CVS 协议前端，则并行运行它们应该没问题。

CVS 存储库过去已手动编辑（在磁盘上），但一切似乎都是一致的，无论如何我都可以尝试之前的转换，我们还可以保留 CVS 存储库的副本，保持迁移时的状态.

鉴于 Git 对它的支持，我的想法是运行`git-cvsserver(1)`前端，但我没有这方面的经验，也没有必须事先进行的实际转换。假设总体而言这是一个理智的想法，任何人都可以指点列出有关此迁移路径的经验的文章。如果您必须提供任何此类建议，了解潜在的警告也是很好的。

迁移应该尽可能无缝。因此，只要 CVS 前端之后无缝运行，在几次“排练”之后在晚上进行它就可以了。

DVCS 的工作流程最终将再次集中化，但我想利用古代 CVS 根本没有的卓越合并跟踪和其他机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:24:57.353

虽然 git 提供了 CVS 服务器，但该服务器**非常**有限。您不能创建标签或分支，并且 git 分支显示为 CVS 模块。此外，您无法将 CVS 存储库转换为 git，以使之后的文件修订号相等（git cvsserver 在需要时为每个 git 分支创建自己的文件修订数据库）。

OTOH，您可以使用 git 作为 cvs 前端。工作流程是您用于`git cvsimport`从 CVS 服务器中提取历史记录，并用于`git cvsexportcommit`将一些 git 提交导出到本地 CVS 结帐。[Tsuna 的博客](http://blog.tsunanet.net/2007/07/git-cvs-in-5min.html)中有一篇文章详细介绍了这一点。

解决这个问题的另一种方法是分析为什么你的同事不想换。在这里，他们根本不知道/关心 VCS 的新方法，以及我们一直这样做的习惯在哪里。在一个试点项目中使用 mercurial 是说服这里其他团队成员的关键。

# javascript - 包含 cookie 的脚本可以在页面重新加载后将切换的 div 保持在“CLICKED”状态

> ID：13401888
> 
> 赞同：-3
> 
> 时间：2012-11-15T16:27:07.653
> 
> 标签：javascript, html, cookies, toggle, state

您好在网上找了一段时间，非常感谢您的帮助。我需要知道在页面重新加载后，哪些涉及 cookie 的脚本可以将以下代码中的切换 div 保持在“CLICKED”状态。感谢所有人和任何人的帮助，并提前表示感谢。

```
<!DOCTYPE html>
<html>
<head>
  <style>
      p.one { position:relative; width:400px; height:90px; }
      div.two { position:relative; width:400px; height:65px; 
        font-size:36px; text-align:center; 
        color:yellow; background:red;
        padding-top:25px; 
        top:0; left:0; display:none; }
        span.three { display:none; }
      </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>

</head>
<body>
  <p class="one">
        Let it be known that the party of the first part
        and the party of the second part are henceforth
        and hereto directed to assess the allegations
        for factual correctness... 

 <input type="button" id="toggle_button" value="TEST" />

</div>
        <div id="two" class="two"><span id=''three' class="three">Click here to continue...</span></div>

      </p>
<script>
        $('#toggle_button').click(function () {
          $("#two").fadeIn(3000, function () {
            $("#three").fadeIn(100);
          });
          return false;
        }); 

      </script>

      </body>
      </html> 
```

## 我怎样才能得到像下面这样的东西来处理我的代码？

```
 <script type="text/javascript">

    $(function() {

        var cookie = document.cookie,
            state  = cookie.substr(cookie.search('buttonCollapsed=')+16,1),
            elem   = $('div.collapsable');

        if (state == 1) {
            elem.hide();
        }

        elem.slideToogle(function() {

            if ( elem.is(':visible') ) {
                document.cookie = "toggle_button=0";
            } else {
                document.cookie = "toggle_button=1";
            }

        });

    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:35:18.840

[您可以在这里](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)看到如何在 jQuery 中使用 cookie，抱歉 jQuery 网站的 cookie 页面现在没有响应。

你应该做什么在每个点击事件上设置cookie；

```
$.cookie("lastOne", this.id); 
```

并在文档就绪功能上检查 cookie 是否存在并打开给定的 id；

```
$(document).ready(function () {
      if ($.cookie("lastOne") != null)
          $("#" + $.cookie("lastOne")).click();
}); 
```

这应该够了吧。

# c++ - 如何将数字向上舍入到下一个整数

> ID：13401897
> 
> 赞同：-3
> 
> 时间：2012-11-15T16:27:49.933
> 
> 标签：c++, c

> **可能重复：**
> [将除法结果向上舍入到 c 中的下一个整数](https://stackoverflow.com/questions/8881529/round-up-results-of-division-to-next-integer-number-in-c)

是否有将 a`double`向上舍入到下一个整数的函数？

```
1.8 -> 2
1.01 ->2
0.99 ->1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T16:29:49.567

看看C++中的[`std::floor()`](http://en.cppreference.com/w/cpp/numeric/math/floor)和[`std::ceil()`](http://en.cppreference.com/w/cpp/numeric/math/ceil)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:28:56.403

您可以使用：

```
ceil(input) 
```

或者

```
floor(1+input); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:29:27.713

ceil(double x) 返回不小于 x 的下一个积分

[http://www.cplusplus.com/reference/clibrary/cmath/ceil/](http://www.cplusplus.com/reference/clibrary/cmath/ceil/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T16:30:01.140

基本功能是`ceil`, `floor`, `trunc`; 我想`ceil`会是你的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T16:28:48.060

[`std::ceil()`](http://en.cppreference.com/w/cpp/numeric/math/ceil)似乎是您正在寻找的 - 计算不小于 arg 的最接近整数。

# c# - C# 中的端口转发问题

> ID：13401907
> 
> 赞同：-1
> 
> 时间：2012-11-15T16:28:33.533
> 
> 标签：c#, .net, sockets, networking, network-programming

我正在尝试为学校作业制作一个简单的聊天客户端应用程序。

但是，数据包被路由器阻止。有人建议我使用 UPNP 转发端口，但我认为由于安全问题我不能使用这样的程序。

是否有任何替代 UPNP 用于端口转发的替代方案，可以在学校环境中使用，如果我使用 UDP 而不是 TCP，我仍然需要转发端口。

最后，我只想通过互联网实现简单的消息传输。

ADD：我忘了提到我作为项目的约束，我不能使用任何非微软的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:37:53.933

端口转发与 C# 或 .NET 无关 - 它是路由器的一项功能，可通过特定端口将外部连接转发到网络上的内部地址。

端口转发通常是 TCP/ip 套接字（远程处理）的问题。Web 服务通常不是问题，它们使用标准协议并通过浏览器使用的端口 80。

如果端口转发是一个问题，也许您应该从 TCP/IP 切换到 WebServices 以获取您的通信解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:39:32.520

在 MSNMessager 和 Skype 等应用程序中，您有两个应用程序正在运行。第一个是您在本地计算机上运行的客户端，第二个是在提供商网络上运行的服务器。大多数防火墙仅阻止入站连接请求并允许所有出站请求未经过滤。这并不总是正确的，但在大多数情况下确实如此。客户端应用程序将创建出站到服务器的连接，因此不受防火墙限制。

MSNMessager 不直接连接到另一个客户端，而是由服务器应用程序处理和转发。一旦通过 TCP 连接，您将保持连接，直到您决定断开连接。一旦连接，就可以在客户端和它所连接的服务器之间进行双向通信。

我希望这有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T16:33:02.757

如果您完全在机器本地，通常不会通过防火墙，所以这应该不是问题。如果您需要与不同的机器交谈，您的网络管理员可能需要在防火墙上为您打开一个洞。与您的老师讨论该问题；也许已经为此目的打开了一个端口，或者他不希望您首先需要绕过防火墙。

如果问题基本上是“我如何绕过学校的防火墙”，那么我的答案将是“不要”。那将是一个恶意应用程序。

# java - 在 OS X 上从 Java 应用程序运行外部脚本

> ID：13401908
> 
> 赞同：0
> 
> 时间：2012-11-15T16:28:33.360
> 
> 标签：java, macos, runtime.exec, processbuilder

我在获取外部脚本以从 OS X 10.8 上的 Java 应用程序运行时遇到实际问题。它适用于 Windows，所以不确定我在 OS X 上做错了什么。

什么有效（Windows）：

```
String[] commands = {
    "\"" + _appDataDir + "\\Temp\\Workers\\" + _batchName + "\"", 
    "\"" + _appDataDir + "\\Temp\\frame%d.jpg\"", 
    "\"" + _fileName + "\""};
proc = rt.exec(commands); 
```

因此，对于 OS X，我有以下内容：

```
String[] commands = {
    _appDataDir + "/Temp/Workers/" + _batchName,
_appDataDir + "/Temp/Workers/mac-ffmpeg",   
_appDataDir + "/Temp/frame%d.jpg", 
"\"" + _fileName + "\""};
proc = rt.exec(commands); 
```

这在文件名中没有空格时有效，但当有空格时出现“java.io.IOException：错误的文件描述符”错误时会失败。

目前，我已将所有路径更改为没有空格作为一个简单的修复，但我无法控制 fileName 字符串，因为这是用户从保存对话框中选择的。我尝试过在 fileName 周围使用和不使用双引号，但都没有任何区别。

我还尝试了 ProcessBuilder 如下（有和没有“/bin/bash/，-c”位）：

```
ProcessBuilder proc2 = new ProcessBuilder(
    "/bin/bash",
"-c",
_appDataDir + "/Temp/Workers/" + _batchName,
_appDataDir + "/Temp/Workers/mac-ffmpeg",
_appDataDir + "/Temp/frame%d.jpg",
"\"" + _fileName + "\""
);
proc = proc2.start(); 
```

但这给出了同样的错误。据我所知，我正在做其他类似问题中建议的所有事情，但没有任何效果。任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:33:43.130

您不需要周围的引号`"\"" + _fileName + "\""`，只需简单的`_fileName`就可以了。`Runtime.exec`当您向（或）提供数组时，`ProcessBuilder`您已经将命令拆分为“单词” - 如果添加引号，您会告诉它查找名称实际上是双引号 + `_fileName`+ 双引号的文件而不仅仅是`_fileName`.

真正的问题可能出在`_batchName`程序中，它可能是一个通过调用其他程序来完成实际工作的 shell 脚本。在该脚本中，您将收到`mac-ffmpeg`,`frame%d.jpg`和, 和 的`_fileName`参数`$1`，`$2`并且`$3`您需要确保它们*在脚本*中被正确引用，例如，如果脚本当前显示类似

```
processFile $3 
```

那么你需要改变它说

```
processFile "$3" 
```

如果要处理包含空格的文件名。或者，如果它设置为一次处理多个文件：

```
processFiles $* 
```

那么你需要用

```
processFiles "$@" 
```

# php - HTML 分组输入返回“数组”而不是 PHP 中的值数组

> ID：13401913
> 
> 赞同：0
> 
> 时间：2012-11-15T16:28:41.520
> 
> 标签：php, html

在使用方括号符号之前，我已经将元素组合在一起，但我必须忽略一些东西。也许另一双（或数千）眼睛可以发现为什么会适得其反。

```
foreach ( $record as $field => $value) {

if(strpos($value , '~') !== FALSE){ //All drop down lists are separated by ~
    $rows_of_dlist .= '<tr>';

$stored_field = explode ( "mlljx", $value );
$stored_field [0] = trim ( $stored_field [0] ); //Title of the list
$stored_field [1] = trim ( $stored_field [1] ); //Values of the list

$dlist = explode ( '~', $stored_field [1] );

foreach ( $dlist as $dlist ) {
    $list_values .= " <td><input type='checkbox' name='selected_option[]'value='$dlist'/> &nbsp; $dlist</td>";
}

$rows_of_dlist .= "<td align = 'center'>$stored_field[0]</td> $list_values</tr>";

<form id="all" name="all" method="POST" action="$page_name?page_view=report" >
    <table align="center" width = "100%" border = "2">  
        <th colspan = "1">Name Of Custom Drop-down List</th>
        <th colspan = "10">Drop-list Values</th>
        $rows_of_dlist      
        <tr>
            <td align = 'center' colspan='10'>
                        <input type="submit" value="Make PDF" name = "make_pdf"/>
            </td>
        </tr>
    </table>
</form> 
```

发布值后，我测试 POST 数组：

```
 var_dump($_POST);
  exit; 
```

然后它说`$_POST['selected_option']`是“数组”，即使我只选择一个框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:48:29.710

我认为这是错误的：

```
foreach ( $dlist as $dlist ) { 
```

不应该是这样的

```
foreach ( $dlist as $element) { ... do something with each $element ... } 
```

# java - 这个程序的错误是什么？

> ID：13401914
> 
> 赞同：0
> 
> 时间：2012-11-15T16:28:42.257
> 
> 标签：java, sockets

对 Java 非常陌生。我的猜测是它应该是`new Socket ("nothing",8)`？

```
public static void test(String s[]) {
  try {
    echoSocket = new Socket("nothing", 7);
    out = new PrintWriter(echoSocket.getOutputStream(), true);
    in = new BufferedReader( new InputStreamReader(echoSocket.getInputStream()));
  } catch (UnknownHostException e) {
    System.err.println("Don't know about host: .");
    return;
  }
  process(out, in, echoSocket);
  out.close();
  in.close();
  echoSocket.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:30:40.577

这取决于您要完成的工作。从[Socket 上的 Java 文档中](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)，如果您的服务器什么都不是，并且您的端口是 8，那么您是正确的。但是不知道您要连接什么，就无法调试此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:33:02.197

带有 String 和 Int 的 Socket 构造函数请求主机名和端口。主机“nothing”不是有效的主机名。这可能会导致您的“错误”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:47:34.567

如果您的主机文件具有此“无”端口 7 在其上运行的 ip 映射，您仍然可以尝试“无”。

主机文件的一部分

```
# localhost name resolution is handled within DNS itself.
127.0.0.1       localhost
    127.0.0.1       192.168.2.23
#   ::1             localhost
127.0.0.1       localhost
127.0.0.1       nothing 
```

在这种情况下，您的“无”是 localhost

# css - IE7 选择框比其他浏览器大

> ID：13401918
> 
> 赞同：0
> 
> 时间：2012-11-15T16:28:50.867
> 
> 标签：css, internet-explorer-7

与 IE8+ 和 FireFox 相比，IE7 似乎为选择框添加了内部填充。

小提琴：http: [//jsfiddle.net/R4KhQ/7/](http://jsfiddle.net/R4KhQ/7/)

在 Firefox 中，所有表格行都出现在固定高度的 div 内。div 上没有滚动条。在 IE7 中，选择元素更大，因此会将一些表格行推离 div 的底部。然后出现滚动条。

如何标准化选择框样式，以便在不切断文本的情况下跨浏览器高度相同？

**HTML**

```
<div id="container">
<table>
    <tr>
        <th>column1</th>
        <th>column2</th>
        <th>column3</th>
    </tr>
    <tr>
        <td>column1</td>
        <td>column2</td>
        <td>
            <select>
                <option>An Option</option>
                <option>Another Option</option>
                <option>Yet Another Option</option>
            </select>
        </td>
    </tr> 
```

（重复 tr 行）

```
</table>
</div> 
```

**CSS**

```
#container {
    border: 1px solid black;
    width: 500px;
    height: 330px;
    overflow: auto;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
}

th{
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:36:01.297

你，我的朋友，错过了 reset.css 的荣耀。拥抱自己

[http://www.cssreset.com/?utm_expid=37596592-1](http://www.cssreset.com/?utm_expid=37596592-1)

编辑：没有解决方法。

Edit2：这里有更多讨论 -[在 IE 中设置 SELECT 的高度](https://stackoverflow.com/questions/490036/setting-the-height-of-a-select-in-ie)

# visual-studio - 在 Visual Studios 中是否有前进的键盘快捷键？

> ID：13401919
> 
> 赞同：2
> 
> 时间：2012-11-15T16:28:51.473
> 
> 标签：visual-studio, keyboard-shortcuts

在 Visual Studios 中遍历代码时，您可以单击符号和`right-click "Go To Definition"`. 结果是可以看到符号的定义。然后您可以使用键盘快捷键返回符号`ctrl+-`。（有关更多信息，请参见[此处的此问题](https://stackoverflow.com/questions/877873/after-go-to-definition-is-there-a-command-to-return-to-where-you-came-from)。）

有前进的路吗？如何？

我发现这在其他 IDE 中是一个有用的功能，所以我认为 Visual Studios 会有它，但我只是不知道怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:31:52.917

`Ctrl`++将`Shift`向前`-`导航。

您可以在工具 -> 选项中配置键盘绑定，然后在“常规”下的“键盘”部分。您所指的两个命令是`View.NavigateBackward`和`View.NavigateForward`

# crystal-reports - 如何在选择公式中使用多值参数

> ID：13401923
> 
> 赞同：1
> 
> 时间：2012-11-15T16:28:59.900
> 
> 标签：crystal-reports

我正在使用水晶报表，并希望创建一个参数，让用户输入多个字符串进行搜索。

例如，当我输入搜索词“hammer”、“wax”和“mask”时，我需要获取包含这三个词中的任何一个的所有记录。

我正在尝试使用通配符，如下所示：

```
(if {?DescWildcard} <> 'x' then lowercase({POIT.Description}) like '*' & lowercase({?DescWildcard}) & '*' else 1=1) 
```

但是，它只适用于一个关键字。

如何处理多个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:04:03.123

请参阅此处的线程：[循环通过多值参数数组](https://stackoverflow.com/questions/10093544/looping-through-a-multiple-value-parameter-array)

当您想要进行文本搜索时，使用多值参数会变得有些困难，因为添加通配符可能有点棘手。

该线程中接受的答案将自动用通配符包围您的关键字，因此您可以自由地执行以下操作：

```
{?DescWildcard} = 'x' or lowercase({POIT.Description}) like delimit({?DescWildcard}) 
```

# php - 对 OpenCart 主题的简单修改

> ID：13401924
> 
> 赞同：0
> 
> 时间：2012-11-15T16:29:01.583
> 
> 标签：php, phpmyadmin, opencart

我将 Shoppica 主题与 OpenCart 一起使用。我想对分类页面进行修改。它提供了描述（我在后端输入），然后是产品列表。

在 category.tpl 中它说：

```
<?php if ($description) echo $description; ?> 
```

但是我想要一个额外的描述，我们称之为description2。这应该在产品列表之后。在 PhpMyAdmin 中，我在 *oc_category_description* 中添加了另一行并将其手动命名为 description2（所以在 PhpMyAdmin 中）我用文本填充了它。

现在我将以下内容放在 category.tpl 文件中：

```
<?php if ($description2) echo $description2; ?> 
```

但现在我收到一个错误：

> 未定义变量：第 187 行 /home/.../public_html/catalog/view/theme/shoppica2/template/product/category.tpl 中的 description2

任何想法，我做错了什么。我是否需要在其他地方声明它（在另一个文件中？在哪里？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:48:13.830

需要了解 OpenCart 内置的 MVC 模式。

简而言之 - 您有一个与数据库交互的 Model 类，一个在上面操作并调用 Model 方法（数据检索、数据更新、数据插入）的 Controller 类，并在 View 处理时将输出传递给 brwoser（应该是另一个类，但 OpenCart 只有像 MC - 带有模板文件的模型控制器部分）。

所以对于您的问题：您必须修改`catalog/model/catalog/category.php`并查找调用`getCategory`来检索具体类别数据的方法。这里的选择查询应该是`select * from ...`- 如果是这样，一切都很好，但如果是这样`select category_id, category_description, ... from ...`，你也必须在这里添加你的新字段（对不起，我不记得来自 OpenCart 的 SQL 查询）。

另外编辑`catalog/controller/product/category.php`并查找控制类别数据的部分（调用类别模型）或查找以开头的行`$this->data['description'] = ...;`并在此处添加您的新字段，例如`$this->data['description2'] = ...;`。

希望这会有所帮助。

# sql - 如何在 DB2 中进行按位运算

> ID：13401926
> 
> 赞同：1
> 
> 时间：2012-11-15T16:29:02.693
> 
> 标签：sql, db2, bit-manipulation

我尝试找出使用`BITAND`.

在数据库中，我将用户权限保存为 BIGINT`1101111`或`1110001`.

在示例情况下，如果设置了第三位，我必须找出表中的元素。在这种情况下。查询应该找到第一个。

我怎样才能做到这一点？？

```
Select * from USERRIGHTS
WHERE BITAND(Rightmask , 4) = 1 ?????? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:17:18.113

我找到了解决方案。以“1101111”的形式保存正确的掩码是愚蠢的。我应该以十进制格式保存数据。在这种情况下，1101111 = 111（十进制）或 1110001 = 113。我在我的应用程序中将正确的掩码转换为十进制并以该格式保存。

然后可以检查是否设置了位位置。

这个查询给出了我想要的所有条目:-)：

Select * from USERRIGHTS WHERE BITAND(Rightmask , 16) = 16 （第三位是右起**第五**位。这个值应该用于按位运算。2^(5-1) = 16）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:58:52.833

在 Linux、UNIX 和 Windows DB2 平台上，9.5 版中引入了[位运算符。](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0052628.html)

# asp.net - Mysql + aspx - 如何使用阅读器填充数组

> ID：13401927
> 
> 赞同：1
> 
> 时间：2012-11-15T16:29:07.777
> 
> 标签：asp.net

当我只想获取一条记录时，这是我的 aspx 代码。

```
 conn = new SqlConnection(cs);
            string sql = "SELECT * FROM [school_database].[arrest_school].[registration_allstudent] where RegistrationId='llts4da2'";
            SqlCommand cmd = new SqlCommand(sql, conn);
            conn.Open();
            reader = cmd.ExecuteReader();
            reader.Read();
            Model.Registration regis = new Model.Registration();
            regis.Address = reader["Address"].ToString();
            return regis; 
```

现在我想获取所有记录并返回 regis 数组。怎么做。我知道如何计算 read 中的行，然后如何填充它 regis 数组。Regis 有 5 个字段...地址、城市、姓名、班级、电话号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:32:48.640

要读取所有记录，一种方法是：

```
using(IDataReader reader = cmd.ExecuteReader())
{
    List<Registration> result  = new List<Registration>();
    while(reader.Read())
    {
        result.Add(new Registration{Address=reader["Address"].ToString()});
    }
    return result;
} 
```

另一种方式是这样的：

```
DataTable t = new DataTable();
t.Load(cmd.ExecuteReader);
var result  = from c in t.AsEnumerable()
              select new Registration{Address=c.Field<string>("Address")};
return result.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:12:15.613

```
 int i = 0;
            Model.Registration regis = new Model.Registration();
            if (reader.HasRows)
            {
                do
                {
                    i++;
                    regis.Address = regis.Address + reader["Address"].ToString();
                } while (reader.Read());
            }
            regis.Address = i.ToString() + " " + regis.Address;
            return regis; 
```

我正在寻找一种更简单的方法......这也有帮助

# php - PHP $_REQUEST 不包含所有 $_GET 变量

> ID：13401929
> 
> 赞同：0
> 
> 时间：2012-11-15T16:29:11.443
> 
> 标签：php

直到今天我还认为 $_REQUEST 总是包含所有来自 $_POST 和 $_GET 的变量。

但是今天我有一个奇怪的经历，一个变量是 $_GET 的一部分，而不是 $_REQUEST 的一部分。我对传递参数的 URL 进行了一些尝试，似乎 $_REQUEST 数组中总是缺少第一个参数。

你知道为什么会发生这种情况吗？

谢谢！

**网址：**

```
localhost/?app=files&getfile=ajax/newfile.php?dir=%2Ftest4&source=http%3A%2F%2Fl‌​ocalhost%2Fimg%2Flogo.svg&filename=logo.svg&requesttoken=e250827c341650990cd4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T16:58:07.350

您的`getfile`变量未正确编码：

```
localhost/?app=files&getfile=ajax/newfile.php?dir=%2Ftest4&source=http%3A%2F%2Fl‌​ocalhost%2Fimg%2Flogo.svg&filename=logo.svg&requesttoken=e250827c341650990cd4
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

URL GET 请求中的第一个变量位于问号 ( `?`) 之后。所有其他变量都必须跟在 & 号 ( `&`) 之后。

如果您的 URL 中有多个问号，那么您违反了协议，您可能会引起混淆。我敢打赌，您的第二个变量缺少文本：`ajax/newfile.php`。

您的网址应如下所示：

```
localhost/?app=files&getfile=app%3Dfiles%26getfile%3Dajax%2Fnewfile.php%3Fdir%3D%252Ftest4&source=http%3A%2F%2Fl‌​ocalhost%2Fimg%
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

`urlencode()`您可以使用该函数在 PHP 中对 URL 变量进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:45:31.313

`dir`是参数中*uri*的查询`getfile`参数。因此，它不会在里面`$_GET`（因此`$_REQUEST`）。

您将需要解析或重组`$_GET['getfile']`您[`parse_url()`](http://www.php.net/manual/fr/function.parse-url.php)的查询字符串。

# module - [Linux]：insmod 中的错误 - “无效的模块格式”

> ID：13401931
> 
> 赞同：2
> 
> 时间：2012-11-15T16:29:15.453
> 
> 标签：module, format, kernel, cross-compiling

我试图交叉编译互联网上可用的内核模块代码。我的开发 PC 是 Linux 2.6.31，我的目标架构是带有 Linux 2.6.32 内核的 ARM。我的工具链是 Code Sourcery arm-none-linux-gnueabi。我的 Makefile 看起来像这样：-

```
obj-m := mymodule.o
KDIR := /path/to/target/2.6.32/kernel

all:
$(MAKE) ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi -C $(KDIR) M=$(PWD) modules
clean:
$(MAKE) ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi -C $(KDIR) M=$(PWD) clean 
```

我的 Linux 2.6.32 内核只是一个源代码树；未配置或构建；刚刚解压了从供应商处获得的内核源代码。模块构建良好。

但是当我尝试安装模块时，它显示“无效的模块格式”。我的查询是：- 这是因为我没有针对正在运行的内核构建并针对尚未配置/构建的内核源代码树进行构建吗？谁能帮我解决这个问题？

谢谢，摇篮曲

# c++ - 如何在 Windows 资源管理器中捕获用户的左键单击？

> ID：13401933
> 
> 赞同：4
> 
> 时间：2012-11-15T16:29:18.447
> 
> 标签：c++, winapi, com

根据我的阅读，当用户在 Windows 资源管理器中右键单击文件时会调用 shell 扩展。当用户左键单击文件时，有没有办法捕获事件或运行 shell 扩展？

我需要跟踪用户在选择文件时选择的文件。那可能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:04:21.973

首先，使用 WinApi 检查哪个窗口有焦点。是资源管理器窗口吗？通过检查其属性，确保它是您要查找的窗口类型。如果是，请检查用户何时使用 GetAsyncKeystate 按下鼠标左键，它会注意到**所有**输入。

当您单击鼠标左键时，将检查用户是否单击了文件表示。循环遍历 windows GUI 项目，直到找到具有键盘焦点的项目。使用程序 Spy++ 获取文件列表的容器/框架的 id。现在检查焦点/选定项是否在此框架内，最重要的是：**它是否是列表项**。获取项目的名称/标题属性，您就完成了！

我希望你意识到，由于这个过程的长度，我不能也不会给你完整的代码来做到这一点......如果有什么你不明白的，请告诉我。

# rss - 阻止 Google Feed API 使用缓存的 Feed

> ID：13401936
> 
> 赞同：9
> 
> 时间：2012-11-15T16:29:26.930
> 
> 标签：rss, google-api, google-feed-api

我正在使用[Google Feed JSAPI](https://developers.google.com/feed/v1/devguide)来读取/解析提要。问题是，当提要更改时，以前的条目变得无效（链接和图像不起作用），因此我*无法*加载提要的缓存版本。我认为在加载提要时可以选择不使用缓存版本，但我没有看到。我的解决方案是在提要 url 的末尾添加一个变量 (t)，因此它是“唯一的”，但这看起来很老套（但它有效）。有人知道更好的方法吗？

```
 function onLoad() {
      // Create a feed instance that will grab feed feed.
      var feed = new google.feeds.Feed(feedLocation+"&t="+new Date().getTime());

      // Request the results in XML (so that we can parse out all the info
      feed.setResultFormat(google.feeds.Feed.XML_FORMAT);

      //must set this - if you don't, it defaults to 4
      feed.setNumEntries(50);

      // Calling load sends the request off.  It requires a callback function.
      feed.load(feedLoaded);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-13T19:21:09.957

这个答案可能来晚了，但我遇到了这篇文章并使用`pxpgraphics`评论得到了解决方案。对于那些需要使缓存无效的人，这将做到这一点。请注意，此代码示例正在从 RSS 提要中提取其他数据；根据您的需要进行修改。

```
google.load("feeds", "1");

function initialize() {
    var feedLocation = "http://feeds.bbci.co.uk/news/rss.xml";

    /*  Use the randomNum and the time to invalidate the Google cache and 
        fetch the latest articles.
    */
    var randomNum = Math.floor((Math.random() * 10000) + 1);
    var url = feedLocation + "?&t=" + new Date().getTime() + randomNum;

    var feed = new google.feeds.Feed(url);
    feed.setNumEntries(1000);
    feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var div = document.createElement("div");
        div.appendChild(document.createTextNode(entry.title));
        div.innerHTML += "<br>" + entry.publishedDate;
        div.innerHTML += "<br>" + entry.content;
        container.appendChild(div);
      }
    }
  });
}
google.setOnLoadCallback(initialize); 
```

此代码假定您`DIV`在页面上有此代码：

```
<div id="feed"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:40:13.317

尝试`feed.includeHistoricalEntries();`它可能会解决您的问题。

# ios - iOS Xcode 连接 MySQL 数据库

> ID：13401937
> 
> 赞同：13
> 
> 时间：2012-11-15T16:29:29.210
> 
> 标签：ios, cocoa-touch, xcode4.5

我目前正在为我的学校制作一个 iOS 应用程序，并且以前没有 iOS 编程经验。但是，我确实有使用 HTML/PHP/MySQL 的经验。

目前我们有一个基本的标签栏应用程序，底部有 5 个标签。显然，由于这是一个学校应用程序，它需要是动态的，希望我们可以设置一些东西来连接到数据库并检索学校午餐菜单和新闻。

我知道如何使用 PHP 正常连接到数据库，但我不知道如何使用当前版本的 Xcode 来连接。我已经完成了研究，显然我需要使用 web 服务和 json 来安全地从数据库中获取信息。

有没有人有任何链接让我开始，因为我对这个程序完全没有经验。我不需要被灌输，但正确方向的一点会有所帮助。我真的找不到这个新版本的 Xcode 的任何链接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T16:32:33.683

这里有两个很棒的教程，对我有很大帮助

[如何为 iOS 应用编写简单的 PHP/MySQL Web 服务](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

[如何编写使用 Web 服务的 iOS 应用程序](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:33:52.240

没有“无线”API 可以让您直接连接到 MySQL 数据库。相反，您可以做的是在数据库前面创建一个 RESTful Web 服务，该服务通过来自 NSURLRequest 对象的请求以 JSON 格式返回数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:37:00.673

通过通常通过 PHP 连接，您的实际意思是您已经完成了 Web 开发。这意味着有一个服务器和一个数据库。

iOS 运行时中没有可用的服务器允许您安装 PHP 或 MySQL。

你不能这样做...

但是，您可以在服务器上创建您的 php 和数据库，并通过网络从您的应用程序连接到它。

我的建议是看看你需要什么样的数据库，如果它是用于学校并且它与外界没有真正的交互，那么在你的应用程序中使用 SQLite，它是一个嵌入式数据库，所以它在手机上，尽可能快想要，没有网络，您显然可以利用您的 SQL 知识。

如果你想用你的 php 东西创建一个 API 或服务器，你真的给自己做了很多额外的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:39:45.153

您需要创建一个**NSMutableURLRequest**并用它初始化一个**NSURLConnection**以发送 HTTP 消息。像这样的东西：

```
NSURL *url = [NSURL URLWithString:@"http://xyz.com"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

# jquery - 将 onclick 属性附加到 jquery 对象；$(this) 引用窗口对象而不是特定的 jquery 对象

> ID：13401942
> 
> 赞同：0
> 
> 时间：2012-11-15T16:29:42.530
> 
> 标签：jquery, events, onclick

```
function df(){
 $(this).text('hello world');
}

bn.attr('onclick','df();'); 
```

我的问题是`$(this)`引用 jquery`window`对象而不是 jquery 对象`bn`。

如何`bn`在我的函数中获得动态引用`df`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:30:45.353

不要使用`onclick`属性。使用`.click()`方法：

```
bn.click(df); 
```

或`.on()`方法（jQuery 1.7+）或`.bind()`（旧版本）：

```
bn.on("click", df); 
```

请注意，函数标识符后*没有调用括号。*您需要传递对函数的引用，而不是函数的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:30:57.197

试试这个

```
bn.on('click' , df); // Instead of onclick 
```

您需要将函数指针而不是函数传递给 DOM`this`才能处于您期望的上下文中。

# php - php可以将未压缩的gzip html数据转发到nginx，然后nginx将其转发到用户前端吗？

> ID：13401945
> 
> 赞同：1
> 
> 时间：2012-11-15T16:29:48.380
> 
> 标签：php, curl, web, nginx, gzip

我的服务器端是 nginx-1.2.4 + php-5.3.17。我有一个 php 脚本来通过 curl 获取另一个站点的内容，但未启用 gzip。虽然 nginx 开启了 gzip。所以数据流看起来像：

```
 plain/html                plain/html             gzipped
xxx site's html ==============> php(curl) ==============> nginx ============> user's browser 
```

但是现在，为了加快一点速度，我想启用 php' curl 的 gzip。然后，程序：

```
 gzipped                plain/html             gzipped
xxx site's html ===========> php(curl) ==============> nginx ============> user's browser 
```

因为php的curl会自动将gzip后的html解压成纯html，所以当html传给nginx时，nginx会再次进行压缩。

我在想的是，php可以保留gzip压缩的数据并转发给nginx，不需要nginx再压缩一次。预期的过程如下所示：

```
 gzipped                gzipped            gzipped
xxx site's html ===========> php(curl) ===========> nginx ===========> user's browser 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:46:27.883

您必须发送`Accept-Encoding`带有 curl 请求的标头：

```
curl_setopt($cURL, CURLOPT_HTTPHEADER, array("Accept-Encoding: gzip")); 
```

并且不要设置`CURLOPT_ENCODING`选项。

此外，您可能对[nginx gunzip 模块](http://nginx.org/en/docs/http/ngx_http_gunzip_module.html)感兴趣。

# php - 在运行另一个页面时在提交时刷新 HTML PHP 页面？

> ID：13401947
> 
> 赞同：2
> 
> 时间：2012-11-15T16:29:53.157
> 
> 标签：php, html, forms

我有一个页面上有大量发票，我希望能够删除发票，然后看到它已被删除。

我目前正在使用的是（因为我不太了解 HTML / PHP，所以将其他代码混为一谈......！）

```
 <form name="form1" action="deleteinvoice.php" method="post">
    <input name="invoiceid" type="number" size="20"/>
    <input id="input" 
        type='submit' 
        value='Delete' 
        onclick="form1.action='deleteinvoice.php';target='my-iframe'" 
        class="button save-big" 
        disabled="disabled" >
    <input type="checkbox" 
        name="agree" 
        value="yes" 
        onclick="input.disabled = !this.checked" />Confirm you have the correct invoice number
    </form>

<iframe name="my-iframe" src="deleteinvoice.php" style="display:none"></iframe> 
```

就删除发票而言，这工作正常（所以我知道 deleteinvoice.php 页面正在工作），但我真正可以做的是刷新我所在的页面，以便删除的发票消失并且表格又是空白。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:34:10.960

一个快速而肮脏的 PHP 解决方法是创建另一个 PHP 页面，该页面将删除发票并重新加载您所在的页面：

```
<?php
    ob_start();
    require 'deleteinvoice.php';
    ob_end_clean();
    Header("Location: the-page-you-were-looking-before.php");
?> 
```

然后将表单操作设置为

```
onclick="form1.action='workaroundpage.php';" 
```

注意：这*不是*一个非常干净或安全的设置。这只是一个简单的制作，因为您说您对 PHP 不是很熟悉。

上面的代码所做的是首先加载真正的“deleteinvoice.php”，就好像它是那个页面一样。所以发票像以前一样被删除。但是该页面的任何输出首先由 缓冲`ob_start()`，然后由 丢弃`ob_end_clean()`，使此等效（客户端）为空白页面。然后它将浏览器（它可以这样做，因为它好像没有创建输出）重定向到原始页面，而不是在 iframe 中，而是在主窗口中。因此，您发现自己回到了列表页面，发票已被删除。

一种更优雅（但相对复杂）的方法可以是例如通过 jQuery AJAX 调用和发票 DOM 元素销毁。

# java - Java Swing 打印 - JTextPanel.Print

> ID：13401950
> 
> 赞同：3
> 
> 时间：2012-11-15T16:30:01.767
> 
> 标签：java, swing, printing, margin

好吧，我不会说英语，但我会努力的。首先我有一个问题，我需要打印 a `Ticket`，`Company`我的程序没问题，但是当我尝试打印时，打印机的边距是`24 25 15 18`或类似的边距。我需要在打印对话框中将边距更改为`7 7 0 5`，当我更改此边距时，结果是最好的。但我的问题是该程序不适合我，它适合不想在每次销售中增加利润的其他人。而且我不知道如何将边距设置为默认值。

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try { 
        this.jTextPane1.print();
    } catch (PrinterException ex) {
        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我正在使用 a`JTextPane`显示预览，然后使用如下代码打印：

我知道，`awt.Print`但我不太了解这个类，而且我没有太多时间，如果你有一个新的类要打印，边距可以更改为默认值，我会很感激你。对不起英语...

PD：印刷品是 EPSON-TMU220

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:02:30.390

可能这个[http://java-sl.com/JEditorPanePrinter.html](http://java-sl.com/JEditorPanePrinter.html)是你需要的。

`JEditorPane's`无论设置哪个，它都允许预览和打印分页内容`EditorKit`。

# c# - 数据行对象的匿名类型不起作用

> ID：13401953
> 
> 赞同：0
> 
> 时间：2012-11-15T16:30:09.443
> 
> 标签：c#, linq, .net-3.5, anonymous-types, datarow

我想从数据行中选择一些字段，例如：

```
var result = datatable.AsEnumerable()
    .Select(x => new { x.Field<string>("Field1"), x.Field<string>("Field2")}); 
```

不幸的是，这不起作用说：

> 无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。

我怎样才能达到我想要的？

**编辑：**似乎（至少）有两种方法可以实现它：

1.  给他们起名字：

    ```
    var 结果 = datatable.AsEnumerable().Select(x => new
    {
        Field1 = x.Field("Field1"),
        Field2 = x.Field("Field2")
    });
    ```

2.  创建一个新对象

假设我们有一堂课

```
class MyClass
{
    public string Field1 { get; set; }
    public string Field2 { get; set; }

    public MyClass(string field1, string field2)
    {
        this.Field1 = field1;
        this.Field2 = field2;
    }
} 
```

我们可以做到以下几点：

```
var result = datatable.AsEnumerable()
    .Select(x => new MyClass(x.Field<string>("Field1"), x.Field<string>("Field2"))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:31:23.120

您需要为属性命名：

```
var result = datatable.AsEnumerable()
    .Select(x => new 
    { 
        Field1 = x.Field<string>("Field1"), 
        Field2 = x.Field<string>("Field2")
    }); 
```

然后使用它：

```
var field1 = result.First().Field1; 
```

编译器不知道如何从`x.Field<string>("Field1")`. 但这会起作用：

```
int id = 1;
string name = "Myname";
var obj = new { id, name }; // Names are inferred from the variable name.

var result = obj.name; // This would work 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:32:49.263

你需要给你的匿名类型的成员一些名字。

```
var result = datatable.AsEnumerable()
    .Select(x => new { 
        Field1 = x.Field<string>("Field1"), 
        Field2 = x.Field<string>("Field2")}); 
```

如果您考虑一下，没有名称会使以后引用属性变得非常困难，您必须使用反射和一些猜测工作。在任何情况下，都需要定义名称，以便可以在幕后为您创建匿名类型。

* * *

如果您更喜欢返回 a`Tuple`而不是匿名类型，您可以这样做

```
 var result = datatable.AsEnumerable()
    .Select(x => Tuple.Create( 
        Field1 = x.Field<string>("Field1"), 
        Field2 = x.Field<string>("Field2"))); 
```

然后您可以分别使用`Item1`和访问成员`Item2`。

**但是**，该[`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)课程是 .Net 4.0 的新手，您的问题被标记为 3.5

* * *

作为对您的评论的回应，您始终可以声明自己的类型

```
public class MyPair<TItem1, TItem2>
{
    public MyPair(TItem1 item1, TItem2 item2)
    {
        this.Item1 = item1;
        this.Item2 = item2;
    }

    public TItem1 Item1 { get; private set; }
    public TItem2 Item2 { get; private set; }
} 
```

显然你会这样使用，

```
var result = datatable.AsEnumerable()
    .Select(x => new MyPair( 
        Field1 = x.Field<string>("Field1"), 
        Field2 = x.Field<string>("Field2"))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:31:50.700

好吧，错误说明了一切，给成员起名字：

```
var result = datatable.AsEnumerable()
.Select(x => new { 
                    First = x.Field<string>("Field1"),
                    Second = x.Field<string>("Field2")
                 }); 
```

# sql - 用户定义的表格，存储不同类型的数据，1表vs多表

> ID：13401955
> 
> 赞同：1
> 
> 时间：2012-11-15T16:30:23.423
> 
> 标签：sql, sql-server, linq

我正在研究为管理用户构建一种使用他们定义的自定义字段动态创建表单的方法。将有以下几种不同的数据类型：

`varchar(200)`, `varchar(max)`, `Date`,`int`等...

我计划有一个名为`formCollectedData`保存一般表单提交信息的表，然后有另一个表，其中包含用户填写表单输入的每个字段的行。

关于数据库结构，我可以有一个表来存储所有输入的字段，如下所示：

![在此处输入图像描述](../Images/d85938a11b262807517b666636634bf1.png)

根据收集数据的表单元素，一次只有一个可以为空的字段实际存储数据。

或者对每种数据类型都有一个单独的表

![在此处输入图像描述](../Images/a79a10290d20cb635cb9b0693213e2d9.png)

**我倾向于只拥有一个表，该表对于每种数据类型都具有可空字段，主要是因为它简化了连接等，但我想就将它们分解成单独的表是否有任何好处获得其他意见长跑。有什么想法吗？**

目前每天可能会提交几百个表单，每个表单通常有 10 个字段。

我在 C# 世界并计划使用 Linq。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:16:29.440

您正在寻找意见，所以这是我的。

在这里创建多个表的好处是可以避免空值。如本文所述，[http://www.sql-server-citation.com/2009/12/common-mistakes-in-sql-server-part-4.html](http://www.sql-server-citation.com/2009/12/common-mistakes-in-sql-server-part-4.html)，空值占用磁盘空间。拥有一个包含大量空值的表也不是很性感（从数据库设计的角度来看）。

老实说，处理这么多表可能真的很痛苦，所以如果您必须经常手动查询表（尤其是插入和更新），我只会选择一个表。对于每年大约 40K 行来说，这没什么大不了的。

现在这是您的电话，在美丽或方便的方式之间进行选择:-)

# spring - 如何 实现元数据来为切入点捕获的类创建代理

> ID：13401956
> 
> 赞同：0
> 
> 时间：2012-11-15T16:30:23.267
> 
> 标签：spring, aop, aspectj, spring-aop

正如我从 spring 3 文档中得到的那样，有两种 AOP 方式

1.  `<aop:config>`AspectJ -在 xml中包含元数据或使用注释`@Aspect`

2.  Spring 自己的实现 - 使用接口进行通知（`BeforeAdvice`等`AfterAdvice`）

--到目前为止如果我错了请纠正我-

现在 spring 自己的实现由`AutoproxyCreator`( `BeanNameAutoproxyCreator`, `DefaultAdvisorAutoproxyCreator`) 实现，它在创建 bean 时使用`BeanPostProcessor`.

但是 AspectJ 的代理是如何在 Spring 中完成的。Aspect 类如何由`@Aspect`of提供

```
<aop:config>
    <aop:aspect ref= "anyclasshavingAllAdviceMethod">
       <!-- (all aop:before,aop:after-throwing etc) -->
    </aop:aspect>
</aop:config> 
```

用于创建代理。`<aop:config>`or的实现背后的机制是什么`@Aspect`。

或加载时 waever 用于这些 .

注意：要实现 aop:config 我们不必提供任何额外的 bean 或 load-time-weaver 那么它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:47:55.670

这里有几个级别的区别。

1.  Spring AOP
    这有两种风格：
    *   经典 (XML) Spring AOP
    *   `@AspectJ`-Style Spring AOP
2.  Aspect-J
    这也有两种风格：
    *   经典 AspectJ (.aj)
    *   `@AspectJ`-风格方面J

Spring AOP 的两种风格都是使用 BeanPostProcessors 和代理实现的。

AspectJ 的两种风格都是在编译时（字节码操作或单独编译）或类加载时（使用加载时编织器时）实现的

Spring AOP 的现代版本和 AspectJ 的现代版本共享`@AspectJ`-Syntax，但不要将它们相互混淆：Spring AOP 仅适用于使用代理的 Spring Bean，因此仅拦截来自外部的方法调用。AspectJ 改变了方法的实际字节码，因此完全独立于 Spring 工作。

如果您想了解更多关于不同技术和风格的信息，我推荐Spring Committer 和 AspectJ Guru [Ramnivas Laddad的 Book](https://stackoverflow.com/users/485671/ramnivas) [AspectJ in Action](http://www.manning.com/laddad2/)。

您还应该阅读：[Spring 参考：8.4。选择要使用的 AOP 声明样式](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-choosing)

# linux - Debian 上的 VMwarePlayer。缺少内核模块

> ID：13401966
> 
> 赞同：0
> 
> 时间：2012-11-15T16:30:44.993
> 
> 标签：linux, vmware, kernel-module

今天我把我的工作站换成了 Debian。由于 Ubuntu 几乎不稳定。现在我安装了 VMware 播放器。我启动它并收到一条消息“在您可以运行 VMware 之前，必须编译几个模块并将其加载到正在运行的内核中。未找到 version2.6.32-5-amd64 的内核头文件”，下面的字段是我可以给出的文件位置。我现在该怎么办？我从来没有遇到过这样的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:46:41.533

```
apt-get install linux-headers-$(uname -r) build-essential 
```

成功了。

# xcode - 如果没有恢复文档，如何自动创建新的 NSDocument？

> ID：13401969
> 
> 赞同：3
> 
> 时间：2012-11-15T16:30:52.247
> 
> 标签：xcode, cocoa, nsdocument, nsapplication, nsapplication-delegate

编辑：似乎只有当我在 Xcode 中运行（我在 4.4 上）而不是从 Finder 中运行时，才会出现以下问题（相反，没有发生...... :)。这是一个 Xcode 错误，还是我遗漏了什么？

我想在应用程序启动时创建一个新的（无标题）NSDocument，以防没有文档自动恢复。TextEdit 和 Safari 都显示我想要的行为，所以看起来这应该是内置的，但我找不到任何选项。

重现我的问题的步骤：如果我在 Xcode 中创建一个新的基于文档的应用程序并运行它，它第一次运行时确实会创建一个无标题的文档。但是，如果我关闭该文档，退出应用程序并再次运行它，它不会给我一个新文档，除非我明确单击 Dock 中的应用程序图标。这与例如 TextEdit 不同，如果您退出并重新启动，您会得到一个新的空文档。（正如预期的那样，更改捆绑标识符会给我另一个新的无标题文档。）

我的第一个想法是这可能应该发生在 中`applicationDidFinishLaunching:`，但事实证明，该方法是在恢复任何以前打开的文档之前执行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:32:49.587

此行为是文档架构的一部分。您的应用程序委托应实现协议的以下方法`NSApplicationDelegate`

```
- (BOOL)applicationShouldOpenUntitledFile:(NSApplication *)sender;
{
    return YES;
} 
```

[您可以在此处](https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/ManagingLifecycle/ManagingLifecycle.html)找到更多相关信息。

# php - 通过 www 和非 www 登录 Wordpress

> ID：13401975
> 
> 赞同：0
> 
> 时间：2012-11-15T16:31:01.063
> 
> 标签：php, wordpress, apache, .htaccess, login

我的 Wordpress 安装似乎只喜欢使用 www 登录的人。子域并强制使用 www。大多数链接的子域。但是我希望这样当有人在 www.mysite.com 和 mysite.com 登录我的网站时，它会在 wordpress 上的两个地方登录。除其他原因外，这是因为我的 wordpress 安装充满了 www 和非 www 链接。

在 PHP 中，这通常通过将 setcookie() 的“domain”参数留空/null 来完成，或者对于旧版浏览器，在域之前指定一个点，即“.mysite.com”。

有没有办法让 wordpress 执行这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:39:15.583

你只能有一个或另一个。

1.  在 WP 控制面板的“常规设置”下，以您喜欢的方式指定您的地址，即。有或没有'www'。
2.  `.htaccess`假设您在运行 apache 的服务器上：在站点的根目录中创建以下文件之一。

```
# Redirect www urls to non-www
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.yoursite\.com [NC]
RewriteRule (.*) http://yoursite.com/$1 [R=301,L] 
```

```
# Redirect non-www urls to www
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.yoursite\.com
RewriteRule (.*) http://www.yoursite.com/$1 [R=301,L] 
```

# c# - 使用存储库模式 - 在哪里可以使用 LINQ 过滤？

> ID：13401976
> 
> 赞同：1
> 
> 时间：2012-11-15T16:31:08.393
> 
> 标签：c#, .net, repository, repository-pattern

我最近开始在我的服务中实现存储库模式，我遇到了一个小问题，我想提出一些建议。

在我的服务中使用以下代码：

```
[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]
public Policy GetPolicyById(int policyId, int historyId)
{
    // Don't do the if not deleted check here, as we can do it on our Controller.
    // This means we can use this function if we have to access the deleted records.
    return _policy.GetByID(policyId, historyId);
} 
```

这个函数显然是直接从服务接口引用的，.GetByID 方法是我的通用存储库的一部分。

主要问题是：如果我想`.Where(a => !a.Deleted)`对这个结果集做 a 怎么办。您可以通过我的代码注释看到我的一般想法是什么，但这是“正确”的做法吗，应该在服务级别、控制器（UI）级别完成，还是应该在其中创建函数我的非通用存储库允许此功能？

** 更新 **

这是我的代码的另一部分，在我的策略存储库中：

```
/// <summary>
/// 
/// </summary>
/// <param name="policyId"></param>
/// <param name="historyid"></param>
/// <returns></returns>
public virtual IEnumerable<Policy> GetPolicies(int take, int skip)
{
    var policies = GetPoliciesHistoryGrouped().Take(take).Skip(skip);
    return policies;
}

/// <summary>
/// Returns all non-deleted (bitDelete) policies (in an expression, not comitted via the database), 
/// grouped by the latest history ID.
/// </summary>
/// <returns></returns>
private IEnumerable<Policy> GetPoliciesHistoryGrouped()
{
    // Group and order by history ID.
    var historyIDs = _context.Policies.Where(a => !a.bitDelete)
                     .GroupBy(a => a.intPolicyId).Select(group => new
                     {
                         PolicyID = group.Key,
                         HistoryID = group.Max(a => a.intHistoryID)
                     });
    var query = (from h in historyIDs
                 join p in _context.Policies on new { h.HistoryID, h.PolicyID } equals new { HistoryID = p.intHistoryID, PolicyID = p.intPolicyId }
                 select p).OrderBy(a => a.intPolicyId);
    return query;
} 
```

这种深度不应该在存储库层，而是在服务层，`GetPoliciesHistoryGrouped`仍然需要在其中创建和共享功能？记住，.Take 和 .Skip 在分组完成之前不能被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:32:54.800

你的推理是正确的。这种过滤是应该在服务层完成的业务逻辑。存储库仅包含简单的 CRUD 方法。

# r - Autoloads 环境有什么作用？

> ID：13401977
> 
> 赞同：18
> 
> 时间：2012-11-15T16:31:09.550
> 
> 标签：r

路径上的倒数第二个项目`search()`（总是？）一个名为`Autoloads`. 关于这个话题，我能找到的只是[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.pdf)(pdf) 第 26 页上的一句话。

> Autoloads 环境用于保存可以按需加载的代理对象。

请你能给我更多关于这个环境的用途的解释。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T15:52:02.430

自动加载提供了一种在将来加载包的方法，仅在使用它们的时候（如果有的话）。因此，如果一个包中的一个函数*可能*很快就会被使用，但是（可能是出于内存原因）您不想加载包，除非绝对必要，您可以使用该`autoload`函数来承诺在使用该函数时使该函数可用。

`Autoloads`环境（可通过`as.environment("Autoloads")`或访问`.AutoloadEnv`）存储它将承诺加载的函数和一个字符向量，用于`.Autoloaded`命名需要加载的包。

更多信息可在[`?autoload`](http://www.inside-r.org/r-doc/base/Autoloads)帮助页面和[R-FAQ 7.6](https://cran.r-project.org/doc/FAQ/R-FAQ.html#How-does-autoloading-work_003f)中找到。

# c# - 如何从列表中获取特定项目的名称

> ID：13401978
> 
> 赞同：-7
> 
> 时间：2012-11-15T16:31:10.797
> 
> 标签：c#, list

从下面的例子中问了一个问题。

```
List<Report> lista = new List<Report>();
lista.add (new Report {. Name = "Report1"});
lista.add (new Report {. Name = "report2"});
lista.add (new Report {. Name = "report3"});
lista.add (new Report {. Name = "report4"}); 
```

您如何获得报告编号 3 的名称？

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:35:17.933

```
lista[2].Name 
```

注意列表从 0 开始索引，因此第一个元素是`lista[0]`.

另外，请注意，`C#`我们不使用`.`内联对象初始化器中的前导，所以它应该是

```
List<Report> lista = new List<Report>();
lista.add (new Report {Name = "Report1"});
lista.add (new Report {Name = "report2"});
lista.add (new Report {Name = "report3"});
lista.add (new Report {Name = "report4"}); 
```

此外，您可能还想初始化列表：

```
List<Report> lista = new List<Report>(){
    new Report {Name = "Report1"},
    new Report {Name = "Report2"},
    new Report {Name = "Report3"},
    new Report {Name = "Report4"}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:34:38.977

如果“报告编号 3”是指第三份报告，您可以这样做：

```
lista[2].Name 
```

`Report`如果“报告编号 3”是指(例如)上有附加属性`Id`，则可以执行以下操作：

```
lista.First(x => x.Id == 3).Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T16:35:16.043

可以通过以下方式访问列表中的第 3 项：

```
string name = lista[2].Name; 
```

# c++ - c++程序使用函数打印素数

> ID：13401981
> 
> 赞同：-6
> 
> 时间：2012-11-15T16:31:16.867
> 
> 标签：c++, multidimensional-array

我必须编写一个程序，使用 2 个函数打印从 1 到 100 的素数（一行每 5 个数字）：第一个测试数字是否为奇数，第二个测试它是否为素数

我写了那个代码，但它没有工作它只打印 100 之前的最后一个素数

谢谢^_^

```
#include "stdafx.h"

bool is_odd(int x)
{
    if (x%2==0)
        return false;
    else
        return true;
}

bool is_prime(int x)
{
    int j=0;
    if (!(is_odd(x)))
        return false;

    if(is_odd(x))
    {
        for(int i=1;i<=x;i++)
            if (x%i==0)
                j=j+1;

        if (j==2)
            return true;
        else
            return false;
    }
}

void main()
{
    int x[100][100];
    int i=1;    

    while (i<=100) 
    {
        for(int j=1;j<=20;j++)
            for(int k=1;k<=5;k++)
                if (is_prime(i))
                    x[j][k]=i;
        i++;
    }
    for(int j=1;j<=20;j++)
    {
        for(int k=1;k<=5;k++)
            cout<<x[j][k]<<' ';
        cout<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:39:06.203

它正在打印最后一个数字（97），因为在循环的每次迭代期间`i`，您都在设置数组的所有元素`x`，然后在最后打印它。所以很自然，你得到的只是最后一个素数。如果您只想打印素数并仍然保持网格，您应该为您的`if (is_prime(i))`子句执行以下操作：

```
if (is_prime(i)) {
    x[numPrimes / 5][numPrimes % 5] = i;
    numPrimes ++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:43:00.330

对于一个简单的问题，如此惊人的复杂性。您不需要数组来执行此操作，甚至不需要多维数组。

```
int main()
{
    int count = 0;
    for (int i = 1; i <= 100; ++i)
    {
        if (is_prime(i))
        {
            cout << i << ' ';
            ++count;
            if (count == 5)
            {
                cout << endl;
                count = 0;
            }
        }
    }
    cout << endl;
} 
```

# codeigniter - Codeigniter - 在视图中使用会话数据

> ID：13401985
> 
> 赞同：2
> 
> 时间：2012-11-15T16:31:20.767
> 
> 标签：codeigniter, session, variables

我有一个用户的名字和姓氏存储在会话数据中，我想在视图中回显它，这样他们就可以看到他们以谁的身份登录。我似乎无法让数据通过。我确信这很容易，但我对 CI 和整个 MVC 的东西还是很陌生。

控制器代码：

```
public function index() {
    if($this->session->userdata('admin_signed_in')){
    $this->load->model('dashboard_model');
    $data['userdata'] = $this->session->userdata;
    $data['main_content'] = 'dashboard/dashboard';  
    $this->load->view('common/template', $data);
    } else {
    redirect('signin');
    }

} 
```

查看代码：

```
<?php echo $userdata('first_name') ?>  <?php echo $userdata('last_name') ?> 
```

打印 R 结果：

```
Array ( [session_id] => 69db0f9ccbfde96d92cc09837067438c [ip_address] => ::1 [user_agent] => Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:16.0) Gecko/20100101 Firefox/16.0 [last_activity] => 1352998508 [user_data] => [0] => Array ( [admin_id] => 10 [first_name] => Richard [last_name] => Coy [admin_role] => 1 ) [admin_signed_in] => 1 ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T16:35:02.407

控制器代码：

```
public function index() {

    ...
    $data['first_name'] = $this->session->userdata('first_name');
    ...
} 
```

查看代码：

```
<?= $first_name; ?> 
```

或者，如果您想像现在一样传递数据，您可以将视图数据 userdata 作为数组而不是函数访问，即：

```
<?= $userdata['first_name'];?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:45:11.530

正如我在评论中提到的，当您为数组赋值`$data`并通过 Codeigniter 视图加载器传递它时，数据将在视图部分中可用，变量名称与数组索引相同。
例如，当您这样做时：

```
$data['name'] = "bla bla";
$this->load->view('some_view', $data); 
```

那么`$name`视图中的变量将包含您传递的值。在您的情况下，您将数组分配给`$data['userdata']`. 所以`$userdata`视图中的也将是一个数组。

所以这样做：

```
echo $userdata['firstname'];
echo $userdata['lastname']; 
```

在视图部分。

# matlab - 如何从文本文件中读取具有不同数量数据条目的行到 Matlab 中的数组中？

> ID：13401988
> 
> 赞同：0
> 
> 时间：2012-11-15T16:31:28.100
> 
> 标签：matlab, file-io

我有一个包含消息和时间戳的文本文件：

```
 {193220,message,ucontroller9,controller1,lowalarm,success},
 {193220,message,controller1,changer,{change,down},success},
 {193220,controlaction,tapchange_down,{oldsetting,0.975},{newsetting,0.95}},
 {193220,modelupdate_start,changeup,changer,193220},
 {14430,modelupdate_complete},
 {278480,message,ucontroller6,controller1,highalarm,success},
 {278480,message,controller1,changer,{change,up},success},
 ... 
```

我想将这些行读入一个数组并根据第一列重新排序数组。到目前为止，我的方法如下：

```
fid = fopen('messagestore.txt')    % Open file
n=1    
while 1
string = fgetl(fid);               % get line
if ~ischar(string), break, end     % break if end of file
string = strrep(string,'[','');    %
string = strrep(string,']','');    %
string = strrep(string,'{','');    % strip out unwanted characters
string = strrep(string,'}','');    %
string = strrep(string,',',' ');   %
string = string(2:end);            % remove space at start

MessageArray(:,n) = textscan(string,'%f%s%s%s%s%s');  % format and save into array
n=n+1;
end
fclose(fid) 
```

这部分有效，但我在区分不同的消息类型（即字段数）时遇到了问题。我猜`sort`如果我可以正确地将数据放入数组中，我可以使用 matlab 函数。

有没有办法在matlab中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:12:18.157

以下是一些应该起作用的步骤：

0：找到每行中字段数的上限

1：确保你有漂亮的矩形数据。查看每行中逗号的数量减去`{`括号的数量。（不要扣除，`}`否则您将计算双打）。这为您提供了您拥有的字段数量。然后添加逗号，直到每行达到最大值。

`{` 2：将and更改`}`为标准文本指示器，例如`"`

`xlsread()`3：使用或类似的导入结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:34:22.797

丹尼斯说得对，你可能应该做一些预处理，因为你有多组大括号等。

您可能正在寻找的是某种基本上对文件行进行排序的方法。如果您不担心捕获单个字符串字段，而只是在重新排序行中，您可以根据第一个字段读取和排序，您知道它是数字。这是相当骇人听闻的，但也许你正在寻找类似的东西（这基本上是丹尼斯在上面的评论中建议的）：

```
clear all, clc
fid = fopen('messagestore.txt');
n=1;
nums = [];
while 1
    string = fgetl(fid);               % get line
    if ~ischar(string), break, end     % break if end of file

    for k = 1:length(string)
        if string(k) == ','
            break
        end
    end
    nums = [nums str2num(string(2:k-1))];
    MessageArray{n} = string;
    n=n+1;
end
[nums,I] = sort(nums);
MessageArray = MessageArray(I);
fclose(fid);

% Print some output
for k = 1:length(nums)
    disp(MessageArray{k})
end 
```

产生

```
{14430,modelupdate_complete},
{193220,message,ucontroller9,controller1,lowalarm,success},
{193220,message,controller1,changer,{change,down},success},
{193220,controlaction,tapchange_down,{oldsetting,0.975},{newsetting,0.95}},
{193220,modelupdate_start,changeup,changer,193220},
{278480,message,ucontroller6,controller1,highalarm,success},
{278480,message,controller1,changer,{change,up},success} 
```

现在，我不完全确定您的时间戳是如何工作的，在这里我按字面意思对数值进行排序。但是您应该能够从代码中获得基本思想——将第一个字段中的数字读入一个向量，并使用该向量对行本身进行排序。无论您的时间戳需要哪种类型的排序，都可以通过更改来执行`[nums,I] = sort(nums)`

# arrays - bash 中的 MATLAB 样式数组初始化

> ID：13401992
> 
> 赞同：0
> 
> 时间：2012-11-15T16:31:46.287
> 
> 标签：arrays, bash

我想在 bash 中初始化一个大数组，最好使用 MATLAB 样式的数组初始化。例如，我想要类似于以下的东西

# 声明一个数组，其元素范围从 0 到 1000，间距为 5

```
array=0:5:1000 
```

我知道你可以在 for 循环中实现这一点，如下所示

```
for i in {0..1000..5}
do
done 
```

但在以下情况下同样不起作用

```
array={0..1000..5}

syntax error: operand expected (error token is "{0..1000..5}") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:45:27.503

为了进行数组赋值，您需要将大括号扩展包装在`()`.

```
array=({0..1000..5}) 
```

# jquery - 如何添加jquery按钮样式以使背景图标透明

> ID：13401997
> 
> 赞同：0
> 
> 时间：2012-11-15T16:31:56.570
> 
> 标签：jquery, jquery-ui, jquery-widgets

我有解决方案，如果我把它放在标记中它工作正常：

```
//class="ui-icon ui-icon-closethick" title="Close all" style="cursor:pointer;background-image: url(content/jquery/jquery-ui/1.8.21/css/ui-lightness/images/ui-icons_ffffff_256x240.png);" 
```

但是我需要在下面的代码中添加所有这些信息，但我找不到正确的 sintax：

```
$(objID).button
    ({
        icons:
        {
          primary: "ui-icon-closethick { margin:10px; }",
        },
        text: false
    }).click(function() {
            alert("Clicked!");
    });
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:34:05.067

只需将样式放在一个类中并`.addClass()`在点击事件中使用..

```
.button
{
   cursor:pointer;
   background-image: url(content/jquery/jquery-ui/1.8.21/css/ui-lightness/
                         images/ui-icons_ffffff_256x240.png);
}

.click(function() {
            alert("Clicked!");
           $(this).addClass('button');
    }); 
```

# nservicebus - 分发器存储队列何时被清除

> ID：13401999
> 
> 赞同：1
> 
> 时间：2012-11-15T16:31:58.863
> 
> 标签：nservicebus

我有一个分发者和 2 个工作人员，分发者的存储队列中的消息不断增加，每条消息的大小为 2 kb。

我在这里查看了 Udi 的回复 [http://tech.dir.groups.yahoo.com/group/nservicebus/message/10698](http://tech.dir.groups.yahoo.com/group/nservicebus/message/10698) 当分发者向工作节点发送消息时，消息会从分发者的存储队列中清除。话虽如此，工作节点通常会在之后立即发送就绪消息，从而导致存储队列再次填满。

我不清楚“导致存储队列再次填满”。陈述。

我期望分发者的存储队列中的最大消息应该等于工作人员的数量，但事实并非如此。

是否有任何我可能缺少的配置来控制分发者的存储队列清理行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:43:11.437

从 NSB 3.3.2 开始，存在一个已知问题，[https:](https://github.com/NServiceBus/NServiceBus/issues/806) //github.com/NServiceBus/NServiceBus/issues/806 ，在分发者场景中对工作人员使用 SendLocal。这将导致工作人员在每次处理本地发送的消息时发送“准备好接收新消息”。这使得分发者存储队列增长到高于所有工作线程上所有工作线程总和的预期最大值。如果您在本地发送大量消息并且存储队列中的条目数量增长非常大，这可能会成为问题。

解决方法：

1.  从 SendLocal 切换到 Send
2.  重新启动工作人员（这将重置存储，但它将为工作人员上的每个 SendLocal 重新建立

There was also a similar issue with SLR(Second Level Retries) functionality( [https://github.com/NServiceBus/NServiceBus/issues/571](https://github.com/NServiceBus/NServiceBus/issues/571) ), but that was fixed in 3.2.7.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:16:40.190

当工作人员重新启动时，队列将被清除。我猜你是在 2.x 下运行的，我记得队列中的消息数量是工人数量的两倍。我不记得确切的原因，但这并没有真正影响任何事情。

在 3.x 中，我只是验证了每个工作人员有一条消息，并且当工作人员重新启动时它们将被清除。一旦重新启动，worker 将立即调整并报告其可用性，因此队列在恢复后将立即包含消息。