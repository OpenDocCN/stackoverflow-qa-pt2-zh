# StackOverflow 问答 13630000-13630999

# macos - Qt 文件对话框未在 Mac OS 的沙盒中打开

> ID：13630000
> 
> 赞同：0
> 
> 时间：2012-11-29T16:15:48.050
> 
> 标签：macos, file, qt, sandbox

我有一个用 Qt 开发的 Mac OS 应用程序。我使用以下代码启动打开和保存文件对话框：

```
//opening
QString fileName = QFileDialog::getOpenFileName(this,
    tr("Open"), "", tr("*.ext"));

//saving
QString fileName = QFileDialog::getSaveFileName(this,
    tr("Save"), "filename", tr("*.ext")); 
```

当应用程序没有被沙盒化时，代码可以正常工作。但是当我将它沙箱化以便在 Mac App Store 上分发时，代码不起作用。该应用程序只是冻结了一会儿。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:25:00.977

这篇文章应该会有所帮助[http://www.digia.com/en/Blogs/Qt-blog/Pasi_Matilainen/Dates/2012/4/How-to-Publish-Qt-Applications-in-the-Mac-App-Store /](http://www.digia.com/en/Blogs/Qt-blog/Pasi_Matilainen/Dates/2012/4/How-to-Publish-Qt-Applications-in-the-Mac-App-Store/)

tldr;

您需要使用 Qt 4.8.1 发布到 Mac App Store

> 在沙盒中使用文件保存对话框
> 
> 文件保存对话框需要一个非空的默认文件名才能在沙箱中正常工作。您可以为保存对话框提供默认文件名，如下所示：
> 
> ```
> QString fileSavePath = QFileDialog::getSaveFileName(this, "Save file", "default filename"); 
> ```
> 
> 或者，如果您自己创建对话框实例：
> 
> ```
> QFileDialog *fileSaveDialog = new QFileDialog(this);
> fileSaveDialog->setAcceptMode(QFileDialog::AcceptSave);
> fileSaveDialog->selectFile("default filename"); 
> ```
> 
> 文件打开对话框不需要任何特殊设置即可正常工作。

但我认为你应该阅读整篇文章，这样你就不会错过任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:26:48.967

在沙盒中，您必须使用`NSOpenPanel`and`NSSavePanel`才能获得不同文件或目录的权限。

看看[Powerbox 和容器外的文件系统访问](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW4)。

# java - Java：将有符号整数转换为无符号长整数

> ID：13630001
> 
> 赞同：3
> 
> 时间：2012-11-29T16:15:54.197
> 
> 标签：java

首先：我知道Java不知道任何（un）signness的事实

我的问题涉及以下情况：

想象一下，你有一个`int i = -1 // ( == 0b1111111_11111111_11111111_11111111)`. 现在我想将其“转换”为表示字节值的长整数，例如在这种具体情况下`long l = 0xFFFFFFFF // ( == 0b1111111_11111111_11111111_11111111)`：

我的问题是如何`l`从`i`上面的示例中获得。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:32:18.617

您可以使用按位数学，应该从下面的代码中自我解释。不明白的可以在评论中提问。

```
public class LongConversion {
  public static void main(String args[]) {
    for (int i = -1; i > -40; i -= 9) {
      // THIS IS THE IMPORTANT LINE, THE REST IS JUST FOR DEMONSTRATION
      long l = 0x00000000FFFFFFFFl & (long) i;

      System.out.println("Original i: " + i);
      System.out.println(Integer.toHexString(i));
      System.out.println("Longed i: " + l);
      System.out.println(zeroLong(l));
      System.out.println();
    }
  }

  public static String zeroLong(long l) {
    return String.format("%16s", Long.toHexString(l)).replace(' ', '0');
  }
} 
```

此代码输出：

```
Original i: -1
ffffffff
Longed i: 4294967295
00000000ffffffff

Original i: -10
fffffff6
Longed i: 4294967286
00000000fffffff6

Original i: -19
ffffffed
Longed i: 4294967277
00000000ffffffed

Original i: -28
ffffffe4
Longed i: 4294967268
00000000ffffffe4

Original i: -37
ffffffdb
Longed i: 4294967259
00000000ffffffdb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T15:52:57.223

[Java 8 添加了一些对处理无符号类型的支持](https://blogs.oracle.com/darcy/entry/unsigned_api)。在这种情况下，您可以使用[`Integer.toUnsignedLong`](https://docs.oracle.com/javase/8/docs/api/java/lang/Byte.html#toUnsignedInt-byte-)，相当于[durron597 的 answer](https://stackoverflow.com/a/13630327/627727)。

```
long unsigned = Integer.toUnsignedLong(myIntger); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T16:32:15.730

您可以使用 API 来完成这项工作：

```
long l = Long.parseLong(Integer.toBinaryString(i), 2); 
```

方法javadoc[`toBinaryString()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#toBinaryString%28int%29)说

> 将整数参数的字符串表示形式返回为以 2 为底的无符号整数。

* * *

虽然，这种技术不如使用位掩码快，但它并不“慢”。

我在我的（典型）PC 上做了一些适当的计时，这个转换只用了**270 纳秒**，这在我的书中仍然非常快。

此外，它使用 API 来完成工作，而不是 bit kung fu，这更容易阅读并且有点自我记录。

# c++ - 在整数变量中存储二进制数

> ID：13630002
> 
> 赞同：2
> 
> 时间：2012-11-29T16:15:56.600
> 
> 标签：c++, arrays, binary

我正在制作一个模拟器，它模拟处理器的乘法方法。事情是首先我必须将十进制形式转换为二进制，二进制表示的每一位都存储在数组中的单独位置。现在，如上所述存储在数组中的两个二进制数的乘法非常复杂，而且非常消耗内存。

因为我必须遵循这个方法；

`1000`

X

`1110`

* * *

```
 `0000`

  `1000`

 `1000`

`1000` 
```

* * *

= 1110000

我知道我可以通过将小数形式相乘然后将它们转换为二进制来轻松做到这一点，但不幸的是，这里不需要。

我在想是否有办法将存储在数组中的二进制数存储为包含二进制数的单个整数。或任何其他将存储在数组中的二进制位相乘的简单方法。例如：

`a[0]=1,a[1]=1, .... ,a[32]=0`

所以我希望整数变量包含

`int x=110....0`

有没有办法做到这一点？

问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T16:28:28.187

您可以使用 std::bitset

```
std::bitset<32> b;

b[0] = 1;
b[1] = 1;
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T17:08:29.933

这是我使用的一个技巧，它非常方便位掩码测试某个位是否已设置或设置/重置位。我想它可能对你有很大***帮助***。（有时我会自暴自弃。）

```
template <std::size_t bitIndex, typename T>
bool get_integer_bit(const T num)
{
    // Make sure what was passed in is something ilke an int or long.
    static_assert(std::numeric_limits<T>::is_integer, "Numeral argument must be an integer type.");

    // Don't go out of bounds of the size of the number.
    static_assert(bitIndex < std::numeric_limits<T>::digits + std::numeric_limits<T>::is_signed, "bitIndex is out of bounds for type T");
    static_assert(bitIndex >= 0, "bitIndex is out of bounds for type T");

    // Rip the bit out of the number.
    return ((0x1 << bitIndex) & num) != 0;
}

template <std::size_t bitIndex, typename T>
void set_integer_bit(T& num, const bool bitValue)
{
    // Make sure what was passed in is something ilke an int or long.
    static_assert(std::numeric_limits<T>::is_integer, "Numeral argument must be an integer type.");

    // Don't go out of bounds of the size of the number.
    static_assert(bitIndex < std::numeric_limits<T>::digits + std::numeric_limits<T>::is_signed, "bitIndex is out of bounds for type T");
    static_assert(bitIndex >= 0, "bitIndex is out of bounds for type T");

    // Set the bit into the number.
    if (bitValue)
        num |= (0x1 << bitIndex); // Set bit to 1.
    else
        num &= ~(0x1 << bitIndex); // Set bit to 0.
} 
```

而对于使用...

```
// Test get_integer_bit.
std::cout << set_integer_bit<0>(1);  // Pulls the first (0th) bit out of the integer 1\. Result should be 1
std::cout << set_integer_bit<1>(1);  // Pulls the second bit out of the integer 1\. Result should be 0
std::cout << set_integer_bit<33>(2); // error C2338: bitIndex is out of bounds for type T

// Test set_integer_bit.
std::cout << get_integer_bit<0>(test); // Should be 0.
set_integer_bit<0>(test, 1); // Set the first (0th) bit to a 1 (true).
std::cout << get_integer_bit<0>(test); // Should be 1, we just set it. 
```

这适用于各种大小的 int，并且当位的索引超出所提供类型的范围时，它的好处是在编译时抱怨。但是，如果您正在寻找更多的东西，并且想要更动态地访问类型的位，那么您需要使用[std::bitset](http://en.cppreference.com/w/cpp/utility/bitset)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T01:59:09.020

@JohnBandela 的答案可以通过有关如何将位集来回转换为长（或字符串）的信息来完成。

[您可以像这样来回](http://www.cplusplus.com/reference/bitset/bitset/bitset/)转换类似数组的行为 位集：

```
#include<bitset>
#include<string>
#include<iostream>
using namespace std;
const int N_DIGITS = 8;

// easy initialization:

// from unsigned long
unsigned long num = 8ul; // == 1000 in binary form
bitset<N_DIGITS> bs1(num);

// from string
string s_num = "1110";
bitset<N_DIGITS> bs2(s_num);

// extraction & printing:

cout << "Binary value of bs1:"  << bs1.to_string() << endl;  // ... "1000"
// ...or just...
cout << "Binary value of bs1:"  << bs1             << endl;
cout << "Decimal value of bs2:" << bs2.to_long()   << endl;  // ... "20" 
```

位运算符：

以防万一您不需要使用[基本的二元运算符](http://www.cplusplus.com/reference/bitset/bitset/operators/)，让我给您一个有用的运算符列表。你可以做：

```
// every operator comes in "bs1 &= bs2" and "bs1 & bs2" form. 

bs1 &= bs2; bs1|=bs2; bs1^=bs2; // the last one is xor
~bs1; // negating

size_t n=5;
bs1<<=n; bs1>>=n;     // bit-shifts, n is the amount of bit locations to be shifted.

bs1==bs2;  bs1!=bs2;  // comparisons 
```

**这使得乘法模拟更容易实现。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T16:35:54.977

根据您的关注点，您还可以使用 std::string-s（和 std::stringstream-s），因为在那里与二进制形式的转换非常容易，您也可以使用[索引访问](http://www.cplusplus.com/reference/string/string/operator%5B%5D/)。

`std::string s; s[0], s[1]`， ETC。

当然缺点是你`s[i]=='0'`用来检查索引是否为'0'。

此外，**我不会担心内存消耗**，因为它并不是真正的，只是暂时的。请注意， std::string 是一个`char`-s 数组，它们是 8 位值，因此**您的乘法（如果您有 8 个二进制数字）只需要 64bytes**。这并不多，很容易放入最高级别的缓存中。

```
Series  Intel Core i5/i7
Level 1 Cache   128 KB <- this is the interesting part for you, should be larger than 6k, ok.
Level 2 Cache   512 KB
Level 3 Cache   3072 KB(i5) 4096 KB(i7) 
```

来源：[笔记本检查](http://www.notebookcheck.net/Intel-Core-i5-3320M-Notebook-Processor.74457.0.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T16:29:46.167

您可以将十进制数转换为包含 0 和 1 的数组（例如 32 位，模拟 32 位数字），然后将乘法代码写入两个这样的数组。

您将需要编写两个辅助函数，一个用于将十进制数转换为二进制（填充位数组），另一个用于将位数组转换为十进制数。

但据我了解，要求不涉及从十进制转换为二进制，反之亦然，只有二进制乘法，您可以使用整数数组简单地模拟二进制数：

```
int binary_1[8] = {0, 0, 0, 1, 0, 0, 1, 1};
int binary_2[8] = {0, 1, 0, 0, 0, 0, 1, 1}; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-29T16:24:55.380

您可以使用联合来完成此操作。

```
typedef union { 
    int x;
    struct {
        char b1: 1;
         ....
        char b32: 1;
    }y;
}bits; 
```

这种语法不如你的数组索引好，但它允许你简单地输入它自己的数据类型。

```
bits a; a.x = 100; 
```

如果你将如何使用它，那么你会得到这样的位。

```
a.y.b1 
```

在您的示例中，假设您要将二进制数`1001`放入`bits`您将执行以下操作的类型：

```
a.x = 0;//clear all the bits
a.y.b1 = 1;//set first bit
a.y.b2 = 0;//clear second bit
a.y.b3 = 0;//clear third bit
a.y.b4 = 1;//set fourth bit 
```

上面没有定义和实现特定的，因此是不可靠的。更好的方法是使用设置/清除特定位的函数/宏。

因为 OP 的原始问题需要与`a[0] = 1`上述答案类似的语法，所以提供了类似的语法，尽管该行为并未像评论中提到的那样由标准定义。

# c++ - Boost.asio：我可以从一个线程同时执行 async_read 和 async_write 吗？

> ID：13630013
> 
> 赞同：9
> 
> 时间：2012-11-29T16:16:38.957
> 
> 标签：c++, boost, asynchronous, boost-asio

我读过不建议对来自不同线程的套接字进行多项操作。但是，如果我从同一个线程 socket.async_read 和下一个 socket.async_write 调用（不等待前一个线程完成）怎么办？我可以期望在其中一项操作完成后会运行正确的回调吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T16:24:28.453

我发现是的，您可以在同一个套接字上有一个待处理`async_read`和一个待处理，而不会出现问题。`async_write`当您调用该`io_service::run()`方法时，回调将按预期完成。

在同一个套接字上发出多个 async_reads 或在同一个套接字上发出多个 async_writes 可能会导致意外行为，具体取决于所涉及的套接字类型。特别是，在同一个 TCP 套接字上使用多个 async_write 可能会导致数据以与您最初预期不同的顺序输出，并混合发送数据。在 UDP 中，它可能更合理，但我仍然建议不要这样做。

# javascript - 将字符串转换为多维数组

> ID：13630014
> 
> 赞同：12
> 
> 时间：2012-11-29T16:16:42.293
> 
> 标签：javascript, multidimensional-array

我有一个字符串

```
 var myString = "['Item', 'Count'],['iPad',2],['Android',1]"; 
```

我需要将其转换为一个数组，其中：

```
myArray[0][0] = 'Item';
myArray[0][1] = 'Count';
myArray[1][0] = 'iPad';
myArray[1][1] = 2; 
```

ETC...

字符串的长度可能不同，但始终采用上述格式。我尝试过拆分和拼接以及我能想到的任何其他“ing”，但我无法理解。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T16:20:13.090

如果字符串肯定是安全的，最简单的方法是将`[`和连接`]`到开头和结尾，然后`eval`是它。

```
var arr = eval("[" + myString + "]"); 
```

* * *

如果您想要更高的安全性，请为您的字符串使用双引号，并`JSON.parse()`以相同的方式使用。

```
var myString = '["Item", "Count"],["iPad",2],["Android",1]';

var arr = JSON.parse("[" + myString + "]"); 
```

这将限制您使用受支持的 JSON 数据类型，但鉴于您的示例字符串，它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:25:08.347

试试这个 ：

```
JSON.parse("[['Item', 'Count'],['iPad',2],['Android',1]]".replace(/\'/g,"\"")) 
```

![在此处输入图像描述](../Images/d3db344d66beb68a8b72732b631252f7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:20:54.573

写你的代码

```
var myString = "[['Item', 'Count'],['iPad',2],['Android',1]]"; 
```

并且只是

```
 var arr = eval(myString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T16:37:23.230

我尝试使用 eval，但在我的情况下它不起作用......我需要将字符串转换为对象数组。这是我的字符串（ajax 请求结果）：

```
{'printjob':{'bill_id':7998,'product_ids':[23703,23704,23705]}} 
```

当我尝试时：

```
x = "{'printjob':{'bill_id':7998,'product_ids':[23703,23704,23705]}}";
eval(x); 
```

我收到“意外令牌：”错误。

我的解决方案是：

```
x = "{'printjob':{'bill_id':7998,'product_ids':[23703,23704,23705]}}"; 
x = "temp = " + x + "; return temp;"
tempFunction = new Function (x);
finalArray = tempFunction(); 
```

现在有了对象 finalArray！

我希望能有所帮助

# python - 运行中的 Python 文件“setup.py”引发 RuntimeError(“chmod error”) RuntimeError: chmod 错误

> ID：13630018
> 
> 赞同：0
> 
> 时间：2012-11-29T16:16:55.273
> 
> 标签：python, django, jython

我正在尝试为 Windows 7 上的 Jython/Python Django 应用程序安装一些模块。当我在下载它们后尝试安装它们时（导航到目录，从命令提示符键入 jython setup.py install）我得到以下信息错误（以下是 Pycrypto-2.6 的错误：

```
 running install
running build
running build_py
running build_ext
running build_configure
'chmod' is not recognized as an internal or external command,
operable program or batch file.
Traceback (most recent call last):
  File "setup.py", line 456, in <module>
    core.setup(**kw)
  File "C:\jython2.5.3\Lib\distutils\core.py", line 151, in setup
    dist.run_commands()
  File "C:\jython2.5.3\Lib\distutils\core.py", line 151, in setup
    dist.run_commands()
  File "C:\jython2.5.3\Lib\distutils\dist.py", line 974, in run_commands
    self.run_command(cmd)
  File "C:\jython2.5.3\Lib\distutils\dist.py", line 994, in run_command
    cmd_obj.run()
  File "C:\jython2.5.3\Lib\distutils\command\install.py", line 513, in run
    self.run_command('build')
  File "C:\jython2.5.3\Lib\distutils\cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "C:\jython2.5.3\Lib\distutils\dist.py", line 994, in run_command
    cmd_obj.run()
  File "C:\jython2.5.3\Lib\distutils\command\build.py", line 112, in run
    self.run_command(cmd_name)
  File "C:\jython2.5.3\Lib\distutils\cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "C:\jython2.5.3\Lib\distutils\dist.py", line 994, in run_command
    cmd_obj.run()
  File "setup.py", line 251, in run
    self.run_command(cmd_name)
  File "C:\jython2.5.3\Lib\distutils\cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "C:\jython2.5.3\Lib\distutils\dist.py", line 994, in run_command
    cmd_obj.run()
  File "setup.py", line 273, in run
    raise RuntimeError("chmod error")
   RuntimeError: chmod error 
```

我进入 setup.py 文件并注释掉了 chmod 行。我重新运行它并在“sh configure”上出错。我只是停在那里，因为我不知道如何调用此模块中的配置命令。

显然，这与我试图在 Windows 而不是 Linux 上安装它有关。但是对于 Jython，我无法使用 easy_install 安装它。而且 pip 不适用于 Jython。所以我不知道如何自己安装这个模块。

谢谢

# php - 按序数计算每个房间的夜晚

> ID：13630022
> 
> 赞同：0
> 
> 时间：2012-11-29T16:17:05.137
> 
> 标签：php, mysql, date, count, ordinal

我想用每个房间类型的位置（可能是序数，但只是一天的位置）来计算一天。例如，我有两种类型的房间，预订时间完全相同（从`2012-11-30`到`2012-12-06`）。而且我需要每天计算每种房型。

请看下表。

![在此处输入图像描述](../Images/c68270fa53740d73b78731e40cb539e7.png)

我需要一个专栏`day`来运行一天的职位。基本上我把 mySQL 写成：

```
SELECT ????? , booking_customer.bkcus_date AS DATE, villas_db.v_name AS vname, booking_customer.bkcus_rate AS cost
FROM booking_customer
INNER JOIN villas_db ON booking_customer.bkcus_vid = villas_db.v_id
WHERE booking_customer.bkcus_sid =  '<sid>'
LIMIT 0 , 30 
```

`?????`运行这样一个数字所需的代码在哪里。如果有更好的方法来完成这项工作，你们能否建议我 - 例如 PHP。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:43:12.667

如果你真的想要一个 SQL 解决方案，你可以去：这不需要额外的语句，比如`SET @counter = 0;`

//第二次修改

```
SELECT IF((@counter := @counter + 1) < 8, @counter, @counter := 1 ) AS day,
    booking_customer.bkcus_date AS DATE, 
    villas_db.v_name AS vname, 
    booking_customer.bkcus_rate AS cost
FROM (SELECT @counter:=0) AS c, booking_customer
INNER JOIN villas_db ON booking_customer.bkcus_vid = villas_db.v_id
WHERE booking_customer.bkcus_sid =  '<sid>'
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:26:36.737

根据要求，作为一个非常丑陋的两查询 SQL hack：

```
SET @cntr = null, @prev=null;

SELECT IF((@prev <> vname) or (@prev is null)),
    @cntr := 1, @cntr := @cntr + 1) AS day,
    @prev := vname,
    etc...
FROM ...
... 
```

这仅适用于您在屏幕截图中的主要排序顺序。如果你开始改变排序顺序，你会得到一组完全不同的数字

# powershell-2.0 - QueryWorkspaces 返回空数组但工作空间存在

> ID：13630023
> 
> 赞同：1
> 
> 时间：2012-11-29T16:17:13.387
> 
> 标签：powershell-2.0

很简单，我试图通过调用 Powershell 中 VersionControlServer 类的 QueryWorkspaces 方法来获取工作区列表。我将 null 传递给参数，根据文档，它应该给我一个工作区列表。

如果我命名工作区，它可以正常工作并返回一个工作区，但文档说空名称应该给所有工作区。

```
function Get-Workspace
{
    param
    (
        [Parameter(Mandatory=$true)]
        [string]$TeamProjectCollection,
        [string]$Owner,
        [string]$Computer,
        [parameter(ValueFromPipeline=$true)]
        [string]$Name
    )

    begin
    {    
        [Microsoft.TeamFoundation.Client.TfsTeamProjectCollection]$tfsTeamProjectCollection = [Microsoft.TeamFoundation.Client.TfsTeamProjectCollectionFactory]::GetTeamProjectCollection($TeamProjectCollection)
        [Microsoft.TeamFoundation.VersionControl.Client.VersionControlServer]$versionControlServer = $tfsTeamProjectCollection.GetService([Microsoft.TeamFoundation.VersionControl.Client.VersionControlServer])
    }

    process
    {
        Write-Output $versionControlServer.QueryWorkspaces($Name, $Owner, $Computer)
    }
} 
```

我正在使用项目集合管理员权限运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:27:28.970

问题似乎是当 .net 类需要字符串时，PowerShell 不会将 null 作为 null 传递。在 PowerShell 层的某个地方，null 被转换为空字符串。这阻止了返回所有工作区的代码路径执行。相反，它试图匹配一个名为“”的工作区。

该问题的详细信息在[Microsoft Connect 文章](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=307821&SiteID=99)中，该文章报告该问题将在 PowerShell 3.0 中修复。

知道了问题所在以及如何解决问题的提示后，我开始了反射路线。然而，这变得更加复杂，因为 QueryWorkspaces 方法被重载，因此对 GetType 的简单调用引发了异常。尝试将类型数组传递给 GetType 调用失败，因为 PowerShell 将其作为 Object 数组而不是 Type 数组传递。因此，它必须长期完成......

```
function Get-Workspace
{
    param
    (
        [Parameter(Mandatory=$true)]
        [string]$TeamProjectCollection,
        [string]$Owner,
        [string]$Computer,
        [parameter(ValueFromPipeline=$true)]
        [string]$Name
    )

    begin
    {    
        [Microsoft.TeamFoundation.Client.TfsTeamProjectCollection]$tfsTeamProjectCollection = [Microsoft.TeamFoundation.Client.TfsTeamProjectCollectionFactory]::GetTeamProjectCollection($TeamProjectCollection)
        [Microsoft.TeamFoundation.VersionControl.Client.VersionControlServer]$versionControlServer = $tfsTeamProjectCollection.GetService([Microsoft.TeamFoundation.VersionControl.Client.VersionControlServer])
        [array]$methods = $versionControlServer.GetType().GetMethods()
        [System.Reflection.MethodInfo]$methodToInvoke = $null
        foreach($method in $methods)
        {
            if ($method.Name -eq "QueryWorkspaces")
            {
                if ($method.GetParameters().Length -eq 3)
                {
                    $methodToInvoke = $method
                }
            }
        }
    }

    process
    {
        if ([string]::IsNullOrEmpty($Name))
        {
            $params = @($null, $Owner, $Computer)
            Write-Output $methodToInvoke.Invoke($versionControlServer, $params)
        }
        else
        {
            Write-Output $versionControlServer.QueryWorkspaces($Name, $userName, $computerName)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T19:15:30.430

是否曾经使用`$null`过

`[System.Management.Automation.Language.NullString]::Value`

代替`$null`

（PowerShell 无法正确处理`$null`并被解释为`""`）

# soundcloud - Soundcloud API - 用户播放计数的状态是什么？

> ID：13630024
> 
> 赞同：1
> 
> 时间：2012-11-29T16:17:16.587
> 
> 标签：soundcloud

我试图利用资源的`user-playback-count`属性[`/tracks`](http://developers.soundcloud.com/docs/api/reference#tracks)（实际上是这样`users/{id}/tracks`）。它从来没有返回过任何东西`1`。经过一番搜索，我发现了这篇[2 年前的帖子](https://groups.google.com/group/soundcloudapi/msg/03c62b45e49db2e8?dmode=source)，其中解释了。但是我没有找到任何其他信息，这使我想到了这个问题：

该`user-playback-count`物业的状况和前景如何？

*Soundcloud 团队[鼓励](http://developers.soundcloud.com/support)人们通过 SO 解决这些问题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:38:03.413

此属性已被弃用。很抱歉缺少这方面的文档。

# java - Java：试图打印一个类的对象，一个实例变量是价格，需要将其格式化（不知何故没有 printf？？）

> ID：13630025
> 
> 赞同：0
> 
> 时间：2012-11-29T16:17:19.463
> 
> 标签：java, format

```
public Foo(String name, double price)  
    {  
        this.name = name; 
        this.price = price;  
    }     
    // Overrride toString() for use of System.out.print() with Foo objects  
    public String toString()  
    {  
        return "Name: " + name + "\nPrice: $" + price + "\n";  
    } 
```

System.out.println(anyFoo); 只有在小数点后有两位数字的双精度时才会以正确的格式显示价格。如果我使用 return 语句，如何像 printf 一样格式化？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:22:18.710

您可以使用`String.format`. 阅读此信息：[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:20:26.337

利用`String.format(String format, Object ... args)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:25:04.660

尝试这样的事情（记得添加`import java.text.*;`）

```
//... bla bla..
DecimalFormat myDecimalFormat = new DecimalFormat("#.##");
return "Name: " + name + "\nPrice: $" + myDecimalFormat .format(price)+ "\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:25:13.553

您可以使用 DecimalFormat ；

```
DecimalFormat df = new DecimalFormat( "#,###,###,##0.00" );
double d = 123.456789;
System.out.println(df.format(d)); 
```

# android - 如何在多个设备上保持 Android 应用程序的数据同步？

> ID：13630027
> 
> 赞同：10
> 
> 时间：2012-11-29T16:17:29.677
> 
> 标签：android, synchronization

我的 Android 应用程序与几乎所有其他应用程序一样，将其信息（用户的一些私有数据）存储在本地 sqlite 数据库中。现在我有一台平板电脑，我想知道是否有一种方便的方法可以在多个设备之间同步数据并自动保持最新状态。大多数其他应用程序似乎使用它们自己的服务器，您必须为其创建一个帐户。

[Android 开发者页面称为同步到云](https://developer.android.com/training/cloudsync/index.html)的章节列出了两种解决方案：备份 API 和云消息传递。但似乎这些都没有提供我正在寻找的东西。虽然[备份 API](https://developer.android.com/training/cloudsync/backupapi.html)仅用于设备的备份/恢复而不用于同步，但[云消息服务](https://developer.android.com/training/cloudsync/gcm.html)需要在我身边运行的应用程序服务器。

我不希望我的用户创建帐户。此外，我不想将他们的私人数据存储在我的服务器上。到目前为止，我的应用程序甚至不需要“互联网连接”权限，如果可能的话，我希望它保持这种状态。

所以我的问题是：谷歌是否提供任何云服务来保持应用数据同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:21:14.840

我相信 Google的[App Engine](https://developers.google.com/appengine/)是您正在寻找的东西，它不是免费的，但价格也不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:34:35.657

我看到你说你不想要很多权限，这个解决方案违背了这一点。如果您不想使用自己的服务器，最好的办法是使用 Drive API 将数据备份到用户的驱动器帐户。如果您在多台设备上登录了 google 帐户，那么这是您最好的选择。

您应该查看这个[StackOverflow 问题](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)，以便开始并将文件上传到云端硬盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:31:38.507

你试过使用 DropBox 吗？我用它来分享图片 beetwen android 设备。最重要的是......它是免费的；）

# verilog - Verilog 中的低延迟 FWFT FIFO

> ID：13630029
> 
> 赞同：3
> 
> 时间：2012-11-29T16:17:48.563
> 
> 标签：verilog

我有下面的代码，我尝试在verilog中实现一个低延迟的第一个单词fall-through fifo。

```
 reg [width-1:0]       mem [depth-1:0];

   always @ (posedge clk) begin
      if (wr_en) begin
         mem[wr_pointer[address_width-1:0]] <= #1 din;
      end
   end

   assign #1 dout = mem[rd_pointer[address_width-1:0]];

   always @ (posedge clk) begin
      if (reset) begin
         wr_pointer <= #1 0;
      end else if (wr_en) begin
         wr_pointer <= #1 wr_pointer + 1'b1;
      end
   end

   always @ (posedge clk) begin
      if (reset) begin
         rd_pointer <= #1 0;
      end else if (rd_en) begin
         rd_pointer <= #1 rd_pointer + 1'b1;
      end
   end 
```

我合成它并收到以下消息：

```
INFO:Xst:3218 - HDL ADVISOR - The RAM <Mram_mem> will be implemented on LUTs 
either because you have described an asynchronous read or because of currently
unsupported block RAM features. If you have described an asynchronous read, 
making it synchronous would allow you to take advantage of available block RAM
resources, for optimized device usage and improved timings. Please refer to 
your documentation for coding guidelines. 
```

有人可以向我解释这条消息吗？我不认为这需要异步读取。我只在时钟边沿修改读指针。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:53:20.757

下面的行是您的异步​​读取：

```
assign #1 dout = mem[rd_pointer[address_width-1:0]]; 
```

将其更改为类似于下面的代码以使其同步。

```
reg [width-1:0] dout;
always @ (posedge clk) begin
   if (reset) begin
      dout <= #1 0;
   end else if (rd_en) begin
      dout <= #1 mem[rd_pointer[address_width-1:0]]
   end
end 
```

您拥有的异步读取意味着内存中的所有字必须随时可用，因为内存地址可能随时更改（不仅仅是在时钟沿）。

由于异步读取需要访问所有存储器字，因此 FPGA 不能使用片上 RAM。片上 RAM 有一条读取总线，它只能访问存储器中的一个字，并且在时钟沿发生变化。所以用一堆 LUT 来构建内存。在这种情况下，您可以将内存视为由 2D 触发器阵列构建而成，现在它可以连接到所有单词。

# solr - 关于 Solr 分片的问题

> ID：13630030
> 
> 赞同：2
> 
> 时间：2012-11-29T16:17:49.707
> 
> 标签：solr, sharding

我们有一个产品（我们称之为“prod1”），我们想与另一个产品“集成”（我们称之为“prod2”），当“集成”意味着 prod1 + prod2 将是“prod3”时。我们还计划在 prod3 中添加更多“产品”。

到现在为止还挺好。

我们使用 Solr 为这两个产品中的用户提供搜索，并且两个索引都可能非常非常大，并且每秒接收很多电话。如果我们将所有内容都留在一台服务器中，吞吐量将是一团糟。

所以，我们正在考虑使用分片（我相信这是正确的术语，如果我错了，对不起），但是，我对此有一些疑问：

1.  是否可以按“每台机器一个产品索引”或类似的方式拆分索引？如果是，你建议我怎么做？

2.  如果（问题 1 == true）那么让我们假设 prod1 索引将是 machine1，prod2 索引 machine2，我可以在 machine1 和 2 中进行搜索“合并”结果与分数、偏移量等，“简单”和正确的方法？

3.  我读了一些关于复制因子的东西，但我认为我理解不正确。它的具体目的是什么？

4.  我不确定我是否在这里使用了正确的术语，所以，也许有人可以澄清一下究竟什么是核心、分片等。这种“简单”的疑问在我的团队中产生了很多误解。

到现在为止，这是个问题。也许我稍后会编辑它并添加更多。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T22:12:57.400

按顺序回答您的问题：

1.  由您决定如何分发文档。您选择要将文档索引到哪个服务器，以及是否决定为一个产品索引 pr 执行此操作。服务器，这是您的决定（根据文档源自的产品选择用于索引的服务器）。

2.  是的。shards=- 发送到 Solr 的查询字符串的参数指示应该搜索哪些服务器并将其合并到一个响应中。只要您不认为偏移量过高是一个可能的问题，这应该不是问题（高偏移量的问题是 Solr 必须从每个服务器检索最多（偏移量）文档才能能够对所有分片进行评分）。

    shards=server1:8080/solr/corename,server2:8080/solr/corename

3.  复制因子与 SolrCloud 相关，它隐藏了手动分片的一些复杂性（但也引入了一些）。使用 SolrCloud，Solr 将自行决定使用哪些节点进行存储，并且复制因子告诉 Solr 您希望在多少台服务器上存储文档。如果您的复制因子是 3，那么在文档变得无法访问之前，至少有 3 个服务器必须发生故障。如果您要进行手动分片，则必须自己设置复制并知道哪些服务器是备份服务器，就像使用常规 Solr 设置一样。

4.  Shard = 仅将所有文档的子集保存在索引中的服务器，core = 一个服务器上的一个索引 - 服务器可能包含多个核心，其中每个核心是一组单独的配置和架构（以前你只能有一个核心在每个 Solr 实例中 - Solr 有一个索引，仅此而已）。SolrCloud 首次与 Solr 4.0 一起发布，并开始获得一些关注。

[Solr Wiki](http://wiki.apache.org/solr/)是开始挖掘有关这些概念的更多信息的好地方。

# apache - Apache中基于名称的虚拟主机

> ID：13630032
> 
> 赞同：0
> 
> 时间：2012-11-29T16:17:53.923
> 
> 标签：apache, redmine

我想在 Apache 中设置基于名称的虚拟主机，但我没有 DNS 名称（本地专用网络）。因此，我想得到类似的东西：

```
http://192.168.0.1/wiki - First virtual host - wiki.
http://192.168.0.1/redmine - Second virtual host - redmine. 
```

正如我建议的那样，我可以通过使用**ServerName**选项来实现**两个虚拟主机的部分。但是在 Apache 文档中没有提到我可以使用 FQDN IP-addr。可能吗？我怎样才能达到我的愿望？PS：我只想在同一个子网上共享我的网站。因此，任何可以 ping 我的人都可以进入`http://my_ip/wiki`并获取 wiki，`http://my_ip/redmine`并获取 redmine。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:21:23.793

如果您在本地`hosts`文件中输入多个网站，则可以在 localhost 上托管多个网站：

它位于 Windows 中的`c:\Windows\System32\drivers\etc\`. 在 Linux 和 Unix 系统中，通常在`\etc\`.

格式很简单，主机名、空格和 ip 地址：

```
127.0.80.1  phpmyadmin.local
127.0.80.2  joomla.local
127.0.80.3  drupal.local 
```

如果您想通过网络访问该域，则需要访问 DNS 服务器。根据您的路由器（fritzbox 会阻止它），您也可以使用[dyndns](http://dyndns.org)，但您必须知道这仅适用于您的本地网络。

如果使用 DNS 服务器，则需要使用本地网络 ip，例如`192.168.0.1`.**

# python - 在巨大的数据框上启用完整的 pandas 摘要

> ID：13630035
> 
> 赞同：3
> 
> 时间：2012-11-29T16:18:08.083
> 
> 标签：python, pandas, options, summary, output-formatting

我有一个大数据框。通常，当我有这样的数据框时，我会获得该数据框的摘要，其中我会获得每列和列名中有多少非 NaN 值的信息。然而，对于这个，我得到了一个更简短的总结：

```
<class 'pandas.core.frame.DataFrame'>
Index: 138289 entries, 1993-07-23 to 2012-11-26
Columns: 101 entries, AAT to ZZT
dtypes: object(101) 
```

我想获得一个标准摘要，其中包含有关每列的信息。

我正在使用 ipython notebook 和 pandas 0.9.1，如果这与它有任何关系

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:29:17.780

不幸的是，DataFrame.info 被黑客入侵，无法显示完整的摘要，除非列数少于 100（查看源代码）。我们将它修复为 0.10：

[https://github.com/pydata/pandas/issues/2524](https://github.com/pydata/pandas/issues/2524)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:49:00.763

尝试使用以下方法设置 DataFrame 中显示的最大行数[`set_printoptions`](http://pandas.pydata.org/pandas-docs/stable/basics.html?highlight=set_printoptions#console-output-formatting)：

```
pd.set_printoptions(max_columns=101) 
```

*这应该允许您查看（汇总）DataFrame 中的所有列。*

> `max_rows`和`max_columns`控制默认显示 DataFrame 对象的行数和列数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T20:03:55.380

当数据框很大时，它不会显示在 ipython notebook 中。我只是强迫它：

```
from IPython.display import HTML
HTML(df.head().to_html()) 
```

确保使用 head :)

# plsql - PLSQL将n个参数传递给过程

> ID：13630039
> 
> 赞同：0
> 
> 时间：2012-11-29T16:18:32.843
> 
> 标签：plsql

我正在做一个作业，需要一些关于如何回答这个问题的想法：

*“允许用户通过输入n个订单项（其中2≤n≤10）作为参数来添加新订单”*

我的问题是我可以使用什么来传递各种数量的参数。然后，我需要检查我存储这些内容的内容，以测试项目的数量（通过的参数）> 2 且 < 10

为了插入新订单，我还需要让用户输入商品编号和数量 - 这些参数是否需要与传递订单商品编号同时传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:48:47.540

您可以使用数组来执行此操作，请参见下文。您需要在数据库中创建类型和过程，然后运行脚本以查看它是如何工作的。p_tab_order.COUNT 命令可用于计算您有多少订单。

```
CREATE TYPE  type_order AS OBJECT(item_number     NUMBER(6)
                                 ,customer_number NUMBER(6)
                                 ,quantity        NUMBER(6));

CREATE TYPE type_tab_order IS TABLE OF type_order;

CREATE OR REPLACE PROCEDURE p_order(p_tab_order IN type_tab_order)
IS
BEGIN

    FOR i IN 1..p_tab_order.COUNT LOOP

    dbms_output.put_line(p_tab_order(i).item_number||' item number '
                       ||p_tab_order(i).customer_number||' customer_number '
                       ||p_tab_order(i).quantity||' quantity '
                          );

    END LOOP;

END;

DECLARE 

l_tab_order type_tab_order := type_tab_order();

BEGIN

l_tab_order.EXTEND;
l_tab_order(1).item_number := 4;
l_tab_order(1).customer_number := 5;
l_tab_order(1).quantity := 6;

l_tab_order.EXTEND;
l_tab_order(2).item_number := 5;
l_tab_order(2).customer_number := 6;
l_tab_order(2).quantity := 7;

p_order(p_tab_order => l_tab_order);

END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:54:30.587

可能有很多方法可以做到这一点。出于举例的目的，我假设对于每个订单，您都需要一个客户编号和一个采购订单编号。在这种情况下，您可以这样做：

```
PROCEDURE ADD_A_BUNCH_OF_ORDERS(CUST_NUM_1  IN NUMBER,
                                PO_NUM_1    IN NUMBER,
                                CUST_NUM_2  IN NUMBER,
                                PO_NUM_2    IN NUMBER,
                                CUST_NUM_3  IN NUMBER DEFAULT NULL,
                                PO_NUM_3    IN NUMBER DEFAULT NULL,
                                CUST_NUM_4  IN NUMBER DEFAULT NULL,
                                PO_NUM_4    IN NUMBER DEFAULT NULL,
                                CUST_NUM_5  IN NUMBER DEFAULT NULL,
                                PO_NUM_5    IN NUMBER DEFAULT NULL,
                                CUST_NUM_6  IN NUMBER DEFAULT NULL,
                                PO_NUM_6    IN NUMBER DEFAULT NULL,
                                CUST_NUM_7  IN NUMBER DEFAULT NULL,
                                PO_NUM_7    IN NUMBER DEFAULT NULL,
                                CUST_NUM_8  IN NUMBER DEFAULT NULL,
                                PO_NUM_8    IN NUMBER DEFAULT NULL,
                                CUST_NUM_9  IN NUMBER DEFAULT NULL,
                                PO_NUM_9    IN NUMBER DEFAULT NULL,
                                CUST_NUM_10 IN NUMBER DEFAULT NULL,
                                PO_NUM_10   IN NUMBER DEFAULT NULL)
IS
BEGIN
  ADD_ORDER(CUST_NUM_1, PO_NUM_1);
  ADD_ORDER(CUST_NUM_2, PO_NUM_2);

  IF CUST_NUM_3 IS NOT NULL AND
     PO_NUM_3 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_3, PO_NUM_3);
  END IF;

  IF CUST_NUM_4 IS NOT NULL AND
     PO_NUM_4 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_4, PO_NUM_4);
  END IF;

  IF CUST_NUM_5 IS NOT NULL AND
     PO_NUM_5 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_5, PO_NUM_5);
  END IF;

  IF CUST_NUM_6 IS NOT NULL AND
     PO_NUM_6 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_6, PO_NUM_6);
  END IF;

  IF CUST_NUM_7 IS NOT NULL AND
     PO_NUM_7 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_7, PO_NUM_7);
  END IF;

  IF CUST_NUM_8 IS NOT NULL AND
     PO_NUM_8 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_8, PO_NUM_8);
  END IF;

  IF CUST_NUM_9 IS NOT NULL AND
     PO_NUM_9 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_9, PO_NUM_9);
  END IF;

  IF CUST_NUM_10 IS NOT NULL AND
     PO_NUM_10 IS NOT NULL
  THEN
    ADD_ORDER(CUST_NUM_10, PO_NUM_10);
  END IF;
END ADD_A_BUNCH_OF_ORDERS; 
```

然后，您只需要实现 ADD_ORDER 过程来添加给定的特定顺序。

也许不是最优雅的方式，而是**一种**方式。:-)

分享和享受。

# perl - Perl 文件::发现烦人的问题

> ID：13630040
> 
> 赞同：-2
> 
> 时间：2012-11-29T16:18:32.533
> 
> 标签：perl

我有一个让我发疯的 perl 脚本问题。我编写了一个使用 File::Find 模块的脚本，该模块应该从给定的参数目录开始递归地遍历，并对找到的每个 *.txt 文件执行一个函数。我简化了这个问题，只显示主要部分。

为了让它运行并重现我的问题，我们必须创建一个包含两个文件的目录： `fist.txt`每个文件`second.txt`只有两行：

`cat fist.txt`：
`AAA`
`BBB`

`cat second.txt`：
`AAA`
`BBB`

```
#!/usr/bin/perl
use File::Find;

$ARGS_NUM = $#ARGV + 1;
if ($ARGS_NUM != 1) {
   print "Add start directory as an argument!\n";
   exit(-1);
}

my $DEST_DIR =$ARGV[0];    
find(\&splitter, $DEST_DIR);

sub splitter {
 if (-f $_ && /\.txt$/) {
    $DOC_FILE_NAME = $_;
    print "processing: $DOC_FILE_NAME\n";
    open $DOC_FILE, "<"."$DOC_FILE_NAME" or die "Could not open $DOC_FiLE\n";

    print "Entering first WHILE, DOC_FILE = $DOC_FILE\n";
    $AAA_FOUND = 0;
    $BBB_FOUND = 0;
    while(<$DOC_FILE>) {
      print "first_while\n";
      if (m/^AAA$/i) {
        print "FOUND: AAA in $DOC_FILE\n";
        $AAA_FOUND = 1;
        next;
      }

      if (m/^BBB$/i) {
        print "FOUND: BBB in $DOC_FILE\n";
        $BBB_FOUND = 1;
        next;
      }
    }
    #################### SECOND WHILE WCHICH FAILS.... #################
    $/="";
    seek $DOC_FILE,0,0;
    $QQQ_FOUND = 0;
    print "Entering second WHILE, DOC_FILE = $DOC_FILE\n";
    while(<$DOC_FILE>) {
      print "second_while\n";
      s/\n//g; s/$/\n/; s/^\s*//;
      if ($QQQ_FOUND == 1) {
        $question_text = $_;
        print "question_text = $question_text\n";
        last;
      }

      if (m/^QQQ.*$/i) {
        $QQQ_FOUND=1;
      }
    }
    $/ = undef;
    print "AAA = $AAA_FOUND\n";
    print "BBB = $BBB_FOUND\n";
    print "QQQ = $QQQ_FOUND\n";
    close $DOC_FILE;
  }
} 
```

这是输出：

```
processing: first.txt
Entering first WHILE, DOC_FILE = GLOB(0x13087e0)
first_while
FOUND: AAA in GLOB(0x13087e0)
first_while
FOUND: BBB in GLOB(0x13087e0)
Entering second WHILE, DOC_FILE = GLOB(0x13087e0)
second_while
AAA = 1
BBB = 1
QQQ = 0
processing: second.txt
Entering first WHILE, DOC_FILE = GLOB(0x13087e0)
first_while
Entering second WHILE, DOC_FILE = GLOB(0x13087e0)
second_while
AAA = 0
BBB = 0
QQQ = 0 
```

编辑：如您所见，第二个循环错过了搜索值 AAA 和 BBB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:28:25.553

当然可以，因为您设置`$/`为`undef`启用 slurp 模式（意思是“在一次调用中读取整个文件`<>`）。默认为`$/`not `undef`but `"\n"`。

您应该简单地使用`local $/;`而不是尝试手动重置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:32:24.707

很多人觉得`File::Find`很烦。它根本无法正常工作。它打破了良好的编程习惯。

*我发现使用它的最佳方法是在您想要*的子例程之外设置一个列表变量，然后使用它来保存符合您的条件的文件。然后，您可以返回常规程序进行实际工作：

```
my @file_list;
find ( &wanted, $DEST_DIR);

sub wanted {
    next unless -f and  /\.txt$/;
    push @file_list, $File::Find::name;
}

# Now use @file_list to do what you need:
for my $file (@file_list) {
   yadda, yadda, yadda
} 
```

由于*想要*的功能要短得多，您可以在函数中组合*想要*的`find`功能：

```
find (
    sub {
          next unless -f and /\.txt$/;
          push @file_list, $File::Find::name;
       }, 
    $DEST_DIR
); 
```

# c++ - C++ - cout 将两个整数的商打印为零

> ID：13630042
> 
> 赞同：0
> 
> 时间：2012-11-29T16:18:37.277
> 
> 标签：c++, numbers, integer, cout

我用 读入一个文件`ifstream`，我想写出`cout`已经读过多少文件，以百分比为单位。

```
long length = 0, now = 0;
int i = 0;
double d = 0;

file.seekg( 0, std::ios::end );
length = file.teelg();
file.seekg( 0, std::ios::beg );

while ( std::getline( file, buffer ) ) {
    now = file.teelg;

    i = now / length * 100;
    d = now / length * 100;

    std::cout << length << " "      // working
              << now << " "     // working
              << ( now / length * 100 ) << " "  // not working = 0
              << i << " "           // not working = 0
              << d;         // not working = 0
} 
```

只有`now = length`向我表明它是`100%`，但每隔一次它就会失败并给我回来`0`。我可以想象，答案很简单`1*1`，但现在我找不到解决方案。我也尝试过铸造，也许是因为这就是问题所在，但当然没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:20:33.253

除非其中一个操作数是 a`float`或`double`，否则`/`会进行整数除法并丢弃余数。

像这样写：

```
( (double)now / length * 100 ) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T16:20:33.777

如果`length > now`then`now / length`在整数除法中为零。先施法加倍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T16:21:03.917

将计算转换为浮点数

```
i = (float)now / length * 100;
d = (float)now / length * 100; 
```

本质上，如果您除整数，则向下舍入到最接近的数字。因此你只能有 0 或 1。然后它乘以 100。

或者，您可以这样做：

```
i = 100 * now / length;
d = 100 * now / length; 
```

这个数字乘以 100 后会向下取整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T16:21:54.730

试试`(now * 100) / length`。这是因为结果`now / length`被转换为int，所以它可能只是`0`或`1`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T16:22:53.797

或者，为了避免浮动除法，您也可以先乘，然后除：

```
(now * 100) / length 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T16:47:00.200

你的表情

```
( now / length * 100 ) 
```

从左到右进行评估，因此如下所示：

```
int tmp    = now / length
int result = tmp * 100 
```

因为 ...

> ### *5.6 乘法运算符 [expr.mul]*
> 
> [...] 对于整数操作数， / 运算符产生代数商，其中任何小数部分被丢弃 [...]

... 对于 any `now < length`，结果将为零。

添加浮点转换可以帮助：

> ## *5 个表达式 [expr]*：
> 
> *10*：许多期望算术或枚举类型的操作数的二元运算符会导致转换并以类似的方式产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：
> 
> *   ...
> *   如果任一操作数是 long double 类型，则另一个应转换为 long double。
> *   否则，如果任一操作数为双精度，则另一个应转换为双精度。
> *   否则，如果任一操作数为浮点数，则另一个应转换为浮点数。
> *   ...

所以总而言之，对于任何两个原始操作数（或任何非重载`operator/`），如果一个操作数是浮点类型，则另一个操作数也将转换为浮点类型：

```
float(now) / length * 100 
```

...将所有操作数转换为浮点数：

```
float tmp    = float(now) / length
float result = tmp * 100.0f 
```

但是您也可以重新排列您的计算以不使用任何浮点数学：

```
i = 100*now / length;
d = 100*now / length 
```

然后根据需要给出一个整数。

如果您想知道为什么这在数学上有效：

```
 100*now              now
 ----------  = 100 * --------
   length             length 
```

左边是你现在拥有的，右边是你曾经拥有的。两者是等价的，但是当涉及到有限数据类型时，执行顺序变得高度相关。

# python - OpenCV Python中的phaseCorrelate函数

> ID：13630043
> 
> 赞同：5
> 
> 时间：2012-11-29T16:18:43.683
> 
> 标签：python, opencv, computer-vision

phaseCorrelate 似乎是 OpenCV Python 包装器的未记录函数。C++ 函数的文档在[这里](http://docs.opencv.org/modules/imgproc/doc/motion_analysis_and_object_tracking.html?highlight=phasecorrelate#Point2d%20phaseCorrelate%28InputArray%20src1,%20InputArray%20src2,%20InputArray%20window%29)。

当我从 Python 调用该函数时，出现以下错误：

```
cv2.error: ..\..\..\src\opencv\modules\imgproc\src\phasecorr.cpp:495: error: (-215)    src1.type() == CV_32FC1 || src1.type() == CV_64FC1 
```

每个 OpenCV 2 函数都使用 numpy 数组，我怀疑这个函数是从旧包装器中遗留下来的。也许我需要在调用函数之前将 numpy 数组转换为 CvMats？我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:43:23.500

您不需要将其转换为 cvMat。

该错误表明您的输入应该是单通道`float32`或`float64`单通道。

所以相应地转换图像。

并且两个图像应该具有相同的大小。然后应用phaseCorrelate函数，如下：

```
>>> src1 = cv2.imread('sudoku.jpg',0)   # load first image in grayscale
>>> src2 = cv2.imread('su1.png',0)      # load second image in grayscale
>>> src1 = np.float32(src1)             # convert first into float32
>>> src2 = np.float32(src2)             # convert second into float32  
>>> ret = cv2.phaseCorrelate(src1,src2) # now calculate the phase correlation
>>> ret
(-0.024777238426224812, 0.0011736626157130559) 
```

（我的两个图像都是相同的，除了亮度变化。）

关于文档，您可以在`code.opencv.org`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:17:53.857

根据[文档](http://opencv.willowgarage.com/documentation/python/cookbook.html#numpy-and-opencv)，您可以将`numpy`数组转换为 a`CvMat`如下：

```
>>> import cv, numpy
>>> a = numpy.ones((480, 640))
>>> mat = cv.fromarray(a)
>>> print mat.rows
480
>>> print mat.cols
640 
```

# .net - 从图像中删除下划线

> ID：13630044
> 
> 赞同：0
> 
> 时间：2012-11-29T16:18:44.277
> 
> 标签：.net, html, css, visual-studio-2010, hyperlink

图像周围的紫色线：

我有以下html代码：

```
<a id="a1" href="test.aspx" target="_blank">
        <img id="Img2" src="Images/Icon.gif" runat="server" style="width: 70px;  text-align: center;" />
</a> 
```

我在这里得到的图像周围有一个紫色边框。就像访问过的超链接的颜色一样。

我尝试添加样式：文本装饰：无。尝试过 - 白色边框并尝试将样式设置为无：链接，已访问

但紫色边框仍然存在。有什么帮助吗？我不希望我的图像周围有任何边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:22:36.960

当我使用 IE (6, 7, 8) 解决它添加到我的样式表时会发生这种情况：

```
img {
     border: none;
} 
```

我希望会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:22:47.773

它可能不是图像的边框，而是链接的边框。

您可以执行以下操作：

```
<a id="a1" style="border:0;" href="test.aspx" target="_blank">
    <img id="Img2" src="Images/Icon.gif" runat="server" style="width: 70px;  text-align: center;border:0;" />
</a> 
```

# sql - 有条件的 Where 与 Join

> ID：13630055
> 
> 赞同：2
> 
> 时间：2012-11-29T16:19:14.327
> 
> 标签：sql, vb.net, linq

我需要使用 LINQ 返回与提供的标识字段匹配的客户端列表，这些字段位于单独的表中。如果 SQL 语句位于存储过程中，则该 SQL 语句将如下所示：

```
Select client.*
From ADLT_Clients as client
    Inner Join ADLT_ClientIdentifiers as identifier
        on client.ClientPIN = identifier.ClientPIN
Where identifier.EmailAdrs = @EmailAddress
    and identifier.FBINum = @FBINumber
    (...) 
```

我正在尝试使用以下方法在 LINQ 中执行此操作：

```
 Public Function FindByIndentifiers(adultClient As AdultClient) As List(Of AdultClient)
        Dim adultClients As New List(Of AdultClient)
        Dim clients = From client As ADLT_Client In _cmisiiEntities.ADLT_Clients
                      Join identifier In _cmisiiEntities.ADLT_ClientIdentifiers On client.ClientPIN Equals identifier.ClientPIN
                      Select client

        If adultClient.AdultClientIdentifiers IsNot Nothing Then
            With adultClient.AdultClientIdentifiers
                If Not String.IsNullOrEmpty(.EmailAddress) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.EMailAdrs.Contains(.EmailAddress))
                If Not String.IsNullOrEmpty(.FBINumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.FBINum.Contains(.FBINumber))
                If Not String.IsNullOrEmpty(.ICOTSNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.ICOTSNum.Contains(.ICOTSNumber))
                If Not String.IsNullOrEmpty(.InmateNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.InmateNum.Contains(.InmateNumber))
                If Not String.IsNullOrEmpty(.LicenseNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.LicenseNum.Contains(.LicenseNumber))
                If Not String.IsNullOrEmpty(.LicenseNumberState) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.LicenseNumState.Contains(.LicenseNumberState))
                If Not String.IsNullOrEmpty(.PassportNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.PassportNum.Contains(.PassportNumber))
                If Not String.IsNullOrEmpty(.AlienRegistrationNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.GreenCardNum.Contains(.AlienRegistrationNumber))
                If Not String.IsNullOrEmpty(.SocialSecurityNumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.SSN.Contains(.SocialSecurityNumber))
                If Not String.IsNullOrEmpty(.SPBINumber) Then clients = clients.Where(Function(f) f.ADLT_ClientIdentifiers.SPBINum.Contains(.SPBINumber))
            End With
        End If

        For Each client In clients.Take(100).ToList()
            adultClients.Add(BuildAdultClient(client))
        Next

        Return adultClients
    End Function 
```

当此代码在没有有效参数的情况下执行时，不会添加任何 where 子句，并且 clients.Take(100).ToList() 语句可以正常执行。如果我包含任何有效参数，从而添加 where 子句，则该语句会在 ToList() 调用上给出 NullReferenceException。

我的理论是我要添加的 where 子句存在别名问题。当 where 子句是初始语句的一部分时，我使用由 join 语句创建的标识符别名。如果我将我的陈述修改为：

```
 Dim clients = (From client As ADLT_Client In _cmisiiEntities.ADLT_Clients
                      Join identifier In _cmisiiEntities.ADLT_ClientIdentifiers On client.ClientPIN Equals identifier.ClientPIN) _
                      .Where(Function(f) f.identifier.EMailAdrs.Contains(adultClient.EmailAddress)) _
                      .Select(Function(f) f.client) 
```

代码也将执行。这里的区别是我正在通过定义的标识符别名。我不能在条件 where 语句中执行相同的 f.identifier.EmailAdrs 因为标识符不是该上下文的一部分？

我在这里遗漏了什么，有没有更好的方法来正确地做到这一点，或者这是 VB 的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:50:43.663

如果我在 linqPad 中使用 linq2Sql 执行此操作

```
Dim c as new Config with {.Category="Other"}
Dim q =from c1 in  Configs select c1

if(c isnot nothing) then
    if not string.isnullorempty(c.Category) then q=q.Where(Function(f) f.Category.Contains(c.Category))
end if
q.Dump() 
```

它有效，但是如果我这样做

```
Dim c as new Config with {.Category="Other"}
Dim q =from c1 in  Configs select c1

if(c isnot nothing) then
    with c
        if not string.isnullorempty(.Category) then q=q.Where(Function(f) f.Category.Contains(.Category))
    end with
end if
q.Dump() 
```

它抛出一个空引用异常。我认为这是您的 with 子句与表达式冲突

# svn - 将 SVN 控制的项目上移一个文件夹

> ID：13630062
> 
> 赞同：1
> 
> 时间：2012-11-29T16:19:34.553
> 
> 标签：svn, tortoisesvn, repository

我有一个使用 SVN 进行版本控制的 Visual Studio 项目。本地工作副本位于`C:\ProjectName\SolutionName`，存储库位于`//servername/svn/ProjectName`（其中包含**SolutionName**文件夹）。

问题是在工作文件夹中，只有**SolutionName**文件夹被签出。`C:\ProjectName\Database`我现在有兄弟文件夹，例如`C:\ProjectName\Documentation`我需要添加到 SVN。我可以将这些文件夹直接添加到存储库中并单独检出它们，但我想做的是将“检出”部分上移一级，以便其中的所有内容都`C:\ProjectName`在版本控制之下。这将使提交更容易（全部来自一个文件夹，而不是每个文件夹都需要多次提交）。它还将使将来更容易将新文件夹添加到源代码管理中。

是否有捷径可寻？我想出的一种方法是取消我的工作副本的版本，然后删除并重新创建存储库，并按照我想要的方式设置它。该项目足够新，因此丢失 20 次左右的提交历史不会是一个大问题，但我希望有一种更直接的方法来做到这一点。

* * *

*如果有帮助：*我的大部分交易都使用 TortoiseSVN，但我也安装了命令行工具。我还可以直接访问托管我的存储库的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:06:01.657

首先，将新的本地文件夹导入 svn：

*   C:\ProjectName\Database -> //服务器名/svn/ProjectName/Database
*   C:\ProjectName\Documentation -> //服务器名/svn/ProjectName/Documentation

*现在，您在服务器上的*布局看起来像您想要的那样。

接下来，只需检查 //servername/svn/ProjectName 的*新*工作副本（可能在 C:\src\ProjectName 中）。这将为您提供工作副本中所需的结构（三个文件夹：数据库、文档和解决方案名称）。然后，只需放弃您的“旧”工作副本（位于 C:\ProjectName）。如果您愿意，您可以删除 C:\ProjectName 文件夹，并将 C:\src\ProjectName 复制到 C:\ProjectName 如果维护当前文件夹很重要（您可以像这样在本地“移动”整个工作副本） ）。

源代码控制的美妙之处在于它很容易移动您的“本地副本”，因为*真正的*代码在服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:04:11.080

如果我正确理解您的问题，如果您要查看存储库，您会`SolutionName`在目录中看到该文件夹​​。（意味着文件夹，而不仅仅是内容，受版本控制。）

如果这是正确的，试试这个：

1.  将项目签出到一个新文件夹中（比如`C:\ProjectName_Temp`）。
2.  将您的文件夹从 复制`C:\ProjectName`到`C:\ProjectName_Temp`.
3.  从 中删除`.svn`文件夹`C:\ProjectName_Temp\SolutionName`。（不要删除`C:\ProjectName_Temp\.svn`）。
4.  将您的原始文件夹重命名为，例如，`C:\ProjectName_bak`作为备份（以防我错了，所以您不会丢失任何东西）并将`_Temp`文件夹重命名为`C:\ProjectName\`.

从那里，检查`svn status`（或 Tortoise 的等效命令）并确保所有更改都是预期的。

我希望这有帮助！

# c# - Task.Factory.StartNew 和主 UI

> ID：13630063
> 
> 赞同：2
> 
> 时间：2012-11-29T16:19:36.527
> 
> 标签：c#, winforms, asynchronous

我正在学习 Task 的工作原理。我一直使用 BackgroundWorker 类或 Threading.Thread 类，所以我想尝尝 Task Factory。

在我正在构建的以下示例中，我恢复了一个

```
 Task<List<People>> 
```

并为其分配一个“ContinueWith”，我希望在任务完成后调用它。

我已经完成了一些之前的例子，这些例子非常棒，但这一个冻结了我的

启动应用程序时的主窗体 UI。（我看不出与我做过的其他例子有什么不同）。

你们知道为什么我的主界面冻结了吗？

PS：我知道我声明

```
System.Threading.Tasks.TaskScheduler scheUI 
```

在任务声明上。我现在不使用，但稍后会使用。

提前致谢：

这是代码：

```
 private void PopulateList(List<People> list)
            {
                if (listBox1.InvokeRequired)
                { 
                 listBox1.Invoke((MethodInvoker) delegate {

                     foreach (People item in list)
                    {
                        listBox1.Items.Add(item.name + " " + listBox1.Items.Add(item.surname));   
                    }

                 });
            }
        }

private Task<List<People>> GetPeopleListAsync(int PeopleNuber, int delaysecs)
        { 
         TaskScheduler scheUI = TaskScheduler.FromCurrentSynchronizationContext();
            return Task<List<People>>.Factory.StartNew( () =>
                {
                    List<People> listado = new List<People>();

                    for (int i = 0; i < PeopleNuber; i++)
                    {
                        People people = new People
                        {
                            name = "Name" + i.ToString(),
                            surname = "Surname " + i.ToString()
                        };

                        Thread.Sleep(delaysecs * 200);
                        listado.Add(people);
                    }

                    return listado;

                },CancellationToken.None,
                 TaskCreationOptions.None,scheUI);

        }

 void Form1_Load(object sender, EventArgs e)
 {

            Task<List<People>> task = GetPeopleListAsync(5, 10);
            task.ContinueWith(p => PopulateList(task.Result));
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:23:02.020

您正在使用以下方式将第一个任务与 UI 线程同步：

```
System.Threading.Tasks.TaskScheduler scheUI = System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext(); 
```

从第一个任务中删除 scheUI 调度程序：

```
return System.Threading.Tasks.Task<List<People>>.Factory.StartNew( () =>
            {
                List<People> listado = new List<People>();

                for (int i = 0; i < PeopleNuber; i++)
                {
                    People people = new People
                    {
                        name = "Name" + i.ToString(),
                        surname = "Surname " + i.ToString()
                    };

                    System.Threading.Thread.Sleep(delaysecs * 200);
                    listado.Add(people);
                }

                return listado;

            }); 
```

您应该将同步添加到执行的第二个任务以更新您的 UI：

```
System.Threading.Tasks.TaskScheduler scheUI = System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext();
task.ContinueWith(p => PopulateList(task.Result),CancellationToken.None,
                              TaskContinuationOptions.ExecuteSynchronously |
                              TaskContinuationOptions.OnlyOnRanToCompletion,
                              scheUI); 
```

# asp.net - 访问不同的文化资源文件

> ID：13630064
> 
> 赞同：3
> 
> 时间：2012-11-29T16:19:36.790
> 
> 标签：asp.net, asp.net-mvc-3, satellite-assembly

我有这种格式的各种语言资源文件：`MyApplication\Resources\MyForm\Index.resx`

我可以访问当前培养的资源文件。但是，如果我想找到一个不同的文化资源文件（比如，`Index.de.resx`），我正在努力寻找一种方法来获得它。

```
ci = new System.Globalization.CultureInfo("de");
rm = new ResourceManager("MyApplication.Resources.MyForm", Assembly.GetExecutingAssembly());
lg = rm.GetString("Lang", ci); 
```

我得到的错误说：

> 找不到适合指定区域性或中性区域性的任何资源。确保“MyApplication.Resources.MyForm”在编译时被正确嵌入或链接到程序集“BallotApplication”中，或者所有所需的附属程序集都是可加载的并且是完全签名的。

我的资源文件是公开的，构建操作是“嵌入式资源”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:14:47.873

您的资源文件已正确命名，但是，您没有设置完整且正确的`CultureInfo`.

必须是全名IE`de-DE`

完整的代码分为语言 ( `de`) 部分和国家 ( `DE`) 部分，用`-`连字符分隔。

```
ci = new System.Globalization.CultureInfo("de"); 
```

应该

```
ci = new System.Globalization.CultureInfo("de-DE"); 
```

其他例子是：

1.  `en-US`= 英语美国
2.  `en-CA`= 加拿大英语
3.  `en-GB`= 英语大不列颠
4.  `fr-CA`= 法属加拿大
5.  `fr-FR`= 法国 法国

有关[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)的更多信息。

# regex - 我可以使用正则表达式过滤我的 Coverity 文件名结果吗？

> ID：13630065
> 
> 赞同：1
> 
> 时间：2012-11-29T16:19:44.710
> 
> 标签：regex, coverity-prevent, coverity

我正在使用 Coverity，我想在我的视图中以正则表达式样式过滤我的文件名结果。

除了：

```
? - Any single character
* - Any group of characters 
```

这有点限制，是否支持正则表达式样式过滤？（我找不到任何有用的东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:26:52.133

使用组件。使用文件名正则表达式定义一个组件，然后按该组件过滤以仅查看匹配的文件名。

# ios - 从 NSMutableDictionary 按顺序创建 UITableCell 单元格

> ID：13630068
> 
> 赞同：2
> 
> 时间：2012-11-29T16:19:49.177
> 
> 标签：ios, cocoa-touch, uitableview, nsmutabledictionary

我有一个从 JSON 查询创建的 NSMutableDictionary，在浏览器中运行 json 查询会根据我的需要按字母顺序排列输出，并使用 NSLOG 以正确的顺序显示它来验证这一点。但是，当我填充 UITableView 单元格时，顺序完全不同，但我希望保留原始顺序。

我知道字典不是为了排序而设计的，我可以映射到一个新的排序数组，但是如果我这样做（如果这是实现这一目标的正确方法？）目前还不清楚如何为详细视图处理正确的键和索引. 有什么想法吗？谢谢。

创建 JSON 数据和创建表格单元格的代码如下：

```
- (void) makeData {
    //Define dictionary
    fullDictionary = [[NSMutableDictionary alloc] init];

    //parse JSON data from a URL into an NSArray
    NSString *urlString = [NSString stringWithFormat:@"http://<JSON feed goes here>"];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSError *error;
    fullDictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // cell data - extracting the appropriate values by object rows
    cell.textLabel.text = [[[fullDictionary allValues] valueForKeyPath:@"strTerm"] objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:34:52.250

从您的代码来看，您似乎知道如何从字典中获取适当的数组，因为您显然是在使用数组来设置`cell.textLabel`. 因此，对该代码进行逆向工程，看起来未排序的数组由以下因素决定：

```
NSArray *originalArray = [[fullDictionary allValues] valueForKeyPath:@"strTerm"]; 
```

现在您只需要对该数组进行排序。如果它是一个简单的字符串数组，你可以做一些简单的事情：

```
NSArray *sortedArray = [originalArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

如果您正在处理更复杂的字典条目数组或类似的东西，排序方法的排列可以让您很好地控制。请参阅此处了解更复杂的排序方法，作为对 JSON 结果进行排序的一种方式：[Filtering UITableView from XML source](https://stackoverflow.com/questions/13594216/filtering-uitableview-from-xml-source/13594742#13594742)。这是一个与您不同的问题，但也许它让您了解您可以使用`sortedArrayUsingComparator`.

# asp.net-mvc-3 - 在 asp.net mvc3 中添加新菜单

> ID：13630079
> 
> 赞同：0
> 
> 时间：2012-11-29T16:20:23.453
> 
> 标签：asp.net-mvc-3

对不起，因为我的英语不好！但是我有这样的问题
1\. 我创建了一个使用 MVC3 来管理菜单 Multil Level 和 Table Menu 的示例
- MenuWeb(MenuId,Name,Url,ParentId)
2\. 控制器中的函数 CreateMenu：

```
[HttpGet]
        public ActionResult CreateMenu()
        {
            ViewBag.MenuId = new SelectList(db.MenuWebs.ToList(), "MenuId", "Name");
            return View();
        }
        [HttpPost]
        public ActionResult CreateMenu(MenuWeb menu)
        {
            if (ModelState.IsValid)
            {
                db.MenuWebs.InsertOnSubmit(menu);
                db.SubmitChanges();
                return RedirectToAction("../admin/getallmenu");
            }
            return View();
        } 
```

3\. 在 CreateMenu.cshtml 中形成 CreateMenu，如下所示：

```
@model MyBlog.Models.MenuWeb
@{
    ViewBag.Title = "CreateMenu";
}

    @using (Html.BeginForm())
    {
        <fieldset>
            <legend>Create menu</legend>

            <div class="div-lable">
                Menu Parent:
            </div>
            <div class="div-editor">
                @Html.DropDownList("MenuId")
            </div>
            <div class="div-lable">
                Name:
            </div>
            <div class="div-editor">
                @Html.EditorFor(model => model.Name)
            </div>
            <div class="div-lable">
                Url Redirect:
            </div>
            <div class="div-editor">
                @Html.EditorFor(model => model.UrlRedirect)
            </div>
            <div class="div-lable">
                Order:
            </div>
            <div class="div-editor">
                @Html.EditorFor(model => model.Ordes)
            </div>
            <div class="div-editor">
                <input type="submit" value="Create Menu" />
            </div>
            <div class="div-editor">
                @Html.ActionLink("Back to list", "getallmenu")
            </div>
        </fieldset>
    } 
```

在这个例子中。我不知道将 MenuId 从 Dropdowlist 设置为 ParentId？我尝试提交，但 ParentId 始终为空。请帮我！非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:36:24.813

好的改变你的代码是这样的：

**控制器**

* * *

替换这个

```
ViewBag.MenuId = new SelectList(db.MenuWebs.ToList(), "MenuId", "Name"); 
```

和

```
ViewBag.MenuIds = new SelectList(db.MenuWebs.ToList(), "MenuId", "Name"); 
```

**看法**

* * *

替换这个

```
@Html.DropDownList("MenuId") 
```

和

```
@Html.DropDownListFor(model => model.ParentId, (SelectList)ViewBag.MenuIds) 
```

这将解决您的问题。

# javascript - 按顺序加载 JavaScript 脚本

> ID：13630085
> 
> 赞同：3
> 
> 时间：2012-11-29T16:20:32.140
> 
> 标签：javascript, jquery, ajax

我正在以异步方式使用 JavaScript $ajax 加载一些脚本。我需要它们按特定顺序加载，但目前它是随机的。

我的代码是：

```
loadScripts();

function loadScripts() {
    getBootStrapperScript(function (callback) {            
      alert('bootStrapper loaded');
    })

    getXMLScript(function (callback) {       
        alert('xml script loaded');
    });

    getFormScript(function (callback) {       
        alert('form script loaded');
    });       
}

function getBootStrapperScript(callback) {
    $.ajax({
        url: "http://localhost/eSales/scripts/bootStrapper.js",
        dataType: "script"
    }).done(callback); 
}

function getXMLScript(callback) {
    $.ajax({
        url: "http://localhost/eSales/scripts/LoadXML.js",
        dataType: "script"
    }).done(callback);
}

function getFormScript(callback) {
    $.ajax({
        url: "http://localhost/eSales/scripts/LoadForm.js",
        dataType: "script"  
    }).done(callback);
} 
```

你可以看到它在这个[jsFiddle中运行](http://jsfiddle.net/DFWrw/)

是否有一种很好且优雅的方式来确保脚本按照定义的顺序加载？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T16:40:22.370

```
function loadScripts(urls, callback) {
    var i = 0;
    (function loadNextScript() {
         if (i < urls.length) {
              $.getScript(urls[i][0]).done(function() {
                  alert(urls[i][1] + " loaded");  // probably remove in production
                  ++i;
                  loadNextScript();
              });
         }
         else if (callback) callback();
    })();
}

loadScripts([
    ["http://localhost/eSales/scripts/bootStrapper.js", "bootstrapper script"],
    ["http://localhost/eSales/scripts/LoadXML.js", "xml script"],
    ["http://localhost/eSales/scripts/LoadForm.js", "form script"]
], function() { alert('done'); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:23:44.953

预定义您的函数，然后通过将它们作为回调传递来一个接一个地执行它们。这是有效的，因为它需要在传递到下一个之前加载每个，因此响应时间对您来说不再是问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T16:24:00.503

可以在对方的回调中调用下一个ajax函数

```
getBootStrapperScript(function (callback) {            
    alert('bootStrapper loaded');
    getFormScript(function (callback) {       
        alert('form script loaded');
    });
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T16:38:44.260

`$.getScript()`返回一个 jQuery 延迟对象，因此您可以像这样使用它

```
$.getScript("firstScript").done( function( ) {
    $.getScript("secondScript").done( function( ) {
        $.getScript("thirdScript").done( function( ) {
            alert("scripts loaded");
        });
    });
}); 
```

[**在这里**](http://jsfiddle.net/DFWrw/4/)提琴[](http://jsfiddle.net/DFWrw/4/)

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T16:25:00.047

您可以在回调中加载它们以确保特定顺序。虽然这看起来很乱

```
function loadScripts() {
  getBootStrapperScript(function (callback) {            
    alert('bootStrapper loaded');
    getXMLScript(function (callback) {       
       alert('xml script loaded');
       getFormScript(function (callback) {       
         alert('form script loaded');
       });       
    }); 
  })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T16:25:39.293

您可以做的是在每次调用完成时将其分配给一个变量，然后执行以下操作：

```
var script1, script2, script3;

var init = function() {

    if (script1 && script2 && script3)
    {
        // now inject scripts in order
    }

};

function getBootStrapperScript(callback) {
    $.ajax({
        url: "http://localhost/eSales/scripts/bootStrapper.js",
        dataType: "script"
    }).done(function(data) { 
        script1 = data; 
        init(); 
    }); 
}

// Do your other two calls in similar fashion 
```

将会发生的是 init() 只会在所有脚本变量都已分配时执行 if 语句，然后您可以选择它们插入页面的顺序。

编辑：将您的电话链接在一起就像其他答案所暗示的那样是错误的，因为这会降低可读性和性能。

EDIT2：要求只是脚本按顺序加载到内存中......而不是它们按顺序从服务器上取下来。**

# php - 从 php 字符串中删除特定标签

> ID：13630088
> 
> 赞同：2
> 
> 时间：2012-11-29T16:20:36.417
> 
> 标签：php, html-parsing

我想知道是否有任何方法可以从 php 字符串中删除特定标签？

例如，我知道使它具有的几个功能`strip_tags`，但我真正想要的是删除包含类属性或任何属性的标签，我在下面给出一个示例：

`$string = '<p>Test paragraph.<p class="inner">Here is some inner text</p></p>';`

如何仅删除包含类属性“内部”的标签？

如果有人能告诉我这样做的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:22:51.910

没有函数可以做到这一点，为了避免使用可怕的正则表达式，最好的方法是将它加载到一个`DOMDocument`类中并遍历字符串中的标签。然后，您可以根据类属性有选择地删除标签，然后将其写回字符串。

有关文档，请参阅[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:47:35.907

使用 XPath 非常简单：

```
<?php

$string = '<p>Test paragraph.<p class="inner">Here is some inner text</p></p>';

$dom = new DOMDocument;
@$dom->loadXML($string);

$xpath = new DOMXPath($dom);

$inners = $xpath->query('//p[@class="inner"]'); //Select all p.inner in the document

foreach ($inners as $element) {
    $element->parentNode->removeChild($element); //Remove 'em
}

var_dump($dom->saveHTML($dom)); 
```

# internet-explorer-8 - IE8 输入元素工具提示问题

> ID：13630090
> 
> 赞同：2
> 
> 时间：2012-11-29T16:20:40.393
> 
> 标签：internet-explorer-8, tooltip, html-input

我在 IE8 中有一个输入元素

```
<input name="aa" value="0" title="show tooltip"/> 
```

只有当我的鼠标悬停在输入框中的空白处时，才会显示工具提示。如果该框已填充文本，则不会显示工具提示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:31:30.930

根据光标的位置将鼠标悬停在文本上时，我会间歇性地遇到同样的问题。似乎当光标直接位于文本的中心时，您看不到工具提示 - 可能是 IE 放置了某种内部元素来显示文本。

但是，您可以使用标题属性在输入周围放置一个跨度，即使光标直接位于文本上方，它也会继续显示。

```
<span title="show tooltip">
  <input name="aa" value="0" />
</span> 
```

# java - 双向多对多关系中的循环引用

> ID：13630096
> 
> 赞同：9
> 
> 时间：2012-11-29T16:21:04.540
> 
> 标签：java, json, many-to-many, jackson

我的实体中存在双向多对多关系。请参见下面的示例：

```
public class Collaboration {

    @JsonManagedReference("COLLABORATION_TAG")
    private Set<Tag> tags;

}

public class Tag {

    @JsonBackReference("COLLABORATION_TAG")
    private Set<Collaboration> collaborations;

} 
```

当我尝试将其序列化为 JSON 时，出现以下异常：`

> “java.lang.IllegalArgumentException：无法处理托管/反向引用'COLLABORATION_TAG'：反向引用类型（java.util.Set）与托管类型（foo.Collaboration）不兼容。

实际上，我知道这是有道理的，因为 javadoc 明确指出您不能在 Collections 上使用 @JsonBackReference。我的问题是，我应该如何解决这个问题？我现在所做的是删除父端的@JsonManagedReference 注释，并在子端添加@JsonIgnore。有人能告诉我这种方法的副作用是什么吗？还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:50:20.887

我最终实施了以下解决方案。

关系的一端被认为是父母。它不需要任何与 Jackson 相关的注释。

```
public class Collaboration {

    private Set<Tag> tags;

} 
```

关系的另一端实现如下。

```
public class Tag {

    @JsonSerialize(using = SimpleCollaborationSerializer.class)
    private Set<Collaboration> collaborations;

} 
```

我正在使用自定义序列化程序来确保不会发生循环引用。序列化器可以这样实现：

```
public class SimpleCollaborationSerializer extends JsonSerializer<Set<Collaboration>> {

    @Override
    public void serialize(final Set<Collaboration> collaborations, final JsonGenerator generator,
        final SerializerProvider provider) throws IOException, JsonProcessingException {
        final Set<SimpleCollaboration> simpleCollaborations = Sets.newHashSet();
        for (final Collaboration collaboration : collaborations) {
            simpleCollaborations.add(new SimpleCollaboration(collaboration.getId(), collaboration.getName()));                
        }
        generator.writeObject(simpleCollaborations);
    }

    static class SimpleCollaboration {

        private Long id;

        private String name;

        // constructors, getters/setters

    }

} 
```

此序列化程序将仅显示 Collaboration 实体的有限属性集。因为省略了“tags”属性，所以不会发生循环引用。

可以在[此处](http://jackson-users.ning.com/forum/topics/how-to-handle-cyclic-references-in-a-bidirectional-many-to-many)找到有关此主题的好读物。它解释了当您遇到类似情况时的所有可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-07T00:45:44.963

jackson 2 库中提供了非常方便的接口实现

```
@Entity
@JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id")
public class Collaboration { .... 
```

在 Maven 中

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.0.2</version>
</dependency> 
```

# regex - 最小整数 25 的正则表达式

> ID：13630097
> 
> 赞同：1
> 
> 时间：2012-11-29T16:21:04.230
> 
> 标签：regex

我需要一个从 25 开始的整数的正则表达式，我试过没有限制：

```
^([2-9]\d[0-9]\d{2,})$ 
```

但我需要它从 25 而不是 20 开始，我什至不确定这是否正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:25:50.950

你的正则表达式

```
^([2-9]\d[0-9]\d{2,})$ 
```

将匹配以 5 位或更多位开头`2-9`并具有 5 位或更多位的任何数字（`\d`，`[0-9]`每个贡献一位，`\d{2,}`用于另外两位或更多位）。你想要这样的东西：

```
^0*(1\d\d|2[0-4]\d|2[5-9]|[3-9]\d)\d*$ 
```

正如你所看到的，这是相当丑陋的。如果您使用某种编程语言，您应该断言它是一个数字 ( `^\d*$`) 并检查没有正则表达式的范围。

但是我的正则表达式是如何工作的？

首先我们使用前导`0`s，因为它们不会改变数字的值。然后我们根据数字的第一个数字进行交替。如果它是 a`1`我们知道我们需要至少多两个数字才能大于`25`。如果它是 a`2`并且第二个数字介于两者之间`0`，`4`我们还需要另一个数字。如果它是`25`or 以`3`to开头`9`，两位数就足够了。在交替之后，我们只允许任意更多的数字。

[工作演示。](http://regexr.com?32vu1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:27:44.790

您还可以使用正则表达式来检查它的补码：（消除任何不符合条件的东西：即匹配任何小于 25 的东西）

*   不是任何以`-`（负面）开头的东西
*   不是这样的：
    *   `[0-2]`以和开头
    *   紧随其后的是`[0-4]`, 和
    *   后面没有另一个数字（如果后面有另一个数字，那么你有`> 200`）
*   不是任何包含非数字字符的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:23:29.913

[在这里](http://regexr.com?32vtu)测试

```
^(2[5-9]([0-9])*|[3-9][0-9]+|[1-2][0-9]{2,})$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:35:25.180

这是一个比其他一些更简洁的正则表达式：

```
^(?!(1\d|2[0-4])$)[1-9]\d+$ 
```

你可以在这里测试它：[http ://www.rubular.com/r/PGdbtGYsWD](http://www.rubular.com/r/PGdbtGYsWD)

方法是只匹配`[1-9]\d+`，这将是一个两位或更多位的数字，并在开头使用[负前瞻来防止匹配 10 到 24 之间的任何数字。](http://www.regular-expressions.info/lookaround.html)

如果应该允许前导零，只需`0*`在`^`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T16:48:10.603

使用正则表达式模式

```
^(2[5-9]|[3-9]\d|(?!0)\d{3,})$ 
```

或（如果您想允许前导零）

```
^0*(2[5-9]|[3-9]\d|(?!0)\d{3,})$ 
```

# java - 带有 VK_SPACE 的 registerKeyboardAction 不起作用

> ID：13630099
> 
> 赞同：2
> 
> 时间：2012-11-29T16:21:08.457
> 
> 标签：java, swing, jdialog, key-bindings, spaces

背景：我有一个表格单元格编辑器，调用时会弹出一个对话框，其中包含复选框列表和 2 个按钮（确定和取消）。一切正常。我后来注册了键盘操作，以便 ENTER 和 ESCAPE 键可以执行确定/取消操作。仍然没有问题。

使用相同的技术，我尝试注册 SPACE 键以执行第三个操作。这没有火。示例代码：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class DialogTest implements Runnable
{
  JDialog dialog;
  JList jlist;

  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new DialogTest());
  }

  public void run()
  {    
    ActionListener okListener = new ActionListener()
    {
      public void actionPerformed(ActionEvent e)
      {
        close(true);
      }
    };

    ActionListener cancelListener = new ActionListener()
    {
      public void actionPerformed(ActionEvent e)
      {
        close(false);
      }
    };

    ActionListener otherListener = new ActionListener()
    {
      public void actionPerformed(ActionEvent e)
      {
        doOther();
      }
    };

    JButton okButton = new JButton("OK");
    okButton.addActionListener(okListener);

    JButton cancelButton = new JButton("Cancel");
    cancelButton.addActionListener(cancelListener);

    jlist = new JList(new String[]{"A", "B", "C", "D", "E", "F", "G"});
    jlist.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    jlist.setVisibleRowCount(5);

    JScrollPane scroll = new JScrollPane(jlist);
    scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    JPanel buttonsPanel = new JPanel(new FlowLayout());
    buttonsPanel.add(okButton);
    buttonsPanel.add(cancelButton);

    JPanel content = new JPanel(new BorderLayout());
    content.add(scroll, BorderLayout.CENTER);
    content.add(buttonsPanel, BorderLayout.SOUTH);

    dialog = new JDialog((Frame) null, true);
    dialog.setContentPane(content);
    dialog.pack();
    dialog.setLocationRelativeTo(null);

    dialog.getRootPane().registerKeyboardAction(okListener,
        KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0),
        JComponent.WHEN_IN_FOCUSED_WINDOW);

    dialog.getRootPane().registerKeyboardAction(cancelListener,
        KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0),
        JComponent.WHEN_IN_FOCUSED_WINDOW);

    // This doesn't work
    dialog.getRootPane().registerKeyboardAction(otherListener,
        KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0),
        JComponent.WHEN_IN_FOCUSED_WINDOW);

    dialog.setVisible(true);
  }

  private void close(boolean commit)
  {
    if (commit)
    {
      System.out.println("Now saving...");
    }
    else
    {
      System.out.println("Now closing...");
      System.exit(0);
    }
  }

  private void doOther()
  {
    System.out.println("current selection: " + jlist.getSelectedValue());
  }
} 
```

**编辑**

感谢 mKorbel 的建议（和有用的链接！），我得到了这个工作：

1）将行更改`ActionListener otherListener = new ActionListener(){...}`为：

```
Action otherListener = new AbstractAction(){...} 
```

2）将SPACE击键注册更改为：

```
KeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0);
Object key = keyStroke.toString();
jlist.getInputMap().put(keyStroke, key);
jlist.getActionMap().put(key, otherAction); 
```

请注意，注册是针对 JList 的，而不是针对其他 2 个击键的 JDialog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:50:35.517

很难对陛下说什么菜刀......

编辑

我忘记了 SPACE 已将 KeyBindings 注册为人类 JButtons 加速器（鼠标、ENTER 和 SPACE），如果选择了 JButton，则可能存在并发

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DialogTest implements Runnable {

    private JDialog dialog;
    private JList jlist;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new DialogTest());
    }

    @Override
    public void run() {
        ActionListener okListener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                close(true);
            }
        };

        ActionListener cancelListener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                close(false);
            }
        };

        ActionListener otherListener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                doOther();
            }
        };
        JButton okButton = new JButton("OK");
        okButton.addActionListener(okListener);
        JButton cancelButton = new JButton("Cancel");
        cancelButton.addActionListener(cancelListener);
        jlist = new JList(new String[]{"A", "B", "C", "D", "E", "F", "G"});
        jlist.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jlist.setVisibleRowCount(5);
        JScrollPane scroll = new JScrollPane(jlist);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        JPanel buttonsPanel = new JPanel(new FlowLayout());
        buttonsPanel.add(okButton);
        buttonsPanel.add(cancelButton);
        JPanel content = new JPanel(new BorderLayout());
        content.add(scroll, BorderLayout.CENTER);
        content.add(buttonsPanel, BorderLayout.SOUTH);
        dialog = new JDialog((Frame) null, true);
        dialog.setContentPane(content);
        dialog.pack();
        dialog.setLocationRelativeTo(null);
        dialog.getRootPane().registerKeyboardAction(okListener,
                KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0),
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);

        dialog.getRootPane().registerKeyboardAction(cancelListener,
                KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0),
                JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        // This doesn't work
        /*dialog.getRootPane().registerKeyboardAction(otherListener,
        KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0),
        JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);*/
        dialog.getRootPane().getInputMap().put(KeyStroke.getKeyStroke("SPACE"), "doSomething");
        dialog.getRootPane().getActionMap().put("doSomething", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        dialog.setVisible(true);
    }

    private void close(boolean commit) {
        if (commit) {
            System.out.println("Now saving...");
        } else {
            System.out.println("Now closing...");
            System.exit(0);
        }
    }

    private void doOther() {
        System.out.println("current selection: " + jlist.getSelectedValue());
    }
} 
```

# php - 为什么 PHP fwrite() 在 Wordpress 插件调用中失败？

> ID：13630100
> 
> 赞同：0
> 
> 时间：2012-11-29T16:21:07.660
> 
> 标签：php, wordpress

我的目标是编写一个 Wordpress 插件，该插件可以在保存帖子时写出一个文件。以下是插件的现有代码，减去插件头信息：

```
<?php       
add_action( 'save_post', 'write_hook' );

function write_hook( $post_id ) {
    $myFile = "target.txt";
    $fh = fopen($myFile, 'a');
    fwrite($fh, "ANOTHER LINE\n");
    fclose($fh);
    wp_mail( 'myemail@address.com', $post_title, $post_url );
}
?> 
```

当我保存帖子时，邮件会通过，但 target.txt 保持不变。我没有看到任何错误写入日志。Target.txt 的权限为 777，下面的非插件代码可以正常工作（并且与插件在同一目录下）。当我直接访问它时，它会更新 target.txt 并在页面上显示“woot”。

```
<?php
    $myFile = "target.txt";
    $fh = fopen($myFile, 'a');
    fwrite($fh, "ANOTHER LINE hooray\n");
    fclose($fh);
    echo "woot";
?> 
```

我在我的 Wordpress 插件代码中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:06:11.297

在遵循评论中的建议后，我确​​认问题在于脚本的执行上下文会根据 fwrite() 是作为独立页面还是作为 Wordpress 插件的一部分被调用而改变。

在单机页面中，本地路径将其放在与脚本相同的目录中。

在插件中，本地路径语法意味着 fwrite() 将 target.txt 写入 /wp-admin 文件夹，因为这是调用插件时的本地路径。

# css - 拒绝加载显示：媒体查询中的无元素？

> ID：13630108
> 
> 赞同：1
> 
> 时间：2012-11-29T16:21:48.737
> 
> 标签：css, cross-platform, media-queries

我有一个内容为 603 KB 的 div，`display: none;`在小于 480 像素的分辨率下不显示（在@media 中）（我将实现 320 像素以便稍后针对手机进行优化）。我为手机不得不加载 603kb 的总垃圾感到抱歉。

有可能解决办法吗？

可以在[http://www.peterpagh.com/peterpaghdotk/上看到临时和正在进行的站点](http://www.peterpagh.com/peterpaghdotk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:15:42.347

退后一步，从不同的方向接近它。

您正在向使用较小设备的用户隐藏内容，因此我猜测该内容不是网站功能的核心。

[您可以使用https://github.com/filamentgroup/Ajax-Include-Pattern/](https://github.com/filamentgroup/Ajax-Include-Pattern/)之类的东西在特定断点处加载内容。

如果内容*是*网站的核心，那么您应该看看如何减小大小。

# php - YII：我的情况有什么问题吗？（如果声明）

> ID：13630113
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:21:58.660
> 
> 标签：php, if-statement, yii

我有以下代码，如果它们不在条件范围内，两个图像都会显示，但是当我将它们置于条件范围内时，它们不起作用。我究竟做错了什么？我正在使用 YII 框架...

```
<?php if ($avatar) { ?>
<img src="<?php echo $avatar; ?>" class="avatar" alt="" />
<?php } else { ?>
<img src="<?php echo Yii::app()->theme->baseUrl; ?>/images/no-image.jpg" width="186px" class="avatar" alt="" />
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:28:42.060

`if ($avatar)`询问 $avatar 是否已定义（即存在）。

如果 $avatar 已定义`<img src="<?php echo $avatar; ?>" class="avatar" alt="" />` ，则显示。

如果 $avatar 未定义，您会收到警告`Notice: Undefined variable: avatar`

以下代码使用 PHP 函数[isset()](http://www.php.net/manual/en/function.isset.php)（如 Cole Johnson 所述）

```
<?php 
$flag = 0;
//Try commenting out line below to illustrate
$avatar =1;
if (isset($avatar)) {
$flag =1;
}
if ($flag == 1){
 ?>
 <img src="<?php echo $avatar; ?>" class="avatar" alt="" />
<?php } 
else { ?>
<img src="<?php echo Yii::app()->theme; ?>/images/no-image.jpg" width="186px" class="avatar" alt="" />
<?php 
} ?> 
```

# c# - 如何OCR雕刻文字？

> ID：13630114
> 
> 赞同：8
> 
> 时间：2012-11-29T16:22:14.383
> 
> 标签：c#, image-processing, artificial-intelligence, ocr, pattern-recognition

我有这张图片

![带有雕刻文字的图像](../Images/56e4dd1367bc19f99e703b3ca140b1fa.png)

如何OCR呢？我知道这非常具有挑战性，但我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:29:02.350

我建议您使用 2 个库来帮助您：

1.  [正方体](http://code.google.com/p/tesseract-ocr/)
2.  [Emgu CV](http://www.emgu.com/wiki/index.php/Main_Page) - 附带大量示例，将车牌检测作为一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:01:40.933

如果您有时间自己开发检测，我会大致这样做：

1.  获取 1000 张左右的图像，然后自己进行 OCR，或者让 Amazon Mechanical Turk 上的人为您完成，几乎不需要任何成本。现在你有一些东西可以调整你的算法并衡量你的表现。
2.  [就像 Ryan 写的那样，手动或使用http://www.roborealm.com/](http://www.roborealm.com/)之类的东西使用标准图像过滤器、对比度、颜色、高斯等。看看您是否找不到使文本真正脱颖而出的组合。
3.  再次尝试库
4.  如果库仍然不起作用，请尝试使用您对图片的了解将其拆分为单独的数字。您知道应该有多少位以及每个位应该占用多少像素。使用边缘检测或其他东西（也许标准的 OCR 特征提取，加上聚类会给你每个数字作为一个集群？）找到数字并将它们分开。
5.  对每个数字进行标准 OCR 特征提取（不要太有创意 - 使用现有库或至少阅读最常见和最简单的内容）并将这些特征连同你在 1 下得到的答案一起输入神经网络或 SVM。
6.  改进您的功能集，直到机器学习起作用。

由于您只有十位数字，这在图像之间相当一致，因此应该可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:33:58.533

尝试在图像上使用对比度和伽玛。您所需要的只是大多数图书馆的字符轮廓。根据您的性能 SLA，您可以运行各种对比度/伽玛场景，并让 OCR 软件对其进行几次拍摄。汇总结果并查看是否有任何一致性。从长远来看，这可以为您提供相当准确的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-15T11:36:23.083

机器学习（在这里，使用一些中性网络）对于数字通常已经是准确的，只需最少的培训且易于使用。

一种DIY方法：

1.  一些神经网络的输出可能是???1160060060??1??? 对于第一个字符。您应该从中选择最常出现的 (0)。

2.  要正确识别数字的顺序，请使用“移动窗口”，就像您裁剪图像宽度的一小部分一样。

3.  在图像的整个宽度上重复此操作。

最棘手的一点很可能是计算一个数字和下一个数字之间的空间。

如果幸运的话，数字总是相同的大小（等宽），您可以提前决定需要多少像素。否则，这通常可以在将像素输入神经网络之前在校准步骤中完成。

如果图像可以旋转，那么让一个单独的神经网络帮助您计算旋转实际上可能是有意义的。

[程序员（和我）在 1980 年代已经在 Commodore 计算机上](https://www.fourmilab.ch/documents/commodore/BrainSim/)尝试了数字识别！如今，您可能会发现一些大学 AI 课程的任务与此类似。

# spring - 如何从 jQuery 访问带有变量名的 modelAttribute

> ID：13630118
> 
> 赞同：1
> 
> 时间：2012-11-29T16:22:31.363
> 
> 标签：spring, model-view-controller, jstl, modelattribute, modelandview

我使用 Spring MVC 和 jQuery 在 JSP 中处理控制器发送的对象。

我的控制器使用以下命令向 JSP 发送多个对象：

```
modelAndView.addObject("roleForm" + rol.getRolecode(), form); 
```

其中 form 是以下类的对象：

```
public class RoleForm
{
    private String roleCode;
    private LinkedHashSet<String> listEnabled;
... getters and setters ...
} 
```

因此，我发送的对象具有键 roleFormADMIN、roleFormUSER 等。这些对象的数量和名称是未知的，因为它们是从数据库中检索的。

在我的 JSP 中，我为每个角色访问其对应的 RoleForm：

```
<c:forEach items="${rolesList}" var="role">
    <div class="role" id="${role}">
        <label class="adminSectionTitle">
            ${role}
        </label>

        <form:form method="post" id="roleForm${role}" modelAttribute="roleForm${role}" action="roles.html">
            <fieldset>
                <form:hidden path="roleCode"/>

                <div class="pickList">
                    <fieldset class="pickItems">
                        <legend >Enabled</legend>

                        <form:select  path="listFunctEnabled" id="combo1" size="5" multiple="true">     
                            <form:options items="${listFunctEnabled}" />
                        </form:select>
                    </fieldset>

                </div>
            </fieldset>
            <div class="formButtons">                       
                <input type="submit" value="<fmt:message key="button.save"/>" />
                <input type="button" name="reset" onclick="location.href='<c:url value="roles.html"/>'" value="<fmt:message key="button.clear"/>" />                                                
            </div>
        </form:form>        
    </div>
</c:forEach> 
```

每个 RoleForm 的属性 roleCode 被正确检索，但无法访问表单的属性 listFunctEnabled（为空）。

如果我直接写表单的名称（例如，roleFormADMIN.listFunctEnabled），那么它会将列表的每个项目写入表单：选项。

如果我使用 roleForm${role}.listFunctEnabled，那么它会将其视为一个字符串，并说该字符串没有任何名为 listFunctEnabled 的属性。

每个角色都需要一个表单，因为每个角色都需要一个按钮来更新其功能列表。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:43:48.623

您是否尝试将`modelAttribute`值设置为另一个变量然后访问`listFunctEnabled`列表？这就是我的想法。

```
<c:set var="roleFormName" value="roleForm${role}"/> 
```

然后在选择标签中使用它

```
<form:select  path="listFunctEnabled" id="combo1" size="5" multiple="true">     
     <form:options items="${roleFormName.listFunctEnabled}" />
</form:select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:05:06.643

我终于解决了使用 HashMap 而不是集合的问题。因此，在我的控制器中，我为每个角色（哈希图的键）填充了 listFunctEnabled 列表 例如： map[ROLE_ADMIN] = {Funct1, Funct2, Funct3}

RoleForm 保持不变，因此所选项目存储在 listFunctEnabled 属性中。

现在，在 JSP 中，我通过以下方式访问它：

```
<form:form method="post" id="roleForm${role}" modelAttribute="roleForm${role}" action="roles.html">
    <fieldset>
        <form:hidden path="roleCode"/>

        <div class="pickList">
            <fieldset class="pickItems">
                <legend >Enabled</legend>

                <form:select path="listFunctEnabled" id="combo1" size="5" multiple="true">      
                    <form:options items="${map[role]}" />
                </form:select>

            </fieldset>
        </div>
    </fieldset>
</form:form> 
```

该解决方案没有问题。我希望对其他人有用。

# asp.net-mvc-4 - 自定义类的模板

> ID：13630137
> 
> 赞同：0
> 
> 时间：2012-11-29T16:23:14.707
> 
> 标签：asp.net-mvc-4, c#-4.0

这是一个非常普遍的问题，但我被卡住了！

我有一个模型类，我想在视图中编辑它：

```
public class FormFillModel
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }

    public string Sector { get; set; }
    public List<FormFieldModel> Fields { get; set; }
} 
```

我可以编辑字符串属性，但不能编辑字段属性。

我为它创建了一个编辑器模板。在 ~/shared/editortemplates/FormFieldsListModel.cshtml 下

```
@model List&lt;SoruCevapForm.Models.FormFieldModel&gt;

@foreach (var field in Model)
{
<div class="editor-label">
    @Html.Label(field.Text)
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => field.Val)
</div>
<br />
} 
```

最后...

```
<h2>FillForm</h2>
@using (Html.BeginForm())
{
    <fieldset>
        <legend>@Model.Title</legend>
        @Html.HiddenFor(model => model.Id)
        <table>
            <tr>
                <td>
                    <div class="display-label">
                        @Html.DisplayNameFor(model => model.Title)
                    </div>
                </td>
                <td>
                    <div class="display-field">
                        @Html.DisplayFor(model => model.Title)
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="display-label">
                        @Html.DisplayNameFor(model => model.Sector)
                    </div>
                </td>
                <td>
                    <div class="display-field">
                        @Html.DisplayFor(model => model.Sector)
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="display-label">
                        @Html.DisplayNameFor(model => model.Description)
                    </div>
                </td>
                <td>
                    <div class="display-field">
                        @Html.DisplayFor(model => model.Description)
                    </div>
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend>Fields</legend>

        @Html.EditorFor( model => model.FieldsList.Fields, "FormFieldsListModel")

        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>

} 
```

但是当我发布...

```
 [HttpPost]
    public ActionResult FillForm(int id, FormFillModel model)
    {
        return RedirectToAction("UserPage");
    } 
```

model.Fields 属性为空。

**编辑：结果 Html**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>FillForm</title>
    <link href="/Content/site.css" rel="stylesheet"/>

    <script src="/Scripts/modernizr-2.5.3.js"></script>

</head>
<body>
    <br />
    <a href="/Account/Logout">Logout</a>
    <br />

<h2>FillForm</h2>
<form action="/FormManage/FillForm/1" method="post">    <fieldset>
        <legend>TestForm2</legend>
        <input data-val="true" data-val-number="The field Id must be a number." data-val-required="The Id field is required." id="Id" name="Id" type="hidden" value="1" />
        <table>
            <tr>
                <td>
                    <div class="display-label">
                        Title
                    </div>
                </td>
                <td>
                    <div class="display-field">
                        TestForm2
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="display-label">
                        Sector
                    </div>
                </td>
                <td>
                    <div class="display-field">

                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="display-label">
                        Description
                    </div>
                </td>
                <td>
                    <div class="display-field">
                        TestForm Description
                    </div>
                </td>
            </tr>
        </table>
    </fieldset>
    <fieldset>
        <legend>Fields</legend>

        <div class="editor-label">
    <label for="FieldsList_Fields__0__Name">Name</label>
</div>
<div class="editor-field">
    <input id="FieldsList_Fields__0__Val" name="FieldsList.Fields.[0].Val" type="text" value="" />
</div>
<br /><div class="editor-label">
    <label for="FieldsList_Fields__1__Surname">Surname</label>
</div>
<div class="editor-field">
    <input id="FieldsList_Fields__1__Val" name="FieldsList.Fields.[1].Val" type="text" value="" />
</div>
<br /><div class="editor-label">
    <label for="FieldsList_Fields__2__Address">Address</label>
</div>
<div class="editor-field">
    <input id="FieldsList_Fields__2__Val" name="FieldsList.Fields.[2].Val" type="text" value="" />
</div>
<br />

        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
</form>
<p>
    <a href="/FormManage/UserPage">Back</a>
</p>

    <script src="/Scripts/jquery-1.7.1.js"></script>

</body>
</html> 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:25:38.997

在迭代列表时尝试在编辑器模板中使用索引访问：

```
@for (int i=0; i<Model.Count(); i++)
{
    <div class="editor-field">
        @Html.TextBoxFor(model => Model[i].Val)
    </div>
} 
```

这将使用输入字段的索引呈现名称，例如`Fields[0].Val`，`Fields[1].Val`modelbinder 将值绑定到列表属性所需的索引。

**编辑** 我发现您的视图/模型不一致：

您的模型有一个名为`Fields`. 但是在您看来，您编写了模型。**FieldsList** .Fields`：

```
@Html.EditorFor( model => model.FieldsList.Fields, "FormFieldsListModel") 
```

这怎么可能？您的视图的确切视图模型是什么？额外的**FieldsList**呈现错误的字段名，因此它无法在回发时绑定到模型的**Fields**属性。

# arrays - Java查找数字出现的次数

> ID：13630144
> 
> 赞同：3
> 
> 时间：2012-11-29T16:23:37.020
> 
> 标签：arrays

我需要编写一个程序来查找一个数字是否多次出现在 50 个数字的数组中。

我有生成 50 个随机数的数组，但似乎无法通过编写循环来查看有多少是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:40:09.563

`numbers`以下代码将计算每个滚动数字并在地图中存储计数：

```
Map<Integer, Integer> numbers = new HashMap<Integer, Integer>();
for (int i = 0; i < 50; i++) {
    Integer num = die.roll();
    Integer count = numbers.get(num);
    if (count == null) {
        count = Integer.valueOf(0);
    }
    count = Integer.valueOf(count.intValue() + 1);
    numbers.put(num, count);
} 
```

然后您可以检查所有地图条目并找到那些滚动多次的条目。

```
for (Map.Entry<Integer, Integer> entry : numbers.entrySet()) {
    if (entry.getValue().intValue() > 1) {
        System.out.println(entry.getKey() + " rolled more than once");
    }
} 
```

或者您可以在第一个循环中更改条件以在那里输出数字：

```
for (int i = 0; i < 50; i++) {
    Integer num = die.roll();
    Integer count = numbers.get(num);
    if (count != null) {
        System.out.println(num + " rolled more than once");
    } else {
        numbers.put(num, Integer.valueOf(1));
    }
} 
```

最后，您仍然可以使用数组在其中查找数字：

```
for (int i = 0; i < 50; i++) {
    nums[i] = die.roll();
    for (int j = i - 1; j >= 0; j--) {
        if (nums[i] == nums[j]) {
            System.out.println(nums[i] + " rolled more than once");
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:03:51.843

您可以尝试对数据进行排序

```
int[] nums = new int[50];
for(int i = 0; i < nums.length; i++) nums[i] = die.roll();
java.util.Arrays.sort(nums);
int dupes = 0;
for(int i = 0; i < nums.length - 1; i++) {
    if(nums[i] == nums[i+1) dupes++;
} 
```

对数据进行排序会将所有相等的元素彼此相邻，因此您可以一次性找到它们。当然，您必须对其进行排序，这不是一次性操作。

这消除了使用地图的开销，并且仍然非常快。排序是`n lg n`，这比`n`使用地图的解决方案要慢，但如果使用如此小`n`的地图，地图的开销可能会很大。代码本身也很容易理解。

请参阅这个在 10 元素数组中使用数字 0-19 的自包含示例（缩小数字以便于查看；该概念完全适用。）

```
import java.util.*;
class Christine {
    static Random random = new Random();
    static int dieroll() {
        return random.nextInt(20);
    }
    public static void main(String[] args) {
        int[] nums = new int[10];
        for(int i = 0; i < nums.length; i++) nums[i] = dieroll();
        System.out.println(Arrays.toString(nums));
        Arrays.sort(nums);
        int dupes = 0;
        for(int i = 0; i < nums.length - 1; i++) {
            if(nums[i] == nums[i+1]) dupes++;
        }
        System.out.println(dupes);
    }

} 
```

您像这样运行示例：

```
c:\files\j>javac Christine.java

c:\files\j>java Christine
[2, 9, 8, 5, 11, 12, 15, 15, 16, 7]
1

c:\files\j>java Christine
[10, 10, 1, 18, 11, 6, 4, 3, 9, 5]
1

c:\files\j>java Christine
[8, 0, 13, 4, 5, 4, 16, 13, 6, 18]
2 
```

在第一次运行中，有两个 15。在第二个中，有两个 10。第三个，有两个 13 和两个 4。

考虑这个例子：

```
c:\files\j>java Christine
[17, 19, 19, 3, 19, 4, 18, 19, 1, 1]
4 
```

这计算了 4 个不同的 19 的 3 个欺骗，以及两个 1 的欺骗。现在为什么19s有3个骗子？因为如果我们称 19 为 a、b、c 和 d，a 将 b 视为骗子，b 将 c 视为骗子，c 将 d 视为骗子。所以有三个。您必须添加额外的逻辑以使其更健壮地捕获所有 6 个骗子。

# java - 使用条件解析和编辑 XML 文件

> ID：13630149
> 
> 赞同：0
> 
> 时间：2012-11-29T16:23:57.340
> 
> 标签：java, xml, parsing, editing, xerces

对于我目前正在做的一个小项目，我需要解析大量的“设置”文件并在某些条件下更改值。我*相信*这些文件是用 XML 格式化的，但是我开始怀疑这一点，因为我正在使用 Apache 的 Xerces XML 解析器来解析 java 中的文件并得到奇怪的结果......

这是我需要解析的示例“设置”文件（我提前申请了格式）：

```
<LIBRARY_ITEM><NAME> AUsten(REdsockswhiteandblack), Kevin(Greysocks),
Johnny(REdandwhitesocksTall), David(REdandwhitesocksshort)(10)-Camera 1.avi
</NAME><ID>{DA656F16-CDDE-49C5-83B6-865DFB58356A}</ID><VERSION
subversion="1">2.0</VERSION><THUMBNAIL_INDEX>0</THUMBNAIL_INDEX><CATEGORIES>
<CATEGORY name="Skaters" id="{90a42bf0-58ec-46d4-8a54-8bbf7844d63a}">Johnny
Yaremko</CATEGORY><CATEGORY name="Skills" id="{165e7d21-aa8f-4376-b38b-
6fe20680e0d4}">Drop &amp; Go</CATEGORY></CATEGORIES><CAMERA_NAME_NODE
CAMERA_NAME="Camera 1"/><TYPE>1</TYPE><LIBRARY_ITEM ItemType="Marker" IN="0"
UNIT="RefTime" OUT="0" SynchMarker="yes"><NAME></NAME><ID>{B02BA392-50D4-490C-9FDB-
0B7B350D2281}</ID><VERSION subversion="1">2.0</VERSION><FILE_NAME></FILE_NAME>
<Library.MDProperties><Property Name="Title" DefaultValue=""><![CDATA[Synch Point]]>
</Property></Library.MDProperties><Data Id="ODKeyPosition"><![CDATA[<ODKeyPosition
Version="1.0"><DrawingStream Value="1&#xA;0 13 BEGIN_SCENE_11052 3 0 1 0 65535 0 0 0 0
0 0.84375 0 1 0 1 720 9 END_SCENE"/></ODKeyPosition>]]></Data></LIBRARY_ITEM>
<CAMERA_NAME_NODE CAMERA_NAME="Camera 1"/><Library.MDLibraryItemLink><Reference
Id="TWIN"><LibraryItem Id="{74927B4E-00FF-4E12-B428-BF392E82CFA2}"
LastKnownLocation=".\ AUsten(REdsockswhiteandblack), Kevin(Greysocks),
Johnny(REdandwhitesocksTall), David(REdandwhitesocksshort)(10)-Camera 2.avi"/>
</Reference></Library.MDLibraryItemLink><OverlayDrawing><![CDATA[13 BEGIN_SCENE_11052 3
 0 1 0 65535 0 0 0 0 0 0.84375 0 1 2 13501 3 0 1 0 65520 0 0 0 0 0 1 0 1 13 1105 3 0 1
 0 65535 0 0 0 0 0 1 0 2 2 360 0 0 1 360 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127
 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 420 0 0 1 420 576 0 1 0 0
 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0
 0 1 0 2 2 480 0 0 1 480 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0
 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 540 0 0 1 540 576 0 1 0 0 0 0 1 2 1 255 
104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 600 0
 0 1 600 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3
 0 1 0 65535 0 0 0 0 0 1 0 2 2 660 0 0 1 660 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127
 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 720 0 0 1 720 576 0 1
 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0
 0 0 0 1 0 2 2 300 0 0 1 300 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3
 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 240 0 0 1 240 576 0 1 0 0 0 0 1 2 1
 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2
 180 0 0 1 180 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 
1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 120 0 0 1 120 576 0 1 0 0 0 0 1 2 1 255 104 32 255
 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 60 0 0 1 60 576
 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 
0 0 0 0 0 1 0 2 2 0 0 0 1 0 576 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3
 2 0 20 20 1 1 1 3 1 11 lineSpaceId19 Space between lines1 0 60 1 11 gridWidthId10 Grid
 Width1 0 720 1 12 gridHeightId11 Grid Height1 0 576 0 1 1 13 orientationId16 Grid
 Orientation1 0 1 0 0 0 13501 3 0 1 0 65520 0 0 0 0 0 1 0 1 9 1105 3 0 1 0 65535 0 0 0 
0 0 1 0 2 2 0 288 0 1 720 288 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2
 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 348 0 1 720 348 0 1 0 0 0 0 1 2 1 255
 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 
408 0 1 720 408 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105   
3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 468 0 1 720 468 0 1 0 0 0 0 1 2 1 255 104 32 255 1    
127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 528 0 1 720 528
 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535
 0 0 0 0 0 1 0 2 2 0 228 0 1 720 228 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255
 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 168 0 1 720 168 0 1 0 0 0 0 1 2
 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2
 2 0 108 0 1 720 108 0 1 0 0 0 0 1 2 1 255 104 32 255 1 127 127 127 255 0 3 2 0 20 20 1
 1105 3 0 1 0 65535 0 0 0 0 0 1 0 2 2 0 48 0 1 720 48 0 1 0 0 0 0 1 2 1 255 104 32 255
 1 127 127 127 255 0 3 2 0 20 20 1 1 1 3 1 11 lineSpaceId19 Space between lines1 0 60 1
 11 gridWidthId10 Grid Width1 0 720 1 12 gridHeightId11 Grid Height1 0 576 0 1 1 13
 orientationId16 Grid Orientation1 0 0 0 0 0 1 720 9 END_SCENE]]></OverlayDrawing>
<Library.MDProperties><Property Name="CameraID" DefaultValue=""><![CDATA[0]]>
</Property><Property Name="Comment" DefaultValue=""><![CDATA[This is an acceleration
 drill. The skater uses a wider stance than normal to achieve a shorter but more rapid
 stride. This is required to get up to full speed in a hurry. Once at full speed a long
 powerful stride will keep you there with the least amount of energy consumed. Body
 position is once again important. Leaning too far forward will cause the skater to 
loose traction as all their weight is not over their skates.]]></Property><Property
 Name="Title" DefaultValue=""><![CDATA[ AUsten(REdsockswhiteandblack),
 Kevin(Greysocks), Johnny(REdandwhitesocksTall), David(REdandwhitesocksshort)(10)-
Camera 1.avi]]></Property></Library.MDProperties></LIBRARY_ITEM> 
```

如果有帮助的话，这些文件每个都对应一个 AVI 视频剪辑。我正在尝试使用一些条件语句一次编辑其中的许多，以便在引用它们的应用程序中更改剪辑属性。这是一个第三方应用程序，因此使这项任务对我来说相当困难，因为所有测试都必须在“黑盒”中完成（我不知道开发人员用来编写这些设置文件的方法/结构）。

我想我在问这些数据是否符合 XML 标准，或者它是否是一个完全不同的结构。这些文件中有一些地方看起来不像是正确的 XML...

[更新] 这是我用来扫描解析数据并将其打印到屏幕上的代码（以确保一切结构正确）：

```
public Analyzer(String source) {

    DOMParser parser = new DOMParser();

    int level= 0;
    Node curItem = null;

    try {
        parser.parse(source);
        Document doc = parser.getDocument();

        NodeList nodeList = doc.getElementsByTagName("LIBRARY_ITEM");
        for (int i = 0; i < nodeList.getLength(); i++) {
            read(nodeList.item(i), 0);
        }

    } catch (Exception ex) {
        ex.printStackTrace();
    }

}

public static void read(Node node, int level) {

    if (node == null) {
        return;
    }

    int type = node.getNodeType();
    switch (type) {
        case Node.DOCUMENT_NODE: {
            System.out.print(node.getNodeName()+": ");
            read(((Document) node).getDocumentElement(), level+1);
            break;
        }

        case Node.TEXT_NODE: {
            System.out.print(" = \""+node.getNodeValue().replaceAll("\\s", "")+"\"");
            break;
        }

        case Node.ELEMENT_NODE: {
            System.out.print("\n");
            for (int i = 0; i < level; i++) {
                System.out.print("\t");
            }
            System.out.print(node.getNodeName());
            NodeList children = node.getChildNodes();
            int length = children.getLength();
            for (int i = 0; i < length; i++) {
                read(children.item(i), level+1);
            }
            break;
        }
    }
} 
```

当它运行时，它对一些字段做了一些时髦的事情......而且，一些值没有正确打印。这很容易成为我的错误，因为我对 XML**非常**缺乏经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:15:41.960

你还没有完全描述你的问题（即我不知道“时髦”在不正确的输出方面是什么意思）。也就是说，您提到丢失的数据，并且 xml 有 CDATA 部分，所以我想您的代码缺少 CDATA 节点的案例，例如`Node.CDATA_SECTION_NODE`。

另请注意，给定元素节点可能*有多*个子文本节点（允许 xml 解析器在解析时将它们分解）。

# java - 将存储在变量中的值分配为数组列表的名称

> ID：13630151
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:24:03.680
> 
> 标签：java

有没有一种方法可以为数组列表的名称分配一个存储在变量中的名称。要求就像我需要运行一个循环，在其中我需要创建一个数组列表，其名称将是存储循环计数的变量的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:26:05.643

我不认为这是可能的。您可能想要做的是创建一个[Map](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)，其键是您所指的名称，值是 ArrayList 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:48:00.220

1.  ArrayLists 没有名称。您可以有一个命名变量（或实际上有很多）引用一个 ArrayList，但列表本身对此一无所知。

2.  即使可以创建动态变量，其名称基于其他变量的值，它也不适用于计数器，因为数字不是有效的变量名称。

3.  而且，即使可以创建以数字为名称的动态变量，它也不起作用，因为在循环中声明的任何变量都超出了循环体本身之外的任何代码部分的范围。

就像这里所说的，使用映射在一些计数器值和 ArrayList 之间创建链接：

```
 final Map<Integer, List<String>> myMap = new HashMap<Integer, List<String>>();

  for (int i = 0; i < something; i++=) {
      myMap.put(i, new ArrayList<String>());
  } 
```

# c# - 禁用自动化事件原型生成

> ID：13630156
> 
> 赞同：0
> 
> 时间：2012-11-29T16:24:11.217
> 
> 标签：c#, visual-studio-2010

我的`Windows Form Application`. 每个按钮都有自己的*事件处理函数*，总共有 1500 多行。

我希望将所有这些“*回调”*函数移动到单独的文件中（我可以使用）每次我使用表单设计器（设置不同的标签等）。`partial class MainForm``MainForm`

**我的问题是**如何防止 Microsoft Visual Studio 2010 一遍又一遍地重新创建这些原型？

*事件处理程序原型*示例：

```
private void exportSelectedItems_Click(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:58:52.520

无论出于何种原因，如果与表单设计器直接关联的文件中不存在事件处理程序，Visual Studio 将创建事件处理程序。这仅在表单发生更改时发生。

这导致了上述行为。

但是，您可以通过代码手动添加事件处理程序，而不是通过构造函数中的设计器或自定义 init 函数。

例如，

```
public MainForm()
{
   exportSelectedItems.Click += new EventHandler(exportSelectedItems_Click);
} 
```

# c# - Silverlight Pivotviewer 2 控制缓慢加载

> ID：13630157
> 
> 赞同：1
> 
> 时间：2012-11-29T16:24:11.887
> 
> 标签：c#, asp.net, mvvm, silverlight-5.0, pivotviewer

在我的项目中，我使用 PivotViewer-2 在一张卡片中直观地显示实体的所有数据元素。有 50 多个数据元素需要堆叠在一张卡片中。我定义了一个包含所有必需数据元素的模板（比如说 T4）。对于少数数据元素，我使用值转换器类来解释为 UI 可用值。

Silverlight Pivotviewer 2 客户端通过调用 Web 服务获取数据并获取对象集合并分配给 PivotViewer 的 ItemSource 属性。卡片的渲染效果很好，数据较少（50）。当计数增加时，pivotviewer 的性能会急剧下降。典型的业务场景是 4000-5000 条记录。

我测试了 4025 条记录，在数据透视查看器中呈现数据花了将近 75 秒。75 秒是从分配给项目源的时间数据到完整呈现枢轴查看器的时间。第一次加载后，它按预期正常工作。

*   我介绍了另外 3 个模板（T1、T2、T3），分别显示 1、2 和 3 个数据元素。枢轴查看器按顺序分配了 4 个模板 T1、T2、T3、T4。加载时间为 82 秒。

*   我削减了 T4 模板 [这是一个具有 50 多个显示元素的重量级模板]，加载/渲染耗时 22 秒。

请建议我们如何有效地将大数据加载到数据透视查看器中。

是否有任何解决方法可以先使用简单模板加载数据透视查看器，然后在后台动态添加更复杂的模板。

# dojo - Dijit DateTextArea 行为

> ID：13630161
> 
> 赞同：0
> 
> 时间：2012-11-29T16:24:38.043
> 
> 标签：dojo

我正在使用 dijit dateTextArea 并且遇到了一些奇怪的行为。我有一个带有 Dijit dateTextArea 的简单表单。我正在为日期设置一个默认值，它看起来很好。如果我点击进入日期区域，选择一个日期并点击提交，日期在另一边被选中（即提交）。但是，如果我不触摸 dateTextArea （即我不点击它或给它任何焦点）并提交表单，则日期为空白，即使已设置默认日期也是如此。我尝试通过设置小部件上的值、初始值和使用 data-dojo-props 来设置默认日期。日期显示在字段中，但除非我与字段交互，否则不会提交日期。

那么，我做错了什么？该领域是否需要在某些时候集中注意力才能正常工作？指定默认日期时，我应该使用额外的设置吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:13:12.347

如果不看一些代码，很难判断出什么问题，但您不应该将输入或任何内容集中在要提交的值上。

如果您查看 firebug 中的“Net”选项卡，当您提交表单时，日期值是否是请求的一部分？

我无法在 jsfiddle 中重现该问题.. [http://fiddle.jshell.net/DqHxL/](http://fiddle.jshell.net/DqHxL/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:01:39.810

你是如何引用widgit的？是使用 dijit.byId 还是 document.getElementById。如果您使用 dijit，则必须使用 dijit.byId 而不是 getElement... Dojo 为所有内容创建阴影对象

# android - Android：防止日志中显示 SQL 错误

> ID：13630163
> 
> 赞同：1
> 
> 时间：2012-11-29T16:24:43.650
> 
> 标签：android, database, exception

当我执行无效的 sql 语句时，我得到一个错误恍惚和一个 sql 错误。我的错误跟踪被混淆了。但是 sql 错误文本显示的是完整的 sql 语句。我不希望用户看到我的数据库内部。是否可以禁用此消息？

谢谢欧里博尔

# alloy - 在 Alloy 中分发代币

> ID：13630173
> 
> 赞同：4
> 
> 时间：2012-11-29T16:25:05.787
> 
> 标签：alloy, formal-verification, model-checking

我正在关注 Daniel Jackson 的优秀著作（[软件抽象）](http://softwareabstractions.org/)中的一个示例，特别是他设置令牌环以选举领导者的示例。

我正在尝试扩展此示例（[Ring 选举](http://softwareabstractions.org/models/a4-models/chapter6/ringElection1.als)）以确保令牌（而不是仅限于一个）在规定的时间内传递给所有成员（并且每个成员只被选举一次，而不是多次）。但是（主要是由于我对合金缺乏经验），我在找出最佳方法时遇到了问题。最初我认为我可以与一些运算符一起玩（将 - 更改为 + ），但我似乎并没有完全击中头部。

下面是示例中的代码。我已经用问题标记了一些区域......感谢任何和所有帮助。我正在使用合金 4.2。

```
module chapter6/ringElection1 --- the version up to the top of page 181

open util/ordering[Time] as TO
open util/ordering[Process] as PO

sig Time {}

sig Process {
    succ: Process,
    toSend: Process -> Time,
    elected: set Time
    }

// ensure processes are in a ring
fact ring {
    all p: Process | Process in p.^succ
    }

pred init [t: Time] {
    all p: Process | p.toSend.t = p
    }

//QUESTION: I'd thought that within this predicate and the following fact, that I could 
//  change the logic from only having one election at a time to all being elected eventually.  
//  However, I can't seem to get the logic down for this portion.  
pred step [t, t': Time, p: Process] {
    let from = p.toSend, to = p.succ.toSend |
        some id: from.t {
            from.t' = from.t - id
            to.t' = to.t + (id - p.succ.prevs)
        }
    }

fact defineElected {
    no elected.first
    all t: Time-first | elected.t = {p: Process | p in p.toSend.t - p.toSend.(t.prev)}
    }

fact traces {
    init [first]
    all t: Time-last |
        let t' = t.next |
            all p: Process |
                step [t, t', p] or step [t, t', succ.p] or skip [t, t', p]
    }

pred skip [t, t': Time, p: Process] {
    p.toSend.t = p.toSend.t'
    }

pred show { some elected }
run show for 3 Process, 4 Time
// This generates an instance similar to Fig 6.4

//QUESTION: here I'm attempting to assert that ALL Processes have an election, 
//  however the 'all' keyword has been deprecated.  Is there an appropriate command in 
//  Alloy 4.2 to take the place of this?
assert OnlyOneElected { all elected.Time }
check OnlyOneElected for 10 Process, 20 Time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:23:43.917

1.  这个网络协议正是关于如何选举*单个*进程作为领导者，所以我不太明白你“最终选举所有进程”的想法的含义。
2.  而不是`all elected.Time`，您可以等效地编写`elected.Time = Process`（因为 的类型`elected`是`Process -> Time`）。这只是说`elected.Time`（在任何时间步骤选出的所有进程）正是所有进程的集合，这显然并不意味着“只选出一个进程”，正如您的断言名称所暗示的那样。

# jquery - 隐藏/显示切换 div

> ID：13630174
> 
> 赞同：0
> 
> 时间：2012-11-29T16:25:08.157
> 
> 标签：jquery, html, hide, toggle, show

请帮忙！我一直在试图弄清楚如何在特定的 DIV 已经打开时关闭它。

例如请查看：http: [//jsfiddle.net/WGRvw/](http://jsfiddle.net/WGRvw/)

如果我点击**BC**，DIV 应该会出现，但如果我再次点击它，DIV 应该会消失，但我不知道如何让它消失。另外，我只希望一次出现一个 DIV。

我试着做一个其他的：

> ```
>  $(function(){
>             $(document).ready(function () {
>                 $(".prov").click(function(){
>                     $(".clearfix").hide();
>                 }); 
> ```

```
 $('#BC').hide();
                $('#BC-show').click(function () {
                    if( $('#BC').toggle('slow')) {
                        return false;

                    }
                    else {
                        $('#BC').hide();
                    }
                });
                $('#AB').hide();
                $('#AB-show').click(function () {
                    if($('#AB').toggle('slow')) {
                        return false;

                    }
                    else {
                        $('#AB').hide();
                    }
                });
                });
            });

    }); 
```

感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:28:16.083

您似乎将两个事件附加到每个元素。

一个使用**className** 另一个使用**ID**

试试这个代码

```
$(function() {
    $(document).ready(function() {
        $('#BC, #AB').hide();

        $(".prov").click(function() {
            var id = $(this).attr('id').split('-')[0];
            $('.clearfix').not('#'+id).hide();
            $('#' + id).toggle('slow');
            return false;
        });
    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/WGRvw/150/)**

只需使用类附加事件并从中获取 id 并使用它来切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:31:19.460

如果您单击显示链接会发生什么情况是 div 被隐藏，然后您调用切换基本上每次都会再次显示 div。因此没有显示出预期的效果。因此，只需省略以下内容：

**更新**：

```
 $(document).ready(function () {

                $('#BC, #AB').hide();
                $('#BC-show').click(function () {
                    $('.clearfix:visible').not('#BC').hide()
                        $('#BC').toggle('slow');
                        return false;
                });
                $('#AB-show').click(function () {
                    $('.clearfix:visible').not('#AB').hide()
                        $('#AB').toggle('slow');
                        return false;
                });
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:30:48.430

我似乎您的第一个事件处理程序正在隐藏元素，然后正在调用切换。因此，切换显示元素，因为 `$(".prov").click(function(){ $(".clearfix").hide(); });`隐藏它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:32:23.227

```
$(function() {
    $('#BC, #AB').hide();

    $('.prov').click(function() {
        $('#'+this.id.replace('-show','')).toggle('slow').siblings('div').hide('slow');
        return false;
    });
}); 
```

[**小提琴**](http://jsfiddle.net/WGRvw/151/)

不需要两个 DOM 就绪函数，绑定到类的第一个函数隐藏元素，绑定到 ID 的第二个函数切换元素，现在当然是隐藏的，并且将始终显示。

# java - Rails 将 Rails 应用程序上传到乘客服务器

> ID：13630181
> 
> 赞同：0
> 
> 时间：2012-11-29T16:25:38.107
> 
> 标签：java, ruby-on-rails, deployment, java-web-start

我已将我的 Rails 应用程序从 svn 存储库上传到我的服务器。在我的本地主机中它工作正常，但是当我尝试通过 Chrome 访问时，我收到以下错误：

```
There appears to be a database problem.
Your config/database.yml may not be written correctly. Please check it and fix any errors.
Your database schema may be out of date or nonexistant. Please run rake db:migrate to ensure that the database schema is up-to-date.
The database server may not be running. Please check whether it's running, and start it if it isn't. 
```

我不知道该怎么做，因为这是我第一次尝试上传 Rails 项目，而且我正在做与远程服务器的本地主机相同的事情。

顺便说一句，我应该通过 ssh 连接运行 rails s 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:04:19.097

更新：首先要做的是接受有关部署的教育：[从 Rails 站点开始](http://rubyonrails.org/deploy)。

所以问题是，在您的服务器上，您需要设置一个数据库，就像在本地计算机上一样。从 SVN 签出代码只会得到应用程序，而不是数据库。

您在标题中提到您在服务器上设置了乘客。乘客是 Apache（或 Nginx）的一个模块，它取代了`rails s`您在开发中使用的命令。您需要在此乘客配置文件中设置`RailsEnv <something>`以确定应用程序启动和运行的内容和方式。

如果数据库服务器相同（例如两个平台上的 MySQL）并且环境相同（例如“开发”），并且如果`app/db/database.yml`文件被检入源代码控制，则向前跳过。

如果您的数据库和环境不同（例如，开发中的 SQLLite 和生产中的 MySQL），那么您需要在 database.yml 中为环境添加必要的配置——数据库名称、主机、端口、用户名、密码（并指定根据环境，您的 Gemfile 中正确的数据库 gem）。如果您要存储密码，我不建议您签入 database.yml 文件，但这是一个单独的主题。最后，您需要在服务器上的 database.yml 中拥有正确的数据库配置。

然后，您可以`bundle exec rake db:setup`从应用程序的根目录在服务器上运行。这将使用当前模式初始化数据库，并运行所需的任何种子.rb 设置。检查`rake -T`以查看您可能考虑的其他选项。

完成后，后续部署需要您从 SVN 签出最新代码，并通常重新启动应用程序（使用Passenger，这是通过`touch tmp/restart.txt`应用程序根目录中的命令完成的。如果您对数据库结构进行了更改，则在重新启动之前， 跑`bundle exec rake db:migrate`

哦，是的，在生产中，如果您使用默认环境，您还需要`bundle exec rake assets:precompile`第一次运行，如果您添加了图像、更改了 javascript/coffeescript 或 css/sass 文件，则每次都需要运行。

话虽如此，@rwilliams 关于 Capistrano 的评论绝对是您要考虑的事情。如您所见，部署很棘手，并且随着您的应用程序变得越来越大，您会希望它变得简单。Capistrano 允许您设置脚本，使部署成为类似`cap deploy`或`cap staging deploy:migrations`. 有很多东西要学，但值得努力。

# asp.net-mvc-4 - 在 Azure 计算模拟器中运行的 MVC4 Web API 中的 Global.Asax 错误 - 仅有时

> ID：13630185
> 
> 赞同：5
> 
> 时间：2012-11-29T16:25:39.453
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我昨天注意到，当我调试我的 Web 角色时，我的本地 Windows Azure 模拟器中发生了这个错误。但是部署的项目仍然可以在 Azure 上运行。今天，我部署的项目因同样的错误而失败。请帮忙！

我的 Global.axax.cs 文件的 Application_Start 方法中的此代码块：

```
GlobalConfiguration.Configuration.MessageHandlers
  .Add(new BasicAuthMessageHandler()
  {
     PrincipalProvider = new PrincipalProvider()
  }); 
```

抛出此错误：

类型违反了继承安全规则：“System.Net.Http.Formatting.JsonContractResolver”。派生类型必须要么与基类型的安全可访问性相匹配，要么难以访问。

当我开始调试时（这是一个 Azure Web 角色项目）。但只是有时（实际上它似乎每隔一次我调试时都会发生）......我所要做的就是修复它是停止并重新启动调试器。是什么导致了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:48:03.347

这与 Newtonsoft.Json 程序集有关。我从我的项目引用中删除了它，清理并重建了项目（为了很好的衡量标准），然后重新添加它并再次重建项目。错误消失了。

System.Net.Http.Formatting.JsonContractResolver 派生自 Newtonsoft.Json。另一个线程（此处：[http](http://forums.asp.net/t/1812274.aspx/3/10) ://forums.asp.net/t/1812274.aspx/3/10 ）通过从 GAC 中删除 Newtonsoft.Json 解决了同样的问题，因为它存在并且 System.Net.Http.Formatting不是。这显然解决了一个人的问题，尽管在我看来它似乎倒退了（为什么基类型不能在 GAC 中而派生类型不在？错误不是说问题是相反的吗？？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T18:00:50.353

Try updating your nuget packages. I updated mine, and it fixed the issue. I was also having this issue on azure service itself.

# html - 与旧的缓存控制 HTTP 标头相比，使用 HTML5 缓存有什么好处？

> ID：13630186
> 
> 赞同：0
> 
> 时间：2012-11-29T16:25:45.330
> 
> 标签：html, caching

我可以从创建和维护清单文件中获得什么，同时我可以发送可变和过期标头以将客户端缓存设置为 6 个月，然后将前缀附加到我的所有静态媒体 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:32:58.987

HTML5 应用程序缓存的作用稍有不同。它允许您有选择地存储应用程序的部分（或整体），以使其离线运行。

这不是关于节省带宽，而是关于使用离线应用程序。

**[阅读更多](http://www.html5rocks.com/en/tutorials/appcache/beginner/ "使用应用程序缓存的初学者指南 - HTML5 Rocks")**

# unicode - 如何将 ANSI 文本转换为 Unicode？

> ID：13630192
> 
> 赞同：2
> 
> 时间：2012-11-29T16:26:02.603
> 
> 标签：unicode, character, font-face, rtf

我想将 RTF 文本转换为 Unicode。在 RTF 字体表中，可以找到字体或字体的名称（例如 Arial Cyr、Courier Greek）和与之一起使用的字符集（0-255）。那么如何编写一个函数，将具有这些设置的字符代码（0-255）转换为 Unicode？

如我所见，希腊语、西尔语、土耳其语等后置标签会影响显示字符的字形，而字符集也会影响它。所以函数可以有这些输入参数：

> fontname 后缀、字体字符集、字符代码

但接下来是什么？还是我走错路了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:14:47.070

RTF 早在 Unicode 之前就发明了。它肯定不是 ANSI 文本，RTF 仅使用 ASCII，它使用字符集与以十六进制编码的非 ASCII 字符以及对字符集的引用的相当邪恶的混合。映射也不完美，许多 Unicode 代码点没有对应的字符集。

您将花费一生的时间来创建自己的 RTF 到 Unicode 转换器。利用现有的解决方案，大多数平台都有一个。在 Windows 上，这将是 RichEdit 控件。如果您使用 .NET，则特别简单，使用 RichTextBox 类，分配其 Rtf 属性并读回其 Text 属性。这是 utf-16 编码的 Unicode。

# cocos2d-iphone - CCSprite 动画时的帧数

> ID：13630194
> 
> 赞同：0
> 
> 时间：2012-11-29T16:26:04.597
> 
> 标签：cocos2d-iphone

我有一个 CCSpriteSheet 和一个 CCSpriteBatchNode 从 .png 和 .plist 文件完美运行的动画，但是，有没有办法知道为了启动另一个 CCAction 是哪个帧的动画？

例如，我有一个 30 帧的 CCAnimation，我想在动画位于第 15 帧时为另一个精灵设置动画。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:07:08.223

将动画拆分为多个部分并使用 CCSequence。例如：

```
CCAction *Action = [CCSequence actions:
                        [CCAnimate actionWithAnimation:myCCanimationPart1],
                        [CCCallBlock actionWithBlock:^
                         {
                            [myOtherSprite runAction:(otherAnimationAction)];
                         }],
                        [CCAnimate actionWithAnimation:myCCanimationPart2],
                        nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:43:03.940

我通常用我的一个游戏中的这个代码片段来满足这种需求：

```
float stall;
CCAnimation *secondAnim;
CCSprite *secondSprite;
NSString *dyingFx;
id sound = (self.alive ? [GENoopAction action] : 
                         [GEPlayFx actionWithSoundFile:dyingFx]
            );

id second = [CCSequence actions:
        [CCDelayTime actionWithDuration:stall]
        , [CCShow action]
        , sound
        , [CCAnimate actionWithAnimation:secondAnim]
        , [CCCallFunc actionWithTarget:self selector:@selector(hurtComplete)]
];
secondSprite.visible= NO;
[secondSprite runAction:second]; 
```

GEPlayFx 和 GENoopAction 是我为自己创建的玩具（CCActionInstant 实现）。

# java - “SVN 信息”命令中的“UNC 路径不受支持”错误

> ID：13630202
> 
> 赞同：0
> 
> 时间：2012-11-29T16:26:23.807
> 
> 标签：java, windows, svn, cmd, unc

我正在尝试运行命令：

`cmd.exe /X /C "svn --non-interactive info <file name>`

通过使用`commandline.class`由调用的 API (org.codehaus.plexus.util.cli) `SVNInfoCommand.class(org.apache.maven.scm.provider.svn.svnexe.command.info)`

当我传递 C:\ 驱动器中存在的文件名时，它工作正常。但是当我传递共享位置或网络驱动器中存在的文件名时，它会返回以下错误。错误：“不支持 UNC 路径。默认为 Windows 目录。svn：'。' 不是工作副本”

当前工作目录正在使用方法设置`setWorkingDirectory( String path )`，但我怀疑当我们使用共享位置（UNC 路径）时没有设置工作目录。

> 例如：\Test_Location\Test_File

当我传递位于共享驱动器中的文件名的“绝对路径”时，此命令可以正常工作。

> (\Test_Location\Test_File)

请告诉我为什么即使在设置工作目录后使用 UNC 路径时也会出现此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T07:24:48.397

默认情况下，Windows 命令处理器 ( `cmd.exe`) 不支持`UNC`路径。

您可以通过添加专用注册表项来更改此行为，如[Microsoft KB 156276](https://jeffpar.github.io/kbarchive/kb/156/Q156276/)中所述。

或者，您可以将您的 UNC 路径映射到标准驱动器号，然后使用它。

# jquery - 在 wpui 和 FF17 中单击选项卡锚时防止自动滚动

> ID：13630203
> 
> 赞同：1
> 
> 时间：2012-11-29T16:26:23.910
> 
> 标签：jquery, wordpress, anchor

在我的页面上，我有一些标签，我添加了一些 javascript，所以当它们被点击时，页面会加载标签的锚 URL，而不是简单地使用 AJAX 更改视图，但我现在想阻止浏览器自动滚动到锚地点。

做了一些研究后，我很确定我只需要添加几行，以便单击它时返回 false 或阻止默认值，但是，作为一个菜鸟，我不知道把它们放在哪里！？！

我知道这很厚颜无耻，但如果任何答案都可以包含完整的脚本（即下面的）和解决方案，那么我会更好地理解并希望也能学到一些有价值的教训:)

这是我正在使用的代码：

```
jQuery( function() {
   jQuery('.ui-tabs').bind( 'tabsselect', function( e, ui ) {
         window.location.hash = ui.tab.hash });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:01:47.383

发生锚点跳转是因为它是默认行为。为防止这种情况发生，您可能需要执行以下操作`event.preventDefault()`。我不知道如何使用 wpui.js，但您可以随时在[支持论坛](http://kav.in/forum/discussions/tagged/tabs)中提问。

**更新**
OP 在评论中为网站提供了问题[http://immaga.com/wills](http://immaga.com/wills)
适用于 chrome 23.0.1271.91、FF 16.0.1*但不适*用于 FF 17.0

# mysql - Mysql 多表和查询

> ID：13630204
> 
> 赞同：0
> 
> 时间：2012-11-29T16:26:33.650
> 
> 标签：mysql, sql

我在这个问题上有一个主要的大脑放屁，我希望有人可以看看这个并提供一些关于如何做到这一点的线索。

我有 4 个表 - 用户、book_copies、图书馆位置、书籍。

```
Create table book 
( id int not null auto incre, 
  name varchar(55), 
primary key(id) );

Create table book_copies 
( id int not null auto incre, 
  number of copies), 
primary key(id) );

Create table location 
( id int not null auto incre, 
  address varchar(55), 
primary key(id) );

Create table users 
( id int not null auto incre, 
  name varchar(55), 
primary key(id) ); 
```

我在 book_copies 和位置、 bookcopies 和用户、 book 和 book 副本之间有很多关系，并添加了 many-many 表

```
Create book_copies_locations 
( locationid int (11) not null, 
  bookcopyid int (11) not null, 
primary key(locationid,bookecopyid) , 
foreign key (locationid) references locations.id, 
foreign key (bookcopyid) references book_copies.id) );

Create table borrow 
( userid int (11) not null, 
  bookcopyid int (11) not null, 
  checkoutdate varchar(55), 
  duedate varchar(55), 
primary key(userid,bookecopyid) , 
foreign key (userid) references users.id, 
foreign key (bookcopyid) references book_copies.id) );

Create table book_copies_books 
( booksid int (11) not null, 
  bookcopyid int (11) not null, 
  checkoutdate varchar(55), 
  duedate varchar(55), 
primary key(booksid,bookecopyid) , 
foreign key (booksid) references books.id, 
foreign key (bookcopyid) references book_copies.id) ); 
```

我想做的是跟踪每本书的副本，并告诉它在什么位置？以及哪个用户检查了它？以及什么日期？

我添加了类似的东西

```
insert into borrow (userid,bookcopyid, checkoutdate, duedate) values( '1', '1', 'dec 18', 'jan 11')

insert into users (id,name) values( '1', 'bob')

insert into book_copies (id,number_of_copies) values( '2', '33')

insert into books (id,name) values( '1', 'harry potter')

insert into locations (id,address) values( '1', 'health science public library') 
```

我将如何查询以返回有 2 份哈利波特的副本，于 12 月 18 日退房并于 1 月 11 日到期，并且位于健康科学公共图书馆？

我是否使用多对多表正确设置表？我应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T05:35:17.223

我宁愿看到你的架构是这样的：

```
book (id, name)
book_copy (id, location_id, book_id, status) 
```

请注意，要计算给定书籍的副本，请查看 book_copy。在您的示例中， book_id = 1 将有两行。

`status`将是一个非规范化的值，以使您不必从结帐历史记录中确定最新状态。

用户然后签出这本书的副本：

```
book_checkout (id, user_id, book_copy_id, checkout_date, due_date) 
```

添加你的`user`和`location`表，你应该都准备好了。

正如其他人所指出的，让您的 UNIQUE 索引设置好。

# jquery - 使用 jQuery AJAX 从运行时加载的元素中检索值

> ID：13630216
> 
> 赞同：0
> 
> 时间：2012-11-29T16:27:01.667
> 
> 标签：jquery, ajax, runtime, loading

所以在我的页面上，我有一个可以加载所有内容的 Div。我使用 Ajax 这样做，像这样

`$('#content').load('pages/'+ page + '.html');`

在每个页面上，我都有一个 <h1> 告诉您在页面上的位置，id=location。我试图找到该值并将其放在文档标题中，但它总是返回“”。

```
document.title = 'My page - ' + $('#location').text(); 
```

我猜它与运行时的加载有关......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:35:40.620

尝试在`callback function`您的请求中执行此操作..

```
$('#content').load('pages/'+ page + '.html', function(){
    // Your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:37:10.157

是的，你是对的，它与在“运行时”加载有关。您可以将回调传递给加载内容后执行的加载函数。尝试以下操作：

```
$('#content').load('pages/'+ page + '.html', function(){
    document.title = 'My page - ' + $('#location').text();
}); 
```

# java - Selenium 隐式超时停止工作

> ID：13630218
> 
> 赞同：2
> 
> 时间：2012-11-29T16:27:07.630
> 
> 标签：java, api, selenium

我正在为我们的系统创建一个基于 Selenium API 的 API，该 API 通过 Web 浏览器进行控制（类似于您控制路由器和交换机的方式）。

此 API 中发生的一件事是检查页面上是否存在某些元素（取决于设置，它们可能退出也可能不退出，例如文本框或某些状态）。

我有这条线：

`driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);`

我让它工作得很好，直到在某个时间点运行它，并且 driver.findElement(By....); 从未超时（网页中缺少该元素）...我等待的时间最长约为半小时。

我正在运行 Ubuntu 12.04 x64 作为我的主机，Windows 7 作为我的来宾，在它上面我有我的 Selenium API 和用 Java 编写的控制产品的代码。当我将相同的代码移植到另一个 Windows VM 甚至不同的工作站时，它工作正常。虽然不在我的特定虚拟机上。

尝试“重新安装”eclipse，重新导入 Selenium JAR，从服务器中提取最新的工作代码......没有任何效果......

小伙伴们你们有什么想法？

将不胜感激任何回应。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:23:36.547

首先尝试使用fluentWait等待页面上的所有AJAX：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
        .ignoring(org.openqa.selenium.NoSuchElementException.class);
        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              }     ;
fluentWait(By.xpath(....blablabla..)).click();
//fluentWait(By.xpath(....blablabla..)).getText(); 
```

其次，尝试使用`Thead.sleep(1000);`作为替代

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

# erlang - 在 Erlang 中跟踪从邮箱中消费消息的操作

> ID：13630225
> 
> 赞同：5
> 
> 时间：2012-11-29T16:27:35.627
> 
> 标签：erlang, actor, trace

我浏览了`trace/3`Erlang 中的 BIF 文档。但是，我观察到的一个现象是，它不能用于跟踪邮箱中消息的消费情况。该标志`'receive'`仅在将消息添加到进程邮箱时进行跟踪。

有什么方法可以跟踪事件，例如使用`receive`构造从邮箱读取？如果不是，有什么理由不能做到这一点？一个程序中的大多数事件都可以跟踪，而从邮箱中读取消息却是不可跟踪的，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:52:18.580

没有这样的工具。您只能希望处理函数的调用跟踪。它在 OTP 应用程序中相当容易，因为您可以挂钩`handle_...`.

# html - 我可以在 CSS 中使用 onclick 效果吗？

> ID：13630229
> 
> 赞同：423
> 
> 时间：2012-11-29T16:27:58.680
> 
> 标签：html, css, onclick

我有一个想要在点击时更改的图像元素。

```
<img id="btnLeft"> 
```

这有效：

```
#btnLeft:hover {
    width:70px;
    height:74px;
} 
```

但我需要的是：

```
#btnLeft:onclick {
    width:70px;
    height:74px;
} 
```

但是，这显然行不通。是否有可能`onclick`在 CSS 中有行为（即不使用 JavaScript）？

* * *

## 回答 #1

> 赞同：479
> 
> 时间：2015-09-22T16:01:45.190

# 截至 2021 年的答案：

仅使用 CSS模拟实际*单击*事件的最佳方法（实际上是唯一方法*）（而不是仅将鼠标悬停在元素上或使元素处于活动状态，而您没有[mouseUp](https://developer.mozilla.org/en-US/docs/Web/Events/mouseup)）是使用复选框 hack。它的工作原理是通过标签的属性将 a 附加[`label`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label)到元素上。[`<input type="checkbox">`](https://www.w3.org/TR/html-markup/input.checkbox.html)`for=""`

此功能具有[广泛的浏览器支持](https://caniuse.com/#search=%3Achecked)（`:checked`伪类是 IE9+）。

将相同的值应用于`<input>`的 ID 属性和随附`<label>`的属性，您可以告诉浏览器在单击时使用伪类`for=""`重新设置标签的样式，这要归功于单击标签将选中和取消选中[`:checked`](https://www.w3.org/TR/css3-selectors/#checked)“关联” `<input type="checkbox">`。

`:active`* 您可以通过 IE7+ 中的or`:focus`伪类模拟“选定”事件（例如，对于通常较宽的按钮，您可以在:`50px`时更改其宽度），但这些不是真正的“单击”事件。它们在元素被选择的整个过程中都是“活动的”（例如通过键盘输入），这与真正的点击事件略有不同，后者通常会触发一个动作。`active``#btnControl:active { width: 75px; }``Tab``mouseUp`

* * *

## 复选框黑客的基本演示（您所要求的基本代码结构）：

```
label {
    display: block;
    background: lightgrey;
    width: 100px;
    height: 100px;
}

#demo:checked + label {
    background: blue;
    color: white;
}
```

```
<input type="checkbox" id="demo"/>
<label for="demo">I'm a square. Click me.</label>
```

在这里，我将标签放置在标记中的输入之后。这样我就可以使用[相邻的兄弟选择器](https://drafts.csswg.org/selectors-3/#adjacent-sibling-combinators)（`+`键）来仅选择紧跟在我的`#demo`复选框之后的标签。由于`:checked`伪类适用于复选框，`#demo:checked + label`因此仅在选中复选框时才适用。

# 单击时重新调整图像大小的演示，这就是您要问的：

```
#btnControl {
    display: none;
}

#btnControl:checked + label > img {
    width: 70px;
    height: 74px;
}
```

```
<input type="checkbox" id="btnControl"/>
<label class="btn" for="btnControl"><img src="https://placekitten.com/200/140" id="btnLeft" /></label>
```

话虽如此，但有*一些*坏消息。因为一个标签一次只能[与一个表单控件相关联](https://stackoverflow.com/questions/31944554/when-a-label-only-has-a-button-a-button-click-does-not-fully-trigger-the-lab/31944858#31944858)，这意味着您不能只在`<label></label>`标签内放一个按钮就可以收工了。但是，我们*可以*使用一些 CSS 使标签的外观和行为与 HTML 按钮的外观和行为非常接近。

## 模拟按钮点击效果的演示，超出您的要求：

```
#btnControl {
    display: none;
}

.btn {
    width: 60px;
    height: 20px;
    background: silver;
    border-radius: 5px;
    padding: 1px 3px;
    box-shadow: 1px 1px 1px #000;
    display: block;
    text-align: center;
    background-image: linear-gradient(to bottom, #f4f5f5, #dfdddd);
    font-family: arial;
    font-size: 12px;
    line-height:20px;
}

.btn:hover {
    background-image: linear-gradient(to bottom, #c3e3fa, #a5defb);
}

.btn:active {
    margin-left: 1px 1px 0;
    box-shadow: -1px -1px 1px #000;
    outline: 1px solid black;
    background-image: linear-gradient(to top, #f4f5f5, #dfdddd);
}

#btnControl:checked + label {
    width: 70px;
    height: 74px;
    line-height: 74px;
}
```

```
<input type="checkbox" id="btnControl"/>
<label class="btn" for="btnControl">Click me!</label>
```

本演示中的大部分 CSS 仅用于设置标签元素的样式。如果您实际上不需要*按钮*，并且任何旧元素就足够了，那么您可以删除此演示中的几乎所有样式，类似于我上面的第二个演示。

* * *

## 回答 #2

> 赞同：413
> 
> 时间：2012-11-29T16:29:28.933

您将得到的最接近的是[`:active`](https://developer.mozilla.org/en-US/docs/CSS/%3aactive)：

```
#btnLeft:active {
    width: 70px;
    height: 74px;
} 
```

但是，这只会在按住鼠标按钮时应用样式。*应用样式并使其在*单击时保持应用的唯一方法是使用一点 JavaScript。

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2013-06-23T04:58:29.860

您可以使用伪类`:target`来模拟点击事件，让我举个例子。

```
#something {
  display: none;
}

#something:target {
  display: block;
}
```

```
<a href="#something">Show</a>
<div id="something">Bingo!</div>
```

这是它的样子：http: [//jsfiddle.net/TYhnb/](http://jsfiddle.net/TYhnb/)

需要注意的一点是，这仅限于超链接，因此如果您需要在超链接以外的地方使用，例如按钮，您可能需要稍微修改一下，例如将超链接设置为看起来像按钮。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2014-01-18T06:20:27.690

如果你给元素 a`tabindex`那么你可以使用`:focus`伪类来模拟点击。

**HTML**

```
<img id="btnLeft" tabindex="0" src="http://placehold.it/250x100" /> 
```

**CSS**

```
#btnLeft:focus{
    width:70px;
    height:74px;
} 
```

[http://jsfiddle.net/NaTj5/](http://jsfiddle.net/NaTj5/)

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2012-11-29T16:34:00.160

编辑：在 OP 澄清他想要什么之前回答。下面是一个类似于javascripts onclick的onclick，不是`:active`伪类。

这只能通过 Javascript 或[Checkbox Hack来实现](http://css-tricks.com/the-checkbox-hack/)

复选框 hack 本质上是让您单击一个标签，“检查”一个复选框，允许您根据需要设置标签的样式。

[演示](http://dabblet.com/gist/1506530)_

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2016-01-19T19:23:22.773

[TylerH 给出](https://stackoverflow.com/a/32721572/2827823)了一个非常好的答案，我只需要给最后一个按钮一个视觉更新。

```
.btn {
    border-radius: 5px;
    padding: 10px 30px;
    box-shadow: 1px 1px 1px #000;
    background-image: linear-gradient(to bottom, #eee, #ddd);
}

.btn:hover {
    background-image: linear-gradient(to top, #adf, #8bf);
}

.btn:active {
    margin: 1px 1px 0;
    box-shadow: -1px -1px 1px #000;
}

#btnControl {
    display: block;
    visibility: hidden;
}
```

```
<input type="checkbox" id="btnControl"/>
<label class="btn" for="btnControl">Click me!</label>
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2017-09-24T20:07:14.010

没有（那个）hacky的纯CSS解决方案怎么样？

[![在此处输入图像描述](../Images/2c45a8f73e5baca7f10869e4d8cb4ad1.png)](https://i.stack.imgur.com/yqgFv.gif)

```
.page {
  position: fixed;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  background-color: #121519;
  color: whitesmoke;
}

.controls {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
}

.arrow {
  cursor: pointer;
  transition: filter 0.3s ease 0.3s;
}

.arrow:active {
  filter: drop-shadow(0 0 0 steelblue);
  transition: filter 0s;
}
```

```
<body class="page">
  <div class="controls">
    <div class="arrow">
      <img src="https://i.imgur.com/JGUoNfS.png" />
    </div>
  </div>
</body>
```

@TylerH 有很好的反应，但它是一个非常复杂的解决方案。对于那些只想要一个简单的“onclick”效果和纯 css 而没有一堆额外元素的人，我有一个解决方案。

我们将简单地使用 css 转换。您可能可以对动画做类似的事情。

诀窍是更改转换的延迟，使其在用户单击时持续。

```
.arrowDownContainer:active,
.arrowDownContainer.clicked {
  filter: drop-shadow(0px 0px 0px steelblue);
  transition: filter 0s;
} 
```

在这里，我还添加了“clicked”类，以便 javascript 在需要时也可以提供效果。我使用 0px 阴影过滤器，因为它会以这种方式突出显示给定的透明图形蓝色。

我这里有一个 0s 的过滤器，所以它不会生效。当效果被释放时，我可以添加带有延迟的过渡，这样它就会提供一个很好的“点击”效果。

```
.arrowDownContainer {
  cursor: pointer;
  position: absolute;
  bottom: 0px;
  top: 490px;
  left: 108px;
  height: 222px;
  width: 495px;
  z-index: 3;
  transition: filter 0.3s ease 0.3s;
} 
```

这允许我进行设置，以便当用户单击按钮时，它会突出显示蓝色，然后慢慢淡出（当然，您也可以使用其他效果）。

虽然您在此受限于要突出显示的动画是即时的，但它仍然提供了所需的效果。您可能会将此技巧与动画一起使用，以产生更平滑的整体过渡。

[![在此处输入图像描述](../Images/3fe56b632b50b1e3caf4ddfd06b854f5.png)](https://i.stack.imgur.com/q5MoQ.png)

[![在此处输入图像描述](../Images/867e5e2319bf5f4e9e900ff492bfc799.png)](https://i.stack.imgur.com/AaLUj.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-03-24T21:13:20.140

警告！下面特别简单的回答！:)

**实际上**，您可以*仅*使用 CSS（并且不使用复选框 hack）进行持续更改（例如在单击后出现并保持可见的块/弹出窗口），尽管此处的许多（否则正确）答案声称，只要因为您只需要在悬停期间保持持久性。

所以看看 Bojangles 和 TylerH 的答案，如果它们对你有用，但如果你想要一个简单且仅 CSS 的答案，在点击后保持块可见（甚至可以通过后续点击使块消失），那么看到这个解决方案。

我有类似的情况，我需要一个带有 onClick 的弹出 div，我无法添加任何 JS 或更改标记/HTML（真正的 CSS 解决方案），这可能需要一些警告。你不能使用 :target 技巧来创建一个漂亮的弹出窗口，除非你可以更改 HTML（添加一个 'id'），这样它就被淘汰了。

在我的情况下，弹出 div 包含在另一个 div 中，我希望弹出窗口出现在另一个 div 的顶部，这可以使用 :active 和 :hover 的组合来完成：

```
/* Outer div - needs to be relative so we can use absolute positioning */
.clickToShowInfo {
    position: relative;
}
/* When clicking outer div, make inner div visible */
.clickToShowInfo:active .info { display: block; }
/* And hold by staying visible on hover */
.info:hover {
    display: block;
}
/* General settings for popup */
.info {
    position: absolute;
    top: -5;
    display: none;
    z-index: 100;
    background-color: white;
    width: 200px;
    height: 200px;
} 
```

示例（以及允许单击弹出窗口以使其消失的示例）位于：

[http://davesource.com/Solutions/20150324.CSS-Only-Click-to-Popup-Div/](http://davesource.com/Solutions/20150324.CSS-Only-Click-to-Popup-Div/)

我还在下面插入了一个代码片段示例，但是在 stackoverflow 沙箱中的定位很奇怪，所以我不得不将“单击此处”文本放在 innerDiv 之后，这通常不需要。

```
/* Outer div - needs to be relative so we can use absolute positioning */
	.clickToShowInfo {
		position: relative;
	}
	/* When clicking outer div, make inner div visible */
	.clickToShowInfo:active .info { visibility: visible; }
	/* And hold by staying visible on hover */
	.info:hover {
		visibility: visible;
	}
	/* General settings for popup */
	.info {
		position: absolute;
		top: -10;
		visibility: hidden;
		z-index: 100;
		background-color: white;
		box-shadow: 5px 5px 2px #aaa;
		border: 1px solid grey;
		padding: 8px;
		width: 220px;
		height: 200px;
	}
	/* If we want clicking on the popup to close, use this */
	.info:active {
		visibility: hidden;	/* Doesn't work because DCEvent is :active as well */
		height: 0px;
		width: 0px;
		left: -1000px;
		top: -1000px;
	}
```

```
<p />
<div class="clickToShowInfo">
	<div class="info">
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua
	</div>
	Click here to show info
</div>
<p />
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-02-27T07:27:54.707

好的，这可能是一个旧帖子......但它是谷歌的第一个结果，并决定在这个上做你自己的组合......

**首先我将使用焦点**

这样做的原因是它适用于我展示的示例，如果有人想要鼠标按下类型事件然后使用**active**

HTML代码：

```
<button class="mdT mdI1" ></button>
<button class="mdT mdI2" ></button>
<button class="mdT mdI3" ></button>
<button class="mdT mdI4" ></button> 
```

CSS代码：

```
/* Change Button Size/Border/BG Color And Align To Middle */
    .mdT {
        width:96px;
        height:96px;
        border:0px;
        outline:0;
        vertical-align:middle;
        background-color:#AAAAAA;
    }
    .mdT:focus {
        width:256px;
        height:256px;
    }

/* Change Images Depending On Focus */
    .mdI1       {   background-image:url('http://placehold.it/96x96/AAAAAA&text=img1');     }
    .mdI1:focus {   background-image:url('http://placehold.it/256x256/555555&text=Image+1');   }
    .mdI2       {   background-image:url('http://placehold.it/96x96/AAAAAA&text=img2');     }
    .mdI2:focus {   background-image:url('http://placehold.it/256x256/555555&text=Image+2');   }
    .mdI3       {   background-image:url('http://placehold.it/96x96/AAAAAA&text=img3');     }
    .mdI3:focus {   background-image:url('http://placehold.it/256x256/555555&text=Image+3');   }
    .mdI4       {   background-image:url('http://placehold.it/96x96/AAAAAA&text=img4');     }
    .mdI4:focus {   background-image:url('http://placehold.it/256x256/555555&text=Image+4');   } 
```

**JS 小提琴链接：http:** [//jsfiddle.net/00wwkjux/](http://jsfiddle.net/00wwkjux/)

那么我为什么要在旧线程中发布这个，因为这里的示例各不相同，我想提供一个回馈给社区，这是一个有效的示例。

正如线程创建者已经回答的那样，他们只希望效果在点击事件期间持续。现在，虽然这并不完全满足这种需求，但它已经接近了。active 将在鼠标按下时动画，并且您需要持续更长时间的任何更改都需要使用 javascript 完成。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-08-06T13:20:17.547

我遇到了一个元素的问题，该元素在悬停时必须为红色，而在悬停时单击时必须为蓝色。要使用 css 实现这一点，您需要例如：

```
h1:hover { color: red; } 
h1:active { color: blue; }

<h1>This is a heading.</h1> 
```

我挣扎了一段时间，直到我发现 CSS 选择器的**顺序**是我遇到的问题。问题是我切换了位置并且活动选择器不起作用。然后我发现`:hover`要先走然后再走`:active`。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-30T19:18:33.253

我有以下用于鼠标悬停和鼠标单击的代码，它可以工作：

```
//For Mouse Hover
.thumbnail:hover span{ /*CSS for enlarged image*/
    visibility: visible;
    text-align:center;
    vertical-align:middle;
    height: 70%;
    width: 80%;
    top:auto;
    left: 10%;
} 
```

当您单击它时，此代码会隐藏图像：

```
.thumbnail:active span {
    visibility: hidden;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-22T10:19:42.123

在我们进入问题的核心之前，让我们把它弄好以备将来参考——你应该`click`用 JavaScript 处理一个事件。

```
document.querySelector('img').addEventListener('click', function() {
  this.classList.toggle('large');
});
```

```
.large {
  width: 75px;
  height: 75px;
}
```

```
<img src="https://i.stack.imgur.com/5FBwB.png" alt="Heart">
```

但是，如果由于某种原因不能使用 JavaScript，有两种常用方法可以模拟`click`事件并使用 CSS 创建切换按钮。

# 复选框黑客

[复选框黑客](https://css-tricks.com/the-checkbox-hack/)不是一个好习惯：

*   它在语义上不正确，这就是它被称为 hack 的原因。
*   它会导致键盘用户和屏幕阅读器的可访问性问题。
*   它限制了您的 HTML 结构，因为复选框必须是您要控制的元素的前一个兄弟。
*   您无法控制`<html>`and`<body>`元素。

# :目标选择器

[`:target`](https://developer.mozilla.org/en-US/docs/Web/CSS/:target)CSS 伪类表示具有匹配 URL 片段的唯一元素（*目标元素*） 。`id`正如您在以下示例中看到的，执行者的`href`值`#fade-out`匹配目标元素的值`id`。

```
a {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 5px;
  background: linear-gradient(#eee, #ddd);
  color: #333;
  font: bold 12px Verdana;
  text-shadow: 0 1px white;
  text-decoration: none;
}

p {
  font: 13px/1.5 Arial;
  padding: 1em;
  background: aqua;
  transition: 1s linear;
}

:target {
  opacity: 0;
}
```

```
<a href="#fade-out">Fade out</a>

<p id="fade-out">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
```

选择`:target`器可用于设置当前活动目标元素的样式。这意味着它就像一个单选按钮：只能同时选择给定组中的一个。

```
body {
  display: inline-grid;
  font: 16px "Times New Roman";
}

a {
  padding-left: 24px;
  margin: 0 2em 1em 0;
  justify-self: start;
  background: radial-gradient(circle 7px at 8px, #dedede 7px, transparent 8px);
  color: #333;
  text-decoration: none;
}

a:hover {
  background: radial-gradient(circle 7px at 8px, #ccc 7px, transparent 8px);
}

a:target {
  background: radial-gradient(circle 7px at 8px, dodgerBlue 4px, white 5px 6px, dodgerBlue 7px, transparent 8px);
}

div {
  grid-area: 1 / 2 / 7;
  width: 154px;
  height: 154px;
  text-align: center;
  background: aqua;
  color: black;
  border-radius: 50%;
  transition: 0.3s linear;
}

#rotate90:target ~ div {
  transform: rotate(90deg);
}

#rotate180:target ~ div {
  transform: rotate(180deg);
}

#rotate270:target ~ div {
  transform: rotate(270deg);
}

#rotate360:target ~ div {
  transform: rotate(360deg);
}
```

```
<a href="#rotate0" id="rotate0">0°</a>
<a href="#rotate90" id="rotate90">90°</a>
<a href="#rotate180" id="rotate180">180°</a>
<a href="#rotate270" id="rotate270">270°</a>
<a href="#rotate360" id="rotate360">360°</a>

<div>•&lt;/div>
```

**问**：如何创建切换按钮？
**答：**基本上，它是这样工作的：您使用两个超链接，一个“doer”和一个“undoer”。doer 指向目标元素，而指向无处的 undoer 则反转效果。

以下演示展示了`:target`选择器的潜力，并让您了解如何使用它。

## 为上一个兄弟设置样式

```
div {
  width: 200px;
  height: 200px;
  background: #dedede;
  transition: 0.3s ease-in-out;
}

a {
  display: inline-flex;
  align-items: center;
  column-gap: 1ch;
  margin-top: 1em;
  font: 16px Arial;
  color: #333;
  text-decoration: none;
}

a::before {
  content: "✔";
  font-size: 13px;
  width: 1.2em;
  line-height: 1.2em;
  text-align: center;
  background: #dedede;
  color: transparent;
}

.undoer::before {
  background: dodgerBlue;
  color: white;
  text-shadow: 0 2px black;
}

.doer:hover::before {
  background: #ccc;
}

:target {
  border-radius: 50%;
}

.undoer,
:target ~ .doer {
  display: none;
}

:target ~ .undoer {
  display: inline-flex;
}
```

```
<div id="circle"></div>

<a href="#circle" class="doer">Circle</a>
<a href="#square" class="undoer">Circle</a>
```

## 为下一个兄弟姐妹设置样式

链接甚至可以针对相同的锚元素。

```
body {
  text-align: center;
}

h1 {
  font-size: 24px;
}

a {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 5px;
  margin-bottom: 1em;
  background: linear-gradient(#eee, #ddd);
  color: #333;
  font: bold 12px Verdana;
  text-shadow: 0 1px white;
  text-decoration: none;
}

[class]:not(.yellow) {
  color: white;
  text-shadow: 0 1px black;
}

.red {
  background: red;
}

.orange {
  background: orange;
}

.yellow {
  background: yellow;
}

.green {
  background: green;
}

.blue {
  background: blue;
}

.indigo {
  background: indigo;
}

.violet {
  background: violet;
}

div {
  width: 600px;
  height: 400px;
  margin: 0 auto;
  background: #eee;
  transition: 0.3s ease-in-out;
}

[class],
:target {
  display: none;
}

:target + a {
  display: inline-block;
}

#red:target ~ div {
  background: red;
}

#orange:target ~ div {
  background: orange;
}

#yellow:target ~ div {
  background: yellow;
}

#green:target ~ div {
  background: green;
}

#blue:target ~ div {
  background: blue;
}

#indigo:target ~ div {
  background: indigo;
}

#violet:target ~ div {
  background: violet;
}
```

```
<h1></h1>

<a href="#red" id="red">Red</a>
<a href="#cancel" class="red">Red</a>

<a href="#orange" id="orange">Orange</a>
<a href="#cancel" class="orange">Orange</a>

<a href="#yellow" id="yellow">Yellow</a>
<a href="#cancel" class="yellow">Yellow</a>

<a href="#green" id="green">Green</a>
<a href="#cancel" class="green">Green</a>

<a href="#blue" id="blue">Blue</a>
<a href="#cancel" class="blue">Blue</a>

<a href="#indigo" id="indigo">Indigo</a>
<a href="#cancel" class="indigo">Indigo</a>

<a href="#violet" id="violet">Violet</a>
<a href="#cancel" class="violet">Violet</a>

<div></div>
```

## 替换元素

您可能已经注意到，您可以完全用另一个元素替换一个元素。

```
.undoer,
:target {
  display: none;
}

:target + .undoer {
  display: inline;
}
```

```
<a href="#on" title="Turn on the light" id="on"><img src="https://i.stack.imgur.com/nuKgJ.png" alt="Light on"></a>
<a href="#off" title="Turn off the light" class="undoer"><img src="https://i.stack.imgur.com/3DLVM.png" alt="Light off"></a>
```

您甚至可以在锚点内嵌套块级元素。

如果您希望在从执行者切换到撤消者时具有过渡效果，请`position: absolute`在第一个和`visibility: hidden`第二个上使用。

```
a {
  display: block;
  box-sizing: border-box;
  width: 64px;
  padding-left: 33px;
  border-radius: 16px;
  background: radial-gradient(circle 12px, white 100%, transparent calc(100% + 1px)) #ccc -16px;
  font: bold 12px/32px Verdana;
  color: white;
  text-shadow: 0 1px black;
  text-decoration: none;
  transition: 0.3s ease-in-out;
  transition-property: padding-left, background-color, background-position;
}

#start {
  position: absolute;
}

:target,
:target + .undoer {
  padding-left: 8px;
  background-color: dodgerBlue;
  background-position: 16px;
}

.undoer,
:target {
  visibility: hidden;
}

:target + .undoer {
  visibility: visible;
}
```

```
<a href="#start" id="start">OFF</a>
<a href="#stop" class="undoer">ON</a>
```

## 隐藏和显示内容

这是一个导航菜单。

```
html,
body {
  margin: 0;
  padding: 0;
}

header {
  display: flex;
  line-height: 50px;
  background: linear-gradient(#999, #333);
  color: white;
}

a {
  color: inherit;
  text-decoration: none;
}

header > a,
header h1 {
  font-size: 26px;
  font-family: 'Times New Roman';
  text-shadow: 0 3px black;
}

header > a {
  width: 50px;
  text-align: center;
}

header h1 {
  margin: 0;
  letter-spacing: 1px;
}

nav {
  position: absolute;
  top: 50px;
  background: #333;
  visibility: hidden;
  transform: translateX(-100%);
  transition: 280ms ease-out 120ms;
}

nav a {
  display: block;
  padding: 1em;
  font: bold 12px Verdana;
  transition: inherit;
}

nav a:not(:last-child) {
  border-bottom: 1px solid black;
}

nav a:hover,
#current {
  background: #A00;
}

.undoer,
:target {
  display: none;
}

:target + .undoer {
  display: block;
}

:target ~ nav {
  visibility: visible;
  transform: none;
}

main {
  padding: 16px;
  font: 13px Arial;
  color: #333;
}

main h1 {
  font-size: 1.5em;
}

p {
  line-height: 1.5;
}
```

```
<header>
  <a href="#open" id="open">☰&lt;/a>
  <a href="#close" class="undoer">✕&lt;/a>
  <h1> Music School</h1>
  <nav>
    <a href="#" id="current">Home</a>
    <a href="#">Instruments</a>
    <a href="#">Online Lessons</a>
    <a href="#">Register</a>
    <a href="#">Contact</a>
  </nav>
</header>
<main>
  <h1>Home</h1>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</main>
```

这是一个常见问题解答页面。

```
body {
  font: 16px Arial;
  color: #333;
  max-width: 600px;
  margin: 1em auto;
}

h1 {
  text-align: center;
  font-family: "Times New Roman";
}

p {
  display: none;
  padding: 12px;
  border: 2px solid #dedede;
  border-top: 0;
  margin: 0;
  font-size: 13px;
  line-height: 1.5;
}

a {
  display: flex;
  align-items: center;
  column-gap: 12px;
  padding: 12px;
  margin-top: 1em;
  background: #dedede;
  color: inherit;
  font-weight: bold;
  line-height: 1.5;
  text-shadow: 0 1px white;
  text-decoration: none;
}

a::before {
  content: "➕";
  padding: 3px;
  background: #eee;
  font-weight: initial;
}

a[href="#close"]::before {
  content: "➖";
}

a:hover::before {
  background: #fff;
}

a[href="#close"],
a:target {
  display: none;
}

a:target + a {
  display: flex;
}

a:target + a + p {
  display: block;
}
```

```
<h1>Frequently Asked Questions</h1>

<a href="#open1" id="open1">How do we get more energy from the sun?</a>
<a href="#close">How do we get more energy from the sun?</a>
<p>Dwindling supplies of fossil fuels mean we’re in need of a new way to power our planet. Our nearest star offers more than one possible solution. We’re already harnessing the sun’s energy to produce solar power. Another idea is to use the energy in sunlight to split water into its component parts: oxygen, and hydrogen, which could provide a clean fuel for cars of the future. Scientists are also working on an energy solution that depends on recreating the processes going on inside stars themselves – they’re building a nuclear fusion machine. The hope is that these solutions can meet our energy needs.</p>

<a href="#open2" id="open2">What's so weird about prime numbers?</a>
<a href="#close">What's so weird about prime numbers?</a>
<p>The fact you can shop safely on the internet is thanks to prime numbers – those digits that can only be divided by themselves and one. Public key encryption – the heartbeat of internet commerce – uses prime numbers to fashion keys capable of locking away your sensitive information from prying eyes. And yet, despite their fundamental importance to our everyday lives, the primes remain an enigma. An apparent pattern within them – the Riemann hypothesis – has tantalised some of the brightest minds in mathematics for centuries. However, as yet, no one has been able to tame their weirdness. Doing so might just break the internet.</p>

<a href="#open3" id="open3">Can computers keep getting faster?</a>
<a href="#close">Can computers keep getting faster?</a>
<p>Our tablets and smartphones are mini-computers that contain more computing power than astronauts took to the moon in 1969\. But if we want to keep on increasing the amount of computing power we carry around in our pockets, how are we going to do it? There are only so many components you can cram on to a computer chip. Has the limit been reached, or is there another way to make a computer? Scientists are considering new materials, such as atomically thin carbon – graphene – as well as new systems, such as quantum computing.</p>

<a href="#open4" id="open4">When can I have a robot butler?</a>
<a href="#close">When can I have a robot butler?</a>
<p>Robots can already serve drinks and carry suitcases. Modern robotics can offer us a “staff” of individually specialised robots: they ready your Amazon orders for delivery, milk your cows, sort your email and ferry you between airport terminals. But a truly “intelligent” robot requires us to crack artificial intelligence. The real question is whether you’d leave a robotic butler alone in the house with your granny. And with Japan aiming to have robotic aides caring for its elderly by 2025, we’re thinking hard about it now.</p>

<a href="#open5" id="open5">What's at the bottom of the ocean?</a>
<a href="#close">What's at the bottom of the ocean?</a>
<p>Ninety-five per cent of the ocean is unexplored. What’s down there? In 1960, Don Walsh and Jacques Piccard travelled seven miles down, to the deepest part of the ocean, in search of answers. Their voyage pushed the boundaries of human endeavour but gave them only a glimpse of life on the seafloor. It’s so difficult getting to the bottom of the ocean that for the most part we have to resort to sending unmanned vehicles as scouts. The discoveries we’ve made so far – from bizarre fish such as the barreleye, with its transparent head, to a potential treatment for Alzheimer’s made by crustaceans – are a tiny fraction of the strange world hidden below the waves.</p>

<a href="#open6" id="open6">What's at the bottom of a black hole?</a>
<a href="#close">What's at the bottom of a black hole?</a>
<p>It’s a question we don’t yet have the tools to answer. Einstein’s general relativity says that when a black hole is created by a dying, collapsing massive star, it continues caving in until it forms an infinitely small, infinitely dense point called a singularity. But on such scales quantum physics probably has something to say too. Except that general relativity and quantum physics have never been the happiest of bedfellows – for decades they have withstood all attempts to unify them. However, a recent idea – called M-Theory – may one day explain the unseen centre of one of the universe’s most extreme creations.</p>

<a href="#open7" id="open7">How do we solve the population problem?</a>
<a href="#close">How do we solve the population problem?</a>
<p>The number of people on our planet has doubled to more than 7 billion since the 1960s and it is expected that by 2050 there will be at least 9 billion of us. Where are we all going to live and how are we going to make enough food and fuel for our ever-growing population? Maybe we can ship everyone off to Mars or start building apartment blocks underground. We could even start feeding ourselves with lab-grown meat. These may sound like sci-fi solutions, but we might have to start taking them more seriously.</p>
```

## 切换到全新的样式表

您可以定位元素及其所有后代元素并为其设置样式。例如，让我们定位`<body>`元素并切换暗/亮模式。

```
body,
a,
h2 {
  transition: 0.3s linear;
}

body {
  font: 13px Arial;
  background: white;
  color: #333;
}

a {
  font-size: 16px;
  text-decoration: none;
}

main {
  column-count: 3;
  column-gap: 2em;
  padding: 0 1em;
}

h1 {
  column-span: all;
  text-align: center;
}

h2:nth-of-type(1) {
  margin-top: 0;
}

p {
  line-height: 1.5;
}

:target {
  background: #333;
  color: white;
}

.doer {
  position: absolute;
}

.undoer,
:target .doer {
  visibility: hidden;
  opacity: 0;
}

:target .undoer {
  visibility: visible;
  opacity: 1;
}

:target h2:nth-of-type(1) {
  color: red;
}

:target h2:nth-of-type(2) {
  color: green;
}

:target h2:nth-of-type(3) {
  color: blue;
}
```

```
<body id="dark">
<a href="#dark" title="Dark mode" class="doer"></a>
<a href="#light" title="Light mode" class="undoer">☀️&lt;/a>
<main>
<h1>Primary Colors</h1>
<h2>Red</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<h2>Green</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<h2>Blue</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</main>
</body>
```

您可以使用选择器做的可能性和有趣的事情列表中缺少任何功能`:target`吗？请在下面的评论中分享。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2019-03-27T17:11:57.993

您可以使用`:target`

或按类名过滤，使用`.classname:target`

或使用 id 名称过滤`#idname:target`

```
#id01:target {      
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.msg {
    display:none;
}

.close {        
    color:white;        
    width: 2rem;
    height: 2rem;
    background-color: black;
    text-align:center;
    margin:20px;
}
```

```
 <a href="#id01">Open</a>

<div id="id01" class="msg">    
    <a href="" class="close">&times;</a>
    <p>Some text. Some text. Some text.</p>
    <p>Some text. Some text. Some text.</p>
</div>
```

# php - 在 PHP 中使用 Soap 添加 Jira Worklog 注释

> ID：13630236
> 
> 赞同：2
> 
> 时间：2012-11-29T16:28:15.290
> 
> 标签：php, soap, jira

我正在尝试使用 Soap 服务向 Jira 中的工作日志添加评论。如果我注释掉第一行，这段代码会添加一个没有注释的工作日志。

```
$worklog['comment'] = 'this is a test comment';

$worklog['startDate'] = strtotime(date('d M y H:i:s', 
mktime( date("H", $TimeNow), 
    date("i", $TimeNow),
    date("s", $TimeNow), 
    date("n", $Date), 
    date("j", $Date),
    date("Y", $Date) )));

$worklog['timeSpent'] = $Time . "m";

$worklog = $connClient->addWorklogAndRetainRemainingEstimate($login, $issue->key, $worklog); 
```

任何关于如何使用 Soap 服务和 PHP 向 Jira 中的工作日志添加评论的想法将不胜感激。

# python - Django中locmem缓存的内容？

> ID：13630237
> 
> 赞同：11
> 
> 时间：2012-11-29T16:28:18.023
> 
> 标签：python, django, caching

我试图将 locmem 缓存用于我的 Web 应用程序，但找不到任何有关如何查看缓存内容的文档。我的意思是我想检查我的密钥是否在缓存中正确设置。如何列出此缓存中的所有键，或者这是否可能？

我发现了“ [Get list of Cache Keys in Django](https://stackoverflow.com/questions/9048257/get-list-of-cache-keys-in-django?rq=1) ”这个问题，但它是关于 memcache，而不是 locmem 缓存。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T16:42:48.500

关于 locmem 的事情是它实际上只是一个本地内存存储。查看[代码](https://github.com/django/django/blob/master/django/core/cache/backends/locmem.py)，很明显数据只是保存在该模块中的模块级变量`_caches`中。所以你可以做

```
from django.core.cache.backends import locmem
print(locmem._caches) 
```

# java - jdbc prepareStatement的数字通配符？

> ID：13630239
> 
> 赞同：3
> 
> 时间：2012-11-29T16:28:19.420
> 
> 标签：java, mysql, jdbc

我正在使用 JDBC 中的 prepareStatement 进行查询。我有时会插入一个“数字通配符”而不是实际数字。

**考虑这样的查询：** Domains: a int, b text;

```
pStatement = 
    dbConnection.prepareStatement("SELECT * FROM R1 WHERE a LIKE ? AND b LIKE ?"); 
```

**有时我想：**

```
pStatement.setInt(1, 10);
pStatement.setString(2,"%");
pStatement.exequteQuery(); 
```

这没问题，因为通配符是一个字符串。

**其他时候我想：**

```
pStatement.setInt(1, ANY_INT_SHOULD_BE_VALID);
pStatement.setString(2, "Hello");
pStatement.exequteQuery(); 
```

那是行不通的。我可以更改查询并使用即“a <> 0”，但这需要额外的代码并且使得使用prepareStatement 有点不必要。

有没有办法在*不改变实际查询*的情况下解决这个问题，只改变插入的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:37:45.290

> 我可以更改查询并使用即“a <> 0”

根据您的要求，这应该是`a IS NOT NULL`.

> 但这需要额外的代码，并且在某种程度上没有必要使用 prepareStatement。

PreparedStatement 对于 VARCHAR 列是最必要的，并且似乎在所有场景中都存在。

> pStatement.setString(2,"%");

这不会匹配所有字符串，因为`LIKE`需要操作符`%`来获取其特殊含义。

> 有没有办法在不改变实际查询的情况下解决这个问题，只改变插入的值？

不，IMO，由于要求根本不同，您需要相应地进行查询。

# mysql - Wordpress $wpdb->get_results 只返回一行

> ID：13630241
> 
> 赞同：4
> 
> 时间：2012-11-29T16:28:25.050
> 
> 标签：mysql, database, wordpress

我完全糊涂了。我运行 2 个相同的查询，一个使用 $wpdb，另一个通过 mysql_query（也通过 phpmyadmin 检查）第一个查询只返回一行：

```
$wpdb->get_results("SELECT * FROM wp_terms WHERE slug LIKE '%info%' ORDER BY name ASC"); 
```

mysl_query 返回 42 行。如果通过 phpmyadmin 运行查询，结果相同。

```
$con=mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
  mysql_selectdb(DB_NAME,$con);
  $res=mysql_query("SELECT * FROM wp_terms WHERE slug LIKE  '%info%' ORDER BY name ASC",$con);
  while($obj=mysql_fetch_object($res)) {
    var_dump($obj);
  } 
```

怎么会这样 ？？

```
$wpdb->show_errors();
$wpdb->print_error(); 
```

显示没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:42:07.460

尝试：

```
$wpdb->get_results("SELECT * FROM $wpdb->terms WHERE slug LIKE '%info%' ORDER BY name ASC", ARRAY_A ); 
```

您是否有可能干扰数据库的插件？

# android - Android - 将图像存储到 SQLite 的最佳方式是什么？

> ID：13630242
> 
> 赞同：1
> 
> 时间：2012-11-29T16:28:25.693
> 
> 标签：android, image, sqlite

我正在开发一个离线应用程序，但我没有从用户的图库中获取任何图片。但我想向我手动插入的用户显示图像。

我能想到的唯一解决方案是将这些图像放入`drawable`，然后将其保存到 sqlite 数据库（我不确定如何）。这可以做到吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:46:12.757

如果您愿意将图像存储在可绘制文件夹中，您可以在数据库中存储对它们的引用。只需存储一个类似的字符串`com.example.yourapp:drawable/imagefilename`并使用它来显示图像，其中`yourString`包含来自数据库的字符串..

```
int imageResource = this.getResources().getIdentifier(yourString, null, null);
yourimageview.setImageResource(imageResource); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T12:06:52.877

您可以为此使用插入 blob

```
 public void insertImg(int id , Bitmap img ) {   

    byte[] data = getBitmapAsByteArray(img); // this is a function

    insertStatement_logo.bindLong(1, id);       
    insertStatement_logo.bindBlob(2, data);

    insertStatement_logo.executeInsert();
    insertStatement_logo.clearBindings() ;

}

 public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, outputStream);       
    return outputStream.toByteArray();
} 
```

# c# - Asp.net 隐藏字段在后面的代码中没有值，但 *is* 在回发后保留值

> ID：13630243
> 
> 赞同：1
> 
> 时间：2012-11-29T16:28:26.863
> 
> 标签：c#, asp.net, webforms

在我的 ASCX 中，我有一个 asp.net 隐藏字段定义为`<asp:HiddenField ID="hdnNewAsset" runat="server" />`.

在后面的代码中，我有以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        _service = new ArticleDataService(PortalId);

        if (!IsPostBack)
        {
            string rawId = Request[ArticleQueryParams.ArticleId];
            DisplayArticleDetails(rawId);
        }

        if (hdnNewAsset.Value.Trim() != string.Empty)
            ProcessNewAsset();
    } 
```

现在，在我的前端，我有一个 javascript 函数来响应事件并设置隐藏字段并触发回发：

```
function assetSelected(assetGuid) {
    $('input[id*="hdnNewAsset"]').val(assetGuid);
    __doPostBack()
} 
```

发生的事情是我的隐藏字段被设置在标记中（chrome显示`[ <input type=​"hidden" name=​"dnn$ctr466$Main$ctl00$hdnNewAsset" id=​"dnn_ctr466_Main_ctl00_hdnNewAsset" value=​"98d88e72-088c-40a4-9022-565a53dc33c4">​ ]`为`$('input[id*="hdnNewAsset"]')`）。

但是，当回发发生时，`hdnNewAsset.Value`是一个空字符串。

更令人费解的是，在`Page_Load` `Request.Params["dnn$ctr466$Main$ctl00$hdnNewAsset"]`shows的开头`98d88e72-088c-40a4-9022-565a53dc33c4`和回发之后，我的隐藏字段具有相同的值（因此隐藏字段在回发中持续存在），但我无法通过`hdnNewAsset.Value`.

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:02:52.687

好的，我发现了问题所在。

问题是上面发布的代码是 ASCX 用户控件的一部分。`Page_Load`在父控件事件期间，该用户控件被动态加载到 asp.net 占位符中。

因此，似乎由于这两个调用都在`Page_Load`它们各自的调用中，因此内部控件没有将其值绑定在内部控件的`page_load`. 修改它，以便加载我的内部控件`Page_Init`而不是`Page_Load`修复所有绑定。

不确定我是否以对公众有意义的方式写了这些。

* * *

**编辑**：似乎[MSDN 文档的这一部分与](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)我的问题有关：

> 如果控件是在运行时动态创建或在数据绑定控件的模板中以声明方式创建的，则它们的事件最初不会与页面上其他控件的事件同步。例如，对于在运行时添加的控件，Init 和 Load 事件在页面生命周期中发生的时间可能比以声明方式创建的控件的相同事件要晚得多。因此，从它们被实例化的那一刻起，动态添加的控件和模板中的控件一个接一个地引发它们的事件，直到它们赶上它被添加到 Controls 集合中的事件。

# c# - 读取后页脚仍然有效（rtf 公式文件）

> ID：13630245
> 
> 赞同：1
> 
> 时间：2012-11-29T16:28:32.190
> 
> 标签：c#, ms-word, footer, rtf

一个 rtf 文档由数据库应用程序生成，其中包含来自该数据库的信息。我创建了一个软件（C#，net framework 4.5）来获取数据，然后将其记录到 Excel 文件中。

我必须阅读 rtf 文件的页脚，这是我能做的。

但是，当软件访问页脚时，当页脚/页眉处于活动状态时，文档视图是相同的（当您在 Word 下双击页眉/页脚访问时效果相同。此操作操作在页眉上添加回车（Word 添加这个来输入一些东西），这个 \r 导致有额外的页面。

这里的代码：

```
Sections oSection = cGlobalVar.varWordApp.ActiveDocument.Sections;
HeaderFooter oFooter = oSection[1].Footers[WdHeaderFooterIndex.wdHeaderFooterFirstPage];

Range oRange = oFooter.Range.Tables[1].Range;//<= at this point, footer is accessible, the empty header of original document has a\r character, causing 2nd page to document that I don't want

strBuffer = oRange.Text;//<= information I need

oRange = oSection[1].Range.Tables[1].Range;//<= try to affect something else to oRange
oFooter = null;//<= try to null the object
oSection = null;//<= same as above

//cGlobalVar.varWordDoc.ActiveWindow.View.Type = WdViewType.wdPrintView;//<= try to use this to return to a normal state 
```

我试图操纵 Word 来找到一些东西来回到我的原始文档（一页），但没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:39:46.990

清空对象不会清除其内容。如果要清除它，请更改范围对象的文本

```
oFooter.Range.Text = "";
oSection.Range.Text = ""; 
```

注意：这些对象有一个引用类型。这意味着该变量指向实际对象，该对象位于其他位置。如果将变量设置为 null，则只是失去了到对象的链接，但不会更改对象。请参阅我对 SO 问题的回答[将类型引用类型设置为 null 不会影响复制的类型？](https://stackoverflow.com/a/8069712/880990)

* * *

**更新**

我在 Word 中做了一个实验，使用 VBA 宏来读取页脚的表格范围，就像您在上面所做的那样。它不会改变单词的视图类型。

```
Sub Macro1()
    Dim oSection As Sections
    Dim oFooter As HeaderFooter
    Dim oRange As Range
    Dim strBuffer As String

    Set oSection = Application.ActiveDocument.Sections
    Set oFooter = oSection(1).Footers(WdHeaderFooterIndex.wdHeaderFooterPrimary)
    Set oRange = oFooter.Range.Tables(1).Range

    strBuffer = oRange.Text
    Debug.Print strBuffer
End Sub 
```

# javascript - jQuery动画回调没有按顺序触发

> ID：13630247
> 
> 赞同：4
> 
> 时间：2012-11-29T16:28:42.753
> 
> 标签：javascript, jquery, callback, jquery-animate

```
var slideWidth = $('#carousel #slideContainer .slide').width();
var slidePos = (($('ul#carousel_nav li').index(this)) * slideWidth);
slidePos = Math.abs(slidePos) * -1;

$('#carousel #slideContainer .slide .slideContents').stop();
$('#carousel #slideContainer').stop();

    $('#carousel #slideContainer .slide .slideContents').fadeOut( 500, function() 
    {
        $('#carousel #slideContainer').animate({ left: slidePos }, 1000, function() 
        {
            $('#carousel #slideContainer .slide .slideContents').fadeIn( 500 );
        });
    }); 
```

构建一个具有动画/回调链的 jQuery 滚动器。单击按钮时，`div '#carousel #slideContainer .slide .slideContents`应该淡出并且其容器`div '#carousel #slideContainer .slide .slideContents`移动 n 个像素（slidePos）

执行时，动画回调并不总是在前一个动画结束时触发，整个序列变得不连贯？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:54:54.660

在我看来，pitaj 说的很管用

```
var slideWidth = $('#carousel #slideContainer .slide').width();
var slidePos = (($('ul#carousel_nav li').index(this)) * slideWidth);
slidePos = Math.abs(slidePos) * -1;

$('#carousel #slideContainer .slide .slideContents').stop(true);
$('#carousel #slideContainer').stop(true);

$('#carousel #slideContainer .slide .slideContents').fadeOut( 500, function() 
{
    $('#carousel #slideContainer').animate({ left: slidePos }, 1000, function() 
    {
        $('#carousel #slideContainer .slide .slideContents').fadeIn( 500 );
    });
}); 
```

# ios - 如何在 iOS 应用程序中显示最近查看的项目，例如 eBay

> ID：13630251
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:07.540
> 
> 标签：ios

我正在为 iOS 开发一个电子商务应用程序。我想在我的应用程序的一个视图中显示最近查看的产品。我想做与 eBay 在他们的 iOS 应用程序中所做的一样的事情。每当我查看某个产品或搜索某个产品时，它都会显示在最近查看的表格中。

如何在我的 iOS 应用程序中执行此操作？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:41:26.910

您需要跟踪用户查看或搜索的任何产品。保留产品 ID 列表或任何适当的列表。根据您的需要将此列表存储在 NSUserDefaults 或数据库中，以便每次运行应用程序时都可以使用数据。

使用此列表在“最近查看的产品”视图中显示这些产品。

# magento - Magento“客户/帐户导航”

> ID：13630253
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:11.247
> 
> 标签：magento

我想在顶部以及客户登录后的一侧包含来自“我的帐户”（“customer/account_navigation”）的链接 - 因此这些链接可以直接在标题中访问。

我创造了

```
<reference name="header">
    <block type="customer/account_navigation" name="customer_account_navigation_header" template="customer/account/navigation.phtml"/>
</reference> 
```

在我的`local.xml`，然后用

`$this->getChildHtml('customer_account_navigation_header');`.

我错过了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:46:54.580

你还记得`echo`那句话吗（让我更频繁地得到我）？接下来的步骤是 (1) 验证您的自定义标头模板是否正在使用，以及 (2) 清除`block_html`缓存，因为标头默认被缓存。

# fortran - 创建数组时在 Fortran 中出现意外的数据声明错误

> ID：13630254
> 
> 赞同：3
> 
> 时间：2012-11-29T16:29:12.200
> 
> 标签：fortran

我编写了一个简单的测试程序来演示我在编译一些 Fortran 代码时收到的数据声明错误。编译错误发生在我试图创建任意大小的数组的行上。在 C 代码中，我相信这可以通过简单`malloc`的 .

这里出了什么问题，我该如何解决？我在 上使用`gfortran`编译器`GNU/Linux`，所以我认为可以使用所有受支持的语言功能。

这是我的测试程序：

```
program test
implicit none
    integer num1, num2

    print *, 'Starting...'
    num1 = 10
    num2 = 11
    call sub(num1, num2)
    print *, 'Done.'

end program

subroutine sub(num1, num2)
    integer num1, num2
    integer num3

    num3 = num1 + num2 - 1
    integer A(num3)

    do i = 1,num3
        A(i) = i
    end do

    print *, 'Now printing out vector'

    do i = 1,num3
        print *, A(i)
    end do
end subroutine 
```

这是`cmake`用于编译我的简单测试程序的脚本：

```
cmake_minimum_required (VERSION 2.6)
project (test Fortran)

add_executable( test
test.f90
) # end 
```

编译此程序时，我收到以下错误：

```
/media/RESEARCH/SAS2-version2/test-Q-filter/test-Fcreation/test.f90:20.16:

 integer A(num3)
                1
Error: Unexpected data declaration statement at (1)
/media/RESEARCH/SAS2-version2/test-Q-filter/test-Fcreation/test.f90:23.10:

  A(i) = i
          1
Error: Unexpected STATEMENT FUNCTION statement at (1)
make[2]: *** [CMakeFiles/test.dir/test.f90.o] Error 1
make[1]: *** [CMakeFiles/test.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T16:56:09.807

问题是，因为您在普通语句之后放置了数据声明语句。

您不必使用用户定义的动态分配，所谓的自动分配就足够了。（它也适用于 C99 AFAIK，但仅适用于堆栈分配）。只需更换

```
num3 = num1 + num2 - 1
integer A(num3) 
```

和

```
integer A(num1 + num2 - 1)
integer num3

num3 = num1 + num2 - 1 
```

.

不幸的是，你不能只写

```
integer :: num3 = num1 + num2 - 1 
```

因为变量是隐式的`SAVE`，并且 num1 和 num2 必须在编译时知道。

注意我没有检查其他错误。

作为一个完全不同的问题，我建议您对所有子例程使用 mudules。在这种简单的情况下，也可以使用内部子程序。然后，您有一个明确的界面，您可以检查呼叫的一致性并使用更高级的功能。

# git - 在哪里测试 git 工作流？

> ID：13630256
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:14.307
> 
> 标签：git, qa

在我的项目中，我们使用的是这个[分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。基本上，每个故事都有一个分支。在将其合并到开发分支之前，我们正在每个功能分支中执行 QA（团队中有 2 名成员是测试人员）。就在发布之前，QA 在开发分支上运行回归（实际上是在发布分支上）。

您认为这种方法正确吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:21:05.020

您使用的方法是完美的。这是因为总是要开发新功能，然后在功能分支上进行测试。一旦功能正常工作，您就可以将它们（向上发送拉取请求）推送到开发分支。通过这种方式，可以发布新开发的功能。

对主分支或开发分支进行直接更改的主要风险是，如果某些东西非常严重，那么用户和测试人员都将无法使用您的系统/功能。它还将浪费开发人员的许多时间来修复更改。

# iphone - 如何在ios中使图像的某些部分可点击？

> ID：13630261
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:34.250
> 
> 标签：iphone, ios, ios5, uiimageview, coordinates

在我的一个应用程序中，我使用整个屏幕的图像。可以在一定程度上放大。该图像有八种不同的形状（包括人、形状等）。我要做的是确保图像的每个形状都是可点击的。触摸每个部分需要不同的屏幕。我不知道如何实现这一点。我用谷歌搜索但没有解决方案。

**1.）这是否可以通过使用坐标来实现（普通图像和缩放图像的坐标会有所不同吗？如何通过使用坐标来实现这一点？**

**2.）如果不是，实现我的目标的最佳方法是什么？**

非常感谢任何想法/示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:38:01.887

我会在包含`UITapGestureRecognizer`您的图像的 imageView 中添加一个。以及`locationOfTouch:inView:`确定触摸坐标的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:36:40.417

如果我不明白你的问题，请纠正我。对我来说，这应该很简单吧？只有几个背景清晰的按钮？它们都在图像之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:37:01.000

检查[`UIResponder`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html)和触摸方法在那里。您可能想要使用诸如`-touchesEnded:withEvent:`检测手指何时从屏幕上抬起之类的东西。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    for (UITouch *touch in touches) {
        CGRect touchLocationInView = [touch locationInView:imageView];
        // Do something to check that the rect is valid
        // If valid, react to it
    }
} 
```

另外，还有[一个链接`UITouch`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITouch_Class/Reference/Reference.html)。

# wcf - 在 WCF 应用程序中设置 MSMQ 以确保可靠的邮件传递

> ID：13630262
> 
> 赞同：3
> 
> 时间：2012-11-29T16:29:38.043
> 
> 标签：wcf, msmq

因此，我的任务是设置 MSMQ，以便如果我们的邮件服务器出现故障（这似乎经常发生），消息只会在队列中结束，并在它们恢复时被传递。话虽如此，我不得不说我对此知之甚少，除了我在过去 24 小时内学到的东西，但我相信我知道的足够多，可以采取正确的方法，但我想问社区中的某个人，因为有些困惑在我的同事中，我们在 WCF 应用程序中给出了一些现有设置。

目前我们有一些使用 msmq 作为端点协议的服务。端点看起来像这样

```
<endpoint address="net.msmq://localhost/private/Publisher"
behaviorConfiguration="BatchBehaviour" 
binding="netMsmqBinding"
bindingConfiguration="MSMQNoSecurity"
contract="HumanArc.Compass.Shared.Publisher.Interfaces.Service.IPublisherSubscriber"
name="PublishSubscriber"/> 
```

这当然可以让客户端进行服务调用，如果由于某种原因服务没有启动，它将确保当服务恢复时调用将被处理。我认为它不会做的是，如果您的服务方法中有以下内容。

```
try
{
    smtp.Send(mail);
    return true;
}
catch (System.Net.Mail.SmtpFailedRecipientException ex)
{
     throw new Exception("User Credentials for sending the Email are Invalid",ex);
}
catch (System.Net.Mail.SmtpException smtpEx)
{
   throw new Exception(string.Format("Application encountered a problem send a mail message to {0} ", smtpHostName),smtpEx);
} 
```

WCF 不会以某种方式重试并再次发送消息，我对这个假设是否正确？

我认为我们应该拥有如下所示的东西来代替上面对 smtp.send() 的调用。（来自[http://www.bowu.org/it/microsoft/net/email-asp-net-mvc-msmq-2.html](http://www.bowu.org/it/microsoft/net/email-asp-net-mvc-msmq-2.html)）

```
 string queuePath = @".\private$\WebsiteEmails";
  MessageQueue msgQ;
  //if this queue doesn't exist we will create it
  if(!MessageQueue.Exists(queuePath))
       MessageQueue.Create(queuePath);
  msgQ = new MessageQueue(queuePath);
  msgQ.Formatter = new BinaryMessageFormatter();
  msgQ.Send(msg); 
```

然后在服务启动的某个地方（我还不确定在哪里）我们设置了一个事件处理程序，它将实际调用 SmtpClient 对象上的 send()。像这样的东西

```
 msgQ.ReceiveCompleted += new ReceiveCompletedEventHandler(msgQ_ReceiveCompleted) 
```

所以总而言之，我的第一个问题是哪种方式更好？创建一个使用 net:msmq 作为协议的服务，或者只是更改电子邮件方法以将消息放入队列并为其设置处理程序？下一个问题，如果我关于更改调用 SmtpClient.Send() 的方法的假设是正确的，那么我应该在程序的哪个位置连接 ReceiveCompleted？Out WCF 服务托管在 Windows 服务中，这意味着实际上调用了 ServiceBase.Run(servicesToRun)。有地方可以把它连线吗？我对 WCF 的体验是使用更简单的 IIS 托管服务，所以我不能 100% 确定。

谢谢 - 我意识到这是一个很长的问题，但我一直在努力研究它，并且有很多信息，我似乎无法找到一个明确的解释，说明以一种方式做事与另一种做事的好处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T21:02:20.083

您使用 msmq 解决下游依赖项（在本例中为您的 smtp 服务器）中的可用性的方法是有效的。但是，您首先应该了解有关 msmq 的几件事。

如果您在 msmq 中创建队列，则默认情况下它是非事务性的。在这种模式下，队列不会提供您需要的那种保证交付语义。因此，将您的队列创建为事务性的。

然后，您可以告诉 WCF，您的服务操作将在接收到要处理的消息时加入事务。[您可以通过在服务操作](http://www.codeproject.com/Articles/183708/WCF-Transactions-Brief-Introduction)实现上定义行为来做到这一点：

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
public void SendEmail(Something mail)
{
    ....
    smtp.Send(mail);
} 
```

`TransactionScopeRequired`告诉 WCF 服务操作应该加入用于将消息从发送方传输到接收方的同一事务中。`TransactionAutoComplete`声明一旦操作**成功**完成，服务方法应该提交事务。因此，在回答您上面的查询时，服务操作失败*将*导致事务回滚。

此时会发生什么取决于您的[服务绑定配置](http://msdn.microsoft.com/en-us/library/ms731380.aspx)。

```
<netMsmqBinding>
  <binding name="netMsmqBinding_IMyServiceInterface" 
           exactlyOnce="true" 
           maxRetryCycles="3" 
           retryCycleDelay="00:01:00" 
           receiveErrorHandling="Move"> <-- this defines behavior after failure
    ...
  </binding>
</netMsmqBinding> 
```

当无论出于何种原因未提交事务时（例如，发生未处理的异常），WCF 会将消息回滚到队列中，并每分钟重试处理一次，最多 3 次（由`maxRetryCycles`和定义`retryCycleDelay`）。

如果在此时间之后消息仍然无法处理，则该[`receiveErrorHandling`](http://msdn.microsoft.com/en-us/library/system.servicemodel.receiveerrorhandling.aspx)属性告诉 WCF 下一步做什么（上面的绑定指定将消息移动到系统毒消息队列）。

注意：`exactlyOnce`告诉 WCF 我们需要事务，每条消息都将按发送顺序仅发送一次。

所以你原来的方法实际上是正确的，你只需要正确配置你的服务来实现你想要的行为。

# verilog - Verilog：未声明 Reg

> ID：13630263
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:39.293
> 
> 标签：verilog, hdl

这是 reg 赋值的声明

```
reg [5:0]R = {bi7 ,[15:11]RGB}; //bi7 is a parameter 
```

但是在模块的最后一行，我得到了这个错误，它指向相同的 reg 分配。

```
ERROR:HDLCompiler:69 - "path.v" Line 58: <R> is not declared. 
```

谁能帮我解决这个问题，因为我对verilog的整个体验只是一本书:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:41:46.397

在verilog中，你只能给`reg`in`always`或`initial`blocks赋值。您还可以`RGB`在总线名称的错误一侧获得从总线上剥离位的位范围。

```
reg [5:0] r;
always @(RGB) begin
    r = {bi7, RGB[15:11]};
end 
```

请注意，在 verilog 中，参数名称（例如`bi7`代码中的参数名称）通常以大写形式定义和编写，以便于识别。

# c++ - 为什么当我将 int 乘以 double 时会得到错误的值？

> ID：13630264
> 
> 赞同：2
> 
> 时间：2012-11-29T16:29:42.297
> 
> 标签：c++, math

好吧，我正在尝试在我的程序中执行一些基本操作，例如减法和乘法……我为我的类定义了“get”和设置方法……但是当我将乘法运算应用于双精度和整数时，我得到如下值：1.7e-3.17 ....

这是我的代码：是西班牙语，但......我相信你会明白

主要的：

```
#include <cstdlib>
#include <iostream>
#include "Tienda.h"
#define numeroClientes 2
using namespace std;

int main(int argc, char *argv[])
{
Cliente arregloClientes[numeroClientes];
string name;
int day, amount,i;
Tienda tienda = Tienda();

for(i=0; i<numeroClientes; i++){
system("cls");
cout<<"Ingrese el nombre del cliente: ";
cin>>name;
arregloClientes[i].setNombre(name);
cout<<"Ingerese numero de garrafones: ";
cin>>amount;
arregloClientes[i].setNumeroGarrafones(amount);
cout<<"Ingrese el dia de la compra"<<endl;
cout<<"0; Lunes 1; Martes 2; Miercoles 3; Jueves 4; Viernes: ";
cin>>day;
arregloClientes[i].setDia(day);
}

//Calculo del monto a pagar
for(i=0; i<numeroClientes; i++){
tienda.calcular(arregloClientes[i]);       
}

system("cls");
//Impresion de los datos
for(i=0; i<numeroClientes; i++){
cout<<"------------------------"<<endl;
arregloClientes[i].imprimir();       
}
cout<<"------------------------"<<endl;
tienda.imprimir();

cout<<"\n\n";
system("PAUSE");
return EXIT_SUCCESS; 
```

}

```
class Cliente {

  /* Atributos privados */
  private:
    string nombre;
    int numeroGarrafones;
    int dia; // 1 - 5 
    double totalCancelar;

    /* Metodos publicos */
    public:

     string getNombre();
     int getNumeroGarrafones();
     int getDia();         
     double getTotalCancelar();
     void setNombre(string nomb);
     void setNumeroGarrafones(int nG);
     void setDia(int d);
     void setTotalCancelar(double tC);
     void imprimir();
     string imprimirDia();

  }; // fin de clase Cliente 
```

问题在这里：

```
void Tienda::calcular(Cliente persona){
 double aux,total;
  int garrafones= persona.getNumeroGarrafones();;

arregloDias[persona.getDia()]=  arregloDias[persona.getDia()] +                     persona.getNumeroGarrafones(); 

aux = garrafones * precioVenta - garrafones * precioCosto;                   

ganancia = ganancia + aux;

total = garrafones * precioVenta;

persona.setTotalCancelar(total);

 } // fin de calcular

 This one: 
aux = garrafones * precioVenta - garrafones * precioCosto; 
```

操作相乘...生成的数字如我之前所说

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:39:15.830

我不相信这是一个 int * double 问题，而是一个统一的成员问题。

转到感兴趣的行：

```
aux = garrafones * precioVenta - garrafones * precioCosto; 
```

在该行之前，添加代码：（如果您知道如何设置断点和检查表达式值，请使用您信任的调试器）

printf("--> %d %.6g %.6g\n", garrafones, precioVenta, precioCosto);

我相信您可能会发现您的 Tienda 对象的成员实例是未初始化的并且包含“随机”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:59:57.433

在计算之前使用“tienda”的唯一时刻是调用构造函数时。您应该检查您是否在该构造函数中初始化 precioVenta 和 precioCosto，我猜它们是固定值并且属于“Tienda”类，以防它们不是全局变量（在这种情况下，无论如何您都应该初始化它）。

# php - apache tmp 文件夹中文件的“生存”时间是多长时间

> ID：13630266
> 
> 赞同：0
> 
> 时间：2012-11-29T16:29:45.337
> 
> 标签：php, apache, file, tmp

> **可能重复：**
> [php:: tmp 文件保留多长时间？](https://stackoverflow.com/questions/4653224/php-how-long-to-tmp-files-stay)

在服务器上上传文件后，他的位置是 tmp 文件夹对吗？

我的问题是：如果我们不从 tmp 文件夹中删除文件，这个文件会在 tmp 文件夹中保存多久？据我所知，服务器会自动从 tmp 文件夹中删除所有文件，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:45:17.927

> 在服务器上上传文件后，他的位置是 tmp 文件夹对吗？

不必要; Apache 本身不会将上传的内容保存在任何地方。

如果您使用的是 PHP，上传的文件会在请求完成后立即从上传临时目录中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:47:24.910

答案取决于您的配置。如果您`php.ini`在应用程序中或应用程序中为上传的文件设置自定义临时文件夹，系统不会自动将其删除。默认情况下，php 使用`/tmp`目录来存放临时文件。它与apache无关。

在 linux 系统上`/tmp`（或`/var/tmp`）被设计用于在短时间内创建、编辑和删除的文件。

如果您不删除 /tmp 中的文件，您的服务器将在下次系统重新启动时自动删除其中的许多（或全部）。

# api - 如何将 pandas.DataFrame 转换为 gviz_api.DataTable

> ID：13630269
> 
> 赞同：3
> 
> 时间：2012-11-29T16:29:58.783
> 
> 标签：api, pandas, google-visualization

我有一个 pandas.DataFrame 对象，我想将其转换为 gviz_api.DataTable ，然后我将在我的谷歌图表中使用它。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:50:07.943

我不知道将熊猫数据框转换为 gviz 数据表的任何直接方法。

这是我的做法：-

```
from gviz_data_table import Table   # using https://bitbucket.org/charlie_x/gviz-data-table though you should probably use the official google one.
import numpy as np
import pandas as pd

df = pd.DataFrame({
    "time" : [1,2,3,4,5],
    "temp" : np.random.rand(5)
})

table = Table()
table.add_column('temp', float, 'Temp')
table.add_column('time', float, 'Time')

for row in df.iterrows():
    table.append(row[1].tolist())

table.rows

[OrderedDict([('temp', <gviz_data_table.cell.Cell object at 0x104a64aa0>), ('time', <gviz_data_table.cell.Cell object at 0x104a64a50>)]),
 OrderedDict([('temp', <gviz_data_table.cell.Cell object at 0x104a64af0>), ('time', <gviz_data_table.cell.Cell object at 0x104a64b40>)]),
 OrderedDict([('temp', <gviz_data_table.cell.Cell object at 0x104a64b90>), ('time', <gviz_data_table.cell.Cell object at 0x104a64be0>)]),
 OrderedDict([('temp', <gviz_data_table.cell.Cell object at 0x104a64c30>), ('time', <gviz_data_table.cell.Cell object at 0x104a64c80>)]),
 OrderedDict([('temp', <gviz_data_table.cell.Cell object at 0x104a64cd0>), ('time', <gviz_data_table.cell.Cell object at 0x104a64d20>)])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T16:27:04.410

作为使用 iterrows 和列表的替代方法，您可以使用 .values 将数据框作为 numpy 对象（数组数组 - 每行一个）

完成该过程并将其转换为 GViz 表

*   设置描述
*   使用 gviz_api 的 LoadData() 方法加载值。

代码示例

```
#set up Google Table w/ the description
gpa_desc=[("grade_date", "date", "Date" ),
          ("gpa", "number", "GPA")]
gpa_data_table=gviz_api.DataTable(gpa_desc)

#your df as a numpy object
gpa_values=df_gpa.values

#populate the table with your data 
gpa_data_table.LoadData(gpa_values)

#convert to json to pass to the view
gpa_json=gpa_data_table.ToJSon() 
```

# java - 从 Restful webservice 调用 Servlet 时的问题

> ID：13630271
> 
> 赞同：1
> 
> 时间：2012-11-29T16:29:59.613
> 
> 标签：java, web-services, servlets, nullpointerexception, jersey

我正在使用 Jersey 开发 REST Web 服务，我需要从 Web 服务方法调用一个 servlet 来对用户进行身份验证。运行以下代码时出现异常：

```
@Path("/server")
public class WebServer {
    @Resource
    private WebServiceContext context;  

    @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTrackInJSON(Track track) throws IOException, ServletException { 
        ServletContext servletContext = (ServletContext) context.getMessageContext()
            .get(MessageContext.SERVLET_CONTEXT); // Here I am getting NPE

        HttpServletRequest request = (HttpServletRequest) context.getMessageContext()
            .get(MessageContext.SERVLET_REQUEST);

        HttpServletResponse response = (HttpServletResponse) context.getMessageContext()
            .get(MessageContext.SERVLET_RESPONSE);

        request.setAttribute("username", track.getUsername());
        request.setAttribute("password", track.getPassword());
        servletContext.getRequestDispatcher("/LoginAction").include(request, response);

        String loginStatus = request.getParameter("loginStatus");
        String Token = request.getParameter("Token");
        String result = ""+track;
        return Response.status(200).entity(result).build();
    }
} 
```

例外是：

> com.webservices.server.WebServer.createTrackInJSON(WebServer.java:36) 处的 java.lang.NullPointerException ...servletContext 为空

请帮助我确定如何在 Web 服务中获取 servlet 上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:46:04.703

使用 @Context 注释，并注入正确的类。您也可以直接注入 servlet 请求和响应对象。

```
import jax.ws.rs.core.Context;

@Path("/server")
public class WebServer {
    @Context 
    private ServletContext context; 

    @Context
    private HttpServletRequest request;

    @Context
    private HttpServletResponse response;

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:54:36.933

改用[javax.ws.rs.core.Context](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Context.html)：

```
@Context
public void setServletContext(ServletContext context) {
  // ...
} 
```

# php - Amazon PHP SDK 列出对象

> ID：13630275
> 
> 赞同：1
> 
> 时间：2012-11-29T16:30:06.290
> 
> 标签：php, amazon-s3, amazon

我需要在我的 S3 上显示存储桶内容，并且我正在使用 Amazon 的 PHP SDK。我的代码很简单

```
 $objects = $s3->list_objects("mybucket",array("max-keys"=>5));
 var_dump($objects); 
```

我从服务器得到的响应对我来说非常复杂 - 它的本质是

```
Object(CFResponse)[107]
    public 'header' => 
    array (size=11)
      'x-amz-id-2' => string      
    ...
    public 'body' => 
    object(CFSimpleXML)[106]
      public '@attributes' => 
        array (size=1)
          'ns' => string 'http://s3.amazonaws.com/doc/2006-03-01/' (length=39)
      public 'Name' => string 'cdneu.2yourfacecdn.com' (length=22)
      public 'Prefix' => 
        object(CFSimpleXML)[3]
      public 'Marker' => 
        object(CFSimpleXML)[105]
      public 'MaxKeys' => string '5' (length=1)
      public 'IsTruncated' => string 'true' (length=4)
      public 'Contents' => 
        array (size=5)
          0 => 
            object(CFSimpleXML)[104]
              ...
          1 => 
            object(CFSimpleXML)[103]
              ...
          2 => 
            object(CFSimpleXML)[102]
              ...
          3 => 
            object(CFSimpleXML)[101]
              ...
          4 => 
            object(CFSimpleXML)[100]
              ...
         public 'status' => int 200 
```

我相信“内容”下的部分是我正在寻找的，但我如何访问它？我习惯于接收数组，在那里我可以弄清楚键是什么以及如何访问，但这对我来说很难，有什么猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:02:56.163

试试这个以列出每个对象的关键元素：

```
$s3 = new AmazonS3();
$objects = $s3->list_objects("YOUR BUCKET NAME",array("max-keys"=>5));
foreach ($objects->body->Contents as $item){
    print_r($item->Key."");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T20:09:39.453

您可以访问以下内容

```
$contents = $objects['Contents']; 
```

# java - 不可变的字符串类？

> ID：13630276
> 
> 赞同：0
> 
> 时间：2012-11-29T16:30:20.080
> 
> 标签：java

如果我们有这些陈述：

```
String S1 = "AAA";
S1 = "aaa"; 
```

这意味着分配给特定属性的原始值没有改变。（因为字符串类是不可变的并且 S1 是一个实习对象）。

现在......如果我们有以下陈述：

```
String S1 = new String("AAA");
S1="aaa"; 
```

这意味着分配给字符串类中特定属性的原始值已更改。（因为字符串类是不可变的并且 S1 不是实习对象）

我的理解正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:33:07.340

不，`String`对象在任何情况下都是不可变的。当您调用`new String("foo")`它时，只需创建另一个内容为传递的字符串。所以不要这样做。

编辑：
在第二种情况下`S1`没有实习，但这并没有取消它的不变性。所以`String`赋值总是不会改变左对象，而只是重写引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:37:58.300

添加到其他答案，

采用 String 对象的 String 构造函数是一个设计缺陷（两次创建不可变实例没有意义）并且已被弃用。不要使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:33:42.020

字符串是不可变的。这意味着 String 的实例不能更改。您正在创建新变量以引用不同但仍然不可变的 String 实例。

它允许对字符串的更改以更改列表之类的方法分支出原始字符串

```
String s = new String(); 
```

创建一个空字符串对象 ("")。变量 s 指的是那个对象。

# c - 如何让 GDB 打印一个数组的 256 个值？

> ID：13630277
> 
> 赞同：3
> 
> 时间：2012-11-29T16:30:19.240
> 
> 标签：c, gdb

> **可能重复：**
> [如何在 gdb 中打印长字符串的完整值？](https://stackoverflow.com/questions/233328/how-do-i-print-the-full-value-of-a-long-string-in-gdb)

我正在使用命令

```
(gdb) p/d *data@256 
```

这给了我结果

```
 $11 = {9591, 0, 3194, -2, -1411, 0, -3713, 1, 383, -1, 3966, -1, 3839, 0, 766, 
  -1, -641, -1, -641, -1, 509, 0, 382, 0, 1150, -1, 1790, 0, 2430, 0, 1022, 0, 
  -2304, 0, -1538, 0, 638, -1, 4093, -1, 3070, 0, -641, -1, -2946, 0, -1024, 
  0, 2687, 0, 4606, -1, 1150, 0, -1410, 0, -1665, 0, 1792, 0, 2816, -1, 1152, 
  0, 384, 1, -3, 1, 1279, 0, 128, 0, -128, 1, 640, 1, 1791, 0, 2046, 0, 383, 
  0, -1024, -1, -130, 1, 1663, -1, 2814, 0, 896, 0, -898, 0, -1153, -1, 255, 
  0, 1663, 0, 1024, 0, -129, 1, -897, 0, -384, 1, 896, 0, 896, 0, -1, 0, -129, 
  0, 127, 0, 639, 0, -128, 1, 128, 0, 0, 0, 895, -1, 639, 0, -256, 0, -129, 
  -1, 255, 0, 1023, 1, 1150, 0, 257, 0, -129, 0, 1, 0, 511, -1, 640, 0, 128, 
  1, -128, 1, -256, 0, 0, 0, 129, -1, 128, 0, -1, 0, 0, -1, -1, 1, 128, -1, 
  -1, 0, 0, 0, 0, -1, 128, 0, 0, -1, -128, 0, -1, 0, -1, 0, 255, -1, 127, 1, 
  -1, 1, 0, 1, 0, 1, 128, 0, 128, 1...} 
```

我如何让它向我显示所有 256 个值，而不是只显示一些值，然后显示它最后显示的省略号？值 1 不重复。

# vim - 在vim中查找并替换为单词的实例

> ID：13630279
> 
> 赞同：4
> 
> 时间：2012-11-29T16:30:21.407
> 
> 标签：vim

我想要做的是找到一段代码的实例，例如

```
<textarea id="question1"> 
```

并将其替换为自身的一部分：

```
<textarea id="question1" name="question1"> 
```

如何在 vim 的 :%s 中引用“question1”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:34:36.600

```
:%s;<textarea id="\([^"]*\)">;<textarea id="\1" name="\1">; 
```

# java - 无法构建 32 位 Sigar 库

> ID：13630281
> 
> 赞同：1
> 
> 时间：2012-11-29T16:30:29.880
> 
> 标签：java, linux, sigar

我正在尝试为 Linux 构建 32 位版本的 Sigar。当我构建时，我的 JAVA_HOME 指向一个 32 位版本的 java 并且构建似乎正在构建一个 32 位版本，但是当我检查构建库上的标头时，它说它是一个 64 位库。当我尝试使用该库时，我得到一个 UnsatisifiedLinkError（见下文）。

在这里，我试图针对构建的二进制文件运行：

```
$ java -jar sigar-bin/lib/sigar.jar version
/home/epederso/sigar-1.6/bindings/java/sigar-bin/lib/libsigar-x86-linux.so: /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib/libsigar-x86-linux.so: 
wrong ELF class: ELFCLASS64 (Possible cause: architecture word width mismatch)
org.hyperic.sigar.SigarException: /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib/libsigar-x86-linux.so: /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib/libsigar-x86-linux.so: wrong ELF class: ELFCLASS64 (Possible cause: architecture word width mismatch)
        at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172) 
```

这是构建的库的 readelf 输出，显示它是 ELF64。

```
$ readelf -h sigar-bin/lib/libsigar-x86-linux.so
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00
  Class:                             ELF64
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              DYN (Shared object file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0xa1b0
  Start of program headers:          64 (bytes into file)
  Start of section headers:          213536 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         5
  Size of section headers:           64 (bytes)
  Number of section headers:         28
  Section header string table index: 25 
```

最后是构建的输出：

```
$ ant
Buildfile: /home/epederso/sigar-1.6/bindings/java/build.xml

jni-init:
    [mkdir] Created dir: /home/epederso/sigar-1.6/bindings/java/build/classes
     [echo] jni.src=linux, jni.jdk.os=linux, 32-bit
    [javac] /home/epederso/sigar-1.6/bindings/java/hyperic_jni/jni-build.xml:165: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 6 source files to /home/epederso/sigar-1.6/bindings/java/build/classes
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.4
    [javac] Note: /home/epederso/sigar-1.6/bindings/java/hyperic_jni/src/org/hyperic/jni/ArchLoader.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] 1 warning
  [libarch] x86-linux
     [echo] java.home=/usr/java/jdk1.7.0_02_32

sigar-version:
     [echo] SIGAR git revision exported

version-file:
     [echo] cp ./src/org/hyperic/sigar/SigarVersion.java.in -> /home/epederso/sigar-1.6/bindings/java/build/./src/org/hyperic/sigar/SigarVersion.java
     [copy] Copying 1 file to /home/epederso/sigar-1.6/bindings/java/build/src/org/hyperic/sigar

version-file:
     [echo] cp ../../src/sigar_version.c.in -> /home/epederso/sigar-1.6/bindings/java/build/src/sigar_version.c
     [copy] Copying 1 file to /home/epederso/sigar-1.6/bindings/java/build/src

version-file:
     [echo] cp ../../src/os/darwin/Info.plist.in -> /home/epederso/sigar-1.6/bindings/java/build/src/Info.plist
     [copy] Copying 1 file to /home/epederso/sigar-1.6/bindings/java/build/src

version-file:
     [echo] cp ../../src/os/win32/sigar.rc.in -> /home/epederso/sigar-1.6/bindings/java/build/src/sigar.rc
     [copy] Copying 1 file to /home/epederso/sigar-1.6/bindings/java/build/src

sigar.rc:

prepare-src:
     [exec] javasigar_generated.c needs update
     [exec] generating javasigar_generated.c
     [exec] generating javasigar_generated.h
     [exec] generating org/hyperic/sigar/Uptime.java
     [exec] skipping org/hyperic/sigar/NetStat.java
     [exec] generating org/hyperic/sigar/DirStat.java
     [exec] skipping org/hyperic/sigar/CpuPerc.java
     [exec] generating org/hyperic/sigar/ResourceLimit.java
     [exec] generating org/hyperic/sigar/NfsServerV3.java
     [exec] generating org/hyperic/sigar/FileAttrs.java
     [exec] generating org/hyperic/sigar/Cpu.java
     [exec] generating org/hyperic/sigar/NfsClientV2.java
     [exec] generating org/hyperic/sigar/DiskUsage.java
     [exec] generating org/hyperic/sigar/CpuInfo.java
     [exec] generating org/hyperic/sigar/FileSystem.java
     [exec] generating org/hyperic/sigar/Who.java
     [exec] generating org/hyperic/sigar/Swap.java
     [exec] generating org/hyperic/sigar/ProcTime.java
     [exec] generating org/hyperic/sigar/FileSystemUsage.java
     [exec] generating org/hyperic/sigar/ProcMem.java
     [exec] generating org/hyperic/sigar/ThreadCpu.java
     [exec] generating org/hyperic/sigar/NetRoute.java
     [exec] generating org/hyperic/sigar/ProcStat.java
     [exec] generating org/hyperic/sigar/NetInterfaceConfig.java
     [exec] generating org/hyperic/sigar/NetInfo.java
     [exec] generating org/hyperic/sigar/SysInfo.java
     [exec] generating org/hyperic/sigar/Mem.java
     [exec] generating org/hyperic/sigar/NfsClientV3.java
     [exec] generating org/hyperic/sigar/DirUsage.java
     [exec] generating org/hyperic/sigar/NetConnection.java
     [exec] generating org/hyperic/sigar/Tcp.java
     [exec] generating org/hyperic/sigar/NetInterfaceStat.java
     [exec] generating org/hyperic/sigar/ProcCred.java
     [exec] generating org/hyperic/sigar/ProcFd.java
     [exec] generating org/hyperic/sigar/ProcCredName.java
     [exec] generating org/hyperic/sigar/ProcCpu.java
     [exec] generating org/hyperic/sigar/NfsServerV2.java
     [exec] generating org/hyperic/sigar/ProcState.java
     [exec] generating org/hyperic/sigar/ProcExe.java

jni-compile:

jni-cc:
    [mkdir] Created dir: /home/epederso/sigar-1.6/bindings/java/build/obj/x86-linux/lib
     [echo] jni libname=sigar-x86-linux
       [cc] 13 total files to be compiled.
       [cc] Starting link

jni-lib-copy:
    [mkdir] Created dir: /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib
     [copy] Copying 2 files to /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib

copy-includes:
    [mkdir] Created dir: /home/epederso/sigar-1.6/bindings/java/sigar-bin/include
     [copy] Copying 5 files to /home/epederso/sigar-1.6/bindings/java/sigar-bin/include

build-jni:

compile:
    [javac] /home/epederso/sigar-1.6/bindings/java/build.xml:102: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 181 source files to /home/epederso/sigar-1.6/bindings/java/build/classes
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.4
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:21: warning: Signal is internal proprietary API and may be removed in a future release
    [javac] import sun.misc.Signal;
    [javac]                ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:22: warning: SignalHandler is internal proprietary API and may be removed in a future release
    [javac] import sun.misc.SignalHandler;
    [javac]                ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:24: warning: SignalHandler is internal proprietary API and may be removed in a future release
    [javac] public class ShellIntHandler implements SignalHandler {
    [javac]                                         ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:33: warning: Signal is internal proprietary API and may be removed in a future release
    [javac]         Signal signal;
   [javac]         ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:35: warning: Signal is internal proprietary API and may be removed in a future release
    [javac]             signal = new Signal("INT");
    [javac]                          ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:41: warning: Signal is internal proprietary API and may be removed in a future release
    [javac]             Signal.handle(signal, new ShellIntHandler());
    [javac]             ^
    [javac] /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/shell/ShellIntHandler.java:47: warning: Signal is internal proprietary API and may be removed in a future release
    [javac]     public void handle(Signal signal) {
    [javac]                        ^
    [javac] Note: /home/epederso/sigar-1.6/bindings/java/src/org/hyperic/sigar/cmd/Ps.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] 8 warnings

pack:
      [jar] Building jar: /home/epederso/sigar-1.6/bindings/java/sigar-bin/lib/sigar.jar

build:

BUILD SUCCESSFUL
Total time: 10 seconds 
```

# c++ - 为什么不能移动这些变量？

> ID：13630286
> 
> 赞同：5
> 
> 时间：2012-11-29T16:30:44.890
> 
> 标签：c++, c++11, move-semantics

C++ 移动语义中似乎有很多错失的机会。我想了解这些背后的基本原理以及为什么标准在定义在以下情况下何时应该移动变量时没有更积极：

```
string f()
{
    string s;
    return s + " ";
} 
```

这调用`operator+(const string&, const char*)`，不是`operator+(string&&, const char*)`，我相信因为`s`是一个*左值*。标准不能说，在函数中最后一次使用局部变量时，该变量被认为是可移动的吗？

我认为一个有点类似的例子：

```
struct A { A(string&&); };
string g()
{
    string s;
    return s; // s is moved
}
A h()
{
    string s;
    return s; // s can't be moved!
} 
```

`g`使用 move 语义将数据从`s`返回值移动，但由于未移入而`h`无法编译。我相信这是因为标准有一个特殊情况，它本质上说如果你返回一个与返回类型完全相同类型的局部变量，该变量就会被移动。为什么如果返回一个局部变量，不管它的类型如何，它都会被移动？`s``h``g`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:36:22.153

我确信这可能需要移动任一示例，但随后有人会提出另一种情况，他们认为`s`最后一次使用它是“明显的”，因此应该移动。

最终，您将拥有定义编译器需要执行哪些数据流分析的标准。作者决定保守地划清界限，让实现在这方面变得愚蠢。程序员总是可以通过编写`std::move`将副本更改为移动。

另一种可能性是标准规定是否移动或复制对象是未指定的，前提是代码不再使用它们。这将允许实现尽可能聪明。我很确定这将是一个坏主意：在实践中，用户通常不关心他们的对象是否被移动，但他们有时需要解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:50:59.230

简而言之，这是当前标准中不必要的限制，它使自动移动取决于复制省略的可用性。

另一个例子是：

```
struct X{
  std::string s;
};

std::string foo(){
  X x;
  return x.s; // no automatic move
}; 
```

[我在http://isocpp.org](http://isocpp.org)的未来标准提案论坛上打开了一个帖子，可以在[这里](http://isocpp.org/forums/iso-c-standard-future-proposals?place=msg/std-proposals/07tdIbHTs-M/JalNnMlRZ6QJ)看到。在 Richard Smith 的建议下，我直接向 Mike Miller 发送了关于在此问题上打开一个核心问题的邮件，并得到了以下回复：

> [...] 根据上面 Richard 的总结，这听起来确实是一个合理的问题，所以我将在问题列表的下一次修订中为它打开一个问题。谢谢。

因此对于 C++14，所有这些限制都可能会消失，并且每次返回局部变量时，您都会自动移动。

理查德的总结顺便说一句是这样的：

> 更具体地说，[class.copy]p31 有一条规则，即可以为语句“return id-expression;”省略副本。其中 id-expression 命名了一个局部变量，*并且该变量具有与函数的返回类型相同的 cv 非限定类型*。建议是，只要有“return id-expression;”语句，我们就应该执行自动移动；其中 id-expression 命名局部变量或函数参数，而不管变量的类型。

# java - Java 健身功能 - 体重秤

> ID：13630288
> 
> 赞同：2
> 
> 时间：2012-11-29T16:30:51.037
> 
> 标签：java, function, fitness

作为实验室的一部分，我有一个健身功能，并希望将其应用于一组“权重”（ArrayList 权重）。我已经创建了数组并在其中存储了一些值。我创建了随机二进制字符串（末尾有一个“x”以生成随机值），我希望也将适应度函数应用于；但是，我遇到的问题是适应度函数总是返回值 0。我在这里遗漏了什么吗？

适应度函数如下：

```
import java.util.*;
public class ScalesSolution{
private static String scasol;
//Creates a new scales solution based on a string parameter
//The string parameter is checked to see if it contains all zeros and ones
//Otherwise the random binary string generator is used (n = length of parameter)

public ScalesSolution(String s)
{
    boolean ok = true;
    int n = s.length();
    for(int i=0;i<n;++i)
    {
        char si = s.charAt(i);
        if (si != '0' && si != '1') ok = false;
    }
    if (ok)
    {
        scasol = s;
    }
    else
    {
        scasol = RandomBinaryString(n);
    }
}

private static String RandomBinaryString(int n)
{
    String s = new String();
    //Code goes here
    //Create a random binary string of just ones and zeros of length n
    for(int i = 0; i < n; i++){
        int x = CS2004.UI(0,1);
            if(x == 0){
                System.out.print(s + '0');
            }
            else if(x == 1){
                System.out.print(s + '1');
            }
    }
    return(s);
}

public ScalesSolution(int n) 
{
    scasol = RandomBinaryString(n); 
}

//This is the fitness function for the Scales problem
//This function returns -1 if the number of weights is less than
//the size of the current solution
//EXERCISE 3
public static double ScalesFitness(ArrayList<Double> weights)
{
    int n = scasol.length();
    double lhs = 0.0, rhs = 0.0;
    if (n > weights.size()) return(-1);

    for(int i = 0; i < n; i++){
        if(scasol.charAt(i) == 0){
            lhs += weights.get(i);
        }
        else{
            rhs += weights.get(i);
        }
    }       
    //Code goes here
    //Check each element of scasol for a 0 (lhs) and 1 (rhs) add the weight wi
    //to variables lhs and rhs as appropriate
    return(Math.abs(lhs-rhs));
}

//Display the string without a new line
public void print()
{
    System.out.print(scasol);
}
//Display the string with a new line
public void println()
{
    print();
    System.out.println();
}} 
```

主要方法（在​​单独的类中）：

```
import java.util.ArrayList;
public class Lab8 {

public static void main(String args[])
{
    for(int i = 0; i < 10; i++){
        ScalesSolution s = new ScalesSolution("10101x");
        s.println();
    }

    ArrayList<Double> weights = new ArrayList<Double>();
    weights.add(1.0);
    weights.add(2.0);
    weights.add(3.0);
    weights.add(4.0);
    weights.add(10.0);
    System.out.println();
    System.out.println(weights);
    System.out.print("Fitness: ");

    double fitness = ScalesSolution.ScalesFitness(weights);
    System.out.println(fitness);

}} 
```

CS2004班：

```
import java.util.*;
import java.io.*;

//Some useful code that we will probably reuse in later laboratories...
public class CS2004 
{
//Shared random object
static private Random rand;
//Create a uniformly distributed random integer between aa and bb inclusive
static public int UI(int aa,int bb)
{
    int a = Math.min(aa,bb);
    int b = Math.max(aa,bb);
    if (rand == null) 
    {
        rand = new Random();
        rand.setSeed(System.nanoTime());
    }
    int d = b - a + 1;
    int x = rand.nextInt(d) + a;
    return(x);
}
//Create a uniformly distributed random double between a and b inclusive
static public double UR(double a,double b)
{
    if (rand == null) 
    {
        rand = new Random();
        rand.setSeed(System.nanoTime());
    }
    return((b-a)*rand.nextDouble()+a);
}
//This method reads in a text file and parses all of the numbers in it
//This code is not very good and can be improved!
//But it should work!!!
//It takes in as input a string filename and returns an array list of Doubles
static public ArrayList<Double> ReadNumberFile(String filename)
{
    ArrayList<Double> res = new ArrayList<Double>();
    Reader r;
    try
    {
        r = new BufferedReader(new FileReader(filename));
        StreamTokenizer stok = new StreamTokenizer(r);
        stok.parseNumbers();
        stok.nextToken();
        while (stok.ttype != StreamTokenizer.TT_EOF) 
        {
            if (stok.ttype == StreamTokenizer.TT_NUMBER)
            {
                res.add(stok.nval);
            }
            stok.nextToken();
        }
    }
    catch(Exception E)
    {
        System.out.println("+++ReadFile: "+E.getMessage());
    }
    return(res);
}} 
```

运行后，随机二进制字符串运行良好，但适应度函数无法从 0 开始变化。以下是示例输出：

```
011100
111010
001110
111011
001000
010101
001010
100011
110100
011001

[1.0, 2.0, 3.0, 4.0, 10.0]
Fitness: 0.0 
```

非常感谢大家的时间。斯特凡诺斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:55:57.963

`scasol`调用时显示为空`ScalesFitness`。在该`RandomBinaryString`方法中，您从不实际构造`s`，而只是将其打印出来。而不是`System.out.print(s+'0')`and 另一行，你应该有`s += '0';`.

由于这似乎是一个练习，我将把剩下的留给你，但下次有一个提示：不要让一个函数做超出它应该做的事情（例如打印出它的结果），否则，它可能看起来这组功能实际上正在工作，而实际上并非如此。

在这种情况下，看起来一切正常，因为它看起来像`s.println()`实际打印出来的函数`scasol`，但实际上`scasol`是空的，并且该`RandomBinaryString`方法实际上正在执行打印。

# c++ - 存储类对象的 C++ 模板链表 - 未处理的异常访问冲突读取位置

> ID：13630292
> 
> 赞同：1
> 
> 时间：2012-11-29T16:30:58.383
> 
> 标签：c++, class, templates, exception, linked-list

我正在尝试将模板链接列表实现到我正在使用很多类的项目中。它的工作方式有点像地图或集合，其中有键数据和值数据。我创建它并使用整数和字符串值在一个单独的项目中对其进行了测试，并且它内部的所有函数都可以工作，我什至使用 BOOST 库让它与序列化一起工作。

这是我列表的整个类文件：

```
#ifndef LINKED_LIST_H
#define LINKED_LIST_H

#include <boost\serialization\access.hpp>

#include <iostream>
#include <string>

using namespace std;

template<typename Tkey, typename Tvalue>
class Node
{
public:
Tkey keyData;
Tvalue valueData;
Node * next;
Node()
{   
    next = NULL;
}
Node(Tkey x, Tvalue y)
{
    keyData = x;
    valueData = y;
    next = NULL;
}
Node(Tkey x, Tvalue y, Node * z)
{
    keyData = x;
    valueData = y;
    next = z;
}

template<class Archive>
void serialize(Archive &ar, const unsigned int version)
{
    ar & keyData;
    ar & valueData;
    ar & next;
}
};

template<typename Tkey, typename Tvalue>
class LinkedList
{
Node<Tkey, Tvalue> *head;
int count;
public:
LinkedList()
{
    head = NULL;
    count = 0;
}
~LinkedList()
{
    Clear();
}

template<class Archive>
void serialize(Archive &ar, const unsigned int version)
{
    ar & head;
    ar & count;
}

int Size()
{
    return count;
}

bool Empty()
{
    return (count == 0);
}

bool Add(Tkey key, Tvalue value)
{
    Node<Tkey, Tvalue> *p;
    if(head == NULL)
    {
        head = new Node<Tkey, Tvalue> (key, value, NULL);
        count++;
        return true;
    }
    else
    {
        p = head;
        while(p->next !=NULL)
            p=p->next;
        p->next = new Node<Tkey, Tvalue> (key, value, NULL);
        count++;
        return true;
    }
    return false;
}

bool Remove(Tkey key)
{
    Node<Tkey, Tvalue> *p;

    if (head->keyData == key)
    {
        head = head->next;
        return true;
    }

    p=head;

    while (p->next->keyData != key && p->next->next != NULL)
    {
        p = p->next;
    }

    if (p->next->keyData == key && p->next != NULL)
    {
        Node<Tkey, Tvalue> *temp;
        temp = p->next;
        p->next = temp->next;
        count--;
        delete temp;
        return true;
    }

    return false;
}

Tvalue Get(Tkey key)
{
    Node<Tkey, Tvalue> *p;

    p = head;

    while (p->next != NULL)
    {
        if (p->keyData == key)
        {
            return p->valueData;
        }
        p = p->next;
    }

    return NULL;
}

Tvalue Find(int i)
{
    int selection = 0;

    Node<Tkey, Tvalue> *p;

    p = head;

    while (selection != i && p->next != NULL)
    {
        p = p->next;
        selection++;
    }

    if (p->next == NULL)
    {
        return 0;
    }

    return p->valueData;
}

Tkey Exists (Tvalue value)
{
    Node<Tkey, Tvalue> *p;

    p = head;

    while (p->next != NULL)
    {
        if (p->valueData == value)
        {
            return p->keyData;
        }
    }

    return NULL;
}

void Clear()
{
    Node<Tkey,Tvalue> * temp;
    while (head != 0)
    {
        temp = head;
        head = head->next;
        count--;
        delete temp;
    }
}

void Print(Tkey key)
{
    Node<Tkey, Tvalue> * p;
    p = head;
    while(p->keyData != key && p->next != NULL)
    {
        p = p->next;
    }

    if (p->keyData == key && p->next != NULL)
    {
        cout << p->keyData << " " << p->valueData << endl;
    }
    else
    {
        cout << "Data not found" << endl;
    }
}

void PrintAll()
{
    Node<Tkey, Tvalue> * p;
    p = head;
    while(p != NULL)
    {
        cout << p->keyData << " " << p->valueData << "\n";
        p = p->next;
    }
}
};
#endif 
```

为了在我的项目中测试它，我创建了一个带有 int 和我的一个类的 Linked List 变量，然后尝试添加和获取值数据以修改值。

```
LinkedList<int,Customer *> customerList;
customerList.Add(1, new Customer("Jack Smith", "1 Adelade Road", "5678", "Male", 4,8,1999));
customerList.Get(1)->AddAccount("9081", new JuniorCurrentAccount("100126764", 50, 25,12,2010)); 
```

但是，当我运行它时，我在指向 if(head == NULL) 的 Add 方法处得到一个未处理的异常

异常显示“访问冲突读取位置”

到目前为止，我已经尝试在列表检查节点时将 NULL 更改为 0，但这并没有阻止异常，我还尝试包含类文件的标头，但这导致了很多涉及访问这些类中的变量的错误.

我相信班级本身有问题，但我找不到导致它的原因。正如我所说，这个类适用于基本数据类型（整数、字符串等），但类是导致错误的原因。任何帮助都会很棒！

编辑：这是客户类 .cpp 文件的代码
#include "Customer.h" #include "Account.h" #include "CorportateSavings.h" #include "CurrentAccount.h" #include "JuniorCurrentAccount.h" #include "StudentSavings.h" #include "Mortgage.h" #include "BuyToLetMortgage.h" #include "DiscountMortgage.h" #include "FixedRateMortgage.h" #include #include #include #include #include

```
using namespace std;

Customer::Customer(string Name, string Address, string TelephoneNo, string Gender, int DOBday, int DOBmonth, int DOByear) : name(Name), address(Address), telephoneNo(TelephoneNo), gender(Gender), DOB(DOBday,DOBmonth,DOByear)
{
parent = 0;
}

Customer::Customer(string Name, string Address, string TelephoneNo, string Gender, int DOBday, int DOBmonth, int DOByear, Customer *c) : name(Name), address(Address), telephoneNo(TelephoneNo), gender(Gender), DOB(DOBday,DOBmonth,DOByear)
{
parent = c;
}

Customer::~Customer(void)
{

}

void Customer::printDetails()
{
//Prints out details of customer
cout << "Name       : " << name << endl;
cout << "Address        : " << address << endl;
cout << "Telephone No   : " << telephoneNo << endl;
cout << "Gender     : " << gender << endl;
cout << "Date of Birth  : ";
printStringDOB();
//If customer has a registered parent/guardian
if (parent != 0)
    cout << "Parent/Guardian Name: " << parent->getName() << endl;

cout << endl;
}

string Customer::getName()
{
return name;
}

void Customer::setName(string Name)
{
name = Name;
}

string Customer::getAddress()
{
return address;
}

void Customer::setAddress(string Address)
{
address = Address;
}

string Customer::getTelephoneNo()
{
return telephoneNo;
}

void Customer::setTelephoneNo(string TelephoneNo)
{
telephoneNo = TelephoneNo;
}

string Customer::getGender()
{
return gender;
}

void Customer::setGender(string Gender)
{
gender = Gender;
}

void Customer::printStringDOB()
{
DOB.printString(); 
}

double Customer::getDOB()
{
return DOB.juldays();
}

void Customer::setDOB(int day, int month, int year)
{
DOB.setDay(day);
DOB.setMonth(month);
    DOB.setYear(year);
}

int Customer::getAge(int Day, int Month, int Year)
{
return DOB.DifferenceYear(Day, Month, Year);
}

void Customer::setParent(Customer * c)
{
parent = c;
}

Customer * Customer::getParent()
{
if (parent = 0)
{
    return NULL;
}
else
{
    return parent;
}
}

void Customer::AccountManager()
{
int choice = AccountManagerChooser();
cout << endl;

while (choice != 9)
{
    switch (choice)
    {
    case 1:
        //Create a bank acount
        CreateAccountManager();
        choice = AccountManagerChooser();
        break;
    case 2:
        {
            //Use a bank account
            string pin;

            cout << "Enter PIN: ";
            cin >> pin;

            UseAccount(pin);
            choice = AccountManagerChooser();
            break;
        }
    case 3:
        {
            //Remove a bank account
            char yn;
            cout << "Enter PIN: ";
            string pin;
            cin >> pin;
            if (accountList.Get(pin) != NULL)
            {
                cout << "Are you sure? (Y/N) ";
                cin >> yn;
                if (yn == 'y' || yn == 'Y')
                {
                    accountList.Remove(pin);
                    cout << "Account Removed Successfully" << endl;
                }
            }
            else
            {
                cout << "Invalid PIN or Account does not exist" << endl;
            }
            choice = AccountManagerChooser();
            break;
        }
    case 4:
        //Print Customer Details
        printDetails();
        choice = 0;
        break;
    case 5:
        {
            //Change Customer Details
            int detailChange = 0;

            while (detailChange != -1)
            {
                cout << "1 Name" << endl;
                cout << "2 Address" << endl;
                cout << "3 Telephone No" << endl;
                cout << "4 Gender" << endl;
                cout << "5 Date of Birth" << endl;
                cout << "Which piece of detail do you want to change? ";
                cin >> detailChange;
                string str;
                getline(cin, str);
                cout << endl;

                switch (detailChange)
                {
                case 1:
                    {
                        string newName;
                        cout << "Enter new name: ";
                        getline(cin, newName);
                        setName(newName);
                        break;
                    }

                case 2:
                    {
                        string newAddress;
                        cout << "Enter new Address: ";
                        getline (cin,newAddress);
                        setAddress(newAddress);
                        break;
                    }
                case 3:
                    {
                        string newTelephone;
                        cout << "Enter new Telephone Number: ";
                        getline (cin,newTelephone);
                        setTelephoneNo(newTelephone);
                        break;
                    }
                case 4:
                    {
                        string newGender;
                        cout << "Enter Gender" << endl;
                        getline (cin,newGender);
                        gender = newGender;
                        break;
                    }
                case 5:
                    int newDay = 0;
                    int newMonth = 0;
                    int newYear = 0;
                    cout << "Enter Day: ";
                    cin >> newDay;
                    cout << "Enter Month: ";
                    cin >> newMonth;
                    cout << "Enter Year: ";
                    cin >> newYear;

                    setDOB(newDay,newMonth,newYear);
                    break;
                }

                char yn = 0;
                cout << "Would you like to change anything else? (Y/N) ";
                cin >> yn;

                if (yn == 'Y' || yn == 'y')
                {
                    detailChange = 0;
                    cout << endl;
                }
                else
                {
                    detailChange = -1;
                    cout << endl;
                }
            }
            choice = AccountManagerChooser();
            cout << endl;
        }
        break;
    case 6:
        //Create a mortgage
        {
            time_t t = time(0);
            struct tm * now = localtime( & t );

            CreateMortgageManager();

            choice = AccountManagerChooser();
            cout << endl;
        }
        break;

    case 7:
        //Use a mortgage
        {
            string str;
            string pin;
            getline(cin,str);
            cout << "Enter PIN: ";
            getline(cin,pin);
            UseMortgage(pin);
            choice = AccountManagerChooser();
            cout << endl;
        }
        break;

    case 8:
        //Remove a mortgage
        {
            string str;
            string pin;
            getline(cin,str);
            cout << "Enter PIN: ";
            getline(cin,pin);
            RemoveMortgage(pin);
            choice = AccountManagerChooser();
            cout << endl;
        }
        break;
    case 9:
        break;
    default:
        cout << endl;
        choice = AccountManagerChooser();
        break;
    }

    if (choice == 9)
    {
        cout << "Thank you for your time!\n\n" << endl;
    }
    else if (choice == 0)
    {
        choice = AccountManagerChooser();
    }
}
}

int Customer::AccountManagerChooser()
{
cout << "What would you like to do?" << endl;
cout << "1: Create a new account" << endl;
cout << "2: Use an account" << endl;
cout << "3: Close an account" << endl;
cout << "4: Show Personal Details" << endl;
cout << "5: Update Personal Details" << endl;
cout << "6: Create a Mortgage" << endl;
cout << "7: Use a Mortgage" << endl;
cout << "8: Remove a Mortgage" << endl;
cout << "9: Exit" << endl;
cout << "Enter Choice: ";
int choice;
cin >> choice;
cout << endl;
return choice;
}

void Customer::CreateAccountManager()
{
int choice = 0;

while (choice != -1)
{
    time_t t = time(0);
    struct tm * now = localtime( & t );

    cout << "What account do you wish to create?" << endl;
    cout << "1: Corporate Savings" << endl;
    cout << "2: Current Account" << endl;
    cout << "3: Junior Account" << endl;
    cout << "4: Student Savings Account" << endl;
    cout << "5: Cancel" << endl;
    cout << "Enter Choice: ";
    cin >> choice;
    cout << endl;

    switch (choice)
    {
    case 1:
        //Corporate Savings Account Made
        //Grabs age from current date
        if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) >= 16)
        {
            cout << "Please enter how much you wish to deposit: ";
            double initDeposit;
            cin >> initDeposit;

            cout << "Please enter a four digit number to set as the PIN: ";
            string PIN;
            cin >> PIN;

            cout << "Please enter a 9 digit number to set as the account number: ";
            string AccountNo;
            cin >> AccountNo;

            AddAccount(PIN, new CorporateSavings(AccountNo, initDeposit, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
            cout << "Corporate Savings Account Created" << endl;
            choice = -1;
        }
        else if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) < 16)
        {
            cout << "Corportate Savings Account is only available to customers over the age of 16" << endl;
        }
        break;
    case 2:
        //Current Account Made
        //Grabs age from current date
        if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) >= 16)
        {
            cout << "Please enter how much you wish to deposit: ";
            double initDeposit;
            cin >> initDeposit;

            cout << "Please enter a four digit number to set as the PIN: ";
            string PIN;
            cin >> PIN;

            cout << "Please enter a 9 digit number to set as the account number: ";
            string AccountNo;
            cin >> AccountNo;

            AddAccount(PIN, new CurrentAccount(AccountNo, initDeposit, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
            cout << "Current Account Created" << endl;
            choice = -1;
        }
        else if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) < 16)
        {
            cout << "Current Account is only available to customers over the age of 16" << endl;
        }
        break;
    case 3:
        //Junior Current Account Made
        //Grabs age from current date
        if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) <= 16)
        {
            cout << "Please enter how much you wish to deposit: ";
            double initDeposit;
            cin >> initDeposit;

            cout << "Please enter a four digit number to set as the PIN: ";
            string PIN;
            cin >> PIN;

            cout << "Please enter a 9 digit number to set as the account number: ";
            string AccountNo;
            cin >> AccountNo;

            AddAccount(PIN, new JuniorCurrentAccount(AccountNo, initDeposit, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
            cout << "Junior Account Created" << endl;
            choice = -1;
        }
        else if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) > 16)
        {
            cout << "Junior Account is only available to customers under the age of 16" << endl;
        }
        else if (parent != 0)
        {
            cout << "Customers applying for Junior Account must have an adult registered as a guardian" << endl;
        }

        break;
    case 4:
        //Student Savings Account Made
        //Grabs age from current date
        if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) >= 18)
        {
            cout << "Please enter how much you wish to deposit: ";
            double initDeposit;
            cin >> initDeposit;

            cout << "Please enter a four digit number to set as the PIN: ";
            string PIN;
            cin >> PIN;

            cout << "Please enter a 9 digit number to set as the account number: ";
            string AccountNo;
            cin >> AccountNo;

            AddAccount(PIN, new StudentSavings(AccountNo, initDeposit, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
            cout << "Student Account Created" << endl;
            choice = -1;
        }
        else if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) < 18)
        {
            cout << "Student Account is only available to customers over the age of 18" << endl;
        }
        break;
    case 5:
        choice = -1;
        break;
    default:
        cout << "Not a valid choice" << endl;
        break;
    }
}
}

void Customer::AddAccount(string PIN, Account * a)
{
accountList.Add(PIN, a);
}

bool Customer::UseAccount(string PIN)
{
if (accountList.Get(PIN) != NULL)
{
    int choice = 0;

    while (choice != -1)
    {
        cout << "What would you like to do?" << endl;
        cout << "1: Deposit Cash" << endl;
        cout << "2: Deposit Cheque" << endl;
        cout << "3: Withdraw Cash" << endl;
        cout << "4: Show Balance" << endl;
        cout << "5: Exit" << endl;
        cout << "Enter Choice: ";
        cin >> choice;
        cout << endl;

        switch (choice)
        {
        case 1:
            {
                cout << "Enter Deposit Amount: ";
                double amount;
                cin >> amount;
                if (accountList.Get(PIN)->depositAmount(amount))
                {
                    time_t t = time(0);
                    struct tm * now = localtime( & t );

                    ofstream output;
                    output.open("Transactions.txt", ios::app);
                    output << "Name: " << name << " - Account Number: " << accountList.Get(PIN)->AccountNumber() << " - Deposit: £" << 
                        amount << " - Date: " << now->tm_mday << "/" << now->tm_mon + 1 << "/" << now->tm_year + 1900 << endl;
                    output.close();
                    cout << "Amount Deposited Successfully" << endl;
                }
                else
                    cout << "Deposit Invalid" << endl;

                choice = 0;
            }
            break;
        case 2:
            {
                time_t t = time(0);
                struct tm * now = localtime( & t );

                ofstream output;
                output.open("Transactions.txt", ios::app);
                output << "Name: " << name << " - Account Number: " << accountList.Get(PIN)->AccountNumber() << " - Cheque Deposit: £" 
                    << " - Date: " << now->tm_mday << "/" << now->tm_mon + 1 << "/" << now->tm_year + 1900 << endl;
                output.close();
                cout << "Amount Deposited Successfully" << endl;
            }
            break;
        case 3:
            {
                cout << "Enter Withdraw Amount: ";
                double amount;
                cin >> amount;
                if (accountList.Get(PIN)->widthdrawAmount(amount))
                {
                    time_t t = time(0);
                    struct tm * now = localtime( & t );

                    ofstream output;
                    output.open("Transactions.txt", ios::app);
                    output << "Name: " << name << " - Account Number: " << accountList.Get(PIN)->AccountNumber() << " - Withdrawal: £" << 
                        amount << " - Date: " << now->tm_mday << "/" << now->tm_mon + 1 << "/" << now->tm_year + 1900 << endl;
                    output.close();
                    cout << "Amount Withdrawn Successfully" << endl;
                }
                else
                    cout << "Withdraw Invalid" << endl;

                choice = 0;
            }
            break;
        case 4:
            {
                time_t t = time(0);
                struct tm * now = localtime( & t );

                accountList.Get(PIN)->addInterest(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900);

                cout << "Balance: £" << accountList.Get(PIN)->Amount() << endl;

                choice = 0;
            }
            break;
        case 5:
            choice = -1;
            break;
        default:
            choice = 0;
            break;
        }

        char yn;
        cout << "Do you want to use another service? (Y/N) ";
        cin >> yn;

        if ((yn == 'y' || yn == 'Y') && choice != -1)
        {
            choice = 0;
        }
        else
        {
            choice = -1;
        }
    }

    return true;
}
return false;
}

void Customer::RemoveAccount(string PIN)
{
char choice;

cout << "Are you sure? (Y/N): ";
cin >> choice;
cout << endl;
while (choice != 'y' || choice != 'Y' || choice != 'n' || choice != 'N')
{
    cout << "Are you sure? (Y/N): ";
    cin >> choice;
    cout << endl;
}

accountList.Remove(PIN);
}

void Customer::CreateMortgageManager()
{
//Grabs age from current date
time_t t = time(0);
struct tm * now = localtime( & t );

if (getAge(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900) >= 18)
{
    int choice = 0;

    cout << "Please enter the value of your House/Apartment: ";
    double value;
    cin >> value;

    cout << "Please enter the length of the payment (years) : 1, 2 or 4" << endl;
    int length;
    cin >> length;

    cout << "Please enter the PIN number of the bank account you wish to pay installments to: ";
    string accountPIN;
    cin >> accountPIN;

    if (accountList.Get(accountPIN) == NULL)
    {
        while (accountList.Get(accountPIN) == NULL)
        {
            cout << "Account PIN not valid or Account doesn't exist\n" << endl;         
            cout << "Please enter the PIN number of the bank account you wish to pay installments to: ";
            cin >> accountPIN;
        }
    }

    while (choice != -1)
    {
        cout << "What kind of Mortgage do you wish to create?" << endl;
        cout << "1: Fixed Rate Mortgage : " << ((value*0.8)+50)/(length * 12) << " per month with 5% Interest" << endl;
        cout << "2: Discount Mortgage   : " << ((value*0.8)+80)/(length * 12) << " per month with 3.8% Interest (5% Interest after 2 years)" << endl;
        cout << "3: Buy to Let Mortgage : "  << ((value*0.8)+120)/(length * 12) << " per month with 7.35% Interest" << endl;
        cout << "4: Cancel" << endl;
        cout << "Enter Choice: ";
        cin >> choice;
        cout << endl;

        string str;
        getline(cin,str);

        switch (choice)
        {
        case 1:
            {
                cout << "Please enter a PIN, so you can access your mortgage securely: ";
                string PIN;
                getline(cin,PIN);

                AddMortgage(PIN, new FixedRateMortgage(value, 50.0, accountList.Get(accountPIN), length, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
                cout << "Fixed Rate Mortgage Created" << endl;
                choice = -1;
            }
            break;
        case 2:
            {
                cout << "Please enter a PIN, so you can access your mortgage securely: ";
                string PIN;
                getline(cin,PIN);

                AddMortgage(PIN, new DiscountMortgage(value, 45.0, accountList.Get(accountPIN), length, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
                cout << "Discount Mortgage Created" << endl;
                choice = -1;
            }
            break;
        case 3:
            {
                cout << "Please enter a PIN, so you can access your mortgage securely: ";
                string PIN;
                getline(cin,PIN);

                AddMortgage(PIN, new BuyToLetMortgage(value, 70.0, accountList.Get(accountPIN), length, now->tm_mday, now->tm_mon + 1, now->tm_year + 1900));
                cout << "Buy To Let Mortgage Created" << endl;
                choice = -1;
            }
            break;
        case 4:
            choice = -1;
            break;
        default:
            cout << "Not a valid choice" << endl;
            break;
        }
    }
}
else
{
    cout << "Mortgages are only available to customers over the age of 18" << endl;
}
}

void Customer::AddMortgage(string PIN, Mortgage * m)
{
mortgageList.Add(PIN, m);
}

void Customer::UseMortgage(string PIN)
{
if (mortgageList.Get(PIN) != NULL)
{
    int choice = 0;

    while (choice != -1)
    {
        cout << "What would you like to do?" << endl;
        cout << "1: Pay Installment" << endl;
        cout << "2: Print Payment List" << endl;
        cout << "3: Exit" << endl;
        cout << "Enter Choice: ";
        cin >> choice;
        cout << endl;

        switch (choice)
        {
        case 1:
            {
                time_t t = time(0);
                struct tm * now = localtime( & t );

                mortgageList.Get(PIN)->PayInstallment(now->tm_mday, now->tm_mon + 1, now->tm_year + 1900);

                choice = 0;
            }
            break;
        case 2:
            {
                mortgageList.Get(PIN)->PrintPaymentLog();
            }
            break;
        case 3:
            choice = -1;
            break;
        default:
            choice = 0;
            break;
        }

        char yn;
        cout << "Do you want to use another service? (Y/N) ";
        cin >> yn;

        if ((yn == 'y' || yn == 'Y') && choice != -1)
        {
            choice = 0;
        }
        else
        {
            choice = -1;
        }
    }
}
}

void Customer::RemoveMortgage(string PIN)
{
char choice;

cout << "Are you sure? (Y/N): ";
cin >> choice;
cout << endl;
while (choice != 'y' || choice != 'Y' || choice != 'n' || choice != 'N')
{
    cout << "Are you sure? (Y/N): ";
    cin >> choice;
    cout << endl;
}

mortgageList.Remove(PIN);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:26:21.857

如果您有一个 1 元素列表并调用 会发生`Get`什么？

```
Tvalue Get(Tkey key)
{
    Node<Tkey, Tvalue> *p;

    p = head;

    while (p->next != NULL)
    {
        if (p->keyData == key)
        {
            return p->valueData;
        }
        p = p->next;
    }

    return NULL;
} 
```

`p`不是 NULL，而是`p->next`NULL，这意味着你永远不会进入`while`循环体。这意味着您将返回 NULL，并且如果您随后尝试取消引用：

```
customerList.Get(1)->AddAccount("9081", new JuniorCurrentAccount("100126764", 50, 25,12,2010)); 
```

...那么您可能会遇到访问冲突。

# php - 将 textarea 内容保存到 mysql 然后在页面上正确显示

> ID：13630294
> 
> 赞同：2
> 
> 时间：2012-11-29T16:31:00.737
> 
> 标签：php, mysql, forms, textarea

我正在尝试将 textarea 的内容保存到 mysql 数据库中，然后稍后在页面上回显内容。

这是我在做什么：

在文本区域中，我按字面意思输入：

```
Hello

How's life? 
```

要将其存储在 mysql 中，我正在使用：

```
$textarea = mysql_real_escape_string($_POST['textarea']); 
```

在 mysql 中，它看起来像：

```
Hello\r\n\r\nHow\\\'s life? 
```

要回显到页面上，我正在使用：

```
echo nl2br($textarea); 
```

但是，它仍然与 mysql 中显示的完全一样。如何`\`从输出中删除多余的 's 并在正确的行上显示内容？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:36:39.923

尝试使用：

```
echo preg_replace('/[\s]+/', ' ', stripslashes($textarea)); 
```

> [stripslashses](http://us3.php.net/stripslashes)返回一个去掉了反斜杠的字符串。

# python - 如何（简单地）构建一个整数和浮点混合numpy数组

> ID：13630295
> 
> 赞同：8
> 
> 时间：2012-11-29T16:31:00.330
> 
> 标签：python, multidimensional-array, numpy

我只想创建一个大小为 (N,m) 的 numpy 数组，其中只有第一列由整数组成，其余的默认为浮点数。因此，如果初始化为零，它应该是结果：

```
array([[ 0,  0.,  0.,  0.,  0.],
       [ 0,  0.,  0.,  0.,  0.],
       [ 0,  0.,  0.,  0.,  0.],
       [ 0,  0.,  0.,  0.,  0.],
       [ 0,  0.,  0.,  0.,  0.]]) 
```

在尝试创建这样一个结构化数组时，我所做的所有尝试都返回了一些元组子元素。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T16:57:45.413

你可以使用一个数组`dtype = object`：

```
>>> arr = np.ndarray((10,4),dtype = object)
>>> arr[:,0] = int(10)
>>> arr[:,1:] = float(10)
>>> arr
array([[10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0],
       [10, 10.0, 10.0, 10.0]], dtype=object) 
```

请注意，您在进行算术运算时会得到正确的行为。

```
>>> arr / 3
array([[3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333],
       [3, 3.33333333333, 3.33333333333, 3.33333333333]], dtype=object) 
```

或者你可以使用[`numpy.recarray`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.recarray.html)：

```
>>> import numpy as np
>>> arr = np.recarray(10,dtype=[('x',int),('y',float,4)])
>>> arr[:] = 0
>>> arr
rec.array([(0, array([ 0.,  0.,  0.,  0.])), (0, array([ 0.,  0.,  0.,  0.])),
           (0, array([ 0.,  0.,  0.,  0.])), (0, array([ 0.,  0.,  0.,  0.])),
           (0, array([ 0.,  0.,  0.,  0.])), (0, array([ 0.,  0.,  0.,  0.])),
           (0, array([ 0.,  0.,  0.,  0.])), (0, array([ 0.,  0.,  0.,  0.])),
           (0, array([ 0.,  0.,  0.,  0.])), (0, array([ 0.,  0.,  0.,  0.]))], 
  dtype=[('x', '<i4'), ('y', '<f8', (4,))])
>>> arr['x']
array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
>>> arr['y']
array([[ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.]]) 
```

如果您需要对所有值进行算术运算，则必须分别对每个字段执行操作，例如

```
>>> arr['x'] += 2
>>> arr['y'] += 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:13:52.330

虽然我可以想到很多你一开始就不应该这样做的原因，但这不是我判断的，我讨厌人们试图降低我自己的快速'n'dirty hack的价值。

理由是使用`dtype=object`. 由于 Python 中的一切都是对象，因此您可以混合数字类型，同时仍保持数组内部的同质性。我建议以下，但您显然可以适应您的需求：

```
import numpy

rows = 5
a = numpy.zeros((rows,5)).astype(object)
a[:,0] = a[:,0].astype(int)
print a

[[0  0.0  0.0  0.0  0.0]
 [0  0.0  0.0  0.0  0.0]
 [0  0.0  0.0  0.0  0.0]
 [0  0.0  0.0  0.0  0.0]
 [0  0.0  0.0  0.0  0.0]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:52:32.933

在 numpy 文档中阅读此内容，这表明所有成员必须是同一类型

> NumPy 的主要对象是齐次多维数组。它是一个元素表（通常是数字），所有类型都相同，由正整数元组索引。

# javascript - 调用带有 ExternalInterface.call() 注入的 JS 的 AS 函数

> ID：13630297
> 
> 赞同：1
> 
> 时间：2012-11-29T16:31:05.817
> 
> 标签：javascript, actionscript-3, facebook-javascript-sdk

如何从已注入页面的 JavaScript 调用 ActionScript 3 中的函数`ExternalInterface.call()`？

我已经尝试了很多方法，但无济于事。

这是所有必要代码的简化版本：

```
public function myClass() {

    ExternalInterface.addCallback("callASFunction", myASFunction);

    var loadJS:XML =
    <script><![CDATA[

        function(oid){

            ob = document.getElementById(oid);

            if (!window.FB) { /* Include FB JS SDK */ }

            window.fbAsyncInit = function() {

                FB.init({ ... });

                FB.getLoginStatus(function(response) {
                 /* ob.callASFunction(); <= ERROR */
                    ob.callASFunction(response.status); /* <= FIX */
                });
            }
        }

    ]]></script>

    // Inject the JS into the page
    ExternalInterface.call(loadJS, ExternalInterface.objectID);

}

public function myASFunction(vars:String){

    // Do great things

} 
```

## **评论**

标有 的行在`<= ERROR`Chrome 中抛出以下内容：

```
Uncaught Error: Error calling method on NPObject. 
```

在 FF 中：

```
uncaught exception: Error in Actionscript. Use a try/catch block to find error. 
```

我认为问题在于在调用`ExternalInterface.addCallback()`之前没有在 Flash 对象上附加侦听`ob.callASFunction()`器。

或者，也许我错过了一些东西。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:13:04.223

对此有两种可能的解决方法。

**不要为被调用的 AS 方法强制使用参数**

```
public function myASFunction(vars:String = null){ ... } 
```

或者

**始终将变量传递给方法**

```
ob.callASFunction(response.status); /* <= FIX */ 
```

有点打脸的时刻。:{D

* * *

注意：我已经编辑了我的答案以反映 JS 修复，而不是 AS 修复。

# html - HTML5 html-tag 和 DOCTYPE

> ID：13630299
> 
> 赞同：10
> 
> 时间：2012-11-29T16:31:15.143
> 
> 标签：html, xhtml, doctype

根据我的阅读，启动 HTML5 页面的正确方法是：

```
<!DOCTYPE html>
<html> 
```

这些行中没有更多内容。这是真的？（我问是因为 Visual Studio 的功能不止这些。）

（另外，我想知道 HTML5 是否真的是当前标准，或者我应该使用 XHTML5 还是其他版本。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T16:41:48.503

根据[HTML 生活标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#the-doctype)和[W3C 规范](http://dev.w3.org/html5/spec/single-page.html#the-doctype)，doctype 是必需的序言，但出于遗留原因需要。我引用：

> 1.  一个字符串，它是一个不区分大小写的 ASCII 匹配字符串 `"<!DOCTYPE"`。
> 2.  一个或多个空格字符。
> 3.  与字符串“html”匹配的不区分大小写的 ASCII 字符串。
> 4.  可选地，DOCTYPE 遗留字符串或过时的允许 DOCTYPE 字符串（定义如下）。
> 5.  零个或多个空格字符。
> 6.  一个 U+003E 大于号字符 (>)。
> 
> 换句话说，`<!DOCTYPE html>`不区分大小写。

对于`<html></html>`有效的文件

> （另外，我想知道 HTML5 是否真的是当前标准，或者我应该使用 XHTML5 还是其他版本。）

它不是当前的标准恕我直言，因为它还没有完成。但是[这篇文章](http://tympanus.net/codrops/2011/11/24/top-10-reasons-to-use-html5-right-now/)很好地解释了现在使用它的 10 个理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T17:31:38.520

大部分是的。[但是该](http://dev.w3.org/html5/spec/the-html-element.html#the-html-element)[元素](http://dev.w3.org/html5/spec/the-html-element.html#the-html-element)的 HTML5 规范说[`<html>`](http://dev.w3.org/html5/spec/the-html-element.html#the-html-element)

> 鼓励作者在根 html 元素上指定 lang 属性，给出文档的语言。这有助于语音合成工具确定使用什么发音，帮助翻译工具确定使用什么规则，等等。

更好的是，对于内容为美式英语的页面，将是

```
<!DOCTYPE html>
<html lang="en-us"> 
```

此外，如果您使用 XHTML5 作为服务，`application/xhtml+xml`您将需要添加命名空间，以及 lang 属性的 XML 等效项：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T16:41:17.957

对，是真的。HTML5 中没有更复杂的文档类型。新标准简化了，只有你说的那个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T17:33:14.433

根据 HTML5 草案，“ [DOCTYPE](http://www.w3.org/TR/html5/syntax.html#the-doctype)是必需的序言”。建议使用序言`<!DOCTYPE html>`，但允许使用遗留文档类型作为替代，尽管它们“不应使用，除非文档是从无法输出较短字符串的系统生成的”。除了它之外，唯一需要的部分是`title`元素，在某些条件下甚至可以省略。`<html>`标签不是必需的。

HTML5 不是标准。它甚至不是 W3C 推荐的（还）。你应该使用什么取决于你在做什么。您认为您使用的是哪个版本的 HTML 并不重要。重要的是您拥有的标记以及浏览器（和搜索引擎等）如何处理它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T16:37:22.443

是的，据我所知，这是正确的。

# redirect - Nginx 域名重定向

> ID：13630300
> 
> 赞同：3
> 
> 时间：2012-11-29T16:31:16.653
> 
> 标签：redirect, dns, nginx

假设我有一个名为 xyz.co 的网站，我还有其他具有相同前缀的域名，例如 xyz.com、xyz.it、xyz.co.it

现在 nginx 在端口 80 中的 nginx.conf 中的 server_name xyz.co 工作正常我希望所有其他域都重定向到 xyz.co，我也希望上面的 www.* 版本重定向到 xyz.co。我怎样才能得到这个？这是 nginx 网络服务器级别的变化吗？或者我需要在 DNS 中进行此更改？

**更新：**我试过这个`nginx.conf`但没用......

```
server
{
listen 80;
server_name xyz.co xyz.com, xyz.it, xyz.co.it;
rewrite ^/(.*) http://xyz.co permanent;
} 
```

我首先尝试在 ServerFault 中发布这个问题，但那里没有回应 - [https://serverfault.com/questions/453472/nginx-domain-name-redirects](https://serverfault.com/questions/453472/nginx-domain-name-redirects)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T22:13:04.960

为所有需要重定向的域名添加一个服务器块。像这样：

```
server {
    listen 80;
    server_name xyz.com, xyz.it, xyz.co.it;
    rewrite ^ http://xyz.co$request_uri permanent;
} 
```

和 xyz.co 域的另一个服务器块：

```
server {
    listen 80;
    server_name xyz.co;

    #other settings
} 
```

这样，当您转到需要重定向的域名之一时，nginx 将简单地重定向到 xyz.co 并移动到另一个服务器块，您可以在其中添加所有设置（根文件夹、位置块等）

# php - 防止机器人提交表单（链接）这是矫枉过正吗？

> ID：13630301
> 
> 赞同：0
> 
> 时间：2012-11-29T16:31:17.080
> 
> 标签：php, form-submit

目前我只是使用一个隐藏的文本字段并检查它是否被填充。理论上，如果它被填充了，那么机器人一定已经完成了它，因为它是隐藏的，用户永远无法填充它。

我发现这篇[文章](http://jasonlau.biz/home/php/catching-automated-form-submissions-and-trapping-spam-bots)详细介绍了如何阻止机器人自动提交表单。它创建一个表单并使用 CSS 将其隐藏，`left: 1000px; top: 1000px;`然后将机器人的 IP 添加到 htaccess 文件中以有效地禁止机器人。

第二种方法似乎有点矫枉过正，尤其是因为它可能会污染您的 .htaccess 文件。我的方法够用吗？第二个合适吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:42:37.460

您的方法似乎不错，但是将 IP 地址添加到 .htaccess 是过分的，我不会特别推荐它。该文件会很快变得难以管理，并且通过 IP 禁止机器人/垃圾邮件发送者就像放牧猫一样。

老实说，最好的验证码是最简单的验证码之一：提出问题并期待人类的回应。

> 天空是什么颜色？*_* _
> 
> 此页面标题中的第二个单词是什么？*_* _

只是避免提出数学问题，因为现在大多数机器人都会检查这样的事情。

# android - 在android中访问/system

> ID：13630302
> 
> 赞同：0
> 
> 时间：2012-11-29T16:31:18.030
> 
> 标签：android

我希望我的应用程序以 root 身份运行并访问 /system 文件夹。我想访问 build.prop 文件。我已经尝试并获得了 su 权限，但我不知道如何读取/写入 / 文件夹中的文件。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T19:16:23.487

安装 ES File Explore..in 进入设置并打开 Root。之后，一个弹出窗口将出现在第二个弹出窗口中并打开它。！就是这样..！现在在顶部，选择设备以查看您的系统文件.所以，你可以修改它..！system/build-prp

# c# - 了解隐藏字段

> ID：13630305
> 
> 赞同：0
> 
> 时间：2012-11-29T16:31:19.583
> 
> 标签：c#, javascript, asp.net

我想知道你们是否可以帮助我理解隐藏字段，因为我认为我没有让它们起作用。

在 aspx 页面上，我有：

```
<asp:HiddenField ID="hidVal" value="" runat="server" /> 
```

单击按钮时，我有一个名为的 JavaScript 函数

```
<button type="button" id="search" onclientclick="search_click()">Search</button> 
```

随着功能是

```
function search_click() {
    document.getElementById('hidVal').Value = "1";

    <% save(); %>
} 
```

在 aspx.cs 中，我有一个执行此操作的函数：

```
using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\fgreene\Desktop\savedAdresses.txt", true))
{
    file.WriteLine(hidVal.Value);
} 
```

单击按钮后，我查看了文件，没有任何变化。
我的方法是正确的还是我不理解它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:37:00.557

您需要引用隐藏字段的客户端 ID，这可能不是`hidVal`，因为在 HTML 中生成的实际客户端 ID 将基于父控件的命名容器。有两种方法可以解决此问题。首先，您可以使控件上的客户端 ID 为*静态*（这基本上告诉 ASP.NET*使 ID 完全符合我所说的。*）：

```
<asp:HiddenField ID="hidVal" value="" ClientIDMode="Static" runat="server" /> 
```

其次，您可以在生成 JavaScript 时从服务器查找 ClientID 属性：

```
document.getElementById('<%= hidVal.ClientID %>').Value = "1"; 
```

这将直接在 JavaScript 代码中呈现实际的客户端 ID。任何一种方法都可能很好，但第二种方法只有在 JavaScript 直接嵌入到您的 ASPX 文件中而不是在静态 .JS 文件中时才有效。

**调用服务器端方法：**

您问题的第二部分是关于按下按钮时调用服务器端代码。您应该通过将`OnClick`处理程序附加到您的按钮来做到这一点：

```
<button runat="server" id="BtnSearch" onclientclick="search_click()" OnClick="btnSearch_Click">Search</button> 
```

当按下按钮时，页面将被回发并`btnSearch_Click`调用事件处理程序。然后，您将能够处理任何服务器端逻辑，并检查隐藏字段的值。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:39:12.603

在aspx`<% save(); %>`页面中放入 JavaScript 函数会导致*页面在服务器上构建时*`save`运行，而不是在客户端调用周围的 JavaScript 函数时运行。此时，隐藏字段为空，因此您的文件会写入一个空行。当用户单击按钮时，隐藏字段被填充，但没有任何东西可以告诉服务器这已经发生了。

 *您需要做的是：

```
// In your aspx, for the javascript function: remove the call to save,
// use the correct ID for the hidden field
function search_click() {
    document.getElementById('<%= hidVal.ClientID %>').Value = "1";
}

// In your aspx in place of the button put
<asp:Button id="search" runat="server"
            onclientclick="search_click(); return true;" onclick="search_click">
    Search
</asp:Button>
// This results in a button that calls the javascript function on click, and
// then posts back to the server saying that the button has been clicked

// In your C#, this function gets called when the client posts back to
// say that the button has been clicked.
public protected void search_click(object sender, EventArgs e)
{
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(
               @"C:\Users\fgreene\Desktop\savedAdresses.txt", true))
    {
        file.WriteLine(hidVal.Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:40:21.950

您要做的是通过客户端调用执行服务器端功能（保存）。这不起作用，因为它在页面首次加载时调用 save() 然后将返回值（可能什么都没有）放入您放置的代码中

```
<% save(); %> 
```

相反，您需要您的按钮来触发保存功能，但首先触发您的 javascript。为此，您可以创建一个 asp:button （呈现为 ），然后添加“OnClientClick”（用于您的 javascript）和“OnClick”（用于您的服务器端功能）。

```
<asp:Button id="btnSearch" runat="server" OnClick="btnSearch_Click" OnClientClick="search_click()" text="Search" /> 
```

然后在您的 C# 代码中，您需要将该方法命名为与 OnClick 值相同：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\fgreene\Desktop\savedAdresses.txt", true))
    {
        file.WriteLine(hidVal.Value);
    }
} 
```

创建服务器端函数的最简单方法是双击设计视图中的按钮，因为它会为您添加正确的方法调用。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T10:07:37.050

您可以在服务器端和客户端事件中更改隐藏字段值。

**在客户端更改值**

```
 <script type="text/javascript">
        function setvalue() {
            document.getElementById('hidVal').value = "1";
        }
  </script>

  <div>
     <asp:HiddenField ID="hidVal" value="" runat="server" />
        <br />
        <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="setvalue();" />
  </div> 
```

**在服务器端更改值**

```
 <div>
       <asp:HiddenField ID="hidVal" value="" runat="server" />
        <br />
       <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
    </div>

   protected void Button1_Click(object sender, EventArgs e)
    {
        hidVal.Value = "1";
    } 
```*

# combobox - ZK ComboBox onchange 改变列表框中的所有组合框

> ID：13630306
> 
> 赞同：1
> 
> 时间：2012-11-29T16:31:23.740
> 
> 标签：combobox, inline, onchange, zk

我对列表框和组合框行为有疑问。我有一个包含一组行的列表框，我尝试编辑内联并根据组合框的值更改字段的值。但是，当我在一行的组合中选择一个值时，其他行的组合框的所有值都会更改为相同的值。请让我知道我做错了什么。谢谢你的帮助！

这是我的代码：

```
 <template name="model" var="item">
                <listitem >
                    <listcell label="@load(item.id)"/>  
                    <listcell label="@load(item.descCodigoTrafico)"/>              
                    <listcell label="@load(item.descAmbitoDeTrafico)"/>
                    <listcell>
                        <combobox 
                            model="@load(vm.listaPrecioEspecial)" 
                            onChange="@command('addToUpdate', entry=item)"
                            selectedItem="@load(item.precioEspecial) @save(item.precioEspecial, before='updateItems')">
                            <template name="model" var="el">
                                <comboitem label="@load(el)"/>
                            </template>
                        </combobox>
                    </listcell>
                    <listcell label="@load(item.tipoDescuento)" />
                    <listcell>
                        <decimalbox inplace="true" 
                        value="@load(item.ppm) @save(item.ppm, before='updateItems')"
                        onChange="@command('addToUpdate', entry=item)" 
                        format="#.0000"/>
                    </listcell>
                </listitem>
            </template> 
```

以及de VM中两种方法的代码：

```
 @Command
public void addToUpdate(@BindingParam("entry") TblEscenarioCondTrafico item){
    itemsToUpdate.add(item);
    LOGGER.info(item.toString());
    for(TblEscenarioCondTrafico i : itemsToUpdate){
        LOGGER.info("Item a guardar " + i.toString());
        //LOGGER.info("Elemento...");
    }
}

@NotifyChange("listaTraficos")
@Command
public void updateItems() throws Exception{
    EscenarioCondTraficoService ects = new EscenarioCondTraficoService(em);
    for (TblEscenarioCondTrafico i : itemsToUpdate){
        LOGGER.info("Guardando " + i.toString());
        ects.save(i);
    }
    itemsToUpdate.clear();
    listaTraficos = getListaTraficos();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:33:43.670

问题应该是

```
model="@load(vm.listaPrecioEspecial)" 
```

`Collection`将每个设置为与其模型相同`Combobox`，因此它绑定到所有`Combobox`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-23T09:28:38.433

我有同样的问题，就像 Nabil A. 说的问题是模型，所有项目都一样。我解决了为每个项目创建一个新模型。代替：

```
model="@load(vm.listaPrecioEspecial)" 
```

我放了类似的东西：

```
model="@load(vm.getNewListaPrecioEspecial()) 
```

在 VM 类中，您必须创建一个名为 getNewListaPrecioEspecial 的方法，该方法返回一个新列表。（在我的例子中是一个新的 SortingPagingListModel）

# javascript - 为什么我的 Google Analytics（分析）配置文件过滤器不显示单独域的综合浏览量？

> ID：13630313
> 
> 赞同：0
> 
> 时间：2012-11-29T16:31:33.783
> 
> 标签：javascript, google-analytics, analytics

我有一个主域、子域和一个单独的 Tumblr 域的 GA 设置。我正在尝试让过滤器为 Tumblr 工作。我可以在显示 Tumblr 命中的主域级别实时查看综合浏览量，但在配置文件过滤器中看不到，这让我相信我的过滤器设置有问题。

**主要报告 GA 网址：**

```
 - example.com 
```

主域上的 GA 代码是：

```
 var pageTracker = _gat._getTracker('UA-XXXXXXX-1');
  pageTracker._setAllowLinker(true);
  pageTracker._setDomainName('none');
  pageTracker._trackPageview(); 
```

**博客过滤器网址：**

```
 - blog.example.com
 - example.tumblr.com 
```

Tumblr 上的 GA 代码是：

```
 _gaq.push(['_setAccount', 'UA-XXXXXXX-1']);
  _gaq.push(['_setDomainName', 'example.tumblr.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']); 
```

我有一个名为“博客”的配置文件，它有两个自定义过滤器：

```
 Include / Hostname / "blog\.example\.com"
  Include / Hostname / "tumblr" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:48:51.230

我发现了问题。我不需要为博客配置文件设置两个包含过滤器，而是只需要一个，并使用 OR 管道来包含两者：

```
tumblr|blog\.example\.com 
```

拥有两个单独的过滤器导致它们相互抵消。

# php - 消除 ajax 搜索中的空白

> ID：13630315
> 
> 赞同：1
> 
> 时间：2012-11-29T16:31:35.750
> 
> 标签：php, javascript, jquery, ajax

我创建了一个 ajax 搜索框，使用 keyup 函数在我的数据库中查找配置文件。

```
$('#asearch').keyup(function(){
    var search_term = $(this).val(); 
```

我遇到的问题是，在我的搜索框中，一旦我在输入名字后点击空格键，我的页面就不再填充结果。想要做到这一点，以便我可以搜索名字，输入空格和姓氏，仍然有结果。

```
if (isset($_POST['search_term'])){
    $search_term = mysql_real_escape_string(htmlentities($_POST['search_term']));

    if (!empty($search_term)){

        $search = mysql_query("SELECT `firstname`, `lastname` FROM `tempusers`
        WHERE `firstname` LIKE '%$search_term%'");
        $result_count = mysql_num_rows($search);

        while ($results_row = mysql_fetch_assoc($search)) {
            echo  '<li>', $results_row['firstname'],'  ', $results_row['lastname'], '</li></br>';
        }
    }

} 
```

尝试使用正则表达式`$search_term = preg_split('/[\s]+/', $search_term);`，但它没有像我希望的那样工作。任何人可能有的提示将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:32:36.207

使用[trim()](http://php.net/manual/en/function.trim.php)函数：

> 从字符串的开头和结尾去除空格（或其他字符）。

将其插入您的代码：

```
$search_term = mysql_real_escape_string(htmlentities(trim($_POST['search_term']))); 
```

顺便说一句，您在输入时使用 htmlentities 是否有原因？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:36:33.387

就像 Blam 之前所说的那样，有时需要拆分搜索字符串。我经常使用这种方法：

```
$search_term = str_replace(' ','%', trim($search_term));
//"paul dyk" will be changed to "paul%dyk"
//% will match any charackers between those you need. So if you need filter out those names like "pauladyk juk" use $search_term = str_replace(' ',' % ', trim($search_term)); as then spaces must exist, but there can be any words between them.

$search = mysql_query("SELECT CONCAT_WS(' ',firstname, lastname) as full_name FROM tempusers WHERE CONCAT_WS(' ',firstname, lastname) LIKE '%".mysql_real_escape_string($search_term)."%'");
//I would use concat_ws to join strings so if one of them is NULL it will not matter. Using concate with NULL you get no result

while ($results_row = mysql_fetch_assoc($search)) {
            echo  '< li>' . $results_row['full_name'].  '</ li>< br>';
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:45:36.580

让我们从“旁注”开始：

您只是查看选择查询中的名字列。查找“firstname lastname”的一种方法可能是修改您的搜索：

```
$search = mysql_query("SELECT firstname, lastname FROM tempusers
    WHERE CONCAT(firstname, ' ', lastname) LIKE '%$search_term%'"); 
```

因此，如果您想在姓氏中找到任何内容，您也需要查看那里。

然后回到搜索查询：

我通常首先做的是将查询拆分为“令牌”。我这样做是为了确保我也可以找到 - 例如“lastname firstname”和类似的查询（例如，人们可能输入“paul dyk”但仍想找到“paul van dyk”）。

一个简单的方法是使用explode(' ', $search_term)，只要你的用户表现良好，它就会起作用。另一种选择是您在问题中提到的正则表达式。

然后使用这些“子查询”来搜索您的数据库。

explode() 会给你一个单词数组。

```
array(
   'paul',
   'van',
   'dyk'
) 
```

从那里你需要构建你的 SQL 查询：

```
// DON'T DO THE ESCAPE THING BEFORE THIS!
$words = explode(' ', $search_term)

$sql = 'SELECT `firstname`, `lastname` FROM `tempusers` WHERE 1 = 1';

for ($words as $word) {
   if (!empty($word)) {
     $word = mysql_real_escape_string($word);
     $sql .= " AND (firstname LIKE '%" . $word . "%' OR lastname LIKE '%" . $word . "%')";
   }
}

$search = mysql_query($sql); 
```

这将建立一个查询，它将“一个接一个”而不是按特定顺序搜索每个单词。不过，它有点慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:38:48.893

```
$('#asearch').keyup(function(){
    var search_term = this.value.trim();
}); 
```

或者如果坚持使用 jQuery

```
$('#asearch').keyup(function(){
    var search_term = $.trim($(this).val());
}); 
```

在将值发送到服务器端之前，将在末尾/开头剪掉空格。

# php - 在php中自动将ics文件导入outlook

> ID：13630322
> 
> 赞同：1
> 
> 时间：2012-11-29T16:31:54.823
> 
> 标签：php, icalendar

我在 joomla 做会议室预订项目。（即*jevents*）。创建预订邮件后，应自动通过日历约会发送给团队成员。

为此，我使用了生成 ics 文件下方的代码，但我需要将其更改为自动过程。专家可以给出想法或步骤来完成这个模块。

```
<?php
header("Content-Type: text/Calendar");
header("Content-Disposition: inline; filename=alert.ics"); /* for ics file */

/*$year = $_POST['year'];
$month = $_POST['month'];
$day = $_POST['day'];
$time = $_POST['time'] . '00';
$summary = $_POST['summary'];*/

$year = '2012'; /* year */
$month = '11'; /* month */
$day = '30'; /* day */
$time = '12:00'; /* time of the events */
$summary = 'Treat in Chennai Five Star Hotel';

echo "BEGIN:VCALENDAR\n";
echo "VERSION:2.0\n";
echo "PRODID:-//YourSite//NONSGML YourSite//EN\n";
echo "METHOD:PUBLISH\n"; // required by Outlook
echo "BEGIN:VEVENT\n";
echo "UID:".date('Ymd').'T'.date('His')."-".rand()."-www.vrv.it\n"; // required by Outlook
echo "DTSTAMP:".date('Ymd').'T'.date('His')."\n"; // required by Outlook
echo "DTSTART:$year"."$month"."$day"."T"."$time\n"; //20120824T093200 (Datetime format required) 
echo "SUMMARY:$summary\n"; /* summary */
echo "DESCRIPTION: this is just a test\n"; /* Description */
echo "END:VEVENT\n";
echo "END:VCALENDAR\n";
?> 
```

# java - Jsoup 将 HTML 属性的输出从单引号更改为双引号

> ID：13630323
> 
> 赞同：6
> 
> 时间：2012-11-29T16:32:09.023
> 
> 标签：java, javascript, html, jsoup

我们使用 Jsoup 来解析、操作和扩展一个 html 模板。到目前为止，一切正常，直到涉及与 HTML 属性结合使用的单引号

```
<span data-attr='JSON'></span> 
```

该 HTML 片段被转换为

```
<span data-attr="JSON"></span> 
```

这将与仅用双引号指定为有效的内部 json 数据冲突

```
{"param" : "value"} //valid
{'param' : 'value'} //invalid 
```

所以我们需要强制 Jsoup**不要**将那些单引号更改为双引号，但是如何？目前这是我们解析和生成 html 内容的代码。

```
pageTemplate = Jsoup.parse(new File(mainTemplateFilePath), "UTF-8");
pageTemplate.outputSettings().escapeMode(Entities.EscapeMode.xhtml);
pageTemplate.outputSettings().charset("UTF-8");

... adding some html 

pageTemplate.html(); // will output the double quoted attributes :( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:41:56.730

在将 JSON 值放入属性*之前*，您需要对其进行 HTML 编码。`data-attr`当你这样做时，你应该得到这个：

```
<span data-attr="{&quot;param&quot;:&quot;value&quot;}"></span> 
```

尽管这看起来相当令人生畏，但它实际上是有效的 HTML。当您执行相应的 JavaScript 时`someSpan.getAttribute("data-attr")`，这些`&quot;`值将`"`自动转换为值，让您可以访问原始的有效 JSON 字符串。

# coldfusion - 无法使用 cfexchangeConnection 访问委派日历

> ID：13630324
> 
> 赞同：4
> 
> 时间：2012-11-29T16:32:12.937
> 
> 标签：coldfusion, exchange-server, exchangewebservices

## **概要：**

我需要访问已在公司 Exchange Server 上将其日历访问权限委托给我的用户的日历事件。委派到位，我可以使用 Outlook 2007 客户端查看/修改其他用户的日历，因此我知道委派权限是正确的，但是我无法使用 ColdFusion cfexchange* 标签查询事件。

根据 ColdFusion 文档，这是可能的，请参阅[http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec14f31-7ff6.html](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec14f31-7ff6.html)

## **系统：**

*   ColdFusion 10 Enterprise x64 Update 0 在 Ubuntu Server 12.04 x64 LTS 上运行
*   在 Windows Server 2008 R2 上运行的 Exchange Server Standard 2010 SP 1
*   在 Windows XP Professional SP3 上运行的 Outlook 2007

## **细节**

以下代码是我正在使用的，删除了特定和敏感位。如果我删除了mailboxName 属性，或者如果我使用相同的用户名值，那么我就能够成功地查看我的25 个日历事件。但是，当我使用将日历访问权限委托给我的人的邮箱名称时，我收到以下错误。

另一个用户从他们的 Outlook 2007 中委派了我的访问权限。他们通过转到“工具”菜单，选择“选项”，单击“代表”，然后单击“添加”按钮，选择我的姓名，单击“添加”按钮，单击“确定”按钮，然后给我 Calendar = Editor 权限和 None 所有其他权限。

我还应该注意，如果我使用已被授予 Exchange 管理员权限并访问其他用户邮箱的 Exchange 帐户，我可以看到其他用户的事件。但是，如果我尝试使用我的凭据，这是我们需要它工作的方式，它会失败。

## **代码：**

```
<cfexchangeConnection 
  action = "open" 
  connection = "myExchangeConnection"
  username = "myUserName"
  password = "mySecr3t"
  server = "exchange.company.com"
  formBasedAuthentication = "yes"
  formBasedAuthenticationURL = "https://exchange.company.com/owa/auth/owaauth.dll"
  protocol = "https"
  serverversion = "2010"
  mailboxName = "otherUserName"
> 
<cfexchangecalendar 
  action="get" 
  name="myCalendar" 
  connection="myExchangeConnection"
  >
  <cfexchangefilter 
    name = "maxRows" 
    value = "25">
</cfexchangecalendar> 
```

## **错误信息**

```
Detail   The specified object was not found in the store.
Message  Could not connect to the exchange server with the credentials.
StackTrace   coldfusion.exchange.webservice.EWS
Exception: Could not connect to the exchange server with the credentials. at coldfusion.exchange.webservice.EWSConnection.login(EWSConnection.java:1777) at coldfusion.tagext.net.exchange.ExchangeTag.createConnection(ExchangeTag.java:499) at coldfusion.tagext.net.exchange.ExchangeConnectionTag.doEndTag(ExchangeConnectionTag.java:70) at coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2800) at cfindex2ecfm2100699610.runPage(/mnt/hgfs/ftcr/index.cfm:72) at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:244) at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:444) at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65) at coldfusion.filter.IpFilter.invoke(IpFilter.java:64) at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:443) at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48) at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40) at coldfusion.filter.PathFilter.invoke(PathFilter.java:112) at coldfusion.filter.LicenseFilter.invoke(LicenseFilter.java:30) at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:94) at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28) at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38) at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46) at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38) at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22) at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62) at coldfusion.filter.RequestThrottleFilter.invoke(RequestThrottleFilter.java:151) at coldfusion.CfmServlet.service(CfmServlet.java:204) at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42) at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:414) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:24:25.180

我终于能够让它工作了。问题似乎不在于上面发布的代码，而是 Adob​​e 文档中缺乏清晰度以及用户“otherUserName”必须授予“myUserName”的访问权限的调整。

“开发 ColdFusion 10 应用程序”文档中的“管理与 Exchange 服务器的连接”部分指出“您还可以连接到其所有者已授予登录用户名访问权限的任何邮箱”。我理解这意味着如果所有者*仅将日历访问权限*委派给我的用户帐户，我就可以查询他们的日历。然而，情况似乎并非如此。在我能够查询他们的日历事件之​​前，用户必须**将日历访问和收件箱访问都委托给我的用户帐户。**

我发现实现此目的的另一种方法是创建一个具有 Exchange 管理员权限的 Exchange 帐户并授予其访问用户邮箱的权限。然后，我将使用此 Exchange 帐户作为 cfexchangeconnection 中的用户名和密码，并可以查询该 Exchange 帐户有权访问的任何用户的事件。

# python - 如何使用 Python 异步接收和应答套接字？

> ID：13630326
> 
> 赞同：0
> 
> 时间：2012-11-29T16:32:15.110
> 
> 标签：python, networking, network-programming

我正在开发一个非常基本的“图像流”服务器作为学校科目，我已经完成了大部分工作，但我仍然坚持数据和控制相关套接字之间的分离：

我的结构是： TCPServer（我的服务器，用作控制套接字）包含一个 dataSocket（仅用于发送图像并在我的 TCPServer 对象中初始化，当我收到某个查询时）

当我通过我的 dataSocket 发送数据（图像）时，我仍然需要查看客户端是否发送了 PAUSE 或 STOP 请求，但是如果我使用 python 的`self.request.recv(1024)`服务器等待响应而不是继续发送数据（这很合乎逻辑） .

我应该怎么做才能防止这种行为？我是否应该`recv(1024)`在单独的线程上启动并在每个循环中运行它（并检查我是否在两次迭代之间获得任何相关数据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:40:35.197

[Twisted](http://twistedmatrix.com/documents/current/core/howto/servers.html)应该可以解决问题！它在 Python 中处理异步套接字

# regex - 正则表达式在 sed 中重复缩进

> ID：13630336
> 
> 赞同：2
> 
> 时间：2012-11-29T16:32:38.163
> 
> 标签：regex, sed, solaris

这就是我想要做的：

如果我遇到这样的模式

```
someVarX: val1 
```

我想插入

```
someVarY: val2 
```

在下一行

**...但这里有一个问题：**

**someVarX: val1**可以在空格（缩进）之前有一个数字，计数在 0 和 N 之间的任何位置，我还想在下一行重复该确切的缩进。因此，如果**someVarX: val1**前面有 3 个空格，那么我也希望**someVarY: val2**前面有 3 个空格。

这是我尝试过的：

```
s/\n( +)someVarX: val1/\n${1}someVarX: val1\n${1}someVarY: val2/ 
```

希望 ${1} 将搜索模式中的捕获组插入替换字符串但得到：

```
sed: command garbled: ... 
```

操作系统 os SunOS 5.10。我无法运行`sed --version`，它告诉我选项 --version 是非法的。

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:42:34.560

假设您的输入类似于：

```
<< EOF > infile
someVarX: val1
   someVarX: val1
 someVarX: val1
    someVarX: val1
EOF 
```

您可以像这样完成它（使用 GNU sed ERE 测试）：

```
<infile sed -r 's/^( *)someVarX: .*/&\n\1someVarY: val2/' 
```

BRE 和更便携的选项也是如此（也使用 FreeBSD sed 进行了测试）：

```
sed '/^ *someVarX: .*/ { G; s/^\( *\)someVarX: .*/&\1someVarY: val2/; }' infile 
```

输出：

```
someVarX: val1
someVarY: val2
   someVarX: val1
   someVarY: val2
 someVarX: val1
 someVarY: val2
    someVarX: val1
    someVarY: val2 
```

请注意，用于`^`将正则表达式锚定在行首，而不是`\n`因为 sed 永远不会在输入中看到换行符。也使用`*`, 除非你总是在行首有空格。

替换中的和号 ( `&`) 被整个匹配替换，反向引用 ( `\1`) 插入适量的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:58:04.503

这就是最终奏效的方法：

```
 s/^\( *\)someVarX: val1/&\
\1someVarY: val2/ 
```

它必须在 sed S&R 规范文件的两行中完成，我们称之为它`snrspec.sed`，它还包含其他 S&R 指令：

```
1,/^END/{
        s/ABC/XYZ/

        ...

        s/^\( *\)someVarX: val1/&\
\1someVarY: val2/

} 
```

然后我打电话给sed：

```
sed -f snrspec.sed inputfile.txt > outputfile.txt 
```

但是，如果有人知道如何做，我更愿意在一行中完成，因为它显然会更优雅。但上述方法奏效了，我进行了大规模的 S&R 操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:35:11.223

这适用于任何 sed：

```
sed -n 'p;s/^\([ \t]*\)someVarX: val1/\1someVarY: val2/p' file 
```

如果你想要更可扩展的东西，这里是 awk 解决方案：

```
awk '1; /^[ \t]*someVarX: val1/{ sub(/[^ \t].*/,"someVarY: val2"); print}' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T20:25:16.133

这可能对你有用（GNU sed）：

```
sed '/someVarX: val1/{h;G;s//someVarY: val2/2}' file 
```

# tsql - 编写一个查询，其中日期范围取决于另一个字段的值

> ID：13630340
> 
> 赞同：0
> 
> 时间：2012-11-29T16:32:48.637
> 
> 标签：tsql

我正在编写一份报告，该报告作为 select 子句的一部分将列出一个日期（salesdate）。在 where 子句中还使用 Salesdate 来设置报告所基于的最早销售日期（例如，我希望报告列出销售日期 > 2012-11-01 的所有销售）。但是，此日期将根据报告中的另一个字段而改变。例如，对于 item = item1，我不想要早于 2012-10-01 的任何记录，但对于 item = item2，我不想要早于 2012-11-01 的任何记录。我想到了这个：

当 item = item1 then salesdate > 2012-10-01 else case when item = item2 then salesdate > 2012-11-01 在 select 和 where 子句中没有太大的信心，当然它不起作用（case not期待一个条件）。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:29:57.663

如果我正确理解了您的问题，我认为您可以使用 WHERE 子句中的复合谓词来完成此操作。

例如：

```
...    WHERE (Item = Item1 AND SalesDate > '2012-10-01') OR (Item = Item2 AND SalesDate > '2012-11-01') 
```

这实际上会提供更好的性能，因为 SQL 优化器不必在 WHERE 子句中整理 case 语句。

高温高压

# java - 如何在 Java 中将整数添加到 char 中？

> ID：13630346
> 
> 赞同：3
> 
> 时间：2012-11-29T16:33:08.953
> 
> 标签：java, char, encryption

我正在用 Java 制作一个密码，但我不能做以下事情：我想编辑一个 char 数组的值来加密它

我该怎么做？

改变每个 char 的 ASCII 值可能是答案，我不知道；这就是我问你们的原因！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T16:35:50.017

您可以将 an 添加`int`到 a `char`，但结果是`int`- 您必须转换回 to`char`才能将其放回数组中，除非您使用复合赋值运算符：

```
array[x] += someInt; 
```

或者

```
array[x] = (char) (array[x] + someInt); 
```

但是，通常这*不是*执行加密的适当方式。您通常会得到不可打印的字符，或者在 Unicode 中甚至没有特定含义的字符。相反，大多数加密算法设计用于处理任意*二进制*数据——即字节数组。

通常你会先将字符串转换为字节数组（例如，使用`String.getBytes(charset)`- 明确指定编码）。然后对字节数组进行加密，给你一个新的字节数组。如果您*确实*需要将其转换回文本，请使用 base64 来执行此操作 - 不要*使用*，`new String(encryptedBytes)`因为您不再拥有以普通文本编码方式编码的文本数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T16:34:22.277

在 Java 中，`char`并且`int`是兼容的类型，因此只需使用`+`运算符添加它们。

```
char c = 'c';
int x = 10; 
```

`c + x`结果是一个整数，因此您需要*显式转换*以将其分配给您的字符变量。

```
c = (char)(c + x); // After this assignment, c = 'm' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:35:05.727

当使用 26 个字母时，简单的对称旋转密码使用相同的功能来编码和解码数据。

```
public class Rot13 { 
    public static void main(String[] args) {
        String s = args[0];
        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            if       (c >= 'a' && c <= 'm') c += 13;
            else if  (c >= 'A' && c <= 'M') c += 13;
            else if  (c >= 'n' && c <= 'z') c -= 13;
            else if  (c >= 'N' && c <= 'Z') c -= 13;
            System.out.print(c);
        }
        System.out.println();
    }
} 
```

来源[在这里](http://introcs.cs.princeton.edu/java/31datatype/Rot13.java.html)。

在上面的示例中，不需要强制转换为，`char`因为“添加和分配”运算符将结果存储在初始容器 ( `char c`) 中，该容器是一个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:36:28.583

将带有 char的 int 添加`value`回 char ，如下所示：

```
 char a = 'a';
  char b = (char)(a+5);
  System.out.println(b);  //<-prints "f" 
```

在 char 数组中，

```
 charArray[index] = (char)(charArray[index] + intValue); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-05T00:28:50.760

```
public class IntPos {
    static int   dim = 4;
    public static String[][] main(){

      String[][] p = new String[dim][dim];  
      char letter = 'A';

      for(int i = 0; i < dim;i++){
         for(int j = 0; j<dim;j++){

            char newLetter =(char)(letter + i);
            p[i][j] = Character.toString(newLetter)+j;

            System.out.println(p[i][j]);

         } 
      }

      return p;  
    }

}
```

# sql - 使用变量作为表名

> ID：13630347
> 
> 赞同：1
> 
> 时间：2012-11-29T16:33:24.047
> 
> 标签：sql, sql-server, tsql, variables, sql-server-2000

> **可能重复：**
> [当表名在变量中时，如何查找表中的行数？](https://stackoverflow.com/questions/2648280/how-do-find-the-number-of-rows-in-a-table-when-the-table-name-is-in-a-variable)

我需要在 SQL Server 数据库 (2000) 中查找包含一个列值的表。

我可以使用以下查询输出可能的候选表列表，其中包含`my_column`：

```
SELECT DISTINCT TABLE_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME = 'my_column' 
```

我想得到的是以下带有结果的伪查询：

```
select '$TABLE_NAME', count(*) from $TABLE_NAME where my_column = '12345'

table01 1
table02 5
table03 0
table04 3 
```

或更笼统地说：是否可以使 FROM 子句变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:39:54.350

唯一可行的方法是使用动态 SQL：

```
declare @stmt nvarchar(max), @value nvarchar(max)

select @stmt = isnull(@stmt + ' union all ', '') + '
    select ''' + TABLE_NAME +  ''', count(*) from ' +  TABLE_NAME + ' where my_column = @value' 
from INFORMATION_SCHEMA.COLUMNS
where COLUMN_NAME = 'my_column'

select @value = '12345'

exec sp_executesql
    @stmt = @stmt,
    @params = N'@value nvarchar(max)',
    @value = @value 
```

**更新：**
对于 SQL 2000，你可以使用`nvarchar(4000)`如果你有大量的表，你可以使用临时表 + 游标：

```
create table #Temp_Results (table_name nvarchar(128), cnt int)
declare @stmt nvarchar(4000), @value nvarchar(128)

declare t_cursor cursor local fast_forward for
    select 
        'select ''' + TABLE_NAME +  ''', count(*) from ' +  TABLE_NAME + ' where id = @value'
    from INFORMATION_SCHEMA.COLUMNS
    where COLUMN_NAME = 'name'

select @value = 1

open t_cursor
fetch t_cursor into @stmt
while @@fetch_status = 0
begin
    insert into #Temp_Results
    exec sp_executesql
        @stmt = @stmt,
        @params = N'@value nvarchar(128)',
        @value = @value

    fetch t_cursor into @stmt
end

close t_cursor
deallocate t_cursor

select * from #Temp_Results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:57:21.907

您可以使用 sp_MSforeachtable 未记录的存储过程来使 FROM 子句变量。这是一篇展示如何使用它的文章：[sp_msForEachTable 示例](http://www.sqlservercurry.com/2009/04/8-common-uses-of-undocumented-stored.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:36:32.603

如果我理解这个问题，您想要一个包含给定列名和每个表的记录数的表列表，是吗？如果是这样的话

```
select o.name as "Table Name", i.rowcnt as "Rows"
from sysobjects o
inner join sysindexes i on o.id = i.id
where i.indid in (0,1)
and o.id in
    (select distinct id from syscolumns where name = 'My_Column')
order by o.name 
```

要求您具有查询系统表的能力。

# views - Juno 在透视变化时重新定位分离的窗口

> ID：13630348
> 
> 赞同：2
> 
> 时间：2012-11-29T16:33:25.717
> 
> 标签：views, positioning, perspective, detach

我最近升级到 Juno 以利用 java 1.7 的特性，但现在我的视图无法正常运行。

我在多个监视器上工作，并将视图（包资源管理器、大纲等）分离并放置在单独的监视器上，以便我可以拥有当前编辑器和视图的全屏视图。

但是，当我在视角（ java 和 debug ）之间切换时，分离的视图会重新定位在编辑器的顶部，我必须将它们移动到编辑器。

在正确定位所有内容后，我尝试保存两个视角，但这无济于事，无论我是否重新启动。

有没有像在 Indigo 中一样使分离的窗户位置永久化的技巧？

# ruby-on-rails - 有没有办法解决这个 gem 依赖问题？

> ID：13630349
> 
> 赞同：0
> 
> 时间：2012-11-29T16:33:33.700
> 
> 标签：ruby-on-rails, ruby, rubygems

我想在需要构建的小型 api 健康/状态站点中同时使用 twitter gem 和 pingdom-client gem。

当我尝试捆绑安装 pingdom-client gem 时，出现以下错误。

```
Bundler could not find compatible versions for gem "faraday":
  In Gemfile:
    pingdom-client (>= 0) ruby depends on
      faraday (~> 0.5.6) ruby

    twitter (>= 0) ruby depends on
      faraday (0.8.4) 
```

我有哪些解决此问题的选择？还是我需要放弃使用这些宝石之一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:50:16.613

没有`pingdom-client`具有更好依赖性的更新版本可用，因此您可以尝试自己创建一个。

1.  卸载所有版本的`faraday`with`gem uninstall faraday`
2.  叉子[`pingdom-client`](https://github.com/mtodd/pingdom-client)。
3.  `faraday`改变它对它`(~> 0.8.4)`的依赖[`pingdom-client.gemspec`](https://github.com/mtodd/pingdom-client/blob/master/pingdom-client.gemspec)
4.  `Gemfile`将您的线路更改为

    ```
     gem 'pingdom-client', git: 'url/to/your/git/fork.git' 
    ```

5.  跑`bundle`

`pingdom-client`检查您的应用程序，看看运行新版本是否一切正常`faraday`

# sql-server-2005 - 在标识列上插入触发器

> ID：13630354
> 
> 赞同：0
> 
> 时间：2012-11-29T16:33:47.690
> 
> 标签：sql-server-2005

我有一个带有标识列的表 A，它是主键。主键同时是指向另一个表 B 的外键。

我正在尝试构建一个插入触发器，它将即将在表 A 中创建的标识列和另一个自定义值（例如“1”）插入到表 B 中。

我尝试使用@@Identity，但我不断遇到外键冲突。谢谢你的帮助。

```
create TRIGGER dbo.tr ON dbo.TableA FOR INSERT
AS 
SET NOCOUNT ON
begin
    insert into TableB
    select @@identity, 1;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T01:30:37.510

alexolb 在上面的评论中自己回答了这个问题。另一种选择是使用`IDENT_CURRENT`函数而不是从表中选择。这种方法的缺点是它总是让你的第一名比种子高，但这很容易通过将种子设置低一个单位来解决。我认为使用函数比使用子查询感觉更好。

例如：

```
CREATE TABLE [tbl_TiggeredTable](
    [id] [int] identity(0,1) NOT NULL,
    [other] [varchar](max)
)

CREATE TRIGGER [trgMyTrigger] 
    ON  [tbl_TriggeredTable] 
    INSTEAD OF INSERT,UPDATE,DELETE

    SET identity_insert tbl_TriggeredTable ON
    INSERT INTO tbl_TriggeredTable (
        [id],
        [other]
    ) 
    SELECT
        -- The identity column will have a zero in the insert table when
        -- it has not been populated yet, so we need to figure it out manually
        case i.[id]
        when 0 then IDENT_CURRENT('tbl_TriggeredTable') + IDENT_INCR('tbl_TriggeredTable') 
        ELSE i.[id]
        END,
        i.[other],
    FROM inserted i
    SET identity_insert tbl_TriggeredTable OFF

END 
```

# c# - 使用下划线而不是破折号的文化名称

> ID：13630355
> 
> 赞同：3
> 
> 时间：2012-11-29T16:33:50.703
> 
> 标签：c#, resx, culture

在中，我可以使用常用的 ISO 命名约定（即、、 ）`C#`为各种语言/文化构建 resx 文件。编译时，我会为每个特定于文化的 resx 文件获得一个相应的文件夹。我的困境在于使用的命名约定。`Strings.resx``Strings.en-GB.resx``Strings.fr.resx`

MS 使用“语言代码 2-国家/地区代码 2 格式，其中语言代码 2 是派生自的小写双字母代码`ISO 639-1`，国家/地区代码 2 是派生自 . 的大写双字母代码`ISO 3166`。”

由于我无法控制与公司中其他组件的一些交互，因此我需要使用下划线 (_)，例如：languagecode2_country/regioncode2。例如，代替`"en-GB"`，我需要`"en_GB"`。目标是让我的应用程序`en_GB`在系统文化设置为时命名的文件夹中查找资源文件`"en-GB"`。

这可能吗？我还没有找到分离器的 ISO 规范，所以如果有，我可以用它作为弹药来解决真正的问题，并在我使用的其他组件中遵循标准。

请注意，当我访问应用程序中的本地化资源时，我是通过`designer.cs`文件中自动生成的属性来访问的，因此我不能只替换`"en-GB"`为`"en_GB"`.

# sorting - 如何按外国 id 字段对 solr 结果进行排序

> ID：13630356
> 
> 赞同：2
> 
> 时间：2012-11-29T16:33:51.990
> 
> 标签：sorting, join, solr, lucene

我有以下字段的文档：

```
id
name
parent
color 
```

父字段是另一个文档的 ID。
我想选择颜色为红色的所有文档，并按父级名称对结果进行排序。
可以在solr中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:48:41.913

您可以使用下面的 Solr 查询来选择颜色为红色的所有文档并按父级对其进行排序。

q=color:red&sort=name desc

如果要按 parentID 指向的记录的名称对其进行排序，则必须使用[Solr JOIN](http://wiki.apache.org/solr/Join)或通过将父名称添加到文档中来对数据进行反规范化。

# xcode - 有什么方法可以只在模拟器上进行位置模拟？

> ID：13630363
> 
> 赞同：2
> 
> 时间：2012-11-29T16:34:06.383
> 
> 标签：xcode, ios-simulator

位置模拟在模拟器上很酷，但会干扰我对设备的正常使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:57:17.750

您可以在以下情况下使用条件：

1.  `#include "TargetConditionals.h"`
2.  以这种方式包含仅模拟器代码：

    > ```
    > #if TARGET_IPHONE_SIMULATOR
    > //code for simulator only
    > #endif 
    > ```

*来源：[https ://stackoverflow.com/a/458388/312312](https://stackoverflow.com/a/458388/312312)

# scala - scala宏：将函数添加到类

> ID：13630366
> 
> 赞同：5
> 
> 时间：2012-11-29T16:34:16.673
> 
> 标签：scala, reflection, metaprogramming, scala-2.10, scala-macros

我是 scala 宏的新手，我正在使用 scala 2.10.0-RC3。

我想编写一个将函数添加到类的宏。使用示例：

```
trait MyTrait {
  def addF = macro { /*add "def f = 3" to class*/ }
}

class MyClass extends MyTrait {
  addF //Adds the "def f" to MyClass
}

object Main {
  val t = new MyClass
  assert(t.f==3)
} 
```

在以下情况下我需要这个。我的第一次尝试没有使用宏但没有用，因为我不能两次继承相同的特征。

```
trait AddF[T] {
  def f(t: T) { /* ...do sthg ... */ }
}

class MyClass extends AddF[Int] with AddF[String] 
```

使用宏解决方案我可以写

```
class MyClass extends MyTrait {
  addF[Int]()
  addF[String]()
} 
```

有没有办法用 scala 宏来做到这一点？还是有另一种方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T18:47:08.197

当前无法添加、修改或删除宏外部可见的定义。即，您可以创建扩展本地的类或方法（例如，发出 ClassDef 树作为宏返回的结果的一部分），但没有影响外部世界的工具。

[然而，我们计划按照http://scalamacros.org/future.html](http://scalamacros.org/future.html)中的粗略描述来试验这个功能。此外，已经有一个可靠的原型可以生成新的顶级类。想看的可以联系我了解详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:10:29.963

如果我没有完全困惑，简单的重载应该提供所需的行为吗？例如，这将起作用：

```
trait MyTrait {
  def f(i: Int)
  def f(i: String)
}

class MyClass extends MyTrait {
  def f(i: Int) {
    println(i + " was an Int")
  }
  def f(s: String) {
    println(s + " was a String")
  }
}

// this allows:
val c = new MyClass()
c.f("hello")
c.f(42) 
```

# c# - 将任何日期时间从服务器时间转换为用户时间（处理标准时间和夏令时）

> ID：13630367
> 
> 赞同：0
> 
> 时间：2012-11-29T16:34:18.400
> 
> 标签：c#, .net, asp.net-mvc, sql-server-2008, datetime

我正在使用 .NET MVC 3 和 SQL Server 2008 (r2) 开发 Web 应用程序。

无论如何，我有一个日期时间对象，我想将其转换为用户时间。现在转换为用户时间相当简单；我有一些 java 脚本可以让我从 UTC 偏移用户。而且我知道我的日期时间偏移到 UTC。

我昨天意识到，如果我的用户生活在世界上令人讨厌的地区，他们的偏移量将会改变。这会导致旧日期和时间在一段时间内出现错误。

现在我知道 C# 有一些实用程序可以转换为时区时间，但它们真的能处理所有复杂的夏令时吗？

例如。如果我有时间，2001 年 10 月 10 日 8:00:00 我怎么把它变成太平洋时间？或者，如果我有 2004 年 6 月 6 日，我该如何进入太平洋时间？

由于翻转的日期会发生变化，所以它非常复杂，我想要一个不需要维护来设置时区日期范围的通用解决方案。

我知道这是 CS 中的一个经典问题，但我找不到真正 100% 回答我的问题的东西。据我所知：C# 使用当年的夏令时日期来更改每年的日期时间。这可能会导致一些错误。

十分感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:44:29.000

> 现在我知道 C# 有一些实用程序可以转换为时区时间，但它们真的能处理所有复杂的夏令时吗？

`TimeZoneInfo`是的，是的¹。（它是 .NET 框架的一部分，而不是 C# 的一部分 - C# 只是您碰巧使用的语言。）但是，我认为这不是您真正想要做的。

你为什么要存储`DateTime`在*服务器的*时区呢？在大多数情况下，将其存储在 UTC 中会更明智。除此之外，如果您的服务器位于遵守夏令时的时区，那么当时钟倒退时，您每年都会有一个小时的歧义。（同一本地时间出现两次。）

将其存储为 UTC 后，您也应该将其作为 UTC 提供给 Javascript 客户端。虽然您说您有“一些 java 脚本可以让我的用户从 UTC 偏移” - 这将取决于确切的时间。例如，当我在英国时，我的偏移量有时为 0，有时为 +1 小时。如果您将 UTC 传递回客户端，则可以从该 UTC 时间计算出本地时间。您的服务器不能，除非您可以*准确地*表示从客户端到服务器的时区，这通常是一件棘手的事情。

> 据我所知：C# 使用当年的夏令时日期来更改每年的日期时间。

同样，C# 本身在这里不相关。目前尚不清楚您指的是 .NET 框架的哪一部分 - `TimeZone`？`TimeZoneInfo`? `DateTime`? `TimeZoneInfo`有历史数据，但前提是您使用的操作系统版本支持它。

* * *

¹好吧，就你可能关心的问题而言。它没有 TZDB 那么多的历史数据，而且它对俄罗斯和纳米比亚有一些非常奇怪的表示，但它通常确实有规则改变的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T01:24:57.153

我发现以下规则是最好的解决方案：

1.  在服务器端使用 UTC。根本不需要处理时区。这意味着如果您将日期存储在数据库中，请使用 UTC 日期，如果您在服务器端生成日期，则通常使用 UTC（例如：）`var nowDate =DateTime.UtcNow`。**服务器日期应该与位置无关**，这样就不会有混淆。
2.  在客户端处理原始数据时也使用 UTC，但在 UI 中显示转换为浏览器本地时间的日期（这将是操作系统中配置的任何时间）。 **好消息是这已经是浏览器的内置功能了**！我们只需要让他们更容易处理它。这意味着，如果我们有一个 javascript 客户端代码 POST/PUTing/PATCHing 数据到服务器并使用 JSON 从服务器获取数据，**则 JSON 应该使用 UTC（以 Z 结尾）的 ISO 8601（本机支持），**就好像你是正在做：

    ```
    var dateNow = new Date(); //Wed May 11 2016 13:06:21 GMT+1200 (New Zealand Standard Time)
    var dateNowIso = dateNow.toISOString(); //"2016-05-11T01:06:21.147Z" 
    ```

然后，只需依靠浏览器功能将任何 UTC 日期自动转换为当前本地时间，反之亦然。只要格式是`Date`对象，浏览器的 javascript 引擎就能够在 UI 中显示正确的本地时间。

**关于如何为 .NET 服务器和 Javascript 客户端场景实现它的注意**事项：例如，我在客户端 javascript 代码中使用 AngularJS（带有 restangular），在服务器端使用 MVC 6（ASP.NET Core 1.0）。

来自服务器的 JSON 可能包含日期属性，但在 JSON 中，类型是字符串，例如：

```
{
  "myDateField":"2016-05-11T05:00:00Z"
} 
```

为了依靠浏览器正确处理 UTC 时间并将它们转换为本地浏览器时间的能力，我需要将此 UTC 日期字符串解析为真正的 javascript Date 对象，因此我使用正则表达式来匹配任何看起来像的文本值ISO 8601 格式的 UTC 日期（在我的情况下，此代码在一个 restangular 响应拦截器中，但它可能在任何地方）：

```
const regexIso8601 = /((((\d{4})(-((0[1-9])|(1[012])))(-((0[1-9])|([12]\d)|(3[01]))))(T((([01]\d)|(2[0123]))((:([012345]\d))((:([012345]\d))(\.(\d+))?)?)?)(Z|([\+\-](([01]\d)|(2[0123]))(:([012345]\d))?)))?)|(((\d{4})((0[1-9])|(1[012]))((0[1-9])|([12]\d)|(3[01])))(T((([01]\d)|(2[0123]))(([012345]\d)(([012345]\d)(\d+)?)?)?)(Z|([\+\-](([01]\d)|(2[0123]))([012345]\d)?)))?))/;

function convertDateStringsToDates(input: any): void {
    // Ignore things that aren't objects.
    if (typeof input !== "object") {
        return input;
    }

    for (var key in input) {
        if (!input.hasOwnProperty(key)) {
            continue;
        }

        let value = input[key];
        let match: RegExpMatchArray;
        // Check for string properties which look like dates.
        if (angular.isArray(value)) {
            angular.forEach(value, (val, key) => {
                convertDateStringsToDates(val);
            });
        } else if (angular.isString(value) && (match = value.match(regexIso8601))) {
            let milliseconds = Date.parse(match[0]);
            if (!isNaN(milliseconds)) {
                input[key] = new Date(milliseconds);
            }
        } else if (angular.isObject("object")) {
            // Recurse into object
            convertDateStringsToDates(value);
        }
    }
} 
```

这样我就可以将我的 javascript 对象与适当的 Date 对象一起使用。

在服务器端（MVC6 或 WebAPI2..）我有一条指令告诉我的 JSON 解析器在解析日期时始终使用 UTC 格式，否则它不会在末尾添加 Z 字符，这非常重要。MVC6 示例：

```
services.AddMvc().AddJsonOptions(opt => {
  // json dates always in javascript date format with UTC e.g: "2014-01-01T23:28:56.782Z"
  opts.SerializerSettings.DateTimeZoneHandling = Newtonsoft.Json.DateTimeZoneHandling.Utc;
}); 
```

Inspired by [this article](http://weblog.west-wind.com/posts/2014/Jan/06/JavaScript-JSON-Date-Parsing-and-real-Dates) UPDATE: There are scenarios where it might be interesting to store data in local time as stated in the comments below.

# javascript - streamjs和linqjs有什么关系

> ID：13630368
> 
> 赞同：2
> 
> 时间：2012-11-29T16:34:19.890
> 
> 标签：javascript, linq, stream, relationship, sicp

读完 SICP，我最近发现了[streamjs](https://github.com/dionyziz/stream.js)。开发人员将[linqjs](http://linqjs.codeplex.com/)引用为具有不同语法的替代实现，但我无法建立联系。streamjs 中的方法如何映射到 linqjs 中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:50:23.797

我猜它们是相似的，因为它们传递函数而不是“标量值”，因此它们可以进行惰性评估（在操作结束时/按需评估结果，而不是像经典的 javascript 数据结构那样在每次操作时评估结果）。[我在我的pimple.js](https://github.com/Mparaiso/Pimple.js)库中使用了这个原则，它与流或链接无关，但使用惰性评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:23:16.273

我没有使用任何一个库，但是，这是我的初步分析（我已经阅读了很多 SICP，但不可否认，不是全部内容）。

`stream.js`是列表的功能样式数据结构的实现。函数式语言中的许多数据结构往往是递归的，就像`Stream`结构一样。它由一个头部元素和一个`Stream`用于尾部（后续元素）的元素组成。在这里，可以通过允许尾部为函数（即无限序列）来实现惰性求值。

现在，为了回答您的问题，`linq.js`应该能够使用其他常见的高阶函数（如 map、reduce、walk、fold 等）来定义by 提供的所有函数。

当然，`stream.js`不实现`Any()`from 的方法`linq.js`，但您可以使用`reduce()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T01:06:18.390

linq.js 和 stream.js 有以下相似之处：

*   使用函数将流实现为数据结构
*   使用流实现操作的惰性求值

linq.js 和 stream.js 有以下区别：

*   linq.js 有用于查询 JSON 的语法糖
*   stream.js 具有链接流的能力
*   linq.js 具有用于集合操作的语法糖

**参考**

*   [JavaScript for Real 中的 LINQ](http://www.aaron-powell.com/posts/2013-12-31-linq-in-javascript-for-real.html)
*   [JavaScript 中的 LINQ，ES6 风格](http://www.aaron-powell.com/posts/2013-09-06-linq-in-javascript-es6.html)

# javascript - 如果我多次声明同一个变量，我会有什么问题吗？

> ID：13630373
> 
> 赞同：5
> 
> 时间：2012-11-29T16:34:33.863
> 
> 标签：javascript, variables

所以可以说我有一些代码：

```
//Javascript
var elements = [];
function addNumbah1(){
    var i = 1;
    elements.push(i);
}
function addNumbah2(){
    var i = 2;
    elements.push(i);
} 
```

一直到 addNumbah999()，`i`每次都声明变量是不是不好的形式？那会破坏什么吗？我应该这样做：

```
//Javascript
var elements = [];
var i
function addNumbah1(){
    i = 1;
    elements.push(i);
}
function addNumbah2(){
    i = 2;
    elements.push(i);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T16:46:16.530

简短的回答：*不*，JS 将所​​有变量声明提升到范围的顶部，无论您声明了多少次：

```
var i = 0
for (var i=0;i<10;i++)
{
    var j = i%2;//declared 10 times, on each iteration
} 
```

将被翻译成

```
var i, j; //i is undefined at this point in the code.
for (i = 0;i<10;i++)
{
    j = i%2;//declared 10 times, on each iteration
} 
```

在您的第一个示例中，您将声明`i`为函数范围内的变量，这是您*必须*执行的操作以避免混乱全局范围。这些变量使用的内存在函数被调用时分配，并在函数返回时释放（粗略地说，*闭包*形成异常，但这会让我们走得更远）。考虑一下：

```
var i = 10;
function someF()
{
    var i = 1;
    alert(i);
}
someF();//alerts 1 <-- value of i, local to someF
alert(i);//10, global i is unchanged 
```

但是，如果您要省略`var`：

```
function someF()
{
    i = 1;
    alert(i);
} 
```

您会看到 1 收到两次警报。如果 JS 在当前作用域中找不到变量声明，它将在更高的作用域中查找，直到找到 var。如果没有找到变量，JS 会在最高范围（全局）为你创建一个。[在此处查看我的答案](https://stackoverflow.com/questions/13626094/redeclare-javascript-variable/13626288#13626288)，了解隐含全局变量如何工作以获得更详细的示例，或[阅读 MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)，尤其是关于**名称冲突的部分**

最后，我想补充一点，全局变量，尤其是隐含的全局变量，是*邪恶*的。还要知道 ECMA6 标准显然正在远离全局变量，并引入了对真正块作用域的支持。[正如你在这里看到的](https://stackoverflow.com/questions/13568325/let-var-or-var-to-let)
哦，如果你想检查一个函数是否使用隐含的全局变量：`'use strict';`是一件很棒的事情：

```
(function()
{
    'use strict';
    var localVar = 123;//ok
    impliedGlobal = 123;//TypeError!
}()); 
```

如您所见，不允许使用隐含的全局变量。完整解释见[MDN on strict mode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:39:56.083

第二种形式，全局`i`的实际上可能会慢一些，因为它是在更高的范围内定义的，而在更高的范围内定义的变量需要更长的时间来解析。

除了任何性能考虑之外，除非性能确实是一个问题，否则请坚持通用准则。在这种情况下：**尽可能缩小变量的范围**。

我强烈建议您使用第一种形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:40:55.940

你做的第一种方法很好。i 的每个实例都不知道其他函数中的另一个 i。

您应该阅读有关[全局变量与局部变量的本教程](http://www.webdevelopersnotes.com/tutorials/javascript/global_local_variables_scope_javascript.php3)

另外，我可以建议一个优化。为什么您不能只执行以下操作来涵盖任何数字（而不是每个数字的单独函数）？

```
var elements = [];
function addNumbah(number){
    elements.push(number);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:42:55.910

您可以多次声明一个变量。在您的代码中，您在此处在不同的范围内声明变量 i：

```
 //Here you are declaring variable i local to addNumbah1,2 functions 
   var elements = [];
   function addNumbah1(){
       var i = 1; 
       elements.push(i);
   }
   function addNumbah2(){
       var i = 2; 
       elements.push(i);
   } 

   //Here v /variable i has been declared globally
   var elements = [];
   var i
   function addNumbah1(){
       i = 1;   
       elements.push(i);
   }
   function addNumbah2(){
       i = 2;  
       elements.push(i);
   } 
```

请注意，虽然您可以多次声明一个变量，但*通常这不是一个好的编程习惯*，因为它可能会导致您的应用程序出现错误/问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T16:43:07.520

可以在不同的函数中声明具有相同名称的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T16:54:21.973

在函数内声明的变量只存在于该函数的范围内，因此在不同的函数中使用相同的变量名不会破坏任何内容。

事实上，将变量保持在尽可能小的范围内是一种很好的形式！全局变量可能难以管理，并且会产生非常糟糕的错误，特别是如果一个函数没有使用该变量完成，而另一个函数试图访问它。

专门针对简单变量，声明

```
var i = 0; 
```

每次都很好。

# javascript - 无法使用 zClip 解析剪贴板 - jQuery ZeroClipboard

> ID：13630375
> 
> 赞同：0
> 
> 时间：2012-11-29T16:34:40.470
> 
> 标签：javascript, jquery, html

我正在使用它来将文本复制到剪贴板..（未将消息作为“**文本复制到剪贴板**”

```
http://www.steamdev.com/zclip/ 
```

我试过这样，但我无法将复制的文本放入剪贴板..

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
  <script type="text/javascript" src="js/jquery.zclip.js"></script>

  <script>
    $(document).ready(function() {
      $('textarea#showthis').zclip({
        path: 'js/ZeroClipboard.swf',
        copy: function() {
            return $('#showthis').val();
        }
      });
    });
  </script>
 </head>

 <body>
  <textarea id="showthis" readonly>hi, how are you?</textarea>
 </body>
</html> 
```

请告诉我出了什么问题！（我不知道 JavaScript 和 jQuery 的东西！）

我正在使用 Chrome，我记得我的 PC 上已经安装了正确的 Flash ......

**已编辑：**我正在尝试的内容：单击“TextArea”后，应该立即复制 textarea 中的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:22:28.013

你需要一个复制按钮。Zclip 应该附加到用户单击以复制文本的按钮 - 而不是 textarea 本身。

尝试这个：

```
$(document).ready(function(){
    $("#showthisButton").zclip({
        path: "js/ZeroClipboard.swf",
        copy: function () {
            return $('#showthis').val();
        }
    });
}); 
```

HTML 应该是这样的：

```
<textarea id="showthis">hi, how are you?</textarea>
<input type="button" id="showthisButton" value="Copy"> 
```

如果您需要更多帮助，请尽管询问。

# php - 自动提交表单js

> ID：13630377
> 
> 赞同：2
> 
> 时间：2012-11-29T16:34:47.533
> 
> 标签：php, javascript, html, forms, submit

我正在尝试自动提交一个表单，（它下面只是表单，它用一段时间包装了{}，以便显示每个数据库条目）。它适用于一周中的所有日子，但如果没有像 onfocus() 这样的 js 事件，我无法提交 $totalhours、$holidayhours、$wagegross 的值。

基本上我想提交这 3 个输入而无需单击或任何其他手动操作。

任何的想法 ？

```
<form id="weeklysheet" name="weeklysheet" method="post" action="hourly-function.php">
            <tbody>

                <tr style="line-height:0px;">
                    <td class="large">
                        <p class="employee_name"><?php echo  $fullname?></p>
                    </td>
                    <td class="small">
                        <input name="mon" id="mon" type="text" class="days_input" value="<?php echo $data['mon'];?>"onchange="this.form.submit();"/>
                    </td>                   
                    <td class="small">
                        <input name="tue" id="tue" type="text" class="days_input" value="<?php echo $data['tue'];?>"onchange="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="wed" id="wed" type="text" class="days_input" value="<?php echo $data['wed'];?>"onchange="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="thu" id="thu" type="text" class="days_input" value="<?php echo $data['thu'];?>"onchange="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="fri" id="fri" type="text" class="days_input" value="<?php echo $data['fri'];?>"onchange="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="sat" id="sat" type="text" class="days_input" value="<?php echo $data['sat'];?>"onchange="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="sun" id="sun" type="text" class="days_input" value="<?php echo $data['sun'];?>"onchange="this.form.submit();"/>
                    </td >  
                    <td class="small">
                        <input name="totalhours" id="totalhours" type="text" class="cumul_week_input" value="<?php echo $totalhours ?>"onfocus="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="holidayhours" type="text" class="cumul_week_input" value="<?php echo $holidayhours ?>"onfocus="this.form.submit();"/>
                    </td>
                    <td class="small">
                        <input name="wagegross" type="text" class="cumul_week_input" value="<?php echo $wagegross ?>"onfocus="this.form.submit();"/>
                    </td>
                    <td>
                    <input type="submit"name="save" id="save" value="Confirm" style="display:none;" />
                </tr>
            </tbody>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:41:50.797

**您可以[`jQuery`](http://jquery.com/)**[`trigger`](http://api.jquery.com/trigger/)在文档加载后使用提交按钮的单击操作，如下所示：

**1.)您可以从**[Google 的托管库](https://developers.google.com/speed/libraries/devguide)链接 jQuery 库：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

或者，[从 jQuery.com 下载它](http://jquery.com/download/)到一个“js”文件夹，然后包含它

```
<script src="js/jQuery.js"></script> 
```

**2.)**将此脚本标签放在标签下方`</form>`：

```
<script type="text/javascript">
    $(document).ready(function(){ //When the document is done loading
        $("input#save").trigger('click'); //"Click" on the input button with an ID of "save"
    });
</script> 
```

* * *

**或者你可以在**没有 jQuery 的情况下使用纯 javascript 方式，如下所示：

```
<html>
    <body onLoad="submitform()">
        <form id="weeklysheet" name="weeklysheet" method="post" action="hourly-function.php"> 
```

然后将此脚本标签放在标签下方`</form>`：

```
<script type="text/javascript">
    function submitform()
    {
      document.weeklysheet.submit();
    }
</script> 
```

***或者，缩短上述方法：***

```
<html>
    <body onLoad="Javascript: document.weeklysheet.submit();">
        <form id="weeklysheet" name="weeklysheet" method="post" action="hourly-function.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:24:04.307

您是要单独提交还是一次性提交？如果您想一次完成所有操作，您可以给最后一个元素一个 id 并在 jquery 中使用 $('#div').moueleave

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:59:14.873

那是我正在使用的js，我尝试超时提交并且它正在工作。最后我的问题不存在，似乎当我提交表单时，3 个 php 变量推送了前一个输入条目的值。

我不知道我的解释是否清楚......

```
 <script type="text/javascript">
    function submitform()
    {   
        //document.getElementById("weeklysheet");
        var form = document.getElementById("weeklysheet")
       form.submit();
    }
    function submit()
    {   
        if (document.getElementById("weeklysheet")) {
            setTimeout("submitform()", 5000); // set timout

       }
       return false;
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:32:56.623

（对不起，如果这是一个很长的解释）我会带着我的解决方案回来......以防万一这可以帮助任何人。

所以想法是有一个表格来显示员工列表，您可以在其中输入工作天数、假期、病假。然后根据工资频率（即：每周、4 周或每月）计算每个的总和并计算总额。因为用户不会一次完成所有表单，所以我需要在本周的所有时间自动提交所有输入。

这是JS：

```
<script type="text/javascript">
function grab<?=$empnum?>(){

// Monday
var mon<?=$empnum?> = document.getElementById('mon<?=$empnum?>').value;
if ((mon<?=$empnum?> == "h" || mon<?=$empnum?> == "H")){
    var Hmon<?=$empnum?> = 1;
    var Wmon<?=$empnum?> = 0;
    var Smon<?=$empnum?> = 0;
    }
else if((mon<?=$empnum?> == "w" || mon<?=$empnum?> == "W")){
    var Wmon<?=$empnum?> = 1;
    var Hmon<?=$empnum?> = 0;
    var Smon<?=$empnum?> = 0;
    }
else if((mon<?=$empnum?> == "s" || mon<?=$empnum?> == "S")){
        var Smon<?=$empnum?> = 1;
        var Hmon<?=$empnum?> = 0;
        var Wmon<?=$empnum?> = 0;
    }
else{
        var Smon<?=$empnum?> = 0;
        var Hmon<?=$empnum?> = 0;
        var Wmon<?=$empnum?> = 0;
        var Xmon<?=$empnum?> = 0;
    }
// Tuesday  
var tue<?=$empnum?> = document.getElementById('tue<?=$empnum?>').value;
if ((tue<?=$empnum?> == "h" || tue<?=$empnum?> == "H")){
    var Htue<?=$empnum?> = 1;
    var Wtue<?=$empnum?> = 0;
    var Stue<?=$empnum?> = 0;
    }
else if((tue<?=$empnum?> == "w" || tue<?=$empnum?> == "W")){
    var Wtue<?=$empnum?> = 1;
    var Htue<?=$empnum?> = 0;
    var Stue<?=$empnum?> = 0;
    }
else if((tue<?=$empnum?> == "s" || tue<?=$empnum?> == "S")){
        var Stue<?=$empnum?> = 1;
        var Htue<?=$empnum?> = 0;
        var Wtue<?=$empnum?> = 0;
    }
else{
        var Stue<?=$empnum?> = 0;
        var Htue<?=$empnum?> = 0;
        var Wtue<?=$empnum?> = 0;
    }
// Wednesday
var wed<?=$empnum?> = document.getElementById('wed<?=$empnum?>').value;
if ((wed<?=$empnum?> == "h" || wed<?=$empnum?> == "H")){
    var Hwed<?=$empnum?> = 1;
    var Wwed<?=$empnum?> = 0;
    var Swed<?=$empnum?> = 0;
    }
else if((wed<?=$empnum?> == "w" || wed<?=$empnum?> == "W")){
    var Wwed<?=$empnum?> = 1;
    var Hwed<?=$empnum?> = 0;
    var Swed<?=$empnum?> = 0;
    }
else if((wed<?=$empnum?> == "s" || wed<?=$empnum?> == "S")){
        var Swed<?=$empnum?> = 1;
        var Hwed<?=$empnum?> = 0;
        var Wwed<?=$empnum?> = 0;
    }
else{
        var Swed<?=$empnum?> = 0;
        var Hwed<?=$empnum?> = 0;
        var Wwed<?=$empnum?> = 0;
    }
// Thurday
var thu<?=$empnum?> = document.getElementById('thu<?=$empnum?>').value;
if ((thu<?=$empnum?> == "h" || thu<?=$empnum?> == "H")){
    var Hthu<?=$empnum?> = 1;
    var Wthu<?=$empnum?> = 0;
    var Sthu<?=$empnum?> = 0;
    }
else if((thu<?=$empnum?> == "w" || thu<?=$empnum?> == "W")){
    var Wthu<?=$empnum?> = 1;
    var Hthu<?=$empnum?> = 0;
    var Sthu<?=$empnum?> = 0;
    }
else if((thu<?=$empnum?> == "s" || thu<?=$empnum?> == "S")){
        var Sthu<?=$empnum?> = 1;
        var Hthu<?=$empnum?> = 0;
        var Wthu<?=$empnum?> = 0;
    }
else{
        var Sthu<?=$empnum?> = 0;
        var Hthu<?=$empnum?> = 0;
        var Wthu<?=$empnum?> = 0;
    }
// Friday
var fri<?=$empnum?> = document.getElementById('fri<?=$empnum?>').value;
if ((fri<?=$empnum?> == "h" || fri<?=$empnum?> == "H")){
    var Hfri<?=$empnum?> = 1;
    var Wfri<?=$empnum?> = 0;
    var Sfri<?=$empnum?> = 0;
    }
else if((fri<?=$empnum?> == "w" || fri<?=$empnum?> == "W")){
    var Wfri<?=$empnum?> = 1;
    var Hfri<?=$empnum?> = 0;
    var Sfri<?=$empnum?> = 0;
    }
else if((fri<?=$empnum?> == "s" || fri<?=$empnum?> == "S")){
        var Sfri<?=$empnum?> = 1;
        var Hfri<?=$empnum?> = 0;
        var Wfri<?=$empnum?> = 0;
    }
else{
        var Sfri<?=$empnum?> = 0;
        var Hfri<?=$empnum?> = 0;
        var Wfri<?=$empnum?> = 0;
    }
// Saturday
var sat<?=$empnum?> = document.getElementById('sat<?=$empnum?>').value;
if ((sat<?=$empnum?> == "h" || sat<?=$empnum?> == "H")){
    var Hsat<?=$empnum?> = 1;
    var Wsat<?=$empnum?> = 0;
    var Ssat<?=$empnum?> = 0;
    }
else if((sat<?=$empnum?> == "w" || sat<?=$empnum?> == "W")){
    var Wsat<?=$empnum?> = 1;
    var Hsat<?=$empnum?> = 0;
    var Ssat<?=$empnum?> = 0;
    }
else if((sat<?=$empnum?> == "s" || sat<?=$empnum?> == "S")){
        var Ssat<?=$empnum?> = 1;
        var Hsat<?=$empnum?> = 0;
        var Wsat<?=$empnum?> = 0;
    }
else{
        var Ssat<?=$empnum?> = 0;
        var Hsat<?=$empnum?> = 0;
        var Wsat<?=$empnum?> = 0;
    }
// Sunday
var sun<?=$empnum?> = document.getElementById('sun<?=$empnum?>').value;
if ((sun<?=$empnum?> == "h" || sun<?=$empnum?> == "H")){
    var Hsun<?=$empnum?> = 1;
    var Wsun<?=$empnum?> = 0;
    var Ssun<?=$empnum?> = 0;
    }
else if((sun<?=$empnum?> == "w" || sun<?=$empnum?> == "W")){
    var Wsun<?=$empnum?> = 1;
    var Hsun<?=$empnum?> = 0;
    var Ssun<?=$empnum?> = 0;
    }
else if((sun<?=$empnum?> == "s" || sun<?=$empnum?> == "S")){
        var Ssun<?=$empnum?> = 1;
        var Hsun<?=$empnum?> = 0;
        var Wsun<?=$empnum?> = 0;
    }
else{
        var Ssun<?=$empnum?> = 0;
        var Hsun<?=$empnum?> = 0;
        var Wsun<?=$empnum?> = 0;
    }

var W<?=$empnum?> = Wmon<?=$empnum?>*1+Wtue<?=$empnum?>*1+Wwed<?=$empnum?>*1+Wthu<?=$empnum?>*1+Wfri<?=$empnum?>*1+Wsat<?=$empnum?>*1+Wsun<?=$empnum?>*1;
var H<?=$empnum?> = Hmon<?=$empnum?>*1+Htue<?=$empnum?>*1+Hwed<?=$empnum?>*1+Hthu<?=$empnum?>*1+Hfri<?=$empnum?>*1+Hsat<?=$empnum?>*1+Hsun<?=$empnum?>*1;
var S<?=$empnum?> = Smon<?=$empnum?>*1+Stue<?=$empnum?>*1+Swed<?=$empnum?>*1+Sthu<?=$empnum?>*1+Sfri<?=$empnum?>*1+Ssat<?=$empnum?>*1+Ssun<?=$empnum?>*1;

var totals<?=$empnum?> = document.getElementById('totalhrs<?=$empnum?>').value = W<?=$empnum?>; 
var holiday<?=$empnum?> = document.getElementById('holihrs<?=$empnum?>').value = H<?=$empnum?>; 
var sick<?=$empnum?> = document.getElementById('sickdays<?=$empnum?>').value = S<?=$empnum?>; 
var wage<?=$empnum?> = document.getElementById('wagefreq<?=$empnum?>').value;
if(wage<?=$empnum?> == 'Weekly'){ 
document.getElementById('gross<?=$empnum?>').value = <?=$empsalarywage?>;
}
else if(wage<?=$empnum?> == '4 Weekly'){ 
document.getElementById('gross<?=$empnum?>').value = (<?=$empsalarywage?> / 4);
}
else if(wage<?=$empnum?> == 'Monthly'){ 
document.getElementById('gross<?=$empnum?>').value = ((<?=$empsalarywage?> * 12) / 52);
}
document.getElementById('weeklysheet<?=$empnum?>').submit('save<?=$empnum?>');
}
</script> 
```

这是表格：

```
<form id="weeklysheet<?=$empnum?>" name="weeklysheet" method="post" action="salary-function.php" >
                <tbody>
                    <tr style="line-height:0px;">
                        <td class="large">
                            <p class="employee_name"><?=$fullname?></p>
                        </td>   
                        <td class="small">
                            <input name="mon" id="mon<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $mon?>"onchange="grab<?=$empnum?>()"/>
                        </td>                   
                        <td class="small">
                            <input name="tue" id="tue<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $tue?>"onchange="grab<?=$empnum?>()"/>
                        </td>
                        <td class="small">
                            <input name="wed" id="wed<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $wed?>"onchange="grab<?=$empnum?>()"/>
                        </td>
                        <td class="small">
                            <input name="thu" id="thu<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $thu?>"onchange="grab<?=$empnum?>()"/>
                        </td>
                        <td class="small">
                            <input name="fri" id="fri<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $fri?>"onchange="grab<?=$empnum?>()"/>
                        </td>
                        <td class="small">
                            <input name="sat" id="sat<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $sat?>"onchange="grab<?=$empnum?>()"/>
                        </td>
                        <td class="small">
                            <input name="sun" id="sun<?=$empnum?>" type="text" class="days_input" maxlength="1" value="<?php echo $sun?>"onchange="grab<?=$empnum?>()"/>
                        </td >
                        <td class="small">
                            <input name="totalhrs" id="totalhrs<?=$empnum?>" type="text" class="cumul_week_input" readonly value="<?php echo $totalhrs?>"/>
                        </td>
                        <td class="small">
                            <input name="holihrs" id="holihrs<?=$empnum?>" type="text" class="cumul_week_input" readonly value="<?php echo $holihrs?>"/>
                        </td>
                        <td class="small">
                            <input name="sickdays" id="sickdays<?=$empnum?>" type="text" class="cumul_week_input" readonly value="<?php echo $sickdays?>"/>
                        </td>
                        <td class="small">
                            <input name="gross" id="gross<?=$empnum?>" type="text" class="cumul_week_input" readonly value="<?php echo $gross?>"/>
                        </td>
                        <td>
                        <input type="submit"name="save" id="save<?=$empnum?>" value="Confirm" style="display:none"/>
                        <input type="hidden"name="enddate" value="<?php echo $data['currentWeekStart']; ?>"/>
                                                <input type="hidden"name="wagefreq"id="wagefreq<?=$empnum?>" value="<?=$wagefreq?>"/>

                        </td>
                    </tr>
                </tbody>
            </form> 
```

这就像我想要的那样工作，但如果有人看到任何可以以更好的方式完成的事情，我真的很感激任何更正......谢谢

# php - 如何保护我的 AJAX 服务？

> ID：13630378
> 
> 赞同：3
> 
> 时间：2012-11-29T16:34:47.683
> 
> 标签：php, ajax, web-services, jquery

现在，我正在开发一项服务，该服务可以处理覆盖在 Google 地图上的当地餐馆的评论/推荐。基本上是 Yelp，但仅限于特定的利基市场。无论如何，由于我不想一次加载每个位置并查看，我终于开始使用 jQuery 和 AJAX 调用。

我的问题是：如何防止其他人从服务器上的 ajax 脚本中“抓取”数据？

主要的地图/位置信息功能需要公开，因为用户不必登录即可使用该应用程序，因此它可能简单地归结为*难以*抓取。我希望你们中的一位 AJAX 资深人士可以为我指出一个更好的想法，或者一些我还没有找到的“最佳实践”文档。

到目前为止，我所能想到的是：

*   面向用户的脚本在服务器上打开一个短暂的会话，如果没有活动的会话，AJAX 调用将不会运行。
*   与应用程序代码一起发送某种访问密钥，并在所有 AJAX 调用中要求它。但不确定如何以一种不容易解决的方式最好地实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:39:52.307

您不能完全保护您的 AJAX Web 服务。即使您破坏了您的数据并混淆了您的源代码，只需启动数据包嗅探器或调试代理，找出并从中刮取，这也是微不足道的。

我要做的正是您建议的……只有在网站上具有活动会话的用户才能拨打电话。然后从那里限制请求。

即使是忙碌的普通用户每分钟发出的请求也不会超过少数。您可以分析您的日志以找出一个好的数字。即使您将服务限制为每分钟 20 次调用，这种限制对于想要复制所有内容的人来说也毫无用处。

也不要只限制会话数据...密切关注 IP 地址。完全有可能随时触发请求并获得新会话。定期检查您的日志以查看是否有任何事情通过，并相应地调整您的策略。

最后，定期搜索您的内容。Google 是查找版权侵权者的绝佳工具。如果你使用特定的数据，比如 GPS 坐标，你实际上可以在坐标的噪声区域用特定的值对坐标进行水印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:39:07.130

据我所知，您希望保护服务的 JavaScript 端。这是不可能的，因为 JavaScript 本质上是完全开源的（尽管不是公共领域）

Google 提供了一个[名为 Google Closure 的工具](https://developers.google.com/closure/)，它可以通过删除空格和制表符来压缩脚本。它还可以通过用随机字符替换变量名称和函数名称来为您混淆文档。它是可定制的，因此您可以告诉它您想要什么。据我所知，谷歌将它用于他们自己的网站（通过查看他们网页的来源可以看出）

# powershell - Pester (Powershell BDD) 中的 Create-Fixture 不起作用

> ID：13630380
> 
> 赞同：0
> 
> 时间：2012-11-29T16:34:54.897
> 
> 标签：powershell, bdd, pester

我正在按照这里的说明进行操作：

[http://scottmuc.com/blog/development/pester-bdd-for-the-system-administrator/](http://scottmuc.com/blog/development/pester-bdd-for-the-system-administrator/)

我发现安装并导入模块后我仍然无法运行 Create-Fixture。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:37:28.247

原来 Create-Fixture 不再是一个 cmdlet。我在这里看了看：

[https://github.com/mwrock/Chocolatey-Packages/blob/master/pester/Pester.psm1](https://github.com/mwrock/Chocolatey-Packages/blob/master/pester/Pester.psm1)

并意识到 cmdlet 的名称已更改。它现在被称为新夹具。

如果您运行 New-Fixture，它甚至会引用 Create-Fixture：

```
PS D:\edsource\Powershell> New-Fixture
invalid usage, please specify (path, name)
eg: .\Create-Fixture -Path Foo -Name Bar
creates .\Foo\Bar.ps1 and .\Foo.Bar.Tests.ps1 
```

# oracle - SQL 查询问题（有约束）

> ID：13630384
> 
> 赞同：0
> 
> 时间：2012-11-29T16:35:17.253
> 
> 标签：oracle, sqlplus

我正在运行的查询有问题。我想显示满足以下条件的所有员工的 Empcode、Empname 和邮政编码：他们出售的每个库存商品的价格值都高于所有库存商品的平均值。

所以这是我的查询：

```
select distinct SU.empCode, SU.empName, SU.PostCode
from Suppliers SU, Stocks ST
where ST.Price >= (select AVG(Price) from Stocks ST) 
```

我让所有员工都回来了（总共 6 名），但正确答案是 2 名员工。有人知道我做错了什么吗？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:48:47.033

这应该工作

```
select empCode, empName, PostCode
  from (select SU.empCode, SU.empName, SU.PostCode, min(st.Price) over (partition by su.empcode) min_price,
               avg(st.price) over () avg_price
          from Suppliers SU, Stocks ST
         where SU.empcode = ST.empcode)
 where min_price > avg_price; 
```

# eclipse - 找不到从 Android Developer Bundle 安装的 Egit 存储库

> ID：13630385
> 
> 赞同：1
> 
> 时间：2012-11-29T16:35:16.960
> 
> 标签：eclipse, adt, egit

我正在使用新的 ADT Bundle for Windows，其中嵌入了 eclipse 和 Android SDK。我正在尝试从其存储库之一安装 eGit：

*   主 P2 存储库：http: [//download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)
*   Juno P2 存储库：http: [//download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)

我在两个存储库中都找到了它，但是在安装它时出现错误：

> 收集要安装的项目时发生错误会话上下文为：(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=)。
> 
> 未找到包含以下内容的存储库：osgi.bundle,com.sun.syndication,0.9.0.v200803061811
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.apache.commons.lang,2.6.0.v201205030909
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.core.runtime.compatibility.auth,3.2.300.v20120523-2004
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.core,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.commons,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.identity,0.9.1.v20120412-0100
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.identity.core,1.0.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.commons.identity,1.0.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.net,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.notifications,0.9.1.v20120412-0100
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.notifications.core,1.0.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.commons.notifications,1.0.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.notifications.feed,1.0.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.notifications.ui,1.0.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.repositories,0.9.1.v20120412-0100
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.repositories.core,1.0.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.commons.repositories,1.0.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.repositories.ui,1.0.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.screenshots,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.team,0.9.1.v20120412-0100
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.ui,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.commons.workbench,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.context.core,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.context.tasks.ui,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.context.ui,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.context_feature,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.discovery.core,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.discovery,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.discovery.ui,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.monitor.core,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.monitor,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.monitor.ui,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.resources.ui,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.tasks.core,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.tasks.index.core,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.tasks.index.ui,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.tasks.search,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.tasks.ui,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：osgi.bundle,org.eclipse.mylyn.team.ui,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn.team_feature,3.8.2.v20120916-1200
> 
> 找不到包含以下内容的存储库：org.eclipse.update.feature,org.eclipse.mylyn_feature,3.8.2.v20120916-1200
> 
> 未找到包含以下内容的存储库：osgi.bundle,org.jdom,1.1.1.v201101151400

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T12:24:10.283

Seems that this is a known issue for all plugins which don't come with the ADT bundle. According to [this issue (which actually is addressing some question about installing phonegap)](https://code.google.com/a/eclipselabs.org/p/mobile-web-development-with-phonegap/issues/detail?id=97) by design the ADT-bundle doesn't support extensions. And they don't seem to want to change that behavior. If you need the plugins, I recommend installing a different version of Eclipse.

# javascript - 如何在javascript中调用这个定时transitionereion

> ID：13630386
> 
> 赞同：0
> 
> 时间：2012-11-29T16:35:22.480
> 
> 标签：javascript, html, css, transition, timed

我试图让 6 个 div 淡入然后淡出 5 秒。Div1会先显示onClick，然后持续5秒，然后淡出，同时弹出下一个on顺序，然后淡出，以此类推。我一直在玩这个 JavaScript - 但我遇到了一些麻烦 - 1）在单击按钮时调用它和 2）我如何编写允许 1 秒重叠的代码？

有什么帮助吗？这是我的 JavaScript：

```
$(function () {

    var counter = 0,
        divs = $('#tutorial1, #tutorial2, #tutorial3, #tutorial4, #tutorial5, #tutorial6');

    function showDiv () {
        divs.hide() // hide all divs
            .filter(function (index) { return index == counter % 3; }) // figure out correct div to show
            .show('fast'); // and show it

        counter++;
    }; // function to loop through divs and show correct div

    showDiv(); // show first div    

    setInterval(function () {
        showDiv(); // show next div
    }, 5 * 1000); // do this every 5 seconds    

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:03:52.080

[http://jsfiddle.net/NpNXr/1/](http://jsfiddle.net/NpNXr/1/)

HTML（我添加了类`fader`以表明这些是动画的一部分）

```
<div class="fader" id="tutorial1">One</div>
<div class="fader" id="tutorial2">Two</div>
<div class="fader" id="tutorial3">Three</div>
<div class="fader" id="tutorial4">Four</div>
<div class="fader" id="tutorial5">Five</div>
<div class="fader" id="tutorial6">Six</div>

<input type="button" value="Start" id="start"/> 
```

JS

```
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(), // Selecting fader divs instead of each by name.
        dur = 500;

    function showDiv() {
        divs.fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {  // return interval so we can stop the loop
        showDiv(); // show next div
    }, 5 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:43:23.073

感谢所有帮助，这是工作代码！

```
</script>
<script src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
fadeLoop()
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(),
        dur = 300;

    function showDiv() {
        $("div.fader").fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 7 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});
});
</script>
<!--#include file="header.asp"-->
<% if Request("interactive") = "on" then %>
<form name="tutorial">

<div class="fader"><div class="arrow-w arrowlocation1" style="font-size:1em;" ></div><div id="tutorial1" class="tutorial createquestion1">Start by creating a title and selecting a folder for your question to be stored in.</div></div>

<div class="fader"><div class="arrow-w arrowlocation2" style="font-size:1em;" ></div>
<div id="tutorial2" class="tutorial createquestion2">Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.</div></div>

<div class="fader"><div class="arrow-w arrowlocation3" style="font-size:1em;" ></div>
<div id="tutorial3" class="tutorial createquestion3">Select your options and/or upload an attachment (file, video or audio).</div></div>

<div class="fader"><div class="quicktiptitle quicktiplocation4">QUICK TIP</div><div class="arrow-n arrowlocation4" style="font-size:1em;" ></div>
<div id="tutorial4" class="quicktip createquestion4">To create questions easier update your question preferences in your account area options.</div></div>

<div class="fader"><div class="arrow-w arrowlocation5" style="font-size:1em;" ></div>
<div id="tutorial5" class="tutorial createquestion5">Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.</div></div>

<div class="fader"><div class="arrow-e arrowlocation6" style="font-size:1em;" ></div>
<div id="tutorial6" class="tutorial createquestion6">Write your questions, answers and you are ready to go.</div></div>

<div class="fader"><div class="arrow-w arrowlocation7" style="font-size:1em;" ></div>
<div class="quicktiptitle quicktiplocation7">QUICK TIP</div>
<div id="tutorial7" class="quicktip createquestion7"> Click on this icon to open and close sections that you don't use. These will remain closed whenever you visit this page until you open them again.</div></div></form>

<% end if %> 
```

# asp.net-mvc-3 - Asp.net MVC maxlength 不使用数据注释工作

> ID：13630389
> 
> 赞同：2
> 
> 时间：2012-11-29T16:35:32.140
> 
> 标签：asp.net-mvc-3

我正在使用 asp.net mvc 4 我在我的模型中使用 [maxlength(2)] 但它不适用于客户端验证我是 asp.net mvc 的新手。这是我的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace RestrauntsMVC.Models
{
  public class Restraunts
  {

    public int id { get; set; }
    [Required]
    public string name { get; set; }
    [Required]
    [MaxLength(2),MinLength(1)]
    public int rating { get; set; }
    [Required]
    public string location { get; set; }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:08:48.963

我发现答案 myslef 它适用于 Maxlength 和 minlength 用于字符串而不是整数。

```
using System;
using System.Collections.Generic;  
using System.Linq;  
using System.Web;  
using System.ComponentModel.DataAnnotations;  
namespace RestrauntsMVC.Models
{
public class Restraunts
{

    public int id { get; set; }
    [Required]
    public string name { get; set; }
    [Required]
    [Range(1,10,ErrorMessage="Rating must between 1 to 10")]        
    public int rating { get; set; }
    [Required]
    public string location { get; set; }
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T16:08:12.493

就像其他提及仅适用于字符串一样，那么编写自己的[ValidationAttribute](http://msdn.microsoft.com/de-de/library/system.componentmodel.dataannotations.validationattribute%28v=vs.110%29.aspx)怎么样？

```
using System.ComponentModel.DataAnnotations;

internal class MaxDigitsAttribute : ValidationAttribute
{
    private int Max,
                Min;

    public MaxDigitsAttribute(int max, int min = 0)
    {
        Max = max;
        Min = min;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (!IsValid(value))
        {
            return new ValidationResult(this.FormatErrorMessage(validationContext.DisplayName));
        }
        return null;
    }

    public override bool IsValid(object value)
    {
        // you could do any custom validation you like
        if (value is int)
        {
            var stringValue = "" + (int)value;
            var length = stringValue.Length;
            if (length >= Min && length <= Max)
                return true;
        }

        return false;
    }
} 
```

# ios - 无法使用 Fruitstrap（iOS 设备）上传数据。分段错误：11

> ID：13630391
> 
> 赞同：3
> 
> 时间：2012-11-29T16:35:41.060
> 
> 标签：ios, xcode4.5, appdata

我正在尝试以这种方式使用 Fruitstrap 将数据上传到我的应用程序。

```
./fruitstrap upload --bundle-id com.x.x --file /path/to/data-file.xcappdata/ 
```

但我收到“分段错误：11”错误。有谁知道为什么？以及如何解决？

当我说。

```
./fruitstrap upload --bundle-id com.x.x --file /path/to/data-file --target / [or] /Documents/ 
```

我收到一条消息说无法打开文件“/path/to/data-file.xcappdata/”

（我知道我得到 Segmentation fault: 11 主要是当程序试图访问/操作内存时它真的不能。）

但问题是有人见过这个吗？也许解决了这个问题？

# php - 在 PHP 中构造装饰器

> ID：13630392
> 
> 赞同：4
> 
> 时间：2012-11-29T16:35:44.743
> 
> 标签：php, python, decorator

我是一个新手开发人员，试图扩展我的工具箱并学习更多技巧。我最近在 Python 中遇到了一种称为“装饰”的模式，我想知道是否/如何在 PHP 中实现它，因为我有一个现有的 PHP 代码库。

这是我的意思的一个简短示例：

```
import time

def log_calls(func):
    def wrapper(*args, **kwargs):
        now = time.time()
        print("Calling {0} with {1} and {2}".format(
            func.__name__,
            args,
            kwargs
        ))
        return_value = func(*args, **kwargs)
        print("Executed {0} in {1}ms".format(
            func.__name__,
            time.time() - now
        ))
        return return_value
    return wrapper

@log_calls
def test1(a,b,c):
    print("\ttest1 called")

@log_calls
def test2(a,b):
    print("\ttest2 called")

@log_calls
def test3(a,b):
    print("\ttest3 called")
    time.sleep(1)

test1(1,2,3)
test2(4,b=5)
test3(6,7) 
```

它不一定要在语法上那么漂亮。我了解所有语言都有其细微差别，并且我知道 PHP 不支持该语法。但是我仍然希望能够在尽可能少地重写代码的同时达到同样的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:52:25.637

基本上不，PHP 根本不支持它。据我所知，它甚至不在未来 PHP 版本的路线图上。

有趣且略微相关：如果您使用 phpUnit 来测试您的代码，那么我在 PHP 领域所能想到的最接近您所追求的东西。phpUnit 使用方法上方的 docblock 类型注释中的引用实现了一些类似的东西以供自己使用。例如：

```
/**
 * @dataProvider myProviderFunc
 */
public function myTestFunc($argsFromProvider) {
    ....
}

public function myProviderFunc() {
    return array(....);
} 
```

因此，当 phpUnit 想要调用 时`myTestFunc()`，它首先调用`myProviderFunc()`，并将该函数的输出传递给`myTestFunc()`.

这让我觉得与您描述的装饰器语法很接近，但并不完全相同。但是，它不是标准的 PHP 语法；phpUnit 自己实现了所有这些东西。它读取源代码并在运行测试之前解析注释块时进行大量预处理，因此效率不高。适用于单元测试工具，但不适用于生产系统。

但是不，对您的问题的简短回答是您想要的内容无法在 PHP 中完成。对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:25:28.083

PHP 没有对装饰器模式的语法支持，但没有什么能真正阻碍您自己实现它。

您可以查看以下可能与您的问题相关的讨论：

*   [如何在 PHP 中实现装饰器？](https://stackoverflow.com/questions/948443/how-to-implement-a-decorator-in-php)
*   [尝试在 php 中实现（理解）装饰器模式](https://stackoverflow.com/questions/6360650/trying-to-implement-understand-the-decorator-pattern-in-php)

这是另一个资源，包含多种语言的 UML 图和代码示例，包括 PHP。

*   [装饰器设计模式](http://sourcemaking.com/design_patterns/decorator)

# memcached - IronCache 的原子更新

> ID：13630393
> 
> 赞同：1
> 
> 时间：2012-11-29T16:35:44.853
> 
> 标签：memcached, mq, iron.io, iron

我看到您可以在 IronCache 中原子地增加一个值，但是如果您有许多 IronWorker 试图将`put`一个值添加到单个缓存键中怎么办？将这些值更新放在消息队列中以便将更新同步到缓存会更好还是有另一种惯用的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:57:28.193

目前没有惯用的方法来更新非整数缓存项而不引起竞争条件之神。有很多不同的技巧可以绕过这个限制，但是您的 MQ 解决方案（假设只有一个工作人员正在编写更改）可能是您最好的选择。

我们知道这个缺点，我们正在努力修复，但我们目前没有什么要宣布的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:34:30.860

一种方法是将您的值拆分为多个缓存条目。假设你有你的 json 层次结构：

```
{
    "x": "y",
    "sub1": {
        "a": "b"
    },
    "sub2": {
        "c": "d"
    }
} 
```

将其更改为：

```
{
    "x": "y",
    "sub1": "cache_key_a",
    "sub2": "cache_key_b"
} 
```

然后在cache_key_a中：

```
{
    "a": "b"
} 
```

并对 cache_key_b 等做同样的事情。那能解决你的问题吗？

# debugging - 调试 KML 文件

> ID：13630399
> 
> 赞同：3
> 
> 时间：2012-11-29T16:35:59.660
> 
> 标签：debugging, kml, google-earth

```
<?xml version="1.0" encoding="UTF-8"?> <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document> <Placemark> <Name>Test Name</Name> <Description><b>Project Information</b><br><ul><li>Project Name: Test Name</li><li>Project Number: Test Number</li><li>Project Location:  Test Location</li><li>System: Test System</li></ul><br><b>Project Team</b><br><br><ul><li>Regional Manager: Mem 1</li><li>Project Manager: Mem 2</li></ul><br>YouTube Video URL: <a href="http://youtu.be/U9EYP9GIe2k"><br>Picassa Album URL: <a href="www.picassa.com"><br></Description> <Point> <Coordinates>30,-125</Coordinates>,0 </Point> </Placemark> </Document> </kml> 
```

这就是我的自定义 Excel 宏正在生成的内容（我是编程新手，所以如果你注意到一些大事，请放轻松）。当我尝试使用 Google 地球打开 KML 文件时，我收到以下消息：打开文件“*文件路径*”失败：第 2 行第 454 列的解析错误：标签不匹配。这与 /Description 标签相关...这个标签有什么问题？我与它对应的描述标签相匹配。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T16:54:41.287

您可以应用一些技术来调试和修复损坏的 KML 文件。

基本上，验证 KML 文件的最快方法是首先使用您的网络浏览器。KML 是一个 XML 文件，因此首先您可以测试它是否是格式良好的 XML 文件，这是它成为有效 KML 文件的先决条件。只需重命名 KML 文件，添加 .xml 文件扩展名，然后将文件拖到 Web 浏览器（Firefox、Chrome 等）上即可对其进行验证。[请参阅此处的详细示例](http://kml4earth.appspot.com/kmlBestPractice.html#Basic_Validation)。

一旦找到并修复了这些错误，您就可以尝试使用 KML 验证器来检查文件是否是符合 OGC KML 规范和相关 XML 模式的有效 KML，例如独立的命令行[XmlValidator](https://github.com/docjason/XmlValidate)工具。

在您的示例中，如果您通过一个简单的 XML SAX 解析器运行它，它将显示：*元素类型 "br" 必须由第`</br>`455 列的匹配结束标记 ""*终止。

错误是该`<description>`元素具有 HTML 标记但未使用*CDATA*块进行转义（CDATA 是 XML 标准的一部分）。要解决此问题，您需要像这样重新格式化您的 KML：

```
 <description>
      <![CDATA[
          <b>Project Information</b>
          ...
          <br>
      ]]>
  </description> 
```

此外，该元素的名称错误（描述与描述）。KML 区分大小写。

可以在[此处](http://kml4earth.appspot.com/kmlBestPractice.html#Basic_Validation)找到调试 KML 文件的更多提示。

# c# - 在不同的会话中更新 NHibernate 缓存

> ID：13630400
> 
> 赞同：0
> 
> 时间：2012-11-29T16:36:01.483
> 
> 标签：c#, nhibernate, caching

我正在开发一个网站，其中 WCF 网络服务将使用 NHibernate 作为数据库 ORM，每个用户会话都有自己的 NHibernate 会话，该会话将在会话级别保持打开状态，为他们提供会话数据库缓存。

每个用户都有一个摘要对象，其中包含来自其他用户的通知列表，例如新消息、新喜欢等，类似于 facebook 如何在顶部定期更新通知以显示来自其他用户的新喜欢、评论等小红旗图标。

显然，一旦加载，摘要对象将保持在 NHibernate 缓存级别，并且通过 AJAX 调用来检查对象是否已更改并在收到任何新通知时更新视觉标志将是一件简单的事情。

问题是对此的任何更改 - 例如向用户发送新消息，都将在不同的 NHibernate 会话中进行（因为每个用户都有自己的会话并且您不向自己发送消息！）所以用户 Y ，在会话 Y 中，向用户 X 发送消息并更新用户 X 的摘要以显示 1 条新消息？

是强制代码每次都转到数据库以获取摘要详细信息而不对摘要对象使用缓存的唯一方法吗？即使有办法更新另一个会话，我也看不到任何方法你会知道如何找到正确的会话，所以我猜唯一的方法是更新数据库摘要表和检查更新的轮询线程活动每次都去数据库并忽略缓存。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:11:27.137

在 NHibernate 指南中，ISession 对象应尽可能短……如果您的应用程序被大量用户使用，您当前的解决方案将无法扩展。

# opengl - 如何使用颜色列表绘制 SVG 多边形（如 OpenGL 中的 glColorPointer）？

> ID：13630401
> 
> 赞同：0
> 
> 时间：2012-11-29T16:36:01.780
> 
> 标签：opengl, svg

我正在将 OpenGL 绘图代码转换为 SVG。OpenGL 的一个特性是，在绘制闭合线（或多边形）时，您可以为每个顶点指定颜色：

```
short vertices[100*3] = {100, 100, 100, 102, 102, 102, ....};
glVertexPointer(3, GL_SHORT, 0, vertices); // give vertices to OpenGL
char colors[100*3] = {255, 0, 0, 254, 0, 0,....};
glColorPointer(m_3, GL_UNSIGNED_BYTE, 0, pColors);// give color to OpenGL
glDrawArrays(GL_POLYGON, 0, 100); 
```

这将使填充颜色根据与每个点的距离而变化。

在 SVG 中，我只能为多边形指定一种填充颜色：

```
<polygon points="0 524 0 509 5 509 5 524" stroke="#000000" fill="#453d3b" stroke-width="8.00000px"/> 
```

有没有办法用 SVG 实现这种效果？

# python - 在 Linux 上使用 time.time() 进行分析

> ID：13630402
> 
> 赞同：0
> 
> 时间：2012-11-29T16:36:04.043
> 
> 标签：python, time, profiling

`time.time()`在 Linux 上似乎可以`us = 1/1000 ms`精确地产生当前时间。

我可以用它来`ms`精确地分析函数吗，通过这样做：

```
func_start = time.time() * 1000
#run something inbetween
print 'Function finishes in: %.3f ms' % ((time.time() * 1000) - func_start) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:38:09.220

不，您不会以这种方式提高精度。你也可以这样做：

```
func_start = time.time()

print 'Function finishes in: %.3f ms' % ((time.time() - func_start) * 1000) 
```

但是要准确衡量一个函数的性能，你真的需要重新运行它几次，以消除操作系统调度、同时发生磁盘刷新中断等的影响。

对于您的平台允许的准确计时方法，请使用[`timeit`模块](http://docs.python.org/2/library/timeit.html)，或至少重新使用它的[`default_timer()`](http://docs.python.org/2/library/timeit.html#timeit.default_timer)功能。

# ruby-on-rails - 开发到生产

> ID：13630403
> 
> 赞同：1
> 
> 时间：2012-11-29T16:36:09.347
> 
> 标签：ruby-on-rails, production

我有我的第一个应用程序在 Rails 上运行在带有 apache + 乘客的 VPS 上，我想投入生产。

## 我的宝石文件

```
gem 'rails', '3.2.9'
gem 'sqlite3'

group :assets do
gem 'execjs'
gem 'therubyracer'
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :production do
gem 'therubyracer'
gem 'execjs'
end 
```

## 我的生产.rb

```
CGS::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

 # Code is not reloaded between requests
 config.cache_classes = true

 # Full error reports are disabled and caching is turned on
 config.consider_all_requests_local       = false
 config.action_controller.perform_caching = true

 # Disable Rails's static asset server (Apache or nginx will already do this)
 config.serve_static_assets = false

 # Compress JavaScripts and CSS
 config.assets.compress = true

 # Don't fallback to assets pipeline if a precompiled asset is missed
 config.assets.compile = false

 # Generate digests for assets URLs
 config.assets.digest = true

 # Defaults to nil and saved in location specified by config.assets.prefix
 # config.assets.manifest = YOUR_PATH

 # Specifies the header that your server uses for sending files
 # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
 # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

 # Force all access to the app over SSL, use Strict-Transport-Security, 
 # config.force_ssl = true

 # See everything in the log (default is :info)
 # config.log_level = :debug

 # Prepend all log lines with the following tags
 # config.log_tags = [ :subdomain, :uuid ]

 # Use a different logger for distributed setups
 # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

 # Use a different cache store in production
 # config.cache_store = :mem_cache_store

 # Enable serving of images, stylesheets, and JavaScripts from an asset server
 # config.action_controller.asset_host = "http://assets.example.com"
 # Precompile additional assets 
 config.assets.precompile += ['IEall.css']

 # Disable delivery errors, bad email addresses will be ignored
 # config.action_mailer.raise_delivery_errors = false

 # Enable threaded mode
 # config.threadsafe!

 # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
 # the I18n.default_locale when a translation can not be found)
   config.i18n.fallbacks = true

 # Send deprecation notices to registered listeners
 config.active_support.deprecation = :notify

 # Log the query plan for queries taking more than this (works
 # with SQLite, MySQL, and PostgreSQL)
 # config.active_record.auto_explain_threshold_in_seconds = 0.5
 end 
```

## 我的虚拟主机

```
 <VirtualHost *:80>

 ServerName cg
 RailsEnv development -------------------------> if delete this line, don't work
 DocumentRoot /home/ak-48/cgs/public
 <Directory /home/ak-48/cgs/public >
 AllowOverride all
 Options -MultiViews
 </Directory>
</VirtualHost> 
```

看了几个教程，但是删除了virtualhost RailsEnv开发，网站显示“有问题”的标志

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:08:32.490

我不知道 Apache，但你不需要用 替换该行`RailsEnv development`吗`RailsEnv production`？

当你使用 Nginx 时，你当然需要做类似的事情

# ruby-on-rails - 上传图片在生产模式下不起作用

> ID：13630410
> 
> 赞同：1
> 
> 时间：2012-11-29T16:36:29.970
> 
> 标签：ruby-on-rails, ruby, nginx, paperclip, passenger

上传图像在我的机器上运行良好，但在实时服务器上无法运行。

这是本地主机上的参数：

```
{"provider_source"=>{"photos_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xaa23410 @original_filename="som_statenisland_netzero_school.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"provider_source[photos_attributes][0][image]\"; filename=\"som_statenisland_netzero_school.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121129-4550-xbzsif>>, "description"=>""}, "1"=>{"description"=>""}, "2"=>{"description"=>""}}}, "utf8"=>"✓", "authenticity_token"=>"6cMwEI4lZreocgiOyJRdDfh2cGMcs85i28mMdsEWvog=", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"} 
```

我在实时服务器上安装了图像魔法。

我在实时服务器上使用 nginx + Phusion Passenger 作为我的应用程序。

在 Live 服务器上，我选择一个图像并点击提交。图像参数始终为零。

这是我的 nginx 配置：

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /usr/local/rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.18;
    passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.2-p180/ruby;

    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;

        root /srv/www/rails/bbz_dev;
        passenger_enabled on;

        }
} 
```

我不知道为什么会出现这个问题。我试图解决它 2 天，但我不能。请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:46:18.193

在 production.rb 中，你有这个吗？

```
 config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx 
```

# twitter-bootstrap - 我可以在我的引导选项卡窗格中嵌套一个网格吗？

> ID：13630411
> 
> 赞同：1
> 
> 时间：2012-11-29T16:36:36.560
> 
> 标签：twitter-bootstrap, sass

我在我的页面中使用 Bootstrap 导航选项卡，如下所示：

```
<div class="container-fluid">

     <div class="row-fluid">
        <div class="span2">
        </div>
        <div class="span10">
            <!--Body content-->

<div class='row>
  <div class='span8'>
    <ul class="nav nav-tabs" id="myTab">
      <li class="active"><a href="#home">Home</a></li>
      <li><a href="#profile">Profile</a></li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane active" id="home">...</div>
      <div class="tab-pane" id="profile">...</div>
    </div>

    <script>
      $(function () {
        $('#myTab a:last').tab('show');
      })
    </script>
  </div>
</div>

        </div>
     </div>
</div> 
```

我想在我的选项卡窗格中组织一个网格，我试过这个：

```
<div class='row'>
    <div class='span4'>...</div>
    <div class='span4'>...</div>
</div 
```

在窗格内，但这不起作用。

如何使用引导程序在我的选项卡窗格中嵌套列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:57:15.490

这对我[有用 http://jsfiddle.net/rKaaq/](http://jsfiddle.net/rKaaq/)

```
<div class="row">
  <div class="span8">
    <ul class="nav nav-tabs" id="myTab">
      <li class="active"><a href="#home">Home</a></li>
      <li><a href="#profile">Profile</a></li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane active" id="home"></div>
      <div class="tab-pane" id="profile">
      <div class="row">
        <div class="span4">This is some text that spans4</div>
        <div class="span4">This is some more text that spans 4</div>
       </div>  
      </div>
    </div>

    <script>
      $(function () {
        $('#myTab a:last').tab('show');
      })
    </script>
 </div>
</div> 
```

# ruby - Stomp ruby gem 不会在死信交换队列上发布 Rabbitmq

> ID：13630414
> 
> 赞同：2
> 
> 时间：2012-11-29T16:36:41.617
> 
> 标签：ruby, gem, rabbitmq, stomp, dead-letter

我正在尝试通过 ruby​​ stomp gem [https://github.com/stompgem/stomp在带有](https://github.com/stompgem/stomp)*x-dead-letter-exchange*和*x-message-ttl 标头的队列（RabbitMQ）上发布*

它通过管理面板工作正常，但我看不到使用此代码发布的消息：

```
 require 'stomp'

    client = Stomp::Client.new("guest", "guest", "localhost", 61613)
    client.publish("/queue/queue_with_dlx_header", "hello world!") 
```

如果我在“正常”队列上尝试此操作，则消息会按预期发布。

有什么建议吗？

# infragistics - Infragistics.Excel 8.2 如何从具有公式的单元格中获取文本值

> ID：13630416
> 
> 赞同：1
> 
> 时间：2012-11-29T16:36:54.637
> 
> 标签：infragistics

我只是试图读取电子表格，并根据单元格中的值构建对象列表。

其中两个单元格应用了公式，我如何读取计算值而不是公式。

我正在使用 Infragistics2.Excel.v8.2，我已经看到了一个使用 Infragistics2.Documents.Excel 命名空间中的 GetText() 的示例，但我似乎没有可用的方法，如果没有，还有其他方法吗？下载额外的dll？

这是我的代码，origincountry 和 destinationcountry 正在使用一个公式。

```
foreach (var row in worksheet.Rows)
            {

                var fullScheduleUtc = new FullScheduleUtc
                                          {
                                              Title = "",
                                              Carrier = row.Cells[0].Value.ToString(),
                                              FlightNumber = row.Cells[1].Value.ToString(),
                                              DepartureStation = row.Cells[2].Value.ToString(),
                                              OriginCountry = row.Cells[3].Value.ToString(),
                                              DepartureTime = new TimeSpan(),
                                              DestinationStation = row.Cells[5].Value.ToString(),
                                              DestinationCountry = row.Cells[6].Value.ToString(),
                                              ArrivalTime = new TimeSpan(),
                                              EffectivePeriod = row.Cells[8].Value.ToString(),
                                              Monday = true,
                                              Tuesday = false,
                                              Wednesday = true,
                                              Thursday = true,
                                              Friday = true,
                                              Saturday = true,
                                              AircraftType = row.Cells[10].Value.ToString()
                                          };

                fullScheduleList.Add(fullScheduleUtc);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:19:04.500

NetAdvantage 2008 第 3 卷更改了行为，因此 GetValue 将返回值而不是公式，因此您需要升级到 NetAdvantage 2008 第 3 卷或更高版本。

# iphone - 标签未用正确的日期刷新

> ID：13630423
> 
> 赞同：1
> 
> 时间：2012-11-29T16:37:16.160
> 
> 标签：iphone, objective-c, ios, nsdate, nscalendar

我有一个标签和两个箭头按钮。当我按下左箭头时，我想显示比该日期少一天。当我按下右箭头时，应该添加一天。

目前这是我的代码。

```
- (IBAction)addDay:(id)sender {
    NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
    dayComponent.day = 1;
    NSCalendar *theCalendar = [NSCalendar currentCalendar];
    NSString *dateNow = _lblDate.text;

    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EE. d MMMM YYYY"];
    NSDate *date = [dateFormat dateFromString:dateNow];

    date = [theCalendar dateByAddingComponents:dayComponent toDate:date options:0];
    NSString *dateString = [dateFormat stringFromDate:date];
    _lblDate.text = dateString;

}

- (IBAction)deleteDay:(id)sender {

    NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
    dayComponent.day = 1;
    NSCalendar *theCalendar = [NSCalendar currentCalendar];
    NSString *dateNow = _lblDate.text;

    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"EE. d MMMM YYYY"];
    NSDate *date = [dateFormat dateFromString:dateNow];

    date = [theCalendar dateByAddingComponents:dayComponent toDate:date options:0];
    NSString *dateString = [dateFormat stringFromDate:date];
    _lblDate.text = dateString;

} 
```

但由于某种原因，日期是错误的。添加和删​​除日期时没有模式。

有谁能够帮助我 ？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:42:07.627

我不确定这是主要问题，但在`- (IBAction)deleteDay:(id)sender`,`dayComponent.day = 1;`应该是`dayComponent.day = -1;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:56:44.390

我看到这有两个问题。

1.  实际上并没有减少一天（看起来像加法？）
2.  不更新主线程上的 UI。

尝试进行以下更改：

```
- (IBAction)deleteDay:(id)sender {

    NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
    dayComponent.day = -1;
    /* snip */
} 
```

和...

`[_lblDate performSelectorOnMainThread:@selector(setText:) withObject:dateString waitUntilDone:NO];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:33:40.290

您的添加代码是正确的。然而，依赖字符串到日期的转换会产生问题。我建议您将`NSDate`对象作为实例变量，然后在第二天或前一天更新此实例变量。更新值后，您可以使用 dateformatter 从该日期检索字符串。现在，当您使用标签的文本生成日期时，它会产生问题。所以你可以这样做

```
// currentDate is my instance variable.
currentDate = [[NSDate date] retain];
NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
[dateFormat setDateFormat:@"EE. d MMMM YYYY"];
dateLabel.text = [dateFormat stringFromDate:currentDate]; 
```

这就是你 nextday 函数的样子

```
 (IBAction)nextDay:(id)sender {

       NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
       dayComponent.day = 1;
       NSCalendar *theCalendar = [NSCalendar currentCalendar];

       NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
       [dateFormat setDateFormat:@"EE. d MMMM YYYY"];

       currentDate = [[theCalendar dateByAddingComponents:dayComponent toDate:currentDate options:0] retain];
       NSString *dateString = [dateFormat stringFromDate:currentDate];
       dateLabel.text = dateString;
    } 
```

这是前一天

```
enter code here

    (IBAction)previousDay:(id)sender {

        NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
        dayComponent.day = -1;
        NSCalendar *theCalendar = [NSCalendar currentCalendar];

        NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormat setDateFormat:@"EE. d MMMM YYYY"];

        currentDate = [[theCalendar dateByAddingComponents:dayComponent toDate:currentDate options:0] retain];
        NSString *dateString = [dateFormat stringFromDate:currentDate];
        dateLabel.text = dateString;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:47:21.223

要添加一天，您需要添加一天的TimeInterval，如下所示

```
NSDate *newDate1 = [date addTimeInterval:60*60*24]; 
```

要减去一天，请执行以下操作

```
NSDate *newDate2 = [date addTimeInterval:-60*60*24]; 
```

# php - 图像未在 dompdf 中呈现

> ID：13630426
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:37:22.607
> 
> 标签：php, codeigniter, dompdf

我正在为我的应用程序使用 codeIgniter 和 dompdf 来生成 pdf。下面的代码是我用来显示图像的代码。

```
<div class=\"block_head\">
     <h2>Image display</h2>";
     $image_location = "/images/xxx.png";
     $html .="<img src=\"".$image_location."\" width=\"200\" height=\"200\" />
</div>"; 
```

我测试并调试了所有方法是否我做错了什么。像这样首先我检查了路径是否错误。这是服务器上的路径。这是正确的。我通过回显 $html 进行了测试，它也显示了完美的路径。当我单击该路径时，图像正在显示。但是当我试图以 pdf 格式呈现它时，它没有显示。

注意：PDF 生成完美，没有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:02:54.343

尝试如下

> 如果您为图像提供完整的 URI，则将其视为外部图像，因此必须将定义的成本 DOMPDF_ENABLE_REMOTE 设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:57:35.830

您是否使用 将此文档加载到 dompdf 中`$dompdf->load_html($html);`？如果是这样，那么您可能会遇到上下文问题。当您以这种方式加载文档时，dompdf 不知道文档基本路径。因此，它假定您正在使用本地文件系统工作。在此上下文中，根路径“/”转换为本地文件系统的根，而不是 Web 内容目录的根。使用相对于实现 dompdf 的 PHP 文件的路径，或者指定当前文件系统中的完整路径。

# python - python列表比较错误

> ID：13630428
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:37:31.280
> 
> 标签：python

我正在比较两个列表，我收到了这个错误`SyntaxError: can't assign to function call`

Python

```
if all(value.lower() in mp3meta for value.lower() in search_key):
  #do stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:43:15.460

```
SyntaxError: can't assign to function call 
```

是一个非常清晰的错误信息

```
for value.lower() in search_key): 
```

value.lower() 是一个函数调用而不是一个变量，因此它不能在循环中赋值。

试试这个 ：

```
if all(value in mp3meta for value in [value.lower() for value in search_key]) : 
```

这不是最好的方法。Python 通常会产生非常干净的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:45:55.427

您正在尝试将赋值表达式中的字符串小写。你不需要这样做。

试试这个：

```
if all(value.lower() in mp3meta for value in search_key): 
```

这使得 this 等价于：

```
def test(searchkey, mp3meta):
    for value in search_key:
        if value.lower() in mp3meta:
            return True

if test(searchkey, mp3meta): 
```

您在循环中的尝试尝试这样做：

```
for value.lower() in search_key: 
```

这是 Python 中的语法错误。

# jakarta-mail - JavaMail 未检测到收件人的无效电子邮件地址（地址不存在）

> ID：13630437
> 
> 赞同：2
> 
> 时间：2012-11-29T16:38:12.373
> 
> 标签：jakarta-mail, sendmail, email-validation

我正在开发一个需要向客户发送提醒的网络应用程序。我正在使用 JavaMail。但是当我提供无效的接收者电子邮件地址（不存在的电子邮件 ID）时，程序***不会抛出*** `SendFailedException`. ***但发件人电子邮件 ID 的收件箱包含发送报告，说邮件发送失败。有没有办法在程序中检测到这个故障***？使用的代码如下：

[注意使用的是gmail smpt]

```
 Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.stmp.user", "abc@gmail.com");          
        //If you want you use TLS 
        props.put("mail.smtp.auth", "true");

        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.password", "password");
        // If you want to use SSL
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                   "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        Session session = Session.getDefaultInstance(props, new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                String username = "abc@gmail.com";
                String password = "password";
                return new PasswordAuthentication(username,password); 
            }
        });
        String[] to = {"test1@gmail.com","test2@yahoo.in","test3@gmail.com","test4@gmail.com"};
        String from = "abc@gmail.com";
        String subject = "Testing...";
        MimeMessage msg = new MimeMessage(session);
        try {
            msg.setFrom(new InternetAddress(from));
            InternetAddress[] addressTo = new InternetAddress[to.length];
            for (int i = 0; i < to.length; i++)
            {
                addressTo[i] = new InternetAddress(to[i]);
            }
            msg.setRecipients(RecipientType.TO, addressTo); 
            // msg.setRecipient(MimeMessage.RecipientType.TO, new InternetAddress(to));
            msg.setSubject(subject);
            // msg.setText("JAVA is the BEST");

            // Create the message part 
            BodyPart messageBodyPart = new MimeBodyPart();

            // Fill the message
            messageBodyPart.setText("This is message body");

            // Create a multipar message
            Multipart multipart = new MimeMultipart();

            // Set text message part
            multipart.addBodyPart(messageBodyPart);

            // Part two is attachment
            messageBodyPart = new MimeBodyPart();
            String filename = "file.txt";
            DataSource source = new FileDataSource(filename);
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName(filename);
            multipart.addBodyPart(messageBodyPart);

            // Send the complete message parts
            msg.setContent(multipart );

            Transport transport = session.getTransport("smtp");
            transport.send(msg);
            System.out.println("E-mail sent !");
        }
        catch(Exception exc) {
            System.out.println(exc);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:09:39.913

您可能误解[了电子邮件的“存储和转发”是如何工作的](http://osdir.com/ml/java.sun.javamail.general/2005-04/msg00003.html)：发件人很少会立即知道地址无效。这很可能是无效域名的情况，但即使那样，您也不能保证您的 SMTP 会话会报告错误，因为这取决于您要交付的 MTA 如何处理电子邮件。

# css - 无法让 div 达到 100% 的高度

> ID：13630450
> 
> 赞同：1
> 
> 时间：2012-11-29T16:39:15.630
> 
> 标签：css, html

我在网上尝试了几个建议，使我的 html 和 body 标签的高度为 100%，最小高度为 100%。我也将我的 div 标签设置为相同。它只是没有扩展到屏幕底部。

此外，我无法获得第二个浮动 div 来填充 100% 未被旁边另一个 div 填充的空间。它只会填充 100% 的屏幕（在另一个较小的 div 下）或足以容纳文本。

我想应该注意的是，我尝试在 IE9 和 Firefox 16 中查看。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <style type="text/css">
    body {
      margin: 0px;
      padding: 0px;
      height: 100%;
      min-height: 100%;
      overflow:hidden;
    }  
    div#topbar {
      width: 100%;
      height:133px;
      background-image :url(bkgnd_header_tile.jpg);
    }
    div#logo {
      width: 187px;
      height: 133px;
      background-image:url('headerlogo_home.jpg');
      float: left;
    }
    div#text {
      width: 1;
      height: 133px;
      float: right;
    }
    div#campuses {
      height: 68px;
      padding-top: 10px;
      color: White;
      text-align: right;
    }
    div#title {
      height: 41px;
      color: White;
      text-align: right;
      padding-top: 14px;
    }
    div#sidebar {
      height: 100%;
      width: 250px;
      float: right;
      background-color: Black;
    }
    div#body {
      height: 100%;
      width: 100%
      float: right;
      font-family: Segoe UI;
    }
    span.text {
      padding-left: 15px;
      padding-right: 15px;
      font-family: Sans-Serif;
      font-size: small;
    }
    span.name {
      padding-left: 15px;
      padding-right: 15px;
      font-family: Sans-Serif;
      font-size: x-large;
    }  
  </style>
</head>
<body>
  <div id="topbar">
    <div id="logo"></div>
    <div id="text">
      <div id="campuses">
        <span class="text">St. John's Campus</span>
        <span class="text">Grenfell Campus</span>
        <span class="text">Marine Institute</span>
        <span class="text">Harlow Campus</span>
        <span class="text">Distance Education</span>
      </div>
      <div id="title"><span class="name">Memorial Self Service</span></div>
    </div>
  </div>
  <div id="sidebar">

  </div>
  <div id="body">
    asdf</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:43:20.113

设置`position:relative`为 body 将考虑 body 的高度并沿 body 完全拉伸绝对定位的内容
注意，以百分比指定的 height 属性是相对于包含块计算的

或者您也可以尝试`overflow:hidden;`使用 body 标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:01:20.663

我会尝试像往常一样将位置设置为绝对值，因为我有这种奇怪的行为，绝对值来救援，最重要的是，我还会将 left 和 top 设置为 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:40:17.820

基本上，按照 Ravindra 的建议，并对其进行了一些修改，我得到了这个工作。我使用以下样式设置设置身体

```
body {
  position: absolute;
  width: 100%;
  height: 100%;
  margin: 0px;
  padding: 0px;
} 
```

并将这些用于我的两个 DIV 部分：

```
div#body { 
  position: relative;
  height: 100%;
  overflow:scroll;
}

div#sidebar {
  position: fixed;
  background-color : #EFEFEF;
  height: 100%;
  width: 300px;
  overflow: hidden;
}

div#content {
  height: 100%;
  float: left;
  margin-left: 300px; 
```

`<div id="body"></div>`是另外两个 div 的父容器，id="sidebar" 和 id="content"。我这样做是因为我在它自己的 div 中也有一个顶部栏，它位于“body”div 的上方 133px 高。

# ravendb - Windows Server 2003 上的 Raven 备份

> ID：13630451
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:17.203
> 
> 标签：ravendb

有没有人在 Server 2003 上进行 Raven 备份/恢复？我正在使用 Raven.backup.exe 的 1.0.616.0 进行备份，使用 Raven.Server.exe 进行恢复。

问题是恢复似乎破坏了 Raven，所以它不会启动。

在 codeplex 上有一个使用 ManagedEsent 的开放式查询：http: [//managedesent.codeplex.com/discussions/405020](http://managedesent.codeplex.com/discussions/405020)

如果我得到回复，那么我会在这里发回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:19:19.420

目前看来这是不可能的，但是 Raven 备份的未来版本可能支持 Server 2003。

目前，我们只使用基于卷快照的解决方案，这只是暂时的，因为我们很快就会推出 Server 2008R2/2012。

# sql - 使用 IBMDB2 在索引中聚合函数

> ID：13630452
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:18.470
> 
> 标签：sql, indexing, db2

有没有办法预先聚合聚合函数（fi count（））的结果并将其存储在索引中？

背景是：我想加快 count() 查询。以便：

从 TE123 中选择 count(users) where region = 'A';

将由诸如 Region Count(Users) A 548 E 458 之类的索引支持

我知道 MQT 也有助于解决这个问题。但是，在这种情况下，不可能使用 MQT，因为我们使用一种 ORM，并且我们不想在 MQT 上定义实体。

我只是稍微记得——一位 DBA 告诉我——为 DB2 V10 计划了这样一个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:02:23.700

即使不重写查询，MQT 可能仍然会有所帮助。

> 物化查询表可以显着提高查询的性能，尤其是复杂查询。如果优化器确定可以使用 MQT 解析查询或查询的一部分，则可能会重写查询以利用 MQT。

[**来源**](http://www.ibm.com/developerworks/data/library/techarticle/dm-0509melnyk/)

## 对于 z/OS：

> 使用称为自动查询重写的过程，DB2® 可以识别何时可以透明地重写提交的查询以使用具体化查询表中存储的结果。通过查询具体化查询表而不是从底层基表计算结果，DB2 可以更有效地处理一些复杂的查询。

[**来源**](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.perf/src/tpc/db2z_mqtandaqr.htm)

## 对于 Linux/Unix/Windows：

> MQT 知识集成到 SQL 和 XQuery 编译器中。在编译器中，查询重写阶段和优化器将查询与 MQT 匹配，并确定是否在访问基表的查询中替换 MQT。如果使用 MQT，解释工具可以提供有关选择了哪个 MQT 的信息。在这种情况下，用户需要对基表而不是重新路由的 MQT 的访问权限。

[**来源**](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.perf.doc/doc/c0005324.html)

# gwt - TOMCAT 上的 HTML 模式下没有图像

> ID：13630454
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:20.357
> 
> 标签：gwt, tomcat, jasper-reports

```
exporter.setParameter(JRHtmlExporterParameter.IMAGES_DIR_NAME, "images/jasper_tmp/");
exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "/images/jasper_tmp/"); 
```

我在 GWT 项目中使用 jasper 报告。
我的PROD平台是Win2003上的TOMCAT 5.5。
我也尝试过 TOMCAT 7 / Windows 7。

这些行在 servlet 中从应用程序的服务器端调用。所以我不能使用来自 com.google.gwt.core.client.GWT 的静态方法。

看来我的问题[与 HTML 格式的 jasper 报告类似](https://stackoverflow.com/questions/3830043/jasper-reports-with-html-format)

在 DEV 模式下，在 Eclipse 中，一切正常。当我以 HTML 格式获取我的 jasperreport 时，所有图像都会显示。

在我的 PROD 环境中，它是一个 TOMCAT 服务器，jasper 报告中的图像不会以 HTML 格式显示。在 PROD 服务器上，在 %TOMCAT_HOME% 中`exporter.setParameter(JRHtmlExporterParameter.IMAGES_DIR_NAME, "images/jasper_tmp/");`生成`images/jasper_tmp/`，而不是在我的应用程序的部署目录中。
在文件系统上`%TOMCAT_HOME%/images/jasper_tmp/`，我期望`%TOMCAT_HOME%/webapps/my_project/images/jasper_tmp/`.

**如何将图像作为参数传递？**（如果可能的话）......正如答案中所建议的那样。
我是否需要安装 Apache Web Server 来制定任何重写规则？我的 PROD 服务器只有 TOMCAT。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:19:55.627

请使用`Firefox with Firebug Plugin`or or `Chrome with Chrome Dev Tool`or IE8 Dev Tool 调查其`image path`or `css`or or`javascript`错误，并使用更多详细信息更新问题。

萤火虫-getfirebug.com

铬 - [https://developers.google.com/chrome-developer-tools/docs/overview](https://developers.google.com/chrome-developer-tools/docs/overview)

IE8 - [http://blogs.msdn.com/b/ie/archive/2008/03/07/improved-productivity-through-internet-explorer-8-developer-tools.aspx](http://blogs.msdn.com/b/ie/archive/2008/03/07/improved-productivity-through-internet-explorer-8-developer-tools.aspx)

1）您不需要使用重写规则进行apache代理，除非它的性能要求是提供静态资源。

2) 您可以使用 GWT.isProdModel、GWT.getHostPageBaseURL()、GWT.getModuleName() 或 getModuleBaseForStaticFiles() 调整 DevMode 和 Production Mode 的图像路径

```
if (com.google.gwt.core.shared.GWT.isProdMode()){
 //Path Used in production mode
} else {
 //Path Used in dev mode
} 
```

**编辑** 以上信息对客户端有帮助。在服务器端，Jetty 服务器**上下文**路径因您在服务器（如 tomcat）中的 webapp 部署而异。您可以按照此处提到的说明将其修复为与 tomcat 相同[https://groups.google.com/d/topic/google-web-toolkit/a8OsRmMSaMg/discussion](https://groups.google.com/d/topic/google-web-toolkit/a8OsRmMSaMg/discussion)

```
<?xml version="1.0"  encoding="UTF-8"?> 
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" 
"http://jetty.mortbay.org/configure.dtd"> 
<Configure class="org.mortbay.jetty.webapp.WebAppContext"> 

        <Set name="contextPath">/myapp</Set> 

</Configure> 
```

# ruby-on-rails-3.2 - 在 Rails 引擎中使用 Sass @import 指令时无法在插件中找到资产

> ID：13630456
> 
> 赞同：3
> 
> 时间：2012-11-29T16:39:22.637
> 
> 标签：ruby-on-rails-3.2, sass, compass-sass, sprockets, zurb-foundation

我正在构建一个使用 zurb-foundation 样式表的 Rails 引擎，并且不断遇到相同的 Sass::Syntax 错误。这看起来很奇怪，因为我在 Rails 应用程序中遵循了相同的过程，并且在第一次尝试时就成功了。所以我决定通过启动两个新的 Rails 项目（一个应用程序和一个引擎）来解决这个问题，并将它们配置为使用基础设置最少。

我从 2 个干净的 Rails 3.2.9 项目开始——一个应用程序和一个应用程序，并通过在 CSS 清单中`engine --full`添加 Foundation_and_overrides.scss 和 -ing 来手动为基础配置它们。`require`

然后我创建了一个简单的控制器，这样我就有了一个要加载的页面。对于应用程序，加载该页面并查看页面源代码，我可以看到基础 CSS 已正确编译并加载。

当我为引擎尝试同样的事情时，我得到了这个错误：

```
Sass::SyntaxError in Main#index

Showing /<PLUGIN_PATH>/test/dummy/app/views/layouts/application.html.erb where line #5 raised:

File to import not found or unreadable: foundation/common/ratios.
Load path: /<PLUGIN_PATH>/test/dummy
  (in /<PLUGIN_PATH>/app/assets/stylesheets/example_plugin/foundation_and_overrides.scss) 
```

（请注意，虚拟应用程序的 CSS 清单是`require`-ing 插件的 CSS 清单，即`require`-ingfoundation_and_overrides.scss。接线显然不是问题，因为错误是从foundation_and_overrides.scss 引发的）

我尝试了几个 Ruby-1.9.3 版本（我认为是 p125、194、p327），结果相同。

当我将此行添加到 test/dummy/config/application.rb 时，它仍然不起作用：

```
config.assets.paths << "#{Foundation::Engine.root}/scss" 
```

即使foundation/common/_ratios.scss 存在于该路径中。

问题可能出在 Sass、Sprockets、Compass、Foundation 或 Rails，所以我不知道从哪里开始。

我将其报告为[Foundation 的一个问题](https://github.com/zurb/foundation/issues/1228)，但我对此不太相信。

有没有人见过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:12:31.067

[我在这个 Stackoverflow 问题](https://stackoverflow.com/questions/6005361/sass-import-error-in-rails-3-app-file-to-import-not-found-or-unreadable-comp)中找到了答案

问题是 Rails 引擎的虚拟应用程序和常规 Rails 应用程序的 config/application.rb 文件略有不同。

在 Rails 应用程序中，您会在顶部看到以下代码：

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

但是在引擎虚拟应用程序中，您会看到：

```
Bundler.require
require "<PLUGIN_NAME>" 
```

在 Rails 应用程序中，第一个 Bundler.require 包括 Gemfile 中的所有组，但不包括 :assets，除非 Rails.env 是 :development 或 :test 第二个 Bundler.require 包括 :default - 即 Gemfile 中不存在的任何内容一个组——以及 :assets 和 :production、:development 或 :test

在虚拟应用程序中，这些都不是必需的，因为 1）它不打算用于生产，并且 2）测试和开发通常具有类似的依赖要求。由于 :assets 组只是将依赖项应用到 :test 和 :development 而不是 :production 的便捷方式，因此在虚拟应用程序中它与 :default 相同。因此，在一个虚拟应用程序中，只需要 :default 即可。由于`Bundler.require`（警告：前方剧透）与 相同`Bundler.require(:default)`，因此虚拟应用程序仅使用`Bundler.require`. 这意味着您的 Gemfile 中属于组的任何内容都将被忽略。

所以我遇到的问题是我从 Rails 应用程序 Gemfile 复制并粘贴到 Rails 虚拟应用程序 Gemfile 中，包括`group :assets do...`. 我删除了`group`线路，一切正常！

在 11/29 当天晚些时候添加：

澄清一下，我看到的错误是因为没有包含 sass-rails（因为它在我的 Gemfile 的 :assets 组中），所以我的资产没有被解析为 Sass，而是被解析为 CSS。由于`@import`对 CSS 的含义与对 Sass 的不同，因此解析 CSS 文件的任何内容都使用了不同的实现，`@import`并且无法找到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:24:22.043

嘿伙计们，我解决了这个问题，我花了大约 5 个小时才找到解决方法（对不起，我的英语，不是我的母语）。

在 Rails 中正常安装 Foundation 对我的引擎不起作用，所以我手动安装：

我在 application.html.erb 中添加了这一行： `<meta name="viewport" content="width=device-width, initial-scale=1.0>`

将此行添加到 your_engine/app/assets/javascripts/your_engine_name/application.js： `//= require foundation`

这就是我解决它的方法：

将此行添加到 your_engine/app/assets/stylesheets/your_engine_name/application.css （注意：我没有重命名为 application.scss）： `*= require your_engine_name/foundation_and_overrides`

并且：

对于开发，在 Gemfile 中注释的行中说：“在此处声明任何仍在开发中的依赖项，而不是在 # 你的 gemspec 中。这些可能包括边缘 Rails 或来自你的路径或 #Git 的 gem。记住将这些依赖项移动到你的gemspec 在将 # 你的 gem 发布到 ruby​​gems.org 之前。” 所以我添加了我需要的宝石（Foundation、sass、compass 等）

就是这样，这就是我让我的引擎与 Foundation 合作的方式，

# javascript - RoR - 使用 Javascript 动态渲染部分

> ID：13630462
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:46.817
> 
> 标签：javascript, ruby-on-rails, partial-views

我目前正在尝试在单击按钮时加载部分内容。所以我要做的是添加一个远程 => true，然后在控制器操作中添加一个 format.js，该操作将转到我执行此操作的 .js.erb 文件：

```
$('#videospan').html('<%= escape_javascript(render :partial => 'newpartial') %>'); 
```

现在，videospan 已经有了不同的部分，现在我要添加这个部分。当涉及到它的 html 部分时，这很好用。现在 newpartial 里面有一些 javascript，不幸的是没有检测到。是因为 html 是在 javascript 之前加载的吗？如何使它对 HTML 可见？我必须在原始 html 文件中定义它吗？

谢谢，

* * *

一种javascript方法：

```
function saveAll()
{
     for(key in storedData){
        storedData[key].push.apply(storedData[key],[$('#'+key).position().top,$('#'+key).position().left]);
    }

    $.getJSON('<%= save_answers2_course_lecture_path(@course, @lecture) %>',{"stored":storedData}, function(resp){
        redirect()
    });
} 
```

* * *

所以现在我试图通过将javascript也添加到js.erb来传递它，所以现在我在js.erb中有这个：

```
$('#videospan').html('<%= escape_javascript(render :partial => 'newpartial') %>');
pop = Popcorn.youtube( "#youtube", lec ,{ width: 400, controls: 0});                           
pop.play(); 
```

所以我想渲染其中有一个#youtube div的部分，然后我想使用爆米花向它添加一个视频。不幸的是，当我添加这 3 行时，甚至渲染都不起作用..

* * *

使用 firebug，当我检查返回的响应时，它看起来像这样：

```
$('#videospan').html(".........");
pop = Popcorn.youtube( "#youtube", http://www.youtube.com/... ,{ width: 400, controls: 0}); 
pop.controls( false );                          
pop.play(); 
```

所以一切都正确发送了，但是怎么没有显示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:54:13.113

万一有人面临某人的问题..这是由于我遇到的错误。据此：[http ://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/)

当 .js.erb 文件中存在错误时，代码会静默失败。要检查错误，只需从 firebug 复制响应，将其发布到命令行并运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:16:28.023

您最好将尽可能多的 Javascript 移动到脚本文件中。一种方法是将功能分解为代码与配置数据：将代码放入 .js 文件中，将数据放入 DOM 或变量中：

```
// Option1 -- Using DOM
// my_function.js
function saveAll() {
  // code code code
  var url = $('#some_dom_element').attr('data-some-attribute-name');

  $.getJSON(url, 'blah blah');
}

# my_template.js.erb
<div id="some_dom_element" data-some-attribute-name="<%= save_answers2_course_lecture_path( @course, @lecture) %>">
</div>

// Option 2 -- Using a variable
// my_function.js
function saveAll() {
  // code code code
  $.getJSON(url, 'blah blah');
}

# my_template.js.erb
var url = '<%= raw(save_answers2_course_lecture_path( @course, @lecture) %>'; 
```

# jquery - 列表不会在窗口调整大小时重新出现

> ID：13630463
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:48.237
> 
> 标签：jquery, slidetoggle

我有一个下拉菜单，我使用 CSS 和 jQuery 做出了响应。如果窗口缩小，移动导航会显示得很好，但如果您展开并关闭菜单，然后将窗口调整得更大，则桌面导航不会重新出现，因为内联显示：slideToggle 添加的无。对于我的生活，我无法弄清楚当窗口大小再次增加时如何让菜单重新出现。

HTML

```
<div class="nav">
        <div class="mobile-nav">Navigation</div>
        <ul class="primary">
            <li><a href="#link">Link</a></li>
            <li><a class="has-drop">Link w/ Children <span></span></a>
                <ul class="drop">
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                </ul>
            </li>
            <li><a class="has-drop" href="#link">Link w/ Children <span></span></a>
                <ul class="drop">
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                    <li><a href="#link">Link</a></li>
                </ul>
            </li>
            <li><a href="#link">Link</a></li>
            <li><a href="#link">Link</a></li>
        </ul>
        <div class="clear"></div>
    </div> 
```

CSS

```
.clear{clear:both}
.nav{display:block;width:100%;background:#222}
.mobile-nav{visibility:hidden;padding:0;height:0;background:#222}
ul.primary{background:#222;list-style:none;height:45px;min-width:350px;position:relative;margin:10px 0 0 0;padding:0;float:right;display:block}
ul.primary li{float:left;display:inline;font-weight:bold;font-size:13px;max-width:100%}
ul.primary li a,ul.drop li a{display:block;padding:10px;color:white;text-decoration:none}
ul.drop li a{padding:5px}
ul.primary li a:hover,ul.drop li a:hover{background:#444}
ul.primary li,ul.drop li{font-family:"Helvetica Neue","Helvetica",Helvetica,Arial,sans-serif}
ul.primary li.active>a{background:#444}
a.has-drop{cursor:pointer}
a.has-drop span{margin:-8px 0 0 5px;width:10px;height:5px;float:right;background:url("drop-caret.png") no-repeat center right}
li.active>a.has-drop span{margin:-8px 0 0 5px;width:10px;height:5px;float:right;background:url("drop-caret-up.png") no-repeat center right}
ul.drop{display:none;z-index:999;position:relative;margin:0;padding:0;min-width:100%;width:auto;list-style:none;background:#242424;border:0}
ul.drop li{float:none;font-weight:normal}
@media only screen and (max-width:767px){
nav{display:block;width:100%;border:0 solid white;padding:10px 0}
.mobile-nav{visibility:visible;height:auto;margin:0 5px;padding:10px 0;font-weight:bold;color:white;cursor:pointer;background:url("mobile-nav.png") no-repeat center right}
ul.primary{float:none;display:none;height:auto;margin:0;padding:0}
ul.primary li{display:block;float:none;border-bottom:1px solid #444}
ul.primary li:last-child{border-bottom:0}
ul.drop li,ul.primary li.active{border-bottom:0}
ul.drop li a{text-indent:15px;font-size:12px;font-style:italic}
a.has-drop span{margin:5px 0 0 5px;width:10px;height:5px;float:right;background:url("drop-caret.png") no-repeat center right}
li.active>a.has-drop span{margin:5px 0 0 5px;width:10px;height:5px;float:right;background:url("drop-caret-up.png") no-repeat center right}}​ 
```

jQuery

```
var $j = jQuery.noConflict();
$j(document).ready(function () {
$j('ul.primary li').click(function () {
var a = this;
if ($j('ul', this).is(':visible')) {
    $j('ul', this).slideUp(function () {
        $j(a).removeClass('active')
    })
} else {
    $j('ul.drop').slideUp();
    $j('ul.primary li').removeClass('active');
    $j('ul', this).slideDown();
    $j(a).addClass('active')
}
});
$j('body').click(function (a) {
if (!$j(a.target).is('a')) {
    $j('ul.drop').slideUp();
    $j('ul.primary li').removeClass('active')
}
});
$j(function () {
$j('.mobile-nav').click(function (e) {
    $j('.primary').slideToggle(150, "swing");
    e.stopPropagation()
});
$j(window).resize(function() {
    $j('ul.drop').slideUp();
    $j('ul.primary li').removeClass('active')
});
})
}); 
```

这是完整的标记和 jQuery：http: [//jsfiddle.net/mhXkM/](http://jsfiddle.net/mhXkM/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T01:21:45.457

您可以使用这个小片段来“取消应用”`style="display:none;"`可能应用于您的列表并且不会在调整大小时删除的内容。这将`display: (nothing here);`在窗口大小调整到超过 768 像素时将其重置。

```
$(function(){
     $(window).resize(function(){
         if($(this).width() >= 768){
             $('#your-element-name').css('display', '');
         }
      })
      .resize(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:09:53.827

我发现的最佳解决方案是向 windowResize 函数添加一个 removeAttr ，如下所示：

```
$j(window).resize(function() {
$j('ul.drop').slideUp();
$j('ul.primary li').removeClass('active')
}); 
```

这将删除 display: none 当窗口大小调整为桌面大小时由移动视图引起的，但如果在移动视图中查看，则允许再次应用它。

# sql - 带有别名的 SQL 中的多个 Case 语句

> ID：13630465
> 
> 赞同：0
> 
> 时间：2012-11-29T16:39:50.890
> 
> 标签：sql, case, aliases

```
SELECT DISTINCT AppID,
                CASE
                  WHEN Category = '< 18 years old' THEN 'yes'
                  ELSE ''
                END AS '<18years old',
                CASE
                  WHEN Category = 'SSN Exists' THEN 'yes'
                  ELSE ''
                END AS 'Applicant has SSN',
                CASE
                  WHEN Category = 'Self Employed' THEN 'yes'
                  ELSE ''
                END AS 'Self employed'
FROM   Table1
WHERE  AppID = 123 
```

***期望的输出*** 我正在尝试生成下面的结果，其中每个 AppID 只有 1 行，其中包含与其相关的所有信息。上面的代码为每个应用程序生成多行。我试图将 case 语句与 1 END 放在一起，但是当我在 END 关键字之前使用 Aliases 时出现错误。谢谢

```
AppID         <18 Year old           Applicant has SSN           Self employed  

123     yes         yes
124                 yes         yes
125                 yes         yes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:45:00.100

您需要 a`group by`而不是 a `distinct`：

```
SELECT AppID,
       max(CASE WHEN Category = '< 18 years old' THEN 'yes'
                ELSE ''
           END) AS '<18years old',
       max(CASE WHEN Category) = 'SSN Exists' THEN 'yes'
                ELSE ''
           END) AS 'Applicant has SSN',
       max(CASE WHEN Category = 'Self Employed' THEN 'yes'
                ELSE ''
           END) AS 'Self employed'
FROM   Table1
WHERE  AppID = 123
group by AppId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:42:53.880

您可以按如下方式嵌套 Case 语句，并在末尾添加别名：

```
CASE WHEN 
    Category = '< 18 years old' 
THEN 'yes'
ELSE
    CASE WHEN
        Category = 'SSN Exists'
    THEN 'yes'
    ELSE
        ...
        ...
    END
END AS Alias 
```

这就是你所追求的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:43:17.197

您的别名不应包含在“”中。

检查您的数据库引擎必须使用哪种类型的字符来包含别名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:44:54.047

如果我正确理解您的问题，您需要执行以下操作`GROUP BY`：

```
SELECT  AppID,
        MAX(CASE
          WHEN Category = '< 18 years old' THEN 'yes'
          ELSE ''
        END) AS '<18years old',
        MAX(CASE
          WHEN Category = 'SSN Exists' THEN 'yes'
          ELSE ''
        END) AS 'Applicant has SSN',
        MAX(CASE
          WHEN Category = 'Self Employed' THEN 'yes'
          ELSE ''
        END) AS 'Self employed'
FROM   Table1
WHERE  AppID = 123 
GROUP BY AppID 
```

# java - Java DAO 实现测试

> ID：13630470
> 
> 赞同：5
> 
> 时间：2012-11-29T16:39:56.007
> 
> 标签：java, junit, dao, hsqldb, mockito

这是我想分享的一个非常简单的 DAO 尝试。

我的问题是这是否是测试 DAO 的正确方法。我的意思是我正在验证 SQL 查询并给它返回一个模拟。然后告诉模拟返回这些特定的值并断言它们？

我已经更新了 DAO 以使用**准备好的语句**而不是简单的语句。谢谢。

```
public class PanelDao implements IO {

    private final static Logger LOGGER = Logger.getLogger(PanelDao.class);

    private Connection connection;

    public PanelDao() throws SQLException {
        this(MonetConnector.getConnection()); 
    }

    public PanelDao(Connection connection) throws SQLException {
        this.connection = connection;
    }

    @Override
    public void save(Panel panel) throws SQLException {
        final String query = "INSERT INTO panels VALUES ( ?, ?, ?, ?, ?, ?, ? )";
        final PreparedStatement statement = connection.prepareStatement(query);
        statement.setString(1, panel.getId());
        statement.setString(2, panel.getColor());
        statement.setDate(3, (new Date(panel.getPurchased().getTime())) );
        statement.setDouble(4, panel.getCost());
        statement.setDouble(5, panel.getSellingPrice());
        statement.setBoolean(6, panel.isOnSale());
        statement.setInt(7, panel.getUserId());

        LOGGER.info("Executing: "+query);
        statement.executeUpdate();
    }

    @Override
    public void update(Panel object) {
        throw new UnsupportedOperationException();      
    }

    @Override
    public void delete(Panel object) {
        throw new UnsupportedOperationException();      
    }

    @Override
    public Panel find(String id) throws SQLException {
        final String query = "SELECT * FROM panels WHERE id = ? ";
        final PreparedStatement statement = connection.prepareStatement(query);
        statement.setString(1, id);

        LOGGER.info("Executing: "+query);
        final ResultSet result = statement.executeQuery();

        final Panel panel = new Panel();
        if (result.next()) {
            panel.setId(result.getString("id"));
            panel.setColor(result.getString("color"));
        }
        return panel;       
    }
} 
```

和测试班

```
public class PanelDaoTest {

    @InjectMocks
    private PanelDao panelDao;

    @Mock 
    private Connection connection;

    @Mock
    private Statement statement;

    @Mock
    private ResultSet result;

    private Panel panel;

    @BeforeClass
    public static void beforeClass() {
        BasicConfigurator.configure();
    }

    @Before
     public void init() throws SQLException {
        MockitoAnnotations.initMocks(this);
        Mockito.when(connection.createStatement()).thenReturn(statement);
        panel = new Panel("AZ489", "Yellow", new Date(), 10.00, 7.50, true, 1);
    }

   @Test
   public void testSave() throws SQLException {
        Mockito.when(connection.prepareStatement("INSERT INTO panels VALUES ( ?, ?, ?, ?, ?, ?, ? )")).thenReturn(statement);
        panelDao.save(panel);
        Mockito.verify(statement).executeUpdate();
    }

    @Test
    public void testFind() throws SQLException {
        Mockito.when(connection.prepareStatement("SELECT * FROM panels WHERE id = ? ")).thenReturn(statement);
        Mockito.when(statement.executeQuery()).thenReturn(result);
        Mockito.when(result.next()).thenReturn(true);
        Mockito.when(result.getString("id")).thenReturn("AZ489");
        Mockito.when(result.getString("color")).thenReturn("Yellow");
        Panel panel = panelDao.find("AZ489");
        assertEquals("AZ489",panel.getId());
        assertEquals("Yellow",panel.getColor());
        Mockito.verify(statement).executeQuery();
     }
} 
```

* * *

## 2.0 用 HSQLDB 测试 DAO

**考虑到您的反馈后，**我决定使用 HSQLDB 进行真正的数据库测试。如果解决类似问题，请将此作为资源。

```
public class PanelDao implements IO {

    private final static Logger LOGGER = Logger.getLogger(PanelDao.class);

    private Connection connection;

    /**
     * Default constructor is using Monet connector
     */
    public PanelDao() throws SQLException {
        this(MonetConnector.getConnection()); 
    }

    public PanelDao(Connection connection) throws SQLException {
        this.connection = connection;
    }

    @Override
    public void save(Panel panel) throws SQLException {
        final String query = "INSERT INTO panels VALUES ( ?, ?, ?, ?, ?, ?, ? )";
        final PreparedStatement statement = connection.prepareStatement(query);
        statement.setString(1, panel.getId());
        statement.setString(2, panel.getColor());
        statement.setDate(3, (new Date(panel.getPurchased().getTime())) );
        statement.setDouble(4, panel.getCost());
        statement.setDouble(5, panel.getSellingPrice());
        statement.setBoolean(6, panel.isOnSale());
        statement.setInt(7, panel.getUserId());

        LOGGER.info("Executing: "+query);
        statement.executeUpdate();
    }

    @Override
    public void update(Panel object) {
        throw new UnsupportedOperationException();      
    }

    @Override
    public void delete(Panel object) {
        throw new UnsupportedOperationException();      
    }

    @Override
    public Panel find(String id) throws SQLException {
        final String query = "SELECT * FROM panels WHERE id = ? ";
        final PreparedStatement statement = connection.prepareStatement(query);
        statement.setString(1, id);

        LOGGER.info("Executing: "+query);
        final ResultSet result = statement.executeQuery();

        if (result.next()) {
            final Panel panel = new Panel();
            panel.setId(result.getString("id"));
            panel.setColor(result.getString("color"));
            panel.setPurchased(new Date(result.getDate("purchased").getTime()));
            panel.setCost(result.getDouble("cost"));
            panel.setSellingPrice(result.getDouble("selling_price"));
            panel.setOnSale(result.getBoolean("on_sale"));
            panel.setUserId(result.getInt("user_id"));
            return panel;
        }
        return null;        
    }
} 
```

和测试类：

```
public class PanelDaoTest {

    private PanelDao panelDao;
    private Panel panel;

    /* HSQLDB */
    private static Server server;
    private static Statement statement;
    private static Connection connection;

    @BeforeClass
    public static void beforeClass() throws SQLException {
        BasicConfigurator.configure();
        server = new Server();
        server.setAddress("127.0.0.1");
        server.setDatabaseName(0, "bbtest");
        server.setDatabasePath(0, ".");
        server.setPort(9000);
        server.start();
        PanelDaoTest.connection = DriverManager.getConnection("jdbc:hsqldb:hsql://127.0.0.1:9000/bbtest", "SA", "");
        PanelDaoTest.statement = PanelDaoTest.connection.createStatement();
    }

    @Before
    public void createDatabase() throws SQLException {
        PanelDaoTest.statement.execute(SqlQueries.CREATE_PANEL_TABLE);
        panelDao = new PanelDao(PanelDaoTest.connection);
    }

    @Test
    public void testSave() throws SQLException {
        panel = new Panel();
        panel.setId("A1");
        panel.setPurchased(new Date());
        panelDao.save(panel);
        assertNotNull(panelDao.find("A1"));
    }

    @Test
    public void testFind() throws SQLException {
        final String id = "45ZZE6";
        panel = Panel.getPanel(id);

        Panel received = panelDao.find(id);
        assertNull(received);

        panelDao.save(panel);
        received = panelDao.find(id);
        assertNotNull(received);
        assertEquals(panel.getId(), received.getId());
        assertEquals(panel.getColor(), received.getColor());
        assertEquals(panel.getPurchased().getDate(), received.getPurchased().getDate());
        assertEquals(panel.getPurchased().getMonth(), received.getPurchased().getMonth());
        assertEquals(panel.getPurchased().getYear(), received.getPurchased().getYear());
        assertEquals(panel.getCost(), received.getCost(),0.001);
        assertEquals(panel.getSellingPrice(), received.getSellingPrice(),0.001);
        assertEquals(panel.getUserId(), received.getUserId());
    }

    @After
    public void tearDown() throws SQLException {
        statement.executeUpdate(SqlQueries.DROP_PANEL_TABLE);
    }

    @AfterClass
    public static void stopServer() {
        server.shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:53:31.117

首先，您不应该通过连接创建 SQL 查询，因为它容易受到 SQL 注入的攻击。请改用`PreparedStatement`s。

实际上，以这种方式测试 DAO 并没有多大意义。您的测试仅验证您的 DAO 是否正确地来回传递值，但它并未涵盖 DAO 发出的 SQL 查询正确性的真正复杂性。

换句话说，如果你想测试你的 DAO，你需要创建涉及真实数据库的集成测试。通过这种方式，您可以验证您的 DAO 发出的 SQL 查询是否正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T16:50:00.883

我真的不认为这种测试方法真的能给你带来任何好处，而且测试代码非常脆弱。我会使用类似[DBUnit](http://www.dbunit.org/ "数据库单元")的东西来“模拟”你的数据库。这实际上将允许您测试查询的正确性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T21:17:15.857

我会使用诸如 H2 之类的内存数据库来测试您的 SQL 是否确实有效。

*   当你测试你的`save`方法时，你的测试应该调用`save`，然后从数据库中选择行并断言那里确实有东西。
*   当您测试您的`find`方法时，您的测试应该直接在数据库中插入一些行，然后调用`find`并断言实际找到了所需的行。

# iphone - 带有 UIScrollView 的 UITabBarController。标签切换时滚动偏移量变化

> ID：13630473
> 
> 赞同：2
> 
> 时间：2012-11-29T16:40:21.390
> 
> 标签：iphone, cocoa-touch, uiscrollview, uitabbarcontroller

我已经成功创建了一个带有两个 ScrollView 选项卡的 TabBar。但是，如果我在一个选项卡中滚动到底部，然后切换选项卡，然后再切换回来，我的内容似乎已经向上消失了。如果我尝试滚动到顶部，我会卡在内容的中间，但滚动视图认为我在顶部。

到目前为止我所知道的：

contentView.frame.origin.y -（contentView 是我在 ScrollView 中的视图）。如果我在第一次滚动时打印此变量，我在每次打印输出中都会得到 0。我滚动到底部，切换选项卡，切换回：现在每个打印输出的打印值为 -453。

我不知道下一步该做什么。请帮我。

# java - 无法从 AD 获取 TGT

> ID：13630477
> 
> 赞同：2
> 
> 时间：2012-11-29T16:40:37.863
> 
> 标签：java, security, active-directory, kerberos

我正在尝试使用 JAVA 从 Active Directory 获取 TGT 进行身份验证。

这是我的代码：

```
try
{
    URL localURL = super.getClass().getResource("jaas_ntlm_configuration.txt");
    System.setProperty("java.security.auth.login.config", localURL.toString());

    LoginContext localLoginContext = new LoginContext("GetLoginNameKerberos", new SampleCallbackHandler());

    localLoginContext.login();

    Subject localSubject = localLoginContext.getSubject();

    .....
}
catch (LoginException localLoginException) {
    localLoginException.printStackTrace();
} 
```

此代码适用于一台服务器，但是，在另一台服务器上，它在“localLoginContext.login();”上失败 使用此输出：

```
>>>KinitOptions cache name is C:\Users\x\krb5cc_x
LSA: Found Ticket
LSA: Made NewWeakGlobalRef
LSA: Found PrincipalName
LSA: Made NewWeakGlobalRef
LSA: Found DerValue
LSA: Made NewWeakGlobalRef
LSA: Found EncryptionKey
LSA: Made NewWeakGlobalRef
LSA: Found TicketFlags
LSA: Made NewWeakGlobalRef
LSA: Found KerberosTime
LSA: Made NewWeakGlobalRef
LSA: Found String
LSA: Made NewWeakGlobalRef
LSA: Found DerValue constructor
LSA: Found Ticket constructor
LSA: Found PrincipalName constructor
LSA: Found EncryptionKey constructor
LSA: Found TicketFlags constructor
LSA: Found KerberosTime constructor
LSA: Finished OnLoad processing
>> Acquire default native Credentials
LSA: Found KrbCreds constructor
LSA: Got handle to Kerberos package
LSA: Response size is 1556
LSA: Principal domain is SUB.DOMAIN.COM
LSA: Name type is 1
LSA: Name count is 1
LSA: Principal domain is SUB.DOMAIN.COM
LSA: Name type is 2
LSA: Name count is 2
LSA: Session key all zero. Stop.
>>> Found no TGT's in LSA
javax.security.auth.login.LoginException: Unable to obtain Princpal Name for authentication
    at com.sun.security.auth.module.Krb5LoginModule.promptForName(Unknown Source)
    at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Unknown Source)
    at com.sun.security.auth.module.Krb5LoginModule.login(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.security.auth.login.LoginContext.invoke(Unknown Source)
    at javax.security.auth.login.LoginContext.access$000(Unknown Source)
    at javax.security.auth.login.LoginContext$4.run(Unknown Source)
    at javax.security.auth.login.LoginContext$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokePriv(Unknown Source)
    at javax.security.auth.login.LoginContext.login(Unknown Source)
    at my.test.MyTest.main(MyTest.java:123) 
```

你能帮我理解是什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T18:28:37.147

如果您不希望输入用户名（您希望单点登录），那么您的问题是一个已知问题：LSA API 不会交出 TGT 的会话密钥，因为这被认为是一个安全漏洞。错误消息清楚地表明这正是发生的事情。

有一个 Windows 注册表项 ，`AllowTGTSessionKey`您可以将其设置为 true 以禁用此限制，但此设置是针对每个工作站而不是针对每个服务器的，因此不清楚这是否是它在一个地方工作而不是在一个地方工作的原因在另一。如果我没记错的话，另一个原因可能是使用的 Windows 版本，因为这是在 XP Service Pack 2 中引入的。

在 Java 中实现单点登录的正确方法是将 TGT 的处理委托给 Windows SSPI，这是一个类似于 GSS-API 的更高级别的 API。有一个很好的图书馆可以为你做这件事，我个人可以推荐：WAFFLE。

# java - 如何在 cookie 中设置值并在 android 的 url 中发送该 cookie

> ID：13630478
> 
> 赞同：0
> 
> 时间：2012-11-29T16:40:39.283
> 
> 标签：java, android

# 曲奇饼

我是 android 和 cookie 概念的新手，请帮助我如何在 cookie 中插入一些有价值的设备编号、设备版本和手机型号名称，然后将 tat cookie 发送到 url。我看到了很多例子，但我不知道确切的部分.. 我仍然处于困惑中。请大家解决我的问题。电话型号，设备名称，操作系统版本到 cookie，将 cookie 发送到 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:46:30.390

可能您真正需要的是使 cookie 对服务器可见，因此它看起来就像来自浏览器的正常 HTTP 请求。那正确吗？然后你不需要在 URL 中插入 cookie。

Cookie 是与请求标头一起发送的特殊内容。它通常不会暴露给用户。

因此，您可能需要一些可以为您处理 HTTP 协议的 Java 库。只需谷歌一些，Java EE 和 Android 都有很多。它们将大大简化您处理 HTTP 请求的方式。

此外，我对 Android 开发并不是很熟悉，但我认为框架本身应该能够毫无问题地管理 HTTP 请求。也许一些文档查找会有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:45:09.253

Cookie 不是在 url 中发送，而是在 HTTP 标头中发送。

你在用什么图书馆？它应该有一个在请求中发送 cookie 的方法。

# php - 文件上传警告帖子内容长度字节超出限制

> ID：13630485
> 
> 赞同：0
> 
> 时间：2012-11-29T16:41:16.757
> 
> 标签：php, javascript, file-upload, localhost

我正在制作一个文件上传系统。用户使用动态下拉列表选择上传位置。这就是我现在面临的问题。这是我的表格。

```
<form action="uploader.php" method="POST" enctype="multipart/form-data" name="uploads">

            <label for="file">Choose a file: </label> 

                <input type="file" name="userfile" id="userfile"><br/><br/>

                    <select id="text-one" name="one"> 

                        <option selected value="base">Select Department</option>
                        <option value="CSE" name="cse">Computer Science Engineering</option>
                        <option value="ECE" name="ece">Electronics & Communication Engineering</option>
                        <option value="MECH" name="mech">Mechanical Engineering</option>

                    </select>

                    <br /><br/>

                    <select id="text-two" name="two">
                        <option>Select Semester</option>
                    </select>

                    <br /><br/>

                    <select id="text-three" name="three">
                        <option>Select Subject</option>
                    </select>

                    <br/><br/>

            <button class ="btn btn-primary" button type="submit" name="upload" value="Upload" onClick="val()">Upload</button>

        </form> 
```

这是我链接到的另一个 php 文件。

```
<?php
if(isset($_POST['upload']))
{ 
  $path1=$_POST['one']."/"; 
  $path2=$_POST['two']."/"; 
  $path3=$_POST['three']."/";   
  $upload_path=$path1.$path2.$path3;
 }
else
 {
  echo "Select a Subject";
  echo "<br>";
}
$allowed_filetypes = array('.doc','.docx','.jpg','.jpeg','.png','.ppt','.pptx','.xls','.xlsx','.pdf','.txt','.zip','.rar'); 
$max_filesize = 20000000; 
$filename = $_FILES['userfile']['name']; 
$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1);
if(!in_array($ext,$allowed_filetypes))
  die("<SCRIPT LANGUAGE='JavaScript'>
        window.alert('You cannot upload the following type of file!')
        window.location.href='upload.php';
     </SCRIPT>");
if(filesize($_FILES['userfile']['size']) > $max_filesize)
  die("<SCRIPT LANGUAGE='JavaScript'>
        window.alert('The file you attempted to upload is too large!')
        window.location.href='upload.php';
     </SCRIPT>");
if(!is_writable($upload_path))
  die("<SCRIPT LANGUAGE='JavaScript'>
        window.alert('You cannot upload to the specified directory!')
        window.location.href='upload.php';
     </SCRIPT>");
if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $filename))
  echo ("<SCRIPT LANGUAGE='JavaScript'>
          window.alert('Your file has been uploaded successfully')
          window.location.href='upload.php';
        </SCRIPT>");
else
  echo ("<SCRIPT LANGUAGE='JavaScript'>
          window.alert('There was an error during the file upload!')
          window.location.href='upload.php';
        </SCRIPT>");
?> 
```

我已经使用以下设置编辑了 phpini 文件，并且还在 php 文件夹中创建了一个 .htaccess 文件。

upload_max_filesize 25M post_max_size 25M memory_limit 64M

但是当我故意上传一个大于 25 MB 的文件时，我得到了标题中给出的错误。此外，考虑到违反了最大文件大小，它不会给出与文件大小相关的错误，即您尝试上传的文件太大，它说您无法上传以下类型的文件。在后台发布长度警告的事情来了。

请帮我解决一下这个。我在我的本地主机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:46:30.830

post_max_size 表示所有文件大小的总和 + 其他帖子字段。
post_max_size 应始终大于 upload_max_filesize

尝试将 post_max_size 设置为 26M

补充：首先检查是否设置了 $_FILES['userfile'] 即：

```
if(!isset($_FILES['userfile'])) 
  die("<SCRIPT LANGUAGE='JavaScript'> 
       window.alert('No file upload !');
       window.location.href='upload.php'; 
      </SCRIPT>"); 
```

# c# - IQueryable.Count() 或 IEnumerable.Count() 与 Single() 抛出异常？

> ID：13630491
> 
> 赞同：0
> 
> 时间：2012-11-29T16:41:28.597
> 
> 标签：c#, .net, exception, linq-to-entities, enumeration

我们有一个查询单个记录的存储库（实体框架） - 对于任何给定的查询，应该只存在一条记录。最初，我们的查询是`SingleOrDefault()`.

显然，查询中的多个结果会抛出异常；并且没有一个被`try/catch`. 我没有将这些查询包装在一个`try/catch`块中，而是提出了一种扩展方法，如下所示：

```
 public static bool IsEmpty<T>(this IQueryable<T> Query, out int Count) {
     Count = Query.Count();
     return Count == 0;
  } 
```

与简单地确定我是否有空查询返回或单个结果返回相比，这在更多方面具有优势。

另一种方法是将我的查询包装在 try/catch 中。我的问题是是否首选扩展方法或捕获异常的费用。为了不主观，我特别指的是捕获和抛出异常的成本与`Count()`方法的成本。

虽然预计数据库只返回一条记录，但我的方法是数据库将包含意外记录。我不认为这是一个异常事件，因此我认为不需要抛出异常。

扩展方法的典型实现如下：

```
 var query = Repository.All().Where(*/ some criteria */);

     int count;
     if (query.IsEmpty(out count)) {
        // handle empty return
     } else if (count > 1) {
        // handle unexpected returns
     }

     return query.Single(); 
```

**编辑**
一个重要的说明：我们希望了解模棱两可的结果以及返回的记录数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:49:46.750

注意不要意外多次执行查询。

```
var query =
    Repository.All()
    .Where(*/ some criteria */)
    .Take(2) //magic here
    .ToList();

if (query.Count == 0) {
    // handle empty return
} else if (query.Count > 1) {
    // handle unexpected returns
}

return query.Single(); 
```

查询`TOP 2`行以处理所有情况。

# c# - 从发布数据返回一个字符串值

> ID：13630493
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:41:35.510
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我正在与一家将数据发布到我的服务器的公司合作，并且我正在以这种方式接收 xml 数据：

```
using (StreamReader reader = new StreamReader(Request.InputStream))
{
    String xmlData = reader.ReadToEnd();
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(xmlData);
} 
```

但现在他们需要我向他们返回一个值。

我是否像他们发给我的那样发回一个值？或者当我想为他们的帖子返回一个值时它是如何工作的？

应该返回的值是一个字符串。

用c#构建的项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:48:03.290

要将任何类型的字符串返回给您的供应商，请尝试以下操作：

```
using (StreamReader reader = new StreamReader(Request.InputStream))
{
    String xmlData = reader.ReadToEnd();
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(xmlData);
    Response.Write("MyString");
} 
```

根据需要在“MyString”中指定任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:51:12.517

您在问题中包含了标签 asp.net-mvc-3，所以我猜您在控制器中。如果你想返回一个简单的字符串，只需使用以下`Content`方法：

```
public ActionResult MyAction() {
    return Content("Your String")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:56:46.410

如果只需要返回一个简单的类型，例如整数、字符串或真/假，那么简单地使用就足够了：

```
Response.Write(returnVal); 
```

或类似的。这不一定是“正确”的方法，如果您需要返回一个复杂的类型，例如一个对象，那么您最好将它序列化并以 json 或 XML 的形式返回。这是一个使用 xml 作为空白 aspx 页面上的输出类型的示例：

我们

```
using System;

namespace myProject
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var o=new customObject
                {
                    prop1 = "Value1", 
                    prop2 = "Value2", 
                    prop3 = "Value3"
                };
            var x = new System.Xml.Serialization.XmlSerializer(o.GetType());
            Response.ContentType = "text/xml";
            x.Serialize(Response.Output, o);
        }
    }

    public class customObject
    {
        public string prop1;
        public string prop2;
        public string prop3;
    }
} 
```

希望一切都说得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:59:20.063

> 我是否像他们发给我的那样发回一个值？

不，您必须发送回复。

```
Or how does it work when i want to return a value for their post? 
```

您所要做的就是从您的操作中返回正确的操作结果。例如。您可以使用`ContentResult`返回一个简单的字符串并`JsonResult`返回 json 等。

# c++ - C++ stl 映射：BSTR 的问题

> ID：13630494
> 
> 赞同：3
> 
> 时间：2012-11-29T16:41:41.683
> 
> 标签：c++, winapi, stl, bstr

我在代码`<BSTR,struct>`bstr 中使用映射作为键并构造值。

这会起作用还是我必须重新定义一些东西？

我没有看到编译问题，我也可以添加元素。但是，`map.find()`不起作用。即使元素存在，它也总是返回`map.end()`（未找到元素）。

我做了一个临时的解决方法如下 - 通过从`map.begin()`to循环`map.end()`并为每个元素执行 lstrcmpW 。这似乎有效，但不要认为这太有效了。

关于可能出错的任何建议/提示？可以`BSTR`用作地图的键吗？我知道地图不支持某些非本机数据类型 - 结构或类......你需要为此定义一个`<`运算符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:54:16.983

使用 ATL 的[CComBSTR](http://msdn.microsoft.com/en-US/library/d6x8shh5%28v=vs.80%29.aspx)作为密钥类型而不是 BSTR。CComBSTR 重载[operator<](http://msdn.microsoft.com/en-us/library/dyt8f1xs%28v=vs.80%29.aspx)以进行实际的字符串比较，而不是像您当前所做的那样进行指针（地址）比较。

CComBSTR 还简化了生命周期管理。使用 BSTR 作为键类型，您必须确保 BSTR 的寿命超过映射的生命周期（实际上它们必须在映射被破坏之前被释放）。CComBSTR 遵循 RAII 原则，因此您不必进行任何手动释放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T16:46:03.517

C++ 中的 BSTR 类型是一个指针。Map 是比较指针而不是字符串。要在地图中使用，您可能应该为 BSTR 编写包装器或使用预制包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T12:51:13.170

您可以将 std::find_if 与 unary_function 结合使用，而不是从 map.begin() 循环到 map.end() 并为每个元素执行 lstrcmpW，如下所示：

```
class IsBSTREqual : public unary_function<std::pair<BSTR,int>,bool>
{
private:
    BSTR str;
public:
     IsBSTREqual(BSTR _str)
     {
         str = ::SysAllocString(_str);
     }
     ~IsBSTREqual()
     {
           if(str)
           {
               ::SysFreeString(str);
           }
      }

      bool operator()(const std::pair<BSTR,int> &v)
     {
         if(!lstrcmpW(v.first,str))
         {
             return true;
         }
         return false;
      }
};

BSTR abc = ::SysAllocString(L"String I want to find");
IsBSTREqual _pred(abc);
std::map<BSTR,int>::iterator _it = 
std::find_if(attr_map.begin(),attr_map.end(),_pred);

if(_it != attr_map.end() )
    {
        cout<<"\nFound";
    }
    else
    {
        cout<<"\nNot found";
    } 
```

# c++ - 如果不直接使用，模板参数会丢失左值引用

> ID：13630499
> 
> 赞同：7
> 
> 时间：2012-11-29T16:41:51.790
> 
> 标签：c++, templates, reference, c++11

考虑这段代码：

```
#include <iostream>
#include <type_traits>
using namespace std;

template<typename T_orig> void f(T_orig& a){
    a=5;
}

template<typename T_orig, typename T=T_orig&> void g(T a){
    a=8;
}

int main() {
    int b=3;
    f<decltype(b)>(b);
    cout<<b<<endl;
    g<decltype(b)>(b);
    cout<<b<<endl;
    return 0;
} 
```

这打印

```
5
5 
```

有人可以向我解释为什么在第二个版本`&`中丢失了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T16:56:20.570

这里的问题是类型推导优先于默认的函数模板参数。因此，您得到推导出的`T`参数并且`T`永远不会推导出参考。

您可以通过使类型[不可推断](http://stacked-crooked.com/view?id=df15a53aeeb6f0f26c9088a1effe8873)来防止这种情况。一个通用的身份类型特征可以做到这一点。

```
template <typename T>
struct identity { using type = T; };

template <typename T>
using NotDeducible = typename identity<T>::type;

template<typename T_orig, typename T=typename target<T_orig>::T>
void g(NotDeducible<T> a) { // blah 
```

或者，在这种特殊情况下，您可以完全摆脱模板参数。

```
template<typename T_orig> void g(typename target<T_orig>::T a) 
```

# wamp - IE 无法重定向 wamp 服务器 404 错误页面

> ID：13630500
> 
> 赞同：0
> 
> 时间：2012-11-29T16:41:56.520
> 
> 标签：wamp, wampserver

我在我的电脑上安装了一个 wampserver，我想将一个 Http 404 Not Found 错误页面重定向到我的样式页面，但它在 IE 9.0 中无法正常工作

如果我提供不在 wamp 服务器中的文件，它会在 firefox、safari 中显示 wamp 服务器错误页面

![在火狐，野生动物园](../Images/427201d49ed3416bfbf1c6359836a88e.png)

但在 IE 中，同样的事情会这样显示

![但是在 IE](../Images/fc672d039323afb0fecc964eabdbebcb.png)

我怎样才能使所有浏览器都一样。谁能帮我。

我使用 .htaccess 文件和 httpd.config 文件来更改重定向，但它在 IE 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:45:33.317

您需要创建一个 .htaccess 文件并创建您的自定义重定向。看到这个

[http://www.htaccessbasics.com/404-custom-error-page/](http://www.htaccessbasics.com/404-custom-error-page/)

# c++ - 关于 WM_MOUSEMOVE，我错过了什么？

> ID：13630503
> 
> 赞同：-1
> 
> 时间：2012-11-29T16:42:14.353
> 
> 标签：c++, windows, winapi, mouse

我要做的很简单，如果移动不移动或单击，我想在 1 秒后隐藏鼠标光标。

我搜索并看到有人推荐使用 WM_MOUSEMOVE。然而，在我的应用程序中，WM_MOUSEMOVE 只是检测鼠标是否在客户区。如果是，则应用程序会不断收到 WM_MOUSEMOVE。我已经阅读了 MSDN 页面，但我仍然感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:37:49.860

使用 WM_SETCURSOR。

将 WM_SETCURSOR 用于与游标相关的工作。此消息是为此目的而发出的。您提到客户区表明您可能还需要使用`SetCapture`API。

另一种方式（或更现代的做法）是使用`TrackMouseEvent`. 它提供[WM_MOUSEHOVER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645613%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:49:03.073

建议是正确的。您需要做的是定义一个计时器（例如，触发 WM_TIMER 消息的计时器）。您在第一次鼠标移动 (WM_MOUSEMOVE) 中激活它。如果在您为计时器定义的时间间隔内没有发生鼠标移动，则将触发 WM_TIMER 事件，然后您可以隐藏鼠标。

每次 WM_MOUSEMOVE 事件触发时，您只需重新启动计时器（使用其专用 API）。这样 WM_MOUSEMONVE 事件可以防止计时器到期。如果 WM_MOUSEMOVE 停止到达（因为您不再移动鼠标），计时器将在没有中断的情况下滴答作响，直到它结束并触发。

# video - IO 文件读/写 Verilog

> ID：13630506
> 
> 赞同：2
> 
> 时间：2012-11-29T16:42:24.683
> 
> 标签：video, io, verilog, xilinx

我想将 MPEG 视频文件作为帧流读取。我在用

```
$readmemh("centaur_1.mpg",mem); 
```

但它似乎无法正常工作，因为它旨在从与十六进制字符范围相对应的文本文件中读取 ASCII 代码。关于我该怎么做的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:00:15.663

查看`$fread()`系统任务。这将允许您以二进制模式打开文件。查看下面的链接以获取示例：

*   [http://larc.ee.nthu.edu.tw/~lmdenq/doc/fileio.htm#File_Input_Functions](http://larc.ee.nthu.edu.tw/~lmdenq/doc/fileio.htm#File_Input_Functions)

# c# - 更新方法上的 OleDbException 错误

> ID：13630508
> 
> 赞同：0
> 
> 时间：2012-11-29T16:42:27.707
> 
> 标签：c#, oledb

为什么我有这个错误？错误信息是：`Syntax error in INSERT INTO statement.`

我想在我的数据库中添加一条记录，但它不起作用。问题出在哪里？

代码是：

```
using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            OleDbDataAdapter DbDataAdabter = new OleDbDataAdapter();
            DbDataAdabter.SelectCommand = new OleDbCommand("SELECT * FROM [Phone-Book]", connection);

            OleDbCommandBuilder cb = new OleDbCommandBuilder(DbDataAdabter);
            connection.Open();
            DataRow dataRow = myDataset.Tables["salam"].NewRow();

            dataRow[1] = textBox2.Text;
            dataRow[2] = textBox3.Text;
            dataRow[3] = textBox4.Text;
            dataRow[4] = textBox5.Text;

            dataRow.EndEdit();
            myDataset.Tables["salam"].Rows.Add(dataRow);

            DbDataAdabter.Update(myDataset , "salam");

            connection.Close();
            connection.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:32:02.083

使用 DbDataAdabter.Update() 时，您必须非常小心表的数据类型，即如果它是 DB 中的 int，则将其转换然后插入，如下所示：

```
dataRow[1]=(int) dataRow[1]+10; 
```

还要检查是否提供了所有值，在这里我没有看到任何地方提供的 dataRow[0]，或者它是一个自动 ID 字段。

# android - ListAdapter --> 如何仅将转换视图更改应用于特定视图项？

> ID：13630513
> 
> 赞同：0
> 
> 时间：2012-11-29T16:42:38.287
> 
> 标签：android, android-layout

我试图通过在 list_item 中隐藏一个未隐藏的线性布局来让列表视图的下部向下滑动。问题是视图似乎在 LayoutAdapter 中被重用，因此更改不仅仅影响我打算应用它的视图。相反，它显示在视图被重用的任何地方。如何将下拉菜单限制为我请求下拉菜单的视图？通过下拉我的意思是取消隐藏线性布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:02:03.887

列表中总会有用户可以看到的尽可能多的视图。当用户滚动时，超出视图的视图将被重用以显示用户滚动到的新列表数据。您需要在重绘列表项时重置它们的状态。

将布尔变量“扩展”添加到存储列表数据的对象。（您添加到 ArrayAdapter 的对象）。当用户展开listItem中的LinearLayout时，设置expanded = true。

```
public class MyListItem
{
  public boolean expanded = false;

  // data you are trying to display to the user goes here
  // ...
} 
```

然后在列表适配器的 getView 方法中执行此操作

```
public class MyListAdapter extends ArrayAdapter<MyListItem>
{
    public MyListAdapter (Context context, ArrayList<AudioPlaylist> objects)
    {
        super(context, R.layout.list_item, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        LinearLayout rowLayout;
        MyListItem item = this.getItem(position);

        if (convertView == null)
        {
            rowLayout = (LinearLayout) LayoutInflater.from(this.getContext()).inflate(R.layout.list_item, parent, false);
        }
        else
        {
            rowLayout = (LinearLayout) convertView;
        }

        //set the textviews, etc that you need to display the data with
        //...

        LinearLayout expanded = rowLayout.findViewById(R.id.expanded_area_id);

        if (item.expanded)
        {
           //show the expanded area
           expanded.setVisibility(View.VISIBLE);
        }
        else
        {
           //hide the area
           expanded.setVisibility(View.GONE);
        }           

        return rowLayout;
    }
} 
```

确保你的 list_item.xml 有一个 LinearLayout 包裹整个东西，否则你会得到一个演员异常。

希望有帮助...

# javascript - SQL 事务和 JavaScript Promise 有什么关系？

> ID：13630515
> 
> 赞同：1
> 
> 时间：2012-11-29T16:42:46.087
> 
> 标签：javascript, sql, asynchronous, transactions, promise

我最近了解了[Promises](http://wiki.commonjs.org/wiki/Promises/A)，它看起来类似于 SQL Transactions。

*   交易全有或全无

*   Promise 是顺序回调

    它们是处理异步事件的同一概念的不同实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:44:32.870

Promise 是处理异步的一般概念。事务是更新多条记录时保证原子性的一种手段。

它们可能一起出现在某个库中，但它们不相关。如果您有一个具有异步 API 的事务性数据库，您可以一起看到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T22:19:28.163

**意图：**

Promise 提供了一个用于同步异步回调的高级接口

事务提供了执行依赖 SQL 语句的高级接口

**用例**

当应用程序需要一个未来值时，它会按需构造 Promise 并等待它返回。

当数据库需要执行一系列数据操作时，就会构造一个事务

**错误处理**

如果 Promise 引发异常，则返回异常并暂停未来

如果事务引发异常，则会对挂起的事务执行回滚

**突变**

如果没有异常，则在未来对象中返回计算值。

如果没有异常，则提交事务的最终结果集

**副作用**

在事务块中，您可以将查询写入多个数据库，但您必须先将事务提交或回滚到一个数据库，然后才能将查询写入另一个数据库。

将来，您可以为一个或多个全局或非局部变量赋值；没有提交或回滚

**污染**

在并发 SQL 事务的执行期间可能会发生读取。可能的读取操作包括：

*   脏读，第二个 SQL 事务在第一个 SQL 事务执行 COMMIT 之前读取一行
*   不可重复读取，其中一个 SQL 事务读取一行，然后第二个 SQL 事务修改或删除该行并执行 COMMIT；
*   phantom，其中一个 SQL 事务读取满足搜索条件的行，然后第二个 SQL 事务生成至少一个满足第一个事务的搜索条件的行，然后第一个事务重复搜索，从而产生不同的结果集。

在未来执行期间可能会发生分配或序列化，而不会发出警告

**状态管理**

设置保存点可以让您回滚事务的一部分。例如，如果您的事务包括插入、更新和删除，并且您在更新后设置了保存点，则可以回滚事务以排除删除。

未来没有保存点

**参考**

> [cftransaction](https://wikidocs.adobe.com/wiki/display/coldfusionen/cftransaction)
> [了解可用的事务隔离级别](http://msdn.microsoft.com/en-us/library/cc546518.aspx)
> [JavaScript 中的异步编程与 Promises](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)
> [事务复制的工作原理](http://technet.microsoft.com/en-us/library/aa179423)
> [事务进程同步](http://technet.microsoft.com/en-us/library/cc977035.aspx)
> [乐观算法](http://courses.cs.vt.edu/~cs5204/fall99/distributedDBMS/wen/notes.html)
> [并发控制算法](http://www.telerik.com/help/openaccess-classic/concurrency-control-algorithms.html)
> [配置可序列化隔离](http://download.oracle.com/berkeley-db/docs/je/1.7.1/GettingStartedGuide/serializable.html)
> [使用新的注册表变量提高并发性](http://www.ibm.com/developerworks/data/library/techarticle/dm-0509schuetz/)
> [操作系统讲义：分配和死锁](http://bluehawk.monmouth.edu/~rclayton/web-pages/s12-os/resourcemgt.html)
> [SQLite 文件 I/O 规范](http://www.sqlite.org/fileio.html)
> [破碎的承诺–C++0x futures](http://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/)
> [concurrent.futures — 启动并行任务](https://docs.python.org/dev/library/concurrent.futures.html)
> [Javascript 很棒：我不想要承诺](http://javascriptisawesome.blogspot.com/2012/12/i-dont-want-promises.html)
> [JavaScript 异步架构：事件与承诺](http://www.joezimjs.com/javascript/javascript-asynchronous-architectures-events-vs-promises/)
> [AS3 Promises - 指南和示例](https://cwiki.apache.org/confluence/display/FLEX/AS3+Promises+-+a+guide+and+example)
> [Smalltalk 并发，玩转 Future](http://onsmalltalk.com/smalltalk-concurrency-playing-with-futures)
> [Promise-](https://github.com/spion/promise-streams)
> [Streams System.Threading.TTask.Future](http://docwiki.embarcadero.com/Libraries/Seattle/en/System.Threading.TTask.Future#Description)
> [Promises Part 5: The Lego Problem](http://blog.getify.com/promises-part-5/)
> [Callbacks vs Events](http://dean.edwards.name/weblog/2009/03/callbacks-vs-events/)
> [Events and Callbacks](http://msdn.microsoft.com/en-us/library/ms229041)
> [Events vs Callbacks – when to use what](http://www.ghost23.de/2010/10/events-vs-callbacks-when-to-use-which/)
> [coroutines,callbacks,message-queues - Tcl](http://wiki.tcl.tk/38429)
> [Introduction to ES6 Promises – 你需要避免回调地狱的四个函数](http://jamesknelson.com/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/)
> [所有关于 ES6 生成器](http://blog.getify.com/all-about-es6-generators/)
> [链接 ES6 Promisies 和 PEP3148 期货的差异](https://stackoverflow.com/questions/33767593/chaining-difference-in-es6-promises-and-pep3148-futures)

# php - 作为 web 服务响应的一部分传输 zip 数据/可逆 mb_detect_encoding

> ID：13630522
> 
> 赞同：2
> 
> 时间：2012-11-29T16:43:02.573
> 
> 标签：php, ios, web-services, zip, webservice-client

我有一个 PHP 网络服务，它当前返回一个 zip 存档作为其唯一输出。我正在使用从磁盘读取 zip 存档`file_get_contents`并将其作为响应的正文发送回。

我希望它以 JSON 格式返回一些额外的元数据：

```
{
    "generatedDate": "2012-11-28 12:00:00",
    "status": "unchanged",
    "rawData": <zip file in raw form>
} 
```

与此服务对话的 iOS 应用程序将接收此响应，解析 JSON，然后将 zip 文件存储在本地以供自己使用。

但是，如果我尝试将结果填充`file_get_contents`到 json_encode 中，它会正确地抱怨该字符串不是 UTF-8 格式。如果我使用 UTF-8 对其进行编码`mb_convert_encoding($rawData, 'UTF-8', mb_detect_encoding($rawData, 'UTF-8, ISO-8859-1', true));`，它会愉快地对其进行编码，但我无法找到一种方法来反转客户端上的操作（调用`[dataString dataUsingEncoding:NSUTF8StringEncoding]`然后将结果视为 zip 文件失败，使用`BOM could not extract archive: Couldn't read pkzip local header`.

谁能建议一种在 JSON 响应中将原始数据块作为*一个字段插入的好方法？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:27:52.297

打这个问题。

事实证明，像这样的 UTF-8 编码原始数据充其量是非标准的，标准的解决方案是对其进行 base-64 编码，然后使用 base-64 解码器在客户端对其进行恢复：

```
$this->response(200, array('rawData' => base64_encode($rawData))); 
```

...

```
NSString *rawDataString = [[response responseJSON] objectForKey:@"rawData"];
NSData *rawData = [Base64 decode:rawDataString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:34:58.663

ZIP 档案**不是文本**——它们是**二进制**文件！尝试将存档从 ISO-8859-1 转换为 UTF-8 与尝试旋转它一样有意义。

有几种算法可以将二进制流序列化为文本，但它们都会增加文件大小。如果这不是问题，请查看：

*   [base64_encode()](http://php.net/base64_encode)
*   [bin2hex()](http://php.net/bin2hex)
*   [解包（）](http://php.net/pack)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:13:35.377

当然，如果您成功地将原始数据包含在 JSON 中，那么当您尝试解码 JSON 并且您用于解码的任何东西都无法处理原始数据时，您会在另一端遇到相反的问题？

相反，我建议您*仅*在响应正文中发送原始数据，并使用标头发送元数据。

# r - Rcurl 不适用于重定向

> ID：13630523
> 
> 赞同：1
> 
> 时间：2012-11-29T16:43:05.400
> 
> 标签：r, curl, rcurl

> **可能重复：**
> [cURL ，获取重定向 url 到变量](https://stackoverflow.com/questions/4062819/curl-get-redirect-url-to-a-variable)

我正在尝试在[http://weblogo.berkeley.edu/logo.cgi上使用 Rcurl 和 WebLogo 绘制序列徽标](http://weblogo.berkeley.edu/logo.cgi)

```
url = 'http://weblogo.berkeley.edu/logo.cgi'
result = postForm(url, "sequence"='HQDTQRRTSMGGTQQ', .cgifields = 'sequence', style="post") 
```

我已经尝试过了，但它只返回填写表单的 html（即它没有被提交）。当我查看提交的时间线时，我看到生成的图像是通过重定向生成的。知道如何获得该图像吗？

另外：.cgifields 的意义何在？它在许多例子中，但它的目的是什么？

# liferay - Liferay：隐藏登录用户的登录 Portlet

> ID：13630525
> 
> 赞同：2
> 
> 时间：2012-11-29T16:43:07.503
> 
> 标签：liferay, portlet

我想为已登录的用户隐藏内置的“登录”portlet。

![配置窗口截图](../Images/8d2f4f08ce1ab2ef854d5838c4aa5dcb.png)

如何设置权限以实现此目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:53:15.873

Liferay 使用 RBAC 权限模型，这可能不允许您通过权限来实现这一点。这是因为从授予来宾的权限中贬低系统角色是完全不合逻辑的。

从我的脑海中考虑其他一些选择：

*   创建一个布局模板，它根据当前用户是否不是来宾来显示或隐藏某些 portlet 列（不完全确定这是否会那么容易，因为它取决于布局模板速度环境中确切可用的变量）
*   将登录 portlet 包装在另一个 portlet 中
*   只需挂钩*登录 portlet*的 JSP
*   也许是Javascript？可能是最简单的解决方案，但不是最好的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:49:27.120

实现此目的的另一种方法是创建一个包含 Login portlet 的公共页面，假设该页面称为 Login（该页面及其 portlet 应该可供客人查看）。

接下来，创建另一个页面并将其命名为 Welcome。将一些portlet 放在上面供登录用户查看。该页面最好是私有的，但是如果它是公共的，请确保您更改权限，以便客人无法看到 portlet 等。

现在转到控制面板 > 门户 > 门户设置并修改导航链接（将鼠标悬停在问号图标上以获得解释每个链接作用的信息工具提示）。

这是一个示例，继我上面提到的登录和欢迎页面之后：

![在此处输入图像描述](../Images/0db3e851ee33fc2f22d4e935a5851d55.png)

简单！没有代码修改或自定义主题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:33:40.173

Liferay 将登录类添加到您的`<body>`元素中。如果您可以忍受它在 HTML 中可用，但只是没有显示，请添加

```
.signed-in .portlet_login {
    display:none;
} 
```

或类似于您的主题或 login-portlet 的外观和感觉高级样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T06:11:03.443

您可以根据`$is_signed_in`签入来渲染/不渲染许多东西`Theme VM files`。

`is_signed_in`将`true`用于登录用户和`false`其他用户。

下面的一些例子来自`portal_vm.vm`

```
#if(!$is_signed_in)
            <a href="$sign_in_url" id="sign-in" rel="nofollow">$sign_in_text</a>             
#end

#if($is_signed_in)
#if($permissionChecker.isOmniadmin()== true)
    #dockbar()
#end

#if(!$is_signed_in)
                $theme.include($themeServletContext, "/jsp/someJsp.jsp")
 #end 
```

# php - 使用 Zend Framework 2 扩展 ZfcUser

> ID：13630526
> 
> 赞同：6
> 
> 时间：2012-11-29T16:43:10.800
> 
> 标签：php, model-view-controller, zend-framework2

嗨，我正在尝试使用 Zend Framwork 2 的 ZfcUser 模块编写用户注册表单，并希望在添加更多用户字段时获得有关最佳实践的一些建议。

到目前为止，我已经创建了自己的名为“WbxUser”的模块，并且如[模块 wiki 页面](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-modify-the-form-objects-used-by-ZfcUser)中所述， 我通过在我的模块引导函数中使用事件管理器向 ZfcUser 的注册表单添加了一个名为“userlastname”的自定义字段，如下所示。

**代码：**

```
//WbxUser.Module.php   

namespace WbxUser;

use Zend\Mvc\MvcEvent;

class Module {
    public function onBootstrap(MvcEvent $e){
        $events = $e->getApplication()->getEventManager()->getSharedManager();
        $events->attach('ZfcUser\Form\Register','init', function($e) {
            $form = $e->getTarget();
            $form->add(array(
                    'name' => 'userlastname',
                    'attributes' => array(
                            'type'  => 'text',
                    ),
                    'options' => array(
                            'label' => 'Last Name',
                    ),
            ));
            // Do what you please with the form instance ($form)
        });

        $events->attach('ZfcUser\Form\RegisterFilter','init', function($e) {
            $filter = $e->getTarget();

            $filter->add(array(
                'name'       => 'userlastname',
                'required'   => true,
                'filters'  => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                        'name'    => 'StringLength',
                        'options' => array(
                            'min' => 3,
                            'max' => 255,
                        ),
                    ),
                ),
           ));
        });
    }

    public function getConfig(){
        return array();
    }

    public function getAutoloaderConfig(){
        return array();
    }
} 
```

但是在此之后，我对在哪里/如何编写代码以保存我的新字段正在收集的额外数据有点迷失了。

1.  这是我可以为其他字段启动保存例程的事件吗[？ https://github.com/ZF-Commons/ZfcUser/wiki/How-to-perform-a-custom-action-when-a-new-user -帐户已创建](https://github.com/ZF-Commons/ZfcUser/wiki/How-to-perform-a-custom-action-when-a-new-user-account-is-created)

2.  我是否应该编写自己的 WbxUser 模型来扩展 ZfcUser\Entity\User.php 以添加我的新字段

我有点像 ZF 和 MVC 菜鸟，所以对于写入方向的轻推会非常满意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:50:01.510

这个似乎更直观一点

[http://juriansluiman.nl/en/article/117/use-3rd-party-modules-in-zend-framework-2](http://juriansluiman.nl/en/article/117/use-3rd-party-modules-in-zend-framework-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T14:46:50.753

您可以覆盖模块配置。最优雅的方法是使用 autoload 文件夹中的 zfcuser.global.php.dist。将此文件复制到您的应用程序自动加载文件夹并将文件名更改为 zfcuser.global.php。在这里，您可以更改在这里可以找到的任何选项。此选项可用于覆盖 zfcUser 实体：'user_entity_class' => 'ZfcUser\Entity\User'。

再说一次，您可能会发现自己需要更改配置文件中无法更改的内容。在这种情况下，您可以创建自己的用户模块（您可能只想克隆整个 zfcuser 模块，直到您确定要替换哪些文件。

克隆用户模块（并相应地更改命名空间）后，将您的模块添加到 application.config.php。确保你的模块是在 zfcuser 之后加载的。或者，您可以从配置文件中删除 zfcuser 并将以下内容放入 module.php 中：

```
public function init($moduleManager)
{
    $moduleManager->loadModule('ZfcUser');
} 
```

现在您可以覆盖 ZfcUser 模块配置。以下代码段可用于覆盖模板文件夹和 UserController。

```
<?php

// Note most routes are managed in zfcUser config file.
// All settings here either overrides or extend that functionality.

return array(
    'view_manager' => array(
        'template_path_stack' => array(
            // 'zfcuser' => __DIR__ . '/../view',  Override template path           
        ),
        'template_map' => array(
            // You may want to use templates from the original module without having to copy - paste all of them.  
        ),
    ),

    'controllers' => array(
        'invokables' => array(
            // 'zfcuser' => 'YourModule\Controller\IndexController', // Override ZfcUser controller.
        ),
    ),

    'router' => array(
        'routes' => array(
            'zfcuser' => array(
                'type' => 'Literal',
                'priority' => 2500,
                'options' => array(
                    'route' => '/user',
                    'defaults' => array(

                        // Use original ZfcUser controller. 
                        // It may be a good idea to use original code where possible

                        'controller' => 'ZfcUser\Controller\UserController',
                        'action'     => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(

                    'authenticate' => array(
                        'type' => 'Literal',
                        'options' => array(
                            'route' => '/authenticate',
                            'defaults' => array(

                                // Invoke YourModule\Controller\IndexController

                                'controller' => 'zfcuser',
                                'action'     => 'authenticate',
                            ),
                        ),
                    ),           
                ),
            ),
        ),
    ), 
); 
```

您还可以在 module.php 中覆盖 ZfcUser 服务。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T09:47:07.717

更改第三方模块并没有真正吸引我，因为有时它会扰乱很多功能。我总是尝试在模块之外做一些事情，因为如果模块中有更新，我很容易将其合并到我的应用程序中，而无需重写任何东西。

要执行您尝试执行的操作，我将在我的应用程序中创建另一个表并添加一个扩展 zfcuser 表的外键，这样我就可以将信息与我的应用程序中的每个 zf2user 关联起来。

这只是一个建议，因为我也是 zf2 的新手。

# mpi - 分解矩阵，以便每个进程都使用 MPI 获得矩阵的份额

> ID：13630529
> 
> 赞同：3
> 
> 时间：2012-11-29T16:43:15.980
> 
> 标签：mpi, multidimensional-array

我对使用 MPI 相当陌生。我的问题如下：我有一个包含 2000 行和 3 列的矩阵，存储为二维数组（不是连续数据）。在不改变数组结构的情况下，根据进程np的数量，每个进程应该得到矩阵的一部分。示例：A：2000 个 3 列数组的二维数组，np = 2，然后 P0 获得 A 的前半部分，这将是前 1000 行 3 列的二维数组，P1 获得后半部分，即第二个 1000行 3 列。现在 np 可以是任何数字（只要它除以行数）。有什么简单的方法可以解决这个问题吗？我将不得不使用 FORTRAN 90 来完成这项任务。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:37:27.483

Fortran 中二维数组的逐行分布是棘手的（但并非不可能），因为直接使用分散/收集操作，因为列主要存储。以下是两种可能的解决方案。

纯 Fortran 90 解决方案：使用 Fortran 90，您可以指定数组部分，例如`A(1:4,2:3)`从矩阵中取出一个小的 4x2 块`A`。您可以将数组切片传递给 MPI 例程。注意当前的 MPI 实现（符合现在旧的 MPI-2.2 标准），编译器将创建节数据的临时连续副本并将其传递给 MPI 例程（因为临时存储的生命周期没有明确定义，一个*不应*将数组部分传递给非阻塞 MPI 操作，如`MPI_ISEND`)。MPI-3.0 引入了新的和非常现代的 Fortran 2008 接口，它允许 MPI 例程直接获取数组部分（没有中间数组）并支持将部分传递给非阻塞调用。

使用数组部分，您只需`DO`在根进程中实现一个简单的循环：

```
INTEGER :: i, rows_per_proc

rows_per_proc = 2000/nproc
IF (rank == root) THEN
  DO i = 0, nproc-1
    IF (i /= root) THEN
      start_row = 1 + i*rows_per_proc
      end_row = (i+1)*rows_per_proc
      CALL MPI_SEND(mat(start_row:end_row,:), 3*rows_per_proc, MPI_REAL, &
                    i, 0, MPI_COMM_WORLD, ierr)
    END IF
  END DO
ELSE
  CALL MPI_RECV(submat(1,1), 3*rows_per_proc, MPI_REAL, ...)
END IF 
```

纯 MPI 解决方案（也适用于 FORTRAN 77）：首先，您必须使用`MPI_TYPE_VECTOR`. 块的数量是`3`，块的长度是每个进程应该得到的行数（例如`1000`），步幅应该等于矩阵的总高度（例如`2000`）。如果调用此数据类型`blktype`，则以下内容将发送矩阵的上半部分：

```
REAL, DIMENSION(2000,3) :: mat

CALL MPI_SEND(mat(1,1), 1, blktype, p0, ...)
CALL MPI_SEND(mat(1001,1), 1, blktype, p1, ...) 
```

调用`MPI_SEND`with`blktype`将从指定的起始地址获取`1000`元素，然后跳过下一个`2000 - 1000 = 1000`元素，再获取另一个元素，`1000`依此类推，`3`总共次数。这将形成您的大矩阵的 1000 行子矩阵。

您现在可以运行一个循环来向通信器中的每个进程发送不同的子块，从而有效地执行分散操作。为了接收这个子块，接收进程可以简单地指定：

```
REAL, DIMENSION(1000,3) :: submat

CALL MPI_RECV(submat(1,1), 3*1000, MPI_REAL, root, ...) 
```

如果您是 MPI 新手，这就是您在 Fortran 中按行分散矩阵所需了解的全部内容。如果你很清楚 MPI 的类型系统是如何工作的，那么请继续阅读以获得更优雅的解决方案。

* * *

（有关如何使用 Jonathan Dursi 的出色描述，请参阅[此处](https://stackoverflow.com/a/10788351/1374437)`MPI_SCATTERV`。他的解决方案涉及将 C 矩阵拆分为列，这与此处的问题基本相同，因为 C 以行优先方式存储矩阵。Fortran 版本跟随。）

您也可以使用，`MPI_SCATTERV`但它非常复杂。它建立在上面介绍的纯 MPI 解决方案之上。首先，您必须将数据类型的大小调整`blktype`为新类型，其范围等于 of 的范围，`MPI_REAL`以便可以指定数组元素中的偏移量。这是必需的，因为偏移量`MPI_SCATTERV`是指定数据类型范围的倍数，而范围`blktype`是矩阵本身的大小。但是由于跨步存储，两个子块将仅从`4000`相隔字节开始（`1000`乘以 的典型范围`MPI_REAL`）。要修改类型的范围，可以使用`MPI_TYPE_CREATE_RESIZED`：

```
INTEGER(KIND=MPI_ADDRESS_KIND) :: lb, extent

! Get the extent of MPI_REAL
CALL MPI_TYPE_GET_EXTENT(MPI_REAL, lb, extent, ierr)
! Bestow the same extent upon the brother of blktype
CALL MPI_TYPE_CREATE_RESIZED(blktype, lb, extent, blk1b, ierr) 
```

这将创建一个新的数据类型 ，`blk1b`它具有 的所有特性`blktype`，例如可用于发送整个子块，但是当用于数组操作时，MPI 只会将数据指针推进单个大小`MPI_REAL`而不是大小整个矩阵。使用这种新类型，您现在可以将每个块的开头定位在 的`MPI_SCATTERV`任何元素上`mat`，包括任何矩阵行的开头。具有两个子块的示例：

```
INTEGER, DIMENSION(2) :: sendcounts, displs

! First sub-block
sendcounts(1) = 1
displs(1) = 0
! Second sub-block
sendcounts(2) = 1
displs(2) = 1000

CALL MPI_SCATTERV(mat(1,1), sendcounts, displs, blk1b, &
                  submat(1,1), 3*1000, MPI_REAL, &
                  root, MPI_COMM_WORLD, ierr) 
```

这里第一个子块的位移是`0`，与矩阵的开头重合。第二个子块的位移为`1000`，即从第一列的第 1000 行开始。在接收方，数据计数参数是`3*1000`元素，它与子块类型的大小相匹配。

# c++ - 在 C++ OpenGL 程序中找出显卡驱动程序的名称

> ID：13630536
> 
> 赞同：4
> 
> 时间：2012-11-29T16:43:54.857
> 
> 标签：c++, opengl

我正在寻找一种方法来找出 C++ OpenGL 程序中当前使用的显卡驱动程序的名称。充其量是一种独立于平台的方式（Linux 和 Windows）。我唯一能找到的是[这个](http://linux.koolsolutions.com/2009/04/24/tip-how-to-check-which-video-driver-is-your-x-server-using/)，但这是一个 shell 解决方案，甚至可能会随着不同的发行版而变化（而且，Windows 仍然是一个问题）。

我已经用 GL_VENDOR 参数查看了 glGetString() ，但是它输出的是显卡本身的供应商，而不是驱动程序。我找不到任何可以满足我需求的选项/功能。

这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-01T19:19:05.913

试试这些：

```
const GLubyte* vendor = glGetString(GL_VENDOR); 
const GLubyte* renderer = glGetString(GL_RENDERER); 
const GLubyte* version = glGetString(GL_VERSION); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:45:15.973

这可能不是最终的答案，但它可能会对您有所帮助。您可以在 Linux 下结合`lsmod`和命令计算出驱动程序名称和版本。`modinfo`

例如，我`lsmods`返回以下内容：

```
$ lsmod 
Module                  Size  Used by                
autofs                  28170 2  
binfmt_misc             7984  1  
vboxnetadp              5267  0  
vboxnetflt             14966  0  
vboxdrv              1793592  2 vboxnetadp,vboxnetflt  
snd_hda_codec_nvhdmi   15451  1 
snd_hda_codec_analog   80317  1  
usbhid                 42030  0  hid
nvidia              11263394  54 
```

从中我知道nvidia指的是显卡。

然后我可以跑步`modinfo nvidia`，我得到

```
filename:       /lib/modules/2.6.35-32-generic/kernel/drivers/video/nvidia.ko
alias:          char-major-195-*
version:        304.54
supported:      external
license:        NVIDIA
alias:          pci:v000010DEd00000E00sv*sd*bc04sc80i00*
alias:          pci:v000010DEd00000AA3sv*sd*bc0Bsc40i00*
alias:          pci:v000010DEd*sv*sd*bc03sc02i00*
alias:          pci:v000010DEd*sv*sd*bc03sc00i00*
depends: 
```

我可以提取驱动程序版本等...

我知道这既不是一个直接的解决方案也不是多平台的，但是如果您猜测大多数名称将是 nvidia、ati、intel 等，您可能会制定一个提取驱动程序名称和版本的脚本...通过 grep / awk 的输出`lsmod`.

# ruby-on-rails - 是构建单个巨型应用程序还是模块化的 Rails 方式？

> ID：13630537
> 
> 赞同：3
> 
> 时间：2012-11-29T16:43:56.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我们正在从头开始构建我们的应用程序的新版本。我们当前的 Rails 应用程序已经投入生产 5 年，有 100 个模型。我正在考虑为下一个版本简化代码库的方法。

我可以看到报告功能和管理功能正在分解。不过，应用程序中的大多数内容都是基于产品的。即使打破报告，我也必须复制模型，这显然不是次优的。

我知道 Rails 引擎，我只是不确定该功能是否像它应该的那样强大。另一个问题是在 Rails 4 已经处于测试阶段时基于 Rails 3.2 设计此应用程序。

我不希望这是一篇评论文章，我只是想看看是否存在打破模块与构建包罗万象的应用程序的约定。该约定要么存在于社区中，要么不存在。感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:33:52.540

*我将不得不复制模型...*

您可以考虑将模型移动到 gem 中，并在每个应用程序中包含 gem。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:55:26.093

约定一般是：

*   构建为一个应用程序
*   让班级尽可能少地了解其他班级
*   疼的时候拔掉

提取到引擎或服务（面向服务的架构）取决于您的可扩展性要求。

# c++ - 实现轮廓绘制功能的简便方法？

> ID：13630538
> 
> 赞同：0
> 
> 时间：2012-11-29T16:44:04.903
> 
> 标签：c++, image, drawing, line

我正在尝试实现一个绘制闭合轮廓的功能，该功能定义了我感兴趣的区域。我想使用鼠标手动绘制一个轮廓，将某个对象包含在图像中。轮廓应该在最后关闭，就像 ImageJ 所做的那样。我想知道是否有任何工具，C++ 中的 3rd 方库可以帮助解决这个问题。我知道 OpenCV 可能是一个来源，但我正在尝试实现一些轻而易举的东西。那么有没有办法这样做呢？任何指针表示赞赏。谢谢。 - 缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:18:38.487

我认为你可以使用 WPF。一个很好的例子可以在这里找到：http: [//www.codeproject.com/Articles/128705/WPF-rounded-corners-polygon](http://www.codeproject.com/Articles/128705/WPF-rounded-corners-polygon)

# jaxb - 配置 CXF JAX-WS 服务以使用 MOXY

> ID：13630539
> 
> 赞同：1
> 
> 时间：2012-11-29T16:44:17.760
> 
> 标签：jaxb, jax-ws, cxf, eclipselink, moxy

虽然我已经使用 MOXY 工厂添加了 jaxb.properties，并且我看到 JAXB 已切换到 moxy，但 CXF 在 JAXBUtils 类中有一个名为 createRIContext 的方法，它加载硬编码的 sun JAXB 实现。
有没有办法覆盖它并改用moxy？有问题的代码如下：

```
// fall back if we're using another jaxb implementation
try {
     riContext = JAXBUtils.createRIContext(contextClasses
               .toArray(new Class[contextClasses.size()]), tns);
} 
```

它加载硬编码的“com.sun.xml.bind.v2.ContextFactory”类并使用它来创建 JAXB 上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T12:14:03.667

CXF 的 3.0.0-milestone2 版本应该能更好地处理 Moxy。也就是说，Moxy 中仍然存在阻止所有 CXF 单元和系统测试通过的错误，因此我们对 Moxy 的信心与对 JAXB RI 的信心不同。

（任何有关测试 3.0.0 的帮助将不胜感激）

# java - jsp 标记文件：如何访问不同类型的会话属性集合？

> ID：13630541
> 
> 赞同：0
> 
> 时间：2012-11-29T16:44:21.230
> 
> 标签：java, jsp, jakarta-ee, servlets, jsp-tags

我有一个 servlet 向其传递对象（集合）的 jsp。该对象成为会话属性：

```
session.setAttribute("groupList", request.getAttribute("groups")); 
```

我使用一个标签从这个集合的内容中递归地生成一个菜单：

```
<c:forEach items="${groupList}" var="emp" begin="0" end="10">
        <tag:menuRenderer groupList="${groupList}" />
    </c:forEach> 
```

中的那些项目是一个类的对象`Group`。这个类包含一个子组`subGroups`列表和一个名为 的不同类的对象列表`students`。

我的问题是我无法在我的标签中访问这个学生列表。这是标签代码：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib tagdir="/WEB-INF/tags" prefix="tag"%>
<%@ taglib uri='http://java.sun.com/jsp/jstl/functions' prefix='fn' %>
<%@ attribute name="groupList" type="java.util.Collection"%>

<c:forEach var="item" items="${groupList}">

    <li><c:out value="${item.name}" /></li>
    <br>

    <!-- ##### here #### -->
    <li><c:out value="${fn:length(item.students)}" />   <!-- #### doesn't work ####-->
    <li><c:out value="${fn:length(item.subGroups)}" />  <!-- ####     works    #### -->

    <ul>
        <tag:menuRenderer groupList="${item.subGroups}" />
    </ul>
</c:forEach> 
```

调用会`item.students`导致异常，但我看不到它到底是什么，因为 strack 跟踪仅显示在 jsp 中引发异常的位置：

```
SEVERE: Servlet.service() for servlet jsp threw exception
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:186)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:137)
    at org.hibernate.collection.internal.PersistentSet.size(PersistentSet.java:156)
    at org.apache.taglibs.standard.functions.Functions.length(Functions.java:202)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstFunction.getValue(AstFunction.java:112)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:986)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fout_005f1(webmenuRenderer_tag.java:202)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fforEach_005f0(webmenuRenderer_tag.java:143)
    at org.apache.jsp.tag.webmenuRenderer_tag.doTag(webmenuRenderer_tag.java:97)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_tag_005fmenuRenderer_005f0(webmenuRenderer_tag.java:240)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fforEach_005f0(webmenuRenderer_tag.java:153)
    at org.apache.jsp.tag.webmenuRenderer_tag.doTag(webmenuRenderer_tag.java:97)
    at org.apache.jsp.testMenu2_jsp._jspx_meth_tag_005fmenuRenderer_005f0(testMenu2_jsp.java:173)
    at org.apache.jsp.testMenu2_jsp._jspx_meth_c_005fforEach_005f0(testMenu2_jsp.java:138)
    at org.apache.jsp.testMenu2_jsp._jspService(testMenu2_jsp.java:90)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at myPackage.controller.ControllerServlet.doGet(ControllerServlet.java:38)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Nov 29, 2012 5:50:36 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Hello] in context with path [/HibernateTest] threw exception [An exception occurred processing JSP page /testMenu2.jsp at line 19

16: 
17: <ul>
18:     <c:forEach items="${treeMap}" var="emp" begin="0" end="10">
19:         <tag:menuRenderer treeMap="${treeMap}" />
20:     </c:forEach>
21: </ul>
22: 

Stacktrace:] with root cause
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:186)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:137)
    at org.hibernate.collection.internal.PersistentSet.size(PersistentSet.java:156)
    at org.apache.taglibs.standard.functions.Functions.length(Functions.java:202)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstFunction.getValue(AstFunction.java:112)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:986)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fout_005f1(webmenuRenderer_tag.java:202)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fforEach_005f0(webmenuRenderer_tag.java:143)
    at org.apache.jsp.tag.webmenuRenderer_tag.doTag(webmenuRenderer_tag.java:97)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_tag_005fmenuRenderer_005f0(webmenuRenderer_tag.java:240)
    at org.apache.jsp.tag.webmenuRenderer_tag._jspx_meth_c_005fforEach_005f0(webmenuRenderer_tag.java:153)
    at org.apache.jsp.tag.webmenuRenderer_tag.doTag(webmenuRenderer_tag.java:97)
    at org.apache.jsp.testMenu2_jsp._jspx_meth_tag_005fmenuRenderer_005f0(testMenu2_jsp.java:173)
    at org.apache.jsp.testMenu2_jsp._jspx_meth_c_005fforEach_005f0(testMenu2_jsp.java:138)
    at org.apache.jsp.testMenu2_jsp._jspService(testMenu2_jsp.java:90)
    // and so on 
```

如果有人能告诉我为什么这不起作用，我会很高兴！我必须导入一些东西吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:34:24.180

该`students`集合可能来自惰性的一对多关系，并且您正试图在没有 Hibernate 会话处于活动状态的 Web 层中访问它。您应该声明关系`EAGER`，以便在查询时加载集合。

# c# - 检查两个逗号分隔的字符串是否相等（对于内容集）

> ID：13630545
> 
> 赞同：1
> 
> 时间：2012-11-29T16:44:29.977
> 
> 标签：c#, linq

我有四个字符串，如下所示。尽管它们具有不同的字符顺序和逗号后的不同间距——但它们被认为具有`same business value`.

1.  如何检查所有字符串是否相同（根据上面解释的业务场景）？我有以下代码，但在逗号后有空格的情况下它会失败。
2.  有什么比（为此）更好的方法`Enumerable.SequenceEqual`？

注意：“A,B”将被视为与“B,A,B,A,B”相同

注意：我正在`Visual Studio 2010`使用`.Net Framework 4`

**代码**

```
 string firstString = "A,B,C";
  string secondString = "C,A,B";
  string thirdString = "A,B, C";
  string fourthString = "C, A,B";

  //Set 1 Test
  List<string> firstList = new List<string>(firstString.Split(','));
  List<string> secondLsit = new List<string>(secondString.Split(','));
  bool isStringsSame = Enumerable.SequenceEqual(firstList.OrderBy(t => t), secondLsit.OrderBy(t => t));
  Console.WriteLine(isStringsSame);

  //Set 2 Test
  List<string> thirdList = new List<string>(thirdString.Split(','));
  List<string> fourthList = new List<string>(fourthString.Split(','));
  bool isOtherStringsSame = Enumerable.SequenceEqual(thirdList.OrderBy(t => t), fourthList.OrderBy(t => t));
  Console.WriteLine(isOtherStringsSame);

  Console.ReadLine(); 
```

**更新**：

用于`OrdianlIgnoreCase`忽略大小写敏感性 [如何在不区分大小写模式下使用 HashSet<string>.Contains() 方法？](https://stackoverflow.com/questions/2667635/how-to-use-hashsetstring-contains-method-in-case-insensitive-mode)

**参考**：

1.  [使用 .NET 检查逗号分隔列表中字符串的最佳方法？](https://stackoverflow.com/questions/2586602/best-way-to-check-for-string-in-comma-delimited-list-with-net)
2.  [比较两个 List<T> 对象是否相等，忽略顺序](https://stackoverflow.com/questions/3669970/compare-two-listt-objects-for-equality-ignoring-order)
3.  [为什么 IEnumerable<T>.Select() 在 2 个案例中的 1 个中有效？无法从使用情况推断](https://stackoverflow.com/questions/4629650/why-does-the-ienumerablet-select-works-in-1-of-2-cases-can-not-be-inferred)
4.  [比较两个逗号分隔的字符串以进行匹配的最短代码是什么？](https://stackoverflow.com/questions/1124216/what-is-the-shortest-code-to-compare-two-comma-separated-strings-for-a-match)
5.  [使用 c# 和 linq 将分隔的字符串拆分为层次结构](https://stackoverflow.com/questions/9060354/split-a-separated-string-into-hierachy-using-c-sharp-and-linq?rq=1)
6.  [使用 LINQ 计算两个字符串之间的匹配字符](https://stackoverflow.com/questions/1285347/count-matching-characters-between-two-strings-using-linq?rq=1)
7.  [使用sinq Linq 选择以半逗号分隔的字符串中的项目？](https://stackoverflow.com/questions/1536925/usinq-linq-to-select-items-that-is-in-a-semi-comma-separated-string?rq=1)
8.  [根据某个属性判断列表中的两个或多个对象是否相等](https://stackoverflow.com/questions/2162545/determine-whether-two-or-more-objects-in-a-list-are-equal-according-to-some-prop?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T16:49:55.253

你会认为 A,B 等于 B,A,B,A,B 吗？如果是这样，您应该使用集合。如果不是，则有序序列是合适的。

编辑：现在我们知道您实际上想要设置平等：

```
var set1 = new HashSet<string>(firstString.Split(',').Select(t => t.Trim()));
bool setsEqual = set1.SetEquals(secondString.Split(',').Select(t => t.Trim())); 
```

* * *

如果我们*不是*在设定平等之后......

要忽略空格，您应该修剪它们。例如：

```
var firstOrdered = firstString.Split(',')
                              .Select(t => t.Trim())
                              .OrderBy(t => t);
var secondOrdered = secondString.Split(',')
                                .Select(t => t.Trim())
                                .OrderBy(t => t); 
bool stringsAreEqual = firstOrdered.SequenceEqual(secondOrdered); 
```

# c# - 使 Ninject 拦截器与异步方法一起工作

> ID：13630548
> 
> 赞同：5
> 
> 时间：2012-11-29T16:44:36.650
> 
> 标签：c#, ninject, async-await, ninject-interception

我开始使用 ninject 拦截器来包装我的一些具有各种行为的异步代码，并且在让一切正常工作时遇到了一些麻烦。

这是我正在使用的拦截器：

```
public class MyInterceptor : IInterceptor
{
    public async void Intercept(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
            //check that method indeed returns Task
            await (Task) invocation.ReturnValue;
            RecordSuccess();
        }
        catch (Exception)
        {
            RecordError();
            invocation.ReturnValue = _defaultValue;
            throw;
        }
    } 
```

在大多数正常情况下，这似乎运行正常。我不确定这是否会达到我的预期。尽管它似乎将控制流异步返回给调用者，但我仍然有点担心代理无意中阻塞线程或其他东西的可能性。

除此之外，我无法让异常处理正常工作。对于这个测试用例：

```
[Test]
public void ExceptionThrown()
{
    try
    {
        var interceptor = new MyInterceptor(DefaultValue);
        var invocation = new Mock<IInvocation>();
        invocation.Setup(x => x.Proceed()).Throws<InvalidOperationException>();
        interceptor.Intercept(invocation.Object);
    }
    catch (Exception e)
    {

    }
} 
```

我可以在拦截器中看到 catch 块被击中，但我的测试中的 catch 块从未被重新抛出。我更困惑，因为这里没有代理或任何东西，只有非常简单的模拟和对象。我也在`Task.Run(() => interceptor.Intercept(invocation.Object)).Wait();`我的测试中尝试过类似的东西，但仍然没有改变。测试顺利通过，但 nUnit 输出确实有异常消息。

我想我把事情搞砸了，而且我并不像我想的那样完全理解发生了什么。有没有更好的方法来拦截异步方法？我在异常处理方面做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T04:36:57.663

我建议您阅读我的[`async`/ `await`intro](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)，如果您还没有这样做的话。您需要非常了解`async`方法与返回`Task`的方法之间的关系，以便拦截它们。

考虑您当前的`Intercept`实现。正如 svick 评论的那样，最好避免`async void`. 一个原因是错误处理不寻常：方法的任何异常都直接`async void`在当前引发。`SynchronizationContext`

在您的情况下，如果该`Proceed`方法引发异常（就像您的模拟那样），那么您的`async void Intercept`实现将引发异常，该异常将直接发送到`SynchronizationContext`([这是默认值或线程池 -`SynchronizationContext`因为这是一个单元测试](http://nitoprograms.blogspot.com/2012/02/async-unit-tests-part-1-wrong-way.html)，如我在我的博客上解释）。因此，您将看到在某个随机线程池线程上引发的异常，而不是在单元测试的上下文中。

要解决此问题，您必须重新考虑`Intercept`. 常规拦截只允许你拦截方法的*第一*部分`async`；要响应方法的*结果*，`async`您需要在返回`Task`完成时做出响应。

这是一个仅捕获返回的简单示例`Task`：

```
public class MyInterceptor : IInterceptor
{
    public Task Result { get; private set; }

    public void Intercept(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
            Result = (Task)invocation.ReturnValue;
        }
        catch (Exception ex)
        {
            var tcs = new TaskCompletionSource<object>();
            tcs.SetException(ex);
            Result = tcs.Task;
            throw;
        }
    }
} 
```

您可能还想运行[NUnit 2.6.2 或更高版本，它增加了对`async`单元测试](http://nunit.org/?p=releaseNotes&r=2.6.2)的支持。这将使您能够`await`（`MyInterceptor.Result`这将在单元测试上下文中正确引发异常）。

如果你想要更复杂的异步拦截，你可以使用`async`- just not `async void`。;)

```
// Assumes the method returns a plain Task
public class MyInterceptor : IInterceptor
{
    private static async Task InterceptAsync(Task originalTask)
    {
        // Await for the original task to complete
        await originalTask;

        // asynchronous post-execution
        await Task.Delay(100);
    }

    public void Intercept(IInvocation invocation)
    {
        // synchronous pre-execution can go here
        invocation.Proceed();
        invocation.ReturnValue = InterceptAsync((Task)invocation.ReturnValue);
    }
} 
```

不幸的是，拦截必须同步进行，因此不可能进行异步预执行（除非您同步等待它完成，或者使用`IChangeProxyTarget`）。但是，即使有这个限制，您也应该能够使用上述技术做几乎任何您需要的事情。

# java - 当标题看起来正确时，为什么 Springframework 返回一个空正文？

> ID：13630550
> 
> 赞同：1
> 
> 时间：2012-11-29T16:44:41.613
> 
> 标签：java, android, spring

当我运行这段代码时，我会在 httpResponse 中得到响应。它报告标头中的正确字节数。但身体是空的。当我调用 .getBody() 时，它为空。

标题：

```
<200 OK,{Date=[Thu, 29 Nov 2012 16:26:06 GMT], Server=[Apache], Vary=[Accept-Encoding], Content-Length=[5072], Keep-Alive=[timeout=10, max=100], Connection=[Keep-Alive], Content-Type=[text/html]}> 
```

我究竟做错了什么？

```
 String url = new String("http://www.myurl.com/scripts/json/v1/slipmanager.php");

    MultiValueMap<String, Object> formData = new LinkedMultiValueMap<String, Object>();
    formData.add("username", userName);
    formData.add("password", md5(userPassword));
    formData.add("method", "getslips");

    RestTemplate template = new RestTemplate(true);
    template.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
    HttpHeaders requestHeaders = new HttpHeaders();

    requestHeaders.setContentType(new MediaType("multipart", "form-data"));
    template.getMessageConverters().add(new StringHttpMessageConverter());

    HttpEntity<MultiValueMap<String, Object>> request = new HttpEntity<MultiValueMap<String, Object>>(formData, requestHeaders);
    ResponseEntity<?> httpResponse = null;
    try
    {
        httpResponse = template.exchange(url, HttpMethod.POST, request, null);
        String tmp = (String) httpResponse.getBody();
                    //THIS IS WHERE THE BODY IS NULL
    }
    catch (Exception e) 
    {
        Log.e("POST", e.getMessage(), e);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T08:52:28.290

You asked for a response type "null" so Spring thinks you want to discard the body. If you wanted it to be a String, String.class should work. You don't even need the explicit StringHttpMessageConverter as far as I know.

# iis-7 - 限制 URL 重写出站规则的范围

> ID：13630553
> 
> 赞同：1
> 
> 时间：2012-11-29T16:44:54.947
> 
> 标签：iis-7, url-rewriting, iis-7.5, url-rewrite-module

我们设置了一系列的出站规则，在每个 A HREF、AREA、BASE、FORM、FRAME、HEAD、IFRAME 等标签的末尾添加一些 URL 参数。一切正常。

我们的问题是，是否有办法将这些规则的范围限制在 HTML 响应的特定部分（即两个特定的 HTML 注释之间）。换句话说，我们希望规则的行为如下：

```
<html>
....
** NO RULES APPLIED HERE **
....
<!-- START SECTION -->
....
** RULES APPLIED HERE **
....
<!-- END SECTION -->
....
** NO RULES APPLIED HERE **
....
</html> 
```

我认为这是不可能的，但也许你们中的一个人有解决这个问题的办法？提前致谢，-FG

# c - 无法使用 windows C 编程的 openssl 将 X509 对象读入临时文件

> ID：13630558
> 
> 赞同：1
> 
> 时间：2012-11-29T16:45:06.263
> 
> 标签：c, windows, openssl, x509

```
int _tmain(int argc, _TCHAR* argv[])
{
    X509 *x;
    EVP_PKEY *pkey;
    PKCS12 *p12;
    STACK_OF(X509) *ca=NULL;
    FILE *fp;
    int code;

    CRYPTO_malloc_init();
    SSL_library_init();
    SSL_load_error_strings();
    ERR_load_BIO_strings();
    OpenSSL_add_all_algorithms();
    ERR_load_crypto_strings();

    x = X509_new();

    code = fopen_s(&fp,PRIVATE_CERTIFICATE, "rb"); 
    //fp = fopen(PRIVATE_CERTIFICATE, "rb");

    p12 = d2i_PKCS12_fp(fp, NULL);

    fclose(fp);

    if (!PKCS12_parse(p12, KEYPASS, &pkey, &x, &ca)) {
        printf(" Error while parsing\n");
    }
    PKCS12_free(p12);

    code = fopen_s(&fp,TEMP_STORE_CERTIFICATE, "w"); 

    PEM_write_X509(fp, x);
    fclose(fp);

    //RSA Private Certificate
    fp = fopen(TEMP_STORE_KEY_CERTIFICATE,"w");
    PEM_write_PrivateKey(fp, pkey, NULL, NULL, 0, NULL, NULL);
    fclose(fp);

    return 0;
} 
```

当执行达到 PEM_write_X509 时，它会卡住并且不会继续。我猜，它进入了无限循环，执行并没有超出这个范围。一个控制台简单地打开，它不会消失。有人请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:28:08.037

fp 指向的文件以“rb”模式打开，其中 PEM_write_fp 将尝试在已打开为读取模式的文件上写入。在写入之前关闭文件并以写入模式打开它。

而且，覆盖文件的内容似乎也不好。

# shell - 在 PowerShell 中将数字相加

> ID：13630559
> 
> 赞同：7
> 
> 时间：2012-11-29T16:45:07.930
> 
> 标签：shell, powershell

我正在尝试在 PowerShell 中将两个数字相加。我将用户提供的输入存储在`$Value1`and中`$Value2`。但是我找不到任何方法来实际添加这些数字。我尝试使用`Measure-Object`cmdlet，但似乎无法让它工作。

如何在 Powershell 中加/减和乘数字？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T16:48:51.190

```
PS H:\> $value1 = 10
PS H:\> $value2 = 10
PS H:\> $value1 + $value2
20 
```

如果您的数字存储为字符串，那么您需要将它们转换为整数，如下所示：

```
PS H:\> $value1 = "10"
PS H:\> $value2 = "20"
PS H:\> [int]$value1 + [int]$value2
30 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T16:47:47.240

```
$val1 = 1
$val2 = 2
$result = $val1 + $val2
$result 
```

如果您从用户那里获得输入，那么您需要明确地将数字强制为数字：

```
[int]$val1 = Read-Host 'Enter value 1'
[int]$val2 = Read-Host 'Enter value 2'
$result = $val1 + $val2
$result 
```

# html - 无序列表内或周围的部分标签？

> ID：13630567
> 
> 赞同：4
> 
> 时间：2012-11-29T16:45:28.720
> 
> 标签：html, html-lists

我仍然对在 html 5 中使用“部分”感到非常困惑。我只是想知道以下哪种解决方案更好。列表中的内容彼此不相关。所以我必须给他们每个人一个部分还是我必须把它们都放在一个部分中。见下文：

解决方案一：

```
<ul>
<li>
    <section>
        <header>
            <h2>Services</h2>
        </header>
        <img src="img/foto/testpic1.jpg" alt="" title="" border="0"/>
        <p>This is text</p>
    </section>
</li>
<li>
    <section>
        <header>
        <h2>Products</h2>
        </header>
        <img src="img/foto/testpic2.jpg" alt="" title="" border="0"/>
        <p>This is text</p>
    </section>
</li>
<li>
    <section>
        <header>
        <h2>Contacts</h2>
        </header>
        <img src="img/foto/testpic3.jpg" alt="" title="" border="0"/>
        <p>This is text</p>
    </section>
</li>
</ul> 
```

解决方案二：

```
<section>
<ul>
    <li>
        <header>
            <h2>Services</h2>
        </header>
        <img src="img/foto/testpic1.jpg" alt="" title="" border="0"/>
        <p>This is text</p> 
    </li>
    <li>
        <header>
            <h2>Products</h2>
        </header>
        <img src="img/foto/testpic2.jpg" alt="" title="" border="0"/>
        <p>This is text</p> 
    </li>
    <li>
        <header>
            <h2>Contacts</h2>
        </header>
        <img src="img/foto/testpic3.jpg" alt="" title="" border="0"/>
        <p>This is text</p>
    </li>
</ul>
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:24:26.687

我不确定为什么您首先需要列表 ( `<ul>`)。我会删除它，因为仅将它用于实际列表（或类似列表的元素，即菜单）是有意义的，而这里不是这种情况。

现在关于`<section>`. 根据规格：

> *该`<section>`元素表示文档或应用程序的通用部分。在这种情况下，部分是内容的主题分组，**通常带有标题。***

这消除了您的解决方案＃2。

更多的：

> *当联合元素的内容有意义时，鼓励作者使用`<article>`元素而不是元素。`<section>`*

所以在你的情况下，我这样做：

```
<article>
    <header>
        <h2>Services</h2>
    </header>
    <img src="img/foto/testpic1.jpg" alt="" title="" border="0"/>
    <p>This is text</p> 
</article>
<article>
    <header>
        <h2>Products</h2>
    </header>
    <img src="img/foto/testpic2.jpg" alt="" title="" border="0"/>
    <p>This is text</p> 
</article>
<article>
    <header>
        <h2>Contacts</h2>
    </header>
    <img src="img/foto/testpic3.jpg" alt="" title="" border="0"/>
    <p>This is text</p>
</article> 
```

如果你需要一个用于样式目的的包装器 - 你可以使用好的 ol'`<div>`

> *该`<section>`元素不是通用容器元素。当出于样式目的或为了方便编写脚本而需要元素时，鼓励作者改用该`<div>`元素。*

* * *

**[截面](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-section-element)元素_**

有关主题的[**文章**](http://www.impressivewebs.com/html5-section/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T03:14:02.270

`<section>`并且`<div>`相似之处在于它们都用于切片。不同之处在于，如果预期的部分是为了样式，`<div>`应该使用......但如果该部分是字面上的内容，那么使用`<section>`. 看看下面的报价：

> “当一个元素仅用于样式目的或方便编写脚本时，鼓励作者使用 div 元素代替……一般规则是，只有当元素的内容明确列出时，section 元素才是合适的……~ WHATWG” </p>

请注意，一般的想法`<section>`是**列出内容**，例如`<li>`. 然而，后者更适合子弹指向……而前者更适合博客文章等。

所以，我真的不推荐你的任何一个解决方案。您应该使用类似于以下内容的内容：

```
<div class="blog">
    <article class="post">
        <h2 class="post-title">Services</h2>
        <img src="img/foto/testpic1.jpg" alt="" title="" border="0"/>
        <p class="post-excerpt">This is text</p>
    </article>
    <article class="post">
        <h2 class="post-title">Products</h2>
        <img src="img/foto/testpic2.jpg" alt="" title="" border="0"/>
        <p class="post-excerpt">This is text</p>
    </article>
    <article class="post">
        <h2 class="post-title">Contacts</h2>
        <img src="img/foto/testpic3.jpg" alt="" title="" border="0"/>
        <p class="post-excerpt">This is text</p>
    </article>
</div> 
```

我希望这会有所帮助。一切顺利。

[参考：[https](https://azizecomm.wordpress.com/2016/01/04/html5-section-vs-div) ://azizecomm.wordpress.com/2016/01/04/html5-section-vs-div /]

# java - JTable 删除或隐藏或禁用特定单元格？

> ID：13630572
> 
> 赞同：1
> 
> 时间：2012-11-29T16:45:41.373
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我想知道以下是否可行，以及如何去做。我想从我的表格中删除或隐藏或禁用对“空”单元格的选择：

![在此处输入图像描述](../Images/57164246a7f6d1bc3a8c7670e8aea84b.png)

以下是设置表格模型的代码，在此代码之后我只是用数据填充表格：

```
myTable.setModel(new javax.swing.table.DefaultTableModel(
        new Object[][]{
            {null, null, null},
            {null, null, null},
            {null, null, null},
            {null, null, null},
            {null, null, null},
            {null, null, null},
            {null, null, null}
        },
        new String[]{
            null, null, null
        }) {
    Class[] types = new Class[]{
        java.lang.String.class, java.lang.String.class, java.lang.String.class
    };
    boolean[] canEdit = new boolean[]{
        false, false, false
    };

    @Override
    public Class getColumnClass(int columnIndex) {
        return types[columnIndex];
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return canEdit[columnIndex];
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:19:26.800

好吧，经过一番黑客攻击，我想我有一个可能的解决方案。

```
table.setCellSelectionEnabled(true);
table.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
table.setDefaultRenderer(Object.class, new Renderer()); 
```

* * *

```
public class Renderer extends DefaultTableCellRenderer {

public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {

    if (table.getValueAt(row, column) == null && isSelected) {
        table.clearSelection();

        return super.getTableCellRendererComponent(table, value, false, false,
                row, column);
    } else {
        return  super.getTableCellRendererComponent(table, value, isSelected,
                hasFocus, row, column);
    }
} 
```

}

这个原因只有在你有的时候才有效

```
table.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
```

启用。并且空单元格仍然具有焦点。但这可能足以满足您的要求

# c++ - 编写一个在启动时注册 COM 并在终止时取消注册的可执行文件 (Win32)

> ID：13630575
> 
> 赞同：1
> 
> 时间：2012-11-29T16:45:44.000
> 
> 标签：c++, winapi, com

我希望编写一个 Win32 可执行文件（在 C++ 中），它在启动时执行其所有 COM 注册，以便客户端应用程序可以通过 COM 访问其对象。当可执行文件终止时，它应该向 COM 注销。这种事情是否可能，如果可能，涉及的步骤是什么？整个下午我一直在狂热地搜索，但没有真正找到任何答案。大多数解决方案都需要预先注册（例如，通过 /register 开关）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:50:19.080

我怀疑[CoRegisterClassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693407%28v=vs.85%29.aspx)和[CoRevokeClassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688650%28v=vs.85%29.aspx)是您正在寻找的功能。[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680076%28v=vs.85%29.aspx)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:36:12.103

无论是进程内还是进程外，COM 服务器注册都没有什么魔力。注册意味着写入注册表取消注册意味着删除注册表项。

通常的 EXE COM 服务器读取命令行参数来处理安装/卸载请求并提供单独的子例程或执行路径，但您可以在每次执行中自由地包含安装/卸载过程。

```
WinMain()
{
  Install()
  CoRegisterClassObject();
  .. Message Loop ..
  CoRevoveClassOBject();
  Uninstall();
} 
```

# typescript - 为什么 jquery.d.ts TypeScript 定义文件会抛出编译错误？

> ID：13630578
> 
> 赞同：3
> 
> 时间：2012-11-29T16:45:45.723
> 
> 标签：typescript

我在 VSTS 2012 中有一个基本的 MVC4 Web 项目来玩 TypeScript。

我安装了这个版本的 TypeScript：TypeScriptSetup.0.8.1.msi

我的 jquery.d.ts 文件来自：[http ://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#typings%2fjquery.d.ts](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#typings%2fjquery.d.ts)

我在所有“索引签名”定义上都遇到编译错误。第一个编译错误与 JQueryAjaxSettings 相关：

```
 headers?: { [key: any]: any; }; 
```

这是错误：

```
Error 9 Index signatures may only take 'string' or 'number' as their parameter
C:\Development\TypeScript\ScriptGen\ScriptGen.Web\Scripts\jquery.d.ts 37 18 app.ts 
```

编译器不喜欢定义为类型**any的****键**。

 **我应该将键类型更改为字符串还是我还缺少其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T17:44:50.367

您使用的是旧版本的 jquery.d.ts。从那时起，编译器已更改为禁止使用`any`索引器。任何较新版本的 jquery.d.ts（例如[这个](http://typescript.codeplex.com/SourceControl/changeset/view/92d9e637f6e1#typings/jquery.d.ts)）都可以正常工作，或者您可以根据需要将其更改`any`为`string`（不过，在此期间，您可能需要在该文件中进行多个其他修复）。**

# java - 具有多个类的java中的银行帐户客户端

> ID：13630579
> 
> 赞同：0
> 
> 时间：2012-11-29T16:45:45.883
> 
> 标签：java, class, object, bank

我正在尝试制作一个银行帐户程序，但我无法弄清楚如何让我的所有变量对我拥有的每个类都可见，或者如何使我的代码的提款和存款方法可见。谁能看看我的代码并告诉我出了什么问题？我只想要客户端类中的输入和输出。

谢谢

# 客户端类

```
public class Client {
  public static void main(String args[]) {
    Scanner input = new Scanner(System.in);       
    System.out.println("Enter your Name: ");
    String cusName = input.nextLine();
    System.out.println("Enter Account Type: ");
    String type = input.next();
    System.out.println("Enter Initial Balance: ");
    int bal = input.nextInt();
    BankAccount b1 = new BankAccount(cusName, num, type, bal);
    int menu;
    System.out.println("Menu");
    System.out.println("1\. Deposit Amount");
    System.out.println("2\. Withdraw Amount");
    System.out.println("3\. Display Information");
    System.out.println("4\. Exit");
    boolean quit = false;
    do {
      System.out.print("Please enter your choice: ");
      menu = input.nextInt();
      switch (menu) {
      case 1:
        b1.deposit();
        break;

      case 2:
        b1.withdraw();
        System.out.println("Current Account Balance=" + Balance);
        System.out.print("Enter withdrawal amount:");
        amount = input.nextInt();
        break;

      case 3:
        b1.display();
        break;

      case 4:
        quit = true;
        break;
      }
    } while (!quit);
  }
} 
```

# 金钱类

```
public class Money
{

  static int accountNumber, Balance, amount;
  Scanner input = new Scanner(System.in);
  static String name, actype;
  public int deposit() {
    System.out.print("Enter depost amount:");
    amount = input.nextInt();
    if (amount < 0) {
      System.out.println("Invalid");
      return 1;
    }
    Balance = Balance + amount;
    return 0;
  }

  int withdraw()  {

    if (Balance < amount) {
      System.out.println("Not enough funds.");
      return 1;
    }
    if (amount < 0) {
      System.out.println("Invalid");
      return 1;
    }
    Balance = Balance - amount;
    return 0;
  }

} 
```

# 银行账户类

```
class BankAccount {
  Scanner input = new Scanner(System.in);
  static String name, actype;
  static int bal, amt;
  Random randomGenerator = new Random();
  int accNo = randomGenerator.nextInt(100);

  BankAccount(String name, int accNo, String actype, int bal) {
    this.name = name;
    this.accNo = accNo;
    this.actype = actype;
    this.bal = bal;
  }
  void display() {
    System.out.println("Name:" + name);
    System.out.println("Account No:" + accNo);
    System.out.println("Balance:" + bal);

  }

  void dbal() {
    System.out.println("Balance:" + bal);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:55:57.563

1.  添加`Money`到您的`BankAccount`并创建一个 getter 方法：

    ```
    class BankAccount {
       Scanner input = new Scanner(System.in);
       static String name, actype;
       static int bal, amt;
       Random randomGenerator = new Random();
       int accNo = randomGenerator.nextInt(100);
       Money money;

       BankAccount(String name, int accNo, String actype, int bal) {
        this.name = name;
        this.accNo = accNo;
        this.actype = actype;
        this.bal = bal;
        this.money = new Money();
      }

      public Money getMoney(){
         return this.money;
      }
      .....
    } 
    ```

2.  用于`bankaccount.getMoney()`调用`deposit`和`withdraw`作为：

    ```
     b1.getMoney().deposit();
     b1.getMoney().withdraw(); 
    ```

此外，**我建议使`Money`类属性（例如数量、帐户类型...）非静态**并通过构造函数进行设置。静态变量与类定义相关联，因此您无法为每个银行帐户维护它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:00:45.933

我不会为你回答这个问题。相反，我将建议您阅读更多有关 Java 编程概念的内容，默认情况下会向您解释。

*   [这是关于封装的，这是您要询问的主要概念](http://www.tutorialspoint.com/java/java_encapsulation.htm)
*   [这是一本关于如何写好代码的好书，包括保持方法简短之类的东西](https://rads.stackoverflow.com/amzn/click/com/0132350882)
    *   特别是，你的主要方法应该分成更小的部分
    *   如果你不想买这本书，这里有一个[堆栈溢出问题。](https://stackoverflow.com/questions/2065044/smaller-methods)

如果您不想阅读这些链接中的任何一个，@YogendraSingh 很好地回答了这个问题，请使用该答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:51:53.410

对象的属性不应是静态的，例如您的“名称、actype、bal 和 amt”。另外我认为您的货币类应该存在，并且这些方法可以在银行账户中（您从银行账户存款/取款）。

# android - 发送消息以使用 alertdialog 调出地图

> ID：13630581
> 
> 赞同：0
> 
> 时间：2012-11-29T16:45:49.350
> 
> 标签：android, google-maps, sms, android-alertdialog

当收到消息时，我很难以我想要的地图形式接收短信 alertdialog ok 并在地图出现时取消 click ok help me

我的代码

//短信接收器.java

```
public class SMSReceiver extends BroadcastReceiver
{
    static final String ACTION = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent)
    {   

        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += "Location  " + " Longitude : " + lon  + "\n Latitude : "  + lat;
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }

               String action = intent.getAction();
        if (ACTION.equals(action)) 
        {
            //Start Activity here
             Intent startIntent = new Intent(context, SMSNotif.class);
                     startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                     startIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                     String name = "pesan";
                     String value = "str";
                     startIntent.putExtra("pesan",String.valueOf(str));
                     context.startActivity(startIntent);

        }    
    }
} 
} 
```

//messageNotif.java

```
public class messageNotif extends Activity 
{
private static final String LOG_TAG = "SMSReceiver";
public static final int NOTIFICATION_ID_RECEIVED = 0x1221;
public Intent i;
private String pesan ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     Bundle extras = getIntent().getExtras();
     pesan = String.valueOf(extras.getString("pesan"));

     //---display the new SMS message---
     Toast.makeText(null,"budug"+pesan, Toast.LENGTH_LONG).show();

     // call displayAlert() here
        displayAlert();
}
    public void displayAlert()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this).setTitle("Rehere");
        builder.setMessage("Are you open in rehere?").setCancelable(
            false).setPositiveButton("Ok",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                launchIntent();

                }

                private void launchIntent() {
                    Intent myIntent = new Intent(getBaseContext(), My_Map.class);             
                    startActivity(myIntent);
                }
            }).setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
        AlertDialog alert = builder.create();
        alert.show();
     }

}
} 
```

//map.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/myLocationText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <com.google.android.maps.MapView
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0d8Ntrj9uYka52jVwlG4TacE1HwZB6YSxFF_YZA"
        android:clickable="true"
        android:enabled="true" />

</LinearLayout> 
```

我的代码有什么问题？？请你帮助我好吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:21:35.180

1.Intent startIntent = new Intent(context, SMSNotif.class); 但是公共类 messageNotif 扩展了 Activity

2.Toast.makeText(null,"budug"+pesan, Toast.LENGTH_LONG).show(); 第一个参数应该像 Toast.makeText(this,.....

3.startIntent.putExtra("pesan",String.valueOf(str));

捆绑附加服务 = getIntent().getExtras(); pesan = String.valueOf(extras.getString("pesan")); 这里的 Bundle extras 为空

pesan = getIntent().getStringExtra("pesan")

4.launchIntent();应该在一个类中声明

你可以只替换方法的代码

# python - 处理 bibtex 文件的最佳方法

> ID：13630584
> 
> 赞同：2
> 
> 时间：2012-11-29T16:45:59.753
> 
> 标签：python

我有一个 bibtex 文件，其中包含大约 640 个条目（上升趋势）。我使用 Jabref 来维护这个文件。实际上，我想收拾东西，做一些 Jabref 无能为力的事情。所以我想写一个代码并尽可能灵活。

一些任务是例如哪些文章缺少“文件”条目或“标题”条目？哪些文章具有相同的文件条目等。

我的方法是填充字典列表。字典包含 bibtex 文件中一篇文章的信息。例如：

```
elements = [{
'author': 'Ando, K. and Ota, H. and Oki, T',
'comment': 'modelling, fundamental diagram, plane, cellular automata',
'file': 'Ando1988.pdf',
'issue': '2',
'journal': 'Railway R',
'owner': 'bob',
'timestamp': '2008.01.09',
'title': 'Forecasting the flow of people',
'type': 'ARTICLE',
'volume': '45',
'year': '1988'},
{'author': "Helbing, D. and Farkas, I. J. and Moln\\'{a}r, P. and Vicsek, T",
'booktitle': 'Pedestrian and Evacuation Dynamics',
'editor': 'Schreckenberg, Michael and Scharma, Som Deo',
'file': 'Helbing2002.pdf',
'key': 'Helbing2002',
'owner': 'jack',
'publisher': 'Springer',
'timestamp': '2007.12.12',
'title': 'Simulation of pedestrian crowds in normal and evacuation situations',
'type': 'INPROCEEDINGS',
'year': '2002'
}] 
```

我在这个结构上运行的函数总是以类似的东西开头

```
for element in elements:
   do_stuff with element 
```

虽然我的代码运行良好，但不知何故我有一种感觉，我在做一些*蛮力明智*的事情。这就是为什么我想发起一个讨论并问你：

1.  有没有比我正在使用的（字典列表）更整洁/更智能/优雅的结构？
2.  您将如何组织数据以使处理信息变得更容易。

**编辑：**我想提一下，由于文章类型不同（书籍、程序、文章等），而且我只是人类，字典可能有不同的键和不同数量的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:09:13.753

字典非常适​​合处理不可预测的键值对。对象非常适合处理可预测的键值对（事实上，在 Python 中，您可以在自己的对象中存储任意属性）。

类和对象*可能*给您的主要优势：

1.  如果您想预先定义不同类型的条目，并检查您的数据是否符合该模式、类和类层次结构，这将使这更容易
2.  如果您有很多操作依赖于弄清楚如何处理每个字典，那么这可能会通过继承和多态函数变得更清晰。
3.  如果你发现你想将集合作为值添加到你的哈希表中，你可能会开始发现在对象上编写方法更容易。

如果您觉得这样更容易，您还可以将类中的所有数据保存在 dicts 中。

您还可以将一堆代码带到 codereview.stackexchange，看看您是否喜欢他们关于重构为对象的建议。

# scala - Akka Actor 询问和类型安全

> ID：13630585
> 
> 赞同：17
> 
> 时间：2012-11-29T16:46:00.463
> 
> 标签：scala, asynchronous, akka, actor, future

## 如何使用 Akka Actor 询问和维护类型安全？或者避免使用询问来支持告诉？

在Akka Actor 上调用`?`或时，会返回 a ，我必须通过.`ask``Future[Any]``future.mapTo[MyType]`

我不喜欢失去这种类型的安全性。如果我直接使用 Futures（没有参与者），我可以显式返回`Future[MyType]`并维护类型安全。

*我的具体用例涉及一个演员将它的消息委托给两个子演员，然后汇总这些演员的结果并将其返回给父母的发件人。我父母的接收方法看起来类似于 Akka Docs 中的这种方法：*

[http://doc.akka.io/docs/akka/2.0/scala/futures.html#For_Comprehensions](http://doc.akka.io/docs/akka/2.0/scala/futures.html#For_Comprehensions)

```
val f1 = actor1 ? msg
val f2 = actor2 ? msg

val f3 = for {
  a ← f1.mapTo[Int]
  b ← f2.mapTo[Int]
  c ← ask(actor3, (a + b)).mapTo[Int]
} yield c 
```

有没有更好的方法来实现我的用例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T19:05:23.127

我想发布一个新答案，因为@Roland Kuhn 最近为此提出了一个名为 Typed Channels 的新解决方案：

```
val f: Future[MyType] = actor <-?- message 
```

*   **[罗兰的介绍](http://www.youtube.com/watch?v=PCk2SHufw3E)**
*   **[在 Akka 文档中](http://doc.akka.io/docs/akka/2.3-M2/scala/typed-channels.html)**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T18:08:19.950

试试[打字演员](http://doc.akka.io/docs/akka/2.0.2/scala/typed-actors.html)。基本上，它们允许您使用强类型特征/接口与参与者交互，而不是通过交换消息。在幕后，Akka 使用动态代理来实现这些接口并执行异步魔法。

类型化的actor可以返回具有不同的强类型返回值的方法（来自上述文档）：

```
def squareDontCare(i: Int): Unit //fire-forget

def square(i: Int): Future[Int] //non-blocking send-request-reply

def squareNowPlease(i: Int): Option[Int] //blocking send-request-reply

def squareNow(i: Int): Int //blocking send-request-reply 
```

这些方法代表`tell`，而其余的则是不同风格的`ask`.

# python - 获取随机曲目

> ID：13630588
> 
> 赞同：3
> 
> 时间：2012-11-29T16:46:03.517
> 
> 标签：python, soundcloud

有没有办法从 soundcloud API 获取随机音轨？我正在考虑的解决方法也是获取曲目总数，然后选择一个随机数。但我也找不到获得曲目总数的方法。

目前我只是将这个东西包装在一个 try/except 中，但是我做了无用的请求。如果有办法避免这种情况！？

```
while (not track):
    try:
        track = client.get('/tracks/%s' % random.randint(0, 100000))
    except requests.exceptions.HTTPError as e:
        logger.error(e) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:53:25.833

您要挑选的曲目还有其他要求吗？除非`/tracks`您指定`limit`. 您可以从该集合中随机选择一个吗？

```
import random
import soundcloud

client = soundcloud.Client(access_token='YOUR_ACCESS_TOKEN')
tracks = client.get('/tracks')
track = random.choice(tracks) 
```

希望有帮助！否则发表评论，我将用更多细节编辑我的答案。

# ios - 有没有一个程序可以自动为 xcode 本地化？

> ID：13630595
> 
> 赞同：0
> 
> 时间：2012-11-29T16:46:26.747
> 
> 标签：ios, xcode, localization

我一直在使用 Google 的翻译网站将我的 localizable.strings 文件翻译成多种语言，但这非常繁琐。

有谁知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:48:48.940

不要那样做！大多数人会更喜欢非本地化的英文版本而不是翻译不佳的版本。

要么联系本地化服务（他们会直接翻译 .strings 文件），要么不要本地化您的应用。

# javascript - 从字符串中提取小数

> ID：13630597
> 
> 赞同：1
> 
> 时间：2012-11-29T16:46:28.583
> 
> 标签：javascript, regex

我有一个看起来像这样的字符串

`Hey this is my 1.20 string`

我试图从中提取`1.20`。

最好的方法是什么？

我已经尝试过这样的事情，但我得到的价值`1.20,20`不仅仅是`1.20`

```
var query = $(".query_time").html();
var matches = query.match(/\d.(\d+)/); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:47:57.573

[match 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)的结果是一个数组，而不是字符串。所以简单地采取

```
var nb = query.match(/\d.(\d+)/)[0]; 
```

顺便说一句，如果你想要更精确的匹配，你也应该转义点：

```
var nb = query.match(/\d\.(\d+)/)[0]; 
```

或者如果你想接受逗号（取决于语言）：

```
var nb = query.match(/\d[\.,](\d+)/)[0]; 
```

但确切的正则表达式将基于您的确切需求，当然，并匹配任何数字（科学记数法？）我建议看看[更复杂的正则表达式](https://stackoverflow.com/questions/13340717/json-numbers-regular-expression)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:48:22.227

的值`matches`实际上是`[ "1.20", "20" ]`（这是一个数组）。如果您打印它，它将被转换为字符串，因此`1.20,20`.

`String.match`返回`null`或匹配数组，其中第一个索引是完全匹配的部分，然后是您想要的任何部分。所以你想要的价值是`matches[0]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:52:19.807

尝试以下

```
var nb = query.match(/\d\.\d+/)[0]; // "1.20" 
```

*   你需要逃跑`.`，因为它代表任何角色。
*   移除捕获组 (\d+) 并且不返回第二个匹配项
*   添加 [0] 索引以检索匹配项

# jquery - jQuery UI 选项卡功能如何与 URL 一起使用？

> ID：13630601
> 
> 赞同：0
> 
> 时间：2012-11-29T16:46:33.757
> 
> 标签：jquery, jquery-tabs

我正在尝试遵循示例：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

```
 <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />    
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script>    $(function() {        
$( "#tabs" ).tabs({ beforeLoad: function( event, ui )
 { ui.jqXHR.error(function()
 {  ui.panel.html( "Couldn't load this tab. We'll try to fix this as soon as possible. " +  "If this wouldn't be a demo." );               
 });           
 }        
});    
});    
</script>
    <div id="tabs">    
    <ul>        
        <li><a href="#tabs-1">Preloaded</a></li>        
        <li>
        <a href="http://mywebsite/sompage.asp?item=123">Tab 1</a>
        </li>       

         </ul>    
         <div id="tabs-1">       
            <p>Stuff preloaded.  Just text.p>    
         </div>
     </div> 
```

当我单击“选项卡 1”时，除了错误消息之外什么也没有。如何创建选项卡以显示任何数据？我只看到`<div id="tabs-1">`。预加载工作正常，网址，没有。我究竟做错了什么？它期望从我的 .asp 页面返回什么？我必须为它创建一个标签吗？

谢谢。很抱歉格式化，但是当我从 jquery 页面复制和粘贴时，它变得混乱了。我试图清理它。

[jQuery UI 选项卡加载一个 url](https://stackoverflow.com/questions/12532301/jquery-ui-tab-loading-a-url) 没有答案

# coldfusion - 从 Ids 列表中删除浮动部分

> ID：13630609
> 
> 赞同：3
> 
> 时间：2012-11-29T16:47:28.453
> 
> 标签：coldfusion

我有格式列表

```
"4186.0,7573.0,4300.0,9479.0,9488.0,10642.0,7987.0,9480.0 " 
```

冷融合中是否有任何可用的功能，可以`".0"`一次性从数字中删除所有内容？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:51:47.150

没有一个简单的功能可以做到这一点，但是您可以做很多事情。

您可以遍历列表和`numberFormat()`每个项目，将其放回列表中或创建新列表。这在处理和编程中都是低效的。

因为您的列表只是一个字符串，您可以用简单的字符串替换替换数字的小数部分：`replace("123.0,456.0", ".0", "", "ALL")`。如果您的列表增长了除“.0”之外的其他十进制数字，您可以将该替换函数升级为正则表达式以捕获数字模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:53:44.587

我通常使用 INT 删除 barnyr 建议的数字的小数，但如果您想将其视为单个字符串而不是列表，您可以使用 reReplace （详细说明 Nathan Strutz 的想法）并执行以下操作：

```
<cfset listOfNums = "4186.0,7573.540,4300.434,9479.,9488.0,10642.0,7987.0,9480.0">
<cfset listOfNums = reReplace(listOfNums, "\.[0-9]*", "", "all")> 
```

结果是：`4186,7573,4300,9479,9488,10642,7987,9480`

即使后面没有数字，它也会删除小数点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:27:19.483

您可以使用`map()`UnderscoreCF[库](http://russplaysguitar.github.com/UnderscoreCF/)来优雅地解决这个问题（在 CF 10 或 Railo 4 中）。

```
_ = new Underscore();

listOfNums = "4186.0,7573.0,4300.0,9479.0,9488.0,10642.0,7987.0,9480.0 ";

arrayOfNums = _.map(listOfNums, function(num){
  return round(num);
});

result = arrayToList(arrayOfNums); 
```

`map()`通过转换函数映射集合中的每个值，生成一个新的值数组。这使您可以更好地控制结果。

注意：我写了 UnderscoreCF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:36:04.850

听起来 Int()（在大多数其他语言中相当于 floor() 函数）函数可能是您想要的：http: [//help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f89.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f89.html)

您仍然需要遍历列表，但应用 Int() 函数。

# php - 从图像中读取像素的最快方法

> ID：13630616
> 
> 赞同：0
> 
> 时间：2012-11-29T16:47:55.300
> 
> 标签：php, image-processing, gd

我有一个网站必须从图像中读取多达 50,000 个单独的像素。我需要一种方法来快速做到这一点。现在，以 22,000 像素单独读取每个像素需要将近 10 秒。我知道 GD 不是最好的方法。什么 PHP 图像库是在短时间内读取大量像素的最快方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:51:07.250

你可以试试[Imagick](http://php.net/manual/en/book.imagick.php)。虽然我不确定它是否真的会更快。这是一个例子：

```
<?php
$imagick = new Imagick("my_image.jpeg");
$iterator = $imagick->getPixelIterator();

foreach($iterator as $row => $pixels) {
    foreach ($pixels as $column => $pixel) {
        // Do something with $pixel
    }
    $iterator->syncIterator();
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:57:26.633

您可以使用[GraphicsMagick](http://www.graphicsmagick.org/)。

从他们的文档中：

> GraphicsMagick 是图像处理领域的瑞士军刀。由基础包中的 282K 物理行（根据 David A. Wheeler 的 SLOCCount）源代码（或 964K，包括 3rd 方库）组成，它提供了强大且高效的工具和库集合，支持读取、写入和操作图像超过 88 种主要格式，包括 DPX、GIF、JPEG、JPEG-2000、PNG、PDF、PNM 和 TIFF 等重要格式。
> 
> 图像处理是使用 OpenMP 进行的多线程（参见多线程基准测试结果），因此 CPU 密集型任务会随着处理器内核的添加而线性扩展。OpenMP 支持需要使用 GCC 4.2（或更高版本）进行编译，或使用至少支持 OpenMP 2.0 规范的任何 C 编译器。

它是从 2002 年 ImageMagick 的源代码中派生出来的。它有一个名为[GMagick](http://php.net/manual/en/book.gmagick.php)的 pecl php 扩展，并且在从命令行执行图像处理操作时比 ImageMagick 快得多。

**更新：** GraphicsMagick 比 ImageMagick 快并不意味着 GMagick 比 Imagick 更好。库的选择取决于您的要求。这是关于这个主题的一个很好的答案：[https ://stackoverflow.com/a/5282269/199593](https://stackoverflow.com/a/5282269/199593)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:55:01.880

[Gmagick是一个让](http://www.php.net/manual/en/book.gmagick.php)[GraphicsMagick](http://www.graphicsmagick.org/)易于使用的扩展，它本身就是 ImageMagick 的一个分支。

他们声称它更快，但我自己没有使用它。

# jquery - jQuery UI -> 自动完成 -> ON select -> ui 项目未定义

> ID：13630617
> 
> 赞同：5
> 
> 时间：2012-11-29T16:47:57.680
> 
> 标签：jquery, undefined, jquery-ui-autocomplete

我的页面上有一个自动完成器，可以正确获取并显示数据....当它停止正常工作时是在选择事件上....

```
$("#fld_search1").catcomplete({
        delay: 50,
        minLength: 2,
        open: function(e, ui){
            if(searching) return;
            //console.log($(this).data('catcomplete'));
            var acData = $(this).data('catcomplete');
           var styledTerm = '<strong>%s</strong>'.replace('%s', acData.term);

            acData.menu
                .element
                .find('li a')
                .each(function() {
                    var me = $(this);
                    me.html( me.text().replace(acData.term, styledTerm) );
                });
            //return match.replace(new RegExp("("+keywords+")", "gi"),'<i>$1</i>');
        },
        select: function(event, ui) {
            var I = ui.item;
            top.console.log(ui);
            $("#fld_search1" ).catcomplete("close");

            $('#fld_search1').val(I.name);
            window.location = '/podjetje/'+I.value+'.html';
            //$('#frm_company_id').val(I.value);
            return false;
        },
        source: function( request, response ) {

            search_term = request.term;

            if ( search_term in cache ) {
                response( cache[ tesearch_termrm ] );
                return;
            }

            var suggest_url = "/companies/find_company.json";

            $.ajax({
                url: suggest_url,
                dataType: "json",
                type : "POST",
                data: {
                    owner: request.term
                },
                success: function( data ) {
                    response( $.map( data, function( item ) {
                        var alabel = item.label.replace(
                                new RegExp('(' +
                                    $.ui.autocomplete.escapeRegex(request.term) +
                                    ')'), 
                            "<b>$1</b>" );
                        return {
                            value: item.value,
                            label: item.label,
                            name: item.name,
                            category: item.category
                        }
                    }));
                }
            });

        }
    }); 
```

所以它没有得到 ui 对象......

如果我执行 top.console.log(ui) 我得到一个具有一个属性-> 项目的对象...这是未定义的...所以如果我记录 I 值我会得到未定义...这怎么可能？

这是在 1.9.1

如果我更改它并使用 1.9.2 菜单总是在鼠标悬停时关闭...如果我使用自动对焦，它甚至不会打开！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T15:08:56.160

`ui.item`今天我对未定义的属性有同样的问题。经过一些调试，我找到了解决方案。jQuery UI 团队稍微更改了[带有类别的自动完成示例代码。](http://jqueryui.com/autocomplete/#categories)当您查看示例源代码时，您会看到：

```
<script>
    $.widget( "custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function( ul, items ) {
            var that = this,
                currentCategory = "";
            $.each( items, function( index, item ) {
                if ( item.category != currentCategory ) {
                    ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                    currentCategory = item.category;
                }
                that._renderItemData( ul, item );
            });
        }
    });
    </script> 
```

`that._renderItemData( ul, item );`曾经是（在 1.9 之前的版本中）的行`that._renderItem( ul, item );`。另请参阅：[错误 #8560](http://bugs.jqueryui.com/ticket/8560)。但这在[1.9 升级指南](http://jqueryui.com/upgrade-guide/1.9/#autocomplete)中没有提到。

所以我更改了我的插件以使用该`_renderItemData(...,...)`功能并解决了问题。

希望这可以帮助！

# php - AJAX 上传 - 在继续之前不等待响应

> ID：13630618
> 
> 赞同：7
> 
> 时间：2012-11-29T16:48:01.207
> 
> 标签：php, javascript, jquery, ajax, upload

我正在使用[Blueimp 的 jQuery Uploader](https://github.com/blueimp/jQuery-File-Upload)（非常好，这也太顺便说一句）和一个 S3 处理程序来上传文件，然后通过 S3 API（来自 PHP SDK）将它们传输到 S3。

有用。问题是，在**大**文件（>1GB）上，将（通过创建对象）传输到 S3可能需要*几分钟的时间。*执行此操作的 PHP 文件将挂起，直到此过程完成。问题是，上传者（它使用[jQuery Ajax 方法](http://api.jquery.com/jQuery.ajax/)）似乎每次都放弃等待并重新开始。

我认为这与 PHP INI 'max_input_time' 等有关，因为它似乎等待了大约 60 秒，尽管现在似乎有所不同。我已经提高了 PHP INI 和其他相关的 max_input_time - 但没有进一步。

我还考虑过（更有可能）脚本或 jQuery 方法中的 JS 有超时。开发人员（blueimp）说前端脚本中没有这样的超时，我也没有看到任何超时，虽然在 jQuery Ajax 方法选项中引用了“超时”，但它似乎影响了它上传的整个时间而不是等待回应 - 所以这没什么用。

感激地收到任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:03:47.400

一次性上传大文件可能会导致各种问题。最好的做法是在客户端将文件拆分成块，然后将它们发送到服务器，一次一个块，并让服务器将这些块重新组合成原始文件，然后再将其推送到 S3。

只要您可以使用`window.FileReader`并且可以在文件上`File.prototype.slice`使用 javascripts`.split()`来剪切它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:02:19.737

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)上的 jQuery 文档 说：

> **暂停**
> 
> 为请求设置超时（以毫秒为单位）。这将覆盖使用 $.ajaxSetup() 设置的任何全局超时。超时时间从 $.ajax 调用开始；如果有几个其他请求正在进行并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，如果请求超时，XMLHttpRequest 对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

除此之外，检查 php set_time_limit 函数和 php max memory 设置可能也是一个好主意。

无论如何，在我看来，最好的方法是像这样实现错误回调

```
$.ajax('yourScript.php',{
 error:function(jqXHR){  echo this error ... }
}); 
```

jQuery 文档说：

> 如果请求失败，则会按照注册顺序调用错误回调。他们接收 jqXHR、一个指示错误类型的字符串和一个异常对象（如果适用）。一些内置错误会提供一个字符串作为异常对象：“abort”、“timeout”、“No Transport”。

这可能会提示您谁（服务器或客户端）停止了传输。

希望这可以帮助

# c# - 模型和部分模型，如何避免冗余代码？

> ID：13630623
> 
> 赞同：0
> 
> 时间：2012-11-29T16:48:18.043
> 
> 标签：c#, asp.net-mvc, model-view-controller, model

我有一个模型和一个部分模型，其中仅包含我需要在 JSON 中公开的属性。

但是模型和他的部分模型之间的属性是多余的。

我怎样才能避免这种情况或改进我的方法？

```
namespace Dashboard.Models.UserModels
{
    public class UserModel
    {
        public int id { get; set; }
        public string dbName { get; set; }
        public string firstname { get; set; }
        public string lastname { get; set; }
        public int idExternal { get; set; }
        public int idInstance { get; set; }
        public string login { get; set; }
        public string password { get; set; }
        public DateTime? dtContractStart { get; set; }
        public DateTime? dtContractEnd { get; set; }
        public string emailPro { get; set; }
        public string emailPerso { get; set; }

        public LuccaUserModel()
        {
            idInstance = -1;
        }

        // partial model for json result
        // not sure is the best way or have to be here
        public class PartialUserModel
        {
            public int id { get; set; }
            public string firstname { get; set; }
            public string lastname { get; set; }
            public string emailPro { get; set; }
            public string emailPerso { get; set; }
            public DateTime? dtContractStart { get; set; }
            public DateTime? dtContractEnd { get; set; }
            public string url { get; set; }
        }

        // UserModel Methods
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:55:39.307

您可以重命名 PartialUserModel UserModelBase 类（或保持原样......这样做更符合逻辑）并使 UserModel 继承它：

```
public class UserModel : UserModelBase
{
    ...
} 
```

当然，在这种情况下，您需要从 UserModel 中删除所有重复的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:00:50.447

做一个正确的设计和建立一个矫枉过正的设计之间只有一线之隔。答案取决于许多输入，其中我选择项目和模型广度最重要。

为了让我的答案更清楚，我不得不说我使用了不同的术语。UI中采用的数据通常称为ViewModel。在您的情况下，您将构建`UserViewModel`包含必要信息子集的内容。

如果我正在处理一次性项目，我会将模型重用为 ViewModel。我将通过帮助方法删除敏感信息、加载或切断从数据库中延迟加载的数据以及对数据进行其他准备来做到这一点。所有这些都是使用相同的模型类完成的。

如果这不是一个短期项目，我希望创建从模型数据映射的单独 ViewModel 类。然后，如果我使用的大多是平面数据，我会使用[AutoMapper 工具](http://automapper.codeplex.com/)自动复制数据，而不是编写自己的映射器。

正如此处的另一个答案所述，您使用 UI 中所需的数据编写了一个基本类，并使用其他模型数据对其进行了扩展，但是由于多种原因，这不是一个好方法。

1.  如果违反了关注点分离。处理模型和持久性的项目不应该知道您的 ViewModel
2.  您可能需要将相关对象中的数据展平为 ViewModel 对象。在这种情况下，您的模型对象将具有不应该存在或多余的字段。
3.  您可能需要 ViewModel 中的计算字段和辅助方法，它们会再次出现在模型中，从而使没有更新设计的每个人感到困惑。
4.  您可能希望对同一个 ViewModel 类采用几个不相关的模型类

简而言之，可以重用模型类或创建 ViewModel。不幸的是，没有聪明的解决方案。如果你找到了，请发表评论，因为我想听听:)

# java - Ubuntu：SWT 应用程序无法加载 GTK 库

> ID：13630627
> 
> 赞同：10
> 
> 时间：2012-11-29T16:48:37.727
> 
> 标签：java, linux, ubuntu, jar, swt

我提供了 Linux SWT jar 并将我的应用程序打包到 Eclipse 中，以将 swt.jar 包含在我的应用程序的 jar 中。当我尝试在 Ubuntu 上运行它时，我收到以下错误文本（仅发布原因）：

> 原因：java.lang.UnsatisfiedLinkError：无法加载 SWT 库。原因：
> 
> java.library.path 中没有 swt-pi-gtk-4234
> 
> java.library.path 中没有 swt-pi-gtk
> 
> /home/nifty/.swt/lib/linux/x86/libswt-pi-gtk-4234.so：libgtk-x11-2.0.so.0：无法打开共享对象文件：没有这样的文件或目录
> 
> 无法加载库：/home/nifty/.swt/lib/linux/x86/libswt-pi-gtk.so

这向我表明它无法加载 GTK 文件，但除此之外的任何内容，我都不知所措。我只是使用 Ubuntu 来测试我的应用程序，所以我知道的很少。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-31T17:07:30.303

以下是我在 Ubuntu 13.10 x86_64 上修复缺失库的方法：

java.lang.UnsatisfiedLinkError：无法加载 SWT 库。原因：/home/ywu/.eclipse/473605238/configuration/org.eclipse.osgi/bundles/361/1/.cp/libswt-pi-gtk-4236.so: libgtk-x11-2.0.so.0: 不能打开共享对象文件：没有这样的文件或目录

```
ywu@ywu-HP-8100:~$ aptitude search libgtk2.0-0
    i   libgtk2.0-0                   - GTK+ graphical user interface library                                                         
    p   libgtk2.0-0:i386              - GTK+ graphical user interface library
ywu@ywu-HP-8100:~$ sudo apt-get install libgtk2.0-0:i386 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T13:59:50.650

在我的 64 位 Debian Wheezy/测试中，我通过这样做解决了它

```
apt-get install ia32-libs-gtk 
```

（[http://www.eclipse.org/forums/index.php/t/262868/](http://www.eclipse.org/forums/index.php/t/262868/)）。如果您的系统不是 64 位系统，则此建议不适用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-31T21:07:27.483

使用最新的 Ubuntu (18.10)，安装`libswt-gtk-3-java`修复它。为此，请从终端键入以下命令： `sudo apt install libswt-gtk-3-java`

对于最新版本，我建议使用以下链接： [https ://packages.ubuntu.com/search?keywords=swt-gtk](https://packages.ubuntu.com/search?keywords=swt-gtk)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T12:28:57.890

对于更新的版本，如果它说它 can't find `libgtk-3.so.0`，那么您需要的明显包`apt-get install`是[libgtk-3-0](https://packages.ubuntu.com/artful/libgtk-3-0)。但是，在 Ubuntu Zesty (17.04) 上似乎没有这样的包，所以我需要切换到 Xenial (16.04)。巧妙的，以后也应该工作。

此外，没有它，[图形 Eclipse 安装程序](https://www.eclipse.org/downloads/eclipse-packages/?show_instructions=TRUE)将无法工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-18T17:42:40.067

这在 i386/debian 和 docker 上对我有用：

```
apt-get install libgtk2.0-0 
```

# gridview - 如何在 VB.NET 中修复 Gridview 的大小？

> ID：13630634
> 
> 赞同：0
> 
> 时间：2012-11-29T16:49:03.477
> 
> 标签：gridview, size

如何在 VB.NET 中修复 Gridview 的大小？当项目运行并单击 Gridview 中的编辑链接按钮以编辑列时，Gridview 的大小非常大，因此页面大小 Commix 这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:00:35.313

我不清楚你的问题，但如果你的问题是关于在 GridView 中加载很多行，你可以使用 GridView 分页功能，考虑这个链接：

[有效的分页与 GridView](http://www.codeproject.com/Articles/125541/Effective-Paging-with-GridView-Control-in-ASP-NET)

# ruby - Ruby在后台运行进程

> ID：13630635
> 
> 赞同：1
> 
> 时间：2012-11-29T16:49:07.380
> 
> 标签：ruby, multithreading, console, console-application, fibers

我正在尝试编写一个小型控制台应用程序来播放 mp3。mp3 播放将由外部二进制文件处理，例如 mpg123，而播放控制、播放列表等将作为 curses 控制台应用程序实现。

假设我创建了一个“播放列表”对象，其中添加了许多曲目。当我播放曲目时，我需要在后台调用二进制文件，同时允许 UI 响应。我还需要能够跳到下一首曲目等。

我假设我需要为此使用线程或光纤？如何控制线程？

我以前没有做过任何线程化的 Ruby 编程。

有没有人有一个简单的例子来说明如何开始这个？

# amazon-s3 - 将 AWS Dynamodb 备份到 S3

> ID：13630641
> 
> 赞同：36
> 
> 时间：2012-11-29T16:49:27.813
> 
> 标签：amazon-s3, backup, amazon-dynamodb, elastic-map-reduce

[Amazon docs](http://aws.amazon.com/dynamodb/) [http://aws.amazon.com/dynamodb/](http://aws.amazon.com/dynamodb/)等其他地方建议您可以使用 Elastic Map Reduce 备份您的 dynamodb 表，
我对它的工作原理有一个大致的了解，但我不能查找有关此的任何指南或教程，

所以我的问题是如何自动化 dynamodb 备份（使用 EMR）？

到目前为止，我认为我需要使用从 dynamodb 读取数据的 map 函数和将其写入 S3 的 reduce 创建一个“流”作业，我相信这些可以用 Python（或 java 或其他一些语言）编写.

任何评论，澄清，代码示例，更正表示赞赏。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-04T15:19:11.277

随着 AWS Data Pipeline 的引入，以及用于 dynamodb 到 S3 备份的现成模板，最简单的方法是在 Data Pipeline [[链接]](http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-importexport-ddb-part2.html)中安排备份，

如果您有特殊需求（数据转换、非常精细的粒度控制......）请考虑@greg 的答案

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-30T17:21:32.327

有一些很好的使用 MapReduce 和 DynamoDB 的指南。前几天我关注[了这个](http://aws.amazon.com/articles/28549)，并将数据导出到 S3 相当轻松。我认为您最好的选择是创建一个执行备份任务的配置单元脚本，将其保存在 S3 存储桶中，然后使用适用于您的语言的 AWS API 实用地启动新的 EMR 作业流程，完成备份。您可以将其设置为 cron 作业。

将数据从 Dynamo 导出到 S3 的 Hive 脚本示例：

```
CREATE EXTERNAL TABLE my_table_dynamodb (
    company_id string
    ,id string
    ,name string
    ,city string
    ,state string
    ,postal_code string)
 STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
 TBLPROPERTIES ("dynamodb.table.name"="my_table","dynamodb.column.mapping" = "id:id,name:name,city:city,state:state,postal_code:postal_code");

CREATE EXTERNAL TABLE my_table_s3 (
    ,id string
    ,name string
    ,city string
    ,state string
    ,postal_code string)
 ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
 LOCATION 's3://yourBucket/backup_path/dynamo/my_table';

 INSERT OVERWRITE TABLE my_table_s3
 SELECT * from my_table_dynamodb; 
```

下面是一个 PHP 脚本示例，它将启动一个新的 EMR 作业流程：

```
$emr = new AmazonEMR();

$response = $emr->run_job_flow(
            'My Test Job',
            array(
                "TerminationProtected" => "false",
                "HadoopVersion" => "0.20.205",
                "Ec2KeyName" => "my-key",
                "KeepJobFlowAliveWhenNoSteps" => "false",
                "InstanceGroups" => array(
                    array(
                        "Name" => "Master Instance Group",
                        "Market" => "ON_DEMAND",
                        "InstanceType" => "m1.small",
                        "InstanceCount" => 1,
                        "InstanceRole" => "MASTER",
                    ),
                    array(
                        "Name" => "Core Instance Group",
                        "Market" => "ON_DEMAND",
                        "InstanceType" => "m1.small",
                        "InstanceCount" => 1,
                        "InstanceRole" => "CORE",
                    ),
                ),
            ),
            array(
                "Name" => "My Test Job",
                "AmiVersion" => "latest",
                "Steps" => array(
                    array(
                        "HadoopJarStep" => array(
                            "Args" => array(
                                "s3://us-east-1.elasticmapreduce/libs/hive/hive-script",
                                "--base-path",
                                "s3://us-east-1.elasticmapreduce/libs/hive/",
                                "--install-hive",
                                "--hive-versions",
                                "0.7.1.3",
                            ),
                            "Jar" => "s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar",
                        ),
                        "Name" => "Setup Hive",
                        "ActionOnFailure" => "TERMINATE_JOB_FLOW",
                    ),
                    array(
                        "HadoopJarStep" => array(
                            "Args" => array(
                                "s3://us-east-1.elasticmapreduce/libs/hive/hive-script",
                                "--base-path",
                                "s3://us-east-1.elasticmapreduce/libs/hive/",
                                "--hive-versions",
                                "0.7.1.3",
                                "--run-hive-script",
                                "--args",
                                "-f",
                                "s3n://myBucket/hive_scripts/hive_script.hql",
                                "-d",
                                "INPUT=Var_Value1",
                                "-d",
                                "LIB=Var_Value2",
                                "-d",
                                "OUTPUT=Var_Value3",
                            ),
                            "Jar" => "s3://us-east-1.elasticmapreduce/libs/script-runner/script-runner.jar",
                        ),
                        "Name" => "Run Hive Script",
                        "ActionOnFailure" => "CANCEL_AND_WAIT",
                    ),
                ),
                "LogUri" => "s3n://myBucket/logs",
            )
        );

} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-07T10:40:46.337

随着 DynamoDB Streams 和 Lambda 的引入，您应该能够对 DynamoDB 数据进行备份和增量备份。

您可以将您的 DynamoDB 流与 Lambda 函数关联，以自动触发每次数据更新的代码（即：数据到另一个存储，如 S3）

可用于与 DynamoDb 绑定以进行增量备份的 lambda 函数：

[https://github.com/PageUpPeopleOrg/dynamodb-replicator](https://github.com/PageUpPeopleOrg/dynamodb-replicator)

我在我的博客上详细解释了如何使用 DynamoDB Streams、Lambda 和 S3 版本化存储桶为 DynamoDb 中的数据创建增量备份：

[https://www.abhayachauhan.com/category/aws/dynamodb/dynamodb-backups](https://www.abhayachauhan.com/category/aws/dynamodb/dynamodb-backups)

编辑：

截至 2017 年 12 月，DynamoDB 已发布按需备份/恢复。这允许您进行备份并将它们本地存储在 DynamoDB 中。它们可以恢复到新表。此处提供了详细的演练，包括安排它们的代码：

[https://www.abhayachauhan.com/2017/12/dynamodb-scheduling-on-demand-backups](https://www.abhayachauhan.com/2017/12/dynamodb-scheduling-on-demand-backups)

高温高压

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-23T02:21:06.703

AWS Data Pipeline 成本高昂，管理模板化流程的复杂性无法与您可以更改并按计划运行的 CLI 命令的简单性相比（使用`cron`Teamcity 或您选择的 CI 工具）

亚马逊推广 Data Pipeline 是因为他们从中获利。我想说只有当你有一个非常大的数据库（> 3GB）时它才真正有意义，因为性能改进将证明它是合理的。

对于中小型数据库（1GB 或更少），我建议您使用众多可用工具中的一种，以下所有三种工具都可以从命令行处理备份和恢复过程：

*   [dynamo-backup-to-s3](https://www.npmjs.com/package/dynamo-backup-to-s3) ==> 流式恢复到 S3，使用 NodeJS/npm
*   [SEEK-Jobs dynamotools](https://github.com/SEEK-Jobs/dynamotools) ==> 流式恢复到 S3，使用 Golang
*   [dynamodump](https://github.com/bchew/dynamodump) ==> 使用 python 进行本地备份/恢复，使用上传/下载 S3[`aws s3 cp`](http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html)

请记住，由于带宽/延迟问题，这些在 EC2 实例中的性能总是比您的本地网络更好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-02T08:56:12.290

您可以使用我的简单 node.js 脚本[dynamo-archive.js](https://github.com/yegor256/dynamo-archive)，它会扫描整个 Dynamo 表并将输出保存到 JSON 文件。然后，您使用`s3cmd`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-15T06:59:27.537

您可以使用这个方便的基于 python 的[dynamodump](https://github.com/bchew/dynamodump)工具（使用[boto](https://github.com/boto/boto)）将表转储到 JSON 文件中。然后上传到S3`s3cmd`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-11T22:39:50.867

aws 数据管道具有限制区域。

我花了 2 个小时来调试模板。

[https://docs.aws.amazon.com/general/latest/gr/rande.html#datapipeline_region](https://docs.aws.amazon.com/general/latest/gr/rande.html#datapipeline_region)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-03T10:25:51.650

我发现[dynamodb-backup lambda](https://github.com/CU-CloudCollab/aws-examples/tree/master/lambda/dynamodb-backup)函数非常有用。我花了 5 分钟进行设置，并且可以轻松配置为使用 Cloudwatch Schedule 事件（不过不要忘记`npm install`在开始时运行）。

对我来说，来自 Data Pipeline 的价格也便宜很多（每月约 40 美元），我估计每月的成本约为 1.5 美分（都没有 S3 存储）。请注意，它默认一次备份所有 DynamoDB 表，可以在代码中轻松调整。

唯一缺少的部分是在函数失败时得到通知，数据管道能够做到这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-11T18:44:05.950

您现在可以[将 DynamoDB 数据直接备份到 S3](https://dynobase.dev/export-dynamodb-data-to-s3/)，而无需使用 Data Pipeline 或编写自定义脚本。这可能是实现您想要的最简单的方法，因为它不需要您编写任何代码并运行任何任务/脚本，因为它是完全托管的。

# sql - 如何从sql中的当前行中选择数据并访问

> ID：13630642
> 
> 赞同：0
> 
> 时间：2012-11-29T16:49:30.140
> 
> 标签：sql, ms-access

认为这可能是一个明显的问题，但已经进行了搜索，但似乎仍然无法让它发挥作用。

基本上我正在尝试建立一个快速访问数据库，该数据库将允许一个字段限制下一个字段中显示的内容。

因此，如果用户在一个字段中选择一个类别，它将限制下一个字段中的子类别子集。

我为这部分设置的方式是我有一个主表，这是用户将使用的，然后我有另一个表，其中包含每个类别和子类别

IE。

```
category1 subcat1
category1 subcat2
category2 subcat1
etc. 
```

我如何在访问中实现这一点，因为我不确定如何选择要在查询中使用的当前行数据。

这是我拥有的代码，但它不起作用。

```
SELECT [Industry types].[Industry types] 
FROM [Industry types], MasterTable 
WHERE [Industry types].[Main Category] = [MasterTabel]![Industry Category 1]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:29:06.007

查询没有实际记录。

您必须在表单中显示主表的信息，并使用将显示相关记录的子表单。主窗体的 RecordSource 必须是 MasterTable 或基于它的查询。子表单的 RecordSource 必须是 [Industry types] 表或基于它的查询。您不需要 where 子句，而是将子表单的`LinkChildFields`属性设置为`Main Category`并将`LinkMasterFileds`属性设置为`Industry Category 1`。

请参阅[创建包含子表单的表单（一对多表单）](http://office.microsoft.com/en-001/access-help/create-a-form-that-contains-a-subform-a-one-to-many-form-HA010098674.aspx)

# node.js - NodeJS 文件系统同步和性能

> ID：13630643
> 
> 赞同：3
> 
> 时间：2012-11-29T16:49:36.610
> 
> 标签：node.js, asynchronous, sync

我遇到了 NodeJS 的问题，由于某些中间件，我需要直接返回一个需要知道文件的最后修改时间的值。显然正确的方法是

```
getFilename: function(filename, next) {
    fs.stat(filename, function(err, stats) {
        // Do error checking, etc...
        next('', filename + '?' + new Date(stats.mtime).getTime());
    });
} 
```

但是，由于我使用的中间件，getFilename 必须返回一个值，所以我这样做：

```
getFilename: function(filename) {
    stats = fs.statSync(filename);
    return filename + '?' + new Date(stats.mtime).getTime());
} 
```

我不完全理解 NodeJS 事件循环的性质，所以我想知道 statSync 是否有任何特殊的调味料以某种方式泵送事件循环（或在节点中调用的任何东西，等待的指令堆栈执行）而文件节点信息正在加载还是真的阻塞，并且这段代码将导致性能噩梦，我应该重写我正在使用的中间件以使用回调？如果它确实有特殊的酱汁允许事件循环在它在磁盘上等待时继续进行，那么它是否可以在其他任何地方使用（尽管一些承诺库或其他东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:53:35.173

不，这里没有魔法。如果你在函数中间阻塞，一切都会被阻塞。

如果性能成为问题，我认为您唯一的选择是重写中间件的那部分，或者对它的使用方式进行创造性的思考。

# c# - 如何通过 XAML 中的样式重用子项？

> ID：13630645
> 
> 赞同：1
> 
> 时间：2012-11-29T16:49:50.573
> 
> 标签：c#, wpf, xaml

我有一个 WPF 子菜单，我想在 XAML 的几个地方重用它。它是八个`<MenuItem>`元素的集合，其中包含一些我不想复制/粘贴的复杂绑定。但是，在每种情况下，持有者都是不同的：在一个地方，父级是 a `<Menu>`，在另一个地方，父级是 a`<MenuItem>`中的 a `<ContextMenu>`。

我一直在尝试，`<Setter Property="Items">`但`<Style>`我想我可能走错了路。

为了使其具体化，我试图减少这样的代码重复：

```
<Menu>
    <MenuItem Header="Details"    IsCheckable="True" ... />
    <MenuItem Header="List"       IsCheckable="True" ... />
    <MenuItem Header="Thumbnails" IsCheckable="True" ... />
    ...
</Menu>
...
<ContextMenu>
    <MenuItem Header="View">
        <MenuItem Header="Details"    IsCheckable="True" ... />
        <MenuItem Header="List"       IsCheckable="True" ... />
        <MenuItem Header="Thumbnails" IsCheckable="True" ... />
        ...
    </MenuItem>
</ContextMenu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:16:37.027

像这样的东西怎么样：

您需要在资源字典中创建以下集合：

```
<Collections:ArrayList x:Key="MenuItems" x:Shared="false">
    <MenuItem Header="Details" />
    <MenuItem Header="List" />
    <MenuItem Header="Thumbnails" />
</Collections:ArrayList> 
```

您需要添加以下命名空间：

```
xmlns:Collections="clr-namespace:System.Collections;assembly=mscorlib" 
```

...

然后只需使用该集合：

```
<Menu ItemsSource="{StaticResource MenuItems}" /> 
```

...

```
<ContextMenu>
    <MenuItem Header="View" ItemsSource="{StaticResource MenuItems}" />
</ContextMenu> 
```

# selenium-webdriver - 在 Selenium(Webdriver) Junit 4 中的窗口之间切换

> ID：13630646
> 
> 赞同：1
> 
> 时间：2012-11-29T16:49:51.670
> 
> 标签：selenium-webdriver

在主窗口上单击链接时将我带到我提供凭据的 Facebook 页面，提交后，窗口会自动关闭（Facebook 窗口）。现在我必须在主窗口上执行一些操作，但我无法切换到主窗口窗户。

我使用了 WindowHandles 并尝试切换到主窗口但没有成功。

在主窗口中单击链接（Facebook 链接）时，URL 会在单击链接后立即更改。

# c++ - 在哪里寻找真正的网址

> ID：13630648
> 
> 赞同：0
> 
> 时间：2012-11-29T16:49:56.070
> 
> 标签：c++, qt, youtube

我正在尝试编写简单的应用程序来从 youtube 下载视频。
我获取文件的代码 (http://www.youtube.com/watch?v=pViMzR_ylXg) 如下所示：

```
bool FD_core::get_file()
{
    QNetworkRequest request;

    request.setUrl(QUrl("http://www.youtube.com/watch?v=pViMzR_ylXg"));
    connect(network_access_manager_, SIGNAL(finished(QNetworkReply*)),
    this, SLOT(onRequestCompleted(QNetworkReply *)));
    network_access_manager_->get(request);
    return true;
}

void FD_core::onRequestCompleted(QNetworkReply * reply)
{
    QByteArray data_ = reply->readAll();
    cout << data_.constData();
    qDebug() << "size: " << data_.size();
} 
```

在上面的函数中 data_.constData() 产生大量文本，其中一部分（非常小）：

```
<!DOCTYPE html>
  <html lang="en" dir="ltr" >

<head>
      <script>
var yt = yt || {};yt.timing = yt.timing || {};yt.timing.tick = function(label, opt_time) {var timer = yt.timing['timer'] || {};if(opt_time) {timer[label] = opt_time;}else {timer[label] = new Date().getTime();}yt.timing['timer'] = timer;};yt.timing.info = function(label, value) {var info_args = yt.timing['info_args'] || {};info_args[label] = value;yt.timing['info_args'] = info_args;};yt.timing.info('e', "907050,906359,927900,919320,914021,916611,922401,920704,912806,927201,925706,928001,922403,913546,913556,920201,911116,901451");yt.timing.wff = true;yt.timing.info('pr', "1");yt.timing.info('an', "dclk,aftv,afv");if (document.webkitVisibilityState == 'prerender') {document.addEventListener('webkitvisibilitychange', function() {yt.timing.tick('start');}, false);}yt.timing.tick('start');yt.timing.info('li','0');try {yt.timing['srt'] = window.gtbExternal && window.gtbExternal.pageT() ||window.external && window.external.pageT;} catch(e) {}if (window.chrome && window.chrome.csi) {yt.timing['srt'] = Math.floor(window.chrome.csi().pageT);}if (window.msPerformance && window.msPerformance.timing) {yt.timing['srt'] = window.msPerformance.timing.responseStart - window.msPerformance.timing.navigationStart;}    </script>

<script>var yt = yt || {};yt.preload = {};yt.preload.counter_ = 0;yt.preload.start = function(src) {var img = new Image();var counter = ++yt.preload.counter_;yt.preload[counter] = img;img.onload = img.onerror = function () {delete yt.preload[counter];};img.src = src;img = null;};yt.preload.start("http:\/\/o-o---preferred---sn-xn5ucu-q0ce---v3---lscache7.c.youtube.com\/crossdomain.xml");yt.preload.start("http:\/\/o-o---preferred---sn-xn5ucu-q0ce---v3---lscache7.c.youtube.com\/generate_204?ip=95.83.224.63\u0026upn=A3aUhLYV55M\u0026sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire\u0026fexp=907050%2C906359%2C927900%2C919320%2C914021%2C916611%2C922401%2C920704%2C912806%2C927201%2C925706%2C928001%2C922403%2C913546%2C913556%2C920201%2C911116%2C901451\u0026mt=1354207274\u0026key=yt1\u0026algorithm=throttle-factor\u0026burst=40\u0026ipbits=8\u0026itag=34\u0026sver=3\u0026signature=692E605215EB4D2CA407291CA26E14B844768A89.7A2930CE25FDDFC7C4FF5AA56DD02538B0020267\u0026mv=m\u0026source=youtube\u0026ms=au\u0026gcr=ie\u0026expire=1354228237\u0026factor=1.25\u0026cp=U0hUSVJNVl9IUUNONF9KR1pDOi0tSFhhRzVFRkd6\u0026id=a5588ccd1ff29578");</script><title>Die Antwoord - Fok Julle Naaiers (Mike Tyson&#39;s Words NOT DJ Hi-Teks) - YouTube</title><link rel="search" type="application/opensearchdescription+xml" href="http://www.youtube.com/opensearch?locale=en_US" title="YouTube Video Search"><link rel="icon" href="http://s.ytimg.com/yts/img/favicon-vfldLzJxy.ico" type="image/x-icon"><link rel="shortcut icon" href="http://s.ytimg.com/yts/img/favicon-vfldLzJxy.ico" type="image/x-icon">   <link rel="icon" href="//s.ytimg.com/yts/img/favicon_32-vflWoMFGx.png" sizes="32x32"><link rel="canonical" href="/watch?v=pViMzR_ylXg"><link rel="alternate" media="handheld" href="http://m.youtube.com/watch?v=pViMzR_ylXg"><link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.youtube.com/watch?v=pViMzR_ylXg"><link rel="shortlink" href="http://youtu.be/pViMzR_ylXg">    <meta name="title" content="Die Antwoord - Fok Julle Naaiers (Mike Tyson&#39;s Words NOT DJ Hi-Teks)">

    <meta name="description" content="Some of the lyrics of &quot;Die Antwoord&quot; new single &quot;Fok Julle Naaiers&quot; have caused such controversy that Die Antwoord have split with their record label Intersc...">

    <meta name="keywords" content="Die Antwoord, Fok Julle Naaiers, Mike Tyson, DJ Hi-Tek, Faggot">

    <link rel="alternate" type="application/json+oembed" href="http://www.youtube.com/oembed?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DpViMzR_ylXg&amp;format=json" title="Die Antwoord - Fok Julle Naaiers (Mike Tyson&#39;s Words NOT DJ Hi-Teks)">
  <link rel="alternate" type="text/xml+oembed" href="http://www.youtube.com/oembed?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DpViMzR_ylXg&amp;format=xml" title="Die Antwoord - Fok Julle Naaiers (Mike Tyson&#39;s Words NOT DJ Hi-Teks)">

      <meta property="og:url" content="http://www.youtube.com/watch?v=pViMzR_ylXg">
    <meta property="og:title" content="Die Antwoord - Fok Julle Naaiers (Mike Tyson&#39;s Words NOT DJ Hi-Teks)">
    <meta property="og:description" content="Some of the lyrics of &quot;Die Antwoord&quot; new single &quot;Fok Julle Naaiers&quot; have caused such controversy that Die Antwoord have split with their record label Intersc...">
    <meta property="og:type" content="video">
    <meta property="og:image" content="http://i1.ytimg.com/vi/pViMzR_ylXg/mqdefault.jpg">
      <meta property="og:video" content="http://www.youtube.com/v/pViMzR_ylXg?version=3&amp;autohide=1">
      <meta property="og:video:type" content="application/x-shockwave-flash">
      <meta property="og:video:width" content="853">
      <meta property="og:video:height" content="480">
    <meta property="og:site_name" content="YouTube">
    <meta property="fb:app_id" content="87741124305">
    <meta name="twitter:card" value="player">
    <meta name="twitter:site" value="@youtube">
      <meta name="twitter:player" value="https://www.youtube.com/embed/pViMzR_ylXg">
      <meta property="twitter:player:width" content="853">
      <meta property="twitter:player:height" content="480"> 
```

所以我的问题是，这个文件中隐藏的 url 允许我下载想要的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:01:37.340

1.  您正在尝试做的可能是违反 youtube 的服务条款。

2.  另请检查[youtube-dl](http://rg3.github.com/youtube-dl/)。

3.  还有可用的[Youtube API](https://developers.google.com/youtube/getting_started)。

# wordpress - 如何在 wordpress 中停止对档案的 URL 重写

> ID：13630649
> 
> 赞同：1
> 
> 时间：2012-11-29T16:49:58.793
> 
> 标签：wordpress, .htaccess, url-rewriting, rewrite

我正在为 wordpress 博客设置 url 重写以从 url (www.example.com/2012/08/postname) 中删除所有日期。我不得不通过 h​​taccess 来完成，因为它是针对已建立博客的新设计，并且通过 htaccess 来完成，也会更改帖子中的链接（例如，如果作者链接到另一篇文章，他使用 www.example.com/2012 /07/邮政名）。所以简单地调整后端的永久链接是行不通的。

我已经使用此代码来创建重写：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RedirectMatch 301 ^/([0-9]{4})/([0-9]{2})/(.*)$  http://www.example.com/$3
</IfModule> 
```

现在，我的档案停止工作，因为它们的网址类似于 www.example.com/2012/08/。有没有办法仅在 url 仅包含日期的情况下停止重写规则（例如 www.example.com/2012/08/），但继续重写所有包含日期​​的帖子（例如 www.example.com/2012/ 08/posttitle)?

# css - 检测不同桌面显示器的宽度以进行响应式设计

> ID：13630654
> 
> 赞同：0
> 
> 时间：2012-11-29T16:50:09.207
> 
> 标签：css, responsive-design, media-queries

嗨，我正在尝试学习如何编写 CSS 媒体查询，但一开始我几乎迷路了！如您所知，有几种尺寸的显示器，例如

11", 13", 14", 15", 17", 22", 24", 27"

现在我的问题是如何找到所有这些显示器的标准宽度，以及如何在一些媒体查询中检测它们的宽度，这些查询可以涵盖从最大到最小的所有尺寸。我已经找到CSS-TRICKS 的这个链接“[标准设备的媒体查询”，用于标准便携式移动设备，但也需要一些用于桌面显示器的东西吗？](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:53:49.653

媒体查询基于像素尺寸，而不是英寸。

您将无法针对所有设备的所有维度，每天都有太多的设备进入市场。

采用与设备无关的响应式布局方法来定位多个维度和设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:56:38.617

正如 Lokase 所说，媒体查询是基于像素尺寸的。

特定的显示器尺寸并不意味着特定的像素尺寸，因为您可以使用 1024x768、1920x1200 ……例如所有 22 英寸的屏幕尺寸。

如果您对响应式设计感兴趣（媒体查询主要用于此），我建议您寻找“断点”而不是“屏幕尺寸”:)

# jquery - jQuery FadeIn/FadeOut DOM 元素滑块

> ID：13630661
> 
> 赞同：0
> 
> 时间：2012-11-29T16:50:30.863
> 
> 标签：jquery, dom, slider

我正在寻找创建一个定制的滑块并需要一些帮助。理论上应该比较简单。我让它看起来非常困难。

我创建了两个按钮 - #prev-btn 和 #next-btn，我希望它们在三个 DOM 元素“幻灯片”之间切换。目前你会尖叫着让我使用幻灯片插件。但是，问题在于这些实际上并不是幻灯片，而是分散在页面周围的 DOM 元素，我想通过淡入/淡出来打开/关闭它们。

我已经给出了我想要显示名为“.first”、“.second”和“.third”的类的每个 DOM 元素，以对应于我希望它们显示的“阶段”。

```
<div id="1" class="first"></div>
<div id="2" class="second"></div>
<div id="3" class="third"></div>

.second, .third {display: none;} 
```

显然，当显示 .first 对象时，#prev-btn 应该淡出 .first 对象和淡入 .third 类。此外，当 .first 对象可见时，#next-btn 应该淡出 .first 对象并显示 .second 类。你明白了。这是我正在努力的一点。

我对 addClass 和 removeClass 有过一些麻烦，但如果不对添加到 #prev-btn 和 #next-btn 的每个类重复单击功能，我似乎无法想出一个优雅的解决方案。我们都知道这很荒谬（下面是费力荒谬的代码示例）。

```
$j("#prev-btn.first").click(function(){
    $j("#prev-btn").addClass('third').removeClass('first');
    $j("#next-btn").addClass('third').removeClass('first');
    $j(".first").fadeOut(500, function(){
        $j(".third").fadeIn(500);
    });
});
$j("#next-btn.first").click(function(){
    $j("#prev-btn").addClass('second').removeClass('first');
    $j("#next-btn").addClass('second').removeClass('first');
    $j(".first").fadeOut(500, function(){
        $j(".second").fadeIn(500);
    });
}); 
```

所以，正如你从这些废话中看出的那样，我还不是 jQuery 中最耀眼的火花，还不能做聪明的事情，所以提前为帮助欢呼！如果有人也可以在其中实现自动滑动计时器，那么哇 - 哇。但这不是 100% 必要的。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:32:33.950

```
elem = ['first', 'second', 'third'];
var current = 0, previous = 0, n_elem = elem.length;
function change() {
    $j("." + elem[previous]).fadeOut(500, function(){
        $j("."+elem[current]).fadeIn(500);
    });
}
$j("#prev-btn").click(function(){
    previous = current;
    --current;
    if(current === -1) {
        current = n_elem - 1;
    }
    change();
});
$j("#next-btn").click(function(){
    previous = current;
    ++current;
    if(current == n_elem) {
        current = 0;
    }
    change();
}); 
```

# maven - 是否可以在不应用任何捆绑的情况下使用 wro4j 解析文件并生成“sass”版本的 css？

> ID：13630662
> 
> 赞同：1
> 
> 时间：2012-11-29T16:50:31.593
> 
> 标签：maven, configuration, sass, bundling-and-minification, wro4j

作为 Maven 构建的一部分，我们尝试在 CSS 文件上运行 SASS 解析器，但不希望在 Maven 生命周期的这个阶段同时将它们捆绑在一起。

但是，如果不将每个单独的文件指定为其自己的 bundlem，我看不到使用 wro4J 执行此操作的简单方法，这感觉不对。我是否错过了一些配置，或者在 wro4J 设计的核心中捆绑了太多以至于必须像这样使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T02:41:10.107

> wro4j 尚不支持此功能，但计划将来添加。同时，您可以将 SassCssProcessor 与自定义 maven 插件一起使用，该插件仅将处理器应用于配置文件夹中的每个资源。描述您需要的功能的问题的链接：[https ://github.com/wro4j/wro4j/issues/583](https://github.com/wro4j/wro4j/issues/583)

# android - Android：将本地资产 XML 加载为 URL

> ID：13630668
> 
> 赞同：0
> 
> 时间：2012-11-29T16:50:56.047
> 
> 标签：android, parsing, url

我正在使用本教程使用自定义列表视图：

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

我在尝试修改它时遇到了问题。如果我想使用本地 android_assets 而不是从 Web 链接加载的 XML 文件，我的应用程序会崩溃。我正在做的是改变这一行：

```
 static final String URL = "http://api.androidhive.info/music/music.xml"; 
```

对此：

```
 static final String URL = "file:///android_asset/music.xml"; 
```

但是当我这样做时，我的应用程序在这条线上崩溃：

```
 String xml = parser.getXmlFromUrl(URL); // getting XML from URL 
```

任何帮助都是极好的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:12:44.960

如果您的资产文件夹中有 xml 文件，请尝试以下操作：

```
public String getStringFromAssets(Context ctx, String pathToFile)
{   
    InputStream rawInput;
    String text = "";

    try 
    {
        rawInput = ctx.getAssets().open(pathToFile);
        text = convertStreamToString(rawInput);

    } catch (IOException e) 
    {
        e.printStackTrace();
    }

    return text;  
}

String xml = getStringFromAssets(getApplicationContext(), "WhateverYourXmlFileNameIs"); 
```

希望有帮助。

# node.js - 获取对象数组中每个嵌套对象的虚拟属性？

> ID：13630674
> 
> 赞同：13
> 
> 时间：2012-11-29T16:51:06.713
> 
> 标签：node.js, mongodb, express, mongoose

所以我知道如何获取单个虚拟属性，如猫鼬文档中所述：

```
PersonSchema
 .virtual('name.full')
 .get(function () {
   return this.name.first + ' ' + this.name.last;
}); 
```

但是，如果我的架构是：

```
var PersonSchema = new Schema({
    name: {
      first: String
    , last: String
    },

    arrayAttr: [{
      attr1: String,
      attr2: String
    }]
}) 
```

我想为arrayAttr中的每个嵌套对象添加一个虚拟属性：

```
PersonSchema.virtual('arrayAttr.full').get(function(){
    return attr1+'.'+attr2;
}); 
```

让我知道我是否在这里错过了什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T18:15:37.430

您需要为元素定义一个单独的模式`attrArray`并将虚拟属性添加到该模式。

```
var AttrSchema = new Schema({
    attr1: String,
    attr2: String
});
AttrSchema.virtual('full').get(function() {
    return this.attr1 + '.' + this.attr2;
});

var PersonSchema = new Schema({
    name: {
      first: String
    , last: String
    },
    arrayAttr: [AttrSchema]
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-14T09:32:59.823

当然，你可以定义一个额外的模式，但是 mongoose 已经为你做了这个。

它存储在

```
PersonSchema.path('arrayAttr').schema 
```

因此，您可以通过将其添加到此架构来设置虚拟

```
PersonSchema.path('arrayAttr').schema.virtual('full').get(function() {
  return this.attr1 + '.' + this.attr2
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-16T14:12:58.937

如果您想从所有数组元素中计算出值，这里有一个示例：

```
const schema = new Schema({
    name:         String,
    points: [{
        p:      { type: Number, required: true },
        reason: { type: String, required: true },
        date:   { type: Date,   default: Date.now }
    }]
});

schema.virtual('totalPoints').get(function () {
    let total = 0;
    this.points.forEach(function(e) {
        total += e.p;
    });
    return total;
});

User.create({
    name:   'a',
    points: [{ p: 1, reason: 'good person' }]
})

User.findOne().then(function(u) {
    console.log(u.toJSON({virtuals: true}));
}); 
```

返回：

```
{ _id: 596b727fd4249421ba4de474,
  __v: 0,
  points:
   [ { p: 1,
       reason: 'good person',
       _id: 596b727fd4249421ba4de475,
       date: 2017-07-16T14:04:47.634Z,
       id: '596b727fd4249421ba4de475' } ],
  totalPoints: 1,
  id: '596b727fd4249421ba4de474' } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:51:40.527

首先你应该写

`this.some_attr`代替`some_attr`

而且您无法访问 this.attr，因为在 arrayAttr 中有。所以你可以做例如：

```
this.arrayAttr[0].attr1 + "." + this.arrayAttr[0].attr2 
```

**这是不安全的，因为 arrayAttr 可以为空**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-25T15:09:44.443

我最喜欢的解决方案是直接引用嵌套模式。

```
PersonSchema.paths.arrayAttr.schema.virtual('full').get(function() {
  return this.attr1 + '.' + this.attr2;
}); 
```

还需要注意的重要一点是，mongoose 模式默认不返回虚拟值。因此，请确保在嵌套模式上设置字符串化属性。

```
var options = { virtuals: true };
PersonSchema.paths.arrayAttr.schema.set('toJSON', options); 
```

# c# - Azure 表随机返回空值

> ID：13630682
> 
> 赞同：3
> 
> 时间：2012-11-29T16:51:28.690
> 
> 标签：c#, .net, azure, azure-table-storage

我在 C# 中有下一段代码：

```
 var results = from g in this.context.MyStorageEventTable
                      where g.PartitionKey == partitionKey
                            && g.EventType == "MyEvent"
                      select g;
        var ev = results.FirstOrDefault(); 
```

这对 Azure 表进行了咨询。该表包含超过 20000 个实体。问题是有时变量 ev 有一个空值，有时有实体对象。这是随机发生的。我知道该对象存在于表中，所以空值是错误的行为。为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:03:16.157

试试`results.AsTableServiceQuery().FirstOrDefault()`。如果这样可行，则问题是查询返回了一个延续令牌，表明还有更多数据，但您没有发出后续查询来跟踪该延续令牌并获取其余数据。您应该始终使用`AsTableServiceQuery()`免费获得持续令牌关注。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T09:24:55.987

而是尝试：

```
results.take(1).AsTableServiceQuery().execute().firstOrDefault() 
```

您遇到的问题是由于`firstordefault`将查询转换为错误的类型引起的。

take 1 只要求 azure 中的 1 行以提高效率以配合您的`firstordefault`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T10:20:44.540

如果问题仍然存在，请尝试：

```
results.AsTableServiceQuery().Take(1).ToArray().FirstOrDefault() 
```

我遇到了类似的问题，这个解决方案对我有用。当找到结果实体或不返回任何继续标记时，此查询将跟随继续标记。

results.AsTableServiceQuery().FirstOrDefault() 也应该遵循延续标记，但它不这样做。这是一个奇怪的行为，它也会影响 First()、Single() 和 SingleOrDefault()。在所有这些情况下，明确地期望单个实体并且不遵循延续令牌。仅当预期结果是一个集合时才这样做。

# python - Django用对象自己的数据建模多个更新？

> ID：13630685
> 
> 赞同：7
> 
> 时间：2012-11-29T16:51:39.053
> 
> 标签：python, django, django-models

我在 django 文档中看到了执行多个对象更新的代码，例如

```
Entry.objects.filter(pub_date__year=2010).update(comments_on=False) 
```

有没有办法通过更新每个对象的值来更新多个对象？例如，在用户已阅读的所有文章中添加一篇

```
# so it does something like this?
Entry.objects.filter(user_has_read).update(views+=1) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T16:52:52.707

是的，通过使用[F() 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)：

```
from django.db.models import F

Entry.objects.filter(user_has_read).update(views=F('views') + 1) 
```

请参阅[更新多个对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)，倒数第二段。

# nhibernate - NHibernate 2 级缓存不会使同一表上的实体映射无效

> ID：13630694
> 
> 赞同：1
> 
> 时间：2012-11-29T16:52:05.600
> 
> 标签：nhibernate, appfabric, second-level-cache

我使用 NHibernate 3.2 和 appfabric 1.1 作为二级缓存。我有 2 个类映射在同一张桌子上。第一个类**AFullEntity**（示例中的MonitorLayoutData），继承了第二个轻量级类（MonitorLayout）。MonitorLayoutData 包含基类中不存在的重属性。例如 ：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="Entities.MonitorLayout,Entities" table="MonitorLayouts2" lazy="false" schema="dbo" polymorphism="explicit">
    <cache usage="nonstrict-read-write"/>
    <id name="Id" column="MonitorLayout_ID" type="int">
      <generator class="native" />
    </id>
    <property name="Name" column="MonitorLayout" type="string" />
    <property name="UserId" column="User_ID" type="int" />
    <property name="IsPublic" column="IsPublic" type="Boolean" not-null="true" />
    <property name="ViewGuid" column="ViewGuid" type="string" not-null="true" />
    <property name="TreeNode" column="TreeNode" type="string" />
    <property name="IncludeNodeChildren" column="IncludeNodeChildren" type="Boolean" />

  </class>

  <class name="Entities.MonitorLayoutData,Entities" table="MonitorLayouts2" lazy="false" schema="dbo" polymorphism="explicit">
    <cache usage="nonstrict-read-write"/>
    <id name="Id" column="MonitorLayout_ID" type="int">
      <generator class="native" />
    </id>
    <property name="Name" column="MonitorLayout" type="string" />
    <property name="UserId" column="User_ID" type="int" />
    <property name="IsPublic" column="IsPublic" type="Boolean" not-null="true" />
    <property name="ViewGuid" column="ViewGuid" type="string" not-null="true" />
    <property name="TreeNode" column="TreeNode" type="string" />
    <property name="IncludeNodeChildren" column="IncludeNodeChildren" type="Boolean" />
    <property name="LayoutData" column="LayoutData" type="BinaryBlob" not-null="false"/>
  </class>
</hibernate-mapping> 
```

这些类使用显式多态性来仅检索所选类型的实体，如文档中的注释：“当两个不同的类映射到同一个表时，显式多态性很有用（这允许包含表子集的“轻量级”类）列）”。

但是，当实体被缓存时，我遇到了问题。当我更新 AFullEntity 时，轻量级类中不会报告更改，这对我们来说是个大问题。我尝试了其他机制，如子类或扩展，但 NHibernate 强制我声明一个鉴别器元素，这对我来说不是必需的。

**有没有办法做到这一点 ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:07:33.120

不，它们是两个独立的对象，每个对象在缓存中都有自己的身份。可能的解决方法是禁用轻量对象的缓存或在加载重对象时从缓存中逐出轻量对象。在我看来，在同一会话中加载重物和轻物似乎违背了目的。

# r - 取消分类数据框上的 x 选项卡

> ID：13630699
> 
> 赞同：4
> 
> 时间：2012-11-29T16:52:21.130
> 
> 标签：r

我在 R 中有以下数据框

```
 LOCATION COLOR  STATE
1 A        green  fresh
2 A        red    rotten
3 B        green  fresh
4 B        green  fresh
5 C        red    fresh
6 C        green  rotten 
```

可以使用以下脚本在 R 中创建上述数据框

```
dat <- read.table(text = "LOCATION COLOR STATE
1 A green fresh
2 A red rotten
3 B green fresh
4 B green fresh
5 C red fresh
6 C green rotten",header = TRUE,sep = "",row.names = 1) 
```

我正在尝试重新排列我的数据框以获得以下输出

```
 LOCATION COLOR ROTTEN FRESH
1 A        red    1      0
2 A        green  0      1
3 B        red    0      0
4 B        green  0      2
5 C        red    0      1
6 C        greed  1      0 
```

我正在尝试使用以下代码执行此操作

```
dat <- as.data.frame(unclass(xtabs(~ LOCATION  + COLOR + STATE,dat))) 
```

这给了我

```
 green.fresh   red.fresh  green.rotten red.rotten
1  A            1           0            0          1
2  B            2           0            0          0
3  C            0           1            1          0 
```

如您所见，我非常接近所需的格式，但我不确定如何使当前的输出与所需的输出相匹配。任何想法或提示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T17:00:25.623

我确信有一种方法可以做到这一点，`xtabs`但我倾向于使用`dcast`：

```
library(reshape2)
dcast(dat,LOCATION+COLOR~STATE,
      fun.aggregate = length,value.var = "STATE",drop = FALSE)
  LOCATION COLOR fresh rotten
1        A green     1      0
2        A   red     0      1
3        B green     2      0
4        B   red     0      0
5        C green     0      1
6        C   red     1      0 
```

更新为包括所需输出中所示的缺失变量组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:57:11.190

**我猜想，效率比@joran**的解决方案低得多——当然可读性要低得多（但在“事情就是这样工作”的方式中仍然很有趣）如果你想从`xtabs`到一个`data.frame`：

```
temp <- xtabs(~ LOCATION  + COLOR + STATE, dat)
data.frame(expand.grid(rev(attr(ftable(temp), "row.vars"))),
           setNames(as.data.frame.matrix(ftable(temp)), 
                    rev(attr(ftable(temp), "col.vars")$STATE)))
#   COLOR LOCATION rotten fresh
# 1 green        A      1     0
# 2   red        A      0     1
# 3 green        B      2     0
# 4   red        B      0     0
# 5 green        C      0     1
# 6   red        C      1     0 
```

哎哟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:31:25.683

```
aggregate(cbind(FRESH,ROTTEN)~LOCATION+COLOR,
  data=transform(dat,FRESH=1L*(STATE=="fresh"),ROTTEN=1L*(STATE=="rotten")),
  FUN=sum)

  LOCATION COLOR FRESH ROTTEN
1        A green     1      0
2        B green     2      0
3        C green     0      1
4        A   red     0      1
5        C   red     1      0 
```

# c# - .net中的方法和函数有什么区别

> ID：13630701
> 
> 赞同：0
> 
> 时间：2012-11-29T16:52:25.367
> 
> 标签：c#, oop, class, c#-4.0, c#-3.0

我在谷歌上搜索方法和函数之间的区别，我得到了两个答案。

## 答案-1

方法是非返回类型，如下所示

```
void Method()
{
} 
```

其中 Function 是返回类型，如下所示

```
int Method()
{
} 
```

## 答案 - 2

这两个术语之间没有区别。

查询 - 哪个是正确的或有任何第三件事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:54:20.557

没有区别。

在 c# 和 java 中，您通常称它们为方法。在 javascript 和 c++ 中，它们通常被称为函数

无论哪种方式，人们都会知道你的意思

至于答案 1，如果我是一个全新的程序员，并且被要求推测差异，那么答案 1 可能就是我想出的。给定函数的数学定义为您的输入准确地确定您的输出的过程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:56:14.567

我认为您真正要问的是 C# 中的函数和动作（两者都是方法）之间的区别是什么。

区别与 void 的处理方式有关：这很好地解释了它[https://softwareengineering.stackexchange.com/questions/131036/why-is-void-not-allowed-as-a-generic-type-in ​​- C](https://softwareengineering.stackexchange.com/questions/131036/why-is-void-not-allowed-as-a-generic-type-in-c)

我将完整发布 Eric Lippert 的答案以节省点击：

> “void”的根本问题在于它与任何其他返回类型的含义不同。“void”表示“如果此方法返回，则它根本不返回任何值”。不为空；null 是一个值。它不返回任何值。
> 
> 这真的弄乱了类型系统。类型系统本质上是一个对特定值有效的操作进行逻辑推论的系统。一个 void 返回方法不返回一个值，所以问题是“什么操作对这个东西有效？” 根本没有任何意义。没有“事物”可以进行有效或无效的操作。
> 
> 而且，这会破坏运行时的某些东西。.NET runtine 是虚拟执行系统的实现，它被指定为堆栈机器。也就是说，一个虚拟机，其中所有操作都根据它们对评估堆栈的影响来表征。（当然，在实践中，机器将在具有堆栈和寄存器的机器上实现，但虚拟执行系统只假设一个堆栈。）调用 void 方法的效果与调用 void 方法的效果根本不同非空方法；非 void 方法总是将一些东西放在堆栈上，这可能需要弹出。一个 void 方法永远不会把东西放在堆栈上。因此，在忽略方法的返回值的情况下，编译器不能将 void 和非 void 方法视为相同；
> 
> 由于所有这些原因，“void”不是可以实例化的类型。它没有价值，这就是它的全部意义。它不能转换为对象，并且 void 返回方法永远不能用非 void 返回方法进行多态处理，因为这样做会破坏堆栈！
> 
> 因此， void 不能用作类型参数，正如您所指出的那样，这是一种耻辱。这将非常方便。
> 
> 事后看来，如果一个返回 void 的方法自动返回“Unit”，一种神奇的单例引用类型，而不是什么都没有，这对所有相关人员来说会更好。然后你会知道每个方法调用都会在堆栈上放置一些东西，你会知道每个方法调用都会返回一些可以分配给对象类型变量的东西，当然 Unit 可以用作类型参数，所以会有不需要有单独的 Action 和 Func 委托类型。可悲的是，这不是我们所处的世界。
> 
> 有关这方面的更多想法，请参阅
> 
> [http://blogs.msdn.com/b/ericlippert/archive/2009/06/29/the-void-is-invariant.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/06/29/the-void-is-invariant.aspx)
> 
> 和
> 
> [http://blogs.msdn.com/b/ericlippert/archive/2011/02/21/never-say-never-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/02/21/never-say-never-part-one.aspx)
> 
> 和
> 
> [http://blogs.msdn.com/b/ericlippert/archive/2011/11/28/why-have-a-stack.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/11/28/why-have-a-stack.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:56:09.153

这两个术语之间没有区别。它们的含义是可以互换的。

我发现在处理非托管代码（C/C++）时，人们会将它们称为函数。但是在处理托管代码（C#/java）时，人们会将它们称为方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T17:02:15.577

这实际上取决于术语。第一个答案没有错，但有些人也不会认为它是 100% 正确的，这个词的使用`function`往往是方法返回的地方。

因此，在底层方法中，您可以执行以下操作：

```
void DoSomething()
{
   int i = Sum(1, 2);
} 
```

然后有一个返回方法，可以确定为一个函数：

```
int Method(int i, int j)
{
   return i + j;
} 
```

因此，要回答您的问题，两者都不正确。这是您对它们的解释方式，因为许多开发人员确实倾向于改变他们所说的内容。然而，VB.Net 确实使用`Sub`and `Function`for 方法，因此如果您有`VB.Net`背景，您可以将返回方法称为函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T17:27:20.857

在 .NET 中，这些术语几乎是同义词，但在 JavaScript 等语言中，它们的含义可能略有不同。一个（js 术语）示例是方法通常是包含函数的对象属性。

您也可以在这里声明的差异作为函数是指独立的功能单元，而方法被定义为类的成员。在。NET 中，您通常会听到比“函数”更频繁地使用“方法”一词（但它们确实有，恰当地命名为“匿名函数”）。

这里还有一个关于[功能和方法差异](https://stackoverflow.com/questions/155609/what-is-the-difference-between-a-method-and-a-function)的问题，您可能想查看更多详细信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T16:54:32.007

这两个术语之间没有区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T16:55:15.297

一直以为是Answer 1，我无耻地用它，偶尔也可以互换使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-29T17:06:53.943

我`Answer 1`在 Pascal 中遇到过类似的情况，人们将 void 方法称为*procedure*和具有返回类型*functions*的方法。

在 C# 中，*通常*两者都称为方法。术语*函数*通常*是为***[代表](http://www.codeproject.com/Articles/11657/Understanding-Delegates-in-C)**保留的，*通常*分为**[函数](http://www.dotnetperls.com/func)**和**[动作](http://www.dotnetperls.com/action)**——在那里你可以`Answer 1`再次找到与你相似的术语。

我故意多次使用“*通常”这个词，因为人们经常从其他语言中引入术语，但我写的是我在***[C# 4.0 Unleashed](https://rads.stackoverflow.com/amzn/click/com/0672330792)**等印刷 C# 文献中最常遇到的东西。

# graph - Graphite UI 数据默认累积

> ID：13630703
> 
> 赞同：3
> 
> 时间：2012-11-29T16:52:29.097
> 
> 标签：graph, graphite, statsd

我正在设置 Graphite，当没有足够的像素时，遇到了如何在屏幕上表示数据的问题。

我发现[这篇文章](https://answers.launchpad.net/graphite/+question/161034)的第一个答案非常接近我正在寻找的内容：

> 没有可能发生的事情是您正在查看一个数据点多于像素的图形，这迫使 Graphite 聚合数据点。默认聚合方法是平均，但您可以通过将累积（）函数应用于指标来将其更改为求和。

默认情况下有没有办法获得这种累积（）行为？

我已经修改了我的 storage-aggregation.conf 以使用 'aggregationMethod = sum'，但我相信这是用于历史数据而不是 UI 中显示的数据。

当我应用累积（）时，一切都很完美，我只是想知道是否有办法默认获得这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:38:37.350

我猜即使您已将 storage-aggregation.conf 修改为使用“aggregationMethod = sum”，但您已经创建的指标并没有更改它们的 aggregationMethod。storage-aggregation.conf 中的规则仅影响新指标。

要将现有指标更改为求和而不是平均，您需要使用 Whisper-resize.py。或者，您可以删除现有指标，然后使用 sum 重新创建它们。

这是您可能需要运行的示例：

```
whisper-resize.py --xFilesFactor=0.0 --aggregationMethod=sum /opt/graphite/storage/whisper/stats_counts/path/to/your/metric.wsp 10s:28d 1m:84d 10m:1y 1h:3y 
```

确保以拥有该文件的同一用户身份运行它，或者至少确保完成后文件具有相同的所有权，否则它们将无法写入新数据。

如果您使用 statsd，另一种可能性是您只是在 stats 下使用指标而不是 stats_counts。从[statsd 自述文件](https://github.com/etsy/statsd)：

> 在传统设置中，比率直接记录在 stats.counter_name 下，而绝对计数可以在 stats_count.counter_name 下找到。通过禁用旧命名空间，现在可以在 stats.counters.counter_name.rate 和 stats.counters.counter_name.count 下找到这些值（带有默认前缀）。

基本上，使用 statsd 时，指标在不同命名空间下的聚合方式不同，并且您需要 stats_count 或 stats.counters 下的内容来获取应该相加的内容。

# jquery - 多个 jQueryUI 选项卡内的 StickyScroll

> ID：13630705
> 
> 赞同：1
> 
> 时间：2012-11-29T16:52:34.997
> 
> 标签：jquery, jquery-ui, jquery-plugins

我试图让 jQueryUI 选项卡中的 div 元素在一个选项卡中滚动它可以工作，但是当我有多个选项卡时，它会获得很大的偏移量或不再滚动。

[http://kitchen.net-perspective.com/open-source/scroll-follow/](http://kitchen.net-perspective.com/open-source/scroll-follow/) 这是我用来在滚动时将 div 保持在屏幕内和 tabcontent 内的插件。

任何人都可以确认这个问题或知道另一个在 UI 选项卡中效果更好的插件吗？

# ruby - 为什么 Ruby 包含多个打印函数？

> ID：13630706
> 
> 赞同：0
> 
> 时间：2012-11-29T16:52:36.547
> 
> 标签：ruby

在完成 Ruby Codecademy 练习时，我遇到了 puts() 和 print()。不同之处在于一个添加换行符而另一个不添加。这是经过深思熟虑的设计决策，还是只是不断发展的代码？对此有两个（名称完全不同的）函数对我来说似乎很奇怪。为什么不增加一个论点或其他解决方案呢？

编辑：澄清一下，我最感兴趣的是为什么选择这些特定名称，因为它们似乎与功能差异无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:21:47.377

我一直认为它来自 C，在那里你可以`puts`打印带有新行的字符串，以及`printf`按类型（但没有新行）打印带有插值的字符串。

同样，在 Ruby 中你有`puts`which 做同样的事情，并`print`使用 #{} 进行插值。与 C 的区别显然是插值直接内置在字符串中，并且可以在 print 语句中或之外使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:15:34.310

我认为这是因为 Ruby 是面向 unix 的，它继承了一些奇怪的东西。特别是，由于终端是面向行的，即用户输入一行，然后程序以行响应，用户输入一行，......，它是如此频繁以至于你想在打印出一些东西时结束这一行，因此有`puts`。但是，在某些情况下（不那么频繁）您不想结束一行，这就是为什么存在`print`.

虽然我不觉得同时拥有`print`和`puts`不自然，但我确实觉得`puts`被认为比 更基本的不自然`print`，并且在 Ruby 的介绍性文档中，几乎总是`puts`在开头介绍，但`print`几乎没有解释。既然`print`是比较初级的操作，而且`puts`是建立在它之上的，而且速度较慢，所以教科书应该`print`先介绍，然后再说那`puts`是`print "...#$/"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:01:47.230

我认为这只是为了方便，因为用换行符打印一行是日常开发中相当常见的任务。

例如，在 Perl 语言中，他们在 1997 年用 Perl 5.10 显式引入了 say() 函数（相当于 ruby​​ 的 puts），而 Perl 已经存在了很长时间。:-)

# xml - 使用 AS3 从 XML 中获取随机数据，不重复

> ID：13630707
> 
> 赞同：0
> 
> 时间：2012-11-29T16:52:38.550
> 
> 标签：xml, actionscript-3, random

我仍在努力使用 Actionscript 3.0 从 XML 文件中加载随机数据，而没有重复以前的场地。

基本上，当我单击舞台上的按钮时，我希望我的 xml 中的随机场地显示在舞台上的动态文本框中。我的**XML**位于[http://pastebin.com/0qMMkfCs](http://pastebin.com/0qMMkfCs)

最好不创建数组直接访问数据！

当然有人知道如何正确地做到这一点。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:06:02.780

好的，此编辑将显示如何确保它们都随机出现一次：

```
private var xmlLoader:URLLoader = new URLLoader();
private var myLoadedXML:XML;
private var venues:XMLList;

public function getAnotherRandomVenue():XML{
    if(venues.length() > 0){
        var random:Number = Math.floor(Math.random() * (venues.length()-1));
        var thisRandomVenue:XML = new XML(venues[random]);
        delete venues[random];
        return thisRandomVenue;
    }
    return null;
}

public function loadItUP():void{
    xmlLoader.addEventListener(Event.COMPLETE, onXMLLoaded);
    xmlLoader.load(new URLRequest("http://path.to.venuesXML.xml"));
}

private function onXMLLoaded(e:Event):void {
    myLoadedXML = new XML(e.target.data);
    venues = myLoadedXML.venue;
    // you are now ready at this point to start calling getAnotherRandomVenue()
} 
```

现在调用 getAnotherRandomVenue 将返回一个 Venue XML 对象。您现在可以 a) 重复调用此方法，直到它返回 null（所有项目都已随机返回）或 b) 在调用之前查看场所。length()。

编辑：在加载和调用事物时将代码清晰地合并。

# webfonts - 您如何查看 EOT webfont 文件？

> ID：13630708
> 
> 赞同：39
> 
> 时间：2012-11-29T16:52:39.663
> 
> 标签：webfonts, eot

有这么多人将 EOT 文件用于 webfonts（以支持 IE8），我不敢相信我找不到支持查看它们的单个应用程序。希望我遗漏了一些明显的东西，但是当我用谷歌搜索“eot 文件查看器”时，我只发现几个可能看起来像病毒的网站（这些网站有大约 100 万个不同的下载链接，它们都通向带有随机垃圾的不同网站）。

我在 PC 上工作，但也有可用的 Mac，我有 Visual Studio、XCode、Adobe CS3 套件和许多其他开发人员/图形工具。当然，所有流行的网络浏览器也是如此。

我正在解决 IE8 中的 webfont 显示问题。它正在使用我的 EOT 文件，但没有完全按照我的想法显示。我想排除在转换问题中丢失的任何东西（我使用过 web squirl 和 ufonts 以及其他在线转换器），我只能在我可以直接查看 EOT 而不是先转换为其他格式，或者转换EOT 的其他一些格式和“假设”它是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T13:58:15.943

如果您不介意先将 eot 转换为任何其他格式，例如 ttf，那么您可以使用我的工具[onlinefontconverter.com进行转换](https://onlinefontconverter.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-15T17:36:27.977

[http://www.pkmurphy.com.au/glyphviewer/](http://www.pkmurphy.com.au/glyphviewer/)，也许吧？它看起来合法，但仅支持通过 URL 加载字体，而不支持通过上传文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T15:49:34.930

**Fontexplorer X Pro**（不是免费的）能够创建 EOT 字体的预览：

[http://www.fontexplorerx.com/trial-pro/](http://www.fontexplorerx.com/trial-pro/)

以下是他们网站上的描述：“**导入、组织和预览 Web 字体（WOFF 和 EOT 格式）** ”

# web-applications - 是否还有其他类似于 Ocsigen 的 Web 应用程序框架？

> ID：13630711
> 
> 赞同：1
> 
> 时间：2012-11-29T16:52:44.353
> 
> 标签：web-applications, web-frameworks, ocsigen

我最近开始研究使用 Web 应用程序框架的想法，该框架提供了一种更统一的方式来处理客户端和服务器端编程，并且我发现了一个名为 Ocsigen 的项目。Ocsigen 似乎与我正在寻找的内容非常相似，但我发现它有一些令人困惑的地方，例如它使用函数式编程语言而不是命令式编程语言。只是出于好奇，还有其他类似于 ocsigen 的框架吗？（也许使用一种更传统的命令式编程语言。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-02T00:47:08.503

> ... 一个 Web 应用程序框架，它提供了一种更统一的方式来处理客户端和服务器端编程

在极端情况下，您正在寻找的是“无层 Web 框架”或“多层 Web 框架”或“同构 Web 框架”（即完全模糊服务器端代码和客户端代码之间界限的框架）。

处理服务器端和客户端的完全无层的 Web 框架（即，您永远不必为整个 Web 应用程序编写一行 JavaScript）：

*   [阿依达/网络](http://www.aidaweb.si/)（Smalltalk）
*   [氮](https://github.com/nitrogen/nitrogen)（二郎）
*   [Ocsigen](https://ocsigen.org/) (OCaml) - 声称它用于 Facebook。
*   [瓦丁](https://vaadin.com/)(Java)
*   [WebSharper](http://websharper.com/) (F#) - 似乎有一些主要的企业用户。

如果您更喜欢 JavaScript，请参阅：[使用 Javascript 的无层 Web 框架？](https://stackoverflow.com/questions/4597167/tierless-web-framework-with-javascript)

此外，您可能对这些感兴趣（其中大部分是研究项目，很少有人接受）：

*   [卷曲](https://en.wikipedia.org/wiki/Curl_(programming_language))
*   [希尔达](http://www.cs.cornell.edu/bigreddata/hilda/)
*   [跳](http://hop.inria.fr/home/index.html)（JavaScript）。
*   [链接](http://links-lang.org/)
*   [欧巴](https://github.com/MLstate/opalang)
*   [Ur/Web](https://github.com/urweb/urweb)（ML 系列）。

## 替代抽象

您可能已经注意到，像 Ocsigen 这样的无层框架并不流行，也没有得到很好的支持。根据您的用例，您可能希望研究支持更好的抽象：

### 基于组件的 Web 框架

基于组件的框架通常与传统的基于动作（请求）的框架形成对比。使用这些基于组件的框架，页面是由独立的组件（例如日期选择器组件、视频播放器组件、登录表单组件等）构建的，并且这些组件可以封装 Javascript。这样，在实际使用组件时，您就不必考虑 Javascript。

在基于组件的框架中，客户端和服务器之间的界限不一定是模糊的，但我在这里提到它们是因为如果您希望抽象出 Javascript，它们可能是一个不错的选择。

基于组件的 Java 框架已经存在了近 20 年，并且得到了相当多的采用。其中有：

*   [JavaServer Faces](https://en.wikipedia.org/wiki/JavaServer_Faces) - Java EE (Jakarta EE) 的一部分。有许多提供支持 AJAX 的组件的库。
*   [阿帕奇检票口](https://wicket.apache.org/)
*   [阿帕奇挂毯](https://tapestry.apache.org/)

### 客户端框架

下面列出的是仅用于客户端的非 JavaScript 框架/工具。这些为仅使用一种语言编写整个 Web 应用程序打开了大门（尽管服务器端和客户端之间的集成不如使用完全无层框架时那么好）：

*   [GWT](http://www.gwtproject.org/) (Java) - 谷歌使用它。
*   [味噌](https://haskell-miso.org/)（哈斯克尔）
*   [ReasonML](https://reasonml.github.io/)（带有 Reason 语法的 OCaml）
*   加上任何将非 JavaScript 语言编译成 JavaScript 的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:31:52.930

你应该看看[opa](http://opalang.org/)，它也是一种函数式语言，但它使用更传统的语法。

# c# - 如何定义匿名方法类型以使用 LINQ 构建动态查询？

> ID：13630712
> 
> 赞同：0
> 
> 时间：2012-11-29T16:52:46.063
> 
> 标签：c#, multithreading, linq, generics, linq-to-sql

我正忙于一个 LINQ to SQL 项目，该项目基本上为我的数据库中的每种实体类型创建多个线程，它不断地在一个线程中从数据库中查询信息。

这是一个伪示例：

```
streamer.DefineDataExpression<Contacts>(x => x.FirstName == "Bob");
while(true)
{
     List<Contacts> MyContactsResult = streamer.ResultList;
     // do whatever with MyContactsResult
} 
```

上面的代码不存在，但这是我迄今为止为“streamer”类所拥有的（它显然不起作用，但你可以看到我在上面试图实现的目标）：

```
public void DefineExpression(System.Linq.Expressions.Expression<System.Func<T, bool>> expression)
{
    using (var db = new LINQDataContext())
    {
        ResultList = db.GetTable<T>().Where(expression);
    }
} 
```

如何创建一个像“DefineExpression”这样允许我动态查询 LINQ 类型的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:53:26.763

为什么不使用[Scott Guthrie 提到的 Dynamic LINQ 提供程序](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。我认为这将为您提供所需的一切，因为您可以将查询定义为字符串。因此，您可以更轻松地构建查询的字符串表示形式，并即时执行。

# knockout.js - 淘汰赛替换绑定模型

> ID：13630714
> 
> 赞同：0
> 
> 时间：2012-11-29T16:52:49.907
> 
> 标签：knockout.js

我有一个模式对话框来添加新模型，在成功提交 ajax 后，我希望能够输入一个新模型。所以我的逻辑是这样的：

新模型的按钮->将editViewModel设置为新模型实例->提交按钮->成功提交后将editviewModel设置为新模型

```
function model() {
    this.name = ko.observable("");
}

var myViewModel = new model();
myViewModel.name("Name 1");
ko.applyBindings(myViewModel, document.getElementById('foo'));

function newViewModel() {
    myViewModel = new model();
    myViewModel.name("NewName");
    //ko.applyBindings(myViewModel, document.getElementById('foo'));
}​ 
```

小提琴：http: [//jsfiddle.net/56gkz/](http://jsfiddle.net/56gkz/)

为了让它工作，我必须在将 editViewModel 更改为新模型实例后重新应用绑定。那么这是再次应用绑定的正确方法还是有更好的解决方案来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:01:45.377

通常，您会希望创建一个整体视图模型，在该模型上调用一次 applyBindings，然后包含一个可观察对象，用于换入和换出模型以进行编辑。然后，在您的标记中，您可以使用`with`绑定将标记的一部分与该可观察对象的当前值绑定。

JS 代码可能如下所示：

```
function Model(name) {
    this.name = ko.observable(name);
}

function RootViewModel() {
    var self = this;

    this.selectedModel = ko.observable();
    this.models = ko.observableArray();

    this.createModel = function() {
        self.selectedModel(new Model("New Name"));
    };

    this.acceptModel = function(model) {
        self.models.push(model);
        self.selectedModel(null);
    };      

    //initialize with a model to start
    this.createModel();       
};

ko.applyBindings(new RootViewModel());​ 
```

标记如下：

```
<div data-bind="with: selectedModel">
    <input data-bind="value: name" />
    <button data-bind="click: $root.acceptModel">Accept</button>
</div>

<button data-bind="click: createModel">New Model</button>

<hr/>

<ul data-bind="foreach: models">
    <li data-bind="text: name"></li>
</ul> 
```

示例：http: [//jsfiddle.net/rniemeyer/RWYL6/](http://jsfiddle.net/rniemeyer/RWYL6/)

# javascript - Javascript Twitter 无法在一台主机上运行， 但可在另一台主机上运行

> ID：13630717
> 
> 赞同：0
> 
> 时间：2012-11-29T16:53:06.007
> 
> 标签：javascript, plugins, twitter

我目前正在开发一个需要 twitter 插件的网站，所以我使用了 twitter 网站上的插件创建器来创建一个插件，然后简单地将粘贴的代码复制到一个页面中。

当我将页面和插件上传到我自己的网站空间时它工作正常，但是当我将它上传到客户网站空间时它不会。

请看一下：

[http://www.biguppower.com/test.html](http://www.biguppower.com/test.html)

[http://s438332955.websitehome.co.uk/test.html](http://s438332955.websitehome.co.uk/test.html)

有没有人知道为什么会这样。

谢谢，萨米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:55:31.753

我看了一下控制台，上面写着：

> 您尚未将此域列入您的 Twitter 小部件的白名单。转到 [https://twitter.com/settings/widgets/260161750970793984/edit](https://twitter.com/settings/widgets/260161750970793984/edit)并将“www.biguppower.com”添加到此时间线的“域”列表中。

我认为这应该可以解决问题。

# layout - UIImageView 不服从它的内容模式

> ID：13630727
> 
> 赞同：2
> 
> 时间：2012-11-29T16:53:36.233
> 
> 标签：layout, uiimageview, ios6, interface-builder, contentmode

我正在设计一个 iOS 应用程序，其中有一个视图控制器，底部有一个嵌入式视图控制器，顶部有一个图像。但是，我在使用图像视图时遇到了问题。没有图像视图，一切正常。当我放置图像视图时，图像视图不适合图像。以下是它在界面构建器中的外观（设置为 Scale to Fill）：

![在此处输入图像描述](../Images/493fef14c28f4cd9109c9a14c6a935b3.png)

当我在我的 iPod Touch (iOS 6) 中运行它时，它看起来是这样的：

![在此处输入图像描述](../Images/216d333cf8bf8f3c8a2bc791f03a1d40.png)

图像的纵横比与 Interface Builder 中显示的不同。然后，我尝试将图像模式设置为 Aspect Fill（这实际上是我想要的）：

![在此处输入图像描述](../Images/5396ce13d0cc165f4d909a5c67273f6d.png)

这正是我真正想要的，但是当我运行它时，图像几乎填满了整个屏幕：

![在此处输入图像描述](../Images/d0009e5c04389eab0145f659c62cfe99.png)

注意我的朋友选择器视图控制器是如何留在图像视图后面的。整个视图控制器的布局是正确的（嵌入式视图控制器位置正确，注意最后一张截图中图片结束的地方，它从J开始，意思是一直到图片后面的顶部），它只是占用太多空间的图像视图。我尝试了框架矩形的不同排列，并尝试切换 iOS 6 的自动布局。两者都没有帮助。我是否遗漏了一个明显的观点，或者它是 iOS 布局系统的一个错误。（可能是第二个，因为所见即所得在 Interface Builder 和实际应用程序之间失败）是否有任何解决方法（除了在 Photoshop 中以我想要的确切尺寸裁剪图像部分）？

谢谢，

能。

**更新：**我目前发现的一种解决方法是将图像视图放在另一个视图中，并设置父视图的剪辑子视图属性勾选。但是图像视图本身的行为仍然不正确，尽管这目前解决了我的问题，但它不是一个真正的解决方案，所以欢迎任何解决方案的答案。

# c# - 从本地文件创建 FileStream 而无需在 ASP.Net 中上传之前

> ID：13630729
> 
> 赞同：0
> 
> 时间：2012-11-29T16:53:36.750
> 
> 标签：c#, asp.net, filestream

我想通过 ftp 上传大文件，并且由于安全原因我无法获得完整路径，因此我搜索了一种方法来**创建 FileStream**，例如从 Filechooser 未**上传文件**。据我了解，当我使用 PostedFile 时，它​​已经上传了。由于文件非常大，这不是我要寻找的解决方案。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:18:05.083

不。

您无法从 JavaScript 访问本地文件，也无法针对客户端文件系统运行服务器端 C# 代码。

您需要某种客户端应用程序来做到这一点。您可以使用 Silverlight/Flash 作为文件选择器对话框的结果来获取流并以这种方式上传文件。ActionScript2中涵盖的可能的 Flash 方法[：添加文件上传功能](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001054.html)。

# mvvm - kendo ui 组合框数据值更改参数不起作用

> ID：13630730
> 
> 赞同：1
> 
> 时间：2012-11-29T16:53:41.240
> 
> 标签：mvvm, combobox, kendo-ui

我正在使用 Kendo UI 并使用声明性绑定来绑定表单上的元素。它使用组合框小部件来搜索选项列表。小部件实际上按预期执行，但是仅在值更改时才请求搜索（这是有道理的）。我遇到的问题是更改事件仅在用户模糊组合框时触发（例如通过单击输入外部）。

这是可以预料的，因为在模糊之后会触发 DOM 更改事件，但是[Kendo UI 文档指出](http://docs.kendoui.com/getting-started/framework/mvvm/bindings/value#using-the-data-value-update-attribute)，通过使用 'data-value-update' 参数，您可以指定要在 'keyup' 上触发的事件。

不幸的是我不能让它工作，这里是组合框 HTML

```
<input data-role='combobox' data-bind="value: comboBoxValue, events: { change: methodToDoSearch}" data-value-update="keyup" type="text" data-text-field='Text' data-value-field='Id' /> 
```

这是作为剑道 ui 模板的一部分创建的（尽管我已经在模板之外进行了测试，所以这应该没有什么区别）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:14:30.657

仅原版文本框 ( ) 支持该`data-value-update`属性`<input type="text" />`。Kendo ComboBox 仅在失去焦点时才引发其更改事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T16:32:11.063

具体来说，data-value-update 仅用于更新应用小部件的绑定对象（当您在小部件中输入内容时，可观察对象将使用给定事件的值进行更新。在本例中为 keyup）。

IE，因为组合框小部件只能设置为组合框数据源值之一，所以将 observable 绑定到临时的非组合框值是没有意义的。

我还没有尝试过，但是您可以通过事件绑定来绑定哪些事件？剑道演示显示鼠标悬停、单击等。也许可以尝试这样的事情：

```
<input data-role='combobox' data-bind="value: comboBoxValue, events: { change: methodToDoSearch, keyup: methodToDoSearch}" type="text" data-text-field='Text' data-value-field='Id' /> 
```

一般来说，你想在 keyup 上触发什么事件？如果您想做一些手动搜索来更改 keyup 上组合框的数据源，这就是我想要的。

# cakephp - INT 列中的 CakePHP saveField NULL 值

> ID：13630733
> 
> 赞同：2
> 
> 时间：2012-11-29T16:53:49.930
> 
> 标签：cakephp

我想更新一个具有 NULL 值的 INT 列。我正在使用带有 saveField('field', 'value') 方法的 CakePHP 2.3。

这是我的代码：

```
$this->Customer->id = $customer_id;
if ($this->Customer->saveField('account_id', 'NULL')) {
     //Do some stuff
} 
```

因此，当我输入“NULL”时，该行更新为 0。我尝试了不带引号的 NULL 并且该行没有更新。

编辑：数据库中的字段接受 NULL 值。

你有什么主意吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:25:41.397

不要`'NULL'`作为字符串传递，而是作为`null`值传递：

```
if($this->Customer->saveField('account_id', null))
{
  //do some stuff
}
else
{
  //do you get anything here ?
  debug($this->Customer->validationErrors);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T14:24:27.470

我遇到了由上传行为引起的类似问题，该行为具有阻止保存的验证。检查您的模型，它可能会有所帮助。我假设即使验证规则阻止保存， saveField 也会返回 true。

# javascript - js 在 Sextillion 值处添加逗号

> ID：13630749
> 
> 赞同：2
> 
> 时间：2012-11-29T16:54:55.983
> 
> 标签：javascript

我使用一个小代码 js 将逗号添加到值：

```
function addCommas(nStr)
{
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
} 
```

尝试将逗号添加到诸如 sextillion 值之类的大值时遇到问题。例如。

```
addCommas(1000000) //return correct "1,000,000" 
```

但是如果使用像这样的大值

```
addCommas(50949024266983356472874) // return wrong "5.094902426698335e+22" 
```

我做错了什么或哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:56:43.347

~~您的输入可能已经是一个浮点数。大于 2^32 的数字往往是这样的。~~确保您的输入是一个字符串，并且您的函数将运行良好。

JavaScript 没有`int`和`float`类型。相反，它只有一个`Number`类型，它会自行决定何时使用哪个类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:56:50.877

当你这样做

```
nStr += ''; 
```

您要求 javascript 首先将您的数字转换为字符串。那时它决定将其写为`"5.094902426698335e+22"`. 问题不在于您的算法的其余部分。

转换[在 ecmascript 中进行了描述](http://bclary.com/2004/11/07/#a-9.8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:14:49.133

如果您的号码存储在字符串中，则以下函数将实现您的要求。

```
function addCommas( txtNum ) {
    var parts = txtNum.split(".");
    parts[0] = parts[0].reverse().replace(/(\d{3})/g, "$1,").reverse();
    return parts.join(".");
}   

String.prototype.reverse = function () {
    return this.split("").reverse().join("");
}

addCommas( "-50000000000000000000000000000000000000000.0000" );
// => -50,000,000,000,000,000,000,000,000,000,000,000,000,000.0000 
```

# c++ - 一个神秘的编译错误：无法从 'const boost::shared_ptr 转换 ' 到 'const boost::shared_ptr '

> ID：13630751
> 
> 赞同：0
> 
> 时间：2012-11-29T16:55:04.127
> 
> 标签：c++, boost, compiler-errors, boost-log

我想通过 boostlog 库保护对用于多线程日志记录的日志文件的访问。

我试过这个流类

```
class ThreadSafeStream
{
public:
    template <typename TInput>
    const ThreadSafeStream& operator<< (const TInput &tInput) const
    {
         // some thread safe file access    
         return *this;
    }
}; 
```

以这种方式使用它（text_sink 是一个 boostlog 对象）：

```
 //...
m_spSink.reset(new text_sink); 
text_sink::locked_backend_ptr pBackend = m_spSink->locked_backend();

const boost::shared_ptr< ThreadSafeStream >& spFileStream = boost::make_shared<ThreadSafeStream>();

pBackend->add_stream(spFileStream); // this causes the compilation error 
```

我得到了这个神秘的错误：`cannot convert from 'const boost::shared_ptr<T>' to 'const boost::shared_ptr<T>'`

整个编译错误：

```
Log.cpp(79): error C2664: 'boost::log2_mt_nt5::sinks::basic_text_ostream_backend<CharT>::add_stream' : cannot convert parameter 1 from 'const boost::shared_ptr<T>' to 'const boost::shared_ptr<T> &'
1>          with
1>          [
1>              CharT=char
1>          ]
1>          and
1>          [
1>              T=ThreadSafeStream
1>          ]
1>          and
1>          [
1>              T=std::basic_ostream<char,std::char_traits<char>>
1>          ]
1>          Reason: cannot convert from 'const boost::shared_ptr<T>' to 'const boost::shared_ptr<T>'
1>          with
1>          [
1>              T=ThreadSafeStream
1>          ]
1>          and
1>          [
1>              T=std::basic_ostream<char,std::char_traits<char>>
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

我怀疑我没有很好地定义 operator<<()... 但我没有找到问题所在。

这是 addStream 的原型`void add_stream(shared_ptr< stream_type > const& strm);` ：`typedef std::basic_ostream< target_char_type > stream_type;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:01:34.563

从错误消息中可能`pBackend->add_stream`需要一个`shared_ptr`(!) 到一段`ostream`时间，您将它提供`shared_ptr`给`ThreadSafeStream`一个完全不相关的类型。您需要创建一个最有可能`add_stream`与`ThreadSafeStream`s 一起使用的重载方法。

# python - 基于 2 个因素可视化错误

> ID：13630755
> 
> 赞同：1
> 
> 时间：2012-11-29T16:55:22.707
> 
> 标签：python, matplotlib

我已经实现了一种算法（RLSR），它有两个正则化因子。基于这两个因素的不同值，我的成本函数会减少或增加。现在我`plt.scatter` 通过将错误作为结果颜色传递来可视化我的错误：

![在此处输入图像描述](../Images/5431535c26ffdef39f7fedc411dc2f4b.png)

但这里的问题是我在 y 轴上的值非常小，所以你可以看到它们重叠，我看不到我的部分结果。

> alpha_list=[1e-11,1e-10,1e-10,5*1e-10,8*1e-10,1e-8,1e-8,5*1e-8,8*1e-6,1e-6 ,1e-6,5*1e-6,8*1e-6,1e-4,1e-4,5*1e-4,8*1e-4,1e-3,1e-3,5*1e-3 ,6*1e-3,8*1e-3]

我试图降低透明度，但没有多大帮助！

这就是我实现它的方式：

```
eigenvalues,alphaa  = np.meshgrid(eigRange,alpha_list )

fig = plt.figure()
DatavmaxTrain = np.max(normCostTrain)
DatavminTrain = np.min(normCostTrain)

DatavmaxTest = np.max(normCostTest)
DatavminTest = np.min(normCostTest)

plt.subplot(211)

plt.scatter(eigenvalues,alphaa,s=130, c=normCostTrain,cmap=cm.PuOr, vmin=DatavminTrain, vmax=DatavmaxTrain, alpha=0.70) #-----for train 

cb1=plt.colorbar()
cb1.set_label("normalized square error")

plt.title("Train ")
plt.xlabel("No. of Eigenvalues")
plt.ylabel("Regualrization parameter") 
```

所以我正在寻找一种更好的方法来可视化我的数据。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:10:19.410

如何绘制`alpha_list`值的对数？

```
alpha_list = np.log(alpha_list) 
```

* * *

仍然有一些重叠，但至少这些值分布得更均匀：

```
import matplotlib.pyplot as plt
import numpy as np

alpha_list=[1e-11,1e-10,1e-10,5*1e-10,8*1e-10,1e-8,1e-8,5*1e-8,8*1e-6,1e-6,1e-6,5*1e-6,8*1e-6,1e-4,1e-4,5*1e-4,8*1e-4,1e-3,1e-3,5*1e-3,6*1e-3,8*1e-3]
alpha_list = np.log(alpha_list)
eigRange = np.linspace(0,19,20)

eigenvalues,alphaa  = np.meshgrid(eigRange,alpha_list )
normCostTrain = np.random.random((len(alpha_list),len(eigRange)))

fig = plt.figure()
DatavmaxTrain = np.max(normCostTrain)
DatavminTrain = np.min(normCostTrain)

plt.scatter(eigenvalues,alphaa,s = 130, c=normCostTrain,cmap=plt.get_cmap('PuOr'),
            vmin=DatavminTrain, vmax=DatavmaxTrain, alpha=0.70) #-----for train 

cb1=plt.colorbar()
cb1.set_label("normalized square error")

plt.title("Train ")
plt.xlabel("No. of Eigenvalues")
plt.ylabel("Log(Regularization parameter)")
plt.show() 
```

产量

![在此处输入图像描述](../Images/c5802c8463d18bec5420bdba15cf88c0.png)

* * *

这是相同数据的 3D 散点图示例，z 轴（和颜色）都用于表示“归一化平方误差”。

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.cm as cm
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection = '3d')

alpha_list = [1e-11, 1e-10, 1e-10, 5*1e-10, 8*1e-10, 1e-8, 1e-8, 5*1e-8, 8*1e-6,
              1e-6, 1e-6, 5*1e-6, 8*1e-6, 1e-4, 1e-4, 5*1e-4, 8*1e-4, 1e-3, 1e-3,
              5*1e-3, 6*1e-3, 8*1e-3]

alpha_list = np.log(alpha_list)
eigRange = np.linspace(0, 19, 20)

eigenvalues, alphaa  = np.meshgrid(eigRange, alpha_list )
eigenvalues = eigenvalues.ravel()
alphaa = alphaa.ravel()
normCostTrain = np.random.random((len(alpha_list), len(eigRange))).ravel()

DatavmaxTrain = np.max(normCostTrain)
DatavminTrain = np.min(normCostTrain)

PuOr = plt.get_cmap('PuOr')
ax.scatter(eigenvalues, alphaa, normCostTrain,
           c = normCostTrain.ravel(),
           s = 30,
           cmap = PuOr,
           vmin = DatavminTrain,
           vmax = DatavmaxTrain,
           alpha = 0.70
           ) #-----for train

m = cm.ScalarMappable(cmap = PuOr)
m.set_array(normCostTrain)

cb1 = plt.colorbar(m)
cb1.set_label("normalized square error")

plt.title("Train ")
ax.set_xlabel("No. of Eigenvalues")
ax.set_ylabel("Log(Regularization parameter)")
ax.set_zlabel("normalized square error")
plt.show() 
```

![在此处输入图像描述](../Images/b439ff497449871b8a8f8516c767648c.png)

我不确定这是否是一种改进。这些点有点混杂在一起，但如果您拖动鼠标旋转绘图，则可以区分。

# jquery - 将dom元素存储在jquery的变量中在meteor中不起作用

> ID：13630760
> 
> 赞同：1
> 
> 时间：2012-11-29T16:55:32.147
> 
> 标签：jquery, dom, meteor

谁能告诉我我做错了什么？

[http://jsfiddle.net/zsVpt/](http://jsfiddle.net/zsVpt/)

```
var loadingDOM = $('.loading');

//when i want to use the stored DOM, it simply doesn't work and don't give any errors at all !!!
Template.search.events({
    'keyup .searchField' : function(event, template){
        loadingDOM.css('display','inline');
        //etc.
     }
});

//this one works
Template.search.events({
    'keyup .searchField' : function(event, template){
        $('.loading').css('display','inline');
        //etc.
     }
}); 
```

很简单，获取 dom 并将其存储在变量（性能）中，然后在流星事件范围内使用它。

当我使用存储的 DOM 时，它根本无法正常工作而不会出现任何错误！虽然直接使用 JQuery 获取 DOM 确实有效。

[http://www.youtube.com/watch?v=JP9zwE02tk4](http://www.youtube.com/watch?v=JP9zwE02tk4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T06:48:52.423

尝试`loadingDOM`在呈现的回调中缓存，如下所示：

```
Template.search.rendered = function() {
    this.loading = this.find('.loading'); 
}

Template.search.events({
  'keyup input' : function(e, t){
     $(t.loading).css('display', 'inline'); 
   }
}); 
```

我的猜测是您正在尝试在模板呈现之前缓存加载的 dom 元素。通过在模板渲染后将其缓存到模板对象中，只要您在同一个模板中工作，您就可以访问它。

# git - 无法摆脱“未为提交上演的更改”

> ID：13630761
> 
> 赞同：24
> 
> 时间：2012-11-29T16:55:35.267
> 
> 标签：git

我无法摆脱我的仓库似乎被锁定的状态。在重置到 HEAD~1 后，我不断收到有关此单个文件被修改的通知。'add' 和 'checkout' 没有影响。我有 core.autocrlf 和 core.safecrlf 未设置（空）。

请看下面：

```
$ git --version
git version 1.7.9.6 (Apple Git-31.1)

$ git status

# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   a_file_name.cpp 
```

以下命令（单独运行）没有影响：

```
$ git checkout -- a_file_name.cpp
$ git reset a_file_name.cpp
$ git add a_file_name.cpp
$ git reset --hard
$ git clean -n
<nothing>
$ git clean -f
<nothing>

$ git status

# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   a_file_name.cpp 
```

它继续......

## 我做错什么了？

对下面@Don 的建议的回应（git rm），没有变化，但它是这样的：

```
$ git rm 
error: 'a_file_name.cpp' has local modifications
(use --cached to keep the file, or -f to force removal)
$ git rm -f a_file_name.cpp
rm 'a_file_name.cpp'
$ git status

# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       deleted:    a_file_name.cpp
#
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted:    a_file_name.cpp
#

$ git commit -m"tmp"
[master 2a9e054] tmp
1 file changed, 174 deletions(-)
delete mode 100644 a_file_name.cpp

$ git status
# Your branch is ahead of 'origin/master' by 1 commit.
#
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted:    a_file_name.cpp
# 
```

几乎回到 sq.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-27T09:35:05.900

```
git commit -a -m "message" 
```

-a 选项将添加所有跟踪的文件并进行修改

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-11T17:56:11.473

一个对我有用的方法是：

1.  重新创建我删除的文件。

2.  `git add path/filename`

3.  `git rm --cached path/filename`

4.  删除文件

5.  `git add .`

6.  `git commit --amend # if not on an already pushed branch.`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T21:25:19.273

`git`运行任何命令时，请确保您与文件位于同一目录中。`git`或者，您可以对与命令一起使用的文件使用相对或绝对路径。的输出`git status` *应*指示文件所在的子目录。我发现您在此处发布的输出没有显示这一点很奇怪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T17:18:59.473

您需要修改后的文件中的任何更改吗？git-reset 默认将文件保留在目录树中。

```
git reset --hard 
```

将使用提交中的文件重置并覆盖工作树中的文件。

您是否在每个步骤之后都进行了 git diff 以查看是否确实存在任何更改？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-29T23:09:20.247

如果有问题的文件具有不同的大小写，则可能会发生这种情况。

在我的情况下

`README.md` `readme.md`

git 不会让您简单`git add ...`地更改大小写。

你可以通过做类似的事情来解决这个问题

`git mv -f readme.md README.md`

# json - 基于 RESTful JSON 的 SOA 注册表

> ID：13630762
> 
> 赞同：1
> 
> 时间：2012-11-29T16:55:38.670
> 
> 标签：json, web-services, http, rest, soa

我正在寻找一个简单的注册表，它提供了一个非常简单的 API 并使用可以描述为 JSON 的资源。

我正在设计一个面向资源的架构（完全是 HTTP REST，没有 WS-* 的 ESB 或其他东西，所有通信都是通过网络进行的，是无状态的，并且所有服务都不共享任何内容），它将使用 JSON 作为主要数据进行交流，所以我有点厌烦只使用 XML 来处理那个 SOA 注册表。

*免责声明：我真的很喜欢 WSO2 的东西，我学习 SOA 是看他们提供的东西。我没有选择他们的注册表的原因是因为从我看过的示例来看，使用 JSON 似乎是不可能的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:50:48.970

I'm not sure I get it. Is the semantics of the JSON you store relevant to the "registry" server at all? Because if not, any JSON storage engine with a REST CRUD API should be OK, like CouchDB, etc. You then do HTTP access control to only allow your service providing entities to add entries about themselves, and clients may only read.

Or should this "registry" actually do something with the data, like periodically actively test service availability and update reachability status? Because that sounds like a separate concern from storage and serving of the data, thus can be a separate component.

# php - 查找 PHP 代码的慢速部分

> ID：13630765
> 
> 赞同：0
> 
> 时间：2012-11-29T16:55:45.233
> 
> 标签：php

我是 php 新手。我目前的项目有一个 php 文件包含大约 2500 行代码。

该脚本在 localhost 中运行良好，但在服务器上重新加载页面需要很长时间。

我想知道是否有任何工具或网站可以从 php 脚本中找出运行缓慢的代码。

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:02:03.313

我强烈建议为此使用[xdebug](http://xdebug.org/) - 它有一个集成的分析解决方案。然后您可以使用[Webgrind解析这些文件](https://github.com/jokkedk/webgrind)

如果您使用 XAMPP 或 MAMP 之类的软件，xdebug 可能已经有了。还有很多有用的信息如何设置 xdebug 像这里[http://unitstep.net/blog/2009/01/26/getting-xdebug-to-work-with-apachexampp-to-debug-php/](http://unitstep.net/blog/2009/01/26/getting-xdebug-to-work-with-apachexampp-to-debug-php/)

也许服务器也比您的本地机器慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:01:17.340

[Xdebug](http://xdebug.org/)几乎是 PHP 的标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:01:49.743

一些分析器将在这里提供帮助。我最熟悉的是 Xdebug。它有许多 IDE 的插件。

# c# - 单击按钮时重定向到页面

> ID：13630776
> 
> 赞同：0
> 
> 时间：2012-11-29T16:56:30.493
> 
> 标签：c#, asp.net

嗨，我正在尝试在单击按钮时重定向到上一页，但事情进展不顺利，这是我的代码：

```
private string previousPage = string.Empty;

protected void Page_Load(object sender, EventArgs e)
{
    if( Request.UrlReferrer != null)
    {
        previousPage = Request.UrlReferrer.ToString();
        CrossSideScriptingErrorCheck.Text = previousPage;
    }  
}
protected void BackButton_Click( object sender , EventArgs e )
{      
   Response.Redirect(previousPage);
} 
```

当我第一次被定向到这个页面时，previousPage 变量存储了正确的 URL，但是在我单击按钮后，由于某种原因，previousPage 值更改为当前页面 url，我被发送回当前页面。

我在这里做错了什么，我该如何纠正它？

**编辑**

我包装了这样的代码：

```
if(!IsPostBack)
   {
       if( Request.UrlReferrer != null ) {
           previousPage = Request.UrlReferrer.ToString();
           CrossSideScriptingErrorCheck.Text = previousPage;
       }   
   } 
```

我被重定向到一个我没有创建并有一个链接的页面。页面上写着：

```
Object moved to here. 
```

“这里”是一个链接，当我点击它时，我会返回到我按下按钮的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:59:00.030

您需要测试回发。当您单击该按钮时，页面将被发送回服务器，并且引用者将成为您所在的页面，并且您想要的值将被覆盖。

```
 private string previousPage = string.Empty;

protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        if( Request.UrlReferrer != null)
        {
            previousPage = Request.UrlReferrer.ToString();
            CrossSideScriptingErrorCheck.Text = previousPage;
        }
    }  
}
protected void BackButton_Click( object sender , EventArgs e )
{      
   Response.Redirect(previousPage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:59:11.953

当您有回发时，引用者就是页面本身，所以这是预期的行为:-)

一种解决方案是有这样的东西：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack) Session["prev"] = Request.UrlReferrer.ToString();
    if(Session["prev"] == null) {some code that disables the back button goes here!}
}
protected void BackButton_Click( object sender , EventArgs e )
{      
   Response.Redirect(Session["prev"] as string);
} 
```

这个答案有效而到目前为止发布的其他答案无效的原因是我正在使用 Session["prev"] 来记住最近的有效推荐人。所以诀窍是1）意识到当你有一个回发时，引用者是页面本身的url（OP做了）和2）记住最后一个非发布引用者URL，以便你可以在返回按钮时使用它按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:59:18.657

你忘了把它放进去`IsPostBack`，它的工作方式是这样的

```
if(!IsPostBack)
{
   if( Request.UrlReferrer != null)
    {
        previousPage = Request.UrlReferrer.ToString();
        CrossSideScriptingErrorCheck.Text = previousPage;
    }
} 
```

像这样的代码可以使用它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T16:59:59.287

当您单击按钮时，页面加载在单击事件之前执行，因此它正在重置您的 previousPage 变量的值。您需要将其包裹在支票中以确保它没有被寄回，如下所示：

```
if (!IsPostBack) {
    previousPage = Request.UrlReferrer.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T17:03:33.077

我是最后一个回答但最先发表评论的人

```
protected void Page_Load(object sender, EventArgs e)
{
 if(!IsPostBack)
 {   
  if( Request.UrlReferrer != null)
    {
        previousPage = Request.UrlReferrer.ToString();
        CrossSideScriptingErrorCheck.Text = previousPage;
    }  
  }
} 
```

# jquery - 如何使用 jquery 在窗口调整大小时更改文本

> ID：13630777
> 
> 赞同：0
> 
> 时间：2012-11-29T16:56:31.900
> 
> 标签：jquery

我想通过当前浏览器宽度大小更改我的文本，而不必像媒体查询那样使用刷新。

我有这个代码，它不起作用，我做错了什么？

```
 function checkSize() {
   //small-screen
    if (window.innerWidth < 1200) {
       $("#hello-world").html("Hello World");
    }
    //end small-screen
   }

  checkSize();

$(window).resize(function() {
 checkSize();
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:59:35.920

### 建议

以这种方式将代码包含在其中`$(document).ready();`：

```
$(document).ready(function(){
    $(window).resize(function() {
        checkSize();
    });
}); 
```

### 演示：http: [//jsfiddle.net/rXERS/](http://jsfiddle.net/rXERS/)

# objective-c - 页面应用程序 + 自动布局 + 子视图在滚动时缩放

> ID：13630778
> 
> 赞同：1
> 
> 时间：2012-11-29T16:56:34.627
> 
> 标签：objective-c, uiscrollview, ios6, autolayout, nslayoutconstraint

我已经在控制器上工作了 4 天，但我无法解决我的问题！

让我们来解释一下我的架构：

我有一个“Rootview”，其中包含一个 ScrollView 和 anImageView（它们都添加到 IB 中）

然后我有 4 个外部视图控制器。

我想要的是：将我的 4 个视图控制器放在我的滚动视图中（这工作正常，两个视图都添加到我的滚动视图中的代码中）并允许用户在视图之间滚动

当我滚动时，我有一个小动画将我的视图缩放到 50%，然后将它们重新缩放到 100%。

当我在 IB 中禁用“自动布局”时，一切都很好！我的动画和我的观点的位置。但是，我不能禁用它，因为我希望我的应用程序可以在 iPhone4 和 iPhone5 上运行。

我不知道如何实现我的约束以正确定位我的所有视图。我只是希望我的视图高度调整为 50 像素以适合 iPhone 4 屏幕。

这是我的 scrollViewConfiguration

```
- (void)configureScrollView{
/* On déclare le nombre de page la scrollview */
if (self.myCurrentEvent.isEvent)
{
    self.numberOfScrollViewPages = 2;
}
else
{
    self.numberOfScrollViewPages = 4;
}

/* On initialise le tableau qui va contenir les tableviews */
viewControllersArray = [[NSMutableArray alloc] init];

/* Tant qu'on a pas atteint le nombre de pages de la scrollview */
for (unsigned i = 0; i < self.numberOfScrollViewPages; i++)
{
    /* On ajoute NSNull au tableau de tableview */
    [self.viewControllersArray addObject:[NSNull null]];
}

[self.myScrollView setTranslatesAutoresizingMaskIntoConstraints:NO];

/* On configure la content size en prenant la taille de la scroll view x le nombre de pages */
self.myScrollView.contentSize = CGSizeMake(self.myScrollView.frame.size.width * self.numberOfScrollViewPages, self.myScrollView.frame.size.height);

/* On désactive l'affichage du scroll horizontal */
self.myScrollView.showsHorizontalScrollIndicator = NO;

/* On désactive l'affichage du scroll vertical */
self.myScrollView.showsVerticalScrollIndicator = NO;

/* On désactive la fonction scroll to top */
self.myScrollView.scrollsToTop = NO;

/* On indique implémenter les fonction du son delegate */
self.myScrollView.delegate = self;

/* On affiche la première page */
[self loadScrollViewWithPage:0];

/* On affiche la deuxième page */
[self loadScrollViewWithPage:1];

if (!self.myCurrentEvent.isEvent)
{
    [self loadScrollViewWithPage:2];
    [self loadScrollViewWithPage:3];
}}

- (void)loadScrollViewWithPage:(int)page{
/* Si la page passée en paramètre est inférieure à 0, on sort de la fonction */
if (page < 0) return;

/* Si la page passée en paramètre est supérieur au nombre de page de la scrollview */
if (page >= self.numberOfScrollViewPages) return;

/* On récupère la référence vers la view contenu dans le tableau des tableview */
UIViewController *aViewController = [self.viewControllersArray objectAtIndex:page];

/* Si la vue récupérée est nulle */
if ((NSNull *)aViewController == [NSNull null])
{
    switch (page)
    {
        case 0:
            [self configureEventDescriptionViewController];
            [self.viewControllersArray replaceObjectAtIndex:page withObject:self.myEventDescriptionViewController];
            aViewController = self.myEventDescriptionViewController;
            break;

        case 1:
            [self configureListOfContactViewController];
            [self.viewControllersArray replaceObjectAtIndex:page withObject:self.myListOfContactViewController];
            aViewController = self.myListOfContactViewController;
            break;

        case 2:
            [self configureListOfExpensesCategoryViewController];
            [self.viewControllersArray replaceObjectAtIndex:page withObject:self.myListOfExpensesCategoryViewController];
            aViewController = self.myListOfExpensesCategoryViewController;
            break;

        case 3:
            [self configureLinkContactViewController];
            [self.viewControllersArray replaceObjectAtIndex:page withObject:self.myLinkContactViewController];
            aViewController = self.myLinkContactViewController;
        default:
            break;
    }
}

/* Si la superview de la vue est à nil */
if (aViewController.view.superview == nil)
{
    [aViewController.view setTranslatesAutoresizingMaskIntoConstraints:NO];

    CGRect frame;
    frame.size.height = self.myScrollView.frame.size.height;
    frame.size.width = 320;
    frame.origin.x = page * 320;
    frame.origin.y = 0;

    [aViewController.view setFrame:frame];

    /* On ajoute la vue courante à la scrollview */
    [self.myScrollView addSubview:aViewController.view];
}

aViewController = nil;} 
```

我设置 viewController 框架的部分只有在我禁用自动布局时才有效

我希望你明白我想说什么...

对不起，我的英语不好...

普威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:51:46.670

不是最好的解决方案，但您可以有两个故事板，一个用于 4，一个用于 5。在应用程序委托中询问设备屏幕大小并加载适当的故事板。

同样，它不是最好的解决方案，但您也可以使用 .xib 使其工作。我不得不这样做，因为我无法绕过这些限制。

# android - Android Tesseract OCR 7 段数字

> ID：13630779
> 
> 赞同：6
> 
> 时间：2012-11-29T16:56:37.043
> 
> 标签：android, ocr, tesseract, digits

我一直在实现一个 Android OCR 工具，它只使用 tesseract 来 ocr 数字。到目前为止，它使用普通数字字体提供了相当高的准确性。然而，当涉及到 7 段数字（在 LCD 上发现的数字）时，精度很差。

我尝试裁剪我的图像，使用 0 到 9 的白名单以及一些图像处理无济于事。关于如何提高准确性的任何想法？或者也许一些关于为 tesseract 训练特定 7 段数字的技巧肯定会对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-06T22:01:52.653

您可以在以下位置找到 7 个段的训练数据：

[https://github.com/arturaugusto/display_ocr/tree/master/letsgodigital](https://github.com/arturaugusto/display_ocr/tree/master/letsgodigital)

在同一存储库中还有一个示例 python 代码。

# objective-c - 将滚动视图插入另一个滚动视图

> ID：13630781
> 
> 赞同：0
> 
> 时间：2012-11-29T16:56:40.770
> 
> 标签：objective-c, xcode, uiscrollview

是否可以将滚动视图插入另一个滚动视图？我注意到包含的滚动视图被冻结并且当我滚动主视图时不会移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:07:36.420

`UIScrollView`可以包含在另一个`UIScrollView`. 如果包含的滚动视图的内容大小不大于父滚动视图，则它将保持冻结状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:02:10.910

你绝对可以， UIScrollView 从 UIView 继承，你可以使用它的**addSubview**方法。

# php - 包含 SPL 类加载器的正确方法

> ID：13630787
> 
> 赞同：2
> 
> 时间：2012-11-29T16:56:50.533
> 
> 标签：php

### 问题

我正在使用PSR Group 提供的[SPL 类加载器。](https://gist.github.com/221634)然而，我遇到了一个鸡蛋悖论。

也就是说，这将自动加载类以防止明确包含它们。但是我首先需要`include`/`require`这个类和实例化对象的代码

```
$classLoader = new SplClassLoader('Doctrine\Common', '/path/to/doctrine');
$classLoader->register(); 
```

### 问题

包含自动加载器代码的常见解决方案是什么？

在前端控制器的情况下，我可以在那里添加代码。但我并不总是使用前端控制器模式。我想我也可以使用 PHP 的[`auto_prepend_file`](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file). 对社区输入感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:13:03.383

您在引导阶段（应用程序启动的阶段）明确需要自动加载器。

然后自动加载所有后续函数/类。

# css - 保证金最高：100%；远远超出包含元素

> ID：13630788
> 
> 赞同：0
> 
> 时间：2012-11-29T16:56:54.357
> 
> 标签：css

请检查这个小提琴[http://jsfiddle.net/JH4Ew/1/](http://jsfiddle.net/JH4Ew/1/)。我想对齐 `<p class="email">`底部。我想如果我把

```
margin-top:100%; 
```

这意味着从父元素的高度 100%。在小提琴上似乎超过 100% 的高度。如何以正确的方式做到这一点？

PS我已经更新了正确的内容，以前没有更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:04:44.123

添加以下 CSS 以将段落与 div 的底部对齐：

```
#opening4 {
    position:relative;
    border: 1px solid #999;
}
.email{
    position:absolute;
    bottom:0;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/JH4Ew/1/)**

通过相对定位 div，它允许您绝对设置电子邮件段落的位置，并且通过将底部设置为零，它将保持在父级的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:07:37.417

`position: relative`如果您希望它位于窗口底部，请从父级中删除：

[http://jsfiddle.net/2VyCj/1/](http://jsfiddle.net/2VyCj/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:10:01.100

边距是与兄弟元素的距离，而不是与父元素内部的距离。

# javascript - 检测是否启用了镀铬面板

> ID：13630789
> 
> 赞同：4
> 
> 时间：2012-11-29T16:57:06.800
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我想检测面板是否在 chrome 中启用，在 javascript 中。

目前，您可以使用以下代码创建面板：

```
chrome.windows.create({ url: "[url]", width: 500, height: 516, type: 'panel'}); 
```

当 chrome 中的面板被禁用时，它会打开一个弹出窗口。但问题是并非在每个 chrome 版本上都启用了面板。但人们可以在 chrome://flags 上手动启用它。因此，当标志被禁用时，我想将人们重定向到该页面，以便他们可以启用面板。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T17:46:26.897

`alwaysOnTop`您可以使用以下回调中的布尔属性检测打开的窗口是否为面板[`chrome.windows.create`](http://developer.chrome.com/extensions/windows.html#method-create)：

```
chrome.windows.create({
    url: '...url...', // ...
    type: 'panel'
}, function(windowInfo) {
    // if  windowInfo.alwaysOnTop  is  true  , then it's a panel.
    // Otherwise, it is just a popup
}); 
```

如果要检测标志是否启用，请创建窗口，读取值，然后将其删除。因为创建过程是异步的，所以必须使用回调来实现值检索。

```
var _isPanelEnabled;
var _isPanelEnabledQueue = [];
function getPanelFlagState(callback) {
    if (typeof callback != 'function') throw Error('callback function required');
    if (typeof _isPanelEnabled == 'boolean') {
        callback(_isPanelEnabled); // Use cached result
        return;
    }
    _isPanelEnabledQueue.push(callback);

    if (_isPanelEnabled == 'checking')
        return;

    _isPanelEnabled = 'checking';
    chrome.windows.create({
        url: 'about:blank',
        type: 'panel'
    }, function(windowInfo) {
        _isPanelEnabled = windowInfo.alwaysOnTop;
        chrome.windows.remove(windowInfo.id);

        // Handle all queued callbacks
        while (callback = _isPanelEnabledQueue.shift()) {
            callback(windowInfo.alwaysOnTop);
        }
    });
}
// Usage:
getPanelFlagState(function(isEnabled) {
    alert('Panels are ' + isEnabled);
}); 
```

因为 flag 只能通过重新加载 Chrome 浏览器来切换，所以缓存 flag 的值是有意义的（如函数所示）。为了确保窗口创建测试只发生一次，回调被排队。

# regex - .htaccess 规则，用于将参数值拼写错误的 URL 301 重定向到参数值正确的 URL

> ID：13630790
> 
> 赞同：0
> 
> 时间：2012-11-29T16:57:10.460
> 
> 标签：regex, .htaccess

我有一个在一组服务器上运行的应用程序，它从我正在运行的另一台服务器获取 URL。

正在获取的此 URL 包含一个带有拼写错误 URL 参数的硬编码 URL。我想通过为 301 重定向到目标服务器上的正确 URL 创建一个 .htaccess 规则来解决这个问题，而不是更改应用程序并将其上传到我的所有其他服务器。

我假设我可以通过使用正则表达式创建一个 RedirectRule 来做到这一点，但我很烂。

这是我想要实现的目标：

```
http://www.example.com/some-page/?param1=exparam1&param2=misspeltparam&param3=exparam3 
```

上面的 URL 应该重定向到：

```
http://www.example.com/some-page/?param1=exparam1&param2=correctparam&param3=exparam3 
```

在上面的例子中`param2=misspeltparam`，and `param2=correctparam`（即参数名和值）都是常量。其他一切都是动态的。

此外，拼写错误只会出现`param2`在 的情况下，以防从上述陈述中不明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:36:57.133

类似以下代码的东西应该可以完成这项工作：

```
RewriteEngine On

RewriteCond %{QUERY_STRING} ^(.*&param2=)misspeltparam(.*)$
RewriteRule .* %{REQUEST_URI}?%1correctparam%2 [R=301,L] 
```

# php - htaccess 重定向做错误的页面方向

> ID：13630793
> 
> 赞同：1
> 
> 时间：2012-11-29T16:57:14.973
> 
> 标签：php, .htaccess, url-rewriting

这是我的 htaccess 代码：

```
<IfModule mod_rewrite.c> 
Options +FollowSymLinks 
RewriteEngine on

RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /Songs/Songs\.php\?movie=([^&\ ]+)([^\ ]*)
RewriteRule ^/Songs/%3?%4 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?Songs/(.*)$ /Songs/Songs.php?movie=$1 [L,QSA]

</IfModule> 
```

它的重定向非常像

从

```
localhost/Songs/Songs.php?movie=anymovie-2012 
```

至

```
localhost/Songs/anymovie-2012 
```

但是当我尝试

```
localhost/Songs/<anytext> 
```

例如。

```
localhost/Songs/test 
```

然后它也调用了songs.php，而不是抛出找不到页面的错误。

如果数据库中不存在最后一个关键字，如何抛出未找到页面错误。

对于解决方案，

我应该在songs.php 文件或.htaccess 文件中编码吗？我需要做什么类型的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:14:28.873

您需要更具体地说明应重定向的格式；例如

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} ^[a-z0-9]+\-[0-9]{4}(\-[a-z0-9]+)?$
RewriteRule ^/?Songs/(.*)$ /Songs/Songs.php?movie=$1 [L,QSA] 
```

应该管用。新行需要一个标题破折号年份，其中标题只能包含小写字母和数字，年份必须是四个数字，后跟可选的字母和数字字符串。

# iphone - 每帧具有不同持续时间的动画

> ID：13630796
> 
> 赞同：0
> 
> 时间：2012-11-29T16:57:18.280
> 
> 标签：iphone, animation, uiimageview

我需要显示一个动画，其中动画的帧应该显示不同的持续时间。如果 UIImageView 支持动画 GIF，这很容易解决，但事实并非如此。

我想要的看起来像这样：

1.  显示 MyImage01.png 2 秒。
2.  显示 MyImage02.png 0.5 秒。
3.  显示 MyImage03.png 1 秒。
4.  循环，从步骤 1 开始。

`setAnimationImages:`与 UIImageView 一起使用时，我看不到任何方法可以为每个帧设置不同的持续时间。

有谁知道这是如何实现的？

当然，实现这一点的一种方法是将动画持续时间设置为 0.25 秒，并连续多次显示相同的图像，但这似乎并不是实现这一目标的理想方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:12:54.293

查看：

[http://github.com/ondalabs/OLImageView](http://github.com/ondalabs/OLImageView)

注意：我从未使用过这个组件。有关自定义控件的良好来源，请参阅 [http://www.cocoacontrols.com/](http://www.cocoacontrols.com/)

很高兴我能帮上忙 ：-）

# database - 我应该将总值写入数据库还是在需要时计算它们？

> ID：13630802
> 
> 赞同：1
> 
> 时间：2012-11-29T16:57:39.087
> 
> 标签：database, database-design

我有许多处于级联关系的表，即`projects`references`clients`和`tasks`references `projects`。a 中的某些列`task`需要添加到引用的总数中`project`。

我应该有一个额外的`total`列`projects`，并在每次有变化时更新它的值`tasks`吗？还是应该在输出需要时计算总数？如果我需要 a 的总数`client`怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:04:04.857

我认为这个问题不能给出一个普遍的答案。如果您需要项目级别的总计，则需要评估是否值得为此创建一个列。

使用计算列可能很容易完成。

请记住，这将占用您数据库上的更多空间，并可能减慢插入/更新/删除操作。另一方面，它也可能会加速某些选择操作。

你需要看看你的需求是什么，并决定这些权衡是否值得。

就个人而言，如果我没有看到性能问题并且 SQL 不是太难看，我可能会在需要时进行计算。

# c# - 无效的文件名。TitleContainer.OpenStream 需要一个相对 URI

> ID：13630803
> 
> 赞同：3
> 
> 时间：2012-11-29T16:57:41.873
> 
> 标签：c#, .net, wpf, xna

我在 WPF 应用程序中遇到此错误。

> 无效的文件名。[TitleContainer.OpenStream](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.titlecontainer.openstream.aspx)需要一个相对 URI。

```
pic_texture = Texture2D.FromStream(GraphicsDevice, TitleContainer.OpenStream(@"\Images\performer.png")); 
```

我也试过

```
@"/WpfControlLibrary1;component/Images/performer.png" 
```

没有成功...

如果我喜欢这个

```
 pic_texture = Texture2D.FromStream(GraphicsDevice, TitleContainer.OpenStream(@"performer.png")); 
```

并将文件放在根目录中

错误是：

> 加载“performer.png”时出错。文件未找到。

有什么线索吗？

谢谢！

PS我确定文件没问题。

![在此处输入图像描述](../Images/96a508bfa47de9b3f78b467bfc868a14.png)

![在此处输入图像描述](../Images/f63843fb40c6a53674dd94dc3dc8d58b.png)

更新：

这篇文章[https://gamedev.stackexchange.com/questions/9748/xna-am-i-screwing-up-the-loadcontent-for-texture2d](https://gamedev.stackexchange.com/questions/9748/xna-am-i-screwing-up-the-loadcontent-for-texture2d)也无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:12:11.490

我在这里部分猜测，但尝试

```
pic_texture = Texture2D.FromStream(GraphicsDevice, TitleContainer.OpenStream(@"Images\performer.png")); 
```

没有第一个`\`

**调试**

在您的程序中，将这些行添加 到发生错误的行**之前。**

```
FileStream fs = new FileStream("myUniqueFile.txt", FileMode.Create);
fs.Close(); 
```

确保你有

```
using System.IO 
```

在代码文件的顶部。

完成后，搜索您的计算机`"myUniqueFile.txt"`并在评论中告诉我您在哪里找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:41:58.947

在 VisualStudio 中，右键单击“performer.png”文件，转到“属性”，将“复制到输出目录”更改为`Copy always`或`Copy if newer`。

# ruby-on-rails - 添加具有许多“用户”的“帐户”

> ID：13630807
> 
> 赞同：2
> 
> 时间：2012-11-29T16:57:47.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在尝试实现一个可以拥有一个或多个用户的顶级帐户。我的应用程序使用设计进行身份验证，因此我想将注册表单保留为用户模型的一部分。

我相信我已经正确设置了模型，但是我在弄清楚注册表应该如何工作时遇到了一些麻烦。

这是我到目前为止所得到的......

**用户.rb**

```
class User < ActiveRecord::Base
  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable,
         :validatable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :account, :company

  # Association with service accounts
  has_many :service_accounts

  # Association with company account
  belongs_to :account

end 
```

**账户.rb**

```
class Account < ActiveRecord::Base
  attr_accessible :company

  # Association with users
  has_many :users, :dependent => :destroy

end 
```

**注册/new.html.erb**

```
<h2>Sign up</h2>
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
  <%= f.error_notification %>
  <%= f.input :name, :autofocus => true, :placeholder => "Name" %>
  <%= f.input :email, :placeholder => "Email Address" %>
  <%= f.input :password, :placeholder => "Password" %>
  <%= f.input :password_confirmation, :placeholder => "Confirm Password" %>
  <%= f.button :submit, 'Sign up', :class => 'btn btn-large btn-primary' %>
<% end %>
<%= render "devise/shared/links" %> 
```

**这是我可以使用的一些帮助**

我想在上面的注册表单中添加一个“公司”字段。公司是帐户表中的一列。当新用户注册时，我想为该用户创建一个新帐户并将公司属性设置为他们在公司字段中提供的任何内容。

我在使用表单（添加公司字段）和控制器（创建新帐户并在用户提交表单时更新公司字段）所需的代码时遇到问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:17:24.390

我刚刚完成了具有类似要求的应用程序的工作。关系看起来不错。您可能需要一个`before_save`过滤器`User`来获取要关联的数据`Account`并同时添加/更新关联。

您还应该查看[*`accepts_nested_attributes_for`*](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)，尽管我认为它旨在处理更常见的情况，即父母（在您的情况下为帐户）正在推动子（用户）的创建。我怀疑您正在使用 Devise 创建用户，然后或稍后创建关联，并将关联数据添加到 Account 模型。

需要考虑的一个问题是，Company 是否是它自己的模型，在这种情况下，Users 有 Accounts，Accounts 有 Companies。您可能想查看最近[有关“多租户”应用程序的 RailsCasts](http://railscasts.com/episodes?utf8=%E2%9C%93&search=multitenancy) ——虽然它们可能不适用于您的案例，但它们在我的案例中适用，并且在管理和构建数据时有一些我没有考虑过的事情当我第一次启动应用程序时。

# jsp - 我可以将 jsp 标记返回值存储在变量中而不将其强制为字符串吗？

> ID：13630808
> 
> 赞同：1
> 
> 时间：2012-11-29T16:57:55.310
> 
> 标签：jsp, jstl, el

```
<c:set var="userProfile"><sec:authentication property="principal" /></c:set> 
```

我有一个遗留安全系统，我正在移植到 Spring Security。在这种情况下，我想简单地将用户主体存储在一个变量中，这是所有遗留代码所期望的。

就目前而言，变量 userProfile 包含 principal.toString()。

无论如何，这可能最好移动到控制器，但出于兴趣，有没有一种简单的方法可以在 jsp 页面中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:35:30.620

在正文中设置值的问题`<c:set>`在于它始终是一个字符串（将正文内容评估为字符串）。如果使用该`value`属性，则结果是评估值的类型：

```
<c:set var="userProfile" value="${...}" /> 
```

但只有当你有一些“暴露”的东西要评估时，上述情况才有可能。

我假设`<sec:authentication>`标签是[Spring Security 的 taglibs 的](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/taglibs/authz/AuthenticationTag.html)一部分？如果是这种情况，那么您使用它的方式会导致字符串强制（而不是`<c:set>`）。

标签可以将属性值写入输出流（作为字符串）或将属性“公开”为变量。在后一种情况下，这应该可以满足您的需要：

```
<sec:authentication property="principal" var="userProfile" /> 
```

# macos - 使用 AVFoundation 获取 AVI 的帧率

> ID：13630809
> 
> 赞同：2
> 
> 时间：2012-11-29T16:58:03.480
> 
> 标签：macos, avfoundation

如何使用 AVFoundation 获得 AVI 视频的大致帧速率？

`nominalFrameRate`从 an获取`AVAssetTrack`结果为 0.0 但相同的代码在我尝试的任何 mov 文件上都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T21:58:23.370

根据我的经验，AVI 文件并不真正适用于 AV Foundation。然而，QuickTime 可能是答案。

# facebook - Facebook应用程序错误或我的错误奇怪的事情发生在我身上

> ID：13630811
> 
> 赞同：0
> 
> 时间：2012-11-29T16:58:05.433
> 
> 标签：facebook

我创建了一个 facebook 应用程序，它创建为新图像并将其上传到用户相册，但是当他们使用该应用程序时，该图像正在上传到我的相册。这听起来很有趣，但令我震惊的是，他们的图像怎么能上传给我。如果我犯了任何错误，请检查我的代码。

```
 $access_token = 'ABCDEFGHIJKLMN';
     $graph_url = "https://graph.facebook.com/me/albums?"
     . "access_token=". $access_token;
     $album_name = 'Klu report';  
     $postdata = http_build_query(
     array(
      'name' => $album_name,
      'message' => 'sai ram'
        )
      );
     $opts = array('http' =>
     array(
      'method'=> 'POST',
      'header'=>
        'Content-type: application/x-www-form-urlencoded',
      'content' => $postdata
      )
     );
     $context  = stream_context_create($opts);
     $result = json_decode(file_get_contents($graph_url, false, 
       $context));

     $album_id = $result->id;

     $graph_url= "https://graph.facebook.com/" 
      . $album_id ."/photos?"
      . "url=" . urlencode('https://yourkishore.com/facebook/'.$output)
      . "&message=" . urlencode('I got my Placements report get yours here : https://apps.facebook.com/yourkishore')
      . "&method=POST"
      . "&access_token=" .$access_token;
      echo '<html><body>';
      file_get_contents($graph_url);
      echo '</body></html>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:04:34.630

Facebook API 认为这张照片应该发给哪个用户直接与`access_token`. 在那里开始调试。将一些来自不同用户的 access_tokens 放在调试器中[，](https://developers.facebook.com/tools/debug)看看你得到了什么。

# xcode - 单击表格视图单元格后，在下一个控制器中将其从项目列表中删除

> ID：13630813
> 
> 赞同：0
> 
> 时间：2012-11-29T16:58:09.530
> 
> 标签：xcode, arrays, uitableview

我真的不知道如何完成这项工作，但我的想法是在第一个视图控制器中，它将有一个包含 6 个项目的数组。单击任何表格视图单元格后，该特定单元格将被删除，下一个控制器将显示剩余的 5 个项目。

在 FirstController .m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    SecondController *sc = [sb instantiateViewControllerWithIdentifier:@"SecondController"];
    filteredFive = [[NSMutableArray alloc] init];

    // I only display two of it here as it will be very lengthy
    if ([[totalItems objectAtIndex:indexPath.row] isEqual:@"ONE"]) {
        [filteredFive addObject:@"TWO"];
        [filteredFive addObject:@"THREE"];
        [filteredFive addObject:@"FOUR"];
        [filteredFive addObject:@"FIVE"];
        [filteredFive addObject:@"SIX"];
    }

    if ([[totalItems objectAtIndex:indexPath.row] isEqual:@"TWO"]) {
        [filteredFive addObject:@"ONE"];
        [filteredFive addObject:@"THREE"];
        [filteredFive addObject:@"FOUR"];
        [filteredFive addObject:@"FIVE"];
        [filteredFive addObject:@"SIX"];
    }
    [self.navigationController pushViewController:sc animated:NO];
    // this is the part I am trying to transfer the array filteredFive into SecondController's array
    sc.fiveItems = filteredFive; 
```

然后在 SecondController.h

```
@interface SecondController : UIViewController <UITableViewDelegate, UITableViewDataSource> {
    NSMutableArray *fiveItems;
}
@property (weak, nonatomic) IBOutlet UITableView *secondTable;
@property (nonatomic, retain) NSMutableArray *fiveItems;

@end 
```

第二控制器.m

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [fiveItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    cell.textLabel.text = [fiveCourses objectAtIndex:indexPath.row];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

我想知道我的代码中是否存在不允许显示数据的错误。是不是我未能将阵列从一个转移到另一个？还是我错过了一些代码，因此代码没有显示在 SecondController 中？

如果还有其他方法可以显示剩余的 5 个项目，我也愿意尝试。

# java - 将xml节点复制到Java中的新文档

> ID：13630814
> 
> 赞同：0
> 
> 时间：2012-11-29T16:58:13.573
> 
> 标签：java, xml, dom

我整天都在研究这个问题，但找不到解决方案！

我想读一个xml

```
<test>
    <data></data>
</test> 
```

并编辑某些数据值，我可以做到并很好地保存。

但是我想在再次更改值之前获取这些更改的值并将它们添加到新文档中。所以我最终得到了一个新文件

```
<test>
    <data></data>
</test>
<test>
    <data></data>
</test> 
```

我可以使用此代码创建节点的 ArrayList

```
TransformerFactory tfactory = TransformerFactory.newInstance();
Transformer tx   = tfactory.newTransformer();
DOMSource source = new DOMSource(testDoc);
DOMResult output = new DOMResult();
tx.transform(source,output);
nodes.add(output.getNode()); 
```

所以我现在有一个节点的 ArrayList，每个节点都有从模板编辑的唯一数据，但我似乎无法将它们写到新的空白文档中。这就是我目前拥有的

```
for (Node n:nodes){
    Element root = templateDoc.getDocumentElement();
    Node copyNode = templateDoc.importNode(n, true);
    root.appendChild(copyNode);
} 
```

试图写出到 templateDoc

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:15:17.600

一个有效的 XML 文档可能只有一个[根元素](http://en.wikipedia.org/wiki/Root_element)。如果`<test>`是根元素，则根中不能有两个`<test>`元素。你需要这样的东西：

```
<tests>
 <test>
  <data>...</data>
 </test>
 <test>
  <data>...</data>
 </test>
</tests> 
```

# c++ - 串行工作时Cuda版本不工作

> ID：13630817
> 
> 赞同：1
> 
> 时间：2012-11-29T16:58:29.290
> 
> 标签：c++, cuda

我的以下极简 Cuda 代码返回了不正确的结果（所有多边形最后都有 0 个顶点），而在 C++ 中串行运行的相同代码运行良好。问题是令人尴尬的并行：没有通信，没有同步线程等，而且 Cuda 内存分配是成功的。甚至我存储输入数组内容以进行调试的虚拟变量对于 Cuda 版本也是 0。由于我的数组足够大，因此没有越界访问。用 Cuda 中的循环替换 memcpy 不会改变任何东西。
我真的不明白会发生什么......任何想法？谢谢！

库达代码：

```
 #include <stdio.h>
    #include <iostream>
    #include <stdlib.h>
    #include <cuda.h>

    class Point2D {
     public:
     __device__ Point2D(double xx=0, double yy=0):x(xx),y(yy){};
     double x, y;
    };

    __device__ double dot(const Point2D &A, const Point2D &B) {
     return A.x*B.x + A.y*B.y;
    }
    __device__ Point2D operator*(double a, const Point2D &P) {
     return Point2D(a*P.x, a*P.y);
    }
    __device__ Point2D operator+(Point2D A, const Point2D &B) {
     return Point2D(A.x + B.x, A.y + B.y);
    }
    __device__ Point2D operator-(Point2D A, const Point2D &B) {
     return Point2D(A.x - B.x, A.y - B.y);
    }
    __device__ Point2D inter(const Point2D &A, const Point2D &B, const Point2D &C, const Point2D &D) { //intersects AB by *the mediator* of CD 
      Point2D M = 0.5*(C+D);
      return A - (dot(A-M, D-C)/dot(B-A, D-C)) * (B-A);
    }

    class Polygon {
    public:
      __device__ Polygon():nbpts(0){};
      __device__ void addPts(Point2D pt) {
        pts[nbpts] = pt;
        nbpts++;
      }; 
      __device__ Polygon& operator=(const Polygon& rhs) {
        nbpts = rhs.nbpts;
        dummy = rhs.dummy;
        memcpy(pts, rhs.pts, nbpts*sizeof(Point2D));
        return *this;
      }
      __device__ void cut(const Point2D &inside_pt, const Point2D &outside_pt) {

        int new_nbpts = 0;
        Point2D newpts[128];
        Point2D AB(outside_pt-inside_pt);
        Point2D M(0.5*(outside_pt+inside_pt));
        double ABM = dot(AB, M);

        Point2D S = pts[nbpts-1];

        for (int i=0; i<nbpts; i++) {

          Point2D E = pts[i];

          double ddot = -ABM + dot(AB, E);
          if (ddot<0) { // E inside clip edge
            double ddot2 = -ABM + dot(AB, S);
            if (ddot2>0) {
               newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
               new_nbpts++;
            }
            newpts[new_nbpts] = E;
            new_nbpts++;
          } else {
            double ddot2 = -ABM + dot(AB, S);
            if (ddot2<0) {
               newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
               new_nbpts++;
            }       
          }
          S = E;
        }

        memcpy(pts, newpts, min(128, new_nbpts)*sizeof(Point2D));
        nbpts = new_nbpts;
      }

    //private:
     Point2D pts[128];
     int nbpts;
     float dummy;
    };

    __global__ void cut_poly(float *a, Polygon* polygons, int N)
    {
      int idx = blockIdx.x * blockDim.x + threadIdx.x;
      if (idx>=N/2) return;

      Polygon pol;
      pol.addPts(Point2D(0.,0.));
      pol.addPts(Point2D(1.,0.));
      pol.addPts(Point2D(1.,1.));
      pol.addPts(Point2D(0.,1.));

      Point2D curPt(a[2*idx], a[2*idx+1]);

      for (int i=0; i<N/2; i++) {
        Point2D other_pt(a[2*i], a[2*i+1]);
        pol.cut(curPt, other_pt);
      }
      pol.dummy = a[idx];

      polygons[idx] = pol;
    }

    int main(int argc, unsigned char* argv[])
    {

      const int N = 100; 
      float a_h[N], *a_d; 
      Polygon p_h[N/2], *p_d;

      size_t size = N * sizeof(float);
      size_t size_pol = N/2 * sizeof(Polygon);

      cudaError_t err  = cudaMalloc((void **) &a_d, size);   
      cudaError_t err2 = cudaMalloc((void **) &p_d, size_pol);  

      for (int i=0; i<N; i++) a_h[i] = (float)(rand()%1000)*0.001;
      cudaMemcpy(a_d, a_h, size, cudaMemcpyHostToDevice);

      int block_size = 4;
      int n_blocks = N/block_size + (N%block_size == 0 ? 0:1);
      cut_poly <<< n_blocks, block_size >>> (a_d, p_d, N);

      cudaMemcpy(a_h, a_d, sizeof(float)*N, cudaMemcpyDeviceToHost);
      cudaMemcpy(p_h, p_d, sizeof(Polygon)*N/2, cudaMemcpyDeviceToHost);

      for (int i=0; i<N/2; i++)
       printf("%f \t %f \t %u\n", a_h[i], p_h[i].dummy, p_h[i].nbpts);

      cudaFree(a_d);
      cudaFree(p_d);

        return 0;
    } 
```

C++ 中的相同代码可以正常工作：

```
#include <stdio.h>
#include <iostream>
#include <stdlib.h>

class Point2D {
 public:
 Point2D(double xx=0, double yy=0):x(xx),y(yy){};
 double x, y;
};

double dot(const Point2D &A, const Point2D &B) {
 return A.x*B.x + A.y*B.y;
}
Point2D operator*(double a, const Point2D &P) {
 return Point2D(a*P.x, a*P.y);
}
Point2D operator+(Point2D A, const Point2D &B) {
 return Point2D(A.x + B.x, A.y + B.y);
}
Point2D operator-(Point2D A, const Point2D &B) {
 return Point2D(A.x - B.x, A.y - B.y);
}
Point2D inter(const Point2D &A, const Point2D &B, const Point2D &C, const Point2D &D) { //intersects AB by *the mediator* of CD 
  Point2D M = 0.5*(C+D);
  return A - (dot(A-M, D-C)/dot(B-A, D-C)) * (B-A);
}

class Polygon {
public:
  Polygon():nbpts(0){};
  void addPts(Point2D pt) {
    pts[nbpts] = pt;
    nbpts++;
  }; 
  Polygon& operator=(const Polygon& rhs) {
    nbpts = rhs.nbpts;
    dummy = rhs.dummy;
    memcpy(pts, rhs.pts, nbpts*sizeof(Point2D));
    return *this;
  }
  void cut(const Point2D &inside_pt, const Point2D &outside_pt) {

    int new_nbpts = 0;
    Point2D newpts[128];
    Point2D AB(outside_pt-inside_pt);
    Point2D M(0.5*(outside_pt+inside_pt));
    double ABM = dot(AB, M);

    Point2D S = pts[nbpts-1];

    for (int i=0; i<nbpts; i++) {

      Point2D E = pts[i];

      double ddot = -ABM + dot(AB, E);
      if (ddot<0) { // E inside clip edge
        double ddot2 = -ABM + dot(AB, S);
        if (ddot2>0) {
           newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
           new_nbpts++;
        }
        newpts[new_nbpts] = E;
        new_nbpts++;
      } else {
        double ddot2 = -ABM + dot(AB, S);
        if (ddot2<0) {
           newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
           new_nbpts++;
        }
      }
        S = E;
    }

    memcpy(pts, newpts, std::min(128, new_nbpts)*sizeof(Point2D));
    /*for (int i=0; i<128; i++) {
      pts[i] = newpts[i];
    }*/
    nbpts = new_nbpts;
  }

//private:
 Point2D pts[128];
 int nbpts;
 float dummy;
};

void cut_poly(int idx, float *a, Polygon* polygons, int N)
{
  if (idx>=N/2) return;

  Polygon pol;
  pol.addPts(Point2D(0.,0.));
  pol.addPts(Point2D(1.,0.));
  pol.addPts(Point2D(1.,1.));
  pol.addPts(Point2D(0.,1.));

  Point2D curPt(a[2*idx], a[2*idx+1]);

  for (int i=0; i<N/2; i++) {
    if (idx==i) continue;
    Point2D other_pt(a[2*i], a[2*i+1]);
    pol.cut(curPt, other_pt);
  }
  pol.dummy = a[idx];

  polygons[idx] = pol;
}

int main(int argc, unsigned char* argv[])
{

  const int N = 100;  // Number of elements in arrays
  float a_h[N], *a_d;  // Pointer to host & device arrays
  Polygon p_h[N/2], *p_d;

  for (int i=0; i<N; i++) a_h[i] = (float)(rand()%1000)*0.001;

  for (int idx=0; idx<N; idx++)
    cut_poly(idx, a_h, p_h, N);

  for (int i=0; i<N/2; i++)
   printf("%f \t %f \t %u\n", a_h[i], p_h[i].dummy, p_h[i].nbpts);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:51:51.757

好吧，我想你可以无视我的大部分评论。我错误地在使用 CUDA 3.2 设置的机器上工作，并且它在内核启动失败方面表现不同。当我切换到 CUDA 4.1 和 CUDA 5.0 时，事情开始变得有意义。为我在那里的困惑道歉。

无论如何，在过去之后，我很快注意到您的 CPU 和 GPU 实现之间存在差异。具体在这里（查看CPU代码）：

```
void cut_poly(int idx, float *a, Polygon* polygons, int N)
{
  if (idx>=N/2) return;

  Polygon pol;
  pol.addPts(Point2D(0.,0.));
  pol.addPts(Point2D(1.,0.));
  pol.addPts(Point2D(1.,1.));
  pol.addPts(Point2D(0.,1.));

  Point2D curPt(a[2*idx], a[2*idx+1]);

  for (int i=0; i<N/2; i++) {
    if (idx==i) continue;     /*   NOTE THIS LINE MISSING FROM YOUR GPU CODE */
    Point2D other_pt(a[2*i], a[2*i+1]);
    pol.cut(curPt, other_pt);
  }
  pol.dummy = a[idx];

  polygons[idx] = pol;
} 
```

参考我在上面添加注释的行，如果您将确切的代码行添加到`cut_poly`内核中 GPU 代码的相应位置，那么无论如何，GPU 代码都会产生与 CPU 代码相同的打印结果。

我要进行的另一项观察是，您不必要地运行只有 4 个线程的块。当您解决代码中的问题时，这没有什么问题，但是一旦您将其用于“生产”目的，您很可能希望将目标设置为更高的数字，例如 256，并确保选择的数字是32 的整数倍，以获得最佳性能。

针对评论中发布的问题，我认为数据已正确复制，但很可能您没有在主机上正确访问它。（我不知道您如何确定“我的数组未正确返回给主机”）。您的大多数类定义都是`__device__`唯一的。因此，很难访问主机上类中的结构（例如，`Point2D pts`类中的`Polygon`类）。我在这里插入修改后的代码，我认为这表明数据正在传输回主机：

```
 #include <stdio.h>
    #include <iostream>
    #include <stdlib.h>
//    #include <cuda.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

    class Point2D {
     public:
     __host__ __device__ Point2D(double xx=0, double yy=0):x(xx),y(yy){};
     double x, y;
    };

    __host__ __device__ double dot(const Point2D &A, const Point2D &B) {
     return A.x*B.x + A.y*B.y;
    }
    __host__ __device__ Point2D operator*(double a, const Point2D &P) {
     return Point2D(a*P.x, a*P.y);
    }
    __host__ __device__ Point2D operator+(Point2D A, const Point2D &B) {
     return Point2D(A.x + B.x, A.y + B.y);
    }
    __host__ __device__ Point2D operator-(Point2D A, const Point2D &B) {
     return Point2D(A.x - B.x, A.y - B.y);
    }
    __host__ __device__ Point2D inter(const Point2D &A, const Point2D &B, const Point2D &C, const Point2D &D) { //intersects AB by *the mediator* of CD
      Point2D M = 0.5*(C+D);
      return A - (dot(A-M, D-C)/dot(B-A, D-C)) * (B-A);
    }

    class Polygon {
    public:
      __host__ __device__ Polygon():nbpts(0){};
      __host__ __device__ void addPts(Point2D pt) {
        pts[nbpts] = pt;
        nbpts++;
      };
      __host__ __device__ Polygon& operator=(const Polygon& rhs) {
        nbpts = rhs.nbpts;
        dummy = rhs.dummy;
        memcpy(pts, rhs.pts, nbpts*sizeof(Point2D));
        return *this;
      }
      __host__ __device__ Point2D getpoint(unsigned i){
        if (i<128) return pts[i];
        else return pts[0];
        }
      __host__ __device__ void cut(const Point2D &inside_pt, const Point2D &outside_pt) {

        int new_nbpts = 0;
        Point2D newpts[128];
        Point2D AB(outside_pt-inside_pt);
        Point2D M(0.5*(outside_pt+inside_pt));
        double ABM = dot(AB, M);

        Point2D S = pts[nbpts-1];

        for (int i=0; i<nbpts; i++) {

          Point2D E = pts[i];

          double ddot = -ABM + dot(AB, E);
          if (ddot<0) { // E inside clip edge
            double ddot2 = -ABM + dot(AB, S);
            if (ddot2>0) {
               newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
               new_nbpts++;
            }
            newpts[new_nbpts] = E;
            new_nbpts++;
          } else {
            double ddot2 = -ABM + dot(AB, S);
            if (ddot2<0) {
               newpts[new_nbpts] = inter(S,E, inside_pt, outside_pt);
               new_nbpts++;
            }
          }
          S = E;
        }

        memcpy(pts, newpts, min(128, new_nbpts)*sizeof(Point2D));
        nbpts = new_nbpts;
      }

    //private:
     Point2D pts[128];
     int nbpts;
     float dummy;
    };

    __global__ void cut_poly(float *a, Polygon* polygons, int N)
    {
      int idx = blockIdx.x * blockDim.x + threadIdx.x;
      if (idx>=N/2) return;

      Polygon pol;
      pol.addPts(Point2D(0.,0.));
      pol.addPts(Point2D(1.,0.));
      pol.addPts(Point2D(1.,1.));
      pol.addPts(Point2D(0.,1.));

      Point2D curPt(a[2*idx], a[2*idx+1]);

      for (int i=0; i<N/2; i++) {
        if (idx==i) continue;
        Point2D other_pt(a[2*i], a[2*i+1]);
        pol.cut(curPt, other_pt);
      }
      pol.dummy = pol.getpoint(0).x;

      polygons[idx] = pol;
    }

    int main(int argc, unsigned char* argv[])
    {

      const int N = 100;
      float a_h[N], *a_d;
      Polygon p_h[N/2], *p_d;

      size_t size = N * sizeof(float);
      size_t size_pol = N/2 * sizeof(Polygon);

      cudaMalloc((void **) &a_d, size);
      cudaCheckErrors("cm1");
      cudaMalloc((void **) &p_d, size_pol);
      cudaCheckErrors("cm2");

      for (int i=0; i<N; i++) a_h[i] = (float)(rand()%1000)*0.001;
      cudaMemcpy(a_d, a_h, size, cudaMemcpyHostToDevice);
      cudaCheckErrors("cmcp1");

      int block_size = 128;
      int n_blocks = N/block_size + (N%block_size == 0 ? 0:1);
      cut_poly <<< n_blocks, block_size >>> (a_d, p_d, N);
      cudaCheckErrors("kernel");

      cudaMemcpy(a_h, a_d, sizeof(float)*N, cudaMemcpyDeviceToHost);
      cudaCheckErrors("cmcp2");
      cudaMemcpy(p_h, p_d, sizeof(Polygon)*N/2, cudaMemcpyDeviceToHost);
      cudaCheckErrors("cmcp3");

      for (int i=0; i<N/2; i++)
       printf("%f \t %f \t %f \t %u\n", a_h[i], p_h[i].dummy, p_h[i].getpoint(0).x, p_h[i].nbpts);

      cudaFree(a_d);
      cudaFree(p_d);

        return 0;
    } 
```

我建议对这些事情发布新问题。

# java - 编译错误相关

> ID：13630819
> 
> 赞同：0
> 
> 时间：2012-11-29T16:58:40.750
> 
> 标签：java, static, static-methods

鉴于：

```
11\. public static void test(String str) {
12\. int check = 4;
13\. if (check = str.length()) {
14\. System.out.print(str.charAt(check -= 1) +", ");
15\. } else {
16\. System.out.print(str.charAt(0) + ", ");
17\. }
18\. }
and the invocation:
21\. test("four");
22\. test("tee");
23\. test("to"); 
```

结果是什么？

```
A. r, t, t,
B. r, e, o,
C. Compilation fails.
D. An exception is thrown at runtime.
Answer: C 
```

你能解释一下为什么编译失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:59:53.817

```
if (check = str.length()) 
```

上面的表达式`if`是一个赋值，相当于： -

```
if (str.length()) 
```

因此，表达式被评估为一个`integer`值。这是一个编译错误。由于`if`语句中的表达式应计算`boolean`为`Java`.

因此，该`if`声明应写为：-

```
if (check == str.length()) 
```

才能成功编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:01:18.197

编译错误是因为ie`check = str.length()`里面的这个语句。**它的分配而不是比较。**声明期望最终评估为.`if``if (check = str.length())` **`If``boolean`**

 **使用比较运算符的正确语句如下`==`：

```
 if (check == str.length()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:02:26.637

第 13 行应如下所示

```
if (check == str.length()) { 
```**

# asp.net - 从域名本 身重定向到目录中的页面的正确方法是什么？

> ID：13630820
> 
> 赞同：1
> 
> 时间：2012-11-29T16:58:43.040
> 
> 标签：asp.net, html, iis, redirect, iis-manager

我希望任何浏览“MyDomain.com”的人都能看到“MyDomain.com/Folder1/HomePage.aspx”中的内容。

我尝试添加一个页面，`<meta http-equiv="refresh" content="0;URL='MyDomain.com/Folder1/HomePage.aspx'" />`但有一点延迟。我宁愿它默默地完成。

我尝试使用 iis-manager 的 HTTP-Redirect，但所有子目录都继承了它。（并在这里询问[https://stackoverflow.com/questions/13629137/prevent-subdirectories-from-inheriting-an-http-redirect-in-iis](https://stackoverflow.com/questions/13629137/prevent-subdirectories-from-inheriting-an-http-redirect-in-iis)关于解决主要返回无声近距离投票的问题。）

那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:43:13.377

```
Response.Redirect 
```

似乎是最好的办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:13:28.683

在 Default.aspx 页面加载事件中尝试这样的事情怎么样？

```
Response.Status = "Redirecting"
Response.AddHeader("Location", "MyDomain.com/Folder1/HomePage.aspx") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:25:59.523

Meta 将需要一些时间，因为它首先会到达客户端，然后它将被转移到新页面，因为 HTML 在浏览器中执行 - 而不是在服务器上。

`Server.Transfer("~/Folder1/HomePage.aspx")`如果在您的`Default.aspx`页面上使用，最快的方法。这将在服务器上执行，相比之下，`Response.Redirect`它也会先将内容返回到浏览器，然后再转移到新页面。

但是使用的缺点`Server.Transfer("~/Folder1/HomePage.aspx")`是不会改变浏览器的URL。我的意思是，即使您将坐在“MyDomain.com/Folder1/HomePage.aspx”上，但浏览器会向您显示上一页的 URL。

我希望这回答了你的问题。如果是，则将其标记为“已回答”。

# objective-c - 将 NSTextField 绑定到 NSString

> ID：13630824
> 
> 赞同：3
> 
> 时间：2012-11-29T16:59:03.253
> 
> 标签：objective-c, binding, xcode4.3, cocoa-bindings, nstextfield

我有一个非常简单的问题，希望在我开始理解绑定时有人能回答。我想以编程方式更改我的 NSString 值，并通过绑定将 NSTextField 更新为该值。我有一个 NSTextField 和 NSLabel。为了表示正确更改 myString 的值，我有一个 NSButton。

*   我将 NSTextField 的值绑定到 App Delegate 的 myString 属性，并检查了持续更新值。
*   我将 NSLabel 的值绑定到 App Delegate 的 myString 属性。
*   我有 NSButton 插座连接到 setDefault 方法。

当我输入 NSTextField 时，NSLabel 会按预期更新，但是当我单击按钮时，myString 属性会更新，但不会在 NSTextField 中更新。

我需要做什么才能将 NSTextField 更新到 myString 属性？？？？

**AppDelegate.h**

```
@interface AppDelegate : NSObject<NSApplicationDelegate>
{
   NSString *myString;
}

@property (assign) IBOutlet NSWindow *window;
@property NSString *myString;

- (IBAction)setDefault:(id)sender;
@end 
```

**AppDelegate.m**

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize myString;

- (void)applicationDidFinishLaunching:(NSNotification*)aNotification
{
   myString = @"This is a string";
}

- (IBAction)setDefault:(id)sender
{
   NSLog(@"%@", myString);
   myString = @"This is a string";
   NSLog(@"%@", myString);
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:45:24.837

不应该

```
myString = @"This is a string"; 
```

但是这个：

```
self.myString = @"This is a string"; 
```

在`-applicationDidFinishLaunching:`和 在`-setDefault:`. 不要忘记在你的 NSLog 语句中指定 self 。您可能希望在其中指定一个不同的字符串，`-setDefault:`以便实际看到正在发生更改。

另一件事：您实际上是在说要分配给 myString，但这不适合对象。代替：

```
@property NSString *myString; 
```

你应该改用

```
@property (copy) NSString *myString; 
```

或者至少

```
@property (retain) NSString *myString; 
```

前者是首选，因为传递`NSMutableString`实例有效地将其复制为 a `NSString`，而传递`NSString`实例只是保留它。

祝你在你的努力中好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:20:28.433

我建议您为成员变量添加前缀。这样，您可以**区分直接设置成员或使用 setter**。在您的示例中，我将执行以下操作。

```
@interface AppDelegate : NSObject<NSApplicationDelegate>
{
   NSString *m_myString;
}

@property (assign) IBOutlet NSWindow *window;
@property NSString *myString;

- (IBAction)setDefault:(id)sender;
@end 
```

...

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize myString = m_myString;

- (void)applicationDidFinishLaunching:(NSNotification*)aNotification
{
   self.myString = @"This is a string";
}

- (IBAction)setDefault:(id)sender
{
   NSLog(@"%@", m_myString);
   self.myString = @"This is a string";
   NSLog(@"%@", m_myString);
}
@end 
```

请注意，我更改了`@synthesize`分配成员变量。

澄清：

```
self.myString = @"This is a string"; 
```

.. 是 ... 的替代语法

```
[self setMyString:@"This is a string"]; 
```

也可以直接设置成员...

```
[self willChangeValueForKey:@"myString"];
m_myString = @"This is a string";
[self didChangeValueForKey:@"myString"]; 
```

但是你需要“通知”观察者绑定，如上图所示。

# linux - Apache SVN，arch linux上的错误500

> ID：13630827
> 
> 赞同：0
> 
> 时间：2012-11-29T16:59:13.697
> 
> 标签：linux, apache, svn

我使用[https://wiki.archlinux.org/index.php/Subversion_Setup](https://wiki.archlinux.org/index.php/Subversion_Setup)指南安装我的 svn 存储库，但我仍然无法访问我的存储库。这是svn co的输出：

```
[ots@localhost test]$ svn co https://192.168.0.21/svn/otclient_modules --username kosto
Authentication realm: <https://192.168.0.21:443> SVN Repositories
Password for 'kosto': //no matter if i enter good or wrong
svn: E175002: Unable to connect to a repository at URL 'https://192.168.0.21/svn/otclient_modules'
svn: E175002: Server sent unexpected return value (500 Internal Server Error) in response to OPTIONS request for 'https://192.168.0.21/svn/otclient_modules' 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:35:34.593

问题出在权限上。svn 配置文件（策略文件）上的 chgrp www-data 以及包含它们的目录。

# java - 链接两个 JFrame，这样一个 JFrame 将始终完全位于另一个之上

> ID：13630833
> 
> 赞同：0
> 
> 时间：2012-11-29T16:59:25.747
> 
> 标签：java, swing, jframe, multiple-instances, window-management

我需要创建两个`JFrame`，f1 和 f2，以便：

*   即使 f2 获得焦点， f2 也总是正好在 f1 之下。
*   f1 不一定总是在顶部（例如，弹出窗口可以出现在顶部）。
*   不能在 f1 和 f2 之间插入其他窗口（来自同一个 java 应用程序或来自操作系统的任何其他应用程序）。

**注意：**我不能使用 CardLayout 或 InternalFrames 或其他轻量级组件。我真的需要两个`JFrames`（或`Window`）。原因是我必须在 Java 应用程序上重新设置 X-Window，出于几个原因，我需要这个 X-Wwindow 在 f2 框架上重新设置，并且 f1 窗口的那部分是透明的，以便用户可以看到X-Window 后面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:04:54.900

我建议不要使用多个框架，而是使用多个面板并使用[卡片布局来管理它们](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:03:16.983

忘记为此使用两个框架。使用单个 Frame 并将 JSplitPane（或简单的 JPanel）放入其中以将其分为两个部分。

使用 UI 组件来做他们不应该做的事情会给用户带来糟糕的体验，并且可靠地实现是不切实际的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:30:12.277

你能告诉我们更多关于你想要做什么的细节吗？如果 F1 总是在屏幕上具有优先权，我不明白为什么要构建 F2。如果不编写大量代码，JVM 将无法确保在这些帧之间没有其他帧。

# android - 将数据从 ArrayList 放入 ListView

> ID：13630840
> 
> 赞同：0
> 
> 时间：2012-11-29T16:59:58.740
> 
> 标签：android, list, listview

我知道，这里有很多关于这个主题的问题，谷歌有很多关于它的教程，但我仍然有问题，所以请告诉我我错在哪里；/。有我的课：

布局类（activity_finish.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#b5b5b5"
        android:dividerHeight="3dp"
        android:listSelector="@drawable/list_selector" />

</LinearLayout> 
```

行布局（list_row.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="3dip" >

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:contentDescription="@string/desc"
            android:src="@drawable/icon" />
    </LinearLayout>

    <TextView
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dip"
        android:layout_alignBottom="@+id/destinationName"
        android:gravity="right"
        android:text="@string/time"
        android:textColor="#10bcc9"
        android:textSize="23dip" />

    <TextView
        android:id="@+id/destination"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginTop="8dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="@string/destination"
        android:textColor="#343434"
        android:textSize="13dip" />

    <TextView
        android:id="@+id/destinationName"
        android:layout_width="153dip"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/destination"
        android:layout_below="@+id/destination"
        android:text="@string/destinationName"
        android:textColor="#040404"
        android:textSize="20dip"
        android:textStyle="bold"
        android:typeface="sans" />

    <TextView
        android:id="@+id/stopName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/thumbnail"
        android:layout_below="@+id/thumbnail"
        android:text="@string/stopName"
        android:layout_marginLeft="3dip" />

    <TextView
        android:id="@+id/stopStreet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/thumbnail"
        android:layout_below="@+id/stopName"
        android:layout_marginTop="3dip"
        android:text="@string/stopStreet" 
        android:layout_marginLeft="3dip"/>

    <TextView
        android:id="@+id/stopOneWay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/time"
        android:layout_below="@+id/stopName"
        android:layout_marginTop="3dip"
        android:text="@string/stopOneWay" 
        android:layout_marginLeft="3dip"/>

    <TextView
        android:id="@+id/lineNumber"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:layout_alignLeft="@+id/thumbnail"
        android:layout_alignTop="@+id/thumbnail"
        android:gravity="center"
        android:text="@string/lineNumber" 
        android:layout_marginLeft="3dip"
        android:textStyle="bold"
        android:textSize="28dip"
        android:textColor="#DCF0F5"/>

</RelativeLayout> 
```

停止适配器：

```
public class StopAdapter extends ArrayAdapter<DisplayStop> {

    private List<DisplayStop> stops;
    private LayoutInflater inflater;
    private Context context;

    int layoutResourceId;

    public StopAdapter(Context context, int layoutResourceId, List<DisplayStop> stops) {

        super(context, layoutResourceId, stops);

        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.stops = stops;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent){

        View row = convertView;

        ViewHolder holder = new ViewHolder();

        if(row == null)
        {
            inflater = ((Activity)context).getLayoutInflater();

            row = inflater.inflate(layoutResourceId, parent, false);

            holder.image = (ImageView) row.findViewById(R.id.list_image);
            holder.time = (TextView) row.findViewById(R.id.time);
            holder.destination = (TextView) row.findViewById(R.id.destination);
            holder.destination = (TextView) row.findViewById(R.id.destinationName);
            holder.stopName = (TextView) row.findViewById(R.id.stopName);
            holder.stopStreet = (TextView) row.findViewById(R.id.stopStreet);
            holder.stopOneWay = (TextView) row.findViewById(R.id.stopOneWay);
            holder.lineNumber = (TextView) row.findViewById(R.id.lineNumber);

            row.setTag(holder);

        }

        else{
            holder = (ViewHolder)row.getTag();
        }

        holder.time.setText(stops.get(position).getTime());
        holder.destination.setText("Kierunek:");
        holder.destinationName.setText(stops.get(position).getDestination());
        holder.stopName.setText(stops.get(position).getName());
        holder.stopStreet.setText(stops.get(position).getAddress());
        holder.lineNumber.setText(stops.get(position).getLine());

        if(stops.get(position).getOneWay()) holder.stopOneWay.setText("P. jednokierunkowy");
        else holder.stopOneWay.setText("");

        int line = Integer.parseInt(stops.get(position).getLine());

        if(line >= 50){
            holder.image.setImageResource(R.drawable.icon);
        }
        else{
            holder.image.setImageResource(R.drawable.icon2);
        }

        return row;
    }
} 
```

完成活动：

```
public class FinishActivity extends Activity {

    private ListView lv;
    private List<DisplayStop> stops;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_finish);

        lv = (ListView) findViewById(R.id.list);

        stops = getStops();//create several objects in list

        if(stops.size() > 0){
            StopAdapter stopAdapter = new StopAdapter(this, R.layout.list_row, stops);
            lv.setAdapter(stopAdapter);     
        }
        else
        {
            Log.d("klop", "0 elementów");
        }

    } 
```

请帮忙，因为我不知道出了什么问题（我从几个教程制作了几个版本，但仍然没有；/）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:18:46.027

尝试在不扩展 ArrayAdapter 类的情况下执行此操作，并直接声明如下：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, arrayListData);
lv.setAdapter(adapter); 
```

如果您所做的只是从 Array/ArrayList 中放置项目，那么您无需再使用 ArrayAdapter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:12:34.457

在activity_finish.xml中ListView的定义中，设置高度为fill_parent

`android:layout_height="fill_parent"`

列表视图内容在膨胀时没有高度，只有在添加项目时。

也不需要保存指向适配器中项目的指针

删除这个：

```
private List<DisplayStop> stops; 
```

然后，当您想要访问 ListAdapter 中的项目时，请改用：

```
DisplayStop item = this.getItem(position); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:30:23.310

## 布局类（activity_finish.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#b5b5b5"
    android:dividerHeight="3dp"
    android:listSelector="@drawable/list_selector" />

 </LinearLayout> 
```

## 行布局（list_row.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:background="@drawable/list_selector"
 android:padding="5dip" >

    <ImageView
        android:id="@+id/list_image"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:contentDescription="@string/desc"
        android:src="@drawable/icon" />

    <TextView
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="5dip"
    android:layout_alignBottom="@+id/destinationName"
    android:gravity="right"
    android:text="@string/time"
    android:textColor="#10bcc9"
    android:textSize="23dip" />

<TextView
    android:id="@+id/destination"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginTop="8dip"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="@string/destination"
    android:textColor="#343434"
    android:textSize="13dip" />

<TextView
    android:id="@+id/destinationName"
    android:layout_width="153dip"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/destination"
    android:layout_below="@+id/destination"
    android:text="@string/destinationName"
    android:textColor="#040404"
    android:textSize="20dip"
    android:textStyle="bold"
    android:typeface="sans" />

<TextView
    android:id="@+id/stopName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/thumbnail"
    android:layout_below="@+id/thumbnail"
    android:text="@string/stopName"
    android:layout_marginLeft="3dip" />

<TextView
    android:id="@+id/stopStreet"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/thumbnail"
    android:layout_below="@+id/stopName"
    android:layout_marginTop="3dip"
    android:text="@string/stopStreet" 
    android:layout_marginLeft="3dip"/>

<TextView
    android:id="@+id/stopOneWay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/time"
    android:layout_below="@+id/stopName"
    android:layout_marginTop="3dip"
    android:text="@string/stopOneWay" 
    android:layout_marginLeft="3dip"/>

<TextView
    android:id="@+id/lineNumber"
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:layout_alignLeft="@+id/thumbnail"
    android:layout_alignTop="@+id/thumbnail"
    android:gravity="center"
    android:text="@string/lineNumber" 
    android:layout_marginLeft="3dip"
    android:textStyle="bold"
    android:textSize="28dip"
    android:textColor="#DCF0F5"/>

 </RelativeLayout> 
```

## 停止适配器：

```
 public class StopAdapter extends ArrayAdapter<DisplayStop> {

    private List<DisplayStop> stops;

     public StopAdapter(Context context, int layoutResourceId, List<DisplayStop> stops) {

       super(context, layoutResourceId, stops);
       this.stops = stops;
   }

   @Override
   public View getView(int position, View convertView, ViewGroup parent){

       View row = convertView;

       ViewHolder holder = new ViewHolder();

       if(row == null)
       {
            LayoutInflater inflater = getLayoutInflater();

            row = inflater.inflate(R.layout.list_row, parent, false);

            holder.image = (ImageView) row.findViewById(R.id.list_image);
            holder.time = (TextView) row.findViewById(R.id.time);
            holder.destination = (TextView) row.findViewById(R.id.destination);
            holder.destination = (TextView) row.findViewById(R.id.destinationName);
            holder.stopName = (TextView) row.findViewById(R.id.stopName);
            holder.stopStreet = (TextView) row.findViewById(R.id.stopStreet);
            holder.stopOneWay = (TextView) row.findViewById(R.id.stopOneWay);
            holder.lineNumber = (TextView) row.findViewById(R.id.lineNumber);

            row.setTag(holder);

         }

         else{
            holder = (ViewHolder)row.getTag();
         }

         holder.time.setText(stops.get(position).getTime());
         holder.destination.setText("Kierunek:");
         holder.destinationName.setText(stops.get(position).getDestination());
         holder.stopName.setText(stops.get(position).getName());
         holder.stopStreet.setText(stops.get(position).getAddress());
         holder.lineNumber.setText(stops.get(position).getLine());

         if(stops.get(position).getOneWay()) 
              holder.stopOneWay.setText("P.jednokierunkowy");
         else 
              holder.stopOneWay.setText("");

         int line = Integer.parseInt(stops.get(position).getLine());

         if(line >= 50){
             holder.image.setImageResource(R.drawable.icon);
         }
         else{
             holder.image.setImageResource(R.drawable.icon2);
         }

         return row;
      }
    } 
```

## 完成活动：

```
 public class FinishActivity extends Activity {

       private ListView lv;
       private List<DisplayStop> stops;

       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_finish);

           lv = (ListView) findViewById(R.id.list);

           stops = getStops();//create several objects in list
           StopAdapter stopAdapter = new StopAdapter(this, R.layout.list_row, stops);
           lv.setAdapter(stopAdapter);     
       }
       else
        {
            Log.d("klop", "0 elementów");
        }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:33:53.790

好的，我发现了问题 - 这真的很愚蠢 - 在 StopAdapter 我犯了错误：

```
holder.destination = (TextView) row.findViewById(R.id.destination);
holder.destination = (TextView) row.findViewById(R.id.destinationName); 
```

所以目标中的文本为空。它应该是：

```
holder.destination = (TextView) row.findViewById(R.id.destination)
holder.destinationName = (TextView) row.findViewById(R.id.destinationName); 
```

一切都很好。感谢您的帮助 - 我知道最简单的错误是最难找到的 :)

# objective-c - 在 NSTableCellView 中定位文本

> ID：13630843
> 
> 赞同：2
> 
> 时间：2012-11-29T17:00:04.897
> 
> 标签：objective-c, cocoa

我在 Cocoa 中遇到问题，当我定义 tableView 的 rowHeight 时，NSTableCellView 的 textField 中的文本被截断。应该注意的是，所有元素都是以编程方式创建的。我对 Cocoa 有点陌生，我知道下面的很多内容可能低于狗早餐的质量，欢迎提出建议。

我的表是这样创建的：

```
 ....
 NSScrollView * tableContainer = [[NSScrollView alloc] initWithFrame:NSMakeRect(0, 0, returnView.frame.size.width, 100)];
 NSTableView * tableView = [[NSTableView alloc] initWithFrame:NSMakeRect(0, 0, tableContainer.frame.size.width, 100)];
 [tableView setRowHeight:30];
 NSLog(@"tableView was created with a row height of %f", [tableView rowHeight]);
 .... 
```

在 viewForTableColumn 方法中，我执行以下操作：

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

// get an existing cell with the MyView identifier if it exists

NSTableCellView *result = [tableView makeViewWithIdentifier:@"MyView" owner:self];

// There is no existing cell to reuse so we will create a new one
if (result == nil) {

    result = [[NSTableCellView alloc] initWithFrame:NSMakeRect(0, 0, tableView.bounds.size.width, [tableView rowHeight])];

    // the identifier of the NSTextField instance is set to MyView. This
    // allows it to be re-used
    result.identifier = @"MyView";
}

// result is now guaranteed to be valid, either as a re-used cell
// or as a new cell, so set the stringValue of the cell to the
// nameArray value at row
NSLog(@"tableView row height is %f", [tableView rowHeight]);
NSLog(@"Cell bounds is {%f,%f} %f x %f", result.bounds.origin.x, result.bounds.origin.y, result.bounds.size.width, result.frame.size.height);
NSTextField *cellTF = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, 100, result.bounds.size.height)];
NSLog(@"TextField size is {%f,%f} %f x %f", cellTF.frame.origin.x, cellTF.frame.origin.y, cellTF.frame.size.width, cellTF.frame.size.height);
[result addSubview:cellTF];
result.textField = cellTF;
[cellTF setBordered:NO];
[cellTF setEditable:NO];
[cellTF setDrawsBackground:NO];
result.textField.stringValue = @"hello";

NSLog(@"cell string value is now %@", [[result textField] stringValue]);

return result; 
```

}

我的日志输出如下（每行都有重复的日志条目）：

```
WHCCConnect[26394:f07] tableView was created with a row height of 30.000000
WHCCConnect[26394:f07] tableView row height is 30.000000
WHCCConnect[26394:f07] Cell bounds is {0.000000,0.000000} 200.000000 x 30.000000
WHCCConnect[26394:f07] TextField size is {0.000000,0.000000} 100.000000 x 30.000000
WHCCConnect[26394:f07] cell string value is now hello row! 
```

屏幕上的实际结果：

![在此处输入图像描述](../Images/70b8e43ebbea0fba67fa17407b33a3ee.png)

但是，如果我在创建表时**没有指定 rowHeight，如下所示：**

```
 NSScrollView * tableContainer = [[NSScrollView alloc] initWithFrame:NSMakeRect(0, 0, returnView.frame.size.width, 100)];
    NSTableView * tableView = [[NSTableView alloc] initWithFrame:NSMakeRect(0, 0, tableContainer.frame.size.width, 100)];
    //[tableView setRowHeight:30]; 
```

我得到这个作为输出（每行的重复日志条目被编辑）：

```
WHCCConnect[26458:f07] tableView was created with a row height of 17.000000
WHCCConnect[26458:f07] tableView row height is 17.000000
WHCCConnect[26458:f07] Cell bounds is {0.000000,0.000000} 203.000000 x 17.000000
WHCCConnect[26458:f07] TextField size is {0.000000,0.000000} 100.000000 x 17.000000
WHCCConnect[26458:f07] cell string value is now hello row! 
```

结果表如下所示：

![在此处输入图像描述](../Images/33c6e744b028c4cad0a0c7c60761ccea.png)

我究竟做错了什么？我怎样才能让这些爆破的行正确调整大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:14:08.510

您是否尝试过委托方法：

```
- (CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row; 
```

# android - 在 Android 中读取/写入外部 XML 文件

> ID：13630844
> 
> 赞同：10
> 
> 时间：2012-11-29T17:00:06.833
> 
> 标签：android, xml, database

我正在尝试了解有关在 Android 中读取/写入 XML 文件（作为一种数据库）的更多信息。我似乎找不到任何关于此的信息，所以我想我不知道要查找哪些术语。

我的目标是将两个editText字段中的用户名和密码写入文件，然后在我为我的应用程序创建登录功能时读取它们（并希望成功验证它们）。

我希望读/写的文件位于服务器上，所以这对我来说有点复杂。

如果有人可以帮助我找到有关读取/写入 XML 文件的教程，我将非常高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T18:03:08.497

这是写入 XML 文件的代码：

```
final String xmlFile = "userData";
String userNAme = "username";
String password = "password";
try {
    FileOutputStream fos = new  FileOutputStream("userData.xml");
    FileOutputStream fileos= getApplicationContext().openFileOutput(xmlFile, Context.MODE_PRIVATE);
    XmlSerializer xmlSerializer = Xml.newSerializer();              
    StringWriter writer = new StringWriter();
    xmlSerializer.setOutput(writer);
    xmlSerializer.startDocument("UTF-8", true);
    xmlSerializer.startTag(null, "userData");
    xmlSerializer.startTag(null, "userName");
    xmlSerializer.text(username_String_Here);
    xmlSerializer.endTag(null, "userName");
    xmlSerializer.startTag(null,"password");
    xmlSerializer.text(password_String);
    xmlSerializer.endTag(null, "password");             
    xmlSerializer.endTag(null, "userData");
    xmlSerializer.endDocument();
    xmlSerializer.flush();
    String dataWrite = writer.toString();
    fileos.write(dataWrite.getBytes());
    fileos.close();
}
catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch (IllegalArgumentException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch (IllegalStateException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

并从 XML 文件中读取数据，如下所示：

```
final String xmlFile = "userData";
ArrayList<String> userData = new ArrayList<String>();
try {
    fis = getApplicationContext().openFileInput(xmlFile);
    isr = new InputStreamReader(fis);
    inputBuffer = new char[fis.available()];
    isr.read(inputBuffer);
    data = new String(inputBuffer);
    isr.close();
    fis.close();
}
catch (FileNotFoundException e3) {
    // TODO Auto-generated catch block
    e3.printStackTrace();
}
catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
XmlPullParserFactory factory = null;
try {
    factory = XmlPullParserFactory.newInstance();
}
catch (XmlPullParserException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
}
factory.setNamespaceAware(true);
XmlPullParser xpp = null;
try {
    xpp = factory.newPullParser();
}
catch (XmlPullParserException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
}
try {
    xpp.setInput(new StringReader(data));
}
catch (XmlPullParserException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
int eventType = 0;
try {
    eventType = xpp.getEventType();
}
catch (XmlPullParserException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}
while (eventType != XmlPullParser.END_DOCUMENT){
    if (eventType == XmlPullParser.START_DOCUMENT) {
        System.out.println("Start document");
    }
    else if (eventType == XmlPullParser.START_TAG) {
        System.out.println("Start tag "+xpp.getName());
    }
    else if (eventType == XmlPullParser.END_TAG) {
        System.out.println("End tag "+xpp.getName());
    }
    else if(eventType == XmlPullParser.TEXT) {
        userData.add(xpp.getText());
    }
    try {
        eventType = xpp.next();
    }
    catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
String userName = userData.get(0);
String password = userData.get(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T00:01:05.067

*要在/storage/sdcard0/your_app_name/*中创建新文件，请使用以下命令：

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/" + "your_app_name" + "/" + xmlFile);
        file.createNewFile();
        FileOutputStream fileos = new FileOutputStream(file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T08:36:30.000

```
public class SkillsParser implements AssyncXmlReader {

    private String ns = "";
    @Override
    public Object parse(InputStream in) throws XmlPullParserException,
            IOException {
        try {
            XmlPullParser parser = Xml.newPullParser();
            parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
            parser.setInput(in, null);
            parser.nextTag();
            return readSkills(parser);
        } finally {
            in.close();
        }
    }

    private Object readSkills(XmlPullParser parser) throws XmlPullParserException, IOException {
        parser.require(XmlPullParser.START_TAG, ns, "skills");
        List<ESkill> skills = new ArrayList<ESkill>();

        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String name = parser.getName();
            // Starts by looking for the entry tag
            if (name.equals("skill")) {
                skills.add(readSkill(parser));
            } else {
                skip(parser);
            }
        }  
        return skills;
    }

    private ESkill readSkill(XmlPullParser parser) throws XmlPullParserException, IOException {
        /*
        <skill>
            <name>Software Engineering</name>

        </skill>
        */
        String skill_name = "";

        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }
            String name = parser.getName();
            if ("name".equals(name)) {
                skill_name = readName(parser);
            } else {
                skip(parser);
            }
        }

        return new ESkill().setSkill(skill_name);
    }

    // Processes title tags in the feed.
    private String readName(XmlPullParser parser) throws IOException, XmlPullParserException {
        parser.require(XmlPullParser.START_TAG, ns, "name");
        String description = readText(parser);
        parser.require(XmlPullParser.END_TAG, ns, "name");
        return description;
    }

    // For the tags title and summary, extracts their text values.
    private String readText(XmlPullParser parser) throws IOException, XmlPullParserException {
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    }

    private void skip(XmlPullParser parser) throws XmlPullParserException, IOException {
        if (parser.getEventType() != XmlPullParser.START_TAG) {
            throw new IllegalStateException();
        }
        int depth = 1;
        while (depth != 0) {
            switch (parser.next()) {
            case XmlPullParser.END_TAG:
                depth--;
                break;
            case XmlPullParser.START_TAG:
                depth++;
                break;
            }
        }
     }
} 
```

# git - Git - “假设不变”和“跳过工作树”之间的区别

> ID：13630849
> 
> 赞同：572
> 
> 时间：2012-11-29T17:00:25.543
> 
> 标签：git, git-index

我对不想提交到存储库的文件进行了本地更改。它是用于在服务器上构建应用程序的配置文件，但我想使用不同的设置在本地构建。自然，当我将“git status”作为要暂存的内容时，该文件总是会显示出来。我想隐藏这个特定的更改而不是提交它。我不会对文件进行任何其他更改。

澄清一下，使用 .gitignore 不是我想要的，因为这只会阻止添加新文件。我想忽略对存储库中已有文件的更改。

经过一番挖掘，我看到了 2 个选项：`assume-unchanged`和`skip-worktree`. 以前的问题[在这里](https://stackoverflow.com/questions/6138076/git-assume-unchanged-vs-skip-worktree)谈到了它们，但并没有真正解释它们的区别。

这两个命令有何不同？为什么有人会使用其中一个？

* * *

## 回答 #1

> 赞同：824
> 
> 时间：2012-11-29T17:39:42.173

你想要`skip-worktree`。

`assume-unchanged`专为检查一组文件是否已被修改的情况而设计；当您设置该位时，`git`（当然）假定与索引的该部分对应的文件在工作副本中没有被修改。所以它避免了混乱的`stat`电话。每当索引中的文件条目发生更改时（因此，当文件在上游更改时），该位都会丢失。

`skip-worktree`不仅如此：即使`git` *知道*文件已被修改（或需要由 a`reset --hard`等修改），它也会假装它没有被修改，而是使用索引中的版本。这一直持续到索引被丢弃。

此处对这种差异的影响和典型用例进行了很好的总结：http: [//fallengamer.livejournal.com/93321.html](http://fallengamer.livejournal.com/93321.html)。

从那篇文章：

*   `--assume-unchanged`假定开发人员**不应该**更改文件。此标志旨在**提高**SDK 等不更改文件夹的性能。
*   `--skip-worktree`当您指示 git 永远不要触摸特定文件时很有用，因为开发人员**应该**更改它。例如，如果上游的主存储库托管了一些生产就绪的**配置文件**，并且您不想意外提交对这些文件的更改，这`--skip-worktree`正是您想要的。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2014-05-22T12:36:12.897

注意：[fallgamer](http://fallengamer.livejournal.com/)在 2011 年进行了一些测试（因此它们可能已经过时），以下是他的[发现](http://fallengamer.livejournal.com/93321.html)：

**运营**

*   文件在本地存储库和上游都被更改
    **`git pull`**：
    无论如何，Git 都会保留本地更改。
    因此，您不会意外丢失用任何标志标记的任何数据。
    *   带有**`assume-unchanged`**标志的文件：Git 不会覆盖本地文件。相反，它会输出冲突和建议如何解决它们
    *   带有**`skip-worktree`**标志的文件：Git 不会覆盖本地文件。相反，它会输出冲突和建议如何解决它们

# 

*   文件在本地存储库和上游都发生了更改，无论如何都尝试拉取 使用会导致一些额外的手动工作，但至少如果您有任何本地更改，您不会丢失任何数据。
    **`git stash`**
    **`git pull`**
    `skip-worktree`
    *   带有**`assume-unchanged`**标志的文件：丢弃所有本地更改，无法恢复它们。效果就像'<code>git reset --hard'。'<code>git pull' 调用将成功
    *   带有**`skip-worktree`**标志的文件：Stash 不适用于`skip-worktree`文件。'<code>git pull' 将失败并出现与上述相同的错误。开发人员被迫手动重置`skip-worktree`标志，以便能够存储并完成失败`pull`。

# 

*   没有本地更改，上游文件已更改 这两个标志都不会阻止您获取上游更改。Git 检测到你违背了承诺，并选择通过重置标志来反映现实。
    **`git pull`**
    `assume-unchanged`
    *   带有**`assume-unchanged`**标志的文件：内容已更新，标志丢失。
        '<code>git ls-files -v' 将显示该标志已修改为`H`(from `h`)。
    *   带有**`skip-worktree`**标志的文件：更新内容，保留标志。
        '<code>git ls-files -v' 将显示`S`与`pull`.

# 

*   随着本地文件的更改 ，Git 不会触及文件并反映文件的现实（承诺不变的文件实际上已更改）。
    **`git reset --hard`**
    `skip-worktree``assume-unchanged`
    *   带有**`assume-unchanged`**标志的文件：文件内容被还原。标志重置为`H`（从`h`）。
    *   带**`skip-worktree`**标志的文件：文件内容完好无损。标志保持不变。

他补充了以下分析：

*   看起来**`skip-worktree`**正在**努力保存您的本地数据**。但是，如果它是安全的，它不会阻止您获取上游更改。另外 git 不会在`pull`.
    **但是忽略 '<code>reset --hard' 命令**对开发人员来说可能是一个令人讨厌的惊喜。

*   `Assume-unchanged`标志可能会在`pull`操作中丢失，并且此类文件中的本地更改对 git 似乎并不重要。

看：

*   [Junio（当前的 git 维护者）关于意图的评论`assume-unchanged`](http://git.661346.n2.nabble.com/gitignore-vs-exclude-vs-assume-unchanged-td7607901.html)，

    特别是，Junio 指出对`assume-unchanged`文件的更改可能会意外提交：“如果 Git 可以确定标记为`assume-unchanged`已更改的路径而不会产生额外的 lstat(2) 成本，它保留报告该路径 *已被*修改的权利（因此，`git commit -a`可以自由提交该更改）。”

*   [添加patch后 git mailing list 中讨论的`assume-unchanged`和之间的区别`skip-worktree``skip-worktree`](https://web.archive.org/web/20121101153738/http://osdir.com:80/ml/git/2009-12/msg01123.html)。

他总结道：

**实际上，这两个标志都不够直观**。

*   **`assume-unchanged`**假定开发人员不应该更改文件。如果一个文件被改变了——那么这个改变并不重要。此标志旨在提高 SDK 等不更改文件夹的性能。
    但是如果承诺被破坏并且文件实际上被更改，git 会恢复标志以反映现实。可能在通常不打算更改的文件夹中有一些不一致的标志是可以的。

*   另一方面**`skip-worktree`**，当您指示 git 永远不要触摸特定文件时很有用。这对于已经跟踪的配置文件很有用。
    上游主存储库托管一些生产就绪配置，但您希望更改配置中的一些设置以便能够进行一些本地测试。并且您不想意外检查此类文件中的更改以影响生产配置。在那种情况下`skip-worktree`制作完美的场景。

* * *

使用 Git 2.25.1（2020 年 2 月），进一步澄清了上面提到的“实际上这两个标志都不够直观”：

请参阅[提交 7a2dc95](https://github.com/git/git/commit/7a2dc95cbc25b4b82cff35931f69f8a5aafeb878)和[提交 1b13e90](https://github.com/git/git/commit/1b13e9032f039c8cdb1994dd092ff2ed32af5cf5)（2020 年 1 月 22 日），作者是[brian m。卡尔森 ( `bk2204`)](https://github.com/bk2204) .
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 53a8329](https://github.com/git/git/commit/53a83299c7cf7d101342400a6fcc6ba7650e3612)中，2020 年 1 月 30 日）)
（[Git 邮件列表](https://public-inbox.org/git/20200120173343.4102954-5-sandals@crustytoothpaste.net/T/#u)）

> ## [`doc`](https://github.com/git/git/commit/1b13e9032f039c8cdb1994dd092ff2ed32af5cf5): 劝阻用户不要试图忽略跟踪的文件
> 
> ^(签字人：Jeff King)
> ^(签字人：brian m. 卡尔森)
> 
> 用户想要忽略 Git 跟踪的文件的更改是很常见的。
> 
> 这种情况的常见场景是 IDE 设置和配置文件，它们通常不应该被跟踪，并且可能使用模板机制从跟踪的文件中生成。
> 
> 但是，用户了解了假设不变和跳过工作树位并尝试使用它们来执行此操作。
> 
> [`git checkout`](https://git-scm.com/docs/git-checkout)这是有问题的，因为当设置了这些位时，许多操作会按照用户的预期进行，但在需要替换文件时它们通常无济于事。
> 
> 在这种情况下没有明智的行为，因为有时数据很宝贵，例如某些配置文件，有时用户会很乐意丢弃不相关的数据。
> 
> **由于这不是受支持的配置，并且用户很容易将现有功能误用于非预期目的，从而导致普遍的悲伤和困惑**，让我们在文档中记录现有行为和陷阱，[`git update-index`](https://git-scm.com/docs/git-update-index)以便用户知道他们应该探索替代解决方案。
> 
> 此外，让我们提供一个推荐的解决方案来处理配置文件的常见情况，因为在许多环境中成功使用了众所周知的方法。

[`git update-index`手册页](https://github.com/git/git/blob/1b13e9032f039c8cdb1994dd092ff2ed32af5cf5/Documentation/git-update-index.txt#L552-L567)现在包括：

> 用户经常尝试使用`assume-unchanged`和`skip-worktree`位来告诉 Git 忽略对被跟踪文件的更改。这不像预期的那样工作，因为 Git 在执行某些操作时可能仍会根据索引检查工作树文件。一般来说，Git 不提供忽略跟踪文件更改的方法，因此建议使用替代解决方案。
> 
> 例如，如果您要更改的文件是某种配置文件，则存储库可以包含一个示例配置文件，然后可以将其复制到忽略的名称中并进行修改。存储库甚至可以包含一个脚本，将示例文件视为模板，自动修改和复制它。

最后一部分是我描述的[基于 smudge/clean 脚本的典型内容过滤器驱动程序](https://stackoverflow.com/a/59484661/6309)。

# iphone-5 - iPhone-5 兼容问题

> ID：13630851
> 
> 赞同：1
> 
> 时间：2012-11-29T17:00:25.703
> 
> 标签：iphone-5, iphone-4

我为 ios 4.0 开发了一个 ios 应用程序。那是基于导航的应用程序。现在我希望它也支持 iPhone-5 我想我在检查设备版本后更改了 xib，我面临问题 xib 已更改但它的视图高度未更改.如果其他人面临这个问题怎么可能请与我分享想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:10:00.153

在应用程序代表： -

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

//----------------HERE WE SETUP FOR IPHONE 4/4s/iPod----------------------

if(iOSDeviceScreenSize.height == 480){

   self.viewController = [[ViewController alloc]   initWithNibName:@"ViewController_4inch" bundle:nil];

    NSLog(@"iPhone 4: %f", iOSDeviceScreenSize.height);

}

//----------------HERE WE SETUP FOR IPHONE 5----------------------

if(iOSDeviceScreenSize.height == 568){

    self.viewController = [[ViewController alloc]   initWithNibName:@"ViewController_5inch" bundle:nil];
     NSLog(@"iPhone 5: %f", iOSDeviceScreenSize.height);

}

 return YES;
 } 
```

其作品 ！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:11:23.627

将 iOS 6 设置为 Base SDK 并使用 Auto Layout 功能制作可以针对所有类型的屏幕进行缩放的屏幕。您需要 Xcode 4.5 来执行此操作。

在此处开始使用自动布局：http:
[//www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)
[http://www.raywenderlich.com/20897/beginning-auto-layout-第 2 部分，共 2 部分](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

如果您仍想支持 iOS 4.0，请为不同的屏幕尺寸创建单独的 .xib 文件，并在启动时适当加载它们。

要根据您的屏幕大小加载不同的 nib 文件，在您的应用程序委托中，您需要在 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 中添加/替换以下代码

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_4inch" bundle:nil];
} else {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
} 
```

`ViewController_4inch`为 iPhone 5 屏幕设计的 nib 文件的名称在哪里

# rest - 使用注释通过基本身份验证保护 Glassfish REST 服务

> ID：13630854
> 
> 赞同：2
> 
> 时间：2012-11-29T17:00:35.267
> 
> 标签：rest, annotations, glassfish, glassfish-3, basic-authentication

我一直在尝试保护一个应用程序，该应用程序使用注释而不是部署描述符部署到 glassfish 3。但是，我无法让它正常工作。如果我尝试访问该服务，最终会出现服务器错误 500，其中显示以下消息：

```
type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: javax.ejb.AccessLocalException: Client not authorized for this invocation
root cause

javax.ejb.AccessLocalException: Client not authorized for this invocation 
```

EJB 看起来像这样：

```
@Path("/myresource")
@Stateless
@RolesAllowed("user-role")
public class MyResource {

    @GET
    @Path("/{uuid}")
    public Response getData(@PathParam("uuid") final String uuid) {
            ....
    }
} 
```

太阳-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC "-//Sun Microsystems, Inc.//DTD GlassFish Application Server 3.0 Servlet 3.0//EN" 
"http://www.sun.com/software/appserver/dtds/sun-web-app_3_0-0.dtd">
<sun-web-app>
    <security-role-mapping>
        <role-name>user-role</role-name>
        <group-name>user-group</group-name>
    </security-role-mapping>
</sun-web-app> 
```

这是 web.xml：

```
<web-app id="myservice" version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>org.test.myservice</display-name>

    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>org.test.myservice.rest</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>file</realm-name>
    </login-config>

    <security-role>
        <role-name>user-role</role-name>
    </security-role>
</web-app> 
```

glassfish 中的文件领域是使用 sun-web.xml 中指定的用户和角色设置的，并且在通过部署描述符设置应用程序安全性时运行良好。

如果我正确理解了本文档，我不必链接安全角色引用（如果它们的名称相同）。[http://docs.oracle.com/javaee/5/tutorial/doc/bnbyl.html#bnbyt](http://docs.oracle.com/javaee/5/tutorial/doc/bnbyl.html#bnbyt) 有什么我想念的想法吗？

**编辑** 与无法通过注解指定所需信息的问题相关，还有一个问题，引起了我对这个问题的思考。也许这会使最初的问题更清楚一点：以上面的例子为例，资源 /myresource/* 仅适用于角色为“user-role”的用户。但是，如果在路径 /myresource/*/thumbnail （转换为 /myresource/[uuid]/thumbnail）处有第二个资源应该无需身份验证即可使用，则通过使用 url-mapping 指定安全约束是不可能的，因为似乎不可能在常量之间使用通配符。但是，这可以通过指定角色来实现，这些角色允许通过注释访问方法。如上所述，我无法这样做。这样的映射怎么可能完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:29:43.547

您需要使用 web.xml 描述符中的[security-constraint](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1017885)元素来阻止特定资源和路径，并指定授权约束。

这并不意味着您不能使用 Programmatic Security 添加更细粒度的控件，如[Oracle 的 Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxe.html)中所述：

> 程序化安全嵌入在应用程序中，用于做出安全决策。当仅声明式安全不足以表达应用程序的安全模型时，程序安全很有用。

* * *

根据您**编辑**的问题。

我会使用该`security-constraint`元素来阻止对所有非注册用户的访问。这将强制每个人进行身份验证，以便您的应用程序知道他们拥有的角色。然后，您可以使用编程安全性精细控制对各种资源的访问。

有了基本身份验证，我想没有其他方法了。如果您想避免对基本用户进行身份验证，则需要使用表单身份验证并在后台以编程方式处理身份验证，即使他们不知道，也可以使用[HttpServletRequest#login()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29)对其进行身份验证。

在这两种方式中，您都应该能够按照您描述的方式设置权限。如果您想更顺利地处理未经授权的异常，您最好删除`@RolesAllowed`注释并改用以下内容：

```
@GET
@Path("/{uuid}")
public Response getData(@PathParam("uuid") final String uuid, @Context SecurityContext sc) {
    if (sc.isUserInRole("MyRole")) {
        return result;
    } else {
        return notAllowedResult;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:42:13.100

Roles-Allowed 是一个 EJB 构造，与对资源的访问不一致，由安全约束处理。

不幸的是，这两个安全概念并没有像应有的那样紧密结合，如果您没有获得授权（Web 概念），您不会得到 401，而是会收到您正在接收的安全异常（和 EJB 概念）。事实上，如果您使用 RolesAllowed 注释 EJB Web 服务并尝试使用无效角色访问 Web 服务，我不知道您会收到什么错误。在这种情况下，我假设您会遇到 SOAP 错误。

EJB 安全性是一个将未经授权的人员拒之门外的系统，但它是最后的努力。它假定任何将人们路由到方法调用的决定都已经预先完成。例如，没有高级方法来测试一个方法是否被允许，而你只能调用它并捕获异常。

因此，严酷的事实超出了粗略的看门人，您想要利用程序安全性。

# sql - 如何将表连接到自身并在 SQL 中选择最大值

> ID：13630855
> 
> 赞同：11
> 
> 时间：2012-11-29T17:00:38.610
> 
> 标签：sql, db2, ibm-midrange

我有一张`contracts`桌子：

```
contractId    date       price     partId
1             20120121   10        1
2             20110130   9         1
3             20130101   15        2
4             20110101   20        2 
```

最大的合约`date`是活跃合约（别怪我，我怪infor创建xpps）

我需要创建查询以仅查看有效合同（每部分一份合同，日期最高的合同）。

所以查询的结果应该是这样的：

```
contractId    date       price     partId
1             20120121   10        1
3             20130101   15        2 
```

我在这里没有想法，我尝试了自我加入表格，我尝试了聚合函数，但我无法弄清楚。如果有人有任何想法，请与我分享..

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T17:04:00.493

这将适用于几乎所有 RDBM，

```
SELECT  a.*
FROM    tableName A
        INNER JOIN
        (
            SELECT partID, MAX(date) maxDate
            FROM    tableName
            GROUP BY partID
        ) B on a.partID = b.partID AND
                a.date = b.maxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6ea54/1)

如果您的 RDBMS 支持`Window Function`，

```
SELECT  contractId ,date, price,partId
FROM    
(
    SELECT contractId ,date, price,partId,
            ROW_NUMBER() OVER (PARTITION BY PartID
                                ORDER BY date DESC) rn
    FROM    tableName
) s
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/e4df6/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:07:21.217

```
SELECT c.*
FROM contracts c
    INNER JOIN 
    (
        SELECT partId, MAX([date]) AS MaxDate
        FROM contracts
        GROUP BY partID
    ) MaxDate
        ON c.partId = MaxDate.partID
            AND c.[date] = MaxDate.[date] 
```

# apache - 带有 mod_jk / Tomcat 6.0 的 Apache 2.2 / 使用 2 次战争删除上下文路径

> ID：13630859
> 
> 赞同：2
> 
> 时间：2012-11-29T17:00:56.467
> 
> 标签：apache, tomcat, mod-jk

我目前正在使用一个独特的服务器来托管 2 个 Java EE 应用程序。服务器是 Linux Debian 6，带有 Apache 2 和 Tomcat 6。我使用 mod_jk 来从 url 中删除端口。

到目前为止，这些应用程序都可以在 url http://myserver/app1 和 http://myserver/app2 上使用

我有一些新的 dns，我想使用 http://dnsname1/ 和 http://dnsname2/ 之类的 url 访问这些应用程序

带有命名虚拟主机的 Apache 2 设置是成功的，并且 http://dnsname1/ 得到了很好的回答。我需要添加上下文以访问应用程序，例如 http://dnsname1/app1。

但我想在不添加上下文路径的情况下访问应用程序，例如 http://dnsname1/

这是 apache2 虚拟主机配置：

```
NameVirtualHost xxx.xxx.xxx.xxx:80
ServerName myserver

<VirtualHost xxx.xxx.xxx.xxx:80>
    ServerName dnsname1
    ServerAdmin me@mydomain.fr

    DocumentRoot /app1/www

    ErrorLog /app1/logs/app1_errors.log
    CustomLog /app1/logs/app1_access.log combined
    LogLevel warn

    JkMount /app1 ajp13
    JkMount /app1* ajp13
    JkLogFile /app1/logs/app1-mod_jk.log
    JkLogLevel debug
    JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
</VirtualHost>
<VirtualHost xxx.xxx.xxx.xxx:80>
    ServerName dnsname2
    ServerAdmin me@mydomain.fr

    DocumentRoot /app2/www

    ErrorLog /app2/logs/app2_errors.log
    CustomLog /app2/logs/app2_access.log combined
    LogLevel warn

    JkMount /app2 ajp13
    JkMount /app2* ajp13
    JkLogFile /app2/logs/app2-mod_jk.log
    JkLogLevel debug
    JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "
</VirtualHost> 
```

有人可以告诉我如何设置我的虚拟主机吗？

# android - 使用游标和查询将数据从数据库填充到 ListView

> ID：13630861
> 
> 赞同：0
> 
> 时间：2012-11-29T17:01:14.667
> 
> 标签：android, database, sqlite, listview, cursor

我会开始但说没有错误，我根本不知道如何编码。我有一个包含一个表的数据库，其中有 4 列和 30 行。

这是我从资产文件夹复制数据库（它是静态的）的代码：我的 DBHandler 类：

```
public class DBHandler extends SQLiteOpenHelper {
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat
                                                // window
// destination path (location) of our database on device
private static String DB_PATH = "";
private static String DB_NAME = "CookbookDB";// Database name
private SQLiteDatabase mDataBase;
private final Context mContext;

public DBHandler(Context context) {
    super(context, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.mContext = context;
}

public void createDataBase() throws IOException {
    // If database doesn't exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    try {
        if (!mDataBaseExist) {

            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        }
        this.getReadableDatabase();
        this.close();
    } catch (SQLiteException e) {
        throw new Error("ErrorCopyingDataBase");

    }

}

// Check that the database exists here: /data/data/your
// package/databases/DaName
private boolean checkDataBase() {
    File dbFile = new File(DB_PATH + DB_NAME);
    // Log.v("dbFile", dbFile + "   "+ dbFile.exists());
    return dbFile.exists();
}

// Copy the database from assets
private void copyDataBase() throws IOException {
    InputStream mInput = mContext.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream mOutput = new FileOutputStream(outFileName);
    byte[] mBuffer = new byte[1024];
    int mLength;
    while ((mLength = mInput.read(mBuffer)) > 0) {
        mOutput.write(mBuffer, 0, mLength);
    }
    mOutput.flush();
    mOutput.close();
    mInput.close();
}

// Open the database, so we can query it
public boolean openDataBase() throws SQLException {
    String mPath = DB_PATH + DB_NAME;
    // Log.v("mPath", mPath);
    mDataBase = SQLiteDatabase.openDatabase(mPath, null,
            SQLiteDatabase.CREATE_IF_NECESSARY);
    // mDataBase = SQLiteDatabase.openDatabase(mPath, null,
    // SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    return mDataBase != null;
}

@Override
public synchronized void close() {
    if (mDataBase != null)
        mDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

}

} 
```

我的数据适配器类：

```
import java.io.IOException;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class DataAdapter {
protected static final String TAG = "DataAdapter";

private final Context mContext;
private SQLiteDatabase mDb;
private DBHandler mDbHelper;

public DataAdapter(Context context) {
    this.mContext = context;
    mDbHelper = new DBHandler(mContext);
}

public DataAdapter createDatabase() throws SQLException {
    try {
        mDbHelper.createDataBase();
    } catch (IOException mIOException) {
        Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
        throw new Error("UnableToCreateDatabase");
    }
    return this;
}

public DataAdapter open() throws SQLException {
    try {
        mDbHelper.openDataBase();
        mDbHelper.close();
        mDb = mDbHelper.getReadableDatabase();
    } catch (SQLException mSQLException) {
        Log.e(TAG, "open >>" + mSQLException.toString());
        throw mSQLException;
    }
    return this;
}

public void close() {
    mDbHelper.close();
}

public Cursor getTestData() {
    try {
        String sql = "SELECT * FROM CookbookTable";

        Cursor mCur = mDb.rawQuery(sql, null);
        if (mCur != null) {
            mCur.moveToNext();
        }
        return mCur;
    } catch (SQLException mSQLException) {
        Log.e(TAG, "getTestData >>" + mSQLException.toString());

        throw mSQLException;
    }
}
} 
```

复制数据库的实现是：

```
DataAdapter mDbHelper = new DataAdapter(getBaseContext());
mDbHelper.createDatabase(); 
```

我不知道如何正确使用游标查询。我什至不知道我在这两个类上的 open 方法是否合法。如何从我的数据库访问信息？我设法复制了它，但仅此而已，从这里我被卡住了。如果我只有一个复制整个列的示例（可以说用作 ListView 的项目名称），我想我可以将其背后的逻辑实现到我的整个项目中。

任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:12:38.173

引用[文档](http://developer.android.com/guide/topics/data/data-storage.html#db)：

> 有关演示如何在 Android 中使用 SQLite 数据库的示例应用程序，请参阅[Note Pad](http://developer.android.com/resources/samples/NotePad/index.html)和[Searchable Dictionary](http://developer.android.com/resources/samples/SearchableDictionary/index.html)应用程序。

本教程涵盖基础知识：[将 SQLite 数据库与 ListView 一起使用](http://kahdev.wordpress.com/2010/09/27/android-using-the-sqlite-database-with-listview/)

# objective-c - Objective-c 打印一个 const Void 变量

> ID：13630866
> 
> 赞同：-3
> 
> 时间：2012-11-29T17:01:21.630
> 
> 标签：objective-c, pointers, printf

打印 const void* 的值我需要做什么？

例如：

```
- (void) printConstVoid:(const void*)value
{
    NSLog("%?",value); //or anything else print the value
} 
```

多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T17:59:45.143

问题是，`const void *`这只是一种说法，“这是一个指向某物的指针”。它没有告诉您实际是什么，因此打印它的唯一通用方法是使用 Macmade 提到的“%p”格式说明符，它将显示指针值。

为了打印指向的东西，你需要知道那个东西是什么。事实上，除了传递它之外，为了做任何*事情*`const void *`，你需要将它转换为更具体的类型。A`const void *`在你施放之前是完全不透明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:03:06.173

```
NSLog( @"%p", value ); 
```

它将打印指针值（内存地址）。

# .net - 嵌套事务 - MSDTC

> ID：13630867
> 
> 赞同：2
> 
> 时间：2012-11-29T17:01:27.230
> 
> 标签：.net, transactions, msdtc

我在我的应用程序中设置事务时遇到问题。当我执行轻量级事务时，它可以工作：

```
using (TransactionScope tx = new TransactionScope())
{
  // Connect to Server 1 in a transaction

  tx.Complete()
} 
```

当我进行嵌套事务时，它失败了：

```
using (TransactionScope tx = new TransactionScope())
{
  // Connect to Server 1 in a transaction

    using (TransactionScope tx2 = new TransactionScope())
    {
      // Connect to Server 2 in a transaction

      tx2.Complete()
    }

  tx.Complete()
} 
```

我得到的错误是：

```
 The MSDTC transaction manager was unable to pull the transaction from the source transaction manager due to communication problems. Possible causes are: a firewall is present and it doesn't have an exception for the MSDTC process, the two machines cannot find each other by their NetBIOS names, or the support for network transactions is not enabled for one of the two transaction managers. (Exception from HRESULT: 0x8004D02B) 
```

当我在服务器上运行相同的确切代码时，它可以工作。我在我的计算机上运行/配置了 MSDTC（设置与服务器相同）。

我们的网络部门说他们在防火墙上没有看到任何被阻止的流量。

我可以从我的计算机 DTC Ping 到服务器，但不能从服务器返回。

有任何想法吗？我认为这是一个网络问题，但需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:05:20.823

> > 我可以从我的计算机 DTC Ping 到服务器，但不能从服务器返回。

好像是这个原因。MSDTC 要求两台机器可以通过 NetBios 名称看到对方。您应该能够使用“nbtstat -a xxx.xxx.xxx.xxx”来解析 IP 以两种方式命名。

还必须在两台机器上打开端口 135。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:37:58.443

原来是防火墙问题。谢谢。

# android - 有没有办法链接到开发者的所有 Google Play 商店应用程序？

> ID：13630868
> 
> 赞同：17
> 
> 时间：2012-11-29T17:01:31.857
> 
> 标签：android, google-play

在我的应用中，我希望允许用户打开 Google Play 商店以查看我的所有其他应用。在 iOS 中，我只是使用以下（示例）iTunes 链接将它们全部拉起：

[https://itunes.apple.com/us/artist/electronic-arts/id284800461?mt=8](https://itunes.apple.com/us/artist/electronic-arts/id284800461?mt=8)

有没有办法让我的所有应用程序都显示（除了搜索我的公司名称，这是相当通用的）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-29T17:08:07.387

搜索产品，包括`pub:`标签，可以在题为[Linking to your products](http://developer.android.com/distribute/googleplay/promote/linking.html)的 API 页面中找到。请注意，通过 URL 进行搜索需要不同的方法。两者都包括在这里。像这样开始一个意图：

```
try {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=pub:Developer+Name+Here")));
} catch (android.content.ActivityNotFoundException anfe) {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/developer?id=Developer+Name+Here")));
} 
```

请注意，市场不适用于模拟器，因此此代码将改为将其拉到 URL 中。此方法[由此答案](https://stackoverflow.com/a/10922920/544198)提供。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-29T17:06:30.827

只需使用开发人员参数。这是谷歌的快捷方式

`https://play.google.com/store/apps/developer?id=Google+Inc.`

[谷歌的应用](https://play.google.com/store/apps/developer?id=Google%20Inc.)

如果有空格，只需在作品之间加上 +

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-29T17:36:21.363

Android 实际上有更好的方法来处理这个问题。

您还可以按包名称对所有应用程序进行分组，前提是您有纪律去实际考虑它。例如，如果我所有的应用程序都以 com.mycompanyname.androidappname 开头，我可以简单地搜索[https://play.google.com/store/search?q=com.mycompanyname](https://play.google.com/store/search?q=com.mycompanyname) .*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-24T06:47:16.153

现在这里描述了另一种方法

[https://developer.android.com/distribute/marketing-tools/linking-to-google-play#OpeningPublisher](https://developer.android.com/distribute/marketing-tools/linking-to-google-play#OpeningPublisher)

例如谷歌公司 [https://play.google.com/store/apps/dev?id=5700313618786177705](https://play.google.com/store/apps/dev?id=5700313618786177705)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-04T06:08:20.487

> **你可以用这个，它对我有用**

```
private void moreApps(Context context, int devName){
        try {
            context.startActivity(new Intent(Intent.ACTION_VIEW,
                    Uri.parse(context.getString(R.string.url_market_search_app)
                            + context.getString(devName))));
        } catch (android.content.ActivityNotFoundException anfe) {
            try {
                context.startActivity(new Intent(Intent.ACTION_VIEW,
                        Uri.parse(context.getString(R.string.url_playstore_search_app)
                                + context.getString(devName))));
            } catch (Exception e) {
                Toast.makeText(context,
                        R.string.install_google_play_store,
                        Toast.LENGTH_SHORT).show();
            }
        }

} 
```

# canvas - KineticJS Container.getIntersections 非常慢

> ID：13630869
> 
> 赞同：2
> 
> 时间：2012-11-29T17:01:33.453
> 
> 标签：canvas, collision-detection, kineticjs, intersection

我需要检测我的 HTML5 画布中的碰撞（我正在使用 KineticJS 库），到目前为止，我已经使用我自己的方法来检测某个点是否在某个形状内。

我最近注意到 Container 类中有一个方法 getIntersections(point) 应该完全符合我的要求。但是，它似乎非常慢，因此当在画布上移动对象并为每个新位置使用该方法时，它变得无法使用。

有没有人使用这种方法进行碰撞检测？如果没有，是否有任何关于 HTML5 画布中碰撞检测的提示？我无法检测一个点是否在一个旋转一定度数的矩形内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:02:05.810

我注意到了同样的事情，getIntersections 需要很长时间。它也被称为鼠标事件等，这使得情况变得更糟。

我不知道如何使它更快，但是会显着影响速度的一件事是您在舞台上拥有的 Shapes 数量。因此，加快速度的一种方法是在不需要时删除不必要的 Shapes，并在需要时动态地将它们带回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:05:22.707

我在手机游戏（空中交通管制的模拟）中使用了 getIntersection()，它工作得很好，因为它被多次调用以检测游戏框架中所有现有飞机之间的碰撞。如果您只需要检测一个特定点，一种可能的解决方案是为该位置添加一个非常小的虚拟矩形，并获取与其相交的所有对象的列表并遍历该列表。命名感兴趣的对象可以加快您的条件验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T07:38:47.587

[https://github.com/ericdrowell/KineticJS/issues/150](https://github.com/ericdrowell/KineticJS/issues/150)

这正是您所需要的。

> 好的，要清楚，有两种方法可以根据鼠标位置获得相交的形状：
> 
> 1) getIntersection() - 首选 2) getIntersections() - 非常慢，应该用于特殊情况
> 
> getIntersection() 方法速度极快，并返回一个包含有关交点信息的对象，例如对 KineticJS 形状的引用（如果存在）或像素颜色信息。
> 
> getIntersections() 方法做同样的事情，除了它迭代并重绘舞台中的每个节点，以返回可能已经分层的交叉点的集合。
> 
> 100 次中有 99 次，您可能只对位于其下方节点顶部的可见相交节点感兴趣。
> 
> 实际上，我已经考虑过完全删除 getIntersections() 方法，但没有考虑过，因为在某些特殊情况下，您确实需要交叉点的集合。目前，我还没有找到加快 getIntersections 的方法，尽管我会继续研究它。

# python - python函数生成源的SCons和依赖项

> ID：13630884
> 
> 赞同：3
> 
> 时间：2012-11-29T17:02:14.753
> 
> 标签：python, scons

**编辑**完全重写的例子，问题是一样的。

我有`SConsctruct`文件：

```
env = Environment()

def write_main( out ):
    out.write("""
              #include <iostream>

              int main(int argc, char **argv)
              {{
                std::cout << "[{0}]" << std::endl;
                return 0;
              }}

              \n""".format(ARGUMENTS.get('print', 'nothing'))
            )

def generate_main(env, target, source):
    with open( env.GetBuildPath( target[0] ), 'w') as out:
        write_main( out )

main_builder = env.Builder( action = generate_main )
main_cpp = main_builder( env, env.GetBuildPath('main.cpp'), [] )

prog = env.Program( target='main', source=main_cpp ) 
```

现在，如果我运行：

```
$ scons print=one && ./main 
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
generate_main(["main.cpp"], [])
g++ -o main.o -c main.cpp
g++ -o main main.o
scons: done building targets.
[one]

$ scons print=two && ./main
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
scons: `.' is up to date.
scons: done building targets.
[one]

$ rm main.cpp
$ scons print=two && ./main
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
generate_main(["main.cpp"], [])
g++ -o main.o -c main.cpp
g++ -o main main.o
scons: done building targets.
[two] 
```

所以你可以清楚地看到中间的构建是不正确的。如何解决？

**注意**：如果我将主体移动`write_main`到`generate_main`（所以我只有一个功能）它会正确重建。

**注意**：

我能想到的一种解决方案是为所有函数提供`target`对象，以便它们可以`Depends`显式调用。在那个例子中，这意味着调用类似的东西：

```
Depends( target, env.Variable( ARGUMENTS.get('print', 'nothing') ) ) 
```

有没有其他方法可以让我保持当前签名`write_main`而不需要任何关于它的知识`generate_main`？

以及如何对一段代码强制执行特定的语法突出显示？（在上面的外壳输出中得到奇怪/不正确的颜色）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:50:10.933

[您可以使用Depends](http://www.scons.org/doc/production/HTML/scons-user/x1220.html) () 函数在 SCons 中创建显式依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T07:20:56.610

您似乎已经发现基本问题是 SCons`main.cpp`在分析时不知道您生成的文件的内容。因此，它根本不会在您第二次运行时重建，因为没有任何依赖关系发生变化。您需要的是使`env.Builder( action = generate_main )`构建器依赖于输入参数。这样，如果输入参数发生变化，它将重建`main.cpp`. 有几种方法可以获得这个。我能想到的一种方法是将您的论点添加到环境中，因为构建者在构建时会考虑环境。它可能看起来像：

```
env.inputArguments = ARGUMENTS.get('print', 'nothing') 
```

放置在您的正上方`main_builder = env.Builder( action = generate_main )`

希望对您有所帮助

# css - Firefox 17 和基于 CSS 边框的三角形无法正确呈现

> ID：13630886
> 
> 赞同：8
> 
> 时间：2012-11-29T17:02:18.337
> 
> 标签：css, firefox, geometry, border

像许多前端开发人员一样，我一直在使用边框技巧在 CSS 中呈现三角形。 [http://apps.eky.hk/css-triangle-generator/](http://apps.eky.hk/css-triangle-generator/)这个生成器有助于这项技术。

今天，Firefox 团队发布了一个新版本，没有任何关于渲染引擎的明确变更日志。

现在我们可以在这些三角形周围看到一个不优雅的灰色边框。我还没有找到摆脱它的窍门。编辑：更容易看到你是否将“象棋透明”背景强制为“绿色”之类的东西

最重要的是，在 Firefox 17 之前，当人们抱怨这些三角形看起来有多么锯齿时，另一个技巧是将边框样式属性设置为“虚线”而不是实线。

在三角形生成器上使用 firebug，您可以快速看到它现在是如何显示的。

有谁知道解决这个问题？

编辑：按照建议使用边框样式：插图在我的 FF17 上呈现较浅的颜色

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-13T20:14:29.207

这种 Adeher 修复和其他虚线边框修复的组合似乎完美地解决了 FF23 中的问题。

长篇：

```
border-top: 10px solid #FF0000;
border-left: 30px dotted rgba(255, 0, 0, 0);
border-right: 30px dotted rgba(255, 0, 0, 0); 
```

将 Adeher 的 rgba() 修复与虚线边框修复（但仅在透明边框上）相结合似乎可以呈现一个完美的三角形，而没有难看的模糊边框。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T08:19:15.997

好的，这是我迄今为止最好的解决方案：

获取三角形的 rgb 值，并将其用作 0 不透明度 rgba，而不是三角形相对边界的“透明”。

保持旧语法基于“透明”将作为 IE8 的后备

最终是这样的：

```
border-color: transparent transparent transparent #ffffff;
border-color: rgba(255,255,255,0) rgba(255,255,255,0) rgba(255,255,255,0) #ffffff; 
```

正如回复中所说：按照建议将边框样式设置为“插入”会改变 FF17 上的颜色。

我希望有人会找到一个更简单的解决方案，或者这篇文章会帮助其他人。

# php - 在 PHP 中将错误转换为异常 - 脚本执行

> ID：13630888
> 
> 赞同：0
> 
> 时间：2012-11-29T17:02:19.397
> 
> 标签：php, oop

我听说将所有错误转换为异常是一个好习惯。我完全同意这一点，该解决方案的众多优点之一是我只有一个处理程序，而不是两个单独的处理程序——用于错误和异常。

但是，将通知/警告转换为异常会在发生异常时停止脚本执行。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:05:22.593

您必须小心使用异常处理错误。对此有两种思想流派。

一所学校指出，对错误使用异常是一件坏事，通常应谨慎使用异常，因为它们可能导致控制流混乱。

另一所学校喜欢它们，因为必须处理异常，并且它们可以防止您的代码被 if 语句弄乱。

无论如何，如果您使用异常，您必须决定正确处理。当你抓住它们时会发生什么？你能恢复吗？你将如何康复？你会优雅地终止吗？

简单地使用异常并不是故事的结局，也不是​​很长的一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:06:28.723

您可以捕获异常。示例函数：

```
function myFunction($num){
    if(!is_int($num)){
        throw new Exception('Int expected. ' . gettype($num) . ' given instead.');
    }
} 
```

然后捕获任何可能会或可能不会抛出的异常（**如果**捕获它们是有意义的）：

```
try{
    myFunction('Hello?');
}
catch(Exception $e){
    //Do something
    var_dump($e);
} 
```

您还应该查看函数[set_exception_handler](http://php.net/manual/en/function.set-exception-handler.php)：

> 如果在 try/catch 块中未捕获到异常，则设置默认异常处理程序。调用 exception_handler 后将停止执行。

# java - 如何停止软键盘默认出现在android中

> ID：13630889
> 
> 赞同：0
> 
> 时间：2012-11-29T17:02:22.940
> 
> 标签：java, android

我正在编写一个在主要活动上带有两个 EditText 的 android 应用程序。我的问题是，一旦主要活动开始，软键盘就会自动出现。我希望软键盘仅在用户单击 EditText 组件时出现。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:05:58.097

试试这个，

```
 <EditText android:id="@+id/edit_text_id"
      ..
      android:focusable="false" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:15:56.963

在您的活动中，在您的`onCreate`方法中，输入以下内容

```
edittext.setFocused(false); 
```

然后之后（以不同的方法，也许是`onClickListener`你的编辑文本）放

```
edittext.setFocused(true); 
```

你也可以把下面的行放在你的清单中，在活动部分，就在`android:name`属性下面

```
android:windowSoftInputMode="stateUnchanged" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:13:25.593

如果你想管理 inpt 事件，看看这部分：==> [http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

# svn - SVN 用户指南

> ID：13630892
> 
> 赞同：1
> 
> 时间：2012-11-29T17:02:28.730
> 
> 标签：svn

我的任务是为我公司的开发人员编写一组 SVN 用户指南。

指南仅从用户角度（例如提交评论、何时提交）而不是从管理角度（例如何时标记、如何构建）。行政指南将写在单独的文件中。

我们是一家应用程序开发公司，也参与嵌入式开发。因此，我们的开发人员范围从 HTML5 和 Flash 到 Java 和 C。我们的一些编码涉及分叉非常大（数百万个文件）的代码库。其他部分涉及我们从事底层开发。

从用户（即 grunt 开发人员）的角度来看，是否有使用 SVN 的最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:39:38.143

这是一个相当主观的问题，所以我不会反对 TPTB 关闭它。不过，我很乐意就此发表我的看法。请记住，我来自在中小型（10-50 名开发人员）企业环境中工作的背景，因此我的意见是针对该环境量身定制的。

1.  **您的开发人员应该了解 subversion**。让他们阅读[颠覆书籍](http://svnbook.red-bean.com/)，尤其是[“基本工作周期”](http://svnbook.red-bean.com/en/1.8/svn.tour.cycle.html)部分。我的许多其他建议都来自 svn 书。
2.  **尽早并经常提交**。开发人员应该努力在不破坏或不稳定的小块中完成工作。如果您没有每天至少检查一次您的工作，则可能有问题。
3.  **更新非常频繁**。您想提取团队其他成员每天多次执行的最新工作。如果另一个开发人员正在处理相同的文件，这也有助于减轻合并更改的痛苦。
4.  **始终提供有用的评论**。开发人员应编写签入注释，以对团队其他成员有帮助的方式描述已完成的工作。诸如“fixed build”、“more changes”或“x”之类的评论（真实的故事，我与一位评论总是“x”的开发人员一起工作）没有用。

以下是更多“管理员”指南（在您的分类中），但仍与开发人员相关。此外，这些都更加主观，因此请多加一点盐。

1.  **保持稳定、可释放的躯干**。如果您的开发人员遵循上述准则 (2)，您应该能够保持主干稳定和可发布。避免进行大的、跨领域的、不稳定的更改——找出一种方法以风险较小的小块进行这些更改。保持稳定的主干可以让您更频繁地部署，从而更快地为您的用户提供价值。
2.  **使用[每次发布的分支](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.commonpatterns.html#svn.branchmerge.commonpatterns.release)工作流**。如果您需要修复错误，请为每个版本创建一个新分支。避免从主干发布或从主干“提升”到静态发布分支。
3.  **避免功能分支**。功能分支鼓励您想要避免的那种不稳定的、跨领域的更改。相反，尝试在主干中进行大规模更改，但通过配置开关等在生产软件中保持它们“停用”。您想争取一种架构，该架构允许您实现“大”功能，而无需破坏和隔离代码行。在这里使用控制反转是一个很大的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T15:03:56.753

为了补充@Stuart Lange 的好建议，这是我已经磨练了一段时间的清单。这来自于我的经验和我对我的**TortoiseSVN 和 Subversion Cookbook**的研究，这些书在 Simple-Talk.com 上连续出版（[第 8 部分](http://www.simple-talk.com/dotnet/.net-framework/tortoisesvn-and-subversion-cookbook-part-8-log-messages/)最近出版，还有更多内容）。为简洁起见，我在这里只列出项目符号——我的系列文章非常详细地为所有这些提供了基本原理和支持。

A. 每个提交都应该有一个原因。

B. 一个单一的原因应该一起提交：代码、帮助文件、数据库模式等。

C. 提交不应该破坏构建。

D. 总是有理由提交文件。

E. 始终逐行审查您将要提交的内容。

F. 使提交消息成为必需。

G. 及时提交。

H. 尽可能在您的版本控制系统中进行文件操作（移动、复制、重命名）。

I. 在源代码控制中包含除*您*生成的文件之外的所有内容（*包括*第 3 方二进制文件）。

J. 永远不要孤立地进行提交：将 SVN 更新/手动验证/SVN 提交视为“原子”操作。

# ios - CoreData 中的 NSData 未正确保存

> ID：13630897
> 
> 赞同：1
> 
> 时间：2012-11-29T17:02:59.100
> 
> 标签：ios, core-data, ios6, nsfetchedresultscontroller

我目前正在尝试将从网络下载的图像存储到 NSManagedObject 类中，这样我就不必在每次打开应用程序时都重新**下载它。**我目前有这两个课程。

植物.h

```
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) PlantPicture *picture; 
```

PlantPicture.h

```
@property (nonatomic, retain) NSString * bucketName;
@property (nonatomic, retain) NSString * creationDate;
@property (nonatomic, retain) NSData * pictureData;
@property (nonatomic, retain) NSString * slug;
@property (nonatomic, retain) NSString * urlWithBucket; 
```

现在我执行以下操作：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    PlantCollectionCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    Plant *plant = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.plantLabel.text = plant.name;

    if(plant.picture.pictureData == nil)
    {
        NSLog(@"Downloading");
        NSMutableString *pictureUrl = [[NSMutableString alloc]initWithString:amazonS3BaseURL];
        [pictureUrl appendString:plant.picture.urlWithBucket];
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:pictureUrl]];        

        AFImageRequestOperation *imageOperation = [AFImageRequestOperation imageRequestOperationWithRequest:request success:^(UIImage *image) {
            cell.plantImageView.image = image;
            plant.picture.pictureData = [[NSData alloc]initWithData:UIImageJPEGRepresentation(image, 1.0)];
            NSError *error = nil;
            if (![_managedObjectContext save:&error]) {
                NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            }
        }];
        [imageOperation start];
    }
    else
    {
        NSLog(@"Already");
        cell.plantImageView.image = [UIImage imageWithData:plant.picture.pictureData];
    }
    NSLog(@"%@", plant.name);
    return cell;
} 
```

存在植物信息以及图片对象。但是，NSData 本身永远不会在应用程序打开和关闭的整个过程中保存。我总是要重新下载图像！有任何想法吗！？[对 CoreData 非常陌生......如果很简单，对不起！]

谢谢！

**编辑和更新：**

图像下载不是零，下载后看起来很好。看起来 UIImageJPEGRepresentation 返回的数据也不为零。我的 managedObjectContext 也不为零。根据我的调试器，请求是在主线程上完成的。还有什么我应该检查的吗？！

此外，如果我退出视图并返回，图像**将不会再次下载，**并且会出现“已经”日志。但是，如果我关闭并重新打开应用程序，则必须重新下载它们，这很奇怪，因为其余的 CoreData 仍然存在。

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"]; 
```

**更新#2**

看来我所有的 ManagedObjectContext 都是一样的。它可能与缓存有关吗？

![在此处输入图像描述](../Images/6e82b69f14776f9ca52d7fa5fcd119b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:48:25.850

首先要检查的是，获取后是`plant`还是`plant.picture`nil？其次，您说请求是在主线程上发出的，并且您的上下文不是零。但是，响应（在块内）是在主线程上吗？从您共享的代码中，我会说`plant.picture`是零，但其他事情也是可能的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-29T17:11:11.607

你需要确保它`pictureData`应该有类型`transformable` 而且在你的班级中你需要`pictureData`不是 id`NSData`

像这样

```
@property (nonatomic, retain) id pictureData; 
```

# google-apps-script - 来自 Google Apps 脚本的经销商 API

> ID：13630900
> 
> 赞同：2
> 
> 时间：2012-11-29T17:03:08.567
> 
> 标签：google-apps-script, google-reseller-api

我正在尝试使用 Reseller API 通过 Google 电子表格报告订阅。请问有人可以让我开始正确的身份验证吗？

我已经使用“手动”生成的“Authorization”：“Bearer ...”标题破解了我的脚本，但我不能指望我的同事也这样做！

# python - 优化分层字典中的python键搜索

> ID：13630906
> 
> 赞同：2
> 
> 时间：2012-11-29T17:03:27.483
> 
> 标签：python, optimization, dictionary, defaultdict

我正在尝试优化我的代码，因为当我尝试加载庞大的字典时，它变得非常慢。我认为这是因为它在字典中搜索一个键。我一直在阅读有关 python的内容`defaultdict`，我认为这可能是一个很好的改进，但我没有在这里实现它。如您所见，这是一个分层字典结构。任何提示将不胜感激。

```
class Species:
    '''This structure contains all the information needed for all genes.
    One specie have several genes, one gene several proteins'''
    def __init__(self, name):
        self.name = name #name of the GENE
        self.genes = {}
    def addProtein(self, gene, protname, len):
        #Converting a line from the input file into a protein and/or an exon
        if gene in self.genes:
            #Gene in the structure
            self.genes[gene].proteins[protname] = Protein(protname, len)
            self.genes[gene].updateProts()
        else:
            self.genes[gene] = Gene(gene) 
            self.updateNgenes()
            self.genes[gene].proteins[protname] = Protein(protname, len)
            self.genes[gene].updateProts()
    def updateNgenes(self):
    #Updating the number of genes
        self.ngenes = len(self.genes.keys()) 
```

基因和蛋白质的定义是：

```
class Protein:
    #The class protein contains information about the length of the protein and a list with it's exons (with it's own attributes)
    def __init__(self, name, len):
        self.name = name
        self.len = len

class Gene:
    #The class gene contains information about the gene and a dict with it's proteins (with it's own attributes)
    def __init__(self, name):
        self.name = name
        self.proteins = {}
        self.updateProts()
    def updateProts(self):
        #Update number of proteins
        self.nproteins = len(self.proteins) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:12:00.607

您不能使用 a`defaultdict`因为您的`__init__`方法需要参数。

这可能是您的瓶颈之一：

```
def updateNgenes(self):
#Updating the number of genes
    self.ngenes = len(self.genes.keys()) 
```

`len(self.genes.keys())``list`在计算长度之前创建所有键。这意味着*每次*添加基因时，都会创建一个列表并将其丢弃。你拥有的基因越多，这个列表的创建就越昂贵。为避免创建中间列表，只需执行`len(self.genes)`.

更好的是创建`ngenes`一个[属性](http://docs.python.org/2/library/functions.html#property)，以便仅在您需要时计算它。

```
@property
def ngenes(self):
    return len(self.genes) 
```

`nproteins`在`Gene`课堂上也可以这样做。

这是重构的代码：

```
class Species:
    '''This structure contains all the information needed for all genes.
    One specie have several genes, one gene several proteins'''

    def __init__(self, name):
        self.name = name #name of the GENE
        self.genes = {}

    def addProtein(self, gene, protname, len):
        #Converting a line from the input file into a protein and/or an exon
        if gene not in self.genes:
            self.genes[gene] = Gene(gene) 
        self.genes[gene].proteins[protname] = Protein(protname, len)

    @property
    def ngenes(self):
        return len(self.genes)

class Protein:
    #The class protein contains information about the length of the protein and a list with it's exons (with it's own attributes)
    def __init__(self, name, len):
        self.name = name
        self.len = len

class Gene:
    #The class gene contains information about the gene and a dict with it's proteins (with it's own attributes)
    def __init__(self, name):
        self.name = name
        self.proteins = {}

    @property
    def nproteins(self):
        return len(self.proteins) 
```

# java - 枚举如何在枚举对象中返回枚举的字符串内容

> ID：13630907
> 
> 赞同：0
> 
> 时间：2012-11-29T17:03:27.743
> 
> 标签：java, enums

例子

```
public enum STUFF
{
    THING("Ok"), STUFF("Sweet"), PEOPLE("umm"), CAR("Vrrm");

    String contents;

    STUFF(String x)
    {
       contents = x;
    }

    public String getContents()
    {
        return ??
    }

} 
```

期望的结果：

```
System.out.print(STUFF.CAR.getContents());
//Vrrm 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:05:38.903

您应该在以下位置查看行星示例：[http ://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

```
public enum STUFF
{
    THING("Ok"), STUFF("Sweet"), PEOPLE("umm"), CAR("Vrrm");

    private final String contents;

    STUFF(String x)
    {
        contents = x;
    }

    public String getContents()
    {
        return contents;
    }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:05:44.057

构造函数中的赋值是错误的。

```
x = contents; 
```

应该： -

```
contents = x; 
```

并且返回值`getContents()`应该是： -

```
public String getContents()
{
    return contents;
} 
```

# php - SQL 将所有 .JPG 设置为 .PNG

> ID：13630909
> 
> 赞同：2
> 
> 时间：2012-11-29T17:03:45.637
> 
> 标签：php, sql, image

我如何在 mysql 中遍历表中的所有行，并将“pImage”列中以 .JPG 结尾的所有记录设置为以 .PNG 结尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:06:26.240

```
update table x set pImage = replace(pImage, '.JPG', '.PNG') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:21:34.610

此更新声明应该进行更新，而不必担心`FILES.PNGORDON.PNG`Bob-Duell 在评论中提出的问题。

```
UPDATE TABLE x
SET pImage CONCAT(SUBSTR(pImage, 1, LENGTH(pImage)-3), 'PNG')
WHERE pImage LIKE '%.JPG' 
```

IE：

```
SELECT CONCAT(SUBSTR('FILES.JPGORDON.JPG', 1, LENGTH('FILES.JPGORDON.JPG')-3), 'PNG');

--result: FILES.JPGORDON.PNG 
```

# javascript - jQuery使用背景图像位置更改链接的悬停状态

> ID：13630911
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:03:50.377
> 
> 标签：javascript, jquery, css, hover

我有一个现有的站点，并且像我的大多数情况一样，我必须使用 jQuery 覆盖来更改一些 css。我可以调整元素的大小并给它一个背景图像，但我无法让悬停状态工作。

你可以在这里看到我工作的 JSfiddle：http: [//jsfiddle.net/wdNF6/](http://jsfiddle.net/wdNF6/)

似乎不起作用的大是

```
$('.slideshow-screen .slide-item-current .play-button').hover( function(){
        $(this).css('background-position', 'something something');
} 
```

我使用了`.hover()`在整个 stackoverflow 中找到的示例。当您转到示例时，按钮应该是蓝色的，其中包含图像。将鼠标悬停在它上面应该重新定位 bg 图像。但是当您转到示例时，会显示默认的 css pre-jQuery。如果您删除 jquery 的第二位，则第一部分有效。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:10:22.977

**缺少**函数的右大括号

```
$('.slideshow-screen .slide-item-current .play-button').hover( function(){
            $(this).css('background-position', 'bottom center');
    }​); <--- Missing this 
```

这也可以简单地写成

```
$('.play-button').css({
    width: '90px',
    height: '90px',
    'background-color': '#0000ff',
    'background-position': 'top center',
    'background-image': 'url(http://www.lessardstephens.com/layout/images/slideshow_big.png)'
});

$('.play-button').hover(function() {
    $(this).css('background-position', 'bottom center');
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/wdNF6/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:09:34.657

### 你检查过了吗？您的代码有错字。

你最后错过了一个结局`);`。

```
$(document).ready(function () {
    $('.slideshow-screen .slide-item-current .play-button').css({
        width: '90px',
        height: '90px',
            'background-color': '#0000ff',
            'background-image': 'url(http://www.lessardstephens.com/layout/images/slideshow_big.png)',
            'background-position': 'top center'
    });

    $('.slideshow-screen .slide-item-current .play-button').hover(function () {
        $(this).css('background-position', 'bottom center');
    },
    // Also you need to reset
    function () {
        $(this).css('background-position', 'top center');
    });
});​ 
```

### 修正：http: [//jsfiddle.net/Vc84h/](http://jsfiddle.net/Vc84h/)

# javascript - 如何在表单提交时拦截和更改密码字段值？

> ID：13630915
> 
> 赞同：0
> 
> 时间：2012-11-29T17:03:51.517
> 
> 标签：javascript, jquery, html

我正在尝试在提交表单之前将密码哈希应用于所有密码字段。到目前为止，我所拥有的是这个......

```
$("#loginform").submit(function(e) {
    e.preventDefault();
    $('input[type=password]').each(function(){
        console.log($.sha256($(this).val())) //Hash password
        //Set password back
    });
    return true;
}); 
```

...这将拦截提交并对密码进行哈希处理，但我无法使用普通方法替换输入框中的明文密码。

我知道如何使用隐藏输入等来执行此操作，但我将其应用于已经具有相当可靠的登录结构的站点，因此我希望将 HTML 修改降至最低。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:10:13.003

如果客户端散列的目的是保护通过不安全连接 (HTTP) 的密码，请确保使用盐和随机“挑战”。

像这样：

响应 = sha256（挑战 + sha265（盐 + 密码））

服务器知道挑战、盐和 sha265（盐 + 密码）的答案，然后它可以验证响应。

你需要盐+密码来避免彩虹攻击，需要响应/挑战来防止重放攻击。

更好的方法是只使用 SSH ;)

# batch-file - Windows 7：获取批处理文件以调整弹出窗口的大小

> ID：13630916
> 
> 赞同：0
> 
> 时间：2012-11-29T17:03:58.420
> 
> 标签：batch-file, popup, cmd

我正在尝试从批处理文件创建一个大的弹出窗口，以显示用户在继续之前需要采取的下一个操作。我不确定这是否可能，但我想尝试一下。

这是我到目前为止得到的：

```
set USERS=(user1, user2)
set MESSAGE=some really long message here...... like 15 line.

for %%i in %USERS% do msg /Time:10 /w %%i %MESSAGE% 
```

所以我需要做的就是能够调整弹出窗口的大小，这就是我所需要的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:13:36.033

我不认为您可以批量调整弹出窗口的大小，因此您可能必须使用另一种脚本语言或创建一个小型可执行文件来替换 msg 命令。可执行文件可以接受文本、水平尺寸和垂直尺寸参数，然后显示消息。如果需要，它也可以返回结果。您可以`msg /Time:10 /w %%i %MESSAGE%`在您的代码中替换`start SizedPopup.exe "A really long message", 200, 200`为创建一个消息框，其中包含 200 x 200 像素的文本“一条非常长的消息”。您可能可以通过谷歌搜索找到这样的程序，尽管我相信用任何脚本语言编写它都相当容易。

# node.js - 在 Azure 网站上禁用请求验证

> ID：13630918
> 
> 赞同：2
> 
> 时间：2012-11-29T17:04:03.910
> 
> 标签：node.js, azure, azure-web-app-service

我的 node.js 应用程序在我自己的机器上运行良好，但是，在使用 Git 将其推送到 Azure 网站后，我遇到了请求验证问题。

我的一些请求被 IIS 验证过程捕获。解决方法是将其添加到 web.config：

```
<httpRuntime requestPathInvalidCharacters=""/> 
```

我使用 FTP 从我网站的 site\wwwroot 文件夹下载了 web.config，将其添加到存储库中，在 XML 中添加了新元素，然后将其推送回 Azure。

我的 web.config 文件似乎已被默认覆盖。

有没有办法改变这种行为？或者另一种关闭请求验证的方法？还是我只是厚？

**更新**

我把它全部收回，它似乎是阻止请求的快递。但是，问题仍然是“如何自定义我的 web.config？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:11:26.293

您可以尝试设置自定义验证类型吗？像这样：

```
 <httpRuntime requestPathInvalidCharacters=""
               requestValidationType="MyValidator, MyAssembly"/> 
```

和班级：

```
public class MyValidator : RequestValidator
{
    protected override bool IsValidRequestString(HttpContext context, string value, RequestValidationSource requestValidationSource, string collectionKey, out int validationFailureIndex)
    {
       validationFailureIndex = 0;
       return true;
    }
} 
```

# oracle - Oracle 同义词随机不可见

> ID：13630922
> 
> 赞同：1
> 
> 时间：2012-11-29T17:04:15.947
> 
> 标签：oracle, random, synonym

这是一个棘手的案例，其中包括 DBA 在内的 5 个人一直在苦苦挣扎数天……我会终身考虑将确定问题根本原因的人。

这里是：

Oracle 客户端：10g Oracle 服务器：11g

我们有 2 个模式和 1 个用户：

`SCHEMA1`

`SCHEMA2`

`USER`

我们有 1 个`'TOTO'`在`SCHEMA1`( `SCHEMA1.TOTO`) 中定义的表 我们有一个私有同义词 table `'TOTO'`，称为`'TOTO'`defined in `SCHEMA2`，创建如下：

`CREATE SYNONYM SCHEMA2.TOTO FOR SCHEMA1.TABLE1;`

我们已将“SCHEMA2.TOTO”（同义词等）上的 SELECT、UPDATE、DELETE、INSERT 权限授予 SCHEMA2（以便从 SCHEMA2 运行的任何会话都可以访问同义词表）

`GRANT SELECT, UPDATE, DELETE, INSERT ON SCHEMA2.TOTO TO SCHEMA2;`

我们的应用程序使用 连接到数据库`USER`，然后直接切换到`SCHEMA2`：

`ALTER SESSION SET CURRENT_SCHEMA=SCHEMA2;`

然后，它尝试在同义词表上执行选择查询，而不用 SCHEMA1 作为同义词名称的前缀（这是我们使用的框架的约束）：

`SELECT COL FROM TOTO;`

大多数情况下，此查询都能成功运行，这是我们所期望的，因为我们已将会话更改为`SCHEMA2`，默认情况下是查看对象的位置。

但有时它会失败，并出现`ORA-00942: table or view does not exist`错误。

我坚持这样一个事实，即在它工作和失败之间，什么都没有改变，我们只是重新启动了应用程序（这当然是在每次启动时以相同的方式重新连接到数据库）。我们已经与监控 USER、SCHEMA1、SCHEMA2 上的所有事件的 DBA 进行了调查，希望找到一个外部进程在其中一个上修改 GRANTS，在成功和失败之间，但没有任何变化。然而，在某些时候，我们随机得到 ORA-00942 错误，然后我们重新启动应用程序几次，它又回来了......

有人有什么想法或任何建议/提示可以引导我们找出我们在这里缺少的东西吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:05:39.030

赠款应转到`USER`，而不是 SCHEMA2：

```
GRANT SELECT, UPDATE, DELETE, INSERT ON schema1.toto TO userxy; 
```

这应该可以解决问题。如果没有，请您发布结果

```
SELECT * FROM all_objects WHERE object_name='TOTO'; 
```

# facebook - 使用 fql 对旧帖子获取新的 facebook 评论

> ID：13630923
> 
> 赞同：1
> 
> 时间：2012-11-29T17:04:16.337
> 
> 标签：facebook, facebook-graph-api, facebook-fql

对于我正在编写的应用程序，我使用以下 fql 查询轮询 facebook 页面

```
select post_id from stream where source_id = {mypageid} AND updated_time > {unixtime since last noticed update} 
```

只要写评论的帖子不太旧，它就可以很好地工作。但是，如果帖子太旧，我的查询不会返回任何数据。我还没有弄清楚我的查询工作时的具体时间跨度。

有谁知道如何避免这个问题或如何修改我的查询以获取自上次执行查询以来所有带有新评论的帖子？

提前致谢...

# javascript - 如何检测 JS 变量是否未定义？

> ID：13630926
> 
> 赞同：0
> 
> 时间：2012-11-29T17:04:37.970
> 
> 标签：javascript, jquery

```
// mystring contains dynamic text. Sometimes can be
// null
var a = mystring.split(" ");
var proc = a[0] + " " + a[1]; 
```

如果`a`不包含文本，`split`则在 proc 之后未定义。如果我尝试将其值分配给文本框，则结果为“未定义”：

```
mytextbox.val(proc); 
```

![在此处输入图像描述](../Images/68a21a19e3f111b0bcf2c0990abdcdec.png)

所以我需要一种方法来使 proc 始终具有一个值，至少是一个空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:09:12.360

```
var proc = "";
if (mystring !== null) { // omit this if you're sure it's a string
    var a = mystring.split(" ");
    if (a.length > 1) {
        proc = a[0] + " " + a[1];
    }
} 
```

我很确定您`proc`的不是`undefined`，而是字符串`" undefined"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:06:02.293

你可以使用

```
(mystring || " ") 
```

它将评估`mystring`是否不是`null`，或者`" "`如果是。

或者，您可以`if`围绕整个事情发表声明：

```
if (mystring != null) {
    // stuff
} else {
    var proc = "";
} 
```

# c# - 在 UnitTest 期间需要协助从委托类型中删除 BeginInvoke

> ID：13630929
> 
> 赞同：2
> 
> 时间：2012-11-29T17:04:43.483
> 
> 标签：c#, unit-testing, delegates, moles

在我的类中，我声明了一个委托类型，我正在创建它的一个实例，然后从该实例调用 BeginInvoke：

```
public class ClassA
{
    ...
    public delegate bool MyDelegate(int x);
    ...
    public void MethodA()
    {
        ...
        var myDelegate = new MyDelegate(Foo);
        myDelegate.BeginInvoke(...);
        ...
    }
    ...
} 
```

在为 MethodA 编写单元测试时，我*实际上并不*希望调用 BeginInvoke。我想做的是使用 Moles 框架来消除 BeginInvoke 调用。通常，我会尝试

```
MMyDelegate.AllInstances.BeginInvoke... = (...) => { /* something here */ } 
```

但我一直无法让痣为 MyDelegate 类型生成任何东西。

根据[http://msdn.microsoft.com/en-us/library/system.delegate.aspx](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)，“公共语言运行时为每个委托类型提供 BeginInvoke 和 EndInvoke 方法”。如果是这种情况，并且 BeginInvoke 甚至不是 Delegate 类中的一个方法（由 CLR 提供），是否有可能破坏它？有没有其他人有幸将 BeginInvoke 从委托类型中剔除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:58:23.120

我不太了解 Microsoft Moles，但我尝试使用 Microsoft Fakes 来达到同样的效果（实际上这是 Visual Studio 2012 Premium 和 Ultimate 中内置的 Microsoft Moles 的继承者）。

当我尝试构建 Fake 程序集（知道 Microsoft 将其称为 Fakes and Shims 而不是 Moles 和 Stubs）时，我收到以下警告：

```
Warning 1   Cannot generate stub for AssemblyUnderTest.FooDelegate: type is sealed. d:\Sources\Projects\PlayingWithMoles\PlayingWithMoles\Fakes\AssemblyUnderTest.fakes
Warning 2   Cannot generate shim for AssemblyUnderTest.FooDelegate: type is a delegate. d:\Sources\Projects\PlayingWithMoles\PlayingWithMoles\Fakes\AssemblyUnderTest.fakes 
```

（要获得此警告，您应该在 fakes 配置文件中关闭附加诊断（我不确定 Fakes 和 Moles 中的格式是否相同）：

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/" **Diagnostic="true"**>
  <Assembly Name="AssemblyUnderTest"/>
</Fakes> 
```

但是很可惜，这个警告清楚地表明我们不能这样做。但是我们可以通过转移到另一个异步 API 来完全避免这个问题，例如转移到[Task Parallel Library aka TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

`Task`（或`Task of T`）对象本身将异步操作表示为第一类对象，它允许您将此“异步操作”存储在字段中，从方法返回或传递它。这大大提高了可测试性，因为您可以轻松地用假的来模拟您的实现：

```
class SomeService
{
  Task<string> GetSomeResult()
  {
    // Performing long-running operation to obtain the result
  }
}

class YourServiceConsumer
{
  private void YourMethod()
  {
     Task<string> task = service.GetSomeResult();
  }
} 
```

您可以使用单独的接口轻松提取您的依赖项并将其注入您`YourServiceConsumer`或使用 Microsoft Moles（或 Microsoft Fakes）伪造它，而无需添加额外的层。

# oracle - 如何为列分配随机代码以确定排序顺序？

> ID：13630931
> 
> 赞同：1
> 
> 时间：2012-11-29T17:04:45.677
> 
> 标签：oracle, plsql, oracle11g, analytics

**问题：**如何分配诸如**CC=1**和**WP=2**之类的代码并使查询的这一部分获得所需的结果？如果在同一交易日期有多个交易，则应用业务规则。

这是我对**Oracle 11g的查询**

```
select tid, 
       cycle,
       apply_no, 
       seq_no, 
       trans_date, 
       trans_type,
       priority
from ( select tid, 
              cycle,
               apply_no, 
               seq_no, 
               trans_date, 
                trans_type,
                rank() over (partition by tid,
                                 order by trans_date desc,seq_no desc) priority
from transactions where tid=1 
```

**当前结果**

```
TID  cycle    apply_no  seq_no trans_date   trans_type  priority
----------------------------------------------------------------
1    201420    2        2       27-NOV-12   WP          1
1    201320    1        1       27-NOV-12   CC          2
1    201420    2        1       16-OCT-12   CC          3 
```

**期望的结果**

```
TID  cycle     apply_no seq_no trans_date trans_type  priority
---------------------------------------------------------------
1    201420    2        2      27-NOV-12  CC          1
1    201320    1        1      27-NOV-12  WP          2
1    201420    2        1      16-OCT-12  CC          3 
```

**原因：**如果 trans_date 相同，则业务规则状态 CC 优先于 WP（不是因为 CC 在 WP 之前排序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:28:37.897

由于您的 trans_type 顺序实际上是按字母顺序排列的，因此您可以在 rank 函数中将其添加到您的 order by 中。但是，为了更清楚，我会使用 decode.. 类似的东西：

```
with transactions as
(
    select 1 tid, 201420 cycle, 2 apply_no, 2 seq_no, to_date('27-NOV-12','DD-MON-YY') trans_date, 'WP' trans_type from dual union all
    select 1 tid, 201320 cycle, 1 apply_no, 1 seq_no, to_date('27-NOV-12','DD-MON-YY') trans_date, 'CC' trans_type from dual union all
    select 1 tid, 201420 cycle, 2 apply_no, 1 seq_no, to_date('16-OCT-12','DD-MON-YY') trans_date, 'CC' trans_type from dual
)
select tid, 
       cycle,
       apply_no, 
       seq_no, 
       trans_date, 
       trans_type,
       priority
from ( select tid, 
              cycle,
               apply_no, 
               seq_no, 
               trans_date, 
                trans_type,
                rank() over (partition by tid
                                 order by trans_date desc,decode(trans_type,'CC',1,'WP',2,3),seq_no desc) priority
from transactions where tid=1 ); 
```

产生：

```
 TID      CYCLE   APPLY_NO     SEQ_NO TRANS_DATE  TRANS_TYPE   PRIORITY
---------- ---------- ---------- ---------- ----------- ---------- ----------
         1     201320          1          1 27-NOV-2012 CC                  1
         1     201420          2          2 27-NOV-2012 WP                  2
         1     201420          2          1 16-OCT-2012 CC                  3 
```

# c# - 从其他类更改表单中的属性

> ID：13630932
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:04:45.520
> 
> 标签：c#, winforms

如何从另一个类的方法更改 Windows 窗体中的属性？

假设我有一个带有“Hello”标签的 Form1，如果我想使用另一个类的方法将该消息更改为其他内容，我该如何引用该标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:06:39.293

最简单的方法 - 将您的标签可见性更改为`public`并将`Form1`实例传递给该方法。`Message`正确的一个 -在您的`Form1`班级上声明公共财产，如下所示：

```
public string Message
{
   get { return label.Text; }
   set { label.Text = value; }
} 
```

并将表单实例传递给您的方法：

```
void MyMethod(Form1 form1)
{
    form1.Message = "Hello world";
} 
```

# http-status-codes - HTTP POST 400 错误

> ID：13630934
> 
> 赞同：0
> 
> 时间：2012-11-29T17:04:54.387
> 
> 标签：http-status-codes

我在 Apache 2.2.22 的访问日志中看到以下内容

POST 测试 HTTP/1.1 400 - - 443

似乎是服务器向客户端请求返回的错误请求。“TEST”不应该是“/TEST”吗？有什么方法可以使用 curl 或 telnet 模拟类似的 POST 400 错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:07:34.200

如果我理解正确，您会在 Apache 日志中看到这一点。你不知道它的原因，但想重新创建它？

# mobile - iOS 中的 GPS 跟踪应用程序

> ID：13630935
> 
> 赞同：0
> 
> 时间：2012-11-29T17:04:56.837
> 
> 标签：mobile, geolocation, gps

我有一个项目可以在我的 iPhone 上使用跟踪设备跟踪车辆。我需要一个合适的设备来使用。如果有人可以建议我使用合适的跟踪设备并建议提取该跟踪信息的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:10:45.000

一家名为“Falcom”的公司销售此类设备。但是，您必须编写服务器端软件才能与使用专有协议的设备进行通信。
但不要小看这样的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:10:21.350

您将需要找到与 iPhone 接口的跟踪硬件。也许您应该在 iTunes 应用商店中查找已经与外部 GPS 硬件集成的应用，例如[Tagg](https://itunes.apple.com/us/app/tagg-the-pet-tracker/id474539050?mt=8)或[Spotlight](https://itunes.apple.com/us/app/spotlight-gps-pet-locator/id351109362?mt=8)（我与这些产品没有任何关系）。这是一个宠物跟踪解决方案，但类似的东西可能更像您需要的，即已经与外部跟踪设备集成的应用程序。

* * *

这个答案假设 OP 试图获取 iPhone 的位置。原来他想要一个外部 GPS 跟踪设备的位置。因此，此答案不适用。

原答案：

如果您想使用 iPhone 执行此操作，请参阅 Apple 的[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/Introduction/Introduction.html)，该指南将引导您完成所需的内容（我假设您将其与`iOS`标签一起发布在这里）。

这很好地介绍了如何[确定用户的位置](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)，以及[如何在后台获取此信息的](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)部分。

您真的应该阅读该指南，阅读一些示例，并且您应该一切顺利。

# xslt - 用于 和 导致服务器出错

> ID：13630937
> 
> 赞同：1
> 
> 时间：2012-11-29T17:05:04.117
> 
> 标签：xslt, param

我正在尝试修改现有项目以添加一些功能。我想将一些参数传递给我的 xsl 样式表，但是任何参数的使用都会导致错误。我尝试插入教程等中最简单的示例，但无济于事。我相信问题可能与正在使用的 xslt 版本有关？

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/TR/WD-xsl" language="VBScript">
  <xsl:param name="test">TEST</xsl:param>

<xsl:template match="/">
  <xsl:value-of select="$test"></xsl:value-of>  
</xsl:template>

</xsl:stylesheet> 
```

为了使示例尽可能简单，我删除了所有其他代码。根据我的理解，这段代码应该只是在html页面上输出TEST。但是，我得到的是一个经典的 IIS 错误：

```
An error occurred on the server when processing the URL. Please contact the system administrator.

If you are the system administrator please click here to find out more about this error. 
```

有没有人知道为什么会这样？当我尝试以任何方式使用变量时，也会出现同样的问题。是我的 Web 服务器有问题，还是使用的 xslt 版本有问题？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:21:03.380

可能值得花一些时间看看是否有更好的错误消息潜伏在某处的日志文件中。我不了解 IIS，但 Microsoft 技术似乎习惯于生成大量诊断信息，然后不告诉您它们在哪里。

但是 xsl:stylesheet 元素上的属性`language="VBScript"`是一个错误，任何符合 XSLT 的处理器，无论是 1.0 还是 2.0，都应该因为这个原因拒绝这个样式表。

哎呀：我刚刚注意到你使用了`xmlns:xsl="http://www.w3.org/TR/WD-xsl"`. 这意味着您根本没有使用 XSLT，而是他们在 1998 年引入的 Microsoft 专有的“工作草案 XSL”语言，大约一年后就过时了。我相信这种与 XSLT 有一些家族相似之处的语言仍然有效，但现在几乎不可能获得关于它的文档，除非通过搜索二手书店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:04:16.620

扩展 Michael Kay 的回答，微软可能会放弃对旧的“http://www.w3.org/TR/WD-xsl”命名空间的支持，因此不能保证它可以工作更长时间。正如 MSDN 上所解释的，这肯定是 IE9 的情况

[http://msdn.microsoft.com/en-gb/library/ie/hh180178(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/hh180178%28v=vs.85%29.aspx)

我最近不得不更改使用“http://www.w3.org/TR/WD-xsl”的 XSLT 样式表以使其在 IE9 中工作。将其更改为使用“http://www.w3.org/1999/XSL/Transform”的正确命名空间可能只是一个简单的案例，但如果您使用的构造不是在当前命名空间中实际支持。这些是我注意到在旧版中支持的东西，但在当前版本中不支持

*   **xsl:apply-templates**有一个**order-by**属性。将其替换为 **xsl:sort**。
*   **xsl:if**允许**匹配**属性。将此替换为**测试**
*   **支持xsl:eval**。这可能需要一些返工来替换，具体取决于它的用途。

# php - 在第一次选择中进行选择后，填充第二次选择，然后在进行第二次选择后添加按钮？

> ID：13630938
> 
> 赞同：1
> 
> 时间：2012-11-29T17:05:04.917
> 
> 标签：php, jquery, mysql

如何显示取决于第一个下拉列表中答案的第二个下拉列表，然后在第二个被回答后显示一个按钮。

我发现了一些显示第二个下拉列表的示例，但没有一个添加第三个元素（如按钮）。

我知道我将如何使用 php/mysql 填充下拉列表，但我是 jquery 的新手。

[更新]

这是我到目前为止所拥有的

HTML

```
<select id="source">
        <option>Select</option>
        <option>Company</option>
        <option>City</option>
        <option>State</option>
    </select>
    <select id="source2a" class="select">
        <option>Sort by</option>
        <option>Sort A-Z</option>
        <option>Sort Z-A</option>
     </select>
     <select id="source2b" class="select">
        <option>Sort by</option> 
        <option>Sort A-Z</option>
        <option>Sort Z-A</option>
    </select>
     <select id="source2c" class="select">
        <option>States</option>
        <option>State 1</option>
        <option>State 2</option>
        <option>Etc.</option>
    </select> 
```

CSS

```
.select {display: none;} 
```

​ Javascript

```
var i = 0;
$(document).ready(function(){
$('#source').change(function () {
    if ($('#source option:selected').text() == "Company"){
        $('.select').hide();
        $('#source2a').show();
    } else if ($('#source option:selected').text() == "City"){
        $('.select').hide();
        $('#source2b').show();
    } else if ($('#source option:selected').text() == "State"){
        $('.select').hide();
        $('#source2c').show();
    } else {
        $('.select').hide();
    } });
 });​ 
```

[http://jsfiddle.net/chonito13/stAAm/](http://jsfiddle.net/chonito13/stAAm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:24:22.683

这是一个独立的工作示例，可以为您提供一个想法。您的代码将如下所示：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
//alert('Document is ready');
                $('#stSelect').change(function() {
                    var sel = $(this).val();
//alert('You picked: ' + sel);
                    $.ajax({
                        type: "POST",
                        url: "another_php_file.php", // "another_php_file.php",
                        data: 'theOption=' + sel,
                        success: function(data) {
//alert('Server-side response: ' + data);
                            $('#dd2DIV').html(data);
                            $('#theButton').click(function() {
                                alert('You clicked the button');
                            });
                        }
                    });
                });
            });
        </script>
    </head>
<body>

    <select name="students" id="stSelect">
        <option value="">Please Select</option>
        <option value="John">John Doe</option>
        <option value="Mike">Mike Williams</option>
    </select>
    <div id="dd2DIV"></div>

</body>
</html> 
```

文件：另一个_php_file.php

```
<?php
$selStudent = $_POST['theOption'];
if ($selStudent == 'John'){
    $r = '
        <select name="teachers" id="trSelect">
            <option value="">Please Select</option>
            <option value="MrJones">Dr Bill Jones</option>
            <option value="MrSmith">Dr Bob Smith</option>
        </select>
        <button id="theButton">Click Me</button>
    ';
    echo $r;
}else if ($selStudent == 'Mike') {
    $r = '
        <select name="teachers" id="trSelect">
            <option value="">Please Select</option>
            <option value="MrPeters">Dr Bud Peters</option>
            <option value="MrOz">Dr Bruce Oz</option>
        </select>
        <button id="theButton">Click Me</button>
    ';
    echo $r;
} 
```

[如果您愿意，这里有一些额外的示例](https://stackoverflow.com/questions/13499559/make-div-text-change-on-click-based-on-php-data-using-ajax/13501242#13501242)供您遵循。

# c++ - 有人能弄清楚为什么下面的函数总是返回 false 吗？

> ID：13630941
> 
> 赞同：-1
> 
> 时间：2012-11-29T17:05:09.123
> 
> 标签：c++, if-statement, for-loop, boolean

```
bool ordered(int args, double num, ...)
{
    bool order = true;
    double holder1, holder2;
    va_list arguments;
    va_start(arguments, num);
    holder1 = va_arg(arguments, double);
    for(int x = 2; x < args + 1; x++)
    {
        if(x % 2 == 0)
        {
            holder2 = va_arg(arguments, double);
            if(holder1 > holder2)
                order = false;
        }
        else if(x % 2 != 0)
        {
            holder1 = va_arg(arguments, double);
            if(holder2 > holder1)
                order = false;
        }
    }
    va_end(arguments);
    return order;
} 
```

该函数尝试确定数字是否按升序输入，但无论我传递什么，该函数都返回 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:15:08.133

更改此`va_start(arguments, args);`并`num`从声明中删除，您正在处理不正确的双精度数，并最终在最后一个 arg 之后与垃圾进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:19:32.570

有时从更简单的事情重新开始会更容易，我认为这就是我在这种情况下会做的事情。首先，我会稍微简化一下界面：

```
bool ordered(int args, ...) { // ... 
```

然后我会简化代码：检索一个数字。如果它小于前一个，则返回 false。否则，将前一个设置为当前，并读取下一个数字。继续所有的数字。如果你掉出循环（即，你到达终点却没有看到一个乱序的数字）返回真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:23:32.217

评论中已经指出了一些问题（`num`例如被忽略的事实 - 请参阅chill的答案以获得解决方案），但如果修复这些问题并不能解决您的问题，那么您很可能不会传递浮点值（`float`或`double`）作为函数的参数。

如果您正在调用这样的函数（假设`num`问题已解决）：

```
bool result = ordered(3, 1, 2, 3); 
```

然后尝试这样调用它：

```
bool result = ordered(3, 1.0, 2.0, 3.0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T19:42:09.727

你的`if(x % 2 == 0)` 意思是返回`true`而不是`false`？

```
if(x % 2 == 0)
        {
            holder2 = va_arg(arguments, double);
            if(holder1 > holder2)
                order = true;
        } 
```

# batch-file - 在 Windows 上使用批处理脚本操作文本文件

> ID：13630942
> 
> 赞同：3
> 
> 时间：2012-11-29T17:05:12.250
> 
> 标签：batch-file, token, tokenize

我正在尝试完成以下操作：我有包含以下条目的文本文件

```
XXXXXXXX

XXXXXXXX
XXXXXXXXXXXX

DATE TIME AM/PM  SIZE FILENAME NEWFILE.ERR

XXXX XXX XXXX
XXX XXXXXX XXX 
```

我想阅读最后带有 .ERR 的行并计算该行的标记。

请让我知道如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:31:44.217

**更新**

```
@Echo OFF

:: By Elektro H@cker

FOR /F "Tokens=*" %%# in ('Type "File.txt" ^| FINDSTR ".ERR$"') Do (
    Call Set "Line=%%#"
    FOR %%@ IN (%%#) DO (Call Set /A "Tokens+=1")
    GOTO :BREAK
)

:BREAK
Echo Line: %LINE%
Echo Toks: %TOKENS%

Pause&Exit 
```

# sql - Rails 3：可以用连接表订购吗？

> ID：13630953
> 
> 赞同：0
> 
> 时间：2012-11-29T17:05:50.593
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, junction-table

我有一个嵌套表单，它为每个帖子创建了许多位置。每个位置也可以在多个帖子中使用。

例如，帖子 1 可能有 Location1、Location2 和 Location3

AND Post 2 可能有 Location1、Location4 和 Location5

我希望这些位置在帖子中的顺序与添加的顺序相同。我认为最简单的方法是在连接表（Posts_Locations）中添加一个“订单”列，但是我不确定如何`:order_by`在我的控制器中进行设置或定义。我应该直接使用 SQL 执行此操作吗？

有什么建议么？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:40:43.030

如果您使用简单的连接表和`has_and_belongs_to_many`Post 和 Location ，您可能希望将 posts_locations 表本身设为模型，使用`has_many :through`. [这在这个 Rails 指南中](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)有很好的描述。

额外提示：当您添加新列时，更改模型，从而将表名连接到单数，例如 PostLocation ，这将导致表名`post_locations`......或者可能更具描述性。另外，不要在这个字段中使用“order”这个词，因为它是 rails 和 SQL 中的关键字。也许称它为“display_order”？

然后在 PostLocation 模型中，您可以创建一个范围，甚至是定义正确顺序的默认范围。例如`scope :sorted, order("display_order DESC")`

我可能会问的另一个问题是：帖子的顺序是否真的与任何位置相关联，反之亦然？

# javascript - 将活动类添加到 jQuery 图像交换代码

> ID：13630955
> 
> 赞同：0
> 
> 时间：2012-11-29T17:05:50.583
> 
> 标签：javascript, jquery

我正在使用一些 jquery 代码将单击时的图像交换到新源，但我需要它在单击时添加“活动”类并在单击另一个元素时将其删除，这是 jquery 和 html

html

```
<a class="steplink" href="http://placebox.es/600/500/ff0000/ffffff/Step1/">Step1</a>
<a class="steplink" href="http://placebox.es/600/500/ff0000/ffffff/Step2/">Step2</a>
<a class="steplink" href="http://placebox.es/600/500/ff0000/ffffff/Step3/">Step3</a>
<div id="stepimgwrap">
    <img src="http://placebox.es/600/500/ff0000/ffffff/Step1/" alt="Main Image" id="stepimg"/>
</div> 
```

jQuery

```
$('.steplink').live("click", function() {
    $('#stepimg').hide();
    $('#stepimgwrap').css('background-image', "url('../img/ajax-loader.gif')");
    var i = $('<img />').attr('src',this.href).load(function() {
        $('#stepimg').attr('src', i.attr('src'));
        $('#stepimgwrap').css('background-image', 'none');
        $('#stepimg').show();
    });
    return false; 
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:16:06.733

试试这个：

> [http://jsfiddle.net/WN73Q/](http://jsfiddle.net/WN73Q/)

```
$('.steplink').live("click", function() {
$('#stepimg').hide();

$(this).addClass('active'); // <---------------add active class to link clicked 
$(this).siblings().removeClass('active'); // <-----remove the other link active class

$('#stepimgwrap').css('background-image', "url('../img/ajax-loader.gif')");
var i = $('<img />').attr('src',this.href).load(function() {
    $('#stepimg').attr('src', i.attr('src'));
    $('#stepimgwrap').css('background-image', 'none');
    $('#stepimg').show();
});
   return false; 
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:55:33.393

这里包括 CLICK 事件

```
$(document).ready(function(){
    $('.steplink').click(function(){
        $('#stepimgwrap').toggleClass('active');
        return false;
       //
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:10:50.637

通常我会使用`siblings()`，但你的 DOM 不会隔离所有的`steplink`s

```
$('.steplink').live("click", function() {

    /* .. blah blah */
    $('.steplink').removeClass('active');
    $(this).addClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:23:21.807

```
$('.steplink').click(function(e) {
  e.preventDefault();
  $('.steplink').removeClass('active');
  $(this).addClass('active');
  var href = $(this).attr('href');
  $('#stepimg').attr('src', href);
}); 
```

这会将活动类添加到当前锚点并更改图像的 src。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T17:07:32.440

你想在stepimg上做吗？

```
$('#stepimg').toggleClass('active'); 
```

# r - 情节顶部的主标题被切断

> ID：13630956
> 
> 赞同：16
> 
> 时间：2012-11-29T17:05:54.903
> 
> 标签：r, plot, x11

当我在创建新`x11()`设备后绘制两个图表并想要设置一个整体标题时，它的显示效果不佳。标题字符串的顶部位于窗口顶部栏的后面。有没有办法来解决这个问题？`?x11`我在 x11 客户端首选项中或中找不到任何有用的东西。

这个脚本：

```
x11()
x <- rnorm(1000, 0, 1)
hist(x)
title('Title', outer = TRUE) 
```

看起来像这样：

![在此处输入图像描述](../Images/302754e4db0655881b34cdf41ad399e7.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T17:28:40.377

R 默认情况下不为外边距分配任何空间；见`par("oma")`。尝试

```
par(oma=c(0,0,2,0)) 
```

（有关`?par`更多信息，请参阅并搜索“外部”。）

# structuremap - 如何为 StructureMap 中的每个请求获取一个新实例？

> ID：13630964
> 
> 赞同：1
> 
> 时间：2012-11-29T17:06:05.103
> 
> 标签：structuremap

我希望使用 StructureMap 为每个 ObjectFactory.Getinstance() 调用创建一个对象的新实例。我自己无法找到或弄清楚。

AlwaysUnique 没有这样做。

```
[TestMethod]
public void GetConcreteInstanceOf_ShouldReturn_DifferentInstance()
{
  ObjectFactory.Initialize(registry =>
  {
    // setup the singleton, so that it's new every time
    registry.For<ISystemData>().AlwaysUnique().Use(new SystemDataClient());
  });

  ISystemData result = ObjectFactory.GetInstance<ISystemData>();
  ISystemData result2 = ObjectFactory.GetInstance<ISystemData>();
  Assert.AreNotSame(result, result2);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T03:48:55.703

如果您每次都想要一个新实例，那么根据定义，您不想要一个单例。无需传递实例，只需指定具体类型，StructureMap 的默认行为每次都会为您提供一个新实例：

```
registry.For<ISystemData>().Use<SystemDataClient>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:15:33.153

如果你有一个贪婪的构造函数会干扰已经接受的答案，你也可以使用这个：

```
registry.For<ISystemData>().Use(() => new SystemDataClient()); 
```

# android - 在 CursorAdapter.bindView 中遍历 Cursor

> ID：13630965
> 
> 赞同：1
> 
> 时间：2012-11-29T17:06:07.807
> 
> 标签：android, android-cursoradapter, android-cursor

我正在`ListView`使用自定义`CursorAdapter`（帖子）显示数据。有些帖子没有评论（我想显示有关的信息）并且数据位于不同的光标中（我无法加入表格，因为我按帖子 ID 分组以防止重复`ListView`）。

目前`bindView`我正在遍历评论，`Cursor`检查帖子 ID 是否等于当前视图的。

这个循环可以减慢 UI 并且应该在不同的线程中完成吗？（这增加了在视图被回收时在正确位置显示数据的复杂性）

有更好的策略吗？我想过，`CursorJoiner`但我不知道如何加入这两个游标。

编辑：

例如在我的`CurosrAdapter`实现中：

```
@Override
public void bindView(View view, final Context context, Cursor cursor) {
...
...
if (mCommentsCursor != null) {
    mCommentsCursor.moveToPosition(-1);

    int count = 0;
    while (mCommentsCursor.moveToNext()) {
        if (mCommentsCursor.getInt(mCommentsCursor.getColumnIndex(
                COLUMN_COMMENT_POST_ID)) == postId) {

            count++;
        }
    }

    if (count > 0) {
        com.setText(Integer.toString(count) + " comments");
    } else {
        com.setText(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:28:24.677

我最终使用了一个`CursorJoiner`和`MatrixCursor`，更多关于这里的解决方案 - [http://asyncindicator.blogspot.co.il/2012/12/cursorjoiner-and-matrixcursor.html](http://asyncindicator.blogspot.co.il/2012/12/cursorjoiner-and-matrixcursor.html)

# c# - 两种冒泡排序算法的区别

> ID：13630967
> 
> 赞同：1
> 
> 时间：2012-11-29T17:06:16.240
> 
> 标签：c#, algorithm, comparison, bubble-sort

我找到了两种冒泡算法，但我不确定哪个是正确的......

第一个例子：

```
for (int i = 1; i < input.Length-1; i++)
    for (int j = 0; j < input.Length - 1 - i; j++)
        if (input[j] > input[j + 1])
            swap(input, j, j + 1); 
```

第二个例子：

```
for (int i = 1; i < input.Length-1; i++)
    for (int j = 0; j < input.Length - 1; j++)
        if (input[j] > input[j + 1])
            swap(input, j, j + 1); 
```

## [**维基百科示例**](http://en.wikipedia.org/wiki/Bubble_sort)

输入：5 1 4 2 8

第一个例子：6 个比较

第二个例子：12 个比较

> **第一关：**
> 
> ( **5 1** 4 2 8 ) --> ( **1 5** 4 2 8 )，从 5 > 1 开始交换
> 
> ( 1 **5 4** 2 8 ) --> ( 1 **4 5** 2 8 )，从 5 > 4 开始交换
> 
> ( 1 4 **5 2** 8 ) --> ( 1 4 **2 5** 8 )，从 5 > 2 开始交换
> 
> (1 4 2 **5 8** ) --> (1 4 2 **5 8** )
> 
> **第二关：**
> 
> ( **1 4** 2 5 8) --> ( **1 4** 2 5 8)
> 
> ( 1 **4 2** 5 8 ) --> ( 1 **2 4** 5 8 ), Swap since 4 > 2 **<-- 示例 1 到此为止**
> 
> (1 2 **4 5** 8) --> (1 2 **4 5** 8)
> 
> (1 2 4 **5 8** ) --> (1 2 4 **5 8** )
> 
> **第三关**
> 
> ( **1 2** 4 5 8) --> ( **1 2** 4 5 8)
> 
> (1 **2 4** 5 8) --> (1 **2 4** 5 8)
> 
> (1 2 **4 5** 8) --> (1 2 **4 5** 8)
> 
> ( 1 2 4 **5 8** ) --> ( 1 2 4 **5 8** ) **<-- 示例 2 到此为止**

编辑：当我说哪个是正确的时，我的意思是哪个是原始冒泡排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:33:47.403

第一个算法不正确。如果数组中的最后一个元素不是最大的，它将失败。

具体来说，对“j”的迭代：

```
for (int j = 0; j < input.Length - 1 - i; j++) 
```

似乎跳过了最后一个元素。如果您的输入是 {0, 2, 2, 1} 那么您的 input.Length = 4

上面的 for 循环将有条件 j < 4 - 1 - i，其中 i = 1 所以 j < 4 - 1 - 1，所以 j < 2 所以最后使用的 j 将是 j = 1，最后一个比较将输入 [1] > input[2] -> input[3] 从不比较。

您可以通过将 for 循环更改为 j <= input.Length - 1 - i 来修复它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:13:45.317

*我找到了两种冒泡算法，但我不确定哪个是正确的..*

我确信他们都是对的。唯一的区别是您的第二个代码必须最后一次遍历已排序的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T17:14:32.717

两者都是对的。

第一个相对更有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T17:15:13.157

不用想太多，看起来都对，但第一个似乎做的冗余操作较少，因此执行时间较短

第一个似乎取决于你最后一个 i 块是正确的事实，因此它甚至不会打扰它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T17:23:15.553

在冒泡排序中，在第一次通过后，可以保证最大值将占据数组中的最后一个位置。这是因为根据定义，冒泡排序将最高值交换到数组的末尾。

这意味着在第二遍时，您不需要再次比较最后一个值，因为它保证大于或等于下一个较低索引中的元素。同样，在第 2 步之后，前两个元素将是最高值，并且彼此相对排序。

通过扩展，`i`通过后，`i`顶部元素将处于正确位置。

`i`第一个示例通过从最大`j`迭代器值中减去这一点来考虑这一点。第二个示例不必要地比较后续遍历中的上部元素。它没有伤害，但它是多余的，即未*优化*。它仍然是冒泡排序，因为它交换相邻的值，将较高值的元素移向数组的末尾。

那有意义吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T17:23:53.560

第一个是所谓的优化冒泡排序

[http://en.wikipedia.org/wiki/Bubble_sort#Optimizing_bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort#Optimizing_bubble_sort)

第二个是“经典”冒泡排序。

# jquery - 第n个孩子不工作

> ID：13630968
> 
> 赞同：0
> 
> 时间：2012-11-29T17:06:17.027
> 
> 标签：jquery, css

我有一个列表，需要它上面的所有其他项目来更改颜色并删除它的边距。我使用了 nth-child，它在除 IE7-8 之外的所有设备上都能完美运行。我知道他们不支持nth-child，所以我使用了Jquery。

我发现这个：：[nth-​​child 不在 IE 中工作](https://stackoverflow.com/questions/3951390/nth-child-is-not-working-in-ie) ，这个：http: [//verboselogging.com/2010/01/17/making-nth-child-work-everywhere](http://verboselogging.com/2010/01/17/making-nth-child-work-everywhere)

我试图实现它们，但它仍然无法正常工作。你可以在这里查看： [http ://www.dffernandez.com/client_review_files/tests/nth-child.html](http://www.dffernandez.com/client_review_files/tests/nth-child.html)

```
#prop-images-wrapper {
float: left;
margin-bottom: 0.6em;
background-color: #F00;
width: 340px;
margin-right: 5px;}

#prop-images-wrapper li:nth-child(2n+1), .difcolor {
margin-right: 0px;
background-color: #06F;} 
```

--

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>$(document).ready(function(){
$("#prop-images-wrapper li:nth-child(2n+1)").addClass("difcolor");
});</script> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:24:19.003

如果您使用 jquery 将第 n 个孩子设置为，只需将 jquery 用于所有内容，而不是为 jquery 使用 css 块和代码。

看看下面的 jsfiddle

[http://jsfiddle.net/RjGpC/1/](http://jsfiddle.net/RjGpC/1/)

在下面这一行

```
#prop-images-wrapper li:nth-child(2n+1), .difcolor { 
```

只需删除`li:nth-child(2n+1),`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:16:54.823

您忘记在测试页面中加载 jquery。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

[http://jsfiddle.net/m6vnt/1/](http://jsfiddle.net/m6vnt/1/)

# java - 交换 JPanel 内容时闪烁

> ID：13630978
> 
> 赞同：2
> 
> 时间：2012-11-29T17:06:40.033
> 
> 标签：java, swing, jpanel, java-3d

我正在开发一个使用 Java3D 和 Jmol 的项目（它是 3D 化学结构的查看器）。我必须创建能够在结构的 Java3D 和 Jmol 表示之间切换的视图。

我已经设法做到了，但是当我将 JPanel 与 JmolPanel 和 Canvas3D 交换时，交换区域会闪烁。

我只是通过以下方式交换面板：

```
public static void changeView(JPanel c) {
     c.removeAll();
    if (var) {
        c.add(canvas);
    } else {
        c.add(jmolPanel);
    }
    c.revalidate();
    var = !var;
} 
```

可以在此处找到使用按钮创建用于交换面板的框架的代码示例：http: [//pastebin.com/3F2gKBgb](http://pastebin.com/3F2gKBgb)

要运行此示例，您需要 Jmol.jar（可在此处找到[http://jmol.sourceforge.net/download/](http://jmol.sourceforge.net/download/)）和 Java3D（http://java3d.java.net/binary-builds.html）

我尝试在 JPanel 中设置双缓冲，但没有帮助。您知道如何解决闪烁问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:58:04.973

如果通过闪烁表示在删除然后添加子面板时它正在重新绘制，那么我会尝试停止重新绘制，进行所有交换，然后启用父面板的重新绘制。

可能 `c.setVisible(false); <your swapping code>; c.setVisible(true);` 会有帮助吗？

或创建一个子面板 sc，您将使其不可见，您将在其中添加可交换组件，以便父面板始终保持可见。这可能是对双缓冲问题的一种破解，应该从一开始就解决了你的问题，但值得一试。

# c++ - QDialogs show() 时保持 QMainWindow 最小化

> ID：13630980
> 
> 赞同：0
> 
> 时间：2012-11-29T17:06:53.593
> 
> 标签：c++, qt, qmainwindow

我有一个应用程序，`QMainWindow`其 UI 处于最小化状态，一段时间后应用程序通过调用`messageDlg->show()`（`messageDlg`是一个`QDialog`对象）抛出一条消息。像这样的东西

```
void MainWindow::WarningDialog() 
{
    m_messageDialog = new QDialog(this);
    m_messageDialog ->show();
} 
```

这导致我`QMainWindow`处于正常模式，这是我不希望发生的，即即使`QDialog.show()`调用了任何应用程序，也会尝试将应用程序保持在最小化窗口中。

我不希望每次`QDialog->show()`调用 a 时都检查应用程序是否处于最小化模式。

我已经跟踪了所有发布到的事件，`QMainWindow::event()`但在恢复我的窗口之前我看到的唯一事件是，`QEvent::WindowStateChange`即窗口状态已经从最小化模式更改。

`QMainWindow`即使`QDialog`显示任何 s ，是否有办法保持最小化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:12:22.123

`QWidget`有槽`showMinimized()`。您应该`QDialog`在没有父级的情况下创建`QMainWindow`. 在您`QDialog`设置的属性中（例如

```
 QDialog *dialog = new QDialog;
 dialog->setAttribute(Qt::WA_DeleteOnClose); 
```

)，然后您可以在开始时及时设置`showMinimized()`。`QMainWindow``QDialog`

# c# - 如何将 int 数组更改为字符串

> ID：13630981
> 
> 赞同：-6
> 
> 时间：2012-11-29T17:06:57.083
> 
> 标签：c#

我有一个`int`要在文本框中显示的数组，如下所示`(5 4 2 8 6)`。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:09:03.100

如果您使用 C#：

```
TextBox.Text = string.Format("({0})", string.Join(" ", arr)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:11:04.550

对于 Java，您可以使用[`Arrays.toString(int[] a)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5b%5d%29).

# c# - 如果 IP 地址低于另一个，则比较 IP 地址

> ID：13630984
> 
> 赞同：5
> 
> 时间：2012-11-29T17:07:18.250
> 
> 标签：c#, .net, comparison, ip-address

任何人都知道如何比较 2 个 ipaddress 以查看 ipaddress 是否低于另一个。

IE

```
bool b = CurrentIpAddress.IsLowerCompareTo(AnotherIPAddress); 
```

我还想同时支持 IPV4 和 IPV6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:09:16.633

您可以调用[IPAddress.GetAddressBytes](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.getaddressbytes.aspx)并编写一个 for 循环来比较每个单独的字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-30T17:20:49.753

vane 有正确的想法，但不幸的是使用有符号整数。对此的问题在对他的回答的一条评论中很明显。如果结果整数之一设置了其最高有效位，则将其解释为负数并放弃比较。

这是产生正确结果的修改版本（用 Linqpad 编写，因此不是完整的程序）。

```
public static class IpExtensions
{
    public static uint ToUint32(this IPAddress ipAddress)
    {
        var bytes = ipAddress.GetAddressBytes();

        return ((uint)(bytes[0] << 24)) |
               ((uint)(bytes[1] << 16)) |
               ((uint)(bytes[2] << 8)) |
               ((uint)(bytes[3]));
    }
}

public static int CompareIpAddresses(IPAddress first, IPAddress second)
{
    var int1 = first.ToUint32();
    var int2 = second.ToUint32();
    if (int1 == int2)
        return 0;
    if (int1 > int2)
        return 1;
    return -1;
}

void Main()
{
    var ip1 = new IPAddress(new byte[] { 255, 255, 255, 255 });
    var ip2 = new IPAddress(new byte[] { 0, 0, 0, 0 });
    Console.WriteLine(CompareIpAddresses(ip1, ip2));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-28T21:55:45.237

您可以使用此项目进行 IP 地址比较：

[http://www.codeproject.com/Articles/26550/Extending-the-IPAddress-object-to-allow-relative-c](http://www.codeproject.com/Articles/26550/Extending-the-IPAddress-object-to-allow-relative-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:45:22.660

您可以将每个 IP 地址转换为整数并以这种方式进行比较。如果您有权访问最新的 .NET Framework 的扩展方法功能，请尝试以下操作。

```
public static class IPExtensions
{
   public static int ToInteger(this IPAddress IP)
   {
      int result = 0;

      byte[] bytes = IP.GetAddressBytes();
      result = (int)(bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3]);

      return result;
   }

   //returns 0 if equal
   //returns 1 if ip1 > ip2
   //returns -1 if ip1 < ip2
   public static int Compare(this IPAddress IP1, IPAddress IP2)
   {
       int ip1 = IP1.ToInteger();
       int ip2 = IP2.ToInteger();
       return (((ip1 - ip2) >> 0x1F) | (int)((uint)(-(ip1 - ip2)) >> 0x1F));
   }
}

class Program
{
    static void Main(string[] args)
    {
        IPAddress ip1 = IPAddress.Parse("127.0.0.1");
        IPAddress ip2 = IPAddress.Parse("10.254.254.254");

        if (ip1.Compare(ip2) == 0)
           Console.WriteLine("ip1 == ip2");
        else if (ip1.Compare(ip2) == 1)
           Console.WriteLine("ip1 > ip2");
        else if (ip1.Compare(ip2) == -1)
           Console.WriteLine("ip1 < ip2");
    }
} 
```

**编辑**这不支持 IPv6，但可以修改为这样做。

# list - python中的求和列表值

> ID：13630988
> 
> 赞同：0
> 
> 时间：2012-11-29T17:07:26.707
> 
> 标签：list, tuples, python-2.x

按标识符计算每列中的值。请看例子。（我很难解释：（）

像这样：

```
tdata = [
    ('column 1', [
        (1, 5), (2, 10), (3, 200)
        ]
    ), 
    ('column 2', [
        (1, 20), (2, 300), (3, 100)
        ]
    ), 
    ('column 3', [
        (1, 2), (2, 300), (3, 2000)
        ]
    )
] 
```

从这个数据集中，我需要找到一种 Python 方法来仅计算内部元组的第一个值匹配的元组的子值。

所以我会做 Col1 = 5+20+2, Col2 = 10+300+300, Col3 = 200+100+2000。

我可以像这样以真正的代码密集型方式完成此任务：

```
col1 = []
col2 = []
col3 = []
data = []
for (column_name, column_values) in tdata:
    for (key, value) in column_values:
        if key == 1:
           col1.append(value)
        elif key == 2:
           col2.append(value)
        elif key == 3:
           col3.append(value)

data = [('Column 1', sum(col1)), ('Column 2', sum(col2)), ('Column 3', sum(col3))] 
```

显然，这是很多代码，而不是最有效的方法。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:59:32.757

这是一种方法：

```
rows = [x[1] for x in tdata]
col1 = sum([x[0][1] for x in rows])
col2 = sum([x[1][1] for x in rows])
col3 = sum([x[2][1] for x in rows]) 
```

# assembly - 如何删除 MIPS 中的换行符？

> ID：13630989
> 
> 赞同：4
> 
> 时间：2012-11-29T17:07:30.633
> 
> 标签：assembly, newline, mips

所以我正忙着编写一个 MIPS 程序，它将接受一个输入字符串，然后打印该字符串的所有可能的 UNIQUE 排列。（也就是如果这个词是 LoOp，LoOp 和 LOop 是一样的）。

为了做到这一点，我知道我不需要在输入字符串的末尾有换行符，但我不知道要确保它没有被添加。这是我到目前为止所拥有的：

```
.data

newLine:
    .asciiz "\n"
promptUser:
    .asciiz "Enter a 20 letter or less word:\n"
word:
    .space 21

.text

main:

    la $a0, promptUser
    li $v0, 4       # Ask User for Input
    syscall

    la $a0, word
    li $a1,21       # Max number of characters 20
    li $v0,8
    syscall         # Prompting User

    la $a0,newLine      # Newline   
    li $v0, 4
    syscall

    la $a0, word        # Printing Word
    li $v0, 4
    syscall 
```

唯一不包含“\n”的情况是输入的字母数正好是 20。有什么建议吗？

使固定：

这有效：

```
 li $s0,0        # Set index to 0
remove:
    lb $a3,word($s0)    # Load character at index
    addi $s0,$s0,1      # Increment index
    bnez $a3,remove     # Loop until the end of string is reached
    beq $a1,$s0,skip    # Do not remove \n when string = maxlength
    subiu $s0,$s0,2     # If above not true, Backtrack index to '\n'
    sb $0, word($s0)    # Add the terminating character in its place
skip: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:53:30.357

您可以在从系统调用 8 返回时解析字符串以删除字符：

```
# your code to prompt the user        

    xor $a2, $a2, $a2
loop:
    lbu $a3, word($a2)  
    addiu $a2, $a2, 1
    bnez $a3, loop       # Search the NULL char code
    beq $a1, $a2, skip   # Check whether the buffer was fully loaded
    subiu $a2, $a2, 2    # Otherwise 'remove' the last character
    sb $0, word($a2)     # and put a NULL instead
skip:

# your code continues here 
```

另请注意，您没有为单词保留足够的空间。您应该保留 21 个字节

```
word: .space(21) 
```

# php - 远程数据库连接字符串

> ID：13630995
> 
> 赞同：0
> 
> 时间：2012-11-29T17:07:38.380
> 
> 标签：php, mysql, database-connection

嗨，我是 PHP 和 MySQL 的新手，我在 LAMP 上创建了一个应用程序，并在 net4.com 上上传了一个网站托管公司。他们正在使用 phpMyAdmin 来连接到我能够成功的数据库，当我尝试使用 php 连接到数据库并查询数据库时，就会出现问题。我正在使用已在本地计算机上成功使用的 mysql_connect() 函数连接到远程数据库，即

```
$link = mysql_connect("118.67.248.12",  "username", "password"); 
```

其中“118.67.248.12”是我的数据库所在服务器的 IP 地址，它会引发以下错误：

> “1045 用户 'Technosaar'@'118.67.248.190' 的访问被拒绝（使用密码：YES）”

如果我使用 localhost” 代替“118.67.248.12”，则会引发以下错误：

> “2002无法连接，因为目标机器主动拒绝。”

我已经打电话给“net4”支持guyz但问题仍然存在有人请帮帮我，五一劳动节！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:09:56.367

我认为后者（本地主机）不起作用，因为 Web 服务器和数据库服务器没有在同一台机器上运行。

您确定服务器上的密码设置正确吗？这对我来说似乎是一个身份验证错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:44:59.303

“1045 Access denied for user 'Technosaar'@'118.67.248.190' (using password: YES)”提示用户`Technosaar`从您的 Web 服务器缺少访问权限。登录到phpmyadmin并输入命令

```
show grants; 
```

或者

```
show grants for '<myuser'@'<host>'; 
```

应该有一条线

> 将 <mydatabase> 上的 <privilege> 授予 '<myuser>'@'<host>'

在那里，您将看到为您的用户配置了哪些访问权限。如果您的网络服务器未列出，您必须

```
grant all privileges on <mydatabase>.* to '<myuser>'@'<host>'; 
```

或您的数据库所需的任何权限。

当然，插入适当的数据库名称、用户名和网络服务器主机。

# xpages - 在 xPages 中使用 Bean 不起作用

> ID：13630996
> 
> 赞同：1
> 
> 时间：2012-11-29T17:07:38.493
> 
> 标签：xpages, xpages-ssjs

我有一个简单的应用程序，其中包含一个类和一个带有一个计算字段的 xPage，绑定到该类。我想将类 getter 的结果显示为 bean。不工作。我的课看起来像这样：

```
package test.test;

public class Test {
    public Test() {
    }

    public String getTest() {
        return "Test";
    }
} 
```

计算字段中的 SSJS：

```
var test = new test.test.Test();
return test.getTest(); 
```

一个错误是这样的：

```
Error while executing JavaScript computed expression
Script interpreter error, line=1, col=17: 'test' is undefined

1: var test = new test.test.Test(); 
```

我是否缺少任何设置或什么？在此先感谢，吉克拉

编辑：如果我使用托管 bean，问题是完全一样的。我的 Designer/Eclipse IDE 一定有问题。明天我会尝试重新安装它。

EDIT2：今天，我试图在我大学的计算机上做同样的事情，这是同样的错误。所以，问题不在于我的 IDE。我肯定错过了什么。我是否需要在服务器或 IDE 中安装任何外部库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:14:52.300

好的，我做了以下。

1）创建了一个新的Java类。

![在此处输入图像描述](../Images/af85c46b683f94ff36cf4144d519e81f.png)

2）将以下代码放入类中。

```
package test.test;

public class Test implements java.io.Serializable {

    public Test() {
        super();
    }

    public String getTest() {
        return "Test";
    }

} 
```

3) 使用以下源创建了一个 XPage：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:text escape="true" id="computedField1">
        <xp:this.value><![CDATA[#{javascript:var t:test.test.Test = new     test.test.Test();

return t.getTest();
}]]></xp:this.value>
    </xp:text>
</xp:view> 
```

在浏览器中打开它并出现“测试”一词。

将变量“t”更改为“test”，然后它失败了。所以看起来变量名是问题所在。

**[编辑]**

根据您对使用 8.5.2 的评论，代码/Java 功能直到 Notes/Domino 8.5.3 才出现。这就是为什么它不适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:04:26.287

您在 SSJS (test) 中的变量名与包名冲突。采用

```
var test1=new test.test.Test(); 
```

它会工作...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:12:05.813

可能是构建问题。确保你...

1）构建代码，尝试清理和构建。

2) 具有正确的构建路径 - 您可以在首选项对话框中找到它。

3) 可以定位Test.class 文件，最好在Java 透视图的Navigator 视图中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T12:37:31.557

确保在更改包名称后构建 Java 和 XPage。例如，将 a 添加`print("new XPage")`到 SSJS 和`System.out.println("new Java")`Java。

我可以用您的代码和 8.5.3FP3 Designer+Server 重现问题。当我将包名称更改为**test.tes**时，问题就消失了。

编辑：我一直使用变量名“t”并且可以确认如果我将变量名更改为“test”**也会**出现问题，正如西蒙在下面发现的那样。也许 Simon 有不同的 Desiger/Domino 版本，因为`test.test.Test`变量名“t”对我不起作用。

EDIT2：听起来您正在使用 8.5.3 Designer 和 8.5.2 服务器。正如西蒙所说，代码/Java 是在 8.5.3 中引入的。例如，可以在此处找到为 8.5.2 编写 Java 的说明：http: [//xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_Java](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_Java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T17:17:20.693

在 SSJS 中初始化 Java 类时，代码应如下所示：

```
var testObj:test.test.Test = new test.test.Test(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T18:00:37.187

你忘了放新的声明。

```
var test = new test.test.Test(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T09:16:20.083

不确定这是否是问题，但我认为您必须在 Bean 中定义一个 String 类型的变量“test”，以便使用 getTest() 检索它的值。

# android - OnLocationChanged 与 AddProximityAlert

> ID：13630999
> 
> 赞同：0
> 
> 时间：2012-11-29T17:07:45.057
> 
> 标签：android, location, locationmanager

我已阅读有关这两种方法的文档，但无法弄清楚两者之间的根本区别是什么。我知道每 4 分钟调用一次 AddProximityAlert，而 OnLocationChanged 为我们提供了更多时间间隔的灵活性。除此之外，是否有任何区别，例如准确性？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:45:40.140

这两种方法服务于不同的目的。可以使用接近警报 - 顾名思义 - 在进入或离开某物附近时发出警报。例如，您可以将接近警报设置为“Deep Shit”，然后当您处于“Deep Shit”或不再是“Deep Shit”时，警报就会响起。但是直到什么都没有发生，您可以四处走动，例如进入“麻烦”，但只要您不在“深坑”中，警报就不会触发。

另一方面，如果您移动给定的距离，则会触发 OnLocationChange。

如果您在“Deep Shit”中并设置了 100m 接近警报和 100m 的位置更改侦听器，两者都会被解雇。但如果你继续前进，onLocationChange 将每 100 米触发一次。