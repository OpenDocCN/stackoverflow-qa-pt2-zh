# StackOverflow 问答 14032000-14032999

# codeigniter - 为什么我在使用带有 ci 视图的 mpdf 库时看到空白页？

> ID：14032000
> 
> 赞同：0
> 
> 时间：2012-12-25T15:42:10.000
> 
> 标签：codeigniter, pdf, codeigniter-2

我使用本[教程](http://ellislab.com/forums/viewthread/204306/)从 html 文件生成 pdf 文件，例如

控制器

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Test extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    function index() {

        $this->load->library('mpdf');
        $this->mpdf = new mPDF('utf-8', 'A4');
        $html = $this->load->view("test");
        $txt = "hiiiiiiiiiii";
        $this->mpdf->WriteHTML($txt , 2);
        $this->mpdf->WriteHTML($html , 2);
        $this->mpdf->Output('ggg.pdf', 'I');
    }

    public function ahmed() {
        $this->load->view('test');
    }

    public function fakhr() {
        $this->load->view('welcome_message');
    }

    public function yahoo() {
        $this->load->view('welcome_message');
    }

} 
```

问题是，当我传递 `$html`给`WriteHTML()`函数时，它生成了一个空白的pdf，当我将`$txt`变量传递给同一个函数时打印了文本`"hiiiii"...` ，那么如何解决这个问题，为什么我不能从codeigniter视图文件生成pdf..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:24:39.863

你只需要这样做

```
$html = $this->load->view("test",array() , true); 
```

使用第三个参数为 true 以便它以字符串形式返回视图

# regex - 正则表达式，匹配大括号 { } 外的字符

> ID：14032016
> 
> 赞同：4
> 
> 时间：2012-12-25T15:44:03.903
> 
> 标签：regex

我有以下数据：

```
int  time="1356280261"
char value="3000"

bankLine {
  char value="3000"
  char currency="EUR"
  int  time="1356280261"
} #bankLine 
```

我正在递归地解析这些数据，并且**只想分别匹配块外的 2 个变量**。

我确实有这个正则表达式来匹配变量

```
/(?:char|int)\s*([A-z0-9]*)\s*=\s*"(.*)"/ 
```

然而，正则表达式也匹配块内的所有匹配项。

**如何仅单独匹配前 2 个变量并忽略 bankLink 块内的所有变量？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:54:16.627

这有点骇人听闻，但您可以尝试添加负前瞻，如下所示：

```
/(?:char|int)\s*([A-z0-9]*)\s*=\s*"(.*)"(?![^{]*\})/
                                        ^^^^^^^^^^^ 
```

这假设所有大括号都是平衡的，幸运的是嵌套应该无关紧要（而在类似的问题中通常会如此），因为您正在寻找括号*外的案例。*

前瞻是基于这样的观察：如果你遇到闭括号而没有遇到开括号，那么我们可以合理地假设我们在括号内。

人们很想以另一种方式扩展它以包含负面的*lookbehind*，但不幸的是大多数实现不支持可变长度的lookbehinds。

**编辑：**

正如以下评论中所讨论的，建议使用以下修复程序：

```
/(?:char|int)\s*([A-Za-z0-9]*)\s*=\s*"([^"]*)"(?![^{]*\})/
                    ^^^                ^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:58:18.980

看看这样的事情是否适合你：

```
^(?:char|int)[^\n\r]*?$ 
```

或者只是`^`在你的表情前面放一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:28:27.620

这可能不是最好的解决方案，但我认为这将适用于您的情况：

```
/^(int|char).*$/ 
```

原因是您的声明在 bankLine 块内缩进。这就是我们在这里所利用的。我们只是匹配所有以 int 或 char 开头且开头没有任何空格的行。

# php - 将数组元素转换为变量

> ID：14032017
> 
> 赞同：0
> 
> 时间：2012-12-25T15:44:17.913
> 
> 标签：php, arrays, variables

鉴于，

```
$required_fields = array('name', 'location', 'email');                               
foreach ($required_fields as $fieldname) {
    if (isset($_POST[$fieldname]) || !empty($_POST[$fieldname])) {      

        } 
```

现在在 if 语句中，我需要类似的东西

```
$fieldname = $_POST[$fieldname]; 
```

所以我得到

$name = "name"、$location = "location" 和 $email = "email"

我试过 $fieldname = $_POST[$fieldname] 但它不起作用。我怎样才能动态地做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T15:47:00.510

你这样做，

```
$$fieldname = $_POST[$fieldname]; 
```

这种`$$`表示法称为[变量 variable](http://php.net/manual/en/language.variables.variable.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T15:47:06.527

您可以为此使用`extract` [功能。](http://php.net/extract)要过滤数组，您可以使用`array_diff` [函数](http://php.net/array_diff)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T16:17:21.313

```
$required_fields = array('name', 'location', 'email');
extract(array_intersect_keys($_POST, array_flip($required_fields))); 
```

`$required_fields`仅当 $_POST 数组中存在时，这将为每个命名的变量创建局部变量。否则，变量将未定义。

[array_flip](http://php.net/manual/en/function.array-flip.php)
[array_intersect_key](http://php.net/manual/en/function.array-intersect-key.php)
[提取](http://php.net/manual/en/function.extract.php)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-25T15:55:42.827

你也可以使用

```
eval("$".$fieldname."='".$_POST["fieldname"]."';"); 
```

# objective-c - 在 IOS 6 上没有互联网连接的情况下首次启动时启用 icloud 和核心数据的应用程序冻结

> ID：14032019
> 
> 赞同：2
> 
> 时间：2012-12-25T15:44:30.830
> 
> 标签：objective-c, ios, core-data, sync, icloud

我刚刚创建了icloud集成核心数据应用程序，它在正常情况下可以正常工作，但是在没有互联网连接的情况下首次启动应用程序时，我在IOS 6上遇到了奇怪的问题。应用程序停止响应。

我已经控制了我的代码，并在谷歌上查看了几乎所有与此问题相关的主题，但我找不到任何答案。

我在开发人员门户上发布的 WWDC 2012 iCloud 和核心数据示例代码 (SharedCoreData) 上也遇到了完全相同的问题。

在苹果的示例代码中，我一直在追踪这个问题，直到“addPersistentStoreWithType”。

您可以在下面找到发生冻结的部分苹果代码，坦率地说，由于苹果的版权问题，我不愿分享所有代码。

但这就是， (BOOL)loadiCloudStore: 已经从另一个线程调用，所以实际上没有线程问题，只是在调用“managedObjectContext”时发生冻结。

那么，你们知道为什么“addPersistentStoreWithType”在没有互联网连接的情况下首次启动时停止响应吗？

```
- (BOOL)loadiCloudStore:(NSError * __autoreleasing *)error {
    BOOL success = YES;
    NSError *localError = nil;

    NSFileManager *fm = [[NSFileManager alloc] init];
    _ubiquityURL = [fm URLForUbiquityContainerIdentifier:nil];

    NSURL *iCloudStoreURL = [self iCloudStoreURL];
    NSURL *iCloudDataURL = [self.ubiquityURL URLByAppendingPathComponent:@"iCloudData"];
    NSDictionary *options = @{ NSPersistentStoreUbiquitousContentNameKey : @"iCloudStore",
                                NSPersistentStoreUbiquitousContentURLKey : iCloudDataURL };

//after that point thread freeze
    _iCloudStore = [self.psc addPersistentStoreWithType:NSSQLiteStoreType
                                          configuration:@"CloudConfig"
                                                    URL:iCloudStoreURL
                                                options:options
                                                  error:&localError];

    success = (_iCloudStore != nil);
    if (success) {
        //set up the file presenter
        _presentedItemURL = iCloudDataURL;
        [NSFileCoordinator addFilePresenter:self];
    } else {
        if (localError  && (error != NULL)) {
            *error = localError;
        }
    }

    return success;
} 
```

# jquery - 如何知道合并行或列的html表的真实列和行索引

> ID：14032023
> 
> 赞同：0
> 
> 时间：2012-12-25T15:45:02.780
> 
> 标签：jquery, merge, cell

请在此处查看演示。[http://jsfiddle.net/wgstudio/CqNfZ/2/](http://jsfiddle.net/wgstudio/CqNfZ/2/)

我想在 html 表格中合并单元格（0,0）和单元格（1,0），它适用于常规表格。

代码如下。

```
 function() {
            var table = $("#table1");

            var rowIndex = 0;
            var colIndex = 0;                
            var actionCell =$($(table.children().children()[rowIndex]).children()[colIndex]); //Cell1
            var tr = table.children().children()[rowIndex + 1]; 
            var toBeRemoved = $($(tr).children()[colIndex]);//Cell4
            toBeRemoved.remove();
            rowSpan = toBeRemoved.attr("rowSpan") == undefined ? 1 : parseInt(toBeRemoved.attr("rowSpan"), 10);
            actionCell.attr("rowspan", (actionCell.attr("rowSpan") == undefined ? 1 : parseInt(actionCell.attr("rowSpan"), 10)) + rowSpan);
        } 
```

但如果表格是这样的：

```
 <table id="table2" style=" width: 100%;">
        <tr>
            <td rowspan="2">cell_1</td>
            <td rowspan="2">cell_2cell_5</td>
            <td>cell_3</td>
        </tr>
        <tr>
            <td>cell_6</td>
        </tr>
        <tr>
            <td>cell_7</td>
            <td>cell_8</td>
            <td>cell_9</td>
        </tr>
    </table> 
```

(0,0)(0,1)是合并单元格，当我想合并(0,0)“Cell1”和(2,0)“Cell7”时，如何通过js代码找到“cell 7”？

希望我解释清楚。

非常感谢。

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:15:21.303

您遇到的主要问题是，一旦将行跨度添加到单元格中，它就会取消行索引。如果一行中`rowspan=3`的一个单元格具有`row index`，则同一列中的下一个单元格是`currentRowIndex + 3`。

这是您需要的一个很好的开始。

```
$("#button2").click(function() {
    /* hard code a cell to start with*/
    var actionCell = $('td:first');

    var toBeRemoved = findNextCell(actionCell);

    combineSpans( actionCell, toBeRemoved)

    /* remove merged*/
    toBeRemoved.remove();

});

function combineSpans( actionCell, toBeRemoved){
    var actionSpans = getCellSpans(actionCell);
    var nextSpans = getCellSpans(toBeRemoved);
    /* add colspan and rowspan for both cells to apply to actionCell*/
    var newSpans = {
        rowspan: actionSpans.rowSpan + nextSpans.rowSpan,
        colspan: actionSpans.colSpan + nextSpans.colSpan
    }
     /* adjust actionCell colspan/rowspan*/
    actionCell.attr(newSpans);

}

function findNextCell($cell) {

    var cellIndex = $cell.index();
    var rowSpan = $cell.attr("rowspan") || 1;
    var rowIndex = $cell.closest('tr').index();
    var nextRow = $cell.closest('table').find('tr').eq(1 * rowSpan + rowIndex);
    return nextRow.find('td').eq(cellIndex);

}

function getCellSpans($cell) {
    var obj = {}
    obj.rowSpan = parseInt($cell.attr("rowspan") || 1, 10);
    obj.colSpan = parseInt($cell.attr("colspan") || 1, 10);
    return obj;

} 
```

演示：http: [//jsfiddle.net/CqNfZ/7/](http://jsfiddle.net/CqNfZ/7/)

**编辑**：刚刚意识到我的`combineSpans`逻辑需要修改。将 2 个单元`colspan`格加在一起会导致问题

# javascript - Qunit+SinonJs spy.calledOnce in setTimeout 未定义

> ID：14032024
> 
> 赞同：1
> 
> 时间：2012-12-25T15:45:10.643
> 
> 标签：javascript, qunit, sinon

我无法理解 sinonjs 间谍的行为。

这是我的测试：

```
asyncTest('sinon async spies test', 
function() { 

    var pApi = 
    { 
        product: function(id, options) { 
            var d = { o: 'a result' };
            options.success(d);
            return d;
        },
    };

    this.spy(pApi, 'product');
    pApi.product(1, { success: function(data) {} });

    //Assertion 1
    ok(pApi.product.calledOnce, 'product API called: ' + 
        pApi.product.calledOnce);

    setTimeout(
            function() { 
                //Assertion 2
                ok(pApi.product.calledOnce, 
                    'product function called once (calledOnce: ' +   
                     pApi.product.calledOnce + ')');
                start();
            }, 1000);

}); 
```

使用 qunit 和 sinonjs（通过 sinon-qunit）运行上述测试，我通过了断言 1，但断言 2 失败（在 setTimeout 回调中）。事实上，当我们`pApi.product.calledOnce`在控制台中记录 的值时（通过断言的消息完成），它是`undefined`.

注意：我的测试文件顶部有这个：

```
sinon.config.useFakeTimers = false; 
```

谁能解释这种奇怪的行为？不应该`pApi.product`在 setTimeout 回调中并且没有两者都`calledOnce`作为间谍的有效属性吗？

**更新**

基于[http://api.qunitjs.com/asyncTest/](http://api.qunitjs.com/asyncTest/)，我弄清楚了为什么会显示上述行为。

`asyncTest``start()`在调用函数之前不会运行 testrunner 。当我更改`this.spy(pApi, 'product')`为`sinon.spy(pApi, 'product')`. 显然，是否`test`使用 is 而不是`asyncTest`，这会影响该`this.spy`方法的运行时间。

需要实际查看 sinon、qunit 和 sinon-qunit 代码才能弄清楚这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:21:50.147

您应该将间谍分配给一个变量，并使用它来断言 calledOnce：

```
asyncTest('sinon async spies test', function() { 
    var pApi = { 
        product: function(id, options) { 
            var d = { o: 'a result' };
            options.success(d);
            return d;
        }
    };

    var pApiSpy = this.spy(pApi, 'product');
    pApi.product(1, { success: function(data) {} });

    //Assertion 1
    ok(pApiSpy.calledOnce, 'product API called');

    setTimeout(
            function() { 
                //Assertion 2
                ok(pApiSpy.calledOnce, 
                    'product function called once');
                start();
            }, 1000);

}); 
```

这将通过两个断言。我认为问题与Sinon在测试功能结束时恢复方法有关，即使QUnit仍在等待`start()`指示测试完成。当你的 timeout 函数被调用时，`pApi.product`它不再是一个 spy 对象，所以它没有 calledOnce 属性。将 spy 设置为其自己的变量允许您对其进行处理，直到调用超时。

# python-2.7 - 多处理 Python 不能并行工作

> ID：14032034
> 
> 赞同：0
> 
> 时间：2012-12-25T15:46:41.190
> 
> 标签：python-2.7, multiprocessing

```
import multiprocessing as mlp

class Test(mlp.Process):
    def run(self):
        if self.name == "Test-2":
            import time
            time.sleep(4)
        print self.name

jobs = []
for i in range(5):
    m = Test()
    jobs.append(m)
    m.run()
for i in jobs:
    i.join() 
```

在上面的代码中，输出总是：Test-1 Test-2 Test-3 Test-4 Test-5

而这些过程只会一个接一个地产生。像 Test-3 一样，仅在 Test-2 完成后才跨越。他们不应该并行发生吗？？？

而且， i.join() 抛出错误： AssertionError: can only join a started process

我做错了什么？？？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:54:24.277

你从来没有开始这个过程。该`run`方法旨在让子类实现，您正确地做到了，但该`start`方法是您应该调用以启动流程（并`run()`在另一个流程实例中自动执行）的方法。

换句话说，调用`m.start()`而不是`m.run()`.

# autocomplete - 如何防止 Sublime Text 2 吞下右括号、引号和圆括号？

> ID：14032041
> 
> 赞同：63
> 
> 时间：2012-12-25T15:47:22.293
> 
> 标签：autocomplete, sublimetext2, editing, brackets

Sublime 有这种行为，有时当你必须输入带有大量括号的结构时，这真的很烦人。当您键入`(`它时，它会添加`()`并将光标放在中间，一切都很好，但是如果您键入`)`它会默默地吞下右括号。

这在输入长正则表达式时真的很烦人，因为括号很快就会变得不平衡，这让我发疯。所以你最终会得到像`(([a-z])`.

所以问题是 - 有没有办法禁用它？如果我键入一个右括号，我希望它留下来，而不是被吞下。

我已经检查了 Sublime 配置，谷歌搜索，但似乎没有人介意这种行为。我用错了吗？

**更新**

您可能还想查看[**Sublime：跳出匹配的括号**](https://stackoverflow.com/questions/8537844/is-there-a-shortcut-in-pycharm-or-sublime-text-2-for-jump-out-of-matching-bracke#answer-11711589)快捷方式。

如果您输入了任何文本，则允许您输入`()`但不会吞下结束符号的完整版本：

```
 { "keys": ["\""], "command": "insert", "args": {"characters": "\""}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^\"", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "[^\"]$", "match_all": true }
      ]
  },
  { "keys": [")"], "command": "insert", "args": {"characters": ")"}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "[^(]$", "match_all": true }
      ]
  },
  { "keys": [")"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "\\($", "match_all": true }
      ]
  },
  { "keys": ["'"], "command": "insert", "args": {"characters": "'"}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "'$", "match_all": true }
      ]
  },
  { "keys": ["]"],"command": "insert", "args": {"characters": "]"}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^\\]", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "[$", "match_all": true }
      ]
  },
  { "keys": ["}"], "command": "insert", "args": {"characters": "}"}, "context":
      [
          { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
          { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
          { "key": "following_text", "operator": "regex_contains", "operand": "^\\}", "match_all": true },
          { "key": "preceding_text", "operator": "regex_contains", "operand": "{$", "match_all": true }

      ]
  } 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-28T23:09:28.400

将此添加到您的用户键绑定文件

```
{ "keys": [")"], "command": "insert", "args": {"characters": ")"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true }
    ]
} 
```

它将覆盖一个键绑定，而不是插入右括号，只是将光标向前移动一个位置。所以本质上它应该做你想要的。

如果您想完全禁用此行为，对于各种括号和引号，这里是完整的用户键绑定部分：

```
{ "keys": ["\""], "command": "insert", "args": {"characters": "\""}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\"", "match_all": true }
    ]
},
{ "keys": [")"], "command": "insert", "args": {"characters": ")"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true }
    ]
},
{ "keys": ["'"], "command": "insert", "args": {"characters": "'"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^'", "match_all": true }
    ]
},
{ "keys": ["]"],"command": "insert", "args": {"characters": "]"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\]", "match_all": true }
    ]
},
{ "keys": ["}"], "command": "insert", "args": {"characters": "}"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\}", "match_all": true }
    ]
} 
```

**编辑：**

如果您想跳过右括号（如果光标就在左括号之后）并在所有其他情况下打印它，您可以拆分您的键绑定以区分这两种可能性：

```
{ "keys": [")"], "command": "insert", "args": {"characters": ")"}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "[^(]$", "match_all": true }
    ]
},
{ "keys": [")"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
    [
        { "key": "setting.auto_match_enabled", "operator": "equal", "operand": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\)", "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "\\($", "match_all": true }
    ]
}, 
```

如果前面的文本不以左括号结尾，则第一个插入字符。如果第二个以左括号结尾，则将光标向前移动一个位置。如果你对正则表达式有点熟悉，你可以对所有其他类型的括号和引号做同样的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T13:56:41.003

重新定义`)`键绑定：

```
{ "keys": [")"], "command": "insert", "args": {"characters": ")"} } 
```

**编辑**：另一种方法是启用/禁用`auto_match_enabled`设置（从而更改自动配对行为），您可以使用键盘快捷键随意切换它：

```
{ "keys": ["alt+m"], "command": "toggle_setting", "args": {"setting": "auto_match_enabled"} } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-05T21:34:21.883

我在浏览键绑定文件“首选项/键绑定 - 默认”时发现，如果您选择一些文本并键入其中任何一个（{[。它将在您的文本周围放置括号。

# c# - 缓冲内存分配

> ID：14032042
> 
> 赞同：1
> 
> 时间：2012-12-25T15:47:31.307
> 
> 标签：c#, sockets, memory-management, garbage-collection, buffer

我遇到了缓冲内存分配的问题。我有两个线程的 WF 聊天应用程序：一个发送，一个接收。第一个客户端向服务器发送消息：

```
 private async void send_button_Click(object sender, EventArgs e)
    {
        string msg = this.messageTextBox.Text.Trim();
        await Task.Run(() =>
        {
            buf = Encoding.ASCII.GetBytes(msg); //buf-buffer for send/rcv
            clientSock.SendTo(buf, servEP);
            this.Invoke((Action)delegate
            {
                this.dialogTextBox.Text += string.Format("client: {0}", 
                      this.messageTextBox.Text.Trim());
            });
         buf = new byte[1024]; //allocate memory for receiving
        });
    } 
```

然后服务器响应，这里我遇到了缓冲区问题：

```
 private async void Form1_Load(object sender, EventArgs e)
    {
        clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, 
                             ProtocolType.Udp);
        servIPEP = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 50000);
        servEP = (EndPoint)servIPEP;

        clientIPEP = new IPEndPoint(IPAddress.Any, 43000);
        clientEP = (EndPoint)clientIPEP;
        clientSock.Bind(clientEP);
        while (true)
        {
            await Task.Run(() =>
            {
                //buf = new byte[1024] I tried to allocate here, but it's not working.

                int rcv = clientSock.ReceiveFrom(buf, 0, buf.Length, 
                    SocketFlags.None, ref servEP); // it returns right int value!
                msg = Encoding.ASCII.GetString(buf, 0, rcv); //but buf is empty..
                this.Invoke((Action)delegate
                {
                    this.dialogTextBox.Text += rcv;
                    this.dialogTextBox.Text += string.Format("server: {0},rcv: {1}", 
                        msg, rcv) + Environment.NewLine; //msg is empty...
                });
            });
        }
    } 
```

这真的很奇怪，因为如果服务器重新发送消息，它在客户端接收没有问题。但第一条消息始终为空。事实上它收到了第一条消息，我测试过

```
int rcv = clientSock.ReceiveFrom(buf, ref servEP); 
```

它返回正确的 int，但 buf 值为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:19:48.770

什么是buf.Length？还有一行 buf = new byte[1024]; //为接收分配内存让我感到困惑

你能检查一下你第一次跑步时的尺寸吗？也许它为零？我看不到你在哪里声明这就是为什么它困扰我。你为什么不写 var buf2 = new byte[1024]; 并将所有buf更改为buf2。实际上你不能简单地写 byte[] buf 而不是 buf =？为什么它不起作用？不会是编译错误吧？

- 是一个评论，但我觉得这可能会解决这个问题。如果不是我会删除的-

# c# - .NET 类似于 PHP 的 PDO？

> ID：14032046
> 
> 赞同：3
> 
> 时间：2012-12-25T15:48:00.957
> 
> 标签：c#, php, database, pdo

我来自 PHP，最终我会深入研究 NHibernate 或 Microsoft Entity Framework 之类的东西，但现在我真的很喜欢 PHP 的 PDO 等简单的东西来连接数据库：

```
$db = new PDO('sqlite:database');
$db->exec('delete from users'); 
```

PDO 抽象了数据库上的连接（不管它是什么，而不仅仅是 sqlite），并提供了一些常用的方法来执行准备好的语句和东西。.NET 中有这么简单的东西吗？

obs：我刚开始使用 C#，所以如果您可以非常具体地说明如何将库链接到项目或其他设置步骤（如果需要），我将非常感激（：~我正在使用 VS2012

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T15:50:54.840

在 .NET 中，允许您查询关系数据库的技术称为[ADO.NET](http://msdn.microsoft.com/en-us/library/h43ks021%28v=vs.110%29.aspx)。例如：

```
using (var conn = new SQLiteConnection("Your connection string comes here"))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = "DELETE * FROM users";
    cmd.ExecuteNonQuery();
} 
```

在此示例中，我使用了 SQLite 的 ADO.NET 提供程序，您可以使用它[`download from here`](http://sqlite.phxsoftware.com/)。

因此，第一步是让您从上述网站下载 .NET 的托管提供程序。

下一步是`System.Data.SQLite.dll`通过右键单击解决方案资源管理器中的“引用”节点并选择程序集来引用项目中的程序集。请小心，因为 SQLite 有 x86 和 x64 程序集，因此请确保选择最适合您的目标体系结构的程序集。

引用程序集后，`SQLiteConnection`我在示例中显示的类型以及覆盖 ADO.NET 基类的类型将可用于您的代码，并且您可以直接使用它来查询数据库。引用程序集后，不要忘记向`using System.Data.SQLite;`文件添加指令以将这些类纳入范围。

如果您不想经历下载、提取等所有痛苦……SQLite 依赖项，您可以简单地安装可用的[System.Data.SQLite NuGet](http://www.nuget.org/packages/System.Data.SQLite)。

了解 ADO.NET 是如何工作的，是了解未来 NHibernate 和 Entity Framework 等 ORM 框架如何工作的基础，所以从基础入手真的很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T00:33:55.373

```
PDO in dotNET
[enter link description here][1]
  [1]: https://www.nuget.org/packages/SDO_dotNET/1.0.2

    The SDO_dotNET Class Library is a high level wrapper around the ODBC, OLEDB, SQLServer and SQLite.

Example:
using SqlDB;

/******************************************************************
Sql Server
*******************************************************************/

string server      = @"INSTANCE\SQLEXPRESS";
string database = "DEMODB";
string username = "sa";
string password = "";

string connectionString = @"Data Source=" + server + ";Initial Catalog=" + database + "; Trusted_Connection=True;User ID=" + username + ";Password=" + password + "";
SDO db_conn = new SDO(connectionString);

Console.WriteLine("isConnected: " + db_conn.isConnected());
if (db_conn == null || !db_conn.isConnected())
{
    Console.WriteLine("Connessione non valida.");
    return;
}

string sql = "SELECT ID, Message FROM Logs ORDER BY IDLic;";
DataTable dtLogs = db_conn.SelectTable(sql);

if (dtLogs == null || dtLogs.Rows.Count == 0)
    return;

// Loop with the foreach keyword.
foreach (DataRow dr in dtLogs.Rows)
{
    Console.WriteLine("Message: " + dr["Message"].ToString().Trim());
}

/******************************************************************
SQLite
*******************************************************************/

string database = @"C:\Users\Utente\mydb.sqlite";

string connectionString = @"Data Source=" + database + "; Version=3; New=True; Compress=True;"; // local
SDO db_conn = new SDO(connectionString);

Console.WriteLine("isConnected: " + db_conn.isConnected());
if (db_conn == null || !db_conn.isConnected())
{
    Console.WriteLine("Connessione non valida.");
    return;
}

string sql = "SELECT firstname, surname FROM users ORDER BY firstname;";
DataTable dtLogs = db_conn.SelectTable(sql);

if (dtLogs == null || dtLogs.Rows.Count == 0)
    return;

// Loop with the foreach keyword.
foreach (DataRow dr in dtLogs.Rows)
{
    Console.WriteLine("Name: " + dr["firstname"].ToString().Trim() + " " + dr["surname"].ToString().Trim());
}`enter code here` 
```

# restkit - 如果在 RestKit（0.1 版）中收到意外的有效负载，应用程序会崩溃

> ID：14032047
> 
> 赞同：0
> 
> 时间：2012-12-25T15:48:17.847
> 
> 标签：restkit

我正在使用版本 0.1 并使用 loadObjectsAtResourcePath:usingBlock: 和 loadObjectsAtResourcePath:delegate: 方法获取数据。要使用的映射是使用对象管理器的 mappingProvider 属性上的 setObjectMapping:forKeyPath: 方法设置的。

现在，如果数据以映射提供者所期望的格式出现，那么一切顺利。但是，如果不是格式，应用程序就会崩溃。在调试时，我发现 RKObjecLoader.m 方法中的“if [self isResponseMappable]”检查是崩溃发生前最后执行的行。

这是一个例子。如果出现这样的 JSON，一切顺利 - {"topic_details":""}

但是，如果此 JSON 出现，应用程序将崩溃 - ["Access Denied"]

这是指定的映射键路径 - [objectManager.mappingProvider setObjectMapping:topicMapping forKeyPath:@"topic_details"]

如何处理，没有什么可以阻止 Web 服务返回意外数据。这是一个严重的问题。

移动到更高版本会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:47:59.880

移至 RestKit 0.2 pre-release 3。到目前为止已经好多了。

# emgucv - C Sharp 中的特征向量和特征值计算库

> ID：14032048
> 
> 赞同：0
> 
> 时间：2012-12-25T15:48:30.463
> 
> 标签：emgucv, eigenvector, eigenvalue

我正在使用人脸识别。我需要从矩阵计算特征向量和特征值。我正在使用 C sharp 。是否有任何用于特征向量和特征值计算的库。我认为 Emgu CV 对特征向量和特征值计算没有功能。我是新人所以不太了解。我需要一个用于 C Sharp 的特征向量和特征值计算的库。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:14:46.240

Emgu 很好，但如果你想要完全控制和纯 c# 库，我强烈建议使用[Accord.Net Framework](http://code.google.com/p/accord/)，它是用 C# 完成的研究项目的完整框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T16:01:28.140

查看 Math.NET（MIT/X11 许可）库的命名空间 MathNet.Numerics.LinearAlgebra。

文档在这里： http:
[//nmath.sourceforge.net/doc/numerics/MathNet.Numerics.LinearAlgebra.html](http://nmath.sourceforge.net/doc/numerics/MathNet.Numerics.LinearAlgebra.html)

你在这里找到它：
[https ://github.com/mathnet](https://github.com/mathnet)

您将对 EigenvalueDecomposition 类感兴趣
[http://nmath.sourceforge.net/doc/numerics/MathNet.Numerics.LinearAlgebra.EigenvalueDecomposition.html](http://nmath.sourceforge.net/doc/numerics/MathNet.Numerics.LinearAlgebra.EigenvalueDecomposition.html)

# spring - Spring security：控制器方法访问某些角色

> ID：14032054
> 
> 赞同：2
> 
> 时间：2012-12-25T15:49:07.297
> 
> 标签：spring, jakarta-ee, spring-mvc, spring-security

我在控制器中有三种方法。但是每种方法都有不同的访问角色。

```
@RequestMapping("/deleteMethod.htm")
    public String deleteMethod(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        // Can be accessed by only ROLE_ADMIN
    }

@RequestMapping("/editMethod.htm")
    public String editMethod(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
          // Can be accessed by ROLE_ADMIN and ROLE_USER

    }

    @RequestMapping("/viewMethod.htm")
    public ModelAndView viewMethod(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        // Anyone can access this method
    } 
```

我想我在拦截 url 时感到困惑。无论如何，我只想授权控制器的方法。谁能解释如何做到这一点？

**安全.xml**

```
<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <form-login login-page="/login.htm" default-target-url="/welcome.htm"
        authentication-failure-url="/loginfailed.htm" />
    <logout logout-success-url="/logout.htm" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"

       users-by-username-query="
          select username,password,enabled 
          from tbl_users where username=?" 

       authorities-by-username-query="
          select u.username, ur.authority from tbl_users u, tbl_user_roles ur 
          where u.user_id = ur.user_id and u.username =?  " 

    />
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T16:12:19.787

这可以通过使用注释来完成。在您的配置中启用安全注释。

```
<global-method-security secured-annotations="enabled" /> 
```

并在方法声明上使用`@Secured`注释。

```
@Secured("ROLE_ADMIN")
public String deleteMethod(HttpServletRequest request,
     HttpServletResponse response) throws Exception {
    // Can be accessed by only ROLE_ADMIN
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T10:35:10.023

你也可以使用

```
<http auto-config="true" use-expressions="true" >

    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <intercept-url pattern="/deleteMethod.htm*" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/editMethod.htm*" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/viewMethod.htm*" access="hasRole('ROLE_ADMIN')" />

    <form-login login-page="/login.htm" default-target-url="/welcome.htm"
        authentication-failure-url="/loginfailed.htm" />
    <logout logout-success-url="/logout.htm" />
</http> 
```

# wordpress - 相同的wordpress安装不同的子域

> ID：14032057
> 
> 赞同：0
> 
> 时间：2012-12-25T15:49:53.607
> 
> 标签：wordpress

我正在尝试从服务器域访问相同的 wordpress 网站，例如：

```
www.example.com
sub1.example.com
sub2.example.com 
```

我已经下载了“域镜像”插件并安装并配置了它。

```
$default_options['domain_1'] = '';
$default_options['blogname_1'] = 'example';         // Weblog Title
$default_options['blogdescription_1'] = '';     // Tagline
$default_options['siteurl_1'] = 'http://example.com';       // Wordpress Address
$default_options['home_1'] = 'http://example.com';          // Blog Address

$default_options['domain_2'] = 'a';
$default_options['blogname_2'] = '';
$default_options['blogdescription_2'] = '';
$default_options['siteurl_2'] = 'http://sub1.example.com';
$default_options['home_2'] = 'http://sub1.example.com';

$default_options['domain_3'] = 'b';
$default_options['blogname_3'] = '';
$default_options['blogdescription_3'] = '';
$default_options['siteurl_3'] = 'http://sub2.example.com';
$default_options['home_3'] = 'http://sub2.example.com'; 
```

但是当我从我的子域 sub1、sub2 进入网站时。所有链接都重定向到[http://example.com/](http://example.com/) .... 而不是[http://sub1.example.com/](http://sub1.example.com/) ... 或[http://sub2.example.com/](http://sub2.example.com/) ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:51:53.740

我猜这个插件不适用于新的 wordpress 版本.. 因为它真的很旧。无论如何，我设法通过添加来修复它

```
define('WP_HOME',    'http://' . $_SERVER['HTTP_HOST'] );
define('WP_SITEURL',    'http://' . $_SERVER['HTTP_HOST'] ); 
```

到我的 wp 配置。:)

# python - Flask 可以有可选的 URL 参数吗？

> ID：14032066
> 
> 赞同：321
> 
> 时间：2012-12-25T15:50:30.740
> 
> 标签：python, flask

是否可以直接声明烧瓶 URL 可选参数？

目前我正在按照以下方式进行：

```
@user.route('/<userId>')
@user.route('/<userId>/<username>')
def show(userId, username=None):
    pass 
```

我怎么能直接说这`username`是可选的？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2012-12-25T16:26:59.797

另一种方法是写

```
@user.route('/<user_id>', defaults={'username': None})
@user.route('/<user_id>/<username>')
def show(user_id, username):
    pass 
```

但我猜你想写一个单一的路线并标记`username`为可选？如果是这样的话，我认为这是不可能的。

* * *

## 回答 #2

> 赞同：221
> 
> 时间：2013-05-15T15:42:59.997

与几个月前的 Audrius 几乎相同，但您可能会发现函数头中的默认值更具可读性 - 就像您习惯使用 python 的方式：

```
@app.route('/<user_id>')
@app.route('/<user_id>/<username>')
def show(user_id, username='Anonymous'):
    return user_id + ':' + username 
```

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2014-10-15T09:39:18.117

如果你像我一样使用 Flask-Restful，也可以这样：

```
api.add_resource(UserAPI, '/<userId>', '/<userId>/<username>', endpoint = 'user') 
```

然后在您的资源类中：

```
class UserAPI(Resource):

  def get(self, userId, username=None):
    pass 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-01-27T09:01:11.967

```
@user.route('/<userId>/')  # NEED '/' AFTER LINK
@user.route('/<userId>/<username>')
def show(userId, username=None):
    pass 
```

[https://flask.palletsprojects.com/en/1.1.x/quickstart/#unique-urls-redirection-behavior](https://flask.palletsprojects.com/en/1.1.x/quickstart/#unique-urls-redirection-behavior)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-10-21T09:21:45.047

```
@app.route('/', defaults={'path': ''})
@app.route('/< path:path >')
def catch_all(path):
    return 'You want path: %s' % path 
```

[http://flask.pocoo.org/snippets/57/](http://flask.pocoo.org/snippets/57/)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-10-21T10:40:18.577

```
@user.route('/<user_id>', defaults={'username': default_value})
@user.route('/<user_id>/<username>')
def show(user_id, username):
   #
   pass 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-05-22T05:52:12.650

几乎与 skornos 相同，但使用变量声明以获得更明确的答案。它可以与[Flask-RESTful 扩展](https://flask-restful.readthedocs.io/en/latest/)一起使用：

```
from flask import Flask
from flask_restful import Resource, Api

app = Flask(__name__)
api = Api(app)

class UserAPI(Resource):
    def show(userId, username=None):
    pass

api.add_resource(UserAPI, '/<userId>', '/<userId>/<username>', endpoint='user')

if __name__ == '__main__':
    app.run() 
```

该`add_resource`方法允许传递多个 URL。每个都将被路由到您的[Resource](https://flask-restful.readthedocs.io/en/latest/api.html#flask_restful.Resource)。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-03-12T02:08:20.897

我知道这篇文章很老，但我研究了一个名为 flask_optional_routes 的包。代码位于：[https](https://github.com/sudouser2010/flask_optional_routes) ://github.com/sudouser2010/flask_optional_routes 。

```
from flask import Flask

from flask_optional_routes import OptionalRoutes

app = Flask(__name__)
optional = OptionalRoutes(app)

@optional.routes('/<user_id>/<user_name>?/')
def foobar(user_id, user_name=None):
    return 'it worked!'

if __name__ == "__main__":
    app.run(host='0.0.0.0', port=5000) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-06T21:19:46.340

您可以按照示例中的说明进行编写，但会出现构建错误。

为了解决这个问题：

1.  在根 .py 中打印 app.url_map ()
2.  你会看到类似的东西：

`<Rule '/<userId>/<username>' (HEAD, POST, OPTIONS, GET) -> user.show_0>`

和

`<Rule '/<userId>' (HEAD, POST, OPTIONS, GET) -> .show_1>`

3.  比在模板中你可以`{{ url_for('.show_0', args) }}`和`{{ url_for('.show_1', args) }}`

* * *

## 回答 #10

> 赞同：-8
> 
> 时间：2014-03-06T10:05:10.140

从 Flask 0.10 开始，您不能将多个路由添加到一个端点。但是您可以添加假端点

```
@user.route('/<userId>')
def show(userId):
   return show_with_username(userId)

@user.route('/<userId>/<username>')
def show_with_username(userId,username=None):
   pass 
```

* * *

## 回答 #11

> 赞同：-9
> 
> 时间：2017-03-24T04:12:40.037

我认为您可以使用蓝图，这将使您的代码看起来更好、更整洁。

例子：

```
from flask import Blueprint

bp = Blueprint(__name__, "example")

@bp.route("/example", methods=["POST"])
def example(self):
   print("example") 
```

# php - php 初学者 - sql 查询中的基本 php 变量

> ID：14032067
> 
> 赞同：-3
> 
> 时间：2012-12-25T15:50:42.093
> 
> 标签：php, mysql

PHP变量在sql查询中不起作用..

我只是 php 的初学者。请告诉我哪里出错了。谢谢提前。

```
$sql = 'SELECT email_id FROM dealer WHERE dealerid="'mysql_real_escape_string($id).'"';

$rt  = mysql_query($sql);
$row = mysql_fetch_row($rt);

if($row) {
  echo "<h1>Number:</h1>" . $row[0];
  while($row = mysql_fetch_assoc($rt)) {
    var_dump($row);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T16:01:17.687

你忘了正确连接字符串它应该是这样的

```
$sql = 'SELECT email_id FROM dealer WHERE dealerid="' . mysql_real_escape_string($id) . '"'; 
```

[字符串运算符](http://php.net/manual/en/language.operators.string.php)

你的代码可能会给你

```
Parse error: syntax error, unexpected T_VARIABLE on line bla 
```

这是一个语法错误，这意味着您的代码中有一些东西阻止它被正确解析并因此运行。

**你应该做**的是仔细检查错误所在的行是否有任何简单的错误

所以请确保您至少`E_PARSE`在您的`php.ini`. 生产脚本中不应存在解析错误。

我总是建议在编码时

```
error_reporting(E_ALL); 
```

[错误报告](http://php.net/manual/en/function.error-reporting.php)

* * *

**笔记**

1.  我们正在使用它不是真的，我们`mysql_real_escape_string()` 完全安全的形式 sql 注入[cheak this answer by @ircmaxell](https://stackoverflow.com/a/12202218/1723893)
2.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:53:59.840

你在第 1 行有一个语法错误，你需要一个 " `.`"`'`和 mysql

```
$sql = 'SELECT email_id FROM dealer WHERE dealerid="' . mysql_real_escape_string($id) . '"'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:55:32.390

试试这个

```
$escaped = mysql_real_escape_string($id);
$sql = "SELECT email_id FROM dealer WHERE dealerid='$escaped'"; 
```

# c# - 路径存储在配置文件中？

> ID：14032089
> 
> 赞同：3
> 
> 时间：2012-12-25T15:52:28.770
> 
> 标签：c#, .net, configuration, path

查看一个简单的配置条目：

保存路径时的最佳实践决定是什么？带有斜杠，例如：

```
<add key="aaa" value="\\dsFileSrv\Documents\Public\RX\DATA\Source\"/> 
```

或者

```
<add key="aaa" value="\\dsFileSrv\Documents\Public\RX\DATA\Source"/> 
```

*ps 我知道我可以使用 Path.Combine 来消除这种冲突。*

但是，仍然必须有一个最佳的整体决策作为起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:55:11.953

让我们看看框架本身使用了什么......

`Environment.CurrentDirectory`

输出：

`C:\Users\rotem\Desktop`

因此，我会说没有尾随斜杠。

**编辑**
话虽如此，如果您使用`Path.Combine`，包含尾随反斜杠并没有真正的危害，并且如评论中所述，它可能会更好地传达这保证是一个目录而不是没有扩展名的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:01:55.130

在与自己思考之后，（并在阅读答案之后）

我认为为了使 onfig 文件更“人类可读”和“更易于理解” -

用斜线指定是更好的选择。（原因在 c:\a\1 ， 1 可以是文件）。

# perl - 无法解冻使用 Storable::nfreeze 存储的数据结构？

> ID：14032092
> 
> 赞同：3
> 
> 时间：2012-12-25T15:52:49.757
> 
> 标签：perl, storable

我有一堆数据存储在 MySQL 表的单个列中。我可以访问大约 5 年的 perl 代码，该代码将其存储在那里，并且可以看到它是`Storable::nfreeze`在存储之前被冻结的所有哈希值。MySQL 列是`TEXT`并且表设置为`latin1`编码。我现在正在尝试检索这些数据以进行一次性导出。我知道该应用程序最初是在 perl 5.8.x 上运行的，所以我正在尝试使用 perl-5.8.8。不幸的是，我不知道使用的是什么版本的 Storable。

我首先尝试使用最新的 Storable 2.39。这给了我：

```
Storable binary image v32.32 more recent than I am (v2.9) at
perlbrew/perls/perl-5.8.8/lib/5.8.8/darwin-2level/Storable.pm line 417` 
```

使用 Storable-2.14 我得到

```
Storable binary image v32.32 more recent than I am (v2.7) at blib/lib/Storable.pm
(autosplit into blib/lib/auto/Storable/thaw.al) line 363 
```

使用 Storable-2.13 我得到

```
Storable binary image v2.7 more recent than I am (v2.6) at blib/lib/Storable.pm  
(autosplit into blib/lib/auto/Storable/thaw.al) line 363 
```

>= 2.14 中不合理的高二进制图像数字让我认为解析数字的方式发生了一些变化。我相信这段代码可能在 32 位操作系统上运行，现在我正在 64 位机器上尝试这个，这可能是相关的吗？接下来是我将尝试运行 2.13 和 2.14 之间的差异，看看我是否能找出导致变化的原因。

任何人都可以提供任何指导吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:30:34.807

格式 2.7 最初与 Storable 2.14 一起使用。

Perl 整数的大小（不是机器整数的大小）确实会导致无法解析数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T20:14:50.487

我遇到了类似的问题，但事实证明我需要先解码该值，然后才能解冻它。所以，

```
use Storable qw( thaw );
use MIME::Base64 qw( decode_base64 );
my $data = thaw( decode_base64( $frozen_thing ) ); 
```

在我的例子中，数据是使用 Apache::Session::Serialize::Base64 存储的。我曾假设它是使用 Apache::Session::Serialize::Storable 存储的，因此出现了问题。在这种情况下，错误消息是一条红鲱鱼，但至少您知道*出了点*问题。

# php - 无法设置 PHPunit 在 Windows 上与 Yii 一起使用

> ID：14032093
> 
> 赞同：5
> 
> 时间：2012-12-25T15:53:14.433
> 
> 标签：php, yii, phpunit

PHPUnit 适用于其他项目，但是当我尝试运行 Yii 测试时，我收到以下警告（即使是空测试）：

> 有 1 次失败：
> 
> 1) 警告
> 
> 警告：include(PHP_Invoker.php)：打开流失败：C:\Users\pumpkin\Documents\GitHub\arhano\codebase\arhanoii\vendor\yiisoft\yii\framework\YiiBase.php 中没有这样的文件或目录423
> 
> 警告：include()：无法打开“PHP_Invoker.php”以包含（include_path='.;C:\Users\pumpkin\Documents\GitHub\arhano\codebase\arhanoii\componen ts;C:\Users\pumpkin\Documents\ GitHub\arhano\codebase\arhanoii\models;C:\xampp\php\PEAR') 在 C:\Users\pumpkin\Documents\GitHub\arhano\codebase\arhanoii\ vendor\yiisoft\yii\framework\YiiBase.php 上第 423 行

看起来我必须安装 phpunit/PHP_Invoker，但这是不可能的，因为它需要 pcntl PHP 扩展，这在 Win 上不可用。

你知道如何消除这个警告吗？是否可以在不使用 PHP_Invoker 的情况下在 Windows 上运行 Yii 测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T14:37:57.717

这是一个对我有用的解决方案： [https ://github.com/yiisoft/yii/issues/1907#issuecomment-14519537](https://github.com/yiisoft/yii/issues/1907#issuecomment-14519537)

引用：

> *   去 pear.phpunit.de
> *   手动下载 PHP_Invoker 实用程序类
> *   在我女儿的 Mac 上解压缩文件（我正在运行 Windows）
> *   将“Invoker”目录放在 C:\xampp\php\pear\PHP 下
> *   将“Invoker.php”文件放在 C:\xampp\php\pear\PHP 下

我在 Windows 7 机器上，解压缩工作正常。不需要mac...

测试在任何情况下都运行良好，但现在每次测试期间发生错误时，我都不会收到烦人的长“include(PHP_Invoker.php): failed to open stream”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T15:45:02.917

按照[本教程](http://polyetilen.lt/en/installing-phpunit-with-composer-on-windows)进行一些小的调整对我们有用。

它基本上是在 Invoker 存储库中克隆的。我假设 Invoker 仍然无法工作，但它会阻止 PHPUnit 出错：

```
{
    "repositories": [
        {
            "type": "composer",
            "url": "http://packages.phundament.com"
        },
        {
            "type": "package",
            "package": {
                "name": "phpunit/php-invoker",
                "version": "1.1.3",
                "source": {
                    "type": "git",
                    "url": "http://github.com/sebastianbergmann/php-invoker",
                    "reference": "master"
                },
                "autoload": {
                    "classmap": [
                        "src/"
                    ]
                }
            }
        }
    ],
    "require-dev": {
        "phpunit/phpunit": "4.1.*",
        "phpunit/phpunit-selenium": "*",
        "phpunit/phpunit-skeleton-generator": "*",
        "phpunit/dbunit": "*",
        "phpunit/phpunit-story": "*",
        "phpunit/php-invoker": "*",
        "phpunit/phpunit-mock-objects": "*"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:25:03.843

该文件是 (PSR-0 compatible) `PHP/Invoker.php`，因此您需要更改 YiiBase.php 并将 替换为`_`那里`/`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:47:54.223

@cweiske：该行实际上由 PHPUnit 的 autoload() 使用，因此无法更改。

@Alex：我在这里遇到了同样的问题，原因是 PHPUnit 的 PHP_Invoker 不适用于 Windows，因为它依赖于一个名为“pcntl”的扩展，该扩展只适用于 UNIX 系统。由于问题来自在 Windows 上运行的第三方框架，我相信 Sebastian Bergmann 不会太在意这个问题：[https ://github.com/sebastianbergmann/php-invoker/issues/6](https://github.com/sebastianbergmann/php-invoker/issues/6)

无论如何，测试似乎运行良好。所以...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T07:10:22.263

对我有用的 phpunit 安装指南（Windows 7，XAMPP）： http: [//learnyii.blogspot.com/2011/08/how-to-install-phpunit-on-windows.html](http://learnyii.blogspot.com/2011/08/how-to-install-phpunit-on-windows.html)

在命令提示符中（以管理员身份）：

```
pear channel-update pear.php.net  
pear upgrade-all  
pear channel-discover pear.phpunit.de  
pear channel-discover components.ez.no  
pear channel-discover pear.symfony-project.com  
pear update-channels  
pear install -a -f phpunit/PHPUnit 
```

PS
如果您在使用**PHPUnit_Extensions_Selenium_TestCase**时遇到错误：

```
pear install phpunit/PHPUnit_Selenium 
```

如果您收到**PHPUnit_Extensions_Story_TestCase**错误，请使用：

```
pear install phpunit/PHPUnit_Story 
```

# sql - 访问表字段

> ID：14032094
> 
> 赞同：1
> 
> 时间：2012-12-25T15:53:17.683
> 
> 标签：sql, delphi, sqlite, delphi-xe2, field

在下面的过程中，通过连接到 Delphi XE3 中 SQLite 数据库的常规组件，我对数据库执行 SQL 查询，其中包含来自不同表的具有相同名称的字段。然后我通过别名寻址到这个字段

```
procedure CreationListOfFields(SQLConn: TSQLConnection; DBSchema : TDBSchemaSpec);
var
  NameField : TField;
  PositionField : TField;
  DescriptionField : TField;
  CanInputField : TField;
  CanEditField : TField;
  ShowInGridField : TField;
  ShowInDetailsField : TField;
  IsMeanField : TField;
  AutocalculatedField : TField;
  RequiredField : TField;
  Name1 : TField;
  Name2 : TField;
begin
    SQLConn.Execute('select f.id, f.position, f.name, f.description, f.can_input, '
    +' f.can_edit, f.show_in_grid, f.show_in_details, f.is_mean, f.autocalculated, f.required, tables.name tablename, domains.name domainname'
    +' from fields f left join tables on f.table_id=tables.id '
    +' left join domains on f.domain_id=domains.id order by tables.name, domains.name ', nil, results);
    if not results.IsEmpty then
      begin
        results.First;
        Name1:=results.FieldByName('tablename');
        Name2:=results.FieldByName('domainname');
        lastTable:=Name1.AsString;
        TableSpec:=TTableSpec(DBSchema.Tables.FindComponent(lastTable));
        lastDomain:=Name2.AsString;
        DomainSpec:=TDomainSpec(DBSchema.Domains.FindComponent(lastDomain));
        NameField:=results.FieldByName('name');
        PositionField:=results.FieldByName('position');
        DescriptionField:=results.FieldByName('description');
        CanInputField:=results.FieldByName('can_input');
        CanEditField:=results.FieldByName('can_edit');
        ShowInGridField:=results.FieldByName('show_in_grid');
        ShowInDetailsField:=results.FieldByName('show_in_details');
        IsMeanField:=results.FieldByName('is_mean');
        AutocalculatedField:=results.FieldByName('autocalculated');
        RequiredField:=results.FieldByName('required');
        while not results.Eof do
          begin
            if (Name1.AsString<>lastTable) then
            begin
              lastTable:=Name1.AsString;
              TableSpec:=TTableSpec(DBSchema.Tables.FindComponent(lastTable));
            end;
            if (Name2.AsString<>lastDomain) then
            begin
              lastDomain:=Name2.AsString;
              DomainSpec:=TDomainSpec(DBSchema.Domains.FindComponent(lastDomain));
            end;
            FieldSpec:=TFieldSpec.Create(TableSpec.Fields);
            FieldSpec.Setup( DomainSpec, PositionField.AsInteger,
            NameField.AsString, DescriptionField.AsString,
            FieldToBoolean(CanInputField),FieldToBoolean(CanEditField),
            FieldToBoolean(ShowInGridField), FieldToBoolean(ShowInDetailsField),
            FieldToBoolean(IsMeanField),FieldToBoolean(AutocalculatedField),
            FieldToBoolean(RequiredField));
            TComponent(FieldSpec).Name:=NameField.AsString;
            TableSpec.Fields.InsertComponent(FieldSpec);
            results.Next;
          end;
      end;
end; 
```

但是通过调用此过程，我收到 Field 'tablename' not found 消息。如何解决没有问题的重复名称的字段？（'name_1' 和 'name_2' 不​​接近，在调试时我发现适当的值是空的，因此我[在模块 'GUI.exe' 中的地址 00822135 的访问冲突中遇到了问题。阅读地址 00000040](https://stackoverflow.com/questions/14030815/access-violation-at-address-00822135-in-module-gui-exe-read-of-address-0000004)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:58:25.763

你有一个错字（tablemame 而不是 tablename）：

```
[...], f.autocalculated, f.required, tables.name table->m<-ame, domains.name domainname'
+' from fields f left join tables on f.table_id=tables.id ' [...] 
```

# monodevelop - 在 MacOS 上的 Unity 和 MonoDevelop 中无法使用 .NET 的 JavaScriptSerializer

> ID：14032101
> 
> 赞同：2
> 
> 时间：2012-12-25T15:54:14.283
> 
> 标签：monodevelop, unity3d, javascriptserializer

我正在尝试使用 .NET`System.Web.Script.Serialization.JavaScriptSerializer`在 MacOS 上使用 MonoDevelop 将 JSON 文件读入 Unity 中的字典。

到目前为止，我已经将`System.Web.Extensions`程序集添加到 MonoDevelop 中，这使得它可以很好地构建“Assembly-CSharp”项目。

但是当我回到Unity时，它仍然显示错误：*错误CS0234：名称空间`System'中不存在类型或名称空间名称`Web'。您是否缺少程序集参考？*

然后我在网上看到将 DLL 添加到 assets 文件夹的任何地方都可以，所以我`System.Web.Extensions.dll`在 MonoDevelop 的路径中找到了一些版本的文件，它们位于：`/Applications/Unity/MonoDevelop.app/Contents/Frameworks/Mono.framework/Versions/2.10.2/lib/mono/gac/System.Web.Extensions`

有 3 个文件夹具有不同版本的文件`1.0.61025.0__31bf3856ad364e35`：`3.5.0.0__31bf3856ad364e35`和`4.0.0.0__31bf3856ad364e35`

尝试了所有这些，但没有一个有效，Unity给出了这个错误：

```
Internal compiler error. See the console log for more information. output was:
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies.
File name: 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
  at (wrapper managed-to-native) System.Reflection.Assembly:InternalGetType (System.Reflection.Module,string,bool,bool)
  at System.Reflection.Assembly.GetType (System.String name, Boolean throwOnError, Boolean ignoreCase) [0x00000] in <filename unknown>:0 
  at System.Reflection.Assembly.GetType (System.String name) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.RootNamespace.GetTypeInAssembly (System.Reflection.Assembly assembly, System.String name) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.RootNamespace.LookupTypeReflection (Mono.CSharp.CompilerContext ctx, System.String name, Location loc, Boolean must_be_unique) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.GlobalRootNamespace.LookupTypeReflection (Mono.CSharp.CompilerContext ctx, System.String name, Location loc, Boolean must_be_unique) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.Namespace.LookupType (Mono.CSharp.CompilerContext ctx, System.String name, Location loc) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.Namespace.Lookup (Mono.CSharp.CompilerContext ctx, System.String name, Location loc) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.TypeManager.CoreLookupType (Mono.CSharp.CompilerContext ctx, System.String ns_name, System.String name, Kind type_kind, Boolean required) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.TypeManager.InitCoreTypes (Mono.CSharp.CompilerContext ctx) [0x00000] in <filename unknown>:0 
  at Mono.CSharp.Driver.Compile () [0x00000] in <filename unknown>:0 
  at Mono.CSharp.Driver.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

所以现在怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T00:08:38.367

Unity uses an old version of Mono that does not support .NET 4\. I believe they also remove System.Web.dll to slim it down, since System.Web mostly contains ASP.NET which isn't really relevant to game developers.

You might be able to copy over Mono's dlls, however make sure you use v2.0 of System.Web.dll and v3.5 of System.Web.Extensions.dll.

Alternatively you might try JSON.NET.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:18:10.813

尝试序列化您的数据，`BinaryFormatter`++`MemoryStream``TextAsset`

`BinaryFormatter`+ `MemoryStream`: 对象 <==> 字节[]

`TextAsset.bytes`用于二进制数据文件。

# javascript - 页面加载时淡化内容

> ID：14032105
> 
> 赞同：0
> 
> 时间：2012-12-25T15:54:50.557
> 
> 标签：javascript, jquery, fade, pageload

我有一个页面样式的网站。我的菜单：

```
<ul id="creamenu" class="menuHolder">
  <li><a id="menu1" href="#/1">1</a></li>
  <li><a id="menu2" href="#/2">2</a></li>
  <li><a id="menu3" href="#/3">3</a></li>
  <li><a id="menu4" href="#/4">4</a></li>
  <li><a id="menu5" href="#/5">5</a></li>
</ul> 
```

单击 menu1 时，转到同一页面上的内容。我的内容结构：

```
<div id='menu1' class="fancyscroll-section" style="left:10800px;">
<div class="fancyscroll-content row blue">
/* Content items */         
</div>
</div> 
```

我想要在获取内容页面时，通过淡入淡出效果加载内容。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:59:50.827

您可以使用[**fadeIn()**](http://api.jquery.com/fadeIn/)来完成您的第一个菜单项和您想要与之关联的div 具有相同的ID。你`should have unique ids`为 html 元素。`hide`如果元素在您调用fadeIn 之前已经可见。

**[现场演示](http://jsfiddle.net/5Mxkz/1/)**

```
$('#menu1').click(function() {
    $('#menu1_content').hide().fadeIn(2000);
});​ 
```

# php - 执行 PHP 脚本时达到内存限制

> ID：14032115
> 
> 赞同：0
> 
> 时间：2012-12-25T15:57:33.607
> 
> 标签：php, hash, iteration, salt, bcrypt

我目前正在修改我的注册脚本以添加 PDO 和 bcrypt。但是，当我尝试迭代我的哈希时，我遇到了一个错误。我最初将轮数设置为 10000，因为我看到了 60000+ 轮的教程，但这需要很长时间。所以我把它设置为 2 只是为了测试它，然后我得到一个错误：

```
[Tue Dec 25 10:45:07 2012] [error] [] PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 133431193 bytes) in /var/www/register_script.php on line 28, referer: 
```

我的整个注册脚本都是休闲的：

```
<?php 
//Minor work needed need to finish user verification 

$host="localhost"; // Host name
$username="root"; // Mysql username
$password="testdbpass"; // Mysql password
$db_name="test"; // Database name

// Connect to server via PHP Data Object
$dbh = new PDO("mysql:host=localhost;dbname=test;", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

CRYPT_BLOWFISH or die ('No Blowfish found.');

// Creating the salt
$Blowfish_Pre = '$2y$15$';
$Blowfish_End = '$';

$Allowed_Chars =
'/.ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
$char_len = 63;

$salt_length = 60;
for($round=0;$round<$salt_length;$roundi++)
{
    $salt .= $Allowed_Chars[mt_rand(0,$char_len)];
}
$bcrypt_salt = $Blowfish_Pre . $salt . $Blowfish_End;
//Salt creating stops here

//Creating the hash and password
$password = $_POST['password'];

$hashed_password = crypt($password, $bcrypt_salt);
for($round=0; $round<2; $round++)
    {
        $hashed_password = crypt($password, $bcrypt_salt);
    }

// Insert statements with PDO 

try {
        $query = $dbh->prepare("INSERT INTO `users_blowfish` (username, email, fname, lname, salt, password) 
                               VALUES (:username, :email, :first, :last, :salt, :hash)");

        $query->execute(
                        array(
                        'username' => $_POST['username'],
                        'email' => $_POST['email'], 
                        'first' => $_POST['fname'],
                        'last' => $_POST['lname'],
                        'salt' => $bcrypt_salt,
                        'hash' => $hashed_password
                        )); 
    }

    catch (PDOException $e) {
        error_log($e->getMessage());
        die($e->getMessage());
    }

    $dbh= null;

    ?>

<html>
    <body>
        <p> 
            Thank you for registering your account. Please wait for administrator approval before doing anything else. Thank you - System Administrator. 
        </p>
    </body>
</html> 
```

如果我取出 for 语句：

```
$hashed_password = crypt($password, $bcrypt_salt);
for($round=0; $round<2; $round++)
    {
        $hashed_password = crypt($password, $bcrypt_salt);
    } 
```

然后一切正常。然而让我感到困惑的是，我有两个 for 语句，上面的一个 ^

和这个 ：

```
$salt_length = 60;
for($round=0;$round<$salt_length;$roundi++)
{
    $salt .= $Allowed_Chars[mt_rand(0,$char_len)];
} 
```

我想我总结的问题是 1）为什么哈希的 for 语句使注册非常慢，而盐创建的 for 语句不影响注册速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:22:30.473

*因为 Blowfish已经*使用了多个散列轮次，所以循环`crypt()`使您的页面永远耗时，并且是散列的所有实际工作。因此，如果您多次运行，那么您每次都在做所有这些工作。*`crypt()``crypt()`*

 *循环向盐中添加几个字符不会影响时间，因为您没有做任何实际工作 - 只是在字符串中添加几个字符。

您不需要循环`crypt()`多次；您已经在使用包含工作因素的 bcrypt。

您也不需要单独存放盐；bcrypt 产生的哈希包含它自己的盐。*

# sphinx - Sphinx 和 Cloudflare 不能一起工作？

> ID：14032117
> 
> 赞同：0
> 
> 时间：2012-12-25T15:57:48.913
> 
> 标签：sphinx, cloudflare

我正在使用 sphinx 搜索，实际上我曾经使用 . 因为在购买 cloudflare 并连接到我的服务器时，我的 sphinx 现在无法工作。

有没有人可以帮助我？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:44:41.190

不知道为什么它不起作用（对该特定产品了解不够）。看起来您直接在您的服务器上安装了该特定产品，我们没有触及，所以我的第一个猜测是您的 CloudFlare DNS 区域文件中没有与该服务相关的必需 DNS 设置。

# html - 单击属性时的 HTML 按钮已更改

> ID：14032125
> 
> 赞同：1
> 
> 时间：2012-12-25T15:58:30.727
> 
> 标签：html, css, button, properties, click

我有 4 个简单的按钮。我怎样才能设置它们，以便在单击其中 1 个时，它具有一些更改并保持更改的属性？当另一个按钮被点击时，它会发生相同的变化，但它会将第一个按钮的属性恢复为“正常”？基本上，它们是导航按钮，我希望它们显示您在页面的哪个部分。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:09:54.727

我为单击和更改背景颜色制作了一个示例：

**CSS**

```
.beforeClick {
    background-color:#EEE;
} 
```

**JavaScript**

```
$(document).ready(function (){
   $('.beforeClick').click(function (){
       $('.beforeClick').css('background-color',"#EEE");
           $(this).css('background-color',"#555");
   });
}); 
```

**HTML**

```
<button class="beforeClick">btn1</button>
<button class="beforeClick">btn2</button>
<button class="beforeClick">btn3</button>
<button class="beforeClick">btn4</button>
<button class="beforeClick">btn5</button> 
```

（你需要 jQuery）

这是一个[演示](http://jsbin.com/ocupuc/2/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:24:11.720

利用类来切换按钮的状态。就像是：

```
<div class="button">PRESS</div>
....
<div class="button">PRESS</div> 
```

只需要另一类`.selected`，你就可以用几行普通的 JavaScript 覆盖你的场景：

```
var buttons = document.getElementsByClassName('button');

for (var i = 0; i < buttons.length; i++) { //loop through all buttons
    buttons[i].addEventListener('click', function() {
        if (document.getElementsByClassName('selected').length) { //check if we already have a selected element
            document.getElementsByClassName('selected')[0].className = document.getElementsByClassName('selected')[0].className.replace(/(?:^|\s)selected(?!\S)/g, ''); //remove selected class from "old" element
        }
        this.className += ' selected'; //add selected class to element that has been clicked / called the handler
    });
}​ 
```

看到**[一个工作小提琴](http://jsfiddle.net/GKJgq/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T16:18:36.087

我要做的是编写一个javascript函数，例如：

```
 <script type='text/javascript'>
     function toggle(btn)
     {
          var btnArray = document.getElementsByClassName('button');
          for(i = 0; i < btnArray.length; i++)
          {
              if(btn == btnArray[i])
              {
                  //the button is the button which is clicked
                  if(!btn.classList.contains("clicked"))
                  {
                      btn.className += " clicked";
                  }
              }
              else
              {
                  //remove class clicked, just reset the classname
                  btnArray[i].className = "button";
              }
          }

     }

     </script>

     <button class="button" onclick="toggle(this);">btn1</button>
     <button class="button" onclick="toggle(this);">btn2</button>
     <button class="button" onclick="toggle(this);">btn3</button> 
```

您可以在 CSS 中添加“点击”类的描述。

```
 .clicked{
        background-color: red;
    } 
```

（我在 Chromium 中测试了这段代码，它可以工作）。

# c# - 如何缓存桌面应用程序客户端的登录数据

> ID：14032132
> 
> 赞同：0
> 
> 时间：2012-12-25T15:59:29.627
> 
> 标签：c#, winforms, authentication, asp.net-web-api

有一个 winform 客户端连接到服务器并通过提供用户名和密码进行身份验证。

用户第一次将他的用户名/密码发送到服务器，之后如果没有注销，则无需再次进行身份验证（如`Github`客户端或`Windows Live Mail`）

**所以我想知道：**

*   如果用户名/密码有效、真/假值或其他什么，服务器应该返回什么？
*   下次运行时，如何检查用户上次是否通过身份验证并已登录？我应该准确检查哪些值？考虑不允许数据篡改
*   如果我在应用程序设置中保存散列密码，如何避免被另一个人窃取？

（在stackoverflow中是否避免了欣赏？；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:16:10.963

这完全取决于您要保护的资源的价值；还有谁可以访问本地计算机等。

1.  只需在您的应用程序中缓存用户名/密码。用户第一次输入用户名/密码时，将其保存在注册表中的某个位置。下次启动应用程序时，从注册表中读取并将值提供给服务器。

2.  这显然是一个安全风险，因为有人可以从注册表中读取用户名/密码，因此在将用户名/密码保存到注册表之前，请使用[encrypt-decrypt-string-in-net 之](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)类的方法对其进行加密。

3.  下一个问题是您可能必须在应用程序中对解密密钥进行硬编码。这意味着任何有权访问您的应用程序二进制文件的人都可以计算出您正在使用的算法/密钥，并使用该知识来解密存储在注册表中的密钥。但是到了这个时候，大多数微不足道的尝试都会被劝阻。您可以尝试改用[CryptProtectData 函数](http://msdn.microsoft.com/en-us/library/aa380261%28v=vs.85%29.aspx)，这样您就不必在应用程序中对加密密钥进行硬编码，但它更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:30:11.307

如果您不想将用户名/密码缓存在应用程序中，则可以改用 HMAC 身份验证。您在第一次调用期间使用用户名/密码对用户进行身份验证，但如果身份验证成功，则会返回会话密钥作为响应。您可以使用该会话密钥来验证其余调用，如此处所示，

[http://weblogs.asp.net/cibrax/archive/2012/12/05/using-mac-authentication-for-simple-web-api-s-consumption.aspx](http://weblogs.asp.net/cibrax/archive/2012/12/05/using-mac-authentication-for-simple-web-api-s-consumption.aspx)

问候，巴勃罗。

# c++ - 检查 gdb 中上层范围内的类成员

> ID：14032136
> 
> 赞同：0
> 
> 时间：2012-12-25T16:00:07.457
> 
> 标签：c++, gdb

有一个类方法，其中有一个开关/案例。对于表示，类似

```
class class_name {
  int k;
public:
  int method();
  class_name():k(0) {}
};
int class_name::method() {
  k = 2; // class private data member, an integer
  switch(k){ 
    case 0:
      // to examine k at this point 
      // perform path A 
      break;
    case 1: 
      // perform path B 
      break;
  } // switch(k)
  return 0; 
} 
```

问题是：如果我想从 switch/case 的范围内检查来自上层范围的数据，比如 k。我应该总是在上层范围内的某个地方放置一个断点，例如在赋值 k=2 所在的行上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:05:16.600

```
#include <stdio.h>

struct z
{
    z() : k(42) {}

    int k;
    int mm ();
};

int z::mm()
{
    int k = 0;
    {
        int k = 1;
        {
            int k = 2;
            printf ("%d\n", k);
        }
    }
}

int main()
{
    z zp;
    zp.mm();
} 
```

当您停止时`printf`，很难在外部范围内打印变量。*在帧*`up`之间移动时不起作用，而不是*范围*。我不知道一个简单的方法，但有解决方法。

 **`info locals`将打印函数本地的*所有变量。*

```
(gdb) info locals
k = 2
k = 1
k = 0 
```

这对于简单的整数变量可能已经足够了，但是如果我们有指针并且想要取消引用它们怎么办？

```
(gdb) where
#0  z::mm (this=0xbfffec8c) at q.C:18
#1  0x080484a5 in main () at q.C:26 
```

好的，我们在第 18 行，我们对此了解多少？

```
(gdb) info scope 18
Scope for 18:
Symbol k is a variable at frame base reg $ebp offset 8+-28, length 4.
Symbol k is a variable at frame base reg $ebp offset 8+-24, length 4.
Symbol k is a variable at frame base reg $ebp offset 8+-20, length 4.
Symbol this is a variable at frame base reg $esp offset 4+0, length 4. 
```

啊哈，有三个符号（不管是什么意思）命名`k`，`$ebp`看起来像一个寄存器名称，它旁边的数字必须是偏移量。

```
(gdb) p *(int*)($ebp+8-20)
$1 = 0
(gdb) p *(int*)($ebp+8-24)
$2 = 1
(gdb) p *(int*)($ebp+8-28)
$3 = 2 
```

看起来我们在这里有一个赢家。

哦，总是可以说

```
(gdb) p this->k
$4 = 42 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:06:49.627

您键入 up 以“向上”调用堆栈。跟注将做相反的事情。那是你要求的吗？**

# c# - .NET 中的 Google 联系人 API

> ID：14032140
> 
> 赞同：1
> 
> 时间：2012-12-25T16:00:41.620
> 
> 标签：c#, google-api, google-contacts-api

我是 Google 联系人的 Google API 的初学者。我已经实现了列出所有联系人并添加新联系人。我现在在更新\编辑和删除联系人时遇到问题。我尝试了许多网络示例，但均未成功。你能帮助我吗？

```
 public static void EditContact(string id, string name, StructuredPostalAddress address)
 {
    ContactsQuery query = new ContactsQuery(ContactsQuery.CreateContactsUri("default"));

    ContactsFeed feed = GContactService.Query(query);

    foreach (ContactEntry entry in feed.Entries)
    {
        foreach (EMail email in entry.Emails)
        {
            if (email.Address == id)
            {
                Organization org = new Organization();
                org.Rel = ContactsRelationships.IsWork;
                org.Title = "President, CEO";
                org.Name = "John Doe Enterprises";
                org.Primary = true;
                entry.Name = new Name() { FullName = name };
                entry.PostalAddresses.Add(address);
                entry.Organizations.Add(org);
                // error:
                // Execution of request failed
                ContactEntry updatedEntry = (ContactEntry)entry.Update();
            }
        }
    }
} 
```

> Google.GData.Client.dll 中出现“Google.GData.Client.GDataRequestException”类型的未处理异常
> 
> 附加信息：请求执行失败：

# gwt - 如何在 UML 序列图中实现 css ensureInjected()？

> ID：14032152
> 
> 赞同：0
> 
> 时间：2012-12-25T16:02:11.337
> 
> 标签：gwt, uml

如何在 UML 序列图中实现以下代码？

MyObject.getClientBundle().getCss().ensureInjected();

css 包含浏览器的设置

```
@if user.agent safari {
    body {
 background-image: literal('-webkit-gradient(linear, left top, left bottom, from(#000000), to(rgb(46, 54, 60)))');
    }
   } 
```

请帮忙。

* * *

好的，谢谢，但是我应该如何处理 ensureInjected()？我应该创建一个浏览器对象吗？像这样的东西

![这里](../Images/164a3b08a68f0fca45eb8a28faaebd3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:48:13.877

在调用 MyObject:entity getClientBundle() 时，会调用 getCss()。在执行此操作时，它调用 ensureInjected() 并返回。所有其他回报都发生在一个接一个之后。（如果没有我目前无法创建的图片，很难解释）。

# android - 远程获取资源xml

> ID：14032154
> 
> 赞同：0
> 
> 时间：2012-12-25T16:02:36.007
> 
> 标签：android, xml

我试图弄清楚如何从远程位置获取资源 xml。理想情况下，从在线服务器下载它并将其保存到用户手机上的受保护区域，并能够调用应用程序内的 xml。xml 将包含您的标准字符串数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:56:01.927

我的应用程序中有类似的要求。我必须下载一个 xml，其中包含一些 url，例如条款和条件、帮助等。您可以在启动活动中请求 xml（如果有的话），或者您可以尽快在后台发起请求当应用程序启动时，无论何时获得结果，您都可以解析 xml 并将详细信息存储在您的首选项中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:24:01.267

我认为这不会奏效，因为 xml 资源需要在编译时可用，以便 AAPT 可以以允许您从代码中引用这些资源的方式将其打包。

# oracle - 如果 y < x，PL/SQL“在 x 和 y 之间”不起作用。为什么？

> ID：14032156
> 
> 赞同：6
> 
> 时间：2012-12-25T16:02:42.523
> 
> 标签：oracle, plsql

我有一个 PL/SQL 代码，例如：

```
case when column between 201203 and 201201
then other_column
end 
```

我知道列中有 201203 的值。所以代码应该返回一些值。但直到我纠正它才这样：

```
case when column between 201201 and 201203
then other_column
end 
```

为什么关键字之间的工作方式是这样的？它是如何在 Oracle 数据库上实现的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T16:09:49.063

这是 ANSI SQL 行为。

```
 expr1 BETWEEN expr2 AND expr3 
```

翻译成

```
 expr2 <= expr1 AND expr1 <= expr3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:14:06.470

考虑

```
val1 between val2 and val3 
```

作为

```
(val1 >= val2) and (val1 <= val3) 
```

那我们有什么？

```
column between 201203 and 201201 
```

相当于

```
( column >= 201203 ) and (column <= 201201) 
```

如果该`column`值为 201202，那么第一个条件 `( column >= 201203 )`将为假，第二个条件也将为假。这就是为什么你没有得到任何结果。[了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions011.htm#CJAGAIDD)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T06:39:03.147

**在 Between 子句中，总是先出现较低的价值，而不是较高的价值。**

例如：- **100 到 200 之间**

**代替**

**200 到 100 之间**

当查询解析器解析**介于 100 和 200 之间**时，它将是这样的：-

**X >= 100 且 X <= 200**

# ruby-on-rails - 如何将回形针启用到acts_as_commentable_with_threading？

> ID：14032158
> 
> 赞同：2
> 
> 时间：2012-12-25T16:03:11.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经设置了回形针，它与我自己创建的模型配合得很好。
我尝试对模型执行相同的操作，该模型由名为**acts_as_commentable_with_threading**的gem 创建， 但是它从不保存存储图片的文件名。但它像往常一样保存评论。
这真的很奇怪，它不会上传回形针文件。

为什么？

**models/comment.rb**（当然，我已经迁移了 Comment 表中的必需列）

```
attr_accessible :comment_icon

has_attached_file :comment_icon,
    :styles => {
    :thumb=> "100x100>",
    :small  => "400x400>" } 
```

**意见/用户/show.html.erb**

```
<%= render 'comment', :user => @user %> 
```

**意见/用户/_comment.html.erb**

```
<%=form_for :users, url: url_for( :controller => :users, :action => :add_comment ) do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div>
    <div class="field">
    <%= f.file_field :comment_icon %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

更新：

**users_controller.rb**

```
def add_comment
    @user = User.find_by_username(params[:id])
    @user_who_commented = current_user
    @comment = Comment.build_from( @user, @user_who_commented.id, params[:users][:body] )
    @comment.save
    redirect_to :controller => 'users', :action => 'show', :id => @user.username
    flash[:notice] = "comment added!"
end

def delete_comment
    @comment = Comment.find(params[:id])

    if current_user.id == @comment.user_id
        @comment.destroy
        flash[:notice] = "Deleted!"
    else
        flash[:notice] = "Sorry, you can't delete this comment"
    end
    redirect_to :controller => 'users', :action => 'show', :id => params[:username]
end 
```

**models/comment.rb（由acts_as_commentable_with_threading自动创建）**

这是评论模型的一部分。当它在我的用户操作中添加评论时，这是否重要？？？？

```
 # Helper class method that allows you to build a comment
  # by passing a commentable object, a user_id, and comment text
  # example in readme
  def self.build_from(obj, user_id, comment)
    c = self.new
    c.commentable_id = obj.id
    c.commentable_type = obj.class.base_class.name
    c.body = comment
    c.user_id = user_id
    c
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:28:30.640

尝试`@comment.save`在`add_comment`实际操作之前添加此行：

```
@comment.comment_icon = params[:users][:comment_icon] 
```

# node.js - npm 在当前目录安装模块

> ID：14032160
> 
> 赞同：37
> 
> 时间：2012-12-25T16:03:43.357
> 
> 标签：node.js, npm

当我运行时：

```
npm install my-app 
```

该应用程序安装到 node_modules/my-app/...

我也试过

```
npm install -g my-app 
```

但这也行不通。

如何将模块直接安装到当前目录？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-25T16:35:20.680

`npm install`[在本地或全局](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)安装包：

*   **本地**：`npm`查找在当前目录中调用的现有文件夹`node_modules`，并为您安装在该文件夹中的每个包创建一个文件夹。如果它在此处找不到现有`node_modules`文件夹，则会查看当前目录的祖先，直到找到一个。如果找不到，它会在当前目录中创建一个。
*   **Globally**：如果您使用`-g`(global) 选项，则该软件包将安装在全局位置。此位置因 Linux 发行版而异，但 `/usr/local/lib/node_modules/packagename`只是一个示例。CentOS7 使用`/usr/lib/node_modules/packagename`.

你应该只`-g`在包是你想用作命令的东西时使用。

> 就像全局变量有点粗俗，但在某些情况下也是必要的一样，全局包很重要，但如果不需要，最好避免使用。
> 
> 一般来说，经验法则是：
> 
> 1.  如果您正在安装要在程序中使用的东西，请使用`require('whatever')`，然后将其安装在本地项目的根目录下。
> 2.  如果您要在*shell*、命令行或其他地方安装要使用的东西，请全局安装它，以便它的二进制文件最终出现在您的`PATH`环境变量中。

npm 不会将包的文件直接安装到当前目录中。

不过，这其实是件好事。它将依赖项的文件与您的应用程序分开，并且[当您执行](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)[某些操作时，](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders) [Node 会自动搜索该`node_modules``require`](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)文件夹。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-09-23T11:50:50.907

正如@dalu 所说，如果您想拥有本地软件包，则需要一个`package.json`文件。

但是要创建`package.json`文件，您必须通过运行来**初始化 npm**`npm init`。

然后您可以使用`npm install <module_name> --save[-dev]`.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-08-13T13:24:51.720

这是将模块安装到当前目录的方法：

`npm i --prefix ./ my-app`

正如其他人所说，正确的方法是通过`package.json`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-07T01:08:19.087

我认为真正的问题，我和 OP 想要的，是`my-app`像安装应用程序一样安装。*即安装一个顶级应用程序，我将“使用”作为应用程序而不是“要求”作为模块。*

**npm**安装在我的应用程序目录下一级的事实，纯粹是新 npm 用户的审美反对。

当我开始使用 npm 时（不久前），我通过将*git 项目*作为安装程序、克隆 git、运行安装脚本来解决它，但现在我已经习惯了，拥有应用程序并不会打扰我在“错误”文件夹中。

只需在正确的位置设置一些或捷径，您的用户就不会注意到`.sh`。`.bat`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-15T12:01:19.620

您应该`package.json`在当前目录中有一个。

然后写入`npm install <module_name> --save-dev`or `npm install <module_name> --save`，它将安装到 node_modules 目录

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-03T15:58:50.700

使用 Windows 7。我已将 nodejs 安装在与安装时建议的文件夹不同的文件夹 ( **c:\develop\nodejs** ) 中 ( **C:\Program Files\nodejs** ) 我对 nodejs 或 npm 完全陌生。我可能不是在谈论 nodejs 或 npm 语言。安装nodejs后。我必须在主 nodejs 文件夹中执行一些这样的命令

```
npm init 
```

然后我要创建一个本地目录（比如 c:\develop\nodejs\ **upload2s3**），并创建一个 nodejs 包用作 AWS lambda。为此，我进入本地目录（upload2s3），并尝试

```
npm install aws-sdk 
```

**尽管该命令的行为就像它安装了东西，但这在我的upload2s3**文件夹中没有做任何事情，因为它是空的。然后我只是在我的本地文件夹中尝试了这个。

```
npm init 
```

这创建了一些**package.json**，然后我尝试了一些其他文件

```
npm install aws-sdk 
```

然后它在我的本地文件夹（upload2s3）中创建了一个**节点模块文件夹并安装了****aws-sdk**包。它还更新了 package.json 文件

```
{
  "name": "uploadtos32",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "aws-sdk": "^2.448.0"
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-22T08:29:17.467

我也找不到任何合适的解决方案来简单地从 npm 注册表安装独立应用程序。

您可以通过运行下载包的 tarball，通过运行`npm pack <package>`解压 tarball `tar xvf <tarball_name>.tgz`，然后通过`npm install --production`在解压后的目录中运行来安装依赖项。

为了简化整个过程，我创建了一个[bash 脚本](https://gist.github.com/mmende/2c10dd6161bc75120dbf153098caa48d)，可以通过运行以下命令直接从 gist 执行：

```
bash <(curl -sL https://gist.githubusercontent.com/mmende/2c10dd6161bc75120dbf153098caa48d/raw/installNodeApp.sh) some-package ./package-installation 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-16T08:49:34.837

```
pack=$(npm pack <package>) ; tar xzvf ${pack} --strip-components=1 ; rm ${pack} ; npm i 
```

# android - 如何知道特定 Android 设备的用户代理字符串？

> ID：14032163
> 
> 赞同：8
> 
> 时间：2012-12-25T16:04:02.810
> 
> 标签：android, browser

任务是在网络服务器端获取一些设备的一些统计数据。为此，我想知道特定 Android 设备上默认浏览器的用户代理字符串，例如：

* * *

*   宏达电：
    *   HTC Jetstream
    *   HTC 传单
    *   HTC Evo View 4G

* * *

*   关系：
    *   连结 7
    *   连结 10

* * *

*   三星：
    *   银河标签
    *   银河标签 2
    *   Galaxy Note

* * *

*   摩托罗拉：
    *   摩托罗拉 Xyboard 8"
    *   机器人 Xyboard
    *   摩托罗拉 Xyboard 10"

* * *

有没有简单的方法知道它？是否有一个众所周知的列表将设备名称映射到用户代理字符串？另外，如果我应该采取不同的方法 - 请提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T09:12:21.917

在我看来，要计算基于 Android 设备的各种用户代理的命中，您应该创建一个指向服务器的**URL 。**在应用程序启动时获取用户代理**并发送到您的服务器。**

**我运行此代码以获取用户代理**

```
 WebView mes = new WebView(this);
        String str = mes.getSettings().getUserAgentString();
        Log.i("My User Agent", str); 
```

在三星平板电脑 10.1 英寸模拟器上，我得到了用户代理

```
Mozilla/5.0 (Linux; U; Android 3.0; en-us; sdk Build/HONEYCOMB) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13 
```

在 Nexus 模拟器上我得到了

```
Mozilla/5.0 (Linux; U; Android 4.0.3; en-us; google_sdk Build/MR1) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T04:06:42.933

虽然这不是一个直接的答案，但我想提出这个问题：

请注意，客户端的用户代理可以轻松修改。例如在编程方面：

```
HttpParams params = new BasicHttpParams();
HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
HttpProtocolParams.setUserAgent(params, "WAHAHAHA");
HttpConnectionParams.setConnectionTimeout(params, HTTP_CONNECTION_TIMEOUT);
HttpConnectionParams.setSoTimeout(params, HTTP_READ_TIMEOUT);
HttpClient newHttpClient = new DefaultHttpClient(params); 
```

当使用它`HttpClient`访问您的站点时，用户代理将是“哇哈哈”

此外，市场上的一些网络浏览器如海豚浏览器允许用户输入他们想要的任何用户代理组合。

因此，我认为从用户代理收集的命中计数统计信息不会那么可靠，我建议找到另一个标准来收集命中计数信息 =]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T16:20:23.777

[您可以在此处](http://www.zytrax.com/tech/web/mobile_ids.html)找到用户代理列表

并在服务器上检查它们

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-29T11:28:49.537

我建议您修改现有的解决方案，例如用 perl 编写的[Apache Mobile Filter 。](http://www.apachemobilefilter.org/)它使用[51Degrees](http://51degrees.mobi/) XML 文件和大约 70k 用户代理。您只需找到有趣的脚本并修改 AMF 脚本，以便收集有趣的数据。更重要的是 51Degrees 和 AMF 也可以用来识别用户的设备是否是移动的，它的屏幕尺寸等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-29T11:23:40.983

结帐[UserAgentString.com](http://www.useragentstring.com/pages/useragentstring.php)。它还有一个[Android Webkit Browser User Agent Strings](http://www.useragentstring.com/pages/Android%20Webkit%20Browser/)列表。

他们还有[一个 API](http://www.useragentstring.com/pages/api.php)来解析 UA 字符串并返回键值对或 JSON 列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-25T16:08:41.460

创建一个 Webview 并使用[http://developer.android.com/reference/android/webkit/WebSettings.html#getDefaultUserAgent%28android.content.Context%29](http://developer.android.com/reference/android/webkit/WebSettings.html#getDefaultUserAgent%28android.content.Context%29)，没有将设备名称映射到用户代理的列表，通过我建议通过运行您的应用程序的移动设备将设备类型和用户代理发送到服务器。

# java - 在没有activemq.xml和spring的情况下配置ActiveMQ插件

> ID：14032164
> 
> 赞同：0
> 
> 时间：2012-12-25T16:04:04.667
> 
> 标签：java, activemq

我想配置一个 ActiveMQ 代理以使用 jaas 身份验证插件。我知道这可以使用 xml-configuration 使用类似下面的东西来完成

```
<broker useJmx="false" persistent="false" xmlns="http://activemq.apache.org/schema/core" populateJMSXUserID="true">
    <plugins>
        <!--  use JAAS to authenticate using the login.config file on the classpath to configure JAAS -->
        <jaasAuthenticationPlugin configuration="activemq-domain" />
    </plugins>
</broker> 
```

. 但是 afaik 这也需要我将 spring-stuff 带入类路径，这是我想避免的。代理插件可以通过其他方式启动吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:26:17.190

您可以使用`BrokerService`来从 Java 代码中启动一个 activemq 代理。您可以在各个对象上调用各种配置方法。有关详细信息，请参阅[http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html 。](http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html)该站点有一个 jaas 插件的示例。

# ios - 重复符号 _OBJC_IVAR_$_GCOAuth.OAuthParameters ShareKit 和 RestKit。

> ID：14032167
> 
> 赞同：1
> 
> 时间：2012-12-25T16:04:41.207
> 
> 标签：ios, xcode, restkit, sharekit, jsonkit

我处于一个棘手的情况，在过去的几天里，我无法在 sharekit 实现方面取得进展，因为我在使用 RestKit 时遇到了重复的符号错误。我正在运行 iOS 5.1 和最新版本的 xcode。根据给出的指南，我已经安装了两个库。我不明白如何从 ShareKit 或 RestKit 中删除对此的引用，而不会导致其中之一出现问题。我真的需要一些帮助...谢谢。

```
duplicate symbol _OBJC_IVAR_$_GCOAuth.OAuthParameters in:
    /Users/josephboston/Library/Developer/Xcode/DerivedData/Prowd_Wallet-ezxvmeygcnwgtzehshsnnprpsjww/Build/Products/Debug-iphoneos/libShareKit.a(GCOAuth.o)
    /Users/josephboston/Library/Developer/Xcode/DerivedData/Prowd_Wallet-ezxvmeygcnwgtzehshsnnprpsjww/Build/Products/Debug-iphoneos/libRestKit.a(GCOAuth.o) 
```

![我的项目](../Images/e718b00d73a0fc95b2deda33bac80534.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:45:40.993

您收到此错误是因为两个框架都使用通用的第三方框架。所以 Xcode 抱怨重复的符号。此博客[“在静态库中使用常用实用程序时避免重复符号问题”](http://atastypixel.com/blog/avoiding-duplicate-symbol-issues-when-using-common-utilities-within-a-static-library/)正在解释解决此问题的方法。

这是那里提到的解决方案，

> 我现在正在处理两个具有静态库产品的项目，这些产品将提供给其他开发人员在他们的项目中使用：Audiobus 和 The Amazing Audio Engine。在这两种情况下，我都大量使用了我的循环缓冲区代码 TPCircularBuffer，如果静态库与另一个使用它的项目链接，这将导致重复的符号错误。
> 
> 在构建阶段使用预处理器自动重命名符号。
> 
> 这是通过将一系列 -DOldSymbol=NewSymbol 标志添加到“其他 C 标志”构建设置来完成的 - 例如 -DTPCircularBuffer=ABCCircularBuffer。

![在此处输入图像描述](../Images/ee5a5631c1f04f5a67595ae9391e2431.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:09:24.307

GCOAuth 仅由 Evernote sdk 在 ShareKit 中使用。[因此，如果您可以在没有 Evernote 共享器的情况下生活，快速的解决方法可能是使用粒度安装](https://github.com/ShareKit/ShareKit/wiki/Granular-install)从 ShareKit 中删除 evernote 和 evernote sdk

# iphone - 在 IOS 上寻找合适的数据存储

> ID：14032170
> 
> 赞同：2
> 
> 时间：2012-12-25T16:05:30.783
> 
> 标签：iphone, ios, core-data, plist

我正在构建一个应用程序，该应用程序必须根据相对较大的数据集（大约 10000 行左右）上的日期进行简单的搜索、排序和限制。

数据是只读的，必须与应用程序捆绑在一起，并且可能会在更新时被覆盖而无需迁移。

我之前已经成功地使用过二进制 plist，但我从来不需要搜索和排序数据，它总是足够小，可以完全加载到内存中。

预加载 coreData 似乎很麻烦，尤其是因为数据很可能是只读的。我读过一些描述方法的博客，它们似乎都非常hacky。

我想我的问题是：

有没有预加载 coreData 的好方法，或者有没有办法从 plist 中搜索和排序数据，或者有其他方法吗？

编辑：似乎我误解了 coreData 的全部内容。我在源代码中找到了这一行：

```
NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"TestFour.sqlite"]; 
```

我已将其替换为：

```
NSURL *storeURL = [[NSBundle mainBundle] URLForResource:@"TestFour" withExtension:@"sqlite"]; 
```

只需将 SQLite 数据库文件移动到应用程序包中，作为奖励，它可以只读并且可以通过新的应用程序版本轻松更新。

感谢您对研究的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:57:24.307

If it comes to searching and ordering the given data within the application, I'd suggest to either use SQLite or Core Data with a preloaded data set. In the case of the latter, take a look at [this](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T21:10:22.487

我建议你不要重新发明那个特定的轮子。Core Data 非常适合这种大小的数据集。UITableview、NSFetchedResultsController 和 NSFetchRequest 就是针对这个问题而设计的。

我在几个项目中使用的一种模式是创建一个辅助 MacOS 工具，它可以读取旧格式并将其保存到 Core Data 存储中。

在您的 iOS 项目中，将 Core Data 存储作为资源包含在内。当您在 iOS 应用程序中启动 Core Data 堆栈时，您将在主包中查找 .sqlite 文件，而不是在用户文件空间中。如果你想变得花哨，你可以有一个后台线程来尝试下载数据存储的更新版本；如果用户文件空间中有新版本，请使用它而不是预先打包的版本。

Norbert 引用的 Ray Wenderlich 教程依赖于未记录的行为。特别不支持直接写入 .sqlite 文件。

辅助数据加载器 (Mac) 和查看器 (iOS) 共享相同的 .xcdatamodel，以及（如果适用）NSManagedObject 子类的 .h/.m 文件。您使用用于读取数据的相同代码库存储数据。我已经使用这种方法构建了几个 100k 行的项目，并且运行得非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T21:21:57.097

为 iOS 应用程序预加载 Core Data 存储几乎没有什么技巧。

只需创建一个共享相同模型并将数据写入设置位置的辅助应用程序，然后您可以获取此文件并将其包含到您的应用程序包中。

举个例子——我用一个桌面应用程序编写了一个[示例项目](https://github.com/Abizern/PromNight)，该应用程序接受一个 csv 文件，将其加载到 Core Data 存储中，并报告该文件的位置。然后它展示了如何将此文件包含到应用程序包中并使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T16:12:21.513

我建议将 SQLite 集成到您的应用程序中。即使您的数据是只读的。您无需将所有数据加载到内存中即可获取某些内容。如果您需要获取已排序的数据，请使用适当的 SQL 查询。为了更新它，再次下载您的数据并使用适当的查询插入它。

请参阅以下有关 iOs [good-tutorial-for-sqlite3-with-objective-c-iphone 的SQLite 教程的问题](https://stackoverflow.com/questions/5507559/good-tutorial-for-sqlite3-with-objective-c-iphone)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T17:02:56.680

我建议存储对象（不要太多的网络服务器端）我建议使用 AWS 作为解决方案。S3 非常适合存储大型对象，您可以使用 CloudFront 将它们分发到全球服务器，但对于较小的对象和更具可扩展性/快速的解决方案，我会使用 DynamoDB 或 SimpleDB。它有**非常**全面的文档和易于编写和使用的示例代码。

# c# - 如何发现多段网络上所有设备的 IP 地址？

> ID：14032171
> 
> 赞同：1
> 
> 时间：2012-12-25T16:05:43.327
> 
> 标签：c#, snmp, router, segment, subnet

以 2 段网络为例：10.20.xx 和 192.168.xx (255.255.255.0)。

如何使用 C# 找到所有支持 SNMP v1、v2、v3 的设备**IP 地址？**

我尝试使用[sharpsnmplib](http://sharpsnmplib.codeplex.com/)发现示例，但它只能找到与计算机连接的网段的设备。

![在此处输入图像描述](../Images/d9aab5de9247d1c15465a52e311f96ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:43:26.887

尝试查询交换机（如果可能） - 您知道网络拓扑吗？你能不能只发送一堆 ping （如果某些设备没有响应，你可以吗）？

没有广播管理路由器，广播是不可能的。IP 路由系统旨在防止广播传播到其他网络子网 - 您必须手动设置网络以广播形式相互通信（请参阅[http://en.wikipedia.org/wiki/Broadcast_address](http://en.wikipedia.org/wiki/Broadcast_address)）

在 BACnet/IP 协议中存在并克服了这一限制的一个例子。BACnet 使用“Who-Is”广播请求来请求连接的设备传输“I-Am”响应。由于广播不能穿越子网，BACnet 使用称为 BBMD（BACnet 广播管理设备）的特殊路由器。要了解更多信息，请参阅此[链接](http://www.bacnet.org/Bibliography/ES-7-99/IPPART2.HTM)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:09:42.697

除非您有转发广播的路由器，否则广播仅适用于 1 个分段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:15:23.190

有两种常用的方法：

1.  让用户定义 IP 地址范围，然后对该范围内的每个地址执行 SNMP GET。
2.  从本地计算机上的 arp 缓存开始，使用 SNMP 轮询在 ARP 缓存中找到的每个 IP 地址，然后查看 RFC-1213 MIB atTable (OID .1.3.6.1.2.1.3.1) 以获取尚未发现的 IP 地址。这应该发现每个积极通信的网络节点。

在具有少量主机的大网络范围的情况下，第一种方法要慢得多。第二种方法可能会错过一些不与网关通信的主机。

# database - 整个本地数据库与 sql azure 同步

> ID：14032175
> 
> 赞同：2
> 
> 时间：2012-12-25T16:06:33.073
> 
> 标签：database, azure, azure-sql-database, microsoft-sync-framework, azure-data-sync

我正在开发一个使用本地数据库的 Windows 应用程序。我想添加一个函数来将所有本地数据同步到 sql azure。

目前我使用以下代码。它使我能够成功同步一个特定的表。这里是“Author_Master”

```
 string sqlazureConnectionString = "XXXX";
 string sqllocalConnectionString = "Server=localhost;Database=Enh_Branchwise_Master_Bookshop;Trusted_Connection=True";

        using (SqlConnection serverCon = new SqlConnection(sqlazureConnectionString))
        using (SqlConnection clientCon = new SqlConnection(sqllocalConnectionString))
        {
            var provider1 = new SqlSyncProvider("scope1", serverCon);
            var provider2 = new SqlSyncProvider("scope1", clientCon);

            prepareServer(provider1);
            prepareClinet(provider2, serverCon);
            SyncOrchestrator sync = new SyncOrchestrator();
            sync.LocalProvider = provider1;
            sync.RemoteProvider = provider2;

            sync.Synchronize();

        } 
```

还有以下方法。

```
 private static void prepareServer(SqlSyncProvider provider)
    {
        SqlConnection connection = (SqlConnection)provider.Connection;
        SqlSyncScopeProvisioning config = new SqlSyncScopeProvisioning(connection);

        if (!config.ScopeExists(provider.ScopeName))
        {
            DbSyncScopeDescription scopeDesc = new DbSyncScopeDescription(provider.ScopeName);
            scopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable("Author_Master", connection));
            config.PopulateFromScopeDescription(scopeDesc);
            config.SetCreateTableDefault(DbSyncCreationOption.CreateOrUseExisting);
            config.Apply();
        }
    }

    private static void prepareClinet(SqlSyncProvider provider, SqlConnection sourceConnection)
    {
        SqlConnection connection = (SqlConnection)provider.Connection;
        SqlSyncScopeProvisioning config = new SqlSyncScopeProvisioning(connection);

        if (!config.ScopeExists(provider.ScopeName))
        {
            DbSyncScopeDescription scopeDesc = new DbSyncScopeDescription(provider.ScopeName);
            scopeDesc.Tables.Add(SqlSyncDescriptionBuilder.GetDescriptionForTable("Author_Master", sourceConnection));
            config.PopulateFromScopeDescription(scopeDesc);
            config.Apply();
        }
    } 
```

我的问题：有什么方法可以一次同步数据库中的所有表，而无需逐个添加表。

我的两个数据库具有相同的架构。请给些建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:28:32.763

You can use **SQL Data Sync** Tool.

SQL Data Sync is a feature of Windows Azure SQL Database.

With SQL Data Sync you can synchronize selected data through a Windows Azure SQL Database instance.

SQL Data Sync supports synchronizations within or across Windows Azure data centers.

SQL Data Sync also supports hybrid configurations of SQL Database instances and on-premises SQL Server databases.

The SQL Data Sync service is free.

For more details check [**ScottGu's Blog Post**](http://weblogs.asp.net/scottgu/archive/2012/12/21/great-updates-to-windows-azure-mobile-services-web-sites-sql-data-sync-acs-media-more.aspx) under "SQL Data Sync" sub topic.

I hope this will help to you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:41:00.127

如果您使用的是 Sync Framework，则必须明确告诉它实际同步哪些表（甚至列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T17:03:39.413

```
 Dim clientProvision As SqlSyncScopeProvisioning = New SqlSyncScopeProvisioning(clientCon, syncScope)

                            If Not (clientProvision.ScopeExists("Scope_" + tableName)) Then
                                clientProvision.Apply()
                            End If

                            Dim serverProvision As SqlSyncScopeProvisioning = New SqlSyncScopeProvisioning(serverCon, syncScope)

                            If Not (serverProvision.ScopeExists("Scope_" + tableName)) Then
                                serverProvision.Apply()
                            End If

                            Dim syncOrchestrator As New SyncOrchestrator()

                            ' Create provider for SQL Server
                            Dim clientProvider As New SqlSyncProvider("Scope_" + tableName, clientCon)

                            ' Set the command timeout and maximum transaction size for the SQL Azure provider.
                            Dim serverProvider As New SqlSyncProvider("Scope_" + tableName, serverCon)

                            ' Set Local provider of SyncOrchestrator to the onPremise provider
                            syncOrchestrator.LocalProvider = clientProvider

                            ' Set Remote provider of SyncOrchestrator to the azureProvider provider 
                            syncOrchestrator.RemoteProvider = serverProvider

                            ' Set the direction of SyncOrchestrator session to Upload and Download
                            syncOrchestrator.Direction = SyncDirectionOrder.UploadAndDownload

                            'Dim thread As New Threading.Thread(Sub() ShowStatistics(syncOrchestrator.Synchronize(), tableName))
                            'thread.Start()
                            ShowStatistics(syncOrchestrator.Synchronize(), tableName) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T18:25:43.613

您可以为此使用**SQL 数据库迁移向导**(SQLAzureMW)。

它是一个开源应用程序。

您可以使用它在 Windows Azure SQL 数据库之间迁移您的 SQL 数据库。

SQLAzureMW 有一个用户交互向导，可以引导用户完成分析/迁移过程。

获取有关[**SQL 数据库迁移向导的更多详细信息**](http://sqlazuremw.codeplex.com/)

我希望这对你有帮助。

# javascript - 如何使用 Internet Explorer 修复 Ajax 自动刷新？

> ID：14032178
> 
> 赞同：-1
> 
> 时间：2012-12-25T16:07:01.810
> 
> 标签：javascript, ajax, internet-explorer

我想自动刷新网页的一部分而不刷新整个页面。（比如说网页的一个部门）。

我有一个定期调用 PHP 页面的脚本。

脚本：

```
<!----------- ********* AJAX code to auto refresh the part of a webpage************ --------->
<script langauge="javascript"> 
  function loadXmlHttp(url, id) {
    var f = this;
    if (loadXmlHttp.xmlHttp){
      f.xmlHttp = loadXmlHttp.xmlHttp();
      f.el = document.getElementById(id);
      f.xmlHttp.open("GET", url, true);
      f.xmlHttp.onreadystatechange = function(){f.stateChanged();};
      f.xmlHttp.send(null);
    } else {
      alert('Your browser does not support AJAX!');
    }
  }
  loadXmlHttp.xmlHttp = null;
  loadXmlHttp.re = /^http/.test(window.location.href);
  /*@cc_on @*/ // used here and below, limits try/catch to those IE browsers that both benefit from and support it
  /*@if(@_jscript_version >= 5) // prevents errors in old browsers that barf on try/catch & problems in IE if Active X disabled
  try {loadXmlHttp.ie = window.ActiveXObject}catch(e){};
  end @*/
  if (window.XMLHttpRequest && (!loadXmlHttp.ie || loadXmlHttp.re))
    loadXmlHttp.xmlHttp = function(){return new XMLHttpRequest();}; // Firefox, Opera 8.0+, Safari, others, IE 7+ when live - this is the standard method
  else if (/(object)|(function)/.test(typeof createRequest))
    loadXmlHttp.xmlHttp = createRequest; // ICEBrowser, perhaps others
  else {
    loadXmlHttp.xmlHttp = null;
    // Internet Explorer 5 to 6, includes IE 7+ when local //
    /*@if(@_jscript_version >= 5)
    try{loadXmlHttp.xmlHttp = function(){return new ActiveXObject("Msxml2.XMLHTTP");};}
    catch(e){try{loadXmlHttp.xmlHttp = function(){return new ActiveXObject("Microsoft.XMLHTTP");};}catch(e){}}
    @end @*/
  }
  loadXmlHttp.prototype.stateChanged = function(){
    if (this.xmlHttp.readyState == 4 && (this.xmlHttp.status == 200 || !loadXmlHttp.re)){
      this.el.innerHTML = this.xmlHttp.responseText;
      if(this.success){
        this.success();
      }
    }
  }
</script>
<!----------- ********* AJAX code to auto refresh the part of a webpage ends here************ ---------> 
```

我调用这个函数的 Div 是这样的：

```
<div class="textad" id="text"></div>
  <script type="text/javascript">
    (function(){
      var statsrequest = new loadXmlHttp('display_text_ad.php', 'text'), repeat = arguments.callee;
      statsrequest.success = function(){setTimeout(repeat, 6000);};
    })();
  </script>
</div> 
```

现在，此代码可在除 Internet Explorer 之外的所有浏览器上正常运行。（我检查了 Chrome、Mozilla、Opera 和 Safari）。所以，我需要一些帮助来修复 Internet Explorer 的这个错误。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:12:22.633

问题是您的初始 IE 条件编译脚本缺少“@”字符。该`end @*/`行应改为`@end @*/`.

不过需要指出的是，使用 JScript 版本浏览器检测[并不是一个好的做法](http://blogs.msdn.com/b/ie/archive/2010/06/10/same-markup-explaining-quot-jscript-version-quot-and-styling-new-html5-elements.aspx)。一种更简单、更强大的方法是直接测试您想要使用的标准，然后回退到旧版浏览器的解决方法。例如：

```
if (window.XMLHttpRequest) {
    // Use native XHR object for modern browsers
    loadXmlHttp.xmlHttp = new XMLHttpRequest();
}
else if (window.ActiveXObject) {
    // Use the ActiveX control for legacy browsers
    loadXmlHttp.xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
}
else {
    // No XHR mechanism is available.
} 
```

# c# - WPF：将文本框放在堆栈面板中的单选按钮旁边

> ID：14032187
> 
> 赞同：3
> 
> 时间：2012-12-25T16:08:50.130
> 
> 标签：c#, wpf, xaml, radio-button

我有一个包含两个单选按钮（*选项 1*和*选项 2*）的堆栈面板。如果用户选择选项 2，则应激活一个文本框，允许用户提供有关选项 2 的更多详细信息。

我想出了两个解决方案，但都不是我想要的。它们是这样的：

![解决方案 #1 和 #2 的屏幕截图](../Images/3a340e251c9d0a90c556671f5ff947f6.png)

## 解决方案#1

解决方案 #1 的 XAML 代码非常简单，结果非常明显：

```
 <StackPanel Grid.Row="7" Grid.Column="1">
        <RadioButton>Option 1</RadioButton>
        <RadioButton>Option 2:</RadioButton>
        <TextBox>Some Text that details option 2</TextBox>
    </StackPanel> 
```

这里的好处是文本框使用整个宽度。然而，这不是我想要的，因为文本框应该放在选项 2 旁边。

## 解决方案#2

下一步是在 RadioButton-tags 中创建一个网格。这使我可以将文本框放置在正确的位置，但是宽度不再缩放到 100 %。

代码如下所示：

```
 <StackPanel Grid.Row="8" Grid.Column="1">
        <RadioButton>Option 1</RadioButton>
        <RadioButton>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="130*" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" >Option 2:</TextBlock>
                <TextBox Grid.Column="1" Margin="10,0,0,0">Some Text that details option 2</TextBox>
            </Grid>
        </RadioButton>
    </StackPanel> 
```

除了在我看来这似乎是一个设计过度的解决方案之外，问题就在这里：*如何将单选按钮条目中的网格宽度设置为 100%？*

此处提出了类似的问题（[如何在 WPF 中将宽度设置为 100%](http://stackoverflow.com/questions/787436/how-to-set-width-to-100-in-wpf)），但使用该`ItemContainerStyle`属性不适用于单选按钮。

在我看来，必须有一个更容易（或至少是可行的）解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T16:21:33.307

用这个：

```
<StackPanel Grid.Row="8"
            Grid.Column="1">
    <RadioButton>Option 1</RadioButton>
    <RadioButton HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
        <DockPanel  LastChildFill="True">
            <TextBlock >Option 2:</TextBlock>
            <TextBox Grid.Column="1"  
                     Margin="10,0,0,0">Some Text that </TextBox>
        </DockPanel>
    </RadioButton>
</StackPanel> 
```

或者，如果您想保留网格：

```
 <StackPanel Grid.Row="8"
            Grid.Column="1">
    <RadioButton>Option 1</RadioButton>
    <RadioButton HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
        <Grid  HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock >Option 2:</TextBlock>
            <TextBox Grid.Column="1"  
                     Margin="10,0,0,0">Some Text that </TextBox>
        </Grid>
    </RadioButton>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-18T05:41:14.207

你可以随心所欲地设计。只需将相同`GroupName`应用于所有 RadioButtons

```
<StackPanel>
    <RadioButton Content="Option1" GroupName="Question" />
    <StackPanel Orientation="Horizontal">
        <RadioButton Content="Option2" GroupName="Question" />
        <TextBox Text="Other controls"/>
    </StackPanel>
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:16:02.760

有很多东西可以尝试——

1.  将第二个 RadioButton 的 Horizo​​ntalAlignment 设置为“Stretch”；
2.  尝试将其设置在 Grid 上；
3.  将 ColumnDefinition 设置为“Auto”，将另一个设置为“130*”并没有任何意义。将第一个设置为 Auto（根据内容调整大小），第二个设置为“*”（使用所有可用空间）

* 大小是相对的。如果你有 1* 和 2*，2* 总是 1* 的两倍。与 0.5* 和 1* 相同，第一个总是 1* 大小的一半。

您是否尝试将 ColumnDefinitions 都设置为 Auto？

否则，您可以用来解决此类问题的方法是在元素周围应用边框（每个元素都有不同的边框颜色）。它有助于找出哪个控件是罪魁祸首。

# linux - 如何查找几分钟前访问/创建的文件

> ID：14032188
> 
> 赞同：87
> 
> 时间：2012-12-25T16:09:29.903
> 
> 标签：linux, bash, shell, unix, find

我总是忘记一分钟前我编辑了哪个文件，所以我输入`find . -cmin 1`了一些其他值，但它确实工作了`1`几分钟。我不得不尝试`find . -ctime 2 /*or 3,4...*/`。

然后我找到了另一种更好的方法：

```
touch -t 12251134 empty /*similar format which 5 or 10 minutes ago */
find . -newer empty 
```

我可以`date -d'-5minutes' +%m%d%H%M`为我计算时间。我想知道是否有一种简单的方法可以查找 1、2 或 3 分钟前访问的文件。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-12-25T16:21:02.227

只需指定您是否希望时间大于、小于或等于您想要的时间，分别使用：

```
find . -cmin +<time>
find . -cmin -<time>
find . -cmin  <time> 
```

例如，在您的情况下，最后一个版本最多为 5 分钟的文件由以下方式给出：

```
find . -cmin -5 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-26T15:36:43.773

如果你有 GNU find 你也可以说

```
find . -newermt '1 minute ago' 
```

这些`t`选项使参考“文件”`newer`成为您可以传递给 GNU 的那种参考日期字符串`date -d`，它可以理解上面给出的复杂日期规范。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-25T16:21:24.007

要查找 1、2 或 3 分钟前访问的文件，请使用`-3`

```
find . -cmin -3 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-26T00:19:32.983

如果您知道该文件在您的当前目录中，我会使用：

```
ls -lt | head 
```

这会按顺序列出您最近修改的文件和目录。事实上，我经常使用它，所以我把它别名为“lh”。

# objective-c - 在 UITableView 中显示键值对的正确方法

> ID：14032190
> 
> 赞同：1
> 
> 时间：2012-12-25T16:09:44.087
> 
> 标签：objective-c, ios, uitableview, key-value

我有一个表格视图。也许对于带有 的细胞`UITableViewCellStyle1`，没关系。

此外，我还有一个要显示的项目列表，快速示例如下：

```
Gender — Male
Age — 18
Height — 175 cm 
```

以此类推，以获取不同的数据集。也许是一个`Human`具有属性`GenderType gender`, `NSInteger age`,的类`float height`。我希望它如上所示。此外，这种方法应该是灵活的，我想以我的方式快速而清晰地重新排序这些值。不使用 CoreData。

第一个也是快速的解决方案是制作两个字典并将它们链接到数据库中：

```
NSDictionary *keys = @{@0 : @"Gender", @1 : @"Age", @2 : @"Height"};
NSDictionary *values = @{@0 : @"Male", @1 : @18, @2 : @"175 cm"};
NSArray *source = @[@0, @1, @2]; // My order 
```

* * *

现在我开始使用`Pair`具有以下属性的类。

```
@property(nonatomic, strong) NSString *key;
@property(nonatomic, strong) id value;

-(id)initWithKey:(NSString *)key value:(id)value; 
```

现在代码看起来像

```
Pair *genderPair = [[Pair alloc] initWithKey:@"Gender" value:@"Male"];
Pair *agePair = [[Pair alloc] initWithKey:@"Age" value:@18];
Pair *heightPair = [[Pair alloc] initWithKey:@"Height" value:@175];
NSArray *tableItems = [genderPair, agePair, heightPair]; 
```

它看起来更清晰但是......我认为这不是最好的解决方案（并且没有类 Pair，但是人们用开关或其他东西制作类似设置的表格，但他们以某种方式做到了）。我相信很多人都在尝试这样做，并且至少应该有一个更好或通用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:19:20.343

定义一个类：

```
@interface Human : NSObject

@property (nonatomic, strong) NSNumber* male; // Or a BOOL if you prefer it 
@property (nonatomic,strong) NSNumber* age; 
@property (nonatomic,strong) NSNumber* height; // Or NSString if you prefer it
                                 // Consider that you may always format the number

- (id) initWithAge: (NSNumber*) age height: (NSNumber*) height male: (NSNUmber*) male;

@end 
```

你总是可以要求一个对象的键：

```
Human* human=[[Human alloc] initWithAge: @20 height: @178 male: @YES];
NSNumber* age= [human valueForKey: @"age"]; 
```

**编辑**

对不起，我完全误解了你的问题。那么如果你总是对数组中的属性使用相同的位置，我认为没有更好的方法可以做到这一点。
您可以轻松找到每一行的属性，因此您也可以轻松返回表格视图单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell=[[UITableViewCell alloc]initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier: nil];
    Pair* pair= tableItems[ [indexPath indexAtPosition: 1] ];
    cell.textLabel.text= pair.key;
    cell.detailTextLabel.text= [NSString stringWithFormat: @"%@", pair.value];
    return cell;
} 
```

那是 O(1)： NSArray 不是链表，您可以在 O(1) 中访问 tableItems[index] 来读取属性。

# java - Snmp4j 走不同的结果

> ID：14032197
> 
> 赞同：0
> 
> 时间：2012-12-25T16:11:23.703
> 
> 标签：java, snmp, snmp4j

我对不同平台（相同网络）之间的 snmp walk 有不同的问题。例如，在我的 Windows 7 笔记本电脑上，snmp walk 请求返回 200 个结果，但在 solaris 10 服务器机器上，它返回 30 个结果。平台之间有限制吗？

# applescript - 使用applescript，我可以在不修改（或获取）文件扩展名的情况下更改文件名吗？

> ID：14032199
> 
> 赞同：1
> 
> 时间：2012-12-25T16:12:04.607
> 
> 标签：applescript, filenames

我正在尝试更改文件的名称。如果能够更改“显示名称”属性，这似乎很简单。但我不断收到此错误：

```
Can't set displayed name of alias "Path:to:file:" to "New_name" 
```

这是我正在使用的文件夹操作脚本（即保存的applescript，然后使用文件夹操作设置服务将其分配给我的文件夹）：

```
on adding folder items to this_folder after receiving these_items
    try
        repeat with this_item in these_items
            tell application "Finder" to set displayed name of this_item to "New_Name"
        end repeat

    on error error_message number error_number
        display dialog error_message buttons {"Cancel"} default button 1 giving up after 120
    end try
end adding folder items to 
```

我发现的所有执行类似操作的脚本（例如[这个问题](https://stackoverflow.com/q/4278704/881250)）首先获取“名称”属性，然后剥离扩展名。我宁愿直接进入“显示名称”属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:22:51.177

如果文件具有 Finder 无法识别的扩展名或启用了显示所有扩展名，则显示的名称可以包含扩展名。

附加以前的扩展不会那么复杂：

```
tell application "Finder"
    set f to some file of desktop
    set name of f to "New_name" & "." & name extension of f
end tell 
```

如果文件没有扩展名或 Finder 无法识别扩展名，这也可以：

```
set text item delimiters to "."
tell application "Finder"
    set f to some file of desktop
    set ti to text items of (get name of f)
    if number of ti is 1 then
        set name of f to "New_name"
    else
        set name of f to "New_name" & "." & item -1 of ti
    end if
end tell 
```

如果您使用 Automator 创建了文件夹操作，则可以使用这样的 do shell 脚本操作：

```
for f in "$@"; do
    mv "$f" "New_name.${f##*.}"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:15:23.423

*Lauir Ranta 的回答对于Finder*是正确的。

但在发表我的评论后，我记得*系统事件*比 Finder 更深入地看待事物。

所以我交换了命令以将名称从*Finder*更改为*系统事件* 所以现在它可以工作了。

之前我有一个名为“someFile.kkl”的文件并且扩展名刚刚组成。 *Finder*将返回 "" 作为扩展名并重命名不带扩展名的文件。“新名字”

但是当 *系统事件发生*时 ，它会看到扩展名并将名称设置为“newName.kkl”

```
tell application "Finder" to set thisFile to (item 1 of (get selection) as alias)

tell application "System Events"
    if name extension of thisFile is "" then

        set name of thisFile to "newName"
    else
        set name of thisFile to ("newName" & "." & name extension of thisFile)

    end if

end tell 
```

在文件夹操作中设置。

```
on adding folder items to this_folder after receiving these_items
    try
        repeat with this_item in these_items
            tell application "System Events"
                if name extension of this_item is "" then

                    set name of this_item to "new_Name"
                else
                    set name of this_item to ("new_Name" & "." & name extension of this_item)

                end if

            end tell
        end repeat

    on error error_message number error_number
        display dialog error_message buttons {"Cancel"} default button 1 giving up after 120
    end try
end adding folder items to 
```

# side-effects - 副作用和深奥的语言

> ID：14032202
> 
> 赞同：3
> 
> 时间：2012-12-25T16:12:12.563
> 
> 标签：side-effects, esoteric-languages

作为[关于这个问题的评论中](https://stackoverflow.com/questions/14031784/is-it-possible-to-write-tower-defense-in-c-sdl/)讨论的一个分支。我想问一下副作用和深奥功能之间的关系。具体来说：

1）你可以使用 ook/brainfuck 访问 gpu（并导致图形副作用）吗？

2）你可以使用空格进行系统调用吗？

3）本质上归结为，您可以使用任何图灵完整语言引起所有常见的副作用吗？

4）额外问题：如果可能的话，你能提供一个工作示例/代码的链接吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T16:38:30.617

bmargulies 的评论是关于一般问题的。[图灵完备](http://en.wikipedia.org/wiki/Turing_completeness)在技术上意味着该语言可用于模拟单磁带图灵机。实际上，这意味着您可以在图灵完备的语言 Y 上模拟图灵完备的语言 X 上的任何计算。但是，您所说的所有东西都不是计算——它们是系统接口。要在特定系统中做特定的事情，你需要有一个接口。这些语言不提供通用接口；它们提供了一些系统调用，我们将在下面看到。

让我们用一个弱类比。考虑航天飞机。航天飞机上的每一个计算都可以用你的 iPhone 完成（也许不是及时）；但要真正发射火箭和断开助推器，需要一个特殊用途的系统。你可以为 iPhone 编写一个应用程序，它的输出是给宇航员的指令，比如“发射右舷火箭 10 秒！” 并以这种方式飞行航天飞机。但是你不能只把你的 iPhone 插到航天飞机的码头上。

因此，正如您所料，您所有问题的答案分别是：

1.  “不。但你可以，如果你想破解它。”
2.  “不。但你可以，如果你想破解它。”
3.  “不。但你可以，如果你想黑他们的话。”
4.  “去破解它！”

whitespace 是一种解释型语言，除了向控制台读写字符外，该语言不提供任何系统集成。（它也不会产生传统的汇编代码，您可以根据该原始问题轻松地将其集成到 C 程序中。您需要使用系统调用从 C 程序运行解释器并将输出返回到您的进程。非常高度效率！）语言和解释器是开源的，因此从技术上讲，您可以修改语言以通过解释器支持通用操作系统调用。

*   [http://compsoc.dur.ac.uk/whitespace/download.php](http://compsoc.dur.ac.uk/whitespace/download.php)

Brainfuck 实际上可以编译，所以理论上你可以更容易地将它包含在其他程序中，如果你觉得很有趣的话。和空格一样，它只支持读写字符。修改 Brainfuck 以支持完整的系统调用会很有趣（也许值得一篇论文）。

这是编译器的源代码。有它：

*   [http://www.muppetlabs.com/~breadbox/software/tiny/bf.asm.txt](http://www.muppetlabs.com/~breadbox/software/tiny/bf.asm.txt)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:23:57.463

您总是可以编写一个包装器，将 ook / brainfuck / whitespace / etc. 程序的输出解释为访问 gpu / 进行系统调用 / 煮咖啡 / 其他任何命令的命令。

但是不，没有内置机制可以在brainfuck中做任何这些事情，我不相信你提到的任何其他语言也有。“图灵完备”只是意味着该语言在理论上可以*计算*任何普通计算机可以计算的东西。这并不意味着该语言必须提供一种机制来执行计算机也可能执行的任何非计算操作，例如绘制图形、播放声音，或者实际上是煮咖啡。

# javascript - 确定输入字段的值已更改

> ID：14032205
> 
> 赞同：0
> 
> 时间：2012-12-25T16:12:25.997
> 
> 标签：javascript, jquery

我在我的项目中使用这个插件：

[https://github.com/bseth99/jquery-ui-extensions](https://github.com/bseth99/jquery-ui-extensions)

[https://raw.github.com/bseth99/jquery-ui-extensions/master/bseth99-jquery-ui.js](https://raw.github.com/bseth99/jquery-ui-extensions/master/bseth99-jquery-ui.js)

经理根据一些标准选择这个插件。示例中演示了这背后的基本思想：

[http://bseth99.github.com/jquery-ui-extensions/tests/visual/slidespinner/value.html](http://bseth99.github.com/jquery-ui-extensions/tests/visual/slidespinner/value.html)

所以用户向右滑动并且值改变。我目前使用此插件的问题是，当我向任何方向滑动滑块时，它不会触发任何类型的更改事件。

但它工作正常，输入中的值发生变化。但如果我尝试：

```
$(document).on("input", "change", function(){
     alert("something");
}); 
```

自然不会火。所以我的问题是，接下来要尝试什么？我可以创建某种观察者，当这个值在文档准备好或其他东西上发生变化时触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:18:34.230

在 jQuery 中尝试这样的事情：

```
$(document).ready(function(){
    $('input').change(function(){
        alert('My value was changed !');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:25:26.053

您是否看到实际上 a-anchor 中的属性“style”在您的插件中发生了变化？在观察更改事件时，您应该尝试捕获此元素。

```
<a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="bottom: 58.5%;"></a> 
```

# c# - ToList 慢速性能与 foreach 慢速性能

> ID：14032208
> 
> 赞同：2
> 
> 时间：2012-12-25T16:12:49.307
> 
> 标签：c#, performance, linq, entity-framework-4

我正在构建将数据库与 3 个表（Worker、Task、TaskStep）一起使用的程序，并且我有一个方法可以获取日期并为任务的特定工作人员构建报告以及特定日期的步骤。

数据库结构如下：

MySQL 5.2

`Worker`表列：

```
workerID(VARCHAR(45)),
name(VARCHAR(45)),
age(int),
... 
```

`Tasks`表列：

```
TaskID(VARCHAR(45)),
description(VARCHAR(45)),
date(DATE),
... 
```

`TaskSteps`表列：

```
TaskStepID(VARCHAR(45)),
description(VARCHAR(45)),
date(DATE),
... 
```

任何表都没有索引

问题是它非常非常慢！！（约 20 秒）

这是代码：

```
using WorkerDailyReport = Dictionary<task, IEnumerable<taskStep>>;

private void Buildreport(DateTime date)
{
    var report = new WorkerDailyReport();    

    // Load from DB
    var sw = new Stopwatch();
    sw.Start();

    var startOfDay  = date.Date;
    var endOfDay    = startOfDay.AddDays(1);
    var db          = new WorkEntities();

    const string    workerID   = "80900855";

    IEnumerable<task> _tasks = db.task
                    .Where(ta =>    ta.date     >= startOfDay   &&
                                    ta.date     <  endOfDay     &&
                                    ta.workerID == workerID)
                    .ToList();

    sw.Stop();
    Console.WriteLine("Load From DB time - " + sw.Elapsed + 
                      ", Count - "           + _tasks.Count());   

    // Build the report
    sw.Restart();

    foreach (var t in _tasks)
    {
        var ts = db.taskStep.Where(s => s.taskID == task.taskID);

        report.Add(t, ts);
    }

    sw.Stop();
    Console.WriteLine("Build report time - " + sw.Elapsed);

    // Do somthing with the report
    foreach (var t in report)
    {
        sw.Restart();

        foreach (var subNode in t.Value)
        {
            // Do somthing..
        }

        Console.WriteLine("Do somthing time - " + sw.Elapsed + 
                          ", Count - " + t.Value.Count());
    }
} 
```

如您所见，我将秒表放在每个部分中以检查需要这么长时间，结果如下：

1)

如果我按上述方式运行代码：

安慰：

```
Load From DB time - 00:00:00.0013774, Count - 577

Build report time - 00:00:03.6305722

Do somthing time - 00:00:07.7573754, Count - 21

Do somthing time - 00:00:08.2811928, Count - 11

Do somthing time - 00:00:07.8715531, Count - 14

Do somthing time - 00:00:08.0430597, Count - 0

Do somthing time - 00:00:07.7867790, Count - 9

Do somthing time - 00:00:07.3485209, Count - 39

......... 
```

内部 foreach 运行大约需要 7-9 ！秒运行不超过 40 条记录。

2)

如果我只改变一件事，当我从数据库加载工作任务时，在第一个查询之后添加 .ToList() 它会改变一切。

安慰：

```
Load From DB time - 00:00:04.3568445, Count - 577

Build report time - 00:00:00.0018535

Do somthing time - 00:00:00.0191099, Count - 21

Do somthing time - 00:00:00.0144895, Count - 11

Do somthing time - 00:00:00.0150208, Count - 14

Do somthing time - 00:00:00.0179021, Count - 0

Do somthing time - 00:00:00.0151372, Count - 9

Do somthing time - 00:00:00.0155703, Count - 39

......... 
```

现在从数据库加载需要更多时间，4 秒以上。但是内置报告时间约为~1ms，每个内部foreach需要~10ms

第一种方法是不可能的（577 * ~8 秒），第二个选项也很慢，我看不到 y。

知道这里发生了什么吗？

1）为什么`ToList()`这么慢？

2）为什么没有`ToList()`，内部`foreach`和构建报告会变慢？

我怎样才能让它更快？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:52:22.457

当您不使用 .ToList() 时，C# 不会从数据库中加载数据，直到您第一次需要从数据库中获取数据，这是因为实体框架中的延迟加载。

并且在内部 for-each 循环的每一步中，您的程序都会从​​数据库请求查询，这太慢了。

但是，当您使用 .ToList() 时，您会立即运行查询并首先获取所有记录，这很慢。然后，在内部 for-each 循环中，您的程序将所有记录都保存在内存中。

对不起，我的英语口语很弱 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:56:33.367

To improve performance, you should use one query to get data from all table:

```
var _joinedTasks = db.task.Where(ta =>    ta.date     >= startOfDay   &&
                                    ta.date     <  endOfDay     &&
                                    ta.workerID == workerID)
                    .Join(db.taskStep, t => t.taskID, ts=>ts.taskID, (t, ts) => new {t, ts})
                    .GroupBy(g => g.t, v=>v.ts).AsEnumerable(); 
```

Then you can add it to dictionary:

```
var report = _joinedTasks.ToDictionary(g=>g.Key); 
```

And use this report as you wish.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T01:57:53.697

LINQ`ToList()`总是立即评估序列 - 在您的情况下，对数据库进行 SQL 查询。

在您得到的第一个实例中`Load From DB time - 00:00:00.0013774, Count - 577`- 这很快，因为您没有运行 SQL 查询。但是，查询稍后运行 - 这就是您得到`Build report time - 00:00:03.6305722`（*慢*）的原因。

在第二个实例`ToList()`中，立即添加对查询的强制评估（执行 SQL），这就是您得到以下时间的原因：

*   `Load From DB time - 00:00:04.3568445, Count - 577`- 对数据库的 SQL 查询（*慢*）
*   `Build report time - 00:00:00.0018535`- 对内存中的数据进行操作（*快速*）

有趣的是，您返回**577**个项目的查询耗时**超过 3 秒**。这可能是由于其中一张表上缺少索引而发生的。

请记住，如果您的表上没有索引，则数据库系统需要执行**全表扫描**以找出所有满足以下条件的项目：

```
.Where(ta => ta.date >= startOfDay &&
             ta.date < endOfDay &&
             ta.workerID == workerID) 
```

随着表中项目数量的**增加**`Tasks`，您的查询将花费**越来越长的时间**。

所以我强烈建议在`Tasks.date`和`Tasks.workerId`列上创建索引。这应该会缩短初始查询时间（假设您的数据库连接速度很快，即您没有连接到部署在海洋上的数据库）。

顺便说一句，不要在所有表列上创建索引（仅在您在查询条件中使用的列上）。这可能会减慢您的插入操作并增加数据库大小。

`Do somthing time ...`不幸的是，由于您没有提供代码，因此我无法提供更多建议。但是，如果您采用相同的建议，我相信您也会得到一些改进。

# android - 如何在所有屏幕上显示布局？

> ID：14032210
> 
> 赞同：0
> 
> 时间：2012-12-25T16:13:03.157
> 
> 标签：android

在某些情况下，我的应用程序应该显示块屏幕。此屏幕会弹出所有屏幕，覆盖所有 UI 元素，并且不会对按下返回和主页按钮做出反应，但应该能够输入密码。

你能建议我一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:17:14.170

你真的不应该那样尝试。**用户应该控制自己的手机。**如果我想查看我的电子邮件，查看我的通知，切换到另一个应用程序或任何我应该能够做到的事情，只要我可以。

话虽如此：可以通过在您的活动中覆盖此方法来阻止后退按钮（例如，什么都不做）

```
public void onBackPressed() {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:20:45.170

`Activity`创建具有透明背景的全屏，将您的“输入密码信息”逻辑、 `override` *“主页”*和*“后退按钮”*操作放在该*Activity*中。

但这不是最佳`Android`做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:03:16.853

我将忽略您*为什么*要这样做的问题，而只关注如何做。如果要在所有其他屏幕上全屏显示 UI，则需要使用系统警报窗口。您将需要权限[SYSTEM_ALERT_WINDOW](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW)，并将您的窗口类型设置为

```
WindowManager.LayoutParams.TYPE_SYSTEM_ALERT 
```

# jquery - 如何检测Android上的后退和菜单按钮？PhoneGap + jQuery Mobile

> ID：14032214
> 
> 赞同：4
> 
> 时间：2012-12-25T16:13:37.450
> 
> 标签：jquery, cordova, jquery-mobile

我在使用 jQuery Mobile v1.2.0 和 PhoneGap v2.2.0。似乎没有一个 PhoneGap 事件正在触发，但是我称之为（无论是通过`document.addEventListener`还是`$(document).on`。后退按钮和菜单按钮检测都不起作用。

还有其他类似的问题，但到目前为止，我只能看到使用`document.addEventListener`或使用 jQuery 方法来添加事件侦听器的建议，但它确实不起作用。任何人都可以给我一个可靠的方法来检测它们吗？

这是`<head>`我的 index.html

```
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <link rel="stylesheet" href="jqm/jquery.mobile-1.2.0.css" />
    <link rel="stylesheet" href="jqm/jquery.mobile.theme-1.2.0.css" />
    <script src="js/jquery.js"></script>
    <script src="jqm/jquery.mobile-1.2.0.js"></script>
    <script src="js/cordova.js"></script>
    <script type="text/javascript">
        $(document).live("pagechange",function(){
            var page = $.mobile.activePage.attr("id");

            document.addEventListener("menubutton", menuKeyDown, true);
            function menuKeyDown() {
                alert('Menu button pressed.');
            }
        });
    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T09:29:00.403

在上传到 build.phonegap.com 之前，删除项目中的“cordova.js”。并尝试以下代码。

```
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi"/>
<link rel="stylesheet" href="jqm/jquery.mobile-1.2.0.css"/>
<link rel="stylesheet" href="jqm/jquery.mobile.theme-1.2.0.css"/>
<script src="js/jquery.js"></script>
<script src="jqm/jquery.mobile-1.2.0.js"></script>
<script src="js/cordova.js"></script>
<script type="text/javascript">
        $(document).live("pagechange",function(){
            var page = $.mobile.activePage.attr("id");
        });
        document.addEventListener("deviceready", function () {
            document.addEventListener("menubutton", menuKeyDown, true);
        }, false);
        function menuKeyDown() {
                alert('Menu button pressed.');
            }
    </script>
</head> 
```

# c# - C# 可以像 jQuery 这样的目标选择器吗？

> ID：14032216
> 
> 赞同：-1
> 
> 时间：2012-12-25T16:14:05.657
> 
> 标签：c#, jquery, wpf, events, layout

jQuery 可以选择某物的子项、父项或下一个标记。C# 是否有类似这种行为的东西。例如，我有一个水平仪`StackPanel`，它有一个`Label`、一个 TextBox 和一个`Button`.

如果当前选择了而不使用引用名称的 if else 语句，我可以将目标`Label`更改为颜色吗？this 所在的 this中的某些功能，例如“此标签” 。`TextBox``Label``StackPanel``TextBox`

示例：无论何时选择一个文本框，它旁边的标签都会变为黄色背景。

![在此处输入图像描述](../Images/beddbd0fa0a1d0d973a8d9afaf4b4320.png)

我不确定如何用 C# 编写它，所以我将尝试用常规文本进行解释。

```
if (this) textbox is selected
    get the label next to it
    change the label background to a color

else
    remove the color if it is not selected 
```

Method() 将根据当前选择的`TextBox`.

像这样的函数可以具有相同的代码，但`Labels`一旦焦点更改为不同的`TextBox`. 这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:55:18.967

是的你可以; 你应该处理事件。例如，在这种情况下，您处理“TextBox.GotFocus”[事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus.aspx)。

```
void tb_GotFocus(object sender, GotFocusEventArgs e)
{
     // here you can get the StackPanel as the parent of the textBox and 
     // search for the Lable
     TextBox tb=(TextBox)sender;
     StackPanel sp=tb.Parent as StackPanel;

     // and ...
} 
```

如果您想完成此示例，请告诉我。

**编辑**
这是一个工作示例：

使用此窗口显示结果：

```
Window win = new Window();
        StackPanel stack = new StackPanel { Orientation = Orientation.Vertical };
        stack.Children.Add(new CustomControl());
        stack.Children.Add(new CustomControl());
        stack.Children.Add(new CustomControl());
        stack.Children.Add(new CustomControl());
        win.Content = stack;
win.ShowDialog(); 
```

这是 CustomControl 类：

```
public class CustomControl : Border
{
    Label theLabel = new Label {Content="LableText" };
    TextBox theTextbox = new TextBox {MinWidth=100 };

    public CustomControl()
    {
        StackPanel sp = new StackPanel { Orientation=Orientation.Horizontal};
        this.Child = sp;
        sp.Children.Add(theLabel);
        sp.Children.Add(theTextbox);

        theTextbox.GotFocus += new RoutedEventHandler(tb_GotFocus);
        theTextbox.LostFocus += new RoutedEventHandler(tb_LostFocus);
    }

    void tb_GotFocus(object sender, RoutedEventArgs e)
    {
        theLabel.Background = Brushes.Yellow;
    }
    void tb_LostFocus(object sender, RoutedEventArgs e)
    {
        theLabel.Background = Brushes.Transparent;
    }
} 
```

# java - webapp在哪里做用户认证？

> ID：14032218
> 
> 赞同：1
> 
> 时间：2012-12-25T16:14:12.070
> 
> 标签：java, web-applications, spring-mvc

在 Spring MVC Web 应用程序中，除了 Home、About、Service Terms 等之外的每个页面只有在用户登录后才能查看，哪里是进行身份验证的最佳位置？在过滤器级别、控制器级别还是两者兼而有之？

我问这个是因为现在我正在编写我的控制器，我一直在重复很多代码，比如：

```
if (currentUser.isAuthenticated()) // and possibly currentUser.hasPermission("some")
    // do logic and return proper page
else 
    // return to home or login page 
```

将所有需要身份验证的页面放在某个 url 模式下并使用过滤器保护（如果用户未通过身份验证，则捕获并重定向）它们会更好吗？这样控制器就更干净了，并且只返回请求的页面。

在这种情况下，正确的设计是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:22:12.487

你需要一个拦截器。几年前，关于身份验证和会话处理[[Spring MVC 3 Global Request Mapping]](https://stackoverflow.com/questions/7216474/spring-mvc-3-global-request-mapping) ，我有一个类似的问题。以下是我解决和实现它 [的方法[使用拦截器进行身份验证会话处理的 Github 源]](https://github.com/QuynhNguyen/Qake-Java-EE/blob/master/src/interceptor/GlobalInterceptor.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:29:17.447

遵循[Spring Security 参考指南 中给出的大纲](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/technical-overview.html#tech-intro-web-authentication)，即使您不使用该项目本身。这是关于如何在 webapp 中实现安全性的好建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:19:02.213

最好使用 spring security 来保护 spring 应用程序。您在 xml 中配置您的安全性，它会为您的应用程序创建 servlet 过滤器。

# java - Java 日历 - 特殊日子双周刊

> ID：14032219
> 
> 赞同：2
> 
> 时间：2012-12-25T16:14:21.313
> 
> 标签：java, calendar, quartz-scheduler

如何创建 Java 日历，该日历将指向每周二、周三下午 5:30，每两周一次。

```
Calendar cal = Calendar.getInstance(); 
```

它应该是两个单独的日历吗？周二一个，周三第二个？怎么能每两周拿到一次？

我用谷歌搜索了它，但没有找到任何例子。

你能请他吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:39:20.030

```
 Calendar startWed = Calendar.getInstance();
  startWed.set(Calendar.DAY_OF_WEEK, Calendar.WEDNESDAY);
  startWed.set(Calendar.HOUR, 17);
  startWed.set(Calendar.MINUTE, 30);
  Calendar startThu = Calendar.getInstance();
  startThu.set(Calendar.DAY_OF_WEEK, Calendar.THURSDAY);
  startThu.set(Calendar.HOUR, 17);
  startThu.set(Calendar.MINUTE, 30);

  for (int i = 0; i++ < 100;)
  {
     startWed.add(Calendar.DAY_OF_YEAR, 7 * 2); // each 2 weeks
     startThu.add(Calendar.DAY_OF_YEAR, 7 * 2); // each 2 weeks
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:32:50.480

你只需要使用

> WEEK_OF_YEAR % 2 *[* ==*或*!= *]* 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T03:22:59.873

# c# - 创建 guid 并使用确认链接发送

> ID：14032221
> 
> 赞同：1
> 
> 时间：2012-12-25T16:14:44.593
> 
> 标签：c#, asp.net

我使用此代码创建 guid

```
sGuid = System.Guid.NewGuid().ToString(); 
```

并使用以下方式通过确认链接传递它：

```
const string body = "To confirm 'http://www.mysite.com/verify.aspx?sGuid'Verify your account"; 
```

但是，我发现在我的电子邮件收件箱按摩中，它看起来像

```
http://www.mysite.com/verify.aspx?sGuid 
```

确认链接没有显示指南。我找不到问题所在。我正在使用 localhost 。**无论如何在使用本地主机时测试确认链接？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:21:23.323

您应该使用串联将您的实际 guid 添加到链接：

```
string body = "To confirm 'http://www.mysite.com/verify.aspx?sGuid=" + sGuid + "'Verify your account"; 
```

而且，`verify.aspx.cs`你应该能够得到它：

```
string guidToTest = Request["sGuid"]; 
```

另外，请注意，您不能使用`const`修饰符定义`body`，因为您将无法使用连接。

但是如果你想让它像你的类的 const 属性一样，你可以这样做：

```
const string body = "To confirm 'http://www.mysite.com/verify.aspx?sGuid={0}'Verify your account"; 
```

而且，在发送电子邮件之前：

```
mail.Body = string.Format(body, sGuid); 
```

正如@house9 在下面的评论中提到的那样。

如果您使用 localhost 并没有区别。

# javascript - 如何在 Ember Data 中指定自定义集合/成员路由

> ID：14032222
> 
> 赞同：0
> 
> 时间：2012-12-25T16:14:47.513
> 
> 标签：javascript, ember.js, ember-data

假设我的服务器端 API 实现了以下

```
GET /tournaments/1          # return a tournament data
POST /tournaments/1/seed    # seed the tournament
DELETE /tournaments/1/seed  # unseed the tournament 
```

我应该如何在我的 Ember 数据模型中实现这一点？鉴于比赛看起来像这样

```
App.Tournament = DS.Model.extend({
  name: DS.attr("string")
  ... bunch of stuff
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:35:07.077

除了使用 jQuery.ajax 和侧载结果之外，现在没有什么好的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T08:50:26.850

今天，您将创建`adapters/tournament.js`并添加如下内容：

```
export default Ember.RESTAdapter.extend({
  urlForCreateRecord(){
    return this._super(...arguments) + '/' + snapshot.id + '/seed';
  },
  urlForDeleteRecord(){
    return this._super(...arguments) + '/' + snapshot.id + '/seed';
  }
}); 
```

# ruby - 使用 Ruby Quick_Magick 合成两个图像

> ID：14032223
> 
> 赞同：0
> 
> 时间：2012-12-25T16:14:48.030
> 
> 标签：ruby

如何使用 Ruby Quick_Magick gem 合成两个图像？

我尝试：

```
qm_image = QuickMagick::Image.read(type_path.join(image_name).to_s).first
qm_image.composite 0, 0, 0, 0, '/home/ruby/projects/myproject/public/mask1.png'
qm_image.save! 
```

我有：

> 执行命令时出错：命令结果是：错误是：分段错误

=== 结论：

我解决了迁移到 Mini_Magick 的问题。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:00:53.367

你可以这样做

```
require 'rmagick'

qm_image1 = Magick::Image.read(image_name1).first
qm_image2 = Magick::Image.read(image_name2).first

qm_image_result = qm_image1.composite(qm_image2, 0, 0, Magick::OverCompositeOp)
qm_image_result.write('result.jpg') 
```

有关复合的可能参数，请参见[http://www.imagemagick.org/RMagick/doc/image1.html#composite_bang](http://www.imagemagick.org/RMagick/doc/image1.html#composite_bang)

# python - 按值对numpy矩阵进行有效着色？

> ID：14032225
> 
> 赞同：2
> 
> 时间：2012-12-25T16:15:03.743
> 
> 标签：python, colors, numpy

我有一个 numpy ndarray，它看起来像：

```
[[0, 0.25, 1,  ...., 0.5, 0.23 ],
 [0.3, 0.75, 1, ..., 0.5, 0.37 ],
  ...,
  ...,
 [0, 0.25, 1,  ...., 0.5, 0.23 ],
 [0.3, 0.75, 1, ..., 0.5, 0.37 ]] 
```

基本上每个值都在 0 - 1.0 范围内

我想将其可视化为位图，目前我有一个非常慢的循环，基本上是这样做的：

```
for i, row in enumerate(data):
    for j, val in enumerate(row):
        yield val_to_rgb(val) 
```

然后它将采用 rgb 组件的 3 元组并对其执行 PIL putdata 并创建一个 PNG。

我需要这样做很多次，这种 ghetto 方法很慢，而且着色非常难看。

我的问题是这样的：

我可以应用一系列矩阵运算来生成包含原始 RGB 值的彩色矩阵吗？

这实际上包括两个问题：

1.  我可以应用什么最有效的转换来从上述矩阵中获取 RGB 元组
2.  有没有一种“好”的方法可以将 (0, 1.0) 值转换为彩色表示？

编辑：澄清-我希望将其保存为 PNG，而不仅仅是实时查看。原因是其中很多都是在无头机器上执行的，然后我会在事后对其进行检查。

当前算法的输出看起来很糟糕：

![彩色矩阵](../Images/a11f26aef5f49d26935c784c44901553.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:28:25.850

matplotlib 具有[imshow](http://matplotlib.org/users/image_tutorial.html)功能，您可以开箱即用。

您所做的通常是通过“矢量化”完成的。您定义一个函数并让 numpy 进行迭代：

```
vec = np.vectorize(val_to_rgb)
rgb_data = vec(data) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:50:31.340

我对 PIL 不是很熟悉，但我猜它会吞下一个 numpy 形状的数组`(rows, cols, 3)`并将其变成图像。因此，您想重写您的`val_to_rgb`函数，使其适用于数组，而不是标量，并将 RGB 值放在形状的最后一维中。

例如，假设您想将值解释为灰度，0 表示黑色，1 表示白色。您当前采用标量输入的函数如下所示：

```
def val_to_rgb(val) :
    return (int(val * 255),) * 3 
```

向量化的形式类似于：

```
def vals_to_rgbs(vals) :
    ret = np.zeros(vals.shape + (3,),  dtype='uint8')
    ret[...] = vals.reshape(vals.shape + (1,)) * 255
    return ret

>>> vals_to_rgb(np.random.rand(10,10)).shape
(10, 10, 3)
>>> vals_to_rgb(np.random.rand(10,10)).dtype
dtype('uint8') 
```

重塑是让广播发挥它的魔力。

Thinks can get more complicated, so if you need help vectorizing your specific `val_to_rgb` function, post your code and I'll gladly take a shot at it.

# php - ZF2 中的会话

> ID：14032226
> 
> 赞同：6
> 
> 时间：2012-12-25T16:15:26.583
> 
> 标签：php, session, zend-framework2

你能告诉我如何在 ZF2 中正确使用会话吗？到目前为止，我有这个代码：

```
"session" =>
[
    "remember_me_seconds" => 2419200, 
    "use_cookies" => true,
    "cookie_httponly" => true
] 
```

那是我从 stackoverflow 上的一些帖子中复制的会话配置。现在我应该将此代码放入使用会话的每个模块中的 module.config.php 中还是应用程序模块中？

```
public function onBootstrap(EventInterface $Event)
{
    $Config = $Event->getApplication()->getServiceManager()->get('Configuration');
    $SessionConfig = new SessionConfig();
    $SessionConfig->setOptions($Config['session']);
    $SessionManager = new SessionManager($SessionConfig);
    $SessionManager->start();  
    Container::setDefaultManager($SessionManager);
} 
```

Module 类的 onBootstrap() 方法也有同样的问题。这段代码应该进入每个模块的模块类还是只进入应用程序的模块类？

在这两种情况下，我都尝试了这两种方法，甚至尝试将这段代码一次放入两个模块中，但我唯一能完成的就是在控制器的构造函数中设置会话变量，然后在操作/方法中读取它们。我无法在一个操作/方法中设置会话变量，然后在另一个操作/方法中读取它。如果我删除了在控制器的构造函数中设置变量的行，我将无法在会话中看到这些变量。会话的行为就像每次请求页面时创建和删除它一样。

我错过了什么吗？请不要将我链接到互联网上的任何资源，我已经阅读了所有资源，它们并没有真正的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T14:28:32.190

您无需进行任何配置即可在 Zend Framework 2 中使用会话。当然，您可以更改设置，但如果您只想启动并使用会话运行，那么现在不要担心。

我很抱歉，但我将不理会你的最后一句话；大约一个月前，我写了[一篇关于这个主题](http://codingexplained.com/coding/php/zend-framework/using-sessions-in-zend-framework-2)的文章，目的是展示如何快速开始使用 ZF2 中的会话。它在搜索引擎中的排名不是很好，所以你很可能没有读过它。

这是一个代码片段，展示了它是如何完成的。如果您对它在幕后的工作方式感兴趣，请参阅上面的链接。

```
namespace MyApplication\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\Session\Container; // We need this when using sessions

class UserController extends AbstractActionController {
    public function loginAction() {
        // Store username in session
        $userSession = new Container('user');
        $userSession->username = 'Andy0708';

        return $this->redirect()->toRoute('welcome');
    }

    public function welcomeAction() {
        // Retrieve username from session
        $userSession = new Container('user');
        $username = $userSession->username; // $username now contains 'Andy0708'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T06:59:15.287

# 关于会话

您想在哪里存储会话（在 mysql-db、mongo-db 或 ram 中，..）？如何将会话分类为“命名空间”，例如

```
$_SESSION["namespace"]["user"],
$_SESSION["namespace_1"]["user"]? 
```

# 会话管理器

在 Zend 中，Zend\Session\SessionManger 帮助你做很多上面列出的事情

SessionManger 的简单配置

```
$sessionManager = new SessionManager();
$sessionStorage = new SessionArrayStorage();
$sessionManager->setStorage($sessionStorage);
//you can add more config, read document from Zend
$sessionContainer = new Container("ABC", $sessionManager);
$sessionContainer->offsetSet("user", "lehoanganh25991"); 
```

当您在没有任何 SessionManager 配置的情况下调用新容器时

```
$sessionContainer = new Container("abc"); 
```

在幕后，Zend 创建了一个默认的 SessionManager，然后将它传递给 Container

# 会话数组存储，$_SESSION

Zend 中的 SessionArrayStorage 可以使用 $_SESSION，我们可以通过`user`上面的方式访问

```
$_SESSION["ABC"]["user"] 
```

如果您在 ram 中设置其他存储，如 mysql-db、mongo-db、.. 通过 $_SESSION 访问可能不起作用

# 访问会话

在模块 A 中，设置会话

我们如何在 Moudle B 中访问它？$sessionContainer 变量在哪里@@？

这很奇怪，但是当您想访问此容器时，请使用 SAME CONFIG 创建一个新容器

```
$sessionManager = new SessionManager();
$sessionStorage = new SessionArrayStorage();
$sessionManager->setStorage($sessionStorage);
$sessionContainer = new Container("ABC", $sessionManager);
//access
var_dump("get user from \$sessionContainer", $sessionContainer->offsetGet("user")); 
```

在 github 上查看演示：[https ://github.com/hoanganh25991/zend-auth-acl/tree/d0a501e73ac763d6ef503bbde325723ea1868351](https://github.com/hoanganh25991/zend-auth-acl/tree/d0a501e73ac763d6ef503bbde325723ea1868351)

（通过提交，项目改变了，在这棵树上访问它）

```
in FronEnd\Controller\IndexController
in AuthAcl\Module.php
in AuthAcl\Service\SimpleAuth
i acces same session at different places 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T11:25:58.080

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Session\Container;

class IndexController extends AbstractActionController
{   
    // set session values
    public function indexAction()
    {
       $session = new Container('User'); // name your session here by replacing User
$user_session->offsetSet('user_name', "your user name"); // set your session user name
$user_session->offsetSet('user_id', "1232"); //set your session user id
    }

// function to get values from session
  public function getdataAction(){
    $session = new Container('User');
    $user_name= $user_session->offsetGet('user_name'); // get user name from the session
   $user_id= $user_session->offsetGet('user_id'); // get user id from the session
}

// function to unset session values
 public function unsetdataAction(){
   $session = new Container('User');
    $user_session->offsetUnset('user_name'); // unset user name
        $user_session->offsetUnset('user_id');
}
} 
```

# c# - 将网站和 wcf 服务发布到 azure

> ID：14032227
> 
> 赞同：1
> 
> 时间：2012-12-25T16:15:42.717
> 
> 标签：c#, asp.net-mvc, wcf, azure, web-deployment

我在 VS 中有一个解决方案，它包含一个轻量级 MVC 网站和一个由该站点使用的 WCF 服务，它实现了一些业务逻辑。

在我的本地部署中，我的网站位于端口 3333，服务位于 iis 的端口 4444。

我想在 azure 中进行部署，这将尽可能接近我的本地部署，以摆脱所有问题，例如为本地测试和 azure 部署分别指定 wcf 服务地址（以便端口 3333 上的网站可以在 azure 中运行时，实际上在 localhost:4444 上看到 wcf 服务）。

我将不胜感激有关如何实现这一目标的任何信息，在此先感谢。（如果这是不可能的，请告诉我，最接近的设置是什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:42:07.497

您可以这样做，但前提是您手动编辑 WebRode 配置，在那里您可以定义目标部署将具有的结构（从 IIS 的角度来看），您可以创建 VirtualDirectories 并将它们映射到与您的项目对应的文件夹因为它们将在部署机器上。

* * *

这应该是完成此操作所需的所有信息：[http ://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)

# c# - 如何为 <% %> 之间的文本添加颜色样式

> ID：14032228
> 
> 赞同：-1
> 
> 时间：2012-12-25T16:15:45.477
> 
> 标签：c#, html, css

我有这个代码：

```
<span class="title-details">
        <% = (Model.Id == 0 ? Global.NewLocation : Global.EditLocation + " " + Model.Name)%>
</span> 
```

如何为零件 Model.Name 添加不同的颜色（例如 EditLocation-Black、Model.Name-Blue）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:20:44.463

您可以将条件运算符拆分为 if-else 语句，这将允许您对输出进行更细粒度的控制：

```
<span class="title-details">
    <% if (Model.Id == 0) { %>
        <%= Global.NewLocation %>
    <% } else { %>
        <%= Global.EditLocation %> 
        <span style="color:Red;">
            <%= Model.Name %>
        </span>
    <% } %>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:24:34.820

试试这个：

```
<%= Html.Raw((Model.Id == 0 ? Global.NewLocation : 
                "<font color=\"black\">" + Global.EditLocation + "</font>
                &nbsp;<font color=\"blue\">" + Model.Name + "</font>")) %> 
```

希望这会有所帮助！

# iphone - iOS：addConstraints：崩溃的应用程序

> ID：14032230
> 
> 赞同：3
> 
> 时间：2012-12-25T16:16:01.963
> 
> 标签：iphone, objective-c, ios, nslayoutconstraint

# 问题

我似乎无法在我现有的项目中采用自动布局。

# 细节

我之前遇到了与这个问题一样的问题[presentViewController: crash on iOS <6 (AutoLayout)](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash-on-ios-6-autolayout)但提供的答案都不是我的解决方案：我正在使用所有没有 xibs 的情节提要视图。我的“使用自动布局”设置已关闭，我只使用 iOS 6。

我的视图控制器最初崩溃了，所以我设置了要延迟添加的约束，现在我的应用程序在任何`addConstraints:`调用期间都会崩溃。最糟糕的是，它不会告诉我为什么。

# 代码

我将链接我的代码，但它非常简单。

```
-(void)addAllConstraints
{
    NSDictionary * views = NSDictionaryOfVariableBindings(_memoryImage, _peopleView, _contentHolder, _commentsTableView);
    NSArray * constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[_memoryImage]-50-[_peopleView]-0-[_contentHolder]-0-[_commentsTableView]" options:0 metrics:nil views:views];
    NSLog(@"Views %@, Constraints %@", views, constraints);
    [_peopleView addConstraints:constraints];
    [_memoryImage addConstraints:constraints];
    [_contentHolder addConstraints:constraints];
   [_commentsTableView addConstraints:constraints];
} 
```

应用程序在`_peopleView`调用 addConstraints 时崩溃。视图和 NSLayoutConstraints 都已成功创建。

有任何想法吗？谢谢你，节日快乐。

编辑：

添加崩溃日志以显示没有显示任何有用的信息：

```
2012-12-25 10:40:13.936 -----[4955:907] Views {
"_commentsTableView" = "<UITableView: 0x1eb6be00; frame = (0 372; 320 100); clipsToBounds = YES; gestureRecognizers = <NSArray: 0x1e51ce00>; layer = <CALayer: 0x1e51cee0>; contentOffset: {0, 0}>";
"_contentHolder" = "<UIView: 0x1e5c6590; frame = (0 270; 320 112); layer = <CALayer: 0x1e5c27f0>>";
"_memoryImage" = "<UIButton: 0x1e5c4aa0; frame = (0 0; 320 280); opaque = NO; layer = <CALayer: 0x1e5c4b60>>";
"_peopleView" = "<UIView: 0x1f0ceea0; frame = (0 230; 320 50); layer = <CALayer: 0x1f0cf790>>";

Constraints (
"NSLayoutConstraint:0x1e51a880 V:[UIButton:0x1e5c4aa0]-(50)-[UIView:0x1f0ceea0]",
"NSLayoutConstraint:0x1e5ba4e0 V:[UIView:0x1f0ceea0]-(0)-[UIView:0x1e5c6590]",
"NSLayoutConstraint:0x1e51b860 V:[UIView:0x1e5c6590]-(0)-[UITableView:0x1eb6be00]"
)

}  
   (lldb) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T18:25:57.303

约束应该被添加到作为子视图的父视图的视图中。因此，如果这些对象在您的主视图中，那么您应该拥有（并且没有其他 addConstraints: 行）：

```
[self.view addConstraints:constraints]; 
```

此外，您的字典视图应该以 nil 终止（我不知道这是否有必要。我在 Apple 示例中注意到他们没有这样做，但函数定义用 nil 显示它） .

# php - 分页中不显示下一页

> ID：14032232
> 
> 赞同：0
> 
> 时间：2012-12-25T16:16:02.033
> 
> 标签：php

我已经在我的 pg_management.php 文件中完成了分页，该文件显示了存储在数据库中的所有记录。问题是当我移到下一页时，没有显示下一页。当我将指针移到链接上时，链接没有悬停。

下面是我的分页代码

```
<?php 

    <?php   $tbl_name=$db_prefix."pages";
        $adjacents = 3;
        $query = "SELECT COUNT(*) as num FROM $tbl_name";
        $total_pages = mysql_fetch_array(mysql_query($query));
        $total_pages = $total_pages['nu

    m'];
        $targetpage = "pg_management.php"; 
        $limit = 2; 
        $page = 15;
        if($page) 
            $start = ($page - 1) * $limit;  
            else
            $start = 0;

    $sql = "SELECT page_name, status FROM $tbl_name LIMIT $start, $limit";
            $result = mysql_query($sql);
            if ($page == 0) $page = 1;
            $prev = $page - 1;
            $next = $page + 1;
            $lastpage = ceil($total_pages/$limit);
            $lpm1 = $lastpage - 1;
            $pagination = "";
    if($lastpage > 1)

    {   
            $pagination .= "<div class='pagination'>";

             if ($page > 1) 
                $pagination.= "<a href='$targetpage?page=$prev'>previous</a>";
            else
                $pagination.= "<span class='disabled'>previous</span>"; 

                if ($lastpage < 7 + ($adjacents * 2))

                {   
                for ($counter = 1; $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }

                }
            elseif($lastpage > 5 + ($adjacents * 2))

            {
                if($page < 1 + ($adjacents * 2))        
                {
                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)

{
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";

    $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
                    }

                    elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
                    {
                        $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                        $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                        $pagination.= "...";
                        for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                        {
                            if ($counter == $page)
                                $pagination.= "<span class=\"current\">$counter</span>";

                                else

$pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                    }
                    $pagination.= "...";
                    $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";

                    $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
                }

            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)

                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next </a>";
        else
            $pagination.= "<span class=\"disabled\">next </span>";
        $pagination.= "</div>\n";       
    }
    ?> 
```

下面是打印分页的语法

```
<?php echo $pagination; ?> 
```

这是我的css文件

```
div.pagination
 {
font-family:Tahoma, Geneva, sans-serif;
    padding: 3px;
    margin: 3px;
}

div.pagination a 
{
    padding:2px 5px 2px 5px;
    margin:2px;
    border:1px solid #999;
    text-decoration:none;
    color: #666;
}

div.pagination a:hover, .pagination a:active 
{
    border: 1px solid #999;
    color: #000;
}

div.pagination span.current
 {
    margin: 2px;
    padding: 2px 5px 2px 5px;
    border: 1px solid #999;

        font-weight: bold;
        background-color: #999;
        color: #FFF;
    }

 div.pagination span.disabled {
        padding:2px 5px 2px 5px;
        margin:2px;
        border:1px solid #eee;
        color:#DDD;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:28:24.250

这是准备使用用户定义的函数来呈现分页链接。

```
function do_pagination($mainsql,$targeturl) 
```

{

```
$result = mysql_query($mainsql);
$count = mysql_num_rows($result);
$targetpage = $targeturl;   
$pagecount = $count / 10;
$pagecount = ceil($pagecount);
$end = $pagecount;
$links = "";
$curpage = $_GET['page'];
$start = 1;
$end = $pagecount;

$adjacents = 3;
$total_pages = $pagecount;  

if($curpage) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0; 

/* Setup page vars for display. */

if ($curpage == 0) $curpage = 1;                    //if no page var is given, default to 1.
$prev = $curpage - 1;                           //previous page is page - 1
$next = $curpage + 1;                           //next page is page + 1
$lastpage = $pagecount;             //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;      
$page = $curpage;

if($lastpage > 1)

{
    //previous button

    if ($page > 1) 

        $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$prev\">« previous</a>";

    else

        $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">« previous</span>";   

    //pages 

    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up

    {   

        for ($counter = 1; $counter <= $lastpage; $counter++)

        {

            if ($counter == $page)

                $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">$counter</span>";

            else

                $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$counter\">$counter</a>";                    

        }

    }

    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some

    {

        //close to beginning; only hide later pages

        if($page < 1 + ($adjacents * 2))        

        {

            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)

            {

                if ($counter == $page)

                    $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">$counter</span>";

                else

                    $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$counter\">$counter</a>";                    

            }

            $pagination.= "...";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$lpm1\">$lpm1</a>";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$lastpage\">$lastpage</a>";      

        }

        //in middle; hide some front and some back

        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))

        {

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=1\">1</a>";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=2\">2</a>";

            $pagination.= "...";

            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)

            {

                if ($counter == $page)

                    $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">$counter</span>";

                else

                    $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$counter\">$counter</a>";                    

            }

            $pagination.= "...";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$lpm1\">$lpm1</a>";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$lastpage\">$lastpage</a>";      

        }

        //close to end; only hide early pages

        else

        {

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=1\">1</a>";

            $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=2\">2</a>";

            $pagination.= "...";

            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)

            {

                if ($counter == $page)

                    $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">$counter</span>";

                else

                    $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$counter\">$counter</a>";                    

            }

        }

    }

    //next button

    if ($page < $counter - 1) 

        $pagination.= "<a style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\" href=\"$targetpage&page=$next\">next »</a>";

    else

        $pagination.= "<span style=\"margin-left:5px;margin-right:5px; background-color:#f8f8f8;border: 1px solid #cbcbcb; padding:5px;-moz-border-radius: 5px; -webkit-border-radius: 5px;\">next »</span>";

    echo $pagination;               

} 
```

# postscript - 如何在 Post Script 中修剪空白

> ID：14032234
> 
> 赞同：4
> 
> 时间：2012-12-25T16:16:22.717
> 
> 标签：postscript

我每个月都有数百万个 Post Script 文件。每个文件每个有 4-5 页。除了第 1 页，每一页的内容都很少。因此，虽然文件中的内容不是太大，但存在不必要的纸张浪费。

我一直在寻找一些工具，可以将第 2 页压缩到最后或修剪未使用的空白区域，以便优化使用纸张。

我得到了具有 PSNUP 命令的 PSUTILS，但它也没有完全满足我的解决方案。

任何有想法的人都可以在这个问题上提供帮助。

我的示例 Post Script 文件可以从

[https://www.dropbox.com/s/2z9oirsvxzf13di/1010472622.ps](https://www.dropbox.com/s/2z9oirsvxzf13di/1010472622.ps)

上面是一个三页的 Post Script 文件。是否可以将第 2 页和第 3 页杵杓以优化纸张使用。

请详细指导

问候'code.box@rediffmail.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-04T10:30:24.433

这是个有趣的问题。这是部分答案。

要引用类似问题的[类似答案](https://stackoverflow.com/a/17881062/1099571)，您必须解决两个问题：

1.  如何确定每个页面的边界框，即包围页面上所有可见标记的最小坐标。
2.  如何将多个输入页面组合到一个输出页面上。

对于 #1，您可以使用[Bounding Box 输出设备](https://ghostscript.com/doc/9.20/Devices.htm#Test)到[Ghostscript](https://ghostscript.com)。使用如下调用：

```
gs -dSAFER -dNOPAUSE -dBATCH -sDEVICE=bbox 
```

和 Ghostscript 打印到标准输出一个边界框，如：

```
%%BoundingBox: 14 37 570 719
%%HiResBoundingBox: 14.308066 37.547999 569.495061 718.319158 
```

这四个数字是页面上可见内容边界框左上角和右下角的 x,y 坐标。它们以默认 PostScript 语言坐标系表示。

对于＃2，以某种方式捕获边界框输出，并使用它来生成修改后的输出文件，其中在每个输出页面上组合了多个输入页面。

如果您的 PostScript 语言文件遵循[文档结构约定](https://en.wikipedia.org/wiki/Document_structure_convention)，您就有机会在 PostScript 语言中执行此操作。如果没有，那么您最好使用 GhostScript 将文件转换为 PDF 语言并在该级别进行组合。

约定的重要属性是每个页面都是独立的，并且文件包含结构化注释，因此您可以检测输入文件中每个页面的开始和结束位置。此外，如果您将不同的输入文件组合成一个输出文件，则输出文件需要包含每个输入文件的所有头文件的所有资源。

您需要编写逐页遍历输入文件的代码。它需要逐页生成输出文件。对于每个输出页面，它需要跟踪到目前为止页面上内容的边界框是什么。

对于每个输入文件，它从步骤 #1 中查找边界框。它将其与输出页面的边界框进行比较。如果输出页面上有输入页面内容的空间，那么： * 生成 PostScript 语言代码保存图形状态，然后将坐标系向下平移到输出页面的空白部分， * 将输入页面内容复制到输出文件，* 生成恢复图形状态的代码

如果没有空间，它会结束当前的输出页面，开始一个新的输出页面，然后执行上述操作。

我不知道有任何现有的、易于使用的工具可以进行这种页面内容拼版。对于熟悉 PostScript 语言和文档结构约定的程序员来说，编写这样一个工具会很简单。这与编写基于 PostScript 语言的页面拼版程序类似。

# breeze - Breeze 在将外键属性设置为 null 后为其分配默认值

> ID：14032235
> 
> 赞同：1
> 
> 时间：2012-12-25T16:16:26.707
> 
> 标签：breeze

我们仍在使用 Northwind 数据库测试 Breeze，我们遇到了一个奇怪的行为。

首先，我几乎可以确定这不是错误，不可能，它是如此基本的操作。

我们有一个产品实体，我们将其 SupplierID 设置为 null（外键可以为 null），如下所示，

```
product.SupplierID(null) 
```

在这微风之后做这些，

1.  将产品的 SupplierID 值设置为 null
2.  将产品的供应商设置为空
3.  将产品的 SupplierID 设置为 0

这会导致外键异常。

可能这是一个简单的问题，我们必须错过一些东西，我的一位同事从今天早上开始就试图解决这个问题，但没有运气。

他发现在此分配之后轻风调用了两次（一次用于供应商 ID，另一次用于供应商）并将它们分配为空值。

```
result = ko.computed({
                read: target,  //always return the original observables value
                write: function(newValue) {
                    instance._$interceptor(property, newValue, target);
                    return instance;
                }
            }); 
```

在这微风检查外键并执行这一行之后，

```
if (property.relatedDataProperties) {
if (!entityAspect.entityState.isDeleted()) {
    var inverseKeyProps = property.entityType.keyProperties;
    inverseKeyProps.forEach(function(keyProp, i ) {
        var relatedValue = newValue ? newValue.getProperty(keyProp.name) : keyProp.defaultValue;
        that.setProperty(property.relatedDataProperties[i].name, relatedValue);
    });
} 
```

有趣的是，这一行检查 value 是否为 null（对于 product.SupplierID），如果为 null，则设置为 Supplier 表的 key 属性的默认值，并且为 0（它不能为 null，因为它是主键）。

我们刚刚更新到 0.80.2 版本，但行为仍然相同。

提前致谢。

[更新]

这是我们的测试，

```
test("set foreign key property to null", 3, function () {
    var productQuery = new EntityQuery("Products").take(1)
        .expand("Supplier");

    stop();
    queryForOne(newEm, productQuery, "First Product")
        .then(assertProductSetSupplierIDToNull)
        .fail(handleFail)
        .fin(start);
});

function assertProductSetSupplierIDToNull(data) {
    var products = data.results;
    var firstProduct = products[0];

    ok(firstProduct.SupplierID(), "SupplierID is "+firstProduct.SupplierID());

    firstProduct.SupplierID(null);

    equal(firstProduct.SupplierID(), null, "is SupplierID null?");
} 
```

结果是，

![](../Images/cbc8e29a4e62962c7dce854967613211.png)

另一个有趣的事情是，如果我们像这样设置这个值两次，

```
 firstProduct.SupplierID(null);
    firstProduct.SupplierID(null); 
```

测试通过，

![在此处输入图像描述](../Images/fef77699cb04b67932b6607eb41ec61c.png)

我希望这个样本足以重现这种行为。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:25:41.057

这是一个错误，已在 v 0.80.3 中修复，可在微风网站上找到。...感谢单元测试；它真的有帮助。

# php - simplexml_load_string 返回空白节点

> ID：14032242
> 
> 赞同：0
> 
> 时间：2012-12-25T16:17:23.390
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [PHP 从 SimpleXMLElement 数组中获取值](https://stackoverflow.com/questions/2751711/php-get-values-from-simplexmlelement-array)

我`simplexml_load_string()`用来解析 xml 字符串。它正确读取输入，但不返回任何数据，只返回空白节点。

我的xml数据是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<leads>
    <auth>
        <username>user</username>
        <password>user</password>
    </auth>
</leads> 
```

功能是：

```
$xmlObj = simplexml_load_string($xml);

    if ($xmlObj) {
        echo "Failed loading XML\n";
        foreach(libxml_get_errors() as $error) {
            echo "\t", $error->message;
        }
    } 
    else{
        print_r($xmlObj);
     } 
```

当我尝试打印结果时，我得到一个空白节点，例如

```
<auth>
    </username>
    </password>
</auth> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:15:28.357

我得到了解决方案

```
$username = (string) $xmlObj->auth->username; 
```

我只是把“（字符串）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:18:18.940

您需要使用[^(*Docs*)](http://php.net/SimpleXMLElement.asXML)[`SimpleXMLElement::asXML()`方法](http://php.net/SimpleXMLElement.asXML)*来获取 XML，否则它将返回根节点的值为空的值，因此为空字符串。*

 *所以一切都很好，花花公子。

此外，作为预防措施，请进行正确的返回值检查：

```
$obj = simplexml_load_string($xml)
if ($obj === FALSE) {
    throw new Exception('Failed to load XML string.');
} 
```

我希望这会有所帮助，并对您的问题有所了解。*

# linux - 如何知道是否使用 -fPIC 选项构建了共享库二进制文件

> ID：14032246
> 
> 赞同：7
> 
> 时间：2012-12-25T16:17:51.293
> 
> 标签：linux, shared-libraries, fpic

我正在研究嵌入式 Linux 环境。我有一组二进制格式的共享库（我没有源代码和 Makefile），我想检查它们是否已使用 -fPIC 选项编译。是否有任何工具或方法来测试共享库二进制文件是否已编译 -fPIC？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-28T10:29:01.323

没有`-fPIC`. 它会报告类似

```
/usr/bin/ld: /tmp/ccbCwoJo.o: relocation R_X86_64_PC32 against symbol `_Z1ff' can not be used when making a shared object; recompile with -fPIC 
```

但是，如果您真的想检查某些内容，请使用 grep 进行 PLT 调用：

```
$ objdump -d a.out | g @plt
 628:   e8 23 00 00 00          callq  650 <__gmon_start__@plt>
0000000000000650 <__gmon_start__@plt>:
0000000000000660 <__cxa_finalize@plt>:
0000000000000670 <_Z1ff@plt>:
0000000000000680 <cosf@plt>:
0000000000000690 <sinf@plt>:
 72e:   e8 2d ff ff ff          callq  660 <__cxa_finalize@plt>
 7df:   e8 8c fe ff ff          callq  670 <_Z1ff@plt>
 819:   e8 62 fe ff ff          callq  680 <cosf@plt>
 82e:   e8 5d fe ff ff          callq  690 <sinf@plt> 
```

# arrays - 如何在matlab中连接数组'n'时间？

> ID：14032248
> 
> 赞同：4
> 
> 时间：2012-12-25T16:18:00.157
> 
> 标签：arrays, matlab, concatenation

命令：

```
>> mat = magic( 4 );
>> out = cat( 3, mat, mat ); 
```

将矩阵“mat”沿第三维连接 2 次并生成一个 4×4×2 数组

如何在不使用循环的情况下“n”次生成 4×4×n 数组？

我知道这可以通过使用这样的单元格数组来实现：

```
>> out = cat( 3, cellArray{:} ); 
```

但是如何创建这个单元格数组？：

```
>> cellArray = {mat, mat, ... , mat};  % n time 
```

如何在matlab中连接数组n次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T16:22:50.157

您可以使用[`repmat`](http://www.mathworks.com/help/matlab/ref/repmat.html).

如果你想要一个 3 维矩阵：

```
mat = magic(4);
n = 3; % Number of times you want to replicate
out = repmat(mat,[1 1 n]); 
```

`out`将是一个 4x4xn 双数组。

如果您想要一个单元格数组，您可以将其作为附加步骤执行：

```
outCell = mat2cell(out,4,4,ones(1,n)); 
```

`outCell`将是一个 1x1xn 单元阵列。

# inheritance - 继承的类应该在基类的同一个cs文件中吗？

> ID：14032262
> 
> 赞同：3
> 
> 时间：2012-12-25T16:20:16.820
> 
> 标签：inheritance, base, derived-class, c#

我开始学习继承，我想知道我应该在哪里编写派生类。它应该与基类在同一个 .cs 文件中还是在另一个 .cs 文件中？对此有何共识或规范？这还重要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T16:27:50.407

就个人而言，我几乎总是将派生类放在不同的文件中。但是，如果您在代码中使用[内部类](http://msdn.microsoft.com/en-us/library/twwxww86%28v=vs.71%29.aspx)，则可以在同一个文件中。重点在这里，[`Single Responsibility Principle`](http://en.wikipedia.org/wiki/Single_responsibility_principle)。就这样；

*   阅读你的代码需要更少的努力。
*   您可以简单地同时检查不同窗口中的多个类。

还要检查[`Multiple classes in a single .cs file - good or bad?`](https://softwareengineering.stackexchange.com/questions/53088/multiple-classes-in-a-single-cs-file-good-or-bad)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:24:00.583

你可以做任何你想做的事，没关系。

例如，在 Java 中，该语言只允许您将一个类放入文件中，而一些程序员不喜欢它。在 C# 中，您可以做任何您觉得舒服的事情。

就个人而言，我通常将基类和派生类放在一个文件中，除非它们之间有很大的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:25:44.297

不管你把它放在哪里，你的代码都会在这两种情况下编译。因此，您可以按照自己的意愿组织它们。

通过谈到良好实践，我认为您应该将每个类都放在一个*.cs 文件*中，因为它更具可读性和可管理性。事实上，从长远来看，阅读和理解代码真的很困难。

但是请记住，如果您继承的类不在基类的同一个命名空间中，则必须将命名空间添加到 using 指令部分。

# python - Python IRC bot 仅管理员

> ID：14032264
> 
> 赞同：0
> 
> 时间：2012-12-25T16:20:41.857
> 
> 标签：python, bots, irc

我想问一下如何让我的 python irc bot 运行仅由指定 nick 给出的命令？

我的机器人有 Skybot - Python IRC 机器人核心，它基于它。

那是在每个命令中导入的模块

```
import inspect
import re

def _hook_add(func, add, name=''):
if not hasattr(func, '_hook'):
    func._hook = []
func._hook.append(add)

if not hasattr(func, '_filename'):
    func._filename = func.func_code.co_filename

if not hasattr(func, '_args'):
    argspec = inspect.getargspec(func)
    if name:
        n_args = len(argspec.args)
        if argspec.defaults:
            n_args -= len(argspec.defaults)
        if argspec.keywords:
            n_args -= 1
        if argspec.varargs:
            n_args -= 1
        if n_args != 1:
            err = '%ss must take 1 non-keyword argument (%s)' % (name,
                        func.__name__)
            raise ValueError(err)

    args = []
    if argspec.defaults:
        end = bool(argspec.keywords) + bool(argspec.varargs)
        args.extend(argspec.args[-len(argspec.defaults):
                    end if end else None])
    if argspec.keywords:
        args.append(0)  # means kwargs present
    func._args = args

if not hasattr(func, '_thread'):  # does function run in its own thread?
    func._thread = False

def sieve(func):
    if func.func_code.co_argcount != 5:
        raise ValueError(
                'sieves must take 5 arguments: (bot, input, func, type, args)')
    _hook_add(func, ['sieve', (func,)])
    return func

def command(arg=None, **kwargs):
    args = {}

def command_wrapper(func):
    args.setdefault('name', func.func_name)
    _hook_add(func, ['command', (func, args)], 'command')
    return func

if kwargs or not inspect.isfunction(arg):
    if arg is not None:
        args['name'] = arg
    args.update(kwargs)
    return command_wrapper
else:
    return command_wrapper(arg)

def event(arg=None, **kwargs):
    args = kwargs

def event_wrapper(func):
    args['name'] = func.func_name
    args.setdefault('events', ['*'])
    _hook_add(func, ['event', (func, args)], 'event')
    return func

if inspect.isfunction(arg):
    return event_wrapper(arg, kwargs)
else:
    if arg is not None:
        args['events'] = arg.split()
    return event_wrapper

def singlethread(func):
    func._thread = True
    return func

def regex(regex, flags=0, **kwargs):
    args = kwargs

def regex_wrapper(func):
    args['name'] = func.func_name
    args['regex'] = regex
    args['re'] = re.compile(regex, flags)
    _hook_add(func, ['regex', (func, args)], 'regex')
    return func

if inspect.isfunction(regex):
    raise ValueError("regex decorators require a regex to match against")
else:
    return regex_wrapper 
```

这就是一个简单命令的工作原理：

```
from util import hook, http

@hook.command
def calc(inp):
    '''.calc <term> google calc result'''

    h = http.get_html('http://www.google.com/search', q=inp)

    m = h.xpath('//h2[@class="r"]/text()')

    if not m:
        return "Could not calculate " + inp

    res = ' '.join(m[0].split())

    return res 
```

另外，我想让它有 2 个管理员，就像只有 2 个人能够指挥它一样。我自己会这样做，但是看着代码我不知道该怎么做：？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:33:56.333

向您的函数添加`nick`关键字参数，然后根据允许执行管理员命令的昵称列表进行检查：

```
administrators = ('nick1', 'nick2')

@hook.command
def someadmincommand(inp, nick=''):
    if nick not in administratiors:
        return 'I don't think so, {0}'.format(nick)

    # `nick` is an administrator, do your worst 
```

# php - Zend Framework 2 - 如何对自己的会话服务进行单元测试？

> ID：14032267
> 
> 赞同：3
> 
> 时间：2012-12-25T16:20:58.097
> 
> 标签：php, unit-testing, session, service, zend-framework2

我对自己的 SessionManager 服务进行单元测试时遇到问题。我在单元测试中没有错误，但会话没有在数据库中创建，我无法写入存储。这是我的代码：

会话管理器工厂：

```
namespace Admin\Service;

use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\ServiceManager\ServiceManager;
use Zend\Session\SaveHandler\DbTableGatewayOptions as SessionDbSavehandlerOptions;
use Zend\Session\SaveHandler\DbTableGateway;
use Zend\Session\Config\SessionConfig;
use Zend\Session\SessionManager;
use Zend\Db\TableGateway\TableGateway;

class SessionManagerFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        return $this;
    }

    public function setUp(ServiceManager $serviceManager)
    {
        $sessionOptions = new SessionDbSavehandlerOptions();
        $sessionOptions->setDataColumn('data')
                       ->setIdColumn('id')
                       ->setModifiedColumn('modified')
                       ->setLifetimeColumn('lifetime')
                       ->setNameColumn('name');
        $dbAdapter = $serviceManager->get('Zend\Db\Adapter\Adapter');
        $sessionTableGateway = new TableGateway('zf2_sessions', $dbAdapter);
        $sessionGateway = new DbTableGateway($sessionTableGateway, $sessionOptions);
        $config = $serviceManager->get('Configuration');
        $sessionConfig = new SessionConfig();
        $sessionConfig->setOptions($config['session']);
        $sessionManager = new SessionManager($sessionConfig);
        $sessionManager->setSaveHandler($sessionGateway);

        return $sessionManager;
    }
} 
```

`GetServiceConfig()``Module.php`命名空间中的方法`Admin`：

```
public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'Zend\Authentication\Storage\Session' => function($sm) {
                    return new StorageSession();
                },
                'AuthService' => function($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $authAdapter = new AuthAdapter($dbAdapter, 'zf2_users', 'email', 'password');

                    $authService = new AuthenticationService();
                    $authService->setAdapter($authAdapter);
                    $authService->setStorage($sm->get('Zend\Authentication\Storage\Session'));

                    return $authService;
                },
                'SessionManager' => function($serviceManager){
                    $sessionManager = new SessionManagerFactory();
                    return $sessionManager->setUp($serviceManager);
                }
            )
        );
    } 
```

以及`setUp()`来自单元测试文件的方法：

```
protected function setUp()
    {
        $bootstrap             = \Zend\Mvc\Application::init(include 'config/app.config.php');
        $this->controller      = new SignController;
        $this->request         = new Request;
        $this->routeMatch      = new RouteMatch(array('controller' => 'sign'));
        $this->event           = $bootstrap->getMvcEvent();

        // Below line should start session and storage it in Database. 
        $bootstrap->getServiceManager()->get('SessionManager')->start();
        // And this line should add test variable to default namespace of session, but doesn't - blow line is only for quick test. I will write method for test write to storage.
        Container::getDefaultManager()->test = 12;

        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
        $this->controller->setEventManager($bootstrap->getEventManager());
        $this->controller->setServiceLocator($bootstrap->getServiceManager());
    } 
```

如何测试此服务以及为什么未创建会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T05:10:55.540

我认为您误解了工厂模式。您的工厂应如下所示。据我所知，从未在任何地方调用单独的 setUp 方法。您不会在任何地方手动调用它。

```
class SessionManagerFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $sessionOptions = new SessionDbSavehandlerOptions();
        $sessionOptions->setDataColumn('data')
                       ->setIdColumn('id')
                       ->setModifiedColumn('modified')
                       ->setLifetimeColumn('lifetime')
                       ->setNameColumn('name');
        $dbAdapter = $serviceManager->get('Zend\Db\Adapter\Adapter');
        $sessionTableGateway = new TableGateway('zf2_sessions', $dbAdapter);
        $sessionGateway = new DbTableGateway($sessionTableGateway, $sessionOptions);
        $config = $serviceManager->get('Configuration');
        $sessionConfig = new SessionConfig();
        $sessionConfig->setOptions($config['session']);
        $sessionManager = new SessionManager($sessionConfig);
        $sessionManager->setSaveHandler($sessionGateway);

        return $sessionManager;

    }

} 
```

以下所有代码都对我有用。我认为您还缺少其他一些东西，但以上内容应该可以解决。查找下面的 SEE ME 评论。此外，像我在下面那样向您的 Module.php 添加一个 onBootstrap 方法，并确保`$sessionManager = $serviceManager->get( 'SessionManager' );`在您的情况下调用该方法，以便实际调用您的 SessionFactory。您已经在单元测试中的 setup() 函数中调用了它，但是如果您在模块中调用它，则不必自己手动调用它。

在 application.config 我有这个

```
'session' => array(
        'name'                => 'PHPCUSTOM_SESSID',
        'cookie_lifetime'     => 300, //1209600, //the time cookies will live on user browser
        'remember_me_seconds' => 300, //1209600 //the time session will live on server
        'gc_maxlifetime'      => 300
    )
'db' => array(
        'driver' => 'Pdo_Sqlite',
        'database' => '/tmp/testapplication.db'
    ), 
```

我的会话工厂非常相似，但我多了一行代码。寻找评论。

```
use Zend\ServiceManager\FactoryInterface,
    Zend\ServiceManager\ServiceLocatorInterface,
    Zend\Session\SessionManager,
    Zend\Session\Config\SessionConfig,
    Zend\Session\SaveHandler\DbTableGateway as SaveHandler,
    Zend\Session\SaveHandler\DbTableGatewayOptions as SaveHandlerOptions,
    Zend\Db\Adapter\Adapter,
    Zend\Db\TableGateway\TableGateway;

class SessionFactory
    implements FactoryInterface
{

    public function createService( ServiceLocatorInterface $sm )
    {
        $config = $sm->has( 'Config' ) ? $sm->get( 'Config' ) : array( );
        $config = isset( $config[ 'session' ] ) ? $config[ 'session' ] : array( );
        $sessionConfig = new SessionConfig();
        $sessionConfig->setOptions( $config );

        $dbAdapter = $sm->get( '\Zend\Db\Adapter\Adapter' );

        $sessionTableGateway = new TableGateway( 'sessions', $dbAdapter );
        $saveHandler = new SaveHandler( $sessionTableGateway, new SaveHandlerOptions() );

        $manager = new SessionManager();
        /******************************************/
        /* SEE ME : I DON'T SEE THE LINE BELOW IN YOUR FACTORY. It probably doesn't matter though. 
        /******************************************/

        $manager->setConfig( $sessionConfig );  
        $manager->setSaveHandler( $saveHandler );

        return $manager;
    } 
```

在我的一个模块中，我有以下内容

```
public function onBootstrap( EventInterface $e )
    {

        // You may not need to do this if you're doing it elsewhere in your
        // application
        /* @var $eventManager \Zend\EventManager\EventManager  */
        /* @var $e \Zend\Mvc\MvcEvent */
        $eventManager = $e->getApplication()->getEventManager();

        $serviceManager = $e->getApplication()->getServiceManager();

        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach( $eventManager );

        try
        {
            //try to connect to the database and start the session
            /* @var $sessionManager SessionManager */
            $sessionManager = $serviceManager->get( 'Session' );

            /******************************************/
            /* SEE ME : Make sure to start the session
            /******************************************/
            $sessionManager->start();
        }
        catch( \Exception $exception )
        {
            //if we couldn't connect to the session then we trigger the
            //error event
            $e->setError( Application::ERROR_EXCEPTION )
                ->setParam( 'exception', $exception );
            $eventManager->trigger( MvcEvent::EVENT_DISPATCH_ERROR, $e );
        }
    }

} 
```

这是我的 getServiceConfigMethod

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'Session' => '\My\Mvc\Service\SessionFactory',
            '\Zend\Db\Adapter\Adapter' => '\Zend\Db\Adapter\AdapterServiceFactory'
        )
    );
} 
```

我目前正在使用 sqllite，因此该表必须已经存在于您的 sqllite 文件中。

If you're using mysql, it should exist in that database too and you should change your db settings in the application.config.php file.

# asp.net - Visual Studio 2008 在设计模式下冻结

> ID：14032269
> 
> 赞同：0
> 
> 时间：2012-12-25T16:21:18.007
> 
> 标签：asp.net, css, visual-studio, visual-studio-2008

这是一个很奇怪的问题：

我的视觉工作室挂了，消耗了 25% 的 CPU，然后我必须使用任务管理器将其关闭。

当我尝试`.aspx`在`Design view`.

经过几次尝试：

我发现删除一些对`css`文件的引用可以解决问题！！！！..

但我想使用这些`css`文件。我想知道一些 css 文件如何冻结我的视觉工作室！，以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:35:28.657

我也有同样的问题。安装其他程序可能会替换 VS 正常运行所需的 dll。
此外，在我看来，最好避免设计模式。这就是我使用 WebMatrix2 的原因。但有时你真的需要 VS，在 WebMatrix 中有一个集成按钮，可以在 VS 中打开同一个网站。即使这样，也可以完全避免我一直在尝试做的 VS。
我建议您尝试使用 WebMatrix 运行该站点，看看它是否适用于您删除的 css 文件。

# java - 无法访问数据库创建语句

> ID：14032274
> 
> 赞同：1
> 
> 时间：2012-12-25T16:21:35.803
> 
> 标签：java, mysql

你好我有这个类，它包含一个 actionPerformed 来执行一个查询，它看起来像这样

```
 MysqlConnect db = new MysqlConnect();

@Override
public void actionPerformed(ActionEvent e) {

    if(e.getSource() == openKnop) {

             try {

                db.connectToAndQueryDatabase("test", "root", "root");
                System.out.println("connection established");

                Statement st = db.createStatement();
                String query = "SELECT id, name, job_id, location FROM person WHERE name = 'Tom Swift'";
                st.executeQuery(query);

                System.out.println("Selected query succesfull");

            } catch (SQLException e1) {
                e1.printStackTrace();
            }
             finally {
                 db.closeCon();
                    System.out.println("connection closed");
             }
    } 
```

和我的 MysqlConnect(); 类看起来像这样

```
 public class MysqlConnect{

    protected Connection con;

    public void connectToAndQueryDatabase(String database, String username, String password) throws SQLException {
        con = null;
            try {
                con = DriverManager.getConnection(
                                     "jdbc:mysql://localhost:3306/" + database,
                                     username,
                                     password);
            } catch (SQLException e) {
                e.printStackTrace();
            }
    }

    public void closeCon() {
        con = null;
    }
} 
```

但问题出在一线

> 语句 st = db.createStatement();

它不像我预期的那样工作。我收到一个未定义的错误..我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:28:11.223

该错误表示`db`“MysqlConnect”的引用没有`createStatement`方法。你需要一个 Connection 对象。让您`connectToAndQueryDatabase`返回 Connection 对象

```
 public Connection connectToAndQueryDatabase(String database, String username, String password) throws SQLException {
//your code

return con;
} 
```

和 ：

```
Connection conn = db.connectToAndQueryDatabase("test", "root", "root");
                System.out.println("connection established");

                Statement st = conn.createStatement();
                String query = "SELECT id, name, job_id, location FROM person WHERE name = 'Tom Swift'";
                st.executeQuery(query); 
```

# android - 初始选择未在 ListView 中突出显示？

> ID：14032285
> 
> 赞同：0
> 
> 时间：2012-12-25T16:23:48.353
> 
> 标签：android, listview, selection, highlighting

我一直在寻找几天来试图找出为什么我无法获得一个简单的 ListView 来突出显示初始选择 - 就像选择已被触摸一样。我已经阅读了有关触摸模式的讨论，但仍然找不到解决方案。

我的代码的一个简单版本是：

```
public class TestList extends Activity {

  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.listmain);  
    // Layout contains just a ListView with id list
    final ListView listView = (ListView) findViewById(R.id.list);

    String[] values = new String[] {"Android","iPhone","WindowsMobile",
        "Blackberry","WebOS","Ubuntu","Windows7","Max OS X","Linux","OS/2"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_checked, values);
    listView.setAdapter(adapter);

    listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    listView.setSelector(android.R.color.holo_orange_dark);

    listView.requestFocusFromTouch();

    listView.post(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(2);
        }
    });

  }
} 
```

生成的 ListView 应该突出显示第 2 项 (WindowsMo​​bile)，但没有。如果我触摸该项目，它会保持突出显示，如我所愿。我已经尝试了所有标准的 simple_list 布局形式，例如 setFocusable(true)、setFocusableInTouchMode(true)、setItemChecked(2,true)、performItemClick() 等函数——在 setSelection() 调用之前或之后——但都没有利用。如果我尝试在 GetView() 中设置突出显示的项目，用户选择不同项目的能力就会丢失。谁能告诉我如何在不禁用用户更改选择的能力的情况下以编程方式设置初始突出显示的项目？

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#FFCC00"
    android:dividerHeight="1dp" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:40:32.047

似乎这个问题是由于 ListView 选择器不能正常工作而引起的。例如，我发现，如果我使用具有白色背景的选择器，我的初始选择将被突出显示，但只需将颜色更改为白色以外的颜色，它就不起作用了！

于是代码改为：

```
listView.setSelector(R.drawable.selector); 
```

和 selector.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
   <item android:drawable="@android:color/holo_orange_dark" android:state_pressed="true"/>
   <item android:drawable="@android:color/holo_green_light" android:state_selected="true"/>
   <item android:drawable="@android:color/holo_green_dark" android:state_activated="true"/>
   <item android:drawable="@android:color/white" />
</selector> 
```

我尝试了各种选择器，包括用于背景的单独选择器。有些工作，有些不工作。有些在第一次加载 apk 时工作，但在再次运行应用程序时不工作。

# c# - WebBrowser 页面循环加载

> ID：14032292
> 
> 赞同：2
> 
> 时间：2012-12-25T16:24:37.613
> 
> 标签：c#

好的，我整天都在寻找这个问题。我有一个循环，我在其中加载网页并解析它们。

问题是 Application.DoEvents 和 while 循环重置每个变量和计数器 Thread.Sleep() 会影响加载网页的线程 AutoResetEvent.WaitOne 也是如此

这是我的代码

```
private void button1_Click_1(object sender, EventArgs e)
{
//some code...
for (int i = 1; i < div.Children.Count; i++)
        {
            webview.Navigate(addr);
            //wait until page is loaded
            html_code.Text += "OK!"; //do further actions
        }
} 
```

你注意到我有一个`for`循环，所以上面列出的所有方法都不起作用。我请你帮我解决我的问题

更新：我找到了解决方案。它在这里描述[https://stackoverflow.com/a/4271581/1894634](https://stackoverflow.com/a/4271581/1894634)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:37:10.763

如果只需要html响应，最好使用`WebClient.DownloadString`or`WebClient.DownloadStringAsync`方法

```
WebClient client = new WebClient ();
//client.Credentials = new NetworkCredential(username, password);
string html_code = client.DownloadString (addr); 
```

# matlab - 在matlab中需要数字输入时如何避免输入任何i和j值

> ID：14032296
> 
> 赞同：0
> 
> 时间：2012-12-25T16:25:45.903
> 
> 标签：matlab

考虑我有

> a = 输入（值 = ）；如何防止用户输入 i 和 j 作为输入值。如果 a == 任何值涉及 i 和 j 然后中断或终止并再次提示函数 a = input(value = )，我想要一个类似 tat 的代码。

之间我已经厌倦了这样的事情，但它不起作用（错误仍然出现并且它无法提示第二个定义的输入a = input（'再次输入'）），任何人都可以向我解释我的错误在哪里完成了。

```
if ~isnan(x) || ~isnumeric
    a = input('enter again');
else
    continue
end 
```

我将非常感谢所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:34:28.860

尝试以下操作以继续按用户输入符合您的条件的值。根据我的评论，这篇文章很好地说明了如何实现这一目标。它不是使用`OR`而是`AND`有一个坚定的条件验证。

```
 while ~(~isempty(a) ...
                && isnumeric(a) ...
                && isreal(a) ...
                && isfinite(a) ...
                && (a == fix(a)) ...
                && (a > 0))
        a = input('Enter the number of dice to roll: ');
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:31:30.497

试试这个

```
a = NaN;
while isnan(a) || ~isreal(a)
   a = input('value=','s');
   a = str2double(a);
end 
```

# php - 如何使用php编辑电话号码格式

> ID：14032298
> 
> 赞同：0
> 
> 时间：2012-12-25T16:26:10.343
> 
> 标签：php

> **可能重复：**
> [在 PHP 中格式化电话号码](https://stackoverflow.com/questions/4708248/formatting-phone-numbers-in-php)

我们客户的 cvs 文件包含这种格式的电话号码

```
19995554444 
```

但我们必须将它们显示为

```
(999) 555-4444 
```

从我们的数据库中检索它们后在我们的网站上，那么无论如何可以使用 php 更改其格式吗？我们不能改变我们数据库中输入的格式，我们只能改变它在网站上的显示方式。

任何脚本都可以，只要它在 php 上，我们使用 mysql 数据库来存储数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T16:27:31.660

这是一种方法。

```
$data = '+19995554444';

if(  preg_match( '/^\+\d(\d{3})(\d{3})(\d{4})$/', $data,  $matches ) )
{
    $result = '('. $matches[1] . ')' .$matches[2] . '-' . $matches[3];
    echo $result;
} 
```

链接和可能重复的内容：[在 PHP 中格式化电话号码](https://stackoverflow.com/questions/4708248/formatting-phone-numbers-in-php)

# javascript - Gmail getElementById('canvas_frame') 在 Google Chrome 中不断返回 null

> ID：14032301
> 
> 赞同：0
> 
> 时间：2012-12-25T16:26:40.690
> 
> 标签：javascript, google-chrome, null, gmail

我正在尝试为 Gmail 扩展程序编写 JavaScript 代码，当我尝试获取画布框架时，“getElementById”不断返回`null`值。

这是我正在使用的代码：

```
var doc2 = document.getElementById('canvas_frame').contentDocument; 
```

我收到以下错误：

```
"Uncaught TypeError: Cannot read property 'contentDocument' of null" 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:31:26.593

因为带有 ID 的 iframe`canvas_frame`不需要存在于 Gmail 中。

要获取对相关文档的引用，您可以先尝试获取对 的引用`iframe#canvas_frame`，如果失败，请检查当前上下文是否正确：

```
var doc2 = document.getElementById('canvas_frame');
if (doc2) {
    doc2 = doc2.contentDocument;
} else if (document.getElementById('js_frame')) {
    // If #canvas_frame does not exist, but #js_frame does, then Gmail renders
    // everything in the main (=top) frame
    doc2 = document;
} // else not Gmail's document, and doc2 === null 
```

# rest - 如果 Content-Type 与 application/json 不同，则显示 REST 文档

> ID：14032305
> 
> 赞同：0
> 
> 时间：2012-12-25T16:27:42.137
> 
> 标签：rest, restful-architecture

`Content-Type`如果客户端不是，显示特定 REST 资源的文档是否是个好主意`application/json`？我的意思是，如果开发人员试图在浏览器中获取 REST 资源 URL，他会得到类似[这样](https://developers.google.com/google-apps/calendar/v3/reference/acl/delete)的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:36:04.123

虽然这是开放的讨论，但在我看来，这将是一个坏主意。RESTful API 的全部目的是公开您的应用程序接口供其他开发人员使用。一些开发人员查看 http 标头以确定您的 REST API 的某些路由是否存在，无论内容类型如何。如果我要求文本/纯文本，如果您没有，我希望收到 404/NotFound 而不是带有 200/OK 的文档。虽然，我认为它可能对使用浏览器进行手动 API 测试很有用。

# c# - 如何检查列表中是否已存在文件？

> ID：14032308
> 
> 赞同：0
> 
> 时间：2012-12-25T16:27:53.247
> 
> 标签：c#

这是代码：

```
for (int i = 0; i < lightningsRegions.Count; i++)
{
    if (!pdf1.Lightnings.Contains(lightningsRegions[i]))
    {
        pdf1.Lightnings.Add(lightningsRegions[i]);
        break;
    }
} 
```

Lists LightningsRegions 和 Lightnings 都是类型。我想检查Lightnings中是否已经存在LightningsRegions，不要再次添加。但是我在以下位置使用了断点：pdf1.Lightnings.Add(lightningsRegions[i]); 它一直在那里并添加我选择的相同索引。

在我的程序中，我有一个新表格，我可以从一系列数字中进行选择，例如我在新表格上看到：Lightning 0 Length 32 [41 - 73] 我点击它，它会进入断点并添加它一次到闪电名单。

所以现在在索引 [0] 的闪电列表中我有：“闪电 0 长度 32 [41 - 73]”现在如果在同一个菜单中我再次点击这个闪电 0 长度 32 [41 - 73] 它不应该去和将其添加到闪电列表中，但确实如此。

在这个新的表单菜单中，我有很多这样的字符串：Lightning 0 Length 32 [41 - 73] 但我想确保如果我点击它两次它只会添加一次，如果我点击另一个不是同样它会添加它。

但是由于某种原因，现在当我单击它两次时，它会到达相同的断点并再次添加它。

更新：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            if (listBox1.SelectedItem != null)
            {
                item = listBox1.SelectedItem.ToString();
                this.f1.PlayLightnings();
                f1.pdftoolsmenu();
            }
        } 
```

这是我选择项目的新表单中的 listBox1。所以我想做到这一点，如果我通过单击它或在同一个项目上移动它来选择它，它不会将它添加到闪电列表中，而不是同一个项目，而不是任何其他项目！只有当我移动或单击不在闪电列表中的项目时，才添加它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:30:45.663

您可以使用[**Enumerable.Any**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)

```
var result = pdf1.Lightnings.Any(c=>lightningsRegions.Contains(c)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:32:36.377

使用 Contains 时，Equality 用于确定列表是否确实包含您正在检查的实例，但如果您比较的是引用类型而不是值类型，则 Equality 的行为不同。

因此，不要使用 Contains，而是尝试使用 Linq 扩展方法 Any()，并在作为参数给出的委托方法中放置与您相关的字段。

* * *

要验证我所说的确实正确，您可以在调试时检查，您会看到即使列表已经包含您正在搜索的代码，您的代码仍将添加一个新实例，该实例对您来说是重复的，但随着实例的进行，它们除非它们指向内存中的同一区域，否则它们不相等。

* * *

因此，如果对您而言，不添加两次 LightningRegion.Text 例如 ("Length 32 [41 - 73]") 是相关的，那么在 If 子句中检查：

```
if (!pdf1.Lightnings.Any(lightningRegion => lightningRegion.Text == lightningRegions[i].Text)
{
} 
```

# ruby-on-rails - Rails，仅在使用 --debugger 时使用初始化程序启动远程调试器

> ID：14032313
> 
> 赞同：1
> 
> 时间：2012-12-25T16:28:50.460
> 
> 标签：ruby-on-rails, debugging

我希望能够使用 rails 远程调试器，我真的很喜欢在 TTY 上使用单独的控制台来调试我的应用程序的想法。现在我有一个初始化器可以做到这一点：

```
# debugger.rb

Debugger.wait_connection = true
Debugger.start_remote 
```

现在的问题是我不知道如何仅`--debugger`在服务器启动时发送参数时才运行此初始化程序？就像我如何从我的应用程序内部评估它一样`true`：

```
if '--debugger'
  Debugger.wait_connection = true
  Debugger.start_remote
end 
```

否则，我必须在应用程序启动时启动删除控制台，即使对于 rake 任务等也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:41:50.183

你可以这样做：

```
if ARGV.include?('--debugger') || ARGV.include?('-u')
  Debugger.wait_connection = true
  Debugger.start_remote
end 
```

# design-patterns - 装饰器UML解释组成

> ID：14032314
> 
> 赞同：-1
> 
> 时间：2012-12-25T16:28:51.963
> 
> 标签：design-patterns, uml, decorator, composition

我已经看过这个问题[在此处输入链接描述](https://stackoverflow.com/questions/1773605/understanding-uml-of-dofactory-design-pattern-decorator)

但是我似乎无法找到为什么两个对象之间存在组合的答案

uml 的链接在这里：

[在此处输入链接描述](http://www.dofactory.com/Patterns/PatternDecorator.aspx)

谁能给我解释一下为什么会有作文？或者为什么除了概括之外还有其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:25:41.663

因为装饰器模式的重点是装饰一个包含的组件：

```
public interface Logger {
    void print(String message);
}

public class ConsoleLogger implements Logger {
    @Override
    public void print(String message) {
        System.out.println(message);
    }
}

public class FileLogger implements Logger {
    @Override
    public void print(String message) {
        // TODO write the message to a file
    }
}

public WithCurrentDateLoggerDecorator implements Logger {
    private Logger delegate;

    public WithCurrentDateLoggerDecorator(Logger delegate) {
        this.delegate = delegate;
    }

    @Override
    public void print(String message) {
        message = new Date() + " - " + message;
        delegate.print(message);
    }
} 
```

使用上面的方法，装饰器可以在你使用任何其他记录器的任何地方使用，并且装饰器可以装饰任何类型的记录器（控制台、文件、电子邮件、套接字等）。它不关心具体记录器的作用（打印到控制台或打印到文件）。它所做的只是装饰具体的记录器，方法是在让委托记录器打印之前将当前日期添加到消息中。

如果您必须在没有组合（或更确切地说是委托）的情况下执行此操作，则必须创建 a`WithCurrentDateFileLogger`和 a `WithCurrentDateConsoleLogger`（为每个具体记录器添加一个子类）。由于组合的数量很大，所有其他装饰或具体记录器类型都会使要创建的类数量爆炸式增长。

# mysql - 子选择和分组依据

> ID：14032319
> 
> 赞同：3
> 
> 时间：2012-12-25T16:29:47.690
> 
> 标签：mysql, subquery

我有两张桌子：

主要：id_main，field1，过滤器

main_logs（5000 万行）：auto inc、id_main、path

我正在寻找以下结果：id_main, field1, most common path

我尝试了以下查询：

```
select id_main, 
  field1, 
  (select path, count(*) as cpt 
   from main_log 
   where main_log.id_main=main.id_main group by path order by cpt desc limit 1) 
from main 
where filter in (1,3,5); 
```

Mysql 返回：操作数应包含 1 列

如果我删除路径，结果是正确的，但我错过了路径值。

```
select id_main, 
  field1, 
  (select path, count(*) as cpt 
   from main_log 
   where main_log.id_main=main.id_main group by path order by cpt desc limit 1) 
from main 
where filter in (1,3,5); 
```

我不需要 count(*) 的结果，但我需要它用于“order by”

如何编写此查询以获取结果？谢谢

**主要的**

```
id_main     | field1    | filter
1       | red       | 1
2       | blue      | 3
3       | pink      | 1 
```

**主日志**

```
autoinc     | id_main   | path
1       | 1         | home1
2       | 1         | home2
3       | 1         | home2
4       | 2         | house2
5       | 2         | house7
6       | 2         | house7
7       | 3         | casee 
```

**预期结果**

```
id_main     | fields1   | most common path
1       | red       | home2
2       | blue      | house7
3       | pink      | casee 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:17:24.750

您需要使用：

```
SELECT id_main, field, 
    (SELECT path 
    FROM main_logs 
    WHERE id_main=main.id_main 
    GROUP BY path 
    ORDER BY count(path) DESC 
    LIMIT 1) AS most 
FROM main 
WHERE filter IN (1,3,5); 
```

经测试，可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:47:19.647

尝试这个：

```
SELECT m.id_main, m.field1, A.path 
FROM main m 
INNER JOIN (SELECT * 
            FROM (SELECT id_main, path, COUNT(*) cnt
                  FROM main_log ml  
                  WHERE EXISTS (SELECT * FROM main m WHERE ml.id_main = m.id_main AND filter IN (1,3,5))
                  GROUP BY id_main, path 
                  ORDER BY cnt DESC
                  ) AS A 
            GROUP BY id_main
            ) AS A ON m.id_main = A.id_main; 
```

**旧代码忽略**

```
SELECT m.id_main, m.field1, A.path 
FROM main m 
INNER JOIN (SELECT * FROM (SELECT id_main, path, count(*) cnt
            FROM main_log 
            GROUP BY id_main, path 
            ORDER BY cnt DESC) GROUP BY id_main) as A on m.id_main = A.id_main 
WHERE filter IN (1,3,5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:47:57.400

您在子查询中返回两列。你只需要退回一个。

样本数据：

```
ID_MAIN     FIELD1  FILTER
1   h   1
2   x   2
3   y   3

AUTOINC     ID_MAIN     PATH
11  1   abc
12  2   abd
13  1   xyz
14  1   ghf
15  2   xyz 
```

试试看：[SQLFIDDLE](http://sqlfiddle.com/#!2/8a491/4)

询问：

```
select id_main, 
  field1, 
  (select count(id_main) as cpt 
   from main_logs 
   where main_logs.id_main=main.id_main 
   group by path 
   order by cpt desc limit 1) as CPTs
from main 
where filter in (1,3,5); 
```

结果：

```
ID_MAIN     FIELD1  CPTs
1       h   1
3       y   (null) 
```

## 编辑为每个 ID 提供每个路径的最大计数

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/d12b1/1)

绝对不是最优雅的查询。连接和子查询也可能导致相当荒谬的性能滞后。

遵循您的示例数据，除了 table `main`， id = 3，pink filter = 5。因此它符合您的`filter`标准。但是，即使没有该条件，以下查询似乎也适用于逻辑。

询问：

```
select a.id, b.path, a.mx
from
(select x.id, x.path, max(x.ct) as mx
from (
select m.id_main as id, ml.path, 
count(ml.id_main) as ct
from main m
left join 
main_logs ml
on ml.id_main = m.id_main
group by ml.path) as x
group by x.id) as a
inner join 
(select m.id_main as id, m.filter, ml.path, 
count(ml.id_main) as ct
from main m
left join 
main_logs ml
on ml.id_main = m.id_main
group by ml.path) as b
on a.id = b.id
and a.mx = b.ct
where b.filter in (1,2,3)
order by a.mx desc
; 
```

结果：

```
ID  PATH    MX
1   home2   2
2   house7  2
3   casee   1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T16:52:11.307

```
SELECT 
    m.id_main,
    m.field1,
    ml.path,
    IFNULL(ml.Count,0)
FROM main as m
LEFT JOIN (
           SELECT
                 id_main, 
                 path,
                 COUNT(path) as Count
           FROM main_logs
           GROUP BY id_main
          ) as ml on ml.id_main = m.id_main 
```

# jquery - 不选择表单中的第一个选项 - 选择而不更改为另一个选项，然后改回

> ID：14032320
> 
> 赞同：0
> 
> 时间：2012-12-25T16:30:17.143
> 
> 标签：jquery, forms

我有这个表格。显示页面时似乎选择了第一个选项，但是当我提交时什么也没发生。如果我更改为选项二或三，然后返回选项一，那么当我推送提交时页面会重定向。

任何建议如何解决这个小“错误”

```
<form method="post" action=javascript:action; >
<select class="price" onChange="this.form.action=this.options[this.selectedIndex].value;">
<option selected="selected" value="cart.php?a=add&pid=72">Kr. 999.00,- årlig</option>
<option value="cart.php?a=add&pid=73">Kr. 999.00,- toårig</option>
<option value="cart.php?a=add&pid=74">Kr. 999.00,- treårig</option>
</select>
<input type="submit" value="Bestill" class="buy-now" /> 
```

现在我在下面显示了这段代码，但它没有重定向到新的 cart.php 页面。

这是完整的代码，jquery被加载到头文件中。

```
<script type="text/javascript">
$(document).ready(function(){
$("#cmbPrice").change(function(){
fnChangeFormAction();
});
fnChangeFormAction();
});
function fnChangeFormAction(){
var action = $("#cmbPrice").val();
$("#frmMyForm").attr("action", action);
}
</script>

<form method="post" name="frmMyForm" id="frmMyForm" action='' >
<select class="price" name="cmbPrice" id="cmbPrice">
<option selected="selected" value="cart.php?a=add&amp;pid=72">Kr. 700.00,- årlig</option>
<option value="cart.php?a=add&amp;pid=73">Kr. 1400.00,- toårig</option>
<option value="cart.php?a=add&amp;pid=74">Kr. 1800.00,- treårig</option>
</select>
<input type="submit" value="Bestill" class="buy-now" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:25:14.047

当然，既然你想使用`jquery`我假设你已经包含了这个`jquery`库。如果没有，您可以在“head”部分添加这一行并使用最新版本`jquery`：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

您可以使用`googleapis`托管版本，也可以将其托管`jquery`在您自己的网站上（不推荐）

在您的头部部分添加以下代码：

```
<script type="text/javascript">
$(document).ready(function(){
  $("#cmbPrice").change(function(){
    fnChangeFormAction();
  });

  fnChangeFormAction();
});

function fnChangeFormAction(){
  var action = $("#cmbPrice").val();
  $("#frmMyForm").attr("action", action);
}
</script> 
```

然后`form`像这样改变你：

```
<form method="post" name="frmMyForm" id="frmMyForm" action="">
<select class="price" name="cmbPrice" id="cmbPrice">
<option selected="selected" value="cart.php?a=add&pid=72">Kr. 999.00,- årlig</option>
<option value="cart.php?a=add&pid=73">Kr. 999.00,- toårig</option>
<option value="cart.php?a=add&pid=74">Kr. 999.00,- treårig</option>
</select>
<input type="submit" value="Bestill" class="buy-now" />
</form> 
```

而已...

* * *

## 更新 - 简单的完整代码...

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $("#cmbPrice").change(function(){
    fnChangeFormAction();
    });

    fnChangeFormAction();
  });

  function fnChangeFormAction(){
    var action = $("#cmbPrice").val();
    $("#frmMyForm").attr("action", action);
  }
</script>
</head>

<body>
<form method="post" name="frmMyForm" id="frmMyForm" action='' >
<select class="price" name="cmbPrice" id="cmbPrice">
<option selected="selected" value="cart.php?a=add&amp;pid=72">Kr. 700.00,- årlig</option>
<option value="cart.php?a=add&amp;pid=73">Kr. 1400.00,- toårig</option>
<option value="cart.php?a=add&amp;pid=74">Kr. 1800.00,- treårig</option>
</select>
<input type="submit" value="Bestill" class="buy-now" />
</form>
</body>
</html> 
```

# node.js - Mongoose For Node.js 错误对象没有方法验证

> ID：14032325
> 
> 赞同：0
> 
> 时间：2012-12-25T16:31:15.007
> 
> 标签：node.js, mongodb, express, mongoose

我正在使用 node/express/mongoose 制作博客，但我不断收到此错误：

> /Users/Ari/Sites/Amateur Dev/node_modules/mongoose/lib/schema/documentarray.js:94 doc.validate(function (err) { ^ TypeError: Object # has no method 'validate' at DocumentArray.doValidate (/Users /Ari/Sites/Amateur Dev/node_modules/mongoose/lib/schema/documentarray.js:94:13) 在 DocumentArray.doValidate (/Users/Ari/Sites/Amateur Dev/node_modules/mongoose/lib/schema/documentarray.js :102:9) 在 DocumentArray.SchemaType.doValidate (/Users/Ari/Sites/Amateur Dev/node_modules/mongoose/lib/schematype.js:601:22) 在 DocumentArray.doValidate (/Users/Ari/Sites/Amateur Dev /node_modules/mongoose/lib/schema/documentarray.js:73:35) 在 Document.validate.err (/Users/Ari/Sites/Amateur Dev/node_modules/mongoose/lib/document.js:911:9) 在进程.startup.processNextTick.process._tickCallback (node.js:244:9)

我已经尝试卸载猫鼬，用“mongoose”更改我的package.json：“git://github.com/LearnBoost/mongoose.git”并这样做`npm install`，但它仍然会发生。

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T16:43:03.287

首先猜测是您的架构定义了一个子文档数组，而 mongoose 期望该数组始终只包含 mongoose 模型实例，但是您的代码在其中放置了其他内容，可能是一些普通的 javascript 对象而不是包含 _doc 属性的 mongoose 模型实例表示底层 mongodb 文档。

您只需要`"mongoose": "3.5.x"`输入您的 package.json，而不是完整的 URL。

# django - Django 扩展对象管理器引发“NoneType”对象没有属性“_meta”

> ID：14032329
> 
> 赞同：3
> 
> 时间：2012-12-25T16:31:39.283
> 
> 标签：django, model, django-custom-manager

我正在尝试创建一个自定义对象管理器，如[https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets所述](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)

我正在做这样的事情：

```
# the model, say Alpha
class MyManager(Manager):
    pass
Alpha.objects = MyManager() 
```

我认为不应该做任何事情。但是只要设置这个就可以了`'NoneType' object has no attribute '_meta'`。这怎么可能？我想我正在密切关注这个例子。

我检查并`Alpha.objects`在覆盖之前与之后的类型相同`svGroup.objects.__class__.__bases__[0]()`（因此它确实是子类的实例）。

我有一种感觉，这将是我更愚蠢的问题之一，但我无法弄清楚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:57:37.130

It should be inside the model definition. Because it's handling with the __new__ method of model's metaclass.

```
class Alpha(models.Model):
    ...
    objects = MyManager() 
```

# ios - UIPanGestureRecognizer 最大化和最小化 UIView

> ID：14032330
> 
> 赞同：2
> 
> 时间：2012-12-25T16:32:00.407
> 
> 标签：ios, uiview, uipangesturerecognizer

为了最小化和最大化 UIView，我使用了 UIPangestureRecognizer。代码如下：

```
-(void) pannningMyView:(UIPanGestureRecognizer*) panGesture{
    CGPoint newPoint=[panGesture translationInView:self.view];
    CGPoint oldPoint=self.myPanningView.frame.origin;
    CGFloat dx=newPoint.x;
    CGFloat dy=newPoint.y;
    if(dx>0){
        CGRect oldRect=self.myPanningView.frame;
        oldRect.size.width+=dx;
        oldRect.size.height+=dy;
        self.myPanningView.frame=oldRect;
    }
} 
```

但是，过渡非常快，以至于我移动了几个像素，它覆盖了整个屏幕。我无法弄清楚我的代码需要进行哪些更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:54:29.120

问题是您的翻译是累积的，因为它`translationInView`是从连续手势的开头开始的，但是您正在将翻译添加到当前帧，而不是原始帧。这可以通过检查手势状态来解决，如果您处于手势的开头，则保存原始帧，然后在手势进行时将其用作未来翻译的基础。

```
-(void) panningMyView:(UIPanGestureRecognizer*) panGesture
{
    static CGRect originalFrame; // or you could make this a non-static class ivar

    if (panGesture.state == UIGestureRecognizerStateBegan)
    {
        originalFrame = self.myPanningView.frame;
    }
    else if (panGesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translation = [panGesture translationInView:self.view];
        if (translation.x > 0) {
            CGRect newFrame = originalFrame;
            newFrame.size.width += translation.x;
            newFrame.size.height += translation.y;
            self.myPanningView.frame = newFrame;
        }
    }
} 
```

请注意，我摆脱了它，`oldPoint`因为您似乎没有使用它。我也重命名为`newPoint`，`translation`因为它不是屏幕上的一个点，而是衡量您的手指在屏幕上移动（或平移）多少的量度。我也重命名`oldRect`为`newFrame`，因为我认为它更准确地捕捉到了它是什么。

本质上，我试图保留您的例程的逻辑，但只是澄清您的逻辑和变量名称。我原以为您可能需要其他`else if`原因，检查结束或取消的手势，使用动画来完成或适当地反转手势，但我没有解决这个问题，因为您没有在原始问题中引用此问题。

无论如何，我希望你能明白我们在这里做什么。我们正在保存原始帧并将翻译应用于该帧，而不是将其应用于当前帧。

* * *

**更新：**

在后续问题中，您询问了如何澄清动画。您可能会执行以下操作：

```
-(void) panningMyView:(UIPanGestureRecognizer*) panGesture
{
    static CGRect originalFrame; // or you could make this a non-static class ivar
    CGPoint translation = [panGesture translationInView:self.view];

    if (panGesture.state == UIGestureRecognizerStateBegan)
    {
        originalFrame = self.myPanningView.frame;
    }
    else if (panGesture.state == UIGestureRecognizerStateChanged)
    {
        if (translation.x > 0) {
            CGRect newFrame = originalFrame;
            newFrame.size.width += translation.x;
            newFrame.size.height += translation.y;
            self.myPanningView.frame = newFrame;
        }
    }
    else if (panGesture.state == UIGestureRecognizerStateEnded ||
             panGesture.state == UIGestureRecognizerStateCancelled ||
             panGesture.state == UIGestureRecognizerStateFailed)
    {
        CGRect finalFrame = originalFrame;

        // if we've gone more than half way, move it all the way, 
        // otherwise return it to the original frame

        if (translation.x > (self.view.frame.size.width / 2.0))
        {
            finalFrame.size.width += self.view.frame.size.width;
            finalFrame.size.height += self.view.frame.size.height;
        }

        [UIView animateWithDuration:0.5
                              delay:0.0
                            options:UIViewAnimationOptionCurveEaseOut
                         animations:^{
                                self.myPanningView.frame = finalFrame;
                             }
                         completion:nil];
    }
} 
```

# android - Android：从右到左平铺可绘制

> ID：14032337
> 
> 赞同：1
> 
> 时间：2012-12-25T16:32:56.753
> 
> 标签：android, xml, imageview, drawable

如何制作一个包含两个可绘制对象的可绘制对象：一个在 y 轴上重复，另一个在右端“完成”它？

在我的应用程序中，我这样使用它：

```
<bitmap  xmlns:android="http://schemas.android.com/apk/res/android"
     android:src="@drawable/logo_pattern_file"
     android:tileMode="repeat"
     android:antialias="true"
     android:dither="false"
     android:filter="false">
 </bitmap> 
```

旁边是带有“结束部分”的 ImageView。问题是，平铺部分从左到右绘制表格并且“裁剪”不在正确的位置，弄乱了整个标志。

这是我得到的：

（新用户不能发图片，图片链接：http: [//i.imgur.com/HLqTx.jpg](http://i.imgur.com/HLqTx.jpg)）

我应该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T17:24:09.513

![旋转图案](../Images/76cc511ca5132a4f3faf4bddf0bc1671.png)

可以通过将重复位图嵌套到标签中来旋转重复位图（从左到右，反之亦然）来实现这一点`rotate`，就像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="180"
    android:pivotX="50%"
    android:pivotY="50%" >

    <bitmap
        android:src="@drawable/core"
        android:tileMode="repeat" />

</rotate> 
```

你的布局可能是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/repeat_core" />

    <ImageView
        android:layout_width="95px"
        android:layout_height="match_parent"
        android:src="@drawable/end" />

</LinearLayout> 
```

# flash - Flash CS6 嵌入字体不可见

> ID：14032349
> 
> 赞同：0
> 
> 时间：2012-12-25T16:35:28.840
> 
> 标签：flash, fonts, embed

我有几乎相同的问题，例如[Flash CS6 嵌入字体不可见](https://stackoverflow.com/questions/13909140/flash-cs6-embeded-font-not-visible)，但我试图嵌入 Arial（就像之前数百万次一样），当我发布电影时，字体没有出现。在 C:\Windows\Fonts 中，Arial 字体系列看起来像双倍（参见屏幕截图）[http://tinypic.com/r/2lv1l6p/6](http://tinypic.com/r/2lv1l6p/6)，我认为 Flash 不能因此将文件放入 swf。我删除了 C:\Windows\System32\FNTCACHE.DAT 问题仍然存在。好吧，当我尝试删除其中一个重复的快捷方式时，它会同时删除它们，重新安装字体系列并再次相同...有什么想法吗？我也使用了这些解决方案[http://forums.adobe.com/thread/1100138](http://forums.adobe.com/thread/1100138)但没有运气。我的系统是 Win7 64 位，所有最新更新。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:46:45.763

“最新更新”[可能是您的问题](http://forums.adobe.com/message/4926573#4926573)（即使我没有或听说过 Arial 等“普通 Jane”字体的问题）。您需要回滚 MS12-078。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:23:20.110

删除最后一个 Windows 安全更新 KB2753842 之后，一切都很好。

# php - 获取访问者在 PHP 中访问的页面

> ID：14032350
> 
> 赞同：2
> 
> 时间：2012-12-25T16:35:29.493
> 
> 标签：php

我试图获取访问者访问的页面：

这是我的代码：

```
$url = $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
$urlcomplete = $url;
$url = explode(".com/",$url);
$urlcount = count($url);
$newurl = '';
for ($start = 1; $start < $urlcount; $start++) {
    if ($newurl != '') {
        $newurl .= '.com/'; 
    }
    $newurl .= $url[$start];    
}
$url = explode('/',$newurl);
$urlcount = explode('?',end($url));
$url[count($url) - 1] = $urlcount[0];
$urlcount = count($url); 
```

通过使用上面的代码，所有子页面都将存储在 $url 中。

[https://stackoverflow.com/questions/ask](https://stackoverflow.com/questions/ask)

```
$url[0] = 'questions'
$url[1] = 'ask' 
```

只是想问一下，这是好方法，还是有其他更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:45:25.073

首先添加`SERVER_NAME`到`REQUEST_URI`，然后尝试将其拆分，是没有意义的。这应该是一个更简单的解决方案：

```
# first, split off the query string, if any:
list( $path ) = explode( '?', $_SERVER['REQUEST_URI'], 2 );

# then just split the URL path into its components:
$url = explode( '/', ltrim( $path, '/' ) ); 
```

从路径中`ltrim`删除任何前导斜杠，因此`$url[0]`不会为空。

`$url`请注意，如果路径以斜杠结尾，则数组末尾可能仍有一个空元素。您*可以*`trim`通过使用而不是来摆脱它`ltrim`，但您可能不想这样做，因为尾部斜杠对于解析相对 URL 之类的事情很重要。

# actionscript-3 - AS3 为什么 RTMFP android 不能连接到 android？

> ID：14032356
> 
> 赞同：1
> 
> 时间：2012-12-25T16:36:08.707
> 
> 标签：actionscript-3, p2p, rtmfp

我正在与 AS3 Flash CS6 中的 netconnection 建立连接。当我从我的 PC 测试 swf 到我的 Android 上的应用程序时，它工作正常。但是当我在 2 台 android 设备上安装应用程序时，它们无法连接。这是为什么？如果我用我的电脑和两个安卓设备进行测试，它也可以工作。如何使其仅适用于两个 android 设备？

这是我正在使用的代码：

```
var nc:NetConnection;
var group:NetGroup;
nc = new NetConnection();
nc.addEventListener(NetStatusEvent.NET_STATUS, netStatus);
nc.connect("rtmfp:");       

function netStatus(event:NetStatusEvent):void{

switch(event.info.code){

    // The connection attempt succeeded
    case "NetConnection.Connect.Success":
        setupGroup();

        break;

    // The NetGroup is successfully constructed and authorized to function.
    case "NetGroup.Connect.Success":

        break;

    // A new group posting is received
    case "NetGroup.Posting.Notify":

        trace("notify");

        break;

      case "NetGroup.SendTo.Notify":
       trace("notify received");

      break;

    // user joins?
    case "NetGroup.Neighbor.Connect":

    break;
}
}

// Create a group 
function setupGroup():void {
// Create a new Group Specifier object
var groupspec:GroupSpecifier = new GroupSpecifier("test");

// Enable posting
groupspec.postingEnabled = true;

//groupspec.routingEnabled=true;

// Specifies whether information about group membership can be exchanged on IP multicast sockets
groupspec.ipMulticastMemberUpdatesEnabled = true;

// Causes the associated NetStream or NetGroup to join the specified IP multicast group and listen to the specified UDP port.
groupspec.addIPMulticastAddress("225.225.0.1:30000");

// Constructs a NetGroup on the specified NetConnection object and joins it to the group specified by groupspec.
group = new NetGroup(nc,groupspec.groupspecWithAuthorizations());

// Set the NET_STATUS event listener
group.addEventListener(NetStatusEvent.NET_STATUS,netStatus);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T23:20:21.523

我建议在你的 switch 中添加一个 default case 语句。它可能会或可能不会对正在发生的事情有所了解：

```
switch (event.info.code)
{
    case "NetConnection.Connect.Success":
        // etc... Not showing orig code
        break;
    // rest of the case statements here
    // then lastly add this:
    default:
        trace(event.info.code);
} 
```

# objective-c - 试图让 2 个动画同时工作

> ID：14032361
> 
> 赞同：2
> 
> 时间：2012-12-25T16:36:59.907
> 
> 标签：objective-c, ios, uiviewanimation, caanimation

在下一个代码中，有 2 个方法被一个接一个地调用。第一个使中心按钮消失，第二个使标签栏消失。他们分别工作正常。我的问题是，当我尝试一个接一个地调用它们时，它们`hideCenterButton`没有动画。而不是滚动到屏幕的左侧，按钮只是消失了。

```
-(void)hideCenterButton:(BOOL)animated
{
    if(animated){

        [UIView animateWithDuration:0.3
                              delay:0.0f
                            options:UIViewAnimationCurveLinear
                         animations:^{
                             CGRect frame = self.centerButton.frame;
                             frame.origin.x = -100;
                             self.centerButton.frame = frame;
                         }
                         completion:^(BOOL finished){
                         }];
    }} 
```

...

```
- (void)hideTabBar:(UITabBarController *) tabbarcontroller
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        //[UIView setAnimationDelay:1];
        for(UIView *view in tabbarcontroller.view.subviews)
        {
            if([view isKindOfClass:[UITabBar class]] || [view isKindOfClass:[UIImageView class]])
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
            }
            else
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
            }
        }

        [UIView commitAnimations];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:44:07.443

您可能遇到了基于 UIView 的动画的某种限制。您可能会尝试的几件事是：

1.  `animateWithDuration`也用于：`hideTabBar:`确实，`beginAnimation`是动画 UIView 的旧方法；animateWithDuration 更新（iOS4 引入）；通过在机器人案例中使用相同的动画调用，您可能会获得更好的结果；这应该是直截了当的；这应该工作：

    ```
     - (void)hideTabBar:(UITabBarController *) tabbarcontroller
      {
    [UIView animateWithDuration:0.3
                          delay:0.0f
                        options:UIViewAnimationCurveLinear
                     animations:^{
        for(UIView *view in tabbarcontroller.view.subviews)
        {
        if([view isKindOfClass:[UITabBar class]] || [view isKindOfClass:[UIImageView class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        }
        else
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }
       }
                     }
                     completion:nil];
    } 
    ```

2.  使用 Core Animation 重写你的动画：这是一个稍微低级的机制，但它可以让你在性能方面获得最好的结果；例如，您可以如何重写第一个动画：

首先你需要提供一个回调：

```
- (void)animationDidStop:(CABasicAnimation*)anim finished:(BOOL)flag {
       CALayer* layer = [anim valueForKey:@"animationLayer"];
       layer.position = [anim.toValue CGPointValue];
} 
```

然后你可以像这样为你的按钮设置动画：

```
 CABasicAnimation* move = [CABasicAnimation animationWithKeyPath:@"position"];
    CGPoint pos = self.centerButton.center;
    pos.x -= 100;
    move.toValue = [NSValue valueWithCGPoint:pos];
    move.duration = 0.3;
    move.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    move.removedOnCompletion = NO;
    move.fillMode = kCAFillModeForwards;
    move.autoreverses = NO;
    move.delegate = self;
    [move setValue:self.centerButton.layer forKey:@"animationLayer"];
    [self.centerButton.layer addAnimation:move forKey:@"buttonPosition"]; 
```

使用 Core Animation，您最终会编写更多代码，并且您将需要一些时间来学习 Core Animation 基础知识，但这是我可以解决我在两个相关动画中遇到的类似问题的唯一方法。

希望能帮助到你。

# entity-framework - EntityFramwork 为 MEF 生成接口

> ID：14032362
> 
> 赞同：0
> 
> 时间：2012-12-25T16:37:08.900
> 
> 标签：entity-framework, c#-4.0, interface, mef, edmx

我正在玩基于数据库表构建一些构建块。

所以我创建了一个基于 EDMX“模板”的 UsersManager 和一个 ValidationManager。

我真的很想将这两个组件与 MEF 松散耦合。但因此我需要创建 ValidationManager 中公开的实体对象的接口。有没有一种简单的方法来创建这些接口，这样我仍然可以使用 EDMX 生成的类？

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:06:47.833

使用带有`Product`表的数据库示例，这就是您要实现的目标....

![在此处输入图像描述](../Images/094cd718ba112f9172244b5ea38badff.png)

但仍使用生成的实体类（使用标准的 EF 生成器或某种其他 POCO 生成器）。

我不确定 - 正如你提到的 MEF，我认为它没有直接关系。

生成的实体类是部分类，它允许您扩展生成的类，在这种情况下，您希望扩展该类以实现接口。

假设将使用以下接口来引入抽象层...

```
 public interface IEntity {
        public bool IsDeleted { get; set; }
    } 
```

使用扩展类创建一个新的类文件`Product`...

```
 public partial class Product : IEntity {
        public bool IsDeleted {
            get {
                throw new NotImplementedException();
            }
            set {
                throw new NotImplementedException();
            }
        }
    } 
```

您现在已经`Product`使用部分类自定义代码扩展了生成的实体 - 您可以通过 EF 正常使用它。

现在，您的`UserManager`和`ValidationManager`类不再对 . 进行硬引用`Product`，而是仅对`IEntity`.

如果我不理解这个问题，请提供更多详细信息，说明您到底想要做什么。

# matlab - 使用matlab提取数据位并将其嵌入到图像中

> ID：14032365
> 
> 赞同：0
> 
> 时间：2012-12-25T16:37:23.640
> 
> 标签：matlab

我有一个问题想在这里提出。我的问题是我想将每个字符的 2 LSB 嵌入到 2 * 2 矩阵中并连续嵌入，直到数据全部成功嵌入。但现在我做不到了。非常感谢您的帮助。这是我的部分代码。

```
fid = fopen('test.txt'); %open the text file
readText = fread(fid);
fclose(fid); %close the file function
char_in_bit = uint8(readText);
ascii_binary = dec2bin(char_in_bit,7);
size_char = size(char_in_bit); %determine the length of the text file
display(char_in_bit);
display(size_char);

display(BlockRONI);
display(ascii_binary);

for a=1 : size(ascii_binary,1)
    for b=1:6
        if blocksize==2
        n=1;
        for r=1:2
            for c=1:2
                block(r,c)=bitset(block(r,c),1,char_in_bit(n));
                n=n+1;
                block(r,c)=bitset(block(r,c),2,char_in_bit(n));
                %display(block(r,c));
            end
        end
        end
    end
    block(r,c) = bitset(block(r,c), 7, char_in_bit(n));
end

watermarked_image(y2:y2+blocksize-1, x2:x2+blocksize-1)=block;
watermarked_image_int=uint8(watermarked_image);
imwrite(watermarked_image_int,'watermarked.jpg'); 
```

# javascript - JavaScript 对象需要封装吗？

> ID：14032370
> 
> 赞同：1
> 
> 时间：2012-12-25T16:38:33.253
> 
> 标签：javascript, node.js, mongodb, data-modeling

我正在开发一个 node.js 应用程序。寻找创建数据模型的方法。

发送到客户端/从客户端发送的数据是 JSON。由于数据库是 MongoDb，因此进出数据库的数据是 JSON。

我是 JS 新手，我可以找到很多专门用于创建封装对象的 js 库。还需要吗？

仅将模型定义为简单的 js 对象并在必要时使用基于原型的继承可能会产生什么后果？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:05:13.600

> 仅将模型定义为简单的 js 对象并在必要时使用基于原型的继承可能会产生什么后果？

IMO，随着应用程序大小的增加或团队规模的增加，随着许多开发人员开始使用相同的代码，您将失去可维护性。

换句话说 - 如果没有适当的封装，很容易修改不属于自己的对象 - 很容易干预您不想被触摸的部分。

如果您正在编写某种库/框架，其中只有 API 向用户公开并且您没有适当的封装，则可能仅通过一次修改就可以降低所有内容。

例如：

```
var myObj = {
    mySecretPrivateCrucialFunction: function () {
        // all the awesome crucial logic
    },
    //This is what you want other parts of the code ...
    // ... to be interacting with in this object
    myPublicMethod: function () { 
            // some logic
        mySecretPrivateCrucialFunction(); 
            // some thing else
    }
} 
```

我可以做这个。

```
myObj.mySecretPrivateCrucialFunction = function () {
    alert('yay..i got you..');
}; 
```

但如果你这样做 - 你不会给那个机会。

```
var myObj = (function () {
        var mySecretPrivateCrucialFunction = function () {
                // all the awesome crucial logic
            }
        //This is what you want other parts of the code ...
        // ... to be interacting with in this object
        return {
            myPublicMethod: function () {} /*some logic */
            mySecretPrivateCrucialFunction(); /*some thing else */
        }
    })(); 
```

如果您想让所有属性隐藏/私有并且仍然想要获取对象的 JSON 表示 - 您可以执行以下操作 -

```
var myObj = (function () {
    // your private properties
    var prop1 = 1;
    var prop2 = 2;
    // your getters
    var getProp1 = function () {
            return prop1;
        };
    var getProp2 = function () {
            return Prop2;
        };
    // your setters
    var setProp1 = function (newValue) {
            prop1 = newValue;
        };
    var setProp2 = function (newValue) {
            prop2 = newValue;
        };
    // your JSON representation of the object
    var toString = function () {
            return JSON.stringify({
                prop1: prop1,
                prop2: prop2
            });
        };
    // Object that gets exposed -
    return {
        "getProp1": getProp1,
        "getProp2": getProp2,
        "setProp1": setProp1,
        "setProp2": setProp2,
        "toString": toString
    }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:32:22.410

在我看来，有两种方法可以解决这个问题：

我假设您的数据正在作为 JSON***字符串***传输。
`"[{\"key\":\"val\"}]"`出现在您的响应中，然后您将它们通过`JSON.parse`以将它们变成可行的数组和对象。

所以第一种方法是制作“类实例”（不需要`new`或继承，只是一个封装数据并根据数据类型公开接口的构造函数）。

```
function makeTweet (data) {
    var tweet = {
            from_user : data.from_user || "anonymous",
            /* ... */
        },

        toString = function () {},

        public_interface : {
            toString : toString,
            /* getters, etc */
        };
    return public_interface;
} 
```

我知道你已经知道这些东西，但是考虑一下在同一个进程中有两个或三个不同数据类型的情况（比如在行尾，当你准备打印到客户端时），并且您有一个过程正在读取和写入每个对象上的公共字段。如果不同的对象具有不同的属性，那么事情的结局就会很糟糕，或者会以一堆废话而告终`if`。

另一种看待它的方式可能是实体/服务系统

```
function handleTweets (tweetArr) {
    var templateFormat = system.output_format,
        string = "";

    if (templateFormat === "HTML") {
        string = HTMLtemplateTweets(tweetArr);
    } else { /* ... */ }
}

function HTMLtemplateTweets (tweetArr) {}
function JSONtemplateTweets (tweetArr) {}
function XMLtemplateTweets  (tweetArr) {}
... 
```

重点是将 JSON 字符串转换为纯数据对象数组，并将它们提供给特定类型的库/系统函数行。

这更像是一种非常简化的实体/系统方法，而不是一种 OO（作为经典接受的）方法。

现在，您的数据安全来自于确保您的对象只走一条预期的路径，因此对于该类型的每个对象，转换都是可预测的。

如果您希望在 JS 中出于性能/内存目的“继承”，那么这也可能是一个值得关注的方向。

# regex - PHP中特定字符串所需的正则表达式

> ID：14032372
> 
> 赞同：1
> 
> 时间：2012-12-25T16:39:00.803
> 
> 标签：regex, string, validation

我需要一个正则表达式来验证具有以下条件的字符串

1.  字符串可能包含任何数字空格 + - () / 。
    如果字符串包含其他任何内容，那么它应该是无效的
2.  如果字符串中有 + 则应该在开头，最多有一个 + ，否则无效，如果有多个 + 则无效
3.  字符串长度应为 7 到 20 个字符
4.  所有这些数字都不是必须有空格 + - () / 。
    但必须包含至少 7 位数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:46:28.257

我认为您正在使用[E.164](http://en.wikipedia.org/wiki/E.164)格式验证电话号码。电话号码可以包含许多其他格式。它也可以包含`.`。一个数字中有多个空格并不少见。因此，最好将所有数字格式化为通用格式并将该格式存储在 db 中。如果该通用格式错误，您可能会抛出错误。

我像这样验证那些电话号码。

```
function validate_phone($phone){
    // replace anything non-digit and add + at beginning
    $e164 = "+". preg_replace('/\D+/', '', $phone);
    // check validity by length;
    return (strlen($e164)>6 && strlen($e164)<21);
} 
```

如果有效，我在这里存储`$e164`在 Db 中。

即使在那之后，您也无法验证电话号码。有效的电话号码格式并不意味着它是有效的号码。为此，会针对该号码生成一条短信或呼叫，并发送激活码。一旦用户输入代码，电话号码就被完全验证了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:44:37.970

咱们试试吧 ...

```
preg_match('/^(?=(?:.*\d){7})[+\d\s()\/\-\.][\d\s()\/\-\.]{6,19}$/', $text); 
```

打破这个：

*   我们从一个至少需要 7 次数字的积极前瞻开始。
*   然后我们匹配所有有效字符，包括加号。
*   然后匹配所有没有加号的有效字符 6 到 20 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T16:45:25.677

您可以在一个正则表达式中执行此操作：

```
/^(?=(?:.*\d){7})[0-9 ()\/+-][0-9 ()\/-]{6,19}$/ 
```

但是我个人会做类似的事情：

```
/^[0-9 ()\/+-][0-9 ()\/-]{6,19}$/ 
```

然后剥离任何非数字并查看剩余的字符串是否为 7 或更长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T16:48:49.667

更简洁一点：

```
^\+?(?=(.*\d){7})[()/\d-]{7,19}$ 
```

'当然，你为什么还要使用正则表达式？

```
function is_valid($string) {
    $digits = 0;
    $length = strlen($string);

    if($length < 7 || $length > 20) {
        return false;
    }

    for($i = 0; $i < $length; $i++) {
        if(ctype_digit($string[$i])) {
            $digits++;
        } elseif(strpos('+-() ', $string[$i]) === false && ($string[$i] !== '+' || $i !== 0)) {
            return false;
        }
    }

    return $digits >= 7;
} 
```

# android - 如何在安卓应用中阅读非英文字母

> ID：14032376
> 
> 赞同：1
> 
> 时间：2012-12-25T16:40:47.800
> 
> 标签：android

我在尝试使用类似于 onKeyDown() 方法的 Android 应用程序中读取非英文字符时遇到问题。我需要一一阅读这些字母，因为我正在为多种语言实现刽子手游戏，并且每次进入游戏后我都必须触发一个动作。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        Log.v("Hangman", "KEY : " + keyCode);
        switch (keyCode) {
        case KeyEvent.KEYCODE_A:
            validateGuess('A');
            break; 
```

英文字母可以，但只是`KeyEvent.KEYCODE_W`不工作，我不知道为什么

关于如何阅读德语或其他非标准字母的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:46:27.700

不要看keyCode，看keyCode，`event.getUnicodeChar()`而是看细节：

[http://developer.android.com/reference/android/view/KeyEvent.html#getUnicodeChar](http://developer.android.com/reference/android/view/KeyEvent.html#getUnicodeChar) ()

例如，请记住某些字符是通过先按一个或多个按钮然后再按另一个（不是指换档等）来输入的。

# python - 在类中包装全局变量（python）

> ID：14032378
> 
> 赞同：3
> 
> 时间：2012-12-25T16:41:06.037
> 
> 标签：python, oop, global-variables

我是编程新手，最近学习了 python 和面向对象编程的基础知识。我知道拥有大量全局变量通常是个坏主意，我可以将它们全部放入一个类中。这是正确的方法吗？

```
class GameState(object):
    def __init__(self):
        self.variable1 = 1
        self.variable2 = 2
        self.list = [3, 4, 5]

g_state = GameState() 
```

而且，如果我希望访问 g_state 中的变量，那么最好的方法是什么？

将 g_state 传递给需要访问的函数/类？实现 getter 并调用它们？直接使用 g_state.variable1 吗？

或者，还有更好的方法？

编辑：更具体地说，我正在尝试使用 pygame 在 python 中编写游戏，并且正在考虑将我的游戏状态变量放入一个类中，以免周围有一堆全局变量。我不确定如何通过良好的设计访问这些变量，所以我以后不会遇到麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T16:52:00.527

你是对的，太多的全局变量不是一个好主意。污染的全局命名空间可能会导致错误。

但是，**不要为了上课而让他们上课**。如果你真的有那么多变量，也许你应该考虑将你的程序分成多个模块。

另请理解，您不能像在 JavaScript 中那样在 Python 中真正创建全局变量。您的变量始终位于模块下。

让我用一个例子来说明。模块 a.py：

```
A = 42 
```

模块 b.py：

```
import a

print(A) 
```

你得到了什么？`NameError`. 为什么？因为变量 A 不是全局的，它在 module 下`a`。你需要用来`a.A`引用它。

无需在类下填充变量。它们位于作为命名空间的模块下，**没有任何问题**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:52:31.450

有两种方法可以访问变量：一种是全局对象，另一种是将实例传递给函数。一般来说，第一个也是一个坏主意。第二个更好。但不要创建包含所有变量的单个对象！（见第一条评论）。

如果你绕过一个物体，还有更多的事情需要考虑。如果合适的话，一个好主意是将事物实现为成员函数。

```
class VariableBox(object):
    def __init__(self):
        self.variable1 = 1
        self.variable2 = 2
        self.list = [3, 4, 5]

    def do_something(self):
        self.variable1 = self.variable2 + 42
        return self.variable1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T17:42:14.077

没有必要仅仅为了存储变量而创建一个类。仅当您确实需要该类的多个实例时才需要该类，每个实例都有唯一的值。

但是对于单个全局状态，一个字典对象就足够了。如果需要，您可以将其存储在专门用于配置和状态的模块中：

**配置文件**

```
GAME_STATE = {
    'level': 0,
    'score': 0,
    'misc': [1,2,3],
} 
```

**主文件**

```
import conf

conf.GAME_STATE['score'] = 100 
```

所以你的其他模块可以只导入`conf.py`模块并访问状态字典。您可以在此对象中存储所需的任何类型。它还为您提供了一个方便的位置，可以根据需要添加将这些值序列化到磁盘的功能，并在将来的程序运行时将它们读回，并将它们与配置选项一起保存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T16:54:42.150

不！！！建立一个**不会**`VariableBox`帮助你！

 **只需使用您想要的 var，无论它适用于何处。如果你有太多的全局变量，那么什么应该被认为是全局的，什么应该与特定的结构有关，这是一个相当大的问题。甚至难以命名变量或创建数组，而不是`var1, var2, var3, ...`.

类是为构建对象而设计的，即，用于创建具有不同特性但具有相同基础的事物。有价值的类在某种程度上定义了一个实体，以及这个实体的主要行为。

**编辑**：

Python 不提供可见性约束，因此您无法通过简单地将数据填充到类中来*保护数据；*可以从类实例所在的任何地方访问条目。

创建 getter 或简单地维护一个类的实例只是决定使用哪个类的问题。为了清楚起见，最好为您的游戏制作一个控制器，这将在游戏资产和游戏玩法之间建立这个界面。

例如，在执行期间，您可以：

```
class Controller:

    def __init__():
        self.turn = 0
        self. ...

    def begin():
        self.turn += 1
        self.opening_scene()

class Gameplay:

    def __init__(self, num_players, turn, ...):
        self.turn = turn # if it happens you want to use this value in the game
        self.num_player = num_players

# Main loop
controller = Controller()
controller.num_players = int(raw_input("Number of players: "))

gameplay = Gameplay(controller.num_players, controller.turn)
while True:

    if gameplay.action == ...:
    elif ...:
        ...
    elif *next turn*:
        controller.next_turn() # to set things up to next turn
    else ...:
        ... 
```

在内部`Controller`，您可以聚合相关信息，因此您不会在即将到来的函数中拥有无穷无尽的参数列表。

无论如何，我无法告诉您哪个最好用；有很多人在研究这些模块化问题，而我不是其中之一，所以这只是我对在您的应用程序上可以做得很好的观点。**

# ruby-on-rails-3 - Jquery UI 自动完成导轨，包括关联

> ID：14032381
> 
> 赞同：0
> 
> 时间：2012-12-25T16:41:41.090
> 
> 标签：ruby-on-rails-3, jquery-ui, autocomplete

我正在尝试实现类似于 facebook 城市选择器的自动完成功能，其中输入城市名称，自动完成功能以“城市、州、国家”的形式出现。我有我关注 railscast 自动完整视频的城市州和国家/地区的数据库。我的代码如下

城市控制器

```
def index
  @cities = City.order(:name).where("lower(name) like ?", "%#{params[:term].downcase}%")
  render json: @cities.map(&:name) 
end 
```

用户.js.coffee

```
jQuery ->

 $('#user_city_name').autocomplete
 source: $('#user_city_name').data('autocomplete-source') 
```

用户/新/html.erb

```
<div class="field">
 <%= f.label :city_name %><br />
 <%= f.text_field :city_name, data: {autocomplete_source: cities_path}   %>
</div> 
```

城市是所有需要自动选择的，但我希望当用户选择他们看到自动选择选项为城市，州，国家，因为在不同的州有很多同名的城市。谁能指出我正确的方向，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:47:30.147

我想出了怎么做。将城市控制器索引更改为

```
def index
  if params[:term]
    @cities = City.order(:name).where("lower(name) like ?", "%#{params[:term].downcase}%").includes(:state)
    cities_list = @cities.map {|city| Hash[id: city.id, label: "#{city.name}, #{city.state.name}, #{city.state.country.name}", value: city.name]}
    render json: cities_list
  else
    @cities = City.all
  end

end 
```

# ember.js - 如何将 HREF 放入 Ember 模板

> ID：14032382
> 
> 赞同：0
> 
> 时间：2012-12-25T16:41:42.963
> 
> 标签：ember.js, handlebars.js

我一定错过了一些简单的东西，因为我在任何地方都找不到我的问题的答案。我已经完成了 RTFM 尽职调查，现在我在这里提出我的问题。

简而言之，我想`<a>`在 Ember 模板中放置一个简单的标记，但是额外的 Ember 标记以使对象动态化正在破坏 URL 本身。

我的模板如下所示：

```
<script type="text/x-handlebars" data-template-name="event-nav">
    <a href="{{ obj.url }}">{{ obj.display_name }}</a>
</script> 
```

当然，这会在 DOM 本身中产生类似的结果：

```
<a class="event-name logo" href="/&lt;script id='metamorph-0-start' type='text/x-placeholder'&gt;&lt;/script&gt;&lt;script id='metamorph-0-end' type='text/x-placeholder'&gt;&lt;/script&gt;"><script id="metamorph-1-start" type="text/x-placeholder"></script>Object Name<script id="metamorph-1-end" type="text/x-placeholder"></script></a> 
```

简而言之，我该怎么做呢？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T19:06:56.993

对于这种用例，您可以使用['bindAttr'-helper ：](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_bindAttr)

```
 <script type="text/x-handlebars" data-template-name="event-nav">
   <a {{bindAttr href="obj.url" alt="obj.displayName"}}>{{obj.displayName}}</a>
 </script> 
```

# batch-file - 使用批处理脚本，我将如何查找给定文件是否存在于每个文件夹中？

> ID：14032387
> 
> 赞同：0
> 
> 时间：2012-12-25T16:42:10.590
> 
> 标签：batch-file

我有一个根文件夹“Basic”，其中包含子文件夹“1”、“2”和“3”。“1”有子文件夹“11”、“12”和“text.txt”。同样，“2”有子文件夹“22”、“21”和“text.txt”。“3”有“31”和“32”。

我需要一个批处理文件程序来查找每个文件夹中是否存在“text.txt”。如果它不存在于特定的根文件夹“Basic”中，我想在missingfile.txt 中写入子文件夹的名称。

这是我的帐户 - 它不起作用。

```
set value = ""
set exact = ""
cd "C:\Users\bthirumurthy\Desktop\Basic"
dir  "C:\Users\bthirumurthy\Desktop\Basic" /b >> text.txt
for %%a in (text.txt) do (
  if (%%a|="text.txt") (
    dir  C:\Users\bthirumurthy\Desktop\Basic\%%a /b >> C:\Users\bthirumurthy\Desktop\Basic\%%a\result.txt
    for %%b in (result.txt) do (
      if(%%b == "text.txt") (
        set exact = %%b
        set status = 1
      )
      else (
        set missingfile =%%b
        set status = 0
      )
    )
    if (%status% == 1) (
      echo %exact% pass >> pass.txt
    )
    else (
      echo %exact% fail >> Missingfile.txt
    )
    set status = ""
  )
)>>output.txt 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:21:55.153

我还没有花时间弄清楚你的脚本哪里出错了。但是，只需要命令行中的简单单行代码即可。不需要批处理：

```
>missingFile.txt (for /r "C:\Users\bthirumurthy\Desktop\Basic" %F in (.) do @if not exist "%F\test.txt" echo %~fF) 
```

如果从批处理脚本中运行，则将所有百分比加倍。（`%`变成`%%`）

基本上，这个单行从指定的根目录（`for /d /r`循环）开始遍历目录树。对于每个子目录，它检查指定的文件是否存在于其中（或者，如果它*不*存在：）`if not exist ...`。如果该文件不存在，则将相应子目录的完整路径登录到`missingfile.txt`. 实际上，路径只是`echo`ed ( `echo %~fF`)，但整个循环的输出已被重定向（`>missingFile.txt`行首的 ），因此`echo`写入文件。

***编辑 - 一个稍微简单的变化***

```
>missingFile.txt (for /r "C:\Users\bthirumurthy\Desktop\Basic" %F in (test.txt) do @if not exist "%F" echo %~dpF) 
```

FOR /R 循环不检查文件是否存在，除非 IN() 子句中有通配符。如果没有通配符，它​​只会遍历目录树并在每个目录中使用文件名构建路径。

# javascript - 我正在尝试设置元素的底部，但它的值正在上升 NaN

> ID：14032392
> 
> 赞同：0
> 
> 时间：2012-12-25T16:43:35.617
> 
> 标签：javascript

```
function CheckavailOnload()
{
  var elems = document.getElementsByClassName('box-collateral box-related');
  var av = document.getElementsByClassName('availability in-stock');
  var x;
  for (var i = 0; i < elems.length; i++)
  {
    if (getComputedStyle(elems[i]).visibility == 'visible') 
    {
      for (var j = 0; j < av.length; j++)
      {
        av[j].style.visibility = 'visible';
        if(elems[i].offsetTop < 0)
        {
          var x = (elems[i].offsetHeight + (elems[i]).offsetTop).toString() + "px";
          alert(x);
        }
        for(m = 0;m < av.length; m++)
        {
          av[m].style.Bottom = (-x);
          return;
        }
       }
     }
   }
   for (var k = 0; k < av.length; k++)
   {
     av[k].style.visibility = 'hidden';
   }
   var divs = document.getElementsByClassName('add-to-cart');
   for(var l = 0; l < divs.length; l++)
   { 
     divs[l].style.marginTop = (-500).toString() + "px";
     divs[l].style.marginLeft = (-20).toString() + "px";
   }
}
window.onload = CheckavailOnload; 
```

在这里，我试图移动一个段落标签，根据 div offsetTop 和 Offset height div 有 baground 图像，也有免费图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:53:08.120

您已`var x;`在脚本开头声明。然后稍后您将检查：

```
if(elems[i].offsetTop < 0) {
    var x = (elems[i]...); // var is not recommended to be here, x has been already declared once
} 
```

如果`elems[i].offsetTop`碰巧是`>= 0`，`x`将`undefined`在这一行：

```
av[m].style.Bottom = (-x); // Notice a typo here: should be av[m].style.bottom 
```

最后一个表达式给你`NaN`. 为避免这种情况，您需要`x`在脚本的开头分配一个默认值，或者在其中一些数值被分配给`else`之后添加一个语句。`if``x`

同样`return`在`for...m`-loop 似乎会破坏您的代码，循环将永远不会完成工作，其余代码将永远不会执行。

使用`(-500).toString() + "px";`感觉很复杂，为什么不直接使用`"-500px";`呢？

# sql-server - 两倍和三倍的 sql server 结果

> ID：14032396
> 
> 赞同：1
> 
> 时间：2012-12-25T16:44:02.450
> 
> 标签：sql-server, vb.net

我想创建一个特定的表，但一些数值在结果中增加了一倍或三倍。情况如下：

2 表：付款和费用

```
[Payments]: ID, studentID, Amount, DOP (a row in this table is a payment which a student pays it on DOP (date).
[Expenses]: ID, AmountPaid, TimeStamp (a row in this table is an expense bought such as papers or pens... on a specific date(timestamp) 
```

我的查询是：

```
select
sum(purchases.amount) as 'Income From Students',
sum(Expenses.amountpaid) as 'Expenses',
sum(purchases.amount-expenses.amountpaid) as 'Net Profit',
datename(month,timestamp) as 'Month',
datepart(year,timestamp) as 'Year' 
from expenses,purchases 
group by datename(month,timestamp),datepart(year,timestamp) 
```

如查询所示：我的表格应显示每个月和每年的付款、费用和净额的总和`profit=payments - expenses`。

问题是，当得到结果时， sum(expenses.amountpaid) 总是加倍。

所以任何想法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:15:50.027

听起来您需要指定两个表之间的关系。

像这样的东西，我假设：

```
select
sum(purchases.amount) as 'Income From Students',
sum(Expenses.amountpaid) as 'Expenses',
sum(purchases.amount-expenses.amountpaid) as 'Net Profit',
datename(month,timestamp) as 'Month',
datepart(year,timestamp) as 'Year' 
from expenses,purchases 
WHERE PURCHASES.DOP = EXPENSES.TIMESTAMP /*Add this*/
group by datename(month,timestamp),datepart(year,timestamp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:21:19.123

```
SELECT T.INCOME,T.EXPENSE,SUM(T.INCOME)-SUM(T.EXPENSE) AS PROFIT 
FROM (SELECT SUM(P.amount) AS Income, SUM(E.amountpaid) AS Expense 
FROM Payments P,Expenses E WHERE P.ID=E.ID  
GROUP BY datename(month, timestamp), datepart(year, timestamp)) AS T; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T23:07:21.157

我解决了伙计们，经过4个小时的尝试，查询是：

```
select sum(P.Income) as 'Income from Payments',
sum(E.expense) as 'Expenses',
sum(P.Income)-sum(E.expense) as 'Net Profit',
DateName( month , DateAdd( month , IncomeMonth , 0 ) - 1 ) as 'Month'
from
(select sum(payments.amountpaid) as Income,
month(DOP) as IncomeMonth
from payments group by month(dop)) as P,
(select sum(expenses.amountpaid) as Expense,
month(timestamp) as ExpenseMonth
from expenses 
group by month(timestamp))
as E
where
E.Expensemonth=P.IncomeMonth
group by P.IncomeMonth 
```

# c++ - 更改指针指向的对象，但对象不会更改

> ID：14032399
> 
> 赞同：0
> 
> 时间：2012-12-25T16:44:24.527
> 
> 标签：c++

在我的图像类中，我想在将像素传递给图像后更改它们，它们仍然应该更改图片。

```
int main(int argc, char* argv[]){

  Image theImage(4, 8);//width/height
  Pixel aPixel(2,1);
  Pixel* p = &aPixel;
  theImage.setPixel(p);

  aPixel.setBlue(100);//change the blue (RGB) value of the pixel, but Pixel color doesnt change

  theImage.saveAsPixelMap("/Users/dan/Desktop/test.ppm");
  return 0;
} 
```

我以为Pixel的颜色会改变，因为Imageclass持有指针，当指针仍然指向同一个Pixel时，改变了哪个Color，Image中Pixel的Color不应该改变吗？

这是 Pixel 构造函数：

```
Pixel::Pixel(int tx, int ty){
  red = 255;
  green = 0;
  blue = 0;
  x = tx;
  y = ty;
  hasBeenChanged = false;
} 
```

和 setPixel 方法

```
void Image::setPixel(Pixel *aPixel){
  int tX = aPixel->getX();
  int tY = aPixel->getY();
  imageData.at(tY).at(tX)->setRed(aPixel->getRed());//value 0 - 255
  imageData.at(tY).at(tX)->setGreen(aPixel->getGreen());
  imageData.at(tY).at(tX)->setBlue(aPixel->getBlue());  
} 
```

imageData 看起来像这样

```
std::vector< std::vector<Pixel*> > imageData; 
```

和 saveAsPixelmap 方法。

```
void Image::saveAsPixelMap(char aPath[]){

  std::ofstream myfile;
  myfile.open(aPath);

  myfile << "P3\n" << this->getWidth() <<" "<< this->getHeight() <<"\n255\n";
  std::vector < Pixel* > row;
  for (int y = 0; y < this->getHeight(); y++){
    row = imageData.at(y);
    for (int x = 0; x < this->getWidth(); x++){

        myfile << row.at(x)->getRed() << " ";
        myfile << row.at(x)->getGreen() << " ";
        myfile << row.at(x)->getBlue() << " ";
        std::cout <<"rot: "<< imageData.at(y).at(x)->getRed();

    }
  }
  std::cout << "\n Writing File to " << aPath << "\n \n";
  myfile.close();
} 
```

好的，这是很多代码，如果您需要更多关于某事的信息，或者我的问题不够清楚，请询问我。任何提示如何解决这个非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:46:04.493

该`setPixel`方法应该引用一个指针：

```
void Image::setPixel(Pixel *& aPixel) { .. } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:57:37.693

您实现的概念与您描述的不同：

*   描述的是，有些东西应该改变`Image`
*   实现的是纯复制语义（从给定像素读取并将值放入其他像素）

您需要某种`Image`返回像素的类的方法 - 可以更改。

例子：

```
class Image { 
// ..
Pixel & get_pixel(int x, int y) { /* */ }
} 
```

然后你可以改变像素（之后）：

```
image.get_pixel(2,1).setBlue(100) 
```

# sql - Visual Studio 中的 SQL UPDATE 存储过程

> ID：14032401
> 
> 赞同：0
> 
> 时间：2012-12-25T16:44:47.863
> 
> 标签：sql, stored-procedures

我有一个 UPDATE 存储过程，它适用于 SQL Server 查询：

```
GO
ALTER PROCEDURE [dbo].[UpdateMedicalCard]
@RecordingCode int,
@BeginTreatmentDate date,
@EndTreatmentDate date,
@MainDiagnosis nchar(100),
@AttendantDiagnosis nchar(100),
@TreatmentResult nchar(50)
AS
BEGIN
    UPDATE MedicalCard
    SET BeginTreatmentDate = @BeginTreatmentDate,
        EndTreatmentDate = @EndTreatmentDate,
        MainDiagnosis = @MainDiagnosis,
        AttendantDiagnosis = @AttendantDiagnosis,
        TreatmentResult = @TreatmentResult
    WHERE RecordingCode = @RecordingCode
END 
```

但是当我从 Visual Studio 调用此过程时，它不会更新。

```
SqlConnection connection = new SqlConnection();
            connection.ConnectionString = @"Data Source=.;Initial Catalog=Policlinic;Integrated Security=SSPI";

            connection.Open();

            SqlCommand myCommand = connection.CreateCommand();
            myCommand.CommandType = CommandType.StoredProcedure;
            myCommand.CommandText = "UpdateMedicalCard";

            myCommand.Parameters.Add("@RecordingCode", System.Data.SqlDbType.Int);
            myCommand.Parameters["@RecordingCode"].Value = dataGridView1.CurrentRow.Cells[0].Value;

            myCommand.Parameters.Add("@BeginTreatmentDate", System.Data.SqlDbType.Date);
            myCommand.Parameters["@BeginTreatmentDate"].Value = dataGridView1.CurrentRow.Cells[3].Value;

            myCommand.Parameters.Add("@EndTreatmentDate", System.Data.SqlDbType.Date);
            myCommand.Parameters["@EndTreatmentDate"].Value = dataGridView1.CurrentRow.Cells[4].Value;

            myCommand.Parameters.Add("@MainDiagnosis", System.Data.SqlDbType.NChar);
            myCommand.Parameters["@MainDiagnosis"].Value = "qwe";

            myCommand.Parameters.Add("@AttendantDiagnosis", System.Data.SqlDbType.NChar);
            myCommand.Parameters["@AttendantDiagnosis"].Value = dataGridView1.CurrentRow.Cells[6].Value;

            myCommand.Parameters.Add("@TreatmentResult", System.Data.SqlDbType.NChar);
            myCommand.Parameters["@TreatmentResult"].Value = dataGridView1.CurrentRow.Cells[7].Value;

            var dataAdapter = new SqlDataAdapter(myCommand);
            var dataTable = new DataTable();
            dataAdapter.Update(dataTable);
        connection.Close(); 
```

我想我在最后 4 行做错了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:49:36.060

您的命令不会返回任何结果行，因此您不需要使用 DataTable 或 DataAdapter。你只需要打电话`connection.ExecuteNonQuery()`。

您可能还需要仔细检查数据（特别是日期，因为它们可能会很棘手，因为根据表的定义方式，该字段可能还存储时间组件，也可能不存储时间组件）与现有行匹配。

# iphone - 来自数组的 Cocos2d 随机对象未被调用

> ID：14032402
> 
> 赞同：0
> 
> 时间：2012-12-25T16:44:57.347
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, arc4random

我创建了一个数组，它根据用户点击的内容存储红色、黄色或绿色（3、2 或 1）。我希望代码在数组中选择一个随机数并在屏幕上显示相应的颜色。然而，当代码运行时，程序总是选择最后输入的颜色并且只显示那个颜色。代码：

```
-(void)CreateEnemy:(ccTime)dt{
CCSprite *Enemy;
int a;
if (colorArray != nil) {
    a = arc4random()% [colorArray count];
}
int y = [[colorArray objectAtIndex:a] integerValue];
if (y == 1) {
    Enemy = [CCSprite spriteWithFile:@"GreenBall.png"];
    int x = arc4random()%320;
    Enemy.position = ccp(x, 530);
    id action = [CCMoveTo actionWithDuration:3 position:ccp(x, -30)];
    [Enemy runAction:[CCSequence actions:action, [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)], nil]];
    [enemyArray addObject:Enemy];
    [self addChild:Enemy z:2 tag:1];
    NSLog(@"Green Enemy Attack!!");
}
else if (y == 2) {
    Enemy = [CCSprite spriteWithFile:@"YellowBall.png"];
    int x = arc4random()%320;
    Enemy.position = ccp(x, 530);
    id action = [CCMoveTo actionWithDuration:3 position:ccp(x, -30)];
    [Enemy runAction:[CCSequence actions:action, [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)], nil]];
    [enemyArray addObject:Enemy];
    [self addChild:Enemy z:2 tag:1];
    NSLog(@"Yellow Enemy Attack!!");
}
else if (y == 3) {
    Enemy = [CCSprite spriteWithFile:@"RedBall.png"];
    int x = arc4random()%320;
    Enemy.position = ccp(x, 530);
    id action = [CCMoveTo actionWithDuration:3 position:ccp(x, -30)];
    [Enemy runAction:[CCSequence actions:action, [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)], nil]];
    [enemyArray addObject:Enemy];
    [self addChild:Enemy z:2 tag:1];
    NSLog(@"Red Enemy Attack!!");
}
} 
```

Y 应该是随机选择的颜色，但绝不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:39:15.173

在：

```
if (colorArray != nil) {
   a = arc4random()% [colorArray count];
}
int y = [[colorArray objectAtIndex:a] integerValue]; 
```

最有可能发生的是它`[colorArray count]`没有您期望它具有的值，因此`arc4random`仅返回 0（或一组有限的值）。

如果在计算 的值之前添加 NSLog 跟踪`a`，则可以评估 的值`[colorArray count]`。

# c# - 为什么完全相同的代码会产生不同的结果？

> ID：14032403
> 
> 赞同：1
> 
> 时间：2012-12-25T16:44:58.687
> 
> 标签：c#, combobox, winrt-xaml, windows-store-apps

在这段代码之后：

```
 if ((App.roamingSettings.Values.ContainsKey("FromMonthSection1")) &&
        (!string.IsNullOrWhiteSpace(App.roamingSettings.Values["FromMonthSection1"].ToString())))
    {
        comboBoxFromMonth.SelectedValue = App.roamingSettings.Values["FromMonthSection1"].ToString();
    }
    if ((App.roamingSettings.Values.ContainsKey("FromDaySection1")) &&
        (!string.IsNullOrWhiteSpace(App.roamingSettings.Values["FromDaySection1"].ToString())))
    {
        comboBoxFromDay.SelectedValue = App.roamingSettings.Values["FromDaySection1"].ToString();
    } 
```

...运行，comboBoxFromMonth 的 SelectedValue = “August”，正如预期的那样。但是，comboBoxFromDay 的 SelectedValue = null，即使在即时窗口中，我也看到：

```
App.roamingSettings.Values["FromDaySection1"].ToString()
"16"
comboBoxFromDay.Items.Count
31 
```

单步执行，赋值语句在两种情况下都运行，只是由于某种原因，comboxFromDay.SelectedValue 为 null，即使在赋值之后也是如此。

那么，使用完全相同的代码会导致这些相反的反应有什么不同呢？

有问题的两个组合框的 xaml 是：

```
<ComboBox x:Name="comboBoxFromMonth" Height="24" Width="100" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="4" LostFocus="ComboBox_OnLostFocus" ></ComboBox>

<ComboBox x:Name="comboBoxFromDay" Grid.Row="1" Grid.Column="1" Height="24" Width="80" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2" LostFocus="ComboBox_OnLostFocus"/> 
```

XAML 对于所有实际目的都完全相同，除了 comboBoxFromMonth 没有明确的 Grid.Row 或 Grid.Column 分配。

此外，设置漫游值完全相同：

```
if (cmbxName == "comboBoxFromMonth")
{
    App.roamingSettings.Values["FromMonthSection1"] =
        comboBoxFromMonth.SelectedValue;
}
else if (cmbxName == "comboBoxFromDay")
{
    App.roamingSettings.Values["FromDaySection1"] =
        comboBoxFromDay.SelectedValue;
} 
```

那么它是如何在一种情况下起作用而在另一种情况下不起作用的呢？

顺便说一句，在“属性”窗格中查看的两​​个组合框的属性也是相同的（当然，名称除外；还有 MaxDropDownHeight - 520 与 Infinity，但我确信这无关紧要）。

## 已解决（或者我认为）

布兰登一针见血：删除“.ToString()”：

```
if ((App.roamingSettings.Values.ContainsKey("FromDaySection1")) &&
    (!string.IsNullOrWhiteSpace(App.roamingSettings.Values["FromDaySection1"].ToString())))
{
    comboBoxFromDay.SelectedValue = App.roamingSettings.Values["FromDaySection1"];
} 
```

...作品。

## 更新

好的，所以它毕竟还没有完全解决；我注意到了一些奇怪的事情：

漫游设置引擎显然决定了您要保存的值的数据类型。

如果您保存诸如“January”之类的值，它会将其保存为字符串。如果您保存诸如“1”到“12”之类的值，它会将其保存为 int。

但是，如果您有诸如“00”（适当地视为字符串）之类的值和诸如“10”到“59”之类的值怎么办？尽管存储在同一个存储桶中（例如，“ToMinuteSection1”），但数据类型会发生变化。

这是有道理的，因为桶一次只有一个值。如果是“00”，则视为字符串；如果它是“10”，它被视为一个 int。

但这使得在检索这些值时有点笨拙，因为如果“ToMinuteSection1”中包含的值是一个字符串（例如“00”），这会起作用：

```
comboBoxToMinute.SelectedValue = App.roamingSettings.Values["ToMinuteSection1"].ToString(); 
```

...但如果该值被视为 int（例如“59”），则不是；那么它需要是：

```
comboBoxToMinute.SelectedValue = App.roamingSettings.Values["ToMinuteSection1"]; 
```

所以...因为我不知道用户会选择什么，所以我可以这样做，但似乎我应该为此受到打击：

```
int toMinute;
string toMinuteStr = App.roamingSettings.Values["ToMinuteSection1"].ToString();
bool isInt = int.TryParse(toMinuteStr, out toMinute);
if (isInt) // it should alway be an int now
{
    if (toMinute < 10)
    {
        comboBoxToMinute.SelectedValue = toMinuteStr;
    }
    else
    {
        comboBoxToMinute.SelectedValue = toMinute;
    }
} 
```

...实际上，我首先尝试这样做：

```
int toMinute;
string toMinuteStr = App.roamingSettings.Values["ToMinuteSection1"].ToString();
bool isInt = int.TryParse(toMinuteStr, out toMinute);
if (isInt)
{
    comboBoxToMinute.SelectedValue = toMinute;
}
else
{
    comboBoxToMinute.SelectedValue = toMinuteStr;
} 
```

...但是这个技巧不起作用，因为“09”被解析成 9 就好了，但赋值为空，因为组合框中没有“9”，只有一个“09”

有没有更优雅的方法来实现这一点（比我运行我上面显示的 slapworthy 方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:16:38.607

您的组合框中的值是整数还是字符串？根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)上的备注，如果您为 SelectedValue 设置的值不在组合框中，则它会清除选择（即设置为空）。如果它们是整数，则您的 ToString() 可能找不到匹配的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T01:15:25.740

由于您遇到了不同的问题，我不知道最好是添加一个新答案还是编辑我之前的答案。既然你问的是一个不同的问题，我认为添加一个新的答案更有意义，但我会让模组把它整理出来。

根据您的描述，听起来您的组合框实际上可能只包含整数 0 - 59，但您希望它们全部显示为 2 位数字（小于 10 的任何内容都应该有前导零）。

如果是这种情况，请查看 ComboBox 上的[ItemStringFormat](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemstringformat.aspx)属性。请原谅我说的很明显，但这可以让您指定一个格式字符串来显示组合框中的项目。您可以使用标准的 .NET 格式字符串来指定前导零，并且只需使用整数来填充组合框。希望这能解决您的“类型变形”问题。

# ios - UITableViewCell 被分配但不显示

> ID：14032409
> 
> 赞同：2
> 
> 时间：2012-12-25T16:45:26.130
> 
> 标签：ios, uitableview

很奇怪的问题。我有 UITableViewController 和故事板中的自定义单元格。由于某种原因，单元格未显示在我的 TableView 中。我放了一些断点和一些日志消息，我可以告诉它正在获取数据，我可以看到单元格有一个内存地址，所以它不是零。我只是不知道还有什么要验证的。

UPDATE 由于某种原因，单元格的隐藏属性被设置为 YES 所以我添加了 cell.hidden = NO 并且它仍然没有出现。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *CellIdentifier;
if(indexPath.section == 0) {
    CellIdentifier = @"HeaderCell";
} else {
    CellIdentifier = @"ConnectedGoalCell";
}

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if(indexPath.section == 0) {
 //Section 0 Formatting.....displays OK
} else {
 //This is the cell that doesn't appear in the tableView

    UILabel * nameLabel = (UILabel*)[cell viewWithTag:10];
    UILabel * dateLabel = (UILabel*)[cell viewWithTag:11];

    NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
    formatter.timeZone = [NSTimeZone defaultTimeZone];
    [formatter setDateFormat:@"MM/dd/yyyy"];
    Goal * goal = [connectedGoals objectAtIndex:indexPath.row];
    nameLabel.text = goal.name;
    dateLabel.text = [formatter stringFromDate:goal.goal_date];
    //Log said that cell HIDDEN was YES. Changed to no here but still no effect
     //<UITableViewCell: 0xa288e30; frame = (0 389; 320 44); autoresize = W; layer = <CALayer: 0xa292a80>
    cell.hidden = NO;
    NSLog(@"CELL TYPE : %@ AT %@", indexPath, CellIdentifier);
    //Logs::  CELL TYPE : <NSIndexPath 0xc3917d0> 2 indexes [1, 0] AT ConnectedGoalCell

    NSLog(@"%@", cell);
    //Logs::  CELL TYPE : <UITableViewCell: 0xc195ba0; frame = (0 389; 320 44); hidden = YES; autoresize = W; layer = <CALayer: 0xc171620>

}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:56:42.830

最终不得不在我的 Storyboard 中创建一个新的 TableViewController 并再次设置我的自定义视图，现在一切正常 我的一个自定义单元格中有大约 20 个按钮，幸运的是我能够粘贴它们，而不必繁琐地重新创建它们再次。非常奇怪的错误，但它现在可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:49:00.423

您正在使用该`dequeueReusableCellWithIdentifier:forIndexPath:`方法（与该`dequeueReusableCellWithIdentifier:`方法相反，然后检查`nil`），这意味着您必须调用其中之一`register*:forCellReuseIdentifier`，例如`viewDidLoad`. 从文档：

> 重要提示：在调用此方法之前，您必须使用`registerNib:forCellReuseIdentifier:`or 方法注册类或 nib 文件 。`registerClass:forCellReuseIdentifier:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:08:03.620

阅读您的日志

> 单元格类型：UITableViewCell：0xc195ba0；帧 = (0 389; 320 44); **隐藏=是；**自动调整大小 = W；

我不知道为什么要隐藏它，但显然不应该。

```
cell.hidden = NO; 
```

# joomla - Joomla 2.5：很少有相同链接的菜单

> ID：14032410
> 
> 赞同：1
> 
> 时间：2012-12-25T16:45:44.850
> 
> 标签：joomla, joomla2.5

SEF - 开

我有 3 个菜单：

### 主菜单：

*   家
*   文件夹
*   *   人员（类型：菜单项别名，菜单项：“人员”）
*   *   商业（类型：菜单项别名，菜单项：“商业”）
*   联系人

### 人物菜单：

*   人们
*   *   面孔
*   *   男人
*   *   女士
*   *   柴尔德斯

### 商业菜单：

*   商业的
*   *   汽车
*   *   房屋
*   *   名人

但是输入“菜单项别名”不起作用。

我有 /people/childs/ 而不是 /portfolio/people/childs/

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T01:39:33.573

您是否尝试过让 People（在 People 菜单中）成为 People（在 Main 菜单中）的别名？

这应该提供您想要的 /portfolio/people/childs/ 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T13:51:14.073

我找到了解决方案。

安装模块[扩展菜单](http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems/tree-menus/163)。

在此模块中，您必须为拆分参数配置菜单项 ID。

我们有许多子菜单模块，只有一种菜单结构。

# javascript - 调用音频元素在 html5 中播放的更快方法

> ID：14032412
> 
> 赞同：1
> 
> 时间：2012-12-25T16:46:23.340
> 
> 标签：javascript, html, mobile, html5-canvas, html5-audio

我正在尝试在 HTML5 手机游戏中使用音频元素。我在音效方面遇到了一些问题，所以我在游戏开始时多次克隆音频元素：

```
for (var i=0; i < 10; i++)
        {
            var container = document.getElementById("audioDiv");
            var clone = document.getElementById('multiaudio0').cloneNode(true);
            clone.setAttribute('id',"multiaudio" + i);
            container.appendChild (clone);
        }; 
```

然后，当我需要在“碰撞中”使用它时，我将其称为 NEXT：

```
document.getElementById('audioDiv').getElementsByTagName("audio")[score%10].play(); 
```

调用元素播放时画布上的动画速度很慢的问题！！！！有时它也不起作用！

关于 HTML5 中手机游戏声音的任何想法（无 Flash），或者快速调用元素而不是 `document.getElementById`???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:33:09.730

我建议在调用之前预先定义一个包含指向各种音频元素的指针的数组（而不是`document.getElementById('audioDiv').getElementsByTagName("audio")`多次重复查找另外确保您已经预加载了音频样本，以便它们被缓存并且您没有等待在您第一次需要网络资源时

如果您正在开发基于 HTML5 的游戏，我建议您查看 EaselJS 框架，尤其是 SoundJS 部分... [http://www.createjs.com/#!/SoundJS](http://www.createjs.com/#!/SoundJS)

# javascript - 重定向后获取真实的php页面名称

> ID：14032418
> 
> 赞同：0
> 
> 时间：2012-12-25T16:46:50.347
> 
> 标签：javascript, .htaccess

我想知道如何从 JavaScript 中检索真实的页面名称，即不是浏览器地址栏中显示的页面名称。

例如，我的 .htaccess 有一个指令：`DirectoryIndex bibi.php`，所以当我到达`.../`它时会显示`.../bibi.php`. 但是，`location.href`从`document.URL`JavaScript 仍然会显示`.../`.

`.../bibi.php`即使在重定向之后如何从 JavaScript 获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:45:03.763

在 Web 浏览器中运行的 JavaScript 无法知道服务器上处理了哪个文件。您必须将此信息传递给网络浏览器，例如将其写入 HTML 源代码：

```
<body data-file-name="<?php echo basename($_SERVER['PHP_SELF']) ?>"> 
```

我从这里获取了 PHP 代码：http: [//css-tricks.com/snippets/php/get-current-file-name/](http://css-tricks.com/snippets/php/get-current-file-name/)

# pascal - 以递归方式反转字符串

> ID：14032421
> 
> 赞同：0
> 
> 时间：2012-12-25T16:48:15.200
> 
> 标签：pascal

我想使用递归函数反转字符串，这是我的代码：

```
Program InvertTheString;
var n:integer;word:string;

Function Invert (N:integer; word:string) : string;
begin
     if N=1 then
        Invert:=word[N]+Invert
     Else
        Invert:=Invert(N-1,word);
end;

BEGIN
readln(word);
n:=length(word);
writeln (Invert(N,word));

writeln;write('Press Enter To Exit...');
readln;
END. 
```

但它不工作，穿在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:02:59.243

```
Function Invert (N:integer; word:string) : string;
begin
     if N=0 then
        Invert:=''
     Else
        Invert:= word[N] + Invert(N-1,word);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:54:40.297

我不做 Pascal，但一个典型的（简单）递归反向，在伪代码中，看起来像：

```
function reverse(word)
  if empty(word) return ""
  else return reverse(withoutFirstLetter(word)) + firstLetterOf(word) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T12:30:49.920

```
Function Invert (ch:string) : string;
begin
 if ch='' then
 Invert:=''
 else
 {get the last letter of the string + eliminate it and execute the function}
 Invert:=copy(ch,length(ch),1)+Invert(copy(ch,1,length(ch)-1));
end; 
```

# javascript - 页面加载时默认显示 div 内容

> ID：14032425
> 
> 赞同：0
> 
> 时间：2012-12-25T16:48:58.243
> 
> 标签：javascript, jquery, html, css

我按照这个[http://jsfiddle.net/6rSvf/](http://jsfiddle.net/6rSvf/)使链接在单击时更改 div 内容。但是，有人可以帮助我如何将 div 显示为默认值，然后在单击链接时相应地替换内容。目前，在单击链接之前不会显示任何内容。

这是我的JS。

```
$("#divtoggle").delegate("a", "click", function(e) {
    var toggled = ($(this).prop("id"));
    $("div#wrap").prop("class", toggled);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:50:48.597

```
$(document).ready(function() {
    $('#div1').show();
}); 
```

或者

```
$(document).ready(function() {
    $('#togglediv1').click();
}); 
```

**更新**

如果 URL 有`#hash`，它将打开那个，否则将打开第一个。

```
$(document).ready(function() {
    if (window.location.hash && $(window.location.hash).length > 0) {
       $(window.location.hash).show();        
    } else {
        $('#div1').show();
    }
}); 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:53:47.190

您可以触发单击`#divtoggle`元素中的第一个锚点：

```
$("#divtoggle").delegate("a", "click", function(e) {
    var toggled = ($(this).prop("id"));
    $("div#wrap").prop("class", toggled);
}).find('a').first().trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:58:07.203

您始终可以`click`显式触发事件以显示默认元素（[小提琴](http://jsfiddle.net/6rSvf/46/)） -

```
$('#divtoggle a').first().click(); 
```

[或选择](http://jsfiddle.net/6rSvf/47/)任何元素-

```
$('#divtoggle a:eq(n)').click(); //`n` as index(starts from `0) of elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T16:58:49.070

To 是你如何使用你用来显示/隐藏的方法

**[现场演示](http://jsfiddle.net/6rSvf/45/)**

```
$("div#wrap").prop("class", 'togglediv1');
$("#divtoggle").delegate("a", "click", function(e) {
    var toggled = ($(this).prop("id"));
    $("div#wrap").prop("class", toggled);
});​ 
```

# c - 如何生成预处理的 C 代码

> ID：14032427
> 
> 赞同：4
> 
> 时间：2012-12-25T16:49:33.867
> 
> 标签：c, c-preprocessor

> **可能重复：**
> [预处理后的 C/C++ 源文件](https://stackoverflow.com/questions/277258/c-c-source-file-after-preprocessing)

我正在寻找为应用程序生成所有预处理的 c 代码，在本例中为 apache。我下载了 Apache 的源代码，并一直在运行以下命令“gcc -c -save-temps *.c”并尝试了*/.c*。运行这些命令中的任何一个时，我都会收到很多错误，其中一些包括：

```
server/core.c:17:17: fatal error: apr.h: No such file or directory
compilation terminated.
server/core_filters.c:22:17: fatal error: apr.h: No such file or directory
compilation terminated.
server/eoc_bucket.c:17:19: fatal error: httpd.h: No such file or directory
compilation terminated. 
```

我相当肯定该程序应该正确编译，因为它来自 Apache 网站。为了生成必要的预处理 c 代码，我应该怎么做。我应该以某种方式使用makefile吗？

我试图分析需要预处理 c 代码的源代码的应用程序可以在[这里找到](http://ropas.snu.ac.kr/mecc/)

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:05:04.533

（所以，只是通过重复重复我的其他人来重复我自己......）

`gcc -c`产生目标代码。如果要调用预处理器，请使用`gcc -E`.

# python - Python：Sqlite 查询中的编码

> ID：14032431
> 
> 赞同：1
> 
> 时间：2012-12-25T16:50:01.567
> 
> 标签：python, string, sqlite, quoting

`sqlite3`我在 SQLite（ Python 2.7 中的模块）中的编码有问题。我有一个包含两列的表：（text_number int，word text）。我们`word`有数字、英语和俄语单词。

我需要在 word = search_word 的表中找到所有字符串。

当 search_word 是数字时，我没有问题：

```
search_word = '146'
lenta_u_w = c.execute('SELECT * FROM lenta WHERE word = ' + search_word)
for w in lenta_u_w :
    print w 
```

并给出类似的东西`(361, u'146')`。

但是，任何其他类型的字符都不起作用：

```
search_word = u'android'
lenta_u_w = c.execute('SELECT * FROM lenta WHERE word = ' + search_word)
for w in lenta_u_w :
    print w
>>>lenta_u_w = c.execute('SELECT * FROM lenta WHERE word = ' + search_word)
OperationalError: no such column: android 
```

我尝试了许多版本的解码等，但没有什么能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:57:29.283

Use parameters when constructing and executing your queries, which will do the appropriate quoting and escaping for you:

```
c.execute('SELECT * FROM lenta WHERE word = ?', (search_word,)) 
```

See [the documentation](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor) for the `Cursor` class in the sqlite3 package for more details.

# c# - 多个 ComboBox 的相同内容

> ID：14032432
> 
> 赞同：2
> 
> 时间：2012-12-25T16:50:29.847
> 
> 标签：c#, .net, wpf, vb.net, xaml

我想`ComboBoxItem`在多个`ComboBox`es中显示相同的s。

```
<ComboBox>
    <ComboBoxItem Content="1" />
    <ComboBoxItem Content="2" />
    <ComboBoxItem Content="3" />
    <ComboBoxItem Content="4" />
    <ComboBoxItem Content="5" />
</ComboBox> 
```

有没有一种简单的方法可以做到这一点而无需重复代码并且仅在 XAML 中（不使用代码隐藏）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:38:57.060

要回答您的问题，您可以在 Xaml 中创建一个通用数组并将其分配给您的 ComboBox 的 ItemsSource。它看起来像这样。这可以放入您的应用程序资源中，以实现程序范围内的可见性。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow" Height="350" Width="525">
   <Window.Resources>
       <x:ArrayExtension x:Key="myArray" Type="system:String">
           <system:String>1</system:String>
           <system:String>2</system:String>
           <system:String>3</system:String>
           <system:String>4</system:String>
           <system:String>5</system:String>
       </x:ArrayExtension>
   </Window.Resources>
   <Grid>
       <ComboBox Height="23" ItemsSource="{StaticResource myArray}" HorizontalAlignment="Left" Margin="10,10,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" />
       <ComboBox Height="23" ItemsSource="{StaticResource myArray}" HorizontalAlignment="Left" Margin="148,10,0,0" Name="comboBox2" VerticalAlignment="Top" Width="120" />
   </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:54:55.237

简单 - 将组合框数据绑定到相同的数据源。

* * *

```
<ComboBox ItemsSource={Binding CommonItems} /> 
```

这将在 ComboBox 是其子级的 Window/UserControl 的 DataContext 中搜索名为 CommonItems 的公共属性，并将其用作 ItemSource。

* * *

快速示例：

如果你在 WPF 应用程序中有一个简单的窗口，在 Window 后面的代码中你可以在构造函数中设置：

```
Window1()
{
  this.DataContext = this;
} 
```

之后，定义一个公共属性 CommonItems，您可以在其中设置要在多个 ItemsControls 中使用的列表：

```
 public List<string> CommonItems {get;set;} 
```

并且在 Window UI 代码（xaml 文件）中，您可以将 CommonItems 列表用作多个控件的 ItemSource，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:20:17.083

```
 var priceList = new List<int>
                        {
                            1,
                            2,
                            3,
                            4,
                            5
                        };

    //Now we can use CopyTo() Method

    priceList.CopyTo(insuredList);

    ComboBox1.Datasource=priceList;
    ComboBox2.Datasource=insuredList; 
```

//方法后面没有代码：

您需要为每个 ComboBox 创建新的 ComboBoxItems。通常您会使用一个源集合并将其[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)到两个 ComboBox，然后它们将自行创建新项目。

您还可以使用[应用程序资源](http://msdn.microsoft.com/en-us/library/ms746624.aspx)。将您自己的样式（模板）添加到全局资源允许您与多个控件共享它。

# c - 在嵌入式设备上投射指针

> ID：14032434
> 
> 赞同：7
> 
> 时间：2012-12-25T16:50:41.463
> 
> 标签：c, x86, embedded, arm, contiki

我在 32 位嵌入式系统上转换和修改指针时遇到了一个奇怪的问题（具体来说是运行[contiki OS的](http://contiki-os.org/)[redbee econotag](http://www.redwirellc.com/store/node/1)）。

```
uint32_t array[2];
array[0] = 0x76543210;
array[1] = 0xfedcba98;

uint8_t* point = ((uint8_t*)array)+1;

printf("%08x \n", *(uint32_t*)point ); 
```

在我的电脑上输出：

```
98765432 
```

嵌入式设备上的输出：

```
10765432 
```

我的计算机的行为与我预期的一样，但是当嵌入式设备到达单词末尾时，它似乎会环绕。为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T02:14:47.233

您的目标“redbee econotag”被声明为具有 ARMv4 架构的 ARM7。ARMv4 不像 ARMv7 或英特尔机器那样提供未对齐的内存访问。

引用[ARM 的文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0205j/ch05s05s02.html)：

> > 在 ARMv4 和 ARMv5 架构上，以及在 ARMv6 架构上，取决于其配置方式，在访问内存中未对齐的数据时需要小心，以免返回意外结果。例如，当使用常规指针读取 C 或 C++ 源代码中的字时，ARM 编译器生成汇编语言代码，该代码使用 LDR 指令读取字。当地址是四的倍数时，这可以按预期工作，例如，如果它位于字边界上。但是，**如果地址不是 4 的倍数，LDR 将返回旋转结果，而不是执行真正的未对齐字加载。通常，这种轮换不是程序员所期望的**。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-25T16:53:12.260

使用此代码，您打破了严格的别名规则：指向的对象由`point`具有`uint32_t`类型的左值表达式访问。

> **C11 (n1570), § 6.5 表达式**
> 对象的存储值只能由具有以下类型之一的左值表达式访问：
> — 与对象的有效类型兼容的类型，
> — 与对象的有效类型，
> — 对应于对象有效类型的有符号或无符号类型，
> — 对应于对象有效类型的限定版本的有符号或无符号类型，
> —聚合或联合类型，在其成员中包含上述类型之一（递归地包括子聚合或包含联合的成员），或者
> - 字符类型。

这会导致未定义的行为，因此任何事情都可能发生。

> **C11 (n1570), § 4\. Conformance**
> 如果违反了出现在约束或运行时约束之外的“应该”或“不应”要求，则行为未定义。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-25T21:34:03.153

由于`+1`您对 32 位值进行非对齐访问，即地址不是四的倍数。

x86 独立于对齐工作，因为它的根源可以追溯到 8 位机器（可能性能稍差）。

ARM 需要对齐（与许多其他处理器一样），因此 32 位值应放置在四字节的倍数处。如果不是这种情况，可能会发生各种不好的事情（错误的值、错误）。对于数组，编译器会处理这一点，但是当您显式转换指针时，您会强制它违反对齐方式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-25T16:53:03.233

```
printf("%08x \n", *(uint32_t*)point ); 
```

此语句中的`*`表达式调用未定义的行为：它违反了别名规则并且可能进行未对齐的访问。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-25T20:59:57.230

编辑：请注意，这个答案的正文与它提示的评论无关

其他答案的理论很好，但可能对你没有帮助。实际的问题是您写道：

```
uint8_t* point = ((uint8_t*)array)+1; 
```

当你应该写一些东西时，比如

```
uint8_t* point = (uint8_t*)(array+1); 
```

因为您需要将指针递增为指向适当类型的指针（以便递增操作将添加元素的大小），然后再将其转换为其他内容。

但有人可能会问，您是否真的打算拥有一个指向 32 位值的字节指针。也许您确实打算以字节方式访问它（请注意字节顺序会因系统而异！）。或者，也许您真的打算让 point 成为指向 32 位值的指针，而该指针又是指向其他地方的 8 位值的指针……

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“handsontable”？

> ID：14032436
> 
> 赞同：1
> 
> 时间：2012-12-25T16:50:48.193
> 
> 标签：javascript, jquery, handsontable

我正在使用[Hands on table](https://github.com/warpech/jquery-handsontable)插件来实现类似表格的 excel。我的问题有点奇怪。在我的 javascript 代码中，我在 document.ready 事件中的 div 元素上调用此插件，例如：

```
 $("#vdcontainer").handsontable({
        startRows: 2,
        startCols: 1,
        colHeaders: ["<span style='font-size:15px; font-weight:bolder; width:500px; text-align:center;'>Enter variable data here Or just cut & paste</span>"],
        minSpareRows: 1
    }); 
```

现在到现在为止，每件事都很完美，插件在 div 中创建了一个类似 excel 的表，其 id 为`vdcontainer`. 现在，当我单击一个按钮并从单击事件的处理程序函数中调用此插件时，就会出现问题，如下所示：

```
$("#vdcontainer").handsontable('loadData', ['a', 'b', 'c', 'd', 'e']); 
```

现在它在控制台上显示以下错误消息

```
Uncaught TypeError: Object [object Object] has no method 'handsontable' 
```

任何人都可以知道为什么对 handsontable 函数的调用在 document.ready 事件上工作正常，而在同一个 js 文件中的事件处理函数中却没有工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:29:32.993

您包含的 jQuery 版本可能已经过时 - 由于使用 .on，handsontable 插件需要 jQuery 1.7+。

# java - Java BitSet 和 byte[] 用法

> ID：14032437
> 
> 赞同：12
> 
> 时间：2012-12-25T16:51:11.233
> 
> 标签：java, bytearray, bitset

我有这个应用程序，我应该`BitSet`大量使用类并一点一点地写入文件。我知道我不能将位写入文件，所以首先我将`BitSet`对象转换为字节数组并写入字节数组。但问题是由于`BitSet`类从 索引`right to left`，当我将`BitSet`对象转换为字节数组并写入文件时，它会向后写入。

例如，这是我的 BitSet 对象：

```
10100100 
```

BitSet.get(0) 给出假，BitSet.get(7) 给出真。我想把它写到文件中：

```
00100101 
```

所以第一位是0，最后一位是1。

我的转换方法：

```
public static byte[] toByteArray(BitSet bits) 
{
    byte[] bytes = new byte[(bits.length() + 7) / 8];       
    for (int i = 0; i < bits.length(); i++) {
        if (bits.get(i)) {
            bytes[bytes.length - i / 8 - 1] |= 1 << (i % 8);
        }
    }
    return bytes;
} 
```

我的写法：

```
 FileOutputStream fos = new FileOutputStream(filePath);
    fos.write(BitOperations.toByteArray(cBitSet));
    fos.close(); 
```

这是打算这样还是我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T17:09:44.947

`BitSet`有几个问题：

*   它在输出时提供的字节数组的长度，使用`.toByteArray()`，取决于设置为 1 的最高位（如果没有设置位，则为 0，如果最后一个位设置 < 8，则为 1，如果 < 16 则为 2 等等——本质上，`indexOf(highestBitSet) + 7) / 8`）；
*   因此，您不能依赖它来计算固定长度的位掩码。

考虑改用包装器`ByteBuffer`。下面的示例代码。

注意：这使用“静态工厂方法”进行构造，因此您需要使用其中一个`BitFlags.withByteLength()`或`BitFlags.withBitLength()`创建一个新实例。当然，您可以为此设计自己的方法，或者只是将构造函数公开。要获取底层数组，请调用`.toByteArray()`.

```
public final class BitFlags
{
    private final int nrBytes;
    private final ByteBuffer buf;

    private BitFlags(final int nrBytes)
    {
        if (nrBytes < 1)
            throw new IllegalArgumentException("need at least one byte");
        this.nrBytes = nrBytes;
        buf = ByteBuffer.allocate(nrBytes);
    }

    public static BitFlags withByteLength(final int nrBytes)
    {
        return new BitFlags(nrBytes);
    }

    public static BitFlags withBitLength(final int nrBits)
    {
        return new BitFlags((nrBits - 1) / 8 + 1);
    }

    public void setBit(final int bitOffset)
    {
        if (bitOffset < 0)
            throw new IllegalArgumentException();

        final int byteToSet = bitOffset / 8;
        if (byteToSet > nrBytes)
            throw new IllegalArgumentException();

        final int offset = bitOffset % 8;
        byte b = buf.get(byteToSet);
        b |= 1 << offset;
        buf.put(byteToSet, b);
    }

    public void unsetBit(final int bitOffset)
    {
        if (bitOffset < 0)
            throw new IllegalArgumentException();

        final int byteToSet = bitOffset / 8;
        if (byteToSet > nrBytes)
            throw new IllegalArgumentException();

        final int offset = bitOffset % 8;
        byte b = buf.get(byteToSet);
        b &= ~(1 << offset);
        buf.put(byteToSet, b);
    }

    public byte[] toByteArray()
    {
        return buf.array();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T17:21:04.707

BitSet 实现了可序列化。如果您只需要能够在 Java 中恢复 BitSet，并且不需要检查其在文件中的状态，您应该告诉它将自己保存到文件中。

如果您希望将其写入包含其他非序列化数据的文件，您可以将其写入 ByteArrayOutputStream 并从中检索 byte[]。但是，直接写入文件可能会获得更好的性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T17:10:41.130

这在我看来是合理的。它不会很快，但它应该工作。如果您希望它以相反的顺序写出位，只需反转索引和移位：

```
byte[] bytes = new byte[(bits.length() + 7) / 8];       
for (int i = 0; i < bits.length(); i++) {
    if (bits.get(i)) {
        bytes[i / 8] |= 1 << (7 - i % 8);
    }
} 
```

甚至：

```
 bytes[i / 8] |= 128 >> (i % 8); 
```

如果您的位集相当稀疏（或者即使不是），则仅迭代 1 位可能更有效：

```
byte[] bytes = new byte[(bits.length() + 7) / 8];
for ( int i = bits.nextSetBit(0); i >= 0; i = bits.nextSetBit(i+1) ) {
    bytes[i / 8] |= 128 >> (i % 8);
} 
```

如果您需要更高的密集位集速度，您*可以*尝试使用标准[`BitSet.toByteArray()`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#toByteArray%28%29)方法，然后使用位旋转技巧来反转各个字节中的位：

```
byte[] bytes = bits.toByteArray();
for ( int i = 0; i < bytes.length; i++ ) {
    byte b = bytes[i];
    b = ((b & 0x0F) << 4) | ((b & 0xF0) >> 4);
    b = ((b & 0x33) << 2) | ((b & 0xCC) >> 2);
    b = ((b & 0x55) << 1) | ((b & 0xAA) >> 1);
    bytes[i] = b;
} 
```

# character-encoding - 在独立 JavaScript (gjs) 中定义源编码

> ID：14032440
> 
> 赞同：0
> 
> 时间：2012-12-25T16:51:42.077
> 
> 标签：character-encoding, import, gjs

*[这是一个关于不在 web/HTML 上下文中的 JavaScript 的问题]*

有没有办法对 gjs 中的源 JavaScript 文件强制执行任何特定（即 UTF-8）编码？我面临一个问题，即直接从命令行 ( `$ gjs test.js`) 运行的第一个文件被读取为 UTF-8，但任何导入的模块都采用某种单字节编码，这对非英语用户来说几乎没有用。

我有一个简单的测试用例（字符串包括花哨的非 ASCII 引号）。文件`test.js`：

```
print ("test “1”");

imports.searchPath.push ('.');
imports.test2.foo (); 
```

文件`test2.js`：

```
function foo () {
    print ("test “2”");
} 
```

当测试用例作为 运行时`$ gjs test.js`，它会给出以下输出：

```
test “1”
test â2â 
```

在您使用时，直接调用的文件`test.js`确实会产生正确的输出，而导入模块中的字符串会出现乱码。有没有办法让 gjs 将导入的模块解析为 UTF-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:01:16.130

实际上，这是[gjs 中的一个错误，](https://bugzilla.gnome.org/show_bug.cgi?id=687095)最近已修复（可能尚未发布）。通过修复，它无需指定编码即可工作。

# android - 在android中掌握细节拆分样式

> ID：14032448
> 
> 赞同：9
> 
> 时间：2012-12-25T16:52:43.850
> 
> 标签：android, styling, master-detail

*这个问题可能在这里被问过很多次，但没有得到有用的答案。我会把它放在这里并给出一个可能的答案。随意改进。*

**问题：**如何在并排的主详细视图中设置类似详细视图样式的弹出窗口，如下图所示：

![在此处输入图像描述](../Images/05c4de528663d7aa86e7daadba338526.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T16:52:43.850

在这个解决方案中，我使用了 9-patch 背景图像，为列表项定义了 2 种背景。因此，选中（选中）列表项具有不同的背景，如图所示：

![在此处输入图像描述](../Images/7eedb8c82d914f611b22e995e05e975f.png)（项目清单）

![在此处输入图像描述](../Images/b0bea198525ec50ff9ead3b5a3283b36.png)（选定项目）

![在此处输入图像描述](../Images/7eedb8c82d914f611b22e995e05e975f.png)（项目清单）

列表项布局的父视图是一个扩展`LinearLayout`（可以是任何`ViewGroup`）并实现的类`Checkable`。因此，当`ListView`设置为选择模式时，它可以自动选中/取消选中该视图。`selector`然后，分配给此视图的背景会使用此检查状态：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_checked="true" android:drawable="@drawable/checked"/>
  <item android:drawable="@drawable/unchecked"/>
</selector> 
```

这使得列表项视图的背景会自动更改，而无需在每次选择列表项时在代码中手动更改。

**结果：**

![在此处输入图像描述](../Images/3744f7d18494093fc7819cfde21c460e.png)

**附加点：**

1.  滚动条可以移动到左侧。
2.  使用与阴影颜色匹配的列表分隔线，或者可以在列表项和详细视图之间放置更多填充。

# c - 我们可以通过结构指针扫描结构成员吗？

> ID：14032453
> 
> 赞同：-4
> 
> 时间：2012-12-25T16:53:15.817
> 
> 标签：c

我已经尝试了下面的书面代码，但它没有用。我可以知道为什么吗？是否可以通过结构指针扫描结构成员？

```
#include<stdio.h>
#include<conio.h>
struct book
{
  int isdn;
  float price;
 };
 struct book b,*ptr;
 void main()
 {
   clrscr();
   b.isdn=10;
   b.price=150.75;
   printf("\n%d %f",b.isdn,b.price);
   ptr=&b;
   printf("\n%d %f",ptr->isdn,ptr->price);
   scanf("%d %f",&ptr->isdn,&ptr->price); //this statement do not work,why?
   printf("\n%d %f",ptr->isdn,ptr->price);
   getch();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:22:11.810

该代码确实有效，而 scanf 确实以这种方式工作。我会推荐你​​读一些

您是否阅读了有关如何工作的[文档](http://www.cplusplus.com/reference/cstdio/scanf/)`scanf()`？

您需要完全按照格式字符串指定的方式传入数据。所以在你的情况下：

```
scanf("%d %f",&ptr->isdn,&ptr->price); 
```

您需要传入一个整数、一个空格和一个浮点数，例如：

> 5 2.3

然后`ptr->isdn`将有 5 个，`ptr->price`将有 2.3 个。如果您没有发生这种情况，那么也许这不是您的全部代码，或者您错过了复制的内容？

# macos - 基于kernel.framework（Mac os x）的kext和app之间IPC的一些问题

> ID：14032454
> 
> 赞同：1
> 
> 时间：2012-12-25T16:53:33.540
> 
> 标签：macos, ipc, kernel, kernel-extension

我想在 Mac os 上实现 kext 和应用程序之间的 IPC。当我尝试将数据从应用程序传输到 kext 时遇到一些问题。

Internet 上的一些示例需要更多系统功能来在 Mac 上实现 Mach IPC 编程，例如设置服务器 (bootstrap_create_service) 或获取服务器端口 (bootstrap_look_up)。但是我不能使用除 kernel.framework 之外的其他框架或系统标准库进行 kext 编程。

**所以这是我的问题：是否有任何替代方法可以在 kext 或其他方法中获得系统级支持（如 bootstrap_create_service 函数）在 kernel.framework 中实现 IPC？**

非常感谢..

**此外，在 kernel.framework 中，我不能使用 mmap()、open() 在 kext 和 app 之间共享内存。**

来自[http://flylib.com/books/en/3.126.1.90/1/](http://flylib.com/books/en/3.126.1.90/1/)的一个示例：例如：

服务器端代码：

```
char *ptr;
kern_return_t kr;
mach_vm_address_t address = 0;
memory_object_size_t size = (memory_object_size_t)vm_page_size;
mach_port_t object_handle = MACH_PORT_NULL;
msg_format_request_r_t recv_msg;
msg_format_response_t send_msg;
mach_msg_header_t *recv_hdr, *send_hdr;
mach_port_t server_port;

kr = mach_vm_allocate(mach_task_self(),
                      &address,
                      size,
                      VM_FLAGS_ANYWHERE);

printf("memory allocated at %p\n", (void *)address);

// Create a named entry corresponding to the given mapped portion of our
// address space. We can then share this named entry with other tasks.
kr = mach_make_memory_entry_64( (vm_map_t)mach_task_self(),  // target address map
                               &size,  // so many bytes
                               (memory_object_offset_t)address,  // at this address
                               (vm_prot_t)(VM_PROT_READVM_PROT_WRITE),  // with these permissions
                               (mem_entry_name_port_t *)&object_handle,  // outcoming object handle
                               (mem_entry_name_port_t)NULL);  // parent handle

// ideally we should vm_deallocate() before we exit
// put some data into the shared memory
ptr = (char *)address;
strcpy(ptr, "Hello, Mach!");

// become a Mach server
kr = bootstrap_create_service(bootstrap_port, SERVICE_NAME, &server_port);
//EXIT_ON_MACH_ERROR("bootstrap_create_service", kr, BOOTSTRAP_SUCCESS);

kr = bootstrap_check_in(bootstrap_port, SERVICE_NAME, &server_port);
//EXIT_ON_MACH_ERROR("bootstrap_check_in", kr, BOOTSTRAP_SUCCESS);

for (;;) {

    // server loop
    // receive a message
    recv_hdr = &(recv_msg.header);
    recv_hdr->msgh_local_port = server_port;
    recv_hdr->msgh_size = sizeof(recv_msg);

    kr = mach_msg(recv_hdr,  // message buffer
                  MACH_RCV_MSG,  // option indicating service
                  0,  // send size
                  recv_hdr->msgh_size,  // size of header + body
                  server_port,  // receive name
                  MACH_MSG_TIMEOUT_NONE,  // no timeout, wait forever
                  MACH_PORT_NULL);  // no notification port
    EXIT_ON_MACH_ERROR("mach_msg(recv)", kr, KERN_SUCCESS);  // send named entry object handle as the reply

    send_hdr = &(send_msg.header);
    send_hdr->msgh_bits = MACH_MSGH_BITS_LOCAL(recv_hdr->msgh_bits);
    send_hdr->msgh_bits = MACH_MSGH_BITS_COMPLEX;
    send_hdr->msgh_size = sizeof(send_msg);
    send_hdr->msgh_local_port = MACH_PORT_NULL;
    send_hdr->msgh_remote_port = recv_hdr->msgh_remote_port;
    send_hdr->msgh_id = recv_hdr->msgh_id;

    send_msg.body.msgh_descriptor_count = 1;
    send_msg.data.name = object_handle;
    send_msg.data.disposition = MACH_MSG_TYPE_COPY_SEND;
    send_msg.data.type = MACH_MSG_PORT_DESCRIPTOR;

    kr = mach_msg(send_hdr,  // message buffer
                  MACH_SEND_MSG,  // option indicating send
                  send_hdr->msgh_size,  // size of header + body
                  0,  // receive limit
                  MACH_PORT_NULL,  // receive name
                  MACH_MSG_TIMEOUT_NONE,  // no timeout, wait forever
                  MACH_PORT_NULL);

    // no notification port
    EXIT_ON_MACH_ERROR("mach_msg(send)", kr, KERN_SUCCESS);
}

mach_port_deallocate(mach_task_self(), object_handle);
mach_vm_deallocate(mach_task_self(), address, size);
return kr; 
```

客户端代码：

```
kern_return_t kr;
msg_format_request_t send_msg;
msg_format_response_r_t recv_msg;
mach_msg_header_t *send_hdr, *recv_hdr;
mach_port_t client_port, server_port, object_handle;

// find the server
kr = bootstrap_look_up(bootstrap_port, SERVICE_NAME, &server_port);

// allocate a port for receiving the server's reply
kr = mach_port_allocate(mach_task_self(),  // our task is acquiring
                        MACH_PORT_RIGHT_RECEIVE,  // a new receive right
                        &client_port);

// prepare and send a request message to the server

send_hdr = &(send_msg.header);
send_hdr->msgh_bits = MACH_MSGH_BITS_REMOTE(MACH_MSG_TYPE_MAKE_SEND);
send_hdr->msgh_size = sizeof(send_msg);
send_hdr->msgh_remote_port = server_port;
send_hdr->msgh_local_port = client_port;
send_hdr->msgh_reserved = 0;
send_hdr->msgh_id = SHM_MSG_ID;

kr = mach_msg(send_hdr,  // message buffer
              MACH_SEND_MSG,  // option indicating send
              send_hdr->msgh_size,  // size of header + body
              0,  // receive limit
              MACH_PORT_NULL,  // receive name
              MACH_MSG_TIMEOUT_NONE,  // no timeout, wait forever
              MACH_PORT_NULL);  // no notification port

do {
    recv_hdr = &(recv_msg.header);
    recv_hdr->msgh_remote_port = server_port;
    recv_hdr->msgh_local_port = client_port;
    recv_hdr->msgh_size = sizeof(recv_msg);
    recv_msg.data.name = 0;

    kr = mach_msg(recv_hdr,  // message buffer
                  MACH_RCV_MSG,  // option indicating receive
                  0,  // send size
                  recv_hdr->msgh_size,  // size of header + body
                  client_port,  // receive name
                  MACH_MSG_TIMEOUT_NONE,  // no timeout, wait forever
                  MACH_PORT_NULL);  // no notification port

    printf("recv_msg.data.name = %#08x\n", recv_msg.data.name);

    object_handle = recv_msg.data.name;
    {
        // map the specified memory object to a region of our address space
        mach_vm_size_t size = vm_page_size;
        mach_vm_address_t address = 0;

        kr = mach_vm_map( mach_task_self(),  // target address space (us)
                         (mach_vm_address_t *)&address,  // map it and tell us where
                         (mach_vm_size_t)size,  // number of bytes to allocate
                         (mach_vm_offset_t)0,  // address mask for alignment
                         TRUE,  // map it  anywhere
                         (mem_entry_name_port_t)object_handle,  // the memory object
                         (memory_object_offset_t)0,  // offset within memory object
                         FALSE,  // don't copy -- directly map
                         VM_PROT_READVM_PROT_WRITE,  // current protection
                         VM_PROT_READVM_PROT_WRITE,  // maximum protection
                         VM_INHERIT_NONE);

        // inheritance properties
        if (kr != KERN_SUCCESS)
            mach_error("vm_map", kr);
        else {

            // display the current contents of the memory
            printf("%s\n", (char *)address);

            if (argc == 2) {
                // write specified string to the memory
                printf("writing \"%s\" to shared memory\n", argv[1]);

                strncpy((char *)address, argv[1], (size_t)size);
                ((char *)address)[size - 1] = '';
            }
            mach_vm_deallocate(mach_task_self(), address, size);
        }

    }

} while (recv_hdr->msgh_id != SHM_MSG_ID);

exit(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T02:00:26.513

在我自己开发内核扩展的工作中，Apple 一直在推动开发人员使用[“内核控制”套接字，这在此处进行了详细说明](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/NKEConceptual/control/control.html)。这适用于网络内核扩展，而对于其他 kext，您还有其他一些选项，包括 BSD 通知、内核队列和事件、文件系统事件等。[这些选项（以及您可能认识的其他一些选项）在本 Apple 中进行了描述文档](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/OSX_Technology_Overview/SystemTechnology/SystemTechnology.html#//apple_ref/doc/uid/TP40001067-CH207-SW30)。

# php - PHP Mysql_query 在函数内部不起作用

> ID：14032462
> 
> 赞同：0
> 
> 时间：2012-12-25T16:54:54.163
> 
> 标签：php, mysql, scope, global

我的问题是，当我在全局范围内使用 mysql 时，它可以工作，但在内部却不行，请看一下代码：

```
//connect.php
@mysql_connect($mysql_server, $mysql_admin, $mysql_pass);
@mysql_select_db($mysql_db);

//main.php
require_once("connect.php");
$rReq = $_REQUEST["req"];

function failed()
{
        $qe = mysql_query("SELECT success_count FROM db WHERE serial='".$rReq."'");
        $ro = mysql_fetch_row($qe);
        $ro[0]+=1;
        mysql_query("UPDATE db SET success_count = '".$ro[0]."' WHERE serial='".$rReq."'");
}

//main code
failed(); // not works, mysql_query does nothing

//if i put here the same code but outside the function it works :/
$qe = mysql_query("SELECT success_count FROM db WHERE serial='".$rReq."'");
$ro = mysql_fetch_row($qe);
$ro[0]+=1;
mysql_query("UPDATE db SET success_count = '".$ro[0]."' WHERE serial='".$rReq."'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:58:41.190

该`$rReq`变量未在函数范围内定义，这就是它失败的原因。如果可能，您应该将其作为参数传递给函数。

此外，我建议永远不要抑制任何错误。这被认为是不好的做法，如果您有错误报告，“未定义变量...”错误会帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:00:05.457

您没有在查询中进行任何错误检查，因此难怪它会在不告诉您出了什么问题的情况下失败。这应该是首先要解决的问题。有关如何添加正确的错误检查，请参阅[手册](http://php.net/manual/en/function.mysql-query.php)或[此问题。](https://stackoverflow.com/questions/6198104/reference-what-is-a-perfect-code-sample-using-the-mysql-extension)此外，`@`连接时将抑制错误消息 - 删除它们，您将获得有关问题所在的信息。

正如您所说，您的*具体*问题与[范围](http://php.net/manual/en/language.variables.scope.php)有关。您需要将所需的所有变量传递给函数，例如：

```
function failed($rReq, $qe)
  { 
   ....
  } 
```

另外，请注意您的代码容易受到[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)的影响，这是非常危险的。

mySQL 扩展已经过时，用它开始编写新代码并不是一个好主意。考虑改用[PDO](http://php.net/manual/en/ref.pdo-mysql.php) - 我知道在学习新东西时这是一个额外的压力，但它真的值得额外的努力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:59:14.753

为了使`$rReq`变量在函数中可见，您需要在此处声明它，将其作为参数传递，或使用`global`将其拉入：

```
function failed()
{
    global $rReq;
    $qe = mysql_query("SELECT success_count FROM db WHERE serial='".$rReq."'");
    ... 
```

来自函数外部的变量在函数内部不会自动可见，而来自函数内部的变量在外部不可见。

# javascript - 如何使用变量获取元素的 CSS 信息？

> ID：14032463
> 
> 赞同：0
> 
> 时间：2012-12-25T16:54:54.633
> 
> 标签：javascript, jquery, css, variables

我所拥有的是以下代码来创建一个 div。

```
function makeLinkdiv () {
  gCurrentBlock = $gBlockDivName + $gBlockPointer;
  var idPointer = gCurrentBlock;
  var linksBlock = $('<div id ="' + gCurrentBlock + '" class="LinksBlock EditBlock"></div>').appendTo("#canvas");
  linksBlock.draggable({containment: "#canvas", scroll: false, grid: [10, 10]}, {cursor: "move", cursorAt: {top: 125, left: 50}});
  linksBlock.append('<div class="article_title EditBlock fontCenter fontBold font24">Article Title</div>');
  //
  // log the div data to the div object
  //
  var x = gCurrentBlock.css('left');
  var y = gCurrentBlock.css('top');
  alert ('top is - ' + y + ' left is - ' + x);
  divData.items.push({ID: $gBlockPointer, Block: gCurrentBlock, posTop : "450", posLeft : "540" });
  //
  // increment the block pointer
  //
  $gBlockPointer = $gBlockPointer + 1;
  //
} 
```

发生的事情是我没有得到顶部和左侧的 CSS 属性。实际上，什么也没有发生。我知道我使用变量的方式一定有问题`gCurrentBlock`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:05:03.540

这里 gCurrentBlock 是一个 id，你在其中直接使用 jquery 方法，所以它不起作用。

尝试`x=$('#'+gCurrentBlock).css('left')`//如果您想要左侧位置的数字，它会返回您的左侧位置，例如 150 像素，您可以使用

```
 x=$('#'+gCurrentBlock).position().left; //will return x as 150 
```

你可以为 y 做同样的事情。

```
y=$('#'+gCurrentBlock).css('top'); 
```

或者

```
y=$('#'+gCurrentBlock).position().top; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:58:26.320

`.css()`如果不将其用作 jQuery 对象，则无法使用。

请尝试以下操作：

```
var x = document.getElementById(gCurrentBlock).style.left;
var y = document.getElementById(gCurrentBlock).style.top; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T16:59:08.610

不太确定您的代码试图完成什么......但您需要查看 jQuery`position`和`offset`方法，这将为您的元素提供坐标。

我希望您的代码看起来更像这样：

```
...
var position = $('#' + gCurrentBlock).position();
var x = position.left;
var y = position.top;
... 
```

如果值不是您所期望的，请尝试更改`position`为`offset`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T17:43:31.240

我认为您没有以正确的方式选择选择器：

```
 var x = gCurrentBlock.css('left');
 var y = gCurrentBlock.css('top'); 
```

你已经像这样附加它：

```
var linksBlock = $('<div id ="' + gCurrentBlock + '" class="LinksBlock EditBlock"></div>').appendTo("#canvas");
//--------------------------------^^^^^^^^^^^^^---this is the id of the div 
```

所以你的代码应该是：

```
 var x = $('#'+gCurrentBlock).css('left');
 var y = $('#'+gCurrentBlock).css('top'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T17:02:11.293

这`gCurrentBlock`是一个仅包含 div 的 id 的变量，因此

替换这个

```
var x = gCurrentBlock.css('left'); 
```

和

```
var x = $("#"+gCurrentBlock).css('left'); 
```

希望这会有所帮助！

# c# - 可以将数据结构对象附加到文本框以进行自动完成吗

> ID：14032469
> 
> 赞同：1
> 
> 时间：2012-12-25T16:55:58.060
> 
> 标签：c#, textbox

我有一个文本框，我可以在其中使用自动完成功能。例如，如果 use 键入起始字符，则会显示一个带有选项的下拉列表。这就是我目前正在使用以下代码所做的事情：

```
inputTextBox.AutoCompleteMode = AutoCompleteMode.Suggest;
inputTextBox.AutoCompleteSource = AutoCompleteSource.CustomSource;
inputTextBox.AutoCompleteCustomSource = inputStringCollection; //inputStringCollection contains the list of possible strings 
```

我需要的：

我希望能够使用此文本框搜索*多种类型的数据（例如全名、用户名、电子邮件、电话号码等）。*例如，客户具有他的全名、系统中的用户名、电话号码列表、电子邮件列表等属性。现在，我为每个属性设置了单独的文本框，但我想将它们全部合并合而为一。所以我的想法是我应该能够在同一个文本框中搜索所有类型的属性。

问题：

我想到的一种可能的实现是为每种类型的属性创建单独的字符串集合，然后将它们全部合并为一个，然后将该合并的字符串集合附加到此文本框。这种方法的问题是我无法处理重复项。假设有一个人的名字和用户名都是“约翰”。在这种情况下，我不知道从下拉列表中选择了哪种类型的属性。

问题：

是否可以将除字符串集合之外的其他内容附加到文本框的自动完成机制？也许我可以有一个存储自定义数据结构对象的 Arraylist，每个对象都定义了几个值，例如 ID、属性类型等。或者类似的东西？这样，当用户从下拉列表中选择一个条目时，我可以知道用户选择的属性类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:05:41.713

软件中通常发生的事情，这是在 Mac 版 iTunes Store 的第一个版本中引入的，只有一个搜索框可以回答任何类型的搜索。

我们开发人员最终要做的是在`case`选择数据库之前使用 SQL 或我们的动态语言中的变量。

行内的东西

*   如果`@`在搜索中找到一个字符，让我们通过电子邮件地址查找
*   如果找到电话号码（`regex`例如匹配），让我们按电话号码搜索
*   如果`integer`找到了，让我们按订单 ID 查找
*   ...
*   否则，让我们按客户名称、地址或城市查找

这就是我们通常将一个搜索框设置为“搜索所有内容”的方式，女巫并不是真正的所有内容，但搜索格式就是我们知道在哪里搜索的方式。

有一个“高级搜索”总是一个很好的做法，我们拥有所有可以真正使动态查询变得强大的字段，因为只有在特殊情况下用户才会使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:08:38.083

您可以创建自己的“字符串集合”对象，该对象在外部看起来像一个普通列表，但在内部将所有实际列表保存在内部，然后在调用接口方法时搜索所有列表。你需要研究自动完成的东西是如何得到它的建议的。

# sql - 在 SQL 的 Access 中对不同的属性进行排序

> ID：14032472
> 
> 赞同：0
> 
> 时间：2012-12-25T16:56:41.740
> 
> 标签：sql, ms-access

我在使用 ms 时遇到了一些问题。使用权

我有 1 个表“电影”，其中包含 5 个属性，即“名称”、“电影流派”、“运行时”、“主演员”和“主演员”

我尝试使用不同的电影类型以及每种类型的平均运行时间进行查询

我有超过 4 种类型，每种类型至少有 2 部电影具有不同的运行时间

我尝试编写此查询：

```
 SELECT DISTINCT Movie_Genre, Avg(runtime)
 FROM Movie; 
```

但我收到错误消息

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:02:32.873

试试这个：

```
SELECT 
    Movie_Genre, 
    Avg(runtime)
FROM 
    Movie
GROUP BY
    Movie_Genre 
```

# opengl - 逆时针/顺时针顶点

> ID：14032473
> 
> 赞同：6
> 
> 时间：2012-12-25T16:56:55.097
> 
> 标签：opengl, vertices

我正在阅读几本关于 OpenGL 的书，其中两本总是逆时针定义顶点。从我读到的内容来看，这非常重要，因为它决定了正面和背面的位置。

但我也在阅读[http://www.arcsynthesis.org/gltut/](http://www.arcsynthesis.org/gltut/)上的教程，他顺时针定义了它们。

```
const float vertexPositions[] = {
    0.75f, 0.75f, 0.0f, 1.0f,
    0.75f, -0.75f, 0.0f, 1.0f,
    -0.75f, -0.75f, 0.0f, 1.0f,
}; 
```

我不应该总是使用逆时针表示法，因为这是 opengl 的默认值吗？

还有为什么类型是 a `float`？不应该是一个`GLfloat`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T18:15:05.683

> 我不应该总是使用逆时针表示法，因为这是 opengl 的默认值吗？

那是你的选择。您可以使用 CCW 或 CW 表示法。您始终可以使用 覆盖此行为`glFrontFace()`。硬件没有区别，哪种工作方式，但是，我想，在尝试使用喜欢 CCW 的第三方库或类似的东西时，选择 CW 可能会导致一些意想不到的麻烦。

> 另外为什么类型是浮点数？它不应该是 GLfloat 吗？

应该是`GLfloat`。另一方面，在大多数平台上`float`，`GLfloat`它们完全相同，找不到任何区别。`GLfloat`从可移植性的角度来看，使用是更好的做法。另一个考虑：它强调变量是用于图形渲染的，所以这是一件好事。

# css - -moz 和 -webkit 上的 W3 Css 验证器错误

> ID：14032484
> 
> 赞同：1
> 
> 时间：2012-12-25T16:58:59.940
> 
> 标签：css, w3c-validation

我试图在 jigsaw.w3.org 上验证我的第 3 级 CSS。但是我收到许多以 -moz 或 -webkit 或 -o 开头的属性的错误消息和...

我该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T17:00:51.353

它显示您无效，因为这些属性是专有的并且不被 w3.org 接受

因此它会向您抛出这些属性的错误消息，因此如果您想完全验证它，您需要使用 w3.org 接受的属性

否则，您也可以在此处选择替代选项

![W3c 验证器更多选项](../Images/0d55a99164247e1ad8e37f73c8486206.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T17:00:47.147

别理他们。要么不使用供应商扩展，要么等待每个人都赶上标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T17:06:49.197

[在http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)的用户界面中单击“更多选项”，然后在“供应商扩​​展”下拉列表中选择“警告”。就 CSS 规范而言，扩展仍然是错误，但有关它们的消息将显示为警告，您可以更好地关注“真正的”错误。

# php - 单击发送时，我的联系表向我发送空白值

> ID：14032487
> 
> 赞同：0
> 
> 时间：2012-12-25T16:59:16.213
> 
> 标签：php, html, contact, contact-form

提交此表单后，我会收到一封电子邮件，其中所有值均为空白，请帮助我。

这是我的 html 文件，我在其中接受姓名、电子邮件和消息作为输入。

```
<form id="form" method="post" action="contact.php" >
    <fieldset>
        <label><input type="text" value="Name" onBlur="if(this.value=='') this.value='Name'" onFocus="if(this.value =='Name' ) this.value=''"></label>
        <label><input type="text" value="Email" onBlur="if(this.value=='') this.value='Email'" onFocus="if(this.value =='Email' ) this.value=''"></label>
        <label><textarea onBlur="if(this.value==''){this.value='Message'}" onFocus="if(this.value=='Message'){this.value=''}">Message</textarea></label><br>
        <<a href="#" class="button" onClick="document.getElementById('form').submit()">Send</a></div>
    </fieldset>  
</form> 
```

.php 文件：

在 php 文件中，我想通过电子邮件发送 id jay44556677@gmail.com 上的所有详细信息。

```
<?php
$field_name = $_POST['Name'];
$field_email = $_POST['Email'];
$field_message = $_POST['Message'];

$mail_to = 'jay44556677@gmail.com';
$subject = 'Message from a site visitor '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for the message. We will contact you shortly.');
        window.location = 'contacts.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please try again.');
        window.location = 'contacts.html';
    </script>
<?php
}
?> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:01:27.267

您永远不会为表单元素指定`name=`s，因此这些值永远不会提交到您的服务器。

```
<input type="text" value="Name" ...
<input type="text" value="Email" ... 
```

需要添加一个名称字段：

```
<input type="text" name="Name" value="Name" ...
<input type="text" name="Email" value="Email" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:04:14.787

每个输入表单元素都应该有名称字段，否则它将发送空白值。

```
<form id="form" method="post" action="contact.php" >
                  <fieldset>
                    <label><input type="text" name="Name" value="Name" onBlur="if(this.value=='') this.value='Name'" onFocus="if(this.value =='Name' ) this.value=''"></label>
                    <label><input type="text" name="Email" value="Email" onBlur="if(this.value=='') this.value='Email'" onFocus="if(this.value =='Email' ) this.value=''"></label>
                    <label><textarea name="Message" onBlur="if(this.value==''){this.value='Message'}" onFocus="if(this.value=='Message'){this.value=''}">Message</textarea></label><br>
                    <<a href="#" class="button" onClick="document.getElementById('form').submit()">Send</a></div>
                  </fieldset>  
                </form> 
```

# mysql - 如何使用mysql实现关系数据库

> ID：14032488
> 
> 赞同：0
> 
> 时间：2012-12-25T16:59:56.837
> 
> 标签：mysql, foreign-keys, relational-database, rdbms, mysql-workbench

我在 mysql 数据库中创建了 2 个表。我为此使用了以下代码。

```
CREATE TABLE Country
(
    CountryID VARCHAR(8) PRIMARY KEY,
    CountryName VARCHAR(15) UNIQUE NOT NULL
)ENGINE=INNODB;

CREATE TABLE Agent
(
    AgentNo VARCHAR(10) PRIMARY KEY,
    AgentName VARCHAR(50) UNIQUE NOT NULL,
    AddNo VARCHAR(8) NOT NULL,
    Street VARCHAR(25) NOT NULL,
    City VARCHAR(20) NOT NULL,
    ContactPerson VARCHAR(20),
    Email VARCHAR(40),
    CountryID VARCHAR(8) NOT NULL REFERENCES Country(CountryID)
)ENGINE=INNODB; 
```

但是当我尝试删除 Country 表时，它允许删除该表。但代理表仍在数据库中。

我认为这些表之间没有正确实现外键引用。我怎么解决这个问题。

我对mysql不熟悉。我熟悉 MS SQL Server，以前没有遇到过这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:20:02.430

您需要在引用之前添加**外键 fk_country_id(CountryID)**以实现外键：

```
CREATE TABLE Agent
(
    AgentNo VARCHAR(10) PRIMARY KEY,
    AgentName VARCHAR(50) UNIQUE NOT NULL,
    AddNo VARCHAR(8) NOT NULL,
    Street VARCHAR(25) NOT NULL,
    City VARCHAR(20) NOT NULL,
    ContactPerson VARCHAR(20),
    Email VARCHAR(40),
    CountryID VARCHAR(8) NOT NULL,
    foreign key fk_country_id(CountryID) REFERENCES Country(CountryID)
)ENGINE=INNODB; 
```

# android - android editText限制字符串长度不是字符

> ID：14032495
> 
> 赞同：1
> 
> 时间：2012-12-25T17:00:55.777
> 
> 标签：android, android-edittext, maxlength

我需要确保输入字符串可以适合我要显示它的行。我已经知道如何限制字符数，但这不是很好，因为具有相同字符长度的 2 个字符串具有不同的大小......例如：

字符串 1：“wwwwwwwww”

字符串 2：“iiiiiiiiii”

在 android string1 比 string 2 大得多，因为“i”比“w”消耗更少的视觉空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:40:35.793

您可以[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)用来分析正在输入的文本并[`Paint`](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)测量文本当前值的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:17:29.577

这是我在 TextWatcher 的函数 afterTextChanged 中使用的代码。我的解决方案基于 Asahi 的建议。我不是专业程序员，所以代码看起来可能很糟糕。随意编辑它以使其更好。

```
//offset is used if you want the text to be downsized before it reaches the full editTextWidth
    //fontChangeStep defines by how much SP you want to change the size of the font in one step
    //maxFontSize defines the largest possible size of the font (in SP units) you want to allow for the given EditText
    public void changeFontSize(EditText editText, int offset, int maxFontSize, int fontChangeSizeStep) {
        int editTextWidth = editText.getWidth();
        Paint paint = new Paint();

        final float densityMultiplier = getBaseContext().getResources().getDisplayMetrics().density;
        final float scaledPx = editText.getTextSize();
        paint.setTextSize(scaledPx);
        float size = paint.measureText(editText.getText().toString());

        //for upsizing the font
        // 15 * densityMultiplier is subtracted because the space for the text is actually smaller than than editTextWidth itself
        if(size < editTextWidth - 15 * densityMultiplier - offset) {
            paint.setTextSize(editText.getTextSize() + fontChangeSizeStep * densityMultiplier);
            if(paint.measureText(editText.getText().toString()) < editTextWidth - 15 * densityMultiplier - offset) //checking if after possible upsize the text won't be too wide for the EditText
                if(editText.getTextSize()/densityMultiplier < maxFontSize)
                    editText.setTextSize(TypedValue.COMPLEX_UNIT_SP, editText.getTextSize()/densityMultiplier + fontChangeSizeStep);
        }
        //for downsizing the font, checking the editTextWidth because it's zero before the UI is generated
        while(size > editTextWidth - 15 * densityMultiplier - offset && editTextWidth != 0) { 
            editText.setTextSize(TypedValue.COMPLEX_UNIT_SP, editText.getTextSize()/densityMultiplier - fontChangeSizeStep);
            paint.setTextSize(editText.getTextSize());
            size = paint.measureText(editText.getText().toString());
        }
    } 
```

如果您想在加载活动时已经更改字体大小，只是一个小建议。如果您在 OnCreate 方法中使用该函数，它将不起作用，因为此时尚未定义 UI，因此您需要使用此函数来获得所需的结果。

```
@Override
     public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        changeFontSize(editText, 0, 22, 4);
     } 
```

# c++ - 如何使用 Clang 编写代码生成未使用的声明？

> ID：14032496
> 
> 赞同：3
> 
> 时间：2012-12-25T17:00:59.160
> 
> 标签：c++, clang, llvm

我正在寻找代码`llvm::Module`从一些 C++ 代码生成。

具体来说，我将混合使用 Clang 生成的代码和其他来源的代码。不幸的是，如果有使用它的定义，Clang 的`CodeGenModule`类似乎坚持只在模块中生成声明。

无论如何，我怎样才能说服`CodeGenModule`生成这些声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:53:18.633

显然，`-femit-all-decls`实际上并没有发出所有的 decl，所以我不得不修改 Clang 的源代码以实际发出所有的 decl。

# java - 使用 JAX-WS 2.1 时请求 XML 中的不必要属性

> ID：14032500
> 
> 赞同：2
> 
> 时间：2012-12-25T17:01:41.347
> 
> 标签：java, web-services, jax-ws

我在 WAS7.0 应用服务器下使用 JAX-WS 2.1（使用 JAXB 2.1）。我已经编写了一个客户端代码，下面是我的请求 xml 中的片段。

```
 <additionalCriteria>
         <ns5:keyword xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
         <ns5:maxResultsToReturn>10</ns5:maxResultsToReturn>
         <ns5:nextResultBlockKey xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
         <ns5:scope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
         <ns5:sortBy xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
         <ns5:sortOrder xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
      </additionalCriteria> 
```

如您所见，该属性`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`被添加到每个元素中。我不想在我的请求中这样做。任何人都可以建议，因为它阻止了我的项目交付？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:47:33.423

`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`如果在消息的深处有任何具有空值的可空字段，则这是必需的。JAX-B 规范要求这些用 xsi:nil 表示。JAX-WS/JAX-B 无法预测是否存在这些，因为它在遍历树时流出 XML。所以它总是添加那个命名空间。这是标准的，正常的，任何反对的人都需要重新考虑。

# html - HTML表格合并布局

> ID：14032504
> 
> 赞同：1
> 
> 时间：2012-12-25T17:02:15.833
> 
> 标签：html, html-table

我想要得到什么：

```
+---------+---------------------------+--------------+
|         |                           |              |
+---------+                           |              |
|         |                           |              |
|         +-----------------+---------+              |
|         |                 |         |              |
|         +-----------------+         |              |
|         |                 |         |              |
|         +-----------------+         |              |
|         |                 |         |              |
+---------+-----------------+---------+              |
|         |                 |         |              |
+---------+-----------------+---------+--------------+ 
```

的HTML：

```
<table>
    <tr>
        <td></td>
        <td rowspan="2" colspan="2"></td>
        <td rowspan="6"></td>
    </tr>
    <tr>
        <td rowspan="4"></td>
    </tr>
    <tr>
        <td></td>
        <td rowspan="3"></td>
    </tr>
    <tr>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

但这不起作用。我无法将第一行的第二列合并到 2*2 单元格中。它总是变成`colspan="2"`唯一的。`rowspan="2"`不工作。我尝试使用诸如[http://html-tables.com/](http://html-tables.com/)之类的 HTML 表格生成器站点进行此操作，但它也无法在那里工作。

这就是我得到的：

```
+---------+---------------------------+--------------+
|         |                           |              |
+---------+-----------------+---------+              |
|         |                 |         |              |
|         +-----------------+         |              |
|         |                 |         |              |
|         +-----------------+         |              |
|         |                 |         |              |
+---------+-----------------+---------+              |
|         |                 |         |              |
+---------+-----------------+---------+--------------+ 
```

我认为这在 HTML 中是不可能的，因为它在任何地方都不起作用？有什么方法可以达到我想要的结果吗？如图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:20:46.630

首先，您的图形演示文稿有六行，但表格只有五个`tr`元素。要解决此问题，请复制第四个`tr`元素，

```
 <tr>
      <td></td>
  </tr> 
```

即使在此修复之后，表格看起来也不正确，但那是因为它没有真正的内容。没有什么要求第二行具有正高度。将一些多行内容添加到第二个`td`元素，您会看到它使第二行增加了高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:42:13.530

检查表的列数和行数是否不匹配。在 div 元素中，您可以创建一个 html 表，如下所示：

```
<div>
    <table border="1" width="50%" cellspacing="10" cellpadding="10">
        <tr>
            <td style="width:60px"></td>
            <td></td>
            <td rowspan="3"></td>
        </tr>
        <tr style="height:50px">
            <td colspan="2">
                <table border="1" width="100%" cellspacing="10" cellpadding="10">
                    <tr>
                        <td></td>
                        <td>
                            <table width="100%"  cellpadding="10" cellspacing="10" border="1">
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                </tr>
                            </table>
                        </td>
                        <td></td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table border="1" width="100%" cellspacing="10" cellpadding="10">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div> 
```

# java - 在列表中添加新行时的Android可扩展列表视图帮助

> ID：14032505
> 
> 赞同：0
> 
> 时间：2012-12-25T17:02:15.863
> 
> 标签：java, android, listview, expandablelistview

我做了一个只有一组的可扩展视图，单击一个按钮，一个新的

添加该组中的行，这些行在输入时包含文本框中的一些数据

从行中，我发现当我添加 4 行时我得到 7 行输入，总是这样

口粮，当添加 5 行时，我得到 8 行输入，不明白尝试做很多

技巧。

你能帮我从这些行中获取输入的最佳方法是什么。actlist 是接受输入的数组列表。在下面有代码活动

```
 public class AddActActivity extends ExpandableListActivity implements 

OnGroupClickListener,OnClickListener {
        /** Called when the activity is first created. */
        public TextView ShowTitle;
        public TextView Date;
        public static long cuesheetnimber;
        public static ExpandableListView expandableListView;
        public static ActAdapter expListAdapter;
        static ArrayList<String> groupNames = new ArrayList<String>();
        static ArrayList<ArrayList<Acts>> obsList = new ArrayList<ArrayList<Acts>>

();

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.addact);

            ShowTitle = (TextView)findViewById(R.id.showtitleact);
            ShowTitle.setText(getIntent().getStringExtra("ShowTitle"));

            Date = (TextView)findViewById(R.id.showdateact);
            Date.setText(DateSpinner.date);

            cuesheetnimber=getIntent().getLongExtra("_ID", 0);

            expandableListView =getExpandableListView();
            expandableListView.setOnGroupClickListener(this);

            expListAdapter = new ActAdapter( this,groupNames, obsList );
            setListAdapter( expListAdapter );

            expListAdapter.groups.add("a");
            //AUDITDATA.HCWlist[AUDITDATA.row]=AUDITDATA.HCWNAME;

            ArrayList<Acts> obs = new ArrayList<Acts>();
            obs.add(new Acts());
            //AUDITDATA.row++;
            expListAdapter.childs.add(obs);
            expandableListView.expandGroup(0);
            expListAdapter.notifyDataSetChanged();

            Button add=(Button)findViewById(R.id.button_add_act);
            add.setOnClickListener(this);

            Button SaveandExit=(Button)findViewById(R.id.SaveandExit);
            SaveandExit.setOnClickListener(this);
        }

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()) {
            case R.id.button_add_act:
                Button b=(Button)v;
                b.setText("Add Another Act");
                 expListAdapter.addHcwGroup(expandableListView);
              //   expListAdapter.notifyDataSetChanged();   
                 break;
            case R.id.SaveandExit:
                // expListAdapter.notifyDataSetChanged();
                 saveandexit();
                 clear();
                 finish();
                 break;
            default:
                break;
            }
        }

        private void clear() {
            // TODO Auto-generated method stub
            ActAdapter.actlist.clear();
            ActAdapter.groups.clear();
            ActAdapter.childs.clear();

        }

    @Override
    public void onBackPressed() {
        ActAdapter.actlist.clear();
        ActAdapter.groups.clear();
        ActAdapter.childs.clear();
        // TODO Auto-generated method stub
        super.onBackPressed();
    }
        private void saveandexit() {
            // TODO Auto-generated method stub
            for (Acts act :ActAdapter.actlist) {
                Init.setActs(this, act);

            }
        }
    }

And here is adapter code 

   ;

    import java.util.ArrayList;

    import android.content.Context;
    import android.graphics.Color;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseExpandableListAdapter;
    import android.widget.EditText;
    import android.widget.ExpandableListView;
    import android.widget.TimePicker;

    public class ActAdapter extends BaseExpandableListAdapter  {
        public static int staticindex = 0;
        private Context context;
        static public ArrayList<String> groups;
        static public ArrayList<ArrayList<Acts>> childs;
        private LayoutInflater inflater;
        public boolean flag = false;

        public ActAdapter(Context context, ArrayList<String> groups,
                ArrayList<ArrayList<Acts>> childs) {
            this.context = context;
            this.groups = groups;
            this.childs = childs;
            inflater = LayoutInflater.from(context);
        }

        public Object getChild(int groupPosition, int childPosition) {
            return childs.get(groupPosition).get(childPosition);
        }

        public long getChildId(int groupPosition, int childPosition) {
            return (long) (groupPosition * 1024 + childPosition); // Max 1024
            // children per
            // group
        }

        public void setChilds(ArrayList<ArrayList<Acts>> childs) {
            this.childs = childs;
        }

        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
            View v = null;
        long ShowID=AddActActivity.cuesheetnimber;

            EditText ACTNUMBER;
            EditText  ACTTITLE;
            TimePicker STARTTIME;
            TimePicker ENDTIME;
            EditText ACTIONDATA;
            EditText NOTE;

                if (convertView != null) {
                    v = convertView;

                    Log.d("dfg", groupPosition+"act set"+childPosition);

                ACTNUMBER = (EditText) v.findViewById(R.id.ActionNumber);
                ACTTITLE = (EditText) v.findViewById(R.id.ActionTitle);
                STARTTIME = (TimePicker) v.findViewById(R.id.starttime);

                ENDTIME = (TimePicker) v.findViewById(R.id.endttime);

                ACTIONDATA = (EditText) v.findViewById(R.id.Actionname);

                NOTE = (EditText) v.findViewById(R.id.Noteact);

                Acts acts = new Acts();
                acts.setShowID(ShowID + "");
                acts.setACTIONDATA(ACTIONDATA.getText().toString());
                acts.setACTNUMBER(ACTNUMBER.getText().toString());
                acts.setNOTE(NOTE.getText().toString());
                acts.setACTTITLE(ACTTITLE.getText().toString());
                acts.setENDTIME(ENDTIME.getCurrentHour().toString() + "x"
                        + ENDTIME.getCurrentMinute().toString());
                acts.setSTARTTIME(STARTTIME.getCurrentHour().toString() + 

"x"
                        + STARTTIME.getCurrentMinute().toString());
                actlist.add(acts);

                } else {Log.d("dfg", "chil null");
                actlist.clear();
                    v = inflater.inflate(R.layout.act_child_row, parent, 

false);
                }

            return v;
        }

        public int getChildrenCount(int groupPosition) {
            if (groupPosition > (groups.size() - 1))
                return 0;
            return childs.get(groupPosition).size();
        }

        public Object getGroup(int groupPosition) {
            return groups.get(groupPosition);
        }

        public int getGroupCount() {
            return groups.size();
        }

        public long getGroupId(int groupPosition) {
            return (long) (groupPosition * 1024); // To be consistent with
            // getChildId
        }

        static int po = 0;
        public static ArrayList<Acts> actlist = new ArrayList<Acts>();
        public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {

            po++;
            View v = null;

        if (convertView != null) {
                v = convertView;

    Log.d("dfg", "grp reloaded");
            } else {

                v = inflater.inflate(R.layout.act_group_row, parent, false);

                Log.d("dfg", "grp created");    
            }

    ;

            return v;
        }
     public static void save()
     {}
        public boolean hasStableIds() {
            return true;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public void addHcwGroup(ExpandableListView expandableListView) {

                childs.get(0).add(new Acts());
                notifyDataSetChanged();

        }

        public void onGroupCollapsed(int groupPosition) {
        }

        public void onGroupExpanded(int groupPosition) {
        }

    } 
```

感谢您尝试提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:28:06.003

很抱歉耽搁了很长时间。我已经测试了代码，似乎与这个问题有关，没有什么是真正错误的。我的系统上发生的事情是`ExapandableListActivity`加载，然后我单击添加按钮，首先加载 2 个子行，然后加载 1 个子行。**但是**您的适配器启动时有一排准备好加载。**而且**您必须意识到您的`ExpandableListView`初始化*崩溃*了。在您将第二行添加到已经存在的行**之后**，您没有调用该`.expandGroup();`方法，直到单击的按钮。我希望这是有道理的。也许它不是那么明显，因为你什么也没显示。**`groupView`**

 **基本上，我的建议是`.expandGroup();`在您调用命令后立即调用该命令`setListAdapter();`以使事情更加明显。那么应该很明显你需要调整什么才能得到你想要的结果。

* * *

我完全道歉，似乎我完全误解了这个问题。我相信您希望能够自动将您在 editTexts 中选择的所有值保存在可扩展列表中。如果是这样，我会告诉你，你真的应该重新考虑你的设计。为此使用列表视图的问题是，当一行离开视图时，它就永远消失了，您需要重新制作它——因此视图中的所有值都将消失。当然有`convertView`但这样做是不可靠的，因为它绝对不会将最近删除的视图放回相同的位置，无论如何都不是故意的。一旦它们不在视线范围内，它会继续对您的子行进行洗牌，我敢肯定您不想要。您的方法肯定会给您带来问题，因为您一直在清除 getView 中的集合，而且您还没有考虑在用户“完成”输入数据时如何捕获数据。

但是，如果这就是您想要的方式，您可以尝试将 textwatchers 应用于所有内容，并让它们不断调整集合中的相应值。`Yami's`此处的答案突出显示了该技术：[如何从网格视图中获取值](https://stackoverflow.com/questions/14012181/how-to-get-values-from-grid-view/14012405#14012405)。

但是，我会觉得这太费力了。您可能会发现这样做`TableLayout`更有益，因为它将所有内容都保存在内存中，您可以将所有视图添加到布局中，然后将这些视图添加到相应的集合中，然后您可以简单地循环遍历 tablelayout 的内容来检索您的值。这是一种选择，尽管如果不加以管理，您的 heapsize 可能会受到影响。

更好的性能方面是在您的每个子行上合并一个按钮`ExpandableListView`，这样只有在单击该按钮时，您才能将相应行的内容保存到一个集合中。

到目前为止，我只是给你我能想到的解决方案，但如果你亲自问我会怎么做，我不会使用这种类型的`ListView`。我会将此组件视为一种形式，我会尝试将其作为一种形式`Dialog`。然后，如果我选择，我可以简单地将一整套详细信息显示为单独的列表，但只有一个 xml 膨胀用于输入详细信息。**

# c# - 随机平滑图

> ID：14032509
> 
> 赞同：4
> 
> 时间：2012-12-25T17:02:41.357
> 
> 标签：c#, math, graph

我想要类似于下图中的图形。我想实现类似于 cos/sin 的图形，但有一点随机性。图表不应超过（100）或低于（0）限制。如果没有随机性，我们可以编写如下函数：

```
f(x)=cos(x)*50+50 
```

![随机图](../Images/bdb89f786ef39a65673795b79a875e43.png)

我正在寻找任何语言的实现或只是一个简单的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:07:22.113

您可以简单地将一些 sin/cos 与随机系数和周期相​​加。

**实现示例：**

```
internal struct SineWave
{
    internal readonly double Amplitude;
    internal readonly double OrdinaryFrequency;
    internal readonly double AngularFrequency;
    internal readonly double Phase;
    internal readonly double ShiftY;

    internal SineWave(double amplitude, double ordinaryFrequency, double phase, double shiftY)
    {
        Amplitude = amplitude;
        OrdinaryFrequency = ordinaryFrequency;
        AngularFrequency = 2 * Math.PI * ordinaryFrequency;
        Phase = phase;
        ShiftY = shiftY;
    }
}

public class RandomCurve
{
    private SineWave[] m_sineWaves;

    public RandomCurve(int components, double minY, double maxY, double flatness)
    {
        m_sineWaves = new SineWave[components];

        double totalPeakToPeakAmplitude = maxY - minY;
        double averagePeakToPeakAmplitude = totalPeakToPeakAmplitude / components;

        int prime = 1;
        Random r = new Random();
        for (int i = 0; i < components; i++)
        {
            // from 0.5 to 1.5 of averagePeakToPeakAmplitude 
            double peakToPeakAmplitude = averagePeakToPeakAmplitude * (r.NextDouble() + 0.5d);

            // peak amplitude is a hald of peak-to-peak amplitude
            double amplitude = peakToPeakAmplitude / 2d;

            // period should be a multiple of the prime number to avoid regularities
            prime = Utils.GetNextPrime(prime);
            double period = flatness * prime;

            // ordinary frequency is reciprocal of period
            double ordinaryFrequency = 1d / period;

            // random phase
            double phase = 2 * Math.PI * (r.NextDouble() + 0.5d);

            // shiftY is the same as amplitude
            double shiftY = amplitude;

            m_sineWaves[i] =
                new SineWave(amplitude, ordinaryFrequency, phase, shiftY);
        }
    }

    public double GetY(double x)
    {
        double y = 0;
        for (int i = 0; i < m_sineWaves.Length; i++)
            y += m_sineWaves[i].Amplitude * Math.Sin(m_sineWaves[i].AngularFrequency * x + m_sineWaves[i].Phase) + m_sineWaves[i].ShiftY;

        return y;
    }
}

internal static class Utils
{
    internal static int GetNextPrime(int i)
    {
        int nextPrime = i + 1;
        for (; !IsPrime(nextPrime); nextPrime++) ;
        return nextPrime;
    }

    private static bool IsPrime(int number)
    {
        if (number == 1) return false;
        if (number == 2)  return true;

        for (int i = 2; i < number; ++i)
            if (number % i == 0) return false;

        return true;
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T17:54:06.007

所以这是一个用 C# 编写的代码，它可以通过随机输入值进行更多随机化。我只是给你一些带有值的输出，看看它是否适合你。可以针对余弦和正弦值修改 Amplite。最后添加偏移量（因此最小值始终为 0）并进行缩放以确保最大值为 100。如您所见，可以添加噪声（图 3、图 4）。

> terr1: RandomTerrarain(1000, 4, 1, 10, 5, 0); [图1](http://dl.dropbox.com/u/64369382/terr1.png)
> 
> terr2: RandomTerrarain(1000, 2, 3, -10, 5, 0); [图 2](http://dl.dropbox.com/u/64369382/terr2.png)

希望这可以帮助！

```
 private static Random rnd = new Random();
    private double[] RandomTerrarain(int length, int sinuses, int cosinuses, double amplsin, double amplcos, double noise)
    {
        if (length <= 0)
            throw new ArgumentOutOfRangeException("length", length, "Length must be greater than zero!");
        double[] returnValues = new double[length];

        for (int i = 0; i < length; i++)
        {
            // sin
            for (int sin = 1; sin <= sinuses; sin++)
            {
                returnValues[i] += amplsin * Math.Sin((2 * sin * i * Math.PI) / (double)length);
            }
            // cos
            for (int cos = 1; cos <= cosinuses; cos++)
            {
                returnValues[i] += amplcos * Math.Cos((2 * cos * i * Math.PI) / (double)length);
            }
            // noise
            returnValues[i] += (noise * rnd.NextDouble()) - (noise * rnd.NextDouble());
        }
        // give offset so it be higher than 0
        double ofs = returnValues.Min();
        if (ofs < 0)
        {
            ofs *= -1;
            for (int i = 0; i < length; i++)
            {
                returnValues[i] += ofs;
            }
        }
        // resize to be fit in 100
        double max = returnValues.Max();
        if (max >= 100)
        {
            double scaler = max / 100.0;
            for (int i = 0; i < length; i++)
            {
                returnValues[i] /= scaler;
            }
        }
        return returnValues;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T11:16:22.870

看看[xkcd-style graphs](http://dan.iel.fm/xkcd/)，一种向图形添加随机噪声并以使其看起来像手绘的方式平滑它的方法，模仿[xkcd 卡通](http://xkcd.com/)的风格。虽然这不是您想要的，但我认为只需将输入图设置为零（例如 y=0）并将噪声平滑参数调整为更大的噪声幅度和更大的平滑距离可能会导致随机图的类型你正在寻找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T17:16:19.573

对于您的功能，您可以使用[`Math`](http://msdn.microsoft.com/en-us/library/4zfefwz9%28v=vs.110%29.aspx)类和[`Cos()`](http://msdn.microsoft.com/en-us/library/system.math.cos%28v=vs.110%29.aspx)方法。

```
public static double GetCosFunction(double d)
{
     return Math.Cos(d) * 50 + 50;
} 
```

对于图形解决方案，您可以查看这些主题；

*   [http://www.smokycogs.com/blog/a-mathematical-graphing-application-in-c-sharp/](http://www.smokycogs.com/blog/a-mathematical-graphing-application-in-c-sharp/)
*   [http://www.codeproject.com/Articles/32836/A-simple-C-library-for-graph-plotting](http://www.codeproject.com/Articles/32836/A-simple-C-library-for-graph-plotting)
*   [http://www.c-sharpcorner.com/tags/Math-Graph-in-C%23](http://www.c-sharpcorner.com/tags/Math-Graph-in-C%23)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T17:57:15.000

忘记这个了……

> terr3: RandomTerrarain(1000, 5, 5, -2, 5, 2); [图 3](http://dl.dropbox.com/u/64369382/terr3.png)
> 
> terr4: RandomTerrarain(1000, 4, 1, 5, -20, 1); [图 4](http://dl.dropbox.com/u/64369382/terr4.png)

# javascript - 通过 jquery 使用输入标题作为 div 的文本

> ID：14032510
> 
> 赞同：1
> 
> 时间：2012-12-25T17:02:52.260
> 
> 标签：javascript, jquery, tooltip

html:

```
<div id='wrapper'>
<div id='settings'>Settings'</div>
<div id='menu'>
   Jobname <input type=text id='tipjob' title='this text should go into the tooltip' length='20'>
   Appname <input type=text id='tipapp' title='this text should as app text in the tooltip' length='20'>
</div>            
  <div id="build">Builds
      <div id="build-log">Build Log</div>
  </div>
  <div id="content">Content
      <div id="tooltips">Tooltip</div>
  </div>
<div id='footer'>Footer</div>
</div> 
```

javascript:

```
$(document).ready(function(){
$('#tipjob').bind('mouseenter', function() {
    $('#tooltips').fadeIn();
});
$('#tipjob').bind('mouseleave', function() {
    $('#tooltips').fadeOut();
});
}); 
```

也可以在 jsfiddle 上查看 css。

[http://jsfiddle.net/yZZDd/433/](http://jsfiddle.net/yZZDd/433/)

在上面的示例（非工作）中，我希望能够在有人将鼠标悬停在输入字段上时淡入/淡出某些文本。文本应该进入现在隐藏在css中的div“工具提示”（也许不是最好的方式）

除了默认的 jquery 之外，我不需要任何其他工具提示库（因为关于工具提示，我看不到它的需要）

所以我假设我在每个输入字段中使用 mouseenter/mouseleave，然后设置一个淡入淡出但我不知道如何以某种方式将输入字段中的文本放在那里。

由于我从 1 个输入字段开始，我可以只显示和隐藏 div，但这成为第二个输入字段的问题 :)

希望我解释正确。第一次来这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:10:51.500

试试这个 -[**演示**](http://jsfiddle.net/yZZDd/447/)

```
$(document).ready(function(){
    $('input').on({
        mouseenter: function() {
            $('#tooltips').text( $(this).prop("title") ).stop(1, 1).fadeIn();
        },
        mouseleave: function() {
            $('#tooltips').fadeOut();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:14:09.460

看到这个：http: [//jsfiddle.net/yZZDd/448/](http://jsfiddle.net/yZZDd/448/)

而是使用`id`使用`class`

```
$(document).ready(function(){
   $('.tipjob').bind('mouseenter', function() {
      $('#tooltips').text('').text($(this).attr('title')).stop().fadeIn();
   });
   $('.tipjob').bind('mouseleave', function() {
      $('#tooltips').stop().fadeOut();
   });
}); 
```

# c# - 如何获取应用程序使用的内存量

> ID：14032515
> 
> 赞同：36
> 
> 时间：2012-12-25T17:03:24.850
> 
> 标签：c#, memory-management, memory-leaks

> **可能重复：**
> [如何在 C# 中获取可用或使用的内存](https://stackoverflow.com/questions/750574/how-to-get-memory-available-or-used-in-c-sharp)

我想在我的应用程序的状态栏中可视化我的应用程序使用的内存。我正在寻找内存泄漏 - 但我不知道在哪里。现在，我的想法是在状态栏中可视化已使用的内存，以便在使用应用程序时可以看到它并找到问题发生的部分，然后我可以对此进行分析。

有人可以给我一些帮助，我怎样才能得到用过的内存。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-25T17:11:09.957

您可以使用以下函数（true 参数告诉 GC 先执行收集）：

```
long memory = GC.GetTotalMemory(true); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-25T17:12:59.977

你可以试试`GC.GetTotalMemory`：

它检索当前认为分配的字节数。一个参数表示此方法是否可以在返回之前等待一个短的时间间隔，以允许系统收集垃圾并完成对象。

* * *

或者

```
using System.Diagnostics;

Process currentProc = Process.GetCurrentProcess(); 
```

获得对当前进程的引用后，您可以通过读取 PrivateMemorySize64 属性来确定其内存使用情况。

```
long memoryUsed = currentProc.PrivateMemorySize64; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-25T17:45:19.563

如果要监视应用程序使用的内存，则无需为此编写代码。只需使用 Windows 中的性能计数器（[http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)）。他们将通过图表提供您需要的信息！有很多内存计数器（[http://msdn.microsoft.com/en-us/library/x2tyfybc.aspx](http://msdn.microsoft.com/en-us/library/x2tyfybc.aspx)），其中一个将包含您需要的数据，我想它会帮助您找出您的应用程序开始使用比应有的更多内存。

但是，如果您确实需要将此信息放入您的应用程序中，您仍然可以使用性能计数器。.NET 在 System.Diagnostics 命名空间中有类来访问它们的数据。请参阅此示例：[https ://weblog.west-wind.com/posts/2014/Sep/27/Capturing-Performance-Counter-Data-for-a-Process-by-P​​rocess-Id](https://weblog.west-wind.com/posts/2014/Sep/27/Capturing-Performance-Counter-Data-for-a-Process-by-Process-Id)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-25T17:11:19.330

为什么不只使用 TaskManager 或更高级的[Sysinternals](http://technet.microsoft.com/en-us/sysinternals/bb795533)工具监视内存使用情况，并且只有在您确定哪些工作流异常提高了内存使用情况之后，然后使用 CLR Profiler 或其他工具对应用程序进行分析。

# ipad - iPad 2 上的 Safari 输入文件奇怪的行为

> ID：14032518
> 
> 赞同：0
> 
> 时间：2012-12-25T17:04:21.940
> 
> 标签：ipad, input, safari

我在 HTML 页面中有一个`<input id="foo" type="text">`和一个`<input type="file">`。我知道输入文件在 iPad 2 中是灰色的，因为它不受支持。

但是我发现真正奇怪的是我无法设置“foo”的值，例如`document.getElementById("foo").value='something';`

如果我删除输入文件，那么一切正常。

这是一个已知问题/错误还是我错过了什么？我真的觉得这是一种奇怪的行为。

提前致谢。

# window - Pygtk如何将窗口移出屏幕

> ID：14032520
> 
> 赞同：1
> 
> 时间：2012-12-25T17:04:23.297
> 
> 标签：window, gtk, pygtk

我在 gnome 上有 ubuntu 12.04，并试图将 pygtk 中的基本窗口移出屏幕。我需要从屏幕右侧滑入窗口。问题是窗口管理器不会让我这样做，一旦它到达右边缘它就会停止移动。

是否有一些设置告诉窗口管理器我需要能够离开屏幕。可以手动将同一窗口移出屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:05:33.910

调整窗口大小而不是移动它。

# python - Python数据结构按字母顺序排序列表

> ID：14032521
> 
> 赞同：202
> 
> 时间：2012-12-25T17:04:55.777
> 
> 标签：python, list, sorting, alphabetical

我对python中的数据结构有点困惑；`()`, `[]`, 和`{}`. 我正在尝试对一个简单的列表进行排序，可能是因为我无法识别我无法对其进行排序的数据类型。

我的清单很简单：`['Stem', 'constitute', 'Sedge', 'Eflux', 'Whim', 'Intrigue']`

我的问题是这是什么类型的数据，以及如何按字母顺序对单词进行排序？

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2012-12-25T17:10:51.413

`[]`表示一个[列表](http://docs.python.org/3/tutorial/introduction.html#lists)，`()`表示一个[元组](http://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences)，`{}`表示一个[字典](http://docs.python.org/3/tutorial/datastructures.html#dictionaries)。你应该看看[官方的 Python 教程](http://docs.python.org/3/tutorial/index.html)，因为这些是 Python 编程的基础知识。

你所拥有的是一个字符串列表。你可以这样排序：

```
In [1]: lst = ['Stem', 'constitute', 'Sedge', 'Eflux', 'Whim', 'Intrigue']

In [2]: sorted(lst)
Out[2]: ['Eflux', 'Intrigue', 'Sedge', 'Stem', 'Whim', 'constitute'] 
```

如您所见，以大写字母开头的单词优先于以小写字母开头的单词。如果要对它们进行独立排序，请执行以下操作：

```
In [4]: sorted(lst, key=str.lower)
Out[4]: ['constitute', 'Eflux', 'Intrigue', 'Sedge', 'Stem', 'Whim'] 
```

您还可以通过执行以下操作以相反的顺序对列表进行排序：

```
In [12]: sorted(lst, reverse=True)
Out[12]: ['constitute', 'Whim', 'Stem', 'Sedge', 'Intrigue', 'Eflux']

In [13]: sorted(lst, key=str.lower, reverse=True)
Out[13]: ['Whim', 'Stem', 'Sedge', 'Intrigue', 'Eflux', 'constitute'] 
```

**请注意：**如果您使用 Python 3，那么`str`对于每个包含人类可读文本的字符串来说，它是正确的数据类型。但是，如果您仍然需要使用 Python 2，那么您可能会处理具有`unicode`Python 2 中数据类型的 unicode 字符串，而不是`str`. 在这种情况下，如果你有一个 unicode 字符串列表，你必须写`key=unicode.lower`而不是`key=str.lower`.

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-25T17:21:18.280

[`sorted`](http://docs.python.org/2/library/functions.html#sorted)Python有`[1,2,3]`一个内置的`{1:2,3:4}`函数`{1,2,3,4`叫做; 或元组 ( `(1,2,3,4)`))。

```
>>> x = [3,2,1]
>>> sorted(x)
[1, 2, 3]
>>> x
[3, 2, 1] 
```

列表还有一个[`sort`](http://docs.python.org/2/library/stdtypes.html#typesseq-mutable)方法可以就地执行排序（x.sort() 返回 None 但会更改 x 对象）。

```
>>> x = [3,2,1]
>>> x.sort()
>>> x
[1, 2, 3] 
```

两者都带有一个`key`参数，它应该是一个可调用的（函数/lambda），您可以使用它来更改排序依据。
例如，`(key,value)`要从按值排序的 dict 中获取 -pairs 列表，可以使用以下代码：

```
>>> x = {3:2,2:1,1:5}
>>> sorted(x.items(), key=lambda kv: kv[1])  # Items returns a list of `(key,value)`-pairs
[(2, 1), (3, 2), (1, 5)] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-25T17:10:00.300

您正在处理一个 python 列表，对其进行排序就像这样做一样简单。

```
my_list = ['Stem', 'constitute', 'Sedge', 'Eflux', 'Whim', 'Intrigue']
my_list.sort() 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-25T17:10:39.663

您可以使用内置`sorted`功能。

```
print sorted(['Stem', 'constitute', 'Sedge', 'Eflux', 'Whim', 'Intrigue']) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-09T09:10:11.533

`ListName.sort()`将按字母顺序对其进行排序。您可以`reverse=False/True`在括号中添加以颠倒项目的顺序：`ListName.sort(reverse=False)`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-25T17:11:22.150

```
>>> a = ()
>>> type(a)
<type 'tuple'>
>>> a = []
>>> type(a)
<type 'list'>
>>> a = {}
>>> type(a)
<type 'dict'>
>>> a =  ['Stem', 'constitute', 'Sedge', 'Eflux', 'Whim', 'Intrigue'] 
>>> a.sort()
>>> a
['Eflux', 'Intrigue', 'Sedge', 'Stem', 'Whim', 'constitute']
>>> 
```

# android - Google Drive + Android：上传大文件时流意外结束

> ID：14032524
> 
> 赞同：1
> 
> 时间：2012-12-25T17:05:10.370
> 
> 标签：android, google-drive-api

我有一个 Android 应用程序，可以将您的文件的压缩备份上传到云端。

直到最近，我还专门使用 Dropbox，它运行良好。

最近我决定实现对 Google Drive 的支持。

当文件很小（大约 15Mb）时，它正在工作......大部分时间（有时在上传开始后我会收到 401 错误）。

当文件很大（> 1Gb）时，我总是会收到错误消息：

```
java.io.IOException: unexpected end of stream 
```

这是我的代码：

```
public CloudResult sendFile(File fileContent, long added) {
    CloudResult result = new CloudResult();

    try {

        mProgress = new FileUploadProgressListener(fileContent.getName());
        mediaContent = new FileContent(ZIP_MIME_TYPE, fileContent);

        com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
        body.setTitle(fileContent.getName());
        body.setMimeType(ZIP_MIME_TYPE);

        Drive.Files.Insert inserted = getDrive().files().insert(body, mediaContent);
        inserted.getMediaHttpUploader()
                .setDirectUploadEnabled(false)
                .setChunkSize(MediaHttpUploader.DEFAULT_CHUNK_SIZE)
                .setProgressListener(mProgress);

        com.google.api.services.drive.model.File f = inserted.execute();

        // loop over all files in drive and see if any need to be
        // synced locally
        FileList driveFilesList = getDrive().files().list().execute();

        mTotalUploaded = added;
        for (com.google.api.services.drive.model.File remote : driveFilesList.getItems()) {
            Log.d(Ln.TAG, remote.getLabels().toPrettyString());
        }
    } catch (IOException e) {
        result = new CloudResult(getClass().getSimpleName() + " - " + e.getLocalizedMessage());
        if (Ln.DEBUG) {
            Log.e(Ln.TAG, "Error in GDrive - " + e.getLocalizedMessage(), e);
        }
    }
    return result;
} 
```

由于我对 InputStream 没有真正的控制权，所以我不知道该怎么做。

在此过程中，我已经开启了一些唤醒器。

一切都在服务内的线程中执行。该服务与 Dropbox 相同，因此错误与此代码的执行方式无关。它在别的地方，但我不知道在哪里！可能是 GDrive 的错误。

我找到了这些线程，但没有真正的答案： [Uploading jpeg to Google Drive from Android app "unexpected end of stream"](https://stackoverflow.com/questions/12469588/uploading-jpeg-to-google-drive-from-android-app-unexpected-end-of-stream)

有任何想法吗？

**第二个问题：**如何获得一个线性进度监听器，而不是在每个块上传后调用的东西（这里每 10Mb）？

# python - x.lower() 使我的字符串可统一。为什么

> ID：14032529
> 
> 赞同：1
> 
> 时间：2012-12-25T17:05:40.453
> 
> 标签：python, lowercase

我在 python 中创建了一个代码来搜索 document 中的一个单词。文档以字典形式存储，以“url”为键，内容为值。我想在执行搜索操作之前将文档的文本转换为小写。

```
def get_page(url):
    if url in cache:
        x=cache[url]
        return x.lower()
    else:
        return None 
```

我使用了这段代码。`cache`是字典，`url`是关键。但我得到这个错误......

```
Line 324: TypeError: Cannot call method 'tp$iter' of null 
```

我认为这是一个可组合的字符串。

错误发生在这里，在第一行

```
for char in source:
    if char in splitlist:
        atsplit = True 
```

`source``x`与上面引用的函数相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:25:02.730

`for char in source`确保在返回时不会进入循环，`None`因为`None`它是不可迭代的。除了返回 None 之外，您还可以 return `""`，这取决于您如何使用该`get_page`函数

您假设不正确的简单演示

```
for char in "google.com".lower():
    print(char)

# python test.py
g
o
o
g
l
e
.
c
o
m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:16:30.533

这几乎可以肯定意味着您的函数中的`else:`子句受到了打击。`get_page()`不是你有一个可组合的字符串；这是你有的`None`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:26:18.200

是的，当您检查缓存时，这是未命中的情况。这是带有示例案例的更新功能。

```
cache = {}
x = ""

def get_page(url):
    if url in cache:
        x=cache[url]
        return x.lower()
    else:
        return ""

url = 'some KEY'
cache[url] = 'some VALUE'

print get_page(url)
x = get_page(url)

for char in x:
    print 'It works now'

print get_page('Does not exist')
x = get_page('Does not exist')

for char in x:
    print 'It works now' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T17:43:36.843

当您的函数返回时出现问题`None`，这是不可迭代的。
一个简单的解决方法是：

```
def get_page(url):
    if url in cache:
        x=cache[url]
        return x.lower()
    else:
        return "" 
```

这是有效的，因为一个字符串，即使是一个空的，也是*可*`TypeError`迭代的（零次），因此返回一个空的作为结果可以避免`url`.`cache`

`cache`您可以通过使用字典的方法将函数简化为一行，该`get()`方法将在未找到该项目时返回默认值。同样，这很有效，因为它也可以小写空字符串，因此您可以避免特殊情况下`url`未找到。

```
def get_page(url):
    return cache.get(url, "").lower() 
```

# css - 折纸纸效果

> ID：14032533
> 
> 赞同：3
> 
> 时间：2012-12-25T17:06:20.600
> 
> 标签：css, 3d

我已经在互联网上搜索了可以回答我的问题或至少给我一个起点的东西。

如果可能的话，我想用纯 CSS 创建下面的图像：

最简单的方法是使用背景图像或精灵创建此效果。但是，这将是一个响应式网站，因此图像无法很好地缩放并且可能会损坏，我也无法控制将输入的文本量，因为这是一个侧边栏项目，也将作为一个按钮在整个站点中出现，搜索输入和通用文本。

该网站已经包含丰富的 JavaScript，因此非 JavaScript 解决方案将是理想的。另外，我不会处理 JavaScript。

我猜测 CSS 渐变的使用很重，但我不确定如何将效果分成四个部分，并确保它可以根据文本量向下缩放。

盒子的 3d 方面是我在某些时候需要担心的其他事情。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:27:05.600

使用纯 CSS(3) 你可以做到。我们需要`transform:skew()`. 每个盒子都有自己的`div`. CSS 每个`div`. `:before`需要伪元素来“修复”两个底部元素的不需要的顶部倾斜。

**HTML**

```
​&lt;div class="origami">
    <div class="origami-box origami-box1"></div>
    <div class="origami-box origami-box2"></div>
    <div class="origami-box origami-box3"></div>
    <div class="origami-box origami-box4"></div>
    <div class="origami-content">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
.origami {
    margin-top:100px;
    margin-left:100px;
    width:160px;
    position:relative;
}
.origami-box {
    height:80px;
    width:80px;
    float:left;
}
.origami-box1 {
    background:red;
    -webkit-transform:skew(0deg,-4deg);
    -moz-transform:skew(0deg,-4deg);
    transform:skew(0deg,-4deg);
}
.origami-box2 {
    background:blue;
    -webkit-transform:skew(0deg,4deg);
    -moz-transform:skew(0deg,4deg);
    transform:skew(0deg,4deg);
}
.origami-box3 {
    background:green;
    -webkit-transform:skew(0deg,4deg);
    -moz-transform:skew(0deg,4deg);
    transform:skew(0deg,4deg);
}
.origami-box.origami-box3:before {
    content: "";
    display: block;
    width: 80px;
    height: 80px;
    position: relative;
    top: -3px;
    background: green;
    -webkit-transform: skew(0deg,-4deg);
    -moz-transform: skew(0deg,-4deg);
    transform: skew(0deg,-4deg);
}
.origami-box4 {
    background:yellow;
    -webkit-transform:skew(0deg,-4deg);
    -moz-transform:skew(0deg,-4deg);
    transform:skew(0deg,-4deg);
}
.origami-box.origami-box4:before {
    content: "";
    display: block;
    width: 80px;
    height: 80px;
    position: relative;
    top: -3px;
    background: yellow;
    -webkit-transform: skew(0deg,4deg);
    -moz-transform: skew(0deg,4deg);
    transform: skew(0deg,4deg);
}
.origami-content {
    position:absolute;
    top:10px;
    padding:10px;
}​ 
```

**演示：http:** [//jsfiddle.net/Qwd4R/1](http://jsfiddle.net/Qwd4R/1)

# c++ - 检测窗口是否已完成绘制并显示在屏幕上（WINAPI）

> ID：14032534
> 
> 赞同：1
> 
> 时间：2012-12-25T17:06:23.067
> 
> 标签：c++, winapi

我有个问题。我在一个线程中创建了一个窗口。我创建了一个互斥锁，以便窗口句柄不能通过函数检索，直到它不为 0。

我还使用了一个while循环来确保句柄不为0。

事实是，句柄永远不会为 0，因为 CreateWindowEx 在窗口甚至显示在屏幕上之前返回窗口的句柄。

所以我的互斥锁和while循环失败了。我需要知道窗口何时完全显示并完成它必须做的任何事情，以便我可以从另一个线程上绘制它。

Handle 不是 0，DC 不是 0。但是当我画的时候，它什么也没画。如果我在执行 CreateWindowEx 和 ShowWindow 之后立即放置 Sleep(100)，则会显示窗口并正确绘制图像。我也在循环 IsWindowVisisble(WindowHandle) 时尝试过。那也失败了。

我不想睡​​觉（100），我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T17:18:58.587

不要尝试从另一个线程在窗口上绘图。

将一些数据发布到窗口并让它根据该数据绘制自己。无论如何，它需要准备好绘制自己以响应 WM_PAINT，并且在任何情况下都需要任何必要的数据。跳过箍以不同的方式进行初始绘图将增加大量工作，并且基本上不会给您任何回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:34:46.467

另请注意，在您对消息队列执行某些操作之前，不会发生任何事情（不会显示窗口）；即`PeekMessage`/`GetMessage`和`DispatchMessage`。而且，正如其他人所说，如果您使用 GDI 绘图，则必须在`WM_PAINT`. 如果要强制更新，请使用`InvalidateRect`. 请记住，如果您尝试使用由其他线程创建的窗口，则会有很多问题。

# java - @ManagedBean 可以是@Entity 吗？

> ID：14032544
> 
> 赞同：2
> 
> 时间：2012-12-25T17:08:54.733
> 
> 标签：java, javabeans

刚看完JEE6教程，正在设计一个web应用；@Entity bean 也可以是 @Managed bean 吗？这是一种糟糕的开发实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:13:28.123

`@Managed`通常用于让容器（例如 JavaEE 应用程序服务器）从预先创建的项目池中按需提供 bean 的实例。

`@Entity`另一方面，bean 基本上是对象形式的持久数据（例如来自数据库后端）的表示。

我认为同时拥有两个注释不是很合理，但我不确定它是否有效（我猜不是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T12:32:10.027

是的，它们两者都可以，事实上，对于完全加载的域对象，它是更可取的。

您可以持久化数据，注入其他类，并允许注入其他类。都在同一个对象上。

# facebook - facebook : 无法下载 og:image？

> ID：14032545
> 
> 赞同：1
> 
> 时间：2012-12-25T17:09:20.757
> 
> 标签：facebook, image

在调试页面：

我们输入页面： http: [//www.hkofferhouse.com/items/last-update/20121020/list.htm](http://www.hkofferhouse.com/items/last-update/20121020/list.htm) 工作正常，我们可以得到图片缩略图，我们可以选择缩略图。

但如果输入页面： http: [//www.hkofferhouse.com/items/last-update/20121019/list.htm](http://www.hkofferhouse.com/items/last-update/20121019/list.htm) 无法下载 og:image 。无法获取图片缩略图。

这 2 页关于设置是相同的。但是为什么很多页面可以得到缩略图。许多页面无法获取缩略图？

请帮忙 。非常感谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:09:25.823

尝试通过调试器运行链接。
[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.hkofferhouse.com%2Fitems%2Flast-update%2F20121019%2Flist.htm](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.hkofferhouse.com%2Fitems%2Flast-update%2F20121019%2Flist.htm)
好像是og:image url 配置不正确，有 2 个 .jpg 扩展名。

```
meta property="og:image" content="http://www.hkofferhouse.com/GAME/PS3/ps390653/ps390653p.jpg.jpg" 
```

# php - kohana ORM foreign_key

> ID：14032551
> 
> 赞同：1
> 
> 时间：2012-12-25T17:10:11.973
> 
> 标签：php, kohana, kohana-orm, kohana-3.2

我正在尝试找到一种从 Kohana 的不同相关表中获取数据的方法。

我有定义为的文件表：

```
class Model_File extends ORM {

    protected $_belongs_to = array
    (
    'student' => array ('foreign_key' => 'student_id' )
    );
} 
```

然后会话表：

```
class Model_Filesession extends ORM {

    protected $_primary_key = 'id';
    protected $_table_name = 'file_sessions';  

    protected $_belongs_to = array
    (
    'file'       => array ('modele'=> 'file'       , 'foreign_key' => 'file_id'     ),
    'subject'    => array ('modele'=> 'subject'    , 'foreign_key' => 'subject_id'  ),
    'place'      => array ('modele'=> 'place'      , 'foreign_key' => 'place_id'    ),
    'teacher'    => array ('modele'=> 'teacher'    , 'foreign_key' => 'teacher_id'  )
    );

} 
```

所以文件会话和学生之间没有直接联系......所以我不能将它添加到文件会话的加入中（**->with('student')**）

目前我正在这样做：

```
 $fileSessions  =   ORM::factory('filesession')
        ->with('subject')
        ->with('teacher')
        ->with('place')
        ->with('file')
        ->where('payment_id','=',$payment_id)
        ->order_by('sessionDate','DESC')
        ->find_all(); 
```

如何将此查询修改为 JOIN 在学生表上？

换句话说......我只需要添加以下内容：

```
INNER JOIN students ON students.id = file.student_id 
```

但是使用 Kohana ORM

编辑（添加了学生模型）

```
class Model_Student extends ORM {

    protected $_has_one = array(
    'file' => array(
    'model'       => 'file',
    'foreign_key' => 'student_id',
    ),
    );

     protected $_belongs_to = array
    (
    'level' => array ('foreign_key' => 'level_id' )
    );

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:06:38.200

您可以像在数据库查询构建器中一样使用`join`and`on`

```
 $fileSessions  =   ORM::factory('filesession')
    ->with('subject')
    ->with('teacher')
    ->with('place')
    ->with('file')
    ->join(array('students','student'))->on('student.id', '=', 'file.student_id')
    ->where('payment_id','=',$payment_id) 
    ->order_by('sessionDate','DESC')
    ->find_all(); 
```

或者您可以`$_load_with`在文件模型上使用该属性。它会自动为您加载，因此您不需要第二次通话。

```
class Model_File extends ORM {

  protected $_belongs_to = array
  (
  'student' => array ('foreign_key' => 'student_id' )
  );
  protected $_load_with = array('student');
} 
```

当您加载`File`模型时，您可以通过使用`$file->student`自动访问它`Filesession`，例如，它会是`$filesession->file->student`

# javascript - 如何使用 getElementsByClassName 函数来获取 Gmail 撰写页面中的“发送”按钮？

> ID：14032553
> 
> 赞同：3
> 
> 时间：2012-12-25T17:10:21.470
> 
> 标签：javascript, google-chrome, google-chrome-extension, gmail

我正在使用 JavaScript 为 Chrome 浏览器编写 Gmail 扩展程序。我正在尝试使用以下代码`send`从页面中获取按钮元素：`Compose`

```
SendButton  = document.getElementById('js_frame').contentDocument.getElementsByClassName('T-I J-J5-Ji Bq nS T-I-KE L3')[0]; 
```

但后来我不断收到一条消息，说`typeof SendButton is undefined`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:20:34.467

您正在查看错误的文档。

Gmail`#js_frame`是一个不可见的框架，它负责非 UI 的东西（它的主体只包含`<script>`标签，仅供参考）。在您[之前的问题](https://stackoverflow.com/questions/14032301/gmail-getelementbyidcanvas-frame-keeps-returning-null-in-google-chrome)中，我已经展示了如何获得正确的参考：

*   `document.getElementById('canvas_frame').contentDocument`如果存在
*   `document`if`#canvas_frame`不存在，但`js_frame`存在。js_frame` 用于排除 Gmail 域中的非 Gmail 页面，例如帮助页面。

因此，在获得`doc2`（参见[上一个答案](https://stackoverflow.com/a/14032326/938089)）之后，您需要查询该文档上的元素：

```
// Paste declaration of doc2 from https://stackoverflow.com/a/14032326/938089
// And to get the button when available
if (doc2) {
    sendButton = doc2.getElementsByClassName('T-I J-J5-Ji Bq nS T-I-KE L3')[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:55:23.217

您不能依赖发送按钮的 class 或 id 属性，因为它们在每次创建撰写字段时都会更改，甚至可能会因每个用户而更改。那么我们对按钮了解多少呢？

*   它的 innerHTML 是“发送”（见脚注）
*   它有一个值为“按钮”的角色属性
*   它位于“撰写新消息”容器内，该容器还有其他标签，如“发件人”、“收件人”（见脚注 2）

有了这些信息，我们可以在原生 Javascript 中使用一个不错的 Xpath 查询来检索我们的按钮。

```
var xpath = '//div[@role="button" and text()="Send"]'
var query = document.evaluate(xpath, document, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);
var button = query.iterateNext(); 
```

如果您将库用作 jQuery，请随时将其与 css 选择器`[role="button"]`和先前答案中提供的过滤器功能一起使用。

这可以通过将表信息附加为父级来改进，但这应该足够了（您可以在[Developer Mozilla Introduction to Xpath](https://developer.mozilla.org/en/docs/Introduction_to_using_XPath_in_JavaScript)中阅读更多相关信息）。希望答案能提供良好的性能。

**更新：** Gmail 似乎在某些事情上坚持使用某些类（类`T-I J-J5-Ji`似乎在旧版本和新版本之间共享）。但是，我不会使用它，如果其他开发人员偶然发现该类并且您仅通过该类获得按钮，则他或她无法理解您所获得的内容，特别是如果没有评论和变量名称不佳用来。

实际检索答案的解决方案使用看起来像这样的 CSS 查询选择器`div > div > div > div > table div`；出于同样的原因，我也不会使用它。另外，它让我想起了一个糟糕的描述性[正则表达式](http://theprofoundprogrammer.com/post/28623204754/text-regular-expressions-photograph-of-a)。您不仅在为自己编码，而且还为自己可能对项目一无所知的未来编码。

* * *

^(脚注：或相当于用户的语言。我不确定是否所有用户都有英文版的 Gmail，但我不会做出这样的假设。如果我是你，我会创建一个字典，其中包含“发送”的最常见关键字的语言环境，并对其中的大多数进行迭代评估。您可以迭代的语言数量可能仅限于[Gmail 支持](http://support.google.com/mail/bin/answer.py?hl=en&answer=17091)的语言。)

^(脚注 2：实际上，当您按下“撰写”时，它会添加标签“发件人”和“收件人”，但如果您不立即填写它们，它们就会消失，只显示一些带有 innerHTML 的“收件人”和“主题”的 div ")

# jquery - jquery css() - 将属性设置为类集合中的一个元素

> ID：14032567
> 
> 赞同：0
> 
> 时间：2012-12-25T17:12:13.960
> 
> 标签：jquery, css

单击链接按钮时，我想保留 div 元素的悬停背景颜色。我尝试使用 jquery 和 cookie。当我点击链接时，jquery 会创建 cookie 来存储点击的 div 的索引。代码看起来像这样，并且运行良好。

```
$(document).ready(function () {
    $('.menubutton').click(function () {
        var index = $(this).index();
        $.cookie('ClickedMenuBtn', index.toString(), {path: '/'});
    });
}); 
```

然后是代码的第二部分，我读取了 cookie 值并尝试设置单击元素的背景颜色，但它没有设置颜色。

```
$(document).ready(function () {
    var ClickedMenuIndex = $.cookie("ClickedMenuBtn");
    var MenuBtnIndex = parseInt(ClickedMenuIndex);
    $('.menubutton')[MenuBtnIndex].css("background-color", "rgb(242,76,15)");
}); 
```

如果我删除“[MenuBtnIndex]”它会起作用，但是它会将颜色应用于所有具有类“.menubutton”的div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:25:20.680

而不是使用`$('.menubutton')[MenuBtnIndex]`尝试`$('.menubutton').eq(MenuBtnIndex)`

# javascript - 单击时在光标位置旁边创建一个 DIV

> ID：14032568
> 
> 赞同：18
> 
> 时间：2012-12-25T17:12:18.547
> 
> 标签：javascript, html, jquery, css, jquery-events

我想要做的是，当用户单击页面上的某个位置时，包含随机图像的 div 将显示在单击位置并保持在那里。这必须能够重复，每次都显示不同的图像。有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-25T17:25:33.037

[这是一个工作小提琴](http://jsfiddle.net/ctKa4/286/)。

JS：

```
$(function(){
    var fadeDelay = 1000;
    var fadeDuration = 1000;
    $(document).click(function(e){
        var div = $('<div class="image-wrapper">')
            .css({
                "left": e.pageX + 'px',
                "top": e.pageY + 'px'
            })
            .append($('<img src="" alt="myimage" />'))
            .appendTo(document.body);

        setTimeout(function() {
            div.addClass('fade-out');           
            setTimeout(function() { div.remove(); }, fadeDuration);
        }, fadeDelay);
    });
}); 
```

CSS：

```
body {
    position: relative;
}

.image-wrapper {
    position: absolute;
    transform: translate(-50%, -50%);
    opacity: 1;
}

.image-wrapper.fade-out {
    opacity: 0;
    transition: opacity 1s ease-in-out;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T17:45:36.520

使用从 1 到 10 的随机图像：

```
jQuery(document).ready(function(){
  $(document).click(function(e){
    var num = Math.floor((Math.random()*10)+1);
    var img = $('<div>Image '+num+':<img src="image' + num + '.png" /></div>');
    $("#img_container").html(img).offset({ top: e.pageY, left: e.pageX});
  });
}) 
```

[演示](http://jsfiddle.net/DcuqB/2/)

# php - ajax 成功的 if/else 语句

> ID：14032570
> 
> 赞同：2
> 
> 时间：2012-12-25T17:12:24.410
> 
> 标签：php, javascript, jquery, ajax

我试图获取未读消息的计数器：PHP 代码 (BubbleStat.php) 如下所示：

```
$totalMsg = $mysql->totalRows("SELECT msg_id from messages WHERE msg_opened = 0 AND msg_receiver = '".$_SESSION["ActiveUserSessionId"]."'");
    echo $totalMsgs; 
```

我有这个 jQuery 代码：

```
$.ajax({
type: "POST",
url: '/BubbleStat.php',
cache: false,
success: function(html)
    {
        $("#Bubble_Msg").show(); 
    } 
}); 
```

那么我如何在#Bubble_Msg 中获取未读消息的计数器？如果计数器没有未读消息来隐藏 div #Bubble_Msg，那就太好了。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:13:58.230

如... [`.text()`](http://api.jquery.com/text)？

```
$("#Bubble_Msg").text(html).show(); 
```

如果`html`-named 变量实际上包含 HTML，则...[`.html()`](http://api.jquery.com/html)改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:16:56.813

以这种方式使用它：

```
success: function(html)
{
    $("#Bubble_Msg").html(html).show(); 
} //-----------------------^^----------this html is the param passed in the 
  //-----------------------------------success function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T17:32:36.587

试试这个：

```
success: function(html) {

    // Check if the Counter have unread messages
    if (parseInt(html) > 0) {
        $("#Bubble_Msg").text(html).show();
    }
    else {
        $("#Bubble_Msg").hide();
    }
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T17:49:44.887

你可以让你的 PHP 脚本返回一个 JSON 响应。

它可能看起来像很多代码，但如果您需要在脚本中增加复杂性，绝对值得。

1-确保无论发生什么都不会缓存响应：

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); 
```

2- json 类型标头：

```
header('Content-type: application/json'); 
```

3-计算您需要知道的每个值：

```
$totalMsg = $mysql->totalRows("SELECT msg_id from messages WHERE msg_opened = 0 AND msg_receiver = '".$_SESSION["ActiveUserSessionId"]."'"); 
```

4-用它们构建一个数组：

```
$response = array(
    'total' => $totalMsg,
    'extra' => 'extra value (if needed)'
); 
```

5- json 编码中的回显：

```
echo json_encode($response); 
```

After then, you could access your value with jQuery like this:

```
$.ajax({
type: "POST",
url: '/BubbleStat.php',
cache: false,
dataType: 'json',
success: function(jsonData)
    {
        if (jsonData.total != null && jsonData.total != undefined)
        {                
            $("#Bubble_Msg").text(jsonData.total).show();
        } 
    } 
}); 
```

The problem looks easier if you get variables to work with.

# vb.net - 如何让 VB.net 在文本框输出中给出 5 个有效数字？

> ID：14032571
> 
> 赞同：-1
> 
> 时间：2012-12-25T17:12:50.353
> 
> 标签：vb.net

我想在我的文本框输出中只有 5 个有效数字。我可以知道什么 VB 函数可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:00:43.347

使用验证事件重新格式化输入的数字。您需要使用 ErrorProvider 向用户报告输入错误。

要获得固定数量的有效数字，您需要根据输入的值动态创建数字的格式化字符串。您可以使用 Math.Log10() 计算分数中所需的位数。像这样：

```
Private Sub TextBox1_Validating(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles TextBox1.Validating
    Dim value As Double
    If Not Double.TryParse(TextBox1.Text, value) Then
        ErrorProvider1.SetError(TextBox1, "Please enter a valid number")
        TextBox1.SelectAll()
    Else
        ErrorProvider1.SetError(TextBox1, "")
        Dim intDigits As Integer = 0
        If value <> 0 Then intDigits = CInt(Math.Truncate(Math.Log10(Math.Abs(value))))
        If intDigits >= 0 Then intDigits += 1
        Dim fracDigits = 5 - intDigits
        If fracDigits < 0 Then fracDigits = 0
        Dim format = "F" + fracDigits.ToString()
        TextBox1.Text = value.ToString(format)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-18T20:37:43.280

我发现该`math.round`函数仅对数字的小数部分进行四舍五入。我想出的方法获取实数的整数部分，将其转换为小数并确定 10 的幂。

数字的小数部分除以 10 的相同幂并添加到转换为小数的整数部分。然后，您可以将该数字四舍五入并乘以上面找到的 10 的幂，以将任何实数四舍五入为所需的有效数字。我在表单中添加了一个按钮来测试功能，如下所示：

```
 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim x As Double = InputBox("input a real to round", , , , )
    Dim y As Double
    Dim sfs As Integer = InputBox("input sig figs", , , , )
    y = fSigFig(x, sfs)
    Console.WriteLine(y)
End Sub

'this function converts a real number with no formatting to a real number with a specified number of significant figures
Public Function fSigFig(ByVal areal As Double, ByVal sigfigs As Integer) As Double
    Dim itens As Integer = 0
    Dim intportion As Double = Int(areal) 'this is the integer portion of the number
    Dim decportion As Double = areal - intportion 'this is the fractional portion of the number 
    If intportion < 1 Then 'areal only consists of a fractional portion, round directly
        fSigFig = Math.Round(areal, sigfigs, MidpointRounding.AwayFromZero)
    Else 'convert integer portion of number to a fraction and determine power of 10 required
        While intportion >= 1
            itens += 1
            intportion /= 10
        End While
        'add the integer portion and decimal portion back together as a fraction number divided by 10^itens
        'then round to specified significant figures and multiply by 10^itens
        decportion /= 10 ^ itens
        Dim numbertoround As Double = intportion + decportion
        fSigFig = (10 ^ itens) * Math.Round(numbertoround, sigfigs, MidpointRounding.AwayFromZero)
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T21:31:43.293

**首先，谢谢大家，圣诞快乐。我会将 Hans Passant 的回复标记为 am answer**

在问这个问题之前我确实想过。我问这个问题不是想找人为我做这个程序。（但我真的很感谢 Hans Passant）。我希望有一个内置函数，它可能被称为 ROUNDTO。我发布了这个问题，因为我想知道该函数是否存在的名称。

对于我的应用程序，我这样做了

```
 Function roundTo(ByVal num As Double) As Double
    If num >= 10000 Then
        Return Math.Round(num)
    Else
        Dim tempnum = num
        Dim counter = 0
        Do
            tempnum = tempnum * 10
            counter = counter + 1
        Loop While tempnum / 10000 < 1
        Return Math.Round(num * 10 ^ (counter)) / (10 ^ (counter))
    End If
End Function 
```

# javascript - 从控制器 Ruby on Rails 3.2.9 调用 javascript

> ID：14032573
> 
> 赞同：1
> 
> 时间：2012-12-25T17:13:09.697
> 
> 标签：javascript, ruby-on-rails-3.2

我希望你能帮我解决一个小问题。

我在 ror 控制器中有一些代码：

```
 def create
    @email = Email.new(params[:email])

    respond_to do |format|
      if @email.save
        format.html { redirect_to root_path }
        format.json { render json: @email, status: :created, location: @email }

      else
        format.html { render action: "new" }
        format.json { render json: @email.errors, status: :unprocessable_entity }
      end
    end
  end 
```

如果保存了电子邮件，

```
if @email.save 
```

我希望 div 显示在 HTML 文件中

```
<div id="notice">OK</div> 
```

用这个 javascript

```
document.getElementById("notice").style.display = 'block'; 
```

但我不知道我应该把js文件放在哪里以及我应该如何从控制器调用它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:33:59.453

当调用渲染操作时，Rails 将寻找“新”模板以返回给用户。指定的操作用于确定要呈现的视图。

您需要将 JavaScript 放置在此模板中。一旦用户发布到您的控制器，“新”模板将返回到他们的浏览器，并且您的 JavaScript 可以在客户端执行。

有关更多信息，请参阅： http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# c - 为什么在打印我的数组后控制台会打印“空指针赋值”？

> ID：14032574
> 
> 赞同：2
> 
> 时间：2012-12-25T17:13:16.013
> 
> 标签：c, assembly, malloc

我的任务是编写一个汇编例程，它使用 c 的 malloc 并从指向 asm 中的函数的指针插入值，数组打印它应该打印的内容，并且在程序打印的数字之后，一切似乎都正确，它添加了“NULL POINTER ASSIGNMENT "

c文件：

```
#include <stdio.h>
#include <stdlib.h>

extern  int initarr (int** arr, int n, int (*initfunc)());

int getNum() 
{return (rand()%1000);}

void main()
{
int * arr, i, n, success;
printf("\nPlease enter the array size\n");
scanf("%d",&n);
success = initarr(&arr, n, getNum);   
if(!success) 
{
    printf("Memory Allocation Failed\n");
    return;
} 
printf("\nThe Numbers in the allocated array are:\n");
for(i=0; i<n; i++)   
    printf("%d  ", arr[i]);
} 
```

asm 文件：

```
;lab10.asm
.MODEL SMALL
.CODE
.386
;extern  int initarr (int** arr, int n, int (*initfunc)())
;arr=BP+4   n=BP+6  function=BP+8
EXTRN _malloc : NEAR
PUBLIC _initarr
_initarr PROC NEAR 
PUSH BP;preserve BP
MOV BP,SP;let me see whats in the stack
PUSH SI;preserve SI
MOV SI,[BP+4];SI controls array
MOV CX,[BP+6];CX=n from declaration
MOV eAX,8;size of one byte=8
MUL CX;how many bytes to allocate
SUB eSP,eAX;size in bytes to allocate
PUSH eAX;preserve for later add to sp
PUSH eCX;for ussing malloc
CALL _malloc;return addres is in eAX
TEST eAX,eAX;checks if allocation succeded
POP eCX;pop CX for the loop
POP eAX;pop AX to add to SP
ADD eSP,eAX;for stack won't change
JZ BYE;if allocation went wrong and eAX is already 0
MOV [SI],eAX;sets SI to point at the array
MOV SI,[SI];set SI to the array
LOOPER:
PUSH CX;for ussing rand
CALL [BP+8];call function
POP CX;pop CX for the loop
MOV [SI],eAX
ADD SI,2
LOOP LOOPER
;end of loop    
MOV eAX,1;for the return value
BYE:
POP SI;restore SI
POP BP;restore BP
RET
_initarr ENDP
END 
```

![在此处输入图像描述](../Images/45d3408dbe034a8aeec7e4c9de85bb6e.png)

**__________________编辑___________________**

对于每个大于 5 的尺寸，它的工作都很棒 ![在此处输入图像描述](../Images/09095ff4de4c2a276e8e7e6ef8d2e388.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:27:13.400

一些编译器在 MSDOS 平台上清理代码时显示“空指针分配”消息。清理代码检查 NULL ptr 周围的内存区域的内容是否已更改（因为在 MSDOS 中没有访问冲突之类的东西）。因此，您需要检查您的代码在哪里可以取消引用 NULL 或其他低偏移量。在下面的源代码中，我可以发现一个错误：

```
CALL _malloc;return addres is in eAX
TEST eAX,eAX;checks if allocation succeded
POP eCX;pop CX for the loop
POP eAX;pop AX to add to SP
ADD eSP,eAX;for stack won't change 
```

_malloc 返回 eAX 中的 ptr，稍后会被 POP eAX（包含 8）覆盖 2 个命令。稍后您取消引用它`MOV [SI],eAX`是错误消息的根本原因。

# php - 验证表单失败

> ID：14032583
> 
> 赞同：0
> 
> 时间：2012-12-25T17:14:56.907
> 
> 标签：php, forms

在我通过单击提交按钮（显示在[http://deafmagic.com/tourist-register.php](http://deafmagic.com/tourist-register.php)上）测试表单以检查验证后，它显示了一个空白页面。我不确定我在脚本上做错了什么。需要填写文本字段旁边的红色 * 点。在我做其余的文本字段之前，我只测试了一个或两个文本字段以查看它是否有效。谢谢！

HTML（表单）：

```
<form name="form1" method="POST" action="_sendTouristapplicant.php">
<table width="700" border="0" cellspacing="5" cellpadding="0">
<tr>
    <td colspan="2" align="center"><h1 style="color:#FFFF00;">ATTENTION!!!<br />THIS REGISTRATION IS FOR <br />TOURIST APPLICANT ONLY!!!</h1><br /></td>
</tr>
<tr>
    <td colspan="2"><h1>World Deaf Magicians Festival Chicago 2014</h1></td>
</tr>
<tr>
    <td colspan="2"><span xml:lang="EN-US">October 26 – November 1, 2014</span>
    <br /><br /><strong>Tourist Applicant ONLY</strong></td>
</tr>
<tr>
    <td colspan="2" height="25"></td>
</tr>
<tr>
    <td width="230" align="right" valign="top">First Name: <font style="color:red;">*</font> </td>
    <td align="left" valign="top"><input name="fieldnm_1" type="text" size="33" /> </td>
</tr>
<tr>
    <td align="right" valign="top">Surname (Family Name): <font style="color:red;">*</font> </td>
    <td align="left" valign="top"><input name="fieldnm_2" type="text" size="33" /></td>
</tr>
<tr>
    <td align="right" valign="top">Street Address: </td>
    <td align="left" valign="top"><input name="fieldnm_3" type="text" size="33" /></td>
</tr>
<tr>
    <td colspan="2">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                    <td valign="top" align="center">City: <input name="fieldnm_4" type="text" size="24" /> State: <input name="fieldnm_5" type="text" size="2" /> Country: <font style="color:red;">*</font> <select id="countries" name="countries">
<option value="Zimbabwe">Zimbabwe</option>
</select></td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td align="right" valign="top">Postal / Zip Code: </td>
    <td align="left" valign="top"><input name="fieldnm_7" type="text" size="33" /></td>
</tr>
<tr>
    <td align="right" valign="top">Email address <font style="color:red;">*</font>: </td>
    <td align="left" valign="top"><input name="fieldnm_8" type="text" size="33" /></td>
</tr>
<tr>
    <td valign="top" align="right">Phone Number:  </td>
    <td>OOVOO: <input name="oovoo" type="text" size="33" /></td>
</tr>
<tr>
    <td valign="top" align="right"></td>
    <td>SKYPE: <input name="skype" type="text" size="33" /></td>
</tr>
<tr>
  <td align="right" valign="top">Fax: </td>
  <td align="left" valign="top"><input name="fieldnm_10" type="text" size="33" /></td>
</tr>
<tr>
  <td align="right" valign="top" class="txtForm">In Case of Emergency - <br />
  Contact Telephone Number: </td>
  <td align="left" valign="top"><input name="fieldnm_11" type="text" size="33" /></td>
</tr>
<tr>
    <td colspan="2">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td colspan="2" align="left" valign="top">Age Group: <font style="color:red;">*</font> 
                <input name="fieldnm_12" type="radio" value="Junior age (7 to 17)" />Junior age (7 to 17)<input name="fieldnm_12" type="radio" value="Adult age (18 to 54)" />Adult age (18 to 54)<input name="fieldnm_12" type="radio" value="Merlin (over 55)" />Merlin (over 55)</td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td colspan="2" align="left" valign="top">Deaf, Hard of Hearing or Hearing? <br />
    Deaf <input name="deafHH" type="radio" value="Deaf" /> Hard of Hearing <input name="deafHH" type="radio" value="Hard of Hearing" /></td>
</tr>
<tr>
    <td colspan="2" align="left" valign="top">Hotel Room to be shared with (Magician, assistant or other person):<br />
    <textarea name="fieldnm_21" cols="80" rows="5">Names:</textarea></td>
</tr>
<tr>
    <td colspan="2" bgcolor="#ff0000">I agree to abide to the Contest and Festival Organizers’ Rules. I confirm that I am a Deaf Magician.<br />Yes <input name="agree" type="radio" value="Agreed" /> No <input name="agree" type="radio" value="Disagreed" /></td>
    </tr>
    <tr>
        <td colspan="2"><br /><input type="hidden" name="submitted" value="1"> <input type="submit" name="Submit" value="Send">
        <input type="reset" name="Submit2" value="Reset"></td>
    </tr>
</table>
</form> 
```

PHP：

```
<?php ob_start();
$fromemail="Tourist Applicant"; // change here if you want
//$toemail="ff@hotmail.com";   // change here if you want
$sub="Tourist Applicant from Deaf Magic";          // change here if you want

//If form was submitted  
if ($_POST['submitted']==1) {  
    $errormsg = ""; //Initialize errors  
    if ($_POST[fieldnm_1]){  
        $fieldnm_1 = $_POST[fieldnm_1]; //If title was entered  
    }  
    else{  
        $errormsg = "Please enter your first name.";  
    }  
    if ($_POST[fieldnm_2]){  
        $fieldnm_2 = $_POST[fieldnm_2]; //If comment was entered  
    }  
    else{  
        if ($errormsg){ //If there is already an error, add next error  
            $errormsg = "Please enter your surname.";  
        } 
    }  
}     
if ($title && $textentry){ 
//Redirect to Thank you page 
   header("Location: thanks.html");   
}  

////// do not change in following
if($_SERVER['REQUEST_METHOD']=="POST")
{
$fieldnm_1=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_1']));  
$fieldnm_2=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_2']));  
$fieldnm_3=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_3']));  
$fieldnm_4=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_4']));
$fieldnm_5=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_5']));  
$countries=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['countries']));  
$fieldnm_7=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_7']));  
$fieldnm_8=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_8']));
$fieldnm_9=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_9']));  
$fieldnm_10=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_10']));
$fieldnm_11=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_11']));  
$fieldnm_12=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_12']));  
$deafHH=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['deafHH']));  
$fieldnm_21=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_21']));

$agree=str_replace ( array("\n"), array("<br>"),trim($_REQUEST['agree']));

$contentmsg=stripslashes("<br><b><font style=color:#CC3300>$sub</font></b><br>
<table width=800 border=0 cellpadding=2 cellspacing=1 bgcolor=#CCCCCC>

<tr>
  <td width=600 align=right valign=top bgcolor=#FFFFFF><B>First Name:</b> </td>
  <td width=200 align=left valign=top bgcolor=#FFFFFF>$fieldnm_1</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Surname:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_2</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Street Address:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_3</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>City:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_4</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>State:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_5</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Country:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$countries</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Postal / Zip Code:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_7</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Email address:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_8</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Age Group:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_12</td>
</tr>
<tr>    
<td><B>Phone Number:</b></td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>OOVOO:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$oovoo</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Skype:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$skype</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Fax:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_10</td>
</tr>

<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>In Case of Emergency - <br />Contact Telephone Number:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_11</td>
</tr>
<tr>    
<td><B>Age Group:</b></td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Age Group:</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_12</td>
</tr>
<tr>
  <td align=right valign=top bgcolor=#FFFFFF><B>Hotel Room to be shared with (Magician, assistant or other person)</b> </td>
  <td align=left valign=top bgcolor=#FFFFFF>$fieldnm_21</td>
</tr>
<tr>
  <td colspan=2 align=center valign=top bgcolor=#FF0000><B><font color=#ffffff>I agree to abide to the Contest and Festival Organizers’ Rules. I confirm that I am a Deaf Magician:</font></b> </td>
</tr>
<tr>
      <td colspan=2 align=center valign=top bgcolor=#FFFFFF>$agree</td>
</tr>
</table>
");

////
$headers  = "MIME-Version: 1.0
";
$headers .= "Content-type: text/html; charset=iso-8859-1
";

$from=$fromemail;

$headers .= "From: ".$from." 
";

@mail($toemail,$sub,$contentmsg,$headers);
}               
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T23:51:47.627

这是“tourist-register.php”整个页面：

请将此上传到您的网站，并告诉我所有表单值是否都符合您的要求。如果是这样，我将为您编写处理器。可以肯定的是..您想要此表格做的只是向您发送电子邮件并向客户显示感谢页面？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome to Deaf Magic!</title>
<style type="text/css">
/* copy */
.copy { font-size:14px; color:#FFFFFF; padding-top:250px; font-family:Verdana, Arial, Helvetica, sans-serif; line-height:20px;}
.copy h1 {font-size:18px; font-family:Georgia, "Times New Roman", Times, serif;}

/* Front large images */
img.front-image { display: block; margin-left: auto; margin-right: auto; }
/* Container */
.container { margin-left:510px; background-image:url(images/internal_topbg.jpg); background-repeat:no-repeat; width:900px; height:auto;}
/* navigational buttons */
.button_wrapper {width:900px; margin-left:510px; margin-top:550px;}
.buttons { display: inline; }
.button-image { padding-left: 10px;}
.yellow-buttons { width:600px; margin-left:680px; margin-top:20px; }
/* footer image */
.footer-bg {margin-left:510px; margin-top:50px; background-image:url(images/internal_bottombg.jpg); background-repeat:no-repeat; width:900px; height:284px; }
div.divider{ width:720px;background-color:#222;font-family:sans-serif; font-weight:bold;border-radius:10px;
padding:4px 10px;margin-top:10px;}
div.agree{ width:720px;background-color:#FF0000;font-family:sans-serif; font-weight:bold;border-radius:10px;
padding:4px 10px;margin-top:10px;}
div.form{ width:720px;}
div.form label{display:inline-block;  width:250px;font-family:sans-serif; font-weight:bold; font-size:16px;}
div.form input, textarea, select {display:inline-block;margin-left:20px; }
</style>
</head>

<body bgcolor="#000000" link="#1690e9" alink="#1690e9" vlink="#1690e9">
<div class="container">
<div class="copy">

<div align="center">
<h1 style="color:#FFFF00;">ATTENTION!!!<br />
THIS REGISTRATION IS FOR <br />
TOURIST APPLICANT ONLY!!!</h1><br />
<h1>World Deaf Magicians Festival Chicago 2014</h1>
<span xml:lang="EN-US">October 26 – November 1, 2014</span><br /><br />
<strong>Tourist Applicant ONLY</strong>
</div><br><br>

<div class="form" >

<form name="form1" method="POST" action="tourist_email.php">

<label><font style="color:red;">*</font>Firstname:</label><input name="first_name" type="text" size="45" autofocus /><br>

<label><font style="color:red;">*</font>Surname(Family Name):</label><input name="last_name" type="text" size="45" /><br>

<label>Street Address:</label><input name="street" type="text" size="45" /><br>

<label>City:</label><input name="city" type="text" size="45" /><br>

<label>State:</label><input name="state" type="text" size="2" />

Zip Code:<input name="zip" type="text" size="10" /><br>

<label><font style="color:red;">*</font>Country:</label><select name="countries">
<option value="Afghanistan">Afghanistan</option>
<option value="Åland Islands">Åland Islands</option>
<option value="Albania">Albania</option>
<option value="Algeria">Algeria</option>
<option value="American Samoa">American Samoa</option>
<option value="Andorra">Andorra</option>
<option value="Angola">Angola</option>
<option value="Anguilla">Anguilla</option>
<option value="Antarctica">Antarctica</option>
<option value="Antigua and Barbuda">Antigua and Barbuda</option>
<option value="Argentina">Argentina</option>
<option value="Armenia">Armenia</option>
<option value="Aruba">Aruba</option>
<option value="Australia">Australia</option>
<option value="Austria">Austria</option>
<option value="Azerbaijan">Azerbaijan</option>
<option value="Bahamas">Bahamas</option>
<option value="Bahrain">Bahrain</option>
<option value="Bangladesh">Bangladesh</option>
<option value="Barbados">Barbados</option>
<option value="Belarus">Belarus</option>
<option value="Belgium">Belgium</option>
<option value="Belize">Belize</option>
<option value="Benin">Benin</option>
<option value="Bermuda">Bermuda</option>
<option value="Bhutan">Bhutan</option>
<option value="Bolivia">Bolivia</option>
<option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
<option value="Botswana">Botswana</option>
<option value="Bouvet Island">Bouvet Island</option>
<option value="Brazil">Brazil</option>
<option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
<option value="Brunei Darussalam">Brunei Darussalam</option>
<option value="Bulgaria">Bulgaria</option>
<option value="Burkina Faso">Burkina Faso</option>
<option value="Burundi">Burundi</option>
<option value="Cambodia">Cambodia</option>
<option value="Cameroon">Cameroon</option>
<option value="Canada">Canada</option>
<option value="Cape Verde">Cape Verde</option>
<option value="Cayman Islands">Cayman Islands</option>
<option value="Central African Republic">Central African Republic</option>
<option value="Chad">Chad</option>
<option value="Chile">Chile</option>
<option value="China">China</option>
<option value="Christmas Island">Christmas Island</option>
<option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
<option value="Colombia">Colombia</option>
<option value="Comoros">Comoros</option>
<option value="Congo">Congo</option>
<option value="Congo, The Democratic Republic of The">Congo, The Democratic Republic of The</option>
<option value="Cook Islands">Cook Islands</option>
<option value="Costa Rica">Costa Rica</option>
<option value="Cote D'ivoire">Cote D'ivoire</option>
<option value="Croatia">Croatia</option>
<option value="Cuba">Cuba</option>
<option value="Cyprus">Cyprus</option>
<option value="Czech Republic">Czech Republic</option>
<option value="Denmark">Denmark</option>
<option value="Djibouti">Djibouti</option>
<option value="Dominica">Dominica</option>
<option value="Dominican Republic">Dominican Republic</option>
<option value="Ecuador">Ecuador</option>
<option value="Egypt">Egypt</option>
<option value="El Salvador">El Salvador</option>
<option value="Equatorial Guinea">Equatorial Guinea</option>
<option value="Eritrea">Eritrea</option>
<option value="Estonia">Estonia</option>
<option value="Ethiopia">Ethiopia</option>
<option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
<option value="Faroe Islands">Faroe Islands</option>
<option value="Fiji">Fiji</option>
<option value="Finland">Finland</option>
<option value="France">France</option>
<option value="French Guiana">French Guiana</option>
<option value="French Polynesia">French Polynesia</option>
<option value="French Southern Territories">French Southern Territories</option>
<option value="Gabon">Gabon</option>
<option value="Gambia">Gambia</option>
<option value="Georgia">Georgia</option>
<option value="Germany">Germany</option>
<option value="Ghana">Ghana</option>
<option value="Gibraltar">Gibraltar</option>
<option value="Greece">Greece</option>
<option value="Greenland">Greenland</option>
<option value="Grenada">Grenada</option>
<option value="Guadeloupe">Guadeloupe</option>
<option value="Guam">Guam</option>
<option value="Guatemala">Guatemala</option>
<option value="Guernsey">Guernsey</option>
<option value="Guinea">Guinea</option>
<option value="Guinea-bissau">Guinea-bissau</option>
<option value="Guyana">Guyana</option>
<option value="Haiti">Haiti</option>
<option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option>
<option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option>
<option value="Honduras">Honduras</option>
<option value="Hong Kong">Hong Kong</option>
<option value="Hungary">Hungary</option>
<option value="Iceland">Iceland</option>
<option value="India">India</option>
<option value="Indonesia">Indonesia</option>
<option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option>
<option value="Iraq">Iraq</option>
<option value="Ireland">Ireland</option>
<option value="Isle of Man">Isle of Man</option>
<option value="Israel">Israel</option>
<option value="Italy">Italy</option>
<option value="Jamaica">Jamaica</option>
<option value="Japan">Japan</option>
<option value="Jersey">Jersey</option>
<option value="Jordan">Jordan</option>
<option value="Kazakhstan">Kazakhstan</option>
<option value="Kenya">Kenya</option>
<option value="Kiribati">Kiribati</option>
<option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option>
<option value="Korea, Republic of">Korea, Republic of</option>
<option value="Kuwait">Kuwait</option>
<option value="Kyrgyzstan">Kyrgyzstan</option>
<option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option>
<option value="Latvia">Latvia</option>
<option value="Lebanon">Lebanon</option>
<option value="Lesotho">Lesotho</option>
<option value="Liberia">Liberia</option>
<option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
<option value="Liechtenstein">Liechtenstein</option>
<option value="Lithuania">Lithuania</option>
<option value="Luxembourg">Luxembourg</option>
<option value="Macao">Macao</option>
<option value="Macedonia, The Former Yugoslav Republic of">Macedonia, The Former Yugoslav Republic of</option>
<option value="Madagascar">Madagascar</option>
<option value="Malawi">Malawi</option>
<option value="Malaysia">Malaysia</option>
<option value="Maldives">Maldives</option>
<option value="Mali">Mali</option>
<option value="Malta">Malta</option>
<option value="Marshall Islands">Marshall Islands</option>
<option value="Martinique">Martinique</option>
<option value="Mauritania">Mauritania</option>
<option value="Mauritius">Mauritius</option>
<option value="Mayotte">Mayotte</option>
<option value="Mexico">Mexico</option>
<option value="Micronesia, Federated States of">Micronesia, Federated States of</option>
<option value="Moldova, Republic of">Moldova, Republic of</option>
<option value="Monaco">Monaco</option>
<option value="Mongolia">Mongolia</option>
<option value="Montenegro">Montenegro</option>
<option value="Montserrat">Montserrat</option>
<option value="Morocco">Morocco</option>
<option value="Mozambique">Mozambique</option>
<option value="Myanmar">Myanmar</option>
<option value="Namibia">Namibia</option>
<option value="Nauru">Nauru</option>
<option value="Nepal">Nepal</option>
<option value="Netherlands">Netherlands</option>
<option value="Netherlands Antilles">Netherlands Antilles</option>
<option value="New Caledonia">New Caledonia</option>
<option value="New Zealand">New Zealand</option>
<option value="Nicaragua">Nicaragua</option>
<option value="Niger">Niger</option>
<option value="Nigeria">Nigeria</option>
<option value="Niue">Niue</option>
<option value="Norfolk Island">Norfolk Island</option>
<option value="Northern Mariana Islands">Northern Mariana Islands</option>
<option value="Norway">Norway</option>
<option value="Oman">Oman</option>
<option value="Pakistan">Pakistan</option>
<option value="Palau">Palau</option>
<option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option>
<option value="Panama">Panama</option>
<option value="Papua New Guinea">Papua New Guinea</option>
<option value="Paraguay">Paraguay</option>
<option value="Peru">Peru</option>
<option value="Philippines">Philippines</option>
<option value="Pitcairn">Pitcairn</option>
<option value="Poland">Poland</option>
<option value="Portugal">Portugal</option>
<option value="Puerto Rico">Puerto Rico</option>
<option value="Qatar">Qatar</option>
<option value="Reunion">Reunion</option>
<option value="Romania">Romania</option>
<option value="Russian Federation">Russian Federation</option>
<option value="Rwanda">Rwanda</option>
<option value="Saint Helena">Saint Helena</option>
<option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
<option value="Saint Lucia">Saint Lucia</option>
<option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
<option value="Saint Vincent and The Grenadines">Saint Vincent and The Grenadines</option>
<option value="Samoa">Samoa</option>
<option value="San Marino">San Marino</option>
<option value="Sao Tome and Principe">Sao Tome and Principe</option>
<option value="Saudi Arabia">Saudi Arabia</option>
<option value="Senegal">Senegal</option>
<option value="Serbia">Serbia</option>
<option value="Seychelles">Seychelles</option>
<option value="Sierra Leone">Sierra Leone</option>
<option value="Singapore">Singapore</option>
<option value="Slovakia">Slovakia</option>
<option value="Slovenia">Slovenia</option>
<option value="Solomon Islands">Solomon Islands</option>
<option value="Somalia">Somalia</option>
<option value="South Africa">South Africa</option>
<option value="South Georgia and The South Sandwich Islands">South Georgia and The South Sandwich Islands</option>
<option value="Spain">Spain</option>
<option value="Sri Lanka">Sri Lanka</option>
<option value="Sudan">Sudan</option>
<option value="Suriname">Suriname</option>
<option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
<option value="Swaziland">Swaziland</option>
<option value="Sweden">Sweden</option>
<option value="Switzerland">Switzerland</option>
<option value="Syrian Arab Republic">Syrian Arab Republic</option>
<option value="Taiwan, Province of China">Taiwan, Province of China</option>
<option value="Tajikistan">Tajikistan</option>
<option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
<option value="Thailand">Thailand</option>
<option value="Timor-leste">Timor-leste</option>
<option value="Togo">Togo</option>
<option value="Tokelau">Tokelau</option>
<option value="Tonga">Tonga</option>
<option value="Trinidad and Tobago">Trinidad and Tobago</option>
<option value="Tunisia">Tunisia</option>
<option value="Turkey">Turkey</option>
<option value="Turkmenistan">Turkmenistan</option>
<option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
<option value="Tuvalu">Tuvalu</option>
<option value="Uganda">Uganda</option>
<option value="Ukraine">Ukraine</option>
<option value="United Arab Emirates">United Arab Emirates</option>
<option value="United Kingdom">United Kingdom</option>
<option value="United States">United States</option>
<option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option>
<option value="Uruguay">Uruguay</option>
<option value="Uzbekistan">Uzbekistan</option>
<option value="Vanuatu">Vanuatu</option>
<option value="Venezuela">Venezuela</option>
<option value="Viet Nam">Viet Nam</option>
<option value="Virgin Islands, British">Virgin Islands, British</option>
<option value="Virgin Islands, U.S.">Virgin Islands, U.S.</option>
<option value="Wallis and Futuna">Wallis and Futuna</option>
<option value="Western Sahara">Western Sahara</option>
<option value="Yemen">Yemen</option>
<option value="Zambia">Zambia</option>
<option value="Zimbabwe">Zimbabwe</option>
</select>
<br>

<label>Email address</label><input name="email" type="email" size="45" /><br>

<label>Phone Number:</label><input name="phone" type="text" size="45" /><br>

<label>OOVOO:</label><input name="oovoo" type="text" size="45" /><br>

<label>SKYPE:</label><input name="skype" type="text" size="45" /><br>

<label>Fax:</label><input name="fax" type="text" size="45" /><br>

<label>Emergency Contact Number:</label><input name="emer_contact" type="text" size="45" /><br>

<div align="left" class="divider"><label><font style="color:red;">*</font>Age Group:</label><br> </div>
<input name="age_group" type="radio" value="Junior age (7 to 17)" /><label>Junior age (7 to 17)</label><br>
<input name="age_group" type="radio" value="Adult age (18 to 54)" /><label>Adult age (18 to 54)</label><br>
<input name="age_group" type="radio" value="Merlin (over 55)" /><label>Merlin (over 55)</label><br><br>

<div align="left" class="divider"><label>Deaf, Hard of Hearing? </label><br /></div>
<input name="deafHH" type="radio" value="Deaf" /><label>Deaf </label><br>
<input name="deafHH" type="radio" value="Hard of Hearing" /><label>Hard of Hearing</label><br><br>

<div align="left" class="divider">Hotel Room to be shared with (Magician, assistant or other person):</div><br />
<textarea name="room_contents" cols="85" rows="5">Names:</textarea><br><br>

<div align="center" class="agree">
I agree to abide to the Contest and Festival Organizers’ Rules. I confirm that I am a Deaf Magician.<br />
<input name="agree" type="radio" value="Agreed" />Yes<input name="agree" type="radio" value="Disagreed" />No<br><br>
</div>

<div align="center">
<br><br>
<input type="submit" name="submit_tourist" value="Send">
<input type="reset" name="Submit2" value="Reset">
</div>

</div>

</div>
</div>
<div class="button_wrapper" align="center">
    <div class="buttons"><a href="index.html"><img class="button-image" src="images/button.home.png" border="0" /></a></div>
    <div class="buttons"><a href="world_wdmf_2014.html"><img class="button-image" src="images/button.wdmf2014.png" border="0" /></a></div>
    <div class="buttons"><a href="history.html"><img class="button-image" src="images/button.history.png" border="0" /></a></div>
    <div class="buttons"><a href="donations.html"><img class="button-image" src="images/button.donations.png" border="0" /></a></div>
    <div class="buttons"><a href="contact.php"><img class="button-image" src="images/button.contact.png" border="0" /></a></div>
</div>
<div class="yellow-buttons">
<a href="magicians-applicant.php"><img class="button-image" src="images/button.applicants2.png" border="0" /></a>
<a href="#"><img class="button-image" src="images/button.deardeafhh2.png" border="0" /></a>
</div>
<div class="footer-bg"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:18:01.520

先全部改 `$fieldnm_1 = $_POST[fieldnm_1];`

至：

`$fieldnm_1 = $_POST['fieldnm_1'];`

含义...您需要在`$_POST[''];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:24:02.160

您开始输出缓冲

```
ob_start(); 
```

但是我看不到您最终将收集到的数据输出到哪里。如果你不这样做 - 这解释了空白页。

这个

```
str_replace ( array("\n"), array("<br>"),trim($_REQUEST['fieldnm_1'])) 
```

可以替换为

```
nl2br($_REQUEST['fieldnm_1']); 
```

我建议将错误从字符串更改为数组。

重定向条件最好改为

```
if (count($errormsg) == 0){ 
//Redirect to Thank you page 
   header("Location: thanks.html");   
}  

//If form was submitted  
if ($_POST['submitted']==1) {  
    $errormsg = array(); //Initialize errors  
    if (strlen(trim($_POST['fieldnm_1']))){  
        $title = $_POST['fieldnm_1']; //If title was entered  
    }  
    else{  
        $errormsg[] = "Please enter your first name.";  
    }  
    if (strlen(trim($_POST['fieldnm_2']))){  
        $textentry = $_POST['fieldnm_2']; //If comment was entered  
    }  
    else{  
        $errormsg[] = "Please enter your surname.";  
    }  
} 
```

如果你想在页面上输出错误 - 使用`implode("<br>", $errors)`而不是 $errors

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T17:30:16.770

您还想检查是否完全提交了 $_POST。最好用 isset 检查变量。此外，您需要在 POST 中使用单引号。像这样：

```
if (isset($_POST['submitted'])) {  
$errormsg = ""; //Initialize errors  
if (isset($_POST['fieldnm_1'])){  
    $fieldnm_1 = $_POST['fieldnm_1']; //If title was entered  
}  

if (isset($title) && isset($textentry)){ 
//Redirect to Thank you page 
   header("Location: thanks.html");   
} 
```

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

# android - 更改字体时阵列适配器出错

> ID：14032590
> 
> 赞同：1
> 
> 时间：2012-12-25T17:16:03.840
> 
> 标签：android, android-arrayadapter

我正在尝试修改来自 MyKong 的代码，添加一些更改 textview 字体的行，但是当我尝试运行时，我遇到了强制关闭。

这是 MobileArrayAdapter.java

```
> package com.mkyong.android.adaptor;
> 
> import com.mkyong.android.R;
> 
> import android.content.Context; import
> android.content.res.AssetManager; import android.graphics.Color;
> import android.graphics.Typeface; import android.view.LayoutInflater;
> import android.view.View; import android.view.ViewGroup; import
> android.widget.ArrayAdapter; import android.widget.ImageView; import
> android.widget.TextView;
> 
> public class MobileArrayAdapter extends ArrayAdapter<String> {
>   private final Context context;  private final String[] values;
> 
>   public MobileArrayAdapter(Context context, String[] values) {
>       super(context, R.layout.list_mobile, values);       this.context =
> context;      this.values = values;   }
> 
>   @Override   public View getView(int position, View convertView,
> ViewGroup parent) {       LayoutInflater inflater = (LayoutInflater)
> context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);        View
> rowView = inflater.inflate(R.layout.list_mobile, parent, false);
>       TextView textView = (TextView) rowView.findViewById(R.id.label);
>       ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
> // Here starts my modify
>               Context context1 = null;
>               AssetManager assetManager = context1.getResources().getAssets();        Typeface typeface = Typeface.createFromAsset(assetManager,
> "fonts/principale.ttf");      textView.setTextColor(Color.RED);
>       textView.setTypeface(typeface); // Here ends
>               textView.setText(values[position]);
> 
>       // Change icon based on name        String s = values[position];
> 
>       System.out.println(s);
> 
>       if (s.equals("WindowsMobile")) {
>           imageView.setImageResource(R.drawable.windowsmobile_logo);      } else
> if (s.equals("iOS")) {
>           imageView.setImageResource(R.drawable.ios_logo);        } else if
> (s.equals("Blackberry")) {
>           imageView.setImageResource(R.drawable.blackberry_logo);         } else {
>           imageView.setImageResource(R.drawable.android_logo);        }
> 
>       return rowView;     } } 
```

这里 ListMobileActivity.java

```
package com.mkyong.android;

import com.mkyong.android.adaptor.MobileArrayAdapter;

import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.view.View;

public class ListMobileActivity extends ListActivity {

    static final String[] MOBILE_OS = new String[] { "Android", "iOS",
            "WindowsMobile", "Blackberry"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));        
    }
} 
```

这里是 list_mobile.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px"
        android:src="@drawable/windowsmobile_logo" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="30px" >
    </TextView>

</LinearLayout> 
```

现在，我知道我问了很多，但我该如何解决呢？从自定义适配器更改字体的正确方法是什么？感谢您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:24:26.273

在`MobileArrayAdapter`类 getView 方法中，您使用`null`上下文来访问 AssetManager，因此请更改

```
Context context1 = null; 
```

到

```
Context context1 = context; 
```

# java - Java - 如何添加将 JTextPane 拆分为 3 列？

> ID：14032592
> 
> 赞同：-1
> 
> 时间：2012-12-25T17:16:07.313
> 
> 标签：java, swing, split, chat, jtextpane

我正在开发一个聊天客户端，但我遇到了这个问题：我想要做的是将 JTextPane 分成 3 个列，以便在第一个列中显示用户名，在第二个列中显示消息和日期第三。我尝试通过创建 3 个单独的 JTextPane 来做到这一点，然后同步它们的滚动条，一切似乎都运行良好，直到我看到它对表情符号的插入有何反应。当消息有多行代码时，名称和日期的 JTextPanes 打印新行，但表情符号的高度不同，名称和日期 JTextPanes 无法跟上它们。对于单行，我通过插入尺寸的空白图像（1px，表情符号的高度）来解决它，但这仅适用于其中一行。让我们回到我的问题。一世' 在我有多个 JTextPanes 的情况下，我不愿意继续就如何解决问题进行头脑风暴，因为我确信更多的问题会像这样出现。还有其他方法可以绕过它吗？我可以只用一个 JTextPane 来做吗？怎么做？这是它如何与 3 个 JTextPanes 配合使用的屏幕截图：[http://postimage.org/image/611z2807b/](http://postimage.org/image/611z2807b/) 这是我如何在 Eclipse 中构建 JTextPanes 的图片：[http://postimage.org/image/n2ut4bf2f/](http://postimage.org/image/n2ut4bf2f/) 我希望这是足够的信息，并提前致谢！我没有提供 SSCCE，因为我的代码只有几百行，而且我确实需要一段时间才能删除问题的重要行，但如果真的有必要，我会的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T05:53:20.700

您可以按照此处的说明添加自定义表[http://java-sl.com/JEditorPaneTables.html](http://java-sl.com/JEditorPaneTables.html)

添加 3 列表格，将您的内容放置在行的单元格中。如果需要，您还可以设置不可见的边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:37:07.670

一些 Java Swing 组件[支持 HTML，](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)因此可能有一个`JComponent`允许您按照您描述的方式格式化文本输出（也可能是输入？）。

许多聊天客户端在同一字段中打印用户名和消息，因此您可以选择并复制用户名和消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:51:39.337

我认为你很难只用一个`JTextPane`或什至几个来完成这项工作。与采用更简单的方法相比，您最终会付出更多的工作来使其稳固。

查看您提供的图片，我看到完美使用 3 列`GridLayout`，每列垂直对齐顶部。

如果您发现在很长的聊天中遇到性能问题，*那么*您可以针对性能进行优化。但是在你到达那里之前不要担心它。

# c++ - 如何无限帧率？

> ID：14032593
> 
> 赞同：2
> 
> 时间：2012-12-25T17:16:11.843
> 
> 标签：c++, time, sfml, frame-rate

我正在尝试完全限制 SFML 帧速率，以便显示尽可能多的帧。这样做的原因是我想循环通过一段代码来计算物理模拟中对象的位置，并在大约 100 次迭代后更新屏幕。

我已经做好了：

```
window.SetFramerateLimit(0);
window.UseVerticalSync(false); 
```

SFML 文档说这应该将帧速率设置为“无穷大”，但我仍然认为它停留在大约 60 左右。

有谁知道我怎样才能从中获得更多的性能？

同样，一旦不受限制，我需要能够在 SDL 的 SFML 中执行与此等效的操作：

SDL.延迟（1000）；

有没有办法做到这一点？SDL 延迟很好，因为它可以为其他进程释放 CPU 时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:02:56.220

尽管您可以使用 SFML 取消/激活 VSync，但不能保证它会真正被激活，因为驱动程序本身具有最终决定权，并且它们通常提供强制打开或关闭 VSync 的选项。所以我想说你应该看看你的图形驱动程序的设置。

然后我又想知道你真正想用“无限”帧速率实现什么，因为它通常只会最大化你的 CPU 的一个核心，尽管应用程序实际上没有做任何事情。如果你只是想要更多的 CPU 时间来计算东西，那么这两种方法 (VSync & `setFramerateLimit()`) 都不应该阻止任何东西。

我强烈建议您使用 SFML 2，因为 SFML 1.6 已经超过 2.5 年没有得到维护，有很多丑陋的错误并且缺少一些非常有用的功能（例如 RenderTexture、VertexArray，...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:39:21.890

我不确定帧率问题。根据文档，这将起作用。我会尝试的一件事是一次删除（或注释掉）一个语句，看看它是否有帮助，或者两者都有：垂直因为应该默认关闭，我觉得帧率默认为无穷大，但我可能是错误的。此外，帧速率可能是无限的，但计算只需要足够的时间就可以做到~60 fps。最后，也许它是监视器的限制，如上所述。

关于延迟，我相信您正在考虑睡眠功能 - 使当前线程暂停一段时间。我知道在 SFML 2 中，这是 sf::sleep(sf::Time)，其中时间可以通过例如：sf::seconds(float t)、sf::milliseconds 等推导出来。它们返回一个 Time目的。在 SFML 1.6 中，它是 sf::Sleep(float seconds)。

另外，我不知道这是否解决了它，但我认为 SFML 在 Apple 方面存在一些问题，所以也许，假设您使用的是 1.6 或更低版本，版本 2 解决了问题。第 2 版现已发布......好吧，您不必自己编译它。我认为它解决了其他问题，也许这是以前的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-28T12:26:29.407

通过不设置帧速率限制或将其设置为零（这是默认设置），sfml 窗口也应该尽可能快地显示帧。不幸的是，问题似乎出在驱动程序上，它们强制启用 vsync。因为这是一台 Macbook Pro，带有 HD3000 显卡和英特尔驱动程序，我不知道如何强制关闭垂直同步。

有其他方法可以解决这个问题，例如使用 if 语句来决定是否在每个循环中更新屏幕。这就是我所做的，尽管它不是一个理想的解决方案。

关于 SDL 的延迟功能，SFML 提供了一个`sf::Sleep()`功能。使用对象的参数调用此函数`sf::Time`，用户可以设置延迟的微秒数、毫秒数和秒数。

但是请注意，此功能不会“休眠”或“延迟”这段确切的时间 - 操作系统会在“稍后的某个时间，至少在请求的休眠时间之后”返回。我不完全理解它是如何工作的，或者你可以期望用`sf::Sleep()`or实现什么“时间分辨率” `SDL_Delay()`。

# php - 为什么这个 preg_match_all 会突然停止工作？

> ID：14032594
> 
> 赞同：1
> 
> 时间：2012-12-25T17:16:15.223
> 
> 标签：php, file-get-contents

这段代码工作了好几天，直到它在最糟糕的时候停止工作。它只是从 NOAA 网站提取天气警报信息并将其显示在我的页面上。有人可以告诉我为什么这会突然失败吗？

```
$file = file_get_contents("http://forecast.weather.gov/showsigwx.php?warnzone=ARZ018&warncounty=ARC055");  
preg_match_all('#<div id="content">([^`]*?)<\/div>#', $file, $matches); 
$content = $matches[1];  

echo "content = ".$content."</br>" ;
echo "matches = ".$matches."</br>" ;
print_r ($matches); echo "</br>";
echo "file </br>".$file."</br></br>" ; 
```

现在我得到的只是一个空数组。

这是输出..

```
content = Array
matches = Array
Array ( [0] => Array ( ) [1] => Array ( ) )
file = the full page as requested by file_get_contents 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T17:29:05.053

您的正则表达式正在尝试匹配文字 string `<div id="content">`，然后是一些（尽可能少）*不是反引号*( ```) 的字符，然后是文字 string `</div>`。

但是，在当前的[NOAA 警告和建议](http://forecast.weather.gov/showsigwx.php?warnzone=ARZ018&warncounty=ARC055)中，和之间*有*一个反引号：`<div id="content">``</div>`

```
东北地区有轻微的强雷暴风险
密西西比州南部卡尔霍恩市至富尔顿密西西比线
从今天下午晚些时候到今天晚上。破坏性的风
将是主要威胁...但是孤立的龙卷风是不可能的
排除。

```

这就是您的正则表达式不匹配的原因。

最简单的“修复”是将正则表达式替换为：

```
'#<div id="content">(.*?)<\/div>#s' 
```

where`.`将使用`s` [修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)匹配*任何*字符。

但是，您真正应该做的是[使用适当的 HTML 解析器](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)来提取文本，而不是尝试使用正则表达式解析 HTML。

* * *

**编辑：**这是一个快速示例（未经测试！）如何使用 DOMDocument 执行此操作：

```
$html = file_get_contents( $url );  
$doc = new DOMDocument();
$doc->loadHTML( $html );
$content = $doc->getElementById( 'content' )->textContent; 
```

甚至只是：

```
$doc = new DOMDocument();
$doc->loadHTMLFile( $url );
$content = $doc->getElementById( 'content' )->textContent; 
```

# iphone - 故事板中的根视图控制器

> ID：14032599
> 
> 赞同：1
> 
> 时间：2012-12-25T17:16:41.820
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我正在玩一个单窗口模板。我有一个经典`MainStoryboard.storyboard`文件，我只有 1 个视图控制器（默认情况下都是*初始视图控制器*）

我所做的是尝试实现这个[示例](https://stackoverflow.com/a/2834029/1313939)中的行为，Xcode 告诉我：

```
Application windows are expected to have a root view controller at the end of application launch 
```

我不明白我做错了什么。这是我创建新的代码`UIWindow`：

```
UIWindow *overlayWindow = [[UIWindow alloc] init];
    overlayWindow = [[ACStatusBarOverlayWindow alloc] initWithFrame:CGRectZero];
    overlayWindow.hidden = NO; 
```

当然我的`appDelegate`开始是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:07:07.833

你应该让你的窗口键可见

```
[overlayWindow makeKeyAndVisible]; 
```

正如您链接的同一个示例中所建议的那样。

**编辑**

这是您正在使用的代码

```
UIWindow *overlayWindow = [[UIWindow alloc] init];
overlayWindow = [[ACStatusBarOverlayWindow alloc] initWithFrame:CGRectZero];
overlayWindow.hidden = NO; 
```

第一行无用，可能是导致警告的行。您正在创建一个`UIWindow`实例，而不是在下一行中将其丢弃。

删除它并执行以下操作：

```
UIWindow *overlayWindow = [[ACStatusBarOverlayWindow alloc] initWithFrame:CGRectZero];
overlayWindow.hidden = NO; 
```

您还应该为新创建的窗口分配一个根视图控制器，通过

```
overlayWindow.rootViewController = self.window.rootViewController; 
```

# c++ - 在 gotoxy(80, 25) 位置上写一个字符而不将光标移动到新行

> ID：14032600
> 
> 赞同：0
> 
> 时间：2012-12-25T17:16:46.390
> 
> 标签：c++, turbo-c++, dosbox

我试图在我的输出中画一个框架。

我的窗口大小是 80x25（字符宽度 x 高度）

我已经使用下面的代码成功绘制了所有线条。但是写到最后一点 (80, 25) 是让光标移动到我无法处理的下一行。

我的代码如下：

```
#include <iostream.h>
#include <conio.h>

void DrawFrame(int);
void DrawHoriLine(int, int, int, int, int);

void main()
{
    clrscr();
    DrawFrame(GREEN);
    getch();
}

void DrawFrame(int color)
{
    DrawHoriLine(2,  1, 78, 205, color);
    DrawHoriLine(2,  3, 78, 196, color);
    DrawHoriLine(2, 22, 78, 196, color);
    DrawHoriLine(2, 24, 78, 205, color);
    gotoxy(1, 3);   cprintf("%c", 198);
    gotoxy(80, 3);  cprintf("%c", 181);
    gotoxy(1, 1);   cprintf("%c", 213);
    gotoxy(80, 1);  cprintf("%c", 184);
    gotoxy(1, 25);  cprintf("%c", 212);
    gotoxy(80, 25); cprintf("%c", 190);  //*** Here is problem
}

void DrawHoriLine(int x, int y, int length, int charCode, int color)
{
    gotoxy(x, y);
    textcolor(color);
    for (int i=0; i<length; i++)
        cprintf("%c", charCode);
} 
```

由于 25 是最后一行，将光标移动到下一行会使我的框架无法正常显示。之前绘制的所有水平线都向上移动了一个。

我知道这不是不寻常的行为。
但是没有其他选择可以摆脱这个..吗？如果不是，我将无法使用框架中的最后一行。

我正在使用 DosBox 在 Windows 8 x64 操作系统中运行 Turbo C++。所以我不能像以前那样手动从窗口的属性中设置窗口高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:30:38.117

终端文本模式分辨率为 80 x 24 。最多绘制 24 而不是 25 ，也许？

并尽快摆脱TC。摆脱 TC 后结帐 ncurses。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T01:30:08.580

我认为您可以扩展 24/25 行限制。命令提示符应该可以滚动一段时间。

# regex - Python：在 sys.stdin 中搜索正则表达式

> ID：14032602
> 
> 赞同：1
> 
> 时间：2012-12-25T17:16:48.227
> 
> 标签：regex, python-2.7, stdin

我有一个小的 python 脚本，我在其中查找标准输入中的模式，并在重新格式化后输出它。我已经从示例中删除了复杂的模式和重新格式化代码。目前我的代码看起来像这样。

```
for line in re.finditer(r"""(.*)\n""", sys.stdin.read(), re.MULTILINE):
    print(line.group(0)) 
```

注意“sys.stdin.read()”。这会导致脚本在查找模式之前缓冲整个输入。

如何将标准输入作为缓冲区传递给 finditer，以便标准输入在输入到脚本时进行搜索，而不是先对其进行缓冲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:55:47.623

显然我在问我的问题之前错过了这个，它已经回答了。

[Python正则表达式解析流](https://stackoverflow.com/questions/4634376/python-regex-parse-stream)

不幸的是，这是在 python 中实现正则表达式的问题。有关可能的解决方法，请参阅链接。

# html - 跨平台应用动画的最佳实践（很多和大型）

> ID：14032603
> 
> 赞同：0
> 
> 时间：2012-12-25T17:16:51.587
> 
> 标签：html, flash, animation, cross-platform, coronasdk

跨平台应用动画的最佳实践是什么？我有一个包含许多动画的应用程序，所有动画都具有大分辨率和大量帧。我研究了大多数跨平台引擎，例如 Unity 和 Corona，但没有一个真正适合我的要求 - 我们谈论的是 2D 动画，当我尝试使用简单的 png 帧和精灵表时，应用程序的大小变得非常庞大。我还尝试将 Flash 动画导出到 html5，虽然效果很好（几乎没有重量），但表现很差。

编辑详细说明：

视频当然是一种选择，但我想有更好的解决方案，不是吗？请记住，我的动画必须发生在其他事物之上，例如背景层。即使我确实创建了一个半透明的视频，在没有带有控件等的平台原生播放器的应用程序中播放它仍然不是一件容易的事。它是一种 2d 游戏。假设我有背景图像，并且每当用户触摸某个按钮时，我都会在其顶部显示一个动画剪辑。希望有一个支持多种和高分辨率的跨平台应用程序，精灵表可能会很大。假设我有一个半屏大小和透明度的动画，只是这个精灵表的尺寸可能很大，重量只有几 MB！

你说什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:58:14.773

如果它是一种渲染/录制的动画，你应该坚持使用视频。但是，如果它是基于 2D 对象的动画，就像我猜的那样，您应该使用矢量动画，而 Corona 不是正确的选择。

您应该尝试迁移到 Adob​​e AIR (3.5+)，因为它允许将矢量动画和源文件集成在一个包中。

我们遇到了完全相同的问题（iPad 上的全屏动画，其中许多是由动画艺术家创建的），我们从 Corona 切换到 Adob​​e AIR，因为在将这些动画渲染为 PNG 时应用程序大小很荒谬。现在我们有多个全屏几秒钟的动画，每个重 300Kb！

# java - 如何从具有多个（复合）主键的表中检索数据。在休眠中

> ID：14032610
> 
> 赞同：1
> 
> 时间：2012-12-25T17:18:32.973
> 
> 标签：java, hibernate, hql, composite-key

我有一个具有复合主键（2 列）的表，我需要通过休眠（HQL）检索数据（或特定记录）。

复合键的映射`POJOs`已经完成。但无法从中检索数据或对象获得任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:39:28.107

```
MyEntityPK pk = new MyEntityPK(part1, part2);
MyEntity result = session.get(pk); 
```

如果您需要有关 HQL 查询的帮助，请向我们展示实体及其映射，并告诉我们 HQL 查询应该做什么。但是对于具有复合键的实体而言，HQL 查询与对于具有非复合键的实体而言并没有什么不同。

# ms-access - 如何填充分配给宏的链接列表

> ID：14032611
> 
> 赞同：1
> 
> 时间：2012-12-25T17:18:54.110
> 
> 标签：ms-access

我有一个显示表中记录的主表单（在单个表单视图中）。我将添加一个子表单（可能是一个连续的表单视图），它可以显示匹配条件 PrimaryKey = ForeignKey 的子表的所有记录中的字段列表（可能是名称）。

使字段列表具有可点击性以便我可以单击其中任何一个并例如打开包含有关子记录信息的表单的最佳方法是什么？我应该在报告、列表框、带有记录的连续子表单中查找超链接吗？

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:57:47.957

我在不同的论坛上被建议解决我的问题，我认为它有效并且完全符合我的要求。

[http://www.access-programmers.co.uk/forums/showthread.php?p=1219604#post1219604](http://www.access-programmers.co.uk/forums/showthread.php?p=1219604#post1219604)

# c# - 如何获得 Tibco Spotfire 自动化服务工作生成器

> ID：14032613
> 
> 赞同：0
> 
> 时间：2012-12-25T17:19:09.357
> 
> 标签：c#, tibco, spotfire

我是 Tibco Spotfire 的新手。处理[本](http://stn.spotfire.com/stn/Tutorials/HowToCreateAutomationServicesTask.aspx)教程。但我无法使用工具-> 自动化服务作业生成器找到菜单。我还在我的机器上安装了 Automation Services 3.1 和 Spotfire 3.1。我应该另外安装什么才能让它工作？

相反，我得到了这个![在此处输入图像描述](../Images/57819f57a56d9ab386b81e3c0025db7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:38:00.170

您需要将其部署在您要连接的 Spotfire 服务器上。请参阅[TIBCO Spotfire 自动化服务 5.0 安装和部署手册](https://docs.tibco.com/pub//spotfire-automation-services/5.0.0-nov-2012/TIB_AutomationServices_5.0.0_InstallationManual.pdf)中的第 1.5 节。

部署软件包后，您需要确保用户也拥有正确的许可证（这在同一部分中进行了描述）。

# android - 将文字添加到Android相机应用程序保存的全尺寸图片并保存为新文件而不会丢失质量

> ID：14032614
> 
> 赞同：0
> 
> 时间：2012-12-25T17:19:13.647
> 
> 标签：android

我一直在尝试改进这个简单的应用程序，它将文本（“hola”）添加到 Android 相机应用程序拍摄的照片中，并将图像保存到 sd 卡。

但是，我只设法从返回的数据中将文本添加到缩略图中，并将文件保存到 sd 卡。

谁能指出我正确的方向来做完全相同的事情，但使用全尺寸照片？

非常感谢！！

到目前为止我所拥有的：（使用教程中的代码和stackoverflow上类似问题的答案）

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button captureBtn = (Button)findViewById(R.id.capture_btn);
    captureBtn.setOnClickListener(this);

}

public void onClick(View v) {
    if (v.getId() == R.id.capture_btn) {

        try {
            Intent tomaFotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(tomaFotoIntent, CAMERA_CAPTURE);
        } 
        catch(ActivityNotFoundException anfe){
            String errorMessage = "Device doesn't support capturing images";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    }
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        //user is returning from capturing an image using the camera
        if(requestCode == CAMERA_CAPTURE){
            //get the Uri for the captured image
            picUri = data.getData();
            //get the returned data
            Bundle extras = data.getExtras();
            //get the cropped bitmap
            Bitmap thePic = extras.getParcelable("data");
            //agregamos texto
            bmConTexto = writeTextOnDrawable(thePic, "hola");

            //guardamos la nueva imagen
            saveBitmap(bmConTexto.getBitmap());

            //retrieve a reference to the ImageView
            ImageView picView = (ImageView)findViewById(R.id.picture);
            //display the returned cropped image
            picView.setImageBitmap(bmConTexto.getBitmap());
        }
    }
}

private BitmapDrawable writeTextOnDrawable(Bitmap thePic, String text) {

    Bitmap bm = thePic.copy(Bitmap.Config.ARGB_8888, true);
    Typeface tf = Typeface.create("Helvetica", Typeface.BOLD);

    Paint paint = new Paint();
    paint.setStyle(Style.FILL);
    paint.setColor(Color.WHITE);
    paint.setTypeface(tf);
    paint.setTextAlign(Align.CENTER);
    paint.setTextSize(20);

    Rect textRect = new Rect();
    paint.getTextBounds(text, 0, text.length(), textRect);

    Canvas canvas = new Canvas(bm);
    //Calculate the positions
    int xPos = (canvas.getWidth() / 2) - 2;     //-2 is for regulating the x position offset
    //"- ((paint.descent() + paint.ascent()) / 2)" is the distance from the baseline to the center.
    int yPos = (int) ((canvas.getHeight() / 2) - ((paint.descent() + paint.ascent()) / 2)) ;  
    canvas.drawText(text, xPos, yPos, paint);
    return new BitmapDrawable(getResources(), bm);

}

public void saveBitmap(Bitmap bm)
{
    try
    {
        String mBaseFolderPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/DCIM/Camera/";
        String mFilePath = mBaseFolderPath + "abcd.jpg";

        FileOutputStream stream = new FileOutputStream(mFilePath);
        bm.compress(CompressFormat.JPEG, 100, stream);
        stream.flush();
        stream.close();
    }
    catch(Exception e)
    {
        Log.e("Could not save", e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:27:25.593

听起来您正在尝试拍照并在其上写下“Hola”，如果是这种情况，您是否尝试过查看[`takePicture()`](http://developer.android.com/reference/android/hardware/Camera.html#takePicture%28android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback%29)android camera api？如果不是，你能详细说明这个问题吗？

**编辑：**从上面链接的页面顶部粘贴：

> 要使用此类拍照，请使用以下步骤：
> 
> 1.  从 open(int) 获取 Camera 的实例。
> 2.  使用 getParameters() 获取现有（默认）设置。
> 3.  如有必要，修改返回的 Camera.Parameters 对象并调用 setParameters(Camera.Parameters)。
> 4.  如果需要，请调用 setDisplayOrientation(int)。
> 5.  重要提示：将完全初始化的 SurfaceHolder 传递给 setPreviewDisplay(SurfaceHolder)。没有表面，相机将无法开始预览。
> 6.  重要提示：调用 startPreview() 开始更新预览图面。必须先开始预览，然后才能拍照。
> 7.  如果需要，请调用 takePicture(Camera.ShutterCallback, Camera.PictureCallback, Camera.PictureCallback, Camera.PictureCallback) 来拍摄照片。等待回调提供实际的图像数据。
> 8.  拍照后，预览显示将停止。要拍摄更多照片，请先再次调用 startPreview()。
> 9.  调用 stopPreview() 以停止更新预览图面。
> 10.  重要提示：调用 release() 以释放相机以供其他应用程序使用。应用程序应立即在 onPause() 中释放相机（并在 onResume() 中重新打开（）它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:02:37.743

您的代码似乎只是正确的？您面临的问题是什么？您从相机缩略图中获得的图像大小是多少？你可以尝试使用

```
Bitmap thePic = (Bitmap) data.getExtras().get("data"); 
```

代替

```
Bitmap thePic = extras.getParcelable("data"); 
```

**更新：**
您可以直接返回位图本身并检查，而不是返回 BitmapDrawable。只需将您的最后一行更改为

```
return bm; 
```

# android - 以编程方式放置两个 ImageView

> ID：14032616
> 
> 赞同：0
> 
> 时间：2012-12-25T17:19:35.977
> 
> 标签：android, android-layout

我需要在我的布局中放置多个新的 ImageView。问题是一个完全在同一位置出现在另一个之上。虽然我改变了位置，但它只与第一个有关。他们都在80,80。

```
RelativeLayout.LayoutParams lp1 = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);

    addpPicD(lp1,80,80);
    addpPicD(lp1,100,100);
}

private void addpPicD(LayoutParams lp, int Lan, int Lon) 
{

        lp.setMargins(Lan, Lon, 0, 0);
        ImageView imageView = new ImageView(this);  
        imageView.setImageResource(R.drawable.dot_bl);  
        imageView.setLayoutParams(lp);
        rel.addView(imageView);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:35:24.023

`RelativeLayout`有自己的[`Layout Parameters`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)。要并排或垂直放置子视图，您需要提供规则。用于[`addRule()`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#addRule%28int,%20int%29)您添加的每个视图的布局参数。

将等值与要与之对齐的视图一起传递`RelativeLayout.BELOW`。`RelativeLayout.RIGHT_OF``id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:45:54.453

您的问题是您在第一次创建布局时设置了 layoutparams，然后它们不会像您想象的那样重新创建。

简单的解决方案。将其更改为下面的代码，该代码经我测试：

```
RelativeLayout.LayoutParams lp1 = null;

addpPicD(lp1,80,80);
addpPicD(lp1,100,100);
}

private void addpPicD(LayoutParams lp, int Lan, int Lon) 
{
    lp = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    lp.setMargins(Lan, Lon, 0, 0);
    ImageView imageView = new ImageView(this);  
    imageView.setImageResource(R.drawable.dot_bl);  
    imageView.setLayoutParams(lp);
    rel.addView(imageView);

} 
```

# cookies - 网络浏览器控制中如何处理 cookie？

> ID：14032620
> 
> 赞同：0
> 
> 时间：2012-12-25T17:20:26.583
> 
> 标签：cookies, webbrowser-control

WebBrowser 控件中的 cookie 是否像 Firefox 或 Chrome 等任何其他浏览器一样正常运行？我在 VB 中为 webbrowser 控件制作了一个简单的界面，现在我无法管理某些站点的登录/注销。

有时注销有效，有时则无效。我是否需要为 Web 浏览器控件添加额外的 cookie 处理代码，否则它会自行完成所有操作。

除了 MSDN，我在哪里可以阅读更多关于 WebBrowser 控件的信息。

我找到了这段代码：

```
 webBrowser.Navigate("javascript:void((function(){var a,b,c,e,f;f=0;a=document.cookie.split('; ');for(e=0;e<a.length&&a[e];e++){f++;for(b='.'+location.host;b;b=b.replace(/^(?:%5C.|[^%5C.]+)/,'')){for(c=location.pathname;c;c=c.replace(/.$/,'')){document.cookie=(a[e]+'; domain='+b+'; path='+c+'; expires='+new Date((new Date()).getTime()-1e11).toGMTString());}}}})())") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:25:40.517

[cookie 可以标记为“HttpOnly”](http://msdn.microsoft.com/en-us/library/aa384321.aspx)（属性不区分大小写），以表明 cookie 是“**不可编写脚本的**”并且出于安全原因不应向客户端应用程序显示。

此外，如果您的顶级文档[位于另一个域中，它](https://www.kb.cert.org/vuls/id/784102)可能无法访问身份验证 cookie 。

# android - 带有华硕 Nexus 7 的 AutoCAD

> ID：14032623
> 
> 赞同：-1
> 
> 时间：2012-12-25T17:20:42.797
> 
> 标签：android, tablet, cad

嘿，我圣诞节刚买了一台平板电脑，我在大学里用 Autodesk 3dsMax 做 3dModelling。我只是想知道是否可以将平板电脑与 CAD 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:52:13.940

首先，不要在这里问这类问题。如 AC 所指出的那样使用 - 超级用户或 android.stackexchange。

其次，存在一个[应用程序](https://play.google.com/store/apps/details?id=com.autodesk.autocadws)。你应该搜索过游戏商店。

# java - PrintWriter：读取和写入同一个文件 - 文件在再次打开之前似乎没有保存

> ID：14032624
> 
> 赞同：4
> 
> 时间：2012-12-25T17:20:45.557
> 
> 标签：java, filewriter, printwriter

我正在尝试创建一个将新数据写入保存文件的程序。该文件有三个“槽”，即三个由分隔符分隔的字符串。主程序以slot为参数调用saver程序，saver程序打开文件，将每个slot中已有的String读入局部变量，用新的String替换给定slot对应的String，覆盖文件与新插槽。这应该导致只更新给定的插槽，而其他两个保持与以前相同。

主程序连续调用saver 3 次，每个slot 调用一次。这应该导致保存文件如下所示（其中 # 是分隔符）：

第一次通话前：#EMPTY#EMPTY#EMPTY

第一次通话后：#NewString#EMPTY#EMPTY

第二次通话后：#NewString#NewString#EMPTY

第三次通话后：#NewString#NewString#NewString

.

取而代之的是：

第一次通话前：#EMPTY#EMPTY#EMPTY

第一次通话后：#NewString#EMPTY#EMPTY

第二次通话后：#EMPTY#NewString#EMPTY

第三次通话后：#EMPTY#EMPTY#NewString

printwriter (PrintWriter saver = new PrintWriter(new FileWriter(fileName))) 在保护程序文件中打开，而不是在主文件中，因此每次调用都会打开一个新的 PrintWriter。我 .flush() 和 .close() 在 saver 方法的末尾（它是一个 void 方法）。

为什么在下一次调用该方法之前文件似乎没有保存？=S 我是否必须强制执行某种等待直到文件不再打开的命令，所以，我该怎么做？

```
public static void main(String[] args) throws IOException {

        SaveGame.saveState("adventure/save/s1.save", new Adventure(), 0);

        SaveGame.saveState("adventure/save/s2.save", new Adventure(), 1);

        SaveGame.saveState("adventure/save/s3.save", new Adventure(), 2);
        } 
```

接着：

```
public class SaveGame {

public static void saveState(String fileName, Adventure a, int slot) throws IOException {   

    //UPDATE MASTER SAVE FILE save.txt
    String[] save = new String[3]; 

    try {
        Scanner openSave = new Scanner(new FileReader("/adventure/save/save.txt"));
        openSave.useDelimiter("#");
        save[0] = openSave.next();
        save[1] = openSave.next();
        save[2] = openSave.next();
        openSave.close();
    }
    catch (FileNotFoundException e) {
        save[0] = "EMPTY";
        save[1] = "EMPTY";
        save[2] = "EMPTY";
    }

    save[slot] = "newString"; //change the CURRENT save in the given slot to the new

    PrintWriter updater = new PrintWriter(new FileWriter("adventure/save/save.txt"));
    updater.println("#" + save[0] + "#" + save[1] + "#" + save[2]);
    updater.flush();
    updater.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:32:53.020

读取器读取文件`/adventure/save/save.txt`，而写入器写入`adventure/save/save.txt`。除非您从文件系统的根目录 ( `/`) 运行程序，否则这些不是相同的文件。

应用 DRY 原则（不要重复自己）。创建一个包含文件路径的常量，并在使用该路径的任何地方使用该常量。这将避免此类错误。

此外，在 finally 块中关闭读取器和写入器，或使用 Java 7 try-with-resources 构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:41:47.837

它完全按照你的吩咐去做。每次调用 saveState 时，将新实例化数组的单个索引设置为“newString”，并显示该数组。

**编辑**

对不起，我看错了你的代码。

# android - Android“返回”按钮操作

> ID：14032627
> 
> 赞同：4
> 
> 时间：2012-12-25T17:21:03.997
> 
> 标签：android, android-activity

我有两个活动A和B。活动A调用活动B，当按下“返回”时，活动A会返回，这很棒。问题是，当我从 A 转到 B，然后我退出应用程序时，当我返回时，我会看到 Activity B，但这一次，按“返回”将再次退出应用程序。所以我的问题是 - 如何克服这个问题，所以当我回到活动 B 的应用程序时，按“返回”将使我返回活动 A？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T17:26:07.633

覆盖后退按钮，然后从该按钮开始您的活动 A。例如

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
       //start activity A here
    }
    return super.onKeyDown(keyCode, event);
} 
```

另一方面，如果您的应用仅适用于较新的设备（我认为是 API 级别 5），您可以这样做

```
@Override
    public void onBackPressed() {
        //start activity here
        super.onBackPressed();   

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T13:55:11.443

```
In Activty A Override  
@Override
    public void onBackPressed() {
        //start activity here
       Intent intent=new Intent(context,ActivtyB.class);
       startActivity(intent);
    }

In Activity B Override  
@Override
    public void onBackPressed() {
        //start activity here
       finish();
    } 
```

# .net - 如何从 XSL 中的先前状态增加内部循环索引

> ID：14032630
> 
> 赞同：0
> 
> 时间：2012-12-25T17:21:24.090
> 
> 标签：.net, xslt, xsl-fo

如何从 XSL 中的先前状态增加内部循环索引。最好的方法是什么，是最好地维护一个单独的全局变量还是使用任何内置函数。我是 XSL 的新手，请建议

输入 XML

```
<A1>
   <X1> ZERO </X1>   
</A1>
<A1>
   <X1> A </X1>
   <X1> B </X1>
</A1>
<A1>
   <X1> C </X1>
   <X1> D </X1>
</A1>
<A1>
   <X1> E </X1>
   <X1> F </X1>
</A1> 
```

预期产出

```
Y1 1
Y1 2
Y1 3
Y1 4
Y1 5
Y1 6 
```

使用以下 XSL 我得到

```
Y1 1
Y1 2
Y1 1
Y1 2
Y1 1
Y1 2 
```

.

```
<xsl:for-each select="A1">
  <xsl:variable name="var:v50" select="position()" />
  <xsl:variable name="var:v51" select="userVBScript:FctNotEqual(string(X1/text()),"ZERO")" />
   <xsl:if test="$var:v51">
     <xsl:for-each select="X1">
       <xsl:variable name="var:v52" select="position()" />
       <Y1>
         <xsl:value-of select="$var:v52" />
       </Y1>  
     </xsl:for-each>
  </xsl:if>
</xsl:for-each> 
```

你能建议一个示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:32:22.290

这可以通过一个`xsl:for-each`带有谓词过滤器的单个来更简单地解决，以仅选择所需的元素：

```
<xsl:for-each select="A1/X1[not(normalize-space()='ZERO')]">
    <Y1>
        <xsl:value-of select="position()"/>
    </Y1>  
</xsl:for-each> 
```

# php - 优化我的sql查询

> ID：14032631
> 
> 赞同：1
> 
> 时间：2012-12-25T17:22:11.207
> 
> 标签：php, mysql, optimization

我的mysql数据库中有几个自动增量`s.no`和各自的。`names`

目前`queries`书面如下。

```
 $result = mysql_query ("SELECT name FROM table WHERE s.no= '1'") or die (mysql_error ());
    while($row = mysql_fetch_array($result)){

    $name1= $row['name'];
    }

    $result = mysql_query ("SELECT name FROM table WHERE s.no= '2'") or die (mysql_error ());
    while($row = mysql_fetch_array($result)){

    $name2= $row['name'];
    } 
```

如何优化这一点，使其具有单个查询并分配`name1`from `s.no=1`、`nameN`from `s.no=N`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T17:23:32.513

你可以用一个`IN`子句来做到这一点。

```
 SELECT name, s.no as no FROM table WHERE s.no IN ('1', '2') 
```

然后，用字符串动态查找变量。

```
$varName = 'name'.$row['no'];
$$varName = $row['name]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:26:15.097

```
$result = mysql_query ("SELECT name,s.no numb FROM table WHERE s.no= '1' OR s.no= '2'") or die (mysql_error ());
while($row = mysql_fetch_array($result)){

if($row['numb']==1)
   $name1= $row['name'];
else if($row['numb']==2)
   $name2= $row['name'];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:29:30.147

请原谅我的 PHP，但这样的事情会起作用。

```
$name = [];

$result = mysql_query ("SELECT s.no, name FROM table") or die (mysql_error ());
while($row = mysql_fetch_array($result)) {
    $index = $row['no'];
    $name[$index] = $row['name'];
} 
```

我最近不得不在 java 中做类似的事情，我使用 Map 来跟踪批处理查询中的逻辑“组”。上面的代码使用了相同的想法。

如果您只想在 (1, 2) 中获取 s.no 的行，那么正如上面的海报所说，您可以使用 IN 子句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T17:43:05.640

```
$sql = "SELECT name FROM table WHERE s.no IN ('1', '2') order by s.no asc";
$result = mysql_query($sql);
$name1 = mysql_result($result, 0, 0);//fetches row 0, column 0
$name2 = mysql_result($result, 1, 0);//fetches row 1, column 0 
```

[http://php.net/manual/en/function.mysql-result.php](http://php.net/manual/en/function.mysql-result.php)

# android - 如何在执行测试用例时保存 android web 驱动程序截图？

> ID：14032636
> 
> 赞同：-1
> 
> 时间：2012-12-25T17:23:40.140
> 
> 标签：android, selenium, webdriver, android-webview

获取设备屏幕截图时出现故障异常

我的代码如下：

```
//open the page
driver.get("http://wikipedia.com");
//take another screenshot
try {
        File screenshot = new File("screenshot1.png");
            File tmpScreenshot = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);           
        }
        catch(IOException e){
            System.out.println("Failed to take screenshot."+e.getMessage());
        }

        //quit
        driver.quit();
    } 
```

任何机构都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:02:33.417

我试图执行你的代码但没有得到异常，虽然我也没有得到截图。我已经修改了你的代码看看这是否适合你

```
driver.get("http://wikipedia.com");

File screenshot = new File("screenshot1.png");
File tmpScreenshot = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
org.apache.commons.io.FileUtils.copyFile(tmpScreenshot, screenshot);
System.out.println("the screenshot printed at:- " + screenshot.getAbsolutePath()); 
```

# c# - 表只有我手动添加的数据而不是插入查询？

> ID：14032638
> 
> 赞同：0
> 
> 时间：2012-12-25T17:24:02.753
> 
> 标签：c#, sql-server, ado.net

> **可能重复：**
> [INSERT 查询，它返回 1（插入 1 行）。但是当我查看表格时，我什么也没看到。下面代码中的return语句返回1](https://stackoverflow.com/questions/14032374/insert-query-it-returns-1-1-row-is-inserted-but-when-i-view-the-table-i-see)

```
 string connectionString = @"Data Source=|DataDirectory|\SAW - DB STORE.sdf",
   result = "";

            using (SqlCeConnection con = new SqlCeConnection(connectionString))
            {
                using (SqlCeCommand com = new SqlCeCommand())
                {
                    com.CommandText = "INSERT  INTO Words (Word, Word_Length, Bonus_Word, Points) VALUES (@wrd, @len, @bnus_wrd, @points)";

                    com.Parameters.AddWithValue("@wrd", wrd);
                    com.Parameters.AddWithValue("@len", len);
                    com.Parameters.AddWithValue("@bnus_wrd", bnus_wrd);
                    com.Parameters.AddWithValue("@points", points);

                    com.CommandType = System.Data.CommandType.Text;
                    com.Connection = con;
                    con.Open();

                    try
                    {
                        int r = com.ExecuteNonQuery();
                        result = string.Format("{0} WORD ADDED", r);
                    }
                    catch (Exception ex)
                    {
                        result = string.Format("Error found: {0}", ex.Message);
                    }
                    finally
                    {
                        con.Close();
                    }
                }
            }

            label7.Visible = true;
            label7.Text = result;

            SqlCeConnection con1 = new SqlCeConnection(@"Data Source=|DataDirectory|\SAW - DB STORE.sdf");
            con1.Open();
            SqlCeCommand com1 = new SqlCeCommand();
            com1.CommandText = "Select * From Words";
            com1.CommandType = System.Data.CommandType.Text;
            com1.Connection = con1;
            SqlCeDataReader read;
            read = com1.ExecuteReader();
            while (read.Read())
            {
                MessageBox.Show("Text =" + read[1]);
            }
            con1.Close(); 
```

表只有我手动添加的数据而不是插入查询？使用 Visual Studio 2012 数据应该在表中，但如果通过插入查询添加则不是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:39:42.103

使用 try 和 catch 并将调试器放在 ExecuteNonQuery 上。问题在于您的 AddWithValue，Rest 一切都很好。在 AddwithValue 中没有类型检查。如果您尝试提供不适合目标数据库列的数据类型的值，这可能会导致错误。最好以这种方式使用 Parameters.Add.Like

cmd.Parameters.Add(new SqlParameter("@Id", SqlDbType.Int));

cmd.Parameters["@Id"].Value = 1;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:30:18.003

如果插入的一切似乎都有效，但您仍然无法在服务器资源管理器中看到数据，那么您可能在服务器资源管理器中查看错误的数据库/文件。

# objective-c - 图像分辨率支持 iPhone 3G、iPhone 4 和 iPhone 5

> ID：14032641
> 
> 赞同：1
> 
> 时间：2012-12-25T17:24:26.420
> 
> 标签：objective-c, ios, uikit, screen-resolution, iphone-5

我知道以前也有人问过类似的问题，但我真的处于可怕的境地。

我正在构建一个想要在**iPhone 3G**、**iPhone 4**和**iPhone 5**上运行的应用程序。

我是 iOS 开发的初学者，直到现在，我已经编写了大量仅适用于 iPhone 模拟器的 UI 代码。我专注于通用语言和 SDK 功能，以了解通用 iOS 开发，因此几乎忽略了模拟器为我提供之外的任何分辨率支持。

现在，我面临着这些不同 iPhone 版本之间的便携性要求，我很困惑。首先让我谈谈我对 iPhone 3 和 iPhone 4 屏幕支持细节的了解，如果我做错了什么，请纠正我（暂时完全忽略 iPhone 5）：

1.  系统假定基于**320x480 POINT**的查看区域。在 iPhone 3 中，实际屏幕尺寸是相同的，但 iPhone 4 使用的是实际**640x960 像素**大小的屏幕。

2.  我们根据**320x480**大小编码和生成视图。**我们提供普通分辨率图像（例如 100x100 大小的 some_image.png）和带有“@2x”**后缀的高分辨率版本。（**200x200****大小的 some_image@2x.png**）都在同一个应用程序包中。

3.  在调用`UIKit`图像加载方法时，例如`UIImage`或`UIImageView`系统会根据当前设备（iPhone 3 或 iPhone 4）选择正确版本的图像并加载它们。

到目前为止，为了支持低分辨率和高分辨率的**iPhone 3G**和**iPhone 4** ，我还是谨慎地提供了这三个步骤。

假设我有一个尺寸为**100x100**的图像，我将在`UIImage`对象中使用它。我也提供**200x200**高分辨率版本，我认为这适用于带有**“@2x”**后缀的 iPhone 4 和 iPhone 5。

但是假设我有一个覆盖整个背景的**320x480大小的背景图像，并且我还提供了带有****“@2x”**后缀的**640x960**版本。

 ****但是在大小为640x1136**的 iPhone 5 屏幕上会发生什么呢？我应该准备一个 iPhone5 分辨率的图像并在有条件的情况下加载它`if(IPHONE5 == true)`吗？

处理这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:50:51.707

您需要处理的几个问题：

1.  旨在匹配屏幕纵横比的“全屏”/背景图像/其他图像
2.  与屏幕纵横比无关的图像

在 #1 的情况下，您将希望提供具有不同分辨率的相同/相似图像。一个适合 320x480 像素设备，一个用于视网膜显示器（640x960 像素），@2x，第三个适合 iPhone 5 显示器（如果是通用应用程序，可能还有单独的 iPad 图像）。

不幸的是，iOS 没有为 iPhone 5 显示器提供类似 @2x 命名的任何东西。一个常见的约定似乎是在文件名中包含@568h，但 iOS 不会自动使用它。解决方法是判断显示器是否为 iPhone 以及是否为更高的显示器。以下代码片段将允许您执行此操作：

```
// Is it an iPhone with the tall screen?
if ([[ UIScreen mainScreen ] bounds ].size.height == 568.))

    // use the tall image
    image = [UIImage imageNamed:@"myImage@568h.png"

else {

    // use 'default' image (will use myimage@2x.png if iPhone retina, 
    // myImage~ipad.png if iPad, myImage~ipad@2x.png if iPad retina)
    image = [UIImage imageNamed:@"myImage.png"
} 
```

对于#2，由于您可能希望 100px x 100px 在所有设备上显示为正方形，因此您可以只提供 100px x 100px 和 200px x 200px 图像，后者的文件名中包含 @2x。**

# c# - 将自定义图像添加到 Excel 功能区中的按钮

> ID：14032644
> 
> 赞同：0
> 
> 时间：2012-12-25T17:24:51.570
> 
> 标签：c#, excel, vsto

我正在开发一个 microsoft excel 插件并添加了一个按钮，但我需要向它添加自定义图像。如何实现

```
 <button id="customButton1" label="myLabel" size="large" image="????" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:33:45.857

尝试在代码隐藏中使用此代码段：

```
customButton1.Image = new Bitmap("Image.jpg"); 
```

或者

```
customButton1.Image = Image.FromFile(@"C:\Image.jpg"); 
```

[如何：将自定义图标添加到工具栏和菜单项](http://msdn2.microsoft.com/en-gb/library/ms268747%28VS.80%29.aspx)

1.  创建一个名为 ConvertImage 的新类。此类使用 System.Forms.Axhost 将图像文件转换为可应用于菜单项的图像类型。

2.  通过将图标文件添加到 ImageList 来添加将图标文件转换为 Image 文件的方法。此代码将图像文件发送到您创建的 ConvertImage.Convert 方法，然后将文件返回给调用者。

# mysql - wordpress $wpdb 获取结果方法不返回结果

> ID：14032647
> 
> 赞同：1
> 
> 时间：2012-12-25T17:25:11.850
> 
> 标签：mysql, wordpress

我在 wordpress 中有一个包含 100000 行的新表。我想检索所有行。

```
global $wpdb;
$query = "SELECT * 
FROM newtable";

$result = $wpdb->get_results($query); 
```

当我执行这个查询是什么都不返回。但

```
global $wpdb;
$query = "SELECT * 
FROM newtable limit 0,25000";

$result = $wpdb->get_results($query); 
```

然后它返回 25k 行我不明白 100000 行有什么问题。

我想要所有 100000 行。我尝试了很多，但没有找到任何有效的解决方案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:32:11.960

你需要检查——

*   PHP 内存限制
*   查询执行时间
*   本例中的 PHP 脚本执行时间

尝试增加此服务器设置，然后让我知道

# php - php从数据库中随机选择记录

> ID：14032656
> 
> 赞同：0
> 
> 时间：2012-12-25T17:25:59.793
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 从 600K 行中快速选择 10 个随机行](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)

我有一张包含超过 300,000 条记录的表。我需要从该表中选择 10 或 13 或 20 条记录。

我尝试了以下方法。

这需要很长时间来选择

```
SELECT * FROM products ORDER BY RAND() LIMIT 0,12 
```

或者

这种方式同样的事情，但我似乎无法选择超过 1 条记录

```
$temp = mysql_query('SELECT id FROM products limit 0,12');
if ( count( $temp ) > 0 ) {
    $j = 1;
    foreach( $temp as $index => $row ) {
        $p[$j++] = $row[id];
    }
    $my_p= $p[ rand( 1, --$j ) ];
    $pp = 'SELECT id FROM products WHERE id = {$my_p}';
} 
```

更新：按照这个[MySQL 从 600K 行中快速选择 10 个随机行](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)

我有

```
 SELECT * FROM QM_Products AS r1 
JOIN (SELECT (RAND() * (SELECT MAX(id) 
FROM QM_Products )) AS id) AS r2 WHERE r1.id >= r2.id 
ORDER BY r1.id ASC 
LIMIT 0, 10 
```

这工作谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:29:09.217

试试这个 php 代码

```
$r = mysql_query("SELECT count(*) FROM user");  
$d = mysql_fetch_row($r);  
$rand = mt_rand(0,$d[0] - 1);  

$r = mysql_query("SELECT username FROM user LIMIT $rand, 1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:22:52.873

您选择使用此解决方案：

```
SELECT * FROM QM_Products AS r1 
JOIN (SELECT (RAND() * (SELECT MAX(id) 
FROM QM_Products )) AS id) AS r2 WHERE r1.id >= r2.id 
ORDER BY r1.id ASC 
LIMIT 0, 10 
```

但是，我会指出，如果随机表达式返回接近表末尾的 id，您可能会得到少于 10 行。

此外，这不是一个随机选择，因为返回的行将始终具有相邻的 id 值。

除了`ORDER BY RAND()`解决方案（当然这在大型数据集上表现不佳，因为它不能使用索引），我可以考虑另一种随机选择多行的方法。下面是一些伪 PHP 代码：

```
// MAX(id) is quicker than COUNT(*) in InnoDB
$maxid = query "SELECT MAX(id) FROM QM_Products"

// generate a list of N random values, making sure they're distinct
$id_list = array();
while (count($idlist) < 10) {
  $rand_id = mt_rand(1,$maxid);
  $id_list[$rand_id] = 1;
}

// convert the id list to a comma-separated string in an SQL query
$id_list = implode(",", array_keys($id_list)); 
$rows = query "SELECT * FROM QM_Products WHERE id IN ($id_list)" 
```

如果随机值在不存在具有匹配 id 的行的间隙中出现，您可能会得到少于 N 行。`ORDER BY RAND()`但是上述方法比一次对 1 行发出 N 次查询要快得多。因此，您可以设计一个循环来根据需要重复搜索多次以找到 N 行。如果您有非常大的间隙，这不会很好，因为它可能会在找到足够的行之前循环很长时间。

# mysql - linux：使用 bash 工具从表中删除全文

> ID：14032662
> 
> 赞同：1
> 
> 时间：2012-12-25T17:26:24.847
> 
> 标签：mysql, linux, bash

如何使用 bash 工具从 sql 文件中删除全文？

我需要克隆 myisam 表并将其转换为 INNODB，因此我无法使用

```
DROP FULLTEXT INDEX ON table_name 
```

我试过的

```
sed -i 's@FULLTEXT.*.)@@g' post.sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:02:05.923

由于至少三个原因，这很难实现自动化：

```
CREATE TABLE `foo` (
  `c` TEXT,
  FULLTEXT KEY `c` (`c`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

*   删除 FULLTEXT KEY 行还需要删除前一行末尾的逗号。或者用其他行替换 FULLTEXT KEY 行。

*   字符串“FULLTEXT KEY”可能出现在您的 SQL 脚本的其他地方、字符串文字内或注释中。所以你必须小心误报匹配。

*   我们可以简单地将“FULLTEXT KEY”更改为“KEY”，但是在长 VARCHAR 或 TEXT 列上声明全文索引是相当常见的，这对于传统索引的 1000 字节限制来说太长了。您可以使用索引前缀，但在正则表达式中选择前缀长度和处理多列索引很困难。

我将通过在创建 SQL 脚本*之前删除所有 FULLTEXT 索引来解决这个问题。*您可以查询所有 FULLTEXT 索引并从信息模式中生成删除语句。
例如：

```
SELECT CONCAT('ALTER TABLE `', table_schema, '`.`', table_name, '` DROP KEY `', 
  index_name, '`;') AS ddl 
FROM INFORMATION_SCHEMA.STATISTICS 
WHERE table_schema='test' and index_type='FULLTEXT'; 
```

我的第二个选择是，如果您无法更改原始数据库并且需要更改脚本，则将是在文本编辑器中*手动*编辑 SQL 脚本，而不是尝试将其自动化。这使您有机会检查每个案例并以正确的方式对其进行编辑。

如果您的 SQL 脚本是一个非常大的文件，您可能必须仔细选择您的文本编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T20:17:05.523

我使用 PHP 片段自动执行此操作，但我确信 perl 或 sed 可以以类似的方式执行此操作。我在 c 风格的注释中包围了全文索引，所以什么都没有丢失。

`php -r 'file_put_contents("schema.sql", preg_replace("/(,\s+FULLTEXT KEY [^)]+\))/", "/*$1*/", file_get_contents("schema.sql")));'`

这适用于 MySQL 模式文件 (CREATE TABLE)。

正如 Bill Karwin 所指出的，如果您针对包含可能与正则表达式匹配的数据的完整 SQL 转储运行此程序，那么它将修改该数据。

# ios - 如何正确配置/形成 NSFetchedResultsController 的请求以包含多对多关系？

> ID：14032665
> 
> 赞同：1
> 
> 时间：2012-12-25T17:27:02.923
> 
> 标签：ios, core-data, many-to-many, uitableview, nsfetchedresultscontroller

我们在实体产品和类别之间有一个经典的多对多关系，其中一个产品可能包含在许多类别中。我们想在 UI 中使用 NSFetchedResultsController 和 UITableViewController 或 UICollectionView 来显示这一点，其中 Category.name 将是 Section 标题文本/标题， Product.name 将是 Cell 文本。

考虑到产品可能包含在多个类别中，如何为其配置 NSFetchedResultsController 和 sectionKeyName 以便我们可以按类别分组产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:16:57.927

这是个有趣的问题。一种方法是将获取的结果控制器的实体定义为产品类别链接表。换句话说，表格中的每个条目都是一个产品类别组合，它允许一个产品在您的表格中出现多次。然后，您将使用类别信息来定义部分，并使用产品信息来定义单元格。您的 sectionKeyPath 将类似于`category.name`.

# ruby - activerecord has_one

> ID：14032670
> 
> 赞同：1
> 
> 时间：2012-12-25T17:27:53.117
> 
> 标签：ruby, activerecord

我有一个模型`Show`和一个模型`Artist`。我想要来自`Show`to的参考`Artist`，但反之亦然。

所以 a`Show`有一个`Artist`，就是这样。我这样做了：

```
class Artist < ActiveRecord::Base
end

class Show < ActiveRecord::Base
    has_one :artist
end 
```

但它不起作用。每次我这样做：

```
a_show.artist = an_artist 
```

它没有分配它。我也得到这个：

> 弃用警告：您正在尝试创建属性`show_id'. Writing arbitrary attributes on a model is deprecated. Please just use`attr_writer` 等（从 (irb):3 的 irb_binding 调用）

在我的数据库中，我有一个名为table 类型`artist_id`的列。`shows``Integer`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:54:39.143

> 我在整数类型的显示表中有一个名为 artist_id 的列

在这种情况下，类中的关系`Show`应该是`belongs_to`代替`has_one`（`belongs_to`总是在包含外键的类上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:57:37.060

看看这个[协会基础](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)

![在此处输入图像描述](../Images/853ab5094bdc6710f3fc8c8fa9305c15.png)

但你需要的是belongs_to，才能实现你想要的。

![在此处输入图像描述](../Images/7101fd7dcccf152a258265cbf0e2ee6c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T02:21:58.647

对于这种类型的混淆，您应该参考Rails 指南的[在 belongs_to 和 has_one 之间选择](http://guides.rubyonrails.org/association_basics.html#choosing-between-belongs-to-and-has-one)部分。

如果您想在两个模型之间建立一对一的关系，您需要将belongs_to 添加到一个模型，并将has_one 添加到另一个模型。你怎么知道哪个是哪个？

区别在于您放置外键的位置（它在表中用于声明belongs_to 关联的类），但您也应该考虑数据的实际含义。has_one 关系表示**某物是你的**——也就是说，某物指向你。例如，说供应商拥有客户比说客户拥有供应商更有意义。这表明正确的关系是这样的：

```
class Supplier < ActiveRecord::Base
  has_one :account
end

class Account < ActiveRecord::Base
  belongs_to :supplier
end 
```

相应的迁移可能如下所示：

```
class CreateSuppliers < ActiveRecord::Migration
  def change
    create_table :suppliers do |t|
      t.string  :name
      t.timestamps
    end

    create_table :accounts do |t|
      t.integer :supplier_id
      t.string  :account_number
      t.timestamps
    end
  end
end 
```

# jquery - 我的 jQuery Carousel 停止工作

> ID：14032672
> 
> 赞同：0
> 
> 时间：2012-12-25T17:28:34.710
> 
> 标签：jquery, carousel

我有自己的 jQuery 轮播，突然它在圣诞节前夕停止工作，我不知道为什么。基本语义结构很简单：

```
<section class = "slideshow">
   <div id = "slides">
      <ul>
          <li id = "slide_1">
             <div class = "slide">
                 <div >
                     content for slide 1
                  </div>                 
             </div>
          </li>
          <li>
             <div class = "slide">
                 <div >
                     content for slide 2
                 </div>                 
             </div>
          </li>
      </ul>
   </div>
</section>
<input type = "button" value = ">>" id = "forward"/>​ 
```

对应的jQuery是：

```
$('#forward').click(slideup);

function slideup()
{

 var item_width = $('#slides li').outerWidth(true);
 var old_left = parseInt($('#slides ul').css('left'));
 var left_indent = old_left - item_width;

 $('#slides ul').animate({'left':left_indent},"slow", function(){      
   $('#slides li:last').after($('#slides li:first'));
       $('#slides ul').css({'left':0});
   } ); 
} 
```

但什么都没有发生。这是一个也捕获 CSS 的 js fiddle：

[http://jsfiddle.net/bbCab/8/](http://jsfiddle.net/bbCab/8/)

​谢谢！

PS：圣诞快乐 Stackoverflowers :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:33:57.683

尝试为左边距设置动画：

```
$('#slides ul').animate({'left':left_indent},"slow", function(){ 
```

到

```
$('#slides ul').animate({'margin-left':left_indent},"slow", function(){ 
```

测试：http: [//jsfiddle.net/bbCab/16/](http://jsfiddle.net/bbCab/16/)

# c - c - 为包含另一个结构的数组的结构正确分配内存

> ID：14032674
> 
> 赞同：6
> 
> 时间：2012-12-25T17:28:51.153
> 
> 标签：c, memory

我想为一个结构分配内存，该结构包含另一个名为`table`. 我检测到在最后将指针分配给函数时，`linkedObjects`数组中的变量会损坏，所以我认为我对动态内存的处理是错误的。

这就是我现在的做法：

```
typedef struct Object {
    void *key;
    struct Object *top;
    struct Object *next;
} Object;

typedef struct Table{
    Object *linkedObjects;
    size_t size, originalSize;
    HashFcn hfun;
    PrintFcn pfun;
    ComparisonFcn fcomp;
} Table;

TableP CreateTable(size_t tableSize, HashFcn hfun, PrintFcn pfun, ComparisonFcn fcomp)
{
    int i;
    struct Table *table = malloc(sizeof(table));
    if (table==NULL)
    {
        ReportError(MEM_OUT);
        return NULL;
    }
    table->linkedObjects = NULL;
    table->linkedObjects  = malloc(tableSize * sizeof(Object));

    for(i=0;i<tableSize;i++)
    {

        table->linkedObjects[i].next = malloc( MAX_IN_LIST*sizeof(Object) );
        table->linkedObjects[i].top = malloc( MAX_IN_LIST*sizeof(Object) );
        table->linkedObjects[i].key = NULL;
        table->linkedObjects[i].top->key = NULL;
        table->linkedObjects[i].next->key = NULL;

        if (table->linkedObjects[i].next == NULL)
        {
            ReportError(MEM_OUT);
            return NULL;
        }
    }

    table->size = tableSize;
    table->originalSize = tableSize;
    table->hfun = hfun;
    table->pfun = pfun;
    table->fcomp = fcomp;
    return table;
} 
```

**编辑：**我编辑了功能代码以反映答案：

```
TableP CreateTable(size_t tableSize, HashFcn hfun, PrintFcn pfun, ComparisonFcn fcomp)
{
    int i;
    struct Table *table = malloc(sizeof(table));
    if (table==NULL)
    {
        ReportError(MEM_OUT);
        return NULL;
    }
    table->linkedObjects = NULL;
    table->linkedObjects  = malloc(tableSize * sizeof(Object));

    if (table->linkedObjects == NULL)
    {
        ReportError(MEM_OUT);
        return NULL;
    }

    for(i=0;i<tableSize;i++)
    {
        table->linkedObjects[i].next = NULL;
        table->linkedObjects[i].top = NULL;
        table->linkedObjects[i].key = NULL;
    }

    table->size = tableSize;
    table->originalSize = tableSize;
    table->hfun = hfun;
    table->pfun = pfun;
    table->fcomp = fcomp;
    //printf("%p\n", table->hfun);
    return table;
} 
```

但是当我到达最后的分配点时，`table->linkedObjects[0].key`那是空的，值是`0x0`get的溢出到一个值`0x8048cc0`。执行此行时会发生这种情况：

```
table->originalSize = tableSize; 
```

**另一个编辑：**确认它在最后一次调用中随机发生（不仅在上面的行中）：

```
table->size = tableSize;
table->originalSize = tableSize;
table->hfun = hfun;
table->pfun = pfun;
table->fcomp = fcomp; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T18:22:21.253

`struct Table *table = malloc(sizeof(table));`

应该

`struct Table *table = malloc(sizeof(Table));`

我有时喜欢C。

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:34:43.267

像往常一样，摆脱在`sizeof`. 这就是您的内存分配应该看起来的样子

```
Table *table = malloc(sizeof *table);
...
table->linkedObjects = malloc(tableSize * sizeof *table->linkedObjects); 
```

这也将解决第一次分配中的“错字”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:38:44.270

```
table->linkedObjects[i].next = malloc( MAX_IN_LIST*sizeof(Object) );
table->linkedObjects[i].top = malloc( MAX_IN_LIST*sizeof(Object) ); 
```

这似乎没有意义。当我看到`next`或`top`使用集合时，我希望有一个指向一个的指针`Object`（指向集合中的下一项或集合中的第一项）。

您是否打算执行以下操作：

```
for(i=0;i < (tableSize-1);i++)
{
    table->linkedObjects[i].top = table->linkedObjects[0];
    table->linkedObjects[i].next = table->linkedObjects[i+1];
    table->linkedObjects[i].key = NULL;
} 
```

这将为每个 分配内存`Object`，然后设置指针。

# intellij-idea - IntelliJ Idea 12：如何自动导入命名空间？

> ID：14032680
> 
> 赞同：36
> 
> 时间：2012-12-25T17:29:28.687
> 
> 标签：intellij-idea

在 Eclipse 中，我可以点击`Ctrl`++`Shift`快捷`O`方式来自动导入命名空间。如何在 IntelliJ IDEA 社区版中执行此操作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-25T17:32:27.503

`Code > Optimize Imports`将为您提供您所追求的行为。如果您想调整设置，您可以通过`Settings > Editor > Auto Import`.

![在此处输入图像描述](../Images/4f963335f3db69440b107eecf25168fc.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-29T19:53:23.683

您可以键入`Alt``Enter`以显示要自动导入的可能类的下拉列表，它类似于 Eclipse。

我在 Mac OS X 上的 Android Studio 中找到了这个 - 如果我将鼠标悬停在它找不到的类名上，你会看到一个显示这个快捷方式的建议弹出窗口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T09:25:46.140

你可以试试这个：“ `Ctrl+Alt+O`”。 [![在此处输入图像描述](../Images/2063c36abfe7886e56265cb57f4bcf0a.png)](https://i.stack.imgur.com/YMReQ.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T17:08:06.090

IntelliJ ShortCut 依赖于 Keymap：

![在此处输入图像描述](../Images/86fe1da1527cf578a8900a8c9bd8a042.png)

您可以为您喜欢的命令自定义快捷方式。

# c++ - 矢量模板问题

> ID：14032682
> 
> 赞同：0
> 
> 时间：2012-12-25T17:30:02.280
> 
> 标签：c++, vector

> **可能重复：**
> [对于嵌套模板，`>>` 何时成为标准 C++（而不是 `> >`）？](https://stackoverflow.com/questions/7087033/for-nested-templates-when-did-become-standard-c-instead-of)
> [为什么模板的模板（例如vector<vector<int>>）在C++0x 之前的右尖括号之间需要一个空格？](https://stackoverflow.com/questions/7087166/why-did-templates-of-templates-e-g-vectorvectorint-require-a-space-betwe)

我只是想创建一个向量：

```
vector<Transform3D<double>> tempVector; 
```

这是我得到的编译错误：

```
/../main.cpp:34:26: error: a space is required between consecutive right angle brackets
  (use '> >')
vector<Transform3D<double>> tempVector;
                         ^~
                         > > 
```

没有意义的是，为什么通过将向量更改为错误描述来解决问题：

```
vector<Transform3D<double > > tempVector; 
```

为什么`vector<Transform3D<double>>`和`vector<Transform3D<double > >`不一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:32:43.913

它们不相同（至少在 C++11 之前），因为最后一个`>>`字符被解析为单个运算符 ( `operator>>`)。在它们之间放置一个空格会导致预期的行为。

`<:`当编译器解析为 tigraph/digraph 的开头时，也会发生同样的情况。例如：

```
N<::T> // <: parsed as [ 
```

分隔运算符的空格使代码可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:32:46.650

因为`>>`是位移运算符，所以较新的编译器可以区分两者。

# windows-phone - 是否可以针对 Windows Phone 应用程序使其仅显示给 7 个客户端？

> ID：14032684
> 
> 赞同：2
> 
> 时间：2012-12-25T17:30:11.070
> 
> 标签：windows-phone

我正在开发一个应用程序并创建了两个项目。一个项目针对 Windows Phone 7.x，不使用 8 中提供的任何新功能。另一个应用程序针对并使用仅在 Windows Phone 8 中可用的功能，包括扩展的平铺图像和不同的控件 (LongListSelector)。

当我尝试发布我的 7 应用程序时，我发现运行 Windows Phone 8 的客户可以使用它，我不希望这样。我也担心如果我上传我的应用程序 8 会阻止我上传我的应用程序 7，因为理想情况下它们都具有相同的名称。

我是否遗漏了某些东西，或者无法明确支持仅 7 个？如果这是不可能的，我有什么选择？

谢谢，

杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:44:45.233

如果您只发布 WP7 包，那么它将可用于 WP7 和 WP8 设备。如果您随后发布了第二个 WP8 包，那么这个包将可用于 WP8 设备，而 WP7 包将仅可用于 WP7 设备。不幸的是，您不能以不适用于 WP8 设备的方式发布 WP7 包。

据我从本地微软人员那里得知，在 WP8 设备上隐藏 WP7 应用程序仅适用于微软、OEM 和 VIP 应用程序生产商（许多 WP7 游戏、微软和诺基亚应用程序在 WP8 设备上不可用），但不适用于普通开发人员。

您应该同时发布您的两个包，或者您可以尝试联系当地的 Microsoft 代表，如果他们有什么可以做的。

# git - Git忽略剩余的合并冲突

> ID：14032695
> 
> 赞同：15
> 
> 时间：2012-12-25T17:32:34.477
> 
> 标签：git, git-merge

在我解决了我关心的所有合并冲突之后，我想合并而不考虑所有剩余的冲突。我希望 git 保留要合并到的分支中的文件（`--ours`策略）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T09:47:44.520

提交二进制文件是个坏主意，但我会向你解释如何制作你需要的东西

你在特别分支中并且你已经完成了合并，你已经修复了一些冲突并且你想让其他人喜欢分支主所以你应该这样做

```
git reset --mixed (reset the index but not the working tree; changes remain localy but not used in the commit)
git add {files those you have fixed the conflict}
git commit
git reset --hard
git merge --strategy=recursive -X theirs origin/master  
{merge twice and you take files as in branch origin/master} 
```

如果更改在本地存储库中，则使用 master，如果更改在远程存储库中，则使用`origin/master`

# c++ - Ogre3d / 延迟渲染 / 点光源

> ID：14032696
> 
> 赞同：4
> 
> 时间：2012-12-25T17:32:35.287
> 
> 标签：c++, ogre, deferred-rendering

我正在尝试使用 ogre 合成器框架设置延迟渲染器。我尝试在下面的代码中实现点光源着色器（作为全屏四边形效果，没有衰减或镜面反射计算）：

将延迟数据输出到 GBuffer 的材质：

```
void ToGBufferVP
                (
                    float4 iPosition : POSITION,
                    float3 iNormal : NORMAL,
                    float2 iUV0 : TEXCOORD,

                    out float4 oPosition : POSITION,
                    out float3 oViewPos : TEXCOORD0,
                    out float3 oNormal : TEXCOORD1,
                    out float2 oUV0 : TEXCOORD2,

                    uniform float4x4 cWorldViewProj,
                    uniform float4x4 cWorldView
                )
{
    oPosition = mul(cWorldViewProj, iPosition);
    oNormal = mul(cWorldView, float4(iNormal,0)).xyz;
    oViewPos = mul(cWorldView, iPosition).xyz;
    oUV0 = iUV0;
}

void ToGBufferFP
                (
                    float3 iViewPos : TEXCOORD0,
                    float3 iNormal : TEXCOORD1,
                    float2 iUV0 : TEXCOORD2,

                    out float4 oColor0 : COLOR0,
                    out float4 oColor1 : COLOR1,

                    uniform sampler2D sTex : register(s0),
                    uniform sampler2D sSpec : register(s1),

                    uniform float cFarDistance
                )
{
    oColor0.rgb = tex2D(sTex, iUV0);
    oColor0.a = tex2D(sSpec, iUV0);
    oColor1.rgb = normalize(iNormal);
    oColor1.a = length(iViewPos) / cFarDistance;
} 
```

顶点程序说明：

```
vertex_program ScreenQuadDebugLight_VS cg
{
    source MyDeferredPostShader.hlsl
    profiles vs_1_1 arbvp1
    entry_point ScreenQuadDebugLight_VS

    default_params
    {
        param_named_auto worldViewProj worldviewproj_matrix
    }
} 
```

片段程序说明：

```
fragment_program ScreenQuadDebugLight_PS cg
{
    source MyDeferredPostShader.hlsl
    profiles ps_2_0 arbfp1
    entry_point ScreenQuadDebugLight_PS

    default_params
    {
        param_named_auto vpWidth viewport_width
        param_named_auto vpHeight viewport_height       

        param_named_auto flip render_target_flipping
        param_named_auto farClipDistance far_clip_distance

        param_named_auto lightPos light_position_view_space 0
    }
} 
```

轻材质脚本：

```
material DeferredShadingPostQuadLight
{
    technique
    {
        pass
        {
            cull_hardware none
            cull_software none

            depth_func always_pass

            vertex_program_ref ScreenQuadDebugLight_VS
            {
            }

            fragment_program_ref ScreenQuadDebugLight_PS
            {
            }

            texture_unit
            {
                tex_coord_set 0
                tex_address_mode clamp
                filtering none
            }

            texture_unit
            {
                tex_coord_set 1
                tex_address_mode clamp
                filtering none
            }
        }
    }
} 
```

灯光着色器：

```
void ScreenQuadDebugLight_VS
    (
        float4 Pos: POSITION,   
        out float4 oPos: POSITION,
        out float4 oTexCoord : TEXCOORD0,   
        uniform float4x4 worldViewProj
    )
{
    float4 projPos = mul(worldViewProj, Pos);
    oTexCoord = projPos;    
    oPos = projPos;
}

float4 ScreenQuadDebugLight_PS
    (
        float4 projPos : TEXCOORD0,
        uniform sampler Tex0: register(s0),
        uniform sampler Tex1: register(s1),

        uniform float vpWidth,
        uniform float vpHeight,

        uniform float flip,
        uniform float farClipDistance,

        uniform float3 lightPos
    ) : COLOR 
{
    // Get homogenous coordinates
    projPos.xy /= projPos.w;

    // Compensate texture coordinate half pixel jitter
    float2 texCoord = 0.5f * (float2(projPos.x, -projPos.y) + 1);
    float2 halfPixel = float2(0.5/vpWidth, 0.5/vpHeight);
    texCoord += halfPixel;

    float3 ray = float3(projPos.x, projPos.y * flip, 1);

    float4 a0 = tex2D(Tex0, texCoord); // Albedo and Specularity
    float4 a1 = tex2D(Tex1, texCoord); // Normal and Depth

    // Attributes
    float3 colour = a0.rgb;
    float specularity = a0.a;
    float distance = a1.w;
    float3 normal = a1.xyz;

    float3 viewPos = normalize(ray);
    viewPos.z = distance;

    float3 objToLightVec =  lightPos - viewPos;
    float len_sq = dot(objToLightVec, objToLightVec);
    float len = sqrt(len_sq);
    float3 objToLightDir = normalize(objToLightVec);

    float3 total_light_contrib;
    total_light_contrib = max(0.0, dot(objToLightDir, normal));

    return float4(total_light_contrib, 0.0);
} 
```

这就是我在 .cpp 文件中声明光的方式：

```
lLightSceneNodeHolder = mSceneMgr->getRootSceneNode()->createChildSceneNode();

Ogre::Light *light;
light = mSceneMgr->createLight();
light->setType(Ogre::Light::LT_POINT);
light->setPosition(Ogre::Vector3(0, 0, -0.7f));
light->setVisible(true);
light->setDiffuseColour(Ogre::ColourValue::White);
light->setSpecularColour(Ogre::ColourValue::White);
lLightSceneNodeHolder->attachObject(light); 
```

我得到了输出，一切正常——除了我不能让照明正常工作。G 缓冲区包含有效数据 - 视图空间法线、线性 z 深度、纹理。我还将视图空间中的光线位置作为参数 - 但是在矢量计算期间存在一些问题 - 输出与点光源完全不同。我在这里做错了什么？

谢谢！

PS我还尝试通过合成器侦听器手动传递lightPos参数，但是灯光看起来更像是定向光......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:07:35.460

问题出在等式中：

`float3 ray = float3(projPos.x, projPos.y * flip, 1);`

它必须乘以`farCorner`值，这是相机平截头体的远角：

`float3 ray = float3(projPos.x, projPos.y * flip, 1) * farCorner;`

你可以通过使用得到它

`mCamera->getWorldSpaceCorners()[1];`

然后将其插入合成器侦听器，如下所示：

```
void LightListener::notifyMaterialSetup(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    vpParams = mat->getBestTechnique()->getPass(0)->getVertexProgramParameters();
    fpParams = mat->getBestTechnique()->getPass(0)->getFragmentProgramParameters();
}

void LightListener::notifyMaterialRender(Ogre::uint32 pass_id, Ogre::MaterialPtr &mat)
{
    vpParams->setNamedConstant("lightPos", lightPos);
    fpParams->setNamedConstant("farCorner", mCamera->getWorldSpaceCorners()[1]);
} 
```

# javascript - 如何在 jQuery 日期选择器的输入中制作自定义日期显示文本？

> ID：14032699
> 
> 赞同：0
> 
> 时间：2012-12-25T17:32:42.933
> 
> 标签：javascript, jquery, datepicker

我遇到以下问题：我有一个绑定到`<input>`字段的 jQuery 日期选择器。我想要的是，而不是在输入字段“MM/dd/yyyy”中显示标准日期，以便能够显示当前所选日期的一周的开始和结束，例如

如果选择了 2012 年 12 月 25 日，那么在输入字段中我想显示“Dec.24 - Dec.30”

计算开始/结束工作日和文本格式不是问题，我已经有了。我遇到的问题是尝试将输入字段的值设置为自定义文本表示时使用

```
$("#datepickerInput").val('custom text') 
```

然后将 datepicker 日期设置为今天的日期，而不是保留其先前设置的值。

有没有办法以某种方式实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:51:58.263

这是一个使用 moment.js 日期库来调整日期和输出格式的解决方案。当使用具有许多方法来比较、减去、添加和操作格式的库时，解析日期要容易得多。

```
 $("#datepicker").datepicker().change(function() {
    var d = $(this).datepicker('getDate');
    $(this).val(formatDatePickerDisplay(d))
})
/* trigger change to update display on page load*/
.change();

function formatDatePickerDisplay(d) {   
    if (!d) {
        return '';
    }
    var currDate = moment(d),
        monday = moment(currDate).day(1).format('MMM D'),
        friday = moment(currDate).day(5).format('MMM D');

    return monday + ' - ' + friday;

} 
```

演示：http: [//jsfiddle.net/7tTnV/3/](http://jsfiddle.net/7tTnV/3/)

Moment.js 文档：[http ://momentjs.com/docs/#/use-it/](http://momentjs.com/docs/#/use-it/)

**编辑**：到目前为止提供的两种解决方案的唯一问题是`datepicker`无法将显示的值解析为当前日期以在您打开它时突出显示。显示 datepiacker 的替代方法允许您更新将显示给用户的替代字段，并且不会显示实际的日期选择器输入。这将允许正确的当前日期突出显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:17:57.053

试试这个：

```
var d = $('#datepickerInput').datepicker('getDate');
$('#datepickerInput').val(getMonday(d) + ' - ' + getSunday(d)); 
```

[**在这里演示**](http://jsfiddle.net/YB5HY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T18:35:51.603

在这里演示：http: [//jsfiddle.net/2h7Sj/](http://jsfiddle.net/2h7Sj/)

我从@Palash借用了一些`getMonday`和逻​​辑（但修复了一个错误）。`getSunday`

此解决方案允许您选择特定日期*并*选择日期范围。

**HTML**

```
<input type="text" id="dateRange" />
<input type="hidden" id="hiddenDate" />​ 
```

**JavaScript**

```
$('#dateRange').datepicker({
    altField: '#hiddenDate',
    firstDay: 1,
    onSelect: function(dateText, dateRange) {
        var dateRange = $(dateRange);

        var months       = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
                            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            hiddenDate = $('#hiddenDate'),
            theDate = new Date(dateText),
            dayOfTheWeek = theDate.getDay(),
            mondayOffset = theDate.getDate() - dayOfTheWeek + (dayOfTheWeek == 0 ? -6 : 1),
            sundayOffset = theDate.getDate() - dayOfTheWeek + (dayOfTheWeek == 0 ? 0 : 7),
            monday       = new Date(theDate.setDate(mondayOffset)),
            sunday       = new Date(theDate.setDate(sundayOffset)),
            mondayText   = months[monday.getMonth()] + '. ' + monday.getDate(),
            sundayText   = months[sunday.getMonth()] + '. ' + sunday.getDate(),
            rangeText    = mondayText + ' - ' + sundayText;

        $(this).val(rangeText);
        $(dateRange).data('rangetext', rangeText);
    },
    beforeShow: function(dateRange) {
        var hiddenDate = $('#hiddenDate');
        $(dateRange).val(hiddenDate.val());
    },
    onClose: function(selectedDateText, dateRange) {
        dateRange = $(dateRange);

        if($(this).val() == '') {
            $('#hiddenDate').val('');
        } else {
            if(selectedDateText.indexOf('-') < 0 && dateRange.data('rangetext')) {
                console.log('data-rangetext', dateRange.data('rangetext'));
                $(this).val(dateRange.data('rangetext'));
            }
        }
    }
});​ 
```

# java - 在 JavaAgent 中停止计划任务

> ID：14032703
> 
> 赞同：1
> 
> 时间：2012-12-25T17:33:13.167
> 
> 标签：java, timer, jmx, profiler, agent

我试图制作简单的 java profiler 并使用 javaagent 来监控内存使用情况。这是我的 javaagent 实现的一部分：

```
import java.lang.instrument.ClassFileTransformer;
import java.lang.instrument.IllegalClassFormatException;
import java.lang.instrument.Instrumentation;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.security.ProtectionDomain;
import java.util.ArrayList;
import java.util.Timer;
import java.lang.management.ManagementFactory;
import java.lang.management.MemoryPoolMXBean;
import java.lang.management.MemoryUsage;
import java.util.Iterator;
import java.util.List;
import java.util.TimerTask;

public class Transformer implements ClassFileTransformer {

    private Notifier notifier;
    private Instrumentation inst;
    private ArrayList<Class> loadedClasses;

    public Transformer(Instrumentation inst) {
        this.inst = inst;
        loadedClasses = new ArrayList<Class>();
        initNotifier();
        Timer time = new Timer();
        MemoryMonitor mm = new MemoryMonitor(notifier);
        time.schedule(mm, 0, 1000);
    }

    public static void premain(String args, Instrumentation inst) {
        inst.addTransformer(new Transformer(inst));
    }

    private void initNotifier() {
        if (notifier != null) return;
        try {
            Registry registry = LocateRegistry.getRegistry(Const.registryPort);
            notifier = (Notifier) registry.lookup(Const.stubName);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }    
}

public class MemoryMonitor extends TimerTask {

    private Notifier notifier;

    public MemoryMonitor(Notifier notifier) {
        this.notifier = notifier;
    }

    @Override
    public void run() {
        try {
            notifier.memoryUsed(monitorMemory());
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private double monitorMemory() {
        List memBeans = ManagementFactory.getMemoryPoolMXBeans();
        double used = 0;
        for (Iterator i = memBeans.iterator(); i.hasNext(); ) {

            MemoryPoolMXBean mpool = (MemoryPoolMXBean) i.next();
            MemoryUsage usage = mpool.getUsage();
            used = usage.getUsed() / 1000;
        }
        return used;
    }
} 
```

此代码运行良好，并将有关内存使用情况的数据发送到分析工具。但是 javaagent 在应用程序执行结束后不会停止。
有谁知道在应用程序执行结束后如何停止 javaagent？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:06:14.803

使用`Timer time = new Timer(true);`这将使`TimerTasks`成为守护进程。当主线程退出时，守护线程结束。更多信息[在这里](https://stackoverflow.com/questions/2213340/what-is-daemon-thread-in-java)

# sql - SQLite 中 2 个表的值

> ID：14032705
> 
> 赞同：1
> 
> 时间：2012-12-25T17:33:33.293
> 
> 标签：sql, sqlite

我需要从一个表中获取值以及与每个值匹配的行数。更清楚，

*   表 A 有列`ID`和`TEXT`
*   还有另一个表 B，其中包含`ID`、和`TEXT``A_ID``FRESH`

表的一些示例数据`A`：

```
+---+-------------+
|ID |    TEXT     |
+---+-------------+
| 1 | "Fruit"     |
| 2 | "Vegetable" |
+---+-------------+ 
```

还有一些表数据`B`：

```
+---+----------+----+-------+
|ID |   TEXT   |A_ID| FRESH |
+---+----------+----+-------+
| 1 | "Banana" | 1  |  Yes  |
| 2 | "Carrot" | 2  |  Yes  |
| 3 | "Apple"  | 1  |  No   |
+---+----------+----+-------+ 
```

可以看出，`A_ID`包含表`A`中一行的键，该键`TEXT`与`B`.

所以我需要的是，我需要得到这样的数据：

```
1 | Fruit | 1
2 | Vegetable | 1 
```

所以在上面的结果中，第一列是`ID`表`A`，第二列是`TEXT`表`A`，最后（第三）列是**表** `B` **中列** `FRESH` **值为“是”**的行数。

我已经能够获得与此类似的值，但总行数作为第三列，而不仅仅是“新”行。

我试过这个：

```
 SELECT A.ID, A.TEXT, count(B.FRESH) FROM A JOIN B ON A.ID = B.A_ID; 
```

和这个：

```
SELECT A.ID, A.TEXT, B.FRESH FROM A JOIN B ON A.ID = B.A_ID; 
```

但他们没有得到预期的结果。

由于我是 SQL 的新手，所以我坚持这一点。所以请帮忙？我正在使用 SQLite3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:47:06.927

```
SELECT 
    A.ID, 
    A.TEXT, 
    (SELECT COUNT(1) 
             FROM B 
             WHERE B.A_ID=A.ID 
                 AND B.FRESH ='YES') AS FRESH
FROM A; 
```

# php - PHP preg_match 获取空格后的一个单词，也就是它所在的一个单词 KG

> ID：14032707
> 
> 赞同：0
> 
> 时间：2012-12-25T17:33:37.107
> 
> 标签：php

我有一个不确定的字符串，我有以下字符串：
`ST,NT,+ 16KG ~YT,NT,+ 16KG`
`ST,NT) 16KG +YT,N,+ 16KG`
`ST,NT,+ 16KG`等等。

我的问题是任何正则表达式只需要**16KG**或**16**，因为字符串是从数字刻度输出的。
我正在开发一个带有串口的应用程序，所以我无法在那里解析数据，而在数字刻度工具的输出中只有`16KG`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:42:28.417

所以你想得到之前的数字`KG`吗？

尝试这个：

```
<?php
    $input = 'ST,NT,+ 16KG ~YT,NT,+ 16KG';
    preg_match('/(\d+)KG/',$input,$matches);
    echo $matches[1];
?> 
```

输出：

```
16 
```

# c# - Find() 与 FirstOrDefault() 的性能

> ID：14032709
> 
> 赞同：130
> 
> 时间：2012-12-25T17:33:45.467
> 
> 标签：c#, .net, performance, linq

> **类似的问题：**
> [Find() vs. Where().FirstOrDefault()](https://stackoverflow.com/questions/9335015/find-vs-where-firstordefault)

在具有单个字符串属性的简单引用类型的大序列中搜索 Diana 得到了一个有趣的结果。

```
using System;
using System.Collections.Generic;
using System.Linq;

public class Customer{
    public string Name {get;set;}
}

Stopwatch watch = new Stopwatch();        
    const string diana = "Diana";

    while (Console.ReadKey().Key != ConsoleKey.Escape)
    {
        //Armour with 1000k++ customers. Wow, should be a product with a great success! :)
        var customers = (from i in Enumerable.Range(0, 1000000)
                         select new Customer
                         {
                            Name = Guid.NewGuid().ToString()
                         }).ToList();

        customers.Insert(999000, new Customer { Name = diana }); // Putting Diana at the end :)

        //1\. System.Linq.Enumerable.DefaultOrFirst()
        watch.Restart();
        customers.FirstOrDefault(c => c.Name == diana);
        watch.Stop();
        Console.WriteLine("Diana was found in {0} ms with System.Linq.Enumerable.FirstOrDefault().", watch.ElapsedMilliseconds);

        //2\. System.Collections.Generic.List<T>.Find()
        watch.Restart();
        customers.Find(c => c.Name == diana);
        watch.Stop();
        Console.WriteLine("Diana was found in {0} ms with System.Collections.Generic.List<T>.Find().", watch.ElapsedMilliseconds);
    } 
```

![在此处输入图像描述](../Images/284b935932faeed4207ad3c5d33262f4.png)

这是因为 List.Find() 中没有 Enumerator 开销，还是因为这可能还有其他原因？

`Find()`运行速度几乎快了两倍，希望*.Net*团队将来不会将其标记为过时。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-12-25T17:56:33.807

`Find`我能够模仿你的结果，所以我反编译了你的程序，和之间有区别`FirstOrDefault`。

首先是反编译的程序。我将您的数据对象设为匿名数据项，仅用于编译

```
 List<\u003C\u003Ef__AnonymousType0<string>> source = Enumerable.ToList(Enumerable.Select(Enumerable.Range(0, 1000000), i =>
    {
      var local_0 = new
      {
        Name = Guid.NewGuid().ToString()
      };
      return local_0;
    }));
    source.Insert(999000, new
    {
      Name = diana
    });
    stopwatch.Restart();
    Enumerable.FirstOrDefault(source, c => c.Name == diana);
    stopwatch.Stop();
    Console.WriteLine("Diana was found in {0} ms with System.Linq.Enumerable.FirstOrDefault().", (object) stopwatch.ElapsedMilliseconds);
    stopwatch.Restart();
    source.Find(c => c.Name == diana);
    stopwatch.Stop();
    Console.WriteLine("Diana was found in {0} ms with System.Collections.Generic.List<T>.Find().", (object) stopwatch.ElapsedMilliseconds); 
```

这里要注意的关键是它`FirstOrDefault`被调用，`Enumerable`而`Find`作为源列表上的方法被调用。

那么，find 是做什么的呢？这是反编译的`Find`方法

```
private T[] _items;

[__DynamicallyInvokable]
public T Find(Predicate<T> match)
{
  if (match == null)
    ThrowHelper.ThrowArgumentNullException(ExceptionArgument.match);
  for (int index = 0; index < this._size; ++index)
  {
    if (match(this._items[index]))
      return this._items[index];
  }
  return default (T);
} 
```

所以它迭代了一个有意义的项目数组，因为列表是数组的包装器。

但是，`FirstOrDefault`在`Enumerable`类上，用于`foreach`迭代项目。这使用一个迭代器到列表并移动到下一个。我认为您所看到的是迭代器的开销

```
[__DynamicallyInvokable]
public static TSource FirstOrDefault<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate)
{
  if (source == null)
    throw Error.ArgumentNull("source");
  if (predicate == null)
    throw Error.ArgumentNull("predicate");
  foreach (TSource source1 in source)
  {
    if (predicate(source1))
      return source1;
  }
  return default (TSource);
} 
```

Foreach 只是使用可枚举模式的[语法糖](https://stackoverflow.com/questions/5816776/in-c-is-foreach-purely-a-syntactic-sugar-or-is-there-anything-deeper-about)。看这张图

![在此处输入图像描述](../Images/e525f444d207d0579f662240f3d98b71.png).

我单击了 foreach 以查看它在做什么，您可以看到 dotpeek 想要带我进入有意义的枚举器/当前/下一个实现。

除此之外它们基本相同（测试传入的谓词以查看项目是否是您想要的）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-25T17:57:01.063

我赌的`FirstOrDefault`是通过`IEnumerable`实现运行的，也就是说，它将使用标准`foreach`循环来进行检查。`List<T>.Find()`不是 Linq 的一部分（[http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)），并且可能使用标准`for`循环 from `0`to `Count`（或另一种可能直接在其内部/包装上运行的快速内部机制大批）。通过摆脱枚举的开销（并进行版本检查以确保列表未被修改），该`Find`方法更快。

如果添加第三个测试：

```
//3\. System.Collections.Generic.List<T> foreach
Func<Customer, bool> dianaCheck = c => c.Name == diana;
watch.Restart();
foreach(var c in customers)
{
    if (dianaCheck(c))
        break;
}
watch.Stop();
Console.WriteLine("Diana was found in {0} ms with System.Collections.Generic.List<T> foreach.", watch.ElapsedMilliseconds); 
```

它的运行速度与第一个差不多（25ms vs 27ms `FirstOrDefault`）

编辑：如果我添加一个数组循环，它会非常接近`Find()`速度，并且鉴于@devshorts 查看源代码，我认为就是这样：

```
//4\. System.Collections.Generic.List<T> for loop
var customersArray = customers.ToArray();
watch.Restart();
int customersCount = customersArray.Length;
for (int i = 0; i < customersCount; i++)
{
    if (dianaCheck(customers[i]))
        break;
}
watch.Stop();
Console.WriteLine("Diana was found in {0} ms with an array for loop.", watch.ElapsedMilliseconds); 
```

这仅比该`Find()`方法慢 5.5%。

所以底线：遍历数组元素比处理`foreach`迭代开销要快。（但两者都有其优点/缺点，因此只需从逻辑上选择对您的代码有意义的内容。此外，速度上的微小差异很少会*导致*问题，因此只需使用对可维护性/可读性有意义的内容）

# sqlite - 数据共享 - SQLite 与共享内存 IPC

> ID：14032711
> 
> 赞同：5
> 
> 时间：2012-12-25T17:34:02.083
> 
> 标签：sqlite, shared-memory, embedded-linux

我想就数据共享的设计实现征求您的意见。

我正在研究 Linux 嵌入式设备（mips 200 Mhz），我希望在多个进程之间进行某种数据共享，这些进程可以一次读取或写入多个参数。

该数据包含约 200 个字符串参数，每秒更新一次。进程可能会在 1 秒内访问大约 10 次数据。

我非常想尝试使设计高效（CPU / Mem）。

此数据不需要持久保存，每次重新启动时都会重新创建。

目前，我正在考虑两种选择：

1.  使用分片内存 IPC (SHM) + 信号量（锁定所有 SHM）。
2.  使用基于 SQLite 内存的数据库。

对于任一选项，我将提供一个 C 接口库，它将执行 DB 操作的所有逻辑。

对于 SHM，这意味着锁定/解锁信号量并访问可以称为索引数组的参数。

对于 SQLite，我的库将是 SQLite 接口库的包装器，因此该过程不必知道 SQL 语法，（应对查询和回复进行一些解析）。

我相信共享内存更有效：

无需使用和解析 SQL，以数组形式访问。

话虽如此，使用 SQLite 也有一些优点： 已经工作和调试（数据库级别）。增加灵活性。在许多嵌入式系统中广泛使用。

切入正题，

性能方面，我没有使用 SQLite 的经验，如果您能分享您的意见和经验，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:41:39.747

SQLite 的内存数据库不能在进程之间共享，但您可以将 DB 文件放入`tmpfs`.

但是，SQLite 不会在进程之间进行任何同步。它*确实*锁定了数据库文件以防止更新冲突，但如果一个进程发现文件已经锁定，它只是等待随机时间。

为了进程之间的*有效*通信，您需要使用 SHM/信号量或管道之类的机制。

# c# - XML 反序列化列表<>

> ID：14032712
> 
> 赞同：0
> 
> 时间：2012-12-25T17:34:10.583
> 
> 标签：c#, .net, xml-serialization, xml-deserialization

我已经设法使用 XML 序列化序列化 Word 类型的对象列表：

```
public static void WriteXML(string fileName)
{     
    System.Xml.Serialization.XmlSerializer writer =
        new System.Xml.Serialization.XmlSerializer(typeof(Word));
    System.IO.StreamWriter file = new System.IO.StreamWriter(
        fileName);
    foreach (var word in Words)
    {
        writer.Serialize(file, word);
    }
    file.Close();
} 
```

我在反序列化此列表时遇到问题。我使用这个代码片段：http: [//msdn.microsoft.com/en-us/library/vstudio/ms172872.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms172872.aspx)

我将我的代码更改为：

```
public static void ReadXML(string fileName)
{
    System.Xml.Serialization.XmlSerializer reader =
        new System.Xml.Serialization.XmlSerializer(typeof(Word));
    System.IO.StreamReader file = new System.IO.StreamReader(
        fileName);
    foreach (????)
    {
        Word word=new Word();
        word = (Word) reader.Deserialize(file);
        Words.Add(word); //Words is a List<Word>
    }
} 
```

当然，这里没有正确使用 foreach() 循环。我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:49:47.637

首先，您不应该将每个单词一个一个地序列化。这将导致单个文件包含许多 xml，这当然是无效的。

您要序列化`Words`（即`List<Word>`）。因此，您的序列化程序创建应该是`new XmlSerializer(typeof(List<Word>))` 并且序列化为`writer.Serialize(file, Words);`

所以你的代码可以是这样的：

```
List<Word> Words = ........

WriteXML("a.xml", Words);
var newWords = ReadXML<List<Word>>("a.xml"); 
```

* * *

```
public static void WriteXML(string fileName,object obj)
{
    using (var f = File.Create(fileName))
    {
        XmlSerializer ser = new XmlSerializer(obj.GetType());
        ser.Serialize(f, obj);
    }
}

public static T ReadXML<T>(string fileName)
{
    using (var f = File.Open(fileName,FileMode.Open,FileAccess.Read))
    {
        XmlSerializer ser = new XmlSerializer(typeof(T));
        return (T)ser.Deserialize(f);
    }
} 
```

* * *

PS：`Serializable`属性是必需的`BinaryFormatter`。XmlSerializer 不需要它。

[您可以在此处](http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes)找到 XmlSerializer 使用的属性的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:40:29.210

如何将单个`Word`对象序列化到同一个文件？这是一种在每次迭代时覆盖文件。只需以这种方式序列化`Database`对象而不是单独的`Word`对象：

```
System.Xml.Serialization.XmlSerializer writer =
    new System.Xml.Serialization.XmlSerializer(typeof(Database));
System.IO.StreamWriter file = new System.IO.StreamWriter(fileName);
writer.Serialize(file, yourDatabaseObject); 
```

注意：另外，请确保`Database`标有`Serializable`属性。

# android - 向 TableRow 中的 TextView 添加侦听器

> ID：14032713
> 
> 赞同：1
> 
> 时间：2012-12-25T17:34:19.443
> 
> 标签：android, ontouchlistener, tablerow

我以编程方式在流中添加 TableRow 元素。

```
TextView eq = new TextView(fa);
eq.setId(40);
eq.setText(Student.getEq());
eq.setTextColor(Color.WHITE);
eq.setTextSize(12);
eq.setPadding(5, 5, 5, 5);
tr_head.addView(eq); 
```

我想知道我们是否可以`eq` `TextView`在我的情况下为 s 添加一个侦听器。那可能吗？谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:43:13.720

尝试`OnClickListener`为 TextView 设置：

```
TextView eq = new TextView(fa);
eq.setId(40);
eq.setText(Student.getEq());
eq.setTextColor(Color.WHITE);
eq.setTextSize(12);
eq.setPadding(5, 5, 5, 5);
eq.setClickable(true);  //<< make textview Clickable

eq.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
         //do you work here
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T17:43:04.310

```
eq.setClickable(true);
eq.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // do whatever stuff you wanna do here
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T18:41:00.300

```
TableRow tr=new TableRow(this);
TextView tv = new TextView("title");
tv.setPadding(5, 5, 5, 5);
//add textview into tablerow
tv.setOnClickListener(new View.OnClickListener(){
    @Override
    public void onClick(View view) {
         //do
    }
}); 
```

# android - Android：未调用自定义适配器的getView方法

> ID：14032718
> 
> 赞同：0
> 
> 时间：2012-12-25T17:35:27.917
> 
> 标签：android, listview, adapter

我已经搜索了很多其他相同问题的答案，但没有找到任何适合我的解决方案。正如标题所说，问题是我的自定义适配器中的 getView 方法没有被调用。

这是代码（首先是片段）：

```
public class CategoryListFragment extends ListFragment
                            implements NewCategoryDialogListener {

private GestoreAttivitaDbHelper mDbHelper;
private CategoryListAdapter mAdapter;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setHasOptionsMenu(true);        

    mAdapter = new CategoryListAdapter(getActivity());
    setListAdapter(mAdapter);

    CategoryLoader categoryLoader = new CategoryLoader();

    if (mDbHelper == null) {
        mDbHelper = new GestoreAttivitaDbHelper(getActivity().getApplicationContext());
    }

    SQLiteDatabase db = mDbHelper.getReadableDatabase();

    mAdapter.addAll(categoryLoader.getAllCategories(db));
    mAdapter.notifyDataSetChanged();
    mAdapter.getCount();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.category_list, container);
} 
```

这是适配器：

```
public class CategoryListAdapter extends ArrayAdapter<CategoryElement> {

private LayoutInflater mInflater;

public CategoryListAdapter(Context ctx) {
    super(ctx, R.layout.category_element);

    mInflater = (LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View view;

    Log.d("Adapter", "Restituisco la view per l'elemento");

    if (convertView == null) {
        view = mInflater.inflate(R.layout.category_element, null);
    } else {
        view = convertView;
    }

    //((TextView) view.findViewById(R.id.category_element_text)).setText(getItem(position).getName());
    TextView textView = (TextView) view.findViewById(R.id.category_element_text);
    textView.setText(getItem(position).getName());

    return view;
} 
```

}

这是我的两个布局文件：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/category_list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >  

</ListView> 
```

和：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/category_element"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/category_element_text" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content" />    

</LinearLayout> 
```

我认为在 onCreate 中设置适配器可能是一个问题，因为它是在 onCreateView 之前调用的，并且当时该片段尚未与 ListView 关联。所以我将代码从 onCreate 移动到 onStart 方法，但没有任何改变。

此外，getCount() 正确返回我 6，即数据库中红色元素的精确数量。

任何帮助将非常感激！！谢谢。

***编辑：***
解决了！
问题出在活动中，我有以下代码：

```
fragmentTransaction.add(0, categoryListFragment); 
```

我改变了

```
fragmentTransaction.add(R.id.activity_main, categoryListFragment); 
```

如果不指定片段应该附加到的 View id，它永远不会绘制它！
另外，我不得不改变这个

```
view = mInflater.inflate(R.layout.category_element, parent); 
```

对此：

```
view = mInflater.inflate(R.layout.category_element, null); 
```

在 getView 方法中。
PS。我正在编辑这个因为直到 8 小时过去了我才能回答我自己的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:29:48.953

我认为在您的`R.layout.category_list`文件中，您需要为 ListView 提供以下属性：

`android:id="@android:id/list"`

ListFragment（和 ListActivity）查找此 id 以`ListView`在您调用诸如`setListAdapter()`.

此外，如果您只需要一个 ListView，则不必提供布局文件。只需不要覆盖 onCreateView() ，系统会`ListView`自动为您提供一个。只有当你想要一个自定义布局时，你才需要膨胀一个，如果你这样做了，ListView 应该有上面提到的 id。

# java - OCR - Java - 从图像中查找单词边缘

> ID：14032719
> 
> 赞同：0
> 
> 时间：2012-12-25T17:35:43.487
> 
> 标签：java, api, ocr

我正在开发一个 OCR 项目，该项目读取图像并在图像中找到单词并将它们切成小块，每块都有一个单词。

问题：我想要一个 OCR API（Java，推荐开源），它可以为我找出单词边缘。有什么可用的吗？

我已经通过了 Tesseract (Tess4j)、JavaOCR .. 但我在这些中找不到任何关于找到确切单词位置的信息。

请分享您的想法和知识...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:45:30.093

找到边缘到底是什么意思？例如，您想找到一个单词适合的矩形坐标并输出这些坐标？

据我记得的`javaOCR`代码，您可以看到在图像文件上绘制矩形的部分，并找出矩形坐标的来源！

# xml - 如何比较节点名称 libxml2？

> ID：14032725
> 
> 赞同：0
> 
> 时间：2012-12-25T17:37:17.577
> 
> 标签：xml, libxml2

我使用 g++ 和 libxml2

```
static void print_element_names(xmlNode * a_node,xmlDoc * doc) {               
  xmlNode *cur_node = NULL;
  const char *c= "city";
  xmlChar *name;

  for (cur_node = a_node; cur_node; cur_node = cur_node->next) {
    if (cur_node->type == XML_ELEMENT_NODE) {
      std::cout<<convert(cur_node)<<std::endl;
    }

    if (convert(cur_node)==c){
      //work but not equal with city
      std::cout<<"Found node"<<std::endl;
    }
    print_element_names(cur_node->children,doc);
  }
}

char * convert(xmlNode * a_node) {
  char* a = (char *)a_node->name;
  return a;
} 
```

## 结果是

地址簿

人

姓名

地址

街道

城市

状态

压缩

电话

* * *

它不等于“城市”可能是因为 xmlChar 和 char。如何比较 nodename 和 char ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T01:22:08.757

您`convert(cur_node)==c`正在比较指针而不是比较字符串内容，这不是在 C++ 中比较字符串的方法。

尝试使用 strncmp 比较两者。

[http://www.cplusplus.com/reference/cstring/strncmp/](http://www.cplusplus.com/reference/cstring/strncmp/)

# amazon-s3 - AWS 月度计算器查询：cloudfront 和 s3 的数据是否计算了两次？

> ID：14032727
> 
> 赞同：1
> 
> 时间：2012-12-25T17:37:41.587
> 
> 标签：amazon-s3, amazon-cloudfront

我正在尝试使用云端流式传输视频并尝试计算我的粗略每月费用。

我对 AWS 月度计算器有疑问[http://calculator.s3.amazonaws.com/calc5.html](http://calculator.s3.amazonaws.com/calc5.html)

当我在“Amazon CloudFront”选项卡下计算 500GB/天的成本时，是否需要再次将其包含在“Amazon S3”选项卡下的“数据传出”中。如果我这样做，我的每月费用会翻一番，从 ~1700 美元增加到 3700 美元

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:22:50.223

Amazon CloudFront 费用基于三个方面的服务实际使用情况：数据传输、HTTP/HTTPS 请求和无效请求。

有关更多详细信息，请访问：[http ://aws.amazon.com/cloudfront/faqs/#What_is_the_price_of_Amazon_CloudFront](http://aws.amazon.com/cloudfront/faqs/#What_is_the_price_of_Amazon_CloudFront)

[披露：[桶资源管理器]](http://www.bucketexplorer.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T19:45:44.083

s3 成本保持不变。Cloudfront 成本是额外的。Cloudfront 确实会缓存内容，因此根据请求的频率和位置，您可能不会为每个请求支付 s3。

这可能属于[ServerFault](https://serverfault.com/)

# delphi - Memo1.Loadfromfile() 空间

> ID：14032731
> 
> 赞同：1
> 
> 时间：2012-12-25T17:38:40.640
> 
> 标签：delphi, text

如何保留文件 .txt 中存在的相同空格？在 .txt 文件中它说：

```
text     :text
text1    :text1
text23   :text2
text345  :text3 
```

如果我写这段代码：

```
Memo1.Lines.LoadFromFile('Text.txt'); 
```

这出现在 Memo1 中：

```
text     :text
text1     :text1
text23     :text2
text345     :text3 
```

文本与文件不同。文本文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T17:56:47.573

该文件将忠实地加载。所有空白都完全保留在文件中。

对于您观察到的情况，最合理的解释是您的文本编辑器显示文件的方式与 TMemo 控件显示文件的方式不同。您的文件可能包含制表符。这些通常在不同的查看器中以不同的方式显示。或者，文本编辑器可能使用等宽字体，而您的备忘录控件没有。

但我再次强调，文件将被忠实地加载。文件的内容被加载到备忘录控件中而无需更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T17:47:05.147

您可以使用像 Courier 这样的比例字体。或者使用 TAB 更好地格式化您的文本。

# algorithm - 不同复杂度的算法

> ID：14032734
> 
> 赞同：1
> 
> 时间：2012-12-25T17:39:10.897
> 
> 标签：algorithm, optimization, complexity-theory

算法的复杂度可以在 O(n^2) 和 O(n logn) 中吗？我确信这一点。但是在 Ω(n^2) 和 O(n logn) 中，以及在 Θ(n^2) 和 Ω(n logn) 中呢？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T17:43:29.820

1.  Big-O 表示法仅指上限。因此，如果它在`O(n log n)`，它必然在`O(n^2)`（因为`n^2`增长快于`n log n`）。

2.  不，它不能同时存在于`Ω(n^2)`和 中`O(n log n)`。那将意味着“上界`n log n`和下界`n^2`，这是不可能的。

3.  `Θ(n^2)`表示它的上下都以 为界`n^2`，这必然意味着它以 为界`Ω(n log n)`。

# perl - 无法执行 没有这样的文件或目录

> ID：14032741
> 
> 赞同：0
> 
> 时间：2012-12-25T17:39:53.523
> 
> 标签：perl, system-calls

祝大家圣诞快乐。我在使用 perl 脚本时遇到了难题。在我的脚本中，我用系统调用调用了另一个程序，但出现了这个错误：

无法执行“./Classificador/svm_classify”：在 Analise_de_Sentimentos_mudanca.pl 第 463 行没有这样的文件或目录。

我不知道将我的程序放在与被调用程序不同的目录中是否有问题。

另一个奇怪的事情是这个脚本曾经在 Ubuntu 10.10 中正常运行。但现在我换成了 Mint 14。它缺少一些库吗？

最良好的祝愿，

蒂亚戈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:46:06.770

相对路径名`./Classificador/svm_classify`被解释为相对于用户的当前目录，而不是包含 perl 脚本的目录。您需要执行以下操作之一：

*   `cd`在运行 perl 脚本之前，用户必须进入包含 perl 脚本的目录。
*   perl 脚本应该调用`chdir()`以将当前目录设置为存储它的目录。
*   将绝对路径名放在脚本中，而不是`./`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:48:19.100

这个“./Classificador/svm_classify”是否存在？检查以下内容：

1）去这个文件所在的目录 - Analise_de_Sentimentos_mudanca.pl

2）运行：

```
ll Classificador/svm_classify 
```

3) 向我们展示结果

# c++ - '{' 标记 C++ 之前的预期类名

> ID：14032742
> 
> 赞同：0
> 
> 时间：2012-12-25T17:40:24.187
> 
> 标签：c++

我的 C++ 代码有问题。我知道有很多关于错误“'{'令牌之前的预期类名”的建议，但我仍然找不到它的位置。这是我的消息来源：

```
Postava.h

#include <exception>
#include <string>
using namespace std;

#ifndef __Postava_h__
#define __Postava_h__

#include "Barva.h"
#include "Pozice.h"
//#include "Budova.h"
//#include "HerniEngine.h"
#include "GrafickyObjekt.h"

class Budova;
class HerniEngine;
//class GrafickyObjekt;
class Postava;
struct Barva;
struct Pozice;

class Postava:public GrafickyObjekt{            //<----- Here is the error
private:
    std::string m_jmeno;
    int m_nosnost;
public:
    Postava(std::string jmeno, int nosnost);
    Budova* m_Budova;
    HerniEngine* m_HerniEngine;
    std::string vratJmeno();
    int vratNosnost();
    void vykresli();
};

#endif 
```

GrafickyObjekt.h

```
#ifndef __GrafickyObjekt_h__
#define __GrafickyObjekt_h__

#include "HerniEngine.h"
#include "Pozice.h"
#include "Posun.h"

class HerniEngine;
class GrafickyObjekt;
class Scena;
struct Pozice;
struct Posun;
class HerniEngine;

class GrafickyObjekt {
protected:
    Pozice  m_pozice;
public:
    HerniEngine* m_HerniEngine;
    // kazdy potomek, tj. graf. obj. ma pozici
    GrafickyObjekt(Pozice pozice);
    // vsichni potomci ji musi implementovat
    virtual void vykresli() = 0;
    // tyto metody nejsou (ciste) virtualni, budou normalne zdedeny
    // tim mam zaruceno, ze vsichni potomci je maji
    void pohni(Posun posun);
    void pohni(Pozice pozice);
};

#endif 
```

对不起我的英语以及类名和变量名，它是捷克语。

非常感谢每一个建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T17:45:30.107

与之前提出的所有类似问题的答案相同：

**您创建了一个循环包含序列**

从您到目前为止发布的内容中并不明显（因为您尚未发布所有标题）。但可以肯定的是，您的其他头文件一起必须产生一个循环包含“路径”。更准确地说，您`GrafickyObjekt.h`以某种方式间接包含`Postava.h`（通过您尚未发布的其他头文件）。

您在头文件中使用的包含保护将以某种不可预测或（更好的词）*不可预见*的方式“打破”该循环。在您的情况下， include 守卫`Postava.h`首先被物理包含，这就是为什么`GrafickyObjekt`即使它*似乎*明确地包含`GrafickyObjekt.h`. 因此错误。

循环包括毫无意义，一事无成。您必须按级别对标题进行分层 - 从低级别到高级 - 并确保较高级别的标题包含较低级别的标题，但绝不会反过来。

一旦实现了这种顺序，就可以通过引入前向类声明来解决循环数据依赖关系。我看到您已经尝试过这样做并最终导致完全灾难性的混乱，您基本上在所有标题中前向声明所有类。通过首先修复包含分层，摆脱混乱并重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:41:51.097

您以前的某些包含似乎有问题。

```
#include "HerniEngine.h"
#include "Pozice.h"
#include "Posun.h" 
```

# windows - 在 Perl for win32 中获取 CPU ID 序列号

> ID：14032746
> 
> 赞同：2
> 
> 时间：2012-12-25T17:40:50.907
> 
> 标签：windows, perl, cpu, serial-number

如何在不使用任何模块（可能使用系统调用或其他方式）的情况下获取 Windows 机器的 perl 中的 CPU/处理器序列号或唯一 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:50:10.130

[http://metacpan.org/pod/Win32::SystemInfo](http://metacpan.org/pod/Win32%3a%3aSystemInfo)。没有模块，您可以学习该模块的源代码并使用它。您将看到模块从 kernel32.dll 导入函数 GetSystemInfo 并使用它，您可以以相同的方式进行操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:37:29.270

您无法获得 CPU 序列号。有一段时间，英特尔发布了一系列奔腾 III 处理器，每个芯片都有一个唯一的序列号。由于隐私问题，这对他们来说变成了公关混乱，他们在随后的处理器版本中停止了该组指令。

但是，如果您正在为 Windows 安装寻找一个“唯一 id”，而该安装大多通过唯一来保证，您可以尝试以下任何一种方法：

1.  生成唯一的 GUID（uuidgen、CoCreateGuid），将其保存到注册表/磁盘，然后稍后再读回。

2.  获取机器 SID。[http://www.perlmonks.org/?node_id=645077](http://www.perlmonks.org/?node_id=645077)

# iphone - 如何处理同步函数调用中的异步回调？

> ID：14032750
> 
> 赞同：2
> 
> 时间：2012-12-25T17:41:51.223
> 
> 标签：iphone, objective-c, ios, callback, objective-c-blocks

我有一个在回调中异步返回对象（例如 UserProfile）的方法。

基于这个 UserProfile 对象，一些代码计算 a`UITableViewCell`是否可编辑：

我创建了以下代码，但不幸的是它不起作用。

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{        
    Entry *entry = [[self.feed entries] objectAtIndex:[indexPath row]];
    typedef BOOL (^BOOLBlock)(id);

    BOOLBlock bar = ^BOOL (id p) {
        if (p) {
            UserProfile *user = (UserProfile *) p;
            NSEnumerator *e = [[entry authors] objectEnumerator];
            id object;
            while (object = [e nextObject]) {
                if ([[object name] isEqualToString:[[[user authors] objectAtIndex:0] name]])
                    return TRUE;
            }
            return FALSE;
        } 
        else {
            return FALSE;
        }
    };

    [[APPContentManager classInstance] userProfile:bar];    
} 
```

在最后一行，它说不**兼容的块指针类型正在发送**

```
'__strong BOOLBlock' (aka 'BOOL (^__strong)(__strong id)') to parameter of type 'void (^)(UserProfile *__strong)' 
```

* * *

## APPContentManager.h

```
-(void)userProfile:(void (^)(UserProfile *user))callback; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:53:48.487

该`-userProfile:`方法不期望您的 BOOLBlock 类型——它不负责返回任何内容。您想在这里使用信号量，但您应该记住 Till 关于预期同步性的评论`-tableView:canEditRowAtIndexPath:`——如果您的 userProfile: 方法需要一段时间，您绝对应该预先缓存此可编辑性信息。

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {        
    Entry *entry = [[self.feed entries] objectAtIndex:[indexPath row]];
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    __block BOOL foundAuthor = NO;

    [[APPContentManager classInstance] userProfile:^(UserProfile *user) {
        NSEnumerator *e = [[entry authors] objectEnumerator];
        id object;
        while (object = [e nextObject]) {
            if ([[object name] isEqualToString:[[[user authors] objectAtIndex:0] name]]) {
                foundAuthor = YES;
                break;
            }
        }
        dispatch_semaphore_signal(sema);
    }];
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    dispatch_release(sema);

    return foundAuthor;
} 
```

# javascript - 如何将 javascript 添加到 drupal 7 中的单个节点？

> ID：14032756
> 
> 赞同：5
> 
> 时间：2012-12-25T17:42:51.660
> 
> 标签：javascript, drupal

如何将特定的 javascript 添加到 drupal 7 中的特定节点？现在我通过“javascript librairies”模块添加我的 .js javascript。但这会将 .js 添加到所有节点。我想为节点 1 启用 myjavascript1.js 并为节点 2 启用 myjavascript2.je？

有没有办法做到这一点？我必须制作自己的模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:11:05.173

创建`node--525.tpl.php`一个单独的模板文件，将 525 替换为您的节点 ID，然后在 head 部分添加 javascript。

在模板文件中添加此代码

```
<?php
function YOURTHEME-NAME_preprocess_page(&$vars, $hook) {
    if ((arg(0) == 'node') && (arg(1) == 'add' && arg(2) == 'CONTENT-TYPE')) {
        $vars['template_files'][] =  'page-node-add-CONTENT-TYPE';
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:22:38.340

您可以为特定的节点 ID 创建 node--[nid].tpl.php 文件，然后您可以使用特定的 js 文件来获取特定的节点 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T21:17:31.847

您可以使用[https://drupal.org/project/scriptfield](https://drupal.org/project/scriptfield)（这里发生了无耻的自我宣传）。这将让您在每个节点的基础上准确地完成您需要的操作。

如果您需要对多个节点执行此操作，这是最有用的，因为它可以让您在不为每个节点 ID 创建一个模板的情况下执行此操作。

# java - 多个 JTextfield 的空字符串验证

> ID：14032757
> 
> 赞同：6
> 
> 时间：2012-12-25T17:42:56.077
> 
> 标签：java, mysql, database, swing, awt

有没有办法在没有 if else 结构的情况下验证 java 中的许多 JTextfields。我有一组 13 个字段，当没有为 13 个字段中的任何一个提供条目并且能够将焦点设置到该特定文本框时，我想要一条错误消息。这是为了防止用户将空数据输入数据库。有人可以告诉我如何在没有下面的 if else 结构的情况下实现这一点。

```
if (firstName.equals("")) {
    JOptionPane.showMessageDialog(null, "No data entered");
} else if (lastName.equals("")) {
    JOptionPane.showMessageDialog(null, "No data entered");
} else if (emailAddress.equals("")) {
    JOptionPane.showMessageDialog(null, "No data entered");
} else if (phone.equals("")) {
   JOptionPane.showMessageDialog(null, "No data entered");
} else {
 //code to enter values into MySql database 
```

上面的代码属于提交注册按钮的actionperformed方法a。尽管将 MySQL 中的字段设置为 NOT NULL，但仍从 java GUI 接受空字符串。为什么是这样？我希望可能会引发一个空字符串异常，我可以从中自定义验证消息，但由于接受了空字段，因此无法这样做。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:14:24.913

只是为了好玩一点手指抽动演示了一个可重复使用的验证设置，它确实使用了核心 Swing 中可用的功能。

合作者：

*   InputVerifier 包含验证逻辑。在这里，它只是在验证字段中检查空文本。注意
    *   验证不能有副作用
    *   shouldYieldFocus 被覆盖以不限制焦点遍历
    *   所有文本字段都是相同的实例
*   一个提交动作，它通过显式调用 inputVerifier（如果有）来检查其父级的所有子级的有效性，如果有任何无效则不执行任何操作
*   一种非常简单但普遍可用的错误消息的机制，采用输入字段的标签

一些代码片段

```
// a reusable, shareable input verifier
InputVerifier iv = new InputVerifier() {

    @Override
    public boolean verify(JComponent input) {
        if (!(input instanceof JTextField)) return true;
        return isValidText((JTextField) input);
    }

    protected boolean isValidText(JTextField field) {
        return field.getText() != null && 
                !field.getText().trim().isEmpty();
    }

    /**
     * Implemented to unconditionally return true: focus traversal
     * should never be restricted.
     */
    @Override
    public boolean shouldYieldFocus(JComponent input) {
        return true;
    }

};
// using MigLayout for lazyness ;-)
final JComponent form = new JPanel(new MigLayout("wrap 2", "[align right][]"));
for (int i = 0; i < 5; i++) {
    // instantiate the input fields with inputVerifier
    JTextField field = new JTextField(20);
    field.setInputVerifier(iv);
    // set label per field
    JLabel label = new JLabel("input " + i);
    label.setLabelFor(field);
    form.add(label);
    form.add(field);
}

Action validateForm = new AbstractAction("Commit") {

    @Override
    public void actionPerformed(ActionEvent e) {
        Component source = (Component) e.getSource();
        if (!validateInputs(source.getParent())) {
            // some input invalid, do nothing
            return;
        }
        System.out.println("all valid - do stuff");
    }

    protected boolean validateInputs(Container form) {
        for (int i = 0; i < form.getComponentCount(); i++) {
            JComponent child = (JComponent) form.getComponent(i);
            if (!isValid(child)) {
                String text = getLabelText(child);
                JOptionPane.showMessageDialog(form, "error at" + text);
                child.requestFocusInWindow();
                return false;
            }
        }
        return true;
    }
    /**
     * Returns the text of the label which is associated with
     * child. 
     */
    protected String getLabelText(JComponent child) {
        JLabel labelFor = (JLabel) child.getClientProperty("labeledBy");
        return labelFor != null ? labelFor.getText() : "";
    }

    private boolean isValid(JComponent child) {
        if (child.getInputVerifier() != null) {
            return child.getInputVerifier().verify(child);
        }
        return true;
    }
};
// just for fun: MigLayout handles sequence of buttons 
// automagically as per OS guidelines
form.add(new JButton("Cancel"), "tag cancel, span, split 2");
form.add(new JButton(validateForm), "tag ok"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T17:50:36.530

有多种方法可以做到这一点，一种是

```
 JTextField[] txtFieldA = new JTextField[13] ;
 txtFieldFirstName.setName("First Name") ; //add name for all text fields
 txtFieldA[0] = txtFieldFirstName ;
 txtFieldA[1] = txtFieldLastName ;
 ....

 // in action event
 for(JTextField txtField : txtFieldA) {
   if(txtField.getText().equals("") ) {
      JOptionPane.showMessageDialog(null, txtField.getName() +" is empty!");
      //break it to avoid multiple popups
      break;
   }
 } 
```

另请查看[JGoodies Validation](http://www.jgoodies.com/freeware/libraries/validation/)，该框架可帮助您验证 Swing 应用程序中的用户输入，并帮助您报告验证错误和警告。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T17:49:07.620

取这三个JTextField的数组，我给出一个概述

```
JTextField[] fields = new JTextField[13] 
field[0] = firstname;
field[1] = lastname; //then add remaining textfields

for(int i = 0; i < fields.size(); ++i) {
if(fields[i].getText().isEmpty())
   JOptionPane.showMessageDialog(null, "No data entered");
} 
```

如果我错了，请纠正我，我不熟悉 Swing 或 awt.HTH :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T17:48:24.627

这是一种方法：

```
public static boolean areAllNotEmpty(String... texts)
{
    for(String s : texts) if(s == null || "".equals(s)) return false;
    return true;
}

// ...

if(areAllNotEmpty(firstName, lastName, emailAddress, phone))
{
    JOptionPane.showMessageDialog(null, "No data entered");
} 
```

# php - 如何使用 twilio-php 库检索两个日期之间的所有调用？

> ID：14032761
> 
> 赞同：1
> 
> 时间：2012-12-25T17:43:09.260
> 
> 标签：php, sms, twilio

使用以下代码，我可以获得通话和短信的日志。如何修改此代码以仅使用 PHP 在某些日期之间进行搜索？

```
// Instantiate a new Twilio Rest Client 
$client = new Services_Twilio($AccountSid, $AuthToken, $ApiVersion); 

// http://www.twilio.com/docs/quickstart... 
try { 
  // Get Recent Calls 
  foreach ($client->account->calls as $call) { 
    echo "Call from $call->sid : $call->from to $call->to at $call->start_time of length $call->duration $call->price <br>"; 
  } 
} 
catch (Exception $e) { 
  echo 'Error: ' . $e->getMessage(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:45:34.340

您将需要添加如下所示的代码片段：

```
$client = new Services_Twilio('AC123', '123');
foreach ($client->account->calls->getIterator(0, 50, array(
    'StartTime>' => '2012-04-01',
    'StartTime<' => '2012-05-01'
)) as $call) {
    echo "From: {$call->from}\nTo: {$call->to}\nSid: {$call->sid}\n\n";
} 
```

如果要过滤列表，则必须使用`getIterator`命令自己构造迭代器。这里有更多文档：[Filtering Twilio Calls with PHP](https://twilio-php.readthedocs.org/en/latest/usage/rest/calls.html#filtering-calls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:53:43.307

用户搜索词`StartTime>`和`StartTime<`为此。第一个表示呼叫开始时间大于，最后一个表示呼叫开始时间小于。

要查找 2009 年 7 月 4 日至 6 日之间开始的每个电话，请添加搜索词

```
array(
    'StartTime>' => '2009-07-04',
    'StartTime<' => '2009-07-06'
) 
```

[请参阅twilio 文档](http://www.twilio.com/docs/api/rest/call)上的示例 4 。

另请注意，您可以随时询问 twilio 支持。他们通常很乐意提供帮助。

# python - 光栅化 matplotlib 轴内容（但不是框架、标签）

> ID：14032763
> 
> 赞同：13
> 
> 时间：2012-12-25T17:43:23.637
> 
> 标签：python, matplotlib, plot, vector-graphics, rasterizing

对于一篇文章，我正在生成变形的有限元网格图，我使用 matplotlib 的 polycollection 对其进行可视化。图像保存为 pdf。

高密度网格会出现问题，天真的方法会导致文件太大并且渲染过于密集而无法实用。

对于这些网格，将每个元素绘制为多边形确实没有意义；它可以很容易地被光栅化，就像将图像保存为 jpg 或 png 一样。但是，对于打印，我想保留一个清晰的框架、标签和注释。

有谁知道是否有可能在 matplotlib 中实现这种混合光栅化？

我可以想到涉及 imshow 和绕过 polycollection 的解决方案，但我更喜欢使用 matplotlib 的内置组件。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T04:06:56.140

只需将`rasterized=True`关键字传递给您的集合构造函数。例子：

```
col = collections.PolyCollection(<arguments>, rasterized=True) 
```

这仅允许对该元素进行选择性光栅化（例如，如果您在其顶部进行了正常绘图，则默认情况下将对其进行矢量化）。大多数命令喜欢`plot`or`imshow`也可以使用`rasterized`关键字。如果想要栅格化整个图形（包括标签和注释），可以这样做：

```
fig = plt.figure()
a = fig.add_subplot(1,1,1, rasterized=True) 
```

（但这不是您想要的，如问题中所述。）

# r - 通过 R studio 将 CSV 输入到 R Forecast 的日期？

> ID：14032768
> 
> 赞同：1
> 
> 时间：2012-12-25T17:43:42.763
> 
> 标签：r, dataframe, time-series, regression, forecasting

我有一个非常简单的 csv 文件，我正在尝试使用不同的预测方法。

```
 Year   total UnemplRt
   1  12/31/2013    NA      7.1
   2  12/31/2012 39535      8.3
   3  12/31/2011 36965     10.0
   4  12/31/2010 36234     10.9
   5  12/31/2009 37918      8.5
   6  12/31/2008 42235      4.3
   7  12/31/2007 55698      3.7
   8  12/31/2006 58664      3.8
   9  12/31/2005 59674      4.7
   10 12/31/2004 51439      5.7 
```

当我使用 R studio 导入它时，我得到了这个列表。（上图）仅具有列表名称。和我似乎无法引用的 Col 标题。

我是 R 的新手，但我认为我应该有一个数据框，并且第一列应该是日期类型。不知道如何从这里到达那里..然后..这是预测输入的正确布局吗？

如何使用预测（Mutli-models）使用第 10-4 行在 3 上使用 UnemplRt 预测 3 上的“总计”（这是预先知道的，依此类推，即 10-3 预测 2 和 10-2 预测1）这当然是对来年的预测......我已经从电子表格中的直线线性回归中得到它，但它太高了，所以我正在寻找可以考虑最近的方法数据更好，注意曲线而不是直线。

这非常简单，但希望足够通用，其他人也会发现答案也很有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T18:56:30.390

我不是 100% 确定你在问什么，但我假设你想创建一些包含一些回归的时间序列模型。下面概述了构建一个简单的时间序列模型和一个包含回归量的模型。

```
# load the base data as presented in the question
Workbook1 <- structure(list(Year = structure(1:10, .Label = c("31-Dec-04", 
"31-Dec-05", "31-Dec-06", "31-Dec-07", "31-Dec-08", "31-Dec-09", 
"31-Dec-10", "31-Dec-11", "31-Dec-12", "31-Dec-13"), class = "factor"), 
    total = c(51439L, 59674L, 58664L, 55698L, 42235L, 37918L, 
    36234L, 36965L, 39535L, NA), UnemplRt = c(5.7, 4.7, 3.8, 
    3.7, 4.3, 8.5, 10.9, 10, 8.3, 7.1)), .Names = c("Year", "total", 
"UnemplRt"), class = "data.frame", row.names = c(NA, -10L))

# Make a time series out of the value
dependent <- ts(Workbook1[1:9,]$total, start=c(2004), frequency=1)

# load forecast package
require(forecast)

# make a model that fits, you can get other models as well. Think it is best to some studying of the forecast package documentation.
fit <- auto.arima(dependent)

# do the actual forecast
fcast <- forecast(fit)

# here some results of the forecast
fcast
     Point Forecast    Lo 80    Hi 80     Lo 95    Hi 95
2013          39535 31852.42 47217.58 27785.501 51284.50

# You can make a plot as following:
plot(fcast) 
```

当您包含一些失业率数据时，我假设您可能希望在某种回归模型中将其包含在您的预测中。下面是一个关于如何解决这个问题的模型：

```
# load independent variables in variables.
unemployment <- ts(Workbook1[1:9,]$UnemplRt, start=c(2004), frequency=1)
unemployment_future <- ts(Workbook1[10:10,]$UnemplRt, start=c(2004), frequency=1)

# make a model that fits the history
fit2 <- auto.arima(dependent, xreg=unemployment)

# generate a forecast with the already known unemployment rate for 2013.
fcast2 <- forecast(fit2,xreg=unemployment_future) 
```

这里是预测的结果，你可以再次像上面那样绘制它。

```
fcast2
     Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
2013       45168.02 38848.92 51487.12 35503.79 54832.25 
```

希望以上有所帮助。

# actionscript-3 - Starling - 将 SWF 图像（矢量）加载到图像中

> ID：14032772
> 
> 赞同：3
> 
> 时间：2012-12-25T17:44:14.783
> 
> 标签：actionscript-3, swfloader, starling-framework

我正在尝试将我的一个旧项目转换为使用 Starling 以获得一些额外的性能。我在加载 SWF 并尝试显示它们时遇到了问题。

这是我之前使用的代码：（*没有 Starling）*

```
private function swfLoaded(e:LoaderEvent):void {
    var spr:Sprite = new Sprite();
    spr = e.currentTarget.content;
    bitmapData.draw(spr ...);
} 
```

我使用 Starling 时的问题是 currentTarget.content 是 flash.display.displayObject。

```
cannot convert com.greensock.loading.display::ContentDisplay@90ffec1 to starling.display.Sprite 
```

我想找到一种将 flash.display.displayObject “转换”为八哥精灵的方法。我还希望能够将加载的 swfs 内容作为精灵存储到数组中。

*在此先感谢，汤帕*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:10:17.907

一方面，您在创建 spr 后立即用不同的值覆盖它。

执行 bitmapData.draw() 调用后：

```
var tex:Texture = Texture.fromBitmapData(bitmapData, false, false); 
```

然后可以使用新纹理创建 Starling Image 精灵。

# facebook - 邀请好友点赞粉丝专页

> ID：14032774
> 
> 赞同：0
> 
> 时间：2012-12-25T17:44:21.117
> 
> 标签：facebook, facebook-graph-api, dialog, invitation

如何使用 Facebook API 向朋友发送邀请以请求特定的粉丝专页。

还有另一个问题。

然后如何显示已发送邀请的用户列表，并显示有多少人喜欢该个人资料。这样，用户就会对发送邀请最多的人进行排名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:12:00.730

> 如何使用 Facebook API 向朋友发送邀请以请求特定的粉丝专页。

您可以使用带有消息和页面链接的[通知 API 。](https://developers.facebook.com/docs/app-notifications/)或者，通过在墙上发布给每个应用程序用户来使用[Feed对话框。](https://developers.facebook.com/docs/reference/dialogs/feed/)（我更喜欢第一个）

> 然后如何显示已发送邀请的用户列表，并显示有多少人喜欢该个人资料。这样，用户就会对发送邀请最多的人进行排名

邀请函将发送给我猜想的所有朋友。如果没有，那么您必须手动保存已发送邀请的记录。

# linux - 按ip列出所有打开的文件

> ID：14032778
> 
> 赞同：1
> 
> 时间：2012-12-25T17:45:26.983
> 
> 标签：linux, ssh, netstat

有没有办法在Linux上按IP地址显示所有打开的文件？我用这个：netstat -atun | awk '{打印 $5}' | 切-d：-f1 | sed -e '/^$/d' |排序 | 唯一的-c | 排序 -n

按连接数排序显示来自 IP 的所有连接。

我怎么知道这些 IP 的目标是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:07:25.030

如果您可以找到一种方法来识别在 netstat 中打开了套接字的进程，则可以使用`ls -l /proc/<pid>/fd`查找该进程打开了哪些文件。当然，其中很多文件可能无法从网络访问 - 例如，您的典型 apache 服务器将拥有`/var/log/httpd/access_log`并且`/var/log/httpd/error_log`很可能还有一些其他文件。当然，这将是一个“时刻”，从现在开始，该进程在 5 秒或 1 毫秒内打开了什么文件可能会有很大不同。

我想你不只是让任何人/任何人访问服务器，所以我猜它是一个网络服务器或类似的服务器，在这种情况下，将一些代码放入你的网络界面以跟踪谁做了什么可能会更容易。

# python - 如何在 django-rest-framework 中通过关系使用 ManytoManyField

> ID：14032783
> 
> 赞同：21
> 
> 时间：2012-12-25T17:46:10.007
> 
> 标签：python, django-rest-framework

基本上我有这样的模型：

```
class Playlist(models.Model):
    key = models.CharField(max_length=255,blank=True, unique=True)
    user = models.ForeignKey(User)
    title = models.CharField(max_length=200)
    pub_date = models.DateTimeField(auto_now_add=True)
    videos = models.ManyToManyField(Video, through='PlaylistVideo')

class PlaylistVideo(models.Model):
    playlist = models.ForeignKey(Playlist)
    video =    models.ForeignKey(Video)
    position = models.IntegerField()

class Video(models.Model):
    title = models.CharField(max_length=255,blank=True)
    description = models.TextField(blank=True)
    thumb =  models.URLField(blank=True)
    duration = models.IntegerField(default=0) 
```

现在我想要一个 API 来返回这样的 PLAYLISTS ......但是视频应该在 PlaylistVideo 模型中按 POSITION 排序

```
{
        "key": "h8x3",
        "title": "First Playlist",
        "pub_date": "2012-10-11T17:00:26Z",
        "videos": [
            {
                ....
            },
            {
                ....
            }
        ]
    }, 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-06T14:05:44.413

不太确定您是否已设法解决您的问题，但我自己也遇到过这个问题，并设法通过执行以下操作使其正常工作：

像这样创建一个自定义序列化程序：

```
class PlaylistVideoSerializer(serializers.HyperlinkedModelSerializer):
    title = serializers.ReadOnlyField(video.title)
    description = serializers.ReadOnlyField(video.description)
    thumb = serializers.ReadOnlyField(video.thumb)
    duration = serializers.ReadOnlyField(video.duration)

    class Meta:
        # your associative entity here
        model = PlaylistVideo
        fields = ('title', 'description', 'thumb', 'duration') 
```

在这里，我假设您想显示视频实体/表下的所有字段。随意调整您的需求/喜好。

那么，你需要做的就是这个

```
class PlaylistSerializer(serializers.ModelSerializer):
    videos = PlaylistVideoSerializer(source='playlistvideo_set', many=True)
    class Meta: 
        model = Playlist
        fields = ('key', 'title', 'pub_dates', 'videos') 
```

注意：始终确保源引用关联实体。否则你会得到一个空 json 的列表。

希望这会帮助任何面临类似问题的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-24T11:29:04.230

你可以这样做：

```
class PlaylistVideoList(generics.ListCreateAPIView):
    serializer_class = PlaylistVideoSerializer
    queryset = PlaylistVideo.objects.all().order_by('position') 
```

在 serializers.py 中：

```
class PlaylistVideoSerializer(serializers.ModelSerializer):
    class Meta:
        model = PlaylistVideo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T14:19:49.767

我们确实需要添加一些关于“通过”关系的文档。

同时，此讨论可能会有所帮助：

[https://groups.google.com/forum/#!topic/django-rest-framework/xzOhjILq3xA/discussion](https://groups.google.com/forum/#!topic/django-rest-framework/xzOhjILq3xA/discussion)

# c# - 右键单击 ContextMenuStrip 时出现数据网格错误

> ID：14032784
> 
> 赞同：0
> 
> 时间：2012-12-25T17:46:45.407
> 
> 标签：c#, contextmenustrip

嗨，我在 WindowsForm 的 dataGrid 上添加了 contextMenuStrip，但第一次右键单击后，表单最小化。我重新打开它，现在右键单击显示 contexMenuStrip。你能给我一个解决方案吗？问候。

编辑：我已经将另一个 contexMenuStrip 添加到另一个 dataGrid 中，我看到第一次单击最小化表单（但如果我使用 .showDialog() 命令则不是），但所有其他工作，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:22:10.380

在您的整个项目中搜索，`FormWindowState.Minimized`在那里设置断点，运行调试器并查看您的程序是否在那里运行。

# javascript - 在 html 页面中使用对象标签显示 youtube 视频

> ID：14032785
> 
> 赞同：0
> 
> 时间：2012-12-25T17:47:02.320
> 
> 标签：javascript, html, youtube-api

我有以下代码，我试图将 youtube 播放器嵌入到 html 页面中。

我在控制台上没有看到任何错误，但播放器没有添加到 html 页面上。

```
 <form name="urlReaderForm"  onSubmit=" return validateForm()" method="post">
    Url: <input type="text" name="url"><br>
   edit: Times: < input type="Number" name="times"<br>
    <input type="submit" type="submit" value="Submit">
 </form>
 <div id="youPlayer"></div>

<script>
    function validateForm() {
         var url=document.forms["urlReaderForm"]["url"].value;
         var loopCounter=document.forms["urlReaderForm"]["times"].value;

         var len = url.length;
         var vIDpos=url.indexOf("v=");
         var vID=url.substring(vIDpos+2,len-1);
         alert(''+vID);
         var html_var='';
         html_var ="<object style='height: 390px; width: 640px'> <param name='movie'       value='https://www.youtube.com/v/'"+vID+"'?version=3&feature=player_embedded&loop='"+loopCounter+"'&playlist='"+vID+"'><param name='allowFullScreen' value='true'><param name='allowScriptAccess' value='always'><embed src='https://www.youtube.com/v/'"+vID+"'?version=3&feature=player_embedded&loop='"+loopCounter+"'&playlist='"+vID+"' type='application/x-shockwave-flash' allowfullscreen='true' allowScriptAccess='always' width='425' height='344'></object>​";
        document.getElementById("youPlayer").innerHTML = html_var; 
     }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:23:14.610

上面的示例中有几个问题...

*   表格上没有可供 `var loopCounter=document.forms["urlReaderForm"]["times"].value;`阅读的字段
*   当您从表单中提取 URL 时，您会去掉最后一个字符。采用`var vID=url.substring(vIDpos+2,len);`
*   除非您添加`return false;` 到脚本的末尾，否则它将重新加载页面，因此您将永远不会看到您的错误

我建议使用更现代的 iframe 嵌入，但如果您仍需要坚持使用您的解决方案，请尝试以下操作：

```
 function validateForm()
    {
    var url=document.forms["urlReaderForm"]["url"].value;
    //var loopCounter=document.forms["urlReaderForm"]["times"].value;
    loopCounter = 0;
    var len = url.length;
    var vIDpos=url.indexOf("v=");
    var vID=url.substring(vIDpos+2,len);
    alert(''+vID);
    var html_var='';
    html_var ="<object style='height: 390px; width: 640px'><param name='movie' value='https://www.youtube.com/v/"+vID+"?version=3&feature=player_embedded&loop='"+loopCounter+"'&playlist='"+vID+"'><param name='allowFullScreen' value='true'><param name='allowScriptAccess' value='always'><embed src='https://www.youtube.com/v/"+vID+"?version=3&feature=player_embedded&loop='"+loopCounter+"'&playlist='"+vID+"' type='application/x-shockwave-flash' allowfullscreen='true' allowScriptAccess='always' width='425' height='344'></object>";
    console.log(html_var);   
    document.getElementById("youPlayer").innerHTML = html_var; 
    return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:53:41.423

我必须同意之前关于内置嵌入代码的海报。为了给你两个新的想法，我自己在第二个站点上使用了一个和另一个。

```
<iframe width="640" height="360" src="http://www.youtube.com/embed/9m-L5InQZvM?feature=player_detailpage" frameborder="0" allowfullscreen></iframe> 
```

对于嵌入式，我使用的第二个选项是我刚刚制作了一个包含视频和一般 iframe 的列表，只是为了有这样的目标

```
 <body class="center">
        <h2 class="media">Videos</h2>
            <ul id="list" class="videolist">
                <li class="videolist"><a href ="videos/firstVideo.html" title="" target="video-frame"></a></li>
                <li class="videolist"><a href ="videos/secondVideo.html" title=""></a></li>
            </ul>
            <iframe id="video-frame" src="" width ="600" height ="350" name="video-frame">
            </iframe>
    </body> 
```

然后像这样将嵌入的代码放入单独的 .html 文件中

```
<!DOCTYPE html>
<iframe width="576" height="324" src="http://www.youtube.com/embed/FjCehYrEbO0?feature=player_detailpage">
Your browser does not support frames, please update your browser
</iframe> 
```

但重点仍然是，使用 iframe 并且它仍然被认为是 HTML5 有效，即使框架可能不受欢迎，但这是一般用途。您仍然可以使用框架，但它们应该用于更大的目的，而不仅仅是因为它“更容易”分割/更新页面上的内容。

# android - 解码的字符串图像无法在 Android 中显示为位图

> ID：14032789
> 
> 赞同：1
> 
> 时间：2012-12-25T17:47:38.947
> 
> 标签：android, android-intent, bitmap, base64

下面是我用来通过在我的 android 项目中导入 android.util.Base64 将图像文件从位图编码为 base64 字符串的代码部分：`

```
Bitmap img_bmp=BitmapFactory.decodeStream(getContentResolver().
openInputStream(this.browseImageURI));

ByteArrayOutputStream baos = new ByteArrayOutputStream();  
img_bmp.compress(Bitmap.CompressFormat.JPEG, 30, baos); 
byte[] image = baos.toByteArray();
 String profile_img = Base64.encodeToString(image, Base64.DEFAULT); 
```

` 字符串 profile_img 将作为字符串保存在 mysql 数据库中。当我从数据库中检索字符串值时，我将使用以下代码将图像字符串从字符串解码为位图：

`

```
Intent i = getIntent(); //pass the value from previous activity
str_img= i.getStringExtra("img");
img_bm = StringToBitMap(str_img);
imgview = (ImageView)findViewById(R.id.imageView1);
imgview.setImageBitmap(img_bm); // display the image

//Function to convert string to bitmap
    public Bitmap StringToBitMap(String image){
           try{
               byte [] encodeByte=Base64.decode(image,Base64.DEFAULT);
               Bitmap bitmap=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
               return bitmap;
             }catch(Exception e){
               e.getMessage();
              return null;
             }
     } 
```

` 我预计它会显示图像，但是图像没有显示，并且我从 Base64 解码器收到一条日志消息“---解码器->解码返回错误”。

有人可以帮我弄清楚我的代码有什么问题吗？

有谁知道如何将 base64 字符串图像（从 JSON 传递到 php 脚本）转换为 blob 格式，以便我可以将其作为 BLOB 存储在 mysql 中。先感谢您。

# .net - ASP.NET Web API 自定义 ReasonPhrase 破坏了自托管应用程序

> ID：14032790
> 
> 赞同：2
> 
> 时间：2012-12-25T17:48:00.527
> 
> 标签：.net, asp.net-web-api

自托管`ASP.NET Web API`服务时，我想使用自定义`ReasonPhrase`来提供有关请求结果的更详细信息。但是当我提供它时，客户端代码根本无法收到任何答案，例如这个答案会导致`No Response`客户端错误：

```
return new HttpResponseMessage(code) { ReasonPhrase = message }; 
```

当我使用此代码时也会发生同样的情况：

```
HttpResponseMessage response = request.CreateResponse(code, result);
response.ReasonPhrase = message;
return response; 
```

但如果我只使用

```
return new HttpResponseMessage(code); 
```

然后客户端成功收到响应。

[有](https://stackoverflow.com/questions/9794637/mvc4-webapi-reason-phrase)一个答案说这是一个 Cassini 的错误，我还在 asp.net 论坛上发现了一个提到这个 Cassini 的错误。

那么如何`ReasonPhrase`在自托管`ASP.NET Web API`服务中允许自定义呢？如果可能，我想避免使用`IIS`托管此服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:06:22.463

我使用了非英语文本`ReasonPhrase`（实际上是俄语）。当我将文本更改为英文时，一切正常。[在这里](https://wcf.codeplex.com/discussions/252140)，我找到了一个`ReasonPhrase`可能只包含 ASCII 字符的答案。

看起来这不是卡西尼号的问题，我几乎不确定这是否是一个问题。但是令人沮丧的是，我们不能使用本地化`ReasonPhrase`。

# bash - bash 中的文件夹和文件名是否有自动完成功能？

> ID：14032795
> 
> 赞同：0
> 
> 时间：2012-12-25T17:48:33.423
> 
> 标签：bash, bash-completion

我需要导航到某个目录，然后执行位于那里的脚本。

我正在使用`cd folder_name`导航到下一个目录。

一个文件夹的名称很长（带有空格）。有没有办法只输入前几个字母，然后使用快捷键自动完成第一个匹配的名称，或者浏览可能的匹配项？

如果我想对某个文件（例如`chmod XXX file_name`）执行命令也是如此，有没有办法在我输入文件名的几个字母后让名称出现？

我使用的 shell 是 OS X 10.7.4 中的 bash-3.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:03:14.437

是的，Bash 支持自动完成（就我个人而言，这是我最喜欢的功能之一）。使用该`Tab`键来完成您输入的内容（注意它区分大小写）。Advanced Bash-Scripting Guide 有一节[介绍可编程完成](http://tldp.org/LDP/abs/html/tabexpansion.html)。您可以启用完成以完成命令名称等等！

# android - android以编程方式创建RelativeLayout

> ID：14032797
> 
> 赞同：0
> 
> 时间：2012-12-25T17:48:49.960
> 
> 标签：android, view, android-relativelayout

我在以编程方式创建 relativeLayout 时遇到了一些麻烦。为了更好地理解，我在下面附上了一张图片。加号和减号的东西是按钮，也应该动态创建并添加到布局中。tv4 和 tv5 的值应随着按钮按下而相应增加/减少。

到目前为止我做了什么：

1）创建布局：

```
RelativeLayout rl = new RelativeLayout(this);
    rl.setId(i);
    rl.setBackgroundResource(R.drawable.bg);
 RelativeLayout.LayoutParams Lparams = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        Lparams.addRule(RelativeLayout.BELOW, R.id.RL_default);
        Lparams.setMargins(3, 5, 3, 0);
        rl.setLayoutParams(Lparams); 
```

2）添加电视1：

```
 Lparams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    Lparams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
    Lparams.setMargins(10, 0, 0, 0);

    TextView txt = new TextView(this);
    txt.setTextColor(Color.parseColor("#FFFFFF"));
    txt.setId(x);
    txt.setTextSize(25);
    txt.setLayoutParams(Lparams);
    txt.setText(name);
            rl.addView(txt); 
```

3）添加电视2：

```
 Lparams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    Lparams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
    Lparams.addRule(RelativeLayout.BELOW, txt.getId());
    Lparams.setMargins(10, 0, 0, 0);

    TextView txtS = new TextView(this);
    txtS.setId(y);
    txtS.setText("Test: ");
    txtS.setTextSize(22);

    txtS.setLayoutParams(Lparams);
    txtS.setGravity(Gravity.BOTTOM);
    txtS.setPadding(0, 0, 0, 20);
            rl.addView(txtS); 
```

4）现在我想创建第一个按钮：

```
 Button btnSminus = new Button(this);
    btnSminus.setId(btn1);
    btnSminus.setText("<");
    btnSminus.setTextSize(20);

    Lparams= new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);

    Lparams.addRule(RelativeLayout.RIGHT_OF, txtS.getId());

    btnSminus.setLayoutParams(Lparams);
            rl.addView(btnSminus); 
```

问题是，当行 Lparams.addRule(RelativeLayout.RIGHT_OF, txtS.getId()); 时，按钮 View 似乎刚刚从屏幕上消失。被执行。可能是什么原因？

![在此处输入图像描述](../Images/345bebd0227f963d9889cd0c458e883f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:58:02.130

我的猜测是，这是因为您将宽度设置为`txtS`to `match_parent`，所以按钮被推离屏幕。您可以通过将其更改为`wrap_content`.

# html - 在 Aquamacs 中默认禁用 html-helper-mode 以编辑 HTML

> ID：14032801
> 
> 赞同：6
> 
> 时间：2012-12-25T17:49:26.607
> 
> 标签：html, emacs, elisp, aquamacs

Aquamacs 默认`html-helper-mode`编辑`.html`具有奇怪行为的文件。我想`html-mode`默认切换回常规。

我读到我需要更改 `magic-mode-alist`才能这样做。根据我从[文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html#index-magic_002dmode_002dalist-1651)中了解到的情况，将其添加到我`.emacs`应该做的交易：

```
(setq magic-mode-alist '(("\\.html" . html-mode))) 
```

不幸的是，它并没有改变任何东西。[我在其他地方](http://formyfriendswithmacs.com/aquamacs.html)读到，将它设置为`nil`应该可以工作，但它也没有。

知道我缺少什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T18:38:01.550

根据[我链接的页面](http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html)，要修改的第一个变量是`magic-mode-alist`优先级`auto-mode-alist`。

`magic-mode-alist`我刚刚使用指向的正则表达式在匹配列表的开头添加了一个值`html-helper-mode`：

```
(add-to-list 'magic-mode-alist 
    '("\\(?:<\\?xml\\s +[^>]*>\\)?\\s *<\\(?:!--\\(?:[^-]\\|-[^-]\\)*-->\\s *<\\)*\\(?:!DOCTYPE\\s +[^>]*>\\s *<\\s *\\(?:!--\\(?:[^-]\\|-[^-]\\)*-->\\s *\<\\)*\\)?[Hh][Tt][Mm][Ll]"
        . html-mode)) 
```

奇迹般有效。尽情享受 Aquamacs 的乐趣`html-helper-mode`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T22:38:20.400

`magic-mode-alist`查看文件的内容。您要编辑`auto-mode-alist`，它查看文件名。有关该变量的讨论，请参见[您链接的同一页面。](http://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html)

而且您不想只是将其设置为一个值，因为它已经包含一些值。使用函数`add-to-list`，如下：

```
(add-to-list 'auto-mode-alist '("\\.html\\'" . html-mode) 
```

# php - 如何在php中限制http响应时间

> ID：14032804
> 
> 赞同：4
> 
> 时间：2012-12-25T17:50:08.883
> 
> 标签：php, function, http-headers

我正在使用一些网站来检测我的网站访问者所在的国家/地区。我的意思是这样

```
$ip = $_SERVER['REMOTE_ADDR'];  
$url1 = 'http://api.hostip.info/get_json.php?ip='.$ip;
$url2 = 'http://ip2country.sourceforge.net/ip2c.php?format=JSON&ip='.$ip; 
```

有时像 sourgeforge 这样的网站会花费太多时间来加载。

那么任何人都可以告诉如何限制http响应时间。？

如果`url1`已关闭或未响应，`x seconds`则移至`url2,url3,etc`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T17:57:39.223

```
$context  = stream_context_create(array(
    'http' => array(
        'method'  => 'GET',
      , 'timeout' => 3 
    )
)); 
```

然后将流上下文提供给 fopen() 或 file_get_contents() 等...

[http://php.net/manual/en/stream.contexts.php](http://php.net/manual/en/stream.contexts.php)
[http://php.net/manual/en/context.http.php](http://php.net/manual/en/context.http.php)

该手册称其为“读取超时”。我担心它可能不包括 dns 解析 + 套接字连接之类的时间。我认为 php 尝试从流中读取之前的超时可能由[default_socket_timeout](http://www.php.net/manual/en/filesystem.configuration.php#ini.default-socket-timeout)设置控制。

您可能要考虑 curl，它似乎更具体一些，但我不确定是否`CURLOPT_TIMEOUT`包含`CURLOPT_CONNECTTIMEOUT`.

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT, 2); 
```

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T17:54:32.437

如果这是使用流完成的，您可以使用[`stream_set_timeout`](http://php.net/manual/en/function.stream-set-timeout.php)它。[php 手册](http://php.net/manual/en/function.stream-set-timeout.php)中的一个不错的示例，它还描述了更高级的归档方法：

```
$fp = fsockopen("www.example.com", 80);
if (!$fp) {
    echo "Unable to open\n";
} else {

    fwrite($fp, "GET / HTTP/1.0\r\n\r\n");
    stream_set_timeout($fp, 2);
    $res = fread($fp, 2000);

    $info = stream_get_meta_data($fp);
    fclose($fp);

    if ($info['timed_out']) {
        echo 'Connection timed out!';
    } else {
        echo $res;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T21:45:19.917

还有另一种解决方案，只需下载数据库并在自己更快的机器上为自己提供该服务：

[IP 到地理位置数据库](http://ip2country.sourceforge.net/faq.php#Sources_of_IP_Geolocation)

# c# - 并行 For.Inserting values to excel

> ID：14032806
> 
> 赞同：0
> 
> 时间：2012-12-25T17:50:29.900
> 
> 标签：c#

我最近优化了我的函数，该函数使用 Parallel For 循环将一些值插入到 excel 工作簿中（我必须在循环中比较大约 500000 个值）。如果我使用简单的 for 循环，一切对我来说都很好，但是如果我开始使用 Parallel For 语句，我没有错误并且代码工作正常，但是在 excel 工作簿中插入的值不像预期的那样（在不同的行中，不像我使用简单的 for 循环）。

这是我的代码示例，请您帮我寻找解决方案。

```
Parallel.For(0, DestinationListIDArray.Count, (int i) =>
                {
                    for (int j = 0; j < SourceListIDArray.Count; j++)
                    {
                        if (DestinationListIDArray[i].ToString() == SourceListIDArray[j].ToString() && DestinationListIDArray[i].ToString() != "НД")
                        {
                            int c = 1;
                            int summ = i + c;
                            string forB = summ.ToString();
                            string forC = summ.ToString();
                            DestrangeH = myExcelWorksheetDestination.get_Range(TEXTBOX_FIO_DESTINATION.Text + forB);
                            DestrangeI = myExcelWorksheetDestination.get_Range(TEXTBOX_DEST_DOLZHNOST.Text + forC);

                            DestrangeH.Interior.Color = System.Drawing.ColorTranslator.ToOle(COLORDIALOG_INF1_BACKGROUNDCOLOR.Color);
                            DestrangeH.Font.Color = System.Drawing.ColorTranslator.ToOle(COLORDIALOG_INF1_FOREGROUNDCOLOR.Color);
                            DestrangeI.Interior.Color = System.Drawing.ColorTranslator.ToOle(COLORDIALOG_INF2_BACKGROUNDCOLOR.Color);
                            DestrangeI.Font.Color = System.Drawing.ColorTranslator.ToOle(COLORDIALOG_INF2_FOREGROUNDCOLOR.Color);

                            //DestrangeH.set_Value(Missing.Value, SourceArray[j - 2].ToString());
                            //DestrangeI.set_Value(Missing.Value, SourceArray[j - 1].ToString());

                            DestrangeH.set_Value(Missing.Value, SourceListFIOArray[j].ToString());
                            DestrangeI.set_Value(Missing.Value, SourceListDolzhArray[j].ToString());

                        }

                    }

                }); 
```

我正在使用 List 数组，并且我在某处读到 List 泛型不是线程安全的，这可能会让我遇到麻烦。如果是这样，您能建议我使用哪种动态数组以及如何在插入前锁定。谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:05:31.010

就像我回忆的那样。在这里阅读：http: [//msdn.microsoft.com/en-us/library/8sesy69e.aspx](http://msdn.microsoft.com/en-us/library/8sesy69e.aspx)

TL;博士

Office 对象模型不是线程安全的。您可以在某些情况下使用多个线程，但是 COM 服务器会为您序列化调用。

在这里使用 Paraller.For 无法获得任何好处。

# email - 获取页面标题和 URL 的“通过电子邮件发送此页面”按钮

> ID：14032809
> 
> 赞同：0
> 
> 时间：2012-12-25T17:50:58.167
> 
> 标签：email, dynamic, hyperlink

我在 Intranet 页面的每个主要部分之后动态添加一个实用工具栏，并动态生成链接到每个主要部分标题的目录。那运作良好。我还设法在每个部分之后通过滚动获得了一个“返回顶部”链接。现在，我想在“返回顶部”按钮旁边再添加两个按钮。

1.  转发给朋友
2.  收藏此页

我目前正在“返回顶部”工作，您可以在此页面上看到： http:
[//chsweb.me/so-fwd-bkmrk](http://chsweb.me/so-fwd-bkmrk)

**1\. 转发给朋友**
**1.1**当有人点击“转发给朋友”时，我希望它在他们的默认电子邮件应用程序中创建一封电子邮件，电子邮件主题为“签出：此处的页面标题”，其中“此处的页面标题”是页面上第一个标题（h1、h2、h3 或 h4）的文本。

**1.2**我希望电子邮件的主题是“访问：www.sharedpageurl.com”，其中 URL 是共享的页面 URL。

或多或少，我需要动态创建 MailTo 链接，并将其添加到上面链接的此页面上的“返回顶部”之后。

这是当前正在运行且需要修改的脚本文件：http:
[//chsweb.me/so-fwd-bkmrk-js](http://chsweb.me/so-fwd-bkmrk-js)（注意//注释的最后一行）

**2\. 将此页面添加为书签**
我会在我的电子邮件链接正常工作后担心这个。我已经阅读了一些关于这个的帖子，但没有一个可以跨浏览器工作。

# .net - netNamedPipeBinding 与同一应用程序中的主机和客户端不工作

> ID：14032810
> 
> 赞同：1
> 
> 时间：2012-12-25T17:51:07.450
> 
> 标签：.net, wcf, timeout, netnamedpipebinding

我开发了一个简单的 Windows 窗体应用程序，在其中托管 NetNamedPipeBinding 服务，并且同一应用程序是尝试调用服务中的函数的客户端，但我收到此错误：

> *发送到 net.pipe://service1/ 的此请求操作在配置的超时 (00:01:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。*

这是我的服务：

```
namespace WcfServiceExample
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string SayHello();
    }

    public class Service1 : IService1
    {
        public string SayHello()
        {
            return "Hello from " + Dns.GetHostName() + " !!";
        }
    }
} 
```

这是我的 app.config（在我的 Windows 窗体应用程序中）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>      
      <!-- CLIENT & SERVER BINDINGS -->
      <bindings>
            <netNamedPipeBinding>
                <binding name="NamedPipeBinding">
                    <security mode="None" />
                </binding>
            </netNamedPipeBinding>
        </bindings>

        <!-- SERVER -->
        <services>
          <service name="WcfServiceExample.Service1" behaviorConfiguration="svc1behavior">
            <endpoint address="net.pipe://service1" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="NamedPipedEndPoint" contract="WcfServiceExample.IService1" />
          </service>
        </services>
        <behaviors>
          <serviceBehaviors>
            <behavior name="svc1behavior">
              <serviceMetadata  />
              <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
          </serviceBehaviors>
        </behaviors>

        <!-- CLIENT -->
        <client>
          <endpoint address="net.pipe://service1" binding="netNamedPipeBinding" 
              bindingConfiguration="NamedPipeBinding" contract="WcfServiceExample.IService1"
              name="NamedPipedClientEndPoint" />
        </client>

    </system.serviceModel>
</configuration> 
```

这是我的 Windows 窗体应用程序：

```
namespace ServiceHostAndClientNamedPipesNoProxy
{
    public partial class Form1 : Form
    {
        ServiceHost vHost;
        IService1 sc;

        public Form1()
        {
            InitializeComponent();

            StartHostService();
            StartClient();
        }

        private void StartHostService()
        {
            try
            {
                // Create the service instance
                vHost = new ServiceHost(typeof(Service1));
                // Open the service
                vHost.Open();                
            }
            catch (Exception ex)
            {
                vHost.Abort();
            }
        }

        private void StartClient()
        {
            NetNamedPipeBinding binding = new NetNamedPipeBinding("NamedPipeBinding");
            ChannelFactory<IService1> cf = new ChannelFactory<IService1>("NamedPipedClientEndPoint");
            sc = cf.CreateChannel();
            //((IContextChannel)sc).OperationTimeout = new TimeSpan(0, 3, 0);

            textBox1.Text = "Connected to " + cf.Endpoint.Address.ToString();
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            vHost.Close();
        }

        private void btnInvokeMethod_Click(object sender, EventArgs e)
        {
            this.Cursor = Cursors.WaitCursor;
            textBox2.Text = textBox2.Text + System.Environment.NewLine + sc.SayHello();
            this.Cursor = Cursors.Default;
        }
    }
} 
```

请帮忙，我被这个困住了！！！

提前说。

# html - Kindle Fire HD 使用 HTML5 音频标签播放 Ogg 和 MP3

> ID：14032811
> 
> 赞同：1
> 
> 时间：2012-12-25T17:51:18.227
> 
> 标签：html, audio, kindle

使用新的 HTML 音频标签：

```
<audio autoplay="autoplay">
<source src="../../audio/andromeda_oars.ogg" type="audio/ogg" />
<source src="../../audio/andromeda_oars.mp3" type="audio/mpeg" />   
Your browser does not support the audio element.
</audio> 
```

这适用于我尝试过的所有浏览器（IE v10、Chrome v23、Opera v12 和 Firefox v17）。但是，当我在 Kindle Fire HD 中查看相同的页面时，两个音频文件（ogg 和 mp3）都会播放——一个接一个（这让我发疯）。这不应该发生。有人有任何答案和/或建议吗？谢谢！节日快乐....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:39:57.487

我在 FireHD7 中尝试了以下 HTML，它工作正常 - 只播放一个音频标签。如果您仍然有问题，您使用的是什么版本的 Silk 浏览器，它是在 HD7 还是 HD8.9 设备上？

```
<html lang="">
<head>
<meta http-equiv="content-type" content="text/html; charset=">
<title>Audio Test</title>
</head>
<body>

<audio id=audio0 controls autoplay="true">
<source src='http://www.russianlessons.net/audio/lesson3-20.mp3' type='audio/mpeg'>
<source src='http://www.russianlessons.net/audio/lesson3-20.ogg' type='audio/ogg'>
</audio>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:49:58.067

这听起来像是 Kindle Fire 浏览器中的一个错误。如果可以播放第一个源文件，则应忽略第二个源文件。

可能值得改变源元素的顺序（即把 MP3 放在第一位）。我怀疑它会有所作为，但以防万一 - 可能是一些奇怪的浏览器怪癖。

另一种可能性是浏览器的自动播放实现存在错误。您是否尝试过删除该`autoplay`属性？如果这是问题所在，那么您可以尝试`play()`在页面加载时使用 JavaScript 的方法。

更可靠的解决方案是使用 JavaScript 检测编解码器支持。像这样的东西应该工作：

HTML：

```
<audio id="myAudio">
Your browser does not support the audio element.
</audio> 
```

JavaScript：

```
function getAudioType(element) {
    if (element.canPlayType) {
        // CanPlayType returns maybe, probably, or an empty string.
        if (element.canPlayType('audio/ogg; codecs="vorbis"') !== '') {
            return('ogg');
        } else if (element.canPlayType('audio/mpeg;') !== '') {
            return('mp3');
        }
    }
    return false;
}

var audio = document.getElementById('myAudio');
var audiotype = getAudioType(audio);
if (!audiotype) {
    // Some fallback or not-supported message here
} else {
    audio.src = '../../audio/andromeda_oars.' + audiotype;
    audio.play();
} 
```

更新： [这个例子](http://people.opera.com/danield/html5/autoplay)

# switch-statement - php中的switch语句切换到特定页面

> ID：14032813
> 
> 赞同：0
> 
> 时间：2012-12-25T17:51:36.700
> 
> 标签：switch-statement

```
<div id="navigation">
    <ul>
        <li><a href="?id=action">Action</a></li>
        <li><a href="?id=adventure">Adventure</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div>
<?php
$id = (isset($_GET['id'])); set the value
    switch($id) {
        case 'actiune':include('/actiune/index.php');//first page
        break;
        case 'aventura':include('/aventura/index.php');//second page
        break;
    }
?> 
```

当我访问冒险时它会带我去`/action/index.php`为什么？请问我需要一点帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:55:09.127

因为您在`true/false`此处打开，所以[**isset**](http://php.net/manual/en/function.isset.php)的结果- 它始终是布尔值 - 直接分配给 $id。这行应该改写为...

```
$id = isset($_GET['id']) ? $_GET['id'] : ''; 
```

...`''`实际上可以用该默认值替换。

`$_GET['id']` *实际上，您可以在发现它为*空的那一刻重定向用户，然后使用 分析它的不同值`switch`。像这样：

```
if (! isset($_GET['id'])) { ... redirection ... }
switch ($_GET['id']) {
  case 'first': ...; break;
  case 'second': ...; break;
  default: ...;
} 
```

# javascript - 有没有办法禁用日期选择器的引导程序？

> ID：14032816
> 
> 赞同：1
> 
> 时间：2012-12-25T17:51:48.057
> 
> 标签：javascript, css, twitter-bootstrap

我有一个由 JavaScript 制成的日期选择器。我不希望它受到[Bootstrap](http://twitter.github.com/bootstrap/)的影响。有什么办法吗？或者我应该使用 Bootstrap 日期选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:20:26.847

您可以为您的日期选择器指定自己的 css 类并覆盖引导程序的样式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:21:29.267

我认为您需要手动解决它。有两件事：

1.  CSS：如果 Bootstrap 覆盖任何 CSS 规则，您需要指定一个更具体的规则，该规则将优先于 Bootstrap 所做的。见这里：http: [//juicystudio.com/article/selector-specificity.php](http://juicystudio.com/article/selector-specificity.php)
2.  JS：如果任何 JS 影响控件，您很可能必须取消注册所有 Bootstrap 处理程序（使用 Chrome 调试器查看是否有）并手动从 datepicker 注册。

# iphone - iOS SDWebImage 在 UITableViewCell 中淡入淡出

> ID：14032818
> 
> 赞同：11
> 
> 时间：2012-12-25T17:52:08.413
> 
> 标签：iphone, ios, uitableview, fadein, sdwebimage

我一直在我的 iOS 应用程序上使用 SDWebImage(ver3.0)，我想在 uitableviewcell 的新图像像 Path2.0、Pinterest 和 Viddy 这样加载后淡入淡出。感谢[iOS SDWebImage 淡入新图像](https://stackoverflow.com/questions/11869390/ios-sdwebimage-fade-in-new-image)，淡入淡出- 本身正在工作。但是，滚动表格视图时，单元格中的图像会再次加载。这可能是由单元的重用引起的。

这是我的代码。

```
[cell.userImageView setImageWithURL:url
                   placeholderImage:placeholderImage
                          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
                              if (!error) {
                                  cell.userImageView.alpha = 0.0;
                                  [UIView transitionWithView:cell.userImageView
                                                    duration:1.0
                                                     options:UIViewAnimationOptionTransitionCrossDissolve
                                                  animations:^{
                                                      [cell.userImageView setImage:image];
                                                      cell.userImageView.alpha = 1.0;
                                                  } completion:NULL];
                              }
                          }]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-25T18:16:17.917

感谢@OzBoz 指出正确的解决方案是确认图像是否从网络中检索（未缓存），如果是，则执行动画：

```
[cell.userImageView setImageWithURL:url
                   placeholderImage:placeholderImage
                          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType) {
                              if (image && cacheType == SDImageCacheTypeNone)
                              {
                                  cell.userImageView.alpha = 0.0;
                                  [UIView animateWithDuration:1.0
                                                   animations:^{
                                                       cell.userImageView.alpha = 1.0;
                                                   }];
                              }
                          }]; 
```

如果您担心该单元格不再可见），您还可以使用：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

如果该行仍然可见，则此方法（不要与类似名称的方法混淆`UITableViewDataSource`）将返回 non- 。`nil`这在大多数`UITableViewCell`异步图像检索过程中非常重要，但事实证明这`setImageWithURL`将取消任何先前的图像检索过程，因此在使用`SDImageWeb`.

# android - Android中旋转矢量传感器和方向传感器之间的概念区别是什么？

> ID：14032825
> 
> 赞同：26
> 
> 时间：2012-12-25T17:53:52.233
> 
> 标签：android, android-sensors, android-orientation

Android 提供旋转矢量传感器和方向传感器。我知道它们返回不同的数据，因为对于矢量传感器我们有角度的罪，在方向传感器我们有角度。但是概念上的区别是什么？我无法从文档中理解。哪一个提供了设备在三维空间中的方向？我很困惑！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-09-20T06:32:12.473

较旧的 ORIENTATION 传感器使用三个角度报告方向。这个坐标系的问题是它会受到“万向节锁定”的影响：当实际方向向量接近垂直时，其中一个坐标变为 90 或 -90 度，而其余两个坐标变得无法解释或危险地非规范化。

较新的 ROTATION 传感器使用四分位坐标报告方向，使用起来更复杂，但不会受到万向节锁定问题的影响。当使用四元数坐标报告方向时，无论方向是什么，您都可以确定设备的精确方向。

四元数的计算效率也更高。您无需调用昂贵的三角函数即可将四元数旋转应用于向量。如果未提供 w 坐标，您仍然可以通过一个 sqrt 调用来计算 w，相比之下，三个 sin 和三个 cos 函数调用三个角度欧拉形式的方向坐标。

简短的故事：方向型传感器做错了。通过用 ROTATION 传感器替换它们，它们在 API 9 中得到修复。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-02T19:10:44.803

ROTATION_VECTOR 传感器是在 API 9 中引入的，它代表“虚拟”传感器，它结合了来自不同传感器（通常是 ACCELEROMETER、GEOMAGNETIC_FIELD 和 GYROSCOPE）的数据并进行一些智能计算以提供更准确的数据，而不是使用来自 ACCEL 和 GEOMAGNETIC_FIELD 传感器的原始数据。这称为“传感器融合”。您可以在[这里找到更多信息](http://youtube.com/watch?v=C7JQ7Rpwn2k)

ORIENTATION 传感器已被弃用，因为它提供的数据不是很准确。文档建议改用来自 ACCELEROMETER 和 GEOMAGNETIC_FIELD 传感器的原始数据。

不幸的是，我无法提供任何示例如何使用 ROTATION_VECTOR 传感器数据，因为我现在正在调查中:)

以防万一您需要一些如何使用原始数据的示例-随时问我-我会发布一些示例，但简单的谷歌搜索可以更好地帮助您；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-14T19:21:50.107

它们在概念上是相同的，只是在表示上不同。

[在这里查看](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.1.1_r1/android/hardware/SensorManager.java#SensorManager.getOrientation%28float%5B%5D%2Cfloat%5B%5D%29)方向传感器的代码。方向传感器的函数参数是旋转矩阵，该矩阵又是从旋转向量（quats 表示）中计算出来的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T18:43:48.140

在廉价的 Android 手机（与高端 iPhone 不同）上，指南针仅在手机方向接近水平（即与地面平行）时才能工作。

从技术上讲，一个好的指南针（即浮动磁球）应该可以在任何方向工作，但便宜的指南针不能。因此，要使用指南针，请确保您的手机在使用磁力计之前通过查看加速度计是水平的。希望 Google 将来会使用更好的磁力计！

# c# - .NET 2.0 的最佳 WPF 替代品

> ID：14032826
> 
> 赞同：1
> 
> 时间：2012-12-25T17:53:57.883
> 
> 标签：c#, wpf, user-interface, graphics, .net-2.0

我必须在 .NET 2.0 中编写一个 WinForm C# 桌面应用程序，以使其与大多数计算机兼容。这个应用程序将（或至少应该）有一个非常漂亮的界面，有很多图形和自定义皮肤控件......因为我不能使用 WPF（只能从框架 3.5 开始），如果我有什么选择不想让每个控件都由我的绘画程序处理（覆盖 OnPain）？我正在考虑使用一些 HTML 渲染框架，例如这个[http://www.codeproject.com/Articles/32376/A-Professional-HTML-Renderer-You-Will-Use](http://www.codeproject.com/Articles/32376/A-Professional-HTML-Renderer-You-Will-Use)但即使是最好的也需要修改。

任何免费的替代品/提示/任何东西都可以在没有 WPF 的情况下制作漂亮的界面？

谢谢

**编辑：**

澄清一下，2.0 框架是一个项目要求，即使我愿意，我也不能改变这个东西，所以这**不是**这个讨论的重点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:16:43.523

恐怕你不会喜欢你可能得到的任何答案。您基本上有两个选择：通过寻找 WPF 的替代品来浪费您雇主的时间和金钱，WPF 是 Microsoft 支持的桌面应用程序行业标准*，或者更改使用 .NET 框架 v2.0 的要求。

.NET 3.0 版与 Windows Vista 一起提供，因此任何运行 Vista 及更高版本的计算机都将具有能够运行 WPF 的 .NET 框架。如果您的某些客户端运行 Windows XP，他们可能没有 .NET Framework 3.0，那么抓住这个机会（并为您的应用程序提供 .NET Framework 可再发行安装程序）会容易得多。

同样，在这两种情况下，我相信您都必须向您的雇主（或任何提出要求的人）解释利弊，并让他们决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:21:45.150

有一些工具可以编译/链接您的 .net 应用程序二进制文件，这样您就不需要客户端 PC 上的 .net 框架。

[http://spoon.net/studio](http://spoon.net/studio)

[http://www.remotesoft.com/linker/](http://www.remotesoft.com/linker/)

不过说真的，我不会为不想将他们的机器升级到 .NET 4 或更高版本的雇主工作。

# domain-driven-design - 聚合根的通用与单个存储库

> ID：14032834
> 
> 赞同：4
> 
> 时间：2012-12-25T17:55:14.807
> 
> 标签：domain-driven-design

据我了解，限界上下文可以有模块，模块可以有许多聚合根，聚合根可以有实体。对于持久性，每个聚合根都应该有一个存储库。

由于大型项目中有众多聚合根，是否可以使用**Generic Repository**，一个用于准备就绪，一个用于更新？或者应该为每个聚合根有单独的存储库，这样可以提供更好的控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:47:36.587

`GetById()`在大型复杂项目中，我不建议使用通用存储库，因为除了基本的, `GetAll()`... 操作之外，很可能会有许多特定情况。

Greg Young 有一篇关于通用存储库的精彩文章：http: [//codebetter.com/gregyoung/2009/01/16/ddd-the-generic-repository/](http://codebetter.com/gregyoung/2009/01/16/ddd-the-generic-repository/)

> 是否可以使用通用存储库，一个仅用于准备就绪，一个用于更新？

存储库通常不处理保存实体的更新，即它们没有`Update(EntityType entity)`方法。这通常由您的 ORM 的变更跟踪器/工作单元实现来处理。但是，如果您正在寻找一种将读取与写入分开的架构，那么您绝对应该看看[CQRS](http://martinfowler.com/bliki/CQRS.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:59:15.663

纯 DDD 是关于使隐式显式，即：不使用 List()，而是使用 ListTheCustomerThatHaveNotBeSeenForALongTime()。

这里的关键是技术实现。据我所知，领域驱动设计不提供技术选择。

通用存储库非常适合。不过，您对这个通用存储库的使用可能不符合 ddd 的精神。这取决于您的域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T14:52:52.773

在 Web 上发布的一些示例 DDD 应用程序中，我看到它们有一个基本存储库接口，每个聚合根存储库都从该接口继承。我，就个人而言，做事有点不同。因为存储库应该看起来像应用程序代码的集合，所以我的基本存储库接口继承自 IEnumerable 所以我有：

```
public interface IRepository<T> : IEnumerable<T> where T : IAggregateRoot
{

} 
```

我确实有一些我放在那里的基本方法，但只有那些允许读取集合的方法，因为我的一些聚合根对象被封装到只能通过方法调用进行更改的地步。

要回答您的问题，是的，拥有一个通用存储库很好，但尽量不要定义任何不应被所有存储库继承的功能。而且，如果您不小心定义了某个存储库不需要的东西，请将其重构为所有确实需要它的存储库接口。

编辑：添加了如何使存储库的行为与任何其他 ICollection 对象一样的示例。

在需要 CRUD 操作的存储库上，我添加了以下内容：

```
 void Add(T item); //Add
    void Remove(T item); //Remove
    T this[int index] { set; } //or T this[object id] { set; } //Update 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:40:49.607

感谢您的评论。我采用的方法是将基本存储库接口分离为 ReadOnly 和 Updatable。每个聚合根实体都有自己的存储库，并且派生自可更新或只读存储库。聚合根级别的存储库将拥有自己的附加方法。我不打算使用通用存储库。

我选择拥有 IReadOnlyRepository 是有原因的。将来，我会将应用程序的查询部分转换为 CQRS。因此，到 ReadOnly 接口超类型的隔离将在这一点上帮助我。

# objective-c - Add UITableViewController to other View

> ID：14032835
> 
> 赞同：2
> 
> 时间：2012-12-25T17:55:24.540
> 
> 标签：objective-c, ios, uitableview, addsubview

Is it possible to embed (add as subview) a UITableViewController into another View Controller programmatically? I found a few answers here on StackOverflow but none worked for me with ARC and iOS6 SDK.

I know you can do this easily with Navigation and TabBar controllers but I am more curious about adding tableviews to a regular View controller. I need my tableview to occupy the lower part of the available screen space (I need the rest for other purposes, for which neither tab nor navigation types are suitable).

When I tried to do it, however, it did not work. I instantiated a subclassed UITableViewController, but when I added it to my self.view as a subview, the compiler said I tried to use "incompatible pointer types." Not only that, my instantiated UITableViewController does not have a .frame property, so I cannot set it dimensions, which would be the whole point of this exercise.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:29:49.143

Building upon ogres answer, you should add the tableViewController's view as a subview, but it is not everything. The tableViewController is a viewController and it needs to know its parent and its children, to do its viewController-job correctly. I do not know any details here, but there is an entire talk about this from WWDC 2011 called ["Implementing UIViewController Containment"](https://developer.apple.com/videos/wwdc/2011/#implementing-uiviewcontroller-containment).

One problem I have experienced when only adding the view as a subview is that target actions don't seem to work. Tapping a `UIButton` or similar causes either a `EXC_BAD_ACCESS` or a `unrecognized selector sent to instance`.

So I recommend that you do something like this:

```
UIViewController *vc = //Your tableViewController
[self addChildViewController:vc]; //Important
[self.view addSubview:vc.view];

//If you want to set the frame, set the frame of the tableViewController's view
vc.view.frame = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:05:31.857

yes , you can use tableview in another view without any problems

> UITableViewController, but when I added it to my self.view as a subview

are you trying to add viewcontroller as subview or its view ? ( viewcontroller.view )

> UITableViewController does not have a .frame property,

of course it does not have .frame property , it is a view CONTROLLER , you should see .view.frame

# android - 设置 onClickListener

> ID：14032839
> 
> 赞同：1
> 
> 时间：2012-12-25T17:56:12.730
> 
> 标签：android, onclicklistener

我正在设置一个点击监听器，我想知道这是否可行？我看到很多人将 onClickListener 定义为与 setOnClickListener 一致，但这看起来真的很混乱，所以我想知道我以后这样做会不会遇到任何问题？

```
public class Login extends Activity {

protected Button login;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);

    login = (Button) findViewById(R.id.loginButton);
    login.setOnClickListener(myOnClick());
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_login, menu);
    return true;
}

protected OnClickListener myOnClick() {
    OnClickListener v = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //Do stuff
        }
    };

    return v;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:57:33.720

你如何定义它是你个人的编码风格选择。您可以让整个类实现接口、内联执行、按您的方式执行或指定要通过 XML 调用的方法。最终结果或多或少是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:04:27.683

如果您想将所有 onclicklistener 方法保留在一个方法中，您可以实现该方法。为此你做

> login.setOnClickListener(this);

进而

```
extends Activity implements OnClickListener 
```

最后，您将添加未实现的方法。这会将您的所有按钮点击传递给 onclick 方法，您可以在其中使用 if/else 或 switch/case 来分配任何方法。

或者，您也可以在 XML 中定义它或使用您描述的方法。

然而，进入优点和缺点：在 xml 中定义 onClick 可能会导致 proguard 出现问题。就我个人而言，我觉得最简单的方法是在 onclicklistener 中使用 switch 和 case，但如果方法更长，那么最好给它自己的方法，以便“隐藏”它。但是，如果您需要在按下任何按钮（例如 UI 刷新）后运行通用代码，则最好将其留给 switch 和 case 或 if/else

// 只是为那些想在 xml 和 proguard 中使用 OnClick 的人添加

添加这个：

-keepclassmembers 类 * 扩展 android.app.Activity { public void *(android.view.View); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:09:26.497

有多种方法可以`onClickListner`在视图上实现。您使用的也是正确的，不会对您造成任何问题。我个人更喜欢的是让 Class`OnClickListener interface`在覆盖 onClick 方法中实现和使用 switch case 场景。

例如

```
public class LoginExampleImplements extends Activity implements OnClickListener { 

    @Override
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 

    ...         

        btn1 = (Button)findViewById(R.id.btn1);
        btn2 = (Button)findViewById(R.id.btn2);

// Set Click Listener 

        btn1.setOnClickListener(this); 
        btn2.setOnClickListener(this); 
    } 

    @Override
    public void onClick(View v) { 

        switch(v.getId()){
           case R.id.btn1:
             // do stuff related btn1 click
             break;
           case R.id.btn2:
             // do stuff related btn2 click
             break;
         }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T18:16:53.913

取决于您的代码风格，仍然：

1.  想对很多按钮使用相同的方法：让类实现监听器接口，并使用视图 id 上的开关来找出单击了哪个按钮。

2.  真正复杂的逻辑遵循点击：让内部/外部类实现该侦听器。

3.  几行，没什么特别的：做内联，读你代码的人不需要去找一小段代码。

# c++ - C++ 编译时检查副作用

> ID：14032844
> 
> 赞同：2
> 
> 时间：2012-12-25T17:57:01.937
> 
> 标签：c++, functional-programming, purely-functional

一些编译器支持[pure 和 const](https://stackoverflow.com/questions/2798188/pure-const-function-attributes-in-different-compilers)，但是有没有提供检查这些断言是否成立的提议？例如：

```
int global_value = 42;
const int global_value_const = 42;

int MyPureFunction  __attribute__ (( pure_check? )) (
  int input,
  int* input_ptr,
  const int* input_const_ptr,
  int foo& input_ref,
  const int& input_const_ref)
{
   int temporary = input;    // Valid, can read local but mutable state.

   global_value += temporary;        // Invalid, cannot mutate external state
   temporary += global_value;        // Invalid,  cannot read non-const global data.
   temporary += global_value_const;  // Valid, can read const global data.

   temporary += *input_ptr;        // Invalid, cannot derefernece non-const ptr.
   temporary += *input_const_ptr;  // Valid, can dereference a const ptr.
   temporary += input_ref;         // Invalid, cannot use non-const reference.
   temporary += foo->value;        // Valid, can reference a const reference.

   return temporary;     // Valid., if all invalid statements above are removed...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T12:53:23.163

> 做任何提议来检查这些断言是否成立

没有实现效果推断或效果类型的 C++ 编译器，因此充其量只能支持对纯度的临时检查。

关于效果类型的背景，我建议 Ben Lippmeier 的博士论文，*[Type Inference and Optimization for an Impure World](http://www.cse.unsw.edu.au/~benl/papers/thesis/lippmeier-impure-world.pdf)*

# java - java的split string方法也可以返回带有分隔符的数组

> ID：14032850
> 
> 赞同：1
> 
> 时间：2012-12-25T17:58:19.570
> 
> 标签：java, string, split

当我们`String.Split()`在一个字符串上使用方法在java中进行拆分时，它的工作原理如下：

```
String s = "hello my dear";
String[] ss = s.split("[ ]"); 
```

在这种情况下，数组`ss`包含`[Hello, my, dear]`但空格（它们是分隔符）不是数组的一部分。

是否有某种方式可以使分隔符成为使用 Java 中字符串类的 split 方法生成的数组的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:01:40.583

你可以这样做： -

```
"hello my dear".split("(?<=[ ])"); 
```

它在空格之后拆分为一个空字符串。这将为您提供包含以下元素的数组：-

```
hello_
my_
dear 
```

`_`是空间的意思。

* * *

如果你希望你的分隔符是单独的数组元素，你可以这样做： -

```
System.out.println(Arrays.toString("a+b=c".split("(?<=[+=])|(?=[+=])"))); 
```

现在，这将拆分为空字符串，该字符串要么紧随其后，要么紧随`+ or =`其后`+ or =`。因此，针对上述情况执行拆分的所有位置都是这样的：-

```
a + b = c
 ^ ^ ^ ^    <-- Empty strings before and after your pattern - `[+=]` 
```

因此，您的数组中有 5 个元素。

**输出： -**

```
[a, +, b, =, c] 
```

但是您使用了错误的工具来解析数学表达式。您不应该为此使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:00:55.517

使用[StringTokenizer 的](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String,%20boolean%29)重载构造函数：

```
String s = "hello my dear";
StringTokenizer st = new StringTokenizer(s, " ", true);
while(st.hasMoreTokens()){
    System.out.println(st.nextToken());
} 
```

输出：

```
hello

my

dear 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:11:51.317

您可以在单词边界上进行拆分。

```
 String[] ts = "hello my dear".split("\\b");
    System.out.println(Arrays.toString(ts));

[, hello,  , my,  , dear] 
```

* * *

***或者***

```
public String[] getParts(String s) {
    List<String> parts = new ArrayList<String>();
    Pattern pattern = Pattern.compile("(\\w+|\\W)");
    Matcher m = pattern.matcher(s);
    while (m.find()) {
        parts.add(m.group());
    }
    return parts.toArray(new String[parts.size()]);
} 
```

这与每个查找单词`\\w+`（小 w）或非单词字符`\\W`（大写 W）匹配。

# php - 从另一个没有路径结构的目录中压缩 PHP 中的文件

> ID：14032851
> 
> 赞同：2
> 
> 时间：2012-12-25T17:58:34.117
> 
> 标签：php, zip, relative-path

我正在尝试将两个文件压缩到另一个目录中，而不压缩文件夹层次结构。

该事件由按下按钮触发，这会导致 Javascript 使用 AJAX 向 PHP 发送信息。PHP 调用 Perl 脚本（利用 Perl 的 XLSX 编写器模块和 PHP 有点糟糕的事实，但我离题了......），它将文件放在层次结构的几个文件夹中。相关代码如下所示。

```
system("createFiles.pl -ids ${rows} -test ${test} -path ${path}",$retVal);

`zip ${path}/{$test}_both.zip ${path}/${test}.csv ${path}/${test}.xlsx`;
`zip ${path}/{$test}_csv.zip  ${path}/${test}.csv`; 
```

问题是 zip 文件的`${path}`层次结构必须在文件显示之前进行导航，如下所示：

## ![带有层次结构的 Zip](../Images/b4aeb9b7964cfa4dab50ee945cfca991.png)

我试过这样做（在每个 zip 命令之前 cd）：

```
system("createFiles.pl -ids ${rows} -test ${test} -path ${path}",$retVal);

`cd ${path}; zip {$test}_both.zip ${test}.csv ${test}.xlsx`;
`cd ${path}; zip {$test}_csv.zip  ${test}.csv`; 
```

它有效，但它似乎是一个黑客。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T23:08:03.800

如果您使用 PHP 5 >= 5.2.0，您可以使用[ZipArchive](http://php.net/manual/en/class.ziparchive.php)类。然后，您可以使用完整路径作为源文件名，只使用文件名作为目标名称。像这样：

```
$zip = new ZipArchive;
if($zip->open("{$test}_both.zip", ZIPARCHIVE::OVERWRITE) === true) {
    // Add the files here with full path as source, short name as target
    $zip->addFile("${path}/${test}.csv", "${test}.csv");
    $zip->addFile("${path}/${test}.xlsx", "${test}.xlsx");
    $zip->close();
} else {
    die("Zip creation failed.");
}

// Same for the second archive
$zip2 = new ZipArchive;
if($zip2->open("{$test}_csv.zip", ZIPARCHIVE::OVERWRITE) === true) {
    // Add the file here with full path as source, short name as target
    $zip2->addFile("${path}/${test}.csv", "${test}.csv");
    $zip2->close();
} else {
    die("Zip creation failed.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T23:24:21.473

Oldskool 的 ZipArchive 答案很好。我用过 ZipArchive，它可以工作。但是，我推荐使用[PclZip](http://www.phpconcept.net/pclzip/)，因为它更通用（例如，允许在不压缩的情况下进行压缩，非常适合压缩已经压缩的图像，速度更快）。PclZip 支持[PCLZIP_OPT_REMOVE_ALL_PATH](http://www.phpconcept.net/pclzip/user-guide/30)选项来删除所有文件路径。例如

```
$zip = new PclZip("$path/{$test}_both.zip");
$files = array("$path/$test.csv", "$path/$test.xlsx");

// create the Zip archive, without paths or compression (images are already compressed)
$properties = $zip->create($files, PCLZIP_OPT_REMOVE_ALL_PATH);
if (!is_array($properties)) {
    die($zip->errorInfo(true));
} 
```

# php - PHP通过引用获取数组属性

> ID：14032853
> 
> 赞同：0
> 
> 时间：2012-12-25T17:59:13.673
> 
> 标签：php, arrays, variables, reference

> **可能重复：**
> [根据父 ID 值将数组从一维转换为多维](https://stackoverflow.com/questions/7767961/converting-an-array-from-one-to-multi-dimensional-based-on-parent-id-values)

我正在尝试将一堆类别安排到他们的层次结构中。我有一个类别的 SQL 表，它只存储它们的`cid`（类别 id）`title`、、`parent`（父 id）。

它还没有完成，但基本上我被困在如果一个类别有一个父类别，那么我试图通过引用来获取它（参见 **NOT WORKING** 行）。我想更新 $return 数组以反映更改

```
//  returns categories in their correct heierarchy
function organize_categories( $array ) {
  $return = array();

  //  instead of retyping the same thing over and over again
  function create_record( $data ) {
    return array(
          'title' => $data->title,
          'children' => array()
    );
  }

  //  go over each row
  foreach( $array as $id => $cat ) {

    //  if it doesn't have a parent (AKA 0)
    if( !$cat->parent ) {

      $return[ $id ] = create_record( $cat );

    } else {

      //  get reference of parent **NOT WORKING**
      $parent =& search_category( $cat->parent , $return );

      if( $parent )
        $parent[ 'children' ][ $id ] = create_record( $cat );
      else
        $return[ $id ] = create_record( $cat );

    }
  }

  return $return;
}

function search_category( $pid , $array ) {

  //  if found within the immediate children
  if( isset( $array[ $pid ] ) ) return $array[ $pid ];

  //  otherwise dig deeper and recurse
  else {
    foreach( $array as $id => $arr ) {
      $find =& search_category( $pid , $arr[ 'children' ] );
      if( $find ) return $find;
    }
  }

  return FALSE;
} 
```

**编辑：** 如果有人也遇到这个问题，这里是完整的递归解决方案

```
function &search_category( $pid , &$array ) {

  //  if found within the immediate children
  if( isset( $array[ $pid ] ) ) return $array[ $pid ];

  //  otherwise dig deeper and recurse
  else {
    foreach( $array as &$arr ) {
      $find =& search_category( $pid , $arr[ 'children' ] );
      if( $find ) return $find;
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:12:23.957

要[通过引用返回](http://php.net/language.references.return)工作，您需要做两件事：

1.  `&`在函数名前添加
2.  返回一个变量。你不能退货`FALSE`：

`$array`在您的特定情况下，您可能还希望在将其作为参数传递时提供参考，因此`&`也要在参数前面添加：

```
function search_category( $pid , $array ) {
     #### WRONG ####           #### WRONG ####

  //  if found within the immediate children
  if( isset( $array[ $pid ] ) ) return $array[ $pid ];
                                ### CORRECT! ###

  //  otherwise dig deeper and recurse
  else {
    foreach( $array as $id => $arr ) {
      $find =& search_category( $pid , $arr[ 'children' ] );
       ### CORRECT! ###
      if( $find ) return $find;
                  ### CORRECT! ###
    }
  }

  return FALSE;
  #### WRONG ####
} 
```

除此之外，您的代码看起来非常复杂。我敢打赌这可以更容易解决，这也可能使您更容易处理实际参考。只是说。通常你需要做的就是通过孩子ID来引用，因为那些必须父母的孩子会把孩子ID作为他们的父母ID，不是这样吗;）

因此，您需要做的就是通过 ID 键入数组并引用它。其余的由 PHP 完成。这就是引用的实际用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:09:05.797

你需要让你的函数通过引用返回，并且由于你是递归的，你还需要通过引用传递你的数组：

```
function &search_category( $pid , &$array ) {
         ^                        ^ 
```

我没有梳理您的代码，因此可能存在其他问题，但这是一个很好的起点。

# java - 从 1.0.5 更新到 1.1.0 后，OCPsoft 重写规则不再有效

> ID：14032854
> 
> 赞同：2
> 
> 时间：2012-12-25T17:59:21.067
> 
> 标签：java, tomcat, jakarta-ee, url-rewriting, ocpsoft-rewrite

将[OCPsoft Rewrite](http://ocpsoft.org/rewrite/)从版本 1.0.5.Final 更新到 1.1.0.Final 时，以下规则不再起作用，我不知道如何解决：

```
.addRule(
    Join.path("/{i}/{d}")
        .where("i").matches("[-_a-zA-Z0-9~*]{8}")
        .where("d").matches("[-_a-zA-Z0-9~*]{32}")
        .to("/resources/html/user/doSomething.html?i={i}&d={d}")
) 
```

在重写[更改日志](https://github.com/ocpsoft/rewrite/blob/master/CHANGELOG.md)中，有一点可以帮助您帮助我：

> 配置字符串现在是文字。正则表达式必须通过 > 参数进行配置，例如：`.defineRule().when(Path.matches("/{*}").where("*").matches(".*"))`

我得到的例外是以下一个：

```
Exception starting filter OCPsoft Rewrite Filter
    java.lang.NullPointerException
        at org.ocpsoft.rewrite.servlet.config.rule.Join.where(Join.java:199)
        at org.ocpsoft.rewrite.servlet.config.rule.Join.where(Join.java:47)
        at com.myapp.util.RewriteConfigurationProvider.getConfiguration(RewriteConfigurationProvider.java:39)
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:27:55.213

以下是诀窍，我只需要重新排序连接子句：

```
.addRule(
    Join.path("/{i}/{d}")
        .to("/resources/html/user/doSomething.html")
        .where("i").matches("[-_a-zA-Z0-9~*]{8}")
        .where("d").matches("[-_a-zA-Z0-9~*]{32}")
        .withRequestBinding();
) 
```

感谢林肯，他发现了这一点并在 Rewrite 支持论坛上回答了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:11:35.383

`{i}`嗯.. 看起来确实像一个错误，我会尝试重现它，但您不需要重新定义`{d}`目标 URL。如果您使用请求绑定，Join 将自动为您处理，如下所示：

```
.addRule(
   Join.path("/{i}/{d}")
    .where("i").matches("[-_a-zA-Z0-9~*]{8}")
    .where("d").matches("[-_a-zA-Z0-9~*]{32}")
    .to("/resources/html/user/doSomething.html").withRequestBinding();
) 
```

我猜如果你这样做，你的问题就会消失。`.withInboundCorrection()`如果您想将对旧`.html`URL 的请求重定向到新 URL，也可以使用。

如果您对此仍有疑问，请在支持论坛上发帖，我们会解决的 :)

对不起，你遇到了麻烦，希望不会再有麻烦了:)

# javascript - 混搭：选择框/禁用输入/从数据库中获取信息

> ID：14032856
> 
> 赞同：2
> 
> 时间：2012-12-25T17:59:29.413
> 
> 标签：javascript, python, ajax

我正在创建一个表单，人们可以在其中选择一个新团队，然后输入其位置，或者如果他们从列表中选择一个团队，我希望禁用输入 - 并在输入框中给出所选团队的位置. 到目前为止，这是我的代码。它不起作用。:(

```
<select id="chooseTeam" name="chooseTeam" data-placeholder="Select Team">
    <option></option>
    {% for team in teams %}
    <option>{{team.name}}</option>
    {% endfor %}
    <option>New Team</option>
</select>

<input type="text" id="input_location" name="input_location"/> 
```

在一个单独的 JS 文件中：

```
$(document).ready(function() {
    $('#chooseTeam').on('blur', function() {
        if (form.chooseTeam.value != "New Team" && form.chooseTeam.value != "Select Team") {
            $("#input_location").html("{{team.location}}");
            document.getElementById("input_location").disabled = true;
        }
    });
}); 
```

* * *

**小更新**

显然，为此需要 AJAX。我是 Javascript 的新手（3 天前），所以我还不知道 AJAX 是如何工作的，但我现在正在谷歌上搜索它以试图弄清楚。

* * *

哦，祝大家圣诞快乐！

“#code-on-christmas”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:10:57.790

看来您正在使用 Django 和 jQuery。真的吗？目前我无法为您提供完整的详细答案，但下一行中的代码无法工作，因为您正在混合客户端和服务器端代码。

```
$("#input_location").html("{{team.location}}"); 
```

`{{team.location}}`Django 无法评估该表达式，因为它仅存在于浏览器的客户端。如果您希望 Django 评估在客户端选择的内容，您应该使用[`$.ajax()`](http://api.jquery.com/jQuery.ajax/).

另外，为什么不对所有代码使用 jQuery 选择器呢？做这样的事情：

```
$(document).ready(function() {
    $('#chooseTeam').on('blur', function() {
        var currentTeam = $(this).val();
        if (!$.inArray(currentTeam, ['New Team', 'Select Team'])) {
            $("#input_location").attr('disabled', 'disabled');
        }
    });
}); 
```

# sql - 清除 SQL 表

> ID：14032857
> 
> 赞同：2
> 
> 时间：2012-12-25T17:59:44.707
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个用于记录目的的 SQL 表（表中有十万条记录）。我需要清除表（备份数据并需要清除表数据）。

有没有一种标准的方法可以让我自动化它。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:04:50.677

您可以在 SQL Server Management Studio 中执行此操作，方法是：

```
right clicking Database > Tasks > Generate Script 
```

然后，您可以选择要编写脚本的表，还可以选择包含任何关联的对象，例如约束和索引。

附上一张图片，它会给你一步一步的过程，

[image_bkp_procedure](https://i.imgur.com/y6ZCL.jpg)

PFB stackoverflow 链接，它将让您对此有更多了解，

[表级备份](https://stackoverflow.com/questions/680552/table-level-backup)

以及您的自动化要求，

您可以下载 bcp 实用程序，该实用程序在 Microsoft SQL Server 实例和用户指定格式的数据文件之间复制数据。要导出的示例语法，

```
bcp "select * from [MyDatabase].dbo.Customer " queryout "Customer.bcp" -N -S localhost -T -E 
```

您可以使用任何调度机制（UNIX 等）自动执行此查询

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T06:09:16.383

```
Simply we can create a job that runs once in a month
--> That backups data in another table like archive table
--> Then deletes data in the main table
Its primitive partitioning I guess, this way it will be more flexible when you need to select data from the past deleted one i.e. now on archive table where you have backed up 
```

# php - 重新抛出异常不会被捕获

> ID：14032858
> 
> 赞同：1
> 
> 时间：2012-12-25T18:00:00.003
> 
> 标签：php, exception

我正在构建一个自定义异常类来管理所有异常：

```
class MyExceptions extends Exception
{
    public function __construct($message = 'Unkown errror', $code = -1, Exception $previous = null) {
        echo 'init!';
        parent::__construct($message, $code, $previous);
    }   
} 
```

现在，当 PDOException 发生时，我想将其重新抛出到 MyExceptions：

```
class myDB
{
    private $db;

    public function dbConnect() {
        try {
            $this->db = new PDO('mysql:host=localhost;dbname=db;charset=utf8', 'user', 'pass');
        }
        catch (PDOException $e) {
            throw new MyExceptions($e);
        }
        /* Updated */
        catch (MyExceptions $e) {
            echo 'caught!';             
        }
    }
} 
```

问题是当数据库连接异常出现时，屏幕上出现以下致命错误：

```
init!
Fatal error: Uncaught exception 'MyExceptions' with message... 
```

因此，尽管调用了 MyExceptions __construct()（请参见显示的“init！”），但不会捕获异常。我读到的每一点资源都指向我的确切实现，我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:57:37.053

你需要

```
try {
   try {
      $this->db = new PDO('mysql:host=localhost;dbname=db;charset=utf8', 'user', 'pass');
   } catch (PDOException $e) {
        throw new MyExceptions($e);
   }
} catch (MyExceptions $f) {
    echo 'caught!';             
} 
```

顺序 catch 块用于 try 中抛出的不同类型的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:06:27.227

你在扔它：

```
throw new MyExceptions($e);
^^^^^ 
```

然后你没有抓住它。那么你想知道什么？

此外，您应该在第三个位置（对于上一个）而不是第一个位置（对于消息）添加上一个异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T18:57:56.023

它不会遍历所有的 catch 块。只有第一个匹配。如果您随后在 catch 块中抛出另一个异常，则必须在第一个周围的另一个 try 块中捕获它。

# vb.net - 如何读取另一个程序的 TStringGrid 控件的单元格？

> ID：14032860
> 
> 赞同：-4
> 
> 时间：2012-12-25T18:00:05.073
> 
> 标签：vb.net, delphi

如何从其他应用程序的 gridview 中提取项目？控件的类名是`TStringGrid`。

我可以使用这些声明来获取`TStringGrid`窗口的句柄：`FindWindowEx`

```
<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindow( _
 ByVal lpClassName As String, _
 ByVal lpWindowName As String) As IntPtr
End Function
<DllImport("user32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Private Shared Function FindWindowEx(ByVal parentHandle As IntPtr, _
                  ByVal childAfter As IntPtr, _
                  ByVal lclassName As String, _
                  ByVal windowTitle As String) As IntPtr
End Function 
```

代码：

```
 Dim TheMainForm As Integer = FindWindow("form", "fname")
    Dim GV As Integer = FindWindowEx(TheMainForm, 0, "TStringGrid", "") 
```

如何从 GV（TStringGrid 句柄）中提取项目？

（我必须在明天之前完成这个项目。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:24:52.280

Delphi 字符串网格不是 Windows 控件。这是一个自定义的 Delphi 控件。因此，它不会响应要求其内容的 Windows 消息。如果没有应用程序的源代码，您将需要对应用程序进行逆向工程以确定内容的存储位置。

实际上，最有效的方法是将线程注入目标应用程序。然后该线程可以完成读取信息的工作，然后可以使用一些 IPC 将数据返回到您的 VB 进程。

为了做到这一点，理想情况下，您需要：

1.  了解用于构建应用程序的 Delphi 的确切版本。
2.  深入了解 Delphi 编译器和 RTL。
3.  Delphi VCL 源代码为`TStringGrid`.

我不知道您如何能够将您的阅读线程与 Delphi 应用程序同步。

无论如何，虽然您所要求的在理论上是可能的，但实际上它是完全不切实际的。明智的解决方案是要求 Delphi 程序的作者提供一个自动化接口。

# c++ - 在 Linux 中获取自纪元以来的秒数

> ID：14032865
> 
> 赞同：15
> 
> 时间：2012-12-25T18:01:01.133
> 
> 标签：c++, linux, windows, time

对于我使用的 Windows，是否有跨平台解决方案可以获得自纪元以来的秒数

```
long long NativesGetTimeInSeconds()
{
    return time (NULL);
} 
```

但是如何上 Linux 呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-25T18:02:58.977

你已经在使用它了：（[`std::time(0)`](http://en.cppreference.com/w/cpp/chrono/c/time)别忘了`#include <ctime>`）。但是，`std::time`标准中未指定是否实际返回自纪元以来的时间（[C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，由 C++ 标准引用）：

> ## 7.27.2.4`time`功能
> 
> ### 概要
> 
> ```
> #include <time.h>
> time_t time(time_t *timer); 
> ```
> 
> ### 描述
> 
> time 函数确定当前的日历时间。 ***该值的编码未指定。***[强调我的]

对于 C++，C++11 及更高版本提供[`time_since_epoch`](http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch). 然而，在 C++20 之前，时代[`std::chrono::system_clock`](https://en.cppreference.com/w/cpp/chrono/system_clock)是未指定的，因此在以前的标准中可能是不可移植的。

尽管如此，在 Linux 上，`std::chrono::system_clock`即使在 C++11、C++14 和 C++17 中，通常也会使用 Unix Time，因此您可以使用以下代码：

```
#include <chrono>

// make the decltype slightly easier to the eye
using seconds_t = std::chrono::seconds;

// return the same type as seconds.count() below does.
// note: C++14 makes this a lot easier.
decltype(seconds_t().count()) get_seconds_since_epoch()
{
    // get the current time
    const auto now     = std::chrono::system_clock::now();

    // transform the time into a duration since the epoch
    const auto epoch   = now.time_since_epoch();

    // cast the duration into seconds
    const auto seconds = std::chrono::duration_cast<std::chrono::seconds>(epoch);

    // return the number of seconds
    return seconds.count();
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-25T18:27:17.193

在 C.

```
time(NULL); 
```

在 C++ 中。

```
std::time(0); 
```

而时间的返回值为：**time_t** not *long long*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T18:12:46.760

获取时间的原生 Linux 函数是`gettimeofday()`[还有一些其他的风格]，但它以秒和纳秒为单位获取时间，这超出了你的需要，所以我建议你继续使用`time()`. [当然，`time()`是通过调用`gettimeofday()`某个地方来实现的——但我看不出有两段不同的代码做同样的事情的好处——如果你想要的话，你会使用`GetSystemTime()`或类似的东西Windows [不确定这是正确的名称，我已经有一段时间没有在 Windows 上编程了]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-22T22:39:10.293

**简单、便携和适当的方法**

```
#include <ctime>

long CurrentTimeInSeconds()
{
     return (long)std::time(0); //Returns UTC in Seconds
} 
```

# django - django-taggit-autocomplete 和南

> ID：14032868
> 
> 赞同：3
> 
> 时间：2012-12-25T18:02:18.153
> 
> 标签：django, django-south, django-taggit

我使用 django-taggit-autocomplete，但是在进行方案迁移时，出现错误

```
 ! Cannot freeze field 'main.hotels.tags'
 ! (this field has class taggit_autocomplete_modified.managers.TaggableManagerAutocomplete)
 ! Cannot freeze field 'main.rooms.tags'
 ! (this field has class taggit_autocomplete_modified.managers.TaggableManagerAutocomplete)

 ! South cannot introspect some fields; this is probably because they are custom
 ! fields. If they worked in 0.6 or below, this is because we have removed the
 ! models parser (it often broke things).
 ! To fix this, read http://south.aeracode.org/wiki/MyFieldsDontWork 
```

所以我搜索了一下，发现 django-taggit-autocomplete-modified 应该可以解决问题，但它没有。

如何解决它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T23:59:59.863

最后我解决了将以下代码添加到models.py的问题

```
from south.modelsinspector import add_ignored_fields
add_ignored_fields(["^taggit_autocomplete\.managers"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T13:55:33.367

以下是@Douglish 自己的答案的一些背景信息——取自[South 的文档](http://south.readthedocs.org/en/latest/customfields.html#field-name-patterns)：

> 如果您知道不需要某些字段，则可以完全忽略它们。例如，django-taggit 有一个实际上显示为假字段的管理器（这使得使用它的 API 更好，但让 South 困惑不已）。我们附带的 django-taggit 模块包含以下规则以忽略它：
> 
> ```
> from south.modelsinspector import add_ignored_fields
> add_ignored_fields(["^taggit\.managers"]) 
> ```

# javascript - 检查值是否为空

> ID：14032874
> 
> 赞同：1
> 
> 时间：2012-12-25T18:02:45.613
> 
> 标签：javascript, jquery

```
var isempty = 0;
collegeArray = $(form).find(".cname").serializeArray();
for (var i = 0; i < collegeArray.length; i++) {
    alert(collegeArray[i].value);
    if (collegeArray[i].value = "") {
        isempty = isempty + 1;
    }
}

if (isempty == 0) {
    container.innerHTML = "";
    document.getElementById('survey').style.visibility = 'visible';
    generateSurvey(collegeArray);
} else {
    alert("Please fill out all fields!");
} 
```

我正在尝试检查一组字段是否至少有一个空字段。如果有空字段并且应该弹出警报，如果没有，它应该做其他事情。我将输入字段序列化为一个数组，然后循环遍历它。当我运行它时，它似乎总是认为即使有一些空字段也没有。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:04:14.290

您正在使用`=`，但您需要`==`：

```
 if(collegeArray[i].value == "") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:05:39.907

`=`是*赋值*运算符。您的意思是使用*比较运算符*，因为Pointy`==`准时指出。

# c# - 公开自托管服务时以编程方式从配置文件中读取 WCF 行为元素

> ID：14032875
> 
> 赞同：6
> 
> 时间：2012-12-25T18:02:50.067
> 
> 标签：c#, .net, wcf, configuration, self-hosting

我的 app.config 中有这个配置：

```
 </binding>
  </basicHttpBinding>
</bindings>

<behaviors>
  <serviceBehaviors>
    <behavior name="myBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我想从我的桌面应用程序中以编程方式公开此服务：

我定义了主机实例：

```
ServiceHost host = new ServiceHost(typeof(MyType), new Uri("http://" + hostName + ":" + port + "/MyName")); 
```

然后我添加端点及其绑定：

```
var binding = new BasicHttpBinding("myBinding");
host.AddServiceEndpoint(typeof(IMyInterface), binding, "MyName"); 
```

**现在，我想用一些从配置文件中读取名为*myBehavior*的行为的代码替换以下代码，而不是对行为选项进行硬编码。**

```
ServiceMetadataBehavior smb = new ServiceMetadataBehavior() { HttpGetEnabled = true };    
host.Description.Behaviors.Add(smb);   
// Enable exeption details
ServiceDebugBehavior sdb = host.Description.Behaviors.Find<ServiceDebugBehavior>();
sdb.IncludeExceptionDetailInFaults = true; 
```

然后，我可以打开主机。

```
host.Open(); 
```

*** 编辑 ***

**使用配置文件配置服务**

您不需要这种方式，您应该让主机自动从配置文件中获取其配置，而不是手动提供它们，阅读[这篇文章（使用配置文件配置服务）](http://msdn.microsoft.com/en-us/library/ms733932.aspx)，它会帮助你，我已经将我的服务托管在C# 中的一行，配置中的几行。

[这是关于（在代码中配置 WCF 服务）的第二篇文章](http://msdn.microsoft.com/en-us/library/hh205277.aspx)，我的错是我试图混合两种方式！

我将添加此作为答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T22:26:04.350

首先，您需要使用以下任一方法打开配置文件

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

或者

```
var map = new ExeConfigurationFileMap();
map.ExeConfigFilename = "app.config";
var config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None); 
```

然后你阅读行为：

```
var bindings = BindingsSection.GetSection(config);
var group = ServiceModelSectionGroup.GetSectionGroup(config);
foreach (var behavior in group.Behaviors.ServiceBehaviors)
{
    Console.WriteLine ("BEHAVIOR: {0}", behavior);
} 
```

请注意，这些是 type `System.ServiceModel.Configuration.ServiceBehaviorElement`，所以还不是您想要的。

如果您不介意使用私有 API，可以`BehaviorExtensionElement.CreateBehavior()`通过反射调用受保护的方法：

```
foreach (BehaviorExtensionElement bxe in behavior)
{
    var createBeh = typeof(BehaviorExtensionElement).GetMethod(
        "CreateBehavior", BindingFlags.Instance | BindingFlags.NonPublic);
    IServiceBehavior b = (IServiceBehavior)createBeh.Invoke(bxe, new object[0]);
    Console.WriteLine("BEHAVIOR: {0}", b);
    host.Description.Behaviors.Add (b);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T16:43:45.647

**使用配置文件配置服务**

您不需要这种方式，您应该让主机自动从配置文件中获取其配置，而不是手动提供它们，阅读[这篇文章（使用配置文件配置服务）](http://msdn.microsoft.com/en-us/library/ms733932.aspx)，它会帮助你，我已经将我的服务托管在C# 中的一行，配置中的几行。

[这是关于（在代码中配置 WCF 服务）的第二篇文章](http://msdn.microsoft.com/en-us/library/hh205277.aspx)，我的错是我试图混合两种方式！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T12:50:33.193

虽然这是一个老问题，但我在其他地方找不到我需要的东西时遇到了问题，所以为了将来参考这里是我的解决方案。

```
var behaviorSection = ConfigurationManager.GetSection("system.serviceModel/behaviors") as BehaviorsSection;
if (behaviorSection != null)
{
                // for each behavior, check for client and server certificates
    foreach (EndpointBehaviorElement behavior in behaviorSection.EndpointBehaviors)
    {
        foreach (PropertyInformation pi in behavior.ElementInformation.Properties)
        {
            if (pi.Type == typeof(ClientCredentialsElement))
            {
                var clientCredentials = pi.Value as ClientCredentialsElement;
                var clientCert = clientCredentials.ClientCertificate;
                            // TODO: Add code...
            }
        }
    }
} 
```

`ConfigurationManager.Open...Configuration()`不适用于 Web 项目，因此手动获取部分并投射它更简单。

如果您真的坚持让`System.ServiceModel`为您读取配置，则可以执行以下操作：

```
ExeConfigurationFileMap map = new ExeConfigurationFileMap();
map.ExeConfigFilename = System.IO.Path.Combine(HttpContext.Current.Server.MapPath("~"), "web.config"); // the root web.config  
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);
var group = ServiceModelSectionGroup.GetSectionGroup(config);

foreach (EndpointBehaviorElement item in group.Behaviors.EndpointBehaviors)
{
    // TODO: add code...
} 
```

第二种方法使用`HttpContext.Current`，众所周知`HttpContext.Current`，在进行单元测试时很糟糕。

# command-line - 7z命令行中的跨平台感叹号

> ID：14032884
> 
> 赞同：0
> 
> 时间：2012-12-25T18:04:32.123
> 
> 标签：command-line, cross-platform

我的脚本需要使用以下命令：

```
`{archiver_path}7za a -xr!*.tmp myarchive.7z myfolder` 
```

它需要在windows和linux上运行。

在 linux 上它会因“未找到事件”消息而崩溃，所以我将其修改为：

```
`{archiver_path}7za a -xr\!*.tmp myarchive.7z myfolder` 
```

但如果我在 Windows 系统上运行它可能不会以这种方式工作？

如果没有，是否有可能以某种方式使其跨平台？

更新：我试图找出是否可以在不检查我在我的脚本语言中使用哪个平台的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:25:01.030

我建议检查这个链接：[http](http://www.ruby-forum.com/topic/90255) ://www.ruby-forum.com/topic/90255 然后做这样的事情......

```
if(system="WIN_32")
{
    `{archiver_path}7za a -xr!*.tmp myarchive.7z myfolder`
}
if(system="LINUX")
{
    `{archiver_path}7za a -xr\!*.tmp myarchive.7z myfolder`
} 
```

顺便说一句，那不是真正的代码.. :P 它只是一个例子 :D

# java - 代码有时有效，但有时无效（内存或线程问题）

> ID：14032885
> 
> 赞同：1
> 
> 时间：2012-12-25T18:04:36.057
> 
> 标签：java, multithreading, swing

我遇到了这个奇怪的问题，我不确定是什么原因造成的。有时这个问题甚至不存在。从我的猜测来看，这是一个 Java 内存问题或某种线程问题。

我有一个`Ship`和船射击`Bullets`如果我按住`Space`键船射击子弹。我将子弹设置为每 200 毫秒发射一次。有时他们射击得很好并且以相同的速度移动！其他时候，他们射击他们以不同的速度移动。什么可能导致这种情况？

```
package JGame.Actions;

import JGame.GameObject.GameObject;
import javax.swing.AbstractAction;

public class MoveAction extends Action implements Runnable{

    protected GameObject obj;
    protected int endX = 0, endY = 0;
    protected int moveAmount = 0;
    protected Thread thread;

    public void moveToY(GameObject obj, int y, int amount, AbstractAction complete){
        this.obj = obj;
        this.endY = y;
        this.moveAmount = amount;
        this.complete = complete;
        thread = new Thread(this);
        thread.start();
    }

    public void run(){
        try{
            boolean run = true;
            while(run){
                int objY = obj.getY();
                if(objY > this.endY){
                    obj.setY(obj.getY() - 1);
                }else if(objY < this.endY){
                    obj.setY(obj.getY() + 1);
                }else{
                    run = false;
                    this.actionComplete();
                }
                thread.sleep(moveAmount);
            }
        }catch(Exception e){
        }
    }
} 
```

动作完成：

```
package JGame.Actions;

import javax.swing.AbstractAction;

public class Action {
    protected boolean actionComplete = false;
    protected AbstractAction complete;

    public void actionComplete(){
        complete.actionPerformed(null);
    }
} 
```

在我的代码中，我称`moveToY`这是一个非常简单的调用，但有时`Bullets`以不同的速度移动（错误），而其他人则以相同的速度移动（正确）。我不知道提到子弹移动时有时会减慢一两秒钟然后加速到正确的速度是否会有所帮助。

## 编辑：主线程

以下是我与paintComponent的主线程

```
@Override
public void run(){
    try{
        while(true){
            // Check for key press events
            Iterator actions = KeyboardMap.map.entrySet().iterator();
            while(actions.hasNext()){
                Map.Entry ap = (Map.Entry)actions.next();
                Mapping mp = (Mapping)ap.getValue();
                if(mp.pressed){
                    mp.run();
                }
            }

            // Check for click mouse events
            Iterator actions2 = MouseMap.map.entrySet().iterator();
            while(actions2.hasNext()){
                Map.Entry ap = (Map.Entry)actions2.next();
                Mapping mp = (Mapping)ap.getValue();
                if(mp.pressed){
                    mp.run();
                }
            }

            for(GameObject go : gameObjects){
                if(!go.getLeaveScreen()){
                    int goWidth = go.getWidth();
                    int goHeight = go.getHeight();
                    int goX = go.getX();
                    int goY = go.getY();
                    int gameWidth = Game.width;
                    int gameHeight = Game.height;
                    if(goX + goWidth >= gameWidth){
                        go.setX(gameWidth - goWidth);
                    }
                    if(goX <= 0){
                        go.setX(0);
                    }
                    if(goY + goHeight >= gameHeight){
                        go.setY(gameHeight - goHeight);
                    }
                    if(goY <= 0){
                        go.setY(0);
                    }
                }
            }
            this.repaint();
            Thread.sleep(roomSpeed);
        }
    }catch(Exception e){
    }
}

public void paintComponent(Graphics g){
    try{
        g.drawImage(bg, 0, 0, this);
        for(int i = 0; i < gameObjects.size(); i++){
            GameObject go = gameObjects.get(i);
            g.drawImage(go.getSprite(), go.getX(), go.getY(), this);
        }
    }catch(Exception e){
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T18:15:24.297

好吧，我猜您有大量并发线程正在运行（一个通过移动子弹），并且您希望每个线程在精确的`moveAmount`毫秒后唤醒。您不能有这样的保证，因为线程调度程序允许每个线程一次运行一段时间，因此您可能会遇到故障。

另一个问题是您似乎在事件调度线程之外对 Swing 组件执行修改，这显然是[Swing 的线程策略](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html#threading)所禁止的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:23:21.597

更改代码中最重要的事情是**不要使用`Thread.sleep`**. 使用**Swing Timer**，您将安排它每`moveAmount`毫秒执行一次，作为奖励，代码在 Event Dispatch Thread 上执行，您无需付出任何努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:20:43.230

了解多线程的使用以及如何正确制作游戏的处理结构。对于您的情况，最重要的信息：您应该只使用一个线程来处理/移动所有子弹，然后渲染它们。

# objective-c - 测试模态启动时如何使用presentedViewController

> ID：14032887
> 
> 赞同：0
> 
> 时间：2012-12-25T18:05:00.947
> 
> 标签：objective-c, ios, ocunit

我正在对我的一个视图控制器进行单元测试，并想确认当一个逻辑分支被击中时，我弹出的模态视图控制器存在：

* * *

## `viewDidLoad`

```
MWLoginViewController *loginController = [[MWLoginViewController alloc] init];
[self presentModalViewController:loginController animated:YES]; 
```

当我放置断点时，代码在调试器中被命中。

现在我如何测试它是否已启动？

* * *

## 我在尝试：

```
BOOL wasLoginViewController = [[mainVcSUT presentedViewController] isMemberOfClass:          [MWLoginViewController class]];

[Assert isTrue:wasLoginViewController];

NSLog(@"presented VC was: %@", [[mainVcSUT presentedViewController] class]); 
```

告诉`NSLog`我视图控制器是.`null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:11:07.757

> MWLoginViewController *loginController = [[MWLoginViewController alloc] init];

您只是在创建一个对象，它有自己的视图吗？从情节提要中创建视图控制器 initwithnibname 或 init ，然后检查它

另外，您不应该从 viewDidLoad: 方法加载另一个视图...

# linux - linux write()：它是否尝试写入尽可能多的字节？

> ID：14032888
> 
> 赞同：1
> 
> 时间：2012-12-25T18:05:06.147
> 
> 标签：linux, network-programming

如果我`write`以这种方式使用：套接字`write (fd, buf, 10000000 /* 10MB */)`在哪里`fd`并使用阻塞 I/O，内核是否会尝试刷新尽可能多的字节，以便仅一次调用就足够了？还是我要`write`根据它的返回值调用几次？如果发生这种情况，是否意味着有问题`fd`？

============================== 已编辑=================== ==============

感谢所有的答案。此外，如果我放入`fd`并且`poll`它成功返回`POLLOUT`，那么调用`write`不能被阻止并写入所有数据，除非出现问题`fd`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:11:21.147

在阻塞模式下，[write(2)](http://linux.die.net/man/2/write)仅在写入指定数量的字节时才会返回。如果它不能写它会等待。

在非阻塞 ( `O_NONBLOCK`) 模式下，它不会等待。到时候就会回来的。如果它可以编写所有这些，那将是成功的，否则它将相应地设置 errno。然后你检查它`errno`是否`EWOULDBLOCK`或者`EAGAIN`你必须调用相同的`write`agian。

从手册[`write(2)`](http://linux.die.net/man/2/write)

> 写入的字节数可能少于 count，例如，底层物理介质上的空间不足，或者遇到 RLIMIT_FSIZE 资源限制（参见 setrlimit(2)），或者调用被信号处理程序中断后写入少于 count 个字节。（另请参见管道 (7)。）

所以是的，可能有问题`fd`。

还要注意这一点

> write() 的成功返回并不能保证数据已提交到磁盘。事实上，在一些有缺陷的实现中，它甚至不能保证空间已经成功地保留给数据。唯一可以确定的方法是在完成所有数据的写入后调用 fsync(2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T03:53:33.117

/etc/sysctl.conf 在 Linux 中用于设置 TCP 协议的参数，这就是我假设您所说的套接字的意思。那里可能有很多参数，但是当您深入研究它时，基本上TCP缓冲区一次可以容纳的数据量是有限的。

因此，如果您尝试一次写入 10 MB 数据，则 write 将返回一个`ssize_t`等于该值的值。始终检查 write() 系统调用的返回值。如果系统允许 10MB，那么 write 将返回该值。

值为

```
net.core.wmem_max = [some number] 
```

如果您将某个数字更改为足够大以允许 10MB 的值，您可以写入那么多。不要那样做！您可能会导致其他问题。在你做任何事情之前研究设置。更改设置会降低性能。当心。

```
http://linux.die.net/man/7/tcp 
```

具有 TCP 设置的基本 C 信息。还要检查`/proc/sys/net`你的盒子。

还有一点 - TCP 是一个双向门，所以仅仅因为您一次可以发送数百万个字节并不意味着另一方可以读取它甚至处理它。您的套接字可能会阻塞一段时间。并且您的 write() 返回值可能比您希望的要小。

# windows - 覆盖第三方软件 GUI

> ID：14032895
> 
> 赞同：0
> 
> 时间：2012-12-25T18:05:48.800
> 
> 标签：windows, user-interface

假设我在装有 Windows 7 操作系统的计算机上安装了一些第三方程序。

当我运行它时，我看到以下内容：

![在此处输入图像描述](../Images/eb2bfa58a97fb5d18cd99f14b669bd66.png)

我对程序内部情况一无所知，我只想覆盖它的 GUI 以显示一些额外的信息（下一张图片上的红色项目）：

![在此处输入图像描述](../Images/fd0a35dbf21f929909ca2371de568922.png)

我想这是可能的，但我不知道用哪种方式挖掘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:50:54.997

您可以编写一个[Windows Hook](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589%28v=vs.85%29.aspx)。

过去我已经做过几次以修改相同第三方应用程序的行为。但那是很多年前的事了（Windows NT 和 Windows 95）。

# java - JDK 7u10 和 BlackBerry WebWorks SDK 安装问题

> ID：14032896
> 
> 赞同：0
> 
> 时间：2012-12-25T18:06:04.750
> 
> 标签：java, web-applications, blackberry

在过去的几天里，我一直在尝试安装 Oracle 提供的 JDK 7u10。安装此 JDK 后，我继续安装 BlackBerry WebWorks SDK，但我不断收到以下错误消息：“未安装 JDK 1.6 或更高版本”这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T00:23:33.037

创建环境变量 JAVA_HOME & JAVA_PATH 并将它们指向 32 位版本的 JDK bin 文件夹。

在 cmd 提示符下键入：set JA 检查变量是否具有正确的值。

javac -version 和 java -version 应该为您提供好的版本，32 位！

检查环境变量PATH是否没有64位路径的位置，如果有，更正它，

**在文件 BlackBerryWebWorksSDK.exe 上不要忘记启用与 Windows XP (sp3) 的兼容性。如果你运行的是 win8 或 7**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:18:09.643

问题是 JDK 需要安装为 32 位，即使在 64 位架构中也是如此。试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T21:03:54.527

JAVA_HOME 是否设置正确？你能从命令行运行“javac”吗？“javac -version”报告什么版本的java？

# c++ - 最长公共连续子序列 - 算法

> ID：14032903
> 
> 赞同：6
> 
> 时间：2012-12-25T18:07:49.980
> 
> 标签：c++, c, algorithm, sequences

我的问题很简单：是否有一个 O(n) 算法可以找到两个序列 A 和 B 之间最长的连续子序列？我搜索了它，但所有结果都是关于 LCS 问题的，这不是我想要的。

*注意：*如果您愿意提供任何示例代码，我们非常欢迎您这样做，但如果可以，请使用 C 或 C++。

*编辑：*这是一个例子：

```
A: { a, b, a, b, b, b, a }
B: { a, d, b, b, b, c, n }
longest common contiguous subsequence: { b, b, b } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:23:03.580

是的，你可以在线性时间内做到这一点。一种方法是为模式和文本构建后缀树并计算它们的交集。不过，我想不出一种不涉及后缀树或后缀数组的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:25:44.123

这就是你要找的：

[KMP算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm) `c` [实现](http://barnyard.syr.edu/quickies/kmp.c)

基本理论：

1.  [如何使用 C++ 查找最长公共子串](https://stackoverflow.com/questions/10248728/longest-common-substring)

2.  [http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T17:43:32.090

我不确定是否存在 O(n) 算法。这是一个 O(n*n) 的动态解决方案，也许对你有帮助。令 lcs_con[i][j] 表示以数组 A 中的元素 A_i 和数组 B 中的元素 B_j 结尾的最长公共连续子序列。然后我们可以得到以下等式：

```
lcs_con[i][j]=0 if i==0 or j==0
lcs_con[i][j]=0 if A_i != B_j
lcs_con[i][j]=lcs_con[i-1][j-1] if A_i==B_j 
```

我们可以在计算过程中记录lcs_con[i][j]的最大值和结束索引，得到最长的公共连续子序列。代码如下：

```
#include<iostream>

using namespace std;

int main()
{
    char A[7]={'a','b','a','b','b','b','a'};
    char B[7]={'a','d','b','b','b','c','n'};

    int lcs_con[8][8];    
    memset(lcs_con,0,8*8*sizeof(int));

    int result=-1;
    int x=-1;
    int y=-1;

    for(int i=1;i<=7;++i)
      for(int j=1;j<=7;++j)
      {
          if(A[i-1]==B[j-1])lcs_con[i][j]=lcs_con[i-1][j-1]+1;
          else lcs_con[i][j]=0;

          if(lcs_con[i][j]>result)
          {
               result=lcs_con[i][j];
               x=i;
               y=j;                   
          }
      }

   if(result==-1)cout<<"There are no common contiguous subsequence";
   else
   {
       cout<<"The longest common contiguous subsequence is:"<<endl;
       for(int i=x-result;i<x;i++)cout<<A[i];
       cout<<endl;
   }

   getchar();
   getchar();

   return 0;    
} 
```

希望能帮助到你！

# php - sql查询不拉记录

> ID：14032904
> 
> 赞同：0
> 
> 时间：2012-12-25T18:08:05.403
> 
> 标签：php, mysql, pdo

由于某种原因，SQL 不会从所需的表中提取所需的信息。这很奇怪，因为我使用完全相同的代码从 SQL 中提取与用户 id 关联的文件夹列表，并且它的工作方式应该如此。因此，URL 查询看起来像这样 ?o=folder&fid=0ec741fa-e708-4314-83c4-c05966a56110，fid 是文件夹 ID，下面的查询应该提取与此类文件夹 ID 关联的所有文件，但没有返回任何内容，甚至没有错误消息/代码。

语法有问题吗？或者问题的原因是什么？

更正我使用了错误的代码，因为我在 NOTEPAD++ 中打开了一堆标签

这是用 SQL PDO 编写的实际代码

```
require ("sql/pdo.php");

    // Lets get user's folder information
    $query = " SELECT * FROM files WHERE fid = ".$_REQUEST['fid']." "; 

    try 
    { 
        // These two statements run the query against your database table. 
        $stmt = $db->prepare($query); 
        $stmt->execute(); 
    } 
    catch(PDOException $ex) 
    { 
        // Note: On a production website, you should not output $ex->getMessage(). 
        // It may provide an attacker with helpful information about your code.  
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    // Finally, we can retrieve all of the found rows into an array using fetchAll 
    $rows = $stmt->fetchAll(); 

?>
<table width="100%"> 
    <?php foreach($rows as $row): ?> 
        <tr onclick="window.location = 'file.php?fid=<?php echo htmlentities($row['id'], ENT_QUOTES, 'UTF-8')."'"> 
            <td style="width:4%;"><img src="ast/images/fs-directory.png" /></td>
            <td style="width:86%;text-align:left;"><?php echo htmlentities($row['name'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td style="width:10%;text-align:center;"><?php echo htmlentities($row['privacy'], ENT_QUOTES, 'UTF-8'); ?></td> 
        </tr> 
    <?php endforeach; ?> 
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:11:36.827

在您的查询中，您正在使用`$_GET['f']`

但是在您的网址中，您正在传递`fid`

当您替换为时，代码可能会`$_GET['f']`起作用`$_GET['fid']`

```
<?php

             $sql = mysql_query("SELECT * FROM `fs_files` WHERE fid = '".$_GET['fid']."'") or die(mysql_error());

             while($row = mysql_fetch_array( $sql )) {

                 if (in_array($row['file_type'], array('jpeg', 'jpg', 'png', 'gif'))) { 

                 $img = "obj.php?id=".base64_encode($row['file_path'])."&mode;thumb";

                 } else {

                 $img = "assets/filesystem/file_extension_".$row['file_type'].".png";

                 }

                 $type = $row['file_type'];

                 $file_name = substr($row['file_name'], 0, 50);
                 $file_path = "view/".$_GET['fid']."/".$row['id']."/".$row['file_name'];

                 echo '<a href="?p=view&f='.$row['id'].'&q='.$file_path.'"><img src="'.$img.'" />'.$file_name.'
                 <span style="float:right;">'.$type.'</span></a>';
             } 
             ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:16:36.460

代码基本上是正确的，你应该使用 PHPmyadmin 或其他工具来检查数据库的内容，看看它正在检索什么。

请小心，因为直接从 GET 参数将值放入 SQL 查询中是危险的，在您的情况下，有人（或自动脚本）可能会使用 'f' GET 参数注入任意 SQL 代码。您应该对其进行转义，删除您的案例未严格使用的所有字符（例如，仅保留字母和数字）。
这同样适用于内部的相同参数`$file_path`，它可以用于插入来自互联网任何地方的任意图像，甚至是脚本或任意 HTML 代码。

您应该描述您的表模式以了解此处发生的情况。

# magento - Magento 打印页面布局

> ID：14032905
> 
> 赞同：2
> 
> 时间：2012-12-25T18:08:12.737
> 
> 标签：magento, layout, view, printing, product

我正在尝试在 magento 的产品视图上制作打印页面。我希望当我单击按钮时生成一个弹出窗口，其中包含名称、一些图像、描述、品牌....

* * *

我不想更改打印页面的样式/css 设计...我希望与此页面完全一样[http://tinyurl.com/btsdobf](http://tinyurl.com/btsdobf) 单击**Printeaza**页面以查看它的实际效果。我想在打印页面布局上添加更多属性...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:24:21.363

您可以通过自定义`print.css`主题中的文件来编辑打印页面的布局。

看到这个问题：[magento printfriendly page for products](https://stackoverflow.com/questions/5857587/magento-print-friendly-page-for-prodcuts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:29:28.803

你的意思是`javascript:window.print();`？

控制页面设计的样式： `<link rel="stylesheet" type="text/css" href="http://demo3.magentocommerce.com/skin/frontend/default/default/css/print.css" media="print" />`

# clojure - Clojure 中过时的符号

> ID：14032907
> 
> 赞同：6
> 
> 时间：2012-12-25T18:08:50.417
> 
> 标签：clojure

有没有办法在 Clojure 中将符号标记为已过时？

我可以使用来自 Lein 的类似的东西，效果很好。

[https://github.com/technomancy/leiningen/blob/1.x/src/leiningen/core.clj#L13](https://github.com/technomancy/leiningen/blob/1.x/src/leiningen/core.clj#L13)

但是它只在调用函数时发出警告。我真的希望编译器在编译代码时而不是在调用它时选择它。

当然，我*不能*定义编译器随后会选择的符号，但这剥夺了我提供任何信息的能力，例如为什么或何时弃用该符号。

所有这一切都适用于 DSL，其中术语的弃用和过时将以合理的速度发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:11:07.397

评论中已经有一些关于使用宏的内容，但正如有人指出的那样，这排除了将函数用作 HOF。你可以解决这个问题，尽管治疗方法可能并不比疾病更糟。例如，假设您的功能是

```
(defn foo* [x y] (+ x y)) 
```

然后代替写作

```
(defmacro foo [x y] (warn) `(foo* x y))
(foo 1 2)
(map foo [5 6] [7 8]) 
```

您可以使宏扩展*返回*一个函数，当然可以像其他任何函数一样使用它：

```
(defmacro foo [] (warn) `foo*)
((foo) 1 2)
(map (foo) [5 6] [7 8]) 
```

可能不值得尴尬，但确实提供了一种在使用已弃用的功能时抱怨的方式，同时仍然保持使用 HOF 的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:56:58.207

这实际上取决于您的 DSL 是如何设计的。如果你可以设计你的 DSL 使得每个表单都必须包含在一个`go`或类似的调用中，那么你可以编写这个`go`宏来做这样的事情：

1.  `macroexpand-all`（从clojure.walk）到传递的形式
2.  在上面返回的表单上使用`postwalk`（来自 clojure.walk），并通过可能查看一些已弃用符号的全局列表来检查遇到的任何符号是否已弃用。您可能需要对`resolve`符号进行操作以获取符号的命名空间限定名称。
3.  如果发现任何不推荐使用的符号，则打印消息。
4.  按原样返回输入表单。

然后，此`go`宏可用于 DSL 的其他预处理，因为这是执行 DSL 的入口点。

注意：您可能需要提出解决方案，让用户从一个已弃用的符号中为他/她自己的符号使用相同的名称，但同样可能不需要这取决于您的 DSL 设计。

# php - JQuery.Post() 目的和区别

> ID：14032914
> 
> 赞同：1
> 
> 时间：2012-12-25T18:10:42.310
> 
> 标签：php, javascript, jquery, post

在网站上工作时，我有一个内容区域部门，我想根据单击的图像更新其内容。现在，我有一个在内容区域中使用的自定义滚动条。现在，起初我为 onclick 脚本函数编写了以下代码段：

```
function xyz(){
    $("#content-area").load("abc.php");
    $("#content-area").mCustomScrollbar({scrollButtons:{enable:true}});
} 
```

但是脚本的第二行没有响应，即我没有得到滚动条。相反，当我使用这段代码片段时，它起作用了：

```
$.post("abc.php", function(data){
   $("#content-area").html(data);
   $("#content-area").mCustomScrollbar({scrollButtons:{enable:true}});
}); 
```

我想知道 $.post() 的功能以及为什么第一个片段不起作用而第二个片段起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:14:40.807

*在发送*`mCustomScrollbar`AJAX 请求后立即执行的第一种情况：请记住，AJAX 中的 first 是 for 。但它显然还没有什么可做的，因为服务器的*响应*还没有出现。*`A``asynchronous`*

 **在第二个片段中，`mCustomScrollbar`小部件的创建发生在*收到*AJAX 请求的响应之后（因为此行`$.post`现在是成功处理程序的一部分）*，*并且`#content-area`填充了必要的结构 (with `.html()`) 调用。所以现在它可以正常工作了。

您可以使用这样一个事实，`$.load`即可以为方法提供自定义回调函数，该函数将在请求完成时执行，如此[**处**](http://api.jquery.com/load/)所述。例如：

```
$("#content-area").load("abc.php", function() {
     $(this).mCustomScrollbar({scrollButtons:{enable:true}});
}); 
```

注意`$(this)`用法：`this`在回调函数中依次设置为每个 DOM 元素，您无需再次遍历 DOM 寻找它`content-area`；只需将该元素包装到 jQuery 对象中就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:16:10.597

您需要使用请求完成时执行的回调函数：

```
$("#content-area").load("abc.php", function(){
     $(this).mCustomScrollbar({scrollButtons:{enable:true}});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:13:52.613

我想在第一个示例中，第二个语句是在函数完成之前执行的`.load()`。在第二个中，您正确使用了成功功能，该功能仅在 POST 请求完成后执行。**

# php - 什么是从 mysql 查询返回多行的 PHP 函数？

> ID：14032915
> 
> 赞同：3
> 
> 时间：2012-12-25T18:10:45.870
> 
> 标签：php, mysql, sql

我对 php 比较陌生，到目前为止，我一直很好地使用 mysql_fetch_array 函数来回显从数据库中选择的值。但现在我希望能够使用相同的用户名回显从多行中选择的结果。

我只是想知道最有效的方法是什么。我可以使用 for 循环并计算每个单独的查询来做到这一点，但我知道必须有一种更有效的方法，只使用 sql，或者使用更好的 oho 函数。

感谢您的帮助。

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:12:46.810

```
while($row = mysql_fetch_array($result)) { 
    // process each row
} 
```

我想这就是你所需要的——玩一玩，你应该得到你想要的效果！最好用 PHP 来做。

此外，您不应该再使用`mysql_fetch_array`它，因为它已被弃用。使用 PDO 或 mysqli insted。您可以在[这里找到更多信息](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:17:01.153

```
while($row = mysql_fetch_assoc($result)) { 
} or
while($row = mysql_fetch_array($result)) { 
} 
```

和 mysql_ 函数现在在 mysql 中开始贬值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:15:29.030

SQL用于查询您使用的数据库。PHP 用于格式化查询的输出。有关更多信息，请参阅 PHP.net 的手册[php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)。据我所知，没有办法使用 SQL 将输出格式化为行。

顺便说一句，如果这是新代码，我建议您使用 mysqli 而不是 mysql。

# .net - 以编程方式设置 maxRequestLength

> ID：14032918
> 
> 赞同：4
> 
> 时间：2012-12-25T18:11:12.723
> 
> 标签：.net, request

有一个名为 的配置值`maxRequestLength`。在配置文件中，它看起来像这样：

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="2048576" />
  </system.web>
</configuration> 
```

如何以`maxRequestLength`编程方式设置的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T18:33:53.240

你不能！

`maxRequestLength`在调用 actual 之前由[HttpWorkerRequest](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest%28v=vs.71%29.aspx)`HttpHandler`处理，这意味着在请求到达服务器并由相应的 asp.net worker 处理之后执行通用处理程序或**页面**。您无法控制`maxRequestLength`页面代码或 HttpHandler！

如果您想在代码中读取请求长度，您可以通过 a`HttpModule`或`global.asax`文件来完成，这就是在 global.asax 中完成的方式：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    IServiceProvider provider = (IServiceProvider)HttpContext.Current;
    HttpWorkerRequest workerRequest = (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));

    if (workerRequest.HasEntityBody())
    {
        long contentLength = long.Parse((workerRequest.GetKnownRequestHeader(HttpWorkerRequest.HeaderContentLength)));
    }
} 
```

如果请求长度达到所需值，您可以将`maxRequestLength`in设置`web.config`为最大值并在代码中调用工作人员的[CloseConnection方法！](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest.closeconnection.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T18:23:42.883

在快速谷歌之后，您似乎无法以编程方式进行操作。[见这里](http://forums.asp.net/t/1643396.aspx#4257779)。

两种可能的解决方案：

1.  使用本地化的 web.config 配置特定目录。
2.  使用`<location>`web.config 中的元素来配置特定路径。

# github - 在 github 上托管可执行文件

> ID：14032920
> 
> 赞同：25
> 
> 时间：2012-12-25T18:11:25.923
> 
> 标签：github

我希望允许用户在 github 上下载我的一个项目的可执行文件，而无需下载所有源代码或浏览整个项目。

根据[这个类似的问题](https://stackoverflow.com/questions/3928362/host-executables-on-github)，您可以使用上传/下载服务，显然，github 已[关闭](https://github.com/blog/1302-goodbye-uploads)。

那么还有其他方法吗？github 的目的只是共享代码，而不是软件吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-25T22:32:14.207

[2013 年 7 月 2d 更新](https://github.com/blog/1547-release-your-software)，您现在可以**定义发布**。

![释放](../Images/e6a6db7c716d29c9af8c09306c48c4e3.png)

*   版本附有版本说明和下载软件或源代码的链接。
*   遵循许多 Git 项目的约定，发布与 Git 标签相关联。您可以使用现有标签，也可以让版本在发布时创建标签。
*   **您还可以将二进制资产（例如编译的可执行文件、缩小的脚本、文档）附加到 release**。发布后，任何可以查看存储库的人都可以使用发布详细信息和资产。

这是[旧的二进制上传服务](https://stackoverflow.com/q/6978954/6309)的替代品，该服务于 2012 年 12 月被[删除](https://github.com/blog/1302-goodbye-uploads)！

* * *

理想情况下，您会将可执行文件存储在*工件*存储库中，而不是像 GitHub 这样的*源存储库。*
所以是的，GitHub 是用于源代码控制管理，而不是交付（例如从您的代码生成的二进制文件）。

**[Nexus](http://www.sonatype.org/nexus/)**是*任何*生成的工件（如二进制文件）的常用选择，开源项目可以免费上传。
请参阅“[如何将我的软件放入 Central？](https://support.sonatype.com/entries/20914616-how-do-i-get-my-software-into-central) ”（来自[这个答案，在“](https://stackoverflow.com/a/4922603/6309) [Maven 存储库托管非公共工件？](https://stackoverflow.com/questions/12525929/maven-repository-hosting-for-non-public-artifacts) ”中也提到过）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-25T18:22:27.837

您可以创建另一个存储库来托管您的所有构建，我的意思是可执行文件。在该存储库中，除了构建之外，不要添加任何代码，

因此，人们可以在 git hub 上单击下载 Zip 按钮，它只下载可执行文件（作为 zip 文件）。

在构建时，您可以将可执行文件复制到文件夹中，只需推送到仅托管构建的远程存储库。

希望这可以帮助 。

基本上，GIT 只是一个 SCM（源代码管理系统），它并不是为了这个目的。

但这仍然是您可以利用 github.org amd git 服务的方式。

希望这可以帮助 。

**编辑 ： -**

Git hub 现在有一个托管版本的解决方案，@VonC 在下面的帖子中对此进行了很好的解释。请使用它作为解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T18:46:48.587

以下对我有用，YMMV。在 MAC 上并使用 Chrome 浏览器，进入[此页面](https://github.com/dexygen/Tatu/blob/master/tatuMicro.kit)后，我单击“原始”按钮（“查看原始”链接也有效），并将可执行文件 tatuMicro.kit 下载到我的下载文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-15T18:09:12.243

一个 exe 文件可以在发布下托管，链接可以在朋友之间分发等。我最近测试了它昨天。唯一的问题是，如果有人为了盈利而破坏该计划。exe 文件可以在 pendrives 上轻松移动和分发。

# ruby - 如何将变量放入迭代器代码Ruby

> ID：14032921
> 
> 赞同：-1
> 
> 时间：2012-12-25T18:11:29.337
> 
> 标签：ruby, iterator, puts

如何将变量放入迭代器代码 Ruby EX：`(1,2,3).select { |v| puts v > 2}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:22:59.610

似乎语法错误，我想你想要这样的东西

```
[1,2,3].select { |v| puts v > 2 } 
```

输出将是：

```
false

false

true 
```

看看[这里](http://codepad.org/Cxwn20DG)

# hadoop - 如何添加 SerDe jar

> ID：14032924
> 
> 赞同：7
> 
> 时间：2012-12-25T18:11:57.357
> 
> 标签：hadoop, hive

我使用 Hive 创建表存储序列文件。行格式是 serder`myserde.TestDeserializer` 类`hiveserde-1.0.jar`

在命令行中，我使用此命令添加 jar 文件：

> 配置单元添加 JAR hiveserde-1.0.jar

然后我创建一个表，文件加载成功。

但现在我想运行它并使用 mysql jdbc 在客户端上创建一个表。错误是：

> SerDe: myserde.TestDeserializer 不存在。

如何运行它？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T12:48:14.347

所以，有几个选择。在所有这些中，jar 都需要存在于安装了 Hive 的集群上。当然，JDBC 客户端代码可以在集群内部或外部的任何地方运行。

**选项 1：**在运行任何其他 HQL 命令之前发出 HQL 查询：

`ADD JAR hiveserde-1.0.jar`

**选项 2：**您可以更新 hive-site.xml 以将 `hive.aux.jars.path`属性设置为 jar hiveserde-1.0.jar 的完整路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T11:33:19.017

转到您的 hive-env.sh 并附加到文件的底部：

```
export HIVE_AUX_JARS_PATH=$HIVE_AUX_JARS_PATH:/<path-to-jar> 
```

然后，您可以获取此文件。不理想，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T01:56:57.800

您是说您想通过 jdbc 创建表而不是在 CLI 中创建表吗？在这种情况下，您应该在运行 jdbc 代码时将 jar 添加到类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T22:50:37.753

是的，这可能有点令人困惑，似乎有一半时间 Hive 从集群读取，另一半从本地文件系统读取（机器 Hive 服务器已安装）。

为了克服这个简单的复制 .jar 文件到 Hive 服务器机器，然后你可以在你的 Hive 查询中引用它，例如：

```
add jar /tmp/json-serde.jar;

create table tweets (
    name string,
    address1 string,
    address2 string,
    address3 string,
    postcode string
)
... 
```

然后进入下一个问题；）

# php - Zend Framework 2 - 为什么我不能覆盖 MvcEvent 的 MatchRoute？

> ID：14032925
> 
> 赞同：1
> 
> 时间：2012-12-25T18:12:08.493
> 
> 标签：php, events, request, zend-framework2, routes

我想匹配用户未登录到控制器`Admin\Controller\Sign`和操作的所有请求`in`。`onBootstrap()`我在文件中的方法中编写了这段代码`Module.php`：

```
if (!$authService->hasIdentity()) {
    $routeMatch = new RouteMatch(
        array(
            'controller' => 'Admin\Controller\Sign', 
            'action'     => 'in'
        )
    );

    $event->setRouteMatch($routeMatch);
} 
```

我没有收到任何错误，但代码不起作用，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:44:00.333

这里的问题是应用程序路由事件（MvcEvent::EVENT_ROUTE）是在（MvcEvent::EVENT_BOOTSTRAP）之后触发的。这意味着即使您在引导级别设置路由匹配，应用程序也会在 MvcEvent::EVENT_ROUTE 之后使用请求的路由匹配来覆盖它。

如果您想避免这种覆盖，您需要为具有非常低优先级的路由事件添加一个侦听器，以确保它不会被覆盖：

`$e->getApplication()->getEventManager()->attach(MvcEvent::EVENT_ROUTE, array($this, 'onRouteEvent'), -1000000);`

注意： onRouteEvent 将是处理路由事件的 Module 类的方法（类似于您的代码）。

如果您想短路在引导级别运行的应用程序，您可以做的是将带有重定向代码的标头发送到客户端：

```
//get the url of the login page (assuming it has route name 'login')
$url = $e->getRouter()->assemble(array(), array('name' => 'login'));
$response=$e->getResponse();
$response->getHeaders()->addHeaderLine('Location', $url);
$response->setStatusCode(302);
$response->sendHeaders(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T06:35:25.193

在 admin 模块下 module.config.php 的 routes 部分添加如下路由条目 sign_in

```
'sign_in' => array(
    'type'    => 'Segment',
    'options' => array(
        'route' => '/admin/sign/in',
        'defaults' => array(
            'controller' => 'sign',
            'action'     => 'in',
        ),
    ),
), 
```

并像这样调用控制器中的路由

```
$this->redirect()->toRoute('sign_in'); 
```

# java - 如何在界面中声明（并向其中添加内容）列表

> ID：14032926
> 
> 赞同：0
> 
> 时间：2012-12-25T18:12:12.923
> 
> 标签：java, interface

使用 Java `interface`，我想声明 a`static final List<String>`并向其添加内容。

所以，像

```
List<String> a = new ArrayList<String();
a.add("a");
a.add("b"); 
```

在一个界面中。请问这怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:15:56.807

您可以像这样进行一行初始化：

```
static final List<String> list = new ArrayList(Arrays.asList("a", "b", "c")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:15:23.303

您可以使用`Collections.unmodifiableList()`

```
List<String> a = new ArrayList<String();
a.add("a");
a.add("b");

static final List<String> list = Collections.unmodifiableList(a); 
```

# java - 如何在 Java 中从 JTextField 设置 Bean 属性值？

> ID：14032934
> 
> 赞同：0
> 
> 时间：2012-12-25T18:13:02.317
> 
> 标签：java, xml, spring, swing

我在 LogInWindow(JFrame) 中有一个 JTextField。在该 JTextField 中，用户输入它的名称。

我有另一个 StudentWindow (JFrame)，它的构造函数将该用户名 String 作为参数。

在我的 xml 文件中，我如何注入来自 JTextField 的输入？

```
<!-- GUI Beans -->
<bean id="logInWindow" class="gui.LogInWindow">
    <constructor-arg ref="controller"/>
    <property name="nameJTextField" value="?? Need help here ??"/>
</bean>

<bean id="studentWindow" class="gui.StudentWindow">
<constructor-arg ref="????????"/>
</bean> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:24:36.280

你不能。`JFrame`Spring 解析 XML 并在您的任何一个显示之前基于它创建 bean 。除非我完全误解了你的情况......

# php - 计算两个声音样本之间的差异

> ID：14032939
> 
> 赞同：4
> 
> 时间：2012-12-25T18:14:14.420
> 
> 标签：php, audio, fft, audio-processing

我有两个声音样本 (.WAV)，我想找出它们之间的区别。我读过这个主题，我知道我应该使用 FFT 来做这样的事情。

不幸的是，我找不到进行实际计算的方法。我正在搜索 PHP 库或有关如何使用 PHP 进行此计算的说明。

我尝试用谷歌搜索这个问题，但没有找到相关的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T01:05:40.813

PHP lib to handle audio files: [ffmpeg-php](http://ffmpeg-php.sourceforge.net/)
PHP lib for computing Fast Fourier Transform (FFT): [fft](http://www.phpclasses.org/package/6193-PHP-Compute-the-Fast-Fourier-Transform-of-sampled-data.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T00:02:00.043

The subject you are looking for might be sound fingerprinting, sometimes done by 2D pattern matching of sets of MFCC vectors computed from the audio data of interest.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T01:11:59.977

在发现音频文件之间的差异时，您需要注意很多事情，因为很难为 php 编写自己的库。

为什么不使用[Audacity](https://audacity.sourceforge.net)进行音频分析？

# c# - 释放存储在公共静态字段中的 IDisposable 对象

> ID：14032941
> 
> 赞同：6
> 
> 时间：2012-12-25T18:14:57.027
> 
> 标签：c#, .net, idisposable

如果一个类有一个实现 IDisposable 的实例字段，那么包含的类实现 IDisposable 和从其 Dispose 方法中字段 Dispose 方法的类。

```
public class A : IDisposable 
{
    public System.Drawing.Font font = new Font("Arial", 10.0f);

    public void Dispose()
    {
        font.Dispose()
    }
} 
```

（我知道我没有正确执行 dispose 模式，但是对于示例代码应该足够好了）

如果该字段是静态字段，那么对该字段的 Dispose 的调用应该在哪里？

```
public class B
{
    public static System.Drawing.Font font = new Font("Arial", 10.0f);
} 
```

我可以让 B 类实现 IDisposable 并进行调用，`font.Dispose`但是如果稍后再次使用 B.font 会导致问题。您还必须记住，访问静态方法的 dispise 您需要创建一个实例才能调用 Dispose。

我也可以创建一个静态 Dispose 方法，但是用户必须记住调用 Dispose 并且必须确保他们是程序中的最后一个用户。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T18:51:32.633

加载类型时初始化静态字段。

因此，在卸载包含类型时处理分配给静态字段的对象从逻辑上讲是有意义的。

但是，类型不会被卸载。AppDomains 周围可能存在一些奇异的复杂情况，但我怀疑这不适用于您的情况。

因此我不会处置该实例，否则您将拥有一个不适合使用的对象的公开可用实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T18:51:34.663

如果该字段是静态的，那么可能的目的是让它在整个应用程序期间持续存在？因为只有在应用程序关闭时才需要处理它。这会以一种或另一种方式发生，它本身——

如果您计划`IDisposable`在应用程序的生命周期内多次将静态字段重新分配给不同的对象，那么您当然希望在重新分配时处理旧对象。也许您可以为此使用属性？并不是我想了很多，而是类似：

```
// private - don't write to this field from outside the property setter
static Font font = new Font("Arial", 10.0f));

public static Font Font
{
  get
  {
    return font;
  }
  set
  {
    var oldFont = font;
    if (oldFont != null)
      oldFont.Dispose();
    font = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T18:17:15.353

您可以像处理任何其他对象一样处理它。这没什么区别。静态对象只是每个类可用的对象。它仍然是某事的一个实例。当然，您可能不想这样做，因为在您处理它之后，仍然有人可以访问它并获得`ObjectDisposedException`异常。

```
 static void Main(string[] args)
    {
        using (Test.Instance)
        {

        }  

        Thread.Sleep(TimeSpan.FromSeconds(10));
    }

    public class Test:IDisposable
    {
        public static Test Instance = new Test();
        public void Dispose()
        {
            Console.WriteLine("Disposed");
        }
    } 
```

输出是：

> 处置

根据您更新的示例：

```
public class A
{
    public static System.Drawing.Font font = new Font("Arial", 10.0f));
} 
```

你可以做`A.font.Dispose()`或`using(A.font)`

一般来说，我认为这个想法是你真的不会有一个公共的静态一次性字段，因为通过使其成为静态你暗示它应该在应用程序的生命周期内存在。如果它必须是一次性的，你应该让它变得懒惰并使它可以线程安全地重新初始化，否则在处理后访问它会抛出异常。或者，您可以挂钩到您的应用程序端代码，并在那里安全地处理所有静态一次性用品。您也可以在某个地方开始注册您的一次性用品。只是一个想法

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-25T18:28:15.290

您不能处置静态类，因为没有它的实例

# objective-c - 使变量名变量（Objective-c）

> ID：14032943
> 
> 赞同：-2
> 
> 时间：2012-12-25T18:15:12.953
> 
> 标签：objective-c, macos, cocoa

我想做这样的事情：

。H

```
LocalRoom* zone1;
LocalRoom* zone2;
LocalRoom* zone3;
LocalRoom* zone4;
etc.... 
```

.m

```
NSString *number = 1;
NSString *variable = [NSString stringWithFormat: @"zone%@", number]
[[variable variableValue] broadcastChatMessage:redStringPrefix fromUser:@"server"]; 
```

模仿：

```
[zone1 broadcastChatMessage:redStringPrefix fromUser:@"server"]; 
```

我该怎么做呢？可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T04:28:43.757

给定“zone1”、“zone2”等名称，我会创建一个数组而不是字典。无论哪种方式，这些都不应该是单独的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T18:24:11.360

```
 @property(strong) NSMutableDictionary *zones;

 -(id)init {
   ....
   _zones = [[NSMutableDictionary alloc] init];
   ....
 }

 aZone = [_zones objectForKey: [NSString stringWithFormat:@"zone%d", someZoneNumber]]; 
```

... ETC ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T18:19:58.890

[您可以使用Key-Value Coding](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/KeyValueCoding.html)做类似的事情。你会写

```
[[self valueForKey:variable] broadcastChatMessage:redStringPrefix fromUser:@"server"]; 
```

而不是

```
[[variable variableValue] broadcastChatMessage:redStringPrefix fromUser:@"server"]; 
```

这当然需要`zone1`,`zone2`等是 上的实例变量（或属性）`self`。

# select - 在选择中显示选定的选项

> ID：14032947
> 
> 赞同：0
> 
> 时间：2012-12-25T18:15:47.617
> 
> 标签：select, options, dart, dart-webui

HTML 文件具有从状态列表中填充的 select 元素。我需要将特定状态 FL 显示为选定条目。

```
<select id='mystate'  template iterate="x in myStatesList">
  <option>{{x}}</option>
</select> 
```

在 dart 文件中尝试了以下操作，但它不起作用：

```
inserted() {
  var x = query('#mystate') as SelectElement;
  x.options.selectedIndex = 10; 
} 
```

还尝试在返回“已选择”的选项中调用函数，如下所示：

```
<option {{gv(x)}}> {{x}} </option> 
```

在飞镖中

```
String gv(x) {
  if(x=='FL'){            
    return 'selected';
  } else {
    return '';
  }
} 
```

那也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:53:38.953

你的`inserted()`功能应该是：

```
inserted() {
  var x = query('#mystate') as SelectElement;
  x.selectedIndex = 10; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:26:02.843

将html更改为：

```
<option selected={{gv(x)}}>{{x}}</option> 
```

和飞镖代码：

```
bool gv(x) {
  if(x == 'GA'){            
    return true;
  } else {
    return false;
  }
} 
```

现在它可以工作了！

# asp.net - 将 SignalR 连接映射到用户

> ID：14032958
> 
> 赞同：28
> 
> 时间：2012-12-25T18:17:05.073
> 
> 标签：asp.net, notifications, signalr, signalr-hub

考虑一个像 facebook 这样的 Web 应用程序，它可以向用户发送实时通知。

使用[asp.net SignalR](https://github.com/SignalR/SignalR/wiki)跟踪哪些连接 ID 属于哪个用户，即使用户断开连接或稍后重新连接，最好的方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-01T21:28:16.187

查看以下博客文章：

[将 ASP.NET SignalR 连接映射到实际应用程序用户](http://www.tugberkugurlu.com/archive/mapping-asp-net-signalr-connections-to-real-application-users)

简而言之，您将在该方法上向用户添加连接 ID，并在该`OnConnected`方法上删除该连接`OnDisconnected`。请记住，一个应用程序用户可以有多个连接。因此，您需要在用户和连接 ID 之间建立一对多的关系。上面链接的帖子通过示例对其进行了详细说明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T18:23:32.690

我为一个内部应用程序做了这个。我这样做的方式是，当用户连接时，我让服务器要求用户自己注册。通过这种方式，我知道不仅连接了用户和他们的 signalR connnectionID，而且他们还可以告诉我任何其他信息（如用户名或其他信息）。

当他们重新连接时，我要求他们再做一次。

SignalR 将保持每个客户端相同的连接 ID，即使他们重新连接也很好。重新连接与初始连接不同。新连接表示新客户端，但重新连接在同一客户端上。

在我的应用程序中，我维护了一个单独的线程安全字典，用于跟踪哪个用户和哪个 connectionID 在做什么。这样我可以说“哦，向用户 ABC 发送消息”并查找他们的 connectionID。然后在 signalR 中针对该 connectionID 对集线器的客户端对象进行操作。如果您这样做，您甚至可以在多个连接中拥有相同的“用户”。想象一下用户“abc”在两个浏览器选项卡中打开。如果您严格按照 connectionID 进行操作，从技术上讲，他们将是两个不同的用户。但是，通过维护某种本地集合对用户和连接进行分组，您现在可以为同一用户拥有多个连接。

我应该提一下，如果你这样做，你应该确保你的站点处理当它重新启动并丢失所有连接信息时发生的事情。对我来说，当有人重新连接时，我会要求他们再次重新识别自己。这样我就可以在服务器上线时重新构建我的本地字典而无需担心。它确实有更多的开销，因为现在您要求所有客户向您发送信息，但根据您的用户情况，这可能是交错的或成束的或以其他方式分布以帮助您处理负载。

通常，但是您获得本地信息（无论是通过要求用户提供它）还是通过 http 上下文会话信息，您都需要自己跟踪它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-14T19:30:27.290

好吧，我使用了另一种方法，我像这样扩展了 ApplicationUser 类：

```
 // You can add profile data for the user by adding more properties to your ApplicationUser class, please visit http://go.microsoft.com/fwlink/?LinkID=317594 to learn more.
public class ApplicationUser : IdentityUser
{
    //public int ApplicationUserId { get; set; }
    //public string Name { get; set; }
    //public string Address { get; set; }
    //public string City { get; set; }
    //public string State { get; set; }
    //public string Zip { get; set; }
    [Required]
    public string Email { get; set; }
    [Required]
    public override string UserName { get; set; }
    [NotMapped]
    public string ConnectionId { get; set; }
    [NotMapped]
    public string ChattingUserConnectionId { get; set; }
    //public string HomeTown { get; set; }
    //public DateTime? BirthDate { get; set; }
} 
```

在我的集线器中，我正在做类似的事情：

```
public class ChatHub : Hub
{
    #region Data Members
    private static ApplicationDbContext applicationDbContext = new ApplicationDbContext();
    private static UserManager<ApplicationUser> userManager = new UserManager<ApplicationUser>(new UserStore<ApplicationUser>(applicationDbContext));
    private static List<ApplicationUser> connectedUsers = new List<ApplicationUser>(); 
```

当用户连接到聊天时，我通过他的用户名获取他的 ApplicationUser 对象并将其添加到 connectedUsers 列表中。当他断开连接时，我将他删除。

我遇到了一些带有 EF 状态的随机异常，这使我每次访问它时都创建 ApplicationDbContext 和 UserManager，而不是将其设置在静态对象中：

```
 private ApplicationUser GetCurrentUser()
    {
        ApplicationDbContext applicationDbContext = new ApplicationDbContext();
        UserManager<ApplicationUser> userManager = new UserManager<ApplicationUser>(new UserStore<ApplicationUser>(applicationDbContext));
        var userName = Context.User.Identity.GetUserName();
        var user = userManager.FindByName<ApplicationUser>(userName);

        return user;
    } 
```

编辑：

集线器代码在加载用户的子对象时存在一些问题。这个也用在 asp.net 模板中的代码会更好地工作，不需要 ApplicationDBContext：

```
 private ApplicationUserManager _userManager
    {
        get
        {
            return HttpContext.GetOwinContext().GetUserManager<ApplicationUserManager>();
        }
    }

    var user = _userManager.FindByName<ApplicationUser, string>(userName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-31T08:46:44.163

ASP.NET 的 SignalR 教程部分有一篇非常好的文章。我已经包含了下面的介绍性段落。

> ### [将 SignalR 用户映射到连接](http://www.asp.net/signalr/overview/guide-to-the-api/mapping-users-to-connections)
> 
> 每个连接到集线器的客户端都会传递一个唯一的连接 ID。您可以在集线器上下文的 Context.ConnectionId 属性中检索此值。如果您的应用程序需要将用户映射到连接 ID 并保留该映射，您可以使用以下方法之一：
> 
> *   用户 ID 提供者 (SignalR 2)
> *   内存存储，例如字典
> *   每个用户的 SignalR 组
> 
> 永久的外部存储，例如数据库表或 Azure 表存储本主题中显示了这些实现中的每一个。您使用 Hub 类的 OnConnected、OnDisconnected 和 OnReconnected 方法来跟踪用户连接状态。

**用户 ID 提供者**

如果您使用 ASP.NET 的标准成员资格提供程序 ( `IPrincipal.Identity.Name`)，您只需执行以下操作即可基于用户帐户访问客户端。如果您有自己的用户系统，则可以创建自己的提供者。

```
public class MyHub : Hub
{
    public void Send(string userId, string message)
    {
        Clients.User(userId).send(message);
    }
} 
```

# mysql - mysql 与 where 不同的地方不能按我想要的方式工作

> ID：14032960
> 
> 赞同：0
> 
> 时间：2012-12-25T18:17:15.917
> 
> 标签：mysql

这是我的查询：

```
SELECT DISTINCT `row` FROM `parts` WHERE `wall` = '1' ORDER BY `row` 
```

这是对查询的回答：

```
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 
```

看起来如果语句 WHERE `wall` = '1' 被忽略，因为结果与我进行此类查询时相同

```
SELECT DISTINCT `row` FROM `parts` ORDER BY `row` 
```

我希望第一个查询给我 `1 3 4 9 19`（这些是“墙”真的=1的“行”）我已经阅读了一些关于类似问题的帖子，但我仍然找不到解决方案

[架构](http://sqlfiddle.com/#!2/c5cb1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:54:39.750

我使用了自己的样本数据并得到了正确的结果。我将发布在 SQL Fiddle 上的所有内容都复制到了我的本地 mysql 数据库中。并用 phpmyadmin 查询一切，一切正常。这是一个将数据插入数据库的 SQL 查询。

```
INSERT INTO `table` (`id`, `wall`, `row`, `place`, `long`, `proportion`, `shapeid`, `projid`, `quantity`, `rwall`, `rrow`, `rplace`, `status`, `barcode`, `position`) VALUES
(1, '1', 5, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(2, '10', 1, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(3, '1', 2, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(4, '3', 20, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(5, '1', 40, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(6, '2', 4, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(7, '1', 1, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(8, '5', 1, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(9, '1', 13, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''),
(10, '10', 13, 0, 0, '', 0, '', 0, NULL, NULL, NULL, 0, '', ''); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T18:29:18.353

也许这有助于省略''。您查询的是字符串值而不是数值的区别。

# php - 尝试使用正则表达式查找包含价格的文本

> ID：14032964
> 
> 赞同：-1
> 
> 时间：2012-12-25T18:17:42.493
> 
> 标签：php, javascript, regex

所以可以说我的文字是：

```
 <div>
    <span>one something 1 $2502</span><br>

    <span>
        one something 2
    </span><br>

    <span>one something 3 $25102
    </span><br>

    <span>
    one something 4 $2102</span><br>
</div> 
```

我正在尝试制作一个模式来捕获跨度之间的所有文本到目前为止我已经设法捕获第一个跨度没有问题但其余的我遇到了麻烦

这是我到目前为止得到的：

`\>(.*?\$\s*?(\d+\.?\d+).*?)\<`

我想过使用类似的东西`\>\r*?\n*?(.*?\$\s*?(\d+\.?\d+).*?)>\r*?\n*?\<`来抓住其他人，但它不会起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:24:09.313

您不应该使用正则表达式来匹配标记语言；一旦涉及嵌套标签，事情就会很快变得棘手。也就是说，在您的示例中，涉及的两个最里面的标签之间只有纯文本，您可以尝试一下：

```
>[^<>]*\$\s*(\d+(?:\.\d*)?)[^<>]*< 
```

这将匹配两个`>`...`<`分隔符之间的任何文本（除非它本身包含尖括号），其中包含至少一个前面带有 . 的数字`$`。如果超过一个，它将捕获最后一个。

**解释：**

```
>       # Match >
[^<>]*  # Match anything besides < or >
\$      # Match $
\s*     # Match optional whitespace
(       # Match and capture...
 \d+    # a number
 (?:    # possibly followed by:
  \.\d* #  a dot and optional digits
 )?     # but make that part optional.
)       # End of capturing group
[^<>]*  # Match anything besides < or >
<       # Match < 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:25:04.903

```
<?php 
$string = ' <div>
    <span>one something 1 $2502</span><br>

    <span>
        one something 2
    </span><br>

    <span>one something 3 $25102
    </span><br>

    <span>
    one something 4 $2102</span><br>
</div>';
preg_match_all('~<span>(.+)</span>~Usi', $string, $matches);
print_r($matches[1]);
?> 
```

对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:22:15.523

只需选择跨度内的所有内容很简单：`<span>([^<]*)<\/span>`

让我知道这是否适合您。

如果您只想要价格：`<span>[^$<]*(\$\d+)[^<]*<\/span>`应该可以

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T18:36:03.533

我不会为此使用正则表达式。如果您向 div 添加一个 id，您可以使用 DOM 工具轻松获取 spans 文本：

```
var div = document.getElementById('mydiv');

var text = [].slice.call( div.childNodes ).filter(function( node ){
  return node.nodeName == 'SPAN'
}).map(function( span ){ return span.innerText });

console.log( text ); //=> ["one something 1 $2502", "one something 2", "one something 3 $25102", "one something 4 $2102"] 
```

**编辑：**使用 jQuery，您可以做的是找到一个模式，例如，如果您知道要抓取的所有跨度都有一个`br`标签，那么您可以像这样找到它们：

```
var $spans = $('span').filter(function(){
  return $(this).next('br').length
});

var text = $spans.map(function(){
  return $(this).text();
}); 
```

如果模式不是唯一的，那么您可能不得不使用正则表达式...

# ios - 在 ios 6 中将 5112225.14 转换为 5,112,225.14

> ID：14032971
> 
> 赞同：0
> 
> 时间：2012-12-25T18:19:21.703
> 
> 标签：ios, sqlite, ios6

如何在 ios 6 中转换`5112225.14`为。`5,112,225.14`我试过这个：

```
NSNumber *numberObj = [NSNumber numberWithFloat:[[string stringByReplacingOccurrencesOfString:@"," withString:@""] floatValue]]; 
```

也试过

```
NSNumberFormatter *formatter = [NSNumberFormatter new];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle]; // this line is important!

NSString *formatted = [formatter stringFromNumber:[NSNumber numberWithInteger:2000000.879]]; 
```

但我得到**5,112,225**第一个和**2,000,000** 没有任何小数。我如何保留小数点和逗号分隔值。提前致谢，圣诞快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:21:24.957

使用 NSNumberFormatter 是正确的方法。你失败了，因为你打电话`numberWithInteger`而不是`numberWithDouble`.

# cordova - 如何保存音频并获取其完整路径？

> ID：14032973
> 
> 赞同：0
> 
> 时间：2012-12-25T18:19:51.980
> 
> 标签：cordova

我想录制音频，然后保存音频并获取该音频文件的完整路径或 src

所以，我有两个问题：

1-如果我第一次使用此代码将文件名保存为“blank.mp3”

那么如果我想将另一个文件记录为以前的文件名“blank.mp3”，它将用新文件替换旧文件？？或者它不会保存新的并给我错误？？？

2- src 变量将包含该文件的完整路径？

3- 总之，下面的代码将记录并保存音频文件并获取其完整路径？

```
document.addEventListener("deviceready", function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, function fail(){});
}, false);

var gotFS = function (fileSystem) {
    fileSystem.root.getFile("blank.mp3",
        { create: true, exclusive: false }, //create if it does not exist
        function success(entry) {
            var src = entry.toURI();
            console.log(src); //logs blank.wav's path starting with file://
        },
        function fail() {}
    );
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:25:18.603

1.  更换旧的没有错误。如果将 Exclusive 更改为 true，则会返回错误
2.  是的
3.  它与记录无关，如果不存在则创建一个文件，并记录文件 url 路径

# android - 在 AlertDialog 中更正文本颜色/外观

> ID：14032977
> 
> 赞同：8
> 
> 时间：2012-12-25T18:20:29.097
> 
> 标签：android, android-layout, android-alertdialog

我在这个问题上挣扎了很长时间。我搜索了解决方案，实际上有一些针对相关问题的建议，但没有什么对我真正有效。因此，假设我想创建一个带有（长）消息、一个复选框和两个按钮的 AlertDialog。

```
// create dialog
AlertDialog.Builder dlg = new AlertDialog.Builder(this);
dlg.setTitle(R.string.dlg_title);
dlg.setMessage(R.string.dlg_msg);

// add checkbox
final CheckBox checkbox = new CheckBox(this);
dlg.setView(checkbox);

// add buttons
dlg.setPositiveButton(...);
dlg.setNegativeButton(...);

// show dialog
dlg.show(); 
```

这**不起作用**，因为如果对话框消息变得太长，复选框将不会完全显示。此外，它将在横向模式下完全隐藏。

接下来的尝试是查找[原始对话框布局文件](https://code.google.com/p/pdn-slatedroid/source/browse/trunk/eclair/frameworks/base/core/res/res/layout/alert_dialog.xml?r=44)（对我来说它位于 android-sdk-linux_86/platforms/android-17/data/res/layout/alert_dialog.xml 下）并尝试复制相关部分以创建我们的自己的内部对话框布局的“克隆”，就像这样：

**dialog_checkbox.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:overScrollMode="ifContentScrolls"
        android:paddingBottom="12dip"
        android:paddingLeft="14dip"
        android:paddingRight="10dip"
        android:paddingTop="2dip" >

        <TextView
            android:id="@+id/message"
            style="?android:attr/textAppearanceMedium"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="5dip" />
    </ScrollView>

    <CheckBox
        android:id="@+id/checkbox"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

我们可以尝试将此视图添加到我们的对话框中，如下所示：

```
// create dialog
AlertDialog.Builder dlg = new AlertDialog.Builder(this);
dlg.setTitle(R.string.dlg_title);

// add checkbox
LinearLayout checkboxLayout = (LinearLayout) View.inflate(mContext, R.layout.dialog_checkbox, null);
((TextView) checkboxLayout.findViewById(R.id.message)).setText(R.string.dlg_msg);
mCheckbox = (CheckBox) checkboxLayout.findViewById(R.id.checkbox);
mCheckbox.setText(R.string.dlg_checkbox_msg);
setView(checkboxLayout);

// add buttons
dlg.setPositiveButton(...);
dlg.setNegativeButton(...);

// show dialog
dlg.show(); 
```

这实际上工作**得很好**。几乎。在我们将 Theme.Light 用于我们的应用程序之前，我们不会看到任何问题。但是一旦我们使用 Theme.Light，对话框文本的颜色就会在深色背景上变成黑色并且不可读。**为什么？！**

*   我们已经克隆了原始的 Android 警报对话框 xml 布局源代码。但是虽然我们使用 attr/textAppearanceMedium 作为文字样式，但是在 Theme.Light 下文字颜色还是变成了黑色。
*   如果我们使用 Theme.Light 并通过 setMessage 创建一个带有普通消息的“普通”对话框，则文本颜色为白色且可读。

怎么了？如何解决这个问题？我不想以编程方式将文本颜色设置为白色或黑色，这在自定义用户主题上看起来不太好。有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-02T19:05:21.223

我有同样的问题，并通过为我想要的对话框主题创建一个 ContextThemeWrapper 来解决它，并在创建 AlertDialog Builder 和膨胀要附加的视图时使用它：

```
ContextThemeWrapper wrapper = new ContextThemeWrapper(this, R.style.DialogBaseTheme);
AlertDialog.Builder builder = new AlertDialog.Builder(wrapper);
View view = LayoutInflater.from(wrapper).inflate(R.layout.create_warning, null); 
builder.setView(view); 
```

R.style.DialogBaseTheme 样式在 Gingerbread 的“/values/styles.xml”中定义如下：

```
<style name="DialogBaseTheme" parent="android:Theme.Dialog"/> 
```

然后它也在“/values-v11/styles.xml”中定义为 Honeycomb 和向上使用 Holo 主题：

```
<style name="DialogBaseTheme" parent="android:Theme.Holo.Light.Dialog" /> 
```

因此，在 Gingerbread 上，我的自定义 View 的 TextViews 自动为白色，而 Honeycomb+ 对于 Holo Light，它们自动为黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:31:57.220

我想**我**终于找到了解决方法。根据我的初始代码，这似乎解决了我的问题：

```
// add checkbox layout
LinearLayout checkboxLayout = (LinearLayout) View.inflate(new ContextThemeWrapper(context, android.R.style.Theme_Dialog), R.layout.dialog_checkbox, null);
((TextView) checkboxLayout.findViewById(R.id.message)).setText(DIALOG_TEXT);
mCheckbox = (CheckBox) checkboxLayout.findViewById(R.id.checkbox);
mCheckbox.setText(CHECKBOX_NOT_AGAIN);
setView(checkboxLayout); 
```

注意 ContextThemeWrapper。它使得对话框主题被分配给膨胀的布局。我希望，这最终解决了未来的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:28:54.507

在 textview 中添加一个属性：

```
android:textColor="@color/white" 
```

并在 res/values 文件夹中的 colors.xml 中定义白色

```
<color name="white">#ffffff</color> 
```

或者你可以直接添加

`android:textColor="#fffff"`（虽然不推荐。推荐以上方法。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:09:46.930

您可以应用带有**阴影的****自定义样式**，以使您的文本可见，无论文本颜色是什么：

 **```
<resources>
<style name="Text.Shaded.Medium" parent="@android:attr/textAppearanceMedium">
    <item name="@android:paddingLeft">4dp</item>
    <item name="@android:paddingBottom">4dp</item>
    <item name="@android:textColor">#FFFFFFFF</item>
    <item name="@android:shadowColor">#000000</item>
    <item name="@android:shadowDx">2</item>
    <item name="@android:shadowDy">2</item>
    <item name="@android:shadowRadius">2</item>
</style>
</resources> 
```

**但是**，如果它对您来说不够明显，您可以应用内部阴影，但不幸的是，Android 没有这样的属性，所以您必须使用 MagicTextView 之类的东西[（](http://qwerjk.com/magic-text) ABentSpoon 在这个问题中提到[：](https://stackoverflow.com/users/187455/abentspoon) Is [there a way将内部阴影添加到 Android 上的 TextView？](https://stackoverflow.com/questions/6871301/is-there-a-way-to-add-inner-shadow-to-a-textview-on-android)）。**

# java - 在文件数组中查找特定数据？

> ID：14032982
> 
> 赞同：0
> 
> 时间：2012-12-25T18:21:19.410
> 
> 标签：java, arrays, file

好的，所以我的程序获取一个文件（该文件是由一个空格分隔的 401 x 401 数字）并将它们写入一个数组，然后将数据拆分并打印出来。这样做之后，我想告诉程序从这个文件中找出具体的数字（主要是最大的数字和最小的数字）。我尝试过 mathmax 和 mathmix 等方法，所以如果数组被称为“dataArray”，我会尝试说“Math.max(dataArray, 0)”但是 htis 失败了。搜索此站点后，我尝试了其他解决方案，但没有任何效果。有人可以帮我在这个数组中找到数据吗？非常感谢，这是到目前为止的代码。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;  //import tools

public class MultiArray {
    public static void main(String[] args)throws IOException {

        //variables
        int rows = 401;
        int columns = 401;
        String file = "dmt.asc";

        double dmtData[][] = new double[rows][columns];  //array

        BufferedReader Reader = new BufferedReader(new FileReader(file)); //read the file

        //split the numbers and write to array
        for(int i = 0; i < rows; i++){
            String rowArray [] = Reader.readLine().split(" ");
            for(int j = 0; j < columns; j++){
                dmtData[i][j] = Double.parseDouble(rowArray[j]);
            }
        }

        Reader.close();  //close the reader and the file

        //print out the array
        for(int i = 0; i < rows; i++){
            for(int j = 0; j < columns; j++){
                System.out.println(dmtData[i][j]);
            }
        }

        //code here to find highest number
        System.out.println("The highest peak in this area is: ");

        //code here to find lowest number
        System.out.println("The lowest dip in this area is: ");

    }

} 
```

哦，如果你试图运行代码以了解它是如何工作的并且需要我使用的文件，请给我发电子邮件，我会发送给你，我非常感谢任何帮助:) 我的电子邮件是Spooce199@hotmail.co.uk 希望每个人都有一个可爱的圣诞节 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:35:01.497

如果您以某种方式附加文件会很棒......但是，从它的外观来看，我认为这个

```
 double high = Double.MIN_VALUE;
    double low = Double.MAX_VALUE; 

    for(int i = 0; i < dmtData.length; i++){
        for(int j = 0; j < dmtData[i].length; j++){
            if(dmtData[i][j] > high){
                high = dmtData[i][j];
            }
            else if(dmtData[i][j] < low){
                low = dmtData[i][j];
            }
        }
    } 
```

应该从 dmtData 获取最大值和最小值。我没有测试它，所以尝试一下或过去粘贴 bin 中的 dmt.asc 并包含链接。

# ios - DEB包编译后添加preinst

> ID：14032984
> 
> 赞同：0
> 
> 时间：2012-12-25T18:21:20.917
> 
> 标签：ios, jailbreak, deb

大约一年前，我的好友为我的 iPad 编写了一个自定义补丁，它允许我在越狱的情况下使用某些应用程序。不幸的是，它不再起作用，但我发现可以通过在安装 deb 包之前手动创建一些目录来修复它。

是否可以将此 preinst 代码与我现有的 deb 文件捆绑在一起，以便在安装失败之前自动创建目录？请注意，我没有 deb 包的原始源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:27:20.823

当然。提取 Debian 软件包的内容（使用），然后在 DEBIAN 目录中`dpkg -x`创建一个名为的文件。`preinst`这必须是具有适当权限的可执行文件（或 shell 脚本）；通常情况下 0755 已经足够好了。内容可能如下：

```
#!/bin/bash

mkdir -p /path/to/folder 
```

然后使用 重新创建包`dpkg-deb --build`，现在应该没问题了。

# linux - Linux 中的多个硬件定时器

> ID：14032986
> 
> 赞同：3
> 
> 时间：2012-12-25T18:21:38.460
> 
> 标签：linux, timer, kernel

问题 - 我的 Linux 系统上存在间歇性时钟漂移（2 秒），因此内核计时器线程偶尔会执行 2 秒 + 超时时间

问题 - 有多个硬件时钟源（TSC、HPET、ACPI_PM），如果主时钟源发生漂移，是否可以创建强制使用辅助时钟源作为后备的内核定时器线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:21:25.557

您所描述的听起来不像时钟漂移（系统错误），而是像丢失的计时器中断。如果您有另一块可以生成定时中断的硬件（HPET、RTC，但不是 TSC），您可以从定时器或中断处理程序（或处理程序）进行时间敏感处理，以先发生者为准，您只需要在它们之间设计某种同步。

如果您遇到真正的时钟漂移，当您的时钟速度低于实时时，您可以尝试估计它并在安排计时器时进行补偿。但是丢失中断是更严重问题的标志，解决根本原因是有意义的，这也可能影响您的辅助中断源。

# c# - c#中的锁定错误

> ID：14032988
> 
> 赞同：5
> 
> 时间：2012-12-25T18:21:47.087
> 
> 标签：c#, multithreading, locking, serial-port

我正在尝试使用 SerialPort 在 c# 中执行请求-响应通信模块。这是一个非常简单的实现，只是为了证明它有点工作（SerialPort 不能正常工作（它是一个 USB 虚拟 COM 端口），有时会吃几个字符，可能是一些 Windows 驱动程序错误）。

但是演示不起作用：-/

当在表单上使用 propertygrid 时，它读取对象的属性，然后发送从远程设备读取属性的请求，会发生非常奇怪的事情：一次同时调用多个 SendCommand。

我尝试使用 lock{} 块来使调用按顺序进行，但它不起作用。即使有锁，也有不止一个呼叫进入保护区。

你能告诉我我做错了什么吗？

我的代码：

```
 SerialPort sp;

    public byte[] SendCommand(byte[] command)
      {
          //System.Threading.Thread.Sleep(100);
          lock (sp)
          {
              Console.Out.WriteLine("ENTER");
              try
              {

                  string base64 = Convert.ToBase64String(command);

                  string request = String.Format("{0}{1}\r", target_UID, base64);

                  Console.Out.Write("Sending request... {0}", request);

                  sp.Write(request);

                  string response;

                  do
                  {
                      response = sp.ReadLine();
                  } while (response.Contains("QQ=="));

                  Console.Out.Write("Response is: {0}", response);

                  return Convert.FromBase64String(response.Substring(target_UID.Length));
              }

              catch (Exception e)
              {
                  Console.WriteLine("ERROR!");
                  throw e;
              }
              finally
              {
                  Console.Out.WriteLine("EXIT");
              }
          }

      } 
```

输出：

```
ENTER
Sending request... C02UgAABAA=
Response is: cgAABAAARwAAAA==

EXIT
ENTER
Sending request... C02UgQARwA=
ENTER
Sending request... C02UgAABAA=
Response is: gQARwAAPHhtbD48bWVzc2FnZT5IZWxsbyBYWDIhPC9tZXNzYWdlPjxkZXN0aW5haXRvbj5NaXNpPC9kZXN0aW5hdGlvbj48L3htbD4= 
```

注意到两个 ENTER-s，它们之间没有 EXIT 吗？这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T19:26:42.023

您需要记住*lock*关键字的作用，它只允许一个**线程**进入锁。问题是，您没有使用任何线程。所有这些代码都在 UI 线程上运行，即程序的主线程。

您需要了解的下一个细节是 UI 线程是特殊的，它是可*重入的*。该`sp.ReadLine();`调用将阻塞 UI 线程。这是非法的，GUI 程序的 UI 线程作为“单线程单元”运行，由程序 Main() 方法上的 [STAThread] 属性启用。STA线程的合约禁止它阻塞，这很可能导致死锁。

为了满足 STA 的要求，每当在 UI 线程上运行的代码执行阻塞操作时，CLR 都会做一些特殊的事情，例如 SerialPort.ReadLine() 所做的。它泵送一个消息循环以确保 Windows 发送的消息不断被分派。该消息循环与 Application.Run() 所做的事情相同。

也许您可以看到它的标题，允许 PropertyGrid 再次调用您的 SendCommand() 方法。锁根本不起作用，这发生在同一个线程上。

解决这个问题并不容易，我们看不到触发 SendMessage() 的代码。但是您需要以某种方式防止这种情况发生。[此问题](https://stackoverflow.com/q/4540244/17034)中有关此行为的更多背景信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T18:25:05.880

`sp`字段分配在哪里？锁只对非空对象起作用。

如果`sp`在每次调用时分配不同，则锁不会是互斥的（锁只在同一个对象实例上互斥）。在这种情况下，您需要有一个静态字段用于锁定：

```
private static readonly object _lockObject = new object(); 
```

**编辑：** 我现在根据其他答案中的评论看到，您实际上是在 UI 线程上运行此逻辑，这导致当消息队列被抽出时，锁在同一个线程（UI 线程）上被重新输入多次. 在不同的线程上运行此代码，您将获得两个优势：(1) UI 不会在执行此可能长时间运行的代码时锁定，以及 (2) 将始终在新线程上获取锁定，确保随后的调用`SendCommand`都将在它们自己的线程上，因此可以根据需要顺序进入锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:33:07.137

您应该尝试/更改两件事：

1.制作一个单独的字段，仅用于锁定

2.应用双重锁定检查：[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-13T17:29:52.390

串行端口 sp;

```
public byte[] SendCommand(byte[] command)
  {
      //System.Threading.Thread.Sleep(100);
      lock (sp)
      {
          Console.Out.WriteLine("ENTER");
          try
          {

              string base64 = Convert.ToBase64String(command);

              string request = String.Format("{0}{1}\r", target_UID, base64);

              Console.Out.Write("Sending request... {0}", request);

              sp.Write(request);

              string response;

              do
              {
                  response = sp.ReadLine();
              } while (response.Contains("QQ=="));

              Console.Out.Write("Response is: {0}", response);

              return Convert.FromBase64String(response.Substring(target_UID.Length));
          }

          catch (Exception e)
          {
              Console.WriteLine("ERROR!");
              throw e;
          }
          finally
          {
              Console.Out.WriteLine("EXIT");
          }
      }

  } 
```

# android - 安卓与网络同步

> ID：14032994
> 
> 赞同：2
> 
> 时间：2012-12-25T18:22:17.497
> 
> 标签：android

我想知道是否有一些常用的技术可以将应用程序与服务器同步？我看过套接字框架，也许还有一些http？例如，在制作游戏或购物清单时，我在想，有没有想要分享的开发者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:43:16.203

我想说最常见的方法是使用 SSL/TLS 加密通过 HTTP POST 发送客户端数据。数据可以任何格式发送，但通常是 JSON 或 XML 消息。

最困难的部分是您需要某种形式的身份验证才能识别用户并以安全的方式更新/同步服务器数据库上的正确信息。查看[这篇文章了解一些基本概念](http://broadcast.oreilly.com/2009/12/principles-for-standardized-rest-authentication.html)。

在 android 中，您可以使用优秀的[Google Gson 库](http://code.google.com/p/google-gson/)将 Java 对象转换为 JSON 对象/从 JSON 对象转换。可以通过[Android API 方法](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)执行 Http 通信。

# c - 将 C 库与 Java、Ruby、Node、Python、Go、.NET 集成

> ID：14032998
> 
> 赞同：0
> 
> 时间：2012-12-25T18:22:34.163
> 
> 标签：c, interop, integration, code-reuse, platform-independent

**现状**

对于我的一个项目，我需要一个客户端库，它可以与我的每个主要编程平台的 API 进行通信。目前我只实现了一个（Java）并且在想'我不想这样做 8 次（或者希望其他人会这样做）'。

客户端比较小，但不小；主要通过 SSL 读取/写入和发送 TCP/UDP 数据。对客户端的每次调用都是一劳永逸的，因此它在自己的线程中完全异步工作。

**问题**

我在问自己编写一个 C 库并将其与其他平台集成是否有意义。

我做了一些研究，似乎每个平台都以不同的方式（显然）通过不同的必要努力来处理这个问题。我还意识到我从未见过类似的东西——例如，数据库驱动程序似乎总是从头开始编写，而不是在核心使用 C 库。开销是否太大？

我还阅读了有关 Thrift、Protocol Buffers 等的信息——但这似乎是针对网络互操作性的？

**问题**

所以最后一个问题是：

*在每个平台客户端的核心使用单个 C 库是否可行？如果是：应该怎么做？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T01:34:45.827

如果您想将相同功能的所有实现整合到一段代码中，则使用 C 库是有意义的——它可能是唯一可以被高级语言普遍使用的语言。

如果你能在一定程度上自动化这个过程，你的工作会容易得多。您可能想看看[SWIG](http://www.swig.org/)。它是一个绑定生成器，允许 C/C++ 代码与大量其他编程语言一起使用，包括您提到的大多数（如果不是全部）语言。

对于我相当肤浅的体验，SWIG 做得相当不错，尽管生成的代码*偶尔*需要一些调整......