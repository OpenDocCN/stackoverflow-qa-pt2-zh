# StackOverflow 问答 12743000-12743999

# weblogic - Web Logic Portlet - 获取查询字符串

> ID：12743005
> 
> 赞同：0
> 
> 时间：2012-10-05T09:05:02.197
> 
> 标签：weblogic, query-string, portlet, url-parameters, querystringparameter

我正在开发一个部署在 weblogic server 10 下的 portlet。在其他功能中，我的 portlet 需要获取一些在 URL 中传递的参数，并根据每个参数做一些事情。好吧，我的问题是我无法找出获取查询字符串的正确方法。我在互联网上找到了不同的方法，但它们似乎都不适用于 weblogic。我能够获取服务器名称、上下文路径或其他任何内容，但没有查询字符串..

有人知道对此有什么解决方案吗？或者至少给我一个线索？如果我从 JSP 中获取它们，我可以将它们传递给 .java 类吗？

最好的问候， 阿德里安·扎哈里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:17:49.523

Portlet 技术提供了两种主要类型的 url——ActionURL 和 RenderURL。

ActionURL 触发目标 portlet 上的 processAction（操作阶段方法），而 RenderURL 将请求转发到目标 portlet 上的 doView（呈现阶段方法）。

另外，请注意最好避免在呈现阶段发生任何 portlet 状态更改。

通常，将参数传递给 portlet 的 jsp 会...

```
 PortletURL url = renderResponse.createActionURL();
        url.setParameter("paramName", "paramVal");

        <a href="<%=url.toString()%>">Click Me</a> 
```

在 processAction 或 Action Phase 中检索参数的 portlet 会...

```
 public void processAction(ActionRequest request, ActionResponse response)
        throws PortletException, PortletSecurityException, IOException {
               ....
               String paramVal = (String)request.getParameter("paramName");
               ....
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:16:51.517

我找到了一个更好的解决方案来满足我的需求。我能够像这样获得httprequest：

```
HttpServletRequest httpRequest = (HttpServletRequest) request.getAttribute("javax.servlet.request"); 
```

然后从名为 referer 的标头中获取整个 url：

```
String referer = httpRequest.getHeader("referer"); 
```

以为我应该分享。谢谢 ！

# salesforce - 如何在获取时标记销售人员记录？

> ID：12743006
> 
> 赞同：0
> 
> 时间：2012-10-05T09:05:02.197
> 
> 标签：salesforce

我将使用soap api每天分批提取数据，我需要一个标志来识别前一天提取了哪些记录，这样接下来我就不会提取相同的记录。我该如何实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:32:12.907

存储您提取的每条记录的 id，然后只存储那些您不知道的具有 id 的记录

# javascript - 我可以在 javascript 中向“窗口”对象添加属性吗？

> ID：12743007
> 
> 赞同：50
> 
> 时间：2012-10-05T09:05:12.597
> 
> 标签：javascript, cross-browser

我可以在 javascript 中向“窗口”对象添加任何随机属性吗？就像是：

```
window.my_own_attr = "my_value" 
```

它对任何库有任何副作用吗？它是否跨浏览器兼容？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-05T09:06:38.337

> 我可以在 javascript 中向“窗口”对象添加任何随机属性吗？

是的，就像你展示的那样。

> 它对任何库有任何副作用吗？

不，除非您使用设置了然后覆盖的属性的库。

> 它是否跨浏览器兼容？

是的，完全。

* * *

话虽如此，这种做法通常是不受欢迎的。你最终可能会覆盖你不想覆盖的东西。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-05T09:13:54.570

在*所有浏览器*中，`window`是 javascript 全局命名空间。每个属性或方法都“存在”在该命名空间中。因此，如果您将属性分配给`window`，它实际上是*一个全局变量*。

例子：

```
window.myConstant = 5;

// note: a var declaration will be a window property too
// note 2: 'let' or 'const' will not be window properties
// below can also be done without 'var'.
var myConstantGlobal = 4;

console.log(`multiply(10) => ${multiply(10)}`);
console.log(`multiply() => ${multiply()}`);
console.log(`multiplyGlobalVar(10)) => ${multiplyGlobalVar(10)}`);
console.log(`multiplyGlobalVar() => ${multiplyGlobalVar()}`);

function multiply(val){
  return myConstant * (val || 1);
}

function multiplyGlobalVar(val){
  return window.myConstantGlobal * (val || 1);
}
```

您必须谨慎使用 javascript 框架。例如，如果您声明`window.JQuery`并使用`JQuery`框架，`JQuery`命名空间将被您的分配替换，使其无用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T09:06:48.310

是的，你可以，但一般来说你不应该。

该`window`对象也是 JS 默认的“全局”对象，因此所有全局变量都被添加到那里。

除非您覆盖已经存在的属性，否则您不太可能破坏任何东西，但是将变量转储到 上`window`或以其他方式创建大量全局变量被认为是不好的做法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-16T15:07:48.927

我不会重复其他人所说的：这种做法的 hackyness。但是当使用像 Angular 这样的刚性框架与普通 HTML / JS（或 jQuery）代码混合时，它会非常有用。这也是 hacky 和不赞成的，但有时有充分的理由，比如如果你有很多预先存在的 JS 代码，这些代码很难集成到框架中。

对我来说更有趣的问题是如何利用向全局`window`对象添加属性的能力。当我想将 Angular 提供程序（服务）的方法公开给无法注入服务的代码时，我使用了一种模式，这可能是因为它在 Angular DI 框架之外运行。我这样做的方式如下：

1.  将您的服务定义为顶级模块中的提供者。
2.  在 app.component.js 的构造函数或 onInit （或导入提供程序的任何顶级组件）中，正常注入提供程序，执行它需要的任何一次初始化，然后调用`window['MyServiceName'] = this`

假设您将提供程序设计为遵循单例模式，您的提供程序的方法现在可以从任何地方安全地调用。非 Angular 脚本只需调用`window['MyServiceName'].methodName()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T10:39:44.717

在 IE 中，如果元素具有 id，则该节点可作为属性在窗口对象上访问：

`<div id="num"></div>`

`alert(num); //Element`

`num = 3; //throws exception`

`var num = 3; //ok`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T09:08:00.380

这会正常工作，在使用相同的变量名之前不会与任何库冲突，将在所有浏览器中工作，但不推荐，因为这会创建全局 JS 变量。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-19T15:31:31.093

正如其他人所指出的，是的，你可以，是的，这意味着添加“全局变量”。

拥有全局变量不是最佳实践，但有时它是最简单的事情。例如，如果您使用 IFrame 并希望子窗口访问父窗口的某些属性。这样的属性必须是“全局的”，孩子才能访问它。但这也表明它不是“真正的全局”，它只是特定窗口的属性。但它可能与其他属性名称冲突，例如在同一窗口中定义的函数名称，可能是您使用的某些库。

所以我们知道全局变量是不好的。如果我们决定使用它们，我们能做些什么来减少它们的坏处吗？

是的，有：定义一个具有或多或少唯一名称的 SINGLE 全局变量，并将 OBJECT 存储到其中。将您需要的所有其他“变量”存储为该单个对象的字段。

这样您就不需要添加多个全局变量（每个窗口）。还不错。

命名它或多或少是唯一的，因此它不太可能与其他任何人的单一全局冲突。例如，您可以使用 name + 's' 作为变量名：

```
window.Panus  = {}; 
```

:-)

# html - jstree修剪长文本

> ID：12743012
> 
> 赞同：1
> 
> 时间：2012-10-05T09:05:23.250
> 
> 标签：html, jstree, css

我创建了一个jstree。

可能存在标签很长的节点，例如 - **qwerewurweuirwerweurwerwerwerewrwerwerewr**。在这种情况下，我希望像这个**qwerewurwe 一样打破这个标签......**

`text-overflow: ellipsis`影响

这是我的小提琴 - [http://jsfiddle.net/juyMR/](http://jsfiddle.net/juyMR/)

在我的小提琴`text-overflow: ellipsis`不工作。怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:44:42.850

您还需要添加以下内容：

```
overflow:hidden;
white-space:nowrap; 
```

你应该为你的容器设置一个宽度

# php - 选项值中的php未定义变量

> ID：12743019
> 
> 赞同：0
> 
> 时间：2012-10-05T09:05:59.617
> 
> 标签：php

我很抱歉问这个问题，因为我认为它有一个非常简单的答案，但我真的一点也不了解 php。我想安装 bandwidthd 用于网络监控，我想要一个选项，它可以让你在网关上运行 bandwidthd 守护程序，所有信息都导出到另一台机器上的 postgres 数据库。同样在那台机器上，带有数据库的那个我已经设置了一个apache服务器来显示bandwidthd的webapp。web up 是一堆似乎根本不起作用的 php 文件，所以我只是花时间纠正它们。我已经能够获得一些权利，但现在我被卡住了。我有以下代码：

```
<td><SELECT name="sensor_name">

<OPTION value="none">--Select A Sensor--
<?php
$dbh = pg_pconnect("host=localhost dbname=BandwidthD user=postgres");
$sql = "SELECT sensor_name from sensors order by sensor_name;";
$result = pg_query($dbh, $sql);
while ($r = pg_fetch_array($result))
    echo "<option value=\"".$r[0]."\" ".($sensor_name==$r[0]?"SELECTED":"").">".$r[0]."\n";
?> 
```

当页面执行时，它说 sensor_name 是未定义的，但据我所知，在我看来，变量应该在该行初始化。如果您有任何建议，请告诉我，但请记住，我不知道任何 php，我只是冒险猜测，因为它是一种编程语言，它应该是合乎逻辑的。

我在想 $sensor_name 会在代码中被初始化，因为我也有这个代码：

```
 <td><SELECT name="limit">
 <OPTION value="none">--How Many Results--
 <OPTION value=20 <?php=$limit==20?"SELECTED":""?>>20
 <OPTION value=50 <?php=$limit==50?"SELECTED":""?>>50
 <OPTION value=100 <?php=$limit==100?"SELECTED":""?>>100
 <OPTION value=all <?php=$limit=="all"?"SELECTED":""?>>All
 </select> 
```

并且限制没有在其他任何地方声明，也没有给出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:08:40.660

在我看来 $sensor_name 不存在。您从数据库中获取 $results，这是一个数据库结果的枚举，其中您有一个索引为“sensor_name”。

因此，我认为您应该替换此行（未测试）：

```
echo "<option value=\"".$r[0]."\" ".($sensor_name==$r[0]?"SELECTED":"").">".$r[0]."\n"; 
```

有了这个

```
echo "<option value=\"".$r[0]."\" ".($result['sensor_name']==$r[0]?"SELECTED":"").">".$r[0]."\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:12:33.723

该代码`$sensor_name == $r[0]`不会为 赋值`$sensor_name`，而是将其与 进行比较是否相等`$r[0]`。

该代码`$sensor_name==$r[0]?"SELECTED":""`表示​​如果`$sensor_name`等于`$r[0]`（行中的 sensor_name 字段），则将操作评估为`SELECTED`，否则评估为`''`。

`$sensor_name`没有在您的代码中的任何地方定义，这就是您收到通知的原因。

# asp.net - 为什么这个对 aspnet_compiler 的调用不会产生新的 .NET 程序集？

> ID：12743021
> 
> 赞同：1
> 
> 时间：2012-10-05T09:06:08.147
> 
> 标签：asp.net, visual-studio-2010, azure, azure-web-roles, aspnet-compiler

我正在尝试让 Visual Studio 预编译将部署在 Azure 上的 ASP.NET 应用程序。我已将以下内容添加到我的 .csproj 文件中：

```
<Target Name="AfterBuild">
    <Message Text="Starting AspNetCompiler for $(ProjectDir)" Importance="high" />
    <AspNetCompiler
        VirtualPath="/"
        PhysicalPath="$(ProjectDir)"
    />
</Target> 
```

现在，当我要求 Visual Studio 准备服务包时，生成输出中会出现以下内容：

```
Starting AspNetCompiler for [PathToMyProject]
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe -v / -p [PathToMyProject] 
```

如果我在任何视图文件中植入错误，则会识别出错误并如此清楚地破坏构建，则执行预编译。

然而，我在结果中的任何地方都看不到任何新的 .NET 程序集。

如何让 ASP.NET 编译器为视图创建 .NET 程序集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:57:03.420

如果您不指定输出目录，您应该在此文件夹中找到输出：

**C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\some-random-id**（尝试按修改日期排序以找到最新目录）。

调用**aspnet_compiler.exe**时，您还可以将输出文件夹附加到命令中：

```
aspnet_compiler -v "/" -p "C:\Projects\WebApplication1\WebApplication1" C:\CompileOutput 
```

在这里，您可以在我的 C:\CompiledOutput 文件夹中看到输出

![在此处输入图像描述](../Images/6c48fe28b5b0a0ea012c2ab3df5823c7.png)

# sql-server - SQL Server 2005：更改现有数据库和 LINQ2SQL 的排序规则

> ID：12743023
> 
> 赞同：0
> 
> 时间：2012-10-05T09:06:13.920
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个 SQL Server 2005 数据库。它是使用不区分大小写的默认排序规则创建的（我的错！）。这与我使用的所有其他数据库不同，其中排序规则默认区分大小写。我主要考虑比较字符串而不是排序。我在无法为`WHERE`子句指定排序规则的情况下使用 Linq-to-SQL。

似乎更改现有数据库/服务器（以及所有表的字段！）的排序规则很容易出错，并且没有用于此的工具。

也许我错过了一些东西并且有一个干净的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:08:01.207

尝试这个：

```
Setup /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=InstanceName 
/SQLSYSADMINACCOUNTS=accounts /[ SAPWD= StrongPassword ] 
/SQLCOLLATION=CollationName 
```

通过 SQL 命令 promt 运行此命令，然后重建 master 数据库。

对于特定数据库

```
USE master;
GO
ALTER DATABASE yourDBname
COLLATE French_CI_AS ;
GO 
```

# c# - 制作自己的 Windows 8 应用主题

> ID：12743027
> 
> 赞同：2
> 
> 时间：2012-10-05T09:06:40.833
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-store-apps

我正在开发一个应用程序，并希望将我自己的风格应用到它上面。XAML 有一些称为主题目录的东西，我试图将其用于我的主题。事实证明，windows 有 3 个预定义的主题；浅色、深色和高对比度。当我将资源目录上的 x:Key 属性设置为包含我想使用的主题而不是 3 个预定义或默认值之一时，它不起作用。有谁知道为什么？

```
<ResourceDictionary.ThemeDictionary>
    <ResourceDictionary x:key="Default"> // Does work
        (...)
    </ResourceDictionary>
    <ResourceDictionary x:key="MyOwnThemeKey"> // Does not work
        (...)
    </ResourceDictionary>
</ResourceDictionary.ThemeDictionary> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:55:14.463

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh968442.aspx)：

> 主题词典是一种特殊类型的合并词典，旨在保存根据用户当前在其 PC 上使用的主题而有所不同的资源。例如，“浅色”主题可能使用白色画笔，而默认主题可能使用深色画笔。画笔会发生变化，但使用画笔作为资源的控件的组成可能是相同的，只需引用主题资源即可。

从[这里开始](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.resourcedictionary.themedictionaries.aspx)：

> 一个或多个 ResourceDictionary 对象元素。每个这样的 ResourceDictionary 都必须有一个 x:Key 属性。该属性的值必须是唯一的，并且应该引用已知的主题名称。每个资源字典及其内容应旨在为命名资源提供主题值，否则这些资源会被其他资源消耗。例如，“HighContrast”的主题词典可能包括对其他样式或过渡资源中其他地方使用的部分或全部画笔或颜色键控资源的重新定义，以便产生必要的对比度级别以满足高对比度设计要求。

基本上，主题词典旨在修改现有主题，并根据当前操作系统主题进行选择。如果没有该名称的操作系统主题，则无法选择它。

# computational-geometry - 如何定期用点填充多边形？

> ID：12743030
> 
> 赞同：3
> 
> 时间：2012-10-05T09:06:51.467
> 
> 标签：computational-geometry

填充矩形很简单：只需制作一些网格。但是，如果多边形是无条件的，那么任务就变得不那么简单了。
可能“定期”可以表述为彼此点之间的距离为：R ± alpha。但我不确定这一点。
也许有一些已知的算法可以实现这一点。
补充：
我需要生成网，没有大洞，也没有大的点聚集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:00:13.290

您是否考虑过使用点的力导向布局？

在多边形的边界框上随机散布一些点，然后重复应用两个简单的规则来调整它们的位置：

1.  如果一个点在多边形之外，将它移动到最小可能的距离，使其位于其中，即：到多边形边缘上最近的点。
2.  点以与它们之间的距离成反比的力相互排斥，即：对于每个点，考虑每隔一个点并计算将两个点直接分开的排斥向量。向量对于近点应该大，对于远点应该小。对向量求和并添加到点的位置。

经过多次迭代后，点应稳定在多边形区域上均匀分布的稳定状态。达到这种状态的速度取决于多边形的几何形状以及您如何缩放点之间的排斥力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T08:22:15.637

您可以计算多边形的约束 Delaunay 三角剖分并使用 Delaunay 细化算法（使用此关键字搜索）。

我最近在 Fade2D 库[http://www.geom.at/fade2d/html/](http://www.geom.at/fade2d/html/)中实现了细化。它采用没有自相交的任意多边形以及每个所得三角形的外接圆半径的上限。当前版本 1.02 中尚未包含此功能，但如果您想尝试，我可以为 Linux 或 Win64 编译当前开发版本。

![带孔多边形的均匀细化](../Images/1d4986c2b9c3239732361197b8b45720.png)

# html - 重定向到另一个页面元标记

> ID：12743038
> 
> 赞同：3
> 
> 时间：2012-10-05T09:07:11.690
> 
> 标签：html, redirect, meta-tags

如果我想重定向到我的 HTML 文件中的另一个页面，是否必须将元标记放在中，`head`或者我可以将它放在文件顶部的 DOCTYPE 之前吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:09:00.917

您不能`meta`在 DOCTYPE 上方放置标签。DOCTYPE 必须始终是 HTML 文档中的第一个元素，并且`meta`标签只能放在`head`.

> 文件必须按给定顺序由以下部分组成：
> 
> *   （可选）单个“BOM”（U+FEFF）字符。
> *   任意数量的注释和空格字符。
> *   文档类型。
> *   任意数量的注释和空格字符。
> *   根元素，采用 html 元素的形式。
> *   任意数量的注释和空格字符。

来源：[http ://www.w3.org/TR/html5/syntax.html#writing](http://www.w3.org/TR/html5/syntax.html#writing)

出于这个问题的目的，规范说文档必须以 DOCTYPE 开头，然后是根`html`元素。虽然`meta`标签可能仍然有效，但不能保证它今天会这样做并且将来会继续这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:10:45.417

[W3C 不赞成使用它，但他们确实在W3C](http://www.w3.org/TR/WCAG10-HTML-TECHS/#meta-element)上提供了一个示例：

```
<HEAD>
    <TITLE>Don't use this!</TITLE>
    <META http-equiv="refresh" content="5;http://www.example.com/newpage">
</HEAD>
<BODY>
    <P>If your browser supports Refresh, you'll be transported to our
    <A href="http://www.example.com/newpage">new site</A>
    in 5 seconds, otherwise, select the link manually.
</BODY> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:10:58.340

元标记必须在该`<head></head>`部分内。之前不能添加任何东西`<!DOCTYPE html>`

[**这里是 DOCTYPE 的详细描述**](http://msdn.microsoft.com/en-us/library/office/aa218654%28v=office.11%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:12:24.503

GIYF：[H76：使用元刷新创建即时客户端重定向](http://www.w3.org/TR/WCAG20-TECHS/H76)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-16T07:09:27.887

**您应该在 HTML 页面的head**部分插入以下行，将 http:example.com/ 替换为您要将查看者重定向到的实际网页：

> < meta http-equiv="刷新" content="2;url= [http://example.com/](http://example.com/) " />

这是一个在典型 HTML 页面中插入正确行的示例。请注意，它位于标题标签之上。

```
<html>
<head>
<meta http-equiv="refresh" content="2;url=http://example.com" />
<title>Page Moved</title>
</head>
<body>
This page has moved. Click <a href="http://www.example.com">here</a> to go to the new page.
</body>
</html> 
```

# .net - .NET 是否有 XQuery 3.0 实现？

> ID：12743039
> 
> 赞同：1
> 
> 时间：2012-10-05T09:07:15.383
> 
> 标签：.net, xquery

我正在寻找 .NET 的 XQuery 3.0 实现。有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:49:40.153

XmlPrime 应该在标准达到候选推荐标准时支持 XQuery 3.0。在撰写本文时，它仍处于草稿中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:59:08.390

XMLPrime （以前称为[XQSharp](http://www.xmlprime.com/xmlprime/index.htm)）是一个原生的 .NET XQuery 库，*但仅支持 XQuery 1.0*。

[Saxon](http://www.saxonica.com/documentation/dotnetdoc/index.html)在 Java 和 .NET 中提供 XQuery/XSLT 处理，并且可以作为库嵌入。许多其他 XML 数据库（*可能会*提供更好或更差的性能，具体取决于文档、文档大小和用例）都有接口，看看[BaseX](https://github.com/BaseXdb/basex-api/tree/master/src/main/c%23)、[Marklogic](http://www.marklogic.com/products-and-services/marklogic-6/)和[可能更多](http://www.w3.org/XML/Query/#implementations)。它们都支持 XQuery 3.0，但您必须将它们作为独立运行，您可以使用一些 .NET-native 接口访问它们。

它们都有特殊的（缺点）优势，因此选择一个在很大程度上取决于您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-28T12:56:07.470

[XmlPrime](https://www.xmlprime.com/) 3.0 确实支持 XQuery 3.0 和 XPath 3.0。

# php - 如何使用 PHP 在数组中返回这个 XML-RPC 响应？

> ID：12743042
> 
> 赞同：0
> 
> 时间：2012-10-05T09:07:19.553
> 
> 标签：php, wordpress, xml-rpc

我正在尝试组合一个 WordPress 插件，我想通过 XML-RPC 获取所有类别（其他 WordPress 博客）的列表。我有以下代码，到目前为止它看起来有效：

```
function get_categories($rpcurl,$username,$password){   
    $rpcurl2 = $rpcurl."/xmlrpc.php";

    $params = array(0,$username,$password,true);
    $request = xmlrpc_encode_request('metaWeblog.getCategories',$params);
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $rpcurl2);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml"));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);

    $results = curl_exec($ch);
    $res = xmlrpc_decode($results);
    curl_close($ch);
    return $res;
} 
```

如果我使用`$res`我得到以下字符串作为响应：`Array`

如果我使用`$results`，那么我得到：

```
categoryId17 parentId0 descriptionTest categoryDescription categoryNameTest
htmlUrlhttp://test.yoursite.com/?cat=17 rssUrlhttp://test.yoursite.com/?feed=rss2&amp;cat=17
categoryId1 parentId0 descriptionUncategorized categoryDescription
categoryNameUncategorized htmlUrlhttp://test.yoursite.com/?cat=1
rssUrlhttp://test.yoursite.com/?feed=rss2&amp;cat=1 
```

在这种情况下，我需要在`description`so`Uncategorized`之后提取名称。`Test`

这是我第一次用 PHP 编码。我通过将它们回显到页面来获得这些结果，因此不确定它们是否在该过程中被更改...

顺便说一句，我修改了上面的代码，从远程发布到 WordPress 博客，所以也许我没有正确设置一些选项？

我得到`var_dump($res)`：

```
array(2) { [0]=> array(7) { ["categoryId"]=> string(2) "17" ["parentId"]=> string(1)
"0" ["description"]=> string(4) "Test" ["categoryDescription"]=> string(0) ""
["categoryName"]=> string(4) "Test" ["htmlUrl"]=> string(40)
"http://test.youreventwebsite.com/?cat=17" ["rssUrl"]=> string(54)
"http://test.youreventwebsite.com/?feed=rss2&cat=17" } [1]=> array(7) {
["categoryId"]=> string(1) "1" ["parentId"]=> string(1) "0" ["description"]=>
string(13) "Uncategorized" ["categoryDescription"]=> string(0) "" ["categoryName"]=>
string(13) "Uncategorized" ["htmlUrl"]=> string(39) "http://test.youreventwebsite.com/?cat=1"
["rssUrl"]=> string(53) "http://test.youreventwebsite.com/?feed=rss2&cat=1" } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:36:05.037

您需要迭代您的数组：

```
foreach($res as $item) {
   echo $item['description'] . $item['categoryName'] . $item['htmlUrl']; //etc...

} 
```

# libxml2 - 如果启用代理，xmlReadFile 失败

> ID：12743047
> 
> 赞同：0
> 
> 时间：2012-10-05T09:07:32.447
> 
> 标签：libxml2

我正在使用 libxml2 库来解析 URL。它在开放端口环境中正常工作，但如果启用了代理，则 xmlReadFile 失败。它返回 NULL。请任何人帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:03:53.120

我无法测试自己，没有代理。但是查看`nanohttp.c`文件内部（属于 libxml 源）让我认为 libxml 尊重**environment variable`http_proxy`**。在访问 libxml 之前尝试设置此变量，看看它是否有帮助。并且不要设置`no_proxy`变量，因为它会阻止使用代理。

# statistics - 将相关矩阵从 [-1, 1] 空间映射到 [0, 1] 空间的最佳方法

> ID：12743048
> 
> 赞同：0
> 
> 时间：2012-10-05T09:07:34.320
> 
> 标签：statistics

所以警告我我的问题可能已经结束，我希望他们是错的:)

我的问题：让你有一个相关矩阵；您希望 1 和 -1 旁边的相关性趋向 1，而 0 旁边的相关性则保持在那里。

最简单的方法是使用绝对值，例如，如果`Rho`你是相关矩阵，那么你将使用`abs(Rho)`.

有没有比上述方法理论上更正确的方法？

例如：如果我使用 Normal pdf 而不是绝对值怎么办？

```
Adjusted Rho = N(Rho, mu = 0, sigma = stdev(Rho)) 
```

`N`Normal pdf 函数在哪里。

你有更好的办法吗？

每种方法的优缺点是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:31:53.110

尝试这个。

```
x <- runif(min = -1, max = 1, n = 100)
tr <- (x - min(x))/diff(range(x))
plot(x)
points(tr, col = "red") 
```

您还可以使用 logit 链接函数来保证值介于 0 和 1 之间。但鉴于您的值被限制在 -1 和 1 之间，您将只能获得 ~[0.3, 1] 范围内的值。

![在此处输入图像描述](../Images/580371ff12bb1755bf3bbe1abe5bcddc.png)

# ios - 加载其他纹理时，一个纹理的粘合会发生变化

> ID：12743049
> 
> 赞同：0
> 
> 时间：2012-10-05T09:07:34.867
> 
> 标签：ios, opengl-es, opengl-es-2.0, textures

启动我的应用程序时，我首先为加载屏幕加载纹理。在显示加载屏幕时，我会加载所有其他纹理、声音，并设置所有内容以运行应用程序。奇怪的是，在加载我的其他纹理时，加载屏幕纹理的 GLuint 突然改变，加载屏幕显示错误的图像（并在不久后崩溃）。

我的 _texLoadingScreen 变量只被分配一次，当应用程序首先开始加载纹理并获得值 1 时。在加载所有其他纹理时，即使 _texLoadingScreen 从未获得，该值也会从 0 跳转到 18 和其他值分配了什么新东西！？

我是否因为分配了太多纹理而对我的一个纹理单元造成了某种限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:54:08.373

在我看来，您对如何从变量中获取指针有疑问。不过，如果您不给我们您的代码，我们只能猜测。

# jquery - 如何防止div进出动画中的多次点击

> ID：12743052
> 
> 赞同：0
> 
> 时间：2012-10-05T09:07:44.360
> 
> 标签：jquery

我想通过单击将 div 移入和移出。我只是为 div 设置动画

```
<head>
    <title>Title</title>

     <style type="text/css" media="screen">
        .slide-out-div {
            position:relative;
            background: none repeat scroll 0 0 #F2F2F2;
            border: 2px solid #29216D;
            color: #666666;
            font-size: 14px;
            padding: 20px;
            width: 250px;
            left: -210px; }
    </style>
</head>
<body>
     <div class="slide-out-div">
         <form>
             <a class="handle" href="http://link-for-non-js-users">SEARCH</a>
             <button id="myButton" type="submit" />
         </form>
     </div>
</body> 
```

这是脚本

```
$(document).ready(function(){
    var visible = 0;
    $(".slide-out-div").click(function() {
        var $div = $(this);
        if (visible == 0) {
            $div.animate({left: "10px"}, "slow");
            visible = 1;
        } else {
            $div.animate({left: "-210px"}, "slow");
            visible = 0;
        }      
    });
}); //end of  $(document).ready(fn) 
```

首先我想问一下我的剧本好吗？它正在工作，但这并不意味着它是有效的。其次，如果用户点击多次，那么当它到来或离开时，我认为动画会进入动画队列并且我的 div 会连续动画。我希望当用户第一次点击然后动画运行。多次点击不运行。如何防止用户多次点击？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:15:02.370

您可以使用该[`.stop()`](http://api.jquery.com/stop/)功能结束当前动画，然后在每次后续单击时开始新动画。这不会阻止多次点击，但可以用来阻止多个排队的动画。

或者，您可以使用[`:animated`选择器](http://api.jquery.com/animated-selector/)来检查元素当前没有被动画化，并且只有在这种情况下才动画化。

```
$(".slide-out-div").click(function() {
    var $div = $(this);
    if(!$div.is(':animated')) {
        if (visible == 0) {
            $div.animate({left: "10px"}, "slow");
            visible = 1;
        } else {
            $div.animate({left: "-210px"}, "slow");
            visible = 0;
        }      
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:17:16.583

一种方法是保持动画锁定，以下应该有效

```
$(document).ready(function(){
    var blockAnimation = false;
    var visible = 0;
    $(".slide-out-div").click(function() {
      if(blockAnimation != true){
        blockAnimation = true;
        var $div = $(this);
        if (visible == 0) {
            $div.animate({left: "10px"}, "slow");
            visible = 1;
        } else {
            $div.animate({left: "-210px"}, "slow");
            visible = 0;
        }  
       }    
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:17:37.767

一种可能的简短解决方案：

```
$(".slide-out-div").click(function() {
    var $div = $(this);
    $div.not(":animated").animate({
        left: $div.position().left == -210 ? 10 : -210
    }, "slow");
}); 
```

**演示：http:** [//jsfiddle.net/rXW9D/](http://jsfiddle.net/rXW9D/)

# android - 打开 GL ES1.0 Trails

> ID：12743059
> 
> 赞同：0
> 
> 时间：2012-10-05T09:08:09.140
> 
> 标签：android, opengl-es

我是新打开GL，我只想在屏幕上随机移动一个圆圈，当用户触摸圆圈时，我需要知道命中和未命中。这就是我能够通过在线课程实现的目标。

```
render class:

    public class HelloOpenGLES10Renderer implements Renderer {
    private int points = 250;
    private float vertices[] = { 0.0f, 0.0f, 0.0f };
    private FloatBuffer vertBuff;
    public float x = 0.0f, y = 0.0f;
    public boolean color = false;
    boolean first = true;

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glTranslatef(x, y, 0);
        gl.glColor4f(1.0f, 1.0f, 1.0f, 0f);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, points);

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        Log.i("TAG", "change" + width + ":" + height);
        gl.glViewport(0, 0, width, height);
        float ratio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glFrustumf(-ratio, ratio, -1, 1, 3, 7);
        GLU.gluLookAt(gl, 0f, 0f, -5f, 0.0f, 0.0f, 0f, 0.0f, 1.0f, 0.0f);
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {

        Log.i("TAG", "CREATE");
        gl.glClearColor(0.1f, 0.1f, 0.0f, 1.0f);
        initShapes();

    }

    private void initShapes() {

        vertices = new float[(points + 1) * 3];
        for (int i = 3; i < (points + 1) * 3; i += 3) {
            double rad = (i * 360 / points * 3) * (3.14 / 180);
            vertices[i] = (float) Math.cos(rad) * 0.10f;
            vertices[i + 1] = (float) Math.sin(rad) * 0.10f;
            vertices[i + 2] = 0;
        }
        ByteBuffer bBuff = ByteBuffer.allocateDirect(vertices.length * 4);
        bBuff.order(ByteOrder.nativeOrder());
        vertBuff = bBuff.asFloatBuffer();
        vertBuff.put(vertices);
        vertBuff.position(0);

    }

}

Activity:
    package com.example.opengltrail;

    import java.util.Random;

    import android.app.Activity;
   import android.opengl.GLSurfaceView;
    import android.os.Bundle;
    import android.util.FloatMath;
    import android.util.Log;
    import android.view.MotionEvent;
    import android.view.View;
    import android.view.View.OnTouchListener;

    public class MainActivity extends Activity implements OnTouchListener {

    private GLSurfaceView mGLView;
    float oldx = 0, oldy = 0;
    private HelloOpenGLES10Renderer m;
    ProgressDialogThread p;
    ProgressDialogThread123 t;
    boolean stop = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mGLView = new GLSurfaceView(this);

        m = new HelloOpenGLES10Renderer();

        mGLView.setRenderer(m);
        mGLView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
        setContentView(mGLView);

        mGLView.setOnTouchListener(this);
        p = new ProgressDialogThread();

    }

    @Override
    protected void onPause() {
        super.onPause();
        mGLView.onPause();
        p.stop();
        stop = false;

    }

    @Override
    protected void onResume() {
        super.onResume();
        mGLView.onResume();
        t = new ProgressDialogThread123();

        t.start();
        p.start();

    }

    /**
     * gets u the random number btw 0.0 to 1.0
     */
    public float getmearandom() {
        Random rng = new Random();
        float next = rng.nextFloat();
        Integer i = rng.nextInt();
        if (i % 2 == 0)
            next = next * (-1);
        return next;
    }

    class ProgressDialogThread123 extends Thread {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            super.run();

            for (; stop;) {
                p.run();
            }

        }
    }

    class ProgressDialogThread extends Thread {
        @Override
        public void run() {
            super.run();
            if (stop) {

                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                m.x = getmearandom();
                m.y = getmearandom();
                Log.i("m.x=" + m.x + ":", "m.y=" + m.y);
                mGLView.requestRender();
            }

        }
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        float x = event.getX();
        float y = event.getY();
        float x1 = ((x * 2) / 480);
        float y1 = ((y * 2) / 724);
        x1 = -1 + x1;
        y1 = -1 + y1;
        if (y < 362) {
            if (y1 > 0)
                y1 = -y1;
        } else if (y > 362) {
            if (y1 < 0)
                y1 = -y1;
        } else {
            y1 = 0;
        }

        if (x > 240) {
            if (x1 < 0)
                x1 = -x1;

        } else if (x < 240) {
            if (x1 > 0)
                x1 = -x1;
        } else {
            x1 = 0;
        }

        Log.i("x1=" + x1, "y1=" + y1);
        float d = (((m.x - x1) * (m.x - x1)) + ((m.y - y1) * (m.y - y1)));

        float dd = FloatMath.sqrt(d);
        if (dd <= 0.10f) {
            m.color = true;
            // mGLView.requestRender();
            Log.i("Tag", "Circle");
        }
        // m.x += 0.10f;

        return true;
    }
}

Please anyone help me !! thanks in advance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:54:03.407

如果您只在 2d 中绘图，我建议您松开“平截头体”和“lookAt”并将它们替换为带有坐标的“正交”：`ortho(viewOrigin.x, viewOrigin.x + viewSize.width, viewOrigin.y + viewSize.height, viewOrigin.y, -1.0f, 1.0f)`。这将使您的 GL 坐标系与您的视图坐标相同。至于圆顶点，不如用 1.0f 的半径创建它们。现在要绘制圆，在绘制调用之前，您只需“推”矩阵，转换为屏幕坐标（X，Y，.0f），缩放到以像素为单位的半径 R（R，R，1.0f）和“pop”通话后的矩阵..现在检查是否触摸了圆圈：

```
`bool didHit = ((touch.x-cicrcleCenter.x)*(touch.x-cicrcleCenter.x) +   
               (touch.y-cicrcleCenter.y)*(touch.y-cicrcleCenter.y))  
               <  R*R`; 
```

请注意，“ortho”中的“viewOrigin”取决于您捕捉触摸的位置：如果您在同一个视图中捕捉它们，无论视图在哪里，它都可能位于 (0,0)。这些坐标应与您在视图左上角和右下角按下时在触摸事件中收到的坐标相对应。

如果你真的需要在 3d 中绘制并且你将不得不使用截锥体，你将需要得到你的投影矩阵的逆以从你的触摸中创建 3d 射线，然后如果你喜欢的话，就像检查子弹一样检查命中。

# php - .htaccess 内部重定向不适用于子文件夹

> ID：12743060
> 
> 赞同：2
> 
> 时间：2012-10-05T09:08:12.057
> 
> 标签：php, .htaccess, mod-rewrite

我有一个站点，其中包含另一个站点，位于子文件夹中。例如，`www.domain.com`子文件夹是`www.domain.com/uk/`. 它们都包含重复文件，因此即使`.htaccess`文件相同。现在的问题是，当我通过子文件夹`.htaccess`内将用户重定向`uk`到同一目录中的文件时，它会将他们重定向到具有重复名称的父站点中的文件。

这是我在 .htaccess 文件中使用的规则：

```
RewriteRule ^category/[a-zA-Z0-9_-]+/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ final_final.php 
```

我对 mod_rewrite 没有太多经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:19:21.183

在父目录中`RewriteBase`应该是`/`

```
RewriteEngine On
RewriteBase / 
```

在子目录中`RewriteBase`应该是`/uk`

```
RewriteEngine On
RewriteBase /uk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:57:36.800

您还可以在具体重定向中指定具体路径，它不像 Gustonez 方式那样“干净”，但它

在 uk-htaccess 重定向到 uk 基本目录中也可以工作

```
RewriteRule ^category/(.*)$ /uk/$1 [L,R] 
```

并在 parent-htaccess 中重定向到没有 /uk/ 的基本目录

```
RewriteRule ^category/(.*)$ /$1 [L,R] 
```

但我认为你的重定向很奇怪

```
^category/[a-zA-Z0-9_-]+/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ final_final.php 
```

你真的需要url中的所有这些参数来重定向吗？
当您重定向任何这些参数时，您将在页面上解析这些参数中的任何一个，
您只需转到 final_final.php 页面而不向该页面发送参数，
另一件事是您没有 [L] 标记语句的结尾，
您最好准确地说明什么您需要，因为您拥有的此重定向可能不充分并且可能根本不起作用

# c - 使用clock()测量执行时间

> ID：12743063
> 
> 赞同：5
> 
> 时间：2012-10-05T09:08:21.777
> 
> 标签：c, cross-compiling, simulator

我正在使用 GCC 和专有的 DSP 交叉编译器运行 C 程序来模拟一些功能。我正在使用以下代码来测量程序特定部分的执行时间：

```
clock_t start,end;
printf("DECODING DATA:\n");
start=clock();
conv3_dec(encoded, decoded,3*length,0);
end=clock();
duration = (double)(end - start) / CLOCKS_PER_SEC;
printf("DECODING TIME = %f\n",duration); 
```

我的程序中定义的函数在哪里`conv3_dec()`，我想找到这个函数的运行时。

现在的问题是，当我的程序运行时，`conv3_dec()`函数运行了将近 2 个小时，但输出`printf("DECODING TIME = %f\n",duration)`显示函数的执行仅在半秒 ( `DECODING TIME = 0.455443`) 内完成。这让我很困惑。

我以前曾使用该`clock_t`技术来测量程序的运行时间，但差异从未如此巨大。这是由交叉编译器引起的吗？顺便说一句，模拟器模拟了一个运行频率仅为 500MHz 的 DSP 处理器，因此 DSP 处理器的时钟速度差异和我的 CPU 导致错误是测量 CLOCKS_PER_SEC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:11:15.663

`clock`测量 CPU 时间而不是挂钟时间。由于您没有在 cpu 上运行大部分代码，因此这不是正确的工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T09:18:25.943

对于像两个小时这样的持续时间，我不会太担心`clock()`，它对于测量亚秒级持续时间要有用得多。

`time()`如果您想要实际经过的时间，只需使用，例如（为丢失的内容提供的虚拟内容）：

```
#include <stdio.h>
#include <time.h>

// Dummy stuff starts here
#include <unistd.h>
#define encoded 0
#define decoded 0
#define length 0
static void conv3_dec (int a, int b, int c, int d) {
    sleep (20);
}
// Dummy stuff ends here

int main (void) {
    time_t start, end, duration;
    puts ("DECODING DATA:");
    start = time (0);
    conv3_dec (encoded, decoded, 3 * length, 0);
    end = time (0);
    duration = end - start;
    printf ("DECODING TIME = %d\n", duration);
    return 0;
} 
```

生成：

```
DECODING DATA:
DECODING TIME = 20 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:31:12.277

`gettimeofday()`功能也可以考虑。

* * *

gettimeofday() 函数将获取当前时间，以从 Epoch 开始的秒和微秒表示，并将其存储在 tp 指向的 timeval 结构中。系统时钟的分辨率未指定。

* * *

[以毫秒为单位计算 C 程序中经过的时间](https://stackoverflow.com/questions/1468596/c-programming-calculate-elapsed-time-in-milliseconds-unix)

[http://www.ccplusplus.com/2011/11/gettimeofday-example.html](http://www.ccplusplus.com/2011/11/gettimeofday-example.html)

# sql-server-2008 - 将 SQL 中的时间转换为没有毫秒

> ID：12743066
> 
> 赞同：9
> 
> 时间：2012-10-05T09:08:27.567
> 
> 标签：sql-server-2008

我的表中有一个`datetime`列，但我需要将它分成日期和时间，所以这就是我到目前为止所做的。

```
CONVERT(VARCHAR(10), [timeStamp], 103) AS date, CONVERT(TIME, [timestamp]) AS time 
```

但问题是，我在时间列中有毫秒（例如 23:39:55.0000000），那么我该怎么做才能只有小时：分钟：秒？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-05T09:13:01.703

您可以转换为[`DATE`](http://msdn.microsoft.com/en-us/library/bb630352(v=sql.105).aspx)和[`TIME(0)`](http://msdn.microsoft.com/en-us/library/bb677243(v=sql.105).aspx)。

```
CONVERT(DATE, [timeStamp]) AS date, CONVERT(TIME(0), [timeStamp]) AS time 
```

# android - Eclipse 配置 JAR 但无法访问它的类

> ID：12743068
> 
> 赞同：0
> 
> 时间：2012-10-05T09:08:34.170
> 
> 标签：android, jar, eclipse-indigo

我已经在 SO 上搜索了类似的问题，但没有找到任何问题。如果我重复这个问题，请原谅我，如果 SO 上有任何问题。

我遇到了一个奇怪的问题。即使我正确配置了 jar，我的 Indigo eclipse 也无法访问 jar 文件的类，并且它显示了我为项目添加的 jar 列表。

以前它运行完美，但现在我在从 Indigo eclipse 切换到 Juno eclipse 并再次回到 Indigo 之后遇到了这个问题。我不知道出了什么问题？我现在无法使用 jar 文件运行应用程序。它没有显示错误，但是当我的代码尝试使用 jar 文件的类时，它会给出运行时异常。

请帮我解决这个问题。

**示例日志猫：**

```
10-05 14:20:15.359: W/dalvikvm(517): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-05 14:20:15.370: E/AndroidRuntime(517): FATAL EXCEPTION: main
10-05 14:20:15.370: E/AndroidRuntime(517): java.lang.NoClassDefFoundError: twitter4j.http.AccessToken
10-05 14:20:15.370: E/AndroidRuntime(517):  at com.xxx.android.androidtwittersample.TwitterUtils.isAuthenticated(TwitterUtils.java:27)
10-05 14:20:15.370: E/AndroidRuntime(517):  at com.xxx.android.androidtwittersample.AndroidTwitterSample.setVisibilities(AndroidTwitterSample.java:213)
10-05 14:20:15.370: E/AndroidRuntime(517):  at com.xxx.android.androidtwittersample.AndroidTwitterSample.onCreate(AndroidTwitterSample.java:72)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.os.Looper.loop(Looper.java:130)
10-05 14:20:15.370: E/AndroidRuntime(517):  at android.app.ActivityThread.main(ActivityThread.java:3683) 
```

**编辑 ：**

我忘了提到我把我的罐子放在“lib”文件夹中。抱歉，规格较晚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:26:34.130

确保创建 libs 而不是 lib 目录来存储项目的额外库。如果它的库然后将其重命名为库，然后从库选项卡中删除所有添加的 jar，然后添加带有库路径的新 jar。现在运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:17:38.663

jar 文件需要放在 /libs 中才能工作（你也不应该在构建路径中需要它们，因为现在这是自动的）。

这是 ADT 中的一个变化，不记得是哪一个，但规则发生了变化，而且非常烦人的 eclipse 可以愉快地编译两种方式 - 所以它看起来很好，但实际上不能在 Android 设备上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:14:13.027

检查所有罐子是否按顺序标记并导出选项卡：http: [//i.stack.imgur.com/0w5R6.png](http://i.stack.imgur.com/0w5R6.png)

如果这没有帮助，请查看该链接： [http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# java - 在 android 中使用 NewGlobalReference 的 JNI 引用无效

> ID：12743073
> 
> 赞同：1
> 
> 时间：2012-10-05T09:08:53.307
> 
> 标签：java, c, android-ndk, java-native-interface

由于有限的 android 应用程序内存堆，我尝试使用 malloc 和 memcpy 在 C 中通过缓存位图数组创建。

所以在java方面我有：

```
private static native Bitmap getJNIBitmap(int id);
private static native void setJNIBitmap(int id, Bitmap bmp); 
```

将位图发送到 C：

```
Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
setJNIBitmap(id, bmp); 
```

从 C 中检索它：

```
Bitmap bitmap = getJNIBitmap(id); 
```

在 C 代码中，我有一个数组，我想使用位图缓存：

```
jobject bitmap_array[100]; 
```

要在 CI 中保存位图，请使用：

```
JNIEXPORT void JNICALL Java_droid_demo_ReadingActivity_setJNIBitmap(JNIEnv* env, jobject obj, jint id, jobject jniBmp) {

  AndroidBitmapInfo info;
  AndroidBitmap_getInfo(env, jniBmp, &info);

  long byteSize = (info.stride * info.height)+16;

  bitmap_array[(int)id] = (jobject *)malloc(byteSize);
  memcpy(bitmap_array[(int)id], jniBmp, byteSize);
  (*env)->NewGlobalRef(env, bitmap_array[(int)id]);
} 
```

从 C 中检索位图：

```
JNIEXPORT jobject JNICALL Java_droid_demo_ReadingActivity_getJNIBitmap(JNIEnv * env, jobject obj, jint id) {

  jobject temp = bitmap_array[(int)id];

  return temp;
} 
```

一般来说，我很擅长使用 JNI 和 C，但在我看来，这应该可行。好吧，它没有，我收到：

```
10-05 10:35:54.890: W/dalvikvm(12493): JNI WARNING: 0x5d5e0008 is not a valid JNI reference
10-05 10:35:54.890: W/dalvikvm(12493):              in Ldroid/demo/ReadingActivity;.setJNIBitmap:(ILandroid/graphics/Bitmap;)V (NewGlobalRef)
10-05 10:35:54.890: I/dalvikvm(12493): "main" prio=5 tid=1 RUNNABLE
10-05 10:35:54.890: I/dalvikvm(12493):   | group="main" sCount=0 dsCount=0 obj=0x41611568 self=0x416019f8
10-05 10:35:54.890: I/dalvikvm(12493):   | sysTid=12493 nice=0 sched=0/0 cgrp=apps handle=1074710320
10-05 10:35:54.890: I/dalvikvm(12493):   | schedstat=( 7665497000 93442000 221 ) utm=418 stm=348 core=1 
```

关于为什么我不能使 bitmap_array[(int)id] 成为全局参考的任何想法？甚至可能如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:29:57.010

jobject 只是看起来像一个 C 指针。实际上，它是 Java 虚拟机内部某些信息的不透明句柄。可以将像素数据从 Java 位图对象复制到本机 C 数组，但只能通过特殊的 API。也可以使用 JNI 函数从本机 C 代码创建 Java 对象，但两者都不能简单地转换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T01:11:43.077

试图从一开始就不是 Java 引用的东西中创建一个全局引用甚至没有任何意义。您没有对 NewGlobalRef() 的结果做任何事情，这使得调用它毫无意义，但是如果您想从 jniBmp 中进行全局引用，请将其传递给 NewGlobalRef() 并将*结果*存储在您的数组中。并且复制 jobject 的内容并不会首先复制位图数据。

# ruby-on-rails-3 - HasManyThroughAssociationNotFoundError 用户#show

> ID：12743076
> 
> 赞同：1
> 
> 时间：2012-10-05T09:09:01.717
> 
> 标签：ruby-on-rails-3, has-and-belongs-to-many

我有以下三个模型：

```
class User < ActiveRecord::Base
  has_many :associations
  has_many :pharmacies, :through => :accociations 
end

class Associations < ActiveRecord::Base
  belongs_to :user
  belongs_to :pharmacy
end

class Pharmacy < ActiveRecord::Base  
  has_many :associations
  has_many :users, :through => :accociations
end 
```

当我打开`users#show`操作时，我收到以下错误：

> ActiveRecord::HasManyThroughAssociationNotFoundError 在用户#show
> 
> 显示 /Users/fanboy/Sites/ndt_app_v6/app/views/users/show.html.erb 其中第 14 行提出：
> 
> > 找不到关联：模型用户中的关联
> 
> 提取的源代码（在第 14 行附近）：
> 
> ```
> 11:   <div class="span8">
> 12:     <%= form_for(@user) do |f| %>
> 13:       <%= f.label :pharmacy_ids, "Pharmacies" %><br />
> 14:       <%= f.collection_select :pharmacy_ids, Pharmacy.order(:name), :id, :name, {}, {multiple: true} %>
> 15:     <% end %>
> 16:   </div>
> 17: </div> 
> ```

基本上我想让用户将自己与药房联系起来。相反，我得到了上面的错误，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:59:24.030

您的评论已经过时了，链接的文档与您的问题无关。

你的代码的问题是你在几个地方有一个非常明显的错字。你的协会被称为`associations`，但你的`:through`用途`accociations`。

协会与 A **CC** ociations。

Rails 准确地告诉你错误是什么：

```
Could not find the association :accociations in model User 
```

您的链接文档解决了您的问题的原因是您可能正确拼写了新的关联名称。在编程时正确拼写是非常重要的，如此明显的拼写错误应该会引起你的注意。

# excel - 如何在 Excel Interop 中优化导出数据到 excel？

> ID：12743077
> 
> 赞同：1
> 
> 时间：2012-10-05T09:09:04.037
> 
> 标签：excel, export-to-excel, excel-interop

我正在使用 Excel 互操作从我的查询结果中创建 Excel 工作簿。当有数千条记录时，生成工作簿需要很长时间。下面的代码是我如何填充单元格的示例。

```
RowNo = 1
For i = 1 To 4000
   ColNo = 1
   For j = 1 To 5
      Dim cell As excel.Range = ws.Cells(RowNo, ColNo)
      Dim value = j
      cell.Value = value
      ColNo = ColNo + 1
   Next
   RowNo = RowNo + 1
Next 
```

上面的代码运行需要一分钟多的时间。我该如何优化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:48:16.037

找到了答案。您可以将数据写入数组，然后将数组写入 excel 范围，而不是逐个单元格地写入数据。请参阅[http://www.clear-lines.com/blog/post/Write-data-to-an-Excel-worksheet-with-C-fast.aspx](http://www.clear-lines.com/blog/post/Write-data-to-an-Excel-worksheet-with-C-fast.aspx)

```
private static void WriteArray(int rows, int columns, Worksheet worksheet)
{
    var data = new object[rows, columns];
    for (var row = 1; row <= rows; row++)
    {
        for (var column = 1; column <= columns; column++)
        {
            data[row - 1, column - 1] = "Test";
        }
    }

    var startCell = (Range)worksheet.Cells[1, 1];
    var endCell = (Range)worksheet.Cells[rows, columns];
    var writeRange = worksheet.Range[startCell, endCell];

    writeRange.Value2 = data;
} 
```

# objective-c - 在后台运行的 iPhone 应用程序可以通过网络将数据发送到远程服务器吗？

> ID：12743078
> 
> 赞同：1
> 
> 时间：2012-10-05T09:09:12.953
> 
> 标签：objective-c, ios, background, gps

此应用程序是位置感知应用程序。它使用 GPS 详细信息，因此可以在后台运行。但是是否可以在应用程序处于后台时将收集的数据发送到远程服务器？或者当屏幕被锁定时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:58:22.190

对于`Required background modes`添加`App registers for location updates`plist，这将使应用程序在后台工作，您可以将位置更新发送到服务器。在这里考虑您的位置服务不是持续开启的，否则它将耗尽设备的全部电池。希望这对你有帮助..

# makefile - 传递变量以生成文件

> ID：12743082
> 
> 赞同：0
> 
> 时间：2012-10-05T09:09:43.873
> 
> 标签：makefile

我阅读了有关 CPPFLAGS 的文档。很快，我了解到 CPPFLAGS 用于将参数传递给编译器。makefile 中的示例用法 CPPFLAGS 如下。

```
gcc $(CPPFLAGS) main.c -o main.o 
```

执行制作

```
make CPPFLAGS=-I../header 
```

什么是特殊的 CPPFLAGS 文本？它可以互换任何其他文本，如“FOO”。FOO 变量和 CPPFLAGS 变量有什么区别？将所有 CPPFLAGS 文本替换为 FOO 文本构建再次成功，没有任何变化。

实际需要解决的主要问题。有很多makefile。这些 makefile 中没有包含 CPPFLAGS 变量。有没有办法在不更改 makefile 的情况下传递编译器选项。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:06:55.060

> 什么是特殊的 CPPFLAGS 文本？它可以互换任何其他文本，如“FOO”

三点特别之处`CPPFLAGS`：

1.  这是许多工具遵循的约定。最值得注意的是 GNU autoconf/automake。
2.  GNU Make 提供了[隐式规则](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules)来构建许多目标类型。从 C 和 C++ 源代码编译时，这些隐式规则使用`CPPFLAGS`变量。`.o`如有必要，可以将这些规则替换为自己的规则。
3.  当您使用`CPPFLAGS`预处理器标志时，您遵循[最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。

> 这些 makefile 中没有包含 CPPFLAGS 变量

如果您的意思是在 makefile 中没有出现`CPPFLAGS`可能是因为使用了我上面提到的隐式规则。

# jquery - 如何在使用 jQuery 检索数据时淡入加载 div？

> ID：12743084
> 
> 赞同：1
> 
> 时间：2012-10-05T09:09:54.423
> 
> 标签：jquery, html, loading, fadein

我的网站使用一个`$.get`函数将通过链接提供的数据发送到一个 PHP 脚本，该脚本从数据库中检索数据并将该数据回显到该`$.get`函数，然后该函数使用一个`.html(data)`函数淡入数据并将其呈现在一个 div 中。

```
$(document).ready(function() {
    $('.topNavLink').click(function() {
        $.get('/view/scripts/data.php', { 'page' : $(this).text() }, function(data) {
            $('#contents').fadeOut(100, function() {
                $('#contents').html(data).fadeIn(100)
            });
        });
    });
}); 
```

`.topNavLink`当然是导航菜单中每个链接的类，该函数读取链接标签之间的文本以查找页面名称。

我有一个`<div id='#loading'>`最初被 CSS 隐藏的`opacity:0`. 我希望在单击`.fadeIn(100)`a 时使用一个函数淡入 div `.topNavLink`，然后调用上面的代码加载页面内容，最后淡出 div。

我之前尝试过调用 div fadeIn ，`$.get`如下所示：

```
$('.topNavLink').click(function() {
    $('#loading').fadeIn(100);
    $.get('/view/scripts/data.php', { 'page' : $(this).text() }, function(data) {
... 
```

我试过像这样使用淡入淡出的回调选项：

```
$('.topNavLink').click(function() {
    $('#loading').fadeIn(100, function() {
        $.get('/view/scripts/data.php', { 'page' : $(this).text() }, function(data) {
... 
```

但最终它最终没有显示 div 或没有加载内容。

我做错了什么（希望我的意图很明确，你知道我想要完成什么）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:16:00.500

我认为您不应该使用 fadeIn 来隐藏`#loading`div，`opacity:0`而是使用`display:none`fadeIn 来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:19:59.543

您可以使用许多事件 (http://docs.jquery.com/Ajax_Events) 来显示加载 div。我建议尝试`beforeSend`，因为它将在 ajax 调用发生之前被触发。您将不得不稍微重写您的 ajax 调用（它可能不是 100% 正确，但它应该能说明我的观点）：

```
$.ajax({
    url: '/view/scripts/data.php',
    data: $(this).text(),
    beforeSend: function(){
        $('#contents').fadeOut(100, function(){
            $('#loading').fadeIn(100);
        });
    },
    success: function(data){
        $('#loading').fadeOut(100, function(){
            $('#contents').html(data).fadeIn(100);
        });
    }
}); 
```

# php - Symfony 2.0 登录不适用于 Symfony 2.1？

> ID：12743085
> 
> 赞同：0
> 
> 时间：2012-10-05T09:10:01.823
> 
> 标签：php, symfony, symfony-2.1

我需要做什么特别的事情吗，因为我在 Symfony 2.0 上有三个应用程序，登录后我可以使用其中任何一个应用程序，但是一个 Symfony 2.1 应用程序不起作用（不进行身份验证）并且它要求我登录。如果我这样做，Symfony 2.0 应用程序将被注销。

身份验证系统是否发生了根本性变化？我该如何适应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:15:51.263

是的

`Security SF 2.0` [http://symfony.com/doc/2.0/book/security.html](http://symfony.com/doc/2.0/book/security.html)

`Security SF 2.1` [http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

**安全系统不向下兼容。**

非常感谢[**Stony**](https://stackoverflow.com/users/411918/stony)，升级方法：[https ://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#security](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#security)

默认情况下，Symfony2 依赖 cookie（会话）来保存用户的安全上下文。所以也许 SF2.1 登录会覆盖您的 cookie 并破坏以前创建的会话。

看看无状态身份验证[http://symfony.com/doc/2.0/book/security.html#stateless-authentication](http://symfony.com/doc/2.0/book/security.html#stateless-authentication)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:16:25.507

是的，从**Symfony 2.0 到 2.1**是一些对您的系统产生影响的变化。

这是升级介绍，安全配置有一些变化。

[https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)

# android - 如何动态更改编辑文本位置

> ID：12743088
> 
> 赞同：0
> 
> 时间：2012-10-05T09:10:04.887
> 
> 标签：android, android-layout, android-edittext

我是安卓新手。我正在尝试实现照片标记应用程序，我们可以在其中标记面部，如 facebook 照片标记。我能够找到面孔并在面孔上绘制矩形。

`EditText`但是当用户触摸这些矩形时，我试图在面部识别的矩形上放置一个（写名字）。一旦完成，我需要禁用`EditText`并需要显示`TextView`（名称）。请在下面找到代码并帮助我。

**代码：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);

    layout = new LinearLayout(this);
    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);

    myEditTet = new EditText(this);

    myView custom = new myView(this);
    layout.addView(myEditTet);
    myEditTet.setVisibility(View.GONE);
    // layout.addView(myTextView);
    // myTextView.setVisibility(View.GONE);
    layout.addView(custom, params); // Of course, this too
    setContentView(layout);

}

private class myView extends View {

    private int imageWidth, imageHeight;
    private int numberOfFace = 5;
    private FaceDetector myFaceDetect;
    private FaceDetector.Face[] myFace;
    float myEyesDistance;
    int numberOfFaceDetected;

    Bitmap myBitmap;

    public myView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

        BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();
        BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565;
        myBitmap = BitmapFactory.decodeResource(getResources(),
                R.drawable.face3, BitmapFactoryOptionsbfo);
        imageWidth = myBitmap.getWidth();
        imageHeight = myBitmap.getHeight();
        myFace = new FaceDetector.Face[numberOfFace];
        myFaceDetect = new FaceDetector(imageWidth, imageHeight,
                numberOfFace);
        numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub

        canvas.drawBitmap(myBitmap, 0, 0, null);

        Paint myPaint = new Paint();
        myPaint.setColor(Color.GREEN);
        myPaint.setStyle(Paint.Style.STROKE);
        myPaint.setStrokeWidth(3);

        for (int i = 0; i < numberOfFaceDetected; i++) {
            android.media.FaceDetector.Face face = myFace[i];
            PointF myMidPoint = new PointF();
            face.getMidPoint(myMidPoint);
            myEyesDistance = face.eyesDistance();
            dx = (int) (myMidPoint.x - myEyesDistance);
            dy = (int) (myMidPoint.y - myEyesDistance);
            dz = (int) (myMidPoint.x + myEyesDistance);
            dt = (int) (myMidPoint.y + myEyesDistance);
            canvas.drawRect((int) (myMidPoint.x - myEyesDistance),
                    (int) (myMidPoint.y - myEyesDistance),
                    (int) (myMidPoint.x + myEyesDistance),
                    (int) (myMidPoint.y + myEyesDistance), myPaint);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        myEditTet.setVisibility(View.VISIBLE);
        if (event.getX() > dx && event.getX() < dz && event.getY() > dy
                && event.getY() < dt) {
            Log.i("SARDAR", "RECT TOUCH 1111");

        }
        return super.onTouchEvent(event);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:13:06.607

我已经通过这种方式做到了...

```
params.setmargin(left,top,right,bottom);

layout.addView(myeditText,params); 
```

参数是 int 类型

# javascript - 类似于 StackOverflow 标签的预览窗口功能

> ID：12743105
> 
> 赞同：1
> 
> 时间：2012-10-05T09:10:58.257
> 
> 标签：javascript, preview

我正在尝试使用 javascript 创建一个项目预览（快速视图），它会根据鼠标位置改变它的方向。我想要一个类似于stackoverflow中现有的功能：

当一个项目位于页面底部时，预览窗口应该改变它的方向（当页面滚动或浏览器窗口调整大小时）。目前显示在光标下方或上方，但与实际光标位置无关（与屏幕或浏览器窗口大小无关）。我是 javascript 新手，不胜感激。

这是我用作起点的代码：

```
function AssignPosition(d) {

if(self.pageYOffset) {
    rX = self.pageXOffset;
    rY = self.pageYOffset;
    }
else if(document.documentElement && document.documentElement.scrollTop) {
    rX = document.documentElement.scrollLeft;
    rY = document.documentElement.scrollTop;
    }
else if(document.body && document.body.scrollTop) {
    rX = document.body.scrollLeft;
    rY = document.body.scrollTop;
    }
if(document.all) {
    cX += rX; 
    cY += rY;
    }

var divHeight = d.style.height.replace(/px/, "");
divHeight = parseInt(divHeight);
if (cY < divHeight * 3 ) {
    d.style.left = (cX+50) + "px";
    d.style.top = (cY-10) + "px";
    }

else {
    cY = cY - divHeight;
    d.style.left = (cX+50) + "px";
    d.style.top = (cY-10) + "px";
    } 
```

}

# java - 如何为 Java 源代码创建数据流图

> ID：12743107
> 
> 赞同：4
> 
> 时间：2012-10-05T09:11:10.753
> 
> 标签：java, jakarta-ee, dataflow-diagram

我已经用 java 编写了一个包含大约 500 个类的应用程序，现在我知道这已经被问过很多次了，但是我仍然找不到合适的资源或教程来为我的整个项目创建数据流图。

任何帮助/教程/资源或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:41:07.603

您可能能够从单元测试中获取数据流。如果您有一个实例`A`和一个模拟`B`，并且您希望实例`C`在`B.bar(Object)`您调用`A.foo(C)`. 在这种情况下，您会获得从一个对象到另一个对象的数据流。

第二件事是检查您的应用程序配置。如果您发现该实例`D`配置了实例`E`，而该实例本身也配置了实例，则`F`您可以将您从单元测试中派生的数据流链接在一起。

但我不知道有任何实现。但这两个部分似乎都比较容易实现。在第一部分中，您需要连接到您的模拟框架。如果您使用依赖注入，第二部分很容易。

**编辑：**
如果你把所有的数据放在一起，你可以例如使用 Eclipse UML API 来创建图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:52:57.487

这是使用 Eclipse 的另一种尝试：

[MoDisco](http://www.eclipse.org/MoDisco/)能够为您的 Java 项目创建 emf 模型。该 emf 模型将成为创建数据流图的基础。使用[ATL](http://www.eclipse.org/atl/)，您可以将该模型转换为适当的可视化模型。对于可视化，您可以选择 UML 活动图。这具有能够使用现有 UML 技术的优势。另一种可能性是使用[Zest](http://www.eclipse.org/gef/zest/)或[GraphML](http://graphml.graphdrawing.org/)和[yEd](http://www.yworks.com/en/products_yed_about.html)来创建可视化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:51:05.417

获取完整版的 IntelliJ idea - 它有数据流图表和其他不错的分析工具。您将获得 30 天的运动许可证，因此您可以看到它，这是您的选择。

# c++ - google test 如何制作测试序列

> ID：12743114
> 
> 赞同：18
> 
> 时间：2012-10-05T09:12:05.363
> 
> 标签：c++, visual-studio-2010, googletest

google-test 如何为测试用例制作测试序列`(or order of test case execution)`？

假设我有 5 个测试用例。

```
TEST(First, first)
TEST(Secnd, secnd)
TEST(Third, third)
...
TEST(Fifth, fifth) 
```

`google-test`上面的测试用例怎么测试？我的意思是按什么顺序？或者我们可以提供任何测试序列吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T09:25:20.810

默认情况下，它将按照在链接时找到它们的顺序对其进行测试，这取决于您的工具。

您可以[选择要运行的测试](https://github.com/google/googletest/blob/master/docs/advanced.md#selecting-tests)，例如子集或单个测试。

还有一个以[随机顺序运行它们](https://github.com/google/googletest/blob/master/docs/advanced.md#shuffling-the-tests)的选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T09:25:42.810

[洗牌测试](https://github.com/google/googletest/blob/master/docs/advanced.md#shuffling-the-tests)一章中 googletest 的高级参考页面告诉我们：

> 默认情况下，Google Test 使用从当前时间计算的随机种子。因此，您每次都会收到不同的订单。

这实际上是一种很好的单元测试方式，因为测试不应该依赖于执行的顺序。

据我所知，没有办法设置测试执行的顺序。您可以设置的唯一参数是种子，用于设置相同的执行顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-07T15:09:03.090

[默认情况下](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md)，它们按声明顺序运行。正如其他人所说，您必须提供标志***--gtest_shuffle***来打乱它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-14T09:01:50.107

即使您可以猜测执行顺序的某些模式（如书面或链接的），您也不应该依赖它。

不过，它会在不同的处决中重复。如果您不希望它发生，您可以使用`--gtest_shuffle`. 根据随机种子，以随机顺序运行测试。

如果失败，您可以使用`--gtest_random_seed=`该数字并重复确切的顺序（以调查失败的原因）。

也就是说，随机性并不完整：

*   测试套件将以随机顺序运行
*   测试套件中的测试将以随机顺序运行

如果不以这种方式运行，SetUpTestSuite 和 TearDownTestSuite 方法将混合使用。但是，您不需要固定装置来进行此分组。

# c# - 如何更改应用程序的图标

> ID：12743116
> 
> 赞同：1
> 
> 时间：2012-10-05T09:12:12.797
> 
> 标签：c#, icons

我想以编程方式修改外部应用程序的图标。我看到[了这篇](https://stackoverflow.com/questions/4127785/using-updateresource-in-c)文章，但没有解决，谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:18:39.917

WinApi 提供了[`UpdateResource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648049%28v=vs.85%29.aspx)允许您更改 PE 文件中的任何资源的功能。

这个问题已经在[stackoverflow](https://stackoverflow.com/questions/4127785/using-updateresource-in-c)上解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:15:50.460

项目属性 -> 应用程序 -> 图标和清单，假设是 Visual Studio 10

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T14:16:57.293

您可以尝试在屏幕末尾定义的图标部分

![在此处输入图像描述](../Images/20c23d57f1e49d99d3a06920804c8c27.png)

# .htaccess - 创建 Google 友好文件夹

> ID：12743117
> 
> 赞同：0
> 
> 时间：2012-10-05T09:12:16.477
> 
> 标签：.htaccess, redirect, dynamic, seo

基本上我正在尝试找出一种方法来制作

[http://www.mysite.com/check/google.com](http://www.mysite.com/check/google.com)

显示页面内容

[http://www.mysite.com/check.php?site=test.com](http://www.mysite.com/check.php?site=test.com)

我希望用户认为实际的 URL 是 [http://www.mysite.com/check/google.com](http://www.mysite.com/check/google.com)而不是长的。

但是我需要以对 Google 最友好的方式执行此操作，这样他们就不会将其视为重定向并且它仍然会排名良好...如果您可以发布一些示例代码，我们将不胜感激任何帮助...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:20:30.327

在文档根目录的 htaccess 文件中，尝试添加：

```
RewriteEngine On
RewriteRule ^/?check/(.*)$ /check.php?site=$1 [L] 
```

# css - 带有指南针精灵的伪背景裁剪

> ID：12743122
> 
> 赞同：1
> 
> 时间：2012-10-05T09:12:29.390
> 
> 标签：css, sass, compass-sass, css-sprites, pseudo-element

我试图弄清楚如何在 Compass sprite 中实现这样的背景裁剪：http: [//nicolasgallagher.com/css-background-image-hacks/](http://nicolasgallagher.com/css-background-image-hacks/)

[http://jsfiddle.net/blineberry/BhbrL/](http://jsfiddle.net/blineberry/BhbrL/)

这就是我在 .sass 文件中的内容：

```
@import "buttons/*.png"
@include all-buttons-sprites

.buttons-arrow
  background-image: none
  width: 30px
  height: 45px

.buttons-arrow:before
  +buttons-sprites(arrow)
  display: block
  content: ""
  width: 15px
  height: 27px 
```

如您所见，我尝试先制作没有背景图像的 .buttons-arrow，然后再添加回背景图像。但是，它给了我这个 .css 文件：

```
.buttons-sprite, .buttons-arrow, .buttons-arrow:before .buttons-arrow {
  background: url('../images/buttons-s5ae2b3a1e9.png') no-repeat;
}

.buttons-arrow {
  background-position: 0 0;
}

.buttons-arrow:hover, .buttons-arrow.arrow_hover, .buttons-arrow.arrow-hover {
  background-position: 0 -27px;
}

.buttons-arrow {
  background-image: none;
  width: 30px;
  height: 45px;
  margin-left: 150px;
}

.buttons-arrow:before {
  display: block;
  content: "";
  width: 15px;
  height: 27px;
}

.buttons-arrow:before .buttons-arrow {
  background-position: 0 0;
}

.buttons-arrow:before .buttons-arrow:hover, .buttons-arrow:before .buttons-arrow.arrow_hover, .buttons-arrow:before .buttons-arrow.arrow-hover {
  background-position: 0 -27px;
}

.buttons-arrow:hover {
  background-color: #ea4800;
} 
```

显然这是错误的，因为它结合到了这个`.buttons-arrow:before .buttons-arrow`

我只想要一个这样的简单结果

```
.buttons-arrow {
  width: 30px;
  height: 45px;
  margin-left: 150px;
}

.buttons-arrow:before {
  background-image: url('../images/buttons-s5ae2b3a1e9.png');
  display: block;
  content: "";
  height: 27px;
  width: 15px; 
```

**如何使用 sprite 在 Compass 中编码？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T03:38:18.770

由于这个地方几乎已经死了，我会为从谷歌搜索这个的人提供帮助。答案是：

把这个放在上面：

```
$buttons: sprite-map("buttons/*.png") 
```

我在那里有**arrow.png**和**arrow_hover.png**。这个想法是使用 sprite-map 函数而不是`@import`全部。然后确保包含`:before`伪元素的背景图像，但不包含原始内容：

```
.buttons-arrow
  width: 50px
  height: 50px
  &::before
    content: ""
    background: sprite($buttons, arrow) no-repeat
    display: block
    position: relative
    width: 20px
    height: 20px
  &:hover
    background-color: gray
    &::before
      content: ""
      background: sprite($buttons, arrow_hover) no-repeat
      position: relative
      width: 20px
      height: 20px 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T08:44:51.823

根据@HP 的回答，我可以弄清楚如何使它工作。代替

```
@include buttons-sprites(arrow) 
```

只需使用

```
background: sprite($buttons-sprites, arrow); 
```

这与@HP 提出的解决方法非常相似，但我没有调用，而是`sprite-map`使用隐式生成的变量`$buttons-sprites`。

# node.js - 使用 Node.js 和 Socket.IO 房间创建和加入存储在 mongodb 中的自定义聊天室

> ID：12743123
> 
> 赞同：0
> 
> 时间：2012-10-05T09:12:31.547
> 
> 标签：node.js, mongodb, express, socket.io

我开始为移动设备开发一个聊天应用程序，我决定使用`Node.js`plus`Socket.IO`来构建主要功能。基本上，我想要实现的是用户和可以由用户创建的聊天组之间的私人消息系统。每个人都可以加入聊天室，这些聊天室将被存储到`mongodb`. 为了在数据库中创建房间，我将使用`Express`带有基本数据（房间名称、描述）的简单请求。

我对所有`Node.js`/都很陌生`Socket.IO`，所以我不知道我必须在哪里查询有关所有可用房间的数据库。我的想法是以下几点：

1.  用于`Express`获取可用聊天室的 JSON 列表。
2.  列出所有可用的聊天室。点击其中一个，然后
3.  获取聊天室 'name' 或 'id' 并用于执行以下操作

    ```
    io.sockets.on('connection', function (socket, room) {
        socket.join(room);
        socket.broadcast.to(room).send('Hello room!');
    }); 
    ```

当用户选择房间时，我必须进行连接，对吗？如果是这样，房间将成为连接的令牌？

# java - 如何构造查询以更新 mongo 中的嵌套数组文档？

> ID：12743125
> 
> 赞同：0
> 
> 时间：2012-10-05T09:12:32.013
> 
> 标签：java, mongodb

我在mongo中有以下文件，

```
 {
   "_id" : ObjectId("506e9e54a4e8f51423679428"),
   "description" : "ffffffffffffffff", 
   "menus" : [  
                {   
                  "_id" : ObjectId("506e9e5aa4e8f51423679429"),     
                   "description" : "ffffffffffffffffffff",  
                      "items" : [
                               {    
                              "name" : "xcvxc",     
                              "description" : "vxvxcvxc",   
                              "text" : "vxcvxcvx",  
                              "menuKey" : "0",  
                               "onSelect" : "1",    
                              "_id" : ObjectId("506e9f07a4e8f5142367942f") 
                              } ,
                              {     
                              "name" : "abcd",  
                              "description" : "qqq",    
                              "text" : "qqq",   
                              "menuKey" : "0",  
                               "onSelect" : "3",    
                              "_id" : ObjectId("507e9f07a4e8f5142367942f") 
                              }
                             ] 
                 },
                 {  
                    "_id" : ObjectId("506e9e5aa4e8f51423679429"),   
                    "description" : "rrrrr",    
                     "items" : [    {   
                                 "name" : "xcc",    
                                 "description" : "vx",  
                                 "text" : "vxc",    
                                 "menuKey" : "0",   
                                "onSelect" : "2",   
                              "_id" : ObjectId("506e9f07a4e8f5142367942f") 
                         } ]
                } 
            ]
   } 
```

现在，我想更新以下文档：

```
 {  
     "name" : "abcd",   
    "description" : "qqq",  
    "text" : "qqq",     
    "menuKey" : "0",    
        "onSelect" : "3",   
    "_id" : ObjectId("507e9f07a4e8f5142367942f") 
  } 
```

我有主文档ID：“_id **”：ObjectId（“506e9e54a4e8f51423679428”）**和**菜单ID“_id”：ObjectId（“506e9e54a4e8f51423679428”）**以及项目ID **“_id”：ObjectId（“507e9f07a4e8f5142367942”**） .

我尝试使用以下查询：

`db.collection.update({ "_id" : { "$oid" : "506e9e54a4e8f51423679428"} , "menus._id" : { "$oid" : "506e9e5aa4e8f51423679429"}},{ "$set" : { "menus.$.items" : { "_id" : { "$oid" : "506e9f07a4e8f5142367942f"}} , "menus.$.items.$.name" : "xcvxc66666", ...}},false,false);`

但它不工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:35:42.663

位置运算符不适用于您尝试使其工作的级别数（[https://jira.mongodb.org/browse/SERVER-831?focusedCommentId=22438&page=com.atlassian.jira.plugin.system .issuetabpanels%3Acomment-tabpanel](https://jira.mongodb.org/browse/SERVER-831?focusedCommentId=22438&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel) )和即使它做了`menus.$.items.$.name`MongoDB 查询解析器也不知道另一个`$`来自`find`.`update`

您将需要从架构中提取项目，单独更新，然后更新根文档。

判断何时应单独进行查询的一种好方法是认为每个菜单听起来像一个单独的实体（或关系数据库中的表），因此您可能应该分别更新这些实体（或关系模型中的表）以父实体（表）。

所以首先你会得到主根文档。滚动浏览客户端的菜单，然后滚动`$set`该特定菜单到您在客户端构建的整个项目。

### 编辑

我想象这个工作客户端的方式是（在伪代码中，因为我的 Java 有点生疏）首先以活动记录方式获取该文档：

```
doc = db.col.find({ "_id" : { "$oid" : "506e9e54a4e8f51423679428"} , 
    "menus._id" : { "$oid" : "506e9e5aa4e8f51423679429"}}); 
```

然后，您将遍历分配您的值的文档：

```
foreach(doc.menus as menu_key => menu){
    foreach(menu['items'] as key => item){
        if(item._id ==  { "$oid" : "506e9f07a4e8f5142367942f"}){
            doc.menus[menu_key][key][name] = "xcvxc66666"
        }
    }
} 
```

然后在提交所有更改后简单地保存文档：

```
db.col.save(doc); 
```

这当然只是一种方法，这种方法使用了我个人喜欢的 activen 记录范例。在这个想法中，您将查找与您需要在文档上修改的所有其他内容结合起来，在客户端构建它，然后将其作为一个单一查询发送到您的数据库。

# wordpress - wordpress 简码

> ID：12743128
> 
> 赞同：0
> 
> 时间：2012-10-05T09:12:41.577
> 
> 标签：wordpress, cart, shortcode, custom-pages

我在我的 wordpress 网站中使用 car66 插件，我想使用插件的简码将商品添加到购物车中。我不知道如何在页面中调用 shorcode。短代码应该生成一个按钮，允许用户将商品添加到购物车中。但是它没有添加到购物车中。请帮我。我的代码在这里。请帮忙。`[add_to_cart item="EX-29"]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:16:47.847

我想通了使用`do_shortcode`内置功能。例如，我使用`echo do_shortcode("[add_to_cart item=\"EX-29]\"");`并且它有效。

# asp.net - 在 IIS 服务器 (ASP.net) 上隐藏源代码

> ID：12743131
> 
> 赞同：1
> 
> 时间：2012-10-05T09:12:53.550
> 
> 标签：asp.net, vb.net, iis, deployment

我有一个关于在运行 IIS 的服务器上隐藏或编码源代码的问题。

目前，所有登录到运行 IIS 服务器的服务器的用户都可以看到源代码。

有没有办法用 Visual Studio 或任何其他软件隐藏代码（编码）？

我认为 aspx（或 *.html）网站代码无法编码，但（例如）*.vb 代码网站应该能够编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:17:43.400

你可以简单`Publish`的网站

构建菜单 => 发布网站

所以文件后面的代码`(*.aspx.cs)`将被转换为`dll(Bin/*.dll)`文件。

请参阅：[演练：发布网站](http://msdn.microsoft.com/en-us/library/1y1404zt%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:14:08.463

当你准备好让你的项目上线时，请确保你。

1.  发布它。
2.  当您发布它时，您告诉它将您的代码编译成单个库或代码隐藏文件。
3.  如果您也想保护您的 html，则不应选择使站点可更新。

这些步骤将保护您的代码，但对于您的 web.config 文件，您需要查看其他有关保护其信息的文章。

如果可以的话，我建议确保只有授权人员才能访问服务器和/或服务器上运行的代码库。如果是这种情况，那么你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T09:32:02.400

转到构建菜单--->点击发布网站。然后在基本文件夹上创建一个文件夹。并且编码文件在那里可用。可以上传到FTP账号，第三方用浏览器是看不到源代码的。

# ios - 情节提要中 didselectrowatindexpath 上的 Pushview

> ID：12743132
> 
> 赞同：0
> 
> 时间：2012-10-05T09:12:54.643
> 
> 标签：ios, uitableview, storyboard, pushviewcontroller, didselectrowatindexpath

我在情节提要的一个视图控制器中添加了一个表格视图作为子视图。它有 6 个部分，每个部分有一排。在选择每一行时，应该打开一个新的视图控制器。为此，有 6 个这样不同的视图控制器。我不知道如何在情节提要中实现这一点。有什么方法可以通过情节提要绑定它，或者我必须手动执行此操作。任何帮助都将被接受。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:27:18.303

`performSegueWithIdentifier`在故事板中使用视图控制器时使用方法。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (indexPath.section==0) {

        [self performSegueWithIdentifier:@"first" sender:nil];

    }
    if (indexPath.section==1) {

        [self performSegueWithIdentifier:@"second" sender:nil];

    }
    if (indexPath.section==2) {

        [self performSegueWithIdentifier:@"third" sender:nil];

    }
    if (indexPath.section==3)
    {

        [self performSegueWithIdentifier:@"fourth" sender:nil];

    }

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"first"])
    {
        friendsViewController=[segue destinationViewController];

    }
    if([[segue identifier] isEqualToString:@"second"])
    {
         secondViewController=[segue destinationViewController];

    }
    if([[segue identifier] isEqualToString:@"third"])
    {
        thirdViewController=[segue destinationViewController];

    }
    if([[segue identifier] isEqualToString:@"fourth"])
    {
        fourthViewController=[segue destinationViewController];

    }
} 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:19:47.910

如果您的 tableview 带有静态单元格，并且所有这些单元格都放在情节提要上，那么您可以轻松地使用`ctrl`按钮和鼠标左键从每个单元格拖动到所需的 ViewController 以创建 segue。

# php - 在php中获取动态时间戳？

> ID：12743133
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:12:54.330
> 
> 标签：php, date, timestamp, unix-timestamp

您将如何计算PHP`January 1st`中**当年的 unix 时间戳？**

我所说的**当年**是我不想把`2012`它放进去，因为它应该是一个动态的日期，明年应该是`2013`等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:14:18.267

您可以使用 ：

```
mktime(0, 0, 0, 1, 1, date('Y')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:15:36.630

你可以这样做：

```
echo strtotime('01 january ' . date('Y')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:19:42.200

你的意思是你有这样的日期和时间`2012-01-01 06:30:54`，你想将它们转换为 unix 时间戳？

如果是这种情况，那么`strtotime()`是最好的方式去哥们。

例如：`strtotime("2012-01-01 06:30:54");`

或者

```
$datetime = "2012-01-01 06:30:54";

echo strtotime($datetime); 
```

# c# - 如何在消息框上显示，选择了哪个单选按钮

> ID：12743137
> 
> 赞同：1
> 
> 时间：2012-10-05T09:13:26.437
> 
> 标签：c#, visual-studio

我有 2 个性别单选按钮。一名男性（姓名）`radMale`一名女性（姓名`radFemale`）。假设用户单击“男性”按钮。我如何在 a 上显示他选择的内容`MessageBox`？

```
MessageBox.Show(radMale = "Male"); 
```

我知道这不起作用，有人知道哪个代码可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:28:45.087

我尝试执行以下代码，这可能会解决您的问题。

```
public partial class Form1: Form
{
        public Form1()
        {
            InitializeComponent();
            this.Load += new EventHandler(Form1_Load);
            radioButton1.CheckedChanged += new EventHandler(radioButton_CheckedChanged);
            radioButton2.CheckedChanged += new EventHandler(radioButton_CheckedChanged);
        }

        void radioButton_CheckedChanged(object sender, EventArgs e)
        {
            RadioButton rb = (RadioButton)sender;
            if(rb.Checked)
                MessageBox.Show(rb.Text); //Shows whatever Text your radiobutton has
        }

        void Form1_Load(object sender, EventArgs e)
        {

        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:16:33.107

在 WinForms 中，使用这个：

```
MessageBox.Show(radMale.Checked?"Male":"Female"); 
```

# php - Node.js（mysql + socket.io）通过Cookie认证PHP？

> ID：12743138
> 
> 赞同：0
> 
> 时间：2012-10-05T09:13:30.930
> 
> 标签：php, javascript, node.js, authentication, session-cookies

我目前正在将**node.js 与 socket.io 与我的 PHP 框架**集成。

当用户登录我的网站时，我将他/她的会话保存在我的数据库中并为他分配一个用户 ID。

> 我能够验证对node.js的请求是否有效的唯一方法是将**cookie（会话ID）和用户ID发送到node.js并检查数据库，如果会话ID有效并且用户ID属于到这个会话 id。这发生在 node.js mysql 模块中。

这是唯一的方法吗？它“安全”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:41:09.823

根据您对 Node.js 服务器和 sockets.io 的使用情况，您可以在服务器上维护一组登录用户。

当用户验证您的 PHP 时，您将客户端代码中的套接字事件发送到带有会话 ID 的套接字服务器，然后将该会话 ID 存储在 Node.js 服务器上的用户关联数组中，这样您就可以关联用于维护客户端和服务器之间通信的套接字的任何用户会话 ID。

从现在开始，您可以检查与 Node.js 服务器的任何通信，只需通过客户端代码传递会话 ID 并检查它是否包含在关联数组中。

当然，当从 socket.io 触发断开连接事件时，您会删除数组上的关联条目。

# perl - Perl 新手，从哪里开始？

> ID：12743143
> 
> 赞同：3
> 
> 时间：2012-10-05T09:13:52.410
> 
> 标签：perl, cgi

我搬到了一个主要从事 perl 工作的团队。重点是扩展命令行工具和修复一些用 perl 编写的 web 脚本。我以前从未在 perl 上工作过。你能指导我从哪里开始学习perl吗？怎么办？

有人可以建议一些书籍开始和/或任何好的在线教程。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:18:45.647

网上有很多很好的学习 Perl 的资料。其中一些是： -

1.  [从哪里以及如何开始学习 Perl](http://www.perlmonks.org/?node_id=284175)
2.  [http://perl-tutorial.org/](http://perl-tutorial.org/)
3.  [http://learn.perl.org/](http://learn.perl.org/)
4.  [开始 Perl](http://www.perl.org/books/beginning-perl/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:52:22.167

您是 perl 新手还是一般编程新手？

“标准”推荐是[骆驼书](http://shop.oreilly.com/product/9780596000271.do)，我觉得它不适合新手程序员。但是，如果您已经有足够的编程经验，那么您可能会发现它很有用。

另一个推荐是[Modern Perl](http://www.onyxneon.com/books/modern_perl/index.html) book

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:00:13.977

我向从其他语言迁移到 Perl 的开发人员推荐的 2 本书是 Damian Conway 的 Perl Best Practices 和 Perl Cookbook，两者均由 O'Reilly 出版。它们不是为初学者准备的书，但根据我的经验，从其他语言转向 Perl 的经验丰富的程序员所面临的主要挑战基本上是选择“最好的方式”来做事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:15:45.210

Schwartz 等人的《学习 Perl》。人。非常好。

也看看[this](http://perl-tutorial.org/)和[this](http://www.perl.com/pub/2000/10/begperl1.html)。

# ms-word - OpenXML c++/cli

> ID：12743152
> 
> 赞同：2
> 
> 时间：2012-10-05T09:14:21.387
> 
> 标签：ms-word, c++-cli, openxml, openxml-sdk, xdoc

我想在 C++/CLI 中使用 OpenXML 创建一个 .docx 文档（Word 2007 和 2010）

我使用此代码生成文档：

```
WordprocessingDocument^ wordDoc  = WordprocessingDocument::Create("C:\\...\MyFile.docx", WordprocessingDocumentType::Document);

MainDocumentPart^ mainPart = wordDoc->AddMainDocumentPart();

Document^ elt = gcnew Document( gcnew Body( gcnew Paragraph( gcnew Run( gcnew DocumentFormat::OpenXml::Wordprocessing::Text("Hello !") ) ) ) ); 

elt->Save(mainPart);

mainPart->Document->Save();

wordDoc->Close(); 
```

**该文件已创建，但它是空的。**

如果我用 C# 编写此代码，**则该文件很好，并且包含文本**。

为什么我在 C++/cli 中的代码创建没有文本的文件 (MyFile.docx)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:33:01.913

我重现了这个问题。不知道发生了什么，这种语法被记录在案。当您使用 AppendChild() 方法显式编写代码时，它可以正常工作。像这样：

```
WordprocessingDocument^ wordDoc  = WordprocessingDocument::Create("C:\\temp\\MyFile.docx", WordprocessingDocumentType::Document);
MainDocumentPart^ mainPart = wordDoc->AddMainDocumentPart();

mainPart->Document = gcnew Document;
Body^ body = mainPart->Document->AppendChild(gcnew Body);
Paragraph^ para = body->AppendChild(gcnew Paragraph);
Run^ run = para->AppendChild(gcnew Run);
run->AppendChild(gcnew DocumentFormat::OpenXml::Wordprocessing::Text("Hello !"));

delete wordDoc; 
```

# php - PHP：即使返回 bool true，override_function 也不会覆盖

> ID：12743159
> 
> 赞同：1
> 
> 时间：2012-10-05T09:15:08.087
> 
> 标签：php, function, require

我正在使用通过 pecl 从 apd.so 库安装的 ovverride_function

它似乎没有按预期工作

这是我的脚本

```
function my_require($path) {
    echo "HELLO\n";
    echo $path;
}

$b = override_function('require', '$path', 'return my_require($path);');
var_dump($b);
require './index.php'; 
```

我期望看到的是输出

```
bool(true)
HELLO
./index.php 
```

相反，我得到了

```
bool(true)

Warning: require(./index.php): failed to open stream: No such file or directory in /var/www/test/script/test.php on line 14 
```

因此，即使该函数似乎可以工作（bool true），require 函数仍然充当旧函数。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:30:28.463

`require`不是一个函数，它是一个类似`function`or的语言结构`echo`。尝试调用`require index.php`（不带`()`），它在调用普通函数时仍然可以正常工作`()`。文档没有明确说明它是，但它列在“控制结构”下，所以这就是为什么`override_function`不适用于这个`require`（或任何其他语言结构）。

# magento - 无法更改magento索引文件中的权限

> ID：12743160
> 
> 赞同：0
> 
> 时间：2012-10-05T09:15:19.773
> 
> 标签：magento

该网站的链接是[http://petonlineboutique.com/](http://petonlineboutique.com/)。浏览器中显示的错误是 403 禁止错误。“您无权访问此服务器上的 /index.php。此外，在尝试使用 ErrorDocument 处理请求时遇到 403 Forbidden 错误”。

通过谷歌搜索我们了解到，这个禁止错误是在没有足够权限的时候显示的。

后来我注意到magento文件夹的所有文件和文件夹的权限都可以更改为777，但索引文件权限显示为000，无法更改。

因此，如果我需要在索引文件中添加权限，要摆脱这个禁止的错误，我不能放。

所以请帮助我现在应该做什么，并告诉我们禁止错误的原因，我无法从 cpanel 更改权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:58:31.787

没有办法解决这个问题。唯一的解决方案是更改文件的权限，您只需要了解[如何操作即可](http://www.siteground.com/tutorials/cpanel/file_permissions.htm)。如果它不允许您更改文件的权限，则需要联系您的主机。

# javascript - Extjs 4：具有更多 selType 的网格

> ID：12743161
> 
> 赞同：3
> 
> 时间：2012-10-05T09:15:31.547
> 
> 标签：javascript, extjs, grid, extjs4, multi-select

我试图弄清楚如何`Ext.grid.Panel`用不同的`selType`.

实际上，我需要一个允许我选择单个单元格和行（带有复选框）的网格。在第一种情况下，它需要将`selType`config 定义为，`cellmodel`但在第二种情况下，它需要将其`selType`配置为`checkboxmodel`. 不幸的是，`selType`接受字符串而不是数组。

**那么，有没有办法`selType`在单个网格上定义不同的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:23:20.090

好的，可以在同一个网格中同时配置 a`selType`和 a 。`selModel`

这是一个例子：

```
// Store
var store = Ext.create ('Ext.data.Store', {
  fields: ['name', 'surname'] ,
  data: [
    {name: 'foo', surname: 'bar'} ,
    {name: 'too', surname: 'tar'} ,
    {name: 'zoo', surname: 'zar'} ,
    {name: 'coo', surname: 'car'} ,
    {name: 'boo', surname: 'bar'}
  ]
}); 
```

然后是网格：

```
// Dual selection grid
Ext.create ('Ext.grid.Panel', {
  title: 'My Grid' ,
  store: store ,
  width: 300 ,
  height: 300 ,
  renderTo: Ext.getBody () ,

  selModel: Ext.create ('Ext.selection.CheckboxModel') ,
  selType: 'cellmodel' ,
  plugins: {
    ptype: 'cellediting' ,
    clicksToEdit: 1
  } ,

  columns: [{
    text: 'Name' ,
    dataIndex: 'name' ,
    editor: {
      xtype: 'textfield' ,
      allowBlank: false
    }
  } , {
    text: 'Surname' ,
    dataIndex: 'surname' ,
    editor: {
      xtype: 'textfield'
    }
  }]
}); 
```

但也可以遵循*A1rPun*建议的方式，以便更好地使用`selType`层次结构：

```
// Base grid with cellediting plugin and cellmodel as selType
Ext.define ('CellEditGrid', {
  extend: 'Ext.grid.Panel' ,
  selType: 'cellmodel' ,
  plugins: {
    ptype: 'cellediting'
    clicksToEdit: 1
  }
});

// Adds the checkboxmodel selType to the base CellEditGrid
Ext.define ('DualSelectionGrid', {
  extend: 'CellEditGrid' ,
  selType: 'checkboxmodel' ,
  multiSelect: true
});

// Finally, we got our dual selection grid (cellmodel and checkboxmodel)
Ext.create ('DualSelectionGrid', {
  title: 'My Grid' ,
  store: store ,
  width: 300 ,
  height: 300 ,
  renderTo: Ext.getBody () ,

  columns: [{
    text: 'Name' ,
    dataIndex: 'name' ,
    editor: {
      xtype: 'textfield' ,
      allowBlank: false
    }
  } , {
    text: 'Surname' ,
    dataIndex: 'surname' ,
    editor: {
      xtype: 'textfield'
    }
  }]
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-07T03:09:44.243

不能！

`grid.getSelectionModel().getCurrentPosition().column`

不是当前的编辑器。

# doctrine-orm - 如何使用学说处理混合结果

> ID：12743162
> 
> 赞同：1
> 
> 时间：2012-10-05T09:15:33.870
> 
> 标签：doctrine-orm, query-builder

我正在使用 symfony2 和查询生成器。由于接下来的查询，我得到了混合的结果。我知道这是由于在 SELECT 中使用了聚合函数，但我没有找到任何其他方法，这正是我所需要的。任何方向将不胜感激：

```
public function Inventory() {
    $em = $this->getEntityManager();
    $qb = $em->createQueryBuilder();
    $qb
        ->add('select', 'i.id, i.name, SUM(pod.quantityorder) as quantityordered, SUM(it.quantity) as quantityreceived')
        ->add('from', 'AutokeenPurchasingBundle:Items i')
        ->leftJoin('i.purchase_order_details', 'pod')
        ->leftJoin('i.inventory_transactions', 'it', 'WITH', 'it.inventory_transaction_type = 1')
        ->add('groupBy', 'i.id')
        ->addGroupBy('it.item')
        ->addGroupBy('pod.item')
        ->add('orderBy', 'i.id');
    $query = $qb->getQuery();
    $query->useResultCache('my_cache_id');
    return $result = $query->getScalarResult();
} 
```

# git - git：比定期推送重新定位的分支更好的选择

> ID：12743164
> 
> 赞同：2
> 
> 时间：2012-10-05T09:15:38.347
> 
> 标签：git, branch, push

我有一个网站的 git 存储库，其中 master 分支代表生产代码。我被要求设置站点的“沙盒”版本，供系统的潜在用户进行试验，这样他们就不必在生产系统中这样做。

因为站点的沙盒版本需要清楚地标记，并且禁用了一些功能，所以我创建了一个沙盒分支（基于 master）并在那里进行了一些提交以添加警告消息等。

然后我将两个分支都推送到上游，并在 Web 服务器上检查了单独目录中的每个分支 - 一个用于生产，一个用于沙箱。

这很好用，但是当我想编写更多代码时问题就来了。一旦我将代码提交到主分支，它将在生产系统中更新，但沙箱不会看到新代码。因此，我将沙箱分支重新设置为 master，因此沙箱的提交始终位于生产之上。但是当然，一旦我这样做了，我就不能再将沙箱分支推向上游，因为它不再是快进。我必须登录 git 服务器，切换分支，进行软重置，然后重做推送。

用 git 肯定有更好的方法吗？我真正需要的是在当前签出的任何分支之上持续应用一些提交的某种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:47:46.483

我会通过在需要的两个代码路径都存在于主分支中来以不同的方式做到这一点。

例如。使用一些配置文件（不受版本控制），您可以切换到其他代码路径。或者一些环境变量——任何最适合你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:46:01.140

您可以使用 进行非快进推送`git push remote +branch`。但是，接收 git 存储库可以配置为拒绝这些。

但是，如果您对旧版本的分支进行了编辑，但已将重新定位的版本推送到上游，您可能会遇到一些小问题。解决此问题的一种方法如下：

```
# you are on branch X and origin/X has been force-updated
git branch X-tmp   # keep a reference to your new commits
git fetch origin
git reset --hard origin/X   # now X is the same as origin/X

# now you have two options
# option 1: move the new commits from X-tmp to X by cherry-picking
# them one-by-one
git cherry-pick abc123
git cherry-pick def456

# option 2: this rebase should do the right thing and detect the equivalent
# commits in X and X-tmp
git checkout X-tmp
git rebase X 
```

# java - 如何使用集合和队列查找图的可达性

> ID：12743170
> 
> 赞同：0
> 
> 时间：2012-10-05T09:15:56.413
> 
> 标签：java, graph, queue, set

我在查找可从给定节点访问的所有节点时遇到了一些麻烦。除非使用 DFS 或 BFS，否则我正在尝试使用一个集合和一个队列来生成所有可到达的节点。据我了解，我可以将队列初始化为起始节点，然后将起始节点添加到集合中并将其从队列中删除。如果它成功添加到集合中（不重复），则将其可达节点添加回队列中。重复此操作，直到队列为空，然后返回集合。

```
public static Set<String> reachable (Map<String, Set<String>> graph, String startNode) {
         //Set of nodes accessible from the startNode
         Set<String> reachableNodes = new ArraySet<String>();

         //Queue of accessible nodes from a given node to search from.
         Queue<String> searchNodes = new ArrayQueue<String>(graph.get(startNode));

         //Stuck here.

         return reachableNodes;
} 
```

我在实施中有点卡住了。我尝试过的是声明一个迭代器来遍历队列。当队列有另一个元素时，我将该元素添加到集合中并从队列中删除该元素。但是我不确定如何将刚刚放入集合中的元素中的所有可访问节点添加回队列中。

算法（类似于 BFS）：

1.  访问节点。
2.  将从此节点可访问的所有节点添加到队列中。
3.  从一开始就将队列中的一个节点添加到一组可访问节点中。
4.  从队列中移除节点。
5.  将节点可访问的所有节点添加回队列中，这些节点刚刚从队列中添加到集合中。
6.  重复直到队列为空。

样本：

```
{ c : [f,e] ,
  f : [g,d] ,
  e : [d]   ,
  d : [g]   }

"Enter startNode: c"
add f,e -> queue
remove f from queue
add f to set
add g d to queue
remove e
add e to set 
add d to queue   
loop until queue is empty. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:30:45.697

一般来说，您描述的算法*是*BFS。您可以在“Stuck”部分中使用 while 循环来执行此操作：

```
while (searchNodes.peek() != null) {
    String next = searchNodes.remove();
    boolean isNewNode = reachableNodes.add(next);
    if (isNewNode && graph.containsKey(next)) {
        for (String node : graph.get(next)) {
            searchNodes.add(node);
        }
    }
} 
```

# java - ORMlite 如何管理 Java 类之间的继承？

> ID：12743171
> 
> 赞同：4
> 
> 时间：2012-10-05T09:15:57.847
> 
> 标签：java, android, inheritance, orm, ormlite

> **可能重复：**
> [如何使用 ORMLite 正确注释继承类？](https://stackoverflow.com/questions/10290207/how-do-i-properly-annotate-inheritance-classes-using-ormlite)

我是 ORMlite 的新手，我试图弄清楚 ORMlite 如何与继承一起工作。

我有的：

3 个 java 类，它们有一个共同的属性。每个类都应该是一个 DatabaseTable。

我需要的：

为每个表更新一次公共属性，让 ORM 为我完成，避免我更新每个表。

有没有办法做到这一点？

# css - 当我添加元素时，我的容器 div 不会在我的一个页面上垂直扩展

> ID：12743172
> 
> 赞同：0
> 
> 时间：2012-10-05T09:15:59.850
> 
> 标签：css

当我添加元素时，我的容器 div 不会在我的一个页面上垂直扩展。因此，最底部的 div 与我的页脚重叠。容器中的 div 是相对定位的水平元素

在我的主页上，使用下面的 css 可以很好地扩展容器并且没有重叠

如果我还有头发，现在就会被拔掉！！:-))

```
#container {
    width: 900px;
    margin-left:auto;
    margin-right:auto;
    top:50px;
    position:relative;
    height: auto !important;
    min-height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:21:03.293

在我看来，上下文很少，因为页脚可能与您的容器 div 重叠，该容器 div 设置为以 100% 的最小高度开始，这取决于如何定义与您的容器 div 相关的页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:22:33.150

.............***[演示](http://tinkerbin.com/xYZK45dI)***

嗨，现在**给予**比`body, html height:100%;`给予任何**班级**或**id** `height 100%;`

像这样

```
body, html{
height:100%;
} 
```

***[现场演示](http://tinkerbin.com/xYZK45dI)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:51:49.323

```
rule-selector
{
    height: 100%;
} 
```

如果这对您不起作用，那么更具体的规则可能会禁用此规则，因此请使您的规则选择器尽可能具体。如果还不够特别，那么：

```
rule-selector
{
    height: 100% !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:34:51.693

试试这个：

```
#container {
width: 900px;
margin-left:auto;
margin-right:auto;
top:50px;
position:relative;
overflow:hidden ;
} 
```

最好的，

辛西娅

# php - 联系表格问题

> ID：12743174
> 
> 赞同：1
> 
> 时间：2012-10-05T09:16:10.490
> 
> 标签：php, forms, contact

我在联系表格方面遇到了各种各样的问题。当我在我的家庭服务器上进行测试时，一切运行顺利。一旦我上传到网上，它就不起作用了。首先有标题问题，现在显然“这个网页有一个重定向循环”。

这是我的代码。请告诉我该怎么做。谢谢。

```
<?php
// Title: Contact Form - Dolce Forno GB
// Updated: 5/9/2012

//Validation code
if (!empty($_POST)) {
$errors = array();

//variables
$name      = $_POST['name'];
$email     = $_POST['email'];
$phone     = $_POST['phone'];
$subject   = $_POST['subject'];
$message   = $_POST['message'];

//All field are required
if (empty($name) === true || empty($email) === true || empty($phone) === true ||   empty($subject) === true || empty($message) === true ){
    $errors[] = 'Please fill in all the fields.';
}
    else {
        //This regex allows only: a-z,A-Z, space, comma, full stop, apostrophe, dash
        if (!preg_match("/^[a-zA-Z\s,.'-]+$/", $name)) { 
            $errors[] = 'Invalid name.'; 
            /*die ("Invalid name."); */
        }
        //var_filter php function
        if (filter_var($email, FILTER_VALIDATE_EMAIL) === false) {
            $errors[] = 'Invalid email address.'; 
        }
        //This regex allows only: 0-9, space, dash, brackets, min-max length: 10-15
        if (!preg_match("/^[0-9\s]{10,15}$/", $phone)){
            $errors[] = 'Invalid phone number.';
        }
    }
}
if (empty($errors)) {
    //send email
    mail('info@dolcefornogb.com', 'Contact Form', $subject, 'Message:' . $message,'From: ' . $name . $email . $phone);
    header('Location:mail.php?sent');
    exit ();
}
print_r($errors);

?>

<DOCTYPE html>
<html>
<head>
</head>
<body>
<?php
if (isset($_GET['sent']) === true) {
    echo '<p>Thanks for contacting us!</p>';
}
else {
    if (!empty($errors)){
        echo    '<ul>';

        foreach ($errors as $error){
            echo '<li>', $error,'</li>';

        echo    '</ul>';
        }
    }
?>
        <form action="" method="post">

        <p> <label for="name">Name 
        <span class="small">Add your name </span></label> 
        <input type="text" name="name" id="name" 
        <?php 
        if(isset($_POST['name']) === true){
            echo 'value="', strip_tags($_POST['name']),'"';
        }
        ?>
        >
        </p>
        <p> <label for="email">E-mail address
        <span class="small"> Add your e-mail</span></label> 
        <input type="text" name="email" id="email"
        <?php 
        if(isset($_POST['email']) === true){
            echo 'value="', strip_tags($_POST['email']),'"';
        }
        ?>          
        >
        </p>
        <p><label for="phone">Phone<span class="small"> Add your phone number</span></label> 
        <input type="text" name="phone" id="phone"
        <?php 
        if(isset($_POST['phone']) === true){
            echo 'value="', ($_POST['phone']),'"';
        }
        ?>
        >
        </p>
        <p><label for="suject">Subject </label> 
        <input type="text" name="subject" id="subject"
        <?php 
        if(isset($_POST['subject']) === true){
            echo 'value="', strip_tags($_POST['subject']),'"';
        }
        ?>
        >
        </p>
        <p><label for="message">Message:</label>
        <textarea name="message" id="messgae" rows="10" cols="50"> 
        <?php 
        if(isset($_POST['message']) === true){
            echo strip_tags($_POST['message']);
        }
        ?></textarea> 
        </p>
        <p><label for="call">Request Phone Call</label>
        Yes:<input type="radio" value="Yes" name="call">
        No:<input type="radio" value="No" name="call">
        </p>
        <p class="buttons">
        <input type="submit" value="Send"> <input type="reset" value="Clear">
        </p>
        </form>
<?php       
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:26:20.580

尝试重定向到仅包含成功消息的其他页面。

即替换

```
header('Location:mail.php?sent'); 
```

和

```
header('Location:mail-success.php?sent'); 
```

然后摆脱（移动到新页面）

```
if (isset($_GET['sent']) === true) {
    echo '<p>Thanks for contacting us!</p>';
} 
```

还尝试将 303 状态添加到标头调用

[http://www.electrictoolbox.com/php-303-redirect/](http://www.electrictoolbox.com/php-303-redirect/)

# php - 无法抓取 Facebook URL

> ID：12743175
> 
> 赞同：1
> 
> 时间：2012-10-05T09:16:13.760
> 
> 标签：php, facebook

我的一个网站有一个带有 iframe 的应用程序。

我想通过 news.reads 操作进行最简单的发布。

我得到下一个错误：

```
Fatal error: Uncaught OAuthException: (#3502) Object at URL http://fb.raal.co.il/ has og:type of 'website'. The property 'article' requires an object of og:type 'article'. thrown in /home1/raalcoil/public_html/fb/src/base_facebook.php on line 1106 
```

经过一番查看后，我在调试器上遇到了这些错误：

```
Critical Errors That Must Be Fixed

Facebook URL:   Facebook URLs cannot be crawled.
Errors That Must Be Fixed

Missing Required Property:  The 'og:url' property is required, but not present.
Open Graph Warnings That Should Be Fixed

Inferred Property:  The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property:  The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags. 
```

链接到调试器：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Ffb.raal.co.il%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Ffb.raal.co.il%2F)

网站本身： http: [//fb.raal.co.il/](http://fb.raal.co.il/)

为什么facebook无法爬入我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:42:54.917

> 为什么facebook无法爬入我的网站？

因为您的页面会自动*重定向*到 facebook.com - 更准确地说，是到 Auth 对话框。

您可以在调试器输出中的*Redirect Path*下看到这一点。

如果您希望您的用户被自动重定向到 Auth 对话框（从用户的角度来看，我不喜欢这样，因为我想在授权之前先查看页面/应用程序必须提供的内容） - 然后执行仅适用于*用户*，即排除 Facebook 刮板（通过用户代理或/和 IP 地址）。

# magento - Bootstrap jquery 方法 Magento 的原型库

> ID：12743182
> 
> 赞同：0
> 
> 时间：2012-10-05T09:16:43.737
> 
> 标签：magento, twitter-bootstrap, prototype, jquery

想知道有没有人遇到过这个问题。我已经很好地将 Bootstrap 集成到我正在构建的 Magento 主题中，一切都很好。

也就是说，直到我尝试使用手风琴功能。查找原型库方法而不是 jQuery 的代码似乎存在问题。我已经尝试了通常的修复，$ - jQuery 并且没有冲突，但它只在我禁用原型库时才有效 - 这显然不好。

外面的任何人都遇到过这个问题，可以在工作回合中给我建议吗？目前我已经放弃使用 Scriptaculous 来演奏手风琴了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T14:09:07.633

我怀疑这是由于 Magento 前端和管理区域中使用的原型中的过渡冲突而发生的。

请参阅：[Twitter Bootstrap 转换冲突prototypejs](https://stackoverflow.com/questions/12715254/twitter-bootstrap-transition-conflict-prototypejs)

你可以试试这个库：[https](https://github.com/jwestbrook/bootstrap-prototype) ://github.com/jwestbrook/bootstrap-prototype看看它是否能解决你手风琴的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T07:40:21.253

而不是 bootstrap.js 或 bootstrap.min.js 使用下面的 js 文件来获得解决方案。

1.  jQuery.js
2.  美化.js
3.  bootstrap-transition.js
4.  引导警报.js
5.  引导模态.js
6.  引导-dropdown.js
7.  引导-scrollspy.js
8.  引导-tab.js
9.  引导工具提示.js
10.  bootstrap-popover.js
11.  引导按钮.js
12.  bootstrap-collapse.js
13.  引导轮播.js
14.  引导-typeahead.js
15.  application.js 如果需要更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:25:39.540

在 Magento 中使用 jQuery 有时会很棘手。我通常会做类似的事情：
`jquery-ui-1.8.9.noconflict.min.js`

并放在`jQuery.noConflict()`文件末尾。

还要确保**在**原型之后加载 jQuery，并且任何页面上只包含 1 个版本的 jQuery。

我通常喜欢一直使用 jQuery 而不是 $ 但我猜匿名函数也应该可以工作：

```
(function($) {  /* use $ here */  })(jQuery); 
```

# mysql - 过滤来自 Mysql 查询的整数结果

> ID：12743188
> 
> 赞同：1
> 
> 时间：2012-10-05T09:16:57.447
> 
> 标签：mysql

我有一个 Mysql 查询。我只想过滤整数结果。我的查询是-

```
SELECT * FROM table as p WHERE p.test between 0 AND 999 
```

但结果来了——

```
747
748
749
FO4001
FO4002
750
751 
```

我想问两件事——

1）有什么办法可以排除以下结果-

```
FO4001
FO4002 
```

2）为什么这些会出现在结果中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:24:16.890

试试这个，`REGEXP`用来测试值是否全是数字。

```
SELECT * 
FROM table1 
WHERE x BETWEEN 0 AND 999
      AND x REGEXP '^[0-9]+$'; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/49c3f/19)

# javascript - javascript 的问题无法读取的属性“值”

> ID：12743189
> 
> 赞同：1
> 
> 时间：2012-10-05T09:17:10.427
> 
> 标签：javascript, getelementbyid

我已经完成了一个功能，但我不明白为什么，它的一部分不起作用。

实际上，我使用使用 className 和 Id 的方法。

这是代码的一部分：

```
 var items = new Array();
 var itemCount = document.getElementsByClassName("items");

 for(var i = 0; i < itemCount.length; i++)
 {
     items[i] = document.getElementById("p"+(i+1)).value;
 }

 return items;
 } 
```

而在 jsfiddle 中显示该 Id 存在的 html 部分。

所以它不应该返回给我这个错误：

未捕获的类型错误：无法读取 null fiddle.jshell.net:402 的属性“值”

相关行如下：

items[i] = document.getElementById("p"+(i+1)).value;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:21:25.660

代表着：

```
document.getElementById("p"+(i+1)) 
```

`null`在一些循环迭代中返回。换句话说，该元素不存在。然后您尝试从中检索`.value`属性`null`，这会引发异常。

**更新**

如果我正确阅读了代码，`p7`则丢失了。您可以像这样检查：

```
var elem = document.getElementById("p"+(i+1));
if ( !elem ) {
    alert('p'+(i+1)+' is missing!');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:23:31.813

这发生在最后一个元素 i+1 上。所以改变它。

```
for(var i = 0; i < itemCount.length; i++)
{
alert("i"+i+" "+document.getElementById("p" + (i+1)).value);
 items[i] = document.getElementById("p" + (i+1)).value;
 } 
```

这一直运行到第 5 个元素，即 p6。如图所示，服务器代码本身缺少 p7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:26:33.403

在您的小提琴中，您有 td 元素，其 id p7 缺失和 p8 两次。这仅在您的小提琴示例中还是在您的实际代码中？如果它也在您的代码中，那么就是您的问题。您必须将其中一个 id 更正为 p7。

# java - 不能在 32 位机器上给 JVM 3072m 堆空间

> ID：12743190
> 
> 赞同：-2
> 
> 时间：2012-10-05T09:17:12.353
> 
> 标签：java, heap-memory

抱歉问这个问题，应该多搜索一下。

我使用相当大的数据集和内存密集型算法运行 weka。我需要我无法获得的所有堆空间！

这有效：

```
java -jar -Xmx2048m weka.jar & 
```

但这并不

```
java -jar -Xmx4096m weka.jar & 
```

我得到：

```
Error occurred during initialization of VM Could not reserve enough 
space for object heap Could not create the Java virtual machine. 
```

通过一些快速搜索，我发现这是上限

```
java -jar -Xmx2594m weka.jar & 
```

我有 4GB 内存，但有 32 位机器。为什么我不能使用 2^32 字节 = 4096MB 的内存？

对于未来，我想知道如果我有正确的硬件和操作系统，我是否可以用数百 GB 的堆空间运行 java？

我安装了 1.6 和 1.7 JVM：

```
$java -showversion
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:18:34.480

使用允许您使用更多内存的 64 位版本的 Java。这是 32 位 Java 虚拟机的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:22:17.423

> 我有 4GB 内存，但有 32 位机器。为什么我不能使用 2^32 字节 = 4096MB 的内存？对于未来，我想知道如果我有正确的硬件和操作系统，我是否可以用数百 GB 的堆空间运行 java？

对于 4 GB，我建议您使用 64 位操作系统和可能的 64 位 JVM，因为堆大小的限制可以小至 1.2 GB（在 Windows XP 上）

如果你想要更大的 JVM，我建议确保你有 64 位操作系统和 JVM，并且你有比 JVM 更大的内存。例如，如果你想要一个 40 GB 的堆，你需要 48 GB 或 64 GB 的内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:22:40.827

如果你有 4GB 的 RAM，你怎么能指望你的 JVM 可以使用所有的内存呢？JVM 正在运行的操作系统怎么样，这也需要内存。它的工作方式是，即使您通常可以处理所有 4GB，操作系统也会限制每个进程可用的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T10:03:29.617

您无法分配 4096m 因为。它试图获得一个 4096m 的块。这在任何给定时间点都是不可能的。因此，您可以使用 3000-4000 之间的一些较小的值。或确保您的 RAM 未被任何进程使用

# android - 拆分操作栏 - 当我使用 android:showAsAction="always" 时图标重叠

> ID：12743193
> 
> 赞同：4
> 
> 时间：2012-10-05T09:17:36.583
> 
> 标签：android, icons, android-actionbar

我的问题是特定操作项图标和“溢出菜单”图标在拆分操作栏中​​相互重叠，如下所示。

![截屏](../Images/0095b637f3d4bcd97dc68ee5916585d1.png)

我使用的菜单资源文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="a"/>
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="b"/>
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="c"/>
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="d"/>
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="ifRoom"
        android:title="e"/>
    <item
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="always"
        android:title="f"/>
    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>
</menu> 
```

请记住，第六个菜单项的 android:showAsAction 属性是**"always"**。当我使用普通操作栏时，一切正常。

那么，这种行为是 Android 框架的错误吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:29:14.747

> 那么，这种行为是 Android 框架的错误吗？

想必。您可能希望搜索[Android 问题跟踪器](http://b.android.com)以查看那里是否有报告。如果不是，请创建一个可重现的测试用例，在模拟器或 Nexus 设备上演示该问题，并在那里发布一个新问题。如果您想到它，请添加指向该问题的链接作为对此答案的评论。

> 有解决方法吗？

替换`always`为`ifRoom`第六个和后续操作栏项目，至少对于`-normal-port`配置，应该有效。

# objective-c - IOS6 上的 NSDateComponents 不起作用？

> ID：12743198
> 
> 赞同：0
> 
> 时间：2012-10-05T09:17:53.540
> 
> 标签：objective-c, ios, ios6, exc-bad-access, nsdatecomponents

我有一个使用 IOS4 和 5 的简单程序。现在使用 IOS 6 我收到以下错误消息：

```
2012-10-05 11:08:16.386 app[1698:19d03] 2012-10-05 09:08:11 +0000
2012-10-05 11:08:18.072 app[1698:19d03] 2012-10-05 09:08:11 +0000
2012-10-05 11:08:19.273 app[1698:19d03] 2012-10-05 09:08:11 +0000
2012-10-05 11:08:19.274 app[1698:19d03] 2012-10-05 09:08:11 +0000
2012-10-05 11:08:19.275 app[1698:19d03] 0
2012-10-05 11:08:25.055 app[1698:19d03] 2011-10-05 09:08:11 +0000
2012-10-05 11:08:25.823 app[1698:19d03] (
"<UILongPressGestureRecognizer: 0xa167f60; state = Possible; view = <UITableViewCellContentView 0xa168000>; target= <(action=_longPressGestureRecognized:, target=<UIPickerTableViewWrapperCell 0xa168090>)>>")
2012-10-05 11:08:25.824 app[1698:19d03] 2012-10-05 09:08:11 +0000
2012-10-05 11:08:25.824 app[1698:19d03] -[__NSArrayI timeIntervalSinceReferenceDate]: unrecognized selector sent to instance 0x94ef5d0
2012-10-05 11:08:25.825 app[1698:19d03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI timeIntervalSinceReferenceDate]: unrecognized selector sent to instance 0x94ef5d0'
*** First throw call stack:
(0x1d16012 0x11fae7e 0x1da14bd 0x1d05bbc 0x1d0594e 0x1d25cd3 0xa092 0x120e705 0x145920 0x1458b8 0x206671 0x206bcf 0x205d38 0x17533f 0x175552 0x1533aa 0x144cf8 0x1f4fdf9 0x1f4fad0 0x1c8bbf5 0x1c8b962 0x1cbcbb6 0x1cbbf44 0x1cbbe1b 0x1f4e7e3 0x1f4e668 0x14265c 0x296d 0x28a5) 
```

第一次运行是两个相等的日期。如您所见，在第二次运行中，我更改了选择器上的 fhDate ...

为了便于阅读，代码被简化了一点：

```
aiDate = [adoIgazPicker date];
NSLog(@"%@", aiDate);
fhDate = [forgHelyPicker date];
NSLog(@"%@", fhDate);
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *startDate = fhDate;
NSDate *endDate = aiDate;
NSLog(@"%@", startDate);
NSLog(@"%@", endDate);
NSDateComponents *comps = [gregorian components:NSMonthCalendarUnit fromDate:startDate toDate:endDate options:0]; //THIS LINE FAILS IF THE DATES ARE NOT THE SAME
int months = [comps month];
NSLog(@"%i", months); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:28:22.713

我已经换了

```
NSDateComponents *comps = [gregorian components:NSMonthCalendarUnit fromDate:startDate toDate:endDate options:0]; 
```

和

```
NSInteger months = [[[NSCalendar currentCalendar] components: NSMonthCalendarUnit
                                                    fromDate: startDate
                                                      toDate: endDate
                                                     options: 0] month]; 
```

现在它正在工作:)。

# mysql - MySQL 更新性能非常差

> ID：12743200
> 
> 赞同：3
> 
> 时间：2012-10-05T09:18:03.250
> 
> 标签：mysql, sql, sql-update

我在 MySQL 上的 UPDATE 性能非常差，我的更新语句非常基本，例如：

```
UPDATE `tbl_name` 
   SET `field1` = 'value1', `field2` = 'value2' .. `fieldN` = 'valueN' 
WHERE `tbl_name`.`id` = 123; 
```

值很少 (15)，所有 TEXT 类型和 WHERE 条件只是使用 id 的一个。值是 JSON 字符串（但这不应该打扰 MySQL，它应该将它们视为纯文本）。

在“tbl_name”中，我的记录很少（大约 4k）。

问题是执行这个 UPDATE 语句我得到了 8 秒的执行时间（取自 MySQL 慢查询日志）。

我在 EC2 High CPU Medium istance 上单独运行 MySQL，我认为这些性能“正常”几乎是不可能的，我希望性能更高。

你有什么想法来调查这个问题吗？

** 更新 ** 感谢您的快速回答，表是 InnoDB，id 是 PRIMARY，UNIQUE。值为 TEXT（不是 varchar）

** 更新之二 ** 不，id 是整数，所有其他字段都是 TEXT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:54:47.750

Since MySQL do not support `EXPLAIN UPDATE` statements before version 5.6.3, we're quite blind about this query. Try `USE INDEX` statement...

I've launched the same on my server. All was ok with 15 `TEXT` fields and 4096 rows of quite arbitrary text. It was ok with both `USE INDEX(PRIMARY)` and `IGNORE INDEX(PRIMARY)` statements.

So, I suppose, you have problems with your SQL server, installation package, or whatever, not query...

# c# - OleDbException 未处理：SQL：找不到列“Q0P2”[从 oledataadapter 更新 dbf 空闲表]

> ID：12743201
> 
> 赞同：0
> 
> 时间：2012-10-05T09:18:02.980
> 
> 标签：c#, .net, oledb, dbf, oledbdataadapter

我的问题仍然没有得到解决，因此我从 C# OleDbDataAdapter 中返回了更新 dbf 文件 [free table -vfp] 的不同问题。

```
string MyConStr = "Provider=VFPOLEDB.1; Data Source='C:\\Temp'; Persist Security Info=False";

VFPDAp = new OleDbDataAdapter();
VFPDAp.InsertCommand = new OleDbCommand();
VFPDAp.UpdateCommand = new OleDbCommand();

VFPDAp.InsertCommand.CommandText = "insert into my_table1 (my_time,reminder) values(?, ?, ?)";
VFPDAp.UpdateCommand.CommandText = "update my_table1 set my_time=?, reminder=? where sl_no=? ";

VFPDAp.InsertCommand.Connection = OleCon1;
VFPDAp.UpdateCommand.Connection = OleCon1; 

OleDbParameter Par1 = new OleDbParameter("my_time", -1);
Par1.DbType = DbType.String;
Par1.SourceColumn = "my_time";
Par1.ParameterName = "my_time";

OleDbParameter Par2 = new OleDbParameter("reminder", -1);
Par2.DbType = DbType.String;
Par2.SourceColumn = "reminder";
Par2.ParameterName = "reminder";

OleDbParameter Par3 = new OleDbParameter("my_time", -1);
Par3.DbType = DbType.String;
Par3.SourceColumn = "my_time";
Par3.ParameterName = "my_time";

OleDbParameter Par4 = new OleDbParameter("reminder", -1);
Par4.DbType = DbType.String;
Par4.SourceColumn = "reminder";
Par4.ParameterName = "reminder";

VFPDAp.InsertCommand.Parameters.Add(Par1);
VFPDAp.InsertCommand.Parameters.Add(Par2);
VFPDAp.UpdateCommand.Parameters.Add(Par3);
VFPDAp.UpdateCommand.Parameters.Add(Par4);

OleCon1.ConnectionString = MyConStr;
OleCon1.Open();
VFPDAp.Update(VfpTbl);
OleCon1.Close(); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:41:20.090

您的插入语句有 3 个“？” 但只有 2 个参数

```
insert into my_table1 (my_time,reminder) values(?, ?, ?)
(should it be 3 columns inserted or 2...)

update my_table1 set my_time=?, reminder=? where sl_no=? 
```

每个 ”？” 需要自己的参数，所以总共需要5个（或通过插入6个）

# ios - iPhone中的斑马打印机代码

> ID：12743204
> 
> 赞同：1
> 
> 时间：2012-10-05T09:18:14.320
> 
> 标签：ios, zebra-printers

感谢您经历这一切。我成功集成了在 xcode 中工作的 Zebra 打印机，并成功地从模拟器中获得了标签打印机，但是当我尝试在我的设备上调试它时出现问题：“ld：警告：忽略文件 /Users/MYSystem/Desktop/MYProject/libZSDK_API. a，文件是为不是被链接的体系结构的存档构建的 (armv7) 体系结构 armv7 的未定义符号：“_OBJC_CLASS_$_ZebraPrinterFactory”，引用自：MyViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_TcpPrinterConnection”，引用自： MyViewController.o ld 中的 objc-class-ref：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）”。

出了什么问题，请帮我解决这个问题..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:45:13.683

问题是该库是为 ios 模拟器构建的，该模拟器使用的是 i386 的 mac osx 架构，但 ios 设备基于 ARM v6/v7 架构，这就是您收到此错误的原因。尝试为 ios 设备编译库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:40:53.937

您需要包含设备的库，而不是模拟器。如果您查看您的安装文件夹，该`lib`文件夹有一个`Device`和一个`Simulator`目录。链接到`Device`目录中的库。

# css - css3 中心 div

> ID：12743205
> 
> 赞同：0
> 
> 时间：2012-10-05T09:18:18.143
> 
> 标签：css

如何`div`使用 CSS3 的灵活框模型居中？div 不应该有固定的大小。我正在寻找一个仅能做到这一点的简单示例（我发现的大多数示例都做得更多，而且我还没有将它们简化为简单的东西）。

例如，将以下框在页面上水平居中：

```
<div class='centered'>
  <p>some text</p>
  <p><img src='sample.png'/></p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:43:37.957

[死点](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)。

您需要设置一个可见溢出的地平线并从那里开始播放。

# iphone - SDWebImage/UIImageView+WebCache.h 文件未找到错误

> ID：12743208
> 
> 赞同：0
> 
> 时间：2012-10-05T09:18:29.030
> 
> 标签：iphone, objective-c, sdwebimage

我在我的项目中集成了 SDWebImage，它在我的 mac 系统中的工作就像一个魅力，但是当我将我的项目发送到其他 mac 系统时，它显示错误，如 SDWebImage/UIImageView+WebCache.h File Not Found 但同一个项目在我的系统中工作。在连续运行项目 2 到 3 天后，有时我的 mac 系统中也会出现同样的错误

我尝试了所有方法，例如更改项目路径>目标>构建设置>'标题搜索路径>$（SOURCE_ROOT）/SDWebImage

还尝试了 $(BUILT_PRODUCTS_DIR) - 在标题搜索路径中，

请给我一些建议来解决我的问题

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:27:40.287

它只是因为在您的项目中添加的 SDWebimaege 它是唯一的参考所以在您的项目文件夹中添加 SDWebimages 演示项目的文件夹

我像这样配置SDwebimage：-

*   您需要首先右键单击您的项目名称：-> 将文件添加到您的项目-> 选择 SDWebImageproject 并添加它们

注意：- 请不要检查复制选项

*   现在单击您的 xcode 中的项目名称，以构建阶段：-> 目标依赖项：-> 单击 + 按钮并添加 SDWebimage ARC

*   现在选择链接二进制库单击+按钮添加libSDWebimageARC.a并再次单击+并添加imageIO.framework并添加libxml2.dylib就是这样

*   去构建设置：->其他链接标志：->添加-ObjC

*   和标题搜索路径添加这三项

    1 /usr/include/libxml2

    2 "$(OBJROOT)/UninstalledProducts/include"

    3 "$(TARGET_BUILD_DIR)/usr/local/lib/include"

现在构建和运行它的工作就像顺利欢呼.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:23:18.113

也可以尝试在您的框架路径中标题：

$(SDKROOT)/开发者/库/框架

# php - symfony2 注销

> ID：12743213
> 
> 赞同：9
> 
> 时间：2012-10-05T09:18:36.303
> 
> 标签：php, symfony, login

我的问题是捕获用户注销。我拥有的代码是：

```
public  function onAuthenticationFailure(Request $request, AuthenticationException $exception){

    return new Response($this->translator->trans($exception->getMessage()));
}

public function logout(Request $request, Response $response, TokenInterface $token)
{
    $empleado = $token->getUser();
    $log = new Log();
    $log->setFechalog(new \DateTime('now'));
    $log->setTipo("Out");
    $log->setEntidad("");
    $log->setEmpleado($empleado);
    $this->em->persist($log);
    $this->em->flush();
}

public function onLogoutSuccess(Request $request) {
    return new RedirectResponse($this->router->generate('login'));
} 
```

`TokenInterface`问题是当您运行注销功能时我无法访问用户令牌？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T05:24:23.643

要获取令牌，您必须注入安全上下文。

**1\. 创建类 Logout 监听器，如下所示：**

```
namespace Yourproject\Yourbundle\Services;
...
use Symfony\Component\Security\Http\Logout\LogoutSuccessHandlerInterface;
use Symfony\Component\Security\Core\SecurityContext;

class LogoutListener implements LogoutSuccessHandlerInterface {

  private $security;  

  public function __construct(SecurityContext $security) {
    $this->security = $security;
  }

  public function onLogoutSuccess(Request $request) {
     $user = $this->security->getToken()->getUser();

     //add code to handle $user here
     //...

     $response =  RedirectResponse($this->router->generate('login'));

    return $response;
  }
} 
```

**2\. 然后在 service.yml 中，添加这一行：**

```
....
logout_listener:
   class:  Yourproject\Yourbundle\Services\LogoutListener
   arguments:  [@security.context] 
```

就是这样，希望有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-24T15:22:04.753

请参阅[http://symfony.com/doc/current/reference/configuration/security.html](http://symfony.com/doc/current/reference/configuration/security.html)

安全.yml

```
secured_area:

    logout:
        path:   /logout
        **success_handler: logout_listener** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T05:12:20.957

看看这里是否可以覆盖捆绑包的任何控制器：

[http://symfony.com/doc/current/cookbook/bundles/inheritance.html](http://symfony.com/doc/current/cookbook/bundles/inheritance.html)

# dns - 如何使用 POEdit 从特定域获取（可翻译的）字符串

> ID：12743214
> 
> 赞同：5
> 
> 时间：2012-10-05T09:18:40.600
> 
> 标签：dns, gettext, poedit

我已经尝试了几个小时来寻找一种设置[POEdit](http://www.poedit.net)的方法，以便它只能从特定域中获取文本

我的 gettext 函数如下所示：

```
function ri($id, $parameters = array(), $domain = 'default', $locale = null) 
```

示例调用：

```
echo ri('Text %xyz%', array('%xyz%'=>100), 'myDomain'); 
```

我只需要获取域 myDomain 的文本进行翻译，或者至少我希望 POEdit 将这些文本放入域特定的文件中。有没有办法做到这一点？

我发现了几个相似的问题，但答案并没有真正告诉我该怎么做（我想我是个菜鸟，必须用简单的英语解释才能理解）：

[如何在 Poedit 中设置 gettext 文本域？](https://stackoverflow.com/questions/2240033/how-to-set-gettext-text-domain-in-poedit)

[如何获取可翻译消息列表](https://stackoverflow.com/questions/3896561/how-to-get-list-of-translatable-messages)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T14:46:31.377

所以我经过几天的搜索终于想通了，我终于在这里找到了答案：

[http://sourceforge.net/mailarchive/message.php?msg_id=27691818](http://sourceforge.net/mailarchive/message.php?msg_id=27691818)

> *   xgettext 识别字符串中的上下文，并在 *.pot 文件中给出一个 msgctxt 字段，该字段被翻译软件识别为上下文并显示为这样（查看下面显示上下文的 Pootle 的图像）
>     
>     
>     *   这可以通过 3 种方式完成：
>         
>         
>         1.  代码中的字符串格式应为 _t('context','string'); 并且 xgettext 调用应该采用 --keyword=_t:1c,2 的形式（这基本上向 xgettext 解释了关键字函数中有 2 个参数，第一个是上下文，第二个是字符串）
>         2.  格式为 _t('string','context'); 的代码中的字符串 和 xgettext 调用应采用 --keyword=_t:1,2c 形式
>         3.  代码中的字符串应为 _t('context|string') 并且 xgettext 调用应采用 --keyword=_t:1g 的形式

因此，为了回答我自己的问题，我将其添加到 Poedit 的“来源关键字”选项卡中：

```
ri:1,3c 
```

ri 是函数名，1 是 stringid 的位置，3 是上下文/域的位置

希望这对其他人有所帮助，我讨厌所有这些神秘的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T06:50:29.823

[（这是我在这里](https://stackoverflow.com/a/30425802/237188)对同一件事的回答的转贴。）

GNU gettext 工具和 Poedit（使用它们）都不支持这种对 gettext 的特殊滥用。

在 gettext 中，*域*大致是“一个软件”——一个程序、一个库、一个插件、一个主题。因此，它通常驻留在单个目录树中并且*单独*存在 - 或者至少，如果您有多个片段=域，您可以将它们合理地组织到一些您可以限制提取的子目录中。

*像您一样在单个文件*中混合和匹配域不是 gettext 的预期用途，除了使用您自己的辅助函数之外，没有合理的解决方案来处理它，例如将所有 myDomain 文本包装到`__mydomain`（您必须定义，显然）并在为 myDomain 提取时将其添加到 Poedit 中的关键字列表中，而*不是*将其添加到其他域文件的关键字列表中。

# java - 保存不同活动的数据

> ID：12743215
> 
> 赞同：1
> 
> 时间：2012-10-05T09:18:41.780
> 
> 标签：java, android

我在保留用户在我的 android 活动类中输入的数据时遇到问题。我已经确定我需要使用该`onSavedInstanceState(Bundle outState)`方法，但是我的程序编写方式使这变得困难。

用户在课堂上输入各种数据，`DataEntry.java`他们提交的信息显示在`DataSummary.java`. 这工作正常。

但是，当用户离开时，如果您返回查看您已经编写的内容`DataSummary.java`，则填写原始提交数据的其余信息会丢失。下面是.`DataEntry.java``DS.java``DataSummary.java`

```
public class DataSummary extends Activity {

ImageView resultImage;
TextView resultName; 
TextView resultDescription;
TextView resultType;
TextView resultProject;

public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState); 
   setContentView(R.layout.activity_data_summary);

   //Check if there is anything in the 'bundle' and if not produce message - AVOIDS NULLPOINTEREXCEPTION when navigating to Activity
   Bundle bundle = this.getIntent().getExtras();     
   if (bundle != null){
   int image = bundle.getInt("image");
   String name = bundle.getString("key");
   String description = bundle.getString("key1"); //gets data from DataEntry activity
   String type = bundle.getString("key2");
   String project = bundle.getString("key3");

   resultImage=(ImageView)findViewById(R.id.resultImage);
   resultName=(TextView)findViewById(R.id.resultName);  //adds the TextViews to the activity
   resultType=(TextView)findViewById(R.id.resultType);
   resultDescription=(TextView)findViewById(R.id.resultDesc);
   resultProject=(TextView)findViewById(R.id.resultProject);

   resultImage.setImageResource(image);
   resultName.setText(name); // Fills the textviews with imported data
   resultType.setText(type);
   resultDescription.setText(description);
   resultProject.setText(project);
   }    

   else
   {
       Toast.makeText(DataSummary.this,"Received no data yet!", Toast.LENGTH_LONG).show();
   }

}

/* MANAGES ACTIVITY LIFESTYLE */
public void onSavedInstanceState(Bundle outState){  
    super.onSaveInstanceState(outState);
} 
```

`onSavedInstanceState`如果用户离开此活动，我如何扩展获取创建活动时接收的导入数据并保留它的方法？希望这解释得很好？

很难弄清楚如何使用 onCreate 中的变量以及我无法从其他方法访问它们（我想如果我知道如何做到这一点，我可以完成该方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:25:02.937

我建议你看看这篇文章，它清楚地解释了如何在你的整个应用程序中使用全局变量。

[安卓全局变量](https://stackoverflow.com/questions/1944656/android-global-variable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:36:52.697

这是您可以使用的一种逻辑。当您从意图中获取数据时，将其保存到您的应用程序的共享首选项中。每次您进入此活动时，检查这些键是否存在于共享首选项中，如果存在，获取并显示它们，否则从您保存的实例状态中检索它们并将它们写入共享首选项。

在 DataEntry 活动的 onStop() 方法中，清除这些共享首选项。

所以，用户从

```
DataEntry-->DataSummary ----check shared preferences in DataSummary, if data exists, use it. If some data exists or no data exists, get others from bundle and write it here. 
```

这样，每次用户来回走动时，他输入的任何内容都将仍然存在于共享偏好中。然后，

```
DataEntry--->Exit app or press back button, clear shared preferences fields so that when this activity is created next time (when user comes here again), he gets a clean slate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:21:46.290

您可以在类上设置静态变量。当用户输入数据时，您只需将数据写入变量。当用户回到应用程序时，您只需将存储在变量中的数据写入您的 EditTexts。

编辑：示例

假设您有 2 个 EditTexts et1 和 et2，它们存储的值是用户名和邮件。

```
public class DataEntryActivity extends Activity{

    private static String username;
    private static String mail;

    @Override
    public void onCreate(Bundle b){
         super.onCreate(b);
         setContentView(R.layout.layout_data_entry);
         EditText et1 = (EditText) findViewById(R.id.editTextUsername);
         EditText et2 = (EditText) findViewById(R.id.editTextMail);
         if (username != null)
              et1.setText(username);
         if (mail != null)
              et2.setText(mail);
         Button save = (Button) findViewById(R.id.saveButton);
         save.setOnClickListener(new OnClickListener(){

              public void onClick(View v){

                   if (et1.getText().toString().length() > 0)
                        username = et1.getText().toString();
                   if (et2.getText().toString().length() > 0)
                        mail = et2.getText().toString();
                   Intent intent = new Intent(DataEntryActivity.this, YourOtherActivity.class);
                   startActivity(intent);
              }

         });

    }

    public static String getUsername(){
         return username;
    }

    public static String getMail(){
         return mail;
    }

} 
```

从您的其他活动中，您只需调用 DataEntryActivity.getUsername() 和 DataEntryActivity.getMail() 即可将它们取回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:39:28.620

如果我理解正确，您有一个希望在两个活动之间共享的全局状态。使用 savedInstanceState 无法解决这个问题，因为当您从 DataSummary 导航回 DataEntry，然后再次前进到 DataSummary 时，新的 DataSummary 是一个不同的实例，并且不会获得您之前保存的 savedInstanceState。

为了使其工作，您必须通过 Intent 传递 DataSummary 添加的数据，而不是 saveInstanceState。为了获取在 DataSummary 中输入的数据，您可以使用 startActivityForResult 将其从 DataSummary 返回到 DataEntry：http: [//developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

使用静态全局变量不起作用，因为如果应用程序在后台被杀死，静态全局变量会丢失。

使用共享首选项，文件或数据库可能会起作用，但它不是很方便，也不是很优雅（您与整个应用程序共享数据，而通过意图通信限制了对您的两个活动的数据访问）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T09:40:38.430

对于初学者，您不应该使用在实例`onSavedInstanceState`之间传递信息。`Activity`在活动之间共享状态有不同的方法，一种是扩展`Application`类并将其用作单例。你也可以只使用一个普通的单例，但是扩展的好处`Application`是它的`onCreate`方法保证在你的应用程序启动时被调用。

```
public class YourApplication extends Application {
    private static YourApplication mInstance;
    private mDataState;

    @Override
    public void onCreate() {
        super.onCreate();
        mInstance = this;
        mDataState = new DataState();
    }

    public static YourApplication getInstance() {
        return mInstance;
    }

    public DataState getDataState() {
        return mDataState;
    }

    public void setDataState(DataState dataState) {
        mDataState = dataState;
    }
} 
```

现在您可以`setDataState`在`DataEntry`活动中，并`getDataState`在`DataSummary`活动中，获取`YourApplication`使用其`getInstance`方法的唯一实例。在 的`onCreate`方法中获取存储的值可能是一个想法`DataEntry`，因此用户可以看到之前输入的内容。

# c# - WCF客户端在外部解决方案时不起作用

> ID：12743216
> 
> 赞同：2
> 
> 时间：2012-10-05T09:18:42.680
> 
> 标签：c#, wcf

我创建了一个托管在 Windows 服务中的 WCF 服务。

基本上，该服务所做的只是从数据库中获取数据，在内存中进行一些工作并将数据保存回数据库。

我创建了一个 Windows 窗体客户端来使用该服务。在服务的解决方案中，我在项目中添加了对服务的服务引用，一切正常，但是当我安装并运行服务时，我创建了一个单独的客户端项目并引用了托管服务。

当我调用完成工作的函数时，它不起作用。（它必须更新数据库中的标志）

您能否提出可能导致此问题的原因，我没有发布任何代码示例，因为代码太大，主要是使用 ado.net，Nhibernate ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T00:57:23.997

如果该服务在另一个项目中，那么当第二个项目尝试访问它时，它可能不会运行。

设置 IIS 以公开服务（这通常是设置生产环境的方式）或作为测试，使用 Visual Studio 提供的 IIS Light (Cassini) 来托管服务。

实施上述任一选项后，将客户端配置为使用该服务 - URL 可能已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T07:48:28.027

我找到了解决方案。我的 WCF 的配置必须放在主机的配置文件中，在我的情况下这是一个 Windows 服务。

# xna - 在 Monogame/XNA 中绘制没有 spritebatch 的刺痛

> ID：12743230
> 
> 赞同：1
> 
> 时间：2012-10-05T09:19:42.730
> 
> 标签：xna, textures, rendering, monogame, spritefont

在我的项目中，我希望我的文本可以在不创建工件的情况下进行扩展。使用 spritebatch 缩放设置时不是这种情况；它看起来很丑。

有没有办法将文本转换为纹理以获得更好的缩放效果，还是有其他选择？我是否需要将纹理传递给效果，还是不会给出预期的结果？

# assembly - [R6030]如何从汇编代码初始化 C 运行时？

> ID：12743238
> 
> 赞同：2
> 
> 时间：2012-10-05T09:20:05.767
> 
> 标签：assembly

我正在尝试运行以下使用 CRT 函数的简单汇编代码`printf`。

```
.386
.model flat, c
Sleep proto stdcall arg1:DWORD  
printf proto c printlist:vararg 

.data
strformat db "%s", 0Ah, 0
string1 db "Starting..",0
string2 db "Wait 5 seconds..",0
string3 db "Finishing..",0

.code
main:
    invoke printf, addr strformat, addr string1
    invoke printf, addr strformat, addr string2
    invoke Sleep, 5000
    invoke printf, addr strformat, addr string3
    ret
end main 
```

编译和链接使用：

```
ml /c /coff temp.asm
link /subsystem:console temp.obj kernel32.lib libcmt.lib 
```

但是当我尝试运行它时，我收到以下错误。

```
runtime error R6030 - CRT not initialized 
```

如果我将它与 链接`msvcrt.lib`，它工作正常。问题在于 CRT 的静态版本。任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:53:46.427

> 结束主要

该语法将*main*设置为程序的入口点。您想编写普通的“结束”，以便链接器使用默认入口点 (mainCRTStartup)。并公开您的主要功能，以便链接器可以找到它。像这样：

```
.code
public main
main proc
    ; etcetera
    ret
main endp
end 
```

# java - j2me中的HTML文本提取

> ID：12743239
> 
> 赞同：1
> 
> 时间：2012-10-05T09:20:09.220
> 
> 标签：java, html, blackberry, java-me

我有一个来自 html 网页的字符串，如下所示：

`String htmlString =`

```
<span style="mso-bidi-font-family:Gautami;mso-bidi-theme-font:minor-bidi">President Pranab pay great 
tributes to Motilal Nehru on occasion of 
</span>
150th birth anniversary. Pranab said institutions evolved by 
leaders like him should be strengthened instead of being destroyed. 
<span style="mso-spacerun:yes">&nbsp;
</span>
He listed his achievements like his role in evolving of Public Accounts Committee and protecting independence of 
Legislature from the influence of the Executive by establishing a separate cadre for the Central Legislative Assembly,   
the first set of coins and postal stamps released at the function to commemorate the event.
</p> 
```

我需要从上面的字符串中提取文本，提取后我的输出应该看起来像

**输出**：

```
President Pranab pay great tributes to Motilal Nehru on occasion of 150th birth anniversary. Pranab said institutions evolved by leaders like him should be strengthened instead of being destroyed.  He listed his achievements like his role in evolving of Public Accounts Committee and protecting independence of Legislature from the influence of the Executive by establishing a separate cadre for the Central Legislative Assembly, now Parliament. Calling himself a student of history, he said Motilal's Swaraj Party acted as a disciplined assault force in the Legislative Assembly and he was credited with evolving the system of a Public Accounts Committee which is now one of the most effective watchdogs over executive in matters of money and finance. Mukherjee also received the first set of coins and postal stamps released at the function to commemorate the event. 
```

为此，我使用了以下逻辑：

```
int spanIndex = content.indexOf("<span");
spanIndex = content.indexOf(">", spanIndex);
int endspanndex = content.indexOf("</span>", spanIndex);
content = content.substring(spanIndex  + 1, endspanndex); 
```

我的结果输出是：

```
President Pranab pay great tributes to Motilal Nehru on occasion of 
```

我使用了不同的 HTMLParsers，但在 j2me 的情况下它们不起作用

谁能帮我获得完整的描述文本？谢谢 .....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:20:09.350

If you are using BlackBerry OS 5.0 or later you can use the BrowserField to parse [HTML into a DOM document](http://www.hrbuckley.net/2011/08/parsing-html-on-blackberry.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T06:43:46.703

我们可以在 j2me 的情况下提取文本，因为它不支持 HTMLParsers，如下所示：

```
private String removeHtmlTags(String content) {

        while (content.indexOf("<") != -1) {

            int beginTag;
            int endTag;

            beginTag = content.indexOf("<");
            endTag = content.indexOf(">");
            if (beginTag == 0) {
                content = content.substring(endTag
                        + 1, content.length());
            } else {
                content = content.substring(0, beginTag) + content.substring(endTag
                        + 1, content.length());
            }
        }
        return content;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:43:03.440

您可以继续按照您建议的方式处理其余字符串。或者，一个简单的有限状态自动机可以解决这个问题。我在 moJab 过程中看到了这样的解决方案（您可以在[此处](http://sourceforge.net/projects/mojab/files/mojab-tiny/0.2/)下载源代码）。在`mojab.xml`包中，有一个为 j2me 设计的简约 XML 解析器。我的意思是它也会解析你的例子。看看来源，它只是三个简单的类。它似乎无需修改即可使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:29:27.057

[JSoup](http://jsoup.org/)是一个非常流行的用于从 HTML 文档中提取文本的库。这是[一个这样的例子](http://jsoup.org/cookbook/input/parse-document-from-string)。

# javascript - 如何在 JavaScript 中嵌套 OR 语句？

> ID：12743248
> 
> 赞同：3
> 
> 时间：2012-10-05T09:20:39.827
> 
> 标签：javascript, nested-statement

目前我正在创建一个文件管理器。

我想要的是检查用户是否选择了视频文件。该文件可以是`mov`、`f4v`、`flv`和`mp4`。`swf`

我想检查我的 var`ext`是否是其中之一。

我所拥有的是：

```
if(ext == ('mov' || 'f4v' || 'flv' || 'mp4' || 'swf'))
{
    //Do something
} 
```

有谁知道我怎么能让这个工作。我不想使用开关，因为我会遇到很多情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T09:23:24.533

您需要将变量与这些值中的每一个进行显式比较。

```
if( ext === 'mov' || ext === 'f4v' || ... ) { 
} 
```

..但是，正则*表达式*来拯救，我们可以去

```
if( /mov|f4v|flv|mp4|swf/.test( ext ) ) { 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:22:54.050

您需要将它们分开，如下所示：

```
if(ext === "mov" || ext === "f4v" || ext === "flv" || ext === "mp4" || ext === "swf")
{
    // do stuff
} 
```

您还可以考虑将所有不同的扩展名放在一个数组中并检查该数组中是否存在 ext

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:24:22.260

不错的方法是这样的：

```
var exts = {
     "mov" : null,
     "f4v" : null,
     "flv" : null,
     "mp4" : null,
     "swf" : null,
}

if(ext in exts){
    // world peace
} 
```

# android - Java文件中的修改，每次都需要运行ndk-build吗？

> ID：12743250
> 
> 赞同：1
> 
> 时间：2012-10-05T09:20:53.293
> 
> 标签：android, eclipse, android-ndk

我使用 Eclipse 使用 NDK-sdk 创建了一个项目，我更改了“jni 文件夹内的 c 文件”，然后运行 ​​ndk-build。

更改java文件后是否还需要ndk-build？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:32:08.403

如果将代码更改为 c/c++ 文件，则必须使用 ndk-build 构建该库。如果不更改 c/c++ 文件，则不必构建库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:36:27.750

事情是这样的，只有在更改代码时才编译：

> *   C 文件中的任何更改 -> ndk-build -> 重新编译项目，以便库与 APK 一起打包 -> 在手机上重新安装

项目的 Java 文件中的任何更改

> *   重新编译项目->在手机上重新安装

共享对象库文件一旦生成就不需要编译，直到任何代码被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:23:12.193

如果您修改了 c 部分中的某些内容，并且如果您在 jni java 部分中进行了修改，则需要重新构建（方法定义，因为这也需要修改 c 部分）

# soapui - 有没有办法在soapUI中为一个断言分配多个来源？

> ID：12743251
> 
> 赞同：0
> 
> 时间：2012-10-05T09:21:01.323
> 
> 标签：soapui, assertion

有没有办法在soapUI 4.5.1 中为一个断言分配多个来源？例如，我需要检查所有服务响应是否包含某些元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:31:10.757

What you need is groovy script assertion.

I have no idea what exactly you're trying to assert but groovy is going to be the way to go to accomplish this.

# batch-file - 如何查看正在服务器上运行的 cron 作业？

> ID：12743256
> 
> 赞同：0
> 
> 时间：2012-10-05T09:21:27.510
> 
> 标签：batch-file, cron, webserver

我在 cron 中设置了几个批处理文件，并且几个 cron 作业运行了一个小时。

我想查看当前正在运行的 cron 作业以及它的状态。是否可以观看。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:23:42.593

`ps -aux`可以通过在控制台中输入来查看正在运行的进程。您还可以使用实用程序，例如`top`实时显示哪些进程正在运行。

# c++ - C++ 中的 Double.parseDouble() 等价物？

> ID：12743261
> 
> 赞同：0
> 
> 时间：2012-10-05T09:21:47.967
> 
> 标签：c++, equivalent

> **可能重复：**
> [std::string 浮动或加倍](https://stackoverflow.com/questions/1012571/stdstring-to-float-or-double)

我正在写一个计算器（学习 C++），刚决定做一个计算器，因为这是我学习 Java 时做的第一件事。

该程序执行以下操作：

1.  询问用户的第一个号码
2.  询问用户想对数字做什么（-、+、*、/）
3.  要求第二个号码
4.  显示结果。

在 Java 中从用户那里获取数字时，我使用 Double.parseDouble(number) 检查他们输入的内容是否为数字。

C++中有类似的命令吗？我一直在做研究，似乎你必须使用一些技巧，比如将它与 ASCII 等价物进行比较等。基本上，一个简单的任务需要大量代码......所以在我走这条路之前，我想在这里停下来看看如果可能有某种呼叫我可以检查输入是否是数字。我需要它来验证负数、零和正数，以及带小数的数字......其他所有内容都应该被拒绝，并且应该再次要求用户输入。

当我在 Java 中执行此操作时，我使用了 try/catch 语句，如果输入无效，它将返回方法（换句话说，它本身），因此它将循环并再次询问用户输入。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:24:34.880

您可以使用[`strtod`](http://www.cplusplus.com/reference/clibrary/cstdlib/strtod/). 它以方便的方式处理下溢和超出范围的值。

此外，正如 Joachim Pileborg 所指出的，如果您使用符合 C++11 的编译器，则[`std::stod`](http://en.cppreference.com/w/cpp/string/basic_string/stof)标准库中有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:26:08.333

使用函数 double atof(const char*) ；

示例用法：

```
const char* = "3.14159";
double pi = atof(myDouble); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T09:27:19.990

如何使用[isdigit](http://www.cplusplus.com/reference/clibrary/cctype/isdigit/)函数。

# knockout.js - Knockoutjs - 对大型 observablearray 进行排序

> ID：12743265
> 
> 赞同：3
> 
> 时间：2012-10-05T09:22:00.590
> 
> 标签：knockout.js

我在带有可观察数组的页面上定义了一个淘汰模型。我想有按钮来按不同的属性对数组进行排序，我有一个“工作”的解决方案，但对于大型数组来说它非常慢。

jsFiddle - [http://jsfiddle.net/7JNrc/](http://jsfiddle.net/7JNrc/)

按特定属性对淘汰的可观察对象数组进行排序的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:35:07.603

您的解决方案很慢，不是因为排序。它很慢，因为您将很多项目绑定到一个页面。渲染 200 个项目需要很长时间。此外，您的解决方案对用户不友好。在没有分页和搜索的情况下使用大列表非常不舒服。

所以我的建议是在你的列表中使用分页。在这种情况下，您不会遇到任何性能问题。

这是一个简单的客户端分页示例： [客户端分页](https://stackoverflow.com/questions/5975429/adding-client-side-paging-to-table-should-i-use-knockoutjs)

# javascript - 取消 iframe

> ID：12743268
> 
> 赞同：0
> 
> 时间：2012-10-05T09:22:09.827
> 
> 标签：javascript, iframe, cross-domain

我有一个页面（比如说[https://example.com/dir1/tidy.html](https://example.com/dir1/tidy.html)），它嵌入了一个 iframe 来托管来自另一个域的内容（比如说[https://foobar.com/dir2/whatsup.html](https://foobar.com/dir2/whatsup.html)）。如果用户在嵌入的 iframe 页面中按下取消，是否可以将父/容器页面重定向到不同的 url（如[https://example.com/dir2/yeah.html](https://example.com/dir2/yeah.html)）？我该如何做到这一点？

我原以为由于 iframe 页面属于不同的域，同源策略会阻止我使用 javascript 将事件/操作发送到父页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:30:22.950

同源策略阻止您从父域上的文档中*读取*数据。

它不会阻止您：

```
top.location = "foo bar baz"; 
```

甚至只是：

```
<a href="foo bar baz" target="_top">...</a> 
```

# wicket - 检票警告 allow_url_include=On

> ID：12743273
> 
> 赞同：0
> 
> 时间：2012-10-05T09:22:28.640
> 
> 标签：wicket

有时我会在 Wicket 应用程序的日志文件中收到以下警告：

```
04.10.2012 14:52:08,525 WARN  [org.apache.wicket.core.request.mapper.AbstractBookmarkableMapper] 
Unknown listener interface 'd allow_url_include=On ' 
```

这是什么意思，我该如何解决？我试过谷歌，但我只能找到 PHP 配置 allow_url_include 的结果。

我正在使用 Wicket 6.0.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:43:46.623

很可能是一个自动化工具试图利用一些 PHP 应用程序。Wicket 无法处理此请求并打印警告。在访问日志中查看哪些 HTTP 请求在此时间戳击中了您的服务器，以查看哪个请求导致了此警告。

在这种情况下，忽略此警告是安全的。

# mysql - SQL 处理午夜

> ID：12743280
> 
> 赞同：1
> 
> 时间：2012-10-05T09:22:58.957
> 
> 标签：mysql, sql

我正在处理（对我而言）巨大的 SQL 问题。我有一个名为“timeshifts”的表，它有 4 列：id、name、from 和 to。最后两种类型是TIME。

现在：我有三个时班：06:00 - 14:00 14:00 - 22:00 22:00 - 06:00

现在，我必须找到当前时间的正确班次（这就像一个魅力），但我找不到属于当前班次的正确记录。IE。名为 user_times 的表包含具有单独日期和时间值的字段。根据当前的时移，我必须找到属于时移的记录。前两班没问题，但第三班过了午夜，那是我的问题。

这是找到正确班次的查询，直到午夜的事件：

```
SELECT 
  FLOOR(SUM(time_sum) / 60) AS th,
  MOD(SUM(time_sum), 60) AS tm,
  t.* 
FROM
  ur_user_times ut,
  ur_timeshifts t 
WHERE CURTIME() >= IF (
    t.timeshift_to < t.timeshift_from,
    0,
    ADDTIME(t.timeshift_from, "00:15")
  ) 
  AND CURTIME() <= ADDTIME(
    IF (
      t.timeshift_to < t.timeshift_from,
      ADDTIME(t.timeshift_from, "10:00:00"),
      t.timeshift_to
    ),
    "00:15"
  ) 
  AND ut.`date` BETWEEN CURDATE() - INTERVAL 1 DAY AND CURDATE()
  AND ut.`start` BETWEEN ADDTIME(t.`timeshift_from`, "-10:00:00") AND ADDTIME(t.`timeshift_to`, "-10:00:00")
  AND ut.user_id = 40 
```

ut.start 是我们感兴趣的时间价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:38:36.340

试试这个：

```
select *
from timeshifts ts,
usertimes ut
where 
(ts.from < ts.to and ut.start >= ts.from and ut.start <= ts.to) OR
(ts.from > ts.to and (ut.start >= ts.from or ut.start <= ts.to)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:38:53.523

几天前发布了类似的查询：

请看这个问题：

[Shift wise datetime check in sql server query](https://stackoverflow.com/questions/12636022/shift-wise-datetime-checking-in-sql-server-query/12639743#12639743)

# python - Python，子进程，如何传递多个变量

> ID：12743286
> 
> 赞同：2
> 
> 时间：2012-10-05T09:23:13.150
> 
> 标签：python, subprocess

我正在使用 subprocess 模块运行带有两个不同变量的 find & grep 命令。我有一个语法错误，但我只是没有看到它。

使用一个变量，它运行得很好：

```
path = "src"
path_f = "TC" 
subprocess.Popen('find /dir1/tag/common/dir2/dir3 /dir1/tag/common/dir2/dir3/dir4/ -iname "%s"'%path, shell=True) 
```

两个变量：

```
 subprocess.Popen('find /dir1/tag/common/dir2/dir3 /dir1/tag/common/dir2/dir3/dir4/ -iname "%s"* | grep "%s"  > fileList.txt'%path, %path_f, shell=True) 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:27:15.837

它应该是：

```
subprocess.Popen('find /dir1/tag/common/dir2/dir3 /dir1/tag/common/dir2/dir3/dir4/ -iname "%s"* | grep "%s"  > fileList.txt'% (path, path_f), shell=True) 
```

注意在 (path, path_f) 周围添加的括号和删除的百分比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:51:50.243

[yakxxx 是对的](https://stackoverflow.com/a/12743352/296974)，但`shell=True`不是最优的。

最好做

```
sp1 = subprocess.Popen(['find', '/dir1/tag/common/dir2/dir3', '/dir1/tag/common/dir2/dir3', '/dir4/', '-iname', path], stdout=subprocess.PIPE)
sp2 = subprocess.Popen(['grep', path_f], stdin=sp1.stdout, stdout=open('fileList.txt', 'w'))
sp1.stdout.close() # for SIGPIPE from sp2 to sp1 
```

因为它可以让您更好地控制发生的事情，特别是没有外壳逃逸穿过您的方式。

例如，想象 a`path`或etc 的`path_f`值`'My 9" collection'`。这会使 shell 在 the`find`和`grep`命令上感到困惑。有一些方法可以解决它，但它们比上述方法更难。

见[这里](http://docs.python.org/library/subprocess.html#replacing-shell-pipeline)。

# struts2 - Struts 2 填充选择下拉列表

> ID：12743290
> 
> 赞同：0
> 
> 时间：2012-10-05T09:23:26.410
> 
> 标签：struts2, tiles

嗨，我想用一些值填充选择下拉列表。我使用 Struts 2、Tiles 和 JSP。我在 Action 类中初始化了我的列表，但我仍然收到以下错误： **原因：标签“选择”，字段“列表”，名称“anneeResultat”：请求的列表键“anneesResultatsList”无法解析为集合/数组/映射/枚举/迭代器类型。示例：人或人。{name} - [未知位置]** 这是我在 Action 类中的代码：

```
private AnneeResultat anneeResultat;
private Map<String, String> anneesResultatsList = new HashMap<String, String>();

public Map<String,String> getAnneesResultatsList() {
    this.anneesResultatsList.put("2005","2005");
    this.anneesResultatsList.put("2006","2006");
    this.anneesResultatsList.put("2007","2007");
    this.anneesResultatsList.put("2008","2008");
    this.anneesResultatsList.put("2009","2009");
    this.anneesResultatsList.put("2010","2010");
    this.anneesResultatsList.put("2011","2011");

        return this.anneesResultatsList;
    }
    public void setAnneesResultatsList(Map<String,String> anneesResultatsList) {
        this.anneesResultatsList = anneesResultatsList;
    }

    return SUCCESS;
    } 
```

我的 struts.xml 文件包含：

```
<action name="ChoixAxes" class="fr.si2m.occ.web.actions.ChoixAxesAction"
            method="execute">
            <result type="tiles">choixAxes.tiles</result>
        </action> 
```

我的jsp在这里：

```
<s:set name="theme" value="'xhtml'" scope="page" />
        <s:form action="ChoisirAxes" name="choices" id="choices">
         <s:select name="anneeResultat" label="Année de résultats" list="anneesResultatsList"></s:select>

        <s:radio label="Listes nominatives" name="listesNominatives" list="#{'1':'Oui','2':'Non'}" value="2" />
        <s:submit value="Calculer provisions" name="calculerProvisions"/>
        <s:reset value="Annuler" />
        <input type="button" value="Critères sauvegardés" id="criteresSauvegardes"/>
        </s:form> 
```

有人可以帮助我吗？我从昨天开始就有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T09:30:23.070

将 AnneesResultatsList 放入会话中

```
Map session=ActionContext.getScession();session.put("list",AnneesResultatsList );  
<pre>
s:select name="anneeResultat" label="Année de résultats" list="%{#session.list}""></s:select>
</pre> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:34:04.950

> 准备拦截器在实现 Preparable 的操作上调用 prepare()。对于需要确保某些逻辑在实际执行方法运行之前运行的任何情况，此拦截器都非常有用。

您的操作应该扩展 Preparable 拦截器并覆盖 prepare() 方法，提供预先填充的数据。

[Struts2 准备拦截器](http://struts.apache.org/2.3.4.1/docs/prepare-interceptor.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-28T11:11:16.673

实际上是，

```
Map session = ActionContext.getcontext().getsession();
session.put("key",list);

<s:select list="%{#session.key}"> 
```

# php - 数组中的php操作数

> ID：12743291
> 
> 赞同：0
> 
> 时间：2012-10-05T09:23:30.827
> 
> 标签：php, phpexcel

嗨，伙计们有以下数组：

```
 Array
   (
    [0] => Array
      (
        [SERIAL] => 1
        [SCORE_1] => 6.6490630173025
        [SCORE_2] => 13.010510864225
        [SCORE_3] => 7.5543177306323
        [SCORE_4] => 4.1576775823101
        [SCORE_5] => 5.3696604808987
      )

    [1] => Array
      (
        [SERIAL] => 2
        [SCORE_1] => 11.861835175219
        [SCORE_2] => 0
        [SCORE_3] => 1.988806017442
        [SCORE_4] => 0.97387338276326
        [SCORE_5] => 4.0322016758707
    ) 
```

我需要找到其数组中每个元素的比例，例如 SCORE_1/(SCORE_1+...+SCORE_5) 并且序列保持原样。PHP 代码如下所示：

```
$r = -1;
$namedDataArray = array();

for ($row = 2; $row <= $highestRow; ++$row) {
$dataRow = $objWorksheet->rangeToArray('A'.$row.':'.$highestColumn.$row,null, true,             true, true);
if ((isset($dataRow[$row]['A'])) && ($dataRow[$row]['A'] > '')) {
    ++$r;
    foreach($headingsArray as $columnKey => $columnHeading) {

        if($dataRow[$row][$columnKey]==0){

        $namedDataArray[$r][$columnHeading] = 0;

        }elseif($columnHeading=='SERIAL' ){

                $namedDataArray[$r][$columnHeading]=$dataRow[$row][$columnKey];
            } else {
                $x=(float)1.35;
                $a=pow($dataRow[$row][$columnKey],$x);

                $namedDataArray[$r][$columnHeading] = $a;
            }

        }
  }  
}  

echo '<pre>';

print_r($namedDataArray);

echo '</pre><hr />'; 
```

我还是 php 新手，一直在努力解决这个问题。我使用 PHPExcel 读取文件并将每个元素提高到 1.35 的幂。我用过`$total=array_sum($namedDataArray)`，但是当我尝试除法时，`$Score= $namedDataArray/$total`它说不支持的操作数类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:33:40.017

在这条线上：

```
$Score= $namedDataArray/$total 
```

`$namedDataArray`是一个数组。PHP 不允许您使用数组进行除法，您必须输入一个数字，例如`$Score = $namedDataArray[0]['SCORE_1'] / $total`

# objective-c - iOS中纵向和横向的屏幕方向（Objective-C）

> ID：12743293
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:23:35.383
> 
> 标签：objective-c, ios, orientation

我有一种情况，我想为不同的方向（纵向和横向）调用单独的方法。

例如：

```
If (Orientation == Portrait)
{
  Some method a;
}

Elseif (Orientation == Landscape)
{
  Some method b;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:29:36.893

我曾经`[[UIApplication sharedApplication] statusBarOrientation]`知道方向。

然后我用这个方法

```
if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])) {
//Do something if landscape
} else {
//Do something in portrait
} 
```

不要使用`[[UIDevice currentDevice] orientation]`，因为如果设备放在桌子上，它就不能正常工作，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:30:11.120

```
 if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
    {
         // code for landscape orientation      
    }

    if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
    {
         // code for Portrait orientation       
    } 
```

`UIDeviceOrientationIsLandscape`并且`UIDeviceOrientationIsPortrait`是宏的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:27:40.697

```
UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice] orientation];
if(deviceOrientation == UIDeviceOrientationPortrait)
    ...
else  ... 
```

枚举是`UIDeviceOrientation[something]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:50:31.540

试试这个：

UIInterfaceOrientation interfaceOrientation = [[UIApplication sharedApplication] statusBarOrientation];

if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)

```
 {// perform ua operation for landscape mode 
```

} 别的{

//纵向模式执行ua操作 };

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T15:46:00.010

**目标-c：**

```
-(void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator
{
    if (UIDevice.currentDevice.orientation == UIInterfaceOrientationPortrait) {
        printf("Portrait");
    } else {
        printf("Landscape");
    }
} 
```

# eclipse - 如何在安装前验证升级

> ID：12743295
> 
> 赞同：5
> 
> 时间：2012-10-05T09:23:39.037
> 
> 标签：eclipse, eclipse-rcp, eclipse-plugin, p2

我们有一个已获得许可的 Eclipse 功能，并且该许可由我们自己的代码处理。用户可以进入我们的更新站点并升级他的功能。我们面临的问题是用户的许可证需要更新才能使用新的升级。

我想要做的是根据用户许可证验证功能版本，并警告用户在安装之前需要更新他的许可证。

我想我会使用自定义 eclipse p2 touchPoint 操作 validateLicense 来做到这一点。

例子：

我的代码被调用，我根据用户的许可证验证版本。如果失败，我会警告用户，然后他可以取消安装。

所以我的第一个问题是：

*   我做对了吗，还是有其他方法可以做到这一点？

我的第二个问题非常基本：

*   我在哪里告诉 eclipse 运行我的代码？我在[这里查看了日食帮助](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_actions_touchpoints.html)，他们解释了它是什么。但我不明白将信息放在哪里来运行我的代码？是否在 feature.xml 中。

最后：

*   有没有如何创建和使用 p2 touchPonts 的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:17:54.197

接触点在安装时执行，这意味着解决（验证）已经发生。我不确定他们是否会提供帮助。如何创建代表用户已安装许可证的可安装单元 (IU)（或 Eclipse 功能）。然后，您会将您的产品依赖于该许可证。

例如，创建一个名为 com.mycompany.license (1.0.0) 的 IU。您将创建另一个名为 com.mycompany.license (2.0.0) 的文件。当您安装许可证时，相应的 IU 将被添加到配置文件中。

现在，当您安装产品时，产品的新版本需要许可证版本 2.0.0。如果未安装此许可证，则解析将失败。

这有意义吗？你认为这会有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:20:45.783

我实现了一个自定义操作，如此处所示[，](https://stackoverflow.com/questions/6154367/a-working-example-of-custom-p2-provisioning-action)我有一个似乎可以工作的系统。我省略了“接触点”扩展，因为在我的情况下它是不必要的，但其余的都是一样的。

我的操作是在我的功能（instructions.install）的安装阶段执行的，但也许配置阶段也可以工作。收集阶段不起作用。

该操作在安装过程中执行，下载完成后。理想情况下它会在下载之前，但这对我来说不是一个大问题。从操作返回错误状态会取消安装。它留下了一些下载的文件，但它们没有被激活，并且可能稍后被 p2 的垃圾收集器删除。

我还设法做了一些更有趣的事情。我的操作插件对我的主插件有依赖关系（可选且非贪婪）。所以安装是这样的：

*   动作插件已下载
*   执行自定义操作
*   该操作检测我的主插件是否已经安装，如果是，它会调用它以检索许可信息。主插件必须为该操作公开一个 API。该操作还检查主插件的版本以检测 API 是否存在。
*   该操作现在可以决定是继续还是取消安装。它甚至可以使用 Display#syncExec 与用户交互（这是 checkTrust 阶段的代码所做的，所以我认为它是安全的）。如果需要，该操作还可以检测安装是否是无头的。

一些陷阱：

*   动作本身必须是版本化的。它是您在 plugin.xml 和 p2.inf 文件中声明的版本，它与插件的版本不同。我只是将 1.0.0 替换为与我的插件相同的版本。这样，动作插件的最新版本总是在执行之前被下载。这很棒，因为现在许可规则的任何问题更改都可以在操作插件中实现。
*   Actions API 在 Eclipse 3.5 和 3.6 之间发生了变化。我可能会放弃对 3.5 的支持，因为它已经很老了。
*   Actions 插件可能应该被签名。我的情况就是这样。该系统对我来说似乎太强大了，因为只需将 Eclipse 指向一个更新站点就可以让它执行下载的代码。

我仍然需要测试它如何与不同版本的 Eclipse 和其他 IDE 一起工作。我在 3.6 中看到了一个奇怪的（非阻塞）错误。然而，结果是有希望的，而且看起来该系统可能确实有效。

# xml - 如何在 SVG (XML) 地图中将数据显示为鼠标悬停时的工具提示

> ID：12743298
> 
> 赞同：0
> 
> 时间：2012-10-05T09:23:38.900
> 
> 标签：xml, svg, maps

我对所有这些东西都很陌生。我需要在欧洲财务状况上使用 SVG 创建地图。我得到了所有的数据。地图现在工作正常。我什至可以在地图一侧的框中显示特定国家/地区的数据，例如人口、GDP 等。

但是，当用户将鼠标移动或悬停在特定国家/地区时，我需要将此数据显示为工具提示。就像，在鼠标悬停时显示数据并在每个国家/地区的鼠标移出事件中隐藏它。我的部分代码如下。

```
 <title id="title">Countries of Europe</title>
 <defs><script>
      <![CDATA[

    var country = []; 

    country[0]=["Abbreviation","Name","GDP","Population","Eurozone","Public Debit","Unemployment","Rating"];
    country[117]=["fi","Finland",239,5302545,"yes",48.6,7.6,"AAA"];
    country[118]=["de","Germany",3315,82217800,"yes",81.2,5.6,"AAA"];

    function myShowValues(myEvent)
    {
       var myScrId = myEvent.target.getAttribute('id').replace(/c/,'1'); 
       document.getElementById('myLegCantName').firstChild.data = '' + country[myScrId][1]+ '' ;    
       document.getElementById('gdp').firstChild.data='GDP: ' + country[myScrId][2]+' Billions of $US';
       document.getElementById('unem').firstChild.data='Unemployment: ' + country[myScrId][6]+' %';
       document.getElementById('sp').firstChild.data='S & P rating: ' + country[myScrId][7]+' ';
       document.getElementById('pd').firstChild.data='Public debt: ' + country[myScrId][5]+' % of GDP';
    }

    function changeopa(evt)
    {
       evt.target.setAttribute("opacity", "0.5")
       myShowValues(evt); 
    } 

    function info(evt)
    {
       var box= evt.target;
    }

    ]]>
</script></defs> 
```

然后我在下面使用这些功能，例如，

```
<rect id="ocean" x="-371.388" y="-44.213" fill="aliceblue" width="1222.493" height="783.168">
</rect>

<!-- EU Countries Below - arranged in alphabetical order -->

<!-- ISO-3116-1-ALPHA2 code - .de (Germany) -->
<path id="118" fill="#00CC00" stroke="#FFFFFF" stroke-width="0.7" 
onmouseover="changeopa(evt)"
onmouseout="evt.target.setAttribute('opacity', '1.0');"
d="M319.59,396.925c0.283,2.263,2.547,6.647,2.829,8.063  c0.425,3.395-4.102,5.658-3.111,8.346c0.565,1.697,5.94,2.404,5.94,4.526c0,2.121-1.697,2.829-0.424,4.385  c0.424,0.707,1.414,0.99,1.697,1.839c0.424,0.707-0.142,1.697,0,2.404c0.142,0.425,0.707,0.283,0.849,0.566  c0.707,0.99-0.99,3.395-1.415,4.243c-0.849,1.273,1.273,1.98,1.697,3.254c0.283,0.707-0.707,1.556-0.282,2.121  c0.565,0.849,1.839,0.566,2.404,1.132c1.98,1.839,1.132,12.165-0.565,12.448c-1.839,0.424-4.81-7.355-6.365-2.971  c-0.283,0.707,2.263,1.272,1.697,1.697c-1.697,1.414-4.102,1.556-5.8,2.546c-0.282,0.142,0,0.849-0.282,0.99  c-1.132,0.565-2.688-0.283-3.537,0.425c-0.707,0.565-0.424,1.697-1.131,2.263c-0.283,0.283-0.566-0.707-0.99-0.565  c-1.273,0.282-1.415,1.98-2.264,2.546c-0.424,0.425-1.273-0.283-1.697,0.142c-0.424,0.283,0,1.132-0.424,1.556  c-0.566,0.707-2.122-0.565-2.547-0.565c-3.536,0.565-4.102,3.253-5.233,5.517c-0.283,0.565-0.283-1.415-0.849-1.839  c-0.424-0.566-1.273-0.707-1.98-0.849c-1.273-0.283,1.414,4.243,4.244,6.082c0.282,0.142,1.272,0.283,1.414,1.132  c0.424,1.98-1.414,1.272-1.697,2.829c-0.142,0.424,2.971,5.657,3.395,6.082c2.404,2.404,2.971,0.707,4.526,2.264  c0.99,0.989,1.132,2.546,2.122,3.395c2.264,1.556,8.346,3.678,8.204,7.355c-0.142,3.819-0.99,2.971-3.961,2.263  c-0.282,0-0.565,0.142-0.707,0.425c-0.283,1.414,0.565,2.971-0.849,4.103c-1.273,0.989-7.214,2.404-7.355,4.667  c0,0,3.395,4.668,3.395,4.81c0.142,0.142-1.839,1.839-1.131,2.404c1.556,1.415,3.111-0.707,1.838,3.961  c0,0.283-0.282,0.707-0.565,0.707c-4.526-1.272-0.99-3.536-3.112-3.678c-1.131,0-2.121,0.99-3.253,0.85  c-0.565-0.142-0.425-1.132-0.849-1.273c-0.849-0.283-1.697,0.424-2.404,0.142c-0.283-0.142,0.282-0.99,0-0.99  c-1.697,0.142-0.142,2.404-0.566,2.546c-1.98,0.565-5.233-0.283-7.072,0.425c-0.566,0.282-0.283,1.272-0.849,1.556  c-0.565,0.424-1.273-0.283-1.839,0.142c-0.425,0.142,0.142,0.849-0.142,1.132c-0.142,0.141-4.951,1.414-5.517,1.131  c-0.283-0.282,0-0.99-0.283-1.272c-0.141-0.283-0.849-0.283-0.99-0.566c-0.141-0.282,0.707-0.142,0.566-0.424  c-0.566-1.839-4.526,0.424-5.658-0.849c0,0,0.283-0.142,0.283-0.283c-0.85-0.565,0,1.839-0.283,2.829  c0,0.565-2.688,3.819-3.678,2.829c-0.566-0.566,0.99-1.415,0.565-1.98c-0.142-0.142-0.565,0.425-0.849,0.425  s-0.707-0.142-0.849-0.425c-0.282-0.425,0.707-0.99,0-1.556c-0.565-0.425-0.849-1.132-1.414-1.415  c-0.425-0.283-0.99,0.425-1.556,0.283c-0.283-0.283,0-0.99-0.283-1.273c-0.707-0.565-0.566,1.98-2.829,1.273  c-1.556-0.566-2.546-2.122-4.103-2.546c-0.142,0-4.809,0.282-4.809,0.282c-0.566-0.282-0.566-1.272-1.132-1.556  c-0.142-0.283,0.282,0.707,0,0.849c-0.283,0.142-0.849,0-0.99-0.283c-0.142-0.424,0.565-0.99,0.282-1.272  c-2.121-2.122-4.525,1.697-4.102,1.839c0.849,0.142,1.697-0.142,2.546,0c0.565,0.142-0.99,0.283-1.414,0.565  c-0.283,0.142,0.142,0.849,0,0.99c-3.536,1.839-0.99-0.849-3.819-0.707c-0.425,0-6.932,1.556-7.355,0.707  c-0.142-0.283,0.849-0.424,0.707-0.565c-1.273-0.99-1.839,3.253-1.839-1.697c-0.142-1.98,1.273-3.819,1.415-5.8  c0-0.283-0.566-0.283-0.566-0.707c-0.142-0.708,0.142-1.415,0.425-2.122l1.979-3.253c0.143-0.849,0.283-3.961,0.708-4.951  c1.132-2.264,3.96-3.961,5.517-6.648c0.565-0.99-7.922-1.98-8.487-2.404c-0.425-0.425-0.142-1.273-0.565-1.697  c-0.707-0.566-5.234,1.272-5.517,0.849c-0.142-0.425,0.424-0.99,0.142-1.273c-4.244-3.819-1.415,1.98-3.112,0.142  c-1.415-1.415-2.122-4.668-3.253-5.375c-0.425-0.425-1.273,0-1.557-0.425c-1.556-2.829,4.103-3.96,2.122-6.365  c-0.283-0.424-3.678-0.707-4.386-3.678c-1.272-5.233,5.234-4.95,3.254-8.204c-0.424-0.707-1.697-0.565-1.98-1.414  c-0.142-0.566,0.99-1.132,0.849-1.697c0-0.425-0.849,0.141-1.132-0.142c-0.141-0.142-2.121-3.112-1.979-3.536  c0.142-0.566,1.132-0.566,1.272-1.132c0.425-2.405-3.678-3.254-2.404-3.536c0.424-0.142,0.707,0.424,0.99,0.424l2.688-2.404  c0.142-0.707-1.697,0.142-1.132-0.99c0.425-0.99,1.415-1.697,1.839-2.688c1.273-3.112-1.839-5.375-2.688-6.932  c-0.142-0.282,0.142-0.707,0.283-0.99c0-0.282-0.283-0.707,0-0.849c0.707-0.424,1.556,0,2.404-0.282c0.283-0.142-0.283-0.99,0-0.849  c0.849,0.282,1.415,1.272,2.404,1.272c0.99,0.142,4.81-1.132,5.234-2.122c0.424-0.989-2.688-1.131-1.414-1.979  c2.263-1.557,4.95-2.122,4.385-5.658c-0.142-1.98-5.375-1.132-4.103-3.254c0.142-0.424,0.849,0,0.849-0.282  c0.142-0.425-0.565-0.849-0.424-1.273c0-0.283,0.424-0.283,0.707-0.283c0.99,0,1.839,0.425,2.829,0.425  c1.132,0,0.142-2.264,0.565-3.395c0.283-0.99,2.688-5.517,2.404-7.922c0.425-0.142,0.85-0.424,1.273-0.99  c0.566-0.565-0.707-0.282-1.98-0.282l0,0c-0.283-0.283-0.707-0.142-0.99-0.142c-0.282,0-0.424-0.142-0.565-0.283  c-1.132-1.414,1.98-5.8,3.112-6.365c0.707-0.424,1.556,0.425,2.263,0.425c10.608-0.425-11.033-1.273,5.093-0.849  c0.141,0,0.565,0.141,0.707,0.282c0.849,1.557,1.414,8.063,4.951,6.648c1.131-0.425-1.132-10.185,2.121-10.185  c0.283,0,0.283,0.849,0.707,0.99c0.425,0.283,1.132,0.283,1.697,0.283c1.415,0.282,2.971-1.132,4.244-0.566  c0.99,0.425,0.99,1.839,1.556,2.688c0.708,1.132,4.526,8.346,4.526,3.536c0-0.989-2.121-0.707-2.971-1.556  c-1.414-1.272-1.131-4.526-3.818-4.95c-0.425,0-3.678,0.707-3.396-1.273c0.142-1.273,2.122-5.233,0.849-6.79  c-0.424-0.424-3.536,1.132-3.96-0.424c-0.142-0.283,0.849,0,0.989-0.283c0.283-0.283-0.989-0.849-0.707-0.849  c1.415-0.424,3.819,0.99,4.244-1.839c0-0.283-3.254-3.819-3.537-4.385c-0.424-0.99-0.565-2.122-0.565-3.112  c0.99,0.142,2.688,0,3.112,0c1.839,0.283,3.678,1.273,5.517,1.557c-0.142,0.424-0.142,0.565,0.142,0.424  c0.565-0.424,0.849-1.132,1.414-1.273c0.283,0-0.142,0.708,0,0.99c0.425,0.283,0.99,0.142,1.414,0.283  c0.99,0.142,1.98,0.142,2.688,0.566c0.424,0.282,0.565,0.849,0.565,1.272c0,0.142-0.283,0-0.283,0  c-0.282,0.142-0.849,0.425-0.565,0.565c0.142,0.283,0.849-0.282,0.99,0c0.425,0.708,0.282,1.557,0,2.264  c-0.283,0.707-2.263,1.132-1.697,1.839c0.707,0.99,3.395-1.556,3.536-0.283c0.142,0.849-1.414,2.405-0.566,2.688  c0.99,0.425,0.99-1.979,1.98-2.121c0.85-0.142,4.103,2.688,4.81,2.404c0.142,0,2.971-3.253,3.961-1.556  c1.98,3.678-7.921,7.497-2.546,8.063c1.131,0.142,1.98-1.273,3.111-1.273c1.415,0.142-0.142,4.244,2.971,2.122  c0.707-0.425,1.132-3.961,2.404-4.668c1.839-0.99,3.819-1.414,4.668,0.566c-0.141-0.425-0.283-1.132-0.141-1.273  c0.848-0.99,1.979-1.415,2.688-2.264c0.848-0.99,0.99-2.546,1.838-3.536c0.283-0.282,2.122,0.425,3.819,0.99  c0.708-0.142,1.415-0.283,1.698-0.283c0.99,0,0.424,1.98,0.99,2.829c0.424,0.566,1.414,0.283,1.838,0.849  c0.85,0.708,1.273,2.688,2.547,2.547c0.99,0,2.121-0.708,3.253-0.425c0.425,0.142-0.565,0.849-0.565,1.273  c0.141,1.132,0.565,2.263,0.99,3.395c0.424,1.132,1.838,1.556,2.971,1.98C318.6,396.925,319.167,397.065,319.59,396.925z   M306.719,386.032c0.282-1.272-0.283-2.828,0.141-4.102c0.425-1.273,4.668,2.404,3.819,1.132c-0.565-0.849-2.404-0.425-2.829-1.415  c-0.142-0.849,1.132-1.556,1.697-2.263c0.566-0.425-0.424,1.697,0.142,1.839c0.99,0.282,1.98-0.142,2.829,0.142  c0.849,0.282-1.132,1.414-0.849,2.263c0.283,0.99,1.556,1.132,1.98,2.122c0.282,0.282-1.556,1.697-3.819,2.263  C308.699,388.438,307.708,386.74,306.719,386.032z"/> 
```

到底;

```
<rect x="100" y="55" rx="20" ry="20" width="175" height="120"
style="fill:none;stroke:black;stroke-width:2;opacity:0.5"/>

<text id="myLegCantName" x="160" y="80" font-size="16" font-family="'DejaVuSansCondensed-Bold'" fill="#646464">
</text>
<text id="gdp" x="110" y="100" font-size="14" font-family="'DejaVuSansCondensed-Bold'" fill="#646464" >
</text>
<text id="unem" x="110" y="120" font-size="14" font-family="'DejaVuSansCondensed-Bold'" fill="#646464" >
</text>
<text id="sp" x="110" y="140" font-size="14" font-family="'DejaVuSansCondensed-Bold'" fill="#646464" >
</text>
<text id="pd" x="110" y="160" font-size="14" font-family="'DejaVuSansCondensed-Bold'" fill="#646464" >
</text>

<path id="boximage" x="78" y="100" /> 
```

我的问题是，我以前与任何脚本都没有联系。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:40:43.277

我在这里写了一篇关于如何向 SVG 添加工具提示的教程：[http ://petercollingridge.co.uk/interactive-svg-components/tooltip](http://petercollingridge.co.uk/interactive-svg-components/tooltip)

# vb.net - 插入带有所需文件名的宏

> ID：12743307
> 
> 赞同：0
> 
> 时间：2012-10-05T09:24:11.037
> 
> 标签：vb.net, visual-studio-2010, vba, ms-office

下面是我的代码，我的问题是我想在创建文档时输入我想要的文件名。但我不知道怎么做。你能帮助我吗。

这是我的代码：

```
 Dim oWord As Word.Application
    Dim odoc As Word.Document
    Dim oWModule As VBIDE.VBComponent
    Dim sCode As String
    Dim oCommandBar As Office.CommandBar
    Dim oCommandBarButton As Office.CommandBarControl

    ' Create an instance of Word, and show it to the user.
    oWord = New Word.Application()

    ' Add a Document.
    odoc = oWord.Documents.Add

    ' Create a new VBA code module.
    oWModule = odoc.VBProject.VBComponents.Item("ThisDocument")

    sCode = "Sub FileSaveAs" & vbCr & _
       "   msgbox ""Save As has been Disabled!"" " & vbCr & _
       "end sub"

    ' Add the VBA macro to the new code module.
    oWModule.CodeModule.AddFromString(sCode)

    oWord.Visible = True
    ' Set the UserControl property so that Excel does not shut down.
    'oWord.UserControl = True

    ' Release the variables.
    oCommandBarButton = Nothing
    oCommandBar = Nothing
    oWModule = Nothing
    odoc = Nothing
    oWord = Nothing

    ' Force garbage collection.
    GC.Collect() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:41:48.263

添加文档后可以运行 odoc.saveas 吗？在 Powerpoint 中，分配文件名-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:31:35.270

添加代码行

```
' Add a Document.
    odoc = oWord.Documents.Add
    odoc.Name = "DesiredNameHere" 
```

重命名word文档。

# nunit - TeamCity SpecFlow NUnit Watin 和 ApartmentState STA

> ID：12743313
> 
> 赞同：1
> 
> 时间：2012-10-05T09:24:26.570
> 
> 标签：nunit, teamcity, watin, specflow, apartment-state

我试图让我们的 specflow watin 测试在我们新的 teamcity 服务器上运行。问题是我无法让内置的 nunit 运行器在 appartmentstate STA 中运行测试。

我们之前使用了这个配置，它适用于其他测试运行器：

```
<NUnit>
    <TestRunner>
        <add key="ApartmentState" value="STA" />
    </TestRunner>
</NUnit> 
```

但是 TeamCity NUnit 测试运行器似乎没有接受这个配置。我们还有其他配置健全性测试，所以我们知道测试运行者至少会读取我们测试项目的配置。

也可以像这样使用 RequiresSTA 属性：

```
[Test, RequiresSTA]
public void ShouldRunThreadApartmentStateSTAWith()
{
  Assert.AreEqual(ApartmentState.STA, Thread.CurrentThread.GetApartmentState());
} 
```

但是由于 NUnit 测试是由 SpecFlow 生成的，所以我无法控制这些属性的设置方式。

我怎样才能让这个设置工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:13:38.477

找到了答案。

在 AssemblyInfo.cs 中设置 RequireSTA 属性会使配置过时。

```
[assembly:RequiresSTA] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T17:31:37.183

SpecFlow 生成的 NUnit 测试是一个分部类定义，因此只需在另一个文件中创建另一个分部类定义，该文件具有其属性。

# c - 将stdin设置为C中的文件时如何从键盘读取

> ID：12743317
> 
> 赞同：4
> 
> 时间：2012-10-05T09:24:36.653
> 
> 标签：c, file, stream, keyboard, stdin

我认为这很简单，但显然不适合我！

我有一个控制台应用程序。我需要从键盘读取输入，但`stdin`已被重定向到一个文件。那么如何创建一个指向键盘流的文件句柄，我可以使用它`fgets`等等？

我发现这`ttyname(0)`似乎是我在 POSIX 环境中寻找的东西，而我在这里没有。我在带有标准 Visual Studio 编译器的 Windows 系统中。

有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:14:07.467

摆脱 DOS 编程的黑暗日子：尝试打开“CON:”（控制台），这是一个保留字。希望它会在 Windows 中以相同的方式打开。冒号可能需要也可能不需要。“dir >con:”和“dir >con”在命令提示符下仍然有效。

此外，请务必在输出句柄上使用 setbuf() 系列中的某些内容以避免缓冲......它不应该缓冲终端 I/O，但确保它永远不会受到伤害。

同样，不确定，但我怀疑`FILE *conin, *conout`如果您似乎在一个句柄同时进行输入和输出时遇到问题，则打开单独的输出和输入可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:15:23.920

没有简单/便携的方法来判断键盘是否存在（您的应用程序可能正在从串行端口、telnet 会话或其他任何东西的终端仿真器运行）。如果确实存在键盘（包括触摸屏上的键盘图片），那么您无法真正判断击键需要通过多少层软件才能到达您的应用程序（例如，击键可能来自键盘驱动程序到输入法编辑器到 GUI 到外壳到应用程序）。这意味着尝试直接从键盘驱动程序或其他东西获取击键是一个坏主意，几乎在所有情况下都会失败。

解决问题的最佳方法是首先找出导致 STDIN 重定向的一系列设计失败。

例如; 也许应用程序应该有一个命令行选项来从文件中读取一些数据；这样应用程序就可以从文件中获取一些数据，从 STDIN 中获取一些数据（如果命令行选项不存在，则从 STDIN 中获取所有数据）。

# php - 带有 json/ajax 和 odbc 结果的 jQuery 自动完成

> ID：12743318
> 
> 赞同：0
> 
> 时间：2012-10-05T09:24:42.437
> 
> 标签：php, jquery, ajax, json, odbc

希望能找到答案。

我用 PHP 构建了一个网络应用程序，其中有一个记录列表和一些搜索字段。搜索字段之一是“客户编号”。客户编号保存在本地数据库 (MySQL) 中。如果我搜索客户编号，它会为我提供数据库的相应结果行 => 逻辑。

现在我想用 jQuery UI Autocomplete 为这个搜索字段构建一个扩展。

**我想做的事：**

我希望用户能够在搜索字段“customernumber”中搜索 customerNAME，并且自动完成会将正确的 customernumber 输入值中。

客户名称也与客户编号一起保存在外部 ODBC 数据库中。

**我已经做了什么：**

我试图从外部 ODBC 数据库中获取所有名称和数字，并得到如下列表：

```
customername: somename1 
customernumber: number1

customername: somename2
customernumber: number2

customername: somename3 
customernumber: number3

... and so on 
```

如果我也使用 ajax 调用这个列表来自动完成，它根本不起作用。

有人可以帮帮我吗！？经过几个小时的搜索，我在互联网上或任何接近它的东西上都找不到答案。

我会很高兴的！谢谢！

我到目前为止得到的示例：

**jQuery脚本：**

```
<script
    $(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }

        $( "#customer" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "customers.php",
                    dataType: "json",
                    success: function( data ) {
                        response( function( item ) {
                            return {
                                label: item.customername,
                                value: item.customernumber
                            }
                        });
                    }
                });
            },
            minLength: 3,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);
            }
        });
    });
</script> 
```

**输入 HTML：**

```
<div class="ui-widget">
    <label for="customer">Search</label>
    <input id="customer" />
</div> 
```

**customer.php 中的 SQL 查询**

```
$connection = odbc_connect('host', 'username', 'password') 
              or die('Connection failed!');

$sql = "SELECT 'customername', 'customernumber' FROM 'database.table'";

$results = odbc_exec($connection, $sql);

while($myRow = odbc_fetch_array($results)){
    $rows[] = $myRow;
};

foreach($rows as $row) {
    foreach($row as $key => $value) {
        echo $key . ': '. $value . '<br/>';
    }
}; 
```

**要清楚**

我在搜索框中输入 customerNAME，我想检索 customerNUMBER 作为值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:27:44.787

您必须以正确的格式传回数据。

```
 while($r = odbc_fetch_array($results))
    $rows[] = array("label" => $r[0], "value" => $r[1]);    
 echo json_encode($rows);

 $("#search").autocomplete({  
        //define callback to format results  
        source: function(request, response){  
            //pass request to server  
            $.getJSON("query.php?term=" + request.term, function(data) {  
               response(data);
            });  
        });  
    }); 
```

有关更多选项，请参阅 jQuery UI[文档](http://jqueryui.com/demos/autocomplete/#option-source)。

**编辑** 当前解决方案的问题

*   odbc_fetch_array 可能会在某些 RDBS 上返回没有列名的值（使用 print_r 进行调试）

    姓名号码 Bob 123

变成

```
Array
    (
        [0] => "Bob"
        [1] => 123
    ) 
```

*   JSON 输出甚至无效（使用 firebug 调试），我们示例的当前输出为：

    0：“鲍勃”1:123

# jquery - 如何使用淘汰赛 observable 作为 json 对象

> ID：12743320
> 
> 赞同：0
> 
> 时间：2012-10-05T09:24:48.407
> 
> 标签：jquery, knockout.js

我用这样的物体进行淘汰赛

```
 var Employee = function () {
                self.Name = ko.observable();
                self.Id = ko.observable();
                self.Manager = ko.observable();
                self.Title = ko.observable();
                self.Salary = ko.observable();
                self.Age = ko.observable();
            }; 
```

并且视图模型看起来像这样

```
 var EmployeesViewModel = function () {
                var self = this;
                var url = "/api/employees";
                var refresh = function() {
                    $.getJSON(url, { }, function(data) { self.Employees(data); });
                };

                // Public data properties
                self.Employees = ko.observableArray([]);
                self.newEmployee = ko.observable(new Employee());

                // Public operations
                self.addEmployee = function (model, event) {
                    var item = self.newEmployee();
                    alert(model); // always undefined
                    self.Employees.push(item);
                };
                self.removeEmployee = function (employee) {
                    self.Employees.remove(employee);
                    removeEmployee(employee);
                };
                refresh();
            };
            ko.applyBindings(new EmployeesViewModel()); 
```

在**self.addEmployee**方法中，当我使用该**项目**时，我得到空值，尽管该项目已添加到列表中并显示在网格中。

编辑：jsfiddle [http://jsfiddle.net/magedfarag/b4tsX/中的问题](http://jsfiddle.net/magedfarag/b4tsX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:58:10.243

您正在`Employee`错误地初始化您的实例：`self`在那里未定义，您需要`this`. 此外，`alert(item.Name)`将显示一个函数，因为`item.Name`它也是一个可观察对象（您只展开`self.newEmployee`可观察对象，但其属性仍然是可观察对象）。

[更新了小提琴](http://jsfiddle.net/b4tsX/2/)。

# grails - 使用 groovy 1.8 及更高版本覆盖渲染方法

> ID：12743321
> 
> 赞同：1
> 
> 时间：2012-10-05T09:24:56.690
> 
> 标签：grails, groovy, grails-2.0

我正在使用 grails 2.0.1 并覆盖渲染方法。

我有以下代码。

```
 grailsApplication.controllerClasses.each { controller ->
          //keep old render method
          def original = controller.metaClass.getMetaMethod("render", [Map] as Class[])
          controller.metaClass.originalRender = original.getClosure()

          controller.metaClass.renderForBrand = { Map args ->  
          originalRender(args)   
           }
    } 
```

在 original.getClosure() 我得到以下错误。

```
Message: groovy.lang.MissingMethodException: No signature of method: org.codehaus.groovy.reflection.CachedMethod.getClosure() is applicable for argument types: () values: []
Possible solutions: getClass()
   Line | Method
->> 300 | evaluateEnvironmentSpecificBlock in grails.util.Environment
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   293 | executeForEnvironment            in     ''
|   269 | executeForCurrentEnvironment . . in     ''
|   303 | innerRun                         in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . . . . . . .  in java.util.concurrent.FutureTask
|   886 | runTask                          in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . . . . . . . .  in     ''
^   662 | run                              in java.lang.Thread 
```

在 grails 1.3.7 中，我的代码运行良好，在 grails 2.x 的情况下，它会失败。非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:38:07.877

您可以保存对原始`render`方法的引用并调用该`invoke`方法以执行它：

```
grailsApplication.controllerClasses.each { controller ->
          //keep old render method
          def originalRenderMethod = controller.metaClass.getMetaMethod("render", [Map] as Class[])
          controller.metaClass.renderForBrand = { Map args ->  
              originalRenderMethod.invoke(delegate, args)   
          }
} 
```

无论使用 Grails 1.3.x 还是 2.0.x（我都测试过），这种机制都有效。

# vb.net-2010 - 在 vb.net 中出现错误

> ID：12743325
> 
> 赞同：1
> 
> 时间：2012-10-05T09:25:05.113
> 
> 标签：vb.net-2010

AM 使用 vb.net.in 按钮单击我重定向到其他页面。在该页面加载中有一些代码来检查 mysql 表是否包含特定日期的数据。如果表格包含数据，我想显示类似“表格包含特定日期的数据。当我运行此代码时出现错误。

我的代码：

```
Dim offset As Integer = -1
    txtd1.Text = DateAdd(DateInterval.Day, offset, Today)

    If txtd1.Text <> String.Empty Then
        Dim dataexist As New SECSALETableAdapters.pro_dataexistSECSALETableAdapter
        Dim dtexists As SECSALE.pro_dataexistSECSALEDataTable = dataexist.GetData(Convert.ToDateTime(txtd1.Text).Date)

        If dtexists.Rows.Count = 0 Then

            ---------
         else
          msgbox("data already present for the particular date")
         end if
        end if

table contain data for the particular date. but am getting the message in the msg box.am getting error when i run this code. 
```

错误：

> 无法启用约束。一行或多行包含违反非空、唯一或外键约束的值。

表结构：

```
fld_id      int(11) NO  PRI     auto_increment
fld_msg     longtext    YES         
fld_phone   varchar(20) YES         
fld_date    date        YES         
fld_status  varchar(45) YES     0   
fld_type    varchar(45) YES         
fld_name    varchar(50) YES 
```

# internet-explorer - InternetExplorer.Application 清除内容

> ID：12743328
> 
> 赞同：1
> 
> 时间：2012-10-05T09:25:20.663
> 
> 标签：internet-explorer, vbscript

我有以下代码在 Internet Explorer 中打开一个窗口并向用户显示进度。

```
Set objExplorer = CreateObject("InternetExplorer.Application")
objExplorer.navigate "about:blank" 
objExplorer.document.write  "Processing record 1 of 1000" 
```

在上面的代码之后，我想清除文档的内容并写一些别的东西，但是当下面的内容不清楚时。

```
objExplorer.document.Clear 
```

有没有办法在不关闭窗口的情况下清除内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:45:03.063

我发现下面的代码可以解决问题；

```
objExplorer.Refresh 
```

# ios - 使用 Monotouch 在 iPhone 上检测慢速互联网

> ID：12743329
> 
> 赞同：0
> 
> 时间：2012-10-05T09:25:27.140
> 
> 标签：ios, xamarin.ios, monodevelop

在 iPhone/iPad 应用程序中，如果用户在 wifi 或 3g 上，我们希望启用图片上传，但不是在边缘，因为这需要太长时间。我已经看到了检测您是在运营商网络还是 wifi 上的方法，但是是否有一种很好/简单的方法可以检测您获得了哪种运营商带宽，例如边缘或 3g？有没有人尝试过定时下载/上传一个小样本文件来测试运营商带宽？测试这个是个好主意，还是只用一个“取消上传”按钮，如果没有耐心，用户可以点击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:46:06.550

人们可以在点击开始上传时从 3G 切换到 EDGE，或者在决定不上传后立即获得 3G、LTE 或 Wi-Fi 覆盖。在现实世界中，带宽可以保持稳定，是的，但是当你在移动时，它也可以在几分钟内改变十几次。

我认为在任何情况下只允许图片上传，如果上传速度很慢通知用户并让他们随时取消，你会得到更好的服务。如果模型允许，您可以让图像上传在后台运行并迟到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:33:22.297

似乎您只能检测用户使用的网络类型：wifi 或 3g/edge（这里是[sample](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)）。如果要检测实际速度，则需要手动测试实际连接。

对我来说，最好提供“取消上传”按钮，不要伤害网速慢的用户。

# xhtml - XHTML 的 XSL 转换中的命名空间问题

> ID：12743331
> 
> 赞同：1
> 
> 时间：2012-10-05T09:25:38.630
> 
> 标签：xhtml, namespaces, xslt-1.0

在使用 XSL 将 XHTML 转换为 XHTML 时，我遇到了名称空间的问题。考虑作为示例输入：

```
<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head><title>Test</title></head>
    <body>
        <p>Remove this</p>
    </body>
</html> 
```

然后以下转换不起作用（例如，不删除`<p />`）：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()" name="copy">
        <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
    </xsl:template>

    <xsl:template match="p" />
</xsl:stylesheet> 
```

但是这个可以：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <xsl:template match="@*|node()" name="copy">
        <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
    </xsl:template>

    <xsl:template match="xhtml:p" />
</xsl:stylesheet> 
```

我的问题和疑问是：如何更改 XSLT，以便不必为所有 XHTML 元素添加前缀并且它仍然可以匹配它们？从我到目前为止的尝试来看，添加一个像这样的默认命名空间`<xsl:stylesheet xmlns="http://www.w3.org/1999/xhtml" />`并不能实现这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:31:19.717

```
How can I change the XSLT so that I do not have to add prefixes to all the XHTML elements and it still get to match them? 
```

这是可能的，但我建议定义命名空间并在引用此命名空间中的元素时使用前缀：

```
<xsl:template match="*[local-name()='p']" /> 
```

**警告**：

只有在保证没有两个相同`local-name()`但在不同名称空间中的元素时，这种技术才是安全的。

# php - 结合 2 条 php 命令行？

> ID：12743332
> 
> 赞同：2
> 
> 时间：2012-10-05T09:25:41.803
> 
> 标签：php

我有这两条命令：

```
$x = explode('/', $_SERVER["PHP_SELF"]);
echo ($x[0]); 
```

请告诉我如何将它们组合成 1 行？我试过这个但是错误：

```
echo ( explode('/', $_SERVER["PHP_SELF"])[0] ); 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:27:10.270

我不认为你可以这样做，除非你有 PHP 5.4 [http://php.net/manual/en/migration54.new-features.php](http://php.net/manual/en/migration54.new-features.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T09:27:43.820

从`PHP`版本开始`5.4`，您可以使用它：

```
$x = explode('/', $_SERVER["PHP_SELF"])[0]; 
```

在较低版本中，您不能。在大多数情况下，无论如何它都会降低您的代码的可读性。

查看[PHP 5.4 新特性](http://php.net/manual/en/migration54.new-features.ph) `function array-dereferencing`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:36:51.183

你可以这样强迫它

```
echo current(explode('/', $_SERVER["PHP_SELF"])); 
```

但它违背了严格的标准，我认为没有*充分*的理由将它塞进一条线上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:31:52.637

```
print_r(array('0'=>explode('/', $_SERVER["PHP_SELF"]))); 
```

输出： **数组（[0] => 数组（[0] => [1] => img [2] => index.php））**

# ios - NSUserDefaults 和 alertView

> ID：12743334
> 
> 赞同：0
> 
> 时间：2012-10-05T09:25:46.670
> 
> 标签：ios, xcode, nsuserdefaults, uialertview

我正在创建一个将在用户首次启动应用程序时显示的免责声明。免责声明是带有 2 个选项的 alertView。如果用户同意，则将显示 firstViewController。如果他不这样做，他将被重定向到另一个 viewController。但如果用户第一次同意，我无法让免责声明消失。每次应用启动时都会显示。任何帮助，将不胜感激。先感谢您..

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

      if (![[defaults valueForKey:@"keyDisclaimer"] isEqualToString:@"accepted"]) {

UIAlertView *disclaimer = [[UIAlertView alloc] initWithTitle:@"Read Before use" message:@"By using this app you agree to its terms and conditions.\n\n\n\n\n\n\n\n\n\n\ntext heren\n\n\n\n\n\n\n\n\n\n\n\n\n" delegate:self cancelButtonTitle:@"No!" otherButtonTitles:@"Yes Let me In", nil];

[disclaimer show];

}

// Override point for customization after application launch.
return YES;
}

-(void) alertView:(UIAlertView *) alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
NSString *buttonString = {[alertView buttonTitleAtIndex:buttonIndex]};

if ([buttonString isEqualToString:@"Yes Let me In"]) {
    NSMutableDictionary* defaultValues = [NSMutableDictionary dictionary];

    [defaultValues setValue:@"accepted"forKey:@"keyDisclaimer"];

    [[NSUserDefaults standardUserDefaults] registerDefaults:defaultValues];

}
else if ([buttonString isEqualToString:@"No!"]) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorry!" message:@"You are not allowed to use this app due to the fact that you did not agree to the terms and Conditions. Please exit this app!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

 //  [[NSUserDefaults standardUserDefaults] setValue:@"notAccepted" forKey:@"keyDisclaimer"];
 }

   if ([buttonString isEqualToString:@"OK"]) {
       introViewController *intro = [[introViewController alloc] initWithNibName:@"introViewController" bundle:nil];

      _window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

       _window.rootViewController = intro;
       [_window makeKeyAndVisible];
   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:29:33.380

```
NSMutableDictionary* defaultValues = [NSMutableDictionary dictionary]; 
[defaultValues setValue:...forKey:...]
[[NSUserDefaults standardUserDefaults] registerDefaults:defaultValues]; 
```

如果未设置默认值（第一次），这将注册您的默认值

此外，似乎您`[defaults synchronize]`在设置值后忘记提交更改。如果是这样，您根本不需要该`registerDefaults`方法。

像这样：

```
if ([buttonString isEqualToString:@"Yes Let me In"]) {
    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
    [defaults setValue:@"accepted"forKey:@"keyDisclaimer"];
    [defaults synchronize];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:08:07.747

您想使用类似 stringForKey 或 objectForKey 的东西而不是 valueForKey。

```
if([[defaults stringForKey:@"keyDisclaimer"] isEqualToString:@"accepted"]) { 
```

过去我在 valueForKey 方面的经历很糟糕，并不总是按我想要的方式工作。这可能是导致您出现一些问题的原因。

# openstack - 为内部测试云配置 openstack

> ID：12743339
> 
> 赞同：0
> 
> 时间：2012-10-05T09:26:06.393
> 
> 标签：openstack

我们目前正在寻求将一个老旧且有缺陷的桉树云迁移到 openstack。我们有大约 15 台机器都在同一个办公室内部网络上。实例从外部（不是桉树）DHCP 服务器获取其网络配置。我们同时运行 linux 和 windows 映像。该云专门用于 Jenkins 的平台测试。

查看 openstack，似乎在三种支持的网络模式中，没有一个真正适合我们的环境。我们正在寻找类似于“非托管模式”的东西，其中 openstack 启动一个实例，该实例连接到实例计算节点上的 eth0 接口，并将在启动时从外部 DHCP 接收其网络配置。即虚拟机、来宾主机和客户端（詹金斯）都在同一个网络上，由外部 DHCP 服务器管理。

这样的场景可以在 OpenStack 中设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:00:12.920

它不常用，但最适合您需求的网络设置是 FlatNetworking（不是 FlatDHCPNetworking）。没有关于配置该设置以在您的环境中工作的出色文档，并且某些部分（如 nova-metadata 服务）可能有点难以管理，但应该可以让您运行 OpenStack 云外部 DHCP 提供程序。

前段时间我写了 wiki 页面[http://wiki.openstack.org/UnderstandingFlatNetworking来解释各种网络的设置以及它们如何在托管系统上的 NIC 方面进行操作。](http://wiki.openstack.org/UnderstandingFlatNetworking)FlatNetworking 实际上与 FlatDHCPNetworking 相同，只是 OpenStack 不会尝试为您运行 DHCP 服务。

请注意，在此模式下，所有 VM 实例都将与您的 OpenStack 基础架构位于同一网络上——根本没有网络分离。

# solr - solr 中的数据库故障转移场景

> ID：12743341
> 
> 赞同：1
> 
> 时间：2012-10-05T09:26:13.787
> 
> 标签：solr, dataimporthandler

考虑有两个 MySQL 数据库，如**DB1**和**DB2**，它们包含相同的数据集。在 solr 应用程序中，我们指向 DB1 来获取记录。如果 DB1 由于某种原因宕机，那么 Solr 需要从 DB2 中获取包含 DB1 镜像数据的记录。

有没有办法在**Solr中实现这种****数据库故障转移**场景？

# microdata - 如何使用微格式

> ID：12743351
> 
> 赞同：0
> 
> 时间：2012-10-05T09:27:11.947
> 
> 标签：microdata, microformats, rich-snippets

我正在尝试向我的网站添加一些微格式，并使用谷歌结构化数据测试工具进行测试给了我一个

> *警告：无法识别项目类型。*

什么是正确的语法来完成它？

```
<div class="vote-message" itemscope itemtype="http://data-vocabulary.org/Rating">
  <span itemprop="value">
    <span itemprop="bestRating">
      5.0/<strong>5</strong>
    </span>
    Bewertung (<span itemprop="ratingValue">3</span> Stimmen)
  </span>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T23:31:36.827

因为[http://data-vocabulary.org](http://data-vocabulary.org)已被关闭并替换为[http://schema.org/](http://schema.org/)；如果您将 itemtype 属性的值替换为`itemtype="http://schema.org/AggregateRating"`，警告就会消失，您可以在结构化数据工具中看到提取的结构化数据。

# c# - Windows 8 应用程序中的闪屏和扩展闪屏之间的屏幕闪烁

> ID：12743355
> 
> 赞同：1
> 
> 时间：2012-10-05T09:27:20.213
> 
> 标签：c#, xaml, windows-8, winrt-xaml

我正在编写 Windows 8 应用程序，它从互联网服务加载数据，所以我在加载过程中使用了扩展启动。当应用程序启动时，它会显示启动画面一秒钟，然后导航到 ExtendedSplash。在飞溅之间切换期间，您可以看到屏幕闪烁/闪烁几分之一秒。我可以以某种方式避免这种闪烁吗？

本质上，在 App.xaml.cs 中：

```
protected override async void OnLaunched(LaunchActivatedEventArgs args)
{
        if (_rootFrame == null)
        {
            _rootFrame = new Frame();
            SuspensionManager.RegisterFrame(_rootFrame, "appFrame");
        }

        // extended splash
        _rootFrame.Navigate(typeof (ExtendedSplash), args.SplashScreen);
        Window.Current.Content = _rootFrame;
        Window.Current.Activate();

        await PerformDataFetch(); // also navigate to main page after loading complete
} 
```

扩展飞溅与飞溅+加载环的布局相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:20:39.283

代替：

```
_rootFrame.Navigate(typeof (ExtendedSplash), args.SplashScreen); 
```

您可能想尝试：

```
//The key is not how you get the new splash screen
_rootFrame.Content = new ExtendedSplash(args.SplashScreen);

//but rather in how you GET TO the Splash Screen... 
// Navigation will trigger a complete refresh, reassigning a value should not. 
Window.Current.Content = _rootFrame; 
```

这样，您将避免触发刷新屏幕的导航事件。并且 Frame 的内容应该无缝更新。

# facebook - 如何在 window.fbAsyncInit 外调用 FB.api

> ID：12743356
> 
> 赞同：4
> 
> 时间：2012-10-05T09:27:23.880
> 
> 标签：facebook, facebook-javascript-sdk

所以我初始化了 fb api

```
window.fbAsyncInit = function() {
        FB.init({
          appId  : '351808841561163',
          status : true, // check login status
          cookie : true, // enable cookies to allow the server to access the session
          xfbml  : true,  // parse XFBML
          oauth: true
        }); 
```

我有一个单独的 js 文件，其中包含一个函数：

```
function example(){
  FB.api(
    '/me/[namespace]:visit',
    'post',
    { channel: link},
    function(response) {
       if (!response || response.error) {
          console.log(response.error);
       } else {
          console.log('Follow was success! Action ID: ' + response);
       }
    });
 } 
```

当我调用它时，我得到 FB 未定义。

当我把函数放在 window.fbAsyncInit 里面时它工作正常，但是我需要在 window.fbAsyncInit 外面调用 FB。

如果有任何可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T12:37:10.443

只需将您的函数排队，然后在 FB 初始化后立即调用它。以下代码保证您的函数将以正确的顺序调用，并且在 FB 完成初始化之后立即调用

您在示例之前和 FB 初始化脚本之前包含的帮助脚本：

```
var FB; // to avoid error "undeclared variable", until FB got initialized
var myQueue = new Array();
function queueAdd(f){
  if (FB == undefined)
    myQueue.push(f);
  else
    f();
}

function processQueue(){
  var f;
  while(f = myQueue.shift())
    f();
} 
```

您的功能示例：

```
function example(){
  FB.api(
    '/me/[namespace]:visit',
    'post',
    { channel: link},
    function(response) {
       if (!response || response.error) {
          console.log(response.error);
       } else {
          console.log('Follow was success! Action ID: ' + response);
       }
    });
 }

queueAdd(example); // will run immediately if FB initialized. Otherwise, wait for FB first 
```

和FB部分：

```
window.fbAsyncInit = function() {
  FB.init(blablabla);
  processQueue();
} 
```

# nunit - SpecFlow NUnit RequiresSTA 属性

> ID：12743363
> 
> 赞同：0
> 
> 时间：2012-10-05T09:27:47.037
> 
> 标签：nunit, specflow, apartment-state

我需要让 SpecFlow 生成具有 RequiresSTA 属性的 NUnit 测试。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:29:17.587

自动生成的 xxx.feature.cs 文件具有部分类定义。只需创建一个 xxxFeature.cs，其中包含另一个具有该属性的部分类。

# c++ - 在方法中注入额外的数据

> ID：12743366
> 
> 赞同：0
> 
> 时间：2012-10-05T09:27:57.370
> 
> 标签：c++, code-injection

我正在一些大型库中添加新模块。这里的所有方法都是静态实现的。让我简单描述一下简化模型：

```
typedef std::vector<double> TData;
double test ( const TData &arg ) { return arg ( 0 ) * sin ( arg ( 1 ) + ...;}
double ( * p_test ) ( const TData> &arg) = &test;

class A
{
    public:
      static T f1 (TData &input) {
         .... //some computations
         B::f2 (p_test);
      }
}; 
```

在内部`f1()`执行一些计算并`B::f2`调用静态方法。该`f2`方法由另一位作者实现，代表了一些模拟算法（这里的例子是简化的）。

```
class B
{
    public:
      static double f2 (double ( * p_test ) ( const TData  &arg ) )
      {
          //difficult algorithm working p_test many times
          double res = p_test(arg);
      }
}; 
```

该`f2`方法有一个指向某个权重函数的指针（这里`p_test`）。但在我的情况下，需要`f1`为`test()`方法计算的一些额外参数

```
 double test ( const TData &arg, const TData &arg2, char *arg3.... ) { } 
```

如何将这些参数注入`test()`（等等`f2`）以避免更改`f2`方法的源代码（这不是微不足道的），重新设计库并且没有肮脏的黑客:-)？

最简单的步骤是覆盖`f2`

```
static double f2 (double ( * p_test ) ( const TData  &arg ), const TData &arg2, char *arg3....  ) 
```

但是以后怎么办？考虑一下，方法是静态的，所以对象会有问题。

* * *

**更新的问题**

是否可以根据某些模板参数创建指向函数的指针或执行类似的操作

```
if (condition) res = p_test(arg);
else res = p_test2(arg, arg2, arg3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:36:28.417

“避免改变”，这有点困难。

但是，您可以使用静态变量在不传递参数的函数调用之间传递参数。

请记住，如果有多个线程使用这些函数，您需要使用线程本地存储（这是我推荐的）或者确保正确互斥以使用这些变量，如果是单个变量在所有线程之间共享意味着沿着调用链一路排除。但如果线程有问题，请使用线程本地存储。如果没有线程问题，那么，没问题！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:44:47.880

> 没有肮脏的黑客

不会发生。如果您无法修改采用函数指针的函数的源代码，则必须使用异常呕吐物来获得额外的参数。如果您有一个支持 的 C++11 编译器（尚不存在），`thread_local`理论上可以做得更好，或者您可以使用特定于操作系统的 TLS。但截至目前，唯一可移植的解决方案是异常呕吐物。

```
void f(void(*fp)()) { fp(); }
void mah_func() { 
    try { 
        throw; 
    } catch(my_class* m) {
        m->func();
    }
}
int main() {
    my_class m;
    try {
        throw &m;
    } catch(my_class* p) {
        f(mah_func);
    }
} 
```

或者，在您的场景中，修改`f2`似乎并非不可能，只是很困难。但是，将其更改为 a 的难度`std::function<double(const TData&)>`会非常低——您所要做的就是更改参数类型，这要归功于运算符重载。即使是复杂的函数，它也应该是一个非常简单的改变，因为你只是改变函数参数的类型，所有的调用站点仍然可以工作，等等。然后你可以传递一个适当的函数对象`bind`或一个 lambda 或某样的。

# c - 在 PIC32MX 上通过 IC2 写入 EEPROM 失败

> ID：12743370
> 
> 赞同：0
> 
> 时间：2012-10-05T09:28:05.397
> 
> 标签：c, pic, i2c, eeprom

图片：[PIC32MX564F128L](http://ww1.microchip.com/downloads/en/DeviceDoc/61116E.pdf)

EEPROM：[24AA16](http://ww1.microchip.com/downloads/en/devicedoc/21703d.pdf)

我已经用 C 语言为 PIC 编写了一些代码，以通过 I2C 读取和写入外部 EEPROM。当我使用这些方法写入单个字节，然后再次读取它以进行验证时，它可以工作。如果我更改写入位置，它会起作用，所以我认为寻址是有效的，并且我读回的字节与写入匹配，所以这似乎也有效。到目前为止一切都很好！

然后我将代码扩展为使用相同的例程 100 次，在相邻位置写入不同的字节。IE 在位置 x 到 x + 99 中写入值 0 到 99。然后我继续读回 100 个位置以验证写入，这就是出错的地方。

**从各种测试来看，write 方法在同一位置执行所有写入操作，因为 read 方法从第一个位置获取最后一个值 (99)，而从其他位置获取任何值 (0xFF)！**

示波器显示时钟良好，数据线切换，这是我预期的单次写入工作。

PIC 上的调试显示这些方法使用的地址是连续的，所以我有点困惑为什么所有的写入都在同一个位置执行！我可以更改此位置，但它始终只使用所有值的第一个字节。

有谁知道可能出了什么问题？

我的代码在这里，入口点是testEeprom()：

```
// ----------------------------------------------------------------------------
#include "eeprom.h"
//#define _PLIB_DISABLE_LEGACY
#include <plib.h>
//// ----------------------------------------------------------------------------
#define SYS_CLOCK                   (80000000L)
#define GetSystemClock()            (SYS_CLOCK)
#define GetPeripheralClock()        (SYS_CLOCK / 2)
#define GetInstructionClock()       (SYS_CLOCK)
#define I2C_CLOCK_FREQ              100000

#define EEPROM_I2C_BUS              I2C1
#define EEPROM_ADDRESS              0x50        // 0b1010000 Serial EEPROM address
#define EEPROM_STORAGE_LOCATION     0x0100
#define DATA_ARRAY_SIZE             100
// ----------------------------------------------------------------------------
UINT8               EEPROM_Data_Array[DATA_ARRAY_SIZE];
UINT8               EEPROM_Data_Array_RX[DATA_ARRAY_SIZE];
BOOL                EEPROM_Success;
I2C_7_BIT_ADDRESS   SlaveAddress;
// ----------------------------------------------------------------------------
void i2c_wait(unsigned int cnt)
{
    while (--cnt)
    {
        Nop();
        Nop();
    } // while
}
// ----------------------------------------------------------------------------
BOOL StartTransfer(BOOL restart)
{
    I2C_STATUS status;

    // Send the Start (or Restart) signal
    if (restart)
    {
        I2CRepeatStart(EEPROM_I2C_BUS);
    }
    else
    {
        // Wait for the bus to be idle, then start the transfer
        while (!I2CBusIsIdle(EEPROM_I2C_BUS));

        if (I2CStart(EEPROM_I2C_BUS) != I2C_SUCCESS)
        {
            debugTrace("I2C Error: Bus collision during transfer Start\r\n");
            return FALSE;
        }
    }

    // Wait for the signal to complete
    do
    {
        status = I2CGetStatus(EEPROM_I2C_BUS);
    }
    while (!(status & I2C_START));

    return TRUE;
}
// ----------------------------------------------------------------------------
BOOL TransmitOneByte(UINT8 data)
{
    // Wait for the transmitter to be ready
    while (!I2CTransmitterIsReady(EEPROM_I2C_BUS));

    // Transmit the byte
    if (I2CSendByte(EEPROM_I2C_BUS, data) == I2C_MASTER_BUS_COLLISION)
    {
        debugTrace("I2C Error: I2C Master Bus Collision\r\n");
        return FALSE;
    }

    // Wait for the transmission to finish
    while (!I2CTransmissionHasCompleted(EEPROM_I2C_BUS));

    return TRUE;
}
// ----------------------------------------------------------------------------
void StopTransfer(void)
{
    I2C_STATUS status;

    // Send the Stop signal
    I2CStop(EEPROM_I2C_BUS);

    // Wait for the signal to complete
    do
    {
        status = I2CGetStatus(EEPROM_I2C_BUS);
    }
    while (!(status & I2C_STOP));
}
// ----------------------------------------------------------------------------
void initIcd()
{
    UINT32 actualClock;

    EEPROM_Success = TRUE;
    // Set the I2C baudrate
    actualClock = I2CSetFrequency(EEPROM_I2C_BUS, GetPeripheralClock(), I2C_CLOCK_FREQ);
    if (abs(actualClock - I2C_CLOCK_FREQ) > I2C_CLOCK_FREQ / 10)
    {
        debugTrace("Error: I2C1 clock frequency (%u) error exceeds 10%%.\r\n", (unsigned) actualClock);
    }

    // Enable the I2C bus
    I2CEnable(EEPROM_I2C_BUS, TRUE);
}
// ----------------------------------------------------------------------------
// Send the data to EEPROM to program one location
// ----------------------------------------------------------------------------
void txIcd(unsigned int address, unsigned char value)
{
    BOOL Acknowledged;
    int Index;
    UINT8 i2cData[4];
    int DataSz;

    EEPROM_Success = TRUE;

    // Initialize the data buffer
    I2C_FORMAT_7_BIT_ADDRESS(SlaveAddress, EEPROM_ADDRESS, I2C_WRITE);
    i2cData[0] = SlaveAddress.byte;
    i2cData[1] = address >> 8; // EEPROM location to program (high address byte)
    i2cData[2] = address & 0xFF; // EEPROM location to program (low address byte)
    i2cData[3] = value; // EEPROM location to program (low address byte)
    DataSz = 4;

    // Start the transfer to write data to the EEPROM
    if (!StartTransfer(FALSE))
    {
        debugTrace("I2C Error: Can't Start Transfer TX (1)\r\n");
        return;
    }

    // Transmit all header
    Index = 0;
    while (EEPROM_Success && (Index < DataSz))
    {
        // Transmit a byte
        if (TransmitOneByte(i2cData[Index]))
        {
            // Advance to the next byte
            Index++;

            // Verify that the byte was acknowledged
            if (!I2CByteWasAcknowledged(EEPROM_I2C_BUS))
            {
                debugTrace("I2C Error: Sent byte was not acknowledged (1)\r\n");
                EEPROM_Success = FALSE;
            }
        }
        else
        {
            EEPROM_Success = FALSE;
        }
    }

    // End the transfer (hang here if an error occured)
    StopTransfer();
    if (!EEPROM_Success)
    {
        debugTrace("I2C Error: No Success on TX (1)\r\n");
        return;
    }

    // Wait for EEPROM to complete write process, by polling the ack status.
    Acknowledged = FALSE;
    do
    {
        // Start the transfer to address the EEPROM
        if (!StartTransfer(FALSE))
        {
            debugTrace("I2C Error: Can't Start Transfer TX (2)\r\n");
            return;
        }

        // Transmit just the EEPROM's address
        if (TransmitOneByte(SlaveAddress.byte))
        {
            // Check to see if the byte was acknowledged
            Acknowledged = I2CByteWasAcknowledged(EEPROM_I2C_BUS);
        }
        else
        {
            EEPROM_Success = FALSE;
        }

        // End the transfer (stop here if an error occured)
        StopTransfer();
        if (!EEPROM_Success)
        {
            debugTrace("I2C Error: No Success on TX (2)\r\n");
            return;
        }
    }
    while (Acknowledged != TRUE);
}
// ----------------------------------------------------------------------------
// Read the data back from the EEPROM.
// ----------------------------------------------------------------------------
unsigned char rxIcd(unsigned int address)
{
    UINT8 i2cbyte;
    UINT8 i2cData[3];
    int DataSz;
    int Index;

    EEPROM_Success = TRUE;

    // Initialize the data buffer
    I2C_FORMAT_7_BIT_ADDRESS(SlaveAddress, EEPROM_ADDRESS, I2C_WRITE);
    i2cData[0] = SlaveAddress.byte;
    i2cData[1] = address >> 8; // EEPROM location to program (high address byte)
    i2cData[2] = address & 0xFF; // EEPROM location to program (low address byte)
    DataSz = 3;

    // Start the transfer to write data to the EEPROM
    if (!StartTransfer(FALSE))
    {
        debugTrace("I2C Error: Can't Start Transfer TX (1)\r\n");
        return;
    }

    // Transmit all header
    Index = 0;
    while (EEPROM_Success && (Index < DataSz))
    {
        // Transmit a byte
        if (TransmitOneByte(i2cData[Index]))
        {
            // Advance to the next byte
            Index++;
        }
        else
        {
            EEPROM_Success = FALSE;
        }

        // Verify that the byte was acknowledged
        if (!I2CByteWasAcknowledged(EEPROM_I2C_BUS))
        {
            debugTrace("I2C Error: Sent byte was not acknowledged (1)\r\n");
            EEPROM_Success = FALSE;
        }
    }

    // Restart and send the EEPROM's internal address to switch to a read transfer
    if (EEPROM_Success)
    {
        // Send a Repeated Started condition
        if (!StartTransfer(TRUE))
        {
            debugTrace("I2C Error: Can't Start Transfer TX (4)\r\n");
            return;
        }

        // Transmit the address with the READ bit set
        I2C_FORMAT_7_BIT_ADDRESS(SlaveAddress, EEPROM_ADDRESS, I2C_READ);

        if (TransmitOneByte(SlaveAddress.byte))
        {
            // Verify that the byte was acknowledged
            if (!I2CByteWasAcknowledged(EEPROM_I2C_BUS))
            {
                debugTrace("I2C Error: Sent byte was not acknowledged (3)\r\n");
                EEPROM_Success = FALSE;
            }
        }
        else
        {
            EEPROM_Success = FALSE;
        }
    }

    // Read the data from the desired address
    if (EEPROM_Success)
    {
        if (I2CReceiverEnable(EEPROM_I2C_BUS, TRUE) == I2C_RECEIVE_OVERFLOW)
        {
            debugTrace("I2C Error: I2C Receive Overflow\r\n");
            EEPROM_Success = FALSE;
        }
        else
        {
            while (!I2CReceivedDataIsAvailable(EEPROM_I2C_BUS));

            i2cbyte = I2CGetByte(EEPROM_I2C_BUS);
        }
    }

    // End the transfer (stop here if an error occured)
    StopTransfer();
    if (!EEPROM_Success)
    {
        debugTrace("I2C Error: No Success on TX (3)\r\n");
        return;
    }

    return i2cbyte;
}
// ----------------------------------------------------------------------------
void testEeprom(void)
{
    unsigned int i;
    BOOL failed = FALSE;
    unsigned char value;

    // Create & Write 100 byte array
    for (i = 0; i < DATA_ARRAY_SIZE; i++)
    {
        EEPROM_Data_Array[i] = i;

        initIcd();
        txIcd(EEPROM_STORAGE_LOCATION + i, EEPROM_Data_Array[i]);
        StopTransfer();
        I2CEnable(EEPROM_I2C_BUS, FALSE);
    } // for i

    // Read back & varify data against array
    for (i = 0; i < DATA_ARRAY_SIZE; i++)
    {
        initIcd();
        value = rxIcd(EEPROM_STORAGE_LOCATION + i);
        if (EEPROM_Data_Array[i] != value)
        {
            failed = TRUE;
            break;
        }
        StopTransfer();
        I2CEnable(EEPROM_I2C_BUS, FALSE);
    } // for i

    if (failed == FALSE)
    {
        debugTrace("I2C SUCCESS\r\n");
    }
    else
    {
        debugTrace("I2C FAILED %d: %d != %d\r\n", i, value, EEPROM_Data_Array[i]);
    }

    while(1);
}
// ---------------------------------------------------------------------------- 
```

# plugins - Extjs4 如何禁用网格中的行编辑插件？

> ID：12743371
> 
> 赞同：2
> 
> 时间：2012-10-05T09:28:04.823
> 
> 标签：plugins, grid, extjs4, editing

我想禁用行编辑插件取决于组合选择，我有网格参考。我怎样才能禁用它？（我试图破坏它，但是当我关闭窗口时，我得到一个“未捕获的类型错误：无法调用未定义的方法'getView'”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:41:13.173

`false`从 RowEditing`beforeedit`事件返回。

```
listeners: {
    beforeedit: function(editor, context){
        if(comboBox.getValue() === /* whatever conditions you have */){
            return false;
        }
    }
} 
```

您也可以设置`context.cancel = true`来实现相同的效果，但我真的看不出它的意义，因为`false`从`beforexyz`事件返回是 Ext JS 4 库中的标准习惯用法。

# javascript - 获取所有选定项的值

> ID：12743373
> 
> 赞同：1
> 
> 时间：2012-10-05T09:28:16.540
> 
> 标签：javascript, jquery

我需要从页面中的一组输入文本中获取所有值，并且我需要知道这些输入中的某个人是否具有*“某些值”的值*

我正在使用 JQuery，所以我正在做类似的事情：

```
$('input.partValue').each(function(){
    int count = 0;
    if($(this).val() == 'some value'){
        count++;
    }
});
if(count > 0){
    // do something
} 
```

但有类似的东西可能很有用：

```
if($("input.partValue[value='some value']").length > 0){
    // do something
} 
```

有类似的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:29:50.293

您可以使用[`filter()`](http://api.jquery.com/filter/)：

```
var elems = $("input.partValue").filter(function() {
    return this.value == "some value";
});

if (elems.length > 0) { ... } 
```

# eclipse - 如何导出 Subclipse SVN 存储库 - Eclipse Juno，Subclipse 1.8.16

> ID：12743375
> 
> 赞同：5
> 
> 时间：2012-10-05T09:28:28.873
> 
> 标签：eclipse, svn, import, export, subclipse

我想从 Eclipse Juno 下的 Subclipse 1.8.16 导入/导出我的 SVN 存储库位置。那可能吗？

我看到如果您使用 Eclipse 的 Subversive SVN 插件，您可以执行以下操作：http: [//www.eclipse.org/subversive/documentation/teamSupport/SVNaction/location_ie.php](http://www.eclipse.org/subversive/documentation/teamSupport/SVNaction/location_ie.php)

Subclipse 有什么等价物吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:16:49.700

您可以从 Eclipse 中导出您的首选项并将它们导入到更新的版本，包括您的 svn 位置。这只需转到**File -> Export -> Select from General -> Preferences**即可完成。然后在下一步中，您可以从列表中勾选要导出的首选项。在此列表中，应包括 SVN 首选项和 SVN 存储库。

然后，您可以通过 File -> Import.. 这次将这些首选项导入新的 eclipse 环境。

为了让您更顺利地过渡到新的 eclipse 环境，您还可以导出用于下载插件的站点列表（如 Subclipse 等）。这是通过转到 Eclipse -> 首选项 -> 安装/更新 -> 可用软件站点来完成的。您选择要导出的那些，然后按 Export.. 按钮。然后你可以通过在同一个视图中按下导入按钮将它们导入到你的新 Eclipse 中。然后，如果您想在新的 Eclipse 中安装例如 Subclipse，您可以通过转到 Help -> Install new software... 然后在可用的软件视图中有一个下拉菜单，您可以从中选择相应的软件站点。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T15:38:54.247

一天有点晚了，但就到这里。

导航到目录 WORKSPACE/.metadata/.plugins/org.tigris.subversion.subclipse.core

那里有一个文件'.svnProviderState'

这是一个二进制文件，但只需将其复制到新位置即可，Bob 是你父亲的兄弟。

# c - C中的字符串操作

> ID：12743376
> 
> 赞同：1
> 
> 时间：2012-10-05T09:28:31.433
> 
> 标签：c, string, malloc, literals

以下是我对 C 中的字符串的一些基本问题。

*   如果字符串文字存储在只读数据段中并且在初始化后无法更改，那么**以下两个初始化之间有什么区别**。

> > char *string = "你好世界";
> > 
> > const char *string = "你好世界";

*   当我们为字符串动态分配内存时，我看到以下分配足以容纳任意长度的字符串。尽管这种分配有效，但我理解/相信分配实际字符串的实际大小而不是数据类型的大小。**请指导正确使用字符串的动态分配**。

> > char *str = (char *)malloc(sizeof(char));
> > 
> > scanf("%s",str);
> > 
> > printf("%s\n",str);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:43:13.220

1.**以下两个初始化有什么区别。** 正如其他人已经告诉过的那样，不同之处在于错误的编译和运行时检查。

> **char *string = "你好世界";** --->存储在只读数据段中并且不能更改，但是如果您更改值，那么编译器不会给出任何错误，它只会在运行时出现。
> 
> **const char *string = "你好世界";** --->这也存储在带有编译时检查的只读数据段中，因为它被声明为 const 所以如果您更改字符串的值，那么您将在编译时得到一个错误，这比运行时失败。

2.**请指导正确使用字符串动态分配。**

```
 char *str = (char *)malloc(sizeof(char));
 scanf("%s",str);
 printf("%s\n",str); 
```

此代码可能会工作一段时间，但并非总是如此。问题出现在`run-time`您何时会得到一个`segmentation fault`，因为您正在访问`area of memory`不属于您的程序的内容。您应该始终非常小心，`dynamic memory allocation`因为它会导致非常危险`error at run time`。

你应该永远`allocate the amount of memory you need correctly`。最多的错误出现在`use of string`.You 应该始终记住，`is a '\0' character present at last of the string`在分配期间`your responsibility to allocate memory for this.`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:34:08.173

> 以下两个初始化有什么区别。

`char*`由于遗留原因，字符串文字具有类型。最好只通过 指向它们`const char*`，因为不允许修改它们。

> 我看到以下分配足以容纳任意长度的字符串。

错误的。此分配只为一个字符分配内存。如果您尝试向 中写入多个字节`string`，则会出现缓冲区溢出。

动态分配内存的正确方法很简单：

```
char *string = malloc(your_desired_max_length); 
```

显式转换在这里是多余的，`sizeof(char)`根据定义为 1。

*另外：请记住，字符串终止符 (0) 也必须适合字符串。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:36:16.847

`const char*`这两个声明之间的区别在于，如果通过声明的指针尝试修改字符串文字，编译器将产生错误（这比运行时失败要好得多） 。以下代码：

```
const char* s = "hello"; /* 's' is a pointer to 'const char'. */
*s = 'a'; 
```

导致VC2010发出以下错误：

> 错误 C2166：左值指定 const 对象

`char*`直到运行时才会检测到通过声明的指针修改字符串文字的尝试（VC2010 不会发出错误），其行为未定义。

在存储字符串时，您*必须*记住分配一个额外的`malloc()`内存来存储空终止符，因为所有（或几乎所有）C 字符串处理函数都需要空终止符。例如，分配一个用于存储的缓冲区：*`char``"hello"`*

 *```
char* p = malloc(6); /* 5 for "hello" and 1 for null terminator. */ 
```

`sizeof(char)`保证为 1，因此不需要，也没有必要强制转换 的返回值`malloc()`。何时`p`不再需要记住`free()`分配的内存：

```
free(p); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T09:37:12.773

在第一种情况下，您明确地将 转换`char*`为`const`一个，这意味着您不允许在编译器级别对其后面的字符进行更改。在 C 中，尝试修改这些字符实际上是未定义的行为（在运行时），而不管它们的 const 性如何，但字符串文字*是*a `char *`，而不是 a `const char *`。

在第二种情况下，我看到了两个问题。

首先是你永远不应该转换返回值，`malloc`因为它可以掩盖某些错误（特别是在指针和整数大小不同的系统上）。具体来说，除非有一个活动`malloc`原型，否则编译器可能会假定它返回一个`int`而不是正确的`void *`.

因此，如果您忘记包含`stdlib.h`，您可能会遇到一些编译器无法警告您的有趣行为，因为您通过显式强制转换告诉它您*知道*自己在做什么。

C 完全能够在`void *`返回的 from`malloc`和任何其他指针类型之间进行隐式转换。

第二个问题是它只为一个字符分配空间，这将是一个字符串的终止空值。

最好写成：

```
char *string = malloc (max_str_size + 1); 
```

（永远不要乘以`sizeof(char)`，那是浪费时间 - 它*总是*1）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T09:41:50.553

**以下两个初始化之间的区别。**

> > 首先，**char *string = "Hello world";**
> > - “Hello world”作为常量字符串存储在堆栈段中，其地址分配给指针'string'变量。
> > “你好世界”是不变的。而且你不能做string[5]='g'，这样做会导致分段错误。
> > 其中“字符串”变量本身不是恒定的。你可以改变它的绑定：
> > string= "Some other string"; //这是正确的，没有分段错误
> > 
> > const char *string = "你好世界";
> > 再次将“Hello world”作为常量字符串存储在堆栈段中，并将其地址分配给“字符串”变量。和 string[5]='g'，这会导致分段错误。
> > 这里没有使用 const 关键字！

现在，
char *string = (char *)malloc(sizeof(char));

> > 上面的声明与第一个相同，但这次你的赋值是来自堆段的动态（不是来自堆栈）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T09:33:32.190

编码：

```
char *string = (char *)malloc(sizeof(char)); 
```

不会保存任意长度的字符串。它将分配一个字符并返回一个指向 char 字符的指针。请注意，指向字符的指针和指向所谓的字符串的指针是一回事。

要为字符串分配空间，您必须执行以下操作：

```
char *data="Hello, world";
char *copy=(char*)malloc(strlen(data)+1);
strcpy(copy,data); 
```

您需要`malloc`准确说明要分配多少字节。用于需要结束的`+1`空终止符。

至于将文字字符串存储在只读段中，这是一个实现问题，尽管几乎总是如此。大多数 C 编译器对 const 访问这些字符串非常放松，但尝试修改它们是自找麻烦，因此您应该始终声明它们`const char *`以避免任何问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T09:35:03.443

由于程序堆中可能有足够的空间，因此该特定分配似乎有效，但事实并非如此。您可以通过使用建议的方法分配两个“任意”字符串和 memcpy: 将一些足够长的字符串分配给相应的地址来验证它。在最好的情况下，您会看到垃圾，在最坏的情况下，您将遇到分段错误或来自 malloc 或 free 的断言。*

# php - 如果第一个数组 = x，PHP 作用于子数组

> ID：12743378
> 
> 赞同：0
> 
> 时间：2012-10-05T09:28:34.510
> 
> 标签：php, arrays

我有一个看起来类似于的数组（在 PHP 中）：

```
$array_name [0] [0] ['value0']
                [1] ['value1']
                [2] ['value2']
            [1] [0] ['value0']
                [1] ['value1']
                [2] ['value2'] 
```

（这基本上与 $array_name['group']['subGroup']['value']

我需要的是一种表达方式：

> 如果 $array_name[0] (group 1) 然后做点什么，
> 
> if $array_name[1] (group 2) 做其他事情

但我不知道我会怎么做（我确定答案就在我的眼皮底下）。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:32:09.363

尝试这个

```
foreach ( $array_name as $group_key => $group) {
  switch ($group_key) {
    case 0:
      // do something for group0
    break;
    case 1:
      // do something for group1
    break;
  }
} 
```

# ruby - 为什么我需要 @ 来设置变量值

> ID：12743381
> 
> 赞同：0
> 
> 时间：2012-10-05T09:28:45.403
> 
> 标签：ruby

我对变量的范围有点困惑，在 ruby​​ 中我写了一个测试程序：

```
class Test 
        attr_reader :tester 
        def initialize(data) 
                @tester = data 
        end 

        def getData 
                 tester 
        end
end 

puts Test.new(11).getData 
```

现在这工作正常，attr_reader，但我的困惑是，既然我已经定义了 attr_reader :tester 那么为什么我不能去 tester = data 而不是 @tester = data，因为在 getData 中检索数据时我只需要写测试员而不是@tester

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:34:32.197

使用`attr_reader`相当于

```
class Test
  def initialize(data) 
    @tester = data 
  end 

  # attr_reader defines this method for you
  def tester
    @tester
  end

  def getData 
    tester 
  end
end 
```

在您的`getData`方法中 using`tester`相当于`self.tester`. 如果你使用`@tester`你直接访问变量。使用时，`tester`您可以通过 getter 方法访问变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:03:31.680

`some_name =`没有显式接收器的语法被解释为局部变量赋值。为了对实例变量进行赋值，您必须显式设置接收器，即使它是`self`. 在这种情况下，`self.tester =`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:36:16.940

attr_reader 表示应该读为：“将为您创建相应的实例变量 getter 和 setter 方法。” 因此，首先我们获取数据，然后设置该数据。

# asp.net - 在系列的回发中传递除 #VALX 和 #VALY 以外的其他值以获取图表点击事件的值

> ID：12743390
> 
> 赞同：0
> 
> 时间：2012-10-05T09:29:25.350
> 
> 标签：asp.net, parameters, click, asp.net-charts

我正在使用 asp.net 图表控件，我想使用图表单击事件来获取`deptId`条形图中条形单击的值。

```
 <Series>                       
                        <asp:Series Name="Tour" ChartType="Column" ChartArea="MainChartArea"  PostBackValue="#VALX">
                        </asp:Series>
                        <asp:Series Name="Inspection" ChartType="Column" ChartArea="MainChartArea" PostBackValue="#VALX">
                        </asp:Series>
                        <asp:Series Name="NightHalt" ChartType="Column" ChartArea="MainChartArea" PostBackValue="#VALX">
                        </asp:Series>
                    </Series> 
```

我正在使用部门名称在 X 轴上显示，但我想捕获`deptid`图表点击事件。在上面的标记中，我 `#VALX` 在系列`postback`事件中使用，但它在点击事件中给了我部门名称

```
 protected void AllDepartmentComparisonBarChart_Click(object sender, ImageMapEventArgs e)
        {
            e.PostBackValue;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:11:10.457

也许您可以尝试删除您的系列级别的 PostBackValue 并尝试遍历您的系列的数据点，为每个单独的数据点设置正确的 deptId 作为 PostBackValue。

[http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.datapointcustomproperties.postbackvalue.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.datavisualization.charting.datapointcustomproperties.postbackvalue.aspx)

# jquery - 导轨 | 在 Datatables Rails 上添加操作按钮（删除、编辑等）

> ID：12743393
> 
> 赞同：1
> 
> 时间：2012-10-05T09:29:33.590
> 
> 标签：jquery, ruby-on-rails, datatable

如何使用 json/ajax 方法添加删除和编辑按钮列？

```
<%= link_to image_tag('icons/edit.png'), editcontent_path(page), :title => "edit" %>
<%= link_to image_tag('icons/delete.png'), page, method: :delete, data: { confirm: 'Are you sure?' }, :title => "delete"  %> 
```

我想在 datatables/page_datatables.rb 上输入

```
class PagesDatatable
  delegate :params, :truncate, :html_safe, :link_to, to: :@view

  .....

  def data
    pages.map do |page|
      [
          page.name
          page.permalink,
          truncate(page.content, :length => 160).html_safe
          #####  I want to input here ####

      ]
    end
  end

  ......
  ......

end 
```

请帮忙 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:52:45.240

这对我有用，

```
class PagesDatatable
delegate :params, :truncate, :html_safe, :link_to, :edit_page_path, :page, to: :@view

    .....

    .....

    def data
        pages.map do |page|
          [
              page.name,
              page.permalink,
              truncate(page.content, :length => 160).html_safe,
              link_to("edit", edit_page_path(page)),
              link_to("delete", page, method: :delete, data: { confirm: 'Are you sure?' }) 

          ]
        end
      end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:33:33.643

需要查看您的路线。但是，您可能会从以下示例中获得灯光：

```
<%= link_to image_tag('icons/edit.png'), [:edit, page], :title => "edit" %>
<%= link_to image_tag('icons/delete.png'), page, :method => :delete, :confirm => 'Are you sure?', :title => "delete"  %> 
```

# git - Git日志的一些技巧

> ID：12743397
> 
> 赞同：2
> 
> 时间：2012-10-05T09:29:55.907
> 
> 标签：git, git-log

我必须分析一个 git 存储库。因此，我想问一下 git 中是否有任何命令可以执行以下操作：

1.  计算特定目录中每个作者/提交者的提交次数
2.  从过去到现在，开发人员在特定目录中的平均文件数和文件类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:11:51.970

1.  `git shortlog -sn -- FolderName`
2.  不确定您在这里的意思 - “平均文件数”？在每次提交的基础上 -`git log --stat`可以显示文件在每次提交中都被触及。也许你的意思是这个的一些解析版本。如果您在检查用户的代码流失之后，这是要走的路。例如，以下将创建一个文件，每次提交都有一行，其中包含执行者以及更改了多少行和文件。然后，您可以对其进行处理以生成图表。

* * *

```
#!/bin/bash
for id in $(git rev-list HEAD)
do
    git log -n 1 --shortstat --format='%h %at %ae' $id | paste - - - -
done 
```

# java - 用于多个客户端的 PHP Socket 服务器

> ID：12743398
> 
> 赞同：1
> 
> 时间：2012-10-05T09:29:56.140
> 
> 标签：java, php, sockets, socketserver

> **可能重复：**
> [带有 Flash 客户端的 PHP 套接字服务器](https://stackoverflow.com/questions/2122792/a-php-socket-server-with-flash-clients)

我在 Flash 开发人员的帮助下在我的服务器中构建了一个应用程序，他要求我构建一个套接字服务器来与数据库通信。他向我推荐了 JAVA，但我不太擅长 JAVA，我想知道是否可以用 PHP 构建 Socket Server。

我应该允许连接到多个 TCP 客户端连接。我知道在 JAVA 中这是完成思想线程，但我不确定这是否也可以用 PHP 来实现。

有人可以向我展示具有这些特征的 PHP 套接字服务器的基本框架吗？

从连接开始到应用程序结束，连接必须是 TCp（持久）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:37:19.217

您必须从命令行将套接字服务器作为服务运行。这是我以前使用过的一部分。它在读取后关闭套接字，但可以轻松修改以保持连接数组。

*   您必须建立某种看门狗来查看连接是否仍然存在。
*   您需要一种识别机制来识别不同的连接。

编码：

```
set_time_limit( 0 );
// Set the ip and port we will listen on
$address = '127.0.0.1';
$port = 6789;

// Create a TCP Stream socket
$sock = socket_create( AF_INET, SOCK_STREAM, 0 ); // 0 for  SQL_TCP
// Bind the socket to an address/port
socket_bind( $sock, 0, $port ) or die( 'Could not bind to address' );  //0 for localhost
// Start listening for connections
socket_listen( $sock );

//loop and listen
while (true) {
  /* Accept incoming  requests and handle them as child processes */
  $client = socket_accept( $sock );
  // Read the input  from the client – 1024000 bytes
  $input = socket_read( $client, 1024000 );

  // from here you need to do your database stuff
  // and handle the response 

   // Display output  back to client
  socket_write( $client, $response );
  socket_close( $client );
}
// Close the master sockets
socket_close( $sock ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:36:49.653

在 Google 代码中有一个[用于 PHP 的 WebSocket 服务器和客户端库。](http://code.google.com/p/phpws/)它支持闪存客户端。不确定它是否能解决您的问题。

如果您想要一个基本教程，这里是学习链接

[如何在 php 中创建套接字服务器](http://www.endyourif.com/how-to-create-a-socket-server-in-php/)

编辑：-查看您的评论后（作为服务连续运行套接字服务器）

这是描述创建套接字服务器并作为进程运行的方式的链接

[在 php 中创建一个套接字服务器并作为服务运行](http://www.funphp.com/?p=33)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:47:02.437

与其构建“套接字服务器”，不如真正构建一组 Web API（SOAP、REST/JSON 等），以提供对数据库的有限且明确定义的访问。然后让 Flash 应用程序使用它。

您的 Flash 应用程序通过 RESTful 接口或 SOAP/XML 请求发送 JSON。服务器接收它们，与数据库进行适当的交互，并以 XML 或 JSON 的形式再次返回任何所需的结果。

# ios - 活动指示器未显示

> ID：12743400
> 
> 赞同：1
> 
> 时间：2012-10-05T09:30:03.607
> 
> 标签：ios, objective-c, ios4

在我的应用程序中，数据来自网络服务，并且我已经实现了代码来显示活动指示器。我在 viewWillAppear() 中从 Web 服务获取数据。

问题是，当第一次调用 viewWillAppear() 时，指示器只显示一次，之后每当调用 viewWillAppear() 方法时，指示器就不会显示。

我的代码如下： -

```
-(void)viewDidAppear:(BOOL)animated
{
    //Initializaing  views for Acticity Indicators
   loadingview = [[LoadingView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];    
    Tickview=    [[tickview alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];   
}

-(void)viewWillAppear:(BOOL)animated
{
        Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
        NetworkStatus internetStatus = [r currentReachabilityStatus];
        if ((internetStatus == ReachableViaWiFi) || (internetStatus == ReachableViaWWAN))
        {                 
           [NSThread detachNewThreadSelector:@selector(startTheBackgroundJob) toTarget:self withObject:nil];

        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Check Your Internet Connection. Internet   Connection is not active" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }       
}

- (void)startTheBackgroundJob
{
    [self performSelectorOnMainThread:@selector(loading) withObject:nil waitUntilDone:YES];

}

-(void)loading
{
     //
     //some database operations here..
     //

    //after that showing the activity indicator
    [NSThread detachNewThreadSelector:@selector(threadAnimates:) toTarget:self withObject:nil];

    //retriving data from web service..   
    [self retrieveData];

    //than removing loadingview
     [loadingview removeFromSuperview];
     [loadingview setHidden:YES];

    [NSThread detachNewThreadSelector:@selector(tickshow:) toTarget:self withObject:nil];
    [self performSelector:@selector(tickhide:) withObject:nil afterDelay:2]; 

}

 - (void) threadAnimates:(id)data
{
[self.view addSubview:self.loadingview];

[loadingview setHidden:NO];

}

-(void)tickshow:(id)sender
{
    [self.view addSubview:Tickview];
    [loadingview setHidden:NO];
}

-(void)tickhide:(id)sender
{
    [Tickview removeFromSuperview];
    [Tickview setHidden:YES];
} 
```

当我设置断点进行复制时，指示器再次显示，但是当删除断点时，指示器不显示。

我已经在 .h 文件和项目中分别导入了用于加载视图和 tickview 的文件。

我已经尝试了很多，但无法得到解决方案。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:00:57.393

试试这个代码

```
-(void)viewDidAppear:(BOOL)animated
{
    //Initializaing  views for Acticity Indicators
   loadingview = [[LoadingView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];    
    Tickview=    [[tickview alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];   
    [loadingview startAnimating];
   [self.view addSubview:loadingview];

   [self.view bringSubviewToFront: loadingview];
} 
```

**编辑：**

也可以尝试下面的代码，只在视图中添加活动指示器

```
 UIActivityIndicatorView *spinningWheel = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(10.0, 11.0, 25.0, 25.0)];
        [spinningWheel startAnimating];
        spinningWheel.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhite;
        [self.view addSubview:spinningWheel];
        [spinningWheel release]; 
```

我希望这对你有帮助..

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:37:45.300

在方法中只写`[self.ActiveIndicatorName startAnimating];`语句。`ViewWillAppear`

```
-(void)viewWillAppear:(BOOL)animated
{
      [self.ActiveIndicatorName startAnimating];

        Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
        NetworkStatus internetStatus = [r currentReachabilityStatus];
        if ((internetStatus == ReachableViaWiFi) || (internetStatus == ReachableViaWWAN))
        {                 
           [NSThread detachNewThreadSelector:@selector(startTheBackgroundJob) toTarget:self withObject:nil];

        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Check Your Internet Connection. Internet   Connection is not active" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:41:43.190

像这样修改`ViewWillAppear`方法....

```
-(void)viewWillAppear:(BOOL)animated
{
//Initializaing  views for Acticity Indicators
loadingview = [[LoadingView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];    
Tickview=    [[tickview alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];  
[Tickview startAnimating];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:48:54.350

加载请求后，您应该开始加载指标 [myActivityIndi​​cator startAnimating]; 并使用委托停止它。如果活动指示器是在 nib 文件中创建的，不要忘记在停止时将其设置为隐藏（停止时隐藏）。希望这会有所帮助。

# java - 如何将表单字段绑定到 Play 2 Framework 中的对象

> ID：12743404
> 
> 赞同：1
> 
> 时间：2012-10-05T09:30:19.993
> 
> 标签：java, playframework-2.0

我一直无法让我的表单绑定正常工作（基本上是试错）。在 Play 2.0.3 (Java) 中，将表单绑定到由其他对象组成的模型的正确方法是什么？

我制作了这个小例子来尝试更好地理解它。但即使是这个基本的例子似乎也有问题。

我试图将表单绑定到的 Simple 类有 3 个字段，一个普通的字符串字段、一个字符串列表和一个自定义字段，它只是一个字符串的包装器。在提交表单时，所有字段都被填充，除了保持为空的自定义字段。

*这是实际的代码*

**控制器**

```
static Form<Simple> simpleform=form(Simple.class);
public static Result simpleForm(){
Form<Simple> filledForm=simpleform.bindFromRequest();
        System.out.println(filledForm);
    return ok(views.html.simpleForm.render(filledForm.get().toString()));
} 
```

**模型**

```
public class Simple {
    public String text;
    public List<String> stringList;
    public SimpleWrapper wrappedText;
    @Override
    public String toString(){
        return text +"-"+simpleWrapper+"-"+stringList;
}

public  class SimpleWrapper{
        String otherText;
        public SimpleWrapper(){}
        public SimpleWrapper(String otherText){
            this.otherText=otherText;
        }
        @Override
        public String toString(){
            return otherText;
        }
    } 
```

**看法**

```
@(text:String)
@import helper._
@form(routes.Management.simpleForm()){
  <input type="hidden" value="string" name="stringList[0]">
  <input type="hidden" value="stringAgain" name="stringList[1]">
  <input type="hidden" value="wrapped" name="wrappedText.otherText">
  <input type="text" id="text" name="text">
  <input type="submit" value="submit">
}
This was passed @text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:15:20.177

为了允许自动绑定对象，您必须为您的类提供一个 setter 方法。在我的实验中，SimpleWrapper 类缺少该类应该具有的 setter 方法

```
public  class SimpleWrapper{
    String otherText;
    public SimpleWrapper(){}

    public setOtherText(String otherText){
     this.otherText=otherText;
    }

    @Override
    public String toString(){
        return otherText;
    }
} 
```

似乎连构造函数都无关紧要。

这是一个关于基础 Spring 数据绑定器链接的[链接](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)，可能会有所帮助。我从 play google group 得到的

# c++ - 序列容器不是通用容器的子集吗？

> ID：12743408
> 
> 赞同：4
> 
> 时间：2012-10-05T09:30:28.133
> 
> 标签：c++, stl

`stack`没有`iterator`-member-type，因此不满足一般容器要求：`[container.requirements.general]`.

但在`[container.adaptors.general]`

> 标头`<queue>`并`<stack>`定义容器适配器`queue`、`priority_queue`和`stack`。这些容器适配器满足序列容器的要求。

序列容器不是通用容器的子集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:56:53.620

序列容器是通用容器的子集。

但是，序列适配器不满足特定于序列容器的要求（没有`insert`成员函数），并且正如您所注意到的，它也不满足一般容器要求。我认为不`[container.adaptors.general]`应该说他们这样做，但它确实在我拥有的 C++11 草案中说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:53:01.750

这确实是一个缺陷（[http://cplusplus.github.com/LWG/lwg-active.html#2194](http://cplusplus.github.com/LWG/lwg-active.html#2194)）：

> 由于序列容器是通用容器的子集，这对不满足的容器适配器提出了要求。[...] 正如 NB 评论所指出的，适配器真的不是序列也不是容器，所以这个措辞需要修正。实现这一点的最简单方法是删除有罪的句子。

# ios - 在 iOS 6 中加载 URL 的问题（在 iOS 5 中工作正常）

> ID：12743410
> 
> 赞同：2
> 
> 时间：2012-10-05T09:30:34.600
> 
> 标签：ios, ios5, uiwebview, ios6, uiwebviewdelegate

我在我的 webview 中调用了一个 urlRequest，它重定向到另一个在 iOS5 上运行良好的 url，但在 iOS6 中它只是显示空白页。它没有给出任何 webview 错误和 webviewFiniishedLoading 方法调用，而只是显示空白页..

我的 url 格式看起来像这样

[https://wap.XXXXXXXX.com/api/en/game.html?page=cashier&username=XXXXX&temptoken=BD351080E4AC50A603462DFCB210C38C&successurl=mobileApp%3A%2F%2FdepositSuccess&native=1](https://wap.XXXXXXXX.com/api/en/game.html?page=cashier&username=XXXXX&temptoken=BD351080E4AC50A603462DFCB210C38C&successurl=mobileApp%3A%2F%2FdepositSuccess&native=1)

上面的网址有什么问题吗？

笔记。XXXX 被替换为实际值。这个 url 在 iOS 5 中也可以正常工作

# wpf - WPF - 仅绑定到字典键

> ID：12743412
> 
> 赞同：0
> 
> 时间：2012-10-05T09:30:35.160
> 
> 标签：wpf, data-binding, dictionary, listbox

我有一个绑定到字典的列表框。字典包含一个关键字和一个字符串。

```
 <ListBox Style="{StaticResource ListBoxStyle}" ItemsSource="{Binding PatientImgResources, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding SelectedKey}"  DisplayMemberPath="Key" /> 
```

PatientImgResources 是 Dictionary SelectedKey 是我想要的 Value，DisplayMemberPath 只显示关键字。

我希望这个关键字作为我的值，不幸的是 SelectedKey 总是包含整个字典条目，关键字加值。我试过 SelectedValuePath="Key" 。到目前为止没有工作。

是否可以绑定到密钥？我不想使用精简的字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:36:47.440

在 ItemSource Binding 中使用“PatientImgResources.Keys”而不是“PatientImgResources”...

# javascript - 避免资源管理器在 srcElement 中抛出错误

> ID：12743418
> 
> 赞同：0
> 
> 时间：2012-10-05T09:30:54.553
> 
> 标签：javascript, html, internet-explorer

我尽量避免资源管理器在 srcElement 中抛出错误，它没有这个功能。我有

```
function (event) {
    if (event.srcElement)
    {
        valueThis = event.srcElement.getAttribute("value");
    }
    else if(event.target)
      {
        valueThis = event.target.getAttribute("value");
     }
} 
```

但它不起作用，因为 InternetExplorer 在 e.srcElement 中抛出错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:44:31.327

如果您谈论的是 IE<9，则该`event`对象不会作为第一个参数传递给侦听器处理程序。所以

```
function(event)
{
    if(!event) alert("Dead");
} 
```

在 IE 中可能会“死”。

更常见的方法是：

```
function(e)
{
    e=e?e:window.event;
    if(e.target){/*...*/}
    else if(e.srcElement){/*...*/}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:40:27.167

尝试`hasOwnProperty(string property)`为此使用对象方法：

```
function (event) {
 if (event.hasOwnProperty('srcElement')) {
    valueThis = event.srcElement.getAttribute("value");
 }
 else if (event.hasOwnProperty('target')) {
  valueThis = event.target.getAttribute("value");
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T15:58:41.187

就我而言，一旦我手动验证代码，文本框上的必填字段验证器就会导致此问题。问题解决了。

# c# - 在多个页面中拆分大表

> ID：12743421
> 
> 赞同：0
> 
> 时间：2012-10-05T09:31:08.623
> 
> 标签：c#, pdf, winnovative

输入：二维矩阵（20000x20000）
输出：带有表格的pdf文档，包含矩阵数据

如何在不缩放字体大小的情况下在几页中水平和垂直拆分表格？现在我只能生成一页文档。Winnovative 库只是缩放字体大小。我现在使用 HtmlToPdfElement 对象，但我可以使用任何其他技术，因为我的输入数据是一个矩阵。

```
Func<string> generateRow = () =>
{
    var result = new StringBuilder(10000000);
    for (var i = 0; i < 100; i++)
    {
        result.Append("<tr>");
        for (var j = 0; j < 100; j++)
        {
            result.Append("<td>" + i + "," + j + "</td>");
        }
        result.Append("</tr>");
    }
    return result.ToString();
};

var htmlStr = "<html>" +
              "<head><style>td { border: 1px solid black; padding: 2px; } table { border-collapse: collapse; }</style></head>" +
              "<body><table style='border-width: 1px; border-color: black; border-style: solid;'>" +
              generateRow() +
              "</table></body></html>";

var document = new Document();
var page1 = document.Pages.AddNewPage(PageSize.A4, new Margins(10, 10, 10, 10));

var htmlToPdfElem = new HtmlToPdfElement(0, 0, PageSize.A4.Width - 20, PageSize.A4.Height - 20, htmlStr, null, -1, -1);
page1.AddElement(htmlToPdfElem);
document.Save("test.pdf"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:09:45.637

我想没有办法水平分割 - 这可能导致未定义的行为。实际上，组件尝试在“虚拟”浏览器中呈现您的 html。浏览器是一种页面不感知的东西。

因此，在您的情况下，我建议您查看您生成的内容的宽度。例如，确定哪些列切片应该转到当前页面。

```
string generateRow(int pageNo, int colunmsPerPage) =>
{  
    var i = colunmsPerPage;
    while(i-- > 0)
       //add single row with specified columns rage
       stringData += data[currentRow][colunmsPerPage * pageNo + i];
   return stringData;
}; 
```

您也可以指定较大的页面大小并依赖 pdf 阅读器的打印能力。

垂直分割是自动完成的——实际上你在指定所需高度时禁用了它。如果你传递“auto”，内容将自动被分成几个页面：

```
var htmlToPdfElem = new HtmlToPdfElement(0, 0, PageSize.A4.Width - 20, -1 /*auto*/, htmlStr, null); 
```

# logging - Magento 报告收集通知

> ID：12743423
> 
> 赞同：0
> 
> 时间：2012-10-05T09:31:11.880
> 
> 标签：logging, magento

偶尔我会收到以下通知：

```
Notice: Undefined index:  title  in /opt/ocentric/magento/app/code/core/Mage/Reports/Model/Mysql4/Report/Collection.php on line 126 
```

丑陋的事情是它使 system.log 文件变得很大。一旦发生，通知日志将进入无限循环。我不知道是什么触发了它。

通过 getIntervals() 方法，这个问题似乎与报告中的日期范围过滤有关，但我不知道如何`$t`保持未设置。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:57:06.850

在 Magento 1.7 中，该类已被移动，因此我不确定它发生了多大变化。假设方法结构几乎没有变化，唯一`$t['title']`无法设置的方法是 _period 不是“日”、“月”或“年”。就个人而言，我会在类中添加一些调试代码，以便在 switch 语句之后执行以下操作：

```
if ( ! isset($t['title'])) {
    Mage::log('Period is '.$this->_period);
} 
```

下次发生错误时，您应该希望看到一个意外的值（它可能以某种方式为 null，导致一个空字符串）。从那里您将获得一些更好的信息进行调试。您还可以记录调试回溯，它可能很有用。

# ios - 支持多个iOS-应用程序开发

> ID：12743424
> 
> 赞同：0
> 
> 时间：2012-10-05T09:31:13.480
> 
> 标签：ios, deployment, ios6

随着 iOS6 的发布，我将使用 iOS6 的新功能更新我的应用程序，例如 UICollectionView。

当我将它部署到 App Store 时，我的应用程序将仅适用于 iOS6 上的设备。

问题：如何让 iOS 5.1 上的设备使用不使用 UICollectionView 的旧版本？

我可以更深入地问：在不失去尚未升级操作系统的用户的情况下升级应用程序的策略是什么？

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:44:31.240

您可以使用`Class tmp = NSClassFromString(@"UIActivityViewController"); if (tmp) {//use iOS6 class}else{//do something else}`. 此外，您可以使用一些宏，例如在或`__IPHONE_5_0`之间放置一些代码。祝你好运！`#ifndef``#if defined(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:06:34.940

这将完美地工作：

```
NSString * systemVersion = [[UIDevice currentDevice] systemVersion];
if ([self.systemVersion compare:@"5.0" options:NSNumericSearch] != NSOrderedAscending)
    {
    osHigherThaniOS5 = TRUE;
    }

if ([self.systemVersion compare:@"6.0" options:NSNumericSearch] != NSOrderedAscending)
    {
    osHigherThaniOS6 = TRUE;
    } 
```

只需确定系统版本并相应地设置您的条件:)

# c# - 使用特定条件从字符串中获取值

> ID：12743427
> 
> 赞同：0
> 
> 时间：2012-10-05T09:31:30.890
> 
> 标签：c#, string

我的字符串中有一个 html 数据，我只需要在其中获取段落值。下面是一个示例 html。

```
<html>
  <head>
    <title>
       <script>
          <div>
               Some contents
           </div>
          <div>
            <p> This is what i want </p>
            <p> Select all data from p </p>
            <p> Upto this is required </p>
          </div>
         <div>
          Other html elements
         </div> 
```

那么如何使用字符串操作从段落中获取数据。

期望的输出

```
<Div>
  <p> This is what i want    </p>
  <p> Select all data from p </p>
  <p> Upto this is required  </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:34:21.870

给 div 一个 ID，例如

```
<div id="test">
<p> This is what i want </p>
<p> Select all data from p </p>
<p> Upto this is required </p>
</div> 
```

然后使用`//div[@id='test']/p`.

解决方案分解：

```
//div                    - All div elements
[@id='test']   - With an ID attribute whose value is test
/p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:46:24.990

如果您使用其他帖子中提到的 Html Agility Pack，则可以使用以下方法获取 html 中的所有段落元素：

```
HtmlDocument doc = new HtmlDocument();
doc.Load("your html string");
var pNodes = doc.DocumentNode.SelectNodes("//div[@id='id of the div']/p") 
```

由于您使用的是 .net Framework 2.0，因此您需要较旧版本的 Agility Pack，可在此处找到：[HTML Agility Pack](http://htmlagilitypack.codeplex.com/releases/view/272)

如果您只想要段落内的文本，您可以使用

```
var pNodes = doc.DocumentNode.SelectNodes("//div[@id='id of the div']/p/text()") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:37:12.377

我已经使用[Html 敏捷包](http://htmlagilitypack.codeplex.com/)来完成类似的事情。然后你可以使用 LINQ 来获得你想要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:38:36.143

[Xpath 是显而易见的答案（如果 HTML 不错，有根等），但不能像chilkat](http://www.chilkatsoft.com/)这样的第三方小部件

# python - 使用python mysqldb在mysql中获取最近运行的查询的进程ID（查询/线程）

> ID：12743436
> 
> 赞同：0
> 
> 时间：2012-10-05T09:32:06.363
> 
> 标签：python, mysql

背景：

我正在研究数据视图，许多报告都是由运行时间很长的查询生成的。我在 python 中编写了一个小型查询缓存守护程序，它接受查询，产生一个线程来运行它，并在完成后将结果存储为腌制字符串。结果通常是按月或其他因素分解的各种聚合，因此结果集并不大。所以我的缓存守护进程可以检查它是否已经有结果，并立即返回，否则它会发回“待处理”消息（或“错误”或“失败”或各种其他消息）。关键是，作为 django Web 服务器的客户端将在 5~10 秒内返回“待处理”并再次查询，同时向用户发送一条消息，说“您的报告正在构建中，请耐心等待'。

问题：

我想为用户添加取消长时间运行的查询的功能，假设它还没有被缓存。我知道我可以使用 杀死 MySQL 中的查询线程`KILL`，但是有没有办法以类似于获取最后插入行的 id 的方式获取查询的线程/查询/进程 id？我正在通过 python MySQLdb 模块执行此操作，但我看不到任何会返回此值的游标对象的属性/方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:32:06.363

连接对象有一个名为 的属性`thread_id`，它返回一个要传递给 KILL 的 id。MySQL 为每个连接而不是每个游标都有一个线程，因此您不是在终止查询，而是在终止连接。要终止单个查询，您必须在其自己的连接中运行每个查询，然后使用来自的结果终止连接`thread_id`

# java - j2objc 真的支持反射吗？

> ID：12743441
> 
> 赞同：3
> 
> 时间：2012-10-05T09:32:13.153
> 
> 标签：java, objective-c, reflection, code-translation, j2objc

我正在尝试使用 j2objc 来翻译一些 Java 代码。不幸的是，我的代码依赖于反射。j2objc 文档声称支持反射，但是当我尝试导入 eg 时`java.lang.reflect.Field`，我收到一条错误消息，指出无法解析。

如果我尝试导入我知道不支持的类（例如 Swing），也会遇到同样的错误。

支持文档中提到的其他类，例如 java.util，可以干净地翻译。

是否需要做一些特别的事情才能在 j2objc 中启用反射支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:36:29.600

`java.lang.reflect.Field`最近已修复（或至少所有报告的错误都已修复）。源代码是最新的，分发包位于[下载页面](https://code.google.com/p/j2objc/downloads/list)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:23:59.297

以我的经验，不，它没有。如果您查看[转换页面](https://code.google.com/p/j2objc/wiki/JavaConversions)，它会说它支持反射功能的子集以支持测试框架。

我正在使用 j2objc 0.56。如果我尝试调用一个方法：

```
java.lang.reflect.Method method;
        try {

          method = biometry.getClass().getMethod(methodName, int.class, double.class);
            CalcResult r = (CalcResult) method.invoke(biometry,days, measurement);
            return r;
        } catch (SecurityException e) {
            throw new BiometryException("Security Problem executing " + methodName,e);
        } catch (NoSuchMethodException e) {
            throw new BiometryException("No such method " + methodName,e);
        } catch (IllegalArgumentException e) {
            throw new BiometryException("bad argument for " + methodName,e);
        } catch (IllegalAccessException e) {
            throw new BiometryException("bad access for " + methodName,e);
        } catch (InvocationTargetException e) {
            throw new BiometryException("bad target for " + methodName,e);
        } 
```

我得到一个 JavaNullPointer 异常，但当然，它在我的 Java JUnit 中运行良好。我一直在尝试通过创建一个选择器并从那里调用该方法来解决这个问题，但奇怪的是，这也不起作用。（没有崩溃，但也没有返回正确的结果。）

# ruby-on-rails - 增加 csv 下载的记录限制

> ID：12743442
> 
> 赞同：2
> 
> 时间：2012-10-05T09:32:18.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我在数据库中有超过 50K 的记录，但是当我从活动管理员下载 csv 时，它只给了我 10K。我搜索了解决方案，发现名为 max_csv_records 的方法存在限制

**lib/active_admin/resource_controller/collection.rb**

有什么方法可以覆盖它并增加限制吗？

这是我得到的要点[https://gist.github.com/3177995](https://gist.github.com/3177995)但你们能告诉我如何使用这段代码吗？如果我可以在活动管理员初始化程序中添加一些东西会更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T01:45:17.890

只为未来的谷歌人。我的修复（适用于当前的 Master 1.0.0pre）是将以下内容添加到`config/initializers/active_admin.rb`：

```
module ActiveAdmin
  class ResourceController
    module DataAccess
      # needed for current active admin master
      def max_per_page
        30_000
      end

      def per_page
        return 30_000 if %w(text/csv application/xml application/json).include?(request.format)

        return max_per_page if active_admin_config.paginate == false

        @per_page || active_admin_config.per_page
      end
    end
  end
end 
```

根据需要更换最大值。这适用于 csv、xml 和 json 下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:51:12.583

这是增加出口记录限制的猴子补丁[https://github.com/gregbell/active_admin/issues/346](https://github.com/gregbell/active_admin/issues/346)

# c# - 为什么协方差不适用于泛型方法

> ID：12743444
> 
> 赞同：27
> 
> 时间：2012-10-05T09:32:24.150
> 
> 标签：c#, c#-4.0, covariance, contravariance

假设我有接口和类：

```
public interface ITree {}
public class Tree : ITree {} 
```

与*covariant*`IEnumerable<T>`一样，下面的代码行编译成功：

 *```
IEnumerable<ITree> trees = new List<Tree>(); 
```

但是当我把它放到通用方法中时：

```
public void Do<T>() where T : ITree
{
     IEnumerable<ITree> trees = new List<T>();
} 
```

我从编译器得到编译错误：

> 错误 1 ​​无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.IEnumerable”。存在显式转换（您是否缺少演员表？） D:\lab\Lab.General\Lab.General\Program.cs 83 40 Lab.General

为什么协方差在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T09:43:15.737

这是因为方差仅适用于引用类型（类、接口和委托）。添加一个类约束，它编译得很好：

```
public static void Do<T>() where T : class, ITree 
```*

# c++ - C vs C++ 函数问题

> ID：12743445
> 
> 赞同：3
> 
> 时间：2012-10-05T09:32:36.717
> 
> 标签：c++, c, function, scope, return

我正在学习 C，在开始学习 C++ 作为我的第一门编译语言之后，我决定“回归基础”并学习 C。

关于每种语言处理函数的方式，我有两个问题。

首先，为什么 C “不关心”函数定义的范围，而 C++ 呢？

例如，

```
int main()
{
    donothing();
    return 0;
}

void donothing() { } 
```

以上不会在 C++ 编译器中编译，而在 C 编译器中会编译。为什么是这样？C++ 不是主要是 C 的扩展，并且应该主要是“向后兼容”吗？

其次，我发现的书（[链接到 pdf](http://www.iu.hio.no/~mark/CTutorial/C-Tut-4.02.pdf)）似乎没有说明 main 函数的返回类型。我环顾四周，发现了其他书籍和网站，这些通常也没有为 main 函数指定返回类型。如果我尝试编译一个没有为 main 指定返回类型的程序，它在 C 编译器中编译得很好（尽管有一些警告），但它不能在 C++ 编译器中编译。再说一遍，这是为什么呢？总是将返回类型指定为整数而不是忽略它是更好的风格吗？

感谢您的帮助，顺便说一句，如果有人能推荐一本我应该买的更好的书，那就太好了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:36:13.517

> 首先，为什么 C “不关心”函数定义的范围，而 C++ 呢？

实际上，C 确实在乎。只是 C89 允许隐式声明的函数，`int`并从用法中推断其返回类型及其参数。C99 不再允许这样做。

因此，在您的示例中，就好像您已将原型声明为

```
int dosomething(); 
```

隐式返回类型也是如此：`int`在 C89 中推断缺少的返回类型，但不是在 C99 中。编译您的代码`gcc -std=c99 -pedantic-errors`会产生类似于以下内容的内容：

```
main.c: In function 'main':
main.c:2:5: error: implicit declaration of function 'donothing' [-Wimplicit-function-declaration]
main.c: At top level:
main.c:5:6: error: conflicting types for 'donothing'
main.c:2:5: note: previous implicit declaration of 'donothing' was her 
```

作为记录，这是我使用的代码：

```
int main() {
    donothing();
    return 0;
}
void donothing() { } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T09:35:05.757

这是因为 C++ 支持可选参数。当 C++ 看到`donothing();`它无法判断是否`donothing`是：

```
void donothing(void); 
```

或者

```
void donothing(int j = 0); 
```

在这两种情况下，它必须传递不同的参数。这也是因为 C++ 的类型比 C 更强。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:55:22.570

> 上面的他不会在 C++ 编译器中编译，而它将在 C 编译器中编译。为什么是这样？

因为 C++ 要求函数的声明（或定义）在调用点的范围内。

> C++ 不只是 C 的扩展吗？

不完全是。它最初是基于一组 C 扩展，它引用 C 标准（有一些修改）来定义 C 标准头文件的内容。C++“语言本身”类似于 C，但不是它的延伸。

> 并且应该主要是“向后兼容”？

强调“大部分”。大多数 C 功能都在 C++ 中可用，并且许多被删除的功能是为了使 C++ 成为比 C 更严格的类型语言。但没有特别期望 C 代码将编译为 C++。即使是这样，它也并不*总是*具有相同的含义。

> 我环顾四周，发现了其他书籍和网站，这些通常也没有为 main 函数指定返回类型

C 和 C++ 标准一直说`main`返回`int`.

在 C89 中，如果您省略函数的返回类型，则假定它是`int`. C++ 和 C99 都缺少这种隐式 int 返回类型，但许多 C 教程书籍和教程（以及编译器和代码）仍然使用 C89 标准。

C 允许实现接受其他返回类型，但不允许可移植程序要求它们。两种语言都有一个“独立实现”的概念，它可以以任何它喜欢的方式定义程序的进入和退出——同样，因为这是特定于实现的，它不适合 C 的一般教学。

IMO，即使您要使用 C89 编译器，也值得将您的代码编写为有效的 C99（特别是如果您有 C99 编译器可用于检查它）。C99 中删除的功能在某种程度上被认为是有害的。甚至尝试编写 C 和 C++ 的代码都是不值得的，除非在用于语言之间互操作的头文件中。

> 我决定“回归基础”并学习 C。

您不应该将 C 视为 C++ 的先决条件或“基本形式”，因为它不是。不过，它是一种更简单的语言，用于高级编程的功能较少。这通常被 C 的用户引用为 C 的优势。C++ 的用户也将其称为 C++ 的优势。有时，这些用户是出于不同目的使用这些语言的同一个人。

C 中的典型编码风格与 C++ 中的典型编码风格不同，因此在 C 中学习某些基础知识可能比在 C++ 中更容易。使用 C++ 学习低级编程是可能的，而当你这样做时编写的代码最终可能会或可能不会看起来很像 C 代码。

因此，您在学习 C 时学到的东西可能会或可能不会影响您编写 C++ 的方式。如果是这样，那可能会更好，也可能不会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T10:37:40.397

```
int main() {
    donothing();
    return 0;
}
void donothing() { } 
```

很好的最小工作示例。

在 gcc 4.2.1 中，上述代码会收到关于`void donothing()`默认编译器设置的冲突类型的警告。这就是 C89 标准所说的与此类问题有关的内容。使用 clang，上面的代码在`void donothing()`. C99 标准更严格一些。

编译 C++ 代码时启用警告并设置为高阈值是个好主意。这在 C 中变得更加重要。编译时启用警告并将隐式函数声明视为错误。

`void donothing(void);`C 和 C++ 之间的另一个区别：在 C++ 中，声明之间没有区别，而在 C 中这两者之间`void donothing();`存在巨大差异。第一个是不带参数的函数。后者是具有未指定调用序列的函数。

**永远不要`donothing()`用来指定不带参数的函数。**编译器别无选择，只能接受`donothing(1,2,3)`这种形式。`donothing(1,2,3)`当函数声明为 时，它知道拒绝`void donothing(void)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T09:43:47.887

C++ 故意改变了这些规则，使 C++ 成为一种更安全的语言。

> **C.1.4第 5 条：表达式**[diff.expr]
> 5.2.2
> **更改：**不允许函数的隐式声明
> **理由：** C++ 的类型安全性质。
> **对原始特征的影响：**删除语义上定义明确的特征。注意：原始特征在 ISO C 中被标记为“过时”。
> **转换难度：**句法转换。产生显式函数声明的工具在商业上相当普遍。
> **用途广泛：**常见。

[您可以在此Draft C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)的附录 C 中找到其他类似的更改

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T12:40:34.510

> C++ 不只是 C 的扩展吗？

不，如果你认为 C++ 是“C with Classes”，那你就大错特错了。虽然严格来说，大多数*有效*的 C 都是*有效*的 C++，但实际上没有*好的*C 就是*好的*C++。现实情况是，好的 C++ 代码与您所看到的好的 C 代码大不相同。

> 首先，为什么 C “不关心”函数定义的范围，而 C++ 呢？

从本质上讲，因为不执行与 C++ 相同的规则使得在 C 中这样做非常不安全，事实上，任何理智的人都不应该这样做。C99 加强了这一点，以及隐式 int 和 C 语言中的其他缺陷。

# php - Symfony2 OneToOne null

> ID：12743446
> 
> 赞同：2
> 
> 时间：2012-10-05T09:32:40.513
> 
> 标签：php, symfony, doctrine-orm

一位用户可能只有 1 个项目或没有。（1-1..0 关系）

我正试图在 symfony2 中通过教义来实现这一点。

我已经完成了一对一的关系，这相当简单。但是我如何指定当我想创建一个用户时，该项目可以为空？（而不是插入新行，只保留 id_item 为空）

这就是我所拥有的：

user.orm.yml 文件

```
oneToOne:
  userItem:
    targetEntity: SOA\AXBundle\Entity\Items
    cascade: ["remove", "persist"]
    joinColumn:
      name: id_item        
      referencedColumnName: id 
      nullable: true 
```

当然，我创建了 ItemsTypeForm 类，并在我的 userstypeform 类中添加了类型：

```
// UsersTypeForm Class
->add('userItem', new \SOA\AXBundle\Form\ItemsTypeForm()) 
```

当我添加一个新用户时，一切都很好。用户和项目一样被插入。但是当我尝试添加一个没有项目的用户（用户项目字段为空白）时，我收到以下错误：

> SQLSTATE [23000]：违反完整性约束：1048 列“名称”不能为空

它正在尝试插入具有空值的项目。

虽然我可以接受 1 对 1 的关系，但我想学习如何建立 1 对 1..0 的关系。

# ios - iOS 6 UIWebView loadHTMLString 与基本 URL

> ID：12743447
> 
> 赞同：2
> 
> 时间：2012-10-05T09:32:44.537
> 
> 标签：ios, uiwebview, ios6, uiwebviewdelegate

我在 iOS 6 上遇到了一个大问题。

我需要在应用程序启动时显示一个网页。我为此使用了 loadHTMLString。在 iOS 6 之前的所有东西上，一切都按预期工作，但在 iOS 6 上，它似乎需要大约。2 分钟加载任何不是文本的内容。所有图像等每加载 2 分钟，这使我的页面加载只需大约 8 分钟。这在 iOS 5.1 及更低版本上运行得非常快。

这是我在网站上发现的一个问题，它解释了我的问题，但没有答案：[https ://devforums.apple.com/message/724010](https://devforums.apple.com/message/724010)

我真的需要一个答案。

当我制作一个执行此操作的空应用程序时，一切正常，如果我将它放在一个在启动之前执行某些网络的应用程序中，就会弹出问题。所以这很难隔离，但据我所知 UIWebView，我认为这个问题与 baseURL 有关，但这只是一种感觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:28:01.350

UIWebView 在 iOS 5 和 6 之间略有不同，因为消息

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

在调用 loadHTMLString:baseURL: 时发送到 iOS 6 中的视图委托，但在 iOS 5 中并非如此。我的委托方法是

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    [[UIApplication sharedApplication] openURL:[request URL]];
    return NO;
} 
```

似乎一个空的基本 URL 导致共享应用程序加载失败。由于这是 iOS 6 的新功能，这似乎是罪魁祸首，也许你有类似的东西。在委托方法中检查空的基本 url 解决了我的问题。它不漂亮，但它有效。

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ( [@"file:///" isEqualToString:[[request URL] absoluteString]] ) {
        return YES;
    }

    [[UIApplication sharedApplication] openURL:[request URL]];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:03:11.430

我不确定为什么这解决了我的问题，但确实如此。

调用 webview 的我的 View 控制器位于静态库中，因为它正在其他应用程序中重复使用。只需将代码从静态库中移出并放入应用程序本身，应用程序就开始运行得更好，并且 Web 视图也能正常运行。iOS 5 和 iOS 6 之间不再有任何区别。

但是通过添加这段代码，它确实产生了巨大的变化：

```
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies]) {
    [storage deleteCookie:cookie];
} 
```

就像我说的那样，我无法解释为什么将代码移动到应用程序本身而不是将其作为库和上面的代码工作，但我确信它与 webview 如何缓存有关。

# actionscript-3 - Flex 自定义切换开关在动作脚本中不起作用

> ID：12743449
> 
> 赞同：0
> 
> 时间：2012-10-05T09:32:48.720
> 
> 标签：actionscript-3, apache-flex, toggle

我有一个自定义 Flex Toggleswitch 组件，可以更改开关的文本值。

```
 package skins
{
    import spark.skins.mobile.ToggleSwitchSkin;

    public class MyToggleSwitchSkin extends ToggleSwitchSkin
    {
        public function MyToggleSwitchSkin()
        {
            super();
            selectedLabel="Serviceable";
            unselectedLabel="Fault";

        }
    }
} 
```

如果我使用 MXML 标记添加控件，它工作正常。但是，当我使用操作脚本添加组件时，它不会。

```
import skins.MyToggleSwitchSkin;
public function addToggle():void {
   var myCustomToggle:MyToggleSwitchSkin = new MyToggleSwitchSkin();
   hgroup.addElement(myCustomToggle);
} 
```

控件显示但不会激活。

有什么我错过的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:31:01.507

如果没有看到您的 MXML 代码，很难比较您的两种方法，但我相信 @al_Birdy 解决了这个问题。你已经创建了一个自定义的 ToggleSwitchSkin；不是自定义切换开关。

像这样修改您的 addToggle() 方法：

```
public function addToggle():void {
   var myCustomToggle:MyToggleSwitch = new MyToggleSwitch();
   myCustomToggle.setStyle('skinClass',skins.MyToggleSwitchSkin);
   hgroup.addElement(myCustomToggle);
} 
```

我怀疑你会有更好的运气。

# jquery - 为什么这段代码没有动态设置文档标题？

> ID：12743454
> 
> 赞同：1
> 
> 时间：2012-10-05T09:33:11.420
> 
> 标签：jquery

我正在尝试定期从 php 脚本动态更新文档标题，它似乎不起作用。我是jquery的初学者，请帮忙。

```
 <div id="code" style="border: 1px solid; "></div>
    <script>
     var blink = true;

    setInterval(function(){

    if(blink){
    jQuery('#code').load('test.php', function(result) {
    var theTitle = document.getElementsByTagName("title")[0];   
         theTitle= 'google'+jQuery('#code').html();

    });

        //theTitle.text =document.getElementById('code').value;
        blink = false;
    }else{

     jQuery('#code').load('test.php', function(result) {
    var theTitle = document.getElementsByTagName("title")[0];   
         theTitle= 'yahoo'+jQuery('#code').html();

    });

        blink = true;
    }
    }, 2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:35:21.667

```
theTitle.textContent ="what you want" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:42:10.653

尝试 -

```
document.title = "new page title." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:49:28.250

如果你使用 jquery 试试这个：

```
var blink = true;
setInterval(function(){
    $('#code').load('test.php', function(result) {
         $('title').text(blink ? 'google'+$('#code').html() : 'yahoo'+$('#code').html());
         blink = !blink;
    });
}, 2000); 
```

# wpf - 当我指定默认持续时间时，VisualStateManager 搞砸了

> ID：12743455
> 
> 赞同：0
> 
> 时间：2012-10-05T09:33:22.277
> 
> 标签：wpf, xaml, animation, storyboard, visualstatemanager

我正在尝试使用 VisualStateManager 来管理我的控制状态。以下工作正常，并在状态之间给了我一秒钟的动画。

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup Name="EditStates">

        <!-- Default transition time commented out
        <VisualStateGroup.Transitions>
            <VisualTransition GeneratedDuration="0:0:2"></VisualTransition>
        </VisualStateGroup.Transitions>-->

        <VisualState Name="Normal">
            <Storyboard>
                <ThicknessAnimation Storyboard.TargetName="ViewBorder"
                    Storyboard.TargetProperty="Margin" To="0"/>
                <DoubleAnimation Storyboard.TargetName="HeaderTransform"
                    Storyboard.TargetProperty="ScaleY" To="0" />
            </Storyboard>
        </VisualState>

        <VisualState Name="Editing">
            <Storyboard>
                <ThicknessAnimation Storyboard.TargetName="ViewBorder"
                    Storyboard.TargetProperty="Margin" To="100,0,100,100"/>
                <DoubleAnimation Storyboard.TargetName="HeaderTransform"
                    Storyboard.TargetProperty="ScaleY" To="1" />
            </Storyboard>
        </VisualState>

    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

但是，如果我取消注释转换代码以尝试设置 2 秒的动画时间，它会非常混乱。

设置“编辑”时：

*   立即捕捉到 1 ，`DoubleAnimation`没有动画。
*   `ThicknessAnimation`等待 2 秒，然后动画超过 1秒

当设置为“正常”时：

*   立即捕捉到 0 ，`ThicknessAnimation`没有动画。
*   `DoubleAnimation`等待 2 秒，然后动画超过 1 秒。

谁能解释到底发生了什么？

我已经尝试过设置`Duration="0"`所有动画，就像某些样本似乎做的那样，但这所做的只是删除了有效的动画。我仍然得到 2 秒的延迟，然后是捕捉而不是动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:05:03.250

好吧，我发现足以知道这与`GeneratedTransition`. 我只是很不幸地使用了两个`VisualStateManager`不喜欢的动画。

首先，`VisualStates` **应该**有中的动画`Duration="0"`，因为这些是稳定状态。我正在删除它们，因为这是我在状态之间获得任何类型动画的唯一方法。然而，我实际看到的是稳态期间的动画（即**在**转换之后，因此在我添加默认转换长度时引入了暂停）。

我意识到上述情况的唯一原因是添加了一个`ColorAnimation`，它工作得很好。

我`DoubleAnimation`的`LayoutTransform.ScaleY`失败是因为我的目标是转换本身。感谢[这个问题](https://stackoverflow.com/questions/4828038/visualstatemanager-and-generated-transitions?rq=1)，虽然原因未知，但我通过定位元素来让它工作：

```
<DoubleAnimation Storyboard.TargetName="Header" To="0" Duration="0"
 Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleY)" /> 
```

这只是留下 my `ThicknessAnimation`，它仍然只是捕捉到值。我已经为此提出了[另一个问题](https://stackoverflow.com/questions/12744989/visualstatemanager-cant-generate-transitions-for-thicknessanimations)，现在我已经缩小了问题的范围。

# jquery - Jquery - 动画滚动对角线，野生动物园不工作，镀铬滞后

> ID：12743456
> 
> 赞同：1
> 
> 时间：2012-10-05T09:33:22.497
> 
> 标签：jquery, google-chrome, safari, scroll, jquery-animate

我设法制作了一个函数，该函数采用随机数的页面（宽度和高度）并滚动到它。这在 Firefox 中完美运行（平滑滚动和对角线），但是当尝试在 Safari 中执行此操作时，它只能水平滚动。

在 Chrome 中执行此操作时，它可以工作，但是它非常滞后。我正在滚动图片，有什么办法可以使这更流畅吗？

更新：在 safari 中测试手动滚动后，我发现页面在那里也很滞后。它的闪烁和口吃...

这是我的代码：

```
$('#nav').bind('click', function(e){
    e.preventDefault();

    var bodyHeight = $('body').height() + 1;
    var bodyLeft = $('body').width() + 1;
    var top = Math.floor(Math.random()* bodyHeight)
    var left = Math.floor(Math.random()* bodyLeft)

    $('html, body').animate({
            scrollTop: top,
            scrollLeft: left
    }, 1000, 'swing');
}) 
```

现场演示：[http ://www.nicesprites.se/patrik_berg/](http://www.nicesprites.se/patrik_berg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:54:45.610

你应该使用最新的 Jquery 版本，你会没事的。

使用例如http://code.jquery.com/jquery-latest.min.js

# css - 比较 CSS 规则特异性的高效算法

> ID：12743458
> 
> 赞同：6
> 
> 时间：2012-10-05T09:33:29.297
> 
> 标签：css, sorting, css-specificity

我想知道在以下情况下一个有效的算法是什么：

给定一组解析的 css 规则，例如。

```
 p.pStyle{margin-bottom:20px;font-family:Arial;}
     p{font-family:Verdana;}
     p.anotherPStyle{margin-bottom:10px;} 
```

从 css 样式表中，有可能多个规则集适用于给定元素（比如`<p class="pStyle anotherPStyle">hello</p>`我的文档中的 a）。

我需要首先确定样式表中的哪些规则适用于给定元素（所以这里是`p, pStyle and anotherPStyle`），然后创建一个能够按特定性（从最特定到最一般）对适用规则进行排序的比较器。注意：我已经设计了一种算法来应用排序后的规则，因此您无需有效地解决该问题。

我一直在玩弄几个想法，即一个涉及确定给定规则特定于 DOM 树的级别....虽然我不确定这是否是正确的方法？

浏览器引擎如何有效地做到这一点？我希望在 Java 中复制它，但我对许多其他语言感到满意，因此您可以提供的任何代码都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T09:47:17.543

这是由特异性决定的。在这种情况下，由于它们都同样具体，因此文件中最后出现的声明获胜。

## 特异性计算

**特异性是通过对选择器**的不同部分进行排名来计算的。

从最具体到最不具体的排名：

1.  样式属性 - 如果在样式属性中找到规则，则此排名为 1。
2.  ID - 对于在选择器中找到的每个 ID，此排名会额外增加 1。
3.  类、伪类、属性选择器 - 对于在选择器中找到的每个选择器，此等级会额外增加 1。
4.  元素 - 对于在选择器中找到的每个元素，此排名会额外增加 1。

在哪里`rank n > rank n+1`，无论每个等级有多少分。

### 例子

```
ul#nav li.active a 
```

要点是：

1.  0 - 不是样式属性。
2.  找到 1 - 1 个 ID。
3.  找到 1 - 1 个类名。
4.  找到 3 - 3 个元素。

因此，该选择器中的每个属性都有一个特异性值`[0,0,1,1,3]`（我们将在一分钟内得到那个额外的零）。该值比任何选择器都更具体，只要它可能是，例如，没有 ID。

比较算法：

1.  在行列上从左到右。
2.  比较两个选择器的排名。
3.  得分较高的等级获胜。
4.  如果排名相等，则继续向右下一个（不太具体的）排名。
5.  如果所有等级都相等，则**在 CSS 文档中较晚出现的那个将获胜**。

> ### 更重要的注意事项：
> 
> *   通用选择器`(*)`没有特异性值 (0,0,0,0) 伪元素（例如`:first-line`）`0,0,0,1`与它们的
>     伪类兄弟不同`0,0,1,0`
> *   伪类`:not()`本身并没有添加任何特殊性，只有括号内的内容。
> *   该`!important`指令可以应用于**单个声明**，并在“0th”等级上添加一个点，这比其他任何东西都更具体
>     。因此，在上面的示例中，添加`!important`任何规则只会将该规则
>     的特异性值**提高**到`[1,0,1,1,2]`，
>     从而使其立即胜过没有 的任何其他规则`!important`。

## 额外参考

请参阅有关该主题的**[这篇精彩文章](http://css-tricks.com/specifics-on-css-specificity/)**

* * *

## 如何确定哪些样式转到哪些元素

**浏览器这样做的方式是从右到左**遍历选择器，并在元素移动时从 DOM 中过滤元素。

回到前面的例子：

```
 ul#nav li.active a 
```

浏览器执行以下操作：

1.  取一个`a`元素。
2.  现在检查它是否有一个`li`带有`.active`类的元素的祖先（这是通过后代组合器：）`ancestor descendant`。
3.  现在检查它是否有一个**更高**的祖先，它`ul`的 ID 为`#nav`（同样，使用了后代组合器）。

如果某个元素满足所有这些条件，则将样式应用于它。

你可以阅读它：

> 选择 具有类为 的祖先的任何`a`元素，该类也是 a ， 而后者又具有 ID 为 的祖先，这也是 a 。
> `.active``li`
> `#nav``ul`

您需要拥有一个功能齐全且完整的 DOM 树，才能成功确定哪个元素具有哪些 CSS 样式。

# android - 一键播放和停止

> ID：12743460
> 
> 赞同：1
> 
> 时间：2012-10-05T09:33:32.977
> 
> 标签：android, android-mediaplayer

我是新手，我试图让播放音频播放并仅停止 1 个按钮，但我现在遇到了麻烦。

如果我在播放音频时触摸一个按钮，它不会停止，甚至再次播放音频并发出双重声音。

这是我的代码

```
public class ProjectisengActivity extends Activity{
    ImageButton mainkan;
    MediaPlayer mp;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test2);

        mainkan=(ImageButton)findViewById(R.id.imageButton1);
        mainkan.setOnClickListener(new OnClickListener(){
             @Override
            public void onClick(View v){

                go();
             }

            });

         public void go(){
    mp=MediaPlayer.create(ProjectisengActivity.this, R.raw.test);
    if(mp.isPlaying()){
        mp.stop();
        try {
            mp.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mp.seekTo(0);
}
    else {
    mp.start();

    } 
```

我为 android 3.0 (HoneyComb) 创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:44:59.370

在 go 函数中尝试下面的代码....

```
public void go() {
  if(mp == null) {
    mp=MediaPlayer.create(ProjectisengActivity.this, R.raw.test);
  }

  if(mp.isPlaying()){
    mp.stop();
    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mp.seekTo(0);
  }
  else {
   mp.start();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:52:31.393

这很简单，您应该按照这些步骤来实现这一点。

1.  在您的 test2.xml 中创建两个按钮名称 start 和 stop。

2.  在xml文件中设置`android:visibility`停止按钮的属性gone。

3.  现在在您的活动中获取这两个按钮的 id 并编写用于启动和停止媒体播放器的代码。

4.  设置在开始单击时消失的可见性属性和停止按钮的可见性，在停止单击时跟随其相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T09:36:29.247

我认为你错了这一行：

```
 mp=MediaPlayer.create(ProjectisengActivity.this, R.raw.test); 
```

每次用户单击按钮时，您都会创建新实例，因此它永远不会播放并重新开始。把这条线放到`onCreate`而不是`go()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:46:40.420

也试试这个，

```
public class MainActivity extends Activity {
    MediaPlayer mPlayer;
    int flag = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button mButton = (Button) findViewById(R.id.button1);

        mButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if (flag == 0) {
                    Log.v("Inside if", "Success" + "");
                    mPlayer = MediaPlayer.create(getApplicationContext(),
                            R.raw.sample);
                    mPlayer.start();
                    flag++;
                } else {
                    Log.v("Inside else", "Success" + "");
                    mPlayer.stop();
                    mPlayer.release();
                    flag = 0;
                }

            }

        });
    }

} 
```

# c - 为什么从函数返回时我的哈希为空？

> ID：12743465
> 
> 赞同：1
> 
> 时间：2012-10-05T09:33:41.153
> 
> 标签：c, struct, hashmap

当我使用我的函数时，我的哈希是空的。为什么？

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include "uthash.h"
struct oid_struct {
  char descr[20];
  char oid[50];
  UT_hash_handle hh;
};

testadd( struct oid_struct* oid_hash){

 struct oid_struct *element;
 element=(struct oid_struct*) malloc(sizeof(struct oid_struct));

 strcpy(element->descr, "foo");
 strcpy(element->oid, "1.2.1.34");
 HASH_ADD_STR(oid_hash, descr, element);
 printf("Hash has %d entries\n",HASH_COUNT(oid_hash));

}

main(){
        struct oid_struct *oid_hash = NULL, *lookup;
        testadd(oid_hash);
        printf("Hash has %d entries\n",HASH_COUNT(oid_hash));

} 
```

这是输出：

```
# gcc hashtest.c
# ./a.out
Hash has 1 entries
Hash has 0 entries
# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:49:10.323

C 通过值传递参数，这意味着内部正在更改*副本*，因此调用者看不到更改。将地址传递给：`oid_hash``testadd()``oid_hash``testadd()`

```
testadd(&oid_hash);

void testadd(struct oid_struct** oid_hash)
{
    *oid_hash = element; /* Depending on what is going on
                            inside HASH_ADD_STR(). */
} 
```

`malloc()`请注意，不需要转换返回值。

# dynamics-crm-2011 - 功能区显示规则 - ValueRule - 查找值

> ID：12743470
> 
> 赞同：0
> 
> 时间：2012-10-05T09:34:05.823
> 
> 标签：dynamics-crm-2011, ribbon

我在功能区中添加了一个按钮，我想定义一个 DisplayRule/ValueRule 来检查查找字段是否具有特定值。我不想使用 GUID，而是使用值的实际名称，因为 GUIDS 在开发、测试和生产方面可能会有所不同。

```
<DisplayRule Id="MyCompany.Form.account.MainTab.Actions.ShowWebSite.Command.DisplayRule.ValueRule">
  <ValueRule Default="true" InvertResult="false" Field="new_countryid" Value="France" />
</DisplayRule> 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:46:21.540

我的错，您无法在显示屏上设置 javascript 规则。您可能被迫将其设置为启用...

您可以创建一个自定义 javascript 规则，该规则运行用于查找查找字段名称的 javascript。像这样的东西：

```
var name = Xrm.Page.getAttribute("new_myLookupAttribute").getSelectedOption().text;
return name == "Foo"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:00:51.693

您正在使用将包含 GUID 的属性。因此，请尝试将法国的 GUID 或使用“new_countryid_name”作为该字段。

# javascript - 父对象的命名空间继承方法

> ID：12743478
> 
> 赞同：0
> 
> 时间：2012-10-05T09:34:23.663
> 
> 标签：javascript

命名空间和对象有问题。我对此很陌生，所以真的很困惑。我希望数组中的一个对象继承父对象方法。

这是我的代码：

```
 var obj = {

   arr1:['one', 'two'],
   arr2:[],

   init:function() {
       for(var x=0; x<this.arr1.length; x++) {
           this.arr2.push(new this.myfunc1(x, this.arr1[x]));
       }
       this.arr2[0].myfunc2();
   },

   myfunc1:function(x, name) {
        this.index = x;
        this.name = name;
   },

   myfunc2:function() {
        alert(this.index + ' ' + this.name);
   }

};

obj.init(); 
```

如何为我的 arr2 对象继承 myfunc2？这是原型使用的吗？

返回“未捕获的类型错误：对象 [对象对象] 没有方法 'myfunc2'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:59:04.640

如我所见，您希望在您正在创建的对象中拥有“obj”的方法

```
this.arr2.push(new this.myfunc1(x, this.arr1[x])); 
```

很简单，这些对象的构造函数是 this.myfunct1() 所以你必须在构造函数的原型属性中赋值原型对象：

```
this.myfunct1.prototype = this;

for(var x=0; x<this.arr1.length; x++) {
    this.arr2.push(new this.myfunc1(x, this.arr1[x]));
}

// WORKS!!!
this.arr2[0].myfunc2(); 
```

然后“this”（obj）就是创建对象的原型

# android - 如何在某些 http 路径中为视频创建缩略图

> ID：12743484
> 
> 赞同：0
> 
> 时间：2012-10-05T09:34:49.553
> 
> 标签：android

我有一些包含视频文件的 http 路径。现在我必须直接从

FTP 服务器的 http 路径。它工作正常。但是是否可以为该视频创建缩略图

上传时。如果可能的话，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:40:09.540

如果您正在为 api 8 级及以上编码，您可以尝试[ThumbnailUtils](http://developer.android.com/reference/android/media/ThumbnailUtils.html)

# php - 如何修复 opencart 中 vqmod 的“DOM UNABLE TO LOAD”错误

> ID：12743485
> 
> 赞同：1
> 
> 时间：2012-10-05T09:34:51.637
> 
> 标签：php, opencart

我想使用 Vqmod 在 opencart 管理员的目录下添加一个新的子菜单。这是我的代码：

```
<modification>
<id>add menu</id>
<author>XXX</author>
<version>2.3</version>
<vqmver>1.0.8</vqmver>
    <!-- OPTION CONTROLLER -->  
    <file name="admin/controller/common/header.php">
        <operation>
            <search position="after"><![CDATA[
            $this->data['text_newmenu'] = $this->language->get('text_newmenu');
            ]]></search>
            <add><![CDATA[
            $this->data['text_newmenu'] = $this->language->get('text_newmenu');
            ]]></add>
        </operation>
        <operation>
            <search position="after"><![CDATA[
            $this->data['doctor'] = $this->url->link('catalog/doctor', 'token=' . $this->session->data['token'], 'SSL');
            ]]></search>
            <add><![CDATA[
            $this->data['newmenu'] = $this->url->link('catalog/newmenu', 'token=' . $this->session->data['token'], 'SSL');
            ]]></add>
        </operation>
    </file>
    <!-- OPTION LANGUAGE -->
    <file name="admin/language/english/common/header.php">
        <operation>
            <search position="after"><![CDATA[
            $_['text_zone']  = 'Zones';
            ]]></search>
            <add><![CDATA[
            $_['entry_newmenu']  = 'Wow sexy';
            ]]></add>
        </operation>
    </file> 
    <!-- header.tpl for new menu-->
    <file name="admin/view/template/common/header.tpl">
        <operation>
            <search position="after"><![CDATA[
            <li><a href="<?php echo $doctor; ?>"><?php echo $text_doctor; ?></a></li>
            ]]></search>
            <add><![CDATA[
            <li><a href="<?php echo $newmenu; ?>"><?php echo $text_newmenu; ?></a></li>
            ]]></add>
        </operation>
    </file>
<modification> 
```

但是 DOM UNABLE TO LOAD 出现错误：`/opt/lampp/htdocs/work/oc/vqmod/xml/addmenu.xml` 有谁知道我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T10:27:13.847

我面临着类似的问题。我已授予该文件的权限。但它仍然说无法加载。经过一番研究，我发现它具有管理员权限，并且没有其他人的读取权限，可以通过以下方式授予：

```
sudo chmod a+r filename 
```

如果你想给整个目录，那么

```
sudo chmod -R a+r directory/ 
```

这解决了我的错误..

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:37:04.967

addmenu.xml 请使用这样的 xml 验证器验证此 xml

[http://www.xmlvalidation.com/](http://www.xmlvalidation.com/)

错误是因为 xml 文件不是有效的

如果这不能解决问题，请尝试添加

```
<?xml version="1.0" encoding="UTF-8"?> 
```

在 xml 的顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:03:15.767

您的`author`标签中是否有任何非标准字符，例如`á` `é` `í` `ó` `ú`？如果是这样，请确保将它们放在 CDATA 标记中，并将

```
<?xml version="1.0" encoding="UTF-8"?> 
```

文档开头的标题（之前绝对没有）

# java - Java Slider - 在不更改值的情况下触发 fireStateChanged()？

> ID：12743493
> 
> 赞同：1
> 
> 时间：2012-10-05T09:35:21.917
> 
> 标签：java, swing, event-handling, jslider, changelistener

我在初始化滑块时使用了以下代码：

```
//Gets the corresponding slider value, from it's represented value. 
int curr = valueToSlider(min, max, current, scale, q, grains); 

final JSlider slider = new JSlider(JSlider.VERTICAL, 0, grains, curr);

slider.addChangeListener(new ChangeListener() {

  public void stateChanged(ChangeEvent event) {
    double value = sliderToValue(min, max, slider.getValue(), scale, q, grains); 
    String str = ""; 

    if (valueType == SliderValueType.FLOAT) 
       str = String.format("%.2f",value);
    if (valueType == SliderValueType.INTEGER) 
       str = String.format("%.0f", value); 

    valueLabel.setText(str); 
    callCommand(c, value);
  }
}); 
```

现在我需要触发 changed 事件以使 valueLabel 标签设置为正确的格式。

```
slider.setValue(curr); 
```

这不会触发 changed 事件，我猜是因为值没有改变。一个简单的 hacky 解决方法是执行以下操作：

```
slider.setValue(1);
slider.setValue(curr); 
```

但是您可以想象，在某些代码中，使用随机值触发更改的事件可能会产生不良后果。

我可以在我的初始化方法中重现该`setText`方法。

```
if (valueType == SliderValueType.FLOAT) 
   str = String.format("%.2f",curr);

if (valueType == SliderValueType.INTEGER) 
   str = String.format("%.0f", curr); 

valueLabel.setText(str); 
```

（老实说，这听起来像是最好的解决方案）。

但只是想知道 - 有没有办法以另一种方式触发更改的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:44:09.847

将 的内容重构`stateChanged()`为一个单独的方法，例如`updateLabel()`. `stateChanged()`从方法和初始化代码中调用该方法。

我同意，将值设置为任意值只是为了触发更改是错误的。

注意：您可以通过 手动触发更改`JSlider.fireStateChanged()`，但是对于未来的代码维护人员来说，这仍然比简单地调用`updateLabel()`.

# android - 如何在 Android 中获取服务类的名称？

> ID：12743498
> 
> 赞同：5
> 
> 时间：2012-10-05T09:35:49.187
> 
> 标签：android, service, android-service

如何在 Android 中以编程方式获取服务的名称？

假设我有这段代码：

```
public class MainActivity extends Activity {
  private MyService mService; 
```

假设我想为服务的名称敬酒，可能是`com.example.MyService`.

是否可以从`mService`变量中获取它？

现在，我`MyService`以这种方式使用它

```
MyService.class.getName() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:40:45.713

如果要动态获取类名，可以使用：

```
mService.getClass().getName(); 
```

如果您只想获取类名，没有*package*，您可以使用：

```
mService.getClass().getSimpleName(); 
```

# c# - 使用c#向串口发送转义序列

> ID：12743500
> 
> 赞同：0
> 
> 时间：2012-10-05T09:35:58.623
> 
> 标签：c#, .net, serial-port

如何在 Windows XP 和 Windows 7 中使用 C# 将简单的转义序列发送到串行端口（在我的情况下为 COM4）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:47:01.073

如果您使用表单，简单的方法是将 SerialPort 控件放到它上面并将 PortName 设置为 COM4。

如果您不使用表单，您可以从 System.IO.Ports 声明控件。

然后设置波特率、奇偶校验等以匹配另一端的端口。

这是有关如何使用它的完整示例：http: [//msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

# java - 将现有的 Maven 项目迁移到 OSGI 包中

> ID：12743501
> 
> 赞同：0
> 
> 时间：2012-10-05T09:36:00.850
> 
> 标签：java, maven, osgi, rcp

我是整个 OSGi 的新手，我的任务是从现有的 maven 项目中创建一个 OSGi Bundle。

首先，我决定选择最小的部分并从它开始：

这是 pom.xml

```
project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <artifactId>cross</artifactId>
    <groupId>net.sf.maltcms</groupId>
    <version>1.2.12-SNAPSHOT</version>
</parent>
<artifactId>cross-main</artifactId>
<packaging>jar</packaging>
<name>cross-main</name>
<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-annotations</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-event</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-tools</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-exception</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-main-api</artifactId>
        <version>${project.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>commons-logging</artifactId>
                <groupId>commons-logging</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.6.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>commons-logging</artifactId>
                <groupId>commons-logging</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.4.6</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>cross-math</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>com.db4o</groupId>
        <artifactId>db4o-all</artifactId>
        <version>8.0.249</version>
    </dependency>
    <dependency>
        <groupId>net.sf.mpaxs</groupId>
        <artifactId>mpaxs-spi</artifactId>
        <version>1.6.10</version>
    </dependency>
    <dependency>
        <groupId>net.sf.mpaxs</groupId>
        <artifactId>mpaxs-server</artifactId>
        <version>1.6.10</version>
    </dependency>
</dependencies> 
```

我做了一些研究，找到了 Apache Bundle Plugin for maven 并将 pom 更改为这个

```
<packaging>bundle</packaging> 
```

并添加

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>          
                    <Bundle-SymbolicName>${pom.artifactId}</Bundle-SymbolicName>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

mvn clean install 很好，我得到了一个包含清单的 jar 文件，但当然无法解析捆绑包

```
 BundleException: The bundle "cross-main_1.2.12.SNAPSHOT [30]" could not be resolved. Reason: Missing Constraint: Import-Package: com.db4o; version="[8.0.0,9.0.0) 
```

长话短说：将 maven 应用程序迁移到 OSGi Bundle 的可能性是什么？

特别是如何管理依赖项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T06:30:42.700

可能在构建中一切顺利。maven bundle 插件会自动为你的 bundle 访问的所有包创建 import package 语句。它甚至可以查看蓝图和弹簧配置。

所以你得到的错误信息

```
could not be resolved. Reason: Missing Constraint: 
    Import-Package: com.db4o; version="[8.0.0,9.0.0)" 
```

仅仅意味着您需要在导出这些包的容器中安装一个包。所以理想情况下，db4o jar 已经是一个捆绑包。然后你可以简单地安装它。如果没有，那么您将不得不为它创建一个捆绑包。

如果您使用 apache karaf，那么您可以使用 pax url 中的 wrap: 协议即时制作捆绑包，该协议适用于简单情况。如果您需要更多，那么您可以创建一个 Maven 项目来将 jar 包装到一个包中。但在大多数情况下，这不是必需的。

我刚刚检查了 db4o 下载。它包含一个可以安装在容器中的 db4o osgi 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:11:12.653

您的 Maven 文件似乎是正确的。这`BundleException`是你得到的：

```
BundleException: The bundle "cross-main_1.2.12.SNAPSHOT [30]" could not be resolved. Reason: Missing Constraint: Import-Package: com.db4o; version="[8.0.0,9.0.0) 
```

是因为您必须在捆绑包中导入相应的包。例如，我有捆绑插件：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
        <archive>
            <manifestEntries>
                <Build-Change-Set>${changeSet}</Build-Change-Set>
                <Build-Change-Set-Date>${changeSetDate}</Build-Change-Set-Date>
                <Build-Location>${basedir}</Build-Location>
                <Build-Machine>${env.COMPUTERNAME}</Build-Machine>
                <Build-Date>${maven.build.timestamp}</Build-Date>
            </manifestEntries>
        </archive>
        <instructions>
            <Export-Package>my.bundle.main.package.*,
            </Export-Package>
            <Import-Package>
                org.springframework.context.weaving,
                org.springframework.aop,
                org.springframework.aop.framework,
                org.aopalliance.aop,
                org.apache.cxf.bus.spring,
                com.mycompany.mypackage.that.i.am.using.classess.from,
                *
            </Import-Package>
        </instructions>
    </configuration>
</plugin> 
```

在您的捆绑插件配置中添加此部分：

```
<instructions>
    <Export-Package>your.bundle.main.package.*,
    </Export-Package>
    <Import-Package>com.db4o,
        *
    </Import-Package>
</instructions> 
```

如果缺少不同的包，您可能会遇到更多这样的错误。因此，请确保将它们全部添加到您的`Import-Package`部分。

另一件需要注意的事情是：如果您在其他捆绑包中使用它，则必须导出捆绑包的包，而在其他捆绑包中，您必须导入捆绑包的包。

# java - 如何在另一个 MIDP jar 文件中运行现有的 MIDP jar 文件？

> ID：12743504
> 
> 赞同：2
> 
> 时间：2012-10-05T09:36:07.277
> 
> 标签：java, java-me, jar

我有一个 j2me jar 文件（游戏）。我被告知不要更改现有的 jar 文件。现在我必须开发一个新的 j2me 应用程序，它将根据某些条件运行现有的 jar 文件。如果我可以制作一个包含两者的 jar 文件，那将是最好的。请给我一些想法和示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:12:27.783

您**可以**在一个 JAR 中放置多个 midlet，只需确保在 jad 文件中命名每个 midlet。您**不能**从另一个 midlet 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:43:11.767

我终于发现一个 jar 文件无法启动另一个。但是我必须根据某些条件从另一个 jar 文件开始。我已经以其他方式解决了这个问题。其中之一是创建一个新的 Midlet 并扩展现有的 Midlet。然后从新构造函数调用现有构造函数并从新构造函数开始暂停和销毁方法......这样它对我有用..但如果有人有更好的想法请提及它..

```
 public class Midlet extends DiceMidlet {
    public Midlet() {
        super();
    }
    public void startApp() {
        for(int i=0;i<1000;i++){
            if(i==999){
                super.startApp();
            }
        }

    }
    public void pauseApp() {
        super.pauseApp();
    }
    public void destroyApp(boolean unconditional) {
        super.destroyApp(unconditional);
    }
 } 
```

# python - 通过符号链接伪造 python 模块：在 Windows 上？

> ID：12743505
> 
> 赞同：1
> 
> 时间：2012-10-05T09:36:11.690
> 
> 标签：python, symlink, python-module

我有几个编译好的 python 模块；它们被放入一个单一的`.so`（为了避免运行时链接，存在跨模块符号依赖关系），但许多符号链接指向这一点`.so`：

```
foo.so -> liball.so
bar.so -> liball.so
liball.so 
```

这样，我可以做到`import foo`（Python 将调用`initfoo()`定义在`liball.so`）或`import bar`（调用`initbar()`）。

我想知道这种方法是否适用于 Windows？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:55:22.987

可能不是，但你可以实现你的目标

```
import sys
import liball
sys.modules['foo'] = liball
sys.modules['bar'] = liball 
```

如果您需要在多个地方导入它们，或者使用

```
import liball as foo, libalb as bar, liball 
```

如果你只需要在一个地方。

但是，可能无法区分`initfoo()`和之间的区别，并且`initbar()`两者都必须做到，以便模块有效地包含要包含在两个模块中的所有内容。

如果`foo`部分包含与 相同的符号`bar`，但含义不同，则此方法无效。但是你可以只复制文件。这将占用比需要更多的磁盘空间，但这并没有太大的伤害，恕我直言。

# javascript - 编号中的数组天数或月数从第 1 天或第 1 个月开始

> ID：12743507
> 
> 赞同：0
> 
> 时间：2012-10-05T09:36:12.920
> 
> 标签：javascript, arrays, smarty

从第 1 天或第 1 个月到今天，我想对天数和月份进行编号。

例如：今天是 2012 年 10 月 5 日

几天的数组：输出（1,2,3,4,5）

月份数组：输出 (1,2,3,4,5,6,7,8,9,10)

这些数组将在axis-x中用于图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:43:40.550

试试这个 ，

PHP

```
<?php
$date= date('Y-m-d');
$dayarray=range(1,date('d',strtotime($date)));
$monthharray=range(1,date('m',strtotime($date))); 
```

JAVASCRIPT

```
var now= new Date();

var daysArray = [];
for (var i=1; i<=now.getDate(); i++)
daysArray.push(i);

var monthsArray = [];
for (var i=1; i<=now.getMonth()+1; i++)
monthsArray.push(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:44:51.550

您可以将`Date`对象与[这个有用的 Array.range() 实现](https://stackoverflow.com/a/3895618/477878)一起使用来获取数组；

```
var date = new Date("05-Oct-2012");
var days = Array.range(1, date.getDate());
console.log(days);
var months = Array.range(1, date.getMonth() + 1);  // Zero-based, so add one.
console.log(months); 
```

[完整的jsfiddle在这里](http://jsfiddle.net/m8G3D/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:42:50.580

使用[`Date`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)的方法：

```
var today = new Date();

var days = [];
for (var i=1; i<=today.getDate(); i++)
    days.push(i);

var months = [];
for (var i=1; i<=today.getMonth()+1; i++)
    months.push(i); 
```

# asp.net - ReportViewer - “无法序列化会话状态。在 'stateserver' 和 'sqlserver' 模式下

> ID：12743519
> 
> 赞同：2
> 
> 时间：2012-10-05T09:36:50.650
> 
> 标签：asp.net, reporting-services, reportviewer, report-viewer2010

我在 Web 应用程序中使用 VS2010 Report Viewer 控件。应用程序会话状态模式设置为 StateServer 如下

```
 <sessionState timeout="30" mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes" cookieless="false" /> 
```

reportviewer 控件在我的开发机器上工作正常，但是当应用程序部署到服务器上并且加载 reportviewer 控制页面时，会引发以下错误。所有其他页面工作正常。

**“无法序列化会话状态。在 'StateServer' 和 'SQLServer' 模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果类似的序列化，同样的限制适用由自定义会话状态存储在“自定义”模式下完成。”**

任何人都可以请帮助，任何想法都会有很大帮助..

提前致谢。

* * *

```
rptvw.ProcessingMode = ProcessingMode.Remote;
        rptvw.ServerReport.ReportServerUrl = new Uri("http://localhost:90/reportserver");
        rptvw.ServerReport.ReportPath = string.Format("/Reports/{0}", reportName);

        var param = new ReportParameter[4];

        param[0] = new ReportParameter("Parameter1", DropDownListCodes.SelectedValue));
        param[1] = new ReportParameter("Parameter2", DropDownListQuarters.SelectedValue));
        param[2] = new ReportParameter("Parameter3", DropDownListComparators.SelectedValue));
        param[3] = new ReportParameter("Parameter4", comptype);

        rptvw.ServerReport.SetParameters(param);

        rptvw.ServerReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:13:50.310

我设法让它工作。我按照此链接获取我的解决方案[msdn 链接](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.ireportservercredentials%28v=vs.80%29.aspx)

“在实现 IReportServerCredentials 接口时，重要的是要知道 ReportViewer 控件将对象的实例存储在 ASP.NET 会话中。如果服务器的 ASP.NET 会话存储在进程外，例如在 Reporting Services 中，则该类必须被标记为可序列化，以便它可以被序列化以进行存储。” 取自上面的链接。

在 App_Code\ReportServerConnection.cs 中创建了一个新文件

```
 [Serializable]
    public sealed class ReportServerConnection : IReportServerConnection2
    {
        public bool GetFormsCredentials(out Cookie authCookie, out string userName, out string password, out string authority)
        {
            authCookie = null;
            userName = null;
            password = null;
            authority = null;

            // Not using form credentials
            return false;
        }

        public WindowsIdentity ImpersonationUser
        {
            // Use the default Windows user.  Credentials will be
            // provided by the NetworkCredentials property.
            get { return null; }
        }

        public ICredentials NetworkCredentials
        {
            get
            {
                // Read the user information from the web.config file. By reading the information on demand instead of 
                // storing it, the credentials will not be stored in session, reducing the vulnerable surface area to the
                // web.config file, which can be secured with an ACL.

                // User name
                string userName = ConfigurationManager.AppSettings["ReportViewerUser"];

                if (string.IsNullOrEmpty(userName))
                    throw new InvalidOperationException("Please specify the user name in the project's Web.config file.");

                // Password
                string password = ConfigurationManager.AppSettings["ReportViewerPassword"];

                if (string.IsNullOrEmpty(password))
                    throw new InvalidOperationException("Please specify the password in the project's Web.config file");

                // Domain
                string domain = ConfigurationManager.AppSettings["ReportViewerDomain"];

                if (string.IsNullOrEmpty(domain))
                    throw new InvalidOperationException("Please specify the domain in the project's Web.config file");

                return new NetworkCredential(userName, password, domain);
            }
        }

        public Uri ReportServerUrl
        {
            get
            {
                string url = ConfigurationManager.AppSettings["ReportServerUrl"];

                if (string.IsNullOrEmpty(url))
                    throw new InvalidOperationException("Please specify the report server URL in the project's Web.config file");

                return new Uri(url);
            }
        }

        public int Timeout
        {
            // set timeout to 60 seconds
            get { return 60000; }
        }

        public IEnumerable<Cookie> Cookies
        {
            // No custom cookies
            get { return null; }
        }

        public IEnumerable<string> Headers
        {
            // No custom headers
            get { return null; }
        }
    } 
```

在 Report.aspx.cs 页面上

```
 protected void Page_Init(object sender, EventArgs e)
    {
        rptvw.ServerReport.ReportServerCredentials = new ReportServerConnection();
    } 
```

在主帖的代码中更改了这一行 `rptvw.ServerReport.ReportServerUrl = rsc.ReportServerUrl;`

并在 Web.config

```
<appSettings>
<add key="ReportViewerServerConnection" value=" App_Code.ReportServerConnection, App_Code"/>
<add key="ReportViewerUser" value="username"/>
<!-- Used as the user name by the ReportServerConnection class. -->
<add key="ReportViewerPassword" value="password"/>
<!-- Used as the password by the ReportServerConnection class. -->
<add key="ReportViewerDomain" value="domainname"/>
<!-- Used as the domain by the ReportServerConnection class. -->
<add key="ReportServerUrl" value="http://localhost:90/reportserver"/>
<!-- Used as the report server URL by the ReportServerConnection class. --> 
```

# c# - 将通用对象添加到字典 在 C# 中 - 空引用异常

> ID：12743524
> 
> 赞同：2
> 
> 时间：2012-10-05T09:37:10.303
> 
> 标签：c#, generics, serialization, dictionary

我得到一个空引用异常，但不知道为什么（见代码）。

我有以下代码作为我正在制作的反序列化器的一部分。当我的类的反序列化实例缺少某些键时，以下代码将默认键/值添加到一组字典中。这样做的原因是，当客户部署我的插件的新版本时，即使他们没有所有密钥，他们的旧设置仍然会正确反序列化。

这是我的代码：

```
private Dictionary<string, T> AddMissingSettings<T>(Dictionary<string, T> settingsObject, bool forceDefaults, string[] settingsList)
{
    if (forceDefaults || settingsObject == null)
    {
        settingsObject = new Dictionary<string, T>();
    }
    foreach (string t in settingsList)
    {
        if (!settingsObject.ContainsKey(t))
        {
            settingsObject.Add(t, default(T));// Null Reference Exception Here
        }
    }
    return settingsObject;
} 
```

这是我调用该方法的示例：

```
Dictionary<string, DateTime> Times = getlistoftimesettingsfromdata();
//Note: Not the real way Times gets set, but whatever
Times = AddMissingSettings<DateTime>(Times, forceDefaults, new string[] { "LastEmailUpdate", "IdealRegularReportTime", "LastRegularReport" });
//Also, pretty sure the "Times = " here is redundant, but let it pass 
```

将 VPNd 编辑到工作中以发布我正在使用的实际代码。我可以确认它可以编译并运行。

```
 private void LoadDefaults(bool forceDefaults)
    {
        if (RegularReportDays == null || forceDefaults) { RegularReportDays = new List<DayOfWeek>(); }
        if (RegularReportSubscribers == null || forceDefaults) { RegularReportSubscribers = new List<string>(); }
        Times = AddMissingSettings<DateTime>(Times, forceDefaults, DateTime.MinValue, new string[] { "LastEmailUpdate", "IdealRegularReportTime", "LastRegularReport" });
        Toggles = AddMissingSettings<bool>(Toggles, forceDefaults, false, new string[] { "AutomaticUpdates", "AutomaticUpdatesAlerts", "SendRegularReports" });
    }

    private Dictionary<string, T> AddMissingSettings<T>(Dictionary<string, T> settingsObject, bool forceDefaults, T defaultValue, string[] settingsList)
    {
        if (forceDefaults || settingsObject == null)
        {
            settingsObject = new Dictionary<string, T>();
        }
        foreach (string t in settingsList)
        {
            if (!settingsObject.ContainsKey(t))
            {
                settingsObject.Add(t, defaultValue);
            }
        }
        return settingsObject;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:45:04.600

好的，所以我周一回来时精神焕发，我明白问题出在哪里。问题正在发生 - 正如其他人已经嗅出的那样 - 更进一步。这个解决方案的关键在于我没有提到的地方，因为我认为它不相关（对不起）。

我试图运行以下堆栈

*   `private Dictionary<string, T> AddMissingSettings<T>(Dictionary<string, T> settingsObject, bool forceDefaults, string[] settingsList)`
*   `private void LoadDefaults(bool forceDefaults)`
*   `public BookEasyImportServiceSettings(SerializationInfo info, StreamingContext cxt)`

您可能会注意到我正在尝试更改对象的成员，同时它正在被反序列化。看来你不能这样做。所以我`LoadMissingDefaults`向我的界面添加了一个公共方法，并在`BinaryFormatter.Deserialize(Stream)`完成后调用它。

现在，我真的不喜欢给自己奖励答案（尽管同样，我不喜欢解决我的问题，也不喜欢分享我的解决方案——所以我有时会这样做）。如果有人可以就为什么会这样和/或更好的方法提交一个很好的答案，我会将获奖答案转给他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:47:02.987

您不能`null`用作 中的键`Dictionary`。从您的代码`settingsList`是`string[]`并且`string`可以是`null`. 我建议您在将 null 添加到`settingObject`.

```
foreach (string t in settingsList) 
{ 
    if (t != null && !settingsObject.ContainsKey(t)) 
    { 
        settingsObject.Add(t, default(T));// Null Reference Exception Here 
    } 
} 
```

# emacs - 谁在 Emacs 中对我的文件设置修改标志？

> ID：12743527
> 
> 赞同：0
> 
> 时间：2012-10-05T09:37:15.423
> 
> 标签：emacs, elisp

在过去的几年里，我一直在缓慢地增加我的 Emacs 配置，添加零碎，添加新模式等。大约一年前，一个问题开始定期出现：一些代码正在我的缓冲区上设置修改后的位。它实际上并没有改变任何东西，它只是设置了这个标志。这有点烦人，因为每次我运行`compile`或`save-some-buffers`我必须手动丢弃这些缓冲区中的更改以重置修改的位。我怎样才能找到有问题的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:58:48.960

与 phils 不同，我希望您的 modified-p 标志不是由缓冲区设置`set-buffer-modified-p`而是由缓冲区的实际更改设置的。这可能的原因是 Emacs 将 text-properties 视为属于缓冲区的内容，因此更改它们会设置 modified-p 标志，即使在许多情况下结果是不可见的，即使它是可见的通常不会被用户视为*修改*（用户通常将其理解为“当我保存缓冲区时影响文件”）。

因此，大多数设置 text-properties 的代码在之后需要小心重置 modified-p 标志。最好的方法通常是将设置属性的代码包装在`with-silent-modification`.

尝试追查罪魁祸首的一种方法是尝试撤消修改（例如，使用`C-/`），但当然，如果修改不可见，撤消也将不可见。因此，您可能想查看`C-h v buffer-undo-list RET`哪些是用于跟踪修改的内部数据。幸运的是，不仅设置了 modified-p，还设置了 undo-list，该列表将告诉您更改了什么。例如，该列表可能看起来像`(nil (nil face nil 12345708 . 12345713))`这意味着更改是将`face`属性设置为位置 12345708 和 12345713 之间的新值，并且该属性的旧值是`nil`（即上面的第三个`nil`）。有时查看受影响的职位`M-: (goto-char 12345708) RET`足以找出谁应该受到责备。其他时候看着`M-: (get-text-property 12345708 'face) RET`，它为您提供设置的新值，更有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:53:52.650

如果确实有东西明确地将缓冲区设置为已修改而不更改任何内容，那么我猜它应该调用`set-buffer-modified-p`.

我原本打算建议`debug-on-entry`，`set-buffer-modified-p`但粗略的测试表明，这通常具有极大的破坏性，因此您可以通过以下方式指出您对哪些缓冲区感兴趣：

```
(defvar my-debug-set-buffer-modified-p-buffers nil)

(defadvice set-buffer-modified-p
  (before my-debug-set-buffer-modified-p-advice)
  (when (memq (current-buffer) my-debug-set-buffer-modified-p-buffers)
    (debug)))
(ad-activate 'set-buffer-modified-p)

(defun my-debug-set-buffer-modified-p (buffer)
  (interactive (list (current-buffer)))
  (if (memq buffer my-debug-set-buffer-modified-p-buffers)
      (progn (setq my-debug-set-buffer-modified-p-buffers
                   (delq buffer my-debug-set-buffer-modified-p-buffers))
             (message "Disabled for %s" buffer))
    (add-to-list 'my-debug-set-buffer-modified-p-buffers buffer)
    (message "Enabled for %s" buffer))) 
```

# android - 使用模拟器测试客户端服务器应用程序

> ID：12743530
> 
> 赞同：0
> 
> 时间：2012-10-05T09:37:39.247
> 
> 标签：android, glassfish, vaadin

我的服务器应用程序是使用**vaadin**创建的，并部署在**glassfish**中，但它位于**localhost**上。

我创建了一个与该服务器通信的 android 项目。

我应该如何测试我的 android 应用程序？

# ruby-on-rails - 可确认设计的路由

> ID：12743531
> 
> 赞同：0
> 
> 时间：2012-10-05T09:37:42.960
> 
> 标签：ruby-on-rails, devise

我已经实施了 Devise Confirmable，它工作正常。当用户第一次注册时，他们会得到：

*   重定向到 localhost:3000/en 的应用程序根目录

*   Flash 通知说“带有确认链接的消息已发送到您的电子邮件地址。请打开链接以激活您的帐户。”

到现在为止还挺好。

然后我更新了应用程序控制器：

```
class ApplicationController < ActionController::Base
    before_filter :authenticate_user!
end 
```

然后，新注册的用户会发现自己被重定向到 localhost:3000/en/users/sign_in，并显示令人困惑的消息“您需要先登录或注册才能继续”。

我一直在浏览 Devise [how to，](https://github.com/plataformatec/devise/wiki/_pages)但还没有破解它。解决此问题的最简单方法是什么？

**更新**

以下是应用程序控制器的更多详细信息：

```
class ApplicationController < ActionController::Base
  protect_from_forgery                                  
  before_filter :authenticate_user!
  before_filter :set_i18n_locale_from_params

  rescue_from CanCan::AccessDenied do |exception|
    flash[:error] = "Access denied!"
    redirect_to root_url
  end

  protected

  def set_i18n_locale_from_params
        ...
  end
end 
```

**更新**

这是所要求的日志。

```
Started POST "/en/users" for 127.0.0.1 at 2012-10-05 17:28:37 +0100
[17:28:37] Processing by Devise::RegistrationsController#create as HTML
[17:28:37]   Parameters: {"utf8"=>"✓", "authenticity_token"=>"xUGLBMvZVWrtqLWpnAsa7R361QaGrOz/aVfEwvlS6xY=", "user"=>{"email"=>"...@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "locale"=>"en"}
[17:28:37]    (0.1ms)  BEGIN
[17:28:37]   User Exists (0.6ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = '...@gmail.com' LIMIT 1
[17:28:37]   User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'a2XPMojypDn6uzzVAqcs' LIMIT 1
[17:28:37]   SQL (16.6ms)  INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "failed_attempts", "last_sign_in_at", "last_sign_in_ip", "locale", "locked_at", "remember_created_at", "reset_password_sent_at", "reset_password_token", "role", "sign_in_count", "unconfirmed_email", "unlock_token", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21) RETURNING "id"  [["confirmation_sent_at", Fri, 05 Oct 2012 16:28:38 UTC +00:00], ["confirmation_token", "a2XPMojypDn6uzzVAqcs"], ["confirmed_at", nil], ["created_at", Fri, 05 Oct 2012 16:28:38 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "...@gmail.com"], ["encrypted_password", "$2a$10$HnsOCZgVTaEg9bniVzBe7OKIvw4x5hdAqjwrCG14eQDCvSTz8mxdu"], ["failed_attempts", 0], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["locale", nil], ["locked_at", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["role", 0], ["sign_in_count", 0], ["unconfirmed_email", nil], ["unlock_token", nil], ["updated_at", Fri, 05 Oct 2012 16:28:38 UTC +00:00]]
[17:28:37]   Rendered devise/mailer/confirmation_instructions.html.erb (0.8ms)
[17:28:37] 
Sent mail to ...
[17:28:37]    (0.8ms)  COMMIT
[17:28:37] Redirected to http://localhost:3000/en
[17:28:37] Completed 302 Found in 5050ms (ActiveRecord: 0.0ms)
[17:28:42] 

Started GET "/en" for 127.0.0.1 at 2012-10-05 17:28:42 +0100
[17:28:42] Processing by PageController#index as HTML
[17:28:42]   Parameters: {"locale"=>"en"}
[17:28:42] Completed 401 Unauthorized in 0ms
[17:28:42] 

Started GET "/users/sign_in" for 127.0.0.1 at 2012-10-05 17:28:42 +0100
[17:28:42] Processing by Devise::SessionsController#new as HTML
[17:28:42]   Rendered devise/shared/_links.erb (0.9ms)
[17:28:42]   Rendered devise/sessions/new.html.erb within layouts/application (6.8ms)
[17:28:42] Completed 200 OK in 22ms (Views: 20.0ms | ActiveRecord: 0.0ms) 
```

在 routes.rb 我有：

```
root :to => "page#index" 
```

所以发生的事情是 PageController#index 正在重定向用户登录。所以问题归结为如何仅从 :authenticate_user 中排除这个！在应用程序控制器中。

**解析度**

所以感谢jibiel，[这个问题](https://stackoverflow.com/questions/6011764/specify-which-controllers-to-exclude-from-before-filter)的答案是：

```
 class PageController < ApplicationController
    skip_before_filter :authenticate_user!
  end 
```

简单！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:13:08.227

```
before_filter :authenticate_user!, :unless => :devise_controller? 
```

并将自行`devise` [处理](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb#L2)其控制器操作的身份验证。否则，您将覆盖它们，因为它们已*添加*到您的`before_filter`.

# javascript - 保护 div 属性

> ID：12743534
> 
> 赞同：0
> 
> 时间：2012-10-05T09:37:45.367
> 
> 标签：javascript, jquery, html

有什么方法可以使用 javasacript、jquery 或类似方法来保护 html 元素属性，如样式、html 内容等？例如，如果我有一个 div：

```
<div id="myDiv"  style="font-weight: bold;"> Hello Stackoverflow </div> 
```

有没有办法阻止任何类型的脚本修改 html（“Hello Stackoverflow”）或这个 div 的样式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:39:41.307

可能唯一的方法是设置一个循环函数（使用[`setInterval`](http://www.w3schools.com/jsref/met_win_setinterval.asp)）来检查元素的变化。

据我所知，当 CSS 属性更改时，不会触发跨浏览器事件。

但是，对于较新的浏览器，有一些选项：[Event detect when css property changed using Jquery](https://stackoverflow.com/questions/1397251/event-detect-when-css-property-changed-using-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:18:22.023

我能想到的唯一方法是在客户端使用 Flash、Java、Silverlight 或类似的东西。

如果是 html、css 或 javascript，您不能阻止客户端修改您页面上的任何内容。即使您确实使用 javascript 检查输入，它们也可以禁用或删除检查它的功能。这就是为什么在使用从客户端发送的数据时，您总是需要验证服务器端的所有输入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T09:38:23.960

不，这是不可能的。

# php - 如何使用 PHP 从和 mysql 输出中删除换行符

> ID：12743538
> 
> 赞同：0
> 
> 时间：2012-10-05T09:37:59.277
> 
> 标签：php, mysql

我用了

```
 <br> 
```

在 textarea 在后端写一些文章，输出完全符合我在网页上的预期。我使用 3rd 方应用程序将文章描述分享到手机和社交网络。在分享文章描述时，在 3rd 方应用程序中可以看到 br> 标签。

如何
从文章描述中删除标签？

```
<?php echo ($rows['description']); ?> 
```

我使用以下方法删除了
标签，但它也删除了文章中的换行符。如何删除
标签而不是textarea中的换行符

```
<?php
$value=$rows['description'];
$sendarticle= preg_replace('/[\<br>]/', '', $value);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:38:56.877

使用 PHP 的

[`strip_tags($str)`](http://php.net/manual/de/function.strip-tags.php)

替换所有 NULL-Bytes、PHP-Tags 和 HTML-tags 的函数`$str`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:41:08.793

```
<?php echo htmlentities($rows['description']); ?> 
```

尝试这个

# sql - 无法寻址嵌套查询中的字段

> ID：12743539
> 
> 赞同：0
> 
> 时间：2012-10-05T09:38:02.307
> 
> 标签：sql, oracle, subquery

我有这样一个查询：

```
select d.r_object_id,

    (select max(max_date) from (

        SELECT max(sys_s.r_modify_date) AS max_date
        FROM kc_mission_s mis_s, dm_sysobject_s sys_s
        WHERE mis_s.r_object_id = sys_s.r_object_id AND mis_s.ka_document = d.r_object_id

        union all

        SELECT sys_s.r_modify_date AS max_date
        FROM dm_document_s doc_s left join dm_sysobject_s sys_s on doc_s.r_object_id = sys_s.r_object_id
        WHERE doc_s.r_object_id = d.r_object_id

    )) as maxx

from kc_document_s d 
```

该字段`d.r_object_id`在最后一个嵌套查询中不可见。如果中间查询将像这样被删除，它将是可见的：

```
select d.r_object_id,

    (
        SELECT max(sys_s.r_modify_date) AS max_date
        FROM kc_mission_s mis_s, dm_sysobject_s sys_s
        WHERE mis_s.r_object_id = sys_s.r_object_id AND mis_s.ka_document = d.r_object_id

        union all

        SELECT sys_s.r_modify_date AS max_date
        FROM dm_document_s doc_s left join dm_sysobject_s sys_s on doc_s.r_object_id = sys_s.r_object_id
        WHERE doc_s.r_object_id = d.r_object_id

    ) as maxx

from kc_document_s d 
```

但在这种情况下，我不允许选择多行。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:36:10.223

如果您从中间级别查询继续连接到最低级别的查询，并且还包括每个级别的连接列，那么它应该可以工作

```
select d.r_object_id,
    (select max(max_date) from (
        SELECT max(sys_s.r_modify_date) AS max_date,
        d.r_object_id
        FROM kc_mission_s mis_s, dm_sysobject_s sys_s
        WHERE mis_s.r_object_id = sys_s.r_object_id AND mis_s.ka_document = d.r_object_id

        union all

        SELECT sys_s.r_modify_date AS max_date,
        d.r_object_id
        FROM dm_document_s doc_s left join dm_sysobject_s sys_s on doc_s.r_object_id = sys_s.r_object_id
        WHERE doc_s.r_object_id = d.r_object_id
    ) sub_query
      where sub_query.r_object_id = d.r_object_id
    ) as maxx
from kc_document_s d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:37:28.147

尝试这个

```
select d.r_object_id,
       greatest((select max(sys_s.r_modify_date) as max_date
          from kc_mission_s mis_s, dm_sysobject_s sys_s
         where mis_s.r_object_id = sys_s.r_object_id
           and mis_s.ka_document = d.r_object_id), 
        (select sys_s.r_modify_date as max_date
          from dm_document_s doc_s
          left join dm_sysobject_s sys_s
            on doc_s.r_object_id = sys_s.r_object_id
         where doc_s.r_object_id = d.r_object_id)
        ) as maxx
  from kc_document_s d 
```

# javascript - 从孩子刷新父窗口div

> ID：12743542
> 
> 赞同：0
> 
> 时间：2012-10-05T09:38:14.410
> 
> 标签：javascript, jquery, html

我正在处理需要刷新父窗口的某些 div 的页面，这是我的用例

1.  用户单击添加到购物车按钮，将弹出一个包含添加的产品详细信息的弹出窗口。
2.  我正在调用包含在父窗口中的 JS 文件中定义的 java-script 方法。

从该函数中，我正在调用 ajax 调用，并希望从使用 ajax 调用从服务器发送的内容中替换该 div 内容，这是方法

```
function updateAllotmentQtySection(){

 if($('#isProductAllotment').length > 0){
 var allotmentEntryCode=$("#allotmentEntryCode").val();
 var productcode=$("#productCodePost").val();
 $.ajax({
        type: "GET",
         url: "/storefront/cart/getProductedAllotment/?productCode="+productcode+"&allotmentEntryCode="+allotmentEntryCode,
        success: function(response) {
         //alert(response);
            $("#productAllotmentQtyDiv").html(response);
         }
    });

  } 
```

这是我要更新的 Div 部分

```
<div id="productAllotmentQtyDiv">
 <c:choose>
    <c:when test="${not empty productAllotment}">

        <select name="qty" id="qty" class="productDetailsSelect">
          <c:forEach items="${productAllotmentQty}" var="productAllotmentQty">
              <option value="${productAllotmentQty}">${productAllotmentQty}</option>
          </c:forEach>
        </select>

       <input type="hidden" name="allotmentEntryCode" id="allotmentEntryCode" value="${productAllotment.code}" />
       <input type="hidden" name="isProductAllotment" id="isProductAllotment" value="true"/>

    </c:when>

   <c:otherwise>

    <c:when test="${not empty editPersonalization}">
     <input style="width: 46px;" type="text" size="1" id="qty"
      name="qty" value="${quantity}" readonly="readonly" />
    </c:when>
    <c:otherwise>
     <input style="width: 46px;" type="text" size="1" id="qty"
      name="qty" value="${quantity}" />
    </c:otherwise>
   </c:otherwise>
    </c:choose>
    </div> 
```

我正在从 div 内的服务器发送相同的内容，甚至我能够在警报标签下看到正确的响应，但由于 div 没有得到更新而只显示以前的值，因此不确定哪里是错误的部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:04:25.577

用于`window.opener`从子级调用父级上下文中的函数：

```
window.opener.updateAllotmentQtySection(); 
```

*（假设 updateAllotmentQtySection() 存在于父级的全局命名空间中）*

# mysql - 根据 tableB 中是否存在 FK 获取 tableA 的行数

> ID：12743543
> 
> 赞同：1
> 
> 时间：2012-10-05T09:38:21.277
> 
> 标签：mysql, sql

`tableA`当且仅当`rowA_x`没有`FK`指向`rowB_x`in时，我想获取行数`tableB`。

表A：

```
id | id_tableB 
```

表B

```
id | ... 
```

所以基本上只有在列不存在`tableA`的情况下才应该计算其中的行。`id_tableA``id``tableB`

有没有一种*干净*的方法来做这样的计数。我有大约 500.000 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:03:44.550

有几个（不是 100% 确定 MySQL 语法，所以这可能需要一些调整）：

使用 NOT IN 进行子选择：

```
select count(*) from tableA where id_tableB not in (select id from tableB); 
```

不存在的子选择：

```
select * from tableA a 
where NOT EXISTS (select null from tableB b where a.id_tableB = b.id); 
```

外连接：

```
 select count(*) from (
    select a.*, b.id as b_id
    from tableA a
    left join tableB b on a.id_tableB = b.id)
  where b_id IS NULL; 
```

其中哪个最快取决于您的数据，但通常，JOIN 比子查询更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:51:04.723

我能想到的最有效的方法是使用子查询：

```
SELECT COUNT(*)
FROM tableA
WHERE id_tableB NOT IN (
  SELECT id 
  FROM tableB
)
; 
```

**编辑：** 但是，经过进一步考虑，下面的查询实际上可能更有效，因为它使用 a`LEFT OUTER JOIN`而不是子查询。

```
SELECT COUNT(*)
FROM tableA A
LEFT OUTER JOIN tableB B 
    ON A.id_tableB= B.id
WHERE B.id IS NULL
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:53:19.617

也许你可以使用`WHERE NOT EXISTS()`结构。

如果我很好地理解了您的问题，您的最终查询将如下所示：

```
SELECT COUNT(*)
FROM tableA
WHERE NOT EXISTS (SELECT id FROM tableB WHERE tableA.id = tableB.id_tableA) 
```

# java - 从Android中的文本文件的特定行中获取特定单词

> ID：12743550
> 
> 赞同：0
> 
> 时间：2012-10-05T09:38:47.857
> 
> 标签：java, android

```
String line = "";
        int lineNo;
        try 
        {
            File file = new File("/sdcard/mysdfile.txt");
                FileReader fr = new FileReader(file);
                BufferedReader br = new BufferedReader(fr);
                //char[] inputBuffer1 = new char[READ_BLOCK_SIZE];
                for (lineNo = 1; lineNo < 20; lineNo++) 
                {
                     if (lineNo == 1)
                     {
                         line = br.readLine();
                         etFName.setText(line);

                     }else//{br.readLine();}   
                     if (lineNo == 2)
                     {
                             line = br.readLine();
                             char c = line.charAt(0);
                             //char c =line.charAt(0);
                             String s1 = Character.toString(c); 
                             //String Str1 = line;
                             //String bloodgroup = String.copyValueOf(Str1, 10,13);
                             fBldGp.setText(s1);
                     }else//{br.readLine();} 
                     if (lineNo == 5)
                     {
                         line = br.readLine();
                         char c = line.charAt(0);
                         String s1 = Character.toString(c);
                         etMName.setText(s1);                        
                     }else
                     if (lineNo == 6)
                     {
                         line = br.readLine();
                         char c = line.charAt(0);
                         String s1 = Character.toString(c);
                         mBldGp.setText(s1);                         
                     }else br.readLine();
                }
        } 
        catch (IOException e)
        {
                e.printStackTrace();
        } 
```

这给了我所需的行，但我无法从该行获取特定单词并将其添加到 android 布局中的 textview 中。请帮我。

我的预期输出是显示第 1、2、5、6 行的单词，留下每行的前 10 个字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:46:31.523

如果您想要一个您已经知道的特定单词或特定索引值中的任何单词，我不确定您要完成什么。但是您始终可以检查以下内容：

```
if(line.contains("word"){
     fBldGp.setText("word");
} 
```

但除此之外， line.substring 会给你一个从特定索引开始的单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:41:28.863

这将为您提供所有单词的列表（包括空格）：

```
String[] words = line.split(" "); 
```

您可以像这样访问每个单词：

```
foreach(String word in words) {
     System.out.println(word.trim()); // trim gets rid of the space from the beginning & end
} 
```

# php - 在 PHP 中验证数字

> ID：12743554
> 
> 赞同：-7
> 
> 时间：2012-10-05T09:39:01.090
> 
> 标签：php, validation

我正在寻找一个可以帮助我验证数字的 PHP 函数。我发现的是`is_numeric()`和`is_float()`PHP。

这适用于数值和浮点数，但不验证负数。

我要验证的数字是 `12345`, `12345.6789`, `0`, `-12345.6789`, `-12345`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T09:40:59.257

`is_numeric``1e10`对于您提供的所有输入都可以正常工作（它也将接受输入，例如`0xff`）。

您可能会发现使用它会更好[`filter_var`](http://php.net/manual/en/function.filter-var.php)：

```
$value = filter_var($input, FILTER_VALIDATE_FLOAT);
if ($value !== false) {
    // was a valid float, do something with it
} 
```

这仍然接受`1e10`，但它不会接受`0xff`等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T09:41:11.027

您可以使用`is_numeric`

```
$list = array("1e4",12345,12345.6789,0,- 12345.6789,- 12345,'0xa');

foreach ( $list as $value ) {
    var_dump(is_numeric($value));
} 
```

输出

```
boolean true
boolean true
boolean true
boolean true
boolean true
boolean true
boolean true
          ^--  This should not be true 
```

*** 笔记 ***

`is_numeric`不是 100% 可靠的，你应该使用`filter_var`Jon 推荐的

```
foreach ( $list as $value ) {
    var_dump(is_float(filter_var($value, FILTER_VALIDATE_FLOAT)));
} 
```

输出

```
boolean true
boolean true
boolean true
boolean true
boolean true
boolean true
boolean false  
         ^--  can you see its false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T08:10:42.993

过滤器变量很棒，但我遇到了一个严重的问题，它在 0 时返回 false，所以这将解决这个问题。它接受所有实数，因此 als 在 '0xa' 上返回 false

> (filter_var($n,FILTER_VALIDATE_FLOAT) || ($n===0) || ($n==='0'));

如果你只想要整数

> (filter_var($i,FILTER_VALIDATE_INT) || ($i===0) || ($i==='0'));

# iphone - Cocos2d：所有对象都已停止

> ID：12743560
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:39:33.713
> 
> 标签：iphone, objective-c, cocos2d-iphone, box2d

像台球或保龄球这样的游戏

因此，有两种类型的对象： - 主要 - 通过动作移动（runAction - CCMoveTo） - 其他对象 - 仅在与主要对象接触后移动（没有自己的动作）

如何检测移动后所有对象何时停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:16:03.037

您可以创建计数器，每次运行新操作时都会增加。当你想移动节点时，不要使用 CCMoveTo，而是使用带有 CCMoveTo 和 CCCallFunc 的 CCSequence。CCCallFunc 将在 CCMoveTo 完成后调用。在您将传递给 CCCallFunc 的方法中，您可以减少计数器。当它的值为 0 时，所有对象都停止。

# java - 电子邮件附加中文内容在电子邮件中显示问号

> ID：12743562
> 
> 赞同：2
> 
> 时间：2012-10-05T09:39:35.697
> 
> 标签：java, jakarta-mail

电子邮件主题正在转换为中文，但文件中附加的电子邮件内容未转换为中文或日文，显示为???????。有人可以帮助我吗？下面是我的代码：

```
 MimeMessage localMsg = null;
  Properties localProp = null;
  MimeBodyPart localMimeBodyPart = null;
  Multipart localMultipart = null;
  MimeMessage localMsg = null;
  DataSource localDs = null;

   Session localSession = Session.getDefaultInstance(localProp, null);
   localMsg = new MimeMessage(localSession);

  localMsg.setHeader("Content-Type", "text/html;charset=utf-8");
  localMsg.setSubject(subjectArg, "UTF-8"); 

            localMimeBodyPart = new MimeBodyPart();

            localMimeBodyPart.setContent(bodyMsgArg, "text/html;charset=utf-8");

            localMultipart = new MimeMultipart();
            localMultipart.addBodyPart(localMimeBodyPart);

            for (int localInt1 = 0; localInt1 < attachmentsArg.length; localInt1++)
            {
                if ((attachmentsArg[localInt1] != null))
                {
                    localMimeBodyPart = new MimeBodyPart();

                    localDs = attachmentsArg[localInt1];

                    localMimeBodyPart.setDataHandler(new DataHandler( localDs));
                    localMimeBodyPart.setFileName(localDs.getName());
                    localMultipart.addBodyPart(localMimeBodyPart);

                }
            }

            localMsg.setContent(localMultipart);

        localMsg.setSentDate(new Date());

        localMsg.saveChanges();

        Transport.send(localMsg); 
```

# php - 用文本框显示值

> ID：12743563
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:39:38.670
> 
> 标签：php

我在 php 中创建了两个文本框：

```
 <input type="text" name="uzytkownik" value="uzytkownik" style="position: absolute; left: 780px; top: 290px; "/>
<input type="text2" name="haslo" value="" style="position: absolute; left: 780px; top: 330px; "/> 
```

我想在文本框“uzytkownik”中显示值。

```
<?php
  $user = $_POST['uzytkownik'];
  echo $user;
?> 
```

但它不起作用，“$user”为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:42:07.110

您已经创建了以下内容：

```
<input type="text2" 
```

HTML 中不存在类型“text2”。它应该是 ：

```
<input type="text" 
```

此外，正确的代码将是：

```
<input type="text" id="uzytkownik" name="uzytkownik" value="uzytkownik" style="position: absolute; left: 780px; top: 290px;" />
<input type="text" id="haslo" name="haslo" value="" style="position: absolute; left: 780px; top: 330px; " /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:44:11.173

`<input type="text"`请纠正这个错误，它不应该是`<input type="text2"`

并将你的元素放在里面`form`，确保`form`方法就像 `method="post"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:46:04.407

将输入标签放入带有动作脚本和方法“post”的表单中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:54:25.120

试试这个代码。

```
<input type="text" name="uzytkownik" value="<?php echo $_POST['uzytkownik'];?>" style="position: absolute; left: 780px; top: 290px; "/>
<input type="text" name="haslo" value="<?php echo $_POST['haslo'];?>" style="position: absolute; left: 780px; top: 330px; "/>' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T09:55:09.000

首先，正如许多其他人所注意到的，第二个输入框有语法错误。这个 html 语法错误应该不会影响为第一个输入框发布的数据。

您需要将输入框包装在表单中以便能够提交，因此我相信您的错误将出现在表单使用的方法中（http://www.w3schools.com/tags/att_form_method。 ASP）。

将此更改为 POST 以便从`$_POST`变量中检索值。

您还需要更改第二个输入框的输入类型，以便将其值提交到您的服务器。

出于兴趣，`$_REQUEST`全局变量包含`GET`和`POST`请求的数据，可以在不确定使用什么 http 方法时使用，但我不建议使用它，除非调试。

```
<form action="url_to_your_php_script.php" method="POST">
    <input type="text" id="uzytkownik" name="uzytkownik" value="uzytkownik" style="position: absolute; left:780px; top: 290px; "/>
    <input type="text" id="haslo" name="haslo" value="" style="position: absolute; left: 780px; top: 330px; "/>
</form> 
```

对于您的 php 代码（我建议先检查该值是否存在于数组中，然后再尝试访问它）：

```
<?php 
if (array_key_exists("uzytkownik", $_POST)) {
    echo $_POST["uzytkownik"];
} else {
    echo "No value found";
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-05T09:48:41.473

尝试使用像 NetBeans 或 Notepad++ 这样的好编辑器。

您会立即看到此类错误。

# maven - 如何点Maven IDEA插件生成什么类型 的模块？

> ID：12743565
> 
> 赞同：1
> 
> 时间：2012-10-05T09:39:45.437
> 
> 标签：maven, intellij-idea, maven-3

我有一个由几个模块组成的项目（app. 10-12）。我使用 maven idea 插件`.iml`为每个模块生成，但我有一个问题。所有模块都是`JAVA_MODULE`类型，但插件生成主模块为`J2EE_WEB_MODULE`. 我认为这是因为`WEB_INF`目标文件夹中有 .war 文件和文件夹，但这些是供 Tomcat 使用的。无论如何，最后我必须编辑`.iml`文件并更改`J2EE_WEB_MODULE`为`JAVA_MODULE`.

有没有办法让 maven 插件生成特定类型的模块？或者，也许有一种解决方法可以让一个人用 maven 进行更改，使用正则表达式，模块类型 in `.iml`？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:41:45.780

请勿使用[`maven-idea-plugin`](http://maven.apache.org/plugins/maven-idea-plugin/)，它已过时且自 2008 年以来未更新。

只需指向`pom.xml`.

JetBrains 的人在他们自己的 maven 集成方面做得非常好。

# jquery - 使用jquery禁用div内的标签

> ID：12743566
> 
> 赞同：1
> 
> 时间：2012-10-05T09:39:50.183
> 
> 标签：jquery

我想使用 jQuery 禁用 div 内的“a”标签。

结构如下：

```
<div id="xyz"><a style="cursor:pointer;" href="abc.php">xxxx</a></div> 
```

在特定动作上：

1.  `cursor: pointer`财产应该消失
2.  对“a”标签的操作不应该起作用
3.  “a”标签应该看起来不可点击

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:43:05.580

给你：

```
$("#xyz a").css("cursor", "auto").removeAttr("href"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:43:10.743

嗨，你可以使用这个 css 行

```
#xyz a{
   pointer-events: none;
   cursor: default;
} 
```

[使用 css 禁用链接](https://stackoverflow.com/questions/2091168/disable-a-link-using-css/4416239#4416239)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:43:34.997

您可以使用阻止标签的默认操作

```
 $('#xyz a').click(function(event){
        event.preventDefault();
    }); 
```

[演示](http://jsfiddle.net/32jJH/)

# java - Android：处理可以是字符串或数组的json对象

> ID：12743568
> 
> 赞同：0
> 
> 时间：2012-10-05T09:40:03.017
> 
> 标签：java, android, arrays, json

遇到不知道如何处理的情况。

我有来自服务器的 json 数据；例如：（我只是发布了 json 的一部分，所以，是的，json 是有效的）

```
 "wall_id": 889149,
    "poster_image_thumbnail": "http:\/\/www.mface.me\/images\/avatar\/thumb_62441559ddb1dda7513d0f94.jpg",
    "post_type": "profile",
    "post_content": [{
        "text": "",
        "images_count": 1,
        "images": ["https:\/\/fbcdn-sphotos-a-a.akamaihd.net\/hphotos-ak-ash4\/227408_475848819113499_663318592_n.jpg"]
    }] 
```

创建了一个类来存储这个 json 数据

```
public class feedFormat{
    Integer wall_id;
    String poster_image_thumbnail;
    String post_type;
    String post_content;
} 
```

如上例所示，有时**post_content**可以为空或数组。我已在 feedFormat 中将 post_content 声明为字符串。这显然是抛出一个强制转换**异常**（将数组转换为字符串？）。

我期待 JSONObject 将其作为字符串读取，然后从那里将其转换为数组，但似乎并没有那样做。

如何动态处理**字符串或数组**？如果它是一个数组，我需要分解它。

我正在将此应用程序从 IOS 移植到 android，IOS 中有一个“id”对象可以是任何类。我检查该类是 NSSTring 还是 NSArray 并从那里获取它。在Java中，我不确定如何处理它。

任何建议都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:53:17.547

如果您的 JSON 数组为空，它将是这样的：

```
"post_content": [] 
```

然后它将保持一个数组，具有 0 大小的特殊性。

然后我建议您直接将您的 JSON 数组解析为适当的数据结构，无论大小如何，例如 ArrayList>。然后，您将能够浏览 JSON 数组的所有项目，并为每个项目在 arraylist 中添加一个新的 HashMap。每个哈希图都将包含成对的键值。

但是，如果我很好地理解了您的 JSON，它似乎总是一个由三个元素组成的数组，第三个元素本身就是一个数组，其大小由属性 images_count 给出。这不是很好，您的 JSON 结构应该是：

```
"post_content": {
    "text": "",
    "images": [
        "https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-ash4/227408_475848819113499_663318592_n.jpg"
    ]
} 
```

由于 images 是一个数组，因此您可以轻松获取其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:06:00.763

你可以使用这样的东西：

```
String data= "wall_id": 889149,
"poster_image_thumbnail": "http:\/\/www.mface.me\/images\/avatar\/thumb_62441559ddb1dda7513d0f94.jpg",
"post_type": "profile",
"post_content": [{
    "text": "",
    "images_count": 1,
    "images": ["https:\/\/fbcdn-sphotos-a-a.akamaihd.net\/hphotos-ak-ash4\/227408_475848819113499_663318592_n.jpg"]
}]

JSONArray jArray=data.getJSONArray("post_content");
for(int i=0; i<jArray.length(); i++)
{
JSONObject jObj=jArray.getJSONObject(i);
String text=jObj.getString("text");
int images_count=jObj.getInt("images_count");
String images=jObj.getInt("images");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:58:04.153

```
public class FeedFormat{
    Integer wall_id;
    String poster_image_thumbnail;
    String post_type;
    JSONArray post_content;
}

feedFormat toto = new feedFormat();
toto.post_content = yourJsonObject.getJsonArray("post_content"); 
```

这是做你想做的最简单的方法。另一种方法是创建另一个类。

```
public class FeedFormat{
    Integer wall_id;
    String poster_image_thumbnail;
    String post_type;
    ArrayList<PostContent> post_content = new ArrayList<PostContent>();
}

public class PostContent {
    String text;
    Integer imageCount;
    ArrayList<String> images = new ArrayList<String>();
} 
```

有了它，您可以将每个帖子内容处理为特定对象，而不是使用 JSONObject / JSONArray。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:53:29.170

`JSONObject`具有调用的函数`has(String key)`，该函数检查是否存在键的映射以及`isNull(String key)`检查特定键是否为`null`. 在阅读之前使用这些来检查密钥。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T09:54:31.633

你可以这样检查`jsonobject.has("post_content")`

```
if(jsonobject.has("post_content")) {
   /// read array and do remaining stuff
}else {
  // if not read another strings and put post_content as null.
} 
```

# java - 使用 Guava EventBus 的条件订阅

> ID：12743572
> 
> 赞同：3
> 
> 时间：2012-10-05T09:40:20.247
> 
> 标签：java, guava

我正在考虑在我的应用程序中使用[Guava EventBus](https://code.google.com/p/guava-libraries/wiki/EventBusExplained)将数据（`Double`例如）从一个或多个数据创建者分发到数据消费者。

我知道在我的消费者类中，我需要用`@Subscribe`. 有没有办法让这个订阅有条件？所以例如

```
@Subscribe {newValue > 0.0} public void valueUpdated(Double newValue) 
```

我可以在我的`valueUpdated`方法中添加检查，但是有没有办法阻止`EventBus`发送我的订阅者不感兴趣的值？

有没有类似EventBus的产品可以提供这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:17:12.607

[Spring Expression Language (SpEL)](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html) may help.

Plus: after checking the EventBus, I think it's **type-based** dispatch, no way to apply condition-based dispatch. If you insist on using Expression Language, you could put it in subscriber as Louis comment. But Expression Language is designed for flexibility rather than speed.

# c# - WPF TabControl 选项卡“跳跃”

> ID：12743575
> 
> 赞同：1
> 
> 时间：2012-10-05T09:40:28.883
> 
> 标签：c#, wpf, xaml, tabcontrol

我正在创建一个 WPF 选项卡控件，其中包含旋转 270° 的选项卡当我将鼠标悬停在选项卡之间时，它们似乎在“跳跃”。我正在寻找一种方法来防止这种情况发生。选项卡应该与 Microsoft Office 功能区 UI 中的选项卡具有相同的行为（保持在固定位置）。是否可以修改`XAML`以下内容以实现此目的？

**XAML：**

```
<Window x:Class="WpfApplication2.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="350" Width="300" TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType" UseLayoutRounding="true">
    <TabControl TabStripPlacement="Left" BorderThickness="1,0,0,0">
        <TabControl.ItemContainerStyle>
            <Style TargetType="{x:Type TabItem}">
                <Setter Property="LayoutTransform">
                    <Setter.Value>
                        <RotateTransform Angle="270"/>
                    </Setter.Value>
                </Setter>
                <Setter Property="Foreground" Value="#330033" />
                <Setter Property="FontSize" Value="9pt"/>
                <Setter Property="Height" Value="22" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Grid>
                                <Border Background="White" Name="Border" BorderBrush="#A9A9A9" BorderThickness="0" CornerRadius="2,2,0,0">
                                    <Border Padding="2" BorderBrush="Transparent">
                                        <ContentPresenter x:Name="ContentSite"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center" 
                                        ContentSource="Header" 
                                        Margin="12,0,12,2"/>
                                    </Border>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Panel.ZIndex" Value="100" />
                                    <Setter TargetName="Border" Property="BorderThickness" Value="1,1,1,0" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Panel.ZIndex" Value="100" />
                                    <Setter TargetName="Border" Property="BorderThickness" Value="1,1,1,0" />
                                    <Setter TargetName="Border" Property="Background" Value="White" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </TabControl.ItemContainerStyle>
        <TabItem Header="Tab item 1" />
        <TabItem Header="Tab item 2" />
        <TabItem Header="Tab item 3" />
    </TabControl>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:30:48.787

我认为通过将's设置为而不是将其设置为零来隐藏 a`Border`当鼠标不在选项卡上时会更好。`Border``BorderBrush``Transparent``BorderThickness`

换句话说，改变

```
<Border Background="White" Name="Border" BorderBrush="#A9A9A9" BorderThickness="0" CornerRadius="2,2,0,0"> 
```

到

```
<Border Background="White" Name="Border" BorderBrush="Transparent" BorderThickness="1,1,1,0" CornerRadius="2,2,0,0"> 
```

在`IsMouseOver`触发器中，使用

```
 <Setter TargetName="Border" Property="BorderBrush" Value="#A9A9A9" /> 
```

代替`BorderThickness`.

在您的情况下，当您更改边框元素时，边框元素本身会改变大小，`BorderThickness`因为它会`BorderThickness`影响 的“大小” `Border`，而其中的控件不会改变大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:58:52.370

如果您从 IsMouseOver 触发器中删除下面的线（边框），它将停止跳跃，并且在视觉上它并没有真正产生巨大的影响（在我看来）。

```
<Setter TargetName="Border" Property="BorderThickness" Value="0,0,0,0" /> 
```

# algorithm - 什么是 3D 更快？Perlin 或 Simplex 噪声？

> ID：12743578
> 
> 赞同：5
> 
> 时间：2012-10-05T09:40:34.330
> 
> 标签：algorithm, 3d, perlin-noise, procedural-generation, simplex-noise

好的，网上有很多 Perlin 和 Simplex 噪声的比较。但是我真的找不到一个可以在三个维度之间进行简单处理时间比较的文件，这是我最感兴趣的。我读过[那个流行的 PDF](http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf)（甚至理解了其中的大部分内容——耶！）但是我无法回答一个简单的问题：假设最佳实现，哪一个对于 3D 来说更快？

这个[stackoverflow question answer](https://stackoverflow.com/questions/6963388/fastest-perlin-like-3d-noise-algorithm)表明 Simplex 是我的案例的一个非常明显的赢家。当然，还有其他资源声称完全相反。

然而，一般的说法似乎是 Perlin 噪声的复杂度为 O(2^N)，而 Simplex 的复杂度为 O(N^2)。对于 3D 来说，Perlin 是 8，Simplex 是 9。**但是**，在某个网站上，我发现 Simplex 实际上是 O(N) 的声明。那么这里**的**真实情况是什么，这对于 3D 的速度究竟意味着什么？

我在这里不知所措，我真的主要对 3D 应用程序（用于随机地形生成，包括洞穴）的使用感兴趣，我找不到一个很好的答案来回答这个问题，如果我希望它尽可能快，我应该使用哪个可能的。

所以也许有人可以在这里帮助我:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T13:50:22.283

1) [http://www.fundza.com/c4serious/noise/perlin/perlin.html](http://www.fundza.com/c4serious/noise/perlin/perlin.html)
2) [http://www.6by9.net/b/2012/02/03/simplex-noise-for-c-and -Python](http://www.6by9.net/b/2012/02/03/simplex-noise-for-c-and-python)

使用这两种实现在“我的笔记本电脑”中执行 8M 噪声样本的时间：(g++ -O6)

1) 1.389s 即每秒 5.7M 操作 2) 0.607s 即每秒 13.2M 操作

但...

当真的，真的要进行优化时，应该学习

*   更高级别的优化（每个阶段真正做了什么：有替代方案吗？）
*   分支机构
*   记忆模式
*   依赖项
*   LUT 尺寸
*   需要单独的算术运算，它们的延迟和吞吐量
*   使用 SIMD 的可利用并行性
*   活变量的数量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T10:20:24.547

单纯形噪声更好看，但不一定更快。这一切都取决于实施。根据经验，它“速度差不多”，如果你的代码很好，使用任何一种变体都不应该有很大的损失。

请注意，我编写的大多数在 Internet 上流传的代码都没有针对速度进行优化，而是为了清晰而编写的。几年前 Ian McEwan 和我自己的 GLSL 实现在速度方面进行了合理优化，但它们针对现在已经过时的硬件和当时最新的 GLSL 版本进行了优化。从那时起，GLSL 的重要变化包括整数类型和按位逻辑运算，这使得一些散列函数变得笨拙且不必要地复杂。对置换多项式的需求是由于 GLSL 中缺乏按位逻辑运算符。WebGL 的 GLSL 仍然缺少它，但所有其他平台现在都支持整数。

4D 中的单纯形噪声通常比 4D 中的经典噪声更快。所有其他情况取决于语言、平台和代码优化量。

单纯形噪声具有简单的解析导数。经典噪音在这方面更加棘手。在许多情况下，例如抗锯齿和地形映射，解析导数非常有用。

# python - 如何在后台运行项目Django，使用gunicorn？

> ID：12743589
> 
> 赞同：1
> 
> 时间：2012-10-05T09:41:14.677
> 
> 标签：python, django, web-deployment-project, gunicorn

我使用 gunicorn 部署项目 Django 背景。

```
python2.7 manage.py run_gunicorn 0.0.0.0:8090 
```

它不是后台运行。

```
gunicorn_django -b 0.0.0.0:8090 
```

它看不到我的应用程序。

项目成功运行时`python manage.py runserver`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:58:34.493

要在后台运行 gunicorn，您需要使用像[Supervisord](http://supervisord.org/)这样的过程控制系统来管理 gunicorn。

[此处](http://gunicorn.org/deploy.html)描述了使用 Supervisor 和/或 Runit 的部署说明

对于未检测到应用程序的部分问题，您是否在 django 中添加`gunicorn`了设置？如果不是[这里描述的集成](http://gunicorn.org/run.html#django-manage-py)`INSTALLED_APPS``settings.py`

编辑：

主管的示例 gunicorn 管理脚本

```
#!/bin/bash
set -e
    LOGFILE=/home/ubuntu/logs/gunicorn/x.log
    LOGDIR=$(dirname $LOGFILE)
    NUM_WORKERS=3
    HOST=0.0.0.0:8000
    # user/group to run as
    USER=ubuntu
    GROUP=ubuntu
    cd ~/webapps/Z/
    . ~/virtualenvs/production/bin/activate
    test -d $LOGDIR || mkdir -p $LOGDIR
    exec ~/virtualenvs/production/bin/gunicorn_django -b $HOST -w $NUM_WORKERS \
        --user=$USER --group=$GROUP --log-level=debug \
        --log-file=$LOGFILE 2>>$LOGFILE 
```

# oracle - 更改语言后的 CLOB 解码

> ID：12743592
> 
> 赞同：1
> 
> 时间：2012-10-05T09:41:30.320
> 
> 标签：oracle, plsql

Oracle 数据库从 11i 迁移到 R12 并使用了另一种语言。

*   旧语言`AMERICAN_AMERICA.WE8MSWIN1252`
*   新语言`AMERICAN_AMERICA.AL32UTF8`

当我尝试从具有 CLOB 数据类型的字段中读取内容时，会读取错误的字符。我尝试使用`CONVERT`and `UTL_RAW.CONVERT`，但没有帮助。

我使用 PL/SQL 连接到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:50:41.150

检查`NLS_LANG`环境变量是否`AMERICAN_AMERICA.AL32UTF8`在客户端和服务器机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:21:45.823

尝试函数转换 [http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions027.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions027.htm)

我将它用于对话 varchar2 字段，但在文档中写道它允许转换 blob 和 clob

转换（：字段，'WE8MSWIN1252'，'UTF8'）

祝你好运

# c# - 在 asp.net mvc c# 中序列化类型对象时检测到循环引用

> ID：12743593
> 
> 赞同：0
> 
> 时间：2012-10-05T09:41:31.883
> 
> 标签：c#, asp.net-mvc

我试图搜索但无法解决我的问题。

这是我的控制器：

```
 public JsonResult Index()
    {
        return this.Json(TempData["displayList"], JsonRequestBehavior.AllowGet);
    }
    public JsonResult AddToCart(string id)
    {
        QuotationModels objQuote = new QuotationModels();

        List<QuotationModels> listQuote = objQuote.GetObjectInSession;

        int itemID = Int32.Parse(id);

        int index = -1;
        if(listQuote != null)
           index = listQuote.FindIndex(p => p.ItemdID== itemID);

        if (index >= 0)
        {
            listQuote[index].ProductQty++;
            objQuote.AddToSession(listQuote);
        }
        else
        {
            int _id = Convert.ToInt16(id);
            var _product = DataContext.DataContext.Items.FirstOrDefault(s => s.ID == _id);

            QuotationModels quote = new QuotationModels();
            quote.ItemdID = _product.ID;
            quote.ItemNote = _product.Notes;
            quote.Phone = "";
            quote.PictureName = _product.PictureName;
            quote.ProductName = _product.Name;
            quote.ProductPrice = (decimal)_product.Price;
            quote.ProductQty = 1;
            quote.ShoppingCartId = "";
            quote.Total = 0;
            quote.Email = "";
            quote.CustomerID = 0;
            quote.CusName = "";
            quote.Company = "";
            quote.Address = "";
            objQuote.AddToSession(quote);

        }

        int itemInSession = objQuote.GetObjectInSession.Sum(s => s.ProductQty);
        TempData["displayList"] = objQuote.GetObjectInSession;

        return Json(new
        {
           ja = itemInSession
        }, JsonRequestBehavior.AllowGet);

    } 
```

![这是我的 TempData 中的示例数据](../Images/b37c08791f94969a0b4235b8cf63fc33.png)

但是当我浏览 Index() 视图时，这是一个错误`A circular reference was detected while serializing an object of type`。

任何人都可以给我解决方案。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:02:57.503

我不确定您要序列化什么，但这里有一个关于您必须做什么的线索！

循环引用的问题意味着您有例如一个报价，其中包含对产品的引用。并且该 Product itsel 引用了父 Quote。

你不能简单地用 JSON 序列化它，因为它会做这样的事情：

```
Quote :
 - some attributes..
 - Product
   - some attributes
   - Quote 
     - some attributes...
     - Product... and so on ! 
```

但是现在，如果您有父引用，那么在子实体上建立关系对您来说真的很有趣吗？也许在您的服务器端模型中，但它有点多余，对客户端来说不是必需的。

在这种情况下，您可以做的是创建其他不包含不必要的类并且可能导致循环引用的类。

例如，您将有一个 SimpleQuote，它类似于 Quote，但它没有 Product 属性，而是有一个 SimpleProduct 属性。

原班：

```
public class Quote{
    public int Id;
    public Product Product;
    public double Amount;
}

public class Product{
    public int Id;
    public Quote Quote;
    public string Name;
} 
```

序列化的简单类：

```
public class SimpleQuote{
    public int Id;
    public SimpleProduct Product;
    public double Amount;
}

public class SimpleProduct{
    public int Id;
    public int QuoteId;
    public string Name;

} 
```

现在您可以创建扩展方法，例如：

```
public static void ToSimpleQuote(this Quote quote){
    return new SimpleQuote(){ 
        Id = quote.Id,
        Amount = quote.Amount,
        Product = quote.Product.ToSimpleProduct()
    };
}

public static void ToSimpleProduct(this Product product){
    return new SimpleProduct(){
        Id = product.Id,
        Name = product.Name,
        QuoteId = product.Quote.QuoteID
    };
} 
```

所以如果你有类似的东西：

```
public ActionResult Index(){
    ....
    return Json(myQuote, JsonRequestBehavior.AllowGet);
} 
```

你现在可以这样做：

```
public ActionResult Index(){
    ....
    return Json(myQuote.ToSimpleQuote(), JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:44:25.017

不要回来`this`。而是使用：

```
 public JsonResult Index()
    {
        return Json(TempData["displayList"], JsonRequestBehavior.AllowGet);
    } 
```

你能显示里面有什么的对象图`TempData["displayList"]`吗？

您可能有一个循环层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T19:31:53.877

您可以将属性 XMLIgnore 用于严格的 XML 序列化或将 NonSerialized 用于更广泛的目标。

只需使用这些属性中的任何一个标记循环的属性或字段，它就应该忽略它们。

在具有确实是循环引用的虚拟成员属性的实体框架场景中运行良好。

# c# - 在 String 中转换 SQL double

> ID：12743595
> 
> 赞同：0
> 
> 时间：2012-10-05T09:41:37.343
> 
> 标签：c#, asp.net, string, linq

从使用 linq 获取双精度值并将其转换为字符串时出现问题。我的代码是：-

```
 public List<ShowDataOnClient> GetCardListToShow()
    {
        try
        {
            List<ShowDataOnClient> CardList = new List<ShowDataOnClient>();
            using (ProgressCardLINQDataContext c = new ProgressCardLINQDataContext())
            {
                CardList = (from card in c.GetTable<T_PROGRESSCARD>()
                            where card.RecordStatus.Equals(RecordStatus.Active)
                            select new ShowDataOnClient
                            {
                                Student=(from student in c.T_STUDENTs
                                         where student.Id.Equals(card.StudentId)
                                         select student.Name).Single().ToString(),
                                Test=(from test in c.T_TESTs
                                      where test.Id.Equals(card.TestId)
                                      select test.Name).Single().ToString(),
                                MaxMarks = (from test in c.T_TESTs
                                            where test.Id.Equals(card.TestId)
                                            select test.MaxMarks).Single().ToString(),
                                MarksObtain=card.MarksObtain.ToString(),
                                Percentage=card.Percentage.ToString()

                            }).ToList<ShowDataOnClient>();
            }
            return CardList;
        }
        catch
        {
            return new List<ShowDataOnClient>();
        }
    } 
```

我也试过这个： -

```
 Percentage=Math.Truncate(card.Percentage).ToString() 
```

当我在 ToString 中传递“N2”时，它会给出异常“方法'System.String ToString(System.String)'没有支持的 SQL 转换。”

我转换后得到的值是这样的：- 5.200000000000000e+001

有没有人帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:09:00.667

您的`ShowDataOnClient`类应该将 的值存储`Percentage`为`double`. 您可以格式化在稍后阶段向用户呈现双打的方式。你如何做到这一点取决于你用来显示数据的控件。

这具有额外的好处，即排序功能可以按预期工作。如果您这么早将百分比转换为字符串，则按该列排序看起来不正确

```
% as String     % as double
1%              1%
10%             2%
11%             10%
2%              11%
23%             23%
etc.            etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:59:36.503

尝试这个：

```
double Percentage = card.Percentage;

string PercentageStr = Percentage.ToString(); 
```

这不会调用 linq to sql 并给你你想要的。

# cdn - 有什么方法可以检查这是否工作正常

> ID：12743601
> 
> 赞同：2
> 
> 时间：2012-10-05T09:41:49.060
> 
> 标签：cdn

我们已经为我们的网站订阅了 CDN（内容交付网络）。

有没有办法（任何在线工具显示）查看可用的服务器位置。

有没有办法检查这是否工作正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T21:53:01.743

我用[http://web-sniffer.net/](http://web-sniffer.net/)

查看服务器的响应标头。之前我的是 Apache/2.2.22，设置了 cloudflare 后还是 Apache/2.2.22，但是使用 web sniffer 显示为 cloudflare-nginx。

以前我一直在查看 chrome 开发工具中的响应标头，但网络嗅探器给出了不同的服务器响应标头？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T02:17:46.633

如果您想检查 CDN 是否为全球访问者提高了页面加载速度，您可以使用[pingdom](https://tools.pingdom.com/)或[gtmetrix](https://gtmetrix.com/)等性能测试工具，并选择不同的位置来测试加载时间。但是，对于每个位置，您将需要运行两次测试，因为在第一次运行期间 CDN 预计需要比平时更长的时间，因为它必须在交付之前首先在该地理位置获取这些文件。

如果您想检查 CDN 的位置数量，您可以使用[CDN Latency Benchmark](https://www.cdnperf.com/tools/cdn-latency-benchmark)等工具了解它。这为您提供了世界级别的 CDN 延迟，并为您提供了 CDN 在不同国家/地区解析到的 IP 列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T19:29:02.610

您可以使用像[https://is-it.online/](https://is-it.online/)这样的工具来测量全球各个地方的页面/资源加载时间。如果 CDN 设置确实有效，它应该始终显示来自所有位置的类似响应时间，如果不是，它会在更接近物理托管站点的位置减少，并且随着您远离它而增加。

完整指南在这里：[https ://medium.com/@abhijeeta/how-to-check-if-cdn-is-working-for-my-website-9fa96cd6ba32](https://medium.com/@abhijeeta/how-to-check-if-cdn-is-working-for-my-website-9fa96cd6ba32)

# c# - WPF图像源gif动画

> ID：12743603
> 
> 赞同：2
> 
> 时间：2012-10-05T09:41:51.673
> 
> 标签：c#, wpf

如何让 GIF 动画与下面的代码一起使用？问题是图像会随着几个不同的图像而变化。

WPF：

```
<Image Source="{Binding ElementName=L, Path=Image}" Height="400" Width="600" Stretch="None" /> 
```

隐藏代码：public readonly DependencyProperty ImageProperty；

```
 public ImageSource ImageStatus
    {
        get { return (ImageSource)GetValue(ImageProperty); }
        set { SetValue(ImageProperty, value); }
    }

Image = new BitmapImage(new Uri("/L;component/Images/test.gif", UriKind.Relative)); 
```

* * *

编辑：

[http://eladm.wordpress.com/2009/04/02/animated-gif-support-behavior/](http://eladm.wordpress.com/2009/04/02/animated-gif-support-behavior/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:43:04.923

我用它来完成我的`gifs`工作：[http ://www.vcskicks.com/csharp_animated_gif.php](http://www.vcskicks.com/csharp_animated_gif.php)

**[编辑]**

我找到了一些东西`WPF`：[http ://wpfanimatedgif.codeplex.com/](http://wpfanimatedgif.codeplex.com/)

但是我没有测试！

# c++ - Matlab和C++之间的转换

> ID：12743608
> 
> 赞同：2
> 
> 时间：2012-10-05T09:42:10.783
> 
> 标签：c++, matlab, for-loop, type-conversion

将以下 matlab 行转换为 C++ 时遇到困难：

```
for i=1:height 
  for j=1:width 
    if (match == 0) 
      [min_w, min_w_index] = min(w(i,j,:)); 
      mean(i,j,min_w_index) = double(data(i,j)); 
      sd(i,j,min_w_index) = sd_init; 
    end
    rank = w(i,j,:)./sd(i,j,:); 
    rank_ind = [1:1:C];
  end
end 
```

特别是我不知道如何隐藏“min_w_index”部分。有人可以在这一点上帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:08:44.833

在这种情况下，min 函数最常见的解决方案是

```
int min_w = w[i][j][0];
int min_w_index = 0;
for (k = 1; k < maxk; k++)
   if (w[i][j][k] < min_w)
   {
       min_w = w[i][j][k];
       min_w_index = k;
   } 
```

不要忘记 C++ 有从零开始的索引，但 Matlab 是从一开始的。我已经在您的评论中看到了问题。

# sql - 将存储过程返回的值插入表中

> ID：12743611
> 
> 赞同：0
> 
> 时间：2012-10-05T09:42:25.300
> 
> 标签：sql, sql-server-2008-r2

我有一个程序，其中有一个 select 语句，如下所示：

```
CREATE PROCEDURE pr_test
as 
SELECT  * from SOURCETABLE 
```

我可以通过执行存储过程 pr_test 插入临时表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:47:33.097

您可以使用`INSERT EXEC`

```
 declare @t results (field1 int, ....)

 insert @t (field1,...)
 exec pr_test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:45:56.100

```
CREATE PROCEDURE pr_test 
as
begin

CREATE TABLE #TibetanYaks(
YakID int,
YakName char(30) )

INSERT INTO #TibetanYaks (YakID, YakName)
SELECT  YakID, YakName
FROM    dbo.Yaks
WHERE   YakType = 'Tibetan'

-- Do some stuff with the table

drop table #TibetanYaks

end 
```

# git - 如何使现有的 git 分支跟踪远程分支？

> ID：12743614
> 
> 赞同：2
> 
> 时间：2012-10-05T09:42:36.627
> 
> 标签：git, branch, git-branch

> 可能重复：[获取现有 git 分支以跟踪远程分支](https://stackoverflow.com/q/1184518/1065190)

我知道如何创建一个跟踪远程分支的新分支。但是如何使现有分支跟踪远程分支。我知道我可以编辑 .git/config 文件，但似乎应该有更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T09:59:22.540

这个任务有很多解决方案。

**1.手动更新**

您可以打开`.git/config`文件并添加分支的定义：

```
[branch "myfeature"]
   remote = origin
   merge = refs/heads/myfeature 
```

现在，您现有`myfeature`的分支`refs/heads/myfeature`将从`origin`.

**2.使用`branch`命令**

另一种方法是使用命令`set-upstream`的：`branch`

```
git branch --set-upstream <your-branch> origin/<remote-branch> 
```

它将更新您的`.git/config`文件。

# java - 将 OpenJPA 从 1.2 更新到 2.2 后的 OpenJPA + Derby ManyToOne 问题

> ID：12743615
> 
> 赞同：0
> 
> 时间：2012-10-05T09:42:36.890
> 
> 标签：java, junit, derby, openjpa, many-to-one

我刚刚将 OpenJPA 从 1.2 版更新到 2.2 版，我的许多 JUnit 都失败了。其中大多数是因为 ManyToOne 关系改变了行为。假设我们有两个实体

```
package org.my;

import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.ManyToOne;

@Entity
public class Many {

    @ManyToOne(fetch = FetchType.LAZY, optional = false)
    private One one;

    public One getOne() {
        return one;
    }

    public void setOne(One one) {
        this.one = one;
    }

} 
```

和

```
package org.my;

import java.util.List;

@Entity
public class One {
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "one")
    private List<Many> many;

    public List<Many> getMany() {
        return many;
    }

    public void setMany(List<Many> many) {
        this.many = many;
    }

} 
```

当我创建一个对象并将其设置为多个列表时，比坚持和提交我得到一个像这样的异常

```
org.apache.openjpa.persistence.InvalidStateException: The field "one" of instance "org.my.Many@4d9cfefb" contained a null value; the metadata for this field specifies that nulls are illegal. 
```

我以为 OpenJPA 猫会找到 One 对象并将其放入 Many.one 字段中，我错了吗？如果没有，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:49:15.820

**List** of **One**对象中的每个**Many**对象都应先**设置**一个，然后再保存

# jsf - “p：数据表”选择

> ID：12743616
> 
> 赞同：0
> 
> 时间：2012-10-05T09:42:41.697
> 
> 标签：jsf, datatable, primefaces

我正在使用`p:datatable`and selection 在我的 bean 中处理选定的记录。这行得通。但是我想在初始化数据表时预设一个选定的行。这可能吗？如何？

现在它不会预设记录，即使已设置 selectedCompany。是因为我在返回jsf之前就做了吗？

这是我的代码

豆

```
public Map<String, Object> getSelectedCompany() {
    return selectedCompany;
}

public void setSelectedCompany(Map<String, Object> selectedCompany) {
    this.selectedCompany = selectedCompany;
}
public MWSGenericMapList getHandlingCompanies() {

    if (companyItems == null) {
companyItems = retrieveHandlingCompanyItems(partnerIds);
            for (int i = 0; i < companyItems.size(); i++) {
                if (companyItems.get(i).get("businesspartnerid").equals(getnewCustomerPartnerId())) {
                    setSelectedCompany(companyItems.get(i));
                }
            }
}
return companyItems;
} 
```

jsf

```
<p:dataTable styleClass="ptable100" id="handlingCompanies" var="company" value="#{switchCompany.handlingCompanies}" width="100%" height="200" 
        emptyMessage="#{msg.all_lists_no_records_found}" paginator="true" rows="10" rowsPerPageTemplate="5,10,20,50,100"
        paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}  #{msg.all_lists_numberOfRowsDisplayed_label} {RowsPerPageDropdown}"
        selection="#{switchCompany.selectedCompany}" selectionMode="single" rowKey="#{company.businesspartnerid}">
            <p:ajax event="rowSelect" update="@form" listener="#{switchCompany.handleCompanyChange}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:55:07.373

没关系，选定的行确实设置好了，我只是不在第一页上（一页上显示的行太多）所以我错过了。但它的工作方式和我一样。

# ruby-on-rails - searchlogic - 数组错误

> ID：12743619
> 
> 赞同：0
> 
> 时间：2012-10-05T09:42:57.967
> 
> 标签：ruby-on-rails, searchlogic

我有以下控制器方法

```
def app_used_by_Lab
    per_id = params[:id]

    @search1 = Apparatus.used_by_specific_lab(per_id).search(params[:search]) # both 'used_by_specific_lab' & 'lab_created' are named_scopes which return results from the same table
    @search2 = Apparatus.lab_created(per_id).search(params[:search])
    @search = @search2 + @search1
    @search.order ||= :descend_by_RPR_DATE_CREATED
    @apparatuses = @search.paginate(:page => params[:page], :per_page => 10)
end 
```

如果我将代码更改为 `'@search = @search1'`，它可以正常工作并返回结果，但是当我这样做时`'@search = @search2 + @search1'`，我会收到以下错误消息：

```
TypeError in ApparatusesController#app_used_by_Lab

can't convert Searchlogic::Search into Array 
```

不能在数组上使用 searchlogic 吗？

有没有解决上述问题的方法？

非常感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:45:12.353

请试试这个：

```
@search = @search2.to_s + @search1.to_s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:55:33.310

尝试这个：

```
@search =  @search2.concat(@search1) 
```

# jqgrid - jqGrid - 将比率字段格式化为百分比值

> ID：12743620
> 
> 赞同：2
> 
> 时间：2012-10-05T09:43:00.303
> 
> 标签：jqgrid, percentage, formatter

我的服务器代码将某些列作为比率值传输，0.0 到 1.0。我需要将其格式化**和**编辑为百分比。我想在 JavaScript 端做，而不修改服务器端。因此，如果我添加一个自定义格式化程序以将值乘以 100，则显示按预期工作。此外，当我点击编辑按钮时，内联编辑框也会以百分比显示值。当我保存时，麻烦就开始了 - 值再次用格式化程序转换**，**给了我 10000 之类的东西。所以好吧，我在这里需要对称，所以我创建了一个非格式化程序，它只是将值除以 100。但这也不起作用- 现在编辑控件将其显示为不是我想要的比率（尽管现在保存可以正常工作）。

有什么办法不改变服务器代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:57:28.873

要完全支持您的自定义类型的数据，例如 0.0 到 1.0 显示为百分比值，包括编辑和搜索，您必须实现：

1.  实现`formatter`以自定义方式显示网格中的数据。
2.  实现`unformat`以允许从其“视觉表示”访问数据。在某些情况下（例如在表单编辑的初始化阶段），jqGrid 将使用该方法。
3.  define `sorttype`，它可能是某种兼容类型的数据，例如`'number'`您的自定义排序函数。
4.  使用`edittype: 'custom'`和实施`custom_element`and `custom_value`of `editoptions`（参见[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#custom)）。
5.  的使用`stype: 'custom'`和实施`custom_element`和`custom_value`。`editoptions`

在某些情况下，可以跳过其中一个步骤，但在常见情况下，您必须考虑实施所有步骤。您应该验证上面的哪些步骤仍未在您的解决方案中实施。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/ranking1_441.htm)是对[旧答案](https://stackoverflow.com/a/4842450/315935)和[另一个答案](https://stackoverflow.com/a/10284605/315935)的演示的修改。该演示*不是针对您的直接问题*。它展示了*为什么*以及*如何*在 jqGrid 中完全实现自定义控件。表单编辑的功能在演示中并不完整，只是因为没有实现服务器部分。如果需要，可以使用[答案](https://stackoverflow.com/a/12296186/315935)中的方法，该方法显示了如何在 jqGrid 中实现本地表单编辑。我不想让代码更复杂，以显示演示的主要目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:23:35.683

您可以跳过*取消格式化*程序以支持*自定义*编辑类型，只需在您的`colModel`：

```
{ ..., edittype: 'custom', editoptions: { custom_element: function(value, options) { return $('<input type="text" value="' + value + '"/>'); }, custom_value: function(element){ return parseFloat(element.val())/100; }  }} 
```

# python - BadValueError：属性 X 必须是 str 或 unicode 实例，而不是元组（更新时，而不是创建时）

> ID：12743621
> 
> 赞同：1
> 
> 时间：2012-10-05T09:43:02.627
> 
> 标签：python, google-app-engine, google-cloud-datastore, webapp2

GAE 快把我逼疯了。

我有以下内容：

```
 if id_puertas[x]:
        puerta = Puerta.get_by_id(int(id_puertas[x]))
        puerta.ubicacion = ubicacion_puertas[x],
        puerta.ancho = float(ancho_puertas[x]),
        puerta.marco = float(marco_puertas[x]),
        puerta.alto  = float(alto_puertas[x]),
        puerta.giro  = giro_puertas[x],
        puerta.condena = True if condena_puertas[x] == 'Si' else False,
        puerta.extra = extra_puertas[x]
    else:
        puerta = Puerta(
            medicion = medicion.key().id(),
            ubicacion = ubicacion_puertas[x],
            ancho = float(ancho_puertas[x]),
            marco = float(marco_puertas[x]),
            alto  = float(alto_puertas[x]),
            giro  = giro_puertas[x],
            condena = True if condena_puertas[x] == 'Si' else False,
            extra = extra_puertas[x]
        )
    puerta.put() 
```

`id_puerta`相同的表格以数字或空白形式发送。如果是数字，则更新数据存储中的实体。如果为空，则创建一个新实体。

创作完美。

但是，如果我重新发送相同的表格（即使没有修改），第一次分配的更新也会阻塞。

`ubicacion_puertas[x]`是一个字符串（创建时与更新时相同的字符串），并且`puerta.ubicacion`是 a`StringProperty,`但我收到以下错误：

```
 BadValueError: Property ubicacion must be a str or unicode instance, not a tuple 
```

在调试器中，我清楚地看到那`ubicacion_puertas[0]`是 u'Salon'。所以我无法理解这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:48:45.653

当你这样做时：

```
puerta.ubicacion=ubicacion_puertas[x], 
```

您在 : 的`ubicacion`属性中存储了一个元组，`puerta`另一种更易读的形式是：

```
puerta.ubicacion=(ubicacion_puertas[x],) 
```

你确定这是你想要的吗？只需摆脱`,`存储 str

```
puerta.ubicacion = ubicacion_puertas[x] 
```

（其他属性也是如此……）

# javascript - 如何在对象字段内发生更改时提醒用户

> ID：12743625
> 
> 赞同：0
> 
> 时间：2012-10-05T09:43:04.450
> 
> 标签：javascript, object, html, field, alert

如果对象字段内有任何更改，我如何提醒用户

我正在尝试检测对象内此 div 的更改

如果它是正常的代码将是这样的：

```
<div id="HeaderNewMessageIcon" class="BrosixContactNewMessage" style="display:none;">
<a href="javascript:;" class="HeaderNewMessageIcon" title="Unread messages"></a>
</div> 
```

但如果有变化，它将如下所示：

```
<div id="HeaderNewMessageIcon" class="BrosixContactNewMessage" style="display: block; ">
<a href="javascript:;" class="HeaderNewMessageIcon" title="Unread messages: 1"></a>
</div> 
```

如果对象内部发生变化，我想通过警报或使用图像来提醒用户。

我有什么办法可以做到这一点？

还有一件事，我无法访问对象内部的代码，我只能查看它，但不能编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:19:35.103

您必须在通过用户交互（例如单击、鼠标悬停、鼠标按下等）时检测更改...然后您可以附加一个函数以查看其属性或其中的任何内容是否发生更改。

```
//detect inputs change
$('#HeaderNewMessageIcon').find(':input').change(function(){ alert(...)});

//detect attributes change
$('#HeaderNewMessageIcon').click(function(){
   detectChange(this);
}); 
```

至于 detectChange 工作，您必须在页面刚刚加载时保存属性

```
var attrs = $('#HeaderNewMessageIcon').get(0).attributes;

function detectChange(obj){
    //pseudo-code, you need to find a function on the web to commpare 2 objetcs
    if (obj.attributes === attrs){
        alert(...);
    }

    //the same comparison for the children elements $(obj).children()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:01:55.830

我相信一定有一些 JavaScript 代码可以改变你的 html，你可以从那里调用你的方法。其他方式你可以使用 setInterval。

您可以 [为 jQuery 使用 jQuery 插件 Mutation Events 插件](https://github.com/jollytoad/jquery.mutation-events) 。见[线程](https://stackoverflow.com/questions/4561845/firing-event-on-dom-attribute-change)

```
 var a = document.getElementsByClassName('HeaderNewMessageIcon')[0];
var oldTitle = a.title;
setInterval(function(){
    if(a.title !== oldTitle){
          alert("Title change");  
        oldTitle = a.title;
    }
},100); 
```

[jsfiddle](http://jsfiddle.net/5XwDh/)

# c++ - 使用 Google Test 中的 EXPECT_EQ 比较两个 boost::variant 对象

> ID：12743627
> 
> 赞同：3
> 
> 时间：2012-10-05T09:43:06.233
> 
> 标签：c++, googletest

我无法编译以下代码的最后一行：

```
typedef boost::variant<std::vector<int8_t>, std::vector<std::string>> Container; 

std::vector<std::string> v1;
v1.push_back("sd");
Container c1;
c1 = v1;

std::vector<int8_t> v2;
v2.push_back(1);
v2.push_back(2);
Container c2;
c2 = v2;

EXPECT_EQ(c1,c2); 
```

但是，如果我用这一行替换它，它会起作用：

```
EXPECT_EQ(c1==c2,true); 
```

EXPECT_EQ 是来自 Google Test 的函数。

这里有什么问题？

VS2010中的编译错误如下：

```
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(338) : see reference to function template instantiation 'void testing_internal::DefaultPrintNonContainerTo<T>(const T &,std::ostream *)' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(376) : see reference to function template instantiation 'void testing::internal::DefaultPrintTo<T>(testing::internal::IsNotContainer,testing::internal::false_type,const T &,std::ostream *)' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(600) : see reference to function template instantiation 'void testing::internal::PrintTo<T>(const T &,std::ostream *)' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(591) : while compiling class template member function 'void testing::internal::UniversalPrinter<T>::Print(const T &,std::ostream *)'
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(697) : see reference to class template instantiation 'testing::internal::UniversalPrinter<T>' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(678) : see reference to function template instantiation 'void testing::internal::UniversalPrint<T>(const T &,std::ostream *)' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest-printers.h(790) : see reference to function template instantiation 'void testing::internal::UniversalTersePrint<T>(const T &,std::ostream *)' being compiled
1>          with
1>          [
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest.h(1301) : see reference to function template instantiation 'std::string testing::PrintToString<T1>(const T &)' being compiled
1>          with
1>          [
1>              T1=Com::ObjRepWrap::Container,
1>              T=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest.h(1326) : see reference to function template instantiation 'testing::internal::String testing::internal::FormatForComparisonFailureMessage<T1,T2>(const T1 &,const T2 &)' being compiled
1>          with
1>          [
1>              T1=Com::ObjRepWrap::Container,
1>              T2=Com::ObjRepWrap::Container
1>          ]
1>          c:\gtest-1.6.0\include\gtest\gtest.h(1353) : see reference to function template instantiation 'testing::AssertionResult testing::internal::CmpHelperEQ<T1,T2>(const char *,const char *,const T1 &,const T2 &)' being compiled
1>          with
1>          [
1>              T1=Com::ObjRepWrap::Container,
1>              T2=Com::ObjRepWrap::Container
1>          ]
1>          c:\visual studio 2010\projects\db\xxx\main.cpp(127) : see reference to function template instantiation 'testing::AssertionResult testing::internal::EqHelper<lhs_is_null_literal>::Compare<Com::ObjRepWrap::Container,Com::ObjRepWrap::Container>(const char *,const char *,const T1 &,const T2 &)' being compiled
1>          with
1>          [
1>              lhs_is_null_literal=false,
1>              T1=Com::ObjRepWrap::Container,
1>              T2=Com::ObjRepWrap::Container
1>          ]
1>c:\boost_1_49_0\boost\variant\detail\variant_io.hpp(64): error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const T1' (or there is no acceptable conversion)
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(679): could be 'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(726): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(764): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(811): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(937): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const signed char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(944): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,signed char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(951): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const unsigned char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(958): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,unsigned char)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(968): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>,T>(std::basic_ostream<_Elem,_Traits> &&,_Ty)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              T=T1,
1>              _Ty=T1
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(1085): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const std::error_code &)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\boost_1_49_0\boost\blank.hpp(93): or       'std::basic_ostream<_Elem,_Traits> &boost::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const boost::blank &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(186): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ostream<_Elem,_Traits> &(__cdecl *)(std::basic_ostream<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(192): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_ios<_Elem,_Traits> &(__cdecl *)(std::basic_ios<_Elem,_Traits> &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(199): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::ios_base &(__cdecl *)(std::ios_base &))'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(206): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::_Bool)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(226): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(260): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned short)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(280): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(305): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned int)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(325): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(345): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned long)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(366): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(__int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(386): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(unsigned __int64)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(407): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(float)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(427): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(447): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(long double)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(467): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(const void *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\ostream(487): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::basic_streambuf<_Elem,_Traits> *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          while trying to match the argument list '(std::basic_ostream<_Elem,_Traits>, const T1)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          c:\boost_1_49_0\boost\variant\variant.hpp(858) : see reference to function template instantiation 'void boost::detail::variant::printer<OStream>::operator ()<const T>(const T &) const' being compiled
1>          with
1>          [
1>              OStream=std::basic_ostream<char,std::char_traits<char>>,
1>              T=T1
1>          ]
1>          c:\boost_1_49_0\boost\variant\detail\visitation_impl.hpp(145) : see reference to function template instantiation 'void boost::detail::variant::invoke_visitor<Visitor>::internal_visit<const T>(T &,int)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>,
1>              T=T1
1>          ]
1>          c:\boost_1_49_0\boost\variant\detail\visitation_impl.hpp(173) : see reference to function template instantiation 'void boost::detail::variant::visitation_impl_invoke_impl<Visitor,VoidPtrCV,T>(int,Visitor &,VoidPtrCV,T *,boost::mpl::false_)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *,
1>              T=T1
1>          ]
1>          c:\boost_1_49_0\boost\variant\detail\visitation_impl.hpp(256) : see reference to function template instantiation 'void boost::detail::variant::visitation_impl_invoke<Visitor,VoidPtrCV,T1,NoBackupFlag>(int,Visitor &,VoidPtrCV,T *,NoBackupFlag,int)' being compiled
1>          with
1>          [
1>              Visitor=boost::detail::variant::invoke_visitor<boost::detail::variant::printer<std::basic_ostream<char,std::char_traits<char>>>>,
1>              VoidPtrCV=const void *,
1>              NoBackupFlag=boost::variant<std::vector<testing::internal::string>,std::vector<int8_t>>::has_fallback_type_,
1>              T=T1
1>          ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:52:24.673

```
EXPECT_EQ(c1==c2); 
```

这失败了，因为它需要两个参数（请参阅[this](http://code.google.com/p/googletest/wiki/Primer#Binary_Comparison)）。

`EXPECT_TRUE(condition);`如果它适合您的需要，您可以使用：

```
EXPECT_TRUE(c1==c2); 
```

编辑：

看到[这个](http://code.google.com/p/googletest/wiki/Primer#Binary_Comparison)：

> 我们曾经要求参数支持 << 运算符以流式传输到 ostream，但从 v1.6.0 开始不再需要（如果支持 <<，则在断言失败时将调用它来打印参数；否则 Google 测试将尝试以最好的方式打印它们。

因此，除非您使用的版本不是 1.6.0 或更高版本，否则您需要`operator<<`定义。

# php - Symfony2 Doctrine 多对多双向保存表单类型

> ID：12743630
> 
> 赞同：2
> 
> 时间：2012-10-05T09:43:09.160
> 
> 标签：php, symfony, doctrine-orm, many-to-many, bidirectional-relation

我在使用表单保存实体时遇到问题。给我带来问题的关系是多对多双向的。

代理实体

```
/**
 * @var \Doctrine\Common\Collections\ArrayCollection $agentLists
 *
 * @ORM\ManyToMany(targetEntity="AgentList", inversedBy="agents")
 * @ORM\JoinTable(name="agent_agentlist",
 *  joinColumns={@ORM\JoinColumn(name="agent_id", referencedColumnName="id")},
 *  inverseJoinColumns={@ORM\JoinColumn(name="agentlist_id", referencedColumnName="id")}
 * )
 */
protected $agentLists;

/**
 * Get agent lists
 *
 * @return \Doctrine\Common\Collections\ArrayCollection
 */
public function getAgentLists()
{
    return $this->agentLists;
}

/**
 * Add agent list to agent
 *
 * @param AgentList $agentList
 */
public function addAgentList(AgentList $agentList)
{
    $this->agentLists->add($agentList);
    $agentList->addAgent($this);
}

/**
 * Remove agent list from agent
 *
 * @param AgentList $agentList
 */
public function removeAgentList(AgentList $agentList)
{
    $this->agentLists->removeElement($agentList);
    $agentList->removeAgent($this);
} 
```

代理列表实体

```
/**
 * @var \Doctrine\Common\Collections\ArrayCollection $agents
 *
 * @ORM\ManyToMany(targetEntity="Agent", mappedBy="agentLists")
 */
protected $agents;
/**
 * Get agents
 *
 * @return \Doctrine\Common\Collections\ArrayCollection
 */
public function getAgents()
{
    return $this->agents;
}

/**
 * Add agent
 *
 * @param Agent $agent
 */
public function addAgent(Agent $agent)
{
    $this->agents[] = $agent;
}

/**
 * Remove agent
 *
 * @param Agent $agent
 */
public function removeAgent(Agent $agent)
{
    $this->agents->removeElement($agent);
} 
```

在代理类型中

```
->add('agentLists', null, array('choices' => $this->commercial->getAgentLists(), 'required' => false)); 
```

在 AgentList 类型中

```
->add('agents', null, array(
        'required' => false,
        'choices' => $commercial->getAgents() 
```

它仅在我使用 AgentType 时才有效。如果我使用 AgentListType 不要保存代理关系！同样，如果我：

```
$agent->addAgentList($agentList); 
```

一切正常！如果我：

```
$agentList->addAgent($agent); 
```

什么都不保存...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:08:38.380

例如，对于多对多，我正在创建嵌入字段

```
->add('agentsEmbed', 'collection',
            array(
                'type' => new AgentListType(),
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'property_path' => false
            )
        ) 
```

控制器中的 Afrer：

```
$agents = $form['agentsEmbed']->getData();

            if($agents)
            {
                $entity->setAgentLists(new ArrayCollection());

                foreach($agents as $agent)
                {
                    $entity->addAgentList($em->getRepository('AgentList')->find($agent->getId()););
                }
            }

        $em->persist($entity);
        $em->flush(); 
```

它适用于常见的多对多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:54:49.113

```
$agentList->addAgent($agent); 
```

是不足够的。由于它是双向的，因此您必须将代理添加/设置为列表并列出代理。

这可以工作：

```
foreach ($agentLists as $list) {
     $alist = $em->getRepository('YourBundle:AgentList')
                   ->findOneById($list->getId());

     $agent->addAgentList($aList);
     $em->persist($agent);
     $em->flush();

     $aList->addAgent($agent);
     $em->persist($aList);
     $em->flush();
} 
```

请记住，您必须先持久化一个实体，然后才能持久化并刷新另一个相关实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T12:24:56.733

不幸的是，你必须忍受它

> Doctrine 只会检查关联的拥有方是否有更改

[https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/unitofwork-associations.html#important-concepts](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/unitofwork-associations.html#important-concepts)

# jboss - 如果未触发的触发器很大，Quartz Schedular 在 jboss 启动时挂起或不响应

> ID：12743636
> 
> 赞同：1
> 
> 时间：2012-10-05T09:43:36.437
> 
> 标签：jboss, quartz-scheduler

我有一个 jboss 服务器，我们使用 Quartz 作为调度服务。

在 jboss 正常启动时，它最终会初始化 Quartz。

但是在启动 jboss 时，如果误触发的触发器数量超过 2000 个，它会在“处理 2000 个误触发的触发器”时停止。

我的线程池大小设置为 5。即使所有触发器都在一个队列中并在 5 个批处理中进行处理，我的应用程序服务器也没有启动。如果我点击 url，我会得到服务不可用。有什么办法可以改变上述行为。我已经将指令误触发为“立即开火”。

# iphone - iOS应用程序中的气泡图

> ID：12743643
> 
> 赞同：0
> 
> 时间：2012-10-05T09:44:01.077
> 
> 标签：iphone, ios, graph, core-plot, bubble-chart

我需要在 iPad 应用程序中实现气泡图，每个气泡都具有用户交互（触摸事件）以导航到详细视图。

是否有任何框架或方法（如使用coreplot的条形图、饼图、折线图）？

我尝试手动实现，甚至对每个气泡使用 CGContextRef，如下所示

```
CGContextRef c = UIGraphicsGetCurrentContext();
UIColor *grayColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.5];
[grayColor set];
CGRect rectangle = CGRectMake(xaxis+2,yaxis+2,size-4,size-4);
CGContextSetLineWidth(c,4);
CGContextStrokeEllipseInRect(c, rectangle);
CGContextAddEllipseInRect(c, rectangle);
CGContextSetFillColorWithColor(c, [bubbleColor CGColor]);
CGContextFillPath(c); 
```

但无法通过用户交互（即触摸事件）裁剪边缘（因为这些气泡是 UIView 中的圆圈）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:30:35.890

您可以为此使用散点图。实现`-symbolForScatterPlot:recordIndex:`datasource 方法为每个绘图点提供自定义绘图符号。根据数据，根据需要改变符号的大小、形状、填充等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:51:34.437

试试[这个](http://www.cocoacontrols.com/platforms/ios/controls/aurosetteview)和[这个](http://www.cocoacontrols.com/platforms/ios/controls/dbtilebutton)。此外，您可以尝试[`OBShapedButton`](https://github.com/ole/OBShapedButton)使用您的图像。希望这可以帮助 ：）

# c# - 如何为 Metro 应用程序 c#、xaml 实现表单身份验证？

> ID：12743644
> 
> 赞同：1
> 
> 时间：2012-10-05T09:44:04.387
> 
> 标签：c#, xaml, winrt-xaml

我正在尝试开发一个 Metro 风格的应用程序，我必须使用表单身份验证使用他/她的 Live ID（例如 gmail 或 Hotmail）对用户进行身份验证。我可以在 Metro 应用程序中执行此操作吗？如果可以，如何实现它和任何特定站点我可以在哪里获得代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:51:16.483

查看此[应用程序和网站的单点登录](http://msdn.microsoft.com/en-us/library/live/hh826544.aspx)

> 由于 Windows 8 使用户能够使用 Microsoft 帐户登录到他们的设备，因此应用程序开发人员可以提供跨 Windows 应用商店应用程序和配套网站的单点登录体验。

# php - CodeIgniter 视图未加载

> ID：12743647
> 
> 赞同：0
> 
> 时间：2012-10-05T09:44:10.830
> 
> 标签：php, codeigniter, codeigniter-2

我有一个由其他开发人员编写的持续 CI v2.0.2 应用程序。

我首先创建了一个`trial`控制器：`controllers/trial/trial.php'。这个控制器中的代码是：

```
<h1>controller</h1>
<?php

class Trial extends CI_Controller {

    function index() {
        echo "this works";
        $this->load->view("trial/trial_view");
    }
} 
```

并且视图在`views/trial/trial_view.php`. 视图有一条简单的`<p>this is the view</p>`线。

现在，当我访问 URL 时，`http://localhost/ci/index.php/trial/trial`我得到的只是`<h1>`来自控制器的标签。如果我删除该标签，则什么都看不到，甚至连`echo`语句也看不到。

我得到的代码库是现在正在使用的应用程序的精确副本。我已经双重检查以确保文件夹结构也正确。

这里应该发生什么？我应该查看任何配置选项吗？

## 更新 - - - -

我搬进`trial.php`了`controllers`文件夹，又`trial_view.php`进了`views`文件夹。也对代码进行了适当的更改。但结果还是一样——`h1`我访问时只显示来自控制器的标签`http://localhost/ci/index.php/trial`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:46:55.550

`index`当您尝试访问`trial`不存在的控制器操作时，您的操作被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:45:16.513

将其更改为，

```
 function index() {
    echo "this works";
    $this->load->view("trial/trial_view");
} 
```

尝试将 trial.php 放在控制器文件夹内的试用文件夹外，然后返回发生的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:12:24.427

首先，停止使用 index 方法做任何事情。如果你的类叫做 Trial，你需要用 index 方法来做：

```
public function index()
{
    $this->trial();
} 
```

然后在称为试验的方法下做所有事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:56:13.327

尝试改变

```
function index() {
        echo "this works";
        $this->load->view("trial/trial_view");
    } 
```

至

```
public function index() {
        echo "this works";
        $this->load->view("trial/trial_view");
    } 
```

顺便说一句，尝试打开错误报告并查看是否抛出错误

**编辑**

顺便说一句，我使用相同设置的代码进行了测试。它在我的机器上工作

# c# - C# 版本的 CopyOnWriteArrayList

> ID：12743648
> 
> 赞同：2
> 
> 时间：2012-10-05T09:44:12.467
> 
> 标签：c#

我们在标准库中没有 C# 版本的[CopyOnWriteArrayList 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)是否有其他可用的开源库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T09:54:28.873

可以参考 C# 中的[SynchronizedCollection 类](http://msdn.microsoft.com/en-us/library/ms668265.aspx)，这个集合类似于 Java 中的一个 CopyOnWriteArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:46:30.137

根据您使用的 .NET 版本，您可以使用[.Net 4 中的线程安全集合类之一](http://msdn.microsoft.com/en-us/library/dd997305.aspx)。

# maven - 如何使用 pom 分离 JUnit 测试和 Selenium 测试

> ID：12743649
> 
> 赞同：3
> 
> 时间：2012-10-05T09:44:12.453
> 
> 标签：maven, selenium, junit, pom.xml

我有一个 pom.xml 粘贴在下面，我想知道如何修改它以使其可以说“mvn unittest”或“mvn seleniumtest”，以便能够分别运行这两种类型的测试。现在就像 POM 一样，如果我说“mvn test”，它会在我的项目中运行以“Test”结尾的测试，但我无法理解 pom 在哪里定义以及如何定义。

绒球：

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.magnus.unittest</groupId>
  <artifactId>unittestproject</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.9</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-java</artifactId>
      <version>2.6.0</version>
      <scope>compile</scope>
    </dependency>
  </dependencies>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Central Repository</name>
      <url>http://repo.maven.apache.org/maven2</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Central Repository</name>
      <url>http://repo.maven.apache.org/maven2</url>
    </pluginRepository>
  </pluginRepositories>
  <build>
    <sourceDirectory>C:\enhetstesting\unittestproject\src\main\java</sourceDirectory>
    <scriptSourceDirectory>C:\enhetstesting\unittestproject\src\main\scripts</scriptSourceDirectory>
    <testSourceDirectory>C:\enhetstesting\unittestproject\src\test\java</testSourceDirectory>
    <outputDirectory>C:\enhetstesting\unittestproject\target\classes</outputDirectory>
    <testOutputDirectory>C:\enhetstesting\unittestproject\target\test-classes</testOutputDirectory>
    <resources>
      <resource>
        <directory>C:\enhetstesting\unittestproject\src\main\resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>C:\enhetstesting\unittestproject\src\test\resources</directory>
      </testResource>
    </testResources>
    <directory>C:\enhetstesting\unittestproject\target</directory>
    <finalName>unittestproject-0.0.1-SNAPSHOT</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2-beta-5</version>
        </plugin>
        <plugin>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.0</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.4.1</version>
        <executions>
          <execution>
            <id>default-clean</id>
            <phase>clean</phase>
            <goals>
              <goal>clean</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-install</id>
            <phase>install</phase>
            <goals>
              <goal>install</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>default-resources</id>
            <phase>process-resources</phase>
            <goals>
              <goal>resources</goal>
            </goals>
          </execution>
          <execution>
            <id>default-testResources</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>testResources</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.10</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
              <goal>testCompile</goal>
            </goals>
          </execution>
          <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-jar</id>
            <phase>package</phase>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.7</version>
        <executions>
          <execution>
            <id>default-deploy</id>
            <phase>deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-site-plugin</artifactId>
        <version>3.0</version>
        <executions>
          <execution>
            <id>default-site</id>
            <phase>site</phase>
            <goals>
              <goal>site</goal>
            </goals>
            <configuration>
              <outputDirectory>C:\enhetstesting\unittestproject\target\site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
          <execution>
            <id>default-deploy</id>
            <phase>site-deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
            <configuration>
              <outputDirectory>C:\enhetstesting\unittestproject\target\site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <outputDirectory>C:\enhetstesting\unittestproject\target\site</outputDirectory>
          <reportPlugins>
            <reportPlugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-project-info-reports-plugin</artifactId>
            </reportPlugin>
          </reportPlugins>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <reporting>
    <outputDirectory>C:\enhetstesting\unittestproject\target\site</outputDirectory>
  </reporting>
</project> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T10:24:59.787

您可以使用配置文件来完成此操作。Maven 官方网站上有文档，但我喜欢 Sonatype 的免费在线书籍：[Maven: The Complete Reference - 5.3。配置文件激活](http://www.sonatype.com/books/mvnref-book/reference/profiles-sect-activation.html)

您将需要这样的东西（[请参阅有关测试排除的文档](http://maven.apache.org/plugins/maven-surefire-plugin/examples/inclusion-exclusion.html)）。

使用以下配置，您可以运行`mvn test -Pjava-tests`或`mvn -Psel-tests`（例如 - 您有多个配置文件激活选项）。

```
<profiles>
  <profile>
    <id>java-tests</id>
    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <configuration>
            <excludes>
              <exclude>path/to/selinum/tests/**</exclude>
            </excludes>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
  <profile>
    <id>sel-tests</id>
    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <configuration>
            <includes>
              <include>path/to/selinum/tests/**</include>
            </includes>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

请注意，这是一个很大的话题，上面的答案是为了让你走上正轨。如果您有后续问题，请考虑将它们作为新问题打开。祝你好运！

# asp.net - 分页后GridView失去排序？

> ID：12743653
> 
> 赞同：0
> 
> 时间：2012-10-05T09:44:34.053
> 
> 标签：asp.net

我从互联网上获得了以下代码。它工作正常。我也添加了分页。当我只是排序时，它工作正常。当我更改页面索引时，排序会丢失。

这是客户端代码，它使用与服务器端代码中的“GridView1_Sorting”方法链接的排序来设置每页 20 个项目的网格视图。

# 客户端

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="eno" AutoGenerateColumns="False" PageSize="20" AllowPaging="True" AllowSorting="True" OnSorting="GridView1_Sorting" CellPadding="4">
    <Columns>
        <asp:TemplateField HeaderText="Employee no" SortExpression="eno">
            <ItemTemplate>
                <%#Eval("eno")%>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Emp name" SortExpression="empname">
            <ItemTemplate>
                <%#Eval("empname")%>
            </ItemTemplate> 
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Salary" SortExpression="sal">
            <ItemTemplate>
                <%#Eval("sal")%>
            </ItemTemplate> 
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

现在服务器端代码：

# 服务器端

```
using System.Data.SqlClient;
using System.Configuration;
using System.IO;

public partial class _Default : System.Web.UI.Page
{
    SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["Con"].ConnectionString);
    SqlCommand sqlcmd;
    SqlDataAdapter da;
    DataTable dt = new DataTable();
    DataTable dt1 = new DataTable();

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            GridData();
        }
    }

    void GridData()
    {
        sqlcmd = new SqlCommand("select * from emp", sqlcon);
        sqlcon.Open();
        da = new SqlDataAdapter(sqlcmd);
        dt.Clear();
        da.Fill(dt);

        if (dt.Rows.Count > 0)
        {
            Session["dt"] = dt;
            GridView1.DataSource = dt;
            GridView1.DataBind();
        } 
    } 

    private string GVSortDirection
    {
        get { return ViewState["SortDirection"] as string ?? "DESC"; }
        set { ViewState["SortDirection"] = value; }
    }

    private string GetSortDirection()
    {
        switch (GVSortDirection)
        { 
            case "ASC":
                GVSortDirection = "DESC";
                break;

            //assign new direction as ascending order
            case "DESC":
                GVSortDirection = "ASC";
                break;
        }

        return GVSortDirection;
    }

    protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
    {
        DataTable dataTable = (DataTable)Session["dt"];
        if (dataTable != null)
        { 
            DataView dataView = new DataView(dataTable); 
            string sortDirection = GetSortDirection(); 
            dataView.Sort = e.SortExpression + " " + sortDirection; 
            GridView1.DataSource = dataView;
            GridView1.DataBind();
        }
    } 

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridData();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:52:50.400

当您分页时，将调用 PageIndexChanging 事件。这反过来运行 GridData() 过程，该过程将 gridview 的数据源设置为包含来自 emp 表的记录的数据表，没有特定的排序顺序。

您应该做的是获取您在 GridView1_Sorting 事件处理程序中编写的代码，并将其包含在 GridData 例程中，以便每当网格填充数据时 - 无论是第一次加载页面时，还是页面索引时更改或对 gridview 进行排序时 - gridview 基于已排序的数据视图，而不是未排序的数据表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:42:07.747

您使用 GetSortDirection 维护 SortDirection 的方式，以同样的方式维护 SortExpression。

快乐编码！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:58:41.080

看看这篇[文章](http://dotnetslackers.com/articles/gridview/Optimized-Paging-and-Sorting-in-ASP-NET-GridView.aspx)，愿你得到你想要的

# javascript - 排序后的 javascript 数组如何从比较器返回不正确的值？

> ID：12743654
> 
> 赞同：0
> 
> 时间：2012-10-05T09:44:35.593
> 
> 标签：javascript, sorting

假设我有一个项目列表，这些项目使用给定的比较器进行排序。我希望在排序为升序比较器(element[1], element[1+n]) 后，对于 n> 1 的所有值应该返回 -1，因为根据该比较器，元素 [1]

我正在执行自定义排序并发现排序后存在比较器（元素[1]，元素[1+n]）返回1的实例。当我查看实例时，我看到比较器给出了正确的输出，即元素[1]>元素[1+n]。我不明白在使用该比较器执行排序后会出现这种情况。

如果有人对我可能错过的微妙之处有任何想法，我会非常感谢他们的想法。另外，如果我能提供更多可能阐明的信息，请告诉我。

*编辑* 我认为这可能是一个更普遍的问题，但作为对 mplungjan 的回应，我在下面添加了自定义排序器。该排序适用于对象平面列表形式的分层数据集。每个对象都有一个 id，可能如下所示：0 表示根 1。0-0 表示其第一个孩子。第二个孩子0-1。等等

列表中的每个对象都有一个字段“parent”，该字段具有其父项的 id。本质上 data.sort 并没有做我认为应该做的事情。

```
function CurrencyTreeSorter(a, b) {

    a_id = a.id.split("-");
    b_id = b.id.split("-"); 

    if(a_id.length != b_id.length || a_id.slice(0, a_id.length-1).toString() != b_id.slice(0, b_id.length-1).toString()){
        var i = 0;
        while (i < a_id.length && i < b_id.length && a_id[i] == b_id[i]) {
            i++;
            }

        if (i == a_id.length || i == b_id.length){
            return a_id.length > b_id.length ? 1 : -1;
        }
        else{   
            while (a.level > i) {
                a = getParent(dataMap, a);
            }

            while (b.level > i) {
                b = getParent(dataMap, b);
            }
        }
    }

    var x, y;
    if (a[sortcol] == "-") {
        x = -1;
    }
    else {
        x = parseFloat(a[sortcol].replace(/[,\$¬£‚Ç¨]/g, ""));
    }

    if (b[sortcol] == "-") {
        y = -1;
    }
    else {
        y = parseFloat(b[sortcol].replace(/[,\$¬£‚Ç¨]/g, ""));
    }

    return sortdir * (x == y ? 0 : (x > y ? 1 : -1));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:35:06.807

事实证明这是 Chrome 的一个问题，[在此处](https://stackoverflow.com/questions/3195941/sorting-an-array-of-objects-in-chrome)和[此处](https://stackoverflow.com/questions/11832158/array-sort-working-differently-in-chrome-and-firefox-and-ie)进行了描述。从本质上讲，从比较器/比较器返回零是不安全的。

# c# - 垂直对齐asp面板

> ID：12743655
> 
> 赞同：2
> 
> 时间：2012-10-05T09:44:39.313
> 
> 标签：c#, asp.net, panel, vertical-alignment

我在 asp 页面中有一个面板，我想将图像添加到此面板，以便此图像位于面板的中心：

```
protected void Page_Load(object sender, EventArgs e)
{
    Panel panel = new Panel();
    panel.HorizontalAlign = HorizontalAlign.Center;  
    //here I want set verticalAlign for the panel

    Image image = new Image();
    image.imageURL = imageurl;
    panel.controls.add(image);
    this.form1.controls.add(panel);
} 
```

我尝试使用 CSS：

```
p.CssClass = "css1"; 
```

和CSS是：

```
<style type="text/css"> 
        .css1
        {
            vertical-align: middle;              
        }
</style> 
```

但这并没有给出结果。

那么，如何将图像定位在面板的中心（水平和垂直）？

请不要推荐

```
padding-top:20px; 
```

这会改变面板的高度。我必须不断保持面板的尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:47:00.433

一个面板只是呈现为一个 div，所以这个问题的答案应该是有用的：

[使用 CSS 3 垂直对齐](https://stackoverflow.com/questions/5412912/align-vertically-using-css-3) （特别是第二个答案，@j-man86，详细介绍了解决问题的两种方法）。

如果你只是想`vertical-align: middle;`工作，那么最简单的方法是添加`display: table-cell;`到相同的 css 声明中，但这不一定是垂直对齐的最佳 CSS 解决方案。

# sql - Visual Studio 数据库项目 - 在参考数据之上生成测试数据

> ID：12743657
> 
> 赞同：0
> 
> 时间：2012-10-05T09:44:41.047
> 
> 标签：sql, testing, continuous-integration, database-project

我正在向现有的 Visual Studio 2010 数据库项目添加持续集成测试。现在我们有一个构建，它部署了一个“空”数据库 [dbo].[MyDb]，其中仅包含所需的参考数据，例如语言环境和国家/地区。现在，这是使用包含在部署后 sql 构建任务中运行的插入语句的 sql 文件执行的。

我现在想添加另一个测试部署构建，它将部署到与 [dbo].[MyDb].[Test] 相同的暂存服务器上的另一个数据库，具有相同的参考数据，但生成的测试数据将具有参考的外键数据。然后针对它运行数据库集成测试。因为每次测试都需要恢复状态，所以需要尽可能快。

从我到目前为止的尝试来看，要使用 Visual Studio 的数据生成计划生成测试数据，似乎我需要将参考数据获取到数据绑定生成器可以读取的表单，以便它可以在保持参照完整性的方式。

我能想到的可能选项是：

*   以某种方式获取数据生成计划以读取参考 sql 文件？
*   将参考 sql 文件更改为 csv 文件并将原始构建更改为进行批量插入
*   组合构建，以便始终首先部署 MyDb 数据库，并将其设置为测试数据库的顺序数据绑定生成器源。

有没有人有更好的方法或可以指出一个好的指南？

我不是构建脚本方面的专家，所以想尽可能多地利用工具。我想将事物保留为 Visual Studio 数据库项目，但我也拥有 RedGate 的 SQL 工具的许可证，如果这样可以使测试更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:49:46.113

似乎数据库项目仍然不能很好地支持处理参考数据。巴克莱山对[这篇文章](http://blogs.msdn.com/b/bahill/archive/2009/04/01/maintaining-and-synchronizing-your-reference-data.aspx)的评论证实了这一点。

目前，我选择了拥有参考数据库并将其与顺序数据绑定生成器一起使用。由于它不会经常更改，因此我只是手动部署它，并且没有像我在其他地方看到的那样拥有一个完整的单独项目。

希望在某个时候将参考数据处理添加到 SQL Server Data Tools 中。

# javascript - json 对象到 javascript 全局引用

> ID：12743667
> 
> 赞同：0
> 
> 时间：2012-10-05T09:45:03.410
> 
> 标签：javascript, jquery, json

嗨，我有调用 json 的 ajax，我想让这个 json 对象成为一个 javascript 全局引用，以便我可以使用这个引用来访问 json 对象。这是代码。

```
var jsonData;

$.getJSON(url, function(json) {
 jsonData = json; /*i wanted to pass this json object to global reference*/
});
nextAlbum function(){
    console.log(jsonData.albums.length); /*I have to acces here*/
} 
```

您的帮助将不胜感激。这是我最新的代码。

```
var mysplitSlider = (function(){
var init, findTotalAlbums, countAlbum;
var jsonData;

return{
    init: function(url){
        $.getJSON(url, function(json) {
            jsonData = json;
        });
    },
    nextAlbum:function(){
        console.log(jsonData.albums.length);
    },
    previousAlbum:function(){}
}; 
```

})();

var url = "assets/images/detail_view_gallery/data.json";

mysplitSlider.init(url);

请帮助我，以便我可以访问 json 的引用变量/对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:49:38.967

修改后的代码：由于是异步调用，`jsonData`因此不会立即可用。`getJSON`并且您的函数`nextAlbum` 定义不正确。

```
 var jsonData ;
$.getJSON(url, function(json) {
 nextAlbum (json);
 jsonData = json; /*i wanted to pass this json object to global reference*/
});
function nextAlbum (json){
    console.log(json.albums.length); /*I have to acces here*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:48:23.630

如果我正确理解了您的问题，那么您将遇到`getJSON`.

由于`getJSON`是*异步*`jsonData`的，因此在异步调用收到响应并执行回调之前，您的变量将不包含任何数据。如果您在此之前尝试访问`jsonData`，您可能会遇到错误。

您需要将任何依赖的代码移到`jsonData`回调函数中。

* * *

请注意，以上假设您的语法错误只是创建问题的结果，而不是您实际代码的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:53:07.953

请记住，AJAX 是*异步*JavaScript 和 XML...

```
function nextAlbum(jsonData){
    console.log(jsonData.albums.length);
    /* If you want, add a global var to save json */
}

$.getJSON(url, nextAlbum); 
```

# typo3 - 排版 | 如何像 IF ELSE 条件一样写这个？

> ID：12743668
> 
> 赞同：0
> 
> 时间：2012-10-05T09:45:05.407
> 
> 标签：typo3, typoscript, templavoila

我是 Typo3 的新手，正在使用 TemplaVoila 建立一个站点。我得到了以下 TS（在 TV XML 内），它输出 2 组内容

```
10= RECORDS
10.source.current=1
10.tables = tt_content
10.wrap.required = 1
10.wrap = <!--TYPO3SEARCH_begin--> | <!--TYPO3SEARCH_end-->]]>

20 = CONTENT
20.table = tt_content
20.select {
  pidInList = 36
} 
```

第一组 (10) 是当前页面内容，第二组 (20) 从页面 ID 36 获取内容。目前两者都已打印，但我希望仅在 10 为空时打印 20。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:32:37.610

```
10.stdWrap.ifEmpty.cObject = CONTENT
10.stdWrap.ifEmpty.cObject {
  table = tt_content
  select.pidInList = 36
} 
```

没有测试，但应该工作。stdWrap 在 wrap 之后执行。所以在这种情况下，您不会设置搜索标记。

# visual-studio-2010 - 如何删除断点 Visual Studio Express

> ID：12743674
> 
> 赞同：0
> 
> 时间：2012-10-05T09:45:16.380
> 
> 标签：visual-studio-2010, breakpoints

我正在 Visual Studio 2010 express 中处理 C# 项目，我有一个断点，仅在我处于调试模式时才会显示，我可以将其删除，但一旦我再次启动调试模式，它就会再次显示. 始终在特定的代码行上，我试图将该行留空，然后跳到下一个。它没有出现，因为我在那条线之后评论了整个代码。

我在调试菜单中没有断点窗口（可能是因为它是快速版本）所以我无法访问“删除所有断点”功能。我必须对其中一个调试文件进行一些更改吗？哪一个？

谢谢

# safari - Opera 和 Safari 不显示 SVG 中的蒙版文本

> ID：12743684
> 
> 赞同：0
> 
> 时间：2012-10-05T09:46:13.520
> 
> 标签：safari, svg, opera, mask, jsfiddle

我试图在 SVG 中使用蒙版制作文本效果。在其他浏览器上一切都很好，但 Opera 和 Safari 根本不显示效果（请参见下图）。效果是字符内部的白色区域。

我假设 Opera 12.02 和 Safari 5.1.7 支持遮罩，因为[这个 W3 SVG 遮罩测试页面](http://www.w3.org/TR/SVG/images/masking/mask01.svg)在它们中正常显示。

我 jsfiddled 我有问题的页面：http: [//jsfiddle.net/pQ5Yj/](http://jsfiddle.net/pQ5Yj/)

使用以下代码创建掩码：

```
<defs>
  <text id="text" font-family="Times" font-size="480">Va</text>
  <mask id="myMask" maskUnits="objectBoundingBox">
    <use xlink:href="#text" fill="#FFFFFF" stroke="#000000" stroke-width="20" 
    stroke-linecap="square" stroke-linejoin="miter" stroke-miterlimit="40"/>
  </mask>
</defs>
<use x="40" y="370" xlink:href="#text" fill="white" stroke="black"
stroke-width="24" mask="url(#myMask)" stroke-linecap="square"
stroke-linejoin="miter" stroke-miter-limit="1000"/> 
```

**知道我的代码有什么问题，或者这是 Opera 和 Safari 中的某种错误吗？**

同样由于某种原因，当我使用 Opera 在 Jsfiddle 中按 Run 时，文本变为黑色。其他浏览器接受良好的运行。

![蒙面文本](../Images/3b3897755f1dcd2346111e0ddb4ce6fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:04:16.857

将其归档为 Opera 错误 CORE-48922。规范对生成的“附加变换”的影响有点不清楚，即 <use> 元素上的 x,y 属性对边界框的贡献。

无论如何，您可以通过不在 <use> 元素上使用 x,y 属性来解决此问题，而是将翻译向上移动到父 <g> 元素（从不要重复自己的角度来看也很好）。

所以，你最终应该得到的是[这样的 fiddle](http://jsfiddle.net/RnzPa/)。

# python - 如何使用 ladon 网络服务器进行跨脚本调用？

> ID：12743704
> 
> 赞同：0
> 
> 时间：2012-10-05T09:47:22.253
> 
> 标签：python, json, web-services, jsonp

我有一个用 Python 开发的网络服务，可以通过 Ladon 获得。

我使用来自 ladon [http://ladonize.org/index.php/Python_Example](http://ladonize.org/index.php/Python_Example)的 JSON 示例提供的 jsonwspclient.js 和 json2.js 。

我现在需要对此网络服务进行一些跨脚本调用，所以如果我很好地理解了区别，我需要切换到一些*JSONP*行为。

为此，我已经读到我需要添加一些[回调](https://stackoverflow.com/questions/11574850/jsonp-web-service-with-python)函数或类似的东西顺便说一句我不明白应该在哪里上瘾，以及它是否仍然可以与通过 JSON-WSP 加载的描述兼容（是某种 JSON *P* -WSP 可能？）

（另外，我应该为 Javasript JSON 部分切换到 jquery 之类的东西吗？）

我的第一次尝试以：

```
SyntaxError: JSON.parse: unexpected end of data 
```

我认为这是由于一些跨域 JS 限制（做它不跨域效果很好并且不会以这个错误结束）

另一种方式是：如何转换 JSON-WSP 描述并从[此处](http://api.jquery.com/jQuery.getJSON/)描述的简单 JSON 方式调用它？因为调用`client.loadDescription(muURL)`获取描述不能跨域完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:37:18.537

或者您只需在您的网络服务器上创建反向代理设置，确保您不必跨站点

1) 在 IIS 上设置反向代理： [http ://technet.microsoft.com/en-us/library/ee215194(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ee215194(v=ws.10).aspx)

你应该有一个看起来像这样的匹配规则：

```
<rule name="Reverse Proxy to MV-ID Services" stopProcessing="true">
  <match url="^service/(.*)" />
  <action type="Rewrite" url="http://ladonize.org/python-demos/{R:1}" />
</rule> 
```

2）在Apache2上设置反向代理： [http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

在您的 apache 站点配置中，您应该在站点配置中有类似的内容：

```
ProxyPass /service http://ladonize.org/python-demos
ProxyPassReverse http://ladonize.org/python-demos 
```

# php - wordpress 循环，每三篇文章应用新的东西

> ID：12743708
> 
> 赞同：0
> 
> 时间：2012-10-05T09:47:32.860
> 
> 标签：php, html, css, wordpress

我有这个循环，它基本上在页面上显示一个带有图像的块，该类`gallerypic`在右侧有 20px 的边距，它也有规则`float:left;`，问题是每次创建第三个 div 时它都会从一个新的线，因为边距将它推到那里。所以理想情况下，我希望每三篇文章没有保证金，并应用一个 div`gallerypicright`或其他东西。

我想知道有人对此有解决方案吗？可能是一种更简单的方法，它可以在第三次发生时简单地阻止保证金发生？我需要另外两个的边距，因为它在柱子之间创造了一个整齐的间隙。

```
<?php 
            $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
            $archive_query = new WP_Query('cat=14&showposts=14&paged=' . $paged);
            $id = get_the_ID();

while ($archive_query->have_posts()) : $archive_query->the_post(); ?>

                     <div class="events">
        <div class="gallerypic"><div class="limerickguideblockheader"><p><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?>
        </div>
        <div class="gallerypiccontainer"><a href="<?php the_permalink(); ?>" >
         <?php echo get_the_post_thumbnail( $id, 'gallery-thumb', $attr ); ?> </a></div>
         </div> 
  </div>
            <?php endwhile; ?> 
```

编辑：一张图片描绘了 1000 个字，这里是到目前为止的链接，有三个帖子...... [http://limerickfc.hailstormcommerce.com/cms/?page_id=2466](http://limerickfc.hailstormcommerce.com/cms/?page_id=2466)

如果可能的话，通过 CSS 的方法会更好。干杯阿德里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T09:55:22.443

试试下面的代码。

```
<style>
.gallerypicright {
  margin: 0;
}
</style>
...
<?php
$count = 0;
while ($archive_query->have_posts()) : $archive_query->the_post(); 
  $count++;
  $third_div = ($count%3 == 0) ? 'gallerypicright' : '';
?>
...
<div class="gallerypic <?php echo $third_div; ?>"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:14:39.107

如果你想要一个纯 CSS 解决方案，你可以尝试使用

```
.gallerypic:nth-child(3n + 1) {
    margin:0;
} 
```

`n`是每个元素都会上升的计数器。计数器 ( `n`) 从 开始，`0`但页面上的元素从 开始`1`，因此`3n + 1`每个`3 * n + 1`元素的方法，例如：

元素**1** (3 * 0 + 1)、**4** (3 * 1 + 1)、**7** (3 * 2 + 1) 等。

此解决方案仅在 CSS3 中可用，因此较旧的浏览器将没有它。（见：[http](http://caniuse.com/#search=nth-child) ://caniuse.com/#search=nth-child ）。

请注意，`:nth-child`计算所有子项，因此您应该将事件分组在一个 div 中：

```
<div class="container">
    <div class="gallerypic">...</div>
    <div class="gallerypic">...</div>
    <div class="gallerypic">...</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:20:12.583

您必须在循环之后计算您的帖子，您必须将模块按 3 来计算帖子总数并在给定帖子中应用正确的课程，例如

if ($cnt%3 == 0){ $class = 'right'}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:20:49.327

您可能会尝试在容器上添加平衡负右边距的技巧，所以在您的情况下，也许

```
div.events { margin-right: -20px; } 
```

或者，如果您可以处理稍微不完整的浏览器支持（我认为仅 IE9+，在其他浏览器中更好），也许可以使用 nth-child：

```
.gallerypic:nth-child(3n+3) { margin-right: 0px; } 
```

# c++ - 为什么最后一个写入文件的对象在 cpp 中重复以及如何解决它

> ID：12743710
> 
> 赞同：-4
> 
> 时间：2012-10-05T09:47:37.370
> 
> 标签：c++, file

> **可能重复：**
> [从文本文件中读取直到 EOF 重复最后一行](https://stackoverflow.com/questions/21647/reading-from-text-file-until-eof-repeats-last-line)

我正在使用以下代码将数据写入文件

```
//temp is class object
fstream f;
f.open ("file", ios::in|ios::out|ios::binary);
for(i=0;i<number_of_employees ;++i)
{
temp.getdata();
f.write( (char*)&temp,sizeof(temp));
}
f.close(); 
```

temp 是以下类的对象

```
class employee
 {
 char eno[20];
 char ename[20];
 char desg[20];
 int bpay;
 int ded;
 public:
 void getdata();
 void displaydata();
} 
```

但是当我使用此代码写入数据时，我发现写入文件的最后一个对象被写入了两次。

我从文件中读取的功能是

```
fstream f;
f.open ("file", ios::in|ios::out|ios::binary);
while(f)
{
f.read((char*)&temp, sizeof(temp));
temp.displaydata();
}
f.close(); 
```

以下显示了我的文件被读取到 eof 时的情况

```
Number       :1
Name       :seb
Designation:ceo
Basic Pay  :1000
Deductions :100

Number       :2
Name       :sanoj
Designation:cto
Basic Pay  :2000
Deductions :400

Number       :2
Name       :sanoj
Designation:cto
Basic Pay  :2000
Deductions :400 
```

这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:07:53.010

如果问题是重复输出，很可能是你循环的方式造成的。请发布确切的循环代码。

如果循环基于您从 getdata() 接收的数据，您还需要仔细查看您输入的内容。你可能没有收到你所期望的。

当然，如果没有真正的代码，这些几乎只是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:25:15.810

问题的原因很简单：在使用结果之前，您没有检查读取是否成功。最后一次读取遇到文件结尾，在不更改变量值的情况下失败，然后显示旧值。准确地做你想做的事情的正确方法是：

```
while ( f.read( reinterpret_cast<char*>( &temp ), sizeof( temp ) ) ) {
    temp.displaydata();
} 
```

Exactly what you're trying to do, however, is very fragile, and could easily break with the next release of the compiler. The fact that your code needs a `reinterpret_cast` should be a red flag, indicating that what you're doing is extremely unportable and implementation dependent. What you need to do is first, define a binary format (or use one that's already defined, like XDR), then format your data according to it into a `char` buffer (I'd use `std::vector<char>` for this), and finally use `f.write` on this buffer. On reading, it's the reverse: you read a block of `char` into a buffer, and then extract the data from it. `std::ostream::write` and `std::istream::read` are *not* for writing and reading raw data (which makes no sense anyway); if they were, they'd take `void*`. They're for writing and reading pre-formatted data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:49:30.020

将对象写入文件`write((char*)object, sizeof(object))`是在找麻烦！

`write`而是为该类编写一个专用函数：

```
class employee {
  ...
  void write(ostream &out) {
    out.write(eno, sizeof(eno));
    out.write(ename, sizeof(ename));
    out.write(desg, sizeof(desg));
    out.write((char*)&bpay, sizeof(bpay));
    out.write((char*)&ded, sizeof(ded));
  }
  void read(istream &in) {
    in.read(&eno, sizeof(eno));
    in.read(&ename, sizeof(ename));
    ...
    in.read((char*)&bpay, sizeof(bpay));
    in.read((char*)&ded, sizeof(ded));
  }

}

ostream &operator <<(ostream &out, employee &e) {
  e.write(out);
  return out;
}
istream &operator >>(istream &in, employee &e) {
  e.read(in);
  return in;
} 
```

完成后，您可以使用：

```
f << temp; 
```

将您的员工记录写入文件。

但请注意，即使这样也不是很好，因为至少就整数而言，我们变得非常依赖平台，它依赖于 int 的*大小*，以及 int 的字节序。

# wordpress - 如何更改wordpress url中的类别？

> ID：12743714
> 
> 赞同：0
> 
> 时间：2012-10-05T09:47:42.710
> 
> 标签：wordpress, url-rewriting

例如，我有

```
http://mysite.com/category/sport?post_type=question = 
```

至

```
http://mysite.com/sport/question 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:42:33.783

更改永久链接表单管理面板。![在此处输入图像描述](../Images/d6782e09bcd48af85153d1e913693cfc.png)

默认情况下，永久链接是默认的，您必须选择 POST NAME 并单击 SAVE 按钮...

将以下代码添加到您的 .htaccess 文件中

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

确保启用了 mod_rewrite 模块。

# html - ie8 中 CSS3 Pie 与 Wordpress 的集成不起作用

> ID：12743719
> 
> 赞同：0
> 
> 时间：2012-10-05T09:47:45.457
> 
> 标签：html, wordpress, css, css3pie

使用border-radius 我正在创建circlce 来支持border-radius 我正在使用CSS3 pie，然后它也无法正常工作。
我将 CSS3 pie 文件放在我的主题文件夹中并`style.css`编写代码：

```
#sidebar {
 width:140px;
 height:140px;
 margin:0 auto;
 -moz-border-radius: 70px;
 -webkit-border-radius: 70px;
 border-radius: 70px;
 behavior: url(PIE.htc);
 background-color:#fff;
 position:relative;
 z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:38:32.827

使 pie 的 URL 成为绝对的最简单的技巧不是吗？

```
#sidebar {
 width:140px;
 height:140px;
 margin:0 auto;
 -moz-border-radius: 70px;
 -webkit-border-radius: 70px;
 border-radius: 70px;
 behavior: url(http://yoursite.com/wp-content/themes/themename/css/PIE.htc);
 background-color:#fff;
 position:relative;
 z-index: 0;
} 
```

我不得不在一个永远不会使用相对路径的恼人安装上这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:50:44.643

.htc 文件的路径需要相对于站点的根目录。

CSS 路径是相对于样式表的。微软再次成为害虫。

将 PIE.htc 文件移动到站点的根目录，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:30:22.877

您需要将 pie.htc 放在根目录中。像这样的东西，`www.domainname.com/PIE.htc`或者如果您正在本地机器上开发，那么`http://localhost/[your installation folder]/PIE.htc`.

希望这可以帮助！

# c# - 在 Windows 8 应用程序中使用键盘箭头在 GridView 之间导航

> ID：12743720
> 
> 赞同：0
> 
> 时间：2012-10-05T09:47:46.933
> 
> 标签：c#, xaml, gridview, windows-8, winrt-xaml

我有几个 GridViews 的应用程序布局，现在 GridViews 之间的导航是使用 TAB 键完成的，并且您使用箭头在每个 GridViews 内导航。我想做的是：当我在一个 GridView 的边缘元素上时，按箭头键转到另一个 GridView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:54:00.717

这是 100% 可能的，但需要 100% 的代码。如果您的网格项目数量是动态的，那么逻辑就复杂得多。但就您而言，我知道这样做的应用程序。他们每个人都推出了自己的解决方案来检测键盘箭头并根据网格中的选定项目进行计算。

这就是为什么我们是开发人员，对吧？用代码解决问题！

祝你好运！

# iphone - XCode 正在尝试加载我从项目中删除的 NIB 文件

> ID：12743721
> 
> 赞同：5
> 
> 时间：2012-10-05T09:47:50.747
> 
> 标签：iphone, objective-c, ios

我开始使用 NIB 文件处理视图，并决定将其从我的项目中删除，以便以编程方式构建它。在我的任何代码中都没有提到对 NIB 文件的假定调用，并且 .XIB 在任何应用程序目录中的任何地方都不存在。这是调试控制台向我抛出的确切错误。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:      
'-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "GESplitMainViewController"
nib but the view outlet was not set.' 
```

我无法理解为什么 xcode 仍在尝试加载 NIB。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T09:56:56.280

首先，如果您将 nil 作为第一个参数传递，则默认[实现](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName:bundle:)在捆绑包中`initWithNibName:bundle`搜索与视图控制器的类具有相同名称的 nib，这就是您的应用程序尝试加载的原因。

它找到一个的事实可能是因为您曾经在项目中拥有的 .xib 仍然包含在模拟器正在运行的包中。Xcode 习惯于将已删除的资源留在模拟器包中，即使您从项目中删除它们也是如此。

如果您从模拟器中删除应用程序，清理您的 Xcode 项目并再次运行，它应该会停止尝试加载 nib。

尽管这是您的应用程序从 nib 加载的原因，但这并不是它崩溃的原因。崩溃是因为您使用的旧 .xib 没有连接到视图控制器的视图出口的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:56:00.587

如果您没有在应用程序的任何地方使用 nib 名称，请先删除应用程序，清理您的构建并对其进行测试，希望这可以解决您的问题..

# php - 从父/子数组列表中获取子

> ID：12743722
> 
> 赞同：-3
> 
> 时间：2012-10-05T09:48:06.750
> 
> 标签：php

我有一个关于如何从父/子数组列表中获取某些字段的严重问题

我的列表 ：

```
Array
(
[356] => Array
    (
        [label] => Monde entier
        [childrens] => Array
            (
                [355] => Array
                    (
                        [label] => International (hors U.E)
                        [childrens] => Array
                            (
                            )

                    )

                [354] => Array
                    (
                        [label] => Europe
                        [childrens] => Array
                            (
                                [353] => Array
                                    (
                                        [label] => France entière
                                        [childrens] => Array
                                            (
                                                [146] => Array
                                                    (
                                                        [label] => Nord
                                                        [childrens] => Array
                                                            (
                                                                [161] => Array
                                                                    (
                                                                        [label] => Champagne-Ardenne
                                                                        [childrens] => Array
                                                                            (
                                                                                [258] => Array
                                                                                    (
                                                                                        [label] => Ardennes
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [260] => Array
                                                                                    (
                                                                                        [label] => Aube
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [302] => Array
                                                                                    (
                                                                                        [label] => Marne
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [303] => Array
                                                                                    (
                                                                                        [label] => Haute-Marne
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                            )

                                                                    )

                                                                [169] => Array
                                                                    (
                                                                        [label] => Nord-Pas-de-Calais
                                                                        [childrens] => Array
                                                                            (
                                                                                [310] => Array
                                                                                    (
                                                                                        [label] => Nord
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [313] => Array
                                                                                    (
                                                                                        [label] => Pas-de-Calais
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                            )

                                                                    )

                                                                [173] => Array
                                                                    (
                                                                        [label] => Picardie
                                                                        [childrens] => Array
                                                                            (
                                                                                [252] => Array
                                                                                    (
                                                                                        [label] => Aisne
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [311] => Array
                                                                                    (
                                                                                        [label] => Oise
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [331] => Array
                                                                                    (
                                                                                        [label] => Somme
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                            )

                                                                    )

                                                            )

                                                    )

                                              ......

                                                [152] => Array
                                                    (
                                                        [label] => Dom-Tom
                                                        [childrens] => Array
                                                            (
                                                                [178] => Array
                                                                    (
                                                                        [label] => Dom-Tom
                                                                        [childrens] => Array
                                                                            (
                                                                                [347] => Array
                                                                                    (
                                                                                        [label] => Guadeloupe
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [348] => Array
                                                                                    (
                                                                                        [label] => Martinique
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [349] => Array
                                                                                    (
                                                                                        [label] => Guyane
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [350] => Array
                                                                                    (
                                                                                        [label] => Réunion
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                                [352] => Array
                                                                                    (
                                                                                        [label] => Autres DOM-TOM 
                                                                                        [childrens] => Array
                                                                                            (
                                                                                            )

                                                                                    )

                                                                            )

                                                                    )

                                                            )

                                                    )

                                            )

                                    )

                            )

                    )

            )

    ) 
```

)

所以我想创建一个函数来返回一个带有这样列表的数组：

![在此处输入图像描述](../Images/842aee1a9ea63d9024e351395429f587.png)

和我的功能：

```
public function getListArray(array $config['place']) {

.....

return $result;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:17:30.517

这应该这样做

```
function getListArray($array) {
  static $level = -1;
  static $result = array();
  $level++;
  foreach ($array as $arr) {
    $result[] = str_repeat ('-', $level).$arr['label'];
    if (is_array($arr['childrens'])) {
      getListArray($arr['childrens']);
    }
  }
  $level--;

  return $result;
} 
```

# c# - 对 ASP.NET 处理程序的 JQuery ajax 调用总是返回错误

> ID：12743724
> 
> 赞同：3
> 
> 时间：2012-10-05T09:48:20.230
> 
> 标签：c#, jquery, asp.net, ajax

我正在为处理并向轮询客户端发送通知的 asp.net 处理程序编写客户端。我每 10 秒用 jquery 进行一次 ajax 调用，等待通知。问题是每次我将响应发送回客户端时，它总是调用错误回调。使用提琴手，我看到 json 响应以状态 200 到达客户端，但在萤火虫中，请求一直在等待。

客户：

```
function poll(){

$.ajax({ 
        url: "http://localhost:53914/NotificationChecker.ashx",      
        data: { userName: "ggyimesi" },
        type: 'POST',
        success: function(data){
            alert("asd");
            $('div#mydiv').text(data.Text);
            },
        complete: poll, 
        error: function(data){alert(data.status);},
        timeout: 15000 });
}

 $(document).ready(function(){
  poll();}
  ); 
```

服务器：

```
Response response = new Response();
response.Text = this.MessageText;
response.User = Result.AsyncState.ToString();
string json = JsonHelper.JsonSerializer<Response>(response);
Result.Context.Response.ContentType = "application/json";
Result.Context.Response.Write(json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:22:55.530

我确实发现了问题。问题是我从未托管在 Web 服务器上的本地计算机启动客户端 html，这导致了问题。将其添加到本地 Web 服务器后，原始代码按原样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:03:21.373

我认为您的 ajax 调用缺少以下内容：

```
 dataType: 'json',
    contentType: "application/json; charset=uft-8", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:04:25.740

试试这个：

```
$.ajax({ 
        url: "/NotificationChecker.ashx",
        dataType: 'json',
        contentType: "application/json; charset=uft-8",      
        data: { userName: "ggyimesi" },
        type: 'POST',
        success: function(data){
            alert("asd");
            $('div#mydiv').text(data.Text);
            },
        complete: poll, 
        error: function(data){alert(data.status);},
        timeout: 15000 });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:36:22.473

我认为您的问题是您像这样传递您的用户名

```
data: { userName: "ggyimesi" } 
```

我认为你应该这样做

```
data: '{userName:"' + ggyimesi + '"}' 
```

你可以添加更多这样的

```
 type: "POST",
 url: "NotificationChecker.ashx",
 contentType: "application/json; charset=utf-8",
 dataType: 'json', 
```

# blackberry - 如何使用黑莓中的自定义标签字段在多行中显示文本？

> ID：12743726
> 
> 赞同：3
> 
> 时间：2012-10-05T09:48:23.083
> 
> 标签：blackberry, labelfield

如何在黑莓中使用自定义标签字段以多行显示文本？当我使用以下代码时，我可以显示具有所需字体大小的标签，但是问题是当范围的宽度受到限制时，文本会被截断并且不完全显示，标签的其余部分也不会显示在下一行。

任何帮助在这里表示赞赏。

以下是我的自定义标签字段代码。

```
public class GrayBgLabelField extends LabelField {  

    private int width = Display.getWidth();
    private int height = 40;
    private String label;   
    private Font font;

    public GrayBgLabelField(){
        super();
    }

    public GrayBgLabelField(String label, int fieldWidth){
        super(label, 0 );
        this.label = label;
        width = fieldWidth;     
    }

    public GrayBgLabelField(String label, int fieldWidth , long style){
        super( label, style );
        this.label = label;
        width = fieldWidth;     
    }

    public GrayBgLabelField(String label, int fieldWidth , int fieldHeight){

        this(label,fieldWidth);
        this.label = label;
        height = fieldHeight;
    }

    public GrayBgLabelField(String label, int fieldWidth , int fieldHeight, long style){

        super( label, style );
        this.label = label;
        width = fieldWidth;
        height = fieldHeight;
    }

    protected void layout( int maxWidth, int maxHeight)
    {         
        super.layout( width, height);  
        setExtent( width, height);
    }

    protected void paint(Graphics g) {

        if(font !=null){
            g.setFont(font);
        }

        if (label.length() != 0) {          
            g.drawText(label, width/30, height/4);
        }
        g.setColor(Color.BLACK);

    }

    public void setFont(int f){
        font = this.getFont().derive(f);        
    }

    public void setFont(Font font){
        this.font = font;
    }

    protected void paintBackground(Graphics g) {
        int oldColor = g.getColor();
        try {
            g.setColor(0xF5F6F8);  // Gray-DDDDDD color code.
            g.fillRect(0, 0, getWidth(), getHeight());          
        } finally {
            g.setColor(oldColor);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T05:27:11.083

覆盖控制自定义字段宽度和高度的方法。

这是教程：[“如何创建自定义字段”](http://docs.blackberry.com/en/developers/deliverables/11958/Create_a_custom_field_508117_11.jsp)

当您更改标签字段文本时，通过`invalidate()`方法使其无效，以在屏幕上重绘字段内容。

# android - 如何使用 Google App 或 GPS 获取当前位置？

> ID：12743728
> 
> 赞同：-5
> 
> 时间：2012-10-05T09:48:26.643
> 
> 标签：android, google-maps, gps

> **可能重复：**
> [如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

您好，我是 Android 开发的新手。我正在开发 android 应用程序。我想知道如何使用谷歌地图或 GPS 获取当前位置地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:21:02.550

试试下面的链接：

[http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

它为我工作。

# doctrine-orm - 复合键和外键作为主键学说 2 + zend 框架 2

> ID：12743733
> 
> 赞同：0
> 
> 时间：2012-10-05T09:48:55.707
> 
> 标签：doctrine-orm, zend-form, zend-framework2

我一直想知道为什么我的映射和控制器操作不起作用。为此，我需要参考我之前的帖子，其中我描述了我的实体和数据库架构，可以在[此处](https://stackoverflow.com/questions/12693023/save-entities-in-database-using-one-to-many-relationship-using-doctrine-2-and-ze)找到。我需要开始一个新帖子，因为没有进一步的更新，我认为这是引起 Doctrine + Zend Pros 关注的唯一方法。

如上一篇文章所述，我有一个 Zend 表单，用户可以输入 teamId 和 teamName，此外他还可以从表单的下拉列表中选择多个玩家，并可以将玩家分配到团队中。所以基本上这是我用 Doctrine 和 Zend 实现的目标。为此，我编写了上一篇文章中描述的实体，现在我想从我的控制器中添加代码来持久化实体。

控制器：

```
 public function addAction()
    {
        $form = new TeamForm($this->getEntityManager());

        $form->get('submit')->setAttribute('value', 'Add');

        $request = $this->getRequest();

        if ($request->isPost())
        {
            $team = new Team();
            $player = new Player();
            $teamPlayers = new TeamPlayer();

            $form->setInputFilter($typeset->getInputFilter());

            $form->setData($request->getPost());

            if ($form->isValid())
            {
                $team->populate($form->getData());

                $teamPlayers->setPlayer($player);
                $teamPlayers->setTeam($team);

                $this->getEntityManager()->persist($teamPlayers);

                $this->getEntityManager()->flush();

               //Reroute to the index page once the data is successfully added
            }
        }
        //return form array
        return array(
            'form' => $form
            );
    } 
```

所以这基本上就是我在控制器中将实体保存到两个表（团队表和团队玩家表）中所做的事情，因为玩家表已经填充了数据。所以我想将球员添加到球队并在这两个表中分配这些值。

现在我可以看到我的表单，当我输入数据并按下提交时，什么也没有发生，我可以看到没有任何操作的表单。当数据成功保存到数据库中时，我将其重新路由到未发生的索引页面。

任何帮助将不胜感激，指出我在映射部分或控制器端犯的错误。

官方文档，尤其是来自 Doctrine 2 的文档过于全球化，对我的要求来说特别不明确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:57:56.373

让我们尝试通过逐步更新此答案来解决它：

第1步：你的话暗示我，你可能在验证中遇到了一些问题，所以让我们检查一下你是否通过了这个`$form->isValid()`

```
 if ($form->isValid())
            {
                $team->populate($form->getData());
                $teamPlayers->setPlayer($player);
                $teamPlayers->setTeam($team);
                $this->getEntityManager()->persist($teamPlayers);
                $this->getEntityManager()->flush();
               //Reroute to the index page once the data is successfully added
            }else{
         var_dump($form->getMessages());

} 
```

我还可以建议您使用教义命令行：`doctrine orm:validate-schema`，此命令将帮助您检查您的实体映射是否正常以及您的数据库映射是否也可以，我认为调试您的教义2实体很方便 

ps：我还没有深入阅读你的实体

# android - Android：补间动画：移动 ImageView

> ID：12743734
> 
> 赞同：0
> 
> 时间：2012-10-05T09:48:57.183
> 
> 标签：android, animation, tween

我在android中的补间动画有问题，我尝试将一个`ImageView`项目从屏幕中心移动到屏幕顶部，但在变换结束后`ImageView`返回到第一个位置！我使用这段代码：

```
 <?xml version="1.0" encoding="utf-8"?>
       <translate 
        xmlns:android="http://schemas.android.com/apk/res/android"
         android:interpolator="@android:anim/bounce_interpolator"
         android:fromYDelta="0%"
         android:toYDelta="-1500%"
         android:duration="3000"
         android:startOffset="3000">
         </translate>

private void RunAnimations() {

    Animation animation = AnimationUtils.loadAnimation(this, R.anim.move_up_maxname);
    animation.reset();
    ImageView maxName = (ImageView) findViewById(R.id.imageView1);
    maxName.clearAnimation();
    maxName.startAnimation(animation);
} 
```

谁能帮我？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:58:15.010

你需要看看 setFillAfter：

> 如果 fillAfter 为 true，则此动画执行的转换将在完成后持续存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T09:50:21.277

使用[AnimationListener](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)并在 onAnimationEnd() 中更改 ImageView（最后一个点）的位置。

```
animation.setAnimationListener(new AnimationListener() {

   public void onAnimationStart(Animation anim)
   {};

   public void onAnimationRepeat(Animation anim)
   {};

   public void onAnimationEnd(Animation anim)
   {
     //Change imageview position using LayoutParameters
   };
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T12:08:01.747

添加线动画.setFillAfter(true);

# crystal-reports - 将水晶报告运行总字符串转换为数字时出现问题

> ID：12743736
> 
> 赞同：0
> 
> 时间：2012-10-05T09:49:06.117
> 
> 标签：crystal-reports, type-conversion, crystal-reports-xi, cumulative-sum

我在将运行总计字符串转换为数字时遇到问题。

运行总计设置为检索包含结果的字段的最大值。它随着组的变化而重置，并通过公式进行评估，以便仅使用特定测试的结果。
结果数据库字段是一个字符串，因为在数据库中有带有文本结果的测试以及带有数字结果的测试。我过滤掉的测试只有数字结果（保存为字符串）。

运行总计工作正常并给出正确的结果，但我想将其从字符串更改为数字，以便能够设置小数位数并在报告中使用舍入，这就是我的问题开始的地方。

*   据我所知，在这种情况下无法使用格式字段。（这是合理的，因为它是一个字符串字段。）
*   我尝试使用具有以下公式的公式字段：

    ```
    if isNumeric({#P-LDL}) then toNumber({#P-LDL}) 
    ```

    但是即使字符串是像“2.36”或“3.74”（不带引号）这样的好东西，所有非空值也会返回0.00。

*   我还尝试过在组头中重置全局变量的老派方法，当带有正确测试的帖子出现时，在详细信息部分为其分配一个值，然后最终将其显示在组页脚中，但我得到了相同的 0.00 结果。我已经尝试使用数字全局变量并在详细信息级别进行转换，并使用字符串变量并在页脚级别进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:30:38.820

解决了它：

```
if NumericText(Replace({#P-LDL}, ".", ",")) then
    ToNumber(Replace({#P-LDL}, ".", ",")) 
```

愚蠢的地方...

# css - 从底部开始渲染水平列表项

> ID：12743743
> 
> 赞同：0
> 
> 时间：2012-10-05T09:49:27.040
> 
> 标签：css, list

如何创建一个多行无序列表，其底行包含列表项的全宽？

通常它以这种方式呈现：

> 项目 1 项目 2 项目 3 项目 4 项目 5 项目 6 项目 7
> 
> 项目 8 项目 9

我怎样才能实现以下目标？

> 项目 8 项目 9
> 
> 项目 1 项目 2 项目 3 项目 4 项目 5 项目 6 项目 7

我在 CSS 中尝试过的是：

```
.footer { width: 500px; overflow: hidden; background-color:#ccc; }
.footer ul { list-style: none; position: relative; float: left; display: block; left: 50%; }
.footer ul li { position: relative; float: left; display: block; right: 50%; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:41:45.967

如果没有绝对定位元素，无序列表就不能做你想做的事。元素只能按照它们在 HTML 中呈现的顺序出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:11:24.253

也许您可以尝试将 ul 渲染为“显示：表格单元格”，因此您可以使用“垂直对齐：底部” - 但我不知道它是否可行。我已经用 DIV-Tags 成功地做到了这一点。记住也要渲染“li”-Tags，可能是“display：inline”......祝你好运！

* * *

好的，它起作用了:)

```
<ul style="display: table-cell; width: 200px; height: 250px; vertical-align: bottom;">
<li>A</li>
<li>B</li>
<li>C</li>
</ul> 
```

会给你一个列表，它从 ul 的定义区域（宽 x 高）的底部开始。

注意：如果“ul”具有“位置：绝对”属性，则它不起作用。如果需要，请尝试包装另一个元素，例如 ul 周围的“div”。

# java - 查找数组中元素周围的元素

> ID：12743748
> 
> 赞同：15
> 
> 时间：2012-10-05T09:50:01.180
> 
> 标签：java, arrays, multidimensional-array

我有一个多维数组，我想获取该数组中特定元素周围的元素。

例如，如果我有以下内容：

```
[[1,2,3,4,5,6]
 [8,9,7,5,2,6]
 [1,6,8,7,5,8]
 [2,7,9,5,4,3]
 [9,6,7,5,2,1]
 [4,7,5,2,1,3]] 
```

如何找到上述任何元素周围的所有 8 个元素？以及如何处理边缘的元素？

我想出的一种方法是，为此编写一个 9 行代码，这很明显，但是有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T10:01:39.137

您可以在表单中使用“方向数组”

```
[[-1,-1], [-1,0],[1,0]..and so on] 
```

以及获取点坐标并遍历方向数组的方法->将方向数添加到坐标，检查索引是否超出范围并收集结果。像这样的东西：

```
private static int[][] directions = new int[][]{{-1,-1}, {-1,0}, {-1,1},  {0,1}, {1,1},  {1,0},  {1,-1},  {0, -1}};

static List<Integer> getSurroundings(int[][] matrix, int x, int y){
    List<Integer> res = new ArrayList<Integer>();
    for (int[] direction : directions) {
        int cx = x + direction[0];
        int cy = y + direction[1];
        if(cy >=0 && cy < matrix.length)
            if(cx >= 0 && cx < matrix[cy].length)
                res.add(matrix[cy][cx]);
    }
    return res;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T09:56:22.733

**对于 (i, j) ->**

```
 (i - 1, j - 1)
              (i - 1, j)
              (i - 1, j + 1)

              (i, j - 1)
              (i, j + 1)

              (i + 1, j - 1)
              (i + 1, j)
              (i + 1, j + 1) 
```

现在，在边缘，您可以检查`num % row == 0`，然后是在行边缘...，然后是 ，`num % col == 0`然后是它的列边缘。

**以下是您可以继续的方法： -**

给定一个索引.. 您可以在与for 、 then和 then`(i, j)`相邻的行中找到元素。（**注意**：-对于索引，您只需要访问，并且）`j``i - 1``i``i + 1`**`i``j - 1``j + 1`**

 **随后，您还可以检查`row edge`and `column edge`..

在这里，您可以查看下面的代码，它是如何发生的：-

```
 // Array size
    int row = 6;
    int col = 6;
    // Indices of concern
    int i = 4;
    int j = 5;

    // To the left of current Column
    int index = i - 1;
    for (int k = -1; k < 2; k++) {
        if (index % row > 0 && ((j + k)  % col) > 0) {
            System.out.println(arr[index][j + k]);
        }
    }

    // In the current Column
    index = i;

    // Increment is 2 as we don't want (i, j)
    for (int k = -1; k < 2; k = k + 2) {            
        if (index % row > 0 && ((j + k)  % col) > 0) {
            System.out.println(arr[index][j + k]);
        }
    }

    // To the right of current Column
    index = i + 1;
    for (int k = -1; k < 2; k++) {
        if (index % row > 0 && ((j + k)  % col) > 0) {
            System.out.println(arr[index][j + k]);
        }

    } 
```

**更新**： - 上面的代码可以进一步简化.. 但我把这个任务留给你.. **提示**： - 你可以从那里减少一个 for 循环..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:50:19.527

```
for (i = 0; i < array.length; i++) {
            for (j = 0; j < array[i].length; j++) {
                for (x = Math.max(0, i - 1); x <= Math.min(i + 1, array.length); x++) {
                    for (y = Math.max(0, j - 1); y <= Math.min(j + 1,
                            array[i].length); y++) {
                        if (x >= 0 && y >= 0 && x < array.length
                                && y < array[i].length) {
                            if(x!=i || y!=j){
                            System.out.print(array[x][y] + " ");
                            }
                        }
                    }
                }
                System.out.println("\n");
            }
        } 
```

感谢所有回答的人，但我在刚刚找到的[这篇文章](https://stackoverflow.com/a/652123/1287576)的帮助下想通了，以上是解决方案。再次感谢 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T10:06:04.330

基本情况只是通过索引移位来获得邻居元素。因为`(i,j)`它将是`(i + 1, j)`,`(i - 1, j)`等。

在边缘我使用两种方法：

1.  模`%`运算符以避免`IndexOutOfBounds`异常，但有时会与错误的元素索引混淆。
2.  用一层*默认元素*包裹你的矩阵。它为保存矩阵添加了一些额外空间，但使您的代码更具可读性，而不会捕获异常、大量 if 等。这个技巧在将迷宫表示为矩阵时经常使用。

示例：您的默认元素是 0。

```
0 0 0 0 0 0
0 1 2 3 4 0
0 2 6 7 3 0
0 1 3 5 7 0
0 2 4 6 2 0
0 0 0 0 0 0 
```

注意：不要忘记遍历**实际**数组大小，而不是扩展。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T11:07:08.817

这是我用 Ruby 编写的针对您的问题的解决方案。**而不是计算元素是否在边缘，您可以访问“超过”边缘的元素并处理“nil”值或发生在那里的异常。**然后从最终列表中删除“nil”值。该解决方案不如计算某个“点”是否超出边缘。

```
big_map = [[1,2,3,4,5,6],
           [8,9,7,5,2,6],
           [1,6,8,7,5,8],
           [2,7,9,5,4,3],
           [9,6,7,5,2,1],
           [4,7,5,2,1,3]]

# monkey patch classes to return nil.
[NilClass, Array].each do |klass|
    klass.class_eval do
        def [](index)
            return nil if index < 0 or index > self.size rescue nil
            self.fetch(index) rescue nil
        end
    end
end

class Array

    # calculate near values and remove nils with #compact method.   
    def near(i,j)
        [ self[i - 1][j - 1], self[i - 1][j - 0], self[i - 1][j + 1],
          self[i - 0][j - 1],                     self[i - 0][j + 1],
          self[i + 1][j - 1], self[i + 1][j - 0], self[i + 1][j + 1],
        ].compact
    end
end

puts big_map.near(1,1).inspect
# => [1, 2, 3, 8, 7, 1, 6, 8]

puts big_map.near(0,0).inspect
# => [2, 8, 9]

puts big_map.near(5,5).inspect
# => [2, 1, 1] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-13T20:33:46.430

我正在解决同样的问题，并提出了一个小的优化解决方案来查找 2D 矩阵中任何点的周围数字，希望这会有所帮助，如果我能以某种方式缩短逻辑代码，请发表评论：-

```
import java.util.ArrayList;

public class test {
    public static void main(String[] arg){

        int[][] arr = {{1,2,3,4,5},{6,7,8,9,10},{11,12,13,14,15},{16,17,18,19,20},{21,22,23,24,25}};
        //int[][] arr = {{width,2,3},{4,5,6},{7,8,9}};
        ArrayList<Integer> al = new ArrayList<Integer>();
        int x = 2, y = 2;
        int width = 2; //change the value of width, according to the requirement 
        for(int i = 0; i < 5; i++){
            for(int j = 0; j < 5; j++){
                if( (i == (x-width) && ( (y+width) >= j && j >= (y-width))) || (i == (x+width) && ( (y+width) >= j && j >= (y-width))) || (j == (y-width) && ( (x+width) >= i && i >= (x-width))) || (j == (y+width) && ( (x+width) >= i && i >= (x-width)))  ){
                    //if( x >= 0 && i < (i+width) && y >= 0 && j < (j+width))
                        {
                        al.add(arr[i][j]);
                        }
                }
            }
        }
        System.out.println(al);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-06T19:03:51.320

你没有提到你是否想要边缘的周期性邻居或忽略周期性邻居。假设你想要周期性邻居是代码，

```
List<Integer> getNeighbours(int[][] mat, int x, int y){
  List<Integer> ret = new ArrayList<Integer>();
  int rows = mat.length;
  int cols = mat[0].length;
  for(int i=-1,i<=1;i++)
    for(int j=-1;j<=1;j++)
      if(i||j) ret = ret.add(mat[(x+i)%rows][(y+j)%cols]);
  return ret;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-05T10:13:38.900

```
(x-1, y-1) -> upper left
(x-1, y) -> left
(x-1, y+1) -> lower left 
```

* * *

```
(x, y+1) -> up
(x, y) -> current position
(x, y-1) -> down 
```

* * *

```
(x+1, y+1) -> upper right
(x+1, y) -> right
(x+1, y-1) -> lower right 
```

您可以将其用作指南。现在您需要做的就是将它们添加到 try catch 中。

```
 for( int x=0; x<arr.length; x++ ){
  for(int y=0; y<arr[x].length; y++){
  if( arr[x][y] == 8 ){
    try{
      System.out.println("Upper Left is: " + arr[x-1][y-1]);
    }catch(ArrayIndexOutOfBoundsException e){
     //do something
    }

    try{
      System.out.println("Left is: " + arr[x-1][y]);
    }catch(ArrayIndexOutOfBoundsException e){
     //do something
    }

    //.....and others
   }
  } 
```**

# javascript - 尝试使用 Jquery 简化 div

> ID：12743749
> 
> 赞同：1
> 
> 时间：2012-10-05T09:50:04.467
> 
> 标签：javascript, jquery, jquery-animate

我制作了以下脚本：

我想要动画的 div：

```
DIV = $('div.info_holder'); 
```

和功能：

```
function bezar(){

DIV.stop().animate({
            opacity: 0
        }, {
            duration: 400,
            easing: "easeOutSine",
            complete: function () {
               DIV.css("display", "none")
            }
        })}; 
```

为什么我不能得到这个工作？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:14:44.893

您确定`easeOutSine`可以作为缓动功能使用（即您正在使用 jQ UI 或其他缓动插件）吗？虽然`.animate()`是 jQuery 核心的一部分，但附加的缓动函数不是。

如果您只想要easeOutSine，请执行以下操作：

```
$.extend($.easing,
  {
    easeOutSine: function (x, t, b, c, d) {
      return c * Math.sin(t/d * (Math.PI/2)) + b;
    }
  }
) 
```

在你打电话之前在你的 JavaScript 中`animate()`，这应该可以工作。

# perl - FCGI+Perl+lighttpd：POST 请求为空

> ID：12743751
> 
> 赞同：2
> 
> 时间：2012-10-05T09:50:12.477
> 
> 标签：perl, post, request, lighttpd, fastcgi

我在 perl 上有带有 fastcgi 的 lighttpd 服务器。Lighttpd 配置：

```
server.modules = (
        "mod_access",
        "mod_alias",
        "mod_compress",
        "mod_redirect",
        "mod_rewrite",
        "mod_accesslog",
)

server.document-root        = "/var/www"
server.upload-dirs          = ( "/var/cache/lighttpd/uploads" )
server.errorlog             = "/var/log/lighttpd/error.log"
server.pid-file             = "/var/run/lighttpd.pid"
server.username             = "www-data"
server.groupname            = "www-data"

server.max-keep-alive-requests = 10
server.max-keep-alive-idle = 5
#server.max-fds = 10240
server.max-connections = 8192

index-file.names            = ( "index.php", "index.html",
                                "index.htm", "default.htm",
                                "index.lighttpd.html" )

url.access-deny             = ( "~", ".inc" )

static-file.exclude-extensions = ( ".php", ".pl", ".fcgi" )

dir-listing.encoding        = "utf-8"
server.dir-listing          = "disable"

compress.cache-dir          = "/var/cache/lighttpd/compress/"
compress.filetype           = ( "application/x-javascript", "text/css", "text/html", "text/plain" )

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl"

$HTTP["host"] =~ "(^|\.)hostname\.net$" {
    server.document-root = "/var/www/hostname.net"
    url.rewrite-once = (     
        "^/index.php" => "/index.pl",
    )
} 
```

启用快速 CGI。这里配置fcgi.server：

```
fastcgi.server += ( ".pl" =>
        ((
                "socket" => "/tmp/perl.socket" + var.PID,
                "bin-path" => "/usr/bin/dispatch.fcgi",
                "docroot" => "/var/www/hostname.net",
                "check-local"     => "disable",
        ))
) 
```

调度.fcgi：

```
use strict;
use CGI::Fast;
use Embed::Persistent; {
    my $p = Embed::Persistent->new();
    while (new CGI::Fast) {

        my $filename = $ENV{SCRIPT_FILENAME};
        my $package  = $p->valid_package_name($filename);
        my $mtime;

        if ($p->cached($filename, $package, \$mtime)) {

            eval {$package->handler;};
        }
        else {

            $p->eval_file($ENV{SCRIPT_FILENAME});
        }
    }
} 
```

这是我的脚本（编辑后）：

```
use strict;
use warnings;

use CGI;
my $q = new CGI;

open my $fh, '>', "/var/www/hostname.net/payload.body" or die "Can't open payload.body: $!";
{
 local $/;
 print $fh $q->param('arg1');
}
close $fh;

print $q->header;
print $q->param('arg1'); 
```

发送请求：

```
wget --post-data="arg1=dfsdfasf&arg2=sdfasfdsdf" http://hostname.net/test.pl --save-headers --quiet -O - 
```

payload.body 为空（但更改更新时间）并且转储为：

```
HTTP/1.0 200 OK
Content-Type: text/html; charset=ISO-8859-1
Content-Length: 0
Connection: keep-alive
Date: Fri, 05 Oct 2012 12:23:07 GMT
Server: lighttpd/1.4.28 
```

就这样。

我尝试通过这种方式获取 POST 参数，但查询为空。我这样尝试过：

```
use Data::Dumper;
my $request;
use FCGI;
my $env;
my $q = FCGI::Request();
$env = $q->GetEnvironment();
my $buffer = "data\n";

if ( $ENV{'REQUEST_METHOD'} eq "POST" ){

    read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
}
else {

    print ("some error");
};

print("Content-type: text/plain\r\n\r\n", Dumper($buffer),"\n"); 
```

我需要从请求（二进制发布数据）中获取 POST 参数。

你能帮助我吗？也许我以错误的方式获取帖子参数？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:33:59.643

### `open`解释

这就是为什么您的第一个脚本不起作用的原因：

```
open FH, "<payload.body";
#         ^--- 
```

perl 借用了`open`Bourne Shell 的语法。

> `< `意味着阅读
> `> `意味着写作
> `>>`意味着附加
> `+<`意味着阅读和写作

如果我们遵循一些最佳实践，您的`open`陈述将是：

```
open my $fh, '>', "payload.body" or die "Can't open payload.body: $!"; 
```

### 让 Perl 帮助你

实际上，您正在尝试访问*只读*`print`的文件句柄。但是，Perl 可以警告您这个问题以及您可能遇到的许多其他问题。就在脚本的顶部（实际上是您的*所有*脚本）。您可以使用模块发出更好的错误消息。请注意，在服务器上，这些警告通常会进入日志，但您发现的内容值得一试。*`use strict``use warnings`*`Carp`**

 **### 什么`Dumper`是

该`Data::Dumper`模块采用 Perl 数据结构并将它们转换为可执行的 Perl 代码。这非常适合调试，有时也可以用于序列化，但仅打印出字符串或标量就不好了。所有包含的数据都将被引用，以便成为有效的 Perl，这不是您想要的。

### 其他零碎

`read`从头开始填充目标变量（索引 0）。指定一个偏移量作为第 4 个参数（例如`-1`）以附加您正在读取的数据。

`binmode`没有第二个参数仅在 Windows 上有用。在 Windows 上，`\n`可以是逻辑换行符（例如“ `\r\n`”）。`\015\012`在网络中使用字节值。

在第二个示例中，您`$buffer`使用. 您可能还想打印此内容长度以用于调试目的。`$ENV{CONTENT_LENGTH}``STDIN`

`FCGI::Request()`返回一个请求对象。该[文档](http://search.cpan.org/~flora/FCGI-0.74/FCGI.PL)指出您必须对`Accept`每个请求，可能是在一个循环中。该`Accept`方法在成功的情况下返回一个值`>= 0`。**

# android - Android：如何在 Facebook 墙上发布带有图片标题和一些描述的链接

> ID：12743760
> 
> 赞同：0
> 
> 时间：2012-10-05T09:50:41.567
> 
> 标签：android, facebook

我在我的应用程序中使用 xml 解析来解析 rss 提要。我在我的应用程序中集成了 facebook。我的要求是当我点击分享按钮时，它会用图片标题和单一描述分享我的内容。

我存储解析数据的主要活动。

SplashActivity.java

```
package com.example.shareslab;

import java.util.ArrayList;
import java.util.List;

import com.example.shareslab.R;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.text.Html;
import android.text.Spanned;
import android.text.Html.ImageGetter;
import android.util.Log;
import android.view.Gravity;
import android.view.ViewGroup.LayoutParams;
import android.widget.Toast;

public class SplashActivity extends Activity {
    /** Called when the activity is first created. */
    ProgressDialog progress;
    private List<com.example.shareslab.Message> messages;
    public static String singleDescription;
    public static String title;

    static List<String>imageURLAmit;
    static List<String> titles;
    static List<String> description,link;
    public static String[][] arrays;
    public static ArrayList<String> galleryImages;
    public static int position=0;
    //Handle user current location

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_activity);

        // Register the listener with the Location Manager to receive location updates

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        Log.d("net status ", "show   "+info);
        if (info != null && info.isAvailable()) {
            Log.d("net connected", "show   "+info);
            System.out.println("Connection OKK");
            new DownloadCities().execute();        

        }
        else{
            Log.d("net not connected", "show   "+info);
            Toast.makeText(SplashActivity.this, "Check Internet connection. And try again.", Toast.LENGTH_LONG).show();
        }
    }

    private class DownloadCities extends AsyncTask<String, Void, String> {
        private String ResultString = "";

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            if(progress.isShowing()){

                System.out.println("IN POST EXE");
                progress.dismiss();
                startActivity(new Intent(SplashActivity.this,MessageList.class));
            }

            super.onPostExecute(result);
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub

            progress = ProgressDialog.show(SplashActivity.this, "","Loading....");
            progress.setIndeterminate(true);
            progress.getWindow().setGravity(Gravity.BOTTOM);;

            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub
            try {
                System.out.println("Going to call  getCitiesFromServer()");
                loadFeed();
            }
            catch (Exception e) { // <-- Use the correct exception type
                ResultString = "Some error message";
            }
            return null;
        }

    }

    private void loadFeed(){
        position=0;

        try{
            BaseFeedParser parser = new BaseFeedParser();
            messages = parser.parse();
            titles = new ArrayList<String>(messages.size());
            description = new ArrayList<String>(messages.size());
            link = new ArrayList<String>(messages.size());
            arrays=new String[messages.size()][];

            final List<String> imageURL=new ArrayList<String>(1);
            imageURLAmit=new ArrayList<String>(messages.size());
            for (com.example.shareslab.Message msg : messages){

                Spanned title=Html.fromHtml(msg.getTitle());
                titles.add(title.toString());
                link.add(msg.getLink().toString());
                Spanned data=Html.fromHtml(msg.getDescription(),new ImageGetter() {

                    public Drawable getDrawable(String source) {

                        // TODO Auto-generated method stub
                            imageURL.add(source);
                        return null;
                    }
                },null);

                if(imageURL.size()!=0){
                    imageURLAmit.add(imageURL.get(0));                  

                }else{
                    imageURLAmit.add("http://blog.kevinlearynet.netdna-cdn.com/files/applausemeter-300x200.jpg");
                }

                System.out.println("Position b4 loop : "+position);
                int j;
                arrays[position]=imageURL.toArray(new String[imageURL.size()]);
                System.out.println("2D array colomn length : "+arrays[position].length);
                position++;
                System.out.println("Position afeter loop : "+position);
                imageURL.clear();           
                description.add( data.toString());
                System.out.println("End addition");
            }
            System.out.println("Final Image URL lenght : "+imageURL.size());

        } catch (Throwable t){
            Log.e("AndroidNews",t.getMessage(),t);
        }

    }

}` 
```

这是我用于 Facebook 共享的 Facebookc.java 类。

Facebookc.java

```
 package com.example.shareslab;

import com.example.shareslabfb.DialogError;
import com.example.shareslabfb.Facebook;
import com.example.shareslabfb.Facebook.DialogListener;
import com.example.shareslabfb.FacebookError;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.widget.Toast;

public class Facebookc extends Activity{

    private static final String APP_ID = "392939617444978";
    private static final String[] PERMISSIONS = new String[] {"publish_stream"};

    private static final String TOKEN = "access_token";
        private static final String EXPIRES = "expires_in";
        private static final String KEY = "facebook-credentials";

    private Facebook facebook;
    private String messageToPost;

    public boolean saveCredentials(Facebook facebook) {
            Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
            editor.putString(TOKEN, facebook.getAccessToken());
            editor.putLong(EXPIRES, facebook.getAccessExpires());
            return editor.commit();
        }

        public boolean restoreCredentials(Facebook facebook) {
            SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
            facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
            facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
            return facebook.isSessionValid();
        }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        facebook = new Facebook(APP_ID);
        restoreCredentials(facebook);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.facebook_dialog);

        String facebookMessage = getIntent().getStringExtra("facebookMessage");
        if (facebookMessage == null){
            facebookMessage = "";
        }
        messageToPost = facebookMessage;
    }

    public void doNotShare(View button){
        finish();
    }
    public void share(View button){
        if (! facebook.isSessionValid()) {
            loginAndPostToWall();
        }
        else {
            postToWall(messageToPost);
        }
    }

    public void loginAndPostToWall(){
         facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
    }

    public void postToWall(String message){
               Bundle parameters = new Bundle();

               parameters.putString("message", message);
               parameters.putString("name", "titles.get(position)");
               parameters.putString("caption","shareslab.com");
               parameters.putString("link", "http://www.shareslab.com");
               parameters.putString("picture", "imageURLAmit.get(position)");
               parameters.putString("description","description.get(position)");

                try {
                    facebook.request("me");
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("Tests", "got response: " + response);
            if (response == null || response.equals("") ||
                    response.equals("false")) {
                showToast("Blank response.");
            }
            else {
                showToast("Message posted to your facebook wall!");
            }
            finish();
        } catch (Exception e) {
            showToast("Failed to post to wall!");
            e.printStackTrace();
            finish();
        }
    }

    class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            saveCredentials(facebook);
            if (messageToPost != null){
            postToWall(messageToPost);
        }
        }
        public void onFacebookError(FacebookError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onError(DialogError error) {
            showToast("Authentication with Facebook failed!");
            finish();
        }
        public void onCancel() {
            showToast("Authentication with Facebook cancelled!");
            finish();
        }
    }

    private void showToast(String message){
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T15:51:08.870

如果您的图像保存在 SDCard 中，那么您可以在获取图像的 uri 后使用以下代码：-

在代码中，图像的 uri 被声明为 imageUri。

```
public void performPostToWall(Uri imageUri){
    byte[] data = null;
    ContentResolver cr = context.getContentResolver();
    InputStream in = null;

    try {
        in = cr.openInputStream(imageUri);
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 1;
        Bitmap thumb = BitmapFactory.decodeStream(in, null, options);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        thumb.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        Toast.makeText(context, "Unable to upload image", Toast.LENGTH_LONG).show();
    }

    Bundle params = new Bundle();
    params.putByteArray("picture", data);
    if (!(captionText == null || captionText.equals("")))
        params.putString("caption", captionText);

    Request req = new Request(session, "me/photos", params, HttpMethod.POST, new Request.Callback() {
        @Override
        public void onCompleted(Response response) {
            context.onPostToMyWallWithImageResponse(response);
        }
    });

    req.executeAsync();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:05:27.483

把这段代码

```
public void postToWall(String message){
          try {
        String response=facebook.request("me");  
        Bundle parameters = new Bundle();
        parameters.putString("message", _id);
        parameters.putString("caption", " message.");
        parameters.putString("description", "A secret message is waiting for you.");
        parameters.putString("name", "A Secret Message For You");
        parameters.putString("picture", "http://sheokhanda.files.wordpress.com/2010/06/spring-colors.jpg");
        parameters.putString("link", "http://www.google.com" );

        response = facebook.request("me/feed", parameters, "POST");

        Log.d("Tests", "got response: " + response);
        if (response == null || response.equals("") || response.equals("false")) {
            Log.i(TAG, "Blank Response...");
        }
        else {
            Log.i(TAG, "Message posted to your facebook wall!..");
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
} 
```

它需要这个权限`publish_stream`

# ios - IOS-UIView 和 UIScrollview

> ID：12743762
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:50:51.707
> 
> 标签：ios

亲爱的大家，

我有`UIView`和`UIScrollView`里面`UIViewController`。 `UIView`并且`UIScrollView`具有相同的宽度，宽度等于 500，

当我`UIView`滚动`UIScrollView`. 我怎样才能做到这一点？

PS：`UIView`不是子视图`UIScrollView`

谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:54:44.647

如果我理解正确，您需要在您的 viewControler 中添加一个水平滚动视图，然后在该视图中添加您的视图和另一个滚动视图。

我希望我能正确理解你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T13:30:32.443

您需要将 UIView 作为 UIScrollView 的子视图，然后只有在滚动滚动视图时才能滚动 UIView。

# extjs - 在extjs中一键禁用所有表单组合框

> ID：12743763
> 
> 赞同：0
> 
> 时间：2012-10-05T09:50:54.737
> 
> 标签：extjs

我在 extjs 工作。我必须禁用表单的字段。

我使用了以下功能。

```
 var form = Ext.getCmp('frmTender').getForm();

        fields = form.getFields();

        Ext.each(fields.items, function (f) {

            f.inputEl.dom.disabled = true;

        } 
```

它适用于文本字段，但不适用于组合框和复选框。所以请帮助我如何

我可以禁用所有组合框吗

我的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:23:55.187

您可以使用 Ext 组件的 setDisabled 方法。

```
 f.setDisabled(true); 
```

代替

```
 f.inputEl.dom.disabled = true; 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-setDisabled](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-setDisabled)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:11:09.850

我个人不喜欢禁用 extjs 中的字段。标签也变灰了。我就是这样用的。

```
//JS
var form = Ext.getCmp('frmTender').getForm();
fields = form.getFields();
Ext.each(fields.items, function (f) {
  f.inputEl.dom.readonly = true; //f.setReadOnly(true)
  f.inputEl.addCls('x-custom-field');
};

//CSS
.x-custom-field
{
  background: none; //#ccc
} 
```

# joomla - Joomla 插件安装文件

> ID：12743765
> 
> 赞同：3
> 
> 时间：2012-10-05T09:51:03.147
> 
> 标签：joomla, joomla2.5

是否可以在 joomla`install.xml`文件中编写一些 sql，在安装时执行？或者以其他方式做这个把戏？关键是我已经编写了自定义授权插件，我必须禁用/替换/删除现有的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:13:13.137

您可以使用外部 SQL 文件并让它们在安装时执行。

1.在您的插件根目录中创建一个 SQL 文件*install.mysql.utf8.sql ，其中包含如下内容：*

```
CREATE TABLE IF NOT EXISTS `#__tablename` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=0 ; 
```

2\. 在您的 XML 清单中，将文件添加为 files 下的*文件**名*节点：

 *```
<files>
    <filename>install.mysql.utf8.sql</filename>
</files> 
```

3\. 在您的清单中添加一个[安装节点](http://docs.joomla.org/Manifest_files#SQL)，告诉 Joomla 在安装时要执行什么 SQL 文件：

```
<install>
    <sql>
        <file driver="mysql" charset="utf8">install.mysql.utf8.sql</file>
    </sql>
</install> 
```

如果您使用它安装插件并且它是**新安装**的（该插件之前没有安装在站点上），那么 Joomla 将执行 SQL 文件。

如果您需要对插件的升级（重新安装）执行 SQL，则必须使用[更新](http://docs.joomla.org/Manifest_files#Update_of_the_SQL_schema)节点。

SQL 文件的替代方法是在安装/更新时使用要执行的 PHP 脚本（可以自己运行 SQL 查询）。如需帮助，请参阅[此](http://docs.joomla.org/Manifest_files#Script_file)。*

# java - 在 jframe 和 jinternalframe 之间切换

> ID：12743772
> 
> 赞同：-2
> 
> 时间：2012-10-05T09:51:30.317
> 
> 标签：java, swing, jframe, jinternalframe

嗨 stackoverflow 开发人员我必须在摇摆中设计一个有两个菜单的表单。onclicking 一个菜单我想在它上面添加一个 jinternal 框架。然后单击 jinternalframe 上的按钮后，应删除 jinternalframe 并应在 jframe 表单上添加新控件。

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;
    import javax.event.*;

 class MainMenu extends JFrame implements ActionListener
   {
    JMenuBar mb;
    Menu field,test;
   MainMenu()
  {
  Container cp=this.getContentPane();
   mb= new JMenuBar();
  field1= new JMenu("field1");
  test=new JMenu("test");
  mb.add(field1);
  mb.add(test);

  setJMenuBar(mb);
  field1.addActionListener(this);
 test.addActionListener(this);

}

 public void actionPerformed(ActionEvent ae)
  {
    if(ae.getActionCommand().equals("field1");
   {
     jinternalframe1 frm= new jinternalframe();
     cp.add(frm);
      frm.setBounds(0,0,600,600);
   }

    }

   public static void main(String args[])
   {

   MainMenu frm = new MainMenu();
    frm.setSize(1000,1000);
   frm.setVisible(true);
   }

 }

public class jinternalframe1 extends JInternalFrame implements ActionListener
{

 JButton jb1,jb2;

 jinternalframe1()
{
jb1= new JButton("1");
jb2=new JButton("2");
 add(jb1);
 add(jb2);
 jb1.addActionListener(this);
jb2.addActionListener(this);

 }

 public void actionPerformed(ActionEvent ae)
  {
  if(ae.getActionCommand().equals("1"))
   {
     JButton nn= new JButton("back");
     MainMenu frm= new MainMenu();
    frm.cp.add(nn);
    //this is creating new Form but i want to add the new button control instead of add        //jinternal frame

    }
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:39:29.287

将主窗体的实例传递给您的 JInternalFrame

```
jinternalframe1 frm= new jinternalframe(this); 
```

在jinternalframe1类中声明一个MainMenu对象指向主类对象。

```
MainMenu myParent; 
```

修改您的 jinternalframe1 构造函数以接受 MainMenu 实例

```
 jinternalframe1(MainMenu parent){

   myParent = parent;

   //rest of your code
} 
```

然后在您的 actionPerformed 中将新按钮添加到 myParent 实例。

```
if(ae.getActionCommand().equals("1")){
myParent.add(new JButton("back"));
} 
```

但是让我告诉你，这根本不是一个好习惯！正如垃圾神所说，您的代码不是[sscce](http://sscce.org/) 希望对您有所帮助。

# javascript - 在IOS的UIWebview中引用js和css文件？

> ID：12743776
> 
> 赞同：0
> 
> 时间：2012-10-05T09:51:52.287
> 
> 标签：javascript, css, uiwebview

在我的应用程序中添加 webview 及其加载 Html 文件，但在我的 Html 页面中，我引用了 js 和 css 文件但未加载。我遵循了 stackoverflow 中给出的许多想法，但仍然无法正常工作。谁能告诉我你的想法，谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:29:56.150

目前xcode不引用嵌套文件夹中的java脚本文件所以我收集了所有文件，如（HTML，js，css文件）并将它们放在其他资源文件夹中。它在构建阶段自动引用编译源。确保没有列出编译源只需执行以下操作。

目标->构建阶段->单击 + 按钮并添加资源，如（HTML、js、css 文件）。现在可以正常工作

# spring - Intellij 无法解析 Spring bean 范围租户

> ID：12743781
> 
> 赞同：4
> 
> 时间：2012-10-05T09:52:11.790
> 
> 标签：spring, scope, intellij-idea, configuration-files, hybris

我的 Intellij IDE 告诉我无法解析我的 Bean 定义的范围“租户”。

虽然它不会阻止我部署和运行我的应用程序，但它看起来有点乱。我有没有办法告诉 Intellij 如何解决这个问题？

我尝试将**coreserver.jar**（包含**TenantScope**类的 jar）添加到我的模块的依赖项中，但这不起作用。

Intellij 的检查**'Spring Scopes'**显示了该错误。我必须让这个检查以某种方式知道租户范围是在另一个模块的 XML 文件中声明的。我也尝试将这个其他模块添加为**petsplacecore**模块的依赖项，但这也不起作用。

这是我的屏幕的样子：

![在此处输入图像描述](../Images/0b47728ee729bfbc25437e1930704d47.png)

租户范围在模块**yacceleratorstorefront**的文件**web-application-config.xml**中声明，如下所示：

```
 <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
        <property name="scopes">
            <map>
                <entry key="tenant" value="de.hybris.platform.spring.TenantScope"/>
            </map>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:47:07.677

如果我将 2 个 Spring Configuration 文件添加到 Petsplacecore 的 Spring Facet 中的同一个 Fileset 中，则可以找到对 Tenant Scope 声明的引用。

如下图所示：

![在此处输入图像描述](../Images/3296b5d8012ec754092c67406eee5b19.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:32:10.207

“租户”范围是定制的 hybris 范围，在 web-application-config.xml 中定义为：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="tenant" value="de.hybris.platform.spring.TenantScope"/>
        </map>
    </property>
</bean> 
```

您应该能够在 platform/ext/core/bin/coreserver.jar 中找到它 - 将此 jar 添加到您的类路径中。恐怕我对 IntelliJ 的了解就到此为止了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T06:50:13.860

从 hybris 5.0 开始，您的 spring 配置文件中不再需要自定义“租户”范围，因此无需让 Intellj IDEA 确认此自定义范围。

# c# - Couchbase .net 批量插入

> ID：12743784
> 
> 赞同：1
> 
> 时间：2012-10-05T09:52:21.567
> 
> 标签：c#, .net, couchbase

我正在尝试对 couchbase 和其他几个产品进行批量读/写性能测试，但看起来我不能使用 couchbase 进行批量插入。couchbase .net (1.8) 是否支持批量插入？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:07:57.740

Couchbase .NET 客户端当前不支持批量插入。您可以按原样与客户端一起使用一些方法来执行批量加载。我已经在下面的链接中记录了这些内容（请参阅“批量加载”）。

[http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library#Couchbase.NETClientLibrary-BulkLoading](http://www.couchbase.com/wiki/display/couchbase/Couchbase+.NET+Client+Library#Couchbase.NETClientLibrary-BulkLoading)

要记住的一件事是 .NET 客户端当前不支持 SetQ 操作，这对于多集是最佳的。该操作排队等待客户端的 1.3 版本。标准的 Set 操作应该为批量数据加载提供超出可接受的性能。

# c# - Visual Studio 2012 中的扩展包调试

> ID：12743796
> 
> 赞同：0
> 
> 时间：2012-10-05T09:53:18.320
> 
> 标签：c#, visual-studio, visual-studio-2012, visual-studio-extensions

我尝试调试 Visual Studio 包。我已经安装了 Visual Studio 2012 SDK 并创建了新的空 Visual Studio 包（没有设置菜单、工具和编辑器复选框）。我在包的构造函数中设置断点：

```
public MyPackage()
{
    Debug.WriteLine(string.Format(CultureInfo.CurrentCulture, 
        "Entering constructor for: {0}", this.ToString())); // This line
} 
```

但是如果我运行 IDE 的实验版本，Visual Studio 将不会加载我的包。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:36:37.110

您需要将包设置为自动加载：http: [//msdn.microsoft.com/en-us/library/bb166762.aspx](http://msdn.microsoft.com/en-us/library/bb166762.aspx)

# linux - 如何在Linux中捕获文本文件中的重复条目

> ID：12743800
> 
> 赞同：35
> 
> 时间：2012-10-05T09:53:35.020
> 
> 标签：linux, grep

文本文件：

```
1 1
2 2
3 3
1 1

```

我想抓住`1 1`重复

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-10-05T09:57:11.183

你的问题不是很清楚，但你可以**过滤掉重复**的行`uniq`：

```
sort file.txt | uniq 
```

或者干脆

```
sort -u file.txt 
```

（感谢罗伯厄尔）

您也可以**只打印重复**的行

```
sort file.txt | uniq -d 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:39:13.330

一种使用方式`GNU awk`：

```
awk 'array[$0]++' file.txt 
```

结果：

```
1 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T19:13:58.383

您可以轻松使用它：

```
sort -u file.txt 
```

或者

```
awk '!x[$0]++' file.txt 
```

# ruby-on-rails - Ruby on Rails：将两条数据连接到一列

> ID：12743801
> 
> 赞同：2
> 
> 时间：2012-10-05T09:53:39.840
> 
> 标签：ruby-on-rails, ruby, database, concatenation

我的表项目中有 3 列。名字、姓氏和全名。

```
<%= f.hidden_field :first_name, :value => current_user.firstname %>
<%= f.hidden_field :last_name, :value => current_user.lastname %> 
```

在用户保存项目的那一刻，用户的名字和姓氏被保存到不同的列中。我现在希望将名字和姓氏都保存到列全名中，以便以后搜索它们。

所以如果名字是

```
first_name = "Joe"
last_name = "Bloggs" 
```

我怎么得到

```
fullname =  "Joe Bloggs" 
```

我试过这个，但它不起作用。

```
<%=f.hidden_field :fullname, :value => :first_name + :last_name %> 
```

有人可以指出我正确的方向吗？我是 Rails 新手，所以在尝试提供帮助时请记住这一点。谢谢。

**更新**

现在我已将其添加到我的项目模型中：

```
def set_fullname
    fullname = first_name + last_name
  end 
```

在我看来，我现在称之为：

```
<%= f.hidden_field :first_name, :value => current_user.firstname %>
<%= f.hidden_field :last_name, :value => current_user.lastname %>
<%= f.hidden_field :fullname, :value => @project.fullname %> 
```

当我点击提交时，我检查日志，名字和姓氏像往常一样保存到表中，但全名是空白的。任何人都可以看到问题是什么？

**更新2**

看法：

```
<%= f.hidden_field :first_name, :value => current_user.firstname %>
<%= f.hidden_field :last_name, :value => current_user.lastname %>
<%= f.hidden_field :fullname, :value => @project.set_fullname %> 
```

项目模型：

```
def set_fullname
    fullname = first_name + last_name
  end 
```

当我尝试访问该页面时，我收到此错误。

```
undefined method `+' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T09:58:12.780

您视图中的 Ruby 代码在表单加载时执行，此时表单中没有内容（如果您创建新记录）。`onchange`在 javascript 中编写类似的代码并将其映射到事件`first_name`和`last_name`文本字段是有意义的。

或者您可以在模型的服务器端执行此操作，例如：

```
class Person

  before :save, :set_fullname

  def set_fullname
    fullname = "#{first_name} #{last_name}"
  end
end 
```

`before :save`每次更新模型时都会执行

无论如何，更清洁的解决方案是调整您的搜索查询，这样您只需在数据库中复制信息。

在搜索时尝试这样的事情：

```
"first_name LIKE ? or last_name LIKE ? or concat(last_name, ', ', first_name) LIKE ?" 
```

此 SQL 代码可能依赖于数据库，如果您使用的是 MySQL，则可能没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T10:39:42.787

我知道 Tombart 已经回答了这个问题，但这可以帮助其他人。

```
class Person

  before_create do
    self.fullname = "#{first_name} #{last_name}"
  end
end 
```

[您可以在RailsGuides](http://guides.rubyonrails.org/active_record_callbacks.html#callback-registration)上找到更多信息。

# php - Zend Framework 2 在视图中显示视图

> ID：12743803
> 
> 赞同：4
> 
> 时间：2012-10-05T09:54:04.677
> 
> 标签：php, zend-framework2

我有两个模块 Admin 和 Login。

我想在管理视图“index.html”中显示登录视图“login.phtml”

我在管理模块 indexAction 控制器中有以下内容

```
public function indexAction()
{    
    $login = new LoginController();

    $view = new ViewModel(array(
        'theloginform' => $login->loginAction(),
    ));

    return $view;
} 
```

在 Login 控制器的 LoginAction 方法中，我返回“login.phtml”文件的 ViewModel。

```
public function LoginAction() {
       $view = new ViewModel();
       return $view;
} 
```

indexAction 引发错误，因为变量 'theloginform' 是一个对象。

```
Catchable fatal error: Object of class Zend\View\Model\ViewModel could not be converted to string in... 
```

如果我添加以下内容：

```
$authentication->loginAction()->captureTo('test') 
```

'index.phtml' 显示字符串“内容”。

我已经读到我可能需要在将 ViewModel 分配给视图变量“theloginform”之前渲染它，但我似乎无法让它工作，我尝试了以下操作但没有运气。

```
public function LoginAction() {

    $view = new ViewModel();

    $renderer = new PhpRenderer();
    $resolver = new Resolver\AggregateResolver();
    $map = new Resolver\TemplateMapResolver(array(
            'login'      => __DIR__ . '/../view/login.phtml'

    ));
    $resolver->attach($map);
    $view->setTemplate("login");
    return $renderer->render($view);
} 
```

如果出现以下错误：

```
Zend\View\Renderer\PhpRenderer::render: Unable to render template "login"; resolver could not resolve to a file 
```

我什至尝试将 DI 添加到 autoload_classmap.php 文件中，但仍然出现相同的错误，我仔细检查了 login.phtml 文件是否位于正确的路径：

'/Login/view/login/login/login.phtml' 我什至将它复制到 '/Login/src/Login/view/login.phtml'

非常困惑已阅读然后重新阅读 Zend 文档，我只想将一个视图传递给另一个视图......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T10:13:43.020

如果您需要共享一些视图内容，您可以使用部分内容：

```
$this->partial('partial/login.pthml', array()); //add this to your index view 
```

[你可以在这里](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.view.helpers.html)阅读它们

您还可以找到一些有用的信息：[Zend Framework 2 如何在模块中渲染部分内容？](https://stackoverflow.com/questions/10903451/how-does-zend-framework-2-render-partials-inside-a-module)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T10:33:56.093

根据[这个](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#nesting-view-models)zf2 文档页面

在登录动作中写下这个：

```
 public function loginAction()
    {
        return new ViewModel();
    } 
```

在 indexAction 中：

```
 $view = new ViewModel(
                  array(
                    //here any thig you want to assign to index view
                  )
                );
    $loginView = new ViewModel(
                  array(
                        //here any thig you want to assign to login view
                    )
                );

    $loginView->setTemplate('moduleName/controllerName/login'); 

    $view->addChild($loginView, 'login');
    return $view 
```

在 index.phtml 中，你可以`<? echo $this->login ?>`在任何你想显示 loginView 的地方回显登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T06:51:00.547

在 ZF 1.x 中，我可能会建议您构建一个引用视图占位符或控制器插件的动作助手，该插件会回调 loginAction 以获取表单逻辑。

在 Zf2 中，动作助手似乎已被[控制器插件](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html)取代，并且似乎是通过[事件管理器](http://framework.zend.com/manual/2.0/en/modules/zend.event-manager.event-manager.html)触发的，并且可能需要了解一个或多个[“管理器”](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.intro.html)。然而，[占位符视图助手](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#placeholder-helper)仍然存在，甚至看起来有些熟悉。

我建议您考虑为您的登录表单显示构建/调整一个控制器插件，然后可以将其附加到占位符视图助手。如果幸运的话，您可能只需要一个视图助手就可以获得所需的功能。

我希望我能提供更多帮助，但我自己仍在经历这个烂摊子。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-24T17:47:16.867

在您的管理视图中，您必须使用渲染视图助手并回显渲染的脚本，因此您可以这样做 `echo $this->render($this->theloginform);`

# java - 使用通配符过滤文件（java）

> ID：12743804
> 
> 赞同：0
> 
> 时间：2012-10-05T09:54:12.443
> 
> 标签：java, file, wildcard

使用通配符我想处理目录中的文件。如果指定了通配符，我想处理与通配符匹配的文件，否则如果未指定，我将处理所有文件。这是我的代码

```
 List<File> fileList;
   File folder = new File("Directory");
   File[] listOfFiles = folder.listFiles();
    if(prop.WILD_CARD!=null) {  
        Pattern wildCardPattern = Pattern.compile(".*"+prop.WILD_CARD+"(.*)?.csv",Pattern.CASE_INSENSITIVE);
        for(File file: listOfFiles) {
            Matcher match = wildCardPattern.matcher(file.getName());
            while(match.find()){
                String fileMatch = match.group();
                if(file.getName().equals(fileMatch))  {
                    fileList.add(file); // doesn't work
                }
            }
        }
    }
    else
        fileList = new LinkedList<File>( Arrays.asList(folder.listFiles())); 
```

我无法将匹配通配符字符的文件放在单独的文件列表中。请帮助我修改我的代码，以便我可以将所有匹配通配符字符的文件放在单独的文件列表中。在这里，我在我的正则表达式中连接 prop.WILD_CARD，它可以是任何字符串，例如如果通配符是测试，我的模式是 . *测试（。*）？.csv。我想存储与此通配符匹配的文件并将其存储在文件列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:30:15.160

我刚刚测试了这段代码，它运行得很好。您应该在其他地方检查逻辑错误。

```
 public static void main(String[] args) {

    String WILD_CARD = "";
     List<File> fileList = new LinkedList<File>();
       File folder = new File("d:\\");
       File[] listOfFiles = folder.listFiles();
        if(WILD_CARD!=null) {  
            Pattern wildCardPattern = Pattern.compile(".*"+WILD_CARD+"(.*)?.mpp",Pattern.CASE_INSENSITIVE);
            for(File file: listOfFiles) {
                Matcher match = wildCardPattern.matcher(file.getName());
                while(match.find()){
                    String fileMatch = match.group();
                    if(file.getName().equals(fileMatch))  {
                        fileList.add(file); // doesn't work
                    }
                }
            }
        }
        else
            fileList = new LinkedList<File>( Arrays.asList(folder.listFiles()));

        for (File f: fileList) System.out.println(f.getName());
} 
```

`D:`这将返回我驱动器上所有 *.mpp 文件的列表。

我也建议使用

```
 for (File file : listOfFiles) {
            Matcher match = wildCardPattern.matcher(file.getName());
            if (match.matches()) {
                fileList.add(file);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:12:52.317

我建议您查看 FilenameFilter 类，看看它是否有助于简化您的代码。至于您的正则表达式，我认为您需要转义“。” 让它工作的性格。

# javascript - 滚动时如何防止跳转站点？

> ID：12743812
> 
> 赞同：0
> 
> 时间：2012-10-05T09:54:50.723
> 
> 标签：javascript, jquery, scroll

我正在尝试在网站上编写防止用户正常滚动的机制。当用户向下或向上滚动时，站点会平滑滚动到下一张或上一张幻灯片（取决于滚动方向）并停在那里（就像您单击导航栏时一样）。查看实时预览：[点击这里](http://www.jimmyweb.pl/projekty/dentmedica)

但是有一个烦人的问题。它在 FF 中几乎可以正常工作（不跳转），但在其他浏览器（Chrome、Safari、IE）中会中断——它会跳转。我怎样才能防止这种情况发生？这里是我的代码片段。我有一个 ScrollControl 对象，我阻止滚动：

```
scrollControl = {
    keys : [32, 37, 38, 39, 40],

    scrollTimer : 0,

    lastScrollFireTime : 0,

    preventDefault  :   function(e){
                            e = e || window.event;
                            if (e.preventDefault)
                              e.preventDefault();
                            e.returnValue = false;
                        },

    keydown :   function(e){
                    for (var i = scrollControl.keys.length; i--;) {
                        if (e.keyCode === scrollControl.keys[i]) {
                            scrollControl.preventDefault(e);
                            return;
                        }
                    }
                },

    wheel   :   function(e){
                    scrollControl.preventDefault(e);
                },

    disableScroll   :   function(){
                            if (window.addEventListener) {
                                  window.addEventListener('DOMMouseScroll', scrollControl.wheel, false);
                              }
                              window.onmousewheel = document.onmousewheel = scrollControl.wheel;
                              document.onkeydown = scrollControl.keydown;
                        },

    enableScroll    :   function(){
                            if (window.removeEventListener) {
                                window.removeEventListener('DOMMouseScroll', scrollControl.wheel, false);
                            }
                            window.onmousewheel = document.onmousewheel = document.onkeydown = null;
                        }   

} 
```

然后我正在听鼠标滚轮是否发生并仅尝试执行一次功能（我正在使用此插件来检测鼠标滚轮[PLUGIN](http://www.ogonek.net/mousewheel/jquery-demo.html)）

```
$(window).mousewheel(function(objEvent, intDelta){

    var minScrollTime = 1000;
    var now = new Date().getTime();

    function processScroll() {
        console.log("scrolling");
        if(intDelta>0){
        $.smoothScroll({
                speed:med.effectDuration, 
                easing:med.scrollEase, 
                scrollTarget:med.prevPage,
                afterScroll: function(){
                                med.currentPage = med.prevPage;
                                med.setActiveNav();
                                med.setSlides();
                                med.runAnimations();

                            }});
        }else if(intDelta<0){
            //scrollControl.disableScroll();
                $.smoothScroll({
                        speed:med.effectDuration, 
                        easing:med.scrollEase, 
                        scrollTarget:med.nextPage,
                        afterScroll: function(){
                                        med.currentPage = med.nextPage;
                                        med.setActiveNav();
                                        med.setSlides();
                                        med.runAnimations();

                                    }});
        }
    }

    if (!scrollControl.scrollTimer) {
        if (now - scrollControl.lastScrollFireTime > (3 * minScrollTime)) {
            processScroll();   // fire immediately on first scroll
            scrollControl.lastScrollFireTime = now;
        }
        scrollTimer = setTimeout(function() {
            scrollControl.scrollTimer = null;
            scrollControl.lastScrollFireTime = new Date().getTime();
            processScroll();
        }, minScrollTime);
    }

}); 
```

当用户启动网站时，我正在执行`scrollControl.disableScroll`DOM 就绪事件的功能。实际上滚动一次预防并不能完美地工作，有时它会触发两次平滑滚动。我究竟做错了什么？在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:04:27.593

我有同样的问题，鼠标滚轮事件被触发了两次。

```
function wheelDisabled(event){

    event.preventDefault();
    event.stopImmediatePropagation();
    return false;
} 
```

您也可以同时使用这两个事件。

```
window.addEventListener('DOMMouseScroll', wheel, false);
window.addEventListener('mousewheel', wheel, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:02:56.987

我不会尝试阻止使用 Javascript 滚动，而是尝试不同的方法。这种方法包括 CSS 和 Javascript，以确保网站永远不会大于视口（因此没有滚动条！）。

使用 CSS 强制主包装 div（包装网站上所有内容的 div）具有溢出：隐藏。然后用Javascript动态保证这个div的高和宽总是等于视口的高和宽。

在这种情况下，如果您想以您选择的预定义方式实现滚动，您可以动态地将负边距顶部（或负边距左用于水平滚动）添加到父包装 div 以使其看起来正在滚动。

# wpf - 从 StoryBoard 访问 Grid.Columnspan

> ID：12743813
> 
> 赞同：3
> 
> 时间：2012-10-05T09:54:55.410
> 
> 标签：wpf, xaml

我有一个 ListView 占用 Grid 的单元格：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <ListView
        x:Name="itemListView"
        Grid.Column="0"
        Grid.ColumnSpan="2"
        />
</Grid> 
```

我想在 Storyboard 中更改 colspan：

```
<VisualState x:Name="Snapped">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames
            Storyboard.TargetName="itemListView"
            Storyboard.TargetProperty="Grid.ColumnSpan">
            <DiscreteObjectKeyFrame KeyTime="0" Value="1" />
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

但它最终出现运行时错误......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T09:54:55.410

解决方案非常简单，但并不明显（好吧，至少对我来说不是）：

```
<ObjectAnimationUsingKeyFrames
    Storyboard.TargetName="itemListView"
    Storyboard.TargetProperty="(Grid.ColumnSpan)">
    <DiscreteObjectKeyFrame KeyTime="0" Value="1" />
</ObjectAnimationUsingKeyFrames> 
```

它表明这种属性应该用括号括起来。

# jsf - primefaces 数据表上的 selectionMode

> ID：12743815
> 
> 赞同：0
> 
> 时间：2012-10-05T09:55:06.087
> 
> 标签：jsf, jsf-2, primefaces

我在确认对话框中有一个数据表，我尝试在其上放置多个选择复选框，但导致错误和数据不可见

页：

```
<h:form>
<p:commandButton update="msgfiles" actionListener="#{globalCounter.reloadList()}"
   oncomplete="choose.show()"/>

                <p:confirmDialog widgetVar="choose">
                    <p:dataTable id="msgfiles" var="obj" rows="5" value="#{globalCounter.objectList}"
                                 rowKey="#{obj[0]}" selection="#{globalCounter.selectedObjectList}">
                        <p:column selectionMode="multiple"/>
                        <p:column headerText="id">
                            <h:outputText value="#{obj[0]}"/>
                        </p:column>
                        <p:column headerText="name">
                            <h:outputText value="#{obj[1]}"/>
                        </p:column>
                    </p:dataTable>
                </p:confirmDialog>
            </h:form> 
```

豆：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name = "globalCounter")
@SessionScoped
public class TestBean implements Serializable {

   private List<Object[]> objectList;
   public List<Object[]> getObjectList() {
        return objectList;
    }
   public void setObjectList(List<Object[]> objectList) {
        this.objectList = objectList;
    }

    public void reloadList() {
        objectList = new ArrayList<Object[]>();
        objectList.add(new Object[]{"1", "one"});
        objectList.add(new Object[]{"2", "two"});
        objectList.add(new Object[]{"3", "three"});
        objectList.add(new Object[]{"4", "four"});
        objectList.add(new Object[]{"5", "five"});
    }

    private List<Object[]> selectedObjectList;
    public List<Object[]> getSelectedObjectList() {
        return selectedObjectList;
    }
    public void setSelectedObjectList(List<Object[]> selectedObjectList) {
        this.selectedObjectList = selectedObjectList;
    }
} 
```

错误信息：

```
 [#|2012-10-03T16:28:36.390+0700|SEVERE|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;|javax.faces.FacesException
   at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:86)
   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
   at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
   at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at atiits.filter.AuthenticateAuthorize.doFilter(AuthenticateAuthorize.java:100)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:277)
   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
   at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
   at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
   at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
   at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
   at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
   at com.sun.grizzly.comet.CometEngine.executeServlet(CometEngine.java:473)
   at com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:341)
   at com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:84)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:161)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:137)
   at com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:88)
   at com.sun.grizzly.http.TaskBase.run(TaskBase.java:189)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
   at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
   at java.lang.reflect.Array.newArray(Native Method)
   at java.lang.reflect.Array.newInstance(Array.java:52)
   at org.primefaces.component.datatable.feature.SelectionFeature.decodeMultipleSelection(SelectionFeature.java:53)
   at org.primefaces.component.datatable.feature.SelectionFeature.decode(SelectionFeature.java:39)
   at org.primefaces.component.datatable.DataTableRenderer.decode(DataTableRenderer.java:53)
   at javax.faces.component.UIComponentBase.decode(UIComponentBase.java:790)
   at org.primefaces.component.api.UIData.processDecodes(UIData.java:224)
   at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1042)
   at javax.faces.component.UIForm.processDecodes(UIForm.java:216)
   at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1042)
   at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1042)
   at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:941)
   at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
   ... 32 more
|#]

[#|2012-10-03T16:28:36.390+0700|WARNING|glassfish3.0.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=29;_ThreadName=http-thread-pool-8080-(1);|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
   at java.io.Writer.write(Writer.java:140)
   at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
   at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:119)
   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
   at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
   at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at atiits.filter.AuthenticateAuthorize.doFilter(AuthenticateAuthorize.java:100)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:277)
   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
   at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
   at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
   at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
   at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
   at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
   at com.sun.grizzly.comet.CometEngine.executeServlet(CometEngine.java:473)
   at com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:341)
   at com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:84)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:161)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:137)
   at com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:88)
   at com.sun.grizzly.http.TaskBase.run(TaskBase.java:189)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
   at java.lang.Thread.run(Thread.java:619)
|#]

[#|2012-10-03T16:28:36.390+0700|WARNING|glassfish3.0.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=29;_ThreadName=http-thread-pool-8080-(1);|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
   at java.io.Writer.write(Writer.java:140)
   at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
   at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:119)
   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
   at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
   at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at atiits.filter.AuthenticateAuthorize.doFilter(AuthenticateAuthorize.java:100)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:277)
   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
   at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
   at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
   at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
   at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
   at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
   at com.sun.grizzly.comet.CometEngine.executeServlet(CometEngine.java:473)
   at com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:341)
   at com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:84)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:161)
   at com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:137)
   at com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:88)
   at com.sun.grizzly.http.TaskBase.run(TaskBase.java:189)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
   at java.lang.Thread.run(Thread.java:619)
|#] 
```

如果我`<p:column selectionMode="multiple" style="width:18px" />`从页面中删除一切都很好并显示数据

我哪里做错了？

Primefaces 3.4/Mojarra 2.0.2 (FCS b10)/Glassfish 3.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:11:52.133

我有同样的问题，我使用`<h:form>`和解决了它`<p:ajax>`

```
<p:dataTable id="msgfiles" var="obj" rows="5" value="#{globalCounter.objectList}" rowKey="#{obj[0]}" selection="#{globalCounter.selectedObjectList}">
    <p:ajax event="rowSelectCheckbox" process="@this"/>
    <p:ajax event="rowUnselectCheckbox" process="@this"/>
    <p:ajax event="toggleSelect" process="@this"/>
</p:dataTable> 
```

这应该强制您的组件在您的 bean 中填充数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T15:49:34.893

我有类似的问题，我使用`<p:ajax>`.

首先，我会按照 akoskm 所说的那样做，并拥有一个唯一的行键。

然后我会为 selectedItems 使用一个数组 (List[])（List 比 ArrayList 更通用）

最后你可以添加：

```
<p:dataTable ...>
    <p:ajax event="rowSelectCheckbox" process="@this"/>
    <p:ajax event="rowUnselectCheckbox" process="@this"/>
    <p:ajax event="toggleSelect" process="@this"/>
</p:dataTable> 
```

只要确保你有一个`<h:form>`在桌子周围

这将确保组件将数据推送到 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T20:26:21.250

您的问题与此问题非常相似： [Primefaces datatable: Unable to retrieve selected rows and selection get lost with pagination](https://stackoverflow.com/questions/12652963/primefaces-datatable-unable-to-retrieve-selected-rows-and-selection-get-lost-wi)。我会尝试 `rowKey="#{obj}"`用作键。

# mysql - MySQL效率/使用子查询与多次相同计算的最佳实践

> ID：12743819
> 
> 赞同：-1
> 
> 时间：2012-10-05T09:55:11.410
> 
> 标签：mysql, subquery

多次使用子查询与计算的最佳实践是什么？到目前为止，我一直在使用子查询，但是当您只需要从上一个查询中计算出的变量时，它们似乎太荒谬了（在下面的示例中，我们讨论的是带有子查询和子查询的查询）。

那么哪种是正确/最佳实践方法？就个人而言，作为一名程序员，我的一切都告诉我使用方法 a，因为复制粘贴计算*似乎很*愚蠢，但同时，子查询并不总是很好看，因为它可以使查询使用文件排序而不是索引排序（如果我错了，请纠正我）。

**方法 a** -*子查询*：

```
SELECT
    tmp2.*
FROM
    (
        SELECT
            tmp.*,
            (NOW() < tmp.expire_time) as `active`
        FROM
            (
                SELECT
                    tr.orderid,
                    tr.transactiontime,
                    pa.months as `months`,
                    DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH) as `expire_time`
                FROM
                    `transactions` as `tr`
                INNER JOIN
                    `packages` as `pa`
                ON
                    tr.productid = pa.productid
                WHERE
                    tr.isprocessed = '1'
                ORDER BY
                    tr.transactiontime ASC
            ) as `tmp`
    ) as `tmp2`
WHERE
    tmp2.active = 1 
```

解释：

![子查询](../Images/2521b086db50f08eedf7e79d4aa56f55.png)

**方法 b** -*重用计算*：

```
SELECT
    tr.orderid,
    tr.transactiontime,
    pa.months as `months`,
    DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH) as `expire_time`,
    (NOW() < DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH)) as `active`
FROM
    `transactions` as `tr`
INNER JOIN
    `packages` as `pa`
ON
    tr.productid = pa.productid
WHERE
    tr.isprocessed = '1'
AND
    (NOW() < DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH))
ORDER BY
    tr.transactiontime ASC 
```

解释： ![在此处输入图像描述](../Images/3b9984ce0b8b3e4a1bb68970b3d2f9e1.png)

注意如何`DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH)`重复 3 次，并`(NOW() < DATE_ADD(tr.transactiontime, INTERVAL pa.months MONTH))`重复 2 次。

似乎方法 B 要好得多，但我仍然不喜欢它必须进行 3 次相同计算的`EXPLAINs`事实（我假设它这样做，并且不保存结果并替换所有实例本身。） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:02:14.020

你应该看看 MySQL 的`EXPLAIN`命令：

[http://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

它告诉您 MySQL 如何执行查询。

# jquery - 带有淡入淡出的jQuery

> ID：12743825
> 
> 赞同：0
> 
> 时间：2012-10-05T09:55:33.593
> 
> 标签：jquery, fadein

我的代码是一个表单验证，如果没有填写而不是使用 jquery 显示 X 错误它工作正常，但我想在错误显示我希望它以淡入淡出样式时添加。谢谢。

```
function error1(act,txt1){
    hideshow1('error1',act);
    if(txt1) $('#error1').fadeIn('slow', function(txt1){

        $(this).html();

    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:58:56.737

尝试这个

```
function error1(act, txt1)
{
    hideshow1('error1', act);
    if (txt1)
    {
        $('#error1').html(txt1).fadeIn('slow');
    }

} 
```

# sql-server-2008-r2 - Sql server 2008：链接服务器不工作

> ID：12743827
> 
> 赞同：1
> 
> 时间：2012-10-05T09:55:46.727
> 
> 标签：sql-server-2008-r2, linked-server

我在 SQL Server 2008 R2 上遇到问题。

我在服务器 Y 的数据库 X 上有一个 db_datareader 用户 U。

如果我尝试使用 LINKED SERVER 从服务器 Z 连接到这些服务器 Y，我只会看到几个表，但如果与该用户直接在服务器 Y 上连接，我会看到所有表。

为什么？

# xslt - 如何在 xslt 1.0 中求平方根

> ID：12743828
> 
> 赞同：3
> 
> 时间：2012-10-05T09:55:49.653
> 
> 标签：xslt

我想在 xslt 文件中做一些计算，并且需要在公式中做一些平方根。有人可以指出是否可能以及如何请？

感谢磨坊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:37:17.577

**可以使用[FXSL](http://fxsl.sf.net)`sqrt`的模板/功能**：

一、在 XSLT 1.0 中：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
  <xsl:import href="sqrt.xsl"/>

  <!-- To be applied on any source xml. 
       This also tests the within() function 
  -->

  <xsl:output indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
     sqrt(0.25): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="0.25"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(1): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="1"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(2): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="2"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(9): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="9"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(16): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="16"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>
     sqrt(25): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="25"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>
     sqrt(36): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="36"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(49): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="49"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(64): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="64"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(81): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="81"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(100): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="100"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>

     sqrt(121): 
     <xsl:call-template name="sqrt">
        <xsl:with-param name="N" select="121"/>
        <xsl:with-param name="Eps" select="0.00001"/>
     </xsl:call-template>
  </xsl:template>

</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
 sqrt(0.25): 
 0.5000000795866174

 sqrt(1): 
 1.0000000464611474

 sqrt(2): 
 1.4142156862745097

 sqrt(9): 
 3.0000000000393214

 sqrt(16): 
 4.0000001858445895
 sqrt(25): 
 5.000000000016778
 sqrt(36): 
 6.000000002793968

 sqrt(49): 
 7.000000094930961

 sqrt(64): 
 8.000001273385879

 sqrt(81): 
 9.000009415515176

 sqrt(100): 
 10.000000000107445

 sqrt(121): 
 11.000000001323027 
```

* * *

**二、将 FXSL 2.x 用于 XSLT 2.0**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:f="http://fxsl.sf.net/">
  <xsl:import href="../f/func-sqrt.xsl"/>
  <xsl:import href="../f/func-map.xsl"/>
  <xsl:import href="../f/func-standardXpathFunctions.xsl"/>
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:value-of  separator="&#xA;" select=
     "f:map(f:round-half-to-even(f:sqrt(2, 0.000001)),
            0 to 13
          )
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
1
1.4
1.41
1.414
1.4142
1.41421
1.414214
1.4142136
1.41421356
1.414213562
1.4142135624
1.41421356237
1.414213562375
1.4142135623747 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:37:55.470

如果您使用的是 XSLT 2.0，则问题已排序——请参阅 Dimitre 的回答。如果您使用的是 XSLT 1.0，实际上在生产环境中，我仍然会选择 Dimitre 的答案。在商业上，最好使用经过测试的库而不是重新发明轮子。

但是，我认为您的问题实施独立解决方案可能会很有趣。它是！

给定这一堆值来找到...的根源

```
<squares>
  <square>0</square>
  <square>0.25</square>
  <square>1</square>
  <square>9</square>
  <square>10</square>
</squares> 
```

...当输入到此 XSLT 1.0 样式表时...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:variable name="verysmall" select="0.00001" />
<xsl:template match="/">
 <roots>
   <xsl:apply-templates select="*/square"/>
  </roots>
</xsl:template>

<xsl:template match="square">
  <root>
    <xsl:call-template name="root">
      <xsl:with-param name="x" select="." />
    </xsl:call-template>  
  </root>
</xsl:template>

<xsl:template name="root">
  <xsl:param name="x"/><!-- Assume x >= 0 -->
  <xsl:choose>
    <xsl:when test="$x > 1">
      <xsl:call-template name="iterate-root">
        <xsl:with-param name="x" select="$x" />
        <xsl:with-param name="H" select="$x" />
        <xsl:with-param name="L" select="0" />
      </xsl:call-template>  
    </xsl:when>  
    <xsl:when test="($x = 1) or ($x &lt;= 0)">
      <xsl:value-of select="$x" />
    </xsl:when>  
    <xsl:otherwise>
      <xsl:variable name="inv-root">
        <xsl:call-template name="iterate-root">
          <xsl:with-param name="x" select="1 div $x" />
          <xsl:with-param name="H" select="1 div $x" />
          <xsl:with-param name="L" select="0" />
        </xsl:call-template>
      </xsl:variable>
      <xsl:value-of select="1 div $inv-root" />
    </xsl:otherwise>  
  </xsl:choose>
</xsl:template>

<xsl:template name="iterate-root">
  <xsl:param name="x"/> <!-- Assume x > 1 -->
  <xsl:param name="H"/> <!-- High estimate -->
  <xsl:param name="L"/> <!-- Low estimate -->
  <xsl:variable name="M" select="($H + $L) div 2" />
  <xsl:variable name="g" select="($M * $M - $x) div $x" />
  <xsl:choose>
    <xsl:when test="(($g &lt; $verysmall) and ((- $g) &lt; $verysmall)) or
                    (($H - $L) &lt; $verysmall)">
      <xsl:value-of select="$M"/>
    </xsl:when>
    <xsl:when test="$g > 0">
      <xsl:call-template name="iterate-root">
        <xsl:with-param name="x" select="$x" />
        <xsl:with-param name="H" select="$M" />
        <xsl:with-param name="L" select="$L" />
      </xsl:call-template>  
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="iterate-root">
        <xsl:with-param name="x" select="$x" />
        <xsl:with-param name="H" select="$H" />
        <xsl:with-param name="L" select="$M" />
      </xsl:call-template>  
    </xsl:otherwise>
  </xsl:choose>  
</xsl:template>

</xsl:stylesheet> 
```

...产生近似解...

```
<roots>
  <root>0</root>
  <root>0.5</root>
  <root>1</root>
  <root>2.999988555908203</root>
  <root>3.1622695922851562</root>
</roots> 
```

## 笔记

该技术使用分而治之来找到方程 f(y) = y*y - x 的根，它出现在 x 的平方根处。该技术可能仅对实现优化的尾端递归的 XSLT 处理器相当有效。

# java - 如何根据文件编号在java中读取文件？

> ID：12743835
> 
> 赞同：2
> 
> 时间：2012-10-05T09:56:22.220
> 
> 标签：java, file

> **可能重复：**
> [从文本文件中读取特定行](https://stackoverflow.com/questions/2138390/read-a-specific-line-from-a-text-file)

有没有办法在java中读取文件中的一行。我的意思是如果我只想读取第100行，那么我可以直接读取它吗？或者我必须阅读整个文件，直到第 100 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:00:18.583

不，无论抽象如何，实际上都没有一种有效的方法可以“直接”从文件系统中读取第 100 行。您当然可以使用偏移量，以防每行具有固定长度的行（假设 CR 或 LF 等），仅此而已。您不能基于“行”抽象在文件中跳转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:06:57.623

您可以使用 java.io.RandomAccessFile。

移动到第 100 行使用以下行：

```
RandomAccessFile file = new RandomAccessFile("D:\\test.txt", "rw");
int totalLines = (int)file.length();
file.seek(100);
long pointer = file.getFilePointer();

for(int pt = 100; ct < totalLines; ct++){
  byte b = file.readByte(); //read byte from the file
  System.out.print((char)b); //convert byte into char
}

file.close(); 
```

有关更多详细信息，请参阅以下链接，这将对您有所帮助：http: [//tutorials.jenkov.com/java-io/randomaccessfile.html](http://tutorials.jenkov.com/java-io/randomaccessfile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:03:54.307

在大多数情况下，您需要从文件开头逐行读取。

这也有例外：

*   如果您为文件创建和维护指示每行开始位置的索引，则可以在索引中查找一行，然后`seek`将文件查找到要读取它的位置。

*   如果您的文件由固定长度的行组成，您可以将行首的位置计算为`line_no * line_length`，然后计算`seek`到该位置。

# css - 我可以为选择器使用变量吗？

> ID：12743837
> 
> 赞同：68
> 
> 时间：2012-10-05T09:56:30.963
> 
> 标签：css, variables, sass, css-selectors

我有这个变量：

```
$gutter: 10; 
```

我想在像这样的 SCSS 选择器中使用它：

```
.grid+$gutter {
    background: red;
} 
```

所以输出变成了CSS：

```
.grid10 {
    background: red;
} 
```

但这不起作用。可能吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-08T01:47:28.607

```
$gutter: 10;

.grid#{$gutter} {
    background: red;
} 
```

如果在字符串中使用，例如在 url 中：

```
background: url('/ui/all/fonts/#{$filename}.woff') 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-08T15:53:45.150

来自[关于“插值”的 Sass 参考](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)：

> 您还可以使用 #{} 插值语法在选择器和属性名称中使用 SassScript 变量：

```
$gutter: 10;

.grid#{$gutter} {
    background: red;
} 
```

此外，该[`@each`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#each-directive)指令不需要进行插值工作，并且由于您`$gutter`只包含一个值，因此不需要循环。

如果您有多个值要为其创建规则，则可以使用[Sass 列表](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#lists)和[`@each`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#each-directive)：

```
$grid: 10, 40, 120, 240;

@each $i in $grid {
  .g#{$i}{
    width: #{$i}px;
  }
} 
```

...生成以下输出：

```
.g10  { width: 10px; }
.g40  { width: 40px; }
.g120 { width: 120px; }
.g240 { width: 240px; } 
```

[这里还有一些例子。](https://gist.github.com/1464180).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T10:05:38.017

这是解决方案

```
$gutter: 10;

@each $i in $gutter {
  .g#{$i}{
     background: red;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T08:29:43.573

如果它是供应商前缀，在我的情况下，mixin 没有编译。所以我用了这个例子

```
@mixin range-thumb()
  -webkit-appearance: none;
  border: 1px solid #000000;
  height: 36px;
  width: 16px;
  border-radius: 3px;
  background: #ffffff;
  cursor: pointer;
  margin-top: -14px; 
  box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;

input[type=range]
  &::-webkit-slider-thumb
    @include range-thumb()
  &::-moz-range-thumb
    @include range-thumb()
  &::-ms-thumb
    @include range-thumb() 
```

# session - 将变量传递给远程会话Powershell中使用的几个脚本块

> ID：12743840
> 
> 赞同：1
> 
> 时间：2012-10-05T09:56:38.037
> 
> 标签：session, logging, powershell, parameter-passing, remoting

我有一个从域服务器运行并在域服务器上“工作”的脚本。

工作被划分为脚本块中的作业，这些作业使用存储的 PSsession 通过调用命令调用。

结果将记录在域服务器上的日志文件中，该日志文件名称中包含日期时间戳。

现在，我需要添加另一个日志，该日志需要驻留在完成工作的遥控器上。日志名称格式还需要包含日期和时间戳。

我的问题是将日志名称传递给每个作业，以便它们写入同一个文件。我玩过 -ArgumentList、@args 和 $args，我可以正常运行但什么也不做，所以我没有正确传递日志文件名。

下面是我如何构建脚本的超级简化版本。

将 Start-Job 嵌套在另一个脚本块中是错误的吗？我如何将我唯一的日志文件名传递给这些脚本块以捕获成功/失败和特定点？

* * *

```
#log file names, ps session and other variables declared here  

  $DoDomainWorkScriptBlock = {

    Try {

            start-job -name DoDomainWorkjob -scriptblock{

          $command = "C:\Program Files\someprogram\someprogram.exe"

          & $command  -f someargs

            If ($? -ne "True") {Throw 'Do work failed’}

            " Do non-domain work job completed. "

            }

        } Catch {$Error[0] | Out-File $ErrorLog -Append}

    }

#other jobs nested in other scriptblocks like the one above here

Invoke-Command -session $RemoteSession -scriptblock $DoDomainWorkScriptblock | Out-File $DomainProgressLog -Append

Invoke-Command -session $RemoteSession -command{Wait-Job -name DoDomainWorkjob } | Out-File $DomainProgressLog -Append

Invoke-Command -session $RemoteSession -command{Receive-Job -Name DoDomainWorkjob } | Out-File $DomainProgressLog –Append

#invoke start, wait, and receive job commands for the other jobs 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:13:17.027

您可以将参数传递给脚本块，如下所示：

```
$code = {
  param( $foo )
  Write-Host $foo
}

$bar = "bar"
Invoke-Command -ScriptBlock $code -ArgumentList $bar 
```

# postgresql - Cloudfoundry 关系“用户”不存在

> ID：12743842
> 
> 赞同：0
> 
> 时间：2012-10-05T09:56:53.083
> 
> 标签：postgresql, hibernate, cloud-foundry, relation

我目前正在尝试在 cloudfoundry 中部署我的应用程序。我的网站建立在 spring+postgre+hibernate 之上。我遇到的问题是每当我尝试访问数据库时，我都会遇到错误关系“用户”不存在。

我确信它正确连接到 postgres 数据库。但我的问题是，它似乎没有连接到我的本地数据库，而是连接到其他地方，这就是它无法访问我定义的用户表的原因。

我尝试执行一些查询，例如“select * from pg_tables”，它执行得很好，但结果与我的本地数据库不同。我还看到表所有者是 vcap。我想知道为什么会出现此错误以及如何解决它。

这几天我一直在尝试解决这些问题。但无济于事，这就是我已经在这里发布的原因。

我希望有人可以在这里帮助我。

我会很感激的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:04:33.043

[作为 ebottard 解决供应服务](http://docs.cloudfoundry.com/services.html)的评论建议的后续，预填充数据库的一种方法是使用将您的 postgres 客户端连接到 cloudfoundry postgres 数据库的隧道，如通过[隧道连接到 Cloudfoundry 服务](http://docs.cloudfoundry.com/tools/vmc/caldecott.html#prerequisites)中所述。

# java - 无法使用 SMTP 发送电子邮件（获取 javax.mail.MessagingException：无法将套接字转换为 TLS；）

> ID：12743846
> 
> 赞同：17
> 
> 时间：2012-10-05T09:57:08.403
> 
> 标签：java, ssl, smtp, jakarta-mail

我已经编写了以下代码，用于通过 SMTP 使用 javamail API 作为 TLS 发送电子邮件，因为 SSL 不受支持，但我最终遇到了以下异常。请在下面查看我的代码。我使用了调试模式，在代码下方您也可以找到异常。

```
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMailTLS {

    public static void main(String[] args) {

        final String username = "---------@mydomain.com";
        final String password = "***********";

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "mail.mydomain.com");
        props.put("mail.smtp.debug", "true");
        props.put("mail.smtp.port", "587");

        Session session = Session.getInstance(props,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
          });
        session.setDebug(true);

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new 
                  InternetAddress("---------@mydomain.com"));
            message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("---------@mydomain.com"));
            message.setSubject("Testing Subject");
            message.setText("Dear Mail Crawler,"
                + "\n\n No spam to my email, please!");

            Transport.send(message);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

异常跟踪

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: useEhlo true, useAuth true
DEBUG SMTP: trying to connect to host "mail.mydomain.com", port 587, isSSL false
220-cpanel35.per.syra.net.au ESMTP Exim 4.80 #2 Fri, 05 Oct 2012 17:28:56 +0800 
220-We do not authorize the use of this system to transport unsolicited, 
220 and/or bulk e-mail.
DEBUG SMTP: connected to host "mail.mydomain.com", port: 587

EHLO xxxxxx.xxxxx.com
250-cpanel35.per.syra.net.au Hello xxxx.xxxxx.com [xx.xx.xx.xxx]i
250-SIZE 52428800
250-8BITMIME
250-PIPELINING
250-AUTH PLAIN LOGIN
250-STARTTLS
250 HELP
DEBUG SMTP: Found extension "SIZE", arg "52428800"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "PIPELINING", arg ""
DEBUG SMTP: Found extension "AUTH", arg "PLAIN LOGIN"
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "HELP", arg ""
STARTTLS
220 TLS go ahead
Exception in thread "main" java.lang.RuntimeException: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
    javax.net.ssl.SSLException: java.lang.RuntimeException: Could not generate DH keypair
    at SendMailTLS.main(SendMailTLS.java:52)
Caused by: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
    javax.net.ssl.SSLException: java.lang.RuntimeException: Could not generate DH keypair
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1918)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:652)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at SendMailTLS.main(SendMailTLS.java:47)
Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Could not generate DH keypair
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1868)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1826)
    at sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1809)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1328)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1305)
    at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:548)
    at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:485)
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1913)
    ... 7 more
Caused by: java.lang.RuntimeException: Could not generate DH keypair
    at sun.security.ssl.DHCrypt.<init>(DHCrypt.java:123)
    at sun.security.ssl.ClientHandshaker.serverKeyExchange(ClientHandshaker.java:618)
    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:202)
    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
    at sun.security.ssl.Handshaker.process_record(Handshaker.java:804)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:998)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1294)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1321)
    ... 11 more
Caused by: java.security.InvalidAlgorithmParameterException: Prime size must be multiple of 64, and can only range from 512 to 1024 (inclusive)
    at com.sun.crypto.provider.DHKeyPairGenerator.initialize(DHKeyPairGenerator.java:120)
    at java.security.KeyPairGenerator$Delegate.initialize(KeyPairGenerator.java:658)
    at sun.security.ssl.DHCrypt.<init>(DHCrypt.java:117)
    ... 18 more 
```

谁能帮我调试一下？提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-15T21:55:29.693

注释掉该属性`mail.smtp.starttls.enable`意味着您回退到默认且不安全的连接，这仅在远程 SMTP 主机也接受端口上的不安全传输时才有效`587`（用于提交邮件的端口与用于最终传递或中继操作的端口 25）。

在我的上下文中，TLS 是强制性的`587`，任何尝试在没有 TLS 的情况下打开会话都会产生 SMTP 服务器错误响应**530 Must issue a STARTTLS command first**。

然后设置`mail.smtp.starttls.enable`为`true`单独仍然产生相同的错误**Could not convert socket to TLS**但现在有一个线索：**Server is not trust**。实际上，您必须在 JVM 启动属性中定义一个密钥库，该密钥库将包含一个以受信任的根证书结尾的证书链，或者使用此额外属性强制信任：将**mail.smtp.ssl.trust**设置为远程主机名。

例如，在 Spring 中配置对 javamail 的支持（您可以轻松地将其映射到普通的 javamail API）需要以下所有内容：

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
<property name="host" value="theRemoteSmtpServer" />
<property name="port" value="587" />
<property name="username" value="muUserID" />
<property name="password" value="myPassword" />
<property name="javaMailProperties">
    <props>
        <prop key="mail.smtp.starttls.enable">true</prop>
        <prop key="mail.smtp.ssl.trust">theRemoteSmtpServer</prop>
        <prop key="mail.smtp.auth">true</prop>
    </props>
</property>
</bean> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-12T09:27:14.360

我通过注释掉以下属性解决了这个问题

```
props.put("mail.smtp.starttls.enable", "true"); 
```

并且代码在没有错误或警告的情况下执行，或者只是从上面的源代码中删除这一行。到目前为止，它就像一个魅力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-10T18:47:22.063

确保您的防病毒软件没有阻止该应用程序。就我而言，Avast 阻止我在 Java SE 应用程序中发送电子邮件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-19T19:08:42.020

我对 smtp.gmail.com 也有同样的问题，并通过以下步骤进行了修复

1.  根据berhauz评论更改了我的代码
2.  通过此链接更改 Gmail 设置：https: [//www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-22T20:06:15.877

如果您不想使用 SSL，并且使用 smtp 而不是 smtps，请尝试以下设置

```
mail.smtp.starttls.enable=false
mail.transport.protocol=smtp 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-10T06:38:12.547

也许这个与安全性和**smtp.ssl 相关的问题不受信任，这就是问题发生的原因**。

我解决了这个问题只需添加一个属性

```
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com 
```

现在它对我来说工作正常。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-05T19:22:37.193

看起来您的服务器使用的 SSL 实现与您使用的 JDK 版本中的 SSL 实现不兼容。文件[SSLNOTES.txt](http://www.oracle.com/technetwork/java/javamail145sslnotes-1562622.html)（也包含在 JavaMail 下载包中）有一些调试技巧。您可能需要 JDK SSL 专家来解决这个问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-26T09:16:59.583

我有这个问题。原因是我们的管理员阻止了 TLS 和 SSL 协议。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-10T03:44:02.537

```
session.getProperties().put("mail.smtp.starttls.enable","true");
props.put("mail.smtp.ssl.trust", "smtp.office365.com(site where your account is)");
props.put("mail.smtp.starttls.enable", true); 
```

这些代码应该能够启动 ttls 通信并让邮件服务运行。

除此之外，防病毒软件还会创建一个防火墙来阻止握手的发生。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-27T18:13:36.633

我在这个错误上花了几个小时，直到我发现 tomcat 使用 TLS 1.1 版本，而 smtp 服务器只支持 TLS 1.2 和 1.3。

```
props.put("mail.smtp.ssl.protocols", "TLSv1.2"); 
```

将 TLS 版本设置为 1.2 解决了我的问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-02T11:35:56.440

堆栈跟踪显示问题的实际原因是：

```
java.security.InvalidAlgorithmParameterException: Prime size must be multiple of 64, and can only range from 512 to 1024 (inclusive) 
```

您遇到了不支持超过 1024 位的 DH 素数的旧版本 Java 的限制，而您的 SMTP 服务器可能需要这种限制。以下是相关的错误条目：

*   [http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6521495](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6521495)
*   [http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7044060](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7044060)

Java 8 中删除了此限制/限制（请参阅[发行说明](https://docs.oracle.com/javase/8/docs/technotes/guides/security/enhancements-8.html)）。

请注意，正如已经指出的那样，您禁用 STARTTLS 的“修复”并不是真正的修复：这意味着您的密码将以纯文本形式发送，而且这仅适用于允许端口 587 上未加密流量的 SMTP 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-03T11:16:10.843

我通过禁用病毒防护解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-07T20:15:25.980

经过一整天的战斗，这对我有用（使用 spring boot ， MailSender ， aws）

```
spring.mail.host=smtp.gmail.com
spring.mail.username=-----------@gmail.com
spring.mail.password=--------------
spring.mail.properties.mail.transport.protocol=smtp
spring.mail.properties.mail.smtp.port=465
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com 
```

# excel - Excel比较查找数字的范围

> ID：12743849
> 
> 赞同：0
> 
> 时间：2012-10-05T09:57:18.077
> 
> 标签：excel, vba

你好请考虑我的愚蠢问题，我被困在这里很久了

ElseIf Cells(m1, a) >= 1 And Cells(m1, a) <= 98 Then

单元格（m1，a）.Font.Bold = True

这里只有没有小数点的值（例如 4,56,90）等变得粗体，尽管在 rqnge 中，但带有小数点的值（4.5,56.5,90.54）没有被过滤。

请提出可能的问题

我认为问题在于法国编号系统，因为来自法国的数据。

谢谢

有什么办法可以考虑不同的编号系统，与美国系统....？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:18:18.097

你应该使用`Cells(m1,a).value`以及`Cells(m1,a).value`

下面的代码将检查在宏运行之前选择的单元格列表。对于每个单元格，如果它的值为 [1..98]，那么我会获取状态并切换它。

```
Sub toggleBoldInSelection()
    Dim cellValue
    For Each curCell In Selection
        cellValue = curCell.Value
        If (cellValue >= 1) And (cellValue <= 98) Then
            curCell.Font.Bold = Not curCell.Font.Bold 'True
        End If
    Next curCell
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:26:36.530

尝试这个

```
ElseIf Val(Cells(m1, a).Value) >= 1 And Val(Cells(m1, a).Value) <= 98 Then 
```

如果您没有从工作表代码区域运行此代码，请不要忘记完全限定单元格对象。例如

```
ThisWorkbook.Sheets("Sheet1").Cells(m1, a).Value 
```

# php - php代码出现在

> ID：12743850
> 
> 赞同：0
> 
> 时间：2012-10-05T09:57:20.790
> 
> 标签：php

我有一个记录错误的日志文件，遗憾的是我不知道 php :( 为了解决我的问题。以下行应该让我根据我的理解输入一个子网的值

```
 <td>Subnet Filter:<input name=subnet value=<?php=isset($subnet)?$subnet:"0.0.0.0/0"?>> 
```

但是当我检查网页以输入我的值时，文本框中包含以下文本：`<?php=isset($subnet)?$subnet:"0.0.0.0/0"?`。谁能向我解释发生了什么，或者我应该在哪里寻找答案。这种语法也是特定于 php4 的吗？因为我使用的是 php5 并且整个页面都充满了错误，而且它是一个下载的应用程序，所以它应该从一开始就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:59:59.063

为此使用短标签：

```
<?=isset($subnet)?$subnet:"0.0.0.0/0"?> 
```

或者如果你不能那么：

```
<?php echo isset($subnet)?$subnet:"0.0.0.0/0"; ?> 
```

你不能用 = 和`<?php`标签回显。它必须是`<?=`或`<?php echo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:00:57.533

你的行中的错误应该是

```
<?php isset($subnet)?$subnet:"0.0.0.0/0"; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:04:44.287

## 问题 1

如果您在页面上看到 PHP 代码，那么您可能没有在您的服务器上正确安装和配置 PHP。在尝试解决编码问题之前解决这个问题。

* * *

## 问题 2

您需要回显一个值

```
<?php echo somecode(); ?> 
```

* * *

## 问题 3

HTML 值属性需要用引号括起来

```
<input name="subnet" value="<?php echo isset($subnet)?$subnet:"0.0.0.0/0"; ?>">
                           ^ start here                             end here ^ 
```

我还想指出，仅仅因为您从 Internet 上的某个地方下载了 PHP 应用程序，并不意味着它应该开箱即用，或者它没有错误。

# paypal - Paypal 权限 API Java SDK：GetBasicPersonalData：获取身份验证失败

> ID：12743852
> 
> 赞同：0
> 
> 时间：2012-10-05T09:57:31.680
> 
> 标签：paypal, paypal-adaptive-payments

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:23:42.120

我们看到在 junit 测试用例中传递的标头不正确，这应该是问题所在。

{X-PAYPAL-REQUEST-DATA-FORMAT=NV, X-PAYPAL-APPLICATION-ID=APP-80W284485P519543T, **X-PP-AUTHORIZATION** =token=uJvLxPmOCPVQbfVSxkH29I53Q6c5gd6XvY40ygCQxpbpOJOWrWQ-nA,signature=6xe5sVZcHtt2YZtnOBqyor98Tl0=,timestamp=1349383983, X-PAYPAL- DEVICE-IPADDRESS=127.0.0.1, X-PAYPAL-REQUEST-SOURCE=sdk-merchant-java-1.1.93, X-PAYPAL-SANDBOX-EMAIL-ADDRESS=Platform.sdk.seller@gmail.com, X-PAYPAL-响应数据格式=NV}

**将X-PP-AUTHORIZATION**更改为**X-PAYPAL-AUTHORIZATION**，这应该可以为您解决问题。请参考您从 SDK 获得的标头值。

# android - ExpandableListView onExpand 总是将展开的组滚动到顶部

> ID：12743855
> 
> 赞同：4
> 
> 时间：2012-10-05T09:57:41.977
> 
> 标签：android, expandablelistview

我正在寻找在展开时将 expandableListView 组置于顶部的方法。我尝试了 onGroupExpand，或者在 ExpandableListView 的 performItemClick 中。

setSelectedPositionFromTop(int, int), partialy 有效，但如果它在系统启动它自己的滚动时启动，则列表被过度滚动，并且组超出屏幕。

很抱歉描述混乱，但如果不准确说明我需要什么就很难说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-13T10:38:18.077

将转录模式更改为禁用。

```
android:transcriptmode="disabled" 
```

在可扩展的列表布局中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T20:33:45.153

把它放在你的适配器中：

```
public void onGroupExpanded(final int groupPosition) {
     super.onGroupExpanded(groupPosition);

     listView.setSelectedGroup(groupPosition);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T08:45:27.180

在 onGroupExpand(int groupPosition) 中尝试 setSelection(groupPosition)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-24T12:04:48.923

我尝试了很多解决方案，但下面的代码对我有用。希望这段代码对某些人有所帮助。在 onGroupExpand 中实现 OnGroupExpandListener 使用下面的代码

```
public void onGroupExpand(final int groupPosition) {
    super.onGroupExpand(groupPosition);

    expandableListView.post(new Runnable() {

        @Override
        public void run() {
            expandableListView.setSelection(groupPosition);
            if(expandableListView.getChildAt(groupPosition)!=null)
            expandableListView.requestChildRectangleOnScreen(expandableListView.getChildAt(groupPosition),
                    new Rect(0, 0, expandableListView.getChildAt(groupPosition).getRight(), expandableListView.getChildAt(groupPosition).getHeight()), false);
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-31T13:36:43.277

我有解决这个问题的办法。这不是一个温和的，但它工作得很好。可扩展的 listView 问题是它应该按子编号移动。看来，该系统认为孩子与父母（组）的高度相同，因此如果您放置不同大小的孩子，则会导致自动滚动列表出现问题。

我的解决方案是欺骗 list 认为它有更多的孩子。如果我的孩子是组的两倍，我只返回该组有 2 个孩子的信息。现在，由于它是数据构造列表，我检查我的数据，是否有 2 个孩子的数据，或者只有 1 个，如果我没有第二个孩子的数据，我知道我可以将 0 高度视图作为第二个孩子。

当我必须与小组一起制作列表时，它工作得很好，而不是与 1 个大孩子一起制作。

由于我的问题没有答案，我发布了这个，它可能会对某人有所帮助。

# javascript - 在网站上点赞应该在 Facebook 上点赞

> ID：12743856
> 
> 赞同：2
> 
> 时间：2012-10-05T09:57:46.643
> 
> 标签：javascript, html, facebook-javascript-sdk

从这里我得到了那个代码，我把它放在我的网站本地主机中，但看不到任何变化。谁能帮我这个我从这里得到代码`http://developers.facebook.com/docs/reference/plugins/like/` 我的代码是这样的

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.facebook.com/anicrave.shows" data-send="true" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:08:10.540

请检查此链接并将引用添加到您的页面。 [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

为了显示预期结果，您缺少 FB-SDK 的重要部分。

```
 <div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

# forms - Wordpress：静态页面，但一页有帖子，一页有联系表格

> ID：12743858
> 
> 赞同：0
> 
> 时间：2012-10-05T09:58:01.823
> 
> 标签：forms, wordpress, static, contact, posts

我从头开始为 wordpress 设置了一个新的自定义模板，只有六个静态页面。

现在，我有两个问题/问题：

1.  我如何在**其中一个**页面上发布帖子（不带评论）？目的是，五个页面只是给出静态内容，但其中只有**一个**页面应该在其他静态网站中显示诸如小日记/博客之类的帖子。现在使用给定的代码（见下文），所有六个页面都只给出了 Wordpress 中“页面”中的静态内容，这没关系，但我就是不知道如何将帖子放在这六个页面的一个页面上.

2.  如何在其中一个静态页面上添加联系人表单？我的意思是，他们都通过我的 index.php 或 pages.php 获得相同的输入，但是我在哪里设置联系表单的 PHP 代码以及如何将其插入其中一个页面（例如 CONTACT）？

这是我到目前为止的代码：

索引.php

```
<?php get_header(); ?> 

<?php if (have_posts()) : while (have_posts()) : the_post();?>  
<?php the_content(); ?>  
<?php endwhile; endif; ?>  

<?php get_footer(); ?> 
```

页面.php

```
<?php get_header(); ?> 

<?php if (have_posts()) : while (have_posts()) : the_post();?>  
<?php the_content(); ?>  
<?php endwhile; endif; ?>  

<?php get_footer(); ?> 
```

先感谢您。

* * *

**清理事情**：

**问题1**：

我在 wordpress 中有一个静态网站，有六个页面（请参阅 www.studio-scs.de，如果有帮助的话），当然，这六个页面会加载整个 page.php 页面的内容。

我现在的问题是，我需要这六个页面中的一个（例如TERMINE）来显示帖子，而其他六个仍然显示没有帖子，但页面内容。

**但是，如果所有链接/页面都引用page.php** ，我怎么能做到这一点，它的代码只是声明没有 POSTS 的 PAGE 内容（见上文）？

**问题2**：

在其他五个页面之一上，我想添加一个联系表单，当然，它需要在页眉中添加一些 PHP 代码。

但是，如果所有页面都由 page.php 使用相同的代码加载，我该如何以及在哪里插入呢？我是否必须将其输入 header.php 并让它一直加载在那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:23:22.843

Excaly 我不明白你的意思，我认为你想在同一页面上添加帖子和联系表格 7。

然后使用此代码。

```
<?php /* Template Name:ABC*/ ?>

<?php get_header(); ?>

<?php
global $post;
$args = array( 'numberposts' => LIMIT OF POST, 'category' => CATEGORY ID );

$myposts = get_posts( $args );
foreach( $myposts as $post ) :
setup_postdata($post); ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php endforeach; ?>

<!--Contact Form Start Here-->

<?php echo do_shortcode('[CONTACT FORM SHOT CODE HERE]'); ?>

<!--Contact Form END Here-->

<?php get_sidebar();

get_footer();

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:00:27.223

对于您的**第一个问题**，创建一个新模板并将 POST 函数放在那里并将该模板添加到仪表板->页面->右侧->模板并从下拉列表中选择模板。![在此处输入图像描述](../Images/fe481eaab9903c15706cab9bb84ba79c.png)

无罪

对于问题 2

将您的 PHP 代码添加到 HEADER.php 一次，每次调用并仅显示需要的特定页面。

# javascript - PEG.js 输入结束问题

> ID：12743859
> 
> 赞同：5
> 
> 时间：2012-10-05T09:58:03.187
> 
> 标签：javascript, parsing, peg, pegjs

我正在尝试为 PEG.js 编写一个简单的语法，它可以匹配如下内容：

```
some text;
arbitrary other text that can also have µnicode; different expression;
let's escape the \; semicolon, and \not recognized escapes are not a problem;
possibly last expression not ending with semicolon 
```

所以基本上这些是一些用分号分隔的文本。我的简化语法如下所示：

```
start
= flow:Flow

Flow
= instructions:Instruction*

Instruction
= Empty / Text

TextCharacter
= "\\;" /
.

Text
= text:TextCharacter+ ';' {return text.join('')}

Empty
= Semicolon

Semicolon "semicolon"
= ';' 
```

问题是，如果我在输入中输入分号以外的任何内容，我会得到：

```
SyntaxError: Expected ";", "\\;" or any character but end of input found. 
```

如何解决这个问题？我读过 PEG.js 无法匹配输入的结尾。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T12:02:37.707

你有（至少）2个问题：

您`TextCharacter`不应该匹配*任何字符*（`.`）。它应该匹配除反斜杠和分号之外的任何字符，或者它应该匹配转义字符：

```
TextCharacter
 = [^\\;]
 / "\\" . 
```

第二个问题是您的语法要求您的输入以分号结尾（但您的输入不以 结尾`;`）。

像这样的东西怎么样：

```
start
 = instructions

instructions
 = instruction (";" instruction)* ";"?

instruction
 = chars:char+ {return chars.join("").trim();}

char
 = [^\\;]
 / "\\" c:. {return ""+c;} 
```

它将按如下方式解析您的输入：

```
[
   "some text",
   [
      [
         ";",
         "arbitrary other text that can also have µnicode"
      ],
      [
         ";",
         "different expression"
      ],
      [
         ";",
         "let's escape the ; semicolon, and not recognized escapes are not a problem"
      ],
      [
         ";",
         "possibly last expression not ending with semicolon"
      ]
   ]
] 
```

请注意，尾随分号现在是可选的。

# javascript - window.name 作为 cookie 的替代品

> ID：12743863
> 
> 赞同：2
> 
> 时间：2012-10-05T09:58:10.277
> 
> 标签：javascript, cookies, session-cookies

我需要为同一会话的每个选项卡/窗口存储唯一数据，因此我不能使用 cookie。此外，这些天 chrome 似乎在浏览器重新启动时保留会话 cookie。所以我使用 window.name 作为存储所需数据的方式。

我对 window.name 的使用是在一个可以被其他人嵌入的脚本中。所以我想知道哪些其他库使用 window.name （我相信它用于跨域数据传输）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-05T10:24:32.410

`window.name`在现代浏览器中没有跨不同域保存，因此它被放弃用于跨域数据传输。

# date - 批处理文件通过将当前日期/时间添加到文件名的开头来重命名文件夹中的所有文件

> ID：12743865
> 
> 赞同：1
> 
> 时间：2012-10-05T09:58:11.483
> 
> 标签：date, time, batch-file, rename

我似乎无法理解批处理文件如何将 yyyy/mo/dd/hh/mm/ss 添加到文件名的开头。（使用 Windows 7）精确到秒很重要。

它实际上不必是批处理文件，它只需要是一个小程序，只要我将文件添加到文件夹，目录监视器就可以执行它：http: [//brutaldev.com/page/Directory-Monitor.aspx](http://brutaldev.com/page/Directory-Monitor.aspx) 我只认为批处理文件将是最简单和最有效的方法，但欢迎任何其他建议。

我使用许多具有重叠文件名的按顺序编号的文件，每当我将它们添加到文件夹时，我需要一种快速重命名它们的方法，这样就永远不会有任何同名的文件，但它们仍将保持按顺序排列。这就是我想到将当前日期和时间添加到文件名开头的方式以及为什么秒很重要，因为我可以在一分钟内轻松地将多个集合添加到一个文件夹中，但肯定不会在一秒内。如果批处理文件可以忽略文件扩展名并简单地将当前日期/时间添加到添加到文件夹中的任何文件的开头，那将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T08:54:18.960

此代码的前四行将为您提供 XP Pro 及更高版本中可靠的 YY DD MM YYYY HH Min Sec 变量。

```
@echo off
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%"

set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%" & set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%"
echo datestamp: "%datestamp%"
echo timestamp: "%timestamp%"
echo fullstamp: "%fullstamp%"

:: this line will rename the files in the current folder which haven't already
:: been renamed by checking for the fullstamp format at the start of the line
:: but it will skip this batch file

for /f "delims=" %%a in ('dir /b /a-d ^|findstr /v "^[0-9]*-[0-9]*-[0-9]*_[0-9]*-[0-9]*-[0-9]*" ') do if /i not "%%a"=="%~nx0" ren "%%a" "%fullstamp% - %%a"

pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:14:19.813

```
 @ECHO off
   SETLOCAL
   IF [%1] NEQ [] goto s_start

   :: Author - Simon Sheppard, July 2003
   :: Tested for Windows NT, 2K, XP 

   ECHO STAMPME.cmd
   ECHO REName a file with the DATE/Time
   ECHO.
   ECHO SYNTAX
   ECHO       STAMPME TestFile.txt
   ECHO.
   ECHO       STAMPME "Test File.txt"
   ECHO.
   ECHO       STAMPME "c:\docs\Test File.txt"
   ECHO.
   ECHO       In a batch file use CALL STAMPME ...

   :: To change the filename format just change around the last line below

   GOTO :eof

   :s_start

    SET _file=%~n1%
    SET _pathname=%~f1%
    SET _ext=%~x1%

    ::Get the date
   ::  note ISO 8601 date format would require 4 digit YYYY Year)

   FOR /f "tokens=6-8 delims=/ " %%G IN ('NET TIME \\%computername%') DO (
         SET _mm=%%G
         SET _dd=%%H
         SET _yy=%%I
     )

   :: Get the time
   FOR /f "tokens=2-4 delims=:." %%G IN ('cmd /c "time<nul"') DO (
         SET _hr=%%G
         SET _min=%%H
     SET _sec=%%I
     GOTO :done
   )
:done
   ECHO Today is Year: [%_yy%] Month: [%_mm%] Day: [%_dd%]
   ECHO The time is:   [%_hr%]:[%_min%]:[%_sec%]

   REN "%_pathname%" "%_hr%-%_min%-%_sec%@%_file%%_ext%" 
```

这似乎对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T17:44:39.900

我更喜欢不依赖于本地设置的解决方案（wmic 总是提供相同的格式）：

```
@echo off
setlocal EnableDelayedExpansion
for %%a in (a.*) do (
  for /f %%i in ( 'wmic os get localdatetime /value ^|find "Local"' ) do set %%i
    set ldt=!LocalDateTime:~0,4!-!LocalDateTime:~4,2!-!LocalDateTime:~6,2!-!LocalDateTime:~8,2!-!LocalDateTime:~10,2!-!LocalDateTime:~12,2!-!LocalDateTime:~15,3!

    echo seconds        ### ren %%a !LocalDateTime:~0,14!%%a
    echo milliseconds   ### ren %%a !LocalDateTime:~0,18!%%a
    echo with separator ### ren %%a !ldt!-%%a
) 
```

# sql - 如何在sql中按每周到最后六个星期的星期日日期分组？

> ID：12743869
> 
> 赞同：-2
> 
> 时间：2012-10-05T09:58:14.630
> 
> 标签：sql, sql-server, sql-server-2008, pivot

目前正在编写报告。我需要的是样品表，

```
Instance Type   Sep-23  Sep-16  Sep-09  Sep-02  Aug-26  Aug-19
-------------------------------------------------------------------------
Early ASN        4        2      4        1       1       2
Late ASN         2        1      5        3       1       1
     Sum         6        3      9        4       2       3 
```

但实际表是，

```
SPGI01_INSTANCE_TYPE_C  SPGI01_CREATE_S
--------------------------------------------------------------
Early ASN                9/17/2012 12:00:00.000
Early ASN           9/18/2012 10:06:11.000
Early ASN           9/19/2012 8:00:04.000
Early ASN           9/20/2012 3:00:05.000
Early ASN           9/10/2012 12:00:07.000
Early ASN           9/11/2012 12:00:32.000
Early ASN           9/3/2012 12:00:17.000
Early ASN           9/4/2012 10:06:00.000
Early ASN           9/5/2012 8:00:00.000
Early ASN           9/6/2012 3:00:00.000
Early ASN           8/31/2012 12:00:00.000
Early ASN           8/26/2012 12:00:00.000
Early ASN           8/14/2012 12:00:00.000
Early ASN           8/15/2012 12:00:00.000
Late ASN            9/17/2012 12:00:00.000
Late ASN            9/18/2012 10:06:00.000
Late ASN            9/11/2012 12:00:00.000
Late ASN            9/3/2012 12:00:00.000
Late ASN            9/4/2012 10:06:00.000
Late ASN            9/5/2012 8:00:00.000
Late ASN            9/6/2012 3:00:00.000
Late ASN            9/6/2012 2:00:00.000
Late ASN            8/31/2012 12:00:00.000
Late ASN            8/31/2012 12:00:00.000
Late ASN            8/31/2012 12:00:00.000
Early ASN           8/15/2012 12:00:00.000 
```

我需要按“SPGI01_INSTANCE_TYPE_C”列分组，并将每个星期的星期日分组到最后六个星期的星期日。在这里我粘贴了两个示例表，一个表是我想要的，另一个表是我拥有的。给我这个解决方案。

我的疑问是，

```
SELECT distinct I01.[SPGI01_INSTANCE_TYPE_C],
count (I01.[SPGI01_INSTANCE_TYPE_C])
  FROM [SUPER-G].[dbo].[CSPGI01_ASN_ACCURACY] I01,
  [SUPER-G].[dbo].[CSPGI50_VALID_INSTANCE_TYPE] I50

where
I01.[SPGA02_BUSINESS_TYPE_C] = 'prod'
and
I01.[SPGA03_REGION_C] in( 'ap','na','sa','eu')
and 
I01.[SPGI01_SUB_BUSINESS_TYPE_C] = 'PRD'
and
(I01.[SPGI01_CREATE_S] between '2012-01-01 12:00:00.000' AND DATEADD(day , 7, '2012-01-15 00:00:00.000'))

and
I01.[SPGI01_EXCEPTIONED_F] = 'N'
and
I01.[SPGI01_DISPUTED_F] != 'Y'
and
I50.[SPGI50_INSTANCE_TYPE_C] = I01.[SPGI01_INSTANCE_TYPE_C]
and 
I50.[SPGA04_RATING_ELEMENT_D] = 1
group by I01.[SPGI01_INSTANCE_TYPE_C] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:50:04.527

我对您发布的数据做了一些假设。

首先，您发布的所有值都表示年份，`2011`但作为列标题的最终结束日期不对应`2011`，它们是`Sunday`值，`2012`因此我更改了数据。也是 的最后一个条目`Early ASN 8/15/2011 12:00`，我相信应该是一个`Late ASN`条目，否则总数要匹配。

要获得结果，您需要应用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能。此函数允许您聚合值，然后将它们转换为列。

```
SET DATEFIRST 1 -- set this so the start of the week is Sunday
select InstanceType,
  sum([39]) as Sep_23, 
  sum([38]) as Sep_16, 
  sum([37]) as Sep_09, 
  sum([36]) as Sep_02, 
  sum([35]) as Aug_26, 
  sum([34]) as Aug_19
from
(
  select SPGI01_INSTANCE_TYPE_C as InstanceType,
    [39], [38], [37], [36], [35], [34]
  from
  (
    select SPGI01_INSTANCE_TYPE_C,
      DatePart(wk, SPGI01_CREATE_S) WeekNo,
      DATEADD(DAY, 7 -DATEPART(WEEKDAY,SPGI01_CREATE_S),SPGI01_CREATE_S) WeekEnd
    from table1
  ) x
  pivot
  (
    count(WeekEnd)
    for weekno in ([39], [38], [37], [36], [35], [34])
  ) p
) x1
group by InstanceType with rollup 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7d806/31)

# dropbox - 使用 dropboxuploader.php 登录时出现 Dropbox - 403 错误

> ID：12743873
> 
> 赞同：2
> 
> 时间：2012-10-05T09:58:40.170
> 
> 标签：dropbox

嘿，我正在使用 dropboxuploader.php 登录到保管箱。一切正常，但是当我昨天上班时，我无法再连接。这就是 Dropbox 返回给我的内容。

```
HTTP/1.1 100 Continue

HTTP/1.1 403 Forbidden
Server: nginx/1.2.3
Date: Thu, 04 Oct 2012 08:44:36 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive 
```

您似乎试图做一些我们无法验证的事情。您是否在不同的窗口中登录了不同的 Dropbox 帐户？尝试单击`<a href="#" onclick="history.go(-1); return false;">here</a>`以返回您来自的页面，或者直接去`<a href="/home">home</a>.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:54:24.740

用以下代码替换登录功能，它应该可以工作：

```
protected function login() {
    $data = $this->request('https://www.dropbox.com/login');

    $str = '<input type="hidden" name="t" value="';
    $start = strpos($data,$str);

    $val = "";
    if($start !== false)
    {

        $val = substr($data,$start+strlen($str),24);
    }

    $data = $this->request('https://www.dropbox.com/login', true, array('login_email'=>$this->email, 'login_password'=>$this->password, 't'=>$val));

    if (stripos($data, 'location: /home') === false)
        throw new Exception('Login unsuccessful.');

    $this->loggedIn = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T08:12:12.047

只需更新您的保管箱上传器文件，而不是进行修复。

[https://github.com/jakajancar/DropboxUploader](https://github.com/jakajancar/DropboxUploader)

# node.js - NODE.JS 访问 socket.IO 事件处理程序中的共享变量

> ID：12743875
> 
> 赞同：1
> 
> 时间：2012-10-05T09:58:41.107
> 
> 标签：node.js, socket.io

我正在使用 NODE.JS 和 socket.IO 做一个实验性的在线扑克游戏。游戏需要 3 名玩家加入才能开始。我使用 socket.IO 来监听加入玩家的连接。每当有3名玩家来时，他们将组成一个小组。目前我使用一些共享变量来做到这一点。但是如果有很多玩家同时进来，我担心会导致同步问题。从代码片段中可以看出，播放器、组、groupNumber、comingPlayer、客户端都在多个“连接”事件处理程序之间共享。因此，当一个事件处理程序被执行并且另一个事件处理程序被 V8 引擎调度时，它可能会破坏这些共享变量的状态。

我使用谷歌做了一些研究，但没有找到满意的答案。所以我在这里发帖看看有没有专家可以帮助我。提前致谢！

```
var clients = {}; // {"player1": 1} {"player2": 1} {"player3": 1}
var groups = {};  // {"1": ["player1", "player2", "player3"]
var groupNumber = 1; // the current group number
var comingPlayers = 0; // a temporary variable for the coming players
var players = []; // a temporary array containing the players which have not formed 1 group

socket.on('connection', function(client) {                                                                                                  
    sockets[client.id] = client;
    players.push(client.id);
    clients[client.id] = groupNumber;
    comingPlayers++;
    if (comingPlayers === 3) { // now there are 3 players which can compose 1 group
        groups[groupNumber] = arrayClone(players);
        gamePlay(groupNumber);
        players = [];
        groupNumber++;
        comingPlayers = 0;                                                                       
    }          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T01:46:49.970

您显示的代码是原子的（它将在另一个事件处理程序运行之前完全完成），因此您不应该有任何同步问题。请记住，在节点中，所有用户编写的代码都在单个线程中运行。如果其他人试图连接，它不会打断你正在做的事情。

# rest - UDDI 存储库的替代方案是什么？

> ID：12743880
> 
> 赞同：2
> 
> 时间：2012-10-05T09:59:11.620
> 
> 标签：rest, soa, uddi

RESTful 服务是否有一些存储库，例如用于 Web 服务的 UDDI？

请告诉我拒绝服务的网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:11:31.287

如果您正在寻找标准，那么[SOA 存储库工件模型和协议](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=s-ramp)基本上是 UDDI 的 REST 替代品。它基于 AtomPub 协议。

如果您正在寻找产品，那么有很多可用的工具。我过去使用过[WSO2 Governance Registry](http://wso2.com/products/governance-registry/)，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:09:40.857

我知道没有这样的服务。

此外，我也不知道任何可用的 UDDI 存储库。

# facebook - 页面推荐框

> ID：12743886
> 
> 赞同：0
> 
> 时间：2012-10-05T09:59:22.850
> 
> 标签：facebook, facebook-page, recommendation-engine

我想在我的页面 fb.com/elizawashere.nl 上有 Facebook 推荐框，但即使输入公司地址后它仍然没有显示。我错过了一个复选框还是没有在所有页面上推出？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:08:22.470

您可以从这里获得更多信息 [http://developers.facebook.com/docs/reference/plugins/recommendations/](http://developers.facebook.com/docs/reference/plugins/recommendations/)

# emacs - 将不同模式下的相似命令绑定到同一个键

> ID：12743894
> 
> 赞同：0
> 
> 时间：2012-10-05T09:59:50.977
> 
> 标签：emacs, key-bindings, evil-mode

我在多种模式（ESS、Auctex、Slime、elisp 等）中使用 emacs，所有这些都使用邪恶模式键绑定。每种交互模式都有类似的功能，用于评估我使用空格键作为前缀绑定到快捷方式的区域、行或缓冲区。

```
;; bind slime's eval and elisp eval to the key sequence "<SPC>e"
(evil-define-key 'normal lisp-mode-map (kbd "<SPC>e") 'slime-eval-last-expression)
(evil-define-key 'normal lisp-interaction-mode-map (kbd "<SPC>e") 'eval-last-sexp) 
```

我想为函数的“类型”设置一个默认键，这样我就不需要为我使用的每个交互模式和每个命令都有一个像上面这样的条目。这有望提供一个更具可读性的 .emacs init 文件，并使将来更改我的键绑定更容易。

我相当确定我可以自己使用一系列钩子来做到这一点，但我想知道是否有任何现有或内置的支持？

谢谢

张量积

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:22:54.470

我对 Evil 一无所知，所以我将给出正常的 Emacs 解决方案：

```
(global-set-key [?\s ?e] #'my-eval-last-sexp)
(defvar my-eval-last-sexp-command #'undefined)
(defun my-eval-last-sexp ()
  (interactive)
  (call-interactively my-eval-last-sexp-command))
(add-hook 'emacs-lisp-mode-hook
          (lambda () (set (make-local-variable 'my-eval-last-sexp-command) #'eval-last-sexp))
(add-hook 'lisp-mode-hook
          (lambda () (set (make-local-variable 'my-eval-last-sexp-command) #'slime-eval-last-expression))
... 
```

如您所见，只有一次提及您想要的密钥（在本例中为 [?\s ?e]）。但是，您必须编写的代码量并没有节省多少。您可以通过使其`my-eval-last-sexp`更复杂一些来改进它（例如，它可以尝试从主要模式名称中猜测命令名称），或者通过将钩子函数替换为全局 alist。

希望在未来的某些 Emacs 中，所有与某些解释器/编译器交互的源代码模式都将共享更多代码，这样您的问题就会消失。

# mongodb - MongoDB/Mongoose：不能让最简单的 MapReduce 工作

> ID：12743897
> 
> 赞同：0
> 
> 时间：2012-10-05T10:00:12.133
> 
> 标签：mongodb, mapreduce, grouping, mongoose

您好，我要做的就是获取每个不同部门类型的计数：

```
fnMap = function() { 
  emit(this.departments.departmentType, {typeCount:1} ); 
} 

fnReduce = function(key, values) { 
  var result = {typeCount: 0}; 
  values.forEach(function(value) {
    result.typeCount += value.brandCount;
  });

  return result;             
};

var command = {
mapreduce : "clients", 
query     : {"departments.departmentType": {$exists: true}},
map       : fnMap.toString(), 
reduce    : fnReduce.toString(),    
    //sort: {"departments.departmentType":1}, 
    out: {inline: 1}   
};

mongoose.connection.db.executeDbCommand(command, function(err, dbres) {

    }); 
```

执行该命令时，dbres.documents[0].results 仅包含一项具有部门类型总数的项，而不是每个部门类型一项及其计数的多项。

任何想法我做错了什么？

此外，当我取消注释 SORT 行时，我收到错误“db assertion failure: could not create cursor over...”，我相信字段名称写正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:23:04.453

Mongoose v3 现在有一个`Model.mapreduce()`功能[（参见文档）](http://mongoosejs.com/docs/api.html#model_Model-mapReduce)。

显示的完整示例是：

```
var o = {};
o.map = function () { emit(this.name, 1) }
o.reduce = function (k, vals) { return vals.length }
o.out = { replace: 'createdCollectionNameForResults' }
o.verbose = true;
User.mapReduce(o, function (err, model, stats) {
  console.log('map reduce took %d ms', stats.processtime)
  model.find().where('value').gt(10).exec(function (err, docs) {
    console.log(docs);
  });
}) 
```

我认为 count 的问题是因为在您的 fnReduce() 函数中，您正在获取结果，而不是在数组中显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:37:35.693

您可以使用：

```
db.clients.distinct("departments.departmentType") 
```

这将给出一个包含所有不同部门类型值的数组。

你的 map/reduce 有两个问题。一种是reduce 中的brandCount 而不是typeCount。但更重要的是，当您需要为每个部门数组元素发出一次时，您会尝试为每个文档发出一次。更正（并略微简化）的代码：

```
> fnMap = function () {
    this.departments.forEach(
       function (d) {
          emit(d.departmentType, 1);
       }
    );
}
> fnReduce = function (key, values) {
    var result = 0;
    values.forEach(
       function (value) {result += value;});
    return result;
} 
```

# plugins - FV WordPress Flowplayer 中的 Google Analytics 事件跟踪

> ID：12743899
> 
> 赞同：0
> 
> 时间：2012-10-05T10:00:14.553
> 
> 标签：plugins, google-analytics, wordpress

我在我的 wordpress 网站中使用 FV WordPress Flowplayer 来显示视频。我想在我的一些视频中添加谷歌分析事件跟踪。有任何想法吗？我认为这个插件不支持这个。还有其他插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:30:35.273

您可以很容易地创建集成。Flow Player 支持用于收听播放、暂停和完成等 API。您可以使用 javascripot 监听这些事件并在它发生时触发一个事件。

eg: // 获取第一个播放器 var api = flowplayer();

```
api.bind("finish", function(e, api) {

   _gaq.push(['_trackPageview', 'Video', 'play']);

}); 
```

有关流播放器 API 的更多信息：

[http://flowplayer.org/docs/api.html](http://flowplayer.org/docs/api.html)

**更新**

我发现流播放器已经与谷歌分析集成。

[http://flowplayer.org/docs/analytics.html](http://flowplayer.org/docs/analytics.html)

# build - TeamCity - 在一个项目中检出两个不同分支的内容

> ID：12743901
> 
> 赞同：1
> 
> 时间：2012-10-05T10:00:22.370
> 
> 标签：build, msbuild, branch, teamcity, build-automation

我希望能够将主分支的所有内容以及另一个分支的内容检出到 TeamCity 构建代理中的同一工作目录中。

例如

我想要以下脚本：

```
example1\branch\scripts
example2\branch\sqlscripts 
```

被转移到代理工作目录。

```
....\workingdirectory\scripts
....\workingdirectory\sqlscripts 
```

目前我只有项目的主要分支这样做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:12:12.497

经过一番调查，发现上述问题可以通过在VCS选项卡下的客户端映射信息选项卡中添加分支位置来解决。

# highcharts - Highcharts - 将背景图像应用于容器 div

> ID：12743904
> 
> 赞同：0
> 
> 时间：2012-10-05T10:00:46.483
> 
> 标签：highcharts

我需要将背景图片添加到 highcharts 的容器 div

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T10:17:58.820

我认为这将满足您的需求：http: [//jsfiddle.net/RYvcJ/2/](http://jsfiddle.net/RYvcJ/2/)。

只需为整个图表设置透明颜色并使用 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T12:34:02.583

只需将其设置在对象图表中`highcharts`，并根据需要设置图像的 x,y 位置和宽度和高度

```
events: {
                load: function() {
                    this.renderer.image('img/SqueezeBallEggOran500.jpg', -28, -5, 345, 301).add();  // add image(url, x, y, w, h)
                }
            } 
```

# android - Couchbase 是否只能将特定的数据子集复制到特定节点？

> ID：12743906
> 
> 赞同：1
> 
> 时间：2012-10-05T10:00:51.137
> 
> 标签：android, nosql, couchbase

我有以下用例：

我想在服务器上使用 Couchbase 来存储数据，并在移动设备上使用 Couchbase for Android。我想使用 Couchbase 同步来在线和离线处理数据并最终同步。但我不希望不同的客户端将所有数据同步到设备上，只是一个特定的子集。客户端应该同步哪个子集，应该由客户端控制，并且应该动态更改。

Couchbase 是否能够处理这种情况？如果，你能给我一些关于匹配文件的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:42:16.187

Couchbase can not do this. More importantly I can't think of any solution that would. Couchbase is a clustered nosql solution. Others are caching solutions or databases. They store data. The logic of syncing the data between different stores and the syncing of sub-sets of data would have to be done within your application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T01:05:51.917

Sync Gateway 现在处理允许用户访问频道的逻辑，然后根据每个文档所属的频道包含数据子集。

[http://docs.couchbase.com/sync-gateway/#channels](http://docs.couchbase.com/sync-gateway/#channels)

# iphone - 为什么我们在 iOS 中的方法名前加上“+”或“-”号

> ID：12743909
> 
> 赞同：0
> 
> 时间：2012-10-05T10:00:53.413
> 
> 标签：iphone, objective-c, ios, ipad

> **可能重复：**
> [Objective-C：类与实例方法？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)

为什么我们在 iOS 中的方法名前加上“+”或“-”号。请帮助我了解符号逻辑，这有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T10:03:48.593

它与符号无关；

`+`意味着该方法是一个类方法，也就是说，它对类本身而不是实例进行操作（或者更确切地说，它的范围是）。许多其他语言中对应的东西是`static`.

`-`表示该方法是实例方法，即对类的实例进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:10:52.200

```
`@interface MyClass : NSObject
{
}

+(id) someMethod;  // declaration of class method

-(id) someMethod;  // declaration of instance method

@end` 
```

实例方法应用于类的实例，因此它们需要应用对象并可以访问其调用者的成员。

另一方面，类方法适用于整个类，它们不依赖于任何对象。

检查此链接以获取正确的知识[链接](http://www.techotopia.com/index.php/Writing_Objective-C_Class_Methods)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:02:21.810

减号`-`表示实例[方法](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Static_methods)。加`+`号是[类方法](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Class_methods)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T10:03:15.007

前导 + 号表示类方法，- 号表示实例方法。

旁注：这里不应该问这个问题 - 更仔细地阅读该教程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T10:03:30.873

`-`前缀表示实例方法，前缀`+`表示类（或静态）方法。

有关更多信息，请参阅[此](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)（和许多其他）SO 帖子。

# c# - 实践中的多态性c#

> ID：12743913
> 
> 赞同：0
> 
> 时间：2012-10-05T10:01:20.963
> 
> 标签：c#, polymorphism

所以我目前有一个地址簿程序（目的是基本的，因为不想写任何更花哨的东西）所以正在完成一个评估模块（这不是学校作业）。

我必须在这个模块中演示多态性、封装和继承。

我想知道实现 IEnumerable 是否算作如下所示的多态性？

```
public class AddressBookEnumerator : IEnumerator
{
    #region IEnumerable Implementation
    public Person[] Contacts;
    int Position = -1;

    public AddressBookEnumerator(Person[] ContactList)
    {
        Contacts = ContactList;
    }

    public bool MoveNext()
    {
        Position++;
        return (Position < Contacts.Length);
    }

    public void Reset()
    {
        Position = -1;
    }

    object IEnumerator.Current
    {
        get
        {
            return Current;
        }
    }

    public Person Current
    {
        get
        {
            try
            {
                return Contacts[Position];
            }
            catch (IndexOutOfRangeException)
            {
                throw new InvalidOperationException();
            }
        }
    }
    #endregion
} 
```

我只是想知道是不是因为继承了 IEnumerator 类，然后为我的特定类创建了具有不同行为的新方法？或者我只是误解了 IEnumerator 的工作原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:07:07.900

[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)是一个

> 允许使用统一接口处理不同数据类型的值的编程语言功能。

在提供的当前代码中，我只看到您操作的*一种数据类型。*

实现`IEnumerable`是关于订阅给定接口的*合同*，因此您的类型*可能*会像该接口一样受到威胁。我个人不会像示例那样演示*此*代码。`polymorphism`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:22:18.390

我会尝试快速分解它，

```
interface IOrganism
{
    string GetSpecies();
}

abstract class Animal : IOrganism
{
    abstract string GetSpecies();
}

class Rat : Animal
{
   public virtual string GetSpecies()
   {
      return "Ratus";
   }
}

sealed class BlackRat : Rat
{
    public override string GetSpecies()
    {
       return string.Format("{0} Ratus", base.GetSpecies()));
    }
} 
```

`Animal`,`Rat`并且`BlackRat`都是多态的`IOrganism`。`Rat`并且与`BlackRat`是多态的`Animal`。最后，`BlackRat`是多态的`Rat`。

* * *

这意味着，我可以写一个函数，

```
void OutputSpecies(IOrganism organism)
{
    Console.WriteLine(organism.GetSpecies());
} 
```

它可以接受 的任何实现者`IOrganism`，无论是 是`Rat`，`BlackRat`还是未来的某个实现者，因为它们都是多态的`IOrganism`。

* * *

因此，要回答最初的问题，实现一个接口，例如`IEnumerable`并将其用作函数的参数，就是使用多态性。但是，您的代码只是实现了`IEnumerator`，所以是一半。它显示了多态性的潜力，但在实践中没有多态性。

此外，`IEnumerator`用作示例可能会分散您对所需任务的注意力，您可能最好让您的示例更加抽象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T10:32:06.140

虽然您可以考虑将接口级别的类型视为多态性，但对于更学术的方法，他们可能更多地沿着这种思路思考？

在这里我们看到：

*   从抽象基类继承`Employee`
*   当我们提到`GetBonusMultiplier`方法时，封装/多态。我们能够从抽象基类中引用该方法，并且我们也不知道每种类型如何确定基乘数的内部结构。我们所知道/关心的是，当我们调用该方法时，我们会返回一个 int 值。

如果您想将 Employee 更改为接口`IEmployee`，那将很简单。不过，我可能仍然有某种抽象基础来捕获公共字段，因此您不必在每个实现的类中重新实现`IEmployee`.

```
class Program
{
    static void Main(string[] args)
    {
        var employees = new List<Employee>
        {
            new Manager(1, "Dave Smith"),
            new Director(2, "Peter Thompson")
        };

        foreach (Employee employee in employees)
        {
            Console.WriteLine(string.Format("Employee ID: {0}. Employee Name: {1}. Bonus Multiplier: {2}.", employee.Id, employee.Name, employee.GetBonusMultiplier()));
        }
        Console.ReadKey();
    }
}

abstract class Employee
{
    public int Id { get; protected set; }
    public string Name { get; protected set; }

    public abstract int GetBonusMultiplier();
}

class Director : Employee
{
    public Director(int employeeId, string name)
    {
        Id = employeeId;
        Name = name;
    }

    public override int GetBonusMultiplier()
    {
        return 3;
    }
}

class Manager : Employee
{
    public Manager(int employeeId, string name)
    {
        Id = employeeId;
        Name = name;
    }

    public override int GetBonusMultiplier()
    {
        return 2;
    }
} 
```

# sql - 使用重复的顺序值填充 SQL 数据库列

> ID：12743916
> 
> 赞同：1
> 
> 时间：2012-10-05T10:01:39.407
> 
> 标签：sql, sqlite

我有一个 SQLite 数据库`TestDB`。在这我有一张桌子，说，`records`。我想创建一个`ID`按顺序重复从 1 到 3 取值的列。

例如：

```
**Record#**      **ID**
Record1            1
Record2            2
Record3            3
Record4            1
Record5            2
Record6            3
Record7            1
Record8            2
Record9            3
Record10           1
Record11           2
Record12           3 
```

等等...

是否有可以实现此目的的 SQL 查询？感谢您的投入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:21:53.663

尝试这个：

```
select Record,(select COUNT(0) 
                from Table1 t1 
                where t1.Record <= t2.Record 
     )%3+1 as 'ID'
from Table1 t2 
ORDER BY Record; 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/f2c79/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:24:44.747

一种解决方案可能是将列设为身份并在身份达到其阈值时重置身份：

```
if exists(select id from records where id = 3)
begin
DBCC CHECKIDENT('records', RESEED, 0)
insert into records values('Record4')
end
else
begin
insert into records values('Record3')
end 
```

# android - Android：在服务器上验证设备谷歌帐户名称

> ID：12743917
> 
> 赞同：8
> 
> 时间：2012-10-05T10:01:47.657
> 
> 标签：android, oauth-2.0, google-api

我正在开发一个 android 应用程序，它使用设备上可用的 google 帐户向服务器端组件验证用户身份。

我将 google 帐户名称（gmail 地址）发送到服务器，但为了能够在服务器上使用 google 进行验证，我在 android 设备上请求了一个 oauth 令牌并将其发送到服务器。

问题是，虽然我不需要访问其他用户信息，但我必须使用 oauth 电子邮件范围，它会打开一个确认对话框。我不喜欢这个对话框，因为我要验证帐户名而不访问用户信息。

~~也有`AccountManager.getPassword(account)`但我不喜欢交流或使用用户密码。~~

也可以像 Web 应用程序一样使用 WebView 和身份验证用户（例如使用 OpenId），但它似乎不是设备上的最佳解决方案。

有没有其他/更好的方法来验证服务器上的设备帐户名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T07:03:14.677

使用 AccountManager 或 Google Play Services 获取用户配置文件的 OAuth2 令牌（范围：[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)）。然后使用 Google 端点 (https://accounts.google.com/o/oauth2/tokeninfo) 对其进行验证，并可选择获取用户信息。此处提供了一个示例应用程序：http: [//oauthssodemo.appspot.com](http://oauthssodemo.appspot.com)。您似乎正在做类似的事情，如果是这样，这是正确的（或至少是推荐的）方法。顺便说一句，您无法获取用户密码，因为您没有使用与帐户提供者相同的证书进行签名。

唯一的其他（可靠）方法是向用户发送一封带有随机令牌的电子邮件到他们的 GMail 地址，然后让他们在应用程序中输入。这使您可以验证他们是否可以访问电子邮件，因此它必须是他们的（当然，除非他们偷了别人的设备）。

或者您可以简单地相信，如果用户在他们的设备上注册了该帐户，它确实是他们的帐户，因为他们在激活设备时至少进行了一次身份验证。然后，您只需按原样使用 Gmail 地址，这对于您的应用来说可能不够，也可能不够。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T02:19:03.390

如果没有有效的令牌，就无法验证 Google 帐户。您可能需要参考下面的官方 Android 文档。

[http://developer.android.com/training/id-auth/index.html](http://developer.android.com/training/id-auth/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T09:51:35.117

这篇文章给出了一个详细的 - 附源代码 - 验证过程的描述：

Tim Bray[验证来自 Android 应用程序的后端调用](http://android-developers.blogspot.com.es/2013/01/verifying-back-end-calls-from-android.html?m=1)

> 短版：您使用可通过 Google Play 服务获得的 GoogleAuthUtil 类来检索称为“ID 令牌”的字符串。您将令牌发送到您的后端，您的后端可以使用它来快速、廉价地验证哪个应用程序发送了它以及谁在使用该应用程序。

借助本文中的信息，我可以轻松实现客户端和服务器端 Android 和 JavaEE 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T21:50:22.850

我建议这样做：

*   在设备上

    1.  选择一个帐户（获取电子邮件地址）

    2.  请求 OAuth 令牌

*   将电子邮件 + 令牌发送到服务器

*   在服务器上

    1.  使用 Google 的 API 从令牌中检索基本用户信息

    2.  将 google 返回的电子邮件地址与收到的电子邮件地址进行比较

# mysql - 是否可以同时处理 2 个表引擎？带有 MyISAM 的 InnoDB

> ID：12743919
> 
> 赞同：1
> 
> 时间：2012-10-05T10:01:55.440
> 
> 标签：mysql, database, innodb, myisam

我试图对一个简单的引擎进行全文搜索，但我意识到我不能用 InnoDB 做到这一点。

现在，我想知道我是否可以只将该表转换为 MyISAM 并同时与其他表一起工作。该表具有与另一个表同时与许多其他表相关的外键。

谢谢。

# javascript - 使用 HTML 的 dataLabel 上的 Highcharts 点击事件

> ID：12743921
> 
> 赞同：0
> 
> 时间：2012-10-05T10:02:06.063
> 
> 标签：javascript, highcharts

所以这就是问题所在.. 我使用图像来表示图表中的数据标签，我需要将“useHTML”标志设置为 true 才能做到这一点..

但是如果我将标志设置为true，它不允许我将点击事件绑定到数据标签..有没有办法解决这个问题..

这是[小提琴](http://jsfiddle.net/kodeNinja/hw6GB/200/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:11:11.637

您可以这样设置`onClick`处理程序：

```
$(chartObj.series[0].data[6].dataLabel.div.lastChild).bind('click', function(e) {
    alert('clicked!')
}) 
```

jsFiddle[在这里](http://jsfiddle.net/hw6GB/201/)。

# javascript - jQuery 干扰 javascript 搜索功能（传递参数）

> ID：12743923
> 
> 赞同：1
> 
> 时间：2012-10-05T10:02:17.423
> 
> 标签：javascript, cordova, jquery-mobile, parameter-passing

我有一个非常基本的移动 html 网站，带有 javascript 搜索功能，可以提供离线搜索功能。我放入 jquery mobile 是为了有一个固定的工具栏（使用手机间隙并且不支持 ccs 固定位置）。现在的问题是 jquery 通过更改传递的参数影响了搜索功能。

查看网址时，您可以看到问题。

例如：

如果我搜索“stackoverflow”

网址应如下所示：search.html?searWords=stackoverflow

下面是创建的内容（注意搜索框的值为“搜索规格”） search.html?searWords=stackoverflow&Send=Search+Specs

如果我从搜索按钮中取出“搜索规格”，代码只会将其省略，但我会得到相同的结果：search.html?searWords=stackoverflow&Send=

所以简而言之，jquery mobile scripts 'jquery-1.6.4.min.js' 和 'jquery.mobile.min.js' 在搜索功能时在 url 的末尾插入 &Send=”value of search button”用来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:06:50.187

这是因为 jQuery mobile 默认使用 AJAX 导航，这意味着它会拦截所有页面上的所有链接和表单，并使用您指定的 URL（例如`page.html#page2.html`）来导航它们。这也适用于表格。

如果您可以不使用此功能，则可以使用**[`ajaxEnabled`](http://jquerymobile.com/test/docs/api/globalconfig.html)**option 将其关闭。

# cocoa - 在 NSTextView 中使选定的文本变为粗体

> ID：12743927
> 
> 赞同：1
> 
> 时间：2012-10-05T10:02:39.950
> 
> 标签：cocoa, nstextview, foundation

我正在使用以下代码在 NSTextView 中使选定的文本变为粗体

```
 [self.textView.attributedString addAttribute:NSFontAttributeName value:[NSFont boldSystemFontOfSize:12] range:self.textView.selectedRange]; 
```

self.textView 是 NSTextView 的出口。Xcode 发出警告，addAttribute 可能无法工作，因为该属性的类型为 NSAttributedString 而不是 NSMutableAttributedString。代码可以工作，但这样做有错吗？如果是这样，正确的方法是什么？

更新：
我找到了另一种方法：

```
NSMutableAttributedString *textFieldText = [self.textView.attributedString mutableCopy];
[textFieldText addAttribute:NSFontAttributeName value:[NSFont boldSystemFontOfSize:12] range:self.textView.selectedRange];
[self.textView.textStorage setAttributedString:textFieldText]; 
```

由于这两种方法都有效，我想知道哪种方法更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:59:27.910

### 一般说明

以类公开的接口为例。假设返回类型是声明的返回类型的特定子类不是最佳实践。

这在类簇的上下文中尤其重要：公共接口的不同实现可能对同一方法有不同的返回类型，尽管这些返回类型保证与标头中声明的类型兼容。

假设您可以保证类簇中所有未记录的子类当前返回标题中声明的类型的相同特定子类，您不能保证在 Apple 框架的未来修订版中仍然如此。

### NSTextView

问题是关于 an`NSTextView`及其属性的`textStorage`。这个属性是类型的`NSTextStorage`，一个“半具体的子类`NSMutableAttributedString`”。[文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSTextStorage_Class/Reference/Reference.html)继续，描述了更改存储的字符串`NSTextStorage`或其属性的首选机制：

> 使用 NSMutableAttributedString、NSAttributedString、NSMutableString 和 NSString 定义的文本访问方法来执行字符级操作。

`NSTextView`暴露它的属性`textStorage`，它是`NSTextStorage`. `NSTextStorage`是 的子类`NSMutableAttributedString`。因此，我们可以简单地将我们的属性添加到它：

```
[self.textView.textStorage addAttribute:NSFontAttributeName
                                  value:[NSFont boldSystemFontOfSize:12.0f]
                                  range:self.textView.selectedRange]; 
```

# macos - 在 zsh 中安装 npm 后找不到命令

> ID：12743928
> 
> 赞同：118
> 
> 时间：2012-10-05T10:02:47.253
> 
> 标签：macos, zsh, npm, vows

我在 zsh 中通过 npm安装[vows时遇到一些问题。](http://vowsjs.org)这就是我得到的。我尝试使用和不使用 -g 选项安装它。你知道这里有什么问题吗？

```
[❤  ~/Desktop/sauce-node-demo:master] npm install -g vows
npm http GET https://registry.npmjs.org/vows
npm http 304 https://registry.npmjs.org/vows
npm http GET https://registry.npmjs.org/eyes
npm http GET https://registry.npmjs.org/diff
npm http 304 https://registry.npmjs.org/eyes
npm http 304 https://registry.npmjs.org/diff
/usr/local/share/npm/bin/vows -> /usr/local/share/npm/lib/node_modules/vows/bin/vows
vows@0.6.4 /usr/local/share/npm/lib/node_modules/vows
├── eyes@0.1.8
└── diff@1.0.3
[❤  ~/Desktop/sauce-node-demo:master] vows
zsh: command not found: vows 
```

谢谢

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2016-11-02T08:37:51.593

`source /home/YOUUSERNAME/.bash_profile`在开头添加`~/.zshrc`

并且将检测到所有丢失的命令。

对于**Mac**用户：添加`source /Users/YOUUSERNAME/.bash_profile`

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2013-03-28T21:42:47.367

如果你使用 Homebrew 安装了 Node.js，npm 二进制文件可以在`/usr/local/share/npm/bin`. 你应该确保这个目录在你的 PATH 环境变量中。因此，在您的`~/.zshrc`文件中添加`export PATH=/usr/local/share/npm/bin:$PATH`.

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2020-03-12T06:59:08.223

如果您使用 nvm 添加，请将以下内容添加到您的 .zshrc 文件并重新启动终端，因为 zsh shell 未检测到文件的二进制文件，我们指定了路径

```
export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-11-29T16:31:06.983

对于**Mac**用户：

除了以下内容：nvm、iterm2、zsh

我发现使用`.bashrc`而不是`.profile`或`.bash_profile`引起的问题要少得多。

只需将后者添加到我的`.zshrc`文件中：

```
source $HOME/.bashrc 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2019-10-18T21:33:59.230

**Mac 用户仅**
假设您之前安装了 nvm，并且 npm 正确
（下面关于如何安装它的分步指南：
[为 Mac 用户安装 nvm](https://stackoverflow.com/questions/24585261/nvm-keeps-forgetting-node-in-new-terminal-session/57024034#57024034) ）。

你需要：

**找到“.zshrc”文件：**

*   打开终端。
*   键入`open ~`以访问您的主目录。
*   按下`Cmd + Shift + .`可在 Finder 中显示隐藏文件。
*   找到**.zshrc**。

**编辑“.zshrc”文件：**

*   添加：`source /Users/_user_Name_/.bash_profile`到文件的顶部（其中 _user_Name_ 代表您的用户。

*   保存文件，然后关闭终端窗口。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-10-26T18:58:45.807

在**Ubuntu**上，安装*ZSH*之后，之前在`bash`终端上安装了*Node*或其他包，

> 首次打开：

`nano .zshrc`

> 并取消注释第二行：

`export PATH=$HOME/bin:/usr/local/bin:$PATH`

这对我有用，无需写任何行，我认为这个选项在**Mac**上也可用。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-08-19T19:33:39.963

对于**macOS**用户：考虑使用`.profile` **而**不是`.bash_profile`. 您可能仍需要手动将其添加到`~/.zshrc`：

```
source $HOME/.profile 
```

**注意默认没有这样的文件！**引用 slhck [https://superuser.com/a/473103](https://superuser.com/a/473103)：

> 无论如何，如果文件不存在，您可以简单地创建文件并在文本编辑器中打开它。
> 
> ```
> touch ~/.profile
> open -e !$ 
> ```

附加值是，使用单个文件设置环境感觉很好，不管使用什么 shell。在 zsh 中加载 bash 配置文件感觉很尴尬。

引用 Cos [https://stackoverflow.com/a/415444/2445063接受的答案](https://stackoverflow.com/a/415444/2445063)

> `.profile`只是最初使用的登录脚本文件名`/bin/sh`。bash，通常与 向后兼容，如果存在`/bin/sh`，将读取`.profile`

遵循 Filip Ekberg 的研究/意见[https://stackoverflow.com/a/415410/2445063](https://stackoverflow.com/a/415410/2445063)

> `.profile`相当于`.bash_profile`根。我认为更改名称是为了让其他 shell（csh、sh、tcsh）也可以使用它。（您不需要一个作为用户）

回到 slhck，**关于 bash 的注意事项**：

> (...) 一旦你创建了一个名为 的文件`~/.bash_profile`，你的文件`~/.profile`将不再被读取。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-08-31T14:50:16.093

另一件事要尝试，对我来说答案是取消注释第`export`一个`~/.zshrc`：

```
# If you come from bash you might have to change your $PATH.
export PATH=$HOME/bin:/usr/local/bin:$PATH 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2020-06-16T15:34:49.837

我解决了这个问题`brew upgrade node`

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2020-01-21T03:22:49.300

对我来说，添加`export PATH=/usr/local/share/npm/bin:$PATH`到的公认答案`.zshrc`不起作用。我尝试添加`NVM_DIR`也解决了我的问题。

1.  尝试`vi .bashrc`
2.  你会发现如下一行。复制它。

    `export NVM_DIR="$HOME/.nvm" [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion" # This loads nvm bash_completion`

3.  将复制的内容粘贴到`.zshrc`文件中

4.  重启终端

我希望这能解决你的问题。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2021-09-21T22:59:55.430

转到您的终端并运行：**nano .zshrc**

注意：如果你没有这个目录，你可以使用 mkdir 命令创建它： **mkdir ~/.zshrc**

将以下内容粘贴到包含“export ZSH”的行下方的任何位置：

```
export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm 
```

现在只需点击 ^X，系统会询问您是否要保存。说“是”并按回车键，如果它说您正在更改文件，请再次按回车键。保存后您可能需要重新启动终端。

如果您之前安装过 node，请尝试使用**node -v作为快速测试。**

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2019-02-16T13:53:16.173

以我的拙见，首先，您必须确保安装了任何类型的 Node 版本。对于该类型：

```
nvm ls 
```

如果你没有得到任何版本，这意味着我是对的 :) 然后你必须输入：

```
nvm install <node_version**> 
```

** 您可以在[Node 网站上找到的实际版本](https://nodejs.org/en/)

然后您将拥有 Node，您将能够使用**npm 命令**

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2020-03-25T23:01:52.063

对于任何仍然有问题的人。不要忘记注销并再次登录。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-10-08T07:30:33.090

它在 zsh 中对我有用。尝试`nvm install --latest-npm`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-11-18T03:40:30.063

就我而言，重新安装节点解决了这个问题。任何人都可以通过以下网站安装节点：

> [https://nodejs.org/en/download/](https://nodejs.org/en/download/)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-06-09T01:24:16.393

我在安装 Vercel CLI 时遇到了同样的问题。

在我的情况下，安装`sudo`.

例子：`sudo npm i -g vercel`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-09-17T07:18:18.477

就我而言，我用 NVM 安装了节点，安装 z Shell 后，节点和 nvm 命令不起作用。所以对我有用的是用这个命令再次安装 nvm：

```
wget https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash
sudo zsh install.sh 
```

上面的命令再次安装了 nvm，因为已经安装了节点，它会在 .zshrc 文件中自动添加节点路径，一切正常。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-12-27T08:03:42.087

只是在我的终端上写这个就解决了这个问题。请注意，我必须在我的项目文件夹中单独编写它。

```
export PATH="$HOME/.npm-packages/bin:$PATH"
export PATH="$HOME/.node/bin:$PATH" 
```

来源：[https ://cloudlinuxtech.com/npm-command-not-found-fix/](https://cloudlinuxtech.com/npm-command-not-found-fix/)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-09-12T20:25:28.027

对于 MAC：我尝试了上述一些方法，但无济于事，无法进行任何工作。

我确实安装了 BREW，所以虽然这不是最好的方法，但使用 zsh，我做到了：

1.  **sudo chown -R $(whoami) /usr/local/share/man/man8** （用于 brew 访问）
2.  **brew update && brew install npm** （我已经安装了节点）
3.  **npm -v** （确认安装）
4.  **nano ~/.zshrc**（清空文件更改并保存）

这对我有用。希望这可以帮助某人。＃1困扰着我，但我现在会忍受。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-03-13T10:11:53.967

在 Mac Catalina 上使用 Node v12+，全局依赖项显示在`/$HOME/.npm-global/bin`

添加

```
export PATH="$HOME/.npm-global/bin:$PATH" 
```

将`~/.bash_profile`所有内容保存在一个地方，然后添加

`source $HOME/.bash_profile`

`~/.zshrc`如果它还没有，就会成功。无需注销并重新登录，只需重新启动终端即可。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2022-02-07T13:15:52.327

有时简单的事情会奏效。卸载节点并再次安装对我有用。

```
brew uninstall node
brew install node
npm update 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-06-29T17:39:46.960

我认为问题更多是关于 ZSH 的完成。

您需要在 .zshrc 中添加这一行：

```
zstyle ':completion:*' rehash true 
```

如果你有Oh-my-zsh，已经做了PR，可以集成直到拉取：[https ://github.com/robbyrussell/oh-my-zsh/issues/3440](https://github.com/robbyrussell/oh-my-zsh/issues/3440)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-09T08:22:54.587

对于**OSX** *Catalina*用户

```
brew install node@14 
```

我正在使用节点 14，因为 Angular 不支持最新版本（不知道为什么）.. 然后

```
echo 'export PATH="/usr/local/opt/node@14/bin:$PATH"' >> ~/.zshrc 
```

# sql - 按范围分组记录

> ID：12743930
> 
> 赞同：2
> 
> 时间：2012-10-05T10:02:57.407
> 
> 标签：sql, sql-server, postgresql

我需要选择一些属于这样的范围的项目

```
create table numbers (val int);

insert into numbers(val) values (2), (3), (11), (12), (13), (31);

select count(1) as qty , val / 10 as range
from numbers
group by val / 10; 
```

显然，如果范围内没有项目，它将不会包含在输出中。我可以想到一些不雅的方法来在输出中包含所有范围，但是有没有一种优雅而快速的方法（在 PostgreSQL 或 MS SQL Server 方言中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T10:30:14.013

您似乎想要创建结果的*直方图*。

PostgreSQL：

```
select x, count(val)
from generate_series(1,6) x 
left outer join numbers on (x = width_bucket(val, 0, 60, 6))
group by x; 
```

我使用`width_bucket`了而不是简单的除法和模数，因为它更通用，更容易正确处理更复杂的范围。此外，它太棒了。

如果您愿意，可以集成和加入 Mark Ba​​nnister 用于序列生成的递归 CTE，`x`而不是`generate_series`增加可移植性，并且可以自动确定限制：

```
with recursive ranges(rangev) as (
    select 0 rangev union all select rangev+1 as rangev from ranges where rangev < 4
), bounds(lower_bucket, upper_bucket) as (
    select (min(val))/10, (max(val)/10)+1 from numbers
)
select
    rangev as bucket,
    rangev*10 AS lower_bound,
    (rangev+1)*10-1 AS upper_bound,
    count(val) AS num_in_bucket
from ranges cross join bounds
left outer join numbers on (rangev = width_bucket(val, lower_bucket, upper_bucket*10, upper_bucket))
group by rangev
order by rangev asc; 
```

如果您更喜欢`/10`（`width_bucket`例如，如果`width_bucket`在 MS SQL 中不可用），那很容易改回来。

输出：

```
 bucket | lower_bound | upper_bound | num_in_bucket 
--------+-------------+-------------+---------------
      0 |           0 |           9 |             0
      1 |          10 |          19 |             2
      2 |          20 |          29 |             3
      3 |          30 |          39 |             0
      4 |          40 |          49 |             1
(5 rows) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T12:23:51.597

Postgresql 9.2 还实现了范围类型：

```
 SELECT 
    range.r, 
    count(val.n) 
  FROM 
    (VALUES (int4range '[0, 10)'), (int4range '[10, 20)'), (int4range '[20, 30)'), (int4range '[30, 40)')) range (r) 
     LEFT JOIN (VALUES (2), (3), (9), (11), (17), (31), (33)) AS val (n) ON  val.n <@   range.r
  GROUP BY
    range.r
  ORDER BY r ASC

┌─────────┬───────┐
│    r    │ count │
├─────────┼───────┤
│ [0,10)  │     3 │
│ [10,20) │     2 │
│ [20,30) │     0 │
│ [30,40) │     2 │
└─────────┴───────┘ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T10:23:11.147

尝试：

```
with ranges as 
(select 0 rangev union all 
 select rangev+1 as rangev 
 from ranges 
 where rangev < 4)
select count(val) as qty , rangev
from ranges 
left join numbers on rangev = val / 10
group by rangev; 
```

（SQLServer 版本 - 更改`with ranges`为`with recursive ranges`PostgresQL）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T10:14:11.977

对于 MS SQL 服务器

```
declare @min int, @max int
    select @min = MIN(val/10), @max = MAX(val/10) from numbers

    select ranges.number as range, COUNT(val) as qty from master.dbo.spt_values ranges
        left join numbers on ranges.number = numbers.val/10
    where type='p' and number between @min and @max
    group by number 
```

相同的原则可以应用于 Postgres，尽管数字列表的生成会有所不同

# ios - MDM 可以在 iOS 中发送警报和声音通知吗？

> ID：12743931
> 
> 赞同：1
> 
> 时间：2012-10-05T10:02:59.920
> 
> 标签：ios, apple-push-notifications, mdm

我有一个带有 APNSWrapper Python 的 MDM 服务器，它能够发送命令并从 iOS 设备接收响应。然而，所有这些都发生在后台，用户无法感知。MDM 服务器是否可以使用任何命令来发送文本警报或声音或徽章，例如基于应用程序的通知工作？任何帮助都是不言而喻的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:34:22.470

MDM 协议中没有任何内容允许 MDM 服务器向用户发送文本警报、声音或标记。您需要创建一个应用程序来执行此操作。

# javascript - jquery Tablesorter - 如果输入新文本，则不会正确排序

> ID：12743935
> 
> 赞同：2
> 
> 时间：2012-10-05T10:03:18.420
> 
> 标签：javascript, jquery, tablesorter

1）下面的代码将在页面加载时对输入框进行排序，但是如果我尝试编辑任何`<input>`s 然后尝试再次对该列进行排序，那么它会按原始值而不是新值排序，可以你帮忙解决这个问题？

2）如果我输入新数字`<input>`然后单击列标题进行排序然后我的输入模糊事件将不会触发，为什么并且你知道如何解决这个问题？

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Last Name</th> 
    <th>Amounts</th> 

</tr> 
</thead> 
<tbody> 
<tr> 
    <td>Smith1</td> 
    <td><input type="text" value="1"/></td> 
</tr> 
<tr> 
    <td>Smith2</td> 
    <td><input type="text" value="2"/></td> 
</tr> 
<tr> 
    <td>Smith3</td> 
    <td><input type="text" value="3"/></td> 
</tr> 
<tr> 
    <td>Smith4</td> 
    <td><input type="text" value="4"/></td> 
</tr> 
</tbody> 
</table> 
```

* * *

```
$(document).ready(function() {

    $.tablesorter.addParser({
        id: 'input',
        is: function(s) {
            return false;
        },
        format: function(s, table, cell) {
              return $('input', cell).val();
        },
        type: 'numeric'
    });

    $("#myTable").tablesorter({

        headers: {
            1: {
                sorter:'input'
            }
        }
    });

   $('input').blur(function(){

        alert($(this).val());

   });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:53:09.560

莫蒂的回答对我有用——谢谢！为了防止重复绑定，我不喜欢添加一个类，所以我将逻辑移到了外面：

```
$("#mytable tbody").on("keyup", "input", function(event){
    var table = $(this).closest("table");
    var cellElement = $(this).closest("td")[0];
    table.trigger("updateCell", [cellElement, false]);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:12:04.320

解析器只会在初始化时获取输入值。每当输入值更改时，您都需要更新它们。话虽这么说，我在使用`blur`输入时总是运气不好，我认为最好用它`keyup`来检查更改。

无论如何，我在这里有一个动态输入解析器[的演示](http://jsfiddle.net/Mottie/abkNM/4/)。它“应该”与原始版本的 tablesorter 一起使用，但度假村选项将不可用。否则，我知道它可以与我[的 tablesorter 叉](http://mottie.github.com/tablesorter/docs/index.html)一起使用。

```
// add parser that dynamically updates input values
$.tablesorter.addParser({
    id: 'inputs',
    is: function(s) {
        return false;
    },
    format: function(s, table, cell) {
        var $c = $(cell);
        // return 1 for true, 2 for false, so true sorts before false
        if (!$c.hasClass('updateInput')) {
            $c
            .addClass('updateInput')
            .bind('keyup', function() {
                $(table).trigger('updateCell', [cell, false]); // false to prevent resort
            });
        }
        return $c.find('input').val();
    },
    type: 'text'
});

$(function() {
    $('table').tablesorter({
        widgets: ['zebra'],
        headers: {
            3: {
                sorter: 'inputs'
            }
        }
    });
});​ 
```

# winforms - Aero drop - 无边框形式上的阴影？

> ID：12743946
> 
> 赞同：1
> 
> 时间：2012-10-05T10:03:51.677
> 
> 标签：winforms, visual-c++, c++-cli, drop-shadow, createparams

我尝试了以下代码来覆盖 CreateParams。

```
protected: virtual property System::Windows::Forms::CreateParams^ CreateParams
    {
        System::Windows::Forms::CreateParams^ get() override
        {
            System::Windows::Forms::CreateParams^ cp = Form::CreateParams;
            cp->ClassStyle::set(CS_DROPSHADOW);
            return cp;

        }
    } 
```

它工作正常。但它没有给出预期的结果。

这是我想要的阴影类型...

![这是我想要的影子类型。](../Images/13d73b65b1a7bc270644a90980cc1cfa.png)

这就是我从代码中得到的......

![这是我从代码中得到的。](../Images/8dafec7f1c517d6921ef6294a9c5ffad.png)

我在想是否有任何方法可以获得这种航空风格的 Drop-Shadows ？

# csv - 将 2 个 CSV 文件合并到 1 个 WORD 文件中

> ID：12743960
> 
> 赞同：0
> 
> 时间：2012-10-05T10:04:49.607
> 
> 标签：csv, merge, ms-word

是否可以在一个 Word 文档中合并 2 个 CSV 文件？

仅供参考：CSV 是从数据库中呈现的。该数据库包含有关酒店预订的信息。有一个包含一般信息（预订者、房间号等）的 CSV 和一个包含选项（如装满冰箱、狗）的 CSV。

首先向预订者确认，因此我需要一个 CSV，所以没问题。

但要创建账单，我需要合并两个 CSV 文档。

CSV 文件如下所示（通用 CSV）

```
Reservation_id | Name | Address | Roomnumber ... 
```

另一个（选项）

```
Reservation_id | option | price 
```

在第一个 CSV 中，reservation-id 是唯一的，在第二个文件中，它不是。一个 id 有可能出现 7 次。

那么：是否可以将两个 CSV 添加到一个 Word 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:10:51.760

有两种可能的方法可以将两个 csv 文件加载到您正在使用的任何语言列表中，然后通过使用 id 为列表 1 的每次迭代加入两个列表来生成另一个列表。另一个最佳技巧是使用简单的从数据库创建 csv表连接将非常快并且是执行此操作的有效方法。

# zend-framework - Linkedin：如何使用访问令牌进行 api 调用？

> ID：12743961
> 
> 赞同：0
> 
> 时间：2012-10-05T10:05:01.977
> 
> 标签：zend-framework, oauth, linkedin, access-token

我将linkedin访问令牌存储在数据库中。这是存储在我的数据库中的令牌：

```
oauth_token=xxxxxxxxxxxxxxxxxxx&oauth_token_secret=xxxxxxxxxxxxxxxxxxx&oauth_expires_in=5183998&oauth_authorization_expires_in=5183998 
```

我想使用此访问令牌检索linkedin 连接。我正在尝试拨打这样的电话：

```
 $a = new Zend_Oauth_Token_Access();
        $client = $a->getHttpClient( array( 
                        'siteUrl' => LIN_SITE_URL,
                        'callbackUrl' => LIN_SITE_CALLBACK_URL,
                        'requestTokenUrl' => LIN_REQUEST_TOKEN_URL,
                        'userAuthorizationUrl' => LIN_USER_AUTHORIZATION_URL,
                        'accessTokenUrl' => LIN_ACCESS_TOKEN_URL,
                        'consumerKey' => LIN_CONSUMER_KEY,
                        'consumerSecret' => LIN_CONSUMER_SECRET
                    ) );

        $client->setUri('http://api.linkedin.com/v1/people/~/connections:(id,first-name,last-name,picture-url)');   
        $client->setParameterGet('token',$linToken);
        $client->setMethod(Zend_Http_Client::GET);
        $response = $client->request();

        $content =  $response->getBody();
        $data = json_decode(Zend_Json::fromXml($content, false));   
        print_r($data); echo "<br/>"; 
```

我在这里遇到的错误是：

```
stdClass Object ( [error] => stdClass Object ( [status] => 404 [timestamp] => 1349429996351 [request-id] => 8U8A1UNF1V [error-code] => 0 [message] => Could not find person based on: ~ ) ) 
```

这是拨打电话的正确方式还是我在这里做错了什么。我正在使用zend框架。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:58:43.353

我能够通过将 outh_token 和 outh_token_secret 作为数组传递给 Zend_Oauth_Token_Access 的 setParams() 来解决问题，如下所示：

```
$a = new Zend_Oauth_Token_Access;
 $a->setParams(array(
  'oauth_token' => 'xxxxxxxxxxxxxxxxxxxxxxxxxx',
  'oauth_token_secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx'
 )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:05:23.823

在您的代码示例中，我看不到您在哪里设置访问令牌和机密。我只是看到您正在实例化 $a 变量：

```
$a = new Zend_Oauth_Token_Access(); 
```

您是否从数据库中检索访问令牌和机密，然后将其设置为 $a 变量？像这样的东西：

```
 $a->setToken($row['token'])
     ->setTokenSecret($row['secret']); 
```

顺便说一句，这是使用 Zend 和 LinkedIn 的一个很好的参考：http: [//www.contentwithstyle.co.uk/content/linkedin-and-zendoauth/](http://www.contentwithstyle.co.uk/content/linkedin-and-zendoauth/)

# c# - 使用 WM_COPYDATA 传递带有字符串的结构的 C# 到 C++ 进程

> ID：12743962
> 
> 赞同：11
> 
> 时间：2012-10-05T10:05:03.663
> 
> 标签：c#, interop, c++-cli, marshalling, wm-copydata

在 ac# 程序中，我想使用 WM_COPYDATA 和 SendMessage 与旧的 c++/cli MFC 应用程序进行通信。

我想传递一个包含字符串对象的托管结构。

我可以找到与 SendMessage 一起使用的 c++ 应用程序的句柄。

我不知道的是如何在另一端编组和读取结构及其字符串。特别是因为它包含非 blittables。

人们认为这是可行的吗？我会继续努力，但会感谢做过这种事情的人告诉我它是否行不通。

如果它是一个 c++/cli 程序，这里有一些演示代码，让它工作并不难。但是，我希望它位于 .Net 类库中，以便可以轻松地重复使用。

```
//Quick demonstation code only, not correctly styled
int WINAPI WinMain(HINSTANCE hInstance,
                 HINSTANCE hPrevInstance,
                 LPSTR lpCmdLine,
                 int nCmdShow)
{               
    struct MessageInfo
    {
        int     nVersion;
        char   szTest[ 10 ];        
    };

    MessageInfo sMessageInfo;

    sMessageInfo.nVersion = 100;
    strcpy( sMessageInfo.szTest, "TEST");   

    COPYDATASTRUCT CDS;

    CDS.dwData = 1; //just for test
    CDS.cbData = sizeof( sMessageInfo );
    CDS.lpData = &sMessageInfo;

    //find running processes and send them a message
    //can't just search for "MYAPP.exe" as will be called "MYAPP.exe *32" on a 64bit machine
    array<System::Diagnostics::Process^>^allProcesses = System::Diagnostics::Process::GetProcesses();

    for each (System::Diagnostics::Process^ targetProcess in allProcesses)
    {        
        if (targetProcess->ProcessName->StartsWith("MYAPP", System::StringComparison::OrdinalIgnoreCase))
        {
            HWND handle = static_cast<HWND>(targetProcess->MainWindowHandle.ToPointer());

            BOOL bReturnValue = SendMessage( handle, WM_COPYDATA, (WPARAM)0, (LPARAM)&CDS ) == TRUE;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T15:35:59.147

我有它的工作。

一种简单的方法是将结构序列化为单个字符串并传输一个字符串。swhistlesoft 博客很有帮助[http://www.swhistlesoft.com/blog/2011/11/19/1636-wm_copydata-with-net-and-c](http://www.swhistlesoft.com/blog/2011/11/19/1636-wm_copydata-with-net-and-c)

这可能足以提供简单的消息传递。如有必要，可以在另一端重新构造该结构。

如果要按原样编组具有任意数量字符串的结构，那么它必须是固定大小，这是我没有得到的主要内容。这

```
MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValTStr, SizeConst = 9) 
```

基本上设置大小以匹配 c++ 大小，在我们的例子中是 TCHAR szTest[9];

为了通过 WM_COPYDATA 将 .Net 结构从 c# 传输到 c++(/cli)，我必须执行以下操作：

```
[System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

    [System.Runtime.InteropServices.DllImport("user32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    static extern bool SetForegroundWindow(IntPtr hWnd);

public static uint WM_COPYDATA = 74;

//from swhistlesoft
public static IntPtr IntPtrAlloc<T>(T param)
    { 
        IntPtr retval = System.Runtime.InteropServices.Marshal.AllocHGlobal(System.Runtime.InteropServices.Marshal.SizeOf(param)); 
        System.Runtime.InteropServices.Marshal.StructureToPtr(param, retval, false); 
        return (retval); 
    }

//from swhistlesoft
    public static void IntPtrFree(IntPtr preAllocated) 
    { 
        if (IntPtr.Zero == preAllocated) throw (new Exception("Go Home")); 
        System.Runtime.InteropServices.Marshal.FreeHGlobal(preAllocated); 
        preAllocated = IntPtr.Zero; 
    }

    [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential)]
    struct COPYDATASTRUCT
    {
        public uint dwData;
        public int cbData;
        public IntPtr lpData;
    }

    /// <summary>
    /// Dot net version of AppInfo structure. Any changes to the structure needs reflecting here.
    /// struct must be a fixed size for marshalling to work, hence the SizeConst entries
    /// </summary>
    [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential, Pack = 1)]
    struct AppInfoDotNet
    {
        public int   nVersion;            

        [System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValTStr, SizeConst = 9)]
        public string test;
    }; 
```

发送字符串：

```
 COPYDATASTRUCT cd = new COPYDATASTRUCT();
    cd.dwData = 2;

    cd.cbData = parameters.Length + 1;
    cd.lpData = System.Runtime.InteropServices.Marshal.StringToHGlobalAnsi(parameters);

    IntPtr cdBuffer = IntPtrAlloc(cd);

    messageReceived = ((int)SendMessage(targetProcess.MainWindowHandle, WM_COPYDATA, IntPtr.Zero, cdBuffer)) != 0; 
```

在 C++ 中接收字符串：

```
else if(pCDS->dwData == 2)
    {
        //copydata message
        CString csMessage = (LPCTSTR)pCDS->lpData;
        OutputDebugString("Copydata message received: " + csMessage);
    } 
```

发送结构：

```
 AppInfoDotNet appInfo = new AppInfoDotNet();
            appInfo.test = "a test";

            COPYDATASTRUCT cds3;
            cds3.dwData = 1;
            cds3.cbData = System.Runtime.InteropServices.Marshal.SizeOf(appInfo);

            IntPtr structPtr = System.Runtime.InteropServices.Marshal.AllocCoTaskMem(System.Runtime.InteropServices.Marshal.SizeOf(appInfo));
            System.Runtime.InteropServices.Marshal.StructureToPtr(appInfo, structPtr, false);

            cds3.lpData = structPtr;

            IntPtr iPtr = System.Runtime.InteropServices.Marshal.AllocCoTaskMem(System.Runtime.InteropServices.Marshal.SizeOf(cds3));
            System.Runtime.InteropServices.Marshal.StructureToPtr(cds3, iPtr, false);

            messageReceived = ((int)SendMessage(targetProcess.MainWindowHandle, WM_COPYDATA, IntPtr.Zero, iPtr)) != 0;

            System.Runtime.InteropServices.Marshal.FreeCoTaskMem(iPtr);
            System.Runtime.InteropServices.Marshal.FreeCoTaskMem(structPtr); 
```

在 C++ 中接收结构：

```
LRESULT CMainFrame::OnCopyData( WPARAM wParam, LPARAM lParam )
{
    LRESULT lResult = FALSE;

    COPYDATASTRUCT *pCDS = (COPYDATASTRUCT*)lParam;

    //Matching message type for struct
    if(pCDS->dwData == 1)
    {
        AppInfo *pAppInfo = (AppInfo*)pCDS->lpData
        lResult = true;
    } 
```

请注意，这是演示代码，需要在样式、异常处理等方面进行工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:19:35.493

从文档中：

传递的数据不得包含指针或其他对接收数据的应用程序无法访问的对象的引用。

所以你需要将你的字符串打包到 COPYDATASTRUCT.lpData 中。如果每个字符串都有最大长度，则可以将其嵌入到固定长度的结构中

```
typedef struct tagMYDATA
{
   char  s1[80];
   char  s2[120];
} MYDATA; 
```

如果您只有一个可变长度字符串，您可以将字符串放在末尾并使用标题后跟字符串数据

```
typedef struct tagMYDATA
{
   int value1;
   float value2;
   int stringLen;
} MYDATAHEADER;

MyCDS.cbData = sizeof(MYDATAHEADER)+(int)stringData.size();
MyCDS.lpData = new BYTE[MyCDS.cbData];
memcpy(MyCDS.lpData,&dataHeader,sizeof*(MYDATAHEADER);
StringCbCopyA (
    ((BYTE*)MyCDS.lpData)+sizeof*(MYDATAHEADER)
    ,stringData.size()
    ,stringData.c_str()); 
```

如果您有多个可变长度字符串，您仍然可以使用标头并为每个字符串分配更多空格加上一个双空终止符，或者将所有内容序列化为一个 XML 字符串。

# c# - C# 服务器-客户端应用程序建议

> ID：12743964
> 
> 赞同：3
> 
> 时间：2012-10-05T10:05:06.827
> 
> 标签：c#, network-programming, client-server, remoting

我想用 C# 编写一个服务器-客户端应用程序。服务器应用程序必须向客户端发送消息或对象，并且在此消息之后必须触发客户端应用程序中的某些功能。我应该使用什么课程或技术？System.Net TcpClient 类或.NET Remoting 或其他技术？我应该从哪里开始？我是网络编程的初学者。任何建议都会有所帮助。感谢您阅读此问题和您的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:18:49.183

如果您专门处理发布/订阅方案，我建议您使用[ZeromMQ](http://www.zeromq.org/) (clrzmq + libzmq)。ZeroMQ 非常易于使用且速度非常快。您会在 ZeroMQ 站点上找到大量对应于各种场景的 C# 示例。根据您的具体需求，您可以结合 ZeroMQ 和 OpenPGM 来执行 pgm (tcp) 或 epgm (udp) 多播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:07:25.847

只需使用[UdpClient](http://msdn.microsoft.com/library/system.net.sockets.udpclient.aspx)类。稍后，如果您需要更高的可靠性，您可以迁移到 TCP。UDP 是通过网络发送消息的最简单方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:08:27.810

尝试弄清楚[这些聊天客户端/服务器应用程序](http://www.dreamincode.net/forums/topic/33396-basic-clientserver-chat-application-in-c#/)是如何工作的。它会让你朝着正确的方向思考。

# c# - 使用 WPF 应用程序中的任务和回调实现自定义异步 WCF 调用处理时 UI 冻结

> ID：12743973
> 
> 赞同：7
> 
> 时间：2012-10-05T10:06:15.887
> 
> 标签：c#, wpf, wcf, asynchronous, task-parallel-library

我有一个 WPF MVVM 应用程序。视图模型有几个绑定到视图的属性，这些属性由直接来自数据库的数据或通过位于视图模型和数据库之间的 wcf 服务填充。数据连接模式的选择取决于客户端应用程序的 App.config 文件中的应用程序设置。我想实现我自己的异步调用服务方法并处理它们的返回值的方式。我想知道如果我使用任务以下列方式实现线程问题是否有机会：

服务调用流程：ViewModel > ServiceAgent > (MyWCFServiceClient or MyBusinessClient) > MyBusinessClass> Database 为了使用服务操作，我有一个 MyWCFServiceClient 类，它实现了 IMyWCFService（在添加服务引用时生成）。

此外，我有一个 MyBusinessClassClient 类，它从同一个 IMyWCFService 接口实现。因此，MyWCFService 和 MyBusinessClient 都具有相同的方法签名。我选择在生成服务客户端时不生成任何异步方法，因为如果这样做，我可能还需要在 MyBusinessClient 中实现由 IMyWCFService 生成的许多不必要的东西。

假设我有一个方法 GetEmployee(int id)，它返回一个在 IMyWCFService 中定义的 Employee 对象。因此，MyWCFServiceClient 和 MyBusinessClient 类都有自己的实现。

在我的 ViewModel 中，我有：

```
private void btnGetEmployee_Click()
        {
            ServiceAgent sa = new ServiceAgent (); 

            //this call/callback process the service call result

            sa.GetEmployee(1673, (IAsyncResult ar) =>
            {
                Task<Employee> t1 = (Task<Employee>)ar;
                Employee = t1.Result;
                //do some other operation using the result
                //do some UI updation also
            });
        }  

        //this property is bound a label in the view
      private Employee _employee;
        public Employee Employee
        {
            get
            {
                return _ employee;
            }
            set
            {
                _ employee = value;
                OnPropertyChanged(() => Employee);                    
            }
        } 
```

ServiceAgent 类实现如下：

```
public class ServiceAgent
    {
        private IMyWcfService client;

        public ProxyAgent()
        {
            //The call can go to either MyWCFServiceClient or 
            //MyBusinessClient depending on this setting

            //client = new MyBusinessClient(); 
            //OR

            client = new MyWcfServiceClient();
        }

        public void GetEmployee(int id, AsyncCallback callback)
        {
          //My implementation to execute the service calls asynchronously using tasks
          //I don’t want to use the complex async mechanism generated by wcf service reference ;)

            Task<Employee> t = new Task<Employee>(()=>client.GetEmployee(id));    
            t.Start();

            try
            {
                t.Wait();
            }
            catch (AggregateException ex)
            {
                throw ex.Flatten();
            }

            t.ContinueWith(task=>callback(t));
        }
    } 
```

这冻结了我的用户界面。我想避免这种情况。另外我想知道这是否是我想要实现的正确方法。我对任务/线程和回调的经验较少，因此我想知道我将来是否会遇到任何问题（线程/内存管理等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:53:51.920

@Ananth 嘿，我删除了评论，因为第二眼我以为我误读了代码。一般来说，当连接到 Web 服务时，您应该*始终*将调用视为异步调用，因为您可能会处理过多的延迟，这会冻结任何线程（通常是 GUI 线程）。如果您需要为单个 GUI 操作进行多个 WCF 调用，则情况会更加复杂。这也使情况变得更糟，因为您的 WCF 接口是像异步调用一样编写的，但无论如何都是同步运行的。未来混乱的明确原因。

所以我发现最好只处理异步模型，但至少您可以在 WCF 调用中进行类型检查/转换/返回处理。我做了类似的事情，但是我仍然使用回调，而不是使用同步调用，但我会*在*WCF 调用中处理 IAsyncResult，然后将其转换为我的预期类型并将其返回给用户。

```
public void GetEmployee(int id, Action<Employee> getEmployeeCompletedHandler)
{
    Task<Employee> t = new Task<Employee>(()=>client.GetEmployee(id));    
    t.Start();
    t.ContinueWith(task=>
    {
        if (getEmployeeCompletedHandler != null)
            getEmployeeCompletedHandler(t1.Result);
    });
} 
```

这使您的典型用法是：

```
sa.GetEmployee(1673, result => this.Employee = result); 
```

如果您真的想维护一个同步模型，那么您可以将工作转移到后台线程（但从 GUI 线程的角度来看，这仍然是“异步的”）。在这一点上，您也可以让您的`GetEmployee`方法同步并返回值。这样，对于使用它的 API 使用者来说，很明显没有异步操作：

```
public Employee GetEmployee(int id)
{
    Task<Employee> t = new Task<Employee>(()=>client.GetEmployee(id));    
    t.Start();

    try
    {
        t.Wait();
    }
    catch (AggregateException ex)
    {
        throw ex.Flatten();
    }

    return t.Result;
} 
```

那么您的调用代码可能如下所示：

```
//spawn a background thread to prevent the GUI from freezing
BackgroundThread.Spawn(() =>
{
    this.Employee = sa.GetEmployee(1673);
}); 
```

注意，`BackgroundThread`是一个自定义类，您可以使用它来包装后台线程的创建/生成。我会把实现细节留给你，但我发现最好有一个线程的托管包装器，因为它使使用变得非常简单并抽象了实现细节（使用线程池？新线程？BackgroundWorker？谁在乎！）

请注意，我还没有尝试过我刚刚在上面发布的 WCF 调用的同步使用（我坚持使用完整的异步模型，就像我的第一个代码示例一样），所以我*认为*它会起作用。（我仍然不建议这样做！）

# jquery - 对大型数据库使用 jquery DataTables 有什么好处？

> ID：12743974
> 
> 赞同：1
> 
> 时间：2012-10-05T10:06:22.580
> 
> 标签：jquery, datatable

jquery DataTables 插件网站说，

“如果您正在使用大型数据库，您可能需要考虑使用 DataTables 提供的服务器端选项”

如果是这样，在 ASP.NET 工具（如动态数据）上使用 DataTables 有什么意义？请告诉我为什么会或应该在 ASP.NET 内置工具上使用 jquery DataTables。另外，任何人都可以解释使用哪些工具或插件堆栈溢出构建了它的数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:14:04.693

datatable 为服务器端处理公开了许多功能，您可以将这些功能与 ASP.NET 内置工具一起使用。以下是示例：

1.  获取服务器端数据
2.  添加额外的 HTTP 变量
3.  使用 HTTP POST
4.  自动将 ID 和类添加到行
5.  从对象中读取表数据
6.  显示和隐藏有关特定记录的详细信息
7.  用户可选择的行（多行）
8.  用于跨域数据源的 JSONP
9.  jEditable 与 DataTables 的集成
10.  延迟加载 Ajax 数据
11.  流水线数据（减少分页的 Ajax 调用）

您可以参考[此链接](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)，了解详细信息和示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:22:31.160

此外，您可以通过 json 加载表格数据，这使得 html 页面呈现更快。datatable 的另一个重要特性是它支持客户端搜索、排序。通过 ajax/html 请求进行分页（客户端/服务器端）。

# c++ - 在 Linux 上使用 C++ 将终端附加到创建的线程

> ID：12743988
> 
> 赞同：0
> 
> 时间：2012-10-05T10:07:21.870
> 
> 标签：c++, linux, multithreading, terminal

我正在用 C++ 开发一个聊天服务器。该程序是从终端构建和运行的。在终端中运行时，我可以使用“”正常写入此终端`printf`。写入此终端的一些信息是新传入连接、传出连接等的警报。

现在我需要获取键盘输入，以便管理员可以键入命令来查看聊天服务器中变量的值。我打算创建一个新线程并为其附加一个新终端。一个建议是调用 system("gnome-terminal")，但它需要一点延迟`sleep()`，似乎不是一个好的选择，因为重定向到这个 gnome-terminal 的所有内容都将被视为 bash 命令。而且我不知道如何将' `system`'`命令打开的终端附加到线程。

将终端附加到创建的线程的任何简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:10:27.543

也许读过这篇关于如何在 Linux 中使用管道的文章

[http://linuxprograms.wordpress.com/tag/pipes/](http://linuxprograms.wordpress.com/tag/pipes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:36:08.013

正如在这个问题中部分回答的那样：[在脚本执行后避免 gnome-terminal 关闭？](https://stackoverflow.com/questions/3512055/avoid-gnome-terminal-close-after-script-execution)

有这样一个不错的选择：

(1) 使用主端子进行正常输入/输出。

(2) 在调用'tail'之前创建日志文件（log.file）

(3) 使用 'tail' 命令显示日志内容（日志文件）

```
//c++ code
system("gnome-terminal -e \"bash -c 'tail -f log.file'\""); 
```

(4) 将内容附加到 'log.file' 以告诉 'tail' 显示它。

# c++ - 尽管进行了空检查，但奇怪的 NullReferenceException

> ID：12743990
> 
> 赞同：1
> 
> 时间：2012-10-05T10:07:26.487
> 
> 标签：c++, visual-c++, c++-cli, nullpointerexception, nullreferenceexception

我在使用 C++/CLI 和 Visual Studio 2010 时遇到问题。

我有一个网络管理器，它使用指向[套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740506%28v=vs.85%29.aspx)的指针，如下所示：

```
class NetworkManager{
public:
    SOCKET socket_open(char* local_ip_addr, int local_port);
private:
    SOCKET* masterServerSocket;
}; 
```

当我想使用指针时，我检查指针是否为空，如下所示：

```
SOCKET NetworkManager::socket_open(char* local_ip_addr, int local_port)
{
  if (masterServerSocket) {
      return *masterServerSocket;
  } else {
      // Initalize mastersocket
      ...
  }
} 
```

但我似乎在 if 条件下得到了 NullReferenceException。删除 return 语句不会产生异常。

*   在当前代码中，指针*始终*为NULL，我在构造函数中将其设置为 NULL，并且不再分配给它。

*   单步执行应用程序确实会引发条件，所以我认为堆栈跟踪没有错。

*   我还尝试添加一个布尔值，在构造函数中初始化为 false 并对其进行检查，但仍然是同样的问题。所以我不认为这是由于运算符重载

*   我也试过！= NULL，同样的事情

如果有人能够给我一些指示（不是双关语）或帮助我，我将不胜感激！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T10:22:25.687

hvd 的评论是正确的，我调用了一个空的 NetworkManger 指针。原来堆栈跟踪没有那么有用=）

感谢您的回复！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T10:22:58.107

您是否正在创建指向 NetworkManager 对象的指针？如果是这样，您是否正在验证它不是 NULL？

# ajax - 使用ajax切换图像渲染？

> ID：12743991
> 
> 赞同：2
> 
> 时间：2012-10-05T10:07:27.520
> 
> 标签：ajax, jsf, facelets

如何根据按钮触发的布尔状态变量显示图像？我不希望整个页面重新加载，而只是那个特定的图像。

Facelets页面：

```
 </h:form>
    <h:commandButton value="test" action="#{bean.toggleStatus}">
        <f:ajax render="image"/>
    </h:commandButton>
    <h:graphicImage id="image" value="status.gif" rendered="#{bean.status}"/>
 </h:form> 
```

支持类：

```
 class Bean {

        private boolean status = false;

        public void toggleStatus() {
            status = true;
        }

        //getter, setter
    } 
```

知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:58:18.300

您不能对未呈现到 HTML 端的 HTML 元素进行 ajax 更新。将其包装在始终呈现并更新它的组件中。

例如

```
<h:form>
    <h:commandButton value="test" action="#{bean.toggleStatus}">
        <f:ajax render="image"/>
    </h:commandButton>
    <h:panelGroup id="image">
        <h:graphicImage value="status.gif" rendered="#{bean.status}"/>
    </h:panelGroup>
</h:form> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# vb.net - Vb.net - 如果单击项目，则仅显示上下文菜单条

> ID：12743995
> 
> 赞同：2
> 
> 时间：2012-10-05T10:07:41.610
> 
> 标签：vb.net

我有一个充满项目的列表视图。我在该列表视图中添加了一个上下文菜单条。现在，我希望菜单条仅在选择列表视图中的项目时出现。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:42:01.607

ContextMenuStrip 类具有事件[Opening](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripdropdown.onopening.aspx) ，可以处理该事件以检查ListView 上[选定项目](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selecteditems.aspx)的存在与否。
此事件接收一个 CancelEventArgs 参数，您可以在其中找到 Cancel 属性并将其设置为 True 以在所需条件发生时取消打开。

```
Private Sub ContextMenuStrip1_Opening(sender As System.Object, e As CancelEventArgs) _ 
        Handles ContextMenuStrip1.Opening
        If Me.listView1.SelectedItems.Count = 0 Then
            e.Cancel = True
        End If
End Sub 
```