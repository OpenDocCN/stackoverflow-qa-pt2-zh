# StackOverflow 问答 16059000-16059999

# html - 隐藏除一个以外的所有 div (Qt Webkit)

> ID：16059000
> 
> 赞同：2
> 
> 时间：2013-04-17T11:38:01.513
> 
> 标签：html, css, qt, webkit, qtwebkit

我想将我的 HTML 文档中每个元素的样式设置为“显示：无；”，除了一个。我无法编辑 HTML 源文件。我正在使用 Qt Webkit 来尝试这样做，这是我到目前为止的代码：

```
QWebFrame *frame = webView->page()->mainFrame();

QWebElement document = frame->documentElement();
foreach (QWebElement element, document.findFirst("body").findAll("*"))
    element.setAttribute("style", "display: none");

QWebElement canvas = document.findFirst("canvas");
canvas.setAttribute("style", "display: inline"); 
```

但是，这会隐藏所有内容，包括画布元素。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:34:35.927

这可能是由于 'canvas' 的祖先具有样式 'display:none;' 因此也不显示其中包含的任何内容，我的猜测是您可以像这样遍历父母：

```
QWebElement parent = canvas.parent();
do{
    parent.setAttribute("style", "display: inline");
}while(parent!=null) 
```

不过，我可能对语法有点偏离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:05:17.547

你说你想操纵所有`<div>`元素的可见性。要获取所有这些，您可以将以下查询替换为您的`foreach`块：

```
document.findAll(QLatin1String("div") 
```

其他答案中给出的建议也是正确的——您必须确保 的父元素`<canvas>`本身未设置为`display: none`.

# javascript - 新数组中使用的 JavaScript 变量

> ID：16059005
> 
> 赞同：0
> 
> 时间：2013-04-17T11:38:42.580
> 
> 标签：javascript, arrays

我有一个 JavaScript 变量以下列方式定义为一个新数组：

```
var myDaysComparisonData = new Array(['Mondays', 0], ['Tuesdays', 0], ['Wednesdays', 0], ['Thursdays', 0], ['Fridays', 0], ['Saturdays', 0], ['Sundays', 0]); 
```

而且我有 7 个全局定义的变量，称为`myMondaysTotal`,`myTuesdaysTotal`等等，其中包含我想在一周中的相应日期替换上部数组中的零的值。这种情况下的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:42:09.980

您拥有的是数组数组，看起来它不符合您的目标。

无论如何，只需将零替换为变量，请将变量名称改为零：

```
var myDaysComparisonData = new Array(['Mondays', myMondaysTotal], ['Tuesdays', myTuesdaysTotal], ...); 
```

更好的方法是这样的关联数组：

```
var myDaysComparisonData = {'Mondays': myMondaysTotal, 'Tuesdays':  myTuesdaysTotal, ... }; 
```

如果你真的必须使用这个结构并且想用值填充内部数组，你必须搜索每个项目并分配它的值，没有优雅的解决方案：

```
for (var i = 0; i < myDaysComparisonData.length; i++) {
    var curArray = myDaysComparisonData[i];
    switch (curArray[0]) {
        case "Mondays":
            curArray[1] = myMondaysTotal;
            break;
        case "Tuesdays":
            curArray[1] = myTuesdaysTotal;
            break;
        //........
    }
} 
```

[现场测试用例](http://jsfiddle.net/e5bVa/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:26:40.520

```
for(var i=0;i<7;i++) 
    myDaysComparisonData[i][1] = window["my"+myDaysComparisonData[i][0]+"Total"]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-17T11:41:10.080

我想这就是你的意思？

```
myDaysComparisonData['Mondays'] = myMondaysTotal; 
```

# javascript - 添加背景图像时textarea变为透明

> ID：16059007
> 
> 赞同：0
> 
> 时间：2013-04-17T11:38:44.403
> 
> 标签：javascript, jquery, background, textarea, transparent

我试图将背景图像添加到我的`textarea`- 但以下代码只是使其透明。路径和图片有效

```
var input = $("<textarea>");

            $(input).css({ background: 'url("Images/leviathan.jpg")'});

            item.append(input); 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:50:30.673

当您想更改一个 Css 属性时，请使用此一个将背景更改为 Background-iamge

```
 var input = $("<textarea>");     
$(input).css( 'background-image' , 'url(../Images/leviathan.jpg)'); 
```

# php - PHP 表超链接

> ID：16059009
> 
> 赞同：0
> 
> 时间：2013-04-17T11:38:57.560
> 
> 标签：php, hyperlink

我有一个从 mysql 返回信息的表。但是，我想超链接每个邮政编码，以便当用户单击一个时，它会将它们重定向到适当的页面。这是表中的代码：

```
<table style="border:2px solid black; border-collapse:collapse;" cellspacing="2" cellpadding="2" align="center">
<tr align="center" width="auto">
<td bgcolor="#66CCFF" style="border:2px solid black;"><b>&nbsp;Consultation Date&nbsp;</b></td>
<td bgcolor="#66CCFF" style="border:2px solid black;"><b>&nbsp;Patient Health Care Number&nbsp;</b></td>
<td bgcolor="#66CCFF" style="border:2px solid black;"><b>&nbsp;Location&nbsp;</b></td>
<td bgcolor="#66CCFF" style="border:2px solid black;"><b>&nbsp;Post Code&nbsp;</b></td>
<td bgcolor="#66CCFF" style="border:2px solid black;"><b>&nbsp;Update Record&nbsp;</b></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"Consultation Date");
$f2=mysql_result($result,$i,"Patient HCN");
$f3=mysql_result($result,$i,"Location");
$f4=mysql_result($result,$i,"Post Code");
?>

<tr>
<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><?php echo $f1; ?></td>
<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><b><?php echo $f2; ?></b></td>
<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><?php echo $f3; ?></td>

<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><?php echo "<a href=\"coveragehcp.php?patient= ". $f2 ."\">"?><b><?php echo $f4; ?></b></td>

<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><?php echo "<button onclick=\"window.location.href='hcp_form_update.php?patient=$f2'\">"?>Update Record</button></td> <!-- This button redirects the user to the auto-populated form that holds the patients information which allows the user to update it -->
</tr>

<?php
$i++;
}
?> 
```

但是，当用户单击下面的链接时，我希望它根据单击的邮政编码将它们重定向到另一个页面。

```
<td align="center" bgcolor="#FFFFFF" style="border:2px solid black;"><?php echo "<a href=\"coveragehcp.php?patient= ". $f2 ."\">"?><b><?php echo $f4; ?></b></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:04:01.283

我要做的是在 GET 中使用 post code 作为参数，然后使用`$_GET['postcode']`来实现应该为用户呈现哪个页面。

所以你的链接的 PHP 代码看起来像：

```
<a href=\"coveragehcp.php?patient= ".$f2."&postcode=".$f4."\">"?><b><?php echo $f4; ?></b></td> 
```

并在coveragehcp.php页面上使用这个

```
$postcode = $_GET['postcode'];
if(!empty($postcode))
{
    if($postcode == 90210) {
        //Echo beverly hills page
    }
    else {
        //Echo default page
    }
} 
```

# java - 未调用 Android OnPOst 执行

> ID：16059010
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:01.810
> 
> 标签：java, android

我有一个异步任务。它运行一个 sql 查询。它应该自动转到 onPostExecute，但它并不总是去那里。也不例外。日志也很好。

```
class QueryDbTask extends AsyncTask<String, Void, Cursor> {
protected Cursor doInBackground(String... params) {
.... 
//sql query
try {
         cur=activityObject.execSQL(Query);

   }catch (Exception e) {
        e.printstacktrace
}
return cur;}
protected void onPostExecute(Cursor result) {   
} 
```

在什么情况下不会调用 onPostExecute？

我调试并发现它没有达到 onPost Execute

两个异步任务可以模拟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:41:37.100

`onPostExecute()`如果`doInBackground()`从未完成或任务被中断/取消，则不会被调用，在这种情况下`onCancelled()`将被调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T14:50:52.237

您必须在 onPostExecute() 上添加一个 @Override 注释才能被调用

```
@Override
protected void onPostExecute(Cursor result) {
....
} 
```

# c++ - 我可以将我的项目指向本地存储的 glut.dll 吗？

> ID：16059012
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:03.230
> 
> 标签：c++, visual-studio-2010, dll, glut

我有一个使用 glut 的 c++ opengl 项目。它在我的计算机上运行良好，但我需要能够在实验室计算机上运行它。当我尝试这样做时，它告诉我 glut.dll 没有安装，但我没有权限将文件放在计算机上正确的系统文件夹中。无论如何我可以将文件与我的游戏一起存储，并在我的项目中指向它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:46:24.057

将所需的 dll 添加到您的项目中并将属性设置为复制本地。

可执行文件在列出`$PATH`的文件夹中和包含文件的文件夹中查找 dll `exe`。

# java - Calling a method from another class in java

> ID：16059015
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:21.533
> 
> 标签：java, user-interface, bluej

I am using BlueJ and i am trying to call a method from another class. To be more specific i am trying to complete the following.

When the download music button is pressed, if a suitable value has been entered for the display number:

*   The display number is used to get the gadget, cast as MP3, from the array list.
*   The method to download music in the MP3 class is called with the download size entered.

Here is the gadgetshop class that builds the GUI and the place where i want to call the downloadMusic method. the method for the button is called downloadMusic.

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.ArrayList;

public class GadgetShop implements ActionListener
{
//Array List 
private ArrayList<Gadget>gadgets;

public void actionPerformed(ActionEvent event)
{

    if (command.equals("Download Music"))
    {
        downloadMusic();
    }
}  

public void addMp3()
{
    MP3 mp3 = new MP3(getWeight(), getPrice(), getModel(), getSize(), getMemory());
    gadgets.add(mp3);
}

public void displayAll()
{
    for(Gadget gadget : gadgets)
    {
        gadget.print();
        System.out.println();
    }
}

public void downloadMusic()
{
}

public int getDisplay()
{
    int gadgetDisplay = 0;
    try
    {
        gadgetDisplay = Integer.parseInt(displayText.getText());

    if (gadgetDisplay<= 0)
    {
      JOptionPane.showMessageDialog
      (frame, "Please enter a positive amount");  
    }
    }
    catch(NumberFormatException exception)
    {
        JOptionPane.showMessageDialog
        (frame, "Please enter a positive amount");
    }
    return gadgetDisplay;
}

public String getDownload()
{
    String gadgetDownload;
    gadgetDownload = downloadText.getText();
    return gadgetDownload;
}
} 
```

This is the MP3 class

```
public class MP3 extends Gadget
{

private int memory;

public MP3(int theWeight, double thePrice, String theModel, String theSize, int theMemory)
{
    super(theWeight,thePrice, theModel, theSize);
    memory = theMemory;
}

public void downloadMusic(String music, int MusicSize)
{
    if(MusicSize>memory)
    //if statement saying if size is greater than memory then display the follwing statemnt saying there is not enough memory
    {
        System.out.println("Not Enough Memory");
    }
    else
    // else statement opposite to the above statement saying if music size is less than or equal to the memory display the following statement
    {
        memory = memory - MusicSize;
        System.out.println("Download Successfull. "+ "\nMusic Name: "+ music + "\nMemory Left: " + memory);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:44:38.820

“*其他类”*（带有按钮）必须具有您要调用的方法的类的实例。`MP3`您可以在构造函数中创建一个实例`GadgetShop`并将其存储为实例变量。然后在你的按钮监听器调用中

```
mp3Instance.downloadMusic("music", 42); 
```

# javascript - 单个脚本文件中的两个原型引发了问题

> ID：16059018
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:35.140
> 
> 标签：javascript, jquery

我已经定义了两个原型，每个原型都包含不同的功能。

```
var sfSvgRender = function (element) {

    this.svgLink = "http://www.w3.org/2000/svg";
    this.svgObj = document.createElementNS(this.svgLink, "svg");
    this._rootId = $(element).attr("id");
    this.svgObj.setAttribute('id', this._rootId + '_svg');

};
sfSvgRender.prototype = new (function () {
    this.drawPath = function (options, element) {
        var path = document.createElementNS(this.svgLink, "path");
        $(path).attr(options);
        $(path).appendTo(element);

    },

})();

var sfAxisRender = function (axis) {
    this.currentAxis = axis;
};
sfAxisRender.prototye =new(function(){

    this.drawText=function (options, label, groupEle, svgObj) {
        var text = document.createElementNS(this.svgLink, "text");
        $(text).attr(options);
        $(text).html(label);
        $(text).appendTo(groupEle);
        $(groupEle).appendTo(svgObj);

    }

})(); 
```

当我为两个对象创建实例时，第一个对象将正常工作（即我们可以访问第一个原型的方法）

但无法访问第二个原型的方法。

```
this.svgRenderer = new sfSvgRender(this.element);

this.axisRender=new sfAxisRender(XAxis); 
```

this.svgRenderer 工作正常。但axisRender 不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:59:58.440

您拼写错误`prototype`为`prototye`on `sfAxisRender`，这就是为什么它不会从您尝试分配的新原型实例继承。

```
function sfSvgRender(element) {
    this.svgLink = "http://www.w3.org/2000/svg";
    this.svgObj = document.createElementNS(this.svgLink, "svg");
    this._rootId = $(element).attr("id");
    this.svgObj.setAttribute('id', this._rootId + '_svg');
}
sfSvgRender.prototype.drawPath = function (options, element) {
    var path = document.createElementNS(this.svgLink, "path");
    $(path).attr(options);
    $(path).appendTo(element);
};

function sfAxisRender(axis) {
    this.currentAxis = axis;
}
sfAxisRender.prototype.drawText = function (options, label, groupEle, svgObj) {
    var text = document.createElementNS(this.svgLink, "text");
    $(text).attr(options);
    $(text).html(label);
    $(text).appendTo(groupEle);
    $(groupEle).appendTo(svgObj);
}; 
```

# javascript - Have no choice to duplicate a variable in javascript or else its not working

> ID：16059021
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:38.250
> 
> 标签：javascript, html, css, function, variables

Here you can find my whole code: [http://jsfiddle.net/dpbbd/](http://jsfiddle.net/dpbbd/)

Everything is working fine, but there is something that tickle me and its this:

```
 function drawLine()
    {
        var div1 = document.getElementById('circle');
        var div2 = document.getElementById('companyName');
        connect(div1, div2, "#000", 1, "line1");
        var div1 = document.getElementById('circle2');
        var div2 = document.getElementById('companyName');
        connect(div1, div2, "#000", 1, "line2");
        var div1 = document.getElementById('circle3');
        var div2 = document.getElementById('companyName');
        connect(div1, div2, "#000", 1, "line3");
        $('.line1').fadeIn(800, function() {
        });
        $('.line2').fadeIn(800, function() {
        });
        $('.line3').fadeIn(800, function() {
        });
    } 
```

You see im declaring var div1 div2 over and over even if its the same damn thing... Now i tryed this:

```
function drawLine()
{
    var div1 = document.getElementById('circle');
    var div2 = document.getElementById('companyName');
    connect(div1, div2, "#000", 1, "line1");
    var div3 = document.getElementById('circle2');
     connect(div3, div2, "#000", 1, "line2");
    var div4 = document.getElementById('circle3');
    connect(div4, div2, "#000", 1, "line3");
    $('.line1').fadeIn(800, function() {
    });
    $('.line2').fadeIn(800, function() {
    });
    $('.line3').fadeIn(800, function() {
    });
} 
```

The error that give me is the line start drawing from the circle as normal, then go right at 0 like if div2 never existed... The first circle is working fine and the line connect to the text in the middle cause the variable is declared right before it. But as soon as i remove the var div2 before other connect, not working anymore.

Could someone explain to me whats happening o_O

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:46:19.047

当您更改 document.body 的 innerhtml 时，所有对象都会重新创建。这就是为什么你必须一直重新获取元素的原因。

如果您不想这样做，则需要附加到正文而不是一直更改其 html。

# android - Google Play 许可（基于订阅）

> ID：16059024
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:43.397
> 
> 标签：android, in-app-purchase, in-app-billing, android-lvl

我即将完成我的 android 应用程序。我有一个关于应用程序许可的查询，我想按年向用户收费（订阅模式）。

是否有可能使用订阅和应用内计费来完成。

请指出一个相同的工作示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:03:12.527

[看一下，在这里](http://developer.android.com/google/play/billing/billing_subscriptions.html)为您提供完整的详细信息

# google-app-engine - 谷歌应用引擎 JPA onetomany 关系添加失败并出现 IllegalArgumentException：超过 500 个字符的字符串

> ID：16059028
> 
> 赞同：0
> 
> 时间：2013-04-17T11:39:52.797
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, one-to-many

这是一年前在 GAE 上的一个老项目。它在那个时候工作得很好。最近我再次尝试在这个项目上工作，但现在效果不佳。我知道问题出在哪里，但我不知道如何解决。

添加新用户就OK了。但是当我尝试添加用户图像时，图像文件本身成功存储在 blobstore 中，但记录实体`Image`无法持久。

似乎 gae 无法`image`在 User 表中设置字段的值，并出现了一个奇怪的错误，即 String too long。它可能与 LAZY 加载内容有关。

如果你能帮助我，我会很高兴的。

这是我的实体和发生错误的代码。用户实体中的 OnetoMany 关系：

```
 @Entity
    public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    Integer userid;

    String username;

    String password;

    String email;

    @OneToMany()
    Collection<Image> images;

    // getter and setter....
    } 
```

图像实体：

```
@Entity
public class Image {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    Integer imageid;

    private String name;

    // full path of blobstore
    private String path;

    private Date uploadtime;

} 
```

发生错误的地方：

```
 //ImageService.java/uploadImage
    user = userDao.findUser(userid);
    Collection<Image> images = user.getImages();
    images.add(image); // Exception occurs here
    user.setImages(images);
    userDao.update(user); 
```

堆栈跟踪：

```
com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.IllegalArgumentException: path: String properties must be 500 characters or less.  Instead, use com.google.appengine.api.datastore.Text, which can store strings of any length.
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedSingleValue(DataTypeUtils.java:242)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:207)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:173)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:148)
    at com.google.appengine.api.datastore.PropertyContainer.setProperty(PropertyContainer.java:101)
    at com.google.appengine.datanucleus.EntityUtils.setEntityProperty(EntityUtils.java:169)
    at com.google.appengine.datanucleus.StoreFieldManager.storeFieldInEntity(StoreFieldManager.java:245)
    at com.google.appengine.datanucleus.StoreFieldManager.storeStringField(StoreFieldManager.java:168)
    at org.datanucleus.state.AbstractStateManager.providedStringField(AbstractStateManager.java:1438)
    at com.nhm.persistence.entity.Image.jdoProvideField(Image.java)
    at com.nhm.persistence.entity.Image.jdoProvideFields(Image.java)
    at org.datanucleus.state.AbstractStateManager.provideFields(AbstractStateManager.java:1520)
    at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObjectsInternal(DatastorePersistenceHandler.java:232)
    at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:214)
    at org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2371)
    at org.datanucleus.state.JDOStateManager.makePersistent(JDOStateManager.java:2347)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1798)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1892)
    at org.datanucleus.store.types.sco.SCOUtils.validateObjectForWriting(SCOUtils.java:1501)
    at com.google.appengine.datanucleus.scostore.AbstractFKStore.validateElementForWriting(AbstractFKStore.java:383)
    at com.google.appengine.datanucleus.scostore.FKListStore.validateElementForWriting(FKListStore.java:1029)
    at com.google.appengine.datanucleus.scostore.FKListStore.internalAdd(FKListStore.java:193)
    at com.google.appengine.datanucleus.scostore.FKListStore.addAll(FKListStore.java:114)
    at org.datanucleus.store.types.sco.backed.ArrayList.addAll(ArrayList.java:727)
    at org.datanucleus.store.types.sco.backed.ArrayList.initialise(ArrayList.java:161)
    at org.datanucleus.store.types.sco.SCOUtils.createSCOWrapper(SCOUtils.java:249)
    at org.datanucleus.store.types.sco.SCOUtils.newSCOInstance(SCOUtils.java:140)
    at org.datanucleus.state.JDOStateManager.wrapSCOField(JDOStateManager.java:2225)
    at org.datanucleus.state.AbstractStateManager.setObjectField(AbstractStateManager.java:2051)
    at com.nhm.persistence.entity.User.jdoSetimages(User.java)
    at com.nhm.persistence.entity.User.setImages(User.java:131)
    at com.nhm.web.service.ImageService.uploadImage(ImageService.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1511)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1442)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at java.lang.Thread.run(Thread.java:679) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:46:05.633

如果要存储超过 500 个 Unicode 字符的字符串，则需要使用[`Text`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Text)。请参阅[数据存储属性和值类型](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)。

# jquery - 从建议中选择后强制自动完成失去焦点

> ID：16059032
> 
> 赞同：2
> 
> 时间：2013-04-17T11:40:31.647
> 
> 标签：jquery, autocomplete

非常基本的东西，但我无法理解它。

调用后：

```
<script type="text/javascript">
    $(function() {
        $("#aspecinput").autocomplete({
            source: "search.php",
            minLength: 2
        });
    });
</script> 
```

我希望自动完成功能在选择进入该字段后立即失去焦点，因为我的搜索窗口上有一个 onblur 事件，需要运行该事件来调整所选数据。现在，我显然必须通过单击网页中的任意位置来失去焦点，才能从搜索文本字段中失去焦点。我怎样才能达到结果？

非常感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T11:47:50.390

而不是失去焦点，你可以这样做，利用`change`功能

```
$('#aspecinput').change(function(){   
    //fire search click 
    //or fire function to do search
}); 
```

或尝试使用“选择”功能

```
$('#aspecinput').autocomplete({
    'select':function(){
        $('#aspecinput').blur();
    }
}); 
```

# highslide - 使用远程托管图像时，Highslide JS 不起作用

> ID：16059033
> 
> 赞同：0
> 
> 时间：2013-04-17T11:40:32.660
> 
> 标签：highslide

使用远程托管图像时，Highslide JS 不起作用

你能帮我解决这个问题吗？

**示例 1：** [在这里不起作用 - 画廊还可以，但远程上传没有可用的缩放图像](http://filmisub.com/ekshani/338-moonraker-007-muunreikar-1979.html)

**示例 2：** [在这里工作！- 可以缩放，图像本地存储在服务器上](http://filmisub.com/komedii/321-the-incredible-burt-wonderstone-fenomenalnia-burt-uondarstoun-2013.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:10:09.537

Highslide JS 确实适用于外部托管的图像。快速演示 - 该网页位于瑞典的服务器上。这些图像位于德克萨斯州的服务器上：

[http://earlyout.jalbum.net/externalImages](http://earlyout.jalbum.net/externalImages)

# c# - Highcharts 不会重绘

> ID：16059034
> 
> 赞同：1
> 
> 时间：2013-04-17T11:40:34.773
> 
> 标签：c#, jquery, sharepoint-2010, highcharts

我正在我的 C# 页面中尝试以下代码，但我`highcharts`无法自动重绘。它始终保持与第一次加载时相同的图表。

当我转到页面的视图源时，我可以看到新数据，但它没有被绘制。

这里有人可以帮我找出问题吗

```
 <script src="/_layouts/ChartDemo/jquery-1.7.min.js" type="text/javascript"></script>
   <script src="/_layouts/ChartDemo/highcharts.js" type="text/javascript"></script>

   <asp:Literal ID="lblErrorMsg" runat="server" Text=""></asp:Literal>
     <script type="text/jscript">
       function chart() {
         $('#container').highcharts({
         credits : {enabled :0 },
         title: {
            text: null
        },
          xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { minute: '%l:%M<br>%p' },
            max: <%= MilliTimeStamp(_closingTime) %>,
            min: <%= MilliTimeStamp(_openingTime) %>,
            tickInterval: 0.5 * 3600 * 1000,
            minorTickInterval: 0.1 * 3600 * 1000,
            title: {
                text: null
            },
            lineWidth: 1,
            minorGridLineWidth: 1,
            endOnTick : true,
            gridLineWidth: 1
        },
          yAxis: {
            title: {
                text: null
            },
            tickInterval : <%= _tickIntervalY %>,
            max : <%= _maxY %>, 
            min: <%= _minY %>,
        },
        tooltip: {
            shared: true
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            area: {
                fillColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, Highcharts.getOptions().colors[0]],
                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                    ]
                },
                lineWidth: 1,
                marker: {
                    enabled: false
                },
                shadow: false,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
            },
            line : {
                lineWidth: 1,
                marker: {
                    enabled: false
                },
                shadow: false,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
                }
        },

        series: [{
            type: 'area',
            name: 'Price Index'
        },
        {
            type: 'line',
            name: 'Price',
            color: 'Red',
            index: -1
        }]
        });

        var chart1 = $('#container').highcharts();
        chart1.series[0].setData(<%=output3%>);
        chart1.series[1].setData(<%=output%>);
    }

$(document).ready(function() {
    $.ajaxSetup({ cache: false});
    chart();
    setInterval(function() {chart();}, 5000);
});

   </script>
   <div id="container" style="Width:390px;Height:265px;" > </div >
  <asp:Literal ID="lblIntraday" runat="server" Visible="false"></asp:Literal> 
```

这是我的查看源

```
 <script type="text/jscript">
   function chart() {
    $('#container').highcharts({
        credits : {enabled :0 },
        title: {
            text: null
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { minute: '%l:%M<br>%p' },
            max: 1366210680000,
            min: 1366189200000,
            tickInterval: 0.5 * 3600 * 1000,
            minorTickInterval: 0.1 * 3600 * 1000,
            title: {
                text: null
            },
            lineWidth: 1,
            minorGridLineWidth: 1,
            endOnTick : true,
            gridLineWidth: 1
        },
        yAxis: {
            title: {
                text: null
            },
            tickInterval : 29,
            max : 7024, 
            min: 6881,
        },
        tooltip: {
            shared: true
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            area: {
                fillColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, Highcharts.getOptions().colors[0]],
                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                    ]
                },
                lineWidth: 1,
                marker: {
                    enabled: false
                },
                shadow: false,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
            },
            line : {
                lineWidth: 1,
                marker: {
                    enabled: false
                },
                shadow: false,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
                }
        },

        series: [{
            type: 'area',
            name: 'Price Index'
        },
        {
            type: 'line',
            name: 'Price',
            color: 'Red',
            index: -1
        }]
        });

        var chart1 = $('#container').highcharts();
        chart1.series[0].setData([[1366189200000,6939.37],[1366210680000,6939.37]]);
        chart1.series[1].setData([[1366189931000,6938.64],[1366189997000,6939.4], [1366190063000,6938.53],[1366190129000,6943.05],[1366190195000,6942.73],[1366190261000,6943.86],[1366190327000,6944.75],[1366190393000,6941.99],[1366190459000,6941.99],[1366190525000,6945.68],[1366190591000,6943.87],[1366190657000,6947.65],[1366190723000,6942.59],[1366190789000,6941.3],[1366190855000,6943.45],[1366190921000,6946.95],[1366190987000,6949.75],[1366191053000,6952.11],[1366191119000,6950.53],[1366191185000,6951.58],[1366191251000,6953.94],[1366191317000,6954.86],[1366191383000,6955.88],[1366191449000,6957.07],[1366191515000,6956.87],[1366191581000,6956.45],[1366191647000,6958.76],[1366191713000,6956.84],[1366191779000,6956.97],[1366191845000,6955.68],[1366191911000,6957.18],[1366191977000,6960.6],[1366192043000,6959.11],[1366192109000,6960.15],[1366192175000,6960.79],[1366192241000,6962.1],[1366192307000,6964.19],[1366192373000,6963.18],[1366192439000,6966.65],[1366192505000,6964.51],[1366192571000,6963.36],[1366192637000,6960.11],[1366192703000,6958.91],[1366192769000,6959.24],[1366192835000,6955.61],[1366192901000,6955.03],[1366192967000,6955.27],[1366193033000,6954.94],[1366193099000,6954.32],[1366193165000,6953.34],[1366193231000,6951.17],[1366193297000,6951.88],[1366193363000,6955.12],[1366193429000,6956.47],[1366193495000,6954.09],[1366193561000,6953.49],[1366193627000,6953.49],[1366193693000,6953.49],[1366193759000,6953.49],[1366193825000,6953.49],[1366193891000,6953.49],[1366193957000,6953.49],[1366194023000,6953.49],[1366194089000,6953.49],[1366194155000,6953.49],[1366194221000,6953.49],[1366194287000,6953.49],[1366194353000,6953.49],[1366194419000,6953.49],[1366194485000,6953.49],[1366194551000,6953.49],[1366194617000,6953.49],[1366194683000,6953.49],[1366194749000,6953.49],[1366194815000,6953.49],[1366194881000,6953.49],[1366194947000,6953.49],[1366195013000,6953.49],[1366195079000,6953.49],[1366195145000,6953.49],[1366195211000,6953.49],[1366195277000,6953.49],[1366195343000,6953.49],[1366195409000,6953.49],[1366195475000,6953.49],[1366195541000,6953.49],[1366195607000,6953.49],[1366195673000,6953.49],[1366195739000,6953.49],[1366195805000,6953.49],[1366195871000,6953.49],[1366195937000,6953.49],[1366196003000,6953.49],[1366196069000,6953.49],[1366196135000,6953.49],[1366196201000,6953.49],[1366196267000,6953.49],[1366196333000,6953.49],[1366196399000,6953.49],[1366196465000,6953.49],[1366196531000,6953.49],[1366196597000,6953.49],[1366196663000,6953.49],[1366196729000,6953.49],[1366196795000,6953.49],[1366196861000,6953.49],[1366196927000,6953.49],[1366196993000,6953.49],[1366197059000,6953.49],[1366197125000,6953.49],[1366197191000,6953.49],[1366197257000,6953.49],[1366197323000,6953.49],[1366197389000,6953.49],[1366197455000,6953.49],[1366197521000,6953.49],[1366197587000,6953.49],[1366197653000,6953.49],[1366197719000,6953.49],[1366197785000,6953.49],[1366197851000,6953.49],[1366197917000,6953.49],[1366197983000,6953.49],[1366198049000,6953.49],[1366198115000,6953.49],[1366198181000,6953.49],[1366198247000,6953.49],[1366198313000,6953.49],[1366198379000,6953.49],[1366198445000,6953.49],[1366198511000,6953.49],[1366198577000,6953.49],[1366198643000,6953.49],[1366198709000,6953.49],[1366198775000,6953.49],[1366198841000,6953.49],[1366198907000,6953.49],[1366198973000,6953.49],[1366199039000,6953.49],[1366199105000,6953.49],[1366199171000,6953.49],[1366199237000,6953.49],[1366199303000,6953.49],[1366199369000,6953.49],[1366199435000,6953.49],[1366199501000,6953.49],[1366199567000,6953.49],[1366199633000,6953.49],[1366199699000,6953.49],[1366199765000,6953.49],[1366199831000,6953.49],[1366199897000,6953.49],[1366199963000,6953.49],[1366200029000,6953.49],[1366200095000,6953.49],[1366200161000,6953.49],[1366200227000,6953.49],[1366200293000,6953.49],[1366200359000,6953.49],[1366200425000,6953.49],[1366200491000,6953.49],[1366200557000,6953.49],[1366200623000,6953.49],[1366200689000,6953.49],[1366200755000,6953.49],[1366200821000,6953.49],[1366200887000,6953.49],[1366200953000,6953.49],[1366201019000,6953.49],[1366201085000,6953.49],[1366201151000,6953.49],[1366201217000,6953.49],[1366201283000,6953.49],[1366201349000,6953.49],[1366201415000,6953.49],[1366201481000,6953.49],[1366201547000,6953.49],[1366201613000,6953.49],[1366201679000,6953.49],[1366201745000,6953.49],[1366201811000,6953.49],[1366201877000,6953.49],[1366201943000,6953.49],[1366202009000,6953.49],[1366202075000,6953.49],[1366202141000,6953.49],[1366202207000,6953.49],[1366202273000,6953.49],[1366202339000,6953.49],[1366202405000,6953.49],[1366202471000,6953.49],[1366202537000,6953.49],[1366202603000,6953.49],[1366202669000,6953.49],[1366202735000,6953.49],[1366202801000,6953.49],[1366202867000,6953.49],[1366202933000,6953.49],[1366202999000,6953.49],[1366203065000,6953.49],[1366203131000,6953.49],[1366203197000,6953.49],[1366203263000,6953.49],[1366203329000,6953.49],[1366203395000,6953.49],[1366203461000,6953.49],[1366203527000,6953.49],[1366203593000,6953.49],[1366203659000,6953.49],[1366203725000,6953.49],[1366203791000,6953.49],[1366203857000,6953.49],[1366203923000,6953.49],[1366203989000,6953.49],[1366204055000,6953.49],[1366204121000,6953.49],[1366204187000,6953.49],[1366204253000,6953.49],[1366204319000,6953.6],[1366204385000,6954.76],[1366204451000,6954.75],[1366204517000,6953.47],[1366204583000,6950.78],[1366204649000,6949.79],[1366204715000,6949.41],[1366204781000,6951.84],[1366204847000,6950.22],[1366204913000,6947.8],[1366204979000,6949.15],[1366205045000,6949.23],[1366205111000,6950.83],[1366205177000,6952.41],[1366205243000,6952.42],[1366205309000,6950.59],[1366205375000,6951.86],[1366205441000,6953.94],[1366205507000,6954.89],[1366205573000,6954.11],[1366205639000,6952.1],[1366205705000,6951.83],[1366205771000,6953.92],[1366205837000,6956.96],[1366205903000,6956.65],[1366205969000,6957.34],[1366206035000,6955.55],[1366206101000,6954.53],[1366206167000,6954.29],[1366206233000,6955.17],[1366206299000,6954.43],[1366206365000,6954.11],[1366206431000,6951.62],[1366206497000,6955.09],[1366206563000,6953.16],[1366206629000,6954.58],[1366206695000,6953.19],[1366206761000,6953.71],[1366206827000,6952.52],[1366206893000,6949.97],[1366206959000,6951.15],[1366207025000,6949.91],[1366207091000,6950.05],[1366207157000,6949.72],[1366207223000,6948.89],[1366207289000,6949.17],[1366207355000,6950.68],[1366207421000,6946.5],[1366207487000,6948.74],[1366207553000,6949.1],[1366207619000,6950.1],[1366207685000,6950.64],[1366207751000,6950.16],[1366207817000,6949.36],[1366207883000,6950.28],[1366207949000,6950.92],[1366208015000,6947.01],[1366208081000,6946.68],[1366208147000,6945.1],[1366208213000,6940.49],[1366208279000,6941],[1366208345000,6941.92],[1366208411000,6940.79],[1366208477000,6938.13],[1366208543000,6940.11],[1366208609000,6941.44],[1366208675000,6938.81],[1366208741000,6939.83],[1366208807000,6942.09],[1366208873000,6941.54],[1366208939000,6941.58],[1366209005000,6942.39],[1366209071000,6940.98],[1366209137000,6939.87],[1366209203000,6940.65],[1366209269000,6941.29],[1366209335000,6940.24],[1366209401000,6940.26],[1366209467000,6943.39],[1366209533000,6944.74],[1366209599000,6948.32],[1366209665000,6950.42],[1366209731000,6950.06],[1366209797000,6945.72],[1366209863000,6945.49],[1366209929000,6944.25],[1366209995000,6942.01],[1366210061000,6942.06],[1366210127000,6940.87],[1366210193000,6939.34],[1366210259000,6939.76]]);
    }

$(document).ready(function() {
    $.ajaxSetup({ cache: false});
    chart();
    setInterval(function() {chart();}, 5000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:38:52.147

好吧，我想出了制作不同页面的解决方案，我将在页面加载方法上以 json 格式和 Response.write 生成系列，而不是使用 $.ajax 调用来调用该页面以获取数据并将其推送到系列。我还会在 1 分钟后调用该页面以获取新数据。查看我的客户端代码，这可能对某人有所帮助。

```
 var options = {
            chart : {
              renderTo: 'container',
            },
            credits : {enabled :0 },
            title: {
                text: null
            },
            xAxis: {
                type: 'datetime',
                dateTimeLabelFormats: { minute: '%l:%M<br>%p' },
                max: <%= MilliTimeStamp(_closingTime) %>,
                min: <%= MilliTimeStamp(_openingTime) %>,
                tickInterval: 0.5 * 3600 * 1000,
                minorTickInterval: 0.1 * 3600 * 1000,
                title: {
                    text: null
                },
                lineWidth: 1,
                minorGridLineWidth: 1,
                endOnTick : true,
                gridLineWidth: 1,
                labels : { style: {font: '7.5pt Trebuchet MS'}},
                reversed: true // true for arabic layout and false for english layout
            },
            yAxis: {
                title: {
                    text: null
                },
                tickInterval : <%= _tickIntervalY %>,
                max : <%= _maxY %>, 
                min: <%= _minY %>,
                labels : { style: {font: '7.5pt Trebuchet MS'}},
                opposite : true // true for arabic layout and false for english layout
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: false
            },
            plotOptions: {
                area: {
                    fillColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                        stops: [
                            [0, Highcharts.getOptions().colors[0]],
                            [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                        ]
                    },
                    lineWidth: 1,
                    marker: {
                        enabled: false
                    },
                    shadow: false,
                    states: {
                        hover: {
                            lineWidth: 1
                        }
                    },
                    threshold: null
                },
                line : {
                    lineWidth: 1,
                    marker: {
                        enabled: false
                    },
                    shadow: false,
                    states: {
                        hover: {
                            lineWidth: 1
                        }
                    },
                    threshold: null
                    }
            },

            series: []
            };

       function recieveData()
       {

        $.getJSON('/_layouts/ChartDemo/AjaxTest.aspx', function(data) {        
                var series = {type: 'area',name: 'Price Index'}; // <-------------------- moved and changed to object
                series.data = data;
                options.series.push(series); // <-------- pushing series object

                var series3 = {
            type: 'line',
            name: 'Price',
            color: 'Red',
            index: -1,
            data : <%=output %>
        };

        options.series.push(series3); 
              var chart = new Highcharts.Chart(options);  
              while(chart.series.length > 2)
              chart.series[1].remove(true);
              });
       }     

    $(document).ready(function() {
      $.ajaxSetup({ cache: false });
       recieveData();
       setInterval("recieveData()", 100000);
      }); 
```

# map - Can not assign to a struct member from map

> ID：16059038
> 
> 赞同：1
> 
> 时间：2013-04-17T11:40:50.927
> 
> 标签：map, struct, go

Code:

```
type t_struct struct {
    player string
    id     int
}

func main() {
    dataA := make(map[string]t_struct)
    dataB := make(map[string]*t_struct)

    var playerA t_struct
    playerA.player = "tom"
    playerA.id = 1
    dataA["classA"] = playerA
    dataA["classA"].id = 2 // ERROR, why?

    playerB := new(t_struct)
    dataB["classB"] = playerB
    dataB["classB"].player = "rick"
    dataB["classB"].id = 3
} 
```

And got error:

> cannot assign to dataA["classA"].id

I wonder why `dataA["classA"].id = 2` not worked but `dataB["classB"].id = 3` did? Is it the only way to save struct pointer into map if you want to modify member value of it?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T11:50:57.883

The expression `dataA["classA"]` if of type `t_struct`. That means that

```
dataA["classA"].id = 2 
```

is equvalent to e.g.

```
t_struct{"some player", 42}.id = 2 
```

[Playground](http://play.golang.org/p/JJ2vmKbeOD)

IOW, the struct value has no "home" and changing its field cannot be persisted. As the only possibility is a programmer's mistake, the compiler flags an error.

OTOH:

```
dataB["classB"] 
```

has type `*t_struct`. Then

```
dataB["classB"].id = 3 
```

is equivalent to

```
(*t_struct)(somePointer).id = 3 
```

I.e., this *lvalue* has a "home". It's where the pointer points to. The change to the field will be "recorded" there and it is thus a valid Go operation (simple assignment to a struct field where the struct is referenced by a pointer).

# php - 如何检查与每行中唯一数据相关联的mysql表中多行中的值

> ID：16059040
> 
> 赞同：2
> 
> 时间：2013-04-17T11:40:57.350
> 
> 标签：php, mysql

我正在使用 php 开发记录管理应用程序。我设计了一个名为 records 的表，其中包含字段`id`, `recordname`, `recordvalue`, `recordid`。例如，如果一条记录包含 3 个数据`firstname`, `lastname`, `gender`. 表中插入了 3 个数据（John Doe Male、Jane Doe Female 和 Sherlcok Holmes Male），如下所示：

```
----+-------------+--------------+-----------
id  | recordname  | recordvalue  | recordid
----+-------------+--------------+-----------
1   | firstname   | John         | 001
2   | lastname    | Doe          | 001
3   | gender      | Male         | 001
4   | firstname   | Jane         | 002  
5   | lastname    | Doe          | 002
6   | gender      | Female       | 002
7   | firstname   | Sherlock     | 003
8   | lastname    | Holmes       | 003
9   | gender      | Male         | 003

----+-------------+--------------+----------- 
```

我的问题是当我要在表中插入一条新记录时，我需要检查该记录是否有任何重复。这意味着可以随时复制不同记录的任何字段，但不能复制具有相同记录值的所有字段。从前面的示例记录中，具有 John Doe Female、Jane Doe Male、Sherlock Doe Male 等值的记录是可以的，但是再次插入 John Doe Male 是不可预期的，它会给出错误。

我怎样才能用 PHP 轻松实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:57:23.990

我认为你应该修理你的桌子，它的设计非常糟糕。应该是这样的

```
table
--------------------------------------------
record_id | firstname | lastname | gender 
```

然后你可以使用 UNIQUE INDEX (firstname, lastname, gender) 来控制它，如果你想只在你的数据库中保持它。

**[编辑]**

由于您无法更改数据库设计并且它使用 EAV 结构，您可以使用下面的查询来实现您正在寻找的内容。如果有或没有基于您的条件的记录，此查询将返回。

```
SELECT a.recordvalue, b.recordvalue, c.recordvalue
FROM rec_eav a
INNER JOIN rec_eav b ON (b.recordid = a.recordid AND b.recordname = 'lastname' )
INNER JOIN rec_eav c ON (c.recordid = a.recordid AND c.recordname = 'gender' )
WHERE a.recordname = 'firstname' 
    AND a.recordvalue = 'John'
    AND b.recordvalue = 'Doe'
    AND c.recordvalue = 'Male' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:09:45.593

如果您要使用 EAV 模型来存储数据，请考虑如下结构：

```
eav_hell(entity*,attribute*,value) 

* = (component of) PRIMRY KEY 
```

并为可怜的丢弃数据类型留心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:54:32.433

> 我的问题是当我要在表中插入一条新记录时，我需要检查该记录是否有任何重复。

您的“记录”与此处的普通数据库记录（= 一行）不同。

> 这意味着可以随时复制不同记录的任何字段，但不能复制具有相同记录值的所有字段。从前面的示例记录中，具有 John Doe Female、Jane Doe Male、Sherlock Doe Male 等值的记录是可以的，但再次插入 John Doe Male 是不希望的，它会给出错误。

因此，在您的情况下，几条记录的组合必须是唯一的。

> 我怎样才能用 PHP 轻松实现这一点？

正如 Yadav 在他的回答中所建议的那样，您可以先 SELECT 并查看是否获得了已插入数据的结果。但这可能会导致 TOCTTOU 问题——为避免这种情况，您必须将 SELECT 和 INSERT 封装到事务中。

另一种方法是使用 INSERT ... SELECT 语句。SELECT 语句必须以一种方式制定，即它只返回*未*找到要插入的值 - 计算匹配记录并使用 HAVING 过滤仅提供正确数量记录（在您的示例中为三个）的记录去做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:01:06.820

运行类似于以下内容的查询：

```
select count(*) countmatch
from datatable
where concat(recordname,':',recordvalue) in
      ('firstname:John', 'lastname:Doe', 'gender:Male')
group by recordid
order by countmatch desc
limit 1 
```

- 如果返回的 countmatch 值为 3，则拒绝新的 John Doe Male 记录，否则将其添加到表中。

编辑：如果名字、姓氏和性别一起唯一标识一条记录，但其他属性可能稀疏和/或任意填充，那么您可能需要考虑混合模式 - 可能是这样的：

```
KeyTable
--------
firstname
lastname
gender
recordid 
```

- 在名字、姓氏和性别的组合上具有唯一索引，在 recordid 上具有单独的唯一索引。

```
DataTable
--------- 
```

- 现在，在recordid上有一个外键。请注意，名字、姓氏和性别属性不应**存储**在此表中。

当尝试添加名字、姓氏和性别的“新”组合时，请尝试将它们添加到 KeyTable - 如果插入被 DBMS 拒绝，则意味着该记录已经存在。

在这种情况下，存储在 DataTable 上的记录名称/记录值组合应始终包含一个记录 ID，该记录 ID 链接到 KeyTable 上的有效记录 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:01:57.737

你将需要这样的东西：

```
SELECT a.recordid
FROM test a
JOIN test b ON ( b.recordname = 'firstname' AND b.recordvalue = 'John' AND b.recordid = a.recordid)
JOIN test c ON ( c.recordname = 'lastname' AND c.recordvalue = 'Doe' AND c.recordid = a.recordid)
WHERE (a.recordname = 'gender' AND a.recordvalue = 'female') 
```

如果结果为空，那么您可以继续（就像在我的示例中，如果您将性别值更改为男性，它将返回一个记录 ID，因此该组合已经存在）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T08:05:02.353

谢谢大家的付出。无论如何，我找到了解决问题的方法。它很棘手，我不知道它的效率如何。所以我在这里发布它以征求专家的意见。谢谢。

我的问题是-我有一个 EAV 表，其中单个实体具有多个属性和相应的值。我需要检查是否有人提交了包含某些记录值的表单，所有这些值都已作为另一条记录在数据库中。例如，如果 John Doe Male 已经在`recordid`001 下的表中，则用户不能将 John Doe Male 保存为另一条记录，而是会给用户一条消息“记录已存在！”。

我执行了一些查询-

```
foreach($submitted_values as $name => $value){
    $r = mysql_query("SELECT DISTINCT `recordid` FROM `records` WHERE `recordname` = '$name' AND `recordvalue` = '$value'");                
    while($row  = mysql_fetch_assoc($r)){
        $assoc[$name][] = $row['recordid']; 
    }
} 
```

所以在`$assoc`我得到了一个用字段名称索引并与每个匹配的数组相关联的二维数组`recordid`。

然后我检查了数组中是否有任何匹配的值，`$assoc`如果我得到一个非空数组，我确定在单个记录下提交的值有一个或多个重复。

这个过程还帮助我告诉用户存在一些部分匹配的值。它对我很有效。

再次感谢大家浪费了宝贵的时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T12:06:15.797

您可以尝试以下查询，如果返回答案，那么您已经有类似的数据。如果不是，它将返回 0 行：

```
select recordid from records 
where recordvalue in ('John', 'Doe', 'Male')
group by recordid
having count(recordid) = 3 
```

编辑：如@Xavjer 所解释，上述查询可能会给出超过 1 个结果，试试这个：

```
select * from 
(
select 
max(case when recordname="firstname" then recordvalue end) as firstname,
max(case when recordname="lastname" then recordvalue end) as lastname,
max(case when recordname="gender" then recordvalue end) as gender,
recordid
from records
group by recordid
) as record
where firstname='doe'
and lastname='john'
and gender='male' 
```

# regex - 匹配文本块中的复杂 URL (R)

> ID：16059050
> 
> 赞同：0
> 
> 时间：2013-04-17T11:41:41.813
> 
> 标签：regex, r

我想使用 John Gruber ( [http://daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls) ) 的正则表达式来匹配文本块中的复杂 URL。正则表达式非常复杂（任务也是如此，请参阅[regex to find url in a text](https://stackoverflow.com/questions/5461702/regex-to-find-url-in-a-text/5463604#5463604)）。

我的问题是我不能让它与 R 一起使用：

```
x <-   c("http://foo.com/blah_blah",
        "http://foo.com/blah_blah/",
        "(Something like http://foo.com/blah_blah)",
        "http://foo.com/blah_blah_(wikipedia)",
         "http://foo.com/more_(than)_one_(parens)",
         "(Something like http://foo.com/blah_blah_(wikipedia))",
         "http://foo.com/blah_(wikipedia)#cite-1",
         "http://foo.com/blah_(wikipedia)_blah#cite-1",
         "http://foo.com/unicode_(✪)_in_parens",
         "http://foo.com/(something)?after=parens",
         "http://foo.com/blah_blah.",
         "http://foo.com/blah_blah/.",
         "<http://foo.com/blah_blah>",
         "<http://foo.com/blah_blah/>",
         "http://foo.com/blah_blah,",
         "http://www.extinguishedscholar.com/wpglob/?p=364.",
         "http://✪df.ws/1234",
         "rdar://1234",
         "rdar:/1234",
         "x-yojimbo-item://6303E4C1-6A6E-45A6-AB9D-3A908F59AE0E",
         "message://%3c330e7f840905021726r6a4ba78dkf1fd71420c1bf6ff@mail.gmail.com%3e",
         "http://➡.ws/䨹",
         "www.c.ws/䨹",
         "<tag>http://example.com</tag>",
         "Just a www.example.com link.",
         "http://example.com/something?with,commas,in,url, but not at end",
         "What about <mailto:gruber@daringfireball.net?subject=TEST> (including brokets).",
         "mailto:name@example.com",
         "bit.ly/foo",
         "“is.gd/foo/”",
         "WWW.EXAMPLE.COM",
         "http://www.asianewsphoto.com/(S(neugxif4twuizg551ywh3f55))/Web_ENG/View_DetailPhoto.aspx?PicId=752",
         "http://www.asianewsphoto.com/(S(neugxif4twuizg551ywh3f55))",
         "http://lcweb2.loc.gov/cgi-bin/query/h?pp/horyd:@field(NUMBER+@band(thc+5a46634))")

t <- regexec("\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'".,<>?«»“”‘’]))", x)             

regmatches(x,t) 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:25:37.613

我最终使用`gregexpr`as this support `perl=TRUE`。在为 R 调整正则表达式之后，我想出了以下解决方案（使用上面的数据）。

```
findURL <- function(x){
  t <- gregexpr("(?xi)\\b(
             (?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)
             (?:[^\\s\\(\\)<>]+|\\(([^\\s\\(\\)<>]+|(\\([^\\s\\(\\)<>]+\\)))*\\))+
             (?:\\(([^\\s\\(\\)<>]+|(\\([^\\s\\(\\)<>]+\\)))*\\)|[^\\s`!\\(\\)\\[\\]{};:'\\\"\\.,<>\\?«»“”‘’])
             )",x, perl=TRUE, fixed=FALSE)
  regmatches(x,t)
} 

# Find URLs
urls <- findURL(x) 

# Count URLs
count.urls.temp <- lapply(urls, length)    
count.urls <- sum(unlist(count.urls.temp)) 
```

我希望这对其他人有帮助。

# c# - 如何在 C# 中阻止从我的整数中去除前导 0

> ID：16059056
> 
> 赞同：1
> 
> 时间：2013-04-17T11:42:02.010
> 
> 标签：c#, integer

我正在尝试存储表示 4 位字符串的整数，其中一些以 0 开头。当我在控制台中写出这些值时，前导 0 被剥离，我可以阻止这种情况发生吗？我通读了文档，但看不到任何可以阻止这种情况发生的东西。到目前为止，这是我的代码：

```
class Fitness
{
    Random random = new Random();

     int[] myArray = new int[15];
     int[] myArray2 = new int[6];
     int[] numbers = new int[6];
     int randomNumber;
     public void setup()
     {

         for (int i = 0; i < 6; i++)
         {
             do
             {
                 randomNumber = random.Next(1, 16);
             }
             while (numbers.Contains(randomNumber));

             numbers[i] = randomNumber;

         }
         Array.Sort(numbers);
         foreach (int i in numbers)
         {
             Console.WriteLine(i);
         }
         Console.WriteLine("-----------------");
         Console.WriteLine("-----------------");

         myArray[0] = 0001;
         myArray[1] = 0010;
         myArray[2] = 0011;
         myArray[3] = 0100;
         myArray[4] = 0101;
         myArray[5] = 0110;
         myArray[6] = 0111;
         myArray[7] = 1000;
         myArray[8] = 1001;
         myArray[9] = 1010;
         myArray[10] = 1011;
         myArray[11] = 1100;
         myArray[12] = 1101;
         myArray[13] = 1110;
         myArray[14] = 1111;

         for (int i = 0; i < 6; i++)
         {
             myArray2[i] = myArray[numbers[i]-1];
         }
         foreach (int i in myArray2)
         {
             Console.WriteLine(i);
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T11:46:49.530

`Int32`没有*前导零*，但`string`可以有。您需要应用正确的格式。您可以在以下位置使用十进制 ("D") 格式说明符`ToString`：

```
 foreach (int i in myArray2)
 {
     Console.WriteLine(i.ToString("d4"));
 } 
```

[**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

> 精度说明符指示结果字符串中所需的最小位数。如果需要，该数字在其左侧填充零以产生精度说明符给出的位数。如果未指定精度说明符，则默认值是表示不带前导零的整数所需的最小值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T11:44:32.300

尝试

```
Console.WriteLine(i.ToString("D4")); 
```

阅读有关[**标准数字格式字符串的更多信息...**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#DFormatString)

这与这个问题有关**[C# convert int to string with padding zeros?](https://stackoverflow.com/questions/4325267/c-sharp-convert-int-to-string-with-padding-zeros)**

## 编辑

当您按上述方式显示字符串格式时，您可以使用 int 数组做任何您想做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T11:45:14.207

您将演示文稿与表示混淆了，请尝试：

```
Console.WriteLine(i.ToString("0000")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T11:49:02.683

你不能做这个。Integer (int32) 存储在 4 个字节中，所以如果你想存储`1`(or `01`or `00000000001`) 那么字节看起来像这样（实际上[在 x86 上](http://en.wikipedia.org/wiki/Endianness)是相反的，但是 big-endian 对我们人类来说更容易阅读）：

```
00000000 00000000 00000000 00000001 
```

现在在打印这个值时，CPU 或您的程序或任何相关人员如何知道您只想打印三个零而不是内存中的三十一个？

您可以使用不同的数据类型（字符串、数组、最适合您需要的任何类型），也可以在打印时像其他答案建议的那样修复零的数量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T11:51:08.017

正如蒂姆[*所说*](https://stackoverflow.com/a/16059156/447156)，`string`可以前导零，`Int32`不能。

您可以使用[`Decimal ("D") Format Specifier`](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#DFormatString)

> 精度说明符指示结果字符串中所需的最小位数。如果需要，该数字在其左侧填充零以产生精度说明符给出的位数。如果未指定精度说明符，则默认值是表示不带前导零的整数所需的最小值。

```
Console.WriteLine(i.ToString("D4")); 
```

# php - 如何将十六进制 id 转换为 0-100 之间的数字？

> ID：16059059
> 
> 赞同：0
> 
> 时间：2013-04-17T11:42:09.620
> 
> 标签：php, math, hash

简单但令人费解的问题：

假设我有一个字符串“516e965a8fe4b”。我希望它成为一个数字 0-100。由于有超过 100 种具有这样的字母数字哈希的可能性，因此重叠很好。

我该如何实施呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:44:18.707

我很想知道你为什么想要这个。无论如何，这就是我会做的。

*   添加每个数字或字母的 ASCII 值。
*   然后制作一个 MOD 101 的号码。（[模数](http://uk1.php.net/manual/en/language.operators.arithmetic.php)）

    ID = 总和 % 101

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:48:10.067

使用这样的东西。添加数字的十六进制值并将其修改为 100：

```
function findNumber($hash) {

    $sum=0;
    for($i=0;$i<length($hash);$i++) {
        $sum+=hexdec($hash[$i]);
    }
    return $sum%100;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:01:20.727

```
function getNumber($string){
    $value = 0;
    for ($i=0; $i < strlen($string); $i++)
        $value += hexdec($string[$i]);
    $value = (int)($value/((strlen($string)+.001)*15/100));
    return $value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:14:47.243

好吧，我有一种替代方法，它甚至比其他方法更安全，因为结果不能直接由输入确定。

```
function getNumber($hex, $min, $max){
    srand(hexdec($num));
    return rand($min, $max);
} 
```

您将有一个介于 $min 和 $max 之间的数字（在您的情况下分别为 0 和 100），每次使用相同的输入运行此函数时，它总是相同的（即使它使用随机函数也是确定性的！）

# java - Java：向量的大小（以字节为单位）

> ID：16059062
> 
> 赞同：4
> 
> 时间：2013-04-17T11:42:22.777
> 
> 标签：java, android, vector, size

是否可以在 java 中以字节为单位获取 Vector 或 ArrayList 或任何对象的大小？size() 函数只给出元素的数量。但我想得到对象的实际大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:15:30.927

这应该显示内存使用情况

```
Runtime rt = Runtime.getRuntime();
long m0 = rt.totalMemory() -  rt.freeMemory();
Object obj = new Object();      // create your object here
long m1 = rt.totalMemory() -  rt.freeMemory();
System.out.println(m1 - m0); 
```

但它不起作用。这有效（至少在我的电脑上）

```
public static void main(String[] args) throws Exception {
    Object obj = createObject();
    long m0 = usedMem();
    long m1 = usedMem();
    obj = null;
    for (int i = 0; i < 100; i++)
        System.gc();
    m0 = usedMem();
    obj = createObject();
    for (int i = 0; i < 100; i++)
        System.gc();
    m1 = usedMem();
    System.out.println(m1 - m0);
}

private static long usedMem() {
    return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
}

private static Object createObject() {
    return new Object();
} 
```

如果它`8`为 new Object 和`40`new String() 打印，那么它可以正常工作，然后创建你的对象并查看它的大小

在此处查看更多信息[http://www.javaspecialists.eu/archive/Issue029.html](http://www.javaspecialists.eu/archive/Issue029.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:54:50.400

目前，我实现了自己的以获得大小。

```
long sizeof(ArrayList<String> list)
{
    long size = 0;
    for(String s: list)
        size+=s.length();
    return size;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:58:40.883

不同的 JDK 对隐式对象有不同的大小。

您可以通过隐式对象大小乘以向量或数组列表的长度来计算它。例如，如果您声明一个包含 10 条记录的整数数组，那么 Java 整数是 32 位，即 32/8 = 4 个字节。您有 10 条记录，因此 10x4 = 40 字节。

在标准 java 字节 = 8 位，短 = 16 位，整数 = 32 位，长 = 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:05:27.147

第一：尝试阅读[***Java中是否有像C中的“sizeof()”这样的运算符***](http://www.javaworld.com/javaqa/2003-12/02-qa-1226-sizeof.html)

第二：[**试试这个代码**](http://www.javaworld.com/javaworld/javatips/jw-javatip130.html)：

```
public class Sizeof
{
    public static void main (String [] args) throws Exception
    {
        // Warm up all classes/methods we will use
        runGC ();
        usedMemory ();
        // Array to keep strong references to allocated objects
        final int count = 100000;
        Object [] objects = new Object [count];

        long heap1 = 0;
        // Allocate count+1 objects, discard the first one
        for (int i = -1; i < count; ++ i)
        {
            Object object = null;

            // Instantiate your data here and assign it to object

            object = new Object ();
            //object = new Integer (i);
            //object = new Long (i);
            //object = new String ();
            //object = new byte [128][3]

            if (i >= 0)
                objects [i] = object;
            else
            {
                object = null; // Discard the warm up object
                runGC ();
                heap1 = usedMemory (); // Take a before heap snapshot
            }
        }
        runGC ();
        long heap2 = usedMemory (); // Take an after heap snapshot:

        final int size = Math.round (((float)(heap2 - heap1))/count);
        System.out.println ("'before' heap: " + heap1 +
                            ", 'after' heap: " + heap2);
        System.out.println ("heap delta: " + (heap2 - heap1) +
            ", {" + objects [0].getClass () + "} size = " + size + " bytes");
        for (int i = 0; i < count; ++ i) objects [i] = null;
        objects = null;
    }
    private static void runGC () throws Exception
    {
        // It helps to call Runtime.gc()
        // using several method calls:
        for (int r = 0; r < 4; ++ r) _runGC ();
    }
    private static void _runGC () throws Exception
    {
        long usedMem1 = usedMemory (), usedMem2 = Long.MAX_VALUE;
        for (int i = 0; (usedMem1 < usedMem2) && (i < 500); ++ i)
        {
            s_runtime.runFinalization ();
            s_runtime.gc ();
            Thread.currentThread ().yield ();

            usedMem2 = usedMem1;
            usedMem1 = usedMemory ();
        }
    }
    private static long usedMemory ()
    {
        return s_runtime.totalMemory () - s_runtime.freeMemory ();
    }

    private static final Runtime s_runtime = Runtime.getRuntime ();
} // End of class 
```

# build - Jenkins build randomly fails with a StackOverflowError during AspectJ weaving

> ID：16059063
> 
> 赞同：0
> 
> 时间：2013-04-17T11:42:23.340
> 
> 标签：build, maven-2, jenkins, aspectj

Our Jenkins (maven) build randomly fails with the following error stack:

 `````
 -- (StackOverflowError) null
null
java.lang.StackOverflowError
    at org.aspectj.weaver.World.resolve(World.java:273)
    at org.aspectj.weaver.World.resolve(World.java:209)
    at org.aspectj.weaver.UnresolvedType.resolve(UnresolvedType.java:645)
    at org.aspectj.weaver.ResolvedType.getRawType(ResolvedType.java:2331)
    at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:427)
    at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:393)
    at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:427)
    at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:393) 
````  `this failure is definitely not caused by actual code change as usually after such a failure, the subsequent build, manually triggered (i.e. not code committed), succeeds.

Versions are as follows :

Jenkins: 1.501

maven: 2.2.2

aspectjrt: 1.6.10

Anyone has an idea how to address this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:55:18.543

只是猜测，但由于 1.6.8 中修复的错误而发生了类似的错误。是什么阻止您升级到当前的 AspectJ 版本？你的真的老了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T14:27:23.967

我相信升级到最新版本的 aspectj 没有解决问题的原因是因为 aspectj maven 插件版本 1.3 是在 pom.xml 中定义的。此版本的插件依赖于 aspectj 版本 1.6.7（1.6.8 之前的版本，其中引入了修复）。将插件升级到 1.4 版（取决于 aspectj 1.6.11 版）似乎已经解决了这个问题，因为从那以后我们没有收到 StackOverflowError 异常。

一般来说，应该检查依赖树（包括插件），以防有过时的隐藏依赖。

找出依赖树（包括插件）的命令是：

`mvn dependency:tree`

和

`mvn dependency:resolve-plugins```

# jquery - SharePoint SPServices autocomplete not working for a column

> ID：16059065
> 
> 赞同：1
> 
> 时间：2013-04-17T11:42:24.533
> 
> 标签：jquery, sharepoint, sharepoint-2010, spservices

I have a working jQuery SPServices code for a column *Description* in a list. The problem is, that when I try to get the data from another column, *Project Item*, with the same code, nothing happens. Also, when I try to put the code for the both columns, the code does not work for any. Both columns are of *Single line of text* type. The code is following:

```
<script language="javascript" type="text/javascript" src="/SiteAssets/Scripts/jquery-1.8.3.min.js"></script>
<script language="javascript" type="text/javascript" src="/SiteAssets/Scripts/jquery.SPServices-0.7.2.min.js"></script>
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        document.getElementById('ctl00_m_g_b3f08547_27a4_484c_938a_f92864c47b7a_SPTextSlicerValueTextControl').title = 'Test';

        $().SPServices.SPAutocomplete({ 
            sourceList: "Projects",
            sourceColumn: "Project Item",
            columnName: "Test",
            ignoreCase: true,
            numChars: 2,
            slideDownSpeed: 50,
            debug: true
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:37:46.080

检查文档以获取自动完成功能。sourceColumn 名称需要是列的 StaticName，在这种情况下可能是 Project_x0020_Item。

# matlab - Importdata：提取数据时的问题

> ID：16059067
> 
> 赞同：-3
> 
> 时间：2013-04-17T11:42:27.247
> 
> 标签：matlab, import, ascii

我正在使用 importdata 来提取 ASCII 文件，如示例

```
u(1,1) = importdata('folder/file1_1.asc' ' ', 9)
u(1,2) = importdata('folder/file1_2.asc' ' ', 9)
u(2,1) = importdata('folder/file2_1.asc' ' ', 9) 
```

等等。现在我必须提取数据。如果我做类似的事情，一切都会好起来的

```
a = u(1,1).data(:,2) 
```

但如果我这样做

```
a(1,1) = u(1,1).data(:,2) 
```

然后 MATLAB 返回错误（下标赋值维度不匹配）并且不运行。我应该提取 272 个数据集，因此我按照上面的方法进行操作。这是一个错误吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:04:27.377

之后`a = u(1,1).data(:,2)`，是什么`size(a)`？我敢打赌不是`[1 1]`！您正在尝试将数组，即，`data(:,2)`放入单个元素，即`a(1,1)`。也许你想把它放在一个单元格数组中？

```
a{1,1} = u(1,1).data(:,2) 
```

否则是这样的（我猜你的数据结构在这里）

```
a(1:272,1) = u(1,1).data(:,2) 
```

# android - 单个活动中的滑块菜单两侧（左右）

> ID：16059069
> 
> 赞同：10
> 
> 时间：2013-04-17T11:42:36.887
> 
> 标签：android, android-sliding

我想在单个活动的两侧（左右）滑动菜单

在按钮上单击如下

![在此处输入图像描述](https://i.stack.imgur.com/bRXYM.png)

我试过这两个库

[https://github.com/jfeinstein10/SlidingMenu/](https://github.com/jfeinstein10/SlidingMenu/)

和

[https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)

## 但两者都只在右侧或左侧提供幻灯片菜单。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T03:07:40.507

是的，Analizer 使用 setmode 是正确的。这是来自 jfeinstein10 库的示例。用 setMenu.. 控制左侧菜单，用 setSecondary... 控制右侧菜单

[https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/LeftAndRightActivity.java](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/LeftAndRightActivity.java)

```
package com.slidingmenu.example;

import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.ViewGroup;

import com.slidingmenu.example.fragments.ColorFragment;
import com.slidingmenu.lib.SlidingMenu;
import com.slidingmenu.lib.SlidingMenu.OnClosedListener;
import com.slidingmenu.lib.SlidingMenu.OnOpenedListener;

public class LeftAndRightActivity extends BaseActivity {

public LeftAndRightActivity() {
    super(R.string.left_and_right);
}

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

    setContentView(R.layout.content_frame);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.content_frame, new SampleListFragment())
    .commit();

    getSlidingMenu().setSecondaryMenu(R.layout.menu_frame_two);
    getSlidingMenu().setSecondaryShadowDrawable(R.drawable.shadowright);
    getSupportFragmentManager()
    .beginTransaction()
    .replace(R.id.menu_frame_two, new SampleListFragment())
    .commit();
 }

} 
```

确保获得库的干净和更新的副本。以防万一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:03:09.983

我在[https://github.com/jfeinstein10/SlidingMenu/](https://github.com/jfeinstein10/SlidingMenu/)上使用它，它在两边都可以正常工作。不要忘记设置它以使其工作：

```
getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-26T06:28:02.210

使用 SimonVT 的 MenuDrawer，您可以使用两个 menuDrawer 实例实现两侧滑动菜单，如下所示

```
leftmenu = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_WINDOW);
rightmenu = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_WINDOW,Position.RIGHT); 
```

对于按钮单击，请参阅库中的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T09:26:40.183

我想你可以使用[https://github.com/jfeinstein10/SlidingMenu/](https://github.com/jfeinstein10/SlidingMenu/)来实现它。你应该观看演示。里面有一个左右演示。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-11T17:24:37.837

只是添加到 sooraj.e 的答案，因为它在 Simon VT 的 MenuDrawer 上一个版本中对我不起作用。

这在它的最后一个版本上运行良好（不幸的是，*不推荐使用*）

```
mDrawerLeft = MenuDrawer.attach(MainActivity.this,
MenuDrawer.Type.BEHIND, Position.LEFT, MenuDrawer.MENU_DRAG_WINDOW);
mDrawerLeft.setDropShadowEnabled(false);
mDrawerLeft.setContentView(R.layout.activity1);
mDrawerLeft.setMenuView(R.layout.menu1);

mDrawerRight = MenuDrawer.attach(MainActivity.this, 
MenuDrawer.Type.BEHIND, Position.RIGHT, MenuDrawer.MENU_DRAG_WINDOW);
mDrawerRight.setDropShadowEnabled(false);
mDrawerRight.setContentView(R.layout.activity1);
mDrawerRight.setMenuView(R.layout.menu2); 
```

库链接：[https ://github.com/SimonVT/android-menudrawer/](https://github.com/SimonVT/android-menudrawer/)

# android - Android - Using same keyboard, as the browser adress bar, in a EditText

> ID：16059071
> 
> 赞同：1
> 
> 时间：2013-04-17T11:42:42.187
> 
> 标签：android, browser, keyboard, android-edittext

I wanted the keyboard that android have with the shortcuts to ".com" to an editText, and another for an email input with the "@".

I've tried different things like this:

```
email_edit.setRawInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
facebook_edit.setRawInputType(InputType.TYPE_TEXT_VARIATION_WEB_EDIT_TEXT);
twitter_edit.setRawInputType(InputType.TYPE_TEXT_VARIATION_URI); 
```

but nothing works and the keyboard that appears is the normal one.

Any suggestions?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:44:08.017

在您的 EditText 上，您可以设置输入类型：

```
android:inputType="textEmailAddress" 
```

在代码中，您可以使用：

```
editText.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS); 
```

# python - 如何在 Blender 2.65 内部更改 file_extension

> ID：16059073
> 
> 赞同：2
> 
> 时间：2013-04-17T11:42:53.457
> 
> 标签：python, blender

我正在为 Blender 编写一个 python 脚本，我很新。我想在内部更改渲染选项中的输出文件格式。例如，`context.scene.render.file_extension = "PNG"`。但它是一个只读变量，所以我得到一个错误。有没有办法在代码中更改它？

我正在使用 Blender-2.65。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-03T09:03:43.670

您需要像这样更改图像设置：

```
bpy.context.scene.render.image_settings.file_format = 'PNG' 
```

我的 Blender 版本（Windows 上为 2.66）告诉我可以选择：

```
('BMP', 'IRIS', 'PNG', 'JPEG', 'JPEG2000', 'TARGA', 'TARGA_RAW', 'CINEON', 'DPX', 'OPEN_EXR_MULTILAYER', 'OPEN_EXR', 'HDR', 'TIFF', 'AVI_JPEG', 'AVI_RAW', 'FRAMESERVER', 'H264', 'FFMPEG', 'THEORA', 'XVID') 
```

# python - How to tag Users to Company?

> ID：16059074
> 
> 赞同：0
> 
> 时间：2013-04-17T11:42:55.467
> 
> 标签：python, xml, openerp

As Administrator I created two companies called MLC & BLC. I Created two users also called Chris & Tom.

I need to tag Chris to MLC company & Tom to BLC.but when i tried in OpenERP 7 Its gives below error.please advice me to sort this issue.

```
ValidateError

Error occurred while validating the field(s) company_id,company_ids: The chosen company is not in the allowed companies for this user 
```

@ Priyesh

Still unable to find Allowed Companies

![enter image description here](https://i.stack.imgur.com/RysVB.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:46:52.657

![在此处输入图像描述](https://i.stack.imgur.com/LztiV.png)

![在此处输入图像描述](https://i.stack.imgur.com/pYxOa.png)

您需要先在“允许的公司”中添加该公司，该公司在“访问权限”选项卡中定义。在该选项卡中添加您要分配给用户的公司，然后从主公司字段添加。它会正常工作。

# jquery - tinyMCE - parse iframe content with jQuery

> ID：16059075
> 
> 赞同：2
> 
> 时间：2013-04-17T11:42:58.513
> 
> 标签：jquery, tinymce

I need to add to some divs in my tinyMCE content text "here you can add prepared blocks" so user can select this text and click button to replace content with prepared html.

I am having trouble accessing elements within tinyMCE iframe.

I am trying basic stuff first, but it does not work:

```
$("iframe").on('click', 'div', function(e) {
    e.preventDefault();
    alert('clicked');
}); 
```

I have found some solutions that I could access source textarea (and the work good), but what I need is DOM Tree within iframe so I could easily select the divs I need.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:23:49.000

这就是你想要的

```
$(ed.getBody()).find('p'); 
```

这将使您将编辑器主体作为 jQuery 对象。find 可以用来获取你现在想要的一切

# java - 我可以为游戏客户端使用什么客户端连接？

> ID：16059076
> 
> 赞同：1
> 
> 时间：2013-04-17T11:43:00.657
> 
> 标签：java, http, servlets

我在我的服务器上使用 http servlet。

我的游戏客户端使用下一个 http 连接：

```
InetAddress inteAddress = InetAddress.getByName(server);
SocketAddress socketAddress = new InetSocketAddress(inteAddress, port);

// create a socket
socket = new Socket();

// this method will block no more than timeout ms.
int timeoutInMs = 10*1000;   // 10 seconds
socket.connect(socketAddress, timeoutInMs); 
```

时间套接字连接= 10秒......但我需要保持连接

我可以为**游戏**客户端使用什么客户端连接？（寻找最佳实践）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:51:28.523

建立套接字连接后，您可以保留它并在您认为合适的时候重复使用它。

该`timeout`参数的值仅*在建立*连接期间有效。如果是 10 秒，如您的示例所示，实现将尝试建立连接 10 秒（在此期间方法调用被阻止）。如果实现未能在这 10 秒内建立连接，它将失败。

# ios - 调整iphone5中相机标签栏的大小

> ID：16059079
> 
> 赞同：3
> 
> 时间：2013-04-17T11:43:18.453
> 
> 标签：ios, objective-c, camera, xcode4.5, uiimagepickercontroller

我无法在相机视图中调整标签栏的大小。是否可以降低 iPhone5 中相机标签栏的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:07:09.867

您是在谈论从 呈现的相机视图`UIImagePickerController`吗？因为如果是这样，不。除了在其上添加其他视图之外，没有直接的方法可以自定义图像选择器的操作栏。您可能必须使用[AVFoundation](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)中的一些内容创建自定义捕获设置。

# sql - 从 1 列中选择所有数据

> ID：16059081
> 
> 赞同：0
> 
> 时间：2013-04-17T11:43:28.647
> 
> 标签：sql, vb.net

我的代码应该根据选择的学校从模块中获取所有“课程名称”。

例如，生物学院有“生物化学”和“海洋生物学”模块。我需要选择这两个才能在计算中使用。

目前，当代码运行时，它只会采用第一个模块，即“生物化学”，但我需要它来选择所有模块。

任何人都可以帮忙吗？

```
 Dim courseSelectCom As New SqlCommand("SELECT course_name FROM course where school= '%"schoolSelect & "' ", _
                                connection) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:09:42.397

对查询做的第一件事是使用参数化查询。
这将避免[Sql Injection](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)和解析问题。

然后你应该解释为什么你`%`在 SchoolSelect 前面使用通配符。
您是否有多种以相同后缀结尾的学校，您想检索所有这些学校吗？

最后，您应该使用 DataReader 循环返回的数据或使用 DataAdapter 填充 DataTable。

所以总结

```
Dim sb = new StringBuilder()
Using connection = New SqlConnection("your_con_string_here")
    connection.Open()
    Dim courseSelectCom = New SqlCommand("SELECT course_name FROM course where school=@schoolName", connection)
    courseSelectCom.Parameters.AddWithValue("@schoolName", SchoolSelect.Text)
    Dim reader = courseSelectCom.ExecuteReader()
    while reader.Read()
         sb.AppendLine(reader("course_name")) ' or add to some kind of list to reuse'
    End While
End Using

Console.WriteLine(sb.ToString()) 
```

如果要将数据存储在 DataTable 中，则将 DataReader 循环替换为

```
 Dim dt = New DataTable()
    Dim da = New SqlDataAdapter(courseSelectCom)
    da.Fill(dt) 
```

而且您有一个 DataTable 对象用于绑定到 DataGridView、Listbox 或其他任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:54:41.077

你用什么来执行命令？如果你使用 ExecuteScalar，你只会得到第一个结果。使用 ExecuteReader 并通读或使用 DataAdapter 并用它填充 DataSet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:26:44.523

如果您想要逗号分隔列表中的所有课程，请使用`group_concat`（假设您使用的是 MySQL）：

```
SELECT group_concat(course_name)
FROM course
where school= '%"schoolSelect & "' 
```

这将返回一行，所有课程都在一个列中，例如`'biochemistry,marine biology'`.

要在 SQL Server 中执行此操作，您可以执行以下操作：

```
select stuff((select ','+course_name from course where school= '%"schoolSelect & "' for xml path ('')),
             1, 1, '') as coursenames 
```

SQL Server 没有本机聚合字符串连接运算符，因此它使用了数据库的 XML 特性。

我认为它会写成：

```
Dim courseSelectCom = New SqlCommand("select stuff((select ','+course_name from course where school= '%"schoolSelect & "' for xml path ('')),  1, 1, '') as coursenames", connection) 
```

你需要这样的东西：

```
Dim reader = courseSelectCom.ExecuteReader()
reader.Read()
reader("course_names") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:56:37.797

```
Dim courseSelectCom As New SqlCommand("SELECT course_name FROM course where school=@School", _connection)

courseSelectCom.Parameter.Add("@School", SqlDbType.VarChar).Value = SchoolSelect.Text 
```

`SchoolSelect`是您从中选择学校的文本框

# javascript - Regex password validation using JavaScript

> ID：16059087
> 
> 赞同：0
> 
> 时间：2013-04-17T11:43:53.920
> 
> 标签：javascript, jquery, regex, validation

I need to validate (and confirm) a new password on a site. There are criteria I need to test for, and I'm looking for the best method to do so, using jQuery.

The criteria are:

1.  Must have a minimum of 8 characters and a maximum of 12
2.  Should have at least three of the following: A. Upper case letter; B. Lower case letter; C. Numeric character; D. Punctuation.

**EDIT:** The following regexp is what I'm currently using to accomplish this.

```
regexp/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*(_|[^\w])).+$/ 
```

However, that checks to make sure that all four of those types are present, when I need only three out of the four (and it doesn't matter which three.) Can anyone suggest how to improve my regex to accomplish this?

**UPDATE**: I've still not figured out how to accomplish this, but have thought of a few scenarios. The way I see it is that it should be done using 5 permutations, and using AND and OR operators. However, I don't know how to do that in regex. Am I barking up the wrong tree?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:45:10.077

好的，玩了一会儿之后，这是解决方案：

```
regexp/(^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*(_|[^\w])).+$)|(^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$)|(^(?=.*[a-z])(?=.*[A-Z])(?=.*(_|[^\w])).+$)|(^(?=.*[A-Z])(?=.*\d)(?=.*(_|[^\w])).+$)|(^(?=.*[a-z])(?=.*\d)(?=.*(_|[^\w])).+$)/ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T11:53:50.347

这是一个在 javascript 中具有密码验证程序的网站：

[http://www.javascriptsource.com/forms/val-pass.html](http://www.javascriptsource.com/forms/val-pass.html)

# javascript - How to exclude ID from click function?

> ID：16059092
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:13.533
> 
> 标签：javascript, jquery, html

I`m new to jQuery and would like to know how I can edit a click function.

Here is what the HTML looks like:

```
<ul class="result">
   <li id="a"></li>
   <li></li> //will be added through a loop depending on input
</ul> 
```

So my problem is that when I will click at the `li` object it will do something. Now I would like to exclude `li id="a"` from that event. I thought `return false;` would handle this but it does not.

Here is what the jQuery function looks like:

```
$('.result li').click(function() { 
    $('.result li a').click(function (event) {
        event.preventDefault();
        event.stopPropagation();
    });
        some further code...
}); 
```

I also tried:

```
$('.result li').click(function() { 
    $('.result li a').click(function () {
        return false;
    });
        some further code...
}); 
```

Thanks alot.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T11:45:55.920

```
$('.result li:not(#a)').click(function() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T11:45:07.660

你可以这样做

```
$('.result li').click(function() {     
       if($(this).attr('id')!="your id")
        some further code...
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T11:53:38.190

尝试这个：

```
$('.result li').click(function (e) {
    if (e.target === this) {
        some further code...
    }
}); 
```

这里，`this`表示当前作用域中的元素，这里总是被`li`点击的。

and`e.target`表示实际点击的元素，可以是`li`或`a`。

因此，如果实际单击的元素不在`li`当前范围内，则`e.target === this`返回 false 并且没有任何反应（没有触发单击事件），反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:33:16.327

否定伪类（：not（X））将完成这项工作。[您可以在此处](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)对否定伪类有更好的了解

现在请试试这个

```
$('.result li:not(#a)').click(function() {

    // Your code here...

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T11:47:34.373

一个简单的 if 应该可以工作：

```
$('.result li').click(function(ev) { 
  if (this.id == "a") {
    return; 
  }

  // Do your stuff
}); 
```

# android - How to set Media player Duration in android

> ID：16059094
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:16.070
> 
> 标签：android

i want to play MediaPlayer for 1 second. How to set Duration in this code..

```
 player = MediaPlayer.create(getApplicationContext(), R.raw.beepsound);
    player.start();

    CountDownTimer Timer = new CountDownTimer(1000, 1000) {

        @Override
        public void onTick(long millisUntilFinished) {

            player.start();
        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub

            player.stop();
        }
    };
    Timer.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:08:43.257

您无需对该`onTick`方法执行任何操作。

试试这个代码：

```
player = MediaPlayer.create(getApplicationContext(), R.raw.beepsound);
player.start();

CountDownTimer timer = new CountDownTimer(1000, 1000) {

    @Override
    public void onTick(long millisUntilFinished) {
       // Nothing to do
    }

    @Override
    public void onFinish() {
        if (player.isPlaying()) {
             player.stop();
             player.release();
        }
    }
};
timer.start(); 
```

如果您查看构造函数：

```
public CountDownTimer (long millisInFuture, long countDownInterval) 
```

`millisInFuture`- 从调用 start() 到倒计时完成并调用 onFinish() 的未来毫秒数。所以`onFinish()`将在 1 秒后调用（1000 毫秒 = 1 秒）。

参考： http: [//developer.android.com/reference/android/os/CountDownTimer.html#CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html#CountDownTimer(long) (long , long)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:13:49.907

您可以使用 TimerTask 安排 MediaPlayer.stop() 在 1 秒后运行。

```
TimerTask doAsynchronousTask = new TimerTask() {       
        @Override
        public void run() {
            MediaPlayer.stop()
        }
    };
    timer.schedule(doAsynchronousTask, 0, 1000); //execute in every 20000 ms
     } 
```

你能试试这个吗

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        if (mediaPlayer.isPlaying())
            mediaPlayer.stop();
    }
}, timeout); 
```

# hadoop - Hadoop dfs.replicate 是如何工作的？

> ID：16059096
> 
> 赞同：2
> 
> 时间：2013-04-17T11:44:18.990
> 
> 标签：hadoop, mapreduce, cluster-computing, hdfs, replicate

我有一个 2 节点 hadoop（1 是主/从和另一个从）设置和 4 个输入文件，每个文件大小为 1GB。当我将 dfs.replicate 设置为 2 时，整个数据都会复制到两个节点，这是可以理解的。但我的问题是，我如何看到单个节点设置的性能改进（几乎是两倍），因为在 2 节点的情况下，map-reduce 仍将在两个系统上运行完整的数据集以及添加的将输入从 2 个映射器引导到减速器的开销。

此外，当我将复制设置为 1 时，整个数据仅存在于主节点上，这也是可以理解的，以避免以太网开销。但即使在这种情况下，与单节点设置相比，我也看到了性能提升，这让我感到困惑，因为 map-reduce 在本地数据集上运行，这种情况本质上应该类似于在主节点上运行一个 map-reduce 程序的单节点设置整个数据集上的节点？？

有人可以帮我理解我在这里缺少什么吗？？？

谢谢帕万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:53:01.100

帕万，

在两个节点的情况下，map reduce 作业不会在整个数据集上运行。MapReduce 在 HDFS 块中运行，根据您的配置，大小为 64 MB 或更大。您的 1 GB 被分成块并分布在集群节点上。其中一些块在节点 1 上处理，另一个在节点 2 上处理，但没有重复。复制因子只会增加数据的可用性和对节点故障的更大容忍度。它不会重复任务。

结果是，从处理的角度来看，数据在节点 1 和节点 2 之间拆分并被处理。这意味着，如果您充分和正确地利用您的处理能力，那么理论上您的速度就会提高一倍。

干杯抹布

# python - Python：写坐标numpy形状

> ID：16059106
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:44.570
> 
> 标签：python, numpy, shape

在我的 python 脚本中，我想将 numpy 形状的坐标写入文本文件。我导入坐标和元素定义，然后使用 numpy 形状来调整坐标。

然后我想编写一个文本文件，在其中写入调整后的坐标。

然而，使用我当前的脚本，它只生成 6 个坐标。我认为这是由于我对`s = new_triangle.shape`（见下面的脚本）的定义

应该如何定义，以便将所有新坐标写入输出文件？

```
newcoords = [[0.0, 0.0], [1.0, 0.0], [0.0, 1.0], [0.0, 0.0], [1.0, 1.0], [0.0, 1.0], [0.0, 1.0], [1.0, 1.0], [0.0, 2.0], [0.0, 2.0], [1.0, 1.0], [1.0, 2.0], [1.0, 1.0], [2.0, 1.0], [1.0, 2.0], [1.0, 2.0], [2.0, 1.0], [2.0, 2.0], [1.0, 1.0], [2.0, 0.0], [2.0, 1.0], [1.0, 0.0], [2.0, 0.0], [1.0, 1.0]]
newelems = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9, 10, 11], [12, 13, 14], [15, 16, 17], [18, 19, 20], [21, 22, 23]]

import numpy as np

#define triangles
triangles = np.array([[newcoords[e] for e in newelem] for newelem in newelems])

#find centroid of each triangle
CM = np.mean(triangles,axis=1)

#find vector from each point in triangle pointing towards centroid
point_to_CM_vectors = CM[:,np.newaxis] - triangles

#calculate similar triangles 1% smaller
new_triangle = triangles + 0.01*point_to_CM_vectors

#Define new coordinates
newcoord = []
newcoord.append(list(zip(*new_triangle)))
s = new_triangle.shape

print 'newcoords =', newcoords
print 'newcoord =', newcoord
print s

#generate output
fout = open('_PartInput4.inp','w')
fout.write('*Node-new_triangle\n')
for i, x in enumerate(new_triangle.reshape(s[1]*s[2], len(newelems))):
    fout.write("{}, {}, {}\n".format(i+1, x[0], x[1]))
fout.close() 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:13:52.240

[E先生](https://stackoverflow.com/users/553404/mr-e)之前给出了答案：

```
#generate output
with open('_PartInput3.inp','w') as fout:
    fout.write('*Node-new_triangle\n')
    s = new_triangle.shape
    for i, x in enumerate(new_triangle.reshape(s[0]*s[1], 2)):
        fout.write("{}, {}, {}\n".format(i+1, x[0], x[1])) 
```

# git - Gitolite config won't deny permissions

> ID：16059108
> 
> 赞同：1
> 
> 时间：2013-04-17T11:44:49.807
> 
> 标签：git, gitolite, access-rights, feature-branch

I'm having a config file like this:

```
@all = @group1 @group2 @group3
@group1 = user1 user2 user3
@group2 = user4 user5 user6
@group3 = user7 user8 user9

repo production_repo
    RW+           = server_key
    R             = @all

    R group_branch1 = @group1
    R group_branch1_user1 = @group1
    RW group_branch1_user1 = user1 
```

Problem is now that also i give just read rights to all users, everyone can write on the master branch. When i add a `- master = @all` as first line the result is the same.

How can i make master read-only to the @all group and give right permissions just on the users own featurebranch?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:55:24.093

遵循“[分支上的 Gitolite 权限](https://stackoverflow.com/questions/12980750/gitolite-permissions-on-branches)”和[gitolite 规则](http://gitolite.com/gitolite/rules.html)，您可以尝试：（
不幸的是，仅适用于 gitolite g3，这意味着[g2 需要迁移](http://gitolite.com/gitolite/migr.html)）

```
repo production_repo

    RW+           = server_key
    R     master  = @all
    -     master  = @all

    R group_branch1 = @group1
    R group_branch1_user1 = @group1
    RW group_branch1_user1 = user1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T12:19:20.657

请设置

```
回购 foo
     拒绝规则 = 1

```

# vb.net - 无法在 Microsoft VSTS 中记录“保存文件”操作

> ID：16059109
> 
> 赞同：1
> 
> 时间：2013-04-17T11:44:49.947
> 
> 标签：vb.net

场景是记录以下动作：

1.  下载一个excel文件。
2.  将其保存在本地计算机中。
3.  编辑文件。
4.  将编辑后的上传到应用程序中。

我尝试在 VSTS 中录制。但是在“保存文件”操作期间没有看到任何事件或路径记录。最终上传操作失败。

我该如何解决这个问题？请帮忙。

# android - resolveUri failed on bad bitmap in ListView from JSON

> ID：16059110
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:53.400
> 
> 标签：android, android-layout, android-listview

My problem is to show an imagen into a listview readed from JSON, I read a lot of posts about the issue but no one solved it completely. I cathc the url with `String imagen = e.getString("img_preview_1");` then added it into

```
HashMap<String, String> map = new HashMap<String, String>();
map.put("imagen", imagen); 
```

This is my adapter with a String and the image

```
ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.activity_videos_categoria, 
                        new String[] { "title", "imagen" }, 
                        new int[] { R.id.from , R.id.imageView1});

        setListAdapter(adapter); 
```

I tried chenging the type in the Map asn Object but still same problem

The error in LogCat is resolveUri failed on bad bitmap

Thank you

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T03:50:19.497

这里的问题是您将 a `url`（属于 String 类型）直接设置为`imageview`并请求将`SimpleAdapter`其绑定到`imageview`. 我建议您使用下面的代码中的其他适配器。因为`SimpleAdapter`和`SimpleCursorAdapter`主要用于当你有数据时`local(sqlite) database`，使内容直接反映在`listview`. 但是在这里你从服务器获取数据。所以在这里你去吧。

```
public class CustomListAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public CustomListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
           vi = inflater.inflate(R.layout.list_row, null); //This should be your row layout

        TextView titleTextView = (TextView)vi.findViewById(R.id.title); // title
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.imageview1); //image

        HashMap<String, String> localhash = new HashMap<String, String>();
        localhash = data.get(position);

        String currenttitle = localhash.get("title");
        String imagepath = localhash.get("imagen");

        titleTextView.setText(currenttitle);

        if(!imagepath.equals(""))
        {
        imageLoader.DisplayImage(imagepath , thumb_image);

        }
        return vi;
    }

} 
```

您通过以下方式将上述适配器设置为您`listview`的。从网络加载数据后包括以下代码。要从服务器加载数据，请确保您不在 UI 线程上运行网络操作。为此，您可以使用 AsyncTask、Handlers、Service 等，如果您使用 AsyncTask，请在`onPostExecute()`.

```
CustomListAdapter adapter = new CustomListAdapter(YourActivity.this, dataArrayList);
listView.setAdapter(adapter); 
```

希望这会有所帮助，顺便说一句，对于延迟回答感到抱歉。

# c# - 如何从 aspx(jquery) 获取变量值到其代码隐藏？

> ID：16059111
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:53.927
> 
> 标签：c#, jquery, asp.net

我有一个像

```
Default.aspx:
  $(function () {
    $("#divimgbtnGo").click(function () {

       var ServiceNo = $(".ddlService option:selected").val();

    });
}); 
```

在这里，我正在对 ServiceNo 进行评估。我想在我的代码隐藏（Default.aspx.cs）中使用这些值。

有人可以帮忙吗？

搜索中的所有信息都是关于将代码隐藏到 aspx。SO找不到任何有用的结果并卡在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:49:37.147

在您的 aspx 页面中有一个隐藏字段，然后将您的变量值传递给该隐藏字段，如下所示

```
$(function () {
    $("#divimgbtnGo").click(function () {
        $("#<%= yourhiddenfield.ClientID %>").val($(".ddlService option:selected").val());
    });
}); 
```

在您的代码后面获取隐藏字段的值作为 yourhiddenfield.Value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:49:29.343

例如，您可以使用[Hidden field](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)，因此`ASP.NET`将负责将该数据传输到服务器并`CLR`在之后将其映射到数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:51:09.303

您可以获取隐藏字段并将 ServiceNo 值设置为 hiddenField 并且您可以在服务器端使用隐藏字段。在 Default.aspx 页面中添加隐藏字段 `<asp:HiddenField ID="hdnServiceNo" runat="server" />`

设置隐藏字段值。

```
$(function () {
$("#divimgbtnGo").click(function () {

   var ServiceNo = $(".ddlService option:selected").val();
   $('#hdnServiceNo').val(ServiceNo );
}); 
```

});

# php - Adding menu with categories on header

> ID：16059113
> 
> 赞同：0
> 
> 时间：2013-04-17T11:44:58.743
> 
> 标签：php, magento, e-commerce, magento-1.6

I trying to add the categories of my store in the header, for this I do these steps:

On page.xml, add this block categories:

```
<block type="page/html_header" name="header" as="header">
      <block type="core/template" name="top.categories" as="topCategories" template="catalog/navigation/categories.phtml" />
      ...
</block> 
```

Create the categories.phtml, on catalog/navigation/, with this code:

```
<?php $_menu = $this->renderCategoriesMenuHtml(1,'level-top') ?>
<?php if($_menu): ?>
<nav class="left-nav">
    <ul class="nav-list">
        <?php echo $_menu ?>
    </ul>
</nav>
<?php endif ?> 
```

And call this block in header, with the code:

```
<?php echo $this->getChildHtml('topCategories') ?> 
```

But, whe I call this, return a error:

> a:5:{i:0;s:111:"Invalid method Mage_Core_Block_Template::renderCategoriesMenuHtml(Array ( [0] => 1 [1] => level-top ) )";i:1;s:3818:"#0 [internal function]: Varien_Object->__call('renderCategorie...', Array)

I'm using Magento 1.6.2.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:41:24.737

The block that you are calling with `categories.phtml` should implement `renderCategoriesMenuHtml` method, that should return menu items. You are using `core/template` block, which doesn't have such method (and shouldn't). You have to use correct block type, that implements getting categories html.

Try to use `catalog/navigation` instead of `core/template`.

# c++ - C++: call (derived's) member function on base pointer of a different derived class's object

> ID：16059116
> 
> 赞同：0
> 
> 时间：2013-04-17T11:45:04.113
> 
> 标签：c++, cocos2d-x

Is it "safe" (and/or portable) to call a member function (pointer) on the pointer of a base class, but the object pointed to is an instance different derived class. The member function does not access any member variables or functions of the derived class.

```
/* Shortened example of what happens in the client code and library */
class Base { /* ... */ }
class DerivedA : public Base {
    /* ... */ 
    public: void doSomethingA(float dt);
}
void DerivedA::doSomethingA(float dt) {
    /* Does not access members. Conventionally calls/accesses statics */
    cout << "dt(" << dt << ")";
}

class DerivedB : public Base { /* ... */ }

typedef void (Base::*SEL_SCHEDULE)(float);
SEL_SCHEDULE pCallback = (SEL_SCHEDULE)(&DerivedA::doSomethingA);

DerivedB db = new DerivedB();
Base *b = &db;
/* pCallback and b are saved in a list elsewhere (a scheduler) which calls */
(b->*pCallback)(0.f); 
```

This *seems to work* (in MSVC/Debug mode) okay at runtime, but I'm wondering whether this is Bad (TM) - and why? (I'm yet to test this code with the compilers for Android and iOS).

Some more specifics if required: I'm building a [cocos2d-x](https://github.com/cocos2d/cocos2d-x/) based project. `Base` is [`CCObject`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/cocoa/CCObject.h), `DerivedA` and `DerivedB` are subclasses of [`CCLayer`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/layers_scenes_transitions_nodes/CCLayer.h).

The hierarchy is `DerivedA` and `DerivedB` < [`CCLayer`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/layers_scenes_transitions_nodes/CCLayer.h) < [`CCNode`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/base_nodes/CCNode.h) < [`CCObject`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/cocoa/CCObject.h). They're *game scenes* which are visible/alive at mutually exclusive times.

`DerivedA` has a different *static function to set up playback of music* which receives a [`CCNode`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/base_nodes/CCNode.h) caller object as a parameter and [schedules](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/base_nodes/CCNode.cpp#L1059) another [selector](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/cocoa/CCObject.h#L78) (`doSomethingA`) to *begin playback and slowly fade it in* using something like:

```
callerNode->schedule(schedule_selector(DerivedA::doSomethingA), 0.05f); 
```

[`schedule_selector`](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/cocoa/CCObject.h#L87) is what does the C-style cast. `doSomethingA` does not access any of its member variables or call member functions. It accesses static members and calls other static functions such as [such as](https://github.com/cocos2d/cocos2d-x/blob/master/CocosDenshion/include/SimpleAudioEngine.h#L141)

```
CocosDenshion::SimpleAudioEngine::sharedEngine()->setBackgroundMusicVolume(sFadeMusicVolume); 
```

The call to `doSomethingA` at runtime happens in [CCTimer::update](https://github.com/cocos2d/cocos2d-x/blob/master/cocos2dx/CCScheduler.cpp#L160).

The *hack* is primarily to avoid duplicating code and conform to the library's callback signature (timer/scheduler system).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:54:35.823

> 我想知道这是否不好（TM）

当然是，除非它是对在公共基类中声明的虚函数的覆盖。

如果是，那么您不需要狡猾的演员阵容；只需直接从`&Base::DoSomethingA`.

如果不是，那么邪恶的 C 强制转换（这里是`reinterpret_cast`变相的）允许您将指针应用于没有该成员函数的类型；称弗兰肯斯坦的可憎之物绝对可以做任何事情。如果该函数实际上没有接触到对象，那么您很有可能不会看到任何不良影响；但你仍然坚定地处于未定义的行为中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:57:42.087

一般情况下是不安全的。

在这一行中，您使用回调的 C 样式强制转换破坏了类型安全系统：

```
SEL_SCHEDULE pCallback = (SEL_SCHEDULE)(&DerivedA::doSomethingA); 
```

DerivedA 的成员函数应该仅对 DerivedA 的实例（或进一步派生自它的东西）进行操作。你没有，你有一个 DerivedB，但是因为你的 C-cast，你的代码被编译了。

如果您的回调函数实际上试图访问 DerivedA 的成员，您可能会遇到严重的问题（未定义的行为）。

因为它是只打印的函数，所以在这种情况下可能不是未定义的，但这并不意味着你应该这样做。

一种类型安全的方法是使用一个回调，它接受一个 Base（引用）和一个 float 并使用`boost::bind`或`std::bind`创建它。

在大多数情况下，另一种简单的方法可能是您的答案，那就是调用 Base 的虚拟方法，该方法采用浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:26:51.417

是UB。

您甚至可以使用 static_cast 代替令人讨厌的 C 风格的演员表，而且演员表本身是非常合法的。但

> [注意：虽然B类不需要包含原始成员，但解除引用成员指针的对象的动态类型必须包含原始成员；见 5.5。—尾注] (5.2.9 12)
> 
> “第一个操作数称为对象表达式。如果对象表达式的动态类型不包含指针所指的成员，则行为未定义”（5.5 4）

即，当您从动态类型 DerivedB 的对象调用它时，您会变得未定义。

现在，作为一个肮脏的黑客，它可能不是最糟糕的（比手动遍历 vtables 更好），但它真的需要吗？如果您不需要任何动态数据，为什么要在 DerivedB 上调用它？Base 在库中，您无法重新定义它。Callback 也是图书管理员，所以你必须拥有这个`typedef void (Base::*SEL_SCHEDULE)(float);`，好的。但是为什么不能`doSomething`为 B 定义并指向它以与 DerivedB 的实例结合呢？你说

> doSomethingA 不访问其任何成员变量或调用成员函数。它访问静态成员并调用其他静态函数

但你也可以这样做`doSomethingB`。或者，如果您的回调与对象类型完全分离，并且您需要成员函数指针的唯一原因是符合库回调签名，您可以使您的实际回调非成员普通旧函数，并从一个调用它们-线成员回调构造函数，如`DoSomething(float dt) {ReallyDoSomething(dt);}`.

# azure - Using Windows Azure Active Directory for Public Users

> ID：16059118
> 
> 赞同：9
> 
> 时间：2013-04-17T11:45:07.740
> 
> 标签：azure, azure-active-directory

I understand that WAAD is meant for internal organizational accounts. I understand the concepts behind ADFS and other "AD in the cloud" related topics. But is there really anything that is preventing WAAD to be used for public accounts?

I want to build a public facing web site using ASP.Net MVC. I will use WIF to implement claims authentication and plan to use ACS as a claims federation provider. I want to allow the end users to login using Social Network Accounts (out of the box with ACS). But I also want to allow users to register their own user name and passwords for my web site. Can I use WAAD for this part?

Of course I could build my own custom STS. Or I could use Thinktecture IdentityServer for this purpose. But there are some clear advantages of sticking with WAAD:

*   simplicity (to set up WAAD as a STS to ACS takes just few clicks)
*   performance, security, reliability guaranteed by Azure SLAs

Is there any disadvantage to this approach?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T19:17:29.923

您当然可以使用 WAAD 来创建用户帐户。当然，您还必须强制用户使用电子邮件样式登录。

然而，WAAD 对 ThinkTecture 的 Identity Server 有一个（我认为很大）缺点：WAAD**没有**用户注册/密码管理/密码重置流程。

* * *

**更新 (29.07.2014)**

今天，WAAD 提供自助服务密码重置作为[高级功能](http://msdn.microsoft.com/en-us/library/azure/dn532272.aspx)的一部分。但是仍然没有自助服务用户注册。坦率地说，我不希望看到自助用户注册，因为 WAAD 的目标是企业，而不是您的特定场景。

* * *

要在 WAAD 中实现上述流程，您必须从头开始开发自己的 MVC 应用程序，该应用程序将 Graph API 用于所有提到的场景。

另一方面，您拥有 Identity Server，它有数千次下载，由基于声明和安全性**的专家开发。**身份服务器具有非常丰富且易于使用的可扩展结构。虽然它也没有提供开箱即用的用户注册和密码重置流程，但它已经是一个具有非常丰富的扩展点的 MVC 4 应用程序。

设置身份服务器以在 Azure 中运行也非常容易。在 Azure ACS 中将身份服务器设置为身份提供者只需在管理门户上单击几下即可。

您说 WAAD 支持 SLA、高度可用等。但如果使用至少 2 个 Web 角色实例，您在云服务上的 Identity Server 部署也将支持 SLA。

如果我必须选择是否扩展 Identity Server 以支持用户注册等，或者从头开始创建使用 WAAD Graph API 来实现该功能的全新应用程序 - 我会使用 Identity Server。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-21T22:26:16.010

截至今年 9 月，Azure B2C 预览版已经发布。这应该满足自助用户注册和不同身份提供者（Facebook、谷歌、微软......）的场景。这些都由 AzureAD 提供服务。 [Azure AD b2c](https://azure.microsoft.com/en-us/documentation/articles/active-directory-b2c-overview/)

还有一个完整的 MVC 示例可用 [Azure AD b2c MVC 示例](https://azure.microsoft.com/en-us/documentation/articles/active-directory-b2c-devquickstarts-web-dotnet/)

# c++ - 从一个文件和另一个单独的文件中获取时间，并将两个文件中的时间值放入列表 c++

> ID：16059124
> 
> 赞同：-2
> 
> 时间：2013-04-17T11:45:14.560
> 
> 标签：c++

我正在尝试加载两个文件，但我很难将在*文件 1*和*文件 2*中输入的时间，并将它们放入一个包含所有时间的列表中，但如果时间已经输入，它不会再次输入它。

这不是为了家庭作业。我只是在自己做一个应用程序项目。

--我正在构建一个时间列表，该列表将每个文件放在一个集合中，然后将已放入地图的时间加载为只有一个时间列表，但我不知道从哪里开始。如果这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:52:19.517

只需读取文件，插入读取的时间`(un)ordered_map`，如果已添加要插入的条目，则跳到下一个迭代。

```
#include <unordered_map>

std::unordered_map<std::string, VALUE_TYPE> hash;
while (read line) {

    std::string date(extract_date(line));
    auto it(hash.insert(std::make_pair(date, VALUE_TYPE())));

    // If you want to check whether the last value has been inserted
    if (it.second) {
        // do something with the pair it.first
    }

} 
```

**说明**：

在 a`map`中，无论是否有序，您都在映射值，因此，对于 type 的每个值`A`，您将保存一些 type 的值`B`。

在这种情况下，一旦您必须`VALUE_TYPE`为每个日期保存一些值，您可以简单地获取时间字符串，将其视为一个键，并且，如果该键已添加到映射容器中，则不会再次插入它 - -`VALUE_TYPE`保存在容器中的值将是初始值。

```
std::map<int, int> map;
map.insert(std::make_pair(1, 1));
map.insert(std::make_pair(2, 1));
map.insert(std::make_pair(1, 2));
map.insert(std::make_pair(2, 2));

for (auto it(map.begin()); it != map.end(); ++it) {
    std::cout << it->first << " " << it->second << std::endl;
} 
```

输出：

```
1 1
2 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:54:10.193

如果时间值在文件中排序，则`std::list<time>`用于该任务可能会更好。将 file1 和 file2 中的值按排序顺序读取到不同的列表中，并按此顺序使用`list::merge`和`list::unique`。这是因为既不`std::set`，也不`std::map`保留它们存储的值的顺序。

您将需要使用[list::push_back](http://www.cplusplus.com/reference/list/list/push_back/)、[list::merge](http://www.cplusplus.com/reference/list/list/merge/)和[list::unique](http://www.cplusplus.com/reference/list/list/unique/)，并且每个文档页面都包含一个示例。

# asp.net - 如何在 if 语句中使用枚举？

> ID：16059129
> 
> 赞同：-4
> 
> 时间：2013-04-17T11:45:28.380
> 
> 标签：asp.net, if-statement, enums

我有 ASP.NET 应用程序并想在 if 语句中使用枚举。

我以这种方式获得变量：

```
string choice = (string)Session["export_choice"];
if(choice == <here goes enum>)
{
}
else
{
} 
```

enum 只能有 2 个字符串值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:55:03.400

这通常是我会使用的地方`switch`：

```
myEnumType myEnumChoice;

if (Enum.TryParse(choice, out myEnumChoice))
{
    switch(myEnumChoice)
    {
        case myEnumType.FirstEnum:
            //doSomething();
            break;
        case myEnumType.SecondEnum:
            //doSomethingElse();
            break;
    }
}
else
    throw new ArgumentException(string.Format("Unexpected enum value: {0}", choice)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:16:33.557

采用

```
EnumChoice choice = (EnumChoice) Enum.Parse(typeof(ChumChoice), (string)Session["export_choice"] , true); 
```

EnumChoice 是枚举类型

你可以像这样使用它

```
if(choice== EnumChoice.X)
{
}
else
{
} 
```

# sharepoint - 使用 Office 365 的 Sharepoint 2010 Foundation 身份验证

> ID：16059137
> 
> 赞同：1
> 
> 时间：2013-04-17T11:45:59.620
> 
> 标签：sharepoint, authentication, sharepoint-2010, amazon-web-services, windows-live-id

我在 AWS（Amazaon Web 服务）服务器上安装了 SharePoint 2010 基础。我也有 office365（电子邮件托管计划帐户）。当用户尝试访问 SharePoint 网站时，是否可以链接到 Office 365 进行身份验证？换句话说，我可以使用 Office365 作为身份验证提供程序，类似于带有共享点的 windows live id。

任何指针都会有所帮助。

# prolog - 关于在 Prolog 中读取和格式化输入文本的程序中使用 cut 的一些疑问

> ID：16059139
> 
> 赞同：0
> 
> 时间：2013-04-17T11:46:09.010
> 
> 标签：prolog

我对这个简单的 Prolog 示例的声明性解释有一些疑问，该示例从当前输入流中读取一个句子并输出重新格式化的相同句子，以便单词之间的多个空格被单个空格字符替换。

这是我的程序的代码：

```
squeeze :- get0(C),    % Legge un carattere dallo standard input(anche blank)
           put(C),     % Scrive il carattere sullo standard output
           dorest(C).  % Fà tutto il resto.

dorest(46) :- !.   % 46 è il carattere ASCII per lo stop: tutto completato.

dorest(32) :- !,       % 32 è il carattere ACII per blank, impedisci backtrack
              get(C),  % Legge un carattere dallo standard input (non blank)
              put(C),  % Scrive il carattere sullo standard output
              dorest(C).  % Fà tutto il resto.

dorest(Letter) :- squeeze. 
```

我对它的声明性阅读和剪辑的使用有一些疑问……你能说我的解释是正确的还是我遗漏了什么？

当我在 Prolog Shell 中调用**挤压**谓词时，一切都开始了，因此，在逻辑上，我必须验证**挤压**谓词是 TRUE 还是 FALSE ...

**当规则主体中的所有内容为 TRUE 时， squeze**谓词为 TRUE：它必须已读取一个字符（也是空白）并将此字符放在输出上并验证**dorest(C)**谓词是否为 TRUE（其中 C 是读取的字符)

**dorest(C)**是程序的核心。

IF C 是对应 a 的 ASCII 码字符 46。（句号）：防止回溯（程序不能尝试其他 dorest 规则）并验证**dorest**为真，因此**挤压**谓词轮流验证为真，程序将结束

IF C是空白字符对应的ASCII码字符32：防止回溯（程序不能尝试其他dorest规则）验证**get**谓词会导致跳过所有空白字符，在当前输出流上写入C并验证**挤压**

如果 C 是一个普通字符，只需验证挤压（这会在读取字符串时引发类似循环）

所以，在这种情况下，我可以看到 CUT 运算符的使用！作为一种引出 IF 之类的方法，因为在**dorest**规则之间创建了互斥

是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:04:59.080

是的，你是对的，这里确实使用 cut 来创建 IF 构造。[`'->'`这段代码可以用结构](http://www.swi-prolog.org/pldoc/man?predicate=send_arrow%2f2)显式重写：

```
squeeze :- get0(C), put(C), dorest(C).

dorest(C):-
  (  C = 46 -> true ;
     C = 32 -> get(C), put(C), dorest(C) ;
     squeeze
  ). 
```

可以看出，`squeeze`和`dorest`是相互递归的程序。`squeeze`做某事然后调用`dorest`，它要么停止，做某事，要么`squeeze`回调。

因此，这个程序描述了一个循环，它读取用户输入直到遇到一个点，然后回显每个字符，除了对于任何空白字符序列，只有第一个空格字符被回显，这使它看起来像“将几个连续的空格挤成一个空格：

```
9 ?- squeeze.
|: 12 34   56
12 34 56
|: asd  432 123-432   56.
asd 432 123-432 56.

Yes
10 ?- squeeze.
|: 123   43 23   .rewe ew wew ew e
123 43 23 .

Yes 
```

这是一种*操作*解释，而不是声明性解释。I/O 是关于“做”，而不是关于“存在”。这就是为什么我在上面使用“程序”这个词来代替“谓词”。

# php - 考虑星期天作为开始日，我怎样才能得到周数？

> ID：16059141
> 
> 赞同：4
> 
> 时间：2013-04-17T11:46:17.327
> 
> 标签：php, datetime, week-number

```
$date = 'some date';
$todays_week = date('W',strtotime($date)); 
```

此代码为我提供了将星期一作为一周的第一天的周数。我想获得将星期日作为一周开始日的周数。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:04:27.270

据我所知，没有任何选择可以更改开始日期。因此，您可以检查当前日期是否为星期日，如果是，则将周数增加 1：

```
function getIsoWeeksInYear($year) {
    $date = new DateTime;
    $date->setISODate($year, 53);
    return ($date->format("W") === "53" ? 53 : 52);
}

function getWeek($date) {
    $week = date('W',strtotime($date));
    $day  = date('N',strtotime($date));
    $max_weeks = getIsoWeeksInYear(date('Y',strtotime($date)));

    if($day == 7 && $week != $max_weeks) {
        return ++$week;
    } elseif($day == 7) {
        return 1;
    } else {
        return $week;
    }
}

echo getWeek('2012-12-30'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:18:31.993

最优雅的解决方案是简单地在输入中添加 1 整天：

```
$todays_week = date('W', strtotime($date) + 60 * 60 * 24 ); 
```

这不起作用的唯一情况是它是 12 月 31 日，它也是一个星期日。在这种情况下，答案将错误地显示为 1。您必须对此进行检查。

# c++ - 如何使用 OpenCV C++ 找到不规则圆的半径

> ID：16059152
> 
> 赞同：0
> 
> 时间：2013-04-17T11:46:41.167
> 
> 标签：c++, opencv, geometry

如何估计我检测到的不规则圆的半径？我习惯于`findContours()`找到圆圈的位置并习惯于`moments()`找到质心。我现在只需要圆的半径，这样我就可以估计它的体积。

为了找到轮廓，我使用了以下代码：

```
findContours(Closed_Image, Contours, Hierarchy, 
             CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0,0) ); 
```

为了找到质心，我使用了以下代码：

```
vector<Moments> mu(Contours.size() );
b = 0;
for(b = 0; b < Contours.size(); b++)
{
    mu[b] = moments(Contours[b], true);
}

vector<Point2f> mc(Contours.size() );
c = 0;
for(c = 0; c < Contours.size(); c++)
{
    mc[c] = Point2f(mu[c].m10/mu[c].m00, mu[c].m01/mu[c].m00);
    cout << "Contours Centre = " << mc[c] << endl;
} 
```

我猜我需要使用存储在其中的轮廓点，`Contours`但形状不是一个完美的圆形，因此轮廓中每个点与其质心之间的距离会有所不同。这只是平均质心和轮廓中每个点之间的距离（平均距离=半径）的问题吗？如果是这样，我该如何实际实现它（我不确定如何访问 中的数据`vector<vector<Point> > Contours;`）。否则，我将如何实现对半径的估计？

[（单击此处查看我正在使用的图像）](http://postimg.org/image/pvbkhwg9p/)

质心如下：`[424.081, 13.4634], [291.159, 10.4545], [157.833, 10.4286], [24.5198, 8.09127]`

# android - Android 日期选择器格式

> ID：16059155
> 
> 赞同：0
> 
> 时间：2013-04-17T11:46:49.520
> 
> 标签：android

我正在尝试从下面的 DateTimePicker 类中以这种格式“2011 年 10 月 12 日星期五”获取日期。我是日期时间选择器的新手，并在网上找到了此代码。当我修改它时，我得到以下输出“2013 年 4 月 17 日 15:44:33”，但我想得到“2013 年 4 月 17 日星期二”。这是日期选择器类

```
public class DateTimePicker implements OnClickListener
{
    private DatePicker datePicker;
    private TimePicker timePicker;
    private ViewSwitcher viewSwitcher;

    private final int SET_DATE=100,SET_TIME=101,SET=102,CANCEL=103;

    private Button btn_setDate,btn_setTime,btn_set,btn_cancel; 

    private Calendar calendar_date=null;

    private Activity activity;

    private ICustomDateTimeListener iCustomDateTimeListener = null;

    private Dialog dialog;

    private boolean is24HourView = true;

    public DateTimePicker(Activity a,ICustomDateTimeListener customDateTimeListener) 
    {
        activity = a;
        iCustomDateTimeListener = customDateTimeListener;

        dialog = new Dialog(activity);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        View dialogView = getDateTimePickerLayout();
        dialog.setContentView(dialogView);
    }

    public View getDateTimePickerLayout()
    {
        LinearLayout.LayoutParams linear_match_wrap = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);
        LinearLayout.LayoutParams linear_wrap_wrap = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        FrameLayout.LayoutParams  frame_match_wrap = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT);

        LinearLayout.LayoutParams button_params = new LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT,1.0f);

        LinearLayout linear_main = new LinearLayout(activity);
        linear_main.setLayoutParams(linear_match_wrap);
        linear_main.setOrientation(LinearLayout.VERTICAL);
        linear_main.setGravity(Gravity.CENTER);

        LinearLayout linear_child = new LinearLayout(activity);
        linear_child.setLayoutParams(linear_wrap_wrap);
        linear_child.setOrientation(LinearLayout.VERTICAL);

        LinearLayout linear_top = new LinearLayout(activity);
        linear_top.setLayoutParams(linear_match_wrap);

        btn_setDate = new Button(activity);
        btn_setDate.setLayoutParams(button_params);
        btn_setDate.setText("Set Date");
        btn_setDate.setId(SET_DATE);
        btn_setDate.setOnClickListener(this);
        btn_setDate.setVisibility(View.GONE);
        //55
        btn_setTime = new Button(activity);
        btn_setTime.setLayoutParams(button_params);
        btn_setTime.setText("Set Time");
        btn_setTime.setId(SET_TIME);
        btn_setTime.setOnClickListener(this);
        btn_setTime.setVisibility(View.GONE);

        linear_top.addView(btn_setDate);
        linear_top.addView(btn_setTime);

        viewSwitcher = new ViewSwitcher(activity);
        viewSwitcher.setLayoutParams(frame_match_wrap);

        datePicker = new DatePicker(activity);
        timePicker = new TimePicker(activity);

        viewSwitcher.addView(timePicker);
        viewSwitcher.addView(datePicker);

        LinearLayout linear_bottom = new LinearLayout(activity);
        linear_match_wrap.topMargin = 8;
        linear_bottom.setLayoutParams(linear_match_wrap);

        btn_set = new Button(activity);
        btn_set.setLayoutParams(button_params);
        btn_set.setText("Set");
        btn_set.setId(SET);
        btn_set.setOnClickListener(this);

        btn_cancel = new Button(activity);
        btn_cancel.setLayoutParams(button_params);
        btn_cancel.setText("Cancel");
        btn_cancel.setId(CANCEL);
        btn_cancel.setOnClickListener(this);

        linear_bottom.addView(btn_set);
        linear_bottom.addView(btn_cancel);

        linear_child.addView(linear_top);
        linear_child.addView(viewSwitcher);
        linear_child.addView(linear_bottom);

        linear_main.addView(linear_child);

        return linear_main;
    }

    public void showDialog()
    {
        if(!dialog.isShowing())
         {
            if(calendar_date==null)
            calendar_date = Calendar.getInstance();

            timePicker.setIs24HourView(is24HourView);
            timePicker.setCurrentHour(calendar_date.get(Calendar.HOUR_OF_DAY));
            timePicker.setCurrentMinute(calendar_date.get(Calendar.MINUTE));

            datePicker.updateDate(calendar_date.get(Calendar.YEAR),calendar_date.get(Calendar.MONTH), calendar_date.get(Calendar.DATE));

            dialog.show();

            btn_setDate.performClick();
         }
    }

    public void dismissDialog()
    {
        if(!dialog.isShowing())
         dialog.dismiss();  
    }

    public void setDate(Calendar calendar)
    {
        if(calendar!=null)
        calendar_date = calendar;   
    }

    public void setDate(Date date)
    {
        if(date!=null)
        {
            calendar_date = Calendar.getInstance();
            calendar_date.setTime(date);    
        }
    }

    public void setDate(int year,int month,int day)
    {
        if( month<12 && month>=0 && day<32 && day>=0 && year>100 && year<3000)
        {
            calendar_date = Calendar.getInstance();
            calendar_date.set(year, month, day);
        }

    }
    public void setTimeIn24HourFormat(int hourIn24Format,int minute)
    {
        if(hourIn24Format<24 && hourIn24Format>=0 && minute>=0 && minute<60)
        {
            if(calendar_date==null)
            calendar_date = Calendar.getInstance();

            calendar_date.set(calendar_date.get(Calendar.YEAR),calendar_date.get(Calendar.MONTH), calendar_date.get(Calendar.DAY_OF_MONTH),hourIn24Format, minute);

            is24HourView = true;
        }
    }

    public void setTimeIn12HourFormat(int hourIn12Format,int minute,boolean isAM)
    {
        if(hourIn12Format<13 && hourIn12Format>0 && minute>=0 && minute<60)
        {
            if(hourIn12Format==12)
                 hourIn12Format = 0;

            int hourIn24Format = hourIn12Format;

            if(!isAM)
            hourIn24Format += 12;

            if(calendar_date==null)
            calendar_date = Calendar.getInstance();

            calendar_date.set(calendar_date.get(Calendar.YEAR),calendar_date.get(Calendar.MONTH), calendar_date.get(Calendar.DAY_OF_MONTH),hourIn24Format,minute);

            is24HourView = false;
        }
    }

    public void set24HourFormat(boolean is24HourFormat)
    {
        is24HourView = is24HourFormat;
    }

    public interface ICustomDateTimeListener 
    {
        public void onSet(Calendar calendarSelected,Date dateSelected,int year,String monthFullName,String monthShortName,int monthNumber,int date,String weekDayFullName,String weekDayShortName);
        public void onCancel();
    }

    @Override
    public void onClick(View v) 
    {
        switch (v.getId()) 
        {
         case SET_DATE: btn_setTime.setEnabled(true);
                        btn_setDate.setEnabled(false);
                        viewSwitcher.showNext();
                        break;

        /* case SET_TIME: btn_setTime.setEnabled(false);
                        btn_setDate.setEnabled(true);
                        viewSwitcher.showPrevious();
                        break;
            */
         case SET:      if(dialog.isShowing())
                        dialog.dismiss();
                        if(iCustomDateTimeListener!=null)
                        {
                            int month = datePicker.getMonth();
                            int year  = datePicker.getYear();
                            int day  = datePicker.getDayOfMonth();

                            calendar_date.set(year, month, day);

                            iCustomDateTimeListener.onSet(calendar_date, calendar_date.getTime(), calendar_date.get(Calendar.YEAR), getMonthFullName(calendar_date.get(Calendar.MONTH)), getMonthShortName(calendar_date.get(Calendar.MONTH)),calendar_date.get(Calendar.MONTH), calendar_date.get(Calendar.DAY_OF_MONTH),getWeekDayFullName(calendar_date.get(Calendar.DAY_OF_WEEK)),getWeekDayShortName(calendar_date.get(Calendar.DAY_OF_WEEK)));
                        }
                       // resetData();
                        break;

         case CANCEL:   if(dialog.isShowing())
                        dialog.dismiss();
                        if(iCustomDateTimeListener!=null)
                        iCustomDateTimeListener.onCancel(); 
                        resetData();
                        break;
        }
    }

    /**
     * @param date date in String 
     * @param fromFormat format of your <b>date</b> eg: if your date is 2011-07-07 09:09:09 then your format will be <b>yyyy-MM-dd hh:mm:ss</b> 
     * @param toFormat format to which you want to convert your <b>date</b> eg: if required format is 31 July 2011 then the toFormat should be <b>d MMMM yyyy</b> 
     * @return formatted date
     */
    public static String convertDate(String date,String fromFormat,String toFormat)
    {
        String formattedDate="";
        try 
        {
            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(fromFormat);
            Date d = simpleDateFormat.parse(date);
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(d);

            simpleDateFormat = new SimpleDateFormat(toFormat);
            simpleDateFormat.setCalendar(calendar);
            formattedDate = simpleDateFormat.format(calendar.getTime());

        } catch (Exception e) 
        {
            if(e!=null)
            e.printStackTrace();
        }

        return formattedDate;
    }

    /**
     * @param monthNumber Month Number starts with 0\. For <b>January</b> it is <b>0</b> and for <b>December</b> it is <b>11</b>.
     * @return
     */
    private String getMonthFullName(int monthNumber) 
    {
        String monthName="";

        if(monthNumber>=0 && monthNumber<12)
        try 
        {
            Calendar calendar = Calendar.getInstance();
            calendar.set(Calendar.MONTH, monthNumber);

            SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MMMM");
            simpleDateFormat.setCalendar(calendar);
            monthName = simpleDateFormat.format(calendar.getTime());
        } catch (Exception e) 
        {
            if(e!=null)
            e.printStackTrace();
        }

        return monthName;
    }

    /**
     * @param monthNumber Month Number starts with 0\. For <b>January</b> it is <b>0</b> and for <b>December</b> it is <b>11</b>.
     * @return
     */
    private String getMonthShortName(int monthNumber) 
    {
        String monthName="";

        if(monthNumber>=0 && monthNumber<12)
        try 
        {
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.MONTH, monthNumber);

        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MMM");
        simpleDateFormat.setCalendar(calendar);
        monthName = simpleDateFormat.format(calendar.getTime());
        }
        catch (Exception e)
        {
             if(e!=null)
            e.printStackTrace();
        }
        return monthName;
    }

    /**
     * @param weekDayNumber Week Number starts with 1\. For <b>Sunday</b> it is <b>1</b> and for <b>Saturday</b> it is <b>7</b>.
     * @return
     */
    private String getWeekDayFullName(int weekDayNumber) 
    {
        String weekName = "";

        if(weekDayNumber>0 && weekDayNumber<8)
        {
        try {
            Calendar calendar = Calendar.getInstance();
            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);

            SimpleDateFormat simpleDateFormat = new SimpleDateFormat("EEEE");
            simpleDateFormat.setCalendar(calendar);
            weekName = simpleDateFormat.format(calendar.getTime());
        } catch (Exception e) 
        {
            if(e!=null)
            e.printStackTrace();
        }
        }
        return weekName;
    }

    /**
     * @param weekDayNumber Week Number starts with 1\. For <b>Sunday</b> it is <b>1</b> and for <b>Saturday</b> it is <b>7</b>.
     * @return
     */
    private String getWeekDayShortName(int weekDayNumber) 
    {
        String weekName = "";
        if(weekDayNumber>0 && weekDayNumber<8)
        {
        try {
            Calendar calendar = Calendar.getInstance();
            calendar.set(Calendar.DAY_OF_WEEK, weekDayNumber);

            SimpleDateFormat simpleDateFormat = new SimpleDateFormat("EE");
            simpleDateFormat.setCalendar(calendar);
            weekName = simpleDateFormat.format(calendar.getTime());
        } catch (Exception e) {
            if(e!=null)
            e.printStackTrace();
        }
        }
        return weekName;
    }

    private int getHourIn12Format(int hour24) 
    {
        int  hourIn12Format = 0;

        if(hour24==0)
        hourIn12Format = 12;
        else if(hour24<=12)
        hourIn12Format = hour24;
        else
        hourIn12Format = hour24-12; 

        return hourIn12Format;
    }

    private String getAMPM(Calendar calendar) 
    {
        String ampm = (calendar.get(Calendar.AM_PM)==(Calendar.AM))? "AM":"PM";
        return ampm;
    }

    private void resetData()
    {
        calendar_date = null;
        is24HourView = true;
    }

    public static String pad(int i)
    {
        return i<=9?"0"+i:""+i;
    }

    public static String getSecondsFromMillis(long milliseconds) {
        return "" + ((int) ((milliseconds / 1000) % 60));
    }

    public static String getMinutesFromMillis(long milliseconds) {
        return "" + (int) ((milliseconds / (1000 * 60)) % 60);
    }

    public static String getHoursFromMillis(long milliseconds) {
        return "" + (int) ((milliseconds / (1000 * 60 * 60)) % 24);
    }

    /**
     * @param monthNumber Month Number starts with 0\. For <b>January</b> it is <b>0</b> and for <b>December</b> it is <b>11</b>.
     * @param year 
     * @return
     */
    public static int getDaysInMonth(int monthNumber,int year)
    {
          int days=0;
          if(monthNumber>=0 && monthNumber<12){
          try 
        {
            Calendar calendar = Calendar.getInstance();
              int date = 1;
              calendar.set(year, monthNumber, date);
              days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
        } catch (Exception e) 
        {
            if(e!=null)
            e.printStackTrace();
        }
          }
          return days;
    }

    /**
     * @param monthNumber Month Number starts with 0\. For <b>January</b> it is <b>0</b> and for <b>December</b> it is <b>11</b>.
     * @return
     */
    public static int getDaysInMonthInPresentYear(int monthNumber)
    {
           int days=0;
           if(monthNumber>=0 && monthNumber<12){
           try 
            {
                Calendar calendar = Calendar.getInstance();
                  int date = 1;
                  int year = calendar.get(Calendar.YEAR); 
                  calendar.set(year, monthNumber, date);
                  days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
            } catch (Exception e) 
            {
                if(e!=null)
                e.printStackTrace();
            }
           }
              return days;
    }

    public static int getDaysDifference(Date fromDate,Date toDate)
    {
         if(fromDate==null||toDate==null)
             return 0;

         return (int)( (toDate.getTime() - fromDate.getTime()) / (1000 * 60 * 60 * 24));
    }

    public static int getDaysDifference(Calendar calendar1,Calendar calendar2)
    {
         if(calendar1==null||calendar2==null)
             return 0;

         return (int)( (calendar2.getTimeInMillis() - calendar1.getTimeInMillis()) / (1000 * 60 * 60 * 24));
    }

} 
```

我在我的 MainActivity.Class 中调用它如下：

```
public class MainActivity extends Activity implements ICustomDateTimeListener 
{
    private TextView textView;
    private DateTimePicker dateTimePicker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView = (TextView) findViewById(R.id.textview);

        dateTimePicker = new DateTimePicker(MainActivity.this, this);
        dateTimePicker.set24HourFormat(true);
        dateTimePicker.showDialog();
    //rrr
    }

    @Override
    public void onSet(Calendar calendarSelected, Date dateSelected, int year,
            String monthFullName, String monthShortName, int monthNumber,
            int date, String weekDayFullName, String weekDayShortName) 
     {
        textView.setText(dateSelected.toLocaleString());
     }

    @Override
    public void onCancel() 
    {
        Log.d("datetimepickerdialog", "canceled");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:04:17.113

您必须在活动的 onSet 方法中执行此操作：

```
SimpleDateFormat formatter = new SimpleDateFormat("EEEE dd MMM yyyy");
textView.setText(formatter.format(dateSelected)); 
```

# c# - C#如何将大文件上传到ftp站点

> ID：16059157
> 
> 赞同：4
> 
> 时间：2013-04-17T11:46:50.643
> 
> 标签：c#, upload, ftp, windows-applications

我正在开发一个用于备份的 Windows 应用程序（文件和 sql 服务器数据库）。现在我需要将这些文件（.rar 文件）上传到我的 ftp 站点。对于上传，我使用此代码。

## 代码

```
string file = "D:\\RP-3160-driver.zip";
//opening the file for read.
string uploadFileName = "", uploadUrl = "";
uploadFileName = new FileInfo(file).Name;
uploadUrl = "ftp://ftp.Sitename.com/tempFiles/";
FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read);
try
{
   long FileSize = new FileInfo(file).Length; // File size of file being uploaded.

   Byte[] buffer = new Byte[FileSize];
   fs.Read(buffer, 0, buffer.Length);
   fs.Close();
   fs = null;

   string ftpUrl = string.Format("{0}/{1}", uploadUrl, uploadFileName);
   FtpWebRequest requestObj = FtpWebRequest.Create(ftpUrl) as FtpWebRequest;
   requestObj.Method = WebRequestMethods.Ftp.UploadFile;
   requestObj.Credentials = new NetworkCredential("usernam", "password");
   Stream requestStream = requestObj.GetRequestStream();
   requestStream.Write(buffer, 0, buffer.Length);
   requestStream.Flush();
   requestStream.Close();
   requestObj = null;
   MessageBox.Show("File upload/transfer Successed.", "Successed", MessageBoxButtons.OK, MessageBoxIcon.Information);
}
catch (Exception ex)
{
   if (fs != null)
   {
      fs.Close();
   }
   MessageBox.Show("File upload/transfer Failed.\r\nError Message:\r\n" + ex.Message, "Successed", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

此代码仅上传大小 < 5 Mb 的文件。但我需要上传大于 500Mb 到 1Gb 的文件。所以任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T17:12:52.457

对于较大的文件，您可以选择读取文件流并在读取时将其写入输出流。

```
FileStream fs = null;
Stream rs = null;

try 
{
    string file = "D:\\RP-3160-driver.zip";
    string uploadFileName = new FileInfo(file).Name;
    string uploadUrl = "ftp://ftp.Sitename.com/tempFiles/";
    fs = new FileStream(file, FileMode.Open, FileAccess.Read);

    string ftpUrl = string.Format("{0}/{1}", uploadUrl, uploadFileName);
    FtpWebRequest requestObj = FtpWebRequest.Create(ftpUrl) as FtpWebRequest;
    requestObj.Method = WebRequestMethods.Ftp.UploadFile;
    requestObj.Credentials = new NetworkCredential("usernam", "password");
    rs = requestObj.GetRequestStream();

    byte[] buffer = new byte[8092];
    int read = 0;
    while ((read = fs.Read(buffer, 0, buffer.Length)) != 0)
    {
       rs.Write(buffer, 0, read);
    }
    rs.Flush();
}
catch (Exception exception) 
{

    MessageBox.Show("File upload/transfer Failed.\r\nError Message:\r\n" + exception.Message, "Succeeded", MessageBoxButtons.OK, MessageBoxIcon.Information);
}
finally 
{
    if (fs != null)
    {
        fs.Close();
        fs.Dispose();
    }

    if (rs != null)
    {
        rs.Close();
        rs.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T11:58:05.943

`Stream`类有一个不错的 Method `CopyTo`。

您不需要从/向流读取和写入。只需使用`fs.CopyTo(requestStream);`

使用这种方法，您不必像这样声明大型数组`new Byte[FileSize];`

# windows-8 - Windows 8 app tile periodically update when it's not running

> ID：16059167
> 
> 赞同：1
> 
> 时间：2013-04-17T11:47:25.910
> 
> 标签：windows-8, microsoft-metro, live-tile

I've a app called 'drumtime' installed on Windows 8\. It's tile is being changed/updated on every about 10 seconds. This couldn't be done with Background tasks I guess because a background task needs 15 minutes to be executed. But even if the app is not running, it's tile is still being updated.

![enter image description here](https://i.stack.imgur.com/qdHBm.jpg) after 10 seconds => ![enter image description here](https://i.stack.imgur.com/AVJgs.jpg)

So, how can I update an app's tile on every 10 seconds even when the app itself is not running?

I appreciate any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:57:42.687

这是每分钟更新磁贴的[MSDN 示例。](http://code.msdn.microsoft.com/windowsapps/Tile-Update-every-minute-68dbbbff)你可以学习逻辑。您必须以这种方式设置时间表，磁贴会在 10 秒内更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:16:26.800

我下载了 Drumtime 来检查一下，它在它的动态磁贴上使用了 peek 动画。查看[可用磁贴模板列表](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761491.aspx)。其中一些是“窥视”模板，可以在两个不同的平铺模板之间平滑地动画。这就是 Drumtime 正在做的事情。我在我的应用程序的磁贴中使用了偷看动画；我用细节 写了[这篇文章。](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)

# angularjs - 尽管小心，角度选择添加空元素

> ID：16059169
> 
> 赞同：2
> 
> 时间：2013-04-17T11:47:29.690
> 
> 标签：angularjs, option, ng-repeat

我有这个html：

```
<select ng-model="group.newCriterionType">
    <option ng-repeat="type in group.availableTypes" value="{{type}}" ng-selected="$first">{{type}}</option>
</select> 
```

还有这个模型代码（使用 jresig 的`Class`迷你库）

```
var FilterGroup = Class.extend({
  className: 'FilterGroup',
  widgetType: 'group',
  init: function(name) {
    this.name = name;
    this.availableTypes = FilterTypes;
    this.newCriterionType = this.availableTypes[0];
    this.updateAvailableTypes();
  },
}); 
```

但是，我的选择中仍然有一个空元素。根据到目前为止我在 SO 上看到的所有答案，这显然是您的模型值包含不正确值时的行为。然而：

*   我在一些`console.log`语句中添加了检查值
*   肯定会调用此代码，因为`availableTypes`正在设置
*   它把它从它循环的数组中拉出来。这怎么可能是一个不正确的值？
*   即使我将 ng-selected 拉出，它仍然存在
*   如果我使用 ng-options 而不是循环遍历它们，它仍然存在（尽管这意味着我不能将值设置为与文本相同而不将其转换为对象）

任何线索都非常感谢。

詹姆士

# c# - WCF not allowing large list . Throwing "The remote server returned an unexpected response: (400) Bad Request." exception

> ID：16059175
> 
> 赞同：0
> 
> 时间：2013-04-17T11:47:42.177
> 
> 标签：c#, asp.net, wcf, silverlight

I have a list which has 9 fields. When i pass A smaller list (say 50 rows) the application is working fine. If i pass a larger list my service is throwing the exception "The remote server returned an unexpected response: (400) Bad Request." exception. please help me solving this issue.

My Web config is as below

```
 <?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />

  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Windows">
            <!--<forms loginUrl="~/Account/Login.aspx" timeout="2880" />-->
    </authentication>
    <identity impersonate="false" />
    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

    <httpRuntime maxRequestLength="2147483647" executionTimeout="3600"/>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors >
        <behavior name="Behavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService1" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" 
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_IErrorService" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>            
        <binding name="BasicHttpBinding_ISecurityUserService" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" 
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:6789/Service1.svc" binding="basicHttpBinding"
        bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
        name="BasicHttpBinding_IService1" />
      <endpoint address="http://localhost:6789/ErrorService.svc" binding="basicHttpBinding"
        bindingConfiguration="BasicHttpBinding_IErrorService" contract="ErrorServiceReference.IErrorService"
        name="BasicHttpBinding_IErrorService" />
      <endpoint address="http://localhost:6789/SecurityUserService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ISecurityUserService"
        contract="SecurityUserServiceReference.ISecurityUserService"
        name="BasicHttpBinding_ISecurityUserService" />          
    </client>
  </system.serviceModel>
</configuration> 
```

and my wcf config is as below

```
 <?xml version="1.0"?>
    <configuration>
      <connectionStrings>

        <add name="DEFAULT"  connectionString="server=DEV1;Port=52;database=UTIL;User=ara;password=me;Charset=iso_1;Connect Timeout=100" />

      </connectionStrings>
      <appSettings>
        <add key="DEFAULT_SERVER" value="UAT"/>
        <add key="DEFAULT_DATABASE" value="UTIL"/>
        <add key="DEFAULT_PORT" value="480"/>
        <add key="DEFAULT_USER" value="fator"/>
        <add key ="DEFAULT_PASSWORD" value="U212ajUyODY="/>
      </appSettings>
      <system.web>
        <compilation debug="true" targetFramework="4.0" />

          <httpRuntime maxRequestLength="2147483647" executionTimeout="3600"/>

      </system.web>
      <system.serviceModel>
        <behaviors>
          <serviceBehaviors>
            <behavior name="Behavior">
              <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
              <serviceMetadata httpGetEnabled="true"/>
              <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
              <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
          </serviceBehaviors>
        </behaviors>

        <services>

        </services>

        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
      </system.serviceModel>
     <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
      </system.webServer>

    </configuration> 
```

I modified my service web config with endpoint and binding as below. but still I am getting the same error

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>

    <add name="DEFAULT"  connectionString="server=DEV;Port=52;database=UTIL;User=ar;password=me3;Charset=iso_1;Connect Timeout=100" />

  </connectionStrings>
  <appSettings>
    <add key="DEFAULT_SERVER" value="UA"/>
    <add key="DEFAULT_DATABASE" value="UTIL"/>
    <add key="DEFAULT_PORT" value="45"/>
    <add key="DEFAULT_USER" value="fr"/>
    <add key ="DEFAULT_PASSWORD" value="Y="/>
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />

      <httpRuntime maxRequestLength="2147483647" executionTimeout="3600"/>

  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>
      <service name="Service.Service1" behaviorConfiguration="Behavior">
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttpBinding_IService1"
                  contract="Service.IService1"
                  name="BasicHttpBinding_IService1" />
        <endpoint address="mex" 
                  binding="mexHttpBinding"
                  contract="IMetaDataExchange"></endpoint>
        <host>
          <timeouts openTimeout="00:30:00" />
        </host>
      </service>
      <service name="Service.ErrorService" behaviorConfiguration="Behavior">
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttpBinding_IErrorService"
                  contract="Service.IErrorService"
                  name="BasicHttpBinding_IErrorService" />
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetaDataExchange"></endpoint>
        <host>
          <timeouts openTimeout="00:30:00" />
        </host>
      </service>
      <service name="Service.SecurityUserService" behaviorConfiguration="Behavior">
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttpBinding_ISecurityUserService"
                  contract="Service.ISecurityUserService"
                  name="BasicHttpBinding_IErrorService" />
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetaDataExchange"></endpoint>
        <host>
          <timeouts openTimeout="00:30:00" />
        </host>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
      <binding name="BasicHttpBinding_IService1" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
        messageEncoding="Text" textEncoding="utf-8" 
        useDefaultWebProxy="true">
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
          maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

        <security mode="None">
          <transport clientCredentialType="Windows" proxyCredentialType="Windows"
            realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
        <binding name="BasicHttpBinding_IErrorService" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_ISecurityUserService" closeTimeout="00:20:00"
        openTimeout="00:20:00" receiveTimeout="00:20:00" sendTimeout="00:20:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" 
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

I guess The endpoint and the binding i defined explicitly are not getting used by the service. please correct me if i have configured The service wrong

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:24:43.540

试试下面的标签

您的应用程序中的问题是您使用不同的合同名称进行服务。在 Web.Config 中，您将合同名称用作 Service1 的“ServiceReference1.IService1”，而在服务 Web 配置中，您将合同名称用作“Service.IService1”。也许它会解决你的问题。

```
<system.serviceModel>
    <diagnostics performanceCounters ="All"/>  
    <services>
      <service behaviorConfiguration ="Default" name ="Service.IService1">
        <endpoint address="" behaviorConfiguration="Web" binding ="basicHttpBinding" contract ="ServiceReference1.IService1"></endpoint>
        <host>
          <baseAddresses>                
          </baseAddresses>
        </host>
      </service>      
    </services>
    <behaviors>      
      <serviceBehaviors>
        <behavior name ="Default">

          <serviceThrottling maxConcurrentCalls ="100" maxConcurrentSessions ="100"/>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name ="Web"></behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment  multipleSiteBindingsEnabled="true" />

  </system.serviceModel> 
```

# qt4 - 如何使用 QVTK 从 Openni Kinect Grabber 可视化 3D 云

> ID：16059178
> 
> 赞同：3
> 
> 时间：2013-04-17T11:47:44.147
> 
> 标签：qt4, kinect, vtk, openni, point-cloud-library

我正在使用 PCL 构建一个应用程序，用于从 Openni Grabber 查看注册的深度云，旁边是一个带有一些按钮的面板，用于一些附加功能。我发现 QVTK 可以帮助实现这个目的。我尝试了这个[基本的实现](http://code.google.com/p/miminect/source/browse/trunk/pcl_qt_vtk/pcl_qt_vtk.cpp)。它工作正常。我使用这种方法来修改[openni_viewer](https://github.com/PointCloudLibrary/pcl/blob/master/visualization/tools/openni_viewer.cpp)示例以在 Qt 窗口中进行可视化。但是我遇到了段错误。我真的很感激任何帮助。

```
template <typename PointType>
class OpenNIViewer
{
  public:
typedef pcl::PointCloud<PointType> Cloud;
typedef typename Cloud::ConstPtr CloudConstPtr;

OpenNIViewer (pcl::Grabber& grabber, int argc, char** argv)
  : cloud_viewer_ (new pcl::visualization::PCLVisualizer ("PCL OpenNI cloud", false))
  , grabber_ (grabber)
  , rgb_data_ (0), rgb_data_size_ (0), cloud_init(false), argc(argc), argv(argv)
{
}

void
cloud_callback (const CloudConstPtr& cloud)
{
  FPS_CALC ("cloud callback");
  boost::mutex::scoped_lock lock (cloud_mutex_);
  cloud_ = cloud;
  if (cloud)
  {
    FPS_CALC ("drawing cloud");

    if (!cloud_init)
    {
      cloud_viewer_->setPosition (0, 0);
      cloud_viewer_->setSize (cloud->width, cloud->height);
      cloud_init = !cloud_init;
    }

    if (!cloud_viewer_->updatePointCloud (cloud, "OpenNICloud"))
    {
      cloud_viewer_->addPointCloud (cloud, "OpenNICloud");
      cloud_viewer_->resetCameraViewpoint ("OpenNICloud");
    }          
  }
}

void 
keyboard_callback (const pcl::visualization::KeyboardEvent& event, void*)
{
  if (event.getKeyCode ())
    cout << "the key \'" << event.getKeyCode() << "\' (" << event.getKeyCode() << ") was";
  else
    cout << "the special key \'" << event.getKeySym() << "\' was";
  if (event.keyDown())
    cout << " pressed" << endl;
  else
    cout << " released" << endl;
}

void 
mouse_callback (const pcl::visualization::MouseEvent& mouse_event, void*)
{
  if (mouse_event.getType() == pcl::visualization::MouseEvent::MouseButtonPress && mouse_event.getButton() == pcl::visualization::MouseEvent::LeftButton)
  {
    cout << "left button pressed @ " << mouse_event.getX () << " , " << mouse_event.getY () << endl;
  }
}

/**
* @brief starts the main loop
*/
void
run ()
{
  cloud_viewer_->registerMouseCallback (&OpenNIViewer::mouse_callback, *this);
  cloud_viewer_->registerKeyboardCallback(&OpenNIViewer::keyboard_callback, *this);
  boost::function<void (const CloudConstPtr&) > cloud_cb = boost::bind (&OpenNIViewer::cloud_callback, this, _1);
  boost::signals2::connection cloud_connection = grabber_.registerCallback (cloud_cb);

  grabber_.start ();

  QApplication app(argc, argv);
  QMainWindow* window = new QMainWindow;
  window->resize(640,480);
  QHBoxLayout *layout = new QHBoxLayout;

  QVTKWidget widget1;
  widget1.resize(640, 480);
  layout->addWidget(&widget1);

  vtkSmartPointer<vtkRenderWindow> renderWindow = cloud_viewer_->getRenderWindow();
  widget1.SetRenderWindow(renderWindow);

  QWidget* center = new QWidget();
  window->setCentralWidget(center);

  window->centralWidget()->setLayout(layout);
  window->show();
  app.exec();

  grabber_.stop ();

  cloud_connection.disconnect ();

  if (rgb_data_)
    delete[] rgb_data_;
}

boost::shared_ptr<pcl::visualization::PCLVisualizer> cloud_viewer_;

pcl::Grabber& grabber_;
boost::mutex cloud_mutex_;

CloudConstPtr cloud_;

unsigned char* rgb_data_;
unsigned rgb_data_size_;

bool cloud_init;
int argc;
char** argv;
};

boost::shared_ptr<pcl::visualization::PCLVisualizer> cld;
boost::shared_ptr<pcl::visualization::ImageViewer> img;

int
main (int argc, char** argv)
{
  XInitThreads();
  std::string device_id("");
  pcl::OpenNIGrabber::Mode depth_mode = pcl::OpenNIGrabber::OpenNI_Default_Mode;
  pcl::OpenNIGrabber::Mode image_mode = pcl::OpenNIGrabber::OpenNI_Default_Mode;
  bool xyz = false;

  if (argc >= 2)
  {
device_id = argv[1];
if (device_id == "--help" || device_id == "-h")
{
  printHelp(argc, argv);
  return 0;
}
else if (device_id == "-l")
{
  if (argc >= 3)
  {
    pcl::OpenNIGrabber grabber(argv[2]);
    boost::shared_ptr<openni_wrapper::OpenNIDevice> device = grabber.getDevice();
    cout << "Supported depth modes for device: " << device->getVendorName() << " , " << device->getProductName() << endl;
    std::vector<std::pair<int, XnMapOutputMode > > modes = grabber.getAvailableDepthModes();
    for (std::vector<std::pair<int, XnMapOutputMode > >::const_iterator it = modes.begin(); it != modes.end(); ++it)
    {
      cout << it->first << " = " << it->second.nXRes << " x " << it->second.nYRes << " @ " << it->second.nFPS << endl;
    }

    if (device->hasImageStream ())
    {
      cout << endl << "Supported image modes for device: " << device->getVendorName() << " , " << device->getProductName() << endl;
      modes = grabber.getAvailableImageModes();
      for (std::vector<std::pair<int, XnMapOutputMode > >::const_iterator it = modes.begin(); it != modes.end(); ++it)
      {
    cout << it->first << " = " << it->second.nXRes << " x " << it->second.nYRes << " @ " << it->second.nFPS << endl;
      }
    }
  }
  else
  {
    openni_wrapper::OpenNIDriver& driver = openni_wrapper::OpenNIDriver::getInstance();
    if (driver.getNumberDevices() > 0)
    {
      for (unsigned deviceIdx = 0; deviceIdx < driver.getNumberDevices(); ++deviceIdx)
      {
    cout << "Device: " << deviceIdx + 1 << ", vendor: " << driver.getVendorName(deviceIdx) << ", product: " << driver.getProductName(deviceIdx)
      << ", connected: " << driver.getBus(deviceIdx) << " @ " << driver.getAddress(deviceIdx) << ", serial number: \'" << driver.getSerialNumber(deviceIdx) << "\'" << endl;
      }

    }
    else
      cout << "No devices connected." << endl;

    cout <<"Virtual Devices available: ONI player" << endl;
  }
  return 0;
}
  }
  else
  {
openni_wrapper::OpenNIDriver& driver = openni_wrapper::OpenNIDriver::getInstance();
if (driver.getNumberDevices() > 0)
  cout << "Device Id not set, using first device." << endl;
  }

  unsigned mode;
  if (pcl::console::parse(argc, argv, "-depthmode", mode) != -1)
depth_mode = pcl::OpenNIGrabber::Mode (mode);

  if (pcl::console::parse(argc, argv, "-imagemode", mode) != -1)
image_mode = pcl::OpenNIGrabber::Mode (mode);

  if (pcl::console::find_argument (argc, argv, "-xyz") != -1)
xyz = true;

  pcl::OpenNIGrabber grabber (device_id, depth_mode, image_mode);

  if (xyz || !grabber.providesCallback<pcl::OpenNIGrabber::sig_cb_openni_point_cloud_rgb> ())
  {
OpenNIViewer<pcl::PointXYZ> openni_viewer (grabber, argc, argv);
openni_viewer.run ();
  }
  else
  {
OpenNIViewer<pcl::PointXYZRGBA> openni_viewer (grabber, argc, argv);
openni_viewer.run ();
  }

  return (0);
} 
```

# android - How to change position of a button in titanium

> ID：16059184
> 
> 赞同：0
> 
> 时间：2013-04-17T11:48:06.090
> 
> 标签：android, iphone, titanium-mobile

i tried hard to figure this out but no success. Simple thing i want to do is to change the position of a button. I found `rect` property but it takes `Dimension`object as value.Sorry, but i'm not able to create object for `Dimension`. i try this way

```
var dim = new Dimension(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:29:32.970

这不是一个真正的`Dimension`对象。对于 iOS，您可以将其称为字典。

要更改 Titanium 中元素的位置，您应该使用

```
Ti.UI.createButton({
  left: <left>,
  right: <right>,
  top: <top>,
  bottom: <bottom>,
  width: <width>,
  height: <height>,
}); 
```

当然，您不需要设置所有值，而只需设置您需要的所有值。

`size`and`rect`属性也仅用于读取目的，而不用于写入或更改。

[这](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.View)和[这](http://docs.appcelerator.com/titanium/latest/#!/guide/Layouts,_Positioning,_and_the_View_Hierarchy)提供了有用的说明

# javascript - jQuery UI Datepicker - Disable current date but NOT the highlight

> ID：16059192
> 
> 赞同：6
> 
> 时间：2013-04-17T11:48:21.580
> 
> 标签：javascript, jquery, user-interface, datepicker

I have the following code which disables the current date by setting minDate to current date + 1:

```
 var today = new Date();
    var tomorrow = new Date();
    tomorrow.setDate(today.getDate() + 1);

        $("#minDate").datepicker({
            showOn: "none",
            minDate: tomorrow,
            dateFormat: "DD dd-mm-yy",
            onSelect: function(dateText) {
                minDateChange;
            },
            inputOffsetX: 5,
        }); 
```

![Datepicker that has the current date disabled](https://i.stack.imgur.com/Q1KUp.jpg)

The problem is that I want to disable the current date, but still keep it highlighted (Blue border around the date) in the calendar.

Is there a native way to do this using the datepicker or do I have to create a highlight script myself?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:58:30.013

datepicker 在今天有一个名为“ui-datepicker-today”的类，所以我只是添加了一个类：

```
$(".ui-datepicker-today span").addClass("ui-state-hover") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T16:34:18.627

您不需要将今天和明天设置为变量。刚刚设置`minDate: 1`

# c# - Add service reference generated my client incompelety

> ID：16059193
> 
> 赞同：0
> 
> 时间：2013-04-17T11:48:23.193
> 
> 标签：c#, wcf

Something has gone wrong when I "Add Service Reference" to target my wcf.

I target my wcf and clicked OK. You get after OK normally a nice generated files like Reference.cs (client). I see know that Reference.cs is incompeletely generated. See below:

```
namespace WindowsPhoneApp.ServiceReference1 {
    using System.Runtime.Serialization;

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="AlgemeenKlassementJSON", Namespace="http://schemas.datacontract.org/2004/07/WcfOpzet.jsonModels")]
    public partial class AlgemeenKlassementJSON : object, System.ComponentModel.INotifyPropertyChanged {

        private long idField;

        private long puntenField;

        private string rennersField;

        private long rondesField;

        private long teamnrField;

        [System.Runtime.Serialization.DataMemberAttribute()]
        public long id {
            get {
                return this.idField;
            }
            set {
                if ((this.idField.Equals(value) != true)) {
                    this.idField = value;
                    this.RaisePropertyChanged("id");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public long punten {
            get {
                return this.puntenField;
            }
            set {
                if ((this.puntenField.Equals(value) != true)) {
                    this.puntenField = value;
                    this.RaisePropertyChanged("punten");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public string renners {
            get {
                return this.rennersField;
            }
            set {
                if ((object.ReferenceEquals(this.rennersField, value) != true)) {
                    this.rennersField = value;
                    this.RaisePropertyChanged("renners");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public long rondes {
            get {
                return this.rondesField;
            }
            set {
                if ((this.rondesField.Equals(value) != true)) {
                    this.rondesField = value;
                    this.RaisePropertyChanged("rondes");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public long teamnr {
            get {
                return this.teamnrField;
            }
            set {
                if ((this.teamnrField.Equals(value) != true)) {
                    this.teamnrField = value;
                    this.RaisePropertyChanged("teamnr");
                }
            }
        }

        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName) {
            System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
            if ((propertyChanged != null)) {
                propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
            }
        }
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.Runtime.Serialization.DataContractAttribute(Name="TeamsJSON", Namespace="http://schemas.datacontract.org/2004/07/WcfOpzet.jsonModels")]
    public partial class TeamsJSON : object, System.ComponentModel.INotifyPropertyChanged {

        private WindowsPhoneApp.ServiceReference1.Image fotorennerAField;

        private byte[] fotorennerBField;

        private long idField;

        private byte[] landrennerAField;

        private byte[] landrennerBField;

        private string rennerAField;

        private string rennerBField;

        private string teamNaamField;

        private byte[] teamShirtField;

        [System.Runtime.Serialization.DataMemberAttribute()]
        public WindowsPhoneApp.ServiceReference1.Image fotorennerA {
            get {
                return this.fotorennerAField;
            }
            set {
                if ((object.ReferenceEquals(this.fotorennerAField, value) != true)) {
                    this.fotorennerAField = value;
                    this.RaisePropertyChanged("fotorennerA");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public byte[] fotorennerB {
            get {
                return this.fotorennerBField;
            }
            set {
                if ((object.ReferenceEquals(this.fotorennerBField, value) != true)) {
                    this.fotorennerBField = value;
                    this.RaisePropertyChanged("fotorennerB");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public long id {
            get {
                return this.idField;
            }
            set {
                if ((this.idField.Equals(value) != true)) {
                    this.idField = value;
                    this.RaisePropertyChanged("id");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public byte[] landrennerA {
            get {
                return this.landrennerAField;
            }
            set {
                if ((object.ReferenceEquals(this.landrennerAField, value) != true)) {
                    this.landrennerAField = value;
                    this.RaisePropertyChanged("landrennerA");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public byte[] landrennerB {
            get {
                return this.landrennerBField;
            }
            set {
                if ((object.ReferenceEquals(this.landrennerBField, value) != true)) {
                    this.landrennerBField = value;
                    this.RaisePropertyChanged("landrennerB");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public string rennerA {
            get {
                return this.rennerAField;
            }
            set {
                if ((object.ReferenceEquals(this.rennerAField, value) != true)) {
                    this.rennerAField = value;
                    this.RaisePropertyChanged("rennerA");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public string rennerB {
            get {
                return this.rennerBField;
            }
            set {
                if ((object.ReferenceEquals(this.rennerBField, value) != true)) {
                    this.rennerBField = value;
                    this.RaisePropertyChanged("rennerB");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public string teamNaam {
            get {
                return this.teamNaamField;
            }
            set {
                if ((object.ReferenceEquals(this.teamNaamField, value) != true)) {
                    this.teamNaamField = value;
                    this.RaisePropertyChanged("teamNaam");
                }
            }
        }

        [System.Runtime.Serialization.DataMemberAttribute()]
        public byte[] teamShirt {
            get {
                return this.teamShirtField;
            }
            set {
                if ((object.ReferenceEquals(this.teamShirtField, value) != true)) {
                    this.teamShirtField = value;
                    this.RaisePropertyChanged("teamShirt");
                }
            }
        }

        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName) {
            System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
            if ((propertyChanged != null)) {
                propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
            }
        }
    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    public class Image {

**Incomplete!**
    }
**Incomplete! I miss my operations of my wcf**
} 
```

Here an image where my problem is started. (Need at least 10 rept points, no images :D)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T08:17:29.307

不要使用 datacontractserializer 无法处理的非可序列化类型，例如 System.drawing。

# java - Increase transfer speed of TCP socket in java /android

> ID：16059196
> 
> 赞同：2
> 
> 时间：2013-04-17T11:48:36.520
> 
> 标签：java, android, sockets, tcp, wifi-direct

I am developing wifi direct based file transfer application. I can see that the transfer speed using TCP socket is not satisfactory. The speed is normally 1Mbps. Whenever I analyze the data transfer graph, I can see a lot of spikes and many seconds are with no data transfer at all. I know the transfer speed should be much higher (may be 20-30Mbps) Please help me in increasing the transfer speed. The serversocket that accepts the connection is

```
private void serverTask() {
        Log.v(TAG, "server task");
        try {
            serverRunning = true;
            ServerSocket serverSocket = new ServerSocket(
                    DeviceDetailFragment.PORT);
            serverSocket.setReceiveBufferSize(TCP_BUFFER_SIZE);

            Socket client = serverSocket.accept();

            BufferedInputStream inputstream = new BufferedInputStream(
                    client.getInputStream());
            // new BufferedInputStream(client.getInputStream(), 8 * 1024);
            BufferedReader bufferedStream = new BufferedReader(
                    new InputStreamReader(inputstream));

                fileName = bufferedStream.readLine();
                fileSizeInBytes = bufferedStream.readLine();
                fileMime = bufferedStream.readLine();

                f = new File(Globals.fileSavingLocation + fileName);

                File dirs = new File(f.getParent());
                if (!dirs.exists())
                    dirs.mkdirs();

                if (f.exists()) {
                    f.delete();
                }

                f.createNewFile();

        IOUtils.copy(inputstream, new FileOutputStream(f));

                serverSocket.close();
            }
            isSuccessful = true;

        } catch (IOException e) {
            isSuccessful = false;
            Log.e(TAG, e.getMessage());

        }
        serverRunning = false;

    } 
```

And the client that sends the data has following code:

```
 private void clientTask(Intent intent) {
            String fileUri = intent.getExtras().getString(EXTRAS_FILE_PATH);
            String host = intent.getExtras().getString(EXTRAS_ADDRESS);
            String fileName = intent.getExtras().getString(FILE_NAME);
            String fileMimeType = intent.getExtras().getString(FILE_MIME_TYPE);
            final long sizeInBytes = intent.getExtras().getLong(FILE_SIZE);
            Socket socket = new Socket();
            int port = intent.getExtras().getInt(EXTRAS_PORT);

            try {
                socket.setSendBufferSize(TCP_BUFFER_SIZE);
                socket.bind(null);
                socket.connect((new InetSocketAddress(host, port)),
                        SOCKET_TIMEOUT);

                BufferedOutputStream stream = new BufferedOutputStream(
                        socket.getOutputStream());
                ContentResolver cr = FileTransferService.this
                        .getApplicationContext().getContentResolver();
                InputStream is = null;

                BufferedWriter bufferStream = new BufferedWriter(
                        new OutputStreamWriter(stream));

                bufferStream.write(fileName);
                bufferStream.newLine();
                bufferStream.flush();
                bufferStream.write(String.valueOf(sizeInBytes));
                bufferStream.newLine();
                bufferStream.flush();

                bufferStream.write(fileMimeType);
                bufferStream.newLine();
                bufferStream.flush();

                try {

                    is = new BufferedInputStream(cr.openInputStream(Uri
                            .parse(fileUri)));

                } catch (FileNotFoundException e) {

                    isSuccessful = false;

                }
 IOUtils.copy(is, stream);

                isSuccessful = true;

            } catch (IOException e) {
                Log.e(TAG, e.getMessage());
                isSuccessful = false;
            } finally {
                if (socket != null) {
                    if (socket.isConnected()) {
                        try {
                            socket.close();
                        } catch (IOException e) {
                            // Give up
                            e.printStackTrace();
                        }
                    }
                }
            } 
```

The value of `TCP_BUFFER_SIZE` is set to `1024*512`.

I have tried a lot altering the value of TCP_BUFFER_SIZE but with no luck. I replaced my implementation of copying stream by Apache Commons IOUtils. Help me out

Update: Please see the following transfer graph ![Graph of transfer speed](https://i.stack.imgur.com/WjEhU.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:58:48.663

看来您正在重载缓冲区，来自[setReceiveBufferSize() javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/ServerSocket.html#setReceiveBufferSize%28int%29)

> 随后可以通过调用 Socket.setReceiveBufferSize(int) 更改该值。但是，如果应用程序希望允许大于 64K 字节的接收窗口（如 RFC1323 所定义），则必须在 ServerSocket 中设置建议的值，然后才能将其绑定到本地地址。这意味着，必须使用无参数构造函数创建 ServerSocket，然后必须调用 setReceiveBufferSize()，最后通过调用 bind() 将 ServerSocket 绑定到地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:53:10.570

我会尝试使用普通套接字而不使用文件进行简单的数据传输。

有一个简单的服务器，它在连接时发送 100 MB 的空数据。让客户端尽可能快地读取该数据，并报告它获得的吞吐量。在同一台机器上，您应该很容易看到超过 100 MB/s 的速度。一旦这给出了一个好的数字，请在 android 客户端上尝试。

# r - 连接两个结构不同但内容相同的 data.tables/data.frames

> ID：16059197
> 
> 赞同：1
> 
> 时间：2013-04-17T11:48:37.613
> 
> 标签：r, dataframe, data.table

我有一个`data.table`由不同操作创建的两个 s，但值是相同的。但是，正如输出所示，它们具有不同的结构：

```
> str(resultstabledata)
Classes ‘data.table’ and 'data.frame':  234 obs. of  7 variables:
 $ pT      : Factor w/ 4 levels "Insignificant",..: 4 4 4 4 4 4 1 1 3 3 ...
 $ shape   : Factor w/ 2 levels "Base","Comparison": 1 1 1 1 1 1 1 1 1 1 ...
 $ resid   : chr  "minzer" "minzer" "minzer" "minzer" ...
 $ asset   : Factor w/ 3 levels "crude","gold",..: 1 1 2 2 3 3 3 3 3 3 ...
 $ base    : Factor w/ 3 levels "mlp","elman",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ compared: Factor w/ 2 levels "arfima.roll",..: 1 2 1 2 1 2 1 2 1 2 ...
 $ N       : int  409 317 194 353 206 178 317 333 47 46 ...
 - attr(*, ".internal.selfref")=<externalptr> 
> str(a)
'data.frame':   7 obs. of  7 variables:
 $ pT      : Factor w/ 4 levels "Insignificant",..: 1 2 2 3 3 4 4
 $ shape   : Factor w/ 1 level "Comparison": 1 1 1 1 1 1 1
 $ resid   : Factor w/ 2 levels "minzer","diff": 1 1 2 1 2 1 2
 $ asset   : Factor w/ 1 level "crude": 1 1 1 1 1 1 1
 $ base    : Factor w/ 1 level "mlp": 1 1 1 1 1 1 1
 $ compared: Factor w/ 1 level "lame": 1 1 1 1 1 1 1
 $ N       : num  0 0 0 0 0 0 0 
```

有没有一种简单的方法可以`rbind`对它们进行处理而不是重新调整因素，因为级别“标题”是通过构建对的？

澄清我在问什么：我期待这样的行为。我有两个 data.tables/frames`a`和`b`. 两者都有变量`x`，`factor`但在`a`1->“bla”、2->“ble”和`b`1->“ble”、2->“bla”中。让我们假设结构`a$x`is`bla bla ble ble`和`b$x`is `ble ble bla bla`。通过做`merged <- rbind(a,b)`我想得到`merged$x`的是`bla bla ble ble ble ble bla bla`，但我正在经历`merged$x`的是`bla bla ble ble bla bla ble ble`。

感谢您的建议。

# android - 如何在可扩展列表视图中获取子级和父级的 ID？

> ID：16059198
> 
> 赞同：2
> 
> 时间：2013-04-17T11:48:37.853
> 
> 标签：android, expandablelistview, expandable

对于`Expandable`列表视图。我写了以下代码：

```
public class MainActivity extends Activity {
  ExpandableListView explvlist;
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    explvlist = (ExpandableListView) findViewById(R.id.expandableListView1);
    explvlist.setAdapter(new ParentLevel());
  }

  public class ParentLevel extends BaseExpandableListAdapter {
    @Override
    public Object getChild(int arg0, int arg1) {
      return arg1;
    }
    @Override
    public long getChildId(int groupPosition, int childPosition) {
      return childPosition;
    }
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
      CustExpListview SecondLevelexplv = new CustExpListview(MainActivity.this);
      SecondLevelexplv.setAdapter(new SecondLevelAdapter());
      SecondLevelexplv.setGroupIndicator(null);
      return SecondLevelexplv;
    }
    @Override
    public int getChildrenCount(int groupPosition) {
      return 3;
    }
    @Override
    public Object getGroup(int groupPosition) {
      return groupPosition;
    }
    @Override
    public int getGroupCount() {
      return 8;
    }
    @Override
    public long getGroupId(int groupPosition) {
      return groupPosition;
    }
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
      TextView tv = new TextView(MainActivity.this);
      tv.setText("->FirstLevel");
      tv.setTextColor(Color.BLACK);
      tv.setTextSize(20);
      tv.setBackgroundColor(Color.BLUE);
      tv.setPadding(10, 7, 7, 7);
      return tv;
    }
    @Override
    public boolean hasStableIds() {
      return true;
    }
    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return true;
    }
  }

  public class CustExpListview extends ExpandableListView {
    int intGroupPosition, intChildPosition, intGroupid;
    public CustExpListview(Context context) {
      super(context);
    }
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
      widthMeasureSpec = MeasureSpec.makeMeasureSpec(960, MeasureSpec.AT_MOST);
      heightMeasureSpec = MeasureSpec.makeMeasureSpec(600, MeasureSpec.AT_MOST);
      super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
  }
  public class CustExpListview2 extends ExpandableListView {
    int intGroupPosition2, intChildPosition2, intGroupid2;
    public CustExpListview2(Context context) {
      super(context);
    }
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
      widthMeasureSpec = MeasureSpec.makeMeasureSpec(2000, MeasureSpec.AT_MOST);
      heightMeasureSpec = MeasureSpec.makeMeasureSpec(1000, MeasureSpec.AT_MOST);
      super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
  }
  public class CustExpListview3 extends ExpandableListView {
    int intGroupPosition2, intChildPosition2, intGroupid2;
    public CustExpListview3(Context context) {
      super(context);
    }
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
      widthMeasureSpec = MeasureSpec.makeMeasureSpec(2000, MeasureSpec.AT_MOST);
      heightMeasureSpec = MeasureSpec.makeMeasureSpec(1000, MeasureSpec.AT_MOST);
      super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }
  }

  public class SecondLevelAdapter extends BaseExpandableListAdapter {
    @Override
    public Object getChild(int groupPosition, int childPosition) {
      return childPosition;
    }
    @Override
    public long getChildId(int groupPosition, int childPosition) {
      return childPosition;
    }
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
      CustExpListview2 SecondLevelexplv2 = new CustExpListview2(MainActivity.this);
      SecondLevelexplv2.setAdapter(new ThreeLevelAdapter());
      SecondLevelexplv2.setGroupIndicator(null);
      return SecondLevelexplv2;
    }
    @Override
    public int getChildrenCount(int groupPosition) {
      return 5;
    }
    @Override
    public Object getGroup(int groupPosition) {
      return groupPosition;
    }
    Override
    public int getGroupCount() {
      return 1;
    }
    @Override
    public long getGroupId(int groupPosition) {
      return groupPosition;
    }
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
      TextView tv = new TextView(MainActivity.this);
      tv.setText("-->Second Level");
      tv.setTextColor(Color.BLACK);
      tv.setTextSize(20);
      tv.setPadding(12, 7, 7, 7);
      tv.setBackgroundColor(Color.RED);
      return tv;
    }
    @Override
    public boolean hasStableIds() {
      return true;
    }
    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return true;
    }
  }

  public class ThreeLevelAdapter extends BaseExpandableListAdapter {
    @Override
    public Object getChild(int arg0, int arg1) {
      return arg1;
    }
    @Override
    public long getChildId(int groupPosition, int childPosition) {
      return childPosition;
    }
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
      CustExpListview3 SecondLevelexplv3 = new CustExpListview3(MainActivity.this);
      SecondLevelexplv3.setAdapter(new FourLevelAdapter());
      SecondLevelexplv3.setGroupIndicator(null);
      return SecondLevelexplv3;
    }
    @Override
    public int getChildrenCount(int groupPosition) {
      return 3;
    }
    @Override
    public Object getGroup(int groupPosition) {
      return groupPosition;
    }
    @Override
    public int getGroupCount() {
      return 1;
    }
    @Override
    public long getGroupId(int groupPosition) {
      return groupPosition;
    }
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
      TextView tv = new TextView(MainActivity.this);
      tv.setText("Level --Three");
      tv.setTextColor(Color.BLACK);
      tv.setTextSize(20);
      tv.setPadding(15, 5, 5, 5);
      tv.setBackgroundColor(Color.YELLOW);
      return tv;
    }
    @Override
    public boolean hasStableIds() {
      return true;
    }
    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return true;
    }
  }

  public class FourLevelAdapter extends BaseExpandableListAdapter {
    @Override
    public Object getChild(int arg0, int arg1) {
      return arg1;
    }
    @Override
    public long getChildId(int groupPosition, int childPosition) {
      return childPosition;
    }
    @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
      TextView tv = new TextView(MainActivity.this);
      tv.setText("->five level");
      tv.setTextColor(Color.BLACK);
      tv.setTextSize(20);
      tv.setBackgroundColor(Color.MAGENTA);
      tv.setPadding(24, 5, 5, 5);
      return tv;
    }
    @Override
    public int getChildrenCount(int groupPosition) {
      return 3;
    }
    @Override
    public Object getGroup(int groupPosition) {
      return groupPosition;
    }
    @Override
    public int getGroupCount() {
      return 1;
    }
    @Override
    public long getGroupId(int groupPosition) {
      return groupPosition;
    }
    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
      TextView tv = new TextView(MainActivity.this);
      tv.setText("->four level");
      tv.setTextColor(Color.BLACK);
      tv.setTextSize(20);
      tv.setBackgroundColor(Color.CYAN);
      tv.setPadding(21, 5, 5, 5);
      return tv;
    }
    @Override
    public boolean hasStableIds() {
      return true;
    }
    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return true;
    }
  }
} 
```

要获取 onCreate 的 ID，我使用了以下代码：

```
explvlist.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> parent, View v, int groupPosition, long id) {
    // TODO Auto-generated method stub
    int itemType = ExpandableListView.getPackedPositionType(groupPosition);
    Log.i("item type", "" + itemType);
    if (itemType == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
      childPosition = ExpandableListView.getPackedPositionChild(id);
      groupPosition = ExpandableListView.getPackedPositionGroup(id);
      Log.i("child", "" + childPosition);
      Log.i("child Group", "" + groupPosition);
    } else if (itemType == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
      groupPosition = ExpandableListView.getPackedPositionGroup(id);
      Log.i("Group", "" + groupPosition);
    }
  }
}); 
```

以及以下代码：

```
explvlist.setOnChildClickListener(new OnChildClickListener() {
  @Override
  public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
    Toast.makeText(getBaseContext(), "Child clicked", Toast.LENGTH_SHORT).show();
    System.out.println(getBaseContext() + "Child clicked");
    return true;
  }
}); 
```

但它没有帮助任何输出不显示任何东西！请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:56:19.013

尝试这个

为了获得组点击

```
 expandableListView.setOnGroupClickListener(new OnGroupClickListener() {
      public boolean onGroupClick(ExpandableListView arg0,View arg1, int groupPosition, long arg3) {

       return false;
       }
    ); 
```

为了让孩子点击

```
 expandableListView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
     public boolean onChildClick(ExpandableListView parent,View v, int groupPosition, int childPosition,
                                long id) {
      return false;
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T06:05:56.037

```
expandableList.setOnGroupClickListener(new OnGroupClickListener()
        {
              public boolean onGroupClick(ExpandableListView arg0, View arg1, int groupPosition, long arg3) 
              {
                  Toast.makeText(getBaseContext(), "" + groupPosition, 1000).show();
                  return false;
               }
        }); 
```

# c - 加载时初始化 vs 运行时 vs 编译时初始化

> ID：16059201
> 
> 赞同：0
> 
> 时间：2013-04-17T11:48:54.573
> 
> 标签：c, compiler-errors, initialization, runtime, load-time

在下面的示例中，我在编译时遇到错误

```
int main() {

    int x = 10; // guess this is runtime initialisation
    static int y = x; //guess this is loadtime initialisation

    printf("x = %d, y = %d", x, y);

} 
```

错误：

```
 error: initializer element is not constant 
```

我的理解是，这与针对自动变量初始化静态和全局成员的方式有关。我想知道加载时间、运行时和编译时初始化之间的区别我还想知道存储在数据部分和堆栈中的元素值及其对初始化的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:56:29.697

我想说在 C 中编译时和加载时没有区别。C++ 的情况并非如此：POD 常量在编译时初始化，而具有构造函数的全局/静态对象在加载时初始化。

在您的示例中，您尝试使用运行时变量的内容初始化编译时值，因此它失败了。在 C++ 中，如果`x`被声明`const`，它将被识别为编译时常量并成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:57:01.410

静态变量在自动变量之前出现，或者说局部变量，所以你不能使用任何变量来初始化静态变量你只能使用常量来初始化静态变量。

加载时初始化和编译时初始化在 C 中是相同的，运行时初始化在 C 中可能不受支持 ..它在 C++ 中受支持，但我不了解 C

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:22:08.017

常量在编译时初始化，而全局/静态变量在加载时初始化，因此如果我们可以将 x 转换为 const(c++)，则不能使用运行时堆栈变量在加载时初始化全局/静态变量，它会运行正常。

# android - Fragment with four images layout

> ID：16059202
> 
> 赞同：0
> 
> 时间：2013-04-17T11:48:58.777
> 
> 标签：android, android-fragments, android-xml

I can't figure out how my layout should look like. I have a fragment. Inside it, I have scrollView (as I wish to support both orrientations), inside ScrollView I would like to have four images evenly distributed ( like this [http://numberexplosion.com/wp/wp-content/uploads/2012/04/square-4.gif](http://numberexplosion.com/wp/wp-content/uploads/2012/04/square-4.gif) ). But I just can't figure out a way to do it, I have tried relative, linear, tablelayouts, but can't get such view :/.

My current layout:

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:gravity="center_vertical|center_horizontal" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="150dp"
                    android:layout_height="150dp" />

                <ImageView
                    android:id="@+id/ImageVieww2"
                    android:layout_width="150dp"
                    android:layout_height="150dp" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" >

                <ImageView
                    android:id="@+id/ImageVieww3"
                    android:layout_width="150dp"
                    android:layout_height="150dp" />

                <ImageView
                    android:id="@+id/ImageVieww4"
                    android:layout_width="150dp"
                    android:layout_height="150dp" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
            </TableRow>

        </TableLayout>

    </ScrollView> 
```

This layout looks nearly as I wish it to be, but the image size is only 150dp, and not filling the whole screen in some cases. My imageView sources are different, but I would like to imageViews to fill my fragment. Any ideas what I'm doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:17:03.480

你可以做这样的事情。我知道它的布局很重，但它会解决你的问题。我只使用了两个`horizontal Linear layouts`，我在每个中`Vertical Linear Layout.` 放置了 2 个按钮。`horizontal linear layout``weight 1`

![垂直布局](https://i.stack.imgur.com/iQZP0.png) ![横向布局](https://i.stack.imgur.com/f7GZK.png)

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/ImageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:scaleType="fitXY"
            android:src="@drawable/no_image" />

        <ImageView
            android:id="@+id/ImageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:scaleType="fitXY"
            android:src="@drawable/no_image" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/ImageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:scaleType="fitXY"
            android:src="@drawable/no_image" />

        <ImageView
            android:id="@+id/ImageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_margin="5dp"
            android:layout_weight="1"
            android:scaleType="fitXY"
            android:src="@drawable/no_image" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:05:33.210

一个相当好的解决方案是使用`LinearLayout`包含 2`LinearLayouts`每个包含 2 `Views`。诀窍是在儿童（2和 4 ）上使用`layout_width`/ `layout_height`of`0dp`和。`layout_weight``LinearLayouts``Views`

您可能还想尝试`GridLayout`(not `GridView`)，它可从 Android 4.0 ( [http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html) ) 和 support-library-v7 中的 2.1 获得。

# c# - 将base64转换为图像并在gridview中显示

> ID：16059206
> 
> 赞同：1
> 
> 时间：2013-04-17T11:49:24.173
> 
> 标签：c#, asp.net

我正在开发一个从 Web 服务获取数据的网站。我们的 Android 开发人员给了我一个这样的 Base64 字符串。

> iVBORw0KGgoAAAANSUhEUgAAAKAAAAB4CAYAAAB1ovlvAAAABHNCSVQICAgIf。. . . . . . . . .

我正在将此字符串保存到我的数据库中。我想知道如何将其转换为图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:52:02.150

这里是你的解决方案

```
public Image Base64ToImage(string base64String)
{
  // Convert Base64 String to byte[]
  byte[] imageBytes = Convert.FromBase64String(base64String);
  MemoryStream ms = new MemoryStream(imageBytes, 0,imageBytes.Length);

  // Convert byte[] to Image
  ms.Write(imageBytes, 0, imageBytes.Length);
  Image image = Image.FromStream(ms, true);
  return image;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:03:14.373

如果您在网页中显示它（您将 asp.net 添加为标签之一，所以我假设这是针对网络的），您可以作弊并执行以下操作：

```
<img src="data:image/png;base64,<%=base64String%>"/> 
```

这假设图像是 png，否则将其更改为 image/jpg 或其他。

缺点是这会阻止图像被缓存。所以在实践中@Sachin 的解决方案更实用。如果您想避免出于任何原因保存文件（或者只是想要一个“我现在需要它来工作”的解决方案），这种方式就很简洁了

# excel - Excel：如何将自定义网格线添加到图表中？

> ID：16059216
> 
> 赞同：2
> 
> 时间：2013-04-17T11:49:43.350
> 
> 标签：excel, vba, charts, gridlines

如何添加具有标签的自定义水平线，并且它与图表中的第一列处于完全相同的级别（请参见下面的屏幕截图）。

这可以在VBA中完成吗？

![在此处输入图像描述](https://i.stack.imgur.com/woCzn.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:11:44.640

这可以在 VBA 中完成，也可以在没有 VBA 的情况下完成：

[http://peltiertech.com/Excel/Charts/AddLineHorzSeries.html](http://peltiertech.com/Excel/Charts/AddLineHorzSeries.html)

此方法涉及创建第二个 Y 轴，并在第二个轴上的“线”中绘制另一系列数据。

这是一个相当干净的解决方案。

否则，使用 VBA，您需要向图表添加形状/线条（将其添加到 chartObject 而不是 Worksheet 很重要）。

然后计算点的高度并使线的`.Left`= 图表的`.PlotArea.Left`和使线的`.Width`= 到图表的`.PlotArea.Width`. 然后`.Top`根据图表`.PlotArea.Height`减去您为该点计算的“高度”设置线的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:30:23.550

使用 vba，您可以添加一个新系列：

```
With ActiveChart.SeriesCollection.NewSeries
    .Values = "={6.9,6.9,6.9,6.9}" 
    'create string beforehand if number and values are unknown
    .ChartType = xlLine
    'and whatever other formatting is needed
End With 
```

不使用 VBA，您可以在数据中添加一个新列，并将其全部等于第一项，`=$B$2`在每个单元格中使用将线添加到图表中

# powershell - 将 -like '*uu-lillebaelt.dk*' 更改为 -like '*uuoresund.dk*' 会带来麻烦

> ID：16059217
> 
> 赞同：0
> 
> 时间：2013-04-17T11:49:45.007
> 
> 标签：powershell, sql-like, exchange-server-2010

我有两个几乎相同的 Powershell 脚本。

[http://poshcode.org/4112](http://poshcode.org/4112)

[http://poshcode.org/4113](http://poshcode.org/4113)

两者之间的唯一区别是 uu-lillebaelt 已更改为 uuoresund 的 2 个地方。当我使用 -like ' *uuoresund* ' 运行脚本时，我收到一堆错误消息：您不能在空值表达式上调用方法这在调用时发生：

$size.IndexOf

$size.子串

我已经确定，该大小实际上不是空的，所以这不是问题。我觉得这一定是关于我不理解的 -like 运算符的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:09:02.870

当您遇到这些错误时，$size 的类型是什么？打印所有邮箱及其大小，以便更好地查看这些对象。无论如何，如果我可以提出解决方案：

```
$totalSize = Get-Mailbox -Filter {WindowsEmailAddress -like "*$uucenter*"} | 
Get-MailboxStatistics | Foreach-Object {$_.TotalItemSize.Value} | 
Measure-Object -Sum | Foreach-Object {$_.Sum} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:34:32.553

我发现了问题。域上的 Get-Mailbox 还返回了一个 DiscoverySearchMailbox，它必须为空，或者至少返回不是格式的内容。所以为了解决这个问题，我只是添加了一个 -notlike 来摆脱它:)

好吧，发生了一件好事，否则我可能不会抓住它。

# android - Android AdMob SDK 奇怪行为

> ID：16059218
> 
> 赞同：4
> 
> 时间：2013-04-17T11:49:48.460
> 
> 标签：android, admob, banner

我正在使用最新的 android admob SDK 6.3.1，第一个广告已下载并显示在设备上。然后在刷新率时间到期后，在我的例子中为 30 秒，logcat 显示广告已下载并且新添加正确显示。然而，在一秒钟或更短的时间内，新广告消失，留下添加应该为空白的空间。

通过反复试验，我发现如果我触摸广告应该所在的空白区域，它会在浏览器中打开正确的第二个广告链接。所以添加似乎以某种方式隐藏。

此外，如果我触摸空白第二个广告的左下角，则第二个广告会正确显示。

我已经尝试过使用相对布局和线性布局以及在不同的设备上进行此操作，但发生了同样的事情。第一个广告正确显示，刷新间隔后，第二个和所有后续广告被下载并在空白之前短暂显示。

除了尝试不同的布局，我还尝试在 XML 中设置 adview 代码并在 java 源代码中以编程方式设置。

我短暂地看到第二个广告的事实证实一切都很好，admob 服务器端让我认为这是布局。但是我尝试了所有能想到的组合都没有成功。

我试过设置：android:layout_width="320dp" android:layout_height="50dp" 而不是 "wrap_content" 或 "fill_parent"。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent">
    <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="xxxxxxxxxxxxxxxx"
                     ads:adSize="BANNER"
                     ads:loadAdOnCreate="true"/>
    </LinearLayout> 
```

这就是我现在所拥有的，根据官方 admob 页面。

显现

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

这是我试图解决这个问题的第三天，有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T08:48:06.260

这个问题的最佳答案是：-

您可以设置一个动画来向下滑动横幅，当它离开视图时（设置一个 onAnimationComplete 侦听器）调用它的方法：

活动中的代码：- 对于可见：-

setVisibility(View.VISIBLE);

对于：不隐藏

setVisibility(View.INVISIBLE);

所以它不会再占用布局空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T06:58:09.367

你认为它可能是特定于设备的。或特定于 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T09:07:04.677

我很确定如果在多个活动 xml 中使用相同的 adview id 名称，就会发生这种情况。android:id="@+id/adMob1"

# java - 摄氏到华氏安卓

> ID：16059219
> 
> 赞同：-3
> 
> 时间：2013-04-17T11:49:49.227
> 
> 标签：java, android

```
public static int convertCelsiusToFahrenheit(Long celcious){
    return Math.round(celcious * 9/5 + 32);     
} 
```

我正在尝试将其设置为我的 TextField。我无法在 中设置值`Text Field`，因为我得到了 NumberFormatException。**我怎样才能用精度值发送它。**

```
holder.textItem.setText(convertCelsiusToFahrenheit(Long.parseLong(
              custom.getTemperature()))); 
```

> java.lang.NumberFormatException：无效的长：“32.2222222222222”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:53:30.410

将 a 转换`float`为`long`

你可以只使用铸件

```
(long) custom.getTemperature() 
```

但是，如果您只有一个表示浮点数的字符串，您可能需要更改您的转换函数，以接收浮点数。-

```
public static int convertCelsiusToFahrenheit(float celcious){
    return Math.round(celcious * 9.0f / 5.0f + 32);     
} 
```

并通过

```
Float.parseFloat(custom.getTemperature()) 
```

不要忘记除`9.0f / 5.0f`而不是`9 / 5`，因为最后一个是整数除法，并且总是返回 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:05:01.400

试试这个，

```
 holder.textItem.setText(" "+convertCelsiusToFahrenheit(Float.parseFloat(
                  custom.getTemperature()))); 
```

和

```
public static int convertCelsiusToFahrenheit(Float celcious){
            return Math.round(celcious * 9/5 + 32);     
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:26:57.497

除了有关解析`float`等的答案外，请注意`setText`已重载。当它需要一个 int 时，它是一个资源 Id，所以创建一个`string`并给它：

代替：

```
holder.textItem.setText(convertCelsiusToFahrenheit(...)); 
```

做：

```
holder.textItem.setText(String.format("%d", convertCelsiusToFahrenheit(...))); 
```

或者：

```
holder.textItem.setText(String.format("%d\x00B0 f", convertCelsiusToFahrenheit(...))); 
```

应该给你“10° f”（未经测试）

# c# - MySqlCommand.ExecuteNonQuery() not filling MySqlParameter(s)

> ID：16059222
> 
> 赞同：0
> 
> 时间：2013-04-17T11:49:55.437
> 
> 标签：c#, mysql

Background: I am rewriting my ASP.NET application - currently it uses MS SQL database but I need to support also MySQL (both in the same time!).

Most of work is done - I used **MySQL Connector/Net** for work with MySQL database from C# (Visual Studio 2010) - but I have troubles with certain SQL queries. This is SQL query I need to execute:

```
"SELECT @username=username FROM t_Users WHERE id=@id" 
```

Here is my code:

```
public static int ExecuteSqlNonQuery(string i_szQuery)
{
    bool bConnectionWasOpen = false;
    AbstractConnection dbConnection = CMSSQLInstanceCreator.CreateConnection();            

    if(dbConnection.IsMySQL())
    {
        MySqlConnection aSqlConnection = dbConnection.GetMysConnection();
        try
        {
            if (aSqlConnection.State == System.Data.ConnectionState.Closed)
                aSqlConnection.Open();
            else
                if (aSqlConnection.State == System.Data.ConnectionState.Open)
                    bConnectionWasOpen = true;
                else
                    throw new ApplicationException("Connection not available!");

            List<MySqlParameter> aParameters1 = new List<MySqlParameter>();
            aParameters1.Add(new MySqlParameter("@username", MySqlDbType.VarString, 128));
            aParameters1.Add(new MySqlParameter("@id", MySqlDbType.Int32));
            aParameters1[0].Direction = System.Data.ParameterDirection.Output;                
            aParameters1[1].Direction = System.Data.ParameterDirection.Input;
            aParameters1[1].Value = (int)1;

            MySqlCommand aSqlCommand = new MySqlCommand(i_szQuery, aSqlConnection);
            aSqlCommand.CommandType = System.Data.CommandType.Text;
            aSqlCommand.CommandTimeout = 0;
            aSqlCommand.Parameters.Clear();
            aSqlCommand.Parameters.AddRange(aParameters1.ToArray());

            int iResult = aSqlCommand.ExecuteNonQuery();
            if(iResult <= 0)
                Debug.WriteLine("aResult <= 0: " + i_szQuery);
            return iResult;
        }
        catch (Exception ex)
        {
            throw new ApplicationException("Cannot execute query!\nReason: '" + ex.Message + "'", ex);
        }
        finally
        {
            if (!bConnectionWasOpen && aSqlConnection.State == System.Data.ConnectionState.Open)
                aSqlConnection.Close();
        }
    }
    else
    {
      //... almost the same for MS SQL
    }
} 
```

The problem is that the Output parameter **@username** (System.Data.ParameterDirection.Output;) is not filled with the value from query.

If I use other query - e.g.

```
UPDATE t_Users SET password=@new_password WHERE (password=@old_password AND id=@user) 
```

Everything is fine.

I cannot return scalar as there are many other queries like

```
SELECT @username=username, @is_blocked=is_blocked, @full_name=full_name, @must_change_pwd=must_change_pwd ... 
```

returning many values and I do not want to rewrite most of code.

It looks like there is problem only in MySQL because the same code works with MS SQL fine.

What should I use to force MySqlParameter to load the value from query?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:21:04.067

您应该能够像这样读取输出的值

```
aSqlCommand.Parameters["@username"].Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T13:03:07.953

这显然是 MySql .Net 连接器中的一个错误，请参阅[#75267](http://bugs.mysql.com/bug.php?id=75267)。使用连接器 v6.9.7 和 MySql 服务器 5.5.45 对其进行了测试。它仍然被破坏，并且 2014 年 12 月的错误报告仍然开放。输出参数适用于命令类型为 StoredProcedure 的存储过程，不适用于将输出参数分配为选择的一部分的 SELECT 语句；命令类型文本。

# jquery - 电子邮件 JSON 验证后未提交表单

> ID：16059226
> 
> 赞同：1
> 
> 时间：2013-04-17T11:50:10.860
> 
> 标签：jquery, ajax, validation

我正在验证注册页面上的表单，一切正常，除了电子邮件验证有点命中注定。

如果我只是验证它以确保它是一个实际的电子邮件地址，它就可以正常工作，但是当我尝试添加一个检查以查看它是否也在使用中时，我遇到了问题。

验证本身工作正常，但表单一旦验证且未使用就不会提交。

这有效，并且表单提交：

```
if(filter.test(a)){
        email.removeClass("field_error");
        emailInfo.text("");
        emailInfo.removeClass("error");
        return true;
    } 
```

这有效，但表单不提交：

```
if(filter.test(a)){
        $.post('php/availability.php',{email: $('#email').val()}, function(emaildata){
            if(emaildata.exists){
                email.addClass("field_error");
                emailInfo.text("(Email address in use)");
                emailInfo.addClass("error");
            } else {
                email.removeClass("field_error");
                emailInfo.text("");
                emailInfo.removeClass("error");
                return true;
            }
        }, 'JSON');
    } 
```

我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:57:29.943

问题与 AJAX 调用（第一个“A”）的异步特性有关。

在您的第一个示例中，您陷入困境`if`并立即返回`true`，我假设这允许您提交表单。

但是，在您的第二个示例中，您陷入了困境，`if`但随后您异步调用了 Web 资源 ( `availability.php`)。您的代码进行 AJAX 调用（`$.post()`调用），然后立即到达`if`块的末尾。 `True`不会返回，因此您的表单不会被提交。

您需要做的是：

*   将您的`exists===false`逻辑移至单独的函数；
*   在您的`if`块中，如果电子邮件有效，则调用该函数；
*   您的函数找到表单（例如使用 jQuery），然后提交它

因此，您修改后的代码可能如下所示：

```
if(filter.test(a)){
        $.post('php/availability.php',{email: $('#email').val()}, function(emaildata){
            if(emaildata.exists){
                email.addClass("field_error");
                emailInfo.text("(Email address in use)");
                emailInfo.addClass("error");
            } else {
                submitForm(email, emailInfo);
            }
        }, 'JSON');
    } 
```

然后`submitForm()`做类似的事情：

```
function submitForm(email, emailInfo){
  email.removeClass("field_error");
  emailInfo.text("");
  emailInfo.removeClass("error");
  $('#theForm').submit();
} 
```

我想，那么，你应该看到你的表单提交。

希望这可以帮助！

# actionscript-3 - AS3 Cannot access a property or method of null object reference, issue with gotoAndPlay

> ID：16059227
> 
> 赞同：0
> 
> 时间：2013-04-17T11:50:20.690
> 
> 标签：actionscript-3

so I'm still fairly new to AS3 and I'm getting my head around the errors and stuff and I'm trying to figure out why this is not working how it should, the function still executes but it leaves an error on my console. Here is my code:

```
import flash.events.MouseEvent;
import flash.display.MovieClip;

stop();

var activeHitArray:Array = new Array(word_select_box);
var activeDropArray:Array = new Array(answer1_word, answer2_word, answer3_word);
var hitPositionsArray: Array = new Array();

for (var numi:int = 0; numi < activeDropArray.length; numi++) {
activeDropArray[numi].buttonMode = true;
activeDropArray[numi].addEventListener(MouseEvent.MOUSE_DOWN, mousedown1);
activeDropArray[numi].addEventListener(MouseEvent.MOUSE_UP, mouseup1);

     hitPositionsArray.push({xPos:activeDropArray[numi].x,        yPos:activeDropArray[numi].y});

}

function mousedown1(event:MouseEvent):void {
event.currentTarget.startDrag();
setChildIndex(MovieClip(event.currentTarget), numChildren - 1);
}

function mouseup1(event:MouseEvent):void {
var dropindex1:int = activeDropArray.indexOf(event.currentTarget);
var target:MovieClip = event.currentTarget as MovieClip;
target.stopDrag();

if(target.hitTestObject(activeDropArray[dropindex1])){
           // target.x = activeHitArray[dropindex1].x;
            //target.y = activeHitArray[dropindex1].y;

            if(answer1_word.hitTestObject(word_select_box)){
                   gotoAndStop("6");
            }

} else {
        target.x = hitPositionsArray[dropindex1].xPos;
        target.y = hitPositionsArray[dropindex1].yPos;
}

} 
```

And the **Error** I'm getting through is:

> ```
> TypeError: Error #1009: Cannot access a property or method of a null object reference.
>   at game_flv_fla::MainTimeline/frame6()
>   at flash.display::MovieClip/gotoAndStop()
>   at game_flv_fla::MainTimeline/mouseup1() 
> ```

The only thing I can think of is that it is something to do with the gotoAndPlay() because when I place a trace into it's place I get no errors.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:12:52.957

我复制了您的代码，在 Flash IDE 中编译并启动了它。有用！:) 没有错误。

但我知道问题可能出在哪里。addEventListeners 仍然打开，无论它们是否仍然存在链接到的对象。在进入下一帧之前，您需要清理所有活动的东西：

```
if(target.hitTestObject(activeDropArray[dropindex1])){
    if(answer1_word.hitTestObject(word_select_box)){
        for (var i:uint = 0; i < activeDropArray.length; i++) {
            activeDropArray[i].removeEventListener(MouseEvent.MOUSE_DOWN, mousedown1);
            activeDropArray[i].removeEventListener(MouseEvent.MOUSE_UP, mouseup1);
        }
        gotoAndStop("6");
    }
} 
```

# wordpress - Custom Taxonomy Links For Custom Post Types Not Working

> ID：16059228
> 
> 赞同：0
> 
> 时间：2013-04-17T11:50:24.347
> 
> 标签：wordpress, custom-taxonomy

I have set up a custom post type and a custom taxonomy. Then I am displaying the list of taxonomies as a set of links so that if someone clicks on that link, it should bring up all the posts under that taxonomy. Currently this is not working. It keeps taking me to the 404 page with the 'This is somewhat embarrassing isn't it?' message.

Code is as follows:

**FUNCTIONS.PHP**

```
add_action( 'init', 'build_taxonomies', 0 );

function build_taxonomies() {
    register_taxonomy( 'companies', 'companies', array( 'hierarchical' => true, 'label' => 'Company Categories', 'query_var' => true, 'rewrite' => true ) );
}

add_action('init', 'register_mypost_type');
function register_mypost_type() {
  register_post_type('companies',array(
    'labels' => array(
      'name' => 'Companies',
      'singular_name' => 'Company',
      'add_new' => 'Add New Company',
      'add_new_item' => 'Add New Company',
      'edit_item' => 'Edit Company',
      'new_item' => 'Add New Company',
      'view_item' => 'View Company',
      'search_items' => 'Search Companies',
      'not_found' => 'No companies found',
      'not_found_in_trash' => 'No companies found in trash'
    ),   
    'public' => true,
    'supports' => array( 'title', 'editor', 'thumbnail', 'excerpt'),
    'capability_type' => 'post',
    'rewrite' => array('slug' => 'companies'),
    'taxonomies' => array('category'),
    'menu_position' => 7,
    'has_archive' => true,
    'hierarchical' => false
  ));
 } 
```

Then on another page called 'page-company.php' I use the following code to output the list of taxonomies as links:

```
<?php
$args = array( 'taxonomy' => 'companies' );
wp_list_categories( $args );
?> 
```

When I hover over one of these links the URL is displayed as:

```
'http://localhost:81/?companies=graphic-design' 
```

Graphic Design being one of the categories I have added to my custom taxonomy.

However clicking this link always takes me to the 404 page.

I have set up an archives page called archive-companies.php and I thought all of this would do the trick.

Any help that anyone can provide would be greatly appreciated.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T15:01:17.050

OMG OMG OMG ... 在阅读了关于如何解决问题、使用重写规则和使用永久链接重写代码的帖子数天之后，您的解决方案是唯一一个完美运行的解决方案！我需要应用的唯一更改是在自定义分类声明中：

这段代码

```
 'rewrite' => array(
                'slug' => 'pubs/type',
                'with_front' => false
             ), 
```

对于此代码

```
 'rewrite' => true, 
```

就是这样。像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:02:21.230

### 笔记：

在我重写之前，我测试了你的代码，也得到了 404。

**1）**我重写了您的自定义帖子类型并**使用了您的自定义公司**类别。

**2）**然后我从默认循环到`/%postname%/`它工作。

`Functions.php`

### 在这里，您可以使用自定义帖子类型：

```
// Register Custom Post Type
function register_mypost_type() {
    $labels = array(
        'name'                => _x( 'Companies', 'Post Type General Name' ),
        'singular_name'       => _x( 'Company', 'Post Type Singular Name' ),
        'menu_name'           => __( 'Company' ),
        'parent_item_colon'   => __( 'Parent Company'),
        'all_items'           => __( 'All Companies'),
        'view_item'           => __( 'View Company'),
        'add_new_item'        => __( 'Add New Company'),
        'add_new'             => __( 'New Company'),
        'edit_item'           => __( 'Edit Company'),
        'update_item'         => __( 'Update Company' ),
        'search_items'        => __( 'Search companies' ),
        'not_found'           => __( 'No companies found' ),
        'not_found_in_trash'  => __( 'No companies found in Trash'),
    );

    $rewrite = array(
        'slug'                => 'company',
        'with_front'          => true,
        'pages'               => true,
        'feeds'               => true,
    );

    $args = array(
        'label'               => __( 'company'),
        'description'         => __( 'Companies Posts' ),
        'labels'              => $labels,
        'supports'            => array( 'title', 'editor', 'excerpt', 'thumbnail', 'revisions', ),
        'taxonomies'          => array( 'companies' ),
        'hierarchical'        => false,
        'public'              => true,
        'show_ui'             => true,
        'show_in_menu'        => true,
        'show_in_nav_menus'   => true,
        'show_in_admin_bar'   => true,
        'menu_position'       => 100,
        'menu_icon'           => '',
        'can_export'          => true,
        'has_archive'         => true,
        'exclude_from_search' => false,
        'publicly_queryable'  => true,
        'query_var'           => 'company',
        'rewrite'             => $rewrite,
        'capability_type'     => 'post',
    );

    register_post_type( 'company', $args );
}

add_action( 'init', 'register_mypost_type', 0 ); 
```

### 您的自定义类别

```
add_action( 'init', 'build_taxonomies', 0 );

function build_taxonomies() {
    register_taxonomy( 'companies', 'companies', array( 'hierarchical' => true, 'label' => 'Company Categories', 'query_var' => true, 'rewrite' => true ) );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T22:05:35.477

首先`taxonomy-companies.php`在主题的根目录中创建模板。该模板将负责显示您的分类术语帖子。

然后在该模板上，您需要使用`get_queried_object()`来获取所有分类详细信息。

例如;

```
$queries_obj = get_queried_object();
echo '<pre>';
print_r( $queries_obj );
echo '</pre>'; 
```

它会回来

```
WP_Term Object
(
    [term_id] => 10
    [name] => Featured companies
    [slug] => featured-companies
    [term_group] => 0
    [term_taxonomy_id] => 10
    [taxonomy] => companies-category
    [description] => 
    [parent] => 0
    [count] => 2
    [filter] => raw
) 
```

然后查询如下帖子。

```
$q = new WP_Query( array(
    'post_type' =>  'companies', // post type name
    'posts_per_page' =>  get_option( 'posts_per_page' ),
    'tax_query' =>  array(
        array(
            'taxonomy'  => $queries_obj->taxonomy,
            'field' => 'term_id',
            'terms' =>  array( $queries_obj->term_id )
        )
    )
) );
if ( $q->have_posts() ) :
    while ( $q->have_posts() ) :
        $q->the_post();

        // loop do stuf
        the_title();

    endwhile;

    wp_reset_query();

endif; 
```

# ruby-on-rails - 确定字符串实际长度而不仅仅是字符数

> ID：16059230
> 
> 赞同：0
> 
> 时间：2013-04-17T11:50:30.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否有 ruby​​\rails 方法来确定字符串长度？
（下面有一个例子`a`，`b`长度都等于 10 个字符，但实际长度完全不同）

例如
a = lllllllllll
b = WWWWWWWWWWW

字体也应该考虑

PS最终在客户端
使用[https://github.com/tbasse/jquery-truncate](https://github.com/tbasse/jquery-truncate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:04:26.597

回复在这里

[如何在 Ruby 中计算字符串的宽度？](https://stackoverflow.com/questions/378887/how-do-i-calculate-a-strings-width-in-ruby)

```
the_text = "TheTextYouWantTheWidthOf"
label = Draw.new
label.font = "Vera" #you can also specify a file name... check the rmagick docs to be sure
label.text_antialias(true)
label.font_style=Magick::NormalStyle
label.font_weight=Magick::BoldWeight
label.gravity=Magick::CenterGravity
label.text(0,0,the_text)
metrics = label.get_type_metrics(the_text)
width = metrics.width
height = metrics.height 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:57:37.887

从服务器端绝对无法知道字符串的宽度（以像素为单位）。您可以通过使用您在 CSS 中指定的相同字体渲染字符串来进行猜测，但是最终用户可以在他们的浏览器中覆盖这些设置，从而使您的猜测无效。或者，用户可能没有您使用的字体，而浏览器会替换为类似系列的字体，该字体对于某些字符具有不同的宽度；结果又会和你想的不一样。

如果可能的话，唯一知道的方法是在用户的浏览器中使用 JavaScript，根据任何用户 CSS 指定的最终渲染字体的计算，然后将其返回到您的服务器以进行进一步处理，然而，这确实打破了网络和浏览器如何工作的想法。

# java - Issue with Spring Cache Abstraction & Ehcache

> ID：16059233
> 
> 赞同：0
> 
> 时间：2013-04-17T11:50:36.373
> 
> 标签：java, spring, caching, ehcache

I am facing an issue wherein the code tries to find cache named "AdministrationContactManagerImpl.retrieve" but it fails to find it.The target method is annotated with @cacheable.

```
@Cacheable(value="administrationContactManagerImpl.retrieve", key="#prefix + #contract + #effectiveDate + #administrationRoles")
    public List<AdministrationContact> retrieve(Set<AdministrationRole> administrationRoles, Date effectiveDate, 
```

I have not defined `<ehcache:annotation-driven>` in my main applicationContext file.This means that caching should not get enabled and I should not run in to the errors as output in the stacktrace. I suspect some jar's in the classpath might be enabling the caching but how it is enabled and how can I detect it?

Can anyone tell how could I disable the caching so that I can avoid this error.

We are using spring version 3.1.1.Release jars.

```
 java.lang.IllegalArgumentException: Cannot find cache named [administrationContactManagerImpl.retrieve] for CacheableOperation[public java.util.List com.principal.ris.contact.internal.impl.AdministrationContactManagerImpl.retrieve(java.util.Set,java.util.Date,java.lang.Integer,java.lang.String)] caches=[administrationContactManagerImpl.retrieve] | condition='' | key='#prefix + #contract + #effectiveDate + #administrationRoles'
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheAspectSupport.getCaches(CacheAspectSupport.java:163)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheAspectSupport$CacheOperationContext.<init>(CacheAspectSupport.java:443)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheAspectSupport.getOperationContext(CacheAspectSupport.java:173)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheAspectSupport.createOperationContext(CacheAspectSupport.java:404)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:192)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:66)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at com.principal.ris.contact.internal.impl.AdministrationContactManagerImpl$$EnhancerByCGLIB$$ddaad355.retrieve(<generated>)
[4/17/13 14:44:50:001 IST] 0000001a SystemErr     R     at com.principal.ris.tpaview.listener.TpaViewUserTemplateListener.contextCreated(TpaViewUserTemplateListener.java:118) 
```

Updating this post : I have selected the answer as best answer but I will tell you all what I did. In you java maven projects, you really do not need to include such annotations which can impact your context. As a best practice, always keep the switches configurations in your war's pom file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:42:38.440

[参考文档的这一部分](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-annotation-enable)详细介绍了如何在 Spring 中启用对缓存注释的支持。基于此，`<cache:annotation-driven/>`您的 xml 上下文文件之一中必须有一个标签。仔细检查是否没有（可能是可传递的）导入的包含此指令的配置文件。

**回复您的评论：**
在`<cache:annotation-driven/>`导入的 xml 文件中肯定会启用缓存支持。所有导入（和传递导入）的上下文文件都合并到一个 Spring 上下文中，并且该标记指示 Spring 在*整个上下文*`annotation-driven`中查找 beans 上的注释，而不仅仅是在放置该指令的同一 xml 文件中定义的 beans 上。要理解的重要一点是，bean 定义可能在物理上被分成几个文件（也可以来自不同的 jar），但这不会导致上下文的任何逻辑模块化。

 *这种模块化只能通过定义上下文之间的父子关系来实现，其中首先加载父上下文，然后再加载子上下文（将第一个指定为其父上下文）。这导致父上下文基本上不知道其子上下文的设置，但子上下文可以访问其父上下文中定义的任何 bean。
您可以使用它首先加载外部 jar 中定义的上下文，然后将您自己的上下文作为子项加载。这样`annotation-driven`，父上下文中的 bean 不会影响您的 bean，而您仍然可以从父上下文中访问任何内容。
问题是如果您的应用程序是 Spring MVC webapp，则没有简单的方法来声明父上下文。*

# php - 设置 Yii 模型与其他字段的关系

> ID：16059248
> 
> 赞同：0
> 
> 时间：2013-04-17T11:51:25.237
> 
> 标签：php, yii, relationship

我有关系：

```
'tbl2' => array(self::BELONGS_TO, 'Tbl2', 'id_tbl2') 
```

它`tbl1.id_tbl2`指的是`tbl2.id`表。但现在我需要将其设为`id1`in `tbl2`.

`tbl1`是**MyISAM**并且`tbl2`是**InnoDB**

想要在 gii 中添加该字段的关系`tbl1`并再次在 gii 中生成模型，但在**phpMyAdmin**行中，**关系视图**消失了，据我所知，它仅适用于 InnoDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:02:49.403

你应该试试这个：

```
'tbl2' => array(self::BELONGS_TO, 'Tbl2', array('id_tbl2'=>'id1')) 
```

如果你想使用 gii，你应该使用 InnoDB。

[http://www.yiiframework.com/doc/guide/1.1/fr/database.arr](http://www.yiiframework.com/doc/guide/1.1/fr/database.arr)

# javascript - 访问可观察对象数组中的对象字段。淘汰赛JS

> ID：16059250
> 
> 赞同：1
> 
> 时间：2013-04-17T11:51:29.243
> 
> 标签：javascript, knockout.js, ko.observablearray

我有一个表，它通过数据绑定填充来自可观察对象（人）数组的数据。当我单击表格的某个单元格时，行的索引和单元格的索引被写入变量“self.currentLine”和“self.currentCell”，而输入出现在上面，宽度为 100%，高度为 100%，覆盖了数据与自身。是否有可能仅使用字段索引而不是使用字段名称来访问可观察数组中某些对象的某些字段？（例如，不是 self.persons[0]'name'，而是 self.persons[0][0]）

这是一个代码（JS）：

```
function person(fullname, age, sex, married)
{
    this.name = ko.observable(fullname); //string, only observable field, while i'm trying to get this working properly.
    this.age = age;                      //Data
    this.sex = sex;                      //string
    this.married = married;              //bool
};

function personViewModel()
{
    var self = this;
    self.currentLine = ko.observable();
    self.currentCell = ko.observable();
    self.columnNames = ko.observableArray([
                'Name',
                'Age',
                'Sex',
                'Married'
    ]);

    self.persons = ko.observableArray([...]);

    };
    self.setLine = function(index)
    {
        self.currentLine(index);
    };
    self.setCell= function(cellIndex)
    {
        self.currentCell(cellIndex);
    };
};
ko.applyBindings(new personViewModel()); 
```

我使用的 HTML 代码：

```
<table>
        <thead data-bind="template: { name: 'tableHeader', data: columnNames }" />
        <tbody data-bind="template: { name: 'tableContent', foreach: persons }" />
    </table>

    <script id="tableHeader" type="text/html">
        <tr data-bind="foreach: $data">
                <td data-bind="text: $data,
                               css: { 'active': $root.currentItem() == $data }">
                </td>
        </tr>
    </script>

    <script id="tableContent" type="text/html">
        <tr data-bind="click: $root.setLine.bind($data, $index())">
            <td data-bind="click: $root.setCell.bind($data, $element.cellIndex)">
                <span data-bind="text: name"></span>
                <input type="text" data-bind="visible: $root.currentCell() == 0 && $index() == $root.currentLine(),
                                              value: name"/> <!--fixed-->
            </td>
        </tr>
    </script> 
```

在 html 中，我根据在表格中单击的单元格设置输入可见。所以现在我需要将一个单元格的值传递给输入，所以我可以编辑这些数据。

**更新：**像往常一样，我忘记在输入中的 value: name() 后面加上圆括号 '()'。但是第二个问题来了。据我所知，当输入失去焦点时，必须自动更改值。但是我的没变...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:15:19.530

使用输入`value`绑定来传递单元格的值：

AFAIK，没有办法访问具有假定索引的字段，要从 observableArray 中的对象读取字段，您可以使用以下语法 : `persons()[index].fieldName()`，因为该字段也是可观察的。

希望它有所帮助。

# php - php客户端的WCF回调服务

> ID：16059252
> 
> 赞同：0
> 
> 时间：2013-04-17T11:51:36.490
> 
> 标签：php, javascript, asp.net, wcf, soap-client

我创建了一个带有回调并使用 wsDualHttp 绑定的 WCF 服务。我想使用 PHP 客户端连接到该服务。在 PHP 中，SoapClient 用于调用 WCF 服务，如下所示：

```
$wsdl = "http://pathto/file.svc?wsdl"
$client = new SoapClient($wsdl, array('trace' => $trace, 'exceptions' => $exceptions));
$response = $client->somefunction(); 
```

请指导在 PHP 中获取回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:36:38.477

对不起，但 IMO 不可能有从 wcf 到 php 的回调（例如，这篇文章也这么说： [http](http://wso2.org/forum/thread/24111) ://wso2.org/forum/thread/24111 ）。

可能您可以检查一些 websocket 解决方案来接收您正在寻找的行为。

看看 node.js，对于 ecample：[http ://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/](http://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/)

# java - 什么是经常向客户端发送服务器时间的正确方法？

> ID：16059253
> 
> 赞同：3
> 
> 时间：2013-04-17T11:51:38.150
> 
> 标签：java, gwt, jprofiler

我有一个 gwt 应用程序。我需要经常向客户端显示服务器日期，为此，我使用[了 GWTEventService](https://code.google.com/p/gwteventservice/)。当用户登录到应用程序时，我正在发送一个 rpc 并创建一个计时器，它将定期向客户端发送事件。

但是由于内存泄漏，在使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)进行调试后， 我知道在计时器内部创建了日期对象，并且由于线程创建，它没有被垃圾收集。

此外，我还附上了一张图片，它在调试模式下增加了线程。这可能不是战争我还没有经过战争测试。

1）我们如何使对象符合在线程内创建的垃圾收集？

2）将服务器时间发送给客户端的其他方法是什么？

3）我们如何使用 JProfiler 测试 GWT War？

**处理程序代码：**

```
 public class UtilityCallerActionHandler extends RemoteEventServiceServlet implements
            ActionHandler<UtilityCaller, UtilityCallerResult> {

        private static Timer myEventGeneratorTimer;

        @Inject
        public UtilityCallerActionHandler() {
        }

        @Override
        public UtilityCallerResult execute(UtilityCaller action,
                ExecutionContext context) throws ActionException {
            try{
                if(myEventGeneratorTimer == null) {
                    myEventGeneratorTimer = new Timer(true);
                    myEventGeneratorTimer.schedule(new ServerTimerTask(), 0, 10000);
                }
                return new UtilityCallerResult();
            }catch (Exception e) {
                CommonUtil.printStackTrace(e);
                long exceptionBeanId = 0l;
                if (e instanceof NTException) {
                    exceptionBeanId = ((NTException)e).getExceptionBeanId();
                }
                throw new NTActionException(NTException.getStackTrace(e),e.getCause(), exceptionBeanId);
            }
        }

        @Override
        public void undo(UtilityCaller action, UtilityCallerResult result,
                ExecutionContext context) throws ActionException {
        }

        @Override
        public Class<UtilityCaller> getActionType() {
            return UtilityCaller.class;
        }

        private class ServerTimerTask extends TimerTask
        {
            public void run() {
                final Date theEventMessage = new Date();
                //create the event
                Event theEvent = new NTTimerEvent(theEventMessage);
                //add the event, so clients can receive it
                addEvent(NTTimerEvent.SERVER_MESSAGE_DOMAIN, theEvent);
            }
        }

    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/Xxhix.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:50:35.093

即使使用 GWTEventService，往返成本也是一样的。在推送与拉取中，您并没有节省太多带宽或处理。我更喜欢以下方法之一

1.  使用 RPC 的基于计时器的服务器轮询。将计时器设置为 5 到 10 分钟延迟（一个具有该延迟的 rpc 调用不会花费太多）
2.  Subir 建议对加载日期进行一次 RPC 调用并将其用于浏览器上的当前会话。

# c# - 启动两个线程按顺序而不是同时运行它们

> ID：16059264
> 
> 赞同：1
> 
> 时间：2013-04-17T11:52:37.120
> 
> 标签：c#

我有一个控制窗口窗体的主线程，按下按钮时会执行两个线程。一个用于记录信息，另一个用于读取信息。将这些放入线程背后的想法是使用户能够在执行时与界面进行交互。

这是两个线程的创建；

```
Thread recordThread = new Thread(() => RecordData(data));
recordThread.Name = "record";
recordThread.Start();

Thread readThread = new Thread(() => ReadData(data));
readThread.Name = "read";
readThread.Start(); 
```

*数据*只是一个数据对象，用于存储在记录过程中记录的数据。

我面临的问题是第一个线程执行得很好，第二个拒绝运行，直到第一个完成。在第二个线程函数中放置一个断点，*ReadData*让我知道只有在第一个线程完成所有记录后才调用它。

我已经尝试解决这个问题几个小时了，但我无法理解它为什么会这样做。添加一个;

```
while(readThread.IsAlive) { } 
```

在 start 之后将停止执行之后的任何操作，并且它的状态是*Running*。但它不会去给定的方法。

有任何想法吗？

**编辑**：线程调用的两个函数是；

```
 private void RecordData(Data d)
    {
        int i = 0;
        while (i < time * freq)
        {
            double[] data = daq.Read();
            d.AddData(data);
            i++;
        }
    }

    private void ReadData(Data d)
    {
        UpdateLabelDelegate updateData =
            new UpdateLabelDelegate(UpdateLabel);

        int i = 0;
        while (i < time * freq)
        {
            double[] data = d.ReadLastData();
            this.Invoke(updateData, new object[] { data });
            i++;
        }
    } 
```

*数据*对象在调用的两个函数中都有锁定；*ReadLastData 和读取*。

以下是*Data*对象中的方法。

```
 public void AddData(double[] data)
    {
        lock (this)
        {
            int i = 0;
            foreach (double d in data)
            {
                movementData[i].Add(d);
                i++;
            }
        }
    }

    public double[] ReadLastData()
    {
        double[] data = new double[channels];
        lock (this)
        {
            int i = 0;
            foreach (List<double> list in movementData)
            {
                data[i] = list[list.Count - 1];
            }
        }
        return data;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:38:30.550

看起来您在阅读/写作之间存在竞争条件。在您的第一个线程中，您在向其添加数据的同时锁定对象，而在第二个线程中，您*尝试*对其获得排他锁以开始读取。然而，问题是第一个线程执行得如此之快，以至于第二个线程永远没有机会获得锁。

这个问题的解决方案实际上取决于你在这里追求什么样的行为。如果您希望在每次写入后获得连续读取，那么您需要做的是控制读/写操作之间的执行，例如

```
static AutoResetEvent canWrite = new AutoResetEvent(true); // default to true so the first write happens
static AutoResetEvent canRead = new AutoResetEvent(false);
...
private void RecordData(Data d)
{
    int i = 0;
    while (i < time * freq)
    {
        double[] data = daq.Read();
        canWrite.WaitOne(); // wait for the second thread to finish reading
        d.AddData(data);
        canRead.Set(); // let the second thread know we have finished writing
        i++;
    }
}

private void ReadData(Data d)
{
    UpdateLabelDelegate updateData =
        new UpdateLabelDelegate(UpdateLabel);

    int i = 0;
    while (i < time * freq)
    {
        canRead.WaitOne(); // wait for the first thread to finish writing
        double[] data = d.ReadLastData();
        canWrite.Set(); // let the first thread know we have finished reading
        this.Invoke(updateData, new object[] { data });
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:01:58.790

您可以尝试在 RecordData 中添加睡眠吗？也许只是您的（单核 CPU ？？）Windows 操作系统不允许第二个线程获得 CPU 资源。

不要这样做：锁定（这个）

改为执行以下操作：

```
private object oLock = new object();

[...]

lock (this.oLock) 
```

编辑：你能试试这样的电话吗：

```
Thread recordThread = new Thread((o) => RecordData((Data)o));
recordThread.Name = "record";
recordThread.Start(data); 
```

# java - ExtJs 3组合框设置默认值

> ID：16059269
> 
> 赞同：0
> 
> 时间：2013-04-17T11:53:04.657
> 
> 标签：java, javascript, extjs

我是 ExtJS 的新手。几周前，如果这似乎是一个微不足道的查询，请原谅我。

我必须根据在另一个组合框 (DeliveryMethod) 中选择的值加载组合框 (SourceSystem) 中的值列表。我对这两个组合都使用 JSON 存储。

所以我在组合框 2 上添加了一个监听器

```
listeners:{
     'select': function(combo, record,index) {
      selectedDelMethod = record.data.codeValue;
      var srcSystem = Ext.getCmp('sourceSystemCombo');
      srcSystem.reset();
      srcSystem.store.reload({ 
      params: {
        attrID: 3002,
        delvMethod: selectedDelMethod

        }
      });        
   } 
```

在这里，srcSystem.store 根据 selectedDelMethod 加载不同的列表。这工作正常。但是当 SourceSystem 组合框 id 加载时，它会被填充，但没有显示为默认值。

```
fieldLabel:     'Source System',
id:        'sourceSystemCombo',
xtype:          'combo',
mode:           'local',
triggerAction:  'all',
forceSelection: true,
editable:       false,
name:           'sourceSystem',
displayField:   'shortDescription',
valueField:     'codeValue',
hiddenName:     'sourceSystem',
store:          sourceSystemStore,  
listeners: {
   'afterrender': function(combo){
    var selectedRecord = combo.getStore().getAt(0);
    combo.setValue(selectedRecord);        
  }
} 
```

我确信我在 afterrender 监听器中遗漏了一些东西。请告诉我如何让第一个值成为默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:28:21.360

我发现 combo.getStore().getAt(0) 返回 null。在尝试了几种方法后，我设法解决了这个问题。我没有在组合框上放置一个事件，而是更新了商店的重新加载以在组合中设置第一个值。这里是

```
var srcSystem = Ext.getCmp('sourceSystemCombo');
srcSystem.reset();
srcSystem.store.reload({ 
    params: {
        attrID:     3002,
        delvMethod: selectedDelMethod
    },
    scope : this,
    callback : function(records, operation, success){
        srcSystem.setValue(srcSystem.store.getAt(0).get('codeValue'));
    }
}); 
```

组合框的设置值必须是商店的回调函数，因为商店的加载是一个异步过程。看到[这个](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.Store-method-load)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:42:15.003

尝试使用
this.fireEvent('select',combo,selectedRecord) 而不是
combo.setValue(selectedRecord);

# wpf - WPF ScrollViewer 设置 ScrollableHeight

> ID：16059273
> 
> 赞同：2
> 
> 时间：2013-04-17T11:53:23.830
> 
> 标签：wpf, scrollviewer, customizing

我有一个用户控件，可以在`OnRender`. 那个`Height`控制的逐渐增长。

我将此控件添加到`ScrollViewer`. 该控件仅重绘当前可见区域 ( `viewport`)（+/- 用于更平滑滚动的视图线）。到目前为止一切正常...

但是由于控件通常会增长到几十万像素，所以我希望`Height`控件的 尽可能小，并提供一个不同的`Height`值来绑定到`ScrollableHeight`（`ScrollViewer`同样适用`VerticalOffset`）。但是没有设置器`ScrollableHeight`。它自动绑定到我的控件的高度。我也不能覆盖高度。

如何自定义我的`ScrollViewer`（或`VerticalScrollbar`）以保持`Height`我的控制的真实性很小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:43:22.753

我过去做过类似的事情。您需要做的是编写自己的布局[Panel](http://msdn.microsoft.com/en-us/library/ms754152.aspx#Panels_custom_panel_elements)并在其中实现[IScrollInfo](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.iscrollinfo.aspx)。接口看起来很大，但大部分只是调用其中一个主要的 set 方法。布局器需要设置一些`IScrollInfo`属性，例如等`ExtentHeight`，`Offset`这些是您自定义如何`ScrollViewer`计算滚动位置和“虚拟”画布大小的可滚动区域的方式。为了实现`IScrollInfo`我使用[本](http://tech.pro/tutorial/907/wpf-tutorial-implementing-iscrollinfo)教程作为指导。

# jquery - 由于 IE7 和 IE8 中的缓存，JSON 内容无法加载

> ID：16059274
> 
> 赞同：1
> 
> 时间：2013-04-17T11:53:25.063
> 
> 标签：jquery, ajax, json

我知道在使用 AJAX 加载 JSON 时 IE7 和 IE8 存在缓存问题，但我认为我已经解决了将缓存设置为 false 的问题。我页面中的 JSON 有时无法仅在这些浏览器中加载。有什么问题？

```
var language = "de";

$.ajax({
        url: "json/" + language + "/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        cache : false,
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showStartpage(data);
            showInfo(data);
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 
```

有任何想法吗？谢谢！

# java - 在 Java GUI 中显示树形数据结构

> ID：16059275
> 
> 赞同：0
> 
> 时间：2013-04-17T11:53:25.767
> 
> 标签：java, swing, netbeans-7, jtree

```
I intend to display a tree in Java GUI. 
```

树的节点将描述用户在运行时输入的程序的函数名称，树的边缘将描述函数调用。因此，如果 main 调用 func1，树中将有 2 个节点（main 和 func1）和一条从 main 到 func1 的边。它会根据用户输入的程序而有所不同。这棵树可能不是二叉树，因为单个函数可能调用两个以上的函数并且可能是递归的。

我研究了 JTree，我觉得我不会在使用它的所需设计中获得所需的输出。

我什至考虑使用 Prefuse 之类的工具，但这会增加我的应用程序的大小。有没有其他方式显示以上内容？

期望的输出 - 如果程序是

```
void main()   //program begins here
{
   func1();
   func2();
}

void func1()
{
      x=0;
     if(x<5)
     {
        func1();
        x++;
     }
}

void func2()
{
      sum();
      diff();
      mul();
}

void sum()
{
      printf("2+5=7");
}
void diff()
{
      printf("2-5=-3");
}
void mul()
{
     printf("2*5=10");
}

Its output should be-

               main
              /   \
             /     \
      ----->func1  func2
      |-------|    /  \  \
                  /    \  \ 
                 sum   diff mul 
```

我无法显示图像。它在 [http://postimg.org/image/5uovbguz9/](http://postimg.org/image/5uovbguz9/)

# php - kendoAutoComplete 用于多个 dataTextField

> ID：16059276
> 
> 赞同：1
> 
> 时间：2013-04-17T11:53:28.233
> 
> 标签：php, codeigniter, kendo-ui

下面的代码仅适用于 FileNo（字段）的自动完成。我希望这个功能也适用于员工的其他属性。即名字，姓氏

dataTextField: "FileNo" <---------------- 这里 dataTextField 获取 sing 字段。怎么可能适用于多个领域？
![在此处输入图像描述](https://i.stack.imgur.com/647X2.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/bCPOr.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:44:16.513

您应该使用**模板**来更改自动完成下拉列表中显示的内容。那么 dataTextField 将只在输入元素内部使用。

[这](http://demos.kendoui.com/web/autocomplete/template.html)是创建模板的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:39:31.280

由于您知道要搜索哪些列，因此我的建议是：

1.  `index.php/hr_management/manage_hr/search_employee/`以能够搜索您想要的任何列的方式实现（, `FileNo`, `FirstName`... `LastName`）。
2.  此服务将返回（至少）三列，提供您在其上找到匹配项和*匹配值*`id`的*列名*。
**   *匹配值*用于显示`autocomplete`.*   一旦选择了值，就`autocomplete`使用*列名*和*匹配值*在`grid`.*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-31T13:11:49.733

Kendo Autocomplete 有 dataTextField，它接受一个字段名称（例如，数据源的雇员 ID、雇员名称等）以用于过滤项目。

要使用多个字段，您必须在*解析***模式**中的数据源期间将其中一个字段设置为保存**连接的字段**，如下所示。然后将您的自动完成**过滤器设置为“****包含**”

 *******我做了如下。

```
var myDataSrc = new kendo.data.DataSource({    
                    transport: {
                        read: {
                            type:"GET",
                            url:clientDataURL,
                            dataType: "jsonp",
                            contentType: "application/json",
                        }                           
                    }, 
                      schema: {
                            parse: function(clntDB) {
                                $.each(clntDB, function(ky, clnt) {
                                  clnt.firstName = clnt.clientUID + " | " + clnt.firstName+ "  " + clnt.lastName;

                                });
                                return clntDB;
                            } 
                     },
                     pageSize: 4    // Number of Items to show during input
        }); 
```

/// 参见上面的**firstName**，它被重构为包含连接的 lastname 、 ID 和 firstname 字符串。

下一步是使用解析的 firstName 作为kendo Autocomplete的**dataTextField的值。**

然后 var selectedClntID; //// 实际上，这旨在获取ID以供将来使用

```
$("#YOURSEARCHINPUTID").kendoAutoComplete({
                dataSource: myDataSrc ,
                template:   tmplSrchdClnt,  // YOUR TEMPLATE like "<div>firstName</div>"            
                dataTextField:"firstName",  
                filter:"contains",    /// DON'T FORGET TO ADD THIS
                minLength    : 1 ,
                select: function(e) {
                   var selectedClnt = this.dataItem(e.item.index()),
                       x = kendo.stringify(selectedClnt);
                       selectedClntID =    JSON.parse(x);

               }
                // headerTemplate: '<div><h2>ID - LastName</h2></div>'
        }); 
```

然而，很难找到这样的资源指示，当你看到它工作时，它真是太棒了。这是我项目的自动完成引擎。我是这样做的。

或者，您可以转换为

**数据**=新员工（名字，姓氏，ID）；// 在客户端

```
function Employee( firstname, lastname, ID ){
  this.filterStr = firstname + ""+lastname+" "+ID;
} 
```

将**数据**提供给 kendo AutoComplete dataSource 并将**filterStr**用作 dataTextField。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-07T09:38:58.900

另一个将新字段添加到数据课程以用作 dataTextField 的代码示例。

```
// Build our data source object.
var dataSource = new kendo.data.DataSource({
  transport: {
    read: {
      url: readUrl,
    }
  },
  group: {field: "region"},
  schema: {
    data: function(response) {
      $.each(response, function(k, v) {
        response[k].searchString = v.airport + " " + v.iataCode;
      });

      return response;
    }
  }
});

$(selector).kendoAutoComplete({
  dataTextField: "searchString",
  filter: "contains",
  template: '<span class="k-state-default">#: data.airport # (#: data.iataCode #)</span>',
  height: 400,
  dataSource: dataSource,
}); 
```********

# asp.net - Cookie 未保存到正确的位置 Asp.Net

> ID：16059280
> 
> 赞同：0
> 
> 时间：2013-04-17T11:53:31.833
> 
> 标签：asp.net, web-applications, cookies

在 Asp.Net 4.0 中，我正在使用 HttpCookie 类编写 cookie。用 IE9 调试。cookie 被保存到“/”。它不应该保存到 [user]\AppData\Local\Microsoft\Windows\Temporary Internet Files 吗？当我试图在那里找到它时，它不存在。我该如何改变呢？

```
 Dim cookie_name As String = "ProjectId"
 Dim cookie As New HttpCookie(cookie_name)
 cookie.Value = "123456789"
 cookie.Expires = DateTime.Now.AddHours(8)
 Response.Cookies.Add(cookie)

 Debug.Print(cookie.Path.ToString) 'cookie is saving to "/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:16:46.573

`cookie.path`定义 cookie 适用的基本域 URL，它与客户端文件系统无关（您无需担心）。

[这](http://milincorporated.com/a2_cookies.html)描述了如何找到 cookie 的物理路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:59:44.663

Alex K 非常正确，这是Cookie.Path 属性的[MSDN 参考，其中指出：](http://msdn.microsoft.com/en-us/library/system.net.cookie.path%28v=vs.110%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

> Path 属性指定源服务器上应用此 Cookie 的 URI 子集。如果未指定此属性，则此 Cookie 将发送到源服务器或服务器上的所有页面。

# ruby-on-rails-3.1 - ActiveRecord::StatementInvalid: PG::Error: ERROR: null value in column "id" 违反非空约束

> ID：16059283
> 
> 赞同：7
> 
> 时间：2013-04-17T11:53:38.803
> 
> 标签：ruby-on-rails-3.1

我的应用程序中经常出现以下错误。如果我重新启动我的 rails 应用程序，此错误将在一段时间内不会出现。

导轨 - 3.1.3

红宝石 - 1.9.3

> ActiveRecord::StatementInvalid: PG::Error: ERROR: null value in column "id" 违反非空约束

```
Directory.create(:name=>"name",:alias_name=>"name",:site_id=>2,:type=>"Directory")

(0.3ms)  BEGIN
  SQL (0.8ms)  INSERT INTO "databases" ("alias_name", "created_at", "created_by", "id", "name", "site_id", "type", "updated_at", "updated_by") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)  [["alias_name", "name"], ["created_at", Wed, 17 Apr 2013 16:46:25 IST +05:30], ["created_by", nil], ["id", nil], ["name", "name"], ["site_id", 2], ["type", "Directory"], ["updated_at", Wed, 17 Apr 2013 16:46:25 IST +05:30], ["updated_by", nil]]
PG::Error: ERROR:  null value in column "id" violates not-null constraint
: INSERT INTO "databases" ("alias_name", "created_at", "created_by", "id", "name", "site_id", "type", "updated_at", "updated_by") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
   (0.2ms)  ROLLBACK
ActiveRecord::StatementInvalid: PG::Error: ERROR:  null value in column "id" violates not-null constraint
: INSERT INTO "databases" ("alias_name", "created_at", "created_by", "id", "name", "site_id", "type", "updated_at", "updated_by") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1034:in `get_last_result'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1034:in `exec_cache'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:603:in `block in exec_query'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract_adapter.rb:244:in `block in log'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activesupport-3.1.3/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract_adapter.rb:239:in `log'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:601:in `exec_query'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract/database_statements.rb:63:in `exec_insert'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/relation.rb:70:in `insert'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/persistence.rb:313:in `create'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/timestamp.rb:51:in `create'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/callbacks.rb:268:in `block in create'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activesupport-3.1.3/lib/active_support/callbacks.rb:390:in `_run_create_callbacks'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activesupport-3.1.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
... 7 levels...
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/validations.rb:50:in `save'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:208:in `transaction'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:241:in `block in save'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/activerecord-3.1.3/lib/active_record/transactions.rb:240:in `save'
    from (irb):9
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
    from /home/user/.rvm/gems/ruby-1.9.3-p194-firstversion@web/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'1.9.3p194 :010 > 
```

我不知道为什么 id 在 rails 生成的 SQL 中为零。

谁能帮帮我！！！我正在为这个错误而苦苦挣扎

提前致谢，

塞尔瓦车智安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T00:29:44.543

I have same problem once. Here is my problem. I did a

```
rake db:schema:dump
rake db:schema:load 
```

and the table got problem as below:

```
create_table "campaign_line_items_backup", :id => false, :force => true do |t|
  t.integer  "id"
  t.integer  "campaign_id"
  t.integer  "size_id"
  t.text     "name" 
```

it should be

```
create_table "campaign_line_items_backup", :force => true do |t|
  t.integer  "campaign_id"
  t.integer  "size_id"
  t.text     "name" 
```

I am not sure about your problem, That's the way I fixed mine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-31T11:59:48.120

最好的解决方案是重试插入操作。

# ruby-on-rails-3 - Rails 3 中的注册页面/表单未考虑所有必填/必填字段

> ID：16059300
> 
> 赞同：0
> 
> 时间：2013-04-17T11:54:18.870
> 
> 标签：ruby-on-rails-3, validation, textfield, required

我的注册页面已登录。电子邮件、密码、密码确认和公司字段。所有这些都应该是强制性的，但是当我单击注册时，它不会检查除密码和密码确认之外的任何字段是否为空白！！我不明白我的 app/models/user.rb 文件有什么区别，我验证了所有字段的存在。请帮我

这是代码（必填行）

## 用户.rb

```
class User < ActiveRecord::Base
  has_many :excel_files         # One user may have many excel files
  has_one  :user_access_validity# One user may have one license period 

  # Virtual attribute for the unencrypted password
  attr_accessor :password

  attr_accessible :login
  attr_accessible :email
  attr_accessible :password
  attr_accessible :password_confirmation
  attr_accessible :company

  #changes of 'validates' in accordance with rails 3:

  validates :login,  :presence => true, 
                        :length => { :within => 3..40}, 
                        :uniqueness => { :case_sensitive => false },
                        :format => { :with =>  /^([a-z_0-9\.]+)$/i },
                        :on => :create, 
                        :if => :is_login_entered?
  validates :email, :presence => true, 
                        :length => { :within => 7..100}, 
                        :uniqueness => { :case_sensitive => false },
                        :format => {:with => /^([a-z]+((\.?)|(_?))[a-z0-9]+@(mindtree.com|rvce.edu.in))$/i},
                        :on => :create,
                        :if => :is_email_entered? 
  validates :company, :presence => true,
                        :format => { :with =>/(mindtree|RVCE)/i},
                        :format => { :with => /^([a-z]+)$/i },
                        :on => :create, 
                        :if => :is_company_entered? 

   validates :password, :presence => true,
                       :length => { :within => 4..40 },
                       :confirmation => true,
                       :format => { :with => /^([a-z0-9@!#\$]+)$/i },
                       :on => :create,
                       :if => :password_required?

  validates :password_confirmation, :presence => { :if => :password_required? }

  before_save :encrypt_password

  #
  # is_email_entered? : checks whether the email field is entered or not
  # @params           : none
  # @return           : true  - if the email is entered
  #                     false - if the email is not entered
  # 
  def is_email_entered?
    !self.email.blank?
  end

  #
  # is_company_entered? : checks whether the company field is entered or not
  # @params             : none
  # @return             : true  - if the company is entered
  #                       false - if the company is not entered
  #
  def is_company_entered?
    !self.company.blank?
  end

  #
  # is_login_entered? : checks whether the login field is entered or not
  # @params           : none
  # @return           : true  - if the login is entered
  #                     false - if the login is not entered
  #
  def is_login_entered?
    !self.login.blank?
    puts "login"
  end

  protected

    # 
    # password_required? : Checks whether either of the crypted_password and password field is blank
    # @params            : none
    # @return            : true  - if either of the crypted_password and password field is blank
    #                      false - if either of the crypted_password and password field is not blank
    # 
    def password_required?
      crypted_password.blank? || !password.blank?
      puts "in pr?"
    end

end 
```

## 控制器.rb

```
def signup

        if logged_in?
            flash[:notice] = "<span class='error'>You have already registered with us!</span>".html_safe
            redirect_to :action => 'upload_file'
        else 
            @user = User.new(params[:user])
            return unless request.post?
            @user.save!
            self.current_user = @user
            random_number = @user.generate_random_number
            puts random_number
            new_random_number = "c" + @user.id.to_s + random_number
            @user.customerid = new_random_number
            @user.created_at = get_current_datetime
            # @user.updated_time = ''
            @user.save

            # save user's maximum access days
            user_validity = UserAccessValidity.new
            user_validity.user_id = self.current_user.id
            user_validity.maximum_access_in_days = 90
            user_validity.save 

            # redirect_back_or_default(:controller => '/account', :action => 'welcome')
            redirect_to :controller => '/account', :action => 'welcome'
            flash[:notice] = "<span class='success'>Thanks for registering!</span>".html_safe

        end
    end 
```

## 注册.html.erb

```
<font color=red>(Fields marked * are mandatory)</font><h3>Sign me up!</h3>

<br>
<span class='error'><%= error_messages_for (@user) %></span>

<%= form_for :user do |f| -%>

<span class='error'><%= flash[:msg] %></span>

<p><label for="login"><span class='redcolor'>*</span>Login</label><br/>
<%= f.text_field :login %></p>

<p><label for="email"><span class='redcolor'>*</span>Email</label><br/>
<%= f.text_field :email %></p>

<p><label for="password"><span class='redcolor'>*</span>Password</label><br/>
<%= f.password_field :password %></p>

<p><label for="password_confirmation"><span class='redcolor'>*</span>Confirm Password</label><br/>
<%= f.password_field :password_confirmation %></p>

<p><label for="company"><span class='redcolor'>*</span>Company</label><br/>
<%= f.text_field :company %></p>

<p><%= f.submit 'Sign up', :name=> 'sign_up' %></p>

<% end -%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:26:36.743

问题是您将一个`if`选项传递给您的验证，该选项也适用于存在验证。以以下为例

```
validates :login,
  :presence => true, 
  :length => { :within => 3..40}, 
  :uniqueness => { :case_sensitive => false },
  :format => { :with =>  /^([a-z_0-9\.]+)$/i },
  :on => :create, 
  :if => :is_login_entered? 
```

`is_login_entered?`在验证存在与验证冲突的登录时调用，这就是跳过验证的原因。将您的验证更改为

```
validates :login, :presence => true, :on => :create
validates :login,
  :length => { :within => 3..40}, 
  :uniqueness => { :case_sensitive => false },
  :format => { :with =>  /^([a-z_0-9\.]+)$/i },
  :on => :create, 
  :if => :is_login_entered? 
```

这样，其他验证将仅在存在登录时运行。

# android - Android - 片段和浏览器

> ID：16059301
> 
> 赞同：2
> 
> 时间：2013-04-17T11:54:30.340
> 
> 标签：android, android-viewpager, fragment

我有一个`FragmentActivity`包含`ViewPager`：

```
mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
mViewPager = (ViewPager) findViewById(R.id.pager);
mViewPager.setAdapter(mSectionsPagerAdapter); 
```

然后在我的`SectionsPagerAdapter`我有以下方法显示不同位置的布局：

```
@Override
public Fragment getItem(int position) {
    if(position == 0){
        return Fragment.instantiate(context, FragmentA.class.getName());
    }
    else if(position == 1){
        return Fragment.instantiate(context, FragmentB.class.getName());
    }
    else if(position == 2){
        return Fragment.instantiate(context, FragmentC.class.getName());
    }
    return null;
} 
```

问题是多次`FragmentC`调用，这将重新创建视图，我不希望这样。`onCreateView`我希望它被创建一次，并保持不变。`FragmentC`在位置 2，然后我滑动到位置 1，就可以了。但是当我滑动到位置 0 并回到位置 2 时（`FragmentC)`它会再次创建。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:19:33.380

我自己找到了解决方案：

```
mViewPager.setOffscreenPageLimit(nrOfPages); 
```

# c++ - C++ 内存泄漏与类中的字符串

> ID：16059303
> 
> 赞同：2
> 
> 时间：2013-04-17T11:54:32.490
> 
> 标签：c++, string, memory-management, memory-leaks

我正在使用 Visual C++ 2010 进行开发，并且正在使用一个名为“Visual Leak Detector”的库来检查内存泄漏。然后我发现了一个我无法解释和解决的问题。这是我的代码：

```
ManageRenderListenerCommand::ManageRenderListenerCommand(string action):mAction(action){
}

void ManageRenderListenerCommand::execute(){
    //Do something with action
} 
```

头文件是：

```
class ManageRenderListenerCommand : public IOgreCommand{
private:
    string      mAction;
public:
    ManageRenderListenerCommand(string action);
    void execute();
}; 
```

**更新：**它在这里被调用：

```
void OgreMediator::onOgreChanged(AbstractOgreNegotiator* negotiator, NegotiatorEvent& negotiatorEvent){
    IOgreCommand* command = NULL;
    if(negotiatorEvent.matchEvent("addToViewport")){
        command = new AddToViewportCommand(mCameraManager, mSceneCreator, mEngine);
    }else if (negotiatorEvent.matchEvent("manageRenderListener")){
        command = new ManageRenderListenerCommand(negotiatorEvent.getMessage());
    }else if (negotiatorEvent.matchEvent("manageMouseCamera")){
        command = new ManageMouseCameraCommand(mCameraManager, mMouseManager->getLastEvent());
    }

    //Execute the created command
    if (command){
        command->execute();
        delete command;
    }
} 
```

并且四个内存泄漏的堆栈非常相似，所以这里是其中之一：

```
---------- Block 163 at 0x023CEAE0: 8 bytes ----------
  Call Stack:
    c:\program files\microsoft visual studio 10.0\vc\include\xmemory (36): CataractSimulator.exe!std::_Allocate<std::_Container_proxy> + 0x15 bytes
    c:\program files\microsoft visual studio 10.0\vc\include\xmemory (187): CataractSimulator.exe!std::allocator<std::_Container_proxy>::allocate + 0xB bytes
    c:\program files\microsoft visual studio 10.0\vc\include\xstring (469): CataractSimulator.exe!std::_String_val<char,std::allocator<char> >::_String_val<char,std::allocator<char> > + 0xA bytes
    c:\program files\microsoft visual studio 10.0\vc\include\xstring (543): CataractSimulator.exe!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::basic_string<char,std::char_traits<char>,std::allocator<char> > + 0x5F bytes
    c:\users\cps\desktop\surgery-sim\project\simulator\src\managerenderlistenercommand.cpp (10): CataractSimulator.exe!ManageRenderListenerCommand::ManageRenderListenerCommand
    c:\users\cps\desktop\surgery-sim\project\simulator\src\ogremediator.cpp (28): CataractSimulator.exe!OgreMediator::onOgreChanged + 0x53 bytes
    c:\users\cps\desktop\surgery-sim\project\simulator\src\abstractogrenegotiator.cpp (5): CataractSimulator.exe!AbstractOgreNegotiator::notifyMediator + 0x1C bytes
    c:\users\cps\desktop\surgery-sim\project\simulator\src\ogrerenderobserverregistry.cpp (37): CataractSimulator.exe!OgreRenderObserverRegistry::addListener + 0x15 bytes
    c:\users\cps\desktop\surgery-sim\project\simulator\src\ogremediator.cpp (73): CataractSimulator.exe!OgreMediator::addRenderListener
    c:\users\cps\desktop\surgery-sim\project\simulator\src\mousemanager.cpp (6): CataractSimulator.exe!MouseManager::startMouse
    c:\users\cps\desktop\surgery-sim\project\simulator\src\ogremediator.cpp (58): CataractSimulator.exe!OgreMediator::initFramework
    c:\users\cps\desktop\surgery-sim\project\simulator\src\simulatorapi.cpp (27): CataractSimulator.exe!SimulatorAPI::Facade::initFramework
    c:\users\cps\desktop\surgery-sim\project\simulator\src\simulatorapi.cpp (60): CataractSimulator.exe!SimulatorAPI::initFramework
    c:\users\cps\desktop\surgery-sim\project\simulator\src\loader.cpp (23): CataractSimulator.exe!Loader::Facade::initFramework + 0x16 bytes
    c:\users\cps\desktop\surgery-sim\project\simulator\src\loader.cpp (45): CataractSimulator.exe!Loader::go
    c:\users\cps\desktop\surgery-sim\project\cataractsimulator\src\cataractloader.cpp (5): CataractSimulator.exe!CataractLoader::go + 0x8 bytes
    c:\users\cps\desktop\surgery-sim\project\cataractsimulator\src\cataractloader.cpp (26): CataractSimulator.exe!main
    f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (555): CataractSimulator.exe!__tmainCRTStartup + 0x19 bytes
    f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c (371): CataractSimulator.exe!mainCRTStartup
    0x7791ED6C (File and line number not available): kernel32.dll!BaseThreadInitThunk + 0x12 bytes
    0x77A1377B (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0xEF bytes
    0x77A1374E (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0xC2 bytes
  Data:
    14 4E 3D 02    00 00 00 00                                   .N=..... ........ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:07:07.823

如果 IOgreCommand（或 IOgreCommand 派生的任何类）没有虚拟析构函数，则任何派生自 IOgreCommand 的类在删除 IOgreCommand 指针时都不会调用其析构函数。

# algorithm - Knn 搜索大数据？

> ID：16059305
> 
> 赞同：2
> 
> 时间：2013-04-17T11:54:37.910
> 
> 标签：algorithm, search, machine-learning, knn

我有兴趣在大型数据集上执行 knn 搜索。

有一些库：[ANN](http://www.cs.umd.edu/~mount/ANN/)和[FLANN](http://www.cs.ubc.ca/~mariusm/index.php/FLANN/FLANN)，但我对这个问题很感兴趣：如果您的数据库不完全适合内存（RAM），如何组织搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:53:26.640

我想这取决于您的索引与内存相比有多大。这是我的第一个自发想法：

1.  假设它是 RAM 的数十倍，我会尝试使用例如层次聚类树（在 FLANN 中实现）对我的数据进行聚类。我会修改树的实现，以便它们将分支保存在内存中并将叶子（簇）保存在磁盘上。因此，每次都必须加载适当的集群。然后，您可以尝试以不同的方式对此进行优化。

2.  如果它不是那么大（假设是 RAM 的两倍），我会将数据集分成两部分并为每个部分创建一个索引。因此，我需要在每个数据集中找到最近的邻居，然后在它们之间进行选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:30:27.980

这取决于您的数据是否非常高维。如果它是相对低维的，您可以使用现有的磁盘[R-Tree](http://en.wikipedia.org/wiki/R-tree)实现，例如[Spatialite](http://www.gaia-gis.it/gaia-sins/)。

如果是更高维度的数据，您可以使用[X-Trees](http://en.wikipedia.org/wiki/X-tree)，但我不知道有任何磁盘上的实现。

或者，您可以使用磁盘持久性实现[局部敏感散列](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)，例如使用 mmap。

# php - php中的SQL问题

> ID：16059306
> 
> 赞同：4
> 
> 时间：2013-04-17T11:54:38.190
> 
> 标签：php, mysql, sql

**非常感谢您的回答，他们真的帮了我很多！**

我很好奇我做错了什么：我无法从 SQL 语句中获取任何值。

我的数据库表结构： ![在此处输入图像描述](https://i.stack.imgur.com/i2Yav.png)

我的代码：

```
include('config.php');
$id = $_GET['id'];

$query = "SELECT * FROM upload WHERE id = '$id'";
echo $query."<br/>";

$result = mysql_query($query) or die('error');
print_r($result);
echo $result['id']; 
```

测试时我得到以下信息：

"SELECT * FROM upload WHERE id = '1'

资源 ID #2"

但是有一个值为'2'的id，但为什么它没有显示在我的html中？只有使用“while”语句，我才能得到想要的结果：

```
while($results = mysql_fetch_array($result)) 
    {
        echo $results['filetitle'];
    } 
```

对于单个结果，此 while 语句是否必要？我的意思是，只能有一个ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:58:04.953

资源就是资源。它包含许多行。当恰好返回一行时，它不是特殊情况。

`while`如果您知道只有一个结果，则不必使用，但仍需要使用或`mysql_fetch_array`其他方法从中提取第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:58:52.080

`SELECT`语句 return `Resource ID #`，您必须使用`mysql_fetch_array, mysql_fetch_assoc`函数迭代您的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T11:56:41.070

`$result`是一个矩阵，每一行都有一个输出。因此，要访问`id` 您，首先必须指明该行。

例如，与`$result[ 0 ][ 'id' ]`.

但是，最好通过`while($results = mysql_fetch_array($result))`表达式来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:57:19.613

试试这个

```
$result[0]['id']; 
```

# java - 调用 Applet 方法 - Firefox 12 错误

> ID：16059309
> 
> 赞同：0
> 
> 时间：2013-04-17T11:54:42.337
> 
> 标签：java, javascript, firefox, applet, deployjava

我对 Firefox 12 有一个问题（较新的 Firefox 运行良好，而另一种浏览器也运行良好）。

在 Firefox 12中， **MyApplet**未定义。

在其他浏览器中**一切正常**。

在较新的 Firefox **中，一切都运行良好。**

但我也需要**在 Firefox 12 中解决这个问题。**

```
....
....
<html>
<head>
<script type="text/javascript">
    function callbackFunction() {
        ....
        MyApplet.getData(); 
            // My applet is undefined in firefox 12.
        ....
}

</script>
</head>
<body >   
     <script src="https://www.java.com/js/deployJava.js"></script>
     <script >  
     var javaVersion='1.6';
            var startApplet = function(){     
                    var attributes = {
                            id: 'MyApplet', scriptable: 'true',
                            code:'X.Y.Z.MyApplet.class',
                            archive:'<%=request.getContextPath()%>/applets/MyApplet.jar'
                        };
                        var parameters = {
                            challenge : "${serverChallenge}",
                            callbackFunction : 'callbackFunction()',
                            language: "${pageContext.response.locale.language}"
                        };
                        var version = '1.6';
                        deployJava.runApplet(attributes, parameters, version);
                       }         
                    startApplet();
      </script>

</body>
</html> 
```

是否有可能使用 JS 或类似的东西来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T08:21:56.037

这就是解决方案：更新 Firefox；

# php - 由 AJAX 请求生成的元素悬停工具提示

> ID：16059315
> 
> 赞同：3
> 
> 时间：2013-04-17T11:55:04.110
> 
> 标签：php, javascript, jquery, ajax, tooltip

我正在尝试在使用 AJAX 动态生成的容器悬停时使用[Tooltipster插件添加工具提示。](http://calebjacob.com/tooltipster/)我对此感到非常困难，并且几天来一直试图解决这个问题。注意：我没有收到任何错误，Tooltipster 正在处理非 ajax 元素。

我很欣赏有关如何实施这一点的任何建议。

提前谢谢了！

JavaScript / AJAX 调用

```
 $.ajax({
            url: "get-data.php?bestItems=1",
            dataType: "html",
            success: function(data){
                $(".best-items-container").html(data).show();
            }
        }); 
```

工具提示初始化/事件

```
 $('.best-item-option').tooltipster({ 
            custom: 'hover',
            onlyOne: true,    // allow multiple tips to be open at a time
            position: 'left',  // display the tips to the left of the element
            theme: '.my-custom-theme'
        });
        $(document).on('hover', '.best-item-option', function(){        
            $('.best-item-option').tooltipster('show');
        }); 
```

动态 html 片段 (PHP)

```
<div class="best-items-container">
    <div class="best-item-option" title="Testing Tooltip">
        <div class="hotItemName">'. $data['name'][$i].'</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:38:51.027

将您的初始化代码放在一个单独的函数中：

```
function initTooltipster(){
..the init code here....
} 
```

然后在您的回调函数（“成功”部分）中添加该行`initTooltipster()`

编辑：正如 Circadian 所提到的，这可能会有一些性能问题，但它很简单，所以只要尝试，如果一切正常，尝试将 tooltipster 绑定到特定元素......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:31:42.010

问题是尚未为动态添加的元素初始化工具提示器。

一个解决方案可能是

```
$(document).on('hover', '.best-item-option', function(){        
    $('.best-item-option').tooltipster();
    $('.best-item-option').tooltipster('show');
}); 
```

虽然如果你有很多`.best-item-option`元素，这将是低效的，因为它会再次绑定工具提示器（我认为）。最好使用 id 并将其仅添加到新元素中。

# android - 从宿主 Activity 调用 Fragment 的方法

> ID：16059316
> 
> 赞同：1
> 
> 时间：2013-04-17T11:55:05.620
> 
> 标签：android, methods, nullpointerexception

我有一个主机活动和一个片段。在这个片段中，我有一个更新方法，它从数据库中加载 AsyncTask 中的一些数据并更新 GridView。

当我从主机活动中调用此方法时，有时我会收到 NullPointerExeption，但我不知道为什么......

这是 Activity 的方法，它是一个接口：

```
@Override
public void onDataSetChange() {

    ((CalendarFragment) getSupportFragmentManager().findFragmentByTag(Constants.FRAGMENT_CALENDAR_TAG)).updateGridView();
} 
```

以及 Fragment 的更新方法：

```
public void updateGridView() {

    // Loading the new updated data
    mLoadingTask = new LoadingDataTask();
    mLoadingTask.execute((Void) null);
} 
```

这是 logcat 中的异常：

> 04-17 12:05:28.366：E/AndroidRuntime(17789)：致命异常：主要 04-17 12:05:28.366：E/AndroidRuntime(17789)：java.lang.NullPointerException 04-17 12:05:28.366： E/AndroidRuntime(17789): 在 com.sk.neverforget.MainActivity.onDataSetChange(MainActivity.java:397) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 com.sk.neverforget.fragments.DiaryFragment $StoringDataTask.onPostExecute(DiaryFragment.java:543) 04-17 12:05:28.366: E/AndroidRuntime(17789): at com.sk.neverforget.fragments.DiaryFragment$StoringDataTask.onPostExecute(DiaryFragment.java:1) 04- 17 12:05:28.366: E/AndroidRuntime(17789): 在 android.os.AsyncTask.finish(AsyncTask.java:631) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 android.os。 AsyncTask.access$600(AsyncTask.java:177) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 android.os。AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644) 04-17 12:05:28.366: E/AndroidRuntime(17789): at android.os.Handler.dispatchMessage(Handler.java:99) 04-17 12:05: 28.366: E/AndroidRuntime(17789): 在 android.os.Looper.loop(Looper.java:137) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 android.app.ActivityThread.main(ActivityThread .java:5039) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-17 12:05:28.366: E/AndroidRuntime(17789) : 在 java.lang.reflect.Method.invoke(Method.java:511) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:793) 04-17 12:05:28.366: E/AndroidRuntime(17789): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-17 12:05:28.366:E/AndroidRuntime(17789): 在 dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:08:22.707

在调用 updateGridView 之前，建议检查您的 CalendarFragment 是否为空。添加此片段时尚不清楚。它可能尚未添加或已删除。

```
@Override
public void onDataSetChange() {

CalendarFragment fragment =  ((CalendarFragment)getSupportFragmentManager().findFragmentByTag(Constants.FRAGMENT_CALENDAR_TAG));
if(fragment != null) fragment.updateGridView();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:10:58.007

我找到的解决方案不是通过标签从片段管理器中获取片段，而是使用保存片段的局部变量并从那里调用方法。

# c# - C# GridView 单元格 - 超链接

> ID：16059318
> 
> 赞同：0
> 
> 时间：2013-04-17T11:55:07.227
> 
> 标签：c#, gridview

我有这段代码可以将数据从我的数据库中获取到 Gridview：

```
public void mainSelect(DataGridView gvMain)
        {
            string sSQL = " SELECT" +
                "      tbMain.id, tbBrand.name AS brand, tbModel.name AS model, tbMain.name, tbType.name AS type, tbClub.name AS club, tbMain.serial, tbMain.porder, tbMain.link, tbUser.name AS lastEditBy, tbMain.lastEditDate" +
                          "  FROM" +
                          "      tbMain, tbBrand, tbModel, tbType, tbClub, tbUser" +
                          " WHERE" +
                          "     tbBrand.id = tbMain.brand" +
                          " AND" +
                          "     tbModel.id = tbMain.model" +
                          " AND" +
                          "     tbType.id = tbMain.type" +
                          " AND" +
                          "     tbClub.id = tbMain.club" +
                          " AND" +
                          "     tbUser.id = tbMain.lastEditBy" +
                          " ORDER BY " +
                          "     club ASC";

            sqlConnect connect = new sqlConnect();
            DataTable dt = new DataTable();
            dt = connect.getBD(sSQL);

            gvMain.DataSource = dt;
            gvMain.Columns[0].HeaderText = "ID";
            gvMain.Columns[1].HeaderText = "Brand";
            gvMain.Columns[2].HeaderText = "Model";
            gvMain.Columns[3].HeaderText = "Computer Name";
            gvMain.Columns[4].HeaderText = "Type";
            gvMain.Columns[5].HeaderText = "Site";
            gvMain.Columns[6].HeaderText = "Serial Number";
            gvMain.Columns[7].HeaderText = "Purchase Order";
            gvMain.Columns[8].HeaderText = "Invoice Link";
            gvMain.Columns[9].HeaderText = "Last Edit By";
            gvMain.Columns[10].HeaderText = "Last Edit Date"; 
```

它工作正常，我现在需要将第 8 列（发票链接）设置为链接字段，以便我可以单击并打开它。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:59:53.523

在 Gridview 中使用模板字段：

```
<asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Bind("LeadID") + Request.QueryString("type") %>'
                            Text=""></asp:HyperLink>
                    </ItemTemplate>
                </asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:59:45.043

尝试使用`DataGridViewLinkColumn`

```
DataGridViewLinkColumn link = new DataGridViewLinkColumn();
link.DataPropertyName = "InvoiceLink";
link.Name = "Invoice Link";       
dataGridView1.Columns.Add(link); 
```

将其添加到您的网格中，绑定您的网格后，您可能需要设置`AutoGenerateColumns`为 false

# c# - 嵌套在 FOR 中的 IF 语句中的 break 语句的工作

> ID：16059319
> 
> 赞同：-1
> 
> 时间：2013-04-17T11:55:08.437
> 
> 标签：c#, c#-4.0, loops, for-loop, break

考虑这段代码：

```
int f=0;
for(......)
{
    ..........
    ..........
    //some code that does not alter f and z
    ..........
    ..........
    double prev = 0; int z = 0; int y = 0;
    for (int x = 0; x < c.timesteps; x++)
    {

        for (z=0; z < outs[i].campaigns.ToArray().Length; z++)
        {
            if (x == (outs[i].outage_dates[outs[i].campaigns[z]] * 7))
            {
                f = z;
                break;
            }
        }
        Console.WriteLine("\nF=" + f);
        Console.Read();
        for (y = f; y < outs[i].campaigns.ToArray().Length; y++)
        {
            .............

            .............

            .............
        }
    }
} 
```

当我执行它时，z 的值随着 IF 条件变为真而变化。但 f 的值始终为零。当条件为真时，它应该更改为 z 的值。z 的值只能在离开最后一个循环并继续顶部循环时为零。

任何人都请告诉我这段代码有什么问题？我是否应用了一些错误的逻辑？

**更新：**

伙计们的问题已解决，一切正常。只是我无法看清楚。我在控制台上显示了每个变量的值（f 和 z 的值），我看到它工作正常。为它道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:59:45.457

> z 的值只能在离开最后一个循环并继续顶部循环时为零。

不，值`z`将`0`在内部 for 循环的第一次迭代中，如果在第一次迭代期间满足条件，`f`则将被分配`0`，并将一直保留`0`到其余部分。或者，如果条件从未满足，`f`则将保持其旧值，即再次`0`

# grails - Grails 氛围插件不适用于 Tomcat

> ID：16059320
> 
> 赞同：0
> 
> 时间：2013-04-17T11:55:08.577
> 
> 标签：grails, log4j, tomcat7, atmosphere

在我的 grails 应用程序中包含大气插件之后

（仅在 BuildConfig.groovy 中添加了以下内容）

```
compile ":atmosphere:0.4.2.3" 
```

应用程序在使用命令运行时正常启动

```
grails run-app 
```

但是如果我部署它 Tomcat 服务器（7.0.30），应用程序不会启动

我在tomcat日志中得到关注

```
log4j:ERROR Error initializing log4j: Implementing class
java.lang.IncompatibleClassChangeError: Implementing class
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
        at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.createConsoleAppender(Log4jConfig.groovy:220)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.configure(Log4jConfig.groovy:189)
        at org.codehaus.groovy.grails.plugins.log4j.Log4jConfig.initialize(Log4jConfig.groovy:72)
        at org.codehaus.groovy.grails.plugins.log4j.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:48)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
2013-04-17 15:39:57,436 INFO  [org.springframework.web.context.ContextLoader] - Root WebApplicationContext: initialization started
2013-04-17 15:39:57,449 ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:376) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:293) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:69) [grails-web-2.2.1.jar:2.2.1]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.30]
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.30]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.30]
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.30]
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.30]
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) [catalina.jar:7.0.30]
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963) [catalina.jar:7.0.30]
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600) [catalina.jar:7.0.30]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_21]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_21]
        at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_21]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_21]
2013-04-17 15:39:57,453 ERROR [StackTrace] - Full Stack Trace:
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:376) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:293) ~[spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:69) ~[grails-web-2.2.1.jar:2.2.1]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.4.RELEASE.jar:3.1.4.RELEASE]
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.30]
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.30]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.30]
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.30]
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.30]
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) [catalina.jar:7.0.30]
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963) [catalina.jar:7.0.30]
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600) [catalina.jar:7.0.30]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_21]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_21]
        at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_21]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_21]
2013-04-17 15:39:57,454 ERROR [StackTrace] - Full Stack Trace:
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_21]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_21]
        at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_21]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_21]
2013-04-17 15:39:57,454 ERROR [org.codehaus.groovy.grails.web.context.GrailsContextLoader] - Error initializing the application: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_21]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_21]
        at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_21]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_21]
2013-04-17 15:39:57,455 ERROR [org.codehaus.groovy.grails.web.context.GrailsContextLoader] - Error initializing Grails: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_21]
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_21]
        at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_21]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_21]
        at java.lang.Thread.run(Thread.java:722) [na:1.7.0_21]
Apr 17, 2013 3:39:57 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart 
```

知道如何解决问题吗？

# android - 当值作为数组列表传递并使用 for 循环存储时，如何使表中的第一个 feild(id) 成为自动增量？

> ID：16059324
> 
> 赞同：0
> 
> 时间：2013-04-17T11:55:22.490
> 
> 标签：android, sqlite, arraylist, auto-increment

我正在创建一个 android 应用程序，我需要在数据库中存储大量数据。

由于 m 使用 for 循环存储值（因为 arraylist 是从我的活动中传递的），所以所有值都按顺序存储。

问题是我希望第一个值作为 id 将在数据库中自动递增。如果我在创建语句中将 id 作为自动增量，则此数据库代码不起作用并且我的表为空。谁能告诉我如何进行并将我的数据库表中的第一个字段作为自动增量？？？？这是***insertAllValues 函数***代码

```
public void insertAllValues(ArrayList<String> data) {
    openOrCreateDatabase();
    createAllValuesTable();
    String insertString = "insert into " + AllValuesTable
            + " Values(";
    String inString = "";
    for (int i =0; i < data.size(); i++) {

        inString = inString + "\"" + data.get(i) + "\",";

    }
    inString = inString.substring(0, inString.length() - 1);
    insertString = insertString + inString + ");";
    System.out.println("** insert value ** " + insertString);
    db.execSQL(insertString);

    closeDatabase();
} 
```

创建语句

```
db.execSQL("CREATE TABLE IF NOT EXISTS "
            + AllValuesTable
            + "(appln_date VARCHAR,appln_no VARCHAR,rupees VARCHAR,tenure VARCHAR,asset VARCHAR," +
            "app_salutation VARCHAR,app_fname VARCHAR, app_mname VARCHAR, app_lname VARCHAR,app_door VARCHAR,app_street VARCHAR,app_building VARCHAR,app_area VARCHAR,app_post VARCHAR,app_tehsil VARCHAR,app_district VARCHAR,app_state VARCHAR,app_landmark VARCHAR,app_pincode VARCHAR,app_landline VARCHAR, app_mobileno VARCHAR,app_incorporation VARCHAR,app_date VARCHAR,app_constitution VARCHAR," +
            "cons_Salutation VARCHAR,cons_Signatoryname VARCHAR,cons_Addrs1 VARCHAR,cons_Tehsiltaluka VARCHAR,cons_District1 VARCHAR,cons_State1 VARCHAR,cons_Pincode VARCHAR,cons_Landmark1 VARCHAR,cons_Mobile1 VARCHAR,cons_Stdcode VARCHAR,cons_Landline1 VARCHAR,app_occupation VARCHAR,app_education VARCHAR,app_ccity VARCHAR,app_cyear VARCHAR,app_maritalstatus VARCHAR,app_gender VARCHAR,app_father_spouse VARCHAR,app_fsfname VARCHAR,app_fslname VARCHAR," +
            "app_idproof1 VARCHAR,app_idetail1 VARCHAR,app_idproof2 VARCHAR,app_idetail2 VARCHAR,app_addproof1 VARCHAR,app_addetail1 VARCHAR,app_addproof2 VARCHAR,app_addetail2 VARCHAR,app_email VARCHAR,app_propstatus VARCHAR,app_resistyle VARCHAR,app_propdetail VARCHAR,app_detail VARCHAR,app_rupees VARCHAR,app_type1 VARCHAR,app_amount1 VARCHAR,app_type2 VARCHAR,app_amount2 VARCHAR,app_type3 VARCHAR,app_amount3 VARCHAR,app_totalamt VARCHAR,app_permanent VARCHAR," +
            "apper_Addrsline1 VARCHAR,apper_Tehsiltal VARCHAR,apper_District VARCHAR,apper_State VARCHAR,apper_Pincode VARCHAR," +
            "guarantor VARCHAR, " +
            "gu_salutation VARCHAR,gu_fname VARCHAR, gu_mname VARCHAR, gu_lname VARCHAR,gu_door VARCHAR,gu_street VARCHAR,gu_building VARCHAR,gu_area VARCHAR,gu_post VARCHAR,gu_tehsil VARCHAR,gu_district VARCHAR,gu_state VARCHAR,gu_landmark VARCHAR,gu_pincode VARCHAR,gu_landline VARCHAR, gu_mobileno VARCHAR,gu_incorporation VARCHAR,gu_date VARCHAR,gu_constitution VARCHAR,gu_occupation VARCHAR,gu_education VARCHAR,gu_ccity VARCHAR,gu_cyear VARCHAR,gu_maritalstatus VARCHAR,gu_gender VARCHAR,gu_father_spouse VARCHAR,gu_fsfname VARCHAR,gu_fslname VARCHAR," +
            "gu_idproof1 VARCHAR,gu_idetail1 VARCHAR,gu_idproof2 VARCHAR,gu_idetail2 VARCHAR,gu_addproof1 VARCHAR,gu_addetail1 VARCHAR,gu_addproof2 VARCHAR,gu_addetail2 VARCHAR,gu_email VARCHAR,gu_propstatus VARCHAR,gu_resistyle VARCHAR,gu_propdetail VARCHAR,gu_detail VARCHAR,gu_rupees VARCHAR,gu_type1 VARCHAR,gu_amount1 VARCHAR,gu_type2 VARCHAR,gu_amount2 VARCHAR,gu_type3 VARCHAR,gu_amount3 VARCHAR,gu_totalamt VARCHAR,gu_permanent VARCHAR,"+
            "ref_cusagreeno VARCHAR,ref_refname VARCHAR,ref_refaddrs VARCHAR,ref_refcity VARCHAR,ref_refpin VARCHAR,ref_refmob VARCHAR,ref_refrelation VARCHAR,ref_cusagreeno2 VARCHAR,ref_refname2 VARCHAR,ref_refaddrs2 VARCHAR,ref_refcity2 VARCHAR,ref_refpin2 VARCHAR,ref_refmob2 VARCHAR,ref_refrelation2 VARCHAR," +
            "coapplicant VARCHAR,"+
            "co_salutation VARCHAR,co_fname VARCHAR, co_mname VARCHAR, co_lname VARCHAR,co_door VARCHAR,co_street VARCHAR,co_building VARCHAR,co_area VARCHAR,co_post VARCHAR,co_tehsil VARCHAR,co_district VARCHAR,co_state VARCHAR,co_landmark VARCHAR,co_pincode VARCHAR,co_landline VARCHAR, co_mobileno VARCHAR,co_incorporation VARCHAR,co_date VARCHAR,co_constitution VARCHAR,co_occupation VARCHAR,co_education VARCHAR,co_ccity VARCHAR,co_cyear VARCHAR,co_maritalstatus VARCHAR,co_gender VARCHAR,co_father_spouse VARCHAR,co_fsfname VARCHAR,co_fslname VARCHAR," +
            "co_idproof1 VARCHAR,co_idetail1 VARCHAR,co_idproof2 VARCHAR,co_idetail2 VARCHAR,co_addproof1 VARCHAR,co_addetail1 VARCHAR,co_addproof2 VARCHAR,co_addetail2 VARCHAR,co_email VARCHAR,co_propstatus VARCHAR,co_resistyle VARCHAR,co_propdetail VARCHAR,co_detail VARCHAR,co_rupees VARCHAR,co_type1 VARCHAR,co_amount1 VARCHAR,co_type2 VARCHAR,co_amount2 VARCHAR,co_type3 VARCHAR,co_amount3 VARCHAR,co_totalamt VARCHAR,co_permanent VARCHAR,"+
            "asset_categry VARCHAR,asset_description VARCHAR,asset_type VARCHAR,manufacturer VARCHAR,asset_make VARCHAR,asset_model VARCHAR,asset_suppliername VARCHAR,asset_cost VARCHAR,asset_attachmnt VARCHAR,asset_total VARCHAR,asset_discount VARCHAR,asset_margin VARCHAR,asset_margin_total VARCHAR,asset_finance VARCHAR,asset_fin_attachmnt VARCHAR,asset_fin_total VARCHAR," +
            "off_Applcname VARCHAR,off_Addrstype VARCHAR,off_Employee VARCHAR,off_Psnem VARCHAR,off_Branch VARCHAR,off_Displaydate VARCHAR,off_Newexisting VARCHAR,off_Clientid VARCHAR,off_Schmcode VARCHAR,off_Agreeno VARCHAR,off_Promoschm VARCHAR,off_Custcategry VARCHAR,off_Chanelcode VARCHAR,off_Leadid VARCHAR,off_Inchargnam VARCHAR,off_Inchargeps VARCHAR,off_Detailsource VARCHAR,off_Retailasonam VARCHAR,off_Retailasonem VARCHAR,off_Loanpurp VARCHAR,off_Accoffnam VARCHAR,off_Accoffps VARCHAR,off_Product VARCHAR,off_Enduse VARCHAR);"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:33:29.847

将自动增量列添加到表模式后，更改 INSERT 语句，使其提及列和值。不要提及自动增量列。也就是说，您的 INSERT 需要使用这种形式：

```
INSERT INTO table_name (column1, column2, column3,...) VALUES (value1, value2, value3,...) 
```

在您的情况下，column1 将是 appln_date。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:42:05.127

你的桌子似乎有点大——可能想把它拆开，但这是一个旁白。您可以使用[列的默认值](http://www.sqlite.org/lang_insert.html)来使您的插入语句也减少键入的烦人，但我强烈建议重新架构您的架构。

SQLite 在每个表中都有一个内部[rowId](http://www.sqlite.org/autoinc.html)列，可以用作您的主键，而无需声明为主键，并且在同一页面上概述了其他几种策略。

# compiler-errors - STS 无法识别构建错误

> ID：16059326
> 
> 赞同：0
> 
> 时间：2013-04-17T11:55:24.030
> 
> 标签：compiler-errors, sts-springsourcetoolsuite

我有两个 Spring MVC 项目（*B*和*C*），它们依赖于一个公共类库（项目*A*）。所有三个项目都在 SpringSource Tool Suite 3.2.0.RELEASE 中打开。

如果我在项目*A*中编辑一个方法，以便修改对它的所有引用（例如通过添加方法参数）并保存其文件，STS 会立即显示项目*B*的错误（在问题视图中列出错误）。但是，项目*C中***仍未检测到**错误。*当我部署应用程序时，由于C*中的这些未检测到的错误而发生运行时错误。

 ***B*和*C*在→ →和中都引用*A。*`Project right click``Properties``Deployment Assembly``Java Build Path`

这个问题的原因可能是什么？**

# asp.net-mvc-3 - 表单中的复选框数组

> ID：16059332
> 
> 赞同：1
> 
> 时间：2013-04-17T11:55:39.063
> 
> 标签：asp.net-mvc-3, checkbox

我有一个要在创建视图中使用的视图模型：

**视图模型**

```
public class ReportViewModel
{
    public int ID { get; set; }
    [Display(Name = "Platform")]
    public string Platform { get; set; }
    [Display(Name = "Logo")]
    public HttpPostedFileBase Logo { get; set; }

} 
```

**创建视图**

```
@model HPRWT.ViewModels.ReportViewModel
@using (Html.BeginForm("Create", "Report", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<div class="editor-label">
            @Html.LabelFor(model => model.Platform )

            @Html.EditorFor(model => model.Platform )
            @Html.ValidationMessageFor(model => model.Platform)
        </div>
<div class="editor-label">
            @Html.LabelFor(model => model.Logo)

            <input type="file" id="Logo" name="Logo" />
        </div>
} 
```

这部作品完美。但现在我需要一系列复选框（7x24）来获得空闲时间（7 天，24 小时）。我有一个 id 数组（我需要一个已定义的 id，因为我使用 jquery）。在创建视图中：

```
@for(int i = 1; i < labels.Length; i++)
        {
            <tr>
                <td>@labels[i][0]</td>@for(int j = 1; j < labels[i].Length; j++)
                    {
                        <td><div><input type="checkbox" id="@ids[i][j]" /><label for="@ids[i][j]"></label></div></td>
                    } 
```

我的 id 就像 R02C00 （行的 R + 2 位数的行数 + C（列）+ 列数（2 位数）。我用以下方法生成它们：

```
for (int i = 1; i < 8; i++)
                for (int j = 1; j < 25; j++)
                    ids[i][j] = "R" + i.ToString("00") + "C" + (j-1).ToString("00"); 
```

这也很有效。现在我的问题是如何获得复选框值。

**控制器**

```
[HttpPost]
        public ActionResult Create(ReportViewModel rvm)
        {
            if (ModelState.IsValid)
            {
                rdb.Reports.Add(CreateReport(rvm));
                rdb.SaveChanges();
                return RedirectToAction("Index");  
            }

            return View(rvm);
        }

// Create a report from a reportviewmodel
        private Report CreateReport(ReportViewModel rvm)
        {
            Report report = new Report();

            // Platform
            string platform = rvm.Platform;
            report.Platform = platform ;
// Logo
            HttpPostedFileBase inputFile = rvm.InputFile; // Some code to get the path

return report;
} 
```

如何获取复选框值？如果我在reportviewmodel 中添加一个bool [] []，有没有办法做一个@Html.Checkbox？（如果我必须在 jquery 中更改 ids 名称，我不介意，不是必须拥有像 R01C01 这样的 id ......只有 jquery 中的 ids 与 html 相同）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:13:10.267

为什么不使用视图模型？

```
public class FreeHourViewModel
{
    public string Label { get; set; }
    public bool Selected { get; set; }
}

public class ReportViewModel
{
    public ReportViewModel()
    {
        this.FreeHours = Enumerable
            .Range(1, 7)
            .Select(day => 
                Enumerable.Range(1, 24).Select(hour => new FreeHourViewModel
                {
                    Label = string.Format("day: {0}, hour: {1}", day, hour)
                }
            ).ToArray()
        ).ToArray();
    }

    public int ID { get; set; }
    [Display(Name = "Platform")]
    public string Platform { get; set; }
    [Display(Name = "Logo")]
    public HttpPostedFileBase Logo { get; set; }

    public FreeHourViewModel[][] FreeHours { get; set; }
} 
```

接着：

```
@for (int i = 0; i < Model.FreeHours.Length; i++)
{
    for (int j = 0; j < Model.FreeHours[i].Length; j++)
    {
        @Html.LabelFor(x => x.FreeHours[i][j].Selected, Model.FreeHours[i][j].Label)
        @Html.CheckBoxFor(x => x.FreeHours[i][j].Selected)
    }
} 
```

而当提交表单时，由于您使用了真实的视图模型，模型绑定将按预期工作。此外，您不需要任何 jQuery 来生成这些复选框。强类型的助手，例如`Html.CheckBoxFor`是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:19:03.747

拥有一个与复选框相关的强类型视图怎么样？

```
public class ReportViewModel
{
    public ReportViewModel()
    {
        Days = new List<Day>();
    }
    public int ID { get; set; }
    [Display(Name = "Platform")]
    public string Platform { get; set; }
    [Display(Name = "Logo")]
    public HttpPostedFileBase Logo { get; set; }
    public IList<Day> Days { get; set; }
}
public class Hour
{
    public int Id { get; set; }
    public bool Selected { get; set; }
}
public class Day
{
    public Day()
    {
        Hours = new List<Hour>();
    }
    public int Id { get; set; }
    public bool Selected { get; set; }
    public IList<Hour> Hours { get; set; }
} 
```

然后你返回一个像这样的视图：

```
foreach (var d in Enum.GetValues(typeof(DayOfWeek)))
{
    var day = new Day { Id = (int)d };
    for (var i = 0; i < 25; i++)
    {
        day.Hours.Add(new Hour { Id = i });
    }
    model.Days.Add(day);
}
return View(model); 
```

并将其添加到您的视图中：

```
for (var i = 0; i < 7; i++)
{
    <div id="days">            
        <ul>
            @for (var j = 0; j < 24; j++)
            {
                <li>@Html.CheckBoxFor(m=>Model.Days[i].Hours[j].Selected)</li>
            }
        </ul>  
    </div>
} 
```

现在，当您收到输入时，您有一个 bool 值数组，其中您有一种`Ids`，即 0-6 天和 0-23 小时。您可以轻松确定选择了特定日期的哪个小时。

当然，您必须用我的建议填写缺失的部分，例如显示每个复选框的标签。

# security - 如果有人知道mysql数据库中的表名或字段名，会有什么后果？

> ID：16059336
> 
> 赞同：0
> 
> 时间：2013-04-17T11:55:56.293
> 
> 标签：security

如果有人知道 mysql 数据库中的表名或字段名，会有什么后果？而且不知道管理员的密码和用户名，会不会很容易被攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:32:00.723

你似乎在问一个安全问题。对于面向公共网络的应用程序，您需要深入实践安全性。

回答您的问题：不。尝试通过混淆列名和表名来保护数据库通常不用作深度安全性的一部分。

您的 Web 应用程序应该被构建以避免 SQL 注入和其他漏洞。这是一个很大的话题，你可以查一下。

您的 MySQL 数据库机器本身不应该在公共网络上可见；它应该在您的 Web 数据中心的内部网络上。这使脚本小子无法使用他们自己的 MySQL 客户端软件找到它或连接到它。

Web 应用程序访问 MySQL 数据库的用户名和密码应保密。很难将这些完全保密，因为您的网络应用程序必须经常使用它们。

Web 应用程序的用户名应该只允许访问它需要完成其工作的 MySQL 功能。可以拒绝 MySQL 用户的特权，例如创建视图、删除表或创建存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:36:33.943

没有真正的安全风险，因为他们将无法进入您的数据库。如果他们可以进入您的数据库，那么他们不需要知道表名，因为他们可以从数据库本身检索它。因此，最重要的是确保您的数据库安全，使用强用户名/密码组合，并限制对不同配置文件的访问。确保您的网站对于 SQL 注入等是安全的。

# jqgrid - 使一行粗体，改变背景颜色 - dwr

> ID：16059338
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:00.993
> 
> 标签：jqgrid, dwr

我有一个从 dwr 调用加载的 jqgrid。这是一个动态表。在 POJO 中，我设置了 3 个状态并生成动态复选框。

这是我的 pojo 代码。

```
 private String cBox;

   public String cBox()
   {

    if (style() == D)
    {
        return i l create checkbox here;
    }
    else if (style() == E)
    {
        return checkbox will be created ;
    }
    else if (getStatusFlag() == F)
    {
        return checkbox will be created;
    }

    return cBox;
} 
```

我像这样加载jqgrid。

```
colNames : ['Code no.', 'Title' ],
                colModel : [{
                    name : 'code_no',
                    index : 'code_no',
                    width : '100%',
                    sorttype : 'text',
                    align : 'left'
                },
                                    {
                    name : 'title',
                    index : 'title',
                    width : '100%',
                    sorttype : 'text',
                    align : 'left'
                }] 
```

如果样式为 D，我想使整行加粗，并且当颜色为 E 时，我想使行的背景颜色为蓝色。我应该如何自定义 jqgrid 行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:55:48.747

以下函数将检查每个列单元格值，如果 TestValue 匹配，则将类添加到行中。

```
 rowattr: function (rd) {
           if (rd.ColumnName == TestValue) { return {"class": "RowBoldClass"}; }//if
    }, 
```

和匹配的类

```
RowBoldClass { font-weight:bold; ..... 
```

# javascript - Ajax 开始事件问题

> ID：16059339
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:01.803
> 
> 标签：javascript, ajax, jquery

我试图在我的页面执行 ajax 请求时显示进度条。

我有一个 div，里面有一个图像，我想在 ajaxStart 事件中显示它。问题是 img 仅在 ajaxStart 事件完成时才显示出来。但是，警报会在 ajax 请求之前触发。

```
 $(document).ajaxStart(function () {
            alert("test");

            document.getElementById('LoadingDiv').style.visibility = "visible";

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:01:36.820

```
 $.ajax({
                            url: url,
                            async: true,
                            dataType: 'json',
                            success: function (data) { 
```

发布到早期将 async 更改为 true 并且现在可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:02:17.213

您可以像这样显示/隐藏加载微调器：

```
/*LOADING SPINNER*/
jQuery.ajaxSetup({
  beforeSend: function() {
     $('#loadingDiv').show()
  },
  complete: function(){
     $('#loadingDiv').hide()
  },
  success: function() {}
}); 
```

`#loadingDiv`仅包含一个动画图像。该`ajaxSetup`方法为未来的 Ajax 请求设置默认值。这意味着每次`ajax`拨打电话时都会显示此加载指示器。

# garbage-collection - 使用 NSThread 观察到泄漏

> ID：16059340
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:03.240
> 
> 标签：garbage-collection, objective-c++

当我们在 XCode4 中为 IOS 开发一些应用程序时，我们偶然发现了一个奇怪的问题：

在 NSThread 中，我们在无限循环中定期更新 GUI 元素（图像）。为了更新它，我们在循环中创建了一个后台线程，每 0.1 秒处理一次更新操作。另一方面，当我们查看 Profile View 时，有少量内存（恒定 10kb）在 10 秒内泄漏。

然后我们只是切换到 performSelectorOnMainThread 进行 NSThread 中无限循环内的组件更新操作，泄漏就消失了。

我想知道这是否是一个必须避免的设计错误，是否还有其他与垃圾收集器相关的基本陷阱。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:06:07.217

这肯定与任何类型的 GC 无关。iOS 上的 Objective-C 没有垃圾收集。

另外，是的，这是一个巨大的设计错误。一个后台线程，里面有一个无限循环，里面经常调用主线程，呵呵……

最好将更新坚持到运行循环，仅从主线程调用 UIKit，如果您**确实**需要定期调用该方法，请使用 GCD（尽管您可能实际上并不需要它，这也应该重新设计，但很难在没有上下文的情况下告诉。）

另外不要忘记为您调度的每个线程创建一个自动释放池，因为默认情况下，它们不会自动处理（即使在 ARC 下也不会）。

# css - 对齐图标和提要标题

> ID：16059341
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:04.693
> 
> 标签：css, vertical-alignment

我正在尝试将图像与 对齐，但我无法让标题环绕图像图标。我在这里有一个屏幕截图：http: [//instagram.com/p/YNGBzrtAs8/](http://instagram.com/p/YNGBzrtAs8/)

我的 CSS 代码一团糟，因为我一直在尝试一切，而且变得一团糟。这是当前的混乱状态：

```
#deck-sub .news-feed { float: left; width: 90%; padding: 5%; margin: 0 0 15px 0; }
    #deck-sub h1 { background: none; font: bold 2.0em Arial, Helvetica, sans-serif; color: #006586; margin: 0 0 -8px 0; }
    #deck-sub .news-feed h2 a {  color: #006586; text-decoration: none; font-size: 1.2em !important; margin: -33px 0 0 0;}
    #deck-sub .news-feed ul {vertical-align: middle !important; background: none; padding: 5px 0 0 0; list-style: none; }
    #deck-sub .news-feed ul li { vertical-align: middle !important; width: 100%; padding: 5px 0 5px 0; margin: 5px 0 0 0;}
    #deck-sub .news-feed ul li a  { vertical-align: middle !important; width: 100%; font: 0.8em/1.1em Arial, Helvetica, sans-serif; color: #555 !important; text-decoration: none; padding: 0px 0 0 0; margin: -5px 0 0 0; }
    #deck-sub .news-feed ul li a:hover { background: none; color: #009fc7 !important; }
    #deck-sub .new-feed ul li img {  vertical-align: middle !important;  }
    #deck-sub .sfnewsListItem { vertical-align: middle !important; background: #ccc; }
    #deck-sub .sfnewsMetaInfo { vertical-align: middle !important; padding: 0px; margin: 0px; background: #444;} 
```

任何帮助将不胜感激。我以前遇到过这种情况，但我的技巧在这种情况下不起作用。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:48:10.053

我不确定您将标题环绕是什么意思...但我假设您希望图像和标题彼此相邻？垂直对齐我不相信为此工作得很好。

最好的选择是将图标作为背景删除，然后将其作为背景图像放入 CSS 中。这样做使您能够将其定位到像素。

它还可以让您将这两个新闻\事件图标拆分到一个文件中以提供更少的资源。

[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

干杯! 史蒂夫

# glassfish-3 - 使用 ejb-jar.xml 配置消息驱动 Bean

> ID：16059346
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:19.797
> 
> 标签：glassfish-3, message-driven-bean, ejb-jar.xml

我正在尝试使用 ejb-jar 配置消息驱动 Bean。我正在使用 EJB 3.1、Netbeans 7.3 和 Glassfish 3.1.2，但我遇到了异常：

部署应用程序时出现异常：org.xml.sax.SAXParseException；行号：8；列号：29；档案 [类] 中的部署描述符文件 META-INF/ejb-jar.xml。必须声明元素类型“messaging-type”。有关详细信息，请参阅 server.log。

我在哪里犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:46:59.560

您说您使用的是 Glassfish 3.1.2，但您`ejb-jar-xml`使用`ejb-jar_2_0.dtd`. 相反，您必须对 Glassfish 3.1.2 使用 XSD 验证。这是 xsd：http: [//java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd](http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd)

# jquery - jQuery Mobile 对话框按钮占据了所有空间

> ID：16059347
> 
> 赞同：2
> 
> 时间：2013-04-17T11:56:20.887
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-fieldset, jquery-mobile-dialog

我在 jQuery Mobile 1.3.1 中设置了一个带有表单的对话框，提交表单的按钮占用了所有可用空间。

最后有按钮： ![在此处输入图像描述](https://i.stack.imgur.com/nN5lA.png)

如您所见，它涵盖了所有内容。

没有它： ![在此处输入图像描述](https://i.stack.imgur.com/lmfBX.png)

这里没问题，但我需要按钮来提交数据。

我尝试使用 jsFiddle 来重现我的问题，但我不知道在这种情况下如何设置示例，我需要两页。对不起。

这是用于构建对话框的代码：

```
<!DOCTYPE html>
<html lang="es">
<body id="derp" data-role="page">
    <header id="header" data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="c">
         <h1 id="titulo_header">Aaaaa </h1>

    </header>
    <div data-role="content" data-theme="c">
        <form method="post" action="#">
            <fieldset data-role="controlgroup" data-mini="true" id="jv_add_jugadores_local">
                <legend>Aaaaa Aaaaa AaaaaaaAaaaa Aaaaa AaaaaaaAaaaa Aaaaa Aaaaaaa:</legend>
                <label>01 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="2">
                </label>
                <label>02 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="9341">
                </label>
                <label>05 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="4">
                </label>
                <label>09 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="336">
                </label>
                <label>13 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="506">
                </label>
            </fieldset>
            <fieldset data-role="controlgroup" data-mini="true" id="jv_add_jugadores_visitante">
                <legend>Aaaaa Aaaaa AaaaaaaAaaaa Aaaaa AaaaaaaAaaaa Aaaaa Aaaaaaa:</legend>
                <label>03 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="9242">
                </label>
                <label>09 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="1117">
                </label>
                <label>11 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="464">
                </label>
                <label>14 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="732">
                </label>
                <label>18 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="9305">
                </label>
                <label>22 -- Aaaaa Aaaaa Aaaaaaa
                    <input type="checkbox" name="eLoc[]" value="9241">
                </label>
            </fieldset>
            <button type="submit" data-icon="check" id="add_jugadores">Añadir</button>
        </form>
    </div>
</body>
</html> 
```

**编辑：** 这是我用来设置对话框样式的唯一 CSS：

```
.ui-dialog-contain {
    max-width: 900px !important;
} 
```

这就是我期望得到的（我编辑了图像，所以这不是解决方案） ![在此处输入图像描述](https://i.stack.imgur.com/Vibob.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:15:26.923

这是一个工作示例：http: [//jsfiddle.net/Gajotres/ZNbXx/](http://jsfiddle.net/Gajotres/ZNbXx/)

但最好使用下面的示例，只需将其复制到 HTML 文件中并进行测试。

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQM Complex Demo</title>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
        <style>
            .ui-dialog-contain {
                max-width: 900px !important;
            }       

            #jv_add_jugadores_local {
                padding-right: 5px !important;
            }

            #jv_add_jugadores_visitante {
                padding-left: 5px !important;           
            }
        </style>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
        <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>       
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>   
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="a" data-role="header">
                <h3>
                    First Page
                </h3>
                <a href="#second" class="ui-btn-right">Next</a>
            </div>

            <div data-role="content">
                <a href="#derp" data-rel="dialog" data-position-to="window" data-role="button" id="farmer_family_member">Show Dialog</a>
            </div>

            <div data-theme="a" data-role="footer" data-position="fixed">

            </div>
        </div>    

        <div id="derp" data-role="page">
            <header id="header" data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="c">
                 <h1 id="titulo_header">Aaaaa </h1>

            </header>
            <div data-role="content" data-theme="c">
                <form method="post" action="#">
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            <fieldset data-role="controlgroup" data-mini="true" id="jv_add_jugadores_local">
                                <legend>Aaaaa Aaaaa AaaaaaaAaaaa Aaaaa AaaaaaaAaaaa Aaaaa Aaaaaaa:</legend>
                                <label>01 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="2">
                                </label>
                                <label>02 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="9341">
                                </label>
                                <label>05 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="4">
                                </label>
                                <label>09 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="336">
                                </label>
                                <label>13 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="506">
                                </label>
                            </fieldset>                     
                        </div>
                        <div class="ui-block-b">
                            <fieldset data-role="controlgroup" data-mini="true" id="jv_add_jugadores_visitante">
                                <legend>Aaaaa Aaaaa AaaaaaaAaaaa Aaaaa AaaaaaaAaaaa Aaaaa Aaaaaaa:</legend>
                                <label>03 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="9242">
                                </label>
                                <label>09 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="1117">
                                </label>
                                <label>11 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="464">
                                </label>
                                <label>14 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="732">
                                </label>
                                <label>18 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="9305">
                                </label>
                                <label>22 -- Aaaaa Aaaaa Aaaaaaa
                                    <input type="checkbox" name="eLoc[]" value="9241">
                                </label>
                            </fieldset>                     
                        </div>
                    </div><!-- /grid-a -->              
                    <button type="submit" data-icon="check" id="add_jugadores">Anadir</button>
                </form>
            </div>
        </div>              
    </body>
</html> 
```

# c# - 如何在 C# 中更新我的 gridView.ItemsSource

> ID：16059349
> 
> 赞同：0
> 
> 时间：2013-04-17T11:56:24.990
> 
> 标签：c#, windows-runtime, windows-store-apps

我对 a`GridView`和 the有疑问`ItemsSource`

我的代码如下所示：

```
public ObservableCollection<MyClass> MyData = new ObservableCollection<MyClass>();
...
gridView.ItemsSource = MyData; 
```

当我添加一些东西时，`MyData`我会立即在网格中看到它。但是当我编辑类型的元素时`MyClass`，`MyData`我看不到网格中的变化。

如何刷新网格，以便我还可以看到对`MyClass`项目所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:24:24.450

`ObservableCollection`item 必须实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.inotifypropertychanged.aspx)，这就是`MyClass`您的情况。

看这里

[如何在 WinRT 中使用 INotifyPropertyChanged？](https://stackoverflow.com/questions/12532285/how-do-i-use-inotifypropertychanged-in-winrt)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T12:00:11.227

一种选择是通过通知更改来通知数据网格。类似于以下 [链接](https://stackoverflow.com/questions/5529829/c-sharp-datagridview-binding-to-a-class-not-updating)

# backbone.js - 重新加载后主干布局管理器子视图的事件不起作用

> ID：16059359
> 
> 赞同：2
> 
> 时间：2013-04-17T11:56:46.507
> 
> 标签：backbone.js, backbone-events, backbone-boilerplate, backbone-layout-manager

我正在使用主干布局管理器样板。不幸的是，发生了一个非常令人沮丧的错误。我喜欢将项目列表渲染为由 insertView 函数插入的子视图。在第一次加载时一切正常。但是在重新加载后，单击事件不再起作用:(。我已经尝试在 TableItem 视图上手动调用 delegateEvents() 但没有任何改变。我希望任何人都可以给我一个线索。

```
App.Views.Item = Backbone.View.extend({
  template: "templates/item",
  tagName: "li",
  events: {
    "click .applyButton" : "apply",
    "click .viewDetailsButton" : "showDetail"
  },
  serialize: function() {
    return { table : this.model.toJSON() };
  },
  apply: function(ev) {
    ev.preventDefault();
    alert("apply button clicked");
  },
  showDetail: function(ev) {
    ev.preventDefault();
    var id = this.model.get("_id");
    app.router.navigate("#events/"+ id, {trigger : true})
  }
});

/*
 * List View
 */

 App.Views.List = Backbone.View.extend({
   template: "templates/list",

   tagNam: "ul",
   className: "tableList",

   beforeRender: function() {
     var events = this.model.get("userEvents").get("hosting");

     events.each(function(model) {
       this.insertView(new App.Views.Item({ model : model }));
     }, this);
   },

   serialize: function() {
     return {};
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:47:50.710

我认为当 layoutmanager 删除视图时，您可能希望`cleanup`在 Item 视图上添加一个函数到事件中。`undelegate`我不知道这是否会解决您的问题，但这似乎是一种很好的做法。

当您说*after a reload*时，您的意思是使用浏览器重新加载按钮重新加载页面吗？如果是这样，你如何让它首先工作？

如果您可以提供您的设置的 jsfiddle，或者将我们指向一个 repo 以便我们可以在我们的机器上测试它，那将会有所帮助。确保包含路由器，以便我们查看视图和包含它的布局是如何初始化的。

# driver - 单个carl9170设备驱动模块如何处理2个无线接口

> ID：16059360
> 
> 赞同：1
> 
> 时间：2013-04-17T11:56:54.260
> 
> 标签：driver, device

我想了解一个设备驱动模块在 linux 内核中的性能。在这种情况下，我在 linux 中使用**carl9170**设备驱动程序。

1.  如果我使用两个物理接口，单模块carl9170如何处理2个不同的物理接口？

    因为到目前为止，我知道这 2 个物理接口将创建 2 个实例并为每个实例使用不同的数据包缓冲区，但只使用单个 carl9170 模块。所以这让我很困惑。

2.  我可以在linux内核源代码中找到关于这种处理方法的哪个文件（与carl9170设备驱动程序有关）？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:04:11.270

对于2，看一下文件夹：

`drivers/net/wireless/ath/carl9170/`

该文件夹位于您的内核源代码目录下。它包含驱动程序的所有来源。

对于 1：

这几乎就是面向对象编程中类的工作方式：对象如何知道它必须使用的数据实例？指针引用正确的`this`内存数据。

看看文件`drivers/net/wireless/ath/carl9170/carl9170.h`。驱动程序导出的每个函数都在此文件中声明。请注意，每个函数的第一个参数都有对`struct ar9170`数据类型的引用。这正是驱动程序必须使用的数据集。它指定了驱动程序需要了解的有关设备及其状态的所有信息，因为设备连接的 USB 总线地址，设备的状态，如电源、连接状态和驱动程序本身需要的任何其他数据，以便保持设备正常工作。

请注意，这是驱动程序内部数据的想法。内核有自己的一组数据来保持驱动程序、设备和内核本身的工作。

看一下[carl9170.h](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/net/wireless/ath/carl9170/carl9170.h?id=refs/tags/v3.8.8)的 546 行。这是函数声明开始的地方。该文件从内核 3.8.8 开始。

就像在面向对象编程中一样，您可以根据需要分配尽可能多的类实例，内核将根据需要分配尽可能多`ar9170`的结构，一个引用每个设备。

设备id可以在`/sys/class/net`目录下获取。连接到您计算机的每个网络设备都有一个软链接。此链接会将设备指向以下内容：

```
$ ls -l eth0
../../devices/pci0000:00/0000:00:04.0/0000:02:00.0/net/eth0 
```

是`pci0000:00`公共汽车。我`0000:00:04.0`相信是总线地址。最后，`0000:02:00.0`是设备ID。Afaik，每个注册的设备都遵循相同的逻辑。

最后，如果您有两个`carl9170`设备，它们都将在目录下，`/sys/class/net`但可能其中一个将被命名`wifi0`，另一个将被命名为`wifi1`. 此外，它们中的每一个都将指向不同的设备（使用命令检查`ls -l /sys/class/net`）。

我只想指出，在解释中我没有使用任何无线网卡。所以我不确定无线网卡是否显示在下方`/sys/class/net`。无论如何，这将是非常相似的东西，比如`/sys/class/wireless`.

# git - gitignored 时已经符号链接的文件可以正常工作吗？

> ID：16059361
> 
> 赞同：1
> 
> 时间：2013-04-17T11:56:55.487
> 
> 标签：git, symlink

我在生产的共享目录中创建了一个符号链接。如果我将此文件设置为 gitignore 并将代码推送到 github master 上，它现在将不可见。所以请告诉我该文件的符号链接是否可以正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:36:11.150

符号链接仍将在本地工作（在您的本地仓库中）

而且它根本不会在您的 github 存储库中，因为它被忽略了：忽略符号链接不会影响其功能。

# php - 在块内调用 Javascript 函数

> ID：16059365
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:09.497
> 
> 标签：php, javascript, ajax, magento-1.7

我想调用块模板文件中的 JavaScript 函数。该块具有以下按钮。对于该按钮的 onclick 事件，我想调用该 JavaScript 函数。怎么做？

块按钮如下。

```
protected function _prepareLayout()
    {
        $onclick = "submitAndReloadArea($('order_history_block').parentNode, '".$this->getSubmitUrl()."')";
        $button = $this->getLayout()->createBlock('adminhtml/widget_button')
            ->setData(array(
                'label'   => Mage::helper('sales')->__('Submit Comment'),
                'class'   => 'save',
                'onclick' => $onclick
            ));
        $this->setChild('submit_button', $button);
        return $this;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:08:43.870

```
document.getElementById("submit_button").onclick = function () { 
    yourJavascriptFunc();//Calling your javascript function when slicks the submit button
}; 
```

# java - JPA，不想要 insertable=false，updatable=false，解决方法？

> ID：16059366
> 
> 赞同：1
> 
> 时间：2013-04-17T11:57:10.403
> 
> 标签：java, jpa, foreign-keys, entity, hibernate-onetomany

我对stackoverflow和JPA都是新手，所以我会尽力解释这一点。

在一个实体中，我想通过给出 int 值来设置外键，但我也想通过给出一个对象来设置它。这里有一些代码可以更好地解释它。

```
@Entity  
public class Thread implements Serializable {

  @ManyToOne  
  @JoinColumn(name = "accountId", referencedColumnName = "id", nullable = false)
  public Account getAccount() {
      return account;
  }

  @Column(name = "accountId")  
  @Basic
  public int getAccountId() {
      return accountId;
  }  
} 
```

我尝试了几种方法，但上面的代码是我想要实现的最佳示例。我知道在这两种方法中的任何一种中设置 insert = false 和 update = false 都会使此代码在编译和运行时工作。但我希望能够通过使用 Account 对象和设置实际的 int accountId 来插入 accountId。

这样做的原因是，有时在我的服务器中，我只有 accountId，有时我有 Account 对象。

我也明白最好的解决方案可能是在创建线程和设置 accountId 时使用 account.getId()。但是在我的服务器中能够只使用该对象在逻辑上会很好。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:14:37.260

我认为您在应用程序中遇到了概念问题。在使用 JPA 时，您应该坚持设置实体并且不要使用任何外键值。问题的原因是您的应用程序仅在某个时候提供了 accountId。

这可能是由于不同的原因。如果这是因为仅提供 accountId 的应用程序部分是遗留的，那么我认为拥有一个将 accountId 转换为 Account 实体然后设置该实体的适配器是非常好的。也不是适配器可以创建 JPA 代理，因此此时不需要实际的数据库访问。我能想到的另一个原因是应用程序在处理过程中的某个时间点丢失了信息。当应用程序在某个地方使用帐户并且仅将其 ID 移交给相关代码时，可能会出现这种情况。然后应该重构这样的代码以移交实体。

在您的特定情况下，您还可以同时使用帐户作为实体和外键作为属性，既可插入又可更新。您只需确保 accountId 属性值与指向由帐户实体表示的行的外键一致。JPA 提供者应该能够处理这个问题（例如，我知道 OpenJPA 可以）。但是，您对此有点限制。例如，您只能读取 accountId 属性值，因为将其设置为不同的值会导致帐户实体值之间的不一致。

# c# - Windows Phone 显示进度指示器 Webbrowser 组件中的每个链接单击

> ID：16059367
> 
> 赞同：1
> 
> 时间：2013-04-17T11:57:11.227
> 
> 标签：c#, windows-phone-8, webbrowser-control

我正在进行小型 Windows 手机项目。

在这个项目中，我使用一个 WebBrowser 组件（如 Android 中的 WebView）将我公司的移动网站显示为一个应用程序。

每次点击链接后，无论您说什么，我都需要显示进度条/对话框/指示器。

我该如何处理？例如，我将单击新闻链接，然后会向用户显示加载等内容。

**更新 ：**

```
public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            Browser.Navigated += new EventHandler<System.Windows.Navigation.NavigationEventArgs>(Browser_Navigated);
            Browser.Navigating += new EventHandler<NavigatingEventArgs>(Browser_Navigating);
            Browser.ScriptNotify += new EventHandler<NotifyEventArgs>(Browser_ScriptNotify);
        }

        void Browser_ScriptNotify(object sender, NotifyEventArgs e)
        {
            Browser.Navigate(new Uri(e.Value, UriKind.Absolute));
        }

        void Browser_Navigating(object sender, NavigatingEventArgs e)
        {
            ProgBar.Visibility = Visibility.Visible;
        }

        void Browser_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
        {
            ProgBar.Visibility = Visibility.Collapsed;
        }
    } 
```

我写了这段代码，但它没有显示任何关于进展的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:44:00.753

您应该使用拦截控件的`Navigating`事件`WebBrowser`来启动进度条。

您可以只更改`Visibility`加载叠加层的属性，例如由半透明`Rectangle`和`ProgressBar`.

然后你应该拦截`LoadComplete`or`NavigationFailed`事件并使用它们来删除你的覆盖。

请注意，某些 URL（例如`tel:`链接）不会触发`Navigated`事件，因此您可能需要对这些进行特殊处理。

# jmeter - JMeter：使用 JDBC 采样器的响应时间更高

> ID：16059368
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:14.140
> 
> 标签：jmeter, stress-testing

我已经创建了一个测试计划来对 MySQL DB 进行压力测试。测试计划执行没有错误，但 JMeter 的响应时间比我手动执行查询时要长得多。JMeter 的平均响应时间约为 500 毫秒。而对于相同的查询，从控制台手动运行需要 0.00 秒。

我正在使用 JDBC 采样器来执行包括 INSERT、UPDATE、SELECT 在内的查询。是否有任何最佳实践可以使 DB 压力测试尽可能接近现实。我无法在 JMeter 的数据库压力测试中找到太多信息。

# android - Asynctask 和进度条计时

> ID：16059372
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:22.653
> 
> 标签：android

在对话框中按确定后，我应该从其他地方获取数据。所以我使用了 Asynctask 类。实现如下。但是在按第一次确定之后，我不会得到任何进度条。我只有在按下第二个 ok 后才得到它（基本上，当按钮 onClick 方法内的所有行都被执行时......我应该怎么做才能在按下第一个 ok 后立即获得进度条？

```
confirmPath= (Button) findViewById(R.id.confirmPath);
            confirmPath.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                        construction
                        AlertDialog.Builder builder = new AlertDialog.Builder(Destination.this);
                        builder.setMessage("Press 'Ok' ")
                               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                   public void onClick(DialogInterface dialog, int id) {

                                       LoadData task = new LoadData();
                                       task.execute();

                                                                                AlertDialog alertDialog = new AlertDialog.Builder(Destination.this).create();
                                    alertDialog.setTitle("Attention!");
                                    alertDialog.setMessage(" Pay attention");
                                     alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                                           public void onClick(DialogInterface dialog, int which) {
                                           }
                                        });

                                        alertDialog.show();

                                   }
                               })
                               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                                   public void onClick(DialogInterface dialog, int id) {
                                       // do nothing
                                   }
                               });
                       builder.create();
                       builder.show(); 
```

这是 AsynkTask 类：

```
public class LoadData extends AsyncTask<Void, Void, Void> {
        ProgressDialog progressDialog;
        //declare other objects as per your need
        @Override
        protected void onPreExecute()
        {
            progressDialog= ProgressDialog.show(Destination.this, "Progress Dialog Title Text","Please wait", true);

            //do initialization of required objects objects here                
        };      
        @Override
        protected Void doInBackground(Void... params)
        {   

               ReadFromFile readFromFile= new ReadFromFile();
               readFromFile.ReadAllData("Data");
               //some other tasks to do

            return null;
        }       
        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            progressDialog.dismiss();
        };
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:15:26.657

使用此代码

```
 private class NetworkDelegate extends AsyncTask<String, Void, String> {

    private ProgressDialog Dialog = new ProgressDialog(MainActivity.this);

    protected String doInBackground(String... pass) {

        try {

            //userid is getting from webservice             

        return userid;

        } catch (Exception e) {

            System.out.println(e);
        }

    }

    protected void onPostExecute(String result) {

        Dialog.dismiss();

        if (result == null) {
            tv.setText("Enter Your Password Correctly");
            pwet.setFocusable(true);

        } else {

        }

    }

    protected void onPreExecute() {

        Dialog.setMessage("Loading...");
        Dialog.show();

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:41:32.737

I should have put the second alertdialog also in asynctask `onPostExecute` method. then I have the progressbar before obviously

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:06:09.513

**将此代码放在 AlertDialogBu​​ilder 之外：**

```
LoadData task = new LoadData();
task.execute(); 
```

**新代码应如下所示：**

```
 @Override
            public void onClick(View arg0) {

                                       LoadData task = new LoadData();
                                       task.execute();

                        construction
                        AlertDialog.Builder builder = new AlertDialog.Builder(Destination.this);
                        builder.setMessage("Press 'Ok' ")
                               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                   public void onClick(DialogInterface dialog, int id) {

                                                                                AlertDialog alertDialog = new AlertDialog.Builder(Destination.this).create();
                                    alertDialog.setTitle("Attention!");
                                    alertDialog.setMessage(" Pay attention");
                                     alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                                           public void onClick(DialogInterface dialog, int which) {
                                           }
                                        });

                                        alertDialog.show();

                                   }
                               })
                               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                                   public void onClick(DialogInterface dialog, int id) {
                                       // do nothing
                                   }
                               });
                       builder.create();
                       builder.show(); 
```

# javascript - 使用 javascript 选择具有相同标签名称的所有元素并部分突出显示内容

> ID：16059373
> 
> 赞同：2
> 
> 时间：2013-04-17T11:57:22.727
> 
> 标签：javascript, html, highlight

我制作了一个代码，应该突出显示搜索到的字符串，但它不起作用。
这是代码：

```
<body>

  <div>div is here</div>
   <div id="divid">

    <div>this is a div 1</div>
    <div> this is a div 2</div>
    <div> this is a div3</div>

  </div>

  <div> another div is here</div>
  </body> 
```

这是一个javascript代码。

```
 function checkit(){

var hlWord = "div";
        var nregex = new RegExp(hlWord,"gi");
        var div = document.getElementById("divid").getElementsByTagName('div');

        for(var i=0; i <= div.length; i++){

            var div1 = div[i].innerHTML;

            var rword = div1.replace(nregex,"<b>"+hlWord+"</b>");
            div1.innerHTML = rword;

        }

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:03:24.110

您的代码中存在初学者错误。让我纠正他们：

```
 function checkit(){

    var hlWord = "div";                  //Define string that will be emphasized by <b> tag
    var nregex = new RegExp(hlWord,"gi");//Create global, case-insensitive regexp
    var div = document.getElementById("divid").getElementsByTagName('div');  //Get element collection of divs in div#divid

    for(var i=0; i < div.length; i++){  //Loop through my element collection

        var div1 = div[i].innerHTML;    //Get the innerHTML of on of the divs

        var rword = div1.replace(nregex,"<b>"+hlWord+"</b>");  //Surround my string with <b>
        div[i].innerHTML = rword;  //Change the innerHTML back

    }

  } 
```

1.  你使用了这个`for`条件：`i<=div.length`. 这是错误的。不要忘记，我们从 0 开始计数：`[0, 1, 2, 3].length = 4`。此类数组的最后一个元素的索引为 3。这`[]`是一个数组文字。

2.  错误地，您分配了`div1.innerHTML`. `div1`是一个字符串。您要更改的元素是`div[i]`.

## [我也做了一个JSFiddle！](http://jsfiddle.net/Darker/UPgG8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:46:18.187

除了其他问题外，您的代码问题将是嵌套`div`元素将被破坏。如果要突出显示单词“div”，则应该使用某种递归。

这是这样一个功能：

```
function highLight(term,root){
    var allDiv = root.querySelectorAll('div'),
        replacer = function(a){return '<span class="highlight">'+a+'</span>'};
    for (var i=0; i<allDiv.length; i+=1){
        if (allDiv[i].querySelectorAll('div').length){
            highLight(term, allDiv[i]);
        } else {
          var re = RegExp('('+term+')','gi');
          allDiv[i].innerHTML = allDiv[i].innerHTML.replace(re,replacer);
        }
    }
} 
```

这是一个[**jsfiddle**](http://jsfiddle.net/ka4hz/)玩弄它

更[**高级的 jsfiddle**](http://jsfiddle.net/KooiInc/fDznF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:08:32.630

你有几个错误：你去：

[http://jsfiddle.net/55U6j/1/](http://jsfiddle.net/55U6j/1/)

```
function checkit(){

var hlWord = "div";
        var nregex = new RegExp(hlWord,"gi");
        var divs = document.getElementById("divid").getElementsByTagName('div');

        for(var i=0; i < divs.length; i++){

            var div = divs[i];
            var html =  div.innerHTML;

            var rword = html.replace(nregex,"<b>"+hlWord+"</b>");
            div.innerHTML = rword;

        }

  } 
```

# mysql - 如何根据另一列在同一行减去mysql

> ID：16059375
> 
> 赞同：3
> 
> 时间：2013-04-17T11:57:28.207
> 
> 标签：mysql, sql

我试图用买入的美元减去卖出的美元。

```
**|Tran_ID|Currency_type|currency_Amount|Local_Amount|  Rate  |Tran_type| ** 
  | 85     |   USD      |   2500       |    1581.54  |1.58074 |  Bought |
  | 78     |   USD      |   3487.57    |    2206.29  |1.58074 |  Bought |
  | 86     |   USD      |   100        |    63.26    |1.58074 |  Bought |
  | 87     |   USD      |   94.17      |    63.26    |1.48866 |  Sold   |
  | 88     |   USD      |   2600       |    1746.54  |1.48866 |  Sold   |
  | 89     |   USD      |   2600       |    1746.54  |1.48866 |  Sold   | 
```

我可以使用下面的查询添加出售或购买的美元总值

```
SELECT Currency_type, sum( currency_Amount ) AS total_bought
FROM Transaction
WHERE Currency_type=  'USD'
AND Tran_type =  'Bought'       <==  **or 'Sold'** 
```

结果如下

```
**|Currency_type | total_bought    |**
|USD             |6087.570068359375| 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T12:00:52.320

您可以根据您的交易类型设置一个标志：

```
SUM(currency_Amount * IF(Tran_type = "Bought", 1, -1)) 
```

# magento - Magento 添加了数千次重写

> ID：16059376
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:31.700
> 
> 标签：magento

我们在 Magento 中的重写遇到了问题。每天都会产生数以千计的新产品重写。目前，我们的商店中有 236940 次产品重写，但还没有解决方案。

重写过程中似乎有一个循环。这个问题似乎很像这篇文章中的问题：[Magento - Removing numbers in url key/product url](https://stackoverflow.com/questions/13614738/magento-removing-numbers-in-url-key-product-url)

这些问题与具有相同的产品网址有关。

这个问题产生了两个问题：1.产品在谷歌中每天都有不同的 URL 2.magento 安装充满了重写，这肯定会造成麻烦

我们应该如何解决产品重写循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:13:22.120

通过这样做，您将丢失所有存储的重写，但您可以截断`core_url_rewrite`表并重新索引。那会给你一个新的开始。

# performance - 优化 ExtJS 树视图上的“键入时搜索”性能

> ID：16059378
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:35.540
> 
> 标签：performance, optimization, extjs, extjs4, treeview

我有一个 ExtJS 树视图绑定到一个商店，该商店有大量（~1000）个节点（每个节点都附有复选框以选择它们）和 3 级嵌套是准确的。

而且，我在树视图小部件上方有一个文本框，用户可以在其中输入节点并根据输入的文本，树视图将显示/隐藏标准的相关节点。

这里的业务逻辑是，对于从树中选择的节点的某些组合，应该只显示某些节点​​（无论是通过搜索还是直接显示）。

例子。

```
Food
   |___ Vegetables
            |___ Potato, Tomato, Brinjal, Carrot
   |___ Fruits
            |___ Banana, Apple, Grapes, Watermelon

Electronics
   |___ Home Appliances
            |___ TV, Fridge, A.C., Washing Machine.
   |___ Personal
            |___ Mobile, Tablet, Laptop 
```

现在，考虑一下，如果用户从`Fruits`类别中选择了任何项目，那么类别中的项目**不**`Electronics > Personal`应该在树视图中可见，既不直接也不在搜索结果中可见。我知道这没有任何意义，只是为了让您简要了解关系在树视图中的工作方式。

 **现在的问题是，执行搜索的逻辑，基于选择隐藏/显示节点都存在，但是由于数据量很大（而且代码很旧，我们至少现在不能从头开始重写所有内容)，**搜索时键入**往往会偶尔变慢。并且在 IE8 下速度非常慢。

在我的测试中，性能通常很慢，因为搜索框中的每个击键都会导致整个树遍历并检查/操作 UI 逻辑以及业务逻辑是否显示或隐藏它们。

`change`并且考虑到标准用户的打字速度，每个字符的输入变得更慢，因为在搜索框中为每个字符进行了大量的幕后计算。

那么，我怎样才能加快这里的速度（即使数量较少）？

对于解决方案，我考虑在输入后将搜索延迟，比如 1500 毫秒，这样如果用户快速输入，treeview 可以等到他完成输入，然后使用搜索键进行搜索。但是，欢迎提出更好和可行的建议。**

# matlab - 数据集中的最小值 - cell2mat 产生零值

> ID：16059383
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:51.423
> 
> 标签：matlab

我正在加载数据集，并且正在接受用户输入来查找特定城市的列值。

例如：

```
city=input('Select city : ','s');
result=data(ismember(data.CITY,eval('city')),3:end); 
```

我收到：

Y2000 Y2002 Y2003 ..

100 120 150

或者如果用户输入年份：

```
year=input('Select year  : ','s');
result=data(:,{'CITY',eval('year')}); 
```

现在，我想在“结果”中找到最小值，但我不知道如何。

另外，如果我这样做：

> 分钟（数据.Y2000）

在整个数据中它有效。但是如果我尝试 min(data.year) ，在哪里

```
 year=input('Select year ','s') 
```

我收到

> “无法识别的变量名称‘年份’。”

- - - - - - - -更新 - - - - - - - - - - - - - - - - - ------------------

对于以上所有我所做的：

```
 result=data(:,{'CITY',(year)}); 
```

为了找到最小值，我做了： `min(result.(year));`并且它有效。

我有一个问题：

```
result=data(ismember(data.CITY,(city)),3:end); 
```

我收到用户选择的年份的日期。我想在所有列中找到最小值。因为“结果”是一个数据集，我试图将其设为单元格，然后设为单元格矩阵。

我使用了 dataset2cell，然后我收到了一个大小为 2x22 的单元格，其中包含第一行中的字符。（它有 'Y200' ， 'Y2001'..）和第 2 行中的数字数据。

为了删除 characters ，我做了：

> mycell(任何(cellfun(@(x)x(1)=='Y', mycell),2), :) = []

接着 ：

> 新=cell2mat（mycell）

因为我想找到最小值和最大值。

但这会导致一半的值为零。

我能做些什么来防止这种情况发生？或者如果有另一种方法可以找到最小值。

# visual-studio-2012 - 包含来自 App_Data 复选框的文件丢失

> ID：16059384
> 
> 赞同：0
> 
> 时间：2013-04-17T11:57:55.013
> 
> 标签：visual-studio-2012, publishing-site

我正在家用笔记本电脑上运行从 MSDN 下载的 Visual Studio 2012 Ultimate，但它缺少“包含来自 App_Data 的文件”复选框，当我去发布时，我在工作 PC 上看到...知道我有什么做得到那个盒子？我知道我可以从命令行发布，但从 UI 更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T08:54:52.157

我更新了 Azure SDK 的版本，它出现了。

# c# - 在 datagridview 单元格中显示其他文本

> ID：16059385
> 
> 赞同：0
> 
> 时间：2013-04-17T11:58:00.630
> 
> 标签：c#, winforms

我有datagridview1，`datagridview1.Rows.Insert(0, "name");` 现在我想要设置，`datagridview1.value=name`但显示文本=其他文本。

我想`datagridview1`显示例如 name22 而不是 name 但`datagridview1`值只识别 name 而不是 name22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:15:54.623

很难理解你的问题，但我想你可以这样做：

```
foreach (DataGridViewRow grid1row in Datagridview1.Rows)
{
    if(grid1row.Cells["field name"].Value.Equals("name"))
    {
        grid1row.Cells["field name"].value = other text;
    }
} 
```

你是这个意思吗？

# php - Facebook API 和 CakePHP

> ID：16059386
> 
> 赞同：2
> 
> 时间：2013-04-17T11:58:04.450
> 
> 标签：php, facebook-graph-api, cakephp

我正在将 Facebook API (PHP-SDK) 与 CakePHP 集成，并且我知道已经存在一些集成，但我很固执地自己做这件事。我的问题是，假设我有一个带有一些方法的 FacebookController，例如：

```
function one() {
//code
}
function two() {
//code
}
function three() {
//code
} 
```

我必须在我的所有函数中添加以下内容：

```
$facebook = new Facebook(array(
'appId'  => 'appID',
'secret' => 'secret',
)); 
```

这似乎是不好的做法和大量的代码重复。我可以将 $facebook 变量设为“全局”，从而能够在我的控制器中的所有方法中访问它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:06:30.063

您可以在 beforeFilter 函数中分配私有变量。

```
private $facebookData = array();

public function beforeFilter() {
    $this->facebookData = new Facebook(array(
                              'appId'  => 'appID',
                              'secret' => 'secret',
                          ));
} 
```

比您可以通过该控制器的任何方法访问，例如：

```
function one() {
 print_r($this->facebookData);
} 
```

# java - 将位图引用从 java 传递到 C++？

> ID：16059389
> 
> 赞同：0
> 
> 时间：2013-04-17T11:58:07.803
> 
> 标签：java, android, bitmap, android-ndk, java-native-interface

我想在java中创建一个位图，传递它的引用并用c ++对其进行操作，然后在java中查看结果。特别是，我尝试了以下方法，但没有结果：

```
JNIEXPORT void JNICALL Java_com_dacuda_scannermousetablet_ui_activities_HomeActivity_setChangeBitmap(
    JNIEnv *env, jobject obj, jobject bitmap) {

mainEnv = env;
AndroidBitmapInfo  info;
void*              pixels;
int                ret;

if ((ret = AndroidBitmap_getInfo(env, bitmap, &info)) < 0) {
    return;
}

if (info.format != ANDROID_BITMAP_FORMAT_RGB_565) {
    return;
}

if ((ret =AndroidBitmap_lockPixels(env, bitmap, &pixels)) < 0) {
}

uint16_t *pictureRGB;
int size = sizeof(uint16_t)*info.width*info.height;
pictureRGB = (uint16_t*)malloc(sizeof(uint16_t)*info.width*info.height);
memcpy((char*)pixels, (char*)pictureRGB, info.width*info.height*sizeof(uint16_t));

mEdit = new EditImage((char*)pictureRGB, info.width, info.height);
mEdit->changeBrightness(); 
```

}

我除了在java端有一个已经改变的位图，但不幸的是它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:06:02.353

您需要进行匹配的调用`AndroidBitmap_unlockPixels`

此外，以下代码只是用“随机”数据填充您的图片：

```
pictureRGB = (uint16_t*)malloc(sizeof(uint16_t)*info.width*info.height);
memcpy((char*)pixels, (char*)pictureRGB, info.width*info.height*sizeof(uint16_t)); 
```

# c# - WPF中的WPF命令和事件有什么区别？

> ID：16059390
> 
> 赞同：8
> 
> 时间：2013-04-17T11:58:09.887
> 
> 标签：c#, wpf, mvvm, conceptual

我只是在谷歌上搜索 WPF 命令和 WPF 中的事件之间的区别。我登陆了讨论正在进行的stackoverflow的下一页。

[WPF 命令和事件有什么区别？](https://stackoverflow.com/questions/3749883/what-is-the-difference-between-wpf-command-and-event)

我只能从那里理解

1.  命令可以写在业务层，而事件只能写在表示层中
2.  单个命令可以与多个控件关联，但事件只能与一个控件关联。

我对吗？它们之间还有其他区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:05:21.567

你是对的，但只是部分。

1.  主要的担忧是事件不适合`MVVM`范式。简单地说事件很难插入，你不能绑定到事件处理程序。尽管如此，在表示层中使用命令是没有限制的，但这样做没有任何好处。您可以在 BLL 中捕获控件并将事件处理程序附加到它，但这种情况更糟。
2.  不会。只要事件参数类型匹配，事件处理程序也可以关联到不同的控件。

命令还为您提供了一些免费的好处。例如，如果`CanExecute()`返回 false，则使用命令元素将被禁用。另一个好处是使用命令迫使您遵循[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)原则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:04:24.507

事件是在 UI 中发生某些事情时发生的触发器。命令是您的域模型处理此事件的方式。

# c# - 查找值是否存在于 C# 列表中的最有效方法

> ID：16059391
> 
> 赞同：17
> 
> 时间：2013-04-17T11:58:14.977
> 
> 标签：c#, list

在 C# 中，如果我有一个 bool 类型的列表。确定列表是否包含真值的最快方法是什么？我不需要知道真正的价值是多少或在哪里。我只需要知道是否存在。我将搜索许多非常大的列表。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-17T11:59:39.487

只需使用`bool trueInList = list.Contains(true);`. 这会循环列表，直到有一个`true`.

为什么你需要这样一个简单的用例更快的东西？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-17T12:07:50.257

使用 list.Contains(true) 或 list.Any(true)。对于普通列表，两者的复杂度都为 O(n)。由于 Any() 是一个扩展方法，它需要调用委托，因此 Contains() 可能仍然快一点。但可以肯定的是，我会简单地用一个大集合来测试两者。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-17T11:59:53.470

你可以使用任何（）。

```
list.Any(b => b); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T11:59:46.373

试试这个：

```
var result = myBoolList.Any(i => i==true); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T12:00:12.077

您使用`Any(...)`

```
list.Any(c => c == true); 
```

要不就

```
list.Any(c => c); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T12:10:59.547

您可以使用列表的 BinarySearch 方法。

```
if(list.BinarySearch(true) > 0){...} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T12:35:28.370

This answer provides a different angle on this: Why store the bools in a list? Store them as two ints: `int falseCount; int trueCount;`.

Contains-testing is as simple as: `trueCount > 0`

Assuming that you need the list, use `List.Contains` as it directly searches the underlying array.

It would be even faster to extract the underlying array using reflection and search it in a hard-coded comparison loop. You can use the literal `true` there to compare each element. You can even unroll the loop or do unsafe code tricks.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T12:03:54.297

```
bool val = false;
Foreach(bool val in listofvalue)
{
   val |= val;
}

if(val)
print "List contain true value"

else

print "List contain false value" 
```

# javascript - 将 div 标签从固定更改为绝对并返回？

> ID：16059399
> 
> 赞同：-2
> 
> 时间：2013-04-17T11:58:43.213
> 
> 标签：javascript, jquery, fixed, absolute

在 Facebook 动态消息中，侧边栏（包含广告等）并非一直都是固定的。你怎么做到这一点？你可以做

```
<div style="position:fixed"></div> 
```

但是你怎么能告诉它按照你的意愿来回改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:02:28.810

如果您乐于使用 jQuery 进行操作：

```
$("#sideBar").css("position", "fixed"); 
```

然后将其改回：

```
$("#sideBar").css("position", ""); 
```

# wpf - MVVM：绑定到业务模型对象集合时使用命令

> ID：16059403
> 
> 赞同：0
> 
> 时间：2013-04-17T11:58:53.057
> 
> 标签：wpf, mvvm, collections, command

我们是否应该将模型属性直接绑定到视图一直存在争议。但是大多数在线示例绑定模型属性可以直接查看，例如 { `Binding Model.Property`}

我正在创建一个简单的 WPF 应用程序，其中我有一个数据网格，每一行都有一个按钮来显示一个弹出窗口。

商业模式如下：

```
public class DataGridItem
{
    public string Summary { get; set; }
    public string Name { get; set; }
} 
```

viewmodel 类看起来像

```
public class DataGridItemViewModel : NotifyableEntity
{
    public DataGridItemViewModel()
    {
        Data = new ObservableCollection<DataGridItem>();
    }
    public string Summary { get; set; }

    public string Name { get; set; }

    public ObservableCollection<DataGridItem> ItemsList { get; set; }

} 
```

的属性绑定到`DataGrid`的属性。现在在这种情况下，如果我在中绑定一个按钮，那么它会在业务模型类中查找命令。我怎样才能在本身中定义命令而不必在 ? 中编写代理/包装器属性？`ItemsSource``ItemsList``viewmodel``Command``ViewLog``datagrid``viewmodel``viewmodel`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:40:00.937

我同意为子集合创建 ViewModel 是一种痛苦和抽象诱导仪式的练习，但我认为您不需要这些视图模型来处理命令。您可以为 提供不同的 DataContext ，`Button`以便它绑定到您希望的任何视图模型（或模型）：

```
....
<ItemsControl ItemsSource="{Binding ItemsList}">
  <ItemsControl.ItemTemplate>
    <DataTemplate DataType="{x:Type DataGridItemViewModel}">
      <Button Command="{Binding MyCommand}" DataContext="{Binding DataGridItemViewModel}"/>
      </DataTemplate>
   </ItemsControl.ItemTemplate>
... 
```

# azure - Azure 虚拟机中 MS SQL 的性能

> ID：16059405
> 
> 赞同：0
> 
> 时间：2013-04-17T11:59:00.167
> 
> 标签：azure, azure-web-roles, azure-virtual-machine, azure-connect

我在**Azure 虚拟机中安装了****SQL Server**。打开 1433 端口，在防火墙中创建规则。

 **之后，我创建了**Web 角色并通过****Azure Connect**连接到 SQL Server 。

所有作品。但是性能很差：虚拟机和 Web 角色之间 ping 500-900 毫秒，简单的存储过程工作 5-7 秒。

*   如何提高性能？
*   如果我将使用虚拟网络，性能会提高吗？

**解决方案**

我创建了虚拟网络，结果是最好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:30:25.923

虚拟网络肯定会提高性能，因为您将减少两个云服务（您的 VM 和您的 Web 角色）之间的延迟。这也将更加安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:15:46.390

您可以进行的一项简单测试是在 VM 上的 SQL Server Management Studio 中执行查询。然后从 Web 服务器执行相同的查询并测量差异。通过这种方式，您可以查看它是效率低下的查询计划还是延迟问题。

在 Azure 中，延迟始终是一个更大的考虑因素，因为你的硬件分布在一个大型数据中心。如果您的应用程序对数据库非常健谈，则延迟问题开始变得复杂。因此，批处理查询是一种很好的做法，如果可以的话，可以减少对数据库的不同调用和异步假脱机数据的数量。这将加快您的应用程序并提供更流畅的用户体验。

如果网络延迟导致性能不佳，请不要担心，您可以做很多事情。以下指南将为您提供有关 Azure 性能最佳实践的良好概述，以帮助您入门：

[http://www.windowsazure.com/en-us/develop/net/best-practices/performance/](http://www.windowsazure.com/en-us/develop/net/best-practices/performance/)**

# android - Android 应用程序私有发布在 Google Play 上

> ID：16059406
> 
> 赞同：4
> 
> 时间：2013-04-17T11:59:06.053
> 
> 标签：android, google-play

我们有一个应用程序必须针对“评级功能”进行测试，即用户将单击一个按钮并将被重定向到应用程序的 Play 商店页面以对应用程序进行评级。

是否可以在 Play Store 上发布应用程序但将其保密或仅向少数人提供访问权限。它应该在休息时保持隐形。测试后，我们可能会删除该应用程序，然后稍后再次上传。

如果不可能，我们如何测试评级功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-31T19:52:25.027

Google Play 商店现在支持 alpha 和 beta 测试。

在控制台中创建应用后，在 APK 部分下，您可以选择上传不公开的 alpha 和 beta 版本。

您可以控制谁可以使用 google+ 社区访问测试版本 - 将这些设为私有，以便您控制谁可以加入。

您必须先将您的应用发布到商店，然后才能获得与测试人员共享的链接，以便他们选择加入测试计划，但不用担心，只要您没有上传生产 apk，您的应用就不会为不在测试程序中的用户显示在 Play 商店中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:16:11.423

Google Play 商店没有可以上传 APK 进行私人测试的功能/设施。您将不得不依赖第三方服务来执行此操作。

[Beta 系列](http://thebetafamily.com/)就是这样一种网络服务，它可以让您做到这一点。

如果您想将应用程序分发给特定的人员列表，他们还提供名为[Supersend的功能](http://thebetafamily.com/supersend/)

他们的服务是免费的。您可以阅读他们的[常见问题解答](http://thebetafamily.com/faq)以帮助您了解更多信息。

~~还有另一个众所周知的 Web 服务，称为[TestFlight](https://testflightapp.com/android/)。看看哪一个适合你。*不过，我在The Beta Family*上取得了不错的成绩，但从未尝试*过 TestFlight*。~~**（正如LocalPCGuy**在评论中指出的那样， *TestFlight*不再支持 Android 测试）。

正如**Stew J**在同一线程上已经回答的那样，Google Play 商店支持 BETA 和 ALPHA 测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T17:09:11.233

看起来您可以使用[许可](http://developer.android.com/google/play/licensing/index.html)来执行此操作。许可也可用于免费应用程序。您可以[分配](http://developer.android.com/google/play/licensing/setting-up.html#test-response)类似`LICENSED`或`NOT_LICENSE`使用 gmail 地址的状态。

# symfony - 在 symfony2 项目中包含 PPBootStrap.php

> ID：16059411
> 
> 赞同：0
> 
> 时间：2013-04-17T11:59:18.877
> 
> 标签：symfony, paypal

我已将 Paypal SDK 文件添加到供应商文件夹中。但为了在我的 symfony2 项目中使用 SDK 类，我需要“PPBootStrap.php”。

我应该在哪里添加代码以要求此文件以及如何添加？在 composer.json 或 autoload.php

# android - 支持安卓多屏

> ID：16059427
> 
> 赞同：1
> 
> 时间：2013-04-17T12:00:10.690
> 
> 标签：android, android-layout, screen

我的问题是我可以想出如何在 Android 中支持多个屏幕。我已经阅读了很多次 android 文档以及许多博客和文章：

1.  [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)
2.  [http://mobile.tutsplus.com/tutorials/mobile-design-tutorials/how-to-get-started-in-android-app-design/](http://mobile.tutsplus.com/tutorials/mobile-design-tutorials/how-to-get-started-in-android-app-design/)
3.  [http://www.androidhive.info/](http://www.androidhive.info/)

但我什至无法决定如何制作适合大多数屏幕的背景图像

*   小的
*   普通的
*   大的
*   超大

与牙齿：

*   低密度脂蛋白
*   mdpi
*   hdpi
*   xdpi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T13:18:53.740

首先，不推荐使用全屏图像作为背景，因为它可能会导致内存问题。即使有人需要使用全屏图像作为背景，也可以通过以下方式对其进行缩放：

*   使用支持最大尺寸的图像
*   将其保持在中心并在其周围添加彩色/渐变边框
*   可以拉伸到全屏（不会保持长宽比）

如需深入讨论，请阅读：

[http://vinsol.com/blog/2014/11/20/tips-for-designers-from-a-developer/](http://vinsol.com/blog/2014/11/20/tips-for-designers-from-a-developer/)

# jquery - 无法绑定 jquery 下拉菜单

> ID：16059430
> 
> 赞同：0
> 
> 时间：2013-04-17T12:00:13.143
> 
> 标签：jquery, asp.net, ajax

我有功能，我正在尝试将返回值附加到下拉列表，但它根本没有帮助。

这是我的功能

```
function GetNames(FROM,TO) {
 var inputObject = {};   
 inputObject.FROM = FROM;   
  inputObject.TO = TO;    
 $.ajax({   
     type: "POST",  
      url: "../WebService.asmx/getName",   
      data: {from : inputObject.FROM ,to : inputObject.TO},   
      contentType: "application/json; charset=utf-8",   
      dataType: "json",   
      async: true,   
      success: function (msg) {   
        $.each(msg.d, function (k, value) {   
            $('#ddlName').append("<option value='" + value + "'>" + value + "   </option>");   
        });   
     },   
         error: function (errMsg) {   
         alert(errMsg);   
     }   
  });   
} 
```

我也将数据参数更改为此值，但它们没有帮助

```
1) data: JSON.stringify(inputObject),
2) data: {'from=' : inputObject.FROM, 'to=' : inputObject.TO},
3) data: {'from' : inputObject.FROM, 'to' : inputObject.TO}, 
```

这些变化都没有帮助。

FROM 和 TO 是我测试 webservice getName 方法及其工作正常的日期。但是这个javascript方法不断出错：函数（errMsg）和消息出现“对象：对象”

网络服务方法：

```
 [WebMethod]
    public List<string> getName(string from,string to)
    {
        List<string> bdnames= new List<string>();
        try
        {
            DataSet ds = null;
            SqlParameter[] sqlparams = new SqlParameter[2];

            sqlparams[0] = new SqlParameter("@FROM", SqlDbType.DateTime);
            sqlparams[0].Direction = ParameterDirection.Input;
            sqlparams[0].Value = Convert.ToDateTime(from);

            sqlparams[1] = new SqlParameter("@TO", SqlDbType.DateTime);
            sqlparams[1].Direction = ParameterDirection.Input;
            sqlparams[1].Value = Convert.ToDateTime(to);

            ds = SqlHelper.ExecuteDataset(usmHelper.ConnectionString, CommandType.StoredProcedure, "rep_getBDMs", sqlparams);

            for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
            {
                bdnames.Add(ds.Tables[0].Rows[i]["UUMM"].ToString());
            }
        }
        catch(Exception ex)
        {

        }
        finally
        {

        }
        return bdnames;
    } 
```

Web 服务返回值

```
<?xml version="1.0" encoding="utf-8" ?> 
- <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <string>Samuel</string> 
  <string>Chetna</string> 
  <string>Chris</string> 
  <string>Mily</string> 
  <string>tuff</string> 
  <string>Prasad</string> 
  <string>Ram</string> 
  <string>Gary</string> 
  <string>MarkTaylor</string> 
  <string>Kenn</string> 
  </ArrayOfString> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:41:57.157

这是一个非常冗长的版本，但您可能会发现一些价值：

```
function GetNames(FROM, TO) {
    // just use the object you created for data
    var inputObject = {
        from: FROM,
        to: TO
    };
    $.ajax({
        type: "POST",
        url: "../WebService.asmx/getName",
        data: inputObject,
        contentType: "application/json",
        dataType: "json",
        async: true,
        // figure out if it has .d or not and filter for that
        dataFilter: function (data) {
            var msg;
            if (typeof (JSON) !== 'undefined' && typeof (JSON.parse) === 'function') msg = JSON.parse(data);
            else msg = jQuery.parseJSON(data);
            if (msg.hasOwnProperty('d')) return msg.d;
            else return msg;
        },
        // pass the filtered message (data returned) to a function
        success: function (msg) {
            loadOptions(msg);
        },
        // verbose error handler
        error: function (xhr, textStatus, errorThrown) {
            var errorMessage = "Ajax error: " + this.url + " : " + textStatus + " : " + errorThrown + " : " + xhr.statusText + " : " + xhr.status;
            alert(errorMessage);
            if (xhr.status != "0" || errorThrown != "abort") {
                alert(errorMessage);
            }
        }

    });
}
/* build the option list 
   This only hits the DOM once instead of your .each or  a .map etc.
*/
function loadOptions(jdata) {
    var bdnames = jdata.bdnames;
    var options = '';
    for (var i = 0; i < bdnames.length; i++) {
        options += '<option value="' + bdnames[i].string + '">' + bdnames[i].string + '</option>';
    }
    $("select#ddlName").html(options);
} 
```

# jquery - jquery mobile - 弹出窗口中的自定义选择菜单

> ID：16059431
> 
> 赞同：6
> 
> 时间：2013-04-17T12:00:15.527
> 
> 标签：jquery, jquery-mobile, event-propagation, jquery-mobile-popup, jquery-mobile-fieldset

请找到下面的小提琴[http://jsfiddle.net/yesvin/Xj8p8/](http://jsfiddle.net/yesvin/Xj8p8/)

```
<ul data-role="listview">
        <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
     <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
     <li data-role="fieldcontain">
            <label for="pageselect">page select</label>
            <select name="pageselect" id="pageselect" data-native-menu="false">                
                <option value="">Choose One</option>
                <option value="">pageselect opt 1</option>
                <option value="">pageselect opt 2</option>
                <option value="">pageselect opt 3</option>
            </select>
         </li>
     <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
</ul>   

<a href="#pop" data-rel="popup" data-position-to="window" data-role="button" id="farmer_family_member">Add Popup</a>

<div data-role="popup" id="pop">
    <ul data-role="listview">
        <li data-role="fieldcontain">
            <label for="popupselect">popup select</label>
            <select name="popupselect" id="popupselect" data-native-menu="false">                
                <option value="">popup select opt 1</option>
                <option value="">popup select opt 2</option>
                <option value="">popup select opt 3</option>
            </select>
        </li>
         <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
         <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
         <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>
         <li data-role="fieldcontain">
            <label for="basic">Text Input:</label>
            <input type="text" name="name" id="basic" value=""  />
         </li>        
    </ul> 
</div> 
```

和我的页面一样，当我在移动设备上查看该页面时，它有一些问题，

1.  当我单击添加弹出按钮时，它会打开一个弹出窗口，在该弹出窗口中有选择菜单，并且该选择菜单的 data-native-menu=false 不起作用。我该如何启用它？

2.  如果我更改弹出窗口内的“popupselect”菜单，则“pageselect”菜单正在打开。我该如何防止呢？

请指教...

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T14:52:19.723

## 第一个答案

简短的回答是你不能那样做。我知道，这听起来很傻，但是 jQuery Mobile 对弹出窗口有一些限制，主要限制是您不能链接弹出窗口。因为自定义选择菜单只是另一个弹出窗口，所以无法从弹出窗口中显示。

> 注意：不允许链接弹出窗口
> 
> 该框架目前不支持弹出窗口的链接，因此无法嵌入从一个弹出窗口到另一个弹出窗口的链接。弹出窗口中所有带有 data-rel="popup" 的链接根本不会做任何事情。
> 
> 这也意味着自定义选择菜单在弹出窗口中不起作用，因为它们本身是使用弹出窗口实现的。如果您在弹出窗口中放置一个选择菜单，即使您指定 data-native-menu="false"，它也会呈现为原生选择菜单。

官方文档：[http ://api.jquerymobile.com/popup/](http://api.jquerymobile.com/popup/)

这个问题有一个可用的解决方法，但在这种情况下不能使用。要使解决方法起作用，需要先关闭一个弹出窗口，然后才能打开第二个弹出窗口。不幸的是，这在这里不可行。

## 第二个答案

这也被称为跌倒事件。这是一个冷的 javascript 错误，好吧不是错误本身，因为 javascript 从来没有打算像这样工作。

基本上当你点击一个元素时，点击事件会落到下面的元素上。

可以使用以下功能来防止这种情况：

*   **[停止传播（）](http://api.jquery.com/event.stopPropagation/)**
*   **[停止立即传播（）](http://api.jquery.com/event.stopImmediatePropagation/)**

这是一个 jsFiddle 示例，因此您可以理解这个问题：http: [//jsfiddle.net/Gajotres/Xz2np/](http://jsfiddle.net/Gajotres/Xz2np/)

```
$('#page1').live('pagebeforeshow',function(e,data){
    $('.someDiv').live('click', function (e) {   
        alert('Event is not going to propagate to content div, thus not hiding a header');             
        event.stopPropagation();   
        event.stopImmediatePropagation();
    });
}); 
```

要理解这个问题，只需单击一个 DIV 示例然后注释这 2 行，再次运行一个示例并再次单击一个 DIV。

## 最后一件事

这听起来很粗糙，但需要说一下。不要忘记不时接受答案。我可以看到我对你之前的问题给出了几个答案。我通常不介意这一点，但其他人会这样做，他们不会帮助你。

# css - 使用 em 表示标题

> ID：16059435
> 
> 赞同：6
> 
> 时间：2013-04-17T12:00:43.303
> 
> 标签：css, em

我是使用 em 的新手。到目前为止，我一直使用 px，但现在该继续前进了。我被我的标题困住了。我有一个 H2 和一个 H6 样式相同

```
font-size:1.2em;
line-height:1.2em; 
```

当我将两个标题放在同一个父元素中时，它们以不同的大小显示。这怎么可能？它们是相对于父级还是相对于它们自身的默认字体大小。

谢谢

[http://jsfiddle.net/SBAHa/1](http://jsfiddle.net/SBAHa/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:14:15.683

根据您发送的链接 (joets.be/test/index.html)，发生这种情况的原因是您在标题元素中有一个锚标记。

H2内部`<a>`附有字体大小样式，而 H6 内部则没有。如果您将 1.2em 样式应用于`<a>`而不是标题，那么这将起作用。

所以本质上，这样做：

`h2 a, h6 a{ font-size:1.2em; line-height:1.2em; }`

编辑：我已经查看了 css 文件本身，你可以从第 339 行删除“h2 a”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:11:37.943

元素 em 的实际大小是相对于其父元素的 font-size 计算的。

看看这篇帮助我理解相关测量的伟大文章：http: [//alistapart.com/article/fluidgrids](http://alistapart.com/article/fluidgrids)

# c++ - Poco 中的 LRUCacheStrategy - 它是如何工作的？

> ID：16059436
> 
> 赞同：1
> 
> 时间：2013-04-17T12:00:45.800
> 
> 标签：c++, caching, poco-libraries

```
 void onAdd(const void*, const KeyValueArgs <TKey, TValue>& args)
{
    _keys.push_front(args.key());
    std::pair<IndexIterator, bool> stat = _keyIndex.insert(std::make_pair(args.key(), _keys.begin()));
    if (!stat.second)
    {
        stat.first->second = _keys.begin();
    }
} 
```

有人可以解释一下这段代码是如何工作的吗？它来自 POCO LRUCacheStrategy，它使用映射来实现 LRUCache。

我们想更改缓存以在关闭时将其缓存对象存储到磁盘...我们可以在策略中添加一些文件流吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:08.913

[使用类似这样](http://www.functionx.com/cpp/articles/serialization.htm)的东西序列化缓存映射并使用 fstream 存储/读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T17:34:57.253

> 我们想更改缓存以在关闭时将其缓存的对象存储到磁盘

没有显式缓存 close() （因此也没有策略 onClose() ）调用，但您可以轻松创建自己的缓存（见下文）并自动在析构函数中持久化（重要：确保防止任何异常逃脱析构函数）。

定义自己的缓存很简单，这是一个带有修改的析构函数的 LRUCache：

```
template <
    class TKey, 
    class TValue,
    class TMutex = FastMutex, 
    class TEventMutex = FastMutex
> 
class PersistentLRUCache: public Poco::AbstractCache<TKey, TValue, LRUStrategy<TKey, TValue>, TMutex, TEventMutex>
{
public:
    // ...

    ~PersistentLRUCache()
    {
            try {
                    Iterator it = _data.begin();
                    Iterator end = _data.end();
                    for (; it != end; ++it)
                    {
                        // write entries to file
                    }
            } catch (...) { /* log errors */}
    }

    // ...
}; 
```

访问父类（受保护的）成员有点“肮脏”（如果框架为底层容器提供 begin() 和 end() 访问器会更好；无论好坏，它都是允许的，您可以利用它。

> 我们可以在策略中添加一些文件流吗？

直接向框架类添加功能意味着您的更改将被每个新版本覆盖，您将不得不重新应用您的更改。如上所示，最好定义自己的缓存，这样可以保护您免受框架更改覆盖您的功能的影响。

# php - 如何正确处理重定向和包含页面？

> ID：16059439
> 
> 赞同：0
> 
> 时间：2013-04-17T12:00:56.863
> 
> 标签：php, authentication, redirect, include

我正在写一个小项目，一个非注册用户只能访问几个页面的页面，其他几个页面的注册页面，以及其他一些注册用户的页面。这是一场比赛，所以只有那些玩“比赛”的人才能接触到后者。此外，我们还会有一些页面，即管理员（秘密页面）。这是结构：

```
$Public_Path = '/public_html/public/';
$Private_Path = '/public_html/private/';
$Secret_Path = '/public_html/secret/'; 
```

我通过 /public_html/index.php 传递所有内容并从那里包含文件。我认为将所有包含和重定向放在一个地方而不是分散在每个文件的开头会更好。问题是，这里的代码开始变得混乱，还有更多的选项要添加。有没有简化它的模式？这就是我的代码现在的样子：

```
// Some extra code goes here

// If an unregistered user tries to go anywhere he shouldn't
if (!file_exists($Public_Path . $Url . '/index.php') && empty($User))
  header ('Location: /login/');

// PUBLIC. Load the public pages
if (file_exists($Public_Path . $Url . '/index.php'))
  include $Public_Path . $Url . '/index.php';

// SECRET. Only for admin
else if (file_exists($Secret_Path . $Url . '/index.php') && in_array($User->email, $Admins))
  include $Secret_Path . $Url . '/index.php';

// PRIVATE. Load the template and include private pages
else if (file_exists($Private_Path . $Url . '/index.php'))
  {
  if ($UrlArray[0] != 'games' && $User->game == 0)
    header ('Location: /games/');

  if ($UrlArray[1] == 'save')
    include $Private_Path . $Url . '/index.php';
  else
    {
    $Page = $Private_Path . $Url . '/index.php';
    include $Include_Path . 'template.php';
    }
  }

// 404\. Nor public nor private nor secret
else
  header ('Location: /error/404'); 
```

注意：我知道只能`index.php`用这个访问的限制，我自己强加的。

我的问题是，**我怎样才能以某种方式订购此代码，以允许我添加更多功能但仅增加一点复杂性？如何减少后者？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:59:10.853

我会考虑几个选择：

添加一个会话变量（比如，`$_SESSION['userPath']`），当用户登录时，将他们带到他们的授权路径：

```
$path = (isset($_SESSION['userPath']))?$_SESSION['userPath']:FALSE;

if($path){
  include $path . $Url . '/index.php';
} else {
  header ('Location: /login/');
} 
```

您的格式适用于扩展，但如果您将其更改为 switch 语句，它可能在语义上更易于阅读。这将要求您将其归结为上面提到的一个变量（例如`$_SESSION['userPath']`）变量。

```
switch ($path){
  case "Public_Path":
    header ('Location: /login/');
    break;
  case "Private_Path":
     if ($UrlArray[0] != 'games' && $User->game == 0){
      header ('Location: /games/');
     }
     if ($UrlArray[1] == 'save'){
      include $Private_Path . $Url . '/index.php';
     } else {
      $Page = $Private_Path . $Url . '/index.php';
      include $Include_Path . 'template.php';
     }
    break;
  case "Secret_Path":
    if (in_array($User->email, $Admins){
      include $path . $Url . '/index.php';
    }
    break;
  case "New_Path":
    include $path . $Url . '/index.php';
    break;

   // ...

  case default:
    header ('Location: /error/404');
} 
```

最后，如果您使用 AJAX 解决方案，而不是重定向，页面将重新加载到查看器的适当位置。在这种情况下，根本不需要重定向，而是在需要时加载所需的元素。

# c - C中的套接字编程以使服务器不知道连接

> ID：16059440
> 
> 赞同：-3
> 
> 时间：2013-04-17T12:01:04.673
> 
> 标签：c, sockets

我刚刚完成了客户端服务器编程。客户端-服务器程序正在运行，服务器正确回复它已收到字节。

现在我想以某种方式做到这一点，这样我就不需要运行“服务器”程序。我只想让客户端程序运行并在同一台机器上输入 ip 即 127.0.0.1 ...它应该连接。它应该正确连接以执行诸如将字节/罚款发送到服务器等操作

这可能吗，请帮助。（从这个意义上说，不需要服务器编程）。我只想让客户端程序运行并连接到服务器并将数据发送到远程电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:02:25.260

不，那是不可能的。

没有服务器就不能拥有客户端/服务器，如果没有什么可连接的，则不能“仅连接”。

一个特定的 IP 地址和端口是“开放的”*意味着*该主机上正在运行一些服务，它正在侦听该端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:16:13.693

不，您不可能必须分别编写一个客户端程序和一个服务器程序，并且您可以使用此环回 ip，但您还需要编写两个程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:21:39.690

POST 方法使用 http 标头，因此需要阅读一些关于它的编程的信息 这里是该 POST 方法的一个小例子

```
 #include<stdio.h>

 #include<stdlib.h>

 #include<usr/mynetwork.h>

int main(int argc, char** argv) {
int sockfd, n;
char buff[MAXLINE],recvline[MAXLINE];
struct sockaddr_in servaddr;

if(argc != 3){
    printf("usage: httppostconnect <ipaddress> <relative_url>");
    exit(0);
}

if( (sockfd = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP)) == -1 ){
    printf("socket: error");
    exit(0);
}

bzero(&servaddr,sizeof(servaddr));
servaddr.sin_family = AF_INET;
servaddr.sin_port = htons(80);  //connect to http server

if(inet_pton(AF_INET,argv[1],&servaddr.sin_addr) < 0){
    printf("port: assigned invalid");
    exit(0);
}
if( connect(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr)) == -1){
    printf("connect: error");
    exit(0);
}

//Sending Http header
bzero(&buff,sizeof(buff));

char postdata[] = "param1=value1&param2=value";  /* Change param and value here */

sprintf(buff,"POST %s HTTP1.1\r\nAccept: */*\r\nReferer: <REFERER HERE>\r\nAccept-Language: en-us\r\nContent-Type: application/x-www-form-urlencoded\r\nAccept-Encoding: gzip,deflate\r\nUser-Agent: Mozilla/4.0\r\nContent-Length: %d\r\nPragma: no-cache\r\nConnection: keep-alive\r\n\r\n%s",argv[2],strlen(postdata),postdata);

if(write(sockfd,buff,strlen(buff)+1) == -1)
    err_exit("write");

while ((n =read(sockfd,recvline,sizeof(recvline))) > 0){
    recvline[n] = 0;
    if(fputs(recvline,stdout) == EOF)
        err_abort("read error");            
}
return (EXIT_SUCCESS); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:18:20.857

套接字连接总是需要一个端点充当客户端，一个端点充当服务器。

但是您可以做的是通过打开客户端和服务器套接字来创建一个既充当客户端又充当服务器的应用程序。

# python - 将来自多个文件的数据列表存储在数组中

> ID：16059445
> 
> 赞同：0
> 
> 时间：2013-04-17T12:01:29.757
> 
> 标签：python, file-io, tkinter

好吧，我正在做的是仅获取一个 .log 文件的内容，将其存储在一个数组中，然后将其输出到多个列表框中，如下所示：

```
filelog_ext=".log" #log extension

#open one log file
f = open("%s\%s%s" % (path,filename,filelog_ext),"r")
#init aray      
array = []
#copy contents of file to array
for line in f:
    array.append( line )
f.close()
#insert each array content to multilistbox
self.mlb.insert (END, ('%s' % (array[0]),'%s' % (array[1]),'%s' % (array[2]),'%s' % array[3])))
    self.mlb.pack (expand=YES,fill=BOTH) 
```

我现在要做的是获取许多 .log 文件的内容，将它们输出到数组中，然后将它们输出到多个列表框中。

我尝试了以下方法，但似乎不起作用：

```
for files in os.listdir("."):        
        if files.endswith(".log"):  #this will take all my files ending with .log

    #not sure how to go about and take all files ending with .log, copying them to array and saving them to the multilistbox mlb 
```

谁能帮帮我吗 ？

更新：@john zwink 我试图整合你的代码不知道我是否以正确的方式做，但它仍然不起作用。错误是“索引列表超出范围”

```
 path = "C:\sdmdownloads"        
    array = []
    for filename in glob.iglob(os.path.join(path, filelog_ext)):
       with open(filename) as f:
           array.extend(f)
           self.mlb.insert (END, ('%s' % (array[0]),'%s' % (array[1]),'%s' % (array[2]),'%s' % (array[3])))
           self.mlb.pack (expand=YES,fill=BOTH) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:15:34.633

像这样的东西？

```
import glob
import os

filelog_ext=".log" #log extension
array = []

for filename in glob.iglob(os.path.join(path, filelog_ext)):
    with open(filename) as f:
        array.extend(f) 
```

# android - 您已经授权您的应用

> ID：16059447
> 
> 赞同：2
> 
> 时间：2013-04-17T12:01:34.617
> 
> 标签：android, facebook-graph-api, oauth

我已将社交身份验证 android.jar 与我的应用程序集成。当我打开 Facebook 活动时，它会将我带到登录屏幕，然后显示“您已经授权您的应用程序”，并带有取消和确定按钮。当我按下任何按钮时，它会给我错误“验证码为空”。

日志如下：

```
04-17 08:24:35.266: I/Choreographer(892): Skipped 50 frames!  The application may be doing too much work on its main thread.
04-17 08:24:36.005: I/Choreographer(892): Skipped 73 frames!  The application may be doing too much work on its main thread.
04-17 08:24:37.226: D/SocialAuth-WebView(892): Override url: fbconnect://success#access_token=BAACCZB9kzh04BAInZAmZCqfeFKRMj6hgee0SPfF88iISLsLm0LST0VedaN4CiHVvJU7ZAZAr37XseCfy2cZBZBpTOvqcLNgIINV1cNdaQ5W2FYEtSvZCtZBpiQaT9fKTY7U7QPNLlotRJallfpvgKZAH5CYcZAHESWAM0SOnCCbIwsSqF8YM4NmiF8dL7osVZCUJy0JNw8HDXZCre6wZDZD&expires_in=5182406
04-17 08:24:37.306: I/SocialAuthManager(892): Connecting provider : facebook
04-17 08:24:37.306: I/FacebookImpl(892): Retrieving Access Token in verify response function
04-17 08:24:37.348: I/OAuth2(892): Verifying the authentication response from provider
04-17 08:24:37.348: W/System.err(892):  org.brickred.socialauth.exception.SocialAuthException: Verification code is null
04-17 08:24:37.348: W/System.err(892):  at org.brickred.socialauth.oauthstrategy.OAuth2.verifyResponse(OAuth2.java:114)
04-17 08:24:37.348: W/System.err(892):  at org.brickred.socialauth.oauthstrategy.OAuth2.verifyResponse(OAuth2.java:102)
04-17 08:24:37.348: W/System.err(892):  at org.brickred.socialauth.provider.FacebookImpl.doVerifyResponse(FacebookImpl.java:164)
04-17 08:24:37.375: W/System.err(892):  at org.brickred.socialauth.provider.FacebookImpl.verifyResponse(FacebookImpl.java:154)
04-17 08:24:37.375: W/System.err(892):  at org.brickred.socialauth.SocialAuthManager.connect(SocialAuthManager.java:183)
04-17 08:24:37.375: W/System.err(892):  at org.brickred.socialauth.android.SocialAuthDialog$SocialAuthWebViewClient$1.run(SocialAuthDialog.java:266)
04-17 08:24:37.375: W/System.err(892):  at java.lang.Thread.run(Thread.java:856)
04-17 08:24:37.375: D/SocialAuthError(892): org.brickred.socialauth.exception.SocialAuthException: Verification code is null
04-17 08:24:37.375: D/Facebook(892): Authentication Error
04-17 08:24:37.410: I/Choreographer(892): Skipped 31 frames!  The application may be doing too much work on its main thread.
04-17 08:24:38.165: I/Choreographer(892): Skipped 48 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:36:17.340

**[http://code.google.com/p/socialauth-android/issues/detail?id=52](http://code.google.com/p/socialauth-android/issues/detail?id=52)**

这已经解决了。Facebook 对其登录机制进行了一些更改，这就是发生这种情况的原因（根据社交身份验证人员的说法）。

# windows - 如何在 Windows7 上安装 node-expat

> ID：16059455
> 
> 赞同：2
> 
> 时间：2013-04-17T12:01:55.327
> 
> 标签：windows, node.js, npm, node-expat

我正在尝试在 Windows 7 上安装 node expat，但出现以下错误：

```
VCBUILD : error : project file 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\node_modules\node-expat\build\deps\libexpat\expat.vcproj' was not found or not a valid project file. 
```

知道我能做什么吗？

# linux - 自动化需要 MASSL 密码的 wget 请求

> ID：16059459
> 
> 赞同：1
> 
> 时间：2013-04-17T12:02:02.403
> 
> 标签：linux, ssl, ssl-certificate, wget

我们正在升级我们的 JBoss 服务器以仅允许 MASSL 请求（即需要客户端和服务器证书才能成功的请求）。

我们使用 wget 调用这个服务器上的一个简单的 servlet：

```
wget -O - --no-check-certificate "https://server.com/app/do/something" 2>&1 
```

此 wget 调用每 4 小时自动触发一次。

由于引入了 MASSL，我们现在传递一个证书：

```
wget -O - --ca-certificate=cert.pem --certificate=othercert.pem "https://server.com/app/do/something" 2>&1 
```

这会提示我们输入密码，总的来说它工作正常。

**问题：** 我们想自动化这个 wget 调用，但我们不能自动输入密码。例如，当包含此 wget 的脚本每四个小时调用一次时，我们不希望它提示输入密码，而是自动传递密码。

我试过管道它：

```
echo password | wget ...

wget ... | password 
```

传递`username`和`password`参数：

```
wget ... --user=myuser --password=mypassword ... 
```

并且还尝试使用该`yes`命令，但无济于事。

有什么建议么？是否有任何替代 wget 可能有效的方法？

# image - 使用 OpenCV 和 Gabor 过滤器比较纹理

> ID：16059462
> 
> 赞同：4
> 
> 时间：2013-04-17T12:02:17.467
> 
> 标签：image, opencv, image-processing, computer-vision

作为项目的一部分，我正在尝试测量从图像中采样的 2 个纹理的相似程度。（我取了 2 个大约 40 x 40 像素的平方样本）。

采集样本后，我将它们传递给一组 Gabor 滤波器（具有 2 个滤波器大小和 6 个方向），因此现在每个样本都有 12 个滤波器输​​出。

目标是计算一个**度量**，告诉我们**2 个纹理有多相似**，这样如果 2 个样本是木头或砖块，度量分数很低（差异很小），但如果 1 个样本是岩石，另一个是织物那么度量应该很高（纹理非常不同）。

问题是：**如何使用此输出测量纹理差异？** 有人建议我为每个样本创建一个输出分布，然后测量两个分布之间的距离，但我只是不知道该怎么做。

过滤器看起来像（不完全是）：

![过滤器组](https://www.robots.ox.ac.uk/~vgg/research/texclass/figs/with/mr8filters.jpg)

输出看起来像这样（我借用了这张图片作为示例）

![在此处输入图像描述](https://i.stack.imgur.com/9xPrQ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:44:02.107

编码纹理的基本方法是计算窗口上的直方图滤波器响应。然后使用直方图比较纹理。一个好的开始方法是查看[Local Binary Patterns](http://en.wikipedia.org/wiki/Local_binary_patterns)。

LBP 直方图的简化解释：输入图像中的每个像素都由其 3x3 邻域描述。邻域通过阈值转换为索引 [0,255]。然后索引识别直方图中的 bin。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-21T17:19:19.433

我知道这是一个旧线程，但这个页面可能会帮助未来的访问者：[https ://scikit-image.org/docs/dev/auto_examples/features_detection/plot_gabor.html](https://scikit-image.org/docs/dev/auto_examples/features_detection/plot_gabor.html)

这是 Python 中的一个示例，它使用过滤后图像的均值和方差作为判别特征（请参阅函数“compute_feats”）。用于比较的指标只是最小二乘误差（请参阅函数“匹配”）。

# matlab - 离质心最远点的坐标

> ID：16059464
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:02:22.263
> 
> 标签：matlab, image-processing

我已经计算了图像的质心，现在想知道对象边界上离质心最远的点的坐标。

我使用以下代码来计算最大距离。

```
 boundaries = bwboundaries(pad);
thisBoundary = boundaries{1};
boundaryX=thisBoundary(:,1); 
boundaryY=thisBoundary(:,2);
% Get the distances of the boundary pixels from the centroid.
distances= sqrt((boundaryX - a2).^2 + (boundaryY - b2).^2); 
% Scan the boundary to find the pixel on it that is
% farthest from the centroid.
maxRadius = max(distances);
 disp(maxRadius); 
```

如果有人知道如何计算物体边界上离质心最远点的坐标，请告诉我。距质心最远点的距离在上面计算为 maxRadius。这里 a2, b2 是对象 'pad' 的质心坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:11:53.730

在这里，您似乎在问“我如何找到`max`选择哪个输入值作为最大值”。您需要使用的第二个输出参数`max`。对于您的具体情况，这给出了类似的内容：

```
[maxRadius, maxInd] = max(distances);
maxCoord = thisBoundary(maxInd, :); 
```

请阅读函数[的`max`文档](http://www.mathworks.co.uk/help/matlab/ref/max.html)。还请下次更清楚地说明您要问的确切问题。

# solr - Pattern Tokenizer Factory 不使用否定正则表达式

> ID：16059468
> 
> 赞同：1
> 
> 时间：2013-04-17T12:02:29.763
> 
> 标签：solr, schema

我需要我的 tokenizer factory 来拆分除数字、字母、`&`和`:`单引号字符之外的所有内容。

我使用`Solr.PatternTokenizerFactory`如下，

```
<tokenizer class="solr.PatternTokenizerFactory" pattern="[^a-zA-Z0-9&amp;-:]" /> 
```

但是，它的吐痰标记只有空格。不知道我在这做错了什么。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:24:16.607

我弄错了，那是非常愚蠢的错误，我需要`-`按照我的模式逃跑

更改为以下并开始工作

```
<tokenizer class="solr.PatternTokenizerFactory" pattern="[^a-zA-Z0-9&amp;\-:]" /> 
```

# c++ - 如何避免 std::deque 中的`deque iterator not dereferencable`？锁？

> ID：16059469
> 
> 赞同：2
> 
> 时间：2013-04-17T12:02:30.247
> 
> 标签：c++, iterator, mutex, deque

目前在我的项目中，我有两个静态方法`PushObjects`和`ProcessObject`. 该`PushObject`方法将数据推回静态双端队列，该方法可以由多个线程访问，但`ProcessObject`始终由单个线程使用，用于从顶部检索对象并删除它们。现在我的问题是无论我尝试什么我总是最终（迟早会`deque iterator not dereferencable`出错。关于我可以做些什么来阻止这个问题的任何建议。我的摘要`PushObjects`和`ProcessObject`下面给出

```
 void foo::PushObjects(obj A)
    {
        try
        {
            {//Begin Lock
                boost::lock_guard<boost::mutex> lock(mutex_push);
                mydeque.push_back(A);
            }//End Lock
            condition_read.notify_one(); //Inform the reader that it could start reading 
        }
        catch (std::exception& e)
        {
            __debugbreak();
        }
    }

    This is the static Reader method

    void foo::ProcessObject()
    {
        {//Begin Lock
            boost::unique_lock<boost::mutex> lock(mutex_process);
            while(true)
            {
                    while(mydeque.empty()) { condition_read.wait(lock); }
                    try
                    {
                        if(!mydeque.empty())
                        {
                                obj a = mydeque.front();
                                ......Process the object........
                                mydeque.pop_front();
                        }

                    }
                    catch (std::exception& e)
                    {
                        __debugbreak();
                    }
            }//end while
        }//End lock
    } 
```

从我所读到的是，一旦从双端队列中添加或删除项目，迭代器就会变得无效。有没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:16:17.940

看起来您没有使用相同的互斥锁（`mutex_push`vs `mutex_process`）来读取和写入`deque`. 你需要。在不同的线程上同时写入和读取内存是不安全的。

其他注意事项：

```
obj a = mydeque.front();
......Process the object........
mydeque.pop_front(); 
```

如果你管理你的锁有最短的锁定时间可能会好得多......

```
obj a = std::move(mydeque.front());
mydeque.pop_front();
lock.unlock();
// process the object
lock.lock(); 
```

您可能不需要被锁定（或至少不需要相同的锁）来处理对象。这样，您的编写器仍然可以在您处理时写入双端队列。还要注意的是，这里没有什么可以阻止您成为多生产者多消费者，而不仅仅是多生产者单消费者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:50:48.730

为了扩大戴夫关于尽快解锁的答案，以便在您处理项目时允许并发写入......

您的双端队列可能包含多个项目（例如，当您仍在处理另一个项目时，这些项目已被推送）。为了避免锁定每个项目，您可以将您的双端队列与一个空的本地队列交换，并从该本地双端队列处理您的项目。一些代码会使它更清晰：

```
while (true) {
    std::deque<Obj> tmp_deque;
    {
        std::unique_lock<std::mutex> lock(mutex);
        while (mydeque.empty())
            condition.wait(lock);
        mydeque.swap(tmp_deque);
    }
    while (!tmp_deque.empty()) {
        Obj obj = std::move(tmp_deque.front());
        tmp_deque.pop_front();
        // process obj
    }
} 
```

这样，您最终得到的不是*锁定/获取 1 个项目/解锁/处理 1 个项目，而是**锁定/获取所有项目/解锁/处理所有项目*，因为锁定互斥锁对性能有很大影响，所以效率更高。

显然，**这仅适用于单一消费者模型**。如果您有多个消费者，您真的不希望将所有项目排入单个消费者并让所有其他消费者闲置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T12:18:42.893

您需要有**一个**互斥锁来访问`mydeque`无读/写互斥锁。并且对双端队列的任何访问都必须在互斥锁锁定时进行。即使您只是检查 empty()。由于双端队列操作不是原子的，你最终可能会`mydeque.empty()`返回 false，同时在 push_back 的中间处于某种半空状态。因此您需要 `boost::lock_guard<boost::mutex> lock(mutex_push);`在每次访问之前访问 mydeque。或在更改双端队列内容的整个操作期间。

# android - SQLite 数据库错误

> ID：16059470
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:02:30.683
> 
> 标签：android, sqlite

我正在尝试创建一个 Android 应用程序，我需要一个数据库。我用 SQLite 创建了我的数据库，但是当我运行我的应用程序时，我收到了这个错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo 
{com.example.budgetmanagerapp/com.example.budgetmanagerapp.Activity.Home}: 
android.database.sqlite.SQLiteException: near "existsday": syntax error (code 1): , while 
compiling: create table if not existsday(idDay integer primary key autoincrement, day integer); 
```

这是我的代码：

```
public class DatabaseHelper extends SQLiteOpenHelper{
public static final String TABLE_DAY = "day";
public static final String ID_DAY = "idDay";
public static final String DAY = "day";

public static final String CREATE_TABLE_DAY = "create table if not exists" + TABLE_DAY + "("
        + ID_DAY + " integer primary key autoincrement, " + DAY +" integer);";

private static final String DATABASE_NAME ="budgetManager.db";
private static final int version = 1;

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, version);
  }

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_TABLE_DAY);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_PERSON);
    onCreate(db);
}

}

public class Home extends ListActivity {

protected SQLiteDatabase db;
protected Cursor cursor;
protected ListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    db = (new DatabaseHelper(this)).getWritableDatabase();

    viewData();
}

@SuppressWarnings("deprecation")
public void viewData(){
    cursor = db.rawQuery("SELECT day FROM day", 
                        null);

    adapter = new SimpleCursorAdapter(this, R.layout.home, 
                                    cursor, new String[]{"day"}, 
                                    new int[] {R.id.ceva});
    setListAdapter(adapter);
}
} 
```

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:06:26.483

在保留字`exists`和表名之间添加空格，如下所示。

```
public static final String CREATE_TABLE_DAY = "create table if not exists " + TABLE_DAY + " (" + ID_DAY + " integer primary key autoincrement, " + DAY +" integer);"; 
```

# python - 为什么 python 库不作为 pyc 提供？

> ID：16059476
> 
> 赞同：6
> 
> 时间：2013-04-17T12:02:54.653
> 
> 标签：python, pyc

如果我理解正确，Python 编译文件是跨平台的。那么为什么大多数发布的库都需要构建和安装呢？

是分发者的懒惰，还是说他们可以简单地分发 pyc 文件是错误的？如果不是这种情况，我如何分发一个包含库作为先决条件的 python 脚本文件，而不需要用户构建和安装库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:05:24.573

因为包含的代码的格式可以随着每个（主要）Python 版本而改变，而源代码至少*可以*兼容。格式在实现之间也可能不同（其中有几个，最著名的两个是[CPython 和 PyPy](https://stackoverflow.com/questions/2591879/pypy-how-can-it-possibly-beat-cpython)。

有关.pyc 文件的内部结构的更多信息，请参阅[本文。](http://nedbatchelder.com/blog/200804/the_structure_of_pyc_files.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:09:00.023

它们是跨平台的，但不是跨版本的，也不是跨实现的。换句话说，不同的 CPython 版本可能会遇到同一个 .pyc 文件的问题。

而且，如果您查看其他实现，例如 PyPy、IronPython、Jython 等，您将根本无法使用 .pyc 文件。

此外，.pyc 文件对应一个 .py 文件。您（可能）想到的是包含用 C 编写的部分的库。它们必须编译为平台相关文件（.pyd、.dll、.so 等）才能工作。由于没有多少开发人员拥有所有支持的平台，他们将其作为源提供，并将其留给用户系统进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:15:55.983

从 .py 文件创建 .pyc 文件的过程由解释器透明地完成。一些安装程序在安装时生成它们的原因纯粹是为了避免必须在第一次运行脚本时生成它们 - 通常是出于速度原因，但也因此 .pyc 可以最终在系统范围内（非用户-writable) 目录。与编译语言，甚至是用 C 编写的 Python 模块不同，这些文件首先存在*并不是*技术要求——如果存在，您将无法将自己的脚本直接放入`python`并让它们在没有编译步骤。

任何在安装之前严格要求构建步骤的库肯定都有一个可以编译为本机代码的组件——这当然*不是*跨平台的。对于任何纯 python 库，将模块的源目录树放在 PYTHONPATH 中的某个位置总是足够的，直接从下载它的存档中复制它。

# list - Prolog - Creating a list by iterating facts

> ID：16059485
> 
> 赞同：0
> 
> 时间：2013-04-17T12:03:14.907
> 
> 标签：list, prolog

I am new in Prolog and wanted to learn it. I have been trying to create a list while iterating facts but list that was created one step back refreshing and lost the data. How can I keep the data and add elements to list?

```
funct(a,b,1).
funct(b,c,2).
funct(b,d,3).

creatingList(X,Y,R):- funct(X,Y,A), funct(Y,Z,B), \+member(B,R) , append(R,B,R). 
```

I tried that , but when I trace it keeps losing data, which I expect is R = [1,2,3].

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:11:27.597

@User 是正确的：

```
?- findall(funct(X,Y,Z), funct(X,Y,Z), Functs).
Functs = [funct(a, b, 1), funct(b, c, 2), funct(b, d, 3)]. 
```

`setof/3`并且`bagof/3`可能也适用，但它们的语义有点复杂。

# java - How do static objects work?

> ID：16059486
> 
> 赞同：2
> 
> 时间：2013-04-17T12:03:19.030
> 
> 标签：java, object, static

I know how to work with objects.. but one thing in particular has me scratching my head.
Static methods.

I'll give an example.

```
Toolkit theKit = Toolkit.getDefaultToolkit(); 
```

I think that the `theKit` object now holds `new Toolkit();` class.. but im not sure.

Furthermore I can do `theKit.getScreenResolution();` now with `theKit` reference variable.

Is that because `Thetoolkit` class it self contains that method?

Forgive me, now that I wrote it all out it seems obvious but ill ask anyway. Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:06:04.060

`static`方法属于类。不是实例。
所有`static`成员变量也是如此。
因此，您无需创建对象的实例即可使用该方法。由于它属于该类，您只需通过类名访问它。
方法的常见用法`static`是实用方法。您不使用对象（并且在您的类层次结构设计中存在具体对象可能没有意义），因此您通过类访问该方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:09:41.160

我可以有一个确实创建类实例的静态方法。静态方法不属于实例，而是属于类本身，因此您无需拥有类的实例即可使用其静态方法。简单的例子：

```
public class MyClassExample(){

public static MyClassExample getDefaultInstance(){
 return new MyClassExample();
}

} 
```

然后你可以用这种方式实例化 MyClassExample：

```
MyClassExample example = MyClassExample.getDefaultInstance(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:09:42.437

```
Toolkit theKit = Toolkit.getDefaultToolkit(); 
```

上一行是`factory`获取 Class 实例和`getDefaultToolkit()`是一个工厂方法，它显然是一个静态方法（所以你直接使用类名调用），它将返回类的实例（在你的情况下它是 Toolkit 类） .我们也在单例的情况下使用这种技术。

关于您的问题，是的，因为该类包含方法 getScreenResolution()，因此您可以调用它，这很明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:10:08.077

`Toolkit.getDefaultToolkit()`是获取 ToolKit 类实例的静态工厂辅助方法。'theKit' 是一个有效的实例，您可以像使用 new 创建对象实例时一样使用它。*正如有效的 Java 书籍“考虑静态工厂方法而不是构造函数*”中提到的那样，拥有这样的辅助方法是最佳实践

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T12:11:38.783

该方法意味着您不需要类的实例化对象`getDefaultToolkit()`来访问此方法。当 JVM 知道该类时，它就在那里，并且可以随时访问静态方法。这是因为他们永远不会改变！他们不会改变他们的状态，他们永远不会做其他事情，而是在这种情况下返回一个对象。`static``Toolkit``Toolkit`

我在这里说了。在内部，我猜测该方法`Toolkit.getDefaultToolkit()`会执行以下操作：

```
public Toolkit getDefaultToolkit(){
   return new Toolkit();   
} 
```

好吧，这太容易了，但是在该静态方法中的某个地方将创建并返回一个对象。

所以之后你的变量`theKid`实际上持有对真实的引用 `Object`。一个非静态实例，可以更改和执行操作.. 例如，它可以为您提供当前屏幕*的*`theKit.getScreenResolution()`分辨率..不仅仅是分辨率.. 而是*精确的*分辨率（每个设备上的每个屏幕都会发生变化） – 意味着此方法不能是静态的，但需要一个对象。

 *** * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T12:07:27.360

这是一种设计模式。现在考虑到这种情况，有必要`Toolkit`保持单例。所以库设计者确保它本身保持单例，提供一个方法来`getDefaultToolkit`.

`getDefaultToolkit`返回一个`Toolkit`可供图书馆用户使用的。

现在为了提供对这种方法的访问，假设不能通过`Toolkit`“new Toolkit()”进行初始化，库提供了一个静态方法，可以访问它**

# php - PHP - 从所有 html、css 和 JS 代码中清除文本

> ID：16059491
> 
> 赞同：0
> 
> 时间：2013-04-17T12:03:43.240
> 
> 标签：php, code-cleanup

我需要从所有 HTML、CSS 和 JS 代码中清除一些文本。

我正在使用此功能，但有时那里有一些内联代码。

你有比我使用的更好的功能吗？

这是我的代码：

```
function cleanContent($str){
    $str = str_replace(array("  "), " ",str_replace(array("   "), "", $str));

    $pattern3 = "/\..*?{.*}/";
    $str = preg_replace($pattern3,"",$str);

    $pattern1 = "/#.*?{.*?}/";
    $str = preg_replace($pattern1,"",$str);

    $pattern2 = "/.:.*?{.*?}/";
    $str = preg_replace($pattern2,"",$str);

    $pattern4 = "/(body|ul|li|a|img|tr|td|html)\s{.*?}/";
    $str = preg_replace($pattern4,"",$str);

    return $str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:06:02.013

要从 HTML 中清除，您应该使用 strip_tags();

```
string strip_tags ( string $str [, string $allowable_tags ] ) 
```

第二个参数是带有允许标签的数组。编写自己的函数是没有意义的。

此功能还将删除包含在和标签中的 css 和 js。

# xml-parsing - 解析xml java时面临的错误

> ID：16059496
> 
> 赞同：0
> 
> 时间：2013-04-17T12:03:55.000
> 
> 标签：xml-parsing, jaxb, saxparser

我正在尝试解析一个 Xml 文件，其中一个 pf 标签元素如下

```
126.5�105�15-4�45�-16MnCr5-1 
```

当我尝试使用 jaxb 解析并读取 xml 时，内容被更改为如下

```
126.5 �— 105 �— 15-4�—45°-16MnCr5-1 
```

我不知道为什么我默认也使用 unicode 格式检查它采用 cp1252 格式而不是 UTF-8 格式，即使我在 xml kinldy 帮助中指定了这里是读取传递的 xml 的方法是属性 xml 文件和jaxb类映射

```
protected T readXml(File xmlFile, Class<?> clazz) throws JAXBException, IOException, XMLStreamException {
  JAXBContext jaxbContext = null;
  Unmarshaller unmarshaller = null;
  jaxbContext = JAXBContext.newInstance(clazz);
  unmarshaller = jaxbContext.createUnmarshaller();
  XMLInputFactory factory = XMLInputFactory.newInstance();
  XMLStreamReader streamReader = null;
  streamReader = factory.createXMLStreamReader(new FileReader(xmlFile));
  return (T) unmarshaller.unmarshal(streamReader);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:17:06.650

在从文件中读取内容时尝试传递编码。

```
streamReader = factory.createXMLStreamReader(new FileReader(xmlFile),"UTF-8"); 
```

那应该解决它。

# go - Unmarshalling XML attributes into a named, nested struct

> ID：16059497
> 
> 赞同：2
> 
> 时间：2013-04-17T12:03:57.833
> 
> 标签：go

Unmarshalling attributes from the current XML element into an anonymous struct works:

```
package main

import (
    "encoding/xml"
    "fmt"
)

type Attrs struct {
    Attr1 int `xml:"attr1,attr"`
    Attr2 int `xml:"attr2,attr"`
}
type Element struct {
    Attrs
}

func main() {
    data := `<element attr1="1" attr2="2"></element>`
    v := Element{}
    err := xml.Unmarshal([]byte(data), &v)
    if err != nil {
        fmt.Printf("error: %v", err)
        return
    }
    fmt.Printf("%#v\n", v)
} 
```

This prints `main.Element{Attrs:main.Attrs{Attr1:1, Attr2:2}}` as expected.

If the anonymous struct member is given a name, `v.Attr1` and `v.Attr2` are not unmarshalled.

```
type Element struct {
    AttrGroup Attrs
} 
```

What's the correct tag to use on the struct member in this case?

Edit: [Playground version](http://play.golang.org/p/qcZbR_IFQg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:04:45.853

为什么不这样做呢？除了复杂性之外，我没有看到命名结构给你带来了什么。

（[游乐场](http://play.golang.org/p/jFUwgdh7Gd)）

```
package main

import (
    "encoding/xml"
    "fmt"
)

type Element struct {
    Attr1 int `xml:"attr1,attr"`
    Attr2 int `xml:"attr2,attr"`
}

func main() {
    data := `<element attr1="1" attr2="2"></element>`
    v := Element{}
    err := xml.Unmarshal([]byte(data), &v)
    if err != nil {
        fmt.Printf("error: %v", err)
        return
    }
    fmt.Printf("%#v\n", v)
} 
```

哪个打印

```
main.Element{Attr1:1, Attr2:2} 
```

# django - 为什么在中间件中调用 logout() 不适用于当前请求？

> ID：16059502
> 
> 赞同：1
> 
> 时间：2013-04-17T12:04:06.923
> 
> 标签：django, django-authentication, django-middleware, django-sessions

我已经构建了一个小型自定义中间件来注销用户并有条件地刷新会话。我希望当前请求让用户注销。但是，对于当前正在处理的请求/响应，我仍然有完整的响应，就好像用户没有被注销并且会话完全可用（意外）。所有后续请求都不再有会话（如预期的那样）。

深入挖掘，`SessionStore`似乎会话只是一个模型，并且仅通过浏览器发送的 cookie 中的会话密钥在请求中进一步恢复。此外，这`logout()`似乎也因此无效。

我如何才能真正在中间件中注销用户？我必须手动从数据库中删除会话吗？这似乎太痛苦了。

在`myapp/middleware.py`：

```
from django.contrib.sessions.middleware import SessionMiddleware
from django.contrib.auth import logout

class SomeSessionMiddleware(SessionMiddleware):

def process_response(self, request, response):
    if somecondition:
        logout(request)
        request.session.flush()
        print "flushing session, log out user" # I see this.
    # And just call the super class
    return super(SomeSessionMiddleware, self).process_response(request, response) 
```

在`settings.py`：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    #'django.contrib.sessions.middleware.SessionMiddleware',
    'myapp.middleware.SomeSessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:14:17.297

## 页面已经在那里呈现

使用，这在渲染*响应*`process_response`时被调用得很晚。我需要改用它来执行此操作。此外，请注意，定义的中间件以相反的顺序调用响应。*`process_request`*

 *这将起作用：

```
from django.contrib.sessions.middleware import SessionMiddleware

class SomeSessionMiddleware(SessionMiddleware):
def process_request(self, request):
    if somecondition:
        request.session.flush() 
```*

# extjs - How to get last load params from Ext.Store

> ID：16059503
> 
> 赞同：1
> 
> 时间：2013-04-17T12:04:09.880
> 
> 标签：extjs, store

To load store data I use:

```
this.getTestStore().load({
    params: {
        item_id: record.get('id')
    }
}); 
```

How to obtain last load params (`{ item_id: record.get('id') }`) from this store in the future?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-24T20:52:18.103

从您的商店：

store.lastOptions.params

# jquery - ASP.NET：单击按钮后显示 jQuery 对话框

> ID：16059506
> 
> 赞同：0
> 
> 时间：2013-04-17T12:04:16.493
> 
> 标签：jquery, asp.net, vb.net, serverside-javascript, registerclientscriptblock

在我的 ASP.NET 页面上，我有一个按钮。单击服务器端后，应该生成一个 div，代表 jQuery 对话框和相关 JavaScript 块的内容。但是单击按钮后，页面上既不包含 div 也不包含 JavaScript。单击时注册控件和脚本是否为时已晚，或者为什么不起作用？

```
'create JavaScript block
Dim strClientScript As String = String.Empty
Dim strMessageControlId As String = "jQueryDialog" & Me.MyContainer.Controls.Count
strClientScript &= "$(function(){" & NewLine
strClientScript &= "    $(""#" & strMessageControlId & """).dialog({" & NewLine
strClientScript &= "        bgiframe:true, " & NewLine
strClientScript &= "        autoOpen:true, " & NewLine
strClientScript &= "        modal:true, " & NewLine
strClientScript &= "        closeOnEscape:false, " & NewLine
strClientScript &= "        width:600, " & NewLine
strClientScript &= "        height:450 " & NewLine
strClientScript &= "    });" & NewLine
strClientScript &= "});"

'create div for the jQuery Dialog
Dim strHtml As String = String.Empty
strHtml &= "<div id=""" & strMessageControlId & """ title=""My title"">" & NewLine
strHtml &= strMessage & NewLine
strHtml &= "</div>"

'add the HTML to the page
Me.MyContainer.Controls.Add(New LiteralControl(strHtml))

'register the Javascript
Me.Page.ClientScript.RegisterClientScriptBlock(Me.GetType, "Key." & strMessageControlId, strClientScript, True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:06:40.050

我以前做过。它不适合你，但值得一试。在页面上创建 div 元素并在其上放置“display:none”。在客户端使用 jquery，为您的按钮添加一个单击事件。在 click 事件中附加数据或编写一个函数来填充并显示 div 或显示您想要在其中显示的内容。真的没有理由做这个服务器端。在您的 click jquery click 事件中，您可以将要添加到 div、样式等的所有属性链接起来，以使其看起来像您想要的那样。如果您需要更好的解释，我会尝试找到一个示例。

# ios - 使用 NSFetchedResultsController 返回具有有序关系的对象

> ID：16059512
> 
> 赞同：0
> 
> 时间：2013-04-17T12:04:29.453
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller, nssortdescriptor

我有以下核心数据结构：

```
Event <<-->> Team <<-->> Player 
```

（所有关系都是多对多关系，Event>Team & Team>Player 是**有序**关系）。

伪代码...

```
self.event = an instance of Event that has been populated earlier on in the process.
linkedTeams = the relationship between Team & Player.

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *thisEntry = [NSEntityDescription entityForName:@"Player" inManagedObjectContext:self.doc.managedObjectContext];
[fetchRequest setEntity:thisEntry];

NSPredicate *fetchPredicate = [NSPredicate predicateWithFormat:@"ANY %@ IN linkedTeams", self.events.teams];
[fetchRequest setPredicate:predicate];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.doc.managedObjectContext sectionNameKeyPath:nil cacheName:nil]; 
```

这将拉出 self.event.teams 中的所有玩家，谓词有效，但是，我想让玩家按 Team 和 Player 排序（通过使用有序关系），并分成几个部分（使用 Team 作为部分标题）。

如果直接从 Players 实体中提取，我如何根据 Ordered 关系对 Players 进行排序，似乎这对于 NSSortDescriptor 是不可能的？

我不能有“sectionNameKeyPath = linkedTeams.name”，因为linkedTeams 是一对多关系（即使在这种情况下它只会返回一个团队）。有什么方法可以使用 NSFetchedResultsController 执行此操作，还是我最好只是从我的属性 self.event 创建自己的数据源？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:36:52.857

问题是一个玩家可以在您的表格视图中出现两次或多次（因为一个玩家可以在多个团队中）。很难使用 fetched results 控制器多次获取实体。

相反，您可以获取团队。调整您的`datasource`方法以引用团队名称作为部分标题，并使用与玩家的有序关系填充行。现在，如果一名球员在多支球队中，它只会再次显示。

如果您不希望一名球员加入两支以上的球队，则需要将数据模型更改为

```
Event <<-->> Team <--->> Player 
```

你的任务应该是微不足道的。

*NB：此外，在我的经验中，有序关系的用处有限，而且在许多情况下，它的灵活性非常麻烦且容易出错。在所有情况下，我都引入了一个`sequence`属性来自己跟踪订单。*

# groovy - How to integrate Groovy WIth ZK Framework Application?

> ID：16059514
> 
> 赞同：1
> 
> 时间：2013-04-17T12:04:34.727
> 
> 标签：groovy, zk

I want to integrate **Groovy** with my **ZK Framework** web application .Any one know how we can integrate Groovy in ZK project?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:18:12.293

[ZK+Groovy 脚本集成] [1](http://zkframeworkhint.blogspot.in/2013/04/how-to-integrate-groovy-with-zk-web.html)由于我在我的 ZK Web 应用程序中使用 Maven ..所以我必须进行这些更改才能从我的 ZK WebApplication运行**GroovyScript ..**

1.  首先我必须在 pom.xml 文件中添加这个依赖项

> ```
>  <dependency>
>       <groupId>org.codehaus.groovy</groupId>
>       <artifactId>groovy-all</artifactId>
>       <version>2.1.2</version>
>   </dependency> 
> ```

1.  第二件事我必须创建一个 Groovy 脚本文件并将其添加到**/src/main/resources**文件夹中。使用以下代码。

> def showComponents( ) { myComponentList = [ "Type", "Status", "Sub Type", "Parent ID", "Work", "Row ID" ] return myComponentList; }

1.  第三个也是最重要的事情是如何在创建的 Groovy 脚本代码之上运行。你知道上面的代码返回字符串列表，所以我们可以在我的 Java 类中使用下面的代码。

    ```
    public List executeGroovyScript(){ 
        List<String> list = null;
        try {
                ClassLoader parent = getClass().getClassLoader();
                GroovyClassLoader loader = new GroovyClassLoader(parent);
                Class groovyClass = loader.parseClass(FileUtils.toFile(
                    this.getClass().getResource("/UserSelectedComponents.groovy")));
                GroovyObject groovyObject = (GroovyObject) groovyClass.newInstance();
                Object[] args = {};
                list = (List)groovyObject.invokeMethod("showComponents", args);

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return list;} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:09:38.490

[您可以使用支持 Groovy 的 Grails 的 ZK 插件，您可以在本文](http://groovy.dzone.com/articles/implementing-load-demand-using)中阅读有关它的更多信息并在[此处](http://grails.org/plugin/zk)下载

# ios - Tag from a array of buttons to open a new view with tag parameter

> ID：16059519
> 
> 赞同：0
> 
> 时间：2013-04-17T12:04:53.237
> 
> 标签：ios, objective-c

I have a problem with opening a new view from my array buttons. I have a NSLog message in place that is outputting a int that all works fine.

How do I get this button to open a viewController with my tag as a parameter. This tag / parameter corresponds with a list of images that also seems to work fine.

How would I add this together?

Here is a code snippet from imageViewController.m:

```
-(void)thumbClickAction:(id)sender{

CustomImageView *club = (CustomImageView*)sender;

//debug line
NSLog(@"image tag : %d",club.tag); 
```

I have no clue what I'm doing wrong I hope you can help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:19:14.030

把方法作为`-(void)thumbClickAction:(UIButton *)sender`例子
`-(void)thumbClickAction:(id)sender`

```
-(void)thumbClickAction:(UIButton *)sender
{
  NSLog(@"my button tag is - %d ",sender.tag);
  myNewViewController *newView = [[myNewViewController alloc] init];
  newView.myTag = sender.tag;
  [self presentModalViewController:newView animated:YES];
} 
```

在上面的代码中，当您单击按钮时，创建对象`myNewViewController`会将您传递`sender.tag`给 variale `myTag`（`myTag`是`NSString`Variale on ），然后按钮的标签与at一起使用并根据需要触发 Query。`myNewViewController``myTag``myNewViewController`

# c# - GridView is adding new rows, but is not displaying values

> ID：16059520
> 
> 赞同：0
> 
> 时间：2013-04-17T12:04:54.570
> 
> 标签：c#, asp.net, session, gridview, datatable

**Background**

So I just started working in `ASP.Net` a few days ago. On my webpage I am creating a contact table for a user to populate and then submit to a database. Now what I have the user doing is entering information into various text boxes and then clicking an "Add Contact" button which then adds the content to a `DataTable` which is stored in a `Session` object. The `DataSource` of my `GridView` is the `DataTable`.

**Current State**

*Updated Click Event Code*

Whenever I click the "Add Contact" button a new row is added to my `GridView`, but nothing shows up in the cells of the `GridView`.

Code:

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            dt.Columns.Add("First", typeof(String));
            dt.Columns.Add("Last", typeof(String));
            dt.Columns.Add("Email", typeof(String));
            dt.Columns.Add("Phone", typeof(String));
            Session["TempTable"] = dt; 
            GridView1.DataSource = dt;
        }
        else
        {
            dt = (DataTable)Session["TempTable"];
            GridView1.DataSource = dt;
        }
    }

    protected void AddButton_Click(object sender, EventArgs e)
    {
        dt = (DataTable)Session["TempTable"]; // Fetching datatable from session

        DataRow dr = dt.NewRow(); // Adding new row to datatable
        dr[0] = "Jenny";
        dr[1] = "LastName";
        dr[2] = "Jenny@hotmail.com";
        dr[3] = "867-5309";
        dt.Rows.Add(dr);

        Session["TempTable"] = dt;   // update datatable in session
        GridView1.DataSource = dt;   // updated datatable is now new datasource
        GridView1.DataBind();        // calling databind on gridview
    } 
```

**Question**

Is there a property in `GridView` that I am not setting or is there something fundamentally wrong with my code? Any help toward a solution would be fantastic. Thanks in advance.

**Solution**

I made the suggested changes by Bart De Meyer to my `AddButton_Click` event and set the `AutoGenerateColumns` property of my `GridView` to `true`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:09:10.543

您的 Click 事件将在页面加载事件之后执行。

在您的点击事件中：

*   从会话中获取数据表
*   将新行添加到数据表
*   更新会话中的表
*   将更新的数据表指定为 gridview 数据源
*   在你的 gridview 上调用 DataBind

问题更新后。我试了一下：

```
private DataTable dt;

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        dt= new DataTable();

        dt.Columns.Add("First", typeof(String));
        dt.Columns.Add("Last", typeof(String));
        dt.Columns.Add("Email", typeof(String));
        dt.Columns.Add("Phone", typeof(String));
        Session["TempTable"] = dt;
        grid.DataSource = dt;
    }
    else
    {
        dt = (DataTable)Session["TempTable"];
        grid.DataSource = dt;
    }
}

protected void btnAdd_Click(object sender, EventArgs e)
{
    dt = (DataTable)Session["TempTable"]; // Fetching datatable from session

    DataRow dr = dt.NewRow(); // Adding new row to datatable
    dr[0] = "Jenny";
    dr[1] = "LastName";
    dr[2] = "Jenny@hotmail.com";
    dr[3] = "867-5309";
    dt.Rows.Add(dr);

    Session["TempTable"] = dt;   // update datatable in session
    grid.DataSource = dt;   // updated datatable is now new datasource
    grid.DataBind();        // calling databind on gridview
} 
```

应该工作： ![在此处输入图像描述](https://i.stack.imgur.com/u0hLh.png)

备注：Gridview ID参数=grid 按钮点击事件=btnAdd_Click

# clojure - How to implement a type system with clojure core.logic

> ID：16059531
> 
> 赞同：2
> 
> 时间：2013-04-17T12:05:27.933
> 
> 标签：clojure, static-typing, clojure-core.logic

I read in the [interview with Rich Hickey](http://codequarterly.com/2011/rich-hickey/) that he would be interested in "using logic systems in place of a type system for Clojure". I also bumped into this statement in a SO answer, [https://stackoverflow.com/a/6324228/380587](https://stackoverflow.com/a/6324228/380587) I can't see how logic and type system are related.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:46:31.340

Clojure 目前使用 JVM 提供的类型系统。你可以使用普通的旧宏在它之上实现一个新的类型系统。这种新类型系统还可以提供运行时检查。就类型检查器而言（对于现有的基于 JVM 的类型系统或您自己的基于宏的类型系统），可以使用 core.logic 实现，类型检查器和 core.logic 之间的关系是类型检查器任务是查看代码中的静态类型注释并验证是否满足约束和关系，并且 core.logic 是一个可用于解决与约束和关系检查相关的问题的系统。

所以基本上，类型检查器是一个适合使用逻辑编程解决什么样的问题的问题。

# javascript - 获取孩子的父母的 index() 值

> ID：16059534
> 
> 赞同：3
> 
> 时间：2013-04-17T12:05:39.507
> 
> 标签：javascript, jquery, gallery, selector, indexing

如何获取与单击的**子**元素、元素的**文档相关的****父**元素的索引值？****`$(this)`****

 ****## HTML

```
<html>
   <body>
      <header>
         <div class="gallery">
            <div class="controls">
               <button class="next"></button>
               <button class="previous"></button>
            </div>
         </div>
      </header>
      <section>
         <section>
            <article>
               <div class="gallery">
                  <div class="controls">
                     <button class="next"></button>
                     <button class="previous"></button>
                  </div>
               </div>
               <div class="gallery">
                  <div class="controls">
                     <button class="next"></button>
                     <button class="previous"></button>
                  </div>
               </div>
            </article>
         </section>
      </section>
   </body>
</html> 
```

在此 HTML 中，可以在正文中您喜欢的任何位置声明画廊。所以我需要一个“智能”选择器来解决这个问题。

## 伪 JavaScript

```
$('.controls button').click(function() {
   var hope = $(this).parents('.gallery').index();
   alert(hope);
} 
```

## **预期**产出

**场景**
单击本**文档中****第二个**图库的按钮：

 **```
1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:11:46.150

尝试这个：

```
$('.gallery').index( $(this).parents('.gallery') ); 
```

`.index()`在它所应用的元素组中查找传递元素的索引。

看看我的[工作 jsFiddle 示例](http://jsfiddle.net/mBmyL/)。

**来源**

[jQuery API - .index()](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:15:05.910

当您调用 index() 时，它会为您提供相对于您选择的元素集合的位置，在这种情况下，

```
$(this).parents('.gallery') 
```

相反，您希望它与整个文档中的画廊相关，因此您需要：

```
$('.gallery').index($(this).parents('.gallery')) 
```******

# mysql - MySQL 5.6 LOAD XML LOCAL INFILE 和空 XML 元素

> ID：16059537
> 
> 赞同：3
> 
> 时间：2013-04-17T12:05:52.623
> 
> 标签：mysql, xml, linux, centos

我有大量相当大的 XML 文件，我想将它们导入 MySQL 表中。我正在运行 Centos 6.3 和 MySQL 5.6，我最初尝试了 5.5，但遇到了问题，后来发现了 5.5 中关于空 XML 标签的错误，所以我认为这已经在 5.6 中解决了。

XML 文件本身包含一些我不感兴趣的元素，因此插入数据的表包含的字段比 XML 文件中的元素少得多，但据我所知，这不应该是问题。所有字段名称都对应于 XML 文件中的元素名称。

我有这张桌子

```
 CREATE TABLE `products` (
        `sku` BIGINT(20) UNSIGNED NOT NULL,
        `productId` BIGINT(20) UNSIGNED NOT NULL,
        `name` VARCHAR(250) NULL,
        `type` VARCHAR(250) NULL,
        `format` VARCHAR(250) NULL,
        `albumTitle` VARCHAR(250) NULL,
        `artistName` VARCHAR(250) NULL,
        `upc` BIGINT(15) UNSIGNED NULL,
        `shortDescription` TEXT NULL,
        `image` VARCHAR(100) NULL,
        INDEX `Index 1` (`productId`),
        INDEX `Index 2` (`name`),
        INDEX `Index 3` (`type`),
        INDEX `Index 4` (`format`)
    ) 
```

XML 格式为

> ```
>  <products>
>        <product>
>            ...
>        </product>
>        ...
>    </products> 
> ```

我用它来插入数据

```
LOAD XML LOCAL INFILE 'filename.xml' INTO TABLE products ROWS IDENTIFIED BY '<product>'; 
```

正在插入正确数量的行，但数据库中的所有字段都不包含任何内容或为 NULL。这似乎与我在 5.5 中看到的问题相同，其中包含空标签的 XML 与未处理并导致这种结果`<sku />`相反。`<sku></sku>`

我想我的问题是我能做些什么来防止这种行为。我这样做正确吗？

我曾考虑过尝试查找和替换所有空标签，但这超出了我在 Linux 中的知识范围，所以也许这是一种选择，有人可以提出一种实现它的方法，这将是一个很大的帮助，但任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:47:40.030

为了回答我自己的问题并以防其他人遇到此问题，我所做的是创建一个简单的 bash 脚本以从每个文件中删除任何空节点。我调用 clean.sh 的 bash 脚本，它包含以下内容

```
for file in *xml
do
        echo "Processing $file"
         sed 's/<.*\/>//g' $file > tt
         mv tt processed/${file}
done 
```

请注意，我创建了一个名为“已处理”的新目录，其中放置了已处理的文件。

要运行脚本（假设您当前的位置是脚本所在的位置），您只需运行

```
sh clean.sh 
```

运行相同的 SQL 查询后：

```
LOAD XML LOCAL INFILE 'filename.xml' INTO TABLE products ROWS IDENTIFIED BY '<product>'; 
```

正确的数据被导入到数据库表中。我的下一步是创建另一个 bash 脚本来导入所有 XML 文件。

希望这可以帮助某人。

# php - 我的 SQL 更新错误

> ID：16059542
> 
> 赞同：0
> 
> 时间：2013-04-17T12:06:05.747
> 
> 标签：php, mysql, sql-update

在过去的一个小时里，我一直在挠头，只是无法让它工作。

执行此查询：

```
$dbtoken = mysql_real_escape_string($invite_token);
$dbexpire = mysql_real_escape_string($invite_expire);
$dbid = mysql_real_escape_string($uid);
$update_user = mysql_query("UPDATE inviters SET invitetoken='$dbtoken', inviteexpire='$dbexpire' WHERE uid='$dbid'");
$save = mysql_query($update_user) or die(mysql_error()); 
```

它给了我这个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“1”附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:09:59.507

您将第一个查询的结果作为第二个查询的 sql 语句发送：

```
$update_user = mysql_query("UPDATE inviters SET invitetoken='$dbtoken',
inviteexpire='$dbexpire' WHERE uid='$dbid'");
$save = mysql_query($update_user) or die(mysql_error()); 
```

$update_user 包含结果，并将其反馈给 mysql_query。试试这个：

```
$update_user = "UPDATE inviters SET invitetoken='$dbtoken',
inviteexpire='$dbexpire' WHERE uid='$dbid'";
$save = mysql_query($update_user) or die(mysql_error()); 
```

顺便说一句：使用 Mysqli 而不是 Mysql_ 语句，它们已被弃用且不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:11:01.897

出现错误您尝试执行两次查询。删除它的第二次执行。即删除它

```
 $save = mysql_query($update_user) or die(mysql_error()); 
```

它正在尝试这样做

```
$save = mysql_query(1); 
```

这是错误的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:08:53.273

你正在做`mysql_query();`两次。一次在最后一行。一旦在它上面的行中。

第一次返回`1`（成功）

第二次尝试`1`作为查询执行

附言。挠头一个小时会引起皮肤刺激。

# java - 如何在未经用户许可的情况下在 Firefox 中运行小程序

> ID：16059549
> 
> 赞同：0
> 
> 时间：2013-04-17T12:06:45.700
> 
> 标签：java, security, applet

我有一个在 Firefox 中运行的 Java 小程序。每次打开带有小程序的页面时，我都需要授予小程序运行权限。我可以以某种方式配置小程序以跳过此操作并在未经许可的情况下运行吗？有些网站的小程序会在未经许可的情况下自动加载。一个例子：[example](http://www.oracle.com/us/products/servers-storage/servers/sparc-enterprise/m-series/m4000/overview/index.html)（点击3-D Demo）

我该如何配置呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:17:40.630

好吧，您可以使小程序成为[签名小程序](http://en.wikipedia.org/wiki/Java_applet#Signed)，但即使这样仍然不能保证在未经用户许可的情况下加载小程序 - 这仍然取决于用户浏览器、Java 小程序插件和安全设置的具体情况。

我仍然在 Firefox 中为您链接的小程序弹出一个框，因为我计算机上的安全设置设置为在任何小程序运行之前始终显示权限警告，无论是否签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:24:32.327

> 供公司内部使用。

在这种情况下，一种方法是遵循 Nate 的建议并在控制面板中进行配置。但是，如果您可以访问机器来执行此操作，最好在每台机器上安装一个更改的[策略文件](http://docs.oracle.com/javase/tutorial/security/tour1/step2.html)，以放宽***仅对***来自公司站点的代码的限制。

# grails - 在 Heroku 上部署 Grails 时出现 URI 问题

> ID：16059555
> 
> 赞同：2
> 
> 时间：2013-04-17T12:07:12.453
> 
> 标签：grails, deployment, heroku

我第一次尝试在 Heroku 上部署 Grails 应用程序。在我们的本地服务器（Tomcat）上，可以部署war文件并且可以毫无问题地使用该应用程序。例如，源包含一个指向 LoginController ( `url="[controller: 'login', action:'login']"`) 的登录表单。

当我们将 war 文件部署到 Heroku（由 Tomcat 运行）时，该应用程序无法运行。运行“heroku 日志”时，我们收到以下错误：

```
2013-04-17T11:48:20.081459+00:00 app[web.1]: 2013-04-17 11:48:20,081 [http-nio-27162-exec-9] ERROR errors.GrailsExceptionResolver  - UnknownControllerException occurred when processing request: [POST] /login/login
2013-04-17T11:48:20.081459+00:00 app[web.1]:    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
2013-04-17T11:48:20.081459+00:00 app[web.1]:    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
2013-04-17T11:48:20.081459+00:00 app[web.1]: No controller found for URI [//grails/login/login]!. Stacktrace follows:
2013-04-17T11:48:20.081459+00:00 app[web.1]: org.codehaus.groovy.grails.web.servlet.mvc.exceptions.UnknownControllerException: No controller found for URI [//grails/login/login]! 
```

看起来，Heroku 会自动添加`//grails`URI。我的问题是这是从哪里来的？显然它在这个 URI 中找不到控制器，因为`//grails`在我们的代码中根本无效。

有任何想法吗？

# mysql - 执行前检查条件

> ID：16059559
> 
> 赞同：0
> 
> 时间：2013-04-17T12:07:24.753
> 
> 标签：mysql

我有一个 Mysql 数据库，其中包含一个包含在数据库上执行的所有脚本的表。
我直接在 sql 中运行所有脚本，如果有人已经运行了脚本，我想签入我的脚本。

在 Sql Server 中，我可以这样做：

```
IF EXISTS (SELECT 1 FROM [dbo].[LogScript] WHERE NomScript = 'MyScriptName')
BEGIN
  PRINT 'Warning : The script ''MyScriptName'' have already been runned on the database.'
  RETURN
END 
```

由于您不能在 Mysql 中使用 IF，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:24:38.580

与其重新发明轮子，不如看看[Liquibase](http://www.liquibase.org/)。

它基本上为您完成了这项工作，您可以将其集成到您的构建中。

我已经使用过它并且会再次使用它（实际上我会坚持使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:12:57.883

 ~~~~```
IF 1= (SELECT 1 FROM [dbo].[LogScript] WHERE NomScript = 'MyScriptName')
THEN
--Do something
--PRINT 'Warning : The script ''MyScriptName'' have already been runned on the database.';
END IF 
```~~  ~~```
select 'Warning : The script ''MyScriptName'' have already been runned on the database.'
FROM [dbo].[LogScript] WHERE NomScript = 'MyScriptName' 
```

你也可以用**[例](http://dev.mysql.com/doc/refman/5.0/en/case.html)**

```
CASE (select  1 FROM [dbo].[LogScript] WHERE NomScript = 'MyScriptName')
WHEN 1 THEN --Statement
END CASE 
```~~~~

# email - 在邮件正文中引用/转义变量

> ID：16059563
> 
> 赞同：13
> 
> 时间：2013-04-17T12:07:38.647
> 
> 标签：email, security, sendmail, postfix-mta, php

我感觉有点尴尬，因为我正在使用 PHP 生成邮件正文而不转义变量。在 HTML 中，我使用 htmlspecialchars() 或类似函数，用于命令行 escapeshellarg()，但用于邮件？例如这样的：

```
<?php
$usercontent = $_GET['usercontent'];
mail("dummy@nowhere.tld", "My Subject", "My body with $usercontent included");
?> 
```

可能的攻击者可以使用上面的脚本做什么，我如何防止这种攻击？或者是 PHP mail() 保存，为什么？

**更新**

请参考示例：

*   只有身体受到影响（没有标题！）
*   内容类型是文本/纯文本
*   答案的一些证据会很好
*   MTA 是带有“/usr/sbin/sendmail -t -i”的后缀 sendmail

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T16:27:22.167

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:10:18.863

它不能防止 XSS 攻击，因为如果您的邮件包含 HTML，有人可以将其注入邮件中。

良好的行为是检查并验证您期望拥有的数据。如果我是你，我会转义这个字符串。它几乎没有成本，您不必担心不使用它的后果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:11:43.510

好问题。我不相信您需要转义正文，但我知道如果您允许用户输入发件人地址，则可以将标题添加到邮件（如密件抄送到数千个地址）。因此，如果您将变量放入其中，请务必检查换行符（`\n`和`\r`）以确保没有添加额外的标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T17:39:11.490

以这种方式思考电子邮件的正文：“任务最高机密目的地未知。” 我们可能不知道什么样的客户端会阅读该消息，但我们可以猜测我们不希望在其中显示实时的、用户提供的、未转义的 HTML。由于许多客户端以 HTML 格式阅读邮件，因此最好的办法是`htmlentities()`使用用户提供的电子邮件正文。

我的逃生类中的一种方法。

```
<?php
class escaper
{
    public function superHtmlEntities($string)
    {
        return htmlentities($string, ENT_QUOTES | ENT_HTML5, 'UTF-8', true);
    }
}
?> 
```

=========================================

至少，在您进行研究时，请考虑类似的事情以及更多。

```
<?php
$esc = new Escaper();

$usercontent = $_GET['usercontent'];
mail("dummy@nowhere.tld", "My Subject", $esc->superHtmlEntities("My body with $usercontent included"));
?> 
```

# ejb-3.0 - ejb 3.1 计时器安排每个月的第一天

> ID：16059564
> 
> 赞同：0
> 
> 时间：2013-04-17T12:07:39.517
> 
> 标签：ejb-3.0, ejb-3.1

我想安排一个 EJB 计时器任务以在全年每个月 1 日凌晨 2:00 AM 生成报告。我想使用`@Schedule`. 我用过`@Schedule(dayOfMonth="1")`，对吗？它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:17:38.600

EJB 3.1 Final Release 规范说：

> **18.2.1.2 表达式规则**
> 
> 秒、分和小时属性的默认值为“0”。
> 
> dayOfMonth、month、dayOfWeek 和 year 属性的默认值为“*”。

所以你的

```
@Schedule(dayOfMonth="1") 
```

方法

```
@Schedule(dayOfMonth="1", second="0", minute="0", hour="0") 
```

所以应该是：

```
@Schedule(dayOfMonth="1", hour="2") 
```

这应该可以解决问题。

# android - 如何在android中将外部库添加到我的应用程序

> ID：16059567
> 
> 赞同：1
> 
> 时间：2013-04-17T12:07:51.053
> 
> 标签：android, android-build

我有一个应用程序，我必须将其视为培训练习。它使用了一些外部库，例如 SlidingMenu、ImageViewZoom 和 ActionbarSherlock。

我已经下载并提取了这些库，但我不知道如何将它们添加到我现有的项目中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:16:04.087

对于作为简单 JAR 分发的那些，按照 Emil Adz 的指示进行操作，然后将该 JAR 复制到您的项目`libs/`目录中。

对于像 ActionBarSherlock 这样作为 Android 库项目分发的项目，您需要做更多的工作。对于 Eclipse，您需要将库项目导入您的工作区，然后进入您的应用程序项目的项目 > 属性 > Android，然后单击 [添加] 按钮将库项目添加到应用程序项目中。对于命令行构建，用于**`android update lib-project`**将应用程序和库项目链接在一起。

您可以阅读有关[从 Eclipse](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)或文档中[的命令行](http://developer.android.com/tools/projects/projects-cmdline.html#ReferencingLibraryProject)引用 Android 库项目的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:16:21.570

您需要*从现有源将这些库作为 Android 项目*导入，并通过进入它们的属性将它们标记为“Is Library”。

将其标记为“Is Library”后，通过进入 Properties->Android->Library->Add 将其添加到您的项目中（它将显示您导入的库列表）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:08:54.770

**正确的方式：**

您需要做的是将外部库（`JAR`文件）复制到`/libs`项目的文件夹中。

这样，这些库将与您的项目一起编译，并且可以在您部署应用程序时在真实设备上使用。

有时您需要将项目添加到您的`workspace`（例如 Google 地图库）中，然后使用`properites -> Android`底部的窗口添加库引用。

您可以通过阅读我编写的 Google Map API V2 指南的前 3 步来了解它是如何完成的。在那里我引用了android库项目：

[谷歌地图 API V2 指南](https://blog-emildesign.rhcloud.com/?p=435)

**错误的方法：**

当您在真实设备上运行项目时，任何其他方式，例如使用`properties - > Java build path`屏幕添加文件可能会导致缺少库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:20:41.777

如果它们是 jar，则创建一个`libs`文件夹，然后将 jar 粘贴到其中，然后转到您的项目`buildpath`-> `configure build path`-> `Add Jars`->`ok`如果它是一个库项目，则转到您的项目`Property`-> `Android`-> `Add`（您的 Lib 项目）-> `Ok`- >`Apply`

# c# - SqlQuery return null every time

> ID：16059568
> 
> 赞同：1
> 
> 时间：2013-04-17T12:07:55.163
> 
> 标签：c#, sql, datareader

I'm trying to execute a store procedure like this:

```
public bool Test(){
    var searchItem=base.Database.SqlQuery<QueryEntity>("exec nameOfMyProcedure @param1={0}",param13).FirstOrDefault();
    if(searchItem!=null){
        return searchItem.Output1;
    }
    else{
        return false;
    }
private class QueryEntity{
    public bool Output1{get;set;}
} 
```

I've one Return in the stored procedure

Unfortunately, searchItem always returns null.

Have you an idea how I can resolve that?

I'm using SQL server and C#.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:09:39.260

Your stored procedure is returning more that one columns. That can be the reason for the error you are getting.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:11:28.447

You can try something like this

```
base.Database.SqlQuery<IEnumerable<string>>("exec nameOfMyProcedure @param1={0},@param2={1},@param3={2}",param1,param2,param3) 
```

basically this is an example and you need to do is, look into the structure of what your stored procedure returns and then use suitable object for parsing.

Here i am assuming all the returns values are string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:41:09.150

Find the solution. It's not really proper but.. It's work

I create a new stored procedure which return 1 output like this

```
Select @Return_value as Return 
```

instead of

```
Return @Return_value 
```

# c++ - 城市环境中特征检测的最佳算法——OpenCV

> ID：16059569
> 
> 赞同：3
> 
> 时间：2013-04-17T12:08:00.983
> 
> 标签：c++, opencv, surf

我正在使用 OpenCV 库（C++）从来自航空相机的视频流接收器的 2 个图像中提取检测器，以便之后在连续图像中找到匹配点。我想知道哪个是找到**城市环境**稳健检测器的最佳算法？

附言。实际上我正在使用 SURF，但是当图像发生一点变化时（因为相机的平移速度非常慢），这些描述符之间的匹配变得非常少！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:20:08.627

如果您想尝试不同的方法，请尝试[RoboRealm](http://www.roborealm.com) ，他们有试用版，您只需输入算法并显示结果，用于测试目的，即使您将使用 OpenCV 也可以。

# actionscript-3 - 在 Flex 4 的工具提示中添加图像

> ID：16059570
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:08:03.897
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder

我正在尝试通过使文本 htmlText 类似于以下内容在 Flex 4 的工具提示中插入图像和其他 html 内容：

[http://blogger.com/190/easy-flex-tooltip-customization-using-html-tags](http://blogagic.com/190/easy-flex-tooltip-customization-using-html-tags)

我的 HTMLToolTip 类：

```
package custom
{
    import mx.controls.ToolTip;

  public class HTMLToolTip extends ToolTip
  {
    public function HTMLToolTip()
    {
        super();
    }

    override protected function commitProperties():void{
        super.commitProperties();
        textField.htmlText = text;
    }
  }
} 
```

在创建工具提示时，我将该类设置为 ToolTipManager 类

```
protected function helpToolTip_toolTipCreateHandler(event:ToolTipEvent):void
{   
        ToolTipManager.toolTipClass = HTMLToolTip;
        helpToolTip.tooltip = "<img src='ui_graphic/testimage.png' width='20' height='20'/> this is a <b>tool</b> tip";
} 
```

但它似乎在 Flex 4 中不再起作用（也从网上的各种评论来看）。图像只是不显示。我尝试过的所有其他基本 HTML 标记都可以正常工作。有没有人让它在 Flex 4 上工作，或者我应该研究另一个（更复杂的）解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:11:37.863

创建工具提示类扩展 RichText：

```
package classes
{
    import mx.core.IToolTip;

    import spark.components.RichText;
    import spark.utils.TextFlowUtil;

    public class RichToolTip extends RichText implements IToolTip
    {
        public function RichToolTip()
        {
            super();

            mouseEnabled = false;
            mouseChildren = false;
            setStyle("backgroundColor", "0xeeeeee");
        }

        override public function set text(value:String):void 
        {
            textFlow = TextFlowUtil.importFromString(value);
        } 
    }
} 
```

在应用程序中设置新的工具提示类：

```
ToolTipManager.toolTipClass = RichToolTip; 
```

并在按钮上添加工具提示：

```
btn.toolTip = "<div><img source='assets/bender_saved.png' width='20' height='20' /><p>this is a test <span fontWeight='bold'>bold</span></p></div>"; 
```

# c - 从 C 中的双向链表中删除重复项

> ID：16059575
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:08:27.837
> 
> 标签：c, doubly-linked-list, buckets

我正在尝试使用 200-800 之间的 SAT 成绩的双向链接列表。我需要从列表中的所有重复项中删除，即通过删除所有重复项来确保每个成绩只出现一次。

```
#define HIGHEST_GRADE 800

typedef struct dListNode{
    int* dataPtr;
    struct dListNode* next;
    struct dListNode* prev;
}DListNode;

typedef struct dList

{
    DListNode* head;
    DListNode* tail;
}DList;

void removeDuplicates(DList* lst)
{
    int i;
    int gradesBucket [numOfGrades];
    DListNode* temp;
    temp = lst->head;

    for(i=200 ; i<HIGHEST_GRADE ; i++) /*creating 600 buckets - each bucket for a grade*/
        gradesBucket[i] = FALSE;

    while (temp)
    {
        if ((gradesBucket [*temp->dataPtr]) == TRUE) /*if current grade has already  */
                                                     /* appeared earlier on the list */
        {
            deleteFromList (temp);  /*delete that grade's cell*/
        }
        else
            gradesBucket[*temp->dataPtr] = TRUE; /* mark grade bucket as true, meaning */
                                                 /* the grade already appeared*/
        temp = temp->next; /*moving on to next grade*/
    }
}

void deleteFromList(DListNode*  toRemove)
{
    toRemove->prev->next = toRemove->next;
    toRemove->next->prev = toRemove->prev;

    deAllocateListCell (toRemove);    
}

void deAllocateListCell (DListNode* cell)
{
    free (cell->dataPtr);
    free (cell);
} 
```

请帮助我了解问题所在。

* * *

这是固定代码，但仍然无法正常工作。现在它编译但屏幕上没有显示任何内容。顺便说一句，我不需要删除头部，因为第一个数字永远不能重复......但我会处理它以防头部为空；
我还将我要删除的单元格的前一个单元格发送到函数 deleteFromList。它仍然不起作用。有任何想法吗？谢谢！

```
 void deleteFromList(DList* lst, DListNode*  p)
{

DListNode* del_cell = p->next;   /* cell to delete*/

if (p->next->next == NULL) /*if cell to remove is the tail*/
{
    deAllocateListCell (p->next); /* freeing current tail */
    lst->tail = p;  /* p is the new tail */
    p->next = NULL; /* tail points to NULL */
}
else /* if cell to remove is not the tail (note: can't be head beacuse no duplicates can be found in the first grade) */
{
    p->next = del_cell->next;
    del_cell->next->prev = p;
    deAllocateListCell (del_cell);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:12:18.927

您的函数代码`deleteFromList()`不考虑（文字）边缘情况：删除列表的第一个或最后一个节点。

另外，您的代码取消引用指向已释放节点的指针；指针可能会变得完全无效，或者`free()`函数可能会覆盖其内容（正如 Microsoft Debug C RunTime 已知的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:23:48.293

1.  试着具体一点 - 什么是行不通的？你的代码编译了吗？运行时是否出错？您在某个场景中没有得到预期的结果？

2.  您的`deleteFromList`函数应该注意移除头部或尾部（即何时`toRemove->prev`或`toRemove->next`为空（分别）。

3.  `temp = lst->head;`当`lst`为空时会发生什么？你会得到一个运行时错误

4.  您没有更新`head`或`tail`万一它们被删除

这就是我第一眼发现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:21:43.030

你应该写`while(temp->next)`来纠正这个......你也可以简单地使用免费释放节点。为了消除悬空指针问题，您应该在释放该节点后将其设为 NULL

# c# - 在 C# 中向数据表中添加行

> ID：16059576
> 
> 赞同：3
> 
> 时间：2013-04-17T12:08:31.727
> 
> 标签：c#, asp.net, mysql, datatable, datarow

我正在做一个项目，我想向数据表中添加行，如果我从数据库中获取两行，则只有两行中的一个被添加到数据表中，但我希望两者都添加到数据表中即数据表无法保存第一行的数据，数据被第二行的数据覆盖。该方法的代码是。这是我的呼吁声明。

```
 DataTable dttable = new DataTable();
    dttable = gettable(dtgreater, dtcurrentdate);
    public DataTable gettable(List<DateTime> objct1, DateTime objct2)
    {

    DataTable data=null;
    for (int j = 0; j < dtgreater.Count; j++)
    {
        sql = "select library_issue.STUDENTCODE,library_issue.studentname,library_book.bookname,library_issue.issuedate,library_issue.returndate from library_issue             join library_book on library_book.book_id = library_issue.book_id where library_issue.returndate ='" + objct1[j].ToString("dd/MM/yyyy") + "'";
        ds = obj.openDataset(sql, Session["SCHOOLCODE"].ToString());
        Label1.Text = (ds.Tables[0].Rows.Count).ToString();
        data = new DataTable();
        data.Columns.Add("STUDENTCODE", typeof(int));
        data.Columns.Add("Studentname", typeof(string));
        data.Columns.Add("Bookname", typeof(string));
        data.Columns.Add("Issuedate", typeof(string));
        data.Columns.Add("Returndate", typeof(string));
        data.Columns.Add("NO of Days Exceeded", typeof(string));
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {

            TimeSpan ts = objct1[j] - objct2;
            Label1.Text = ts.ToString("dd");
            data.Rows.Add(ds.Tables[0].Rows[i]["STUDENTCODE"], ds.Tables[0].Rows[i]["studentname"], ds.Tables[0].Rows[i]["bookname"], ds.Tables[0].Rows[i]["issuedate"], ds.Tables[0].Rows[i]["returndate"], ts.ToString("dd"));

        }

    }

     return data;
} 
```

**更新：**

```
 public DataTable gettable(List<DateTime> objct1, DateTime objct2)
    {

        DataTable data = new DataTable();

        data.Columns.Add("STUDENTCODE", typeof(int));
        data.Columns.Add("Studentname", typeof(string));
        data.Columns.Add("Bookname", typeof(string));
        data.Columns.Add("Issuedate", typeof(string));
        data.Columns.Add("Returndate", typeof(string));
        data.Columns.Add("NO of Days Exceeded", typeof(string));
    for (int j = 0; j < dtgreater.Count; j++)
    {
        sql = "select library_issue.STUDENTCODE,library_issue.studentname,library_book.bookname,library_issue.issuedate,library_issue.returndate from library_issue             join library_book on library_book.book_id = library_issue.book_id where library_issue.returndate ='" + objct1[j].ToString("dd/MM/yyyy") + "'";
        ds = obj.openDataset(sql, Session["SCHOOLCODE"].ToString());
        Label1.Text = (ds.Tables[0].Rows.Count).ToString();

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {

            TimeSpan ts = objct1[j] - objct2;
            Label1.Text = ts.ToString("dd");
            data.Rows.Add(ds.Tables[0].Rows[i]["STUDENTCODE"], ds.Tables[0].Rows[i]["studentname"], ds.Tables[0].Rows[i]["bookname"], ds.Tables[0].Rows[i]["issuedate"], ds.Tables[0].Rows[i]["returndate"], ts.ToString("dd"));

        }

    }

     return data;
} 
```

**描述：**当我在 for 循环中初始化数据表时，每次都会创建新的数据表实例。结果我每次只得到一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:12:16.873

您正在循环内创建数据表，因此在第二次迭代中，它将丢弃包含第一项的第一个数据表并为第二项创建一个新的空表。

创建数据表并将列添加到循环之前：

```
DataTable dttable = new DataTable();
dttable = gettable(dtgreater, dtcurrentdate);

public DataTable gettable(List<DateTime> objct1, DateTime objct2)
{

  DataTable data = new DataTable();
  data.Columns.Add("STUDENTCODE", typeof(int));
  data.Columns.Add("Studentname", typeof(string));
  data.Columns.Add("Bookname", typeof(string));
  data.Columns.Add("Issuedate", typeof(string));
  data.Columns.Add("Returndate", typeof(string));
  data.Columns.Add("NO of Days Exceeded", typeof(string));
  for (int j = 0; j < dtgreater.Count; j++) {
    sql = "select library_issue.STUDENTCODE,library_issue.studentname,library_book.bookname,library_issue.issuedate,library_issue.returndate from library_issue             join library_book on library_book.book_id = library_issue.book_id where library_issue.returndate ='" + objct1[j].ToString("dd/MM/yyyy") + "'";
    ds = obj.openDataset(sql, Session["SCHOOLCODE"].ToString());
    Label1.Text = (ds.Tables[0].Rows.Count).ToString();
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++) {

        TimeSpan ts = objct1[j] - objct2;
        Label1.Text = ts.ToString("dd");
        data.Rows.Add(ds.Tables[0].Rows[i]["STUDENTCODE"], ds.Tables[0].Rows[i]["studentname"], ds.Tables[0].Rows[i]["bookname"], ds.Tables[0].Rows[i]["issuedate"], ds.Tables[0].Rows[i]["returndate"], ts.ToString("dd"));

    }

  }

  return data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:15:06.183

将表创建放在循环之外。

```
DataTable data = new DataTable(); 
```

使用这样的可能会更好`foreach`：

例如：

```
foreach (var dr in ds.Tables.First().Rows)
{
   string studentCode = dr["STUDENTCODE"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:16:31.063

删除行： `data = new DataTable();`

在 For 循环外创建数据表，如下所示...

```
 DataTable data = new DataTable();
    data.Columns.Add("STUDENTCODE", typeof(int));
    data.Columns.Add("Studentname", typeof(string));
    data.Columns.Add("Bookname", typeof(string));
    data.Columns.Add("Issuedate", typeof(string));
    data.Columns.Add("Returndate", typeof(string));
    data.Columns.Add("NO of Days Exceeded", typeof(string))
    for (int j = 0; j < dtgreater.Count; j++)
     { 
```

它会解决你的问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:21:42.927

你可以在这里做的是

```
 DataTable dttable = new DataTable();
    dttable = gettable(dtgreater, dtcurrentdate);
    public DataTable gettable(List<DateTime> objct1, DateTime objct2)
    {

    DataTable data=null;
    for (int j = 0; j < dtgreater.Count; j++)
    {
        sql = "select library_issue.STUDENTCODE,library_issue.studentname,library_book.bookname,library_issue.issuedate,library_issue.returndate from library_issue             join library_book on library_book.book_id = library_issue.book_id where library_issue.returndate ='" + objct1[j].ToString("dd/MM/yyyy") + "'";
        ds = obj.openDataset(sql, Session["SCHOOLCODE"].ToString());
        Label1.Text = (ds.Tables[0].Rows.Count).ToString();
       if(data.Columns.count==0)
        {
        data = new DataTable();
        data.Columns.Add("STUDENTCODE", typeof(int));
        data.Columns.Add("Studentname", typeof(string));
        data.Columns.Add("Bookname", typeof(string));
        data.Columns.Add("Issuedate", typeof(string));
        data.Columns.Add("Returndate", typeof(string));
        data.Columns.Add("NO of Days Exceeded", typeof(string));
        }

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {

            TimeSpan ts = objct1[j] - objct2;
            Label1.Text = ts.ToString("dd");
            data.Rows.Add(ds.Tables[0].Rows[i]["STUDENTCODE"], ds.Tables[0].Rows[i]["studentname"], ds.Tables[0].Rows[i]["bookname"], ds.Tables[0].Rows[i]["issuedate"], ds.Tables[0].Rows[i]["returndate"], ts.ToString("dd"));

        }

    }

     return data;
} 
```

我想这对你有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-26T14:53:22.197

```
DataTable dttable = new DataTable();
dttable = gettable(dtgreater, dtcurrentdate);
public DataTable gettable(List<DateTime> objct1, DateTime objct2)
{
    DataTable data=null;
    sql = "select library_issue.STUDENTCODE,library_issue.studentname,library_book.bookname,library_issue.issuedate,library_issue.returndate from library_issue             join library_book on library_book.book_id = library_issue.book_id where library_issue.returndate ='" + objct1[j].ToString("dd/MM/yyyy") + "'";
    ds = obj.openDataset(sql, Session["SCHOOLCODE"].ToString());
    Label1.Text = (ds.Tables[0].Rows.Count).ToString();

for (int j = 0; j < dtgreater.Count; j++)
{
   if(data.Columns.count==0)
    {
    data = new DataTable();
    data.Columns.Add("STUDENTCODE", typeof(int));
    data.Columns.Add("Studentname", typeof(string));
    data.Columns.Add("Bookname", typeof(string));
    data.Columns.Add("Issuedate", typeof(string));
    data.Columns.Add("Returndate", typeof(string));
    data.Columns.Add("NO of Days Exceeded", typeof(string));
    }

    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {

        TimeSpan ts = objct1[j] - objct2;
        Label1.Text = ts.ToString("dd");
        data.Rows.Add(ds.Tables[0].Rows[i]["STUDENTCODE"], ds.Tables[0].Rows[i]["studentname"], ds.Tables[0].Rows[i]["bookname"], ds.Tables[0].Rows[i]["issuedate"], ds.Tables[0].Rows[i]["returndate"], ts.ToString("dd"));

}
 return data;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T19:04:14.320

```
Var.GRV.Columns.Add("NAME COLUMN");
            Var.GRV.Columns.Add("NAME COLUMN");
            Var.GRV.Columns.Add("*");
            Var.GRV.Columns.Add("*");
            Var.GRV.Columns.Add("*"); 
```

# java - LibGDX 有没有动画的演员？

> ID：16059578
> 
> 赞同：11
> 
> 时间：2013-04-17T12:08:40.990
> 
> 标签：java, libgdx

在 LibGDX 中是否有一个动画演员（需要一个动画）并且当添加到舞台时会自行动画，还是您必须在其中实现自己的 Image 类并自己为其制作动画？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-27T13:57:28.663

我只是创建了一个“AnimatedImage”演员类，它只接受一个动画作为参数（不需要自定义的 Drawable 类）。我认为这个解决方案比上面的解决方案简单得多。

动画图像.java：

```
public class AnimatedImage extends Image
{
    protected Animation animation = null;
    private float stateTime = 0;

    public AnimatedImage(Animation animation) {
        super(animation.getKeyFrame(0));
        this.animation = animation;
    }

    @Override
    public void act(float delta)
    {
        ((TextureRegionDrawable)getDrawable()).setRegion(animation.getKeyFrame(stateTime+=delta, true));
        super.act(delta);
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-17T19:47:42.080

就像你一样，我没有找到动画演员，所以我创建了自己：

动画演员.java：

```
public class AnimatedActor extends Image
{
    private final AnimationDrawable drawable;

    public AnimatedActor(AnimationDrawable drawable)
    {
        super(drawable);
        this.drawable = drawable;
    }

    @Override
    public void act(float delta)
    {
        drawable.act(delta);
        super.act(delta);
    }
} 
```

AnimationDrawable.java：

```
class AnimationDrawable extends BaseDrawable
{
    public final Animation anim;    
    private float stateTime = 0;

    public AnimationDrawable(Animation anim)
    {
        this.anim = anim;
        setMinWidth(anim.getKeyFrameAt(0).getRegionWidth());
        setMinHeight(anim.getKeyFrameAt(0).getRegionHeight());
    }

    public void act(float delta)
    {
        stateTime += delta;
    }

    public void reset()
    {
        stateTime = 0;
    }

    @Override
    public void draw(SpriteBatch batch, float x, float y, float width, float height)
    {
        batch.draw(anim.getKeyFrame(stateTime), x, y, width, height);
    }
} 
```

# blackberry - Blackberry - 具有不同 ID 的可点击位图字段

> ID：16059581
> 
> 赞同：4
> 
> 时间：2013-04-17T12:08:47.023
> 
> 标签：blackberry

我正在创建一个应用程序，在该应用程序中，我通过 JSON 从 Web 服务器获取带有 ID 的礼物图像。当我点击任何礼物图片时，它会进入下一页，显示该图片的所有信息（通过 JSON 从 Web 服务器获取带有其 ID 的图片信息）。

问题是：当我点击页面上的任何礼物图片以查看其相关信息时，它每次都会获取最后一个礼物图片ID，我希望当我点击任何图片时，它会获取我点击的特定图片ID。怎么可能？？

页面截图为：[http ://ugo.offroadstudios.com/gifts.png](http://ugo.offroadstudios.com/gifts.png)

这是示例代码：

```
public class Gifts extends MainScreen {

    String giftsid;
    BitmapField giftimg;

    public Gifts(){
        setTitle("Gift Store");
        creategifts();
    }

    public void creategifts()
    {
        //Link URL
        String strURL = "http://ugo.offroadstudios.com/api/frndgift/?loginusername=adil;deviceside=true";
        webConnection wb = new webConnection();
        String res = wb.getJson(strURL);

        try {
            JSONObject object = new JSONObject(res);
            if(object.getString("status") == "error")
            {
                Dialog.alert("Invalid "+object.getString("status"));
            }
            else
            {
                int totalgifts;
                totalgifts = object.getInt("totalgifts");
                Bitmap listThumb;
                JSONArray imagearr;
                JSONArray giftsidarr;
                String imgname;
                Bitmap bmpResized;

                for(int i=0;  i < totalgifts; i++){
                    imagearr = object.getJSONArray("gifts_image");
                    imgname = imagearr.getString(i);
                    giftsidarr = object.getJSONArray("gifts_id");
                    giftsid = giftsidarr.getString(i);

                    listThumb = getImage.getImageFromUrl("http://ugo.offroadstudios.com/wp-content/plugins/bp-gifts-rebirth/includes/images/"+imgname+";deviceside=true");
                    bmpResized = GPATools.ResizeTransparentBitmap(listThumb, 80, 80,
                    Bitmap.FILTER_LANCZOS, Bitmap.SCALE_TO_FIT);

                    giftimg =new BitmapField(bmpResized,FOCUSABLE)
                    {
                        protected boolean navigationClick(int status, int time)
                        {
                            Dialog.alert("giftsid "+giftsid);
                            UiApplication.getUiApplication().pushScreen(new SendGift(giftsid));
                            return true;
                        }
                    };
                    add(giftimg);
                }
            }

        }
        catch (JSONException e) {
            System.out.println("EX is "+e);
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:53:14.660

您总是会得到列表中最后一个礼物的礼物 ID，因为您已经使用以下代码创建了按钮：

```
giftimg =new BitmapField(bmpResized,FOCUSABLE)
{
    protected boolean navigationClick(int status, int time)
    {
        Dialog.alert("giftsid "+giftsid);
        UiApplication.getUiApplication().pushScreen(new SendGift(giftsid));
        return true;
    }
}; 
```

您的`navigationClick()`方法使用了`giftsid`变量，它是您的类的持久*成员变量*。您在`for`循环中分配此变量，因此它保留的最终值是循环中分配的最后一个值 ( `giftsidarr.getString(totalgifts)`)。

尽管您在循环中*声明*该方法，其中有许多不同的值，但该方法使用**运行**时的值。最后一个值。`navigationClick()``giftsid``navigationClick()``giftsid`

 **有很多方法可以修复它。您可以在循环中使用单独的常量值：

```
final String nextGiftsId = giftsid;

giftimg =new BitmapField(bmpResized,FOCUSABLE)
{
    protected boolean navigationClick(int status, int time)
    {
        Dialog.alert("nextGiftsId= "+nextGiftsId);
        UiApplication.getUiApplication().pushScreen(new SendGift(nextGiftsId));
        return true;
    }
}; 
```

或者，正如 Signare 建议的那样，在每个按钮上附加一个*cookie*，以标识其对应的礼物：

```
giftimg =new BitmapField(bmpResized,FOCUSABLE)
{
    protected boolean navigationClick(int status, int time)
    {
        String giftId = (String)getCookie();   // read gift id from the cookie
        Dialog.alert("giftId= "+giftId);
        UiApplication.getUiApplication().pushScreen(new SendGift(giftId));
        return true;
    }
};
giftimg.setCookie(giftsid);  // set the cookie after creating the field 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:25:07.720

在你的 for 循环中，添加以下代码 -

```
giftimg[i].setChangeListener(this); 
```

然后 -

```
public void fieldChanged(Field field, int context) {
for(int i=0;i<totalgifts;i++) {
    if(field == giftimg[i]) {
        // you can trigger your event 
    }
} 
```

**编辑 ：-**

```
giftimg[i].setChangeListener(listener);

listener = new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                if ( field instanceof BitmapField ) {
                    for(int i=0;i<totalgifts;i++) {
                        if ( field == giftimg[i] ) {
                           // you can trigger your event 
                        }
                    }
                }
            }
        }; 
```**

# sql-server - SQL Server XML 修改没有结果

> ID：16059591
> 
> 赞同：0
> 
> 时间：2013-04-17T12:09:15.330
> 
> 标签：sql-server, xml

我有一个像

```
<xsd:form-definition ...>
   <xsd:page ..></xsd:page>
   <xsd:page ..></xsd:page>
...
</xsd:form-definition> 
```

我想在第一个`<xsd:page>`元素中插入一个新节点

```
DECLARE @res XML = '<Subject>English</Subject>'

SET @myXmlContent.modify('insert sql:variable("@res") as first into (/form-definition/page)[1]') 
```

但没有任何改变，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:14:21.750

您修改的 XQuery 需要声明和引用`xsd`命名空间：

```
SET @myXmlContent.modify('declare namespace xsd="..."; insert sql:variable("@res") as first into (/xsd:form-definition/xsd:page)[1]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:13:57.867

试试这个——

```
DECLARE @XML XML
SELECT @XML = 
'<xsd_form-definition>
   <xsd_page></xsd_page>
   <xsd_page></xsd_page>
</xsd_form-definition>'

DECLARE @res XML = '<VehicleManufacturerID>abc</VehicleManufacturerID>'

SELECT @XML.modify('insert sql:variable("@res") into (xsd_form-definition/xsd_page)[1]')

SELECT @XML 
```

# python - _tkinter.TclError：无效的命令名称“.4302957584”

> ID：16059592
> 
> 赞同：12
> 
> 时间：2013-04-17T12:09:25.497
> 
> 标签：python, user-interface, tkinter

关闭 python 3 程序时，我在控制台中得到一个奇怪的异常。

Python 3 代码：

```
from tkinter import *
from random import randint

# Return a random color string in the form of #RRGGBB
def getRandomColor():
    color = "#"
    for j in range(6):
        color += toHexChar(randint(0, 15)) # Add a random digit
    return color

# Convert an integer to a single hex digit in a character
def toHexChar(hexValue):
    if 0 <= hexValue <= 9:
        return chr(hexValue + ord('0'))
    else: # 10 <= hexValue <= 15
        return chr(hexValue - 10 + ord('A'))

# Define a Ball class
class Ball:
    def __init__(self):
        self.x = 0 # Starting center position
        self.y = 0
        self.dx = 2 # Move right by default
        self.dy  = 2 # Move down by default
        self.radius = 3
        self.color = getRandomColor()

class BounceBalls:
    def __init__(self):
        self.ballList = [] # Create a list for balls

        window = Tk()
        window.title("Bouncing Balls")

        ### Create Canvas ###
        self.width = 350
        self.height = 150
        self.canvas = Canvas(window, bg = "white", width = self.width, height = self.height)
        self.canvas.pack()

        ### Create Buttons ###
        frame = Frame(window)
        frame.pack()

        btStop = Button(frame, text = "Stop", command = self.stop)
        btStop.pack(side = LEFT)

        btResume = Button(frame, text = "Resume", command = self.resume)
        btResume.pack(side = LEFT)

        btAdd = Button(frame, text = "Add", command = self.add)
        btAdd.pack(side = LEFT)

        btRemove = Button(frame, text = "Remove", command = self.remove)
        btRemove.pack(side = LEFT)

        self.sleepTime = 20
        self.isStopped = False
        self.animate()

        window.mainloop()

    def stop(self): # Stop animation
        self.isStopped = True

    def resume(self):
        self.isStopped = False
        self.animate()

    def add(self): # Add a new ball
        self.ballList.append(Ball())

    def remove(self):
        self.ballList.pop()

    def animate(self):
        while not self.isStopped:
            self.canvas.after(self.sleepTime)
            self.canvas.update()
            self.canvas.delete("ball")

            for ball in self.ballList:
                self.redisplayBall(ball)

    def redisplayBall(self, ball):
        if ball.x > self.width or ball.x < 0:
            ball.dx = -ball.dx

        if ball.y > self.height or ball.y < 0:
            ball.dy = -ball.dy

        ball.x += ball.dx
        ball.y += ball.dy
        self.canvas.create_oval(ball.x - ball.radius, ball.y - ball.radius, \
                                ball.x + ball.radius, ball.y + ball.radius, \
                                fill = ball.color, tags = "ball")

BounceBalls() 
```

这是完整的追溯：

```
/Library/Frameworks/Python.framework/Versions/3.3/bin/python3 "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 10.py"
Traceback (most recent call last):
  File "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 10.py", line 446, in <module>
    BounceBalls()
  File "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 10.py", line 407, in __init__
    self.animate()
  File "/Users/narek_a/Dropbox/Python/PycharmProjects/Introduction to Programming/Chapter 10.py", line 428, in animate
    self.canvas.delete("ball")
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/__init__.py", line 2344, in delete
    self.tk.call((self._w, 'delete') + args)
_tkinter.TclError: invalid command name ".4302957584"

Process finished with exit code 1 
```

为什么会出现这些异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T13:16:05.100

当您退出程序时，窗口将被销毁。这种破坏发生在事件循环注意到应用程序退出之后。您构建代码的方式，当您调用`self.update()`. 在那次调用之后，并且在小部件被销毁后，您正在调用`self.canvas.delete("ball")`. 由于小部件在前面的语句中被销毁，您会收到错误消息。

错误如此神秘的原因是 Tkinter 只是一个 tcl/tk 解释器的包装器。Tk 小部件以点后跟一些字符命名，小部件名称也是 tcl 命令。当你调用画布的`delete`方法时，Tkinter 将画布引用转换为内部 tk 小部件名称/tcl 命令。由于小部件已被销毁，tk 不会将其识别为已知命令并引发错误。

该解决方案将要求您重做动画逻辑。你不应该有自己的动画循环。相反，您需要使用 Tkinter 事件循环 ( `mainloop()`) 作为动画循环。该站点上有一些示例向您展示如何操作（例如：[https](https://stackoverflow.com/a/11505034/7432) ://stackoverflow.com/a/11505034/7432 ）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T12:57:55.483

如果不按下按钮，主应用程序循环`window.mainloop`将永远不会执行。`stop`这是你问题的根源。重写动画循环：

```
def __init__(self):
    ...
    self.sleepTime = 20
    self.isStopped = False
    self.window = window
    self.window.after(self.sleepTime, self.animate)
    window.mainloop()
    ...

def animate(self):
    if not self.isStopped:
        self.canvas.update()
        self.canvas.delete("ball")

        for ball in self.ballList:
            self.redisplayBall(ball)
        self.window.after(self.sleepTime, self.animate) 
```

# jquery - hover() 的悬停内容

> ID：16059593
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:09:30.173
> 
> 标签：jquery, hover, slidedown

我有一个简单的按钮，它在悬停时显示一个列表。

[工作示例](http://jsbin.com/agulaq/2/)

我只需要悬停列表内容，就像下拉菜单一样。如何添加脚本来执行该功能？

**HTML**

```
<button id="test">Hover Me</button>
<ul class="tester">
  <li>Menu 1</li>
  <li>Menu 2</li>
  <li>Menu 3</li>
  <li>Menu 4</li>
  <li>Menu 5</li>
  <li>Menu 6</li>
  <li>Menu 7</li>
  <li>Menu 8</li>
</ul> 
```

**脚本**

```
$(document).ready(function() {

    $("#test").hover(
        function () {
            $('.tester').slideDown(500);
        },
        function () {
            $('.tester').slideUp(500);   
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:19:15.190

与其使用 .hover()，不如在按钮上使用 .mouseenter() 来显示菜单，在菜单上使用 .mouseleave() 来再次隐藏它。

```
$(document).ready(function(){

  $("#test").mouseenter(function () {
    $('.tester').show();
  });

  $('.tester').mouseleave(function() {
    $(this).hide();
  });

}); 
```

在此处编辑您的 jsbin：http: [//jsbin.com/iroxop/1/edit](http://jsbin.com/iroxop/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:30:37.857

你想这样做吗？

**小提琴**

[http://jsfiddle.net/EpV87/25/](http://jsfiddle.net/EpV87/25/)

刚刚使用`slideUp()`和`slideDown()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:43:34.713

听起来您的问题是当您将鼠标悬停在按钮上时菜单会显示，但当您将鼠标悬停在菜单上时会消失。尝试将`button`and`ul`元素包装在 another`div`中，将悬停功能附加到该包装器。[这个小提琴](http://jsbin.com/ahobew/1/edit)中的工作示例。

```
$("#menu").hover(
    function () {
        $('.tester').slideDown(500);
    },
    function () {
        $('.tester').slideUp(500);
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:33:46.903

我刚刚根据您的要求修改了 Scottie 的代码

```
$(document).ready(function(){

      $("#test").mouseenter(function () {
    $('.tester').slideDown(500);
      });

      $('.tester').mouseleave(function() {
        $(this).slideUp(500);   
      });

    }); 
```

[http://jsfiddle.net/dolours/mTa6j/](http://jsfiddle.net/dolours/mTa6j/)

# .net - SHA1 哈希在 Objective-C 和 C#.NET 中产生不同的结果

> ID：16059594
> 
> 赞同：1
> 
> 时间：2013-04-17T12:09:32.757
> 
> 标签：.net, ios, objective-c, hash, sha1

基本上我想编写计算 sha1 哈希的函数。

到目前为止，我尝试过如下。

**C#.NET**

```
byte[] p2 = System.Text.Encoding.Unicode.GetBytes("password");
System.Security.Cryptography.SHA1 sha = new System.Security.Cryptography.SHA1CryptoServiceProvider();
byte[] result = sha.ComputeHash(p2);
string encodedPassword = Convert.ToBase64String(result); 
```

*输出：* 6Pl/upEE0epQR5SObftn+s2fW3M=

**Objective-C**

我从[NSData_Base64 Classes 参考](http://projectswithlove.com/projects/NSData_Base64.zip)中添加了 Base64 的类。

```
NSString *password = @"password";
NSData *data = [password dataUsingEncoding:NSUTF8StringEncoding];
NSString *unicodePassword = [[NSString alloc] initWithData:data encoding:NSUnicodeStringEncoding];
data = [unicodePassword dataUsingEncoding:NSUnicodeStringEncoding];

unsigned char hash[CC_SHA1_DIGEST_LENGTH];
CC_SHA1([data bytes], [data length], hash);
NSData *result = [NSData dataWithBytes:hash length:CC_SHA1_DIGEST_LENGTH];
NSLog(@"Result: %@",[result base64EncodedString]); 
```

*输出：* dYusXVhObIBzJMgg1E1FJ9cK1NY=

谁能建议我做错了什么？

为什么这两个值不同？

请纠正我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:24:57.677

此行是错误的，因为您将 UTF8 编码数据解释为 Unicode 编码：

`NSString *unicodePassword = [[NSString alloc] initWithData:data encoding:NSUnicodeStringEncoding];`

将第二行替换为： `NSData *data = [password dataUsingEncoding:NSUnicodeStringEncoding];`

数据中的前 2 个字节是 BOM（字节顺序标记）。

删除这 2 个字节 `data = [NSData dataWithBytes:[data bytes] + 2 length:[data length] - 2];`

...然后散列该数据，您将拥有与 C# 中相同的散列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T07:44:23.980

有关更多信息，我发现 SHA1 函数可以有一些结果..

所以我在这个链接上实现了方法：[MD5 and SHA1 iOS implementation](http://www.makebetterthings.com/iphone/how-to-get-md5-and-sha1-in-objective-c-ios-sdk/) linked by [this stackoverflow question](https://stackoverflow.com/questions/15483246/sha1-for-specific-string-in-ios)

如果您发送 UTF8 编码字符串（unicode 1）并且如果您想要十六进制字符串或十进制字符串，我会通过集成将其作为参数发送

```
- (NSString*) sha1UTF8Encoding:(BOOL)utf8 andDecimal:(BOOL)decimal
{
    const char *cstr;
    if (utf8) {
        cstr = [self cStringUsingEncoding:NSUTF8StringEncoding];
    }else{
        cstr = [self cStringUsingEncoding:NSUnicodeStringEncoding];
    }
    NSData *data = [NSData dataWithBytes:cstr length:self.length];

    uint8_t digest[CC_SHA1_DIGEST_LENGTH];

    CC_SHA1(data.bytes, data.length, digest);

    NSMutableString* output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];

    for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++){
        if (decimal) {
            [output appendFormat:@"%i", digest[i]];
        }else{
            [output appendFormat:@"%02x", digest[i]];
        }
    }

    return output;    
} 
```

（请注意，我在 NSString 类别中实现了此方法）

有了这个，我测试了你可以将它用于多种用途的 sha1 操作，例如使用以下配置：

```
NSString* sha1 = [stringToTest sha1UTF8Encoding:YES andDecimal:YES]; 
```

sha1 变量通过此链接中的 C# 方法与一个产品匹配：[Hashing using the SHA1 class](http://www.codeproject.com/Articles/38951/How-To-Hash-Data-Using-MD5-and-SHA1)

# jquery-mobile - 加载页面时显示加载动画微调器

> ID：16059604
> 
> 赞同：0
> 
> 时间：2013-04-17T12:10:01.967
> 
> 标签：jquery-mobile, setinterval, clearinterval, jquery-mobile-loader

我想在关闭 ajax 的 JQueryMobile 页面中显示加载动画微调器。

该页面已加载`data-ajax="false"`或`rel="external"`

我尝试了`pagebeforecreate`和`pageshow`事件，但它没有按我预期的那样工作：

```
$( '#page' ).live( 'pagebeforecreate',function(event){
    $.mobile.loading('show');
});

$( '#page' ).live( 'pageshow',function(event){
    $.mobile.loading('hide');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:45:39.683

您的请求有一点问题。

首先，如果没有设置间隔，您将无法显示/隐藏 ajax 加载器。只有一种情况下这是可能的，那就是在 pageshow 事件期间。在任何其他情况下，都需要 setinterval 来启动加载程序。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Zr7Gf/](http://jsfiddle.net/Gajotres/Zr7Gf/)

```
$(document).on('pagebeforecreate', '#index', function(){     
    var interval = setInterval(function(){
        $.mobile.loading('show');
        clearInterval(interval);
    },1);    
});

$(document).on('pageshow', '#index', function(){  
    var interval = setInterval(function(){
        $.mobile.loading('hide');
        clearInterval(interval);
    },1);      
}); 
```

但是这里我们有一个不同的问题，除非您的页面足够复杂，否则新页面将被加载得非常快。jQuery mobile 具有内部计时器，用于查看页面加载到 DOM 中的速度。如果页面很复杂并且加载时间超过 10 毫秒，它将显示加载程序，否则无论您如何努力，加载程序都不会显示。

另请注意，只有 DOM 加载会计入 10 毫秒。页面样式无法计算。因此，无论页面加载是否看起来更长，只有 DOM 加载计数。

我的示例不会显示 loader，因为它是一个非常简单的示例。但是，如果您评论此行，您可以看到它是有效的示例：

```
$.mobile.loading('hide'); 
```

# android - 如何从防火墙后面使用 crittercism 错误报告库？

> ID：16059605
> 
> 赞同：0
> 
> 时间：2013-04-17T12:10:03.157
> 
> 标签：android, firewall, crittercism

我在防火墙后面的内部 android 设备上使用 Crittercism 错误/崩溃报告。我应该如何配置我的防火墙以让 crittercism 库向服务器发送信息？（港口，...）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:55:11.333

Crittercism通过**256 位加密的****HTTPS传输数据，因此它通过****端口 443**发送数据。

 ****确保您允许**[https://api.crittercism.com](https://api.crittercism.com)**就是这样！

编辑：

如果您使用的是 HTML5 库，请确保您也允许**[https://d1a62freaxhn7x.cloudfront.net/](https://d1a62freaxhn7x.cloudfront.net/)**用于 CDN。****

# javascript - CustomValidator 客户端函数未针对空文本框触发

> ID：16059608
> 
> 赞同：3
> 
> 时间：2013-04-17T12:10:15.313
> 
> 标签：javascript, asp.net

我已经模拟了一个非常简单的页面，我非常困惑为什么当我在 2 个文本框之间切换时 javascript 不会触发：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" inherits="Checkout_test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>c</title>
<script type="text/javascript">
    function checkthisvalue(source, args) {
        alert('hello');
    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:Label ID="lbl1" AssociatedControlID="txtUsername" Text="1:" runat="server" />
    <asp:TextBox runat="server" CssClass="username" ID="txtUsername" ValidationGroup="vg"></asp:TextBox>
    <asp:CustomValidator Enabled="true" ID="cvUsername" Display="Dynamic" ValidationGroup="vg" ControlToValidate="txtUsername" EnableClientScript="true" ClientValidationFunction="checkthisvalue" ValidateEmptyText="true" runat="server">*</asp:CustomValidator>
    <asp:Label ID="lbl2" AssociatedControlID="txtPassword" Text="2:" runat="server" />
    <asp:TextBox runat="server" CssClass="username" ID="txtPassword"></asp:TextBox>
    <asp:CustomValidator Enabled="true" ID="cvPassword" Display="Dynamic" ControlToValidate="txtPassword" EnableClientScript="true" ClientValidationFunction="checkthisvalue" ValidateEmptyText="true" runat="server"></asp:CustomValidator>
</div>
</form>
</body>
</html> 
```

请注意，两个 CustomValidators 都有 ValidateEmptyText=true

我已经在 IE 和 Chrome 中尝试过了，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:58:37.700

我想这不是空文本的问题。仅当`CustomValidator`您不更改控件值时，才会在选项卡导航时触发。（尝试在您的 中输入一个值`TextBox`，使用选项卡导航，返回清空`TextBox`，然后使用选项卡再次导航。CustomValidator 将触发）

考虑到这一点，让验证器触发一个简单的选项卡导航对用户来说会有些令人不安。

无论如何，验证器将在表单提交时触发（前提是您删除了first和`ValidationGroup`上的属性），并且值更改，这是他们应该做的。`TextBox``Validator`

希望这会有所帮助，

# java - 查找不匹配括号的索引

> ID：16059613
> 
> 赞同：0
> 
> 时间：2013-04-17T12:10:34.237
> 
> 标签：java, algorithm, data-structures, stack

我必须（在 Java 中，但语言并不重要）编写一个函数，该函数将带括号的表达式（作为字符串）作为输入并返回所有不匹配括号的索引的集合。

该函数必须仅使用堆栈作为辅助数据结构。

例子：

```
Input: ”d(f(b)())o”
Return:[]

Input: ”**)**(d(f(b)())) **)** o **(**”
Return:[0, 12, 14] 
```

解决这个问题的正确算法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:15:53.530

`Stacks`括号匹配实际上是光荣的。在伪代码中，它看起来像

```
indices = []

for i->0, i<length(string), i++ do

    if string[i] == "(" then
        stack.push("(")
        indexStack.push(i)

    else if string[i] == ")" then
        if stack.size() < 1 then
            indices.append(i)
        else
            stack.pop()
            indexStack.pop()

while indexStack.size() > 0 do
     indices.append(indexStack.pop()) 
```

至于这是如何工作的解释。

*   遍历字符串
*   如果`char`是一个开放的paren，则将其压入堆栈
*   如果`char`是关闭的括号，请检查堆栈上是否有任何打开的括号
*   如果有一个开放的括号，则将其从堆栈中弹出（我们找到了匹配项）；如果没有，我们有一个不匹配的括号，记录索引
*   最后，如果堆栈中还有任何括号，它们是不匹配的，弹出索引关闭`indexStack`

编辑：对不起，没有处理无与伦比的开放括号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:14:11.970

你可以...

1.  从左到右，检查每个字符
2.  如果它是一个开括号，则将其添加到堆栈中。将此号码添加到列表中。
3.  如果它是一个右括号，则从堆栈中弹出。如果无法弹出，则将当前字符索引添加到列表中。
4.  如果可以弹出，则从打开的括号列表中删除最后一个索引。
5.  重复步骤 2 和 3，直到完成

您可以有 2 个列表，一个负责开括号，另一个负责闭括号。这将使删除索引时更容易。

# php - PHP 会话 - 在 iframe 中设置和检索

> ID：16059623
> 
> 赞同：0
> 
> 时间：2013-04-17T12:10:56.703
> 
> 标签：php, iframe, session-variables

我有一个发送到 PHP 页面进行处理的 HTML 表单。我需要向表单添加一些功能，并且需要在 HTML 表单中设置会话变量。我无法将 HTML 页面更改为 PHP，因此在 PHP 页面中设置了一个会话，并将其作为 iframe 包含在表单中。当页面加载会话变量时，我无法在进程 PHP 页面中检索此会话，会话为空。有人可以帮忙吗？

在 iframe 中设置会话的代码：

```
error_reporting(E_ALL);
session_start(); // start a session
$code = rand(1000, 9999); //create a random number between 1000 and 9999
$_SESSION['code'] = $code; //add the random number to session 'code' 
```

我需要检索会话的 process.php 页面中的代码：

```
error_reporting(E_ALL);
session_start();

print_r($_SESSION); 
```

有人可以帮忙吗？

编辑：

我刚刚意识到这在 IE 中有效，但在 Firefox 或 chrome 中无效 - 奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:14:21.023

您需要做一些额外的工作来确保其中包含会话 ID 的 cookie 与 iframe 共享。请注意，出于安全原因，这仅在 iframe 与容器网站位于同一域时才可能。

# c# - 为什么 razorengine 不将其渲染为原始的？

> ID：16059627
> 
> 赞同：1
> 
> 时间：2013-04-17T12:10:59.620
> 
> 标签：c#, razorengine

我正在使用 RazorEngine 创建数据驱动的 xaml。

但是，我不能让它工作：

```
string template = "<k t=\" @Raw(Model.Name) \" ";
var model = new { Name = "CS&#10;" };
string result = Razor.Parse(template, model); 
```

这导致“结果”成为

```
<k t="CS&amp;#10; " 
```

我不想把“&”变成

```
@amp; 
```

如果我删除以下任何内容：

起始字符 "<" "k" 和 "t" 之间的空格 \"

....然后剃须刀引擎解析器 Raw() 函数通过不将“&”转换为“&”而正确运行

我还认为我可以通过使用代码块 @{} 而不仅仅是 @ 来帮助 Razor 更好地理解我的意图。但是，我还没有想出如何让代码块将文本发送到 Razor 输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:32:31.747

`&amp;`您实际上不需要做任何事情`&`。

如果您尝试此代码，您将看到它输出`&`

```
var str = HttpUtility.HtmlDecode("&amp;") 
```

有关详细信息，请参阅[http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)和[http://en.wikipedia.org/wiki/Character_encodings_in_HTML](http://en.wikipedia.org/wiki/Character_encodings_in_HTML)。

# vba - excel vba中的应用程序定义或对象定义错误

> ID：16059632
> 
> 赞同：3
> 
> 时间：2013-04-17T12:11:10.887
> 
> 标签：vba

我是新手。我需要从编写的宏中创建一个新的 excel，并且需要添加一些数据并将其保存为 csv 文件。我收到应用程序定义或对象定义错误。她是密码

```
Sub splitIntoCsv()
Dim wbIn
Dim wbIn1 As Workbook
Dim header As Variant
Set wbIn = CreateObject("Excel.Application")
wbIn.Workbooks.Add
'wbIn.Worksheets(1).Name = "TestData"
'Set wbIn1 = Workbooks.Open(Sheet1.Range("b25").Value, True, False)
header = Split(ThisWorkbook.Sheets(1).Range("B2").Value, ",")
For k = 1 To 10
DoEvents
Next k
For i = LBound(header) To UBound(header)
'MsgBox header(i)
**wbIn.Worksheets(1).Range("a" & i).Value = header(i)**
Next i
wbIn.Worksheets(1).SaveAs Filename:="D:\file.csv" & Filename, FileFormat:=xlCSV, CreateBackup:=False
End Sub 
```

我在星号线处收到错误。需要帮助，在此先感谢，Raghu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:06:52.220

对于您询问的带星号的行，请注意该`Split`函数返回一个从零开始的数组，因此在您第一次通过循环时，您试图引用 cell `A0`。因此，将行更改为：

```
wbIn.Worksheets(1).Range("a" & i+1).Value = header(i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:55:46.847

下面的代码现在可以工作了，请看一下

```
Sub splitIntoCsv()
Dim wbIn As Excel.Application
Dim wbIn1 As Workbook
Dim header As Variant

Set wbIn = CreateObject("Excel.Application")
Set wbIn1 = wbIn.Workbooks.Add

header = Split(ThisWorkbook.Sheets(1).Range("B2").Value, ",")
For k = 1 To 10
DoEvents
Next k
For i = LBound(header) To UBound(header)
'**wbIn1.Worksheets(1).Range("a" & i).Value = header(i)**
Next i

wbIn1.SaveAs Filename:="D:\file.csv" & Filename, FileFormat:=xlCSV, CreateBackup:=False
wbIn1.Close
Set wbIn1 = Nothing
wbIn.Application.Quit
Set wbIn = Nothing
End Sub 
```

代码中的第一个问题是您试图使用工作表进行保存。工作表没有保存方法，工作簿有。

在修复代码时，我在内存中有大量的 excel 对象。请查看如何关闭和退出 Excel 应用程序。

# java - JDBC PreparedStatement#setNull 的目的是什么

> ID：16059634
> 
> 赞同：10
> 
> 时间：2013-04-17T12:11:11.820
> 
> 标签：java, postgresql, jdbc

我对具有空值的 VARCHAR 列的表进行了实验，试图获取具有特定列 NULL 的行数。我使用了三种形式：

**表格 A**

```
SELECT COUNT(*) FROM buyers WHERE buye_resp IS NULL 
```

**表格 B**

```
 SELECT COUNT(*) FROM buyers WHERE buye_resp = ? 
```

...其中参数由**setString(1, null)提供**

**形式 C**

... 与**表单 B**类似，但参数设置为**setNull(1, java.sql.Types.VARCHAR)**

三个表格中只有**表格A**产生了正确的结果，表格B和C都返回0（三个表格的代码在帖子末尾）。这就引出了一个问题：**setNull**的目的是什么？

针对 PostgreSQL 9.2 数据库运行的测试。

## 代码

```
private static int numOfRows_formA(Connection conn) throws SQLException {
    PreparedStatement pstm = null;
    ResultSet         rs   = null;
    try {
        String pstmStr = "SELECT COUNT(*) FROM buyers WHERE buye_resp IS NULL";
        pstm = conn.prepareStatement(pstmStr);
        rs =  pstm.executeQuery();
        rs.next();
        return rs.getInt(1);
    } finally {
        DbUtils.closeQuietly(null, pstm, rs);
    }
}

private static int numOfRows_formB(Connection conn) throws SQLException {
    PreparedStatement pstm = null;
    ResultSet         rs   = null;
    try {
        String pstmStr = "SELECT COUNT(*) FROM buyers WHERE buye_resp = ?";
        pstm = conn.prepareStatement(pstmStr);
        pstm.setString(1, null);
        rs = pstm.executeQuery();
        rs.next();
        return rs.getInt(1);
    } finally {
        DbUtils.closeQuietly(null, pstm, rs);
    }
}

private static int numOfRows_formC(Connection conn) throws SQLException {
    PreparedStatement pstm = null;
    ResultSet         rs   = null;
    try {
        String pstmStr = "SELECT COUNT(*) FROM buyers WHERE buye_resp = ?";
        pstm = conn.prepareStatement(pstmStr);
        pstm.setNull(1, java.sql.Types.VARCHAR);
        rs = pstm.executeQuery();
        rs.next();
        return rs.getInt(1);
    } finally {
        DbUtils.closeQuietly(null, pstm, rs);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T12:17:47.253

SQL 使用[三元逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)，因此当is时`buye_responsible = ?`总是返回`unknown`（并且从不`true`）。这就是为什么您需要检查.`buye_responsible``null``IS NULL``null`

`setNull()`例如，当您需要将`null`s 传递给`INSERT`and`UPDATE`语句时，可以使用它。由于`setInt()`和之类的方法`setLong()`采用原始类型（`int`, ），因此在这种情况下`long`您需要一个特殊的方法来传递。`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:20:25.873

在数据库系统中，一个空值不等于另一个空值，因此该行`SELECT COUNT(*) FROM vat_refund.er_buyers WHERE buye_responsible = null`不会返回任何记录。setNull() 方法只是在索引位置设置一个空值。`Sets the designated parameter to SQL NULL.`这来自 JAVA API。也就是说，它将为该索引设置一个 SQL null，但它不会按照您的需要使用 isNull() 函数。所以这就是为什么对于表格 C 你也​​没有得到任何结果。

# javascript - 我的 javascript 在 IE 和 Firefox 中不起作用

> ID：16059636
> 
> 赞同：-5
> 
> 时间：2013-04-17T12:11:21.180
> 
> 标签：javascript

抱歉，我是 javascript 的新手，我在互联网的某个地方找到了这个，我写了糟糕的代码，但这在 chrome 中有效......

```
function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        $(".class").nariams();
    }
    else {
        ele.style.display = "block";
        $(".class").nariams();
    }
} 

<div class "nariams1"><a  id="displayText" href="javascript:toggle();"> 
    <div class="nariams">Nariams </div>       
</div>

<div id="toggleText" style="display: none">
<form id="slick-login">
<label for="username">Prisijungimo vardas</label><input type="text" name="username" class="placeholder" placeholder="vardas">
<label for="password">Slaptažodis</label><input type="password" name="password" class="placeholder" placeholder="slaptažodis">
<input type="submit" value="Prisijungti">
</form>
</div> 
```

.nariams 是定义按钮的 css 类。不久，当我按下其他班级的按钮时，我想要那个。此代码适用于 chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:21:18.907

此脚本失败的一些原因是：

*   `ele`在页面上找不到，因此它们返回 null ，稍后当您进行`ele.style.display`检查时，它将在那里终止。

*   `$(".nariams")`必须返回一个函数才能像`$(".nariams")()`. 否则会抛出错误。

因此，这实际上取决于控制台中的错误消息所说的内容。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-17T12:43:19.207

这是 OP 的小提琴（未对原始代码进行任何更改）：

[http://jsfiddle.net/X49pb/5/](http://jsfiddle.net/X49pb/5/)

在最近的 Chrome/FF 和 IE 9/10 中为我工作。 由于该函数未包含在 OP 中`$(".class").nariams();`，因此仍会引发错误。`nariams()`还不清楚 $ 是什么意思，它可能是 jQuery 还是其他东西。

# c# - 如何在 OData 上实现自定义身份验证

> ID：16059637
> 
> 赞同：1
> 
> 时间：2013-04-17T12:11:26.350
> 
> 标签：c#, .net, authentication, odata

我想通过与数据库中的用户表关联的自定义身份验证来保护 OData 服务。我一直痴迷于这个问题，并徒劳地寻找了很长时间的解决方案。我的意思是，是的，网络上有很多文章，但它们都很琐碎，例如实现 IPrincipal 或 IHttpContext 并启用基本身份验证。值得注意的是，他们中的许多人可以将数据追溯到 2010 年，当时 OData 还没有今天那么成熟。所以我想知道是否有任何基于数据库的自定义身份验证的快速解决方案。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:01:22.537

OData 和身份验证（甚至就此而言的授权）在很大程度上是设计无关的。这并不意味着 OData 堆栈不能很好地支持身份验证和授权，只是 OData 协议本身没有对此进行评论。除了协议，Web API 和 WCF 数据服务都在努力在这里获得更好的支持。作为 .NET 社区的成员（而不是 Microsoft 员工），我认为可以合理地预期，随着这些堆栈实现授权 API，它们可能会寻求基于声明的授权。再次，我想明确声明，我并不想在这里隐藏或泄露任何计划——我只是在推测身份验证和授权的去向。

简而言之，如果我站在你的立场上，我会在 OAuth2 和基于声明的身份验证之间找到最简单的交叉点，并使其暂时发挥作用。现在制定您的声明和身份验证意味着您以后只需要考虑集成实际的授权代码。

# ruby-on-rails - 如何打印用管道分隔的哈希值

> ID：16059639
> 
> 赞同：3
> 
> 时间：2013-04-17T12:11:32.237
> 
> 标签：ruby-on-rails, ruby, rubygems

我有一个哈希数组，如下所示：

```
sample = {:a=>1, :b=>2, :c=>{:c1=>abc, :c2=>xyz}, :d=>3} 
```

我想要的输出是：

```
1|2|abc|xyz|3 
```

但是如果我使用命令：`sample.values.join("|")`

我的输出显示如下：

```
1|2|c1abcc2xyz|3 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:23:50.987

要处理任意深度，您需要使用递归，如下所示：

```
def nested_values(object)
  object.values.reduce([]) do |array, value|
    array + (value.is_a?(Hash) ? nested_values(value) : [value])
  end
end

sample = {:a=>1, :b=>2, :c=>{:c1=>:abc, :c2=>:xyz}, :d=>3}
p nested_values(sample).join("|") 
```

输出：

```
"1|2|abc|xyz|3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:56:46.833

```
sample.values.flat_map { |x| x.is_a?(Hash) ? x.values : [x] }.join("|")
#=> "1|2|abc|xyz|3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:35:58.683

请检查这个非常棘手的简单代码。它会返回你所期望的

```
 sample = {:a=>1, :b=>2, :c=>{:c1=>abc, :c2=>xyz}, :d=>3}

  b= []

 sample.values.each do |a|

 if a.class != Hash

  b << a

 else

  c =a.values

  b << c

 end

 end

 b.join('|')

 => "1|2|abc|xyz|3" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:36:22.373

```
sample = {:a=>1, :b=>2, :c=>{:c1=>:abc, :c2=>:xyz}, :d=>3}
sample.values.map{|i| next i.values if i.instance_of? Hash ; i}.flatten.join('|')
#=> "1|2|abc|xyz|3" 
```

# php - 如何通过会话数组将标签文本传递到另一个页面

> ID：16059640
> 
> 赞同：0
> 
> 时间：2013-04-17T12:11:34.113
> 
> 标签：php, arrays, forms, session, post

需要帮助通过会话数组将标签文本传递到另一个页面，我也尝试发布单选按钮值，但问题是单选按钮值没有显示到另一个页面？

**索引页面 PHP 功能**

```
<?php
session_start();
if (isset($_REQUEST['demo'])) {
    $_SESSION['size'] = array('Small', 'Medium');
}
?>

$(document).ready(function () {
$('.form-radios label').attr('checked', 'unchecked');
$(".form-radios label").click(function(){
$(this).attr('checked', 'checked').addClass('checked');
$('label').not(this).removeClass('checked');
});  
});

</script> 
```

**索引页表格**

```
<form action="page2.php" method="post">

    <div class="form-radios">

        <input type="radio" name="size" id="size" value="Small" />
        <label for="size">Small</label>
        <input type="radio" name="size" id="size" value="medium"/>
        <label for="size">Medium</label>
        <input type="radio" name="size" id="size" value="large"/>
        <label for="size">Large</label>
        <input type="radio" name="size" id="size" value="xl"/>
        <label for="size">Xl</label>

    </div><br />
    <input type="submit" name="demo" value="submit" />

</form> 
```

**第2页功能**

```
<?php 
session_start();
echo $sizes=$_SESSION['size'];
?>

<input type="text" value="<?php echo  $sizes ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:14:19.630

您的会话是一个数组，您必须循环它。

```
foreach ($_SESSION['sizes'] as $size)
{
    echo $size;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:20:19.280

> 但我想发布无线电值我怎么能发送？

当用户按下提交按钮时，表单中的单选值会自动发送到指定的操作。在操作页面中，他们可以通过`$_POST`或`$_GET`全局数组检索它们。在您的情况下，由于您使用的是 POST 方法，您可以通过以下方式检索您的单选框：

```
$_POST['size']; 
```

* * *

> 实际上我想在有人点击标签然后将值标签到另一个页面时发送。

好吧，您可以通过使 Javascript 在选择单选框时触发事件并通过 AJAX 发送请求来做到这一点。

# performance - MATLAB for 循环索引的最佳实践

> ID：16059645
> 
> 赞同：11
> 
> 时间：2013-04-17T12:11:39.023
> 
> 标签：performance, matlab, for-loop, indexing

我惊讶地发现运行 MATLAB for 循环之间的成本差异如下：

```
ksize = 100;
klist = 1:ksize;

tic
for m = 1:100000        
    for k = 1:ksize

    end        
end
toc

tic
for m = 1:100000        
    for k = klist

    end        
end
toc 
```

唯一的区别是创建索引列表的方式。我会怀疑第二个版本更快，但是看！

```
Elapsed time is 0.055400 seconds.
Elapsed time is 1.695904 seconds. 
```

我的问题是双重的：是什么导致了上述结果，以及这种细微差别（或类似的细微差别）在 MATLAB 编程中还出现在哪里？我希望将来能够更好地发现这些低效率。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:18:55.323

[`for()`](http://www.mathworks.co.uk/help/matlab/ref/for.html)各州的文档：

> ```
> for index = values
>    ...
> end 
> ```
> 
> where`values`具有以下形式之一：
> 
> *   ...
>     
>     
> *   `valArray``valArray`：在每次迭代时从数组的后续列创建列向量索引。例如，在第一次迭代中，`index = valArray(:,1)`. 循环最多执行`n`次数，其中`n`是 valArray 的列数，由 给出`numel(valArray, 1, :)`。输入`valArray`可以是任何 MATLAB 数据类型，包括字符串、元胞数组或结构。

因此，我假设有很大的**开销**并且编译器不会检查是否`1:ksize == klist`利用更快的实现。换句话说，根据 Eitan 的评论，JIT 适用于前两种类型的接受*值*。

整个问题与以下索引任务（列与元素）有关：

```
tic
for m = 1:100000        
    for k = 1:ksize
        klist(:,k);
    end        
end
toc

tic
for m = 1:100000        
    for k = 1:ksize
        klist(k);
    end        
end
toc

Index column:  ~2.9 sec
Index element: ~0.28 sec 
```

您可以看到如何`klist(:,k)`有效地减慢更快的循环，表明问题`for k = klist`与在这种情况下使用的列索引有关。

有关更多详细信息，请参阅[关于（低效）索引的冗长讨论](http://www.mathworks.co.uk/matlabcentral/answers/54522-why-is-indexing-vectors-matrices-in-matlab-very-inefficient)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:18:21.897

我的回答是推测（因为只有 Mathworks 的人知道他们产品的实现），但我认为第一个`k`循环经过优化，不会创建实际的索引数组，而是一个一个地扫描它们，因为它明确地显示了值是“建造”的。第二个`k`循环无法优化，因为解释器事先不知道索引数组的内容是否会均匀增长。所以，每次循环开始时，它都会~~复制~~访问原始文件`klist`，这就是你有性能损失的原因。

**稍后编辑：**`klist`与“动态”创建索引值相比，另一个性能损失可能来自对数组的索引访问。

# download - 使用 java 在一次调用中读取标题和正文

> ID：16059651
> 
> 赞同：0
> 
> 时间：2013-04-17T12:11:46.610
> 
> 标签：download, jakarta-mail

我有一个邮件阅读器类，它设置 FetchProfile，然后执行 msg.getContent。我想在一个电话中同时阅读标题和内容，基本上是在一个电话中下载完整的邮件。因为我观察到 msg.getcontent 调用服务器来获取 body/content ，如果我们可以一次调用下载完整的邮件，就可以节省对服务器的调用。

这可能吗？

代码与此类似

```
 inbox.open(Folder.READ_ONLY);

    /* Get the messages which is unread in the Inbox */
    Message messages[] = inbox.search(new FlagTerm(
            new Flags(Flag.SEEN), false));

    /* Use a suitable FetchProfile */
    FetchProfile fp = new FetchProfile();
    fp.add(FetchProfile.Item.ENVELOPE);
    fp.add(FetchProfile.Item.CONTENT_INFO);
    inbox.fetch(messages, fp);

    for (int i = 0; i < messages.length; i++) {
        System.out.println("MESSAGE #" + (i + 1) + ":");
        Message message = messages[i];

        **String content = message.getContent();**
        System.out.println("Content : " + content);
    } 
```

感谢任何帮助。

感谢和问候 Raaghu.K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:39:51.937

如果您想在一个呼叫中获取**整个**消息，并且不需要使用 IMAP 协议的任何功能，您有两种选择：

1.  使用 POP3 而不是 IMAP。
2.  使用 Message.writeTo 方法将消息内容写入文件或字节数组并从那里处理它，例如，使用采用 InputStream 的 MimeMessage 构造函数。（这会生成整个消息的本地副本。）

# oracle10g - oracle 10g:No command 'dbca' found , 即使设置了 PATH

> ID：16059653
> 
> 赞同：0
> 
> 时间：2013-04-17T12:11:55.050
> 
> 标签：oracle10g, oracle-xe

我已将我的 PATH 正确设置为**$ORACLE_HOME/bin**并且其余的 exe 工作正常，但我在该目录的任何地方都没有看到“dbca”，尽管每个来源都说它应该在那里。它也没有出现在我的 Oracle 10g 快捷版菜单中。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:24:34.230

Oracle XE 不包括 dbca。

许可条款不允许在给定服务器上多次使用实例，请参阅“许可权利”下的[http://docs.oracle.com/cd/B25329_01/doc/license.102/b25456/toc.htm](http://docs.oracle.com/cd/B25329_01/doc/license.102/b25456/toc.htm) ：“ 1\. Express Edition 仅限于任何服务器上的单个实例；" 并且鉴于 XE 带有一个预配置的数据库，因此包含 dbca 几乎没有意义。

# c# - 正则表达式查找和替换字符串中的年份

> ID：16059655
> 
> 赞同：0
> 
> 时间：2013-04-17T12:12:10.257
> 
> 标签：c#, regex

我的 c# 中有一个字符串：

> The.Big.Bang.Theory.(2013).S07E05.Release.mp4

我需要找到 的出现，并用*_*（三个下划线）`(2013)`替换整个内容，包括括号。所以输出将是：

 *> 大爆炸理论。*_* .S07E05.Release.mp4

有没有可以做到这一点的正则表达式？或者有没有更好的方法？

然后我对新字符串进行一些处理 - 但后来，需要报告“（2013）”已被删除......所以我需要存储被替换的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:15:54.063

用你的字符串试过。有用

```
string pattern = @"\(\d{4}\)";
string search = "The.Big.Bang.Theory.(2013).S07E05.Release.mp4";
var m = Regex.Replace(search, pattern, "___");
Console.WriteLine(m); 
```

这将找到包含在打开/关闭括号中的任何 4 位数字。
如果年份数字可以改变，我认为 Regex 是最好的方法。

相反，此代码会告诉您是否有匹配的模式

```
var k = Regex.Matches(search, pattern);
if(k.Count > 0)
  Console.WriteLine(k[0].Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:42:53.343

许多这些答案忘记了最初的问题，因为您想知道要替换什么。

```
string pattern = @"\((19|20)\d{2}\)";
string search = "The.Big.Bang.Theory.(2013).S07E05.Release.mp4";
string replaced = Regex.Match(search, pattern).Captures[0].ToString();
string output = Regex.Replace(search, pattern, "___");
Console.WriteLine("found: {0}  output: {1}",replaced,output); 
```

给你输出

```
found: (2013)  output: The.Big.Bang.Theory.___.S07E05.Release.mp4 
```

这也是我的模式的解释。 `\(`-- 匹配 (
`(19|20)`-- 匹配数字 19 或 20。我假设这是从 1900 年到现在的电视节目或电影的日期。 `\d{2}`-- 匹配另外 2 个数字 `\)`-- 匹配)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:19:16.783

这是来自控制台应用程序的工作片段，请注意正则表达式`\(\d{4}\)`：

```
var r = new System.Text.RegularExpressions.Regex(@"\(\d{4}\)");
var s = r.Replace("The.Big.Bang.Theory.(2013).S07E05.Release.mp4", "___");
Console.WriteLine(s); 
```

以及控制台应用程序的输出：

```
The.Big.Bang.Theory.___.S07E05.Release.mp4 
```

你可以[参考这个 Rubular 来证明](http://rubular.com/r/Esv1nfLLm2)。

以下是考虑到您的附加要求的修改解决方案：

```
var m = r.Match("The.Big.Bang.Theory.(2013).S07E05.Release.mp4");
if (m.Success)
{
    var s = "The.Big.Bang.Theory.(2013).S07E05.Release.mp4".Replace(m.Value, "___");
    var valueReplaced = m.Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:24:06.880

尝试这个 ：

```
 string str="The.Big.Bang.Theory.(2013).S07E05.Release.mp4";
 var  matches = Regex.Matches(str, @"\([0-9]{4}\)");
 List<string> removed=new List<string>();
 if (matches.Count > 0)
  {
    for (int i = 0; i < matches.Count; i++)
    {
      List.add(matches.value);
    }
  }  

 str=Regex.replace(str,@"\([0-9]{4}\)","___");

System.out.println("Removed Strings are:")
foreach(string s in removed )
{
    System.out.println(s);
} 
```

输出：

```
Removed Strings are:
(2013) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:19:16.817

尝试这个：

```
 string s = "The.Big.Bang.Theory.(2013).S07E05.Release.mp4";
        var info = Regex.Split(
            Regex.Matches(s, @"\(.*?\)")
            .Cast<Match>().First().ToString(), @"[\s,]+");
        s = s.Replace(info[0], "___"); 
```

结果

```
The.Big.Bang.Theory.___.S07E05.Release.mp4 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-17T12:19:27.370

您不需要一个正则表达式来进行简单的替换（您可以使用一个，但它不是必需的）

```
var name = "The.Big.Bang.Theory.(2013).S07E05.Release.mp4";
var replacedName = name.Replace("(2013)", "___"); 
```*

# html - CSS Divs 不做自动高度

> ID：16059662
> 
> 赞同：2
> 
> 时间：2013-04-17T12:12:32.533
> 
> 标签：html, css

我有这个 CSS/HTML 代码：

```
#container {
    width:70%;
    height:100%;
    margin:120px auto 0 auto;
    padding:10px 10px 10px 10px;
    border:solid 1px #a79494;
    border-top:solid 4px #a2cd3a;
    padding-bottom:60px;   /* Height of the footer */
}
#body {
    width:70%;
    border:solid 1px #a79494;
    display:inline;
    float:left;
}
#property-search {
    width:20%;
    border:solid 1px #a79494;
    display:inline;
    float:right;
}

<div id="container">
<div id="body">
   Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas et enim sed tellus luctus varius. Ut nisl felis, volutpat id ornare at, placerat ut nisi. Cras auctor, nisi vitae interdum iaculis, magna nulla pretium quam, ac euismod quam ante at sapien. Cras mattis velit sed ante pretium non pulvinar metus molestie. Maecenas euismod bibendum nulla quis interdum. Proin venenatis pellentesque lorem quis condimentum. Vestibulum sapien sapien, convallis ut semper at, hendrerit in lorem. Curabitur cursus tempor felis eu varius.
<br /><br />
In id sem neque. Nam id convallis nisl. Duis sed venenatis erat. Sed blandit auctor imperdiet. Aliquam magna erat, pellentesque at fermentum eget, cursus at nunc. Pellentesque vestibulum feugiat aliquam. Proin cursus sapien non mauris laoreet posuere. Maecenas eleifend hendrerit suscipit. Suspendisse eleifend lacus vel arcu ultrices vulputate. Mauris mattis feugiat massa vel tincidunt. Proin ut mi non ipsum tristique pretium sit amet fermentum massa. In hac habitasse platea dictumst. Morbi dictum iaculis nibh, at vestibulum mauris placerat sit amet. Vivamus hendrerit molestie elit, nec porta libero semper a. Nullam in tellus erat, vitae sagittis nisi. Cras interdum hendrerit magna, at accumsan urna fermentum vitae.
<br /><br />
Sed eu libero non magna egestas lacinia. Suspendisse lacinia ipsum consequat metus aliquet laoreet. Quisque in eleifend diam. Aliquam orci lacus, ultrices non adipiscing nec, sollicitudin in erat. Etiam dignissim, felis non vulputate bibendum, lectus nunc congue massa, in porta tellus sapien id augue. Etiam odio ligula, iaculis vitae faucibus nec, sodales sed nunc. Phasellus eget neque massa, viverra facilisis arcu. Ut suscipit bibendum libero, eu consectetur leo rhoncus sit amet. Sed interdum risus a dolor venenatis ullamcorper ut ut quam. Curabitur eros leo, pulvinar ac vestibulum adipiscing, tempor nec augue. Cras tincidunt blandit libero, eget sollicitudin erat tempor eu. Donec eleifend posuere lectus. Donec turpis ante, sodales in luctus eget, feugiat non sapien. Donec sagittis nunc et ipsum gravida a scelerisque odio ultricies.
</div>
<div id="property-search">
SEARCH
</div> <!-- property-search -->
</div> <!-- body --> 
```

我需要 body div 和 property-search div 位于它们所在的容器 div 内，但是当其中的子 div 较大时，带有边框的容器 div 不会扩大其高度

这里也是一个小提琴：http: [//jsfiddle.net/bfSLD/1/](http://jsfiddle.net/bfSLD/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:22:31.790

你必须清除浮动：

```
<div id="container">
    <div id="container">...</div>
    <div id="body">...</div>
    <div style="clear: both;"></div>
</div> 
```

[http://jsfiddle.net/bfSLD/8/](http://jsfiddle.net/bfSLD/8/)

或者更好的解决方案是使用 clearfix 类：

```
<div id="container" class="clearfix">
    <div id="container">...</div>
    <div id="body">...</div>
</div> 
```

例如来自 HTML5 biolerplate 的这个：

```
.clearfix:before, .clearfix:after {content: " "; display: table;}
.clearfix:after {clear: both;}
.clearfix {*zoom: 1;} 
```

[http://jsfiddle.net/bfSLD/12/](http://jsfiddle.net/bfSLD/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:17:42.113

将以下内容添加到容器中：

```
display: inline-block; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:19:44.490

[http://jsfiddle.net/bfSLD/9/](http://jsfiddle.net/bfSLD/9/)

这是你想要的`achive`吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:21:59.117

尝试从#body 中删除左侧的浮动，并将显示设置为inline-block（也在#body 上）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:39:21.370

这是你要找的吗？

```
#container {
width:70%;
margin:120px auto 0 auto;
padding:10px 10px 10px 10px;
border:solid 1px #a79494;
border-top:solid 4px #a2cd3a;
padding-bottom:60px;   /* Height of the footer */
position:absolute;
}
#body {
width:70%;
border:solid 1px #a79494;
display:inline;
float:left;
}
#property-search {
width:20%;
border:solid 1px #a79494;
display:inline;
float:right;
} 
```

# c# - 在本地计算机上调试 Windows Store 应用程序

> ID：16059663
> 
> 赞同：17
> 
> 时间：2013-04-17T12:12:33.933
> 
> 标签：c#, debugging, windows-8, visual-studio-2012, windows-store-apps

我正在尝试使用本地机器调试器调试 Windows 8 C# Store 应用程序。所以，我在调用后向`MainPage`构造函数添加了一些不正确的行。`InitializeComponent`我尝试了导致`DivideByZero`或`NullReferenceException`- 结果相同的代码。

所以，我执行“开始调试”，调试器在这里中断：

```
#if DEBUG && !DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION
        UnhandledException += (sender, e) =>
        {
            if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break();
        };
#endif 
```

堆栈信息不可用，无法检测到错误在哪里（只有输出窗口中的第一次机会异常消息给出提示）。

我试图`DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION`在项目中定义预处理器符号。这次我收到了以下奇怪的消息：“**调试器已附加到 YourProgram.exe 但未配置为调试此未处理的异常**”。

只有在“异常”对话框中检查并`DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION`定义了特定的异常类型时，我才设法打破导致错误的行。

那么，像在传统的桌面应用程序调试中那样，什么是打破违规行的正确方法呢？如果可能，不修改例外列表。`DISABLE_XAML_GENERATED_BREAK_ON_UNHANDLED_EXCEPTION`常量的目的究竟是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-23T01:36:28.583

它看起来像一个 xaml 解析异常。您是否能够查看异常消息并查看错误在哪里？

这是一些示例屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/83Cd5.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-30T21:21:03.503

好吧，当您启动 Visual Studio 时，您必须单击调试，然后单击选项和设置，然后单击调试中的常规，然后单击启用我的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-25T12:35:46.520

在调试之前在“调试/Windows/异常设置”中启用“公共语言运行时异常”会很有帮助。Visual Studio 现在将因实际错误而中断。

[![在此处输入图像描述](https://i.stack.imgur.com/8Ks9k.jpg)](https://i.stack.imgur.com/8Ks9k.jpg)

# android - android web 视图没有显示为屏幕的一部分

> ID：16059664
> 
> 赞同：0
> 
> 时间：2013-04-17T12:12:38.623
> 
> 标签：android, html, android-layout, webview, android-webview

我的活动代码

```
public class MainActivity extends Activity {
Spinner spinnerProduct;
WebView webView1, webView2, webView3;
private Handler mHandler = new Handler();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    spinnerProduct = (Spinner) findViewById(R.id.spinner_select_product);

    List<String> list = new ArrayList<String>();
    list.add("Product 1");
    list.add("Product 2");
    list.add("Product 3");

    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
    spinnerProduct.setAdapter(dataAdapter);

    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinnerProduct.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            Toast.makeText(getApplicationContext(), "Product " + ++arg2 + " selected", Toast.LENGTH_LONG).show();
            showHtml();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    });
}

public void showHtml() {
    Log.v("in showHtml", "in showHtml");
    webView1 = (WebView) findViewById(R.id.web_view1);
    WebSettings webSettings = webView1.getSettings();
    webSettings.setJavaScriptEnabled(true);

    webSettings.setSavePassword(true);
    webSettings.setSaveFormData(true);
    webSettings.setSupportZoom(true);

    // webView1.addJavascriptInterface(new DemoJavaScriptInterface(),
    // "demo");

    webView1.loadUrl("file:///android_asset/product.html");

    webView1.setWebChromeClient(new MyJavaScriptChromeClient(getApplicationContext()));
}} 
```

我的xml代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:weightSum="10"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/ll_header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <TextView
        android:id="@+id/tv_header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/app_name" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll_select_product"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:gravity="center"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner_select_product"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll_web_views"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="7"
    android:orientation="horizontal"
    android:weightSum="3" >

    <WebView
        android:id="@+id/web_view1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <WebView
        android:id="@+id/web_view2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <WebView
        android:id="@+id/web_view3"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
</LinearLayout> 
```

我检查了 logcat，调用了 showHtml() 方法（它打印“in html”）。

但网页视图不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:02:10.523

Please have a look at your class `MyJavaScriptChromeClient`. I've tried your code with a simple `WebChromeClient` and `WebViewClient` and it worked.

```
webView1.setWebChromeClient(new WebChromeClient() {
        @Override
        public void onProgressChanged(WebView view, int progress)
        {

        }
    });
    webView1.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    }); 
```

# kendo-ui - 如何在剑道网格中设置和获取模板列值/文本

> ID：16059670
> 
> 赞同：4
> 
> 时间：2013-04-17T12:12:55.720
> 
> 标签：kendo-ui, kendo-grid, kendonumerictextbox

考虑我有一个剑道网格，如下所示
[http://jsbin.com/uxumab/1/](http://jsbin.com/uxumab/1/)

它有 ItemId、Qty、Price 和 Total(template) 列。我想让 Qty 列可编辑，并希望通过 Qty 列的更改来更改总列值。最后，我想通过网格迭代检索所有具有新更改的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T20:41:24.030

基本上最简单的方法是通过 kendo 的 MVVM 来做到这一点。这是一个例子：

```
 $(document).ready(function () {
        var gridData = [
              { ItemId: "1001", Qty: 2, price: 200 }
            , { ItemId: "1002", Qty: 1, price: 100 }
            , { ItemId: "1003", Qty: 1, price: 150 }
                     ];

        $("#grid").kendoGrid({
            dataSource: gridData
            , selectable: "row",
          dataBound:function(){
          grid = this;
            grid.tbody.find('tr').each(function(){            
             var item = grid.dataItem(this);
             kendo.bind(this,item);
         })
          }
            , columns: [
                  { field: "ItemId" }
                , { field: "Qty" }
                , { field: "price" }
              , { title: "Quantity", width: "200", template: '<input data-role="numerictextbox" data-bind="value:Qty" data-max-value="100"/>' }                  , {
                     title: "Total"
                    , template: "#=Qty*price#"
                }
            ]
        });

    }); 
```

和[现场](http://jsbin.com/egoroh/2/edit)版。

# javascript - 使用纯 javascript 对特定 lis 应用效果

> ID：16059675
> 
> 赞同：1
> 
> 时间：2013-04-17T12:13:14.877
> 
> 标签：javascript, html-lists

我可以在 jquery 中做到这一点，但出于某种原因，我的老板更喜欢将服务器请求减少到 32kb，而不是使用 jquery 的魔力。那么，如何`li`使用纯 javascript 在点击时将效果应用于所有标签？

我已经尝试过`getElementById`，但这仅适用于 ids。javascript 也不是很好。我`li`的很基础，没有类名。

编辑：想要隐藏所有`li`点击。从其中一个答案中尝试过，但错误提示

> TypeError: document.getElementById(...).getElementsByTagName(...).style 未定义

```
document.getElementById('holder').getElementsByTagName('li').style.display="none‌​"; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:14:42.273

使用`document.getElementsByTagName('li');`它将返回所有 li-s。或者从特定元素中获取 li ：

```
document.getElementById('myelementid').getElementsByTagName('li'); 
```

**编辑**隐藏`li`元素内的所有元素 id-“持有人”：

```
var lis = document.getElementById('holder').getElementsByTagName('li');
for(var i = 0; i < lis.length; i++){
    lis[i].style.display="none‌​";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:16:05.140

尝试这个：

```
var allLis = document.getElementsByTagName('li'), thisLi, i, l;
for(i=0, l=allLis.length; i<l; i++){
    thisLi = allLis[i];
    // do something to 'thisLi' here
} 
```

# python - Django项目不写入文件

> ID：16059679
> 
> 赞同：0
> 
> 时间：2013-04-17T12:13:41.757
> 
> 标签：python, django

我试图在 Django 中附加一个文件来进行字符串替换，由于某种原因它没有写入文件。阅读没有问题。

视图.py

```
with open('/home/me/dev/Django/rulebase/result.rb', 'a') as discover_reading:
    mydiscover = File(discover_reading)
    for line in mydiscover:
        line.replace('input = "', 'this')
    mydiscover.closed 
```

我在浏览器上收到此错误：

```
Exception Type:     IOError
Exception Value:    

File not open for reading 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:32:46.880

以下将替换文件的内容：

```
with open('/home/me/dev/Django/rulebase/result.rb', 'r') as discover_reading:
    lines = [line.replace('input = "', 'this') for line in discover_reading.readlines()]

with open('/home/me/dev/Django/rulebase/result.rb', 'w') as discover_reading:
    discover_reading.writelines(lines) 
```

*你的例子根本*不起作用。

请阅读[文件对象](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)和[string.replace](http://docs.python.org/2/library/string.html#string.replace)的文档。`File`不是内置函数，`str.replace`不会就地替换（字符串是不可变的），并且`mydiscover.closed`is 用于告知文件是否已关闭，*而不是*用于关闭打开的文件。

引发您的原始错误是因为您试图从使用`a`代表附加的标志打开的文件中读取行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:18:14.197

您必须使用 'r' 标志打开它，以便阅读。

```
open('/home/me/dev/Django/rulebase/result.rb', 'r') 
```

# model-view-controller - 本地通知和打开特定屏幕

> ID：16059680
> 
> 赞同：0
> 
> 时间：2013-04-17T12:13:47.727
> 
> 标签：model-view-controller, uiviewcontroller, uinavigationcontroller, uilocalnotification

当我收到本地通知时，我想打开我的特定屏幕。目前在我的应用程序中，我同时使用了导航控制器和模型视图控制器，因此在导航控制器时，应用程序正在切换任何视图，但是当模型控制器退出时。它没有打开屏幕。请提出任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T12:22:58.910

```
There are two way to launch app when notification comes. 
```

1-应用程序在后台运行。然后打开特定屏幕，如 - (void)application:(UIApplication *)application didReceiveLocalNotification: (UILocalNotification *)notification {

```
 // write this line  
   [[NSNotificationCenter defaultCenter] postNotificationName:@"reloadData" object:self];

}

in which controller class you are create notification.
- (void)viewDidLoad
 {
    [super viewDidLoad];

      [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(reloadTable)
                                             name:@"reloadData"
                                           object:nil];
   }

- (void)reloadTable
  {
     //  create object of that controller which your want to open.

    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
     AddToDoViewController *cvc = (AddToDoViewController *)[sb    instantiateViewControllerWithIdentifier:@"AddToDo"];

    [self presentModalViewController:cvc animated:YES]; 
```

}

# c# - 将数组的每个字段分配给一个变量，foreach 循环

> ID：16059684
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:13:53.850
> 
> 标签：c#, asp.net, arrays

我有一个字符串数组，每个循环都有一个。我想遍历数组并对每个字段做一些事情，然后将每个字段的结果输出到一个新变量。

**编辑：**数组的每个字段都从一个隐藏字段中获取一个值，该值表示以分钟为单位的时间。在 foreach 循环中，我打算将每个字段从 mins 转换为 HH:mm 格式。然后我需要将新格式传递给一个新变量。

**大批：**

```
string[] field = new string[8];
        field[0] = field_0_0.Value;
        field[1] = field_0_1.Value;
        field[2] = field_0_2.Value;
        field[3] = field_0_3.Value;
        field[4] = field_1_0.Value;
        field[5] = field_1_1.Value;
        field[6] = field_1_2.Value;
        field[7] = field_1_3.Value; 
```

**Foreach 循环：**

```
foreach (string newfields in field)
{
    //Do something to each field  
} 
```

我正在寻求帮助的部分是将每个结果分配给一个新变量。任何人都可以指出我正确的方向，甚至建议一种不同/更好的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:19:09.873

只需使用普通`for`循环即可。

```
for(int i=0;i<field.Length;i++) {
    string curValue = field[i];

    // do something with curValue, change it in some way

     field[i] = curValue; //update
} 
```

如果这不是您要的，请澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:23:03.697

您可以更改您正在枚举的对象，但不能使用 foreach。您将需要使用 for 循环。感谢评论修改示例

```
List<string> mylist = new List<string>();
    mylist.Add("item1");
    mylist.Add("item2");

    for (int i = 0; i < mylist.Count; i++)
    {
        mylist[i] = mylist[i].Replace("i", "o");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:26:12.823

改用，`for`不要让你改变你的价值观。`foreach``foreach`

使用`for`这样的一个：

```
for(int i = 0; i < field.Length; i++)
   //Do something to each field 
   field[i] = "text"+i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-16T04:38:44.040

1.  创建变量计数器并将其设置为零。
2.  `long i = 0;`
3.  为每个循环创建。

```
foreach(string field in fields){
    // Use i counter to initialize the array index
    fields[i]="New Field String.";
    // Increment the counter i by 1
    i++;
} 
```

4.  这将为每个字段数组值分配一个值

# java - 数据表 - 在数据表中加载 JSON 响应

> ID：16059688
> 
> 赞同：2
> 
> 时间：2013-04-17T12:13:58.353
> 
> 标签：java, javascript, jquery, json, datatables

使用 REST API，我从下面的 Ajax 命中获取 JSON 响应以加载数据表。

我收到错误：`Uncaught TypeError: Cannot read property 'length' of undefined.`

```
$('#example').dataTable({
    "bSort" : false,
    "bDestroy" : true,
    "sPaginationType" : "full_numbers",
    "bProcessing" : false,
    "bFilter" : true,
    "bServerSide" : true,
    "bAutoWidth" : false,
    "sAjaxSource" : 'exampledatagrid.json?token=' + sessionId,
    "aoColumns" : [{
        "mData" : "0",
        "mData" : "1",
        "mData" : "2",
        "mData" : "3"
    }],
    "fnServerParams" : function(aoData) {
        alert(aoData);
        aoData.push({
            "name" : "colNameMode",
            "value" : "userStatusList"
        }, {
            "name" : "colName_0",
            "value" : "userIDList"
        }, {
            "name" : "colName_1",
            "value" : "userNameList"
        }, {
            "name" : "colName_2",
            "value" : "userRemarksList"
        });
    },
    "fnRowCallback" : function(nRow, aData, iDisplayIndex) {
        alert(aData);
    },
    "fnDrawCallback" : function(oSettings) {
        if ( oSettings.bSorted || oSettings.bFiltered ) {
            for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ ) {
                $('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html( i+1 );
            }
        }
    }
}); 
```

JSON响应是：

```
{"userRemarksList":["TECHNOLOGY","GUEST","HOUSE","SECURITY"],"userIDList":[23,45,23,54],"userNameList":["Michael","Danny","Rahil","Ramesh"],"userStatusList":[0,0,1,1]} 
```

我想知道我是否必须更改我的 JSON 格式，或者我是否可以从上述 JSON 响应本身中检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T11:41:40.270

我通过使用hibernate“org.hibernate.query”查询结果来改变我的后端得到了答案。由此我能够获得记录列表（一个接一个）并将其分别加载到网格中。

# jquery - jQuery 个人资料页面 > 覆盖

> ID：16059689
> 
> 赞同：2
> 
> 时间：2013-04-17T12:13:59.303
> 
> 标签：jquery, overlay

我正在寻找创建个人资料页面。它将`li`在列视图中使用带有 ' 左浮动的无序列表。每个都`li`将代表一张个人资料图片（导致叠加）。

我想单击个人资料图片并使用 HTML 文章 jQuery 显示它。这篇文章将是他们的个人资料页面。我能够创建 CSS3 和 HTML。但是如何将图像及其信息称为文章（配置文件模板）？

我目前在 iMac 上使用 MAMP 的 PHP 基本网站（本地）上使用 jQuery 1.9.1。我可以使用数据库，但更喜欢使用 JavaScript 文件来存储信息。

所需的个人资料信息：

*   图片
*   姓名
*   标题
*   暴徒号
*   工作编号
*   电子邮件
*   报价标题
*   块引用

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:25:46.707

您可以使用**外部文件**（.json、.xml，甚至 .txt）来存储您的数据：

1.  将信息存储到 XML/JSON 文件中，
2.  然后通过将您的 XML / JSON 解析为 JS 中的对象来检索字段
3.  使用 JS 填充 HTML 字段

没有数据库，但不是很方便，因为您必须解析整个文件才能检索字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:24:29.370

1.  使用ajax对php文件进行请求，发送你点击的图片的id
2.  通过查询从数据库中获取您需要的所有信息
3.  将其全部包装在 JSON 中
4.  将其发送回 js 文件
5.  将其解码为数组
6.  使用 js 数组使用所有配置文件信息填充 html

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
//on click element, get id from element
$.ajax({
    url: "getProfileInfo.php",
    data: {id : id},
    success: function(data) {
        // decode data to get your js array object
        // step 6
    }
}); 
```

如果您遇到麻烦，您可以随时在 Google 上搜索 jquery ajax，这里还有一个简单的示例链接
[http://tutorialzine.com/2009/09/simple-ajax-website-jquery/](http://tutorialzine.com/2009/09/simple-ajax-website-jquery/)

# sql - TSQL - 一次 SELECT 中的 TOP 和 COUNT

> ID：16059692
> 
> 赞同：3
> 
> 时间：2013-04-17T12:14:01.833
> 
> 标签：sql, tsql

我尝试将这两个语句合二为一，但我所有的尝试都失败了！是否可以合并它们？

```
-- Is there a open answer?
SELECT CASE COUNT(tbl_Communication.pk_Communication) WHEN 0 
       THEN 0 ELSE 1 END AS hasAnsweredCom
FROM   tbl_Communication 
JOIN   tbl_CommunicationElements ON tbl_CommunicationElements.pk_Communication = tbl_Communication.pk_Communication
WHERE  tbl_Communication.pk_Ticket = @pk_Ticket
  AND tbl_Communication.isClosed = 0 
  AND tbl_Communication.pk_CommunicationType = (SELECT pk_CommunicationType
                                                FROM   tbl_CommunicationType
                                                WHERE  name = 'query')

-- Get the answer text
SELECT TOP 1 tbl_Communication.subject AS hasAnsweredComStepName
FROM   tbl_Communication 
JOIN   tbl_CommunicationElements ON tbl_CommunicationElements.pk_Communication = tbl_Communication.pk_Communication
WHERE  tbl_Communication.pk_Ticket = @pk_Ticket 
  AND tbl_Communication.isClosed = 0 
  AND tbl_Communication.pk_CommunicationType = (SELECT pk_CommunicationType
                                                FROM   tbl_CommunicationType
                                                WHERE  name = 'query')
ORDER BY tbl_Communication.pk_Communication 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:21:53.430

正确的加入技巧。

```
SELECT TOP 1
    CASE WHEN tbl_CommunicationElements.pk_Communication IS NULL THEN 0 ELSE 1 END hasAnsweredCom
    , tbl_Communication.subject AS hasAnsweredComStepName
FROM   tbl_Communication 
JOIN   tbl_CommunicationElements ON tbl_CommunicationElements.pk_Communication = tbl_Communication.pk_Communication
RIGHT JOIN (VALUES(1)) AS Ext(x) ON (
  tbl_Communication.pk_Ticket = @pk_Ticket 
  AND tbl_Communication.isClosed = 0 
  AND tbl_Communication.pk_CommunicationType = (SELECT pk_CommunicationType
                                                FROM   tbl_CommunicationType
                                                WHERE  name = 'query')
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:14:49.477

如果您愿意将两个结果放在一行中，则可以执行以下操作：

```
select (CASE count(*) WHEN 0 THEN 0 ELSE 1 END) AS hasAnsweredCom,
       MAX(case when seqnum = 1 then subject end) as hasAnsweredComStepName
from (SELECT tbl_Communication.pk_Communication, tbl_Communication.subject,
             ROW_NUMBER() over (order by pk_communication) as seqnum                               
      FROM   tbl_Communication 
      JOIN   tbl_CommunicationElements ON tbl_CommunicationElements.pk_Communication = tbl_Communication.pk_Communication
      WHERE  tbl_Communication.pk_Ticket = @pk_Ticket
        AND tbl_Communication.isClosed = 0 
        AND tbl_Communication.pk_CommunicationType = (SELECT pk_CommunicationType
                                                      FROM   tbl_CommunicationType
                                                      WHERE  name = 'query')
     ) t 
```

如果没有答案，第二个值将为 NULL。

至于返回两行。我的猜测是这`subject`是一个字符串，`hasAnsweredCom`而是一个整数。类型冲突，因此任何类型的`union`结果或将结果组合在一起都可能导致第二行出现类型冲突。

# sql-server - 使用 .NET 创建 sqlGeography LINESTRING

> ID：16059694
> 
> 赞同：2
> 
> 时间：2013-04-17T12:14:06.637
> 
> 标签：sql-server, gis, geospatial, sqlgeography

我正在构建一个分析各种外部地图文件格式（即 ShapeFiles、MapPoint、KML 等）并将形状存储在中央数据库中的应用程序，该数据库将用于中央映射/报告库。我有一个例程，它现在有一条由点的抽象数组表示的线，我正试图将其转换为一个 sqlGeography 对象，该对象将存储在我的数据库中（目前是 SQL2012 Express）。

这是我的 LINESTRING 语句的示例（存储在字符串 strGeo 中）：

```
 LINESTRING(41.942587758675 -85.636084221926,41.9425261573997 -85.6360833224383,41.9423450573927 -85.6360807217602,41.9423035553449 -85.6360801225198,41.9421639573891 -85.6360781210972,41.9421098574371 -85.6360773225739,41.9420307561342 -85.6360762213003) 
```

然后我对该字符串执行此操作（VB.NET）

```
 Dim strSql As New SqlChars(New SqlString(strGeo))
    Dim geo As SqlGeography = SqlGeography.STLineFromText(strSql, 4326) 
```

我已经从 SQL Server 2012 功能包中添加了对 Microsoft.SqlServer.Types 的适当引用，但是当我的调试器点击 SqlGeography 行时，我得到了这个：

```
 System.DllNotFoundException: Unable to load DLL 'SqlServerSpatial110.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
    at Microsoft.SqlServer.Types.GLNativeMethods.GeodeticIsValid(GeoMarshalData g, Double eccentricity, Boolean forceKatmai, Boolean& result, Boolean& isSmallerThanAHemisphere)
    at Microsoft.SqlServer.Types.GLNativeMethods.GeodeticIsValid(GeoData& g, Double eccentricity, Boolean forceKatmai)
    at Microsoft.SqlServer.Types.SqlGeography.IsValidExpensive(Boolean forceKatmai)
    at Microsoft.SqlServer.Types.SqlGeography..ctor(GeoData g, Int32 srid)
    at Microsoft.SqlServer.Types.SqlGeography.GeographyFromText(OpenGisType type, SqlChars taggedText, Int32 srid)
    at Microsoft.SqlServer.Types.SqlGeography.STLineFromText(SqlChars lineStringTaggedText, Int32 srid)
    at ShpFileProcessor.Module1.ProcessFile(FileInfo fil) in C:\Users\Chet Cromer\documents\visual studio 2010\Projects\NorthernLights\ShpFileProcessor\ShpFileProcessor\Module1.vb:line 180 
```

我在计算机上的任何地方都找不到 SqlServerSpatial110.dll。我安装了 SQL Express 2012，并且可以在 SYSTEM32 和 SYSWOW64 中找到 SqlerverSpatial.dll，但是 VS 不允许我注册这些文件中的任何一个。

我注意到，如果我像这样在我的 LINESTRING 中使用两个括号，我会得到一个不同的错误：

```
 LINESTRING((41.942587758675 -85.636084221926,41.9425261573997 -85.6360833224383,41.9423450573927 -85.6360807217602,41.9423035553449 -85.6360801225198,41.9421639573891 -85.6360781210972,41.9421098574371 -85.6360773225739,41.9420307561342 -85.6360762213003))

    System.FormatException: 24141: A number is expected at position 27 of the input. The input has (41.942587758675.
    at Microsoft.SqlServer.Types.WellKnownTextReader.RecognizeDouble()
    at Microsoft.SqlServer.Types.WellKnownTextReader.ParseLineStringText()
    at Microsoft.SqlServer.Types.WellKnownTextReader.ParseTaggedText(OpenGisType type)
    at Microsoft.SqlServer.Types.WellKnownTextReader.Read(OpenGisType type, Int32 srid)
    at Microsoft.SqlServer.Types.SqlGeography.ParseText(OpenGisType type, SqlChars taggedText, Int32 srid)
    at Microsoft.SqlServer.Types.SqlGeography.GeographyFromText(OpenGisType type, SqlChars taggedText, Int32 srid)
    at Microsoft.SqlServer.Types.SqlGeography.STLineFromText(SqlChars lineStringTaggedText, Int32 srid)
    at ShpFileProcessor.Module1.ProcessFile(FileInfo fil) in C:\Users\Chet Cromer\documents\visual studio 2010\Projects\NorthernLights\ShpFileProcessor\ShpFileProcessor\Module1.vb:line 180 
```

（在计算字符之前，位置 27 是第一个 lat/lon 组合之间的空格）

我希望我的第一个字符串格式是正确的格式，但此时我不确定，我不确定如何处理 SqlServerSpatial110.dll 问题。

有人走过这条路吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T05:03:20.760

我知道的第二个错误：

线串（（41.942587758675

两个开括号。我唯一一次得到这个错误（“预期数字”的事情）是当我从复制/粘贴中随机出现两个左括号时。

关于您在库中遇到的错误，SQL Server Spatial DLL 是非托管代码。您可以在此处找到更多信息，但请确保您的项目具有正确的版本 (32/64) 并选择“直接复制到输出 = 始终”选项。

[http://alastaira.wordpress.com/2011/08/19/spatial-applications-in-windows-azure-redux-include-denali/](http://alastaira.wordpress.com/2011/08/19/spatial-applications-in-windows-azure-redux-including-denali/)

# php - 加入两个数据库表并将结果输出到 HTML 表

> ID：16059695
> 
> 赞同：0
> 
> 时间：2013-04-17T12:14:08.373
> 
> 标签：php, mysql, inner-join

对于我目前的进度，我需要创建一个如下表

```
pid cid eid 名称值

1 1 4 姓名 ab
2 1 5 上午 2
3 1 4 名 cd
4 1 5 上午 4

```

而不是像这样创建表

```
pid cid 名称 amt

1 1 ab 22
2 1 光盘 4

```

无论如何，使用下面的代码创建了我希望的表

```
<table width="1204" height="100" border="1">
  <tr>
  <?php  $sqlname="Select * From  elements  where cat_id='1' order by e_id ";   
           $resname=mysql_query($sqlname);
           while($rowname=mysql_fetch_array($resname)){

          ?>
    <td colspan="2"><?php echo $rowname['lable_name']; ?></td>
  </tr>
  <tr>
  <?php $i=0; 
  $sqlprolist="select value from products_list where name='".$rowname['lable_name']."' and e_id='".$rowname['e_id']."'";
          $resprolist=mysql_query($sqlprolist);
          while($rowprolist=mysql_fetch_array($resprolist)){
              $i++;

         ?>
    <td><?php echo $rowprolist['value'];?></td>
    <?php if($i%8==0){
        ?>
        <tr></tr>
        <?php }?>
    <?php }?>
  </tr>
  <?php }?>
</table> 
```

但我不知道从表中检索数据进行处理。

谢谢

就像按照马丁一样，创建的表格如下表所示

```
pid cid eid 名称值

12 1 4 名称 abc
1 1 4 名称 cde
13 1 5 代码 12
2 1 5 代码 14

```

如何拆分数据

```
名称 代码 饲养员 质量 大小

美国广播公司 12 121 121 22
acfd 34 164 22 22

```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:17:57.797

没有看到数据库结构很难帮助您。请与我们分享，您可能会得到更好的答案。

无论如何，我想你有两张桌子，`elements`并且`products_list`. 看起来您需要为表中的每一行查找`value`列。您可以使用单个 SQL 查询将这些表合并到一个结果集中：`products_list``elements`

```
SELECT e.p_id, e.cat_id, e.e_id, e.lable_name, p.value
FROM elements e, products_list p
WHERE e.cat_id='1' AND 
p.name = e.lable_name AND p.e_id = e.e_id
ORDER BY by e.e_id 
```

请注意，这`e.p_id`只是一个猜测，您尚未与我们分享“pid”列值的来源。也不确定，如果你真的需要使用`p.name = e.lable_name`. 如果`e_id`是主键，你可能`p.e_id = e.e_id`只做。

列的意义`cid`何在？如果它确实是`cat_id`数据库中的列，为什么你需要它在 HTML 表中，如果你过滤元素`cat_id=1`呢？那是故意的吗？

您现在可以获取查询结果并简单地将其逐行输出到 HTML 表中，例如：

```
<table width="1204" height="100" border="1">
  <tr>
    <th>pid</th>
    <th>cid</th>
    <th>eid</th>
    <th>name</th>
    <th>value</th>
  </tr>
  <?php

    $sqlname =
        "SELECT e.p_id, e.cat_id, e.e_id, e.lable_name, p.value ".
        "FROM elements e, products_list p ".
        "WHERE e.cat_id='1' AND ".
        "p.name = e.lable_name AND p.e_id = e.e_id".
        "ORDER BY e.e_id";   
    $resname = mysql_query($sqlname);
    while ($row = mysql_fetch_array($resname))
    {
  ?>
  <tr>
    <td><?php echo $row['p_id'];?></td>
    <td><?php echo $row['cat_id'];?></td>
    <td><?php echo $row['e_id'];?></td>
    <td><?php echo htmlspecialchars($row['lable_name']);?></td>
    <td><?php echo $row['value'];?></td>
  </tr>
  <?php 
    }
  ?>
</table> 
```

这只是第一步。这不太可能是正确的答案。但我希望它可以帮助您理解，您要做什么以及您的问题。

这几乎不是生产级代码。但我想做尽可能少的更改，这样您就可以看到您的代码的实际更改是什么。

另请注意，这些`mysql_`功能已弃用。[请参阅PHP 文档页面](https://www.php.net/manual/en/function.mysql-query.php)上的大红框。

# mysql - MySQL：使用另一个表中的 COUNT 更新表？

> ID：16059698
> 
> 赞同：7
> 
> 时间：2013-04-17T12:14:13.310
> 
> 标签：mysql, sql

我以为这很简单，但我无法理解它......

我有一张桌子，`tbl1`它有列`id`，，，。`otherstuff``num`

我有另一个表`tbl2`，它有列`id`，`info`。

我想要的是使 的`num`列`tbl1`等于具有相同`id`in的行数`tbl2`。有点像这样：

```
UPDATE tbl1 SET num =
(SELECT COUNT(*) FROM tbl2 WHERE id=tbl1.id) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T12:18:54.483

如果您的 num 列是有效的数字类型，则您的查询应该按原样工作：

```
UPDATE tbl1 SET num = (SELECT COUNT(*) FROM tbl2 WHERE id=tbl1.id) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-17T12:18:04.273

```
UPDATE tbl1, (select id, count(*) as idCount from tbl2 group by id) as t2
SET    tbl1.num = t2.idCount
WHERE  tbl1.id = t2.id; 
```

# windows-8 - Windows 企业旁加载域组策略

> ID：16059700
> 
> 赞同：0
> 
> 时间：2013-04-17T12:14:14.977
> 
> 标签：windows-8, windows-runtime, windows-server-2008, windows-store-apps, sideloading

我想将我的 Windows 应用商店应用程序侧载到 Windows 8 企业 PC。PC 已加入域，但现在我有点卡住了。

正如[文档](http://technet.microsoft.com/en-us/library/hh852635.aspx)中所说，必须设置域控制器上的组策略：

> 您必须将运行 Windows 8 Enterprise 或 Windows Server 2012 的设备加入启用了允许所有受信任的应用程序安装组策略设置的 Active Directory 域。

如何在我的 Windows Server 2008 上设置此组策略？没有这样的政策。这是否意味着为此我需要最新的 Windows Server 2012？我也确实在客户端上设置了这个组策略，但无论如何我需要激活一个开发者帐户。我不想这样做，因为开发者帐户会在 1 个月后过期...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:03:36.230

好的，显然您可以将 Windows 8 组策略添加到 Windows Server [2008。Windows 8 和 Windows Server 2012 的管理模板 (.admx)](http://www.microsoft.com/en-us/download/details.aspx?id=36991)

如果您下载并安装了此文件，则可以获取所需的文件并将它们复制到 %systemroot%\PolicyDefinitions。然后您可以激活该策略。我这样做了，但我仍然必须在 Windows 8 Enterprise 机器上激活我的 MS 开发者帐户。我不知道如何避免这种情况。

# gridview - 以 CSqlDataProvider 作为提供者的 CGridView 上的按钮列？

> ID：16059708
> 
> 赞同：0
> 
> 时间：2013-04-17T12:14:24.993
> 
> 标签：gridview, yii, dataprovider, cbuttoncolumn

我正在使用 CSqlDataProvider 为 CGridView 提供数据。在我想添加 CButtonColumn 列之前，一切都运行良好。它导致错误：

```
Trying to get property of non-object 
```

在堆栈中

```
echo $this->displayExtendedSummary && !empty($this->extendedSummary['columns']) 
        ? $this->parseColumnValue($column, $row) : $column->renderDataCell($row); 
```

在文件：

```
 c:\...\yii\framework\zii\widgets\grid\CButtonColumn.php(316) 
```

任何想法如何处理？

编辑：提供者：

```
$provider = new CSqlDataProvider($query, array(
        'totalItemCount' => $countRes,
        'db' => $this->db,
        'keyField' => 'idCall',
        'params' => $params,
        'pagination' => array(
            'pageSize' => 25,
        ),
        'sort' => array(
            'attributes' => array(
                'idCall, idTime',
            ),
        ),
    )); 
```

鉴于：

```
<?php $this->widget('bootstrap.widgets.TbExtendedGridView', array(
'id'=>'call-history-grid',
'type' => 'striped condensed',
'template' => '{pager}{items}{summary}',
'htmlOptions' => array('style' => 'font-size: 0.75em'),
'dataProvider'=>$model->getInviteCallList(),
'columns'=>array(
    array(
        'header' => '#',
        'value' => '$data["idCall"]',
        'visible' => 'Yii::app()->user->superuser',
    ),
    array(
        'header' => 'Data',
        'value' => '$data["callDateTime"]',
    ),
                    array(
        'class'=>'zii.widgets.grid.CButtonColumn',
    ), 
```

我在这里使用 bootstrap gridview 但如果我切换到常规 CGridView - 问题是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:59:09.553

嗯，不像`CActiveDataProvider`，`CSqlDataProvider`没有支持默认`CButtonColumn`按钮所需的所有信息。

`CActiveDataProvider`将提供对象，但`CSqlDataProvider`将提供数组，并`CButtonColumn`与对象一起使用，这就是为什么您会收到“*尝试获取非对象的属性*”错误消息的原因...

您应该定义按钮 url，例如：

```
array(
  'class'=>'zii.widgets.grid.CButtonColumn',
  'viewButtonUrl'=>'Yii::app()->createUrl("/mycontroller/view", array("id"=>$data["idCall"]))',
  'updateButtonUrl'=>'Yii::app()->createUrl("/mycontroller/update", array("id"=>$data["idCall"]))',
  'deleteButtonUrl'=>'Yii::app()->createUrl("/mycontroller/delete", array("id"=>$data["idCall"]))',
), 
```

# c - XCode 中的奇怪行为

> ID：16059710
> 
> 赞同：0
> 
> 时间：2013-04-17T12:14:35.470
> 
> 标签：c, syntax, compiler-errors, case-statement

只是想让您对此有所了解，我记得阅读过在`switch-case`语句中禁止属性声明（即`case:ABC int i=0;`不允许）

今天早上我遇到了一件很奇怪的事情，

以下编译

```
switch(var1) {
  case 1:
    NSLog(@"hello");
    float x = 0;
    view.setCenter(CGPointMake(x,100));
    break;
  ... 
```

而以下**不**编译

```
switch(var1) {
  case 1:
    float x = 0;
    view.setCenter(CGPointMake(x,100));
    break;
  ... 
```

所以看起来如果你`case`用一个语句（而不是声明）开始一个表达式，它就会编译。但是当您尝试立即从变量声明开始时，它不会。

这背后的原因是什么？

编辑：决定让我的问题更清楚，**NSLog 有什么区别，**以便现在编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:08:41.420

在这里`NSLog`没有什么不同。这`;`就是造成差异的原因：

```
switch(var1) {
    case 1:
        ;
        float x = 0;
        view.setCenter(CGPointMake(x,100));
        break; 
```

编译。甚至

```
 switch(var1) {
    case 1:;
        float x = 0;
        view.setCenter(CGPointMake(x,100));
        break; 
```

不能编译的是`float`（或其他类型）紧跟在`:`. 换句话说，在 之后需要一个命令`:`，而不是声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:19:04.973

如果您满足以下条件，它会编译：

```
switch(var1) {
  case 1:
  {
    float x = 0;
    view.setCenter(CGPointMake(x,100));
  }
    break; 
```

至于为什么要检查[这个答案](https://stackoverflow.com/questions/3652408/c-sharp-switch-statement-with-without-curly-brackets-whats-the-difference)。

# vim - Vim：删除由 vim-plugin 创建的映射

> ID：16059716
> 
> 赞同：18
> 
> 时间：2013-04-17T12:14:43.087
> 
> 标签：vim, plugins, mapping

我经常使用 Vimwiki-Plugin，但是重新映射`<Backspace>`并且`<CR>`很烦人。如果我使用`:nmap`，则显示映射：

```
n  <CR>              @<Plug>VimwikiFollowLink
n  <Backspace>       @<Plug>VimwikiGoBackLink 
```

如果我尝试删除映射，`:nunmap <CR>`我会收到*“E31：没有这样的映射”*错误。有没有办法给予`<CR>`并`<Backspace>`恢复其正常行为？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T12:20:59.533

如果你只想禁用它，你可以给

```
:nunmap <buffer> <CR> 
```

因为它是缓冲区本地映射。

**或者**

```
:h vimwiki_<cr> 
```

你发现了：

```
<CR>                    Follow/create wiki link (create target wiki page if
                        needed).
                        Maps to |:VimwikiFollowLink|.
                        To remap: >
                        :nmap <Leader>wf <Plug>VimwikiFollowLink 
```

如果您将其重新映射到另一个键，例如 example 中的键`<leader>wf`，`<cr>`则将重置为正常。

因为在它的代码中，vimwiki 有：

```
if !hasmapto('<Plug>VimwikiFollowLink')
  nmap <silent><buffer> <CR> <Plug>VimwikiFollowLink
endif 
```

相同的`<BS>`

# c - 为什么我的递归函数在 C 中会出现段错误？

> ID：16059719
> 
> 赞同：0
> 
> 时间：2013-04-17T12:14:48.713
> 
> 标签：c, recursion

我的程序如下：

```
#include <stdio.h>

int collatz(int seed, int count) {
    int next = 0;
    if (seed % 2 == 0) {
        next = seed / 2;
    } else {
        next = 3 * seed + 1;
    }
    count++;
    if (next == 1) {
        return count;
    } else {
        return collatz(next, count);
    }
}

int main() {
    int max = 0;
    int index = 0;
    int i;
    for (i=1; i<1000000; i++) {
        int current = collatz(i, 1);
        if (current > max) {
            max = current;
            index = i;
        }
    }
    printf("%i\n", index);
    return 0;
} 
```

我知道递归通常只会达到一定的深度。但是据我所知，我已经实现了尾递归，它应该可以停止段错误。如果我将 i 设置为 100,000，程序就会运行，这让我相信底层算法是正确的。然而，在一百万我得到：

> 分段错误：11

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:20:14.240

如果您使用调试器，您可能会发现您的函数确实不是尾递归的。但为什么不呢？可能是因为您只是忘记在编译期间启用优化。在我的系统上（Mac OS 上的 GCC），默认构建会崩溃，但使用该`-O3`选项构建会让它运行（至少比其他方式运行更长的时间；我不想终止我的电池测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:21:04.520

如果你用 100 万运行它，我会说你可能只是用完了堆栈空间导致了段错误

您在 VS 堆栈大小中使用的编译器/操作系统默认为 1MB，但可以增加。我不确定其他编译器/操作系统组合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:24:51.373

**collat​​z**函数在计算过程中导致溢出。（这是堆栈溢出）。

注意：尾递归的编译器优化可能会也可能不会。

使用 long long (Int64)。

```
int collatz(long long seed, int count) {
    long long next = 0;
    if (seed % 2 == 0) {
        next = seed / 2;
    } else {
        next = 3 * seed + 1;
    }
    count++;
    if (next == 1) {
        return count;
    } else {
        return collatz(next, count);
    }
} 
```

# javascript - 使用提交按钮发送 Enter 键的 insted

> ID：16059726
> 
> 赞同：1
> 
> 时间：2013-04-17T12:15:06.130
> 
> 标签：javascript, html

我有这段代码

```
// watch textarea for release of key press
        $('#sendie').keyup(function(e) {
            if (e.keyCode == 13) {
                var text = $(this).val();
                var maxLength = $(this).attr("maxlength");
                var length = text.length;
                // send 
                if (length <= maxLength + 1) {
                    chat.send(text, name);
                    $(this).val("");
                } else {
                    $(this).val(text.substring(0, maxLength));
                }
            }
        }); 
```

一旦有人点击回车按钮，它就会将在文本区域中键入的消息发送到某个电子邮件地址，它的作用是什么。如何更改它以使用提交按钮，如下面的代码所示？

```
< div id="page-wrap">
        < form id="send-message-area">
            < p>Your message: </p>
            < textarea id="sendie" maxlength = '100' placeholder ="Send Your Message">  < /textarea>
    < input type="submit">
        < /form>

    < /div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:18:31.073

所以附上代码提交表单

```
$("#send-message-area").on("submit", function (e) {
    var elem = $("#sendie");
    var text = elem.val();
    var maxLength = parseInt(elem.attr("maxlength"),10);
    var length = text.length;
    // send 
    if (length <= maxLength + 1) {
            chat.send(text, name);
            elem.val("");
    } else {
            elem.val(text.substring(0, maxLength));
    }
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:45:02.663

```
$("#send-message-area").on("submit", function (e) {
var text = $("#sendie").val();
var maxLength = $("#sendie").attr("maxlength");
var length = text.length;
// send 
if (length <= maxLength + 1) {
        chat.send(text, name);
    alert(text);
        $("#sendie").val("");
} else {
        $("#sendie").val(text.substring(0, maxLength));
}
e.preventDefault();
}); 
```

[在这里](http://jsfiddle.net/ZXKfY/)查看样本

# kdb - 从日期字段获取月份 - KDB

> ID：16059740
> 
> 赞同：2
> 
> 时间：2013-04-17T12:15:41.663
> 
> 标签：kdb

我将销售数据存储在数据库中。sales_date 字段包含销售发生的日期。我想提取按月分组的数据，以便获得一月、二月等的聚合数据。有没有办法可以做到这一点，而不必提取整个数据然后手动进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-17T23:15:33.703

您还可以使用更简单的形式：

```
q)t:([] date:10?.z.Z)                                                                   
q)select date.month from t                                                              
month  
-------
2013.10
2013.08
2004.09
2010.03
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:04:23.853

像下面这样的东西应该可以工作。如果数据在磁盘上分区，请记住在 where 子句中包含分区。

```
q)tbl:([]dt:20?(2013.01.01;2013.02.01;2013.01.03);sales:20?100000)
q)select sum sales by `month$dt from tbl
dt     | sales
-------| ------
2013.01| 701075
2013.02| 298200
q)select avg sales by `month$dt from tbl
dt     | sales
-------| --------
2013.01| 50076.79
2013.02| 49700 
```

# php - 在将值作为 php 代码给出时，我在 Html 表单中出现错误

> ID：16059751
> 
> 赞同：0
> 
> 时间：2013-04-17T12:16:07.843
> 
> 标签：php, html

这个带有 css 和 php 的 Html 编码。我收到一个错误，你的结果变量没有被声明。但我已经在我的表单中声明了它。请检查并告诉我这个错误。计算器

```
this style .css file

        <style>
        form {
    display:block; 
    background-color: #333399;
    width:300px;
    height:500px;
    border:thick;
    border: #330000;

    color: #FFCC00;
    }

h1 {
    text-align:center;
    z-index: 2px;
    }
    </style> 
```

这是php编码

```
if(isset($_POST['add'])){
    $first_value = $_POST['f_value'];
    $sec_value = $_POST['s_value'];

    //--calculation variables---//

         $result = $first_value + $sec_value;           

        }
        ?>  

    </head> 
```

html表单从这里开始

```
<body>
        <form  method="post" action="new.php" name="calculator">

    &nbsp;<h1> calculator</h1> 
    <p>
    <strong>Frsit value</strong>&nbsp;&nbsp;&nbsp;&nbsp;
    <input  type="text" name="f_value" >

    <p><strong>Second value</strong> <input type="text" name="s_value" maxlength="50">
    <p>
    &nbsp;<input name="add" type="submit" value="add" >
    <!--&nbsp;<input name="sub" type="submit" value="sub">
    &nbsp;<input name="sub" type="submit" value="multiply">
    &nbsp;<input name="sub" type="submit" value="divide">-->
    `enter code here`<p>

    <h2 style="border:thick">Result
      <input type="text" maxlength="50" value="<?php echo $result ; ?>" Name='result' >
    </h2>

        </form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:20:10.163

`isset`在这里使用

```
<input type="text" maxlength="50" value="<?php if(isset($result)) { echo $result; } ?>" Name='result' > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:22:48.183

```
if(isset($_POST['add'])){
    $first_value = $_POST['f_value'];
    $sec_value = $_POST['s_value'];
    $result = $first_value + $sec_value;  
}
else{
    $result= '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:26:14.560

您`$result`的超出范围：

```
<?php
if(isset($_POST['add'])) {  //scope begins here
  //php omitted for brevity

  //$result is declared within this scope
  $result = $first_value + $sec_value;

} // scope ends here - after this point, $result no longer exists!
?>
<!-- html omitted for brevity -->
<!-- This is OUTSIDE the scope where $result was declared - we can't get it any more! -->
<input type="text" maxlength="50" value="<?php echo $result ; ?>" Name='result' > 
```

为了解决这个问题，首先在你打算回显它的相同范围内声明 $result：

```
<?php
$result = 0;

if(isset($_POST['add'])) {
  //php omitted for brevity

  //change $result's value
  $result = $first_value + $sec_value;
}
?>
<!-- html omitted for brevity -->
<input type="text" maxlength="50" value="<?php echo $result ; ?>" Name='result' > 
```

[有关变量范围的更多信息](http://php.net/manual/en/language.variables.scope.php)

# android - 如何设置定时器每隔 n 分钟调用一次函数？

> ID：16059754
> 
> 赞同：10
> 
> 时间：2013-04-17T12:16:13.123
> 
> 标签：android, android-sqlite, android-alarms

我想在 Android 应用程序中设置一个计时器，该计时器将在用户登录时每 15/30/45 和 n 分钟后调用一个函数。但它也会在用户注销时停止计时器。如果用户再次登录，计时器将从开始开始。我希望将该选项（15/30/45/n miutes）保存在数据库中，以便我可以在同步后更新列表。

Timer 是一个好方法还是我需要使用警报服务？或者是否需要任何系统服务？

是否可以将本地电话数据库存储中的先前文档/文件更改为通过 Web 服务器接收的新文档？是否有任何系统服务需要这样做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-17T13:55:22.210

使用以下代码每 15/30/45 调用一次函数

```
 final Handler handler = new Handler();
Timer    timer = new Timer();
    TimerTask doAsynchronousTask = new TimerTask() {       
        @Override
        public void run() {
            handler.post(new Runnable() {
                @SuppressWarnings("unchecked")
                public void run() { 
                   try {
                        "Your function call  " 
                       }
                 catch (Exception e) {
                        // TODO Auto-generated catch block
                    }
                }
            });
        }
    };
    timer.schedule(doAsynchronousTask, 0, "Timer value"); 
```

# jquery - jQuery 不能在一台 PC 上运行而在另一台 PC 上运行

> ID：16059761
> 
> 赞同：-5
> 
> 时间：2013-04-17T12:16:30.827
> 
> 标签：jquery

我有以下 jQuery + PHP 代码，可在一台 PC 上运行，但不能在另一台 PC 上运行。

**非工作：**

```
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/hrscripts/sortable.js"></script>
  <link href="/css/select2.css" rel="stylesheet"/>
  <script src="/javascripts/select2.js"></script>
  <script>
    $(document).ready(function() {
      $("#select_employee").select2();
    });
  </script>
</head>

<?php
  $allemp=$this->AllEmployees;
  echo "<form method='post' action='' id='employeesselection'>";
  echo "<select name='select_employee' id='select_employee'>";
  echo "<option value=''>Select an employee...</option>";

  foreach($allemp as $row) {
    $selected = ($row['Id'] == $_POST['select_employee'])?'selected="selected"':'';
    echo '<option '.$selected.' value="'.$row['Id'].'">'.$row['Etunimi'].' - '. $row['Sukunimi'].'</option>';
  }
  echo "</select>"; 
```

**在职的：**

```
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
  <link href="css/select2.css" rel="stylesheet"/>
  <script src="select2.js"></script>
  <script>
    $(document).ready(function() {
      $("#select_employee").select2();
    });
  </script>
</head>

<?php
  include "db.php";
  $employees=mysql_query("SELECT * FROM asiakas");

  echo "<form method='post' action='' id='employeesselection'><select name='select_employee' id='select_employee'>";

  while($row=mysql_fetch_array($employees)) {
    $selected = ($row['Id'] == $_POST['select_employee'])?'selected="selected"':'';
    echo '<option '.$selected.' value="'.$row['Id'].'">'.$row['Etunimi'].' - '. $row['Sukunimi'].'</option>';
  }
  echo "</select> 
```

它几乎是相同的代码。我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:18:15.220

http:// 丢失：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:22:28.603

在同一个浏览器上检查两个结果，并确保所有页面脚本都已加载，您可以在 chrome 上从**“f12 -> 资源 -> 脚本”执行此操作**

# javascript - 最后一个元素类名没有在 jQuery 中输出

> ID：16059764
> 
> 赞同：0
> 
> 时间：2013-04-17T12:16:35.930
> 
> 标签：javascript, jquery

我的 HTML

```
<ul class="nav menu">
<li class="item-101 current active"><a href="/mysite/">HOME</a></li>
<li class="item-102"><a href="/mysite/index.php/about-us">ABOUT US</a></li>
<li class="item-103"><a href="/mysite/index.php/products">PRODUCTS</a></li>
<li class="item-104"><a href="/mysite/index.php/contact">CONTACT</a></li>
</ul> 
```

jQuery-

```
 if( jQuery("ul.nav.menu > li").is(':last-child') ) {
    var classes = jQuery(this).attr('class');
    alert(classes);
     //expected output - item-104
     //getting undefined
    } 
```

预期输出 - **item-104**

当前输出 -**未定义**

让我知道我做错了什么:(

小提琴 - [http://jsfiddle.net/mPHLz/7/](http://jsfiddle.net/mPHLz/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:19:49.363

`this`指的是窗口，全局范围，而不是 HtmlElement。

试试这个：

```
jQuery(jQuery("ul.nav.menu > li:last-child")).attr('class'); 
```

另请注意，`jQuery("ul.nav.menu > li").is(':last-child')`只要您`li`在导航菜单中有一个，这将始终返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:21:36.850

试试这个：

```
if (jQuery("ul.nav.menu > li").is(':last-child')) {
    var classes = jQuery("ul.nav.menu > li:last").attr('class');
    alert(classes);
} 
```

`this`指当前范围内的元素而不是`last-child li`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:22:37.137

```
var lastChild = jQuery("ul.nav.menu > li:last-child");

if (lastChild != null)
{
    var classes = lastChild.attr('class');
    alert(classes);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:20:11.803

```
jQuery("ul.nav.menu li").each(function() {
if( jQuery(this).is(':last-child') ) {
        var classes = jQuery(this).attr('class');
        alert(classes);
        }
}); 
```

[http://jsfiddle.net/mPHLz/8/](http://jsfiddle.net/mPHLz/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:21:08.990

因为 this 指向窗口对象或其他一些元素。if 语句不会像回调那样神奇地改变 this 的范围`each()`。只需创建一个抓取最后一个元素的选择器，然后读取它的类。

```
var lastElem = jQuery("ul.nav.menu > li:last-child");
var classes = lastElem.attr('class');
console.log(classes); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T12:22:28.663

```
var classes = $("ul.nav.menu > li ").filter(":last-child").attr('class');
alert(classes); 
```

[http://jsfiddle.net/mPHLz/12/](http://jsfiddle.net/mPHLz/12/)

# jsp - 如何在jsp中上传文本文件

> ID：16059765
> 
> 赞同：1
> 
> 时间：2013-04-17T12:16:36.020
> 
> 标签：jsp, file-upload

我正在尝试将**文本**文件从客户端机器上传到服务器。下面是我在jsp中使用的代码。

```
<tr>
             <td class="FORMLABEL" nowrap valign=middle>
              &nbsp;&nbsp;<%= fileLabel %>&nbsp;
             </td>
             <td class="FORMELEMENT" nowrap valign=middle>
              <input  size = "50" name="loadFile" type="FILE" >
             </td>
     </tr> 
```

我检查了加载文件的内容类型，它是**application/x-www-form-urlencoded** 我需要读取文件。如何使用 JSP**将此文件从客户端计算机复制到服务器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:21:59.803

您需要为`fileupload`

在那里创建一个表单并提交到服务器

```
<form action="upload" method="post" enctype="multipart/form-data">
    <input type="text" name="description" />
    <input type="file" name="file" />
    <input type="submit" />
</form> 
```

并在 servlet

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
                  throws ServletException, IOException {
    try { 

--- - - -

----- 
```

按照[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

```
} 
```

并参考[此](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3/3374408#3374408)以获取更多信息和可能性。

# xpages - 你能以编程方式对数据库中的代理进行签名吗？

> ID：16059768
> 
> 赞同：0
> 
> 时间：2013-04-17T12:16:37.497
> 
> 标签：xpages, lotus-notes, lotusscript, xpages-extlib, xpages-ssjs

有没有办法以编程方式对数据库中的代理进行签名？我想使用在服务器上运行的代理来签署我通过它的数据库的代理。我想使用 LotusScript 或 XPage 来执行此操作。

乔丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:29:39.023

在 Lotusscript 中使用代理中首选的签名者 ID 运行此代码

```
Dim session As New Notessession 
Dim db As Notesdatabase 
Set db = session.Currentdatabase 
Call db.sign(DBSIGN_DOC_ALL) 
```

在 SSJS 中

```
var DB:NotesDatabase=sessionAsSigner.getDatabase(database.getServer(),database.getFilePath());
DB.sign(NotesDatabase.DBSIGN_DOC_ALL) 
```

==================

# 更新

莲藕

```
dim AdminPNotesId
dim AdminP as NotesAdministrationProcess
Set  AdminP =  notesSession.CreateAdministrationProcess(Server)
AdminpNoteId=AdminP.SignDatabaseWithServerID(Server,Database) 
```

SSJS

```
var AdminP=sessionAsSigner.CreateAdministrationProcess(Server)
var AdminPNoteID=AdminP.SignDatabaseWithServerID(Server,Database) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:35:51.757

几年前，我使用 LS 代理完成了这项工作。我记得它是这样的：

1.  获取包含所有代理的 NotesNoteCollection
2.  循环访问所有 noteIds 的集合
3.  使用这些 noteId 访问每个设计文档并检查它是否指向所需的代理
4.  使用签署代理的设计文档

    NotesDocument.Sign

不过，我从未尝试过使用 SSJS 来做到这一点。但它至少可以使用使用适当 ID 签名的代理（请参阅下面的更新）

**编辑1：** @Sven：当然，我忘了提到你需要在签名后保存你的设计文档......

**编辑 2：** @Serdar：你说得对：要签署代理我需要签名者的 Notes ID，所以 Fred 的更新解决方案是一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:47:05.007

两个答案中的方法都是正确的。但他们将在笔记客户端上工作......

签署任何文件都需要一个存在于您的 ID 文件中的私钥。因此，通常，您不能使用不在 Notes 客户端上运行的代码对代理进行签名。

但是，有些产品（例如[Ytria SignEZ](http://www.ytria.com/WebSite.nsf/WebPageRequest/Solutions_signEZen)）使用 C-API 对设计元素进行签名，但它们会将必要的 ID 文件缓存在安全存储中（最近版本的 ID Vault 可用于此目的，但我不知道 API 的多少部分对我们开放）。

更新：正如 Fredrik 所说，始终可以通过管理员请求使用服务器 ID 进行签名。

# git - 反向将提交应用到工作副本

> ID：16059771
> 
> 赞同：44
> 
> 时间：2013-04-17T12:16:52.557
> 
> 标签：git, revert

为了研究先前提交引入的效果，我想将其反向应用到我的工作副本并摆弄代码。

我管理了一个围绕创建和应用补丁的工作流程，但想知道这是否可以更轻松地完成。

```
git checkout -b "tmp-fiddle"
git diff -R -p d9fd2bb^ d9fd2bb > patch_to_examine.patch
# Manually edit the patch a little
git apply patch_to_examine.patch 
```

请注意，我没有查看，`git revert`或者`git rebase -i`因为这些会引入新的提交或更改历史记录：我只希望引入的更改`d9fd2bb`不应用于我当前的工作副本。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-17T12:22:28.480

怎么样[`git revert -n`](https://www.kernel.org/pub/software/scm/git/docs/git-revert.html)？

> ```
> -n
> --no-commit 
> ```
> 
> 通常，该命令会自动创建一些提交，其中包含提交日志消息，说明哪些提交已恢复。此标志应用必要的更改以将命名提交还原到您的工作树和索引，但不进行提交。此外，使用此选项时，您的索引不必匹配 HEAD 提交。恢复是针对索引的开始状态完成的。
> 
> 这在将多个提交的效果恢复到连续索引时很有用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-08-16T06:22:45.470

另一种有效的方法是`git show | git apply -R`. `-R`代表反转差异。

这适用于任何差异，所以你可以做`git diff [...] | git apply -R`

或反转存储`git stash show -p stash@{0} | git apply -R`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-30T15:00:15.500

如果您在之前的提交之后。那么最简单的方法是

```
git reset HEAD~ -- . 
```

它的作用是使您的工作树完好无损，但会更改索引以匹配先前的提交。Git diff 和 GUI 工具将突出显示更改，并允许您通过它们删除、恢复或更改一些大块。随后的`git -a commit --amend`/`git -a commit` 将修复当前提交或创建单独的修复提交，同时`git reset --hard`将放弃它们。

选择任意更改并将树留在 HEAD。

```
git revert -n <changeset> # or changeset range
git reset -s HEAD . # restore worktree to the tip (but leave staging as above) 
```

# r - approx() 是否设计用于复数？

> ID：16059774
> 
> 赞同：7
> 
> 时间：2013-04-17T12:16:57.037
> 
> 标签：r, complex-numbers

`approx`我做了以下实验，因为帮助页面上没有提到复杂数据：

```
Rgames> zfoo
[1] 1+ 6i 2+ 7i 3+ 8i 4+ 9i 5+10i
Rgames> approx(zfoo,n=10)
$x
 [1] 1.000000 1.444444 1.888889 2.333333 2.777778 3.222222 3.666667 4.111111
 [9] 4.555556 5.000000

$y
 [1]  6.000000  6.444444  6.888889  7.333333  7.777778  8.222222  8.666667
 [8]  9.111111  9.555556 10.000000 
```

深入研究 的代码`approx`，我发现`xy.coords`（对于复杂数据显然也没有记录）将复杂数据的 Real 和 Imag 部分视为坐标数据的`x`和`y`部分。所以我的问题是：这是预期的行为吗？对于依赖没有明确记录的功能，我总是有点偏执。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T12:23:50.570

对我来说看起来是有意和可靠的，因为`approx()`calls `regularize.values()`， which calls `xy.coords()`，其中包括以下代码块：

```
else if (is.complex(x)) {
    y <- Im(x)
    x <- Re(x)
    xlab <- paste0("Re(", ylab, ")")
    ylab <- paste0("Im(", ylab, ")")
} 
```

接下来`approx()`就像你传递数字（实数/有理）向量`x`和`y`.

# html - Divs 没有在窗口调整大小时移动

> ID：16059778
> 
> 赞同：-2
> 
> 时间：2013-04-17T12:17:06.303
> 
> 标签：html, css, window-resize

我想`div`在窗口调整大小时移动。我`div`在一个里面有三个`div`（即容器）

例如：

```
 <div id="container">
          <div class="left"></div>
          <div class="middle"></div>
          <div class="right"></div>
        </div> 
```

它正确对齐。但是当我调整窗口大小时，我希望这些`div`'s 移动（但它不应该重叠，我的意思是它应该在重叠之前停止）。

```
This is how my CSS looks.
#container {
    text-align:center;
    width : 100%;
}

.left {
    float:left;
}

.center {
    display: inline-block;
    margin:0 auto;
}

.right {
    float:right;
} 
```

谢谢您的帮助！

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:23:11.213

你可以在这个 twitter 引导程序上简单地创建你喜欢的 div 和 css 设计，这个服务可以自动创建响应式布局。

[推特引导](http://twitter.github.io/bootstrap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:33:50.857

你的 CSS 不对。而不是使用`#left`, `#center`, `#right`, 你需要使用`.left`, `.center`,`.right`

当您使用`#`它时，它将选择具有该 id 的 html 元素，这就是为什么您的 css 只是选择`<div id="container">`，在您的其他 div 中您正在使用类，所以您使用`.`

看一个例子：http: [//jsfiddle.net/rELXZ/](http://jsfiddle.net/rELXZ/)

有关 CSS 选择器的更多信息，您可以在这里找到[http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

# c++ - 在 C++ 中声明后的二维数组值分配

> ID：16059781
> 
> 赞同：1
> 
> 时间：2013-04-17T12:17:15.833
> 
> 标签：c++, arrays, 2d, declaration

我知道当我们声明数组时要为二维数组赋值时，我们这样做：

```
int myArray[2][4] = {{1,2,3,4},{5,6,7,8}}; 
```

但是我应该如何“在”声明它之后分配值？我想做这样的事情：

```
int myArray[2][4];

myArray = {{1,2,3,4},{5,6,7,8}}; 
```

当我这样做时，编译器会出错。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:49:33.007

如果你想使用，`std::vector`那么你可以这样做：

```
#include <vector>

int main()
{
    std::vector< std::vector<int> > arrV ;

    arrV = { {1,2,3,4}, {5,6,7,8} };
} 
```

或使用`std::array`：

```
#include <array>

int main()
{
    std::array<std::array<int,4>,2> arr ;

    arr =  {{  {{1,2,3,4 }}, {{5,6,7,8}}  }} ;
} 
```

请注意，内组和外组中的双组大括号。这个答案虽然只适用于 C++11。

# javascript - 在客户端验证以使用 JavaScript 在文本框中仅接受 1 到 100 之间的数字

> ID：16059783
> 
> 赞同：0
> 
> 时间：2013-04-17T12:17:22.633
> 
> 标签：javascript, asp.net, validation

在客户端验证以使用 JavaScript 仅接受 gridview 文本框中的数字。

我有一个带有两个标签和一个文本框的网格视图。我想要的是用户应该输入文本框值 1-100。我怎样才能在 ASP.Net 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:55:33.830

尝试这个

```
<asp:TextBox ID="Num" runat="server"></asp:TextBox>
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" ForeColor="DarkOrange" ValidationExpression="^[1-9][0-9]?$|^100$" ControlToValidate="Num" runat="server" ErrorMessage="accept only numbers between 1 to 100"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:19:23.857

//HTML

```
<input type="text" name="textboxId" id="textboxId"/> 
```

//Javascript

```
var val = document.getElementById('textboxId').value;
if(val < 1 || val > 100){
alert('Value must be between 1 and 100');
return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:21:40.270

根据您想要支持的浏览器，您可能不需要编写任何 JavaScript。HTML5 添加了一些新的输入类型，包括支持 min 和 max 属性的[type=number 。](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_number)

目前支持不[完整](http://caniuse.com/#feat=input-number)，但也许这会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:21:54.680

好吧，您可以添加 onkeydown 并验证输入。如果你不想要它，返回false；

```
node.onkeydown = function(a_event)
{
   // validate non number input
   if ((a_event.keyCode >= 65 && a_event.keyCode <= 90))
      return false;                                 
}; 
```

此外，您还可以解析输入并返回 false

# asp.net-mvc-3 - Razor 未正确呈现 HtmlHelper 扩展方法

> ID：16059792
> 
> 赞同：1
> 
> 时间：2013-04-17T12:17:55.197
> 
> 标签：asp.net-mvc-3, razor

我的 html 帮助程序类中有一个扩展方法来呈现自动完成。这适用于 VS2008 和 VS2010 中的 aspx 视图引擎。Autocomplete 类有一个重载的 ToString() 方法，它输出 Raw Html。

但是，当我使用 Razor 引擎时，我没有得到任何可见的输出。Firebug 显示扩展方法的输出是 Html 编码如下:(所有 <, >..)

```
 &lt;input class="AutoComplete" id="p_ename" name="p_ename" style="width: 190px" type="text" valuefield="p_empid"&gt;&lt;/input&gt; &lt;input id="p_empid" name="p_empid" type="hidden"&gt;&lt;/input&gt; 
&lt;script type='text/javascript'&gt;$('#p_ename').autocomplete('/UserMst/GetEmployee', { dataType: 'json', scroll: true, parse: function(item, event) { $('#p_empid').val(''); var array = new Array(); if(item) for (var i = 0; item[i]; i++ ) { array[array.length] = { data: item[i], value: item[i], result: unescape(item[i].Text) }; } return array; }, formatItem: function(row) { return unescape(row.Text); } }).result(function(event, item, formatted) { $('#p_empid').val(item.Value); }).keyup(function() { if (window.event.keyCode != 13 &amp;&amp; window.event.keyCode != 16 &amp;&amp; window.event.keyCode != 20 &amp;&amp; window.event.keyCode != 9 &amp;&amp; window.event.keyCode != 27 &amp;&amp; !(window.event.keyCode &gt;= 112 &amp;&amp; window.event.keyCode &lt;= 123) &amp;&amp; !(window.event.keyCode &gt;= 37 &amp;&amp; window.event.keyCode &lt;= 40)) { $('#p_empid').val(''); } });
&lt;/script&gt; 
```

这就是我调用该方法的方式：

```
@Html.AutocompleteFor(m => m.p_empid, m => m.p_ename)
.setUrl(VirtualPathUtility.ToAbsolute("~/UserMst/GetEmployee"))
.setClass("AutoComplete").setStyle("width: 190px") 
```

如何解决此问题以在 MVC3 中与 Razor 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T13:03:44.627

确保`MvcHtmlString`使用以下方法返回：

```
public static MvcHtmlString HiText(this HtmlHelper obj) {
   string code = "<p>hi</p>";
   return MvcHtmlString.Create(code);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:34:44.910

好的 ！这就是我现在让它工作的方式。不知道这是否是一个好的解决方案。在此处为面临相同问题的其他人发布修复程序。

我将`ToString()`覆盖方法重命名为`MvcHtmlString ToHtml()`并返回`MvcHtmlString.Create(result.ToString())`而不是原始 html 作为字符串。

现在我必须把它称为

```
@Html.AutocompleteFor(m => m.p_empid, m => m.p_ename)
.setUrl(VirtualPathUtility.ToAbsolute("~/UserMst/GetEmployee"))
.setClass("AutoComplete").setStyle("width: 190px").ToHtml() 
```

Razor 现在可以正确渲染它。

# java - StringBuilder：ArrayIndexOutOfBoundsException

> ID：16059794
> 
> 赞同：2
> 
> 时间：2013-04-17T12:17:58.757
> 
> 标签：java, websphere, stringbuilder, websphere-7

我们在使用 WebSphere 7/IBM JDK 6 时遇到了一个奇怪的问题，其中一个节点有一些初始化问题。

我们有一些调用 InitialContext.lookup 的代码，在这个节点上我们有时会遇到以下异常：

```
Caused by: java.lang.ArrayIndexOutOfBoundsException
         at java.lang.String.getChars(String.java:666)
         at java.lang.StringBuilder.append(StringBuilder.java:207)
         at javax.naming.spi.NamingManager.getURLContext(NamingManager.java:646)
         at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:422)
         at javax.naming.InitialContext.lookup(InitialContext.java:436)
         [...] 
```

我们查看了 javax.naming.spi.NamingManager.getURLContext 的源代码：

```
public static Context getURLContext(String schema, Hashtable<?, ?> envmt)
        throws NamingException {

    if (null == schema || 0 == schema.length() || null == envmt) {
        return null;
    }

    // obtain pkg prefixes from hashtable
    String pkgPrefixes[] = EnvironmentReader
            .getFactoryNamesFromEnvironmentAndProviderResource(envmt, null,
                    Context.URL_PKG_PREFIXES);

    for (String element : pkgPrefixes) {
        // create factory instance
        ObjectFactory factory;
        String clsName = element + "." //$NON-NLS-1$
                + schema + "." //$NON-NLS-1$
                + schema + "URLContextFactory"; //$NON-NLS-1$
    [...] 
```

第 646 行是增强的 for 循环，但下一条语句是 String 连接，可能会被编译器替换为 StringBuilder。

我们对 StringBuilder 进行了一些快速的单元测试，但无法引发 ArrayIndexOutOfBoundsException。

如何在这里抛出 ArrayIndexOutOfBoundsException 以及如何避免它？

**编辑**：

我们正在使用以下 java 版本：

```
java version "1.6.0"
Java(TM) SE Runtime Environment (build pxa6460sr9fp2ifix-20110913_02(SR9 FP2+IV03622+IZ99243))
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr9-20110912_90359 (JIT enabled, AOT enabled)
J9VM - 20110912_090359
JIT  - r9_20101028_17488ifx31
GC   - 20101027_AA)
JCL  - 20110727_04 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:06:18.457

这是 IBM JVM 的 JIT 编译器的一个已知错误。解决方法似乎是`getChars`从 JIT 编译中排除：

```
-Xjit:exclude={ProgramClass.callStringGetChars*} 
```

请参阅[IZ78413：JIT 编译的 STRING.GETCHARS 抛出 UNEXPECTED ARRAYINDEXOUTOFBO UNDSEXCEPTION](http://www-01.ibm.com/support/docview.wss?uid=swg1IZ78413)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:36:21.590

`null`如果您传递一个空环境哈希表，上面的代码似乎会返回。

这让我想知道您是否正在使用某种参数来实例化 InitialContext。

如果上面的代码确实是源代码，则传递一个空环境哈希表将使 getURLContext() 短路`null`以在字符串连接循环之前返回。

您是否可以尝试`new InitialContext()`或者`new InitialContext(null)`如果您不需要指定 JNDI 环境变量（例如，使用默认的 JNDI 环境）？

# php - 内存不足总是在同一行

> ID：16059802
> 
> 赞同：4
> 
> 时间：2013-04-17T12:18:15.917
> 
> 标签：php, performance, memory, optimization, joomla

首先，我不是在寻找“检查您的 PHP 内存限制”或“您需要添加更多内存”之类的答案......我在一台专用机器上，有 8GB 的​​ RAMS；其中512MB是内存限制。我总是在一行上出现内存不足错误：

澄清一下：这部分代码属于[Joomla！](http://joomla.org)CMS。

```
function get($id, $group, $checkTime){
    $data = false;
    $path = $this->_getFilePath($id, $group);
    $this->_setExpire($id, $group);
    if (file_exists($path)) {
        $data = file_get_contents($path);
        if($data) {
            // Remove the initial die() statement
            $data   = preg_replace('/^.*\n/', '', $data); // Out of memory here
        }
    }
    return $data;
} 
```

这是 Joomla 缓存的一部分……此函数读取缓存文件并删除阻止直接访问文件的第一行并返回其余数据。

如您所见，该行使用 preg_replace 删除缓存文件中的第一行，该行始终为：

```
<?php die("Access Denied"); ?> 
```

我的问题是，**在我看来，如果初始 $data 很大，它是一个简单的过程（从文件内容中删除第一行）会消耗大量内存吗？**如果是这样，解决该问题的最佳方法是什么？我不介意没有 die() 行的缓存文件，我可以采取安全措施并阻止对缓存文件的直接访问。

我错了吗？

**更新**

正如帖子所建议的那样，正则表达式似乎产生的问题多于解决问题。我试过了：

```
echo memory_get_usage() . "\n"; 
```

在正则表达式之后然后尝试使用相同的语句`substr()`。内存使用量的差异非常小。几乎没有。

那是为了你的贡献，我仍在试图找出为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:26:43.367

使用 substr 来避免内存不足`preg_replace()`，如下所示：

```
$data = substr($data, strpos($data, '?>') + 3); 
```

作为一般建议，如果您可以通过使用其他字符串/数组函数来完成相同的任务，请不要使用正则表达式，正则表达式函数比核心字符串/数组函数更慢并且消耗更多内存。

这在 PHP 文档中也有明确警告，请参阅一些示例：

[http://www.php.net/manual/en/function.preg-match.php#refsect1-function.preg-match-notes](http://www.php.net/manual/en/function.preg-match.php#refsect1-function.preg-match-notes) [http://www.php.net/manual/en/function.preg-split .php#refsect1-function.preg-split-notes](http://www.php.net/manual/en/function.preg-split.php#refsect1-function.preg-split-notes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:25:11.800

不要使用字符串函数来替换大字符串中的某些内容。您可以循环浏览文件的行，然后在找到所需内容后中断。在此处查看 PHP 文档：

[http://php.net/manual/en/function.fgets.php](http://php.net/manual/en/function.fgets.php)

基本上是@cbuckley 刚才所说的：p

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:26:09.360

如果您只想删除文件的第一行并返回其余部分，则应使用[`file`](http://php.net/file)：

```
$lines = file($path);
array_shift($lines);
$data = implode("\n", $lines); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T07:49:05.013

而不是使用`file_get_contents()`它一次获取整个文件，这可能太大而无法运行正则表达式，您应该与（[http://php.net/fgets](http://php.net/fgets)`fopen()` ）结合使用。此函数逐行获取文件。`fgets()`

然后，您可以选择在特定行上执行正则表达式。或者在您的情况下，只需跳过整行。

所以代替：

```
$data = file_get_contents($path);
if($data) {
    // Remove the initial die() statement
    $data   = preg_replace('/^.*\n/', '', $data); // Out of memory here
} 
```

尝试这个：

```
$fileHandler = fopen($path,'r');
$lineNumber = 0;
while (($line = fgets($fileHandler)) !== false) {
    if($lineNumber++ != 0) { // Skip the initial die() statement
        $data .= $line; // or maybe echo out $line directly so $data doesn't take up too much memory as well.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:25:59.133

我建议您在包含缓存文件的文件中使用它：

```
define('INCLUDESALLOW', 1); 
```

并在将包含的文件中：

```
if( !defined('INCLUDESALLOW') ) die("Access Denied"); 
```

然后只需使用`include`而不是`file_get_contents`. 这将运行包含的 PHP 代码，但不能 100% 确定这是否是您需要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T17:47:47.823

有时您会使用比 php 分配的 8 MB 更多的内存。如果您无法通过提高代码效率来使用更少的内存，则可能必须增加可用内存。这可以通过两种方式完成。

可以在 php.ini 中将限制设置为全局默认值：

```
memory_limit = 32M 
```

或者您可以像这样在脚本中覆盖它：

```
<?php
ini_set('memory_limit', '64M');
... 
```

有关 PHP 内存限制的更多信息，您可以查看[This SO question](https://stackoverflow.com/questions/620602/php-memory-limit)或[ini.memory-limit](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)。

# webgl - WebGL texImage2d：使用 rasterizeHTML.js 的 SECURITY_ERR

> ID：16059807
> 
> 赞同：0
> 
> 时间：2013-04-17T12:18:30.333
> 
> 标签：webgl, user-agent, domexception, glteximage2d, security-policy

我正在使用 rasterizeHTML.js 创建一个表示网页 DOM 元素的画布（例如页面的屏幕截图），然后将其传递给 texImage2d，以便将此画布用作纹理。虽然它在 Firefox 21.0 中运行良好，但在其他浏览器（Chrome、Safari ..）中我收到以下错误：

```
SECURITY_ERR: DOM Exception 18: An attempt was made to break through 
the security policy of the user agent. 
```

有没有办法绕过安全策略？我想在本地使用它。我也尝试使用本地网络服务器（MAMP），因为我认为它可能是由于相同的来源策略，但错误是相同的......非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:48:52.773

需要本地 Web 服务器，但您是否还确保您正在加载的所有*图像*都来自该服务器，而不是来自其他来源？使用浏览器的网络检查器确保您没有从其他域加载任何资源。

# c++ - 虚拟内存是进程内存利用率的良好指标吗？

> ID：16059811
> 
> 赞同：0
> 
> 时间：2013-04-17T12:18:42.433
> 
> 标签：c++, memory, process, virtual, benchmarking

QA 团队向我们发送了一份关于我们的 shoftware 的内存消耗报告，显示该进程使用的虚拟内存在高负载下飙升至 600 MB 以上。所以我进行了相同的测试，发现这是真的，但是私有工作集只有这个数量的一半（大约 300 MB），这相对来说很好。

我的问题是，在这种情况下最重要的是什么？虚拟内存？还是私人工作集？

# asp.net-mvc - Asp.net mvc - HttpPost 动作在任何帖子中开始

> ID：16059813
> 
> 赞同：0
> 
> 时间：2013-04-17T12:18:43.267
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有两个同名操作（正常的 LongTailSearchBox 显示类别的下拉列表，HttpPost 使搜索页面（如果不存在）和\n 重定向到搜索页面

```
 public ActionResult LongTailSearchBox()
            {
 return View();
} 
```

**以及动作的httpPost**

```
[HttpPost]
         public ActionResult LongTailSearchBox(string cat1, string cat2, string cat3, string cat4)
         {
return RedirectToAction("LongTailSearchResult", "LongTailSearch", new { name = _url });
    } 
```

当我单击登录按钮（另一种形式）时，它当然会返回 http 帖子..

所以 HttpPost LongTailSearchBox 在页面加载时也会启动（我希望它只有在有人点击搜索按钮而不是任何制作 httpPost 的按钮时才启动。）

怎么做？？

***更新：***

当我更改其中一个动作的名称时，就像魅力一样工作，但我希望它们使用相同的名称

和 html 的登录形式是 `<form method="post" action="/LongTailSearch/LongTailSearchBox" novalidate="novalidate">`

和

```
<form method="post" action="/login" novalidate="novalidate"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:32:11.457

您可以使用 ActionMethodSelectorAttribute 根据导致发布的按钮的名称来选择操作，如下所述：http: [//www.dotnetcurry.com/ShowArticle.aspx? ID=724](http://www.dotnetcurry.com/ShowArticle.aspx?ID=724)

# azure - 升级 Azure 虚拟机有多难

> ID：16059814
> 
> 赞同：14
> 
> 时间：2013-04-17T12:18:43.477
> 
> 标签：azure, virtual-machine

假设我创建了一个 Azure 虚拟机。先说一个小的。

后来我决定这台机器的性能不适合它。我想升级到一台更大更强大的机器。

鉴于我已经完全配置了这台机器以按照我需要的方式工作，它可以**多快轻松地升级，比如一台中型机器？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T12:23:05.140

这很容易。您转到门户并*配置/设置/虚拟机大小*。实例将重新启动一次（取决于您的应用程序可能会出现问题或需要时间），并且虚拟硬件将被更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T12:26:34.163

在 PowerShell 中，更改虚拟机大小很简单：

```
Set-AzureVMSize [-InstanceSize] <String> -VM <IPersistentVM> [ <CommonParameters>] 
```

然后，您需要调用`Update-AzureVM`以使更改生效。所以......要从小到中，您可以检索您的 VM 信息，更新大小，然后根据大小更改更新 VM：

```
Get-AzureVM -ServiceName "YourServiceName" -Name "yourVMName" | Set-AzureVMSize "Medium" | Update-AzureVM 
```

[在此处](http://msdn.microsoft.com/en-us/library/windowsazure/jj152814.aspx)查看完整文档。

# android - 使用 Facebook SDK 3 的 Android 应用程序在签署应用程序后无法登录

> ID：16059817
> 
> 赞同：1
> 
> 时间：2013-04-17T12:18:52.857
> 
> 标签：android, facebook, keystore, sign, signed

我在 Play 商店有一个应用程序，最近我用新的 Facebook 3 SDK 更新了它，我想要与 Facebook 集成做的就是用户可以将我的应用程序中的单词/字符串发布到 Facebook 墙。我按照 Facebook“开始”和我下载的示例中的说明编写代码，我使用 Eclipse->properties->android->add library-> 导入库并选择 Facebook SDK（如 Facebook dev 中所述）。该应用程序与我自己的星系 S3 和 S1 直接从 eclipse 中运行非常好，它可以正确登录并毫无问题地发布在我的墙上！

在我像往常一样签署应用程序并将其重新发布到 Play 商店后，问题就开始了！我不能在 Facebook 上登录/发帖，当然，用户也不能发帖。

尝试运行签名的应用程序时出现此错误：

```
com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id 
```

我开始寻找解决方案，所有答案都是关于“keyhash”..我添加了 2 个 keyhash，如此处[Stackoverflow](https://stackoverflow.com/questions/13894006/android-facebook-sdk-3-0-gives-remote-app-id-does-not-match-stored-id-while-lo) (debug +release key).. 并且还得到了一个 keyhash，其中包含上一个链接中第 3 号答案中提到的代码，尝试过**Facebook开发仪表板**中的不同设置..“app id”/app_id也是正确的，但没有成功！！

**当我尝试使用 Eclipse 的应用程序时一切正常，如果应用程序未登录，则没有帖子。**

这是我的代码，也许我错过了什么，两天后我真的很困惑没有解决方案

```
public class main extends Activity {

    private Session.StatusCallback statusCallback = new SessionStatusCallback();

    private static final List<String> PERMISSIONS = Arrays.asList("publish_actions");
    @SuppressWarnings("unused")
    private boolean pendingPublishReauthorization = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

              //this code was for test
        try {
            PackageInfo info = getPackageManager().getPackageInfo(
                    "mypackage here", 
                    PackageManager.GET_SIGNATURES);
            for (android.content.pm.Signature signature : info.signatures) {
                MessageDigest md = MessageDigest.getInstance("SHA");
                md.update(signature.toByteArray());
                Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
                }

        } catch (NameNotFoundException e) {

        } catch (NoSuchAlgorithmException e) {

        }

        buttonLoginLogout = (ImageView)findViewById(R.id.buttonLoginLogout);
        post = (ImageButton)findViewById(R.id.fbshare);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }
        }

        updateView();

post.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                 publishStory();
            }
        });
}
@Override
        public void onStart() {
            super.onStart();

            Session.getActiveSession().addCallback(statusCallback);
        }

        @Override
        public void onStop() {
            super.onStop();
            Session.getActiveSession().removeCallback(statusCallback);
        }

        @Override
        public void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
        }

        @Override
        protected void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            Session session = Session.getActiveSession();
            Session.saveSession(session, outState);
        }

        private void updateView() {
            Session session = Session.getActiveSession();
            if (session.isOpened()) {
                buttonLoginLogout.setImageResource(R.drawable.fblogout);
                buttonLoginLogout.setOnClickListener(new OnClickListener() {
                    public void onClick(View view) { onClickLogout(); }
                });
                post.setVisibility(View.VISIBLE);
            } else {
                buttonLoginLogout.setImageResource(R.drawable.fblogin);
                buttonLoginLogout.setOnClickListener(new OnClickListener() {
                    public void onClick(View view) { onClickLogin(); }
                });
                post.setVisibility(View.INVISIBLE);
            }
        }

        private void onClickLogin() {
            Session session = Session.getActiveSession();
            if (!session.isOpened() && !session.isClosed()) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            } else {
                Session.openActiveSession(this, true, statusCallback);
            }

        }

        private void onClickLogout() {
            Session session = Session.getActiveSession();
            if (!session.isClosed()) {
                session.closeAndClearTokenInformation();
            }

        }

        private class SessionStatusCallback implements Session.StatusCallback {
            public void call(Session session, SessionState state, Exception exception) {
                updateView();
            }
        }
        private void publishStory() {
            Session session = Session.getActiveSession();

            if (session != null){

                // Check for publish permissions    
                List<String> permissions = session.getPermissions();
                if (!isSubsetOf(PERMISSIONS, permissions)) {
                    pendingPublishReauthorization = true;
                    Session.NewPermissionsRequest newPermissionsRequest = new Session
                            .NewPermissionsRequest(this, PERMISSIONS);
                session.requestNewPublishPermissions(newPermissionsRequest);
                    return;
                }

                Request request = Request.newStatusUpdateRequest(Session.getActiveSession(), messege, new Request.Callback() {
                    public void onCompleted(Response response) {

                        Toast.makeText(main.this, "messege sent..", Toast.LENGTH_SHORT).show();
                    }
                });
                RequestAsyncTask task = new RequestAsyncTask(request);
                task.execute();
            }

        }
        private boolean isSubsetOf(Collection<String> subset, Collection<String>                                             superset) {
            for (String string : subset) {
                if (!superset.contains(string)) {
                    return false;
                }
            }
            return true;
        }
} 
```

请帮助..这是我的第一篇文章，我希望能找到答案:-)

**另一个问题，也许它会解决问题：我是否必须等待 facebook 批准我的应用程序或无关紧要？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T06:09:10.180

我解决了同样的问题。

我使用 facebook sdk 3.0.2 并且总是 remote_app_id 不匹配存储的 id 错误来了。

如果您使用正确的密钥库制作密钥哈希，请检查您的 jdk 版本。

在 jdk 1.7 中，出现了这个问题。（我认为）

当我更改 jdk 1.6 并解决问题时。

试试看，希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T11:25:51.677

我遇到了同样的问题，但是当我通过 jarsigner 而不是 eclipse 签署我的应用程序时，它在新的 android 版本中运行良好，但问题仍然存在于像姜饼这样的旧 android 版本上，它可能是新 SDK 中的错误。试试看，让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T13:26:36.060

谢谢你们俩 :-) 我的问题是别名：应用程序名称（别名）有 2 个单词。所以简单的解决方案是在 keystore(cmd) 命令中的别名之前和末尾添加“”。

# php - Strtotime 无法准确转换我的日期

> ID：16059820
> 
> 赞同：0
> 
> 时间：2013-04-17T12:18:55.593
> 
> 标签：php, date, strtotime

我知道这是一个常见问题，但我似乎无法在任何地方找到解决方案。在我的最后一个问题[复杂的日期函数 - 比较，减去我需要比较时间戳以获得某些 Cisco 日志的准确日期。

我能想到的最好的（因为日期实际上并不包含年份）格式为 Mar 1 2013 00:03:55: from Mar 1 00:03:55:

但是当我运行一些测试时，strtotime 将此日期转换为 Jan 1970 使用 print date("MY", strtotime($c_log))."\n";

我是否必须将其重新格式化为它可以理解的日期？我似乎没有 DateTime 功能。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:23:34.550

使用该`date_parse_from_format()`函数，以便您可以指定格式 [http://php.net/manual/en/function.date-parse-from-format.php](http://php.net/manual/en/function.date-parse-from-format.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:22:33.570

为我工作：

```
echo date('M Y', strtotime('Mar 1 00:03:55')); // outputs Mar 2013 
```

当不包括在内时，它应该默认为当前年份。

# jquery - 检查添加到的元素数量 动态的

> ID：16059821
> 
> 赞同：0
> 
> 时间：2013-04-17T12:18:57.917
> 
> 标签：jquery

我正在使用 jQuery 在 div 中动态添加图像。

我`alert()`在成功添加元素之后放了一个。jQuery中有什么方法可以检查元素列表是否已添加到`div`标签中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:20:18.173

尝试这个 -

```
$('div img').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:20:10.517

尝试放置全局变量，然后在该方法中将该值加一。最后你会得到计数。这里不需要 jQuery

```
$(".selector").each(function(){
    var images = $(this).find("img");

}); 
```

# javascript - parentView 属性未在子视图中设置

> ID：16059831
> 
> 赞同：0
> 
> 时间：2013-04-17T12:19:21.420
> 
> 标签：javascript, ember.js

有人可以解释为什么 Ember.Handlebars.helpers 类 API 文档中的这个简单示例对我不起作用？

```
<html>
<head>
</head>
<body>
  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-1.0.0-rc.2.js"></script>
  <script>
    aView = Ember.View.create({
    template: Ember.Handlebars.compile("{{#view}} aview: my parent:{{parentView.elementId}} {{/view}}")
    });

    aView.appendTo('body');
  </script>
</body>
</html> 
```

这只是输出：

```
aview: my parent: 
```

没有任何 elementId。在我玩过 parentView 的其他代码中未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:45:18.283

根据我的评论回答。

从 Handlebars 的视图模板中，`View`可以通过`view.propertyName`. 由于`parentView`是当前视图的一个属性，因此应该执行类似于以下的操作：

```
{{#view}} 
    aview: my parent:{{view.parentView.elementId}} 
{{/view}} 
```

# batch-file - 从文件中删除以空格开头的行，包括空行

> ID：16059838
> 
> 赞同：2
> 
> 时间：2013-04-17T12:19:38.777
> 
> 标签：batch-file, space, lines

要删除以空格开头的 txt 文件的所有行（包括空行），我写

```
 findstr /v /b /c:" " <%1>result.out. 
```

实际上，如果每行的开头和空行都不再有空格，那么 result.out 文件将为我提供答案。

我所做的仍然使行标题为空，它还保留了我想放弃的空白行。最后，result.out 输出必须有连续的行，每行的开头总是包含一个文本。

请有人可以告诉我这是什么问题以及如何解决？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:59:13.620

如果要将`Tab`字符包含在要检查的空白中，则必须使用批处理脚本。如果您尝试将字符粘贴到控制台中，`cmd`控制台只会向您发出恼人的声音。但是在文件中解释没有问题。`Tab``Tab``cmd``Tab``.bat`

将其放入批处理文件并运行它，将`Space`和替换`Tab`为实际的空格和制表符。

> `findstr /r /v /c:"^[``Space``Tab``]" /c:"^$" "%~1" >result.out`

第一个`/c:`检查行首的空格。第二个`/c:`检查空行。两者都省略了`/v`开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:15:08.233

```
@ECHO OFF
SETLOCAL
CALL CMD /c EXIT 26
(
FOR /f "eol=%=ExitCodeAscii% delims=" %%i IN ('findstr /v /b /c:" " ^<%1') DO ECHO %%i
)>result.out 
```

应该删除空行。

`FOR`读取 FINDSTR 删除所有带有尾随空格的行之后出现的文件的每一行。任何空的谎言都被丢弃，整行都应用于 %%i，因为没有分隔符。

通过将行尾字符设置为 control-Z，实际上也没有行尾，因此所有非空行都被`ECHO`编辑

# c# - HiddenInput 属性导致 HiddenInput.cshtml 中的运行时错误

> ID：16059844
> 
> 赞同：1
> 
> 时间：2013-04-17T12:19:51.670
> 
> 标签：c#, asp.net-mvc, linq

# 更新

所以，我一直在看错误的文件。我的项目有两个 HiddenInput.cshtml 文件，一个在 displayTemplate 文件夹中，一个在 EditorTemplates 中。我的大脑没有建立联系，我正在查看两个不同的文件夹。

* * *

因此，将 hiddenInput 属性添加到我的 ViewModel 中的属性时，这似乎是一个奇怪的错误...

我对原因的猜测是因为我的 ViewModels、Controllers 和 Models 在 3 个单独的项目中。但是，当我尝试调试此问题时，我确保在所有三个中都引用了 System.Data.Linq。

> c:\proj\Adirondack.search\Views\Shared\EditorTemplates\HiddenInput.cshtml(9)：错误 CS0234：命名空间“System.Data”中不存在类型或命名空间名称“Linq”（您是否缺少程序集参考？）

## 视图模型

```
public class BasicSearchViewModel 
{
    public BasicSearchViewModel()
    {
        SalesFrom = new DateTime(1974, 1, 1);
        SalesTo = DateTime.Today;
    }

    [Display(Name = "Owner", ShortName = "Owner", Prompt = "Enter Owner"), DataType(DataType.Text)] 
    public string OwnerName { get; set; }
    [Display(Name = "Account Number", ShortName = "Strap", Prompt = "Enter Account Number"), DataType(DataType.Text)] 
    public string STRAP { get; set; }

    [Display(Name = "Address", ShortName = "Addr.", Prompt = "Enter full address"), DataType(DataType.Text)] 
    public string Address { get; set; }
    //public bool HasPool { get; set; }

    public string Location { get; set; }

    public string ZipCode { get; set; }

    public bool Pool { get; set; }

    public bool Tennis { get; set; }

    public bool Dock { get; set; }

    public bool SeaWall { get; set; }

    [Display(Name = "Sales From")]
    [Range(typeof(DateTime),"1/1/1974","12/31/2050")]        
    public DateTime SalesFrom { get; set; }

    [Display(Name="Sales To")]
    [Range(typeof(DateTime), "1/1/1974", "12/31/2050")]
    public DateTime SalesTo { get; set; }

    public int? SaleAmountFrom { get; set; }
    public int? SaleAmountTo { get; set; }

    public bool VacantLand { get; set; }

    [ScaffoldColumn(false)]
    public PagedList<ParcelResultItemViewModel> SearchResults { get; set; }

    [HiddenInput]
    public int? page { get; set; }

} 
```

## 搜索.cshtml

```
@using Search.Helpers;
@using Search.Components.Html.ViewModels;
@using PagedList.Mvc;

@model BasicSearchViewModel

@{
    ViewBag.Title = "Search";

}

@Html.ActionLink("Advanced", "AdvancedSearch")
@Html.ActionLink("Tangible", "Search", "Tangible")

@using (Html.BeginForm("Search", "Parcel",  FormMethod.Get, new { id = "searchForm" }))
{

<div>@Html.ValidationMessageFor(x => x)</div>

    @Html.EditorFor(m => m)
     <input type="submit" value="Refine" />

        <h2>Results</h2>
<strong>Showing the first @Model.SearchResults.TotalItemCount of  @ViewData["count"] results found </strong>

<table>
<tr>
<th>STRAP</th>
<th>SITUS</th>
<th>PROPERTY USE</th>
<th></th>
</tr>
@foreach (var item in Model.SearchResults)
{
    <tr>
        <td>
            @Html.DisplayFor(x => item.STRAP) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SITUS)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SUBDIVISION_PROPERTY_USE)
        </td>
        <td rowspan="2">
            @Html.ActionLink("Show Details", "Details", new { id = item.STRAP })
        </td>
    </tr>
    <tr>
    <td colspan="3">
    @foreach (var owner in item.OWNERS.Take(2).OrderBy(x => x.LN_NUM))
    {
       @owner.NAME<br /> 
    }
    </td>
    </tr>
}

</table>

<pre>
@HttpUtility.ParseQueryString(Model.AsQueryString())
</pre>   

@Html.PagedListPager(Model.SearchResults, page => Url.Action("search", 
    new {Page = page,   
        owner = Model.OwnerName,
        AccountNumber = Model.STRAP,
        Address = Model.Address,
        Location = Model.Location,
        ZipCode = Model.ZipCode,
        Pool = Model.Pool,
        Tennis = Model.Tennis,
        Dock = Model.Dock,
        SeaWall = Model.SeaWall,
        SalesFrom = Model.SalesFrom,
        SalesTo = Model.SalesTo,
        SaleAmountFrom = Model.SaleAmountFrom,
        SaleAmountTo = Model.SaleAmountTo,
        VacantLand = Model.VacantLand          
         }

    ))

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:31:18.553

您正在 razoe 视图中使用`LINQ`表达式。您需要将正确的命名空间导入到您的视图中才能使用 LINQ 函数。

将 using`System.Linq;`语句添加到您的视图中。

# ruby-on-rails - 从 Rails 应用程序在单独的服务器上启动脚本

> ID：16059856
> 
> 赞同：0
> 
> 时间：2013-04-17T12:20:21.007
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，当用户单击一个按钮时，它当前会在后台启动一个内部创建的脚本。为简单起见，我们姑且称之为`myScript`。所以在我的 Rails 应用程序中，我基本上有：

```
def run!
  `myScript with some arguments`
end 
```

现在，该脚本将作为进程在运行 Rails 应用程序的同一台机器上运行。

我们希望在一台服务器上托管我们所有的 Ruby/Rails 应用程序，并使用单独的服务器来运行脚本。是否可以启动该脚本，但在不同的机器上？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:26:50.733

我将 ssh 用于这些类型的事情。

```
require 'net/ssh'
Net::SSH.start('server.com', 'username', password: "asdasd") do |ssh|
  $stdout.print ssh.exec!("cdc && curl https://gist.github.com/mhenrixon/asdasd123123/raw/123123asdasd/update.rb | rails c production")
end 
```

我认为这是最简单的方法，但 sinatra/rails 监听器也不是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:32:43.143

完全窃取 Dogbert 的答案：我会使用 HTTP 解决方案。创建一个后台作业（Sidekick、Queue Classic）并有一个简单的作业，在第二台服务器上执行 get 或 post 或其他任何操作。

HTTP 解决方案将涉及一些设置成本（可能需要时间和学习），但最终它将比 SSH 解决方案更强大，因为您不必担心 IP 或用户等。只是一个直接的 URL。另外，如果您使用 Capistrano 等进行操作，您的部署将非常容易。

这些作业无法在您的网络服务器上运行，而是使用后台进程，是否有原因？

# phpunit - ZendFramework 2 - PHPUnit - 命令行工作，NetBeans 状态“未执行测试”

> ID：16059862
> 
> 赞同：0
> 
> 时间：2013-04-17T12:20:31.500
> 
> 标签：phpunit, zend-framework2, netbeans-7.3

在 Zend Framework 2 中为自己的模块执行 PHPUnit 测试时，我似乎有一点问题。

操作系统：Mac OS 10.8.3
Zend Framework 2.1.4
PHPUnit 版本 3.7.19（通过 pear 安装）
PHP 版本 5.3.15（启用 xdebug，版本 2.1.3）

我按照 Zend 指南的说明创建了模块“Album”（[http://framework.zend.com/manual/2.1/en/user-guide/modules.html](http://framework.zend.com/manual/2.1/en/user-guide/modules.html)）

我不想将单元测试放入模块文件夹中，而是希望将它们全部放在一个集中的文件夹中。这是我的应用程序的基本结构：

-config
-data
-module
-public
-tests
--Modules
---Album
----AlbumTest.php
--Bootstrap.php
--phpunit.xml
-vendor
...(license, readme, composers and init_autoloader.php)

-> Module Album 的测试位于“tests”中的“Modules/Album”文件夹中。文件夹“tests”还包含 Bootstrap.php 和 phpunit.xml。

以下是文件的内容：

引导程序.php

```
<?php

/*
 * Set error reporting to the level to which Zend Framework code must comply.
 */
error_reporting( E_ALL | E_STRICT );

/*
 * The first run required me to fix some constants
 */
defined('TESTS_ZEND_FORM_RECAPTCHA_PUBLIC_KEY') || define('TESTS_ZEND_FORM_RECAPTCHA_PUBLIC_KEY', 'public key');
defined('TESTS_ZEND_FORM_RECAPTCHA_PRIVATE_KEY') || define('TESTS_ZEND_FORM_RECAPTCHA_PRIVATE_KEY', 'private key');
defined('TESTS_ZEND_LDAP_PRINCIPAL_NAME') || define('TESTS_ZEND_LDAP_PRINCIPAL_NAME', 'someUser@example.com');
defined('TESTS_ZEND_LDAP_ALT_USERNAME') || define('TESTS_ZEND_LDAP_ALT_USERNAME', 'anotherUser');

chdir(dirname(__DIR__));

/*
 * autoload the application
 */
include __DIR__ . '/../init_autoloader.php';

Zend\Mvc\Application::init(include 'config/test.config.php'); 
```

phpunit.xml

```
<phpunit bootstrap="./Bootstrap.php" colors="true">
    <testsuites>
        <testsuite name="Zend Module Tests">
            <directory>./Modules</directory>
        </testsuite>
    </testsuites>

</phpunit> 
```

专辑测试.php

```
<?php

namespace AlbumTest\Model;

use Album\Model\Album;
use PHPUnit_Framework_TestCase;

/**
 * @category   Module
 * @package    Album
 * @subpackage UnitTests
 * @group      Module_Album
 */
class AlbumTest extends PHPUnit_Framework_TestCase {

    public function testAlbumInitialState() {
        $album = new Album();

        $this->assertNull($album->artist, '"artist" should initially be null');
        $this->assertNull($album->id, '"id" should initially be null');
        $this->assertNull($album->title, '"title" should initially be null');
    }

    public function testExchangeArraySetsPropertiesCorrectly() {
        $album = new Album();
        $data = array('artist' => 'some artist',
            'id' => 123,
            'title' => 'some title');

        $album->exchangeArray($data);

        $this->assertSame($data['artist'], $album->artist, '"artist" was not set correctly');
        $this->assertSame($data['id'], $album->id, '"id" was not set correctly');
        $this->assertSame($data['title'], $album->title, '"title" was not set correctly');
    }

    public function testExchangeArraySetsPropertiesToNullIfKeysAreNotPresent() {
        $album = new Album();

        $album->exchangeArray(array('artist' => 'some artist',
            'id' => 123,
            'title' => 'some title'));
        $album->exchangeArray(array());

        $this->assertNull($album->artist, '"artist" should have defaulted to null');
        $this->assertNull($album->id, '"id" should have defaulted to null');
        $this->assertNull($album->title, '"title" should have defaulted to null');
    }

    public function testGetArrayCopyReturnsAnArrayWithPropertyValues() {
        $album = new Album();
        $data = array('artist' => 'some artist',
            'id' => 123,
            'title' => 'some title');

        $album->exchangeArray($data);
        $copyArray = $album->getArrayCopy();

        $this->assertSame($data['artist'], $copyArray['artist'], '"artist" was not set correctly');
        $this->assertSame($data['id'], $copyArray['id'], '"id" was not set correctly');
        $this->assertSame($data['title'], $copyArray['title'], '"title" was not set correctly');
    }

    public function testInputFiltersAreSetCorrectly() {
        $album = new Album();

        $inputFilter = $album->getInputFilter();

        $this->assertSame(3, $inputFilter->count());
        $this->assertTrue($inputFilter->has('artist'));
        $this->assertTrue($inputFilter->has('id'));
        $this->assertTrue($inputFilter->has('title'));
    }

} 
```

NetBeans 知道，在哪里可以找到 phpunit 二进制文件：（我想在这里发布图像，虽然没有声誉 :)，我会尝试解释它）在选项中配置的路径 - php - 单元测试
/usr /local/pear/bin/phpunit
和 /usr/local/pear/bin/phpunit-skelgen

在项目的属性中，我设置了“使用 XML 配置”并将路径粘贴到 phpunit.xml。我还检查了“在运行测试之前询问测试组”——我在“Module_Album”组上方进行了测试——这样我确保 PHPUnit 找到了正确的测试。

我右键单击项目并选择“测试”，它显示组“模块_专辑”，我检查它并单击“确定”。它运行一些东西，告诉我它找到了正确的 phpunit.xml（“从 FULL_PATH/tests/phpunit.xml 读取的配置”）。运行后，它告诉我，它没有执行任何测试。

这是 NetBeans 中的完整输出：

```
PHPUnit 3.7.19 by Sebastian Bergmann.

Configuration read from FULL_PATH/tests/phpunit.xml

Time: 9 seconds, Memory: 348.25Mb

[2KNo tests executed!
[2K
Generating code coverage report in Clover XML format ... done 
```

无论如何，我可以通过 shell（终端）成功地做同样的事情。没关系，如果我直接挂载测试目录并运行phpunit，使用phpunit二进制文件的完整路径（以确保我不使用不同的版本），指定phpunit.xml的完整路径，等等。以下是一些示例：

```
phpunit
phpunit -c FULL_PATH/tests/phpunit.xml
/usr/local/pear/bin/phpunit -c FULL_PATH/tests/phpunit.xml 
```

所有这些命令都给了我我所期望的：

```
PHPUnit 3.7.19 by Sebastian Bergmann.

Configuration read from FULL_PATH/tests/phpunit.xml

.....

Time: 0 seconds, Memory: 12.75Mb

OK (5 tests, 16 assertions) 
```

*   我不明白，为什么这在 shell 中有效，但不能通过 NetBeans
*   NetBeans 使用 350MB，而在 shell 中仅使用 12.75MB
*   如果我删除“在运行测试之前询问测试组”选项，它似乎会尝试运行所有 ZendTest。不知道这是怎么可能的，从 phpunit.xml 它不应该找到它们。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:35:48.337

我终于明白了，这是怎么回事。我之前使用 phpunit.xml 运行 ZendTests，它位于 vendor/zendframework/zendframework/tests 内
出于某种原因，NetBeans 保存了 testfile-directory，它在第一次测试运行中找到并且不会释放它们，如果不同phpunit.xml 被选中。我必须通过“右键单击项目”-“属性”-“源”-“测试文件夹”来更改“新”测试目录的路径。

现在 NetBeans 运行测试并提供与 CLI 完全相同的输出。

# java - 无法在 IE 中找到带有 CSSpath 的元素，尽管对于带有 Java 的 Selenium WebDriver 的 FF 也可以正常工作

> ID：16059863
> 
> 赞同：0
> 
> 时间：2013-04-17T12:20:36.360
> 
> 标签：java, selenium-webdriver

以下是我在 IE 中使用的代码的语法：

```
driver.findElement(By.cssSelector("#loginForm>div>table>tbody>tr:nth-child(4)>div>span>span>span") 
```

错误是：

```
org.openqa.selenium.NoSuchElementException: Unable to find element with css selector == #loginForm>div>table>tbody>tr:nth-child(4)>div>span>span>span (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 594 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.31.0', revision: '1bd294d', time: '2013-02-27 20:53:56'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_17'
Session ID: f0058b48-ac08-4623-9920-5a871ce43605
Driver info: org.openqa.selenium.ie.InternetExplorerDriver
Capabilities [{platform=WINDOWS, elementScrollBehavior=0, javascriptEnabled=true, enablePersistentHover=true, ignoreZoomSetting=false, browserName=internet explorer, enableElementCacheCleanup=true, unexpectedAlertBehaviour=dismiss, version=8, cssSelectorsEnabled=true, ignoreProtectedModeSettings=false, allowAsynchronousJavaScript=true, requireWindowFocus=false, handlesAlerts=true, initialBrowserUrl=, nativeEvents=true, takesScreenshot=true}]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:59:31.690

正如其他人所说，CSS3 选择器不适用于 IE8 或更低版本，例如`nth-child`.

我会在这样的时间查看以下站点，以查看支持的内容和不支持的内容：

[http://caniuse.com/#search=nth-child](http://caniuse.com/#search=nth-child)

至于下一步，我会做两件事：

运行最新版本的 Selenium。

将您的定位器更改为类似的内容（未测试，因为您尚未提供 HTML）：

```
//*[@id='loginForm']/div/table/tbody/tr[4]/div/span/span/span 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T13:35:59.147

```
The Html code is as follows.
<form name="loginForm" id="loginForm" action="/suredesign/j_spring_security_check" method="post">
<div class="dijitLayoutContainer dijitContainer dijitTableLayout" id="dojox_layout_TableContainer_0" data-dojo-props="cols:1,spacing:10,showLabels:false" data-dojo-type="dojox.layout.TableContainer" widgetId="dojox_layout_TableContainer_0">
<table width="100%" class="tableContainer-table tableContainer-table-horiz" cellSpacing="10">
<tbody>
<tr>
<tr>
<tr>
<tr>
<td class="tableContainer-valueCell">
<div title="" class="dijitContentPane" id="dijit_layout_ContentPane_17" role="group" data-dojo-type="dijit.layout.ContentPane" widgetId="dijit_layout_ContentPane_17">
<span class="dijit dijitReset dijitInline dijitButton paddingright5 signInLabel" role="presentation" widgetId="dijit_form_Button_0">
dijitReset dijitInline dijitButtonNode 
```

# bash - 当我将数字打印到文件中时出现奇怪的字符（bash shell）

> ID：16059864
> 
> 赞同：1
> 
> 时间：2013-04-17T12:20:38.773
> 
> 标签：bash, shell, printf, echo

我的 script.sh 中有这一行

```
printf "%d" "$endMS_line" 
```

$endMS_line 是一个数字。我得到那个号码

```
endMS_line=`cat file | awk '{if($1=='"$variable"') print NR}'` 
```

并打印它我使用

```
printf "%d" "$endMS_line" 
```

或者

```
echo $endMS_line 
```

所以一切都在标准输出中完美运行。问题是当我想将该数字保存到文件中时（因为我想在另一个脚本中使用结果，可能有比写入文件然后从文件中读取数字等更聪明的方法来做到这一点。 .)

但现在我正在尝试这样做。如何？好吧，我把它写在标准输出中。

```
myscript.sh inputs > file.txt 
```

但是当我尝试查看文件时（当我打开文件时）我看到结果加上奇怪的字符

```
[H[2J867 
```

此示例中的正确数字是 867。有人知道我该如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:38:38.207

在脚本的开头，我有命令：

```
clear 
```

删除它并使用：

```
echo "$endMS_line" 
```

然后在标准输出中：

```
myscript.sh input > file.txt 
```

完美运行。

# linux - 需要在 TCL 脚本中为交换机 (CLI) 替换 command-fedora-keyboard 导航键

> ID：16059865
> 
> 赞同：0
> 
> 时间：2013-04-17T12:20:40.890
> 
> 标签：linux, shell, tcl, expect

我有一个开关（基于 CLI），当您点击字母表时（我能够使用 tcl 自动执行），它会将我带到当前的 STP 设置，但是当涉及到手动将 STP 设置从 RSTP 更改为 MSTP 时，我必须点击*向上箭头*和*向下箭头*键（唯一可用的选项）。

我需要帮助以 tcl 格式提供向上箭头和向下箭头命令以使其自动化。

我阅读了有关 rlwrap 的信息，但更多的是历史/文件编辑，这可能对我没有帮助。我尝试了“ ^[[A” 和 “[A” 选项和十六进制代码，但没有成功。

我试过 "\u001b[A" 等，但 STP 的值没有改变。CLI 是一个 XML CLI。这是我的脚本。spawn telnet $DUT1_IP 期望 "login:" 发送 "$user\r" 期望 "Password:" 发送 "$password\r" 期望 "sh-3.2#" #sleep 2 发送 "xml_cli\r" 期望 ">> " 发送“bridge_config_mode = STP”

如果我必须将模式 STP 更改为 MSTP 我需要使用键盘上的向上箭头键将其更改为 MSTP /RSTP 。如何在期望中使用相同的处理方式。如果我们可以为相同（或任何其他）使用 shell 脚本，请给出您的想法。

感谢和问候莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:59:36.373

`Up`由系统键盘驱动程序映射到三个字符序列：`^[[A`. `^[`此处呈现的第一个字符是通常无法在屏幕上呈现的*转义*`\u001b`字符，您可以在 Tcl 脚本中使用. `Down`是相应的`^[[B`。（严格来说，它可能是其他字符序列——毕竟这取决于终端类型——但实际上这里所有的东西都使用相同的东西，谢天谢地！）

让我们通过将这些键序列放入变量中来为您简化事情（我们还需要在实数之前使用反斜杠，`[`因为它是 Tcl 元语法字符）：

```
set up   "\u001b\[A"
set down "\u001b\[B" 
```

现在您可以这样做将字符发送到远程端：

```
send $up
expect "...whatever..."
send $down
expect "...blah..." 
```

# mysql - 在 Eclipse 中彻底关闭外部应用程序？

> ID：16059871
> 
> 赞同：1
> 
> 时间：2013-04-17T12:20:51.843
> 
> 标签：mysql, eclipse, application-shutdown

Eclipse 具有`External Tools`允许运行一些外部程序的能力。例如，我可以使用命令运行 MySQL 服务器

```
MYPATH\MySQL\MySQL Server 5.1\bin\mysqld.exe --verbose --console 
```

现在，如何停止该服务器？我可以定义单独的启动器，但这并不酷

```
MYPATH\MySQL\MySQL Server 4.1\bin\mysqladmin.exe" shutdown --user=root --password=pwd 
```

因为 (1) 包含显式密码并且 (2) 使用单独的启动器。

如果我用红色方形按钮终止程序会发生什么？它会优雅地停止吗？MySQL 可以`Ctrl-C`在控制台中停止，但 Eclipse 控制台会忽略此按键。

我可以在 Eclipse 中定义一些停止外部程序的操作吗？

# .net - 识别并删除会破坏 FOR XML 的字符

> ID：16059872
> 
> 赞同：4
> 
> 时间：2013-04-17T12:20:57.173
> 
> 标签：.net, xml, tsql

创建 XML 时出错

> 消息 6841，级别 16，状态 1，第 26 行 FOR XML 无法序列化节点“值”的数据，因为它包含 XML 中不允许的字符 (0x000C)。要使用 FOR XML 检索此数据，请将其转换为二进制、varbinary 或图像数据类型并使用 BINARY BASE64 指令。

想出了如何用 TSQL 解决这个问题

我的问题是如何预防

该数据是通过
.NET C# 加载
的

什么字符会破坏 FOR XML？

如何在 .NET C# 中识别和删除这些字符？
在数据甚至进入 SQL 之前的输入。

XML 是使用 TSQL FOR XML 生成的（不是通过 .NET）。

找到此链接 [XML 中的有效字符](http://en.wikipedia.org/wiki/Valid_characters_in_XML#XML_1.1)

> 以下代码点范围内的 Unicode 代码点在 XML 1.1 文档中始终有效：[2] U+0001–U+D7FF、U+E000–U+FFFD：这包括大多数 C0 和 C1 控制字符，但不包括一些（不是all) BMP 中的非字符（禁止使用代理、U+FFFE 和 U+FFFF）；U+10000–U+10FFFF：这包括辅助平面中的所有代码点，包括非字符。

我不知道如何测试 U+0001–U+D7FF。

答案比问题多。
如问题中所述，我已经在执行其他输入过滤。
我只是想添加xml。
在实际应用中，将过滤掉所有控制字符，因为此用户数据不应包含任何控制字符。
win1252部分是为了对齐存储的int SQL char(byte)的数据。

使用 1.0 字符集，因为 1.1 中允许破坏我的 FOR XML。
也仅适用于 Int16，因为 char 在 .NET 中是 Int16。

```
public static string RemoveDiatricsXMLsafe(string unicodeString, bool toLower, bool toWin1252)
{
    // cleary could just create the Regex and validXMLsingle once in the ctor
    unicodeString = Regex.Replace(unicodeString, @"\s{2,}", " ");
    //U+0009, U+000A, U+000D: these are the only C0 controls accepted in XML 1.0;
    //U+0020–U+D7FF, U+E000–U+FFFD    
    Int16[] validXMLsingle = new Int16[4];
    validXMLsingle[0] = Int16.Parse("0020", System.Globalization.NumberStyles.HexNumber);
    validXMLsingle[1] = Int16.Parse("0009", System.Globalization.NumberStyles.HexNumber);
    validXMLsingle[2] = Int16.Parse("000A", System.Globalization.NumberStyles.HexNumber);
    validXMLsingle[3] = Int16.Parse("000D", System.Globalization.NumberStyles.HexNumber);

    unicodeString = unicodeString.Trim();
    Int16 u16;
    StringBuilder sb = new StringBuilder();
    bool validXML = false;
    if (toLower) unicodeString = unicodeString.ToLowerInvariant();
    foreach (char c in unicodeString.Normalize(NormalizationForm.FormD)) // : NormalizationForm.FormKD) breaks 
    {
        switch (CharUnicodeInfo.GetUnicodeCategory(c))
        {
            case UnicodeCategory.NonSpacingMark:
            case UnicodeCategory.SpacingCombiningMark:
            case UnicodeCategory.EnclosingMark:
                //do nothing
                break;
            default:
                u16 = (Int16)c;
                validXML = false; 
                if      (u16 >= validXMLsingle[0]) validXML = true;
                else if (u16 == validXMLsingle[1]) validXML = true;
                else if (u16 == validXMLsingle[2]) validXML = true;
                else if (u16 == validXMLsingle[3]) validXML = true;
                if (validXML) sb.Append(c);
                break;
        }
    }
    if (!toWin1252)
    {
        return sb.ToString();
    }
    else
    {
        Encoding win1252 = Encoding.GetEncoding("Windows-1252");
        Encoding unicode = Encoding.Unicode;

        // Convert the string into a byte array. 
        byte[] unicodeBytes = unicode.GetBytes(sb.ToString());

        // Perform the conversion from one encoding to the other. 
        byte[] win1252Bytes = Encoding.Convert(unicode, win1252, unicodeBytes);

        // Convert the new byte[] into a char[] and then into a string. 
        char[] win1252Chars = new char[win1252.GetCharCount(win1252Bytes, 0, win1252Bytes.Length)];
        win1252.GetChars(win1252Bytes, 0, win1252Bytes.Length, win1252Chars, 0);
        return new string(win1252Chars);
        //string win1252String = new string(win1252Chars);
        //return win1252String;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:30:11.837

我猜是`'0x000C' = '<'`（[http://www.wimpyplayer.com/docs/howto/special_characters.html](http://www.wimpyplayer.com/docs/howto/special_characters.html)）。那么在插入数据之前，您不只需要对放入每个节点的数据进行 XML 转义吗？

这在这里得到了回答：[String escape into XML](https://stackoverflow.com/questions/1132494/string-escape-into-xml)

```
public static string XmlEscape(string unescaped)
{
    XmlDocument doc = new XmlDocument();
    var node = doc.CreateElement("root");
    node.InnerText = unescaped;
    return node.InnerXml;
}

public static string XmlUnescape(string escaped)
{
    XmlDocument doc = new XmlDocument();
    var node = doc.CreateElement("root");
    node.InnerXml = escaped;
    return node.InnerText;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T17:41:32.680

在 .Net 方面，您应该能够使用正则表达式来查看您是否有一只奇怪的鸟：

```
var reg = new Regex("[^[\u0001-\ud7ff\ue000-\ufffd)]");
if(reg.IsMatch(...)
{
    // do what you want if you find something you don't want
} 
```

# iphone - 将 UIViewController 推送到 UITabBarController

> ID：16059884
> 
> 赞同：0
> 
> 时间：2013-04-17T12:21:29.773
> 
> 标签：iphone, objective-c, uiviewcontroller, uitabbarcontroller

我有`UITabBarController`，它有四个标签。当从另一个视图移动`UIViewController`到 中的一个视图时`UITabBarController`，底部的选项卡栏项目没有出现，并且屏幕的顶部和底部也有空间。我怎样才能避免这种情况。我正在使用故事板。

这是我正在使用的代码，同时从`UIViewController`to移动`UITabBarController`：

```
 HomePage *mvc=[self.storyboard instantiateViewControllerWithIdentifier:@"HomePage"];
[self presentViewController:mvc animated:YES completion:nil];
    mvc.hidesBottomBarWhenPushed = NO; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:49:39.570

空间是你唯一的问题吗？

1.) 确保 storyboard/ib 中的 UIViewController 具有在运行时显示的相同的模仿 UIItems（底部栏、导航栏、状态栏）。这样做可以充分利用可用空间。加上关联的视图将具有正确的大小。

2.) 留意自动布局选项和设置。根据您所做的详细工作，您最终可以得到您所描述的内容或一个可以顺利融入更大或更小超级视图的视图 - 尽可能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:24:17.263

嗯，如果你搬到一个里面它会搞砸的`UIViewController`。`UITabBarController`您需要做的是移动到`UITabBarController`并使用正确的 UIViewControllers 设置它`setViewControllers:animated:`

因此，设置一个 segue`UITabBarController`并使用`setViewControllers:animated:`并将您的 UIViewController 作为参数放入数组中`setViewControllers:animated:`。

# php - 在 OOP PHP 中编写计算器类的更简单方法

> ID：16059886
> 
> 赞同：8
> 
> 时间：2013-04-17T12:21:35.083
> 
> 标签：php, oop

我创建了一个名为 Calculator 的类，其中包含加、减、乘和除函数。计算器仅限于将两个数字相加并返回结果。我对 OOP 比较陌生，想在课堂上获得一些意见，我是否走很长的路，如果我这样做了，是否有另一种简化课堂的方法。

这是代码：

```
class Calculator {
    private $_val1 , $_val2;

    public function __construct($val1, $val2){
        $this->_val1 = $val1;
        $this->_val2 = $val2;
    }

    public function add(){
        return $this->_val1 + $this->_val2;
    }

    public function subtract(){
        return $this->_val1 - $this->_val2;
    }

    public function multiply (){
        return $this->_val1 * $this->_val2;
    }

    public function divide () {
        return $this->_val1 / $this->_val2;
    }
}

$calc = new Calculator(3,4);
echo "<p>3 + 4 = ".$calc->add(). "</p>";

$calc = new Calculator (15,12);
echo "<p>15 - 12 = ".$calc->subtract(). "</p>";

$calc = new Calculator (20,2);
echo "<p> 20 * 2 = ".$calc->multiply(). "</p>";

$calc = new Calculator (20,2);
echo "<p> 20 / 2 = ".$calc ->divide(). "</p>"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T12:44:17.873

恕我直言，您应该使用多态性。
[这个视频](http://www.youtube.com/watch?v=4F72VULWFvc)可以帮助你理解这个原理

这是我的想法。

首先，为您需要的任何操作定义一个接口

```
interface OperationInterface
{
    public function evaluate(array $operands = array());
} 
```

然后，创建计算器支架

```
class Calculator
{
    protected $operands = array();

    public function setOperands(array $operands = array())
    {
        $this->operands = $operands;
    }

    public function addOperand($operand)
    {
        $this->operands[] = $operand;
    }

    /**
     * You need any operation that implement the given interface
     */
    public function setOperation(OperationInterface $operation)
    {
        $this->operation = $operation;
    }

    public function process()
    {
        return $this->operation->evaluate($this->operands);
    }
} 
```

然后你可以定义一个操作，例如，加法

```
class Addition implements OperationInterface
{
    public function evaluate(array $operands = array())
    {
        return array_sum($operands);
    }
} 
```

你会像这样使用它：

```
$calculator = new Calculator;
$calculator->setOperands(array(4,2));
$calculator->setOperation(new Addition);

echo $calculator->process(); // 6 
```

有了这一点，如果您想添加任何新行为，或修改现有行为，只需创建或编辑一个类。

例如，假设您想要模数运算

```
class Modulus implements OperationInterface
{
    public function evaluate(array $operands = array())
    {
        $equals = array_shift($operands);

        foreach ($operands as $value) {
            $equals = $equals % $value;
        }

        return $equals;
    }
} 
```

然后，

```
$calculator = new Calculator;
$calculator->setOperands(array(4,2));
$calculator->setOperation(new Addition); // 4 + 2

echo $calculator->process(); // 6

$calculator->setOperation(new Modulus); // 4 % 2

echo $calculator->process(); // 0

$calculator->setOperands(array(55, 10)); // 55 % 10

echo $calculator->process(); // 5 
```

* * *

### 此解决方案允许您的代码成为第三方库

如果您打算重用此代码或将其作为库提供，用户无论如何都不会*修改您的源代码*。
但是如果他想要一个`Substraction`或一个`BackwardSubstraction`未定义的方法怎么办？

`Substraction`他只需要在他的项目中创建他自己的类，该类`OperationInterface`可以与您的库一起使用。

### 更容易阅读

在查看项目架构时，更容易看到这样的文件夹

```
- app/
    - lib/
        - Calculator/
            - Operation/
                - Addition.php
                - Modulus.php
                - Substraction.php
            - OperationInterface.php
            - Calculator.php 
```

并立即知道哪个文件包含所需的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:42:16.523

I don't think a plain calculator is a good example for OOP. An object needs both a set of methods and a set of variables that represent its state, and can be used to differentiate instances of the object. I would suggest trying to make "moody" calculators. A calculator with a happy mood will add 2 to each result, and an angry calculator will subtract 2 from each result.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:42:55.593

我会做这样的事情

```
interface Evaluable {
    public function evaluate();
}

class Value implements Evaluable {
    private $value;

    public function __construct($value) {
        $this->value = $value;
    }

    public function evaluate() {
        return $this->value();
    }
}

class Node implements Evaluable {
    protected $left;
    protected $right;

    public function __construct(Evaluable $left, Evaluable $right) {
        $this->left = $left;
        $this->right = $right;
    }
}

class SumNode extends Node {
    public function evaluate() {
        return $this->left->evaluate() + $this->right->evaluate();
    }
}

$op = new SumNode(new Value(2), new Value(3));
$result = $op->evaluate(); 
```

这样您就可以轻松添加新操作

```
class SubNode extends Node {
    public function evaluate() {
        return $this->left->evaluate() - $this->right->evaluate();
    }
} 
```

和这样的连锁操作

```
$sum1 = new SumNode(new Value(5), new Value(3));
$sum2 = new SumNode(new Value(1), new Value(2));
$op = new SubNode($sum1, $sum2);
$result = $op->evaluate(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:32:37.137

一般来说，我们不会在这些类中固定值。您的方法应该通过参数获取它们的 2 个值，而不是选择私有成员。

如下所示：

```
public function add($v1, $v2)
{
    return $v1 + $v2;
} 
```

因此，计算器成为一种工具，我们不应该需要分配这种对象。这就是为什么 Calculators 方法应该是**static**的原因。

```
public static function add($v1, $v2)
{
    return $v1 + $v2;
} 
```

这样，您只需调用`Calculator::add(1, 2)`. 你可以在任何地方找到这样的课程。像向量、数学或 3D 中的矩阵。或写入输出或类似的东西。

请记住，这是一种方法，既不是最好的也不是最坏的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:32:07.300

你可能最终应该做类似的事情

```
$calc = new Calculator();
$calc->sum($x, $y, $z);
$calc->substract($x, $y);
.... 
```

看看这个例子。您可以使用 func_num_args() 提供任意数量的参数

```
<?php
function foo()
{
$numargs = func_num_args();
echo "Number of arguments: $numargs\n";
}

foo(1, 2, 3);   
?>
// output: Number of arguments: 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T13:04:18.680

这个任务有很多解决方案，这里是其中之一：

```
 <?

class Calculator
{

    /**
     * @var float
     */
    /**
     * @var float
     */
    private $_val1,
        $_val2;

    /**
     * @var int
     */
    private static $_result = 0;

    /**
     * @param $val1
     * @param $val2
     */
    public function __construct($val1 = '', $val2 = '')
    {
        if ((!empty($val1) && !empty($val2)) && (!is_numeric($val1) && !is_numeric($val2))) {
            $this->_val1 = (float)$val1;
            $this->_val2 = (float)$val2;
        }
    }

    /**
     * @param $val1
     */
    public function setVal1($val1)
    {
        $this->_val1 = (float)$val1;
    }

    /**
     * @param $val2
     */
    public function setVal2($val2)
    {
        $this->_val2 = (float)$val2;
    }

    /**
     * @param string $operator
     *
     * @return float|int|string
     */
    public function getResult($operator = '')
    {
        if (is_numeric($this->_val1) && is_numeric($this->_val2)) {
            switch ($operator) {
                case '+':
                    self::$_result = $this->_val1 + $this->_val2;
                    break;
                case '-':
                    self::$_result = $this->_val1 - $this->_val2;
                    break;
                case '*':
                    self::$_result = $this->_val1 * $this->_val2;
                    break;
                case '/':
                    self::$_result = $this->_val1 / $this->_val2;
                    break;
            }
        } else {
            echo 'Alert alert alert)) some of operands not set or not number';
        }
        return self::$_result;
    }
} 
```

这是很好的解决方案[https://gist.github.com/cangelis/1442951](https://gist.github.com/cangelis/1442951)

# java - Java：使用分隔符读取文件时出错

> ID：16059911
> 
> 赞同：1
> 
> 时间：2013-04-17T12:22:47.737
> 
> 标签：java, arrays, delimiter

我有一个包含多个字段的文件，我需要将它们单独存储到一个数组中。

```
Steve;stiffy;123;88
Sam;sammy;456;55 
```

但是当我尝试存储它们时，我不断收到错误提示 java.util.NoSuchElementException

这是我存储数据的代码

```
void loadCustomer(){

    try {
        Scanner sc = new Scanner(new File("CustomerInfo.txt"));
        sc.useDelimiter(";");
        while (sc.hasNext())
        {
            cusName.add(sc.next());
            cusUser.add(sc.next());
            cusPass.add(sc.next());
            cusCCNum.add(sc.next());
        }
} 
```

我可以通过改变来让它工作

```
cusCCNum.add(sc.next()); 
```

至

```
cusCCNum.add(sc.nextLine()); 
```

但它会忽略分隔符，当我打印出 cusCCNum.get(1) 时，它会显示

```
;88 
```

代替

```
88 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:29:44.790

88 和 Sam 之间没有分隔符。

```
 scanner.useDelimiter(";|\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:26:27.823

使用字符串标记器而不是分隔符。以字符串形式获取输入并通过 ; 解析它 字符作为令牌。

[在这里](http://www.java-samples.com/showtutorial.php?tutorialid=236)学习，如何使用 stringtokenizer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:46:54.657

当您为每个元素调用 4 个下一个元素检查是否有 1 个下一个元素时，您会导致异常，这将执行以下操作：

```
while (RecentElement is not the last one)
{
    Read (RecentElement + 1)
    Read (RecentElement + 2)
    Read (RecentElement + 3)
    Read (RecentElement + 4)
} 
```

有时你会因为访问一个不存在的元素而得到[next() 方法的异常：](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)

> 抛出：NoSuchElementException - 如果没有更多的令牌可用

您应该使用新行作为分隔符，并为每个新行解析记录中的数据，例如使用 split 函数：

```
 sc.useDelimiter("\n");      
   while (sc.hasNext())
   {
       for(String g: sc.next().split(";"))
         System.out.println(g);          
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:48:54.457

看起来您需要读取每一行，使用分隔符标记它并将值设置为数组。

我可以通过 StringTokenizer 做到这一点。

```
while (sc.hasNextLine())            {               
                StringTokenizer st =  new StringTokenizer(sc.nextLine(),";");               
                while (st.hasMoreElements()) {
                    System.out.println(st.nextElement());
                }
            } 
```

我很惊讶，需要阅读更多关于 Scanner api 的内容，以了解它为什么不能与扫描仪一起使用。

# php - 从准备好的语句中多次调用存储过程

> ID：16059916
> 
> 赞同：0
> 
> 时间：2013-04-17T12:22:59.680
> 
> 标签：php, mysql, stored-procedures, prepared-statement

这似乎是少数人遇到的 Windows 特定问题，但没有令人满意的结果。我还没有在我的 Linux 服务器上尝试过代码。

当使用准备好的语句多次调用存储过程时，Apache 会崩溃。存储过程似乎返回两个结果，即使是简单`SELECT * FROM users`的使下一次执行不起作用。

我现在使用的解决方法是`$mysqli->next_result();`在每次执行之间。

我的问题，有人经历过吗？有没有修复，这是一个错误还是我只是做错了什么？

Windows 7 wamp 服务器 -Apache 2.4.2 -Mysql 5.5.24 -PHP 5.4.3

```
/* MySQL code */
DELIMITER $$
PROCEDURE `get_data`(IN var1 VARCHAR(45),IN var2 VARCHAR(45) )
BEGIN
    SELECT * 
    FROM data_table
    WHERE `data1` = var1 AND `data2` = var2;
END
/* End MySQL code */ 
```

```
<?php
if( !($stmt = $mysqli->prepare("CALL get_data(?,?)")) )
    die("Prepare failed: (" . $stmt->errno . ") " . $stmt->error);

$var1 = "some_data_1";
$var2 = "some_data_2";
if( $stmt->bind_param("ss", $var1, $var2) )
{
    if( $stmt->execute() )
    {
        echo "Execute one complete.";
    }
    else
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
}
else
    echo "Bind failed: (" . $stmt->errno . ") " . $stmt->error;

/* Current fix to clear stray results sent from the stored procedure */
$stmt->next_result();

$var2 = "some_data_555";
if( $stmt->bind_param("ss", $var1, $var2) )
{
    if( $stmt->execute() )
    {
        echo "Execute two complete.";
    }
    else
        echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
}
else
    echo "Bind failed: (" . $stmt->errno . ") " . $stmt->error;
?> 
```

代码显然是为了调试和stackoverflow而修改的。

正常查询的确切代码，IE`SELECT * FROM users`工作正常，直到你调用存储过程，IE`CALL get_data(?,?)`

# php - Facebook like 按钮忽略 URL 参数

> ID：16059918
> 
> 赞同：-4
> 
> 时间：2013-04-17T12:23:02.790
> 
> 标签：php, javascript, html

我正在尝试喜欢我的页面，但 url 参数被忽略

这是我的代码：

```
<style type="text/css">
.float-all {
    float: left;
    width: 82px;
    height: 30px;
    overflow: hidden;
    margin: 2px;
    padding: 4px 2px;
}
.post-btn-share {
    width: 100%;
    overflow: auto;
} 
```

```
 <link rel="canonical" href="http://mypage.com/view_photo.php" />
    </head>
 <div class="post-btn-share">
<div class="addthis_toolbox addthis_default_style">
    <div class="float-all">
 <iframe src="http://www.facebook.com/plugins/like.php?href=http://mypage.com/view_photo.php?       img=32&user=1&xx=&send=true&layout=standard&width=300&show_faces=true&action=like&colorscheme=light&font&height=80" frameborder="0" style="border:none;" scrolling="no" width="320" height="240"></iframe>
    <div class="float-all">

    </div>
    <div class="float-all">

    </div>
</div> 
```

和 view_photo 代码

```
<?php 
    session_start();

?>

<div class="dev-ajuste">
<?php 

    require_once('script/require_raiz.php');
    $login = new login();
    $login->log_isset();
    //$login->info_user();
    $janela = new Janelas('script/system/config.ini','perfil');
    $janela->info_visualiza_foto($_GET['img'],$_GET['user']);
?>
</div>
 <!--=======Cabeçalho e chamadas de scripts do documento=======-->
<?php include_once("head.php"); ?>
 <!--=======Barra de navegação=======-->
<?php include_once("navbar.php"); ?>
<div id="janela" class="perfil"></div>
<div id="info"   class="<?php echo $_GET['user'];?>"></div>

 <!--=======Header=======-->
<?php include_once('box_foto.php'); ?>

    <!--=======Propaganda=======-->
    <?php include('addsense.php');?>

    <!--=======Área dos posts=======-->
     <?php include('post_area.php');?>

 <!--=======Rodapé do documento=======-->
<?php include_once("footer.php"); ?>
 <!--=======Seguranca de Login=======--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:54:33.433

（将评论链变成潜在答案）

我真的不认为你已经明白了。查看 iframe 中使用的 URL：

```
http://www.facebook.com/plugins/like.php?href=http://mysite.com/view_photo.php?img=34&user=1&xx=&;send=true&;layout=standard&;width=300&;show_faces=true&;action=like&;colorscheme=light&;font&;height=80 
```

在 URL 中，发送到资源的参数从`?`字符开始。但是你有两个`?`角色。参数是从第一个还是第二个开始？解析器无法知道。当`&`遇到 a 时，是分隔外部 URL 的参数（第一个`?`），还是一个包含在内部 URL 中的参数（第二个`?`）？解析器无法知道。

格式需要是这样的：

```
http://someresource?parameter1&parameter2&etc 
```

如果其中一个参数也是具有*自己*参数的 URL，则需要对整个参数进行 URL 编码，以免混淆用作参数的 URL 的其余部分。任何解析器都必须能够清楚地识别内部 URL 的内容和外部 URL 的内容。当它需要使用它时，它会为你对内部进行 URL 解码。

PHP 提供[了一个函数](http://php.net/manual/en/function.urlencode.php)来做到这一点。 [JavaScript 也是如此](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。你可以使用任何你想要的。您所要做的就是将要编码的字符串传递给它（这将是您的内部 URL，带有任何需要转到该 URL 的参数），它将返回编码的字符串（这将是发送到您的外部 URL 的参数）。

（另外，为什么你有所有这些分号？你没有用分号分隔 URL 参数。我不确定你从哪里得到这个想法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:34:07.410

转到[此页面](https://developers.facebook.com/docs/guides/web/)并检查下图中显示的“赞”按钮的链接：

![在此处输入图像描述](https://i.stack.imgur.com/Gka9E.png)

您右键单击并检查它。你看：

![在此处输入图像描述](https://i.stack.imgur.com/8UX9F.png)

您会看到它是[urlencode'd](http://php.net/manual/en/function.urlencode.php)。大卫很好地解释了这个推理:)

# ios - 如何在应用程序处于后台时检查当前设备时间

> ID：16059926
> 
> 赞同：-1
> 
> 时间：2013-04-17T12:23:18.427
> 
> 标签：ios, objective-c, uilocalnotification

我正在开发一个应用程序，该应用程序需要在应用程序处于后台时每分钟检查一次时间。我想将当前时间与特定时间匹配，如果时间匹配，则应用程序应显示警报（当应用程序处于后台时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:40:18.073

您设置了本地通知，即使应用程序在进入后台后死机，也会弹出本地通知。在您的示例中，它将告诉用户“是时候服用您的药物了”，如果用户选择“查看详细信息”按钮，您的应用程序将从 iOS 中触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:58:24.627

如何做到这一点的另一种方法是欺骗 ios（Apple :-)）

如果您执行某些特定任务（例如位置），Apple 允许您留在后台而不会被杀死

所以你可以做的是在 info.plist 添加“必需的背景模式”和值位置

信息在这里[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

比设置一个 CLLocationManager 来扫描位置并遵守 Apple 的建议并使其不太准确（节省电池寿命）

设置一个计时器并在计时器例程中检查位置（这可以节省应用程序的生命），然后做任何你想做的事情......

这也应该有效。

# javascript - 'If' 语句改变函数

> ID：16059927
> 
> 赞同：0
> 
> 时间：2013-04-17T12:23:31.437
> 
> 标签：javascript, variables, if-statement

我正在尝试添加一个 If 语句来更改一个特定点的 a 函数的参数，但是无论 if 语句如何，代码似乎都将第一个函数应用于所有点。

下面的代码创建了一个新的标记，然后根据 if 语句执行该函数——至少应该如此！

我究竟做错了什么？

```
function createMarker(point, name, file_name) {

var blueIcon = new GIcon(G_DEFAULT_ICON);
            blueIcon.image = "images/mark22.png";
            blueIcon.iconSize = new GSize(32, 32);

            markerOptions = { icon: blueIcon };
            var marker = new GMarker(point, markerOptions);

GEvent.addListener(marker, "click", function () {

    if (marker.name = 'chester') {
                marker.openInfoWindowHtml("<a class='text1' href='http://www.merseyrail.org/plan-your-journey/stations/" + file_name + ".aspx' target='_parent'>" + name + " Station</a><br /><font size='2' face='Arial'><i>Click the station name to view more information.</i></font>");
                }

else {
                marker.openInfoWindowHtml("<img src='images/merseyraillogosmall.png'/><br /><a class='text1' href='http://www.merseyrail.org/plan-your-journey/stations/" + file_name + ".aspx' target='_parent'>" + name + " Station</a><br /><font size='2' face='Arial'><i>Click the station name to view more information.</i></font>");
                }
            });

return marker;
        } 
```

然后再往下：

```
var point20 = new GLatLng(53.1968, -2.88018);
        map.addOverlay(createMarker(point20, 'Chester')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:24:44.627

一定是

```
if (marker.name == 'chester') 
```

不是

```
if (marker.name = 'chester') 
```

# vb.net - 引用不明确（取决于项目位置）

> ID：16059939
> 
> 赞同：0
> 
> 时间：2013-04-17T12:23:51.613
> 
> 标签：vb.net, directory, ambiguous

我有一个非常不寻常的问题。我的 Visual Basic 项目文件位于：

```
C:\VB.Net\Projects 
```

当他们在这里时，我有以下问题：

![模棱两可的错误](https://i.stack.imgur.com/0ZWhZ.png)

为了尝试开始使用引用，我将项目文件夹复制/粘贴到我的桌面，并且所有引用都已修复......所以我尝试删除我的 C:\drive 中的项目以重新复制它 - 但那没有不工作...

我尝试清理、重建、设置完整的命名空间（例如：AutoDesk.AutoCAD.Interop.AcadApplication），但都没有奏效。

由于目录更改，什么可能导致它变得明确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:48:57.327

这是我的一个菜鸟错误。这是我的旧参考在错误期间的样子：

![在此处输入图像描述](https://i.stack.imgur.com/6o5Dh.png)

我通过删除第一个 AutoCAD 参考来修复它。

# php - 使用 Chrome 和 Firefox 时在 Mysql 中更新 IP 地址导致不同

> ID：16059941
> 
> 赞同：2
> 
> 时间：2013-04-17T12:23:54.763
> 
> 标签：php, mysql, browser, ip-address

这个问题是指[php mysql更新IP地址无法正常工作](https://stackoverflow.com/questions/16017692/php-mysql-updating-ip-address-cannot-work-right) 在这里发帖希望得到答案。以下代码更新数据库中的访问者 IP 地址。但是当使用 Chrome 进行测试时，结果是有线的。

## 输出是

string(119) "更新 ddns SET LastIP=1886947462, LastUpdate=now() WHERE ddns_name='kc001'

string(112) "选择 INET_NTOA(LastIP) 作为 IPADDR FROM ddns where ddns_name='kc001' 112.120.136.134

* * *

但是当检查Mysql时，数据库中的LastIP实际上是2149463110。第二个查询也给出了我正确的IP地址。但是在其他文件中查询时，得到的IP是128.30.52.70

使用 Firefox 或 Safari 时，数据库中的 LastIp 将为 1886947462，正确。

有什么解释吗？

```
<?php
$dbh = mysql_connect("..mydatabase info..") or die("I cannot connect to the database");
mysql_select_db("glddns");
function getIP(){

    //Test if it is a shared client
    if (!empty($_SERVER['HTTP_CLIENT_IP'])){
        $ip_tmp=$_SERVER['HTTP_CLIENT_IP'];
    //Is it a proxy address
    }elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
        $ip_tmp=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }else{
        $ip_tmp=$_SERVER['REMOTE_ADDR'];
    }
    //The value of $ip at this point would look something like: "192.0.34.166"
    $ip = ip2long($ip_tmp);
    return $ip;
}
function getddns(){
        $var = explode(".",$_SERVER["SERVER_NAME"]);
        return $var[0];
}
$ipaddr = getIP();
$ddns = $_GET["ddns"];

$sql = sprintf("UPDATE ddns SET LastIP=%u, LastUpdate=now() WHERE ddns_name='%s'",$ipaddr,$ddns);
var_dump($sql);
$result = mysql_query($sql) or die("Query failed:".mysql_error());
if ($result && mysql_affected_rows()==1)
    echo "Update Done";
else
    echo "Update Failed";

$sql= sprintf("select INET_NTOA(LastIP) as IPADDR FROM ddns where ddns_name='%s'",$ddns);

echo "<br><br>";
var_dump($sql);
$result = mysql_query($sql) or die("Query failed:".mysql_error());
while($line = mysql_fetch_assoc($result)){
     echo "<br>". $line["IPADDR"];
}
mysql_free_result($result);
mysql_close($dbh);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:29:32.250

检查您的任一浏览器是否设置为使用（不同的）代理服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T07:31:32.690

这是一件非常奇怪的事情。它以前发生在我的chrome上。现在问题不存在了。谢谢。

# android - 使用 ActionbarSherlock 选项卡时如何增加选项卡 7.0 中的字体大小？

> ID：16059942
> 
> 赞同：0
> 
> 时间：2013-04-17T12:23:55.293
> 
> 标签：android, actionbarsherlock

使用 ActionbarSherlock 时，选项卡内的文本在平板电脑 7.0 中显得非常小。我在 styles.xml 中尝试了以下所有解决方案，但完全没有效果。选项卡保持不变：

```
 <style name="Theme.MyApp.Default" parent="@style/Theme.Sherlock.Light">
   <item name="actionBarSize">48dip</item>
   <item name="android:actionBarSize">48dip</item> 
   <item name="actionBarStyle">@style/MyApp.SherlockActionBarStyle</item>
   <item name="android:actionBarStyle">@style/MyApp.SherlockActionBarStyle</item>
 </style>

 <style name="MyApp.SherlockActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
   <item name="titleTextStyle">@style/MyApp.ActionBar.TextAppearance</item>
 </style>

 <style name="MyApp.ActionBar.TextAppearance" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Menu">
   <item name="android:textSize">30sp</item>
 </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:15:52.347

```
<style name="Theme.Styled" parent="Theme.Sherlock">
    <item name="actionBarTabTextStyle">@style/Styled.TabText</item>
    <item name="android:actionBarTabTextStyle">@style/Styled.TabText</item>
</style>

<style name="Styled.TabText" parent="Widget.Sherlock.ActionBar.TabText">
    <item name="android:textSize">18sp</item>
</style> 
```

# php - 在 GCM 中未收到推送通知

> ID：16059943
> 
> 赞同：2
> 
> 时间：2013-04-17T12:24:06.327
> 
> 标签：php, android, push-notification, google-cloud-messaging

我在我的应用程序中使用 Gcm 服务推送通知。

我正在使用这个[链接](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

注册客户端后无法接收推送通知。

帮助从服务器接收推送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:43:40.830

您需要同时检查 Sender id 和 API id。之后，您必须检查 android Manifest 文件，如下所示

```
<permission
    android:name="your packagename.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="your package name.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"        />
<receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>

            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="your package name" />
        </intent-filter>
</receiver>

<service android:name="your package name.GCMIntentService" /> 
```

# php - 使用 URL 作为 php 的条件

> ID：16059945
> 
> 赞同：-2
> 
> 时间：2013-04-17T12:24:07.070
> 
> 标签：php, url, if-statement, conditional-statements

我想根据我的网站的网址在我的网站上显示一个元素。目前我有以下代码：

```
<?php
   if(URL matches)
     {
     echo $something;
     }
   else
     {
     echo $otherthing;
     }
?> 
```

我想知道如何在 if 条件下获取 URL，因为我只需要一个 php 存档即可在许多不同的页面上显示

编辑：Rixhers Ajazi 提供的解决方案对我不起作用，当我使用你的代码时，我的两个页面都得到相同的 URI，所以 if 语句总是在 else 一边，有什么方法可以得到你可以得到的确切字符串在浏览器上查看 PHP 代码

[http://img339.imageshack.us/img339/5774/sinttulocbe.png](http://img339.imageshack.us/img339/5774/sinttulocbe.png)

这是它改变的地方，但是我在两边得到的 URL 是相等的，我有点困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:27:13.353

要获取 URL，请使用：

```
$url = http://$_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:26:58.977

对 URL 使用以下语法

```
http://mysite.com/index.php?var1=val&var2=val 
```

现在您可以在变量中获取变量的值`$_GET`并使用`if condition`

```
if($_GET['var1']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:28:21.003

您可以通过使用 $_SERVER 方法来做到这一点，如下所示：

$url = $_SERVER['PHP_SELF']; 或 $url = $_SERVER['SERVER_NAME'];

在这里阅读[更多内容](http://php.net/manual/en/reserved.variables.server.php)

```
if($url == 'WHATEVER')
     {
     echo $something;
     }
   else
     {
     echo $otherthing;
     }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:26:26.807

您可以使用不同的变量，例如`$_SERVER["PHP_SELF"]`或`$_SERVER["REQUEST_URI"]`。第一个包含服务器名称之后的路径，直到`?`URL 中的可能（不包括 GET 参数的部分）。第二个也包含 GET 参数。您还可以使用`$_SERVER["HTTP_HOST"]`. 因此，通过连接所有这些，您可以重建完整的 URL（如果您真的需要它，也许脚本名称就足够了）。

# haskell - 多参数类型同义词实例

> ID：16059948
> 
> 赞同：10
> 
> 时间：2013-04-17T12:24:17.203
> 
> 标签：haskell, typeclass

我试图弄清楚是否可以（以及如何）为多参数类型同义词定义类实例。

例如：

```
{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances #-}

type F a b = a -> b
data DF a b = DF (a -> b)

class C c a b where
    doc :: c a b -> a -> b 
```

它适用于多参数类型实例：

```
instance C DF a b where
    doc (DF f) x = f x 
```

但它不适用于类型同义词：

```
-- ERROR:
--
-- Type synonym `F' should have 2 arguments, but has been given none
-- In the instance declaration for `C F a b'
--
instance C F a b where
    doc f x = f x 
```

是否可以为 定义类型类实例`F`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T12:37:37.580

这是不可能的。类型同义词通常必须完全应用才能使用它们，尤其是[作为类型类参数](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-class-extensions.html#flexible-instance-head)。

请注意，如果您可以对类型同义词进行足够的 eta-reduce，则一个实例是可能的；它是必须完全应用的同义词，而不是它所指的类型。所以这会起作用：

```
type F = (->)

instance C F a b where
    doc f x = f x 
```

有[一个`LiberalTypeSynonyms`扩展放宽了一些](http://www.haskell.org/ghc/docs/latest/html/users_guide/data-type-extensions.html#type-synonyms)关于扩展类型同义词的规则，但它在这里没有帮助——它只允许你做一些事情，比如将一个部分应用的类型同义词作为另一个类型同义词的类型参数。一切都必须完全扩展才能使用。

要了解为什么需要此限制的一个原因，请考虑以下类型同义词：

```
type Flip f a b = f b a 
```

以及以下实例：

```
instance Functor (Flip Either a) where
    fmap _ (Right x) = Right x
    fmap f (Left x) = Left (f x) 
```

`Functor (Either a)`回想一下，除了镜像之外，还有一个实例做同样的事情。两者都是明智的`Functor`例子。

请记住，与`newtype`, 类型同义词被认为与它们所指的类型相同，表达式的值应该`fmap not (Right True :: Either Bool Bool)`是什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T12:38:07.720

必须完全应用类型同义词才能为它们定义实例。正如人们所期望的那样，这种`F`不是`* -> * -> *`，而是在提供另外两个类型参数之前无效。尝试

```
type F = (->) 
```

反而。

# sql-server - 对多行求和并在下一列显示总和值

> ID：16059955
> 
> 赞同：0
> 
> 时间：2013-04-17T12:24:29.303
> 
> 标签：sql-server, sql-server-2008

我喜欢做以下操作：

```
Sale ID     Q1   Q2              Total           Net Amount
530095243   0    12,600.00       12,600.00       17,657.17 
530095243   0    5,057.00        5,057.00        17,657.17 
530095243   0    (51,857.30)     (51,857.30)     17,657.17 
530095243   0    (51,567.60)     (51,567.60)     17,657.17 
530095243   0    51,567.60       51,567.60       17,657.17 
530095243   0    51,857.47       51,857.47       17,657.17 
```

净额列的总和......在我的情况下，我喜欢在最后一行显示总和，如下所示：

```
Sale ID     Q1   Q2              Total           Net Amount
530095243   0    12,600.00       12,600.00       0
530095243   0    5,057.00        5,057.00        0 
530095243   0    (51,857.30)     (51,857.30)     0 
530095243   0    (51,567.60)     (51,567.60)     0
530095243   0    51,567.60       51,567.60       0 
530095243   0    51,857.47       51,857.47       17,657.17 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:40:09.730

**更新：**

```
DECLARE @temp TABLE
(
        Sale_ID BIGINT 
      , Q1 INT              
      , Q2 DECIMAL(10,2)     
      , Total DECIMAL(10,2)
      , Net_Amount DECIMAL(10,2)
)

INSERT INTO @temp (Sale_ID, Q1, Q2, Total, Net_Amount)
VALUES 
    (530095243,   0,    12600.00,   12600.00, 17657.17), 
    (530095243,   0,    5057.00,    5057.00,  17657.17), 
    (530095243,   0,    51857.30,   51857.30, 17657.17), 
    (530095243,   0,    51567.60,   51567.60, 17657.17), 
    (530095243,   0,    51567.60,   51567.60, 17657.17), 
    (530095243,   0,    51857.47,   51857.47, 17657.17),
    (530095244,   0,    12600.00,   12600.00, 17657.17), 
    (530095244,   0,    5057.00,    5057.00,  17657.17), 
    (530095244,   0,    51857.47,   51857.47, 17657.17)  

DECLARE @new_table TABLE
(
        Sale_ID BIGINT 
      , Q1 INT              
      , Q2 DECIMAL(10,2)     
      , Total DECIMAL(10,2)
      , Net_Amount DECIMAL(10,2)
)

;WITH t AS 
(
    SELECT  
          Sale_ID
        , Q1
        , Q2
        , Total
        , Net_Amount
        , RNum = ROW_NUMBER() OVER (PARTITION BY Sale_ID ORDER BY Sale_ID, Q1, Q2, Total, Net_Amount)
    FROM @temp
),
mx AS 
(
    SELECT 
          LRow = MAX(RNum)
        , Sale_ID
    FROM t
    GROUP BY Sale_ID
)
INSERT INTO @new_table (Sale_ID, Q1, Q2, Total, Net_Amount)
SELECT  t.Sale_ID
    ,   t.Q1
    ,   t.Q2
    ,   t.Total
    ,   Net_Amount = CASE WHEN mx.LRow = t.RNum THEN t.Net_Amount ELSE 0 END
FROM t t
JOIN mx ON t.Sale_ID = mx.Sale_ID

SELECT * 
FROM @new_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:48:09.347

你为什么要这样做！我认为这样做没有任何意义。

我想更新您，您应该只将原始数据存储到数据库中，任何操作数据都不好存储，例如总数、百分比、平均值等。

您可以使用存储的原始数据在应用程序端轻松填充此类操作数据。

我想在这里请求请删除这种操作字段并使您的记录和设置更加动态。

我希望你清楚这一点。

谢谢...！

# mercurial - Mercurial：TortoiseHg 配置在合并时始终提示手动解析所有文件

> ID：16059962
> 
> 赞同：2
> 
> 时间：2013-04-17T12:24:50.717
> 
> 标签：mercurial, merge, tortoisehg

我们通过 TortoiseHg 将 Mercurial 与“工作台”一起使用。

在合并分支时，我们经常发现默认的（自动？）更新选择不是我们想要的。我们想将该工具配置为始终提示任何合并操作。

每个分支都有一些我们需要在两者之间保持最新的核心文件，还有一些需要保留的特定于分支的文件。

如果我们更新一个分支中的核心文件，我们希望进行合并以获取另一个分支中的最新核心文件。然而，默认的 TortoiseHg 会进行我们不想要的自动更新。

例子：

1) 分支“1”包含一个文件“1.xls”，分支“2”有一个等效的“2.xls”，它们以二进制形式存储。将“1”合并到基于“2”的工作目录会导致删除“2.xls”并添加“1.xls”。

2) 分支“1”包含一个更新的文件“not_core.c”，它在分支“2”中有一个等效的“not_core.c”。将“1”合并到基于“2”的工作目录会导致“2”中的“not-core.c”自动更新。

3) 分支“1”包含更新的文件“core1.c”和“core2.c”。将“1”合并到基于“2”的工作目录会导致两个文件的自动更新，当我们希望提示允许我们选择是否更新这些核心文件时。也许我们现在只想要'core1.c'。

我已经看到在 mercurial.ini 中设置 'mergetool.premerge = false' 的参考，并尝试了一些变体但没有成功。

理想的设置是为每个不同的文件触发图形手动解析。

任何人都可以提供支持所描述功能的配置吗？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:35:32.673

三种描述的案例在您的案例中具有不同的性质，您必须针对不同的案例使用不同的技巧

案例 2 和 3（牧场文件中的非冲突更改）*可以*通过禁用 TortoseHG 中的自动合并来覆盖（TBT！）（主菜单 - `File`- `Settings`- `Global setting`- `TortoiseHG`- “自动解决合并”：False /default - True/）

对于案例 1（和其他非内容更改 - 重命名、更改属性）情况更糟，自动合并不起作用：合并从一个分支到另一个分支的更改的镜像历史记录，即如果在共同的父级中你只有 2.xls，它已删除|在源分支中重命名为 1.xls 此更改将反映在目标中。

您可以尝试在此类合并中使用不同的“内部”合并工具（当您更喜欢仅从一个分支更改时 - “虚拟合并”） - 内部：本地和内部：其他。但是 - 它们仅适用于更改的内容（再次！）

也许在从 TipsandTricks 部分[进行合并时保留“我的”或“他们的”文件](http://mercurial.selenic.com/wiki/TipsAndTricks#Keep_.22My.22_or_.22Their.22_files_when_doing_a_merge)会有所帮助（您可以在 [aliases] 中将提到的 merge-revert-resolve 加入到新命令中，并在需要时使用它而不是普通合并）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:43:53.333

您可以使用 的`merge-patterns`和`merge-tools`部分进行配置`hgrc`。这种设置允许我强制在我的测试中使用 kdiff3：

```
[merge-patterns]
** = noautomerge

[merge-tools]
noautomerge.executable = kdiff3
noautomerge.args = $base $local $other -o $output --qall
noautomerge.priority = 1
noautomerge.premerge = False 
```

这将关闭 Mercurial 所做的自动预合并并改为启动 kdiff3。

它将对所有文件执行此操作，但如果可能的话，您最好将该`merge-patterns`部分修改为更具体一点。

此外，请注意您的合并工具可能会自动解决合并本身的问题，如果发生这种情况，请查找命令行选项以关闭该功能。

# java - 如何抓取或解析 Iframe 内容以获取特定值

> ID：16059963
> 
> 赞同：0
> 
> 时间：2013-04-17T12:24:55.483
> 
> 标签：java, javascript, web-applications, web, screen-scraping

`http:\\abc.com?=blahblahiframelink`我从第三方休息服务获得 iframe 链接。我想从该 iframe 的内容中提取多个值。

这是简化的html。请理解，真正的 html 要复杂得多，有多个嵌套的 div 和表

```
.css stuff

<html>
<div>
 <p> NEED THIS INFO </p> 
   ....
   blah blah

  <img src="NEED THIS INFO" > </img> 
</div> 
</html> 
```

我在上面的代码中标记`"NEED THIS INFO"`了我想要提取的内容，以证明我想要属性值以及元素值。

我正在考虑首先将 Iframe 内容存储在我的休息服务中的 java 字符串中，然后使用疯狂的正则表达式来获取我想要的信息。

在我尝试之前，我想检查是否有更有效的方法来做到这一点。是否有一些 html 解析器可以用来获取结构化格式的内容。

如果没有，请告诉我如何将 Iframe 存储在 Java 字符串中。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T16:31:06.820

对于来这里的人来说，有几种方法可以做到这一点。但是，最有效的方法是将 iframe 写入字符串，例如使用 HttpURLConnection 或 HttpsURLConnection （conn 是连接）。iframe 可以从它们的链接中获取。

BufferedReader br=new BufferedReader(new InputStreamReader(conn.getInputStream())); 字符串行=""; html="";

```
 while((line=br.readLine())!=null)
        {
            html=html+line+"\n";
        }
        br.close(); 
```

最有效的当然是限制像 Mechanize 这样的中间人的数量和 URL 调用的数量；等等

可以使用 java 强大的 .net 或 .nio 来做到这一点，只需创建一个 HttpURLConnection 或 javax.net 的 HttpsURLClient 来获取您的页面，即 cookie；等等。从那里答案展开。

要在 Java 中解析页面，您可以使用 A 和 B 是我知道的更好的选择

A. 创建一个 XML 文档并运行一个 xpath。我时间有限，所以我为你发布了一个资源。你只需要一个字符串，你就可以做到这一点。如果您不是在寻找特定的东西，这符合您的需求。获得页面后，即可获得所需的一切。

[http://www.mkyong.com/tutorials/java-xml-tutorials/](http://www.mkyong.com/tutorials/java-xml-tutorials/)

B. 正则表达式。在网上找一个好的解决方案我仅限于两个链接。此外，MyRegexTester 是学习和测试 Regex 的一个很好的免费资源，它不像您想象的那么令人生畏，尤其是在 java 中。使用这些通配符并向前看。

C. 更好的是，使用 Jsoup 之类的解析器，但如果您不受资源限制，但将 xml ini- 变量设置为输出 xml，但情况似乎并非如此。JSoup 为您进行 xml 解析，并允许您使用 xpath 来获取结果。

[D. 在 Python ( http://www.pythonforbeginners.com/cheatsheet/python-mechanize-cheat-sheet/](http://www.pythonforbeginners.com/cheatsheet/python-mechanize-cheat-sheet/) )、Perl 或 Ruby中使用 HttpUnit 或无 gui 浏览器，例如 Mechanize 。我最喜欢的是 Python，因为有更多的现成模块，速度也差不多。Python 也有一个 Jsoup 插件

# r - 使用 xts/zoo R 在一天中的一个小时内绘制值

> ID：16059965
> 
> 赞同：3
> 
> 时间：2013-04-17T12:24:59.690
> 
> 标签：r, time-series, xts, zoo

我确实有一个看起来像这样的时间序列（分钟值）：

```
 "timestamp", value 
    "2012-04-09 05:03:00",2
    "2012-04-09 05:04:00",4
    "2012-04-09 05:05:00",5
    "2012-04-09 05:06:00",0
    "2012-04-09 05:07:00",0
    "2012-04-09 05:08:00",3
    "2012-04-09 05:09:00",0
    "2012-04-09 05:10:00",1 
```

有没有一种简单的方法可以在一天中的一个小时内绘制这些值：X 轴从 1 到 24 小时（或 0 和 23）。所以 - 在第 5 小时等 5:00 和 5:59 之间的所有值。它不依赖于哪个日期，我只是对一天中的时间感兴趣。谢谢！

附加问题：我可以将其绘制为箱线图吗？现在它是`plot(df$hh,df$coredata.._data..)`动物园格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:29:33.113

读取创建动物园对象的数据`z`，然后创建`hour`变量并绘图：

```
library(zoo)

# read in data
Lines <- ' "timestamp", value 
    "2012-04-09 05:03:00",2
    "2012-04-09 05:04:00",4
    "2012-04-09 05:05:00",5
    "2012-04-09 05:06:00",0
    "2012-04-09 05:07:00",0
    "2012-04-09 05:08:00",3
    "2012-04-09 05:09:00",0
    "2012-04-09 05:10:00",1
'
z <- read.zoo(text = Lines, header = TRUE, sep = ",", tz = "")

# plot
hour <- as.POSIXlt(time(z))$hour
plot(hour, z) 
```

![截屏](https://i.stack.imgur.com/KLRti.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T13:21:08.313

使用`xts`包，您可以使用`.indexhour`通用函数将 xts 对象的索引格式化为小时。

例如，我读取数据，

```
dat <- read.zoo(text='timestamp, value 
    "2012-04-09 05:03:00",2
    "2012-04-09 05:04:00",4
    "2012-04-09 05:05:00",5
    "2012-04-09 05:06:00",0
    "2012-04-09 05:07:00",0
    "2012-04-09 05:08:00",3
    "2012-04-09 05:09:00",0
    "2012-04-09 05:10:00",1',header=TRUE,tz='',index=0:1,sep=',')

transform(dat, hh = .indexhour(dat))
                    coredata.._data.. hh
2012-04-09 05:03:00                 2  5
2012-04-09 05:04:00                 4  5
2012-04-09 05:05:00                 5  5
2012-04-09 05:06:00                 0  5
2012-04-09 05:07:00                 0  5
2012-04-09 05:08:00                 3  5
2012-04-09 05:09:00                 0  5
2012-04-09 05:10:00                 1  5 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T12:38:36.097

您可以通过将这些时间转换为`POSIXlt`类，然后`"hours"`从结果列表中为每个类提取组件，使用 sapply 返回一个向量来获得小时向量。然后，您可以将其添加到原始数据框中：

```
df <- read.table( text = "timestamp, value 
    2012-04-09 05:03:00,2
    2012-04-09 05:04:00,4
    2012-04-09 05:05:00,5
    2012-04-09 05:06:00,0
    2012-04-09 05:07:00,0
    2012-04-09 05:08:00,3
    2012-04-09 05:09:00,0
    2012-04-09 05:10:00,1" , h = T , sep = "," )

# Convert to POSIX class
df$timestamp <- as.POSIXlt(df$timestamp)

# Each entry in timestamp has some hidden attributes
attributes(df$timestamp[1])
$names
# [1] "sec"   "min"   "hour"  "mday"  "mon"   "year"  "wday"  "yday"  "isdst"

hours <- sapply( seq_len( nrow( df ) ) , function(x) df$timestamp[x]$hour )

df$hours <- hours

df
#               timestamp value hours
#   1 2012-04-09 05:03:00     2     5
#   2 2012-04-09 05:04:00     4     5
#   3 2012-04-09 05:05:00     5     5
#   4 2012-04-09 05:06:00     0     5
#   5 2012-04-09 05:07:00     0     5
#   6 2012-04-09 05:08:00     3     5
#   7 2012-04-09 05:09:00     0     5
#   8 2012-04-09 05:10:00     1     5 
```

# c# - 加速 C# 中大数据的循环

> ID：16059971
> 
> 赞同：0
> 
> 时间：2013-04-17T12:25:12.797
> 
> 标签：c#, loops

我有三个从零到 n 的嵌套循环。n 是一个很大的数，大约 12000th 这三个循环在 2DList 上工作。它实际上是一种弗洛伊德算法。在这些大数据上需要时间，你能告诉我如何改进它吗？谢谢（对不起我的英语:)）

```
 List<List<int>> distance = new List<List<int>>();

 ...

  for (int i = 0; i < n; i++)

        for (int v = 0; v < n; v++)

            for (int w = 0; w < n; w++)
            {
                if (distance[v][i] != int.MaxValue &&
                    distance[i][w] != int.MaxValue)
                {
                    int d = distance[v][i] + distance[i][w];
                    if (distance[v][w] > d)
                        distance[v][w] = d;
                }

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:32:48.233

在某些情况下，可以将if 语句的第一部分`distance[v][i] != int.MaxValue`移到迭代之外`w`以减少开销。但是，我不知道您的值多久出现一次 int.MaxValue

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:31:11.873

您无法更改弗洛伊德的算法，它的复杂性是固定的（并且它被证明是在具有负边权重的图中找到所有成对最短路径距离的一般问题的最有效解决方案）。

您只能通过使问题更具体或数据集更小来改善运行时间。对于一个通用的解决方案，你会坚持你所拥有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:30:29.207

通常我会建议使用 Parallel Linq - 例如[Ray Tracer](http://blogs.msdn.com/b/pfxteam/archive/2008/06/04/8573863.aspx?Redirected=true)示例，但是这假设您正在操作的项目是独立的。在您的示例中，您正在使用上一次迭代的结果，在当前一次迭代中，无法并行化。

由于您的代码非常简单并且没有任何开销，因此您无法做任何事情来加快速度。如前所述，您可以将列表切换为数组。您可能还想在目标机器上比较 Double 算术和 Integer 算术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:38:13.140

在简单地查看您的代码之后，您似乎正在走向溢出，因为条件检查将无法阻止它。

在您的代码中，以下条件不会增加任何值，因为我们可以让 distance[v][i] < Int.MaxValue & distance[i][w] < Int.MaxValue 但 distance[v][i] + distance[i ][w] > 整数最大值。

```
if (distance[v][i] != int.MaxValue && distance[i][w] != int.MaxValue) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:36:33.187

正如其他人所提到的，复杂性是固定的，因此您在那里没有太多选择。但是，您可以使用

*   如果可能，使用数组而不是列表。
*   使用带有指针语义的“不安全”块，这应该会减少访问数组数据所需的时间。
*   检查您是否可以并行化您的算法。在您的情况下，您可以使用数据的多个副本（多个副本以摆脱同步的需要）并让多个线程在其上工作（例如，通过将外循环的范围分成一些子范围（1-1000、1001-2000例如）。

# arrays - perl 中的 "$_ & 1" 是如何工作的

> ID：16059972
> 
> 赞同：9
> 
> 时间：2013-04-17T12:25:15.300
> 
> 标签：arrays, perl

我是 perl 初学者，我正在阅读`grep`过滤列表的功能。我遇到了以下程序。

```
#!/usr/bin/perl

use strict;
use warnings;

# initialize an array
my @array = qw(3 4 5 6 7 8 9);

# first syntax form:
my @subArray = grep { $_ & 1 } @array; 
```

该语句`my @subArray = grep { $_ & 1 } @array;`返回奇数 `@array`。我不明白表达式（`$_ & 1`）是如何工作的。我在谷歌搜索但没有找到任何有用的链接。

*   那是某种特殊的运算符吗？

*   **该EXPR**是否还有其他变体？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:30:34.230

`$_`是保存当前测试值的变量，`&`是二元 AND 运算符，并且`1`只是第一个。此表达式通过逻辑 AND将两者`$_`的所有位组合在一起。`1`因此，如果值为奇数，则返回 1，如果值为偶数，则返回 0。

例如，假设 $_ 是 123 那么它的二进制表示是`1111011`. 十进制数 1 将是`00000001`，因此通过 AND 组合所有位，您会得到

```
123 = 1111011
  1 = 0000001
      - AND -
      0000001 = 1 
```

另一个例子`200 & 100`

```
200 = 11001000
100 = 01100100
      - AND --
      01000000 = 64 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T12:42:32.507

正如许多人指出的那样，`&`是按位与运算符。这意味着将比较的两个数字转换为位并进行比较：

例如，`3 & 1`returns `1`，它在 grep 中的计算结果为 true：

```
Num | Bits
----+-----
  3 | 1 1
& 1 | 0 1
----+-----
  1 | 0 1   <- result of 'and'ing each bit column 
```

同样，`4 & 1`returns`0`为 false：

```
Num | Bits
----+-------
  4 | 1 0 0
& 1 | 0 0 1
----+-------
  0 | 0 0 0  <- all zeros because no column contains 1 & 1 
```

* * *

也就是说，过滤奇数的另一种方法是`mod`使用 2 的数字：

```
my @odd = grep { $_ % 2 } 1 .. 7;    # 1, 3, 5, 7 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T12:30:23.567

```
grep{ $_ & 1} 
```

将遍历数组的每个元素并与 1 进行逐位匹配这意味着 grep 将匹配任何具有 1 作为最后（lsb）位的元素。因为只有奇数有一个 1 作为 lsb 这只会返回奇数

```
&  is the bitwise AND 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:30:15.940

`$_`是当前表达式。在这种情况下，每个数组元素。

`&`是二元 AND 运算符。

因此，简而言之，`grep`将匹配任何奇数的数组元素。

[perldoc](http://perldoc.perl.org/functions/grep.html)中记录了`$_`with的使用。的含义也在[perldoc](http://perldoc.perl.org/perlop.html#Bitwise-And)中。`grep``&`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T12:32:16.717

`$_`是由 grep 函数设置的变量。如果没有另外指定，大多数 perl 函数都会操作 $_ 。`Grep`为@array 的每个元素调用定义的匿名子（即`{ $_ & 1 }`）并按位生成`&`. 如果结果为真值，则将其添加到结果数组中。

# asp.net - 如何让 default.aspx 正常工作

> ID：16059974
> 
> 赞同：1
> 
> 时间：2013-04-17T12:25:25.363
> 
> 标签：asp.net

我的 ISP 需要我的网站的 default.aspx 页面。他们说重命名index.aspx。

问题是默认是关键字。如果我在 index.aspx.cs 文件中将索引重命名为默认值，则会给出默认关键字错误：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace china
{
    public partial class default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

如何绕过它。任何想法。

敬茶

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:28:20.563

另一种方法是将文件重命名为`Default.aspx`, **Uppercase`D`**，这将消除错误，因为`Default`在 C# 中与默认值不同**（区分大小写）**并且也适用于文件系统。*（因为 Windows 上的文件系统不区分大小写）*

否则**只重命名文件名，而不是**代码中的类名。一种方法是在文件资源管理器上重命名，但请记住在 ASPX 页面的 CodeBehind 属性中正确指定文件名。

# php - 无法连接到“ssl://gateway.sandbox.push.apple.com:2195”

> ID：16059976
> 
> 赞同：8
> 
> 时间：2013-04-17T12:25:41.580
> 
> 标签：php, apache, openssl, apple-push-notifications

我成功地在我的 macbook air 中运行了 APNS 代码，但事实证明我无法在我的另一台计算机上运行它：

我检查了这些是否相同：1\. .pem 文件（具体而言） 2\. 程序

电脑不能工作的有：

**Windows 7,XAMPP,OpenSSL 支持,无防火墙**

和

**EC2 Linux 服务器开启了 2195 和 2196**

导致我在 php 代码中出现此错误的其他问题可能是什么？

```
Unable to connect to 'ssl://gateway.sandbox.push.apple.com:2195' 
```

我知道没有打开 SSL 可能是原因，但我检查了 phpInfo()，它应该是正确的。

```
openssl 

OpenSSL support enabled 
OpenSSL Library Version OpenSSL 1.0.1c 10 May 2012 
OpenSSL Header Version  OpenSSL 0.9.8x 
```

我在 EC2 服务器上尝试了 telnet，它给出了：

```
telnet gateway.push.apple.com 2195
Trying 17.149.36.239...
Connected to gateway.push-apple.com.akadns.net.
Escape character is '^]'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T09:28:51.307

在**MAC**的情况下，（对我来说，内置服务器使用终端工作正常，但不能通过浏览器工作，所以我安装了 MAMP。）

1.转到---> **/Library/WebServer/Documents** /----复制**php**和**ckdev。[pem](http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1)**文件在这里。

2 转到**终端**--> **$open /private/etc-->转到--->apache2>originals>httpd.config 文件--> **"#LoadModule php5_module libexec/apache2/libphp5.so"**，删除" **#** "..（也许，您还必须更改权限..！）

然后转到浏览器并检查 - > localhost/yourPhpFile.php

在**Windows 系统**的情况下，

**1.安装**WAMP ，

2.转到**php.ini**文件--->搜索此“ **;extension=php_openssl.dll** ”行并删除分号“ **;** ”。

3.从右下角点击 WAMP 图标转到**PHP>PHP Extensions>select php_openssl** ..

就是这样..希望这可以帮助更多的寻求者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:27:37.967

1.  如果您收到类似“无法找到套接字传输“ssl”的错误 - 您在配置 PHP 时是否忘记启用它？” 然后进行下一步

2.  如果 php 没有启用 ssl，则转到 php.ini 并将其更改为 ";extension=php_openssl.dll" "extension=php_openssl.dll"（删除分号）并保存并运行程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T10:08:32.273

感谢您的帮助，到目前为止我已经解决了解决方案。

问题是我为我的证书和根证书使用了相同的 pem 文件。

有一个与我自己的证书不同的根证书，在连接过程中，两个证书都被使用，所以我必须获取苹果推送通知的根证书。

谢谢！

# java - 标头未注入请求

> ID：16059984
> 
> 赞同：2
> 
> 时间：2013-04-17T12:26:04.977
> 
> 标签：java, web-services, soap, jax-ws

我正在使用 SOAPHandler，这是我`getHeaders`在客户端的方法：

```
@Override
public Set<QName> getHeaders() {
    String uri = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";
    QName security_hdr = new QName(uri, "Security", "wsse");
    HashSet<QName> headers = new HashSet<QName>();
    headers.add(security_hdr);
    System.out.println("Headers: " + headers);
    return headers;
} 
```

上一行中的 SystemOut 产生了这段代码，所以我确实从我的方法中返回了一些东西：

```
Headers: [{http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security] 
```

但是，当尝试在**TCPMon**中捕获请求时，我根本看不到标头。

```
POST /ws/server HTTP/1.1
Content-type: text/xml;charset="utf-8"
Soapaction: ""
Accept: text/xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
User-Agent: JAX-WS RI 2.1.6 in JDK 6
Host: 127.0.0.1:4027
Connection: keep-alive
Content-Length: 170

<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body><ns2:getServerName xmlns:ns2="http://ws.ronixus.com/"/></S:Body>
</S:Envelope> 
```

知道我在这里缺少什么吗？我已经从其他回调方法中注释掉了代码，`handleMessage`以确保没有覆盖标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:28:25.357

也许在handleMessage中试试这个，只是为了确认？

```
SOAPHeader soapHeader = soapEnv.getHeader();

Iterator headers = soapHeader.extractAllHeaderElements();
while(headers.hasNext() ){
    SOAPHeaderElement headerElement = (SOAPHeaderElement) headers.next();

    Name name = headerElement.getElementName();
    System.out.println(name)
} 
```

# jquery - 如何从 HTML 表格中选择更多 tr

> ID：16059985
> 
> 赞同：1
> 
> 时间：2013-04-17T12:26:06.150
> 
> 标签：jquery, html

我有 jQuery 代码：

```
$('td').hover(function () {
  var t = $(this),
          index = t.index(); // the position of the TD in the row, so you can find the one below it
  t.addClass('hovered'); // apply hovered class to this TD...
  t.nextAll(':lt(3)').addClass('hovered'); // ...and to the TD next to it...
  t.closest('tr')
   .nextAll(':lt(3)')
   .find('td:eq(' + index + ')')
   .addClass('hovered')
   .nextAll(':lt(3)')
   .addClass('hovered'); // ...and to the 2 below
}, function () {
  // remove the hovered class when no longer hovering
  $(this).closest('table').find('td').removeClass('hovered');
}); 
```

[JSFiddle 演示](http://jsfiddle.net/FXy5J/1/)

如何选择 4x4 单元格？不像演示那样 2x4 +2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:37:48.880

尝试

```
$('td').hover(function () {
    var t = $(this),
        index = t.index(); // the position of the TD in the row, so you can find the one below it
    t.addClass('hovered'); // apply hovered class to this TD...
    t.nextAll(':lt(3)').addClass('hovered'); // ...and to the TD next to it...
    t.closest('tr').nextAll(':lt(3)').each(function(i,v){
        $('td:eq(' + index + ')', this).addClass('hovered').nextAll(':lt(3)').addClass('hovered'); // ...and to the 2 below
    })
}, function () {
    // remove the hovered class when no longer hovering
    $(this).closest('table').find('td').removeClass('hovered');
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZWaqZ/)

更简化的版本

```
$('td').hover(function () {
    var t = $(this),
        index = t.index(); // the position of the TD in the row, so you can find the one below it

    var trs = t.closest('tr').nextAll(':lt(3)').addBack();
    trs.find('td:eq(' + index + ')').add(trs.find('td:gt(' + (index) + '):lt(3)')).addClass('hovered');
}, function () {
    // remove the hovered class when no longer hovering
    $(this).closest('table').find('td').removeClass('hovered');
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZWaqZ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:36:37.747

```
$('td').hover(function () {
    var t = $(this),
        index = t.index(); // the position of the TD in the row, so you can find the one below it
    t.addClass('hovered'); // apply hovered class to this TD...
    t.nextAll(':lt(1)').addClass('hovered'); // ...and to the TD next to it...
    t.closest('tr').nextAll(':lt(1)').find('td:eq(' + index + ')').addClass('hovered').nextAll(':lt(1)').addClass('hovered'); // ...and to the 2 below
}, function () {
    // remove the hovered class when no longer hovering
    $(this).closest('table').find('td').removeClass('hovered');
}); 
```

我将 lt(3) 更改为 lt(1)。看看这是不是你想要的。

查看结果：http: [//jsfiddle.net/FXy5J/3/](http://jsfiddle.net/FXy5J/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:09:51.863

```
var selectY = 4, selectX = 4

$('td').hover(function () {    
  var $cell = $(this),
    $table = $cell.parents("table"),
    x = $cell.index(),
    y = $cell.parent().index();

  $table.find("tr:eq("+y+"),tr:gt("+y+"):lt("+(selectY-1)+")")
        .find("tr:eq("+x+"),td:gt("+x+"):lt("+(selectX-1)+")")
    .addClass("hovered");
}, function(){
  $(this).parents("table")
    .find("td")
    .removeClass("hovered");    
}); 
```

您也可以使用 selectX 和 Y 变量选择您的区域

[http://jsfiddle.net/PKahK/2/](http://jsfiddle.net/PKahK/2/)

*已更新，因为 gt 似乎不接受 -1 ：/

# java - 从apache lucene索引中获取数据并填写JTable

> ID：16059988
> 
> 赞同：1
> 
> 时间：2013-04-17T12:26:08.163
> 
> 标签：java, swing, loops, jtable, defaulttablemodel

我正在尝试从 Apache Lucene 索引中搜索查询。搜索返回大量结果，我必须`JTable`使用 Swing 填写结果。我正在使用循环从 Apache Lucene 索引中提取对象行。

由于上述原因，如果有数千条记录，那么填写表中的记录需要时间，我正在使用以下代码。有没有其他方法可以在不运行循环的情况下完成任务？

```
 try {         File indexDir= new File("path of the file")

               Directory directory = FSDirectory.open(indexDir);

                    IndexSearcher searcher = new IndexSearcher(directory, true);
                    int maxhits=1000000;
                    QueryParser parser1 = new QueryParser(Version.LUCENE_36, "field",

                      new StandardAnalyzer(Version.LUCENE_36));

              Query qu=parser1.parse("texttosearch");

                    TopDocs topDocs = searcher.search(, maxhits);
                    ScoreDoc[] hits = topDocs.scoreDocs;

              len = hits.length;

                     int docId = 0;
                    Document d;
                    Vector column_name=new Vector();   

    column_name.addElement("title"); 
    column_name.addElement(""); 
      // For All Rows Data

    Vector row=new Vector();
     String filename="";
               String titlee="";
    Vector newRow=new Vector();

    for ( i = 0; i<len; i++) {
     docId = hits[i].doc;
     d = searcher.doc(docId);
     filename= d.get(("fpath"));
     titlee=d.get("title");
     newRow= new Vector();
     newRow.addElement(titlee);
     newRow.addElement(filename);
     row.addElement(newRow);                     

    }

    DefaultTableModel model= new DefaultTableModel(row, column_name);
    table.setModel(model);    

 }

catch(Exception ex)

{

  ex.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:32:26.967

小错误有时会造成大麻烦

*   `Vector row = new Vector();`应该`Vector<Vector<Object>> row = new Vector<Vector<Object>>();`

*   循环中的第一行`for (i = 0; i < len; i++) {` 必须是`newRow = new Vector();`

伪代码

```
for (i = 0; i < len; i++) {
     // must be otherwise first Vector is added forever!!!
     newRow = new Vector();

     //loop, add elements to one dimensional Vector

     // add 1D Vector to 2D Vector used and implemented in JTables API 
     row.addElement(newRow); 
} 
```

*   我将在表单中定义变量`Vector<Object> newRow = new Vector<Object>();`

*   [Oracle turorial How to use Tables](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中描述了所有重要的事情

# ios - 在控制台中以正确的格式显示 unicode

> ID：16059992
> 
> 赞同：5
> 
> 时间：2013-04-17T12:26:13.367
> 
> 标签：ios, objective-c, xcode, cocoa-touch, cocoa

```
NSSet *subFolders = [_account subscribedFolders];
NSLog(@"subFolders: %@",subFolders); 
```

输出：

```
...
    "[Gmail]/\U05d8\U05d9\U05d5\U05d8\U05d5\U05ea",
    "[Gmail]/\U05d7\U05e9\U05d5\U05d1" 
... 
```

有什么办法可以用原始语言（希伯来语）显示上述文本？

我尝试过的事情：

*   将调试器从 LLDB 更改为 GDB - 不起作用
*   在首选项下检查 -> 文本编辑 UTF-* 被选中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:04:41.380

在控制台中显示 unicode 字符没有问题，所以我认为这是字符串首先进入集合的方式。

我建议使用以下内容遍历 subFolders 中的所有对象：

```
 for( id object in [subFolders allObjects] ) {
    //Print out the name of the item explicitly
 } 
```

即使这不起作用，它至少可以让您直接使用字符串。如果它仍然打印出来：

> “[Gmail]/\U05d8\U05d9\U05d5\U05d8\U05d5\U05ea”

看起来好像您正在发送转义的 unicode 字符，我建议这样做：[https](https://stackoverflow.com/a/7861345/352891) ://stackoverflow.com/a/7861345/352891 - 这可能直接适用于 NSSet 的描述

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T09:21:05.047

```
 NSString* strOld=[NSString stringWithFormat:@"%@",responseObject];
NSLog(@"%@",[NSString
             stringWithCString:[strOld cStringUsingEncoding:NSUTF8StringEncoding]
             encoding:NSNonLossyASCIIStringEncoding]); 
```

# ruby - 规则的顺序在 TreeTop 中是否重要？

> ID：16059997
> 
> 赞同：2
> 
> 时间：2013-04-17T12:26:29.800
> 
> 标签：ruby, treetop

我刚刚开始使用 TreeTop 进行解析工作。以下是让我困惑的片段：

```
grammar Fortran
    rule integer
        [1-9] [0-9]*
    end

    rule id
        [a-zA-Z] [a-zA-Z0-9]*
    end
end

parser = FortranParser.new
ast = parser.parse('1') 
```

结果`ast`是：

```
[SyntaxNode offset=0, "1", SyntaxNode offset=1, ""] 
```

但是当我放在`rule id`上面时`rule integer`，结果是`nil`。那么问题是什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T12:51:02.127

我想我刚刚发现哪里错了！！！应该有一个包含其他规则的顶级规则，它被放置为第一条规则：

```
grammar Fortran
    rule statement
        ( id / integer )* {
            def content
                elements.map { |e| e.content }
            end
        }
    end

    rule id
        [a-zA-Z] [a-zA-Z0-9]* {
            def content
                [:id, text_value]
            end
        }
    end

    rule integer
        [1-9] [0-9]* {
            def content
                [:integer, text_value]
            end
        }
    end
end

parser = FortranParser.new
ast = parser.parse('1') 
```

然后结果是

```
[[:integer, "1"]] 
```