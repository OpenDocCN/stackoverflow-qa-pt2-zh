# StackOverflow 问答 12615000-12615999

# javascript - 带有可点击侧边栏的谷歌地图

> ID：12615000
> 
> 赞同：0
> 
> 时间：2012-09-27T06:02:38.297
> 
> 标签：javascript, google-maps-api-3

嗨 iam javascript 和 google maps 新手，并尝试使用侧边栏实现简单的地图以下是我的代码

```
 <script>
       function createMarker(lat,lng)
                {

    alert("lat,lang");
                  var marker = new google.maps.Marker({
                    map: map,
                    position: latlng,
                    content:content
                  });
                  if(icon){marker.setIcon(icon);}

                  if(center)
                  {
                    map.setCenter(latlng);
                  }

                  google.maps.event.addListener(marker, 'click', function() {
                    infowindow.setContent(this.content);
                    infowindow.open(map, this);
                  });

                  if(action)
                  {
                    action.fnc(map,action.args);
                  }
                  return marker;
              }
    </script>

<body>
<div id="container">
<div id="menu" style="background-color:#FFD700;height:800px;width:100px;float:left;">
<table border="0">
<tr>
<th>Cities</th>
</tr>
<tr>
<td onclick="createMarker('40.47','73.58');">newyork</td>
</tr>
<tr>
<td onclick="createMarker('41.50','87.83');">chicago</td>
</tr>

</table>
</div>

<script type="text/javascript">
        var map;
        var markersArray = [];

        function initialize()
        {
            var latlng = new google.maps.LatLng(12.9833, 77.5833);
            var myOptions = {
                zoom: 10,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            // add a click event handler to the map object
            google.maps.event.addListener(map, "click", function(event)
            {
                // place a marker
                placeMarker(event.latLng);
            });
        } 
```

当前夜我单击侧边栏中的城市时，我会转到该地图并指向一个标记..我尝试过但缺少一些东西..任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:09:54.590

请参见下面的示例，该示例来自 Mike Williams 的 (v2) 教程：

[基础知识 - 第 2 部分：添加可点击的侧边栏](http://econym.org.uk/gmap/basic2.htm)

[翻译成 v3](http://www.geocodezip.com/v3_MW_example_map2.html)

# hibernate - 如果引用对象为 NULL，如何使用 HQL 获取空值以引用对象 id

> ID：12615002
> 
> 赞同：2
> 
> 时间：2012-09-27T06:02:58.967
> 
> 标签：hibernate, hql

我的 HQL 选择查询如下

```
 select user.id, user.address.id from User user 
```

在此查询中，如果***user.address***为**NULL** ，则查询不会返回该用户记录。

我的要求是，**如果 user.address 为 NULL，则 user.address.id 应返回 user.address.id 的所有带有 '' （空值）的用户记录。**记录应如下所示

[1,''], [2,1], [3,'']...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T13:30:59.570

今天遇到了类似的问题。这里的问题是hibernate会产生`inner join address`SQL。

```
select user0_.id as col_0_0_, address1_.id as col_1_0_ from user user0_
    inner join address address1_ on user0_.address_id=address1_.id 
```

作为内部连接的结果，您将丢失地址为空的所有记录。使用显式左连接来实现您所需要的。总部：

```
select user.id, addr.id from User user left join user.address addr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:45:01.723

找到了这些东西的确切答案。

```
select user.id, case when user.address is null then '' else user.address.id end 
from User user 
```

select 子句中的这个 case 子句的作用类似于 if else

```
if (user.address == null)
   return "";
else
   return user.address.id; 
```

这样，您将获得所有记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:03:06.390

如果这是唯一的情况，您可以执行以下操作：

```
select user.id, user.address.id from User user 
```

`user.address`当不为空时，这将为您提供所有记录。

您现在可以拥有这个，以拥有其余的记录：

```
select user.id, '' from User user when user.addresss is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:09:33.387

您可以使用“coalesce”命令（如“nvl”SQL 命令）。

可以在[这里](https://stackoverflow.com/questions/601615/how-to-simulate-nvl-in-hql)阅读：

> 与 HQL 中的 nvl 命令等效的是 coalesce 命令。如果 a 不为空，则 coalesce(a,b) 将返回 a，否则返回 b。
> 
> 因此，您需要以下内容：
> 
> 从表 col1 = coalesce(:par1, 'asdf')

编辑：在你的情况下，我假设你正在寻找类似的东西：

> 从用户用户中选择 user.id, coalesce(user.address.id, '')

# perl - perl 库的位置

> ID：12615013
> 
> 赞同：1
> 
> 时间：2012-09-27T06:04:16.257
> 
> 标签：perl, installation, gentoo

首先，我不熟悉 Perl 及其实践。

我正在尝试开发一个安装 Perl 应用程序的[ebuild 。](https://en.wikipedia.org/wiki/Ebuild)但是我不知道将应用程序的库文件放在哪里。

应用程序的目录结构是

```
binary
share/app/*.pl
share/app/icons/*.png 
```

`binary`作为 Perl 可执行文件。

在二进制文件中，我看到这样的行`require 'someLibrary.pl';`指的是`share/app/`目录中的 Perl 库。我还注意到`use lib "$BIN/share/app";`一行，它告诉二进制文件在哪里可以找到我猜想的其他库。

现在我面临如何安装应用程序的问题。

**解决方案 #1：**将二进制文件`/usr/bin/`和库安装在`/usr/lib/perl5/`.

**问题：**把图标放在哪里？这些图标在二进制文件和库中使用`$Bin/share/app/icons/*.png`. 我猜这行不通。

**解决方案 #2：**将所有内容安装在`/usr/share/app/`.

**问题：**将二进制文件放在哪里？`/usr/bin/`在二进制文件中创建符号链接？

**解决方案#3：**修补 Perl 文件，以便它们在 中查找图标`/usr/share/app/icons`，将二进制文件`/usr/bin/`和库放在`/usr/lib/perl5/`.

**问题：**我必须为这些文件创建一个补丁。这似乎不是一个好的/正常的方式。

当然，其他解决方案也非常受欢迎。

**更新：**我已经尝试过解决方案＃2，并且正如我所怀疑的那样，当我执行`/usr/bin/binary`库路径时，会变成`/usr/bin/share/app`. 这当然会导致找不到库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:25:06.040

给定的代码使用[FindBin](http://search.cpan.org/perldoc?FindBin)来定位应用程序数据目录。这使得解决方案 2 在`/usr/share/app/script.pl`.

如果脚本使用`$RealBin`而不是`$Bin`（均由 FindBin 导出），您将能够`/usr/bin`在真实脚本中添加符号链接。但正如注意到的那样，这不适用于当前脚本。

备选方案 1 是编写一个小包装器并将其放在 /usr/bin 中。这样的事情似乎对我有用：

```
#!/bin/sh
exec /usr/share/app/script.pl "$@" 
```

备选方案 2 是修补脚本以使用 $RealBin。要么只是一个简单的搜索-n-替换，要么只是一个最小的补丁替换

```
use Findbin qw($Bin) 
```

和

```
our $Bin;
use FindBin qw($RealBin);
BEGIN { $Bin = $RealBin; } 
```

这两个补丁的侵入性都比您建议自己作为解决方案 3 的补丁小得多。

我可能会推荐第一种选择。这应该在大多数情况下都有效，并且对于脚本和系统本身的侵入性最小。

# php - 使用 PHP/Curl 可以实现自动化吗？

> ID：12615017
> 
> 赞同：0
> 
> 时间：2012-09-27T06:04:26.210
> 
> 标签：php, curl, automation

我有如下要求。

1.  如果我通过 Curl 访问一个网站，
2.  30秒后，我点击该网站的任何链接，是否会被视为单次访问？

我想让它被视为一次访问。因此可以在分析或 wordpress-jetpack-stats 中作为单次访问对其进行跟踪。

如果这是不可能的，请给我可能的解决方案来通过 PHP 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:08:23.607

这将取决于目标服务器如何考虑“访问”。如果是通过 IP，那么您不需要做任何特别的事情。如果是通过 cookie，那么您要确保从初始请求中提取 cookie 信息，然后将这些 cookie 与后续请求一起发回。

查看 中的 cookie 选项[`curl_setopt`](http://us2.php.net/manual/en/function.curl-setopt.php)。

# youtube-api - YouTube 数据 API：标准提要返回多少视频？

> ID：12615022
> 
> 赞同：1
> 
> 时间：2012-09-27T06:04:43.000
> 
> 标签：youtube-api

我正在调用 YouTube Data API 来获取标准的 Feed 视频，如下所示：

```
http://gdata.youtube.com/feeds/standardfeeds/HK/most_popular_Music?time=this_week 
```

然后我正在翻页以获取更多信息。但它通常以大约 100 个视频结束。这是正常的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:42:14.267

是的。提要中的`<openSearch:totalResults>90</openSearch:totalResults>`元素表示该提要中有（大约）90 个视频。

# asp.net - 从本地资源文件中读取验证控制错误消息

> ID：12615025
> 
> 赞同：0
> 
> 时间：2012-09-27T06:04:59.973
> 
> 标签：asp.net, multilingual, resource-files, validation-controls

我需要从 App_LocalResource 文件夹中的资源文件中读取验证控件 (RequiredFeildValidator) 的错误消息，因为我的 Web 应用程序是多语言的......

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                        ControlToValidate="ddlTicketType" ErrorMessage="Ticket type required." 
                        ForeColor="White" InitialValue="Select" SetFocusOnError="True" 
                        ValidationGroup="tkt" meta:resourcekey="RequiredFieldValidator4Resource1">*</asp:RequiredFieldValidator> 
```

并且键“RequiredFieldValidator4Resource1”作为一些文本存在于资源文件中......但它没有获取确切的值，而是显示了一些不可读的内容......

我将我的 ValidationSummary 更改为 ShowMessageBox="False" & ShowSummary="True" 并且它有效，它显示了我想要的结果......我希望它们也能在 Message Box 中工作......

其他一切都运行良好，例如标签中的文本和按钮等其他控件中的文本，超链接正确出现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:24:06.547

在摸索了这么多天之后，我终于找到了答案……javascript警报和验证控制消息框使用您当地的计算机语言和文化……我已经为我想要的文化启用了它，它就像一个魅力...谢谢

# android - Android：如何处理相对布局

> ID：12615031
> 
> 赞同：1
> 
> 时间：2012-09-27T06:05:24.627
> 
> 标签：android, android-mapview, android-relativelayout

我被相对布局困住了两天……这是我的屏幕在线性布局中对齐![在此处输入图像描述](../Images/beb4e726905ab2d1a24b3aa20033b3f2.png)

所以很好。但现在我想在地图上的某处添加刷新按钮，但我发现线性布局是不可能的。所以我尝试了相对布局，但甚至无法像上面那样获得屏幕。我的页脚布局始终显示在顶部.. 这是我的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- include title bar for all screen -->

<include
    android:id="@+id/include1"
    layout="@layout/titlebar_layout" />

<com.google.android.maps.MapView
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1.63"
    android:apiKey="0VkXbAOFvAq7b6uaGHSmnS2a2VosPxoS6ceHY_g"
    android:clickable="true" >
</com.google.android.maps.MapView>

<include
    android:id="@+id/include2"
    android:layout_marginBottom="38dp"
    layout="@layout/bottom_layout"/>

</LinearLayout> 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:19:54.990

试试这个。使用框架布局并将地图视图和按钮放在框架布局内。因此按钮将被放置在地图视图上方。根据您的需要放置它。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- include title bar for all screen -->

<include
    android:id="@+id/include1"
    layout="@layout/titlebar_layout" />

<FrameLayout android:layout_width="match_parent" 
   android:layout_height="0dp"
   android:layout_width="1.0" >

    <com.google.android.maps.MapView
        android:id="@+id/map"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.63"
        android:apiKey="0VkXbAOFvAq7b6uaGHSmnS2a2VosPxoS6ceHY_g"
       android:clickable="true" >
   </com.google.android.maps.MapView>

   <Button android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_gravity="right" />

</FrameLayout>

<include
    android:id="@+id/include2"
    android:layout_marginBottom="38dp"
    layout="@layout/bottom_layout"/>

</LinearLayout> 
```

希望这可以帮助...！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:11:50.673

RelativeLayout 可能是您想要的。编程可能很困难，因为您需要先定义底部视图*，*然后再定义屏幕上位于其上方的视图。

查看[这些](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-relative-layouts/) [教程](http://www.mkyong.com/android/android-relativelayout-example/)以获取有关使用 RelativeLayouts 的更多帮助。最好的学习方法就是做！尝试各种布局，直到弄清楚规则是如何工作的。然后将它重新创建为RelativeLayout应该非常简单。

# java - 匹配单词中的几个字符

> ID：12615034
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:05:30.203
> 
> 标签：java

我有这样的句子：

```
Slno:0 ahdhajdhjahdjahjdhahd <>
Slno:1 ahdhajdhjahdjahjdhahd <>
Slno:2 ahdhajdhjahdjahjdhahd <> 
```

我想将前 5 个章程与“Slno:x”进行比较，其中 x 是一个整数。如果满足该条件，我想打印其余的行。并删除最后一个 <> 所以输出看起来像：

```
 ahdhajdhjahdjahjdhahd
       ahdhajdhjahdjahjdhahd
       ahdhajdhjahdjahjdhahd 
```

我试着做：

if string1.charAt(1)=='S' 对于所有字符，然后从 string1[5] 打印到结束。如果条件为真。寻找更好的逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:16:55.013

如果我正确理解您的要求，我认为这会起作用。试试这个：

```
 public static void main(string..args) {
String s1= "Slno:0 ahdhajdhjahdjahjdhahd <>";

    String[] sSplit = s1.split("\\s");
    String f[]= sSplit[0].split(":");
   ;
    if(f[0].equals("Slno") && checkInt(f[1])) {
        System.out.println(sSplit[1]);
    }

}
public static boolean checkInt(String i) {
    try {
    Integer.parseInt(i);
    return true;
    }
    catch(Exception ex){
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:48:36.163

您可以使用正则表达式和子字符串..如果您的句子之间有空格：-

```
String s1 = "Slno:0 ahdhajdhjahdjahjdhahd <>";

if (s1.substring(0, 6).matches("Slno:\\d")) {
     System.out.println(s1.substring(7, s1.length() - 3));
} 
```

输出： -

```
ahdhajdhjahdjahjdhahd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:24:59.653

你可以试试这个

**示例：** “Slno:0 ahdhajdhjahdjahjdhahd <>”

`split`使用方法设置分隔符作为空格将句子分成三个部分。

```
StringOne = "Slno:0"
StringTwo = "ahdhajdhjahdjahjdhahd"
StringThree = "<>" 
```

使用 contains 方法来匹配输入。如果给定的输入与字符串的第一部分匹配，则打印字符串的第二部分。

# java - 使用 Java 从 Internet 获取数据

> ID：12615044
> 
> 赞同：3
> 
> 时间：2012-09-27T06:06:17.633
> 
> 标签：java, dom, jsoup

美好的一天，我是 Java 新手，我正在尝试从互联网上获取一些数据。如果我想以搜索谷歌并存储结果数量和搜索时间为例。我考虑过使用 jsoup DOM 功能，但我不知道如何获取该特定元素的值。

如果我使用谷歌浏览器检查元素，我感兴趣的是

```
<div id="resultStats">
About 6,480,000,000 results
<nobr>  (0.26 seconds)&nbsp;</nobr>
</div> 
```

那是我唯一可以开始工作的事情，但文档不包含该元素。

```
import org.jsoup.nodes.Document;

import java.io.IOException;

public class google_time {
    public static void main(String[] args) throws IOException {
        String url = "https://www.google.com/webhp?hl=en&tab=Tw&q=data#hl=en&newwindow=1&output=search&sclient=psy-ab&q=data&oq=data&gs_l=hp.12...0.0.0.1682.0.0.0.0.0.0.0.0..0.0.les%3B..0.0...1c.Q9UUbwkFy-I&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=6a12f0870d3ff179&biw=1066&bih=483";

        Document doc = Jsoup.connect(url).get();
        System.out.println(doc);

    }
} 
```

那么我怎样才能只得到那一点 resultStatic 和那里的文字呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:51:21.527

首先是问题：

看起来 url`https://www.google.com/webhp`用于动态呈现谷歌搜索页面。即使用 AJAX 获取搜索结果，然后使用 javascript 将其呈现到页面中。由于`jsoup`不是浏览器且不运行 javascript，因此您将使用的 html`jsoup`不会有任何搜索结果。

所以我们可以使用`https://www.google.com/search`. 这将呈现一个正常的 html 页面，其结果没有任何 AJAX hooplah。但是谷歌仍然阻止来自非浏览器来源的请求，所以你必须像这样`UserAgent`在你的`Jsoup`请求中添加标头：

```
Jsoup.connect(url)
    .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1;"+
        " en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
    .get(); 
```

你的最终代码看起来像这样：

```
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.jsoup.nodes.Element;
import org.jsoup.Jsoup;
import java.util.Iterator;
import java.io.IOException;

public class GoogleScraper {
    public static void main(String[] args) throws IOException {
        String url = "https://www.google.com/search?"+
        "hl=en&tab=Tw&q=data#hl=en&newwindow=1&"+
        "output=search&sclient=psy-ab&q=data&oq=data"+
        "&gs_l=hp.12...0.0.0.1682.0.0.0.0.0.0.0.0..0.0.les"+
        "%3B..0.0...1c.Q9UUbwkFy-I&pbx=1&bav=on.2,"+
        "or.r_gc.r_pw.r_cp.r_qf.&fp=6a12f0870d3ff179&biw=1066&bih=483";

        try{

            Document doc = Jsoup.connect(url)
            .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1;"+
                " en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
            .get();

            //Prints the whole markup
            //System.out.println(doc.toString());

            Elements resultDivElems = doc.select("div#resultStats");
            Iterator<Element> itr = resultDivElems.iterator();

            //Prints only what you need, ie the result details
            while(itr.hasNext()){
                System.out.println(((Element)itr.next()).text());
            }
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

# sql - 创建表时是否指示备用键，但此备用键未从任何其他表中发布

> ID：12615051
> 
> 赞同：0
> 
> 时间：2012-09-27T06:07:02.520
> 
> 标签：sql

问题是，如果我有关系 R(A,B,C,D) 其中 A 是 PK 和 C 如果该关系的备用键，我是否需要在基于该关系创建表时指出 C 是唯一的钥匙？我的意思是：

```
create table R (
                 A A's domain,
                 B B's domain,
                 C C's domain,
                 D D's domain,
                 primary key A,
                 unique C 
                ) 
```

我是否必须指定 C 是该表的唯一键，即使该键不是从任何其他表中发布的（它只是一个尚未被选为主键的候选键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:12:48.907

**Unique Key** 是一个约束，这意味着如果您将 C 声明为 unique ，则该列将不允许重复值。如果你不指定它，它可能有重复的值，因此作为候选键失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:32:12.790

如果指定它会防止*不正确*的数据被插入到表中（例如 中有两行具有相同的值`C`），那么不这样做的唯一原因是如果它已被证明是一个性能问题，并且如果你已经证明通过其他一些机制可以防止不正确的数据。

# c# - 添加 runat=server 时表中的错误

> ID：12615052
> 
> 赞同：3
> 
> 时间：2012-09-27T06:07:17.363
> 
> 标签：c#, asp.net, .net, html-table, runatserver

我的 ASPX 页面中有一个 html 表，并希望在代码隐藏中使用它进行一些处理。该表如下所示：

```
<table class="hovertable" id="tblData">
    <tr>
        <th>ID:</th>
        <td colspan="3" style="font-weight: bold">
            <%= Eval("ID") %>
        </td>
    </tr>
    <tr>
        <th>Date:</th>
        <td><%# Eval("Date", "{0:dd-MMM-yyyy}") %></td>
        <th>Amount:</th>
        <td><%# Eval("Amount", "{0:C}") %>
    </tr>
</table> 
```

但是，当我将 runat="server" 属性添加到表中时，会出现以下错误：

```
CS1502: The best overloaded method match for 'System.Web.UI.HtmlControls.HtmlTableRowCollection.Add(System.Web.UI.HtmlControls.HtmlTableRow)' has some invalid arguments 
```

任何想法这里可能有什么问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:10:09.067

html 表（不是纯 asp.net 服务器控件）不能包含 asp.net 服务器控件。看看这个答案：

[http://forums.asp.net/t/1524580.aspx/1](http://forums.asp.net/t/1524580.aspx/1)

在我看来，您应该问自己以下问题吗？

我需要解决这个客户端或服务器端吗？

如果您的答案是客户端，您应该使用 Ajax 实现更新逻辑，否则您可以使用 ASP.NET 服务器控件并在服务器端实现它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T04:54:49.167

好的，我已经自己解决了这个问题。导致它的问题是因为`<td>`没有相应的`<tr>`元素。如下所示：

```
<table class="hovertable" id="tblData">
    <tr>
        <th>ID:</th>
        <td colspan="3" style="font-weight: bold">
            <%= Eval("ID") %>
        </td>
    </tr>
    <tr>
        <th>Date:</th>
        <td><%# Eval("Date", "{0:dd-MMM-yyyy}") %></td>
        <th>Amount:</th>
        <td><%# Eval("Amount", "{0:C}") %>
    </tr>
    <td colspan='4'>
       Some data....
    </td>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:10:30.750

我认为您可以将其用于相同的目的

```
<asp:Table ID="Table1" runat="server">
</asp:Table> 
```

您要做的是向控件添加`runat="server"`属性`HTML`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:12:49.453

尝试添加`<asp:Labels>`需要操作数据的位置。

```
<table>
<tr><td><asp:Label id="lblRow" runat="server" /></td></tr>
</table> 
```

如果标签中有，则无法通过代码后面`runat="server"`的代码访问表列和行，因为它们是纯 html。

另一种方法是使用 a`StringBuilder`在代码隐藏中创建 html 表并`asp:LiteralControl`输出该表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T07:57:01.527

此外，如果我们删除 tbody 元素，它不会因为 td mismatch Nikhil Mittal 引发错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T07:04:29.303

删除以下元素

```
<thead>
</thead>
<tbody>
</tbody> 
```

# javascript - 从 window.location 设置 iFrame src

> ID：12615055
> 
> 赞同：0
> 
> 时间：2012-09-27T06:07:23.557
> 
> 标签：javascript, jquery, url

使用 jQuery 或 javascript，我摸索到了这一点，最后屈服了。

如何设置这样的 iframe src：

1.  如果窗口 URL 包含以“?sku=”开头的参数
2.  缓存整个参数？结束 (?sku=T235N&addressline=90803&form=product_search)
3.  将 iframe src 从 /index.html 更改为 /default.html + 参数？

    将 iframe src="/index.html 更改为 src="/default.html?sku=T235N&addressline=90803&form=product_search"

[http://jsfiddle.net/Digitalctn/rUnQd/](http://jsfiddle.net/Digitalctn/rUnQd/)

非常感谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:15:15.320

我不确定您在上述解决方案中使用 javascript 尝试了什么，即使在小提琴中我也看不到任何 javascript

我建议您阅读以下帖子

[在 JavaScript 中使用 URL 的 GET 参数](https://stackoverflow.com/questions/827368/use-the-get-parameter-of-the-url-in-javascript)

上面的帖子将有助于获取参数“sku”

现在，如果您有任何相同的值，您可以通过以下方式设置 iframe src

```
document.getElementById("iframeid").src = "default.html?sku="+sku 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:27:50.723

你可以试试这样

```
$(function () {
    var url = parseUrl(window.location.pathname).search;
    if (url.match("sku").length > 0) {
        $('#iframe1').attr('src', '/default.html' + url);
    }
});

function parseUrl(url) {
    var a = document.createElement('a');
    a.href = url;
    return a;
} 
```

和[jsfiddle](http://jsfiddle.net/muthusamy/rUnQd/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:29:55.807

首先，给你`iframe`一个`id`，这样我们就可以`getElementById`：

```
<iframe src="http://hosted.where2getit.com/asics/index.html" id="sku_frame" 
```

然后，设置一个脚本以在页面加载时运行，检测字符串中是否有`sku=`键，并获取引用并修改它：`location.search``iframe``el.src`

```
(function load(){

    if (window.addEventListener) {
        window.addEventListener('load', run);
    } else if (window.attachEvent) {
        window.attachEvent('onload', run);
    }

    function run() {
        var hassku = !!(location.search.indexOf('sku=') + 1);

        if (hassku) {
            document.getElementById('sku_frame').src = '/default.html' + location.search;
        }
    }

})(); 
```

[http://jsfiddle.net/userdude/rUnQd/6/](http://jsfiddle.net/userdude/rUnQd/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:17:21.587

只需找到“？” 在窗口位置并设置 src：

```
var url = window.location;
var pos = url.indexOf('?');
var query = url.substring(0,pos+1); 
```

然后用 JQuery 设置它：

```
$('iframe').attr('src','/default.html?'+query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T06:20:44.863

```
<iframe id="changeIframe" src="http://hosted.where2getit.com/asics/index.html" frameborder="1" width="920" height="635" scrolling="no"></iframe> 

document.getElementByid("changeIframe").src='http://hosted.where2getit.com/asics//default.html?sku=T235N&addressline=90803&form=product_search"' 
```

# image - 任何人都可以向我推荐用于立体视觉的 PGM 图像的网站吗？

> ID：12615058
> 
> 赞同：0
> 
> 时间：2012-09-27T06:07:40.757
> 
> 标签：image, pgm

我需要一些立体视觉项目的示例图像，请建议一些链接，我可以在其中找到`.pgm`左右视觉质量良好的灰度图像（大小超过 500KB）。实际上我用谷歌搜索了很多次，但找不到任何这就是为什么要问......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:59:53.120

你应该看看[CVLAB EPFL Datasets](http://cvlab.epfl.ch/data/index.php)，更准确地说是[Stereo face database](http://cvlab.epfl.ch/data/stereoface/)和[Multi view stereo](http://cvlab.epfl.ch/data/strechamvs/)。

*话虽如此，[Computer Vision Online](http://www.computervisiononline.com/datasets)和[Visual Geometry Group](http://www.robots.ox.ac.uk/~vgg/data/)是查找视觉数据集的好地方。*

# perl - 收到错误“无法在 @INC 中找到 HTML/TreeBuilder/XPath.pm”

> ID：12615067
> 
> 赞同：0
> 
> 时间：2012-09-27T06:08:31.570
> 
> 标签：perl, perl-module

运行我的 perl 文件时出现以下错误

`Can't locate HTML/TreeBuilder/XPath.pm in @INC (@INC contains: C:/Perl/lib C:/Pe rl/site/lib .) at display.pl line 4. BEGIN failed--compilation aborted at display.pl line 4.`

HTML::TreeBuilder::XPath 模块(0.14) 已安装。当我运行命令时从命令行

```
 perl -e HTML::TreeBuilder::XPath it doesn't give any error. 
```

当我从命令行 perldoc -l HTML::TreeBuilder::XPath 运行时，出现以下错误：

```
No documentation found for "HTML::TreeBuilder::XPath". 
```

我的 perl 版本是 5.8.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:14:58.140

首先交叉检查这个模块是否真的安装了？我认为它没有安装，从`cpan`.

# php - mysql中的资源ID＃53错误

> ID：12615069
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:08:37.363
> 
> 标签：php, mysql, database, codeigniter

> **可能重复：**
> [我如何从 PHP 中的 MySql 响应中“回显”“Resource id #6”？](https://stackoverflow.com/questions/4290108/how-do-i-echo-a-resource-id-6-from-a-mysql-response-in-php)

大家好，当我尝试在 PHP 中运行我的代码时出现错误。它在我的屏幕上显示资源 id #53。我只想计算我的一个领域的总数，但我遇到了这个错误。下面是我的代码：

```
$last_points = mysql_insert_id();
//echo $last_points , display like 12... no error
$fkid = $last_points;   // no error....
$sql = "SELECT COUNT(*) FROM downline WHERE fkmember = {$fkid}";
$execute = mysql_query($sql) or die (mysql_error());
echo $execute; //display error why? 
```

请帮帮我。我想这是我的疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:09:57.880

首先，`resource id #53`不是错误。您显示的是`resource`，而不是查询的输出。

要显示输出，请使用：

```
$last_points = mysql_insert_id();
//echo $last_points , display like 12... no error
$fkid = $last_points;   // no error....
$sql = "SELECT COUNT(*) FROM downline WHERE fkmember = {$fkid}";
$execute = mysql_query($sql) or die (mysql_error());
print_r(mysql_fetch_array($execute)); //display error why? 
```

其次，`mysql_*`功能已被弃用。您应该相应地学习和使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:17:48.980

$execute 是一个数组，因此您需要在回显它时打印它

```
print_r($execute); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:15:24.107

通过codeigniter方式

**在模型中：**

```
function getCount($fkid)
        {
            $Qry = "SELECT * FROM downline WHERE fkmember = $fkid};
            $query = $this->db->query($Qry);
            return $query->num_rows();
        } 
```

**在控制器中：**

```
echo $Count = $this->modelname->getCount($id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:11:35.790

而不是尝试`echo`一个结果集（因为收到`mysql_query`）这样做：

```
print_r( mysql_fetch_array($execute) ); 
```

# android - 创建 youtube 视频列表，并保存链接以供离线使用

> ID：12615071
> 
> 赞同：0
> 
> 时间：2012-09-27T06:08:48.817
> 
> 标签：android, listview, youtube

我正在尝试开发一个在给定搜索字符串的情况下在 youtube 上搜索视频的活动。一旦这个搜索返回，我需要显示一个带有缩略图、标题、持续时间的列表视图，并允许添加视频（不下载）以供以后参考。

我知道如何创建自定义列表视图。

现在，我需要 youtube api 来返回搜索结果供我使用。

我试过以下

1.  调用 youtube 活动。但这显示了我无法控制的搜索结果（出于明显的原因）。有没有办法 startActivityForResult，不显示搜索结果，只返回一个 List ？我尝试搜索文档，但找不到。

    ```
     Intent intent = new Intent(Intent.ACTION_SEARCH);
        intent.setPackage("com.google.android.youtube");
        intent.putExtra("query", "Car Pool videos");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
        Globals.forward(this) ;
        finish() ; 
    ```

2.  [YouTube API](https://developers.google.com/youtube/articles/youtube_mobileresources)没有搜索 API。

3.  [Youtube data api's](https://developers.google.com/youtube/2.0/reference?hl=de-DE)，在这里我找不到任何能够成功完成它的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T12:20:24.643

播放文件时需要创建缩略图。因此需要一些离线工作。必须手动创建缩略图并在加载期间显示。

# objective-c - 状态栏图标显示一秒钟然后消失

> ID：12615072
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:09:04.747
> 
> 标签：objective-c, xcode, macos, cocoa

我正在尝试一些东西，以测试状态栏图标功能。

我想我得到了所有的功能。但是运行时。图标显示了大约 1 毫秒，然后消失了。

下面是我的代码截图：

![编码](../Images/9aa3b9e5cef819a69dbac7b16c1228fd.png)

源代码：[https ://www.dropbox.com/sh/drdxi2zgumc4c3l/s-4J1S418s](https://www.dropbox.com/sh/drdxi2zgumc4c3l/s-4J1S418s)

演示视频：[https ://dl.dropbox.com/u/8032222/the%20app%20run%20weird.mov](https://dl.dropbox.com/u/8032222/the%20app%20run%20weird.mov)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:24:52.313

`Retain`状态项对象。

```
statusItem=[[[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength]retain]; 
```

来自`statusItemWithLength:`.

> 接收方不保留对状态项的引用，因此您需要保留它。否则，对象在释放时会从状态栏中移除。

# asp.net - 使用正则表达式验证时间 HH:MM am 或 pm 格式

> ID：12615087
> 
> 赞同：1
> 
> 时间：2012-09-27T06:09:57.197
> 
> 标签：asp.net

我正在使用带有 vb 代码的 asp.net 开发 Web 应用程序。

我有一个时间字段的文本框，我正在使用正则表达式验证器。

我想要的格式是 HH:MM am。我使用的正则表达式是`"(0[1-9]|[1][0-2])[:]" + "(0[0-9]|[1-5][0-9])[ ][A|a|P|p][M|m]"`

我正在输入时间示例：08:30 AM 或 08:30 PM，但正则表达式显示错误消息。

任何人都可以帮助我正确的正则表达式。

谢谢大家

舒巴

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T06:13:01.170

使用 RegularExpressionValidator 及以下 ValidationExpression。我用过那个。

```
ValidationExpression="^(1[0-2]|0[1-9]):[0-5][0-9]\040(AM|am|PM|pm)$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:13:59.607

您不需要使用正则表达式，使用`DateTime.TryParse`or`DateTime.TryParseExact`代替。我推荐使用常规`TryParse`方法，因为它为您的访问者提供了格式的灵活性（例如，一些访问者可能希望使用 24 小时制，而其他人可以使用 12 小时制）。

```
String input;
DateTime dt;
if( !DateTime.TryParse( input, CultureInfo.InvariantCulture /* change if appropriate */, DateTimeStyles.None, out dt ) ) {
    // show error message
} 
```

现在，当您使用验证器时，您需要将此逻辑包装在一个`Validator`子类中，但这真的很简单：

```
public class DateTimeValidator : BaseValidator {

    protected override bool EvaluateIsValid() {

        String controlValidationValue = base.GetControlValidationValue(base.ControlToValidate);
        if( String.IsNullOrEmpty( controlValidationValue ) ) return true;

        DateTime dt;
        return DateTime.TryParse( input, CultureInfo.InvariantCulture /* change if appropriate */, DateTimeStyles.None, out dt );
    }
} 
```

然后（假设您已经在 中注册了标签前缀`web.config`）您需要做的就是：

```
<label>
    Enter a valid date/time value.
    <input type="text" runat="server" id="someDate" />
    <myprefix:DateTimeValidator runat="server" controlToValidate="someDate" />
</label> 
```

`<asp:RequiredFieldValidator>`如果您希望该字段是必需的，您将需要一个单独的字段。

# php - php中TRIM的不同行为

> ID：12615090
> 
> 赞同：2
> 
> 时间：2012-09-27T06:10:07.130
> 
> 标签：php

我有一段代码，从这里我想从字符串中删除一些单词，但`trim()`函数没有显示正确的输出。

代码如下

```
<?php
$mystring = '/word-quotes-hope';
$findme   = '/word-quotes-';
echo $str = trim($mystring, $findme);
?> 
```

它的输出是`hop`，但它应该是`hope`

它的工作示例[http://codepad.viper-7.com/FxLZkp](http://codepad.viper-7.com/FxLZkp)

任何人都知道为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:12:40.550

因为`trim`使用第二个字符串单个字符，而不是整个字符串，并且在您的情况下它有一个`e`，并且字符串以`e`它结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:14:41.587

尝试将它与“ltrim”一起使用

```
echo $str = ltrim($mystring, $findme); 
```

它会在“left”上修剪你的字符串

# scala - 为什么以下 Scala 函数称为闭包？

> ID：12615091
> 
> 赞同：3
> 
> 时间：2012-09-27T06:10:07.730
> 
> 标签：scala, closures

对于以下问题： http: [//pastie.org/4825115](http://pastie.org/4825115)，这是我的代码： http: [//pastie.org/private/n22zohyshn2ymqrbrb3g](http://pastie.org/private/n22zohyshn2ymqrbrb3g)

```
def randList(len: Int, n: Int): List[Int] = len match {
  case 0 => List()
  case len => scala.util.Random.nextInt(n) :: randList(len-1, n)
} 
```

但我不知道为什么 randList 被称为闭包。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T07:07:15.060

根据我的理解`randList`，绝对**不是**闭包（[维基百科](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)似乎同意），因为 - 在您提供的代码片段中 - 它仅取决于局部变量（参数也被视为局部变量）。考虑到 的主体`randList`，没有所谓的*自由变量*，即不从当前词法作用域获取值的变量，后者就是方法体本身。`len`和`n`都是当前词法范围的变量，因为它们都是 . 的封闭定义的参数`randList`。

考虑这个例子：

```
var n = 10
val f = (x: Int) => x + n

println(f(1)) // 11

n = 20
println(f(1)) // 21 
```

该函数`f`是一个闭包，因为它不仅依赖于它的参数，而且还依赖于在它自己的词法范围之外声明的变量（即`n`）。

维基百科文章提到闭包是由一个函数定义的，以及一个声明自由参数的词法范围。下一个示例说明了这一点：

```
// n == 20
// f as above

def foo(g: Int => Int) = {
  val n = 100
  g(1)
}

println(foo(f)) // 21 
```

的结果`foo(f)`仍然是`21`虽然`foo`定义了自己的局部变量`n`，但可以假设`f`现在使用 this `n`。但是，闭包`f`与围绕其声明的词法范围耦合，这是评估`n`时取值的地方`f`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T16:49:52.447

我同意@Malte，因为 randList 不依赖于函数外部声明的任何变量。所以这个函数不是闭包。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T06:26:22.637

据我了解，闭包是一个可以引用另一个函数中的状态的函数。查看此线程以获取更多详细信息：[什么是“闭包”？](https://stackoverflow.com/questions/36636/what-is-a-closure).

在这个问题中，由于`randList`没有引用任何外部变量，所以它不是闭包......

# c# - 错误：将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

> ID：12615102
> 
> 赞同：1
> 
> 时间：2012-09-27T06:11:05.853
> 
> 标签：c#, .net, sql-server-2008

我正在尝试使用表单中的数据将数据输入到我的 SQL Server 2008 中。我正在使用 DateTimePicker 从表单中选择日期并将此数据输入到数据库中，但是当我尝试运行表单时出现以下错误：

> *将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。
> 该语句已终止*

这是下面我的表单的代码：

```
private void btnAddBooking_Click(object sender, EventArgs e)
{
            DateTime requested = dtpRequested.Value;
            DateTime pickup = dtpPickup.Value;
            DateTime estDropoff = dtpEstimatedDrop.Value;

            SAF.AddNewBooking(requested, pickup, estDropoff, selectedStatus.StatusId, selectedRate.RateId);
            dtpRequested.CustomFormat = " ";
            dtpPickup.CustomFormat = " ";
            dtpEstimatedDrop.CustomFormat = " ";

            cbStatus.SelectedIndex = 0;
            cbRateOfPayment.SelectedIndex = 0;

            MessageBox.Show("Booking Created");
            tabControl2.SelectTab(2);
} 
```

这是我存储方法的外观中的代码：

```
public void AddNewBooking(DateTime requestedD, DateTime pickupD, DateTime estDropOff, int statusId, int rateId)
{
            dao.AddNewBooking(requestedD, pickupD, estDropOff, statusId, rateId);
}//end CreateBooking 
```

这是`INSERT`我的 DAO 中的语句代码：

```
sql = "INSERT INTO [Transaction] (TransactionId, RequestedDateOfPickup, ActualDateOfPickup, EstimatedDropOffDate, StatusId, RateId)";
sql += String.Format("VALUES('{0}', '{1}', '{2}', '{3}', {4}, {5})", transactionId, requestedD, pickupD, estDropOff, statusId, rateId);

cn = new SqlConnection(Properties.Settings.Default.UKRENTALSConnectionString);
cmd = new SqlCommand(sql, cn);

cn.Open();
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:20:55.153

可能与正在运行的机器的区域设置有关，并且最终传递给插入语句的日期格式类似于：

```
27/09/2012 4:17:42 PM 
```

（在我写这篇文章时是澳大利亚的当前日期）。

SQL Server 可能试图将其转换为它使用的任何日期格式，但不能（例如认为第一个参数是月份，但 27 大于 12）。

尝试格式化日期`YYYY-MM-DD`格式：

```
2012-09-27 
```

或者更好的是，改用参数，因为那里存在 SQL 注入漏洞。

# wix - 更新文件的版本号，但累积更新无法更新文件

> ID：12615103
> 
> 赞同：0
> 
> 时间：2012-09-27T06:11:07.350
> 
> 标签：wix, installshield, patch, wix3.5, msp

我们最近发布了一个应用程序版本 2.10.3.X。

并收到了一些修复请求，我们发布了一个小更新（版本为 2.10.4.X）。[ 1 个 2.10.4.1 版本的 dll 和 2 个 xap 文件被更改]

现在他们需要一个小更新 (2.10.5.x) [一个 2.10.5.1 版本的 dll 和 xap 已更改]。

更新应该是累积的。（如果直接安装在 2.10.3.X 之上，2.10.5.x 也应该安装 2.10.4.x 更改）：

*   在 2.10.3.X 之上安装 2.10.5.x 时，它正在正确安装更改。[替换所有 2 dll 和 3 xap]
*   在 2.10.4.X 之上安装 2.10.4.x 时，它不会更新文件。我检查了 msp 日志文件。

它说相同的版本，不会更新。（但dll版本已正确更改）。

msi 是用 wix 编写的，补丁是通过 InstallShield 2010 service pack1 完成的。我没有使用 2 个以前的 msi ，而是启用“对目标 RTM 版本的小更新（需要 MST 3.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:03:45.957

对于它是一个小的升级，版本变化很大。如果 Windows Installer 将其视为版本更改，则前三个数字之一必须更改。因此，从 2.10.4.x 到 2.10.4.y 是一个小更新，而不是小升级，并且变得更难推理。更改前三个数字之一，例如您描述的其他工作示例场景，听起来您可以正常工作。

# javascript - 如何在没有 api 密钥的情况下使用谷歌地图

> ID：12615104
> 
> 赞同：27
> 
> 时间：2012-09-27T06:11:09.377
> 
> 标签：javascript, google-maps, google-maps-api-3

嗨，我正在使用此代码在谷歌地图中使用获取方向。但是当我从其他机器上运行它时，它显示错误无效的 api 密钥。如何在没有 api 密钥的情况下使用同一张地图。

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAAuPsJpk3MBtDpJ4G8cqBnjRRaGTYH6UMl8mADNa0YKuWNNa8VNxQCzVBXTx2DYyXGsTOxpWhvIG7Djw" type="text/javascript"></script>
    <style type="text/css">
    body {
      background:#FFE1C7;
      font-family: Verdana, Arial, sans serif;
      font-size: 11px;
      margin: 2px;
    }
table.directions th {
      background-color:#EEEEEE;
    }

    img {
      color: #000000;
    }
    </style>
    <script type="text/javascript">

    var map;
    var gdir;
    var geocoder = null;
    var addressMarker;

    function initialize() {
      if (GBrowserIsCompatible()) {      
        map = new GMap2(document.getElementById("map_canvas"));
        gdir = new GDirections(map, document.getElementById("directions"));
        GEvent.addListener(gdir, "load", onGDirectionsLoad);
        GEvent.addListener(gdir, "error", handleErrors);

        setDirections("Bangalore", "Mysore", "en_US");
      }
    }

    function setDirections(fromAddress, toAddress, locale) {
      gdir.load("from: " + fromAddress + " to: " + toAddress,
                { "locale": locale });
    }

    function handleErrors(){
     if (gdir.getStatus().code == G_GEO_UNKNOWN_ADDRESS)
       alert("No corresponding geographic location could be found for one of the specified addresses. This may be due to the fact that the address is relatively new, or it may be incorrect.\nError code: " + gdir.getStatus().code);
     else if (gdir.getStatus().code == G_GEO_SERVER_ERROR)
       alert("A geocoding or directions request could not be successfully processed, yet the exact reason for the failure is not known.\n Error code: " + gdir.getStatus().code);

     else if (gdir.getStatus().code == G_GEO_MISSING_QUERY)
       alert("The HTTP q parameter was either missing or had no value. For geocoder requests, this means that an empty address was specified as input. For directions requests, this means that no query was specified in the input.\n Error code: " + gdir.getStatus().code);

    //   else if (gdir.getStatus().code == G_UNAVAILABLE_ADDRESS)  <--- Doc bug... this is either not defined, or Doc is wrong
    //     alert("The geocode for the given address or the route for the given directions query cannot be returned due to legal or contractual reasons.\n Error code: " + gdir.getStatus().code);

     else if (gdir.getStatus().code == G_GEO_BAD_KEY)
       alert("The given key is either invalid or does not match the domain for which it was given. \n Error code: " + gdir.getStatus().code);

     else if (gdir.getStatus().code == G_GEO_BAD_REQUEST)
       alert("A directions request could not be successfully parsed.\n Error code: " + gdir.getStatus().code);

     else alert("An unknown error occurred.");
    }

    function onGDirectionsLoad(){
        // Use this function to access information about the latest load()
        // results.

        // e.g.
        // document.getElementById("getStatus").innerHTML = gdir.getStatus().code;
      // and yada yada yada...
    }

    </script> 
```

任何人都可以帮助我...提前谢谢..

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T06:22:11.037

**注意：这个答案现在已经过时了。您现在需要拥有 API 密钥才能使用谷歌地图。[阅读更多](https://cloud.google.com/maps-platform/user-guide/)**

* * *

您需要将您的 API 从 V2 更改为 V3，因为 Google Map Version 3 不需要 API Key

看看[这个](http://googlegeodevelopers.blogspot.com/2010/03/introducing-new-google-geocoding-web.html)。。

写你`script`的

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-06-02T10:48:32.053

现在您必须拥有 API 密钥。您可以在谷歌开发者控制台中生成它。这是解释的[链接](https://developers.google.com/maps/documentation/javascript/get-api-key#registering-authorized-urls)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-06T15:41:56.837

[来源](https://cloud.google.com/maps-platform/user-guide/?__utma=102347093.1234358392.1485178307.1525620926.1525620926.1&__utmb=102347093.0.10.1525620926&__utmc=102347093&__utmx=-&__utmz=102347093.1525620926.1.1.utmcsr=google%7Cutmccn=(organic)%7Cutmcmd=organic%7Cutmctr=(not%20provided)&__utmv=-&__utmk=191062186&_ga=2.176534117.1130731548.1525620899-1234358392.1485178307)

> 2016年 6**月**，Google 宣布他们将停止支持无密钥使用，这意味着任何不包含 API 密钥或客户端 ID 的请求。**这将于2018**年 6 月 11 日生效，**不再** **支持**无钥匙访问

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-20T14:12:31.733

例如，您仍然可以在谷歌地图共享按钮中使用免费的 iframe [![在此处输入图像描述](../Images/20e25b8c94c8590dcd118bcdfe0db410.png)](https://i.stack.imgur.com/NSCK8.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-30T14:48:20.997

嘿，你可以使用这个 insted

```
<iframe width="100%" height="100%" class="absolute inset-0" frameborder="0" title="map" marginheight="0" marginwidth="0" scrolling="no" src="https://maps.google.com/maps?width=100%&amp;height=600&amp;hl=en&amp;q=%C4%B0ikaneir+(Mumma's%20Bakery)&amp;ie=UTF8&amp;t=&amp;z=14&amp;iwloc=B&amp;output=embed" style="filter: scale(100) contrast(1.2) opacity(0.4);"></iframe> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-30T08:03:46.833

这个简单的代码可以 100% 工作，您只需要更改 'lat'、'long' 以显示地址

```
<iframe src="http://maps.google.com/maps?q=25.3076008,51.4803216&z=16&output=embed" height="450" width="600"></iframe> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-13T06:15:41.097

下面的代码不需要任何api在您的网站上嵌入地图

**?q=在这里搜索**

完整网址

**[https://maps.google.com/maps?q=chennai&t=&z=13&ie=UTF8&iwloc=&output=embed](https://maps.google.com/maps?q=chennai&t=&z=13&ie=UTF8&iwloc=&output=embed)**

完整代码

```
<div class="mapouter"><div class="gmap_canvas"><iframe width="600" height="500" id="gmap_canvas" src="https://maps.google.com/maps?q=isat software solutions&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe></div></div> 
```**

# php - 如何在 android 平板电脑中运行本地 php 文件？

> ID：12615106
> 
> 赞同：1
> 
> 时间：2012-09-27T06:11:32.917
> 
> 标签：php, android, cordova, jetty

我有一个包含 MySQL 数据库的 PHP 项目，我想在没有任何服务器的 android 平板电脑上运行它，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:14:38.753

不容易，而且这只是一个 cli 解释器，所以如果你正在寻找类似 WAMP for android 的东西，我相信你不走运，但如果你已经扎根，并且只想从命令行，这些家伙有一个包：

[http://phpforandroid.net/](http://phpforandroid.net/)

# android - 如何在android的sqlite中转义像'这样的特殊字符

> ID：12615113
> 
> 赞同：45
> 
> 时间：2012-09-27T06:12:00.260
> 
> 标签：android, sqlite, special-characters

我有一个函数正在对 SQLite 数据库中的表执行查询。我声明一个常量：`public static final String CANADA_HISTORY = "Canada's History";`. 这存储在一个`String`变量中，比如说`difficulty`，

我有一个查询：

```
Cursor c = mDb.rawQuery("select * from Questions_answers where CHAPTERS = '"+difficulty+"'" , null); 
```

它在撇号附近抛出异常。

日志输出：

```
I/Database( 1170): sqlite returned: error code = 1, msg = near "s": syntax error
D/AndroidRuntime( 1170): Shutting down VM
W/dalvikvm( 1170): threadid=1: thread exiting with uncaught exception (group=0x40015560)
E/AndroidRuntime( 1170): FATAL EXCEPTION: main
E/AndroidRuntime( 1170): android.database.sqlite.SQLiteException: near "s": syntax error: , while compiling: select * from Questions_answers where CHAPTERS  = 'Canada's History' 
```

我也试过：

```
1\.  difficulty=difficulty.replaceAll("'","''");
2\.  difficulty=difficulty.replaceAll("'","\'");
3\.  difficulty = DatabaseUtils.sqlEscapeString(difficulty); 
```

除此之外，它对我有用`Canada History`，我的意思是没有特殊字符的单词。

请给我解决问题的建议谢谢。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-09-27T06:27:00.397

***SQL 标准指定字符串中的单引号通过将两个单引号放在一行中来进行转义。在这方面，SQL 的工作方式类似于 Pascal 编程语言。SQLite 遵循这个标准。例子：***

```
INSERT INTO xyz VALUES('5 O''clock'); 
```

参考：[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q14)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-11-22T20:20:52.663

最好的方法是使用专门为此目的设计的原生 Android 方法：

```
DatabaseUtils.sqlEscapeString(String) 
```

这是它的在线文档：

*   [Android 开发者上的 sqlEscapeString()](http://developer.android.com/reference/android/database/DatabaseUtils.html#sqlEscapeString(java.lang.String))

在我看来，使用这种方法的主要优点是由于方法名称清晰，所以可以自我记录。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-07-10T09:44:20.487

对我有用的是

```
if (columnvalue.contains("'")) {
    columnvalue = columnvalue.replaceAll("'", "''");
} 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-09-27T06:15:07.057

首先用这个替换char

```
difficulty=difficulty.replaceAll("'","\\'"); 
```

然后在您的查询中传递它

```
"select * from Questions_answers where CHAPTERS='"+difficulty+"'"; 
```

**编辑 ：**

```
 q = "select * from Questions_answers where CHAPTERS = ?";
    database.rawQuery(q, new String[] { difficulty}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T06:32:40.300

你可以试试`Cursor c = mDb.rawQuery("select * from Questions_answers where CHAPTERS = \""+difficulty+"\"" , null);`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-10T12:05:22.657

这将是相同的：

```
if (columnValue.contains("'")) 
    columnValue = columnValue.replaceAll("'", "[']"); 
```

或者

```
if (columnValue.contains("'")) 
    columnValue = columnValue.replaceAll("'", "\\\'"); 
```

但实际上我们使用下一个符号 % 和 _

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-19T08:55:51.693

`DatabaseUtils.sqlEscapeString(s)`本质上，是将所有单引号 ( )替换`'`为两个单引号 ( `''`)，并在字符串的开头附加一个单引号，在字符串的末尾附加一个单引号。
因此，如果您只想转义字符串，此函数应该可以工作：

```
private static String escape(String s) {
    return s != null ? s.replaceAll("\'", "\'\'") : null;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-17T08:50:09.593

据我了解，有两种方法，

> String test= "Android 的版本" test= test.replace("'","''");

这种情况绝对没问题，但我肯定会建议使用以下方法。

> String test= "Android 的版本" test= test.replaceAll("'","\'");

当我们尝试使用 '.

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-09-27T06:25:09.397

你不需要逃避 \ 吗？所以它会是`replaceAll("'", "\\'")`或者我错了？

# iphone - 如何在不更改 iPhone 应用程序中的设备方向的情况下更改应用程序的方向

> ID：12615114
> 
> 赞同：1
> 
> 时间：2012-09-27T06:12:01.457
> 
> 标签：iphone, objective-c, ios

我想更改应用程序的方向而不更改 iphone 应用程序中的设备方向。我想以编程方式将我的视图从纵向模式更改为横向模式。

并且还想知道这是否会被苹果商店接受？

谢谢

现在我从其他人那里得到了解决方案，如下所示

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

当你在那个时候添加这一行时，会出现一个警告，为了删除这个警告，只需在你的实现文件上添加下面的代码..

```
@interface UIDevice (MyPrivateNameThatAppleWouldNeverUseGoesHere)

    - (void) setOrientation:(UIInterfaceOrientation)orientation;

    @end 
```

然后在下面的方法中，如果需要，只需编写此代码..

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

    {

        return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);

    } 
```

但现在想知道这是否被苹果应用商店接受？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:29:15.873

使用这条线以编程方式改变方向......

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

并且当您当时添加这一行时，会出现一个警告并删除此警告只需在您的实现文件中添加波纹管代码..

```
@interface UIDevice (MyPrivateNameThatAppleWouldNeverUseGoesHere)
- (void) setOrientation:(UIInterfaceOrientation)orientation;
@end 
```

然后在下面的方法中，如果需要，只需编写此代码..

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    //    return NO;
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

我希望这对你有帮助..

:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:32:25.153

添加类变量

```
Bool isInLandsCapeOrientation; 
```

在 viewDidLoad

将此标志设置为

```
isInLandsCapeOrientation = false; 
```

添加以下函数

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     if (!isInLandsCapeOrientation) {
         return (UIInterfaceOrientationIsPortrait(interfaceOrientation));

     }else {
         return  (UIInterfaceOrientationIsLandscape(interfaceOrientation));
     }
} 
```

要将方向从纵向更改为横向，让它发生在按钮操作上

```
 - (IBAction)changeOrientationButtonPressed:(UIButton *)sender
{
    isInLandsCapeOrientation = true;
    UIViewController *viewController = [[UIViewController alloc] init];
    [self presentModalViewController:viewController animated:NO];
    [self dismissModalViewControllerAnimated:NO];
} 
```

这对我来说很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:06:28.100

要将方向纵向模式更改为横向模式，请使用此代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

使用此代码以编程方式更改方向...

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:15:15.820

文档将方向属性描述为只读的，所以如果它有效，我不确定你是否可以依赖它在未来工作（除非 Apple 做了聪明的事情并改变了这一点；强制改变方向，不管如何用户当前拿着他们的设备，这是一个明显的功能需求）。

作为替代方案，在 viewDidLoad 中插入的以下代码将成功（并且有点奇怪）强制定向（假设您已经修改了 shouldAutorotateToInterfaceOrientation ）：

```
if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
{
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    UIView *view = [window.subviews objectAtIndex:0];
    [view removeFromSuperview];
    [window addSubview:view];
} 
```

显然，如果用户当前以纵向模式持有他们的设备（因此假设您的设备`shouldAutorotateToInterfaceOrientation`仅设置为横向，并且如果用户以纵向模式持有他们的设备，则此例程会将其转换为横向）。如果您仅设置为纵向`UIDeviceOrientationIsPortrait`，您只需交换。`UIDeviceOrientationIsLandscape``shouldAutorotateToInterfaceOirentation`

出于某种原因，从主窗口中删除视图然后重新添加它会强制它查询`shouldAutorotateToInterfaceOrientation`并正确设置方向。鉴于这不是 Apple 认可的方法，也许人们应该避免使用它，但它对我有用。你的旅费可能会改变。但这也涉及其他技术。检查 [SO讨论](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T06:51:38.330

如果您只想在横向更改特定视图..那么您可以在其 viewDidLoad 中尝试以下操作

```
 float   angle = M_PI / 2; 
    CGAffineTransform transform = CGAffineTransformMakeRotation(angle);
   [ [self.view] setTransform:transform]; 
```

# ruby-on-rails - Rails 通过间接关联显示属性

> ID：12615118
> 
> 赞同：0
> 
> 时间：2012-09-27T06:12:17.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model

新来这里的rails。我的关联设置如下，它可能不是理想的方式，因此非常欢迎任何建议：

```
User has many posts (posts table has user_id)
User has one profile (profile table has user_id) 
```

在我的帖子控制器视图中，我想显示属于拥有帖子的用户的个人资料的名称 (profile.name)。

我天真的第一个猜测是，`<%= @post.user.profile.name %>`但这显然行不通。

这是我的模型中定义的关联：

```
class User < ActiveRecord::Base
  has_many :posts
  has_one :profile
end

class Post < ActiveRecord::Base
  belongs_to :user
end

class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

这是视图中的代码： <%= @post.user.profile.name %>

错误是未定义的方法配置文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:17:23.207

您必须在模型 user.rb 中提及以下内容

```
has_many :posts
has_one :profile 
```

配置文件.rb

```
belongs_to :user 
```

post.rb

```
belongs_to :user 
```

然后`<%= @post.user.profile.name %>`应该工作。

如果您的数据仍然存在问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:22:49.840

您需要在和模型中定义`belongs_to`关系才能完成这项工作。例如：`posts``profile`

```
class User < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :user
end 
```

`profile`对模型做同样的事情

# jsp - 如何在jsp中获取控制器名称？

> ID：12615125
> 
> 赞同：5
> 
> 时间：2012-09-27T06:12:59.253
> 
> 标签：jsp, spring-mvc, controller

我正在使用 spring mvc 开发一个非常小的 Web 应用程序，在控制器返回的我的 jsp 视图中，我想获取控制器的名称。

一种方法是我们可以在 ModelandView 中传递名称，但我不想这样做。因为我正在发送一些其他对象的列表。

如果有的话，我正在寻找其他最佳解决方案。

提前感谢， Laxmi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:10:25.757

以下是我想到的一些方法：

1.  使用在请求中传递它`request.setAttribute("name", "controller name");`。然后在你的 jsp 中你可以调用`${ param.name }`.

2.  在会话中使用`session.setAttribute("name", "controller name");`. 然后在你的 jsp 中你可以调用`${ name }`.

# sharepoint - 如何在登录后立即将 SharePoint 用户分配到每个用户组的不同登录页面

> ID：12615127
> 
> 赞同：0
> 
> 时间：2012-09-27T06:13:10.187
> 
> 标签：sharepoint, dispatcher, usergroups

我需要在登录后立即将用户分派到每个用户组的不同登录页面，似乎 SharePoint 没有提供有关登录事件的 API，所以我实现了一个 Web 部件并将其添加到主页以处理分派，这将起作用完美的 util 用户注销和登录，SharePoint 有用户上次登录的历史记录，准确地说，是 url 中的一个参数，`Source`用于处理登录后的重定向，因此用户将更长时间地转到他们自定义的登录页面。

我进行了很多搜索，发现有人使用自定义登录来执行此操作，这太复杂了，客户端不会让我触摸他们的 Active Directory。

我无能为力知道该怎么做，有人可以对此有所了解，任何帮助或建议都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:22:20.310

您为什么不在母版页中使用委托控件，如果您通过登录页面输入，它会检查会话中的值。在登录页面上，您将值添加到指定此用户已通过登录页面进入的会话。

# azure - 自由模式下的 Windows Azure 网站出站数据

> ID：12615128
> 
> 赞同：1
> 
> 时间：2012-09-27T06:13:15.150
> 
> 标签：azure, azure-web-app-service

所有，我已经在 Windows Azure 中部署了一个网站，我可以从中上传和下载文件，该文件存储在 Windows Azure 存储 Blob 中。我注意到，在免费模式下，每天的最大出站数据为 165 MB，而入站数据是无限的，如[价格详细信息](https://www.windowsazure.com/en-us/pricing/details/#web-sites)所述。所以我想知道如果出站数据量超过 165MB，网站会发生什么。因为在我的网站上上传或下载的文件的最大大小将大于 200MB。我没有看到任何关于这种情况的价格细节。并且还担心网站在这种情况下是否可以正常运行。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:54:56.940

如果超出大小，免费站点将停止工作。如果您需要这么多，您可能需要考虑在预览期间以每月约 10 美元的价格共享选项。当您超过 165MB 时，共享选项不会限制您，您只需为您使用的内容付费。

# javascript - 如何在javascript中调试“函数未定义”错误

> ID：12615131
> 
> 赞同：0
> 
> 时间：2012-09-27T06:13:25.837
> 
> 标签：javascript

我是 javascript 的新手。我正在使用 firebug 调试我的程序，但出现“未定义函数”错误。我在网上搜索，有人说这是因为函数中的语法错误。但是那个函数很大，我现在不能使用firebug（因为它只会给我“未定义”的错误），有什么好的调试方法吗？有什么工具可以使用吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:16:09.270

这*可能*是由定义函数的脚本中的语法错误导致脚本未执行且未定义函数引起的，但我发现通常当您有错字时会发生该错误。
例如：

```
function doSomething() {
}
dosomething(); 
```

在那里，我忘了大写`s`. 由于 JavaScript 区分大小写，因此无法找到该函数。

* * *

你可以做的调试是找到你实际调用的函数，然后将它与定义的函数列表进行*比较*。如果我们只处理全局函数，那么您可以将其粘贴到 JavaScript 控制台（必要时删除换行符）以查看您定义的所有全局函数：

```
for(var key in window) {
    if(Object.prototype.hasOwnProperty.call(window, key)) {
        if(typeof window[key] === 'function' &&
           window[key].toString() !== '[object Function]' &&
           window[key].toString().indexOf('[native code]') === -1) {
            console.log(key);
        }
    }
} 
```

^(（这在某些情况下没有列出一些（例如`[native code]`出现在非本地函数中），但它们不太可能。）)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:17:34.123

您可以发布函数声明。可能是您正在使用`function expression`

**函数表达式**

```
var f = function({alert(1);}); 
```

**函数语句**

```
function foo() {alert(2);} 
```

在执行`function expression`该代码行之前，该函数不存在。

使用 a`function statement`函数在编译时存在。

当然，它也可能是一个范围问题，但我们无法看到没有代码。

# android - Android 4.0.3 版发送彩信问题

> ID：12615136
> 
> 赞同：1
> 
> 时间：2012-09-27T06:13:51.547
> 
> 标签：android, mms

嗨，我想通过我的应用程序发送彩信。为此，我的代码是

```
void sendMMS()
    {
        try
        {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            Drawable drawable = imageView.getDrawable();
            Bitmap bitmapPicked = ((BitmapDrawable) drawable).getBitmap();
            bitmapPicked.compress(CompressFormat.JPEG, 75, bos);
            byte[] image = bos.toByteArray();
            File file = new File(Environment.getExternalStorageDirectory() + File.separator + "test.jpg");
            file.createNewFile();
            // write the bytes in file
            FileOutputStream fo = new FileOutputStream(file);
            fo.write(image);

            Log.i(TAG, "image = " + image);

            Intent intentEmail = new Intent(Intent.ACTION_SEND);
            intentEmail.setType("text/plain");
            String[] recipients = new String[] { "" };

            intentEmail.putExtra(Intent.EXTRA_EMAIL, recipients);
            intentEmail.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
            intentEmail.putExtra(Intent.EXTRA_TEXT, "body of email");
            intentEmail.putExtra("sms_body", "body of sms");

            intentEmail.setType("image/jpeg");
            intentEmail.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + file.getAbsolutePath()));

            startActivity(intentEmail);
        } catch (android.content.ActivityNotFoundException ex)
        {
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            ex.printStackTrace();
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    } 
```

当用户点击一个按钮时，这个方法就会被调用，它会显示一个可用选项列表来执行这个操作。所以对于发送彩信，用户必须选择“消息”选项。虽然这适用于 Android 2.3 版，但是当我在 4.0.3 版上运行应用程序时，在可用选项列表中它不显示“消息”选项。这是发送彩信所必须的。

当我删除线条时

```
intentEmail.setType("image/jpeg");
intentEmail.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + file.getAbsolutePath())); 
```

然后列表显示“消息传递”选项，但我无法删除它。

我真的不明白它有什么问题，或者我可能不得不为 4.0.3 版本添加更多内容。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:04:49.747

好的，我解决了这个问题。

我的新代码是

```
void sendMMS()
    {
        try
        {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            Drawable drawable = imageProduct.getDrawable();
            Bitmap bitmapPicked = ((BitmapDrawable) drawable).getBitmap();
            bitmapPicked.compress(CompressFormat.JPEG, 75, bos);
            byte[] image = bos.toByteArray();
            File file = new File(Environment.getExternalStorageDirectory() + File.separator + "test.jpg");
            file.createNewFile();
            // write the bytes in file
            FileOutputStream fo = new FileOutputStream(file);
            fo.write(image);

            Log.i(TAG, "image = " + image);

            Intent intentMMS = new Intent(Intent.ACTION_SEND);
            intentMMS.setType("image/jpg");
            intentMMS.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
            intentMMS.putExtra("sms_body", messageFacebook);
            intentMMS.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
            startActivity(intentMMS);
        } catch (android.content.ActivityNotFoundException ex)
        {
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            ex.printStackTrace();
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    } 
```

# android - iPhone Android：内存处理，哪一个使用更多的内存？

> ID：12615137
> 
> 赞同：0
> 
> 时间：2012-09-27T06:13:51.567
> 
> 标签：android, iphone, memory

在 iPhone SDK 中：

```
NSString * abc= @"123"; 
NSString *temp=abc; 
```

在安卓中：

```
String abc ="123";   
String temp=abc; 
```

在这种情况下，哪一个使用更多的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:21:13.670

没有办法说 - 这是两种不同的语言，运行在完全不同的操作系统和硬件上。Objective-C 被编译为本机代码，而 Android 的 Java 被编译为字节码，然后在运行时进行解释。

但是，由于字符串是两种语言的内置构造，​​因此极有可能在这两种语言上都非常有效。基本上，您不必担心在移动应用程序中处理字符串的内存效率——还有更紧迫的问题！

# javascript - 将 JSON 字符串发布到 ASP.NET MVC 3 操作导致空参数

> ID：12615147
> 
> 赞同：4
> 
> 时间：2012-09-27T06:14:25.307
> 
> 标签：javascript, asp.net, json, asp.net-mvc-3

我将一个 JSON 字符串发布到 asp.net MVC，如下所示。

AJAX 调用

```
$.ajax({
            type: "POST",
            url: "@(storeLocation)IDR/OpcInsertCustomerProfile/",
            data: JSON.stringify(currSelection),
            contentType: "application/json",
            success: function(data) {
              alert('success : ' + JSON.stringify(data));
            },
            error: function(data) {
             alert('Error : ' + JSON.stringify(data));
            }
          }
        ); 
```

在控制器中：

```
[HttpPost]
        [ActionName("OpcInsertCustomerProfile")]
        public JsonResult OpcInsertCustomerProfile(string currSelectionData)
        {
            try
            {
                JavaScriptSerializer ser = new JavaScriptSerializer();
                var res = ser.Serialize(currSelectionData);
                return Json(currSelectionData, JsonRequestBehavior.AllowGet);

            }
            catch (Exception exc)
            {
                return Json(new { error = 1, message = exc.Message });
            }
        } 
```

调试器指示操作被成功调用，但是接收到的传入字符串参数始终为空。Firebug 'post' 显示传出参数是正确的 json 对象。我期待看到 JSON 字符串作为传入参数。请注意，我不想将其反序列化为适当的对象。我要做的就是将字符串以 JSON 格式“原样”存储在数据库中。稍后需要将其检索并按原样传递给 Javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:18:33.763

尝试这个 ：

```
$.ajax({
            type: "POST",
            url: "@(storeLocation)IDR/OpcInsertCustomerProfile/",
            data: { "currSelectionData" : "'" + JSON.stringify(currSelection) + "'" },
            contentType: "application/json",
            success: function(data) {
              alert('success : ' + JSON.stringify(data));
            },
            error: function(data) {
             alert('Error : ' + JSON.stringify(data));
            }
          }
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:57:12.700

一种方法是允许操作以 POST 数据而不是 JSON“字符串化”数据的形式接收参数。为此，请在不使用 JSON.Stringify 的情况下发布数据。希望这是你需要的。

如果不是，您可能想尝试创建一个对象只是为了接收这个简单的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:30:20.597

实际上，我在选择国家/地区时填写了我的状态下拉列表，我确实喜欢这样

在我的控制器中，我采取了行动，它以 json 格式返回我的数据，如下所示

```
public JsonResult State(int countryId)
        {               
            var stateList = CityRepository.GetList(countryId);
            return Json(stateList, JsonRequestBehavior.AllowGet);
        } 
```

在我看来

```
<script type="text/javascript">
    function cascadingdropdown() {
        $("#stateID").empty();
        $("#stateID").append("<option value='0'>--Select State--</option>");
        var countryID = $('#countryID').val();
        $.ajax({
            url: "/City/State",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        });
    } 
</script> 
```

我想这会帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T11:27:59.360

通过 Ajax 发送 json 时，我认为这是 Ajax 中 data 属性的正确方法： `data: "{'parameterNameInAction':'" + JSON.stringify(jsonData) + "'}"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T06:20:14.013

查看您的操作方法：该方法接受带有序列化 JSON 的字符串是否正确，而不是再次将该字符串序列化为 JSON，然后关闭结果并序列化并再次返回相同的字符串？

如果您使用 application/json 类型发送请求，ASP.NET MVC 会尝试反序列化接收到的字符串并将其绑定到操作参数：在您的情况下，它会尝试**在**JSON 对象中查找属性 currSelectionData。那个属性存在吗？也许您希望整个字符串作为`currSelectionData`参数接收？然后您需要使用 FormCollection 或 Request.Form 代替，因为默认模型绑定器不支持这一点。

# jquery - 当jquery请求ajax时页面停止响应

> ID：12615152
> 
> 赞同：0
> 
> 时间：2012-09-27T06:14:45.357
> 
> 标签：jquery, ajax

```
$.get(
'http://request.url',function(response){
document.write(response.returnText);
}); 
```

ajax url需要很长时间才能响应，处理这个请求时，页面不会响应，比如链接的所有元素都不能点击。

我知道 ajax 是一个异步请求，并且不会阻塞主（页面）线程，但是大家，为什么页面没有响应？

# android - 放大图像后自动缩小图像

> ID：12615153
> 
> 赞同：2
> 
> 时间：2012-09-27T06:14:46.320
> 
> 标签：android, android-imageview, zooming

我正在使用*Android 3.0开发**RDP*应用程序。我通过*InputStream*（来自服务器套接字）连续显示图像。我在其中自定义[**TouchImageView.java**](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)以放大和缩小图像和手势事件。**[](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)**

 ****在*Android 3.0*（Acer 平板设备）中放大图像后，对于下一张图像（来自服务器的*InputStream*），图像会自动缩小并以正常模式显示。但在*Android 4.0*（三星平板设备）中，对于下一个图像（来自服务器套接字的*InputStream*），图像以缩放模式显示。

我需要两个设备的独特行为，即放大后，下一个图像（来自服务器套接字的输入流）以缩放模式显示。****

# django - 如何在 Django 中获取当前登录用户的用户 ID？

> ID：12615154
> 
> 赞同：157
> 
> 时间：2012-09-27T06:14:46.757
> 
> 标签：django, django-models, django-authentication

如何获取当前登录用户的id？

在`models.py`：

```
class Game(models.model):
    name = models.CharField(max_length=255)
    owner = models.ForeignKey(User, related_name='game_user', verbose_name='Owner') 
```

在`views.py`：

```
gta = Game.objects.create(name="gta", owner=?) 
```

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-09-27T06:17:26.323

首先确保您已将中间件添加到您的`SessionMiddleware`设置中。`AuthenticationMiddleware``MIDDLEWARE_CLASSES`

当前`user`在`request`对象中，您可以通过以下方式获取它：

```
def sample_view(request):
    current_user = request.user
    print current_user.id 
```

`request.user`会给你一个`User`代表当前登录用户的对象。如果用户当前未登录，`request.user`将设置为`AnonymousUser`. 您可以通过 field 将它们区分开来`is_authenticated`，如下所示：

```
if request.user.is_authenticated:
    # Do something for authenticated users.
else:
    # Do something for anonymous users. 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-07-24T12:18:36.597

您可以使用以下代码访问当前登录用户：

```
request.user.id 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-27T06:18:47.497

假设您指的是 Django 的[Auth User](https://docs.djangoproject.com/en/dev/topics/auth/#users)，在您看来：

```
def game(request):
  user = request.user

  gta = Game.objects.create(name="gta", owner=user) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T14:35:16.667

我在 ajax 视图中写了这个，但它是一个更广泛的答案，给出了当前登录和注销用户的列表。

该`is_authenticated`属性始终`True`为我的用户返回，我认为这是预期的，因为它只检查 AnonymousUsers，但如果您要开发一个需要显示登录用户的聊天应用程序，那么这证明是无用的。

这将检查过期会话，然后根据解码的`_auth_user_id`属性确定它们属于哪个用户：

```
def ajax_find_logged_in_users(request, client_url):
    """
    Figure out which users are authenticated in the system or not.
    Is a logical way to check if a user has an expired session (i.e. they are not logged in)
    :param request:
    :param client_url:
    :return:
    """
    # query non-expired sessions
    sessions = Session.objects.filter(expire_date__gte=timezone.now())
    user_id_list = []
    # build list of user ids from query
    for session in sessions:
        data = session.get_decoded()
        # if the user is authenticated
        if data.get('_auth_user_id'):
            user_id_list.append(data.get('_auth_user_id'))

    # gather the logged in people from the list of pks
    logged_in_users = CustomUser.objects.filter(id__in=user_id_list)
    list_of_logged_in_users = [{user.id: user.get_name()} for user in logged_in_users]

    # Query all logged in staff users based on id list
    all_staff_users = CustomUser.objects.filter(is_resident=False, is_active=True, is_superuser=False)
    logged_out_users = list()
    # for some reason exclude() would not work correctly, so I did this the long way.
    for user in all_staff_users:
        if user not in logged_in_users:
            logged_out_users.append(user)
    list_of_logged_out_users = [{user.id: user.get_name()} for user in logged_out_users]

    # return the ajax response
    data = {
        'logged_in_users': list_of_logged_in_users,
        'logged_out_users': list_of_logged_out_users,
    }
    print(data)

    return HttpResponse(json.dumps(data)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T04:42:04.950

这就是我通常在模板中获取当前登录用户及其 ID 的方式。

```
<p>Your Username is : {{user|default: Unknown}} </p>
<p>Your User Id is  : {{user.id|default: Unknown}} </p> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-22T17:05:22.293

***对于模板内***

这就是我通常在模板中获取当前登录用户及其 ID 的方式。

```
<p>Your Username is : {{user}} </p>
<p>Your User Id is  : {{user.id}} </p> 
```

# sql - 选择多列按一列按计数排序

> ID：12615157
> 
> 赞同：4
> 
> 时间：2012-09-27T06:15:10.613
> 
> 标签：sql

我在 Oracle 中有以下数据集：

```
c1   c2   c3
1A2  cat  black
1G2  dog  red
B11  frog green
1G2  girl  red 
```

试图得到以下结果。基本上我试图首先获取具有重复 c1 的行。

```
c1   c2   c3
1G2  dog  red
1G2  girl  red
B11  frog green
1A2  cat  black 
```

从 t1 group by c1 order by count(*) desc 开始 select c1，但不知道如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:20:44.907

尝试这个：

这将适用于几乎所有 RDBMS

```
SELECT  t.c1, t.c2,t.c3 
FROM    your_table t
JOIN(
        select c1,count(*) as cnt from your_table
        group by c1 )a
ON      a.c1=t.c1
ORDER BY a.cnt desc,t.c2,t.c3 
```

# [SQL 小提琴演示](http://sqlfiddle.com/#!2/06a66/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:17:07.180

从 c1 列获取所有重复项可以通过简单的排序来实现：

```
SELECT * FROM <table> ORDER BY C1 ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:20:25.073

```
select c1,c2,c3
from tbl
order by count(*) over (partition by c1) desc 
```

# javascript - 在 dijit.form.ValidationTextBox 上设置约束

> ID：12615165
> 
> 赞同：0
> 
> 时间：2012-09-27T06:15:40.950
> 
> 标签：javascript, dojo

我正在调用一个函数 onblur .. 该函数调用一个 ajax 并且该 ajax 获取字符串 ..

现在我想如果字符串中的值可用..然后文本框变成红色..

我的ajax代码是

```
function ucheck(){
                dojo.xhrPost({
                    // The URL to request
                    url: "ucheck",
                    timeout :  3000 ,
                    content: {
                    username: dojo.byId("pref_id").value

                    },
                    // The method that handles the request's successful result
                    // Handle the response any way you'd like!
                    load: function(result) {
                        var fi=result;
                        document.getElementById('co').innerHTML=fi // this is print the value in lable

                    }
                });
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:22:03.150

我不确定您是否尝试了以下示例并相应地更改了代码：

[https://dojotoolkit.org/reference-guide/1.8/dijit/form/ValidationTextBox-tricks.html#dijit-form-validationtextbox-tricks](https://dojotoolkit.org/reference-guide/1.8/dijit/form/ValidationTextBox-tricks.html#dijit-form-validationtextbox-tricks)

# javascript - 有什么方法可以等待 AJAX 响应并停止执行？

> ID：12615169
> 
> 赞同：59
> 
> 时间：2012-09-27T06:16:06.370
> 
> 标签：javascript, jquery, ajax

这是我想执行的一些代码。我想等待 AJAX 响应，这样我就可以从服务器返回一些东西。有什么办法可以做到这一点？

```
function functABC(){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        success: function(data) {
            return data;
        }
    });

    //Wait for AJAX (???)
}

var response = functABC(); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-27T06:22:40.833

# 新的，使用 jquery 的 promise 实现：

```
function functABC(){

  // returns a promise that can be used later. 

  return $.ajax({
    url: 'myPage.php',
    data: {id: id}
  });
}

functABC().then( response => 
  console.log(response);
); 
```

很好读，例如[这里](http://michaelsoriano.com/working-with-jquerys-ajax-promises-and-deferred-objects/)。

这实际上不是“同步”，但我认为它实现了 OP 的意图。

# 旧的，（jquery 的`async`选项已被弃用）：

所有 Ajax 调用都可以异步完成（使用回调函数，这将是在“成功”键之后指定的函数）或同步完成 - 有效地阻塞并等待服务器应答。要获得同步执行，您必须指定

```
async: false 
```

就像[这里描述的](http://api.jquery.com/jQuery.ajax/)

但是请注意，在大多数情况下异步执行（通过成功回调）就可以了。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2017-08-04T14:45:52.553

使用 Promise 时，它​​们可以在 Promise 链中使用。async=false 将被弃用，因此使用 Promise 是您的最佳选择。

```
function functABC() {
  return new Promise(function(resolve, reject) {
    $.ajax({
      url: 'myPage.php',
      data: {id: id},
      success: function(data) {
        resolve(data) // Resolve promise and go to then()
      },
      error: function(err) {
        reject(err) // Reject the promise and go to catch()
      }
    });
  });
}

functABC().then(function(data) {
  // Run this when your request was successful
  console.log(data)
}).catch(function(err) {
  // Run this when promise was rejected via reject()
  console.log(err)
}) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-09-27T06:42:55.040

简单的答案是关闭`async`。但这是错误的做法。正确的答案是重新思考如何编写其余代码。

而不是这样写：

```
function functABC(){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        success: function(data) {
            return data;
        }
    });
}

function foo () {
    var response = functABC();
    some_result = bar(response);
    // and other stuff and
    return some_result;
} 
```

你应该这样写：

```
function functABC(callback){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        success: callback
    });
}

function foo (callback) {
    functABC(function(data){
        var response = data;
        some_result = bar(response);
        // and other stuff and
        callback(some_result);
    })
} 
```

也就是说，不是返回结果，而是将需要完成的代码作为回调传入。正如我所展示的，回调可以嵌套到与函数调用一样多的级别。

* * *

*快速解释为什么我说关闭异步是错误的：*

关闭异步将在等待 ajax 调用时冻结浏览器。用户不能点击任何东西，不能滚动，在最坏的情况下，如果用户内存不足，有时当用户将窗口拖出屏幕并再次拖入时，他会看到空白区域，因为浏览器被冻结并且无法重绘。对于像 IE7 这样的单线程浏览器，情况更糟：所有网站都冻结了！遇到这种情况的用户可能会认为您的网站有问题。如果您真的不想异步执行，那么只需在后端进行处理并刷新整个页面。它至少不会让人觉得有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-28T13:50:21.830

试试这个代码。它对我有用。

```
 function getInvoiceID(url, invoiceId) {
    return $.ajax({
        type: 'POST',
        url: url,
        data: { invoiceId: invoiceId },
        async: false,
    });
}
function isInvoiceIdExists(url, invoiceId) {
    $.when(getInvoiceID(url, invoiceId)).done(function (data) {
        if (!data) {

        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-28T07:22:39.233

现在我更喜欢使用 async 函数和 await 语法

```
async function functABC(){
    await $.ajax({
        url: 'myPage.php',
        data: {id: id},
        success: function(data) {
            return data;
        }
    });

    //Wait for AJAX
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-27T06:19:52.260

将`async:false`属性与 url 和数据一起使用。这将有助于立即执行 ajax 调用，您可以从服务器获取和使用数据。

```
function functABC(){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        async:false
        success: function(data) {
            return data;
        }
    });
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-09-27T06:19:55.390

**方法一：**

```
function functABC(){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        success: function(data) {
            return data;
        },
        complete: function(){
              // do the job here
         }
    });
}

var response = functABC(); 
```

**方法二**

```
function functABC(){
    $.ajax({
        url: 'myPage.php',
        data: {id: id},
        async: false,
        success: function(data) {
            return data;
        }        
    });

   // do the job here
} 
```

# android - 获取传感器数据可以减少 CPU 时间吗？

> ID：12615171
> 
> 赞同：0
> 
> 时间：2012-09-27T06:16:12.937
> 
> 标签：android

我正在构建一个应用程序，该应用程序需要在其中一个加速度传感器上具有高分辨率，但根本没有来自任何其他传感器的数据。所以，当我在听事件时，我正在做以下事情：

```
 mSensorManager.registerListener(this, mAccelerometer,
      SensorManager.SENSOR_DELAY_FASTEST); 
```

问题是，每次传感器发生变化时都会触发该事件，并进行检查——浪费了大量的 CPU 时间，这些时间可以用于更好的事情。

有没有办法节省这个 CPU 时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:25:45.163

尝试另一个标志：

```
SENSOR_DELAY_FASTEST    //get sensor data as fast as possible
SENSOR_DELAY_GAME       //rate suitable for games
SENSOR_DELAY_NORMAL     //rate (default) suitable for screen orientation changes
SENSOR_DELAY_UI         //rate suitable for the user interface 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:54:37.277

从 API 3 开始，您可以注册单个传感器。使用下面的方法：

```
 try {
        sensorMgr = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);

        sensors = sensorMgr.getSensorList(Sensor.TYPE_ACCELEROMETER);
        if (sensors.size() > 0) sensorGrav = sensors.get(0);

        sensorMgr.registerListener(this, sensorGrav, SensorManager.SENSOR_DELAY_FASTEST);

    } catch (Exception ex1) {
        try {
            if (sensorMgr != null) {
                sensorMgr.unregisterListener(this, sensorGrav);
                sensorMgr = null;
            }
        } catch (Exception ex2) {
            ex2.printStackTrace();
        }
    } 
```

并且仅在加速度传感器发生变化时才会调用侦听器。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T07:32:31.430

> 我不想为每个传感器调用一个函数，只为我感兴趣的那个

这就是 Android 的工作方式，但只有在您注册多个传感器时才会发生这种情况。如果您想读取多个传感器，您可以使用 a`switch-case`过滤您最喜欢的传感器。

```
@Override
public void onSensorChanged(SensorEvent event) {
    synchronized (this){
        switch (event.sensor.getType()) {
            case Sensor.TYPE_ACCELEROMETER:
                //Do your magic here
                break;
            case Sensor.TYPE_MAGNETIC_FIELD:
                System.arraycopy(event.values, 0, magneticFieldValues, 0,
                        event.values.length);
                break;
        }
    }
} 
```

> 有没有办法节省这个 CPU 时间？

你真的需要`SENSOR_DELAY_FASTEST`吗？您阅读的速度越快，您消耗电池的速度就越快。如果您更改了它，您将节省 CPU 时间，因为您不必像使用时那样多次读取传感器，`SENSOR_DELAY_FASTEST`也不会执行那么多次该`onSensorChanged`方法。

请记住，使用`FASTEST, GAME, NORMAL or UI`并不意味着发生更改时您获得数据的速度有多快。这意味着设备读取注册传感器的频率（无论值是否相同）并`onSensorChanged`在最后一个值与刚刚读取的值不同时执行该方法（两者都来自相同传感器）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T05:08:36.563

你只需要听一个传感器：

```
 sensorManager = (SensorManager)context.getSystemService(Context.SENSOR_SERVICE);
    accSensor = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    sensorManager.registerListener(this, accSensor, SensorManager.SENSOR_DELAY_GAME); 
```

现在就性能而言，根据我的经验，即使最快也不会对性能产生重大影响，但需要记住一些细节。值到达时应立即转储到另一个线程中进行处理。在传感器线程中进行所有处理可能会影响未来样本的性能或交付时间。

将值从 SensorData 中复制出来，并且不要保留对值数组的引用。这些是固定池的一部分，以后可能会重复使用，您不希望在您的代码下更改这些。

如果您关心精度，则 SENSOR_DELAY_FASTEST 通常不适合。速度的代价是数据不稳定。以最快的速度将传感器数据转储到 lof，并将设备放在稳定的平面上。它仍然会倾倒大量样本，因为它认为有很多变化需要报告，而使用 SENSOR_DELAY_GAME 时，样本会减慢，因为没有什么要报告的，这是正确的。摩托罗拉是另一个故事，因为他们积极压制重复样本并将设备放在平坦的表面上会看到报告的样本数量变为 0。

# c# - 将文件从 Internet 下载到 ASP.NET MVC Web 应用程序

> ID：12615175
> 
> 赞同：0
> 
> 时间：2012-09-27T06:16:35.293
> 
> 标签：c#, asp.net-mvc, iis

对于我目前正在处理的 Web 应用程序，我想将文件从 Internet 下载到我的 Web 服务器。我可以使用下面的代码将文件下载到 Web 服务器的硬盘驱动器，我应该为目标路径设置什么才能使其正常工作。我们计划在共享托管环境中托管此站点。

```
using System.Net;

using(var client = new WebClient())
{
    client.DownloadFile("http://file.com/file.txt", @"C:\file.txt");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:20:41.160

我认为常见的方法是这样的：

```
string appdataFolder = AppDomain.CurrentDomain.GetData("DataDirectory").ToString(); 
```

或者

```
string appdataFolder = System.Web.HttpContext.Current.Server.MapPath(@"~/App_Data"); 
```

另请注意，WebClient 类实现了 IDisposable，因此您应该使用 dispose 或使用 struct。
我渴望你阅读一些 c# 的命名约定（局部变量通常以小写字母开头）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:38:14.097

您可以通过 ftp 请求将其从您的机器上传到服务器，

```
string _remoteHost = "ftp://ftp.site.com/htdocs/directory/";
    string _remoteUser = "site.com";
    string _remotePass = "password";
    string sourcePath = @"C:\";

    public void uploadFile(string name)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(_remoteHost +name+ ".txt");
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential(_remoteUser, _remotePass);

        StreamReader sourceStream = new StreamReader(sourcePath + name+ ".txt");
        byte[] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
        sourceStream.Close();
        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();

        response.Close();
    } 
```

# php - 显示/隐藏 - 即使单击提交后表单也不会关闭，除非用户单击隐藏

> ID：12615176
> 
> 赞同：0
> 
> 时间：2012-09-27T06:16:42.563
> 
> 标签：php, javascript, jquery

```
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<button id="hidr">Hide</button>
<button id="showr">Show</button>
<div>
<span style='display:none'>

<?php
    <form id='form1' name='form1' method='post' action='do.php?sales/new_stat_rep'>
        <table  class='generic'>

        <tr bgcolor='13a0ff'><td colspan='6'><center><b>CREATE STATUS REPORT</b></center></td></tr>
            <tr bgcolor='4ab6ff'>
                <td>J.O. Date</td><td><input type='text' name='sm_jodate' value='MM/DD/YYYY' onfocus='showCalendarControl(this)' style='width:100%'></td>
                <td>Proposal Number</td><td><input type='text' name='sm_proposalno' style='width:100%'></td>
                <td>Project Duration</td><td><input name='sm_proj_duration' type='text' style='width:100%'></td>
            </tr>

        </table>
            <input type='submit' value='Save' name='sumbit'>
            <input type='hidden' name='button' value='yes'>
    </form>

?>

    </span>

  </div>

<script>
    $("#showr").click(function () {
      $("span").show(1000);
    });
    $("#hidr").click(function () {
      $("span:last-child").hide("fast", function () {
        // use callee so don't have to name the function
        $(this).prev().hide("fast", arguments.callee); 
      });
    });

</script> 
```

* * *

此代码首先有一个隐藏和显示的 2 按钮。为了查看表单，用户必须单击显示。我担心的是，如果我在表单中提交输入时可能会关闭，除非用户单击隐藏。按钮，以及如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:28:49.417

尝试这个

```
<input type='submit' value='Save' name='sumbit' id="SubmitFrm"> 
```

在您的脚本中添加以下代码

```
$("#SubmitFrm").click(function(){
     $("#hidr").click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:45:02.077

```
$("#showr").click(function () {
  $("span").show(1000);
});
$("#hidr").click(function () {
  $("span:last-child").hide("fast", function () {
    // use callee so don't have to name the function
    $(this).prev().hide("fast", arguments.callee); 
  });
});
$("#submit").click(function(e){
   e.preventDefault();
   $("#form1").submit();
}); 
```

尝试这个。这是工作。将 id 添加到您的提交按钮（在我的代码中为 id="submit"）。

[演示](http://jsfiddle.net/mangalauwu/kh9Vm/1/)

# java - Linux 机器上的 Java SQLite 连接

> ID：12615177
> 
> 赞同：3
> 
> 时间：2012-09-27T06:16:44.723
> 
> 标签：java

我正在Linux平台上工作。

我已经下载了 Eclipse，也有 SQLite。
我想使用 JDBC 连接连接到 SQLite。
我是 JAVA 编程的新手。

我得到的错误是：

```
java.lang.ClassNotFoundException: org.sqlite.JDBC
at java.net.URLClassLoader$1.run(URLClassLoader.java:217) 
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at ConnectSqlite.main(ConnectSqlite.java:18)
java.lang.NullPointerException
at ConnectSqlite.main(ConnectSqlite.java:32) 
```

这是我的代码：

```
Class.forName("org.sqlite.JDBC"); 
connection = DriverManager.getConnection("jdbc:sqlite:/home/neeraj/neeraj/dbclass/data/neeraj.db");
statement = connection.createStatement(); 
resultSet = statement .executeQuery("SELECT EMPNAME FROM EMPLOYEEDETAILS"); 
while (resultSet.next()) { 
    System.out.println("EMPLOYEE NAME:" + resultSet.getString("EMPNAME")); 
} 
```

我应该怎么做才能让我的代码运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:17:37.910

您需要一个装有`org.sqlite.JDBC`.

我们确实需要驱动程序来使用 JDBC 进行数据库连接，这些驱动程序以 jar 文件的形式提供给我们。

只需下载 jar 文件并将其包含到您的类路径中。

[新链接下载](https://bitbucket.org/xerial/sqlite-jdbc/downloads/)

下面是他的原始答案。

你可以从[这里下载](http://code.google.com/p/sqlite-jdbc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:22:29.960

确保在 Eclipse 类路径 Project->BuildPath->libraries ->Add External jars 中有 sqlitejdbc-v056.jar。

# build - 学习 Gradle 构建工具的最佳资源

> ID：12615178
> 
> 赞同：42
> 
> 时间：2012-09-27T06:16:45.807
> 
> 标签：build, gradle

从基础级别学习 Gradle 构建工具的最佳资源是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-27T06:50:10.073

[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)是迄今为止最好的资源。您可以从“入门”一章开始，它有很多很好的指导可以帮助您开始基本设置和构建脚本基础知识。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T15:12:39.093

使用 Gradle 构建和测试（来自[http://gradle.org/books/](http://gradle.org/books/)）也值得一读，以了解您可以/可能想要做什么的一些选项的高级概述。不像用户指南那么全面，但很好的介绍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T06:19:37.690

对于视频教程，我会推荐 gradlewares 网络研讨会。
[http://gradleware.com/resources](http://gradleware.com/resources)

如果你不想更多，你可以看看 vimeo，那里有很多 gradle 视频，尽管质量不断变化。
在 vimeo 上的视频中，我会推荐 Luke Daley 和 Hans Dockter 的视频，他们都在 gradleware 工作。

# google-apps-script - Google CDN 未从 Google 站点“插入 html 框”工具加载/提供 jQuery-ui 库

> ID：12615179
> 
> 赞同：0
> 
> 时间：2012-09-27T06:16:48.477
> 
> 标签：google-apps-script

> **可能重复：**
> [Google CDN 不会从 Google 站点“插入 html 框”加载/提供 Jquery-ui 库](https://stackoverflow.com/questions/12614768/jquery-ui-library-will-not-loaded-served-by-google-cdn-from-the-google-site-ins)

我正在努力使用 Google 网站的“插入 html 框”工具来让 CDN 为 jQuery 用户界面库（jQueryUI）提供服务，但没有任何成功。

我使用了以下代码及其变体，没有任何主题，但无济于事；

```
<link rel="stylesheet"   href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script> 
```

jQuery 库加载良好，但不是 jQueryUI 库。谷歌开发者网站建议这应该可以工作，但我只收到错误消息——“无法加载外部 url jquery-ui.css”或“将元素主体折叠到父级”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:56:47.440

[在这里](http://code.google.com/p/google-caja/issues/detail?id=1549)提交的错误，您可以跟踪。在该跟踪器上标记为已修复后，它将在站点中修复一两周。

# c++ - 标准 c++ 程序执行期间的函数调用

> ID：12615180
> 
> 赞同：1
> 
> 时间：2012-09-27T06:16:50.807
> 
> 标签：c++, stack, execution, function-calls

我有以下代码：

```
int func(int a)
{
  int b=2;
  int c,d,e,f,g;
  //some code which involves a,b,c,d,e,f,g
} 

int main()
{
 int s=3;
 func(s);
} 
```

现在发生的是，当 main 开始执行时：
1.它将 s 推入堆栈
2.它调用 func()
3.func() 将 b,c,d,e,f,g 推入堆栈
4.现在当涉及的代码a,b,c,d,e,fg 被执行，为了知道 func() 的所有局部变量的值必须被弹出。然后检索 a 的值。现在如果再次使用 bcdefg，如何检索它们的值（因为它们已经被弹出）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T06:24:12.600

局部变量和参数实际上并没有被*压入*堆栈。相反，编译器添加代码以将堆栈指针更改为足以容纳所有变量，然后在引用局部变量时，编译器有代码从堆栈指针的*偏移量中获取值。*

我建议您查看示例程序的汇编程序输出以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:36:26.853

**void func(int a)**的等效代码

 **```
 void func(int a)
{
00413880  push        ebp  
00413881  mov         ebp,esp 
00413883  sub         esp,108h 
00413889  push        ebx  
0041388A  push        esi  
0041388B  push        edi  
0041388C  lea         edi,[ebp-108h] 
00413892  mov         ecx,42h 
00413897  mov         eax,0CCCCCCCCh 
0041389C  rep stos    dword ptr es:[edi] 
  int b=2;
0041389E  mov         dword ptr [b],2 
  int c,d,e,f,g;
  //some code which involves a,b,c,d,e,f,g
} 
```

现在让我们看看以下代码的等效汇编代码：

```
 void func(int a)
{
  int b=2;
  int c,d,e,f,g;
  c = 10 ;
  d = 15 ;
  e = 20 ;
  a = a + 2 ;
} 
```

汇编代码::

```
 void func(int a)
{
00413880  push        ebp  
00413881  mov         ebp,esp 
00413883  sub         esp,108h 
00413889  push        ebx  
0041388A  push        esi  
0041388B  push        edi  
0041388C  lea         edi,[ebp-108h] 
00413892  mov         ecx,42h 
00413897  mov         eax,0CCCCCCCCh 
0041389C  rep stos    dword ptr es:[edi] 
  int b=2;
0041389E  mov         dword ptr [b],2 
  int c,d,e,f,g;
  c = 10 ;
004138A5  mov         dword ptr [c],0Ah 
  d = 15 ;
004138AC  mov         dword ptr [d],0Fh 
  e = 20 ;
004138B3  mov         dword ptr [e],14h 
  a = a + 2 ;
004138BA  mov         eax,dword ptr [a] 
004138BD  add         eax,2 
004138C0  mov         dword ptr [a],eax 
} 
```

因此，尽管它们被压入堆栈（ESP 或 SP），但指向每个局部变量的指针也被存储，因此可以在需要时轻松访问它们。

就像，当代码需要使用**变量 a**时，**dword ptr [a]**被简单地移动到寄存器**EAX**。

注意：技术上没有推动，而是调整以适应所有变量。（礼貌：约阿希姆·皮勒博格）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:40:21.103

> 为了知道 func() 的所有局部变量的值，必须弹出这一行虽然语法上是模棱两可的。我假设您的意思是说变量在被函数使用时被弹出..

但实际情况是局部变量只有在函数返回给调用者时才会弹出。前提是它们是自动的。另一方面，当函数想要访问（读/写）变量时。它使用距基地的偏移量（距离）来访问它们，因此在访问评估时不会弹出变量的问题。**

# java - 我想在 android 中为电话联系人创建组

> ID：12615183
> 
> 赞同：2
> 
> 时间：2012-09-27T06:17:02.937
> 
> 标签：java, android, android-contentprovider, android-contacts, contactscontract

[想以编程方式在联系人中创建一个新组](https://stackoverflow.com/questions/6134485/want-to-create-a-new-group-in-contacts-programmatically)

我参考了上面的链接，但无法创建组。

我是否应该创建一个数据库，以便它只显示我创建的组。

我们在android中还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:36:22.953

这是一个适用于我创建组的功能：

```
private void creategroup()
{
    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    ops.add(ContentProviderOperation
         .newInsert(ContactsContract.Groups.CONTENT_URI)
         .withValue(ContactsContract.Groups._ID, ANY LONG UNIQUE VALUE)
         .withValue(ContactsContract.Groups.TITLE, GROUP NAME).build());

    try {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } 
    catch (Exception e) {
        Log.e("Error", e.toString());
    }
} 
```

希望它会帮助你。

# java - java中的会话 - 任何最佳实践？

> ID：12615184
> 
> 赞同：0
> 
> 时间：2012-09-27T06:17:04.410
> 
> 标签：java, spring, session, spring-mvc

我遇到了一个代码，其中会话对象以两种不同的方式获得（或者更确切地说以两种不同的方式编写）。

使用`HttpServletRequest`

```
 someMethod(HttpServletRequest request){
 HttpSession session = request.getSession();
 //getAttribute from session
 } 
```

并使用`HttpSession`

```
anotherMethod(HttpSession session){
//getAttribute from session
} 
```

我浏览了这篇[文章](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)和一个关于 SO的[问题。](https://stackoverflow.com/questions/3668153/what-is-session-in-java)但我仍然有一些疑问。

有人可以帮我理解这些之间有什么区别吗？

**更新**

这两个都是 spring 控制器中的方法，它们被映射到不同的 ajax 调用。我知道每个请求对象都有一个会话，但是当您传递一个 HttpSession 对象时，它在哪里找到当前会话对象（加载所有属性）或者它是如何获得的？当我从 javascript 调用该方法时，我根本没有传递任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:25:47.157

```
someMethod(HttpServletRequest request) 
```

在此您正在传递当前`request`对象，您可以从中获取您的`current session`，然后您可以从中获取属性。您可以使用以下方法从您的请求对象中获取当前会话对象：-

```
request.getSession(false) 
```

*注意： - 我们`false`作为参数传递`getSession(false)`以获取任何现有会话。如果不存在会话，它将返回`null`.. 然而，`request.getSession()`将始终创建一个新会话，因此您不会在其他会话中获得任何 prevoius 属性存储。

```
anotherMethod(HttpSession session) 
```

在这里，您`session`从某处传递对象本身。可能是因为，您的`session`对象包含许多属性，并且您不希望方法中有很多参数。

但是您应该在您的所有这些`session`相关任务中完成`Servlet`并将其传递`attribute`给其他类的方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:29:19.507

如果您有单个属性，则不需要浮动会话对象。只需简单地使用会话对象访问它。

```
HttpSession session = request.getSession(true);
session.getAttribute(name); 
```

现在，您可以浮动对象的唯一明智情况`session`是您拥有大量属性，并且您希望每个方法都访问自己的一组属性。在任何情况下，该方法都取决于`session`传递给它，因此它不应该关心它是如何获得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:39:37.613

这两者之间没有太大区别，如果多次调用第二种方法，则可以使用第二种方法，`request.getSession()`通过保持会话有点像本地缓存来消除一个额外的方法调用（除非调用 100 次，否则性能提升可忽略不计）。

例如，。

```
HttpSession session=request.getSession();
getFirstAttr(session);
getSecondAttr(session);
....
getHundredthAttr(session); 
```

如果您使用第一种方法，则该方法被调用的所有时间都会调用一个额外的方法`request.getSession()`。

# android - Android - 确定手指触摸的数量

> ID：12615186
> 
> 赞同：5
> 
> 时间：2012-09-27T06:17:12.623
> 
> 标签：android

如何确定同时触摸屏幕的手指数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T06:19:16.263

你可以通过你`MotionEvent`的 in`onTouchEvent(MotionEvent event)`

```
int pointerCount = event.getPointerCount(); 
```

[**MotionEvent.getPointerCount()**](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerCount%28%29)返回活动指针的数量

# android - 更好的 HTML 格式

> ID：12615188
> 
> 赞同：0
> 
> 时间：2012-09-27T06:17:21.627
> 
> 标签：android, html, formatting, textview

**编辑**：我尝试了一个 WebView，它可以正确呈现 HTML，但它也很慢，并且在加载新数据时会出现视觉闪烁。我正在研究 WebView 内部处理 HTML 格式的内容，因为它本身可能会快一点......

我正在做一个计算器。为了使输入字符串看起来非常漂亮，我一直在使用该`HTML.FromHTML()`方法来处理日志的上标幂和下标，以显示在 textViews 中。例如，以下 HTML 由您的浏览器处理，并且可能看起来正确（在 Chrome 和 IE 上测试）：

# 12+10^(日志[10] (10^(日志[10] (33)) ))

日志的下标 10s 正确定位在其随附的日志文本下方，并且嵌套不会导致问题。现在，`HTML.FromHTML()`在 Android 4.0 中使用：

![...最终](../Images/a03d1bce1b537a68e1853438390641ba.png)

肯定是错的。似乎该`<sub>`标记不是暗示环绕文本样式的下标，而是暗示与基线的垂直偏移。这意味着拥有一个`<sup>`标签将使封闭的文本从基线偏移 1 个恒定量，两个`<sup>`标签将导致其中两个从基线恒定量，等等。更糟糕的是，`<sub>`标签只是减去这个常数值。雪上加霜的是，它不是将`<small>`标签缩放到适当的位置，而是缩放 a `<sup>`or`<sub>`标签内任何文本的偏移量。

有什么方法可以使该`HTML.FromHTML()`方法的行为方式与在 Web 浏览器中呈现文本的方式相同？假设这个问题的答案是“现在不行”或“你可以编写自己的 HTML 解析器！”，有没有人建议创建类似的功能？

谢谢！

# c# - 如何在 C# 中将文件的惰性评估作为 IEnumerable 的 DirectoryInfo.EnumerateFiles() 方法

> ID：12615197
> 
> 赞同：1
> 
> 时间：2012-09-27T06:17:47.687
> 
> 标签：c#, java

在C#中，当你使用IEnumerable接口的DirectoryInfo.EnumerateFiles()方法时，你可以在返回整个集合之前开始枚举名字的集合。在java中如何获取呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:24:52.123

据我所知，在 Java 7 之前你不能。[`File.listFiles()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)基本上，这就是您所拥有的-`FileFilter`当然要承受重载。

Java 7 有一个新的文件系统 API，包括[`FileVisitor<T>`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)您可能想要的。这与拥有可以懒惰访问的文件序列并不*完全相同*，但它可以满足您的需求。您可能想要创建一个[`SimpleFileVisitor<T>`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/SimpleFileVisitor.html).

# php - Swiftmailer setFrom 地址不会改变任何东西

> ID：12615198
> 
> 赞同：2
> 
> 时间：2012-09-27T06:17:51.867
> 
> 标签：php, swiftmailer

我知道我的问题似乎很奇怪。我正在使用 PHP 和 SwiftMailer 包。这是我的代码：

```
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, "ssl")
    ->setUsername('adresim@gmail.com')
    ->setPassword('my_pass');
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance($title)
    ->setFrom(array('adresim@hotmail.com'))
    ->setTo($to_adresses)
    ->setReplyTo("another_address")
    ->setBody($body, "text/html"); 
```

这就是问题所在。当我发送邮件时，它似乎来自我的 gmail 地址。在这个例子中，我使用的是 gmail smtp，一切都很好，但 setFrom 命令似乎根本没有做任何事情。即使我将发件人地址设置为 Hotmail 地址，我的邮件也正常，并且是从我的 gmail 地址发送的。setFrom 命令有什么作用？如何使邮件从给定的 FROM 地址发送？如果 smtp 连接用户名是唯一重要的事情，为什么会有 setFrom 命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:53:29.817

Gmail 要求您在将邮件作为该电子邮件地址发送之前验证发件人地址。因此，您需要在您的个人 gmail 帐户中添加一个新的发件人并对其进行验证。

答案来自：

[将 Gmail 用于 SMTP 时，您可以设置不同的“发件人”地址吗？](https://stackoverflow.com/questions/5431631/using-gmail-for-smtp-setfrom)

# javascript - “？”是什么意思？在对静态 JS 文件的请求中签名意味着什么？

> ID：12615199
> 
> 赞同：4
> 
> 时间：2012-09-27T06:17:55.563
> 
> 标签：javascript, url

我见过很多，我只是不知道这意味着什么。例如：

```
<script src="http://server.com/file.js?y=2345678" type="text/javascript"></script> 
```

如果确实有可能在 javascript 文件中“捕获”“y”的值，那会怎样？

谢谢你。

PS。我知道 mod_rewrite 是什么，这不是答案，以防万一:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:18:47.493

这是为了强制浏览器不缓存文件，让它相信它是一个带有 get 参数的动态文件，而不是一个静态文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:19:42.580

这通常用于促进 JS 文件的缓存。您设置了一个遥远的`Expires`标题，这意味着浏览器可能会缓存它很长时间。如果您更改文件中的某些内容，您还会更新查询字符串中的数字，这将使浏览器重新获取文件。这是有效的，因为缓存用于唯一的文件名，而查询字符串是文件名的一部分（就浏览器而言）。

与此类似的方法是在 Web 服务器中使用重写规则来获取它不关心的文件名的某些部分。这是一个 Nginx 规则来说明我的意思：

```
rewrite ^/style\..*\.css$ /style.css; 
```

我使用这个规则来获得像 一样的文件名`style.42750cad6.css`，它总是指向文件`style.css`。每当我更改时，中间的文本都会更改`style.css`。第一种方法的区别在于它不使用查询字符串，因此缓存将在更多浏览器中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:28:00.320

好的，我以两种方式看待它。

1.  可以用来加载js而不用缓存
2.  对于对服务器的每个请求，服务器可能会记录信息（如果启用了日志记录），如果我将其用于分析，我可以因此对位置使用不同的参数，并且我可以从日志中分析并获取所需的详细信息。

# mysql - 如何索引以避免全表扫描？

> ID：12615202
> 
> 赞同：0
> 
> 时间：2012-09-27T06:18:17.650
> 
> 标签：mysql, optimization, indexing

如何索引以下查询以避免全表扫描？

```
explain SELECT fld1, fld2 FROM tablename WHERE IdReceived > 0; 

+----+-------------+------------------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table            | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+------------------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | tablename        | ALL  |IdReceived _idx| NULL | NULL    | NULL | 99617 | Using where | 
+----+-------------+------------------+------+---------------+------+---------+------+-------+-------------+ 
```

我已将查询修改如下，然后我还可以看到行 id2 (UNION) 正在进行全表扫描。

```
explain SELECT fld1,fld2 FROM tablename WHERE IdReceived=1 UNION SELECT fld1,fld2 FROM tablename WHERE IdReceived>=1;
+----+--------------+------------------+------+---------------+--------------+---------+-------+-------+-------------+
| id | select_type  | table            | type | possible_keys | key          | key_len | ref   | rows  | Extra       |
+----+--------------+------------------+------+---------------+--------------+---------+-------+-------+-------------+
|  1 | PRIMARY      | tablename | ref  | IdReceived _idx  | IdReceived _idx | 4       | const |  8865 |             | 
|  2 | UNION        | tablename | ALL  | IdReceived _idx  | NULL         | NULL    | NULL  | 99617 | Using where | 
| NULL | UNION RESULT | <union1,2>       | ALL  | NULL          | NULL         | NULL    | NULL  |  NULL |             | 
+----+--------------+------------------+------+---------------+--------------+---------+-------+-------+-------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:19:37.293

由于您正在将索引列与常量值进行比较，因此请尽量避免这种情况。

参考这里：[http ://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html](http://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html)

另外我建议在 fld1,fld2 上使用非聚集索引，以使此查询执行得更快

# reporting-services - 报告中的标题问题

> ID：12615215
> 
> 赞同：0
> 
> 时间：2012-09-27T06:18:59.910
> 
> 标签：reporting-services

我有一份报告，其中使用了 8 个表格，页面顶部有标题。条件是标题应该出现在第 5 个表中，并在第 5 个表的每一页上重复。如果第 5 个表格数据分 4 页，则标题应该出现在这 4 页而不是其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:17:16.877

最后找到解决方案：- 放置两个矩形，一个在另一个里面。将表格放在内部矩形内并将其设置为始终可见。将内部矩形的分页符设置为在矩形后插入。设置外部矩形的可见性以使用您的条件表达式。

分页符和条件可见性现在分开了，内部矩形的分页符如果不可见则不会被处理，但如果它是可见的就会被处理。

它没有在报告查看器中显示效果，但在打印和 pdf 中显示效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:06:26.727

不要将表头放在报表上，而是直接将表头放在表上，然后转到表属性并选择“在每一页上重复表头列”。

# facebook - 将 facebook 画布 URL 指向 localhost:3000 时，没有路由匹配 [POST]“/”错误

> ID：12615217
> 
> 赞同：3
> 
> 时间：2012-09-27T06:19:07.400
> 
> 标签：facebook, ruby-on-rails-3, canvas, localhost

我正在尝试学习如何使用 ruby​​/rails 创建一个 facebook 画布应用程序并在本地开发它。

我创建了一个新的演示应用程序并在本地计算机上的 localhost:3000 启动服务器，然后我创建一个新的 facebook 应用程序并将 Canvas URL 指向 localhost:3000。请注意，我选中了启用沙盒选项，并且没有提供安全的 Canvas URL。

当我尝试在 facebook 上访问应用程序的 Canvas 页面时，我看到显示以下错误：

路由错误

没有路线匹配 [POST] "/"

尝试运行 rake 路线以获取有关可用路线的更多信息。

请注意，当我在 localhost:3000 本地访问应用程序时，我没有收到错误消息。我只是从新创建的 rails 应用程序中看到通常的默认“欢迎登机”页面。

任何人都可以请我指出一个解决方案或一套关于如何为 fb 画布开发设置本地环境的正确说明吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:39:05.903

您的服务器或应用程序未正确配置为处理来自 Facebook 的 HTTP POST 请求 - 我不熟悉 rails 的配置方式，但此博客文章似乎提供了一种解决方法：http: [//blog.coderubik.com/2011/ 03/restful-facebook-canvas-app-with-rails-and-post-for-canvas/](http://blog.coderubik.com/2011/03/restful-facebook-canvas-app-with-rails-and-post-for-canvas/)

请注意，加载您的应用程序的初始请求将始终是一个 POST 请求 - 这包含一个`signed_request`值，其中包含您的应用程序用来了解当前用户是谁的数据 - [https://developers.facebook.com/docs/howtos/login/signed -request/](https://developers.facebook.com/docs/howtos/login/signed-request/)有更多细节

# jquery - 使用 Jquery 获取输入类型密码的长度？

> ID：12615218
> 
> 赞同：0
> 
> 时间：2012-09-27T06:19:15.263
> 
> 标签：jquery

我正在尝试获取密码的长度，因此如果密码太短，我会阻止提交表单。这是怎么做到的？

这就是我现在正在尝试的：

```
$('#registerForm input[type="password"]').val.length 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T06:21:34.390

`val`是一个函数，所以你需要写`val()`：

```
$('#registerForm input[type="password"]').val().length 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:47:14.070

你可以加个id`<input id="pw" type="password">`

```
$('#pw').val().length; 
```

**或者**您可以添加一个类`<input class="pw" type="password">`

```
$('.pw').val().length; 
```

**否则**保持原样，您可以使用 jquery 获取长度

```
$('#registerForm input[type="password"]').val().length; 
```

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T06:21:30.887

您需要`val`作为一个函数进行评估。

```
$('#registerForm input[type="password"]').val().length 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:23:33.210

你可以做得到`$('#txtbox').val().length;`长度

**[样品小提琴](http://jsfiddle.net/9cGxs/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T06:25:13.110

使用这个你的代码中有一些错误

```
$('#registerForm input[type="password"]').val().length 
```

# jquery - jquery为div的高度和宽度生成随机数

> ID：12615232
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:19:53.267
> 
> 标签：jquery

我想使用 div 宽度和高度生成一个随机数。生成后，我必须使用 x 和 y 位置放置静态文本，但文本不应重叠。

这个函数会为我生成一个随机数，`Math.floor ( Math.random ( ) );`但是说我想要 n 个数字，它总是可以向我保证文本不会相互重叠。

如何使用高度和宽度生成随机数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:27:15.453

```
x=Math.floor(Math.random()*1000);
y=Math.floor(Math.random()*1000);
$('#idoftextbox').val('X Position is '+x+' and Y Position is '+y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:29:59.990

[***jsFiddle***](http://jsfiddle.net/q58HK/6/)

这是处理文本冲突的更新代码；您需要根据您的文本修改碰撞容差距离（可能还有放弃前的随机尝试次数）。虽然理论上效率非常低，但目前没有任何明显的性能问题，但您可以根据需要进行调整。

一个明显的性能提升是保持坐标列表的排序。这样，您不必在每次插入之前检查每个列表中的每个先前值，并且搜索要插入的正确索引与检查冲突的过程相同。就此而言，您可以通过使用更好的搜索算法简单地`isTooClose`从更改`O(n)`为，您可以轻松找到该算法。`O(log n)`

```
$(document).ready(function() {
    var z = 300, tops = [], lefts = [];

    for (var i = 0; i <= z; i++) {
        var x=0, y=0, j=0;
        while( isTooClose(x, y) && j < 50) {
            x = Math.floor(Math.random() * 500);
            y = Math.floor(Math.random() * 500);
            j++;
        }
        if (j>=50) { alert('1'); }
        $('<div>').css({
            position: "absolute",
            left: x,
            top: y,
            fontSize: 'small'
        }).html("Hello").appendTo('#test');
        lefts.push(x);
        tops.push(y);
    }

    function isTooClose( x, y ) {
        for (var i = 0; i < tops.length; i++) {
            if ( (x + 30 >= lefts[i] && x - 30 <= lefts[i]) &&
                 (y + 10 >= tops[i] && y - 10 <= tops[i]) ) {
                return true;
            }
        }
        return false;
    }
}); 
```

​</p>

# iphone - FMDB使用在线数据库？

> ID：12615235
> 
> 赞同：0
> 
> 时间：2012-09-27T06:19:57.860
> 
> 标签：iphone, sqlite, fmdb

我使用 FMDB 与我的应用程序中的数据库对话，现在我想把这个数据库放到网上，这样就可以在任何地方访问它。

我找到了很多方法，但没有什么真正有趣的，而且总是很混乱。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:50:11.897

您不会真正从 URL 直接打开数据库（如果可能的话）。您应该先下载它并将其缓存在设备上。您可以下载整个 sqlite 文件或放弃 FMDB 并制作 JSON 接口，具体取决于您的应用程序和数据的性质。

# android - 捕获后相机冻结，从未调用 OnpictureTaken 方法

> ID：12615237
> 
> 赞同：1
> 
> 时间：2012-09-27T06:20:13.237
> 
> 标签：android, camera, image-capture

我正在开发一个使用相机捕捉图像的应用程序。我正在使用回调方法进行捕获。**它在除“Huawei MediaPad 7inch”**之外的所有设备上都能正常工作，它有**android 4.0.3**。当我启动我的相机时，在捕获图像后相机冻结并且 OnPicturetaken 方法从未调用过。在 log cat 中，我收到相机错误**“E/Camera(4562): Error -2147483648”**请帮忙。这是我的代码。

```
public void takePicture() {
    try {
        Camera.PictureCallback mPictureCallbackRaw = new Camera.PictureCallback() {
            public void onPictureTaken(byte[] data, Camera c) {
                /** Do nothing */
            } 
        };

        Camera.ShutterCallback mShutterCallback = new Camera.ShutterCallback() {
            public void onShutter() {
                /** Do nothing */
            }
        };

        mPreview.mCamera.takePicture(mShutterCallback, mPictureCallbackRaw, this);
    } catch (Exception ex) {
        NGAndroidUtil.logErr("[CameraPreview] takePicture exception", ex.getMessage(), ex);
    }
} 
```

# android - 如何在没有root权限的情况下运行Android系统应用程序？

> ID：12615240
> 
> 赞同：7
> 
> 时间：2012-09-27T06:20:16.300
> 
> 标签：android, shell, adb

有没有办法在没有root权限的情况下运行Android系统应用程序？我可以通过 adb 执行系统应用程序，例如：

> adb shell /system/bin/screencap -p /sdcard/screen.png

在我自己的应用程序中，我想运行一个没有“su”命令的 shell 命令。有什么办法吗？android如何阻止用户应用程序执行系统应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T06:57:42.387

您应该能够在 java 代码中运行此命令：

```
Runtime.getRuntime().exec("screencap -p /sdcard/screen.png"); 
```

您可以在没有 root 的情况下执行一些 shell 命令。所以你不需要运行“su”。我不确定您是否可以执行屏幕截图。当然，您需要获得写入应用程序中 SD_CARD 的权限。

```
android.permission.WRITE_EXTERNAL_STORAGE 
```

但是为什么你不使用 Android API 来制作你的截图呢？有关更多信息，请阅读 stackoverflow 上的这篇文章：[如何以编程方式在 Android 中截取屏幕截图？](https://stackoverflow.com/questions/2661536/screenshot-android)

Android 的安全模型基于用户 ID，就像 Linux 一样。每个应用程序都有自己的用户 ID。所以你的应用程序有一个像 1001 这样的用户 ID。如果你的用户被允许运行命令，你可以，否则你会收到一个错误。

**编辑：**
您需要 root 才能截取屏幕截图或成为系统应用程序。有一个权限 READ_FRAME_BUFFER 但只有当您是系统应用程序时才能获得它。当应用程序可以截取您设备的屏幕截图时，这是一个安全问题。

我发现这个 API [http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)承诺在没有 root 的情况下截取屏幕截图。我没有测试它。该库启动一个本机服务，然后为您截取屏幕截图。但是每次手机启动时，您都必须运行该服务。所以它获得了系统权限。这真的不太舒服……

结论：没有从代码中获取屏幕截图的好方法......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T19:49:50.163

> 有没有办法在没有root权限的情况下运行android系统应用程序？

必须是**NO**，但有些时候，一些非公开使用的功能仍然**可以使用**。我见过使用 java 反射的例子。

> 我可以通过*adb*执行系统应用程序，例如：...
> 
> 在我自己的应用程序中，我想运行一个没有“su”命令的 shell 命令。有什么办法吗？android如何阻止用户应用程序执行系统应用程序？

我想不是。

问题是**adb shell**和**用户应用程序**根据用户和组 ID（UID 和 GID）具有不同的安全级别。

更多信息：[http ://android-dls.com/wiki/index.php?title=Android_UIDs_and_GIDs](http://android-dls.com/wiki/index.php?title=Android_UIDs_and_GIDs)

*此外，通过应用程序权限*和*隐藏和内部*类、过程等存在限制，这些都是供内部使用的。

**PS：**关于截图。在 android 市场（google play）上，很少有应用程序提供没有 ROOT 访问权限的屏幕截图。*所以，这是可能的。* 虽然，由于 Android 4.0 屏幕截图可以“从框中”获得。

# php - Codeigniter 模型 foreach 将数组传递给控制器 -> 以查看

> ID：12615242
> 
> 赞同：0
> 
> 时间：2012-09-27T06:20:23.890
> 
> 标签：php, codeigniter

这是我的模型-我想分配行并在视图页面上回显，例如`<?php echo $product?>`

```
class Model_products extends CI_Model {

    function printer()
    {

    $id = $this->uri->segment(3, 0);

        $q = $this->db->get_where('printer', array('id' => $id));

        if ($q->num_rows == 1)
        { 
            foreach ($q->result() as $row)
            {

                echo $row->name; # THIS WORKS
                $data['product'] = $row->name;  # THIS DOES NOT WORK
                $data['desc'] = $row->description;
                $data['size'] = $row->size;
                $data['options'] = $row->options;
                $data['more'] = $row->more_info;
            }
        }

    }
} 
```

这是我的控制器

```
public function products()
{

    $this->load->model('Model_products');

    $this->Model_products->printer();

    $this->load->view('products', $data);

    $this->load->view('pricing');
} 
```

我的看法是

```
<h1>
<?php echo $product; ?>
</h1>

<p>
<?php echo $desc; ?>
</p>

<h3>
Size
</h3>
<p>
<?php echo $size; ?>
</p> 
```

**如何正确地将我的模型数组传递给我的控制器，以便我可以在我的视图中回显？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:23:20.100

只需将 $data 返回给控制器

```
class Model_products extends CI_Model {

    function printer()
    {
        $data   =   array();
        $id = $this->uri->segment(3, 0);

        $q = $this->db->get_where('printer', array('id' => $id));

        if ($q->num_rows == 1)
        { 
            foreach ($q->result() as $row)
            {

               // echo $row->name; # THIS WORKS
                $data['product'] = $row->name;  # THIS DOES NOT WORK
                $data['desc'] = $row->description;
                $data['size'] = $row->size;
                $data['options'] = $row->options;
                $data['more'] = $row->more_info;
            }
        }

    return $data;
    }
} 
```

没有赢控制器

```
public function products()
{

    $this->load->model('Model_products');

    $data['products']   =   $this->Model_products->printer();

    $this->load->view('products', $data);

    $this->load->view('pricing');
} 
```

并且在视图中

```
<?   
   echo '<pre>';
   print_r($products);
?> 
```

编辑还要更正您的型号代码。

```
 foreach ($q->result() as $row)
        {

            echo $row->name; # THIS WORKS
            $data[]['product'] = $row->name;  # THIS DOES NOT WORK
            $data[]['desc'] = $row->description;
            $data[]['size'] = $row->size;
            $data[]['options'] = $row->options;
            $data[]['more'] = $row->more_info;
        } 
```

如果您不使用多维数组，它将覆盖最后一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:22:11.207

您的退货声明在哪里

```
if ($q->num_rows == 1)
    { 
        foreach ($q->result() as $row)
        {

            echo $row->name; # THIS WORKS
            $data['product'] = $row->name;  # THIS DOES NOT WORK
            $data['desc'] = $row->description;
            $data['size'] = $row->size;
            $data['options'] = $row->options;
            $data['more'] = $row->more_info;
        }
        return $data;
    } 
```

和/或在您的控制器中

```
public function products()
{ 
   $this->load->model('Model_products');
   $data = $this->Model_products->printer();
   $this->load->view('products', $data);
   $this->load->view('pricing');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:23:54.503

您需要将模型中的数据返回到控制器，然后从那里将数据传递给视图。

在您的模型函数中，在末尾放置一个 return 语句。

```
return $data; 
```

然后在您的控制器中，将模型的返回值分配给一个变量。

```
$data = $this->Model_products->printer(); 
```

这两个步骤应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:40:41.900

I used @raheel's code and it works. But I would just change a bit:

```
 $i=0;
   foreach ($q->result() as $row)
        {

            echo $row->name; # THIS WORKS
            $data[$i]['product'] = $row->name;  # THIS DOES NOT WORK
            $data[$i]['desc'] = $row->description;
            $data[$i]['size'] = $row->size;
            $data[$i]['options'] = $row->options;
            $data[$i]['more'] = $row->more_info;
        } 
```

This will help extracting the data

# ios - 通知小部件如何获取应用程序的设置？

> ID：12615244
> 
> 赞同：0
> 
> 时间：2012-09-27T06:20:25.637
> 
> 标签：ios, widget, communication, jailbreak, notificationcenter

我正在尝试编写一个天气通知中心小部件，其工作方式类似于系统的雅虎天气小部件：点击小部件，打开我自己的天气应用程序，选择一个城市，小部件显示我选择的城市的天气。**但我不知道小部件如何获取天气应用程序的城市设置。**我使用 *notification_center_widget*.nic 来构建我的小部件，这使它看起来像在公告板上运行的独立应用程序（我正确吗？）。现在天气应用程序和小部件都使用存档来保存城市设置。

**系统的天气小部件是如何做到的？**

天气应用程序可以直接在天气小部件的包中写入文件吗？还是天气小部件直接读取天气应用程序中的文件？

我还尝试使用 openURL 将选定的城市名称传递给小部件：将 URL 方案添加到 Resources 文件夹中的 Info.plist，并遵循*UIApplicationDelegate*协议，实现*handleOpenURL*功能。但它不起作用。

我尝试使用 presentModalViewController: 弹出 citySelectViewController 而不是在另一个应用程序中设置城市，但视图控制器仅显示在小部件呈现的小区域中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:20:17.013

我发现一种方法似乎有点像在另一个应用程序中设置小部件的城市作弊。我制作了小部件以将城市设置数据存档在捆绑包的根文件夹中（可以通过 iFile 看到）。由于小部件捆绑包将安装到特定文件夹中。当用户完成选择城市时，天气应用程序可以使用***bundleWithPath***轻松获取小部件的捆绑包和捆绑包中的存档城市设置。然后，当小部件再次运行时，它将读取已经被天气应用程序更改的城市设置数据，并显示我们选择的城市的天气。

# java - 在mac上安装蚂蚁

> ID：12615253
> 
> 赞同：1
> 
> 时间：2012-09-27T06:20:49.257
> 
> 标签：java, android, ant

我已经使用 gcm 在 android 应用程序中开发了推送通知。这里我必须为服务器端设置 GCM。

**通过运行 ant war 生成服务器的 WAR 文件：**

```
$ ant war

Buildfile:build.xml

init:
     [mkdir] Created dir: build/classes
     [mkdir] Created dir: dist

compile:
     [javac] Compiling 6 source files to build/classes

war:
     [war] Building war: dist/gcm-demo.war

BUILD SUCCESSFUL
Total time: 0 seconds 
```

在这里我必须在我的终端上写下**$ ant war**意味着下面的错误是显示的。为什么这个错误出现在这里。我该如何解决这个问题。请帮助我。

错误是：

**构建文件：build.xml 不存在！构建失败**

# java - 自动更新 JTable

> ID：12615267
> 
> 赞同：0
> 
> 时间：2012-09-27T06:21:34.497
> 
> 标签：java, eclipse, swing, jakarta-ee, jtable

我正在从 .txt 文件创建一个 Jtable。.txt 文件会在一段时间内不断更新。我需要知道是否有任何方法可以在运行时在我的 Jtable 中反映 .txt 文件中的这些更改！！！我知道在重新启动时，表会读取 .txt 文件，但有什么方法可以在运行时执行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:39:45.313

我想可能看起来像这样......

```
public class BackgroundMonitor implements Runnable {

    public void run() {

        while (true) {
            // Check to see if the file has changed since the last update...
            // If it has you will want to store the metrics and return true...
            if (hasChanged()) {

                // Load the contents into what ever construct you need to use
                ... = loadContents();

                // Create a new model...
                TableModel model = ... // create a new table model

                // Apply the model to the table...
                applyModel(model);

            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
                Logger.getLogger(ThreadUpdates.class.getName()).log(Level.SEVERE, null, ex);
            }

        }

    }

    protected void applyModel(final TableModel model) {

        // Apply the model to the table, making sure you update within the
        // EDT
        try {
            EventQueue.invokeAndWait(new Runnable() {

                @Override
                public void run() {
                    table.setModel(model);
                }
            });
        } catch (InterruptedException | InvocationTargetException exp) {
            // Handle the update exception....
        }

    }

} 
```

这样做的问题是您每次都强制表完全更新，这可能会变得很慢（随着数据量的增加）并且会使当前选择无效。

如果您可以确定最后一行，您最好只添加那些已更改的行...

在这种情况下，“应用”方法可能看起来像

```
protected void applyModel(final List<?> rowsToBeAdded) {

    // Apply the model to the table, making sure you update within the
    // EDT
    try {
        EventQueue.invokeAndWait(new Runnable() {
            @Override
            public void run() {

                MyUpdatableModel model = (MyUpdatableModel) table.getModel();
                model.addNewRows(rowsToBeAdded);

                // You will need to call fireTableRowsInserted(int firstRow, int lastRow)
                // indiciate where the new rows have been added, but this is best
                // done in the model

            }
        });
    } catch (InterruptedException interruptedException) {
    } catch (InvocationTargetException invocationTargetException) {
    }

} 
```

这是一种更好的方法，因为它只需要表来更新那些已经更新并且不应该影响选择的行......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:23:19.683

您应该编写一个后台线程来不断检查文本文件的内容并不断更新表模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T06:29:00.693

除了`Dan`写的内容，要在后台线程中实际查看您的文件，您可以查看[WatchService API](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。这已被添加到[Java 7](http://radar.oreilly.com/2011/09/java7-features.html)的 SDK 中。它允许注册事件侦听器，当文件更改时通知这些侦听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:27:15.267

这可以通过调用你`TableModel`的`fireTableDataChanged`方法来实现。我假设您的表由`AbstractTableModel`. 如果是这样，您只需要`fireTableDataChanged`在读取文本文件的内容并更新表模型中的值后调用。你可以在这里找到一些细节：

[Java API](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29)

编辑：在下面 Dan 的回复之后 - 您希望您的文本文件监控线程触发该`fireTableDataChanged`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T08:54:02.593

我也不能自动更新。我所做的是，我只是关闭窗口添加再次调用同一个窗口。

# php - 引导 wordpress 导航菜单

> ID：12615270
> 
> 赞同：1
> 
> 时间：2012-09-27T06:21:54.750
> 
> 标签：php, twitter-bootstrap, wordpress-theming

我必须基于 Twitter Bootstrap 构建一个 WordPress 主题。

现在我在导航栏上有一些问题。问题是 WordPress 提供的 html 类（[http://codex.wordpress.org/Function_Reference/wp_nav_menu#Menu_Item_CSS_Classes](http://codex.wordpress.org/Function_Reference/wp_nav_menu#Menu_Item_CSS_Classes)）显然与 Bootstrap 不同。将 wp_nav_menu 包装在具有类 'navbar-inner' 的 div 中似乎是不够的......它需要 navmenu 的外观，但多级仍然不起作用。

是否有任何库或 php 类可以帮助我将精美的 Twitter Bootstrap NavMenu 集成到 WordPress 主题中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:28:43.137

您可能必须编写自定义 Walker 来支持多级。

这是文档： http: [//phpdoc.wordpress.org/trunk/WordPress/Nav_Menus/Walker_Nav_Menu.html](http://phpdoc.wordpress.org/trunk/WordPress/Nav_Menus/Walker_Nav_Menu.html)

你可以从我前段时间写的这个 Walker 开始： [http ://www.emanueletessore.com/bootstrap-navbar-under-wordpress/](http://www.emanueletessore.com/bootstrap-navbar-under-wordpress/)

实际上它管理多级和分隔符。

# sql - SQL Server：为什么是聚集索引扫描而不是表扫描？

> ID：12615272
> 
> 赞同：2
> 
> 时间：2012-09-27T06:21:58.407
> 
> 标签：sql, sql-server

我有以下表格架构 -

```
CREATE TABLE [dbo].[TEST_TABLE]
(
    [TEST_TABLE_ID] [int] IDENTITY(1,1) NOT NULL,
    [NAME] [varchar](40) NULL,
    CONSTRAINT [PK_TEST_TABLE] PRIMARY KEY CLUSTERED 
    (
        [TEST_TABLE_ID] ASC
    )
) 
```

我已经在`TEST_TABLE`.

由于我已将`TEST_TABLE_ID`列标记为主键，因此将在`TEST_TABLE_ID`.

当我运行以下查询时，执行计划会显示`Clustered Index Scan`预期的结果。

```
SELECT * FROM TEST_TABLE WHERE TEST_TABLE_ID = 34 
```

但是，当我运行以下查询时，我期望 Table Scan as NAME 列没有任何索引：

```
SELECT * FROM TEST_TABLE WHERE NAME LIKE 'a%' 
```

但在执行计划中显示`Clustered Index Scan`。

由于 NAME 列没有任何索引，为什么它正在访问聚集索引？

我相信，这是因为聚集索引驻留在数据页上而发生的。

谁能告诉我我的假设是否正确？还是有其他原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:24:58.133

聚集索引是存储所有表数据的索引。所以表扫描和聚集索引扫描是一样的。

在没有聚集索引（“堆”）的表中，表扫描需要爬取所有数据页。这就是查询优化器所说的“表扫描”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:39:22.110

正如其他人已经解释的那样，对于具有聚集索引的表，**聚集索引扫描**意味着**表扫描**。

换句话说，**表就是聚集索引。**

你错的是你的第一个查询执行计划：

```
SELECT * 
FROM TEST_TABLE 
WHERE TEST_TABLE_ID = 34 ; 
```

它执行**聚集索引搜索**而不是扫描。它不必搜索（**扫描**）整个表（聚集索引），它直接进入点（**搜索**）并检查是否`id=34`存在一行。

**[您可以在SQL-Fiddle](http://sqlfiddle.com/#!6/53781/5)**中看到一个简单的测试，以及两个执行计划的不同之处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T06:24:57.903

该表存储*为*聚集索引。扫描表的唯一方法是扫描聚集索引。只有没有聚集索引的表本身才能进行“表扫描”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:30:50.663

这是因为该表有一个聚集索引，它会扫描整个聚集索引以返回基于 where 子句的所有行。您应该如何看到丢失的索引消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T06:52:41.227

当您在表上构建聚集索引时，SQL Server 会根据聚集索引键（在您的情况下为 Test_Table_ID）对该表的行进行逻辑排序。

但是，当您看到聚集索引扫描运算符时，这可能有点误导。如果满足某些条件（相当于 SQL Server 不关心数据的顺序），那么 SQL Server 仍然能够执行无序分配扫描，这更像是表扫描而不是聚集索引扫描，因为它实际上基于 IAM 链按分配顺序读取 CI 的叶级别（表数据页），而不是遵循索引中的指针。这可能会给您带来性能改进，因为碎片（页面不按物理顺序）不会降低性能

要查看是否发生这种情况，请查看执行计划中的 Ordered 属性。如果设置为 False，那么您将进行无序分配扫描。

# android - 安卓：textColor =“@android:color/holo_blue_bright”不工作

> ID：12615278
> 
> 赞同：0
> 
> 时间：2012-09-27T06:22:14.363
> 
> 标签：android, actionbarsherlock, textcolor

我正在使用 ActionBarSherlock 库。

在一个简单的布局中，我有以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/shareWhat"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:textSize="15dp"
        android:text="@string/what_is_the_picture_about_" />

    <TextView
        android:id="@+id/shareProduct"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="@string/product_underlined"
        android:textColor="@android:color/holo_blue_dark"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/sharePrice"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="@string/price_underlined"
        android:textColor="@android:color/holo_blue_light"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/shareStore"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="@string/store_underlined"
        android:textColor="@android:color/holo_blue_bright"
        android:textSize="25dp" />

    <TextView
        android:id="@+id/shareMarket"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="@string/market_underlined"
        android:textColor="@android:color/holo_blue_bright"
        android:textSize="25dp" />

</LinearLayout> 
```

**我希望 textColor 为蓝色， @android:color**中有 3 个不同的值表示蓝色。我用了所有 3 个，来检查哪一个看起来不错。

```
1\. android:textColor="@android:color/holo_blue_dark"
2\. android:textColor="@android:color/holo_blue_light"
3\. android:textColor="@android:color/holo_blue_bright" 
```

但是`white colored text`当我使用第一种两种颜色时，我得到了。如果我使用第三种颜色，则 textView 本身不可见。

甚至没有出现。

为什么会这样？

我正在使用应用程序主题作为

```
android:theme="@style/Theme.Sherlock" 
```

在我的清单中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:38:34.523

这些颜色是平台的一部分，而不是 ActionBarSherlock。它们也是[API 14+ 而已](https://developer.android.com/reference/android/R.color.html#holo_blue_light)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-25T00:22:15.440

android:textColor 属性正在寻找颜色十六进制字符串，即：

```
android:textColor="#0f0" 
```

那会让它变绿。找到您想要的颜色的十六进制值，并将其设置为

# javascript - 在 Brightcove 视频播放器中播放第三方视频

> ID：12615281
> 
> 赞同：0
> 
> 时间：2012-09-27T06:22:29.677
> 
> 标签：javascript, video-streaming, video-processing, brightcove, video-thumbnails

我在网站上托管了一些视频，我想使用 Brightcove 视频播放器播放这些视频。问题是他们只允许播放托管在他们的视频云上的视频，因为他们的播放器代码使用他们的视频云提供的视频 ID（例如 437622）。

如你看到的：

```
<script type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js "></script>
<object id="myExperience1059346274001" class="BrightcoveExperience"> 
<param  name="bgcolor" value="#FFFFFF" />   
<param name="width" value="459" />       
<param name="height" value="305" />   
<param name="playerID" value="1044271449001" />            
<param name="playerKey" value="AQ~~,AAAA8me3D8E~,Xry9K_L-zJWZ-cMfhF8FDDI0BLyJ9W-6" />
<param name="isVid" value="true" />   <param name="dynamicStreaming" value="true" />
<param name="@videoPlayer" value="437622" /> </object> 
```

在这里，此播放器播放 id no= 437622 的视频，我想播放托管在我自己网站上的视频，例如：http: [//video.abc.com/i-zxvm29QW-640D.mp4](http://video.abc.com/i-zxvm29QW-640D.mp4) 与 Brightcove 视频播放器。

这可能会对您有所帮助：http: [//support.brightcove.com/en/docs/best-practices-embedding-video-cloud-media](http://support.brightcove.com/en/docs/best-practices-embedding-video-cloud-media)

有什么办法吗？请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:01:06.480

您不能只是将任意文件加载到客户端的 Brightcove 播放器中，但您可以在 Video Cloud Studio 中创建“[远程资产”。](http://support.brightcove.com/en/docs/creating-videos-remote-video-files)这将成为一个带有 id 的视频，但它在没有上传和转码的情况下使用您的文件。

# ios - 生成报告格式的 PDF

> ID：12615285
> 
> 赞同：0
> 
> 时间：2012-09-27T06:23:05.073
> 
> 标签：ios, pdf, core-graphics

我已经使用 CoreGaraphics 生成了 PDF，其中我已经逐行传递了我想要的 PDF 字符串。但现在我想以报告格式生成它。并且数据会因来自 Web 服务而异。报告格式将包含三列和 N 号。行数（取决于数据）。

如何生成它，请帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:22:46.300

得到解决方案..

[http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/](http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/)

我使用了上面的教程，并且在 drawText 方法中，我使用了 drawInRect: 用于特定列的单个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:35:25.427

我建议你这个框架：[https ://github.com/htsoft/RSReport](https://github.com/htsoft/RSReport)

# python - 字符串中的 django/python 变量？

> ID：12615290
> 
> 赞同：0
> 
> 时间：2012-09-27T06:23:29.380
> 
> 标签：python, django, variables, dynamic

我是 python 新手，需要一些帮助。

我有一个变量

```
q = request.GET['q'] 
```

如何在其中插入变量`q`：

```
url = "http://search.com/search?term="+q+"&location=sf" 
```

现在我不确定公约是什么？我习惯了 PHP 或 javascript，但我正在学习 python，如何动态插入变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:27:14.750

使用String的格式化方法：

```
url = "http://search.com/search?term={0}&location=sf".format(q) 
```

但当然你应该对 q 进行 URL 编码：

```
import urllib
...
qencoded = urllib.quote_plus(q)
url = 
  "http://search.com/search?term={0}&location=sf".format(qencoded) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:41:45.713

一种方法是使用`urllib.urlencode()`. 它接受以键值对作为参数和值的字典（或关联数组或任何你称之为的），你可以将其编码为 url

```
 from urllib import urlencode  
    myurl = "http://somewebsite.com/?"  
    parameter_value_pairs = {"q":"q_value","r":"r_value"}  
    req_url = url +  urlencode(parameter_value_pair) 
```

这会给你`"http://somewebsite.com/?q=q_value&r=r_value"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T07:07:31.607

```
q = request.GET['q']
url = "http://search.com/search?term=%s&location=sf" % (str(q)) 
```

使用它会更快...

# sql-server - 在 vb.net 中将 varchar 转换为 gridview 选定行的 int 时出错

> ID：12615293
> 
> 赞同：0
> 
> 时间：2012-09-27T06:23:35.090
> 
> 标签：sql-server, vb.net, winforms

```
I am deleting selected row from grid view. 
```

使用以下代码行从 gridview 中删除，但未从数据库中删除。它显示了将 varchar 转换为 int 的错误

```
Private Sub dltButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dltButton.Click
            'Dim StudentId As String
            'StudentId =
            'con.Open()
            'cmd.CommandText = "delete from KaiyumVbStudent where StudentID = '"&StudentId&"'"
            'cmd.Connection = con
            Dim i As Integer = DataGridView1.CurrentRow.Index
            DataGridView1.Rows.Remove(DataGridView1.CurrentRow)
            StudentID = CType(DataGridView1.SelectedCells(2), TextBox).Text
            con = New SqlConnection(constring)
            con.Open()
            cmd = New SqlCommand("Delete from KaiyumVbStudent where StudentID = '@StudentID'", con)
            cmd.ExecuteNonQuery()
            Call databind()
        End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:47:07.190

我怀疑这是因为您的参数包含引号。

也就是说，这个：

```
Delete from KaiyumVbStudent where StudentID = '@StudentID' 
```

**可能应该这样读（注意@StudentID**周围没有引号）：

```
Delete from KaiyumVbStudent where StudentID = @StudentID 
```

但是，我看不到您在代码中为`@StudentID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:35:54.683

执行 where 时您可能不会收到数据类型转换错误，`StudentID='1'`但请同意上面的评论，因为您似乎没有设置参数值。如此有效地执行以下 SQL：

`Delete from KaiyumVbStudent where StudentID = '@StudentID'`

# python - 如何通过钩子和python更改svn提交路径

> ID：12615301
> 
> 赞同：0
> 
> 时间：2012-09-27T06:24:05.720
> 
> 标签：python, svn, hook, svn-hooks

每个人。由于丢失了有关 python svn api 的手动文档。我无法解决这个问题。

细节是，当有人将 svn 提交到存储库“/repo/prj1”时。但是，我希望将这些内容提交更改到其他地方，即“/repo/prj2”。我发现了很多关于 python svn 脚本的例子，并尝试使用钩子来做到这一点。但是，我无法解决这个问题。

谁能帮我？先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:31:21.720

据了解，您不能这样做。

见[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)：

> 虽然钩子脚本几乎可以做任何事情，但钩子脚本作者应该在一个方面表现出克制：**不要使用钩子脚本修改提交事务**。虽然使用钩子脚本自动更正提交的文件中存在的错误、缺点或违反策略可能很诱人，但这样做可能会导致问题。Subversion 保留存储库数据的某些位的客户端缓存，如果您以这种方式更改提交事务，这些缓存将变得难以察觉的陈旧。这种不一致会导致令人惊讶和意外的行为。**而不是修改事务，您应该简单地在 pre-commit 钩子中验证事务，如果它不满足所需的要求，则拒绝提交**. 作为奖励，您的用户将了解谨慎、合规的工作习惯的价值。

# matlab - MATLAB 矢量化代码如何“在后台”工作？

> ID：12615309
> 
> 赞同：12
> 
> 时间：2012-09-27T06:24:36.227
> 
> 标签：matlab, vectorization

我了解在 MATLAB 等语言中使用向量化如何通过消除维护循环变量的开销来加速代码，但是向量化实际上是如何在汇编/机器代码中发生的？我的意思是在某个地方仍然必须有一个循环，对吧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T07:55:52.113

Matlab 的“向量化”概念与向量指令概念（例如 SSE）完全不同。这是两组人之间的常见误解：matlab 程序员和 C/asm 程序员。Matlab“向量化”，正如这个词常用的那样，**只是**关于以矩阵索引（向量）的形式表达循环，有时是关于用基本矩阵/向量运算（BLAS）来写东西，而不是写循环本身。Matlab“矢量化”代码不一定表示为矢量化 CPU 指令。考虑以下代码：

```
A = rand(1000);
B = (A(1:2:end,:)+A(2:2:end,:))/2; 
```

此代码计算两个相邻矩阵行的平均值。这是一个“矢量化”的 matlab 表达式。但是，由于 matlab 按列存储矩阵（列在内存中是连续的），因此该操作不会轻易更改为对 SSE 向量的操作：由于我们按行执行操作，因此您需要加载到向量中的数据不会连续存储在记忆中。

另一方面，这段代码

```
A = rand(1000);
B = (A(:,1:2:end)+A(:,2:2:end))/2; 
```

可以利用 SSE 指令和流指令，因为我们一次对两个相邻的列进行操作。

因此，matlab 的“向量化”并不等同于使用 CPU 向量指令。它只是一个用来表示缺少 MATLAB 中实现的循环的词。更令人困惑的是，有时人们甚至使用这个词来表示某些循环已使用**内置**函数实现，例如 arrayfun 或 bsxfun。这甚至更具误导性，因为这些函数可能[比本机 matlab loops 慢得多](https://stackoverflow.com/questions/12522888/arrayfun-can-be-significantly-slower-than-an-explicit-loop-in-matlab-why/12526940#12526940)。正如 robince 所说，如今并非所有循环在 matlab 中都很慢，尽管您确实需要知道它们何时工作，何时不工作。

无论如何，你总是需要一个循环，它只是在 matlab 内置函数/BLAS 中实现，而不是用户的 matlab 代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T07:07:05.810

是的，还有一个循环。但它能够直接在编译后的代码中循环。Fortran（Matlab 最初基于）C 或 C++ 中的循环本身并不慢。它们在 Matlab 中很慢是动态运行时的一个属性（它们在 Python 等其他动态语言中也较慢）。

由于 Matlab 引入了 Just-In-Time 编译器，循环性能实际上已显着提高 - 因此，避免循环的旧指南在最近的版本中不像以前那么重要。

# xslt-1.0 - 确定 xsl-fo 中的最后一页位置

> ID：12615310
> 
> 赞同：0
> 
> 时间：2012-09-27T06:24:37.740
> 
> 标签：xslt-1.0, xsl-fo

我们能否以某种方式确定 XSL-FO 中最后一页的位置？如果我只想将页脚放在最后一页，那该怎么做呢？由于输入数据变化并且不是静态的。因此，根据数据，可以出现任意数量的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T09:36:39.920

希望，现在还不算晚。但无论如何，对于所有感兴趣的人：

1.  创建页面母版

    `<fo:simple-page-master master-name="my-last-page">...</fo:simple-page-master>`

    并将您的页脚作为“区域后”放入该母版中。

2.  将此添加到您的可重复页面主替代方案

    `<fo:conditional-page-master-reference page-position="last" master-reference="my-last-page"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-10T17:19:27.977

这就是定义最后一页的方式。我不知道你的结构，但你可以在一个块中添加它并用你的页脚引用。

```
 <fo:block id="LASTPAGE"></fo:block> 
```

# javascript - 每次ajax请求完成时运行Javascript

> ID：12615317
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:24:55.060
> 
> 标签：javascript, jquery, html, ajax

我在页面上有一个 div，使用 ajax 调用在其上添加了新内容。在那个 div 下面我有一个 Javascript。

现在我希望每次完成 ajax 调用并将内容添加到 div 时执行 javascript。

例如：如果我有类似的东西

```
<div class="results">
     blah blah blah(more contents added after each ajax call)
</div>
<script id="adjust" src="myscript.js"></script> 
```

我希望每次完成 ajax 调用时执行 id 调整的脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:27:50.613

对于 jQuery Ajax，你有完整的回调。在 Ajax 调用完成时传递对要执行的函数的引用。

```
$.ajax({
   // Your other options here
   complete: functionToCall
}); 
```

也可以这样做：

```
$.ajax({ /* Your options */ }).done(functionToCall); 
```

有关 AJAX 调用期间发生的各种事件的更多信息，请参见[此处](http://docs.jquery.com/Ajax_Events)。

# xcode4.5 - dyld：从 Xcode 4.3.2 升级到 Xcode 4.5 后找不到符号

> ID：12615328
> 
> 赞同：1
> 
> 时间：2012-09-27T06:25:33.877
> 
> 标签：xcode4.5

我的应用在 iOS 6 中运行时运行良好，但是当我在 iOS 5 或更低版本中运行时，它会显示很多以下消息，但应用仍然可以运行。

2012-09-27 14:15:01.243 演示[6090:10a03] 加载/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn 时出错：

dlopen（/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn，262）：找不到符号：___CFObjCIsCollectable

引用自：/System/Library/Frameworks/Security.framework/Versions/A/Security

预计在：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

如果我没有 iPhoneSimulator 5.1 SDK，在 iOS 5.1 上运行时，我可以为那些错误消息做些什么吗？</p>

# jquery - 指向 div id 的简单链接使主包装器跳转

> ID：12615332
> 
> 赞同：0
> 
> 时间：2012-09-27T06:26:00.893
> 
> 标签：jquery, css

所以我在几页上使用了指向 div id 的简单链接。

```
<a href="#mydiv">my link</div> 
```

见 -[当前站点](http://camandbenny.com/us)

问题是当我单击这些链接时，它们是主包装器中的一个神秘转变。但是 - 仅当浏览器高度低于 800 时。我难住了。

![工作这种尺寸。](../Images/64ed7851c14fa1da518320ff881196f0.png)

![然后改成800以下高-](../Images/19926222fdaf424281d4ee2eb5dc67b8.png)

![然后它只是因为某种原因而跳跃。](../Images/776cdcbbab02ebd6e4f16793631d49b8.png)

如果您将浏览器向下拖动，它将进入智能手机样式......并且一切都在那里工作......

任何帮助都会超级好！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:32:40.837

正如我在评论中所说，这是**#links 的正常行为**。单击后，页面将滚动，以使引用的元素位于其顶部。仅使用您的问题没有明显的解决方案`CSS`。

您可以将页面分成单独的文件（以避免使用#links）或使用 JavaScript 来进行`preventDefault`行为。我将深入研究后面的解决方案的代码。请原谅我使用 jQuery，但这里的速度要快得多。

所以，代码：http: [//jsfiddle.net/vL6Xn/3/](http://jsfiddle.net/vL6Xn/3/)

```
$('a[href^="#"]').each(function () {
    var sel = $(this).attr('href');
    $(this).click(function (e) {
        if ($(sel).length) {
            e.preventDefault();
            var $cont = $(sel).parent().parent();
            var scrollVal = $cont.scrollTop() + $(sel).position().top;
            $cont.scrollTop(scrollVal);
        }
    });
}); 
```

它的作用是：

1.  选择`a`属性`href`以#开头的元素
2.  单击时绑定操作：尝试选择`href`属性中引用的元素，如果它存在...
3.  ...防止默认行为并滚动到适当的位置。

### 编辑：

在您的情况下，滚动应用于元素父级的父级。我错误地认为它只是父母。请参阅我的代码更新。

# java - 如何选择在主机页面上加载哪个 GWT 模块？

> ID：12615334
> 
> 赞同：1
> 
> 时间：2012-09-27T06:26:21.317
> 
> 标签：java, gwt

在网站上工作时，我希望在我的 GWT 项目中有几个模块来代表网站的不同区域。例如：统计、购物、消息等。每个都是不同的模块。

在这些页面中的每一个上，我都想插入 gwt`<script>`标记并将要加载的模块传递给它。例如在消息页面上，它只会加载+显示消息模块，等等。

那可能吗？例如，通过设置一个隐藏的表单域，让 GWT 获取它的值来确定使用哪个模块？

如果没有，是否可以单独编译每个模块？如果是这样，你能指导我一点如何去做吗？（例如，是否会在 /war/ 目录中为每个模块创建一个新文件夹，或者是否将所有文件合并？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:43:10.870

您**可以**单独编译每个模块，您只需要为您的模块指定一个入口点，如下所示：

```
<entry-point class='class extends com.google.gwt.core.client.EntryPoint' /> 
```

然后，如果您在 *.gwt.xml 中定义了您的模块，您可以通过在您的 html 中`<module rename-to='moduleName'>`插入来加载此模块。`<script type="text/javascript" language="javascript" src="moduleName/moduleName.nocache.js"></script>`

# sharepoint-2010 - 如何在 SPCalendarView 控件中单击事件上的 Sharepoint 日历事件项

> ID：12615348
> 
> 赞同：1
> 
> 时间：2012-09-27T06:27:19.720
> 
> 标签：sharepoint-2010, sharepoint-designer, sharepoint-api

我创建了一个自定义日历，使用 `<SharePoint:SPCalendarView id=spcalView runat="server"> </SharePoint:SPCalendarView>`. 然后我在日历列表中插入了一些事件，我可以在上面创建的视图 spcalView 中显示这些事件。为此，我将`SPListItemCollection`（即从日历列表中检索集合）传递给了一个函数`MakeSchedule()`。

```
private SPCalendarItemCollection MakeSchedule(SPListItemCollection calListItems)
        {

            SPCalendarItemCollection items = new SPCalendarItemCollection();
            for (int i = 0; i < calListItems.Count; i++)
            {
                SPListItem item = calListItems[i];
                DateTime StartTime = Convert.ToDateTime(item["EventDate"]);
                DateTime EndTime = Convert.ToDateTime(item["EndDate"]);
                string appointmentId = "";
                if (item["AppointmentID"] != null)
                    appointmentId = item["AppointmentID"].ToString();
                string clientID = "";
                if (item["clientID"] != null)
                    clientID = item["clientID"].ToString();

                string Description = "";
                if (item["Description"] != null)
                    Description = item["Description"].ToString();

                string Location = "";
                if (item["Location"] != null)
                    Location = item["Location"].ToString();

                string Title = "";
                if (item["Title"] != null)
                    Title = item["Title"].ToString();

                bool Recurrance = false;
                if (item["fRecurrence"] != null)
                    Recurrance = (bool)item["fRecurrence"];

                bool AllDayEvent = false;
                if (item["fAllDayEvent"] != null)
                    AllDayEvent = (bool)item["fAllDayEvent"];

                SPWeb web = SPContext.Current.Web;
                string relativeURL = web.ServerRelativeUrl;
                string absoluteURL = web.Url;

                items.Add(
                    new SPCalendarItem()
                    {
                        ItemID = item["ID"].ToString(),
                        StartDate = StartTime,
                        EndDate = EndTime,
                        hasEndDate = true,
                        Title = Title,
                        Location = Location,
                        Description = Description,
                        IsAllDayEvent = AllDayEvent,
                        IsRecurrence = Recurrance,
                        CalendarType = (int)SPCalendarType.Gregorian,
                        BackgroundColorClassName="ApptCnfirmed",

                        DisplayFormUrl = relativeURL + "/_layouts/TestProj.Webparts/AppointmentsEdit.aspx"
                    }
                    );
            }
            return items;
        } 
```

在这里，对于添加到 SPCalendarItemCollection 的每个事件项，我已将 DisplayFormUrl 设置为应用程序页面。因此，当我在 Spcalendar 视图中单击一个事件时，它会被重定向到应用程序页面以及作为查询字符串单击的项目的 ID。

在 Application 页面中，检索了 ID，并根据 ID，检索了 currentLstItem。但从那我无法获得我在日历列表中添加的自定义字段。

```
public partial class AppointmentsEdit : LayoutsPageBase
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string ID = Page.Request.QueryString["ID"].ToString();//this Id is the unique id of the Appointment List 
        string Source=Page.Request.QueryString["Source"].ToString();
        if (ID != "" && ID != null)
        {

            SPList lstApp = SPContext.Current.Web.Lists["Appointment"];
            SPListItem currentLstItem =            lstApp.GetItemById(Convert.ToInt32(ID.ToString()));

        }
        else
        {

        }
    }
} 
```

这是编辑日历事件的正确方法吗？因为我在 sharepoint 的日历列表中添加了自定义字段。我尝试使用设计器，但无法获取 EditForm.aspx 背后的代码。

提前致谢！！

# android - 如何动态扩展ListView高度android？

> ID：12615349
> 
> 赞同：1
> 
> 时间：2012-09-27T06:27:23.390
> 
> 标签：android, android-layout, android-widget

为了增加列表视图的高度，我使用可扩展的 ListView 作为，

```
public class ExpandableListView extends ListView {

    private android.view.ViewGroup.LayoutParams params;
    private int old_count = 0;

    public ExpandableListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if (getCount() != old_count) {
            old_count = getCount();
            params = getLayoutParams();
            params.height = getCount() * (old_count > 0 ? getChildAt(0).getHeight() : 0);
            System.out.println("params h "+params.height+" "+params);
            setLayoutParams(params);
        }

        super.onDraw(canvas);
    }

} 
```

layout.xml 作为，

```
<com.jems.realtimedata.ExpandableListView
                android:id="@+id/listView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"      
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="25dp"
                android:background="@color/list_back"
                android:cacheColorHint="#00000000"
                android:divider="@drawable/line"
                android:paddingLeft="7dp"
                android:paddingRight="7dp"
                android:paddingTop="10dp"
                android:scrollbars="none" /> 
```

但是，列表的最后一项没有正确显示。我也使用了实用程序类，但列表没有变化。扩展视图的任何其他解决方案。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T08:32:34.190

换线

```
params.height = getCount() * (old_count > 0 ? getChildAt(0).getHeight() : 0); 
```

对此：

```
params.height = getCount() * (old_count > 0 ? getChildAt(0).getHeight() + 1 : 0); 
```

这仅适用于具有单行项目的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:18:31.017

这个问题已经发布了。所以看看这个，你可以根据你的需要在 Expandable list 中自定义它

此链接将帮助您：

[如何在 Android 中动态更改 ListView 高度？](https://stackoverflow.com/questions/6071131/how-to-change-the-height-of-the-listview-dynamically-in-andrtoid)

# php - 在 PHP 中将字符串变量转换为资源变量

> ID：12615355
> 
> 赞同：2
> 
> 时间：2012-09-27T06:27:39.650
> 
> 标签：php, smarty

我有一个资源变量，我使用分配`php`将它传递给其他页面，但是当我在其他页面上检索这个资源变量时，它变成了变量类型。如何将其转换回资源变量？就像这样：`php``Smarty``php``string`

```
$conn = mysql_connect($dbconfig['db_hostname'],$dbconfig['db_username'],$dbconfig['db_password']);
$smarty->assign("DBCONNNAME",  $conn); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:39:48.507

你显然在这里做错了什么。Smarty 是一个模板引擎。如果您需要使用 Smarty 的数据库连接，您将打破将应用程序逻辑与模板/视图分离的整个概念。

无需将数据库连接资源传递给 Smarty 模板，而是在 PHP 脚本中执行您需要做的所有事情（例如从数据库表中获取行），然后将从数据库中检索到的数据分配给 Smarty 模板并显示它。

# java - 如何在java中获取当前服务器时间（unix服务器）？

> ID：12615362
> 
> 赞同：2
> 
> 时间：2012-09-27T06:27:51.300
> 
> 标签：java

我想用 Java 获取当前服务器时间（在 Unix 机器上运行的应用程序）。在 Java/ 中获取当前服务器时间的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:29:45.107

你可以得到是这样的

```
long unixTime = System.currentTimeMillis() / 1000L;

String inString=String.valueOf(unixTime);

DateFormat dateFormat = new SimpleDateFormat ("dd/MM/yyyy HH:mm:ss");

String output = inString.format(dateFormat); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:55:35.157

您需要做的就是创建一个新日期。

```
import java.util.Date;
...
long millisSinceEpoch = (new Date()).getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:43:34.213

抱歉之前的帖子，

这是一个正确的：

```
DateFormat dateFormat = new SimpleDateFormat ("dd/MM/yyyy HH:mm:ss");
Date date = new Date();
String output = dateFormat.format(date); 
System.out.println(output); 
```

并打印：

> 2012 年 9 月 27 日 09:42:36

# python - 使用 lxml xpath 获取一个元素或引发异常

> ID：12615366
> 
> 赞同：6
> 
> 时间：2012-09-27T06:28:10.963
> 
> 标签：python, xpath, lxml

lxml 中的 xpath() 函数通常返回元素列表。

如果我有一个 XPath，我希望它只返回一个元素，那么最好的方法是：

*   检查是否返回了一个元素，否则会引发异常，并且：
*   获取那个元素（而不是一个元素列表）？

我真的在寻找 SQLAlchemy 的 one() 函数的类似物。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T06:37:49.083

```
try:
    (element,) = tree.xpath('//xpath/selector')
except ValueError:
    raise InvalidSelector()
    # happened because the list was either empty or contained multiple elements 
```

# android - 从下载的 android sdk 安装 Android 的过程

> ID：12615367
> 
> 赞同：0
> 
> 时间：2012-09-27T06:28:22.400
> 
> 标签：android, eclipse

我有 android sdk，我想将它与 eclipse Helio 集成。从开发者网站，我需要重新下载 sdk。任何人都可以告诉程序安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:43:02.670

首先，您需要为您的 Eclipse 下载 Android 开发工具 (ADT) 插件。请参阅[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)。

此外，这里是您可能会发现有用的分步教程的链接： [http ://blog.kerul.net/2011/06/eclipse-helios-android-development.html](http://blog.kerul.net/2011/06/eclipse-helios-android-development.html)

希望有帮助。:)

# winforms - 如何将 BindingSource 当前记录设置为空？

> ID：12615369
> 
> 赞同：7
> 
> 时间：2012-09-27T06:28:32.610
> 
> 标签：winforms, data-binding, bindingsource

我有一个工单的捕获表格，它有一个`CustomerBindingSource`和一个`WorksOrderBindingSource`控件。大多数编辑字段都绑定到`WorksOrderBindingSource`，其中一个组合框的列表绑定到`CustomerBindingSource`，并且它`SelectedValue`绑定到 中的`CustomerId`字段`WorksOrderBindingSource`。这都是非常常规和标准的，这里没有可笑的。

然后，我还有一些文本框字段，用于显示当前选择的客户的属性，用于当前编辑的工作订单。我也将这些字段绑定到了`CustomerBindingSource`。选择客户后，这些字段会按预期显示该客户的属性。

我的问题是当我想使用表单来捕获新的工作订单时。我实例化一个新`WorksOrder`对象，`CustomerId == null`并将其绑定到`WorksOrderBindingSource`. `CustomerBindingSource`我在with中没有对象`Id == null`，因此，正如预期的那样，下拉组合框是空白的，但是，该`CustomerBindingSource.Current`属性指向该数据源中的第一个 Customer 对象。客户链接显示字段显示该客户的值，但尚未选择客户。

对我来说显而易见的唯一解决方法似乎很笨拙。在其中，我有两个客户类型的绑定源，一个用于选定的客户，用于填充客户显示字段，另一个仅用于填充客户下拉列表。然后，我必须处理选择事件，只有选择客户，然后在显示字段的绑定源中找到该客户，如果未选择，则将显示字段的数据源设置为NULL。这感觉非常笨拙。还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-29T11:54:48.550

我发现这个话题正是我的问题，但没有令人满意的答案。我知道这是一个老话题，但是啊..

我最终得到了一个可行的解决方案：我向绑定源添加了一个 [PositionChanged] 事件（将是您的 CustomerBindingSource）。

```
 private void CustomerBindingSource_PositionChanged(object sender, EventArgs e)
    {
        if(<yourCombobox>.SelectedIndex==-1)
        {
            CustomerBindingSource.SuspendBinding();
        }
        else
        {
            CustomerBindingSource.ResumeBinding();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:35:19.567

我用来“清除” BindingSource 的方法是简单地设置它的 DataSource，如下所示：

CustomerBindingSource.DataSource = typeof(Customer);

希望这可以帮助。

编辑：

为清楚起见，当您按照描述设置 BindingSource.DataSource 属性时，没有什么可以阻止您稍后重新分配原始数据源：

```
//Retrieve customers from database
List<Customer> Customers = WhatEverCallToDB();
CustomerBindingSource.DataSource = Customers;

...

//Later we need to blank the Customer fields on the Windows Form
CustomerBindingSource.DataSource = typeof(Customer);

...

//Then again at a later point we can restore the BindingSource:
CustomerBindingSource.DataSource = Customers;

... 
```

# shell - Shell脚本密码审计

> ID：12615371
> 
> 赞同：0
> 
> 时间：2012-09-27T06:28:36.173
> 
> 标签：shell, passwords

我有一个名为 ./testpassword 的二进制文件，语法如下

```
./testpassword pass PASSWORD_GOES_HERE 
```

如果密码正确，输出将是

```
pass=correct 
```

如果不正确的输出如下

```
pass=incorrect 
```

我是 linux 和脚本的新手，但在这里的成员的帮助下，制作了一个示例 shell 脚本，如下所示

```
 cat passwords.txt | while read x ; do echo -n "$x: " && ./testpassword pass $x ;
done 
```

其中密码是 txt 格式的单词表。

这很好用，如果我密切关注终端，我可以看到如下输出（继续单词列表中的每一行）

```
jordyt: pass=incorrect
dawder: pass=incorrect
LOL12345: pass=incorrect
warcraft: pass=incorrect
solidussnake: pass=incorrect
0005: pass=correct 
```

所以在这种情况下，我知道 0005 是我的密码，我的问题是，是否可以在找到密码时停止程序，或者在某处自动显示密码？如果我要离开屏幕，我会忘记密码是什么，因为屏幕将继续尝试输入密码并向下滚动

我以前做的方式就像这个[Shell script password bruteforcing](https://stackoverflow.com/questions/12614318/shell-script-password-bruteforcing)。它起作用了，因为我可以走开，稍后再回来，看到密码已被破解，然后 ctrl+c 程序，除了它有点冗长的做事方式。在我不得不手动搜索破解密码对应的wordlist中的行号之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:39:11.313

您可以将执行保存`./testpassword pass $x`在一个变量中：

```
cat passwords.txt | while read x ; do result=`./testpassword pass $x` ; echo -n "$x: $result" ; done 
```

然后，您可以将 $result 与字符串 "pass=correct" 进行比较，如果它以这种方式找到字符串，则中断循环：

```
if [[ "$result" == *pass=correct ]]; then break; fi 
```

放在一起：

```
cat passwords.txt | while read x ; do result=`./testpassword pass $x` ; echo -n "$x: $result" ; if [[ "$result" == *pass=correct ]]; then break; fi ; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:39:20.270

修改你的`testpassword`脚本，让它在成功的情况下返回 0，在失败的情况下返回一些其他值。之后，您可以按如下方式重写循环：

```
cat passwords.txt | while read x; do
    echo -n "$x: " && ./testpassword pass $x && break
done 
```

# android - 如何在启动完整的 android 上启动服务？

> ID：12615373
> 
> 赞同：4
> 
> 时间：2012-09-27T06:28:38.417
> 
> 标签：android, service, boot, application-restart

我已经阅读了一些关于启动服务的教程。我所做的是：

在清单中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" >
</uses-permission>

<receiver android:name="my.package.ServiceStartup" >
   <intent-filter>
       <action android:name="android.intent.action.BOOT_COMPLETED" />
   </intent-filter>
</receiver> 
```

代码：

```
public class ServiceStartup extends BroadcastReceiver {

    public void onReceive(Context context, Intent intent) {
        Handler h = new Handler();
        h.postDelayed(new Runnable() {
           @Override
           public void run() {
               Intent dialogIntent = new Intent(getBaseContext(), MyActivity.class);
               dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
               getApplication().startActivity(dialogIntent);
           }
        }, 10000);
    }
} 
```

这样，如果我重新启动设备并转到活动应用程序中的设置，我的服务不会启动。我能做些什么？我在哪里出错？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T06:33:26.043

您想开始活动或服务。在服务的情况下，您将不得不致电`startService()`。像：

`getApplication().startService(new Intent(this, MyService.class));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:26:05.537

你运行你的应用程序了吗？参考[本教程](http://www.vogella.com/articles/AndroidServices/article.html)

> 如果您的应用程序安装在 SD 卡上，那么它在 android.intent.action.BOOT_COMPLETED 事件之后不可用。在这种情况下为 android.intent.action.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE 事件注册自己。

* * *

> 另请注意，从 Android 3.0 开始，用户需要至少启动一次应用程序，然后您的应用程序才能接收 android.intent.action.BOOT_COMPLETED 事件。

# java - 奇怪的语法错误（Java）

> ID：12615379
> 
> 赞同：0
> 
> 时间：2012-09-27T06:29:14.047
> 
> 标签：java

```
public int[][] fileRead(String fileName);
{
  Scanner problem = new Scanner(new File(fileName));
  int m = 9; 
  int [][] tgrid = new int[m][m]; 
  while(input.hasNextInt()){
    for (int i=0;i<m;i++){
      for (int j=0;j<m;j++)
        a[i][j] = input.nextInt();
    }
  } 
```

由于某种原因，此代码给出了两个语法错误......错误如下。

```
2 errors found:
File: C:\Documents and Settings\s2813788\My Documents\Downloads\1005ICTAssignment\SudokuDriver.java  [line: 81]
Error: Syntax error on token "(", ; expected
File: C:\Documents and Settings\s2813788\My  Documents\Downloads\1005ICTAssignment\SudokuDriver.java  [line: 81]
Error: Syntax error on token ")", delete this token 
```

我看不出方法头或类似的东西有什么问题：| 任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T06:30:27.320

您的方法参数后有一个分号。

```
public int[][] fileRead(String fileName);
{ 
```

去掉它：

```
public int[][] fileRead(String fileName)
{ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:31:16.057

删除第一行末尾的分号：

```
public int[][] fileRead(String fileName);
----------------------------------------^ 
```

还要确保所有以前的功能都已关闭。函数的结尾在`}`哪里`main`？还要确保正确缩进所有代码；良好的缩进将更容易发现此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:32:17.747

删除第一行中的分号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:34:59.160

如果这不是拼写错误，则代码的第一行有一个分号 (;)

```
 public int[][] fileRead(String fileName); 
```

删除那个

```
public int[][] fileRead(String fileName) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T06:37:10.627

函数定义结尾不应该有分号，请将其删除，遵循在函数定义行末尾声明大括号的编码风格，这样您就可以很容易地避免此类语法错误这里是[链接](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

作为：

```
 public int[][] fileRead(String fileName); 
```

改成：

```
 public int[][] fileRead(String fileName){ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T06:33:06.420

您需要删除方法定义后的分号。

```
public int[][] fileRead(String fileName); 
```

而且您缺少`return`方法的陈述。

# jquery - jQuery冲突

> ID：12615381
> 
> 赞同：0
> 
> 时间：2012-09-27T06:29:16.933
> 
> 标签：jquery

我在我的页面中使用了 colorbox 插件和 mscarousel。支持 javascript 脚本文件的 colorbox 和 mscarousel 相互冲突。当我删除支持颜色框的脚本文件时，ms carousel 正在工作并且删除 ms carousel 支持文件 colorbox 插件正在工作。但我需要这两个插件才能工作。如何解决这个 jquery 冲突？

Colorbox 插件 head 标签内的支持文件

```
<script src="jquery-1.4.1.min.js" type="text/javascript"></scrip>
<link href="admin/colorbox.css" rel="stylesheet" type="text/css" />
<script src="admin/jquery.colorbox-min.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function(){
            $(".popup").colorbox({width:"540px", height:"405px", iframe:true});
        });

</script> 
```

头部标签内的 MS 轮播支持文件

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.msCarousel-min.js"></script>
<link rel="stylesheet" type="text/css" href="css/mscarousel.css" />
<style type="text/css">
.mstoplinks{padding:3px; border-bottom:2px solid #c3c3c3;}
.mstoplinks a, .mstoplinks a:visited{color:#003366; text-decoration:none; border-right:1px solid #c3c3c3; padding:0 10px}
.mstoplinks a.active, .mstoplinks a.active:visited{color:#003366; text-decoration:none; border-right:1px solid #c3c3c3; padding:0 10px;border-bottom:1px solid #c3c3c3; border-left:1px solid #c3c3c3; }
.version{font-size:12px; color:#EE3C95;}
</style> 
```

和正文标签中的 MS-carousel 脚本

```
<script type="text/javascript">
$(document).ready(function() {  
try {
    var oHandlerHorizontal = $("#carouseldiv").msCarousel({boxClass:'div.set', width:110, height:122, scrollSpeed:500}).data("msCarousel");
    $("#next").click(function() {
        oHandlerHorizontal.next();
    });
    $("#previous").click(function() {
        oHandlerHorizontal.previous();
    }); 
    //vertical
    var oHandlerVertical = $("#verticalCarousel").msCarousel({boxClass:'div.set', width:486, height:198, scrollSpeed:500, vertical:true}).data("msCarousel");
    $("#nextV").click(function() {
        oHandlerVertical.next();
    });
    $("#previousV").click(function() {
        oHandlerVertical.previous();
    });
    //no use
    $("#ver").html("v"+oHandlerHorizontal.getVersion());

} catch(e) {
    alert(e.message);
}

})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:32:19.643

如果这些所有代码都在单个文件中，则只需删除

```
<script src="jquery-1.4.1.min.js" type="text/javascript"></scrip> 
```

并放

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
```

# sql - 如何在 SQL 中的两列上进行交叉分组？

> ID：12615384
> 
> 赞同：4
> 
> 时间：2012-09-27T06:29:29.323
> 
> 标签：sql

我的网站上有一个个人消息系统，这很容易。但我想要一个管理员页面，其中显示用户之间的所有对话及其消息量。

所以表格看起来像（简化版）：

```
CREATE TABLE pm (
    id        INT(10)     NOT NULL AUTO_INCREMENT,
    from      INT(10)     NOT NULL REFERENCES (usertable),
    to        INT(10)     NOT NULL REFERENCES (usertable),
    message   BLOB        NOT NULL
); 
```

例子：

假设我有一些用户：Mark、John、Bryan 和 Kate。

Mark (from) 向 John (to) 发送 5 条消息，John (from) 向 Mark (to) 发送 3 条消息。

Kate（发件人）向 Bryan（收件人）发送 2 条消息，Bryan（发件人）向 Kate（收件人）发送 1 条消息。

我想要一个显示的结果集

> 马克 - 约翰 - 8 条信息
> 
> 凯特 - 布莱恩 - 3 条信息

这适用于我表中的所有用户。

我真的坚持这一点，我到处搜索，但没有找到解决方案。困难在于我希望列出所有用户并且我必须以某种方式跨越“从”和“到”列......

我希望任何人都能够提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:39:18.293

```
select from_id, to_id, count(*) count_between
from
(
    select from_id, to_id from pm
    union all
    select to_id, from_id from pm
) combined
where from_id < to_id
group by from_id, to_id 
```

完整样本

```
CREATE TABLE pm (from_id int,to_id int);
insert pm select 1,2;
insert pm select 1,2;
insert pm select 1,2;
insert pm select 1,2;
insert pm select 1,2;
insert pm select 2,1;
insert pm select 2,1;
insert pm select 2,1;
insert pm select 3,4;
insert pm select 3,4;
insert pm select 4,3;

select from_id, to_id, count(*) count_between
from
(
    select from_id, to_id from pm
    union all
    select to_id, from_id from pm
) combined
where from_id < to_id
group by from_id, to_id

--- results
from_id     to_id       count_between
----------- ----------- -------------
1           2           8
3           4           3 
```

要将 ID 转换为名称，请使用普通的 to `user`table 或类似的东西。例如

```
select u1.name from_, u2.name to_, count(*) count_between
from
(
    select from_id, to_id from pm
    union all
    select to_id, from_id from pm
) combined
join users u1 on u1.id = combined.from_id
join users u2 on u2.id = combined.to_id
where from_id < to_id
group by u1.name, u2.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:35:11.740

您可以通过首先列出具有最大 id 的人来使对话对独一无二。然后你可以按两个人的 id 分组：

```
select  ut1.name
,       ut2.name
,       convo_pairs.message_count
from    (
        select  case when [from] < [to] then [to] else [from] end as p1
        ,       case when [from] < [to] then [from] else [to] end as p2
        ,       count(*) as message_count
        from    pm
        group by
                case when [from] < [to] then [to] else [from] end as p1
        ,       case when [from] < [to] then [from] else [to] end as p2
        ) as convo_pairs
join    usertable ut1
on      ut1.id = convo_pairs.p1
join    usertable ut2
on      ut2.id = convo_pairs.p2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:41:47.023

试试这个

```
select ISNULL(a.from,b.from) + '-' + ISNULL(a.to,b.to) + '-' +  convert(varchar(a.count+b.count)) + 'messages' 
(select pm1.from,pm1.to,count(1) count
from pm pm1
group by pm1.from,pm1.to) a FULL OUTER 
(select pm1.from,pm1.to,count(1) count 
from pm pm1
group by pm1.from,pm1.to) b
on a.from=b.to
and a.to=b.from 
```

# c# - XML 反序列化错误地解释了日期

> ID：12615391
> 
> 赞同：1
> 
> 时间：2012-09-27T06:30:01.753
> 
> 标签：c#, datetime, xml-deserialization

**编辑：已解决，重复：** [防止对 DateTime 值的反序列化进行时区转换](https://stackoverflow.com/questions/3188933/prevent-timezone-conversion-on-deserialization-of-datetime-value)

* * *

我在尝试反序列化 2000 年 9 月 30 日时遇到了一个奇怪的错误。

> 2000-09-30T00:00:00+11:00 将日期变为 29/09/2000 11:00:00 PM。

**如何防止它在转换中损失一天：**

```
public class Data
{
[XmlArray("Times")]
[XmlArrayItem("Time")]
public List<DateTime> Times { get; set; }

 public void Test()
 {
    XmlReader xr = XmlReader.Create(new StringReader(@"<Data><Times><Time>2000-09-30T00:00:00+11:00</Time><Time>1900-01-01T06:00:00</Time></Times></Data>"));
    XmlSerializer ser = new XmlSerializer(typeof(Data));
    Data data = (Data)ser.Deserialize(xr);
    // hover over data and see date is the 29th
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:52:17.723

此日期的 XML 表示适用于 UTC +11 时区，请参阅[http://www.timeanddate.com/time/map/](http://www.timeanddate.com/time/map/)

因此，当 UTC +11 时区 30 日午夜 12 点时，悉尼 29 日晚上 11 点 (UTC + 10) :-)

# javascript - 带有复选框的 JavaScript 的异常行为

> ID：12615393
> 
> 赞同：0
> 
> 时间：2012-09-27T06:30:03.760
> 
> 标签：javascript, checkbox

我使用了以下代码：

```
<html>
<head>
<script type="text/javascript" language="javascript">
    function doit(page) {
        var entry = page.entry;
        var flag = false;
        document.write(entry.length);
    }
</script>
</head>
<body>
    <span id="error_checkbox" style="color: blue;"> </span>
    <form name="subscribeTablePage">
        <input type="checkbox" id="entry" value="1"/> <label>1</label><br/>
        <input type="button" value="Submit" onclick="doit(document.subscribeTablePage)"/>
    </form>
</body>
</html> 
```

为什么`entry.length`未定义的值？同时当我尝试使用多个复选框时，值`entry.length`是使用的复选框数！

用例：我要从数据库中检索行，在这种情况下，我需要检查选中的复选框数量以执行删除操作！请给你宝贵的意见来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:33:39.040

您正在尝试访问该复选框`#entry`。像这样添加属性`name="entry"`。

```
<input type="checkbox" id="entry" name="entry" value="1" /> 
```

表单对象由它们的`name`属性访问。

至于 Javascript，你想要`value`，而不是`length`.

```
document.write(entry.value); 
```

`length`表示给定字符串的字符长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:33:40.753

`entry`如果`id`你想以这种方式引用它，`input` 它应该是你的。`name`

```
<input type="checkbox" name="entry" id="entry" value="1"/> 
```

要通过 id 访问它的表单元素，您必须使用

```
document.getElementById('idOfElement') 
```

我也没有找到你使用长度的目标。你可以得到`size`的`input`不是`length`。

如果您想查找选中的复选框数量，那么可能在 javascript 中您可以通过编写如下脚本进行检查

```
var inputElems = document.getElementsByTagName("input"),
    count = 0;
for (var i=0; i<inputElems.length; i++) {
    if (inputElems[i].type === "checkbox" && inputElems[i].checked === true) {
        count++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:53:06.913

> 为什么 entry.length 的值未定义？

因为`form.entry`引用元素，并且元素没有长度属性。你要：

```
entry.value.length; 
```

> 同时，当我尝试使用多个复选框时，entry.length 的值是使用的复选框数！

因为如果多个表单控件具有相同的名称，则`form.controlName`引用所有具有相同名称的控件的集合。[HTML 集合](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-75708506)有一个长度属性，它是集合中元素的数量。

此外，该行：

```
>       document.write(entry.length); 
```

将清除整个文档，您可能想要：

```
 alert(entry.value.length);

 // or

 console.log(entry.value.length); 
```

您可能会发现阅读[HTML 5 规范](http://dev.w3.org/html5/spec-author-view/forms.html#forms)中有关表单的整个部分以及[HTML 4.01 标准](http://www.w3.org/TR/html401/interact/forms.html#form-controls)的相关部分很有用。

# ios - 当我按下 UIButton 时，UITextField 文本进入 NSArray 并显示在 UITableView

> ID：12615394
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:30:04.843
> 
> 标签：ios

```
-(IBAction)clicked:(id)sender 
{ 
    NSString *productName=[NSStringstringWithFormat:@"%@",textfield.text];
    [cartArray addObject:productName];
    NSLog(@"Cart Array==%@",cartArray);
 }

-(void)viewDidLoad:(BOOL)animated {
    [super viewDidLoad:animated];
    cartArray = [[NSMutableArray alloc]init];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:37:56.103

我假设如果你有 tableView 并且它的数据源数组是 cartArray

```
-(IBAction)clicked:(id)sender 
{ 
  if(textfield.text.length>0)  
  {
   [cartArray addObject:textfield.text]; 
  }
  NSLog(@"Cart Array==%@",cartArray);

  //Now Reload tableView
  [yourTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:45:25.930

正如他所说，如果您希望在按下任何特定按钮时您的文本字段值应该在 tableview 中，那么 Ya Prince 是正确的，那么您需要重新加载您的 tableview。

但首先您需要检查文本字段文本的长度。如果它是 nil 并且如果您将该数组值传递给数据源方法，那么它将给您空指针异常。

就像在这种方法中一样-

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {
    return  [array count];
   } 
```

那么数组应该包含一些值然后只有tableview会出现。否则不会有tableview。或者它可能会给您带来“对象不能为零”之类的错误。

# c# - 如何在 C# 中获取我的 xmlnode 的特定内部文本？

> ID：12615401
> 
> 赞同：0
> 
> 时间：2012-09-27T06:30:35.657
> 
> 标签：c#, linq, c#-4.0, xml-parsing, linq-to-xml

我有一个用于处理的 Xml 节点。以下是我的 xml 节点。

```
<w:p>
 <w:r>
   <w:t>
     Text1
   </w:t>
  </w:r>
  <w:r>
    <w:pict>
       <w:p>
         <w:r>
           <w:t>
             text2
            </w:t>
          </w:r>
        </w:p>
      </w:pict>
   </w:r>
 <w:r>
   <w:t>
     Text3
   </w:t>
  </w:r>
  <w:r>
</w:p> 
```

现在我想`<w:p><w:r><w:t>`只从而不是从`<w:p><w:r><w:pict><w:p><w:r><w:t>`.

所以，我需要的输出是`Text1Text3`

**我的 C# 代码是：**

```
 XmlNodeList pNode = xDoc.GetElementsByTagName("w:p");
 for (int i = 0; i < pNode.Count; i++)
 {
    if(i==0)  //This is my criteria 
    {
      XmlNode firstNode = pNode[i];
      string innerText=firstNode.innerText.toString().Trim();
    }
 } 
```

但它返回所有内部文本，如`Text1Text2Text3`

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:38:18.427

您可以使用 XPath：（我认为以下内容应该适合您）

```
w:p/w:r/w:t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:44:39.033

您需要检查每个元素`p`，确保其锚点都不是`pict`元素。

```
var result = XElement.Load(@"path-to-your-xml")
                     .Descendants("t")
                     .Where(e => !e.AnchestorsAndSelf().Any(a => a.Name.LocalName == "pict")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:16:53.843

我建议您使用`XDocument`（如果您有 .NET 3.5 或更高版本）。此代码获取具有模式`p/r/t`但没有的所有元素的值`pict/p/r/t`：

```
 // Use this if you're loading XML from a string
        XDocument doc = XDocument.Parse(inputString);
        // Use this if you're loading XML from a file
        //XDocument doc = XDocument.Load(<filepath>);

        var pElements = doc.Root
            .Descendants()
            .Where(el => el.Name.LocalName == "p" && el.Parent.Name.LocalName != "pict");

        List<string> innerTexts = new List<string>();
        foreach(XElement p in pElements)
        {
            var rElements =  p.Elements().Where(el => el.Name.LocalName == "r");
            foreach(XElement r in rElements)
            {
                var tElements = r.Elements().Where(el => el.Name.LocalName == "t");
                innerTexts.AddRange(tElements.Select(el => el.Value).ToArray());
            }
        } 
```

我使用`LocalName`了，因为没有提供有关`w`命名空间的信息。

# qt - 为 QString 着色

> ID：12615402
> 
> 赞同：0
> 
> 时间：2012-09-27T06:30:37.090
> 
> 标签：qt, qt4

```
 QString text("<FONT COLOR=red>%1</FONT>");
        text.arg(strMat);
QDomNode text_node
text_node.setNodeValue(text); 
```

我有上面的代码。我想要的是文本颜色应为红色，并且该文本值应在运行时确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:25:16.157

QString 允许您存储字符数组并使用成员函数对这些字符进行操作。由于它不是从 QWidget 派生的，因此无法单独显示。您将需要一个 QWidget（如 QLabel）来显示字符串。然后您可以设置 QLabel 的字体颜色以显示特定颜色的文本。

您可以为标签设置字体颜色（红色），如下所示

```
label->setStyleSheet("color: rgb(255, 0, 0);"); 
```

[Qt Style Sheets](http://qt-project.org/doc/qt-4.8/stylesheet.html)可能会帮助您了解 Qt 中的样式表支持以及如何使用它们

# c# - 错误：“文件被另一个进程使用”在openxml中生成文档时

> ID：12615407
> 
> 赞同：0
> 
> 时间：2012-09-27T06:30:55.233
> 
> 标签：c#, ms-word, openxml

我正在使用open xml（使用复制流）生成word文档。当多个用户同时单击生成按钮时，它会抛出错误“文件被另一个进程使用”。如何防止它？请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:04:37.457

每个用户的文件应该有不同的名称，例如通过将它们命名为

```
filename += "_"+Environment.MachineName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:50:10.983

多个用户不能生成单个文件。可能的解决方案：
1\. 为不同的用户创建不同名称的文件。 2\. 使用3.
确保互斥。确保在使用后关闭 memoryStream。`Mutex`
否则它将在内存中打开。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-27T09:47:16.767

感谢fr的回复。不同用户的文件名已经不同。我已将文件名分配为用户名（来自会话）以及当前日期和时间。所以最终不同用户的文件名不同

# linux - Unix/Linux 逗号分隔文件

> ID：12615410
> 
> 赞同：-3
> 
> 时间：2012-09-27T06:31:01.853
> 
> 标签：linux

我有逗号分隔的文件，基本上具有以下结构：

1, 2, 3, 4, 5 ,,,, 6 等

我必须计算唯一的第 6 列的数量。请帮忙

（顺便说一句，这是对 unix/linux 类的介绍，因此应该可以使用基本命令来完成）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:51:38.267

`cut -d "," -f 6 myFile |sort |uniq -c |wc -l`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:14:50.377

看着我的水晶球，我看到你们班正在讨论`awk`。尝试

```
awk -F, '!a[$6]++{c++} END{ print c }' input-file 
```

# ios - 在 Cocoa/iOS/MacOSX 中实现哪个流 API？

> ID：12615426
> 
> 赞同：4
> 
> 时间：2012-09-27T06:32:20.760
> 
> 标签：ios, macos, cocoa, io, stream

iOS/MacOSX 中有几个流函数和/或类。如果我想实现自己的自定义流，即提供或使用顺序字节数据的某个对象，以下哪个 API 最适合使用？

*   Unix**文件描述符**(int)
    *   没有办法实现自定义文件描述符？
*   **文件***
    *   使用 funopen 实现自己的流。
    *   C 级 API，实际使用这个的 Cocoa 并不多。例如，不能将此桥接到 NSInputStream。
    *   数据可以被你自己的代码消费
*   **CGDataProviderRef** , **CGDataConsumerRef**
    *   允许顺序和直接访问读取实现。
    *   由 CoreGraphics 使用，但仅此而已。
    *   无法从您自己的代码中使用数据
*   **NSInputStream** , **NSOutputStream**
    *   被很多 Cocoa 使用，例如 XML、JSON 解析
    *   Doc 允许子类化，但实际上由于异步使用，子类化很棘手。
    *   可以从您自己的代码中使用数据

看起来 NSInputStream/NSOutputStream 是实现您自己的流的理想“可可”方式。但是我不确定如何实现对 App Store 友好，即不覆盖隐藏方法（参见例如[http://bjhomer.blogspot.com.au/2011/04/subclassing-nsinputstream.html](http://bjhomer.blogspot.com.au/2011/04/subclassing-nsinputstream.html)），NSInputStream 的子类，或者：

(a) 制作仅同步流（我如何知道特定的 Cocoa API 是否会异步使用流，因此不适用于我的仅同步流？）或

(b) 制作异步流？

# ruby - Ruby 异步 whois

> ID：12615430
> 
> 赞同：1
> 
> 时间：2012-09-27T06:32:50.710
> 
> 标签：ruby, asynchronous, eventmachine, whois

我正在使用[whois](https://github.com/weppos/whois)来执行和解析 whois 查询。问题是：我需要做得更多。成千上万。我找到了异步包[em-whois](https://github.com/mikejarema/em-whois)，这对我来说听起来很完美。这是[whois](https://github.com/weppos/whois)的简单插件，它依赖于**Ruby Fibers**和[em-synchrony](https://github.com/igrigorik/em-synchrony)。

我当前执行 whois 查询的代码如下所示：

```
...
c = Whois::Client.new(:timeout => timeout)
r = c.query(domain)
... 
```

在我安装了[em-whois](https://github.com/mikejarema/em-whois)之后，我正在尝试扩展[这个基本示例](https://github.com/mikejarema/em-whois/blob/master/examples/async_whois.rb)。

我的代码现在看起来像这样，但仍然很慢：

```
$: << File.dirname(__FILE__) + '/../lib'
require 'em-whois'
EM.synchrony do  
  domain = ARGV[0] || "github.com"
  $i = 0;
  $num = 100;
  arr = Array.new($num)
  # perform all queries
  begin
     puts("Inside the loop i = #$i" );
     $i += 1;
     arr[$i] = Whois.whois(domain);
  end while $i < $num
  $i = 0;
  # get all results
  begin
     $i += 1;
    puts "\r#{domain}\n#{"-" * domain.length}"
    [:available?, :status, :expires_on].each do |k|
      puts "#{k}: #{arr[$i].properties[k]}"
    end
  end while $i < $num
  EM.stop
end 
```

**如何使用[whois](https://github.com/weppos/whois)和[em-whois](https://github.com/mikejarema/em-whois)的异步功能执行批量查询（1k 个域） ？**

我以前没有任何使用红宝石的经验。我是 Python/C/PHP 开发人员。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:51:52.923

图书馆作者的回答。[此处](https://github.com/mikejarema/em-whois/blob/master/examples/async_parallel_whois.rb)链接的示例。

```
$: << File.dirname(__FILE__) + '/../lib'
require 'em-whois'
require 'atomic'

# Asynchronous, parallel multi-domain WHOIS lookup
domains = ARGV.empty? ? ["github.com", "google.com", "bing.com", "yahoo.com", "mikejarema.com"] : ARGV
whois   = {}

EM.synchrony do  

  # Progress indicator
  EM.add_periodic_timer(0.1) do
    STDERR.print "."
  end

  # Exit condition
  EM.add_periodic_timer(0.1) do
    if domains.size == whois.keys.size
      puts ""
      whois.each do |k,v|
        if v.properties[:available?]
          puts "#{k}: available"
        else
          puts "#{k}: taken, expires #{v.properties[:expires_on]}"
        end
      end

      EM.stop
    end
  end

  # Async WHOIS lookup - fire and forget via parallel fibers
  domains.each do |i|
    Fiber.new do
      whois[i] = Whois.whois(i)
    end.resume
  end

end 
```

# php - PHPExcel在mysql表行中呈现html标签

> ID：12615431
> 
> 赞同：2
> 
> 时间：2012-09-27T06:32:56.290
> 
> 标签：php, mysql, codeigniter, phpexcel

我正在使用**`phpExcel`**库。我有一个工作正常的导出脚本，它从 MySQL 表中获取所有数据。现在 MySQL 表有一个名为的行`product_info`，其中包含 HTML 标记和样式。

现在我如何才能为那一行呈现这些样式，其中包含 HTML 元素，如`<font color="Red">Hello</font>`. 此 HTML 标记各不相同。那么我该如何渲染它们呢？

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:43:31.657

你不能。您可以解析 HTML 标记并使用它来构建富文本对象，然后您可以将其设置为单元格的内容；但是没有从 HTML 到 PHPExcel 本身内置的富文本的转换，因此您需要手动完成。

# r - 使用数据帧列表和向量列表并行子集

> ID：12615432
> 
> 赞同：0
> 
> 时间：2012-09-27T06:32:57.510
> 
> 标签：r, dataframe, vectorization, subset

这有效：

```
onion$yearone$id %in% mask$yearone 
```

这不会：

```
onion[1][1] %in% mask[1]
onion[1]['id'] %in% mask[1] 
```

为什么？缺乏一种在 DF 和 memberids 中的并行列中矢量化的明显方法（所以当 DF 和 memberids 中都存在 ids 时，我每年只得到行），我使用 for 循环，但我没有幸运地找到表示索引的正确方法...帮助？

**示例数据：**

```
yearone <- data.frame(id=c("b","b","c","a","a"),v=rnorm(5))
onion <- list()
onion[[1]] <- yearone
names(onion) <- 'yearone'
mask <- list()
mask[[1]] <- c('a','c')
names(mask) <- 'yearone' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:30:59.150

'$' 运算符与 '[' 运算符不同。如果“yearone”和“ids”实际上是这些列表中的第一项，您应该看到这与第一次调用的结果相同：

```
DF[[1]][[1]] %in% memberids[[1]] 
```

为什么我们应该认为访问`yearpathall`应该给出相同的结果在这一点上完全不清楚，但是使用“[[”运算符可能会给出一个原子向量，而使用“[”肯定不会。"[" 运算符总是返回与其第一个参数相同的类的结果，因此在这种情况下，对于 'DF' 和 'memberids' 来说，它将是一个列表而不是一个向量。%in% 运算符只是一个中缀版本 fo`match`并且需要一个原子向量作为它的两个参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:59:23.460

这是一种使用方法`Map`

```
# some data
onion <- replicate(5,data.frame(id = sample(letters[1:3], 5,T), v = 1:5), 
                   simplify = F)
mask <- replicate(5, sample(letters[1:3],2), simplify = F)
names(onion) <- names(mask) <- paste0('year', seq_along(onion)) 
```

将进行匹配的函数

```
get_matches <- function(data, id, mask){
   rows <- data[[id]] %in% mask
   data[rows,]
}

Map(get_matches , data = onion, mask = mask, MoreArgs = list(id = 'id')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:17:33.013

这似乎是我正在寻找的答案：

```
merge(mask[1],onion[[1]], by.x = names(mask[1]), by.y = names(onion[[1]][1])) 
```

并应用于数据帧的并行列表：

```
result <- list()
for (i in 1:(length(names(onion)))) {
  result[[i]] <- merge(mask[i],onion[[i]], by.x = names(mask[i]), by.y = names(onion[[i]][1]))
} 
```

# jquery - CSS类更改后jQuery函数将不起作用

> ID：12615433
> 
> 赞同：0
> 
> 时间：2012-09-27T06:32:58.837
> 
> 标签：jquery, css

在 CSS 类更改后，我实际上在使用函数时遇到了一些问题。

这是我的代码。

```
<html>
<head>
    <title>jQuery Animate Test</title>
    <style>
    .animatebox { width: 300px; margin: auto; height: 50px; background: grey; position: absolute; bottom: 250; padding-left: 10px;}
    .hiddenstuff { opacity: 0; } 
    .boxtitle { font-size: 18px; font-weight: 100;}
    .clear { clear: both;}
    .arrow_up { float: right; margin: 7px 0 0 125px; padding-right: 10px;}
    .arrow_down { float: right; margin: 7px 0 0 125px; padding-right: 10px;}
    p {margin: 15px 0 0 0;}
    </style>
    <script src="jquery-1.8.2.js"></script>

</head>
<body>

<h1>Animate Test</h1>
<div id="content">
<div class="animatebox">
<img class="arrow_up" height="35px" src="arrow_up.png"><p class="boxtitle">Lala Box</p>
<div class="clear"></div>
<p class="hiddenstuff">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata </p>
</div>
</div>

<script>

$(function() {
$('.arrow_up').click(function(){
   $('.arrow_up').attr('src',"arrow_down.png");
});
$('.arrow_up').click(function () {
    $('.arrow_up').addClass('arrow_down');
});
$('.arrow_up').click(function () {
    $('.arrow_up').removeClass('arrow_up');
});
});

$(".arrow_up").click(function () {
    $('.animatebox').animate ({
        height: '250px'
    }, 200 );
});

$(".arrow_up").click(function () {
    $('.hiddenstuff').animate ({
        opacity: '1'
    }, 200 );
});

$(".arrow_up").click(function () {
    $('.boxtitle').animate ({
        fontSize: '28px',
        fontWeight: '700'
    }, 200 );
});

$(".arrow_down").click(function () {
    $('.animatebox').animate ({
        height: '50px'
    }, 200 );

});

$(".arrow_down").click(function () {
    $('.hiddenstuff').animate ({
        opacity: '0'
    }, 200 );
});

$(".arrow_down").click(function () {
    $('.boxtitle').animate ({
        fontSize: '18px',
        fontWeight: '100'
    }, 200 );
});

</script>

</body>
</html> 
```

单击向上按钮后，一旦将类更改为“arrow_down”，但向下动画的功能将不起作用？！？：/

**更新**

```
$("body").on("click", ".arrow_up", function () {
        $('.arrow_up').attr('src',"arrow_down.png");
        $('.arrow_up').addClass('arrow_down');
        $('.arrow_up').removeClass('arrow_up');

        $('.animatebox').animate ({
            height: '250px'
        }, 200 );

        $('.hiddenstuff').animate ({
            opacity: '1'
        }, 200 );

        $('.boxtitle').animate ({
            fontSize: '28px',
            fontWeight: '700'
        }, 200 );
    });

    $("body").on("click", ".arrow_down", function () {
        $('.arrow_down').attr('src',"arrow_up.png");
        $('.arrow_down').addClass('arrow_up');
        $('.arrow_down').removeClass('arrow_down');

        $('.animatebox').animate ({
            height: '50px'
        }, 200 );

        $('.hiddenstuff').animate ({
            opacity: '0'
        }, 200 );

        $('.boxtitle').animate ({
            fontSize: '18px',
            fontWeight: '100'
        }, 200 );
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:36:27.977

`$('.arrow_up')`返回所有*当前存在*的元素的列表，其类为`arrow_up`. 您的`.arrow_down`元素是动态创建的，因此当您在页面加载时绑定事件时，这些元素实际上并不存在。

您需要稍微不同地绑定事件以考虑动态创建的元素：

```
$('body').on('click', '.arrow_down', function() {
  ...

$('body').on('click', '.arrow_up', function() {
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:39:00.847

因为它是动态的，所以使用`on`. 此外，您可以缩短代码一些：

```
$("body").on("click", ".arrow_up", function () {
    $('.arrow_up').attr('src',"arrow_down.png");
    $('.arrow_up').addClass('arrow_down');
    $('.arrow_up').removeClass('arrow_up');

    $('.animatebox').animate ({
        height: '250px'
    }, 200 );

    $('.hiddenstuff').animate ({
        opacity: '1'
    }, 200 );

    $('.boxtitle').animate ({
        fontSize: '28px',
        fontWeight: '700'
    }, 200 );
});

$("body").on("click", ".arrow_down", function () {
    $('.animatebox').animate ({
        height: '50px'
    }, 200 );

    $('.hiddenstuff').animate ({
        opacity: '0'
    }, 200 );

    $('.boxtitle').animate ({
        fontSize: '18px',
        fontWeight: '100'
    }, 200 );
}); 
```

您不需要为您将要做的每一件事都配备一个事件处理程序。这会很好（并且性能可能会更好）

这是一个工作的[jsFiddle](http://jsfiddle.net/KjZXL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:44:43.607

正如Blender在他的[回答中所说](https://stackoverflow.com/a/12615474/1516616)

> **$('.arrow_up')**返回所有当前存在的具有 arrow_up 类的元素的列表。您的 .arrow_down 元素是动态创建的，因此当您在页面加载时绑定事件时，这些元素实际上并不存在。
> 
> 您需要稍微不同地绑定事件以考虑动态创建的元素：

所以试试下面的代码：

```
// Arrow Up Click Event
$('body').on('click', '.arrow_up', function(){

   $('.arrow_up').attr('src',"arrow_down.png");
   $('.arrow_up').removeClass('arrow_up').addClass('arrow_down');

   $('.animatebox').animate ({
        height: '250px'
   }, 200 );

   $('.hiddenstuff').animate ({
        opacity: '1'
   }, 200 );

   $('.boxtitle').animate ({
        fontSize: '28px',
        fontWeight: '700'
   }, 200 );
});

// Arrow Down Click Event
$('body').on('click', '.arrow_down', function(){ 

   $('.arrow_down').attr('src',"arrow_up.png");
   $('.arrow_down').removeClass('arrow_down').addClass('arrow_up');

   $('.animatebox').animate ({
       height: '50px'
   }, 200 );

   $('.hiddenstuff').animate ({
        opacity: '0'
   }, 200 );

   $('.boxtitle').animate ({
        fontSize: '18px',
        fontWeight: '100'
    }, 200 );
}); 
```

[**看一个小演示**](http://jsfiddle.net/ktQwQ/)

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:42:42.807

您应该绑定事件中的所有`ready`事件，这样您就可以将脚本放在`head`.

不要为你想做的每一件事绑定事件，你可以在事件处理程序中做不止一件事。此外，您可以链接 jQuery 方法，这样您就不必一遍又一遍地选择相同的元素。

当您绑定事件时，它们只绑定在当时存在的元素上，因此`.arrow_up`不会绑定事件，因为代码运行时没有这样的元素。要处理发生变化的元素的事件，您需要使用委托而不是将事件绑定到元素上。您将委托绑定在不会更改的元素上，例如`.animatebox`元素。

```
$(function() {

  $('.animatebox').on('click', '.arrow_up', function(){
    $('.arrow_up').attr('src',"arrow_down.png").addClass('arrow_down').removeClass('arrow_up');
    $('.animatebox').animate ({
      height: '250px'
    }, 200 );
    $('.hiddenstuff').animate ({
      opacity: '1'
    }, 200 );
    $('.boxtitle').animate ({
      fontSize: '28px',
      fontWeight: '700'
    }, 200 );
  });

  $('.animatebox').on('click', '.arrow_down', function () {
    $('.animatebox').animate ({
      height: '50px'
    }, 200 );
    $('.hiddenstuff').animate ({
      opacity: '0'
    }, 200 );
    $('.boxtitle').animate ({
      fontSize: '18px',
      fontWeight: '100'
    }, 200 );
  });

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T07:06:56.743

为什么要在一个不断变化的类的元素上使用事件。为什么不使用**ID** 来代替。也不需要单独编写每个事件。它们可以在单个事件中处理，并且少了很多混乱..

我已将 id **arrowImg** 赋予 Img 元素..

```
 $(function() {
    $('#arrowImg').on('click', function() {
        var height = '250px';
        var opacity = '1';
        var fontSize = '28px';
        var fontWeight =  '700';
        if ($(this).hasClass('arrow_up')) {
            $(this).attr('src', "arrow_down.png").toggleClass()('arrow_down').removeClass('arrow_up');
        }
        else {
            height = '50px';
            opacity = '0';
            fontSize = '18px';
            fontWeight ='100';
            $(this).attr('src', "arrow_up.png").addClass('arrow_up').removeClass('arrow_down');
        }

        $('.animatebox').animate({
            height: height
        }, 200);
        $('.hiddenstuff').animate({
            opacity: opacity
        }, 200);
        $('.boxtitle').animate({
            fontSize: fontSize,
            fontWeight: fontWeight
        }, 200);
    });
});​ 
```

通过删除重复行可以更优化代码...

[在这里演示](http://jsfiddle.net/sushanth009/5SCnf/3/)

[更新的演示](http://jsfiddle.net/sushanth009/5SCnf/4/)

# java - javax.faces.SEPARATOR_CHAR 是否有一个常见的替代品？

> ID：12615434
> 
> 赞同：4
> 
> 时间：2012-09-27T06:33:00.117
> 
> 标签：java, javascript, html, css, jsf

我不喜欢 JSF 如何使用冒号来分隔生成的 HTML 中的 ID，因为它会与 CSS 和 JavaScript 选择器发生冲突。而且我不喜欢总是逃避它的想法。因此，我想用其他字符替换它。有什么缺点吗？有没有常见的替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:54:22.803

> *我不喜欢 JSF 如何使用冒号来分隔生成的 HTML 中的 ID，因为它会与 CSS 和 JavaScript 选择器发生冲突。而且我不喜欢总是逃避它的想法。*

只需按类名选择元素吗？HTML 元素的性质*真的*如此独特以至于需要通过 ID 来选择吗？这通常仅适用于主要布局组件。

* * *

> *因此，我想用其他字符替换它。有什么缺点吗？有没有常见的替代品？*

您可以使用任何您想要的字符，前提是它在 HTML 元素 ID/名称中有效，[指定](http://www.w3.org/TR/html4/types.html#h-6.2)如下：

> **ID**和**NAME**标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

在冒号旁边，唯一明智的选择是连字符、下划线和句点。由于句点本身也是 CSS 选择器中的一个特殊字符，因此它会遇到与冒号相同的问题。`-`因此，从逻辑上讲，除了连字符和下划线之外，您别无选择`_`。

至于缺点，肯定是有缺点的。您需要确保**没有**在 JSF 组件 ID 中的任何地方使用新的分隔符，`<h:someComponent id="foo_bar" />`例如`_`. 这些字符在 JSF 组件 ID 中是[允许](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setId%28java.lang.String%29)的（冒号是不允许的）。它会破坏`UIComponent#findComponent()`查找。

### 也可以看看：

*   [默认情况下，JSF 会生成不可用的 id，这些 id 与 web 标准的 css 部分不兼容](https://stackoverflow.com/questions/10726653/by-default-jsf-generates-unusable-ids-which-are-incompatible-with-css-part-of/10726774#10726774)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T08:23:35.973

嗯...基于对`javax.faces.SEPARATOR_CHAR`价值的简短谷歌搜索

似乎首选值是`-`or `_`（至少对于**BalusC**）

> 您只需要保证自己没有在 JSF 组件 ID 的任何地方使用它

[默认情况下，JSF 会生成不可用的 id，这些 id 与 web 标准的 css 部分不兼容](https://stackoverflow.com/a/10726774/617373)

[如何在 CSS 选择器中使用 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)

[JSF的缺点，有点历史](http://balusc.blogspot.co.il/2010/09/disadvantages-of-jsf-bit-of-history.html)

# android - 如何充分散列图像以避免冲突？

> ID：12615437
> 
> 赞同：0
> 
> 时间：2012-09-27T06:33:13.533
> 
> 标签：android, image, algorithm

我想使用哈希来唯一标识**来自 Android 手机的照片**，以回答对`does server have xyz?`和的查询`fetch image which hashes to xyz`。我面对这个：

1.  散列整个图像可能很慢，因此我只想散列图像文件的**前几个单元（字节）**，而不是整个文件。
2.  前几个字符由于**构图**不足，例如用户拍摄一个场景的照片，然后在框架底部添加回形针后拍摄同一场景的第二张照片
3.  前几个字符不足以避免哈希冲突，即可能导致用户之间的混淆。

我必须从图像文件中散列多少个字符，以降低发生事故的可能性？有更好的索引方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:33:11.230

一旦您从散列中留下任何字节，您就可以让某人有机会（有意或无意地）创建一个仅在这些字节上有所不同的文件，因此散列相同。

该图像实际上与原始图像有多大不同，在某种程度上取决于您从散列中遗漏了多少字节以及在哪里。但是您首先必须决定您可以容忍哪些哈希冲突（故意/意外和主要/次要），然后您可以考虑您可以使用多快的哈希函数，以及您需要在其中包含多少数据。

除非您愿意容忍数据更改的“大块”，否则您需要在散列中包含来自每个“大块”的字节。从 I/O 性能的角度来看，这意味着您几乎需要访问整个文件，因为即使读取一个字节也会导致硬件读取包含它的整个块。

可能要做的事情是从“绝对足够好”开始，例如整个文件的 SHA-256 哈希。看看这有多慢，然后考虑如何将性能提高所需的百分比。例如，如果它只有 50% 太慢，您可能可以使用更快（不太安全）的哈希解决问题，但仍然包括所有数据。

您可以通过实现一些完全无关紧要的散列（例如文件中所有 4 字节字的异或）来计算出使用不太安全的散列可以运行多快的限制，并查看运行速度有多快。如果这仍然太慢，那么您需要放弃准确性并且只对文件的一部分进行哈希处理（假设您已经尽最大努力优化 I/O）。

如果您愿意容忍冲突，那么对于大多数（所有？）图像格式，仅标题中就有足够的信息来唯一识别“正常”照片。这不会保护您免受故意碰撞或图像处理结果的影响，但除非有恶意，时间戳、图像大小、相机型号等，即使是少量的图像数据，实际上也会唯一地识别“有人带走”的每个实例某物的照片”。因此，在此基础上，您可以仅对文件的前 64-128k 进行散列（或者更少，我很慷慨地包括 EXIF 标头的最大大小加上一些），并且具有适用于大多数实际目的的散列，但可以如果有人愿意就被殴打。

顺便说一句，除非由一个非常称职的摄影师故意这样做（或者除非图像是故意后处理来实现这一点的），否则在右下角拍摄两张相同场景的照片，在开始时*不会*产生相同的字节的图像数据。如果您处于无法控制光线的环境中，甚至不会关闭。试试看。当使用为图像加时间戳的典型相机完成时，它肯定不会产生相同的文件。因此，如果你只是试图防御事故，那么问题会比你试图防御欺骗要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:37:15.910

我认为最有效的方法是选择随机字节（先前选择的，并且始终是静态的）并计算 XOR 或其他一些简单的哈希应该足够好。

# css - 如何在 Twitter Bootstrap 中将导航栏调整为固定宽度？

> ID：12615439
> 
> 赞同：1
> 
> 时间：2012-09-27T06:33:34.230
> 
> 标签：css, twitter-bootstrap

默认导航栏水平跨越浏览器窗口。

`<div class="navbar navbar-static-top">`

您如何将导航栏声明为仅`750px`宽度并放置在中心？
CSS 中的设置`margin:auto;`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:28:14.317

您正在使用的`.navbar-static-top`强制导航栏变为全角。删除该类，您将获得一个可调整大小的导航栏。然后，您可以将其包装成`span#`您想要的大小：

```
<div class="container">
    <div class="row">
        <div class="span6 offset3">
            <div class="navbar">
                ...
            </div>
        </div>
    </div>
</div> 
```

这里有一个例子：http: [//jsfiddle.net/simbirsk/xAMYF/](http://jsfiddle.net/simbirsk/xAMYF/)

# java - 除了ooxml中的内联之外，有什么方法可以在.docx中使用文本换行来获取图像wrt文本的位置？

> ID：12615442
> 
> 赞同：2
> 
> 时间：2012-09-27T06:33:49.723
> 
> 标签：java, apache-poi, openxml, saxparser, word-2007

当图像放置在 word 2007 文档中且文本换行不是“内联”时，图像相对于文本的位置不会反映在 document.xml 中。只有我能够从列和段落中获得水平和垂直位置偏移。我无法弄清楚图像是在两个文本单词之间还是在单词之后/之前。有没有办法知道，假设我想用 html 表示文档？我正在使用 sax 解析器和 Apache-poi 的某些部分来解析 .docx。如果有人熟悉这些技术，我们将不胜感激。

# linux - linux：智能 fsync()？

> ID：12615444
> 
> 赞同：0
> 
> 时间：2012-09-27T06:33:59.543
> 
> 标签：linux, sd-card, fsync

我正在录制音频并将其写入 SD 卡，数据速率约为 1.5 MB/s。我正在使用带有 ext4 文件系统的 4 类 SD 卡。

在一定的时间间隔后，内核会自动同步文件。这样做的缺点是，我的应用程序缓冲区堆积起来等待写入磁盘。

我认为，如果内核经常同步它现在正在做的事情，它可能会解决这个问题。

我`fsync()`在应用程序中使用过一定间隔后同步。但这并不能解决问题，因为在调用应用程序之前内核已经同步了某些时间`fsync()`，所以从应用程序调用 fsync() 是浪费时间。

我需要一个同步机制（比如`smart_fsync()`），这样当应用程序调用 smart_fsync() 时，内核将仅在一段时间未同步时才会同步，否则它将返回。

由于没有函数 as `smart_fsync()`。什么是可能的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:33:11.043

要问的第一个问题是，*您遇到的问题到底是什么？*内核将定期刷新脏（未写入的缓存）缓冲区 - 这是因为这样做往往比同步刷新更快（对应用程序的延迟影响更小）。不利的一面是，如果您达到内核对脏数据的限制，这意味着更大的延迟会受到影响（并且在不干净的关闭后可能会丢失更多的数据）。

如果要确保数据尽快到达磁盘，则只需使用该`O_SYNC`选项打开文件。这将立即将数据刷新到磁盘`write()`。当然，这意味着显着的性能损失，但另一方面，您可以完全控制何时刷新数据。

如果在同步进行时吞吐量下降，很可能是您尝试写入的速度超过了磁盘的支持速度，并达到了脏页内存限制。不幸的是，这意味着硬件根本达不到你试图推动它的写入速率——你需要写得更慢，或者在更快的媒体上缓冲数据（或者添加更多的 RAM！）。

另请注意，您的“智能 fsync”正是内核实现的 - 当以下情况之一为真时，它将刷新页面： * 内存中有太多脏数据。`/proc/sys/vm/dirty_background_bytes`当脏数据总量超过，或者总内存的百分比超过 时， 异步触发（不阻塞写入）`/proc/sys/vm/dirty_background_ratio`。当数据总量超过或总内存的百分比 超过 时同步触发（`write()`长时间阻塞您的应用程序） 。* 脏数据在内存中的等待时间过长。守护进程每厘秒（1/100 秒）检查旧的脏块 ，如果块在内存中的时间超过 .`/proc/sys/vm/dirty_bytes``/proc/sys/vm/dirty_ratio``pdflush``/proc/sys/vm/dirty_writeback_centisecs``/proc/sys/vm/dirty_expire_centisecs`

调整这些参数可能会有所帮助，但您最好弄清楚为什么默认值不能保持原样。

# php - 包含非 ASCII 字符的字符串被 PHP/MySQL 截断

> ID：12615447
> 
> 赞同：3
> 
> 时间：2012-09-27T06:34:15.673
> 
> 标签：php, html, mysql, utf-8, character-encoding

[我这里](http://ichtyo.mnhn.fr/projects/spemuse/spemuse_page1.php)有一个带有翻译功能的页面。我的问题是，当我将语言翻译成法语时，由于页面没有正确解释这些词，所以这些词被剪掉了。我检查了与我的问题相关的帖子，但没有一个有效。

在我的页面中，我放了这些东西：

*   `header ('Content-Type:text/html; charset=WINDOWS-1252');`-> 这只是为了在启动时坚持编码。我认为这个是可选的，但我仍然使用它。
*   `<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">`
*   从数据库 tablename: **labels**中获取等效翻译。**Labels**的表类型是 InnoDB，使用**utf8 -- UTF-8 Unicode**作为默认字符集。

**é**之后的字符正在被剪切。我需要做些什么来正确显示字符吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:30:36.840

我认为在后端使用 Unicode 并在多语言应用程序的前端使用代码页没有任何意义。`UTF-8`您要么在整个项目中使用相同的编码，要么在和之间手动来回转换`windows-1252`。

我觉得你阅读没有问题。标签从数据库中截断，否则您的浏览器会显示垃圾字符。所以这不是 PHP/HTML 的问题，而是 MySQL 的问题。在这种情况下`èéàòì`，MySQL当然能够从UTF-8转换为CP1252（latin1）。但是，如果不是这种情况（就像我们尝试将相同的字符串从 UTF-8 转换为 CP1251），MySQL 会显示一个问号`?`。

在您的情况下，我认为这是一个输入问题，即标签在数据库中被截断。这怎么可能？您可能有一个 UTF8 PHP 和 MySQL，但是当您的浏览器`windows-1252`从加载了此类字符集的页面提交表单时，它会发送字符串。在您的 PHP 脚本中，您应该将此字符串转码为，`UTF-8` **然后再将**其插入数据库，或者使用`SET NAMES 'CP1252'`. 由于您不这样做，您最终会尝试插入一堆无效的 UTF-8 字节，因此 MySQL 会截断字符串并且您的标签为空。附上一个测试用例。这是`test`桌子

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 
```

这是PHP部分。请注意，此脚本是 UTF-8 编码的，因此其中出现的每个文字字符串都具有相同的编码。

```
// This is a UTF-8 file, so my editor uses UTF-8 and thus each literal
// string is a UTF-8 string, since PHP only has binary strings.
$label = "Référence";

// Now let's translate this string as if it came from a browser submitting
// a form loaded from a cp1252 encoded page
$src = mb_convert_encoding($label, "CP1252", "UTF-8");

// But connect as if I were UTF-8
$db = new PDO('mysql:host=localhost;dbname=test;charset=utf8',
    'test', 'test');

// Insert the string
$stmt = $db->prepare('INSERT INTO test (name) VALUES ( ? )');
$stmt->bindValue(1, $src);
$stmt->execute();

// Read it
header("content-type: text/plain; charset=windows-1252");
foreach($db->query('SELECT * FROM test') as $row)
    echo $row['name'] . "\n"; 
```

你如何恢复？您可以使用字符集连接到 MySQL`cp1252`并让 MySQL 为您翻译，或者您在脚本中对字符串进行转码。

正确获取数据后，您必须提取它们并将其放在 HTML 页面上。这一次您将遇到同样的问题，但反过来：在 CP1252 文档中显示 UTF-8 字符串。DB 中的字节不合适，因为 UTF-8 是可变长度编码，而在 CP1252 中，char 正好是 1 个字节长。如果您将这些字节直接放入页面中，浏览器将为额外的字节显示一些随机乱码。因此，同样，您要么连接到指定`CP1252`字符集的数据库，以便 MySQL 负责转换并为您提供正确的字节，要么您自己在 PHP 端对字节进行转码。

或者你最好帮自己一个忙：到处使用相同的编码。我建议`UTF-8`是因为今天是*正确的*做法，但是您可以成功选择，`CP1252`因为它可以表示英语和法语字符（并节省一些存储空间，但我不认为这是一个问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:37:46.867

我的建议是在整个过程中使用相同的编码。使用 UTF-8 作为标题和元标记中的字符集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:39:45.233

在我看来，您的数据未正确存储在数据库中。如果您正在使用 mysqli，您可以在读取或写入数据库之前尝试设置连接对象的字符集。

```
// tells the mysqli connection to deliver UTF-8 encoded strings.
$db = new mysqli($dbHost, $dbUser, $dbPassword, $dbName);
$db->set_charset('utf8'); 
```

对于其他数据库，请参阅[PHP 和 MySQL 的 UTF-8](http://www.martinstoeckli.ch/php/php.html#utf8)。也许有必要再次插入法语文本（使用此设置），因为现有文本现在可能无效。

您链接的示例页面使用 UTF-8（文件格式）正确编码，尽管您的元标记有点不正确：

```
<!meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

`<!`没有注释掉，您必须改写`<!--`。最好只为 UTF-8 声明一次并删除其他元标记。

# browser - 如何避免在我的浏览器中重定向

> ID：12615452
> 
> 赞同：1
> 
> 时间：2012-09-27T06:34:45.713
> 
> 标签：browser, http-redirect

当我访问它们时，很少有网站会被重定向到其他一些链接。

例如，当我从浏览器通过 facebook 登录时，如果我同时打开另一个选项卡，在该选项卡中打开任何支持 FbLogin 功能的网站（比如 Nextag.com），则该网站会自动重定向到登录页面，我会自动登录。

我如何强制网站被重定向，或者我如何强制他们重定向到我想要的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:44:18.370

如果您可以成功访问 facebook cookie（您可以在 facebook 开发人员中找到它）然后使用 php 或其他语言，您可以确定 facebook 会话是打开还是关闭，然后您可以重定向。另一种方法是搜索“OPENID”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:00:33.373

我可以 。你用哪个平台，我不知道。但我尝试在 php 中告诉它。[首先从https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)下载 php sdk

然后创建一个文件夹lethe，并在你的目录中创建一个子文件夹“lib”。到 lib 文件夹复制并粘贴 src 文件夹到 sdk 。

然后在lethe 中创建一个文件。

```
 <? require 'lib/facebook.php';
    $facebook = new Facebook(array(
  'appId'  => 'yourAppId',
  'secret' => 'YourAppSecret',
));
    $userIns = $facebook->getUser();
    if(!$userIns) { header("location:http://mywebsite.com/login.php?ref=Open")} 

   else {
// Here The Code When you realise that user use your api and can open the user session
//@ your site , maybe bring him name and surname from graph.api or via sql query from your //db
} 
```

?>

# ios - EKEventStore 权限提示

> ID：12615455
> 
> 赞同：6
> 
> 时间：2012-09-27T06:34:59.443
> 
> 标签：ios, ios6

根据 Apple 的日历和事件编程指南：

在 iOS 6 及更高版本上，我们必须在事件存储初始化后通过 requestAccessToEntityType:completion: 方法请求访问以使用用户的日历数据库。

还声明了用户仅在应用程序第一次请求访问实体类型时才被提示；EKEventStore 的任何后续实例化都使用现有权限。当用户决定授予或拒绝权限时，您的应用程序不会被阻止。

我的问题是：有没有办法让我们再次提示用户请求访问实体类型？

我必须放一个 UIAlertView 来要求用户转到设置并给予适当的权限，这似乎很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:37:22.100

就像现在一样，如果用户第一次说不，您将无法再次提示用户。他们将需要进入设置来更改他们的选择。因此，警报是一种方法。

# php - 使用 Mail::factory('smtp',

> ID：12615459
> 
> 赞同：1
> 
> 时间：2012-09-27T06:35:30.913
> 
> 标签：php, email, return-path

我正在尝试发送将退回到我指定的地址的电子邮件，该地址与发送地址不同。

我用来发送电子邮件的代码是

```
$headers = array (
    'From' => $emailAdr
    'To' => $emailDest,
    'Subject' => $subject,
);                                      
$hdrs = $mime->headers($headers);

$smtp = Mail::factory('smtp',
        array ('host' => 'ssl://'.$emailServer,
               'auth' => true,
               'port' => '465',
               'username' => $emailUser,
               'password' => $emailPass));

$mail = $smtp->send($emailDest, $hdrs, $body); 
```

我在整个互联网上搜索了解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:46:22.137

尝试这个：

```
$headers = array (
    'From' => $emailAdr
    'To' => $emailDest,
    'Subject' => $subject,
    'Return-path' => 'return@path.com',
); 
```

但是，不同的邮件服务器会根据自己的规则翻译返回路径（它只是将使用`From`,`Reply-to`等等`X-Return-Path`

# c# - Json.Net 复制私人列表项

> ID：12615462
> 
> 赞同：1
> 
> 时间：2012-09-27T06:35:45.360
> 
> 标签：c#, json.net

目前我正在尝试在我的项目中使用 Json.Net 序列化程序。

我最近遇到的问题之一是反序列化对象的所有私有列表项都重复了。它可以像这样复制：

1.  创建具有类型`private`字段的`List<>`类，其中`List<>`泛型参数是其他类
2.  添加`public`属性，获取/设置`private`字段
3.  创建该类的实例，使用属性将 1 项添加到内部列表。
4.  使用设置为查看私有类数据的新 DefaultContractResolver 进行序列化；
5.  反序列化

重现问题的代码：

```
 public class ClassParam
    {
        public int? ParamOne
        {
            get;
            set;
        }
    }
    public class ClassWithParams
    {
        private List<ClassParam> _privateFieid = new List<ClassParam>();

        public List<ClassParam> PropertWithBackingField
        {
            get { return _privateFieid; }
            set { _privateFieid = value; }
        }

        public void AddElementToPrivateField(ClassParam classParam)
        {
            _privateFieid.Add(classParam);
        }

    }
    [Test]
    public void Test()
    {
            var instance = new ClassWithParams();

        var param1 = new ClassParam { ParamOne = 1 };

        instance.PropertWithBackingField.Add(param1);

        var contractResolver = new DefaultContractResolver();
        contractResolver.DefaultMembersSearchFlags |= BindingFlags.NonPublic;

        string serializedInstance = JsonConvert.SerializeObject(instance,
                                                                   Formatting.Indented,
                                                                   new JsonSerializerSettings()
                                                                   {
                                                                       ContractResolver = contractResolver

                                                                   });

        var deserializeInstance = JsonConvert.DeserializeObject(serializedInstance, typeof(ClassWithParams),
                                                                         new JsonSerializerSettings()
                                                                         {
                                                                             ContractResolver = contractResolver
                                                                         });
    } 
```

[![1](../Images/70e6b96f3f9c85c8181a37afac0911b0.png)](https://i.stack.imgur.com/k2Ghf.png)

`PropertWithBackingField`当我从中删除公共财产时`ClassWithParams`，一切正常。当我不使用 ContractResolver 的自定义设置时，问题也消失了。但我确实需要序列化我的类的私有数据，只要不是所有数据都通过公共属性公开。

我的代码有什么问题？是否有任何微妙之处，使用 Json.Net 还是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:42:47.913

对于此代码

```
var s = JsonConvert.SerializeObject(instance);
var desInst = JsonConvert.DeserializeObject<ClassWithParams>(s); 
```

你的 json 将是`{"PropertWithBackingField":[{"ParamOne":1}]}`

但是你说在序列化/反序列化中包含私有字段

```
contractResolver.DefaultMembersSearchFlags |= BindingFlags.NonPublic; 
```

并得到一个json

```
 {
  "_privateFieid": [
    {
      "ParamOne": 1
    }
  ],
  "PropertWithBackingField": [
    {
      "ParamOne": 1
    }
  ]
 } 
```

所以有两种*反序列化*，一种 for`_privateFieid`和一种 for`PropertWithBackingField`

使用`BindingFlags.Public`或使用我上面的代码要简单得多。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T06:39:53.910

`DeserializeInstance`方法接收现有实例作为参数。可能它不会创建新实例，而是填充现有实例并返回它。

试着放在`ReferenceEquals(instance, deserializedInstance)`你的手表上。为了避免数据重复使用不接受现有实例的重载或创建新实例并反序列化它。

# parsing - clojure 有什么工具可以解析 java 源代码吗？

> ID：12615463
> 
> 赞同：1
> 
> 时间：2012-09-27T06:35:47.187
> 
> 标签：parsing, clojure

> **可能重复：**
> [如何使用 Clojure 分析 Java 源文件](https://stackoverflow.com/questions/9375626/how-to-analyze-java-source-files-with-clojure)

java/clojure 中有哪些工具可以解析 java 源文件以理解 java 代码结构？

这样做的动机是为了代码生成.....假设我有一个包含 java 源代码的字符串

```
(def java-str 
"/**
 * @param r the modulus of the complex number to create
 * @param theta  the argument of the complex number to create
 * @return <code>r&middot;e<sup>i&middot;theta</sup></code>
 * @throws MathIllegalArgumentException  if r is negative
 * @since 1.1
 */
public static Complex polar2Complex(double r, double theta) {
    if (r < 0) {
        throw new MathIllegalArgumentException(
              LocalizedFormats.NEGATIVE_COMPLEX_MODULE, r);
    }
    return new Complex(r * FastMath.cos(theta), r * FastMath.sin(theta));
}
") 
```

然后`gen-clj-fn`可以编写生成函数定义的 clojure 字符串，该字符串知道 java 方法、参数名称、类型和顺序：

```
(gen-clj-fn java-str)
;;=> "(defn polar-to-complex [#^Double r #^Double theta] 
;;        (Complex/polar2Complex r theta))" 
```

理想情况下，往返是很好的`r`，但我不确定它是否可能......我认为它只给出类型签名而不是名称本身。`theta``clojure.reflect`

# php - SimpleXml 无法生成对象

> ID：12615464
> 
> 赞同：0
> 
> 时间：2012-09-27T06:35:52.093
> 
> 标签：php, xml, soap, simplexml

我使用 Soap 进行 Web 服务调用，使用 PHP 进行整个操作。当我发送请求时，我得到的响应为`341025COMPLETE`. 但是当我为 Source 选择它时，它会打印它后面的 XML。

我们已将它传递给`simplexml_load_string`函数，但它未能为其生成对象。

会有什么问题`simplexml_load_string`？当同一个字符串被硬编码时，它在通过函数参数时工作，它失败了。

我得到的 XML 是：

```
<applicantscreening xmlns="https://www.example.com/xml/services/PSI"><response><reportid>00000</reportid><backgroundreport></backgroundreport><status>TEST</status></response></applicantscreening> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:59:11.793

我认为 xml 应该有问题。

你能提供xml字符串吗？

看一个简单的例子：

```
$string = <<<XML
<?xml version='1.0'?> 
<document>
<title>Forty What?</title>
<from>Joe</from>
<to>Jane</to>
<body>
 I know that's the answer -- but what's the question?
</body>
</document> 
XML;
$xml = simplexml_load_string($string);
print_r($xml); 
```

# android - 搜索未知活动 (java.lang.ClassNotFoundException)

> ID：12615465
> 
> 赞同：2
> 
> 时间：2012-09-27T06:35:52.577
> 
> 标签：android, android-manifest, classloader, launching-application

帮我解决这个问题

```
java.lang.RuntimeException: Unable to instantiate application delhi.roshanara.margapp.MargApp: java.lang.ClassNotFoundException: delhi.roshanara.margapp.MargApp in loader dalvik.system.PathClassLoader[/data/app/delhi.roshanara.margapp-2.apk] 
```

它正在搜索 MargApp Activity 以打开项目，但没有此名称的活动。我想以*.LoginActivity*开始我的活动。清单文件结构如下：-

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:name="MargApp" >
        <activity
            android:name=".LoginActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".OrderMenuPage" />
        <activity
            android:name=".PartyOutstanding" />
        <activity
            android:name=".PartyPDC" />
        <activity 
            android:name=".TakeOrder"></activity>

         <activity
            android:name=".ShowOutstanding"
            android:screenOrientation="landscape" />
        <activity 
            android:name=".ShowPDC"
            android:screenOrientation="landscape"></activity>

    </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:47:03.850

我会尝试删除

```
android:name="MargApp" 
```

如果那不起作用，请尝试清理您的项目

项目>清洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:45:39.577

**不要使用 android:name 属性！**令人误解的是，它与您的应用程序的名称没有任何关系，实际上是在加载您的应用程序之前要加载的额外类的名称。这就是为什么你得到`ClassNotFoundException`. 删除它，它应该可以工作：

用这个替换您的应用程序标签...

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
```

# mongodb - 在 mongo 中需要使用 Identity 列加入两个集合并从两个集合中发出所需的列

> ID：12615467
> 
> 赞同：0
> 
> 时间：2012-09-27T06:36:03.357
> 
> 标签：mongodb, mapreduce

我有书和作者收藏。这个名字和works_written分别是相同的值列。所以我尝试了以下脚本，但它只发出第一个地图值，第二个地图值没有发出。

```
book = function() {
emit(this.id, {name: this.name,editions:this.editions});
 }
author = function() {
emit(this.id, {name:this.name,works_written: this.works_writtten,});
 }

r_b = function(k, values) {
var result = {};
values.forEach(function(value) {
    var name;
    for (name in value) {
        if (value.hasOwnProperty(name)) {
             result[name] = value[name];
        }
    }
 });
 return result;
 };
 r_a = function(k, values) {
 var result = {};
 values.forEach(function(value) {
    var works_written;
    for (works_written in value) {
        if (value.hasOwnProperty(works_written)) {
            result[works_written] = value[works_written];
         }
     }
 });
 return result;
 };
  res = db.book.mapReduce(book, r_ja, {out: {reduce: 'joined'}})
  res = db.author.mapReduce(author, r_jp, {out: {reduce: 'joined'}}) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:07:39.217

通过查看您的代码，您似乎有两个集合，“书”和“作者”。每本书的结构如下

```
{
    id: <some id>,
    name: <some name>,
    editions: <comma-separated string of editions>
} 
```

每个作者的结构为

```
{
    id: <some id>,
    name: <some name>,
    works_written: <comma-separated string of works written>
} 
```

将works_written 和 editions 存储为数组而不是逗号分隔的列表会更合理，每个列表都打包到一个单独的字符串中。这将使遍历数组成为可能。

此外，对于每个作者和每本书，您是否有多个文档？如果没有，你不需要 mapreduce 来做你想做的事情——一个简单的 find() 应该可以工作。

万一我误解了，你到底想做什么？

# python - 拦截dict __getitem__ 方法调用，当它被传递给另一个dict的更新方法时

> ID：12615469
> 
> 赞同：4
> 
> 时间：2012-09-27T06:36:12.843
> 
> 标签：python, dictionary

如您所知，python 允许我们简单地覆盖`dict.__getitem__`方法，因此当有人试图从中检索任何值时，我们可以在那里做一些不同的事情。

`MyDict(dict)`当一个类实例传递给另一个 python dict 实例的更新方法时，我想做一些代码。见下文：

```
class MyDict(dict):
    def __getitem__(self, item):
        print "Doing some stuff here"
        return dict.__getitem__(self, item)

d1 = MyDict({'1': 1, '2': 2})
d2 = {}
# I want to have d1.__getitem__ called, but it does not work :-(
d2.update(d1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:04:20.843

尝试使用[抽象基类](http://docs.python.org/library/collections.html#collections-abstract-base-classes)（或者，如果这是读写）。[`collections.Mapping`](http://docs.python.org/library/collections.html#collections.Mapping) [`collections.MutableMapping`](http://docs.python.org/library/collections.html#collections.MutableMapping)

```
import collections

class MyDict(collections.Mapping):
    def __init__(self, *args, **kwargs):
        self.data = dict(*args, **kwargs)

    def __len__(self):
        return len(self.data)

    def __iter__(self):
        return iter(self.data)

    def __contains__(self, key):
        return key in self.data

    def __getitem__(self, key):
        print 'Doing some stuff here'
        return self.data[key] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:08:09.490

您所需要的只是从中继承`MyDict`并`object`为其创建`.keys()`方法。见下文：

```
class MyDict(object):
    def __init__(self, items=()):
        self._dict = dict(items)

    def keys(self):
        return self._dict.keys()

    def __getitem__(self, item):
        print "Doing some stuff for item:", item
        return self._dict[item]

    def __setitem__(self, item, value):
        self._dict[item] = value

    # You can add some more dict methods

d1 = MyDict({'1': 1, '2': 2})
d2 = {}
# Now you will see some stuff executed for each
# value extracted from d1 while updating d2
d2.update(d1) 
```

# windows-mobile - 如何在 Windows Mobile 6 应用程序中使用相机

> ID：12615470
> 
> 赞同：2
> 
> 时间：2012-09-27T06:36:22.297
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6

我正在创建 windows mobile 6.5 应用程序。在该应用程序中，我必须使用图片和视频等相机操作。有一个包含两个按钮的表单，一个用于图片，另一个用于视频。如果用户单击图片按钮，则相机启动并单击图片并将图片保存在指定位置。从应用程序捕获视频的步骤相同

任何帮助表示赞赏

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:17:30.940

最简单的方法是使用[Microsoft.WindowsMo](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.forms.aspx) ​​bile.Forms.dll上的[CameraCaptureDialog 类](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.forms.cameracapturedialog.aspx)，此方法与硬件无关。看这个例子：

```
using System.ComponentModel;
using System.IO;
using System.Windows.Forms;
using Microsoft.WindowsMobile.Forms;

namespace CameraExample
{

    public class Form1 : Form
    {
        #region Code Designer.cs
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private IContainer components;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.btnPhoto = new System.Windows.Forms.Button();
            this.btnVideo = new System.Windows.Forms.Button();
            this.sfdFile = new System.Windows.Forms.SaveFileDialog();
            this.SuspendLayout();
            // 
            // btnPhoto
            // 
            this.btnPhoto.Location = new System.Drawing.Point(3, 3);
            this.btnPhoto.Name = "btnPhoto";
            this.btnPhoto.Size = new System.Drawing.Size(72, 20);
            this.btnPhoto.TabIndex = 0;
            this.btnPhoto.Text = "Photo";
            this.btnPhoto.Click += new System.EventHandler(this.btnPhoto_Click);
            // 
            // btnVideo
            // 
            this.btnVideo.Location = new System.Drawing.Point(81, 3);
            this.btnVideo.Name = "btnVideo";
            this.btnVideo.Size = new System.Drawing.Size(72, 20);
            this.btnVideo.TabIndex = 1;
            this.btnVideo.Text = "Video";
            this.btnVideo.Click += new System.EventHandler(this.btnVideo_Click);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(96F, 96F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Dpi;
            this.AutoScroll = true;
            this.ClientSize = new System.Drawing.Size(240, 294);
            this.Controls.Add(this.btnVideo);
            this.Controls.Add(this.btnPhoto);
            this.MinimizeBox = false;
            this.Name = "Form1";
            this.Text = "Form1";
            this.ResumeLayout(false);

        }

        #endregion

        private Button btnPhoto;
        private SaveFileDialog sfdFile;
        private Button btnVideo;

        #endregion

        public Form1()
        {
            InitializeComponent();
        }

        enum CameraType
        {
            Photo,
            Video
        }

        private void btnPhoto_Click(object sender, System.EventArgs e)
        {
            sfdFile.FileName = "photo.jpg";
            sfdFile.Filter = "Image Files |*.jpg";
            if (sfdFile.ShowDialog() == DialogResult.OK)
                ShowCamera(sfdFile.FileName, CameraType.Photo);
        }

        private void btnVideo_Click(object sender, System.EventArgs e)
        {
            sfdFile.FileName = "video.wmv";
            sfdFile.Filter = "Video Files |*.wmv";
            if (sfdFile.ShowDialog() == DialogResult.OK)
                ShowCamera(sfdFile.FileName, CameraType.Video);
        }

        private void ShowCamera(string FileName, CameraType typeOfCamera)
        {
            FileInfo fi = new FileInfo(FileName);
            CameraCaptureDialog camera = new CameraCaptureDialog
            {
                InitialDirectory = fi.DirectoryName,
                DefaultFileName = fi.Name,
                Mode = typeOfCamera == CameraType.Photo ? CameraCaptureMode.Still : CameraCaptureMode.VideoWithAudio,
                VideoTypes = CameraCaptureVideoTypes.All,
                Title = "Using the camera"
            };

            if (camera.ShowDialog() == DialogResult.OK)
                MessageBox.Show((typeOfCamera == CameraType.Photo ? "Photo " : "Video ") + FileName + " Captured");
            else
                MessageBox.Show("Not Captured");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:00:18.307

查看[SHCameraCapture](http://msdn.microsoft.com/en-us/library/bb160743.aspx)函数。它可以完全按照您指定的方式进行：使用内置的相机应用程序将视频或图像文件保存到用户定义的位置。使用此 API 制作您的应用程序只需要一些时间。

# java - 如何从 Eclipse“Open Call Hierarchy”获取项目信息？

> ID：12615471
> 
> 赞同：1
> 
> 时间：2012-09-27T06:36:23.217
> 
> 标签：java, eclipse, eclipse-plugin

我想得到eclipse中一些方法的调用链报告，所以按`Ctrl`++打开方法调用层次视图，按numpad_multiply键展开所有节点`Alt`。`H`

问题是我需要点击每个节点才能知道它属于哪个项目。

有什么方法或插件可以获取报告吗？

（我为 Web 开发人员使用 Eclipse 3.5 Galileo Java EE IDE。感谢您的任何建议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:18:59.200

回答我的问题，我希望这对某人有所帮助。（这不是一个聪明的方法，但它对我有用。）

准备：

1.  Ctrl+Alt+H 打开方法调用层次视图，按 numpad_multiply 键展开所有节点。

2.  Ctrl+A 选择所有节点。

3.  复制完全限定的类名，并将其保存到某处的文件中（例如 c:\tmp.txt）

4.  删除上述文件中的所有方法名称。

    例子：

    ```
     com.test.Class1.method1(Long, String)-> com.test.Class1 
    ```

资源：

1.  在同一工作区中创建一个新项目（java 类型）

2.  将目标项目引用添加到新项目

3.  循环上述文件的每一行（例如c：\ tmp.txt），最终使用此代码获取类位置：

    ```
     /**
             * Get class file location
             * @param path : example: com.test.Class1
             * @return : example: /D:/workspace/project/target/com/test/Class1.class
             * @throws ClassNotFoundException
             */
            private static String getFileLocationByClassName(String path) 
                throws ClassNotFoundException {
                if (path == null || path.length() == 0)
                    return "";
                Class<?> forName = Class.forName(path);
                URL resource = forName.getResource(forName.getSimpleName() + ".class");
                if (!"file".equalsIgnoreCase(resource.getProtocol()))
                    throw new IllegalStateException("Class is not stored in a file.");
                return resource.getPath();
            } 
    ```

4.  请注意，[project/target] 作为回报是项目名称，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T14:45:06.683

在 Kepler 上，窗口右侧有一个向下箭头（称为“查看菜单”），您可以在其中选中“显示文件名”

# java - 基础 - 使用 Java 读/写远程文件

> ID：12615475
> 
> 赞同：9
> 
> 时间：2012-09-27T06:36:32.937
> 
> 标签：java, file-io, java-io

我首先要求在远程 Ubuntu 机器上的目录中读取和写入文件。

首先，我编写了一个Java 程序，它可以从远程Windows 机器（即LAN）上的共享文件夹中读取、写入文件。在这里，类似这样的东西适用于我的（本地）Windows 机器：

```
File inputFile = new File(
                "\\172.17.89.76\EBook PDF");/*ignore the syntax errors, the loc is just for the idea*/ 
```

现在，当我考虑远程 Ubuntu 机器时，显然我不能做这样的事情，因为机器不在 LAN 上（*我不确定即使它在 LAN 上是否可以这样做*！）。因此，我尝试了以下方法：

1.  使用 Jsch，在两台机器（本地 - 远程 Linux，远程 Linux - 远程 Linux）之间建立信任并使用 sftp 写入文件。（完成）
2.  在两台机器上运行套接字 - 一个发送者，一个接收者（都是 Java）（完成）
3.  尝试实现类似于 Windows (LAN) 机器的代码片段的 I/O（未实现）

在做所有这些的时候，我有很多疑问，阅读了很多帖子等，我觉得我在基础上遗漏了一些东西：

*   实现 IO 需要某种建立信任（两台机器之间）的实用程序。但最后，我想编写一个类似于给出的代码片段的代码，而不管机器、网络等如何。
*   Jsch 解决方案和其他建议（通过 URL 使用 http、ftp 等）最终使用了一些在远程机器上运行的服务。换句话说，并不是 Java IO 被用于访问远程文件系统——这对我没有吸引力，因为我依赖于服务而不是使用旧的 I/O。
*   Samba、SSHFS 也出现在现场，只是让我更加困惑。但我不认为它们是我目标的解决方案！

重申一下，**我想使用 Java I/O（plain 或 nio，两者都很好）编写代码，它可以简单地读取、写入远程文件，而无需使用 ftp、http 等协议或套接字发送方-接收方模型上的服务**。我的期望有效吗？

*   如果不是，为什么以及我能做的最好的事情是使用 Java 读/写远程文件？
*   如果是，如何达到同样的效果！

PS：如果我需要详细说明以准确提出我的问题，请发表评论！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T12:25:33.857

回答您的问题 -**不**，您的期望无效。

从远程服务器检索文件本质上依赖于该服务器上运行的服务。要从远程服务器检索文件，远程服务器需要等待您对文件的请求。

您在问题中列出的已经实现的案例（使用 jsch 和 sftp，使用发送方和接收方 Java 套接字）基本上与此相同：

```
File inputFile = new File(
            "\\172.17.89.76\EBook PDF"); 
```

唯一的区别是 Java 使用本机操作系统内置的支持从 Windows 样式共享中读取。远程 Windows 机器上有一个正在运行的共享服务（就像 linux 上的 Samba 或 java 套接字程序）等待您的请求。

`File`来自(http://docs.oracle.com/javase/6/docs/api/java/io/File.html)上的 Java API 文档

> 位于其他机器上的文件的规范路径名，可通过远程文件系统协议（如 SMB 或 NFS ...

所以本质上，“Good old Java I/O”或多或少只是一些常见协议的包装。

要回答您问题的第二部分（使用 Java 读取/写入远程文件，我能做的最好的事情是什么？），这取决于您正在访问的远程系统，更重要的是，它上面运行了哪些**服务。**

如果您的目标远程机器是 Ubuntu 机器，我想说最好的选择是使用 Jsch。如果您的目标机器可以是 Windows 机器或 linux 机器，我可能会在两台机器上运行 Java 套接字（显然取决于您是否有权在远程机器上安装您的应用程序）。

一般来说，使用目标系统之间的共同最低分母（就文件共享协议而言）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T21:06:17.847

如果您想访问远程计算机上的文件系统，那么这台计算机必须通过服务使他的文件系统可用。这种服务通常是后台作业，它处理传入的请求并返回响应，例如用于身份验证、授权、读取和写入。请求/响应模式的规范称为协议。众所周知的协议是 Windows 上的 SMB（或 SAMBA）或 UNIX/LINUX 上的 NFS。要访问这样的远程服务，您需要在操作系统级别上挂载远程文件系统，并使其在本地作为 Windows 上的驱动器或作为 UNIX 上的挂载点可用。

然后，您可以像访问任何本地文件系统一样从 Java 程序访问远程文件系统。

当然也可以编写自己的文件服务提供者（使用自己的协议层）并在远程机器上运行它。作为此类尝试的传输层，可以使用套接字 (TCP/IP)。另一个好的传输层是 http 协议，例如带有一个 restful 服务或基于 WebDav 的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T21:32:11.457

我们使用[了 sshfs](http://fuse.sourceforge.net/sshfs.html)。您可以在 /etc/fstab 中添加以下行：

`sshfs#user@remoteAddress:remoteDir /mnt/ssh fuse defaults 0 0`

接着`mount /mnt/ssh`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T23:27:57.660

我认为 RMI 可能是解决方案，您可以在要连接的机器上设置一个服务器作为 RMI 服务器，并将您的机器用作客户端。

我会给客户端一个将发送到服务器的文件的路径，然后服务器可以将文件作为字节读入并将文件发送回客户端。

# sql-server-2008 - sql server 2008中的限时访问用户

> ID：12615482
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:36:49.160
> 
> 标签：sql-server-2008

我正在尝试在 Sql server 2008 SP1 中创建一组用户，可以在任何特定时间访问数据库，例如 12:00AM 到 6:00AM 。如果该用户尝试在上午 12:00 之前或上午 6:00 之后访问数据库，则访问将被拒绝，是否有任何用于用户管理的内置功能。

谢谢， 阿图尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:58:34.157

您可以创建一个[登录触发器](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.100%29.aspx)，拒绝他们在这些时间之间进行连接，但如果他们停留的时间超过预期，没有简单的方法可以切断他们的访问。

一种丑陋的方法是在早上 6 点检查所有[连接](http://msdn.microsoft.com/en-us/library/ms181509.aspx)，对于那些来自您不再希望连接的人的连接，发出[`KILL`](http://msdn.microsoft.com/en-us/library/ms173730.aspx)命令。但这对那些用户来说将是一种非常“突然”的体验——当时仍在进行的任何交易都将被回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:45:12.577

您能说出您的客户是如何连接到您的数据库的吗？我认为对系统前端实施登录限制会更容易。

# sharepoint-2010 - 工作流任务未创建

> ID：12615486
> 
> 赞同：3
> 
> 时间：2012-09-27T06:37:07.380
> 
> 标签：sharepoint-2010

我创建了一个自定义状态机工作流程。当我使用信息路径表单提交请求时，工作流程开始，但任务列表中没有创建任何任务。我试图在任务列表中手动输入，但仍然没有项目添加到任务列表中。我该如何解决这个问题？我的任务列表有问题吗？

# codeigniter - 我无法在codeigniter中上传多个文件上传

> ID：12615489
> 
> 赞同：1
> 
> 时间：2012-09-27T06:37:33.013
> 
> 标签：codeigniter, file-upload, codeigniter-2

这是我的视图（html）内容

```
<tr>
    <td width="341" class="linkssubhead">
        Subcategory Image&nbsp;<span class="errormsg">*</span>
    </td>
    <td width="965" align="left">
        <input type="file" name="subcategory_image" value=""  class="required" />&nbsp;&nbsp;<span class="errormsg"><?php  echo $file_error ; ?> </span>
    </td>       
</tr>
<tr>
    <td width="341" class="linkssubhead">
        Subcategory Banner Image&nbsp;<span class="errormsg">*</span>
    </td>
    <td width="965" align="left">
        <input type="file" name="subcategory_banner_image" value=""  class="required" />&nbsp;&nbsp;<span class="errormsg"><?php  echo $file_error ; ?> </span>
    </td>       
</tr>
<tr>
    <td width="341" class="linkssubhead">
        Subcategory Banner Logo&nbsp;<span class="errormsg">*</span>
    </td>
    <td width="965" align="left">
        <input type="file" name="subcategory_banner_logo" value=""  class="required" />&nbsp;&nbsp;<span class="errormsg"><?php  echo $file_error ; ?> </span>
    </td>       
</tr> 
```

这是我的控制器

```
$config_image['allowed_types'] =  'gif|jpg|png';
$config_image['overwrite'] =TRUE;
$config_image['subcategory_image']['upload_path'] = './public/subcategory/';
$config_image['subcategory_banner_image']['upload_path'] = './public/subcategory/bannerimage/';
$config_image['subcategory_banner_logo']['upload_path'] = './public/subcategory/bannerlogo/';
$config_image['subcategory_image']['file_name'] = $this->input->post('subcategory_name');
$config_image['subcategory_banner_image']['file_name'] = 'banner_image_'.$this->input->post('subcategory_name');
$config_image['subcategory_banner_logo']['file_name'] =  'banner_logo_'.$this->input->post('subcategory_name');

$this->load->library('upload', $config_image);
$this->upload->initialize($config_image); 
if (!$this->upload->do_upload(array('subcategory_image','subcategory_banner_image','subcategory_banner_logo')))
{
    $errors = $this->upload->display_errors();
    if ($errors)
    {
        $data['file_error'] = $errors;
        $data['body'] =  $this->load->view('matress_model/add_subcategory',$data,TRUE);
        $this->load->view('page',$data);
    } 
}
else
{
    redirect('fileupload/sucess');
} 
```

提交表单后我收到错误

```
Severity: Warning
Message: Illegal offset type in isset or empty
Filename: libraries/Upload.php
Line Number: 140 
```

如何摆脱这种情况以及如何允许多个文件上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:21:43.537

每个图像都有一个单独的配置数组，然后上传。像下面

```
//I have given an exmaple for one image repeat this for others,
$config_image[0]['allowed_types'] =  'gif|jpg|png';
$config_image[0]['overwrite'] =TRUE;
$config_image[0]['subcategory_image']['upload_path'] = './public/subcategory/';
$config_image[0]['subcategory_image']['file_name'] = $this->input->post('subcategory_name');

//Load and initialize the library as below and then upload
$this->load->library('upload', $config_image[0]);
$this->upload->initialize($config_image[0]); 
```

# django - Django：为每个请求/表单生成新的 CSRF 令牌

> ID：12615491
> 
> 赞同：13
> 
> 时间：2012-09-27T06:37:36.933
> 
> 标签：django, csrf

我们可以更改每个表单请求甚至每个请求的 CSRF 令牌，而不是一个活动会话的相同令牌吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-12-01T01:29:15.960

假设您有权访问该**`request`**对象：

```
from django.middleware.csrf import rotate_token
rotate_token(request) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-27T07:04:10.063

在 csrf 中间件中，他们做这样的事情，覆盖 cookie 集：

```
request.META["CSRF_COOKIE"] = _get_new_csrf_key() 
```

您可以`_get_new_csrf_key()`通过`from django.middleware.csrf import _get_new_csrf_key()`. 由于这是一种私人方法，我建议不要使用这样的黑客攻击。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-14T13:17:20.217

如果你想在中间件中使用它：

```
from django.middleware.csrf import rotate_token

class CSRFRefresh(object):
    def process_response(self, request, response):
        rotate_token(request)
        return response 
```

# sql - 如何使用 xml 显式生成带有元素和属性的 xml

> ID：12615493
> 
> 赞同：2
> 
> 时间：2012-09-27T06:37:37.887
> 
> 标签：sql, for-xml-explicit

我试图以以下格式生成 xml：

```
<Root>
    <Domain>Abc</Domain>
    <Name>Xyz</Name>
    <Contents>
        <Content>
            <ID>1</ID>
            <Value>Test 1</Value>
            <Record ID="1">Test 1</Record>
        </Content>
        <Content>
            <ID>2</ID>
            <Value>Test 2</Value>
            <Record ID="2">Test 2</Record>
        </Content>
    </Contents>
</Root> 
```

我的查询如下：

```
declare @TestTable table (ID int, Value varchar(100))

insert into @TestTable values (1,'Test 1')
insert into @TestTable values (2,'Test 2')

declare @Domain varchar(max)='Abc'
declare @Name varchar(max)='Xyz'

SELECT
1 AS Tag,
NULL AS Parent,
@Domain as 'Root!1!Domain!Element',
@Name as 'Root!1!Name!Element',
NULL as 'Contents!2!Element',
NULL as 'Content!3!ID!Element',
NULL as 'Content!3!Value!Element',
NULL as 'Content!3!Record!Element'

union

SELECT
2 AS Tag,
1 AS Parent,
NULL,NULL,NULL,NULL,NULL,NULL

union

select
3 as Tag,
2 as Parent,
NUll,NUll,NULL,
ID,Value,Value
from @TestTable

FOR XML EXPLICIT 
```

我的查询没有完全产生记录标签，目前是

```
<Record>Test 2</Record> 
```

这应该是

```
<Record ID=2>Test 2</Record> 
```

我尝试了所有的可能性，但没有得到标签。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:59:50.800

使用 FOR XML EXPLICIT 时不要忘记 ORDER BY。

* * *

```
SELECT
    1 AS Tag,
    NULL AS Parent,
    @Domain as 'Root!1!Domain!Element',
    @Name as 'Root!1!Name!Element',
    NULL as 'Contents!2!Element',
    NULL as 'Content!3!ID!Element',
    NULL as 'Content!3!Value!Element',
    NULL as 'Record!4!ID',
    NULL as 'Record!4!'

union

SELECT
    2 AS Tag,
    1 AS Parent,
    @Domain,NULL,NULL,NULL,NULL,NULL, null

union

select
    3 as Tag,
    2 as Parent,
    @Domain,NUll,NULL,
    ID,Value,null,null

    from @TestTable
union

select
    4 as Tag,
    3 as Parent,
    @Domain,NUll,NULL,
    ID,Value,ID,Value

    from @TestTable
ORDER BY    'Root!1!Domain!Element','Contents!2!Element','Content!3!ID!Element','Record!4!ID'

FOR XML EXPLICIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:46:19.767

我无法从 xml 显式获得预期的输出，而是使用 xml 路径并获得了输出。这是我更新的查询

```
SELECT 
       @Domain "Domain",
       @Name "Name",
(
SELECT 
       ID  "ID",
       Value   "Value",
       (select 
        ID "@ID",
        Value  as "text()"      
        FOR XML PATH('Record'), ELEMENTS, TYPE )       
FROM   @TestTable
FOR XML PATH ('Content'), TYPE, ROOT('Contents')
)
FOR XML PATH ('Root') 
```

欢迎您发布使用 xml 显式的修复。

# sugarcrm - SugarCRM：如何通过 REST API 获取帐户的所有联系人

> ID：12615498
> 
> 赞同：3
> 
> 时间：2012-09-27T06:37:51.677
> 
> 标签：sugarcrm

我正在尝试使用 v2 REST API 从 SugarCRM 获取特定帐户的所有联系人（我知道帐户 ID）。

我正在发送带有以下参数的 GET 请求：

```
input_type => 'JSON'

response_type => 'JSON'

method => 'get_entry_list'

rest_data => '{session:"some-valid-session-id", module_name:"Contacts", query:"contacts.account_id=some-valid-id"}' 
```

我希望获得与此帐户相关的所有联系人，但我收到错误“... MySQL 错误 1054：'where 子句'中的未知列'contacts.account_id'”

但是，当我尝试获取所有联系人而不提供任何查询 (query='') 时，我会获取所有联系人及其所有属性，并且可以看到有一个 account_id 属性。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:55:27.887

试试`query:"accounts.id=some-valid-id"`。

过去它对我有用`SOAP API`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T07:49:55.660

这是我的方法。它使用这个包装类：http: [//github.com/asakusuma/SugarCRM-REST-API-Wrapper-Class/](http://github.com/asakusuma/SugarCRM-REST-API-Wrapper-Class/)

```
/**
 * returns an array of contacts that are related to the accountId passed as a param.
 * The array returned will be an array of associative arrays.
 * @param $accountId
 * @param array $contactSelectFields optional sets the different items to return, default includes id, email1, name, title, phone_work, and description
 * @return array
 *
 */
public function getAllContactsAtOrganization( $accountId, $contactSelectFields=array("id", "email1", "name", "title", "phone_work", "description")) {

    $sugar = new Sugar_REST( SUGAR_REST_URL, SUGAR_USER_NAME, SUGAR_PASSWORD);

    $fields = array( "Accounts" => array("id", "name"),
        "Contacts" =>  $contactSelectFields);
    $options = array(
        'where' => "accounts.id='$accountId'"
    );
    $apiResult = $sugar->get_with_related("Accounts", $fields, $options );

    $contacts = array();
    foreach( $apiResult['relationship_list'][0]['link_list'][0]['records'] as $almostContact) {
        $curr = array();
        foreach($contactSelectFields as $key) {
            $curr[$key] = $almostContact['link_value'][$key]['value'];
        }
        $contacts[] = $curr;
    }

    //print_r($contacts);

    return $contacts;
} 
```

## 样品返回

```
Array
(
    [0] => Array
        (
            [id] => 47e1376c-3029-fc42-5ae2-51aeead1041b
            [email1] => johndoe@gmail.com
            [name] => Blake Robertson
            [title] => CTO
            [phone_work] => 8881112222 
            [description] => Opinionated developer that hates SugarCRM's REST API with a passion!
        )

    [1] => Array
        (
            [id] => 4c8e3fcf-8e69-ed7d-e239-51a8efa4f530
            [email1] => csmith@mailinator.com
            [name] => Carolyn Smith
            [title] => Director of Something
            [phone_work] => 832-211-2222
            [description] => She's a smooth operator...
        )
) 
```

## 供参考

### 这是“rest-data”（格式很好）

使用了 php 数组的 print_r

```
Array
(
    [session] => 9j7fm4268l0aqm25kvf9v567t3
    [module_name] => Accounts
    [query] => accounts.id='e583715b-7168-5d61-5fb1-513510b39705'
    [order_by] => 
    [offset] => 0
    [select_fields] => Array
        (
            [0] => id
            [1] => name
        )

    [link_name_to_fields_array] => Array
        (
            [0] => Array
                (
                    [name] => contacts
                    [value] => Array
                        (
                            [0] => id
                            [1] => email1
                            [2] => name
                            [3] => title
                            [4] => phone_work
                            [5] => description
                        )

                )

        )

    [max_results] => 20
    [deleted] => FALSE
) 
```

### 帖子正文

> 方法=get_entry_list&input_type=JSON&response_type=JSON&rest_data={"session":"iov5a257lk5acsg9l3ll6kuej3","module_name":"Accounts","query":"accounts.id='e583715b-7168-5d61-5fb1-513510b39705'","order_by" :null,"offset":0,"select_fields":["id","name"],"link_name_to_fields_array":[{"name":"contacts","value":["id","email1", "name","title","phone_work","description"]}],"max_results":20,"deleted":"FALSE"}method=logout&input_type=JSON&response_type=JSON&rest_data={"session":"iov5a257lk5acsg9l3ll6kuej3"}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:07:40.223

我还不熟悉 SugarCRM，但是您是否尝试过仅使用 account_id=some-valid-id ？因为我也做了一个 REST 请求来添加一个联系人到 sugarcrm 并且我没有提到表的名称，只是字段。我没有尝试过，但对我来说这似乎是合乎逻辑的，因为您已经提到了模块的名称，所以我猜糖知道在处理您的查询时要查找什么表。

# regex - 是否有可能知道在正则表达式比较中用什么字符串替换通配符？

> ID：12615505
> 
> 赞同：0
> 
> 时间：2012-09-27T06:38:46.803
> 
> 标签：regex, language-agnostic

假设我检查一个字符串是否与带有通配符的正则表达式匹配。如何以编程方式获取提取哪个子字符串替换通配符？

简单的例子：正则表达式`"[foo|bar].*\.txt"`就是说，找到的匹配字符串是“foo123.txt”。在这种情况下，我想要的答案是“123”，因为它是替换通配符的子字符串。如果匹配字符串是 bar0123456789.txt，那么答案是 0123456789。

我使用 c#，但我不介意我也可以在 c# 中实现的其他语言的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:50:20.077

如果你想要一个组，不要使用方括号。方括号创建一个[字符类](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#character_classes)。

你想要的是一个[非捕获组](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)：

```
(?:foo|bar).*\.txt 
```

要从`.*`(`.`是匹配任何字符的特殊字符，但换行符（默认情况下）并且`*`是重复前一个字符 0 次或更多次的[量词](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#quantifiers)）获取结果，您需要将其放入[捕获组](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)中。

```
(?:foo|bar)(.*)\.txt 
```

# objective-c - 目标 C：在按钮数组上添加操作

> ID：12615507
> 
> 赞同：3
> 
> 时间：2012-09-27T06:38:56.977
> 
> 标签：objective-c, ios, uibutton, icarousel

我是Objective-C的新手，有人可以帮我吗？我正在尝试制作按钮轮播，但我没有做到。

我得到它只是在加载时显示所有按钮，仅此而已。我不能在每个按钮上添加操作，我的意思是标记它们。

这是我第一次以这种方式声明按钮。按钮不起作用。

这是我的代码：

```
- (void)loadView {

    [super loadView];

    self.view.backgroundColor = [UIColor grayColor];

    mainHolder = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"feat.png"]];
    [mainHolder setUserInteractionEnabled:YES];
    [mainHolder setFrame: CGRectMake(0, 0, 1024, 768)];
    [self.view addSubview: mainHolder];

    header = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"header.png"]];
    [header setFrame:CGRectMake(0, 0, 1024, 50)];
    [header setUserInteractionEnabled:YES];
    [mainHolder addSubview:header];

    // The items to be displayed in the carousel
    items = [NSArray arrayWithObjects:
             [UIImage imageNamed:@"picOne.png"],
             [UIImage imageNamed:@"picTwo.png"],
             [UIImage imageNamed:@"picThree.png"],
             [UIImage imageNamed:@"picFour.png"],
             [UIImage imageNamed:@"picFive.png"],
             [UIImage imageNamed:@"picSix.png"],
             [UIImage imageNamed:@"picSeven.png"],
             [UIImage imageNamed:@"picEight.png"],
             [UIImage imageNamed:@"picNine.png"],
             [UIImage imageNamed:@"picTen.png"],
             [UIImage imageNamed:@"picEleven.png"],
             nil];

    // Initialize and configure the carousel
    carousel = [[iCarousel alloc] initWithFrame:self.view.bounds];
    carousel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    carousel.type = iCarouselTypeCoverFlow2;
    carousel.dataSource = self;

    [self.view addSubview:carousel];
}

#pragma mark -
#pragma mark iCarousel methods

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [items count];
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    UIImage *image = [items objectAtIndex:index];
    imageChoices = [[[UIButton alloc] initWithFrame:CGRectMake(253, 150, 518, 389)] autorelease];
    [imageChoices setBackgroundImage:image forState:UIControlStateNormal];
    [imageChoices setUserInteractionEnabled:YES];
    [imageChoices setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    imageChoices.titleLabel.font = [imageChoices.titleLabel.font fontWithSize:50];
    [imageChoices addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
    imageChoices.tag=index;
    return imageChoices;

}

- (void)buttonTapped:(UIButton *)sender
{
    //I don't know how to tag each button here.
    switch(sender.tag){

    case 1:{
        NSLog(@"Photo1");
    }
        break;
    case 2:{
        NSLog(@"Photo2");
    }
    case 3:{
        NSLog(@"Photo3");
    }
        break;
    case 4:{
        NSLog(@"Photo4");
    }
        break;
    case 5:{
        NSLog(@"Photo5");
    }
        break;   
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:18:45.507

以这种方式实现目标方法：

```
- (IBAction)buttonTapped:(id)sender
{
    switch(sender.tag){

        case 1:{
            NSLog(@"Photo1");
            break;
        }
        case 2:{
            NSLog(@"Photo2");
            break;
        }
        case 3:{
            NSLog(@"Photo3");
            break;
        }
        case 4:{
            NSLog(@"Photo4");
            break;
        }
        case 5:{
            NSLog(@"Photo5");
            break;
        }
        default:{
            NSLog(@"Default");
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:55:01.197

试试这个

```
- (void)buttonTapped:(UIButton *)sender
{

    UIButton *sendButton = (UIButton *)sender; //No need of this! We already have sender

    switch(sendButton.tag)
    {

        //.......

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:55:01.727

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    UIImage *image = [items objectAtIndex:index];

    //Instead of adding single UIButton, add separate for each carousel.
    UIButton *imageChoices = [[[UIButton alloc] initWithFrame:CGRectMake(253, 150, 518, 389)] autorelease];
    [imageChoices setBackgroundImage:image forState:UIControlStateNormal];
    [imageChoices setUserInteractionEnabled:YES];
    [imageChoices setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    imageChoices.titleLabel.font = [imageChoices.titleLabel.font fontWithSize:50];
    [imageChoices addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];

    imageChoices.tag=index; //print index, that it should be unique or not?

    return imageChoices;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:09:26.293

添加`carousel.delegate = self;`在您的 loadview 方法中，然后实施

```
- (void)carousel:(iCarousel *)crsl didSelectItemAtIndex:(NSInteger)index { } 
```

# php - 如何合并 10 个数组键和值，并更新特定数组？

> ID：12615508
> 
> 赞同：0
> 
> 时间：2012-09-27T06:38:56.630
> 
> 标签：php, arrays, array-merge

我们正在寻找一个可以合并数组键和值并特别更新它的函数。

```
$array = array('testing1','testing2','testing3','testing4','testing5','testing6','testing7','testing8','testing9','testing10','testing11','testing12','testing13','testing14'); 
```

我们只想像这样将 10 个值与“空格”合并。

```
$finalarray = array('testing1 testing2 testing3 testing4 testing5 testing6 testing7 testing8 testing9 testing10', 'testing11 testing12 testing13 testing14'); 
```

有没有在 PHP 中做同样事情的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:41:09.093

你可以[`array_chunk`](http://php.net/manual/en/function.array-chunk.php)使用[`array_map`](http://php.net/manual/en/function.array-map.php)

```
 $array = array('testing1','testing2','testing3','testing4','testing5','testing6','testing7','testing8','testing9','testing10','testing11','testing12','testing13','testing14');
    $final = array_chunk($array,10);    
    $final = array_map(function ($n){return implode(" ", $n);}, $final); 
```

输出

```
array
  0 => string 'testing1 testing2 testing3 testing4 testing5 testing6 testing7 testing8 testing9 testing10' (length=90)
  1 => string 'testing11 testing12 testing13 testing14' (length=39) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:45:48.447

我在我的脑海中没有看到任何直接的 php 函数，但你可以尝试这样的事情：

```
$newArray = count($array) > 0 ? array ($array[0]) : array();
for ($i=1;$i<count($array);$i++) {
    if ($i % 10 == 0) {
       $finalarray[] = $newArray;
       $newArray = array ($array[$i]);
    } else {
       $newArray[] = $array[$i];
    }
}
if ( count($newArray) > 0 ) {
    $finalarray[] = $newArray;
} 
```

# javascript - console.log 在 chrome.tabs.executeScript 中不起作用

> ID：12615515
> 
> 赞同：3
> 
> 时间：2012-09-27T06:39:20.873
> 
> 标签：javascript, google-chrome-extension

用户单击我的上下文菜单项后，我需要执行脚本。

因此，出于这个目的，我从后台 js 创建了上下文菜单：

```
chrome.contextMenus.create({"title": title, "contexts": contexts,
                                       "onclick": genericOnClick}); 
```

它按预期显示。后来从 genericOnClick 我尝试执行我的脚本：

```
chrome.tabs.executeScript(null, {code: "console.log('test 1');"}, function() {
      console.log("test 2");
  }); 
```

我可以看到“测试 2”被打印到控制台，但“测试 1”永远不会被打印。我究竟做错了什么？我尝试将 console.log 语句添加到单独的 js 文件中，但也无法打印：

```
chrome.tabs.executeScript(null, {"file": 'content_script.js'}, function() {
      console.log("test 2");
  }); 
```

注意：我的 content_script.js 没有在清单中定义。我的清单如下所示：

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Sample extension",
  "page_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "http://*/*",
    "https://*/*",
    "tabs",
    "contextMenus"
  ],
  "background": {
    "scripts": ["sample.js"]
  },

  "icons": {
    "16": "icon16.png"
  }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T03:14:56.693

扩展程序中唯一可以访问**控制台**的代码是注入原始页面的*内容脚本。*

*从您的代码看来，您正试图从后台脚本*写入控制台。因此，要从后台页面写入控制台，您必须注入*内容脚本*来为您完成这项工作。

在我的扩展中，我使用自己的*函数将消息从**后台脚本*写入控制台。下面给出了相同的代码：

```
function logMessage(msg){
    chrome.tabs.executeScript({code:"console.log('"+msg+"')"});
} 
```

将上述定义为后台脚本中的第一个函数，并从*后台脚本*中的任何位置调用它以将消息写入控制台。

在您的情况下，您可以从*genericOnClick*函数中使用它来将消息写入控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:50:15.103

```
// addListener
chrome.browserAction.onClicked.addListener(function() {
    chrome.tabs.executeScript(null, {file: "content_script.js"}, function() {

        console.log("test 2");
    });
});

 // Context Menu
chrome.contextMenus.create({
    title: myTitle,
    contexts: ['page'],
    onclick: function (detail, tab) { fn(tab) }
}); 
```

所以;

```
"permissions": [
"tabs", "http://*/*", "https://*/*"
]

chrome.tabs.executeScript(null,{code:"document.body.style.backgroundColor='red'"}); 
```

或者：

```
// Functional structure
function hi() { alert("hi"); };

// hi function toString after run  function (hi)()
chrome.tabs.executeScript(null, { code: "(" + hi.toString() + ")()" }); 
```

# macos - 如何将整数从 Arduino 传递到 Mac OS X 上的 C 应用程序

> ID：12615517
> 
> 赞同：1
> 
> 时间：2012-09-27T06:39:28.500
> 
> 标签：macos, arduino, usbserial

从 C 应用程序读取 Arduino 上的值的标准方法是什么？

我有一个加速度计和几个电位器，我想将它们绑定到[Cocoa](http://en.wikipedia.org/wiki/Cocoa_%28API%29)控件，例如 NSSlider。

我的 arduino 当前连接到：`/dev/cu.usbmodem26431`并且我可以在串行监视器中读取 AnalogReadSerial 代码示例打印的值。

我如何阅读`/dev/cu.usbmodem26431`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:53:23.130

**可可系列**（编辑）

这里介绍了三种与 Objective C 交互的方法

[http://arduino.cc/playground/Interfacing/Cocoa](http://arduino.cc/playground/Interfacing/Cocoa)

**Arduino 串行**

如果您知道如何建立`Serial/USB`连接，那么您可以将值作为字符串或二进制发送到 Arduino。

在`setup()`Arduino 上的方法中，您可以`Serial`像这样建立连接。

*注意：本例使用`115200`波特率/速度*

```
Serial.begin(115200); 
```

在`loop()`Arduino 上的方法中，您可以从 c 应用程序中读取数据。这是一个完整的 Arduino 示例，包括如何使用`Serial.print()`

```
int incomingByte = 0;   // for incoming serial data

void setup() {
        Serial.begin(115200);     // opens serial port, sets data rate to 115200 bps
}

void loop() {

        // send data only when you receive data:
        if (Serial.available() > 0) {
                // read the incoming byte:
                incomingByte = Serial.read();

                // say what you got:
                Serial.print("I received: ");
                Serial.println(incomingByte, DEC);
        }
} 
```

来源[http://arduino.cc/en/Serial/read](http://arduino.cc/en/Serial/read)

上面的例子很粗略，你可以使用 Serial.available() 来查看有多少数据在等待读取。

因为`strings`您可能希望使用`\n`行终止符或其他类型的终止符作为数据包结束的指示符（以了解何时完全接收到它）。

设计自己的标头并`check sum`确保数据完整性是个好主意，但我不会`check sums`为简单的不重要项目而烦恼。

例如，gps 系统通常在字符串/文本模式下发送句子。如果您查找名为 tinyGPS 的 Arduino 库，您将看到一种将整个句子读入 Arduino 程序中不同变量的方法。

这是一个 NMEA GPS 语句，不要在您的项目中使用相同的标题，而是自己设计。这只是您如何将多个值（int、string、float 等）传输到 Arduino 的示例

```
$GPBWC,081837,,,,,,T,,M,,N,*13 
```

[http://aprs.gids.nl/nmea/](http://aprs.gids.nl/nmea/)

# php - mysql查询以获取匹配的记录

> ID：12615524
> 
> 赞同：4
> 
> 时间：2012-09-27T06:39:46.197
> 
> 标签：php, mysql, sql

Table_One

```
id name groupid
1  AAA   5,6
2  BBB   5,7
3  CCC   15 
```

我正在尝试进行如下查询：

```
select * from Table_One 
where Table_One.groupid like '%".$objectData[groupid]."%' 
```

这样如果值为`$objectData[groupid]`5 那么结果应该是

```
1  AAA   5,6
2  BBB   5,7 
```

同样，如果值为`$objectData[groupid]`6，则结果应为

```
1  AAA   5,6 
```

并且，如果值为`$objectData[groupid]`7，则结果应为

```
2  BBB   5,7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:41:38.287

而不是使用`LIKE`使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)函数，试试这个：

```
SELECT * 
FROM Table_One 
WHERE FIND_IN_SET(".$objectData[groupid].", Table_One.groupid); 
```

# python - joblib 与 pickle 的不同用例是什么？

> ID：12615525
> 
> 赞同：117
> 
> 时间：2012-09-27T06:39:45.993
> 
> 标签：python, pickle, scikit-learn

背景：我刚刚开始使用 scikit-learn，并在页面底部阅读了有关[joblib 与 pickle](http://scikit-learn.org/stable/tutorial/basic/tutorial.html)的内容。

> 使用joblib替换pickle（joblib.dump & joblib.load）可能更有趣，这在大数据上效率更高，但只能pickle到磁盘而不是字符串

我读了这个关于 Pickle 的问答， [Python 中 pickle 的常见用例，](https://stackoverflow.com/questions/3438675/common-use-of-pickle-in-python)想知道这里的社区是否可以分享 joblib 和 pickle 之间的区别？什么时候应该使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-09-27T08:56:34.857

*   **joblib 在大型 numpy 数组上通常要快得多，**因为它对 numpy 数据结构的数组缓冲区进行了特殊处理。要了解实现细节，您可以查看[源代码](https://github.com/joblib/joblib/blob/master/joblib/numpy_pickle.py)。它还可以在使用 zlib 或 lz4 进行酸洗时即时压缩该数据。
*   **joblib 还可以**在加载时对未压缩的 joblib-pickled numpy 数组的数据缓冲区进行内存映射，从而可以在进程之间共享内存。
*   **如果您不腌制大型 numpy 数组，那么常规腌制可以明显更快，特别是在小型 python 对象的大型集合**（例如 str 对象的大字典）上，因为标准库的 pickle 模块是在 C 中实现的，而 joblib 是纯蟒蛇。
*   由于 PEP 574（Pickle 协议 5）已合并到 Python 3.8 中，现在使用标准库腌制大型 numpy 数组的效率更高（内存方面和 cpu 方面）。在这种情况下，大型阵列意味着 4GB 或更多。
*   但是**joblib 仍然可以在 Python 3.8 中使用，以**在内存映射模式下加载具有嵌套 numpy 数组的对象`mmap_mode="r"`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-05-15T23:57:12.340

感谢 Gunjan 给我们这个脚本！我为 Python3 结果修改了它

```
#comapare pickle loaders
from time import time
import pickle
import os
import _pickle as cPickle
from sklearn.externals import joblib

file = os.path.join(os.path.dirname(os.path.realpath(__file__)), 'database.clf')
t1 = time()
lis = []
d = pickle.load(open(file,"rb"))
print("time for loading file size with pickle", os.path.getsize(file),"KB =>", time()-t1)

t1 = time()
cPickle.load(open(file,"rb"))
print("time for loading file size with cpickle", os.path.getsize(file),"KB =>", time()-t1)

t1 = time()
joblib.load(file)
print("time for loading file size joblib", os.path.getsize(file),"KB =>", time()-t1)

time for loading file size with pickle 79708 KB => 0.16768312454223633
time for loading file size with cpickle 79708 KB => 0.0002372264862060547
time for loading file size joblib 79708 KB => 0.0006849765777587891 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-07T11:36:33.940

我遇到了同样的问题，所以我尝试了这个（使用 Python 2.7），因为我需要加载一个大的泡菜文件

```
#comapare pickle loaders
from time import time
import pickle
import os
try:
   import cPickle
except:
   print "Cannot import cPickle"
import joblib

t1 = time()
lis = []
d = pickle.load(open("classi.pickle","r"))
print "time for loading file size with pickle", os.path.getsize("classi.pickle"),"KB =>", time()-t1

t1 = time()
cPickle.load(open("classi.pickle","r"))
print "time for loading file size with cpickle", os.path.getsize("classi.pickle"),"KB =>", time()-t1

t1 = time()
joblib.load("classi.pickle")
print "time for loading file size joblib", os.path.getsize("classi.pickle"),"KB =>", time()-t1 
```

输出为

```
time for loading file size with pickle 1154320653 KB => 6.75876188278
time for loading file size with cpickle 1154320653 KB => 52.6876490116
time for loading file size joblib 1154320653 KB => 6.27503800392 
```

根据这个 joblib 比这 3 个模块中的 cPickle 和 Pickle 模块工作得更好。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-02T08:20:45.937

只是一个谦虚的说明...... Pickle 更适合拟合的 scikit-learn 估计器/训练模型。在 ML 应用程序中，训练过的模型主要被保存和加载以进行预测。

# c - malloc 段错误

> ID：12615526
> 
> 赞同：0
> 
> 时间：2012-09-27T06:39:48.270
> 
> 标签：c, malloc, qsort

我写了一个函数来为 2 个双变量分配内存。它在所需的内存大小较小时工作，但当所需的内存增长相对较大时会导致段错误。书面代码中是否有任何错误或不良做法？

```
void RDF_MALLOC(void** p, size_t sz){

*p = malloc(sz);
    if (*p == NULL){
        RDF_LOG(kERROR, "Insufficient memory.\n");
    } else {
        memset(*p, 0x00, sz);
    }
}

void RDF_FREE(void* p){
    if (p != NULL){
        free(p);
        p = NULL;
    } else {
        RDF_LOG(kERROR, "Fail to free memory.\n");
    }
}

void calcErr(){

    int PTCORE_MAX_SESSION_NODE = 1800;

    double* sum_least_square_err = NULL;
    double* node_sum_least_square_err = NULL;

    RDF_MALLOC((void**)&sum_least_square_err, PTCORE_MAX_SESSION_NODE*PTCORE_MAX_SESSION_NODE);
    RDF_MALLOC((void**)&node_sum_least_square_err, PTCORE_MAX_SESSION_NODE);

    /* run qsort to sort content in sum_least_square_err , and node_sum_least_square_err...*/

    RDF_FREE(sum_least_square_err);
    RDF_FREE(node_sum_least_square_err);
} 
```

* * *

我得到两种类型的运行时错误，要么是 malloc 失败，要么是 free() 时指针无效......

错误1：

```
`malloc.c:3096: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.` 
```

错误2：

```
*** glibc detected *** ./pt: free(): invalid pointer: 0x0b302ba8 *** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:51:06.630

我怀疑您没有传递所需的实际大小并溢出双数组。当您粘贴 qsort 代码时会很清楚，但很可能在您的比较函数中，您将比较两个双精度数，而双精度数需要 8 个字节，其中 malloc 分配作为参数传递的*字节数。*

```
RDF_MALLOC((void**)&sum_least_square_err, PTCORE_MAX_SESSION_NODE*PTCORE_MAX_SESSION_NODE * sizeof(double));
RDF_MALLOC((void**)&node_sum_least_square_err, PTCORE_MAX_SESSION_NODE*sizeof(double)); 
```

# sql - if else 在 Oracle 的 where 子句中

> ID：12615531
> 
> 赞同：0
> 
> 时间：2012-09-27T06:39:59.597
> 
> 标签：sql, oracle, oracle9i

我需要一个查询，但我有一个取决于情况的标准。举个例子 ：

让我们有一个名为 table1 的表，其中包含名为 column1 的列，而 table2 具有名为 column2 的列

在 where 子句的查询中，我需要通过 column1 和 column2 列将此 table1 与 table2 连接起来。但是，我需要这样做

```
if 
     column1 = 'x' then my criteria must be column1 = column2
else
     column1 != 'x' 
```

我如何在 Oracle 中编写这个 where 子句？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:40:52.517

只需使用`OR`这样的条件：

```
WHERE (Column1 <> 'x' OR column1 = column2) 
```

（这是正常的SQL语法，不知道Oracle的语法有没有变化，但是你可以试试这个逻辑）

**编辑：（** [来自OP在我的回答中的评论）](https://stackoverflow.com/questions/12615531/if-else-in-where-clause-on-oracle/12615546#comment17008516_12615546)

你可以这样做：

```
WHERE (column2 != (Select col from table3) OR column1 = 'x') 
```

或者

```
WHERE (column2 != (Select col from table3) OR column1 = (Select col from table3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:49:56.677

尝试这个

```
WHERE (Column1 != 'x' OR (Column1 = 'x' AND column1 = column2)) 
```

# math - 矢量角偏移

> ID：12615532
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:40:01.143
> 
> 标签：math

假设我有 2 个点 - A 和 B。它们之间和 0,0 形成一个角度，我想移动点 A，以便点 B 移动也保持它们之间的角度。

现在我将矢量偏移量转换为弧度，添加我需要的角度并转换回法线矢量，然后我用它来将 B 放置在正确的位置。不过我想知道，是否可以通过避免跳转到角度和返回来优化这个过程？由于正弦函数在 CPU 上的计算成本很高，这可以提供很大的加速。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:27:01.307

将两个向量归一化为`vec(a)`, `vec(b)`。假设向量之间的夹角为，`ang(p)`保持一个变换矩阵`A=[cosp,-sinp;sinp, cosp]`为标准化以获得真正的价值。如果存在许多点，则必须保留所有这些角度的矩阵。`vec(a1)``A``vec(b1)`

# installation - 安装 inf 文件但“发现新硬件”向导仍需要驱动程序

> ID：12615539
> 
> 赞同：1
> 
> 时间：2012-09-27T06:40:38.020
> 
> 标签：installation, clickonce, driver, inf

我想知道是否有人可以指出正确的方向，因为这个 inf 问题一直困扰着我一段时间。

我正在使用 ClickOnce 安装程序来安装必备组件。

我编写了一个 boostrapper 包，它可以无条件地将包（.inf、.cat、dpinst.exe、.bat）成功下载到 PC。

批处理文件运行命令“dpinst /LM”，“设备驱动安装向导”自动弹出，“正在完成设备驱动安装向导”提示成功。

接下来，我将一根特殊的 USB 电缆插入 PC，然后弹出“找到新硬件”向导。现在问题来了：

它询问司机的位置。对于从未连接过这种特殊 USB 电缆的 PC，它需要我明确指定 .inf 和 .cat 文件的位置；否则，它找不到它们并且会失败。（对于之前用过专用usb线的电脑，它会自动发现没问题。）

我想知道我缺少什么导致“找到新硬件”向导无法自动找到 .inf 和 .cat 文件。看起来上一步“设备驱动程序安装”向导没有成功安装 .inf/.cat 文件。当我查看“c:Windows\Inf”文件夹时，我看不到相关的 oem 或 inf 文件。

PS。我正在 32 位 Windows XP PC 上对其进行测试。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T18:32:08.727

我创建的自定义 FTDI 驱动程序也有同样的问题。但是，对这个确切主题的支持很少。

我在测试中确实发现，如果没有与之关联的硬件，则在 XP DPisnt 中实际上不会安装驱动程序。使用 /c 运行它，您可以自己看到它失败了，因为没有设备与您的 INF 中的 ID 匹配。但是，如果您先将 USB 设备/电缆插入 PC，然后忽略/关闭“找到新硬件”对话框，现在安装驱动程序，它将正确安装。至少这对我来说是这样的。

不过，除了明确告知人们在安装到 XP 机器上之前插入设备之外，我还没有想出解决这个问题的方法。

希望它在某种程度上有所帮助..

# html - HTML 解析器如何确定一个 是“模态对话框”吗？

> ID：12615541
> 
> 赞同：0
> 
> 时间：2012-09-27T06:40:44.557
> 
> 标签：html, modal-dialog

我知道模态对话框是一个警报或子窗口，根据[Wikipedia](http://en.wikipedia.org/wiki/Modal_window)的说法，“要求用户在返回操作父应用程序之前与其交互”。

我在 HTML 页面中发现的所有模式对话框实例都是简单`<div>`的元素，例如[JQuery 对话框](http://jqueryui.com/demos/dialog/)。其中一些确实通过覆盖阻止了用户与主页的交互，但有些甚至不是“模态的”，因为用户可以在对话框存在时轻松地与主页交互。

我问这个是因为我的一个 Selenium 测试收到了 UnhandledAlertException: "Modal dialog present"。我想知道：Selenium 是如何知道存在模态对话框的？看到 HTML 页面上的许多`<div>`元素，是什么特殊属性使其中一个成为“对话框”而其他所有元素都不是？导致对话框变为“模态”的第二个属性是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:08:46.073

在大多数情况下，伪模态对话框是两个 div，一个覆盖整个窗口，透明或着色，而另一个 div 位于其顶部，表示实际对话框（或单个 div 两者兼而有之的组合）。

要检测这一点，您需要遍历 dom 以找到最大尺寸（接近窗口大小）的 div，位于位置 0,0 并且位置属性设置为绝对或固定，以及它的 z-index。

但是，不能保证这适用于每种情况（并且存在各种实现），这意味着检测例程只能进行良好的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:55:31.693

模态对话框是一个单独的窗口，它会在您关闭对话框之前保持打开窗口处于禁用状态。您可以使用该[`window.showModalDialog`方法](http://msdn.microsoft.com/en-us/library/ie/ms536759%28v=vs.85%29.aspx)打开一个模态对话框。

从这个意义上说，作为页面元素的对话框不是模态的。即使它使用覆盖覆盖页面中的所有内容以使您无法与之交互，该页面也不会被禁用。它仅具有与模态对话框相同的实际效果。

作为页面元素的对话框甚至不是真正的对话框，它只是在大多数实际意义上像对话框一样工作。

像这样的“假”对话框通常更可取，因为真正的模态对话框需要自己的 HTML 文档。作为页面中的一个元素的对话框更容易设置，并且更容易与页面交互。

# asp.net - 默认项目模板中缺少程序集

> ID：12615542
> 
> 赞同：10
> 
> 时间：2012-09-27T06:40:45.400
> 
> 标签：asp.net, visual-studio-2012

我已经使用完整安装选项安装了 VS 2012 Premium。当我创建一个新的 asp.net 项目时，无论是表单还是任何一个 mvc 版本，然后尝试构建项目以在不进行任何修改的情况下运行它，我收到以下错误“缺少程序集或引用”：

*   Antlr3.Runtime
*   DontNetOpenAuth.AspNet
*   DontNetOpenAuth.Core
*   DontNetOpenAuth.OAuth
*   DontNetOpenAuth.OAuth.Consumer
*   DontNetOpenAuth.OpenID
*   DontNetOpenAuth.OpenID.RelyingParty-
*   牛顿软件.Json
*   System.Web.Optimization
*   网络润滑脂

我没有添加这些，它们是模板的一部分。我已经返回安装进行检查，并且所有内容都已安装，因此我没有遗漏任何组件。

有人知道我在安装 VS2012 时错过了什么吗？如果我没有遗漏任何东西，我无法相信微软会在他们的模板中包含对程序集的引用，然后期望您在构建他们的任何项目模板之前下载它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:41:53.197

我认为这是您的 Nuget 安装或本地缓存的问题。

所有 VS2012 模板都包含对第三方库的引用（例如*DontNetOpenAuth*或*Newtonsoft*）。这是来自 MVC4 项目模板的示例：

```
...
<WizardData>
    <packages repository="registry" keyName="AspNetMvc4VS11" isPreunzipped="true">
        ...
        <package id="DotNetOpenAuth.AspNet" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="DotNetOpenAuth.Core" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="DotNetOpenAuth.OAuth.Consumer" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="DotNetOpenAuth.OAuth.Core" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="DotNetOpenAuth.OpenId.Core" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="DotNetOpenAuth.OpenId.RelyingParty" version="4.0.3.12153" skipAssemblyReferences="true" />
        <package id="WebGrease" version="1.1.0" skipAssemblyReferences="true" />
        ...     
    </packages> 
```

我知道 NuGet 包 ( `C:\Users\youraccount\AppData\Local\NuGet\Cache`) 有一个本地缓存。VS 包含类似 Entity Framework ( `C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\NuGet Packages`)的缓存

由于不清楚的原因，似乎在您创建新项目时，VS 找不到这些外部引用。

所以，基本上尝试获取最新版本的 Nuget，并尝试至少一次获取所有这些包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T06:52:40.520

所以事实证明问题是TFS：

我正在将新的 Web 项目添加到 TFS 中的解决方案中，但当时由于无法访问 Internet，我的 TFS 服务器不可用。由于 VS 无法联系 TFS，它正在从本地商店回滚安装这些软件包。因此我的问题。我今天早上通过互联网添加了它们，它运行良好。

故事的寓意是，在将这些项目模板添加到源代码控制解决方案之前，请确保您可以访问 TFS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T22:08:00.573

使用 NuGet 安装这些包

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T15:19:52.667

当我移动一个项目时，我遇到了这个问题，缺少这些引用，因为它是在解决方案的父目录中创建的。

我无法通过操纵 NuGet 配置来解决这个问题。它们看起来安装正常。

然后我重命名了我的原始项目并使用原始名称创建了一个新项目。这构建正确。然后我查看了 .csproj 文件，发现提示路径已更改。这些是相对路径，这就解释了为什么它们变得无效。

所以

```
<Reference Include="Newtonsoft.Json">
   <HintPath>..\<some parent directory>\packages\Newtonsoft.Json.4.5.6\lib\net40\Newtonsoft.Json.dll</HintPath> 
```

已更正为：

```
<Reference Include="Newtonsoft.Json">
  <HintPath>..\packages\Newtonsoft.Json.4.5.6\lib\net40\Newtonsoft.Json.dll</HintPath> 
```

我想您也可以手动执行此操作。

# c# - jquery datePicker 触发 textchange 事件

> ID：12615544
> 
> 赞同：0
> 
> 时间：2012-09-27T06:40:46.087
> 
> 标签：c#, jquery, asp.net, jquery-ui-datepicker, servercontrols

我使用 jquery datepicker 创建服务器控件，我在我的渲染方法中进行了初始化。在文本框中我设置自动回发并添加自定义事件以触发 textchanged 这是服务器端：

```
protected override void CreateChildControls()
    {
        base.CreateChildControls();

        _txtCalender = new TextBox();
        _txtCalender.ID = "_txtCalender" + this.ID;
        _txtCalender.ReadOnly = true;
        _txtCalender.AutoPostBack = true;
        _txtCalender.TextChanged += new EventHandler(_txtCalender_TextChanged); 
        Controls.Add(_txtCalender);              
 }

//Raised when the select Change
    public event EventHandler SelectionDateChanged
    {
        add
        {
            Events.AddHandler(eventSelectedChange, value);
        }
        remove
        {
            Events.RemoveHandler(eventSelectedChange, value);
        }
    }

    private void _OnSelectedChange(object source, EventArgs e)
    {
        OnSelectedChange(EventArgs.Empty);
    }

    //The method that raises the select Change event.
    protected void OnSelectedChange(EventArgs e)
    {
        EventHandler selectedChangeHandler = (EventHandler)Events[eventSelectedChange];

        if (selectedChangeHandler != null)
            selectedChangeHandler(this, e);
    } 
```

在我的客户端我设置 datepicker 选择属性是这样的：

```
onSelect: function (dateText, inst) {
        try {
            window.console && console.log($(hiddenFld).val()); 

            inst.input.val($(hiddenFld).val()); 
            inst.input.trigger('change');

        }
        catch (err) {
            alert(err);
        }
    } 
```

当我选择日期它创建回发但它没有进入 OnTextChanged 我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:19:31.963

这解决了。我希望它可以帮助某人，

当我把这条线拿出来时：

```
_txtCalender.ReadOnly = true; 
```

它有效，我不必添加触发器 onSelect。我只是从我的 javascript 中删除这些行：

```
onSelect: function (dateText, inst) {  
    try {  
        window.console && console.log($(hiddenFld).val());   

        inst.input.val($(hiddenFld).val());   
        inst.input.trigger('change');  

    }  
    catch (err) {  
        alert(err);  
    }  
} 
```

# c# - 在不同通道上播放多个音频文件

> ID：12615547
> 
> 赞同：2
> 
> 时间：2012-09-27T06:40:56.603
> 
> 标签：c#, .net, audio

我正在研究这个可能的未来项目。客户想要制作一个小型解决方案，他们需要在不同通道上播放多个（不同）音频文件。设置是一台带有声卡的计算机，它有 6 个不同的输出通道，我需要开发一个小应用程序，他们可以在其中确定需要在哪个通道上播放哪个音频文件（例如 mp3）。

我的研究似乎指向外部 3rd 方库。我想自己管理这一切。

*   关于如何列出声卡（设备）上所有可用输出通道的任何想法？
*   如何在特定输出通道上播放音频文件？

任何关于如何实现这一点的想法都非常受欢迎 - 替代解决方案也是如此

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:50:11.600

有这个用于音频解码和播放的开源库：

[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

管理多个通道，windows一般会将它们视为不同的输出设备，所以可以使用标准的api进行这种类型的播放。

如果可能的话，我建议使用 ASIO 驱动程序，它可以让您更好地控制通道。

# c++ - 如何获取任何类型的默认值

> ID：12615549
> 
> 赞同：16
> 
> 时间：2012-09-27T06:41:00.220
> 
> 标签：c++, templates

在 C# 中，我可以编写如下内容：

```
 class AnyThing<T>
    {
        static public T Default = default(T);
    }

    static void Main ()
    {
        int i = AnyThing<int>.Default;
        Console.WriteLine (i==0);
        string s = AnyThing<string>.Default;
        Console.WriteLine (s == null);

    } 
```

我打算在 C++ 中编写一个类似于模板类的字典，如果找不到给定的键，我希望 dict 返回通用 TVal 类型的默认值（零输出）。在 C# 中，default(T) 构造来拯救，而在 C++ 中，我不确定做同样事情的合适方法是什么。

我已经尝试过`T obj = {}`使用`T* obj = {}`gcc4.7，它运行良好。我只是不太确定它是否是语言规范定义的语法，这种代码是否是可移植的交叉编译器和平台。请帮我解决我的疑问！提前致谢！

PS：

~~~~~~~~~~

为了确保模板获得任何类型的默认（零输出）值，即使是那些没有可调用默认 ctor 的模板，我采用了以下机制（受 avakar 的回答启发）：

```
template<class T>
struct AnyThing
{
    static const T& Default ;
private:
    static const char temp[sizeof(T)];
};

template<class T> const char AnyThing<T>::temp[] = {};
template<class T> const T& AnyThing<T>::Default =  *(T*)temp;

struct st
{
    double data;
    st()=delete;
};

int main()
{
    cout << (int)AnyThing<char*>::Default<<endl;    //0
    cout << AnyThing<int>::Default<<endl;       //0
    cout <<AnyThing<st>::Default.data<<endl;        //0
} 
```

它看起来很难看，但应该不会造成任何麻烦，毕竟归零的对象只是一块空白内存。我错了吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-27T06:43:41.430

在 C++ 中，C# 中没有类似`default`关键字的东西。由于类类型值的默认构造函数初始化将失败，如果默认构造函数是`private`. 在 C# 中，如果默认构造函数是私有的，则 class-type 的值将被初始化为`null`，因为 class-type 是`reference-type`。

初始化方式`{}`由语言规范定义。它是 C++11。在 C++03 中你应该使用

```
T obj = T(); 
```

正如*bames53*在评论中指出的那样，当你想要初始化时，`T*`你应该使用

在 C++11 之前。

```
T* obj = 0; 
```

或者

```
T* obj = NULL; 
```

在 C++11 中。

```
T* obj = {}; 
```

或者

```
T* obj = nullptr; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T07:03:19.190

取自“Bjarne Stroustrup 的第三版 C++ 编程语言”：

开始报价

4.9.5 初始化[dcl.init]

如果为对象指定了初始化程序，则该初始化程序确定对象的初始值。如果未指定初始化程序，则将全局（第 4.9.4 节）、命名空间（第 8.2 节）或本地静态对象（第 7.1.2 节、第 10.2.4 节）（统称为静态对象）初始化为适当类型的 0 . 例如：

```
int a;  // means int a=0;
double d; // meands d=0; 
```

默认情况下，局部变量（有时称为自动对象）和在空闲存储上创建的对象（有时称为动态对象或堆对象）不会初始化。例如：

```
void f()
{
   int x;   // x does not have a well-defined value
   // . . . 
} 
```

数组和结构的成员是否默认初始化取决于数组或结构是否是静态的。用户定义的类型可能定义了默认初始化（第 10.4.2 节）。

更复杂的对象需要多个值作为初始值设定项。这是由 { 和 } 分隔的初始化列表处理的，用于数组（第 5.2.1 节）和结构（第 5.7 节）的 C 样式初始化。

对于具有构造函数的用户定义类型，使用函数式参数列表（第 2.5.2 节、第 10.2.3 节）。请注意，声明中的一对空括号 () 始终表示“函数”（第 7.1 节）。例如：

```
int a[] = {1,2};    // array initializer
Point z(1,2);       // function-style initializer (initialization by constructor)
int f();            // function declaration 
```

结束报价

因此，您可以从该类型的静态对象中获取任何类型的默认值：

```
static T defaultT; // `defaultT' has de default value of type T 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-17T10:26:18.113

创建您自己的默认关键字：

```
class default_t
{
public:
  template<typename T>
  operator T() const { return T(); }
};

default_t const default = default_t(); 
```

像这样使用它：

```
int myInt = default;
vector<string> myVector = default;
shared_ptr<string> myPtr = default; 
```

或者有轻微的语义变化：

```
default_t const empty = default_t();

vector<Persons> fetchPersons()
{
  if (Database::isConnected())
  {
    return Database::fetchPersons();
  }

  return empty;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T07:13:09.597

`T`如果没有复制构造函数，ForEveR 的答案将不起作用。在 C++03 中，没有办法对既通用又优雅的变量进行零初始化。剩下的就是以下技巧。

```
T temp[1] = {};
T & obj = temp[0]; 
```

在这里，`temp[0]`是零初始化的，然后绑定到`obj`。不需要复制构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-29T16:21:26.467

以下是我从 C++20 开始的做法：

```
constexpr auto default_value(const auto& value) {
  return std::decay_t<decltype(value)>{};
}

int main() {
  static_assert(default_value(std::string_view{"foo"}) == std::string_view{});
  static_assert(default_value(123) == 0);
  static_assert(default_value(&main) == nullptr);
} 
```

如果您已经拥有`T`它应该是的类型，`std::decay_t<T>{}`或者`T{}`您确定它不是引用/数组/ ...（因为它们没有默认值）。

# html - servlet 未重定向到具有动态地址的 html 页面

> ID：12615551
> 
> 赞同：0
> 
> 时间：2012-09-27T06:41:05.977
> 
> 标签：html, servlets

我写了一个动态的webproject来将xml页面转换为html页面，这样它就可以部署在tomcat服务器上，所以它成功地将xml页面转换为html页面，但这取决于tomcat在计算机上的部署位置它在同一个文件夹中创建 html 文件（output.html），所以我需要在 html 页面中提供一个按钮来重定向到我的项目创建的 html 页面，所以我使用以下代码重定向到 output.html 页面。 （在 html 页面中，我创建了一个表单元素和一个按钮，单击该按钮时，servlet 应重定向到 output.html 页面）

```
 String outputhtml=getServletConfig().getServletContext().getRealPath("output.html");
 ServletContext sc1 = this.getServletContext();
 RequestDispatcher rd = sc1.getRequestDispatcher(outputhtml);
 rd.include(request, response); 
```

它没有用所以我用

```
 response.setContentType("text/html");
 String site = new String(outputhtml);
 response.setStatus(HttpServletResponse.SC_MOVED_TEMPORARILY);
 response.setHeader("Location", site); 
```

即使这对我不起作用，请给出解决此问题的解决方案。

# javascript - 将 JavaScript 集成到 JSF 复合组件中，干净的方式

> ID：12615556
> 
> 赞同：9
> 
> 时间：2012-09-27T06:41:35.737
> 
> 标签：javascript, jsf, integration, composite-component

在 JSF 中，将 JavaScript 集成到复合组件中的“正确”和“干净”方式是什么？我是[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的粉丝，并将 HTML 与 JS 与 CSS 分开。什么是尽可能少的怪癖的好方法？这是迄今为止我最喜欢的：

```
<composite:interface>
  // ...
</composite:interface>

<composite:implementation>
  // ...
  <script> initSomething('#{cc.clientId}'); </script>
</composite:implementation> 
```

我不喜欢的是，用来`language A`生成`language B`. 事件处理程序和其他东西基本上也是如此。我最喜欢的是通过`<insert favorite DOM JavaScript library here>`. 这可能吗？您如何进行这种集成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T17:53:25.817

我想说的是，只要您绝对肯定 HTML 元素的性质是如此独特，以至于您每次都绝对需要通过 ID 选择它，那么您所拥有的就是您能得到的最好的。

如果 HTML 表示不是*唯一*的（我可以想象 Facelets 模板或包含文件可能包含应用程序范围内的唯一 HTML 元素，如页眉、菜单、页脚等，但是可以在单个视图中多次重用的复合组件?我无法想象），那么您也可以考虑使用唯一的类名并对其进行挂钩初始化。

例如`/resources/composites/yourComposite.xhtml`

```
<cc:implementation>
    <h:outputScript library="composites" name="yourComposite.js" target="head" />
    <div id="#{cc.clientId}" class="your-composite">
        ...
    </div>
</cc:implementation> 
```

with in `/resources/composites/yourComposite.js`（假设您使用的是 jQuery）

```
var $yourComposites = $(".your-composite");
// ... 
```

如有必要，您可以在 a 中为每个元素提取自动生成的 HTML 元素 ID [`jQuery.each()`](http://api.jquery.com/each/)：

```
$yourComposites.each(function(index, yourComposite) {
    var id = yourComposite.id;
    // ...
}); 
```

# java - Java NoClassDefFound 错误

> ID：12615566
> 
> 赞同：11
> 
> 时间：2012-09-27T06:42:01.250
> 
> 标签：java, hibernate, jboss, jar, noclassdeffounderror

我正在尝试运行一个基本的 Hibernate 程序。当我运行它时，我收到以下错误

> java.lang.NoClassDefFoundError: org/jboss/logging/BasicLogger

我尝试了 google'ing 并在我的类路径中包含以下 jar 文件：-

*   jboss-common-3.2.3.jar
*   jboss-common-client-3.2.3.jar

我是否缺少更多的 jar 文件？

谢谢

* * *

**编辑 ：**

我确实在类路径中包含了以下 jar 文件：-

*   jboss-logging-3.1.0.CR1.jar

但是，面对错误：

```
java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Lj‌​ava/lang/Object 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T06:44:26.303

是`jboss-logging.jar` `org/jboss/logging/BasicLogger`的在里面`jboss-logging.jar`

您可以在[此链接](http://mvnrepository.com/artifact/org.jboss.logging/jboss-logging/3.3.1.Final)的部分中找到此 jar 的依赖 jar 列表。

这个版本应该包含[方法](https://repository.jboss.org/nexus/content/groups/public/org/jboss/logging/jboss-logging/3.1.1.GA/jboss-logging-3.1.1.GA.jar)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T06:47:47.050

你需要 jboss-logging.jar

你可以从[这里得到它](http://www.java2s.com/Code/Jar/j/Downloadjbossloggingjar.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:58:50.110

如果这些文件已经存在，请尝试将它们添加到您的`Java Build Path`. 您可以将其用作参考：[Java Build Path](https://stackoverflow.com/questions/2729587/java-build-path-add-external-jars-and-add-variable)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:59:00.827

解决

```
 java.lang.NoSuchMethodError: org.jboss.logging.Logger.getMessageLogger(Ljava/lang/Class;Ljava/lang/String;)Lj‌​ava/lang/Object 
```

使用 JAR 文件 (jboss-client-7.1.0.Final.jar) 这将帮助您解决您的错误

# php - 获取 Google 字体列表

> ID：12615567
> 
> 赞同：2
> 
> 时间：2012-09-27T06:42:03.140
> 
> 标签：php

我想在选择框中获取谷歌网络字体列表以选择字体。我正在尝试以下功能，但它给出了错误。

**代码：**

```
function get_google_fonts() {
    $url = "https://www.googleapis.com/webfonts/v1/webfonts?sort=alpha";
    $result = json_response( $url );
        $font_list = array();
        foreach ( $result->items as $font ) {
            $font_list[] .= $font->family;          
        }
        return $font_list;  
}

function json_response( $url )  {
    $raw = file_get_contents( $url, 0, null, null );
    $decoded = json_decode( $raw );
    return $decoded;
} 
```

**错误：**

```
Warning: file_get_contents(): Unable to find the wrapper "https" - did you forget to enable it when you configured PHP. 
```

如果我将 https 更改为 http，我会收到此错误：

```
file_get_contents(http://www.googleapis.com/webfonts/v1/webfonts?sort=alpha): failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden in 
```

我想这是因为我的服务器上的 PHP 设置，我无法更改。那么，有没有其他方法可以从 Google 获取字体列表？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T06:45:59.393

要允许 https 包装器，您必须具有`php_openssl`扩展名并启用`allow_url_include`

您可以编辑您`php.in`i 以设置这些值：

```
extension=php_openssl.dll

allow_url_include = On 
```

如果这些值不存在，请添加这些行。

如果您无法编辑 php.ini 文件，则可以在 PHP 文件中进行设置：

```
ini_set('allow_url_fopen', 'on');
ini_set('allow_url_include', 'on'); 
```

您也可以尝试使用`CURL`而不是`file_get_contents`. `CURL`比`file_get_contents`

```
$url = "https://www.googleapis.com/webfonts/v1/webfonts?sort=alpha";
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($ch);
curl_close($ch);

echo $result; 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:54:24.213

我认为 Webfonts 拒绝访问非浏览器代理。但是，您可以使用[Webfont API](https://developers.google.com/webfonts/docs/developer_api)。事实上，你需要一个 API 密钥，所以一旦你得到它，你就会使用像这样的 URL

```
https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY 
```

这一切都记录[在提供的链接](https://developers.google.com/webfonts/docs/developer_api)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:16:56.977

Google 需要 SSL，因此请确保在您的服务器上启用了 SSL。

要修复此错误，请转到您的 php.ini 文件，找到 ;sslextension=php_openssl.dll 行并删除分号。

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php) https://developers.google.com/webfonts/docs/developer_api

```
 var_dump(json_decode(file_get_contents('https://www.googleapis.com/webfonts/v1/webfonts'))); 
```

# c# - 数据网格项目源为空

> ID：12615568
> 
> 赞同：0
> 
> 时间：2012-09-27T06:42:08.753
> 
> 标签：c#, wpf, xaml

当我从数据网格中选择 itemsource 时，该值为 null。是不是因为我没有在datagrid中定义imtemsource？

这就是我将一行添加到数据网格中的方式：

```
this.dgProductList.Items.Add(new {ProductId=product.ProductId, Name=product.Name, Qty=1, Price=product.Price}); 
```

这是我的wpf：

```
<DataGrid Name="dgProductList" 
                                  AutoGenerateColumns="False" 
                                  FontSize="15"
                                  HorizontalGridLinesBrush="#f0f0f0"
                                  VerticalGridLinesBrush="#f0f0f0"
                                  ScrollViewer.CanContentScroll="False"      
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto">
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="Image">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Height="10" Width="10" Source="{Binding Picture}" Stretch="Uniform"></Image>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Binding="{Binding ProductId}" Visibility="Hidden"/>
                                <DataGridTextColumn Binding="{Binding Name}" Header="Item" />
                                <DataGridTextColumn Binding="{Binding Qty}" Header="Qty" />
                                <DataGridTextColumn Binding="{Binding Price}" Header="Price" />
                                <DataGridTemplateColumn Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Button Width="30" Name="btnDecrease" Content="-" />
                                                <Button Width="30" Name="btnIncrease" Content="+" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:48:28.503

您应该使用绑定将项目添加到数据网格：

```
<DataGrid ItemsSource="{Binding DataGridItemsSource}" ... 
```

在您的视图模型中（或分配给您视图的 DataSource 的东西）：

```
public ObservableCollection<ProductData> DataGridItemsSource { get; set; } 
```

ObservableCollection 是在 wpf 绑定中使用的，因为它实现了允许数据网格对此集合中的更改做出反应的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:52:30.903

您必须使用网格的 ItemsSource 属性

像

```
dgProductList.ItemsSource = YourData; 
```

或者

```
dgProductList.SetBinding(ItemsControl.ItemsSourceProperty, new Binding { 

Source = YourData 
}); 
```

# cron - Cron 作业未在 cPanel 中触发，但手动运行

> ID：12615572
> 
> 赞同：1
> 
> 时间：2012-09-27T06:42:34.800
> 
> 标签：cron, crontab

我的情况似乎已被问过好几次，但没有一个回答我的问题，因为他们都提到了所有权问题或完全不同的东西。

我有一个从 cPanel cron 管理器中安排的 cron 任务。它目前看起来像这样：

```
5,20,35,50 0-8,17-23 * * * php /path/to/script/product_warehouse_update.php5 
```

这计划每 15 分钟运行一次，从 17:05 开始，最后一次在第二天早上 08:50 运行。

当我手动运行 PHP 脚本时，它可以 100% 运行，但 cron 不会调用它。当我像所有其他正在工作的 cron 作业一样在 cPanel 中设置 cron 任务时，我怀疑这是一个访问/所有权问题。我使用与 cPanel 登录相同的凭据登录 PuTTy，通过 PuTTy，我可以手动运行脚本，但 cPanel 不会调用它。

我已设置 Cron 以在 cron 作业开始时向我发送邮件，但我从未收到来自此特定 cron 作业的任何电子邮件。WHM 服务器运行状况从不表示 cron 任务已被触发，并且没有从脚本生成日志条目（我已对其进行编码以记录到具有 r/w 访问权限的文本文件，该文件按其他脚本的预期工作）。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:30:20.237

发现了问题。cron 正在通过系统帐户触发，该帐户可以访问脚本。用于通过浏览器运行脚本的用户帐户不同，并且没有权限。

# ios - 如何手动将 iOS 模拟器安装到 Xcode 4.5？

> ID：12615573
> 
> 赞同：4
> 
> 时间：2012-09-27T06:42:34.590
> 
> 标签：ios, xcode

我全新安装了 Xcode 4.5。它不附带 iOS 5.0 模拟器。我已经下载了`ios_50_simulator.dmg`文件的副本。

我在 OSX 中挂载了 .dmg 文件，并直接执行安装。但是，iOS 5.0 模拟器没有安装在我的 Xcode 4.5 应用程序中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:46:02.560

在 Xcode 中打开“首选项”窗口，导航到下载 - 组件。您可以在那里安装 iOS 5.0 模拟器。

# java - 获取 MySQL 安装路径

> ID：12615574
> 
> 赞同：9
> 
> 时间：2012-09-27T06:42:37.427
> 
> 标签：java, mysql, installation-path

我需要获取 MySQL 的安装路径，以便通过 java 代码执行导出和导入数据库。目前正在使用eclipse。我需要在字符串变量“mySqlPath”中获取安装路径。

```
File fMysqlPath = new File("C:\\Program Files\\MySQL\\MySQL Server 5.1\\bin\\");
String executeCmd = "mysqldump -u " + Constants.DB_USER + " -p" + 
                    Constants.DB_PASSWORD + " " + Constants.DB_NAME + " -r " + 
                    FilePath + "\\" + FileName;
Process runtimeProcess = Runtime.getRuntime().exec(executeCmd, null, fMysqlPath); 
```

这就是我所做的。这有一个依赖问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T06:47:01.357

你有没有试过这个：

```
import java.sql.*;
import javax.sql.*;

public class MysqlPathFinderDemo{

public static void main(String args[]){
String dbtime;
String dbUrl = "jdbc:mysql://your.database.domain/yourDBname";
String dbClass = "com.mysql.jdbc.Driver";
String query = "Select * FROM users";

try {

      Class.forName("com.mysql.jdbc.Driver");
      Connection con = DriverManager.getConnection (dbUrl);
      Statement stmt = con.createStatement();
      res = Myconnection.st.executeQuery("select @@datadir");
      String Mysqlpath = "";

      while(res.next()){
          Mysqlpath=res.getString(1) ;
      }

      Mysqlpath = Mysqlpath.replace("Data", "bin"); 
      System.err.println("Mysql path is :"+a);
   } catch(Exception ee) {
   }
 }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-18T09:38:44.157

你可以直接查询mysql并要求自己给你路径：

```
SHOW VARIABLES LIKE 'basedir'; 
```

或者更容易，

```
SELECT @@basedir; 
```

应该给你安装路径。两者都应该产生类似的结果：

> C:\Program Files\MySQL\MySQL 服务器 5.1\

`datadir`相当于获取数据目录的路径（数据所在的位置）。

# javascript - 执行 window[func].apply(this, args)

> ID：12615575
> 
> 赞同：2
> 
> 时间：2012-09-27T06:42:39.487
> 
> 标签：javascript, dynamic

我正在尝试执行存储在变量中的函数并将参数传递给它。但是，`.apply`在线上，我遇到了错误；`Uncaught TypeError: Cannot call method 'apply' of undefined`

小提琴：http: [//jsfiddle.net/valamas/vzesm/](http://jsfiddle.net/valamas/vzesm/)

```
function target(msg)
{
    alert(msg);
}

function mainfunc (func)
{
    var args = new Array();
    for (var i = 1; i < arguments.length; i++)
        args.push(arguments[i]);

    console.log('args: ' + args);

    //-- different attempts
    window[func].apply(this, args);
    //window[func].apply(null, Array.prototype.slice.call(arguments, 1));
    //this[func].apply(this, Array.prototype.slice.call(arguments, 1));
}

$(function ()
{
    console.log('\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n');
    console.log('ready');
    mainfunc('target', 'hello,', 'there!');
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:45:29.223

jsFiddle 没有把 JS 放到全局范围内，所以`target`它实际上不是`window`.

添加此代码将使您的脚本工作：

```
window.target = target; 
```

或者更明确地说：

```
window.target = function() { ... 
```

**演示：http: [//jsfiddle.net/Blender/vzesm/3/](http://jsfiddle.net/Blender/vzesm/3/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:49:25.503

这是因为在 jsfiddle 中，javascript 在不同的范围内执行。如果加载了 jQuery **，您的代码将在 firebug 控制台中运行。**对于 jsfiddle 你必须重写如下

```
target = function(msg)
{
    alert(msg);
}

function mainfunc (func)
{
    var args = new Array();
    for (var i = 1; i < arguments.length; i++)
        args.push(arguments[i]);

    console.log('args: ' + args);

    //-- different attempts
    window[func].apply(this, args);
    //window[func].apply(null, Array.prototype.slice.call(arguments, 1));
    //this[func].apply(this, Array.prototype.slice.call(arguments, 1));
}

$(function ()
{
    console.log('\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n');
    console.log('ready');
    mainfunc('target', 'hello,', 'there!');
}); 
```

# c# - System.ServiceModel.FaultException 我有一个有两个 catch 块的代码函数。我在下面发布代码： public void UpdateGroup(String strSiteID, String strGroup, int row) { 问问题 问问题 2012-09-27T06:42:57.020 1659 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个有两个 catch 块的代码函数。我在下面发布代码： public void UpdateGroup(String strSiteID, String strGroup, int row) { try { Console.WriteLine("UpdateGroup"); Excel1.MWMClient.MWMServiceProxy.Group group = new Excel1.MWMClient.MWMServiceProxy.Group(); group.name = "plumber"; group.description = "he is a plumber"; Console.WriteLine(groupClient.UpdateGroup(strSiteID, group)); ExcelRecorder(0, null, null, row); } catch (System.ServiceModel.FaultException <defaultfaultcontract>ex) { ExcelRecorder(ex.Detail.ErrorCode, ex.Detail.Message, ex.Message, row); } catch (Exception ex) { ExcelRecorder(0, "", ex.Message, row); } finally { System.GC.Collect(); } } 我认为第一个 catch 块足以捕获我的代码中可能发生的所有异常。但我注意到，有时，第一个 catch 块没有捕获一些一般异常。这就是为什么我添加了第二个 catch 块。为什么会这样？为什么我的第一个 catch 块不能涵盖所有异常？ 为什么会这样？为什么我的第一个 catch 块不能涵盖所有异常？ 因为默认情况下，当没有为特定服务操作定义的任何故障契约时，非泛型FaultException将在服务端抛出（并且它将在客户端被捕获）。 c#.netwinforms 4 2 回答 2 This answer is useful 1 为什么会这样？为什么我的第一个 catch 块不能涵盖所有异常？ 因为默认情况下，当没有为特定服务操作定义的任何故障契约时，非泛型FaultException将在服务端抛出（并且它将在客户端被捕获）。 于 2012-09-27T07:03:40.333 回答 This answer is useful 0 异常类System.ServiceModel.FaultException 只能处理合同规定的故障 您的代码中应该有类似于下面的语句 throw new FaultException<defaultfaultcontract>(<parmaters>); 这导致异常由第一个 catch 块处理。当您没有合同规定的操作错误时，它将由通用 Exception 类（第二个 catch 块）处理，所有异常类型都从该类派生。 请检查此页面上给出的代码示例。 http://msdn.microsoft.com/en-us/library/ms576199.aspx 于 2012-09-27T07:12:18.583 回答 Related 1 ruby-on-rails-3 - Rails 3：将 sort_by 转换为延迟加载 1 javascript - Chrome 浏览器：Facebook API 错误代码：调用请求对话框时出现 191 1 encryption - RSA Decrypt 为我们返回不同的 byte[] 结果 2 python - 谷歌日历 - Python - 同步 2 php - PHP Preg_replace 似乎对我不起作用 1 ruby-on-rails-3 - 我的文件扩展名在参数列表中的位置 1 scala - 蛋糕模式：如何获取组件提供的所有UserService类型的对象 1 web-services - 黑莓App启动Webservice Null 2 c++ - C++ 中的幂函数 1 java - Java servlet如何转储静态html页面 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</parmaters></defaultfaultcontract></defaultfaultcontract>

> ID：12615579
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, .net, winforms

我有一个有两个 catch 块的代码函数。我在下面发布代码：

```
public void UpdateGroup(String strSiteID, String strGroup,  int row)
        {
            try
            {
                Console.WriteLine("UpdateGroup");
                Excel1.MWMClient.MWMServiceProxy.Group group = new Excel1.MWMClient.MWMServiceProxy.Group();
                group.name = "plumber";
                group.description = "he is a plumber";              
                Console.WriteLine(groupClient.UpdateGroup(strSiteID, group));
                ExcelRecorder(0, null, null, row);
            }
            catch (System.ServiceModel.FaultException<DefaultFaultContract> ex)
            {
                ExcelRecorder(ex.Detail.ErrorCode, ex.Detail.Message, ex.Message, row);
            }
            catch (Exception ex)
            {
                ExcelRecorder(0, "", ex.Message, row);
            }
            finally
            {
                System.GC.Collect();
            }
        } 
```

我认为第一个 catch 块足以捕获我的代码中可能发生的所有异常。但我注意到，有时，第一个 catch 块没有捕获一些一般异常。这就是为什么我添加了第二个 catch 块。为什么会这样？为什么我的第一个 catch 块不能涵盖所有异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:03:40.333

> 为什么会这样？为什么我的第一个 catch 块不能涵盖所有异常？

因为默认情况下，当没有为特定服务操作定义的任何故障契约时，非泛型[`FaultException`](http://msdn.microsoft.com/en-us/library/system.servicemodel.faultexception.aspx)将在服务端抛出（并且它将在客户端被捕获）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:12:18.583

异常类`System.ServiceModel.FaultException` **只能处理合同规定的故障**

您的代码中应该有类似于下面的语句

```
throw new FaultException<DefaultFaultContract>(<parmaters>); 
```

这导致异常由第一个 catch 块处理。当您没有合同规定的操作错误时，它将由通用 Exception 类（第二个 catch 块）处理，所有异常类型都从该类派生。

请检查此页面上给出的代码示例。 [http://msdn.microsoft.com/en-us/library/ms576199.aspx](http://msdn.microsoft.com/en-us/library/ms576199.aspx)

# jquery - Google Maps InfoWindow Content - 点击时动态加载（使用 jquery-ui-maps）

> ID：12615586
> 
> 赞同：0
> 
> 时间：2012-09-27T06:43:14.933
> 
> 标签：jquery, google-maps, jquery-ui-map

我确实有一个项目，在谷歌地图上分布了大约 3000 个标记。我将 jquery-ui-maps 与 MarkerClusterer 和 Filtering 一起使用以获得更好的演示。

“标记数据”通过 JSON 文件加载。

如果我确实将所有“infoWindowContent”包含到 JSON 文件中，它会很大。我只想调用一个函数/加载一个带有标记 ID 的文件，并使用被调用文件的结果设置内容。

这是我现在正在做的一个简短示例：

```
$(function() 
{ 
    $('#map').gmap(
    {
        'disableDefaultUI':false, 
        'zoom': 5,
        'center':'<?=$mylat?>,<?=$mylon?>',
        'callback': function() 
        {
            var tags = [<...GETTING LIST OF AVAILABLE TAGS HERE ... >];
            $.each(tags, function(i, tag) 
            {
                $('#sidebar').append(('<label style="margin-right:5px;display:block;"><input type="checkbox" style="margin-right:3px" value="{0}"/>{1}</label>').format(tag, tag));
            });
            var self = this;
            $.getJSON( '< LOADING JSON FILE )?>', function(data) 
            { 
                $.each( data.markers, function(i, marker) 
                {
                    var tags = marker.tags.split(',');
                    self.addMarker(
                    {
                        'position': new google.maps.LatLng(marker.lat, marker.lon),
                        'icon':marker.icon,
                        'tags':tags
                    })
                    .click(function()
                    {
                        //self.openInfoWindow({ 'content':marker.c}, this); => if supplying Conent in JSON file ... works all right, but JSON file is to BIG

// THIS IS, WHERE I NEED SOME ADVICE ... 
                                         self.openInfoWindow({ 'content':marker.id }, this); 
// I want to load a dynamic content for this ID only, if the marker is clicked and the Info Window will be shown
                    });
                });
                self.set('MarkerClusterer', new MarkerClusterer(self.get('map'), self.get('markers'),
                {
                    'maxZoom':12
                }));
                self.addMarker({ 'icon':'/code/geo/images/gmap_pin_blue.png','position':'<?=$mylat?>,<?=$mylon?>','title':'You are here'}).click(function(){
                    self.openInfoWindow({'content':'Your current position' }, this);
                });
                $('#sidebar').show();
            });

            $('#sidebar input:checkbox').click(function(e) 
            {
                e.preventDefault;
                $('#map').gmap('closeInfoWindow');
                $('#map').gmap('set', 'bounds', null);
                var filters = [];
                $('#sidebar input:checkbox:checked').each(function(i, checkbox) 
                {
                    filters.push($(checkbox).val());
                });

                if ( filters.length > 0 ) 
                {
                    var markerList=[];
                    var i=1;
                    self.find('markers',{'property':'tags','value': filters,'operator':'AND'}, function(marker, isFound)  
                    {
                        if(isFound)
                        {
                            markerList.push(marker);
                            i=i+1;
                        }
                    });
                    var filterInfo = filters.join(' && ');
                    $('#result_selection').html("Current Filter: " + filterInfo + " => Results: " + (i-1));
                    console.log("Current Filter: " + filterInfo + " => Results: " + (i-1));
                    self.get('MarkerClusterer').clearMarkers();
                    self.get('MarkerClusterer').addMarkers(markerList);
                    self.get('MarkerClusterer').redraw_();
                } 
                else 
                {
                    self.get('MarkerClusterer').clearMarkers();
                    $('#result_selection').html('No Filter applied!');

                    $('#map').gmap('set','MarkerClusterer', new MarkerClusterer(self.get('map'), self.get('markers'),
                    {
                        'maxZoom':12
                    }));
                }
                self.addMarker({ 'icon':'/code/geo/images/gmap_pin_blue.png','position':'<?=$mylat?>,<?=$mylon?>','title':'You are here'}).click(function(){
                self.openInfoWindow({'content':'Your Position' }, this);
                });
            });
            return false;
        }
    });
}); 
```

我找到了这个解决方案，但是如何将它包含在上面的脚本中？ [Google Maps V3：通过 AJAX 加载信息窗口内容](https://stackoverflow.com/questions/3381700/google-maps-v3-loading-infowindow-content-via-ajax)

谢谢！

基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:13:29.333

好的..想通了...

基本上它很容易，一旦你知道瞄准哪里。

添加标记后，调整“监听器”（这里是 click() 函数）并通过 ajax 获取动态数据：

在上面的脚本中：

```
 self.addMarker(
                {
                    'position': new google.maps.LatLng(marker.la, marker.lo),
                    'icon':mico,
                    'tags':tags
                    //, 'bounds': true 
                })
                .click(function()
                {
                    var content = load_content(marker.f);
                    self.openInfoWindow({ 'content': content}, this);
                }); 
```

下面是通过 Ajax 获取数据并返回数据的函数：

```
function load_content(id){
    var html = $.ajax({
        url: "/getYourDataHere.php?id="+id,
        async: false}).responseText;
    return html;
} 
```

也许这会帮助正在寻找这种解决方案的人。

# maven - spring-test-mvc 的 jar

> ID：12615592
> 
> 赞同：2
> 
> 时间：2012-09-27T06:43:42.630
> 
> 标签：maven, spring-test-mvc

我正在尝试为 Spring-test mvc 获取一个 jar。

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-test-mvc</artifactId>
  <version>1.0.0.M1</version>
  <scope>test</scope>
</dependency> 
```

这种依赖无法解决。我在哪里可以得到罐子？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:54:11.467

正如他们的[Github 存储库](https://github.com/SpringSource/spring-test-mvc)中所述，您必须在`pom.xml`/中定义以下存储库`settings.xml`：

[http://repo.springsource.org/libs-milestone/](http://repo.springsource.org/libs-milestone/)

依赖关系在这里：

[http://repo.springsource.org/libs-milestone/org/springframework/spring-test-mvc/1.0.0.M1/](http://repo.springsource.org/libs-milestone/org/springframework/spring-test-mvc/1.0.0.M1/)

请注意，有一个**1.0.0.M2**版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T14:26:46.690

从 4.0.0.M1 开始，它包含在 spring-test 中（请参阅[https://jira.spring.io/browse/SEC-2015 ）请参阅](https://jira.spring.io/browse/SEC-2015)[https://github.com/rwinch/spring-security-](https://github.com/rwinch/spring-security-test-blog)的示例用法[测试博客](https://github.com/rwinch/spring-security-test-blog)（[https://jira.spring.io/browse/SEC-2592](https://jira.spring.io/browse/SEC-2592)）

# casting - 无法从 const std::string 强制转换为 void*

> ID：12615593
> 
> 赞同：2
> 
> 时间：2012-09-27T06:43:49.970
> 
> 标签：casting, void-pointers, stdstring

当我从这些类型转换为 void * 时，我有一个字符串和整数向量，例如 std::vector strvect std::vector intvect ，从字符串转换失败至它通过的整数。任何原因？

```
void *data; 
data = (void *)(strvect .front()); 
// gives me the error "Cannot cast from string to void * " 
data = (void *)(intvect.front()); 
```

有什么具体原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:05:36.653

非指针值不能转换为`void`指针。所以要么你必须使用地址运算符

```
data = reinterpret_cast<void*>(&strvect.front()); 
```

或者你得到实际的 C 字符串指针

```
data = reinterpret_cast<void*>(strvect.front().c_str()); 
```

# oracle - 在 TOAD 中执行 Oracle 程序

> ID：12615595
> 
> 赞同：1
> 
> 时间：2012-09-27T06:44:13.330
> 
> 标签：oracle, toad

我正在使用 TOAD 编写一个 Oracle 程序。我使用执行语句执行了该过程。但我无法得到结果。而不是只得到错误。请帮助如何在 TOAD 中运行该程序。我是蟾蜍和甲骨文的新手。

oracle中的程序

```
create or replace procedure pro_dndtesting( phone number)is 
begin
select  FLD_PHONENUMBERS from smsdnd_tbl where FLD_PHONENUMBERS=phone;
end ;
/ 
```

执行过程如下

```
exec procedure pro_dndtesting(9865015695)

error

ORA-06550: line 1, column 7:
PLS-00201: identifier 'PRO_DNDTESTING' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:02:35.710

只是为了澄清：没有“Oracle Toad”这样的东西。Oracle 是 RDBMS，而 TOAD 是 Oracle 数据库的客户端。

您的过程不会像您编写的那样编译，因为您没有为 SELECT 提供 INTO 子句（因为 PL/SQL - 与普通 SQL 不同 - 需要 SELECT 结果的“目标”）；试试这个：

```
create or replace procedure pro_dndtesting( phone number)is 
  l_value smsdnd_tbl.fld_phonenumbers%type;
begin
  select  FLD_PHONENUMBERS 
    into l_value 
    from smsdnd_tbl 
   where FLD_PHONENUMBERS=phone;
end ; 
```

至于你得到的错误：

您是否使用相同的模式 (=user) 来定义和调用过程？

您是否从匿名 PL/SQL 块中尝试过，例如

```
begin
  pro_dndtesting(9865015695);
end; 
```

# linux - FTP 干扰 NAT 服务器连接

> ID：12615597
> 
> 赞同：0
> 
> 时间：2012-09-27T06:44:23.207
> 
> 标签：linux, tcp, ftp, iptables

这是一个非常奇怪的问题。我有一个安装了 KVM（内核虚拟机）、proftpd 和 MySQL 并配置了 UFW的 Ubuntu 12.04 服务器**A。**一个安装了 OpenVPN 和 phpMyAdmin 的来宾 Ubuntu 12.04 **B**和另一个安装了 Tomcat7 的来宾 Ubunutu 12.04 **C。**我正在使用我的笔记本电脑**D** ，它通过 OpenVPN连接到**B ，而****D**通过**B**连接到**A**（iptables 伪装）。这就是问题所在：

 **我编写了一个 Java 程序，使用 commons-net-3.1-ftp 从**A**备份 FTP 存储。当这个备份程序在**D**上运行时，**B**无法连接到**A**上运行的任何服务（ftp、MySQL 等），而**B**能够 ping **A**并且**C**和**D**都能够连接到**A。**但是我尝试了另一个 FTP 客户端 FlashFXP，将某些内容从**A**下载到**D**，在这种情况下，**B**能够连接到**A**。

我检查了日志文件，但找不到任何东西。我也在**A**和**B**上尝试了 tcpdump ，我发现当 FTP 备份运行时，**A可以从****B**接收包，但是**A**不会响应**B**。

我真的需要你的帮助来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:24:02.187

1.  尝试嗅探从 B 到 A 的网络流量

    sudo tcpdump -A -n -s 0 -w test_ftp.log 主机 IP_OF_HOST_A

2.  在 D 上开始备份

3.  尝试从 B 使用您想要的 A 服务。尝试调试正常的 http 请求
4.  停止 tcpdump
5.  用wireshark检查test_ftp.log**

# wcf - 基于 SSL 的 WCF 服务

> ID：12615598
> 
> 赞同：0
> 
> 时间：2012-09-27T06:44:23.960
> 
> 标签：wcf, ssl

我在通过 SSL 设置 WCF 服务时遇到问题。该服务非常简单，只返回“Hello World！”。客户端可以通过 HTTP 但不能通过 HTTPS 接收消息。我想这是我的 web.config 设置的问题，但我无法弄清楚。

此外，我可以通过浏览器访问服务器上的 HelloWorld.svc 页面，但我的控制台程序和 WCF 测试客户端也失败了。

这是错误消息：

```
System.ServiceModel.EndpointNotFoundException: There was no endpoint listening a
t https://fyp-pc13:997/HelloWorldService/HelloWorld.svc that could accept the me
ssage. This is often caused by an incorrect address or SOAP action. See InnerExc
eption, if present, for more details. ---> System.Net.WebException: The remote s
erver returned an error: (404) Not Found.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpCha
nnelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace --- 
```

WCF 服务器上我的 Web.config 的内容：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IHelloService" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                  <security mode="Transport">
                    <transport realm ="" clientCredentialType="None" />
                  </security>
                        <!--<transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>-->
                </binding>
            </basicHttpBinding>
            <wsHttpBinding>
              <binding name="WSHttpBinding_IHelloService">
                <security mode="Transport">
                  <transport realm ="" clientCredentialType="None" />
                </security>
              </binding>
            </wsHttpBinding>
        </bindings>

    <services>
        <service name="HelloWorldService">
            <!--<endpoint address="https://localhost:997/HelloWorldService/HelloWorld.svc" binding="wsHttpBinding" contract="WcfService.HelloWorld" />-->
            <endpoint address="https://fyp-pc13:997/HelloWorldService/HelloWorld.svc" binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IHelloService" contract="WcfService1.IHelloService" name="WSHttpBinding_IHelloService" />
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
        </service>  
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

我的 ServiceReferences.ClientConfig 的内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IHelloService" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport realm ="" clientCredentialType="None" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
            <wsHttpBinding>
              <binding name="WSHttpBinding_IHelloService">
                <security mode="Transport">
                  <transport realm ="" clientCredentialType="None" />
                </security>
              </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://fyp-pc13:997/HelloWorldService/HelloWorld.svc"
              binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IHelloService"
              contract="ServiceReference1.IHelloService" name="WSHttpBinding_IHelloService">
              <identity>
                  <dns value="fyp-pc13" />
              </identity>
            </endpoint>
          <endpoint address="mex" binding="mexHttpsBinding"
              contract="IMetadataExchange" />
        </client>
    </system.serviceModel>
</configuration> 
```

HelloWorld.svc

```
 <%@ ServiceHost Language="C#" Debug="true" Service="WcfService1.HelloWorld" CodeBehind="HelloWorld.svc.cs" %> 
```

IHelloService.cs（接口）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace WcfService1
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IHelloService
    {

        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        [OperationContract]
        string Hello();

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations.
    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }
} 
```

司机（主）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ConsoleApplication1.ServiceReference1;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                System.Net.ServicePointManager.ServerCertificateValidationCallback += (se, cert, chain, sslerror) =>
                {
                    return true;
                };
                HelloServiceClient helloServiceClient = new HelloServiceClient();
                string result = helloServiceClient.Hello();
                if (result!=null)
                {
                    Console.Out.WriteLine(result);
                }
                else
                {
                    Console.Out.WriteLine("Fail");
                }
            }
            catch (Exception e)
            {
                Console.Out.WriteLine(e.ToString());
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:01:48.957

您的客户端绑定看起来正确，但您的服务器端绑定不正确。将您的定义从客户端复制并粘贴`WSHttpBinding_IHelloService`到服务器，然后在您的服务器端点中引用它。

**更新：**

您的`<service name="HelloWorldService">`配置定义需要匹配完全限定的服务类名称，否则激活器将无法将其与`.svc`文件中定义的类名称匹配，即

```
<service name="WcfService1.HelloWorld"> 
```

# c# - 如何将结构数据类型从 Java 传递到 MS SQL 数据库

> ID：12615602
> 
> 赞同：0
> 
> 时间：2012-09-27T06:44:47.933
> 
> 标签：c#, java, sql, sql-server, jakarta-ee

我正在尝试调用一个参数是`sqlstructure`MS SQL 类型的存储过程。我已经通过`String[] array`但它抛出了这个异常

```
WARNING: #{reportingCharts.getGraphValuesOnLocationBasis}: org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [{CALL dbo.up_Chart_SelectPersonCountByRankLocation(?,?,?,?,?)}]; SQL state [null]; error code [0]; The conversion from UNKNOWN to UNKNOWN is unsupported.; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The conversion from UNKNOWN to UNKNOWN is unsupported.
javax.faces.FacesException: #{reportingCharts.getGraphValuesOnLocationBasis}: org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [{CALL dbo.up_Chart_SelectPersonCountByRankLocation(?,?,?,?,?)}]; SQL state [null]; error code [0]; The conversion from UNKNOWN to UNKNOWN is unsupported.; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The conversion from UNKNOWN to UNKNOWN is unsupported. 
```

所以我认为它不接受`array`作为结构的参数。
不幸的是，我在任何地方都找不到有关如何在 java 中使用它的示例。
如何将我的这个数组/列表传递给这个存储过程？`SqlDbType.Structured`或者在java中c#的替代品是 什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:43:41.100

参考[Microsoft JDBC Driver Team Blog](http://blogs.msdn.com/b/jdbcteam/)，TVP支持的JDBC驱动还没有发布。有一种解决方法：将值打包成二进制形式，在服务器上对其进行破解并将其传递给表值函数。对于 JDBC 驱动程序，此参数必须作为二进制传递。
请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms378878.aspx)，您将找到 java 的所有 MSsql 数据类型。

# testing - 使用 WebTestCase 对捆绑包进行功能测试时指定配置？

> ID：12615603
> 
> 赞同：2
> 
> 时间：2012-09-27T06:44:57.880
> 
> 标签：testing, symfony, bundle, functional-testing

我要做的是对我的捆绑包进行功能测试（可重复使用的捆绑包）。更深入：

*   创建对给定 url 的请求`/my/url`
*   检查是否`MyParamConverter`被调用并将请求转换为`MyObject`
*   检查控制器是否抛出`my.event`

根据文档，我应该扩展`Symfony\Bundle\FrameworkBundle\Test\WebTestCase`并创建一个新客户端：

```
 $client  = static::createClient();
    $crawler = $client->request('GET', '/my/url'); 
```

这样做，加载了哪些捆绑包？如何指定要在环境中使用的配置文件（假设它默认为`test`）？

**编辑**：好的，是时候更好地解释我的问题了。我正在编写一个可重复使用的包，比如 AcmeMessagingBundle。现在我想对其进行功能测试。场景是调用`/my/url`：

```
public function testReceiveApiRoute()
{
    $client = $this->createClient();

    /** @var $route \Symfony\Component\Routing\Route */
    $route  = $client->getContainer()->get('router')
        ->getRouteCollection()->get('acme_messaging_receive');

    $this->assertNotNull($route);
    $this->assertEquals('POST', $route->getRequirement('_method'));
    $this->assertEquals('acme_messaging.controller.api:receive',
        $route->getDefault('_controller'));
}

/**
 * @depends testReceiveApiRoute
 */
public funcion testReceiveApiWorkflow()
{
    $client = $this->createClient();

    // Make a POST request
    $request = Request::create('/my/route', 'POST', array(
        'a' => 'value'
    ));

    // Request is convered in MyObject instance and that my.event is fired
} 
```

通过此测试，`app/config_test.yml`已加载（例如“主配置文件”）。问题是：

不应该将测试“隔离”，即不使用主配置文件？如果我的捆绑包被另一个人用空包测试了`app/config_test.yml`怎么办？测试会失败...

带有前缀路由的测试也会失败。如果`routing.xml`从 AcmeMessagingBundle 导入带有前缀，`testReceiveApiWorkflow`将会失败！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:10:30.070

Using`WebTestCase`将使用您自己`AppKernel`的测试环境。

您可以向您的应用程序添加一个新的环境，并`WebTestCase`像这样使用它：

```
$client = static::createClient(array('environment' => 'new_env')); 
```

更安全的做法是在你的包的测试中创建一个沙盒化的应用程序。您可以使用[JMSCommandBundle](http://jmsyst.com/bundles/JMSCommandBundle%20)为您生成它。您还可以使用此技巧创建查看捆绑包的 sanboxed 应用程序：[https ://github.com/schmittjoh/JMSPaymentCoreBundle/tree/master/Tests/Functional](https://github.com/schmittjoh/JMSPaymentCoreBundle/tree/master/Tests/Functional)

# android - android.os.NetworkOnMainThreadException

> ID：12615607
> 
> 赞同：2
> 
> 时间：2012-09-27T06:45:26.243
> 
> 标签：android, android-widget, android-image, networkonmainthread

在我的应用程序中得到`android.os.NetworkOnMainThreadException`. 我正在尝试从 url 获取图像，当时我得到了这个`Exception`。如果我在 2.2 中运行应用程序，它工作正常，但如果我在 4.0 中运行，则会出现异常。

```
public static Bitmap getBitmap(String url)
{
    Bitmap bitmap = null;

    try
    {
        // replace space with url encoded character.
        url = url.replace(" ", "%20");
        // System.out.println("url : " + url);
        URL urll = new URL(url);
        InputStream in = (InputStream) urll.getContent();
        bitmap = BitmapFactory.decodeStream(in);
    }
    catch ( MalformedURLException e )
    {
        e.printStackTrace();
    }
    catch ( IOException e )
    {
        e.printStackTrace();
    }

    if ( bitmap == null )
        bitmap = BitmapFactory.decodeResource(resources, R.drawable.noimage);

    return bitmap;
} 
```

我收到错误

```
 InputStream in = (InputStream) urll.getContent(); 
```

在这一行请帮我解决这个问题

我使用**了 AsyncTask**

```
private class RecipeDetail1Task extends AsyncTask<Long, Void, RecipeDetailBean>
{
    @Override
    protected void onPreExecute()
    {
        Log.i(TAG, "<<<<<<<<<<<<<onPreExecute>>>>>>>>>>>>>>>>>>>");

        btnViewRecipe.setEnabled(false);
        imgFree.setVisibility(View.GONE);
    }
    @Override
    protected RecipeDetailBean doInBackground(Long... params)
    {
        Log.i(TAG, "<<<<<<<<<<<<<doInBackground>>>>>>>>>>>>>>>>>>>");

        RecipeDetailBean bean = null;
        try
        {
            ParserUtil pu = new ParserUtil(ParserUtil.ResultControl.LIMITED);
            bean = pu.getRecipeDetail(params[0]);               
        }
        catch ( ParserConfigurationException e )
        {
            e.printStackTrace();
        }
        catch ( SAXException e )
        {
            e.printStackTrace();
        }

        return bean;
    }

    protected void onPostExecute(RecipeDetailBean result)
    {
        Log.i(TAG, "<<<<<<<<<<<<<onPostExecute>>>>>>>>>>>>>>>>>>>");

        Constant.recipeDetail = result; 
        if ( result == null )
        {
            Log.i(TAG, "<<<<<<<<<<<<<result == null>>>>>>>>>>>>>>>>>>>");
            toast.setText(getString(R.string.recipe_detail_not_present_message));
            toast.setDuration(Toast.LENGTH_LONG);
            toast.show();
            Constant.recipeDetail = new RecipeDetailBean();
            btnViewRecipe.setEnabled(false);
        }
        else
        {
            Log.i(TAG, "<<<<<<<<<<<<<result |= null>>>>>>>>>>>>>>>>>>>");
            //pb.setVisibility(View.INVISIBLE);
            btnViewRecipe.setEnabled(true);
            lblRecipeName.setText(result.getName());
            lblRecipeDesc.setText(result.getDescription());
            lblRecipeBy.setText(result.getAuthor());
            lblPostedOn.setText(result.getCreatedDate());

            String d=Integer.toString(result.getServedNumber());
            if(d==null)
            {
                lblServesNumber.setText("N/A");
                lblServesNumber1.setText("");
            }

            else if(result.getServedNumber()==0)
            {
                lblServesNumber.setText("N/A");
                lblServesNumber1.setText("");
            }
            else
            {
                lblServesNumber.setText(d);
                lblServesNumber1.setText(" Adult(s)");
            }
            if(Constant.recipeDetail.getFreeYN() == 1)
                imgFree.setVisibility(View.VISIBLE);

            //rbRecipeRating.setProgress((int) result.getRating());
            rbRecipeRating.setRating((float) ( (result.getRating() * 5) / 100 ));
            //Log.d("rating2", "" + (float) ( (result.getRating() * 5) / 100.0f ));
            result.setRecipeBitmap(Constant.getBitmap(result.getImageURL()));
            imgRecipe.setImageBitmap(result.getRecipeBitmap());
            imgRecipe.setVisibility(View.VISIBLE);
            //ImageLoader imageLoader = new ImageLoader(imgRecipe, pb, null);
            //imageLoader.execute(result.getImageURL());
        }

        btnViewRecipe.requestFocus();
    }
} 
```

我在这一行遇到错误：

```
 result.setRecipeBitmap(Constant.getBitmap(result.getImageURL())); 
```

日志猫：

```
09-27 13:14:11.445: E/AndroidRuntime(1014): FATAL EXCEPTION: main
09-27 13:14:11.445: E/AndroidRuntime(1014): android.os.NetworkOnMainThreadException
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at com.indianrecipes.beans.Constant.getBitmap(Constant.java:239)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at com.indianrecipes.activities.RecipeDetail1Activity$RecipeDetail1Task.onPostExecute(RecipeDetail1Activity.java:376)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at com.indianrecipes.activities.RecipeDetail1Activity$RecipeDetail1Task.onPostExecute(RecipeDetail1Activity.java:1)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.AsyncTask.finish(AsyncTask.java:602)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.os.Looper.loop(Looper.java:137)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at android.app.ActivityThread.main(ActivityThread.java:4340)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at java.lang.reflect.Method.invokeNative(Native Method)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at java.lang.reflect.Method.invoke(Method.java:511)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-27 13:14:11.445: E/AndroidRuntime(1014):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T06:53:00.323

`onPostExecute`和应用程序的运行`onPreExecute`方法。方法运行到另一个线程中，这意味着您应该将图像下载到方法中。`Asynctask``main thread``doInBackground``doInBackground`

例如，如果您想从某个 URL 下载图像，然后将该图像放入`ImageView`：

称呼：

`new DownloadImageTask(yourImageView).execute(yourURL);`

其中 asynctask 类是：

```
 private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

    private ProgressDialog mDialog;
    private ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected void onPreExecute() {

        mDialog = ProgressDialog.show(ChartActivity.this,"Please wait...", "Retrieving data ...", true);
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", "image download error");
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        //set image of your imageview
        bmImage.setImageBitmap(result);
        //close
        mDialog.dismiss();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:49:54.537

获取图像也应该在方法中以某种方式完成`doInBackground`......`onPostExecute`就像在主线程中而不是在背景中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:50:14.507

试试这个代码

```
URL urll = new URL(url);
InputStream in = (InputStream) urll.openConnection().getInputStream();
bitmap = BitmapFactory.decodeStream(in); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T05:54:40.033

尝试这个：

```
AQuery aq = new AQuery(getActivity());
aq.id(view.findViewById(R.id.image)).image(imageUrl, true, true, 0,  0,
    new BitmapAjaxCallback() {
        @Override
        public void callback(String url, ImageView iv, Bitmap bm, AjaxStatus status) {
            iv.setImageBitmap(bm);
        }
    }.header("User-Agent", "android")); 
```

# mysql - 在查询结果中显示数字的字符串

> ID：12615608
> 
> 赞同：1
> 
> 时间：2012-09-27T06:45:26.197
> 
> 标签：mysql

查询结果只是数字，如果它们是字符串，则很容易阅读和理解。如何在查询结果中标记数字的等效字符串。

数字与字符串的映射必须在查询中。

从表中选择数字；查询结果为 9,2,4,7。字符串文字将被映射到这个数字。num 范围是从 {0-9} 0-预付，1-后付同样明智

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:54:55.487

您可以`CASE`像这样使用表达式：

```
SELECT 
  ...
  CASE 
    WHEN 1 THEN 'Postpaid'
    WHEN 2 THEN 'prepaid'
    ...
   END
... 
```

您也可以使用临时表来执行此操作，例如：

```
DECLARE @t Table(NumberToReplace INT, replacewith VARCHAR(50));
INSERT INTO @t VALUES
(1, 'Postpaid'),
(2, 'Prepaid'),
... 
```

然后可以`JOIN`将两张表中的数字替换为对应的字符串：

```
SELECT 
  t1.Column1, t1.Column1, t2.replacewith
FROM YourTable t1
LEFT JOIN temp t2 ON t1.NumberToReplace = t2.NumberToReplace 
```

我曾经为另一个表中没有对应字符串的数字`LEFT JOIN`提供值。`NULL`

## [这是 SQL 小提琴中的演示](http://www.sqlfiddle.com/#!2/f40f0/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T06:51:31.713

这是你想要的吗？

```
SELECT id, IF(my_field REGEXP '[digit]', 'is_string', 'is_numeric') as result
FROM my_Table 
```

看看这个[http://sqlfiddle.com/#!2/48a6c/1](http://sqlfiddle.com/#!2/48a6c/1)

# c# - 对象参数和对象返回 C# WebService 到 Android

> ID：12615610
> 
> 赞同：1
> 
> 时间：2012-09-27T06:45:36.267
> 
> 标签：c#, android, asp.net, web-services

我正在尝试为同一应用程序开发 ASP.NET Web 应用程序和 Android UI。我是安卓新手。我开发了一个带有文本框和按钮的简单屏幕。键入内容并单击按钮，将文本保存在数据库中。

现在我正在转向复杂的功能。我需要执行一个注册表单。我会在手机屏幕上放更多的文本框。所以我打算将它们传递给对象中的 Web 服务。

我在 C# 中创建了一个 Web 服务，方法**寄存器**将对象**Customer**作为参数。客户类有几个字段，如姓名、电子邮件、电话等。

请指导/建议一个示例来实现将对象从 android 传递到 C# webservice 并访问返回的对象值的功能。

我正在将 KSoap2 用于 Android 网络服务。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:51:57.330

您可以以不同的方式实现服务。一些例子是：

*   服务栈[http://www.servicestack.net/](http://www.servicestack.net/)
*   WCF 服务[http://www.codeproject.com/Articles/123067/A-Simple-Sample-WCF-Service](http://www.codeproject.com/Articles/123067/A-Simple-Sample-WCF-Service)
*   WebAPI [http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

您可以将数据从您的客户端（Android 应用程序）以 JSON 格式发送到您的服务。在此服务中，您应该实现一些东西来将此 JSON 表示法转换回 .net 对象。您可以为此使用 JSON.net。有关此的更多信息，可以在这里找到：

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

你应该记住这一点：

1.  将来自客户端 (Android) 的数据序列化为 JSON 表示法的字符串。
2.  将数据发送到您的服务
3.  将请求反序列化到 .NET 对象。（一些框架为你做这个）
4.  对 .NET 对象执行某些操作并向客户端返回响应

以下是 Android 的一些示例：

[http://sarangasl.blogspot.nl/2011/10/android-web-service-access-tutorial.html](http://sarangasl.blogspot.nl/2011/10/android-web-service-access-tutorial.html) http://www.youtube.com/watch?v=v9EowBVgwSo

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:25:35.113

也许一个具体的例子也很有用。假设您可以调用 AndroidHttpClient 来执行 HttpPost，您可以利用一个简单的 asp.net mvc 控制器操作来处理帖子（作为 xml）并相应地返回 xml（或其他）供您解析。

对于您的 asp.net mvc 操作，请尝试以下操作（路由到[http://foo.com/Something/ProcessSomething](http://foo.com/Something/ProcessSomething)）：

```
...

[ ValidateInput(false)
]
public class SomethingController : Controller
{
  ...

  [ HttpPost
  ]
  public ActionResult ProcessSomething(SomeParameters Parameters, String Options)
  {
    ...

    String sProcessed = Parameters.Descriptor.ParamA + Parameters.Descriptor.ParamB;

    ...

    return this.Content
      ( String.Format
        ( "<result><processed>{0}</processed></result>"
        , sProcessed
        )
      , "text/xml"
      );
  }

  /// <summary>
  /// Description of a view model instance.
  /// </summary>

  [ XmlRoot("something")
  ]
  public class SomethingDescriptor
  {
    private String _ParamA = String.Empty;
    private String _ParamB = String.Empty;

    [ XmlElement("paramA")
    ]
    public String ParamA
    {
      set
      {
        this._ParamA = value;
      }
      get
      {
        return this._ParamA;
      }
    }

    [ XmlElement("paramB")
    ]
    public String ParamB
    {
      set
      {
        this._ParamB = value;
      }
      get
      {
        return this._ParamB;
      }
    }

  }

  /// <summary>
  /// View parameter deserializer.
  /// </summary>

  public class SomethingParameters
  {
    private SomethingDescriptor _Descriptor = new SomethingDescriptor();

    public SomethingDescriptor Descriptor
    {
      get
      {
        return this._Descriptor;
      }
    }

    public String Something
    {
      set
      {
        try
        {
          using (StringReader sR = new StringReader(value))
          {
            XmlSerializer xS = new XmlSerializer(typeof(SomethingDescriptor));

            this._Descriptor = xS.Deserialize(sR) as SomethingDescriptor;
          }
        }
        catch
        {
        }
      }
      get
      {
        return String.Empty;
      }
    }

  }

} 
```

您的 android 应用程序会将诸如“Something=<something><paramA>this is pA</paramA><paramB>this is paramB</paramB></something>”之类的变量发布到[http://foo.com/Something /ProcessSomething](http://foo.com/Something/ProcessSomething)并取回可用于向用户呈现某些内容的 xml。

# macos - 使用 bonjour 在 mac 上检测 wifi 设备

> ID：12615614
> 
> 赞同：0
> 
> 时间：2012-09-27T06:45:55.570
> 
> 标签：macos, bonjour

我需要一些帮助，如何检测所有使用 bonjour 连接的 wifi 设备，并在 mac 应用程序上显示这些设备。一个示例应用程序会很有帮助。如果没有，我可以继续完成我的任务的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:33:24.530

一个好的起点是检查您是否可以使用来自[http://www.tildesoft.com](http://www.tildesoft.com)的 Bonjour 浏览器查看设备。如果他们不宣传服务，那么您将看不到任何东西。

这里有关于如何发现 Bonjour 服务的基本描述：http: [//developer.apple.com/library/mac/#documentation/Networking/Conceptual/dns_discovery_api/Articles/browse.html#//apple_ref/doc/uid/ TP40002486-SW1](http://developer.apple.com/library/mac/#documentation/Networking/Conceptual/dns_discovery_api/Articles/browse.html#//apple_ref/doc/uid/TP40002486-SW1)

要发现所有服务，请在此处查看此答案： [如何获取所有可用域上所有已宣布的 bonjour 服务的列表？](https://stackoverflow.com/questions/1587264/how-to-get-the-list-of-all-announced-bonjour-services-on-all-available-domains)

# security - 防止屏幕捕获软件监控输入字段

> ID：12615617
> 
> 赞同：0
> 
> 时间：2012-09-27T06:46:02.363
> 
> 标签：security, desktop-recording

我试图克服的障碍是屏幕录制软件在使用时监控计算机。工作站使用 RDP 和 Citrix XenApp 等常用技术。用户应该通过浏览器窗口输入字段看到一些细节，但最好不要记录。抛开物理攻击不谈，有没有标准的处理方法？

我确实打印了上述信息并使用样式表将其隐藏在屏幕上，但这确实不是一个可行的选择。

# android - 使用 actionbarsherlock 在主操作栏中显示按钮

> ID：12615621
> 
> 赞同：0
> 
> 时间：2012-09-27T06:46:47.860
> 
> 标签：android, android-widget, android-actionbar, actionbarsherlock

我刚刚使用 actionbarsherlock 启动了 actionbar。我已经成功实施了。我在狭窄时使用了 splitactionbar 并拆分为主操作栏、标签栏、底部栏。我的问题是如何在底部栏中添加不同的图标并在主操作栏中添加不同的图标？我将我的应用程序限制为仅纵向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:06:58.393

解决方法可能是有序的，在[这里看到另一个问题。](https://stackoverflow.com/a/9329084/486063)

不过幸运的是，模仿底部栏似乎相当容易。只需使用具有定义高度的 LinearLayout，并与具有相同权重的 ImageButtons 底部对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:53:20.373

我们不能在主操作栏中添加图标，因此我们可以通过使用这些语句在操作栏中使用自定义视图

```
actionbar = getSupportActionBar();
actionbar.setDisplayShowHomeEnabled(false);
actionbar.setDisplayShowTitleEnabled(false);
actionbar.setDisplayShowCustomEnabled(true);

View actionbar1 = LayoutInflater.from(this).inflate(R.layout.action_custom, null);
actionbar.setCustomView(actionbar1); 
```

# javascript - Javascript Web Workers 文件上传

> ID：12615622
> 
> 赞同：7
> 
> 时间：2012-09-27T06:46:53.073
> 
> 标签：javascript, web-worker

我正在尝试使用 HTML5 和 Web Worker 为非常大的文件制作一个 html 上传器。Atm 它上传缓慢但消耗大量内存。我认为当它将整个文件添加到表单时，它会将整个文件传输到内存中。继承人的代码：jswebworker.js：

```
 /*importScripts('webworkerFormData.js');*/

(function() {
// Export variable to the global scope
(this == undefined ? self : this)['FormData'] = FormData;

var ___send$rw = XMLHttpRequest.prototype.send;
XMLHttpRequest.prototype['send'] = function(data) {
    if (data instanceof FormData) {
        if (!data.__endedMultipart) data.__append('--' + data.boundary + '--\r\n');
        data.__endedMultipart = true;
        this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + data.boundary);
        data = new Uint8Array(data.data).buffer;
    }
    // Invoke original XHR.send
    return ___send$rw.call(this, data);
};

function FormData() {
    // Force a Constructor
    if (!(this instanceof FormData)) return new FormData();
    // Generate a random boundary - This must be unique with respect to the form's contents.
    this.boundary = '------RWWorkerFormDataBoundary' + Math.random().toString(36);
    var internal_data = this.data = [];
    /**
    * Internal method.
    * @param inp String | ArrayBuffer | Uint8Array  Input
    */
    this.__append = function(inp) {
        var i=0, len;
        if (typeof inp === 'string') {
            for (len=inp.length; i<len; i++)
                internal_data.push(inp.charCodeAt(i) & 0xff);
        } else if (inp && inp.byteLength) {/*If ArrayBuffer or typed array */
            if (!('byteOffset' in inp))   /* If ArrayBuffer, wrap in view */ 
                inp = new Uint8Array(inp);
            for (len=inp.byteLength; i<len; i++)
                internal_data.push(inp[i] & 0xff);
        }
    };
}
/**
* @param name     String                                  Key name
* @param value    String|Blob|File|Uint8Array|ArrayBuffer Value
* @param filename String                                  Optional File name (when value is not a string).
**/
FormData.prototype['append'] = function(name, value, filename) {
    if (this.__endedMultipart) {
        // Truncate the closing boundary
        this.data.length -= this.boundary.length + 6;
        this.__endedMultipart = false;
    }
    var valueType = Object.prototype.toString.call(value),
        part = '--' + this.boundary + '\r\n' + 
            'Content-Disposition: form-data; name="' + name + '"';

    if (/^\[object (?:Blob|File)(?:Constructor)?\]$/.test(valueType)) {

        return this.append(name,
                        new Uint8Array(new FileReaderSync().readAsArrayBuffer(value)),
                        filename || value.name);
    } else if (/^\[object (?:Uint8Array|ArrayBuffer)(?:Constructor)?\]$/.test(valueType)) {
        part += '; filename="'+ (filename || 'blob').replace(/"/g,'%22') +'"\r\n';
        part += 'Content-Type: application/octet-stream\r\n\r\n';
        this.__append(part);
        this.__append(value);
        part = '\r\n';
    } else {
        part += '\r\n\r\n' + value + '\r\n';
    }
    this.__append(part);
};
})();

movies = [];
var timeStarted = 0;
uploadingVar = false;
const BYTES_PER_CHUNK = 64 * 1024 * 1024; 

function toTitleCase(str)
{
return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1);});
}

function newUpload(blobOrFile, moviename, filename, i, fileType, sizeFile) {
var xhr = new XMLHttpRequest();
path = '/moviehtml/newmupload.php?        moviename='+escape(moviename)+'&filename='+escape(filename)+'&num='+escape(i);
xhr.open('POST', path, false);
self.postMessage(blobOrFile.size);
var fd = new FormData();
//xhr.setRequestHeader('Content-Type', fileType)
//blobOrFile2 = FileReaderSync.readAsArrayBuffer(blobOrFile);
fd.append("files1", blobOrFile);
//fd.append("moviename", moviename);
//fd.append("filename", filename);
//fd.append("num",i);

seconds = new Date() / 1000;
xhr.send(fd);
self.postMessage(xhr.responseText)
self.postMessage({'type':'partial','done':i*BYTES_PER_CHUNK, 'started':timeStarted, 'total':sizeFile});
var finish = Date()/1000;
if (finish >= (seconds+100)){
    return false;
}
return true;

}
function newFileUpload(file, movieName, fileType, filename, exten){
if (movieName == movieName.match(/[a-zA-Z0-9\. \:]+/)){
    timeStarted = new Date().getTime();

var blob = file;// this.files[0];
//var filename = blob.name;
var moviename = toTitleCase(movieName);
 // 1MB chunk sizes.
const SIZE = blob.size;
//alert(SIZE + ' '+document.getElementById('fileToUpload').files[0].size)
var start = 0;
var end = BYTES_PER_CHUNK;
//alert(SIZE/BYTES_PER_CHUNK)
var i = 1;
while(start < SIZE) {
    wow = newUpload(blob.slice(start, end), moviename, filename, i, fileType, SIZE);

    start = end;
    end = start + BYTES_PER_CHUNK;
    i++;
}
var xhr = new XMLHttpRequest();
var fd2 = new FormData();
typeFile = filename.split('.').pop()
fd2.append("type", blob.type);
fd2.append("exten", typeFile);
fd2.append("moviename", moviename);
xhr.open('POST', '/moviehtml/finishedupload.php', false);
xhr.send(fd2);
}
}
function process(){
uploadingVar = true;
while(movies.length > 0) {

    upMovie = movies.pop();
    var file = upMovie[0];
    var movieName = upMovie[1];
    var fileType = upMovie[2];
    var filename = upMovie[3];
    var exten = upMovie[4];
    self.postMessage({'type':'start','size':file.size, 'name':movieName});

    newFileUpload(file, movieName, fileType, filename, exten);
    self.postMessage({'type':'finish','name':movieName})
    self.postMessage(movieName + " Uploaded Succesfully");
 }
 uploadingVar = false;
}

self.addEventListener('message', function(e) {
movies.push(e.data);
if (!uploadingVar){
process();

}
}, false); 
```

我调用它的函数：

```
var worker = new Worker('jswebworker.js');
function testUpload(){
//newFileUpload();
var file = document.getElementById('fileToUpload').files[0];
worker.postMessage([file,toTitleCase(document.getElementById('movieName').value),     file.type, file.name, file.name.split('.').pop()]);

} 
```

这是我的公寓媒体服务器的网页。我希望有一种方法可以创建一个 blob，而无需将所有原始文件加载到内存中。感谢您的帮助，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-22T14:04:52.583

我认为[这个](http://www.resumablejs.com/)库（这里也是[resumable.js](https://github.com/23/resumable.js/)的 github 页面）可能已经在做你想做的事情了。由于我不知道您要上传的文件有多大，因此就基准测试而言，我无法提供任何见解。我希望这能够帮到你。

# graphics - 使用 DirectXTex 加载纹理

> ID：12615624
> 
> 赞同：1
> 
> 时间：2012-09-27T06:46:53.757
> 
> 标签：graphics, textures, directx-11, texture2d

我最近刚刚获得了 Visual Studio Ultimate 2012。我听说 D3DX 实用程序库在 Windows 8 Metro 风格的应用程序中已被弃用，所以我决定尽量不使用其中的功能。

现在，据我所知，我认为我有两个选择。

1.  手动加载纹理，获取每个像素的值并将它们传递给 CreateTexture2D 函数中的 pInitialData 参数。

2.  使用 DirectXTex 库（我不知道它是如何甚至在哪里......）

谁能帮我？如果您可以在这两种方法上发布一些示例代码，那就太好了，因为我相信它们都会派上用场。如果不是要求太多，您能否详细解释一下如何使用 DirectXTex 库，比如在哪里下载它，如何将它包含在您的项目中以及如何使用它？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T18:41:04.227

对于您的使用案例，您可能希望使用 DirectX Tool Kit 而不是 DirectXTex。在任何情况下，本[博](http://blogs.msdn.com/b/chuckw/archive/2012/05/04/direct3d-11-textures-and-block-compression.aspx)文都介绍了在没有 D3DX 的情况下加载纹理的选项。

更一般地说，[这里](http://blogs.msdn.com/b/chuckw/archive/2013/08/21/living-without-d3dx.aspx)有一堆用于替换 D3DX 实用程序库功能的选项。

# ruby-on-rails - Redmine当前用户信息

> ID：12615633
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:47:18.333
> 
> 标签：ruby-on-rails, redmine

我在 Redmine 1.4 工作，我的数据库中有很多用户。我有一个功能需要获取当前登录的用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:04:34.490

我自己不是红宝石专家，看看它是如何在源代码中完成的。例如，在 中[`user_controller.rb`](http://www.redmine.org/projects/redmine/repository/entry/tags/1.4.0/app/controllers/users_controller.rb)，使用 检索当前用户**`User.current`**。

`User.current`在 中定义[`user.rb`](http://www.redmine.org/projects/redmine/repository/entry/tags/1.4.0/app/models/user.rb)，并在[`application_controller.rb`](http://www.redmine.org/projects/redmine/repository/entry/tags/1.4.0/app/controllers/application_controller.rb)（其中`user_controller.rb`继承）中设置：

```
User.current = find_current_user 
```

`find_current_user`在该线下方定义。因此，只要`application_controller`被执行，您应该可以使用`User.current`.

# c# - C# / PHP => 将文件上传为 Base64 并将其写入磁盘

> ID：12615636
> 
> 赞同：0
> 
> 时间：2012-09-27T06:47:27.493
> 
> 标签：c#, php, httpwebrequest

**我想做的事：**

我需要使用 HttpWebRequest 对 PHP 服务进行 POST，并将图像文件作为 Base64（无法更改）字符串连同其他参数一起上传，并将 Base64 数据写入数据库。

**我做什么：**

*   到目前为止，我能够上传代表图像的 Base64 数据
*   PHP端确实接收数据并将其写入数据库

**什么不起作用**

*   当我试图从数据库中读取 Base64 数据并将其写入磁盘时，它会写入文件，但我无法将文件作为图像打开

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:12:31.097

问题实际上出在 Base64 字符串中，在 C# 中有一些“+”符号，而在 PHP 端，“+”由于某些原因被删除。

我刚刚添加了以下行：

```
$data = str_replace(' ', '+', $data); 
```

现在一切正常。

谢谢！

# google-chrome - NPAPI 插件未反映在 chrome://plugins 中

> ID：12615637
> 
> 赞同：0
> 
> 时间：2012-09-27T06:47:29.627
> 
> 标签：google-chrome, google-chrome-extension, npapi

我编写了一个 NPAPI 插件，其 MIME 类型为“VALUE”MIMEType”、“application/x-shockwave-flash|application/futuresplash”......

当我在 URL 地址栏中说 chrome://plugins 时，我的插件没有反映在那里。请建议我哪里出错了。操作系统：- winXP Chrome 版本是：- 22.0.1229.79 m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:32:51.717

首先，你不能窃取别人的模仿类型；如果这样做，浏览器制造商会将您的插件列入黑名单。（好吧，我不代表他们说话，但这是 Mozilla 的开发人员告诉我的，我希望他们知道）。

其次，您没有提供足够的信息让我们猜测可能出了什么问题；.rc 文件中的 STRINGS 资源设置正确吗？您可以将它们作为问题的一部分发布吗？

您是否考虑过使用[FireBreath](http://www.firebreath.org)？这将为您解决很多问题，并让您开始着手处理您真正关心的事情。

或者，如果您要发布一些有用的信息（例如 .rc 文件中的代码片段），我们可以尝试帮助您找出哪里出错了。

# jquery - Jquery在x和y坐标中放置文本

> ID：12615639
> 
> 赞同：-1
> 
> 时间：2012-09-27T06:47:33.717
> 
> 标签：jquery

假设我的值 x = 100 和 y = 26，div 的高度和宽度等于 500。

我如何在 x 和 y 坐标中放置文本？

这样做的内置方法是什么？

x=Math.floor(Math.random()*500); y=Math.floor(Math.random()*500);

我必须在这个 x 和 y 坐标中放置文本。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:51:34.230

您可以创建一个新元素，然后使用 CSS 移动它：

```
$('<div />', {
    text: 'Hello'
}).css({
    position: 'absolute',
    left: '100px',
    top: '26px'
}).appendTo('#your-div'); 
```

`#your-div`还应该`position: relative;`在其 CSS 中使您的新元素位置相对于其父元素，而不是文档。

**演示：http: [//jsfiddle.net/Blender/5Sfhh/](http://jsfiddle.net/Blender/5Sfhh/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:02:15.227

假设您想在另一个元素的特定位置添加一个新元素。您可以通过使用`.css`jQuery 中的函数设置 css 属性来做到这一点。

```
function addText(txt, x, y) {
    $('<div>').css({
        left: x,
        top: y
    }).html(txt).appendTo('#container');
}

addText("Hello", 50, 100); 
```

容器元素应该有`position:relative`，子元素应该有`position:absolute`css

jsfiddle：http: [//jsfiddle.net/p5QSd/](http://jsfiddle.net/p5QSd/)

# c# - WindowsPhone 中的 TabControl , 框架

> ID：12615642
> 
> 赞同：1
> 
> 时间：2012-09-27T06:47:37.563
> 
> 标签：c#, silverlight, windows-phone-7, uinavigationcontroller

在 wpf 中，我习惯于在单击选项卡项后将页面显示到框架中。像这样的东西：

```
<Frame Source = "" /> 
```

我在我的项目中添加了 System.Windows.Controls 参考，以便使用 tabControl 和 frame 。我可以添加一个 tabControl ，但没有 Frame 运气。我的xml代码：

```
xmlns:cc="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls" 
```

每当我尝试添加框架时，编译器都会要求我检查参考。这里有什么解决方案？有人可以帮忙吗？

PS我知道在win Phone中，pivotControl是默认工具，但我的老板要求tabControl。

# ruby - 使用 Capybara 或类似工具访问所有加载的资源

> ID：12615646
> 
> 赞同：4
> 
> 时间：2012-09-27T06:47:50.573
> 
> 标签：ruby, web-crawler, headless-browser

我正在寻找一种可能性，可以使用无头浏览器轻松访问和列出网页文档开始加载后加载的所有资源：脚本、图像、样式表等。我对文件的 url、状态码和类型等感兴趣。

想办法以编程方式访问`Network`选项卡（开发人员工具）为您提供的信息：

![在此处输入图像描述](../Images/7bb0d2dbda0bee12e1a011d8a9278567.png)

有谁知道 Ruby 库可以帮助我解决这个问题，或者——甚至更好——是否有办法使用 Capybara(–webkit) 来实现这一点？

* * *

**更新**

似乎[Poltergeist 有一个名为的方法`network_traffic`](http://rubydoc.info/gems/poltergeist/Capybara/Poltergeist/Browser:network_traffic)，它可以满足我的需求。不过还没有时间去研究。一旦我这样做，我会报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:14:04.587

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:19:30.803

在 Capybara 测试期间您想要这些信息似乎很奇怪。编写 UI 测试以反映实际用户行为是一种很好的做法。

考虑一个使用 AJAX 更新页面上的文本块的按钮。您可以单击按钮，然后检查请求是否发生并检查返回值。但是您最好像用户一样对其进行测试：单击按钮，等到文本块更改，然后确认它现在显示预期的文本。

如果你真的想捕获网络流量，我会让你的测试设置一个透明的 HTTP 代理，通过它连接，并在事后检查请求日志。

我的团队在 Capybara 测试期间使用类似的方法来模拟与 Internet 的断开连接。我们使用的 Firefox 配置文件被配置为指向在每个功能开始时启动的透明代理。这样我们就可以编写如下场景：

```
Given I am online
 When I do something
  And I am offline
 Then something doesn't break 
```

...`am online`和`am offline`步骤只是打开和关闭代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T02:30:41.747

以@polarblau 的回应为基础

您可以在测试代码中设置调试断点并运行...

```
page.driver.network_traffic.each { |request| request.response_parts.uniq(&:url).each { |response| puts "#{response.url}: #{response.status}" }} 
```

不同的是你不需要启动一个新的浏览器，并且可以看到你的页面加载了什么。

# tridion - 如何开发tridion移动网站

> ID：12615647
> 
> 赞同：-5
> 
> 时间：2012-09-27T06:47:53.243
> 
> 标签：tridion

我的公司希望我使用 java、jsp、html 和 css 在 tridion 中开发静态移动网站。请帮助我在 tridion 中开发移动网站的步骤是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:50:02.707

在 Tridion 中开发移动网站时需要考虑两个主要事项：

1.  内容/模板蓝图结构 - 您的移动网站会是主网站内容的 1:1 副本吗？还是移动访问者可能会使用的特定操作/部分的内容子集？我认为子网站方法最适合大多数用户注册航班、购买产品或登录以使用网络应用程序的网站。子站点还可以包括到主站点的链接。子站点将拥有自己的一组模板、组件和页面，但会重复使用模式。
2.  CSS/HTML - 在移动设备上很好地呈现网站是一场针对移动浏览器编写良好、干净的 HTML 和 CSS 的游戏。这很容易在 Tridion 中使用子站点方法的新模板完成。但是，如果您决定提供与主站点相同的所有内容，但使用对移动设备友好的 CSS，那么您需要更加认真地重新编写现有的 CSS/HTML 并使用响应式设计。这比子网站要付出更大的努力——但您的网站设计将是“面向未来的”，并且在未来几年内可以与大多数移动浏览器一起使用。

我希望这有帮助。这是一个常见问题，Tridion 的蓝图技术可以帮助您最大限度地重复使用不同渠道的模式、模板和内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:13:37.357

我建议阅读以下内容：[https ://www.sdltridionworld.com/articles/sdltridion2011/mobile_websites.aspx](https://www.sdltridionworld.com/articles/sdltridion2011/mobile_websites.aspx)

我认为这对你来说是一个很好的起点。

# ios - 当互联网关闭时，它会使我的应用程序在加载数据时处于缓慢状态

> ID：12615649
> 
> 赞同：0
> 
> 时间：2012-09-27T06:48:07.613
> 
> 标签：ios, xcode

> **可能重复：**
> [网络中断时我的应用程序仍然存在](https://stackoverflow.com/questions/12614355/my-app-remain-when-network-down)

当网络连接中断时，从互联网加载的数据使我的应用程序处于缓慢状态。有没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:04:08.807

您可以在任何方便的地方检查互联网，它可以在 viewDidLoad 或 didFinishLaunching 方法中，下面是我用来检查互联网连接的示例代码

```
- (BOOL) connectedToNetwork
{
    Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    BOOL internet;
    if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN)) {
        internet = NO;
    } else {
        internet = YES;
    }
    return internet;
} 
```

Apple 提供了可达性[示例应用程序](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)来展示如何测试网络可用性.. 使用下面的代码可以实现自动可达性

```
if ([[Reachability reachabilityForLocalWiFi] currentReachabilityStatus] == ReachableViaWiFi)
{
    // perform action that requires a local WiFi connection
}
else
{
    // give a message that local WiFi is required
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:29:14.283

你可以检查互联网连接与否。使用以下代码调用 checkReachability 方法。它可以在 didFinishLaunching 或 viewWillAppear 或 viewDidLoad 方法中。

-(void)checkReachability { // 检查互联网连接 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

```
internetReachable = [[Reachability reachabilityForInternetConnection] retain];
[internetReachable startNotifier];

// check if a pathway to a random host exists
hostReachable = [[Reachability reachabilityWithHostName: @"www.apple.com"] retain];

[hostReachable startNotifier]; 
```

}

-(void) checkNetworkStatus:(NSNotification *)notice {

```
// called after network status changes
NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
switch (internetStatus)
{
    case NotReachable:
    {
        NSLog(@"The internet is down.");
        break;
    }
    case ReachableViaWiFi:
    {
        NSLog(@"The internet is working via WIFI.");
        break;
    }
    case ReachableViaWWAN:
    {
        NSLog(@"The internet is working via WWAN.");
        break;
    }
} 
```

}

# memory-management - CPU的数据总线不应该匹配ROM的数据输入吗？

> ID：12615652
> 
> 赞同：0
> 
> 时间：2012-09-27T06:48:20.760
> 
> 标签：memory-management, hardware, cpu-architecture, computer-architecture, bus

我应该设计一个系统

*   CPU 具有 16 位宽的地址总线和 8 位宽的数据总线。

在这个系统中，我必须处理：

*   RAM 具有 4 位 DATA 宽度和 12 位 ADRESS 宽度。

和一个：

*   ROM，DATA 宽度为 8 位，ADRESS 宽度为 14 位。

构建系统时数据总线的大小不一样不是问题吗？我的意思是，我知道在使用地址总线时，您可以选择要使用的总线线路，这样您就可以针对特定的内存空间。但是在使用数据总线的时候，真的是一样的想法吗？如果我连续映射内存空间，在这个系统中运行的程序是否会以这种方式丢失数据，因为 8 个数据位中只有 4 个位被读取？这真是让我头大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:51:40.200

您并排使用两个 RAM 部件。

一个提供 D0-3，另一个提供 D4-7。

看看现代计算机的 DIMM 模块；有许多 RAM 芯片，但它们是并行的。

早在过去，DRAM 芯片都是 1 位宽，所以你需要大量的芯片来制作内存库。 [Apple II 示意图](http://www.freeinfosociety.com/electronics/schemview.php?id=1472 "苹果][示意图")

这是否让您对以相同速度运行的 RAM 芯片感到困惑？

RAM 以越来越快的速度同步的问题导致了 SDRAM（同步 RAM）的发明，其状态机位于由 CPU 提供时钟的 RAM 中。

幸运的是，您的作业没有 RAM 更像是具有行和列寻址而不是地址总线的 DRAM。

# apache - 验证 Tropo 的 HTTP 请求

> ID：12615653
> 
> 赞同：1
> 
> 时间：2012-09-27T06:48:25.850
> 
> 标签：apache, http-headers, httprequest, tropo

每当您启动 Tropo 会话时，它都会将会话信息发送到带有令牌的 URL。

我想从我的服务器端验证这个会话转储请求。对于 Twilio，您将获得“x-twilio-signature”标头。我很想知道 tropo 通过上述请求发送的所有 http 标头。

感谢您的任何建议/帮助。

-桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:20:02.710

圣，

您可以将 API 调用中的任意数据传递给 Tropo API。然后，此数据将出现在会话对象中，然后将其发布到您的后端，因此以这种方式传递您自己的验证令牌然后在服务器端验证它应该非常简单。

-约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:11:20.437

进一步在这里发帖我已经在 Tropo 论坛上提出了一张票。他们的响应时间非常好。这是有关此问题的任何参考的线程：[https ://www.tropo.com/ticket/1855216](https://www.tropo.com/ticket/1855216)

感谢您的所有评论和想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:51:09.380

IP 范围显然是不行的，因为我们需要维护他们的 IP 列表。他们（我的意思是，Tropo 开发人员）至少可以添加反向 ip 域，以便我们可以使用 dns 系统检查它吗？

所以现在我看到唯一的方法是为传入的消息设置一个唯一的 URL，例如[http://example.org/incoming/sms/850ce611d5c889aac5535b206737c3fa.json](http://example.org/incoming/sms/850ce611d5c889aac5535b206737c3fa.json)，它是保密的。这很难看，但应该可以。

# android - 编辑布局文件

> ID：12615655
> 
> 赞同：2
> 
> 时间：2012-09-27T06:48:28.953
> 
> 标签：android, layout, button

我正在尝试编辑布局文件，以便两个按钮并排显示，而不是一个在另一个之上。以下是布局文件中的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="225dp"
android:layout_height="wrap_content"
android:background="@color/dark_yellow"
android:orientation="vertical"
android:padding="12dip" >

<TextView
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:paddingBottom="12dip"
android:text="@string/dialog_text"
android:textColor="@color/light_yellow"
android:textSize="@dimen/font_medium" />

<Button
android:id="@+id/btn_go_to_new_App"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:onClick="Go"
android:text="@string/btn_go" />

<Button
android:id="@+id/btn_stay"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:onClick="stay"
android:text="@string/btn_stay_at_lifecycle" />

</LinearLayout> 
```

截至目前，`btn_go`出现在上面`btn_stay_at_lifecycle`。我需要做什么才能`btn_stay_at_lifecycle`显示在右侧`btw_go`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:51:58.770

您`LinearLayout`的定义为`vertical`，因此您添加的每个项目都将垂直组织。

如果您需要并排放置一些项目，请将它们包含在`LinearLayout`with 属性`android:orientation="horizontal"`中。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="225dp"
    android:layout_height="wrap_content"
    android:background="@color/dark_yellow"
    android:orientation="vertical"
    android:padding="12dip" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:paddingBottom="12dip"
        android:text="@string/dialog_text"
        android:textColor="@color/light_yellow"
        android:textSize="@dimen/font_medium" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn_go_to_new_App"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="Go"
            android:text="@string/btn_go" />

        <Button
            android:id="@+id/btn_stay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="stay"
            android:text="@string/btn_stay_at_lifecycle" />

    </LinearLayout>

</LinearLayout> 
```

[`orientation`a`LinearLayout`的默认值为`"horizontal"`](https://stackoverflow.com/questions/11124999/android-linearlayout-not-vertical-or-horizontal-specified)。所以即使你没有`android:orientation`在 inner 中指定`LinearLayout`，它也会并排排列它的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T06:53:25.817

使用以下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="225dp"
android:layout_height="wrap_content"
android:background="@color/dark_yellow"
android:orientation="vertical"
android:padding="12dip" >

<TextView
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:paddingBottom="12dip"
android:text="@string/dialog_text"
android:textColor="@color/light_yellow"
android:textSize="@dimen/font_medium" />

<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content" >
<Button
android:id="@+id/btn_go_to_new_App"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:onClick="Go"
android:text="@string/btn_go" />

<Button
android:id="@+id/btn_stay"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:onClick="stay"
android:text="@string/btn_stay_at_lifecycle" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T06:53:41.543

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="225dp"
android:layout_height="wrap_content"
android:background="@color/dark_yellow"
android:orientation="vertical"
android:padding="12dip" >

<TextView
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:paddingBottom="12dip"
android:text="@string/dialog_text"
android:textColor="@color/light_yellow"
android:textSize="@dimen/font_medium" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btn_go_to_new_App"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="Go"
        android:text="@string/btn_go" />

    <Button
        android:id="@+id/btn_stay"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="stay"
        android:text="@string/btn_stay_at_lifecycle" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T06:53:55.157

尝试这个

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="225dp"
    android:layout_height="wrap_content"
    android:background="@color/dark_yellow"
    android:orientation="vertical"
    android:padding="12dip" >

    <TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:paddingBottom="12dip"
    android:text="@string/dialog_text"
    android:textColor="@color/light_yellow"
    android:textSize="@dimen/font_medium" />

 <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >

    <Button
    android:id="@+id/btn_go_to_new_App"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:onClick="Go"
    android:text="@string/btn_go" />

    <Button
    android:id="@+id/btn_stay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:onClick="stay"
    android:text="@string/btn_stay_at_lifecycle" />
     </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T06:57:17.253

尝试

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="225dp"
android:layout_height="wrap_content"
android:background="@color/dark_yellow"
android:orientation="vertical"
android:padding="12dip" >

<TextView
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:paddingBottom="12dip"
android:text="@string/dialog_text"
android:textColor="@color/light_yellow"
android:textSize="@dimen/font_medium" />

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content">

       <Button
    android:id="@+id/btn_go_to_new_App"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight=".5"
    android:onClick="Go"
    android:text="@string/btn_go" />

    <Button
    android:id="@+id/btn_stay"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight=".5"
    android:onClick="stay"
    android:text="@string/btn_stay_at_lifecycle" />

</LinearLayout>
    </LinearLayout> 
```

# ruby-on-rails - 如何制作导致'/：category_id/：id'的表格，其中：category_id和：id应该在表格中输入

> ID：12615658
> 
> 赞同：0
> 
> 时间：2012-09-27T06:48:58.113
> 
> 标签：ruby-on-rails, forms

我已经通过通讯地址（路由）实现了搜索：（`/:category_id/:id`我只希望我的控制器操作代码中不是 id，而是“名称”）

例如 `/category_name/search_pattern_for_item_name` ，将在具有“category_name”名称的类别中查找名称类似于“search_pattern_for_item_name”的项目。

现在我想制作一个表单并将它与这条路线绑定，即在提交时我想被重定向到上面提到的路线......

我只知道如何写这个：

```
<%= form_tag({ :controller => "items", :action => "show" }, :method => "get") do %>
  <%= text_field_tag :id %>
  <%= hidden_field_tag :category_id, @category.name  %>
  <%= submit_tag "Filter" %>
<% end %> 
```

但这会导致`No route matches {:controller=>"items"}`错误，除非我将其放入与 ItemsController#show 操作对应的视图中。即使在后一种（成功）情况下，我也会在提交时获得 url（在搜索“it”时），而不是我所期望的：`http://localhost:3000/category1/item12?utf8=%E2%9C%93&id=it&category_id=category1&commit=Filter`

虽然我期待`http://localhost:3000/category1/it`

**如何为我的案例实施正确的表格或我做错了什么？**

我的路线.rb：

```
 resources :categories, path: '', only: [:index] do
    resources :items, path: '', only: [:index, :show]
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:54:16.717

```
<%= form_tag({ :controller => "items", :action => "show", 
        :id =>params[:id], :category_id =>params[:category_id] }, 
        :method => "get") do %> 
```

# mysql - 使用 SELECT 语句忽略重复的行

> ID：12615662
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:49:11.637
> 
> 标签：mysql, sql, join, data-modeling

我有一张如下表。

一张用于存放水果的桌子，一张用于存放水果的桌子。

```
create table fruits(fruit_id int, fruit_name VARCHAR(255));  
create table type(fruit_id int, status VARCHAR(255));

INSERT INTO fruits(fruit_id, fruit_name) 
            values(101, 'Apple'),
                  (102, 'Mango'),
                  (103, 'Lemon'),
                  (104, 'Grape'),
                  (105, 'Orange');

INSERT INTO type(fruit_id, status) 
          values(101, 'Edible');
                (101, 'Sweet'),
                (102, 'Edible'),
                (103, 'Edible'),
                (103, 'Salty'),
                (103, 'Sour'),
                (104, 'Sour'); 
```

现在我想要一个如下所示的输出

```
 Fruit_id    FruitName
    101       Apple
    102       Mango
    103       Lemon
    104       Grape 
```

我用过`INNER JOIN`，但苹果、柠檬和葡萄的重复行

```
SELECT fruits.* 
FROM fruits INNER JOIN type 
ON type.fruit_id = fruits.fruit_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:59:07.327

您可以使用[`DISTINCT`](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)忽略这样的重复行：

```
SELECT DISTINCT F.*
FROM fruits f
INNER JOIN type t ON F.Fruit_id = t.Fruit_id; 
```

# [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/e0738/23)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:53:18.107

```
select f.fruit_id,f.FruitName from 
fruits where fruit_id in(select distinct fruit_id from type) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T06:56:52.663

像你说的那样写 sql :-)

*“告诉我所有存在类型的水果”：*

```
select *
from fruits
where exists (
    select *
    from types 
    where types.fruit_id = fruits.fruit_id
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T06:59:45.420

```
SELECT f.fruit_id ,f.fruit_name 
FROM fruits f 
INNER JOIN type t ON f.fruit_id=t.fruit_id 
GROUP BY f.fruit_id,f.fruit_name 
```

或者

```
SELECT DISTINCT f.fruit_id ,f.fruit_name 
FROM fruits f 
INNER JOIN type t ON f.fruit_id=t.fruit_id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T07:00:10.587

您会得到重复的结果，因为在进行内部连接时，它会为您提供数据之间的对，因此 a`fruit`出现多次是正常的。

对于您所拥有的，也许可以`DISTINCT(fruits.*)`在`SELECT`语句中使用来解决您的问题。

希望这可以帮助。

# java - 关于 GWT base Url 的问题

> ID：12615663
> 
> 赞同：2
> 
> 时间：2012-09-27T06:49:15.393
> 
> 标签：java, gwt, deployment

假设我在[http://example.com/foo](http://example.com/foo)托管一个项目。我将所有 GWT 文件（编译后在 /war/ 目录中生成）放在[http://example.com/foo/GwtModule](http://example.com/foo/GwtModule)目录中。

然后在我的主机页面[http://example.com/foo/bar](http://example.com/foo/bar)上，我将以下内容放入 HTML 中：

`<script type="text/javascript" src="http://example.com/foo/GwtModule/GwtModule.noCache.js"></script>`.

我的问题是：

*   GWT 会知道从 foo/GwtModule 文件夹中获取其资源（例如 css 文件），而不是尝试从 foo/bar 文件夹中获取它们吗？

*   如果我想向 foo/signup 发送 HTTP 请求，是否可行，`GWT.getModuleBaseUrl() + "signup"`或者我是否必须解析基本 url，从中删除“/bar”并将其替换为“/signup”？

*   如果我在本地和 Web 服务器上运行代码，GWT 会自动确定基本 url 是`http://localhost/foo/bar`还是[http://example.com/foo/bar](http://example.com/foo/bar)，还是我需要在某处硬编码基本 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:46:27.340

> GWT 会知道从 foo/GwtModule 文件夹中获取其资源（例如 css 文件），而不是尝试从 foo/bar 文件夹中获取它们吗？

是的。GWT 总是从脚本 URL（或特殊的）
解析*模块库*`<meta name='gwt:property'>`

> 如果我想向 foo/signup 发送 HTTP 请求，GWT.getModuleBaseUrl() + "signup" 会起作用，还是我必须解析基本 url，从中删除 "/bar" 并用 "/signup" 替换它？

`GWT.getModuleBaseURL()`将`/foo/GwtModule/`。
您可以使用`GWT.getModuleBaseURL() + "/../signup"`或`"GWT.getHostPageBaseURL() + "/signup"`，在您的情况下，它们都将解析为相同的`/foo/signup`URL。

> 如果我在本地以及在 Web 服务器上运行代码，GWT 是否会自动确定基本 url 是`http://localhost/foo/bar`or `http://example.com/foo/bar`，还是我需要在某处硬编码基本 url？

请参阅第一个问题的答案。
这意味着您必须使用`<script src="GwtModule/GwtModule.nocache.js">`或`<script src="/foo/GwtModule/GwtModule.nocache.js">`在您的主机页面中。

# java - Hibernate 可以改变结构但保留数据吗？

> ID：12615664
> 
> 赞同：3
> 
> 时间：2012-09-27T06:49:17.690
> 
> 标签：java, hibernate, ddl

如果我将字段添加到类并设置

```
<property name="hbm2ddl.auto">update</property> 
```

Hibernate 会将字段添加到表中并保留表的数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T07:05:35.297

`<property name="hbm2ddl.auto">update</property>`：如果您要添加新列，这将更新您的数据库架构而不会丢失您的数据。但是，如果您更改任何现有列的定义，那么它可能会丢失数据。

# windows - 在 windows 中如何在 windows 7 的命令提示符下获取所有进程及其子进程信息

> ID：12615665
> 
> 赞同：20
> 
> 时间：2012-09-27T06:49:18.583
> 
> 标签：windows

在 windows 任务列表是命令，但如何在 windows 7 中列出正在运行的进程及其子进程

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-27T11:26:27.493

您可以使用以下方法获取具有 PID 和父 PID 的进程列表：

```
wmic process get Caption,ParentProcessId,ProcessId 
```

给定一个父 PID，您可以列出*直系*子项，例如：

```
wmic process where (ParentProcessId=2480) get Caption,ProcessId 
```

# c# - 通过类库调试 64 位应用程序

> ID：12615668
> 
> 赞同：0
> 
> 时间：2012-09-27T06:49:31.557
> 
> 标签：c#, visual-studio-2010

我在通过类型类库（C#）项目调试我的 64 位应用程序时遇到问题。以下是步骤：

1.  我有一个类库项目。
2.  调试设置中的“启动外部程序”设置为 64 位应用程序。
3.  按 F5 启动应用程序
4.  断点没有被击中。

如果我手动启动应用程序，然后通过附加将我的项目附加到进程，那么一切正常。

任何解决它的提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:05:52.093

好的问题是不同的。实际上应用程序的目标框架是框架4.0。我的类库项目是基于 3.5 的。将其更改为 4.0 解决了该问题。

# jqgrid - 如何自定义 jqgrid 搜索对话框

> ID：12615671
> 
> 赞同：0
> 
> 时间：2012-09-27T06:49:43.570
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-php, jqgrid-formatter

我是 jqGrid 的初学者。我有4个字段、、、`Id`和。我希望当用户单击图标搜索并在选择要搜索的项目时出现搜索框现在出现一个文本框供用户输入您的日期，但我希望出现两个文本框供用户输入，喜欢这个表格 请帮助我。谢谢大家`Name``Date``Age``Date``FromDate``ToDate`![在此处输入图像描述](../Images/9aecd9a475e552f519832a7675f1e4ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:14:14.697

用户 beforeShowForm 事件并像这样添加任何你想要的东西..

```
beforeShowForm: function (form) {

            $("#Location").empty();
            $("#Location").append("<option value='0'>--Select--</option>");
            $("#Area").empty();
            $("#Area").append("<option value='0'>--Select--</option>");
        } 
```

# ios - 来自 Apple App Store 的 EXC_BREAKPOINT (SIGTRAP) 崩溃报告。

> ID：12615677
> 
> 赞同：1
> 
> 时间：2012-09-27T06:50:02.000
> 
> 标签：ios, crash, store

以下崩溃报告来自 Apple App Store。
1.EXC_BREAKPOINT(SIGTRAP)是什么意思？有人在商店里为我的应用设置断点吗？令人困惑。
2.在谷歌搜索，有些人解释说这种崩溃与您的应用程序中的块使用有关，但这款手机的操作系统是v5.1> 4.0，应该支持块。

有任何想法或讨论请告诉我，谢谢。

```
Incident Identifier: 93450CAC-9D03-4222-9856-99425F2FFAF7
Hardware Model:      iPhone3,3
Process:         NavigatorFree [9192]
Path:            /var/mobile/Applications/C2340283-ADE0-4737-8D15-    2D3E7FF11414/NavigatorFree.app/NavigatorFree
Identifier:      NavigatorFree
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-09-14 18:26:25.944 -0400
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0x0000defe
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libGPUSupportMercury.dylib      0x321b1094 gpus_ReturnNotPermittedKillClient + 0
1   libGPUSupportMercury.dylib      0x321b10ae gpus_KillClient
2   libGPUSupportMercury.dylib      0x321b15ba gpusSubmitDMABuffers
3   IMGSGX535GLDriver               0x361b99b8 SubmitPacketsIfAny
4   IMGSGX535GLDriver               0x361b9ad0 glrFlushContextToken
5   GLEngine                        0x3776dc4a gliPresentViewES
6   OpenGLES                        0x380686b4 -[EAGLContext presentRenderbuffer:]
7   NavigatorFree                   0x0004a8aa -[OGLViewController touchesBegan:] (OGLViewController.m:290)
8   QuartzCore                      0x34b8b868 CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long)
9   QuartzCore                      0x34b8b7be CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*)
10  IOMobileFramebuffer             0x311b3ffa IOMobileFramebufferVsyncNotifyFunc
11  IOKit                           0x3537b606 IODispatchCalloutFromCFMessage
12  CoreFoundation                  0x338a8f0c __CFMachPortPerform
13  CoreFoundation                  0x338b351c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__
14  CoreFoundation                  0x338b34be __CFRunLoopDoSource1
15  CoreFoundation                  0x338b230c __CFRunLoopRun + 1364
16  CoreFoundation                  0x3383549e CFRunLoopRunSpecific
17  CoreFoundation                  0x33835366 CFRunLoopRunInMode
18  GraphicsServices                0x36be9432 GSEventRunModal
19  UIKit                           0x32ba2e76 UIApplicationMain
20  NavigatorFree                   0x00077a4a -[TnMaitaiAgent directionsFrom:To:] (TnMaitaiAgent.m:48)
21  NavigatorFree                   0x00003670 __48+[TnInAppPurchaseAgent sharedInAppPurchaseAgent]_block_invoke_0 (TnInAppPurchaseAgent.m:26) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:06:52.443

根本原因是OpenGL引擎仍然保持更新，即使它的顶视图不可见，ios不允许它。

# c++ - 从 C 文件调用 C++ 函数

> ID：12615683
> 
> 赞同：12
> 
> 时间：2012-09-27T06:50:18.440
> 
> 标签：c++, c, merge, call

我对 C 和 C++ 很陌生。但是我有一些 C++ 函数需要从 C 中调用它们。我举了一个例子来说明我需要做什么

* * *

*主.c*：

```
#include "example.h"      
#include <stdio.h>

int main(){   
    helloWorld();
    return 0;
} 
```

* * *

*例子.h*：

```
 #ifndef HEADER_FILE
 #define HEADER_FILE

 #ifdef __cplusplus
     extern "C" {
 #endif
         void helloWorld();
 #ifdef __cplusplus
     }
 #endif

 #endif 
```

* * *

*示例.cpp*：

```
#include <iostream.h>

void helloWorld(){
    printf("hello from CPP");
} 
```

* * *

它只是行不通。我仍然`_helloWorld`在我的`main.c`. 问题出在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T06:53:08.263

简短的回答：

`example.cpp`应包括`example.h`.

更长的答案：

当您在 C++ 中声明一个函数时，它具有 C++ 链接和调用约定。（实际上，最重要的特性是[名称修饰——C](http://en.wikipedia.org/wiki/Name_mangling) ++ 编译器更改符号名称的过程，以便您可以拥有具有相同名称但参数类型不同的函数。） `extern "C"`（出现在您的头文件中）是你的方式 - 它指定这是一个 C 函数，可从 C 代码调用，例如。没有损坏。

你有`extern "C"`你的头文件，这是一个好的开始，但是你的 C++ 文件没有包含它并且没有`extern "C"`在声明中，所以它不知道将它编译为 C 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T07:00:47.973

`extern "C"`告诉 C++ 声明的函数必须使用 C ABI（应用程序二进制接口），因此，无论语言是 C 还是 C++，你总是`void HelloWorld()`在外部看到它是 C。

但是您在 cpp 文件中实现了它，就像它是 C++ 文件一样，C 不知道。

您必须使`HelloWorld`C 和 C++ 的原型保持一致，因此 cpp 文件应将其声明为`extern "C" void Helloworld() { /*your code here*/ }`，或者简单地说，来自 example.cpp 的 #include "example.h"，以便在实现它之前，编译器已经知道它必须遵循 C 约定。

# objective-c - iOS - 使用导航工具栏按钮的 TableView 显示 UIPopoverController

> ID：12615685
> 
> 赞同：1
> 
> 时间：2012-09-27T06:50:20.063
> 
> 标签：objective-c, ios, xcode, ipad

当用户点击我的 NavigationController 提供的下部工具栏上的按钮时，我想在我的 iPad 应用程序中显示一个 UIPopoverController。有没有关于如何做到这一点的教程？我发现的只是 2010 年的古老教程。

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T07:22:44.707

```
-(IBAction)ButtunClickMethod:(id)sender{
 //create the table view controller from nib
        self.tblLisView = [[[tableListVC alloc] 
                                        initWithNibName:@"tableListVC" 
                                        bundle:[NSBundle mainBundle]] autorelease];

        //set popover content size
        tblLisView.contentSizeForViewInPopover = CGSizeMake(170, 170);

        //create a popover controller
        self.popoverController = [[[UIPopoverController alloc]
                                   initWithContentViewController:tblLisView] autorelease];

        //present the popover view non-modal with a
        //refrence to the button pressed within the current view
        [self.popoverController presentPopoverFromRect:popoverButton.frame
                                                inView:self.view
                              permittedArrowDirections:UIPopoverArrowDirectionDown
                                              animated:YES];
} 
```

# ubuntu - 星号安装

> ID：12615688
> 
> 赞同：0
> 
> 时间：2012-09-27T06:50:38.890
> 
> 标签：ubuntu, asterisk

在为 vicidial 安装星号时 make install 它显示此错误：

* * *

现有的 menuselect.makeopts 文件未指定
不应包含“res_crypto”。
但是，未找到此模块的某些依赖项或
存在冲突。

运行“make menuselect”或删除现有的
menuselect.makeopts 文件来解决此问题。

* * *

如何解决这个无法从 make menuselect 中取消选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:39:10.640

确保您已经安装了 vicidial 安装文档中提到的所有 Asterisk 依赖项

# python - django自动缓存查询集的细节和条件是什么

> ID：12615689
> 
> 赞同：0
> 
> 时间：2012-09-27T06:50:42.367
> 
> 标签：python, django, caching, django-queryset

Django 在他们的文档中声明所有查询集都会自动缓存，[https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)。但他们对这个功能的细节并不是特别具体。

他们给出的示例是将 qs 保存在 python 变量中，第一个之后的后续调用将从缓存中获取。

> > > queryset = Entry.objects.all()
> > > print([p.headline for p in queryset]) # 评估查询集。
> > > print([p.pub_date for p in queryset]) # 重用评估中的缓存。

因此，即使在用户加载视图时随后在没有变量的情况下进行了两次精确的查询集调用，结果是否不会被缓存？

```
# When the user loads the homepage, call number one (not cached)
def home(request):    
    entries = Entry.objects.filter(something)
    return render_to_response(...)

# Call number two, is this cached automatically? Or do I need to import cache and
# manually do it? This is the same method as above, called twice
def home(request):    
    entries = Entry.objects.filter(something)
    return render_to_response(...) 
```

抱歉，如果这令人困惑，我将方法粘贴了两次，以使用户看起来像是两次调用它，它只是一种方法。条目是否自动缓存？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:11:02.693

它没有被缓存有两个原因：

*   当您使用 just`filter`但不“循环”结果时，尚未评估查询集，这意味着缓存仍然是空的。
*   即使它们会被评估，它也不会被缓存，因为当您第二次调用该函数时，查询集被重新创建（新的局部变量），即使您在第一次调用该函数时就已经创建了它。第二个函数调用根本不“知道”你之前做了什么。它只是一个新的查询集实例。在这种情况下，您可能会依赖数据库缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:15:48.693

您给出的`queryset`示例正确地表明它们`querysets`是懒惰的，即第一次使用它们。因此，当随后再次使用时，它们在分配给变量时不会在同一流程中进行评估。这并不完全是缓存，而是重新使用评估的表达式，只要它以优化的方式可用。

对于您正在查看的缓存类型，即两次调用相同的视图，您需要在第一次获取数据库对象时手动缓存它。[Memcached](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#memcached)对此很有用。然后随后检查并获取，如下例所示。

```
def view(request):
    results = cache.get(request.user.id)
    if not results:
        results = do_a_ton_of_work()
        cache.set(request.user.id, results) 
```

当然，从代理服务器到每个 url 缓存，还有很多其他方法可以在不同级别进行缓存。什么最适合你。[这](http://www.jeffknupp.com/blog/2012/02/24/django-memcached-optimizing-django-through-caching/)是关于这个主题的好读物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:58:40.610

Memcached 是内置模块，它工作得很好，但即使你可以尝试“johnny cache”以获得更好的结果。

你可以在这里获得更多信息

[http://packages.python.org/johnny-cache/](http://packages.python.org/johnny-cache/)

# validation - 验证不适用于 Joomla 注册表单

> ID：12615691
> 
> 赞同：0
> 
> 时间：2012-09-27T06:50:50.887
> 
> 标签：validation, joomla1.5, user-registration

我有版本 1.5.23 的 joomla 网站。我是 joomla 和 php 的新手，但在现有站点中，我正在尝试添加“注册邮件列表”功能。为此，我添加了：

```
<a href="index.php?option=com_user&view=register" class="jregister">
Sign up for our Mailing List</a> 
```

在我的`index.php`页面中。由于上面的代码，我在页​​面右侧得到了面板。单击该链接时，将显示一个注册表单，单击注册按钮验证不起作用。但是，如果我输入正确的信息，那么我会收到带有确认电子邮件的成功注册消息。

请说明为什么对姓名、密码、电子邮件的验证不起作用。我确信这是某个地方的一个非常简单的错误，但我担心它超出了我的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:24:37.730

joomla 中的注册表单是一个连接到登录模块和登录表单的 joomla 组件。您应该“自己”在此路径中为注册表单编写验证码：

```
JOOMLAROOT/component/com_user/views/register/tmpl/default.php 
```

# cx-freeze - 运行包抛出 ImportError: No module named image

> ID：12615693
> 
> 赞同：7
> 
> 时间：2012-09-27T06:50:58.110
> 
> 标签：cx-freeze

`cx_freeze`在 ubuntu 12.04 下使用。包的生成没有任何错误，但是当我尝试作为独立的包运行时，我收到以下错误：

```
 Traceback (most recent call last):
    File "/usr/local/lib/python2.7/dist-packages/cx_Freeze/initscripts /Console.py",
    line 27, in <module>
    exec code in m.__dict__
     m m   File "Setup_cx_freeze.py", line 3, in <module>
     File "/usr/local/lib/python2.7/dist-packages/cx_Freeze/__init__.py",
     line 4, in <module>
     from cx_Freeze.dist import *
     File "/usr/local/lib/python2.7/dist-packages/cx_Freeze/dist.py",
     line 3, in <module>
     import distutils.command.install
      File "/usr/lib/python2.7/distutils/command/install.py", line 21,   in          <module>
      from site import USER_BASE
      File "/usr/lib/python2.7/site.py", line 562, in <module>
      main()
      File "/usr/lib/python2.7/site.py", line 540, in main
      abs__file__()
      File "/usr/lib/python2.7/site.py", line 100, in abs__file__
     m.__file__ = os.path.abspath(m.__file__)
     File "/usr/lib/python2.7/email/__init__.py", line 79, in __getattr__
      __import__(self.__name__)
      ImportError: No module named image 
```

我认为重点是最后一句话。`"ImportError: No module named image."`

应用程序在纯 python 环境中运行没有任何问题那么为什么在将其作为“冻结”包运行时会出现错误？生成冻结包时以某种方式引入了故障。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-30T08:46:38.807

我最终通过在 setup.py 脚本构建 exe 选项中明确包含包“email.mime”来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-06T00:49:20.653

缺少“图像”只是问题的第一部分。尝试将此添加到您的代码中：

```
from email.mime.image import MIMEImage
from email.mime.audio import MIMEAudio
from email.mime.message import MIMEMessage 
```

这解决了“图像”、“音频”和“消息”的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-30T16:09:47.823

通过安装 Python Imaging Library 解决了这个问题：http: [//www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

1)`python setup.py build`

2)`sudo python setup.py install`

# vb.net - 错误地使用 IIF

> ID：12615695
> 
> 赞同：1
> 
> 时间：2012-09-27T06:51:06.533
> 
> 标签：vb.net

按钮的宽度是 123。为什么下面的不改变它的宽度

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    With Me.Button3
        IIf(.Width = 123, .Width = 233, .Width = 150)
    End With
End Sub 
```

IIF 是否只返回一个值？即如果我想设置按钮的宽度属性，那么我需要使用If 结构吗？

[**在MSDN**](http://msdn.microsoft.com/en-us/library/27ydhh0d%28v=vs.71%29.aspx)中很少提及 Iif[](http://msdn.microsoft.com/en-us/library/27ydhh0d%28v=vs.71%29.aspx)

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:54:09.393

您的代码测试`.Width = 123`，然后返回布尔表达式`.Width = 233`，如果为真或`.Width = 150`假，则将结果丢弃。这不是你想要的。你有三个选择：

```
' IIf function - not recommended since it is not typesafe and evaluates all arguments.
.Width = IIf(.Width = 123, 233, 150)

' If operator - typesafe and only evaluates arguments as necessary.
.Width = If(.Width = 123, 233, 150)

' If statement - not an expression.
If .Width = 123 Then .Width = 233 Else .Width = 150 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:55:05.797

使用 VB.NEt 的 If() 语句。它被称为“条件运算符”并且存在于多种语言中。IIf 是一个特定于 VB 的函数，具有不同的行为。此处的更多信息： [IIf() 和 If 之间的性能差异](https://stackoverflow.com/questions/28377/iif-vs-if)

在这两种情况下， IIf 和 If 只返回一个值（IIF 没有类型；它是一个必须强制转换的对象）。无论如何，它似乎做了你想做的事情：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Button3.Width = If(Button3.Width = 123, 233, 150)
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:04:31.283

> IIF 是否只返回一个值？

是的。

> 即如果我想设置按钮的宽度属性，那么我需要使用If 结构吗？

不，因为您可以将返回值分配给`Width`属性：

```
With Me.Button3 
    .Width = IIf(.Width = 123, 233, 150) 
End With 
```

请注意，在当前版本的 VB.NET 中，应使用[If 运算符](http://msdn.microsoft.com/en-us/library/bb513985.aspx)而不是 Iif，因为它具有多种优点（类型安全、短路等）。例如， using`If(...)`将允许您的代码在没有额外转换的情况下编译，即使您有`Option Strict On`（您应该这样做）。

```
With Me.Button3 
    .Width = If(.Width = 123, 233, 150) 
End With 
```**

# java - java socket下载图片

> ID：12615701
> 
> 赞同：-2
> 
> 时间：2012-09-27T06:51:32.623
> 
> 标签：java, sockets, binary

我做了一些研究，还检查了stackoverflow的答案。但是我只是无法正确获取我的代码，请帮助。代码可以运行，但我无法获取图像，它显示 0kb。

```
Socket socket = new Socket(addr, port);  

byte [] buffer = new byte[1024];

PrintWriter writer = new PrintWriter(socket.getOutputStream(), true);

writer.println("GET " + url.getFile() + " HTTP/1.0\r\n");
writer.println("HOST:" + url.getHost() + "\r\n");
writer.println("\r\n");

DataInputStream in = new DataInputStream(socket.getInputStream());
ByteArrayOutputStream out = new ByteArrayOutputStream();

int n = 0;
while (-1!=(n=in.read(buffer)))
{
     out.write(buffer, 0, n);
}
out.close();
in.close();
byte[] response = out.toByteArray();
FileOutputStream fos = new FileOutputStream("0.jpeg");
fos.write(response);
fos.close();
}catch (Exception e){
     System.out.println(e.toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:02:41.403

使用原始套接字执行 HTTP GET 比必要的复杂得多。我推荐使用像 Apache 那样的 HTTP 客户端，或者你可以使用 java.net.URLConnection。请参阅[如何在 Java 中执行 HTTP GET？](https://stackoverflow.com/questions/1485708/how-do-i-do-a-http-get-in-java)或[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:08:13.727

您的代码没有任何明显的缺陷。如果你得到一个零长度的文件，那是因为你没有发送任何东西。

顺便说一句，您不需要`ByteArrayOutputStream.`您可以将阅读的所有内容直接写入`FileOutputStream.`节省时间和空间。

# objective-c - 是否可以从其属性访问父对象？

> ID：12615711
> 
> 赞同：0
> 
> 时间：2012-09-27T06:52:15.583
> 
> 标签：objective-c

是否可以从其属性访问父对象？

在这个简单的应用程序中，我有一个响应按键事件的窗口。我希望名为“window”的属性对象在事件发生时将其父对象“AppDelegate”变量“upKeyPressed”设置为一个值。有没有可能？

AppDelegate.h：

```
@interface MyWindow : NSWindow
@end

@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    BOOL upKeyPressed;
}
@property (assign) IBOutlet MyWindow *window;
@end 
```

AppDelegate.m 文件：

```
@implementation MyWindow

- (void)moveUp:(id)sender
{
    // here I want to set upKeyPressed value to YES with a kind of:
    self.parentObject->upKeyPressed = YES; // *** fantasy command
}

@end

@implementation AppDelegate
...
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:00:33.137

不，在财产方面没有父母的概念。您想要做的是添加`@property (assign) AppDelegate *parentObject;`（您可以随意称呼它）到您的`MyWindow`类的界面。然后在你的实现中综合它。

要使其正常工作，您还需要将其设置为指向您的应用程序委托 - 在您的`-applicationDidFinishLaunchingWithOptions:`add`self.window.parentObject = self;`中。然后要从您的实例访问所谓的“父”对象`MyWindow`，只需使用`self.parentObject`.

编辑：您需要`AppDelegate`通过`@class AppDelegate;`在您的接口定义之前放置`MyWindow`.

# java - OpenCV Android 上的静态初始化

> ID：12615712
> 
> 赞同：22
> 
> 时间：2012-09-27T06:52:16.937
> 
> 标签：java, android, opencv, static, initialization

我正在尝试运行`OpenCV`教程 1 - 使用[它](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)
添加具有静态初始化的 OpenCV 我不想安装单独的 OpenCV 管理器应用程序）但我得到一个`"OpenCV error: Cannot load info library for OpenCV."`

我做了以下事情：

1.  添加了一个 libs 文件夹，其中包含`armeabi`、`armeabi-v7a`和`x86`文件夹（来自 OpenCV-2.4.2-android-sdk/sdk/native/libs/）

2.  `{if (!OpenCVLoader.initDebug())}`在私有 Sample1View mView 下方添加了静态代码；

3.  删除了以下代码

> if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack))

似乎是什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T09:27:17.717

您应该添加代码：

```
mOpenCVCallBack.onManagerConnected(LoaderCallbackInterface.SUCCESS); 
```

后：

```
if(!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack)) 
```

如果您删除：

```
if(!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_2, this, mOpenCVCallBack)) 
```

代码块然后没有人打电话。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-08T13:19:06.213

我有同样的问题，我通过在我的 Activity 类的第一个添加以下代码解决了这个问题：

```
static {
    if (!OpenCVLoader.initDebug()) {
        // Handle initialization error
    }
} 
```

我还添加了

```
mLoaderCallback.onManagerConnected(LoaderCallbackInterface.SUCCESS); 
```

行前

```
OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback); 
```

并评论了这一行

```
OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T09:42:38.660

日志消息：

```
"OpenCV error: Cannot load info library for OpenCV." 
```

不用担心你。至少在我的应用程序中，它告诉我类似 OpenCV libs init 之后就可以了。

在示例代码中，当调用 BaseLoaderCallback 时，CameraBridgeViewBase 对象被启用。当 opencv 库的异步加载完成时会发生这种情况。当您静态加载库时，尝试在 onResume() 方法中添加对 mOpenCVCameraView.enableView() 的调用（在加载当然库之后）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T06:17:55.303

initAsync() 需要一个回调来加载 opencv 库和您的 jni 库。

检查回调函数并使其在 if (!OpenCVLoader.initDebug()) 中正确，而不是在回调中！

```
 if (!OpenCVLoader.initDebug()) {
            // Handle initialization error
              Log.i(TAG, "OpenCV load not successfully");
        } else {
            System.loadLibrary("mixed_sample");
            //System.loadLibrary("my_jni_lib2");

            InitFeature(width,height);

            mOpenCvCameraView.enableView();
        } 
```

它适用于 OCV4Android2.4.5 中的教程 2。

# java - 操作系统级事件处理？

> ID：12615714
> 
> 赞同：0
> 
> 时间：2012-09-27T06:52:17.877
> 
> 标签：java, java-native-interface

我想在 java 中处理操作系统级别的事件。我需要做的是在按键上执行一些逻辑。我发现 jni 用于此目的，但不知道如何。我不需要处理 gui 上的事件。我的应用程序将在后台运行并在每次按键时执行一些逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:19:39.593

如果您认为使用 GUI 太过分了，我不会考虑使用 JNI，因为 JNI 会困难 10 倍。即使你对 C 有信心，它也可能很棘手。

你最好使用一个库来做你想要的，比如[http://jline.sourceforge.net/](http://jline.sourceforge.net/)

# php - Javascript 验证表单提交

> ID：12615716
> 
> 赞同：0
> 
> 时间：2012-09-27T06:52:20.153
> 
> 标签：php, javascript, html

嗨，我想在提交表单之前验证字段值这是我的代码

```
<table width="600" border="0" align="left">
<tr>
<script type="text/javascript">
function previewPrint()
{

var RegNumber = document.getElementById('PP_RegNoTextBox').value;
var PassportNo = document.getElementById('PP_PassportNoTextBox').value;
if (RegNumber=="")
{
    alert("Please enter your Reg No.!");
    document.getElementById('RegNoTextBox').focus();
    return false;
}
if (PassportNo=="")
{
    alert("Please enter your Passport No.!");
    document.getElementById('PassportNoTextBox').focus();
    return false;
}
    //window.open('regformview.php?RegNumber=RegNumber');
    }
    </script>
<form name="ppform" onSubmit="return previewPrint();" method="post" action="regformview.php">   
<td width="100" align="LEFT" class="font8">&nbsp; </td>
<td width="337" align="LEFT" class="font8"><u>Preview your Application:</u> Please provide requested details.<br>
  Reg No.: <input type="text" name="printregno" id="PP_RegNoTextBox" class="input2"> Passport No.:  <input type="text" name="printemail" class="input2"><input type="hidden" name="flagging" id="PP_PassportNoTextBox" value="1" class="input2">&nbsp;</td>
<td width="50" align="LEFT" class="font8"><div style="float:left; background-image:url(images/printPreview1.jpg); background-repeat:no-repeat;">   
  <input type="image" src="images/printPreview1.jpg" name="ppbutton" value="" onMouseOver="this.src='images/printPreview2.jpg'" onMouseOut="this.src='images/printPreview1.jpg'"></div></td>

</form>
   </tr>
</table> 
```

问题是它是否正确显示警报框，如果它为空白但页面在提交后导航到 regformview.php。如何仅在验证后导航到 regformview.php。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T06:54:41.413

这些是未定义的：

```
document.getElementById('RegNoTextBox').focus();
document.getElementById('PassportNoTextBox').focus(); 
```

它应该是：

```
document.getElementById('PP_RegNoTextBox').focus();
document.getElementById('PP_PassportNoTextBox').focus(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T06:57:35.990

一切都很好，除了你的脚本中有错误，即使验证失败也让你提交。

**更改以下几行**

```
 document.getElementById('PassportNoTextBox').focus(); 
```

和

```
document.getElementById('RegNoTextBox').focus(); 
```

**作为**

```
 document.getElementById('PP_PassportNoTextBox').focus(); 
```

和

```
 document.getElementById('PP_RegNoTextBox').focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:00:02.123

试试这个应该可以的。

```
onSubmit="previewPrint();return false;" 
```

# android - android中的setBackgroundColor

> ID：12615720
> 
> 赞同：7
> 
> 时间：2012-09-27T06:52:49.077
> 
> 标签：android, android-layout, layout, android-button

![在此处输入图像描述](../Images/6509b2ad132095299844ad7dbf45893d.png)

在这个简单的游戏中，我想更改我按下的按钮的背景颜色。但是我得到以下结果，按钮外观变得不好（形状变得不同）：

```
pressedButton.setBackgroundColor(Color.RED); 
```

有没有更好的方法来做到这一点？谢谢。

[编辑：我的完整代码]

```
package com.example.xo_game;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    Button[] btns;
    char[][] gameState = new char[3][3];
    char turn = 'X';

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button[] btns = new Button[9];

        btns[0] = (Button) findViewById(R.id.btn1);
        btns[1] = (Button) findViewById(R.id.btn2);
        btns[2] = (Button) findViewById(R.id.btn3);

        btns[3] = (Button) findViewById(R.id.btn4);
        btns[4] = (Button) findViewById(R.id.btn5);
        btns[5] = (Button) findViewById(R.id.btn6);

        btns[6] = (Button) findViewById(R.id.btn7);
        btns[7] = (Button) findViewById(R.id.btn8);
        btns[8] = (Button) findViewById(R.id.btn9);

        for (int i = 0; i < 9; i++) {
            btns[i].setTag(i);
            btns[i].setOnClickListener(clickListener);
            gameState[i / 3][i % 3] = 'E';
        }
    }

    View.OnClickListener clickListener = new View.OnClickListener() {

        public void onClick(View v) {
            Button pressedButton = (Button) v;

            int indexOfPressedButton = Integer.parseInt(pressedButton.getTag()
                    .toString());

            int row = indexOfPressedButton / 3;
            int col = indexOfPressedButton % 3;

            if (gameState[row][col] != 'E')
                return;

            gameState[row][col] = turn;

            String turnAsString = String.valueOf(turn);

            pressedButton.setText(turnAsString);

            if (turn == 'X') {
                pressedButton.setBackgroundColor(Color.RED);
                turn = 'O';
            } else {
                pressedButton.setBackgroundColor(Color.GREEN);
                turn = 'X';
            }
        }
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T07:00:43.063

```
pressedButton.getBackground().setColorFilter(Color.RED, PorterDuff.Mode.MULTIPLY); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T07:03:41.440

在可绘制文件夹中创建任何名称的选择器文件，例如 button_selector.xml

**用渐变编辑**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <gradient android:startColor="#ad1c1c" android:endColor="#cc3737" android:angle="90"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#7d0000"/>
        </shape>
    </item>
    <item android:state_pressed="false">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <gradient android:startColor="#cfcfcf" android:endColor="#ebebeb" android:angle="90"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#8f8f8f"/>
        </shape>
    </item>
</selector> 
```

然后在按钮背景中设置

```
<Button
    android:background="@drawable/button_selector"
/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:12:52.033

正如@pratik 所说，将此**button.xml**保存在可绘制文件夹中

**按钮.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <solid android:color="#f00"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#222"/>
        </shape>
    </item>
    <item android:state_pressed="false">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <solid android:color="#f1f1f1"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#222"/>
        </shape>
    </item>
</selector> 
```

将此按钮应用为背景

```
<Button
    android:background="@drawable/button"/> 
```

在你的类文件中这样做

```
public void onClick(View v) {

  pressedButton.setPressed(true);
} 
```

这样红色才会稳定

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:00:53.903

试试这个 ：

你已经在 ImageButton xml 中创建了这样的

使用这样的按钮图像创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
android:state_pressed="true" 
android:drawable="@drawable/backbutton" />
<item 
android:drawable="@drawable/closebutton" />
</selector> 
```

将该 xml 文件添加为 IMageButton 的背景

```
<ImageButton                 
android:layout_height="50px" 
android:layout_width="50px" 
android:id="@+id/settings" 
android:background="@drawable/settings_button" //setting_button in
                                                     the xml file            
android:text="Settings"/> 
```

# php - 在 php 中使用 curl 概念获取内部文本

> ID：12615733
> 
> 赞同：1
> 
> 时间：2012-09-27T06:53:18.077
> 
> 标签：php, simple-html-dom

这是网站中的html文本，我要抓取

> 1,000 个死前必看的地方

```
<ul class="listings">
<li>
<a href="http://watchseries.eu/serie/1,000_places_to_see_before_you_die" title="1,000 Places To See Before You Die">
1,000 Places To See Before You Die
<span class="epnum">2009</span>
</a>
</li> 
```

我使用了这样的代码

```
foreach($html->find('ul.listings li a') as $e)
echo $e->innertext. '<br/>'; 
```

我得到的输出就像

```
 999: Whats Your Emergency<span class="epnum">2012</span> 
```

包括跨度请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T07:09:58.527

为什么不`DOMDocument`获取标题属性？：

```
$string = '<ul class="listings">
<li>
<a href="http://watchseries.eu/serie/1,000_places_to_see_before_you_die" title="1,000 Places To See Before You Die">
1,000 Places To See Before You Die
<span class="epnum">2009</span>
</a>
</li>';

$dom = new DOMDocument;
$dom->loadHTML($string);
$xpath = new DOMXPath($dom);
$text = $xpath->query('//ul[@class="listings"]/li/a/@title')->item(0)->nodeValue;
echo $text; 
```

或者

```
$text = explode("\n", trim($xpath->query('//ul[@class="listings"]/li/a')->item(0)->nodeValue));
echo $text[0]; 
```

[键盘示例](http://codepad.org/c94U41mf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:12:51.673

我可以想到两种方法来解决这个问题。一，是您从锚标签中获取标题属性。当然，并不是每个人都为锚标签设置了标题属性，如果他们想这样填充，属性的值可能会有所不同。另一种解决方案是，您获取`innertext`属性，然后将锚标记的每个子标记替换为空值。

所以，要么这样做

```
$e->title; 
```

或这个

```
$text = $e->innertext;
foreach ($e->children() as $child)
{
    $text = str_replace($child, '', $text);
} 
```

不过，为此使用它可能是一个好主意[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:58:49.180

你可以使用`strip_tags()`它

```
echo trim(strip_tags($e->innertext)); 
```

或者尝试使用`preg_replace()`删除不需要的标签及其内容

```
echo preg_replace('/<span[^>]*>([\s\S]*?)<\/span[^>]*>/', '', $e->innertext); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T07:06:07.067

首先检查你的html。现在就像

```
 $string = '<ul class="listings">
               <li>
                  <a href="http://watchseries.eu/serie/1,000_places_to_see_before_you_die" title="1,000 Places To See Before You Die">
 1,000 Places To See Before You Die
                    <span class="epnum">2009</span>
                 </a>
             </li>'; 
```

ul 没有关闭标签，也许你错过了。

```
 $string = '<ul class="listings">
               <li>
                  <a href="http://watchseries.eu/serie/1,000_places_to_see_before_you_die" title="1,000 Places To See Before You Die">
 1,000 Places To See Before You Die
                    <span class="epnum">2009</span>
                 </a>
             </li>
            </ul>'; 
```

像这样试试

```
 $xml = simplexml_load_string($string);
 echo $xml->li->a['title']; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T07:07:13.153

改为使用`plaintext`。

```
echo $e->plaintext; 
```

但是仍然会出现年份，您可以使用正则表达式对其进行修剪。

[此处](http://simplehtmldom.sourceforge.net/manual.htm)文档中的示例：

```
$html = str_get_html("<div>foo <b>bar</b></div>");
$e = $html->find("div", 0);

echo $e->tag; // Returns: " div"
echo $e->outertext; // Returns: " <div>foo <b>bar</b></div>"
echo $e->innertext; // Returns: " foo <b>bar</b>"
echo $e->plaintext; // Returns: " foo bar" 
```

# actionscript-3 - 如何在flex中反序列化数组集合

> ID：12615737
> 
> 赞同：0
> 
> 时间：2012-09-27T06:53:31.713
> 
> 标签：actionscript-3, apache-flex, serialization, amf

我遇到了一个问题：我将数组集合序列化为文件，数组集合有两种类型的项目，图像和类对象。它序列化成功，但是当我反序列化它时，它只是返回对象的数组集合，我发现我自己无法将这些对象转换为图像和类对象（这个类是我自己定义的，有三个成员，两个图像和一个形状）。

我正在添加我使用的代码：

```
[Bindable] var objcnvs:ClassCanvas;
        protected function btnSave_clickHandler(event:MouseEvent):void
        {
            //for saving  data serializaion

            var arrAllSave:ArrayCollection = new ArrayCollection();
            for(var i:int = 0;i<arrAll.length; i++)
            {
                try
                {
                    var tempCon:ConnectImage = arrAll[i];
                    arrAllSave.addItem({item:arrAll[i], type:"ConnectImage" });                             
                }
                catch(er:Error)
                {
                    var tempImage:Image = arrAll[i];
                    var objImage:ClassImage = new ClassImage(arrAll[i]);
                    arrAllSave.addItem({item:objImage, type:"Image" });                 
                }
            }

            // First, generate your ByteArray from the VO.
            var byteArray : ByteArray = new ByteArray();

            byteArray.writeObject( arrAll );

            // Resolve your file location.
            //var file : File = File.applicationStorageDirectory.resolvePath( "testFile.ri" );

            var mapName:String = txtMapTitle.text;

            var file : File = File.applicationStorageDirectory.resolvePath( 'Saved Maps/'+mapName+'.imm' );
            if(file.exists == true)
            {
                lblWarn.text = "Map already Exists. Please enter Defferent Map Title";  
            }
            else if(mapName == "")
            {
                lblWarn.text = "Please enter a title for Map.";
            }
            else
            {                       
                var fileStream:FileStream = new FileStream();
                // Save the file to the given location.
                fileStream.open(file, FileMode.WRITE);
                fileStream.writeBytes( byteArray );
                fileStream.close();

                lblWarn.text = "Map Saved successfully";
            }           

        }

        protected function btnLoadMap_clickHandler(event:MouseEvent):void
        {           

            // Execute the file load.
            var loadFileName:String = "t1"; 
            var request : URLRequest = new URLRequest ( "app-storage:/"+"Saved Maps/"+loadFileName+".imm" );
            var receptor : URLLoader = new URLLoader( request );

            // Make sure our content is interpreted as a ByteArray.
            receptor.dataFormat = URLLoaderDataFormat.BINARY;
            receptor.addEventListener( Event.COMPLETE, fileLoadedHandler );

        }
        private function fileLoadedHandler ( event : Event ) : void
        {
            // Retrieve the event target, cast as the URLLoader we just created
            var loader : URLLoader = event.target as URLLoader;

            // Retrieve the loaded data. We know it's a ByteArray, so let's cast it as well.
            var data : ByteArray = loader.data as ByteArray;

            // Use the ByteArray.readObject method to reconstruct the object.
            var obj : Object = data.readObject();

            // Cast the object and assign it to our data container.

            var loadArrAll:ArrayCollection = obj as ArrayCollection;

        } 
```

最后一行

```
var loadArrAll:ArrayCollection = obj as ArrayCollection; 
```

这就是问题所在。我得到了数组集合，但它只有一个对象列表，没有图像，也没有我的类对象（虽然这些都在那里，但是当我序列化它时，我发现无法将这个数组集合转换为以前的形式。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:20:04.590

Zain，你必须这样声明你的类：

```
package com
{
    [RemoteClass]
    public class myClass
    {
        public function myClass()
        {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:17:53.300

需要序列化/反序列化的类需要实现[flash.utils.IExternalizable](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IExternalizable.html)。

```
 public function readExternal(input:IDataInput):void - here you restore object
    public function writeExternal(output:IDataOutput):void - here you saving object 
```

此致

# c++ - 使用 libsrtp 编译星号时出错

> ID：12615739
> 
> 赞同：2
> 
> 时间：2012-09-27T06:53:34.973
> 
> 标签：c++, compiler-errors, asterisk

我想用 SRTP 库编译星号，但在配置星号代码时，我收到此错误：

```
checking for the ability of -lsrtp to be linked in a shared object... no
configure: WARNING: ***
configure: WARNING: *** libsrtp could not be linked as a shared object.
configure: WARNING: *** Try compiling libsrtp manually. Configure libsrtp
configure: WARNING: *** with ./configure CFLAGS=-fPIC --prefix=/usr
configure: WARNING: *** replacing /usr with the prefix of your choice.
configure: WARNING: *** After re-installing libsrtp
configure: WARNING: *** configure script.
configure: WARNING: ***
configure: WARNING: *** If you do not need SRTP support re-run configure
configure: WARNING: *** with the --without-srtp option. 
```

这也是检查此规则的代码：

```
if test "$PBX_SRTP" = "1";

then

    saved_libs="${LIBS}"
    saved_ldflags="${LDFLAGS}"
    LIBS="${LIBS} -lsrtp"
    LDFLAGS="${LDFLAGS} -shared -fPIC"
    AC_MSG_CHECKING(for the ability of -lsrtp to be linked in a shared object)
    AC_LINK_IFELSE(
    [
        AC_LANG_PROGRAM(
            [#include <srtp/srtp.h>],
            [srtp_init();]
        )
    ],

    [ AC_MSG_RESULT(yes) ],
    [
        AC_MSG_RESULT(no)
        AC_MSG_NOTICE(***)
        AC_MSG_NOTICE(*** libsrtp could not be linked as a shared object)
        AC_MSG_NOTICE(*** try compiling libsrtp manually and configuring with)
        AC_MSG_NOTICE(*** ./configure CFLAGS=-fPIC --prefix=/usr)
        AC_MSG_NOTICE(*** replacing /usr with the prefix of your choice)
        exit 1
    ]
    )
    LIBS="${saved_libs}"
    LDFLAGS="${saved_ldflags}"
fi 
```

提交细节：[https ://reviewboard.asterisk.org/r/857/diff/](https://reviewboard.asterisk.org/r/857/diff/)

我尝试了几个前缀来编译 libsrtp 代码，但我得到了相同的结果。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:51:05.153

警告说它无法与 libsrtp 链接，因为 libsrtp 的代码需要可重定位，就像共享库一样，而且您似乎正在将 libsrtp 编译为*静态*库，我会按照它的建议进行操作并重新构建**libsrtp**使用：

```
./configure CFLAGS=-fPIC 
```

我也在这里尝试过并且它有效，请注意我在构建 libsrtp 时使用了默认前缀 /use/local/lib

```
./configure --with-srtp=/usr/local/lib
checking for srtp_init in -lsrtp... yes
checking srtp/srtp.h usability... yes
checking srtp/srtp.h presence... yes
checking for srtp/srtp.h... yes
checking for the ability of -lsrtp to be linked in a shared object... yes 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T01:56:28.893

在 SRTP 文件夹中：

```
make uninstall
make clean
./configure CFLAGS=-fPIC --prefix=/usr/local/lib
make
make runtest
make install 
```

在星号文件夹中：

```
 cd ../../asterisk/asterisk-11.3.0/
./configure --with-srtp=/usr/local/lib 
```

这对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:54:04.250

构建脚本检查一个简单的调用是否`srtp_init()`可编译，为了使其有效，您应该有一个文件夹，该文件夹包含`<srtp>`在包含文件的路径中，并在链接器的路径中创建了`.a`库。所以在创建后`libsrtp`把你的前缀放在链接器路径中

# javascript - 如果我将谷歌分析代码放在 IF 语句中，它会起作用吗？

> ID：12615743
> 
> 赞同：1
> 
> 时间：2012-09-27T06:53:48.840
> 
> 标签：javascript, if-statement, google-analytics

我只想在触发功能后触发页面点击。那么我可以执行以下操作吗？

```
<script type="text/javascript">
function gaCodeParser(parseGAcode){
if(parseGAcode == 'triggerGAcode'){
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxx-xx']);
_gaq.push(['_trackPageview', '/success-page']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
}
else{
//do nothing
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:57:15.003

你为什么要捕捉它？谷歌分析无论如何都会为您提供有效的指标，如独特的观点、独特的访问者等，如果您试图摆弄他们的代码，您只会失去 GA 提供的指标。如果您仍想继续分叉 GA 给出的内容，您仍然可以这样做，但请不要指望 GA 会为您提供所有指标。

# asp.net-mvc-3 - 如何在 nopCommerce 中显示所有产品？

> ID：12615751
> 
> 赞同：2
> 
> 时间：2012-09-27T06:54:18.123
> 
> 标签：asp.net-mvc-3, nopcommerce

我想在不创建任何新类别并映射到它的情况下显示所有产品。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T19:02:20.093

这是真的; 为了使产品在 nopCommerce 中显示，必须将其分配给一个类别。您最好的选择是创建一个顶级的总括类别，例如“所有产品”，并将您的所有产品添加到该总括类别中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:02:54.547

据我所知，它们必须是与产品相关的类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:58:02.050

您可以通过修改代码来做到这一点。我以前做过。其实很简单。

修改 Catalog 控制器的 Category 操作以接收可为空的 CategoryId：

```
public ActionResult Category(int? categoryId, CatalogPagingFilteringModel command){ 
```

由于这个可为空的参数，修改操作以不中断。

要修改的最重要部分是在哪里构建要过滤的类别 ID 列表：

```
var categoryIds = new List<int>();
if (category != null)
   {
       categoryIds.Add(category.Id);
   }
if (_catalogSettings.ShowProductsFromSubcategories)
   {
       //include subcategories
       categoryIds.AddRange(GetChildCategoryIds(category.Id));
   } 
```

_productService.SearchProducts 方法将收到一个空的类别 ID 列表，并且不会过滤任何产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:03:10.560

你可以创建一个插件，映射一个路由到它（例如映射到'allproducts'路由），并在插件中创建你自己的控制器、动作和视图。然后在主菜单中插入一个指向路线的链接

```
@Html.RouteLink(routeName, null) //or similar overloads 
```

插件创建部分太大，无法在此描述。[http://www.nopcommerce.com/documentation.aspx](http://www.nopcommerce.com/documentation.aspx)是一个好的开始。

PS:/ 关于路由，每个插件都可以通过实现“IRouteProvider”接口来实现一个路由注册器。

:)

# android - 三星 Galaxy S3 溢出菜单按下状态的样式

> ID：12615753
> 
> 赞同：2
> 
> 时间：2012-09-27T06:54:28.730
> 
> 标签：android, android-layout

有人知道按下时如何设置三星 Galaxy S3 溢出菜单的样式吗？我知道在我的主题中添加以下属性时，我可以设置菜单本身的样式：

```
<item name="android:panelBackground">@drawable/menu_hardkey_panel</item> 
```

这适用于背景，但按下时会显示蓝色全息光晕，我想将其更改为不同的颜色。

# c# - 在 DTO 中检查异常 - 最佳实践

> ID：12615754
> 
> 赞同：1
> 
> 时间：2012-09-27T06:54:29.947
> 
> 标签：c#, exception, exception-handling

考虑一个具有重载索引器的二维 Matrix 类，如下所示：

```
public class Matrix
{
    private readonly double[,] _matrix;

    public double this[int i, int j]
    {
        get
        {
            return _matrix[i, j];
        }
        set
        {
            _matrix[i, j] = value;
        }
    }

    public double this[int i, int j]
    {
        get
        {
            if (i < 0 || i >= _matrix.GetLength(0) || j < 0 || j >= _matrix.GetLength(1))
                throw new IndexOutOfRangeException("index was out of range");

            return _matrix[i, j];
        }
        set
        {
            if (i < 0 || i >= _matrix.GetLength(0) || j < 0 || j >= _matrix.GetLength(1))
                throw new IndexOutOfRangeException("index was out of range");
            _matrix[i, j] = value;
        }
    }

    public double this[int i, int j]
    {
        get
        {
            if (i < 0 || i >= _matrix.GetLength(0) || j < 0 || j >= _matrix.GetLength(1))
                return 0;
            return _matrix[i, j];
        }
        set
        {
            if (i >= 0 || i < _matrix.GetLength(0) || j >= 0 || j < _matrix.GetLength(1))
                _matrix[i, j] = value;
        }
    }
} 
```

如您所见，有 3 个版本的索引器。

1）这个版本不检查索引

2）此版本检查索引，如果它们超出尺寸范围，则抛出 IndexOutOfRangeException

3) 此版本仅在索引有效时检查索引并分配/返回值。

所以我的问题是其中哪一个是最佳实践？你更喜欢什么，为什么？或者我可以创建一个新的自定义异常，如“MatrixIndexOutOfRange”并抛出它而不是 IndexOutOfRange 异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:03:11.960

版本（1）是最好的。

数组`double[,]`本身会抛出一个`IndexOutOfRangeException`，所以我看不出自己做这个测试有什么价值。

在我看来，默默地接受无效参数（版本 3）很脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:29:02.053

如果您获得的值是意外的并且您不知道该怎么做：抛出异常。

如果你得到的值是出乎意料的，并且你知道该怎么做：去做。

如果必须抛出异常，请尽可能抛出最有意义的异常。IE。如果从业务角度（即您的班级的工作）来看，抛出一个自定义异常是有意义的，那么就去做吧。否则，您可以正常使用`OutOfRangeException`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:09:31.083

版本 1 和 2 会给你相同的行为，所以版本 1 更好，因为它的代码更少。如果您选择版本 2，您还应该添加一个空检查并在矩阵为空时抛出异常，并且可能更多的检查将在版本 1 中失败。

第 3 版只会隐藏您犯的任何编程错误，并且会在调试时花费您大量时间。在代码审查中，我肯定会将代码更改为版本 1。

# ajax - 将页眉代码从绑定添加到 cfc 调用时出现问题

> ID：12615755
> 
> 赞同：0
> 
> 时间：2012-09-27T06:54:29.370
> 
> 标签：ajax, coldfusion, cfc, application.cfc

我的 onRequestStart() 方法中有一些包含，我使用以下方法绕过了 cfc 请求：（`<cfif listLast(arguments.thePage, ".") neq "cfc">`我从 Ray Camden 的论坛上获得[http://forums.forta.com/messages.cfm?threadid=10C19539- E898-C4C8-5F32EBA5B054C3D6](http://forums.forta.com/messages.cfm?threadid=10C19539-E898-C4C8-5F32EBA5B054C3D6)感谢雷！）

但是，我仍然将代码添加到我的 JSON 响应中：

```
`[[46,"Childcare Volunteer Costa Rica"],[59,"Conservation Volunteer Costa Rica"],[111,"Ecotourism Volunteer Costa Rica"],[25,"Emergency Response Volunteer  Costa Rica"],[52,"Grant Writing & Fundraising Volunteer- Costa Rica"],[13,"Medical Volunteer Costa Rica"],[19,"Nursing Volunteer Costa Rica"],[39,"Patient Care Volunteer- Costa Rica"],[32,"Public Health Volunteer- Costa Rica"],[103,"Reading Week Wildlife Project"],[73,"Special Needs Volunteer Costa Rica"],[117,"Volunteer Teaching All Ages Costa Rica"],[89,"Volunteer Teaching Classroom- Costa Rica"],[96,"Volunteer Vocational Training- Costa Rica"],[66,"Webdesign & Computer Volunteer- Costa Rica"],[114,"Wildlife Volunteer Costa Rica"],[80,"Youth Outreach Volunteer Costa Rica"]]**<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
</body>
</html>` 
```

还有什么想法可能会被插入或我可能会丢失什么？（我现在没有使用 onRequest 或 onRequestEnd，我认为 application.cfc 中没有其他内容可以添加此内容）

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:37:01.107

首先要做的是找到该代码在您的代码库中存在的位置（它不能简单地出现在以太之外），然后从那里向后工作以找出它是如何附加到您的响应中的。

一个问题：在 JSON 的结尾和空 XHTML 模板的开头之间有两个星号。回复中是否确实存在此内容，或者您​​是否将其添加为亮点？

要做的一件事是直接在浏览器中通过 AJAX 调用访问您正在调用的 URL，打开调试，然后检查构成响应的文件。这应该让您对正在发生的事情有一个很好的了解。

但是对于正常安装，唯一可以自动运行的地方是您的 Application.cfc。其他任何东西都只会通过您的代码专门调用。

您确定您正在查看正确的 Application.cfc，并且在您请求的文件和您正在查看的文件之间没有另一个文件吗？因为它是使用的“最近的祖先”Application.cfc，不一定是您的文档根目录中的那个。

您使用的是哪个版本的 CF（如果您在问题中指定它总是很方便）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:18:56.710

我认为这不是做包含的最佳位置，这些东西通常是使用事件模型完成的。解决方法可能是查看请求的文件，并且只包含 .cfm 文件而不是其他文件。

# java - 需要概念名称

> ID：12615756
> 
> 赞同：0
> 
> 时间：2012-09-27T06:54:39.377
> 
> 标签：java

我不记得这个概念的名字了。

```
 public interface MainInterface {
      public void method1();
      public void method2();
 }

  void testMethod() {
        methodMain(new MainInterface() {

            @Override
            public void method1() {
                System.out.println("This is method1");
            }

            @Override
            public void method2() {
                System.out.println("This is method2");
            }
        });
    }

   void methodMain(MainInterface mi) {
        mi.method1();
        mi.method2();
   } 
```

*   我创建 MainInterface 的实例而不给出对象的名称
*   我实现了接口方法
*   然后将未知名称的实例传递给methodMain。

这个概念是什么以及它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T06:58:58.757

您已经创建了一个[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)的实例（即没有名称的类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:59:36.273

这个概念被称为[*回调*](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)。在java中，你只有回调接口，在其他语言中，你可以有回调函数。

作为一种设计模式，这个概念涉及到策略模式（正如阿米特已经提到的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:00:49.500

匿名课程就是您搜索的内容。

# c# - 如何处理 Devexpress WPF 文本框更改事件？

> ID：12615758
> 
> 赞同：0
> 
> 时间：2012-09-27T06:54:45.753
> 
> 标签：c#, wpf, event-handling, devexpress

我是 devexpress WPF 应用程序的新用户。我真的很想学习如何检测文本框事件的任何变化？例如; 有 2 个文本框 (devexpress) (txt1,txt2) 。如果我擦除 txt1 上的值，则 txt2 必须擦除自己的值。

像那样：

```
 private void txt1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Delete)
        {
            txt2.Text = String.Empty;
        }
    } 
```

是真的吗？你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:12:26.850

如果 txt2 的文本必须与 txt1 中的文本完全相同，请使用绑定：

```
<TextBox Name="txt2" Text="{Binding ElementName=txt1, Path=Text}"/> 
```

如果您只想获取更改，请尝试以下操作（使用 TextChanged-Event 而不是 KeyDown，因为您也可以将字符串粘贴到文本框中）：

```
string oldtext = "";
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    string removedstring = "";
    string addedstring = "";
    TextBox source = (TextBox)e.Source;
    TextChange t = e.Changes.First();

    if (t.RemovedLength > 0)
    {
        removedstring = oldtext.Substring(t.Offset, t.RemovedLength);
    }

    if (t.AddedLength > 0)
    {
        addedstring = source.Text.Substring(t.Offset, t.AddedLength);
    }

    oldtext = source.Text;
} 
```

如果要通过代码设置 txt2.Text = txt1.Text

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox source = (TextBox)e.Source;
        TextChange t = e.Changes.First();

        string first = txt2.Text.Substring(0, t.Offset);
        string added = source.Text.Substring(t.Offset, t.AddedLength);
        string last = (t.Offset+1>tbrt.Text.Length)?"":txt2.Text.Substring(t.Offset, txt2.Text.Length-1);
        last = last.Remove(0, t.RemovedLength);
        txt2.Text = first + added + last;
    } 
```

# c# - 控件，找不到使用此控件设置用户名和密码的位置

> ID：12615764
> 
> 赞同：1
> 
> 时间：2012-09-27T06:55:12.583
> 
> 标签：c#, asp.net, .net

我正在开发一个已经构建并且工作正常的项目。我现在需要做的是用盐加密密码。通常我可以做到这一点，但我很难看到控制 asp:Login 的位置用户名和密码。我已经搜索了整个项目，但找不到从数据库中检索用户名和密码的位置以及检查是否正确的任何详细信息。这里是标记：

```
 <asp:Login ID="LoginUser" runat="server" EnableViewState="False" RenderOuterTable="False" OnLoggingIn="LoginUser_LoggingIn">
    <LayoutTemplate>
        <div class="accountInfo">
            <fieldset class="Login">
                <p>
                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName" CssClass="text"></asp:Label>
                    <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName"
                        CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required."
                        ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                </p>
                <p>
                    <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password" CssClass="text"></asp:Label>
                    <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password"
                        CssClass="failureNotification" ErrorMessage="Password is required." ToolTip="Password is required."
                        ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                </p>
            </fieldset>
            <span class="error">
                <asp:Literal ID="FailureText" runat="server"></asp:Literal>
            </span>
            <asp:ValidationSummary ID="LoginUserValidationSummary" runat="server" CssClass="error"
                ValidationGroup="LoginUserValidationGroup" />
            <p class="submitButton">
                <asp:Button CssClass="submitButton" ID="LoginButton" runat="server" CommandName="Login"
                    ValidationGroup="LoginUserValidationGroup" Text="d" OnClick="LoginButton_Click" />
            </p>
        </div>
    </LayoutTemplate>
</asp:Login> 
```

这里是代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using mycompany.BaseCode;
using System.Threading;

namespace mycompany.Account
{
    public partial class Login : BasePage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //RegisterHyperLink.NavigateUrl = "Register.aspx?ReturnUrl=" + HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"]);
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(SessionManager.Culture);

        lblLoginTitle.Text = Resources.Login.LoginTitle;
        lblExtraInfo.Text = Resources.Login.ExtraInfo;

        var llb = (Label)LoginUser.FindControl("UserNameLabel");
        llb.Text = Resources.Login.Username;
        llb = (Label)LoginUser.FindControl("PasswordLabel");
        llb.Text = Resources.Login.Password;

        LoginUser.FailureText = Resources.Login.FailureText;

        var rfv = (RequiredFieldValidator)LoginUser.FindControl("PasswordRequired");
        rfv.ErrorMessage = Resources.Login.PasswordRequired;
        rfv = (RequiredFieldValidator)LoginUser.FindControl("UserNameRequired");
        rfv.ErrorMessage = Resources.Login.UsernameRequired;

        var btn = (Button)LoginUser.FindControl("LoginButton");
        btn.Text = Resources.Login.btnLogin;

    }
}
} 
```

在任何地方都找不到 OnLoggingIn="LoginUser_LoggingIn" 或 OnClick="LoginButton_Click" 事件。我什至查看了基本代码。有趣的是它正在工作。任何关于在哪里可以找到这些隐藏细节的解释或提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:34:49.290

It will use the default [`MembershipProvider`](http://msdn.microsoft.com/en-us/library/yh26yfzy(v=vs.100).aspx) configured in your web.config if you don't have any event handlers.

If you haven't configured a `MembershipProvider`, I think you need to handle at least the `Login.Authenticate` event.

# linux - 在linux中为libudev添加信息到设备

> ID：12615770
> 
> 赞同：0
> 
> 时间：2012-09-27T06:55:35.623
> 
> 标签：linux

嗨，我如何为插入的设备添加其他信息。例如 /dev/ttyUSB0

说：

供应商： 设备类型： 子系统：

更重要的是我想添加设备类型。我怎么能这样做，或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:52:26.460

您不能使用 udev 设置设备属性。它只获取设备属性并可以根据它们执行操作（例如，如果串行 nr 为 xxxx，则将其设置为 eth0）。

# java - 并非所有命名参数都已在 createSQLQuery 中设置为休眠

> ID：12615771
> 
> 赞同：8
> 
> 时间：2012-09-27T06:55:44.043
> 
> 标签：java, hibernate, struts

我收到**并非所有命名参数都已设置**的错误。下面是我的代码。

我的 SqlQuery 在 mysql 提示符下运行良好，您可以在问题[SQL Query中引用架构](https://stackoverflow.com/questions/12595841/sql-select-query-help-required)

```
SELECT  t.*
FROM    (
    SELECT  @lim := 2,
            @cg := ''
    ) vars,
    (select * from Table1 order by product,amount, make)  t
WHERE   CASE WHEN @cg <> product THEN @r := @lim ELSE 1 END > 0
    AND (@r := @r - 1) >= 0
    AND (@cg := product) IS NOT NULL
ORDER BY
    product,amount, make 
```

我的java代码

```
try {
             context.dbl.startTransaction();
             Session session = context.dbl.getSession();

             //String sqlQuery = "from com.infibeam.inventoryservice.dbObjects.PopularBrandDO";
             String sqlQuery = "SELECT  t.* ";
             sqlQuery=sqlQuery + "FROM    (";
             sqlQuery=sqlQuery + "SELECT  @lim := 2,";
             sqlQuery=sqlQuery + "@cg := ''";
             sqlQuery=sqlQuery + ") vars, ";
             sqlQuery=sqlQuery + "(select * from Table1 order by product,amount, make) t";
             sqlQuery=sqlQuery + " WHERE   CASE WHEN @cg <> product THEN @r := @lim ELSE 1 END > 0";
             sqlQuery=sqlQuery + " AND (@r := @r - 1) >= 0 ";
             sqlQuery=sqlQuery + " AND (@cg := product) IS NOT NULL ";
             sqlQuery=sqlQuery + " ORDER BY product,amount, make";
             //Query query = session.createQuery(sqlQuery);
             SQLQuery query = session.createSQLQuery(sqlQuery);
             listItems = query.list();

            }catch(RuntimeException e) {
                e.printStackTrace();
            } 
```

下面是我得到的例外

```
org.hibernate.QueryException: Not all named parameters have been set: [] [SELECT  t.* FROM    (SELECT  @lim := 2,@cg := '') vars, (select * from Table1 order by product,amount, make) t WHERE   CASE WHEN @cg <> product THEN @r := @lim ELSE 1 END > 0 AND (@r := @r - 1) >= 0  AND (@cg := product) IS NOT NULL  ORDER BY product,amount, make]
    at org.hibernate.impl.AbstractQueryImpl.verifyParameters(AbstractQueryImpl.java:291)
    at org.hibernate.impl.SQLQueryImpl.verifyParameters(SQLQueryImpl.java:199)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:143)
    at com.infibeam.weaverbird.helper.PopularBrandFacetHelper.bootstrap(PopularBrandFacetHelper.java:48) 
```

提前致谢...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T07:46:12.747

问题是带有 的赋值`:=`，顺便说一句，它们不是标准的 SQL。

在 SQL 中，`:`始终需要一个参数，例如 in`where value = :param`和 :param 已将其设置为参数。现在hibernate正在扫描选择并查找没有设置参数的冒号。

解决方案：使用休眠标准重新设计您的选择。

您可以使用两个不同的 HQL 查询。

第一：选择所有产品：`select distinct product from Table1`

第二：对于您执行的每个产品`from Table1 where product = :prod`， :prod 您将其设置为实际产品的参数，并且使用 setMaxResults(2) 您可以根据需要限制行数。

现在它是多个选择而不是单个选择，但是它们可能比单个查询更快（单个查询很复杂，并且存在数据库中低效的搜索策略的风险）。还有一个很大的优势，现在它是纯粹的 HQL，因此您的程序可以移植到不同的数据库。

# php - 正则表达式：匹配所有内容，直到新行后面没有空格

> ID：12615774
> 
> 赞同：4
> 
> 时间：2012-09-27T06:55:54.863
> 
> 标签：php, regex

我有这个例子：

```
This is a simple test text.
Yet another line.
START: This is the part that
 needs match.
This part does not need
 capture.
Wherever else text. 
```

我想匹配这部分：

```
START: This is the part that
     needs capture. 
```

关键是我知道它在`START:`那里，它以一个新行结束，它后面只有一个空格。

我尝试了很多组合，从：`START: (.*?)`

我已经使用了 \r 和任何我能想到的只有在没有空格的情况下才能匹配的东西。

我不是菜鸟问，因为我很懒。我花了几个小时才问。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T07:34:19.220

这个怎么样：

```
preg_match(
    '/^         # Start of line
    START:\     # Match "START: "
    .*          # Match any characters except newline
    \r?\n       # Match newline
    (?:         # Try to match...
     ^          # from the start of the line:
     \ +        #  - one or more spaces
     .*         #  - any characters except newline
     \r?\n      #  - newline
    )*          # Repeat as needed/mx', 
    $subject) 
```

这假定所有行都以换行符结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:40:49.683

此代码将与您的示例测试一起正常工作。

解决方法是替换 preg_match 之前的新行（之后恢复！）和正则表达式末尾的 Ungreedy 修饰符（U）

```
<?php

$token = '#####';

$text = <<<TXT
This is a simple test text.
Yet another line.
START: This is the part that
 needs match.
This part does not need
 capture.
Wherever else text.
TXT;

$text = str_replace("\n", $token, $text);

if (preg_match('/(?P<match>START:(.)*)(' . $token . '){1}[^ ]+/Uu', $text, $matches))
{
    $match = str_replace($token, "\n", $matches['match']);
    var_dump($match);
}

$text = str_replace($token, "\n", $text); 
```

输出将是：

```
string(42) "START: This is the part that
 needs match." 
```

# java - Java restlet 嵌套 URL

> ID：12615776
> 
> 赞同：0
> 
> 时间：2012-09-27T06:56:02.327
> 
> 标签：java, google-app-engine, restlet

我将 Java Restlet 用于我的服务器代码。我的应用程序是简单的博客网站。

它扩展`org.restlet.Application`类以定义应用程序的路由器。我为帖子评论设置路由器如下

```
 router.attach("/posts/{id}/comments", CommentResource.class);
  router.attach("/posts/{postId}/comments/{commentId}", CommentResource.class); 
```

但上面的路由器不起作用。我总是收到 500 内部服务器错误。

# ios - 是否可以在 ios 4 5 6 上构建目标

> ID：12615777
> 
> 赞同：0
> 
> 时间：2012-09-27T06:56:19.077
> 
> 标签：ios

据我所知，雪豹做不到这一点。我希望知道我的mac osx是10.8，哪个xcode版本可以在ios 4 5 6上构建目标？还是我需要降级为狮子？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:01:11.160

啊，为了解决我构建的框架的这个问题，我浪费了 2 天的时间：没有单一版本的 Xcode 支持所有 3 个 armv6、armv7 和 armv7s 架构，所以有效地，没有办法做你想做的事想。

使用 Xcode 4.5，您可以通过支持 armv7 和 armv7s 架构构建适用于 iOS 4.3 及更高版本（包括 5 和 6）的目标。

使用 Xcode 4.4.1，您可以通过支持 armv6 和 armv7 架构构建适用于 iOS 4.0 到 iOS 5.1（不是 iOS 6.0）的目标。

如果您都安装了使用 Xcode 4.4.1 构建 armv6 目标的脚本，然后使用 Xcode 4.5 安装 armv7/armv7s 目标，然后使用**lipo**将它们合并，那么这可能是可能的，但这似乎非常困难。

# iphone - 界面生成器中的自定义字体

> ID：12615780
> 
> 赞同：1
> 
> 时间：2012-09-27T06:56:58.993
> 
> 标签：iphone, ios, xcode4.2

我想从 ibterface builder,xcode4.2 安装自定义字体并在 UIlabel 中使用？我尝试了 Google 的方式，但它没有显示在 Interface builder 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:13:44.717

首先将您的自定义字体文件保存在您的项目文件夹中，然后您必须将其添加到 Your_Project_name-Info.plist 文件中，该文件可能位于您的**支持文件文件**夹中

1.  点击**Your_Project_name-Info.plist**

2.  在关键字段上添加新对象（数组）=> 类型**应用程序提供的字体。**

3.  在该数组中添加一个具有**字体名称的对象**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:09:55.747

在项目中添加字体文件并使用以下设置字体。

> ```
> self.font = [UIFont fontWithName:@"yourFontName" size:yourFontSize]; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:20:13.877

截至目前，Xcode 4.6，你不能让 Interface Builder 显示它还没有附带的自定义字体。为了让标签使用自定义字体，您必须以编程方式显示它。这意味着您将无法使用 IB 来确定制作标签或类似的东西需要多长时间。

# php - 如何使用 FOREACH 命令将添加的文本字段输出到 PHP

> ID：12615782
> 
> 赞同：1
> 
> 时间：2012-09-27T06:57:02.520
> 
> 标签：php, jquery, dynamic, foreach

这是我用来动态添加/删除输入文本字段的脚本。我正在使用容器属性，因此我可以为此输入字段创建多个单独的块。

```
$(function(){
    $('.container > a').click(function(e){
        e.preventDefault();
        var $this= $(this),
            prnt = $this.parent(),
            i = prnt.find('input').length;
        if($this.hasClass('add')){
            $('<div><input type="text" class="field" name="dynamic[]" value="' + i + '" /></div>').hide().fadeIn('slow').appendTo($('.inputs',prnt));
        }else if($this.hasClass('remove') && i > 1){
            prnt.find('input.field:last').remove();
        }else if($this.hasClass('reset') && i > 1){
            prnt.find('input.field:gt(0)').remove();
        }
    });
}) 
```

这是我用来构建输入字段的 html 代码：

```
<div class="container">
<a href="#" class="add">Add</a> | <a href="#" class="remove">Remove</a> | <a href="#" class="reset">reset</a>
    <div class="inputs">
        <input type="text" name="dynamic1" class="field"/>
    </div>
</div> 
```

我需要一个 PHP 代码来输出输入字段中的所有字段。如果我添加 3 个输入字段，我希望 PHP 代码一个接一个地输出所有这些输入字段。

我尝试使用 foreach 代码：

```
<?php
foreach($_POST['dynamic[]'] as $value) {
echo "$value <br />"; // change this to what you want to do with the data
}
?> 
```

但是我在第二行（foreach 行）不断收到错误

我该怎么做呢？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:03:09.157

你应该改变

```
foreach($_POST['dynamic[]'] as $value) { 
```

到

```
foreach($_POST['dynamic'] as $value) { 
```

那就是如果你有这样的 HTML

```
<input type="text" name="dynamic[]" class="field"/>
<input type="text" name="dynamic[]" class="field"/> 
```

但是使用您当前的 HTML `<input type="text" name="dynamic1" class="field"/>`，您可以看到这`$_POST['dynamic']`不是一个数组，您应该像这样回显它

```
echo $_POST['dynamic1'] ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:03:37.793

而不是`$_POST['dynamic[]'`尝试`$_POST['dynamic']`

```
<?php
foreach($_POST['dynamic'] as $value) {
echo "$value <br />"; // change this to what you want to do with the data
}
?> 
```

# sql - 在同一个表中同时包含包含范围和排除范围

> ID：12615785
> 
> 赞同：1
> 
> 时间：2012-09-27T06:57:13.980
> 
> 标签：sql, sql-server, sql-server-2008, ssrs-2008

我有由 SQL TABLE A 生成的下表

```
timeinterval   count(exclusive range)
0-6             2
0-12            5
0-18            10 
```

我想要一张像这样的桌子 TABLE B

```
timeinterval   count(exclusive range)  count(inclusive range)
1-6             2                       2
1-12            5                       3
1-18            10                      5 
```

我已经生成了表 A 并且需要表 B。我可以在 SQL 中做一些事情，我可以在代码中为表 A 添加一个查询，并对表中的第二行执行类似 (0-12)-(0-6) 的操作B.

用于生成表 A 的代码是

```
with ranges as 
  (
    select 6 as val, 1 as count_all
 union all
    select 12, 1
    union all
    select 18, 1
    union all
 select 24, 1
    union all
 select 30, 1
    union all  
 select 36, 1
    union all 
 select 42, 1
    union all
 select 48, 1
    union all   
 select 1, 0
  )
select case when ranges.count_all = 0
            then 'more'
            else  convert (varchar(10), ranges.val) 
        end [MetLifeExperienceMonths],
       sum (case when (ranges.count_all = 0 and GoldListHistogram.MetLifeExperienceMonths>=1)
                   or
           (GoldListHistogram.MetLifeExperienceMonths<= ranges.val and  GoldListHistogram.MetLifeExperienceMonths>=1)
                 then 1 end) [count],
count(EmployeeID) as 'Total'
into yy
from GoldListHistogram
cross join ranges
where MetLifeExperienceMonths > 0
group by ranges.val, ranges.count_all 
```

*我需要修改查询，以便我可以从第二行开始的每一行减去“计数（不包括范围）”的前两行值。就像 0-12（时间间隔）行一样，我需要输出一个值是前两行的差异..like row(i)=count(i)-count(i-1)。*

第一列给出了 5 年的时间间隔（以月为单位）第二列计算没有。独家范围内的员工人数，例如 (0-6,0-12,0-18)..6 ,12,18 是没有。月数第三列计算没有。专属范围内的员工人数（0-6,6-12,12-18）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:24:40.290

你不能只为范围添加一个起始值吗？就像是：

```
 with ranges as 
  (
    select 6 as val, 0 as start, 1 as count_all
 union all
    select 12, 7, 1
    union all
    select 18, 13, 1
    union all
 select 24, 19, 1
    union all
 select 30, 25, 1
    union all  
 select 36, 31, 1
    union all 
 select 42, 37, 1
    union all
 select 48, 43, 1
    union all   
 select 1, 49, 0
  )
select case when ranges.count_all = 0
            then 'more'
            else  convert (varchar(10), ranges.val) 
        end [MetLifeExperienceMonths],
       sum (case when (ranges.count_all = 0 and GoldListHistogram.MetLifeExperienceMonths>=1)
                   or
           (GoldListHistogram.MetLifeExperienceMonths=1)
                 then 1 else 0 end) [count inclusive],
       sum (case when (ranges.count_all = 0 and GoldListHistogram.MetLifeExperienceMonths>=1)
                   or
           (GoldListHistogram.MetLifeExperienceMonths=ranges.start)
                 then 1 else 0 end) [count exclusive],
count(EmployeeID) as 'Total'
into yy
from GoldListHistogram
cross join ranges
where MetLifeExperienceMonths > 0
group by ranges.val, ranges.count_all; 
```

# apache - mod_rewrite 如果 url 缩短器添加问号，否则做一些不同的事情

> ID：12615789
> 
> 赞同：0
> 
> 时间：2012-09-27T06:57:28.137
> 
> 标签：apache, mod-rewrite

我的网络应用程序中有一个 url 缩短器，例如[http://myProject1.example.com/76sBdFAf6L](http://myProject1.example.com/76sBdFAf6L) 这东西应该重定向到[http://myProject1.example.com/index.php?76sBdFAf6L](http://myProject1.example.com/index.php?76sBdFAf6L) - 添加一个问号，将 76sBdFAf6L 转换为查询字符串。

但是，如果一个 URL 没有链接缩短代码，它应该只重定向到我的根目录，例如[http://myProject1.example.com/files/files.php](http://myProject1.example.com/files/files.php)应该重定向到[http://www.example.com/projects /myProject1/files/files.php](http://www.example.com/projects/myProject1/files/files.php)

此类规则的 mod_rewrite 条件是什么？谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:18:04.227

尝试将这些添加到文档根目录或虚拟主机/服务器配置中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([0-9A-Za-z]+)$ /index.php?$1 [L,QSA] 
```

# oauth - ios invalid_request，同时使用oauth调用授权令牌

> ID：12615790
> 
> 赞同：0
> 
> 时间：2012-09-27T06:57:34.243
> 
> 标签：oauth, ios6

我正在使用 google api 在我的应用程序中执行 google lattitude 操作。我已经完成了使用凭据对用户进行身份验证。现在我正在尝试使用从初始请求生成的 autherization_code 生成 accesstoken。但它通过 invalid_request 作为 didReceiveData 函数中的错误。你们中的一些人可以建议我解决我的问题吗？Oauth 请求格式假设如下。

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/v6xr77ewYqhvHSyW6UJ1w7jKwAzu&
client_id=8819981768.apps.googleusercontent.com&
client_secret={client_secret}&
redirect_uri=https://oauth2-login-demo.appspot.com/code&
grant_type=authorization_code 
```

我执行上述服务调用的 ios 代码如下

```
 NSString * urlString = [NSString stringWithFormat:@"https://accounts.google.com/o/oauth2/token?code=%@&client_id=363756608022.apps.googleusercontent.com&client_secret=dury2bxloSVQ1sdJjg9MKO9s&redirect_uri=urn:ietf:wg:oauth:2.0:oob&grant_type=authorization_code",[userDefaults valueForKey:@"accessTokenResponse"]];    
     NSURL * url = [NSURL URLWithString:urlString];

    NSMutableURLRequest * request = [[NSMutableURLRequest alloc] initWithURL:url];
    [request addValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"POST"];
    NSLog(@"sendng req : %@",request);
    NSURLConnection * connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
    [connection start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:37:51.563

使用 asihttpheader 形成标头请求。`[request setpostvalue" forkey :].`这解决了我的问题

# ruby-on-rails - 如何在 Mongoid 中为 datetime_select 助手使用 update_attributes？

> ID：12615792
> 
> 赞同：3
> 
> 时间：2012-09-27T06:57:35.163
> 
> 标签：ruby-on-rails, mongoid

我使用 mongodb 作为我的数据库和驱动程序 mongoid。

我的一个模型`Bill`有一个字段是 local_time，我在视图中使用了 datetime_select：

```
.ym-fbox-select                    
  = f.label :local_time, "Time"
  = f.datetime_select :local_time 
```

`create`动作没问题。但`update`行动不是。错误是这样的：

```
(eval):1: syntax error, unexpected tINTEGER, expecting ')'
    def local_time(1i)=(value) 
```

并且`update`是：

```
def update                                   
 @bill = Bill.find(params[:id])             

 respond_to do |format|                     
   if @bill.update_attributes(params[:bill]) 
```

所以我想知道如何更新`local_time`字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T23:46:00.083

添加`include Mongoid::MultiParameterAttributes`到您的模型中，就像添加时间戳一样。

见：[https ://github.com/mongoid/mongoid/issues/892#issuecomment-1247311](https://github.com/mongoid/mongoid/issues/892#issuecomment-1247311)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:41:13.787

除了@Peter 所说的之外，我还想包括
**include Mongoid::MultiParameterAttributes** 应该在下面 **include Mongoid::Document**
如此[处](http://mongoid.org/en/mongoid/docs/rails.html#multi_param)

# r - R 从字符到数字

> ID：12615794
> 
> 赞同：2
> 
> 时间：2012-09-27T06:57:48.493
> 
> 标签：r, csv, character-encoding, xts

我有这个 csv 文件（fm.file）：

```
Date,FM1,FM2
28/02/2011,14.571611,11.469457
01/03/2011,14.572203,11.457512
02/03/2011,14.574798,11.487183
03/03/2011,14.575558,11.487802
04/03/2011,14.576863,11.490246 
```

等等。

我运行这个命令：

```
fm.data <- as.xts(read.zoo(file=fm.file,format='%d/%m/%Y',tz='',header=TRUE,sep=','))
is.character(fm.data) 
```

我得到以下信息：

```
[1] TRUE 
```

如何在不丢失日期索引的情况下将 fm.data 设为数字。我想执行一些需要数据为数字的统计操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:23:12.660

I was puzzled by two things: It didn't seem that that 'read.zoo' should give you a character matrix, and it didn't seem that changing it's class would affect the index values, since the data type should be separate from the indices. So then I tried to replicate the problem and get a different result:

```
txt <- "Date,FM1,FM2
28/02/2011,14.571611,11.469457
01/03/2011,14.572203,11.457512
02/03/2011,14.574798,11.487183
03/03/2011,14.575558,11.487802
04/03/2011,14.576863,11.490246"
require(xts)
fm.data <- as.xts(read.zoo(file=textConnection(txt),format='%d/%m/%Y',tz='',header=TRUE,sep=','))
is.character(fm.data)
#[1] FALSE

 str(fm.data)
#-------------
An ‘xts’ object from 2011-02-28 to 2011-03-04 containing:
  Data: num [1:5, 1:2] 14.6 14.6 14.6 14.6 14.6 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "FM1" "FM2"
  Indexed by objects of class: [POSIXct,POSIXt] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr [1:2] "POSIXct" "POSIXt"
 $ tzone : chr "" 
```

zoo- and xts-objects have their data in a matrix accessed with `coredata` and their indices are a separate set of attributes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:11:40.907

我认为问题是你的 csv 文件中有一些脏数据。换句话说，FM1 或 FM2 列在某处包含一个字符，阻止它被解释为数字列。发生这种情况时，XTS（它是下面的矩阵）将强制整个内容为字符类型。

这是使用 R 查找可疑数据的一种方法：

```
s <- scan(fm.file,what="character")
# s is now a vector of character strings, one entry per line
s <- s[-1]  #Chop off the header row
all(grepl('^[-0-9,.]*$',s,perl=T)) #True means all your data is clean
s[ !grepl('^[-0-9,.]*$',s,perl=T) ]
which( !grepl('^[-0-9,.]*$',s,perl=T) ) + 1 
```

倒数第二行打印出所有包含您未预料到的字符的 csv 行。最后一行告诉您它们是文件中的哪些行（+1，因为我们删除了标题行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:45:43.370

为什么不简单地使用`read.csv`，然后使用将第一列转换为`Date`对象`as.Date`

```
> x <- read.csv(fm.file, header=T)
> x$Date <- as.Date(x$Date, format="%d/%m/%Y")
> x
        Date      FM1      FM2
1 2011-02-28 14.57161 11.46946
2 2011-03-01 14.57220 11.45751
3 2011-03-02 14.57480 11.48718
4 2011-03-03 14.57556 11.48780
5 2011-03-04 14.57686 11.49025 
```

# java - 找不到元素“ehcache”的声明

> ID：12615795
> 
> 赞同：6
> 
> 时间：2012-09-27T06:57:50.370
> 
> 标签：java, spring, ehcache

我正在我的 Web 应用程序中实现 url 缓存。运行时 ehcache.xml 文件中出现错误。我正在使用 spring 2.5 jar 文件。

ehcache.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="false"
    monitoring="autodetect" dynamicConfig="true" maxBytesLocalOnHeap="2m"
    maxBytesLocalOffHeap="2m" maxBytesLocalDisk="2m">

    <defaultCache eternal="false" maxElementsInMemory="1000"
        overflowToDisk="false" diskPersistent="false" timeToIdleSeconds="0"
        timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU" />

    <cache name="videoItemsCache" eternal="false"
        maxElementsInMemory="1000" timeToIdleSeconds="1200" timeToLiveSeconds="1200"
        overflowToDisk="false" diskPersistent="false"
        memoryStoreEvictionPolicy="LRU" />

</ehcache> 
```

错误是：

```
ERROR: VideoClubPortal 27-Sep-2012 11:53 context.ContextLoader Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 6 in XML document from ServletContext resource [/WEB-INF/ehcache.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 6; columnNumber: 31; cvc-elt.1: Cannot find the declaration of element 'ehcache'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:404)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: org.xml.sax.SAXParseException; lineNumber: 6; columnNumber: 31; cvc-elt.1: Cannot find the declaration of element 'ehcache'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396) 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-21T04:43:32.390

xsi:noNamespaceSchemaLocation="ehcache.xsd"

此位置必须是绝对路径

像这样： ...Location="classpath:/yourPathInProject/ehcache.xml"

在此之前，您需要从 [http://www.ehcache.org/ehcache.xsd](http://www.ehcache.org/ehcache.xsd)下载 ehcache.xml 并将其放在您的路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-13T06:07:37.537

对于 ehcache 3.x，您可以参考以下 ehcache.xml 模板：

```
 <config
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns='http://www.ehcache.org/v3'
    xsi:schemaLocation="
        http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd">

  <cache alias="ready-cache">
    <key-type>java.lang.Long</key-type>
    <value-type>com.pany.domain.Product</value-type>
    <loader-writer>
      <class>com.pany.ehcache.integration.ProductCacheLoaderWriter</class>
    </loader-writer>
    <heap unit="entries">100</heap>
  </cache>

</config> 
```

基本上，对 ehcache 的 xsd 的引用会根据上述 xsd 声明进行更新。有关如何为 ehcache 3.x 使用不同 XML 选项的更多详细信息，请参阅[JSR 的 ehcache 文档](http://www.ehcache.org/documentation/3.0/107.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:56:56.803

尝试这样的事情，这是我在我的项目中使用的

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:ehcache="http://www.springmodules.org/schema/ehcache"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springmodules.org/schema/ehcache http://www.springmodules.org/schema/cache/springmodules-ehcache.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

    <ehcache:config configLocation="classpath:ehcache.xml" />

    <ehcache:proxy id="saleDAO" refId="saleDAOTarget">
        <ehcache:caching cacheName="saleCache" methodName="findAll"/>
        <ehcache:flushing cacheNames="saleCache" methodName="saveSaleRecord" when="after"/>
    </ehcache:proxy>

    <bean id="saleDAOTarget" class="byteco.de.spring.SaleDAOImpl">
        <property name="namedParameterJdbcTemplate" ref="jdbcTemplate"></property>
    </bean>

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="username" value="root"/>
        <property name="password" value="password"/>
        <property name="initialSize" value="5"/>
        <property name="url" value="jdbc:mysql://localhost:3306/demo"/>
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate">
        <constructor-arg type="javax.sql.DataSource" ref="datasource"/>
    </bean>
</beans> 
```

**ehcache.xml**

```
<ehcache>
    <defaultCache
            maxElementsInMemory="500" eternal="true" overflowToDisk="false" memoryStoreEvictionPolicy="LFU"/>
    <cache name="contactCache" maxElementsInMemory="500" eternal="true" overflowToDisk="false"
           memoryStoreEvictionPolicy="LFU"/>
</ehcache> 
```

# jquery - Asp.Net 中的 jQuery 选项卡控件

> ID：12615796
> 
> 赞同：0
> 
> 时间：2012-09-27T06:57:54.167
> 
> 标签：jquery, asp.net, tabcontrol

我在我的 asp.net 页面中使用了选项卡控件，每当我在相应选项卡中出现任何事件（例如下拉选择后显示）时，选项卡页就会从主页中出来，并且在没有 CSS 和脚本的情况下显示。我在这里遗漏了什么吗？我无法分享代码，但想知道我是否没有达到目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:01:11.770

我自己得到了答案，必须在主页内创建一个包含选项卡控件的 div，然后触发的事件将顺利运行，前提是必须使用正确的 jquery 库以及同一主页中的 css。

```
<div class="">
<div id="example">
<ul>
     <li><a href="#tab-1"><span>Data1</span></a></li>
     <li><a href="#tab-2"><span>Data2</span></a></li>
     <li><a href="#tab-3"><span>Data3</span></a></li>
 </ul>
<div id="tab-1">content</div>
<div id="tab-2">content</div>
<div id="tab-3">content</div>
</div>
</div> 
```

对应的 div 将包含需要在对应的标签点击时显示的页面内容。

# asp.net - 排序和搜索 mvc 列表视图而不调用服务器

> ID：12615798
> 
> 赞同：0
> 
> 时间：2012-09-27T06:58:15.783
> 
> 标签：asp.net, asp.net-mvc

我有一个简单的 ASPNET MVC 列表视图，它传递一个自定义构建的模型对象。第一次通过我需要去服务器并返回一个对象列表并显示在视图上。我正在构建视图以允许按不同的列排序、搜索和分页，并且我已经为此编写了所有代码。但是，每次我去服务器并提取数据时。

我可以使用我第一次获得的列表来减少这些数据库往返吗？如果是这样，我如何将它从视图传递回控制器？

Viewdata, Tempdata - 或者通过`formcollection`也许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:07:25.857

看看[http://www.knockoutjs.com](http://www.knockoutjs.com)这将为您提供很多功能来操作浏览器中的列表并保持视图同步。

但这实际上取决于您的对象列表有多大。如果数据量很大，它实际上是您已经实现的方式更实用的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:49:59.473

实际上，如果你回到你的控制器，你就会去服务器。

我想你的意思是你不想再次重新查询你的数据库来获取过滤、排序和分页的数据，并且只想对模型视图类中的数据进行排序或分页，数据已经在视图上。

请记住，这种类型的操作不一定总是比重新查询数据库更好，因为您将通过网络将更多信息发送回服务器，并且通常以编程方式对类似列表的元素进行排序是操作较少比从数据库中排序检索优化。

这里的关键决定将在您的数据库查询的成本和您的列表视图元素的大小之间。如果您的查询很轻并且获得（或可以获得）很多结果，那么对其进行排序将比重新查询更昂贵，而如果您的查询很复杂并且通常会抛出很少的结果，那么实际上，在不重新查询数据库的情况下对数据进行排序会更有效.

尝试为排序创建一个新的控制器方法，此方法将作为参数接收您的列表视图模型类，并且您需要以某种方式将该信息发送回您的服务器。我通常使用 AJAX 调用，将数据作为 JSON 传递给控制器​​。

# html - HTML：使启动图像具有相对的可点击区域

> ID：12615800
> 
> 赞同：0
> 
> 时间：2012-09-27T06:58:16.403
> 
> 标签：html, css, image

我的网站有一个启动页面，它在主 div 上作为背景图像实现：

```
#main
{
    background:url('../img/splash.jpg');
    background-repeat:no-repeat;
    width:1024px;
    height:768px;
    margin:auto;
}

...
<body>
     <div id="main">
     ...
     </ div>
</body>
... 
```

问题是我想让背景图像的一部分可点击进入我们的网站。我通过在我想要使用位置可点击的区域周围设置一个透明框来实现这一点：绝对：

```
#logo-link 
{ 
        position: absolute; 
        top: 30px; 
        left: 350px; 
        width: 600px; 
        height: 280px; 
        background-color: transparent; 
}

...
<div>
    <a id="logo-link" href="/mylink"></a>
</div>
... 
```

当我在我的屏幕上设置盒子时，这有效，但我注意到盒子在其他屏幕分辨率上移动。到了分辨率更高的屏幕将框转移到阻止在我的网站上注册的表单域的地步！

我相信我对启动页面的可点击区域的实现很差，你能告诉我如何做得更好吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:00:51.130

[***[现场演示][1]***](http://tinkerbin.com/O3yFKLTl) ....................您好，现在定义`**#main**` `position:relative;`

像这样

```
#main{
position:relative;
} 
```

[***[现场演示][2]***](http://tinkerbin.com/O3yFKLTl)

# javascript - 在再次打开之前检查 asp.net 网络表单是否已经在本地浏览器中运行

> ID：12615801
> 
> 赞同：1
> 
> 时间：2012-09-27T06:58:19.643
> 
> 标签：javascript, asp.net, webforms

我正在开发一个应用程序，如果我要关闭一个 webform(child.aspx) ，在关闭该表单之前，它必须检查另一个 web form(parent.aspx) 是否已经在运行。如果它已经在运行，它必须刷新该页面。否则它必须打开该页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:02:43.957

您必须在 javascript 中而不是在 asp.net 中执行此操作，因为子节点和父节点在客户端都是打开的，服务器无法控制子节点是否关闭。

在您的情况下，我建议您在模态对话框或可以控制父/子关系的弹出窗口中从 parent.aspx 打开 child.aspx

# f# - 如何从 F# 控制台应用程序写入 appSettings？

> ID：12615803
> 
> 赞同：2
> 
> 时间：2012-09-27T06:58:32.590
> 
> 标签：f#, console-application, configurationmanager

尽管这似乎是一个简单的问题，但我无法从 F# 控制台应用程序写入配置文件。我的最后一次尝试看起来像

```
let config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal)
// config.AppSettings.SectionInformation.AllowExeDefinition <-ConfigurationAllowExeDefinition.MachineToLocalUser
match self.FileName with
| Some name -> config.AppSettings.Settings.["FileName"].Value <- name
| None -> ()
config.Save(ConfigurationSaveMode.Modified) 
```

我得到了各种各样的错误。与此代码对应的是

> System.NullReferenceException：对象引用未设置为对象的实例。在 System.Configuration.ConfigurationElement.SetPropertyValue(ConfigurationProperty prop, Object value, Boolean ignoreLocks) ...

F# 中没有好的文档，我发现很难遵循 C#/VB 文档。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:22:56.283

您必须检查 null 并相应地更新或添加。

像这样的东西：

```
let config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal)
let settings = config.AppSettings.Settings
let set (s:KeyValueConfigurationCollection) key value = 
   match s.[key] with 
   | null -> s.Add(key,value)
   | x    -> x.Value <- value
match self.FileName with
| Some name -> set settings "Filename" name
| _         -> () 
```

# java - JDO3.0 增强 GAE 1.7.2 中的故障

> ID：12615817
> 
> 赞同：0
> 
> 时间：2012-09-27T06:59:43.900
> 
> 标签：java, google-app-engine, datanucleus

我使用 ant 来构建我的 GAE WebApp。这是数据核目标：

```
<target name="datanucleusenhance" depends="compile"
    description="Performs enhancement on compiled data classes.">
    <enhance_war war="war">
    </enhance_war>
</target> 
```

这是我得到的错误：

org.datanucleus.exceptions.NucleusException：插件（捆绑）“org.datanucleus”已注册。确保类路径中没有同一个插件的多个 JAR 版本。URL“文件：/home/xxxx/.eclipse/org.eclipse.platform_4.2.0_1473617060/plugins/com.google.appengine.eclipse.sdkbundle_1.7.2/appengine-java-sdk-1.7.2/lib/opt/ tools/datanucleus/v1/datanucleus-core-1.1.5.jar" 已经注册，并且您正在尝试注册位于 URL "file:/war/WEB-INF/lib/datanucleus-core-3.1\. 0-m5.jar。”

我试过这个蚂蚁目标：

```
<target name="datanucleusenhance" depends="compile" description="Performs enhancement on compiled data classes.">
    <enhance_war war="war">
        <args>
            <arg value="-enhancerVersion" />
            <arg value="v3.1.0" />
        </args>
    </enhance_war>
</target> 
```

我试图删除“datanucleus-core-1.1.5.jar”。那么错误是：

```
java.lang.RuntimeException: Unexpected exception
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:76)
    at com.google.appengine.tools.enhancer.Enhance.<init>(Enhance.java:71)
    at com.google.appengine.tools.enhancer.Enhance.main(Enhance.java:51)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:74)
    ... 2 more
Caused by: java.lang.NoClassDefFoundError: org/datanucleus/OMFContext
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:172)
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:150)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1157)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.datanucleus.OMFContext
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.enhancer.EnhancerLoader.loadClass(EnhancerLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 10 more 
```

如何将 JDO3.0 与 GAE1.7.2 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T21:06:39.003

使用 Intellij 的 GAE 插件，我必须删除默认配置的 orm 目录，并专门添加更高版本的库。

GAE SDK 的组织方式如下：

```
/lib/user/orm (default persistence libraries I removed) 
```

和

```
/lib/opt/user/datanucleus/v2 
```

要在 IntelliJ 中访问此配置，请从我的项目的上下文菜单中：

```
{context menu} -> Open Module Settings -> Libraries -> AppEngine ORM 
```

*   使用`[-]`按钮删除此目录中的 jar： `/lib/user/orm`
*   使用`[+]`按钮在此目录中添加 jar：`/lib/opt/user/datanucleus/v2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:00:15.680

得到了答案。正确的蚂蚁目标应该是：

```
<target name="datanucleusenhance" depends="compile" description="Performs enhancement on compiled data classes.">
    <enhance_war war="war">
        <args>
            <arg value="-enhancerVersion" />
            <arg value="v2" />
        </args>
    </enhance_war>
</target> 
```

该版本是 GAE JDO/JPA 插件版本。（感谢 DataNucleus！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:17:07.527

您似乎对使用哪个版本的依赖 jar 感到困惑。GAE 1.7.2 使用 GAE JDO/JPA 插件 v2.x，而后者又需要 DataNucleus 3.x。您显然有（各种）DataNucleus 1.x jars。

# java - 在大小合适的 java 项目中可维护的参数设置的设计模式

> ID：12615820
> 
> 赞同：4
> 
> 时间：2012-09-27T06:59:49.223
> 
> 标签：java, maintainability

我正在寻找有关如何为我的 java 程序管理许多不同参数设置的具体想法。我知道这个问题有点分散，但我需要一些关于大局的想法，以便我的代码变得更易于维护。

我的项目所做的是对数据执行许多处理步骤，主要是文本。这些处理步骤是具有不同复杂性的算法，通常具有许多设置。我还想更改配置文件使用的处理步骤。

我的程序的原因是进行可重复的实验，因此我需要能够完整地查看代码不同部分中使用的所有参数，最好是采用良好的格式。

在这个（原型）阶段，我在源代码中有如下设置：

```
public static final param1=0.35; 
```

并且负责某些处理步骤的每个类都有自己的硬编码设置。这实际上是相当可怕的，因为没有简单的方法来改变事物，甚至无法查看做了什么以及使用了哪些参数/设置。

我的想法是为所有设置提供一个中央键/值存储，它也支持所有设置的转储。例子：

```
k:"classA_parameter1",v:"0.35"
k:"classC_parameter5",v:"false" 
```

但是，我真的不想将参数存储为字符串，而是将它们与实际的 java 类或对象相关联。

拥有一个管理一切的单例“SettingsManager”是否更聪明。或者在 main 可以访问的每个类中都有一个 SettingsManager 对象？我不太喜欢存储设置的字符串描述，但我看不到任何其他方式（假设一个设置是使用的 SAXparser 实现，另一个参数是双精度，例如百分比），因为我真的不想存储它们作为对象并投射它们。

非常感谢有关相关设计模式的经验和页面链接。

为了澄清，我的实验可以被视为一系列处理来自文件/数据库的数据的算法。这些算法根据它们在整个过程中的任务分为不同的类，例如

```
Experiment //main
   InternetLookup //class that controls e.g. web scraping
      ThreadedWebScraper 
      LanguageDetection //from "text analysis" package
   Statistics    //Calculate and store statistics
      DatabaseAccess
   DecisionMaking //using the data that we have processed earlier, make decisions (machine learning)
      BuildModel
      Evaluate 
```

每个最低级别的类都有参数并且是不同的，但我仍然想要了解正在发生的一切。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T07:09:07.987

您有以下选项，从最简单的选项开始：

1.  [属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)文件_
2.  [Apache Commons 配置](http://commons.apache.org/configuration/)
3.  [春天框架](http://www.springsource.org/spring-framework)

后者允许从 XML 配置文件创建任何 Java 对象，但请注意，它是一个框架，而不是库：这意味着它会影响整个应用程序的设计（它促进了控制反转模式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T07:13:18.440

这个轮子已经被发明了多次。

从最基本的 java.util.Properties 到更高级的框架，如 Spring，它提供了值注入和类型转换等高级功能。

自己构建可能是最糟糕的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T07:15:07.597

也许不是您问题的完整答案，但需要考虑以下几点：

将值存储为字符串（并通过 SettingsManager 将字符串解析为其他类型）是常用的方法。如果您的配置值太复杂而无法执行此操作，那么它可能不是真正的配置值，而是您实现的一部分。

考虑通过构造函数参数注入每个类所需的单独配置值，而不是仅仅传入整个 SettingsManager 对象（参见[Demeter 法则](http://en.wikipedia.org/wiki/Law_of_Demeter)）

尽可能[避免创建单例设置管理器，单例会损害可测试性并以各种方式破坏应用程序的设计。](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T07:22:12.823

If the number of parameters is big I would split them to several config files. Apache Commons Configuration, as mentioned by @Pino is really a nice library to handle them. On the Java-side I would probably create one config-class per file and wrap Commons Configuration config to load settings, eg:

```
class StatisticsConfig {

   private Configuration config = ... ;

   public double getParameter1() {
        return config.getDouble("classA_parameter1");
   }
} 
```

This may need quite a lot of boilerplate code if the number of parameters is big but I think it is quite clean solution (and easy to refactor).

# java - 在 JNI 创建的 dll 中使用 dll 的问题

> ID：12615824
> 
> 赞同：0
> 
> 时间：2012-09-27T07:00:10.133
> 
> 标签：java, c++, dll, visual-studio-2005, java-native-interface

我正在开发一个 Java 项目，在该项目中我必须使用第三方 dll（比如说 abc.dll）。所以我使用 JNI 创建了一个本地头文件。

然后我在 vs2005（典型的 win32 应用程序）上创建了一个 dll 项目，并添加了由 JNI 创建的头文件。我为项目选择了 clr old syntax support，并添加了 abc.dll 作为对我项目的引用。

到目前为止，一切正常。这是问题所在。我使用 abc.dll 中的一些方法实现了头文件中定义的方法。abc.dll 有一个名为“abc”的类，这就是我所做的：

```
abc *abcObj = new abc(); abcObj->callSomeMethod(); 
```

我从解决方案中构建，一切正常。但是当我运行我的 Java 程序时，我从 JVM 收到一个错误，告诉我本机代码崩溃了？！？！我调试了它，问题出在 new() 中。它根本无法实例化 abcObj。

然后我尝试了一个使用该 abc.dll 的 c++ 应用程序。有效。

我认为 JNI 或托管/非托管的东西一定有问题。我在 c/c++ 方面没有真正的经验，所以我不太了解（至少我现在没有时间了解）。我唯一要做的就是使用第三方 dll 创建一个包装 dll 并在我的 java 应用程序中使用该包装 dll。

任何帮助将不胜感激。

提前致谢...

-海达尔

**编辑：**我拥有第三方 dll 所需的所有 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:13:14.147

我已经解决了这个问题。问题是我将项目创建为 win32 应用程序并选择 dll。我创建了一个 clr 应用程序，一切顺利。我按照[这里](http://codefry.blogspot.com/2012/01/calling-net-dlls-from-java-code-without.html)的说明进行操作。

# .net - .NET 到 VBA 包装器

> ID：12615826
> 
> 赞同：0
> 
> 时间：2012-09-27T07:00:23.340
> 
> 标签：.net, vba, interop

我在 .NET dll 中有一组类，我需要在 VBA 中使用它们。一些成员被声明为可为空的问题，所以我必须为这些类制作一个包装器，我可以在 VBA 中使用它。大约有 20 个课程，所以我正在寻找一些工具或技术来使其自动化，有什么想法吗？

并重新提出问题 - 当我准备好这个包装器时 - 是否有一些简单的方法可以复制对象，例如：

```
For each [class member] of MyClass
    MyNewClass([class member])=MyClass([class member])
next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:43:22.767

如果您使用 VBA，则您使用的是 COM 互操作。一般来说，明确定义 COM 接口被认为是一种很好的做法，即：

```
[ComVisible]
public class MyClass
{
    ...
} 
```

你应该使用：

```
[ComVisible]
public interface IMyClass
{
    ...
}

[ComVisible]
[ClassInterface(ClassInterfaceType.None)]
public class MyClass : IMyClass
{
    ...
} 
```

一旦你这样做了，就很容易了：你只需要在`IMyClass`接口中避免可以为空的类型，并显式地实现它，例如：

```
[ComVisible]
public interface IMyClass
{
    ...
    public int MyInt {get; }
}

[ComVisible]
[ClassInterface(ClassInterfaceType.None)]
public class MyClass : IMyClass
{
    ...
    public int? MyInt {get; }

    int IMyClass.MyInt
    {
        get { return this.MyInt ?? 0; }
    }
} 
```

顺便说一句，以这种方式使用显式接口实现的另一个好处是，您可以在传播到 COM 互操作客户端之前记录异常，并获取有用的堆栈跟踪信息，这些信息在异常传播到 COM 时会丢失。例如

```
[ComVisible]
public interface IMyClass
{
    ...
    public void MyMethod();
}

[ComVisible]
[ClassInterface(ClassInterfaceType.None)]
public class MyClass : IMyClass
{
    ...
    public void MyMethod()
    {
    }

    void IMyClass.MyMethod()
    {
        try
        {
            this.MyMethod();
        }
        catch(Exception ex)
        {
            ... log exception ex here ...
            throw;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:31:04.347

可能适合该问题的一种方法是使用 Microsoft 的 T4。CS 2010 中可用，我相信 2012 年会更好。如果使用 2010，请使用有形 T4 编辑器的免费版本。

20 听起来不像很多类。也许手工编码可能更快，但 T4 提供了一种自动生成 API 的方法，如果源类发生变化，这将带来好处。

# android - YouTube 视频未在 webView 中打开

> ID：12615827
> 
> 赞同：5
> 
> 时间：2012-09-27T07:00:23.720
> 
> 标签：android, video, webview, youtube

问题是我可以加载 YouTube 网站，浏览视频，

但是当我点击播放视频时，什么也没有发生。

视频只是像被选中一样得到橙色闪烁，

但不会开始加载或播放。

我使用的是安卓 2.2。

我在 web 视图中使用的方法是：

**webView.getSettings().setJavaScriptEnabled(true); webView.getSettings().setPluginState(PluginState.ON); webView.getSettings().setPluginsEnabled(true);**

![在此处输入图像描述](../Images/8a8d86f7fe4e1b19f1c0510d6572e28b.png)

非常感谢任何帮助，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:07:37.480

当我发现 YouTube 在使用的​​默认浏览器中工作时.. 这个解决方法.. 让它工作..

```
if (url.contains("youtube")) {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
} else {
    webView.loadUrl(url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:40:28.733

[您可以从此处查看](https://code.google.com/p/html5webview/source/checkout)HTML5 视频播放器源代码

# python-3.x - 列表推导和矩阵（raws）

> ID：12615834
> 
> 赞同：0
> 
> 时间：2012-09-27T07:00:48.177
> 
> 标签：python-3.x

请看一下这个收缩：

```
M = [[1,2,3],
     [4,5,6],
     [7,8,9]]

T = [row[1] for row in M]
print(T) 
```

结果是 [2, 5, 8]

我设法在这里找到了一些东西：http: [//docs.python.org/py3k/tutorial/datastructures.html#nested-list-comprehensions](http://docs.python.org/py3k/tutorial/datastructures.html#nested-list-comprehensions)

但我不满意我对这个“原始”方案的理解。你能告诉我在文档中的其他地方我可以阅读它吗？

顺便说一句，为什么是生的？好像是柱子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:20:53.710

```
T = [row[1] for row in M] 
```

这是一个[列表理解](http://en.wikipedia.org/wiki/List_comprehension)。列表推导基本上允许您在迭代其他可迭代对象时动态创建列表（在本例中`M`）。

上面的代码或多或少与此相同：

```
T = []             # create empty list that holds the result
for row in M:      # iterate through all 'rows' in M
    cell = row[1]  # get the second cell of the current row
    T.append(cell) # append the cell to the list 
```

这一切都只是放在一行中并且效率更高，但基本思想是相同的。

`M`是一个矩阵，但您选择的内部表示是一个列表列表；或*行*列表。尽管您无法直接访问矩阵中的列，但您*想*`T`选择矩阵的单列。因此，您基本上遍历每一*行*，获取您感兴趣的列的单元格并使用列的单元格创建一个新列表（因为列表通常是水平对齐的，因此您严格获取列的转置向量）。*`T`*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:11:10.950

您遍历行并获取该行的第二个元素。然后从行中收集提取的元素。这意味着您已经提取了该列。

从右到左阅读*列表理解。*它说：

*   循环遍历矩阵`M`以获得`row`每次 ( `for row in M`)。
*   将表达式应用于`row`以获得您需要的内容（此处`row[1]`）。
*   遍历构造的结果并构建它们的列表 ( `[`... `]`)。

最后一点使它成为*列表*理解。`[`和之间的东西`]`称为*生成器表达式*。你也可以试试：

```
column = list(row[1] for row in M) 
```

你得到完全一样的。那是因为`list()`从任何可迭代对象构造一个列表。而生成器表达式就是这样可迭代的东西。你也可以试试：

```
my_set = set(row[1] for row in M) 
```

获取构成列的元素集。语法上的简短形式是：

```
my_set = {row[1] for row in M} 
```

它被称为*集合理解*。并且还可以有这样的*字典理解*：

```
d = { row[1]: True for row in M } 
```

这里相当人为地，将`row[1]`用作键，将`True`用作值。**

# mysql - 在 PHPMyAdmin/MySQL 中导出表描述

> ID：12615836
> 
> 赞同：1
> 
> 时间：2012-09-27T07:00:49.080
> 
> 标签：mysql, sql, phpmyadmin

```
 DESC table_name 
```

上面的 SQL 允许我在 PHPMyAdmin 中获取表描述。我想将它导出到文档的文本文件或 word 文件。有没有可能的方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:32:34.317

您可以使用[SELECT...INTO OUTFILE](http://dev.mysql.com/doc/refman/5.1/en/select.html)语句从[`information_schema`. `tables`](http://dev.mysql.com/doc/refman/5.5/en/tables-table.html)或`information_schema`。`columns`桌子 -

```
SELECT * FROM information_schema.tables INTO OUTFILE dump_tables.csv 
```

查询会将结果集输出到指定的 CSV 文件中。

# php - 使用 Model->find('all') 返回具有以下结构的数组

> ID：12615839
> 
> 赞同：0
> 
> 时间：2012-09-27T07:00:58.993
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-model

我将网站（cakephp 2.1）从测试服务器（PHP 版本 5.3.10）移动到实时服务器（PHP 版本 5.3.17）。在新情况下，我所有的代码都开始抱怨未定义的索引。在调试数组时，我看到数组索引变成了数字而不是模型名称！？我使用完全相同的 cakephp 安装可能是什么问题？

下面是 2 个数组示例。

## 这就是数组应该的样子。

```
Array
(
    [0] => Array
        (
            [Post] => Array
                (
                    [id] => 152
                    [menu_item_id] => 1
                )

        ) 
```

## 这是实时服务器上的阵列

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [id] => 152
                    [menu_item_id] => 1

                )

        ) 
```

# android - Phonegap 新版本适用于 IOS 应用程序开发中的数据库位置

> ID：12615840
> 
> 赞同：0
> 
> 时间：2012-09-27T07:01:05.057
> 
> 标签：android, iphone, objective-c, ios, cordova

我正在使用带有 Phone-gap 1.3 的 IOS 5.1，默认情况下，phonegap 会查看 ../Library/Caches 文件夹中的数据库。我想升级到合适的更高版本，如 1.8 或 2.0。这些新版本是否默认支持在 ../Documents 目录中查找数据库，因为这是一个更可取的位置，而不是 /caches 目录，因为 IOS 可以在遇到内存不足问题时随时从 /Cache 删除数据。

考虑到上述几点，哪个是合适的电话间隙版本，再加上我有 android 平台也使用相同的电话间隙代码。？任何建议都非常受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:49:46.927

2.1 版（最新版）仍将文件存储在同一位置，但解决了文件被删除的问题。对于 iOS 5.1，它需要备份数据库。对于 iOS 6，它设置了一个属性，告诉 iOS 保留数据库和 Web 内容。

在下一个版本之前，您可能希望从 GitHub 获取最新的源代码，因为 2.1 版本有一个小错误，即第一次运行应用程序时本地存储数据没有持久化。从第二次开始一切都很好。

**编辑**

这个错误[https://issues.apache.org/jira/browse/CB-330](https://issues.apache.org/jira/browse/CB-330)讨论了 5.1 中的问题以及 PhoneGap 如何解决它。

**再次编辑**

此错误[https://issues.apache.org/jira/browse/CB-1535](https://issues.apache.org/jira/browse/CB-1535)详细说明了使 localStorage 数据从 iOS 6 上的第一次安装时保持不变所需的代码修复。

# python - 我在 Python 中的状态机陷入无限循环

> ID：12615842
> 
> 赞同：1
> 
> 时间：2012-09-27T07:01:07.647
> 
> 标签：python, state-machine

我是 python 新手。我的代码陷入无限循环，不断添加和打印`numberCycles`。我在 C++ 中的逻辑工作正常。你能帮忙找出原因吗？

*   第一行输入是模拟次数。
*   下一行是单个生殖周期的分钟数。
*   下一行是行数 ( `x`)，后跟一个空格，然后是列数 ( `y`)。
*   下一组 y 行将包含`x`多个字符，一个句点 ( `.`) 代表一个空格，一个大写字母`B`代表一个开始的 Bunny 尝试复制到`up`, `right`, `down`,`left`方向。如果有一个现有的兔子，那么它会进入睡眠状态。

* * *

输入.txt

```
2     # 2 simulations
5     # 5 minutes/cycle
3 3   # 3*3 map
...
.B.
...
1
4 4
B.BB
..B.
...
B.B 
```

* * *

现货.py

```
#!/usr/bin/env python

class Spot(object):
    isBunny = bool()
    nextCycle = 0
    UP = 0
    RIGHT = 1
    DOWN = 2
    LEFT = 3
    SLEEP = 4

    def __init__(self, newIsBunny):
        self.isBunny = newIsBunny
        self.nextCycle = self.UP

    def setNextCycle(self):
        if (self.nextCycle != self.SLEEP):
            self.nextCycle += 1

    def getNextCycle(self):
        return self.nextCycle

    def getIsBunny(self):
        return self.isBunny

    def makeBunny(self):
        if not self.isBunny:
            self.nextCycle = self.UP
        self.isBunny = True 
```

兔子.py

```
#!/usr/bin/env python
from Spot import Spot
import os

class Bunny(object):    
    @classmethod
    def main(cls, args):
        with open(os.path.expanduser('~/Desktop/input.txt')) as f: 
            numSims = int(f.readline()) 
            myMap = []  
            print numSims
            minPerCycle= int(f.readline()) 
            print minPerCycle
            for k in xrange(numSims): 
                xyLine= f.readline()
                row = int(xyLine.split()[0]) 
                col = int(xyLine.split()[1])  
                print row,col
                for i in range(0,row): 
                    myLine = f.readline() 
                    myMap.append([]) 
                    for j in range(0,col): 
                        myMap[i].append(Spot(myLine[j] == 'B')) 

                numCycles = 1

                if cls.isFilled(row,col,myMap):
                    numCycles = 0

                while not cls.isFilled(row,col,myMap):
                    numCycles += 1
                    print numCycles
                    for m in range(0,row): 
                        for n in range(0,col): 
                            if myMap[m][n].getIsBunny():
                                if myMap[m][n].getNextCycle() == Spot.UP:
                                    if m>0:
                                        myMap[m-1][n].makeBunny()
                                    break
                                elif myMap[m][n].getNextCycle() == Spot.RIGHT:
                                    if n<col-1:
                                        myMap[m][n+1].makeBunny()
                                    break
                                elif myMap[m][n].getNextCycle() == Spot.DOWN:
                                    if m<row-1:
                                        myMap[m+ 1][n].makeBunny()
                                    break
                                elif myMap[m][n].getNextCycle() == Spot.SLEEP:
                                    if n>0:
                                        myMap[m][n- 1].makeBunny()
                                    break
                            myMap[m][n].setNextCycle() 
                time = numCycles * minPerCycle
                print "It took " , time , " minutes for the bunnies to take over the world!\n"
                del myMap[:]
            f.close()

    @classmethod
    def isFilled(cls,row,col,myMap):
        for a in range(0,row): 
            for b in range(0,col): 
                if not myMap[a][b].getIsBunny():
                    return False
        return True

if __name__ == '__main__':
    import sys
    Bunny.main(sys.argv) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:38:45.817

它永远不会向左走。此外，您为内部循环设置了一个中断，因此`myMap[m][n].setNextCycle()`永远不会调用。我刚刚看到[您的 C++ 代码](https://stackoverflow.com/questions/12596821/how-to-pass-2d-array-object-to-function-in-c)，您将其翻译成 Python 时出现错误（使用`Spot.SLEEP`而不是`Spot.LEFT`）。

该`break`语句在 C++ 中是有意义的，因为您想打破`switch`. 在这里，您正在使用`if..else`.

它应该是这样的：

```
while not cls.isFilled(row, col, myMap):
    numCycles += 1
    print numCycles
    for m in range(0,row): 
        for n in range(0,col): 
            if myMap[m][n].getIsBunny():
                if myMap[m][n].getNextCycle() == Spot.UP:
                    if m>0:
                        myMap[m-1][n].makeBunny()
                elif myMap[m][n].getNextCycle() == Spot.RIGHT:
                    if n<col-1:
                        myMap[m][n+1].makeBunny()
                elif myMap[m][n].getNextCycle() == Spot.DOWN:
                    if m<row-1:
                        myMap[m+ 1][n].makeBunny()
                elif myMap[m][n].getNextCycle() == Spot.LEFT:
                    if n>0:
                        myMap[m][n-1].makeBunny()

            myMap[m][n].setNextCycle() 
```

# c# - HTTP 响应 GZip 压缩

> ID：12615848
> 
> 赞同：3
> 
> 时间：2012-09-27T07:01:45.533
> 
> 标签：c#, http, gzip, tcpclient

我有一个处理 HTTP 请求的代理。

现在，当我收到 GZipped HTTP 响应时，我正在解压缩它：

```
MemoryStream ms = new MemoryStream();

if (response.ContentLength > 0)
  buffer = new Byte[response.ContentLength];
else
  buffer = new Byte[BUFFER_SIZE];

int bytesRead;
while ((bytesRead = responseStream.Read(buffer, 0, buffer.Length)) > 0)
{
  ms.Write(buffer, 0, bytesRead);
}

string resp = "";
if (response.ContentEncoding == "gzip")
  resp = Utilities.GZip.Unzip(ms.ToArray());
else
  resp = Encoding.UTF8.GetString(ms.ToArray()); 
```

Utilities.GZip.Unzip 的作用是：

```
using (var msi = new MemoryStream(bytes))
using (var mso = new MemoryStream())
{
  using (var gs = new GZipStream(msi, CompressionMode.Decompress))
  {
    CopyTo(gs, mso);
  }
  return Encoding.UTF8.GetString(mso.ToArray());
} 
```

到目前为止一切都很好，我可以阅读 HTML。

现在我必须将响应写回请求它的客户。

像这样：

```
byte[] outByte;
if (response.ContentEncoding == "gzip")
  outByte = Utilities.GZip.Zip(resp);
else
  outByte = Encoding.UTF8.GetBytes(resp);
outStream.Write(outByte, 0, outByte.Length); 
```

Utilities.GZip.Zip 在哪里：

```
var bytes = Encoding.UTF8.GetBytes(str);
using (var msi = new MemoryStream(bytes))
using (var mso = new MemoryStream())
{
  using (var gs = new GZipStream(mso, CompressionMode.Compress))
  {
    CopyTo(msi, gs);
  }
  return mso.ToArray();
} 
```

现在这是一个非常奇怪的行为，响应字节数组的长度为 16990（压缩），但我自己的压缩字节数组的长度为 19379。

客户端得到响应，但被切断了。

有什么建议么？

**编辑：**

供您参考，因为我将原始的 MemoryStream 原封不动地发送给客户端，一切都很好！

# javascript - 使用 Jquery 选择两个下拉值

> ID：12615850
> 
> 赞同：1
> 
> 时间：2012-09-27T07:01:50.347
> 
> 标签：javascript, jquery, jquery-plugins

我有一个下拉列表，我需要使用 Jquery 获取值。

请从我的手表上查看复制粘贴的行：

```
-       $("[id$='ddlEmployee']")    {...}   Object
+       [Methods]       
+       [0] {Count = 4} DispHTMLSelectElement
+       [1] {Count = 4} DispHTMLSelectElement
+       context {object}    DispHTMLDocument
        jquery  "1.7.2" String
        length  2   Number
+       prevObject  {...}   Object
        selector    "[id$='ddlEmployee']"   String 
```

控件名称为 ddlEmployee，由于同一页面中有两个 ddlEmployee，它有两个数组 [0] 和 [1].. 从上图可以看出

每个数组都有选定的值。（该页面的第一个和第二个下拉菜单）。

我想获得每个下拉列表的选定值

我在下面尝试过：但没有奏效

1.  $("[id$='ddlEmployee']")[0].value 这个值总是第一个下拉菜单的第一项
2.  $("[id$='ddlEmployee']")[0][0].value 这也与上面的第一个下拉第一项相同
3.  $("[id$='ddlEmployee']")[0][0].val() 对象不支持此属性或方法错误
4.  $("[id$='ddlEmployee']")[0].val() 对象不支持此属性或方法错误
5.  $("[id$='ddlEmployee']")[1].val() 对象不支持此属性或方法错误
6.  $("[id$='ddlEmployee']").text() " -Select- value1 value2 value3 -Select- value1 value2 value3" 字符串
7.  $("[id$='ddlEmployee']")[0].text() 对象不支持此属性或方法错误
8.  $("[id$='ddlEmployee']")[1].text() 对象不支持此属性或方法错误

只有第 6 点我才得到一些价值。但这不足以区分哪个下拉列表的选定值。

如何编写代码，选择第一个和第二个下拉列表的值？

请参阅下面的 HTML 代码：

```
<DIV class="datagrid margin-10px-left margin-10px-right"><DIV>
<TABLE style="WIDTH: 100%; BORDER-COLLAPSE: collapse" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa class=datagrid border=1 rules=all cellSpacing=0>
<TBODY>
<TR>
<TH style="WIDTH: 90px" scope=col>DOA Name *</TH>
<TH scope=col>DOA For</TH>
<TH style="WIDTH: 80px" scope=col>Start Date *</TH>
<TH style="WIDTH: 80px" scope=col>End Date *</TH>
<TH scope=col>Remarks</TH>
<TH scope=col>&nbsp;</TH></TR>
<TR>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_txtName class=validate[DOAGridrequired] value="Fin Jack Uppal" readOnly type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$txtName jQuery17205721116313179826="5"> <A id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_lnkAddEmployee class=margin-20px-left href="javascript:__doPostBack('ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$lnkAddEmployee','')">Select</A> <!-- Added for Grid Level Ajax    --><!-- End of Grid Level Ajax  --></TD>
<TD><SELECT style="WIDTH: 120px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_ddlDOAFor class=validate[required] name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$ddlDOAFor jQuery17205721116313179826="6"> <OPTION value=0>- Select -</OPTION> <OPTION selected value=TravelAuthorization>TravelAuthorization</OPTION> <OPTION value=ExpenseReporting>ExpenseReporting</OPTION></SELECT> </TD>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_txtStartDate class=validate[DOADaterequired,DOApast[NOW],DOAdateRange[grp1],DateAddedXDays[21],custom[dd/mm/yyyy]] value=27/09/2012 type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$txtStartDate jQuery17205721116313179826="7"> <INPUT style="BORDER-RIGHT-WIDTH: 0px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_imgCal src="/Style%20Library/images/icon-cal.gif" type=image name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$imgCal> </TD>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_txtEndDate class=validate[DOADaterequired,DOApast[NOW],DOAdateRange[grp1],DateAddedXDays[21],custom[dd/mm/yyyy]] value=27/09/2012 type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$txtEndDate jQuery17205721116313179826="8"> <INPUT style="BORDER-RIGHT-WIDTH: 0px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_imgCal3 src="/Style%20Library/images/icon-cal.gif" type=image name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$imgCal3> </TD>
<TD><TEXTAREA style="WIDTH: 100%" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl02_txtRemark class="validate[maxSize[250],DOARemarksInsidePage ]" rows=2 cols=20 name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl02$txtRemark jQuery17205721116313179826="9"></TEXTAREA> </TD>
<TD><A href="javascript:__doPostBack('ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa','Select$0')"><IMG title="Remove row" border=0 src="/Style Library/images/icon-delete.gif"></A></TD></TR>
<TR style="BACKGROUND-COLOR: #f2f2f2" class=alt>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_txtName class=validate[DOAGridrequired] value="CCA Kanokporn Choochan" readOnly type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$txtName jQuery17205721116313179826="10"> <A id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_lnkAddEmployee class=margin-20px-left href="javascript:__doPostBack('ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$lnkAddEmployee','')">Select</A> <!-- Added for Grid Level Ajax    --><!-- End of Grid Level Ajax  --></TD>
<TD><SELECT style="WIDTH: 120px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_ddlDOAFor class=validate[required] name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$ddlDOAFor jQuery17205721116313179826="11"> <OPTION value=0>- Select -</OPTION> <OPTION selected value=TravelAuthorization>TravelAuthorization</OPTION> <OPTION value=ExpenseReporting>ExpenseReporting</OPTION></SELECT> </TD>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_txtStartDate class=validate[DOADaterequired,DOApast[NOW],DOAdateRange[grp1],DateAddedXDays[21],custom[dd/mm/yyyy]] value=27/09/2012 type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$txtStartDate jQuery17205721116313179826="12"> <INPUT style="BORDER-RIGHT-WIDTH: 0px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_imgCal src="/Style%20Library/images/icon-cal.gif" type=image name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$imgCal> </TD>
<TD><INPUT id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_txtEndDate class=validate[DOADaterequired,DOApast[NOW],DOAdateRange[grp1],DateAddedXDays[21],custom[dd/mm/yyyy]] value=27/09/2012 type=text name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$txtEndDate jQuery17205721116313179826="13"> <INPUT style="BORDER-RIGHT-WIDTH: 0px; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_imgCal3 src="/Style%20Library/images/icon-cal.gif" type=image name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$imgCal3> </TD>
<TD><TEXTAREA style="WIDTH: 100%" id=ctl00_PlaceHolderMain_SPWebPartManager_g_00ed9bd7_7fe8_45be_a81e_9898c9819caf_ctl00_gdvDoa_ctl03_txtRemark class="validate[maxSize[250],DOARemarksInsidePage ]" rows=2 cols=20 name=ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa$ctl03$txtRemark jQuery17205721116313179826="14"></TEXTAREA> </TD>
<TD><A href="javascript:__doPostBack('ctl00$PlaceHolderMain$SPWebPartManager$g_00ed9bd7_7fe8_45be_a81e_9898c9819caf$ctl00$gdvDoa','Select$1')"><IMG title="Remove row" border=0 src="/Style Library/images/icon-delete.gif"></A></TD></TR></TBODY></TABLE></DIV></DIV> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:03:53.603

[***jsFiddle 演示***](http://jsfiddle.net/4ePnt/)

使用`[ ]`索引返回底层 DOM 对象，它不是 jQuery 对象，因此不支持 jQuery 方法。使用 jQuery 方法过滤集合[`.eq()`](http://api.jquery.com/eq/)：

```
$("[id$='ddlEmployee']").eq(0).val();
$("[id$='ddlEmployee']").eq(1).val(); 
```

# sql-server - 具有交替工作日的假期表设计

> ID：12615852
> 
> 赞同：0
> 
> 时间：2012-09-27T07:01:54.203
> 
> 标签：sql-server, sql-server-2008, database-design

我有一个假期列表的表格设计。如果任何非法假期到来（比如全印度邦德），我们需要给交替工作日。如何设计交替工作日的表格？

```
SELECT [HolidayID]
  ,[HolidayName]
  ,[HolidayDate]
   ,[LocationID]
FROM [Holiday] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:20:57.350

我不确定我是否能 100% 得到你想在这里做的事情，但根据我的推测，这里有一个想法（当我错了时纠正我）

如果您的应用程序允许任何表修改，请为标志添加额外的列，例如 TempHoliday。如果是意外假期，请像其他任何一天一样进入假期，但打开临时标志。在年底，您可以删除所有 TempHoliday 值为 1 的假期。0 将是您的常规假期。

同样，我只是在推测，我不确定您的应用程序将允许您进行多少更改。

# iphone - 我可以为我的应用使用核心数据吗？

> ID：12615862
> 
> 赞同：0
> 
> 时间：2012-09-27T07:03:04.167
> 
> 标签：iphone, ios, sqlite, core-data, model

我正在制作一个显示薮形式的应用程序。表单数据将保存在本地并在将来上传。源代码已经存在，模型正在使用核心数据。

现在我们的客户向我们发起挑战。他们想在不更改应用程序的情况下添加一些新表单。表格的模型和布局将完全不同。

我的想法是创建一种存储表单配置的 XML 格式。表单将被创建并加载到服务器上。

我的问题是我可以使用核心数据来做到这一点，还是必须使用 SQLite(FMDB)。
谁能给我一些建议？真诚的感谢！！！

* * *

我的问题可能不清楚

如果我们使用核心数据，我们可以先创建模型类。但现在的问题是模型是动态的，它会被不同的形式（xml）改变。核心数据可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:07:08.790

我更喜欢使用核心数据，因为我发现它很容易编写代码并且代码行更少，因此代码中的混乱更少。
尽管您想使用什么取决于您，但任何数据库（核心数据或 SQLite）都可以完成您的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:30:06.253

你应该选择Core Data，因为它很容易做到，如果你想要任何例子，你会节省时间去做，那么我有一个很好的链接，可以教你如何做Core Data。这是您可以检查操作方式的链接。

[http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# phpexcel - PHPExcel：如何删除一行以便调整 $worksheet->getHighestDataRow？

> ID：12615863
> 
> 赞同：4
> 
> 时间：2012-09-27T07:03:04.370
> 
> 标签：phpexcel

如何在 PHPExcel (1.7.7) 中删除一行或多行，从而减少 getHighestDataRow 值？

removeRow() 的使用似乎并未实际调整 getHighestDataRow 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:57:30.903

正确，它没有。您会注意到这同样适用于列。

要么自己做，要么要求库作者修复 PHPExcel 中的这个错误。它是已知的，但在他们的优先级列表中较低，因此进一步请求修复它可能会提升该列表。

对于现有工作项，请参阅“[在 removeRow() 之后保留尾随空行](https://phpexcel.codeplex.com/workitem/14225)”。描述的问题更具体，但原因是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T16:28:40.953

FWIW，我相信这现在已经解决了。我正在使用 PhpExcel 1.8 并且 removeRow 的代码显式更改了最高数据行值，即：

```
public function removeRow($pRow = 1, $pNumRows = 1)
{
    if ($pRow >= 1) {
        $highestRow = $this->getHighestDataRow();
        $objReferenceHelper = PHPExcel_ReferenceHelper::getInstance();
        $objReferenceHelper->insertNewBefore('A' . ($pRow + $pNumRows), 0, -$pNumRows, $this);
        for ($r = 0; $r < $pNumRows; ++$r) {
            $this->getCellCacheController()->removeRow($highestRow);
            --$highestRow;
        }
    } else {
        throw new PHPExcel_Exception("Rows to be deleted should at least start from row 1.");
    }
    return $this;
} 
```

因此，如果这对任何人来说仍然是一个问题，那么更新您的 PhpExcel 版本应该可以解决它。

# c# - C# 更新 app.config 元素

> ID：12615867
> 
> 赞同：1
> 
> 时间：2012-09-27T07:03:14.867
> 
> 标签：c#, wcf, app-config

我有一个 WCF 服务器，它具有以下 app.config 文件：

```
<?xml version="1.0"?>
<configuration>   
  <system.serviceModel>   
    <services>
      <service name="MyService" behaviorConfiguration="DiscoveryBehavior">       
        <endpoint address="net.tcp://192.168.150.130:44424/ServerService/"/>        
        <endpoint name="udpDiscovery" kind="udpDiscoveryEndpoint"/>
      </service>
    </services>
  </system.serviceModel> 
</configuration> 
```

在另一台机器上安装时，我想让它使用该机器的地址自动更新地址。我有字符串，但我不明白如何更新 app.config 文件中的“地址”项。我有以下代码，但这不起作用：

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
config.AppSettings.Settings["address"].Value = "new_value";
config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection("appSettings"); 
```

我想它不起作用，因为我没有名为“appSettings”的部分，但是如何访问该“地址”项？我尝试了不同的解决方案，但没有任何效果。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:17:15.040

我找到了一个可行的解决方案。读取内存中的整个文件，找到节点，替换值然后覆盖文件。这在我的程序初始化之前在 OnStartup 方法上调用。

```
XmlDocument doc = new XmlDocument();
doc.Load("MyApp.exe.config");
XmlNodeList endpoints = doc.GetElementsByTagName("endpoint");
foreach (XmlNode item in endpoints)
{
    var adressAttribute = item.Attributes["address"];
    if (!ReferenceEquals(null, adressAttribute))
    {
        adressAttribute.Value = string.Format("net.tcp://{0}:44424/ServerService/", MachineIp);
    }
}
doc.Save("MyApp.exe.config"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:28:11.790

我通常删除密钥并将其添加回来以确保：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        config.AppSettings.Settings.Remove("address");
        config.AppSettings.Settings.Add("address", "new_value");
        config.Save(ConfigurationSaveMode.Modified);
        ConfigurationManager.RefreshSection("appSettings"); 
```

# python - 在 1..n 范围内以均匀概率查找 k 个非连续随机数

> ID：12615869
> 
> 赞同：3
> 
> 时间：2012-09-27T07:03:21.280
> 
> 标签：python, random, probability

我试图找到`k`范围内的随机数，`1..n`使得没有一个`k`数字是连续的。我想出的代码是

```
def noncontiguoussample(n,k):
    import random
    numbers = range(n)
    samples = []
    for _ in range(k):
        v = random.choice(numbers)
        samples.append(v)
        for v in range(v-1, v+2):
            try:
                numbers.remove(v)
            except ValueError:
                pass

    return samples 
```

*更新：我知道这个函数不会以统一的概率返回样本。根据我的有限测试，下面的 Amber 解决方案同时满足条件 (a) 样本的各个元素不连续，以及 (b) 所有可能的 k 个样本（来自 1...n）均以均匀概率生成。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:07:14.890

如果您使用`set`.

```
import random

def noncontiguoussample(n,k):
    numbers = set(range(1,n+1))
    samples = []
    for _ in range(k):
        v = random.choice(list(numbers))
        samples.append(v)
        numbers -= set([v-1, v, v+1])
    return samples 
```

然而，正如迈克尔安德森在评论中指出的那样，这种算法有时会在`n < 3*k`.

* * *

**一个不会失败（而且速度更快！）的更好算法可能如下所示：**

```
import random

def noncontiguoussample(n,k):
    # How many numbers we're not picking
    total_skips = n - k

    # Distribute the additional skips across the range
    skip_cutoffs = random.sample(range(total_skips+1), k)
    skip_cutoffs.sort()

    # Construct the final set of numbers based on our skip distribution
    samples = []
    for index, skip_spot in enumerate(skip_cutoffs):
        # This is just some math-fu that translates indices within the
        # skips to values in the overall result.
        samples.append(1 + index + skip_spot)

    return samples 
```

最后的数学是这样的：

*   1、我们可以选择的最小值
*   每个我们选择的号码加 1 ( `index`)，以说明选择的号码
*   加上我们在跳跃中的位置（总是至少增加一个）

因此，对于循环中的每次迭代，结果总是至少增加 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:00:12.500

这是一个不会失败的公正版本。（但比 Ambers 解决方案慢）。如果您给它一个没有解决方案的案例，它将永远循环（但这是可以修复的）。

```
#A function to check if the given set is OK
def is_valid_choice( s ):
  for x in s:
    if x-1 in s or x+1 in s:
      return False
  return True

#The real function
def noncontiguoussample(n,k):
  while True:
    s = random.sample(xrange(1,n+1),k)
    if is_valid_choice(s):
      return s 
```

# java - Birt 中的多个总计

> ID：12615882
> 
> 赞同：2
> 
> 时间：2012-09-27T07:04:23.300
> 
> 标签：java, birt

我正在尝试使用以下格式在 BIRT 中制作带有小计的动态报告

```
Field 1| Field 2|| Jan  |  Feb | March ||Before Feb 1| After Feb 1| Total
   A   |    B   ||  2   |   4  |    4  ||            |      8     |  10 
```

我正在使用交叉表。我已经设法通过编辑 Gui 来让它工作，但我无法通过编程方式生成相同的输出。我需要生成输出，因为报告字段是动态的。

我有三个措施

```
measure("beforeDateKilos") this is from a ComputedColumn
measure("afterDateKilos") this is from a ComputedColumn
measure("kilos"); 
```

在 GUI 中，我向总计单元格添加了一个网格。

```

------总计栏---------------
| ----------网格-------- |
| |2月1日之前| 2月1日之后| 总计 | |
| | 2 | 8 | 10 | |
| ---------------------------------- |
--------------------------------------

```

我能找到创建总计的唯一方法是调用以下方法：

```
CrosstabCellHandle columnTotalCrosstabCellHandle =  
xtabHandle.addGrandTotal(ICrosstabConstants.COLUMN_AXIS_TYPE); 
```

调用只会产生一列，并且只能更改标题列。如何生成具有自定义输出或具有小计的总计列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:52:33.473

我可能没有走在正确的轨道上，但我认为这至少会帮助你走上正确的方向。在该 Grand Total Grid 的绑定选项卡中，选择“Report Item”单选按钮并将其绑定到具有您需要的小计和其他值的适当表。为方便起见，您可能需要提供适当的表格装订标签。现在您可以使用该表上的所有可用字段。

# asp.net - 使用 asp.net 调用 apache 轴 web 服务

> ID：12615883
> 
> 赞同：0
> 
> 时间：2012-09-27T07:04:28.120
> 
> 标签：asp.net, web-services, soap, axis2, axis

我是网络服务的新手。我从第三方获得了一个 Url(sample)("http://123.123.100.100/services")。他们已经为我的 IP 地址分配了身份验证，从上面的 Url 我收到以下消息：

```
spm

Hi there, this is an AXIS service!
Perhaps there will be a form for invoking the service here... 
```

我尝试使用 asp.net 在 HTTP Soap 请求代码中得到如下错误。

```
The remote server returned an error: (500) Internal Server Error. 
```

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

`Exception Details: System.Net.WebException: The remote server returned an error: (500) Internal Server Error.`

我不知道如何继续正确调用该 Web 服务，而且我必须知道如何调用他们提供的服务？有人可以给出一些想法吗？

如果您需要更多信息。请告诉我。

提前致谢

# c# - 连接到 FTP 服务器 C# 时保持会话

> ID：12615886
> 
> 赞同：0
> 
> 时间：2012-09-27T07:04:35.303
> 
> 标签：c#, .net, c#-4.0, ftp, ftpwebrequest

我一直在开发一个从 FTP 服务器上传和下载多个文件的应用程序。我的问题是每次我想下载一个文件时，我都需要连接到 FTP 服务器，并检查证书。这是每次使用上传或下载方法时运行的代码。

```
reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp:...../inbox/" + fileName));
reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
reqFTP.UsePassive = true;
reqFTP.UseBinary = true;
reqFTP.KeepAlive = true;
reqFTP.ServicePoint.ConnectionLimit = files.Length;
reqFTP.Credentials = new NetworkCredential("username", "password");
reqFTP.EnableSsl = true;
ServicePointManager.ServerCertificateValidationCallback = Certificate; 
```

有没有办法只创建一次连接，并使用所需的证书进行会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:17:59.657

如果将此行添加到应用程序的入口点，您将解决证书问题：

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 
```

之后，您只需考虑如何下载/上传文件而忘记检查证书。希望这可以帮助。

# iphone - Objective C - 链接排序数组中的项目

> ID：12615889
> 
> 赞同：0
> 
> 时间：2012-09-27T07:04:45.950
> 
> 标签：iphone, objective-c, arrays, algorithm, sorting

我有一个排序的对象数组，按每个对象“速率”的 NSNumber 属性排序

我希望将每个对象链接到排序数组中具有不同速率值的下一个对象。

（即。我会得到这样的对象列表：

object1_link = first_object_with_2nd_highest_value

object2_link = first_object_with_3rd_highest_value

object3_link = first_object_with_4th_highest_value

......

object(N)_link = first_object_with_(N+1)_highest_value

)

有没有数学家或计算机科学家知道在 O(N) 时间内做到这一点的方法？（即不使用嵌套循环）？

否则 O(N^2)。

提前致谢。

# c# - HttpWebResponse-避免保存文件对话框

> ID：12615890
> 
> 赞同：1
> 
> 时间：2012-09-27T07:04:50.833
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, stream

我有以下方法从远程服务器读取响应

```
public string GetResponse()
        {
            string url = "http://remoteserver.com/getdata.jsp?id=515";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            Stream resStream = response.GetResponseStream();
            Encoding enc = System.Text.Encoding.GetEncoding(1252);
            StreamReader loResponseStream = new
            StreamReader(response.GetResponseStream(), enc);

            string ServerResponse = loResponseStream.ReadToEnd();

            loResponseStream.Close();
            response.Close();
            return ServerResponse;
        } 
```

在我的`actionresult`我调用这个方法如下

```
public ActionResult Index()
{
  string resp= GetResponse();

   return View();
} 
```

现在不是显示我查看浏览器而是提示我保存文件。如何避免这种情况并正常显示视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:27:47.427

尝试这个

```
public ActionResult Index()
{
    string resp= GetResponse();

    return Content(resp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:39:09.187

您可以使用自定义操作结果

```
public class TextActionResult : ActionResult
{
    readonly string _response;

    public TextActionResult() { }

    public TextActionResult(string response)
    {
        _response = response;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.Clear();
        context.HttpContext.Response.ContentType = "text/html";  //text/plain?
        context.HttpContext.Response.Write(_response);
        //you may want further tweaks here
        }
} 
```

和你的控制器

```
public TextActionResult Index()
{
   string resp= GetResponse();
   return new TextActionResult (resp);
} 
```

ps - 看看使用 WebClient，例如

```
string url = "http://remoteserver.com/getdata.jsp?id=515";
using (var client = new WebClient())
{
     client.Encoding = System.Text.Encoding.GetEncoding(1252);
     var result = client.DownloadString(url);
}
return result; 
```

# java - 哪个 jar 包含 IsoOutputStream 和 IsoBufferWrapperImpl 类

> ID：12615892
> 
> 赞同：1
> 
> 时间：2012-09-27T07:05:14.517
> 
> 标签：java, mp4

我正在从 mp4parser 的谷歌代码运行一个[示例 java 程序。](http://code.google.com/p/mp4parser/source/browse/trunk/isoparser/src/test/java/com/coremedia/iso/boxes/SampleToChunkBoxTest.java?r=191)

[我已经包含了来自mp4parser 站点](http://code.google.com/p/mp4parser/downloads/list)的相应 jar 文件 isoviewer-2.0-RC-15.jar

我需要添加任何其他罐子吗？

但是对于 IsoOutputStream 和 IsoBufferWrapperImpl 类，我在第 32 行和第 34 行遇到错误

如何以及为这两个类包含哪个库。

这是程序-

```
package com.coremedia.iso.boxes;

import com.coremedia.iso.IsoBufferWrapperImpl;
import com.coremedia.iso.IsoOutputStream;
import junit.framework.Assert;
import junit.framework.TestCase;

import java.io.ByteArrayOutputStream;
import java.nio.ByteBuffer;
import java.util.LinkedList;
import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: sannies
 * Date: 24.02.11
 * Time: 12:41
 * To change this template use File | Settings | File Templates.
 */
public class SampleToChunkBoxTest extends TestCase {

    public void testParse() throws Exception {
        SampleToChunkBox stsc = new SampleToChunkBox();
        List<SampleToChunkBox.Entry> l = new LinkedList<SampleToChunkBox.Entry>();
        for (int i = 0; i < 5; i++) {
            SampleToChunkBox.Entry e = new SampleToChunkBox.Entry(i, 1, i * i);
            l.add(e);
        }
        stsc.setEntries(l);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        stsc.getBox(new IsoOutputStream(baos));
        byte[] content = baos.toByteArray();

        SampleToChunkBox stsc2 = new SampleToChunkBox();
        stsc2.parse(new IsoBufferWrapperImpl(ByteBuffer.wrap(content, 8, content.length - 8)), content.length + 8, null, null);
        Assert.assertEquals(content.length, stsc2.getSize());

    }
} 
```

您的回复将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:10:00.410

检查[此链接](http://code.google.com/p/mp4parser/source/browse/trunk/isoparser/src/main/java/com/coremedia/iso/IsoOutputStream.java?r=2)。他们确实有自己的 IsoOutputStream 类。

[你可以从这里](http://mavenhub.com/c/com/coremedia/iso/IsoOutputStream/jar)得到一罐

也看看[这个链接](http://grepcode.com/file/repo1.maven.org/maven2/com.googlecode.mp4parser/isoparser/1.0-beta-6/com/coremedia/iso/IsoBufferWrapperImpl.java)。

# joomla - 跟踪免费插件的安装是否合法

> ID：12615894
> 
> 赞同：1
> 
> 时间：2012-09-27T07:05:17.957
> 
> 标签：joomla, tracking

通过这个问题，我想问一下跟踪免费 Joomla 模块的安装是否合法。

我已经创建了一些 Joomla 模块，并且我喜欢跟踪安装量。

trackink 的唯一目的是跟踪使用该模块的网站，仅此而已。

但我想知道，这合法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:13:53.330

我不会向程序员社区寻求法律建议。最好的建议是询问外行。

但如果我猜的话，没有明确的用户许可是不允许的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T10:02:44.890

不是问这类问题的地方。

为什么不跟踪您网站的下载量，而不是跟踪安装量？会更容易和合乎道德。可以用一点 PHP 或 JS 来完成。

# c++ - 带参数的函数向量

> ID：12615897
> 
> 赞同：4
> 
> 时间：2012-09-27T07:05:44.507
> 
> 标签：c++, boost, vector, callback, function-pointers

我制作了包含函数的向量，但它们没有参数列表。此外，他们不在班级内。我有一个名为 的类`Dialog`，我需要存储具有特定签名的函数指针。这是我对这些函数的 typedef：

```
typedef INT_PTR (*MsgHandler)(WPARAM,LPARAM); 
```

但是，由于包含这些`MsgHandler`' 的向量将在我的`Dialog`类中，这将由我的`CMainWnd`类继承，所以当我尝试 push_back 函数时，函数的签名与`MsgHandler`. 这是我的代码，尝试 push_back 向量中的函数的 4 种变体，以及每个变体产生的错误：

```
typedef INT_PTR (*MsgHandler)(WPARAM,LPARAM);

class Dialog
{
protected:
    Dialog(void); // Must be inherited
    vector<MsgHandler> Handlers;
}

class CMainWnd : public Dialog
{
public:
    INT_PTR MyHandler(WPARAM wp, LPARAM lp) {
        return TRUE;
    }

    CMainWnd(void) {
        // Attempt 1: Handlers.push_back(MyHandler);
        // Attempt 2: Handlers.push_back(&MyHandler);
        // Attempt 3: Handlers.push_back(CMainWnd::MyHandler);
        // Attempt 4: Handlers.push_back(&CMainWnd::MyHandler);
    }
}; 
```

尝试 1 产生以下错误：

```
error C3867: 'CMainWnd::MyHandler': function call missing argument list; use '&CMainWnd::MyHandler' to create a pointer to member 
```

尝试2产生：

```
error C2276: '&' : illegal operation on bound member function expression 
```

尝试 3 产生：

```
error C3867: 'CMainWnd::MyHandler': function call missing argument list; use '&CMainWnd::MyHandler' to create a pointer to member 
```

尝试 4 产生：

```
error C2664: 'std::vector<_Ty>::push_back' : cannot convert parameter 1 from 'INT_PTR (__thiscall CMainWnd::* )(WPARAM,LPARAM)' to 'const MsgHandler &' 
```

我认为尝试 4 最接近正确，但如前所述，由于该函数是成员，它会改变签名。如何将函数指针存储在继承类中定义的向量中`Dialog`：

*   有一个返回类型`INT_PTR`
*   有两个参数，第一个是 a `WPARAM`，第二个是 a`LPARAM`
*   是派生类的成员，其构造函数是将它们添加到向量中的构造函数

我听说过使用它`boost::function`来做这样的事情，但我已经查阅了它的文档，但我不知道如何使用它，这一切让我感到困惑。我非常想将函数添加到向量中，就好像它们是变量一样，而不是让我的代码陷入绑定操作等等。（可能只是因为我对增强功能一无所知）。

我在这里做错了什么，或者我可以`boost::function`用来做这个吗？顺便说`boost::function`一句，我尝试将向量声明为`vector<boost::function<INT_PTR(WPARAM,LPARAM)>>`并尝试添加`MyHandler`它，但这不起作用。如果不需要，我宁愿不使用 boost，但是如果有人建议这样做的 boost 方式，请说明我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T07:18:04.103

想一想：当你创建一个函数指针向量时，向量的每个元素的大小是多少？没错，就是函数指针的大小。现在，你怎么能期望它保存指向函数的指针以及指向应该调用函数的对象的指针？

C++ 语言功能是围绕“按使用付费”原则设计的。所以函数指针尽可能的轻。现在，您想要的实际上是代表。Delegates 不是 C++ 的语言特性，所以，不管你喜不喜欢，你都需要使用 boost::function 之类的东西（或者自己写）。顺便说一下，有比 boost::function 更快的委托解决方案，您可以检查：[this code project](http://www.codeproject.com/Articles/11015/The-Impossibly-Fast-C-Delegates) and [this one](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)

下面是使用 boost::function 的方法：

```
#include <vector>
using namespace std;
#include <boost/function.hpp>
#include <boost/bind.hpp>

typedef int INT_PTR;
typedef int WPARAM;
typedef int LPARAM;

//typedef INT_PTR (*MsgHandler)(WPARAM,LPARAM);
typedef boost::function<INT_PTR(WPARAM,LPARAM)> MsgHandler;

class Dialog
{
protected:
    Dialog(void){} // Must be inherited
    vector<MsgHandler> Handlers;
};

class CMainWnd : public Dialog
{
public:
    INT_PTR MyHandler(WPARAM wp, LPARAM lp) {
        return true;
    }

    CMainWnd(void) {
        // Attempt 1: Handlers.push_back(MyHandler);
        // Attempt 2: Handlers.push_back(&MyHandler);
        // Attempt 3: Handlers.push_back(CMainWnd::MyHandler);
        // Attempt 4: Handlers.push_back(&CMainWnd::MyHandler);
    Handlers.push_back(boost::bind(&CMainWnd::MyHandler, this, _1,_2));
    }
};

int main() {
    CMainWnd w;

} 
```

这是不可能的快速代表：（当然包含正确设置的路径）

```
#include <vector>
using namespace std;
#define SRUTIL_DELEGATE_PREFERRED_SYNTAX
#include <srutil/delegate/delegate.hpp>

typedef int INT_PTR;
typedef int WPARAM;
typedef int LPARAM;

typedef srutil::delegate<INT_PTR(WPARAM,LPARAM)> MsgHandler;

class Dialog
{
protected:
    Dialog(void){} // Must be inherited
    vector<MsgHandler> Handlers;
};

class CMainWnd : public Dialog
{
public:
    INT_PTR MyHandler(WPARAM wp, LPARAM lp) {
        return true;
    }

    CMainWnd(void) {
    Handlers.push_back(MsgHandler::from_method<CMainWnd, 
              &CMainWnd::MyHandler>(this));
    }
};

int main() {
    CMainWnd w; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T07:32:32.667

如果您可以访问 C++11，这就是 lambda 真正大放异彩的地方。我将稍微更改您的代码，只是因为让它为我工作稍微容易一些，但您应该能够很容易地根据您的需要修复它：

```
#include <vector>
#include <functional>
#include <iostream>

class Dialog
{
protected:
    Dialog() { } // Must be inherited
    std::vector<std::function<bool (int, int)>> Handlers;
};

class CMainWnd : public Dialog
{
public:
    bool MyHandler(int wp, int lp) 
    {
        std::cout << "(" << wp << ", " << lp << ")\n";
        return true;
    }

    CMainWnd() 
    {
       Handlers.push_back([this](int wp, int lp) -> bool { return this->MyHandler(wp, lp); });
       std::cout << Handlers[0](1,1) << "\n";
    }
};

int main()
{
    CMainWnd c;
    return 0;
} 
```

编辑：当使用 C++03 和 boost 时：

```
#include <boost/function.hpp>
#include <boost/bind.hpp>

class Dialog
{
protected:
    Dialog() { } // Must be inherited
    std::vector<boost::function<bool (int, int)> > Handlers;
};

class CMainWnd : public Dialog
{
public:
    bool MyHandler(int wp, int lp) 
    {
        std::cout << "(" << wp << ", " << lp << ")\n";
        return true;
    }

    CMainWnd() 
    {
       Handlers.push_back(boost::bind(&CMainWnd::MyHandler, this, _1, _2));
       std::cout << Handlers[0](1,1) << "\n";
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:48:59.433

在 C++ 中，您通常会使用`std::function`它的 boost 等价物。然而，在某些情况下，有一个 C 风格的解决方案可能是合适的 - 即存储额外的用户数据并将其传递给函数。

```
typedef INT_PTR (*MsgHandlerFn)(WPARAM,LPARAM, void*);
struct MsgHandler
{
   MsgHandler( 
     MsgHandlerFn in_fn,
     void * in_user_data )
   : fn(in_fn), user_data(in_user_data)
   {}
   //TODO: Add copy constructor, assignment operator, default constructor
   MshHandlerFn fn;
   void * user_data;
};

class Dialog
{
protected:
    Dialog(void); // Must be inherited
    vector<MsgHandler> Handlers;
};

class CMainWnd : public Dialog
{
  public:
    INT_PTR MyHandler(WPARAM wp, LPARAM lp) {
        return TRUE;
    }
  protected:
    static INT_PTR MyHandlerStatic(WPARAM wp, LPARAM lp, void * user_data)
    {
       return static_cast<CMainWnd*>(user_data)->MyHandler(wp,lp);
    }
  public:
    CMainWnd(void) {
      Handlers.push_back( MsgHandler( &CMainWnd::MyHandlerStatic, this ) );
     }
}; 
```

现在，您的对话框调用处理程序的循环需要看起来更像这样

```
for( unsigned int i=0; i<Handlers.size(); ++i)
   Handlers[i].fn( wp,lp, Handlers[i].user_data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:17:27.707

这是一个描述您的问题的[网页。](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)

类成员函数只是不正常的函数。如果声明一个普通函数对你来说没问题（在示例中似乎没问题），那就这样做吧。

> 是派生类的成员，其构造函数是将它们添加到向量中的构造函数

如果你真的需要的话，你可以使用 ac 函数指针来使你的类的函数成员。我不知道你是否可以在类声明范围内声明一个非成员函数成员函数，如果可以的话，这样做。

祝你好运

# c# - 如何修改外部xml文件并将其保存在C#中

> ID：12615898
> 
> 赞同：1
> 
> 时间：2012-09-27T07:05:46.367
> 
> 标签：c#, asp.net, .net, xml

我是 C# 新手，想操作外部 xml 文件。这是那个文件：

```
<results>
     <root />
     <category id="" title="" />
     <category />
     <category />
</results> 
```

我希望对此进行修改，例如：

```
<results>
    <root />
    <categories>
        <category id="" title=""/>
        <category />
        <category />
    </categories>
</results> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:37:09.857

这是可行的，它替换了`category`直接在根元素（根元素是`results`）下找到的所有名为的元素，并添加了名为的新元素`categories`。`category`然后将元素添加到元素`categories`并`category`从元素下方删除`results`元素。最后`categories`添加元素。您还可以通过调用它的`Save`方法来保存文档：

```
 XDocument doc = XDocument.Load("Data.xml");

        var categoriesElement = new XElement("categories");

        var categoryElements = doc.Root.Elements("category");
        foreach(var el in categoryElements.ToList())
        {
            categoriesElement.Add(new XElement(el));
            el.Remove();

        }

        doc.Element("results").Add(categoriesElement);
        //doc.Save(<filepath>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:34:19.303

理想情况下，xml 可以使用 xslt 进行转换。可以在下面找到有关 xslt 转换的基础知识，

[http://support.microsoft.com/kb/307322](http://support.microsoft.com/kb/307322)

[http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

使用 xslt 使您的解决方案或代码更易于管理。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:10:34.560

```
 XElement elem = XElement.Parse(xml);
        elem = new XElement("results",
             new XElement("root", elem.Element("root").Value),
             new XElement("categories", elem.Descendants("category"))
            ); 
```

# jquery - jquery搜索图片

> ID：12615901
> 
> 赞同：2
> 
> 时间：2012-09-27T07:06:09.023
> 
> 标签：jquery, web-scraping

嗨，

我的问题很简单，但我无法掌握答案。

我正在为 chrome 制作一个插件，用于搜索图像，当在页面上找到该图像时，它会做一些事情。

我首先有这段代码：

```
if($('img[src="http://cdn2.tribalwars.net/graphic/unit/att.png?169e1"]').length > 0){ 
```

这工作得很好。但是今天它没有用。我知道为什么。因为在.png 之后是一个随机代码。因为今天是ibdd4。

那么我如何在没有随机代码的情况下搜索图像因为我不需要那个随机代码......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:08:25.883

您可以使用“ `startswith`”选择器：

```
jQuery('img[src^="http://cdn2.tribalwars.net/graphic/unit/att.png"]') 
```

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:08:24.467

将其从“equals”更改为“starts with”以忽略代码：

```
if($('img[src^="http://cdn2.tribalwars.net/graphic/unit/att.png?169e1"]').length > 0) 
```

# scala - 案例类可以有自己的成员吗？

> ID：12615903
> 
> 赞同：1
> 
> 时间：2012-09-27T07:06:11.330
> 
> 标签：scala

当我使用将自己保持为成员的类时，有什么需要注意的吗？

这行得通（它来自Scala-IDE中的Scala Worksheet），但这会在某个时候咬我，即这是正常做法还是不好的做法，为什么？

```
object Play {

 println("Playing a bit")                         //> Playing a bit

 case class X(a: Int = 1, x: List[X]){
 }

 val y = X(3, List())                             //> y  : Play.X = X(3,List())
 val z = X(5, List(X(6, List())))                 //> z  : Play.X = X(5,List(X(6,List())))
 println(z)                                       //> X(5,List(X(6,List())))
 println(z.x.head.a)                              //> 6
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:08:02.327

这是对案例类的完美使用。案例类非常适合定义这样的递归结构。

例如，如果我想定义自己的链表类，我可以使用案例类来简化模式匹配功能：

```
trait MyList[T]
case class Link[T](head: T, tail: MyList[T]) extends MyList[T]
case class End[T]() extends MyList[T]

@tailrec
def last[T](list: MyList[T]): Option[T] =
  list match {
    case End() => None
    case Link(head, End()) => Some(head)
    case Link(head, tail) => last(tail)
  }

println(last(Link(1, Link(2, Link(3, End())))))  // Some(3)
println(last(Link(1, End())))                    // Some(1)
println(last(End()))                             // None 
```

# c++ - g ++“因为以下虚函数是纯的”具有抽象基类

> ID：12615904
> 
> 赞同：11
> 
> 时间：2012-09-27T07:06:14.337
> 
> 标签：c++, polymorphism, virtual-functions, diamond-problem

这是我产生错误的示例代码：

```
struct Impl
{
  int data_size_;
  int find(int var){return 0;}
  int get(int rowid){return 0;}
};

class Container
{
public:
  Container() {}
  virtual ~Container() {}
  virtual int get_size() = 0;
  virtual int get(int rowid) = 0;
};

class SortedContainer : virtual public Container {
public:
  virtual int find(int var) = 0;
};

class ContainerImpl : public Container
{
protected:
  Impl impl_;
public:
  int get_size() {return impl_.data_size_;}
  int get(int rowid) {return impl_.get(rowid);}
};

class SortedContainerImpl
  : public SortedContainer, public ContainerImpl
{
private:
  typedef ContainerImpl Base;
public:
  int find(int var){return Base::impl_.find(var);}
};

ContainerImpl ci;
SortedContainerImpl sci; 
```

似乎“SortedContainerImpl”出错了，而“ContainerImpl”很好。

g++ 抱怨：

```
example_b.cpp:42:21: error: cannot declare variable ‘sci’ to be of abstract type ‘SortedContainerImpl’
example_b.cpp:32:7: note:   because the following virtual functions are pure within ‘SortedContainerImpl’:
example_b.cpp:13:15: note:  virtual int Container::get_size()
example_b.cpp:14:15: note:  virtual int Container::get(int) 
```

我从 ContainerImpl 继承 SortedContainerImpl 以便重用 get_size() 和 get(int)

我不熟悉 c++，这个问题的本质是什么，我该如何解决？

谢谢大家。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-27T07:08:01.563

在 C++ 中，一旦你有了一个纯虚成员函数，你的类就变成了抽象类，你不能创建它的任何对象。
这样的类本身并不意味着可以实例化。它意味着充当**接口**。可以从这样一个抽象类派生，并**在派生类中提供所有纯虚函数的实现**。

请注意，您的类`SortedContainerImpl`派生自两个类`SortedContainer`和`ContainerImpl`.
`SortedContainer`反过来派生自`Container`但它从未实现纯虚函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T07:21:20.277

你的`SortedContainerImpl`类有两个独立的`Container`基类。一个是虚拟的（通过`SortedContainer`类），另一个是非虚​​拟的（通过`ContainerImpl`类）。

`SortedContainerImpl`有来自 的基础的`Container::get_size()`和的具体实现，但没有来自 via 的虚拟基础的具体实现。`Container::get(int)``ContainerImpl``SortedContainer`

解决该问题的一种方法是在以下位置给出具体实现`SortedContainerImpl`：

```
class SortedContainerImpl
  : public SortedContainer, public ContainerImpl
{
private:
  typedef ContainerImpl Base;
public:
  int find(int var){return Base::impl_.find(var);}

  int get_size() {return ContainerImpl::get_size();}
  int get(int rowid) {return ContainerImpl::get(rowid);}
}; 
```

另一种方法是创建`Container`一个虚拟基类`ContainerImpl`，因此`SortedContainerImpl`只会得到一个虚拟基类`Container`：

```
class ContainerImpl : virtual public Container
{
protected:
  Impl impl_;
public:
  int get_size() {return impl_.data_size_;}
  int get(int rowid) {return impl_.get(rowid);}
}; 
```

# jquery - jquery让这个孩子改变img src

> ID：12615905
> 
> 赞同：1
> 
> 时间：2012-09-27T07:06:21.793
> 
> 标签：jquery, jquery-selectors, find, rollover

我经常使用一种旧方法将“-rollover”附加到 img 以节省大量 css 规则，但我遇到了一个无法使其工作的实例。

通常我只是给 img 一个翻转类，然后使用这个 jQuery：

```
$(".rollover").hover(function() {
    $(this).attr("src", $(this).attr("src").split(".").join("-rollover."));
}, function() {
    $(this).attr("src", $(this).attr("src").split("-rollover.").join("."));
}); 
```

但是在这种情况下，img 位于一个元素中，我希望元素的悬停来更改 img src。

这是 HTML 的示例：

```
<li class="rollover-child grid-item-2">
    <a href="#">
        <img src="img/copy/file.jpg" width="231" height="130" />
        <span class="gl-grid-text">
            <span class="gl-grid-title">Book!</span>
            <span class="gl-grid-sub-text">View upcoming events</span>
            <span class="gl-grid-arrow">&gt;</span>
        </span>
    </a>
</li> 
```

还有一些列表项没有锚点但仍然需要翻转效果，例如

```
<li class="rollover-child>
    <img src="img/copy/file.jpg" width="231" height="130" />
</li> 
```

我正在尝试的 jQuery 是这样的：

```
$(".rollover-child").hover(function() {
    $('img', this).attr("src", $(this).attr("src").split(".").join("-rollover."));
}, function() {
    $('img', this).attr("src", $(this).attr("src").split("-rollover.").join("."));
}); 
```

但我根本无法让它工作。我已经尝试了 find 和 children 和兄弟姐妹的变体，但我一定做错了什么。

非常感谢任何帮助。

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:12:14.317

这样做：

```
$(".rollover-child").hover(function() {
    $('img', this).attr("src", function(index, currentAttributeValue){
       return currentAttributeValue.split(".").join("-rollover.");
    });
}, function() {
    $('img', this).attr("src", function(index, currentAttributeValue){
       return currentAttributeValue.split("-rollover.").join(".");
    });
}); 
```

[参见[.attr(attributeName, function(index, attr) )](http://api.jquery.com/attr/)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:24:24.487

在这种情况下**$(this)** 对应于`<li class="rollover-child>` 并且您正在尝试访问`$(this).attr("src")` 错误的..您需要在此处定位图像。

尝试这个

```
 $(".rollover-child").hover(function() {
    $('img', this).attr("src", $(this).find('img').attr("src").split(".").join("-rollover."));
}, function() {
    $('img', this).attr("src", $(this).find('img').attr("src").split("-rollover.").join("."));
}); 
```

# ruby-on-rails - 如何在 Godaddy 服务器上部署 Rails 应用程序

> ID：12615907
> 
> 赞同：0
> 
> 时间：2012-09-27T07:06:35.507
> 
> 标签：ruby-on-rails

我买了一个 Godaddy 服务器，我想使用 Apache + Passenger + Capistrano 在上面部署我的 Rails 应用程序。

但是，似乎我无法在我的服务器中安装乘客。

在我使用 ssh 连接到我的服务器并输入“sudo gem installpassenger”后，它说 sudo 是一个未知命令..

那么谁能告诉我如何在godaddy服务器上部署rails应用程序？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:23:46.917

这取决于您在机器上安装的 Linux 发行版，为了以超级用户身份登录，您可以尝试“sudo su”或简单地“su”。

显然，您需要拥有超级用户密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:41:18.387

默认情况下，Go Daddy 服务器有一个您使用密码设置的用户。要获得 root 访问权限，您将键入：

```
su - 
```

然后，您将输入您最初登录时使用的相同密码。默认情况下，用户密码和 root 密码相同。

# javascript - 我正在尝试停止雪脚本并在 x 秒后清除页面

> ID：12615908
> 
> 赞同：0
> 
> 时间：2012-09-27T07:06:38.297
> 
> 标签：javascript

我怎样才能在一定时间后使雪变清。我试过使用变量和调用超时，它切换到 false 并停止 makenow() 函数，但这似乎根本没有清除页面。

```
<script language="javascript">

ns6 = document.getElementById;
ns  = document.layers;
ie  = document.all;

/*******************[AccessCSS]***********************************/
function accessCSS(layerID) {                                                                   //
  if(ns6){ return document.getElementById(layerID).style;}     //
   else if(ie){ return document.all[layerID].style; }         //
    else if(ns){ return document.layers[layerID]; }          //
}/***********************************************************/

/**************************[move Layer]*************************************/
function move(layer,x,y)  { accessCSS(layer).left=x; accessCSS(layer).top = y; } 

function browserBredde() {
    if (window.innerWidth) return window.innerWidth;
    else if (document.body.clientWidth) return document.body.clientWidth;
    else return 1024;
}

function browserHoyde() {

        if (window.innerHeight) return window.innerHeight;
        else if (document.body.clientHeight) return document.body.clientHeight;
        else return 800;
}

function makeDiv(objName,parentDiv,w,h,content,x,y,overfl,positionType)
{     
      // positionType could be 'absolute' or 'relative'

        if (parentDiv==null) parentDiv='body';

    var oDiv = document.createElement ("DIV");
    oDiv.id = objName;

        if (w) oDiv.style.width = w;
        if (h) oDiv.style.height= h;

      if (content) oDiv.innerHTML=content;
      if (positionType==null) positionType="absolute";
        oDiv.style.position = positionType;
        if (x) oDiv.style.left=x; else oDiv.style.left=-2000;
        if (y) oDiv.style.top=y; else oDiv.style.top=-2000;

        if (overfl) oDiv.style.overflow=overfl; else oDiv.style.overflow="hidden";
    eval('  document.'+parentDiv+'.appendChild (oDiv);  ');

    delete oDiv;
}

var snowC=0;
var x = new Array();
var y = new Array();
var speed = new Array();
var t=0;
var cC = new Array();
var ra = new Array();

function makeSnow() {
    x[snowC] = Math.round(Math.random()*(browserBredde()-60));
    y[snowC] = 10;
    makeDiv("snow"+snowC,"body",32,32,'<img src="http://i693.photobucket.com/albums/vv296/KIBBLESGRAMMY/CAT/Orange-tabby-cat-icon.gif">');
    speed[snowC] = Math.round(Math.random()*8)+1;
    cC[snowC]=Math.random()*10;
    ra[snowC] = Math.random()*7;
    snowC++;        
}

function moveSnow() {
    var r = Math.round(Math.random()*100);
    if (r>70 && snowC<20) makeSnow();
    for (t=0;t<snowC;t++) {
        y[t]+=speed[t];move("snow"+t,x[t],y[t]);
        if (y[t]>browserHoyde()-50) {y[t] = 10;x[t] = Math.round(Math.random()*(browserBredde()-60));}
        cC[t]+=0.01;
        x[t]+=Math.cos(cC[t]*ra[t]);

    }

    setTimeout('moveSnow()',20);
}

moveSnow();

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:19:52.887

`makeSnow`只是添加了雪花。正如你所说，停止它并不能清除任何东西。`moveSnow`处理动画，并在超时时调用自身。`moveSnow`如果不是每次都为下一次设置超时，而是将其设置为仅以*间隔*运行一次，那么您将更容易停止它。

```
window.snowAnimation = window.setInterval(moveSnow, 20); 
```

如果您向雪花添加一个 css 类，则更容易将它们作为删除目标。

```
oDiv.className = 'snowflake'; 
```

然后你的 clear 函数可能看起来像：

```
function clearSnow() {
   window.clearTimeout(window.snowAnimation);
   var flakes = document.getElementsByTagName('snowflake');
   for(var i = 0, l = flakes.length; i < l; i++) {
      document.body.removeChild(flakes[i]);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:21:29.283

您将必须清除在您想要停止降雪之后创建的元素。以下代码段将帮助您清除元素

```
 if(count < 500){
        setTimeout('moveSnow()',20);
    }else{
        var i = 0;
        var elem = document.getElementById('snow'+i);
        do{
        elem.parentNode.removeChild(elem);
        elem = document.getElementById('snow'+ ++i);
        }while(elem != null)
    }
    count++; 
```

您必须创建一个全局变量计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:12:20.677

您需要删除创建的 div。如果您在创建它们时给它们都赋予某种类，例如“.snowflake”（在 中`makeDiv`），然后开始从 dom 中删除它们，这可能会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:12:07.697

超时无济于事，它只会帮助您停止创建新的 snowdiv，但是如果您看到 makeDiv 是在身体上创建新 div 的那个，如果您清除/显示：没有在 makeDiv 上创建的 div 我希望它会清除屏幕上的所有 div。

# ios - 方向更改时以编程方式更改 UISearchBar 的框架

> ID：12615916
> 
> 赞同：1
> 
> 时间：2012-09-27T07:07:07.407
> 
> 标签：ios, ipad, uisearchbar, uiinterfaceorientation, uisearchdisplaycontroller

我有一个搜索按钮，当用户单击它时，我以编程方式显示 UISearchBar。搜索栏的宽度是 (200) 不是全屏。我像 MSWord 一样搜索并在搜索栏的表格视图中显示内容。但是当用户处于搜索中间并改变方向时，我应该如何控制搜索栏的宽度，即 self.searchDisplayController.searchBar.frame 和 self.searchDisplayController.searchResultsTableView.frame。

以下是用于创建搜索栏的代码：

```
-(IBAction)searchBar:(id)sender
{
    if(!searching)
    {
        searching = YES;
        sBar.frame = CGRectMake(500, 50,250, 44);
        [self.view addSubview:sBar];
        [searchController setActive:YES animated:YES];
        [sBar becomeFirstResponder];

        if((currentOrientation == UIInterfaceOrientationLandscapeLeft)  || 
           (currentOrientation ==  UIInterfaceOrientationLandscapeRight))
        {
            self.searchDisplayController.searchBar.frame = CGRectMake(755, 50, 250, 44);
        }
        else 
        {
            self.searchDisplayController.searchBar.frame = CGRectMake(500, 50, 250, 44);
        }
    }
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString{
    [self filterContentForSearchText:searchString scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text] scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller{
    /*
     Bob: Because the searchResultsTableView will be released and allocated automatically, so each time we start to begin search, we set its delegate here.
     */
    [self.searchDisplayController.searchResultsTableView setDelegate:self];
    [self.searchDisplayController.searchResultsTableView setBackgroundColor:[UIColor colorWithRed:1 green:1 blue:204/255.0 alpha:1.0]];
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller{
    /*
     Hide the search bar
     */

    float animateTime = 0.3;
    CGRect viewFrame = sBar.frame;
    viewFrame.origin.y -= (viewFrame.size.height);

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:animateTime];

    sBar.frame = viewFrame;

    [UIView commitAnimations];
    [self performSelector:@selector(animationDone) withObject:nil afterDelay:0.3];

}

-(void)animationDone
{
    [sBar removeFromSuperview];
    searching = NO;
}

-(void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView 
{
    if((currentOrientation == UIInterfaceOrientationLandscapeLeft)  || 
       (currentOrientation ==  UIInterfaceOrientationLandscapeRight))
    {
        tableView.frame = CGRectMake(755, 100, 250, 400);
    }
    else 
    {
        tableView.frame = CGRectMake(500, 100, 250, 400);
    }
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    currentOrientation = toInterfaceOrientation;

    if((currentOrientation == UIInterfaceOrientationLandscapeLeft)  || 
       (currentOrientation ==  UIInterfaceOrientationLandscapeRight))
    {

        //Search
        btnSearch.frame = CGRectMake(920, 5, 40, 40);

        self.searchDisplayController.searchBar.frame = CGRectMake(755, 50, 250, 44);
        self.searchDisplayController.searchResultsTableView.frame = CGRectMake(755, 100, 250, 400);
    }
    else 
    {

        //Search
        btnSearch.frame = CGRectMake(666, 5, 40, 40);

        self.searchDisplayController.searchBar.frame = CGRectMake(500, 50, 250, 44);
        self.searchDisplayController.searchResultsTableView.frame = CGRectMake(500, 100, 250, 400);
    }
} 
```

我能够创建运行良好的功能。但唯一的问题是当用户更改方向时，它没有正确设置搜索栏的宽度。我的申请需要在本周五提交。请尽快回复我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:35:33.710

回答我的问题以关闭此线程以及帮助他人。

(1) 在 willRotateToInterfaceOrientation 中可以设置 UISearchBar 的原点。宽度为 768（纵向 iPad 的全屏宽度），但似乎在此处设置了原点。

(2) 方向改变完成后，我们可以设置搜索栏的宽度。使用小动画，它将平滑调整大小。

(3) 我在前后方向 API 中都调用了 resetFrame，以避免 searchBar 出现一些突然的 JURK 类型。

以下是我用于我的应用程序的解决方案..

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    currentOrientation = toInterfaceOrientation;

    [self resetSearchResourcesFrames];  // Set the origin of UISearchBar
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    [UIView beginAnimations:@"" context:nil]; //Animation for smooth resizing of search tableview only
    [UIView setAnimationDuration:0.2];
    [self resetSearchResourcesFrames];  // Width rotation only possible after rotation
    [UIView commitAnimations];
}

-(void)resetSearchResourcesFrames
{
    if(([buttonGridViewController sharedInstance].currentOrientation == UIInterfaceOrientationLandscapeLeft)  || 
       ([buttonGridViewController sharedInstance].currentOrientation ==  UIInterfaceOrientationLandscapeRight))
    {
        //Search
        btnSearch.frame = CGRectMake(920, 5, 40, 40);

        self.searchDisplayController.searchBar.frame = CGRectMake(755, 50, 250, 44);
        self.searchController.searchResultsTableView.frame = CGRectMake(755, 100, 250, 400);
    }
    else 
    {
        //Search
        btnSearch.frame = CGRectMake(666, 5, 40, 40);

        self.searchDisplayController.searchBar.frame = CGRectMake(500, 50, 250, 44);
        self.searchController.searchResultsTableView.frame = CGRectMake(500, 100, 250, 400);
    }
} 
```

# visual-c++ - FileSavePicker 合约实施

> ID：12615918
> 
> 赞同：0
> 
> 时间：2012-09-27T07:07:10.030
> 
> 标签：visual-c++, c++11, windows-8, microsoft-metro, c++-cx

我已经在我的应用程序中实现了 FileSavePicker 合同，所以当用户从邮件应用程序中选择一个附件并想要保存到我的应用程序时，就会触发 OnTargetFileRequested(FileSavePickerUI^ sender, TargetFileRequestedEventArgs^ e) 方法....

```
OnTargetFileRequested(FileSavePickerUI^ sender, TargetFileRequestedEventArgs^ e) 
{
auto request = e->Request;
auto deferral = request->GetDeferral();

create_task(ApplicationData::Current->LocalFolder->CreateFileAsync(sender->FileName,    CreationCollisionOption::GenerateUniqueName)).then([request, deferral](StorageFile^ file)
{
    // Assign the resulting file to the targetFile property indicates success
    request->TargetFile = file;

    // Complete the deferral to let the Picker know the request is finished.
    deferral->Complete();

return file;

 }.then([=](StorageFile^ file)

{

 //here i will upload file to my metro app 

} 
```

现在无论我创建什么文件，我都需要上传到我的 Metro 应用程序....但是我面临 deferral->complete 的问题...在将文件上传到我的文件后是否需要写入 deferral->complete() app 或以上的 deferral->complete 语句是否正确.??...

但是当我在上传文件后使用 deferral->complete 时，总是有 0 个字节的文件被上传......

如果我在 createFileAsync() 中使用 deferral->complete ，如上面的代码所示，那么文件没有上传......请帮助我......

你能告诉我这是正确的方法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:29:09.953

您应该在方法中最后一次等待调用之后调用 deferral->Complete() - deferal 的目的是通知调用者，即使被调用的方法返回，仍有异步操作正在进行。一旦延迟被称为完成，那么调用者就知道一切都已完成。

因此，您可能应该在上传文件或将文件复制到缓存后调用 deferral->Complete() 。如果没有传输字节，请确保正确传输文件 - 您必须使用 OpenReadAsync 打开原始文件并将流复制到您的内存流（不推荐用于大文件），或者缓存文件或某处然后发送它.

# eclipse - 在 Juno Eclipse 中建立一个 Maven 项目

> ID：12615924
> 
> 赞同：3
> 
> 时间：2012-09-27T07:07:21.623
> 
> 标签：eclipse, maven, dependencies

我最近将我的 Eclipse 升级到了 Juno，并且在处理 maven 依赖项的方式上苦苦挣扎。

我安装了 m2e 插件。尽管如此，我的许多项目开始抱怨缺少库，就好像 pom 中指定的依赖项被完全忽略了一样。尽管右键单击项目，选择配置 --> 转换为 Maven 项目，但还是发生了这种情况，这似乎取代了以前的“Maven --> 启用依赖项”。当我查看项目目录下的 Maven 依赖项时，列出的依赖项比我的 pom.xml 中的要少得多。

在 Eclipse 之外的命令行上运行 maven 编译可以构建我的项目，在选择 Maven --> Update project 之后，我能够看到根据我在 pom.xml 中指定的内容添加或删除的依赖项。

底线：maven 依赖项现在似乎可以工作，但我必须做一些我认为不需要的操作组合：
- 配置 -> 转换为 Maven 项目
- Maven -> 更新依赖
项 - 在 Eclipse 之外运行 maven

为了在使用以前版本的 Eclipse 时一切正常，我所要做的就是 Maven -> 启用依赖项。Juno 中的等价物是什么，即设置 Juno Eclipse 以正确处理 maven 项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:26:57.563

我已经使用 Juno 一段时间了，在导入基于 maven 的项目后，从 Eclipse 中解决 Maven 依赖项的可靠方法很简单：

1.  配置 --> 转换为 Maven 项目

2.  Maven --> 更新项目

在 Eclipse 之外运行 Maven 似乎没有帮助。

我不确定为什么现在需要这两个步骤，而以前版本的 Eclipse 以前不需要（至少，以前肯定不需要两个步骤）。

跑步

```
mvn -Declipse.workspace=<path-to-eclipse-workspace> eclipse:add-maven-repo 
```

Eclipse 之外的问题给我带来了我在对另一个答案的评论中描述的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T03:07:56.097

在 OS X 上的 Parallels Desktop 下运行 Windows 的 Mac 上？这个类似的讨论可能会解决您的问题：[intellij - java: Cannot find JDK '1.7' for module](https://stackoverflow.com/questions/14278936/intellij-java-cannot-find-jdk-1-7-for-module)

# c# - 为什么在事件处理程序中无法识别变量？

> ID：12615926
> 
> 赞同：-4
> 
> 时间：2012-09-27T07:07:30.513
> 
> 标签：c#, events, if-statement, statements

我对这段代码有两个问题。我遇到了麻烦，因为提交按钮事件无法识别在文本框事件中计算的变量，并且因为文本框事件没有将我的 if 语句识别为语句。您可以在下面的评论中看到我遇到问题的地方。

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

 namespace WindowsFormsApplication11 
 {
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        int points;

        int userInput = int.Parse(textBox1.Text);

        if (userInput == 0)

        {
            points == 5; //I CANNOT COMPILE BECAUSE APPARENTLY I AM NOT ALLOWED TO USE
                         THIS AS A STATEMENT? 
        }

        if (userInput == 1)

        { 
            points == 10;
        }

        if (userInput == 2)

        {
            points == 20;
        } 

        if (userInput ==3)

        {
            points == 30;
        }

        else

        {
            points == 40;

        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show = ("You have been awarded" + textBox1.points + "points");
    } //I WANT TO BE ABLE TO RETRIEVE THE POINTS CALCULATED USING THE CALCULATION IN
      TEXT BOX, BUT I CANNOT COMPILE THE BUTTON EVENT DOES NOT RECOGNIZE THE POINTS
      VARIABLE

    private void label1_Click(object sender, EventArgs e)
    {

    }
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T07:11:57.873

该`==`符号是比较符号而不是赋值符号

你需要使用

```
if (userInput == 2) // this is a comparison
{ 
    points = 20; // this is an assignment
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T07:11:06.233

首先，您已经声明了`TextChanged`事件的本地点，因此在您的按钮单击事件中将无法访问它。

`textBox1.points`是不对的，因为`int points`声明与 无关`TextBox`，您可以将点声明为类变量，例如

```
public partial class Form1 : Form
{
    int points =0;
    public Form1()
    {
       InitializeComponent();
    }
    //......// 
```

然后这将作为

```
private void button1_Click(object sender, EventArgs e)
{
    MessageBox.Show( string.Format("You have been awarded {0} points",this.points));
} 
```

您也使用`=`符号进行分配，所以`points = 5;`这样做是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:12:25.710

要为变量添加值，您应该编写：

```
points = 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:14:54.683

```
using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

namespace WindowsFormsApplication11 
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

public  int points=0;

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

        int userInput = int.Parse(textBox1.Text);

        if (userInput == 0)

        {
            points = 5; 
        }

        if (userInput == 1)

        { 
            points = 10;
        }

        if (userInput == 2)

        {
            points = 20;
        } 

        if (userInput ==3)

        {
            points = 30;
        }

        else

        {
            points = 40;

        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show = ("You have been awarded" + points.ToString() + "points");
    } 

    private void label1_Click(object sender, EventArgs e)
    {

    }
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T07:25:45.023

如前所述 - 您对赋值运算符和全局/局部变量感到困惑。

但是您的代码中还有其他几个“错误”。用户输入可能是简单的文本 - 所以会有例外，您应该使用 int.TryParse 而不是 int.Parse。您的代码中还有很多 ifs - 但它们不能一起触发，我建议使用 switch。当然，您应该尝试以某种方式命名您的常量，这将使您的代码更具可读性！

总体而言，您的代码可能如下所示：

```
int pointsAvarded = 0;

private void textBox1_TextChanged(object sender, EventArgs e)
{
    pointsAvarded = 0; //so you can be sure to use the latest input
    int userInput = 0;
    if (int.TryParse(textBox1.Text, out userInput))
      switch (userInput)
      {
          case 0:
            points = 5;
            break;
          case 1:
            points = 10;
            break;
          ...
          default:
            points = 40;
            break;
      }
}

private void button1_Click(object sender, EventArgs e)
{
    if (pointsAvarded != 0)
      MessageBox.Show("You have been awarded" + pointsAvarded + "points");
} 
```

# android - 从 Gmail 应用程序启动时包安装程序应用程序崩溃

> ID：12615927
> 
> 赞同：0
> 
> 时间：2012-09-27T07:07:30.413
> 
> 标签：android, android-4.0-ice-cream-sandwich, galaxy

**当我尝试在我的设备上安装 APK 时出现以下错误。它在设备 Galaxy POP、Galaxy ACE s 5830 中工作。galaxy s3 中的唯一问题**

![在此处输入图像描述](../Images/197a4946b0f01decbf9e3af08ff08abc.png)

我的应用程序清单文件如下。

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.fixcity_app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true"
        android:xlargeScreens="true" />

    <application
        android:icon="@drawable/icon_app_"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SignupActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".LoginActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".FIX_Activity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".TakePictureActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".HomeActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".DisplayPhotoPblm"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".PostCommentActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".SelCategoryActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".ProblemScreenActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".ViewMapActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".ChangeCategoryActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".FixedDisplayPhotoPblm"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".FixedProblemScreenActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".NoProofActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".ListProblemActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name="com.example.twitter_cls.PrepareRequestTokenActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".ReportsActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>
        <activity
            android:name=".SettingActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        </activity>

        <uses-library
            android:name="com.google.android.maps"
            android:required="true" />
    </application>

</manifest> 
```

请帮助我，在此先感谢。

**已编辑。**

仅当我从 gmail 安装 apk 时才会发生这种情况。如果我直接从 Eclipse 运行应用程序，那么它可以工作。

为什么会发生这种情况，我想知道。请帮我....

**编辑 2012 年 11 月 10 日：**

```
 10-11 06:06:33.626: I/ActivityManager(98): START {dat=file:///mnt/sdcard/Download/FixMyCity.apk cmp=com.android.packageinstaller/.InstallAppProgress (has extras)} from pid 1192
10-11 06:06:33.626: W/WindowManager(98): Failure taking screenshot for (240x394) to layer 21015
10-11 06:06:33.776: W/InstallAppProgress(1192): Replacing package:com.example.fixmycity
10-11 06:06:33.856: D/dalvikvm(1192): GC_FOR_ALLOC freed 11791K, 27% free 33725K/45575K, paused 74ms
10-11 06:06:33.876: I/dalvikvm-heap(1192): Grow heap (frag case) to 44.460MB for 12027004-byte allocation
10-11 06:06:34.086: D/dalvikvm(1192): GC_CONCURRENT freed 7K, 1% free 45462K/45575K, paused 6ms+7ms
10-11 06:06:34.156: I/Process(98): Sending signal. PID: 1192 SIG: 3
10-11 06:06:34.156: I/dalvikvm(1192): threadid=3: reacting to signal 3
10-11 06:06:34.166: I/dalvikvm(1192): Wrote stack traces to '/data/anr/traces.txt'
10-11 06:06:34.656: I/Process(98): Sending signal. PID: 1192 SIG: 3
10-11 06:06:34.656: I/dalvikvm(1192): threadid=3: reacting to signal 3
10-11 06:06:34.676: I/dalvikvm(1192): Wrote stack traces to '/data/anr/traces.txt'
10-11 06:06:34.856: D/dalvikvm(1192): GC_FOR_ALLOC freed <1K, 1% free 45462K/45575K, paused 66ms
10-11 06:06:34.856: I/dalvikvm-heap(1192): Forcing collection of SoftReferences for 21381328-byte allocation
10-11 06:06:34.946: D/dalvikvm(1192): GC_BEFORE_OOM freed 9K, 1% free 45453K/45575K, paused 93ms
10-11 06:06:34.946: E/dalvikvm-heap(1192): Out of memory on a 21381328-byte allocation.
10-11 06:06:34.957: I/dalvikvm(1192): "main" prio=5 tid=1 RUNNABLE
10-11 06:06:34.957: I/dalvikvm(1192):   | group="main" sCount=0 dsCount=0 obj=0x409c1460 self=0x12810
10-11 06:06:34.957: I/dalvikvm(1192):   | sysTid=1192 nice=0 sched=0/0 cgrp=default handle=1074082952
10-11 06:06:34.957: I/dalvikvm(1192):   | schedstat=( 3530101707 2280882759 989 ) utm=303 stm=50 core=0
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.Bitmap.nativeCreate(Native Method)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
10-11 06:06:34.957: I/dalvikvm(1192):   at android.content.res.Resources.loadDrawable(Resources.java:1935)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.content.res.Resources.getDrawable(Resources.java:664)
10-11 06:06:34.966: I/dalvikvm(1192):   at com.android.packageinstaller.PackageUtil.getAppSnippet(PackageUtil.java:177)
10-11 06:06:34.966: I/dalvikvm(1192):   at com.android.packageinstaller.InstallAppProgress.initView(InstallAppProgress.java:223)
10-11 06:06:34.966: I/dalvikvm(1192):   at com.android.packageinstaller.InstallAppProgress.onCreate(InstallAppProgress.java:164)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.Activity.performCreate(Activity.java:4465)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.os.Looper.loop(Looper.java:137)
10-11 06:06:34.966: I/dalvikvm(1192):   at android.app.ActivityThread.main(ActivityThread.java:4424)
10-11 06:06:34.966: I/dalvikvm(1192):   at java.lang.reflect.Method.invokeNative(Native Method)
10-11 06:06:34.976: I/dalvikvm(1192):   at java.lang.reflect.Method.invoke(Method.java:511)
10-11 06:06:34.976: I/dalvikvm(1192):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-11 06:06:34.976: I/dalvikvm(1192):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-11 06:06:34.976: I/dalvikvm(1192):   at dalvik.system.NativeStart.main(Native Method)
10-11 06:06:34.976: D/AndroidRuntime(1192): Shutting down VM
10-11 06:06:34.976: W/dalvikvm(1192): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-11 06:06:35.006: E/AndroidRuntime(1192): FATAL EXCEPTION: main
10-11 06:06:35.006: E/AndroidRuntime(1192): java.lang.OutOfMemoryError
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.Bitmap.nativeCreate(Native Method)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.content.res.Resources.loadDrawable(Resources.java:1935)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.content.res.Resources.getDrawable(Resources.java:664)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at com.android.packageinstaller.PackageUtil.getAppSnippet(PackageUtil.java:177)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at com.android.packageinstaller.InstallAppProgress.initView(InstallAppProgress.java:223)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at com.android.packageinstaller.InstallAppProgress.onCreate(InstallAppProgress.java:164)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.Activity.performCreate(Activity.java:4465)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.os.Looper.loop(Looper.java:137)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at java.lang.reflect.Method.invoke(Method.java:511)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-11 06:06:35.006: E/AndroidRuntime(1192):     at dalvik.system.NativeStart.main(Native Method)
10-11 06:06:35.046: W/ActivityManager(98):   Force finishing activity com.android.packageinstaller/.InstallAppProgress
10-11 06:06:35.186: I/Process(98): Sending signal. PID: 1192 SIG: 3
10-11 06:06:35.186: I/dalvikvm(1192): threadid=3: reacting to signal 3
10-11 06:06:35.186: I/dalvikvm(1192): Wrote stack traces to '/data/anr/traces.txt'
10-11 06:06:35.566: W/ActivityManager(98): Activity pause timeout for ActivityRecord{41a415b8 com.android.packageinstaller/.InstallAppProgress}
10-11 06:06:35.576: I/Process(98): Sending signal. PID: 1192 SIG: 3
10-11 06:06:35.576: I/dalvikvm(1192): threadid=3: reacting to signal 3
10-11 06:06:35.586: I/dalvikvm(1192): Wrote stack traces to '/data/anr/traces.txt'
10-11 06:06:35.836: D/dalvikvm(98): GC_CONCURRENT freed 479K, 11% free 15792K/17671K, paused 6ms+74ms
10-11 06:06:35.926: W/NetworkManagementSocketTagger(98): setKernelCountSet(10014, 1) failed with errno -2
10-11 06:06:36.816: W/NetworkManagementSocketTagger(98): setKernelCountSet(10029, 0) failed with errno -2
10-11 06:06:46.369: W/ActivityManager(98): Activity destroy timeout for ActivityRecord{41a415b8 com.android.packageinstaller/.InstallAppProgress}
10-11 06:06:46.526: W/ActivityManager(98): Activity destroy timeout for ActivityRecord{419f82a0 com.android.packageinstaller/.PackageInstallerActivity}
10-11 06:08:40.916: I/GTalkService/c(226): [AndroidEndpoint@1097419944] connect: acct=1000000, state=CONNECTING
10-11 06:08:40.976: E/GTalkService(226): connectionClosed: no XMPPConnection - That's strange!
10-11 06:08:43.986: D/ConnectivityService(98): handleInetConditionHoldEnd: net=0, condition=0, published condition=0
10-11 06:11:02.866: D/dalvikvm(426): GC_CONCURRENT freed 505K, 17% free 14262K/17159K, paused 6ms+9ms 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:49:23.633

**我通过调整我的应用程序图像（如布局背景）解决了这个问题。请试试这个你的问题可能会解决。在您的应用中有高分辨率图像，请将其设为低分辨率。**

检查你的清单

```
<activity
    android:name="com.example.twitter_cls.PrepareRequestTokenActivity"
    android:configChanges="keyboardHidden|orientation|screenSize"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
</activity> 
```

将上面的代码更改为

```
<activity
    android:name=".PrepareRequestTokenActivity"
    android:configChanges="keyboardHidden|orientation|screenSize"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
</activity> 
```

将所有背景图像调整为以下大小：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

更多详情[请点击这里](http://developer.android.com/guide/practices/screens_support.html)

你的应用程序图标将是

```
36x36 for low-density
48x48 for medium-density
72x72 for high-density
96x96 for extra high-density 
```

更多详情[请点击这里](http://developer.android.com/guide/practices/screens_support.html)

编辑 11/10/2012[点击这里](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

**“这很有趣，但我想与其他人分享它可能对某些人有所帮助：我从应用程序的源代码中删除了所有其他包！！请尝试一下。”**

* * *

## 由于未在服务器端设置 MIME 类型（.apk），当我们从电子邮件或服务器下载 apk 时，它也会堆积。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-06T01:19:54.297

我也遇到了这个问题，我把我的应用程序图标大小改为512*512（之前很大），然后就解决了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:08:30.680

我认为发生这种情况的原因是 gmail 正在发送 Intent to install 来启动安装活动。这使得这一切都发生在 gmail 的内存空间中。在这种情况下，如果我通过浏览器安装，我可能会期待类似的结果，因为我知道浏览器应用程序也需要大量内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:17:49.923

您的活动名称中似乎缺少句点。

`android:name="SettingActivity"`应该是`android:name=".SettingActivity"`

不过，您的主要活动似乎命名正确。

# objective-c - iPad 的动态布局

> ID：12615934
> 
> 赞同：0
> 
> 时间：2012-09-27T07:07:59.487
> 
> 标签：objective-c, ios, ipad, view, subview

我正在为带有任务和子任务的 ipad 编写一种动态工作表。（对于我的论文）任务和子任务可以是例如制作视频或绘图……（我从 json 文件中获取任务）

我现在的问题是，编写此任务列表的最佳方法是什么？就像在屏幕截图中...![我的任务](../Images/7386701cbb6af5e7ca94d928875b6990.png)

我的想法是为每种任务创建一个单独的视图，并将所有视图（任务）添加到主视图中。但是我可以为每个子视图设置位置吗？

或者是否可以创建一个 UITableView 并将子任务添加到一个单元格中？还是有另一种可能的方法来做到这一点？最好的问候 MeMa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:12:33.637

你应该使用`SplitViewController`这个 iPad 屏幕

# php - 如何避免在 mysql 查询中使用许多 OR 语句？

> ID：12615943
> 
> 赞同：2
> 
> 时间：2012-09-27T07:08:26.603
> 
> 标签：php, mysql

我正在编写一个代码，我必须在其中生成一个包含许多 OR 语句的查询，我认为有一种比以下更舒服的方法：

```
foreach ($plz as &$value) {
    if (empty($i)) {
        $query = "WHERE plz='$value'";
    } else {
        $query = "$query OR plz='$value'";
    }
    $i++;
}
$sql = mysql_query("SELECT * FROM table $query");
while ($data = mysql_fetch_array($sql)) {
    //do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:11:00.820

您正在寻找 ;

```
SELECT * FROM table WHERE plz in ('value1', 'value2', 'value3') 
```

注意[SQL 注入](http://bobby-tables.com/)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T07:12:02.203

如果一列可能有多个值，只需使用[`IN`](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_in)运算符连接它们：

而不是写

```
... WHERE col=1 OR col=2 OR col=3 
```

写吧

```
... WHERE col IN (1,2,3) 
```

要收集 PHP 中的所有条目，请使用数组和[`implode()`](http://php.net/implode)稍后：

```
// collecting values
$vals = array();
$vals[] = 1;
$vals[] = 2;
// ...

// add them to your query
$query .= ' WHERE col IN ( ' . implode( ',', $vals ) . ')';

// execute the query ... 
```

如果您的值不是整数，但需要在查询中用撇号括起来，请首先将它们以这种方式插入到数组中：

```
$vals[] = "'my string value'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:10:43.187

如果列`plz`是 INT 类型，并且`$plz`都是整数，那么：

```
$query = 'WHERE plz IN( ' . implode(',', $plz) . ')'; 
```

会工作。否则，尝试这可能会起作用（未经测试）：

```
$query = 'WHERE plz IN( \'' . implode("','", $plz) . '\')'; 
```

# java - 带有远程服务的安卓应用

> ID：12615945
> 
> 赞同：2
> 
> 时间：2012-09-27T07:08:36.510
> 
> 标签：java, android, service, aidl

我根据本教程创建了一个带有aidl的远程服务的android应用程序：

[http://www.anddev.org/remote_service_tutorial-t8127.html](http://www.anddev.org/remote_service_tutorial-t8127.html)

我更改了服务，以便它向 logcat 打印一个计数器以显示它正在运行。

```
class Task implements Runnable {
    private final ResultReceiver receiver2;

    public Task(ResultReceiver receiver) {
        receiver2 = receiver;
    }

    public void run() {

        while (true) {
            ++counter;

            Bundle b = new Bundle();
            try {
                System.out.println("Server counter: " + counter);
                // get some data or something
                b.putInt("results", counter);
                receiver2.send(STATUS_FINISHED, b);
            } catch (Exception e) {
                b.putString(Intent.EXTRA_TEXT, e.toString());
                receiver2.send(STATUS_ERROR, b);
            }

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            // serviceHandler.postDelayed(this, 1000L);
            Log.i(getClass().getSimpleName(), "Incrementing counter in the run method");
        }
    }
} 
```

我想检查即使在主应用程序停止时服务是否继续运行，所以我使用 finish() 来“杀死”活动。即使活动消失，计数器也会连续打印到 logcat。

当我重新打开应用程序时。我单击开始按钮并使用以下代码检查服务是否正在运行（它是，我可以看到在 logcat 中运行的计数器）**，但它在运行服务的列表中不存在**。

我想知道服务是否正在运行。如果它正在运行，那么我想将应用程序绑定到现有服务。如果没有，则应启动新服务。

公共类 ServiceTools { 私有静态字符串 LOG_TAG = ServiceTools.class.getName();

```
public static boolean isServiceRunning(Context context, String serviceClassName) {
    final ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo info : manager.getRunningServices(Integer.MAX_VALUE)) {
        String name = info.service.getClassName();
        if (name.equals(serviceClassName)) {
            return true;
        }
    }
    return false;
 } 
```

}

现在我的问题是：为什么我的服务不在运行服务中？即使它不在正在运行的服务集合中，我也可以绑定到服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:41:19.727

我只想说，在我的设备上，你所说的告诉服务是否正在运行的方法不起作用（它总是会返回 false）。我知道，我为我的一项服务尝试了同样的事情。在[getRunningServices()](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningServices%28int%29)方法的文档中，它声明它实际上不应该被应用程序使用。

此外，根据您的故事，我得出的结论是，服务可能确实被停止/杀死，但它的进程仍然存在，因为它启动的线程仍然存在并且正在工作。所以你可能是对的，服务停止了，但线程仍然存在。您是否在任何代码中使用 stopService() 或 unbindService() ？如果在绑定之前没有调用 startService()，则服务将在其所有客户端调用 unbindService() 后停止...

# android - 应用程序未退出：

> ID：12615951
> 
> 赞同：-3
> 
> 时间：2012-09-27T07:09:33.743
> 
> 标签：android

在我的应用程序中，第一个活动是登录页面活动。

用户进入`username and password` 并进入首页活动。

如果您从主页注销，它会移动到登录页面活动。现在，如果您按返回按钮，我的应用程序应该会关闭，但它会再次进入主页..

但最初当登录页面活动启动并按下后退按钮时没有进入主页活动。应用程序正在关闭..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:11:52.063

当您从 注销时`home activity`，呼叫`finish()`家庭活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:03:09.153

```
Logout.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent loginScreen = new Intent(Home.this, LoginScreen.class);
        startActivity(loginScreen);
        finish();                   
    }
}); 
```

如果你能这样理解！

# select - golang：除非我添加了 fmt.Print()，否则带有 select 的 goroute 不会停止

> ID：12615955
> 
> 赞同：7
> 
> 时间：2012-09-27T07:09:45.807
> 
> 标签：select, go, channel, goroutine

我尝试了 Go Tour[练习 #71](http://tour.golang.org/#71)

如果它像 一样运行`go run 71_hang.go ok`，它工作正常。

但是，如果您使用`go run 71_hang.go nogood`，它将永远运行。

唯一的区别是语句`fmt.Print("")`中`default`的额外内容。`select`

我不确定，但我怀疑某种无限循环和竞争条件？这是我的解决方案。

注意：这不是死锁，因为 Go 没有`throw: all goroutines are asleep - deadlock!`

```
package main

import (
    "fmt"
    "os"
)

type Fetcher interface {
    // Fetch returns the body of URL and
    // a slice of URLs found on that page.
    Fetch(url string) (body string, urls []string, err error)
}

func crawl(todo Todo, fetcher Fetcher,
    todoList chan Todo, done chan bool) {
    body, urls, err := fetcher.Fetch(todo.url)
    if err != nil {
        fmt.Println(err)
    } else {
        fmt.Printf("found: %s %q\n", todo.url, body)
        for _, u := range urls {
            todoList <- Todo{u, todo.depth - 1}
        }
    }
    done <- true
    return
}

type Todo struct {
    url   string
    depth int
}

// Crawl uses fetcher to recursively crawl
// pages starting with url, to a maximum of depth.
func Crawl(url string, depth int, fetcher Fetcher) {
    visited := make(map[string]bool)
    doneCrawling := make(chan bool, 100)
    toDoList := make(chan Todo, 100)
    toDoList <- Todo{url, depth}

    crawling := 0
    for {
        select {
        case todo := <-toDoList:
            if todo.depth > 0 && !visited[todo.url] {
                crawling++
                visited[todo.url] = true
                go crawl(todo, fetcher, toDoList, doneCrawling)
            }
        case <-doneCrawling:
            crawling--
        default:
            if os.Args[1]=="ok" {   // *
                fmt.Print("")
            }
            if crawling == 0 {
                goto END
            }
        }
    }
END:
    return
}

func main() {
    Crawl("http://golang.org/", 4, fetcher)
}

// fakeFetcher is Fetcher that returns canned results.
type fakeFetcher map[string]*fakeResult

type fakeResult struct {
    body string
    urls []string
}

func (f *fakeFetcher) Fetch(url string) (string, []string, error) {
    if res, ok := (*f)[url]; ok {
        return res.body, res.urls, nil
    }
    return "", nil, fmt.Errorf("not found: %s", url)
}

// fetcher is a populated fakeFetcher.
var fetcher = &fakeFetcher{
    "http://golang.org/": &fakeResult{
        "The Go Programming Language",
        []string{
            "http://golang.org/pkg/",
            "http://golang.org/cmd/",
        },
    },
    "http://golang.org/pkg/": &fakeResult{
        "Packages",
        []string{
            "http://golang.org/",
            "http://golang.org/cmd/",
            "http://golang.org/pkg/fmt/",
            "http://golang.org/pkg/os/",
        },
    },
    "http://golang.org/pkg/fmt/": &fakeResult{
        "Package fmt",
        []string{
            "http://golang.org/",
            "http://golang.org/pkg/",
        },
    },
    "http://golang.org/pkg/os/": &fakeResult{
        "Package os",
        []string{
            "http://golang.org/",
            "http://golang.org/pkg/",
        },
    },
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T08:43:00.120

以select 的工作方式`default`在您的更改中添加声明。`select`如果没有默认语句，select 将阻止等待通道上的任何消息。使用默认语句 select 将在每次从通道中读取任何内容时运行默认语句。在您的代码中，我认为这是一个无限循环。放入该`fmt.Print`语句是允许调度程序调度其他 goroutines。

如果您像这样更改代码，那么它可以正常工作，以非阻塞方式使用 select，这允许其他 goroutine 正常运行。

```
 for {
        select {
        case todo := <-toDoList:
            if todo.depth > 0 && !visited[todo.url] {
                crawling++
                visited[todo.url] = true
                go crawl(todo, fetcher, toDoList, doneCrawling)
            }
        case <-doneCrawling:
            crawling--
        }
        if crawling == 0 {
            break
        }
    } 
```

如果您使用 GOMAXPROCS=2 可以使您的原始代码工作，这是调度程序在无限循环中忙碌的另一个提示。

请注意，goroutine 是协作调度的。我对您的问题不完全理解的是，这`select`是 goroutine 应该让步的一点 - 我希望其他人可以解释为什么它不在您的示例中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T16:05:43.760

您有 100% 的 CPU 负载，因为几乎所有时候默认情况都会被执行，从而有效地导致无限循环，因为它会一遍又一遍地执行。在这种情况下，Go 调度程序不会根据设计将控制权交给另一个 goroutine。因此，任何其他 goroutine 将永远没有机会设置`crawling != 0`，并且您将拥有无限循环。

在我看来，如果您想使用 select 语句，您应该删除默认情况并创建另一个通道。

否则，[运行时](http://golang.org/pkg/runtime)包会帮助您走脏路：

*   `runtime.GOMAXPROCS(2)`将工作（或导出 GOMAXPROCS=2），这样您将拥有多个执行的 OS 线程
*   `runtime.Gosched()`不时在 Crawl 内部调用。尽管 CPU 负载是 100%，但这会明确地将控制权传递给另一个 Goroutine。

编辑：是的，以及 fmt.Printf 有所作为的原因：因为它明确地将控制权传递给一些系统调用的东西......；）

# sharepoint-2010 - 如何在 Sharepoint 事件接 收器中检查最后添加的项目是否为文件夹

> ID：12615956
> 
> 赞同：2
> 
> 时间：2012-09-27T07:09:49.100
> 
> 标签：sharepoint-2010, eventreceiver

在我的 ItemAdded 函数中，我想检查最后添加的项目是否为折叠。如何检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:26:15.383

```
public class ClassName : SPItemEventReceiver
{
    public override void ItemAdded(SPItemEventProperties properties)
    {
        bool isFolder = (properties.ListItem.Folder != null);
    }
} 
```

# python - 使用pyserial与调制解调器通信

> ID：12615963
> 
> 赞同：3
> 
> 时间：2012-09-27T07:10:16.883
> 
> 标签：python, serial-port, modem, pyserial

我没有找到一个合理的好例子来说明如何使用 pyserial 与串行调制解调器通信。给定一个实例化的 pyserial 对象，我创建了一个应该执行以下操作的代码片段`ser`：

*   向调制解调器发送 AT 命令
*   尽快返回调制解调器应答
*   在超时的情况下返回例如 None
*   处理脚本和调制解调器之间的通信最合理、健壮和容易。

这是片段：

```
def send(cmd, timeout=2):

  # flush all output data
  ser.flushOutput()

  # initialize the timer for timeout
  t0 = time.time()
  dt = 0

  # send the command to the serial port
  ser.write(cmd+'\r')

  # wait until answer within the alotted time
  while ser.inWaiting()==0 and time.time()-t0<timeout:
    pass

  n = ser.inWaiting()
  if n>0:
    return ser.read(n)
  else:
    return None 
```

我的问题：这是好的、健壮的代码，还是可以更改/简化部分？我特别不喜欢这种`read(n)`方法，我希望 pyserial 提供一段只返回整个缓冲区内容的代码。另外，我/我应该在开始时刷新输出，以避免之前在输出缓冲区中有一些废话吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:31:39.773

`timeout=2`使用读取超时参数创建 Serial 对象。

我的食谱是：

```
def send(data):
    try:
        ser.write(data)
    except Exception as e:
        print "Couldn't send data to serial port: %s" % str(e)
    else:
        try:
            data = ser.read(1)
        except Exception as e:
            print "Couldn't read data from serial port: %s" % str(e)
        else:
            if data:  # If data = None, timeout occurr
                n = ser.inWaiting()
                if n > 0: data += ser.read(n)
                return data 
```

我认为这是管理与串口通信的一种很好的形式。

# scala - 为什么使用 Scala-IDE 的 Scala 工作表会将此视为错误？

> ID：12615964
> 
> 赞同：2
> 
> 时间：2012-09-27T07:10:22.310
> 
> 标签：scala, scala-ide

在 Scala 工作表中，我可以这样做：

```
object Play {

 println("Playing a bit")                         //> Playing a bit

 case class X(a: Int = 1, x: List[X]){
 }

} 
```

但我不能这样做：

```
object Play {

 case class X(a: Int = 1, x: List[X]){
 }

} 
```

在后者中，它会在案例类之后抱怨`; was expected but import found`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:56:29.533

这似乎是在最新的 Scala IDE 夜间版本中修复的错误。见[https://stackoverflow.com/a/12767214/770361](https://stackoverflow.com/a/12767214/770361)

# wpf - 如何将加载的文件的内容复制到文本框中

> ID：12615965
> 
> 赞同：0
> 
> 时间：2012-09-27T07:10:23.147
> 
> 标签：wpf, mvvm, textbox, openfiledialog

我的 .xaml 中有一个文本框和一个按钮。当我单击按钮时，我能够打开一个文件对话框并能够选择文件。

**主窗口.Xaml：**

```
<TextBox Height="93" IsReadOnly="True" Text="{Binding Path=ReadMessage, Mode=TwoWay}" Name="MessageRead" />

<Button Content="Load" Name="I2CLoadBtn" Command={Binding Path = LoadContentCommand /> 
```

**我的视图模型类：**

```
public static RelayCommand LoadContentCommand { get; set; }

    private string _ReadMessage;
    public string ReadMessage
    {
        get { return __ReadMessage; }
        set
        {
            __ReadMessage= value;
            NotifyPropertyChanged("ReadMessage");
        }
    }

    private void RegisterCommands()
    {
        LoadContentCommand = new RelayCommand(param => this.ExecuteOpenFileDialog());
    }

    private void ExecuteOpenFileDialog()
    {
        var dialog = new OpenFileDialog { InitialDirectory = _defaultPath };
        dialog.ShowDialog();
        dialog.DefaultExt = ".bin";
        dialog.Filter = "Bin Files (*.bin)|*.bin";           
    } 
```

我基本上想要的是，一旦选择了文件，文件的内容必须保存到文本框中。例如，如果我要加载一个 .txt 文件，则在加载内容时必须将其放在文本框中。

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:23:24.257

You can do this via an interface :

```
public interface IFileReader
    {
        string Read(string filePath);
    }
    public class FileReader : IFileReader
    {
        public string Read(string filePath)
        {
           byte[] fileBytes = File.ReadAllBytes(filePath);
            StringBuilder sb = new StringBuilder();
            foreach(byte b in fileBytes)
            {
                sb.Append(Convert.ToString(b, 2).PadLeft(8, '0'));  
            }
            return sb.ToString();
        }
    } 
```

Then you can instantiate this via you ViewModel's constructor or property :

```
 public ViewModel(IFileReader FileReader) // constructor
        { }

public IFileReader FileReader { get; set; } // property 
```

Hope it helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:19:32.083

这是您获得所选路径的方式：

```
string path = "";
if (dialog .ShowDialog() == true)
{
    path = dialog.FileName;
}

using (StreamReader sr = new StreamReader(path)) 
{
     ReadMessage = sr.ReadToEnd()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:15:01.130

我喜欢使用[File.ReadAllText](http://msdn.microsoft.com/en-us/library/ms143368.aspx)读取文本文件的语法。

```
string readText = File.ReadAllText(path); 
```

# postgresql - 时间范围内的聚合

> ID：12615969
> 
> 赞同：3
> 
> 时间：2012-09-27T07:10:34.260
> 
> 标签：postgresql, time, aggregation

我有一个数据集，其中包含日期 {yyyy/mm/dd} 和时间 {h,m,s} 和温度 {float} 作为单独的列。

我想通过平均函数汇总每天的温度值。

问题是，我不知道如何自动查询时间属性，例如聚合`{h,m, (0-5)s}`和`{h,m, (5-10)s}`和`{h,m, (10-15)s}`和...。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:45:51.003

```
select
    day,
    to_char(date_trunc('minute', "time"), 'HH24:MI') as "minute",
    extract(second from "time")::integer / 5 as "range",
    avg(temperature) as average
from (
    select d::date as day, d::time as "time", random() * 100 as temperature
    from generate_series('2012-01-01', '2012-01-03', '1 second'::interval) s(d)
) d
group by 1, 2, 3
order by 1, 2, 3
; 
```

如果您想要所有天的平均值：

```
select
    to_char(date_trunc('minute', "time"), 'HH24:MI') as "minute",
    extract(second from "time")::integer / 5 as "range",
    avg(temperature) as average
from (
    select d::time as "time", random() * 100 as temperature
    from generate_series('2012-01-01', '2012-01-03', '1 second'::interval) s(d)
) d
group by 1, 2
order by 1, 2
; 
```

我认为您问题的重要部分是按秒除以范围大小的整数结果进行分组。

# sql - 在绩效中使用价值与变量

> ID：12615972
> 
> 赞同：1
> 
> 时间：2012-09-27T07:10:46.773
> 
> 标签：sql, sql-server, sql-server-2008

```
select *
from table1 t1
where
  t1.somedate between UDF(date1) and UDF(date2) 
```

UDF：用户定义函数

这`UDF(date1)`和`UDF(date2)`, 是否会针对 的每一行进行评估`t1`。

这会降低性能。

我试过的第二个选项

```
declare @a datetime, @b datetime
set @a=UDF(date1)
set @b=UDF(date2)
select *
    from table1 t1
    where
      t1.somedate between @a and @b 
```

即使这样也需要很长时间。

可能是什么原因，可能是什么解决方法。

如果我写

```
select *
    from table1 t1
    where
      t1.somedate between date1 and date2 
```

它非常快。大约需要 3 秒。以上查询需要 2-3 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:14:12.267

首先，我认为使用变量而不是 UDF 不会提高性能，因为 udf 应该是确定性的。所以它只会被计算一次。

其次，您在 somedate 字段上有索引吗？如果你不这样做，就放一个。如果有，您可能会检查获得了多少数据以及是否有网络问题。

你应该检查一下查询计划，它会更好地告诉你那里发生了什么。

# php - php异步电子邮件？

> ID：12615977
> 
> 赞同：2
> 
> 时间：2012-09-27T07:11:00.113
> 
> 标签：php, multithreading, yii

我想知道.. Yii 是否支持异步脚本执行或多线程？

当用户更新个人资料时，我处于发送 4 封电子邮件（至：accounting det、user、created-person、admin）的情况。

我几乎完成了我的要求，但不幸的是 php 页面需要太多时间，加载时间超过 12 秒，这不是一个好习惯。

有人可以建议我在更短的时间内完成这项任务吗？任何帮助将不胜感激。

请注意：在每封电子邮件中，内容彼此不同。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:20:48.497

PHP 不支持线程，但通过 Pcntl 扩展，它支持进程分叉。您可以创建一个将向您发送电子邮件的子进程。我猜你不应该在你的情况下使用“pcntl_wait”。

[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

# jquery - 宽度后面的这些数字是什么？

> ID：12615983
> 
> 赞同：0
> 
> 时间：2012-09-27T07:11:41.707
> 
> 标签：jquery, twitter-bootstrap

我一直在分解 Twitter Bootstap，想知道 290 : 330 之间的关系是什么。

我知道 330 是侧边栏固定时滚动的像素数。谢谢！

```
// side bar
$('.bs-docs-sidenav').affix({
  offset: {
    top: function () { return $window.width() <= 980 ? 290 : 330 }
  , bottom: 270
  }
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:13:25.963

这意味着如果`$window.width()`小于或等于 980，则 ( `?`) 使用 290 的顶部偏移量，否则 ( `:`) 使用 330 的顶部偏移量。

同样的事情可以写成：

```
top: function () { 
    if ($window.width() <= 980) {
        return 290;
    } else {
        return 330;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T07:16:04.887

```
return $window.width() <= 980 ? 290 : 330 
```

使用作为基本条件表达式语法一部分的**三元运算符。**

它的作用是，如果宽度小于 980，则返回 290，否则返回 330。

```
variable = condition ? value_if_true : value_if_false 
```

请参考以下示例。

```
opening_time = (day == WEEKEND) ? 12 : 9; // using ternary operator 
```

而不是上面的行，你可以使用

```
 //using normal coding 
    if (day == WEEKEND)
        opening_time = 12;
    else
        opening_time = 9; 
```

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T07:16:14.823

这是一个if条件

如果你`window width is <= 980`会`return 290 else 330`

# objective-c - 怎么做音频淡出

> ID：12615986
> 
> 赞同：1
> 
> 时间：2012-09-27T07:11:54.077
> 
> 标签：objective-c, ios5, avaudioplayer

我想在特定时间后淡出音频，例如：-我的音频持续时间是 4 秒，淡出时间是 2 秒，然后在 2 秒后我想淡出（降低播放器的音量）音频

为此我写了这个函数

但它不能正常工作音频淡出但淡出的持续时间小于 2 秒

在这个函数中，延迟是淡出的时间

```
-(void)fadevolumeDown1:(NSNumber *)delay
{

     float t=self.player.duration-self.player.currentTime;
     if(t<=fadeOut)
     {
         self.player.volume=self.player.volume -0.05; 
     }

     volumeChange=YES;
     if (self.player.volume <= 0)
     {
        volumeChange=NO;
        self.player.volume=0;
        mute=NO;
        first_decrease=false;
     } 
     else
     {
         if(!goBack)
         {
            if(self.player.currentTime<=self.player.duration)
            {
               [self performSelector:@selector(fadevolumeDown1:) withObject:delay afterDelay:0.1];
            }
         }
      }   
 } 
```

# javascript - AJAX 将 javascript 文件读取为文本文件（防止代码重复）

> ID：12615989
> 
> 赞同：1
> 
> 时间：2012-09-27T07:12:00.650
> 
> 标签：javascript, jquery, ajax

如何将javascript文件读取为文本文件并防止代码多次运行

index.js

```
 version = "1.001";
  alert("JS run");
  ... other code ... 
```

我有使用 index.js 的 html
我尝试通过使用来读取 index.js

```
jQuery.get("js/index.js",function(data){ 
    var currentVersion = data.split("\n")[0].split('"')[1];
} 
```

我可以根据需要阅读文本，但是在我使用此代码后，警报（“JS run”）和里面的其他代码也会运行。

# c#-4.0 - DataGrid 的 DataTemplate 中的 TextBox 上的触发器不起作用

> ID：12615992
> 
> 赞同：1
> 
> 时间：2012-09-27T07:12:06.727
> 
> 标签：c#-4.0, mvvm, .net-4.0, silverlight-4.0

在工作时`MVVM in Silverlight 4.0`。我遇到了以下问题。
见下文`Xaml`。请注意，在 TextBox1 中，方法`UpdateText`（在交互触发器下）正在工作，但`TextBox2`其中是`DataGrid's`模板的一部分，这里方法“ `UpdateText`”根本不起作用。谁能帮我在`TextChanged`Event of上调用一个方法`TextBox2`？（UpdateText 只是`MVVM`类中使用`TextBox1`但不使用 TextBox2 的简单方法）

这是 xaml ：

```
<UserControl xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"  x:Class="MVVMEventTriggerDemo.Views.MainView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:viewModel="clr-namespace:MVVMEventTriggerDemo.ViewModels"
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
xmlns:si="clr-namespace:Expression.Samples.Interactivity;assembly=Expression.Samples.Interactivity"
Height="600" Width="700">
<UserControl.Resources>
    <viewModel:MainViewModel x:Key="MainViewmodel"/>
</UserControl.Resources>
<Grid x:Name="LayoutRoot" Background="White" DataContext="{StaticResource MainViewmodel}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="258*" />
        <ColumnDefinition Width="262*" />
    </Grid.ColumnDefinitions>
    <TextBox x:Name="textbox1" Text="{Binding EmployeeName, Mode=TwoWay}" Width="100" Height="30" Margin="142,77,20,289" Grid.Column="1">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="TextChanged">
                <si:CallDataMethod Method="UpdateText"/>
                <si:ShowMessageBox Caption="Thank you"
                                   Message="Thanks for trying the Example"
                                   MessageBoxButton="OK"/>
                <si:SetProperty TargetName="textbox1" PropertyName="Background" Value="PaleGoldenrod"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </TextBox>
    <Button Content="Show Message" Width="100" Height="25" Margin="142,113,20,258" Grid.Column="1">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click">
                <si:CallDataMethod Method="HandleShowMessage"/>
                <si:ShowMessageBox Caption="Thank you"
                                   Message="Thanks for trying the Example"
                                   MessageBoxButton="OK"/>
                <si:SetProperty TargetName="LayoutRoot" PropertyName="Background" Value="PaleGoldenrod"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Button>
    <sdk:DataGrid 
        x:Name="dgDevice" 
        AutoGenerateColumns="False" 
        Margin="13,13,13,13"
        BorderThickness="1,0,1,1"
        RowBackground="White"
        VerticalScrollBarVisibility="Auto" Width="320" 
        Opacity="0.9"
        Background="White"
        GridLinesVisibility="None"
        HeadersVisibility="None"
        HorizontalScrollBarVisibility="Disabled"
        ItemsSource="{Binding ActualColors,Mode=TwoWay}">
        <sdk:DataGrid.Columns>
            <sdk:DataGridTemplateColumn Width="320" >
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Grid Width="auto">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30*"  />                                   
                                <ColumnDefinition Width="20*" />
                            </Grid.ColumnDefinitions>

           <TextBox x:Name="textbox2" Text="{Binding EmployeeName, Mode=TwoWay}" Width="100" Height="30" Margin="142,77,20,289" Grid.Column="1">
            <i:Interaction.Triggers>
              <i:EventTrigger EventName="TextChanged">
                <si:CallDataMethod Method="UpdateText"/>
                <si:ShowMessageBox Caption="Thank you"
                                   Message="Thanks for trying the Example"
                                   MessageBoxButton="OK"/>
                <si:SetProperty TargetName="textbox2" PropertyName="Background" Value="PaleGoldenrod"/>
                 </i:EventTrigger>
               </i:Interaction.Triggers>
            </TextBox>
       </Grid>
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
            </sdk:DataGridTemplateColumn>
        </sdk:DataGrid.Columns>
    </sdk:DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:08:01.730

我不确定它可以帮助你，但在 Datatemplate 绑定中会像

```
<TextBlock Text="{Binding Path=DataContext.BusyText, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}}" /> 
```

我认为您可能必须绑定与上句中的文本绑定相同的事件。

# c++ - Win32：如何捕获同时单击鼠标左键和右键

> ID：12615994
> 
> 赞同：1
> 
> 时间：2012-09-27T07:12:09.243
> 
> 标签：c++, click, mouse, win32gui

当用户（单击并）同时释放左右鼠标时，我正在尝试对特定行为进行编程。是否有已知的方法来捕获此类事件/手势。我知道如何捕获 leftButtonUp 和 rightButtonUp 但不确定如何捕获此事件。

如果按下左按钮，然后按增量延迟按下右按钮，则可以。当用户释放右键/左键时，如果随后在定义的 epsilon 时间内释放其他按钮，则应引发此类事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:25:49.997

WinAPI 中没有此类事件，但您可以自己跟踪。[所有按钮向下/向上消息的wParam](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645608%28v=vs.85%29.aspx)包含事件发生时所有按钮的状态信息：

```
MK_LBUTTON 0x0001 The left mouse button is down.
MK_MBUTTON 0x0010 The middle mouse button is down.
MK_RBUTTON 0x0002 The right mouse button is down. 
```

因此，您需要跟踪更改并定义一个阈值，该阈值将过滤掉您认为是“同时单击/释放”的所有事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:25:26.750

您将需要编写自己的处理方法。记录单击第一个按钮的时间，单击另一个按钮的时间，查看第一个按钮是否仍处于关闭状态以及延迟是否小于您提供的任何增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T21:50:32.633

```
If GetAsyncKey(0x01) && GetAsyncKey(0x02){
DoEvent();
} 
```

# java - 用 '.' 分割 Java 字符串

> ID：12615995
> 
> 赞同：5
> 
> 时间：2012-09-27T07:12:11.047
> 
> 标签：java

我有

```
1\. This is a  test message 
```

我要打印

```
This is a  test message 
```

我在尝试

```
String delimiter=".";
String[] parts = line.split(delimiter);
int gg=parts.length; 
```

比想打印数组

```
 for (int k ;k <gg;K++)
    parts[k]; 
```

但是我的gg总是0。我错过了什么吗？我只需要删除数字和 . 和空白

该号码可以是 1（或）5 位数字

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T07:13:54.507

您正在`"."`用作分隔符，您应该打破`.`char 的特殊含义。

正则表达式中的`.`char 是“任何字符”，因此您的拆分只是根据“任何字符”进行拆分，这显然不是您所追求的。

**用作`"\\."`分隔符**

有关预定义字符类的更多信息，您可以[查看教程](http://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html)。
有关常规正则表达式的更多信息（包括上述内容），您可以尝试[本教程](http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

**编辑**：
PS 你在做什么（删除数字）可以用单线来实现，使用该[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法。

```
System.out.println(line.replaceAll("[0-9]+\\.\\s+", "")); 
```

将提供输出

```
This is a  test message 
```

对于您的输入示例。

这个想法是：`[0-9]`是任何数字。-`+`表示可以有任意数量，大于 0。`\\.`是一个点（如上所述，带有中断），并且`\\s+`至少是一个空格。
全部替换为空字符串。

但是请注意，对于像这样的字符串：`"1\. this is a 2\. test"`- 它将提供“这是一个测试”，并删除“2.”，因此请仔细考虑这是否确实是您所追求的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T07:13:45.507

使用以下代码..

```
String delimtor="\\."; // use this because . required to be skipped
String[] parts = line.split(delimtor); 
```

对于您的 for 循环。

```
 for (int k=0 ;k <gg.length;K++)
    parts[k]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T07:15:38.307

试试这个

```
String delimtor = "\\."; 
```

“。” 对于正则表达式有特殊含义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T07:20:58.940

如果您只是想删除前缀号码，那么您可以在一行中完成。不确定您是否真的想分割多个点。如果它只是前缀，那么你可以在一行中完成

```
String s = "1\. with single digit";
String s2 = "999\. with multiple digits";
String s3 = "999\. with multiple digits . and . dots";

assertEquals("with single digit", (s.substring(s.indexOf(".") + 1).trim()));
assertEquals("with multiple digits", (s2.substring(s2.indexOf(".") + 1).trim()));
assertEquals("with multiple digits . and . dots", (s3.substring(s3.indexOf(".") + 1).trim())); 
```