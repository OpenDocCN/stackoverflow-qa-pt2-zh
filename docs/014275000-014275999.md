# StackOverflow 问答 14275000-14275999

# javascript - 如果在表格网格中选中复选框，则禁用文本框

> ID：14275000
> 
> 赞同：0
> 
> 时间：2013-01-11T09:22:04.497
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

我有一个使用 div 的表格网格。在该表中，我有一个复选框和每一行的文本框。如果选中该复选框，我想禁用文本框。我在这里附上了小提琴。如何在 javascript 中找到下一个要禁用的 div。

[小提琴演示](http://jsfiddle.net/Hv3V4/11/)

## HTML

```
<div class="containerDiv">

  <div class="rowDivHeader">
    <div class="cellDivHeader">Recommendation</div>
    <div class="cellDivHeader">Typical savings</div>
    <div class="cellDivHeader">Improved SAP</div>
    <div class="cellDivHeader">Improved EI</div>
    <div class="cellDivHeader">Indicative cost</div>
    <div class="cellDivHeader">Include</div>
    <div class="cellDivHeader lastCell">Removal Reason</div>
  </div>

  <div class="rowDiv">
    <div class="cellDiv">Room-in-roof-insulation</div>
    <div class="cellDiv">93.0</div>
    <div class="cellDiv">F : 29</div>
    <div class="cellDiv">B : 89</div>
    <div class="cellDiv">£1,500 - £2,700</div>
    <div class="cellDiv">
      <input type="checkbox" class="checkbox"/>
    </div>
    <div class="cellDiv lastCell">
      <input type="text" class="textbox"/>
    </div>
  </div>
  <div class="rowDiv">
    <div class="cellDiv">Room-in-roof-insulation</div>
    <div class="cellDiv">93.0</div>
    <div class="cellDiv">F : 29</div>
    <div class="cellDiv">B : 89</div>
    <div class="cellDiv">£1,500 - £2,700</div>
    <div class="cellDiv">
      <input type="checkbox" class="checkbox"/>
    </div>
    <div class="cellDiv lastCell">
      <input type="text" class="textbox"/>
    </div>
  </div>
  <div class="rowDiv">
    <div class="cellDiv">Room-in-roof-insulation</div>
    <div class="cellDiv">93.0</div>
    <div class="cellDiv">F : 29</div>
    <div class="cellDiv">B : 89</div>
    <div class="cellDiv">£1,500 - £2,700</div>
    <div class="cellDiv">
      <input type="checkbox" class="checkbox"/>
    </div>
    <div class="cellDiv lastCell">
      <input type="text" class="textbox"/>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:29:12.227

```
$('.checkbox').click(function(){
  var textbox = $(this).parent().next().find('input');
  if($(this).prop('checked')){
    textbox.prop('disabled',true);
  }else{
    textbox.prop('disabled',false);
  }
}); 
```

这是 jQuery 代码。

演示在这里[http://jsfiddle.net/Hv3V4/17/](http://jsfiddle.net/Hv3V4/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:39:48.113

另一种方法是向`data-...`应该相互关联的元素添加属性，然后将 JS 建立在这些新`data-...`属性的基础上。这可以在其他地方重新使用，使用不同的 HTML，并且在重构 HTML 时会有更大的灵活性。

例如，使用以下 HTML

```
<div class="rowDiv" data-check-disables-scope>
  <div class="cellDiv">Room-in-roof-insulation</div>
  <div class="cellDiv">93.0</div>
  <div class="cellDiv">F : 29</div>
  <div class="cellDiv">B : 89</div>
  <div class="cellDiv">£1,500 - £2,700</div>
  <div class="cellDiv">
    <input type="checkbox" data-check-disables="input" class="checkbox"/>
  </div>
  <div class="cellDiv lastCell">
    <input type="text" class="textbox"/>
  </div>
</div> 
```

可以编写 JavaScript 以便`data-check-disables-scope`定义 jQuery 搜索上下文。在这种情况下，任何具有`data-check-disables`属性的元素都将禁用与该属性值匹配的元素（该值应该是 jQuery 选择器）。因此，在上面，复选框将禁用文本输入，因为`<input ...>`它将匹配由`data-check-disables="input"`属性定义的选择器。

在以下 HTML 中，当复选框被切换时，`<select>`和`<input type="text"...>`元素将被禁用：

```
<div class="rowDiv" data-check-disables-scope>
  <div class="cellDiv">Multiple:</div>
  <div class="cellDiv">
    <input type="checkbox" data-check-disables="input, select" class="checkbox"/>
  </div>
  <div class="cellDiv">
    <input type="text" class="textbox"/>
  </div>
  <div class="cellDiv lastCell">
    <select name="select">
      <option value="value1">Value 1</option> 
      <option value="value2">Value 2</option>
      <option value="value3">Value 3</option>
    </select>
  </div>
</div> 
```

JS

```
$('[data-check-disables-scope]').each(function() {

  var $scope = $(this),
      $src = $scope.find('[data-check-disables]');

  if (!$src.length) {
    return;
  }

  $src.each(function() {

    var $srcElm = $(this),
        qry = $srcElm.data('check-disables'),
        $target = $scope.find(qry).not($src);

    if (!$target.length) {
      return;
    }

    $target.prop('disabled', $srcElm.prop('checked'));

    $srcElm.on('change.check-disables', function() {
      $target.prop('disabled', $srcElm.prop('checked'));
    });

  });
}); 
```

演示：http: [//jsfiddle.net/Hv3V4/21/](http://jsfiddle.net/Hv3V4/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:00:44.863

使用 jquery 你可以做这样的事情

```
$("input[type='checkbox']").click(function(){
var i = $(this).parent().next(".lastCell").children("input");

  if(i.attr("disabled") == "disabled")
  {
    i.removeAttr("disabled");  
    return;    
  }    
  i.attr("disabled","disabled");  
}); 
```

# c# - 同时等待多个任务的设计模式

> ID：14275005
> 
> 赞同：3
> 
> 时间：2013-01-11T09:22:16.540
> 
> 标签：c#, asynchronous, async-await

这是我的方法。我有几个`IEventProviders`，

```
interface IEventProvider
{
    Task<Event> GetEvent();
} 
```

然后我得到一个容器类来包装它们，并继续调用并等待`GetEvent()`等待下一个事件，例如套接字异步接收、计时器滴答等。

```
class EventProviderContainer : IEventProvider
{
    private IEventProvider[] _providers;
    private Task<Event>[] _tasks;

    public EventProviderContainer(params IEventProvider[] providers)
    {
        _providers = providers;
    }

    public async Task<Event> GetEvent()
    {
        // Fill the _tasks first time we call the method.
        if (_tasks == null)
            _tasks = (from p in _providers select p.GetEvent()).ToArray();

        Task<Event> task = await Task<Event>.WhenAny(_tasks);

        // Get the provider index whose previous task is done.
        int index = Array.IndexOf(_tasks, task);
        // put next event of the provider into array.
        _tasks[index] = _providers[index].GetEvent();

        return await task;
    }
} 
```

我觉得有点丑。这是更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:22:26.793

对于实际上并不那么简单的任务，您的代码非常简短且易于理解，而且我个人认为它并不难看。

我不认为你会找到更好的方法来编写这段代码，除非你想改变你的整个界面。我唯一要改变的是将初始化移动`_tasks`到构造函数（但也许你有这样做的理由）。

但我同意斯蒂芬的评论，对于事件，使用“推”语义通常比“拉”更合适。为此，Rx ( `IObservable<Event>`) 或 TPL Dataflow ( `ISourceBlock<Event>`) 将非常有用。在这两种情况下，写作`EventProviderContainer`都会相对简单。两者中哪一个是更好的选择取决于您将如何处理结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:02:53.120

如果您希望一次为每个提供者提供一个事件，那么我建议您查看[处理任务，因为它们完成](http://blogs.msdn.com/b/pfxteam/archive/2012/08/02/processing-tasks-as-they-complete.aspx)了包含`Interleaved`方法的 MSDN 文章。此方法接受一组任务并返回一个新的任务数组，这些任务将按完成顺序产生。

另一方面，如果您想在每个提供程序到达时连续接收事件，那么我建议您查看 Microsoft 的[Reactive Extensions (Rx)](http://msdn.microsoft.com/en-us/data/gg577609.aspx)项目。

使用 Rx，你的事件提供者接口会变成这样：

```
public interface IEventProvider
{
    IObservable<Event> OnEvent();
} 
```

然后，您的容器提供者将使用[Observable.Merge](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.merge.aspx)扩展方法来组合每个子提供者的事件。

```
return _providers.Select(provider => provider.OnEvent()).Merge(); 
```

要实际接收事件，您可以通过附加一个回调委托来订阅 observable，该委托在每次有新事件可用时执行。

```
var provider = new EventProviderContainer(
    new TestEventProvider("a", 1000),
    new TestEventProvider("b", 1300),
    new TestEventProvider("c", 1600));
provider.OnEvent().Subscribe(Console.WriteLine);
Console.ReadLine(); 
```

[上面的示例使用了一个测试事件提供程序，它使用Observable.Timer](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.timer.aspx)扩展方法在给定的时间段内返回连续的事件流（以毫秒为单位） 。

```
return Observable.Timer(TimeSpan.Zero, TimeSpan.FromMilliseconds(_period))
                 .Select(i => new TestEvent(_name, i)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:08:36.763

我认为您要实现的正确代码是这样的：

```
 public async Task<Event> GetEvent()
    {
        // Fill the _tasks first time we call the method.
        if (_tasks == null)
            _tasks = (from p in _providers select p.GetEvent()).ToArray();

        return await await Task<Event>.WhenAny(_tasks);
    } 
```

the`await await`似乎有点奇怪，但由于`WhenAny()`返回 a`Task<Task<T>>`它必须是正确的。

# linux - 可以直接从 C 代码调用的 ESQL/C 函数？

> ID：14275009
> 
> 赞同：-2
> 
> 时间：2013-01-11T09:22:28.193
> 
> 标签：linux, unix, migration, informix

谁能告诉我一些可以直接从 C 代码调用的 ESQL/C 函数？我使用 Informix 作为数据库，使用 HP-UX 作为操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:29:09.023

ESQL/C 的全部意义在于您编写包含嵌入式 SQL 语句的代码，然后通过 ESQL/C 预处理器运行 ESQL/C 代码以生成 C 代码，然后 C 编译器将其编译为目标代码以供使用。

[ESQL/C 程序员手册](https://www.ibm.com/support/knowledgecenter/SSGU8G_11.70.0/com.ibm.esqlc.doc/esqlc.htm)描述了如何使用 ESQL/C 。您可以在[IBM Informix 11.70 信息中心](https://www.ibm.com/support/knowledgecenter/SSGU8G_11.70.0/com.ibm.welcome.doc/welcome.htm)找到更多信息，包括下载 PDF 文件的链接。

ESQL/C 程序员手册记录了您希望直接从 ESQL/C 程序的 C 部分调用的函数。直接与服务器对话的接口没有记录为 C 函数，而是嵌入的 SQL 语句。您使用那些未记录的接口函数需要您自担风险——我建议您不要冒险（但由于我在 IBM 的 Informix 工作，所以我有偏见）。

# wif - 被动联合中的用户管理

> ID：14275012
> 
> 赞同：0
> 
> 时间：2013-01-11T09:22:49.020
> 
> 标签：wif, saml, federation, ws-federation

我使用 Windows 身份框架 (WIF) 创建了 IP-STS 和一个联合下的三个独立的依赖方。Federated Single Sing On 和 Sign Out 方案运行良好。这是作为演示准备的。

我的问题是什么？

在生产中，我必须在身份屋顶下统一 3 个不同的 Web 应用程序。目前，所有这些应用程序都有不同的身份验证和授权机制，在数据存储中为特定用户分配了不同的表集等。对于登录和注销，一切对我来说都很清楚。问题在于创建新用户。在这些情况下是否有任何一般模式。为什么我要问这个。当你在这种情况下更深入时，你会发现这并不是那么简单。对于第一个 Web 应用程序，我们有一组受支持的字段（其中大部分是来自 DB 的一些枚举），来自第二组其他的......所以，我需要从所有依赖方获得这个过程的所有数据. 如何做到这一点？一种方法是使用一组 IFRAMES 或类似的东西？此外，由于依赖于用户实体的单独应用程序中的关系表，我需要在每个应用程序中都有新用户。在我看来它非常复杂，我很好奇这种情况是否有任何众所周知的模式。我确信我不是第一个必须在一个身份管理下统一完全不同的应用程序的人。

**更新**：我发现这是供应管理或联合供应的一部分。我还发现它可以通过与 SAML 协议并行的 SPML 协议来实现。出于这些目的，WIF 中是否有任何协议或集成点？

问候， 拉斯特科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:10:05.203

ADFS/WIF 不支持 SPML。SPML 通常由 Identity Manager 提供，因为它是一种供应协议。ADFS 是 STS，而不是身份管理器。

WIF 不支持 SAML - ADFS 支持。

WIF 有一个 SAML CTP（预览） -[宣布 SAML 2.0 协议社区技术预览的 WIF 扩展](http://blogs.msdn.com/b/card/archive/2011/05/16/announcing-the-wif-extension-for-saml-2-0-protocol-community-technology-preview.aspx)。

您还可以使用其他开源产品，例如[.NET Oracle OpenSSO Fedlet](http://docs.oracle.com/cd/E17842_01/doc.1111/e17847/confignetsp.htm)。

**更新**

关于。SPML - 是的，这是可能的 - 它只是一个协议。有一个开源的 Java 库，它既是开源的，也适用于 C#，例如[Softerra™ SPML2 库](http://www.softerra.com/products_spml-library.htm)。

您可以有一些使用 WIF 的 RP 和一些使用 SAML 的 RP - 这只是配置问题。将两者放在同一个 RP 中会很困难。

ForgeRock 生产的 OpenAM 产品兼具两者。它没有 ADFS 的声明规则语言丰富性，但工作正常。但是，配置可能很棘手。如果您拥有 Windows Server 许可证，ADFS 是免费的。

# php - 以正确的方式处理高流量

> ID：14275013
> 
> 赞同：2
> 
> 时间：2013-01-11T09:22:52.190
> 
> 标签：php, mysql, optimization

我正在使用 PHP 和 MySQL 来处理我的多人 iOS 游戏（为 Android 构建）的数据，并且该游戏正在取得成功。我在高流量时间有大约 3 个电话公关。第二到我的“move.php”页面。它需要玩家移动并将数据保存在我的数据库中，然后返回“完成”。我需要这个来确保没有出错。当有高压时，我需要大约 3-5 秒才能“完成”回来，甚至更多。我希望获得的用户数量是现在的 10 倍，并且担心这会导致响应时间过长或开始失败...在我的 move.php 页面中，我有大约 5 个不同的选择查询，4 个更新查询和 2 个插入查询。这部分是优化的，但是我用的是常规的mysql和php。

我正在徘徊在这一点上什么是好的做法，以及如何使这更快，特别是为了将“完成”送回。只要用户没有经历过这种情况，我不介意之后的长时间执行。mysqli、pro、存储过程等对我有什么帮助吗？

希望得到答案并提前感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:39:53.313

当您处理流量时，只有一件事有效[缓存，缓存和更多缓存......](http://www.stevesouders.com/blog/2012/03/22/cache-them-if-you-can/)

您需要从本质上考虑一个假想的规模，一端是用户机器，另一端是服务器硬盘。因此，找出将您的数据移动到尽可能接近用户端的技术。您访问服务器磁盘的次数越少，您的网站就会越快、响应速度越快。这包括技术，如 -

1.  客户端数据存储。
2.  服务器端缓存
3.  服务器端[网络加速器](http://en.wikipedia.org/wiki/Web_accelerator)
4.  正确索引您的数据，以便快速检索数据。

我可以提供更具体的工具等，但您可以在网上轻松找到这些工具（阅读`memcached`等），我强调了总体思路......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:37:24.397

一般来说，让应用程序更快就是找到瓶颈——尝试分析你的脚本以查看哪些部分运行缓慢，然后优化它们。在不同点进行测量 - 数据库查询、程序模块、Web 服务器请求。不要忘记使用不同的负载配置文件（并发请求数/秒，用户总数等）来分析您的应用程序

典型的优化是：

*   用于`EXPLAIN`您的 SQL 查询以查看索引是否正确使用。
*   尽可能限制从数据库返回的结果（使用更多 WHERE 条件或 LIMIT 语句）
*   如果可能，缓存一些结果。
*   横向扩展：使用多台服务器和一个负载均衡器，使用 Replicated Mysql 服务器。

无论性能问题如何，使用 PDO 或 mysqli 代替已弃用的 mysql 模块都是一个好主意。

如果您真的想立即“完成”返回，您可以查看[Gearman](http://gearman.org/) - 它允许您在后台处理 SQL。但是，您需要监控工作负载 - 如果查询队列过多，则 SELECT 结果将不再反映当前游戏状态。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T09:59:27.480

鉴于 MySQL 查询的数量，我会考虑将它们组合起来。例如，对于多个`INSERT`s，然后可以在同一个连接中运行，或者您是否为它们中的每一个发出不同的语句（锁定和解锁数据库）？

此外，查询是否对时间敏感？或者可以将结果发送到客户端，然后将查询放入作业队列以供稍后处理？

除此之外，我只能建议已经建议的内容：分析您的代码，缓存您可以的地方等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T09:44:35.543

除了到目前为止您获得的出色建议之外，不要忘记[PHP 加速器](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)。它们确实可以加快执行时间。

此外，11 个查询并不多，但如果 MySQL 为每个查询花时间在查询执行计划中，那么它真的可以加起来。因此，如果准备好的语句是可能的，那么值得考虑。

# windows - TPageControl 获取索引

> ID：14275015
> 
> 赞同：2
> 
> 时间：2013-01-11T09:22:57.167
> 
> 标签：windows, delphi, delphi-xe2, tpagecontrol

如何获取有对象的页面编号？例如：第一页有Button1，第二页有Button2，请问有Button1而没有ActivePageIndex，如何获取页面编号？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:48:28.957

想要找到一个特定类的最近的父类是很常见的。因此，创建一个功能来做到这一点是有好处的。

```
function GetParentWithClass(Control: TControl; 
  ClassType: TWinControlClass): TWinControl;
begin
  Result := Control.Parent;
  while Assigned(Result) and not (Result is ClassType) do
    Result := Result.Parent;
end; 
```

一旦你有了这个，你就可以用它来解决你当前的问题。

```
var
  PageIndex: Integer;
  TabSheet: TTabSheet;
.....
TabSheet := GetParentWithClass(Control, TTabSheet) as TTabSheet;
PageIndex := TabSheet.PageIndex; 
```

将这样的问题分开后，您可以`GetParentWithClass`在其他设置中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:48:10.820

我喜欢`Generics`用以避免重复

```
PageIndex := TComponentUtil.GetParent<TTabSheet>( MyControl ).PageIndex; 
```

有这样的课

```
unit ComponentUtils;

interface

uses
  Classes, Controls;

type
  TComponentUtil = class abstract
    class function GetOwner<T : TComponent>( AComponent : TComponent ) : T;
    class function GetParent<T : TWinControl>( AControl : TControl ) : T;
  end;

implementation

{ TComponentUtil }

class function TComponentUtil.GetOwner<T>( AComponent : TComponent ) : T;
var
  LOwner : TComponent;
begin
  LOwner := AComponent.Owner;

  while Assigned( LOwner ) and not ( LOwner is T ) do
    LOwner := LOwner.Owner;

  Result := T( LOwner );
end;

class function TComponentUtil.GetParent<T>( AControl : TControl ) : T;
var
  LParent : TWinControl;
begin
  LParent := AControl.Parent;

  while Assigned( LParent ) and not ( LParent is T ) do
    LParent := LParent.Parent;

  Result := T( LParent );
end;

end. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:28:41.040

```
Function GetPageIndexOfControl(c:TControl):Integer;
begin
   Result := -1;
   While Assigned(c.Parent) and not (c is TTabsheet) do c := c.Parent;
   if Assigned(c) then
     if c is TTabsheet then
       Result := TTabsheet(c).PageIndex;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 Showmessage(IntToStr(GetPageIndexOfControl(Button1)));    
end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T09:28:59.743

尝试这个：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  if Button1.Parent is TTabSheet then
    ShowMessage(IntToStr(TTabSheet(Button1.Parent).PageIndex));
end; 
```

如果按钮直接位于选项卡表中（没有面板或其他控件），则它可以工作。如果您有面板，则可以遍历父链以查看父链是否为 TTabSheet：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Ctrl: TWinControl;
begin
  Ctrl := Button1.Parent;
  while Assigned(Ctrl) do
  begin
    if Ctrl is TTabSheet then
    begin
      ShowMessage(IntToStr(TTabSheet(Ctrl).PageIndex));
      Break;
    end
    else
      Ctrl := Ctrl.Parent;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T09:49:39.657

至于这里显示的添加没有被问到，我将添加另一个答案

```
Function GetPageIndexOfControl(c:TControl;var PageControl:TPageControl):Integer;
begin
   Result := -1;
   While Assigned(c.Parent) and not (c is TTabsheet) do c := c.Parent;
   if Assigned(c) then
     if c is TTabsheet then
       begin
         Result := TTabsheet(c).PageIndex;
         PageControl := TTabsheet(c).PageControl;
       end;
end;
procedure TForm1.Button1Click(Sender: TObject);
var
  pc:TPageControl;
  i:Integer;
begin
 I := GetPageIndexOfControl(Button1,PC);
 if (i>-1) and Assigned(PC) then
    begin
      PC.ActivePageIndex := i;
      if Assigned(PC.OnChange) then PC.OnChange(PC);
    end;
end; 
```

# jqgrid - jqgrid。折叠时隐藏子网格？

> ID：14275016
> 
> 赞同：1
> 
> 时间：2013-01-11T09:22:57.273
> 
> 标签：jqgrid, jqgrid-asp.net, subgrid

我有一个带有允许子网格的网格的页面。我希望用户能够在一个子网格中输入数据，折叠它，然后在另一个子网格中输入数据，等等......输入的数据应该通过一次调用保存到服务器（或丢弃）。然而，似乎在折叠子网格时它会从 DOM 中消失。有没有一种简单的方法来隐藏它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:34:59.577

您的问题的确切解决方案可能取决于您当前实施的细节。例如，为什么您可以使用[subGridRowColapsed](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid#events)回调或事件在网格折叠*之前*`jqGridSubGridRowColapsed`保存编辑行/单元格。[subGridOptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid#properties)的另一个选项也可能会有所帮助。它通知 jqGrid 您更喜欢隐藏折叠的子网格而不是删除它。*`reloadOnExpand: false`*

# cakephp-2.1 - 在 Cakephp 中查找关注者和关注者计数

> ID：14275018
> 
> 赞同：0
> 
> 时间：2013-01-11T09:23:10.607
> 
> 标签：cakephp-2.1, cakephp-model

在我的用户模型中，我有字段`follower_count`和`following_count`.

对于追随者和追随者，我的用户中有 HABTM 关联，​​定义如下：

```
public $hasAndBelongsToMany=array(
    'Following'=>array(
        'className'=>'User',
        'joinTable'=>'user_correlations',
        'foreignKey'=>'correlated_id',
        'associationForeignKey'=>'user_id',
        'fields'=>'id,first_name,last_name,photo_dir,photo',
        'order'=>'Rand()'
    ),
    'Followers'=>array(
        'className'=>'User',
        'joinTable'=>'user_correlations',
        'foreignKey'=>'user_id',
        'associationForeignKey'=>'correlated_id',
        'fields'=>'id,first_name,last_name,photo_dir,photo',
        'order'=>'Rand()'
    )
); 
```

在这种情况下，我怎样才能找到关注者数量和关注者数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:26:35.650

使用 Neil Crookes 的 HABTM 计数器缓存插件：[https ://github.com/neilcrookes/CakePHP-HABTM-Counter-Cache-Plugin](https://github.com/neilcrookes/CakePHP-HABTM-Counter-Cache-Plugin)

它绝对适用于不同模型之间的 HABTM 关系。我不确定它是否会因为用户模型位于关系的双方而感到困惑，但值得一试，即使它不起作用，这对你来说也是一个很好的起点的盒子。

# zend-framework - Zend_Form 仅在某些元素上带有 HtmlTag 装饰器

> ID：14275020
> 
> 赞同：0
> 
> 时间：2013-01-11T09:23:13.950
> 
> 标签：zend-framework, zend-form

我的整个表单上有 Zend_Form_Decorator_HtmlTag。我想得到的是这样的：

```
<div class="form-elements">
    <div>
        <label>blah</label>
        <input type="text" />
    </div>

    <div>
        <label>blah 2</label>
        <input type="checkbox" />
    </div>
</div>

<div class="form-buttons">
    <input type="submit" />
</div> 
```

如何仅获取 HtmlTag（此处输入）中的某些元素，以及其他元素标签中的其他元素？我现在有很多表单，所以如果可以只修改我的基本表单类，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:59:13.940

将此方法添加到您的基本表单类：

```
public function loadDefaultDecorators()
{
    $elementsToGroup = array();
    foreach ($this->getElements() as $element) {
        if ($element->getType() != 'Zend_Form_Element_Submit') {
            $elementsToGroup[] = $element;
        }
    }
    if ($elementsToGroup) {
        $this->addDisplayGroup($elementsToGroup, 'form-elements', array(
            'order' => 0,
            'decorators' => array(
                'FormElements',
                array('HtmlTag', array('tag'=>'div', 'class' => 'form-elements'))
            )
        ));
    }

    parent::loadDefaultDecorators();
} 
```

它循环遍历所有表单元素，并将任何不是按钮的内容添加到显示组，然后使用覆盖默认字段集的“div”装饰器将其添加到表单中。'order' 参数确保元素将保留在表单的开头。

您可以使用按钮本身上的普通 HtmlTag 装饰器来处理按钮周围的 div。

是否可以仅使用 CSS 而不是使用 CSS 来实现您想要的效果可能值得一看，因为如果您想按照预期使用显示组，这种方法可能会在将来给您带来一些问题。

# asp.net - 使用javascript更改文本框值时更改标签值

> ID：14275027
> 
> 赞同：0
> 
> 时间：2013-01-11T09:23:52.790
> 
> 标签：asp.net, javascript-events

当我的文本框值更改时如何更改我的标签值。这是我的代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="GoogleMap.aspx.cs" Inherits="_Default" %> 
```

谷歌地图var map，directionsService，directionsDisplay，geocoder，startLatlng，endLatlng，routeStart，routeEnd，startMarker，endMarker，dragTimer，placeService，airportMarkers = []；

```
function initialize() {
     var latlng = new google.maps.LatLng(0,0);
     routeStart = document.getElementById('routeStart');
     autocomplete = new google.maps.places.Autocomplete(routeStart);
     routeEnd = document.getElementById('routeEnd');
     autocomplete = new google.maps.places.Autocomplete(routeEnd);
     geocoder = new google.maps.Geocoder();
     directionsService = new google.maps.DirectionsService();
     directionsDisplay = new google.maps.DirectionsRenderer({
         suppressMarkers: true
     });
    var myOptions = {
         zoom: 12,
         center: latlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP,
         mapTypeControl: false
     };
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
      directionsDisplay.setMap(map);
      directionsDisplay.setPanel(document.getElementById("directionsPanel"));
      placeService = new google.maps.places.PlacesService(map);

      var form = document.getElementById("routeForm");
      form.addEventListener('submit', function(e) {
         e.preventDefault();
         var start = this.elements["routeStart"].value;
         var end = this.elements["routeEnd"].value;

         if (start.length && end.length) {
             calcRoute(start, end);
         }
     });

      google.maps.event.addListenerOnce(directionsDisplay, 'directions_changed',     function() {
        var directions = this.getDirections();
        var overview_path = directions.routes[0].overview_path;
        var startingPoint = overview_path[0];
        var destination = overview_path[overview_path.length - 1];
        addMarker(startingPoint, 'start');
        addMarker(destination, 'end');
     });
 }

function addMarker(position, type) 
{
    var marker = new google.maps.Marker({
        position: position,
        draggable: true,
        animation: google.maps.Animation.DROP,
        map: map
     });

     marker.type = type;

     google.maps.event.addListener(marker, 'drag', function() {
        var marker = this;
        clearTimeout(dragTimer);
         // only update the location if 250ms has passed since last drag
         dragTimer = setTimeout(function() {
             getLocationName(marker.getPosition(), function(name) {
                if (marker.type === 'start') {
                     routeStart.value = name;
                 } else {
                    routeEnd.value = name;
                }
            });
       }, 250);
    });

    google.maps.event.addListener(marker, 'dragend', function() {
        calcRoute(startMarker.getPosition(), endMarker.getPosition());
    });

     if (type === 'start') {
        startMarker = marker;
     } else {
         endMarker = marker;
    }
}

 function displayAirports() {
     placeService.textSearch({
     location: startMarker.getPosition(),
     query: 'airport near, ' + routeEnd.value,
     radius: '100',
     types: ['airport']
      }, function(airports, status) {
         if (status === google.maps.places.PlacesServiceStatus.OK) {
             for (var a in airports) {
                 airportMarkers.push(new google.maps.Marker({
                    position: airports[a].geometry.location,
                    map: map
                }));
            }
        }
    });
}

  function getLocationName(latlng, callback) {
    geocoder.geocode({
         location: latlng
     }, function(result, status) {
        if (status === google.maps.GeocoderStatus.OK) {
            var i = -1,
                locationName = 'Not Found';

             // find the array index of the last object with the locality type
             for (var c = 0; c < result.length; c++) {
                 for (var t = 0; t < result[c].types.length; t++) {
                    if (result[c].types[t].search('locality') > -1) {
                       i = c;
                    }
                }
            }
            if (i > -1) {
                 locationName = result[i].address_components[0].long_name;
            }
             callback(locationName);
        }
    });
}

 function calcRoute(start, end) {
    var request = {
         origin: start,
         destination: end,
         travelMode: google.maps.DirectionsTravelMode.DRIVING
     };
     directionsService.route(request, function(response, status) {
         if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            displayAirports();
        }
     });
 }
 function GetVal(textBoxValue) {
      document.getElementById('<%=Value1.ClientID %>').innerHTML = textBoxValue;

 }
 function GetVal2(textBoxValue) {
      document.getElementById('<%=Value2.ClientID %>').innerHTML = textBoxValue;
 }
</script>
 </head>
   <body onload="initialize()">
        <form id="routeForm" runat="server">
        Start &nbsp;<asp:TextBox ID="routeStart" runat="server"   onchange="GetVal(this.value)" />&nbsp;<asp:RequiredFieldValidator
            ID="RequiredFieldValidator1" runat="server" ControlToValidate="routeStart" 
            ErrorMessage="Enter origin city" ForeColor="Red">* Enter origin   city</asp:RequiredFieldValidator>
         &nbsp;
 End<asp:TextBox ID="routeEnd" runat="server" onchange="GetVal2(this.value);"  />&nbsp;<asp:RequiredFieldValidator ID="RequiredFieldValidator3"
        runat="server" ControlToValidate="routeEnd" 
             ErrorMessage="Enter destination city" ForeColor="Red">* Enter destination city</asp:RequiredFieldValidator>
       &nbsp;<asp:Button ID="submit" runat="server" Text="Find Route" />
       <br />
        <asp:Label ID="Value1" runat="server"/>&nbsp;&nbsp;
        <asp:Label ID="Value2" runat="server"/>
        </form>
        <div class="clear">
             <div id="directionsPanel" style="float: right; width: 20%; height: 533px">
             </div>
          </div>
         <div id="map_canvas" style="float: left; width: 80%; height: 700px;">
        </div>
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:32:39.093

通过简单地连接到文本框的 on textchanged 事件并在后面的代码中分配标签的值，这将使您的生活变得更加轻松。

**标记**

```
 <asp:TextBox ID="routeStart" runat="server" OnTextChanged="routeStart_textChanged"    AutoPostBack="True" /> 
```

**代码背后**

**VB**

```
 Protected Sub routeStart_textChanged(sender As Object, e As EventArgs)

  Label1.Text="New Value"

  End Sub 
```

**C＃**

```
 protected void routeStart_textChanged(object sender, EventArgs e)
    {
Label1.Text = "New Value";

    } 
```

如果它是使用 java 脚本的唯一要求，那么我假设在您的页面某处您有这一行

```
 routeStart.Attributes.Add("OnChange", "GetVal('" + routeStart.Text + "' );"); 
```

您不需要标记中的 onchange 属性。尽管这也有效，但它会让 Visual Studio 不高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:40:25.060

`onchange`当您离开文本框时（例如，当文本框失去焦点时），该事件会触发。因此，您在键入时不会看到更改。

要确保在您键入时调用您的函数，请改用`onkeyup`event

```
<asp:TextBox ID="routeStart" runat="server" onkeyup="GetVal(this.value)" /> 
```

# jquery-mobile - JScript 运行时错误：$.datepicker 为空或不是 _JqueryGlobalSettings 中的对象

> ID：14275028
> 
> 赞同：0
> 
> 时间：2013-01-11T09:23:53.797
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在将我的 mvc4 应用程序转换为对移动设备友好的应用程序。导航到某个页面时，我在 _JqueryGlobalSettings.mobile.cshtml 中收到 $.datepicker 为 null 或不是对象错误。在桌面版本中，我没有收到此错误。请帮忙。

```
$.datepicker.setDefaults({
        dateFormat: "m/d/yy",
        changeMonth: true, changeYear: true,
        showStatus: true,
        showWeeks: true,
        highlightWeek: true,
        numberOfMonths: 1,
        showAnim: "scale",
        showOptions: {
            origin: ["top", "left"]
                      }

    }); 
```

我的 _layout.mobile.cshtml 如下

```
<head>
<link href="@Url.Content("~/Content/Mobile/Site.Mobile.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/custom-theme/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Icons/icons.css")" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:52:48.077

尝试使用这个 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js

# javascript - 如何呈现脚本标签内的html

> ID：14275031
> 
> 赞同：0
> 
> 时间：2013-01-11T09:24:06.950
> 
> 标签：javascript, jquery, html

嗨，我有一些 html 内容在我想在浏览器中运行代码时呈现此 html 的标记内。代码如下。

```
<script>
<div class="wrapper">
  <header class="clearfix">
    <div class="container"> <a id="logo" href="index.html">Login</a>
      <ul class="social-icons">
        <li><a href="#" class="icon flip">Sign Up |</a></li>
        <li><a href="" class="icon">Forget Password</a></li>
      </ul>
    </div>
  </header>
  <section>
    <article class="clearfix" >
      <aside role="complementary" class="shadow">
          <div id="error"></div>
          <form class="c-form" name="login" id="login">
          <input type="text" id="user-name" name="email" value="User Name">
          <input type="text" id="password" name="password" value="Password">

          <input type="submit" class="button green" value="Sign Up">
        </form>
      </aside>
    </article>
  </section>

</div>
</script> 
```

请帮助提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:30:26.847

只需给脚本标签一个 id，选择该标签并附加其 html 内容。见这里[http://jsfiddle.net/rohhittt/zwMNr/](http://jsfiddle.net/rohhittt/zwMNr/)

```
$(document).ready(function(){
   $('body').append($("#scriptId").html());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:34:51.473

将完整的 HTML 作为字符串分配给 Javascript 变量，并将该变量放在您想要放置此片段的位置

var htmlcode =*您的模板 HTML 代码*

$("#testDiv").html(htmlcode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:37:15.527

我有点晚了，但无论如何这个想法和我的前任所说的一样。将 ID 参数添加到脚本标记并将类型设置为 text/html 而不仅仅是像这样将脚本中的内容“注入”到 DOM（帮助自己使用 jQuery）：

```
<span>Some text</span>  
<div id="injectionArea">
</div>

<script id="scriptContainer" type="text/html">
  <div>SOME CONTENT INSIDE SCRIPT</div>
</script>

$('#injectionArea').html($('#scriptContainer').html()); 
```

小提琴中的示例[http://jsfiddle.net/ypcjG/2/](http://jsfiddle.net/ypcjG/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:47:47.810

我这样做：

1.  在 html 文档的末尾添加模板代码
2.  使用 jquery 获取它并删除 id-tag
3.  将其插入您需要的地方

第1步：

```
<body>
    <div id="templateContainer" style="display:none;">
        <div id="templateForYou"><h1>Test</h1></div>
    </div>
</body> 
```

第2步：

```
//step 2
var template = $('#templateForYou').clone().removeAttr('id');
// step3
$('#someWhereElse').append(template); 
```

# android - 如何将我的语音识别应用程序启动器图标放在 Android 的呼叫拨号器中

> ID：14275036
> 
> 赞同：-1
> 
> 时间：2013-01-11T09:24:30.090
> 
> 标签：android, speech-recognition, phone-call, launcher, speech

我开发了一个语音识别安卓应用程序。我希望将它的启动器图标放在呼叫拨号器上，以便用户可以启动它并且应用程序将记录呼叫对话以进行分析。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:32:29.383

关于放置图标：启动器/主页应用程序只能执行此操作，并且您无法从您的程序中告诉它执行此操作。

关于提供您的应用程序作为拨号器应用程序的替代品：进行一项意味着：

```
<intent-filter>
        <action android:name="android.intent.action.DIAL" />
</intent-filter> 
```

在清单文件中。

# php - 无法通过 $_POST 传递包含带有参数的 url 的内容

> ID：14275042
> 
> 赞同：0
> 
> 时间：2013-01-11T09:24:55.050
> 
> 标签：php, url, post

这真的很奇怪。我在表单中有一个文本框。单击提交按钮后，文本框的内容将发布到 page2.php

如果文本框包含类似的文本

```
This is a sample url 
https://maps.google.com/maps?q=karnataka+badminton+association+bangalore&ie=UTF-8&ei=w4_lUNWmJozjrAfSkYGYBA&ved=0CAsQ_AUoAA 
```

现在，当我点击提交时，我正在回显 page2.php 中的内容，这就是我得到的：

```
//echo $_POST['message'];

This is a sample url 
https://maps.google.com/maps?q=karnataka 
```

我收到了消息，但 URL 在第一个“+”之后被截断。任何想法如何获得这项工作？

我什至用萤火虫检查了 POST 请求，并在那里正确显示了完整的 url。

新编辑：我现在正在尝试使用 ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:37:21.387

您应该首先对 url 进行编码。您可以使用嵌入在 javascript 中的 encodeURIComponent(str) 或 encodeURI(str) 来执行此操作。请参阅： [在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

然后，您应该使用 urldecode/rawurldecode 将 url 解码为其本机形式。您还可以根据需要存储解码后的表单并在 php/javascript 中解码 url。见： http: [//php.net/manual/en/function.rawurlencode.php](http://php.net/manual/en/function.rawurlencode.php)

# android - 无法从自定义 AlertDialog 中的 EditText 获取字符串

> ID：14275051
> 
> 赞同：0
> 
> 时间：2013-01-11T09:25:19.440
> 
> 标签：android, android-edittext

我在从自定义 AlertDialog 获取文本方面陷入僵局。我收到错误“NullPointerException”。我已经在 AlertDialog 中定义了包含 EditText 的变量，但我得到了同样的错误。

我的布局项目是 XML“pin.xml”

```
<EditText
    android:id="@+id/insert_pin"
    android:layout_width="90dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:ems="10"
    android:gravity="center"
    android:inputType="numberPassword"
    android:maxLength="4" /> 
```

警报对话框

```
 new AlertDialog.Builder(this)
        .setView(inflater.inflate(R.layout.pin, null))
        .setTitle("Save PIN")
        .setPositiveButton("Save", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                pin = (EditText) findViewById(R.id.insert_pin);
                //here I get the Error. Apparently, it can't get the value
                input = pin.getText().toString();

                dialog.cancel();
                go();
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                dialog.cancel();
                finish();
            }
        })
        .show(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:26:44.890

您必须更改代码，因为您使用 findViewById() 找到 EditText Field 对象，但您应该 findViewById() 相对于对话框视图。

更改您的代码如下：

```
View v = inflater.inflate(R.layout.pin, null);

new AlertDialog.Builder(this)
        .setView(v)
        .setTitle("Save PIN")
        .setPositiveButton("Save", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                pin = (EditText)v.findViewById(R.id.insert_pin);
                //here I get the Error. Apparently, it can't get the value
                input = pin.getText().toString();

                dialog.cancel();
                go();
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id){
                dialog.cancel();
                finish();
            }
        })
        .show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:26:38.493

采用

```
pin = (EditText)v.findViewById(R.id.insert_pin);
input = pin.getText().toString(); 
```

要从 insert_pin 获取文本，`EditText`您需要使用对话框上下文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:29:13.983

像这样写你的代码

```
 AlertDialog alert=new AlertDialog.Builder(this);

    alert.setView(inflater.inflate(R.layout.pin, null));
    alert.setTitle("Save PIN");

    alert.setPositiveButton("Save", new DialogInterface.OnClickListener(){
        public void onClick(DialogInterface dialog, int id){
            pin = (EditText)alert.findViewById(R.id.insert_pin);
            //error will be solved
            input = pin.getText().toString();

            dialog.cancel();
            go();
        }
    });
    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
        public void onClick(DialogInterface dialog, int id){
            dialog.cancel();
            finish();
        }
    });
    alert.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:36:24.377

用这个：

```
pin = (EditText)dialog.findViewById(R.id.insert_pin);
input = pin.getText().toString(); 
```

# android - Android：删除 LocationListener

> ID：14275053
> 
> 赞同：2
> 
> 时间：2013-01-11T09:25:26.160
> 
> 标签：android, gps

我有以下代码使用 GPS 获取用户位置。（代码工作正常）
但我的问题是当我关闭程序时（按返回按​​钮）它会生成错误消息
**应用程序......已停止工作...... .....请再试一次。** .
我认为我必须删除侦听器，因为我在**onDestroy()中使用****了 removeUpdates()**方法，然后也会生成相同的错误消息。 我该如何解决它。 我的代码：

 **```
public class Location_AddressActivity extends Activity {

    /** Called when the activity is first created. */
    TextView txt_logitude;
    TextView txt_latitude;
    TextView txt_address;
    LocationListener mlocListener;
    LocationManager mlocManager;
    Geocoder geocoder;

    public void onCreate(Bundle savedInstanceState) {       

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        txt_logitude=(TextView)findViewById(R.id.txt_logitude);
        txt_latitude=(TextView)findViewById(R.id.txt_latitude);
        txt_address=(TextView)findViewById(R.id.txt_address);
        geocoder = new Geocoder(this, Locale.ENGLISH);
        txt_latitude.setText("");
        txt_logitude.setText("");
        txt_address.setText("");
        mlocManager= (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        mlocListener = new MyLocationListener();
        mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    }
    public  void onDestroy()
    {
        mlocManager.removeUpdates(mlocListener);
    }
    class MyLocationListener implements LocationListener
    {
        public void onLocationChanged(Location location) {
            double latitude=location.getLatitude();
            double longitude=location.getLongitude();
            txt_latitude.setText(new Double(latitude).toString());
            txt_logitude.setText(new Double(longitude).toString());
            try {
                List<Address> addresses = geocoder.getFromLocation(latitude, longitude, 1);              
                if(addresses != null) {
                    Address returnedAddress = addresses.get(0);
                    StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
                    for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                        strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                    }
                    txt_address.setText(strReturnedAddress.toString());
                }
                else{
                    txt_address.setText("No Address returned!");
                }
            } 
            catch (IOException e) {
                e.printStackTrace();
                txt_address.setText(e.getMessage());
            }
        }
        public void onProviderDisabled(String provider) {
            txt_address.setText("GPS Disable");
        }
        public void onProviderEnabled(String provider) {
            txt_address.setText("GPS Enable");      
        }           
    }   
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T09:29:37.327

`super.onDestroy`您已在“您`onDestroy()`的活动”中删除了对的调用。只需如下更改该代码并尝试一下。

```
public  void onDestroy()
    {
        super.onDestroy();
        mlocManager.removeUpdates(mlocListener);
    } 
```

我希望 removeUpdates() 不会给您带来任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:33:49.003

```
location.removeUpdates(your listener); 
```

这是删除位置监听器的正确方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T09:44:49.317

我想当您通过实现 LocationListener 类来自定义位置侦听器时，您应该创建 MyLocationListener 的实例，在这里您正在注册 Super 类并且您也在自定义它。这没有意义。

尝试 onCreate 上方的 MyLocationListener mLocationListener 并将该对象用于请求和删除更新。**

# c# - 回发后jQuery更改类名

> ID：14275060
> 
> 赞同：0
> 
> 时间：2013-01-11T09:25:50.630
> 
> 标签：c#, jquery, file-upload, postback

我在一页中有 2 个上传按钮。当我点击上传按钮，选择文件并上传时，它显示在一个表格中，如以下html代码：

```
<div id="MainContents">         
<p>                
    <input type="hidden" id="89a11bfc-bb33-48f4-a5b4-1e062e8347c0">
    <button>Upload files</button>
    <table cellspacing="1" cellpadding="2" class="UploadedTable">
        <tbody>
            <tr class="Change_me_Row">
                <td />
                <td />
            </tr>
        </tbody>
    </table>
</p>          
</div>
<div id="MainContents">         
    <p>                
        <input type="hidden" id="53a2a220-4c76-46db-bafa-585c7f0c456b">
        <button>Upload files</button>
        <table cellspacing="1" cellpadding="2" class="UploadedTable">
            <tbody>
                <tr class="Change_me_Row">
                    <td />
                    <td />
                </tr>
            </tbody>
        </table>
    </p>          
</div> 
```

我的尝试是我想为每个上传按钮更改具有唯一名称的 tr 类名称。我有这个上传按钮的 OnPostback 事件，我尝试了类似的东西：

```
$(this).find("tr").removeClass("Change_me_Row").addClass("New_Class_Name"); 
```

或者

```
$(this).closest("tr").toggleClass("Change_me_Row New_Class_Name"); 
```

但他们都没有工作！

我希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:32:30.017

尝试去找父母，然后在它的孩子中找到班级：

```
$(this).parent().children('Change_me_Row').toggleClass('Change_me_Row New_Class_Name'); 
```

此外，请确保您的回调函数的上下文是正确的（`this`指向上传按钮）。

# android - How to access my current location via GPS in android in indoor?

> ID：14275061
> 
> 赞同：1
> 
> 时间：2013-01-11T09:25:52.303
> 
> 标签：android, gps

I cannot access current location via GPS in indoor in my application in android because the GPS signal is weak in indoor. But Google map in android access the current location very fine using GPS in indoor. What should I do inorder to access my current location using GPS in android in indoor ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:51:57.010

GPS在室内通常很糟糕，所以你不能依赖它。尝试通过 wifi 位置获取位置。这可能非常准确

你这样做

locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

看看[这个指南](http://developer.android.com/guide/topics/location/strategies.html)

# regex - 子字符串不应以单词开头

> ID：14275065
> 
> 赞同：1
> 
> 时间：2013-01-11T09:26:07.223
> 
> 标签：regex

我正在使用 a从 css 文件`RegEx`中提取所有内容。 我只是使用如下的正则表达式： `background-images`

```
/url\s?+\("?([^\)\"]+)?"?\)/ 
```

匹配类似的东西`url ("images/bg.jpg")`。
现在我想忽略具有绝对 URL 的背景图像。所以我想检查是否已经开始`http`或`https`忽略它。

但不知道如何编辑`RegEx`，我正在使用`PHP`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:30:52.530

使用否定`(?!http)`前瞻断言以下字符不是“http”：

```
/url\s*\("?(?!http)([^\)\"]+)?"?\)/ 
```

# css - SCSS Extending one class with another

> ID：14275069
> 
> 赞同：0
> 
> 时间：2013-01-11T09:26:43.360
> 
> 标签：css, sass

I have this code

```
input {
     border:1px solid black;
     color:#FFF;
} 
```

and this one

```
.input {
     padding:0px 5px 0px 3px;
 } 
```

how in result in SASS/SCSS to get

```
input.input 
```

to apply .input class for input tag (without spaces between!)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:29:30.660

在 scss 中使用它

```
input {
     border:1px solid black;
     color:#FFF;
    &.input {
         padding:0px 5px 0px 3px;
     }

} 
```

会变成css

```
input {
     border:1px solid black;
     color:#FFF;
}
input.input{
    padding:0px 5px 0px 3px;
} 
```

# url - cakephp: how to add language folder to url?

> ID：14275073
> 
> 赞同：0
> 
> 时间：2013-01-11T09:26:54.953
> 
> 标签：url, cakephp, seo

I am having a project in 5 languages and I am switching languages by p28n Controller which works perfect! But now, the SEO guys want to have the urls like:

```
www.projekt.com/en for english
www.projekt.com/es for spanish
www.projekt.com/fr for french 
```

I am a little bit lost now and don't know who to achieve this? I this a question for the htaccess file? Or do I have to deal with it in Cake?

Please help me out where to start!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:50:47.037

[这个](https://github.com/CakeDC/i18n)插件应该可以帮助您获得所需的网址。

# sql - Table cleanup, finding duplicate posts in time span

> ID：14275074
> 
> 赞同：3
> 
> 时间：2013-01-11T09:27:00.757
> 
> 标签：sql, oracle, plsql

I have a structure like this in a few tables: id, [...], validfrom, validto.

The `id` is a NUMBER, and the `validfrom` and `validto` columns are of type DATE. **Any given date should not result in more than one post per `id`.**

So this is a correct example:

```
id, validfrom, validto
1, 2000-01-01, 2000-02-20
1, 2000-02-21, 2000-03-02
1, 2000-03-03, 2099-12-31 
```

However, there seem to be some issues where a certain dates would return more than one value. Something like this (which is corrupt data):

```
id, validfrom, validto
1, 2001-01-01, 2001-02-20
1, 2001-01-15, 2001-03-02
1, 2001-03-03, 2099-12-31 
```

So in the above example, any date between 2001-01-15 and 2001-02-20 would return two rows.

**How would I construct a script that finds all thees corrupt posts?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:32:04.057

只是为了找到它们，假设在每一行中 validfrom 都小于 validto ：

```
select a.*, b.*
from your_table a
join your_table b
on (a.id = b.id and
    --overlapping
    greatest(a.validfrom, b.validfrom) <= least(a.validto, b.validto) and
    --exclude join the same row.
    a.rowid <> b.rowid
    ) 
```

这只是找到相交的区间，因为不同的区间的 valid_from 大于另一个的 valid_to。

`UPDATE`：我`not (a.validto=b.validto and a.validfrom=b.validfrom)` 用

```
a.rowid<> b.rowid 
```

因为它现在会报告重复的行。（感谢沃尔夫）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:03:18.067

寻找重叠的时间跨度是一场噩梦。很容易出错，而且我知道没有简单而好的解决方案。从理论上讲，Oracle 已经使用一种数据类型解决了这个问题，该数据类型`WM_PERIOD`可能会或可能不会在您的数据库中安装/可用。但这也不是美女：

```
SELECT *
  FROM your_table a JOIN your_table b USING (id) 
 WHERE a.rowid < b.rowid
   AND wm_overlaps(wm_period(a.validfrom, a.validto), 
                   wm_period(b.validfrom, b.validto))=1;

1 2001-01-01 2001-02-20 2001-01-15 2001-03-02 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:51:10.677

这将寻找重叠的行和重复的行：

```
select  *
from    YourTable yt1
where   -- Overlapping rows exist
        exists
        (
        select  *
        from    YourTable yt2
        where   yt1.id = yt2.id
                -- Rows overlap
                and yt1.validfrom <= yt2.validto
                and yt2.validfrom <= yt1.validto
                -- Rows must be distinct
                and yt1.rowid <> yt2.rowid
        ) 
```

# objective-c - Memory issue in JMImageCache

> ID：14275075
> 
> 赞同：0
> 
> 时间：2013-01-11T09:27:03.767
> 
> 标签：objective-c, ipad, memory-leaks

I have implemented [JMImageCache](https://github.com/jakemarsh/JMImageCache) for downlaoding images.Its classes have arc enable.

I am downloading images from url and displaying 6 images at a time in a view and on click next button another 6 images are loading in the same view(replacing previous one).

My problem is that on every click of next and previous my memory is increases by 2 MB. Is there any way to avoid it.

I have tried to manually release the objects but still memory is increasing (lesser compare to arc enable).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:39:28.153

这是由于缓存，以使事情更快。当您收到内存警告时，您需要清除缓存。那就是它。

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

# c# - Dynamically composing LINQ expressions

> ID：14275079
> 
> 赞同：0
> 
> 时间：2013-01-11T09:27:24.273
> 
> 标签：c#, linq, linq-to-nhibernate

Is it possible to combine dynamically expressions:

```
from c in collection where c.Property == true select c 
```

with expression

```
from result in results 
group result by result.Property 
into g 
select new g.Key 
```

where 'results' should be the collection returned from first expression ?

I am going to use composed expression to fetch the data from db using NHibernate, so I would like the combined expression to be equal to if I would write it as

```
from c in collection 
where c.Property == true
group c by c.Property
into g
select new g.Key 
```

The expressions are defined in the class:

```
public class MyClass : MyAbstractClass<User>
{
    public MyClass()
    {
        FirstExpression = users => from user in users where ... select user;              

        SecondExpression = results => from result in results
                       group result by result.Property into g
                       select g.Key

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:30:05.157

```
var query = collection;

if (condition)
    query = query.Where(c => c.Property);

var result = query.GroupBy(c => c.Property).Select(g => g.Key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:29:33.080

是的，这是可能的。只需将第一个查询的结果分配给`results`变量而不枚举它：

```
var results = from c in collection where c.Property == true select c;

from result in results 
group result by result.Property 
into g 
select g.Key; 
```

顺便说一句，您的第二个查询很简单`distinct`：

```
results.Distinct(r => r.Property); 
```

# perl - Perl - Why does looping over a hash by its keys and then printing each value result in a uninitialized warning?

> ID：14275084
> 
> 赞同：7
> 
> 时间：2013-01-11T09:27:44.487
> 
> 标签：perl, hash, foreach

Whenever I loop over a hash by its keys, and then printing each value, I get an "use of of uninitialized value in concatenation (.) or string..." warning. Even though the hash is clearly initialized up front. The output I want is printed, but I'd still like to know why this results in a warning, especially as accessing a value directly (outside of a loop) works without warnings.

```
#!/usr/bin/perl
use warnings;
use strict;

my %fruit = ();
%fruit = ('Apple' => 'Green', 'Strawberry' => 'Red', 'Mango' => 'Yellow');

#works
print  "An apple is $fruit{Apple} \n";

#gives warnings
foreach my $key (%fruit)
{
  print "The color of $key is $fruit{$key} \n";
}

#also gives warnings
foreach my $key (%fruit)
{
    my $value = $fruit{$key};
    print "$value \n";
} 
```

Consider the above code. I guess perl sees a difference between the first print and the second print. But why? Why is there a difference between retrieving the value of a hash outside of loop and retrieving the value of a has inside of a loop?

Thanks!

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T09:31:57.677

在列表上下文中使用哈希会产生键和值。因此，该行`foreach my $key (%fruit)`遍历键、值、键、值......

你需要的是`foreach my $key (keys %fruit)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:46:54.197

应该是`foreach my $key ( keys %fruits )`。我认为这是你真正想要做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:37:17.933

`keys`在`for`循环内使用。例如`foreach my $key (keys %fruit)`...

# android - DefaultHttpClient 在 HTTP 请求上获取 ssl 异常

> ID：14275092
> 
> 赞同：2
> 
> 时间：2013-01-11T09:27:56.670
> 
> 标签：android, ssl, httprequest

我们的 android 应用程序指的是`HTTP URL`从服务器获取一些数据。直到 2 天前它一直正常工作，但突然我们得到`"sslpeerunverifiedexception: no peer certificate" exception`了，而我们的代码和服务器都没有发生任何变化。代码很简单：

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 12000);
HttpConnectionParams.setSoTimeout(httpParameters, 12000);
HttpClient client = new DefaultHttpClient(httpParameters);
HttpGet request = new HttpGet("http://site.com");
HttpResponse httpResponse = client.execute(request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:34:33.807

在您的代码中添加以下函数。

```
public HttpClient getNewHttpClient() throws SocketException, UnknownHostException {
    try {
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);
        return new DefaultHttpClient(ccm, params);
    } catch (Exception e) {
        return new DefaultHttpClient();
    }
} 
```

并使用下面的代码调用上述函数。

```
HttpClient httpclient = getNewHttpClient(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:16:56.693

听起来您正在访问的服务器正在使用自签名 SSL 证书。

虽然不推荐（可能是 MiM 攻击），但您可以忽略这一点。有关更多信息，请参阅此帖子：[Android 上的自签名 SSL 接受](https://stackoverflow.com/questions/1217141/self-signed-ssl-acceptance-android)

# c++ - 在控制台中创建dll的方法

> ID：14275104
> 
> 赞同：1
> 
> 时间：2013-01-11T09:28:47.110
> 
> 标签：c++, dll, console

C++ 中是否有任何方法可以在**不**使用任何 IDE（例如 Visual Studio）的情况下在控制台中创建 DLL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:31:40.000

是的，但您需要为编译器配置环境。例如，Microsoft 的 Visual Studio 有一个程序快捷方式，`Visual Studio Command Prompt (2010)`例如调用。这将打开一个为编译器配置环境的控制台。然后，您可以使用`cl.exe`and`link.exe`并提供适当的标志。

构建 DLL 的最简单命令行：

> cl.exe /LD main.cpp

运行`cl.exe /?`并`link.exe /?`获取标志列表或在线查看[C/C++ 构建参考](http://msdn.microsoft.com/en-us/library/91621w01(v=vs.80).aspx) 。

# c# - 在 sql server 的 1 列中使用 2 个参数更新多行

> ID：14275105
> 
> 赞同：2
> 
> 时间：2013-01-11T09:28:47.547
> 
> 标签：c#, sql-server

我在更新记录时遇到问题。我想用两个参数一键单击更新 1 列中的 2 条记录。这是代码：

```
private void Button_Click(object sender, EventArgs e)
    {
        int use = Convert.ToInt32(textBox1.Text);

        perintahsql = new SqlCeCommand("UPDATE Barang SET Pakai = @Pakai WHERE Nama_Barang = 'Mie Rebus' AND Nama_Barang = 'Telor'", koneksi);
        perintahsql.Parameters.Clear();
        perintahsql.Parameters.AddWithValue("@Pakai", use);
    } 
```

如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:30:43.327

将您的 SQL 语句更改为：

```
UPDATE Barang SET Pakai = @Pakai WHERE Nama_Barang in ('Mie Rebus', 'Telor') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:31:39.600

您的 WHERE 子句正在查找行`Nama_Barang = 'Mie Rebus' AND Nama_Barang = 'Telor'`

这里的关键是 AND。您没有任何 Nama_Barang**既是**“Mie Rebus”又是“Telor”的行。您正在寻找 Nama_Barang 为“Mie Rebus”**或**“Telor”的行，因此您的 WHERE 子句应为`Nama_Barang = 'Mie Rebus' OR Nama_Barang = 'Telor'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:34:19.820

您可以通过将 WHERE 子句中的 AND 更改为 OR 运算符来做到这一点。

```
private void Button_Click(object sender, EventArgs e)
{
    int use = Convert.ToInt32(textBox1.Text);

    perintahsql = new SqlCeCommand("UPDATE Barang SET Pakai = @Pakai WHERE Nama_Barang = 'Mie Rebus' OR Nama_Barang = 'Telor'", koneksi);
    perintahsql.Parameters.Clear();
    perintahsql.Parameters.AddWithValue("@Pakai", use);
} 
```

但是，如果您要为许多值执行此操作，那么最好使用

> WHERE Nama_Barang IN ('name1','name2', ... ,'name99')

# javascript - 如何以编程方式避免 IE 消息“...允许此网页访问剪贴板”？

> ID：14275106
> 
> 赞同：1
> 
> 时间：2013-01-11T09:28:52.397
> 
> 标签：javascript, internet-explorer, clipboard, paste

请看看[这个小提琴](http://jsfiddle.net/tVfGY/3/)。我想赶上 IE 粘贴事件，做 s.th。与要粘贴的数据然后粘贴它。这也应该可以通过单击按钮来完成。到目前为止一切正常，除了一件非常烦人的事情......

**当首先**单击按钮时，IE 会询问您是否允许访问剪贴板。但是，如果您重新加载页面并首先粘贴 s.th。使用快捷键 CTRL + V，不会有任何问题，即使您现在尝试使用该按钮，IE 也不会再询问您了。

对我来说，看起来我在两种情况下都使用相同的代码。那么是否有可能做 s.th 以便即使用户先单击按钮，IE 也不会打扰用户？

这是我的代码的摘录：

```
$("div").bind("paste", function (e) { customPaste(); });

function customPaste() {
 if (event) event.returnValue = false;
 var data = window.clipboardData.getData("Text");
 paste(data);
} 
```

# linux - 何时使用 linux 内核 add_timer vs queue_delayed_work

> ID：14275113
> 
> 赞同：3
> 
> 时间：2013-01-11T09:29:13.890
> 
> 标签：linux, linux-kernel, linux-device-driver

要安排稍后在 linux 内核驱动程序中发生的操作，我有 2 个选项：

*   `add_timer`
*   `queue_delayed_work`

我知道的一个区别：对于计时器，您需要指定`expires`计时器到期时的 jiffies 值，对于延迟工作，您需要指定 jiffies 的延迟。

我一直在阅读有关计时器和 work_queue 的其他[问题](https://stackoverflow.com/a/2147416/89376)，其中提到计时器在进程上下文之外运行。这与延迟工作有什么不同？

另外我知道定时器有问题，在计算时`expires`，可能会发生值溢出，所以计算的值小于当前的 jiffies 并且定时器立即过期（如果我错了，请纠正我）。延迟工作是否会遇到同样的问题？如果有，怎么做

对我来说，使用延迟工作似乎更容易（因为工作不是周期性的）。但是使用定时器有什么缺点呢？

**编辑** 我做了一些进一步的研究。它似乎`queue_delayed_work`只是在`add_timer`内部使用。

所以我的新问题是，如何正确处理计时器的 jiffies 溢出？例如，如何将 timer/delayed_work 设置为 10 分钟延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-16T04:27:53.610

在内核编程的情况下，当你的定时器/工作回调函数需要休眠时，你必须使用delayed_work。由于delayed_work 在进程上下文中运行，您可以使用那些可能在回调函数中休眠或倾向于休眠的函数。而在内核定时器的情况下，您不能使用那些休眠或倾向于休眠的功能。结论：如果您的回调函数需要休眠，请使用工作队列，否则请使用计时器/任务小程序。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:29:56.573

正如我在问题中所说，`queue_delayed_work`只是在`add_timer`内部使用。所以用途是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-25T21:23:56.550

回答你的第二个问题。

从现在开始 10 分钟，用于内核计时器：

```
// 10 minutes * 60 converts to seconds * 1000 converts to microseconds
// msecs_to_jiffies converts the resulting microsecond delay to jiffies
//   which is added to the current time (system variable jiffies)

jiffies + msecs_to_jiffies(10 * 60 *1000) 
```

对于排队延迟的工作，您只需使用 10 分钟延迟部分：

```
msecs_to_jiffies(10 * 60 * 1000) 
```

重新溢出 - 如果您需要自己比较 jiffies，请参阅 time_after 和 time_before（和其他）宏 [http://tomoyo.sourceforge.jp/cgi-bin/lxr/source/include/linux/jiffies.h#L93](http://tomoyo.sourceforge.jp/cgi-bin/lxr/source/include/linux/jiffies.h#L93)

# python - Python：从列表中删除奇数

> ID：14275118
> 
> 赞同：10
> 
> 时间：2013-01-11T09:29:31.053
> 
> 标签：python

我编写了一个函数来从列表中删除奇数，如下所示：

```
def remove_odd(l):
    for i in l:
        if i % 2 != 0:
            l.remove(i)
    print l
    return l

remove_odd([4,5,4])
remove_odd([4,5,4,7,9,11])
remove_odd([4,5,4,7,9,11,12,13]) 
```

它返回：

```
[4, 4]
[4, 4, 9]
[4, 4, 9, 12] 
```

-> 错误

但是当我更改为删除偶数时：

```
def remove_even(l):
    for i in l:
        if i % 2 == 0:
            l.remove(i)
    print l
    return l

remove_even([4,5,4])
remove_even([4,5,4,7,9,11])
remove_even([4,5,4,7,9,11,12,13]) 
```

答案是可以的：

```
[5]
[5, 7, 9, 11]
[5, 7, 9, 11, 13] 
```

remove_odd() 函数有什么问题？我知道人们通常会在 func 中创建第二个列表，然后将偶数附加到该列表中，但是我们可以用 list.remove() 解决这个练习吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T09:37:35.737

您的功能以不同于您预期的方式工作。循环采用第`for`一个元素，而不是第二个等，因此当您删除一个元素时，其他元素会改变它们的位置，并且当它们前面有另一个奇数时可以被它跳过（在您的情况下会发生这种情况）。

如果您坚持使用`.remove()`方法，则必须改为对副本进行操作，如下所示：

```
def remove_odd(1):
    for i in l[:]:
        if i % 2 != 0:
            l.remove(i)
    return l 
```

（`l[:]`是 list 的浅拷贝`l`）

但是，我认为使用列表理解会更清晰：

```
def remove_odd(l):
    return [x for x in l if x % 2 == 0] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T09:32:27.553

> remove_odd() 函数有什么问题？

您在更改列表大小的同时迭代列表。这导致它跳过一个或多个元素

你为什么不使用列表理解。它更具 Pythonic 和可读性

```
def remove_odd(l):
    return [e for e in l if e % 2 == 0]

remove_odd([4,5,4,7,9,11])
[4, 4] 
```

同样，您可以编写您的 remove_even 例程

```
def remove_even(l):
    return [e for e in l if e % 2]

remove_even([4,5,4,7,9,11])
[5, 7, 9, 11] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T09:37:57.233

Python为此提供了一个内置方法：`filter`

```
filtered_list = filter(lambda x: x%2==0, input_list) 
```

在 Python 3 中要小心，因为这里的 filter 只是一个生成器，所以你必须写：

```
filtered_list = list(filter(lambda x: x%2==0, input_list)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T09:32:50.313

您在迭代列表时尝试修改列表。

尝试这样的事情：

```
In [28]: def remove_odd(l):
    return [x for x in l if x%2 == 0]
   ....: 

In [29]: remove_odd([4,5,4,7,9,11])
Out[29]: [4, 4]

In [30]: remove_odd([4,5,4,7,9,11,12,13])
Out[30]: [4, 4, 12] 
```

或仅修复您的代码，您应该迭代`l[:]`.

`l[:]`返回一个浅拷贝，`l`其等价于`list(l)`.

```
In [38]: def remove_odd(l):
        for i in l[:]:
                if i % 2 != 0:
                      l.remove(i)
        return l
   ....:     

In [39]: remove_odd([4,5,4,7,9,11,12,13])
Out[39]: [4, 4, 12]

In [40]: remove_odd([4,5,4,7,9,11])
Out[40]: [4, 4] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T09:36:28.680

修改整个列表的最佳方法是使用它的副本：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> l=range(10)
>>> type(l)
<type 'list'>
>>> l[:]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> type(l[:])
<type 'list'>
>>> 
```

从关闭文档：

> 如果您需要在循环内修改您正在迭代的序列（例如复制选定的项目），建议您首先制作一个副本。对序列进行迭代不会隐式生成副本。切片表示法使这特别方便：

```
 >>>>>> for w in words[:]:  # Loop over a slice copy of the entire list.
    ...     if len(w) > 6:
    ...         words.insert(0, w)
    ...
    >>> words
    ['defenestrate', 'cat', 'window', 'defenestrate'] 
```

[http://docs.python.org/2/tutorial/controlflow.html](http://docs.python.org/2/tutorial/controlflow.html)

特别是对于您的示例：

```
def remove_odd(l):
    for i in l[:]:
        if i % 2:
            l.remove(i)
    return l 
```

工作得很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T09:47:29.863

`enumerate`如果您在示例中使用，您可以理解发生了什么。

```
def remove_odd(l):
    for n, i in enumerate(l):
        print n, i
        if i % 2 != 0:
            l.remove(i)
    print l
    return l

remove_odd([4,5,4,7,9,11]) 
```

它给出了结果：

```
0 4
1 5
2 7
3 11
[4, 4, 9] 
```

因此，在第一种和第二种情况下，for 循环使用正确的值 4 和 5。但是您从`l`. 然后在第三步你叫 7 而不是第三位置的 4。因此`l`，正如其他答案已经建议的那样，最好复制。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-28T04:00:10.717

```
import numpy as np
rand_vec3 = np.arange(0,10)
print(rand_vec3)
print(rand_vec3[rand_vec3 % 2 == 0]) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-13T20:57:21.110

你可以试试这样..

```
def remove_odd(l):
    a=[]
    for i in range(len(l)):
        if(l[i]%2 ==0):
            a.append(l[i])
    return a
print remove_odd([1,2,2,6,4,1,3]) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-20T18:44:13.407

Here 另一种实现和一些性能测试，实际目标是不更改实际列表，但删除同一列表中的赔率数

## 第一种方法

```
# --- Naive Approach Brute Force
def remove_odd(array):
    """Very unefficient Funciton, it has to copy the arr then iterate through it, then calls
    remove function, however it does the job, good for small Lists"""
    array_copy = array.copy()
    for n in array_copy:
        if n % 2 != 0:
            array.remove(n)
    return array

tests = [[4,5,4], [4,5,4,7,9,11], [4,5,4,7,9,11,12,13]]
for test in tests:
    print(f'List Before --> {test}')
    result = remove_odd(test)
    print(f'List After --> {test}')
    print('===='*15) 
```

* * *

```
## Other Solution ##

def remove_odd(array):
    """Better Solution, it iterates through the Array once"""
    idx = 0
    offset = 0  # NOTE: Offset keeps tracks of the jumps after each iteration
    max_iter = len(array)
    while max_iter:
        n = array[idx-offset]

        if n % 2 != 0:
            offset += 1
            array.remove(n)

        idx += 1
        max_iter -= 1

tests = [[4,5,4], [4,5,4,7,9,11], [4,5,4,7,9,11,12,13]]
for test in tests:
    print(f'List Before --> {test}')
    result = remove_odd(test)
    print(f'List After --> {test}')
    print('===='*15) 
```

## 输出两个函数##

```
List Before --> [4, 5, 4]
List After --> [4, 4]
============================================================
List Before --> [4, 5, 4, 7, 9, 11]
List After --> [4, 4]
============================================================
List Before --> [4, 5, 4, 7, 9, 11, 12, 13]
List After --> [4, 4, 12]
============================================================ 
```

* * *

## 基准测试

# emacs - 在 Emacs 中编辑 Markdown 管道表

> ID：14275122
> 
> 赞同：28
> 
> 时间：2013-01-11T09:29:41.253
> 
> 标签：emacs, markdown, org-mode

我喜欢用 Markdown 写东西，经常发现自己需要表格。在 Emacs中编辑 Markdown 的**管道表**有什么好的方法吗？我指的是这种语法：

```
| Header | Header | Right |
|--------|--------|------:|
|  Cell  |  Cell  |  $10  |
|  Cell  |  Cell  |  $20  | 
```

我首先尝试了 Emacs 的[表格模式](http://www.emacswiki.org/emacs/TableMode)，它很好，但它是为 Markdown 不支持的“网格表格”而设计的（比如说在 Github 的 Markdown 中）。

还有[org-mode 的 table 模式](http://orgmode.org/manual/Tables.html)可以用作次要模式。这非常接近；但是交叉点现在被`+`字符替换，并且不支持对齐冒号。所以`org-tblmode`首先给我这样的东西：

```
| Header | Header | Right |
|--------+--------+-------|
| Cell   | Cell   | $10   |
| Cell   | Cell   | $20   | 
```

然后我需要手动编辑以下内容（编辑交叉字符并添加对齐冒号）：

```
| Header | Header | Right |
|--------|--------|------:|
| Cell   | Cell   | $10   |
| Cell   | Cell   | $20   | 
```

是否有一些可能也`org-tblmode`可以处理这个问题？您还使用/建议在 Emacs 中编辑 Markdown 的管道表吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-03T20:54:50.930

OrgMode 具有很好的功能`orgtbl-to-generic`，可以将 orgmode 的表格转换为外来格式。我找到了基于以下定义自定义转换器的简单示例`orgtbl-to-generic`：[https](https://gist.github.com/yryozo/5807243) ://gist.github.com/yryozo/5807243 。另请参阅此处对 ORGTBL RECEIVE/SEND 功能的说明：http: [//dynamic-thinking.blogspot.ru/2009/11/orgtbl-mode.html](http://dynamic-thinking.blogspot.ru/2009/11/orgtbl-mode.html)。您需要`orgtbl-to-gfm`在 Emacs 中定义自定义函数并将其放置到您的自动加载中，然后您可以使用次要模式`orgtbl-mode`来编辑表格。

小限制：仅支持左右列对齐，因为 Emacs OrgMode inside self 不支持中心对齐。

请参阅上面的示例 org-mode 源代码：

```
<!---
#+ORGTBL: SEND sample orgtbl-to-gfm
| Column 1      | Column 2 |
|---------------+----------|
|               | <l>      |
| Sample line 1 | 100      |
| Sample line 2 | 200      |
--> 
```

并且从 org-mode 源转换为 markdown 的结果：

```
<!--- BEGIN RECEIVE ORGTBL sample -->
| Column 1 | Column 2 |
|---|---|
| Sample line 1 | 100 |
| Sample line 2 | 200 |
<!--- END RECEIVE ORGTBL sample --> 
```

它们都放在同一个文件中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-10T10:49:35.130

这就是我用来处理降价模式下的表格的方法。可能有点hack，但对我来说效果很好。它将一个本地钩子添加到一个降价缓冲区，在保存时，将整个缓冲区中的“-+-”替换为“-|-”。

```
(require 'org-table)

(defun cleanup-org-tables ()
  (save-excursion
    (goto-char (point-min))
    (while (search-forward "-+-" nil t) (replace-match "-|-"))
    ))

(add-hook 'markdown-mode-hook 'orgtbl-mode)
(add-hook 'markdown-mode-hook
          (lambda()
            (add-hook 'after-save-hook 'cleanup-org-tables  nil 'make-it-local))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T14:54:02.207

将该函数绑定到一个键以实现区域的右对齐转换：

```
(defun markdown-regexp-right (beg end)
  (interactive "r")
  (replace-regexp "-\|[^-]" "-:|\n" nil beg end)    
  (replace-regexp "-\\+-" "-|-" nil beg end)
) 
```

这将在右对齐情况下替换`-+-`为`-|-`和替换`-|`为。`:|`

请注意， \n 被包括在内，因为这样可以确保另一个`-|-`不会更改为`-:|`，但只有`-|`在它后面跟着 a 时才可以`new-line`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-02T13:44:18.397

Org-mode 非常接近，我相信这是它的次要模式 orgtbl 的一种情况，它可以使用[任意语法](http://orgmode.org/manual/Tables-in-arbitrary-syntax.html#Tables-in-arbitrary-syntax)进行转换。因此，包含 :-、-: 或 :-: 的行将删除其冒号，并添加第二行[`<l>`,`<c>`并`<r>`](http://orgmode.org/manual/Column-width-and-alignment.html#Column-width-and-alignment)添加以通知 org-mode 对齐方式。那么翻译回来应该不会太难。遗憾的是，我现在还不够擅长 Emacs 来编写它。顺便说一句，pandoc 的降价解析器确实接受由 org-mode 生成的 +。

多看几眼后，我相信 org-mode 中的现有钩子需要在文本周围有点杂乱无章，并且一些编辑功能是有序的。由于这是我第一次尝试使用 emacs lisp，我的[emacs lisp 在 orgtbl 和 markdown 之间进行转换简直](https://gist.github.com/anonymous/6430461)是可怕的，但我已经设法转换了一个测试表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-19T19:45:08.370

`markdown-mode`有`markdown-do`命令（绑定到`C-c C-d`）。当点在表格中时，它会填充所有列，以便它们对齐。

[https://github.com/jrblevin/markdown-mode#usage](https://github.com/jrblevin/markdown-mode#usage)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-05T06:02:43.933

我也遇到了这个确切的问题（我是最近的 emacs 转换），我编写了一个小 AWK 脚本，可以将您提到的“网格表”（即*不*使用 org-mode 表）转换为 GFM 表。

有几种方法可以使用这个脚本。您所要做的就是标记表格，然后输入`C-u M-| name-of-awk-script RET`（我从[这个 Stackoverflow 线程](https://stackoverflow.com/questions/206806/filtering-text-through-a-shell-command-in-emacs#207008)中学到了这个技巧）。这将使用该区域作为 AWK 脚本的标准输入，并用输出替换该区域。我非常不擅长编写 ELisp，但我也编写了几个辅助函数。该`table-gfm-export`函数当前不会以与交互方式替换文本相同的方式替换文本`C-u M-|`，因为它仍将原始表留在缓冲区中。

```
(defun table-gfm-capture (start end)
  "convert Markdown table to Emacs table
there should be no pipes beginning or ending the line,
although this is valid syntax. Loses justification."
  (interactive "r")
  ;; should prompt user for justification
  (table-capture start end "|"
         "[\n][:|-]*" 'center))

(defun table-gfm-export (start end)
  "uses AWK script to convert Emacs table to
GFM Markdown table"
  (interactive "r")
  ;; replace gfm_table_format if necessary
  (shell-command-on-region start end "gfm_table_format" t t)
  (table-unrecognize)) 
```

这个脚本的一个优点是它还可以使用一些简单的正则表达式来识别列的对齐方式。其他功能`table-gfm-capture`，无法保持对齐，所以不能自由来回切换。该系统非常适合在表格模式下进行所有编辑，然后在最后导出到 GFM。你会认为 Emacs 已经能够使用 生成 Markdown 表`table-generate-source`，但是，唉。

```
#!/usr/bin/env awk -f
# -*- mode: awk -*-

BEGIN {
    FS="|";
    first=1;
}

function detect_justification(f) {
    if (match(f, /^ .* $/)) {
        return 0;               # center-justified
    } else if (match(f, / $/)) {
        return -1;              # left-justified
    } else { return 1; }        # right-justified
}

function gen_field(len, just) {
    str = sprintf("%*s", len, "");
    gsub(/ /, "-", str);
    if (just <= 0) {
        # left or center, start with :
        sub(/-/, ":", str);
    }
    if (just >= 0) {
        # right or center, end with :
        sub(/-$/, ":", str);
    }
    return str;
}

function gen_rule() {
    str = "";
    # ignore first and last empty fields
    for (i=1; i < NF; i++) {
        len = length($i);
        just = detect_justification($i);
        str = sprintf("%s%s|", str, gen_field(len, just));
    }
    return str;
}

function sanitize_line(line) {
    # strip outer pipes and trailing whitespace
    if (index(line, "|") == 1) {
        line = substr(line, 2);
    }
    sub(/[ |]*$/, "", line);
    return line;
}

! /^\+/ {
    print(sanitize_line($0));
    if (first) {
        print(sanitize_line(gen_rule()));
        first = 0;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-03T13:21:41.103

[Markdown-mode](https://jblevins.org/projects/markdown-mode/)包为 GitHub 风格的 Markdown 提供表格支持。

Markdown-mode 是 Spacemacs 的一部分（可能还有其他社区配置）。请注意，如果在 Spacemacs 中使用 markdown 和 org 层，orgtbl 将劫持一些键绑定，即使用 org 语法的 TAB 和格式表。禁用 orgtbl-mode 删除了 orgtbl 劫持。

# php - 基于从数据库中获取的值突出显示行

> ID：14275124
> 
> 赞同：0
> 
> 时间：2013-01-11T09:29:47.697
> 
> 标签：php, mysql

下面我展示了用于显示表格行的 PHP 代码，如果`selected_val`表格中为 1，我如何突出显示行`selected_candidate`？

下面我展示了我正在使用的查询和 if / else 循环。我收到以下警告：'警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源'。

```
<?php

    if(isset($_POST['Submit']))
    {
        $i=0;
        while($data_set = mysql_fetch_array($result_set))
        {
            $i=0;
            echo "<div id=\"Message1[$i]\" class=\"box\">";
            echo "Country ={$data_set['ecountry']}<br/>";
            echo "State = {$data_set['estate']}<br/>";
            echo "</div>";
            echo "<tr>";
            echo "<td><input id=\"select_candi{$i}\" onclick=\"javascript:func(this.id,{$_SESSION['uid']})\" type=\"checkbox\" name=\"check_candi[]\" value=\"{$data_set['eid']}\"/></td>"; 
            echo "<td>{$data_set['ename']}</td>";
            echo "<td>{$data_set['lname']}</td>";
            echo "<td>{$data_set['ecell']}</td>";
            echo "<td>{$data_set['eposition']}</td>";
            echo "<td>{$data_set['eemail']}</td>";

            if($data_set['ecity']=='')
            {
                echo "<td>{$data_set['ecountry']}</td>";
            }
            else
            {
                echo "<td onmouseover=\"ShowText('Message1[$i]'); return true;\" onmouseout=\"HideText('Message1[$i]'); return true;\" href=\"javascript:ShowText('Message1')\">{$data_set['ecity']}</td>";
            }

            // echo "<td>{$data_set['ecountry']},{$data_set['estate']},{$data_set['ecity']}</td>";
            echo "<td>{$qua}</td>";
            echo "<td>{$data_set['other_work1']} {$data_set['other_work2']}{$data_set['other_work3']}{$data_set['other_work4']} {$data_set['other_work5']} {$data_set['other_work6']} {$data_set['other_work7']} {$data_set['other_work8']} {$data_set['other_work9']} {$data_set['other_work10']}
                 {$data_set['other_work1e']} {$data_set['other_work2e']} {$data_set['other_work3e']} {$data_set['other_work4e']} {$data_set['other_work5e']} {$data_set['other_work6e']} {$data_set['other_work7e']} {$data_set['other_work8e']} {$data_set['other_work9e']} {$data_set['other_work10e']}
                </td>";
            echo "<td><a href=\"detailcv.php?id={$data_set['eid']}\" target=\"_blank\"><input  style=\" cursor:hand;width:40px\" class=\"button\" name=\"cv\" type=\"button\" value=\"C V\" /></a></td>";
            echo "</tr>";

            $i++;
        }
    }

?> 
```

查询：在这我取了`selected_val`

```
$query = "SELECT emp.eid,ename,lname,ecell,eposition,eemail,ecountry,estate,ecity,prefcities,ca,cs,cwa,completed,persuing,other_work1,other_work2,other_work3,other_work4,other_work5,other_work6,other_work7,other_work8,sc.selected_val ";   
$query .= "FROM employee emp,selected_candidate sc"; 
```

如果循环：

```
if($data_set['selected_val']=='1')
{
    echo "<script>$('#{$rowid}').css(\"background-color\",\"yellow\");</script>";
}

$rowid++;

selected_candidate Table

 eid  int(30)
    rid int(30)
    selected_val int(1) 
```

`employee table also contains eid int(30)`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:33:13.430

该错误通常意味着您的查询中有错误。要获取有关它的更多详细信息，请替换`mysql_query($query)`为`mysql_query($query)or die(mysql_error())`.

这可能是语法错误或输入错误的列名。

# c# - OnPaint 重绘一切，有什么可以留下来吗？

> ID：14275125
> 
> 赞同：0
> 
> 时间：2013-01-11T09:29:50.880
> 
> 标签：c#, onpaint

例如，假设我的 OnPaint 绘制了一条与称为长度的变量一样长的线。还有一个叫做颜色的布尔值。如果 bool 为真，则线为红色，如果为假，则线为黑色。屏幕上可能有两条不同颜色和不同的长线（我的问题是：OnPaint 重绘整个表面，但是否可以保留一些图纸）？

我知道这个问题可能有点令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:37:38.730

据我所知没有这样的功能。

但是您可以创建自己的 OnPaint 方法（无需调用 base.OnPaint()）并集成此逻辑（通过仅绘制您需要的元素 - 并且某些内容可能会保留）但这可能是不好的方法，可能会导致您犯很多错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:02:07.517

这将根据 isValid == true 或 false 以不同的长度和颜色绘制两条线。线条将留在屏幕上。对于您问题的另一部分，亚历克斯提供了正确的方法。

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            bool isTrue = false;

            if (isTrue == true)
            {
                g.DrawLine(Pens.Red, new Point(0, 50), new Point(150, 50));
            }
            else
            {
                g.DrawLine(Pens.Blue, new Point(0, 50), new Point(300, 50));
            }

            g.Dispose();
        }
    }
} 
```

# php - 使用 CakePHP 路由器将方法链接到子域

> ID：14275130
> 
> 赞同：0
> 
> 时间：2013-01-11T09:30:02.943
> 
> 标签：php, cakephp

我希望让我的 Cake 应用程序中的某些 url 成为基于子域的。

因此，例如使：`domain.com/posts/index.json`成为`api.domain.com/posts`

我试过了：

```
$subdomain = substr(env("HTTP_HOST"), 0, strpos(env("HTTP_HOST"), ".")); 

if ($subdomain == 'api') {
    Router::connect('/', array('controller' => 'posts', 'action' => 'index')); 
} 
```

但它只是带来了一个 404。注意我已经关闭了通配符子域，因此随机子域仍然不会加载主站点（是否可以允许某些子域？例如，允许 api.domain.com 但出错在 fake.domain.com 上）

另外，如何将 JSON 扩展作为路由器阵列的一部分进行处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:27:25.360

从 2.x 开始，Cake 没有任何东西支持子域。已经对此进行了讨论/工作，但不确定何时可用。

直到它是你将需要忍受普通的网址或大量的黑客攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T12:33:24.753

您可以在您的 routes.php 中使用下面的代码同时确保您已经可以访问子域。

```
$subdomain = substr( env("HTTP_HOST"), 0, strpos(env("HTTP_HOST"), ".") );
if( strlen($subdomain) > 0 && $subdomain == "api" ) {
    Router::connect('/:action/*', array('controller' => 'posts'));
} 
```

# java - 有没有办法让 Jetty 使用 SSL 和 java 代码

> ID：14275133
> 
> 赞同：1
> 
> 时间：2013-01-11T09:30:10.940
> 
> 标签：java, ssl, jetty, osgi, equinox

我有一个`Eclipse RCP`带有`Equinox Jetty`Web 服务器的项目。我希望 Jetty 服务器使用`SSL`.

我测试了在 Eclipse 的运行配置中设置属性，它工作正常。

```
-Dorg.eclipse.equinox.http.jetty.https.enabled=true
... 
```

现在我的问题：有没有一种程序化的方式来`Jetty`使用`SSL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:37:23.290

将 SSLConnector 添加到您的连接器列表中，例如

```
SslConnector sslConnector = new SslSelectChannelConnector(sslContextFactory); 
```

# javascript - Opera 中的 Flash 对象缩放问题

> ID：14275139
> 
> 赞同：1
> 
> 时间：2013-01-11T09:30:31.707
> 
> 标签：javascript, html, flash, css, opera

似乎 Opera 中存在缩放 Flash 对象的错误。我需要缩放一个内部有其他 div 的大型 div（包装器），而且其中一些内部有 Flash 对象。因此，当我使用包装器 div 缩放包装器 div 时`-ms-transform:scale()`，其中的 div 会按预期缩放，但 Flash 对象除外。他们总是停留在`scale(1)`，页面被扭曲。有没有人遇到过同样的问题并有任何解决方法的想法？

# reactiveui - ReactiveUI 视图绑定到附加属性

> ID：14275141
> 
> 赞同：2
> 
> 时间：2013-01-11T09:30:42.440
> 
> 标签：reactiveui

[此博客条目](http://blog.paulbetts.org/index.php/2012/08/27/reactiveui-4-0-preview-2-is-here/)描述了使用视图绑定来替代 XAML 绑定。我喜欢基于约定的接线：

```
this.OneWayBind(ViewModel, x => x.FooMirror); 
```

如果我想绑定到 TextBox 的 Text 属性：

```
this.Bind(ViewModel, x => x.SomeText, x => x.SomeText.Text); 
```

但是，我有一个要绑定的附加属性（用于[附加行为模式](http://blogs.msdn.com/b/johngossman/archive/2008/05/07/the-attached-behavior-pattern.aspx)的实现）。如何使用 View Bindings 语法绑定到附加属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T18:54:24.497

Binding 目前对 XAML 附加属性一无所知 - 您可能必须通过执行以下操作来解决此问题：

```
this.WhenAny(x => x.ViewModel.SomeCoolProperty, x => x.Value)
    .Subscribe(x => theControl.SetValue(AttachedObject.MyAttachedProperty, x); 
```

# jsp - JSP 文件中的 c:out 和 ${}

> ID：14275147
> 
> 赞同：2
> 
> 时间：2013-01-11T09:30:59.477
> 
> 标签：jsp, jstl, el

使用上有区别吗

```
<c:out value="${a}"/> 
```

并且只是

```
${a} 
```

在 JSP 文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:49:20.877

是的，JSTL 的`out`标签会将某些字符转换为其 XML 转义序列[，如文档中所述](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/out.html)：

> 属性`escapeXml`: 确定结果字符串中的字符`<`, `>`, `&`, `'`,是否`"`应转换为其对应的字符实体代码。默认值为`true`。

请注意，如果目标是生成更清晰的标记，则可以查看命名空间中的[escapeXml](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)函数`http://java.sun.com/jsp/jstl/functions`作为替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:53:12.150

仅打印输出两者或相同。但是当我们没有变量'a'的值时，它会打印'NULL'。
为了克服这个问题，我们可以在 c:out 标签中使用默认值。

前任：`<c: out value='${a}' default='guest' />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:23:18.167

尝试更改您的标记库：

```
<%@ taglib prefix="c" uri="htttp://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="htttp://java.sun.com/jsp/jstl/fmt" %> 
```

到

```
<%@ taglib prefix="c" uri="htttp://java.sun.com/jstl/core" %>
<%@ taglib prefix="fmt" uri="htttp://java.sun.com/jstl/fmt" %> 
```

# php - 单击时隐藏一个框

> ID：14275150
> 
> 赞同：1
> 
> 时间：2013-01-11T09:31:10.613
> 
> 标签：php, jquery, class

我说我在这方面真的是新手，但我试图学习一些东西，我被困在这个事实上。

从技术上讲，当我点击它时，我只是无法隐藏这个“homebox”。这个盒子上的“点击”功能应该打开一个画廊......但打开它后，它也应该隐藏起来。为什么？因为盒子实际上在较低的 z-index 中包含了一张图片，而画廊的图片在较高的 z-index 上，所以我只显示了 2 张图片，真的很难看。

```
<div id="homebox">
             <a href="img/gallery/Home/Harris-Wharf-London-man-01.jpg" rel="gallery" class="pirobox_gall16">
                         <img src="../400x550 man.png" border="0"/>
          </a>
            <?PHP
                $sql_foto = "SELECT * FROM foto WHERE idMenu = '16' ORDER BY nomeFile ASC";
                $query_foto = mysql_query($sql_foto);
                while($fetch_foto = mysql_fetch_array($query_foto))
                {
                    $foto = $fetch_foto['nomeFile']; 

                    ?>
                    <a href="img/gallery/ID16/<?PHP echo $foto;?>" rel="gallery" class="pirobox_gall16">
                    </a>
                <?PHP
                    }

            ?>
        </div> 
```

我正在尝试这个脚本来制作这个，但正如我所说，我正在尝试学习制作比经典 html 网站更酷的东西，但我认为提问始终是提高你能力的好方法。

```
$('#homebox').click(function() {
  $('#homebox').css('visibility', 'visible') 
}); 
```

提前感谢任何建设性的答复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:32:07.240

请尝试此代码...

```
$('#homebox').click(function() {
  $(this).hide();
}); 
```

或者

```
$('#homebox').click(function() {
      $(this).SlideUp();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:36:05.907

尝试

```
$('#homebox').click(function() {
  $('#homebox').css("display", "none");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:32:14.453

**请使用以下代码**

```
 $('#homebox').click(function() {
      $(this).hide(); 
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:39:22.130

添加`hidden`类也是一个好习惯。这样在浏览 DOM 时，您可以轻松查看元素具有的状态：

```
$('#homebox').click(function() {
    $(this).toggleClass('hidden');
}); 
```

然后在你的 CSS 中：

```
.hidden { display: none; visibility: hidden; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T10:20:07.450

您应该尝试为您的图片库设置单独的控件。您不能使用元素本身来切换元素的可见性或显示。一旦它是`visibility: hidden;`或`display:none;`它不会触发点击事件，并且在这种情况下`display: none`甚至不会出现在文档流中（尽管它会保留在 DOM 中）。

我的建议是添加一个画廊触发元素，例如

`<a href="#" id="gallery-trigger">View Gallery</a>`

然后你可以向这个元素添加一个点击事件来切换你的画廊的可见性。

```
document.ready(function() {
     $('#gallery-trigger').click(function() {
         $('.homebox').toggle();
     });
}); 
```

[http://jsfiddle.net/3leven11/h6YtJ/](http://jsfiddle.net/3leven11/h6YtJ/)

# flume - 为 Flume-ng 编写自定义 HTTPSource 处理程序

> ID：14275153
> 
> 赞同：2
> 
> 时间：2013-01-11T09:31:22.187
> 
> 标签：flume

是否有任何资源可以帮助我为 Flume-ng 的 HTTPSource 编写自定义处理程序。我阅读了文档并且有一个 Json 的示例处理程序，但我想知道是否有人需要编写一个处理程序来从 XML 消息体创建 Flume 事件。HttpSource 现在在 Flume-ng 1.3.1 中可用，但我们需要处理程序来解释我们的数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:40:17.920

你看过[JSONHandler 源码](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=blob;f=flume-ng-core/src/main/java/org/apache/flume/source/http/JSONHandler.java;h=197f66a827058af2a4e5d76c1dbfb82a3504c683;hb=HEAD)了吗？XMLHandler 的唯一区别是使用一些 XML 反序列化器而不是 Gson。

您只需要转换如下内容：

```
<dataList>
  <data>
     ...
  </data>
  <data>
     ...
  </data>      
</dataList> 
```

进入 List< [SimpleEvent](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=blob;f=flume-ng-sdk/src/main/java/org/apache/flume/event/SimpleEvent.java;h=a7ac36fbe4d4d9e61752d3bf4cf66c96145f2911;hb=HEAD) > （或者引入你自己的 HTTPEvent，就像 Flume 开发者对[JSONEvent](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=blob;f=flume-ng-sdk/src/main/java/org/apache/flume/event/JSONEvent.java;h=5c6c0d40702c5b2502a528cf1827066646234a76;hb=HEAD)所做的那样，如果你需要处理不同的编码）。这些事件的主体将包含您的`<data>..</data>`块作为[String 的字节表示](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)。

我不建议在 Flume 中实现任何额外的解析这些事件的业务逻辑，因为业务规则往往会经常变化，而 Flume 作为基础架构软件应该是稳定的。

最后，将代码打包到 jar 中，将此 jar 放入 Flume 的 lib 目录（在 Cloudera 的 rpm 发行版中为 /usr/lib/flume-ng/lib），在 flume.conf 中将 HTTPSource 的“handler”属性指定为“com. vicky.flume.source.http.XMLHandler”（或类似的东西），重新启动代理，仅此而已。

希望这可以帮助。将很高兴回答您的问题。

# php - 将 GMT 时间转换为 IST

> ID：14275154
> 
> 赞同：1
> 
> 时间：2013-01-11T09:31:22.933
> 
> 标签：php, datetime, timezone, timestamp, youtube-api

我正在尝试转换从 youtube api 视频提要收到的时间戳。收到的时间戳是`2013-01-11T06:45:52.000Z`. 我认为这是 GMT 时间戳（如果我错了，请纠正我）。我编写了一个将时间戳转换为 IST 的函数。

```
function formatTime($ydatetime) {
    $timestamp = explode("T", $ydatetime);
    $date = $timestamp[0];
    $gmtime = substr($timestamp[1], 0, 8);
    $gmtimestamp = $date . " " . $gmtime;
    $datetime = new DateTime($gmtimestamp, new DateTimeZone('GMT'));
    $datetime->setTimezone(new DateTimeZone('IST'));
    return $datetime->format('Y-m-d H:i:s');
} 
```

但它返回时间戳，`2013-01-11 08:45:52`因为差异仅为 2 小时。GMT 和 IST 之间的实际差异是 5.30 小时。请有人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:36:00.680

您是否尝试过“亚洲/加尔各答”时区或

[http://php.net/manual/en/timezones.indian.php](http://php.net/manual/en/timezones.indian.php)中的任何一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:37:24.553

尝试

```
function formatTime($ydatetime) {
   date_default_timezone_set('Asia/Kolkata'); //<--This will set the timezone to IST
   $str = strtotime($ydatetime);
   return date('Y-m-d H:i:s', $str);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T13:13:48.030

我面临同样的问题，想将 GMT 转换为 IST。这个对我有用：

```
$date = new DateTime('2018-04-08T14:30:00.000Z', new DateTimeZone('GMT'));
$date->setTimezone(new DateTimeZone('Asia/Kolkata'));
echo $date->format('Y-m-d H:i:s'); 
```

如果将来有人遇到同样的问题，只是想分享它:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:38:57.353

尝试

```
echo date('Y-m-d H:i:s',strtotime('+330 minutes', 0)); 
```

或者

```
date_default_timezone_set('Asia/Kolkata');
  echo date('Y-m-d H:i:s'); 
```

首先得到时间

```
$time = new DateTime('now', new DateTimeZone('UTC'));
    // then convert it to IST by
    $time->setTimezone(new DateTimeZone('IST')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-11T06:47:45.287

I recently found that PHP doesn’t have an inbuilt function for conversion of time/date between multiple time zones and neither could I find a third-party function for the purpose. However, I did find the PEAR class which has inbuilt support for multiple time-zones but it cannot be used by “including” itself in the php page. PEAR class can be used only after installation, which may not be feasible in each and every case. To avoid the hassles of installation I have written a set of 3 functions in PHP which wil allows you to –</p>

1.  Convert GMT to local time zone
2.  Convert local time zone to GMT
3.  Convert between two different time zones.

    ```
    /**
     *Convert the time in GMT timestamp into  user's local time zone timestamp
     * @param time $gmttime
     * @param string $timezoneRequired
     * $gmttime should be in timestamp format like '02-06-2009 09:48:00.000'
     * $timezoneRequired sholud be a string like 'Asia/Calcutta' not 'IST' or 'America/Chicago' not 'CST'
     * return timestamp format like '02-06-2009 09:48:00' (m-d-Y H:i:s) Can also change this format
     * $timestamp = $date->format("m-d-Y H:i:s"); decide the return format                      
    */

    function ConvertGMTToLocalTimezone($gmttime,$timezoneRequired)
    {
        $system_timezone = date_default_timezone_get();

        date_default_timezone_set("GMT");
        $gmt = date("Y-m-d h:i:s A");

        $local_timezone = $timezoneRequired;
        date_default_timezone_set($local_timezone);
        $local = date("Y-m-d h:i:s A");

        date_default_timezone_set($system_timezone);
        $diff = (strtotime($local) - strtotime($gmt));

        $date = new DateTime($gmttime);
        $date->modify("+$diff seconds");
        $timestamp = $date->format("m-d-Y H:i:s");
        return $timestamp;
    }

    /**
    *Use: ConvertGMTToLocalTimezone('2009-02-05 11:54:00.000','Asia/Calcutta');
    *Output: 02-05-2009 17:24:00 || IST = GMT+5.5
    */
     /**
     *Convert the time in user's local time zone timestamp into GMT timestamp  
     * @param time $gmttime
     * @param string $timezoneRequired
     * $gmttime should be in timestamp format like '02-06-2009 09:48:00.000'
     * $timezoneRequired sholud be a string like 'Asia/Calcutta' not 'IST' or 'America/Chicago' not 'CST'
     * return timestamp format like '02-06-2009 09:48:00' (m-d-Y H:i:s) Can also change this format
     * $timestamp = $date->format("m-d-Y H:i:s"); decide the return format Date:06/02/2009
    */

    function ConvertLocalTimezoneToGMT($gmttime,$timezoneRequired)
    {
        $system_timezone = date_default_timezone_get();

        $local_timezone = $timezoneRequired;
        date_default_timezone_set($local_timezone);
        $local = date("Y-m-d h:i:s A");

        date_default_timezone_set("GMT");
        $gmt = date("Y-m-d h:i:s A");

        date_default_timezone_set($system_timezone);
        $diff = (strtotime($gmt) - strtotime($local));

        $date = new DateTime($gmttime);
        $date->modify("+$diff seconds");
        $timestamp = $date->format("m-d-Y H:i:s");
        return $timestamp;
    }

    /**
    *Use: ConvertLocalTimezoneToGMT('2009-02-05 17:24:00.000','Asia/Calcutta');
    *Output: 02-05-2009 11:54:00 ||  GMT = IST-5.5
    */

    /**
     *Convert the time in user's local time zone timestamp into another time zone timestamp
     * @param time $gmttime
     * @param string $timezoneRequired
     * $gmttime should be in timestamp format like '02-06-2009 09:48:00.000'
     * $timezoneRequired sholud be a string like 'Asia/Calcutta' not 'IST' or 'America/Chicago' not 'CST'
     * return timestamp format like '02-06-2009 09:48:00' (m-d-Y H:i:s) Can also change this format
     * $timestamp = $date->format("m-d-Y H:i:s"); decide the return format Date:06/02/2009.
    */

    function ConvertOneTimezoneToAnotherTimezone($time,$currentTimezone,$timezoneRequired)
    {
        $system_timezone = date_default_timezone_get();
        $local_timezone = $currentTimezone;
        date_default_timezone_set($local_timezone);
        $local = date("Y-m-d h:i:s A");

        date_default_timezone_set("GMT");
        $gmt = date("Y-m-d h:i:s A");

        $require_timezone = $timezoneRequired;
        date_default_timezone_set($require_timezone);
        $required = date("Y-m-d h:i:s A");

        date_default_timezone_set($system_timezone);

        $diff1 = (strtotime($gmt) - strtotime($local));
        $diff2 = (strtotime($required) - strtotime($gmt));

        $date = new DateTime($time);
        $date->modify("+$diff1 seconds");
        $date->modify("+$diff2 seconds");
        $timestamp = $date->format("m-d-Y H:i:s");
        return $timestamp;
    }

    /**
    *Use: ConvertLocalTimezoneToGMT('2009-02-05 17:24:00.000','Asia/Calcutta','America/Chicago');
    *Output: 02-05-2009 05:54:00 ||  IST = GMT+5.5, CST = GMT-6 || IST - CST = 11.5
    */ 
    ```

    [find blog here](http://burnignorance.com/php-programming-tips/php-function-for-time-zone-conversion/)

# sql-server-2008 - 列中为空时合并语句错误

> ID：14275156
> 
> 赞同：0
> 
> 时间：2013-01-11T09:31:33.603
> 
> 标签：sql-server-2008, join, merge, sql-server-2008-r2

我有一个合并声明

目标表 =~ DST 源表 =~ SRC

```
MERGE DST
USING (SELECT * FROM SRC WHERE <Some_Condition>) SRC
ON SCR.COL1 = DST.COL1 OR (SRC.COL1 IS NULL AND DST.COl1 IS NULL) AND 
ON SCR.COL2 = DST.COL2 OR (SRC.COL2 IS NULL AND DST.COl2 IS NULL) AND 
ON SCR.COL3 = DST.COL3 OR (SRC.COL3 IS NULL AND DST.COl3 IS NULL) AND 
ON SCR.COL4 = DST.COL4 OR (SRC.COL4 IS NULL AND DST.COl4 IS NULL) 
WHEN MATCHED UPDATE DST
WHEN NOT MATCHED BY SOURCE THEN UPDATE DST
WHEN NOT MATCHED INSERT IN DST 
```

*表结构*

```
Source

Column1 Column2 Column3 Column4
A        A       NULL    NULL
B        B       NULL    NULL

Destination

Column1 Column2 COlumn3 Column4 Column5 
```

**错误**

*MERGE 语句多次尝试更新或删除同一行。当目标行匹配多个源行时会发生这种情况。MERGE 语句不能多次 UPDATE/DELETE 目标表的同一行。优化 ON 子句以确保目标行最多匹配一个源行，或使用 GROUP BY 子句对源行进行分组。*

但是当我使用下面的查询时（即只使用那些有一些值而不是空值的列，如 SRC 中的 Column3 和 Column 4）**一切正常**

```
MERGE DST
    USING (SELECT * FROM SRC WHERE <Some_Condition>) SRC
    ON SCR.COL1 = DST.COL1 OR (SRC.COL1 IS NULL AND DST.COl1 IS NULL) AND 
    ON SCR.COL2 = DST.COL2 OR (SRC.COL2 IS NULL AND DST.COl2 IS NULL) 
    WHEN MATCHED UPDATE DST
    WHEN NOT MATCHED BY SOURCE THEN UPDATE DST
    WHEN NOT MATCHED INSERT IN DST 
```

**编辑：复制场景**

源表

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[tblSource](
    [Column1] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column2] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column3] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column4] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column5] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF 
```

目的地表

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[tblDestination](
    [Column1] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column2] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column3] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column4] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column5] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Column6] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF 
```

数据来源

```
INSERT [dbo].[tblSource] ([Column1], [Column2], [Column3], [Column4], [Column5]) VALUES (N'A', N'A', NULL, NULL, NULL)
INSERT [dbo].[tblSource] ([Column1], [Column2], [Column3], [Column4], [Column5]) VALUES (N'B', N'B', NULL, NULL, NULL) 
```

目的地为空

合并声明

```
MERGE dbo.tblDestination DST
USING (SELECT * FROM dbo.tblSource) SRC
ON DST.Column1 = SRC.Column1 OR (DST.Column1 IS NULL AND SRC.Column1 IS NULL) AND
DST.Column2 = SRC.Column2 OR (DST.Column2 IS NULL AND SRC.Column2 IS NULL) AND
DST.Column3 = SRC.Column3 OR (DST.Column3 IS NULL AND SRC.Column3 IS NULL) AND
DST.Column4 = SRC.Column4 OR (DST.Column4 IS NULL AND SRC.Column4 IS NULL) AND
DST.Column5 = SRC.Column5 OR (DST.Column5 IS NULL AND SRC.Column5 IS NULL)

WHEN MATCHED THEN
        UPDATE SET COLUMN5 = 'A'
WHEN NOT MATCHED BY SOURCE THEN
        UPDATE SET Column5 = 'B'
WHEN NOT MATCHED THEN
        INSERT (Column1, Column2, Column3, Column4, Column5)
        VALUES (Column1, Column2, Column3, Column4, Column5) ; 
```

运行它两次以查看错误。

现在截断目标表

现在相同的查询，但只有那些有数据的列

```
MERGE dbo.tblDestination DST
USING (SELECT * FROM dbo.tblSource) SRC
ON DST.Column1 = SRC.Column1 OR (DST.Column1 IS NULL AND SRC.Column1 IS NULL) AND
DST.Column2 = SRC.Column2 OR (DST.Column2 IS NULL AND SRC.Column2 IS NULL) 

WHEN MATCHED THEN
        UPDATE SET COLUMN5 = 'A'
WHEN NOT MATCHED BY SOURCE THEN
        UPDATE SET Column5 = 'B'
WHEN NOT MATCHED THEN
        INSERT (Column1, Column2, Column3, Column4, Column5)
        VALUES (Column1, Column2, Column3, Column4, Column5) ; 
```

这工作得非常好，您可以多次运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:18:24.217

这是[Operator Precedence](http://msdn.microsoft.com/en-us/library/ms190276.aspx)的问题。

`DST.Column1 = SRC.Column1 OR (DST.Column1 IS NULL AND SRC.Column1 IS NULL) ....`将匹配所有行，`DST.Column1 = SRC.Column1`无论其他列中的值如何。

您需要在 OR:ed 条件周围添加一些括号以覆盖默认优先级。

```
MERGE dbo.tblDestination DST
USING (SELECT * FROM dbo.tblSource) SRC
ON (DST.Column1 = SRC.Column1 OR (DST.Column1 IS NULL AND SRC.Column1 IS NULL)) AND
   (DST.Column2 = SRC.Column2 OR (DST.Column2 IS NULL AND SRC.Column2 IS NULL)) AND
   (DST.Column3 = SRC.Column3 OR (DST.Column3 IS NULL AND SRC.Column3 IS NULL)) AND
   (DST.Column4 = SRC.Column4 OR (DST.Column4 IS NULL AND SRC.Column4 IS NULL)) AND
   (DST.Column5 = SRC.Column5 OR (DST.Column5 IS NULL AND SRC.Column5 IS NULL))

WHEN MATCHED THEN
        UPDATE SET COLUMN5 = 'A'
WHEN NOT MATCHED BY SOURCE THEN
        UPDATE SET Column5 = 'B'
WHEN NOT MATCHED THEN
        INSERT (Column1, Column2, Column3, Column4, Column5)
        VALUES (Column1, Column2, Column3, Column4, Column5) ; 
```

# symfony - 学说获取一些列和关联实体

> ID：14275158
> 
> 赞同：2
> 
> 时间：2013-01-11T09:31:38.207
> 
> 标签：symfony, doctrine-orm

我在这里尝试做一件非常简单的事情，但似乎我还无法获得 DQL。此外，当我在其中输入“DQL”时，谷歌决定通过返回“SQL”的结果来让我的一天变得艰难。

我有一个具有各种属性的 Article 实体。其中之一是关联的图像实体：

```
/**
 * @ORM\ManyToOne(targetEntity="Image", inversedBy="articles")
 */
protected $image; 
```

现在，为了防止延迟加载和它产生的不必要的加载，我想这样做得到**Article.title 和 Article.image**，仅此而已！只是文章的名称及其相关图像（整个图像实体）。

我怎么做？我尝试了我想出的所有方法，希望某些东西确实有效，并且我能够检查为什么有效而其他东西无效，但我就是无法让它发挥作用。

这是我想出的最理智的查询版本，前提是它可以工作：

```
public function getTitleBackground($id)
{
    $qb = $this->createQueryBuilder('a')
               ->select('a.title, a.id', 'i')
               ->leftJoin('a.image', 'i')
               ->where('a.id = :id')
               ->setParameter('id', $id);

    return $qb->getQuery()->getResult();
} 
```

这返回了我这个错误：

> 渲染模板期间引发异常（“[Semantical Error] line 0, col -1 near 'SELECT a.title,': Error: Cannot select entity through identify variables without selection at least one root entity alias.” ) 在第 13 行的 PIFlexBlogBu​​ndle:Admin/Page:commentEdit.html.twig

当我添加`a`我的“修复”时`->select()`，它会为我选择所有文章字段，这正是我试图逃避的。

*注意：我在 symfony2 存储库类中使用它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:45:14.500

感谢 AdrienBrault 的回答，我设法进行了查询。

```
public function getTitleBackground()
{
    // Pure DQL
    $q = $this->getEntityManager()->createQuery('SELECT partial a.{id,title} FROM PIFlexBlogBundle:Article a JOIN a.image i');

    // OOP building DQL through queryBuilder
    $qb = $this->createQueryBuilder('a')
               ->select('partial a.{id, title}')
               ->join('a.image', 'i');

    return $qb->getQuery()->getResult();
} 
```

通过查询生成器生成的原始 DQL 和 DQL 都给出相同的结果。

请注意，这将返回所有文章，要通过**id**获取，只需向它们添加 WHERE 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:39:14.440

您想使用 DQL 部分对象语法：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax)

# windows - 在 Windows 中设置 Ant

> ID：14275162
> 
> 赞同：0
> 
> 时间：2013-01-11T09:31:48.083
> 
> 标签：windows, ant

我正在尝试在我的 Windows 7 电脑中设置 ant。我已正确按照说明进行操作，一切正常。我什至设置了 ANT_HOME 变量。但是，当我在命令提示符下运行“ant”时，出现了错误。

```
Buildfile: build.xml does not exist!
Build failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:39:31.590

这是因为在您发出命令 ant 时，当前文件夹中不存在 build.xml 文件。通常，Ant 的构建文件 build.xml 位于项目的基目录。但是，您可以使用不同的文件名或使用放置在不同位置的构建文件。查看这样的教程，了解如何使用 ant：

[http://www.tutorialspoint.com/ant/ant_quick_guide.htm](http://www.tutorialspoint.com/ant/ant_quick_guide.htm)

# linux - 大页面的性能下降

> ID：14275170
> 
> 赞同：1
> 
> 时间：2013-01-11T09:32:15.270
> 
> 标签：linux, memory-management, jvm, benchmarking, huge-pages

我使用 Java 基准测试 (SPECJbb)，但观察到启用大页面（每页 2M）时性能会有所下降。我们的服务器是`NUMA`基于架构的，有 80 个内核（启用 HT 时为 160 个逻辑 CPU）和`260G`内存。

基准测试消耗大约`200G`内存，所以我在内核大页面池中分配了 200G 大。但性能`6%~8%`下降。我想我应该有一些性能提升，因为这个基准测试使用了 200G 内存。

我的问题是，在什么情况下，使用大页面会降低性能？我们的操作系统是`RHEL6.3`，我尝试了 H`otSpot JDK 1.6.38`和`1.6.37`，这两个版本我都发现了这种退化。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:57:40.210

大页面通常会带来高达 5% 的性能提升。

您应该检查是否正确分配了大页面：

*   查看`cat /proc/meminfo`并检查实际的大页面分配大小
*   你的堆有多大？你用过这个`-XX:+UseLargePages`选项吗？看到JVM设法使用大页面，如果有任何问题，JVM输出日志中会有警告

此外，LargePages + NUMA 架构可能存在问题。每个核心有多少内存？看：

*   [使用大页面](http://linux-hacks.blogspot.com/2009/06/using-large-pages.html)，他们报告由于 NUMA 设置，大页面性能下降了 6-8%。
*   [Linux 上的巨大页面和 NUMA 问题](http://blogs.amd.com/developer/2009/01/23/huge-pages-and-numa-issues-on-linux/)

# oracle - oracle 模式 - 在同一个数据库中共享

> ID：14275171
> 
> 赞同：0
> 
> 时间：2013-01-11T09:32:18.023
> 
> 标签：oracle

最近我导入了一个有多个用户的数据库，我在包中有很多编译错误，因为他们想访问其他用户的表，现在我希望有人帮助我制作所有表/程序......在不同的用户中可访问所有用户，请不要将所有用户都设为 DBA

公开所有用户数据的命令是什么？

主要有 3 个用户希望在自己内部获得可访问性

请注意，我使用的是 oracle 10 G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:38:31.160

所以，你想授予所有用户的对象权限，对吧？

这个答案应该对您有所帮助：[Grant Select on all Tables Owned By Specific User](https://stackoverflow.com/questions/187886/grant-select-on-all-tables-owned-by-specific-user)（答案仅涵盖表，但您可以将其扩展到视图、过程、同义词、函数、包......）

# fpdf - PHP Attach PDF mail function

> ID：14275172
> 
> 赞同：2
> 
> 时间：2013-01-11T09:32:20.080
> 
> 标签：fpdf, php

I have been trying to get php to send a email with a attached PDF, I have been looking everywhere and came across this post [Email PDF Attachment with PHP Using FPDF](https://stackoverflow.com/questions/4353271/email-pdf-attachment-with-php-using-fpdf).

I tried the solution but still no luck, does anyone know where I am going wrong? I get no errors or email?

Basically what this is doing is grabbing values from a form, putting them into a database then sending a email to them.

Any help would be greatly appreciated.

```
require('fpdf.php');
include("database.php");
require_once('recaptchalib.php');
$publickey = "6LcBYNsSAAAAAKkf5LwKkrhTVTVlxmOblcOn70-r ";
$privatekey = " 6LcBYNsSAAAAAEAa9wFZfyjInRmsWCxpj79Nvqm7";

// email stuff (change data below)
$to = "brentfrench@bigwavemedia.co.uk";
$from = "websupport@bigwavemedia.co.uk"; 
$subject = "send email with pdf attachment"; 
$message = "<p>Please see the attachment.</p>";

// PDF Create 
$pdf = new FPDF('P', 'pt', array(500,233));
$pdf->AddPage();
$pdf->SetFont('Arial','B',16);
$pdf->Cell(40,10,'Hello World!');

// a random hash will be necessary to send mixed content
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = PHP_EOL;

// attachment name
$filename = "test.pdf";

// encode data (puts attachment in proper format)
$pdfdoc = $pdf->Output("", "S");
$attachment = chunk_split(base64_encode($pdfdoc));

// main header
$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

// no more headers after this, we start the body! //
$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$body .= "This is a MIME encoded message.".$eol;

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= $message.$eol;

// attachment
$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

// form values
$firstname = $_POST['first'];
$lastname = $_POST['last'];
$postcode = md5($_POST['post']);
$email = $_POST['email'];

if ($_POST["recaptcha_response_field"]) {

    $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);
    if ($resp->is_valid) {

                            $check = mysql_query("SELECT * FROM voucher WHERE first='$firstname' AND last='$lastname'");
                            if(mysql_num_rows($check) != 0)
                            {
                                echo "<p>Voucher already in use.</p>";
                            }
                            else
                            {   
                                $insert = 'INSERT into voucher(first, last, postcode, email) VALUES ("'.$firstname.'","'.$lastname.'","'.$postcode.'","'.$email.'")';
                                mysql_query($insert);   
                                // send message
                                mail($to, $subject, $message, $headers) or die("Mail Error");                   
                                echo "<p>Voucher has been emailed, we looked foward to seeing you soon</p>";
                            }
 }
 else
 {
    echo "The anti spam code you entered is not correct.";
 } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:50:11.293

I would move your antispam check up to the top, but I got the code below to work. I changed your EOL tag to "\r\n" and also added another $eol at the end of the header. Also I changed $message to $body in the mail() call, as all the prep work was done for $body but it wasn't used.

```
// a random hash will be necessary to send mixed content
$separator = md5(time());

// carriage return type (we use a PHP end of line constant)
$eol = "\r\n";

// attachment name
$filename = "test.txt";

// encode data (puts attachment in proper format)
$attachment = chunk_split(base64_encode("I am text file"));

// main header
$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol;

// no more headers after this, we start the body! //
$body = "--".$separator.$eol;
$body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$body .= "This is a MIME encoded message.".$eol;

// message
$body .= "--".$separator.$eol;
$body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$body .= $message.$eol;

// attachment
$body .= "--".$separator.$eol;
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";

// form values
$firstname = $_POST['first'];
$lastname = $_POST['last'];
$postcode = md5($_POST['post']);
$email = $_POST['email'];

echo mail($to, $subject, $body, $headers) or die("Mail Error");                   
echo "<p>Voucher has been emailed, we looked foward to seeing you soon</p>\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:16:56.703

I have a mail class written. The attachment code is like:

```
$body .= "--".$separator."\r\n";
$body .= "Content-Disposition: attachment; filename=\"".$filename."\";\r\n";
$body .= "Content-Length: ".$filesize.";\r\n";
$body .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n";
$body .= "Content-Transfer-Encoding: base64\r\n\r\n";
$body .= $attachment."\r\n";
$body .= "--".$separator."--"; 
```

You see some differences: I've `Content-Length`, 2x `$filename` and `\r\n` as EOL.

I hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:04:00.200

There are so many possible break-points in this code, it's impossible to tell exactly what goes wrong. You'll need to do some debugging on your own, eg. using test outputs, to see how far the script gets. Also make sure you activate error reporting.

To send attachments an easier way might be using the [SwiftMailer library.](http://swiftmailer.org/)

# python - 从正在写入的视频 .avi 文件中读取

> ID：14275180
> 
> 赞同：0
> 
> 时间：2013-01-11T09:32:35.797
> 
> 标签：python, video, opencv, monitoring

使用 python 我想监视一个 .avi 原始 RGB 视频文件，该文件在录制时被另一个进程写入硬盘。所以我需要的是反复给我磁盘上视频文件的当前最后一帧（或第 n 个最后一帧）的东西。

我已经尝试使用 OpenCV，但是这只给了我一次当前的最后一帧，第一次到达最后一帧后对 QueryFrame 的任何进一步调用都不会返回更多图像。

所以本质上我正在寻找这样的东西[，](https://stackoverflow.com/questions/3290292/read-from-a-log-file-as-its-being-written-using-python)但对于 .avi 视频文件。此外，对我来说，跳过帧不是问题，每秒获得几个新帧就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:14:53.763

您必须`.avi`在每次循环迭代结束时关闭 -file，然后重新打开它。

编辑：艺术要求提供代码示例。这里是。

```
while True:
    with open("test.avi") as fh:
        get_last_frame()
    wait_or_do_whatever_you_want() 
```

我不知道 OP 如何使用 AVI 格式，但这不是问题的一部分。

# delphi - Delphi - 我可以将 InternetReadFile 用于本地文件吗？

> ID：14275183
> 
> 赞同：0
> 
> 时间：2013-01-11T09:32:37.453
> 
> 标签：delphi, file, download, local, wininet

我需要使用 WinInet 下载文件。

我想测试它，但是当我首先检查它时，它不适用于本地文件。（文件：//*）

这是在没有互联网的情况下测试程序或在互联网消失时进行调试所必需的......

首先，我需要检查文件大小以了解 HTTPRequest 的进度，然后我需要下载文件...

正如我所看到的，这些功能都不适用于本地文件......

但也许我错过了一些选项，或者我使用了错误的网址......比如......

```
file://localhost/C:/temp/AV.GIF 
```

有人知道吗：我可以将这些功能用于本地文件吗？湾。如果答案是肯定的，那么我需要如何更改我的代码？

这个例子展示了我如何使用 WinInet：

```
function TDDWIToolObject.GetFileSize(out Size: Int64): boolean;
var
    hInet: HINTERNET;
    hConnect: HINTERNET;
    hRequest : HINTERNET;
    lpdwBufferLength: DWORD;
    lpdwReserved    : DWORD;
    ServerName: string;
    Resource: string;
    FileSizeBuffer : array[0..32] of char;
    SizeCard : Cardinal;
begin
    ParseURL(Url, ServerName, Resource);
    Result := False;
    Size := 0;

    hInet := InternetOpen(PChar(_UserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
    if hInet=nil then begin
        FErrorCode := GetLastError;
        Exit;
    end;

    try

        hConnect := InternetConnect(hInet, PChar(ServerName), INTERNET_DEFAULT_HTTP_PORT, nil, nil, INTERNET_SERVICE_HTTP, 0, 0);
        if hConnect=nil then begin
            FErrorCode := GetLastError;
            Exit;
        end;

        try

            hRequest := HttpOpenRequest(hConnect, PChar('HEAD'), PChar(Resource), nil, nil, nil, 0, 0);
            if hRequest = nil then begin
                FErrorCode := GetLastError;
                Exit;
            end;

            try
                FillChar(FileSizeBuffer, SizeOf(FileSizeBuffer), #0);
                lpdwBufferLength := SizeOf(FileSizeBuffer);
                lpdwReserved :=0;
                if not HttpSendRequest(hRequest, nil, 0, nil, 0) then begin
                    FErrorCode := GetLastError;
                    Exit;
                end;

                if not HttpQueryInfo(
                    hRequest,
                    HTTP_QUERY_CONTENT_LENGTH,
                    @FileSizeBuffer, lpdwBufferLength, lpdwReserved) then begin

                    FErrorCode:=GetLastError;
                    Exit;
                end;

                Size := StrToInt64(StrPas(FileSizeBuffer));
                Result := True;

            finally
                InternetCloseHandle(hRequest);
            end;

        finally
            InternetCloseHandle(hConnect);
        end;

    finally
        InternetCloseHandle(hInet);
    end;

end;

function TDDWIToolObject.DownloadFile;
var
    hInet: HINTERNET;
    hFile: HINTERNET;
    pbuffer: Pointer;
    bytesRead: DWORD;
    Stm : TFileStream;
    TotalBytes : Int64;
    AbortIt : boolean;
begin
    Result := False;
    FErrorCode := -1;
    FAborted := False;
    hInet := InternetOpen(PChar(_UserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
    if hInet = nil
        then begin
            FErrorCode := GetLastError;
            Exit;
        end;
    try
        hFile := InternetOpenURL(hInet, PChar(URL), PChar(FHeaders), Length(FHeaders), 0, 0);
        if hFile = nil
            then begin
                FErrorCode := GetLastError;
                Exit;
            end;
        try
            Stm := TFileStream.Create(FN, fmCreate);
            try
                GetMem(pbuffer, FBufferSize);
                try
                    TotalBytes := 0; AbortIt := False;
                    while (not FAborted) do begin
                        if not InternetReadFile(hFile, pbuffer, FBufferSize, bytesRead) then begin
                            FErrorCode := GetLastError;
                            Exit;
                        end;
                        if bytesRead > 0 then begin
                            Stm.WriteBuffer(pbuffer^, bytesRead);
                            if Assigned(FOnBytesArrived)
                                then begin
                                    inc(TotalBytes, bytesRead);
                                    FOnBytesArrived(Self, TotalBytes, AbortIt);
                                    if AbortIt
                                        then Abort;
                                end;
                        end else begin
                            break;
                        end;
                    end;
                finally
                    FreeMem(pbuffer);
                end;
                if not FAborted
                    then Result := True;
            finally
                Stm.Free;
            end;
        finally
            InternetCloseHandle(hFile);
        end;
    finally
        InternetCloseHandle(hInet);
    end;
end; 
```

感谢您提供的每一个信息、链接、文档、评论家...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:47:22.110

您不只是使用一些与互联网相关的功能。您使用即`HttpOpenRequest`-HTTP。顾名思义，这只适用于 HTTP 或 HTTP/SSL 协议。它甚至不应该适用于其他互联网协议来获取文件，如 FTP、BitTorrent、Gnutella 等。

file:// 是 URL 协议名称，它的确切含义是“不要上网，而是打开本地文件”，因此与互联网相关的功能可能无法正常工作。

当然，没有办法通过它发出 GET 或 HEAD 或其他仅限 HTTP 的命令。

更重要的是，它无法帮助您调试与 HTTP 相关的错误，因为要重现这些错误将需要重复正确的 HTTP 流量序列，有时甚至可能使用给定的远程服务器版本和配置。

安装一些本地 http 服务器，如 TinyWeb、nginx 或 lighttpd - 并进行调试。

Synapse 和 mORMot 库中还有 HTTP 服务器演示，因此您甚至可以制作自己的服务器进行调试。

# mongodb - 为什么 mongodb $all 运算符使用所有子数组进行查询？

> ID：14275188
> 
> 赞同：0
> 
> 时间：2013-01-11T09:32:45.453
> 
> 标签：mongodb

我有一些结构如下的测试文档：

```
{
        "foo" : {
                "bar" : [
                        {
                                "a" : [
                                        "1",
                                        "4"
                                ]
                        },
                        {
                                "a" : [
                                        "1",
                                        "7"
                                ]
                        }
                ]
        }
} 
```

现在我尝试获取所有这些文档，其中至少一个“a”数组包含字符串“1”、“4”和“7”。（注意：我知道应该找不到这个示例文档！）

现在我像这样查询数据库：

```
db.test.find({"foo.bar.a": {$all: ["1","4","7"]}}) 
```

在我看来，它应该告诉我没有找到文档，但它找到了示例文档，因为“1”和“4”包含在第一个“a”数组中，“7”包含在第二个“a”数组中.

这是 $all 运算符的错误，还是我的查询错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T05:14:43.233

这是你需要的吗？一个元素，其“a”数组包含所有指定值。

db.test.find({"foo.bar": {$elemMatch: {"a": {$all: ["1", "4", "7"]}}}})

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:18:13.663

您可以使用MongoDB 2.2+ 中的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)`$unwind`将`foo.bar.a`数组转换为将按预期匹配的文档流。

示例查询：

```
db.test.aggregate(
    // Could add a $match here to limit the number of relevant documents

    // Create a stream of documents from the foo.bar array
    { $unwind: '$foo.bar' },

    // Find arrays that have the desired elements
    { $match: {
        'foo.bar.a': { $all: ["1","4","7"] }
    }},

    // Re-group by original document _id with matching array elements
    { $group: {
        _id: "$_id",
        'a': { $push: '$foo.bar.a' }
    }}
) 
```

样本结果：

```
{
    "result" : [
        {
            "_id" : ObjectId("50f08b392aa92c6de18aa70a"),
            "a" : [
                [
                    "7",
                    "4",
                    "1"
                ]
            ]
        },
        {
            "_id" : ObjectId("50f08b322aa92c6de18aa709"),
            "a" : [
                [
                    "1",
                    "4",
                    "7"
                ]
            ]
        }
    ],
    "ok" : 1
} 
```

# jquery - 我在jQuery中调用一个函数，使用'enter'事件以及'blur'事件是否可以缩短它？

> ID：14275192
> 
> 赞同：0
> 
> 时间：2013-01-11T09:32:51.983
> 
> 标签：jquery

当我的用户模糊或输入文本框时，我想触发一个功能。我编写了这段代码来实现它：

```
text:function(input,el){
    var textCheck = function(){
        var value = $.trim(el.val());
        if(!value){
             el.addClass('error');
        }else{
             el.removeClass('error');
        }
    }

    $(el).on('blur click keyup', textCheck); //calling the function
    $(el).on('keyup', function(e){ ////calling the function again 
        if(e.keyCode == 13){
             textCheck();
        }
   });
   //instead of calling 2 times, how can i put together as single call?
} 
```

我可以缩短绑定事件的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:48:09.817

是的！您可以使用`.bind()`除事件处理程序映射之外的 jQuery 方法：

```
$(el).bind({
    "blur click keyup": textCheck,
    "keyup": function(e) {
        if(e.keyCode == 13) {
            textCheck();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:43:46.703

可以这样做：{但找不到任何目的}

```
text:function(input,el){
    var textCheck = function(e){
        if(e && e.type == "keyup" && e.keyCode == 13)
                        textCheck();
        var value = $.trim(el.val());
        if(!value){
             el.addClass('error');
        }else{
             el.removeClass('error');
        }
    }

    $(el).on('blur click keyup', textCheck); //calling the function

} 
```

# linux - 行号后的下一个空白行的Grep

> ID：14275200
> 
> 赞同：1
> 
> 时间：2013-01-11T09:33:38.950
> 
> 标签：linux, shell, sed, grep

我有一个大文件，其中包含不同制表符分隔数据的表格。不同的表由空行分隔。

我有一个特定表开始的行号，我需要检索整个表。

如何使用 grep （或类似的东西）在特定行号之后获取下一个空白行的行号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:05:57.907

用于`sed`此，这应该可以解决问题：

```
sed -n '1,/^\s*$/p' file 
```

只需替换逗号前的第一个数字，在本例`1`中为行号，演示从给定的行号打印每个表：

```
$ cat file
one
two
three

five
six
seven

nine
ten
eleven

$ sed -n '1,/^\s*$/p' file
one
two
three

$ sed -n '5,/^\s*$/p' file
five
six
seven

$ sed -n '9,/^\s*$/p' file
nine
ten
eleven 
```

使用`-n`选项来关闭每一行的默认打印，并且`p`标志`sed`从行号打印到与正则表达式匹配的第一行，其中：

```
^     # Matches the start of the line
\s*   # Matches zero or more whitespace characters
$     # Matches the end of the line 
```

使用`sed -n 'A,Bp'`where`A`和`B`可以是行号或正则表达式的格式，您可以轻松地打印文件的子部分。

用 do 只打印下一个空行的行号`sed`：

```
$ sed -n '1,/^\s*$/{=}' file | tail -1
4

$ sed -n '5,/^\s*$/{=}' file | tail -1
8

$ sed -n '9,/^\s*$/{=}' file | tail -1
12 
```

或者只是打印所有空白行的位置

```
$ sed -n '/^\s*$/{=}' file
4
8
12 
```

* * *

获取下一个空白行号`awk`不需要使用`tail`：

```
$ awk 'NR>=1 && /^\s*$/{print NR;exit}' file
4

$ awk 'NR>=5 && /^\s*$/{print NR;exit}' file
8

$ awk 'NR>=9 && /^\s*$/{print NR;exit}' file
12

$ awk '/^\s*$/{print NR}' file
4
8
12 
```

如果它让您更清楚，您可以`awk`使用 using传递一个变量`-v`

```
$ awk -v start=1 'NR>=start && /^\s*$/{print NR;exit}' file
4

$ awk -v start=5 'NR>=start && /^\s*$/{print NR;exit}' file
8

$ awk -v start=9 'NR>=start && /^\s*$/{print NR;exit}' file
12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:14:24.807

Perl 使这变得简单。要将第 31 行中的所有行提取到*some_file*中的下一个空白行：

```
$ perl -wne 'print if 31 .. /^$/' some_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:25:45.823

使用 awk 的一种方法：

```
awk -vs=$sta '{ok=NR>=s}ok&&!$0{exit;}ok&&$0' 
```

`$sta`是一个变量，它存储起始行号。如果我们用起始行 nr=5 的 sudo_O 的输入示例进行测试，它看起来像：

```
kent$  sta=5

kent$  echo "1
2
3

5
6
7

9
10
11"|awk -vs=$sta '{ok=NR>=s}ok&&!$0{exit;}ok&&$0'
5
6
7 
```

注意 sed 的地址会**包含**边界，也就是说，目标表后面的空行也会被打印出来。这个 awk one-liner 不会打印它。好吧，这取决于您想要输出的内容。

**编辑**以防您只想获取下一个空行号

```
awk -vs=$sta 'NR>=s&&!$0{print NR;exit;}' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:43:50.367

在下面的命令中，5 是您已知的表行号

```
perl -lne 'exit if(/^$/ && $.>5);if($.>=5){print}' your_file 
```

# ruby - 获取 Facebook 好友电话号码

> ID：14275202
> 
> 赞同：-1
> 
> 时间：2013-01-11T09:33:44.890
> 
> 标签：ruby, facebook, facebook-graph-api, koala

目前，我使用 ruby​​ gem`Koala`并且可以获得用户朋友列表，但我找不到任何方法从朋友列表中获取电话号码。这甚至可能吗？在 facebook 文档中没有找到任何关于此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:09:43.840

当前用户或他们的朋友都无法通过 Graph API 访问电话信息。

您可以在此处查看浏览 API：[Facebook API 参考](https://developers.facebook.com/docs/reference/api/user/)

# android - 侦听器没有在 android 中调用 facebook sdk

> ID：14275204
> 
> 赞同：1
> 
> 时间：2013-01-11T09:33:52.483
> 
> 标签：android, facebook, listener

我正在通过单点登录将 facebook sdk**集成到我的 android 应用程序中。**

如果安装了 Facebook 应用程序，则调用但问题是在授权后我`listener`没有调用。

这是我的代码。

```
facebook.authorize(this, new String[] { "publish_stream", "user_photos", "email" }, 20003, 
            createAuthorizeFacebookDialogListener(facebook,2003)); 
```

这是`listener`

```
private DialogListener createAuthorizeFacebookDialogListener(final Facebook facebook, final int facebookAuthorizeCompleteId)
    {
        DialogListener listener = new DialogListener() {
            @Override
            public void onComplete(Bundle values)
            {
                saveCredentials(facebook);
                showToast("Authentication with Facebook");
                if (messageToPost != null) {
                    postToWall(messageToPost);
                }
            }
            @Override
            public void onFacebookError(FacebookError e)
            {
                showToast("Authentication with Facebook failed!");
                finish();
            }
            @Override
            public void onError(DialogError e)
            {
                showToast("Authentication with Facebook failed!");
                finish();
            }
            @Override
            public void onCancel() {

                showToast("Authentication with Facebook cancelled!");
                finish();
            }
        };
        return listener;
    } 
```

授权应用程序后控制权不会返回。

请帮助我。

# javascript - tinyMCE 在全屏模式下默认显示 HTML 代码

> ID：14275208
> 
> 赞同：2
> 
> 时间：2013-01-11T09:34:14.273
> 
> 标签：javascript, html, api, editor, tinymce

当我单击 tinyMCE 上的全屏按钮时，它会在新窗口中打开。

我现在想要的只是在这个新窗口中全屏显示 tinyMCE，默认情况下处于 HTML 源代码模式。

另外，我希望“html代码编辑”窗口全屏显示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:08:59.303

尝试按照这个[小提琴](http://fiddle.tinymce.com/K8caab)默认显示 HTML 代码

```
In order to implement it in FullScreen Plugin go to 
plugins/fullscreen/fullscreen.htm 
```

打开 fullscreen.htm 并将 onload 事件添加到正文中

```
onload="setTimeout(tinyMCE.activeEditor.execCommand('mceCodeEditor'),200)" 
```

让“html 代码编辑”全屏显示

```
Go to themes/advanced/editor_template.js 
```

定位

```
width : parseInt(ed.getParam("theme_advanced_source_editor_width", 720)),
height : parseInt(ed.getParam("theme_advanced_source_editor_height", 580)),

replace 720 and 580 by screen.availWidth, screen.availHeight respectively.

Also clear your browser cache. 
```

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:31:28.350

全屏按钮会将 tinymce 编辑器放大到用户的全屏尺寸。显示源代码是您已经发现的另一个操作 - html 代码编辑。

要获得全屏大小，您必须调整 tinymce html 源代码编辑器的弹出窗口大小。这可以使用以下 tinymce 配置参数来完成

*   [theme_advanced_source_editor_height](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_source_editor_height)
*   [theme_advanced_source_editor_width](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_source_editor_width)

不幸的是，您只能定义一个固定的宽度和高度。没有将代码弹出窗口放大到全屏大小的选项。

# assembly - 在汇编中添加 2 个数字

> ID：14275209
> 
> 赞同：-4
> 
> 时间：2013-01-11T09:34:15.163
> 
> 标签：assembly, i386

我想添加两个数字，但有一个问题我找不到，请帮助我！

谢谢

```
.model small
.stack
.data

        data1 dw 6
        data2 dw 8
.code

main:

mov ax,@data
mov ds,ax
mov ax, data1
add ax, data2
add dx,ax
sub dx,'0'
mov ah,09h
int 21h
mov ah,1
int 21h

end main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:43:59.680

`dx`未初始化并在 处包含垃圾`add dx, ax`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:57:45.810

 `````
mov ah, 9
int 21h 
```` 

`这将打印一个由 . 指向的以 $ 结尾的字符串`dx`。我们目前还不太清楚其中的内容`dx`，但它极不可能指向代表您的号码的以 $ 结尾的字符串！`

 `您在添加这两个数字方面做得很好。`ax`应保持 14 或 0Eh。`al`这是在... 中打印两位数字的“技巧”

 `````
; split the number in al
; "tens" place in ah, "ones" place in al
aam
; convert both digits from a "number"
; to ascii characters representing the numbers
add ax, 3030h
; we want to print leftmost character first
; so swap 'em
xchg al, ah
; print al
int 29h
; swap 'em back
xchg al, ah
; print al
int 29h
; please exit cleanly! 
````  `那是“从记忆中”变得非常不稳定，所以可能是错误的。我怀疑这是否是您“应该”这样做的方式`int 29h`被记录为“供内部使用”，但我上次做dos时曾经工作过。祝你好运！````

# php - usepager false 在运行时 flexigrid 上不起作用

> ID：14275211
> 
> 赞同：0
> 
> 时间：2013-01-11T09:34:20.493
> 
> 标签：php, flexigrid

我正在将 flexigrid 与 PHP 一起使用，我想要的是在只有 1 页时隐藏寻呼机，如果页面超过 1 则显示寻呼机。我认为如果我可以在运行时隐藏或显示寻呼机，这可以解决我试过下面的代码但它不工作

IE`$("#div").flexReload({usepager:true});`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:53:52.783

尝试

```
$('#div')
    .flexOptions({ usepager:true })
    .flexReload(); 
```

# php - 在 webroot 文件中读取 Config 变量

> ID：14275217
> 
> 赞同：0
> 
> 时间：2013-01-11T09:34:42.870
> 
> 标签：php, cakephp, cakephp-1.3, app-config

在我的应用程序中，我已经在 core.php 中设置了一个类似于 config 的变量，例如

**核心.php**

```
$websetting = array(
    'mydomain' => $_SERVER['HTTP_HOST'],
    'adminEmail' => 'admin@xyz.com',
    'supportEmail' => 'support@xyz.com',
    'infoEmail' => 'info@xyz.com',
    'accountEmail' => 'accounts@xyz.com',
    'facebook' => 'facebook.com/xyz',
    'twitter' => 'twitter.com/@xyz'
);

Configure::write('WebsiteSetting', $websetting); 
```

现在我在 webroot 的 cj 中创建了一个 morning.php 文件。所以我的路径是这样的：`webroot/cj/morning.php`

在 Morning.php 中，我尝试阅读`Configure::read('WebsiteSetting.mydomain')`.

```
<?php
echo Configure::read('WebsiteSetting.mydomain');
?> 
```

发生了什么 ：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:21:43.637

为什么要这么做？您的 webroot 中的 Morning.php 文件绝对没有关于蛋糕的信息。您需要复制 index.php 并对其进行修改（删除调度），以便在尝试使用像配置这样的蛋糕功能之前包含所有蛋糕的东西。

你到底想达到什么目的？使用普通的控制器/动作的东西来创建你的页面——不管它是什么上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:37:24.997

在您的控制器中为您的视图设置一个变量...

控制器：

```
$this->set('mydomain', Configure::read('WebsiteSetting.mydomain')); 
```

看法：

```
echo $mydomain; 
```

如果在布局中使用，则从 beforeFilter 或 beforeRender 中设置变量

# java - How to figure out which JPanel in a JScrollpane is being seen?

> ID：14275219
> 
> 赞同：1
> 
> 时间：2013-01-11T09:34:44.717
> 
> 标签：java, swing, jscrollpane

I have a `JScrollpane` which contains a big `JPanel` and the `JPanel` it's self contains 3 `JPanel`s. each of those 3 `JPanels` has the same size as the `JScrollpane`. the user can not scroll. he can clicks on a button and sees the next or previous `JPanel` (only 1 panel can bee seen at a moment and he can not see a part of one panel and part of other...).

How can I understand which panel is being seen right now?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:39:46.097

There is a method `isShowing()` which Determines whether this component is showing on screen. This means that the component must be visible, and it must be in a container that is visible and showing. More [here](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#isShowing()).

Example:

```
JPanel p= new JPanel();

if(p.isShowing()) {

} 
```

Have a look at [this](https://stackoverflow.com/questions/11968780/difference-between-jcomponent-isshowing-and-isdisplayable) discussion it will help you in a way. You can even use a [ComponentListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ComponentListener.html) to listen to about which is being visible. Know more about it [here](https://stackoverflow.com/questions/10880326/jpanel-which-one-of-listeners-is-proper-for-visibility-is-changed).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:45:09.477

You can request currently shown component from JScrollPane.

```
scrollPaneObject.getViewPort().getView(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T13:46:02.047

Assuming the setup as outlined in my comment to your question, the basic approach is to compare the parent's (the component that contains the 3 panels) visibleRect with its children's bounds. Something like:

```
final JComponent parent = new JPanel(); // new PageScrollable();
parent.setLayout(new BoxLayout(parent, BoxLayout.PAGE_AXIS));
Color[] color = new Color[] {Color.YELLOW, Color.RED, Color.GREEN}; 
for (int i = 0; i < color.length; i++) {
    JTable table = new JTable(10, 5);
    // color it to see some difference
    table.setBackground(color[i]);
    // set a name for logging
    table.setName("table at: " + i);
    parent.add(table);
}

JScrollPane scrollPane = new JScrollPane(parent);
Action visible = new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent e) {
        Rectangle rect = parent.getVisibleRect();
        for (int i = 0; i < parent.getComponentCount(); i++) {
            // implement logic as needed to compare the parent's visible rect
            // with the children's bounds
            if (rect.intersects(parent.getComponent(i).getBounds())) {
                System.out.println("found: " + parent.getComponent(i).getName());
            }
        }
    }

};
frame.add(scrollPane); 
frame.add(new JButton(visible), BorderLayout.SOUTH); 
```

As an aside: to fine-tune scrolling behaviour you might consider a custom panel which implements Scrollable, something like:

```
/**
 * Implement a panel of type Scrollable to fine-tune its scrolling behaviour.
 * This implements the prefScrollableSize to the prefSize of the first child
 * and both block/unit increment to the height of the prefScrollable.
 */
public static class PageScrollable extends JPanel implements Scrollable {

    @Override
    public Dimension getPreferredScrollableViewportSize() {
        if (getComponentCount() > 0) {
            return getComponent(0).getPreferredSize();
        }
        return super.getPreferredSize();
    }

    @Override
    public int getScrollableUnitIncrement(Rectangle visibleRect,
            int orientation, int direction) {
        return getPreferredScrollableViewportSize().height;
    }

    @Override
    public int getScrollableBlockIncrement(Rectangle visibleRect,
            int orientation, int direction) {
        return getPreferredScrollableViewportSize().height;
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return false;
    }

    @Override
    public boolean getScrollableTracksViewportHeight() {
        return false;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:26:09.467

> the user can not scroll. he can clicks on a button and sees the next or previous JPanel (only 1 panel can bee seen at a moment and he can not see a part of one panel and part of other

You should be using a JPanel with a CardLayout, not a JScrollPane.

See [http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# bash - 陷阱火灾后退出

> ID：14275224
> 
> 赞同：11
> 
> 时间：2013-01-11T09:35:03.717
> 
> 标签：bash, shell-trap

拿这个脚本

```
#!/bin/sh

fd ()
{
  echo Hello world
  exit
}

trap fd EXIT INT

for g in {1..5}
do
  echo foo
  sleep 1
done 
```

我想`fd`触发一次，无论是从 Control-C 还是脚本正常退出。但是，如果您按 Control-C，它将运行两次。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T09:42:41.770

做级联陷阱。`exit 127`将运行`EXIT`陷阱并将退出代码设置为 127，所以你可以说

```
#!/bin/sh

fd () {
  echo Hello world
  # No explicit exit here!
}

trap fd EXIT
trap 'exit 127' INT 
```

我记得在为您的问题苦苦挣扎多年后，从其他人的脚本中学到了这一点。在那之后，我注意到一些教程确实解释了这种技术。但它没有在例如 Bash 手册页恕我直言中清楚地记录。（或者不是我需要它的时候。也许有些事情在 15 年内不会改变...... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:44:52.127

灵感来自[**pst 的评论**](https://stackoverflow.com/questions/14275224/exit-after-trap-fires#comment19818269_14275224)

```
fd ()
{
  echo Hello world
  trap - EXIT INT
  exit
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:15:26.043

重新定义陷阱默认值呢？

```
#!/bin/sh

fd () {
   echo Hello world
   trap - EXIT
   exit 127
}

trap fd INT EXIT 
```

# html - 直接链接到引导选项卡而不滚动到锚点

> ID：14275226
> 
> 赞同：3
> 
> 时间：2013-01-11T09:35:16.510
> 
> 标签：html, twitter-bootstrap, hyperlink, scroll, anchor

我有一个这样的引导选项卡 - [http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

一切正常，但我想链接每个选项卡，以便我可以直接访问它

如果我使用锚点（#mytab）链接，页面滚动到该锚点（用户会错过有关选项卡的所有内容）

有没有办法在不滚动的情况下创建指向某个选项卡的直接链接（通过锚点或其他方法）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T10:11:32.600

您想直接链接到一个选项卡，然后显示该选项卡下的内容吗？

然后你需要在你的应用程序中有某种路由。您可以使用[http://sammyjs.org/docs/routes](http://sammyjs.org/docs/routes)来做到这一点。在回调中，您应该能够显示正确的选项卡内容、防止滚动等。

# cocoa-touch - 导航类似于 AngularJS webapp 中的 UINavigationController

> ID：14275227
> 
> 赞同：0
> 
> 时间：2013-01-11T09:35:18.963
> 
> 标签：cocoa-touch, angularjs

我希望我的 webapp 的行为与使用[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)的其他 iPhone 应用程序一样。

我希望从两个视图开始：根视图和导航栏。

当应该显示一个新视图时，它将被放在当前视图之上，只是隐藏以前的视图。

导航栏应该显示当前视图的标题，以及一个后退按钮（除非是根视图）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:03:36.367

我建议你看看[ng-view](http://docs.angularjs.org/api/ng.directive%3angView)。它使您可以轻松地在视图之间切换。另请查看[$location](http://docs.angularjs.org/guide/dev_guide.services.%24location)服务。它支持浏览器的前进/后退按钮。

如果你想要更多的控制，或者你不希望浏览器的地址栏在你切换视图时改变，你可以手动连接[ng-show](http://docs.angularjs.org/api/ng.directive%3angShow)和/或[ng-hide](http://docs.angularjs.org/api/ng.directive%3angHide)来显示/隐藏 DOM 的部分。使用 model/$scope 属性来跟踪当前视图和以前的视图。这是一个展示如何开始的[小提琴。](http://jsfiddle.net/mrajcok/sStUf/)例如，导航栏可能看起来像这样：

```
<button ng-hide="view == 'root'" ng-click="goBack()">< {{previousView}}</button> 
```

并切换视图：

```
<div ng-show="view == 'view1'">View 1
   <div><a ng-click="changeView('view1.1')">view 1.1</a>
   </div>
</div> 
```

# matlab - Matlab中稀疏索引中递增值的合适数据结构实现

> ID：14275228
> 
> 赞同：2
> 
> 时间：2013-01-11T09:35:23.547
> 
> 标签：matlab, data-structures, binary-tree, implementation, sparse-matrix

目前，我正在使用大小为 1 x H 的单元格 C，其中 H 是一个非常大的数字。该单元主要用于在 O(1) 时间内快速存储和增加非常稀疏索引中的一些值。例如，

```
H = 10000000;
C = cell(1, H);
...
for i = 1:last

    % all values of someIndex(i) are values from 1 to H, unsorted, and contains repeating values.

    C{ someIndex(i) } = C{ someIndex(i) } + someValues(i);

end
... 
```

只会使用单元格 C 中的一个很小的索引——我看到，大多数时候，大约是整个事情的 1-10%。起初，对于较小规模的数据库，实现是好的，但我会选择更大的数据库，H 将几乎呈指数增长。因此，这种幼稚的实现将不再有效。

我也在考虑类似的东西，而不是使用单元格，而是使用数组以这种方式存储每个索引和值：

假设我们检测到一个新索引：

```
IndexArray(size(IndexArray, 2) + 1) = someIndex(i);
ValueArray(size(ValueArray, 2) + 1) = someValue(i); 
```

假设我们检测到一个旧索引：（当然，我们需要扫描整个 IndexArray 并查看是否存在这样的旧索引）

```
ValueArray( detectOldIndex(i) ) = ValueArray( detectOldIndex(i) ) + someValue(i); 
```

但是，这也存在一个问题。随着越来越多的索引增长，扫描整个 IndexArray 将花费越来越多的时间。这是 O(N)。

当然，对于这样的事情，我们肯定要使用 Trees，但是，在 Matlab 中，我们没有有效的 Tree 结构。我可以考虑在嵌套单元格中使用嵌套单元格。但是实现可能非常难看。

所以如果我要在 Matlab 中做这样的事情，我更快的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:48:34.990

你考虑过使用[`Map container`](http://www.mathworks.com/help/matlab/map-containers.html)吗？

`Map container`基本上是一个哈希表。因此，在一个巨大的域上映射一小组“活动”索引应该是相当有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:17:26.580

如果你想做得很大，那么使用数据库可能是值得的。它还有额外的好处，您不必将完整的数据保存在内存中。

[mksqlite](http://mksqlite.berlios.de/)或[mym](http://www.mathworks.com/matlabcentral/linkexchange/links/1313-mysql-connector-mym)与 mysql 一起使用很容易。

# css - JQueryMobile Listview边框加倍

> ID：14275229
> 
> 赞同：0
> 
> 时间：2013-01-11T09:35:24.653
> 
> 标签：css, listview, jquery-mobile, border

我正在研究 JqueryMobile listview，在此之前我遇到了一个问题，即有一个微小的间隙导致边框底部和边框顶部显示为 2px 宽度的边框而不是 1px。我设法修复它

```
margin-bottom: -1px !important; 
```

我的目标是使其成为边框底部和边框顶部之间的**虚线。**感谢我的html代码

```
<div data-role="fieldcontain">
    <ul data-theme="f" data-role="listview" data-inset="false" id="listview"></ul>
</div> 
```

我的 CSS

```
.ui-btn-up-f {
    border: 1px solid #bbb /*{f-bup-border}*/;
    margin-bottom: -1px !important;
    /* border-bottom: 1px dashed #bbb; */
    background: #ffffff /*{f-bup-background-color}*/;
    font-weight: normal;
    color: #333 /*{f-bup-color}*/;
    text-shadow: 0 /*{f-bup-shadow-x}*/ 1px /*{f-bup-shadow-y}*/ 0 /*{f-bup-shadow-radius}*/ #fff /*{f-bup-shadow-color}*/;
    background-image: -webkit-gradient(linear, left top, left bottom, from( #ffffff /*{f-bup-background-start}*/), to( #ffffff /*{f-bup-background-end}*/)); /* Saf4+, Chrome */
    background-image: -webkit-linear-gradient( #ffffff /*{f-bup-background-start}*/, #ffffff /*{f-bup-background-end}*/); /* Chrome 10+, Saf5.1+ */
    background-image:    -moz-linear-gradient( #ffffff /*{f-bup-background-start}*/, #ffffff /*{f-bup-background-end}*/); /* FF3.6 */
    background-image:     -ms-linear-gradient( #ffffff /*{f-bup-background-start}*/, #ffffff /*{f-bup-background-end}*/); /* IE10 */
    background-image:      -o-linear-gradient( #ffffff /*{f-bup-background-start}*/, #ffffff /*{f-bup-background-end}*/); /* Opera 11.10+ */
    background-image:         linear-gradient( #ffffff /*{f-bup-background-start}*/, #ffffff /*{f-bup-background-end}*/);
} 
```

抱歉，我没有发布图片的权限，我将其替换为链接 [列表视图图片](https://docs.google.com/file/d/0B8pQuTUbR9h8TnpnN1JQRjM3aTg/edit)

# android - 带有 simpleAdapter 和 onItemClickListener 的 AlertDialog、ListView

> ID：14275230
> 
> 赞同：2
> 
> 时间：2013-01-11T09:35:28.357
> 
> 标签：android, listview, android-alertdialog, onitemclicklistener, simpleadapter

我有一个带有 ListView 的 AlertDialog，但我无法理解如何获取检查项目...在 AlertDialog 中，我在代码中创建视图。请解决我的问题。

警报对话框。工作正确：

```
 public class MyDialog {
......
AlertDialog.Builder adb;
private Dialog onCreateDialog(int id, Context context) {
    workWithDB = new WorkWithDB(context);
    adb = new AlertDialog.Builder(context);
    switch (id) {
    case ActivityMain.DIALOG_ADD_BUTTONS:
            adb.setTitle(R.string.app_name);
            adb.setIcon(android.R.drawable.ic_input_add);
            adb.setPositiveButton(R.string.dialogAddBtn, myClickListener);
            adb.setNeutralButton(R.string.dialogConfirmChangesCancel, myClickListener);
            adb.setView(addBtnView());
        return adb.create();
    }
      return onCreateDialog(id, context);
    }
OnClickListener myClickListener = new OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
    //  Main.editor.putBoolean("continue", true);
    //  Main.editor.commit();
        switch (id) {
        case ActivityMain.DIALOG_ADD_BUTTONS:
             // some code
            break;
        }

    }
  };
  public void showDialog(int id, Context context /* some parametres*/){
        onCreateDialog(id, context);
        adb.show();       
  }
  protected void setViewForAddBtnView(ListView lstView){
      this.lstView = lstView;
  }
  protected View addBtnView(){
      LinearLayout llMain = new LinearLayout(context);
      RadioGroup rGroupWhereAddBtns = new RadioGroup(context);
      RadioButton top = new RadioButton(context), bottom = new RadioButton(context);
      top.setText(context.getResources().getString(R.string.addBtnTop));
      bottom.setText(context.getResources().getString(R.string.addBtnBottom));  
      rGroupWhereAddBtns.setOrientation(RadioGroup.HORIZONTAL);
      rGroupWhereAddBtns.addView(top);
      rGroupWhereAddBtns.addView(bottom);

      llMain.setOrientation(LinearLayout.VERTICAL);
      llMain.addView((new MyMsg()).view(context, "   " + message, Color.BLACK,    ActivityMain.messageTextSize + 2, Gravity.LEFT));       
      llMain.addView(rGroupWhereAddBtns);
      llMain.addView(lstView);
      return llMain;
  }

     } 
```

Main Class 中的一些方法（扩展 Activity）：

```
 private ListView createListViewForAddBtnDialog(){
    LinkedHashMap<String, String> mapOfBtn;
    SimpleAdapter adapterAddBtnDialog;
    ListView lstViewBtnAdd = new ListView(this);
    SQLiteDatabase dbBtn = calcDbHelper.getReadableDatabase();          
    Cursor cc = dbBtn.query(CalcDBHelper.TABLE_BUTTONS, null, "profileName = 'unnamed' and orientation = '"+ orient + "' and canBeAdded = 1", null, null, null, null);          
    //try {
    if (cc.moveToFirst()){
        //(new WorkWithDB(context)).showButtonsTable();
        Log.d(ActivityMain.LOG_TAG, "cursor count = " + cc.getCount());
        listOfBtn = new ArrayList<Map<String,String>>(cc.getCount());
        int btnIdIndex = cc.getColumnIndex(CalcDBHelper.BTN_ID);
        do{
            mapOfBtn = new LinkedHashMap<String, String>();
            mapOfBtn.put(ActivityMain.btnId, getBtn.getBtnTextViaId(cc.getInt(btnIdIndex)));
            listOfBtn.add(mapOfBtn);
        } while(cc.moveToNext());
    }
    for(int i = 0; i < listOfBtn.size(); i++){
        Log.d(ActivityMain.LOG_TAG, "pos " + i + " text - " + listOfBtn.get(i));
    }
    adapterAddBtnDialog = new SimpleAdapter(this, listOfBtn, R.layout.dialog_add_btn_item, FROM, TO);
    lstViewBtnAdd.setAdapter(adapterAddBtnDialog); 
    lstViewBtnAdd.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Log.d(ActivityMain.LOG_TAG, "!!!!!!! - "); // never call :(((
        }
    });
    return lstViewBtnAdd;
} 
```

我这样称呼我的 AlertDialog：

```
 myDialog.setViewForAddBtnView(createListViewForAddBtnDialog());
        myDialog.showDialog(DIALOG_ADD_BUTTONS, getResources().getString(R.string.dialogAddBtnWhereToAdd), this, this, null, orient); 
```

它看起来像

[https://www.dropbox.com/s/r2hqb9a9nt9g4hm/alertDlg.png](https://www.dropbox.com/s/r2hqb9a9nt9g4hm/alertDlg.png)（无法附加图片）

但是当我尝试选择任何元素（复选框）时 - 没有任何反应......请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:53:55.477

您应该为每个复选框添加侦听器。对于 textView 作为 listview 上的列表项侦听器有效，但不适用于复选框。

# grid - 在没有明确选择的情况下对剑道网格进行排序

> ID：14275231
> 
> 赞同：0
> 
> 时间：2013-01-11T09:35:34.030
> 
> 标签：grid, kendo-ui

对于剑道网格，当我单击列标题进行排序时，它会清除先前选择的记录的选择。有没有一个选项可以让我在不清除选择的情况下选择排序。因为如果记录所选行并在对大量数据进行排序后重新选择它，则需要一些时间处理。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:24:27.117

清除选择是预期的行为，因为选择不在数据模型中，而只是一个样式属性（CSS 类）。

通常，这是通过将信息存储在内存中（将所选项目保存在模型中或添加数组中）或 cookie 中来解决的。[这篇](http://www.kendoui.com/code-library/web/grid/preserve-grid-state-in-a-cookie.aspx)代码库文章涵盖了它。

# tfs - tfs express 2012 的免费报告工具

> ID：14275232
> 
> 赞同：1
> 
> 时间：2013-01-11T09:35:36.677
> 
> 标签：tfs

我们正在使用 TFS 2012 速成版，是否有任何免费的报告工具可用，它将显示燃尽图，我的公司也希望获得有关创建的数字错误等的报告......或类似的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T03:00:28.690

只需创建一个查询并保存，然后使用 excel 打开它并插入图表，然后保存报告以备将来需要，当您打开它时，转到团队并单击刷新以刷新它的数据

![在此处输入图像描述](../Images/1436631a2703c371684d47ca8bff266d.png)

![在此处输入图像描述](../Images/9c9d04cfafeec123a8c1f4c39767a051.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:13:58.040

使用报表生成器。它可以制作SSRS和EXEL报告

[http://tech.lds.org/wiki/LDS_.NET_Stack/TFS_Reports_using_SSRS](http://tech.lds.org/wiki/LDS_.NET_Stack/TFS_Reports_using_SSRS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:49:18.627

我在 Urban Turtle 团队工作。我们为 TFS 提供了一个新的附加组件：敏捷仪表板。它为您提供有用的报告（燃尽图、预算图等）来跟踪您的项目。

我了解您想要一个免费工具，但对于无限用户来说，它的价格相当低。

看看：[urbanturtle.com/tfs-agile-dashboard](http://urbanturtle.com/tfs-agile-dashboard)

# wpf - 复选框因 FocusManager.IsFocusScope="True" 而失去焦点

> ID：14275235
> 
> 赞同：4
> 
> 时间：2013-01-11T09:35:49.480
> 
> 标签：wpf, checkbox, focus

我看到我`CheckBox`的及其焦点/标签顺序的奇怪行为。

首先是一些“工作”代码：

```
<Grid>    
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Button Grid.Row="0" Width="100" Height="25"/>
    <TabControl Grid.Row="1" >
        <!--TabItem Header="tabItem1" Name="tabItem1"-->
        <TabItem Header="tabItem1" Name="tabItem1" FocusManager.IsFocusScope="True">
            <ScrollViewer>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <TextBox Grid.Row="0" />
                    <TextBox Grid.Row="1"/>
                    <CheckBox Grid.Row="2" Content="Test"  />
                    <TextBox Grid.Row="3"/>
                </Grid>
            </ScrollViewer>
        </TabItem>
    </TabControl>
</Grid> 
```

如果您尝试此操作，则标签顺序可以正常工作 - 只要您不选中 CheckBox。如果我选中 CheckBox 它将失去焦点，并且下一个选项卡按下会将焦点设置为 Button。

如果我删除`FocusManager.IsFocusScope="True"`所有工作正常。

我的问题是这种行为是想要的还是错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:52:40.903

这种行为在某种程度上是意料之中的。为了修复它，您可以在窗口上添加 GotFocus 的处理程序。

假设您的复选框名为 chkBox，如下所示：

```
protected override void OnGotKeyboardFocus(KeyboardFocusChangedEventArgs e)
{
    base.OnGotKeyboardFocus(e);

     if (e.Source == chkBox)
         FocusManager.SetFocusedElement(this, chkBox); 

} 
```

这个问题和一些类似的问题在[这个 msdn 线程](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/f5de6ffc-fa03-4f08-87e9-77bbad752033/)中有更详细的讨论。

# php - Codeigniter 重定向（）在 Opera 浏览器中不起作用

> ID：14275237
> 
> 赞同：0
> 
> 时间：2013-01-11T09:35:57.883
> 
> 标签：php, codeigniter, redirect, header, opera

我基本上做的是：

```
else
{
    // redirect to home/login
    redirect('home/login');
    return null;
} 
```

它似乎适用于所有主流浏览器，但不适用于 Opera。我找不到问题。也许你们知道，我怎么能解决这个问题？先感谢您。

**Soltuion** 重新安装并重置为默认设置修复了该错误。好像我有一些奇怪的重定向配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:48:19.890

我认为它应该通过提供完整的网址来工作。
**尝试这个 ：**

```
别的
{
    // 重定向到主页/登录
    重定向（base_url（）。'home/login'）；
    出口（）;
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:45:58.863

CodeIgniter 的`redirect(..)`方法支持两种重定向模式（`location`发回`Location:`标头，`refresh`输出刷新标签）。

默认情况下（您正在使用的那个）它使用`location`，它应该可以正常工作，但仅在您之前没有向浏览器输出任何内容的情况下（忽略输出缓冲）。

如果一切都失败了，你总是可以尝试使用`refresh`这样的模式：

```
redirect('/home/login', 'refresh'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:51:37.333

PHP 中的 location 标头函数需要使用完整的绝对 URL。与相关浏览器一起工作的浏览器不遵守规范，他们只是在做他们所做的，因为他们对他们认为你想要实现的目标做出假设。

将 URL 更改为绝对 URL，看看是否可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:08:17.623

**解决方案**

重新安装并重置为默认设置修复了该错误。好像我有一些奇怪的重定向配置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-25T05:37:28.513

使用服务器端重定向。对于 php，它将如下所示：

```
<?php
/* This will give an error. 
 * Note the output above, which is before the header() call */

header('Location: http://www.example.com/');
exit;
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T09:38:26.050

尝试使用 PHP 标头：

```
header("Location:your/site/url/home/login");
exit; 
```

# matlab - 获取对称矩阵的特征值和特征向量的简单 Lanczos 算法代码

> ID：14275239
> 
> 赞同：3
> 
> 时间：2013-01-11T09:36:00.367
> 
> 标签：matlab, linear-algebra, eigenvector, eigenvalue, lanczos

我想使用 Lanczos 算法编写一个简单的程序（用 C 语言）。我遇到了一个 Matlab 示例，它帮助我进一步理解了算法，但是从这段代码中我找不到获取特征值和特征向量的方法。我可以遵循算法，但我认为我一定遗漏了一些东西。有人可以指导从这个示例中获取特征值，以便我可以理解该方法然后用 C 进行编码吗？

```
% Create a random symmetric matrix 
D=6
for i=1:D,
    for j=1:i,
        A(i,j)=rand; 
        A(j,i)=A(i,j);
    end 
end

% Iteration with j=0 
r0 = rand(D,1); 
b0 = sqrt(r0'*r0); 
q1 = r0/b0; 
a1 = q1'*A*q1

%Iteration with j=1
r1 = A*q1 - a1*q1
b1 = sqrt(r1'*r1)
q2 = r1/b1;
a2 = q2'*A*q2

%Iteration with j=2
r2 = A*q2 - a2*q2 - b1*q1;
b2 = sqrt(r2'*r2)
q3 = r2/b2
a3 = q3'*A*q3

% Create Matrix Q
Q = [q1 q2 q3];

%Check orthogonality
EYE = Q'*Q
T = Q'*A*Q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:31:37.417

在初始 Lanczos 方法中，首先计算矩阵 A 的最大特征值。然后计算与该特征值对应的特征向量。计算完这两个对象后，您可以减少您在一个对象上使用的矩阵的维数，然后找到新矩阵的最大特征值。并且您将迭代这 m 次，其中 m 是初始矩阵 A 的维数。

但是如果你想同时计算所有的特征值，你将使用[Paige 迭代过程（见中间）](http://en.wikipedia.org/wiki/Lanczos_algorithm) ，首先你建立三对角矩阵。然后你使用一种众所周知的快速算法来计算它的特征值，因为这样的矩阵非常稀疏，并且通过上面文章中指定的公式，你可以轻松地计算初始矩阵的特征值及其相应的特征向量。

# excel - 通过超链接链接excel数据点

> ID：14275240
> 
> 赞同：0
> 
> 时间：2013-01-11T09:36:03.677
> 
> 标签：excel, charts, hyperlink

我有一个图表，上面有几个数据系列，每个系列都有几个点。我想单击一个点并打开一个 jpeg 或文本文件。是否可以将 excel 图表上的数据点超链接到工作簿外部的文件？我知道我可以将整个图表超链接到另一个文件，但是是否可以只将一个点链接到一个文件？我可以为一个图表上的不同点执行此操作，让它们每个链接到不同的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:02:46.973

您不能将超链接分配给 Excel 图表上的单个点。

您可以编写 VBA 代码来响应单击某个点并跳转到链接。

这对我的博客来说是一个很好的话题；我已将其放入队列中。我有一些在线内容，您可以使用它们开始。下面的第一个链接是 VBA 图表事件的概述，另外两个是简单记录的压缩 Excel 工作簿。

[Microsoft Excel 中的图表事件](http://www.computorcompanion.com/LPMArticle.asp?ID=221)

[获取有关图表上某个点的信息](http://peltiertech.com/Excel/Zips/GetXYonaChartSheet.zip)

[获取有关嵌入图表中某个点的信息](http://peltiertech.com/Excel/Zips/GetXYonAnyChart.zip)

# java - TCP Socket接收和处理多条消息

> ID：14275242
> 
> 赞同：0
> 
> 时间：2013-01-11T09:36:09.960
> 
> 标签：java, database, sockets, tcp

我在从 TCP 套接字获取所有数据时遇到了一些麻烦。

在我的服务器中，我正在从这样的套接字读取数据：

```
 int len;
        byte[] buffer = new byte[2000];
        try {
            this.in = new DataInputStream(this.socket.getInputStream());
            this.out = new DataOutputStream(this.socket.getOutputStream());
            running = true;

            while (running) {
                len = in.read(buffer);
                if (len < 0) {
                    running = false;
                } else {
                    parsePacket(buffer, len);
                }
            }

        } catch (IOException ex) {
            System.out.println("Catch IOException: " + ex);
            ex.printStackTrace();
        } finally {
            try {
                System.out.println("Closing");
                in.close();
                out.close();
                socket.close();
            } catch (IOException ex) {
                System.out.println("Finally IOException: " + ex);
            }
        } 
```

数据包格式是这样的：

**[标题][数据][终结者]**

*   标头 --> 标识消息开头的字符序列（没有关于数据包长度的信息）；
*   数据 --> 被分割成段，如：**[Size Seg. 1][数据段。1][尺寸段。2][数据段。2][尺寸段。3][数据段。3]....[尺寸段。N][数据段。N]**
*   终结者 --> [0x00]

数据接收速度非常快（有时 200 毫秒或更短），因此有时会`read(buffer)`填充以下`buffer`消息：

*   [HEADER1][DATA1][TERM1] 或，
*   [HEADER1][DATA1][TERM1][HEADER2][DATA2][TERM2].............[HEADER N][DATA N][TERM N] 或者，
*   [HEADER1][DATA1][TERM1][HEADER2][DATA2][TERM2]......[HEADER N][DAT（最后一条消息不完整）

该`parsePacket()`方法能够解析具有上述格式的消息，如果接下来有更多消息，它们也将被解析（递归）。但是如果最后一条消息不完整，它不会解析它（我不希望这样，但直到现在我还没有找到合适的解决方案）。

消息中的数据存储在 MySQL 数据库中（使用 JDBC 驱动程序）。消息的每次解析都可能涉及对数据库的多个查询。由于我只使用一个线程来接收、解析和存储数据，因此代码的执行速度并没有达到应有的速度……应该尽快接收和存储数据。

我想讨论的几点：

*   在不丢失一些消息的情况下获取所有消息的最佳方法是什么？
*   如何改进接收和存储数据的方式？（数据应尽快存储！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:51:32.200

由于 TCP 已经是流协议，因此读取此数据的最简单方法是作为流。我会添加一个侦听器来处理事件。

```
DataInputStream dis = new DataInputStream(new BufferedInputStream(socket.getInputStream()));

try {
   while(true) {
       listener.startOfMessage();
       for(int segSize; (segSize = dis.readInt()) > 0;) {
          byte[] bytes = new byte[segSize];
          dis.readFully(bytes);
          listener.data(bytes);
       }
       int footer = dis.read();
       // check footer ??
       listener.endOfMessage();
   }
} catch(EOFException endOfStream) {
   // handle or ignore
} finally {
   // close everything.
} 
```

当您自己进行缓冲时，您还必须重新组装消息并保留不完整的消息，这在这里很头疼但没有任何好处。

> 数据接收速度非常快（有时 200 毫秒或更短）

对于您拥有的每个 CPU，200 毫秒大约是 600,000,000 个时钟周期。这对计算机来说是永恒的。:)

上面的代码应该在 200 毫秒内处理大约 20,000 条消息。如果您需要的不止这些，您可以使用 NIO，但我不认为您需要这样做。

> 数据应尽快存储！

我怀疑 MySQL 很好，它不是“尽可能快”，但我看不出你所说的不使用它的任何理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:43:28.633

你是从 生产`String`的`buffer`，对吧？在这种情况下，我建议您修改`parsePacket`方法的接口并将循环转换为以下内容：

```
 String tail = "";
        String line = "";
        while (running) {
            len = in.read(buffer);
            if (len < 0) {
                running = false;
            } else {
                line = tail + new String(buffer);
                tail = parsePacket(line, len);
            }
        } 
```

在你的`parsePacket`你必须切断未终止的线尾并从方法中返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:42:35.970

TCP 提供*流*传输服务，而不是数据包服务。为了实现“打包”协议必须自己构建数据包。在您的情况下，框架是使用`[TERMINTAOR]`标记实现的。在客户端，您应该做的是：

1.  检查您是否`buffer`包含标记。如果没有，则发出 a`read`向您添加数据`buffer`并返回步骤 1。
2.  解析并使用缓冲区中的数据包
3.  返回步骤 1。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T09:44:21.073

TCP 是一种流协议。它按照写入顺序将写入一端的套接字的所有字节传递到另一端的套接字。它**不能**保证它们会以与放入它们的大小相同的“块”到达。读取可能会比任何给定写入中写入的字节多或少。但是所有的字节都在那里，而且它们的顺序都是正确的。

对此的解决方案是使用定义消息边界的协议 - 消息终止符、长度标头或 XML 等自描述格式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T09:55:37.457

TCP 是一种流协议，它不保证从一个端口到另一个相同块大小的消息的大小。在阅读时，您可能会在一次写入中获得或多或少的字节数。

# java - 对从 Web 服务获得的海量数据执行 CRUD 操作

> ID：14275248
> 
> 赞同：0
> 
> 时间：2013-01-11T09:36:34.350
> 
> 标签：java, web-services, spring

我正在开发一个在数据库表中维护**用户及其站点列表的项目。**用户列包含用户的电子邮件地址，相应的条目包含他们拥有的网站。像这样的东西：

```
 dbTable
    ==================================
    email       | website
    ----------------------------------
    user1@abc.com   | http://xyz.com
    user2@abc.com   | http://asd.com
    user2@abc.com   | http://qwerty.com
    user3@abc.com   | http://asdfg.com
    .
    . 
```

该表包含数千行，将**按照 Web 服务进行填充和维护**。在 JAX-B 的帮助下，我在第一次运行时解组了 WS 并插入了数据。现在，该表将根据 Web 服务进行更新。即**用户/网站应根据从网络服务收到的数据进行更新或删除**。

我最初的想法是在电子邮件+网站上创建一个 ID，并将其作为第三个条目存储在表中，对于未来的 CRUD 操作，我将只引用此 ID。但是，我的上级建议不要自行编码整个批量更新过程，并使用任何框架功能`my project uses Spring`，用于批量 CRUD 操作，或者可能利用数据库提供的功能，`POSTGRESQL`. **Spring 中是否提供了任何此类功能，可用于在数据库上执行批量更新？**有任何想法吗？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:42:02.600

你可以看看[Hibernate](http://www.h2database.com/html/main.html)。这个[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)与 Spring 集成得很好，可以进行[批量操作](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)。您可以在[这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)查看与您需要做的类似的事情。

[此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)的信息应该为您指明为 PostgreSQL 设置 Hibernate 的正确方向。

# javascript - 如何为 svg 路径的渐进式绘制动画？

> ID：14275249
> 
> 赞同：15
> 
> 时间：2013-01-11T09:36:34.240
> 
> 标签：javascript, css, canvas, svg

我想只使用带有 svg/canvas 和 js 最大值的 css 来为线条的渐进绘图制作动画。我想画的线的想法可以在[这里找到](http://jsfiddle.net/6btNN/)

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <g>
  <title>Layer 1</title>
  <path d="m33,104c1,0 2.1306,-0.8037 23,3c9.07012,1.65314 10,2 24,2c7,0 29,0 33,0c8,0 9,0 11,0c2,0 8,0 11,0c9,0 17,0 18,0c10,0 12,0 20,0c1,0 6,0 7,0c2,0 3.07613,0.38268 4,0c2.61313,-1.08239 2,-3 2,-6c0,-1 0,-2 0,-3c0,-1 0,-2 0,-3c0,-1 0,-2 0,-3c0,-1 0.30745,-3.186 -1,-5c-0.8269,-1.14727 -0.09789,-2.82443 -2,-4c-0.85065,-0.52573 -2.82443,-0.09789 -4,-2c-0.52573,-0.85065 -2.58578,-0.58578 -4,-2c-0.70711,-0.70711 -1.81265,-1.20681 -4,-3c-2.78833,-2.28588 -3.64749,-2.97251 -8,-4c-2.91975,-0.68926 -4.82375,-2.48626 -7,-3c-2.91975,-0.68926 -5.15224,-0.23463 -7,-1c-1.30656,-0.5412 -4.38687,-1.91761 -7,-3c-1.84776,-0.76537 -5.03609,0.37821 -7,0c-5.28799,-1.01837 -8,-3 -9,-3c-2,0 -5.0535,-0.54049 -7,-1c-2.17625,-0.51374 -4.15224,-0.23463 -6,-1c-1.30656,-0.54119 -3,-1 -4,-1c-2,0 -5,-1 -6,-1c-1,0 -3,-2 -6,-2c-2,0 -5,-2 -6,-2c-2,0 -2.02583,-0.67963 -4,-1c-3.12144,-0.50654 -4.15224,-0.23463 -6,-1c-1.30656,-0.54119 -2,-1 -3,-1c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-1,0 -2,0 -3,0c-1,0 -2,0 -3,0c-2,0 -3.85273,0.1731 -5,1c-1.81399,1.30745 -5.18601,1.69255 -7,3c-1.14727,0.8269 -1.82375,2.48626 -4,3c-0.97325,0.22975 -1.69344,1.45881 -3,2c-0.92388,0.38268 -1.45951,1.0535 -1,3c0.51374,2.17625 3.07844,2.78985 6,4c2.06586,0.85571 3.38688,1.91761 6,3c1.84776,0.76537 5.2987,-1.05146 7,0c1.90211,1.17557 3.82375,2.48626 6,3c0.97325,0.22975 3.29289,0.29289 4,1c0.70711,0.70711 4,2 9,4c5,2 8,4 11,4c2,0 5,0 7,0c3,0 5,0 7,0c2,0 4,0 7,0c2,0 4,0 8,0c3,0 7,0 10,0c4,0 7,0 12,0c3,0 5,0 6,0c2,0 3,0 5,0c1,0 1.09789,-0.82443 3,-2c0.85065,-0.52573 3.07613,0.38268 4,0c1.30656,-0.5412 0.71022,-2.04291 1,-3c1.04483,-3.45084 2.84723,-5.04132 4,-9c0.88414,-3.03616 1.85194,-5.22836 3,-8c0.5412,-1.30656 1.5405,-2.0535 2,-4c0.51375,-2.17625 2.71413,-4.21167 5,-7c2.68979,-3.28101 4,-6 5,-7c1,-1 2,-2 2,-4c0,-1 0.70711,-2.29289 0,-3c-0.70711,-0.70711 -2.07613,0.38268 -3,0c-1.30656,-0.54119 -2,-1 -4,-1c-3,0 -6.87856,-2.49346 -10,-3c-2.96126,-0.48055 -6.71201,-0.98162 -12,-2c-2.94586,-0.56732 -5,-1 -9,-1c-3,0 -6,-1 -8,-1c-2,0 -5,-3 -7,-3c-2,0 -5.38687,-0.91761 -8,-2c-0.92388,-0.38268 -3.0535,-0.54049 -5,-1c-2.17625,-0.51374 -4.58578,0.41421 -6,-1c-0.70711,-0.70711 -1,-1 -2,-1c-1,0 -2,0 -3,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,0c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-1,0 -3,0 -4,0c-3,0 -5,0 -7,0c-2,0 -4,0 -6,0c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-2,0 -4,0 -5,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,1l-1,0" id="svg_1" stroke-width="5" stroke="#000000" fill="none"/>
 </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-11T16:26:37.103

此答案中列出了三种技术：

* * *

有一个全 SVG 解决方案，涉及逐步修改`stroke-dasharray`形状以绘制越来越长的“破折号”，然后是巨大的间隙。

### 演示： http: [//phrogz.net/svg/progressively-drawing-svg-path-via-dasharray.html](http://phrogz.net/svg/progressively-drawing-svg-path-via-dasharray.html)

相关代码：

```
var distancePerPoint = 1;
var drawFPS          = 60;

var orig = document.querySelector('path'), length, timer;
orig.addEventListener('mouseover',startDrawingPath,false);
orig.addEventListener('mouseout', stopDrawingPath, false);

function startDrawingPath(){
  length = 0;
  orig.style.stroke = '#f60';
  timer = setInterval(increaseLength,1000/drawFPS);
}

function increaseLength(){
  var pathLength = orig.getTotalLength();
  length += distancePerPoint;
  orig.style.strokeDasharray = [length,pathLength].join(' ');
  if (length >= pathLength) clearInterval(timer);
}

function stopDrawingPath(){
  clearInterval(timer);
  orig.style.stroke = '';
  orig.style.strokeDasharray = '';
} 
```

* * *

或者，您仍然可以使用所有 SVG 并选择一次构建 SVG 路径一个命令：

### 演示： http: [//phrogz.net/svg/progressively-cloning-svg-path.html](http://phrogz.net/svg/progressively-cloning-svg-path.html)

相关代码：

```
// Assumes 'orig' and dup' are SVG paths
function addNextPathSegment(){
  var nextIndex   = dup.pathSegList.numberOfItems;
  if (nextIndex<orig.pathSegList.numberOfItems){
    var nextSegment = orig.pathSegList.getItem(nextIndex);
    var segmentDup  = cloneSVGPathSeg( dup, nextSegment );
    dup.pathSegList.appendItem( segmentDup );
  }
}

function cloneSVGPathSeg( path, seg ){
  switch(seg.pathSegTypeAsLetter){
    case 'M': return path.createSVGPathSegMovetoAbs(seg.x,seg.y);                                                     break;
    case 'm': return path.createSVGPathSegMovetoRel(seg.x,seg.y);                                                     break;
    case 'L': return path.createSVGPathSegLinetoAbs(seg.x,seg.y);                                                     break;
    case 'l': return path.createSVGPathSegLinetoRel(seg.x,seg.y);                                                     break;
    case 'H': return path.createSVGPathSegLinetoHorizontalAbs(seg.x);                                                 break;
    case 'h': return path.createSVGPathSegLinetoHorizontalRel(seg.x);                                                 break;
    case 'V': return path.createSVGPathSegLinetoVerticalAbs(seg.y);                                                   break;
    case 'v': return path.createSVGPathSegLinetoVerticalRel(seg.y);                                                   break;
    case 'C': return path.createSVGPathSegCurvetoCubicAbs(seg.x,seg.y,seg.x1,seg.y1,seg.x2,seg.y2);                   break;
    case 'c': return path.createSVGPathSegCurvetoCubicRel(seg.x,seg.y,seg.x1,seg.y1,seg.x2,seg.y2);                   break;
    case 'S': return path.createSVGPathSegCurvetoCubicSmoothAbs(seg.x,seg.y,seg.x2,seg.y2);                           break;
    case 's': return path.createSVGPathSegCurvetoCubicSmoothRel(seg.x,seg.y,seg.x2,seg.y2);                           break;
    case 'Q': return path.createSVGPathSegCurvetoQuadraticAbs(seg.x,seg.y,seg.x1,seg.y1);                             break;
    case 'q': return path.createSVGPathSegCurvetoQuadraticRel(seg.x,seg.y,seg.x1,seg.y1);                             break;
    case 'T': return path.createSVGPathSegCurvetoQuadraticSmoothAbs(seg.x,seg.y);                                     break;
    case 't': return path.createSVGPathSegCurvetoQuadraticSmoothRel(seg.x,seg.y);                                     break;
    case 'A': return path.createSVGPathSegArcAbs(seg.x,seg.y,seg.r1,seg.r2,seg.angle,seg.largeArcFlag,seg.sweepFlag); break;
    case 'a': return path.createSVGPathSegArcRel(seg.x,seg.y,seg.r1,seg.r2,seg.angle,seg.largeArcFlag,seg.sweepFlag); break;
    case 'z':
    case 'Z': return path.createSVGPathSegClosePath();                                                                break;
  }
} 
```

* * *

最后，您可以通过定期采样 SVG 路径并绘制到画布来选择将路径绘制到 HTML5 画布。（请注意，发生这种情况不需要显示 SVG 路径；您可以完全在 JavaScript 中构建一个 SVG 路径元素并对其进行采样）：

### 演示： http: [//phrogz.net/svg/progressively-drawing-svg-path.html](http://phrogz.net/svg/progressively-drawing-svg-path.html)

相关代码：

```
function startDrawingPath(){
  points = [];
  timer = setInterval(buildPath,1000/drawFPS);
}

// Assumes that 'orig' is an SVG path
function buildPath(){
  var nextPoint = points.length * distancePerPoint;
  var pathLength = orig.getTotalLength();
  if (nextPoint <= pathLength){
    points.push(orig.getPointAtLength(nextPoint));
    redrawCanvas();
  } else stopDrawingPath();
}

function redrawCanvas(){
  clearCanvas();
  ctx.beginPath();
  ctx.moveTo(points[0].x,points[0].y);
  for (var i=1;i<points.length;i++) ctx.lineTo(points[i].x,points[i].y);
  ctx.stroke();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T10:21:12.957

所以[这个答案](https://stackoverflow.com/questions/4631019/how-to-draw-a-vector-path-progressively-raphael-js/9130243#9130243)有类似的问题。

* * *

我选择了您的路径并将其放入该答案的代码中。

[jsfiddle 演示](http://jsfiddle.net/lollero/THGuz/)

html:

```
<html>
<style>
    #canvas
    {
    border-style:solid;
    border-width:1px;
    }
</style>
<div id="canvas"> 
    <p>Hover over me</p>        
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

Javascript ^(（请注意，示例中使用了 Jquery 1.8.3 和 Raphael 1.5.2）)：

```
$(function() {

animateLine = function(canvas, hoverDivName, colorNumber, pathString) {
    $('#' + hoverDivName).hover(

    function() {
        var line = canvas.path(pathString).attr({
            stroke: colorNumber
        });
        var length = line.getTotalLength();

        $('path[fill*="none"]').animate({
            'to': 1
        }, {
            duration: 5000,
            step: function(pos, fx) {
                var offset = length * fx.pos;
                var subpath = line.getSubpath(0, offset);
                canvas.clear();
                canvas.path(subpath).attr({
                    'stroke-width': 5,
                    stroke: colorNumber
                });

            },
        });
    }, function() {
        $('path[fill*="none"]').stop(true, false).fadeOut();
    });
};

var canvas = Raphael('canvas', 200, 200);
var pathString = "m33,104c1,0 2.1306,-0.8037 23,3c9.07012,1.65314 10,2 24,2c7,0 29,0 33,0c8,0 9,0 11,0c2,0 8,0 11,0c9,0 17,0 18,0c10,0 12,0 20,0c1,0 6,0 7,0c2,0 3.07613,0.38268 4,0c2.61313,-1.08239 2,-3 2,-6c0,-1 0,-2 0,-3c0,-1 0,-2 0,-3c0,-1 0,-2 0,-3c0,-1 0.30745,-3.186 -1,-5c-0.8269,-1.14727 -0.09789,-2.82443 -2,-4c-0.85065,-0.52573 -2.82443,-0.09789 -4,-2c-0.52573,-0.85065 -2.58578,-0.58578 -4,-2c-0.70711,-0.70711 -1.81265,-1.20681 -4,-3c-2.78833,-2.28588 -3.64749,-2.97251 -8,-4c-2.91975,-0.68926 -4.82375,-2.48626 -7,-3c-2.91975,-0.68926 -5.15224,-0.23463 -7,-1c-1.30656,-0.5412 -4.38687,-1.91761 -7,-3c-1.84776,-0.76537 -5.03609,0.37821 -7,0c-5.28799,-1.01837 -8,-3 -9,-3c-2,0 -5.0535,-0.54049 -7,-1c-2.17625,-0.51374 -4.15224,-0.23463 -6,-1c-1.30656,-0.54119 -3,-1 -4,-1c-2,0 -5,-1 -6,-1c-1,0 -3,-2 -6,-2c-2,0 -5,-2 -6,-2c-2,0 -2.02583,-0.67963 -4,-1c-3.12144,-0.50654 -4.15224,-0.23463 -6,-1c-1.30656,-0.54119 -2,-1 -3,-1c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-1,0 -2,0 -3,0c-1,0 -2,0 -3,0c-2,0 -3.85273,0.1731 -5,1c-1.81399,1.30745 -5.18601,1.69255 -7,3c-1.14727,0.8269 -1.82375,2.48626 -4,3c-0.97325,0.22975 -1.69344,1.45881 -3,2c-0.92388,0.38268 -1.45951,1.0535 -1,3c0.51374,2.17625 3.07844,2.78985 6,4c2.06586,0.85571 3.38688,1.91761 6,3c1.84776,0.76537 5.2987,-1.05146 7,0c1.90211,1.17557 3.82375,2.48626 6,3c0.97325,0.22975 3.29289,0.29289 4,1c0.70711,0.70711 4,2 9,4c5,2 8,4 11,4c2,0 5,0 7,0c3,0 5,0 7,0c2,0 4,0 7,0c2,0 4,0 8,0c3,0 7,0 10,0c4,0 7,0 12,0c3,0 5,0 6,0c2,0 3,0 5,0c1,0 1.09789,-0.82443 3,-2c0.85065,-0.52573 3.07613,0.38268 4,0c1.30656,-0.5412 0.71022,-2.04291 1,-3c1.04483,-3.45084 2.84723,-5.04132 4,-9c0.88414,-3.03616 1.85194,-5.22836 3,-8c0.5412,-1.30656 1.5405,-2.0535 2,-4c0.51375,-2.17625 2.71413,-4.21167 5,-7c2.68979,-3.28101 4,-6 5,-7c1,-1 2,-2 2,-4c0,-1 0.70711,-2.29289 0,-3c-0.70711,-0.70711 -2.07613,0.38268 -3,0c-1.30656,-0.54119 -2,-1 -4,-1c-3,0 -6.87856,-2.49346 -10,-3c-2.96126,-0.48055 -6.71201,-0.98162 -12,-2c-2.94586,-0.56732 -5,-1 -9,-1c-3,0 -6,-1 -8,-1c-2,0 -5,-3 -7,-3c-2,0 -5.38687,-0.91761 -8,-2c-0.92388,-0.38268 -3.0535,-0.54049 -5,-1c-2.17625,-0.51374 -4.58578,0.41421 -6,-1c-0.70711,-0.70711 -1,-1 -2,-1c-1,0 -2,0 -3,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,0c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-1,0 -3,0 -4,0c-3,0 -5,0 -7,0c-2,0 -4,0 -6,0c-2,0 -3,0 -5,0c-1,0 -2,0 -3,0c-2,0 -4,0 -5,0c-1,0 -2,0 -4,0c-1,0 -2,0 -3,1l-1,0";

animateLine(canvas, "canvas", "#000", pathString);

}); 
```

*   我从 [ `d`] 属性中获取了您的路径并将其放入`pathString`变量中。
*   我还添加了一行来定义 [ `stroke-width`]

我只简单地玩过 raphael 一次，但是检查示例并查看代码是如何构造的 ( `from page source`) 会让你走得很远（我不记得如何/在哪里放置`stroke-width`，所以我从本[示例](http://raphaeljs.com/helvetica.html)的页面源代码。）。

* * *

[你可以从这里找到 raphael + 更多信息。](http://raphaeljs.com/)

* * *

只是为了好玩，[我开辟了自己的道路......](http://jsfiddle.net/lollero/THGuz/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-01T02:47:12.350

使用 Phrogz 出色的技术，我创建了一个非常基本的 GreenSock 动画，使用 TweenLite 将长度值补间到 getTotalLength() 值。

正如您在演示中看到的那样，将其连接到补间引擎中可为您提供大量控制，并且只涉及很少的代码。

```
var orig = document.querySelector('path'), length, timer;

var obj = {length:0,
           pathLength:orig.getTotalLength()};

orig.style.stroke = '#f60';

var t = TweenMax.to(obj, 10, {length:obj.pathLength, onUpdate:drawLine, ease:Linear.easeNone})

function drawLine() {
  orig.style.strokeDasharray = [obj.length,obj.pathLength].join(' ');
  updateSlider();
} 
```

非常尊重 Phrogz 的绝妙想法和代码。

[http://codepen.io/GreenSock/pen/zLiux](http://codepen.io/GreenSock/pen/zLiux)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T09:47:56.413

去年我做了类似的事情来为画布上的绘图设置动画。这些路径都是带有曲线和线条的 SVG 类型路径，因此您可以直接从 SVG 文件中取出它们并将它们放入 Javascript 数组中。

[http://www.ashleysheridan.co.uk/coding/javascript/Animated+Glowing+Line+Drawing+in+Canvas](http://www.ashleysheridan.co.uk/coding/javascript/Animated+Glowing+Line+Drawing+in+Canvas)

# c# - 使用反射来创建像 x => new { .. } 这样的 lambda 表达式

> ID：14275253
> 
> 赞同：7
> 
> 时间：2013-01-11T09:36:58.040
> 
> 标签：c#, reflection, lambda, expression

我有一个`IQuerable<object> source`对象，必须从中得到类似的东西（但使用反射）。

```
source.Select(t => new SelectListItem { Name = t.Name, Value = t.Id }) 
```

我该怎么做，或者我在哪里可以找到构建这种表达式树的参考。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T10:20:37.217

您可以使用命名空间 ( [MSDN](http://msdn.microsoft.com/en-us/library/bb506649.aspx) )创建`Expression`s`System.Linq.Expressions`

在您的情况下，它看起来像这样：

```
var source = typeof( Source );
var target = typeof( SelectListItem );

var t = Expression.Parameter( source, "t" );

var sourceName = Expression.MakeMemberAccess( t, source.GetProperty( "Name" ) );
var sourceId = Expression.MakeMemberAccess( t, source.GetProperty( "Id" ) );

var assignName = Expression.Bind( target.GetProperty( "Name" ), sourceName );
var assignValue = Expression.Bind( target.GetProperty( "Value" ), sourceId );
var targetNew = Expression.New( target );
var init = Expression.MemberInit( targetNew, assignName, assignValue );

var lambda =
  ( Expression<Func<Source,SelectListItem>> ) Expression.Lambda( init, t ); 
```

你可以像这样使用它：

```
IQueryable<Source> list = ...

List<SelectListItem> items = list.Select( lambda ).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T00:16:32.833

在运行时知道哪些类型信息（如果有）有点不清楚。捎带**Nicholas Butler 的**回答（因为它已被接受）让我们假设您将“知道”源类型（即 IQueryable 源中 T 的类型是什么）并且您将“知道”目标类型（从IQueryable.Select 扩展方法）。当我说“知道”时，我的意思是它可以在运行时发现而无需动态、反射、后期绑定等。否则，他的解决方案只有在源和目标类型恰好具有具有这些匹配名称的属性时才有效（即“名称/ID”和“名称/值”）。

鉴于此，有一个非常简单的解决方案，无需手动构造您的 lambda 表达式......

解决方案：首先让我们定义这两种类型，以便我们知道我们正在处理什么。我这样做只是因为我不知道您使用的是什么类型，所以这些确实是您实际使用的**占位符**，因此您的解决方案不需要这，仅用于演示/示例目的：

```
//this is whatever your source item type is (t) 
public class NameIdPair
{
    public string Name { get; set; }

    public string Id { get; set; }
}

//this is whatever the SelectListItem type is you're using
public class SelectListItem
{
    public string Name { get; set; }

    public string Value { get; set; }
} 
```

接下来让我们用 2 个方法定义一个简单的静态类。一种方法将创建 lambda 表达式，另一种方法将源 (IQueryable) 转换并选择为 IEnumerable：

```
 public static class QueryableExtensions
{
    public static IEnumerable<TItem> Select<TSource, TItem>(this IQueryable<TSource> source)
        where TSource : NameIdPair
        where TItem : SelectListItem, new()
    {
        if (source == null) throw new ArgumentNullException("source");

        return source.Select(CreateLambda<TSource, TItem>());
    }

    public static Expression<Func<TSource, TItem>> CreateLambda<TSource, TItem>()
        where TSource : NameIdPair
        where TItem : SelectListItem, new()
    {

        return (t) => new TItem { Name = t.Name, Value = t.Id };
    }
} 
```

用法：

```
 //create an instance of an IQueryable<T> for demo purposes
var source = new[]
{
    new NameIdPair {Name = "test1_name", Id = "test1_Id"},
    new NameIdPair {Name = "test2_name", Id = "test2_Id"}
}.AsQueryable();

//you can call the "Select" extension method to select the queryable into an enum.
var enumerable = source.Select<NameIdPair, SelectListItem>();   
//'enumerable' is an IEnumerable<SelectListItem> instance

//or if you just want the lambda expression...
var lambda = QueryableExtensions.CreateLambda<NameIdPair, SelectListItem>();

//lambda.ToString() returns "t => new SelectListItem() {Name = t.Name, Value = t.Id}"; 
```

所以你去。不确定这是否是您正在寻找的，或者它是否符合您的需求。希望有人会发现它有用。

# iphone - 如何将 GKMatchmakerViewController 呈现给呈现的视图控制器？

> ID：14275255
> 
> 赞同：1
> 
> 时间：2013-01-11T09:37:07.963
> 
> 标签：iphone, ios, game-center

我正在将实时游戏中心应用到我的游戏中，但在呈现`GKMatchmakerViewController`. 这是我的情况：

1.  我将在其中展示`GameViewController`下一个代码的 HomeViewController：

    ```
     GameViewController *gameViewController = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
     gameViewController.delegate = self;
     [self presentViewController:gameViewController animated:NO completion:nil]; 
    ```

2.  然后在`GameViewController`我包含`GCHelper`并调用游戏中心开始比赛：

    ```
    -(void)viewDidAppear:(BOOL)animated

    {
        [super viewDidAppear:animated];

        [[GCHelper sharedInstance] authenticateLocalUser];

        [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:self delegate:(id)self];

    } 
    ```

问题是游戏中心的那个小警报显示我又回来了： ![在此处输入图像描述](../Images/ba5a9f52eef99e1b2babdd43b8f3f579.png)

但没有显示游戏中心的大窗口。我敢肯定，问题在于我要介绍的`GameViewController`.

我该如何解决这个问题？

**更新：**

当我尝试在 HomeViewConroller 中调用 Game Center 时，一切正常。

**更新 2（已尝试）：** 我在 GCHelper 中尝试过：

```
[presentingViewController presentViewController:mmvc animated:YES completion:nil]; 
```

利用：

```
AppDelegate * appdelegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
[appdelegate.homeViewController presentViewController:mmvc animated:YES completion:nil]; 
```

但后来我得到错误： **谁的视图不在窗口层次结构中！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:21:49.943

问题是**[presentingViewControllerdismissModalViewControllerAnimated:NO];**

我应该删除dismissViewController，然后一切都好。

```
//[presentingViewController dismissViewControllerAnimated:NO completion:nil]; // that I removed

GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
request.minPlayers = minPlayers;
request.maxPlayers = maxPlayers;
request.playersToInvite = pendingPlayersToInvite;

GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
mmvc.matchmakerDelegate = self;

[presentingViewController presentViewController:mmvc animated:YES completion:nil];

self.pendingInvite = nil;
self.pendingPlayersToInvite = nil; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:41:08.483

```
GCHelper.h

//
//  GCHelper.h
//  KvK
//
//  Created by Kalim on 11/22/12.
//
//

#import <Foundation/Foundation.h>
#import <GameKit/Gamekit.h>

@interface GCHelper : NSObject<GKMatchmakerViewControllerDelegate, GKMatchDelegate>
{
    BOOL isUserAuthenticated;

    UIViewController *presentingViewController;
    GKMatch *match;
    BOOL matchStarted;

    GKInvite *pendingInvite;
    NSArray *pendingPlayersToInvite;
    NSMutableDictionary *playersDict;

    NSString *MultiplayerID;
    NSData *MultiData;
    NSString *otherPlayerID;

    char AlertMessageBoxNo;

    BOOL isDataRecieved;
}

//variables

@property (assign, readonly) BOOL gameCenterAvailable;
@property (retain) UIViewController *presentingViewController;
@property (retain) GKMatch *match;
@property (retain) GKInvite *pendingInvite;
@property (retain) NSArray *pendingPlayersToInvite;
@property (retain) NSMutableDictionary *playersDict;

@property (retain) NSString *MultiplayerID;
@property (retain) NSData *MultiData;

-(NSString*)getOtherPlayerId;
-(void)setOtherPlayerId;
//Functions
+ (GCHelper *)sharedInstance;
-(BOOL)isGameCenterAvailable;
-(void)authenticationChanged;
-(void)authenticateLocalUser;

-(void)gameOver:(NSString*)message;

-(void)setDataRecieved:(BOOL)d;
-(BOOL)getDataRecieved;

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController;

@end

GCHelper.mm

//
//  GCHelper.m
//  KvK
//
//  Created by Kalim on 11/22/12.
//
//

#import "GCHelper.h"
#import "IPadSharebleClass.h"

@implementation GCHelper

@synthesize gameCenterAvailable;
@synthesize presentingViewController;
@synthesize match;
@synthesize pendingInvite;
@synthesize pendingPlayersToInvite;
@synthesize playersDict;
@synthesize MultiData;
@synthesize MultiplayerID;

static GCHelper *sharedHelper = nil;

+(GCHelper *) sharedInstance
{
    if (!sharedHelper)
    {
        sharedHelper = [[GCHelper alloc] init];
    }
    return sharedHelper;
}

- (BOOL)isGameCenterAvailable
{
    Class gcClass = (NSClassFromString(@"GKLocalPlayer"));
    NSString *reqSysVer = @"4.1";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    BOOL osVersionSupported = ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending);
    return (gcClass && osVersionSupported);
}

- (id)init
{
    if ((self = [super init]))
    {
        gameCenterAvailable = [self isGameCenterAvailable];
        if (gameCenterAvailable)
        {
            NSNotificationCenter *nc =
            [NSNotificationCenter defaultCenter];
            [nc addObserver:self
                   selector:@selector(authenticationChanged)
                       name:GKPlayerAuthenticationDidChangeNotificationName
                     object:nil];
        }
        else
        {
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Center Not Available" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
    }
    return self;
}

-(void)authenticationChanged
{
    if ([GKLocalPlayer localPlayer].isAuthenticated && !isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player authenticated.");
        isUserAuthenticated = TRUE;

        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
        {
            NSLog(@"Received invite");
            self.pendingInvite = acceptedInvite;
            self.pendingPlayersToInvite = playersToInvite;
            IPadCallAnyWhereF.inviteReceived();
        };

    }
    else if (![GKLocalPlayer localPlayer].isAuthenticated && isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player not authenticated");
        isUserAuthenticated = FALSE;
    }

}

- (void)authenticateLocalUser
{
    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
    }
    else
    {
        NSLog(@"Already authenticated!");
    }
}

-(void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController
{
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    if (pendingInvite != nil)
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
    else
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

}

#pragma mark GKMatchmakerViewControllerDelegate
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController
{
    [presentingViewController dismissModalViewControllerAnimated:YES];

    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Cancel By you" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='E';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    NSLog(@"Error finding match: %@", error.localizedDescription);
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Connection Time out" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='A';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0)
    {
        NSLog(@"***************Ready to start match!**************");
        [self lookupPlayers];
    }
}

- (void)lookupPlayers
{
    NSLog(@"Looking up %d players...", match.playerIDs.count);
    [GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error)
     {
         if (error != nil)
         {
             NSLog(@"Error retrieving player info: %@", error.localizedDescription);
             matchStarted = NO;
             //IPadCallAnyWhereF.matchEnded();
             UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Error retrieving player info" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
             [alert show];
             [alert release];
             AlertMessageBoxNo='F';
         }
         else
         {
             self.playersDict = [NSMutableDictionary dictionaryWithCapacity:players.count];
             for (GKPlayer *player in players)
             {
                 NSLog(@"Found player: %@", player.alias);
                 [playersDict setObject:player forKey:player.playerID];
             }
             NSLog(@"Total Number of Players : %d",players.count);
             matchStarted = YES;
             IPadCallAnyWhereF.matchStarted();
         }
     }];

}

#pragma mark GKMatchDelegate
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID
{
    if (match != theMatch) return;

    MultiData=data;
    MultiplayerID=playerID;
    if(otherPlayerID==nil)
    {
        otherPlayerID=[playerID retain];
    }
    IPadCallAnyWhereF.match();
}

-(void)setDataRecieved:(BOOL)d
{
    isDataRecieved=d;
}
-(BOOL)getDataRecieved
{
    return isDataRecieved;
}

-(NSString*)getOtherPlayerId
{
    return otherPlayerID;
}

-(void)setOtherPlayerId
{
    otherPlayerID=nil;
}

- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{
    if (match != theMatch) return;
    switch (state)
    {
        case GKPlayerStateConnected:
            NSLog(@"New Player connected!");
            if (!matchStarted && theMatch.expectedPlayerCount == 0)
            {
                NSLog(@"&&&&&&&&&& Ready to start match in the match!");
                [self lookupPlayers];
            }
            break;
        case GKPlayerStateDisconnected:
            NSLog(@"--------Player disconnected!--------");
            matchStarted = NO;
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Player Disconnected" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
            [alert show];
            [alert release];
            AlertMessageBoxNo='B';
            //IPadCallAnyWhereF.matchDisconnect();
            break;
    }
}

- (void)match:(GKMatch *)theMatch connectionWithPlayerFailed:(NSString *)playerID withError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Failed to connect to player with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Failed to connect to player" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='C';

}

- (void)match:(GKMatch *)theMatch didFailWithError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Match failed with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Match failed" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='D';

}

-(void)gameOver:(NSString*)message
{
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:message delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='G';
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Try Again"])
    {
        IPadCallAnyWhereF.matchDisconnect();
    }
    else if([title isEqualToString:@"Main Menu"])
    {
        IPadCallAnyWhereF.gotoMainMenu();
    }

}

@end 
```

# eclipse-rcp - 手动控制 EditorPart 生命周期以将其嵌入 ViewPart

> ID：14275256
> 
> 赞同：4
> 
> 时间：2013-01-11T09:37:10.073
> 
> 标签：eclipse-rcp, eclipse-gmf

我有一个 Eclipse RCP 应用程序，它使用视图来允许编辑 EMF 资源。资源和 EditingDomain 包含在 Page 输入中。

我们现在正在尝试集成 Eclipse GMF。这会生成一个工作得很好的 DiagramEditor，但在 Eclipse 3 中，它不能与我的应用程序的其他视图在同一个堆栈中使用。编辑器只能放在 EditorArea 中。

任何人都可以指导我寻求解决方案吗？我看到了多个选项，每个选项都有明显的优点/缺点：

1.  在 IEditorSite 和 IViewSite 之间实现一个转换层，这样我就可以在视图中加载我的编辑器。这部分工作，但很多 GMF 功能突然丢失。肯定有人以前这样做过；因为我什么也没找到，所以我认为这是不可能的。
2.  将所有视图实现为 EditorPart。应用程序中只有一个 EditorArea。缺点：需要内部 Workbench API 来布局所有部分[DZone 链接](http://eclipse.dzone.com/tips/programmatically-split-editor-)
3.  生成 GMF 视图而不是 GMF 编辑器。这甚至可能在不丢失调色板的情况下实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:16:57.887

两年前我已经完成了选项#2，根据您的布局要求，这是迄今为止最简单的。

选项#1 几乎是不可能的，因为`IViewPart`功能的较大部分不能委托给子部分。看看多编辑器代码是多么普遍——你可以`instanceof`在代码深处找到测试`org.eclipse.ui`。

选项 #3 可能可以完成，但只能通过松开调色板来完成，因为这似乎指的是深层的编辑器内容（至少这是我 2 年前的笔记中的内容 :-)）

# rest - REST - 使用单个 POST 创建嵌套资源

> ID：14275257
> 
> 赞同：8
> 
> 时间：2013-01-11T09:37:13.907
> 
> 标签：rest, restful-url

以 RESTful 的方式思考，使用 POST 在一次调用中创建资源及其子资源是否正确？在我的应用程序中，我有资源`/notices/{notice}`和子资源`/notices/{notice}/photos/{photo}`。A`{photo}`不能没有 a 存在`{notice}`，但 a`{notice}`不一定有照片。通常，我必须先做一个 POST 来创建通知，然后再做一个 POST 来添加照片。

现在我想允许创建一个直接附有照片的通知，允许创建一个对 /notices/{notice}/photos/{photo}`/notices/{notice}`的`/notices/{notice}/photos/{photo}`单个 POST 请求，其中包含描述两个资源的多部分内容（JSON通知，照片的二进制文件）。我想我只会为子资源返回 Location 标头。

本质上，我希望这可以防止 Android 客户端向服务器发送两个 POST 请求以上传带有照片的通知。这个对吗？还是违反了 REST 原则？我应该考虑将它们分开并提出两个不同的请求吗？还是将照片视为与通知不同的实体是错误的？我应该只保留`/notices/{notice}`作为资源，使用 PUT 添加照片吗？

哪个是最好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:37:28.680

**是的，**在创建父资源的同时创建子资源并没有错。甚至可以使用`PUT`而不是`POST`这样做，因为父 URL 下的所有内容都是您正在上传的资源的一部分/属于您正在上传的资源。

**编辑：**

> 现在我想允许创建一个直接附有照片的通知，允许`/notices/{notice}`创建`/notices/{notice}/photos/{photo}`一个`POST`请求`/notices/{notice}/photos/{photo}`

这个我不同意。我建议发布到集合资源的 URL `/notices`，. 您将通知及其照片作为单一表示（请求正文）提供。然后，后端将为通知和任何组成照片创建资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:44:08.113

尽管在许多情况下它是必不可少的，但 RESTful 架构风格并未正式解决多次编辑/创建问题。

当您需要报告部分集合的故障时，问题就开始了，当故障有不同的原因时，问题会变得更糟。

它将影响选择正确的超媒体控件，这对于客户在给定的事务/对话中找到前进的方式至关重要。

所以我的建议是有一个嵌套循环或 POST 请求，而不是一个 POST 来创建嵌套 Resources ，以便更容易和更清楚地解决每个 Resource 状态更改。

# mysql - MySQL Query Join 从两个表中选择不匹配的行

> ID：14275259
> 
> 赞同：2
> 
> 时间：2013-01-11T09:37:16.643
> 
> 标签：mysql, sql, join, mysql5

我有两个表如下。

* * *

```
user_id   |   username        |  first_name |   role_type
-----------------------------------------------------------
1         |   testuser1       |  testu1     |    student
2         |   testuser2       |  testu2     |    student
3         |   testuser3       |  testu3     |    student
4         |   testuser4       |  testu4     |    student
5         |   testuser5       |  testu5     |    student
6         |   testuser6       |  testu6     |    admin
7         |   testuser7       |  testu7     |    admin
----------------------------------------------------------- 
```

* * *

```
user_id   |   username         |    approved_id
----------------------------------------------------------------------
1         |   testuser1        |  3B888F52-50BC-11E2-B08B-99E5B2CADDF7
2         |   testuser2        |  3B888F52-50BC-11E2-B08B-99E5B2CADDF7
3         |   testuser3        |  3B888F52-50BC-11E2-B08B-99E5B2CADDF7
---------------------------------------------------------------------- 
```

我试过查询

```
SELECT users.* FROM users 
WHERE users.username NOT IN(
     SELECT users_approval.username FROM users_approval 
     WHERE users_approval.approved_id = "3B888F52-50BC-11E2-B08B-99E5B2CADDF7"
) AND users.role_type = "student" 
```

并得到下面的结果

* * *

```
user_id   |   username        |  first_name |   role_type
-------------------------------------------------------------
4         |   testuser4       |  testu4     |    student
5         |   testuser5       |  testu5     |    student
------------------------------------------------------------- 
```

有没有办法使用 JOIN 来获取与上面相同的结果集？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T09:44:15.963

```
SELECT users.* 
FROM   users 
       LEFT JOIN users_approval b
          ON users.username = b.username AND
             b.approved_id = "3B888F52-50BC-11E2-B08B-99E5B2CADDF7"
WHERE  users.role_type = "student" AND
       b.approved_id IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5ffa1/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:50:53.110

```
SELECT 
    users.* 
FROM users as u
LEFT JOIN users_approval as ua ON  ua.id = u.id
WHERE u.role_type = "student" AND ua.approved_id IS NULL 
```

假设您在第二个表中有 user_id 作为外键，它可以用于加入而不是使用用户名加入表

# ubuntu-10.10 - libcurl - easy.h 配置问题

> ID：14275273
> 
> 赞同：1
> 
> 时间：2013-01-11T09:37:47.310
> 
> 标签：ubuntu-10.10, php-5.2

我的php安装在安装时遇到了一些问题我收到以下错误：

配置：错误：请重新安装 libcurl 发行版 - easy.h 应该在 /include/curl/

我应该使用哪个版本的 libcurl 来安装 php-5.2.8

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:47:47.950

希望这会有所帮助，我必须在一个项目上做一些 PHP 工作，以下是我已经完成并记录在案的步骤，希望它对您或其他人有用。

**在 Ubuntu 12.4 上设置 PHP、MySql**

1- 安装 Apache2： sudo apt-get install apache2 - 打开任何网络浏览器，然后输入`http://localhost/`

您应该会看到一个名为 apache2-default/ 的文件夹。打开它，您会看到一条消息，上面写着“它有效！” ， 恭喜你！

2-安装PHP：

```
sudo apt-get install php5 libapache2-mod-php5 
```

*   重启apache2

    须藤 /etc/init.d/apache2 重启

3-测试PHP

```
sudo gedit /var/www/testphp.php 
```

*   这将打开一个名为 phptest.php 的文件。
*   将此行复制/粘贴到 phptest 文件中：

*   保存并关闭文件，打开您的网络浏览器并在网址中输入以下内容：`http://localhost/testphp.php`

- 你应该看到一个长文件打开

4- 安装 MySQL

```
sudo apt-get install mysql-server 
```

-为了让您网络上的其他计算机查看您创建的服务器，您必须首先编辑“绑定地址”。首先打开终端编辑 my.cnf 文件。

```
gksudo gedit /etc/mysql/my.cnf 
```

- 更改行 bind-address = 127.0.0.1 并将 127.0.0.1 更改为您的 IP 地址。- 这就是事情可能开始变得棘手的地方。首先在终端中输入以下内容：

```
mysql -u root 
```

- 在复制/粘贴这一行之后：

```
mysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('yourpassword'); 
```

-（确保将您的密码更改为您选择的密码。） - 安装一个名为 phpMyAdmin 的程序，这是一个编辑数据库的简单工具。

```
sudo apt-get install libapache2-mod-auth-mysql php5-mysql phpmyadmin 
```

- 安装后，我们的下一个任务是让 PHP 与 MySQL 一起工作。为此，我们需要打开一个名为 php.ini 的文件。要打开它，请键入以下内容：

```
gksudo gedit /etc/php5/apache2/php.ini 
```

现在我们将不得不通过去掉分号 (;) 来取消对以下行的注释。更改此行：

```
;extension=mysql.so 
```

看起来像这样：

```
extension=mysql.so 
```

现在只需重新启动 Apache，一切就绪！

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:41:10.230

```
Try With This
None of these will allow you to compile PHP with cURL enabled.

In order to compile with cURL, you need libcurl header files (.h files). They are usually found in /usr/include/curl. They generally are bundled in a separate development package.

Per example, to install libcurl in Ubuntu:

sudo apt-get install libcurl4-dev

Then you can just do:

./configure --with-curl # other options...
If you compile cURL manually, you can specify the path to the files without the lib or include suffix. (e.g.: /usr/local if cURL headers are in /usr/local/include/curl). 
```

# vb.net - 在列表框中查找部分文本

> ID：14275274
> 
> 赞同：-2
> 
> 时间：2013-01-11T09:37:46.840
> 
> 标签：vb.net

我得到了一些代码来查找列表框中包含的文本，但这不是我需要的。当用户在文本框（即搜索字段）中输入时，他们必须输入准确的文本，而不是文本的一部分。有没有办法在列表框中找到值/文本的一部分？

例如，我有一个包含这些项目的列表框：

> 1.  数据1
> 2.  数据2

当我在搜索字段（文本框/富文本框）中键入 (2) 时，我希望选择包含“2”值的第二个项目。

我该如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:57:34.363

你可以使用`IndexOf`

```
Dim hits = From item In listBox1.Items.Cast(Of String)()
           Where item.IndexOf(txtSearch.Text, StringComparison.OrdinalIgnoreCase) >= 0
If hits.Any Then
    listBox1.SelectedItem = hits.First()
End If 
```

如果您不想忽略大小写，只需使用`String.Contains`而不是`String.IndexOf`.

请注意，上面是一个 linq 查询，因此它不适用于 .NET 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T19:28:29.470

您没有提到是否要在列表框中保留其他项目（与搜索查询不匹配）。

如果您只想将项目保留在匹配或包含您的搜索查询的列表框中，那么您可以在 stackoverflow 上查看此答案。

[匹配列表框中字符串的开头或匹配列表框项目中字符串的某些部分](https://stackoverflow.com/questions/1165944/vb-net-filtering-listitems-problem/25250608#25250608)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:58:09.417

您必须知道要搜索的字词。例如，文本包含搜索文本中的任何字母，完整的单词，不搜索符号等。您必须“手动”进行，没有搜索相似文本的功能。

例如：

```
Private Sub SearchBox_TextChanged(ByVal sender As System.Object, _
ByVal e As System.EventArgs) Handles SearchBox.TextChanged
    Dim iFound As Integer = -1

    For i As Integer = 0 To SearchBox.TextLength - 1
        If TextBox1.Text.Contains(SearchBox.Text(i)) Then
            iFound = TextBox1.Text.IndexOf(SearchBox.Text(i))
            Exit For
        End If
    Next

    If iFound >= 0 Then
        TextBox1.Select(iFound, 1)
    End If
End Sub 
```

# python - 解析 html、pyparser 或 beautifulsoup

> ID：14275279
> 
> 赞同：1
> 
> 时间：2013-01-11T09:38:18.997
> 
> 标签：python

海岸 (NS / WS) = EUR35.99 / US$46.09

货币对象 = EUR42.00 / US$53.79

```
<div id="t142_1" class="text" >Data Center</div>
<div id="t143_1" class="text" >Coast (NS / WS)</div>
<div id="t144_1" class="text" >EUR35.99 / US$46.09</div>
<div id="t145_1" class="text" >Money Object</div>
<div id="t146_1" class="text" >EUR42.00 / US$53.79</div>
<div id="t147_1" class="text" >Date</div>
<div id="t148_1" class="text" >7-Nov-2013 / 7-Nov-2013</div>
<div id="t149_1" class="text" >Opinions</div> 
```

如何使用 pyparser 或 beautifulsoup 从“Money Object”和“Coast (NS / WS)”的代码值中获取？

我需要变量（例如）：

```
coast = 'EUR35.99 / US$46.09'

money_obj = 'EUR42.00 / US$53.79' 
```

编辑：

```
a = soup.find_all(text='Money Object')
for i in a:
    print i.find_next('div').text 
```

但返回：

```
Change

EUR42.00 / US$53.79 
```

我只需要一个值 (EUR42.00 / US$53.79)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:49:12.780

`text`您的示例 HTML在哪里：

```
from bs4 import BeautifulSoup as bs

soup = bs(text)
print soup.find(text='Money Object').find_next('div').text
# EUR42.00 / US$53.79 
```

其内容为 - 查找`Money Object`内容作为其文本内容，然后获取下一个`div`文本...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:12.733

使用`pyparsing`：

```
from pyparsing import *

data = """\
<div id="t142_1" class="text" >Data Center</div>
<div id="t143_1" class="text" >Coast (NS / WS)</div>
<div id="t144_1" class="text" >EUR35.99 / US$46.09</div>
<div id="t145_1" class="text" >Money Object</div>
<div id="t146_1" class="text" >EUR42.00 / US$53.79</div>
<div id="t147_1" class="text" >Date</div>
<div id="t148_1" class="text" >7-Nov-2013 / 7-Nov-2013</div>
<div id="t149_1" class="text" >Opinions</div>
"""

divS,divE = makeHTMLTags("div")

div = divS + SkipTo(divE).setResultsName("body") + divE
divS.setParseAction( withAttribute(id="t144_1") )

for tokens,start,end in div.scanString(data):
    print "cost = " + tokens.body

divS.setParseAction( withAttribute(id="t146_1") )
for tokens,start,end in div.scanString(data):
    print "money_obj = " + tokens.body 
```

输出：

```
>>> 
cost = EUR35.99 / US$46.09
money_obj = EUR42.00 / US$53.79 
```

# crystal-reports - Crystal Report 不会对重复的记录求和

> ID：14275280
> 
> 赞同：0
> 
> 时间：2013-01-11T09:38:21.793
> 
> 标签：crystal-reports, crystal-reports-2008

我在 Crystal Report 2008 工作，我有这样的数据：

```
 Date             KG         MT         SQM
 --------------------------------------------
01-01-2013       25000        25         
01-01-2013       15000        15
01-01-2013       15000        15            -----(duplicated)
01-02-2013       13000        13  
01-02-2013       12000        12  
01-03-2013       18000        18 
01-03-2013       33000        33 
```

然后我尝试按日期对其进行分组，因此输出如下所示：因此它已经删除了重复项并毫无问题地求和了值。

```
 Date             KG         MT         SQM
 --------------------------------------------
 01-01-2013       40000        40        55000 
 01-02-2013       25000        25        25000
 01-03-2013       51000        51        51000 

 TOTAL            116,000      116      131,000 
```

然后我想添加 SQM，当我对其求和时，它会将组中的所有记录也与重复记录相加。（如果你要对第三个字段求和，它也包括在总和中，重复的记录应该只有 '116,000' 而不是 '131,000'）

我的问题，如果重复，我该如何抑制，同时它会给我组的摘要以显示正确的值？

谢谢，

船长16

# email - 使用不同于邮件的其他框架

> ID：14275282
> 
> 赞同：0
> 
> 时间：2013-01-11T09:38:22.717
> 
> 标签：email, iis, asp-classic, smtp

我必须将一些客户网站从一台（旧）服务器移动到另一台（较新）服务器。所有站点都在 ASP 中编程。一位客户使用 persits 框架向他的用户发送电子邮件（为他的网上商店），例如

```
Set Mail = Server.CreateObject("Persits.MailSender")
Mail.Host = "mail.domain.com"
Mail.CharSet = "ISO..."
Mail.Username = "Admin@domain.com"
Mail.Password = "password"
Mail.From = shopmail
Mail.FromName = "Name"
Mail.AddAddress shopmail
Mail.Subject = "Order " & date
Mail.Body = msgBody
Mail.Send 
```

这个框架没有安装在新服务器上，也没有安装 SMTP 服务。

如果没有上述功能，我怎么能完成邮件发送？有没有办法通过 ASP 访问外部 STMP 服务器？

提前致谢。最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:17:12.653

我找到了一个解决方案，[这里](http://www.codeguru.com/csharp/.net/net_asp/email/article.php/c19327/Sending-Email-Via-an-External-SMTP-Server-Using-CDO.htm)有很好的记录（对于所有感兴趣的人:)）。

# c# - 整数序列，我必须在其中找到重复次数最多的一个。如果有很多重复的数字，找到最小值

> ID：14275285
> 
> 赞同：0
> 
> 时间：2013-01-11T09:38:24.917
> 
> 标签：c#

有一个整数序列，我必须在其中找到重复次数最多的值。如果有许多重复值，请找到所有重复值中的最小值。

示例：如果是 {-10,17,13,17,-10,21}，则结果为 -10

到目前为止我已经走了多远：

```
 static void YL2()
    {
        Random random = new Random();

        int mitu = 10, minv = 0, maxv = 20;
        int[] mas1 = new int[mitu];
        int i;
        int lowest;

        for (i = 0; i < mitu; i++) mas1[i] = random.Next(minv, maxv);
        for (i = 0; i < mitu; i++)
            Console.Write("{0,4}", mas1[i]);
        Console.Write("\n\n");

        int count = 0;
        List<int> checkedNumbers = new List<int>();

        foreach (int t in mas1)
        {
            if (!checkedNumbers.Contains(t))
            {
                foreach (int m in mas1)
                {
                    if (m == t)
                    {
                        count++;
                    }
                }
                Console.WriteLine("Number {0} is repeated {1} times", t, count);
                count = 0;
                checkedNumbers.Add(t);
            }
        }

        for (lowest = mas1[0], i = 1; i < mitu; i++)
        {
            if (mas1[i] < lowest) lowest = mas1[i];
        }
        Console.Write("Lowest value is {0}\n\n", lowest);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:49:29.583

不涉及替换您使用 LINQ 编写的所有代码的方式，因为您自己已经完成了很多：

在您的声明中，替换`int lowest;`为

```
bool foundOne = false;
int lowest = int.MaxValue; 
```

我们将继续跟踪最低的重复次数。

在你之后`Console.WriteLine("Number {0} is repeated {1} times", t, count);`，添加

```
if (count > 1 && t < lowest)
{
     foundOne = true;
     lowest = t;
} 
```

即，如果数字是重复的，并且它低于我们迄今为止找到的最低重复数字，则改为存储这个数字。此外，我们会跟踪是否发现*任何*重复的数字。请注意，因为我们设置`lowest`为`int.MaxValue`开头，所以我们找到的第一个重复数字将始终低于它（*或者*它是相同的，在这种情况下它无论如何都是正确的）。

然后在最后，而不是你的`for`循环，有以下内容：

```
if (foundOne)
    Console.Write("Lowest repeated value is {0}\n\n", lowest);
else
    Console.Write("No repeated values found\n\n"); 
```

以防万一每个数字都不一样。

这*比*LINQ 效率低，因为您在列表中循环的次数远远超出了您的需要，但我认为您可能会喜欢一个不会​​丢弃您所做的一切的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:45:00.777

Linq方式：

```
var lowestMaxCountDuplicate = sequence
               .GroupBy(i => i)
               .OrderByDescending(g => g.Count())
               .ThenBy(g => g.Key)
               .First().Key; 
```

[**演示**](http://ideone.com/hCmraU)

# c# - 如果请求的实体在 Db 中不存在，我应该抛出哪个异常？

> ID：14275287
> 
> 赞同：14
> 
> 时间：2013-01-11T09:38:37.203
> 
> 标签：c#, .net, entity-framework, exception

想象一个方法，它试图检索一个实体，该实体根据业务逻辑（针对特定情况）应该存在于 Db 中。

当我尝试通过我的存储库从数据库中检索它时，如果我回来了`null`，我应该抛出哪个异常？（我在想`ObjectNotFoundException`）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:41:51.520

人们可能会争论是否需要例外。为什么不返回一个空集合或 null？

您应该使用的异常类型取决于您在应用程序中使用异常的方式。

您可能会考虑的第一件事是它是功能错误（如果用户更正某些内容）还是技术错误（开发人员是否犯了错误）。

您应该考虑的另一件事是方法调用者的自然情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:45:50.753

对于这种情况，我不会抛出异常，只需处理`null`返回值即可。开始使用异常来控制应用程序流并不是一个好主意。

如果实体*确实*应该存在，那么您可以处理`null`业务层中的值并抛出自定义域异常，例如`EntityNotFoundException`，但是，我不会将这种逻辑放在存储库级别。

# symfony - 使用 capifony 部署 symfony2 时资产安装错误

> ID：14275290
> 
> 赞同：1
> 
> 时间：2013-01-11T09:38:47.047
> 
> 标签：symfony, deployment, capifony

我试图用 capifony 部署一个 symfony2 项目。

我收到以下错误：

```
--> Updating code base with rsync_with_remote_cache strategy
--> Creating cache directory................................✔
--> Creating symlinks for shared directories................✔
--> Creating symlinks for shared files......................✔
--> Normalizing asset timestamps............................✔
--> Downloading Composer....................................✔
--> Updating Composer dependencies..........................✔
--> Building bootstrap file.................................✔
--> Updating Composer.......................................✔
--> Dumping an optimized autoloader.........................✔
--> Installing bundle's assets..............................✘
*** [err :: server.de] 
*** [err :: server.de] 
*** [err :: server.de] 
*** [err :: server.de] [Symfony\Component\DependencyInjection\Exception\ParameterNotFoundException]
*** [err :: server.de] You have requested a non-existent parameter "secret".
*** [err :: server.de] 
*** [err :: server.de] 
*** [err :: server.de] 
*** [deploy:update_code] rolling back
failed: "sh -c 'sh -c '\\''cd /var/www/server.de/releases/20130111092102 && php app/console assets:install web --env=prod'\\'''" on server.de 
```

我的部署.rb

```
set :application, "Testproject"
set :domain,      "server.de"
set :deploy_to,   "/var/www/server.de/"
set :app_path,    "app"
set :user,        "username"
ssh_options[:forward_agent] = true

set :repository,  "file:///home/kai/webprojects/testproject/.git"
set :scm,         :git
set   :deploy_via,    :rsync_with_remote_cache
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, or `none`

set :model_manager, "doctrine"
# Or: `propel`

role :web,        domain                         # Your HTTP server, Apache/etc
role :app,        domain                         # This may be the same as your `Web` server
role :db,         domain, :primary => true       # This is where Symfony2 migrations will run

set :use_sudo,          false

set  :keep_releases,  3
set  :update_vendors, true
set  :shared_files,      ["app/config/parameters.yml"]
set  :shared_children,     [app_path + "/logs", web_path + "/uploads", "vendor"]
set  :use_composer, true 
```

手动运行： php app/console assets:install web --env=prod 可以正常工作

**编辑：** 由于 PéCé 的评论，因为秘密参数：这是我的 app/config/parameters.yml

```
parameters:
    database_driver:   pdo_mysql
    database_host:     127.0.0.1
    database_port:     ~
    database_name:     dbName
    database_user:     dbName
    database_password: secretPassword

    mailer_transport:  smtp
    mailer_host:       localhost
    mailer_user:       ~
    mailer_password:   ~

    locale:            de
    secret:            SomeSecret4465466

    beryllium_cache.client.servers: { "localhost": 11211 } 
```

感谢您的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:25:06.277

我找到了答案。在 capifony 文档中清楚地写着：

最后一步是配置你的 app/config/parameters.yml 文件。最好的方法是手动在服务器上的共享文件夹中创建此文件：

```
ssh your_deploy_server
mkdir -p /var/www/my-app.com/shared/app/config
vim /var/www/my-app.com/shared/app/config/parameters.yml 
```

正确配置 parameters.yml 文件后，您应该能够测试已部署的应用程序。在每次后续部署中，相同的 app/config/parameters.yml 文件将被符号链接到您的应用程序中，这意味着您只需要在初始部署后进行配置。

那是 ：）

# c++ - 如何从 C++ 中向量的最后一个元素中获取字段？

> ID：14275291
> 
> 赞同：63
> 
> 时间：2013-01-11T09:38:48.580
> 
> 标签：c++, vector, structure

我有一个结构的向量**vec**。这样的结构有元素`int a, int b, int c`。我想`int var`从向量中的最后一个结构中分配一些元素 c。请问你能给我这个简单的解决方案吗？我要像这样排成一行：

```
var = vec.end().c; 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-11T09:45:35.203

关于获取对向量中最后一个元素的访问权的问题的直接答案可以使用`back()`成员来完成。如：

```
int var = vec.back().c; 
```

注意：如果您的向量可能为空，则此类调用会`back()`导致未定义的行为。在这种情况下，您可以使用成员在使用*之前*检查向量的空状态：`back()``empty()`

```
if (!vec.empty())
   var = vec.back().c; 
```

这两种方法中的一种可能适用于您的需求。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-11T09:44:46.090

`vec.end()`是一个迭代器，它引用向量中的末尾位置。因此，您不能尊重它并访问成员值。`vec.end()`迭代器始终有效，即使在空向量中（在这种情况下`vec.end() == vec.begin()`）

如果要访问向量的最后一个元素，请使用`vec.back()`，它返回一个引用（而不是迭代器）。但是请注意，如果向量为空，这将导致未定义的行为；很可能是崩溃。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T09:40:39.000

使用[`back()`](http://en.cppreference.com/w/cpp/container/vector/back)：

```
var = vec.back().c; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T09:41:25.940

试试这个：`var = vec.back().c;`

您也可以修改您的代码，例如：

```
var = vec.rbegin()->c; 
```

在这两个版本中，首先确保向量不为空！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T09:40:56.183

`var = vec.back().c;`是你想要的。

`end()`返回向量末尾的迭代器（不是元素）。`back()`返回对最后一个元素的引用。它也有对应`front()`的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T09:41:47.163

您可以简单地使用`back`，因为它返回对最后一个元素的引用。
`var = vec.back().c`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T09:42:45.817

您可以使用该`std:vector<T>:back()`功能，例如`vec.back().c`。见[http://www.cplusplus.com/reference/vector/vector/back/](http://www.cplusplus.com/reference/vector/vector/back/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-27T05:02:28.280

以下代码适用于我。

```
int var;
var =  *(std::end(bar)-1);
std::cout<<var<<std::endl; 
```

# phantomjs - 调用远程 javascript 函数

> ID：14275299
> 
> 赞同：0
> 
> 时间：2013-01-11T09:39:19.643
> 
> 标签：phantomjs, casperjs

通过使用 phantomjs 或 casperjs，是否可以执行在远程站点上定义的 javascript 函数？

我在文档中看到的只是在 phantomjs 和 casperjs 中调用内置函数，无论如何都可以使用 phantomjs 和/或 casperjs 来执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:47:55.460

使用其代码评估功能（有关更多详细信息，请参阅[文档](https://github.com/ariya/phantomjs/wiki/Page-Automation)），例如：

```
page.evaluate(function () {
    // do whatever you want, including calling any function
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T12:20:26.637

2年后，我偶然发现了同样的问题。这是您正在寻找的解决方案。

```
page.evaluateJavaScript(function(){
  javascriptFunction();
}); 
```

# javascript - 如何在纯 JavaScript 中获取 div 的边距值？

> ID：14275304
> 
> 赞同：67
> 
> 时间：2013-01-11T09:39:32.223
> 
> 标签：javascript, margin

我可以在 jQuery 中使用

```
$(item).outerHeight(true); 
```

但是我如何使用 JS？

我可以得到 li 的高度

```
document.getElementById(item).offsetHeight 
```

但是当我尝试margin-top时，我总是会得到“”：

```
document.getElementById(item).style.marginTop 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-01-11T09:41:57.250

对象上的属性`style`只是直接应用于元素的样式（例如，通过`style`属性或在代码中）。因此`.style.marginTop`，只有在您有专门分配给该元素的东西（不是通过样式表等分配）时，才会有一些东西。

要获取对象的当前计算样式，您可以使用[`currentStyle`](http://msdn.microsoft.com/en-gb/library/ie/ms535231%28v=vs.85%29.aspx)属性（Microsoft）或[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)函数（几乎所有其他人）。

例子：

```
var p = document.getElementById("target");
var style = p.currentStyle || window.getComputedStyle(p);

display("Current marginTop: " + style.marginTop); 
```

公平警告：您得到的可能不是像素。例如，如果我`p`在 IE9 中的一个元素上运行上述内容，我会返回`"1em"`.

[实时复制](http://jsbin.com/alurok/1)| [来源](http://jsbin.com/alurok/1/edit)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-07T20:08:04.357

`outerHeight`此外，您可以为 HTML 元素创建自己的元素。我不知道它是否适用于 IE，但它适用于 Chrome。`currentStyle`也许，您可以使用上面答案中的建议来增强下面的代码。

```
Object.defineProperty(Element.prototype, 'outerHeight', {
    'get': function(){
        var height = this.clientHeight;
        var computedStyle = window.getComputedStyle(this); 
        height += parseInt(computedStyle.marginTop, 10);
        height += parseInt(computedStyle.marginBottom, 10);
        height += parseInt(computedStyle.borderTopWidth, 10);
        height += parseInt(computedStyle.borderBottomWidth, 10);
        return height;
    }
}); 
```

这段代码允许您执行以下操作：

```
document.getElementById('foo').outerHeight 
```

根据[caniuse.com 的说法，](http://caniuse.com/#feat=getcomputedstyle)主要浏览器（IE、Chrome、Firefox）都支持 getComputedStyle。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-03T12:37:46.233

当我在寻找这个问题的答案时，我在这个网站上发现了一些非常有用的东西。您可以在[http://www.codingforums.com/javascript-programming/230503-how-get-margin-left-value.html 查看](http://www.codingforums.com/javascript-programming/230503-how-get-margin-left-value.html)。帮助我的部分如下：

```
/***
 * get live runtime value of an element's css style
 *   http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element
 *     note: "styleName" is in CSS form (i.e. 'font-size', not 'fontSize').
 ***/
var getStyle = function(e, styleName) {
  var styleValue = "";
  if (document.defaultView && document.defaultView.getComputedStyle) {
    styleValue = document.defaultView.getComputedStyle(e, "").getPropertyValue(styleName);
  } else if (e.currentStyle) {
    styleName = styleName.replace(/\-(\w)/g, function(strMatch, p1) {
      return p1.toUpperCase();
    });
    styleValue = e.currentStyle[styleName];
  }
  return styleValue;
}
////////////////////////////////////
var e = document.getElementById('yourElement');
var marLeft = getStyle(e, 'margin-left');
console.log(marLeft);    // 10px
```

```
#yourElement {
  margin-left: 10px;
}
```

```
<div id="yourElement"></div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-06-20T14:09:52.560

这是我的解决方案：

**第 1 步：选择元素**

**第 2 步：使用 getComputedStyle 并向其提供元素**

**第 3 步：现在访问所有属性**

```
const item = document.getElementbyId('your-element-id');
const style= getComputedStyle(item);
const itemTopmargin = style.marginTop;
console.log(itemTopmargin) 
```

它将为您提供您可能不想要的**px**单位（如“16px”）的边距。您可以使用提取值**`parseInt()`**

```
const marginTopNumber = parseInt(itemTopmargin)
console.log(marginTopNumber) 
```

它只会给你数值（没有任何单位）。

# computer-vision - 计算机可读的可视代码，易于缩小：多波段 QR？

> ID：14275305
> 
> 赞同：0
> 
> 时间：2013-01-11T09:39:35.020
> 
> 标签：computer-vision, qr-code, image-compression

我正在寻找一种方法将图像数据编码成另一个大小相当、机器可读的图像。

这样做的目的是社交媒体的图像加密任务：编码的图像可以重新采样、缩小，并且应该仍然对解码和恢复有效，但质量会相应降低：分辨率可能更低，颜色可能更少。

QR 码是将数据编码为机器可读的视觉格式的一种行之有效的方法。但是，它的任务的缺点是显而易见的：

1.  下采样到小于 1px:1dot 的分辨率会立即丢失所有信息；
2.  它的信息容量太低，无法包含相同像素大小的彩色图像。

有一个彩色版本的 QR 码在信息容量方面更好，但它仍然缺乏任何扩展的可持续性。

所以我想知道是否还有其他可能叠加的 QR 突变，从而使较大的细节层在缩放时能够幸免，从而模糊了最小尺寸的细节层。通过这种方式，频率分离的图像可以被编码成多层二维码，叠加。

Meybe除了QR以外的方法可以将图像数据压缩和编码成另一张图像，适合识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:43:12.843

您的目标是压缩、加密还是纠错？加密和纠错会将数据添加到有效负载中，并且没有任何东西可以在任意重采样和降级后幸存下来。

QR 码没有加密模式，图像格式也没有（PDF 除外）。您已经在考虑制作一种东西，一种格式，如果您涉及加密，则需要在查看器端进行自定义处理。那么，为什么不把图像通过加密算法呢？

也许您可以更多地说明您要实现的目标.. 使用加密进行有损传输？

QR 码几乎可以肯定是不相关的。

# ios - GPS 坐标没有出现在 UIImagePickerControllerMediaMetadata 中

> ID：14275311
> 
> 赞同：2
> 
> 时间：2013-01-11T09:39:59.053
> 
> 标签：ios, objective-c, gps, uiimage

我试图从相机点击的图像的元数据中获取位置。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSDictionary *metadata = [info objectForKey: UIImagePickerControllerMediaMetadata];
    NSLog(@"%@",metadata);

} 
```

我得到的日志是

> ```
> {
> DPIHeight = 72;
> DPIWidth = 72;
> Orientation = 6;
> "{Exif}" =     {
>     ApertureValue = "2.526068811667588";
>     BrightnessValue = "1.530886431890497";
>     ColorSpace = 1;
>     DateTimeDigitized = "2013:01:11 14:58:42";
>     DateTimeOriginal = "2013:01:11 14:58:42";
>     ExposureMode = 0;
>     ExposureProgram = 2;
>     ExposureTime = "0.0303030303030303";
>     FNumber = "2.4";
>     Flash = 32;
>     FocalLenIn35mmFilm = 35;
>     FocalLength = "1.85";
>     ISOSpeedRatings =         (
>         320
>     );
>     MeteringMode = 5;
>     PixelXDimension = 640;
>     PixelYDimension = 480;
>     SceneType = 1;
>     SensingMethod = 2;
>     ShutterSpeedValue = "5.058893689053568";
>     WhiteBalance = 0;
> };
> "{TIFF}" =     {
>     DateTime = "2013:01:11 14:58:42";
>     Make = Apple;
>     Model = "iPad 2";
>     Software = "6.0";
>     XResolution = 72;
>     YResolution = 72;
> };
> } 
> ```

但是没有gps坐标。注意-我的班级没有核心位置管理器。我不确定是否需要。我是否必须使用核心位置服务以编程方式将 GPS 坐标添加到我的图像中？

# javascript - 三元运算符的单次返回

> ID：14275312
> 
> 赞同：9
> 
> 时间：2013-01-11T09:40:11.380
> 
> 标签：javascript, ternary-operator

我想知道是否可以为单次返回编写三元运算符。我在网上尝试了谷歌，但找不到答案。或者它不称为三元运算符？

非常感谢您的建议。

`If(A == 1) execute_function(); into A == 1 ? execute_function() //???Possible???`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-21T10:59:42.667

这是最短的方法。

```
A == 1 && execute_function(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T09:44:03.080

是的：

```
(exists == 1) ? execute_function() : false; 
```

如果存在为真则运行函数否则不会

补充：像下面这样做会更好：

```
if( A == 1 ) {
  execute_function();
} 
```

由于在上述情况下使用三元运算符并不是那么富有成效，因为您只检查条件的真实方面而不关心虚假方面的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T09:42:39.900

```
condition ? (runTrue) : (runFalse); 
```

可在 javascript 中使用。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-22T20:36:04.997

正如有人已经提到的，`A == 1 && execute_function();`是最短的。但是，另一种选择是使用单行 if 语句：

`if( A == 1 ) execute_function();`

# python - 使用 selenium 和 python 发布到 facebook 墙上

> ID：14275313
> 
> 赞同：2
> 
> 时间：2013-01-11T09:40:13.377
> 
> 标签：python, facebook, firefox, selenium-webdriver

我在 Windows 7 上使用带有 python(2.7) 绑定的 firefox 18.0 和 selenium webdriver。使用所有这些我已经能够登录到 facebook，转到用户页面，将文本发送到墙上的帖子字段。但是当我让它点击发布时，它不会发布。我观察到，当我将密钥发送到墙上的帖子字段时，文本看起来很褪色，但是当我手动输入字段时，文本看起来很暗。这可能是问题所在。我开始这样做是为了看看是否可以这样做......没有真正的目的......但现在它不起作用，它让我发疯。有任何想法吗？

```
 driver = self.driver
    driver.get("https://www.facebook.com/")
    driver.find_element_by_id("email").clear()
    driver.find_element_by_id("email").send_keys("mailid@email.com")
    driver.find_element_by_id("pass").clear()
    driver.find_element_by_id("pass").send_keys("password")
    driver.find_element_by_id("u_0_4").click()

    #i wanted to post multiple times.. but it doesn't work even once
    for i in range(1,11):
        driver.get("https://www.facebook.com/<username>")
        el=driver.find_element_by_id("u_0_1r")#post field
        el.clear()
        print i
        el.click()
        el.clear()
        el.send_keys(Keys.RETURN)
        time.sleep(1)
        el.click()
        #assume fwords is a list of words
        el.send_keys('test output: '+random.choice(fwords))
        el.click()
        el.click()
        time.sleep(2)
        driver.find_element_by_id("u_0_1m").click()
        driver.find_element_by_xpath("//form[@id='u_0_1l']/div/div[4]/div/ul/li[2]/label/input").click()
        time.sleep(8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T21:36:45.347

它适用于 selenium 的 chrome 驱动程序。

# iphone - 在 iPhone SDK 的 UIAlertView 中点击按钮时打开 Settings.app

> ID：14275314
> 
> 赞同：1
> 
> 时间：2013-01-11T09:40:21.563
> 
> 标签：iphone, xcode, button, settings, uialertview

> **可能重复：**
> [从另一个应用程序打开设置应用程序](https://stackoverflow.com/questions/5655674/opening-the-settings-app-from-another-app)

每当我显示提示时，有没有办法将用户引导到 Settings.app `UIAlertView`？此提示提醒用户他的位置服务已关闭，我希望用户在点击我的`UIAlertView`.

更新：我正在寻找此处所述的类似代码：

[如何从 ipad 中的应用程序启动设置应用程序中的应用程序设置选项卡](https://stackoverflow.com/questions/12909615/how-to-launch-myapplication-settings-tab-in-settings-app-from-my-application-in/13195833#13195833)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T09:44:39.850

### iOS 8 和 iOS 9

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]]; 
```

~~没有办法做到这一点。~~

~~因为直到现在（2013 年 1 月 11 日），设置应用程序还没有可用的**url 方案。**~~

### iOS 6

您不能在 iOS 6 上执行此操作。

### iOS 5 及以下 (< iOS 5.1)

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]]; 
```

请参阅此答案以获取更多信息[从我在 iPhone 上的应用程序调用官方 *Settings* 应用程序](https://stackoverflow.com/questions/4496813/call-the-official-settings-app-from-my-app-on-iphone)

# android-activity - 如何在android中调用以前的活动？

> ID：14275315
> 
> 赞同：1
> 
> 时间：2013-01-11T09:40:21.953
> 
> 标签：android-activity

我的应用中有五个活动，Act1->Act2->Act3->Act4->Act5，

如上所述，所有活动都是单向进行的，现在我必须在成功完成我的 Act5 的任务后再次调用 Act2，所以它工作良好并向我展示 Act2（我`startActivity(callIntent)`在 Act5 中使用过再次向我展示 Act2），之后这当我点击 Act2 中的后退按钮时，我有 Act1（我`startActivity(callIntent)`在 Act2 中使用过再次向我展示 Act1）这是我想要的.....但问题是当我点击 Act1 的后退按钮时，它会放我在第二幕。但我想从那里退出，因为 Act1 是第一个初始活动。

如何将焦点设置到我的隐藏活动，而不是创建 Intent 并调用 startActivity。

任何想法？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:00:03.337

而不是以下代码（带有标志`Intent.FLAG_ACTIVITY_NEW_TASK`）：

```
Intent callIntent = new Intent(Intent.ACTION_CALL); 
callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
callIntent.setClass(CurrentActivity.this,PreviousActivity.class);
startActivity(callIntent); 
```

尝试使用以下一个`Intent.FLAG_ACTIVITY_CLEAR_TOP`

```
Intent callIntent = new Intent(Intent.ACTION_CALL); 
callIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
callIntent.setClass(CurrentActivity.this,PreviousActivity.class);
startActivity(callIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:49:11.777

经过长时间的研究，我对应用程序中所有活动的“回栈”有了相当多的了解。

每次我移动到另一个活动并打开以前使用过的活动`Intent.startActivity()`时`flag FLAG_ACTIVITY_NEW_TASK`，所以每次我在“后台堆栈”中添加新活动时。

我已经尝试过使用意图标志，因为`FLAG_ACTIVITY_CLEAR_TOP`从“后台堆栈”调用先前的活动时`Intent.startActivity()`，我得到了回调先前活动的解决方案并清除调用一个活动上方的所有堆栈顶部活动。所以现在后退按钮可以根据我的需要正常工作。

让我们看看我调用上一个活动的问题 `A = activity; A1->A2->A3->A4->A5->B2`，现在如果你点击后退按钮，你将拥有 A1 活动，在点击 A1 的后退按钮后，你再次拥有在 A5 之后调用的 B2 活动，依此类推。

在使用`FLAG_ACTIVITY_CLEAR_TOP`A5 活动并再次调用 A2 后（不创建新活动但调用珍贵的活动）我有以下情况。

```
A = activity; A1->A2->A3->A4->A5 
```

调用以前的 A2 活动，我有以下情况。 `A1->A2`只要。

谢谢。

# c# - Windows Phone 8 读取智能卡

> ID：14275321
> 
> 赞同：1
> 
> 时间：2013-01-11T09:40:39.100
> 
> 标签：c#, windows-phone-8

是否可以在 Windows Phone 8 中使用 pinvoke.net？

像`[DllImport(" winscard.dll ")]`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:20:54.787

不，您不能在 WP8 中使用 DLLImport。

我已经回答了一个关于在 WP8 上阅读信用卡的类似问题，该问题也适用于智能卡。请参阅@Windows [8 Phone - 访问 NFC 阅读器？](https://stackoverflow.com/questions/13314228/windows-8-phone-access-to-nfc-reader/13334723#13334723)

# c++ - vector::iterator 和 set::iterator 的原理区别

> ID：14275323
> 
> 赞同：1
> 
> 时间：2013-01-11T09:40:48.773
> 
> 标签：c++, stl, vector, iterator, set

我在 C++\STL 测试纸之一中注意到了这样一个问题。

有任何想法吗？

可能，这与以下事实有关，即删除集合中的元素会导致向量中的“全部删除后”迭代器失效，并且只有集合中删除的迭代器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:11:27.163

这种差异更多地与容器的不同性质有关，而不是与迭代器本身有关。

一方面与这些容器的“已排序/未排序”性质有关：您不能修改位于已排序容器内的元素，因为它会影响顺序。

另一方面与“紧凑/扩展”存储机制有关：向量中的元素一起存储在单个分配块中，集合（或列表）中的元素单独存储。因此，向量中的插入/删除会导致元素位移的变化。在集合或列表中插入/删除只会导致重新链接，所有现有元素都保留其位置（因此不会使引用它们的迭代器无效）

另一个方面 - 总是与存储相关 - 是 vector::iterator 是“**随机访问**”： ++i, i+=3, i+=100 需要相同的时间，因为可以算术计算位移。在集合（和“链接容器”）中，迭代器只是“**双向**”：++i 和 --i 是立即计算的，但 i+=5 或 i+=100 需要完全不同的时间（至少需要线性循环）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:52:25.247

a`set::iterator`所指的对象是`const`，因为不允许按顺序更改 a 中条目的值`set`（并且允许更改值可能会破坏顺序）。对于`vector::iterator`.

例如：

```
#include <vector>
#include <set>

int main()
{
    std::set<int> s;
    std::vector<int> v;

    *v.begin() = 4;
    *s.begin() = 4; // Line 10.
    return 0;
} 
```

MSVC++ 编译器发出：

> main.cpp(10) : 错误 C3892: 'std::_Tree<_Traits>::begin' : 你不能分配给 const 的变量

g++ 编译器发出：

> 错误：分配只读位置 's.std::set<_Key, _Compare, _Alloc>::begin with _Key = int, _Compare = std::less, _Alloc = std::allocator.std::_Rb_tree_const_iterator<_Tp >::operator* with _Tp = int'</p>

# github - 詹金斯没有建立 github 项目

> ID：14275326
> 
> 赞同：1
> 
> 时间：2013-01-11T09:40:50.170
> 
> 标签：github, jenkins, ubuntu-12.04

好的，所以，在我解释我的问题之前，我必须提到我对 jenkins 和 github 都很陌生。问题是，我已经设法将 jenkins Job 与 github 项目附加在一起，但是当我尝试在詹金斯，我的电子邮件收到以下错误：

```
 Started by user anonymous
        Building in workspace <http://127.0.0.1:8080/job/work_test/ws/>
        Checkout:workspace / <http://127.0.0.1:8080/job/work_test/ws/> - hudson.remoting.LocalChannel@7932e6fd
        Using strategy: Default
        Fetching changes from 1 remote Git repos

itory
    Fetching upstream changes from git@github.com:[user]/[project]-portal.git
    Seen branch in repository origin/HEAD
    Seen branch in repository origin/develop
    Seen branch in repository origin/development_umair
    Seen branch in repository origin/logs_redesign
    Seen branch in repository origin/master
    Seen branch in repository origin/overviewtabs
    Commencing build of Revision b65f1a84d55a048accbcf7af2f56bb357fe73b64 (origin/overviewtabs)
    Checking out Revision b65f1a84d55a048accbcf7af2f56bb357fe73b64 (origin/overviewtabs)
    FATAL: Could not apply tag jenkins-[project name]_test-17
hudson.plugins.git.GitException: Could not apply tag [project name] test-17
    at hudson.plugins.git.GitAPI.tag(GitAPI.java:829)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1270)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1231)
    at hudson.FilePath.act(FilePath.java:852)
    at hudson.FilePath.act(FilePath.java:825)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1231)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1325)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:682)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:587)
    at hudson.model.Run.execute(Run.java:1543)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
    Caused by: hudson.plugins.git.GitException: Command "git tag a -f -m Jenkins Build #17 jenkins[project name]_test-17" returned status code 128:
    stdout:
    stderr:
    Please tell me who you are.
    Run
    git config --global user.email "you@example.com"
    git config --global user.name "Your Name"
    to set your account's default identity.
    Omit --global to set the identity only in this repository.
    fatal: empty ident <jenkins@[email]-KJ419AA-AB4-a6417l.(none)> not allowed
    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:897)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:858)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:868)
    at hudson.plugins.git.GitAPI.tag(GitAPI.java:827)
    ... 13 more 
```

需要详细而简单的新配置类型的帮助.. =) 我已经搜索了解决方案，但我得到的最接近的是拥有“gitconfig”文件的重要性。我尝试对其进行配置，但无法解决问题......而且还要提一下，如果这与解决方案相关的话，我正在使用 ubuntu OS。

# php - 从 javascript 调用 php 文件时出错 [HTTP/1.1 301 永久移动 807 毫秒]

> ID：14275327
> 
> 赞同：0
> 
> 时间：2013-01-11T09:40:49.887
> 
> 标签：php, javascript, http-status-code-301

我有一个调用 php 文件并接收输出的 javascript 代码。我的 JavaScript 代码是

```
 function properties(location) {

    if(window.XMLHttpRequest)
        xmlHttpRequest=new XMLHttpRequest();
    else if(window.ActiveXObject)
        xmlHttpRequest=new ActiveXObject("Microsoft.XMLHTTP");

    xmlHttpRequest.open('GET','myfile.php?region='+region,true);
    xmlHttpRequest.onreadystatechange=function() {
        if(xmlHttpRequest.readyState==4)    
          alert(xmlHttpRequest.responseText);
    }
    xmlHttpRequest.send();
  } 
```

该代码在本地主机上运行良好，我收到了输出，但是当我在实时服务器上尝试它时，它不起作用，并且在浏览器的控制台中显示以下消息

```
[14:36:20.350] GET http://mysite.com/myfile.php?region=South [HTTP/1.1 301 Moved Permanently 807ms] 
```

它还给了我另一个网址，非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:11:54.810

打开您的网络浏览器并执行此操作。

尝试使用“www”的 URL。并检查它是否重定向到非 www。也可以尝试不使用“www”。并检查重定向。

在您的代码中看到最终位置编辑 url 位置后。

您还可以检查服务器上的 .htaccess 文件以查看它是否有任何重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:44:08.073

```
xmlHttpRequest.open('GET','myfile.php?region='+region,true); 
```

在这里你给出完整的路径或正确的相对 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:44:08.243

尝试在发送到服务器之前添加您的基本网址

```
var baseurl = 'yoursite.com';
xmlHttpRequest.open('GET',baseurl+'myfile.php?region='+region,true); 
```

# typo3 - TYPO3 退出如果不接受

> ID：14275328
> 
> 赞同：0
> 
> 时间：2013-01-11T09:40:54.433
> 
> 标签：typo3, typoscript

我目前正在开发一个扩展程序，以便在前端登录后为用户显示信息。用户必须接受它们（如条款和条件）。

现在我正在寻找一种良好且安全的注销机制：

1.  用户登录信息页面后被重定向

    *   状态：FE 登录可用
2.  用户阅读信息，可以点击“接受”和“退出”

    *   如果接受：重定向到用户起始页
    *   如果注销：使用“logintype=logout”进入登录页面

现在问题来了：

在第2步中，用户可以在浏览器中输入任何有效的URL，并且TYPO3已经有有效的FE登录（第1步）->页面显示没有接受。

第一个解决方案：始终在第 1 步注销，如果单击接受，请再次登录。但是我不知道自动登录的用户凭据，这可能吗？

第二种解决思路：添加一个cookie，并在TypoScript Template 中使用redirect to logout 设置条件。不是我最喜欢的解决方案，因为 cookie 太容易操作。而且我们总是遇到奇怪的 cookie 问题，因为一些用户正在共享他们的工作站。

第三个解决思路：如果设置重定向为注销，则向 fe_user 表添加一个标志。问题：我们已经存在性能问题。有没有不增加页面加载时间的解决方案？我想这个检查必须在每个页面加载时完成......

您对此有任何解决方案的想法吗？

*   打字稿3 4.5
*   扩展名是 ExtBase
*   将代码添加到 fe_login 扩展是一个可能的选项，我们已经在那里进行了更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:56:42.247

如果有人需要，这是我的解决方案代码：

1）在扩展中添加用户密钥 - 没有直接的 Cookie 访问：

```
$GLOBALS['TSFE']->fe_user->setKey('user', 'acceptFromExtension', 1);
$GLOBALS['TSFE']->storeSessionData(); 
```

2）如果接受，请删除密钥：

```
if accepted {
  $GLOBALS['TSFE']->fe_user->setKey('user', 'acceptFromExtension', 0);
  $GLOBALS['TSFE']->storeSessionData();
} 
```

2) 使用 TypoScript 检查密钥 - 它存储在 fe_user|uc 中：

```
[globalVar = TSFE:fe_user|uc|acceptFromExtension> 0]
  page.config >
  page.config.additionalHeaders = Location: http://www.mydomain.com/index.php?id=111&logintype=logout
[END] 
```

感谢 sankar-v ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:53:13.510

我们不能使用会话吗？当用户单击接受时设置会话变量，然后使用如下打字条件：

```
[globalVar = TSFE:fe_user|sesData|accept > 0]
page.10.userFunc = tx_templavoila_pi1->main_page

[ELSE]
page.10 = TEXT
page.10.value = You are not allowed to visit this page
or
page.config >
page.config.additionalHeaders = Location: http://www.yourdomain.org/login.html
[END] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:45:22.813

虽然您有自己的扩展程序，但您可以以编程方式`logoff`将用户重定向到其中，然后将浏览器重定向到任何其他页面（`$somePreparedUri`可以在您的扩展程序中创建或从 TypoScript 获取 - 作为静态值 - 取决于您的需要）

```
if (!$accepted)
    $GLOBALS['TSFE']->fe_user->logoff(); 
    return $this->redirectToUri($somePreparedUri);   
) 
```

# magento - 以编程方式从布局中删除块

> ID：14275333
> 
> 赞同：2
> 
> 时间：2013-01-11T09:41:12.837
> 
> 标签：magento, magento-1.6

我想根据登录用户通过前端路由器控制器从产品视图页面中删除 product_options_wrapper 块。

我知道我可以以编程方式附加一个新块，但我没有找到删除函数。:-(

试过了。像那样

```
$this->getLayout()->unsetBlock('product_options_wrapper');

$this->getLayout()->getBlock('product.info')->remove('product_options_wrapper'); 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T10:36:12.620

为了使用其父块删除块，请使用以下代码

```
$this->getLayout()->getBlock('product.info')->unsetChild('product_options_wrapper'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T15:44:49.397

如果 OP 代码使用了正确的块名称，即**product.info.options.wrapper**，而不是块别名，它应该可以工作。

```
$this->loadLayout();
//e.g. 
if (Mage::getSingleton('customer/session')->getCustomerGroupId() == [id]){
     $this->getLayout()->unsetBlock('product.info.options.wrapper');
}
$this->renderLayout(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T10:20:39.913

这应该有效：

```
 $blockName = 'left'; // Add yours
    $update = Mage::app()->getLayout()->getUpdate();
    $removeInstruction = "<remove name=\"$blockName\"/>";
    $update->addUpdate($removeInstruction); 
```

为什么？`Mage_Core_Model_Layout`在解析 XML的方法中查看文件，`generateXml()`并在为块设置删除的地方，将属性忽略添加到块中。在该方法`generateBlocks()`中，没有添加具有该属性的所有块。

# android - Android限制edittext长度

> ID：14275337
> 
> 赞同：2
> 
> 时间：2013-01-11T09:41:29.020
> 
> 标签：android, input, android-edittext

我在限制android中的edittext长度时遇到问题。除了删除消息外，一切正常。我的编辑文本控件的最大长度为 16 个字符，它会限制它识别、显示和读取前 16 个字符，但是当我继续输入时，它会在背景中的某个地方记住文本，如果我想删除文本，它不会开始从第 16 个字符向后删除，但从我输入的最后一个字符开始。请参见下面的代码。

我什至尝试添加 TextChangedListener 它不会触发输入 16 个字符，因为没有任何操作。

我正在使用 Nexus 7 测试此功能

布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:background="@drawable/background"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/send_new_message_lblTo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/send_new_message_to"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/send_new_message_lblToValue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@+id/send_new_message_lblTo"
        android:ems="10"
        android:textAppearance="?android:attr/textAppearanceLarge" >
    </TextView>

    <EditText
        android:id="@+id/send_new_message_txtMessage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/send_new_message_lblToValue"
        android:layout_marginTop="10dp"
        android:ems="10"
        android:hint="@string/send_new_message_hint"
        android:inputType="textMultiLine"
        android:lines="2"
        android:maxLength="16"
        android:scrollbarStyle="outsideOverlay" />

    <Button
        android:id="@+id/send_new_message_btnSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/send_new_message_txtMessage"
        android:layout_marginTop="10dp"
        android:text="@string/send" />

</RelativeLayout> 
```

活动

 `````
 import android.os.Bundle;
    import android.text.Editable;
    import android.text.TextWatcher;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class NewMessageSendActivity{

    private TextView to;
    private EditText message;
    private Button send;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.send_message);
        getViewInstances();
        setControlActions();

    }

    private void getViewInstances() {
        to = (TextView) findViewById(R.id.send_new_message_lblToValue);
        message = (EditText) findViewById(R.id.send_new_message_txtMessage);
        send = (Button) findViewById(R.id.send_new_message_btnSend);

        to.setText(AppSettings.getInstance().getSelectedDevice().toString());
    }

    private void setControlActions() {

        send.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                String smsMessage = message.getText().toString();
                Toast.makeText(this, smsMessage, Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:00:28.897

我无法重现您的行为。似乎一切正常，文本正确限制为 16 个字符。

键盘保持附加文本的唯一位置是在其上方的字段中，但即使您选择了建议的单词，它也会在插入文本字段之前被截断。这就是为什么您看不到事件被触发的原因，因为它是 IME 中的内部事件，而不是`EditText`.``

# c# - SelectMany 到字典的问题

> ID：14275346
> 
> 赞同：1
> 
> 时间：2013-01-11T09:42:05.080
> 
> 标签：c#, linq

我正在努力使用`Linq`从项目列表中获取项目列表并转换为字典的语句。

我有一个“Windows”列表，其中有一个“控件”列表，但一种控件类型也有一个控件列表，我似乎无法弄清楚（就在我以为我理解 Linq 时:)）

当前工作的嵌套 foreach 循环

```
 public static Dictionary<int, Dictionary<int, bool>> _windowControlVisibilityMap = new Dictionary<int, Dictionary<int, bool>>();

    public static void RegisterControlVisibility(IEnumerable<GUIWindow> windows)
    {
        _windowControlVisibilityMap.Clear();
        foreach (var window in windows)
        {
            var controlMap = new Dictionary<int, bool>();
            foreach (var control in window.Controls)
            {
                if (control is GUIGroup)
                {
                    foreach (var grpControl in (control as GUIGroup).Controls)
                    {
                        controlMap.Add(grpControl.ControlId, grpControl.IsWindowOpenVisible);
                    }
                }
                controlMap.Add(control.ControlId, control.IsWindowOpenVisible);
            }

            _windowControlVisibilityMap.Add(window.WindowId, controlMap);
        }
    } 
```

我在 Linq 查询中做同样的荒谬尝试。（这不起作用）

```
 public static Dictionary<int, Dictionary<int, bool>> _windowControlVisibilityMap = new Dictionary<int, Dictionary<int, bool>>();

    public static void RegisterControlVisibility2(IEnumerable<GUIWindow> windows)
    {
        _windowControlVisibilityMap.Clear();
        foreach (var window in windows)
        {
            var dictionary = window.Controls.Select(k => new KeyValuePair<int, bool>(k.ControlId, k.IsWindowOpenVisible))
                .Concat(window.Controls.OfType<GUIGroup>().SelectMany(grp => grp.Controls)
                .Select(k => new KeyValuePair<int, bool>(k.ControlId, k.IsWindowOpenVisible)));

           // _windowControlVisibilityMap.Add(window.WindowId, dictionary);
        }
    } 
```

如果有人能指出我正确的方向来让这个 Linq 语句正常工作，那就太棒了:)

这是一些可以帮助您帮助我的模拟对象，大声笑

```
public class GUIWindow
{
    public int WindowId { get; set; }
    public List<GUIControl> Controls { get; set; }
}

public class GUIControl
{
    public int ControlId { get; set; }
    public bool IsWindowOpenVisible { get; set; }
}

public class GUIGroup : GUIControl
{
    public List<GUIControl> Controls { get; set; }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:48:04.513

以下应该有效：

```
window.Controls.Select(x => new { x.ControlId, x.IsWindowOpenVisible })
      .Concat(window.Controls
                    .OfType<GUIGroup>()
                    .SelectMany(x => x.Controls)
                    .Select(x => new { x.ControlId, x.IsWindowOpenVisible }))
      .ToDictionary(x => x.ControlId, x => x.IsWindowOpenVisible); 
```

* * *

但是哈姆雷特有一个有效的观点：a 中的每个控件`GUIGroup`都可以是另一个`GUIGroup`。你需要递归来解决这个问题：

```
Func<IEnumerable<GUIControl>, IEnumerable<Tuple<int, bool>> getValues = null;
getValues = x => x.Select(x => Tuple.Create(x.ControlId, x.IsWindowOpenVisible))
                  .Concat(getValues(window.Controls
                                          .OfType<GUIGroup>()
                                          .SelectMany(x => x.Controls)));

getValues(window.Controls).ToDictionary(x => x.Item1, x => x.Item2); 
```

# linux - bash：将文件复制到多个位置

> ID：14275347
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:14.203
> 
> 标签：linux, scripting

```
#!/bin/bash
while read -r line; do
    mkdir "UNIX/$line"
done < usernames.lnk

MasterDir="/home/darkeve/Documents/OS/master/"         
USERHOME="/home/darkeve/Documents/OS/UNIX"            

for FILENAME in `cat $MasterFile`
do
    cp $MasterDir/$FILENAME $USERHOME/$USER
done 
```

我的脚本完成了第一项工作，它首先读取一个名为“用户名”的文件，然后为每个用户创建单独的文件夹到 UNIX 文件夹中。但是它应该从名为“file1、file2 和 file3”的主文件夹中复制 3 个文件，并将它们复制到 UNIX 文件夹中的每个单独的用户文件夹中，但它根本不这样做。任何帮助，将不胜感激。

ps 我对脚本很陌生，所以请保持简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:04:53.823

您当前的脚本在 cp 命令中使用 $USER ，即“运行脚本的用户”，而不是从*usernames.lnk*读取。如果要复制到每个单独的文件夹，则需要将 for-loop 放在第一个 while 循环中，并使用 $line 作为目标文件夹名称，如下所示：

```
#!/bin/bash
MasterDir="/home/darkeve/Documents/OS/master/"         
USERHOME="/home/darkeve/Documents/OS/UNIX"   
MasterFile="filenames.txt"

while read -r line; do
    mkdir "UNIX/$line"
    for FILENAME in `cat $MasterFile`
    do
        cp "$MasterDir/$FILENAME" $USERHOME/$line
    done
done < usernames.lnk 
```

当您不确定出了什么问题时，简单地回显内容通常是一个好主意，您可以尝试例如

```
echo "$line" 
echo "$USER" 
```

等等以查看这些变量的差异。

此外，您的脚本中没有定义**$MasterFile 。**它应该与一开始的 MasterDir 和 USERHOME 相同的方式引入。

编辑：我在脚本示例中添加了它，请更改它以与您的文件相对应。

# php - colorbox 提交/发送邮件表单并在同一个 colorbox 中确认（ajax？）

> ID：14275351
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:28.017
> 
> 标签：php, forms, jquery, colorbox

我一直在这里搜索，但还没有找到这样做的方法:(而且我无法调整适用于这个问题的现有答案。

我现在正在做的是：1）当用户点击一个按钮时，colorbox被触发并打开href属性，在这种情况下是“contact-form.html”

```
<a href="contact-form.html" class="contacto"><span class="button green">19.999 € (kit)</span></a>

$('a.contacto').colorbox({
href:function(){ return $(this).attr('href'); }, 
width:function(){ 
    if (window.innerWidth > 750) {return '60%';} 
    else if (window.innerWidth > 481) {return '75%';} 
    else {return '90%';}},
onComplete:function(){
    var ruta = document.location.protocol + "//" + document.location.host + document.location.pathname;
    $('input[name=web]').val(ruta);
}
}); 
```

2) 表单显示在颜色框中

```
<div id="contactForm">
    <h4>Póngase en contacto con nosotros</h4>
    <form name="formulario" id="formulario" method="post" action="contact-form.php">
        <inputs>........
        <input type="reset" name="reset" id="resetbtn" class="resetbtn button" value="Limpiar datos">
        <input type="submit" name="submit" id="submitbtn" class="submitbtn button green macro" tabindex="7" value="Enviar consulta!">
        <br>
    </form> 
</div><!--Fin del contactForm--> 
```

3）一旦用户完成表单并点击提交，就会触发contact-form.php（进行一些验证，并且邮件会自行发送。最后我插入了一个标题（“Location：” + original-pathname-from-where -表格已发送）

```
<?php
$errors = ''; /*Para comprobar si ha habido errores*/

/*Retrieve variables from $_POST.......*/

if (empty($emailField)) { 
    $errors .= "\n Error: Se requiere un correo electrónico"; 
}
if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $emailField)) {
    $errors .= "\n Error: Correo electrónico inválido";
}

$header = /*Prepare the MAIL HEADERS TO BE SENT*/

$mensaje = /*Prepare the MESSAGE........*/

if (empty($errors)) /*Some validation*/
{
    if (mail($mi_email, $asuntoEmail, utf8_decode($mensaje), $header)) {
        header("Location: $pageRefresh");
    }
    else {
        echo '<script type="text/javascript">';
        echo 'alert("Ha habido algun error en el envio. Por favor, vuelva a intentarlo")';
        echo '</script>';
    }
}
else
{
    echo '<script type="text/javascript">';
    echo 'alert("Ha habido algun error en el envio:'.$errors.'")';
    echo '</script>';
    echo '<p>Ha habido algun error:' .$errors. '</p>';
}
?> 
```

直到正确完成这一点之前的一切。邮件被发送到我的帐户，所有变量都正确填写，用户被重新定位到打开表单（颜色框）的原始页面。

我无法做到的是：

我希望通过 AJAX 提交表单，而不必将用户重定向到同一页面......或者......如果这不可能，至少能够给用户一个警报消息，即消息/邮件是否成功发送。

非常感谢帮助！如果这是一个重复的问题，再次抱歉，但我无法自己适应/解决这个问题:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:54:08.463

如果你想通过 AJAX 提交表单，而不是提交和加载操作 url，你可以使用 jQuery 的序列化函数来完成。

您的代码需要进行一些更改。首先，您需要摆脱提交按钮。通过将其类型更改为按钮来执行此操作：

```
<input type="button" name="button" id="submitbtn" class="submitbtn button green macro" tabindex="7" value="Enviar consulta!"> 
```

接下来，我们需要通过 AJAX 提交表单的代码：

```
<script type="text/javascript">
$('#submitbtn').click(function() {
  $.post('contact-form.php', $('#formulario').serialize());
});
</script> 
```

这将通过 AJAX 提交表单字段，而无需加载新 URL。

如果你想在提交后显示成功通知，你可以这样做：

```
<script type="text/javascript">
    $('#submitbtn').click(function() {
      $.post('contact-form.php', $('#formulario').serialize(), function(){
 // Anything here is executed if the post is successful
 alert('success');
 }

 );
 });
</script> 
```

# java - 使用 tomcat7 webcontainer 在 myeclipse 上执行应用程序不会在断点处停止

> ID：14275352
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:29.570
> 
> 标签：java, tomcat, myeclipse

我有一个问题，即执行没有在任何集合`myeclipse` `debug mode`上停止。`breakpoints`

请注意，我使用`Myeclipse 10.6`的`tomact-7`是配置连接器的位置，并且在不处于调试模式时，一切正常。

我尝试了不同的配置，但没有一个能解决问题。

所以有人已经遇到过这个问题，或者如果有人知道解决方法，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:26:57.093

修复发现。在断点视图下，有一个标志叫做跳过所有断点。如果选中此标志，则在执行阶段将丢失所有断点。这很简单，但谁不知道他很难知道问题出在哪里。

# php - 比较一组对象并获取最新的对象

> ID：14275356
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:40.443
> 
> 标签：php, datetime, symfony, symfony-2.1

我有一个对象集合，我想有一个方法通过比较创建日期来选择最新的对象：

```
public function getCoverImage(){
    foreach($this->getImages() as $image){

    }
} 
```

我可以访问日期

```
$image->getCreatedAt() 
```

它将返回一个 DateTime 对象。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:47:28.263

```
$chosen = NULL;
foreach ($images as $image) {
    if ($chosen === NULL || ($chosen->getCreatedAt() < $image->getCreatedAt()) ) {
        $chosen = $image;
    }
} 
```

# python - 使用python搜索程序

> ID：14275359
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:45.450
> 
> 标签：python, search, python-2.7

我正在用python编写一个搜索程序，它将用于搜索文件的文件夹作为系统参数（sys.argv）。然后它会询问要查找的文件的名称。
**问题是什么**
1.如何知道文件夹中有哪些文件或文件夹？是否有任何模块或功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:45:09.927

试试这个：

```
import os

for item in os.listdir(path):
    if not os.path.isfile(os.path.join(path, item)):
        print "Folder"
    else:
        print "File" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:50:43.417

你可以使用 和 的`os`东西`os.path`。

```
import os

path = "xyz"

files = [x for x in os.listdir(path) if os.path.isfile(os.path.join(path,x))]
directories = [x for x in os.listdir(path) if os.path.isdir(os.path.join(path,x))] 
```

这是一个相当优雅的解决方案，尽管它会遍历 os.listdir 的所有条目两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:48:19.637

这列出了指定路径中的所有文件：

```
import os

#Change the value of path to a path.
path = "D:\\Pythonic\\"

stuff_in_path = os.listdir(path)
for x in stuff_in_path:
    print x 
```

# signal-processing - 网络音频 API 和滤波器系数

> ID：14275361
> 
> 赞同：2
> 
> 时间：2013-01-11T09:42:51.383
> 
> 标签：signal-processing, web-audio-api

我正在学习使用[网络音频 api](http://www.w3.org/TR/webaudio/#BiquadFilterNode-section)来合成和处理声音。我看到有一个[BiquadFilterNode](http://www.w3.org/TR/webaudio/#BiquadFilterNode-section)类我可以使用，但它只允许指定定义的过滤器类型之一 ( `"lowpass", "highpass", "bandpass", "lowshelf", "highshelf", "peaking", "notch", "allpass"`) 并通过此类过滤器的元参数控制它`Q`：`gain`和`center-frequency`.

有没有办法指定数字滤波器的实际系数？换句话说，对于以下形式的过滤器：

```
 b_0 + b_1*z^(-1) + b_2*z^(-2)
H(z) = -----------------------------
       1 + a_1*z^(-1) + a_2*z^(-2) 
```

我可以以某种方式直接指定 的值`b_0, b_1, b_2, a_1, a_2`吗？

我问是因为尽管预定义的过滤器类型非常方便，但它们不一定涵盖所有用例。通过指定系数，可以实现一阶滤波器、参数部分等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:23:38.973

这是不可能的。WG 中有一个关于完全独立的 DSP API 的提案，但还没有完全成熟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:12:15.380

目前不可能，但可以添加一个简单的 API。

至少，很明显我们需要添加对一阶过滤器的支持。

# postgresql - 通过 postgres 触发器向最终用户显示警告而不中止事务

> ID：14275362
> 
> 赞同：0
> 
> 时间：2013-01-11T09:42:53.347
> 
> 标签：postgresql

我正在尝试通过**postgres trigger****验证**一个字段。

 **如果目标字段具有**十进制**值，我需要通过**警告**但允许用户**保存**记录。

我尝试了选项

```
RAISE EXCEPTION,RAISE - USING 
```

但它**在 UI 上抛出错误**并且事务被中止。

我尝试了选项

```
RAISE NOTICE,RAISE WARNING 
```

通过它**不显示警告**并简单地保存记录。

如果有人对此提供帮助，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:58:50.093

您需要设置`client_min_messages`为显示`NOTICE`s 和`WARNING`s 的级别。你可以这样做：

*   在交易层面与`SET LOCAL`
*   在会话级别`SET`
*   在用户级别`ALTER USER`
*   在数据库级别`ALTER DATABASE`
*   在全球范围内`postgresql.conf`

然后，您必须在运行查询后检查来自服务器的消息并将它们显示给用户或以其他方式处理它们。如何做到这一点取决于您使用的数据库驱动程序，您尚未指定。PgJDBC？libpq？其他？

请注意，发出通知或警告*不会*导致事务暂停并等待用户输入。你真的不想那样做。而是`RAISE`中止`EXCEPTION`事务。将问题告诉用户，如果他们批准，则重新运行事务，可能设置一个标志以指示不应再次引发异常。

在技​​术上可以让 PL/Perlu、PL/Pythonu 或 PL/Java 触发暂停执行，同时通过侧通道（如 TCP 套接字）请求客户端批准操作。不过，这将是一个非常糟糕的主意。**

# html - 具有 CSS 表格布局属性的导航栏（表格单元格和表格行的问题）

> ID：14275366
> 
> 赞同：0
> 
> 时间：2013-01-11T09:43:17.547
> 
> 标签：html, css

我正在尝试制作一个响应式导航栏，其左侧的链接数量不确定，右侧有一个搜索按钮。

链接无论有多少都应该是等宽的，搜索按钮应该是 50px 宽。当屏幕宽度小于 768 像素时，响应式开始发挥作用。

我也在使用 CSS`table-layout: fixed`和`table-cell`属性`table-row`，具体取决于屏幕宽度。

然而，Firefox 和 Chrome 似乎还不错，但不知何故 Safari 在来回切换宽屏和窄屏时会弄乱那些等宽的元素（即元素先是`table-cells`然后`table-rows`再返回`table-cells`）。

有谁可以解决这个问题或者想出更好的设计？或者这只是一个 Safari 6.0.2 的错误？

**JSFiddle Demo**
[在这里找到](http://jsfiddle.net/w2Wtr/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:21:30.903

我不认为你需要 javascript

我刚刚添加了一个**:hover**用于表单宽度和另一个**:hover**用于输入，它解决了 safari 上的问题，当您悬停文本输入时，表单再次获得 50px 宽度（如果这就是您的问题）

```
#searchform:hover {
width:250px;
}

#searchform:hover input#s {
display: inline;
} 
```

在 jsfiddle 中尝试我的编辑

[JS小提琴](http://jsfiddle.net/w2Wtr/9/)

# python - 在 2 个图像之间来回切换

> ID：14275367
> 
> 赞同：0
> 
> 时间：2013-01-11T09:43:19.883
> 
> 标签：python, image, import, pygame

前几天我和朋友很无聊，决定用 python 做一个简单的游戏。物体从显示窗口的顶部落下，用户必须控制一个盒子在它们落地之前接住它们。我们决定我们将拥有比其他对象更有价值的不同对象。我的问题是，你如何让一个物体随机切换图像的实例。

我尝试自己使用一个介于 0-10 之间的随机整数变量来执行此操作。如果整数小于5，则将图片设置为蝙蝠。如果整数大于5，则图片设置为重影。

我尝试的编码如下：

```
 #Detect if user has missed a bomb#

    bomb_img = 0
    bomb_y += vel_y
    if bomb_y > 500:
        bomb_x = random.randint(0, 500)
        bomb_y = -50
        bomb_img = random.randint(0,10)
        lives -= 1
        if lives == 0:
            game_lost = True

    #Detect if user has saved a bomb#
    elif bomb_y > pos_y:
        if bomb_x > pos_x and bomb_x < pos_x + 120:
            score += 10
            bomb_x= random.randint(0,500)
            bomb_y = -50
            bomb_img = random.randint(0,10)

    #Change bomb img#       
    ghost = pygame.image.load("ghost2.png").convert_alpha()
    bat = pygame.image.load("bat2.png").convert_alpha()
    bat_resize = pygame.transform.scale(bat, (133,95))
    if bomb_img <= 5:
        _display_window.blit(bat_resize, (bomb_x, bomb_y))
    else:
        _display_window.blit(ghost, (bomb_x, bomb_y)) 
```

但是，这在运行时无法按预期工作。图片确实变成了一个幽灵，但只有一瞬间，然后随着蝙蝠继续下落，它又变回了蝙蝠。

我还尝试切换以下代码行：

```
if bomb_img <= 5:
    _display_window.blit(ghost, (bomb_x, bomb_y))
else:
    _display_window.blit(bat_resize, (bomb_x, bomb_y)) 
```

在这种情况下，图片会在一瞬间随机变为蝙蝠，然后再变回幽灵

基本上我可以改变图像，但只是一秒钟。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:53:45.903

看起来问题是您在循环开始时重置了 bomb_img，即代码的第一行：

```
bomb_img = 0
... 
```

你应该把那条线拉到你的循环之外。

# java - 根据Android中设备的每个屏幕尺寸设置布局

> ID：14275369
> 
> 赞同：0
> 
> 时间：2013-01-11T09:43:24.377
> 
> 标签：java, android, android-layout, user-interface

我的应用在背景中有一张图片，我想根据图片大小调整按钮的大小和位置。图像大小根据设备屏幕大小而变化。

我想在 XML 布局文件中或使用编码来完成。请帮我......

感谢离子提前....

我正在使用安卓 4.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:47:14.430

试试这个它可以帮助你设置布局，你可以在 xml 本身中做到这一点

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

看看这个...

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

# ruby-on-rails-3 - 在 Rails 3 应用程序中使用 select_tag 更改语言环境

> ID：14275372
> 
> 赞同：0
> 
> 时间：2013-01-11T09:43:34.997
> 
> 标签：ruby-on-rails-3, locale, html-select

如何使用 select_tag 更改语言环境？

```
 <%= form_tag ({:action => "set_locale"}) do %>
        <%= select_tag "select_lang", options_from_collection_for_select(@languages, "two_letter_code", "name") %>
        <%= submit_tag("set language") %>
    <% end %> 
```

在我的 applicationController 我有一个 set_locale 方法：

```
def set_locale
    I18n.locale = params[:locale] if params.include?('locale') && !Language.where(:two_letter_code => params[:locale]).empty?
end 
```

但它不起作用...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:06:23.507

我认为您的问题是参数是字符串（“en”）而不是符号（：en）。params[:locale].to_sym 可能会有所帮助。

# javascript - 键入时验证电子邮件

> ID：14275373
> 
> 赞同：3
> 
> 时间：2013-01-11T09:43:36.140
> 
> 标签：javascript, regex, validation

我想在键入时验证输入，因此我使用 onkeyup 事件来执行此操作，但是如果我验证电子邮件正则表达式“name@domain.com”，一旦用户开始键入它就会引发错误 - 第一个字符与正则表达式不匹配。 ..

所以我写了这个：

```
var addValidation = function (patterns) {
        var index = patterns.length; //I know I can avoid this
        while (index--) {
            patterns[index] = new RegExp(patterns[index]);
        }

        index = 0;
        var current = patterns[index],
        matchExact = function (patt, str) {
            var match = str.match(patt);
            return match !== null && str === match[0];
        };

        return function () {
            var str = this.value;
            if (!matchExact(current, str) ) {
                var tmp = patterns[index + 1] ? 
                    new RegExp(current.source + patterns[index + 1].source) :
                    false;
                if (tmp && matchExact(tmp, str)) {
                    current = tmp;
                    index++;
                }
                else {
                    alert("Wrong");
                }
            }
        }
    };
    document.getElementById("x").onkeyup = addValidation(["[a-zA-Z0-9\\.]+", "@{1}", "[a-zA-Z0-9]+", "\\.{1}", "[a-zA-Z]{1,3}"]); 
```

它似乎有效，但是......它很丑陋，如果你后退一步它会提醒你（例如“name@”并按下退格键）。

我知道 Dojo 的验证很棒，但我不想使用 Dojo。有没有更好的方法来实现这一目标？

//编辑： http: [//livedocs.dojotoolkit.org/dijit/form/ValidationTextBox](http://livedocs.dojotoolkit.org/dijit/form/ValidationTextBox)这是一个示例，但您可以定义自己的模式（如电子邮件正则表达式），它将完美地验证它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:54:29.500

在验证开始之前添加间隔：

```
var t;
document.getElementById("x").onkeyup = function () {
    if (t) {
        clearTimeout(t);
    }
    t = setTimeout(function () {
        //do validation
    }, 1000)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:57.653

永远不要尝试使用正则表达式验证电子邮件地址。您要么最终允许无效地址，要么阻止完全有效但只会惹恼访问者的电子邮件地址。还值得记住的是，迄今为止验证电子邮件地址的最佳正则表达式是：

[http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)

# java - 在Java中调用存储过程的简单方法

> ID：14275376
> 
> 赞同：3
> 
> 时间：2013-01-11T09:43:50.430
> 
> 标签：java, oracle, jdbc

调用存储过程时，我使用以下代码：

```
 connection = getConnection();
    stmt = connection.prepareCall("{call MPLOGIN (?, ?, ?, ?, ?, ?)}");
    stmt.setString("VUSCD", uscd);
    stmt.setString("VPWD", pwd);
    stmt.setString("VPCSQ", pcsq);
    stmt.setString("VHWID", hwid);
    stmt.registerOutParameter("VLOGID", OracleTypes.VARCHAR);
    stmt.registerOutParameter("VKQ", OracleTypes.VARCHAR);
    stmt.execute();
    String vlogid = stmt.getString("VLOGID");
    String vkq = stmt.getString("VKQ"); 
```

为少数程序编写这个无聊的包装器是没有问题的，但是如果有数百个程序，那真是一场噩梦。有没有比这种方式更简单的方法来调用存储程序？编辑：我认为使用 DB 中的过程参数的代码生成器是一种优雅的方式，但我在 java 中一无所获

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:51:58.393

您可以，也许创建一个通用包装器，类似于以下内容：

```
public Map<String, String> SPWrapper(String call, Map<String, String> inParams, Map<String, OracleTypes> outParams)
{
    connection = getConnection();
    try 
    {
        stmt = connection.prepareCall(call);
        for(String inParam : inParams.keys())
        {
            stmt.setString(inParam, inParams.get(inParam));
        }
        for(String outParam : outParams.keys())
        {
            stmt.registerOutParameter(outParam, outParams.get(outParam));
        }

        stmt.execute();

        Map<String,String> results = new HashMap<String, String>();
        for(String outParam : outParams.keys())
        {
            results.put(outParam, stmt.getString(outParam));
        }

        return results;
    }
    catch (Exception e)
    {
        //LOG Exception
        return new HashMap<String, String>();
    }
    finally
    {
        connection.close();   //Do not leave connections open.
    }
} 
```

您仍然需要传入`call`并声明变量，但至少您现在有一个通用包装器来处理您的所有调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:44:02.257

我喜欢使用[MyBatis](http://code.google.com/p/mybatis/)数据映射器框架来解决此类问题。可以在[http://loianegroner.com/2011/03/ibatis-mybatis-working-with-stored-procedures/找到使用 MyBatis 和存储过程的广泛示例](http://loianegroner.com/2011/03/ibatis-mybatis-working-with-stored-procedures/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:51:06.480

没有其他办法。是的，这很无聊，但程序的数量是有限的。此过程类似于 Java 中的方法，因此您应该按照规定的规则对其进行操作。您只能做一件方便的事情 - 创建特殊的类，它将包含每个过程的包装方法。在这种情况下，在业务代码中调用它们会更优雅，如下所示：

```
String[] result = DAO.MPLOGIN(uscd, pwd, pcsq, hwid); 
```

但是在此方法中，您必须复制上面提到的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:30:40.937

在数据库客户端中，诸如 myproc(10,20) 之类的存储过程仅通过语句 select myproc(10,20); 调用；

所以在你的 JDBC 程序中你可以这样做：connection = getConnection(); stmt = connection.createStatement(); stmt.executeQuery("选择 myproc(10,20)");

如果过程正在返回某些东西，则将其放入 ResultSet

# asp.net-mvc - Orchard 1.6 分页？

> ID：14275377
> 
> 赞同：2
> 
> 时间：2013-01-11T09:43:52.237
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

果园版本是 1.6。

我创建了一个投影来列出我的图书项目。例如，图书总数为 10。在投影设置页面中，**要显示的项目设置为 3**。并**启用显示寻呼机选项**。保存并刷新网页，实际上分页器启用了**旧版和新版**分页链接。

但是我的分页期望是使用数字，比如**1, 2, 3, 4...**怎么办？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:22:46.770

您需要覆盖主题中的一些模板。有关详细信息，请参阅[http://weblogs.asp.net/bleroy/archive/2012/03/30/overriding-the-pager-rendering-in-orchard.aspx](http://weblogs.asp.net/bleroy/archive/2012/03/30/overriding-the-pager-rendering-in-orchard.aspx)。

# objective-c - 为什么 isKindOfClass:[NSHTTPURLResponse self] 而不是 isKindOfClass:[NSHTTPURLResponse class]？

> ID：14275381
> 
> 赞同：3
> 
> 时间：2013-01-11T09:44:05.200
> 
> 标签：objective-c, class, self

根据苹果... [https://developer.apple.com/library/content/samplecode/URLCache/Listings/Classes_URLCacheConnection_m.html](https://developer.apple.com/library/content/samplecode/URLCache/Listings/Classes_URLCacheConnection_m.html)

...我们应该这样做： `if ([response isKindOfClass:[NSHTTPURLResponse self]])`

和做的一样`if ([response isKindOfClass:[NSHTTPURLResponse class]])`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:50:17.067

好的，**Martin R**的评论是对的，是一样的。对于任何课程，我可以做任何一个`[ClassName self]`或`[ClassName class]`获得相同的结果。我可以覆盖它们：

```
+ (Class)class
{
    return [super class];
}
+ (id)self
{
    return [super self];
} 
```

事实上，所有 NSObject 实例方法 (-) 都成为 Class 的类方法 (+)。

关于操纵“自我”的专业人士：

*   我们是直接操作一个类，所以不需要问一个类的类

关于操纵“自我”的骗局：

*   它是低类型的'id'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:18:57.810

两者都`-[NSObject self]`做`+[NSObject class]`同样的事情：返回调用它的对象。没有类实现`+self`类方法，因此当您调用`self`类对象时，它会调用该`-[NSObject self]`方法，因为元类最终继承自`NSObject`（这意味着类对象的所有实例方法`NSObject`都可用于类对象，除非被同名的类方法覆盖） .

我希望 Cocoa 库的编写者永远不会有`+class`，我们总是使用`[ClassName self]`而不是`[ClassName class]`，因为现在人们总是混淆`+[NSObject class]`(`-[NSObject class]`它做非常不同的事情——`+[NSObject class]`返回它被调用的 (class) 对象，而`-[NSObject class]`返回类它被调用的对象）。

# java - 在java中，如何使用sendmail发送电子邮件？

> ID：14275388
> 
> 赞同：2
> 
> 时间：2013-01-11T09:44:22.320
> 
> 标签：java, bash, sendmail

我需要在 bash 中使用 sendmail 以 Java 发送我的电子邮件。由于配置重复，我无法使用 javamail...

```
 package fr.thales.edf.reportEmailAcrAcq.email;

    import java.io.IOException;

    import org.apache.log4j.Level;
    import org.apache.log4j.Logger;

    public class SendHTMLEmail {
        private static final String SENDMAIL = "sendmail -R hdrs -N never -t -v <         ";
        private static final Logger LOGGER = Logger.getLogger(SendHTMLEmail.class
                .getName());

        private String fileName;

        public SendHTMLEmail(String fileName) {
            this.fileName = fileName;
        }

        public void sendMail() {
            String command = SENDMAIL + fileName;
            try {
                Runtime r = Runtime.getRuntime();
                LOGGER.log(Level.INFO, "Envoi de la commande: " + command);
                Process p = r.exec(command);
                p.waitFor();
                LOGGER.log(Level.INFO,
                        "Résultat de l'envoi de l'e-mail : " + p.getOutputStream());
            } catch (InterruptedException ex) {
                LOGGER.log(Level.FATAL, ex.getMessage());
            } catch (IOException ex) {
                LOGGER.log(Level.FATAL, ex.getMessage());
            }
        }
    } 
```

这是我的日志文件：

```
 INFO - Command: sendmail -R hdrs -N never -t -v < ACR_20130111_100744.html 
```

但是我的程序从不发送电子邮件，并且 sendmail 命令仍在运行（即使在 2 小时后）。另一件事，当我在 bash 脚本中使用相同的命令时，它会在 5 分钟内运行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:10:38.903

我找到了解决方案：

```
 package fr.thales.edf.reportEmailAcrAcq.email;

    import java.io.IOException;

    import org.apache.log4j.Level;
    import org.apache.log4j.Logger;

    public class SendHTMLEmail {
        private static final String SENDMAIL = "sendmail -R hdrs -N never -t -v < ";
        private static final Logger LOGGER = Logger.getLogger(SendHTMLEmail.class
                .getName());

        private String fileName;

        public SendHTMLEmail(String fileName) {
            this.fileName = fileName;
        }

        public void sendMail() {
            String command = SENDMAIL + fileName;
            try {
                Runtime r = Runtime.getRuntime();
                LOGGER.log(Level.INFO, "Envoi de la commande: " + command);
                Process p = r.exec(new String[]{"/usr/bin/ksh", "-c", command});
                p.waitFor();
                LOGGER.log(Level.INFO,
                        "Résultat de l'envoi de l'e-mail : " + p.getOutputStream());
            } catch (InterruptedException ex) {
                LOGGER.log(Level.FATAL, ex.getMessage());
            } catch (IOException ex) {
                LOGGER.log(Level.FATAL, ex.getMessage());
            }

        }
    } 
```

我在这个论坛上找到了答案：http: [//www.coderanch.com/t/379834/java/java/executing-shell-script-java](http://www.coderanch.com/t/379834/java/java/executing-shell-script-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:52:28.180

当您从 Java 创建一个流程时，您还必须处理它的输入和输出流。特别是，`Process`除非您从 STDOUT 和 STDERR 读取它的所有输出，否则 a 可能不会终止。[以下](http://steveliles.github.com/invoking_processes_from_java.html)是常见问题的描述；你似乎正在遭受第一个的痛苦。

# mysql - MYSQL脚本导入错误

> ID：14275394
> 
> 赞同：0
> 
> 时间：2013-01-11T09:44:44.707
> 
> 标签：mysql, sql

当我尝试通过以下命令导入数据时出现错误：

```
mysql -u root -p"root" cvdb < "cvdb.sql" 
```

我得到的错误是：

> 第 72 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 14 `Created`行的 '(14) NOT NULL, datetime NOT NULL default ' 0000-00-00 00:00:00 ', '附近使用正确的语法

我的 SQL 文件的代码是：

```
DROP TABLE IF EXISTS `activity`;
CREATE TABLE `activity` (
  `AllDay` enum('YES','NO') default 'NO',
  `ActivityID` int(11) unsigned NOT NULL auto_increment,
  `Type` int(11) NOT NULL default '0',
  `Priority` int(11) NOT NULL default '0',
  `Status` int(11) NOT NULL default '0',
  `Title` varchar(255) default NULL,
  `DueDate` datetime default NULL,
  `CompletedDate` datetime default NULL,
  `Details` text,
  `Creator` int(11) NOT NULL default '0',
  `Owner` int(11) default NULL,
  `ModifiedBy` int(11) default NULL,
  `Modified` timestamp(14) NOT NULL,
  `Created` datetime NOT NULL default ' 0000-00-00 00:00:00 ',
  `Start` datetime default NULL,
  `End` datetime default NULL,
  `AttachmentType` enum('NONE','FILE','LINK') NOT NULL default 'NONE',
  `Location` varchar(25) default NULL,
  `visibility` enum('PRIVATE','PUBLIC') NOT NULL default 'PRIVATE',
  `Notes` varchar(255) default NULL,
  PRIMARY KEY  (`ActivityID`),
  UNIQUE KEY `ActivityID` (`ActivityID`),
  KEY `Type` (`Type`),
  KEY `Priority` (`Priority`),
  KEY `Status` (`Status`),
  KEY `Creator` (`Creator`),
  KEY `Owner` (`Owner`),
  KEY `ModifiedBy` (`ModifiedBy`),
  KEY `Location` (`Location`)
) ENGINE=InnoDB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:46:08.817

错误在这里`Modified timestamp(14) NOT NULL`。你应该`(14)`从时间戳中删除。

你的偏`DDL`，

```
 `ModifiedBy` int(11) default NULL,
  `Modified` timestamp NOT NULL,
  `Created` datetime NOT NULL default '0000-00-00 00:00:00', 
  `Start` datetime default NULL, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:48:04.757

来自[mysql](http://dev.mysql.com/doc/refman/5.0/en/upgrading-from-previous-series.html)文档

> 不兼容的变化：在非常旧的 MySQL 版本（4.1 之前）中，TIMESTAMP 数据类型支持显示宽度，从 MySQL 4.1 开始被忽略。这在 MySQL 5.1 中已弃用，并在 MySQL 5.5 中完全删除。当尝试将 TIMESTAMP(N) 列与 MySQL 5.5 或更高版本的服务器一起使用时，这些行为更改可能会导致两个问题场景：
> 
> ...
> 
> **在执行任何升级之前，您应该尝试通过使用 ALTER TABLE 更新数据库中的任何 TIMESTAMP(N) 列来主动处理这些类型的潜在问题，以便它们使用 TIMESTAMP 代替。**

所以尝试删除`(14)` in

```
Modified timestamp(14) NOT NULL 
```

或如文档中所述，尝试`alter table`在导入之前对您的时间戳列进行声明。

# iis - 检查配置部分是否被锁定 IIS 7

> ID：14275397
> 
> 赞同：1
> 
> 时间：2013-01-11T09:44:51.080
> 
> 标签：iis, batch-file

命令：

```
appcmd lock config -section:... 
```

将锁定指定的配置部分。但我需要检查配置部分是否被锁定。

有没有办法做到这一点？感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-23T04:21:18.983

我知道这已经有几年了，但我正在为 Puppet 寻找这个，所以这就是我想出的。

命令 Get-WebConfigurationLock 显示配置部分是否存在任何锁。

例如，检查 system.webServer/security/ipSecurity 的 IIS 全局配置部分：

```
Get-WebConfigurationLock -PSPath "IIS:\" -Filter //system.webServer/security/ipSecurity 
```

如果该部分已解锁，则上述命令将返回 null。例如“如果锁定则解锁”：

```
if (Get-WebConfigurationLock -PSPath "IIS:\" -Filter //system.webServer/security/ipSecurity)  {
    %windir%/System32/inetsrv/appcmd.exe unlock config -section:system.webServer/security/ipSecurity
} else {
    Write-Host "Already unlocked"
} 
```

可以使用 Remove-WebConfigurationLock 代替 appcmd，我更喜欢 appcmd，因为您可以将 lock/unlock 作为参数传递，而不是更改命令本身。

不确定 Chef 的样子，尽管这是我创建的用于解锁/锁定部分以供参考的 puppet 定义： [https ://gist.github.com/krutisfood/d59b3a5c62f6123bf553](https://gist.github.com/krutisfood/d59b3a5c62f6123bf553)

作为参考，我发现这个 Stack Overflow 链接[Programmatically unlocking IIS configuration section in Powershell](https://stackoverflow.com/questions/5717154/programmatically-unlocking-iis-configuration-sections-in-powershell)虽然发现 Get-WebConfigurationLock 更准确地匹配锁定状态，即使重新加载 dll 或获取属性值的 powershell 窗口通常在锁定时显示 IsLocked false。ymmv。

# yii - Yii 的 zii.widgets.CMenu - 可以是弹出菜单吗？

> ID：14275399
> 
> 赞同：1
> 
> 时间：2013-01-11T09:44:54.187
> 
> 标签：yii

您好我正在使用来自[http://www.yiiframework.com/doc/api/1.1/CMenu的测试代码](http://www.yiiframework.com/doc/api/1.1/CMenu)

```
$this->widget('zii.widgets.CMenu', array(
'items'=>array(
    // Important: you need to specify url as 'controller/action',
    // not just as 'controller' even if default acion is used.
    array('label'=>'Home', 'url'=>array('site/index')),
    // 'Products' menu item will be selected no matter which tag parameter value is since it's not specified.
    array('label'=>'Products', 'url'=>array('product/index'), 'items'=>array(
        array('label'=>'New Arrivals', 'url'=>array('product/new', 'tag'=>'new')),
        array('label'=>'Most Popular', 'url'=>array('product/index', 'tag'=>'popular')),
    )),
    array('label'=>'Login', 'url'=>array('site/login'), 'visible'=>Yii::app()->user->isGuest),
), 
```

));

其他测试代码，如 zii.widgets.jui.CJuiAutoComplete 和 zii.widgets.jui.CJuiDraggable 在我的 Yii 视图中工作正常......

CMenu 代码片段只是将链接显示为分层列表。

当使用 id 为 mainmenu 的 div 时，事情似乎有所改善......然后我尝试使用很多嵌套数组：

[http://sky-walker.net/temp/test/yii/testnews/index.php?r=site/test](http://sky-walker.net/temp/test/yii/testnews/index.php?r=site/test)

它支持5层以上的数组嵌套...

但是，如果我突出显示/全选它（以显示白色菜单链接），它就不能很好地显示层次结构......

我想知道它是否可以是一个弹出菜单，如果父母悬停在上面，会逐渐显示孩子？

我还尝试从布局的 main.php 中禁用 id 为 mainmenu 的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:30:28.920

好的，在看到你所拥有的之后，按照我的例子：

```
<div id="mainmenu">
                <?php
                $this->widget('zii.widgets.CMenu', array(
                    'items' => array(
                        array('label' => 'linkbook', 'url' => array('/site/index')),
                        array('label' => 'About', 'url' => array('/site/page', 'view' => 'about')),
                        array('label' => 'Contact', 'url' => array('/site/contact')),
                        array('label' => 'Suggest Website', 'url' => array('/websiteSuggest/index'),'visible' => !Yii::app()->user->isGuest),
                        array('label' => 'Servers', 'url' => array('/server/index'),'visible' => !Yii::app()->user->isGuest),
                        array('url' => Yii::app()->getModule('user')->loginUrl, 'label' => Yii::app()->getModule('user')->t("Login"), 'visible' => Yii::app()->user->isGuest),
                        array('url' => Yii::app()->getModule('user')->registrationUrl, 'label' => Yii::app()->getModule('user')->t("Register"), 'visible' => Yii::app()->user->isGuest),
                        array('url' => Yii::app()->getModule('user')->profileUrl, 'label' => Yii::app()->getModule('user')->t("Profile"), 'visible' => !Yii::app()->user->isGuest),
                        array('url' => Yii::app()->getModule('user')->logoutUrl, 'label' => Yii::app()->getModule('user')->t("Logout") . ' (' . Yii::app()->user->name . ')', 'visible' => !Yii::app()->user->isGuest),
                    ),
                ));
                ?>
     </div><!-- mainmenu -->

            <br/>

            <div id="mainmenu">
                <?php
                $this->widget('zii.widgets.CMenu', array(
                    'items' => array(
                        array('label' => 'Website', 'url' => array('/website/index'), 'visible' => !Yii::app()->user->isGuest),
                        array('label' => 'Url', 'url' => array('/url/index'), 'visible' => !Yii::app()->user->isGuest),
                        array('label' => 'Pattern Url', 'url' => array('/patternUrl/index'), 'visible' => !Yii::app()->user->isGuest),
                    ),
                ));
                ?>
            </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:36:10.700

我现在正在使用 MbMenu Yii 扩展...

[http://www.yiiframework.com/extension/mbmenu](http://www.yiiframework.com/extension/mbmenu)

它非常易于安装和使用，似乎 CMenu 的输入数组可以与它一起重用（以及 CssMenu Yii 扩展）......

它位于底部： [http ://sky-walker.net/temp/test/yii/testnews/index.php?r=site/test](http://sky-walker.net/temp/test/yii/testnews/index.php?r=site/test)

# objective-c - 如何保持选定的禁用按钮看起来像选定的按钮但变暗？

> ID：14275401
> 
> 赞同：0
> 
> 时间：2013-01-11T09:44:57.420
> 
> 标签：objective-c, xcode, uibutton

我输入此代码以确认我的怀疑

```
if (self.Ihatethis.selected) {
    self.Ilikethis.enabled=!self.Ilikethis.enabled;
    return;
} 
```

所以基本上一个按钮会切换另一个按钮的启用状态。

现在我已经有了：

```
[self.Ilikethis setImage:[UIImage imageNamed:@"button-recommend-active"] forState:UIControlStateSelected];
[self.Ihatethis setImage:[UIImage imageNamed:@"button-dislike-active"] forState:UIControlStateSelected]; 
```

viewDidLoad 中的某处。

结果是当按钮被禁用时，它看起来像普通按钮，只是它变暗了。

当按钮被禁用时，我希望选中的按钮保持选中状态。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:48:08.137

不要禁用您的按钮。将其 userInteraction 设置为 NO

```
btn.userInteractionEnabled = NO; 
```

希望对你有帮助。。

# html - HTML 布局：连续图像

> ID：14275404
> 
> 赞同：2
> 
> 时间：2013-01-11T09:45:02.253
> 
> 标签：html, css

我有一系列图像，我想让它们连续显示，即

> [img][img][img][img][img][img][img][img][img][img][img][img][img][img][img]

我希望溢出部分将被隐藏。

我当前的 HTML 如下：

```
<div id="gallery">
  <img src="http://www.o2h.com.hk/images/apple_gala.JPG" class="gallery_img" />
  <img src="http://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg" class="gallery_img" />
  <img src="http://www.o2h.com.hk/images/apple_gala.JPG" class="gallery_img" />
  <img src="http://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg" class="gallery_img" />
  <img src="http://www.o2h.com.hk/images/apple_gala.JPG" class="gallery_img" />
  <img src="http://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg" class="gallery_img" />
  <img src="http://www.o2h.com.hk/images/apple_gala.JPG" class="gallery_img" />
  <img src="http://upload.wikimedia.org/wikipedia/commons/1/15/Red_Apple.jpg" class="gallery_img" />
  <img src="http://www.o2h.com.hk/images/apple_gala.JPG" class="gallery_img" />
</div> 
```

这是CSS：

```
#gallery {
  width: 100%;
  height: 200px;
  overflow: hidden;
}
#gallery .gallery_img {
  width: auto;
  height: 200px;
} 
```

这是[jsFiddle](http://jsfiddle.net/shivanraptor/HP3h8/)。我想在屏幕边缘显示一半图像，如下所示：

![在此处输入图像描述](../Images/8a0770a95bc221958b7407f1ba5ca9f6.png)

但是，我只能设法显示完整的图像。我应该如何修改 HTML/CSS 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:50:37.297

看看这个小提琴 - [http://jsfiddle.net/jQkHp/](http://jsfiddle.net/jQkHp/)

我在画廊周围添加了一个包装 div：

```
#gallery {
  position: absolute;
  left: 0;
  top: 0;
  width: 1200px;
  height: 200px;
  overflow: hidden;
}

#gallery .gallery_img {
  width: auto;
  height: 200px;
}

#wrapper {
  position: relative;
  width: 100%;
  height: 200px;
  overflow: hidden;
} 
```

您将需要使用一些 javascript 来设置画廊 div 的宽度以使其正常工作（我现在只是在猜测宽度）。

编辑 - 添加了一些 js 来根据里面的图像计算画廊的宽度[http://jsfiddle.net/jQkHp/1/](http://jsfiddle.net/jQkHp/1/)

```
var galleryWidth = 0;

$('#gallery > img').each(function(){
  galleryWidth += $(this).width();
});

$('#gallery').css('width', galleryWidth); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T10:00:27.403

只需使用百分比的超宽和掩码 div：

[**演示**](http://jsfiddle.net/jQkHp/3/)

```
#gallery {  
  width: 200%; /* this is the trick */
}
#gallery img {   /* and no need to add class="gallery_img" to IMGs anymore */
  height: 200px;
}

#wrapper {  
  height: 200px;
  overflow: hidden;
}

<div id="wrapper">
  <div id="gallery">
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />    
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />    
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
    <img src="http://www.o2h.com.hk/images/apple_gala.JPG" />        
  </div>
</div> 
```

* * *

**编辑**

我也会添加最简单的解决方案（由@RupaliShinde 发布），因为它显示了该`white-space`属性的正确使用，并且显然很难重现（阅读评论）：

```
#gallery {  
  width: 100%; 
  overflow: hidden;  
  white-space: nowrap; /* this is the trick */
}
#gallery img {  
  height: 200px;
} 
```

**[演示](http://jsfiddle.net/jQkHp/4/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:03:08.267

只需在 CSS 中添加它

```
<style>
    #gallery {
  width: 100%;
  height: 200px;
  overflow: hidden;
  white-space: nowrap; 
}
#gallery img {
  width: auto;
  height: 200px;
}
</style> 
```

让其余代码保持原样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T09:49:29.690

我建议将图像放在包含 div 中的无序列表中，每个图像都在它自己的 LI 中，然后将它们设置为 display: inline-block in the css。

当然，您需要某种方式来滚动图像，为此您可以使用一些 jquery。

# peoplesoft - 如何获取具有特定 deptid 的作业表中最活跃行的第一次出现，

> ID：14275406
> 
> 赞同：0
> 
> 时间：2013-01-11T09:45:10.777
> 
> 标签：peoplesoft

例如：Emplid 001 最有效的日期行（例如 01/01/2013 ）处于活动状态并且属于部门 ID 101。假设如果他之前还有两行具有相同部门 ID 的行，例如在 2012 年 10 月 12 日和 2012 年 1 月 12 日，然后我需要检索 01/12/2012 行。所以它应该是连续出现的第一行，如果我有 05/12/2012 的行和其他 deptid (102)，在这种情况下，我的查询应该返回 10 /12/2012 行，请对此提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:58:33.547

虽然没有左连接，但它使用最小生效日期的子选择来获取您需要的数据 - 通过 deptid 获取最小 effdt 的技巧是将 deptid 放入子选择中。请注意，empl_rcd_nbr 通常用作子选择（和 job2.empl_rcd_nbr - job.empl_rcd_nbr）中的限制器，但您的原始选择中没有它。如果您得到 dup 行，请检查您的 empl_rcd_nbr 值，因为它是主键：

```
select job.emplid, job.effdt, job.deptid
from ps_job job
where job.effdt = (select Min(job2.effdt) 
                   from ps_job job2
                   where job2.emplid = job.emplid
                     and job2.deptid = job.deptid)
order by job.emplid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:47:15.907

为了达到您的需要，您必须选择与当前 max(effdt) 行的 deptid 相同的 min(effdt) 行，并且不应该存在行 > min(effdt) 的 deptid < > min(effdt) 行的 deptid。

满足上述条件的查询应该可以帮助您处理结果集。

# php - 多语言数字字符算作字母吗？

> ID：14275408
> 
> 赞同：1
> 
> 时间：2013-01-11T09:45:15.393
> 
> 标签：php, regex, utf-8

我正在尝试仅搜索其他语言中的字母和空格（简单单词），如果我找到数字或标点符号，则抛出检测异常。在测试我用维基百科上找到的 UTF-8 数字字符编写的正则表达式时，我的结果总是匹配，我很困惑为什么除非它认为所有数字都被认为是字母。

这是我尝试过的角色：

5 或伍 [http://en.wikipedia.org/wiki/Chinese_numerals](http://en.wikipedia.org/wiki/Chinese_numerals)

5 或Є [http://en.wikipedia.org/wiki/Cyrillic_script](http://en.wikipedia.org/wiki/Cyrillic_script)

这是代码：

```
$were_bad_characters_found = preg_match('/[^\p{L}\p{Zs}]+/us',  $data); 
```

它提出的问题的答案总是，不，没有找到坏字符。

根据文档，这似乎可行，事实上，当我尝试通过它运行简单的英文数字时它确实有效，但是一旦多语言字符出现，它就会在我身上翻滚。我对此有很多变体来检测不同的常见场景，所有 utf8 正则表达式代码似乎只适用于英文字符。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:10:03.230

您显示的字符**是**字母。

*   [U+4F0D 伍</a>，不是数字，有非数字解释。](http://www.fileformat.info/info/unicode/char/4f0d/index.htm)

[](http://www.fileformat.info/info/unicode/char/4f0d/index.htm)
*   [U+0404 Є](http://www.fileformat.info/info/unicode/char/0404/index.htm)不是一个数字，但也不接近任何类型的数字解释。

[unicode 中英文数字](http://www.fileformat.info/info/unicode/char/0031/index.htm)的属性使其成为数字而不是字母。在 PHP 中，您可以使用`\p{Nd}`, 来匹配数字。但是您的正则表达式工作正常。

# c# - Xaml - 如何从网格中获取准确的行（并更改背景）

> ID：14275409
> 
> 赞同：1
> 
> 时间：2013-01-11T09:45:16.233
> 
> 标签：c#, windows-phone-7, xaml, grid, row

我在 xaml 中定义了这样的网格：

```
<Grid Name="grdMoney" HorizontalAlignment="Center" Margin="20">
     <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100" />
        <ColumnDefinition Width="*" />
     </Grid.ColumnDefinitions>
     <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
     </Grid.RowDefinitions>
     ... Content, many Textboxes in each row
</Grid> 
```

现在我只想通过更改该行的背景来突出显示某行。但我不知道如何从代码中的网格中获取准确的行。我认为这很容易，但我在谷歌上搜索了最后 15 分钟却找不到它。也许有什么`grdMoney.Childer[number_of_row]`？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:01:32.057

`Grid`是一个`Panel`。面板负责布局，仅此而已。如果你想更新背景 - 将每一行的内容放入`Border`，然后找到合适`Border`的（我在这里写了代码，没有测试它，但应该可以工作）：

```
int desiredRowId = 2;
foreach(var child in grdMoney.Children.OfType<Border>())
{
    if (Grid.GetRow(child) == desiredRowId)
    { 
        child.Background = new SolidColorBrush(Colors.Red);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:49:24.820

我可能会使用**[DataTriger在 xaml 中执行此操作](http://www.dotnetheaven.com/article/how-to-use-data-trigger-in-wpf)**

在数据触发器中，您可以检查您的状况并应用适当的背景

# c++ - 未定义对“myClass 的 vtable”的引用

> ID：14275411
> 
> 赞同：2
> 
> 时间：2013-01-11T09:45:26.900
> 
> 标签：c++, qt

> **可能重复：**
> [对 vtable 的未定义引用。试图编译一个 Qt 项目](https://stackoverflow.com/questions/1552069/undefined-reference-to-vtable-trying-to-compile-a-qt-project)

这是代码

```
#include <iostream>
#include <QApplication>
#include <QTimer>

class myClass : public QObject {
    Q_OBJECT

public:
    QTimer *timer;
    myClass(){
        timer = new QTimer(this);
        connect(timer, SIGNAL(timeout()), this, SLOT(mySlot()));
        timer->start(1000);
    }
public slots:
    void mySlot() {
        std::cout << "Fire" << std::endl;
    }
};

int main() {
    std::cout << "Hello, world";
    myClass atimer;
    return 0;
} 
```

除了错误之外，还有两件事我不明白：

1.  为什么宏后面没有分号，在本例中为 Q_OBJECT。它似乎不遵守 C++ 语法，但人们编写这样的代码。

2.  “public slot”是Qt创建的修饰符，但是gcc编译器怎么还能看懂呢。像 Qt 这样的 IDE 如何修改语言的标准语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T09:50:30.287

你没有给出确切的错误信息，但我怀疑发生的事情是你没有`moc`在你的代码上运行，或者你没有编译 moc 生成的代码，或者你没有将代码链接到你的可执行文件/图书馆。

至于你的其他问题：

1.  宏后不需要分号；预处理器不关心分号——只有编译器关心。因此，您是否需要手动添加分号取决于[`Q_OBJECT`](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/kernel/qobjectdefs.h#line157)在这种情况下您的宏 ( ) 扩展到什么以及您使用它的位置。在您的情况下，不需要分号。

2.  [`slots`](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/kernel/qobjectdefs.h#line68)是一个扩展为 emtpy 字符串的宏，因此任何 C++ 编译器都可以处理它。但是，[`slots`](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/kernel/qobjectdefs.h#line68)也被识别为特殊关键字`moc`。顺便说[`signals`](http://qt.gitorious.org/qt/qt/blobs/4.7/src/corelib/kernel/qobjectdefs.h#line69)一下（这是一个扩展为 的宏`protected:`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:44:58.433

这只是因为您`qmake`自从添加了`Q_OBJECT`. 只需运行 qmake（如果您使用 QtCreator，它必须在 Build Menu 中）然后编译；）。

希望它有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:28:37.737

您必须使用 QT 提供的 Meta Object Compiler

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:51:00.567

通常，未定义的对 的引用`vtable`表明您声明了一些虚函数，但从未向它们提供定义。也许`Q_OBJECT`是在声明什么？

宏在考虑 C++ 语法*之前*被扩展，以文本形式工作。这就是为什么宏本身不必遵守 C++ 语法的原因。例如，如果`Q_OBJECT`在其定义的末尾包含一个分号，以便在替换后您得到正确的 C++ 代码，那么这就足够了。

`slots`也可能是一个宏（甚至可能是一个空的）。然后，在`slots`用虚无替换后，您将再次获得有效的 C++ 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T10:38:53.000

一般来说，如果你得到一个未定义的对 vtable 错误的引用，那是因为 qmake 没有运行并`moc`为它生成了必要的。在项目目录中重新运行 qmake 应该可以修复它，如果没有，则清理构建并再次运行 quake 和 make。

# android - 如何将arraylist从android发送到asp.net webservice

> ID：14275414
> 
> 赞同：0
> 
> 时间：2013-01-11T09:45:34.510
> 
> 标签：android, ksoap2

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        request.addProperty("birthday", dateString);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidhttpTranport = new HttpTransportSE(URL); 
```

我发送一个参数是字符串类型`request.addProperty("birthday", dateString);` 我如何发送一个`Arraylist<Object>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:29:41.953

这取决于您的 Web 服务，如果您有一组对象或原语，您可以构建一个循环迭代并添加到 SoapObject。检查[这个](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Adding_an_array_of_complex_objects_to_the_request)

# android - Android OnClickListener 错误

> ID：14275423
> 
> 赞同：0
> 
> 时间：2013-01-11T09:46:06.287
> 
> 标签：android

我正在关注 Lynda 教程并尝试在我的 MainActivity 类中实现 OnClickListener。问题是我遇到了一个错误，如下所示：

![在此处输入图像描述](../Images/5c8f5b457d9b8ecabde7f3bef39fc9d7.png)

我想知道是否有人知道为什么会出现这个错误？它似乎适用于 Lynda 专家，但也许是因为教程有点过时了？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:47:36.563

您必须在活动中**添加未实现的接口 onClickListener 方法**。只需选择第一个选项。**添加未实现的方法**

Eclipse 会自动添加`onClick()`到你的 Activity..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:47:04.160

这不是错误，您应该单击添加未实现的方法超链接以删除该错误。

您已经实现`onClickListener`了接口，但还没有实现，`onClick()`所以它显示了错误。通过单击添加未实现的方法，您可以删除该错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:48:32.220

您正在实现 onClicklistener.it 是一个接口，因此您必须实现它的所有方法。当您将实现其方法时，您将不会收到错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T09:49:02.467

只需单击添加未实现的方法。并覆盖 onClick 方法来完成你的工作。

希望[这](http://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html)可以帮助您了解`Interfaces`在 java中实现的基础知识

每当 Eclips 给您一些建议时，请先尝试一下。它会自动建议很多东西，例如投射到 ImageView、投射到 EditText、导入一些包。这对于您可能尝试做的事情可能是必要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T09:49:38.320

选择第一个选项，因为您已经实现了`onclicklistner`接口。这个接口将实现一个`onclick()`方法。在这种方法中，您可以编写代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T10:01:23.967

添加未实现的方法不是错误..

会是这样。。

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class sampl extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.intentpage);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ///  

        ///use any task  to perform
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-15T08:25:09.313

在java中，每当我们为我们的类实现一个接口时，我们总是需要在我们的类中定义其原型已经在接口中的所有方法。这就是为什么它要求你在你的类中实现那些未实现的方法。

# mysql - 使用 Classic ASP 随机 ADODB.Recordset 被“双重编码”

> ID：14275433
> 
> 赞同：2
> 
> 时间：2013-01-11T09:46:29.507
> 
> 标签：mysql, asp-classic, adodb

我有问题，我不明白是什么原因造成的。我在一个遗留网站上工作，用 Classic ASP 编写（*天哪，为什么是我*），有时显然是随机时间，没有任何解释，来自 ADODB.Recordset 的值被打印双编码。

对于*双重编码*，我的意思是“ *UTF-8 多字节字符串的 ASCII 表示的 UTF-8 编码*”，因此“ **é** ”看起来像“ **Ã©** ”（具有完全相同的编码）。

**让我抓狂的是，这似乎是随机发生的，50% 的时间编码正确，另外 50% 的编码不正确。**

让我指出它在不同时间发生在同一页面上，因此在几次页面加载后，您可以正确显示它们，然后损坏，然后再次正确等等。

这件事发生在 7 年前这个网站的早期，但是很多水已经从桥下流过，只有一个最初在这个网站上工作的人仍然在公司工作。他不记得他们做了什么来解决这个问题，他让我只说“数据库连接编码已保存到会话中”，这也许可以解释为什么`Session.CodePage = 65001`页面周围有这么多。

我什至试图`utf8`通过查询强制字符集，但显然它不起作用。

使用的驱动程序是 olde `MySQL ODBC 3.51 Driver`。

在此先感谢您提供任何建议或解决方案（不幸的是，摆脱 Classic ASP 不是一种选择）。

[更新]

这是一个情节转折，如果我输出这样的内容，它的中断次数会更少：

```
Session.CodePage = 1252
Response.Write(Property)
Session.CodePage = 65001 
```

实际上，我几乎在网站的任何地方都发现了这段代码，好像数据库驱动程序根本不关心连接的字符集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:48:38.487

我进行了一些测试，感谢@webaware 的建议，我说服自己将*ODBC 驱动程序更新到***5.1**版，经过一些调整后网站似乎稳定了，这就是我使用的代码：

```
Response.AddHeader "Content-Type", "text/html; charset=UTF-8"
Session.CodePage = 65001
Dim ConnString:ConnString = "driver={MySQL ODBC 5.1 Driver};server=localhost;port=3306;database=database;uid=uid;pwd=pwd" 
```

其他组合似乎破坏了输出编码，现在它开箱即用。

我希望这对未来有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:58:24.160

找到这种行为的原因可能真的很棘手。但是，让我指出一些有关经典 ASP 的事实，这些事实可能会对您有所帮助...

# 会话编码

Session.Codepage 影响会话的整个持续时间，这意味着所有后续请求都将使用指定的代码页。尽管通过再次指定另一个代码页，但这并不能阻止单个 asp 文件使用另一种编码。因此，请查看您的应用程序以查找通过**Session.Codepage**或**Response.Codepage**指定编码的页面。

# 浏览器编码：

这里的事情变得非常混乱。当表单数据发布到服务器时，表单 url 编码标准中没有规定声明使用的代码页。可以告诉浏览器使用什么编码，它们会默认使用包含表单的 html 页面的字符集，但是没有机制可以将该选择传达给服务器。

ASP 认为已发布表单字段的代码页与即将发送的响应的代码页相同。花点时间来吸收它.... 这意味着 Response.CodePage 值非常直观地对 Request.Form 返回的字符串产生影响。出于这个原因，尽早设置正确的代码页很重要，进行一些表单处理，然后在稍后发送响应之前设置代码页可能会导致意外结果。

## asp文件中的字符串文字

当脚本引擎解析文件时，文件中的内容块（脚本代码块之外的东西）被转换为 Response.Write 的特殊形式（包括字符串文字）。它的特殊之处在于，在脚本执行将到达这些特殊写入时，处理器只需将文件中找到的字节逐字复制到输出流中，同样不会尝试转换任何编码。

阅读此问题的答案以获取更多信息。 [内部字符串编码，经典 ASP](https://stackoverflow.com/questions/6937509/internal-string-encoding)

# android - 如何在android中播放mp4文件中的声音？

> ID：14275444
> 
> 赞同：1
> 
> 时间：2013-01-11T09:47:21.997
> 
> 标签：android, audio, mp4, live-wallpaper

我们可以只播放 mp4 文件中的音频吗？我不想观看视频，以便可以在动态壁纸的背景中播放 mp4 文件。

我尝试使用 MediaPlayer 播放 mp4 文件，但没有播放声音。有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:54:32.683

检查这个链接它显示了一些东西..

(1)。[将背景音乐添加到 Android 应用程序](http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App)

(2)。 [播放前景和背景音乐](http://android-er.blogspot.in/2010/11/play-foreground-and-background-music.html)

并用视频播放音频，你可以这样做..

(3)。 [如何播放视频和音频 android](http://www.helloandroid.com/tutorials/how-play-video-and-audio-android)

# android - 使用 d-pad 导航具有可聚焦附件操作的列表项

> ID：14275447
> 
> 赞同：2
> 
> 时间：2013-01-11T09:47:27.457
> 
> 标签：android, android-listview

在 Android 上，列表中常用的模式是附件操作。这通常通过在列表项的右侧放置一个额外的按钮来完成。

例如，闹钟应用程序列出了不同的闹钟时间；在每个列表项上，额外的两种状态按钮允许在不进入警报属性屏幕的情况下打开或关闭警报。这样的按钮是通过使用一个调整过的视图来实现的，当父布局被按下时，它不会显示自己被按下。

我的项目中的一个限制是此类操作应该在非触摸模式下可选择，即在使用 d-pad 导航时。实际上，只能使用列表项的主要部分；无法使用 d-pad 将注意力集中在附件按钮上。这发生在我读过的博客文章中的每一个提议的实现上。

一种解决方案是摆脱对列表项本身的关注，但这意味着根据具体情况会丢失许多 ListView 或 SettingsActivity 功能。

是否可以在保持正常 ListView 行为的同时使额外按钮在非触摸模式下具有焦点？我想要实现的是，例如，在使用上/下时通常选择一个列表项，并使用左/右键专注于附件按钮。

# c - 有没有更有效的方法将 char 扩展为 uint64_t？

> ID：14275449
> 
> 赞同：7
> 
> 时间：2013-01-11T09:47:33.447
> 
> 标签：c, bit-manipulation, bit-shift

我想通过重复每个位 8 次来将 an 膨胀`unsigned char`到 an 。`uint64_t`例如

```
char -> uint64_t
0x00 -> 0x00
0x01 -> 0xFF
0x02 -> 0xFF00
0x03 -> 0xFFFF
0xAA -> 0xFF00FF00FF00FF00 
```

我目前有以下实现，使用位移来测试是否设置了位，以完成此操作：

```
#include <stdint.h>
#include <inttypes.h>   

#define BIT_SET(var, pos) ((var) & (1 << (pos)))

static uint64_t inflate(unsigned char a)
{
    uint64_t MASK = 0xFF;
    uint64_t result = 0;
    for (int i = 0; i < 8; i++) {
        if (BIT_SET(a, i))
            result |= (MASK << (8 * i));    
    }

    return result;
} 
```

但是，我对 C 相当陌生，所以这种对个别位的摆弄让我有点不同，可能会有更好（即更有效）的方式来做到这一点。

**编辑添加**
好的，所以在尝试了表查找解决方案之后，结果如下。但是，请记住，我没有直接测试例程，而是作为更大函数的一部分（准确地说是二进制矩阵的乘法），所以这可能会影响结果的结果。因此，在我的计算机上，当乘以一百万个 8x8 矩阵时，并编译为：

```
 gcc -O2 -Wall -std=c99 foo.c 
```

我有

```
./a.out original
real    0m0.127s
user    0m0.124s
sys     0m0.000s

./a.out table_lookup
real    0m0.012s
user    0m0.012s
sys     0m0.000s 
```

所以至少在我的机器上（我应该提到一个虚拟机 64 位 Linux Mint），表查找方法似乎提供了大约 10 倍的加速，所以我会接受这个作为答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T09:53:12.153

如果您正在寻找效率，请使用查找表：一个包含 256 个条目的静态数组，每个条目都已包含所需的结果。您可以使用上面的代码来生成它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T10:39:16.880

在选定的架构（SSE、Neon）中，有快速向量操作可以加速此任务或旨在执行此任务。如果没有特殊说明，建议的查找表方法是最快和最便携的。

如果 2k 大小是个问题，可以模拟并行向量算术运算：

```
static uint64_t inflate_parallel(unsigned char a) {
  uint64_t vector = a * 0x0101010101010101ULL;
  // replicate the word all over qword
  // A5 becomes A5 A5 A5 A5 A5 A5 A5 A5
  vector &= 0x8040201008040201;  // becomes 80 00 20 00 00 04 00 01 <-- 
  vector += 0x00406070787c7e7f;  // becomes 80 40 80 70 78 80 7e 80
                                 // MSB is correct
  vector = (vector >> 7) & 0x0101010101010101ULL;  // LSB is correct
  return vector * 255;                             // all bits correct
} 
```

**编辑**：2^31 次迭代，（四次展开以减轻循环评估）

```
time ./parallel            time ./original            time ./lookup
real        0m2.038s       real       0m14.161s       real      0m1.436s
user        0m2.030s       user       0m14.120s       user      0m1.430s
sys         0m0.000s       sys        0m0.000s        sys       0m0.000s 
```

这大约是 7 倍的加速，而查找表提供了大约 10 倍的加速

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T10:03:25.553

在担心优化代码之前，您应该先分析代码的作用。

在我的本地编译器上，当值未知时，您的代码将完全内联、展开并变成 8 个常量 test + 或指令，并在编译时知道值时变成常量。我可能可以通过删除一些分支来稍微改进它，但是编译器自己做的是合理的工作。

优化循环有点毫无意义。表查找可能更有效，但可能会阻止编译器自己进行优化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T09:59:02.377

如果您愿意为此花费 256 * 8 = 2kB 的内存（即在内存方面效率降低，但在所需的 CPU 周期方面效率更高），最有效的方法是预先计算查找表：

```
static uint64_t inflate(unsigned char a) {
    static const uint64_t charToUInt64[256] = {
        0x0000000000000000, 0x00000000000000FF, 0x000000000000FF00, 0x000000000000FFFF,
        // ...
    };

    return charToUInt64[a];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-08T07:38:43.240

可以通过将源的每个位移动到适当目标字节的 lsb（0 → 0, 1 → 8, 2 → 16, ...., 7 → 56）来实现所需的功能，然后扩展每个 lsb 以覆盖整个字节，这很容易通过乘以`0xff`(255) 来完成。我们可以使用整数乘法来并行移动多个位，而不是使用移位单独将位移动到位，然后组合结果。为了防止自重叠，我们可以以这种方式仅移动最低有效的七个源位，但需要通过移位单独移动源 msb。

这导致以下 ISO-C99 实施：

```
#include <stdint.h>

/* expand each bit in input into one byte in output */
uint64_t fast_inflate (uint8_t a)
{
    const uint64_t spread7 = (1ULL << 42) | (1ULL << 35) | (1ULL << 28) | (1ULL << 21) | 
                             (1ULL << 14) | (1ULL <<  7) | (1UL <<   0);
    const uint64_t byte_lsb = (1ULL << 56) | (1ULL << 48) | (1ULL << 40) | (1ULL << 32) |
                              (1ULL << 24) | (1ULL << 16) | (1ULL <<  8) | (1ULL <<  0);
    uint64_t r;
    /* spread bits to lsbs of each byte */
    r = (((uint64_t)(a & 0x7f) * spread7) + ((uint64_t)a << 49));
    /* extract the lsbs of all bytes */
    r = r & byte_lsb;
    /* fill each byte with its lsb */
    r = r * 0xff;
    return r;
}

#define BIT_SET(var, pos) ((var) & (1 << (pos)))
static uint64_t inflate(unsigned char a)
{
    uint64_t MASK = 0xFF;
    uint64_t result = 0;
    for (int i = 0; i < 8; i++) {
        if (BIT_SET(a, i))
            result |= (MASK << (8 * i));    
    }
    return result;
}

#include <stdio.h>
#include <stdlib.h>

int main (void)
{
    uint8_t a = 0;
    do {
        uint64_t res = fast_inflate (a);
        uint64_t ref = inflate (a);
        if (res != ref) {
            printf ("error @ %02x: fast_inflate = %016llx  inflate = %016llx\n", 
                    a, res, ref);
            return EXIT_FAILURE;
        }
        a++;
    } while (a);
    printf ("test passed\n");
    return EXIT_SUCCESS;
} 
```

大多数 x64 编译器将以`fast_inflate()`直接的方式编译。例如，我的英特尔编译器版本 13.1.3.198 在使用 构建时`/Ox`，会生成以下 11 条指令序列。请注意，最终的乘法`0xff`实际上是作为移位和减法序列实现的。

```
fast_inflate    PROC 
        mov       rdx, 040810204081H
        movzx     r9d, cl
        and       ecx, 127
        mov       r8, 0101010101010101H
        imul      rdx, rcx
        shl       r9, 49
        add       r9, rdx
        and       r9, r8
        mov       rax, r9
        shl       rax, 8
        sub       rax, r9
        ret 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-08T09:09:54.500

这是仅使用简单算术的另一种方法：

```
uint64_t inflate_chqrlie(uint8_t value) {
    uint64_t x = value;
    x = (x | (x << 28));
    x = (x | (x << 14));
    x = (x | (x <<  7)) & 0x0101010101010101ULL;
    x = (x << 8) - x;
    return x;
} 
```

phuclv 使用乘法和掩码的另一个非常有效和简洁的方法：

```
static uint64_t inflate_phuclv(uint8_t b) {
    uint64_t MAGIC = 0x8040201008040201ULL;
    uint64_t MASK  = 0x8080808080808080ULL;
    return ((MAGIC * b) & MASK) >> 7;
} 
```

另一个带有一个小的查找表：

```
static uint32_t const lut_4_32[16] = {
    0x00000000, 0x000000FF, 0x0000FF00, 0x0000FFFF, 
    0x00FF0000, 0x00FF00FF, 0x00FFFF00, 0x00FFFFFF, 
    0xFF000000, 0xFF0000FF, 0xFF00FF00, 0xFF00FFFF, 
    0xFFFF0000, 0xFFFF00FF, 0xFFFFFF00, 0xFFFFFFFF, 
};

static uint64_t inflate_lut32(uint8_t b) {
    return lut_4_32[b & 15] | ((uint64_t)lut_4_32[b >> 4] << 32);
} 
```

我编写了一个基准测试程序来确定我系统上不同方法的相对性能（x86_64-apple-darwin16.7.0，Apple LLVM 版本 9.0.0（clang-900.0.39.2，clang -O3）。

结果表明，我的函数`inflate_chqrlie`比简单方法快，但比其他复杂版本慢，所有这些都通过`inflate_lut64`在缓存最佳情况下使用 2KB 查找表而被击败。

该函数`inflate_lut32`使用小得多的查找表（64 字节而不是 2KB）不如 快`inflate_lut64`，但对于 32 位架构来说似乎是一个很好的折衷方案，因为它仍然比所有其他替代方案快得多。

64 位基准测试：

```
 inflate: 0, 848.316ms
        inflate_Curd: 0, 845.424ms
     inflate_chqrlie: 0, 371.502ms
 fast_inflate_njuffa: 0, 288.669ms
   inflate_parallel1: 0, 242.827ms
   inflate_parallel2: 0, 315.105ms
   inflate_parallel3: 0, 363.379ms
   inflate_parallel4: 0, 304.051ms
   inflate_parallel5: 0, 301.205ms
      inflate_phuclv: 0, 109.130ms
       inflate_lut32: 0, 197.178ms
       inflate_lut64: 0, 25.160ms 
```

32 位基准测试：

```
 inflate: 0, 1451.464ms
        inflate_Curd: 0, 955.509ms
     inflate_chqrlie: 0, 385.036ms
 fast_inflate_njuffa: 0, 463.212ms
   inflate_parallel1: 0, 468.070ms
   inflate_parallel2: 0, 570.107ms
   inflate_parallel3: 0, 511.741ms
   inflate_parallel4: 0, 601.892ms
   inflate_parallel5: 0, 506.695ms
      inflate_phuclv: 0, 192.431ms
       inflate_lut32: 0, 140.968ms
       inflate_lut64: 0, 28.776ms 
```

这是代码：

```
#include <stdio.h>
#include <stdint.h>
#include <time.h>

static uint64_t inflate(unsigned char a) {
#define BIT_SET(var, pos) ((var) & (1 << (pos)))
    uint64_t MASK = 0xFF;
    uint64_t result = 0;
    for (int i = 0; i < 8; i++) {
        if (BIT_SET(a, i))
            result |= (MASK << (8 * i));
    }

    return result;
}

static uint64_t inflate_Curd(unsigned char a) {
    uint64_t mask = 0xFF;
    uint64_t result = 0;
    for (int i = 0; i < 8; i++) {
        if (a & 1)
            result |= mask;
        mask <<= 8;
        a >>= 1;
    }
    return result;
}

uint64_t inflate_chqrlie(uint8_t value) {
    uint64_t x = value;
    x = (x | (x << 28));
    x = (x | (x << 14));
    x = (x | (x <<  7)) & 0x0101010101010101ULL;
    x = (x << 8) - x;
    return x;
}

uint64_t fast_inflate_njuffa(uint8_t a) {
    const uint64_t spread7 = (1ULL << 42) | (1ULL << 35) | (1ULL << 28) | (1ULL << 21) |
        (1ULL << 14) | (1ULL <<  7) | (1UL <<   0);
    const uint64_t byte_lsb = (1ULL << 56) | (1ULL << 48) | (1ULL << 40) | (1ULL << 32) |
        (1ULL << 24) | (1ULL << 16) | (1ULL <<  8) | (1ULL <<  0);
    uint64_t r;
    /* spread bits to lsbs of each byte */
    r = (((uint64_t)(a & 0x7f) * spread7) + ((uint64_t)a << 49));
    /* extract the lsbs of all bytes */
    r = r & byte_lsb;
    /* fill each byte with its lsb */
    r = r * 0xff;
    return r;
}

// Aki Suuihkonen: 1.265
static uint64_t inflate_parallel1(unsigned char a) {
    uint64_t vector = a * 0x0101010101010101ULL;
    // replicate the word all over qword
    // A5 becomes A5 A5 A5 A5 A5 A5 A5 A5
    vector &= 0x8040201008040201;  // becomes 80 00 20 00 00 04 00 01 <--
    vector += 0x00406070787c7e7f;  // becomes 80 40 80 70 78 80 7e 80
    // MSB is correct
    vector = (vector >> 7) & 0x0101010101010101ULL;  // LSB is correct
    return vector * 255;                             // all bits correct
}

// By seizet and then combine: 1.583
static uint64_t inflate_parallel2(unsigned char a) {
    uint64_t vector1 = a * 0x0002000800200080ULL;
    uint64_t vector2 = a * 0x0000040010004001ULL;
    uint64_t vector = (vector1 & 0x0100010001000100ULL) | (vector2 & 0x0001000100010001ULL);
    return vector * 255;
}

// Stay in 32 bits as much as possible: 1.006
static uint64_t inflate_parallel3(unsigned char a) {
    uint32_t vector1 = (( (a & 0x0F)       * 0x00204081) & 0x01010101) * 255;
    uint32_t vector2 = ((((a & 0xF0) >> 4) * 0x00204081) & 0x01010101) * 255;
    return (((uint64_t)vector2) << 32) | vector1;
}

// Do the common computation in 64 bits: 0.915
static uint64_t inflate_parallel4(unsigned char a) {
    uint32_t vector1 =  (a & 0x0F)       * 0x00204081;
    uint32_t vector2 = ((a & 0xF0) >> 4) * 0x00204081;
    uint64_t vector = (vector1 | (((uint64_t)vector2) << 32)) & 0x0101010101010101ULL;
    return vector * 255;
}

// Some computation is done in 64 bits a little sooner: 0.806
static uint64_t inflate_parallel5(unsigned char a) {
    uint32_t vector1 = (a & 0x0F) * 0x00204081;
    uint64_t vector2 = (a & 0xF0) * 0x002040810000000ULL;
    uint64_t vector = (vector1 | vector2) & 0x0101010101010101ULL;
    return vector * 255;
}

static uint64_t inflate_phuclv(uint8_t b) {
    uint64_t MAGIC = 0x8040201008040201ULL;
    uint64_t MASK  = 0x8080808080808080ULL;
    return ((MAGIC * b) & MASK) >> 7;
}

static uint32_t const lut_4_32[16] = {
    0x00000000, 0x000000FF, 0x0000FF00, 0x0000FFFF, 
    0x00FF0000, 0x00FF00FF, 0x00FFFF00, 0x00FFFFFF, 
    0xFF000000, 0xFF0000FF, 0xFF00FF00, 0xFF00FFFF, 
    0xFFFF0000, 0xFFFF00FF, 0xFFFFFF00, 0xFFFFFFFF, 
};

static uint64_t inflate_lut32(uint8_t b) {
    return lut_4_32[b & 15] | ((uint64_t)lut_4_32[b >> 4] << 32);
}

static uint64_t lut_8_64[256];

static uint64_t inflate_lut64(uint8_t b) {
    return lut_8_64[b];
}

#define ITER  1000000

int main() {
    clock_t t;
    uint64_t x;

    for (int b = 0; b < 256; b++)
        lut_8_64[b] = inflate((uint8_t)b);

#define TEST(func)  do {                                \
        t = clock();                                    \
        x = 0;                                          \
        for (int i = 0; i < ITER; i++) {                \
            for (int b = 0; b < 256; b++)               \
                x ^= func((uint8_t)b);                  \
        }                                               \
        t = clock() - t;                                \
        printf("%20s: %llu, %.3fms\n",                  \
               #func, x, t * 1000.0 / CLOCKS_PER_SEC);  \
       } while (0)

    TEST(inflate);
    TEST(inflate_Curd);
    TEST(inflate_chqrlie);
    TEST(fast_inflate_njuffa);
    TEST(inflate_parallel1);
    TEST(inflate_parallel2);
    TEST(inflate_parallel3);
    TEST(inflate_parallel4);
    TEST(inflate_parallel5);
    TEST(inflate_phuclv);
    TEST(inflate_lut32);
    TEST(inflate_lut64);

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T12:51:42.690

与@Aki 答案相同主题的变体。其中一些在这里更好，但这可能取决于您的编译器和目标机器（它们应该更适合 Aki 的功能的超标量处理器，即使它们做更多的工作，因为数据依赖性更少）

```
// Aki Suuihkonen: 1.265
static uint64_t inflate_parallel1(unsigned char a) {
  uint64_t vector = a * 0x0101010101010101ULL;
  vector &= 0x8040201008040201;
  vector += 0x00406070787c7e7f;
  vector = (vector >> 7) & 0x0101010101010101ULL; 
  return vector * 255;
}

// By seizet and then combine: 1.583
static uint64_t inflate_parallel2(unsigned char a) {
    uint64_t vector1 = a * 0x0002000800200080ULL;
    uint64_t vector2 = a * 0x0000040010004001ULL;
    uint64_t vector = (vector1 & 0x0100010001000100ULL) | (vector2 & 0x0001000100010001ULL);
    return vector * 255;
}

// Stay in 32 bits as much as possible: 1.006
static uint64_t inflate_parallel3(unsigned char a) {
    uint32_t vector1 = (( (a & 0x0F)       * 0x00204081) & 0x01010101) * 255;
    uint32_t vector2 = ((((a & 0xF0) >> 4) * 0x00204081) & 0x01010101) * 255;
    return (((uint64_t)vector2) << 32) | vector1;
}

// Do the common computation in 64 bits: 0.915
static uint64_t inflate_parallel4(unsigned char a) {
    uint32_t vector1 =  (a & 0x0F)       * 0x00204081;
    uint32_t vector2 = ((a & 0xF0) >> 4) * 0x00204081;
    uint64_t vector = (vector1 | (((uint64_t)vector2) << 32)) & 0x0101010101010101ULL;
    return vector * 255;
}

// Some computation is done in 64 bits a little sooner: 0.806
static uint64_t inflate_parallel5(unsigned char a) {
    uint32_t vector1 = (a & 0x0F) * 0x00204081;
    uint64_t vector2 = (a & 0xF0) * 0x002040810000000ULL;
    uint64_t vector = (vector1 | vector2) & 0x0101010101010101ULL;
    return vector * 255;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T09:57:30.637

两个小的优化：
一个用于测试输入中的位（a 将被破坏，但这无关紧要）
另一个用于移动掩码。

```
static uint64_t inflate(unsigned char a)
{
    uint64_t mask = 0xFF;
    uint64_t result = 0;
    for (int i = 0; i < 8; i++) {
        if (a & 1)
            result |= mask;
        mask <<= 8;    
        a >>= 1;
    }

    return result;
} 
```

也许您也可以用“while (a)”循环替换“for (int i = 0; i < 8; i++)”循环。但是，这只有在右移 a >>=1 无符号工作时才有效（据我所知，C 标准允许编译器对其进行有符号或无符号操作）。否则在某些情况下你会出现无限循环。

编辑：
为了查看结果，我用`gcc -std=c99 -S source.c`. 快速浏览一下生成的汇编器输出可以看出，上面显示的优化产生了 ca. 1/3 查看器说明，其中大部分在循环内。

# php - shell 上的 file_put_contents 执行失败

> ID：14275450
> 
> 赞同：1
> 
> 时间：2013-01-11T09:47:35.497
> 
> 标签：php, shell, shell-exec

你好，我有一个 php 文件，其中包含一些数字运算并从像这样的不同 php 文件中调用

```
$exc = "nohup nice php -f " . PATH . "/download.phtml $data $data1 $data 1>/dev/null & echo $!"; 
```

在那个文件中，我有一个像这样的 file_put_contents 函数调用

```
if(file_put_contents(PATH."/tmp/generated/".$queue->output_value, $data)){
                        $queue->saveData();
                    }else{
                       // write down the file path
                    } 
```

在我的测试台上一切都很好。但是像往常一样，当我把它放在现场设备上时它失败了......文件写入失败。

我仔细检查了路径是否 100% 正确，并且写入的文件夹设置为 777（只是为了让它工作）但仍然没有午餐失败写入失败......

我听说过**umask**，但我不确定它是否适用于 shell 执行的命令....

欢迎提出建议。

附言。工作平台是 Debian。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:41:58.383

好的，所有收到此错误的人。

如果您将文件夹的权限更改为 777 并且它不允许您创建文件并且该`umask`功能对...没有帮助...那么您可能会被困在

www-data 用户运行进程，除了在他的域中之外，不能在任何地方写... sux ha？

所以您需要通过以下操作更改您的文件夹

```
chown -R www-data.www-data /location of the folder.... 
```

# ruby-on-rails - 如果是 js 而不是 html，则执行 flash 消息

> ID：14275456
> 
> 赞同：0
> 
> 时间：2013-01-11T09:47:43.357
> 
> 标签：ruby-on-rails, cancan

我使用 cancan 进行基于角色的授权。

在访问被拒绝时，我在 application_controller 中有这个

```
rescue_from CanCan::AccessDenied do |exception|
 flash[:notice] = flash_helper("Access denied.")
 render :template => "shared/access_denied"
end 
```

问题是有时它必须生成一个 js 响应，而有时它必须生成一个 html 响应。

我想要一个条件，当它是 js 响应而不是 html 响应时执行 flash 通知。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:42:01.463

感谢 MurifoX 为我指明了正确的方向。这段代码做到了

```
rescue_from CanCan::AccessDenied do |exception|
 if request.format == "text/javascript"
   flash[:notice] = flash_helper("Access denied.")
 end
 render :template => "shared/access_denied"
end 
```

# javascript - MVC3 使用 javascript 将模型视图传递给控制器

> ID：14275461
> 
> 赞同：0
> 
> 时间：2013-01-11T09:48:00.020
> 
> 标签：javascript, asp.net-mvc-3, razor

我正在尝试使用 javascript 将模型从视图传递到控制器。但它返回空值。

这是我的看法 **Newcamp.chstml**

```
 <input type="submit" value="Preview" id="ClickMe" class="cssLoginButton blue"/>

<script type="text/javascript">
 function OpenWindow(query, w, h, scroll) {
     var l = (screen.width - w) / 2;
     var t = (screen.height - h) / 2;

     winprops = 'resizable=0, height=' + h + ',width=' + w + ',top=' + t + ',left=' + l + 'w';
     if (scroll) winprops += ',scrollbars=1';
     var f = window.open(query, "_blank", winprops);
 }

 $(function () {
     $('#ClickMe').click(function () {
             OpenWindow('@Url.Action("NewCampEmail", "Camp",new{model = @Model})', 700, 700, true);
     });
 });
</script> 
```

我的控制器动作**NewCampEmail**

```
 [HttpGet]
    [OutputCache(Location = OutputCacheLocation.None)]
    [Authorize]
    public ActionResult NewCampEmail(Models.NewCamp model)
    {            
        return ReturnModelWithEmailType(model,EmailType.NewCampEmail);
    } 
```

在**模型**中，我得到空值。为什么我得到空值？我的代码有什么变化吗？我的模型在**NewCamp.chstml**中是相同的，即 Models.Newcamp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:24:47.593

您不能以这种方式通过 javascript 传递 @Model。该模型仅存在于服务器端，并在 http 响应发回之前用于页面创建。您当然可以从模型中获取“值”并将它们作为内容发送到控制器，但是无法以这种方式引用实际的模型本身。

如果您想引用单个，而不是页面上的属性等，最好的选择是查看[knockoutjs （无论是一个很好的练习）或类似的东西。](http://knockoutjs.com/)`Model`

简而言之，一旦页面被渲染，@Model 就消失了，只能通过页面属性或由@Model 填充的 javascript 对象来引用...

# macos - 如何从文本字段/视图的纯文本中获取 html 格式

> ID：14275463
> 
> 赞同：1
> 
> 时间：2013-01-11T09:48:02.453
> 
> 标签：macos, cocoa

我如何以编程方式将文本字段/视图的纯文本转换为 html 格式。是否有任何转换器/编辑器可以帮助我将纯文本转换为 html 格式？

例如。在 Stack Overflow 中，我们有 html 按钮（在标题下方），它将纯文本转换为 html。同样的事情我想将纯文本转换为 html。

# javascript - 没有某些字段的深度克隆

> ID：14275467
> 
> 赞同：11
> 
> 时间：2013-01-11T09:48:04.993
> 
> 标签：javascript, jquery, clone, deep-copy

让我有下一个 javascript 对象。现在我想克隆它但没有一些字段。例如我想要没有字段`"lastName"`和`"cars.age"`
**输入的克隆对象**

```
{
   "firstName":"Fred",
   "lastName":"McDonald",
      "cars":[
           {
              "type":"mersedes",
              "age":5
           },
           {
              "model":"bmw",
              "age":10
           }
       ]
} 
```

**输出**（克隆）

```
{
   "firstName":"Fred",
   "cars":[
       {
          "model":"mersedes"
       },
       {
          "model":"bmw"
       }
   ]
} 
```

我可以做类似的事情

```
var human = myJson   
var clone = $.extend(true, {}, human)  
delete clone.lastName  
_.each(clone.cars, function(car))  
{  
   delete car.age  
} 
```

你知道更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:41:55.437

如果您不介意添加到对象原型，这是一个简单的解决方案。您可能需要对其进行一些修改以供自己使用。

```
Object.prototype.deepOmit = function(blackList) {
  if (!_.isArray(blackList)) { 
    throw new Error("deepOmit(): argument must be an Array");
  }

  var copy = _.omit(this, blackList);
  _.each(blackList, function(arg) {
    if (_.contains(arg, '.')) {
      var key  = _.first(arg.split('.'));
      var last = arg.split('.').slice(1);
      copy[key] = copy[key].deepOmit(last);
    }
  });
  return copy;
};

Array.prototype.deepOmit = function(blackList) {
  if (!_.isArray(blackList)) { 
    throw new Error("deepOmit(): argument must be an Array");
  }

  return _.map(this, function(item) {
    return item.deepOmit(blackList);
  });
}; 
```

然后当你有一个像这样的对象时：

```
var personThatOwnsCars = {
   "firstName":"Fred",
   "lastName":"McDonald",
      "cars":[
           {
              "type":"mersedes",
              "age":5
           },
           {
              "model":"bmw",
              "age":10
           }
       ]
}; 
```

你可以做这样的魔术。

```
personThatOwnsCars.deepOmit(["firstName", "cars.age"]); 
```

甚至像这样的魔法！

```
[person1, person2].deepOmit(["firstName", "cars.age"]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T11:05:26.137

这是一个独立的函数，取决于我编写的 lodash/下划线，它的作用相同。

它为对象或数组中的每个 (value, indexOrKey) 对调用回调，如果为 true，将在结果对象中忽略该对。

在访问值后调用回调，因此您可以省略与您的条件匹配的整个值子树。

```
function deepOmit(sourceObj, callback, thisArg) {
    var destObj, i, shouldOmit, newValue;

    if (_.isUndefined(sourceObj)) {
        return undefined;
    }

    callback = thisArg ? _.bind(callback, thisArg) : callback;

    if (_.isPlainObject(sourceObj)) {
        destObj = {};
        _.forOwn(sourceObj, function(value, key) {
            newValue = deepOmit(value, callback);
            shouldOmit = callback(newValue, key);
            if (!shouldOmit) {
                destObj[key] = newValue;
            }
        });
    } else if (_.isArray(sourceObj)) {
        destObj = [];
        for (i = 0; i <sourceObj.length; i++) {
            newValue = deepOmit(sourceObj[i], callback);
            shouldOmit = callback(newValue, i);
            if (!shouldOmit) {
                destObj.push(newValue);
            }
        }
    } else {
        return sourceObj;
    }

    return destObj;
} 
```

一些样品

```
var sourceObj = {
    a1: [ undefined, {}, { o: undefined } ],
    a2: [ 1, undefined ],
    o: { s: 's' } 
};

deepOmit(sourceObj, function (value) {
    return value === undefined;
});
//=> { a1: [ {}, {} ], a2: [ 1 ], o: { s: 's' }}

//omit empty objects and arrays too
deepOmit(sourceObj, function (value) {
    return value === undefined ||
        (_.isPlainObject(value) && !_.keys(value).length) ||
        (_.isArray(value) && !value.length);
});
//=> { a2: [ 1 ], o: { s: 's' }}

//indexOrKey is the string key or the numeric index if the object is array
deepOmit([ 0, 1, 2, 3, 4 ], function (value, indexOrKey) {
    return indexOrKey % 2;
});
//=> [ 0, 2, 4 ] 
```

# html - 页眉 + 内容 + 页脚，带有嵌套所有内容的表单

> ID：14275468
> 
> 赞同：0
> 
> 时间：2013-01-11T09:48:06.333
> 
> 标签：html, css

我有以下具有页眉、可滚动内容和页脚的 HTML，它工作正常。

我想添加到这个 HTML 的是一个包含所有三个 div 的表单，问题是一旦我用标签包装 div，布局就会中断。有什么建议么？

```
<head>
</head>

<style>
<!--
body {
    padding: 0px;
    margin: 0px;
    overflow: hidden;
}

* html body {
    padding: 50px 0 50px 0;
}

div#header {
    background-color: yellow;
    position: absolute;
    top: 0px;
    height: 50px;
    width: 100%;
}

div#content {
    background-color: red;
    position: fixed;
    top: 50px;
    bottom: 50px;
    overflow: auto;
    width: 100%;
    height: 100%;
}

div#footer {
    background-color: blue;
    position: absolute;
    bottom: 0px;
    height: 50px;
    width: 100%;
}
-->
</style>

<body>
  <div id="header">header</div>

  <div id="content">
    bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br />
    bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br />
    bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla<br /> bla last<br />
  </div>

  <div id="footer">footer</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:58:52.597

`position:absolute`如果我理解你..你的问题是`position:fixed`你给他们的。

当您将它们包装起来时，`<div>`您必须提供该 div `position`（例如相对）。绝对元素和固定元素与**最近的定位**元素相关。在您的情况下.. 无论您将它们包装在 10 个 div 中.. 最近定位的元素仍然是**BODY**。

# regex - 带有计数数字并允许特殊字符的正则表达式

> ID：14275472
> 
> 赞同：2
> 
> 时间：2013-01-11T09:48:12.573
> 
> 标签：regex

我做了一些搜索，但找不到正确的正则表达式。

我想要一个只包含数字、空格和加号的文本的正则表达式。喜欢：[0-9 +]

但是只有该文本中的数字有最小/最大限制。

我的建议最终是这样的：

```
 ^[0-9 \+](?=(.*[0-9]){5,8})$ 
```

应该可以：

*   “123 456 7”
*   “12345”
*   “+ 123 456 78”

应该不行：

*   “123456789”
*   “+ 124 578a”
*   “+123456789”

任何人都有可能解决问题的解决方案？

编辑：

我可以看到我没有解释我的目标。

我的正则表达式条件应该是：

*   必须包含 5-8 位数字
*   允许空格和加号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:06:33.063

我从您自己的正则表达式中猜测，允许连续 5 到 8 位数字之间没有空格。如果这是真的，那么下面的正则表达式可能会起作用（用 Python 编写的示例）。它允许长度在 5 到 8 位之间的单个数字组。如果有多个组，则允许每个组恰好有 3 位数字，但最后一组的长度可以在 1 到 3 位之间。左侧的一个加号是可选的。

你在解析电话号码吗？:)

```
In [176]: regex = re.compile(r"""
                 ^                  # start of string
                 (?: \+\s )?        # optional plus sign followed by whitespace
                 (?:
                     (?: \d{3}\s )+ # one or more groups of three digits followed by whitespace
                     \d{1,3}        # one group of between one and three digits
                     |              # ALTERNATIVE
                     \d{5,8}        # one group of between five and eight digits
                 )
                 $                  # end of string
                 """, flags=re.X)

# --- MATCHES ---
In [177]: regex.findall('123 456 7')
Out[177]: ['123 456 7']

In [178]: regex.findall('12345')
Out[178]: ['12345']

In [179]: regex.findall('+ 123 456 78')
Out[179]: ['+ 123 456 78']

In [200]: regex.findall('12345678')
Out[200]: ['12345678']

# --- NON-MATCHES ---
In [180]: regex.findall('123456789')
Out[180]: []

In [181]: regex.findall('+ 124 578a')
Out[181]: []

In [182]: regex.findall('+123456789')
Out[182]: []

In [198]: regex.findall('123')
Out[198]: []

In [24]: regex.findall('1234 556')
Out[24]: [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:09:41.663

您非常接近 - 您需要将前瞻锚定到输入的开头，并为数字数量的上限添加第二个*负前瞻：*

```
^(?=(.*\d){5,8})(?!(.*\d){9,})[\d +]+$ 
```

另外，仅供参考，您不需要在字符类中转义加号，并且`[0-9]`是`\d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:10:16.407

你可以这样做：

```
^(?:[ +]*[0-9]){5}(?:(?:[ +]*[0-9])?){3}$ 
```

[在 Regexr 上](http://regexr.com?33cco)查看

第一组`(?:[ +]*[0-9]){5}`是 5 个最小数字，前面有任意数量的空格和加号，第二部分`(?:(?:[ +]*[0-9])?){3}`匹配可选数字，前面有任意数量的空格和加号。

# java - 从 java 内部调用 node.js 脚本

> ID：14275479
> 
> 赞同：20
> 
> 时间：2013-01-11T09:48:35.177
> 
> 标签：java, node.js, console

如何在 java 中调用 node.js 并将 console.log 值保存在 String 变量中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-20T13:12:20.930

检查这些允许您在 jvm 中运行 node.js 脚本的项目

*   [https://github.com/apigee/trireme](https://github.com/apigee/trireme) (Apigee)
*   [http://nodyn.io/](http://nodyn.io/)（红帽）
*   [https://avatar-js.java.net/](https://avatar-js.java.net/) (甲骨文)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T16:54:58.340

Java 应用程序可以与正在运行的 Node.JS 应用程序进行通信。例如，您可以在可用端口上运行 Node.JS 应用程序，Java 应用程序可以通过 tcp 套接字与其通信。

[http://nodejs.org/api/net.html](http://nodejs.org/api/net.html)

或者，您可以创建一个 http 服务器并公开您的 Java 应用程序可以使用的休息服务。

[http://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

或者正如 md_5 所说，您可以使用 Runtime.exec 然后在结果进程上调用 getInputStream 。

[http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)

您可以在 node.js 和 Java 之间进行通信的方式与可以完成的其他跨应用程序通信没有什么不同。

也可以使用 node-java 之类的东西从 Node.JS 应用程序调用 Java 代码。

[https://github.com/nearinfinity/node-java](https://github.com/nearinfinity/node-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-17T13:12:20.167

是的，使用 java 执行和 node.js 文件非常容易。

```
import java.io.FileReader;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;

public class RunScriptFileDemo {
  public static void main(String[] args) {
      ScriptEngineManager manager = new ScriptEngineManager();
      ScriptEngine engine = manager.getEngineByName("js");
      try {
         FileReader reader = new FileReader("yourFile.js");
         engine.eval(reader);
         reader.close();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-02T00:29:03.503

查看[https://github.com/caoccao/Javet](https://github.com/caoccao/Javet)，您可以在 java 应用程序中嵌入 node.js 运行时并在两者之间共享变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T12:29:30.643

做不到。对于普通的 JS，您可以使用 Rhino，但对于 Node，您需要确保它在 PATH 中，然后调用 Runtine.exec 或带有 ByteArrayOutputsreams 的 ProcessBuilder，稍后可以将其转换为字符串。节点代码无法访问 Java，反之亦然。

# visual-studio - 使用 mt.exe 将清单应用于 wix 生成的 msi 的问题

> ID：14275483
> 
> 赞同：0
> 
> 时间：2013-01-11T09:49:01.847
> 
> 标签：visual-studio, msbuild, wix

我正在尝试将清单应用于 WiX 生成的 msi 以创建一个 exe，该 exe 将在运行安装程序时立即显示 UAC 提示。不幸的是，我在构建安装程序项目时遇到以下错误：

```
Values of attribute "level" not equal in different manifest snippets. mt.exe 
```

我需要提升执行以允许在 InstallUISequence 期间运行的自定义操作具有管理员权限（以查找 IIS 应用程序池和 Web 应用程序）。我在 Windows 8 上使用 Visual Studio 2012。

下面是我的 wixproj 文件，它显示了我的引导程序设置：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>3.5</ProductVersion>
    <ProjectGuid>{d51029e8-4a79-4812-96e1-bf6b600d5d34}</ProjectGuid>
    <SchemaVersion>2.0</SchemaVersion>
    <OutputName>WixInstallerExampleWebInstaller</OutputName>
    <OutputType>Package</OutputType>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
    <DefineConstants>Debug</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <OutputPath>bin\$(Configuration)\</OutputPath>
    <IntermediateOutputPath>obj\$(Configuration)\</IntermediateOutputPath>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="IisSettingsDlg.wxs" />
    <Compile Include="Product.wxs" />
    <Compile Include="UserInterface.wxs" />
    <Compile Include="WixInstallerExampleWeb.wxs" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\WixInstallerExampleWeb\WixInstallerExampleWeb.csproj">
      <Name>WixInstallerExampleWeb</Name>
      <Project>{d23a374d-764c-40ba-b566-4d7c55319236}</Project>
      <Private>True</Private>
      <DoNotHarvest>True</DoNotHarvest>
      <RefProjectOutputGroups>Binaries;Content;Satellites</RefProjectOutputGroups>
      <RefTargetDir>INSTALLLOCATION</RefTargetDir>
      <PackageThisProject>True</PackageThisProject>
    </ProjectReference>
  </ItemGroup>
  <ItemGroup>
    <WixExtension Include="WixUtilExtension">
      <HintPath>$(WixExtDir)\WixUtilExtension.dll</HintPath>
      <Name>WixUtilExtension</Name>
    </WixExtension>
    <WixExtension Include="WixNetFxExtension">
      <HintPath>$(WixExtDir)\WixNetFxExtension.dll</HintPath>
      <Name>WixNetFxExtension</Name>
    </WixExtension>
    <WixExtension Include="WixIIsExtension">
      <HintPath>$(WixExtDir)\WixIIsExtension.dll</HintPath>
      <Name>WixIIsExtension</Name>
    </WixExtension>
    <WixExtension Include="WixUIExtension">
      <HintPath>$(WixExtDir)\WixUIExtension.dll</HintPath>
      <Name>WixUIExtension</Name>
    </WixExtension>
  </ItemGroup>
  <ItemGroup>
    <Content Include="EULA.rtf" />
    <Content Include="IisManager.CA.dll" />
    <Content Include="uac.manifest" />
  </ItemGroup>
  <ItemGroup>
    <BootstrapperFile Include="Microsoft.Windows.Installer.3.1" >
      <ProductName>Windows Installer 3.1</ProductName>
    </BootstrapperFile>
  </ItemGroup>

  <Import Project="$(WixTargetsPath)" />
  <Target Name="Bootstrapper"
        Inputs="$(OutDir)$(TargetFileName)"
        Outputs="$(OutDir)\Setup.exe"
        Condition=" '$(OutputType)'=='package' " >
    <GenerateBootstrapper ApplicationName="application name"
                          ApplicationFile="$(TargetFileName)"
                          BootstrapperItems="@(BootstrapperFile)"
                          ComponentsLocation="Relative"
                          OutputPath="$(OutputPath)"
                          Culture="en-US"
                          Path="C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper" />
  </Target>
  <Target Name="PatchSetupExe" DependsOnTargets="Bootstrapper">
    <Exec Command='"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\bin\mt.exe" -manifest "$(ProjectDir)uac.manifest" -updateresource:"$(ProjectDir)$(OutputPath)Setup.exe;#1"' IgnoreExitCode='false' />    
  </Target>
  <Import Project="$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets" />

  <PropertyGroup>
    <BuildDependsOn>$(BuildDependsOn);Bootstrapper;PatchSetupExe</BuildDependsOn>
  </PropertyGroup>
  <Target Name="BeforeBuild">
    <MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=AnyCPU" Condition="'%(ProjectReference.PackageThisProject)'=='True'" />
    <Copy SourceFiles="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\TransformWebConfig\transformed\web.config" OverwriteReadOnlyFiles="true" DestinationFolder="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" Condition="'%(ProjectReference.PackageThisProject)'=='True'" />
    <PropertyGroup>
      <LinkerBaseInputPaths>%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\</LinkerBaseInputPaths>
      <DefineConstants>BasePath=%(ProjectReference.RootDir)%(ProjectReference.Directory);</DefineConstants>
    </PropertyGroup>
    <HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" DirectoryRefId="INSTALLLOCATION" ComponentGroupName="%(ProjectReference.Filename)_Project" SuppressCom="true" SuppressFragments="true" SuppressRegistry="true" SuppressRootDirectory="true" AutoGenerateGuids="false" GenerateGuidsNow="true" ToolPath="$(WixToolPath)" Condition="'%(ProjectReference.PackageThisProject)'=='True'" PreprocessorVariable="var.BasePath" />
  </Target>
  <PropertyGroup>
    <PreBuildEvent />
  </PropertyGroup>
  <PropertyGroup>
    <PostBuildEvent />
  </PropertyGroup>
  <!--
    To modify your build process, add your task inside one of the targets below and uncomment it.
    Other similar extension points exist, see Wix.targets.

    <Target Name="AfterBuild">
    </Target>
    -->
</Project> 
```

这是我正在尝试应用的清单文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="Setup" type="win32" />
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:44:01.353

我找到了一种解决方案。下载[资源黑客](http://www.angusj.com/resourcehacker/)。打开生成的可执行文件并浏览它，直到找到清单文件。您可以在 UI 中直接编辑它，也可以在命令行中编写脚本：

```
ResHacker.exe -modify old.exe,new.exe,manifestToUse.manifest,ROOTNODE,SUBNODE* 
```

*那些节点是与您尝试更新的资源（清单）相对应的路径 - 它是 Resource Hacker UI 中的树中的路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-30T14:18:16.970

另一个Hack是修改WiX的burn.exe的清单信息。但这似乎是一个非常糟糕的解决方案，我不确定是否有任何副作用。但在我的情况下，我可以通过这种方式解决它，因为在我的构建过程中，我在源代码控制版本系统中使用了 WiX 二进制文件（而不是 WiX 设置），这样就不会影响我机器上的任何其他 WiX 项目。

我使用 Visual Studio 的资源编辑器来编辑 burn.exe 的清单。

# css - 使用 css 和 html 使 div 框居中而不使框中的文本居中

> ID：14275492
> 
> 赞同：0
> 
> 时间：2013-01-11T09:49:34.473
> 
> 标签：css, forms, html

我想将我在这里制作的 div 框居中，但我不想将框中的文本居中，我似乎找不到如何做到这一点。现在我所拥有的是：

```
.box {
        text-align: left;
        background-color:#3F48CC;
        color:white;
        font-weight:bold;
        margin:120px auto;
        height:150px;
        display: inline-block;
        width: 200px;
    } 
```

和

```
<div class=box>
    Login
    <form method ="post" action="addMember.php">
      <label for="name">Username:</label>
      <input name="name"/>
      <label for="password">Password:</label>
      <input name="password"/>
        <p>
        <input name="submit" type="Submit" value="Register"/>
        <input name="reset" type="reset" value="Clear Form">
  </form>
 </div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T09:51:39.880

删除`display: inline-block;`&`text-align:center`

`inline-block``width/height`当您为 div定义 时，没有必要。

默认情况下 div 是一个`block`元素。

```
.box {       
        background-color:#3F48CC;
        color:white;
        font-weight:bold;
        margin:120px auto;
        height:150px;        
        width: 200px;
    } 
```

**[演示](http://jsfiddle.net/UbXs4/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:56:59.930

### 使用死点...

```
.box {
    text-align: left;
    background-color:#3F48CC;
    color:white;
    font-weight:bold;
    height:150px;
    width: 200px;
    position: absolute;
    left: 50%;
    top: 50%; 
    margin-left: -100px;
    margin-top: -75px;
} 
```

**注意：**负边距正好是高度和宽度的一半，它将元素拉回到完美的中心。仅适用于固定高度/宽度的元素。

### 更多信息：

*   [CSS 技巧示例](http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/)
*   [jsFiddle 演示](http://jsfiddle.net/DPBRe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:59:17.197

[**jsFiddle 演示**](http://jsfiddle.net/3HUbf/1/)

[**带有居中表单的替代 jsFiddle DEMO**](http://jsfiddle.net/NEtFZ/2/)以及这个[**CSS3 版本**](http://jsfiddle.net/Sr5UT/2/)。

使表格看起来正确的关键是使用`padding`，它是盒子模型的一部分。这样做可以让您填充侧面，并保持文本左对齐。

**HTML**

```
<div class=box>Login
  <form method="post" action="addMember.php">
    <label for="name">Username:</label>
    <input name="name" />
    <label for="password">Password:</label>
    <input name="password" />
    <div class="buttons">
      <input name="submit" type="Submit" value="Register" />
      <input name="reset" type="reset" value="Clear Form" />
    </div>
  </form>
</div> 
```

**CSS：**

```
.box {
  background-color:#3F48CC;
  color:white;
  font-weight:bold;
  height:150px;
  width: 150px;
  padding: 10px;
}

.buttons{
  padding-top: 20px;
} 
```

**截屏：**
![在此处输入图像描述](../Images/f70b497638ec0a5c9d359cd196bec5f6.png)

# sql - 如何使用带有文本“|”的sql脚本创建文本文件

> ID：14275493
> 
> 赞同：1
> 
> 时间：2013-01-11T09:49:35.150
> 
> 标签：sql, sql-server, sql-scripts

如果我在没有字符“|”的脚本下运行 它工作但当我添加字符“|” 如何添加字符“|”不起作用 使用 sql 脚本到文本文件？

```
DECLARE @Text AS VARCHAR(100)
DECLARE @Cmd AS VARCHAR(100)
SET @Text = 'Hello world| '
SET @Cmd ='echo ' +  @Text + ' > C:\AppTextFile.txt'
EXECUTE Master.dbo.xp_CmdShell  @Cmd 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T17:57:40.213

管道字符在批处理命令中具有特殊含义，因此必须使用脱字符进行[转义。](https://stackoverflow.com/questions/1855009/batch-echo-pipe-symbol-causing-unexpected-behaviour)这应该有效：

```
DECLARE @Text AS VARCHAR(100)
DECLARE @Cmd AS VARCHAR(100)
SET @Text = 'Hello world^| '
SET @Cmd ='echo ' +  @Text + ' > C:\AppTextFile.txt'
EXECUTE Master.dbo.xp_CmdShell  @Cmd 
```

虽然这确实不是将数据写入文本文件的好方法：通常 SQL Server 不应该有写入 C: 驱动器根目录的权限，并且`xp_cmdshell`默认情况下是禁用的。我建议您查看替代方案，例如`sqlcmd.exe`，`bcp.exe`或您首选语言（PowerShell、Perl、Python 等）的小脚本。

从 SQL Server 查询数据通常比从服务器端推送数据更容易、更安全、更灵活。在您的特定情况下，您似乎想要写出一个分隔文件，并且[`bcp.exe`是为此目的而设计的](http://msdn.microsoft.com/en-us/library/ms162802.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-09T12:32:21.827

其他方式来做到这一点

```
DECLARE @File  varchar(300) = 'c:\Temp\out.txt'
DECLARE @Text  varchar(8000) = 'Sample text'
DECLARE @OLE            INT 
DECLARE @FileID         INT

EXECUTE sp_OACreate 'Scripting.FileSystemObject', @OLE OUT 
EXECUTE sp_OAMethod @OLE, 'OpenTextFile', @FileID OUT, @File, 8, 1 
EXECUTE sp_OAMethod @FileID, 'WriteLine', Null, @Text
EXECUTE sp_OADestroy @FileID 
EXECUTE sp_OADestroy @OLE 
```

使用 SP 结果检查错误

```
EXECUTE @result = sp_OAMethod @OLE, 'OpenTextFile', @FileID OUT, @File, 8, 1
if @result<>0 GOTO ON_ERROR 
```

虽然还没有找到阅读错误信息的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:59:05.793

用两对单引号括起来，

```
DECLARE @Text AS VARCHAR(100)
DECLARE @Cmd AS VARCHAR(100)
SET @Text = '''Hello world| '''
SET @Cmd ='echo ' +  @Text + ' > C:\AppTextFile.txt'
EXECUTE Master.dbo.xp_CmdShell  @Cmd 
```

# c++ - waitforsingleobject 用于已发出信号的事件

> ID：14275497
> 
> 赞同：3
> 
> 时间：2013-01-11T09:49:46.880
> 
> 标签：c++, multithreading, winapi, visual-c++, synchronization

`WaitForSingleObject(handle, timeout);` 如果句柄在调用之前已经发出信号，我会这样做`WaitForSingleObject`，该函数将返回什么？

我认为它应该立即返回 a `WAIT_OBJECT_0`...但在我的情况下，它等待事件被设置，并且由于这没有发生（事件已经设置），它超时。

请给个建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T09:54:33.683

取决于事件。您对手动重置事件的期望是正确的，并且自动重置事件不会保持信号状态：[事件对象 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx)。

> 自动重置事件 一个事件对象，其状态保持为信号状态，直到释放单个等待线程**，此时系统自动将状态设置为非信号状态**。
> 
> 如果没有线程在等待，则事件对象的状态保持信号状态。如果有多个线程在等待，则选择一个等待线程。不要假设先进先出 (FIFO) 顺序。内核模式 APC 等外部事件可以更改等待顺序。

# c# - IOS 上的 mvvmcross 绑定问题（适用于模拟器，但某些属性在设备上不起作用）

> ID：14275499
> 
> 赞同：3
> 
> 时间：2013-01-11T09:49:51.270
> 
> 标签：c#, xamarin.ios, mvvmcross

问题在于绑定到 UIBarButtonItem，代码在模拟器上工作，但在设备上，属性 Enable 不起作用并且 Clicked 工作...

textViewItem 中也存在同样的问题，但这次 text 或 enable 都不起作用。

```
 public partial class ProcessDetailViewController : MvxBindingTouchViewController<ProcessDetailViewModel>
{
    public ProcessDetailViewController (MvxShowViewModelRequest request)
        : base (request,"ProcessDetailViewController", null)
    {
    }

    public override void DidReceiveMemoryWarning ()
    {
        // Releases the view if it doesn't have a superview.
        base.DidReceiveMemoryWarning ();

        // Release any cached data, images, etc that aren't in use.
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        this.AddBindings(
            new Dictionary<object, string>()
            {
            { this.lblSeguradoraNome , "{'Text':{'Path':'AssuranceCompanyID'}}" },
            { this.lblSeguradoraGestor , "{'Text':{'Path':'AssuranceManager'}}" },
            { this.lblApoliceData , "{'Text':{'Path':'InsurancePolicyStartDate'}}" },
            { this.lblApoliceNum , "{'Text':{'Path':'InsurancePolicyNumber'}}" },
            { this.lblApoliceRamo , "{'Text':{'Path':'InsurancePolicyBranch'}}" },
            { this.lblDataPedido , "{'Text':{'Path':'RequestDate'}}" },
            { this.lblGestor , "{'Text':{'Path':'InternalManager'}}" },
            { this.lblLocalRiscoCodPostal , "{'Text':{'Path':'InsurancedLocationAddressCityZipCode'}}" },
            { this.lblLocalRiscoConcelho , "{'Text':{'Path':'InsurancedLocationAddressCity'}}" },
            { this.lblLocalRiscoMorada , "{'Text':{'Path':'InsurancedLocationAddress'}}" },
            { this.lblPerito , "{'Text':{'Path':'Surveyer'}}" },
            { this.lblSeguradoCodPostal , "{'Text':{'Path':'InsuredPersonAddressCityZipCode'}}" },
            { this.lblSeguradoConcelho , "{'Text':{'Path':'InsuredPersonAddressCity'}}" },
            { this.lblSeguradoContacto , "{'Text':{'Path':'InsuredPersonPhone'}}" },
            { this.lblSeguradoMorada , "{'Text':{'Path':'InsuredPersonAddress'}}" },
            { this.lblSeguradoNome , "{'Text':{'Path':'InsuredPersonName'}}" },
            { this.btnDownload , "{'Clicked':{'Path':'DownloadProcessButton'},'Enabled':{'Path':'HideIfDownloaded'}}" },
            { this.btnTerminarVisita , "{'Clicked':{'Path':'EndVisitButton'},'Enabled':{'Path':'ShowIfOnVisit'}}" },
            { this.btnObterLocalizacao , "{'Clicked':{'Path':'AdquireLocationButton'},'Enabled':{'Path':'ShowIfOnVisit'}}" },
            { this.btnIniciarVisita , "{'Clicked':{'Path':'BeginVisitButton'},'Enabled':{'Path':'HideIfOnVisit'}}" },
            { this.btnTirarFoto , "{'Clicked':{'Path':'TakePhotoButton'},'Enabled':{'Path':'ShowIfOnVisit'}}" },
            { this.btnVoltar , "{'Clicked':{'Path':'ReturnButton'}}" },
            { this.btnUpload , "{'Clicked':{'Path':'UploadProcessButton'},'Enabled':{'Path':'CanUpload'}}" },
            }
        );
    //  var a= NavigationItem.LeftBarButtonItems[0].Enabled

        // Perform any additional setup after loading the view, typically from a nib.
    }

    public override void ViewDidUnload ()
    {
        base.ViewDidUnload ();

        // Clear any references to subviews of the main view in order to
        // allow the Garbage Collector to collect them sooner.
        //
        // e.g. myOutlet.Dispose (); myOutlet = null;

        ReleaseDesignerOutlets ();
    }

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        // Return true for supported orientations
        return true;
    }
 } 
```

* * *

```
 public class ProcessDetailViewModel : ProcessNavigationBaseViewModel
{(...)} 
```

* * *

```
public class ProcessNavigationBaseViewModel : BaseViewModel
{
    (...)

    #region Properties
    private Process _currentProcess;

    private static User _user;

    private bool _isGPSLocationStarted;

    private double _latitude;

    private double _longitude;

    private string _photoFilename = "";

    public Process CurrentProcess
    {
        get
        {
            return _currentProcess;
        }
        set
        {
            _currentProcess = value;
            FirePropertyChanged(() => CurrentProcess);
        }
    }

    public User User
    {
        get { return _user; }
        set
        {
            _user = value;
            FirePropertyChanged(() => User);
        }
    }

    private bool _isDownloaded
    {
        get
        {
            return CurrentProcess.IsLockedInServer && !(CurrentProcess.ProcessState == ProcessState.WaitingReportProduction.ToString());
        }
        set
        {
            CurrentProcess.IsLockedInServer = value;
            FirePropertyChanged(() => ShowIfDownloaded);
            FirePropertyChanged(() => HideIfDownloaded);
        }
    }

    public bool ShowIfDownloaded
    {
        get { return _isDownloaded; }
    }

    public bool HideIfDownloaded
    {
        get { return !_isDownloaded; }
    }

    public bool CanUpload
    {
        get { return ( CurrentProcess.ProcessState == ProcessState.WaitingUpload.ToString()); }
    }

    public bool CanDownload
    {
        get { return (CurrentProcess.ProcessState != ProcessState.WaitingReportProduction.ToString() && 
                                    CurrentProcess.ProcessState == ProcessState.WaitingSurveyorAcceptionDecision.ToString()) ;  }
    }

    public bool ShowIfOnVisit
    {
        get { return (CurrentProcess.ProcessState == ProcessState.OnVisist.ToString()); }
    }

    public bool HideIfOnVisit
    {
        get { return (!(CurrentProcess.ProcessState == ProcessState.OnVisist.ToString())) && ShowIfDownloaded; }
    }

    public string ProcessDescription
    {
        get
        {
            return string.Format("{0} - {1}", CurrentProcess.ProcessNumber, CurrentProcess.RequestedService.RequestedServiceType);
        }
    }
(...)
 } 
```

* * *

提前致谢

[编辑]

应用程序输出：2013-01-11 09:16:56.369 LinkFENACAMSIGEPMobileUIIPad[6496:c07] 导航：诊断：2.24 使用 args 导航到 MainMenuViewModel

2013-01-11 09:16:56.369 LinkFENACAMSIGEPMobileUIIPad[6496:c07] TouchNavigation：诊断：2.24 导航请求

2013-01-11 09:16:56.421 LinkFENACAMSIGEPMobileUIIPad [6496:c07] MvxBind：警告：2.29 无法绑定到源为空

2013-01-11 09:16:56.423 LinkFENACAMSIGEPMobileUIIPad [6496:c07] MvxBind：警告：2.29 无法绑定到源为空

[编辑 20130111:11:12] -**链接器行为：仅链接 SDK 程序集**

类似于： [MvvmCross Monotouch - 无法在真正的 iPad 上绑定属性，但它可以在模拟器上工作](https://stackoverflow.com/questions/11349864/mvvmcross-monotouch-fail-to-bind-properties-on-a-real-ipad-but-it-works-on-th)（我无法完成这项工作......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T11:41:33.263

我在包含的示例代码中看不到 barbutton - 所以我将根据 Text、Clicked、Enabled 等来回答。

如果这在模拟器中有效，但在设备上无效，则可能与链接器有关 - 就像在[MvvmCross Monotouch 中一样 - 无法在真实 iPad 上绑定属性，但它在模拟器上有效](https://stackoverflow.com/questions/11349864/mvvmcross-monotouch-fail-to-bind-properties-on-a-real-ipad-but-it-works-on-th)

要测试这个理论，请尝试打开链接器以包含所有符号

* * *

假设这是问题的原因......那么要解决它，您需要包含一个 LinkerPleaseInclude.cs 文件，该文件将诱使链接器包含这些属性。

例如，它可能看起来像：

```
public class LinkerIncludePlease
{
    private void IncludeClicked(UIButton button)
    {
        button.Clicked += (s, e) => { };
    }

    private void IncludeEnabled(UIButton button)
    {
        button.Enabled = !button.Enabled;
    }

    private void IncludeText(UILabel label)
    {
        label.Text = label.Text + "test";
    }
} 
```

注意：此代码从未实际执行，而是由链接器在构建时分析。

# mysql - 所有数据库的mysql“CREATE FUNCTION”

> ID：14275500
> 
> 赞同：1
> 
> 时间：2013-01-11T09:49:50.957
> 
> 标签：mysql, mysql-error-1046

我如何`"CREATE FUNCTION"`为所有数据库添加函数到mysql？

应该为将来创建的数据库启用此功能。

```
mysql says : #1046 - No database selected 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:01:32.277

简单地说，你不能，每个实体都存在于一个或另一个数据库中。

如果您愿意，您可以为您的“通用”函数和过程创建一个数据库，并在该数据库上创建函数。

您还必须确保所有 MySQL 用户都有权访问您的新“common_functions”数据库。

# c# - 在这个示例 MVVM 应用程序中使用模型是否有意义？

> ID：14275501
> 
> 赞同：2
> 
> 时间：2013-01-11T09:49:54.430
> 
> 标签：c#, mvvm, model, viewmodel

我需要编写一个使用 MVVM 模式和 WPF 的小工具。基本上，该工具应执行以下任务：

*   从 GUI 获取用户名和密码。
*   从外部 CSV 文件中读取包含数据的行。
*   使用从 CSV 读取的数据对外部 Web 服务执行 SOAP 调用。

在上述过程中使用了以下数据（所有字符串）：

*   从 GUI 读取的数据
    *   用户名
    *   密码
*   从 CSV 读取的数据
    *   ID
    *   描述

CSV 文件中的数据也不会显示在 GUI 中，应用程序也不会将任何数据存储在文件、数据库等中。它只是一个“连接器”。现在，模型中应该包含什么？或者在这种情况下我需要一个吗？

```
class MyData {
  private string id;
  private string description;

  public string Id {
    get { return id; }
    set { id = value; }
  }

  public string Description {
    get { return description; }
    set { description= value; }
  }
} 
```

注意：
这个问题与我之前的问题有关：[MVVM 中的模型是做什么用的？](https://stackoverflow.com/questions/14236691/what-is-the-model-in-mvvm-for)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:09:02.600

该模型由用于将数据表示为对象的 POCO 和检索数据的逻辑组成。

视图模型负责保存特定于其用途的数据子集。

这意味着，从 CSV 读取是在模型中完成的（ViewModel 甚至不应该知道涉及到 CSV），并且读取的数据也应该存储到模型中定义的对象（PO​​CO）中。

然后，视图模型可以从模型中获取他们需要的任何数据子集。

如果应用程序需要持久性，视图模型会将修改后的 POCO 推回模型，然后由模型负责更新 CSV。

# java - 扫雷示例中类中的方法数

> ID：14275502
> 
> 赞同：0
> 
> 时间：2013-01-11T09:49:56.407
> 
> 标签：java, swing, oop

我是新手，所以请不要烫伤我，因为我只想从一开始就遵循良好的 OOP 路径:) 所以我正在使用 Swing 用 Ja​​va 编写扫雷器，现在，我的代码看起来像这样：

*   一个只有 main() 的类，它通过创建一个对象 Minesweeper() 来开始游戏
*   Minesweeper 类，我在其中创建 JFRame，JPanel 用于菜单（以及 ActionListener）并创建 Grid(x,y) 对象
*   扩展 JPanel 的 Grid(int width, int height) 类，我使用它创建具有给定尺寸的网格，在其上放置地雷并处理所有播放

不过，我对 Grid() 有点担心。是否可以处理所有事情，从绘制所需数量的 JButton，通过设置地雷和监听点击（以及解决这些点击）到 find_empty_cells 算法，以防用户点击炸弹以外的东西，我们必须显示周围空在一个班级？这不违反单一责任原则吗？或者可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:54:17.650

我对swing不熟悉，所以只能给你一些伪java代码。但是，它应该服务于演示目的。当您想达到 OOP 的下一个级别时，我建议为扫雷网格中的单元格创建一个类。

```
public class Cell extends JPanel {

    private MinesweepController controller;
    private int points;
    private boolean revealed;

    // Index in the grid.
    private int x, y;

    public Cell(MinesweepController controller_, int x_, int y_, int points_) {
        controller = controller_;
        points = points_;
        x = x_;
        y = y_;
    }

    public void onClick(MouseEvent event) {
        controller.reveal(x, y);
    }

    public void paint(Graphics gfx) {
        if (revealed) {
            if (points < 0) {
                drawBomb(getX(), getY())
            }
            else {
                drawPoints(getX(), getY(), points);
            }
        }
        else {
            drawRect(getX(), getY());
        }
    }

    public int getPoints() {
        return points;
    }

    public boolean isRevealed() {
        return revealed;
    }

    public void reveal() {
        revealed = true;
    }

}

public class MinesweepController {

    private Grid grid;
    private int score;

    // ...

    public boid reveal(int x, int y) {
        Cell cell = grid.getCell(x, y);
        if (cell.getPoints() < 0) {
            // End game.
        }
        else {
            score += cell.getPoints();
            // Reveal ascending cells.
        }
    }

} 
```

# javascript - javascript中有没有像getimagesize() php这样的函数？

> ID：14275504
> 
> 赞同：2
> 
> 时间：2013-01-11T09:50:09.830
> 
> 标签：javascript, jquery

我已经创建了上传文件，但是当我想验证内容是否为图像时，我有堆栈，因为如果仅验证扩展名，我们就可以使用假内容和有效扩展名进行操作。

javascript中是否有类似getimagesize() php的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:58:27.120

在一些更现代的浏览器中，您可以将图像加载到画布上下文中（这实际上不必显示在页面上）并从中获取尺寸。

我在我构建的 CMS 中做了类似的事情，以允许扫描图像的某些颜色，而不必先将其上传到服务器：

```
$('section.content form input[name=image]').change(function(){
    file = this.files[0];

    if(file.type.match(/image.*/))
    {
        var img = document.createElement('img');
        // add this into an onload, as it takes time (albeit very little) to load the image into the DOM object
        img.onload = function(){
            canv = document.getElementById('product_image');
            if(!canv || !canv.getContext)
                return; // problem getting the canvas element

            // get the canvas context that we'll be using and the width of the canvas & image
            var ctx = canv.getContext('2d');
            var width = img.width;
            var height = img.height;
        };
        // put the file into the img object, triggering the img onload handler above
        var reader = new FileReader();
        reader.onload = function(e) {img.src = e.target.result};
        reader.readAsDataURL(file);
    }
}); 
```

# gwt - 在带有 jsni 的 gwt 中使用 pdf.js [viewer.js] 但未显示 pdf

> ID：14275505
> 
> 赞同：2
> 
> 时间：2013-01-11T09:50:24.737
> 
> 标签：gwt, pdf.js

我在（https://github.com/mozilla/pdf.js）上使用pdf.js。我可以使用 JSNI 在 gwt 中使用示例（hello world 和 acroforms）。Pdf 现在正确显示我想在 gwt 中使用 viewer.js，所以我在 jsni 中转换完整代码。之后我正确使用了 html 和 css 文件，没有错误显示仍然 pdf 也没有显示。如果有任何想法请建议我。提前谢谢。

# c# - 获取所有用户的快速方法 + 指定属性 + 使用来自 LDAP 的分页

> ID：14275511
> 
> 赞同：1
> 
> 时间：2013-01-11T09:50:49.203
> 
> 标签：c#, active-directory, ldap

我想从活动目录中获取所有用户及其属性 我检查了许多主题，包括 Linq 到 LDAP +[在此处输入链接描述](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#26)

但一切似乎都很复杂。

我从这个开始：

```
public SearchResultCollection GetAllUsrs()
     {
         var dirEntry = new DirectoryEntry(string.Format("LDAP://{0}/{1}", "x.y.com", "DC=x,DC=y,DC=com"));
         var searcher = new DirectorySearcher(dirEntry)
         searcher.Filter = "(&(&(objectClass=user)(objectClass=person)))";
         searcher.PageSize = 999;

         return searcher.FindAll();

     } 
```

我如何使用分页，因为活动目录当时只会返回 1000 条记录 + 我如何指定属性？

问题：我想使用控制台应用程序查询包含多达 60 K 用户的域我想指定属性性能非常重要。你能指导我实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:06:27.633

以下是使用[LINQ to LDAP](http://linqtoldap.codeplex.com/wikipage?title=Paging&referringTitle=Querying)的方法：

```
using (var connection = new LdapConnection("x.y.com"))
{
     using (var context = new DirectoryContext(connection))
     {
          List<IDirectoryAttributes> users = context
               .Query("DC=x,DC=y,DC=com")
               .Where("(&(objectClass=user)(objectClass=person))")
               .InPagesOf(1000);
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:31:40.187

不需要分页。AD 将返回 1000 多个对象。将 PageSize 保留为 0 并根据需要设置 SizeLimit。如果您不确定，请使用 int.MaxValue ;)。

# xml - 使用 Xpath 从当前 XML 文档中的链接文件中获取内容

> ID：14275517
> 
> 赞同：1
> 
> 时间：2013-01-11T09:50:58.640
> 
> 标签：xml, xpath, feed

我有一个 XML 文档，它是所有博客条目摘录的提要，并且在每个条目中都有一个指向另一个 XML 文件的链接，该文件包含该特定条目的完整内容（更大的图像、全文等）。是否可以使用 XPATH 访问那些内部 XML 文档并从中获取值？

主文档如下所示：

```
 <Objects>
              <Item xml="doc.xml"></Item>  
                      // I would want to be able to access content 
                      // inside the document at Item/@xml
              <Item xml="doc2.xml"></Item>
    </Objects> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:53:38.677

有一个`document`功能，但我不知道您是否可以完全按照您的描述进行操作

[http://www.ibm.com/developerworks/library/x-tipcombxslt/](http://www.ibm.com/developerworks/library/x-tipcombxslt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:49:59.560

```
<?php
$feed = "http://example.com/feed.xml";
if (file_exists($feed)) {

    $xml = simplexml_load_file($feed);
    $Objects = $xml->xpath('//Objects/Item[@xml]');
    foreach ($Objects as $O) {
$feed2 = "http://example.com/".$O."";
}

if (file_exists($feed2)) {
    $xml = simplexml_load_file($feed2);
$feed2path = $xml->xpath('//*/*');
echo $feed2path[@someid];
}

} 
?> 
```

像这样使用两个 xpath 和一个 for 每个？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:55:00.770

使用 document() 函数时，您可以使用属性中的值。

这个小例子对我很有效：

### 带有 xml 引用的 Static.xml

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="cartoon2html.xsl"?>
<xml xml="cartoons.xml"/> 
```

### 实际的 XML

```
<cartoons>
    <cartoon name="Donald Duck" publisher="Walt Disney" />
    <cartoon name="Mickey Mouse" publisher="Walt Disney" />
    <cartoon name="Batman" publisher="DC Comics" />
    <cartoon name="Superman" publisher="DC Comics" />
    <cartoon name="Iron Man" publisher="Marvel Comics" />
    <cartoon name="Spider-Man" publisher="Marvel Comics" />
</cartoons> 
```

### 使用值的 XSL

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:variable name="document" select="/xml/@xml" />
    <xsl:variable name="cartoons" select="document($document)/cartoons" />

    <xsl:template match="/">
        <html>
            <head>
                <title>Cartoons</title>
                <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
            </head>
            <body>
                <xsl:apply-templates select="$cartoons" />
            </body>
        </html>
    </xsl:template>

    <xsl:template match="cartoons">
        <table>
            <xsl:apply-templates />
        </table>
    </xsl:template>

    <xsl:template match="cartoon">
        <tr>
            <td><xsl:value-of select="@name" /></td>
            <td><xsl:value-of select="@publisher" /></td>
        </tr>
    </xsl:template>

</xsl:stylesheet> 
```

### 运行示例

您可以使用 xsltproc 运行它：# xsltproc cartoon2html.xsl static.xml

您还可以在 Firefox 浏览器中打开 static.xml 文件。

# asp.net - 在 C# 中将 gridview 导出到 microsoft powerpoint

> ID：14275522
> 
> 赞同：0
> 
> 时间：2013-01-11T09:51:07.220
> 
> 标签：asp.net

我想将gridview导出到powerpoint。我有以下代码。但我有以下问题：

1.  当我将它用于 ms office 2010.it 时出现错误：

    > Powerpoint 无法读取 c:\users\filename.ppt。无法打开演示文稿。您的防病毒程序可能会阻止您打开演示文稿。要解决此问题，请确保您的防病毒程序是最新的并且工作正常。如果问题仍然存在并且演示文稿来自您信任的人，请关闭您的防病毒程序，然后再次尝试打开演示文稿。如果这样做，请确保在打开演示文稿后再次打开防病毒程序。

2.  当我将它用于 ms office 2007 时，它打开但没有 gridview

代码：

```
 Response.Clear();

       Response.Buffer = true;

       Response.AddHeader("content-disposition", "attachment;filename=FileName.ppt");

       Response.Cache.SetCacheability(HttpCacheability.NoCache);
       Response.Charset = ""; 
     //  this.Response.ContentType = "application/vnd.openxmlformats-       officedocument.presentationml.presentation";

       this.Response.ContentType = "application/vnd.ms-powerpoint.presentation.macroEnabled.12";

       this.Response.ContentType = "application/vnd.ms-powerpoint";

    //Response.ContentType = "application/vnd.ppt";

    GridView2.AllowPaging = false; 

    GridView2.DataBind();

    System.IO.StringWriter stringWrite = new System.IO.StringWriter(); 
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite); 
    GridView2.RenderControl(htmlWrite);

     Response.Write(stringWrite.ToString());

   Response.End();
   Response.Flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:16:39.210

尝试使用外部库来生成您的 ppt 或 pptx。像 aspose.net 或 Open xml。

# javascript - 安装 BxSlider

> ID：14275525
> 
> 赞同：0
> 
> 时间：2013-01-11T09:51:25.747
> 
> 标签：javascript, jquery, html, jquery-plugins, bxslider

我是网站设计的初学者，我正在尝试为我的公司创建一个更现代的网站。当前的一个不那么迷人（Greenlite.co.uk）。

在花了很多时间尝试为主页制作 Flash 横幅后，我突然想到 Flash 可能已经过时并且无法从所有平台上查看。这是我遇到 BxSlider 的时候，它看起来真的很棒！如果我能让它在我的网站上工作就好了。

我使用的是 CoffeeCup Visual Site Designer，然后我使用了“添加 HTML”工具。进入“插入 HTML”窗口，我放置如下；

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="js/jquery.bxslider.min.js"></script>
<link href="js/jquery.bxslider.css" rel="stylesheet" />

<ul class="bxslider">
  <li><img src="images/timeline1.jpg" title="An Energy Conservation Company"></li>
 <li><img src="images/image1.jpg" title="Designers and Manufactors of Quality Lighting Controls"></li>
<li><img src="images/back12.jpg" title="Caption to go here"></li>

</ul>

<script type="text/javascript">$(document).ready(function(){
$('.bxslider').bxSlider();
});
mode: fade,
captions: true,
auto: true,
autoControls: false
});
});
</script> 
```

我已尽我所能遵循 bxslider.com 上显示的说明。我从 bxslider 下载了包，将文件添加到 coffeecup 并链接脚本中的位置。我还将我的图像添加到 CoffeeCup 并写在它们的位置。

当我预览我的网站时，我的三张图片同时显示，每一张都在另一张下方，并带有一个鼠标悬停在标题上。图像旁边是一个要点。

我想要实现的是一个带有自动启动、显示停止/启动控件和标题的 Bxslider。

我尝试了很多变化，我展示的脚本是我最初的尝试。

我最接近工作 Bxslider 的方法是复制我从网站上找到的旧版本 bxslider 的代码。这给了我一个带有标题的图像幻灯片。如果我试图根据我的规范编辑代码，那么它会让我回到原点。

我完全意识到我可能会犯一个非常明显的错误。然而，对于未经训练的人来说，它只会让我头疼。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:56:10.140

您拥有的 Javascript 无效。尝试将 Javascript 更改为：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('.bxslider').bxSlider({
        mode: 'fade',
        captions: true,
        auto: true,
        autoControls: false
    });
  });
</script> 
```

请参阅工作 jsfiddle - [http://jsfiddle.net/FLuRH/](http://jsfiddle.net/FLuRH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T11:48:47.307

我注意到一些可能是问题的事情：
您没有正确关闭某些代码部分
这是您的：

```
 <script type="text/javascript">
      $(document).ready(function(){
        $('.bxslider').bxSlider({
            mode: 'fade',
            captions: true,
            auto: true,
            autoControls: false
        });
      }); 
</script> 
```

这是我的：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('.bxslider').bxSlider({
        mode: 'fade',
        captions: 'true',
        auto: 'true',
        autoControls: 'false',
    });
  });
</script> 
```

我也将此代码部分放在“head”部分中并且它有效。试试看。我希望我能以某种方式帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T12:09:28.850

这是工作代码（只需在您提取 bxslider 文件夹的位置创建新的 html 文件）

```
 <!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="jquery.bxslider.min.js"></script>
    <link href="jquery.bxslider.css" rel="stylesheet" />
    <script type="text/javascript">
        $(document).ready(function () {
            $(".bxslider").bxSlider();
        });
    </script>
</head>

<body>
    <div style="width:700px;height:250px;align:center;padding-left:250px;">
        <ul class="bxslider">
            <li>
                <img src="http://localhost/wordpress-4.1/wordpress/wp-content/uploads/2015/02/Desert.jpg" />
            </li>
            <li>
                <img src="http://localhost/wordpress-4.1/wordpress/wp-content/uploads/2015/02/Desert.jpg" />
            </li>
            <li>
                <img src="http://localhost/wordpress-4.1/wordpress/wp-content/uploads/2015/02/Desert.jpg" />
            </li>
        </ul>
    </div>
</body>
</html> 
```

# sencha-touch - Ext.data.JsonP.request 超时

> ID：14275529
> 
> 赞同：-1
> 
> 时间：2013-01-11T09:51:55.700
> 
> 标签：sencha-touch

我写了一个控制器。当我从视图中单击按钮时，此控制器通用“按钮”的调用方式如下：

```
 'button': {
            tap: function() {

           Ext.data.JsonP.request({
                    url: 'http://download.finance.yahoo.com/d/quotes.csv',
                    params: {
                        s: '^BSESN',
                        f: 'nsl1op'   
                    },
                    callbackKey: 'callback',
                    scope: this,
                    success: function( res, req ) {
                        Ext.example.msg('Sucess!', 'CSV file successfully generated.');
                        Ext.data.StoreManager.get('Files').load();
                    },
                    failure: function( res, req ) {
                        console.log('Failed to load csv file.');
                    }
                });

....
....
.... 
```

它超时并且失败称为“无法加载csv文件”。

我使用的原始 URL 是“http://download.finance.yahoo.com/d/quotes.csv?s=^BSESN&f=nsl1op”。

我想知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:56:15.600

您通过 JSONP 请求 CSV 文件。

该文件将通过 '' 标记（这是 JSONP 的工作原理）注入 DOM，但由于它不是有效的 JavaScript 文件，因此您的回调 ( `callbackKey: 'callback'`) 永远不会执行，因此 Sencha Touch 将触发超时处理程序，看到回调未被注入的`<script>`标签触发。

You probably need to change the URL to something that is actually JSONP (iow valid JavaScript wrapped in a callback), not a CSV file.

# asp.net - 如何在 sqlserver 中获取同一 Worker 的多行的 Count()？

> ID：14275532
> 
> 赞同：0
> 
> 时间：2013-01-11T09:51:59.210
> 
> 标签：asp.net, sql-server, count, subquery, inner-join

我在列表`TaskList`的`GridView1`右侧列出我正在显示工人列表`having different skills under one`serviceCategoryID。点击`GridView1`Row 和所有`Workers with multiple skills under one serviceCategoryID are Listed in GridView2`.

在将任务分配给任何工人之前，我想显示该`PendingTasks`工人的`GridView2`数量`List of Workers with multiple skills under one selected serviceCategoryID from GridView1.`

当前的 SQL 查询是：

```
SELECT WorkerMst.workerID, WorkerMst.FName, WorkerMst.LName,WorkerMst.FName +' '+ WorkerMst.LName as Name,WorkerSkills.WorkerSkillsID,
     WorkerSkills.WorkerID AS WorkerSkills_WorkerID, WorkerSkills.SkillTypeID AS WorkerSkills_SkillTypeID, WorkerSkills.Score, skillTypeMst.skillTypeID, skillTypeMst.skillType, 
     serviceCategoryMaster.serviceCategoryMasterID, serviceCategoryMaster.CategoryName, WorkerMst.IsActive AS WorkerMst_IsActive,WorkerMst.IsIndividual,WorkerMst.readyfornewtask,
     (select count(WorkerID)from WorkerTask where isAproved=0 and workerid in (select distinct(workerid) from workertask where isaproved=0 group by workerid)) as PendingTsks

 FROM WorkerMst 
 INNER JOIN WorkerSkills ON WorkerMst.workerID = WorkerSkills.WorkerID 
 INNER JOIN skillTypeMst ON WorkerSkills.SkillTypeID = skillTypeMst.skillTypeID 
 INNER JOIN serviceCategoryMaster ON skillTypeMst.serviceCategoryMasterID = serviceCategoryMaster.serviceCategoryMasterID
where skillTypeMst.serviceCategoryMasterID=1 and 
WorkerMst.workerID in (select distinct(workerid) from workertask where isaproved=0)
order by workermst.workerid 
```

![在此处输入图像描述](../Images/c0fb616e7314dfceea491ea16238c82c.png)

`WorkerTask`表具有以下字段：

```
WorkerID,TaskMstID,IsAccepted ,IsRejected,OnDate,isAproved 
```

有什么建议吗？帮助赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:15:20.890

您尚未提供表的架构，但我假设该`WorkerTask`表将有一行用于分配给（任何）工作人员的任务。我假设这`WorkerTaskId`是该表的主键，那么以下查询就足够了：

```
SELECT 
     WorkerMst.workerID, WorkerMst.FName, WorkerMst.LName,
     WorkerMst.FName +' '+ WorkerMst.LName as Name,WorkerSkills.WorkerSkillsID,
     WorkerSkills.WorkerID AS WorkerSkills_WorkerID, 
     WorkerSkills.SkillTypeID AS WorkerSkills_SkillTypeID, WorkerSkills.Score,
     skillTypeMst.skillTypeID, skillTypeMst.skillType, 
     serviceCategoryMaster.serviceCategoryMasterID, serviceCategoryMaster.CategoryName, 
      WorkerMst.IsActive AS WorkerMst_IsActive, WorkerMst.IsIndividual, 
      WorkerMst.readyfornewtask,
     (select count(t.workertaskid)from WorkerTask t
         where t.isAproved=0 and t.workerid = WorkerMst.workerid) as PendingTsks
 FROM WorkerMst 
 INNER JOIN WorkerSkills ON WorkerMst.workerID = WorkerSkills.WorkerID 
 INNER JOIN skillTypeMst ON WorkerSkills.SkillTypeID = skillTypeMst.skillTypeID 
 INNER JOIN serviceCategoryMaster 
    ON skillTypeMst.serviceCategoryMasterID =  serviceCategoryMaster.serviceCategoryMasterID
where skillTypeMst.serviceCategoryMasterID=1 
order by workermst.workerid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:42:29.780

这是修改后的查询：

```
SELECT 
     WorkerMst.workerID, WorkerMst.FName, WorkerMst.LName,
     WorkerMst.FName +' '+ WorkerMst.LName as Name,WorkerSkills.WorkerSkillsID,
     WorkerSkills.WorkerID AS WorkerSkills_WorkerID, 
     WorkerSkills.SkillTypeID AS WorkerSkills_SkillTypeID, WorkerSkills.Score,
     skillTypeMst.skillTypeID, skillTypeMst.skillType, 
     serviceCategoryMaster.serviceCategoryMasterID, serviceCategoryMaster.CategoryName, 
      WorkerMst.IsActive AS WorkerMst_IsActive, WorkerMst.IsIndividual, 
      WorkerMst.readyfornewtask,(select count(workerid)from WorkerTask 
         where isAproved=0 and workerid = WorkerMst.workerid) as PendingTsks

 FROM WorkerMst 
 INNER JOIN WorkerSkills ON WorkerMst.workerID = WorkerSkills.WorkerID 
 INNER JOIN skillTypeMst ON WorkerSkills.SkillTypeID = skillTypeMst.skillTypeID 
 INNER JOIN serviceCategoryMaster 
    ON skillTypeMst.serviceCategoryMasterID =  serviceCategoryMaster.serviceCategoryMasterID
where skillTypeMst.serviceCategoryMasterID=1 and WorkerSkills.Score>=70
order by workermst.workerid 
```

感谢@VinayC 的建议！

# git - Git：如何更改远程存储库上的活动分支？

> ID：14275533
> 
> 赞同：2
> 
> 时间：2013-01-11T09:51:59.677
> 
> 标签：git, git-branch, git-remote

我在本地分支上处理了一些代码，然后使用以下命令将其推送到远程测试存储库：

```
git push origin fix_vouchers:fix_vouchers 
```

我想更改该远程存储库上的活动分支，以便其他开发人员可以测试此代码。我可以在本地环境中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:13:57.020

不，您不能使用本地命令在远程裸存储库上设置活动分支。

活动分支是 HEAD 指向的分支。这是git的一些命令视图作为存储库的默认分支的分支，例如`git clone <url> <name>`默认会检出默认分支。

如果您对远程存储库具有命令行访问权限，则该`git symbolic-ref`命令可用于设置默认分支 - 请参阅：[在裸存储库中设置默认 git 分支](http://feeding.cloud.geek.nz/2008/12/setting-default-git-branch-in-bare.html)。

也就是说，一旦签出，任何特定分支都没有什么特别之处。任何分支都可以与其他开发人员共享，方法是让他们专门使用命令创建与远程分支相关联的分支`git checkout -b <branch>`，其中是您要与他们共享的远程分支的名称。这将在其本地存储库上创建一个分支，该分支将针对远程分支进行跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:10:27.180

如果远程存储库只是一个共享点，一个裸存储库，您最好将具有代码的分支传达给其他开发人员。

但是，在稍后的评论中，您暗示远程存储库是用作网站的结帐。您应该注意，即使您推送到当前活动的分支，推送也不会自动检查该分支的 HEAD。

如果您对远程机器没有任何 shell 访问权限，我认为不可能做您想做的事。如果你在那里有任何影响，你可以要求设置一个 post-receive 挂钩来检查新分支。

当然，如果您有 ssh 访问权限，只需

```
ssh remote.net "cd /path/to/repo; checkout fix_vouchers" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T15:11:22.747

我的观点。远程中没有所谓的活动分支。由您决定分支是否处于活动状态。

来到你的场景。您可以将一个新分支推送到远程，称为 releaseCandidate 或 release 或 devBranch。然后告诉每个人将其用作测试/开发分支。

但是，如果您的问题就像其他开发人员正在使用某些特定的脚本来 checkout 一样，您可能需要更改该脚本。

# openlayers - 在地图上显示地址并在 OpenLayers.js 中获取地理坐标

> ID：14275534
> 
> 赞同：0
> 
> 时间：2013-01-11T09:52:01.310
> 
> 标签：openlayers, openstreetmap

是否可以在 openLayers 中搜索地址？

另一个：那么是否有可能获得该地址的地理坐标？

或者也许从我用鼠标单击的点获取地理坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:44:55.187

单独的 OpenLayers 不允许您搜索地址，但您可以使用外部网络服务（例如 Google 网络服务）来完成此操作。然后在 OpenLayers 上显示此信息。

关于您的最后一个问题，OpenLayers 可以为您提供鼠标点击的坐标。

# c# - 在 MVC4 中绑定 ListBoxFor 控件时出错

> ID：14275538
> 
> 赞同：8
> 
> 时间：2013-01-11T09:52:21.143
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

当我更改为时`"model => model.id"`，`"model => model.Supplierid"`我遇到了错误

> “当允许多选时，参数‘表达式’必须评估为 IEnumerable。”

请看下面的代码

// 这是我的模型类

```
public class clslistbox{
public int id { get; set; }
public int Supplierid { get; set; }
public List<SuppDocuments> lstDocImgs { get; set; }

public class SuppDocuments
{
    public string Title { get; set; }
    public int documentid { get; set; }
}
public List<SuppDocuments> listDocImages()
{
    List<SuppDocuments> _lst = new List<SuppDocuments>();
    SuppDocuments _supp = new SuppDocuments();
    _supp.Title = "title";
    _supp.documentid = 1;
    _lst.Add(_supp);
    return _lst;
} 
} 
```

// 这是我的控制器

```
 [HttpGet]
    public ActionResult AddEditSupplier(int id)
    {

        clslistbox _lst = new clslistbox();
        _lst.lstDocImgs= _lst.listDocImages();
        return View(_lst);
    } 
```

// 这是我绑定列表框的视图

```
@model clslistbox
@using (Html.BeginForm("AddEditSupplier", "Admin", FormMethod.Post))
{
    @Html.ListBoxFor(model => model.id, new SelectList(Model.lstDocImgs, "documentid", "title"))
} 
```

任何人都可以看到它的原因吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-11T10:12:38.303

我认为这里表达式中属性的更改是一个红鲱鱼 - 在任何一种情况下都不会起作用。

***更新***

但是，请参阅我的答案末尾的一些可能不必要的详细说明，说明为什么您在第一轮没有收到错误。

***结束更新***

您正在使用`ListBoxFor`- 用于为用户提供多项选择功能 - 但您正在尝试将其绑定到一个`int`属性 - 该属性不支持多项选择。（它`IEnumerable<T>`至少需要在 MVC 中默认能够将列表框绑定到它）

我认为您的意思是使用`DropDownListFor`- 即显示只能从中选择一个的项目列表？

如果您实际上是在列表框中寻找单选语义，那么在 MVC 中会比较棘手，因为它的 Html 帮助程序完全围绕列表框进行多选。SO上的其他人问了一个关于如何让下拉列表看起来像列表框的问题：[如何在具有单选模式的ASP.NET MVC中创建一个ListBox？](https://stackoverflow.com/questions/351483/how-do-i-create-a-listbox-in-asp-net-mvc-with-single-selection-mode).

或者您可以自己为这样的列表框生成 HTML。

***（更新）- 可能不必要的详细说明（！）***

第一次没有出现异常的原因可能是因为在生成 HTML 时`id`in没有任何价值。这是感兴趣`ModelState`的反映的 MVC 源（来自）（最后的调用是您的异常的来源）：`SelectExtensions.SelectInternal``GetSelectListWithDefaultValue`

```
object obj = 
  allowMultiple ? htmlHelper.GetModelStateValue(fullHtmlFieldName, typeof(string[])) : 
    htmlHelper.GetModelStateValue(fullHtmlFieldName, typeof(string));
if (!flag && obj == null && !string.IsNullOrEmpty(name))
{
  obj = htmlHelper.ViewData.Eval(name);
}
if (obj != null)
{
  selectList = 
    SelectExtensions.GetSelectListWithDefaultValue(selectList, obj, allowMultiple);
} 
```

首先请注意，`allowMultiple`在您的情况下，控制变量为真，因为您调用了`ListBoxFor`. `selectList`是`SelectList`您创建并作为第二个参数传递的。MVC（不幸的是，在某些情况下）所做的一件事是用于`ModelState`修改您在重新显示视图时传递的选择列表，以确保在视图显示时重新选择`ModelState`通过 POST设置的值重新加载（这在页面验证失败时很有用，因为您不会将值从 复制到基础模型`ModelState`，但页面仍应将这些值显示为被选中）。

因此，正如您在第一行所见，您传递的表达式/字段的模型当前值已脱离模型状态；作为字符串数组或字符串。如果失败（返回`null`），那么它会再次执行表达式（或类似的）以获取模型值。如果它从那里得到一个非空值，它会调用`SelectExtensions.GetSelectListWithDefaultValue`.

正如我所说 - 你试图做的事情最终不会在`Id`or的情况下工作`SupplierId`（因为它们需要是`IEnumerable`）**但**我相信这个`ModelState`->`Eval`过程在你使用时会产生一个空值`Id`，所以得到的过程跳过“调整” `SelectList`- 因此不会引发异常。当您使用时，情况并非如此，`SupplierId`因为我敢打赌，`ModelState`此时要么有一个值，要么`ViewData.Eval`成功获得一个整数值。

*不抛出异常*与***工作*****不**一样！

 ****结束更新***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T11:54:42.967

尝试将您的属性从 int 更改为 int[]

```
 public class SuppDocuments
 {
    public string Title { get; set; }
    public int documentid { get; set; }
 } 
```

假设上面是用于绑定模型的类，请尝试如下更改 documentid 属性

```
 public class SuppDocuments
 {
    public string Title { get; set; }
    public int[] documentid { get; set; }
 } 
```*

# android - 在 onActivityResult 之后设置 setText 失败

> ID：14275544
> 
> 赞同：0
> 
> 时间：2013-01-11T09:52:51.223
> 
> 标签：android, settext

我使用`ViewPager+Tabhost`框架。

我传入`startActivityForResult(B activity,100),`一个 Activity。并传入`setResult(200, data);`B。

它可以从 A 中的 B 接收值：`String b = data.getStringExtra("b");`

它还可以看到使用Log的值。

但它不能`tv.setText(b);`在A中设置值使用。我也不能设置值使用`tv.setText(“dasfasd”);`。我没有这个理由。

为什么不能设置值？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:20:17.920

尝试这个 ：

```
Activity_A.this.runOnUiThread(new Runnable() {    
        public void run() {
            tv.setText("dasfasd");    
        }
}); 
```

# php - 单击按钮上的 Sql 查询

> ID：14275547
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:09.363
> 
> 标签：php, html, button

我想问当按下 HTML 按钮时如何调用 Sql 查询。我看了几个教程，但从来没有让它正确工作，这就是我想在这里问的原因。

所以..我有一个显示的项目列表，该列表是从数据库生成的。代码如下所示：

```
<table width="100%" border="1" cellspacing="1" cellpadding="5" style="background-color:#FFC" >
<td>Id</td>
<td>Text</td>
<td>Solved?</td>
<td></td>
<?php
while( $array = mysql_fetch_assoc($queryRun) ) {
    ?><tr>
    <td><?php echo $id = $array['id'].'<br />';?></td>
    <td><?php echo $text = $array['text'].'<br />';?></td>
    <td><?php echo $reseno = $array['solved'].'<br />';?></td>
    <td><input type="button" value="Solve it" /></td>
    </tr><?php
}?>
</table> 
```

现在，在此循环中生成的每个项目在表的末尾都有一个“已解决”按钮，我想这样做，所以当用户单击该按钮时，执行一个 Sql 查询，将已解决的值从 0 更改为) 到 1 (真)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:34:33.177

我没有对此进行测试，但它应该可以工作。

基本上我已经将一个类应用于任何东西，以便在 jQuery 中轻松选择内容：

```
<?php while ($array = mysql_fetch_assoc($queryRun)) { ?>
<tr class="row">
    <td class="cell_id">
        <?php echo $array['id']; ?>
    </td>
    <td class="cell_text">
        <?php echo $array['text']; ?>
    </td>
    <td class="cell_solved">
        <?php echo $array['solved']; ?>
    </td>
    <td class="cell_solve_it">
        <input class="button_solve_it" type="button" value="Solve it" />
    </td>
</tr>
<?php } ?> 
```

然后我创建了这个简短的 jQuery 脚本：

```
$('.row').each(function(){
    $('.button_solve_it', this).click(function(e){
        e.preventDefault();
        $.post(
            'solve_query.php',
            {
                id: $('.cell_id', this).html(),
                text: $('.cell_text', this).html()
            },
            function (data) {
                $('.cell_solved', this).html('1');
            }
        );
    });
}); 
```

简而言之：当您单击按钮时，您会向执行 SQL 查询的地方`.button_solve_it`发出 AJAX 请求。`solve_query.php`然后，它将列中行的内容设置`Solved?`为`1`（`true`或任何您想要的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:57:44.080

你需要ajax。编写按钮 onclick 并进行 ajax 调用。

# android - 无法每隔一分钟在 Facebook 墙上发帖

> ID：14275548
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:10.360
> 
> 标签：android, facebook-graph-api

我正在开发一个 android 应用程序，在该应用程序中，我想每 1 分钟在 facebook 上发布一次消息。

我的代码没有问题。在每一分钟我调用以下方法并且它每次都成功调用，但是在 facebook 我无法看到所有的帖子，facebook 只能在**每十分钟后显示帖子。**

代码 。

```
public void postOnWall(String msg) 
    {
        try 
         {
            if(mFacebook != null)
            {
                String response = mFacebook.request("me");
                Bundle parameters = new Bundle();
                parameters.putString("message", msg);
                parameters.putString("description", "");
                response = Profile.mFacebook.request("me/feed", parameters,"POST");
                if (response == null || response.equals("") || response.equals("false")) 
                {
                       Log.v("Error", "Blank response");
                }
            }
         } 
        catch(Exception e) 
        {
             e.printStackTrace();
        }
    } 
```

你能告诉我确切的问题是什么，为什么我看不到墙上的所有帖子？我只能看到每 10 分钟的帖子。

# android - 从android中的多个选项卡保存数据

> ID：14275552
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:23.433
> 
> 标签：android, tabs

我有一个有 4 到 5 个标签的应用程序。每个选项卡都有用户填写的特定信息。当用户从菜单中选择保存选项时，我想保存所有这些选项卡中的数据。

最好的方法是什么（如果不是最好的，至少是最可靠的！）做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:03:30.127

我建议您在每个选项卡上复制保存按钮，我认为从用户体验的角度来看这是最好的决定：当您到达单个保存按钮所在的选项卡时，您可能会忘记另一个选项卡上的内容选项卡并保存您目前不可见的内容并不是很方便。只需让用户在每个选项卡上保存数据即可。希望这可以帮助。

# xcode - 如何取回尝试编辑锁定文件时显示的 XCode 对话框？

> ID：14275553
> 
> 赞同：3
> 
> 时间：2013-01-11T09:53:24.930
> 
> 标签：xcode, xcode4.3, perforce, xcode4.4

我将 Perforce 与 XCode 4.4 一起使用，这两者似乎有些不兼容。

Perforce 似乎正在锁定文件，当您尝试编辑锁定的文件时，XCode 通常会显示一个对话框，询问您是否要解锁它。

我关闭了这个对话框，但现在我必须手动按下右上角的解锁按钮。

有谁知道如何恢复这个自动对话框，以便它显示对话框是我开始输入锁定的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:24:08.803

这是一篇描述如何使用 XCode 行为来解决问题的文章：

[http://kb.perforce.com/article/1735/automatically-checking-out-files-for-edit-in-xcode-43](http://kb.perforce.com/article/1735/automatically-checking-out-files-for-edit-in-xcode-43)

# javascript - 按钮颜色不变

> ID：14275555
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:37.867
> 
> 标签：javascript, jquery, html, css, jquery-ui

问题 - 按钮颜色没有改变，我使用了 jquery click 功能

```
<button class="red"  id="MyQuotes" href="#" title="">@Aceo.Crm.App.Resources.Shared.Order.Link_MyQuote</button> 
```

对于这个按钮，我使用 jquery 作为

```
$(document).ready(function(){
    $("#MyQuotes").click(function(){
    $(this).css({background:"red"});
    });
}); 
```

但这并不成功，我也尝试以这种方式执行此操作-

```
<button class="red" onclick="D()" id="MyQuotes" href="#" title="">@Aceo.Crm.App.Resources.Shared.Order.Link_MyQuote</button> 
```

我在这里制作了javascript函数-

```
<script language="javascript">
function D()
{
document.body.style.backgroundColor="red";
}
</script> 
```

是的，这次我又失败了。你能建议我一些代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:55:04.820

使用 jQuery：http: [//jsfiddle.net/DrWjq/](http://jsfiddle.net/DrWjq/)

```
$(document).ready(function(){
   $("#MyQuotes").click(function(){
    $(this).css({background:"red"});
   });
}); 
```

纯JS：http: [//jsfiddle.net/wx9tw/](http://jsfiddle.net/wx9tw/)

```
function D(id)
{
 id.style.backgroundColor="red";
}

<button class="red" onclick="D(this)" id="MyQuotes" href="#" title="">@Aceo.Crm.App.Resources.Shared.Order.Link_MyQuote</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:56:14.217

您的选择器的 id 是“MyQuotes”而不是“MyOrders”

尝试这个

```
$("#MyQuotes").click(function(){
  $(this).css({background:"red"});
}); 
```

**或者**

```
function D()
{
  $('#MyQuotes').css({background:"red"});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:56:20.770

您必须在 JS 中引用按钮（所以 #MyQuotes 而不是 #MyOrders）：

```
$(document).ready(function(){
    $("#MyQuotes").click(function(){
    $(this).css({background:"red"});
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T09:59:16.123

您可以使用`$(this).css("background-color","red");`（并定位正确的元素 ID）

[小提琴](http://jsfiddle.net/3bmGa/)

# python - SkyBot IRC bot - 现在播放命令

> ID：14275557
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:38.257
> 
> 标签：python, bots, irc, shoutcast

我有一个基于 SkyBot ( [https://github.com/rmmh/skybot](https://github.com/rmmh/skybot) ) 的 IRC 机器人，我想为它创建一个命令来检查 ShoutCast 流并以格式 (Current_Song - Artist - Station_Name) 发送输出) 作为给频道的消息。

不幸的是，我的 Python 生锈了。在放置了大约 3 年之后，我正试图将其重新拾起。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:16:47.933

我认为最简单的方法是：

*   使用 urllib 或 urllib2 访问站点

*   使用 beautifulsoup 获取 class/id/tag 然后检索内容

*   将数据放入字符串中，然后使用 sockets/irc 库将其发送到通道

祝你好运。

# jquery - 在函数之间传递 JSON 对象的时间问题会产生错误

> ID：14275559
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:42.433
> 
> 标签：jquery, ajax, json, response, timing

我下面的函数进行了 AJAX 调用，由于它是返回的无效 JSON 对象，我必须手动将结果解析为有效的 JSON 对象（有效）。问题是当我将 JSON 对象传回给原始调用函数时，该对象没有被正确传回。

如果我只放入第三个警报，它将显示该对象“无效”。但是，如果我将所有三个警报都放入，只有警报 2 会说无效（1 和 3 将显示对象）。这让人相信这可能是在这些变量之间传递对象的某种时间问题。关于如何解决这个问题的任何建议，因为我显然无法在我的最终代码中放置警报。

```
 function loadDocuments(){
       var myDocuments = getDocs();
       alert('third response ' + myDocuments);
    }

    function getDocs() {            
            var myURL = "someURL";
            var response;
            $.ajax({
                url: myURL,
                type: 'GET',
                dataType: 'json',
                 complete: function(docData) {
                   if(docData.status==200){
                       response = parseDocResults(docData.responseText);
                       alert('first response' + response);                                                   
                   }else{
                       response = "Documents failed to load";
                   }
                }
            });
            alert('second response' + response);
         return response;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:07:33.563

以您尝试的方式使用 AJAX 意味着以`synchronous`阻止浏览器直到传输完成的方法使用它。您可以找到`async`该功能的配置标志，该标志`$.ajax()`在设置为时使 AJAX 同步工作，`false`但我不推荐它（它也已被弃用）。

该`$.ajax()`函数只是向服务器发送一个 HTTP 请求。它不等待立即返回的回复，并继续执行 ajax 函数调用之后的任何指令。

稍后，浏览器 (JavaScript) 会收到来自服务器的 HTTP 响应。您的 ajax 函数调用指定了一个`complete`/`success`回调，用于处理 HTTP 响应。但是由于该回调是“稍后”执行的，因此您必须从回调中塑造您的逻辑，而不依赖于返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:56.810

你可以这样做：

```
var myDocuments;

getDocs(); //call getDocs() instead of loadDocuments() in your coding logic

function loadDocuments(response){
        myDocuments = response;
        alert(myDocuments);
    }

    function getDocs() {            
            var myURL = "someURL";
            var response;
            $.ajax({
                url: myURL,
                type: 'GET',
                dataType: 'json',
                 complete: function(docData) {
                   if(docData.status==200){
                       response = parseDocResults(docData.responseText);
                       alert('first response' + response);                                                   
                   }else{
                       response = "Documents failed to load";
                   }

                   loadDocuments(response);
                }
            });            
    } 
```

# c# - Visual Studio 防火墙和 SQL 连接问题

> ID：14275561
> 
> 赞同：1
> 
> 时间：2013-01-11T09:53:48.567
> 
> 标签：c#, sql-server, visual-studio-2010, database-connection, windows-firewall

我似乎很难让我的应用程序（从 k 运行）连接到数据库，这是在我对`SQLExpress`实例进行一些更改之后发生的，并且可能与防火墙有关。

我所做的更改如下：

1.  我曾经使用`sqlexpress`实例名称连接到数据库，我将其更改为能够使用 localhost，我进入 sql server 配置，启用`TCP/IP`并将正确的端口放在那里，`1433`. 这里没有问题。

2.  我还为我的数据库创建了一个新的登录名和用户，给它 datareader 和 datawriter 选项。

`localhost`问题是我可以使用sql server management studie连接到数据库，这工作正常。

我也可以使用内部工具进行连接，也可以使用 localhost。

有 2 个问题我无法解决：

1.  第一个问题在于`Visual studio`，当我在那里运行我的应用程序时，我无法连接错误。我尝试在不调试的情况下运行，这解决了问题，因为 Windows 询问我是否允许我的应用程序进行更改 blabla。运行调试并没有问我同样的问题，只是抛出了错误，因此我认为这是与防火墙相关的，当我完全禁用我的防火墙时它可以工作。

2.  我得到无法打开连接数据库错误，这当然当我在没有调试的情况下运行以避免以前的问题，当我尝试通过本地主机连接时，我的应用程序似乎无法找到数据库，如前所述，我可以使用 sql 管理工作室通过本地主机连接。

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:42:38.970

我重新安装了 sqlserver 这解决了这个问题。我现在可以使用 localhost，尽管它不是我正在寻找的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:58:35.187

尝试以管理员身份运行 Visual Studio。

右键单击 VS 图标并选择**以管理员身份运行。**

或者看看这个问题： [Point to localhost\sqlexpress using only localhost](https://stackoverflow.com/questions/449607/point-to-localhost-sqlexpress-using-only-localhost)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:20:43.880

尝试关闭 UAC。对我有帮助

# c++ - 如何在 Symbian 中获取应用程序的开始和结束时间

> ID：14275562
> 
> 赞同：0
> 
> 时间：2013-01-11T09:53:53.387
> 
> 标签：c++, java-me, symbian

谁能告诉我，如何使用 symbian C++ 或 JavaME 获取安装在 Symbian 设备上的所有应用程序的开始时间和结束时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:23:13.007

设备中没有人跟踪开始和结束时间。

如果您想要此信息，那么您可以自己轮询它 - 您必须编写一个在后台运行的进程并定期轮询正在运行的应用程序列表。然后将列表与之前的运行进行比较，记录新名称并记录不再列出的停止时间。

# mysql - 简单的 mysql 查询工作比嵌套 Select 慢

> ID：14275567
> 
> 赞同：3
> 
> 时间：2013-01-11T09:53:59.210
> 
> 标签：mysql, indexing, nested

我正在从单个表中进行简单的选择。

```
CREATE TABLE `book` (
 `Book_Id` int(10) NOT NULL AUTO_INCREMENT,
 `Book_Name` varchar(100) COLLATE utf8_turkish_ci DEFAULT NULL ,
 `Book_Active` bit(1) NOT NULL DEFAULT b'1' ,
 `Author_Id` int(11) NOT NULL,
 PRIMARY KEY (`Book_Id`),
 KEY `FK_Author` (`Author_Id`),
 CONSTRAINT `FK_Author` FOREIGN KEY (`Author_Id`) REFERENCES `author` (`Author_Id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5947698 DEFAULT CHARSET=utf8 COLLATE=utf8_turkish_ci ROW_FORMAT=COMPACT 
```

**表**：书

**列**：
Book_Id (INTEGER 10) | 书名 (VARCHAR 100) | Author_Id (整数 10) | Book_Active (布尔值)

我在三列上有索引： Book_Id (PRIMARY key) ， Author_Id (FK) ， Book_Active 。

第一个查询：

```
SELECT * FROM book WHERE Author_Id = 1 AND Book_Active = 1

EXPLAIN : 
id  select_type table   type    possible_keys                   key         key_len ref     rows    Extra
1   SIMPLE      book    ref     FK_Author,index_Book_Active     FK_Author   4       const   4488510 Using where 
```

第二个查询：

```
SELECT b.* FROM book b 
WHERE Book_Active=1 
AND Book_Id IN (SELECT Book_Id FROM book WHERE Author_Id=1)
EXPLAIN :
id  select_type         table   type            possible_keys       key                 key_len ref     rows    Extra
1   PRIMARY             book    ref             index_Book_Active   index_Book_Active   1       const   9369399 Using where
2   DEPENDENT SUBQUERY  book    unique_subquery PRIMARY,FK_Author   PRIMARY             4       func    1       Using where 
```

数据统计是这样的：

```
16.8 million books 
10.5 million Book_Active=true
6.3 million Book_Active = false 
```

而对于`Author_Id=1`

```
2.4 million Book_Active=false
5000 Book_Active=true 
```

第一个查询需要**6.7**秒。第二次查询耗时**0.0002**秒

造成这种巨大差异的原因是什么？使用嵌套选择查询是否正确？

编辑：添加“sql解释”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:01:49.970

在第一种情况下：MySQL 使用`FK_Author`索引（这给了我们大约 450 万行），然后它必须根据`Book_Active = 1`条件匹配每一行——索引不能在这里使用。

第二种情况：InnoDB 为每个索引隐式[添加](http://dev.mysql.com/doc/refman/5.5/en/innodb-index-types.html)主键。因此，当 MySQL 执行这部分时：`SELECT book.* FROM book WHERE Book_Active=1`它已经`Book_Id`从索引。`Book_Id`然后对于子查询，它必须匹配`Author_Id`; `Author_Id`是一个常数，是索引的前缀；隐式包含的主键可以与`Book_Active`索引中的隐式主键匹配。在您的情况下，相交两个索引比使用索引检索 4.5M 行并按顺序扫描它们要快。

# objective-c - 核心动画 - 如何计算持续时间以便以相同的速率绘制两条不同长度的线

> ID：14275569
> 
> 赞同：0
> 
> 时间：2013-01-11T09:54:01.953
> 
> 标签：objective-c, core-animation

我有两条不同长度的线

线路1 -----

线2 -------------

如何计算每条线的动画持续时间，以便它们都以相同的速度绘制。

目前，我有一个持续时间的设定值

```
line1.duration = 1;

line2.duration = 1; 
```

由于长度不同，line1 的动画比 line2 慢。

如何以固定速度计算动画持续时间？

**编辑**

忘了提到 line1 不知道 line2 的长度，因为线条是在循环中绘制的。我追求的是恒定速度计算/每秒像素数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:59:33.827

试试这个：

```
line2.duration = lengthOfLine2 / lengthOfLine1 * line1.duration; 
```

（替换适当的值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:59:44.520

我假设：以相同的速度绘图 - 你的意思是他们两个应该同时结束绘图。

假设第 1 行：长度 - 100 像素

假设第 2 行：长度 - 350 像素

然后假设 1 px 需要 1 毫秒，那么第 1 行将需要 100 毫秒

为使第 2 行需要 100 毫秒，它需要绘制 (350/100 = 3.5 px/ms)

因此，假设对于长度为“l1”的线，短线需要时间“t”

那么对于长度为“l2”的线，更大的线应该花费时间“l2/t”，以便它们同时停止绘制。

# installshield - 安装路径中的外来字符 - Installshield Installscript 项目

> ID：14275570
> 
> 赞同：0
> 
> 时间：2013-01-11T09:54:06.927
> 
> 标签：installshield, installscript

我有一个奇怪的问题，它间歇性地出现。安装程序安装正常，但安装路径有前导字符。这是一个纯英语美国语言安装程序。

这就是我所做的：

> g_szProductBaseDir = g_szCompanyBaseDir ^ IFX_PRODUCT_NAME;

在哪里，

> g_szCompanyBaseDir = D:\Program Files\ABC\
> 
> IFX_PRODUCT_NAME = 硬件\VMC567-CIRCLE

特殊字符嵌入在 IFX_PRODUCT_NAME 之前。最后，我们有一个安装路径，其中包含一个带有外来字符名称的额外文件夹。

日志说：

> D:\Program Files\ABC\??\Hardware\VMC567-CIRCLE

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T06:39:30.773

路径需要两个反斜杠，否则字符会被转义。此外，您可能需要先将 g_szProductBaseDir 放入 LongPathToQuote() 才能使用它：

```
g_szProductBaseDir = g_szCompanyBaseDir ^ IFX_PRODUCT_NAME;
LongPathToQuote(g_szProductBaseDir, TRUE); 
```

# html - 计算旋转 div 内 div 的准确 x 和 y 位置

> ID：14275571
> 
> 赞同：0
> 
> 时间：2013-01-11T09:54:09.847
> 
> 标签：html, canvas, rotation, transformation

我在 HTML5 Canvas 上实现了缩放和裁剪。缩放实际上是在增加 Canvas 的高度和宽度，使其看起来缩放。对于裁剪，我编写了一个算法来使用鼠标选择一个矩形区域然后裁剪它。现在，如果我想在图像放大或缩小时进行裁剪，在选择裁剪区域时，我必须考虑由于缩放引起的顶部和左侧位置位移，这很好。

所以我现在正在实现一个旋转（使用 css3 变换：旋转）。问题是，当我将图像旋转一定角度时，选择看起来与实际鼠标位置有点偏离。这曾经也发生在缩放效果中，但是由于我曾经从 x 和 y 位置分别减去添加的左侧和顶部距离，因此即使图像被缩放，我也能够绘制选择。我不明白我应该如何处理旋转图像！

下图可能会帮助您更清楚地理解我的问题：

![旋转时的选择问题](../Images/6673f3069a7c0af170b6c7d793f37de9.png)

画布周围有一个 div，反映了画布。它将具有与画布相同的宽度、高度、顶部、左侧属性。这是故意这样做的，因为我无法将绝对的选择添加为画布的子项。现在这个封面，当在 FireBug 中选择时，仍然显示为一个矩形，其宽度和高度增加了，顶部和左侧的位置也发生了变化。

我知道我必须像我已经为缩放所做的那样计算位移，但我不知道该怎么做！我花了很多时间尝试诸如毕达哥拉斯算法和旋转矩阵之类的东西等等等等！

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:26:30.207

您可以使用此函数旋转每个顶点，其中“pnt”是一个顶点，“pivot”是您要旋转的点，“angle”是弧度角

```
function rotatePoint(pnt, pivot, angle){
   var data = figureAngle(pivot, pnt),
      theta = data.angle + angle,
      rise = Math.sin(theta) * data.length,
      run = Math.cos(theta) * data.length;

   return {
      x: pivot.x + run,
      y: pivot.y + rise
   }
}

function figureAngle(start, end){
   var rise = (end.y - start.y),
        run = (end.x - start.x),
        length = Math.sqrt(Math.pow(rise, 2) + Math.pow(run, 2));

   return {length: length, angle: Math.atan2(-rise, -run) + Math.PI};
} 
```

那么你的水平移动将是 4 个新顶点中最小的 x，你的垂直移动将是最小的 y。

编辑：这假设您在旋转之前左上角坐标为 [0, 0]。如果不是，您需要从结果中减去您的起始坐标，即如果您的左上角从 [50, 100] 开始，您的水平偏移将是 xMin - 50，而您的垂直偏移将是 yMin - 100

# .net - 如何将 UserProperty 添加到 Outlook 约会项

> ID：14275573
> 
> 赞同：3
> 
> 时间：2013-01-11T09:54:19.380
> 
> 标签：.net, outlook

我正在开发一个 Outlook 插件，我正在尝试将一个 UserProperty 添加到一个约会项。但是我第一次得到 UnauthorizedAccessException。当我第二次调用该方法时，它可以工作，并且 UserProperty 已成功添加到约会中。我更改了属性的名称后出现了问题。在添加此属性之前，我是否必须以某种方式注册该属性或执行其他操作？

```
Appointment.AddCustomProperty(AppointmentItem, "CRMConKat", OlUserPropertyType.olText, cat.katName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:17:44.217

没有 AddUserProperty 方法。你的意思是你打电话给 AppointmentItem.UserProperties.Add 吗？
您可以修改任何其他约会属性吗？
您是否在所有约会中都收到此错误？
预约如何开启？
您是如何更改物业名称的？你的意思是之前已经设置好了？

# extjs - ExtJS 4 - 网格分组仅扩展/折叠某些组

> ID：14275576
> 
> 赞同：4
> 
> 时间：2013-01-11T09:54:24.387
> 
> 标签：extjs, view, grid, extjs4, grouping

从 API 中有一个配置标志，可以设置为在渲染时展开或折叠网格分组。

有没有办法只扩展第一个分组并让所有其他分组崩溃？

例如，我有一个最多包含三个分组的商店，并且希望始终将第一个分组展开而其他分组折叠。

API似乎没有一种简单的方法可以做到这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:55:08.237

您必须对其进行编程！但这并不难……查看官方煎茶示例，您会找到一个[分组](http://docs.sencha.com/ext-js/4-1/#!/example/grid/groupgrid.html)示例！

您必须执行以下操作：

```
 //Either this...       
groupingFeature.expand(groupName, true);

//or this...
groupingFeature.collapse(groupName, true); 
```

您应该将命令放在网格的*afterrender*事件中。或者你从商店尝试*groupchange*事件（我不确定它是否在 init 进程中被调用）

对于网格，它应该看起来像这样......

```
afterrender:( grid, eOpts ) {
    var groupingFeature = grid.getView().features[0];

    groupingFeature.expand(groupName, true);
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-02T21:22:14.373

user1934574的回答有点问题。您应该**获得网格的视图，**然后获得特征。代码应该是：

```
afterrender:( grid, eOpts ) {
    var groupingFeature = grid.getView().features[0]; 

    groupingFeature.expand(groupName, true);
    ...
} 
```

# jquery - jQuery Ajax 表单未将数据发布到控制器（Codeigniter）

> ID：14275577
> 
> 赞同：0
> 
> 时间：2013-01-11T09:54:26.430
> 
> 标签：jquery, ajax, codeigniter, post

我有一个页面，用户可以在其中撰写有关某些网站的评论。我需要将此数据发布到我的 Codeigniter 控制器，该控制器使用模型函数将数据插入数据库。在我添加 jquery 之前一切正常，现在它没有发布，而且似乎根本没有进入控制器。任何解决此问题的帮助将不胜感激。谢谢。

**html**

```
<table id="revForm">
    <tr>
        <td>Site reviewed:</td>
        <td><input readonly type="text" id="site" name="profile" value="<?php echo $sitename; ?>"></td>
    </tr>
    <tr>
        <td>Name:</td>
        <td> <input type="text" id="name" name="name" value="Enter name"> </td>            
    </tr>
    <tr>
        <td>Message:</td>
        <td><textarea row="6" column="40" id="message" name="message" value="message"></textarea></td>
    </tr>
    <tr>
        <td>Rate this site</td> 
        <td>
            <div>                        
                <input name="rating" type="radio" value="1" class="star"/>
                <input name="rating" type="radio" value="2" class="star"/>
                <input name="rating" type="radio" value="3" class="star"/>
                <input name="rating" type="radio" value="4" class="star"/>
                <input name="rating" type="radio" value="5" class="star"/>                    
            </div>

        </td>
    </tr>
</table><br>
<button id="submitReview2">Submit</button><br/> 
```

**控制器“评论”**

```
public function addReview() { 

    $this->load->helper('form');         
    if ($this->input->post("message")!="")  {
            $this->reviewsMod->addReview($this->input->post('profile'),
                                    $this->input->post('name'),
                                    $this->input->post('message'),
                                    date('d/m/Y'),
                                    $this->input->post('rating'));
            $data['sitename'] = $this->input->post('profile');
            $this->load->view('shared/header');
            $this->load->view('profile', $data );
            $this->load->view('shared/footer');                            
        }

        else {
            $this->load->view('shared/header', $session);
            $this->load->view('profile', $data);
            $this->load->view('shared/footer'); 
            }      
    } 
```

**jQuery**

```
$('#submitReview2').click(function() {
    var profile = $('#site').val();
    var name = $('#name').val();
    var message = $('#msg').val();
    var rating = $('#rating').val();

    var msgData = {
       'profile':profile,
       'name':name,
       'message':message,
       'rating':rating
    }
   var base_url = '<?php echo base_url(); ?>';
   $.ajax ({
       type: 'POST',
       url: base_url+'reviews/addReview',
       data:  msgData,
       success:
           function(){                   
                $('#revForm').html("<div id='success'></div>")
                $('#success').html("Your review has been submitted")
                .fadeIn(1500);
           }

  });
  return false; 
```

**模型功能**

```
public function addReview($profile, $name, $message, $stamp, $rating) {
   $this->setValues($profile, $name, $message, $stamp, $rating);
   $this->db->insert('messages', $this); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:42:19.640

首先为您的 ajax 请求指定*错误*句柄，以便您可以看到错误发生后发生的情况：

```
$.ajax({
        //
        // Other parameters
        //
        success: function (result, textStatus, jqXHR) {
            // Some code
        },
        error: function (jqXHR, textStatus, errorThrown) {
           // Some code to debbug e.g.:               
           console.log(jqXHR);
           console.log(textStatus);
           console.log(errorThrown);
        }
    }); 
```

也开始使用某种 javascript 调试工具（取决于您使用的浏览器），就像有人说 Chrome 开发者工具（在网站上时按 f12 并转到网络选项卡）在 Chrome 或 Firefox 中的 Firebug 甚至更复杂的桌面像[Fiddler这样的应用程序](http://www.fiddler2.com/fiddler2/)

如果您在发布数据时仍然遇到问题，请向我们提供有关您遇到的错误的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:05:44.430

您是否为 base_url() 函数加载了 url 帮助程序？

`$this->load->helper('url');`

还可以使用 chrome 并使用 developertools 检查“控制台”和“网络”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:20:58.420

我认为`JQuery`这个帖子不是这样工作的。您需要使用 Jquery`.submit()`或`.post()`方法。

`Jquery post()`请找到和的例子和解释`submit()`

1\. [jQuery 提交](http://api.jquery.com/submit/) 2\. [jQuery 发布](http://api.jquery.com/jQuery.post/)

# c# - C#/Java 中动态对象的限制

> ID：14275583
> 
> 赞同：1
> 
> 时间：2013-01-11T09:54:40.327
> 
> 标签：c#, java, c++

我基本上是一个尝试进入 C# 的 C++ 人。从 C# 的基本教程中，我碰巧发现所有对象都是动态创建和存储的（Java 也是如此）并且可以通过引用访问，因此不需要复制构造函数。在将对象传递给函数或从函数返回对象时，也不需要按位复制。这使得 C# 比 C++ 简单得多。

但是，我在某处读到，仅通过引用对对象进行操作会对可以执行的操作类型施加限制，从而限制了程序员的完全控制。一个限制是程序员无法精确指定对象何时可以被销毁。

有人可以详细说明其他限制吗？（如果需要，提供示例代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:12:59.010

大多数“限制”都是设计使然，而不是被认为是缺陷（您当然可能不同意）

你无法确定/你不必担心

*   当一个对象被销毁时
*   对象在内存中的位置
*   它有多大（除非您正在调整应用程序）
*   使用指针算术
*   访问外部对象
*   访问类型错误的对象
*   在线程之间共享对象更简单
*   对象是在栈上还是堆上。（堆栈在 Java 中的使用越来越多）
*   内存碎片（并非所有收集器都如此）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:01:55.443

由于在 java 中完成垃圾收集，我们无法预测对象何时会被销毁，但它执行析构函数的工作。

如果你想释放一些资源，那么你可以使用 finally 块。

```
try {

  } finally{
  // dispose resources.     
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:20:38.433

进行了类似的转换后，您越深入研究它，您就越*需要*考虑 C# 在所有情况下的 GC 行为，但最直接的情况除外。在尝试处理托管代码中的非托管资源时尤其如此。

[本文](http://www.codeproject.com/Articles/29534/IDisposable-What-Your-Mother-Never-Told-You-About)重点介绍了您可能感兴趣的许多问题。

就我个人而言，我想念*IDisposable*的引用计数替代方案（更像 shared_ptr），但这可能是 C++ 背景的宿醉。

我越需要编写自己的管道来支持类似 C++ 的编程，就越有可能存在我忽略的另一种 C# 机制，或者我最终对 C# 感到沮丧。例如，就我所见， *swap*和*move不是 C# 中的常见习语，我很想念它们：其他具有 C# 背景的程序员可能不同意这些习语的有用性。*

# java - 使用 Java EE 注释使用 JUnit 进行 REST 服务测试

> ID：14275585
> 
> 赞同：1
> 
> 时间：2013-01-11T09:54:48.050
> 
> 标签：java, rest, jakarta-ee, junit, mockito

我使用在 GlassFish 和 Jersey 上运行的 Java EE 6。

如何使用一些自定义标头和其他一些请求详细信息来模拟对该资源的请求？

```
@Stateless
@Path("/user")
public class Resources {

@Contex
private HttpServletRequest request;
....

@GET
@Path("/settings")
@Produces("application/json")
@Consumes("text/plain")
public AccountSettings accountSettings() {
    //check custom headers and request content do some stuff
    return accountSettings;
}

    ....
} 
```

这是我的 java 代码，但我在**res.accountSettings() 上得到空指针异常，因为请求仍然为空。**

```
@Mock
HttpServletRequest request= Mockito.mock(HttpServletRequest.class);

@Test
public void testResources() {
    when(request.getHeader(HTTP_AUTHORIZATION_HEADER)).thenReturn("Basic wedwd");
    Resources res=new Resources();
    AccountSettings response=res.accountSettings();

} 
```

**而不是使用新**关键字创建，当我使用它时，我也会得到资源为空。

```
 @Inject Resources resources 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:45:55.910

我相信您可以使用 @InjectMocks 注释执行以下操作，它在任何 JAXRS 上下文或 CDI 注入内容之外，它被视为常规 Java 类。

```
@RunWith(MockitoJUnitRunner.class)
public class ResourcesTest {

    @Mock HttpServletRequest request;

    @InjectMocks Resources res;

    @Test
    public void testResources() {
        // given
        when(request.getHeader(HTTP_AUTHORIZATION_HEADER)).thenReturn("Basic wedwd");

        // when
        AccountSettings response = res.accountSettings();

        // then
        ...
    }
} 
```

# c# - 使用 CodeBehind 动态生成的 Html 打开 Popup

> ID：14275591
> 
> 赞同：1
> 
> 时间：2013-01-11T09:55:05.053
> 
> 标签：c#, javascript, asp.net, popup, code-behind

在某个时刻，我的代码隐藏中有一个动态生成的带有 html 的字符串。
我想打开一个以该 html 为源的弹出窗口。

我尝试了以下方法：
我在我的`.aspx`网站上创建了这个方法（Javascript）：

```
 function OpenWindowWithHtml(html, title) {
            var myWindow = window.open('', title);
            myWindow.document.write(html);
            myWindow.focus();
     } 
```

在代码隐藏中我有这个：

```
 Response.Write("OpenPopupWithHtml(\"" + html + "\", \"" + title + "\");"); 
```

但是当我尝试执行此操作时出现错误。
有没有人看到，我在这里做错了什么？
或者有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:56:57.547

**编辑**

在按钮上单击它应该是这样的

```
protected void btnAbct_Click(object sender, EventArgs e) {
   ClientScript.RegisterClientScriptBlock(this.GetType(), "Alert", "OpenPopupWithHtml('" + html + "', '" + title + "');");
} 
```

* * *

执行代码，即。你用javascript写的函数

```
 ClientScript.RegisterStartupScript(this.GetType(),
   "newWindow", "OpenPopupWithHtml('" + html + "', '" + title + "');"); 
```

* * *

你可以像这样注册客户端脚本

```
if (!ClientScript.IsClientScriptBlockRegistered("exampleScript"))
    ClientScript.RegisterStartupScript(this.GetType(), "exampleScript","
<script language = "'javascript'">
alert('you just registered the start up script')
</script>
"); 
```

来自 asp.net 文件背后的代码

要打开弹出窗口，只需替换上面代码中的这一行

```
 ClientScript.RegisterStartupScript(this.GetType(),
   "newWindow", String.Format("<script>window.open('{0}');</script>",
         "mypage.html")); 
```

详细检查：[在 ASP.NET 中注册客户端脚本](http://www.codeproject.com/Articles/19484/Register-Client-script-in-ASP-NET)

# d3.js - 流星添加 d3 图形动态失败

> ID：14275596
> 
> 赞同：1
> 
> 时间：2013-01-11T09:55:25.820
> 
> 标签：d3.js, meteor

我正在画一个 d3 甜甜圈。现在我想在数据库中添加与条目一样多的甜甜圈。如果我向数据库添加内容，自动更新将失败。我必须在浏览器中重新加载我的代码 - 然后我会看到新的甜甜圈。Meteor.autorun 不会自动更新吗？代码是：

```
 Template.donuts.rendered = function (){

    var self = this;
    self.node = self.find("p");

    // Data
    var dataset = {
      apples: [2, 2, 2, 2, 2]
    };

    //Width and height
    var width = 100,
        height = 100,
        radius = Math.min(width, height) / 2;

    // render
    self.handle = Meteor.autorun(function () {

      var color = d3.scale.category10();

      var pie = d3.layout.pie()
        .sort(null);

      var arc = d3.svg.arc()
          .innerRadius(radius - 20)
          .outerRadius(radius - 5);

      var svg = d3.select(self.node).append("svg")
          .attr("width", width)
          .attr("height", height)
          .append("g")
          .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

      var path = svg.selectAll("path")
          .data(pie(dataset.apples))
          .enter().append("path")
          .attr("fill", function(d, i) { return color(i); })
          .attr("d", arc);
    });

  }; //Template.donuts 
```

它通过车把调用

```
<template name="donuts">
  {{#each nodes}}
      <p></p>
  {{/each}}
</template> 
```

我究竟做错了什么。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:19:33.913

您渲染的钩子位于错误的级别。现在，您正在将它连接到包含甜甜圈的模板，当看起来您希望每个甜甜圈都以某种方式呈现时。首先，首先重新组织您的模板：

```
<template name="donuts">
  {{#each nodes}}
    {{> node}}
  {{/each}}
</template>

<template name="node"><p></p></template> 
```

现在您可以告诉节点在渲染时要做什么：

```
Template.node.rendered = function() {
  // d3 code
} 
```

每当重新渲染节点时，渲染的调用将自动运行，如果您更改依赖项，就会发生这种情况。如果`nodes`是像 mongodb 游标这样的反应源，这将立即起作用。否则，请添加更多代码，以便我们弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:19:13.147

`Meteor.autorun()`每当其依赖关系发生变化时都会运行。您需要函数内部的反应式数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:45:47.473

找到了一个更优雅的解决方案：

```
// Donuts                           //
function donutinit() {

  var dataset = {
    apples: [2, 2, 2, 2, 2]
  };

  //Width and height
  var width = 100,
      height = 100,
      radius = Math.min(width, height) / 2;

  // render
  var color = d3.scale.category10();

  var pie = d3.layout.pie()
    .sort(null);

  var arc = d3.svg.arc()
      .innerRadius(radius - 20)
      .outerRadius(radius - 5);

  var svg = d3.select("#donut_canvas").append("svg")
      .attr("width", width)
      .attr("height", height)
      .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

  var path = svg.selectAll("path")
      .data(pie(dataset.apples))
      .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc);
};

Template.donut.rendered = function() {
  donutinit();
}; 
```

之后在#donut_canvas 上使用车把进行迭代。Meteor.autorun 或 Meteor.rendered 给了我无法预测的甜甜圈数量——它渲染了额外的甜甜圈。那时我不得不重新加载它。

答案的灵感来自这里：[meteor Template中包含的谷歌地图被渲染了两次](https://stackoverflow.com/questions/13320428/google-map-contained-in-meteor-template-is-rendered-twice)

感谢您的时间。

# session - 后退按钮在 Symfony 2.1 中注销后显示上一页

> ID：14275597
> 
> 赞同：0
> 
> 时间：2013-01-11T09:55:26.663
> 
> 标签：session, symfony-2.1, cache-control

我已经完成了`Symfony 2.1`会话管理正常工作的项目。即注销后它会显示登录页面。但是在单击浏览器的后退按钮时，它会显示上一个页面，根据要求不应显示该页面。如果在该页面上执行的任何操作再次重定向到登录屏幕，则意味着注销后不允许执行任何操作。我尝试了其他人展示的不同解决方案，例如：

在树枝中：

```
<META Http-Equiv="Cache-Control" Content="no-cache, no-store, must-revalidate">
<META Http-Equiv="Pragma" Content="no-cache">
<META Http-Equiv="Expires" Content="0"> 
```

但没有为我锻炼。任何其他专门`Symfony`防止这种情况的方法。任何建议都是有帮助的。

# windows - 为什么@font-face 在 Windows 中呈现怪异？

> ID：14275601
> 
> 赞同：1
> 
> 时间：2013-01-11T09:55:49.740
> 
> 标签：windows, font-face

[我已经使用fontsquirrel](http://www.fontsquirrel.com)为字体“formata”生成了字体文件。在我的 Mac 上，字体在 Chrome 和 Safari 中看起来都不错（这似乎是合乎逻辑的，因为两者都使用 Webkit）。它在 Android (Chrome) 和 iPad (Safari) 上也能很好地呈现。

然而，在 Windows 中，字体呈现非常奇怪。有些字母看起来像它们有一个 1px 的填充底部。有些字母在高度上也看起来像小一像素。

我尝试过关闭 ClearType，但它仍然是一样的。浏览器似乎无关紧要。

下面是我的样子的截图： ![Windows 中的字体渲染示例](../Images/4b32bf98c643d00767274f271422b58d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:46:49.760

尝试调整字体大小。Windows 上的某些自定义字体在特定字体大小下效果不佳。尝试几种不同的尺寸。

一个对我有用的例子：

```
@font-face {
    font-family: 'PaddingtonSCPlainSmallCapsRom';
    src: url('/assets/fonts/paddingtonsc-webfont.eot');  /* IE9 Compat Modes */
    src: url('/assets/fonts/paddingtonsc-webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/assets/fonts/paddingtonsc-webfont.woff') format('woff'),  /* Modern Browsers */
         url('/assets/fonts/paddingtonsc-webfont.ttf') format('truetype'),  /* Safari, Android, iOS */
     url('/assets/fonts/paddingtonsc-webfont.svg#webfontCykG2Qou') format('svg'); /* Legacy iOS */
  font-weight: normal;
  font-style: normal;
  /* font-variant: normal; don't include this since webkit will ignore the whole rule: https://bugs.webkit.org/show_bug.cgi?id=25000 */
}

body {
  font: normal 75%/1.5em PaddingtonSCPlainSmallCapsRom, Arial, sans-serif;
} 
```

# javascript - 我可以在无法编辑代码的情况下创建选项卡式 div 吗？

> ID：14275602
> 
> 赞同：0
> 
> 时间：2013-01-11T09:55:53.260
> 
> 标签：javascript, css, html, tabs

我需要将选项卡式 div 添加到页面，看起来像这样： ![在此处输入图像描述](../Images/a5ff508b86c6ee6b126694f04da98e9a.png)

如果不能在标签内编辑代码，是否可以创建类似的东西？如果是，也许有任何建议或例子？

# solr - 更新数据库时如何使用 Solr 4.0 索引新数据？

> ID：14275603
> 
> 赞同：3
> 
> 时间：2013-01-11T09:55:52.687
> 
> 标签：solr, lucene, indexing, nutch

我有一个填充了获取和解析的网页的数据库。Solr 是否自动知道哪些列被更新以仅索引更改？或者我应该制作自己的 java 代码或其他东西（如 conf. 更改）来检查是否有任何更改？

# c# - 在对象模型中定义关系的最佳方法？

> ID：14275604
> 
> 赞同：0
> 
> 时间：2013-01-11T09:56:03.493
> 
> 标签：c#, database, database-design, object-model

在构建将`object model`a 映射`classes`到数据库表时，如何指定与其他实体的关系？

例子 ：

```
Category
----------------------
CategoryId  INT     PK
Name        VARCHAR
Description VARCHAR

Product
----------------------
ProductId   INT     PK
CategoryId  INT     FK
Name        VARCHAR
UnitPrice   DECIMAL
UnitInStock INT

class Category 
{
     public int CategoryId { get; set; }
     public string Name { get; set; }
     public List<Product> Products { get; set; } //for navigation only
}

class Product
{
     public int ProductId { get; set; }
     public string Name { get; set; }
     public decimal UnitPrice { get; set; }
     public int UnitInStock { get; set; }
} 
```

定义与其他实体的关系的最佳方式是什么？

```
class Product
{
     //...
     public Category Category;
} 
```

或者

```
class Product
{
     //...
     public int CategoryId;
} 
```

或两者 ？（一个用于数据库绑定（`int CategoryId`）一个用于导航（`Category Category`）

```
class Product
{
     //...
     public int CategoryId;
     public Category Category;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:03:58.133

这实际上取决于您在关系方面需要从模型中得到什么。通过将任何类型的引用`Category`放入您`Product`的模型中，您正在创建模型级别的双向关系。从数据完整性的角度来看，这在数据库级别可能是必要的，但这并不意味着您的模型必须效仿，这样做并不总是有意义的。

在我看来，`Product`不应该知道任何事情，`Category`因为它没有必要。A`Product`可以独立存在而不与 a 关联`Category`。但是，如果您觉得`Product` *应该*知道它，那么一定要`Category`添加该属性。

> Id 属性与 Navigation 属性

同样，这取决于您的要求。通常，使用导航属性更有利于未来的发展`ID`，因为无论如何该属性都会作为其中的一部分而下降。但是，当您真正需要的是`ID`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:01:12.743

这取决于您要达到的目标。如果需要后退导航，将主类本身添加为变量；但如果您不需要（或者如果您不希望需要），您可以添加标识符。

但是，我认为您应该只选择一种方式并实施它。如果您尝试同时使用这两种方法，可能会导致问题。例如，假设您在某些类中添加了主类作为反向导航属性；那么如果你在某些情况下不需要怎么办；您将进行一些不必要的数据库查询，或者在某些情况下会出现空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:06:47.387

我可以向您展示以下代码。我用它来保持实体之间的关系（来自数据库的数据实例的对象表示，即消费者、书籍）。它允许在第一次引用相关对象时读取内容。

```
public class EntityHandler<T, V>
        where T : Entity<V>, new()
        where V : DataObject
    {
        private long myDataObjectID;
        private T myEntityObject;
        public delegate Entity<V> GetEntityObject(long oid);

        private GetEntityObject GetEntityObjectFunction;

        private Entity<V> HandledEntity
        {
            set
            {
                if (myEntityObject == null)
                {
                    myEntityObject = (T)value;
                }
            }
            get { return myEntityObject; }
        }

        public EntityHandler(GetEntityObject extCntrGetBO, long oid)
        {
            myDataObjectID = oid;
            GetEntityObjectFunction = extCntrGetBO;
        }

        public T o
        {
            get
            {
                if (myEntityObject == null)
                {
                    myEntityObject = (T)GetEntityObjectFunction(myDataObjectID);
                }
                return myEntityObject;
            }
        }

        public long ID
        {
            get { return myDataObjectID; }
            set
            {
                myDataObjectID = value;
                myEntityObject = null;
            }
        }
    } 
```

# android - 如何从android中的数组查询sqlite数据库

> ID：14275611
> 
> 赞同：0
> 
> 时间：2013-01-11T09:56:21.893
> 
> 标签：android

我正在使用以下内容，`AuthorName`我想在其中找到列值`AuthorID`。`catid`是一个数组，包含`AuthorID`

```
public Cursor Authorname(String[] catid)   {
   myDataBase.rawQuery("SELECT AuthorName FROM AUTHOR_NAME WHERE AuthorID = ?",catid);
} 
```

但它回来了`IllegalArgumentException`。任何人都可以帮我缩短这个。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:12:58.310

您只能使用一个查询来获取所有用户。这是一个例子。

```
private static final String QUERY = "SELECT AuthorName FROM AUTHOR_NAME WHERE AuthorID IN %ids";

public Cursor Authorname(String[] catid) {

    // Build the string with all the IDs, e.g. "(1,2,3,4)"
    StringBuilder ids = new StringBuilder();
    ids.append("(");
    for(int i = 0; i < catid.length; i++) {
        ids.append(String.valueOf(catid[i]);
        if (i < catid.length - 1) {
            ids.append(",");
        }
    }
    ids.append(")");

    // Use the string with the ids in the query
    String finalQuery = QUERY.replaceAll("%ids", ids.toString());

    // Execute the query
    return myDataBase.rawQuery(finalQuery);
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-11T10:04:58.157

更改您的查询

```
myDataBase.rawQuery("SELECT AuthorName FROM AUTHOR_NAME WHERE AuthorID = ?",catid); 
```

如下

```
cursor = myDataBase.query("AUTHOR_NAME",
                    new String[] {"AuthorName"}, "AuthorID IN(?)", catid, null, null, null); 
```

试试上面的解决方案希望它对你有用。

# jquery - $(".rowchange tr:even").addClass("even") 在多个表中

> ID：14275612
> 
> 赞同：0
> 
> 时间：2013-01-11T09:56:33.603
> 
> 标签：jquery

我正在使用这个漂亮的小 jQuery Scritp 来更改表行的类：

```
$(".rowchange tr:even").addClass("even"); 
```

但是当我在同一页面上使用多个表时，结果可能是这样的：

```
<table class="rowchange">  
<tr class="even"><td>...</td></tr>  
<tr><td>...</td></tr>   
<tr class="even"><td>...</td></tr>  
</table>  
...
<table class="rowchange">
<tr><td>...</td></tr>
<tr class="even"><td>...</td></tr>
<tr><td>...</td></tr>
</table> 
```

我怎样才能让它工作，所有表都以 开头`<tr class="even">`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:58:48.200

您必须遍历每个`table`脚本并将该脚本分别应用于每个脚本：

```
$(".rowchange").each(function () {
    $(this).find("tr:even").addClass("even");
}); 
```

这是因为`:even`选择器被应用于匹配集中的所有元素，这将是所有`tr`元素的后代`.rowchange`元素。它不会考虑这些祖先`.rowchange`元素之间的差异。

这是一个[工作示例](http://jsfiddle.net/jamesallardice/EbaMY/9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:57.267

如果您用`table`作主选择器，`find()`您的排序将是正确的。

```
$('table.rowchange').find('tr:even').addClass("even"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:12:04.443

您也可以使用此选择器选择它：

```
$(".rowchange").find("tr:even").addClass("even"); 
```

这是一个[jsFiddle 示例](http://jsfiddle.net/EbaMY/10/)

# apache-zookeeper - 对 zookeeper 的 lock-recipe 的担忧

> ID：14275613
> 
> 赞同：21
> 
> 时间：2013-01-11T09:56:38.600
> 
> 标签：apache-zookeeper

在阅读 ZooKeeper 的[lock 配方时](http://zookeeper.apache.org/doc/trunk/recipes.html#sc_recipes_Locks)，我感到很困惑。似乎这个分布式锁的秘诀不能保证**“任何快照及时没有两个客户端认为他们持有相同的锁”**。但是既然ZooKeeper被广泛采用，如果参考文档中出现这样的错误，早就应该有人指出来了，那我误会了什么？

引用[分布式锁的秘诀](http://zookeeper.apache.org/doc/trunk/recipes.html#sc_recipes_Locks)：

> 锁具
> 
> 全局同步的完全分布式锁，**这意味着在任何时间快照中，没有两个客户端认为他们持有相同的锁**。这些可以使用 ZooKeeper 来实现。与优先级队列一样，首先定义一个锁节点。
> 
> 1.  *使用路径名为“ locknode* /guid-lock-”并设置序列和临时标志调用 create() 。
> 2.  在不设置监视标志的情况下在锁定节点上调用 getChildren()（这对于避免羊群效应很重要）。
> 3.  如果在步骤 1 中创建的路径名具有最小的序列号后缀，则客户端具有锁定并且客户端退出协议。
> 4.  客户端调用 exists( ) 并在锁定目录中的路径上设置了监视标志，并具有下一个最低序列号。
> 5.  如果 exists( ) 返回 false，则转到第 2 步。否则，请等待上一步的路径名通知，然后再转到第 2 步。

考虑以下情况：

*   Client1 成功获取锁（在步骤 3 中），ZooKeeper 节点为“locknode/guid-lock-0”；
*   Client2 创建了节点“locknode/guid-lock-1”，获取锁失败，正在观看“locknode/guid-lock-0”；
*   后来，由于某种原因（比如网络拥塞），Client1 未能按时向 ZooKeeper 集群发送心跳消息，但 Client1 仍在工作，错误地认为它仍然持有锁。
*   但是，ZooKeeper 可能会认为 Client1 的会话超时，然后

    1.  删除“locknode/guid-lock-0”，
    2.  向 Client2 发送通知（或者可能先发送通知？），
    3.  但无法及时向 Client1 发送“会话超时”通知（例如，由于网络拥塞）。
*   Client2 收到通知，转到步骤 2，获取它自己创建的唯一节点 ""locknode/guid-lock-1"；因此，Client2 假定它持有锁。
*   但同时，Client1 假设它持有锁。

这是一个有效的场景吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T14:32:20.240

您描述的情况可能会出现。客户端 1 认为自己有锁，但实际上它的会话已经超时，客户端 2 获取了锁。

ZooKeeper 客户端库会通知 Client 1 其连接已断开（但客户端直到客户端连接到服务器后才知道会话已过期），因此客户端可以编写一些代码并假设他的锁已丢失如果他断开连接的时间过长。但是使用锁的线程需要定期检查锁是否仍然有效，这本质上是活泼的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:04:10.840

> *...但是，Zookeeper 可能认为 client1 的会话超时，然后...*

来自 Zookeeper 文档：

> *   删除一个节点只会导致一个客户端唤醒，因为每个节点都被一个客户端监视。通过这种方式，您可以避免羊群效应。
> *   没有轮询或超时。

所以我认为你描述的问题不会出现。在我看来，如果创建它们的客户端发生某些事情，可能会有挂锁的风险，但你描述的场景不应该出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T12:37:43.293

来自packt book - Zookeeper Essentials

如果由于连接丢失导致创建znode部分失败，则客户端可能无法正确确定是否成功创建了子znode。为了解决这种情况，客户端可以将其会话 ID 存储在 znode 数据字段中，甚至作为 znode 名称本身的一部分。由于客户端在重新连接后保留相同的会话 ID，因此可以通过查看会话 ID 轻松确定子 znode 是否由它创建。

# automapper - Automapper：使用不匹配属性的属性进行映射

> ID：14275622
> 
> 赞同：2
> 
> 时间：2013-01-11T09:57:08.437
> 
> 标签：automapper, typeconverter

我有一个场景，我正在创建一个映射实用程序，通过它我们可以映射`DataReader`到实体。

```
Mapper.CreateMap<IDataReader, T>();
List<T> tList = Mapper.Map<List<T>>(reader);
return tList; 
```

如果实体具有与存储过程输出中相同的列，则此方法可以正常工作。但是，我正在处理一些列名不匹配的旧代码。所以我创建了一个属性，通过它我可以从 sprocs 中指定相应的列。我使用这样的代码指定它们

```
[DBColumn('EmployeeName')]
public string EmpName { get; set; } 
```

有什么方法可以使用泛型/反射来实现这一点？请注意，我有多个这样的实例，并且正在构建一个实用程序。所以我不能使用`ForMember`方法来实现这一点。

更新：我尝试创建这样的自定义转换器。但是，我的转换函数根本没有被调用。

自定义转换器

```
public class CustomConverter<T> : ITypeConverter<System.Data.IDataReader, T>
{
    private ResolutionContext _Context = null;
    private Dictionary<string, string> _CustomProps { get; set; }
    public T Convert(ResolutionContext context)
    {
        _Context = context;

        if (_Context.SourceValue != null &&
            !(_Context.SourceValue is System.Data.IDataReader))
        {
            string message = "Value supplied is of type {0} but expected {1}.\n" +
                             "Change the type converter source type, or redirect " +
                             "the source value supplied to the value resolver using FromMember.";

            throw new AutoMapperMappingException(_Context, string.Format(
                message, typeof(System.Data.IDataReader), _Context.SourceValue.GetType()));
        }
        _CustomProps = new Dictionary<string, string>();
        foreach (PropertyInfo propInfo in context.DestinationType.GetProperties())
        {
            if (propInfo.CustomAttributes.Any(attr => attr.AttributeType == typeof(DBColumn)))
            {
                DBColumn propertyValue = (DBColumn)propInfo.GetCustomAttribute(typeof(DBColumn));
                _CustomProps.Add(propertyValue.ColumnName, propInfo.Name);
            }
        }
        //return base.Convert(context);            
        return ConvertCore((System.Data.IDataReader)context.SourceValue);
    }

    protected T ExistingDestination
    {
        get
        {
            if (_Context == null)
            {
                string message = "ResolutionContext is not yet set. " +
                                 "Only call this property inside the 'ConvertCore' method.";

                throw new InvalidOperationException(message);
            }

            if (_Context.DestinationValue != null &&
                !(_Context.DestinationValue is T))
            {
                string message = "Destination Value is of type {0} but expected {1}.";

                throw new AutoMapperMappingException(_Context, string.Format(
                    message, typeof(T), _Context.DestinationValue.GetType()));
            }

            return (T)_Context.DestinationValue;
        }
    }

    protected T ConvertCore(System.Data.IDataReader source)
    {
        T obj = ExistingDestination;
        if (obj != null)
        {
            foreach (KeyValuePair<string, string> keyValuePair in _CustomProps)
            {
                PropertyInfo prop = obj.GetType().GetProperty(keyValuePair.Key,  BindingFlags.Public | BindingFlags.Instance);
                if (null != prop && prop.CanWrite)
                {
                    prop.SetValue(obj, System.Convert.ChangeType(source[keyValuePair.Value], prop.PropertyType));
                }
            }
        }
        return obj;
    } 
```

我指定在下面的语句中使用这个 CustomConverter。

```
 Mapper.CreateMap<IDataReader, T>().ConvertUsing<CustomConverter<T>>();
        List<T> tList = Mapper.Map<List<T>>(reader);
        return tList; 
```

请让我知道我哪里出错了

# .net - 使用 SQLServer 连接数据库时出错

> ID：14275623
> 
> 赞同：2
> 
> 时间：2013-01-11T09:57:23.787
> 
> 标签：.net, sql-server, visual-studio-2010, sql-server-2008

在 Visual Studio 2010 上，我有一个试图连接的数据库，但是当我尝试这样做时：

```
db.Open(); 
```

它启动了这个错误：

`A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 – Error Locating Server/Instance Specified)`

我试图按照[这个](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)链接所说的去做，但我仍然犯同样的错误。

关于发生了什么的任何想法？

**编辑：**防火墙已关闭。

**连接字符串：** MySQLProject.Properties.Settings.Default.dbConnectionString = "Data Source=|DataDirectory|\db.sdf"

**服务器已启动：**

![在此处输入图像描述](../Images/ad420200a2192eaf5b1cf0698b02faef.png)

**编辑2：**

这是失败的代码：

```
public void FillData()
    {
        // 1 step. Open connection
        // SqlConnection c = new SqlConnection("Data Source=" +db.Connection.DataSource);
        SqlConnection c = new SqlConnection(MySQLProject.Properties.Settings.Default.dbConnectionString);
        try
        {
            c.Open();

            // 2 step. Create new DataAdapter
            using (SqlDataAdapter a = new SqlDataAdapter("SELECT * FROM USER", c))
            {
                // 3 step. Use DataAdapter to fill table
                DataTable t = new DataTable();
                a.Fill(t);
                // 4 step. Render data on the DataGridView
                dataGridViewUsers.DataSource = t;
            }
        }
        catch (SqlException e)
        {
            MessageBox.Show(e.Message);
        }
    } 
```

**编辑 nº 1000：**

好的，我使用了这个连接字符串：

`string con2 = @"Server=.\SQLExpress;AttachDbFilename=|DataDirectory|db.sdf;Database=db;Trusted_Connection=Yes;";`

然后它说：

![在此处输入图像描述](../Images/7c75f9d9380baf793a60f9e759d65d41.png)

:____(

好的，现在我知道这`.sdf`是针对 CE Sql 语句的。但是，我不能创建`.mdf`，不知道为什么...我应该更改为 CE Sql 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:00:39.840

最典型的原因是：

*   服务器没有运行
*   连接字符串有错字（有些字母是错误的）

因此，当连接到不存在或关闭的服务器时，会出现此消息

编辑：请尝试检查：[SQL Server Express connection string for Entity Framework Code First](https://stackoverflow.com/questions/4116994)，因为您的 conn 字符串似乎不完整：

```
connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;
                       AttachDBFilename=|DataDirectory|aspnetdb.sdf;
                       User Instance=true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:00:49.310

这只是意味着找不到服务器。

*   检查连接字符串
*   服务器根本没有运行
*   检查防火墙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:56:27.537

仅适用于那些发现相同问题的人：

因为我无法创建`.mdf`数据库，所以只有`.sdf`一个，正如@Radim Köhler 所说，`.sdf`我必须使用`SqlCe...`实例的数据库。我的连接字符串说：

```
@"Data Source=|DataDirectory|db.sdf;Persist Security Info=False;" 
```

我这样连接：

```
SqlCeConnection c = new SqlCeConnection(con3); //MySQLProject.Properties.Settings.Default.dbConnectionString);
            c.Open(); 
```

# android - 如何在按下单个片段的手动后退按钮时返回上一个片段？

> ID：14275627
> 
> 赞同：29
> 
> 时间：2013-01-11T09:57:37.327
> 
> 标签：android, fragment, back

我的申请中只有一个`activity`和多个`fragments`。

**两个主要片段 A（左）和 B（右）。**

```
Fragment A1 called from A

B1 called from B

B2 called from B1 
```

都有`fragments`单独的后退按钮。

因此，当我按下`fragment` **A1**的后退按钮时，它应该返回到**A**，同样，当按下**B2**的后退按钮时，会出现**B1**并从**B1**到**B**等等。

如何实现这种类型的功能？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-11T10:10:13.793

```
public void onBackPressed()
{
    FragmentManager fm = getActivity().getSupportFragmentManager();
    fm.popBackStack();
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-02-25T02:22:18.327

我刚才已经实现了类似的场景。

活动'A'->调用片段'A1'并单击菜单项，它调用片段'A2'，如果用户从'A2'按下返回按钮，则返回到'A1'，如果用户按下之后从“A1”返回，它完成活动“A”并返回。

请参阅以下代码：

**活动 'A' - OnCreate() 方法：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activityA);

    if (savedInstanceState == null) {
        Fragment fragInstance;

        //Calling the Fragment newInstance Static method
        fragInstance = FragmentA1.newInstance();

        getFragmentManager().beginTransaction()
                .add(R.id.container, fragInstance)
                .commit();
    }
} 
```

* * *

**片段：'A1'**

当菜单项单击操作发生时，我正在用新的 Fragment 替换现有的 Fragment：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.action_edit_columns) {
        //Open the Fragment A2 and add this to backstack
        Fragment fragment = FragmentA2.newInstance();
        this.getFragmentManager().beginTransaction()
                .replace(R.id.container, fragment)
                .addToBackStack(null)
                .commit();

        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

**活动 'A' - onBackPressed() 方法：**

由于所有片段都有一个父 Activity（即“A”），因此 onBackPressed() 方法允许您弹出片段（如果有的话）或返回到前一个 Activity。

```
@Override
public void onBackPressed() {
    if(getFragmentManager().getBackStackEntryCount() == 0) {
        super.onBackPressed();
    }
    else {
        getFragmentManager().popBackStack();
    }
} 
```

如果您正在寻找在 Fragments 中嵌入 Fragments，请参考链接：http: [//developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-06-25T17:11:50.233

@trueblue 的回答让我解决了一个小而烦人的问题。当 backstack 上只有一个 Fragment 并且您按下返回按钮时，该帧将被删除，并且应用程序保持活动状态并显示空白屏幕。用户需要再按一次返回按钮才能退出应用程序。为了处理这种情况，我将原始代码修改为以下

```
@Override
public void onBackPressed() {
    if(getFragmentManager().getBackStackEntryCount() == 0) {
        super.onBackPressed();
    }
    else if(getFragmentManager().getBackStackEntryCount() == 1) {
        moveTaskToBack(false);
    }
    else {
        getFragmentManager().popBackStack();
    }
} 
```

当 backstack 中只有 1 个片段时，我们基本上是在告诉 android 将整个应用程序移到后面。

# 更新（可能是更好的答案）

因此，在对此进行了更多阅读之后，我发现您可以[将片段管理器事务添加到后堆栈](https://developer.android.com/guide/components/fragments.html#Transactions)，然后 android 会自动以所需的方式处理后按。下面的代码片段显示了如何做到这一点

```
Fragment fragment; //Create and instance of your fragment class here
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

fragmentTransaction.replace(R.id.fragment_container, fragment).addToBackStack(null);
fragmentTransaction.commit();
fragmentTransaction.addToBackStack(null); 
```

最后一行显示了如何将事务添加到后台堆栈。这解决了大多数情况下片段的后压问题，除了一个。如果您继续按返回按钮，那么最终您将到达一个点，即返回堆栈中只有一个片段。此时，您将要做以下两件事之一

1.  从正在运行活动的任务的后台堆栈中删除包含该片段的活动。这是因为您不想以空白活动结束
2.  如果该活动是该任务的后台堆栈中的唯一活动，则将该任务推入后台。

就我而言，是后者，所以我修改了`onBackPressed`之前答案中的覆盖方法，如下所示

```
@Override
public void onBackPressed() {
    if(getFragmentManager().getBackStackEntryCount() == 1) {
        moveTaskToBack(false);
    }
    else {
        super.onBackPressed();
    }
} 
```

这段代码更简单，因为它的逻辑更少，而且它依赖于框架而不是我们的自定义代码。不幸的是，我没有设法为第一种情况实现代码，因为我不需要。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-11T10:06:58.847

您必须按照此处的说明实现自己的 backstack 实现[。](https://stackoverflow.com/a/12928498/1649309)

您可以`popFragments()`在单击片段中的后退按钮时调用 ，并`pushFragments()`在从一个片段导航到另一个片段时调用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-02T05:52:32.237

做就是了

```
getActivity().getFragmentManager().popBackStack(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-28T07:04:00.200

试试这个，它对我有用。

```
public void onBackPressed() {
    if (mainLayout.isMenuShown()) {
        mainLayout.toggleMenu();
    } else {
        FragmentManager fm = getSupportFragmentManager();
        Log.print("back stack entry", fm.getBackStackEntryCount() + "");

        if (fm.getBackStackEntryCount() > 1) {
            fm.popBackStack();
            // super.onBackPressed();
            // return;
        } else {
            if (doubleBackToExitPressedOnce) {
                fm.popBackStack();
                super.onBackPressed();
                return;
            }

            this.doubleBackToExitPressedOnce = true;
            Toast.makeText(this, "Press one more time to exit",
                    Toast.LENGTH_SHORT).show();

            new Handler().postDelayed(new Runnable() {

                @Override
                public void run() {

                    doubleBackToExitPressedOnce = false;
                }
            }, 3000);

        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-04T06:09:16.570

您可以通过在`backStack`. 在这里检查我的答案：

[https://stackoverflow.com/a/19477957/1572408](https://stackoverflow.com/a/19477957/1572408)

希望能帮助到你

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T10:06:40.897

后退按钮将按照 Fragments[添加到 backstack](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)的顺序遍历。默认情况下，这是作为导航功能提供的。现在，如果您想转到特定的 Fragment，可以从 backstack中[显示它。](http://developer.android.com/reference/android/support/v4/app/FragmentTransaction.html#show%28android.support.v4.app.Fragment%29)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-11-26T09:00:11.063

```
@Override
public void onResume() {

    super.onResume();

    getView().setFocusableInTouchMode(true);
    getView().requestFocus();
    getView().setOnKeyListener(new View.OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if (event.getAction() == KeyEvent.ACTION_UP && keyCode == KeyEvent.KEYCODE_BACK){

                // replace your fragment here

                return true;

            }

            return false;
        }
    });
} 
```

// 快乐编码

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-10-05T07:49:00.227

如果你按下图像，你必须先像这样创建方法

```
private void Backpresses() {
    getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.contant_main, new Home()).commit();
} 
```

那么当你按下返回图像时，你必须像这样打电话..

```
 back.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                   Backpresses();

                }
            }); 
```

它对我来说很好。

# gwt - 显示时如何自动检查gridview中的复选框？

> ID：14275629
> 
> 赞同：0
> 
> 时间：2013-01-11T09:58:07.267
> 
> 标签：gwt, gridview, checkbox, gxt, setvalue

我正在使用 GXT 3 构建一个将显示“事件”的 GridView。

我想要做的是，当它呈现它时，我希望根据数据库中的布尔值检查一些复选框，而将其他复选框清空。

下面你有我的代码：

```
 CheckBoxSelectionModel<IncidentDto> isIncidentCM = new CheckBoxSelectionModel<IncidentDto>(incidentProperties.incident());
        allColumns.add(isIncidentCM.getColumn());
        ColumnModel<IncidentDto> columnModel = new ColumnModel<IncidentDto>(allColumns);

        final Grid<IncidentDto> grid = new Grid<IncidentDto>(store, columnModel);
        grid.setSelectionModel(isIncidentCM);
        add(grid); 
```

IncidentProperties 值提供者：

```
IdentityValueProvider<IncidentDto> incident(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:18:36.397

我不确定您是否可以将选择值绑定到布尔属性，但您可以将侦听器添加到 Grid 以根据布尔条件更新复选框。

```
grid.addBeforeShowHandler(BeforeShowEvent event) {
  @Override
  public void onBeforeShow(BeforeShowEvent event) {
    List<IncidentDto> itemsToSelect = new ArrayList<IncidentDto>();
    for (IncidentDto incident : store.getAll()) {
      if (incident.getBooleanProperty()) { //whatever your property is called
        itemsToSelect.add(incident);
      }
    }
    isIncidentCM.setSelection(itemsToSelect);
  }
} 
```

使用 BeforeShowEvent 可能还有其他含义，具体取决于您填充商店、渲染网格等的方式/时间，但假设您的商店已完全加载并且您的商店对象中可用的属性我相信这应该可以实现您的目标。

# ios - Reskit - 映射到数组

> ID：14275631
> 
> 赞同：1
> 
> 时间：2013-01-11T09:58:10.430
> 
> 标签：ios, json, restkit

我正在尝试运行一些单元测试以使用 RestKit v0.20 测试我的映射，但是我收到一个错误，即我的目标对象为零。我已经追踪到映射失败的事实，因为 sourceType 是 NSArray 而我的 destinationType 是 NSNumber。我认为这是因为我的映射键路径不正确。我正在尝试将**songCard** JSON 映射到我的对象。我在下面包含了我的 JSON 和映射测试。如果有人可以帮助我设置正确的密钥路径，那就太好了。

```
{"status" : 2000,
  "content" : {
    "cardList" : [
      {
        "songCard" : {
          "likes" : 2,
          "dislikes" : 3
        }
      }
    ]
  },
  "message" : "OK"
} 
```

单元测试类

```
- (RKObjectMapping *)songMetadataMapping
{
    RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[SongMetadata class]];
    [mapping addAttributeMappingsFromDictionary:@{
     @"content.cardList.songCard.likes":    @"likes"
     }];

    return mapping;
}

- (void)testSongMetadataMapping
{
    NSString *parsedJSON = [RKTestFixture parsedObjectWithContentsOfFixture:@"songMetadata.json"];
    RKMappingTest *test = [RKMappingTest testForMapping:[self songMetadataMapping] sourceObject:parsedJSON destinationObject:nil];
    [test addExpectation:[RKPropertyMappingTestExpectation expectationWithSourceKeyPath:@"content.cardList.songCard.likes" destinationKeyPath:@"likes" value:@"2"]];

    STAssertTrue([test evaluate], @"Mappings failed");

} 
```

**更新** 经过进一步调试，我发现我的 JSON 字符串中的值 2 被评估为 NSArray，而这应该被评估为 NSNumber。作为一项快速测试，我删除了 JSON 中的 [ ]，并且值 2 被正确评估为 NSNumber。这并不能解决我的问题，因为我需要将我的 JSON 标识为一组 songCard 对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:09:53.753

正如您所注意到的，当数组正在播放时，您不能使用您指定的键路径。我可以想到两个选择——第一个是远射，但关键路径`content.cardList[0].songCard.likes`有效吗？

否则，请考虑使用以下方法：

```
+ (instancetype)expectationWithSourceKeyPath:(NSString *)sourceKeyPath 
destinationKeyPath:(NSString *)destinationKeyPath 
evaluationBlock:(RKMappingTestExpectationEvaluationBlock)evaluationBlock; 
```

使用 keypath`content.cardList`并提供一个评估块 1) 检查映射是否是一个包含单个对象的数组。然后，您可以检查该对象是否包含`songCard`一个`likes`值为 2 的对象。

# tomcat - 如何使用 Spring 管理的独立 Tomcat 7 池的探针查看池使用信息

> ID：14275634
> 
> 赞同：0
> 
> 时间：2013-01-11T09:58:23.020
> 
> 标签：tomcat, tomcat7, pool, spring-jdbc, probe

我使用 Spring 管理的独立 Tomcat 7 池 (tomcat-jdbc.jar)，使用版本 7.0.26。psi-probe 2.3.2 也安装在 Tomcat 上。我看不到探针中的池使用情况（在“JDBC USAGE”列上）和“数据源”选项卡上的任何数据源。如何使用探测应用程序查看池使用信息？

applicationContext.xml 中的数据源声明

```
<beans profile="dev,default">
    <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
        <property name="url" value="<oracle_db_jdbc_url>"/>
        <property name="username" value="APSUSER"/>
        <property name="password" value="<oracle_user_password>"/>
        <property name="initialSize" value="1"/>
        <property name="minIdle" value="1"/>
        <property name="maxIdle" value="1"/>
        <property name="maxActive" value="3"/>
        <property name="maxWait" value="1000"/>
        <property name="validationQuery" value="select 1 from dual"/>
        <property name="jdbcInterceptors"
                  value="org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer;org.apache.tomcat.jdbc.pool.interceptor.SlowQueryReport(threshold=1500)"/>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:05:36.603

使用 JNDI 解决了这个问题。[https://groups.google.com/forum/?fromgroups=#!topic/psi-probe-discuss/moK_pcO1P3I](https://groups.google.com/forum/?fromgroups=#!topic/psi-probe-discuss/moK_pcO1P3I)

# php - 在 Yii 中显示不相关的 db 内容

> ID：14275635
> 
> 赞同：0
> 
> 时间：2013-01-11T09:58:24.737
> 
> 标签：php, mysql, yii

我有一个没有用于显示存储在会话中的信息的数据库表的模型。

我能够在会话中显示从给定表加载的内容

```
$ids = Yii::app()->storedData->getIds();
foreach($ids as $id) {
echo 'ID '.$id .'<br />'; 
} 
```

我宁愿显示来自该信息被加载到会话中的表的相关表中的信息，而不是显示 Id。

为了帮助解释我所追求的，给出：

![在此处输入图像描述](../Images/9ea7e11f32e529c53b4df9a24b2ea620.png)

我有 ModelC 来显示从 TableA 加载的会话数据。目前使用上面的代码返回的值是 TableAId。我宁愿显示 TableB:Description 。如果不将描述值也加载到会话数据中，我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:50:54.620

我不完全确定你在追求什么，但如果你想能够做到：

```
echo $modelC->description; 
```

并返回 TableB 描述，只需在 ModelC 类上使用 getter：

```
class ModelC extends CModel{ // confusing ?
    public function getDescription(){
         return ModelB::model()->findByPk($this->tableBId);
    }
} 
```

那是你所追求的吗？

# java - 创建文件并将其保存到动态存储

> ID：14275638
> 
> 赞同：0
> 
> 时间：2013-01-11T09:58:42.977
> 
> 标签：java, swing, user-interface, awt, jfilechooser

我创建一个这样的文件：

```
PrintWriter out = new PrintWriter(
                     new FileOutputStream(
                      new File("C:/Users/.../Desktop/Server Recipe Log.txt"), 
                      true));
             out.println("serverText");
             out.close(); 
```

但我不想将文件保存在我的桌面上 - 我想打开另存为对话框来选择我想要保存文件的位置。

我已经尝试了一些框架教程，但我不想创建任何框架，我想使用本机系统对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:18:30.453

> ..想要使用本机系统对话框。

您使用了错误的语言。最接近的 Java 提供的是 a`java.awt.FileDialog`或 a`javax.swing.JFileChooser`使用本机 PLAF。

## 例如

```
import java.awt.*;
import javax.swing.*;

class FileDialogs {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception useDefault) {
                }
                FileDialog fd = new FileDialog((Frame)null);
                fd.setVisible(true);

                JFileChooser fc = new JFileChooser();
                fc.showSaveDialog(null);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:08:55.747

```
JFileChooser jl = new JFileChooser();
jl.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
int save = jl.showSaveDialog(null);
if (JFileChooser.APPROVE_OPTION == save){
PrintWriter out = new PrintWriter(
                 new FileOutputStream(
                  new File(jl.getSelectedFile().getAbsolutePath()+"/name.txt"), 
                  true));
         out.println("serverText");
         out.close();
} 
```

# c - 使用来自 gnu c 的 parse_datetime

> ID：14275639
> 
> 赞同：5
> 
> 时间：2013-01-11T09:58:44.423
> 
> 标签：c

我正在开发一个在 gnu/linux 下分析时间序列的程序。要分析时间窗口，我希望能够在命令行上指定开始/结束时间。使用 strptime 解析日期很简单，但是我想使用灵活的“自然语言”格式，因为它由 unix ''date'' 命令使用。在那里，这是使用 parse_datetime 函数完成的。

我有 coreutils 的源代码，但想避免复制代码和所有附加的头文件。

我的问题是：在 Unix/Linux 下是否有一个标准库可以访问`parse_datetime()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:24:42.517

您引用的函数不是任何标准的一部分，也不是任何库存实用程序库。但是，它可以作为[gnulib](https://www.gnu.org/software/gnulib/)的一部分作为半独立组件使用，即[parse-datetime 模块](https://www.gnu.org/software/gnulib/MODULES.html#module=parse-datetime)。您需要将其纳入您的计划中；gnulib 发行版有相应的工具。请注意，如果您这样做，您必须对整个程序进行 GPL（如果该程序仅供您个人使用，这没什么大不了的 - GPL 的要求只有在您开始将编译后的程序提供给其他人时才会生效）。

一个可能的替代方案[`g_date_set_parse`](http://developer.gnome.org/glib/2.34/glib-Date-and-Time-Functions.html#g-date-set-parse)来自[GLib](http://developer.gnome.org/glib/2.34/)，但我不能说它有多聪明。

# dynamics-crm-2011 - 有关 Microsoft Dynamics CRM 2011 开发的书籍

> ID：14275642
> 
> 赞同：5
> 
> 时间：2013-01-11T09:58:53.237
> 
> 标签：dynamics-crm-2011

我正在寻找一本书，可以帮助我了解 Microsoft Dynamics CRM 2011 Online 和 On-Premise 的扩展和开发。

什么书最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:11:40.753

以下是一些可以指导您的链接：

*   [Microsoft Dynamics CRM 2011 一步一步](https://rads.stackoverflow.com/amzn/click/com/0735648905)

*   [Microsoft Dynamics CRM 2011 发布](https://rads.stackoverflow.com/amzn/click/com/0672335387)

你有一个很长[的](http://webcache.googleusercontent.com/search?q=cache:6rkGk3Qa5QQJ:blogs.msdn.com/b/crm/archive/2011/02/01/microsoft-dynamics-crm-2011-book-club.aspx%20&cd=4&hl=en&ct=clnk&client=ubuntu)书单

也许你可以看看[这里](http://www.wowebook.be/book/working-with-microsoft-dynamics-crm-2011/)。

> 配置、调整和扩展 Microsoft Dynamics CRM 2011 — 由该领域的两位领先实施专家指导。无论您是 IT 专业人士、**开发人员**还是高级用户，您都将获得在组织中自定义 CRM 的实用的、动手的见解——无论是否编程。

# jersey - Sencha touch 2~使用jersey添加、删除、更新一条数据记录

> ID：14275643
> 
> 赞同：0
> 
> 时间：2013-01-11T09:58:57.920
> 
> 标签：jersey, sencha-touch-2, add, updates

我是煎茶触摸的新手。我需要添加、更新数据记录详细信息。但我没有任何想法。这是我的示例代码

查看.js

```
 Ext.define('bluebutton.view.BlueButton.Loyalty', {
    extend: 'Ext.Container',
    xtype: 'loyaltycard',
       requires: [

    'bluebutton.view.BlueButton.TransactionList',
    'bluebutton.view.BlueButton.MemberPopUp',
     'bluebutton.view.BlueButton.MemberDetail',

    'Ext.ux.keypad.Keypad',
    'Ext.Img'

    ],
    config: {
//        iconCls: 'add_black',
//        title :'Loyalty Point',
        styleHtmlContent: true,
        cls: 'styledContent',
//        
         layout: 'hbox',
         border: 3,
         ui: 'round',
         defaults: {
                margin : '10 10 10 10',
                 padding : 10
             },

        items :[

           {
                flex: 1,
                cls :'containerRadious' ,
                xtype :'container',

                items :[
                    {
                         xtype: 'fieldset',
                        title: 'Welcome, new member ~<i><u>Kenny</u></i>',
                          defaults: {
                            labelWidth: '35%',
                            style: 'font-size:1.0em'
                        },
                        items: [
                            {

                                xtype: 'image',
                                src: 'resources/images/user3.png',
                                height: 100,
                                margin:20

                            },

                            {
                                xtype: 'textfield',
                                name : 'Name',
                                label: 'Name',
                                value :'Kenny Chow',
                                readOnly: true
                            },
                             {
                                xtype: 'textfield',
                                name : 'Age',
                                label: 'Age',
                                value :'20',
                                readOnly: true
                            },
                             {
                                xtype: 'textfield',
                                name : 'Point Available',
                                label: 'Point Available',
                                 value :'50',
                                 id :'pointAvalaible',
                                 readOnly: true
                            },
                             {
                                xtype: 'textfield',
                                name : 'Last Visited',
                                label: 'Last Visited',
                                value :'27/12/2012 11:53 AM',
                                readOnly: true
                            },
                            {
                                xtype:'button',
                                 text: 'Add',
                                 handler: function() {

                                 }

                            },

                            {
                                xtype:'button',
                                 text: 'Delete',
                                 handler: function() {

                                 }

                            },

                            {
                                xtype:'button',
                                 text: 'update',
                                 handler: function() {

                                 }

                            }

                        ]

                    }
                ]

            },

            {
                 flex: 2,
                 xtype :'container',
                  cls :'containerRadious' ,

                 items :[
                     {

                         centered : true,
                         xtype :'keypad',
                         margin : '30',

                     }

                 ]

            }

        ],

   }

}); 
```

模型.js

```
Ext.define('bluebutton.model.BlueButton.MemberList', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'memberModel',
        fields: [
            { name: 'memberId' },
            { name: 'name' },
            { name: 'messages' },
            { name: 'imgUrl' },
            { name: 'age' },
            { name: 'address' },
            { name: 'pointAvalaible' },
            { name: 'lastVisited' },

        ]
    }
}); 
```

Store.js

```
Ext.define('bluebutton.store.BlueButton.MemberList', {
    extend: 'Ext.data.Store',
   requires: [
//        'bluebutton.model.BlueButton.MemberList'
    ],

    config: {
        grouper: {
            groupFn: function (record) {
                return record.get('name')[0];
            }
        },

          proxy: {
                   type: 'ajax',
                   api: {
                     create : 'index.php?r=show/add',
                     read   : 'index.php?r=show/read',
                     update : 'index.php?r=show/update',
                     destroy: 'index.php?r=show/delete'
                   }
                },

           model :'memberModel',
           storeId :'memberStore',
           autoLoad:false,
           pageSize: 5,
           clearOnPageLoad: false, 

        data: [{
            memberId: 'Kenny',
            name: 'Kenny Chow',
            imgUrl: 'resources/images/user3.png',
            age: '20',
            address:'The Business Centre , 61 Wellfield Road , Roath, Cardiff, CF24 3DG',
            pointAvalaible :'10',
            lastVisited: '26/11/2012, 11:52 AM',

        }, {
            memberId: 'Anthony',
            name: 'Anthony Tan',
            imgUrl: 'resources/images/user3.png',
            age: '21',
            address:'3 Edgar Buildings , George Street , Bath , England , BA1 2FJ',
            pointAvalaible :'45',
            lastVisited: '27/11/2012, 09:52 AM'
        },

        {
            memberId: 'Nicholas',
            name: 'Nicholas Chen',
            imgUrl: 'resources/images/user3.png',
            age: '22',
            address: '91 Western Road , Brighton ,East Sussex ,England ,BN1 2NW ',
            pointAvalaible :'30',
            lastVisited: '30/11/2012, 15:52 PM'
        },

        {
            memberId: 'Admin2',
            name: 'Admin2',
            imgUrl: 'resources/images/user3.png',
            age: '30',
            address: '50 Eestern Road , Brighton ,West Sussex ,England ,BN1 34W ',
            pointAvalaible :'120',
            lastVisited: '01/12/2012, 15:52 PM'
        },

         {
             memberId: 'Ahmad',
             name: 'Ahmad Mohamad',
             imgUrl: 'resources/images/user3.png',
             age: '25',
              address:'Office 33 ,27 Colmore Row ,Birmingham, England ,B3 2EW',
                 pointAvalaible :'32',
              lastVisited: '30/11/2012, 18:52 PM'
         }
         ,

          {
             memberId: 'AronTan',
             name: 'Tan Wan Hua',
             imgUrl: 'resources/images/user3.png',
             age: '26',
              address:'Office 33 ,27 Colmore Row ,Birmingham, England ,B3 2EW',
                 pointAvalaible :'32',
              lastVisited: '30/11/2012, 18:52 PM'
         },

          {
             memberId: 'Justin',
             name: 'Wong Choon Wah',
             imgUrl: 'resources/images/user3.png',
             age: '25',
              address:'Office 33 ,27 Colmore Row ,Birmingham, England ,B3 2EW',
                 pointAvalaible :'32',
              lastVisited: '30/11/2012, 18:52 PM'
         },

          {
             memberId: 'User5',
             name: 'User2',
             imgUrl: 'resources/images/user3.png',
             age: '25',
              address:'Office 33 ,27 Colmore Row ,Birmingham, England ,B3 2EW',
                 pointAvalaible :'32',
              lastVisited: '30/11/2012, 18:52 PM'
         }

        ]
    }
}); 
```

请给我一些例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:26:46.133

我怀疑您需要开始使用 Jersey 来实现服务器端代码。
这是我的建议：

1.  开始**列出**您需要的服务。（添加/更新数据记录详细信息）
2.  **查看****mkyong的****[本](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)****教程**，了解Jersey 的入门。
3.  **实施第一个**有效的切割。
4.  **尝试**通过阅读有关 Jersey 功能（注释、POJO 映射、ExceptionMapper 等）的更多信息来改进和迭代

# jsf - Richfaces 数据表异常：java.io.NotSerializableException

> ID：14275647
> 
> 赞同：0
> 
> 时间：2013-01-11T09:59:04.793
> 
> 标签：jsf, richfaces

我正在使用 JSF 2.1、Richfaces 4.2.2，对于下面提到的代码，我得到了 java.io.NotSerializableException: org.richfaces.component.SavedState 异常。

Bean范围：会话

面码代码：

```
<rich:dataTable id="table" value="#{mapActivityGroup.addActivityGroupModelList}" 
      var="model">
    <rich:column>
        <h:selectBooleanCheckbox id="checkBox" value="#{model.selected}" />
    </rich:column>
    <rich:column filterValue="#{mapActivityGroup.categoryFilter}" 
                 filterExpression="#{fn:containsIgnoreCase(model.categoryName,
                 mapActivityGroup.categoryFilter)}" >
        <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Category" />
                <h:inputText value="#{mapActivityGroup.categoryFilter}">
                    <a4j:ajax render="table" execute="@this" event="blur" />
                </h:inputText>
            </h:panelGroup> 
        </f:facet>
        <h:outputText value="#{model.categoryName==null?'':model.categoryName}"/>
    </rich:column>
</rich:dataTable> 
```

例外：

```
java.io.NotSerializableException: org.richfaces.component.SavedState
    java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    java.util.HashMap.writeObject(HashMap.java:1100)
    sun.reflect.GeneratedMethodAccessor1947.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
    java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
    java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
    java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362) 
```

我用谷歌搜索但找不到任何实质性的东西。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:00:14.383

在 web.xml 中，我更改`javax.faces.STATE_SAVING_METHOD`为`server`并且它有效。

# google-app-engine - NDB tasklet 在 appstats 中不可见

> ID：14275660
> 
> 赞同：4
> 
> 时间：2013-01-11T09:59:37.947
> 
> 标签：google-app-engine, app-engine-ndb, appstats

为什么[appstats](https://developers.google.com/appengine/docs/python/tools/appstats)`@ndb.tasklet`中没有装饰方法的行号？

在我们的应用程序中，我们有一个约定，包括同步和异步版本的函数，例如：

```
def do_something(self, param=None):
    return self.do_something_async(param=param).get_result()

@ndb.tasklet
def do_something_async(self, param=None):
    stuff = yield self.do_something_else_async(stuff=param)
    # ...
    raise ndb.Return(stuff) 
```

…但是即使在设置`appegnine_config.appstats_MAX_STACK`为巨大的东西并清空`appengine_config.appstats_RE_STACK_SKIP`之后，appstats 中的报告仍然会在第一次`some_tasklet.get_result()`调用时留下我的应用程序代码。

这是来自 appstats 的示例：

![截屏](../Images/3ffb5ef8cd9d6c9ef9190272245f3f3d.png)

扩展的堆栈框架`learn.get_list_of_cards_to_learn()`只是简单地返回`self.get_list_of_cards_to_learn_async().get_result()`，这是一个 tasklet，它反过来又调用了一堆其他的 tasklet。然而，这些小任务在 appstats 中都不可见，我所看到的只是`ndb`内部。

我不确定`ndb`这些装饰器到底是如何执行的，但是如果我`pdb`在其中一个中添加跟踪并运行我的测试套件，我可以看到堆栈帧一直到`pdb`我放入 tasklet 的行，所以我不'不明白为什么appstats中没有。

一些请求会导致大量的 RPC 调用，但我不确定如何确定我的应用程序的哪个部分正在生成它们，因为我无法通过 appstats 中的第一个 tasklet 跟踪它。

有什么可能我需要微调的`appengine_config`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:42:05.517

这与 NDB 调度程序管理小任务的方式有关。您对此无能为力。

# collections - 在调用方法之前，Doctrine2 不会加载 Collection

> ID：14275661
> 
> 赞同：4
> 
> 时间：2013-01-11T09:59:38.570
> 
> 标签：collections, doctrine-orm, load, lazy-evaluation, arraycollection

Doctrine2 何时加载 ArrayCollection？
在我调用一个方法之前，比如 count 或 getValues，我没有数据
这是我的情况。我有一个与促销实体具有 OneToMany（双向）关系的委托实体，如下所示：

促销.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Promotion
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Delegation", inversedBy="promotions", cascade={"persist"})
     * @ORM\JoinColumn(name="delegation_id", referencedColumnName="id")
     */
    protected $delegation;
} 
```

委托.php

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class Delegation
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="Promotion", mappedBy="delegation", cascade={"all"}, orphanRemoval=true)
     */
    public $promotions;

    public function __construct() {
        $this->promotions = new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

现在我执行以下操作（使用给定的代表团）

```
$promotion = new Promotion();
$promotion = new Promotion();
$promotion->setDelegation($delegation);
$delegation->addPromotion($promotion);

$em->persist($promotion);
$em->flush(); 
```

在数据库中查找关系是可以的。我的促销行的delegation_id 设置正确。
现在我的问题来了：如果我要求 $delegation->getPromotions() 我得到一个空的 PersistenCollection，但如果我要求一个集合的方法，比如 $delegation->getPromotions()->count()，一切都是好的，从这里开始。我得到正确的号码。现在询问 $delegation->getPromotions() 之后我也正确获得了 PersistenCollection。
为什么会这样？Doctrine2 何时加载集合？

例子：

```
$delegation = $em->getRepository('Bundle:Delegation')->findOneById(1);
var_dump($delegation->getPromotions()); //empty
var_dump($delegation->getPromotions()->count()); //1
var_dump($delegation->getPromotions()); //collection with 1 promotion 
```

我可以直接要求promotions->getValues()，然后就可以了，但我想知道发生了什么以及如何解决它。

正如[流感](https://stackoverflow.com/users/601386/flu)[在这里](https://stackoverflow.com/questions/14261565/doctrine2-onetomany-manytoone-returns-empty-collection-with-database-ok/14261965#comment19820321_14261965)解释的那样， Doctrine2 几乎在任何地方都使用代理类进行延迟加载。但是访问 $delegation->getPromotions() 应该会自动调用相应的 fetch。
var_dump 得到一个空集合，但是在 foreach 语句中使用它，例如，它工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:28:56.467

调用`$delegation->getPromotions()`只检索未初始化的`Doctrine\ORM\PersistentCollection`对象。该对象不是代理的一部分（如果加载的实体是代理）。

请参阅 API[`Doctrine\ORM\PersistentCollection`](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/PersistentCollection.php)以了解其工作原理。

基本上，集合本身又是一个真正的包装的代理（在这种情况下是价值持有者），`ArrayCollection`它在调用任何方法之前一直是空的`PersistentCollection`。此外，ORM 会尝试优化您的集合被标记为`EXTRA_LAZY`这样的情况，即使您对其应用某些特定操作（如删除或添加项目），它也不会加载。

# r - 如何在函数中使用 lmer

> ID：14275664
> 
> 赞同：4
> 
> 时间：2013-01-11T09:59:45.317
> 
> 标签：r, lme4

我正在尝试编写一个函数来收集我在脚本中经常使用的一些调用我
在示例中使用 lme4 包的 sleepstudy 数据
这是我开始使用的函数的（简化版本）：

```
trimModel1 <- function(frm, df) {
  require(LMERConvenienceFunctions)
  require(lme4)

  lm<-lmer(frm,data=df)
  lm.trimmed = romr.fnc(lm, df)
  df = lm.trimmed$data
  # update initial model on trimmed data
  lm<-lmer(frm,data=df)
#   lm@call$formula<-frm
  mcp.fnc(lm)
  lm
} 
```

当我像下面这样调用这个函数时：

```
(fm1<-trimModel1(Reaction ~ Days + (Days|Subject),sleepstudy)) 
```

输出的前三行如下所示：

```
Linear mixed model fit by REML 
Formula: frm    
Data: df 
```

如果我在控制台中调用了 trimModel1 函数的命令，模型摘要的前三行如下所示：

```
Linear mixed model fit by REML 
Formula: Reaction ~ Days + (Days | Subject) 
   Data: sleepstudy 
```

区别是一个问题，因为使用 lme4 包的几个包都使用了公式和数据字段。例如，效果包使用这些字段，当我使用上面的 trimModel1 函数时，下面的命令将不起作用：

```
library(effects)
plot(allEffects(fm1)) 
```

我在 stackoverflow 和 R 讨论组上四处寻找解决方案，发现您可以更改模型的公式字段。如果取消注释`lm@call$formula<-frm`trimModel1 函数中的行，摘要中的公式字段将正确显示。不幸的是，当我现在从效果包中运行一个函数时，我仍然收到错误：

```
Error in terms.formula(formula, data = data) : 
  'data' argument is of the wrong type 
```

这是因为数据字段仍然不正确。
我发现的另一个可能的解决方案是这个函数：

```
trimModel2 <- function(frm, df) {
  require(LMERConvenienceFunctions)
  require(lme4)

  lm<-do.call("lmer",list(frm,data=df))
  lm.trimmed = romr.fnc(lm, df)
  df = lm.trimmed$data
  # update initial model on trimmed data
  lm<-do.call("lmer",list(frm,data=df))
  mcp.fnc(lm)
  lm
} 
```

当我现在在控制台中键入以下命令时，我没有收到任何错误：

```
(fm2<-trimModel2(Reaction ~ Days + (Days|Subject),sleepstudy))
plot(allEffects(fm2)) 
```

allEffects 函数有效，但现在的问题是 fm2 模型的摘要显示原始 sleepstudy 数据。这对于 sleepstudy 数据不是什么大问题，但是对于非常大的数据集，有时 Rstudio 在显示模型时会崩溃。
有谁知道如何使这些功能中的一个（或两个）正常工作？
我想我必须更改 fm1@call$data 字段，但我不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:39:01.313

像这样做：

```
trimModel1 <- function(frm, df) {
  require(LMERConvenienceFunctions)
  require(lme4)
  dfname <- as.name(deparse(substitute(df)))

  lm<-lmer(frm,data=df)
  lm.trimmed = romr.fnc(lm, df)
  df = lm.trimmed$data
  # update initial model on trimmed data
  lm<-lmer(frm,data=df)
  lm@call$formula <- frm
  lm@call$data <- dfname
  mcp.fnc(lm)
  lm
} 
```

从对象本身获取对象名称是“deparse-substitute 技巧”。

# mysql - 写入 Windows 文件系统

> ID：14275665
> 
> 赞同：-1
> 
> 时间：2013-01-11T09:59:47.823
> 
> 标签：mysql

是否可以创建一个能够写入 Windows 文件系统的查询？

我有一张表格，其中列出了属于待售产品的 jpg 图像。当我从表中删除项目时，我还想从磁盘中删除图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T23:08:26.640

MemSQL 不能在 Windows 上运行。您可以启动 Linux VM 或 Amazon AWS EC2 实例来尝试它。

# javascript - 如何在 td 中浮动 div

> ID：14275667
> 
> 赞同：0
> 
> 时间：2013-01-11T09:59:53.127
> 
> 标签：javascript, css, html, css-float, html-table

我有两页几乎相同的代码。两者都有这个 CSS 代码和两个 div：

```
<style type="text/css">
.visfarve { position:relative; float:left; padding:5px; border:1px solid #666; }
.farver { border:1px solid black; width:75px; height:10px; }
.valgtfarve { width:95px; height:15px; display:block; background-color:white; text-align:center; }
</style>

<div id="vis" style="display:block; font-size:11px;">
  <a href="javascript:colors(1);">Vis farver</a>
</div>
<div id="skjul" style="display:none; font-size:11px;">
  <a href="javascript:colors(0);">Skjul farver</a>
</div> 
```

然后一页有这个结构：

```
<table style="width:730px;">
  <tr>
    <td width="510px">
      <div id="visfarve" style="display:none; margin-top:11px;">&npsp;</div>
    </td>
    <td id="viser" style="border-radius:10px; width:220px; height:inherit"></td>
  </tr>
</table> 
```

另一个页面有这个障碍：

```
<div id="visfarve" style="display:none; margin-top:11px;">&nbsp;</div>
<div id="viser" style="margin-top:50px; border-radius:10px; display:none;">&nbsp;</div> 
```

他们共享这两个 js 函数：

```
var farve1 = ["3D3D34","463834","3F383D","433839","333F44","3B3B40","38413D","304344","483C33","313F48","37463B","35453F"];
var farve2 = ["S8505-Y20R","7812-Y87R","S8010-R30B","S8010-R10B","8108-R93B","8207-R38B","S8502-G","S8010-B30G","S8010-Y70R","S8010-R90B","S8010-G10Y","S8010-B90G"];

function colors(vis) {
  var setheight = 0;
  for(i=farve1.length-1;i>-1;i--) { skriv += "<div class='visfarve' onmouseover=\"document.getElementById('viser').style.background = '#" + farve1[i] + "';\" onmouseout=\"document.getElementById('viser').style.background = 'white';\" onclick='valgtfarve(\"" + farve2[i] + "\",\"#" + farve1[i] + "\");'><table><tr><td class='farver' title='Klik for at vælge' style='background-color:#" + farve1[i] + ";'></td></tr><tr><td><p>" + farve2[i] + "</p></td></tr></table></div>"; setheight += 10; }
  document.getElementById('visfarve').innerHTML = skriv;

  if(vis) { 
    document.getElementById('vis').style.display = "none";
    document.getElementById('skjul').style.display = "block"; 
    document.getElementById('visfarve').style.display = "block";
    document.getElementById('viser').style.display = "block";
    document.getElementById('viser').style.height = setheight + "px";
  }
  else {
    document.getElementById('vis').style.display = "block";
    document.getElementById('skjul').style.display = "none";
    document.getElementById('visfarve').style.display = "none";
    document.getElementById('viser').style.display = "none";
    document.getElementById('viser').style.height = 0 + "px";
  }
}

function valgtfarve(kode, farve) {
  if(!valgt) { 
    if(confirm("Tones en maling kan den ikke returneres.\nAccepter fraskrivelse af returret for tonet maling?")) { valgt = true; } 
    else {
      document.getElementById('vis').style.display = "block";
      document.getElementById('skjul').style.display = "none";
      document.getElementById('viser').style.height = "0px";
      document.getElementById('visfarve').style.display = "none"; return false;
    }}
  document.getElementById('valgtfarve').value = kode;
  document.getElementById('valgtfarve').style.backgroundColor = farve;
} 
```

当我使用 div 构造时，浮动 div 彼此相邻，每行有 5 个 div，并在达到容器 div 边缘时中断。但是，在 td 内部，div 坚持每个都具有 td 的全宽 - 导致每行只有一个 div。

如何在 td 中获取 div 以保持宽度和向左浮动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:55:27.437

让我们从一个 jsFiddle 链接开始：[这里](http://jsfiddle.net/QAnzu/2/)

我认为当你发布问题时这是一个很好的做法。

请解释问题出在哪里，在 jsfiddle 页面中我没有看到您的错误。

我只做了很少的修改，没有相关的代码更改。我只定义了变量

```
var skriv = ""; 
```

# php - 字符串到数据时间

> ID：14275673
> 
> 赞同：-2
> 
> 时间：2013-01-11T10:00:34.280
> 
> 标签：php, mysql

> **可能重复：**
> [将此字符串转换为日期时间](https://stackoverflow.com/questions/8063057/convert-this-string-to-datetime)

我必须将我的字符串值转换为日期时间。是否有任何 php 函数可以将 varchar 值转换为数据时间。我的值是这样的：

```
$a= "2013-Jan-12-(Sat) 03:30 PM"; 
```

我想将它转换为简单的日期时间。点赞：2013-1-12 15:30:45

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:04:29.487

$Date = new DateTime("13-Jan-12-(Sat) 03:30 PM")

应该做的伎俩。如果那不起作用，请查看 strtotime。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T10:04:12.260

可能是坐是问题尝试改变它或首先添加它，你可能会得到它。

# delphi - 随机化多个字符串列表

> ID：14275679
> 
> 赞同：3
> 
> 时间：2013-01-11T10:00:54.667
> 
> 标签：delphi, random, delphi-7

我想随机化一些字符串列表。

字符串列表都包含相同数量的项目，我希望对每个列表应用相同的随机播放。因此，如果`List1[0]`与 交换`List1[7]`，那么我想与所有列表交换`List2[0]`，`List2[7]`依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:14:22.903

我将考虑您有两个列表的情况。我将由您来概括处理两个以上列表的想法。使用有两个列表的最简单的情况可以最好地获得关键的理解。

我会这样解决问题：

1.  生成整数 0, 1, ... N-1 的排列。使用[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)来实现这一点。
2.  使用该排列来打乱两个列表。

关键是使用相同的排列来打乱两个列表。

```
type
  TIntegerArray = array of Integer;

procedure Swap(var i1, i2: Integer); overload;
var
  tmp: Integer;
begin
  tmp := i1;
  i1 := i2;
  i2 := tmp;
end;

function GeneratePermutation(Count: Integer): TIntegerArray;
//Fisher-Yates shuffle
var
  i, j: Integer;
begin
  SetLength(Result, Count);
  for i := 0 to Count-1 do
    Result[i] := i;
  for i := Count-1 downto 1 do begin
    j := Random(i+1);
    Swap(Result[i], Result[j]);
  end;
end;

procedure ApplyPermutation(List: TStringList; 
  const Permutation: TIntegerArray);
var
  i: Integer;
  Temp: TStringList;
begin
  Assert(List.Count=Length(Permutation));
  Temp := TStringList.Create;
  try
    Temp.Assign(List);
    for i := 0 to List.Count-1 do
      List[i] := Temp[Permutation[i]];
  finally
    Temp.Free;
  end;
end; 
```

然后你可以像这样申请你的情况：

```
Permutation := GeneratePermutation(List1.Count);
Apply(List1, Permutation);
Apply(List2, Permutation); 
```

这是一个非常通用的解决方案，可以扩展到两个以上的列表，并且可以应用于其他数据类型。如果您想要一个非常简短且简单的专用例程，那么您可以这样做：

```
procedure PermuteListsInTandem(List1, List2: TStringList);
var
  i, j: Integer;
begin
  Assert(List1.Count=List2.Count);
  for i := List1.Count-1 downto 1 do begin
    j := Random(i+1);
    List1.Exchange(i, j);
    List2.Exchange(i, j);
  end;
end; 
```

我正在努力为这个程序想一个好名字。任何人都可以通过提供更好的东西来帮助我吗？

# python - 在 Python 中使用 try、except 和 else

> ID：14275681
> 
> 赞同：1
> 
> 时间：2013-01-11T10:01:05.247
> 
> 标签：python

我正在处理这些 try/except/else 语句，但我遇到了问题。

我想写一个这样的代码：

```
try:
   ...
except:
   ...
else:
   ...
else:
   ... 
```

但我知道连续放置 2 个“else”是不可能的。
我尝试了“elif”，但我读到它在“except”中不起作用。它没有用。
那么我该怎么做才能做出 2 条或多于 2 条的“其他”声明呢？

谢谢 ！朱利安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T10:04:29.130

你永远不需要两个 else 块。如果您需要在 中进一步区分`else`，请执行以下操作：

```
try:
    ...
except:
    ...  
else:
    if condition:
        ...
    else:
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:03:20.237

为什么不简单地将所有东西放在另一个分支中呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:04:51.793

```
try:
   ...
except:
   ...
else:
    if:
    ...
    elif:
    ...
    else:
    ... 
```

如果您的操作取决于您得到的异常：

```
try:
   ...
except FirsException:
   #handle_first_one()

except SecondException:
   #handle_second_one() 
```

# java - 给定java Map中的值获取索引或键

> ID：14275685
> 
> 赞同：0
> 
> 时间：2013-01-11T10:01:13.537
> 
> 标签：java, map

给定该值，我需要获取该值在 Map 中所属的索引或键，而无需对其进行迭代。我正在使用java。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:06:43.797

Guava 有一个[BiMap](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)，它是一个双向映射（每个键和每个值都是唯一的）。

如果您不想使用外部库，则只有 2 个选项：

*   使用普通的`HashMap`，您将需要遍历键
*   使用 2 个 hashmap，一个将键关联到值，一个将值关联到键（本质上是双向映射所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:03:56.347

您总是可以使用来自 commons-collections 的 BidiMap：

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/BidiMap.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/BidiMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:06:34.307

你必须使用某种`BidirectionalMap`. 例如这个：[http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:03:39.783

你不能不迭代。

此外，该值可能属于*多个*键，因此您的问题有些没有实际意义。

* * *

如果键/值之间存在一对一的关系，您可以通过使用两个映射来做到这一点 - 一个用于关系的每个方向 - 并将值查找为第二个（反向）映射的键。

# batch-file - 批处理文件提示用户输入，然后执行另一个 bat 文件

> ID：14275686
> 
> 赞同：0
> 
> 时间：2013-01-11T10:01:15.900
> 
> 标签：batch-file

我想设置一个 bat 文件，要求用户选择选项 1 或选项 2。然后创建另外两个 bat 文件以在选择任一输入时运行。

所以最初的 bat 文件会要求用户选择什么 Theatre

1) 剧院 1
2) 剧院 2

然后是 bat 文件来运行相关的 bat 并选择 select

剧院1.bat 或剧院2.bat

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:07:59.180

```
@echo off
set /p option=Enter either option 1 or option 2 (1/2):
if %option%==1 (
call theater1.bat
) else (
if %option%==2 (
call theater2.bat
) else (
echo Invalid option entered
)
)
pause >nul 
```

# java - 拒绝Spring Security中具有相同角色的多个用户的访问

> ID：14275687
> 
> 赞同：1
> 
> 时间：2013-01-11T10:01:20.683
> 
> 标签：java, spring, security, spring-mvc, spring-security

我遇到过这样的情况：我的应用程序有几个角色（管理员、版主、用户）。版主和用户可以编辑一些表格。所有权限都可以。但是，当我以用户（角色用户）身份登录并更改 url 中的 id 时，我可以简单地获取和编辑另一个用户（角色用户）的表单。

如何拒绝访问并防止此类行为？

附言。spring和spring security的版本是3.1.2

更新 - 添加了 Spring 安全上下文

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/security
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http use-expressions="true" auto-config="false"
        entry-point-ref="authenticationEntryPoint" access-denied-page="/403.jsp">
        <form-login login-page="/login.html"
            authentication-failure-url="/login.html?error=true"
            login-processing-url="/j_spring_security_check"
            authentication-success-handler-ref="successHandler" />
        <logout logout-url="/logout" logout-success-url="/login.html" />
        <intercept-url pattern="/admin/**" access="hasRole('adminViewPermission')" />
        <intercept-url pattern="/moderator/**" access="hasRole('moderatorViewPermission')" />

        <intercept-url pattern="**/form-management"
            access="hasRole('formManagementPermission')" />

    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="userDetailsService" />
    </authentication-manager>

    <beans:bean id="authenticationEntryPoint"
        class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
        <beans:property name="loginFormUrl" value="/login.html" />
        <beans:property name="forceHttps" value="false" />
    </beans:bean>

    <beans:bean id="successHandler"
        class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
        <beans:property name="defaultTargetUrl" value="/authenticate" />
        <beans:property name="alwaysUseDefaultTargetUrl" value="true"/>
    </beans:bean>

    <beans:bean id="userDetailsService"
        class="com.jack.MyYserDetailsService">
    </beans:bean>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:45:29.603

看起来您想为您的安全规则考虑实际的域对象。具有用户和角色的普通 SpringSecurity 设置可以添加如下安全规则：谁（具有某些角色的认证用户）可以访问某些 URL/方法调用。如果您希望能够使用这样的增强规则：谁（具有某些角色的认证用户）可以访问某些 URL/方法调用**以及他可以使用哪些域对象，**那么您需要使用[ACL 功能](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)。

**编辑。**但是，如果您**只需要一个**这样的安全规则，那么设置 ACL 可能有点过头了。您可以尝试通过自定义 Web 安全表达式来增强您的实际 SpringSecurity 设置：

```
<intercept-url pattern="/moderator/**" access="hasRole('moderatorViewPermission') and userIsAuthor()" /> 
```

您的**userIsAuthor()**方法将在哪里：

*   从 URL 中提取对象的 id（我想类似于**/moderator/item/56**）
*   检查当前用户是否是项目 id = 56 的作者。

# c# - 方法没有重载

> ID：14275690
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:01:33.937
> 
> 标签：c#, class, methods, constructor

你好，这是我在 Stacloverflow 上的第一篇文章。当我尝试在下面运行此代码时，出现错误`no overload for method 'beräkna' takes 0 arguments`。错误在`button1`. 我该如何解决？

该代码应根据用户`textBox1`单击按钮时注册的出生登记号计算用户的年龄`button1`。

```
 private void Form1_Load(object sender, EventArgs e)
    {

    }

    //4A Konstruera en klass som ska användas för att beskriva personer (människor). Definiera både
    // klassnamnet och deklarera 8-10 lämpliga medlemmar.
    class människor
    {
        string förnamn, efternamn, hårfärg, ögonfärg, ursprung;
        int personnummer, ålder, skostorlek;
        double längd;

        public människor()
        {
            personnummer = 19910611;

        }
    }
    // 5D Deklarera och konstruera kod för en metod som beräknar ålder för en person utifrån
    // personnumret. Åldern ska returneras som hela antal år.
    public void beräknaÅlder(int personnummer)
    {

        beräkna(personnummer);

    }
    //5E Skriv om metoden ovan så att själva åldersberäkningen görs i en gömd (privat) metod som
    // metoden i d) använder sig av internt.
    private void beräkna(int personnummer)
    {

       int personnr = personnummer;

      bool flagCheck = true;
      if (flagCheck == true)
      {

          int personnummer2 = int.Parse(textBox1.Text);
          string nyttpersonnummer = personnummer2.ToString();
          DateTime oldDateTime = new DateTime();
          oldDateTime = DateTime.ParseExact(nyttpersonnummer, "yyyyMMdd", null);
          // DateTime.Now - personnumer;
          TimeSpan elapsed = DateTime.Today.Subtract(oldDateTime);
          double ålder = elapsed.TotalDays / 365.25;
          double helålder = Math.Floor(ålder);
          richTextBox1.Text = ("Din ålder är " + helålder.ToString());
      }
      else if (flagCheck == false)
      {
          richTextBox1.Text = ("Din ålder är " + personnr);
      }
        }

    private void button1_Click(object sender, EventArgs e)
    {

        beräkna();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:03:46.677

您没有定义*一个不需要*`beräkna`至少一个参数参数的命名方法。您拥有的签名指定需要一个整数，. 编译器不能神奇地为你生成这个值（并且在这种情况下不能忽略，好像是可选的），你应该提供它。*`personnummer`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:04:14.430

你打电话`beräkna`没有任何争论。但这并没有重载。您应该`personnummer`用作参数。

尝试使用`int`参数；

```
private void beräkna(int personnummer) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:04:33.327

您在没有参数的情况下调用`beräkna`，但没有参数它没有重载。所以你必须通过`personnummer`.

```
beräkna(19910611); 
```

您可以使用此代码计算某人的年龄（以年为单位）：

```
DateTime today = DateTime.Today;
DateTime birthDate;
if (DateTime.TryParseExact(personnummer2.ToString(), "yyyyMMdd", null, DateTimeStyles.None, out birthDate))
{
    int age = today.Year - birthDate.Year;
    if (birthDate > today.AddYears(-age)) age--;
    // output 
} 
```*

# java - 在自定义 JSF 验证器中格式化消息

> ID：14275695
> 
> 赞同：1
> 
> 时间：2013-01-11T10:01:55.847
> 
> 标签：java, validation, jsf, jsf-2, custom-component

我正在实现一个自定义验证器。存储在资源中的消息的详细信息。下面是一个消息示例：`Value is required for {0}`。{0} 应包含组件的标签。

```
@FacesValidator("customValidator")
public class CustomValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
    if (validatorCondition()) {
            String summary = Res.getString("error");
            String detail =  ... format detail here
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, summary, detail));
        } 
    }
} 
```

如何格式化验证方法中显示的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:26:08.670

使用[`MessageFormat#format()`](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html#format%28java.lang.String,%20java.lang.Object...%29).

```
String template = "Value is required for {0}.";
String label = component.getAttributes().get("label"); // Don't forget to handle nulls. JSF defaults to client ID.
String message = MessageFormat.format(template, label);
// ... 
```

# java - 关闭全屏广告时的android admob顶部广告请求

> ID：14275697
> 
> 赞同：1
> 
> 时间：2013-01-11T10:02:02.403
> 
> 标签：java, android, admob

当**插页式广告（全屏广告）**被关闭时，我需要启动**热门广告请求。****为Top Ad**设置 adlistener 时代码崩溃。我该如何解决？谢谢你。

 ****```
Intersticial is requested on onCreate,
interstitial = new InterstitialAd(this, ID_for_my_App);
AdRequest adRequest = new AdRequest();
interstitial.loadAd(adRequest);
interstitial.setAdListener(this); 
```

关闭时，应请求**Top Ad但崩溃，**

```
 @Override
      public void onDismissScreen(Ad ad) 
      {
        interstitial.setAdListener(null);
         adMob.setAdListener(this);
         AdRequest adRequest = new AdRequest();
         adMob.loadAd(adRequest);
      } 
```****

# iphone - 如何开始构建语音聊天应用 iPhone？

> ID：14275699
> 
> 赞同：2
> 
> 时间：2013-01-11T10:02:19.857
> 
> 标签：iphone, chat, sip, voip, voice

我想为 iphone 构建语音聊天应用程序。

浏览和搜索后，我得出结论，要制作语音聊天应用程序，我必须使用 VOIP/SIP 协议。

所以我的问题是，

1.  是否需要使用 VOIP/SIP 协议进行语音聊天？如果是，那么我如何在我的应用程序中使用 VOIP/SIP？是否有任何教程或博客可以逐步解释实施？

2.  如果不需要使用 VOIP/SIP，那么开发聊天应用程序的替代方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:54:15.760

没有必要使用 SIP。SIP 是使您能够创建任何类型的多媒体会话的总括标准之一，但是使用 SIP，您还必须实现许多其他事情 - 使用 SDP（会话描述协议）的提供/应答模型，使用 RTP（Real时间协议）用于实际的语音传输，可能是用于面向会话的消息传递的 MSRP（消息会话中继协议），然后可能会查看存在性和 SIP/SIMPLE 下的所有标准。

现在您不必全部完成，这完全取决于您想要做什么以及您想要与之交互的其他客户端和 3rd 方服务器的数量和类型。查看[现有的免费 SIP 软件](http://en.wikipedia.org/wiki/List_of_SIP_software)，看看什么对您有意义。

或者看看更适合聊天和在线状态需求的 XMPP。具体看看[Jabber](http://www.jabber.org/)，看看这是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T14:00:29.540

您不需要使用 SIP。例如，ConnectyCube 视频解决方案基于 XMPP 进行聊天和信令以在通话前建立连接，以及基于 WebRTC 标准进行视频通话。您可以查看[代码示例](https://developers.connectycube.com/ios/code-samples)以了解它们是如何在 iOS 上实现的。

要尝试该解决方案，您可以注册一个免费帐户。如果它适合您，您可以使用他们的 SDK 来加快开发速度。使用带有 SDK 的现成后端的好处还在于，您无需担心设置 STUN/TURN 服务器来路由视频通话。他们有一个您可以使用的共享。

# log4j - log4j.RollingFileAppender 不压缩文件

> ID：14275701
> 
> 赞同：2
> 
> 时间：2013-01-11T10:02:32.837
> 
> 标签：log4j, zipfile, rollingfileappender

如何在 log4j 中压缩备份文件`RollingFileAppender`

我有以下**log4j.properties**文件，虽然超过了大小限制，但它正在创建备份文件但不压缩它。

```
log4j.appender.request=org.apache.log4j.RollingFileAppender
log4j.appender.request.File=${catalina.home}/webapps/Sample/WEB-INF/logs/FAW_l4j.log
log4j.appender.request.MaxFileSize=10KB
log4j.appender.request.MaxBackupIndex=3
log4j.appender.request.RollingPolicy.ActiveFileName =${catalina.home}/webapps/Sample/WEB-INF/logs/FAW_l4j.log-%d.log.
log4j.appender.request.RollingPolicy.FileNamePattern=${catalina.home}/webapps/Sample/WEB-INF/logs/FAW_l4j.log-%d.log.zip
log4j.appender.request.layout = org.apache.log4j.PatternLayout
log4j.appender.request.layout.ConversionPattern=%d %p [%c{3}] - [%t] - %X{ip}: %m%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:39:57.437

我已经使用[logj extras](http://logging.apache.org/log4j/companions/extras/index.html)完成了这项工作。只需使用以下内容配置您的 RollingFileAppender 配置，并以 .gz 结尾的文件名将压缩您的日志文件：

```
<appender...>
    <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
      <param name="FileNamePattern" value="/wombat/foo.%d{yyyy-MM}**.gz**"/>
    </rollingPolicy>
</appender> 
```

# java - 如何使用 servlet 的 web.xml 查找上次登录 Web 应用程序的用户

> ID：14275703
> 
> 赞同：0
> 
> 时间：2013-01-11T10:02:46.957
> 
> 标签：java, jsp, servlets, web.xml

是否可以仅在 web.xml 的帮助下向当前登录 jsp-servlet Web 应用程序的用户显示以前的用户名，如果是，那么如何。

我有一个基于 jsp-servlet 的 Web 应用程序，我想向当前用户（对于 eq：userB）显示上一个登录网站的上一个用户（例如 userA）。

例如：userA 登录时间 = 00:00:10 userA 注销时间 = 00:05:10 现在 userB 已登录，我想仅在 web.xml 的帮助下将欢迎页面显示为“Hello userB，最后一个用户是 userA”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:14:09.817

不，那是不可能的。您必须以某种方式跟踪 http 会话或支持数据库中的登录用户。

# javascript - 如何将数组的每个内容存储在cookie中

> ID：14275707
> 
> 赞同：0
> 
> 时间：2013-01-11T10:03:00.437
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 jquery cookie 中存储数组？](https://stackoverflow.com/questions/1959455/how-to-store-an-array-in-jquery-cookie)

如何在javascript中将数组的每个内容存储在cookie中，并且我必须检索数组的所有术语？我试过了，但我无法从 cookie 中取回项目....

我的代码在我试过的下面

```
var myArray=["123","234","32"];
$.cookie('myCookie', escape(myArray), { expires: 1});
var s = unescape($.cookie('myCookie'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:08:07.490

使用 JQuery，您可以使用序列化函数检索字符串中的所有数据：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:18:45.127

要在 JavaScript 中创建 cookie，您必须将字符串分配给`document.cookie`.

它采用某种`name = value`格式的值，例如

```
document.cookie = 'data=hello; max-age=60; path=/; domain=yoursite.com'; 
```

在此处存储数组的最佳方法是使用[JSON](http://www.w3schools.com/json/default.asp)和方法[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
var arr = ['hello', 'goodbye', 'au revoir'];
document.cookie = 'data=' + escape(JSON.stringify(arr)) + '; max-age=60; path=/; domain=yoursite.com' 
```

（注意 cookie 必须 <= 4KB）

检索 cookie 有点困难，因为它是一个字符串，所以我借用了这个函数，它在字符串中搜索你的 cookie 名称，然后返回它的值：

```
// Source: http://www.thesitewizard.com/javascripts/cookies.shtml

function get_cookie ( cookie_name )
{
    var cookie_string = document.cookie ;
    if (cookie_string.length != 0) {
        var cookie_value = cookie_string.match (
                        '(^|;)[\s]*' +
                        cookie_name +
                        '=([^;]*)' );
        return decodeURIComponent ( cookie_value[2] ) ;
    }
    return '' ;
} 
```

在我们的示例中，您将像这样使用它：

```
var cookie = get_cookie('data');
var arr = JSON.parse(cookie); // Convert JSON string back into array 
```

注意我使用[JSON.parse()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)将 JSON 字符串转换回 JavaScript 数组。

有关在 JavaScript 中使用 cookie 的更多信息，我建议您阅读：[http ://www.thesitewizard.com/javascripts/cookies.shtml](http://www.thesitewizard.com/javascripts/cookies.shtml)

# java - 将值从 Servlet 传递到 WebLogic 中的 JSF Action 方法

> ID：14275732
> 
> 赞同：2
> 
> 时间：2013-01-11T10:04:02.953
> 
> 标签：java, jsf, servlets, weblogic, jsf-1.2

我正在尝试将`Object`from传递给 JSF 的`Servlet`action方法。但我无法做到这一点。`doPost()``Managed bean`

我试图将值设置`Servlet`为：

```
request.getSession().setAttribute(key, "JYM"); 
```

并尝试将其检索`Managed bean`为：

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get(key) 
```

它正在回归`null`。

这也是`null`从`Managed bean`：

```
((HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest()).getSession().getAttribute(key); 
```

也`Managed bean`由此返回`null`：

```
((HttpSession)FacesContext.getCurrentInstance().getExternalContext().getSession(false)).getAttribute(key) 
```

我将密钥传递为：

```
'${pageContext.request.contextPath}/uploadservlet;jsessionid=${pageContext.session.id}?key=<h:outputText value="#{uploadBean.key}" />' 
```

`uploadBean`是的名称`Managed bean`和`key`生成为：

```
key = UUID.randomUUID().toString(); 
```

在`key`Servlet 和托管 bean 中都保持不变。我打印的是检查。

我怎样才能传递`Object`from`Servlet`到`Action`？任何指针都会非常有帮助。

## 更新

在`Managed bean`会话范围内。

## 更新

通过使用`ServletContext`我能够传递值：

这是我所做的： 在 Servlet 中：

```
String key = request.getParameter("key");

if (getServletContext().getAttribute(key) == null) {
    List<FileItem> fileFields = new ArrayList<FileItem>();
    fileFields.add(fileField);
    getServletContext().setAttribute(key, fileFields);
} else {
    List<FileItem> fileFields = (List<FileItem>)getServletContext().getAttribute(key);
    fileFields.add(fileField);
} 
```

从会话范围的bean：

```
ServletContext servletContext = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext());
List<FileItem> fileFields = (List<FileItem>)servletContext.getAttribute(key);
servletContext.setAttribute(key, null); 
```

现在`fileFields`不再为空。我理解的是`ServletContext`行为类似于 Application Scoped 变量。

## 更新

`HttpSessionListener`的实现：

这是我写的课程：

```
public class UploadListener implements HttpSessionListener {
    private HttpSession session = null;

    public void sessionCreated(HttpSessionEvent event) {
        session  = event.getSession();
        session.setMaxInactiveInterval(10);
    }

    public void sessionDestroyed(HttpSessionEvent event) {
        session  = event.getSession();
        Set<String> keys = (Set<String>) session.getAttribute("key");
        Map<String, Object> data = (Map<String, Object>) session.getServletContext().getAttribute("key");
        data.keySet().removeAll(keys);
    }
} 
```

我将值设置`ServletContext`为：

```
String key = request.getParameter("key");

List<FileItem> fileFields = (List<FileItem>)getServletContext().getAttribute(key);

if (fileFields == null) {
    fileFields = new ArrayList<FileItem>();
    getServletContext().setAttribute(key, fileFields);
}

fileFields.add(fileField); 
```

这就是我调用 Servlet: 的方式`'${pageContext.request.contextPath}/uploadservlet?key=<h:outputText value="#{uploadBean.key}" />'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T14:47:24.380

如果 servletcontainer 不支持通过`jsessionid`URL 片段识别 HTTP 会话，则此构造将失败。这是默认支持的，但可以通过 servletcontainer 特定配置来关闭它。到目前为止，不幸的是，您的 Weblogic 服务器似乎是这样配置的。

您最好的选择是在应用程序范围内交换数据。的随机性`UUID`足够强，不会引起冲突。您只需要确保在销毁会话时清除与会话相关的数据。否则内存会泄漏。为此，您可以使用[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html). 如果您将密钥存储在应用程序范围（引用共享数据）和会话范围（引用到目前为止使用的所有密钥）中，那么`sessionDestroyed()`实现可以如下所示：

```
public void sessionDestroyed(HttpSessionEvent event) {
    Set<String> keys = (Set<String>) event.getSession().getAttribute("keys");
    Map<String, Object> data = (Map<String, Object>) event.getSession().getServletContext().getAttribute("data");
    data.keySet().removeAll(keys);
} 
```

* * *

**根据您的更新**进行更新，获取/设置它们的更优雅的方法是：

```
String key = request.getParameter("key");
List<FileItem> fileFields = (List<FileItem>) getServletContext().getAttribute(key);

if (fileFields == null) {
    fileFields = new ArrayList<FileItem>();
    getServletContext().setAttribute(key, fileFields);
}

fileFields.add(fileField); 
```

和

```
List<FileItem> fileFields = (List<FileItem>) FacesContext.getCurrentInstance().getExternalContext().getApplicationMap().remove(key);
// ... 
```

# php - 混合普通和 httponly cookie

> ID：14275742
> 
> 赞同：1
> 
> 时间：2013-01-11T10:04:41.360
> 
> 标签：php, cookies, httponly

我正在使用 PHP`setcookie`设置普通 cookie，然后使用 httponly 设置一个。看来这行不通。该`setcookie`函数返回成功，但 cookie 未设置在`$_COOKIE`.

是否可以混合使用普通和 httponly cookie？

更新

是的，它有效。

谢谢鲁迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:24:21.157

如评论中所述，如果您通过 PHP 阅读它们，混合非 httponly 和 httponly cookie 根本不是问题，因为 PHP 显然需要处理 HTTP 请求，因此将照常接收 cookie，不管它的`HttpOnly`标志是什么.

以下测试用例可以证明这一点（打开和刷新）：

```
<?php 
echo '<pre>'; 
var_dump($_COOKIE); 
echo '</pre>'; 

setcookie('TestNonHttpOnly', 'True', time() + 3600, '/', '.example.com', false, false); 
setcookie('TestHttpOnly', 'True', time() + 3600, '/', '.example.com', false, true); 
```

（[可现场测试](http://rudiv.se/stack/cookie.php)）

# datetime - 日期项目错误，夏令时

> ID：14275752
> 
> 赞同：0
> 
> 时间：2013-01-11T10:05:09.713
> 
> 标签：datetime, xpages

重新计算 1981 年之前的输入控件中的夏季日期（我认为是夏令时）。

例如，我输入 27.8.1960 - 保存后我得到 26.8.1960，（下一次保存后 25.8.1960 等等）但是 27.8.2010 - 保存后它保持不变：27.8.2010

“冬季日期”：27.4.1960 - 保存后保持不变：27.4.1960

看起来像一个丑陋的错误。我怎样才能抑制这种“计算”？

（日期格式是欧洲，我住在德国。27.8.1960 是 1960 年 8 月 27 日）

感谢您的帮助，Uwe

```
<xp:inputText value="#{Auftrag.MF_GebDatum}" id="mF_GebDatum1" style="width:255px">
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
</xp:inputText> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:33:54.347

The problem you are fighting with is that Domino stores a datetime value with the daylight saving information which does not exists for the dates you are entering. The information for the timezone to use comes from the current user locale and / or the server.

Your date is stored in a field with the timezone it was *entered* (+2h GMT)

```
26.08.1960 00:00:00 CEDT 
```

Domino interprets the stored value as it is, without adjusting it

```
var ndt:NotesDateTime = session.createDateTime("26.08.1960 00:00:00 CEDT");
ndt.getGMTTime() 
```

returns the correct datetime value, adjusted by 2 hours for GMT

```
25.08.60 22:00:00 GMT 
```

While converted back to Java, it is interpreted "correctly" that there was never a daylight saving time in 1960, that's why it will be adjusted only by 1 hour:

```
var ndt:NotesDateTime = session.createDateTime("26.08.1960 00:00:00 CEDT");
ndt.toJavaDate().toLocaleString() 
```

will result in "25.08.1960 23:00:00" if you are in the CEDT timezone.

Currently the only idea I have for an easy workaround is to kill the Timezone information in the DateTime field. To do this you can use this SSJS script:

```
<xp:this.querySaveDocument>
   <![CDATA[#{javascript:
      var doc:NotesDocument = document1.getDocument( true );
      var items:java.util.Vector = doc.getItems();
      var item:NotesItem;
      var ndt:NotesDateTime;
      var dt:java.util.Date;

      for( var i=0; i<items.size(); i++){
         item = items.get(i);
         if( item.getType() === 1024 ){
            ndt = item.getValueDateTimeArray().get(0);  
            ndt = session.createDateTime( ndt.getDateOnly());
            item.setDateTimeValue( ndt );
            ndt.recycle();
         }
         item.recycle();
      }
   }]]>
</xp:this.querySaveDocument> 
```

# wpf - 带有图像的 WPF 按钮触发鼠标悬停以更改图像

> ID：14275755
> 
> 赞同：2
> 
> 时间：2013-01-11T10:05:25.840
> 
> 标签：wpf, button, triggers, mouseover, styling

我有一个这样的按钮

```
 <Button Content="Add">
                <Button.Style>
                    <Style TargetType="{x:Type Button}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <StackPanel Orientation="Horizontal">
                                    <Image x:Name="image" Source="../Resources/Images/Icons/Pruefplan_Add_32_gray.png" Margin="8" />
                                        <TextBlock  x:Name="text" Text="ADD" Margin="3,0,3,0" VerticalAlignment="Center"></TextBlock>
                                    </StackPanel>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter TargetName="image" Property="Source" Value="../Resources/Images/Icons/Pruefplan_Add_32.png" />
                                            <Setter TargetName="text" Property="Opacity" Value=".5" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button> 
```

这个按钮有一个样式和一个触发器来改变鼠标悬停上的图像。一切正常。但我想为按钮使用全局资源。

```
 <Style x:Key="ButtonsMenue1" TargetType="{x:Type Button}">
    <Setter Property="Background" Value="#02FFFFFF" />

    <Setter Property="HorizontalContentAlignment" Value="Center" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Padding" Value="1" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="Template">

        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">

                <Grid Background="{TemplateBinding Background}">

                    <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                              Margin="10"
                                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                              RecognizesAccessKey="True"
                                                              TextBlock.FontFamily="Segoe WP Light"
                                                              TextBlock.Foreground="Black"
                                                              TextBlock.FontSize="14"

                                                              />

                    <Rectangle x:Name="border" 
                                                           SnapsToDevicePixels="True"
                                                           IsHitTestVisible="False" 
                                                           Opacity="0.25"
                                                           Width="10" Height="20" VerticalAlignment="Stretch" HorizontalAlignment="Right" 
                                                           Fill="DarkGray" Margin="15,0,0,0" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="contentPresenter" Property="Opacity" Value="1" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="contentPresenter" Property="Opacity" Value=".5" />
                    </Trigger>
                    <Trigger Property="IsKeyboardFocused" Value="true" />
                    <Trigger Property="ToggleButton.IsChecked" Value="true" />
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="White" />
                    </Trigger>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource PreviousData}}" Value="{x:Null}">
                        <Setter TargetName="border" Property="Rectangle.Width" Value="2"/>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>

</Style> 
```

我知道我可以使用

```
 <Style TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonsMenue1}"> 
```

但它不会显示例如我的矩形作为分隔符。而且看起来不太好。你有一个不错的解决方案吗？美好的愿望

曼努埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:14:25.497

不幸的是，您不能继承`ControlTemplate`. 您为继承样式定义的模板将覆盖您为基本样式定义的模板。

如果你想使用一个基本模板然后想修改它，你必须找到一种方法来使用属性。您将不得不定义一个具有 DependencyProperty 的自定义控件来处理特殊要求。就像是：

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonsMenue1}">
    <Setter Property="ImageForMouseOver" Value="..." />
</Style> 
```

# asp.net - 在 VB.net 中的 UltraGrid 中更改特定 OutlookGroupBy 组中的行颜色

> ID：14275756
> 
> 赞同：0
> 
> 时间：2013-01-11T10:05:38.433
> 
> 标签：asp.net, vb.net, infragistics

我正在使用超网格，在里面我有从数据库加载到数据表中的值。在我的网格中，我使用 OutlookGroupBy 代码将行分组。我在网格中的行分为两类。优先级 1 和 0。我希望在加载数据时，优先级为 1 的行变为红色，而优先级为 0 的其他行变为正常颜色。

我以语法方式使用 ultragrid，所以我没有在编辑器中使用它的任何功能。

这是我如何初始化网格以及如何从另一个类从数据库加载：

```
 Dim dt As DataTable = Nothing

        Timer1.Enabled = True
        UltraGrid1.DataSource = Nothing
        Generic.openOrders(dt)
        UltraGrid1.DataSource = dt

        Dim band As Infragistics.Win.UltraWinGrid.UltraGridBand = UltraGrid1.DisplayLayout.Bands(0)
        UltraGrid1.DisplayLayout.ViewStyleBand = Infragistics.Win.UltraWinGrid.ViewStyleBand.OutlookGroupBy
        band.SortedColumns.Add(band.Columns("PRIORITY"), True, True)
        band.SortedColumns.Add(band.Columns("ORDERID"), False, True)
        band.SortedColumns.Add(band.Columns("ORDERTIME"), False, True) 
```

任何人都知道如何将行颜色更改为优先级 1 子行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:09:12.260

您可以尝试使用这种方法：

首先，您需要订阅事件`InitializeRow`，因此由设计器或代码添加（例如，在 Form_Load 中或在设置网格的 DataSource 之前）

```
grd.InitializeRow += new InitializeRowEventHandler(grd_InitializeRow); 
```

然后，在事件中，编写这样的代码

```
private void grd_InitializeRow(object sender, InitializeRowEventArgs e)
{
    if(e.Row.Band.Index == 1)
    {
         if(Convert.ToInt32(e.Row.Cells["PRIORITY"].Value) == 1)
              e.Row.Appearance.BackColor = Color.LightGreen;
    }
} 
```

请记住，如果您已设置`CellAppearance`它们将具有优先级，`RowAppearance`并且如果您有很多行，最好初始化一个`Appearance`对象，将其存储在`grid.DisplayLayout.Appearances`集合中并为所涉及的每一行重用相同的对象。

**此外，始终以提高性能为目的，**要获得单元格值，最好使用`GetCellValue`行的方法。这将避免创建一个完整的 Cell 对象只是为了检索它的值。事情有点复杂，因为您需要的`UltraGridColumn`不仅仅是列的名称，而是在 InitializeRow 事件中，为每一行触发，这是很少的代价。

```
private void grd_InitializeRow(object sender, InitializeRowEventArgs e)
{
    if(e.Row.Band.Index == 1)
    {
         UltraGridColumn priorityColumn = e.Row.Band.Columns["PRIORITY"];
         if(Convert.ToInt32(e.Row.GetCellValue(priorityColumn)) == 1)
              e.Row.Appearance.BackColor = Color.LightGreen;
    }
} 
```

**编辑：** VB.NET 中的相同代码

```
....
AddHandler grd.InitializeRow, AddressOf Me.grd_InitializeRow
....

Private Sub grd_InitializeRow(sender As System.Object, e As InitializeRowEventArgs)
    If e.Row.Band.Index = 1 Then
        Dim priorityCol As UltraGridColumn = e.Row.Band.Columns("PRIORITY")
        If Convert.ToInt32(e.Row.GetCellValue(priorityCol)) = 1 Then
            e.Row.Appearance.BackColor = Color.LightGreen
        End If
    End If
End Sub 
```

此外，使用 UltraGridColumn 类，您需要在文件开头添加

```
Imports Infragistics.Win.UltraWinGrid 
```

# javascript - 如何使用 try、catch 在错误处理中打印消息

> ID：14275757
> 
> 赞同：27
> 
> 时间：2013-01-11T10:05:39.873
> 
> 标签：javascript, node.js

我有一个简单的例子：

```
var str = '{ "test"  : 1, }'

try {
    JSON.parse(str);
} catch (e) {
    console.log(e)
} 
```

结果：

[语法错误：意外的令牌}]

如何打印所有错误信息？

预期结果：

```
undefined:1
{ "test"  : 1, }
         ^
SyntaxError: Unexpected token } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-11T12:39:48.397

这将有助于：

```
var x = { asd: "asd", };

try {
    JSON.parse(x);
}
catch (e) {
    console.log("Error", e.stack);
    console.log("Error", e.name);
    console.log("Error", e.message);
} 
```

`error.stack`不完全是你想要的，但它会帮助你。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-11T12:43:47.200

这将向您展示获取可用信息的各种方式：

```
var str = '{"test": 1, }';

try {
    JSON.parse(str);
} catch(e) {

    console.log("error object:");
    console.log(e);
    console.log();

    console.log("error object toString():");
    console.log("\t" + e.toString());

    console.log();
    console.log("error object attributes: ");
    console.log('\tname: ' + e.name + ' message: ' + e.message + ' at: ' + e.at + ' text: ' + e.text);

    console.log();
    console.log("error object stack: ");
    console.log(e.stack);
} 
```

输出是：

```
error object:
[SyntaxError: Unexpected token }]

error object toString():
    SyntaxError: Unexpected token }

error object attributes: 
    name: SyntaxError message: Unexpected token } at: undefined text: undefined

error object stack: 
SyntaxError: Unexpected token }
    at Object.parse (native)
    at Object.<anonymous> (/home/james/devel/tests/node/test.js:4:10)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

你可以选择:-)

# asp.net - 如果在不同的项目中使用 EF Code First DB，则会被丢弃

> ID：14275761
> 
> 赞同：0
> 
> 时间：2013-01-11T10:05:50.197
> 
> 标签：asp.net, asp.net-mvc, entity-framework, ef-code-first

我有一个使用实体框架代码优先模型的应用程序。

项目的结构是这样的

*   **Application.Models** *POCO 对象*
*   **Application.EF** *EF 数据上下文和存储库*
*   **Application.Web.MVC** *Web 应用程序（设计器）*

上下文初始化器如下所示：

```
public class DBContextInitializer : DropCreateDatabaseIfModelChanges<DBContext>
{
     protected override void Seed(DBContext context)
     {

     }
 } 
```

现在，我有另一个 API 应用程序，它从数据库中获取数据作为 API 调用。该项目如下所示：

*   **Application.Api.MVC** *MVC4 API 项目，包含 DTO 对象*
*   **Application.Models** *同一个项目*
*   **Application.EF** *同一个项目*

即使我不更改 POCO 类（`Application.Models`项目内部），实体框架也会检测到元数据已更改，并尝试删除并重新创建数据库。如果是这样，当我运行 Designer 应用程序 ( `Application.Web.MVC`) 时，它会再次删除它，依此类推。

我不知道它为什么这样做。我没有改变模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:45:17.217

请忽略这个问题，一切正常。我指的是不同的数据库。

此外，这是了解 EF 迁移的一个很好的理由

# ruby-on-rails - Rails 构建关联 before_create 不保存记录

> ID：14275765
> 
> 赞同：0
> 
> 时间：2013-01-11T10:05:59.460
> 
> 标签：ruby-on-rails, ruby, patch

我有一个学生有多种产品。可以选择产品来生成发票。这是生成函数：

```
def generate
  @student = @driving_school.students.find(params[:student_id])
  @products = @student.products.find(params[:product_ids])

  @invoice = @driving_school.invoices.build({student_id: @student.id})
  @invoice.reference = @student.full_name
  @invoice.products = @products
  @invoice.payment_is_due_in = 14

  if @invoice.save!
    redirect_to @invoice
  else
    redirect_to @invoice
  end
end 
```

发票包含在使用 before_create 过滤器创建发票时生成的行。

```
class Invoice < ActiveRecord::Base
...
before_create :copy_products_to_lines 
...
private

def copy_products_to_lines
  self.products.each do |product|
    self.lines.build(
      invoice_id: self.id,
      description: product.name + ' ' + product.description,
      amount: product.amount,
      price: product.netto,
      vat: true,
      vat_rate: product.vat_rate,
      undeletable: true
    )
  end
end 
```

在 rails 3.1.3 中，这一直运行良好。自从更新到 3.1.10 以来，由于 Rails 中的最新漏洞，此代码损坏了。发票生成成功，但不再创建行。有谁知道怎么来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:05:54.270

添加 has_many :lines, autosave: true 解决了它。谢谢charlyto。

# maven - Maven surefire 不支持 TestNG Dataprovider？

> ID：14275768
> 
> 赞同：1
> 
> 时间：2013-01-11T10:06:07.197
> 
> 标签：maven, testng, maven-surefire-plugin

我有以下 TestNG 单元测试类：

```
public class SomeTest extends AbstractEntityTest {
    ...
    @DataProvider
    public Object[][] getClasses() throws Exception {
        return this.getClassesForPackage(pack);
    }

    @Test(dataProvider = "getClasses")
    public void testEntity(final Class<?> entityClass) throws Exception {
        //test class...
    }
} 
```

这个测试在 Eclipse 中运行时执行得很好，但 Maven 似乎完全忽略了它。为了确定问题，我在这个测试类中添加了另一个虚拟测试方法，该方法由 Maven 执行。似乎由于注解中的 dataProvider 或方法中的参数，surefire 插件无法将方法 testEntity 识别为测试方法？

Maven 版本：3.0.3
Surefire 插件版本：2.13
TestNG 版本：6.8

**更新** 我不使用 testng.xml 文件来定义要运行的测试。[根据这个解释](http://maven.apache.org/surefire/maven-surefire-plugin/examples/testng.html)，这也不应该是必要的：

> 这是开始所需的唯一步骤 - 您现在可以在测试源目录中创建测试（例如，src/test/java。只要使用默认值命名它们，例如 *Test.java，它们就会运行由 Surefire 作为 TestNG 测试。

# c++ - 使用 C++ new[] 为二维数组分配内存

> ID：14275773
> 
> 赞同：1
> 
> 时间：2013-01-11T10:06:27.853
> 
> 标签：c++, arrays, memory-management, multidimensional-array

当我从用户那里读取一些值并且我需要创建一个特定大小的数组时，我会这样做：

```
#include <iostream>
using namespace std;    
unsigned* numbers;
int main()
{
int a;
cin >> a;
numbers = new unsigned[a];
} 
```

如何使用 2d 数组（从用户读取的大小为 a*b）来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T10:09:49.033

如果 a 和 b 分别是行数和列数，您可以像这样分配数组：

```
new unsigned[a * b]; 
```

要访问 row`i`和 column的元素`j`，请执行以下操作：

```
numbers[i * b + j] 
```

但是，请注意，实际上你几乎肯定会更好地使用`std::vector`你想要做的任何事情，但你可能还没有了解这一点:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T10:20:49.113

任何在代码中看起来像二维数组的东西都不会是内存中的物理二维数组，而是一个普通的内存块或分散的内存块，具体取决于您如何分配它。

*   您可以通过在另一个 N 指针的动态数组中动态分配 N 数组来折磨自己，就像 nrussel 的回答所暗示的那样。
*   你可以创建一个向量向量，就像 billz 和 Arun CB 建议的那样——这可以让你从自己管理分配的内存中解脱出来，但仍然会给你留下 N+1 个分散的分配，这不是很好的性能。
*   Brennan Vincent 的回答建议分配一个包含 a*b 元素的动态数组，这会在内存中为您提供一个连续的块。将其与他提到的内置动态内存管理相结合，`std::vector`并感到高兴：

    `std::vector<unsigned> matrix(a*b);`

如果您希望矩阵方便访问，请将整个事物包装到一个类中，以便您访问具有 2D 坐标的元素。但请不要自己管理内存。它只会伤害您和任何必须维护该代码（并搜索内存泄漏）的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T10:11:01.773

可以只使用一个向量来表示二维数组：

```
 typedef std::vector<int>     d1_type;       // 1D
   typedef std::vector<d1_type> d2_type;       // 2D
   typedef std::vector<d2_type> d3_type;       // 3D

   int num = 5;
   d2_type value2d(num, d1_type(num));
   d3_type value3d(num, d2_type(num, d1_type(num))); 
```

您可以像数组一样访问 2D/3D 向量，例如：

```
 value2d[0][0] = 100;
 value3d[0][0][0] = 100; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T10:22:41.673

## 更新推荐：

值得注意的是，[**boost 已经做到了这一点。**](http://www.boost.org/libs/multi_array/)所以我会坚持下去，如果它不打算封装在一个类中。

## 原答案：

通常，使用原始数组和分配不如使用`std::vector`. 现在，您当然可以使用`vector<vector<T>>`，但这不仅打字太长，而且还可能涉及不必要的复制。

使用`ptr_vector`or`vector<unique_ptr<vector<int>>`会解决第二个问题，但会使事情变得更糟。那么如何解决呢？

很简单：**根本不要使用二维数组**。

想象一下内存中的二维数组：

```
[X|X|X|X]
[Y|Y|Y|Y]
[Z|Z|Z|Z] 
```

很明显，它可以放在一行中：

```
[X|X|X|X|Y|Y|Y|Y|Z|Z|Z|Z] 
```

现在我们回到旧的、熟悉的一维数组（不管它是`vector`C 样式数组还是 C 样式数组）。为了得到你的元素，你必须知道你的初始数组的宽度，然后找到第 n 行对应的数组元素，然后简单地添加列数：

```
int& access (unsigned x, unsigned y) { 
    return data[x * sizeY + y]; // Or (y * sizeX + x)
} 
```

由于它是一种存根方法，因此您在实际使用中可能会遇到问题。下面是一个全局实现的例子：

```
int& accessVectorAs2d (std::vector<int> & data, unsigned x, unsigned y, unsigned int sizeY); // inside stays the same
unsigned SizeX = 20, SizeY = 20;
std::vector<int> V (SizeX * SizeY, 0);

accessVectorAs2d(V, 1, 3, SizeX) = 5; 
```

返回引用以允许以与普通二维数组非常相似的方式使用一维结构：

```
// So you can do either reads
int X = access(1, 3);

// Or writes!
access(1,3) = 5; 
```

附加说明：如果您要构建自己的类，重载`operator()`可以为您提供更好的结果：

```
Data(1, 3) = 5;
int X = Data(1, 3); 
```

现在，您将如何实现该访问（子类化或封装向量，或仅使用普通的全局函数）并不重要。

我强烈建议你`std::vector`在这里使用。它将确保没有内存泄漏（忘记删除），更改大小（通过`.push_back()`或`.reserve()`）会更容易，并且通常是建议的做法；毕竟，你是用 C++ 编写的，而不是 C 语言。

## 看哪！在这一点之后的龙！

实际上这个类当然应该是模板化的，不仅有类型，还有维度的数量（好吧，可以简化）和（每1个）维度的大小（-1允许一侧无限增长）。这可能最好通过在编译时创建适当的访问函数来完成，计算

和[i = 0] ^(i < n) (大小[i] ) ^i * D [i] ,

其中 n 是维数，S 是维数数组，D 是坐标数组。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T10:16:55.067

尝试使用向量。

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
// An empty vector of vectors. The space 
// between the 2 '>' signs is necessary
vector<vector<int> > v2d;

// If you intend creating many vectors 
// of vectors, the following's tidier
  typedef vector<vector<int> > IntMatrix;
  IntMatrix m;

// Now we'll try to create a 3 by 5 "matrix".
// First, create a vector with 5 elements
   vector<int> v2(5, 99); 

// Now create a vector of 3 elements. 
 // Each element is a copy of v2
 vector<vector<int> > v2d2(3,v2);

// Print out the elements
 for(int i=0;i<v2d2.size(); i++) {
  for (int j=0;j<v2d2[i].size(); j++)
    cout << v2d2[i][j] << " "; 
    cout << endl;
   }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T10:32:52.657

您可以通过以下方式使用 c++ new[] 分配内存：

```
int** array = new int*[x];
for(int i = 0; i < x; i++)
    aryay[i] = new int[y]; 
```

简单的概念是它和指向数组的指针数组。它也必须删除以避免内存泄漏。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T10:42:04.260

尽管“向量的向量”解决方案可以令人满意，但它们不是 2D 结构：每个“行”将独立分配，并且长度可以逐行不同（因此必须手动维护 2D 约束：插入一个项目需要放大所有行，以便一个在另一个之上的元素保持它们的相对位置。

如果您需要一个适当的动态 2D 结构，您可以将一个向量（简单的一维）包装在一个类中（我们称之为“ `table`”），并为该类提供操作要求，以将其正确地维护为一个外部表示的 2D。尤其：

*   定义一个`Colums() const`和`Rows() const`函数来重新调整表的实际大小。
*   定义 a`int& operator()(unsigned row, unsigned col) { return vect[row*Colums()+col]; }`和它的 const 对应项
*   定义一个`struct coord { unsigned r, unsigned c }`和一个方便`table::operator[](const coord&)`
*   定义`insert`和`remove`插入一行（只需在 处插入`Colums()`连续元素`r*Columns()`）和一列（`Columns()+1`从 开始插入一个元素`c`）的方法
*   定义适当的迭代器类，这些迭代器类沿着列（++ 前进 1 个元素）和行（++ 前进由 Colums() 元素）（注意始终`end()`为它们定义一个值）

所有这些东西的关键是对`n = r*C+c`第二点公式的理解。其他一切都只是一个几乎直接的后果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T10:08:36.787

```
unsigned **numbers;
numbers = new unsigned*[a];
for (int i=0; i<a; i++){
    numbers[i] = new unsigned[b];
} 
```

它的行为与二维数组不完全相同，因为它在内存中不连续，但它会这样做。您还可以使用符号`numbers[i][j]`来访问元素。

记住在-ing本身之前最后`delete[]`的每个元素`numbers``delete[]``numbers`

使用`std::vector`可能是一个更可取的解决方案，如其他帖子中所述

# c# - 无法创建用户

> ID：14275777
> 
> 赞同：2
> 
> 时间：2013-01-11T10:06:37.493
> 
> 标签：c#, asp.net

我使用 ASP.NET Membership 类来创建用户凭据和管理用户设置。代码如下：它在我的本地机器上工作正常，但它在生产服务器上抛出异常。可能是什么原因？能给我一个线索吗？任何人？

* * *

```
try
{                
    MembershipUser newUser = 
        Membership.CreateUser(txtUserName.Text, txtPassword.Text);
}
catch (MembershipCreateUserException ex)
{
    divErrorPanel1.Visible = true;
    ShowErrorMessage(lblMessage, GetErrorMessage(ex.StatusCode));
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:37:25.817

试试重载方法

```
MembershipCreateStatus status;
MembershipUser newuser = Membership.CreateUser(username, password, email, 
   "Give default question as empty", "Give default answer as empty", IsApprovedTrueOrFalse, out status); 
```

您使用的当前过载对我也没有用。我不知道为什么，所以我被迫使用这个重载。可能与web.config中的某些设置是否使某些字段为必填有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:11:40.400

检查[`MembershipCreateUserException.StatusCode`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipcreateuserexception.statuscode.aspx)属性以解释异常。

> 获取异常原因的描述。

这些都是可能性。

> *   "用户名已存在。请输入其他用户名。";
>     
>     
> *   “该电子邮件地址的用户名已经存在。请输入不同的电子邮件地址。”;
>     
>     
> *   "提供的密码无效。请输入有效的密码值。";
>     
>     
> *   "提供的电子邮件地址无效。请检查值并重试。";
>     
>     
> *   "提供的密码找回答案无效，请检查数值后重试。";
>     
>     
> *   "提供的密码找回问题无效，请检查数值后重试。";
>     
>     
> *   "提供的用户名无效，请检查值并重试。";
>     
>     
> *   “认证提供者返回错误。请验证您的输入，然后重试。如果问题仍然存在，请联系您的系统管理员。”；
>     
>     
> *   “用户创建请求已被取消，请验证您的输入，然后重试。如果问题仍然存在，请联系您的系统管理员。”；
>     
>     
> *   “发生未知错误。请验证您的输入并重试。如果问题仍然存在，请联系您的系统管理员。”；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T06:20:26.437

在您的 web.config 中，尝试将以下属性设置为 false

```
requiresQuestionAndAnswer="false" 
```

在节点

# xmpp - 在 MSN XMPP 上接收联系请求时显示用户友好信息

> ID：14275783
> 
> 赞同：0
> 
> 时间：2013-01-11T10:06:49.070
> 
> 标签：xmpp, msn-messenger

在 Msn 中，用户的 jid 与电子邮件 ID 不同。

现在，当我在 Msn 上收到任何联系请求时，我只会得到发件人的 jid，类似于 @messenger.live.com。这不会让用户知道联系请求的发送者是谁。

有什么方法可以显示一些用户友好的信息，以便联系请求的接收者可以做出是否接受/拒绝请求的明智决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:57:43.110

探索以下链接，它可能会有所帮助。

[http://msdn.microsoft.com/en-us/library/live/hh550849.aspx](http://msdn.microsoft.com/en-us/library/live/hh550849.aspx)

[http://xmpp.org/extensions/xep-0172.html](http://xmpp.org/extensions/xep-0172.html)

[http://xmpp.org/extensions/xep-0054.html](http://xmpp.org/extensions/xep-0054.html)

# http - 我的 servlet 或浏览器有什么问题？

> ID：14275784
> 
> 赞同：1
> 
> 时间：2013-01-11T10:06:56.357
> 
> 标签：http, servlets, http-headers

我在这个 URL 安装了一个应用程序：`http://localhost:8080/servlet/xml`. servlet 支持两种传递参数的方式——作为查询字符串和作为路径信息（例如`http://localhost:8080/servlet/xml?name =/test/my.xml`和`http://localhost:8080/servlet/xml/test/my.xml`）。它旨在将默认转换应用于位于服务器上的引用 XML 文件，生成 HTML 文件，并将其发送回浏览器。出了点问题，即使 servlet 在这两种情况下都生成了 html，浏览器在第一个示例中将其呈现为 HTML，在第二个示例中将其呈现为 XML。此外，当我比较这两种情况下的 HTTP 响应（包括状态码、标头和正文）时，发现它们是相同的。这怎么可能？servlet 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:41:40.613

您是否正确设置了响应的内容类型？对于 HTML，您应该执行以下操作：

```
response.setContentType("text/html") 
```

# symfony - Symfony2 formBuilder函数是怎么调用的？

> ID：14275790
> 
> 赞同：0
> 
> 时间：2013-01-11T10:07:16.030
> 
> 标签：symfony, function-calls

嗨，我是 symfony2 的新手，在阅读文档时我不知道如何

`public function buildForm(FormBuilderInterface $builder, array $options)`使用控制器中的助手 createForm() 从 TaskType 类（在示例中）中调用。

我查看了 FormFactory.php 文件，我可以看到函数 getName() 是如何被调用的，但 buildForm() 却没有。

我知道编写表单并不是很重要，但我想知道以便更好地了解我在做什么以及为什么。

谢谢，懒惰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:31:15.007

### 在 Symfony2.0 中

在第 280 行附近`\Symfony\Component\Form\FormFactory`有一行：

```
$type->buildForm($builder, $options); 
```

稍微低一点的是：

```
$typeExtension->buildForm($builder, $options); 
```

### 在 Symfony2.1 中

`\Symfony\Component\Form\ResolvedFormType`在函数 createBuilder 的第 124 行附近：

```
$this->buildForm($builder, $options); 
```

以及此文件中的许多其他位置。

这`\Symfony\Component\Form\FormFactory`在函数 addType 的第 165 行中使用：

```
$this->registry->addType($this->resolvedTypeFactory->createResolvedType(
        $type,
        array(),
        $parentType ? $this->registry->getType($parentType) : null
    )); 
```

# java - 从 Java 1.6.31 切换到 Java 1.6.32+ 时出现 UnsatisfiedLinkError

> ID：14275792
> 
> 赞同：0
> 
> 时间：2013-01-11T10:07:21.800
> 
> 标签：java, unsatisfiedlinkerror

尝试使用诸如*SVNKit*和*Cobertura*之类的工具时，我似乎遇到了一个错误

```
java.lang.UnsatisfiedLinkError: java.io.WinNTFileSystem.createFileExclusively(Ljava/lang/String;)Z 
```

有谁知道解决方法，还是我现在必须做出选择，Java 1.6.32 以上或保持所需的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:22:22.163

谷歌搜索，有明确的证据表明`createFileExclusively`在不同版本的 Java 中该方法有两种不同的签名。在某些情况下，它是：

```
java.io.WinNTFileSystem.createFileExclusively(Ljava/lang/String;)Z 
```

在别人

```
java.io.WinNTFileSystem.createFileExclusively(Ljava/lang/String;Z)Z 
```

换句话说，`boolean`在某些版本中还有第二个论点。

`java`我的理论是，不知何故，您使用 rt.jar 文件启动 JVM，该文件与可执行文件中的本机方法或其中的 DLL中的本机方法不匹配。这可能是由于不正确的 -Xbootclasspath 或类似原因造成的。或者，也许您的 JDK 或 JRE 安装搞砸了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T10:19:34.113

该方法在[Java 7](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/io/Win32FileSystem.java#Win32FileSystem.createFileExclusively%28java.lang.String%29)和 Java 8 的 beta 版本中。如果您的 Java 副本找不到它，我会检查它是否已正确安装。

# c# - 是否有任何 LDAP 搜索查询可以以类似于恶意 SQL 注入的方式使用？

> ID：14275794
> 
> 赞同：1
> 
> 时间：2013-01-11T10:07:38.000
> 
> 标签：c#, security, active-directory, sql-injection

我知道我所问的“搜索”查询位可能会排除对 AD 的任何粗鲁操作。但是稍微打开了这个问题。例如，如果在一个网站上，我从文本框中获取输入来搜索用户，我会冒险猜测如果我不尝试减少它，我可能会让自己面临某种恶意活动。我需要注意什么？例如，任何对 LDAP 有点了解的人都可以输入一个命令，这可能会导致长时间运行的进程占用重要资源（考虑一个有点怨恨的人使用一个非常疯狂的搜索过滤器来处理大量请求）。尽管我有能力限制到规定的 OU，但稍微限制了范围，我敢肯定这里仍然存在漏洞，可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:49:39.563

就像任何接受用户输入的应用程序界面一样，攻击者也有可能提供应用程序未预料到的恶意输入。始终最好执行强白名单验证，以确保用户输入与已知/预期值匹配。在其他情况下，可能需要更强大的防御。

如果您正在接受用户输入，并直接放入 LDAP 查询中，那么您需要防止包含无法预料的 LDAP 元字符。如果攻击者成功地修改了 LDAP 语句，这就是一个称为 LDAP 注入的漏洞。

以下文章很好地解释了什么是 LDAP 注入，以及如何防御它： [https://www.owasp.org/index.php/LDAP_injection](https://www.owasp.org/index.php/LDAP_injection) [http://projects.webappsec.org/w/page/ 13246947/LDAP%20注入](http://projects.webappsec.org/w/page/13246947/LDAP%20Injection)

请记住，用户输入可以是来自客户端的任何内容，而不仅仅是应用程序 POST/GET 参数。HTTP（或其他协议）标头之类的东西同样容易受到攻击。如果攻击者能够在数据传输到应用程序之前拦截数据，则应将其视为“受污染”，并应采取适当的防御措施以确保其不包含恶意输入。

# php - 适用于 xampp 1.8.1 的 PHP APC DLL

> ID：14275795
> 
> 赞同：0
> 
> 时间：2013-01-11T10:07:46.577
> 
> 标签：php, xampp, apc

我在哪里可以找到适用于 windows xp sp3 32 位、PHP 版本 5.4.7 和 Zend Extension Build-API220100525、TS、VC9 的 xampp 1.8.1 的匹配 php apc dll？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-27T18:13:40.110

我在这里找到了工作 apc.dll：http: [//belsky.info/uploads/my/bugz/61984/php_apc-3.1.10-5.4-vc9-x86-xp.zip](http://belsky.info/uploads/my/bugz/61984/php_apc-3.1.10-5.4-vc9-x86-xp.zip) [1](http://belsky.info/uploads/my/bugz/61984/php_apc-3.1.10-5.4-vc9-x86-xp.zip)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T04:40:57.467

您可以从该站点下载 php_apc.dll：http: [//windows.php.net/downloads/pecl/releases/apc/](http://windows.php.net/downloads/pecl/releases/apc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T03:23:33.903

[您可以从http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)下载 APC 应用程序

# javascript - 显示模态对话

> ID：14275797
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:07:50.130
> 
> 标签：javascript, showmodaldialog

我使用了一个显示模式对话框窗口，我从中向后端发送请求，它工作正常，当我再次检查时它显示“对象不支持此属性或方法”。它突然发生，我确定我没有做任何改变在代码中！！

```
var PasswordAlert=null;
PasswordAlert=window.showModalDialog(htmlreq,"","dialogWidth:400px;dialogHeight:148px;edge:sunken;scroll:no;status:no;modal=yes"); 
```

这是我在调用 showModalDialog 时出错的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:52:17.333

IE6 - 你一定是在开玩笑））没想到有人用了这么久）。

有没有监听3124端口的软件？您确定它在尝试时正在运行吗？

如果直接访问该 url（将其直接传递到浏览器地址行）会发生什么？

刚刚尝试从控制台运行此代码 - 它在 IE6+ 中运行

```
var PasswordAlert=null;
PasswordAlert=window.showModalDialog('https://google.com',"","dialogWidth:400px;dialogHeight:148px;edge:sunken;scroll:no;status:no;modal=yes"); 
```

如果它有效 - 您的 URL 或您要打开的页面有问题。

该代码是否适用于任何适当的浏览器（Chrome、FF）？对我来说 - 确实。

错误发生在哪里：在主窗口或对话框中？浏览器还必须向您显示错误发生的位置，并说明哪个对象没有属性。

你可以问自己很多问题。

**升级版：**

如果直接打开 URL 会发生什么？

尝试在对话框中打开没有查询字符串的 URL，并将其作为第二个`window.showModalDialog`函数参数传递。然后可以通过`window.dialogArguments`属性从对话框访问传递的数据。[http://msdn.microsoft.com/ru-ru/library/ie/ms536759%28v=vs.85%29.aspx](http://msdn.microsoft.com/ru-ru/library/ie/ms536759%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T11:18:18.480

IE中的弹出窗口阻止程序打开了吗？

# c# - 如何验证给定文件是否为word文档

> ID：14275801
> 
> 赞同：3
> 
> 时间：2013-01-11T10:08:02.950
> 
> 标签：c#, ms-word

你能告诉我如何在c#中验证给定的文件是word文档还是不是。当我尝试一个示例时，说 1.pdf 重命名为 1.doc 并尝试使用 word 2007 在 c# 中打开它。它失败了，需要时间才能出来。

为了避免这种时间浪费，我想检测实际的文件类型。

我在 c#2008 中使用 word 2007。如果解决方案存在于带有 c#2010 的 word 2010 中，那么也可以帮助完整。

请提供我必须使用 atalasoft 10.0 和 acrobat XI pro 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:41:26.220

检测文件的真实类型并不容易。我最近需要一种在 ASP.NET 中检测上传文件是否为`.exe`. 我`IsWord`为你添加了一个方法：

```
public class MimeTypes
{
    private static List<string> knownTypes;

    private static Dictionary<string, string> mimeTypes;

    public static bool IsWord(string fileName)
    {
        if (knownTypes == null || mimeTypes == null)
            InitializeMimeTypeLists();
        string contentType = "";
        string extension = Path.GetExtension(fileName).Remove(0, 1).ToLower();
        mimeTypes.TryGetValue(extension, out contentType);

        if (contentType == "application/msword" &&
            ScanFileForMimeType(fileName) == "application/x-zip-compressed")
            // if you  want to include ".doc" files, 
            // add "application/octet-stream" as well
            return true;
        else
            return false;
    }

    [DllImport("urlmon.dll", CharSet = CharSet.Auto)]

    private static extern UInt32 FindMimeFromData(
       UInt32 pBC, [MarshalAs(UnmanagedType.LPStr)]
       string pwzUrl, [MarshalAs(UnmanagedType.LPArray)]
       byte[] pBuffer, UInt32 cbSize, [MarshalAs(UnmanagedType.LPStr)]
       string pwzMimeProposed, UInt32 dwMimeFlags, ref UInt32 ppwzMimeOut, UInt32 dwReserverd
    );

    private static string ScanFileForMimeType(string fileName)
    {
        try
        {
            byte[] buffer = new byte[256];
            using (FileStream fs = new FileStream(fileName, FileMode.Open))
            {
                int readLength = Convert.ToInt32(Math.Min(256, fs.Length));
                fs.Read(buffer, 0, readLength);
            }

            UInt32 mimeType = default(UInt32);
            FindMimeFromData(0, null, buffer, 256, null, 0, ref mimeType, 0);
            IntPtr mimeTypePtr = new IntPtr(mimeType);
            string mime = Marshal.PtrToStringUni(mimeTypePtr);
            Marshal.FreeCoTaskMem(mimeTypePtr);
            if (string.IsNullOrEmpty(mime))
                mime = "application/octet-stream";
            return mime;
        } catch (Exception ex)
        {
            return "application/octet-stream";
        }
    }

    private static void InitializeMimeTypeLists()
    {
        knownTypes = new List<string>() {
            "text/plain",
            "text/html",
            "text/xml",
            "text/richtext",
            "text/scriptlet",
            "audio/x-aiff",
            "audio/basic",
            "audio/mid",
            "audio/wav",
            "image/gif",
            "image/jpeg",
            "image/pjpeg",
            "image/png",
            "image/x-png",
            "image/tiff",
            "image/bmp",
            "image/x-xbitmap",
            "image/x-jg",
            "image/x-emf",
            "image/x-wmf",
            "video/avi",
            "video/mpeg",
            "application/octet-stream",
            "application/postscript",
            "application/base64",
            "application/macbinhex40",
            "application/pdf",
            "application/xml",
            "application/atom+xml",
            "application/rss+xml",
            "application/x-compressed",
            "application/x-zip-compressed",
            "application/x-gzip-compressed",
            "application/java",
            "application/x-msdownload"
        };

        mimeTypes = new Dictionary<string, string>();
        mimeTypes.Add("3dm", "x-world/x-3dmf");
        mimeTypes.Add("3dmf", "x-world/x-3dmf");
        mimeTypes.Add("a", "application/octet-stream");
        mimeTypes.Add("aab", "application/x-authorware-bin");
        mimeTypes.Add("aam", "application/x-authorware-map");
        mimeTypes.Add("aas", "application/x-authorware-seg");
        mimeTypes.Add("abc", "text/vnd.abc");
        mimeTypes.Add("acgi", "text/html");
        mimeTypes.Add("afl", "video/animaflex");
        mimeTypes.Add("ai", "application/postscript");
        mimeTypes.Add("aif", "audio/aiff");
        mimeTypes.Add("aifc", "audio/aiff");
        mimeTypes.Add("aiff", "audio/aiff");
        mimeTypes.Add("aim", "application/x-aim");
        mimeTypes.Add("aip", "text/x-audiosoft-intra");
        mimeTypes.Add("ani", "application/x-navi-animation");
        mimeTypes.Add("aos", "application/x-nokia-9000-communicator-add-on-software");
        mimeTypes.Add("aps", "application/mime");
        mimeTypes.Add("arc", "application/octet-stream");
        mimeTypes.Add("arj", "application/arj");
        mimeTypes.Add("art", "image/x-jg");
        mimeTypes.Add("asf", "video/x-ms-asf");
        mimeTypes.Add("asm", "text/x-asm");
        mimeTypes.Add("asp", "text/asp");
        mimeTypes.Add("asx", "application/x-mplayer2");
        mimeTypes.Add("au", "audio/basic");
        mimeTypes.Add("avi", "video/avi");
        mimeTypes.Add("avs", "video/avs-video");
        mimeTypes.Add("bcpio", "application/x-bcpio");
        mimeTypes.Add("bin", "application/octet-stream");
        mimeTypes.Add("bm", "image/bmp");
        mimeTypes.Add("bmp", "image/bmp");
        mimeTypes.Add("boo", "application/book");
        mimeTypes.Add("book", "application/book");
        mimeTypes.Add("boz", "application/x-bzip2");
        mimeTypes.Add("bsh", "application/x-bsh");
        mimeTypes.Add("bz", "application/x-bzip");
        mimeTypes.Add("bz2", "application/x-bzip2");
        mimeTypes.Add("c", "text/plain");
        mimeTypes.Add("c++", "text/plain");
        mimeTypes.Add("cat", "application/vnd.ms-pki.seccat");
        mimeTypes.Add("cc", "text/plain");
        mimeTypes.Add("ccad", "application/clariscad");
        mimeTypes.Add("cco", "application/x-cocoa");
        mimeTypes.Add("cdf", "application/cdf");
        mimeTypes.Add("cer", "application/pkix-cert");
        mimeTypes.Add("cha", "application/x-chat");
        mimeTypes.Add("chat", "application/x-chat");
        mimeTypes.Add("class", "application/java");
        mimeTypes.Add("com", "application/octet-stream");
        mimeTypes.Add("conf", "text/plain");
        mimeTypes.Add("cpio", "application/x-cpio");
        mimeTypes.Add("cpp", "text/x-c");
        mimeTypes.Add("cpt", "application/x-cpt");
        mimeTypes.Add("crl", "application/pkcs-crl");
        mimeTypes.Add("css", "text/css");
        mimeTypes.Add("def", "text/plain");
        mimeTypes.Add("der", "application/x-x509-ca-cert");
        mimeTypes.Add("dif", "video/x-dv");
        mimeTypes.Add("dir", "application/x-director");
        mimeTypes.Add("dl", "video/dl");
        mimeTypes.Add("doc", "application/msword");
        mimeTypes.Add("docx", "application/msword");
        mimeTypes.Add("dot", "application/msword");
        mimeTypes.Add("dp", "application/commonground");
        mimeTypes.Add("drw", "application/drafting");
        mimeTypes.Add("dump", "application/octet-stream");
        mimeTypes.Add("dv", "video/x-dv");
        mimeTypes.Add("dvi", "application/x-dvi");
        mimeTypes.Add("dwf", "drawing/x-dwf (old)");
        mimeTypes.Add("dwg", "application/acad");
        mimeTypes.Add("dxf", "application/dxf");
        mimeTypes.Add("eps", "application/postscript");
        mimeTypes.Add("es", "application/x-esrehber");
        mimeTypes.Add("etx", "text/x-setext");
        mimeTypes.Add("evy", "application/envoy");
        mimeTypes.Add("exe", "application/octet-stream");
        mimeTypes.Add("f", "text/plain");
        mimeTypes.Add("f90", "text/x-fortran");
        mimeTypes.Add("fdf", "application/vnd.fdf");
        mimeTypes.Add("fif", "image/fif");
        mimeTypes.Add("fli", "video/fli");
        mimeTypes.Add("flv", "video/x-flv");
        mimeTypes.Add("for", "text/x-fortran");
        mimeTypes.Add("fpx", "image/vnd.fpx");
        mimeTypes.Add("g", "text/plain");
        mimeTypes.Add("g3", "image/g3fax");
        mimeTypes.Add("gif", "image/gif");
        mimeTypes.Add("gl", "video/gl");
        mimeTypes.Add("gsd", "audio/x-gsm");
        mimeTypes.Add("gtar", "application/x-gtar");
        mimeTypes.Add("gz", "application/x-compressed");
        mimeTypes.Add("h", "text/plain");
        mimeTypes.Add("help", "application/x-helpfile");
        mimeTypes.Add("hgl", "application/vnd.hp-hpgl");
        mimeTypes.Add("hh", "text/plain");
        mimeTypes.Add("hlp", "application/x-winhelp");
        mimeTypes.Add("htc", "text/x-component");
        mimeTypes.Add("htm", "text/html");
        mimeTypes.Add("html", "text/html");
        mimeTypes.Add("htmls", "text/html");
        mimeTypes.Add("htt", "text/webviewhtml");
        mimeTypes.Add("htx", "text/html");
        mimeTypes.Add("ice", "x-conference/x-cooltalk");
        mimeTypes.Add("ico", "image/x-icon");
        mimeTypes.Add("idc", "text/plain");
        mimeTypes.Add("ief", "image/ief");
        mimeTypes.Add("iefs", "image/ief");
        mimeTypes.Add("iges", "application/iges");
        mimeTypes.Add("igs", "application/iges");
        mimeTypes.Add("ima", "application/x-ima");
        mimeTypes.Add("imap", "application/x-httpd-imap");
        mimeTypes.Add("inf", "application/inf");
        mimeTypes.Add("ins", "application/x-internett-signup");
        mimeTypes.Add("ip", "application/x-ip2");
        mimeTypes.Add("isu", "video/x-isvideo");
        mimeTypes.Add("it", "audio/it");
        mimeTypes.Add("iv", "application/x-inventor");
        mimeTypes.Add("ivr", "i-world/i-vrml");
        mimeTypes.Add("ivy", "application/x-livescreen");
        mimeTypes.Add("jam", "audio/x-jam");
        mimeTypes.Add("jav", "text/plain");
        mimeTypes.Add("java", "text/plain");
        mimeTypes.Add("jcm", "application/x-java-commerce");
        mimeTypes.Add("jfif", "image/jpeg");
        mimeTypes.Add("jfif-tbnl", "image/jpeg");
        mimeTypes.Add("jpe", "image/jpeg");
        mimeTypes.Add("jpeg", "image/jpeg");
        mimeTypes.Add("jpg", "image/jpeg");
        mimeTypes.Add("jps", "image/x-jps");
        mimeTypes.Add("js", "application/x-javascript");
        mimeTypes.Add("jut", "image/jutvision");
        mimeTypes.Add("kar", "audio/midi");
        mimeTypes.Add("ksh", "application/x-ksh");
        mimeTypes.Add("la", "audio/nspaudio");
        mimeTypes.Add("lam", "audio/x-liveaudio");
        mimeTypes.Add("latex", "application/x-latex");
        mimeTypes.Add("lha", "application/lha");
        mimeTypes.Add("lhx", "application/octet-stream");
        mimeTypes.Add("list", "text/plain");
        mimeTypes.Add("lma", "audio/nspaudio");
        mimeTypes.Add("log", "text/plain");
        mimeTypes.Add("lsp", "application/x-lisp");
        mimeTypes.Add("lst", "text/plain");
        mimeTypes.Add("lsx", "text/x-la-asf");
        mimeTypes.Add("ltx", "application/x-latex");
        mimeTypes.Add("lzh", "application/octet-stream");
        mimeTypes.Add("lzx", "application/lzx");
        mimeTypes.Add("m", "text/plain");
        mimeTypes.Add("m1v", "video/mpeg");
        mimeTypes.Add("m2a", "audio/mpeg");
        mimeTypes.Add("m2v", "video/mpeg");
        mimeTypes.Add("m3u", "audio/x-mpequrl");
        mimeTypes.Add("man", "application/x-troff-man");
        mimeTypes.Add("map", "application/x-navimap");
        mimeTypes.Add("mar", "text/plain");
        mimeTypes.Add("mbd", "application/mbedlet");
        mimeTypes.Add("mc$", "application/x-magic-cap-package-1.0");
        mimeTypes.Add("mcd", "application/mcad");
        mimeTypes.Add("mcf", "image/vasa");
        mimeTypes.Add("mcp", "application/netmc");
        mimeTypes.Add("me", "application/x-troff-me");
        mimeTypes.Add("mht", "message/rfc822");
        mimeTypes.Add("mhtml", "message/rfc822");
        mimeTypes.Add("mid", "audio/midi");
        mimeTypes.Add("midi", "audio/midi");
        mimeTypes.Add("mif", "application/x-frame");
        mimeTypes.Add("mime", "message/rfc822");
        mimeTypes.Add("mjf", "audio/x-vnd.audioexplosion.mjuicemediafile");
        mimeTypes.Add("mjpg", "video/x-motion-jpeg");
        mimeTypes.Add("mm", "application/base64");
        mimeTypes.Add("mme", "application/base64");
        mimeTypes.Add("mod", "audio/mod");
        mimeTypes.Add("moov", "video/quicktime");
        mimeTypes.Add("mov", "video/quicktime");
        mimeTypes.Add("movie", "video/x-sgi-movie");
        mimeTypes.Add("mp2", "audio/mpeg");
        mimeTypes.Add("mp3", "audio/mpeg3");
        mimeTypes.Add("mpa", "audio/mpeg");
        mimeTypes.Add("mpc", "application/x-project");
        mimeTypes.Add("mpe", "video/mpeg");
        mimeTypes.Add("mpeg", "video/mpeg");
        mimeTypes.Add("mpg", "video/mpeg");
        mimeTypes.Add("mpga", "audio/mpeg");
        mimeTypes.Add("mpp", "application/vnd.ms-project");
        mimeTypes.Add("mpt", "application/x-project");
        mimeTypes.Add("mpv", "application/x-project");
        mimeTypes.Add("mpx", "application/x-project");
        mimeTypes.Add("mrc", "application/marc");
        mimeTypes.Add("ms", "application/x-troff-ms");
        mimeTypes.Add("mv", "video/x-sgi-movie");
        mimeTypes.Add("my", "audio/make");
        mimeTypes.Add("mzz", "application/x-vnd.audioexplosion.mzz");
        mimeTypes.Add("nap", "image/naplps");
        mimeTypes.Add("naplps", "image/naplps");
        mimeTypes.Add("nc", "application/x-netcdf");
        mimeTypes.Add("ncm", "application/vnd.nokia.configuration-message");
        mimeTypes.Add("nif", "image/x-niff");
        mimeTypes.Add("niff", "image/x-niff");
        mimeTypes.Add("nix", "application/x-mix-transfer");
        mimeTypes.Add("nsc", "application/x-conference");
        mimeTypes.Add("nvd", "application/x-navidoc");
        mimeTypes.Add("o", "application/octet-stream");
        mimeTypes.Add("oda", "application/oda");
        mimeTypes.Add("omc", "application/x-omc");
        mimeTypes.Add("omcd", "application/x-omcdatamaker");
        mimeTypes.Add("omcr", "application/x-omcregerator");
        mimeTypes.Add("p", "text/x-pascal");
        mimeTypes.Add("p10", "application/pkcs10");
        mimeTypes.Add("p12", "application/pkcs-12");
        mimeTypes.Add("p7a", "application/x-pkcs7-signature");
        mimeTypes.Add("p7c", "application/pkcs7-mime");
        mimeTypes.Add("pas", "text/pascal");
        mimeTypes.Add("pbm", "image/x-portable-bitmap");
        mimeTypes.Add("pcl", "application/vnd.hp-pcl");
        mimeTypes.Add("pct", "image/x-pict");
        mimeTypes.Add("pcx", "image/x-pcx");
        mimeTypes.Add("pdf", "application/pdf");
        mimeTypes.Add("pfunk", "audio/make");
        mimeTypes.Add("pgm", "image/x-portable-graymap");
        mimeTypes.Add("pic", "image/pict");
        mimeTypes.Add("pict", "image/pict");
        mimeTypes.Add("pkg", "application/x-newton-compatible-pkg");
        mimeTypes.Add("pko", "application/vnd.ms-pki.pko");
        mimeTypes.Add("pl", "text/plain");
        mimeTypes.Add("plx", "application/x-pixclscript");
        mimeTypes.Add("pm", "image/x-xpixmap");
        mimeTypes.Add("png", "image/png");
        mimeTypes.Add("pnm", "application/x-portable-anymap");
        mimeTypes.Add("pot", "application/mspowerpoint");
        mimeTypes.Add("pov", "model/x-pov");
        mimeTypes.Add("ppa", "application/vnd.ms-powerpoint");
        mimeTypes.Add("ppm", "image/x-portable-pixmap");
        mimeTypes.Add("pps", "application/mspowerpoint");
        mimeTypes.Add("ppt", "application/mspowerpoint");
        mimeTypes.Add("ppz", "application/mspowerpoint");
        mimeTypes.Add("pre", "application/x-freelance");
        mimeTypes.Add("prt", "application/pro_eng");
        mimeTypes.Add("ps", "application/postscript");
        mimeTypes.Add("psd", "application/octet-stream");
        mimeTypes.Add("pvu", "paleovu/x-pv");
        mimeTypes.Add("pwz", "application/vnd.ms-powerpoint");
        mimeTypes.Add("py", "text/x-script.phyton");
        mimeTypes.Add("pyc", "applicaiton/x-bytecode.python");
        mimeTypes.Add("qcp", "audio/vnd.qcelp");
        mimeTypes.Add("qd3", "x-world/x-3dmf");
        mimeTypes.Add("qd3d", "x-world/x-3dmf");
        mimeTypes.Add("qif", "image/x-quicktime");
        mimeTypes.Add("qt", "video/quicktime");
        mimeTypes.Add("qtc", "video/x-qtc");
        mimeTypes.Add("qti", "image/x-quicktime");
        mimeTypes.Add("qtif", "image/x-quicktime");
        mimeTypes.Add("ra", "audio/x-pn-realaudio");
        mimeTypes.Add("ram", "audio/x-pn-realaudio");
        mimeTypes.Add("ras", "application/x-cmu-raster");
        mimeTypes.Add("rast", "image/cmu-raster");
        mimeTypes.Add("rexx", "text/x-script.rexx");
        mimeTypes.Add("rf", "image/vnd.rn-realflash");
        mimeTypes.Add("rgb", "image/x-rgb");
        mimeTypes.Add("rm", "application/vnd.rn-realmedia");
        mimeTypes.Add("rmi", "audio/mid");
        mimeTypes.Add("rmm", "audio/x-pn-realaudio");
        mimeTypes.Add("rmp", "audio/x-pn-realaudio");
        mimeTypes.Add("rng", "application/ringing-tones");
        mimeTypes.Add("rnx", "application/vnd.rn-realplayer");
        mimeTypes.Add("roff", "application/x-troff");
        mimeTypes.Add("rp", "image/vnd.rn-realpix");
        mimeTypes.Add("rpm", "audio/x-pn-realaudio-plugin");
        mimeTypes.Add("rt", "text/richtext");
        mimeTypes.Add("rtf", "text/richtext");
        mimeTypes.Add("rtx", "application/rtf");
        mimeTypes.Add("rv", "video/vnd.rn-realvideo");
        mimeTypes.Add("s", "text/x-asm");
        mimeTypes.Add("s3m", "audio/s3m");
        mimeTypes.Add("saveme", "application/octet-stream");
        mimeTypes.Add("sbk", "application/x-tbook");
        mimeTypes.Add("scm", "application/x-lotusscreencam");
        mimeTypes.Add("sdml", "text/plain");
        mimeTypes.Add("sdp", "application/sdp");
        mimeTypes.Add("sdr", "application/sounder");
        mimeTypes.Add("sea", "application/sea");
        mimeTypes.Add("set", "application/set");
        mimeTypes.Add("sgm", "text/sgml");
        mimeTypes.Add("sgml", "text/sgml");
        mimeTypes.Add("sh", "application/x-bsh");
        mimeTypes.Add("shtml", "text/html");
        mimeTypes.Add("sid", "audio/x-psid");
        mimeTypes.Add("sit", "application/x-sit");
        mimeTypes.Add("skd", "application/x-koan");
        mimeTypes.Add("skm", "application/x-koan");
        mimeTypes.Add("skp", "application/x-koan");
        mimeTypes.Add("skt", "application/x-koan");
        mimeTypes.Add("sl", "application/x-seelogo");
        mimeTypes.Add("smi", "application/smil");
        mimeTypes.Add("smil", "application/smil");
        mimeTypes.Add("snd", "audio/basic");
        mimeTypes.Add("sol", "application/solids");
        mimeTypes.Add("spc", "application/x-pkcs7-certificates");
        mimeTypes.Add("spl", "application/futuresplash");
        mimeTypes.Add("spr", "application/x-sprite");
        mimeTypes.Add("sprite", "application/x-sprite");
        mimeTypes.Add("src", "application/x-wais-source");
        mimeTypes.Add("ssi", "text/x-server-parsed-html");
        mimeTypes.Add("ssm", "application/streamingmedia");
        mimeTypes.Add("sst", "application/vnd.ms-pki.certstore");
        mimeTypes.Add("step", "application/step");
        mimeTypes.Add("stl", "application/sla");
        mimeTypes.Add("stp", "application/step");
        mimeTypes.Add("sv4cpio", "application/x-sv4cpio");
        mimeTypes.Add("sv4crc", "application/x-sv4crc");
        mimeTypes.Add("svf", "image/vnd.dwg");
        mimeTypes.Add("svr", "application/x-world");
        mimeTypes.Add("swf", "application/x-shockwave-flash");
        mimeTypes.Add("t", "application/x-troff");
        mimeTypes.Add("talk", "text/x-speech");
        mimeTypes.Add("tar", "application/x-tar");
        mimeTypes.Add("tbk", "application/toolbook");
        mimeTypes.Add("tcl", "application/x-tcl");
        mimeTypes.Add("tcsh", "text/x-script.tcsh");
        mimeTypes.Add("tex", "application/x-tex");
        mimeTypes.Add("texi", "application/x-texinfo");
        mimeTypes.Add("texinfo", "application/x-texinfo");
        mimeTypes.Add("text", "text/plain");
        mimeTypes.Add("tgz", "application/x-compressed");
        mimeTypes.Add("tif", "image/tiff");
        mimeTypes.Add("tr", "application/x-troff");
        mimeTypes.Add("tsi", "audio/tsp-audio");
        mimeTypes.Add("tsp", "audio/tsplayer");
        mimeTypes.Add("tsv", "text/tab-separated-values");
        mimeTypes.Add("turbot", "image/florian");
        mimeTypes.Add("txt", "text/plain");
        mimeTypes.Add("uil", "text/x-uil");
        mimeTypes.Add("uni", "text/uri-list");
        mimeTypes.Add("unis", "text/uri-list");
        mimeTypes.Add("unv", "application/i-deas");
        mimeTypes.Add("uri", "text/uri-list");
        mimeTypes.Add("uris", "text/uri-list");
        mimeTypes.Add("ustar", "application/x-ustar");
        mimeTypes.Add("uu", "application/octet-stream");
        mimeTypes.Add("vcd", "application/x-cdlink");
        mimeTypes.Add("vcs", "text/x-vcalendar");
        mimeTypes.Add("vda", "application/vda");
        mimeTypes.Add("vdo", "video/vdo");
        mimeTypes.Add("vew", "application/groupwise");
        mimeTypes.Add("viv", "video/vivo");
        mimeTypes.Add("vivo", "video/vivo");
        mimeTypes.Add("vmd", "application/vocaltec-media-desc");
        mimeTypes.Add("vmf", "application/vocaltec-media-file");
        mimeTypes.Add("voc", "audio/voc");
        mimeTypes.Add("vos", "video/vosaic");
        mimeTypes.Add("vox", "audio/voxware");
        mimeTypes.Add("vqe", "audio/x-twinvq-plugin");
        mimeTypes.Add("vqf", "audio/x-twinvq");
        mimeTypes.Add("vql", "audio/x-twinvq-plugin");
        mimeTypes.Add("vrml", "application/x-vrml");
        mimeTypes.Add("vrt", "x-world/x-vrt");
        mimeTypes.Add("vsd", "application/x-visio");
        mimeTypes.Add("vst", "application/x-visio");
        mimeTypes.Add("vsw", "application/x-visio");
        mimeTypes.Add("w60", "application/wordperfect6.0");
        mimeTypes.Add("w61", "application/wordperfect6.1");
        mimeTypes.Add("w6w", "application/msword");
        mimeTypes.Add("wav", "audio/wav");
        mimeTypes.Add("wb1", "application/x-qpro");
        mimeTypes.Add("wbmp", "image/vnd.wap.wbmp");
        mimeTypes.Add("web", "application/vnd.xara");
        mimeTypes.Add("wiz", "application/msword");
        mimeTypes.Add("wk1", "application/x-123");
        mimeTypes.Add("wmf", "windows/metafile");
        mimeTypes.Add("wml", "text/vnd.wap.wml");
        mimeTypes.Add("wmlc", "application/vnd.wap.wmlc");
        mimeTypes.Add("wmls", "text/vnd.wap.wmlscript");
        mimeTypes.Add("wmlsc", "application/vnd.wap.wmlscriptc");
        mimeTypes.Add("word", "application/msword");
        mimeTypes.Add("wp", "application/wordperfect");
        mimeTypes.Add("wp5", "application/wordperfect");
        mimeTypes.Add("wp6", "application/wordperfect");
        mimeTypes.Add("wpd", "application/wordperfect");
        mimeTypes.Add("wq1", "application/x-lotus");
        mimeTypes.Add("wri", "application/mswrite");
        mimeTypes.Add("wrl", "application/x-world");
        mimeTypes.Add("wrz", "model/vrml");
        mimeTypes.Add("wsc", "text/scriplet");
        mimeTypes.Add("wsrc", "application/x-wais-source");
        mimeTypes.Add("wtk", "application/x-wintalk");
        mimeTypes.Add("xbm", "image/x-xbitmap");
        mimeTypes.Add("xdr", "video/x-amt-demorun");
        mimeTypes.Add("xgz", "xgl/drawing");
        mimeTypes.Add("xif", "image/vnd.xiff");
        mimeTypes.Add("xl", "application/excel");
        mimeTypes.Add("xla", "application/excel");
        mimeTypes.Add("xlb", "application/excel");
        mimeTypes.Add("xlc", "application/excel");
        mimeTypes.Add("xld", "application/excel");
        mimeTypes.Add("xlk", "application/excel");
        mimeTypes.Add("xll", "application/excel");
        mimeTypes.Add("xlm", "application/excel");
        mimeTypes.Add("xls", "application/excel");
        mimeTypes.Add("xlsx", "application/excel");
        mimeTypes.Add("xlt", "application/excel");
        mimeTypes.Add("xlv", "application/excel");
        mimeTypes.Add("xlw", "application/excel");
        mimeTypes.Add("xm", "audio/xm");
        mimeTypes.Add("xml", "text/xml");
        mimeTypes.Add("xmz", "xgl/movie");
        mimeTypes.Add("xpix", "application/x-vnd.ls-xpix");
        mimeTypes.Add("xpm", "image/x-xpixmap");
        mimeTypes.Add("x-png", "image/png");
        mimeTypes.Add("xsr", "video/x-amt-showrun");
        mimeTypes.Add("xwd", "image/x-xwd");
        mimeTypes.Add("xyz", "chemical/x-pdb");
        mimeTypes.Add("z", "application/x-compress");
        mimeTypes.Add("zip", "application/x-compressed");
        mimeTypes.Add("zoo", "application/octet-stream");
        mimeTypes.Add("zsh", "text/x-script.zsh");
    }
} 
```

但是请注意，所有以“x”结尾的 Office 2007 文件格式都是 zip 压缩的 XML 文档。所以这种方法不是 100% 安全的，但至少它可以帮助你过滤掉一些无效的。

# nltk - 使用 nltk wordnet 模块时出错

> ID：14275808
> 
> 赞同：0
> 
> 时间：2013-01-11T10:08:36.477
> 
> 标签：nltk

我想在我的python代码中使用nltk wordnet模块。我已经安装了nltk，但是在我写的时候它给出了一些错误消息->

> > > from nltk.corpus import wordnet as wn （没有错误，它导入成功） wn.synsets('idle') （它给出错误消息，因为 -> 对象模块没有名为 'synsets' 的属性）

# c# - 使用 c# 在所需位置（文件夹）上将 DataTable 导出为 CSV

> ID：14275809
> 
> 赞同：0
> 
> 时间：2013-01-11T10:08:39.543
> 
> 标签：c#, asp.net, response.write

我的任务是将数据导出到 csv 文件中。除了目标文件夹之外，一切都运行良好。每次将 csv 文件保存在 Windows 下载 (C:\Users\xxxpurt\Downloads) 文件夹中。我想通过指定可以从 SaveFileDialog 获取的位置来使用所需的位置来保存 csv 文件。这可能吗？如果是，那么如何指定从 saveFiledialog 检索到响应的路径？塔

```
string location = string.Empty;
SaveFileDialog saveCSVDialog = new SaveFileDialog();

saveCSVDialog.InitializeLifetimeService();
saveCSVDialog.Filter = "csv files (*.csv)|*.csv|All files (*.*)|*.*";
saveCSVDialog.FilterIndex = 1;
saveCSVDialog.DefaultExt = ".csv";
saveCSVDialog.RestoreDirectory = true;

DialogResult res = STAShowDialog(saveCSVDialog); //STAShowDialog uses threading

if (res == DialogResult.OK)
{
   location = saveCSVDialog.FileName;
}

Response.Clear();
Response.Buffer = true;
Response.AddHeader("content-disposition", string.Format("attachment;filename={0}",        Server.HtmlEncode(location)));
Response.Charset = "";
Response.ContentType = "application/text";

.........Fetch columns and rows using loops.........

Response.Output.Write(sb.ToString());
Response.Flush();
Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:31:21.253

如评论中所述，您无法决定服务器在客户端上存储文件的位置。而且你真的不应该在你的服务器代码中创建 UI 元素。

如果你想在客户端强制保存文件对话框，你可以试试这个：

```
Response.AppendHeader("content-disposition", "attachment; filename=somefile.csv");
Response.ContentType = "text/csv"; 
```

然而，最终由客户端浏览器来决定它如何处理它，但大多数都会显示一个保存文件对话框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T10:26:17.907

放

```
 SaveFileDialog saveCSVDialog = new SaveFileDialog(); 
```

作为类属性和

```
saveCSVDialog.InitializeLifetimeService();
saveCSVDialog.Filter = "csv files (*.csv)|*.csv|All files (*.*)|*.*";
saveCSVDialog.FilterIndex = 1;
saveCSVDialog.DefaultExt = ".csv";
saveCSVDialog.RestoreDirectory = true; 
```

在类构造函数中

因为如果你把它们放在一个方法中，每次你调用那个方法你都会得到新的实例`SaveFileDialog`

# android - 尝试“设计”第一个安卓原生应用

> ID：14275810
> 
> 赞同：0
> 
> 时间：2013-01-11T10:08:41.937
> 
> 标签：android, android-layout, user-interface, user-experience, mobile-application

我正在尝试“设计”第一个适用于 android 的原生应用程序。首先，我逐行关注[http://developer.android.com/training/basics/firstapp/starting-activity.html这个页面。](http://developer.android.com/training/basics/firstapp/starting-activity.html)但是在教程结束时，我不明白我应该从哪里开始 UI/html。由于我是一名 UI 设计师，我期待 HTML5/CSS3 自定义设计的 UI 部署在 Android 应用程序中。

如何在 android sdk/eclipse 环境中部署 HTML5/CSS3 自定义 UI？如果我在概念上是错误的，那么 android UI 设计的正确程序是什么？

谢谢-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:16:02.187

原生 Android**不是**HTML5/CSS3 ！

原生 Android 开发是使用 Java 完成的，Java 是一种面向对象的语言。Android 框架从 XML 中解析很多东西来构建 UI 和创建资源，但仍然是 Java。

如果你想使用 HTML5/CSS3，你想做的是一个网络应用程序。你可以把它伪装成一个 webview，但它仍然是一个 webapp，并且性能和任何其他 webapp 一样差。

所以，回到你的问题，你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:14:22.627

您参加的培训是关于用 Java 编写本机 android 应用程序。在本机应用程序中，用户界面不是使用 HTML/CSS 完成的。

如果你有一个 HTML5/CSS 的网站，你可以在浏览器或`WebView`本地应用程序中查看它。

# python - 如何在生产中将 celery 作为守护进程运行？

> ID：14275821
> 
> 赞同：19
> 
> 时间：2013-01-11T10:09:37.053
> 
> 标签：python, django, celery

我从这里的代码在 /etc/defaults/ 中创建了一个 celeryd 文件：

[https://github.com/celery/celery/blob/3.0/extra/generic-init.d/celeryd](https://github.com/celery/celery/blob/3.0/extra/generic-init.d/celeryd)

现在，当我想将 celeryd 作为守护进程运行并执行以下操作时： sudo /etc/init.d/celerdy 它说找不到命令。我哪里错了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T10:52:26.623

我不确定你在这里做什么，但这些是将 celery 作为守护进程运行的步骤。

1.  [您在链接https://github.com/celery/celery/blob/3.0/extra/generic-init.d/celeryd](https://github.com/celery/celery/blob/3.1/extra/generic-init.d/celeryd)中引用的文件 需要以名称复制到您的`/etc/init.d`文件夹中 `celeryd`
2.  然后，您需要在文件夹 中使用上述脚本使用`/etc/default`的名称 创建一个配置文件。`celeryd`该配置文件基本上定义了上述脚本使用的某些变量和路径。这是[一个示例配置。](http://docs.celeryproject.org/en/latest/userguide/daemonizing.html#example-configuration)
3.  这个链接[Generic init scripts](http://docs.celeryproject.org/en/latest/userguide/daemonizing.html#generic-init-scripts)解释了流程，可以参考

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-09T20:52:31.583

我发现这个链接非常有用：[How to write an Ubuntu Upstart job for Celery (django-celery) in a virtualenv](https://stackoverflow.com/questions/10250682/how-to-write-an-ubuntu-upstart-job-for-celery-django-celery-in-a-virtualenv?rq=1)

稍微调整一下。我有一个芹菜工人正在使用这个脚本运行：

（使用 ubuntu 新贵）

命名 iamcelery.conf 并将其放在 /etc/init 中（注意：不是 init.d）

```
# iamcelery -runs the celery worker as my virtual env user
#
#
# This task is run on startup to start the celery worker as my vritual env user

description "runs the celery worker"
author "michel van Leeuwen <michel@iamit.nl>"

start on runlevel [2345]
stop on runlevel [!2345]

# retry if ended unexpectedly
respawn
# limit the retries to max 15 times with timeouts of 5 seconds
respawn limit 15 5

# Time to wait between sending TERM and KILL signals
kill timeout 20

task
script
  exec su -s /bin/sh -c 'exec "$0" "$@"' <place here your unprovilegd username> -- srv/<here the path of your django project>/bin/django celeryd -BE -l info
end script 
```

现在你可以启动这个 scipt（它也在服务器启动时启动）：

```
sudo start iamcelery 
```

或停止：

```
sudo stop iamcelery 
```

或检查其状态：

```
sudo status iamcelery 
```

我不确定这是最好的方法……但是……经过长时间的尝试和错误，试图让 initd 脚本正常工作……（没有成功）……这终于奏效了。

**编辑 2013 年 6 月 8 日** 我在这里给出的脚本最终似乎以 root 身份运行。现在我改变了这个：

```
script
  su <place here your unprovilegd username>
  cd /srv/<here the path of your django project>/
  exec bin/django celeryd -BE -l info
end script 
```

进入：

```
script
  exec su -s /bin/sh -c 'exec "$0" "$@"' <place here your unprovilegd username> -- srv/<here the path of your django project>/bin/django celeryd -BE -l info
end script 
```

这很有效，所有的功劳都归功于这个问题的答案： [How to write an Ubuntu Upstart job for Celery (django-celery) in a virtualenv](https://stackoverflow.com/questions/10250682/how-to-write-an-ubuntu-upstart-job-for-celery-django-celery-in-a-virtualenv)

**编辑 2013 年 9 月 5 日**

剩下一件小事：我必须在控制台中的 start 命令之后执行 ctrl-c （并在此之后进行状态检查）：如果有人知道这一点：留在命令中，我可以更新这个答案。 ..

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-09T20:57:37.127

为此，我通常使用[主管](http://supervisord.org/)（加上[django-supervisor） 。](https://github.com/rfk/django-supervisor)这样，您不需要弄清楚如何在应用程序中对每个进程进行守护进程（其中您至少有一个托管 django 的网络服务器，加上 celery，实际上还有您用来支持这两者的任何其他中间件）。Supervisor 知道如何将自己作为守护进程运行，而您的所有其他进程都作为 supervisor 的子进程运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-07T06:06:15.063

正如 Marcin 在他的回答中解释的那样，主管通常是人们最终使用的东西，但是如果您正在寻找可以与 python3 一起使用的东西并且不能等待主管的版本 4，我认为它将支持 python3，那么您可以去与[马戏团](http://circus.readthedocs.org)。安装后，您只需要一个 circus.ini 文件，该文件将包含您想要守护的所有进程，然后运行该示例 circus.ini 可能如下所示：

```
[watcher:celery]
cmd = full_path/python3.4 full_path/manage.py celeryd -B -l info

[watcher:celerycamera]
cmd = full_path/python3.4 full_path/manage.py celery events --camera=djcelery.snapshot.Camera

[watcher:dceleryflower]
cmd = full_path/python3.4 full_path/manage.py celery flower -A your_app_name --basic_auth=username:password --port=5555 
```

如果您想要更多详细信息，我在这里有一篇与[此](http://aameer.github.io/circus-as-an-alternative-to-supervisor/)相关的帖子。希望它可以节省一些时间。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-09T21:22:46.263

注意：在 ubuntu 16.04 中，带有 .conf 文件的分析器不再工作。

我创建了一个 .service 文件并将其放入 /etc/systemd/system/

我可以用

须藤服务我的服务状态

须藤服务我的服务开始

须藤服务我的服务停止

作为命令

例如这个文件：

我的服务。服务：

```
[Unit] 
Description=My celery worker 

[Service]
WorkingDirectory=/srv/my-project-path
User=buildout
Group=buildout
Restart=on-failure
RestartSec=20 5
ExecStart=/srv/my-project/bin/django celeryd -BE

[Install]
WantedBy=multi-user.target
Alias=myservice.service 
```

请注意，我使用 buildout，因此在 bin/django 的 setad 中，大多数用户需要使用 python 的路径并改用 mange.py。

基于： http: [//minecraft.gamepedia.com/Tutorials/Ubuntu_startup_script](http://minecraft.gamepedia.com/Tutorials/Ubuntu_startup_script)（参见 with systemd 部分）

# google-maps - 是否有一些简单的方法可以在 API V3 中获取 map.fromLatLngToDivPixel？

> ID：14275823
> 
> 赞同：0
> 
> 时间：2013-01-11T10:09:42.107
> 
> 标签：google-maps, google-maps-api-3

> **可能重复：**
> [如何在 Google Maps API V3 中调用 fromLatLngToDivPixel？](https://stackoverflow.com/questions/1538681/how-to-call-fromlatlngtodivpixel-in-google-maps-api-v3)

```
aPoint=map.fromLatLngToDivPixel(labelA.getPoint());
bPoint=map.fromLatLngToDivPixel(labelB.getPoint()); 
```

我尝试了 Overlay 方法，但失败了，因为我需要将变量返回给函数：

```
function LabelLatLongSort(a,b)
{
    labelA = eval("label_"+a.deviceId);
    labelB = eval("label_"+b.deviceId);
    longOffset = eval("offsetOverlapWith_"+a.customId);
    overlay = new google.maps.OverlayView();
    overlay.draw = function() {};
    overlay.setMap(map);
    google.maps.event.addListenerOnce(map, 'idle', function() {
     aPoint=overlay.getProjection().fromLatLngToDivPixel(labelA.getPoint()); 
     bPoint=overlay.getProjection().fromLatLngToDivPixel(labelB.getPoint());
    });             
     diffLat = bPoint.y-aPoint.y;
     diffLong = aPoint.x-bPoint.x; 
    if (Math.abs(diffLong)>longOffset) return diffLong;
    if (diffLat==0)
    {
        return b.deviceId-a.deviceId;
    }
    return diffLat;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:19:40.230

OverlayView 方法就是这样做的方法。如果它不起作用，则可能是因为在您尝试获取叠加投影之前地图尚未完成加载。

创建地图和叠加层后，等待地图空闲事件触发，然后尝试使用叠加层。

```
google.maps.event.addListenerOnce(map, 'idle', function() {
    aPoint=overlay.getProjection().fromLatLngToDivPixel(labelA.getPoint()); 
    bPoint=overlay.getProjection().fromLatLngToDivPixel(labelB.getPoint()); 
}); 
```

**编辑** - 更新答案以反映问题变化

每次调用函数时都创建覆盖并等待空闲事件不是一个好主意。您应该创建一次地图和叠加层，并在地图加载后继续应用程序。

例如

```
var map, overlay;

var labelLatLongSort = function(a, b) {
    labelA = eval("label_"+a.deviceId);
    labelB = eval("label_"+b.deviceId);
    longOffset = eval("offsetOverlapWith_"+a.customId);
    aPoint=overlay.getProjection().fromLatLngToDivPixel(labelA.getPoint()); 
    bPoint=overlay.getProjection().fromLatLngToDivPixel(labelB.getPoint());
    diffLat = bPoint.y-aPoint.y;
    diffLong = aPoint.x-bPoint.x; 
    if (Math.abs(diffLong)>longOffset) return diffLong;
    if (diffLat==0) {
        return b.deviceId-a.deviceId;
    }
    return diffLat;
}

var init = function(callback) {
    map = new google.maps.Map(div, options);
    overlay = new google.maps.OverlayView();
    overlay.draw = function() {};
    overlay.setMap(map);
    google.maps.event.addListenerOnce(map, 'idle', function() {
        callback();
    });
}

var startApp = function() {
    var diffLat = labelLatLongSort(a, b);
}

// start application on DOM load
init(startApp); 
```

我在这里所做的是将我的应用程序代码放入一个名为的函数中，并将其作为回调`startApp`传递给该函数。`init`一旦`init`函数通过等待`idle`事件加载了地图，它就会调用回调函数。

根据您的应用程序，您可能需要稍微更改设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:15:27.853

```
var overlay = new google.maps.OverlayView();
var point = overlay.getProjection().fromLatLngToDivPixel(latLng); 
```

# .net - WSDL是用来描述WCF的吗

> ID：14275826
> 
> 赞同：0
> 
> 时间：2013-01-11T10:09:56.890
> 
> 标签：.net, wcf, web-services, wsdl

WSDL代表Web服务描述语言，用于描述Web Service，那么它是否也用于描述WCF，如果是，则svcutil.exe是否只是WCF中用于​​WSDL描述数据的工具。同样对于 WCF，据说它适用于面向服务的架构，因此 ASP.net WebService 也适用于相同或不同的架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:58:51.837

WSDL 用于帮助消费者了解如何*使用*Web 服务。WCF 是一种可用于创建和使用 Web 服务的技术。WCF 是可用于实现 SOA 的可能支持技术之一。WCF 是一种比 ASMX 更新、更灵活且可配置的 Web 服务技术。

# oracle - 如何在控制文件中设置 sqlldr 日志文件

> ID：14275828
> 
> 赞同：4
> 
> 时间：2013-01-11T10:10:03.993
> 
> 标签：oracle, sql-loader

我有一个 sqlldr (Oracle SQL Loader) 控制文件（比如 myControlFile.ctl），运行时一切正常。但是，它将日志写入名为 myControlFile 的文件中，我希望将其称为 myControlFile.log

我已经阅读了 sqlldr 的文档，我知道我可以将日志文件设置为命令行参数，但我想在控制文件本身中设置它。考虑到我可以通过这种方式设置错误并丢弃文件名，这似乎不是不合理的。

我错过了什么？我目前在 Windows 上运行它，但最终将在 Unix 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T11:46:48.667

相信可以在参数文件中指定日志文件，在命令行用PARFILE参数指定。

可能必须将日志文件名传递给 sql loader 可执行文件，以便始终记录读取控制文件失败或其他致命错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-19T21:10:17.810

您可以在对控制文件的 sqlldr 调用中指定 sqlldr 日志文件的写入位置，而不是在控制文件本身中。

如：sqlldr用户/密码/folder/folder2/controlfile.ctl log=/folder/folder3/logfile.log

# common-lisp - 查找所有专门针对给定类型的方法

> ID：14275830
> 
> 赞同：6
> 
> 时间：2013-01-11T10:10:09.617
> 
> 标签：common-lisp

有没有办法找到所有专门针对给定类型的函数？

我设想你可以从 repl 中执行一些东西`(find-all-specializing-methods 'my-class)`，它会返回一个方法列表，比如`(mypackage1:my-method-1 my-package2:my-method-2 etc.)`

我认为必须有一种简单的方法来做到这一点，因为 MOP 本身可能需要存储这样一个列表来决定调用哪些方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:27:34.673

为了发现您可以查看`slime-who-specializes`并了解如何为您的设置执行此操作。

按照定义，我到这里为止（对于 SBCL）：

```
#+#.(swank-backend::sbcl-with-xref-p)
(progn
  (defmacro defxref (name &optional fn-name)
    `(defimplementation ,name (what)
       (sanitize-xrefs   
        (mapcar #'source-location-for-xref-data
                (,(find-symbol (symbol-name (if fn-name
                                                fn-name
                                                name))
                               "SB-INTROSPECT")
                  what)))))
  (defxref who-calls)
  (defxref who-binds)
  (defxref who-sets)
  (defxref who-references)
  (defxref who-macroexpands)
  #+#.(swank-backend:with-symbol 'who-specializes-directly 'sb-introspect)
  (defxref who-specializes who-specializes-directly)) 
```

这个功能是针对不同的 Lisps 单独实现的，所以如果你需要特定的细节，你需要查看：`swank-<your lisp>.lisp`文件并搜索`who-specializes`通用函数的实现。

# javascript - div 和 p 标签浮动很奇怪而且不正确

> ID：14275832
> 
> 赞同：0
> 
> 时间：2013-01-11T10:10:11.700
> 
> 标签：javascript, html, css

在这个 url1： [http](http://htmlandcssbook.com/code-samples/chapter-15/float.html) ://htmlandcssbook.com/code-samples/chapter-15/float.html 中，文本向左移到 float 元素。

但是在这个 url2 中：http://htmlandcssbook.com/code-samples/chapter-15/columns-two.html [如果](http://htmlandcssbook.com/code-samples/chapter-15/columns-two.html) 我取消类“column2of2”的浮动属性，则 div 不会留在 column1of2 之外。

我只是不知道为什么在第一个 url 中的文本停留在浮动 div 之外，但在第二个 url 中，类“column2of2”不能停留在浮动 div 之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:16:32.563

**在第一个 url 中，引号在一个元素**主体中向右浮动。这就是文本环绕它的原因。

**在第二个 url 中，内容用两个 div**相互分隔，这就是为什么引用文本不围绕内容的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:04:15.263

**在您的每个示例中，内容的显示都是完全正确的。**

在第一个例子中，“正确”的例子。文本显示在页面的主体中，另一个 div 位于主体内部，浮动在其右侧。内容无法显示在浮动 div 占据的区域，因为它的显示类型（默认情况下）`display: block;`见[http://www.w3.org/wiki/CSS/Properties/display](http://www.w3.org/wiki/CSS/Properties/display)

在第二种情况下，虽然文本仍显示在页面正文中，但您会观察到页面正文中**包含两个单独的 div。**由于它们的默认显示属性，就像第一个一样，`display: block;`没有任何东西可以重叠。

* * *

* * *

请参阅这两个 jsfiddles，其中我强调了这些东西占据的区域：

.

“正确”显示：http: [//jsfiddle.net/vxVfg/](http://jsfiddle.net/vxVfg/)

“不正确”显示：http: [//jsfiddle.net/duTEt/1/](http://jsfiddle.net/duTEt/1/)

.

这是第二个，它不是“正确”的工作：.

“不正确”显示 - 已修复： http: [//jsfiddle.net/duTEt/3/](http://jsfiddle.net/duTEt/3/) *（如果您对下面的解释感到困惑，我在 jsfiddle 的 HTML 部分中编辑的内容留下了 3-4 行的空白，只需打开它并查看）*

.

**这是我改变的：**

**规则**

```
.column2of2 
      {
        background: green;
        float: left;
        width: 300px;
        margin: 10px;
      } 
```

成为：

```
.column2of2 
      {
        background: green;
        float: right; /* THIS WAS CHANGED */
        width: 300px;
        margin: 10px;
      } 
```

**为什么？好吧，我们希望它在右侧。**

* * *

**HTML 标记中的位置：**

最后，我拿了这个：

```
 <div class="column2of2">
            <h3>Bicycle Timeline</h3>
            <ul>
                <li>1817: Draisienne</li>
                <li>1865: Velocipede</li>
                <li>1870: High-wheel bicycle</li>
                <li>1876: High-wheel safety</li>
                <li>1885: Hard-tired safety</li>
                <li>1888: Pneumatic safety</li>
            </ul>
        </div> 
```

并将其放在包含的 div 中，应该是这样，所以它变成了：

```
<h1>The Evolution of the Bicycle</h1>
        <div class="column1of2">

 /* I PUT IT HERE */

      <div class="column2of2">
            <h3>Bicycle Timeline</h3>
            <ul>
                <li>1817: Draisienne</li>
                <li>1865: Velocipede</li>
                <li>1870: High-wheel bicycle</li>
                <li>1876: High-wheel safety</li>
                <li>1885: Hard-tired safety</li>
                <li>1888: Pneumatic safety</li>
            </ul>
        </div>

 /* IT ENDS HERE */

            <h3>The First Bicycle</h3>
            <p>In 1817 Baron von Drais invented 
```

# php - 小文件是否值得在服务器上压缩

> ID：14275834
> 
> 赞同：-1
> 
> 时间：2013-01-11T10:10:15.013
> 
> 标签：php, apache, gzip

是否有一点（就文件大小而言）不再使用 gzip，因为服务器压缩和浏览器解压缩所需的时间与发送压缩文件所节省的时间相平衡？

因为我们在共享服务器上，并且我们的托管服务提供商不允许我们使用 Apache 的压缩，所以我们使用 PHP 来 gzip 我们的页面。如果有时间优势，将 php 排除在小页面文件之外是很容易的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:12:49.693

压缩在文本类型文件上效果更好。如果您压缩 css 和 js 文件，您将受益。但是你不应该**只压缩**这些文件，而是**将它们编译成一个单元并压缩后记**。

例如，如果您有 50 个每个 20 字节的 css 文件，则仅压缩 20 字节根本不会减少时间。您应该将它们编译成一个单元。那将是 1000 字节的文件。然后压缩它。这也将**减少 49 个 http 请求**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:26:55.337

我认为对于较大的文件（> 50KB），用 PHP 压缩它们是有意义的。根据我的经验，文本文件（CSS、JS、静态 HTML）的压缩比至少为 1:10，这是显着的差异。

但是我不建议将它用于小文件，因为正如您所说，您的网络服务器不会自动 gzip 输出并且 PHP 本身有一些开销（午餐过程、分配内存、压缩文件等）所以我认为从用户的角度来看不会有任何性能优势。只是您的服务器会产生更多负载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:14:50.323

由于您使用 PHP 压缩文件，因此请确保为浏览器发送正确的标头以缓存它们。如果它们是动态文件（php 输出），那么根据我的经验，总是压缩它们比发送未压缩的文件要好

# jquery - jquery 创建按键事件

> ID：14275838
> 
> 赞同：0
> 
> 时间：2013-01-11T10:10:31.163
> 
> 标签：jquery, events, keypress

我们开发了一个 firefox 插件来使用来自外部源的一些数据填充表单。该插件有一个键盘快捷键“ALT+SHIFT+L”

我们想要做的是，在页面上放置一个按钮并在按钮的点击事件上创建一个按键事件。所以当我们点击按钮时，我们的插件应该填写表格。

我们如何使用 jquery 来完成这项工作。

ps 我们的插件已经有一个填写表单的按钮，但是它停留在firefox的导航栏中。我们正在使用 r-kiosk 插件来使用 firefox 全屏，例如 kiosk 应用程序。所以我们需要在我们的页面中放一个按钮来触发按键。

谢谢。任何帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:24:43.280

如果您希望在单击按钮时触发 Keydown 事件，您可以使用它。

```
$("#button").click(function() {
   var e = $.Event("keydown");
   e.which = 108; // # key code for l
   e.altKey = true;
   e.shiftKey = true;
   $(document).trigger(e);
}); 
```

# java - 使用 Maven 3 API 的程序化构建

> ID：14275841
> 
> 赞同：10
> 
> 时间：2013-01-11T10:10:43.867
> 
> 标签：java, maven

在你问为什么我可以只生成一个进程来执行 mvn 之前，我希望通过 Maven API 执行一个 Maven 构建，这样我就可以收集关于构建中发生的事情、产生的工件等的信息。在依赖之后`org.apache.maven:maven-core:jar:3.0.4`，我写了以下方法试图做这样的事情：

```
public static void build(File directory, File pom) {
    Maven maven = new DefaultMaven();
    MavenExecutionRequest exec = new DefaultMavenExecutionRequest();
    exec.setBaseDirectory(directory);
    exec.setPom(pom);
    MavenExecutionResult result = maven.execute(exec);
    MavenProject proj = result.getProject();
    Artifact art = proj.getArtifact();
    System.out.println(art);
} 
```

`maven.execute`但是，由于空指针异常，此代码失败。由于`DefaultMaven`未初始化私有字段，这些空指针异常基本上无处不在。它们都带有注释`@Required`，所以我猜这与 Plexus 有关。

如何成功使用 Maven 执行这样的构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:14:26.190

您需要使用实际的 Maven 嵌入 API：

[http://maven.apache.org/ref/3.0/maven-embedder/apidocs/index.html](http://maven.apache.org/ref/3.0/maven-embedder/apidocs/index.html)

要查看示例，请查看 M2Eclipse 的开源。

现在，这个组件的名字并不是很好。它实际上是一个旨在制作 CLI 的便利包装器。所以，你要做的是阅读它的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-11T12:19:51.137

Internet 搜索如何使用 API 进行 Maven 构建总是将我带到这里，所以我想记录一下我是如何解决这个问题的。不要直接使用 DefaultMaven。相反，使用 maven-verifier 项目：

```
<dependency>
    <groupId>org.apache.maven.shared</groupId>
    <artifactId>maven-verifier</artifactId>
    <version>1.6</version>
</dependency> 
```

然后您可以使用 Verifier 类来构建项目。唯一的问题是传递正确的环境变量：

```
String baseDir = "<root path of the maven project you want to build>";
Map<String,String> env=new HashMap<>();
env.put("maven.multiModuleProjectDirectory", baseDir);

try {
    Verifier v=new Verifier(baseDir);
    v.executeGoals(Arrays.asList("clean","package"),env);
} catch (Exception e) {
    e.printStackTrace();
} 
```

这导致我正在构建项目，并在 baseDir 中创建了一个带有 maven 输出的 log.txt 文件。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:34:08.773

我从来没有真正使用过这个 API，不过看起来很有趣。

我看不到你在哪里设定你的目标？

您可能需要`setGoals`在 Maven 执行请求上调用：

[http://maven.apache.org/ref/3.0.3/maven-core/apidocs/org/apache/maven/execution/DefaultMavenExecutionRequest.html#setGoals%28java.util.List%29](http://maven.apache.org/ref/3.0.3/maven-core/apidocs/org/apache/maven/execution/DefaultMavenExecutionRequest.html#setGoals%28java.util.List%29)

# c# - ASP.Net 登录失败的奇怪错误

> ID：14275842
> 
> 赞同：2
> 
> 时间：2013-01-11T10:10:47.780
> 
> 标签：c#, asp.net, sql-server

我有一个 ASP.Net 3.5 (C#) Web 应用程序，它使用 Sql Server 2008 作为其数据库。在那个数据库中是一个标准的用户表，其中包含用户名/密码列，我有一个简单的登录表单来验证用户。登录页面简单地查询表以匹配输入值的用户名/密码组合。如果用户输入有效的用户名/密码，它可以正常工作并继续进行，但是如果由于某种原因无效组合，它会引发错误，而不是简单地找不到匹配项。错误是：

> System.Web 消息：引发了“System.Web.HttpUnhandledException”类型的异常。堆栈跟踪：在 System.Web.UI.Page.HandleError(Exception e) 在 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint ) 在 System.Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page.ProcessRequest(HttpContext context) 在 ASP.login_aspx.ProcessRequest(HttpContext context) 在 c:\Windows\Microsoft.NET\Framework64\v2 .0.50727\Temporary ASP.NET Files\root\55c40ade\918a8ce7\App_Web_xyhtxem7.17.cs：System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 处 System.Web.HttpApplication 的第 0 行。 ExecuteStep(IExecutionStep 步骤, Boolean& completedSynchronously）完成错误文本：System.Web.HttpUnhandledException：引发了“System.Web.HttpUnhandledException”类型的异常。---> System.Data.SqlClient.SqlException：由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning（TdsParserStateObject stateObj） 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream , BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) 在 System.

任何想法发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:14:30.127

如果不匹配，则 sql 结果可能为 NULL。因此，您没有得到该方法的任何有效结果。如果你做这样的事情

```
SELECT * FROM xxx WHERE username = {0} and password = {1} 
```

尝试

```
SELECT COUNT(*) FROM xxx WHERE username = {0} and password = {1} 
```

然后你得到 int 值 0 或 >0 来验证。但是向我们展示代码以帮助更多指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:27:51.183

这是一个猜测，因为您没有提供足够的信息来确定。

听起来您已经编写了自己的提供程序，或者正试图以某种方式规避它。

如果您无法登录，看起来代码会自动回退到您在 web.config 中仍有连接字符串的默认提供程序。可能是视觉工作室“有用”添加的默认连接字符串。这是一个 mdf，这是当 mdf 不存在时它抛出的错误。

该数据库显然不存在，并且由于该错误而失败。

因此，您可能需要摆脱 web.config 中的提供程序或修复您自己的提供程序或修复您验证用户的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:41:45.657

您正在使用会员提供程序正在尝试连接到 sql 服务器 - 我猜您很可能正在尝试通过提供数据库文件名来使用本地 sql express 实例。
在这种情况下，如果数据库不存在，提供者会尝试创建数据库，并且帐户（您的代码在其下运行）可能需要对该文件夹具有读/写权限。或者你甚至可能没有在你的机器上安装 sqlexpress 等。

我建议您检查连接字符串并尝试从那里调试 - 例如，尝试连接到该数据库（远程/本地）或创建该数据库（以及所需的架构）（如果不存在）。将连接字符串更改为常规连接字符串（而不是提供文件名）等等......

有关创建会员提供程序所需的数据库和模式的更多帮助，请参阅本文：[http ://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server -CS](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:31:33.840

我在这里发现了问题。我没有为我的应用程序使用（或至少尝试使用）任何成员资格提供程序，但我正在为我的登录页面使用内置的登录控件。我正在处理提交按钮 OnClick 事件，该事件工作正常并在有效凭据时重定向但在无效时不重定向，我相信这是问题的根源，因为 Login.Authenticate 事件被触发但未处理。通过重新编写代码并使用我自己的提交表单而不是登录控件，它工作得很好。

# android - 使用 contentprovideroperation 获取 nullPointerException

> ID：14275845
> 
> 赞同：0
> 
> 时间：2013-01-11T10:10:57.127
> 
> 标签：android

我正在尝试通过代码更新 android 中的联系人照片。使用内容提供者操作我尝试更新照片。代码片段中添加了更新查询。但什么也没有发生。我的代码片段如下。

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == 1 && data != null)

    {

        Uri contactData = data.getData();

        String[] projection = new String[] { Data.RAW_CONTACT_ID,
                Photo.PHOTO };

        Cursor c = getContentResolver().query(Data.CONTENT_URI, projection,
                null, null, null);

        if (c.moveToFirst()) {

            String dataid = c.getString(c
                    .getColumnIndex(Data.RAW_CONTACT_ID));
            String first = String.valueOf(dataid);

            byte[] dataid1 = c.getBlob(c.getColumnIndex(Photo.PHOTO));
            String first1 = String.valueOf(dataid1);
            System.out.println("fisttry");
            System.out.println(dataid);
            System.out.println(first);
            System.out.println(first1);
            System.out.println(dataid1);

            try {

                System.out.println("fisttry");
                ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

                ContentProviderOperation.Builder op = ContentProviderOperation
                        .newUpdate(ContactsContract.Data.CONTENT_URI);

                op.withSelection(
                        ContactsContract.Data.RAW_CONTACT_ID + "=?"
                                + " AND " + ContactsContract.Data.MIMETYPE
                                + "=?",
                        new String[] {
                                String.valueOf(dataid),
                                ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE });
                op.withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE);
                op.withValue(ContactsContract.CommonDataKinds.Photo.PHOTO,
                        photo);

                ops.add(op.build());
                System.out.println(op);
                System.out.println(ops);
            } catch (Exception e) {
                e.printStackTrace();
            }

            // Update

            try {
                this.getContentResolver().applyBatch(
                        ContactsContract.AUTHORITY, ops);
                System.out.println("secondtry");
            } catch (RemoteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (OperationApplicationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }

} 
```

堆栈跟踪：

```
01-12 01:19:22.202: E/AndroidRuntime(16057): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/contacts/lookup/0r69-303A36303A365A/71 (has extras) }} to activity {com.ileaf.camerafun/com.ileaf.camerafun.TrialActivity}: java.lang.NullPointerException
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3521)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3563)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread.access$2800(ActivityThread.java:126)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2068)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.os.Looper.loop(Looper.java:123)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread.main(ActivityThread.java:4633)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at java.lang.reflect.Method.invokeNative(Native Method)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at java.lang.reflect.Method.invoke(Method.java:521)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at dalvik.system.NativeStart.main(Native Method)
01-12 01:19:22.202: E/AndroidRuntime(16057): Caused by: java.lang.NullPointerException
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.content.ContentProviderProxy.applyBatch(ContentProviderNative.java:454)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.content.ContentProviderClient.applyBatch(ContentProviderClient.java:95)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.content.ContentResolver.applyBatch(ContentResolver.java:622)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at com.ileaf.camerafun.TrialActivity.onActivityResult(TrialActivity.java:513)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.Activity.dispatchActivityResult(Activity.java:3890)
01-12 01:19:22.202: E/AndroidRuntime(16057):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3517)
01-12 01:19:22.202: E/AndroidRuntime(16057):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T17:04:20.823

这是一个活动生命周期问题。当你调用`startActivityForResult()`时，启动的 Activity 会被暂停，如果 Android 资源不足，它会被完全销毁。

当您从开始的活动返回时，调用`onActivityResult()`会在活动生命周期的早期发生 - 例如，`onActivityResult()`如果活动实际被销毁，则在片段中调用“getActivity()”将返回 null，但返回非 null如果它没有被破坏，它的价值。

因此，您无法在该`onActivityResult()`方法中可靠地执行任何复杂的操作。我在这里使用了两种模式。第一种是仅仅使用`onActivityResult()`将响应存储在实例变量中，然后在`onResume()`方法中采取行动；二是有条件地执行代码：

```
@Override
public void onActivityResult(final int requestCode, final int resultCode, final Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if (getActivity() != null) {
        // as we have an activity, it wasn't destroyed, and we can do stuff here
    }

} 
```

您使用哪种解决方案取决于您正在处理的场景。当通过数据意图返回瞬态数据时，我使用第一个解决方案（因为这是我获得它的唯一方法），而当调用`onActivityResult()`只是通知我应该从其他地方存储的数据刷新视图时，我使用第二个解决方案。

# simulation - 网络模拟

> ID：14275853
> 
> 赞同：0
> 
> 时间：2013-01-11T10:11:13.630
> 
> 标签：simulation, simulator

用于`OPNET`模拟项目，当我运行模拟时，出现此错误。请问我该如何解决？

```
<<< Recoverable Error >>>                                                   |
| Process model (aodv_rte) compilation failed                                 |
| Errors given in file (C:\Users\Administrator\op_admin\tmp\cc_err_5640) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:36:11.947

打开一个新项目然后按编辑>首选项然后搜索网络然后向下滚动标签“离散事件模拟你会在它下面找到”网络模拟存储库“它的值是0默认设置它的值“stdmod”然后按应用然后好的，你的模拟现在可以正常工作了:)

# git - 在 Git 中合并但覆盖更改

> ID：14275856
> 
> 赞同：56
> 
> 时间：2013-01-11T10:11:20.407
> 
> 标签：git, conflict

当我将 Git 中的分支合并到 master 时，我经常会遇到合并冲突。有没有办法合并一个分支并覆盖当前分支中的东西？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-11T10:18:38.517

为您的命令添加`-X ours`参数。`git merge`

假设您在当地分支机构工作。然后，您想合并以下内容`master`：

```
git merge -X ours master 
```

另一方面，如果您*在*并且`master`想要将您的本地分支合并到`master`，那么@elhadi 正确地说您应该使用`theirs`：

```
git merge -X theirs somebranch 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T10:29:17.060

要覆盖您分支中的内容并接受他们的工作，您应该

```
git merge -X theirs {remote/branch} --> example:origin/master 
```

# java - 使用java打印带有驻留在as400 IFS文件夹中的嵌入式表的rtf文档

> ID：14275857
> 
> 赞同：0
> 
> 时间：2013-01-11T10:11:25.413
> 
> 标签：java, printing, rtf, ibm-midrange

我需要打印所有 rtf 文档（大约 100 个），存在于 as400 系统的 IFS 文件夹中。文档中嵌入了表格。

有人可以指导我如何进行吗？

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:41:52.157

你的问题看起来类似于[这个](https://stackoverflow.com/questions/7250083/rendering-and-printing-rtf-in-java)和[这个](https://stackoverflow.com/questions/6966088/spool-a-rtf-file-directly-to-a-lipi-printer-from-a-java-class)。

.rtf 是一种专有的 Microsoft 格式，这使得免费和开放的解决方案很难获得。这就是为什么您的 Java 程序调用 WordPad 进行打印可能更容易的原因。

```
"C:\Program Files\Windows NT\Accessories\wordpad.exe" /pt "whatever.rtf" 
```

# iphone - 将 UIView 图层转换为 UIImage

> ID：14275859
> 
> 赞同：11
> 
> 时间：2013-01-11T10:11:30.127
> 
> 标签：iphone, ios, objective-c, ipad

我在视图中使用 AVPlayerLayer 播放视频。我需要将视图转换为图像，我试过了

```
[myview.layer renderInContext:context]; 
```

但这只会给出黑色图像。我想在那个时候将该视图转换为带有视频的图像。这种转换将同时发生 0.05 秒。

我尝试使用 AVAssetImageGenerator。这给了我使用 Asset 的正确图像。但这需要更多时间，这对我的应用程序造成了一些性能问题。任何人都可以帮助我如何减少特定 CMTime 将视频转换为图像的过程。

下面是我的编码。

```
- (UIImage *)currentItemScreenShot
{
    AVPlayer *abovePlayer = [objVC player];
    if(imageGenerator == nil)
    {
        AVAsset *asset = [[[objVC player] currentItem] asset];
        imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    }

    CMTime time = [[abovePlayer currentItem] currentTime];
    if ([imageGenerator respondsToSelector:@selector(setRequestedTimeToleranceBefore:)] && [imageGenerator respondsToSelector:@selector(setRequestedTimeToleranceAfter:)]) {
        [imageGenerator setRequestedTimeToleranceBefore:kCMTimeZero];
        [imageGenerator setRequestedTimeToleranceAfter:kCMTimeZero];
    }

    CGImageRef imgRef = [imageGenerator copyCGImageAtTime:time
                                               actualTime:NULL
                                                    error:NULL];
    if (imgRef == nil) {
        if ([imageGenerator respondsToSelector:@selector(setRequestedTimeToleranceBefore:)] && [imageGenerator respondsToSelector:@selector(setRequestedTimeToleranceAfter:)]) {
            [imageGenerator setRequestedTimeToleranceBefore:kCMTimePositiveInfinity];
            [imageGenerator setRequestedTimeToleranceAfter:kCMTimePositiveInfinity];
        }
        imgRef = [imageGenerator copyCGImageAtTime:time actualTime:NULL error:NULL];
    }
    UIImage *image = [UIImage imageWithCGImage:imgRef];
    CGImageRelease(imgRef);

    image = [self reverseImageByScalingToSize:image.size :image];
    return image;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T17:36:29.577

MPMoviePlayerController 可以很容易地从电影中的某个点获取图像。

```
 - (UIImage*)imageFromVideoAtPath:(NSString *)path atTime:(NSTimeInterval)time {
    NSURL *videoURL = [NSURL fileURLWithPath:path];
    MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
    [moviePlayer prepareToPlay];
    UIImage *thumbnail = [moviePlayer thumbnailImageAtTime:time timeOption:MPMovieTimeOptionNearestKeyFrame];
    [moviePlayer stop];
    return thumbnail;
} 
```

只需用视频的路径调用它，然后在你想要获取图像的时候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:28:32.607

请尝试以下代码。它对我来说非常有效。

并参考[UIKit Function Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)。

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
} 
```

也试试[**这个**](http://www.icab.de/blog/2010/10/01/scaling-images-and-creating-thumbnails-from-uiviews/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:33:22.590

当用户想要捕获当前视图 ScreenShot 并共享或保存此图像时，此代码很有用....

```
- (UIImage *)captureView {

//hide controls if needed
    CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

另见我的这个答案....[我的答案](https://stackoverflow.com/questions/14049796/howe-to-capture-uiview-top-uiview/14049828#14049862)

**更新：**

```
AVPlayerItem *item = [AVPlayerItem playerItemWithURL:yourURL];
AVPlayer *player = [AVPlayer playerWithPlayerItem:pItem];

//observe 'status'
[playerItem addObserver:self forKeyPath:@"status" options:0 context:nil];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                        change:(NSDictionary *)change context:(void *)context
{ 
    if ([keyPath isEqualToString:@"status"]) {
        AVPlayerItem *item = (AVPlayerItem *)object;
        if (item.status == AVPlayerItemStatusReadyToPlay) {
            AVURLAsset *asset = (AVURLAsset *)item.asset;
            AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
            CGImageRef thumb = [imageGenerator copyCGImageAtTime:CMTimeMakeWithSeconds(10.0, 1.0)
                                                      actualTime:NULL
                                                           error:NULL];
        }
    }   
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T11:28:12.760

```
-(UIImage *)imagefromview {
    UIGraphicsBeginImageContext(view.frame.size);
    [[self imageFromView:view] drawInRect:view.frame];
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultingImage;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T22:27:12.713

尝试截屏和剪辑。否则，您可能必须递归地渲染视图及其所有子视图。

```
-(UIImage *)videoScreenCap:(CGRect)cropRect{
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.window.bounds.size);
    [self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData * data = UIImagePNGRepresentation(image);
    [data writeToFile:@"foo.png" atomically:YES];
CGImageRef imageRef = CGImageCreateWithImageInRect([largeImage CGImage], cropRect);
UIImage * img = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);
return img;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-21T07:49:59.023

我使用以下代码从播放视频中获取图像的项目之一可能对您也有帮助...看看并尝试使用您的代码调整代码。

```
#import <AVFoundation/AVFoundation.h>

@property (nonatomic,retain) AVCaptureStillImageOutput * resultImageOutput;

- (UIImage*)stillImageFromVideo
{  
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in [[self resultImageOutput] connections]) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo]) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { 
            break; 
        }
    }

    [[self resultImageOutput] captureStillImageAsynchronouslyFromConnection:videoConnection 
    completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) { 
         CFDictionaryRef exifAttachments = CMGetAttachment(imageSampleBuffer,   
   kCGImagePropertyExifDictionary, NULL);

        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];    
        UIImage *image = [[UIImage alloc] initWithData:imageData];
        return image;  
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-11T10:16:43.710

您可以将 UIView 保存为文档目录中的图像，例如：

```
-(IBAction)ViewTOimage:(id)sender
{

    UIGraphicsBeginImageContext(self.view.bounds.size); //instad of self.view you can set your view IBOutlet name 
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *saveImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    NSData *imageData = UIImagePNGRepresentation(saveImage);
    NSFileManager *fileMan = [NSFileManager defaultManager];

    NSString *fileName = [NSString stringWithFormat:@"%d.png",1];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];
    [fileMan createFileAtPath:pdfFileName contents:imageData attributes:nil];

} 
```

# asp.net - MVC 上的 ViewPage 不显示类属性

> ID：14275866
> 
> 赞同：0
> 
> 时间：2013-01-11T10:11:48.760
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010

我创建了一个包含三个属性的简单类

```
ID
Name
Amount 
```

我已将模型的命名空间传递给控制器​​类，如

```
public class _1Controller : Controller
    {
        //
        // GET: /1/
        Customer objCustomer = new Customer();
        public ActionResult Index()
        {
            ViewData["CurrentTime"] = DateTime.Now.ToString();
            return View();
        }

        public ViewResult DisplayCustomer()
        {
            Customer objCustomer = new Customer();
            objCustomer.ID = 12;
            objCustomer.Name = "1001";
            objCustomer.Amount = 90.34;

            return View("DisplayCustomer", objCustomer);
        }

    } 
```

当我将控制器类绑定到视图时，如

```
@model MvcApplication4.Models.Customer

@{
    Layout = null;
} 
```

```
<html>
<head>
    <title>DisplayCustomer</title>
</head>
<body>
    <div>
       The customer id is <%= Model.Id %> <br /> 
       the customer Name is <%= M
    </div>
</body>
</html> 
```

当我试图调用类属性时，它没有显示。我在`checkbox`将视图绑定到控制器时单击了强类型。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:00:52.307

MVC3 有许多 razor Html 辅助方法来完成此任务。

代替

```
<%= Model.Id %> 
```

试试这个

```
@Html.DisplayFor(model => model.ID) 
```

[这是 MSDN 上这些助手的列表](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper_methods%28v=vs.108%29.aspx)

# c# - MVC Web 应用程序 WIX 安装程序

> ID：14275867
> 
> 赞同：2
> 
> 时间：2013-01-11T10:11:50.480
> 
> 标签：c#, model-view-controller, asp.net-mvc-4, wix, wix3.6

我正在尝试为我的 MVC Web 应用程序使用 WIX 创建安装程序。我遵循了这个：[http](http://blog.torresdal.net/2008/09/26/) ://blog.torresdal.net/2008/09/26/博客文章，我得到了它的工作。问题是`Product.wxs`我需要列出我要安装的所有文件，即：

```
<File Id="Web.config" Name="Web.config" ...
<File Id="MvcApplication4.dll" Name="MvcApplication4.dll" ... 
```

ETC..

在安装过程中，将这些文件安装在 ProgramFiles\MyApp\ 目录中。哪个好。

我想要做的是安装所有需要的文件（就像我通常使用 => 发布所做的那样）。意思是：bin、Views、Scripts 等，而不是在 Product.wxs 中一一列出。

或者

> 有没有办法在 wix 中指定复制文件夹和其中的所有内容？

任何信息，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T13:49:33.523

正确的方法是使用 Heat ( [http://wix.sourceforge.net/manual-wix3/heat.htm](http://wix.sourceforge.net/manual-wix3/heat.htm) )。

如果您想要的话，Heat 将从您的输出目录中收集文件。

您更有可能将其指向 Visual Studio 项目，它将选择所有输出并复制到输出类型文件。

它非常灵活，可以完全按照您的要求进行操作，只需将其添加为后期构建步骤即可。

# android - 从国家代码中获取国家名称

> ID：14275868
> 
> 赞同：39
> 
> 时间：2013-01-11T10:11:52.303
> 
> 标签：android, locale

我需要从国家代码中获取完整的国家名称。例如对于荷兰，我需要`the Netherlands`来自 country code `NL`。

我想我可以这样做`Locale`：

```
Locale loc = new Locale("NL");
loc.getCountry(); 
```

但是`loc.getCountry();`是空的。

请问您知道如何做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-11T10:38:56.673

试试这样

```
Locale loc = new Locale("","NL");
loc.getDisplayCountry(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-11T10:17:23.777

这应该有效：

```
Locale l = new Locale("", "NL");
String country = l.getDisplayCountry(); 
```

Locale 的第一个参数是语言，这在您的情况下没有用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-05-01T12:30:31.243

我想在上面的答案中添加更多信息。

如果要为结果指定语言，可以`Locale("your language")`用作 的参数`getDisplayCountry()`。

例如：

```
(new Locale("","NL")).getDisplayCountry(new Locale("ZH")); 
```

“ZH”是中文的语言代码。你会得到“荷兰”，这是荷兰的中文名称。

您可以使用`Locale("languages", "ISO-3166 code")`来指定您的语言变体。

例如：

```
(new Locale("","NL")).getDisplayCountry(new Locale("ZH", "TW")); 
```

`Locale("ZH", "TW")`指台湾中文的变体（繁体中文）。它与中国大陆的变体有很多不同。

你会得到“荷兰”，这是荷兰的繁体中文名称。

（即使你不懂中文，我认为这两个名字中的第二个汉字是不同的。）

如果您不指定语言，您将在设备显示语言中获得荷兰的名称，可以在手机设置中进行更改。代码是：

```
(new Locale("","NL")).getDisplayCountry(); 
```

[您可以在此问题中](https://stackoverflow.com/questions/7973023/what-is-the-list-of-supported-languages-locales-on-android)获得 Android 支持的所有语言和变体的列表：

如果您使用的是 kotlin：

```
Locale("", "NL").getDisplayCountry(Locale("ZH"))
Locale("", "NL").getDisplayCountry(Locale("ZH", "TW"))
Locale("", "NL").displayCountry 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T10:16:06.200

尝试使用其他构造函数

```
Locale loc = new Locale("NL", "The Netherlands"); 
```

[语言环境](http://developer.android.com/reference/java/util/Locale.html) 似乎没有预定义的语言环境`The Netherlands`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-28T09:38:48.940

对于完整的解决方案 TelephonyManager（来自[此解决方案](https://stackoverflow.com/questions/11872483/reliable-method-to-get-the-country-the-user-is-in)）：

```
TelephonyManager teleMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String localeCountry = teleMgr.getNetworkCountryIso();
if (localeCountry != null) {
    Locale loc = new Locale("",localeCountry);
    Log.d(TAG, "User is from " + loc);
} 
```

# jquery - 使用 JQuery setDate 并在单击日历图标时在文本框中显示日期

> ID：14275874
> 
> 赞同：0
> 
> 时间：2013-01-11T10:12:01.570
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有一个 jsf 形式的日期下拉列表、月份和年份 inputText。我可以获取这些值并在 javascript 中准备一个完整的日期。此外，我将 jquery 日历实现为日历图标，并且不会在 textBox 焦点上打开。现在我希望如果所有值都填写在表格中并且我点击日历，它应该相应地打开那个日期。

```
$('#' + inputid).datepicker({ showOn: ' ',
                             dateFormat : 'M dd yy' ,
                             changeMonth: true ,
                             yearRange: "-90:+10" ,
                             changeYear: true ,
                             duration : "fast" ,
                             showAnim : ""}); 
```

请求请提供 setDate 函数以适应上述代码。

# matlab - 回调函数不更新句柄

> ID：14275877
> 
> 赞同：0
> 
> 时间：2013-01-11T10:12:10.737
> 
> 标签：matlab, user-interface, callback

我正在根据此代码使用[回调函数 gui中的回调函数不知道句柄](https://stackoverflow.com/questions/14261835/callback-function-in-gui-does-not-know-handles)

但是，在使用回调函数调用的函数中，我无法更改句柄结构中的数据。

```
handles.waitbar.text = 'Reading images ...';
handles = readStackAndCreateFokusFunktion( ...
              handles , ...
              @(value, maxValue) ...
                    z_WaitBarUpdate(value, maxValue, handles)); 
```

在调用的函数中，我修改了句柄，但这在函数中没有使用`z_WaitBarUpdate`。

```
function handles = readStackAndCreateFokusFunktion( handles, fcallback )

handles.waitbar.text = 'Extracting number of images in calibration file ...'; 
guidata(handles.output,handles);
% calls z_WaitBarUpdate as extpected, but the text is still 'Reading images ...'
fcallback(0, 100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:42:16.630

回调函数中句柄的简单更新解决了这个问题：

```
function z_WaitBarUpdate(value, maxValue, handles)
handles=guidata(handles.output); % <- added
if ishandle(handles.waitbar.handle)
    waitbar(value/maxValue,handles.waitbar.handle,handles.waitbar.text);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T04:31:29.740

您必须最后更新句柄结构

`guidata(handles.output);`

# scala - 在 Akka 中直接使用 Futures

> ID：14275878
> 
> 赞同：2
> 
> 时间：2013-01-11T10:12:14.600
> 
> 标签：scala, akka, future

我无法按照[此处](http://doc.akka.io/docs/akka/2.0.1/scala/futures.html)的说明创建 Future 。它说您可以`Future`使用以下代码直接创建一个：

```
import akka.dispatch.Await
import akka.dispatch.Future
import akka.util.duration._

val future  = Future {
  "Hello" + "World"
}
val result = Await.result(future, 1 second) 
```

使用完全相同的代码，我收到一条错误消息，说：`error: could not find implicit value for parameter executor: akka.dispatch.ExecutionContext`. 我能找到的`ExecutionContext`只是，你可以用它“做事”。在文档中，我发现的唯一一行是：

```
implicit val ec = ExecutionContect.fromExecutionService(yourExecutionServiceGoesHere) 
```

但这对我没有用。有人对我有什么建议吗？如何在`Future`不询问的情况下创建一个新的`Actor`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T10:26:28.623

如果你有，`ActorSystem`那么它将有一个`ExecutionContext`可以在这里使用的。必须是`implicit`，除非您将其显式传递给`Future.apply`方法。

出于演示的目的，如果您只是想看看它在 REPL 中是如何工作的：

```
implicit val system = ActorSystem("MySystem").dispatcher 
```

`ActorSystem => ExecutionContext`（对象上还有一个隐式转换`ExecutionContext`。）

要创建模块化代码，而不是在使用点之前创建上下文，请考虑将上下文作为特征的抽象成员：

```
trait MyFutures {
  implicit val context: ExecutionContext

  def helloFuture: Future[String] = Future { "hello" + "world" }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:39:45.143

您的代码无法编译，因为您正在编写非法的 Scala 代码：签名`Future.apply`明确说明了这一点。我假设您了解您正在调用特征 Future 的伴随对象的 apply 方法，如下所示：

```
object Future extends java.lang.Object with scala.ScalaObject {
  def apply[T](body : => T)(implicit executor : akka.dispatch.ExecutionContext) : akka.dispatch.Future[T] = { /* compiled code */ }
} 
```

`ExecutionContext`由于调用时没有隐式可用`Future.apply`，因此会出现编译错误。如果您只提供一个参数，这与调用接收两个参数的方法相同。

can如何创建的问题`ExecutionContext`是不同的，您可以在Akka Documentation中找到答案：

> 为了执行回调和操作，Futures 需要一个叫做 ExecutionContext 的东西，它与 java.util.concurrent.Executor 非常相似。如果你有一个 ActorSystem 在范围内，它将使用它的默认调度程序作为 ExecutionContext，或者你可以使用 ExecutionContext 伴随对象提供的工厂方法来包装 Executors 和 ExecutorServices，甚至创建你自己的。

# java - 在 JBoss 7.1 中无法正确配置 LDAP

> ID：14275879
> 
> 赞同：0
> 
> 时间：2013-01-11T10:12:22.413
> 
> 标签：java, jboss, ldap, jboss7.x

我必须在 JBoss 7.1 下配置 LDAP 身份验证，但是当我尝试使用我的凭据时遇到问题。我的配置是这样的：

```
<login-module code="org.jboss.security.auth.spi.LdapLoginModule" flag="required">
    <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
    <module-option name="java.naming.provider.url" value="ldap://domain.com:389"/>
    <module-option name="java.naming.security.authentication" value="simple"/>
    <module-option name="java.naming.referral" value="follow"/>
    <module-option name="baseFilter" value="(uid={0})"/>
    <module-option name="baseCtxDN" value="ou=people,dc=domain,dc=com"/>
    <module-option name="throwValidateError" value="true"/>
    <module-option name="principalDNPrefix" value="suid="/>
    <module-option name="principalDNSuffix" value=",ou=people,dc=domain,dc=com"/>
    <module-option name="searchTimeLimit" value="5000"/>
    <module-option name="searchScope" value="ONELEVEL"/>
</login-module> 
```

“uid”表示用于登录的用户名（“姓氏”），“suid”表示唯一的 id。因此，当我尝试在我的 Java 类中使用 LDAP 时，它可以工作：

```
Hashtable env = new Hashtable();
env.put("java.naming.factory.initial", "com.sun.jndi.ldap.LdapCtxFactory");
env.put("java.naming.provider.url", "ldap://domain.com:389");
env.put("java.naming.security.authentication", "simple");
env.put("java.naming.security.principal", "suid=123456789001234,ou=people,dc=st,dc=com");
env.put("java.naming.referral", "follow");
env.put("java.naming.security.credentials", "123456");
DirContext directoryContext = new InitialDirContext(env); 
```

但是，我无法配置 JBoss 如何将 uid 转换为 suid（例如，“姓氏”转换为“123456789001234”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:17:14.483

我设法连接到这个，使用jldap：

```
LDAPConnection conn = new LDAPConnection();
conn.connect("ldap.mycompany.com",389);
LDAPSearchResults searchResults = conn.search("ou=people,dc=mycompany,dc=com",
    LDAPConnection.SCOPE_ONE, "cn=Surname Name", null, false);
LDAPEntry entry = searchResults.next();
if (entry != null) {
    // the username is valid, lets pull out the CN from the attributes
    String cnValue = null;
    LDAPAttributeSet attrSet = entry.getAttributeSet();

    Iterator<LDAPAttribute> allAttrs = attrSet.iterator();
    while (allAttrs.hasNext()) {
        LDAPAttribute attr = allAttrs.next();
        String attrName = attr.getName();
        System.out.println(attrName);
        if (attrName.equalsIgnoreCase("suid")) {  // we got the CN
            cnValue = (String) attr.getStringValues().nextElement();
            System.out.println(cnValue);
        } else {
            continue;
        }
    }

    if (cnValue == null) {
        // return auth failed, the username doesn't exist
    }

    // attempt a bind with CN and given password
    LDAPConnection tmp = new LDAPConnection();
    tmp.connect("ldap.mycompany.com", 389);
    tmp.bind("suid=" + cnValue + "," + "ou=people,dc=mycompany,dc=com", "MYPASSWORD"); 

    // <password> came from the user trying to login*/
    // return auth successful, username and password are valid
    // an LDAPException is thrown if the credentials are invalid
} 
```

但我没有设法将它用于我的 jboss 配置。

编辑，这适用于Java：

```
String username = "surname name";

Hashtable<String, String> env = new Hashtable<String, String>(11);

boolean b = false;

env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, "ldap://ldap.mycompany.com:389");
env.put(Context.SECURITY_AUTHENTICATION, "none");
env.put(Context.SECURITY_PRINCIPAL, "uid="+ username +",ou=people,dc=mycompany,dc=com");
env.put(Context.SECURITY_CREDENTIALS, "PASS");

try {
    // Create initial context
    DirContext ctx = new InitialDirContext(env);

    // Close the context when we're done
    b = true;
    ctx.close();

} catch (NamingException e) {
    b = false;
    e.printStackTrace();
}finally{
    if(b){
        System.out.print("Success");
    }else{
        System.out.print("Failure");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:42:18.573

在您的 LDAP 服务器中创建下一个层次结构：

```
+ o=your-organization-name (partition) 
   + ou=users (organizationalUnit) 
      - uid=your-id-user (inetOrgPerson), add userPassword attribute 
   + ou=groups (organizationalUnit) 
      - cn=your-user-role (groupOfNames), add the uid before created 
```

JBoss 7.1 (standalone.xml) 上的安全域：

```
 <subsystem xmlns="urn:jboss:domain:security:1.1">
            <security-domains>
             ...
 <security-domain name="SecurityRealm" cache-type="default">
                    <authentication>
                        <login-module code="org.jboss.security.auth.spi.LdapLoginModule" flag="required">
                            <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
                            <module-option name="java.naming.provider.url" value="ldap://host-ldap-server:port-ldap-server/"/>
                            <module-option name="java.naming.security.authentication" value="simple"/>
                            <module-option name="principalDNPrefix" value="uid="/>
                            <module-option name="principalDNSuffix" value=",ou=users,o=your-organization-name"/>
                            <module-option name="rolesCtxDN" value="ou=groups,o=your-organization-name"/>
                            <module-option name="uidAttributeID" value="member"/>
                            <module-option name="matchOnUserDN" value="true"/>
                            <module-option name="roleAttributeID" value="cn"/>
                            <module-option name="roleAttributeIsDN" value="false"/>
                        </login-module>
                    </authentication>
                </security-domain>
            </security-domains> 
```

在你的 jboss-web.xml

```
<security-domain>SecurityRealm</security-domain> 
```

最重要的是：是否允许用户访问此页面？（web.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- Protected Areas -->
    <security-constraint>
         <display-name>Protected</display-name>
        <web-resource-collection>              
            <url-pattern>url-pages-you-want-protect</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>your-user-role</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <!-- Validation By Form -->
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>your-login-page</form-login-page>
            <form-error-page>your-error-page</form-error-page>
        </form-login-config>
    </login-config>

    <!-- Allowed Roles -->
    <security-role>
        <role-name>your-user-role</role-name>
    </security-role>
</web-app> 
```

测试连接使用这个：

```
public class LoginModulesTestCase extends TestCase
{
   static
   {
      try
      {
         Configuration.setConfiguration(new TestConfig());
         System.out.println("Installed TestConfig as JAAS Configuration");
      }
      catch(Exception e)
      {
         e.printStackTrace();
      }
   }
   /** Hard coded login configurations for the test cases. The configuration
    name corresponds to the unit test function that uses the configuration.
    */
   static class TestConfig extends Configuration
   {
      public void refresh()
      {
      }

      public AppConfigurationEntry[] getAppConfigurationEntry(String name)
      {
         AppConfigurationEntry[] entry = null;
         try
         {
            Class[] parameterTypes = {};
            Method m = getClass().getDeclaredMethod(name, parameterTypes);
            Object[] args = {};
            entry = (AppConfigurationEntry[]) m.invoke(this, args);
         }
         catch(Exception e)
         {
         }
         return entry;
      }

      AppConfigurationEntry[] testLdapExample1()
      {
         String name = "org.jboss.security.auth.spi.LdapLoginModule";
         HashMap options = new HashMap();
         options.put("java.naming.factory.initial", "com.sun.jndi.ldap.LdapCtxFactory");
         options.put("java.naming.provider.url", "ldap://host-ldap-server:port-ldap-server/");
         options.put("java.naming.security.authentication", "simple");
         options.put("principalDNPrefix", "uid=");
         options.put("principalDNSuffix", ",ou=users,o=your-organization-name");         
         options.put("rolesCtxDN", "ou=groups,o=your-organization-name");
         options.put("uidAttributeID", "member");
         options.put("matchOnUserDN", "true");
         options.put("roleAttributeID", "cn");
         options.put("roleAttributeIsDN", "false");
         AppConfigurationEntry ace = new AppConfigurationEntry(name,
         AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options);
         AppConfigurationEntry[] entry = {ace};
         return entry;
      }
   }

   public LoginModulesTestCase(String testName)
   {
      super(testName);
   }

   @Test
   public void testLdapExample1() throws Exception
   {
      System.out.println("testLdapExample1");
      UsernamePasswordHandler handler = new UsernamePasswordHandler("your-uid", "your-uid-password".toCharArray());
      LoginContext lc = new LoginContext("testLdapExample1", handler);
      lc.login();

      Subject subject = lc.getSubject();
      System.out.println("Subject: "+subject);

      Set groups = subject.getPrincipals(Group.class);
      assertTrue("Principals contains your-uid", subject.getPrincipals().contains(new SimplePrincipal("your-uid")));
      Group roles = (Group) groups.iterator().next();
      assertTrue("your-uid-role is a role", roles.isMember(new SimplePrincipal("your-uid-role")));

      lc.logout();
   }

} 
```

嘿，我要问你一件事：

*   您的 ldap 主机 = domain.com 吗？
*   你的 ldap 端口 = 389？
*   你的 ldap 服务器安装在哪里？
*   是您组织的 ldap 分区 ou=people,dc=domain,dc=com？
*   不要使用 suid，使用 uid 就像我向您展示的示例一样，uid 是唯一的
*   您的 uid 是否位于 ou=people,dc=domain,dc=com 上？
*   此代码是示例副本吗？
*   我在自己的机器上使用 Apache Directory 服务器作为 lpad 服务器，你的服务器是谁？
*   你的服务器在哪里？

如果你想我可以帮你配置 Apache Directory Server，你只需要问一个 stackoverflow 问题并添加 jboss 7.x 和 ldap stackoverflow 标签

# asp.net - 绑定下拉列表，它位于gridview的页脚内

> ID：14275884
> 
> 赞同：1
> 
> 时间：2013-01-11T10:12:50.527
> 
> 标签：asp.net, gridview

我有一个带有页眉和页脚的 3 列（产品、数量、价格）的网格视图。我为产品页脚添加了一个下拉列表。现在我想将此下拉列表与数据集中的产品绑定，有人可以帮助我吗？我在cs文件中使用了以下代码，但在查找控件附近出现错误

“你调用的对象是空的。

```
protected void gv_page2_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        dal = new DAL();
        ds = new DataSet();
        ds=dal.DALBindFooterDDL();
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            DropDownList ddl = (DropDownList)gv_page2.FooterRow.FindControl("ftrDDL");
            ddl.DataSource = ds.Tables[0];
            ddl.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:32:09.430

使用`RowCreated`（或`RowDataBound`事件） - 例如

```
void ProductsGridView_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.FooterRow)
    {
      // Find the product drop-down list, you can id (or cell number)
      var ddlProducts = e.Row.FindControl("Products") as DropDownList;
      // var ddlProducts = e.Row.Cells[0].Controls[0]; // Finding by cell number and index
      if (null != ddlProducts)
      {
          // bind to the data
      }
    }
} 
```

*免责声明：未经测试的代码 - 提供以获得实际解决方案的想法/提示*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:36:52.640

```
 protected void gv_page2_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        dal = new DAL();
        ds = new DataSet();
        ds=dal.DALBindFooterDDL();
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            DropDownList ddl = e.Row.FindControl("ftrDDL") as DropDownList;
            ddl.DataSource = ds.Tables[0];
            ddl.DataBind();
        }
    } 
```

# proxy - Websocket 处于挂起状态，无法通过代理建立

> ID：14275887
> 
> 赞同：0
> 
> 时间：2013-01-11T10:12:57.090
> 
> 标签：proxy, websocket

我正在尝试在工作场所运行 Websocket 服务器，但不幸的是我总是处于**Pending**状态并且无法建立连接。

此外，我得到了一个网站：[Websocket Echo Test](http://www.websocket.org/echo.html)，发现我也无法建立它。

像这样的错误信息：`DISCONNECTED`

也许我工作场所的代理配置是我无法建立 Websocket 连接的原因。

* * *

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:10:33.993

感谢*约翰*帮助我编辑了这个问题。

问题已修复。

我更新`< plugin>`了版本`8.1.2.v20120308`，一切顺利。

```
 <plugin>
                    <groupId>org.mortbay.jetty</groupId>
                    <artifactId>jetty-maven-plugin</artifactId>
                    <!-- 8.0.0.M2 -->
                    <version>8.1.2.v20120308</version> 
                </plugin> 
```

# winrt-xaml - Windows 应用商店应用程序设计时数据上下文

> ID：14275891
> 
> 赞同：0
> 
> 时间：2013-01-11T10:13:12.033
> 
> 标签：winrt-xaml, windows-store-apps

多年来，我一直是一名 XAML 开发人员，但这个让我很难过。我一直睡不好所以也许我很密集。

只是将自己定位于 Windows 应用商店应用程序，我注意到这些天 LayoutAwarePage 有一个 DefaultViewModel，这很好，但我只在运行时设置它。确实，我们需要在设计时建立一个 DataContext 来查看真实的假数据。

因此，在使用一些更复杂的 ViewModel 连接代码失败后，我决定这样做并且它不起作用：

```
public sealed partial class TemplatePage : LayoutAwarePage
{
    public TemplatePage()
        : base()
    {
        this.DefaultViewModel = new ObservableDictionary<string, object>();
        this.DefaultViewModel.Add("Name", "Design-time value.");

        this.InitializeComponent();
    }

...} 
```

VS2012 和 Blend 都根本看不到 DataContext。当我单击为 TextBlock 创建数据绑定时，Blend 报告

> 未设置数据上下文。选中自定义时，您可以输入路径。

这在运行时有效，我复杂的聪明的东西也有效，但在设计器中无效。这一切的工作方式现在改变了吗？我错过了备忘录吗？

**更新**

因此，使用 Channel9 上的教程中的指导

[http://channel9.msdn.com/Series/Windows-Store-apps-for-Absolute-Beginners-with-C-/Part-8-Understanding-how-Data-Binding-Works-at-Design-Time](http://channel9.msdn.com/Series/Windows-Store-apps-for-Absolute-Beginners-with-C-/Part-8-Understanding-how-Data-Binding-Works-at-Design-Time)

我至少现在能够包含更多不起作用的代码。

我以扩展 BindableBase 的类的形式创建了几个假数据源，就像教程中的设置一样，但是 XAML 方面很奇怪。

![页面 XAML 和不准确的绑定对话框的截图](../Images/0c7f8ffedab21c4b6b5df22314b2612d.png)

XAML 说，在 Page 元素级别，构造一个 DesignTimeDataHub 对象并将其用作 DataContext。然后，在根网格级别，使用将 DataContext 重置为 CommonFakeData 属性。

Grid 下 TextBlock 的 Blend Create Data Binding 对话框似乎认为 DataContext 是在页面级别设置的！

无论我使用`{Binding CommonFakeData.Title}`还是`{Binding Title}`不起作用。

我显然把这一切都搞砸了。我很高兴他们让这变得更加困难，因为编写代码总是太容易了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T14:34:51.117

好的，我已经破解了。设置 DataContext 的格式应该是：

```
d:DataContext="{Binding PropertyNameOfSubViewModel, Source={d:DesignInstance Type=myNamespace:ViewModelTypeName, IsDesignTimeCreatable=True}}" 
```

我现在将页面级 DC 保留为 DefaultViewModel。然后，我使用上述正确的 DC 设计时语法将另一个 DC 属性添加到布局根 Grid 元素。

然后，TextBlock 在其绑定中只需要 SubViewModel 上的属性名称。所以假数据视图模型大致如下：

```
public class DesignTimeDataHub : BindableBase // Probably doesn't need to be BindableBase.
{
    public CommonBindableFakeData CommonFakeData { // get set }
}

public class CommonBindableFakeData : BindableBase
{
    ctor { // set some default fake values }

    public string Title { // get set }
} 
```

这是它的样子：

![用于设计时绑定的工作 XAML](../Images/2c75ecac13c98efe72d8abe5a0208abf.png)

# mysql - 连接表和计数的正确方法

> ID：14275892
> 
> 赞同：1
> 
> 时间：2013-01-11T10:13:12.767
> 
> 标签：mysql, join, count

假设我有 3 张桌子。它们被称为用户、线程、帖子。我需要知道用户在一个 sql 行中创建了多少帖子和线程。做这个的最好方式是什么？我会执行以下操作的连接，这是正确的/最好的方法吗？但是我该如何计算呢？

```
SELECT *,
FROM users
LEFT JOIN threads on threads.user_id=users.user_id
LEFT JOIN posts on posts.user_id=users.user_id
WHERE user_id='1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:19:21.297

您可以使用类似这样的应用和聚合函数来获取总数：

```
SELECT u.user_id, 
    coalesce(TotalThreads, 0) + coalesce(TotalPosts, 0) Total
FROM users u
LEFT JOIN
(
  select user_id, count(thread_id) TotalThreads
  from threads
  group by user_id
) t
  on t.user_id=u.user_id
LEFT JOIN
(
  select user_id, count(post_id) TotalPosts
  from posts
  group by user_id
) p
  on p.user_id=u.user_id
WHERE u.user_id='1' 
```

如果您希望将值分开，则：

```
SELECT u.user_id, 
   coalesce(TotalThreads, 0) TotalThreads, 
   coalesce(TotalPosts, 0) TotalPosts
FROM users u
LEFT JOIN
(
  select user_id, count(thread_id) TotalThreads
  from threads
  group by user_id
) t
  on t.user_id=u.user_id
LEFT JOIN
(
  select user_id, count(post_id) TotalPosts
  from posts
  group by user_id
) p
  on p.user_id=u.user_id
WHERE u.user_id='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:18:17.240

首先，您在 . 之后有杂散逗号`SELECT *`。第二，当你想要线程和帖子时，为什么要查询用户表？第三，为什么（是？）`user_id`a `char`？

```
SELECT COUNT(user_id) FROM threads WHERE user_id='1'
SELECT COUNT(user_id) FROM posts WHERE user_id='1' 
```

`UNION`如果您想在一个查询中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:22:29.897

你基本上在那里。因为`count`是一个[聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)，您可以简单地按以下方式分组`user_id`：

```
select users.user_id as [User ID]
,count(threads.user_id) as [Number of Threads]
,count(posts.user_id) as [Number of Posts]
from users
left join threads on threads.user_id = users.user_id
left join posts on posts.user_id = users.user_id
where user_id = '1'
group by users.user_id 
```

这样，您的`where`子句就变成了可选的。如果您想要所有用户的不同列表及其相应的线程/帖子计数，则可以将其删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-11T10:18:26.753

```
 SELECT 
    COUNT() as posts,
    FROM users
    LEFT JOIN threads on threads.user_id=users.user_id
    LEFT JOIN posts on posts.user_id=users.user_id
    WHERE user_id='1' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-11T10:19:38.167

这行得通吗？

`SELECT COUNT (*) FROM users u, thread t, posts p WHERE t.user_id=u.user_id AND p.user_id=u.user_id AND user_id='1'`

我对 SQL 不是很感兴趣……

# r - 在 R 中抛光蜘蛛网图：如何突出显示特定的感兴趣区域？

> ID：14275893
> 
> 赞同：4
> 
> 时间：2013-01-11T10:13:17.447
> 
> 标签：r, plot, data-visualization

使用[library(plotrix) (p.135-8) 中的radial.plot 函数并参考](http://cran.r-project.org/web/packages/plotrix/plotrix.pdf)[CrossValidated](https://stats.stackexchange.com/questions/14272/seeking-suggestions-for-summarizing-and-visualizing-data)中的有用帖子，我制作了这个**蜘蛛网图**。

![在此处输入图像描述](../Images/4b35d8a4584daa9fd828e499305b5f39.png)

**问题**

该图显示每个项目的治疗组和对照组之间的平均值差异。然而，我对积极变化特别感兴趣。因此，我想强调 >= 0 的值。为此，我力求

*   将 0 值的圆线涂成黑色

*   使值 <= 0 的区域，即在 0 圆内，更透明（“更轻”）。

我很高兴分享我用来制作蜘蛛网图的代码：

```
items.M<-c(-0.15,0.05,0.12,-0.12,-0.02,0.27,0.53,0,-0.33,0.19,0.34)
items.J<-c(-0.09,0.08,1.63,-0.1,-0.1,-0.09,0.15,0.05,-0.12,0.51,0.02)
items.names<-c("item 1", "item 2", "item 3", "item 4", "item 5", "item 6", "item 7", "item 8", "item n1", "item n2", "item n3")

spider.data<- rbind(items.M, items.J)

library(plotrix)
radial.plot(spider.data,
  labels=items.names,
  rp.type="p",
  radial.lim=c(-0.4,1.7),
  poly.col=c(rgb(255/255, 215/255, 0, .8), rgb(0, 0, 1, .8)),
  line.col=c("black", "black"),
  lwd=1) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:48:08.033

为了透明度，您可以使用包的`alpha`图形参数设置`grid`。首先，我使用`gridBase`包`grid`与`graphics`.

你会得到这样的东西：

![在此处输入图像描述](../Images/b872f2ab8471930129bf07f2a141f8ad.png)

```
library(gridBase)
vps <- baseViewports()
vp <- vps$plot
vp$gp <-gpar(alpha=0.3)   # you can play with alpha here
pushViewport(vp)
grid.circle(r=unit(vp$xscale/6,'native'),    # /6 to get the small circle
         gp=gpar(fill='white',col='black'))
upViewport()
pushViewport(vps$plot)
grid.circle(r=unit(vp$xscale/6,'native'),
        gp=gpar(fill='NA',col='black',lwd=2))  ## line width = 2 to show the black line effect
upViewport() 
```

# php - CodeIgniter 检查每个控制器中的会话？

> ID：14275896
> 
> 赞同：0
> 
> 时间：2013-01-11T10:13:24.207
> 
> 标签：php, codeigniter, session, methods, controller

我已经定义了这个控制器来检查用户会话：

```
class SessionController extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->is_logged_in();      
}

function dashboard_area(){
    $data['main_content'] = 'dashboardView';
    $this->load->view('dashboardTemplate/template', $data);         
}

function is_logged_in()
{
    $is_logged_in = $this->session->userdata('is_logged_in');
    if(!isset($is_logged_in) || $is_logged_in != true)
    {
        echo 'You don\'t have permission to access this page.';
        die();
        //$this->load->view('login_form');
    }
}       
    } ?> 
```

在我的登录控制器中我这样做..

```
 class LoginController extends CI_Controller {

 function index(){      
    $new['main_content'] = 'loginView';
    $this->load->view('loginTemplate/template', $new);          
}   

function verifyUser(){      
    //getting parameters from view 
    $data = array(
            'username' => $this->input->post('username'),
            'password' => $this->input->post('password')
    );

    $this->load->model('loginModel'); 
    $query = $this->loginModel->validate($data);

          if ($query){             //if the user c validated
        //data variable is created becx we want to put username in session
            $data = array(
                'username' => $this->input->post('username'),
                 'is_logged_in' => true 
            );

         $this->session->set_userdata($data);
         redirect('sessionController/dashboard_area');
    }
    else
     {
        $this->index();
    }
}
function logout()
{
    $this->session->sess_destroy();
    $this->index();
}
}   
?> 
```

现在的问题是我有很多控制器如何使用它..我不想一次又一次地制作新的会话控制器......如果在一个以上的控制器中处理会话有任何好处，那么请让我知道..我也看过这个答案...但是在应用第14个答案之后..它给了我这个错误

```
Fatal error: Class 'MY_Controller' not found in C:\xampp\htdocs\StockManagmentSystem\application\controllers\categoryController.php on line 4 
```

我正在使用最新的代码点火器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:37:42.387

在扩展 CI_Controller 的 application/core 文件夹中创建一个 MY_Controller。将会话函数放在 MY_Controller 文件中，然后让其余的控制器扩展 MY_Controller 而不是 CI_Controller。

# ajax - Wicket：如何实现通用表单组件？

> ID：14275897
> 
> 赞同：2
> 
> 时间：2013-01-11T10:13:24.473
> 
> 标签：ajax, wicket, custom-component

我想创建一个新组件 EditableLabel。（有 AjaxEditableLabel，但我不喜欢它的行为方式 - 来回切换`<span>`。`<input>`）

我希望它支持 AJAX - 至少 onchange。但是用户应该能够忽略 AJAX。理想情况下，他会通过（不）添加一个`Behavior`.

我的实现是基于 CSS 的——它一直是一个输入，只是改变它的外观。这是通过 JavaScript 完成的，使其也可以在没有 AJAX 的情况下使用。

到目前为止，我已经尝试过

*   在 onRequest() 中使用`AbstractAjaxBehavior`with `requestCycle.scheduleRequestHandlerAfterCurrent(new TextRequestHandler("text/plain", "UTF-8", ret));`，文本字段会`value`在适当的时候发送它（输入按下，焦点丢失，...）

    这里的问题是我不能使用 AjaxRequestTarget。这种方法更适用于简单的服务器-客户端通信，例如自动完成。

*   简单地使用`TextField`with `AjaxFormComponentUpdatingBehavior("update")`。

    问题是它与我的 JavaScript 事件处理程序发生冲突。

**什么是正确的方法？**我假设有某种方法我应该在 wicket 中编写 javascript 事件处理程序，因此它们不会根据服务器响应进行 CSS 更改（即不重新渲染服务器发送的内容），但 Wicket 会生成 JS，以便事件不会发生冲突。

欢迎任何有关此主题的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:21:12.693

如果问题是事件处理程序发生冲突，您可以在类中对它们进行建模，并根据用户的需要输出所需的内容。如果用户不想要 AJAX，请使用 a[`SimpleAttributeModifier`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/behavior/SimpleAttributeModifier.html)仅输出事件处理程序。

```
TextField t = new TextField("id");
t.add(new SimpleAttributeModifier("onchange", "alert('hi!')")); 
```

[`AttributeModifier`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/AttributeModifier.html)如果事件处理程序可以根据某些条件是动态的，您也可以使用更强大的。考虑到 CSS 类也可以通过`AttributeModifier`或来操作[`AttributeAppender`](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/behavior/AttributeAppender.html)。

如果用户确实想要 AJAX，只需添加行为。如果您想将自定义 javascript 添加到 ajax 事件处理程序，您可以重写[`AbstractDefaultAjaxBehavior#getAjaxCallDecorator()`](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.html#getAjaxCallDecorator%28%29)以返回一个[`IAjaxCallDecorator`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/IAjaxCallDecorator.html)或任何其便利子类，以将您的自定义 javascript 添加/附加到 ajax 调用。您甚至可以在调用以成功或失败结束时添加自定义 JS。

```
TextField t = new TextField("id");
t.add(new AjaxEventBehavior("update") { 
    @Override
    protected void onEvent(AjaxRequestTarget target) {
        // ...
    }
    @Override
    protected IAjaxCallDecorator getAjaxCallDecorator() {
        return new AjaxCallDecorator(){
            @Override
            public CharSequence decorateScript(CharSequence script) { 
                return "alert('hi!')" + script; 
            }
        }
     }
}); 
```

# javascript - 通过 ajax 减慢 mvc 部分视图的加载速度

> ID：14275898
> 
> 赞同：0
> 
> 时间：2013-01-11T10:13:30.063
> 
> 标签：javascript, asp.net, html, ajax, asynchronous

我们在通过 Ajax 加载多个局部视图时遇到了一个小问题，我无法缩小范围。

该页面通过单击按钮加载 6 个部分视图。

我们最初让服务器在单个页面上呈现部分视图，但这意味着处理是连续运行的，并且页面不会很快返回。

所以我创建了一些 javascript 来运行和异步 ajax 请求来刷新它们（请注意，部分视图 url 在标记中呈现以使这更容易，暂时）。

```
function refreshAllPartials() {
    $('div.partial').each(function () {
        var partialView = $(this);
        var partialViewUrl = $(partialView).attr('partialUrl');
        var parent = $(partialView).parent();
        $(parent).empty();
        $.ajax({
            url: partialViewUrl,
            type: "GET",
            async: true,
            success: function (response, textStatus, jqXHR) {
                $(parent).html(response);
            }
        });
    });
} 
```

现在，问题是虽然每个部分视图请求大约需要 0.7 秒才能返回（使用 Fiddler 检查），但 Firebug 的输出显示了一些不同的东西。

![萤火虫输出](../Images/a68cf40689c7c18b8e228cc8e3209ee2.png)

fiddler 的输出在几毫秒内是一致的，但是 firebug 输出和用户的视觉效果似乎在不断变化。

我猜想关于javascript如何工作以及渲染如何工作，我缺少一些东西，但也许我只是做错了什么？

我正在使用 ASP.NET MVC3，但是，我不确定它是否相关，因为 Fiddler 显示 IIS 正在及时返回数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:56:25.960

此问题是控制器操作未标记为仅需要对会话状态的读取访问权限。

ASP.NET 中的 SessionState 有一个“特性”，即只有 1 个请求可以独占访问会话，然后所有其他请求都在其后面“排队”。

我需要做的就是将不需要对会话的写入访问权限的操作方法分离到另一个控制器中并添加：

```
[SessionState(System.Web.SessionState.SessionStateBehavior.ReadOnly)] 
```

作为新控制器的属性。

中提琴，现在非常高效的网站，非常活泼。

# objective-c - OCHamcrest 匹配器参数与验证时的 Mockito 模拟不兼容

> ID：14275900
> 
> 赞同：1
> 
> 时间：2013-01-11T10:13:40.027
> 
> 标签：objective-c, ocmockito, ochamcrest

通过以下单元测试，我使用 Mockito 来模拟 NSUserDefaults 但是当我尝试使用 OCHamcrest 匹配器来测试参数是否是 NSDictionary 的实例时，我收到警告：

> 将“id{HCMatcher}”发送到不兼容类型“NSDictionary *”的参数

```
NSUserDefaults *userDefaultsMock = mockClass([NSUserDefaults class]); 
//OR -- NSUserDefaults *userDefaultsMock = mock([[NSUserDefaults standardUserDefaults]class]);

Engineer *sut = [[Engineer alloc]init];

[given([userDefaultsMock stringForKey:@"engineerId"]) willReturn:@"02345"];

BOOL result = [sut setCurrentEngineerId:@"02345" userDefaults:userDefaultsMock];
[verify(userDefaultsMock) registerDefaults:instanceOf([NSDictionary class])]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:26:54.357

正如文档所说，“类型化参数将发出警告，指出匹配器类型错误。只需将匹配器转换为 id。”

在你的情况下，

```
[verify(userDefaultsMock) registerDefaults:(id)instanceOf([NSDictionary class])]; 
```

# php - Drupal 7 查找所有网站页面

> ID：14275902
> 
> 赞同：2
> 
> 时间：2013-01-11T10:13:51.733
> 
> 标签：php, drupal

有没有办法在 Drupal 7 站点中获取所有页面的数组？（不仅是节点页面，还有视图、网络表单等。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:28:33.963

该`menu-links`表包含您可以访问的所有链接（管理员和非管理员）。

您可以使用函数[hook_menu_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_alter/7) () 将它们放入数组中。

```
function MODULE_menu_alter(&$items) {
  //$items is the array you are looking for.
  // printing the array
  echo "<pre>";
  print_r ($items);
  echo "</pre>";
} 
```

请务必将`MODULE`函数名称中的 from 替换为您的模块名称。不妨使用[Devel](http://drupal.org/project/devel)来打印`$items`数组`dpm($items);`

# android - 在 Android 中显示大图像时出现问题

> ID：14275905
> 
> 赞同：0
> 
> 时间：2013-01-11T10:14:02.383
> 
> 标签：android, image-processing, out-of-memory, bitmapimage

我们现在正在开发在线和离线模式下工作的 Android 应用程序。该应用程序有很多大尺寸的图像、视频和 pdf。因此，要在离线模式下运行应用程序，我们需要将所有图像、视频和 pdf 下载到 sd 卡中。所以在离线模式下，我们显示来自 sd 卡的图像、视频和 pdf。

我们在应用程序中面临的技术问题是，当用户多次单击图像时，会出现内存不足的问题。为了解决这个问题，我们已经清除了应用程序中的位图和垃圾收集，但是对于大图像，它会显示内存不足的问题。我们现在`3502*1716`在应用程序中获得图像分辨率。因此，我们将图像`568*500`从服务器回收，并通过 Web 服务将其传递给应用程序。在这种情况下，应用程序工作正常，没有任何内存不足的问题。但是我们`3502*1716`在应用程序中需要具有分辨率的图像。

在应用程序中多次单击图像时，请提出一些解决此内存不足问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:12:22.580

建议：

1）如果您使用的是 view.widget.gallery，请不要！它被弃用是有充分理由的，因为它不会回收视图。网上有一些海关实施相同的行为，但妥善处理视图回收。

2）您将无法按照您计划的方式使用巨大的图像。您可能必须实现类似于 MapView 所做的事情（加载/卸载较大图片的较小标题）。可能有一些图书馆，如果你找到图书馆，请确保在这里为社区发帖。

# wordpress - 更改子域站点的 URL

> ID：14275911
> 
> 赞同：0
> 
> 时间：2013-01-11T10:14:27.177
> 
> 标签：wordpress, .htaccess, url-rewriting

我目前有一个位于服务器根目录的主站点，还有一个位于子域 /blog 的 wordpress 博客

我希望能够将 /blog 更改为 /industry-news 但仍将任何链接重定向到新的 uri 结构，因此没有死链接。我可以使用 htaccess 来做到这一点，还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:18:48.637

这将帮助您更改 wordpress URL：

[http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

# php - 提交后从所选字段回显“accu”

> ID：14275916
> 
> 赞同：0
> 
> 时间：2013-01-11T10:14:44.047
> 
> 标签：php, mysql, submit, echo

我有一个带有表“id”“year”“make”“model”“accu”的数据库“vehicles”。

我有 4 个下拉菜单，当您按下提交时，您会获得选定的值：

它几乎可以工作，但我的最后一个函数有问题......当显示最后一个下拉列表时，我可以选择所有与年份匹配的 accu......

例如，当我从 2013 年开始拥有 50 辆汽车时，它将显示所有与我选择的年份相匹配的精确度。

如何更改最后一个函数，它只显示与“make”、“model”和“year”匹配的 accu？

到目前为止，这是我的脚本：

```
<?php
//**************************************
//     Page load dropdown results     //
//**************************************
function getTierOne()
{
    $result = mysql_query("SELECT DISTINCT make FROM vehicles ORDER BY make ASC") 
    or die(mysql_error());

      while($tier = mysql_fetch_array( $result )) 

        {
           echo '<option value="'.$tier['make'].'">'.$tier['make'].'</option>';
        }

}

//**************************************
//     First selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_1" ) {
drop_1($_GET['drop_var']);
}

function drop_1($drop_var)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT model FROM vehicles WHERE make='$drop_var' ORDER BY model") 
    or die(mysql_error());

    echo '<select name="drop_2" id="drop_2">
          <option value=" " disabled="disabled" selected="selected">Selecteer Model</option>';

           while($drop_2 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_2['model'].'">'.$drop_2['model'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_2').hide();
    $('#drop_2').change(function(){
      $('#wait_2').show();
      $('#result_2').hide();
      $.get(\"func.php\", {
        func: \"drop_2\",
        drop_var: $('#drop_2').val()
      }, function(response){
        $('#result_2').fadeOut();
        setTimeout(\"finishAjax_tier_three('result_2', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Second selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_2" ) {
drop_2($_GET['drop_var']);
}

function drop_2($drop_var2)
{  
    include_once('db.php');
    $result = mysql_query("SELECT DISTINCT year FROM vehicles WHERE model='$drop_var2'") 
    or die(mysql_error());

    echo '<select name="drop_3" id="drop_3">
          <option value=" " disabled="disabled" selected="selected">Selecteer Jaar</option>';

           while($drop_3 = mysql_fetch_array( $result )) 
            {
              echo '<option value="'.$drop_3['year'].'">'.$drop_3['year'].'</option>';
            }

    echo '</select>';
    echo "<script type=\"text/javascript\">
$('#wait_3').hide();
    $('#drop_3').change(function(){
      $('#wait_3').show();
      $('#result_3').hide();
      $.get(\"func.php\", {
        func: \"drop_3\",
        drop_var: $('#drop_3').val()
      }, function(response){
        $('#result_3').fadeOut();
        setTimeout(\"finishAjax_tier_four('result_3', '\"+escape(response)+\"')\", 400);
      });
        return false;
    });
</script>";
}

//**************************************
//     Second selection results     //
//**************************************
if (isset($_GET['func'])&& $_GET['func'] == "drop_3" ) {
drop_3($_GET['drop_var']);
}

function drop_3($drop_var3)
{  
    include_once('db.php');

        $result = mysql_query("SELECT * FROM vehicles WHERE year='$drop_var3'") 
    or die(mysql_error());

    echo '<select name="drop_4" id="drop_4">
          <option value="" disabled="disabled" selected="selected">Selecteer Accu</option>';

           while($drop_4 = mysql_fetch_array( $result )) 
                {
                if ($drop_4['accu'] != "") {
              echo '<option value="'.$drop_4['accu'].'">'.$drop_4['accu'].'</option>';
                }
  }
    echo '</select> ';
    echo '<input type="submit" name="submit" value="Submit" />';
}

?> 
```

# ios - 绘制PDF时的CFAttributedString

> ID：14275924
> 
> 赞同：0
> 
> 时间：2013-01-11T10:15:12.327
> 
> 标签：ios, cocoa-touch, pdf, nsattributedstring

我严重坚持这一点。我主要使用了[苹果文档](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)中的代码，它工作正常。现在我正在尝试更改 1 部分，但我不断收到错误！

```
CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, (CFStringRef)textView.text, NULL);
if (currentText) {
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);
    if (framesetter) { 
```

我正在尝试`textView.text`用单个字符串替换，以便使用字符串中的数据而不是文本视图构建 PDF，但是当我将该代码更改为

```
CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, (CFStringRef)stringHere, NULL); 
```

它使我错误：

```
Thread 1: EXC_BAD_ACCESS (code=1, address0x0). 
```

我也试过：

```
CFStringRef stringRef = (CFStringRef)stringHere;
CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL); 
```

但我得到同样的错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:44:59.257

stringHere is 0x0 (aka nil aka NULL)

# vb6 - 如何使 VB.NET 中标签文本的外观与 Vb 6 相比？

> ID：14275926
> 
> 赞同：1
> 
> 时间：2013-01-11T10:15:16.177
> 
> 标签：vb6, vb.net-2010, vb6-migration

我在标签的 UI 中遇到问题，与迁移后 vb.net 中的标签文本相比，标签看起来不错。我检查了标签属性，每件事看起来都是正确的。

任何人都可以帮助如何使标签看起来像 VB 6 标签？我们无法在 VB.NET 中获得相同标签的原因是什么？这里我也添加图像

![在此处输入图像描述](../Images/ebf79673b443db5b336baf280c06c32f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:20:12.297

尝试将字体更改为 truetype 字体和标准字体大小，例如 Arial 9pt。转换后，有时字体没有抗锯齿。您可能需要在多个地方进行更改，例如表单、控件和容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:28:35.420

使用相同的字体可能会有所帮助。VB6 默认为“MS Sans Serif”（在我的系统上），而 Visual Studio.Net 默认为“Microsoft Sans Serif”。它们不是同一种字体，前者是光栅字体，后者是开放式字体，因此将利用 ClearType 别名。

理想情况下，您将在运行时将字体名称发送到“Ms Shell Dlg”，该字体名称将替换为您正在运行的 Windows 版本的默认系统字体。

# android - 通过 AOA 2.0 向 Android 手机（果冻豆）发送多点触控报告描述符和输入报告

> ID：14275930
> 
> 赞同：1
> 
> 时间：2013-01-11T10:15:23.877
> 
> 标签：android

我需要通过 AOA 2.0 协议向 Android 手机（果冻豆版）发送多点触控报告描述符和相应的输入报告。我能够成功发送描述符和输入报告，但安卓设备只考虑一键。任何有关这方面的帮助都会对我有很大帮助。

我是这样做的：

1.  将手机切换到AOA模式
2.  在单个命令中发送多点触控报告描述符
3.  发送 14 字节的报告数据，包含第一次触摸`(x,y)`和第二次触摸`(x,y)`信息。

# sql-server - ALTER 当前数据库而不使用其名称

> ID：14275935
> 
> 赞同：22
> 
> 时间：2013-01-11T10:16:06.477
> 
> 标签：sql-server, sql-server-2005

我需要在当前数据库 ( `ALTER DATABASE...`) 上运行更新脚本，但不能使用隐含的名称。是否可以使用某些函数来获取当前数据库名称并在内部使用`ALTER DATABASE`（Sql Server 2005 及更高版本）？我试过使用`db_name()`，但没有用。

`select db_name();`作品

`ALTER DATABASE db_name() ...`不工作

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-11-20T15:24:08.177

实际上，如果您要更改当前数据库，则更像这样的东西可能会更好一些：

`ALTER DATABASE CURRENT SET COMPATIBILITY_LEVEL = 90`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-11T10:19:17.683

你需要使用类似的东西

```
declare @dbname varchar(100)
set @dbname=quotename(db_name())
exec('alter database '+@dbname+' ...'); 
```

或者..更简单

```
set @sql='alter database '+quotename(db_name())+' ...';
exec(@sql) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:22:29.850

试试这个

```
DECLARE @DBName sysname;
SET @DBName = (SELECT db_name());
DECLARE @SQL varchar(1000);
SET @SQL = 'ALTER DATABASE '+@DBName+' .......' 
```

拉吉

# c# - Visual Studio 2012 在应用程序未运行时打开表单

> ID：14275938
> 
> 赞同：0
> 
> 时间：2013-01-11T10:16:25.283
> 
> 标签：c#, winforms, visual-studio-2012

我在 VS 2012 中遇到了一个非常奇怪的问题。在 winform 应用程序的设计时，如果我打开一个特定的表单，登录表单会出现在屏幕上，不像在设计器中那样，而是就像应用程序已经启动一样。

我可以在设计时打开登录表单 ![设计时的登录表单](../Images/316d7f849ae8767eedb9c23360bfe431.png)

但是当我打开另一个名为 Print 的表单时，就会发生这种情况![在此处输入图像描述](../Images/c54990e95d4940484cf2f8ebc02cdf65.png)

显然，我试图打开的表单没有在设计器中打开，而是应用程序似乎已经启动。如果我通过关闭它来与表单交互，那么 Visual Studio 就会崩溃。同样在任务管理器中，该进程是 Devenv.exe。

我试过清除 obj 和 bin 文件夹，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:26:23.083

如果您在第二种形式的 -method 中有一些初始化程序，`_Load`例如要求登录，则该事物将被执行。

您可以在 2\. form 的 '_Load' 中检查以下 3 点，如果出现任何情况，请不要执行 '_Load' 中的代码。

```
this.GetService(typeof(IDesignerHost)) !=null

System.ComponentModel.LicenseManager.UsageMode == System.ComponentModel.LicenseUsageMode.Designtime

System.Diagnostics.Process.GetCurrentProcess().ProcessName == "devenv" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:36:09.563

如果您不想要任何代码更改或进程名称检查，只需将与 GUI 相关的代码从构造函数移动到 Form Shown 事件处理程序。

# c++ - 使用 OpenCV C++ 创建遵循高斯分布的图像

> ID：14275939
> 
> 赞同：2
> 
> 时间：2013-01-11T10:16:27.727
> 
> 标签：c++, image-processing, opencv

我正在尝试使用遵循正态分布的 opencv 创建一个 20X20 图像，我知道有一个 randn 函数可以让我做类似的事情，但是如果我打算嵌入一个我要创建的图像数据中的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T21:02:14.293

在这里查看均匀到高斯随机数： http: [//www.design.caltech.edu/erik/Misc/Gaussian.html](http://www.design.caltech.edu/erik/Misc/Gaussian.html)

如果您想为隐藏文本使用最后 2 个数据位（最低有效位），您需要在噪声图像中将它们设置为零。

接下来，创建 3 个图像：

```
Image noise, mask, textimg

AddNoiseTo(noise) // any kind of noise you want

SetEveryPixel(mask,unsigned char, 255-3)
CvAnd(noise,mask,noise) // to remove noise from the last 2 bits

cvPutText(textimg,yourtext,white);
CvNot(mask,mask) // invert the mask to remove data from the first 6 bits
CvAnd(textimg,mask,textimg) // filter the text image so only last 2 bits are kept
CvOr(noise,textimg,outputimg) // this will merge the two images 
```

如果您想要 7 个数据位（更容易用肉眼看到文本），则从掩码中减去 127（二进制表示 7 个 1）而不是 3（二进制中的 11）。

# c++ - 是否可以使用其他 cpp 文件中的#define？

> ID：14275950
> 
> 赞同：10
> 
> 时间：2013-01-11T10:16:58.790
> 
> 标签：c++, c-preprocessor

我认为预处理器会一个一个地处理文件，我不知道如何处理包含，所以我认为这是不可能的，但很高兴听到其他人的想法。

我有`a.cpp`：

```
#define A 1 
```

我想从`2.cpp`.

编辑：我不能修改第一个文件。所以现在我只是复制了定义。但问题仍然存在。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T10:20:00.487

其他翻译单元看不到源文件中的定义。实现文件是单独编译的。

你可以

*   将它们放在标题中并包含它
*   使用编译器的选项
*   以理智的方式进行 -`extern const int A = 1;`在实现文件中并在您想要使用它时声明它`extern const int A;`。

其中，我想说**第一个选项可能是您可以使用的最差的选项**。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-11T10:18:31.777

如果要在两个源文件之间共享定义，请将其移动到头文件并包含两个源文件中的头文件。

我的定义.h：

```
#ifndef MY_DEFINES_H
#define MY_DEFINES_H

#define A (1)
// other defines go here

#endif // MY_DEFINES_H 
```

源1.cpp：

```
#include "mydefines.h"
// rest of source file 
```

源2.cpp：

```
#include "mydefines.h"
// rest of source file 
```

您还可以在编译器命令行中指定定义。不过，对于跨平台代码（对于不同的编译器可能需要不同的命令行）来说，这可能很容易维护。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T10:18:40.030

您需要将您的头文件放入`#define`一个头文件中，然后`#include`由两个 cpp 文件 d 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-24T20:22:17.030

就像一种方式 - 使用 extern const 变量。

例如：

file1.h（您将在其中使用定义）

```
extern const int MY_DEF;

#if (MY_DEF == 1)
 //some another definitions
#endif 
```

file2.h（您将在其中定义定义）

```
const int MY_DEF = 1 
```

优点和缺点：

(+)：您可以使用一些值来定义

(-)：必须定义所有定义

# sap-ase - 如何从具有许多列的表中从 sybase 中提取几列？在检索数据时还可以容纳一些逻辑吗？

> ID：14275960
> 
> 赞同：1
> 
> 时间：2013-01-11T10:17:32.107
> 
> 标签：sap-ase, sqlbulkcopy, bulk, bcp

我在 Sybase ASE 中有一个包含 60 多列的大表，我想 bcp 出 12 列。我正在检查[手册](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/util/@Generic__BookTextView/10086;pt=8630)上的语法，但找不到提及列名的方法。

我还想在检索数据时添加一些逻辑，例如：

```
convt = case when A.isConvertible='0' then 'N' else 'Y'  end 
```

我主要是在寻找类似 SQL Server bcp 中可用的 queryout 的东西。

我无法在 Sybase 端创建对象。这对我来说是一个来源，我只能在上面做 SELECT 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:43:45.103

这很容易通过创建一个只包含您想要的列和值的*视图来实现。*然后，您可以使用**bcp**从视图中检索数据。

由于您无法在相关数据库中创建对象，这会使事情变得复杂，因为**bcp**仅支持导出完整对象。

仅对相关数据库具有选择权限的一种方法是在*tempdb*中创建视图。它不会在数据服务器重新启动之间持续存在，但它允许您**bcp**出您需要的列。

第二种解决方法可能是在本地系统上安装 ASE 实例，并通过 CIS（[组件集成服务](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase15.cisug/html/omni_ug/omni_ug1.htm)）安装远程表。此时，您应该能够创建所需的视图，并从本地系统执行 bcp out。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T11:17:15.967

这可以通过`isql`在 unix 中使用实用程序来实现：

```
isql -Uuser -Sserver -Ppassword -iinputfile -ooutputfile 
```

您还可以使用`-w`和`-s`选项格式化数据。

# alfresco - 在 Java 支持的 Alfresco-Share webscript 中使用响应输出流时出现异常

> ID：14275961
> 
> 赞同：3
> 
> 时间：2013-01-11T10:17:33.610
> 
> 标签：alfresco, alfresco-share

**1\. 背景**

我想实现一个 Alfresco-Share Java 支持的 webscript，比如现有的“I18N 资源和消息 Web 脚本”。主要区别在于我想使用响应输出流（而不是编写器）。

使用的 Alfresco-Share 版本：4.1.1。

**2\. 用于重现错误的测试代码**

*- 春豆：*

```
<bean id="webscript.test.content.get" parent="webscript" class="test.TestWebscript" /> 
```

*- Java代码：*

```
package test;

import java.io.IOException;

import org.springframework.extensions.webscripts.AbstractWebScript;
import org.springframework.extensions.webscripts.WebScriptRequest;
import org.springframework.extensions.webscripts.WebScriptResponse;

public final class TestWebscript extends AbstractWebScript
{
    @Override
    public void execute(final WebScriptRequest request, final WebScriptResponse response) throws IOException
    {
        response.getOutputStream().write("test".getBytes());
    }
} 
```

*- 网页脚本描述文件：*

```
<?xml version="1.0" encoding="UTF-8"?>

<webscript>
  <shortname>Test webscript</shortname>
  <description>A webscript using the response outputstream</description>
  <url>/test/content</url>
  <format default="">extension</format>
  <lifecycle>draft_public_api</lifecycle>
  <authentication>guest</authentication>
  <transaction>required</transaction>
  <family>Tests</family>
</webscript> 
```

**3\. 结果**

我有以下例外：

```
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:611)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at org.springframework.extensions.webscripts.servlet.WebScriptServletResponse.getWriter(WebScriptServletResponse.java:198)
    at org.springframework.extensions.webscripts.LocalWebScriptRuntimeContainer.executeScript(LocalWebScriptRuntimeContainer.java:241)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:377)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)
    at org.springframework.extensions.webscripts.servlet.mvc.WebScriptView.renderMergedOutputModel(WebScriptView.java:104)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.site.servlet.MTAuthenticationFilter.doFilter(MTAuthenticationFilter.java:74)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.site.servlet.SSOAuthenticationFilter.doFilter(SSOAuthenticationFilter.java:355)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:886)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:721)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2256)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

**4\. 问题**

有没有办法使用 webscript 输出流响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:33:46.580

这是共享 Web 层上 WebScript 运行时的限制。Share 有一个强大的组件框架和可扩展性模型，可以封装所有 WebScript——在 JavaScript 代码、模板等的各个点启用高级定制。不幸的是，将 WebScript 视为将它们的输出合并到一个页面上的组件意味着运行时控​​制OutputStream 和 Writer - 您检索的 Writer 根本不是通常的 Servlet Writer，而是一个包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:40:28.263

在类似情况下，我将 org.alfresco.repo.web.scripts.content.StreamContent 子类化为 AbstractWebScript 而不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-19T13:37:19.630

我遇到了完全相同的问题（使用 Spring Sur 1.2.0 时，同样的问题对于最新的 Trunk 版本仍然有效），

我的解决方案是修补 Spring Surf，如以下 JIRA 问题中所述：[https ://issues.alfresco.com/jira/browse/ALF-21949](https://issues.alfresco.com/jira/browse/ALF-21949)

并在以下论坛主题中：[https ://community.alfresco.com/thread/202736-webscript-to-export-nodes-to-excel-cannot-call-getwriter-after-getoutputstream](https://community.alfresco.com/thread/202736-webscript-to-export-nodes-to-excel-cannot-call-getwriter-after-getoutputstream)

* * *

1）我在 spring-webscripts-1.2.0.jar 中创建了一个新类：

```
package org.springframework.extensions.webscripts;

/**
 * Represents a type of {@link WebScript} which directly streams the content (such as a binary file) to the {@link WebScriptResponse#getOutputStream()}.
 * <p>
 * If you want to implement the streaming of the content directly to the OutputStream obtained from the {@link WebScriptResponse},
 * then subclass this abstract class and override the method {@link AbstractWebScript#execute(WebScriptRequest, WebScriptResponse)}.
 */
public abstract class OutputStreamWebScript extends AbstractWebScript {
} 
```

.

如您所见，这只是一个空的“标记类”。

2）我在 spring-surf-1.2.0.jar 中修改了以下类： org.springframework.extensions.webscripts.LocalWebScriptRuntimeContainer （导致异常的那个）：

2a) 我在executeScript(WebScriptRequest scriptReq, WebScriptResponse scriptRes, Authenticator auth)*之后添加了一个新方法：*

```
 private void executeScriptWithExtensibilityModel(WebScriptRequest scriptReq, WebScriptResponse scriptRes, Authenticator auth) throws IOException
 {
      WebScript script = scriptReq.getServiceMatch().getWebScript();

      if (script instanceof OutputStreamWebScript)
      {
           // This type of WebScript streams directly the content to the OutputStream of the WebScriptResponse,
           // so we must not apply any extensibility model, but call through to the parent container to perform the WebScript processing
           super.executeScript(scriptReq, scriptRes, auth);
      }
      else
      {
           // For all the other types of WebScripts, apply the extensibility model as needed
           ExtensibilityModel extModel = openExtensibilityModel();
           super.executeScript(scriptReq, scriptRes, auth);
           closeExtensibilityModel(extModel, scriptRes.getWriter());
      }
 } 
```

.

2b) 我***在***executeScript(WebScriptRequest scriptReq, WebScriptResponse scriptRes, Authenticator auth) 中替换了以下几行：

```
 try
        {
            // call through to the parent container to perform the WebScript processing
            ExtensibilityModel extModel = openExtensibilityModel();
            super.executeScript(scriptReq, scriptRes, auth);
            closeExtensibilityModel(extModel, scriptRes.getWriter());
        } 
```

这些行：

```
 try
           {
                // call through to the parent container to perform the WebScript processing, applying any ExtensibilityModel
                executeScriptWithExtensibilityModel(scriptReq, scriptRes, auth);
           } 
```

.

也许对 spring-surf 和 spring-webscripts 存储库具有写访问权限的人会提交这些改进，以便其他任何人将来都可以使用它们。

# c# - 点对点网络锁定模式（类似于互斥锁/信号量/监视器）

> ID：14275963
> 
> 赞同：0
> 
> 时间：2013-01-11T10:17:38.540
> 
> 标签：c#, locking

我想做以下事情：

我有好几台电脑。在每台计算机上都会运行一个程序。没有集中式服务器。

该程序可以通过定义的标准选择给另一台计算机指定的数据。这样做时，另一台计算机不应该这样做。（一种2路同步）

让我们举个例子。（C1 .. Cn 是在不同计算机上运行的程序）

C1 发送 C2 更新的数据。当处理处于活动状态时，C2 不应要求 C1 更新其他内容。

当时的想法是：

1.  C1 向 C2 发送消息：PauseExecution()
2.  C1 向 C2 发送要处理的项目（更新 C2 上的一些数据）
3.  C1 向 C2 发送消息：ResumeExecution()。
4.  C2 向 C1 发送消息：PauseExecution()
5.  C2 向 C1 发送要处理的项目（更新 C1 上的一些数据）
6.  C2 向 C1 发送消息：ResumeExecution()。

但是现在最大的问题来了。

如果 C1 向 C2 发送消息以暂停，并且 C22 同时向 C1 发送消息以暂停，则两者都会阻塞。

没有用于保持信号量的集中式服务器/共享内存。

是否有另一种可以使用的模式，以便 n 台计算机不会阻塞？

所以这个问题是关于算法排除的。

或者这个问题还有另一种解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:25:19.357

为什么不向请求发送回复消息并在不同的时间间隔重新运行请求；

C1 向 C2 发送消息：PauseExecution()（回复：Not OK）

C2 向 C1 发送消息：PauseExecution()（回复：Not OK）

C1收到回复消息（等待随机时间再发送另一条消息）

C2收到回复消息（在发送另一条消息之前等待随机时间）

C1向C2发送消息：PauseExecution()（回复：OK）

# bash - 此处文档未在 crontab 的子外壳中执行

> ID：14275965
> 
> 赞同：0
> 
> 时间：2013-01-11T10:17:41.313
> 
> 标签：bash, cron, sftp, heredoc

我有一个脚本在提示符下运行良好，但在 crontab 中运行良好。唯一被破坏的是脚本的子shell中忽略的here文档。该脚本使用 psftp。这是代码：

/home/batch/myscript.sh：

```
(
cd /home/downloaded/csv/
psftp -pw passw0rd -P 1234 user@someftp.com << EOF
cd outgoing
mget *.csv
EOF
) | tee /home/batch/logs/mylog.log | mail -s "Mail subject" "me@mycompany.com" 
```

crontab -e：

```
45 10 * * * /bin/sh /home/batch/myscript.sh 
```

好的 - 从提示启动时的邮件：

```
Remote working directory is /
psftp> Remote directory is now /outgoing
psftp> *.csv: nothing matched
psftp> quit 
```

KO - 从 crontab 启动时的邮件：

```
Remote working directory is /
psftp> quit 
```

谷歌没有提供很多帮助。我尝试了几种 EOF 语法，因为这似乎是这里文档的常见问题，但我认为它不是来自这个。它可能与 crontab 的某种嵌套级别有关，有这样的事情吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:06:38.463

好了，问题解决了：

用于执行脚本的用户 crontab 是不同的。发生的事情是 sftp 的密钥没有为该用户注册。这会导致提示要求注册密钥，我的脚本没有回答。

我以它使用的用户身份连接，psftp'd 并注册了密钥。

# .htaccess - 如何使用 .htaccess 和 mod_rewrite 重写我的 URL？

> ID：14275968
> 
> 赞同：0
> 
> 时间：2013-01-11T10:17:51.893
> 
> 标签：.htaccess, mod-rewrite

我目前有这种格式的 URL：

[http://www.domain.com/game.php?id=3434&title=title-goes-here](http://www.domain.com/game.php?id=3434&title=title-goes-here)

我希望将 URL 写为：

[http://www.domain.com/ID/title-goes-here.html](http://www.domain.com/ID/title-goes-here.html)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:20:45.363

试试这个：

在您网站的根目录中创建一个 .htaccess 文件并将其放入其中。

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)\.html$ /game.php?id=$1&title=$2 [L] 
```

# node.js - JITSU 无法安装 OSX [节点 0.8.17 和 NPM 1.2.0] WTF

> ID：14275973
> 
> 赞同：2
> 
> 时间：2013-01-11T10:18:04.413
> 
> 标签：node.js, npm, nodejitsu

我在通过 NPM 安装 jitsu 时遇到问题我在我的 mac osx 10.6.8 上安装了节点 0.8.17 和 NPM 1.2.0

当我跑步时

$ sudo npm install jitsu -g 首先它警告没有找到自述文件

```
npm WARN package.json ladder@0.0.0 No README.md file found! 
```

然后出现错误：

```
npm ERR! Error: ENOENT, lstat '/usr/local/lib/node_modules/jitsu/node_modules/request/tests/test-toJSON.js'
npm ERR! If you need help, you may report this log at:
npm ERR! http://github.com/isaacs/npm/issues
npm ERR! or email it to:
npm ERR! npm-@googlegroups.com

npm ERR! System Darwin 10.8.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "jitsu" "-g"
npm ERR! cwd /usr/local/share
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/jitsu/node_modules/request/tests/test-toJSON.js
npm ERR! fstream_path /usr/local/lib/node_modules/jitsu/node_modules/request/tests/test-toJSON.js
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/fstream/lib/writer.js:284:26
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm http 304 https://registry.npmjs.org/block-stream
npm ERR! error rolling back Error: ENOTEMPTY, rmdir '/usr/local/lib/node_modules/jitsu/node_modules/npm/doc'
npm ERR! error rolling back jitsu@0.11.4 { [Error: ENOTEMPTY, rmdir '/usr/local/lib/node_modules/jitsu/node_modules/npm/doc']
npm ERR! error rolling back errno: 53,
npm ERR! error rolling back code: 'ENOTEMPTY',
npm ERR! error rolling back path: '/usr/local/lib/node_modules/jitsu/node_modules/npm/doc' }
npm ERR! Error: ENOTEMPTY, rmdir '/usr/local/lib/node_modules/jitsu/node_modules/flatiron'
npm ERR! If you need help, you may report this log at:
npm ERR! http://github.com/isaacs/npm/issues
npm ERR! or email it to:
npm ERR! npm-@googlegroups.com

npm ERR! System Darwin 10.8.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "jitsu" "-g"
npm ERR! cwd /usr/local/share
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/jitsu/node_modules/flatiron
npm ERR! code ENOTEMPTY
npm ERR! errno 53
npm ERR! EEXIST, mkdir '/usr/local/lib/node_modules/jitsu/node_modules/wizard/node_modules/prompt/docs'
File exists: /usr/local/lib/node_modules/jitsu/node_modules/wizard/node_modules/prompt/docs
Move it away, and try again.

npm ERR! System Darwin 10.8.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "jitsu" "-g"
npm ERR! cwd /usr/local/share
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/jitsu/node_modules/wizard/node_modules/prompt/docs
npm ERR! fstream_path /usr/local/lib/node_modules/jitsu/node_modules/wizard/node_modules/prompt/docs/docco.css
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code EEXIST
npm ERR! errno 47
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/fstream/lib/writer.js:171:23
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR! Error: ENOENT, lstat '/usr/local/lib/node_modules/jitsu/node_modules/fstream-npm/node_modules/fstream-ignore/test/.npmignore'
npm ERR! If you need help, you may report this log at:
npm ERR! http://github.com/isaacs/npm/issues
npm ERR! or email it to:
npm ERR! npm-@googlegroups.com

npm ERR! System Darwin 10.8.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "jitsu" "-g"
npm ERR! cwd /usr/local/share
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/jitsu/node_modules/fstream-npm/node_modules/fstream-ignore/test/.npmignore
npm ERR! fstream_path /usr/local/lib/node_modules/jitsu/node_modules/fstream-npm/node_modules/fstream-ignore/test/.npmignore
npm ERR! fstream_type File
npm ERR! fstream_class FileWriter
npm ERR! code ENOENT
npm ERR! errno 34
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/fstream/lib/writer.js:284:26
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15) 
```

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:09:04.447

对于遇到此问题的其他人，您需要 2 个命令：

```
npm cache clear
sudo npm install jitsu -g 
```

在 Nodejitsu 的 github 上，他们建议在 OSX 上不使用 [sudo] 安装它，但在 10.6.8 上似乎失败了

快乐编码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T12:23:28.867

首先删除旧的 jitsu 目录：`[sudo] rm -rf /usr/local/lib/node_modules/jitsu`. 然后清除你的 npm 缓存：`npm cache clear`然后再试一次：`[sudo] npm install jitsu -g`

# php - 在 MVC 架构中记录数据库错误的位置

> ID：14275974
> 
> 赞同：4
> 
> 时间：2013-01-11T10:18:07.940
> 
> 标签：php, model-view-controller, logging, error-handling, zend-framework2

或任何与此相关的框架。

以 Zend Framework 2 为例，我有以下表类：

```
<?php

namespace Contact\Model;

use Zend\Db\TableGateway\TableGateway;
use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Log\Logger;

class UserContactsTable extends AbstractTableGateway
{
    protected $tableGateway;

    /**
     *
     * @var \Zend\Log\Logger Instance
     */
    protected $logger;

    public function __construct(TableGateway $tableGateway, Logger $logger )
    {
        $this->tableGateway = $tableGateway;
        $this->logger       = $logger;
    }

    /**
     * Save a contact
     * 
     * @param \Sms\Model\UserContact $userContact
     */
    public function saveUserContact(UserContact $userContact)
    {
        $data = array(
            'user_id'       => $userContact->user_id,
            'contact_id'    => $userContact->contact_id
        );

        try {
            $this->tableGateway->insert($data);
        } catch (\Exception $e) {
                    //log
            $this->logger->crit($omeErrMsg);

        }
    }
}
?> 
```

我应该在这里登录吗？我应该将我的记录器绑定到表类吗？如果插入失败并在控制器中捕获并在那里记录，我是否应该让 saveUserContact 函数抛出异常？

最好的做法是什么？

我最初的想法是创建一个带有一些恒定错误消息的类，例如记录器在表类中使用的插入和更新失败，但我不确定这里的正确过程是什么。

这并不仅限于 PHP 或 Zend Framework 2，而恰好是我正在使用的语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T17:52:48.560

我认为系统的各个组件应该尽可能地分离。所以在这个例子中，如果`saveUserContact`碰巧失败，那么它可能会导致抛出异常，因为这不是预期的行为。此类不需要知道“更进一步”会发生什么，例如错误记录。

正如您所提到的，最好抛出异常并将其捕获在您的控制器（或其他形式的侦听器）中，然后处理日志记录。

这种方法的好处是您的系统将更容易测试，因为在构建要测试的 UserContactsTable（模拟）对象时，您将有更少的对象来存根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T17:40:20.163

一般来说，我觉得你应该在它们发生的地方*记录*失败（除非它们是预期的，在这种情况下会很吵）但是将异常传播到堆栈（或包装器异常），以便调用者可以决定是否忽略/重试/失败（并记录自己的、更与业务逻辑相关的消息）。

# python - 创建随机二进制文件

> ID：14275975
> 
> 赞同：21
> 
> 时间：2013-01-11T10:18:12.520
> 
> 标签：python, random

我正在尝试使用 python 创建一个随机二进制文件。这是我已经得到的：

```
f = open(filename,'wb')
for i in xrange(size_kb):
    for ii in xrange(1024/4):
        f.write(struct.pack("=I",random.randint(0,sys.maxint*2+1)))

f.close() 
```

但它非常慢（在我的 3.9GHz SSD 磁盘机器上 size_kb=1024 为 0.82 秒）。一个很大的瓶颈似乎是随机 int 生成（用 0 替换 randint() 将运行时间从 0.82 秒减少到 0.14 秒）。

现在我知道有更有效的方法来创建随机数据文件（即 dd if=/dev/urandom），但出于好奇，我正在尝试解决这个问题……有没有明显的改进方法？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-11T10:43:35.640

恕我直言 - 以下是完全多余的：

```
f.write(struct.pack("=I",random.randint(0,sys.maxint*2+1))) 
```

绝对没有必要使用`struct.pack`，只需执行以下操作：

```
import os

with open('output_file', 'wb') as fout:
    fout.write(os.urandom(1024)) # replace 1024 with size_kb if not unreasonably large 
```

然后，如果您需要重新使用该文件来读取整数，`struct.unpack`那么。

> （我的用例是为单元测试生成一个文件，所以我只需要一个与其他生成的文件不同的文件）。

另一种选择是将 UUID4 写入文件，但由于我不知道确切的用例，我不确定这是否可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T11:21:10.310

您应该编写的 python 代码完全取决于您打算使用随机二进制文件的方式。如果您只需要一个“相当好的”随机性用于多种用途，那么 Jon Clements 的代码可能是最好的。

但是，至少在 Linux 操作系统上，os.urandom 依赖于 /dev/urandom，Linux 内核 (drivers/char/random.c) 中对此进行了如下描述：

> /dev/urandom 设备 [...] 将返回请求的字节数。随着越来越多的随机字节被请求，而没有给熵池充值的时间，这将导致随机数仅具有加密强度。然而，对于许多应用来说，这是可以接受的。

所以问题是，这对您的应用程序是否可以接受？如果您更喜欢更安全的 RNG，则可以改为读取 /dev/random 上的字节。该设备的主要不便之处：如果 Linux 内核无法收集足够的熵，它可能会无限期地阻塞。还有其他加密安全的 RNG，例如[EGD](http://egd.sourceforge.net/)。

或者，如果您主要关心的是执行速度，并且如果您只需要蒙特卡洛方法的一些“轻微随机性”（即不可预测性无关紧要，均匀分布确实如此），您可以考虑生成一次随机二进制文件并使用它很多次，至少对于发展。

# linux - 为什么 Ubuntu 终端在运行负载测试时会关闭？

> ID：14275979
> 
> 赞同：1
> 
> 时间：2013-01-11T10:18:27.420
> 
> 标签：linux, ubuntu, load

在我的笔记本电脑上使用 cometd 对 2000 个并发用户进行负载测试时遇到一个特殊问题。遵循[http://cometd.org/documentation/2.x/howtos/loadtesting](http://cometd.org/documentation/2.x/howtos/loadtesting)中的所有步骤。这些测试对于大约 1000 个并发客户端运行良好。

但是当我将负载增加到大约 2000 个 CCU 时，终端就会关闭。

知道这里发生了什么吗？

顺便说一句，我已经按照网站遵循了所有操作系统级别的设置。IE

```
# ulimit -n 65536
# ifconfig eth0 txqueuelen 8192 # replace eth0 with the ethernet interface you are using
# /sbin/sysctl -w net.core.somaxconn=4096
# /sbin/sysctl -w net.core.netdev_max_backlog=16384
# /sbin/sysctl -w net.core.rmem_max=16777216
# /sbin/sysctl -w net.core.wmem_max=16777216
# /sbin/sysctl -w net.ipv4.tcp_max_syn_backlog=8192
# /sbin/sysctl -w net.ipv4.tcp_syncookies=1 
```

此外，我注意到即使在为其他平台运行负载测试时也会发生这种情况。我知道这必须与操作系统有关，但我无法弄清楚它可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:44:20.697

ulimit 命令是否已正确执行？[我在Ubuntu 论坛存档](http://ubuntuforums.org/archive/index.php/t-114071.html)和[Ubuntu apache 问题](http://ubuntuforums.org/showthread.php?t=1981187)中读到了一些关于它的内容。

# python - 删除两个列表中的共同元素

> ID：14275986
> 
> 赞同：5
> 
> 时间：2013-01-11T10:18:41.467
> 
> 标签：python, list, matching

我有两个可以包含重复元素的正整数排序列表，我必须删除匹配的数字对，每个列表中一个：

```
a=[1,2,2,2,3]
b=[2,3,4,5,5] 
```

应该变成：

```
a=[1,2,2]
b=[4,5,5] 
```

也就是说，2 和 3 已被删除，因为它们出现在两个列表中。

由于元素重复，此处不能使用集合交集。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:21:18.893

要删除出现在两个列表中的元素，请使用以下命令：

```
for i in a[:]:
    if i in b:
        a.remove(i)
        b.remove(i) 
```

要创建一个为您执行此操作的函数，只需执行以下操作：

```
def removeCommonElements(a, b):
    for e in a[:]:
        if e in b:
            a.remove(e)
            b.remove(e) 
```

或者返回新列表而不是编辑旧列表：

```
def getWithoutCommonElements(a, b): # Name subject to change
    a2 = a.copy()
    b2 = b.copy()
    for e in a:
        if e not in b:
            a2.remove(e)
            b2.remove(e)
    return a2, b2 
```

但是前者可以替换为`removeCommonElements`：

```
a2, b2 = a.copy(), b.copy()
removeCommonElements(a2, b2) 
```

这将保留 a 和 b，但会创建一个没有共同元素的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:37:34.140

集合中的 Counter 对象可以非常简洁地做到这一点：

```
from collections import Counter
a=Counter([1,2,2,2,3])
b=Counter([2,3,4,5,5])
print list((a-b).elements())
print list((b-a).elements()) 
```

这个想法是：

1.  计算每个元素出现的频率（例如 2 在 a 中出现 3 次，在 b 中出现 1 次）
2.  减去计数以计算元素出现的额外次数（例如 2 在 a 中出现 3-1=2 倍于 b）
3.  输出每个元素出现的额外次数（集合元素方法会自动删除任何计数小于 1 的元素）

（警告：输出列表不一定会排序）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T10:44:57.550

鉴于列表已排序，您可以按元素合并/分布，例如：

```
x, y = [], []

while a and b:
    if a[0] < b[0]:
        x.append(a.pop(0))
    elif a[0] > b[0]:
        y.append(b.pop(0))
    else: # a[0]==b[0]
        a.pop(0)
        b.pop(0)

x += a
y += b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T10:59:21.213

@Mahi 给出的解决方案几乎是正确的。实现您想要的最简单的方法是：

```
def remove_common_elements(a, b):
    for i in a[:]:
        if i in b:
            a.remove(i)
            b.remove(i)
     return a, b 
```

这里重要的是`a`通过书写来复制`a[:]`。如果您在从列表中删除元素的同时遍历列表，您将不会得到正确的结果。

如果您不想就地修改列表，请事先复制两个列表并返回复制的列表。

```
def remove_common_elements(a, b):
    a_new = a[:]
    b_new = b[:]
    for i in a:
        if i in b_new:
            a_new.remove(i)
            b_new.remove(i)
    return a_new, b_new 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T11:04:10.653

一种解决方案是创建 a 的新副本并从 b 中删除公共元素。

```
a = [1,2,2,2,3]
b = [2,2,3,4,5]

a_new = []
for ai in a:
    if ai in b:
        b.remove(ai)
    else:
        a_new.append(ai)

print a_new
print b 
```

# jquery-mobile - 使用phonegap和jquery（-mobile）在多页移动应用程序中的页面显示上未更新LocalStorage值

> ID：14275988
> 
> 赞同：0
> 
> 时间：2013-01-11T10:18:42.847
> 
> 标签：jquery-mobile, local-storage, multipage

我有一个使用 phonegap、leaflet 和 jquery(-mobile) 的多页移动应用程序以及以下问题：

在 page1 上，当单击地图标记时，将 poi 的名称写入 localstorage，然后调用 page2：

```
var onMarkerClick = function(e) {
akt_poi = e.layer.options.poi;
var globVars = {
    "akt_poi": akt_poi,
};
localStorage.setItem('globalVariables', JSON.stringify(globVars));
window.location = '#page2';
}; 
```

在第 2 页上，我正在执行以下操作：

```
<div data-role="content">
<div id=poi></div>
<script type="text/javascript">
var gV = JSON.parse(localStorage.getItem("globalVariables"));
var a_poi = gV.akt_poi;
document.getElementById("poi").innerHTML='<h2>'+a_poi+'</h2>';
</script> 
```

正确值仅在第一次调用时显示。当再次单击 page1 的地图标记时，旧值而不是本地存储的值会显示在 page2 上，直到进行页面刷新。我该怎么做才能显示正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:12:25.483

我通过使用会话存储解决了这个问题：

第 1 页上的设置：

```
var onMarkerClick = function(e) {
  akt_poi = e.layer.options.poi;
  sessionStorage.akt_poi=akt_poi;
  window.location = '#page2';
}; 
```

在第2页上阅读：

```
<div data-role="content">
<div id=poi></div>
<script type="text/javascript">
  $('#page_audio').live('pageshow', function(event, ui) {
     document.getElementById("poi").innerHTML='<h2>'+sessionStorage.akt_poi+'</h2>';
    });
</script> 
```

# php - mysql中逗号分隔字段的更好替代方案

> ID：14275992
> 
> 赞同：3
> 
> 时间：2013-01-11T10:18:55.877
> 
> 标签：php, mysql, database

在我的应用程序中，每当用户上传壁纸时，我都需要将该壁纸裁剪成 3 种不同的尺寸并将所有这些路径（裁剪图像的 3 个路径和原始上传壁纸的 1 个路径）存储到我的数据库中。
我还需要存储原始壁纸的 tinyurl（由用户上传）。

在解决上述问题时，我提出了以下表格结构。

```
CREATE TABLE `wallpapermaster` (
  `wallpaperid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `userid` bigint(20) NOT NULL,
  `wallpaperloc` varchar(100) NOT NULL,
  `wallpapertitle` varchar(50) NOT NULL,
  `wallpaperstatus` tinyint(4) DEFAULT '0' COMMENT '0-Waiting,1-approved,2-disapproved',
  `tinyurl` varchar(40) NOT NULL
) ENGINE=MyISAM 
```

wallpaperloc 是一个逗号分隔的字段，由原始壁纸位置和所有裁剪实例的位置组成。

我知道使用逗号分隔字段在关系数据库领域被认为是一种糟糕的设计，所以您想提出一些其他简洁有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:26:48.983

在 wallpapermaster 和位置表之间使用 1:n 关系。

像这样的东西：

```
CREATE TABLE wallpapermaster (
  wallpaperid     int unsigned NOT NULL AUTO_INCREMENT,
  userid          bigint NOT NULL,
  wallpaperloc    varchar(100) NOT NULL,
  wallpapertitle  varchar(50) NOT NULL,
  wallpaperstatus tinyint DEFAULT '0' COMMENT '0-Waiting,1-approved,2-disapproved',
  primary key (wallpaperid)
) ENGINE=InnoDB;

CREATE TABLE wallpaperlocation (
  wallpaperid  int unsigned NOT NULL,
  location     varchar(100) NOT NULL,
  tinyurl      varchar(40),
  constraint fk_loc_wp 
      foreign key (wallpaperid) 
      references wallpapermaster (wallpaperid),
   primary key (wallpaperid, location)
) ENGINE=InnoDB; 
```

主键 in`wallpaperlocation`保证同一个位置不能被插入两次。

请注意，`int(10)`没有定义任何数据类型约束。它只是*提示*客户端应用程序指示该数字有多少位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:22:21.523

通常您使用固定位置（可能不在配置中）、修复扩展名（通常`jpg`）和特殊文件名格式，例如`[name]-1024x768.jpg`. 这样你只有名字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T10:27:19.800

在我看来，即使在关系数据库中使用`;`或`,`在**简单的应用程序**中也是非常好的解决方案。

您应该适当考虑拆分图像的数量。如果壁纸少于 5 张，我不会采用开销复杂的解决方案。

*   在数据库和应用程序中易于维护。您将使用字符串`splitting/joining`方法
*   **无需添加用于检索值的额外**表`join`。
*   使用简单的`varchar`相当`xml`更好，因为您不必依赖应用程序数据库访问引擎。当您使用**ORM**或**JDBC**时，您需要做额外的工作来处理更复杂的数据类型。

在更**复杂**的系统中，我会制作`XML`专栏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T22:22:25.763

虽然缩略图是从单个上传的文件自动生成的，但您根本不需要存储裁剪/调整大小文件的路径。

相反，您可以只使用标准化的文件名作为缩略图，然后在文件系统中找到它们——KingCrunch 建议：`photo1.jpg`等`photo1-medium.jpg`。

无论如何，我的 2cc：为了避免使用一些收割机遍历您的图像库（和创建的缩略图），即使仅使用 MD5 + 一些以编程方式的密钥加密每个缩略图的名称也是一个好主意，因此只有知道密钥的程序才能创建正确的基于原始名称/路径的缩略图路径。对于其他客户端，命名顺序将是随机的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T10:24:57.647

```
CREATE TABLE `wallpapermaster` (
  `wallpaperid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `userid` bigint(20) NOT NULL,
  `wallpapertitle` varchar(50) NOT NULL,
  `wallpaperstatus` tinyint(4) DEFAULT '0' COMMENT '0-Waiting,1-approved,2-disapproved',
  `tinyurl` varchar(40) NOT NULL
) ENGINE=MyISAM 
```

创建一个新表，它将与“wallpapermaster”表建立关系

```
create wallpapermaster_mapper( 
    `id` unsigned NOT NULL AUTO_INCREMENT,
    `wallpapermaster_id` int(10) //this will be foreign key with id of wallpapermaster table
    `wallpaper_path1`  varchar(100) NOT NULL,
    `wallpaper_path2`  varchar(100) NOT NULL,
    `wallpaper_path3`  varchar(100) NOT NULL,
    ) 
```

# google-app-engine - 如何将应用程序迁移到欧盟数据中心？

> ID：14275994
> 
> 赞同：4
> 
> 时间：2013-01-11T10:19:08.143
> 
> 标签：google-app-engine

我们的应用程序已被邀请参加欧盟数据中心选项的早期测试人员计划，但尚不清楚如何将我们的应用程序迁移到那里。

邀请中包含指向[https://developers.google.com/appengine/docs/java/gettingstarted/uploading](https://developers.google.com/appengine/docs/java/gettingstarted/uploading)的链接，这似乎暗示我在创建新应用程序时需要选择欧盟数据中心，但当我尝试这样做时所以，我在后续页面上看不到“位置选项”。

我该如何迁移？

# html - 如何设置高度？

> ID：14275998
> 
> 赞同：2
> 
> 时间：2013-01-11T10:19:17.693
> 
> 标签：html, css

HTML：

```
<div class="spoiler-content-block">
    <div class="spoiler-inner-content-block">
        <div class="top-block top-block-tight">
            Name
        </div>
        <div class="bottom-block">
            <span class="previous-number">0</span>
        </div>
    </div>
    <div class="spoiler-inner-content-block">
        <div class="top-block">
            Time of last login
        </div>
        <div class="bottom-block">
            <br>
            <span class="previous-number">0</span>
        </div>
    </div>
    <div class="spoiler-inner-content-block">
        <div class="top-block top-block-tight">
            Status
        </div>
        <div class="bottom-block">
            <span class="current-number">0</span><br>
            <span class="previous-number">0</span>
        </div>
    </div>
</div> 
```

CSS：

```
div.spoiler-content{
    border: 1px solid #DDDDDD;
    padding: 10px;
    white-space: nowrap;
    text-align:center;
}

div.spoiler-content-block{
    display: inline-block;
    border:1px solid #ececec; 
    white-space: normal; 
    padding: 5px;
    text-align: center;
    vertical-align: middle;
}

div.spoiler-inner-content-block{
    display:inline-block;
    white-space: nowrap;
}

.top-block{
    border: 1px solid #ececec;
    padding: 5px;
    margin-bottom: 5px;
    height: 30px;
}

.bottom-block{
    border: 1px solid #ececec;
    padding: 5px;
} 
```

示例：http: [//jsfiddle.net/nonamez/aGQ8F/](http://jsfiddle.net/nonamez/aGQ8F/)

问题在于`<div class="bottom-block">`- 当有一个值下降时，如何解决它？

![在此处输入图像描述](../Images/d614d7cb8697f55533cbfdf61cd61284.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:25:46.593

尝试添加`vertical-align:top`到您的`div.spoiler-inner-content-block`

```
div.spoiler-inner-content-block{
    display:inline-block;
    white-space: nowrap;
    vertical-align:top;
} 
```

我[叉了你的小提琴](http://jsfiddle.net/vWqfD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:29:56.623

[小提琴](http://jsfiddle.net/aGQ8F/15/)

您需要添加`vertical-align:top`到`spoiler-inner-content-block`

# salesforce - 在 Salesforce 中处理中文名称的最佳方法是什么？

> ID：14275999
> 
> 赞同：2
> 
> 时间：2013-01-11T10:19:17.943
> 
> 标签：salesforce

Salesforce 根据西方惯例区分姓氏和个人姓名。

那就是名字是个人的，最后一个是姓氏。这可以通过更改 salesforce 区域设置（例如从美国到中国）来更改，以便名字是姓氏，姓氏是个人的

因此，在原版科幻小说中，约翰史密斯以约翰史密斯的身份出现。如果您切换到中文本地化，它将显示为 Smith John。

同样地，在原版的 Lim Keat Song 中会显示为 Keat Song Lim，但在中文本地化中会显示为 Lim Keat Song。

我的问题是我的联系人中大约 30% 有东亚人的名字，所以这两种本地化都不是完全令人满意的。

在标准接触对象上解决此问题的最佳方法是什么？

[我已经在salesforce](http://success.salesforce.com/questionDetail?qid=a1X30000000ezcvEAA)上问过这个问题，据我所知，谷歌上没有太多关于这个的问题。

我问这个是因为虽然我可以解决它 - 可能是按照 SD 问题的思路 - 这可能是一个已知问题，我想找到最好的解决方案而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:56:05.893

只是为了你的想法。

我们在 Contact 对象上添加两个自定义字段作为公式。一个名为姓氏的自定义字段是指联系人上的标准姓氏字段，另一个名为名字是指联系人上的标准名字字段。

因此，您不需要对这些自定义字段执行任何数据导入，而只需定义如何在联系人显示中显示自定义的姓氏和名字字段。

并且这种姓氏和名字的布局不会随着用户的本地化设置而改变。

这可能不是解决这个问题的完美方法，我希望它会有所帮助。