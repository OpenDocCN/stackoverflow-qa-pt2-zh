# StackOverflow 问答 15371000-15371999

# ios - NSFetchedResultsController 多次调用 controllerDidChangeContent 委托，结果陈旧？

> ID：15371002
> 
> 赞同：8
> 
> 时间：2013-03-12T20:02:31.750
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我有一个这样的核心数据模型设置：

```
TileList <->> TileListOrder
TileListOrder <<-> Tile 
```

并且创建了一个 NSFetchedResultsController：

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"tile <> nil AND tileList <> nil AND tile.removed == 0 AND  tileList.removed == 0"];
NSSortDescriptor* sortTileListDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"tileList.order" ascending:YES] autorelease];
NSSortDescriptor* sortTileDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"order" ascending:YES] autorelease];

NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setPredicate:predicate];

[fetchRequest setSortDescriptors:sortDescriptors];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"TileListOrder" inManagedObjectContext:coreManagedObjectContext];
[fetchRequest setEntity:entity];

NSFetchedResultsController* fetchedResults = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                 managedObjectContext:coreManagedObjectContext
                                                                                   sectionNameKeyPath:@"tileList.order"
                                                                                            cacheName:nil]; 
```

我还在辅助 NSManagedObjectContext 上导入数据并将这些更改合并回来，如下所示：

```
- (void) localContextDidSave:(NSNotification*) notification {
        dispatch_sync(dispatch_get_main_queue(), ^{
    [coreManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];

        [self didSaveModelToCoreDataPersistentStore];

    });

    [super didEndUpdatingObjectInBackgroundThread];

} 
```

我正在添加和删除 TileListOrders 对象。它从 6 个对象和 3 个部分开始，当我完成时，删除了 6 个原始对象并插入了 6 个新对象。

现在我的问题是在 NSFetchedResultsController 委托上，它在 mergeChangesFromContextDidSaveNotification:notification 之后立即被调用

```
-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller{

 NSLog(@"controller has %d sections, %d results:",[[controller sections] count], [[controller fetchedObjects] count]);
} 
```

第一次打印 12 个对象和 3 个部分时被称为 TWICE，第二次在 3 个部分中打印 6 个对象。

在检查 fetchedObjects 时，第一次有 6 个插入的对象加上其他 6 个被删除的原始对象。第二次它包含预期的 3 个部分中的 6 个对象。

看着：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject

   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type

  newIndexPath:(NSIndexPath *)newIndexPath{
} 
```

第一次调用 controllerDidChangeContent 时，仅处理 NSFetchedResultsChangeInsert 更改，第二次仅处理 NSFetchedResultsChangeDelete 更改。

我希望 controllerDidChangeContent 只有在处理完所有更改后才会被调用。如果这是驱动一个 tableView 那么这意味着 tableview 将动画两次。一次用于插入的项目，另一个用于已删除的项目。问题是，第一次调用 controllerDidChangeContent 时，NSFetchedResultsController 中的对象已被删除，但仍存在于结果数组中，现在它们的属性值无效，因此显示这些项目的 tableView 可能会崩溃。

任何人都知道如何使更改合并，以便在收到 mergeChangesFromContextDidSaveNotification 通知后仅调用一次 controllerDidChangeContent 吗？

-----------**更新**---------------

更多信息。

我只是在观察 NSManagedObjectContextDidSaveNotification 并且 localContextDidSave 只被调用一次。

```
NSNotificationCenter* defaultCenter = [NSNotificationCenter defaultCenter];
[defaultCenter addObserver:self selector:@selector(localContextDidSave:) name:NSManagedObjectContextDidSaveNotification object:managedObjectContext]; 
```

这是堆栈跟踪。第一次调用 controllerDidChangeContent 时，仅报告与 INSERTED 对象相关的更改，并且已删除的对象仍然存在于 NSFetchedResultsController 结果中。如您所见，它是由

```
#0  0x001fb735 in -[HomeViewController controllerDidChangeContent:] 
#1  0x02947f9a in -[NSFetchedResultsController(PrivateMethods) _managedObjectContextDidChange:] ()
#2  0x022d34f9 in __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 ()
#3  0x02e1c0c5 in ___CFXNotificationPost_block_invoke_0 ()
#4  0x02d76efa in _CFXNotificationPost ()
#5  0x02207bb2 in -[NSNotificationCenter postNotificationName:object:userInfo:] ()
#6  0x0285a163 in -[NSManagedObjectContext(_NSInternalNotificationHandling) _postObjectsDidChangeNotificationWithUserInfo:] ()
#7  0x0286dc71 in -[NSManagedObjectContext _mergeChangesFromDidSaveDictionary:usingObjectIDs:] ()
#8  0x0286ce2e in -[NSManagedObjectContext mergeChangesFromContextDidSaveNotification:] ()
#9  0x00044be2 in __50-[CoreDataUpdateableObject localContextDidSave:]_block_invoke 
#10 0x0306f731 in _dispatch_barrier_sync_f_slow_invoke ()
#11 0x0307e014 in _dispatch_client_callout ()
#12 0x0306e7d5 in _dispatch_main_queue_callback_4CF ()
#13 0x02d68af5 in __CFRunLoopRun ()
#14 0x02d67f44 in CFRunLoopRunSpecific ()
#15 0x02d67e1b in CFRunLoopRunInMode ()
#16 0x038617e3 in GSEventRunModal ()
#17 0x03861668 in GSEventRun ()
#18 0x01756ffc in UIApplicationMain ()
#19 0x000022c6 in main 
```

第二次调用 controllerDidChangeContent 时，堆栈跟踪是：

```
#0  0x001fb735 in -[HomeViewController controllerDidChangeContent:] 
#1  0x02947f9a in -[NSFetchedResultsController(PrivateMethods) _managedObjectContextDidChange:] ()
#2  0x022d34f9 in __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 ()
#3  0x02e1c0c5 in ___CFXNotificationPost_block_invoke_0 ()
#4  0x02d76efa in _CFXNotificationPost ()
#5  0x02207bb2 in -[NSNotificationCenter postNotificationName:object:userInfo:] ()
#6  0x0285a163 in -[NSManagedObjectContext(_NSInternalNotificationHandling) _postObjectsDidChangeNotificationWithUserInfo:] ()
#7  0x028f3d2f in -[NSManagedObjectContext(_NSInternalChangeProcessing) _createAndPostChangeNotification:withDeletions:withUpdates:withRefreshes:] ()
#8  0x02855596 in -[NSManagedObjectContext(_NSInternalChangeProcessing) _processRecentChanges:] ()
#9  0x02854869 in -[NSManagedObjectContext processPendingChanges] ()
#10 0x02828e38 in _performRunLoopAction ()
#11 0x02d8aafe in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
#12 0x02d8aa3d in __CFRunLoopDoObservers ()
#13 0x02d687c2 in __CFRunLoopRun ()
#14 0x02d67f44 in CFRunLoopRunSpecific ()
#15 0x02d67e1b in CFRunLoopRunInMode ()
#16 0x038617e3 in GSEventRunModal ()
#17 0x03861668 in GSEventRun ()
#18 0x01756ffc in UIApplicationMain ()
#19 0x000022c6 in main 
```

这一次它是由：[NSManagedObjectContext processPendingChanges] () 这第二次 NSFetchedResultsController 结果实际上具有所需的状态：删除的对象被删除，插入的对象存在。

我的问题是第一个 mergeChanges 应该触发具有合并更改的 controllerWillChangeContent，因此结果应该处于一致状态。

从发布的原始代码中，我确实添加了 [coreManagedObjectContext processPendingChanges]; [coreManagedObjectContext mergeChangesFromContextDidSaveNotification:notification] 之后；因为没有这个，第二次调用只会在下一次运行循环时触发。

我也试过 [coreManagedObjectContext setPropagatesDeletesAtEndOfEvent:NO]; 但行为是一样的。已删除的对象仅在第二次调用中被删除。

# c# - 错误 mgs：没有为一个或多个必需参数指定值：rgds 到多个参数

> ID：15371007
> 
> 赞同：0
> 
> 时间：2013-03-12T20:02:48.567
> 
> 标签：c#, ms-access

访问 2003 与 2010 C#

我的 WHERE 子句有问题。最初我使用 OR 但现在意识到它必须与 WHERE 我没有做对的事情有关，还是其他事情？请有人可以在这里帮助我。提前致谢。ps c sharp student 以前帮过我。

学生表

> 字段名称数据类型

```
 ID         Number 
 FirstName  Text
 LastName   Text
 StudentDOB Date/Time
 Course     Text 
```

连接字符串：

```
myCon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\...\StudentDB.mdb"); 
```

btn查找方法...

```
private void btnFind_Click(object sender, EventArgs e)
    {
        string title = txtSearch.Text.ToString();
        string queryString = "SELECT * FROM StudentTable WHERE ID = ?"; //I have also tried WHERE ID = @ID without success

        OleDbCommand command = new OleDbCommand();
        command.CommandText = queryString;
        command.Connection = myCon;
        myCon.Open();
        OleDbDataReader dr = command.ExecuteReader();
        while (dr.Read())
        {
            txtStudID.Text += String.Format("ID: {0}\n", dr["ID"].ToString());
            txtFirstName.Text += String.Format("FirstName: {0}\n", dr["FirstName"].ToString());
            txtLastName.Text += String.Format("LastName: {0}\n", dr["LastName"].ToString());
            txtStudDOB.Text += String.Format("StudentDOB: {0}\n", dr["StudentDOB"].ToString());
            txtCourse.Text += String.Format("Course: {0}\n", dr["Course"].ToString());

        }
        myCon.Close();

    } 
```

我的删除方法是这样的，没有问题（我想你可能想知道）......

```
 private void btnDelete_Click(object sender, EventArgs e)
    {
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

        cmd.CommandText = "DELETE FROM StudentTable WHERE txtStudID = ?";
        cmd.Parameters.AddWithValue("@ID", txtStudID.Text);
        cmd.Parameters.AddWithValue("@FirstName", txtFirstName.Text);
        cmd.Parameters.AddWithValue("@LastName", txtLastName.Text);
        cmd.Parameters.AddWithValue("@StudDOB", txtStudDOB.Text);
        cmd.Parameters.AddWithValue("@Course", txtCourse.Text);

        cmd.Connection = myCon;
        myCon.Open();
        cmd.ExecuteNonQuery();
        myCon.Close();

    } 
```

我在Access中测试了sql查询没有问题...

```
SELECT StudentTable.ID
FROM StudentTable
WHERE (((StudentTable.ID)=1)); 
```

**找到解决方案**

我从这个链接中找到了一个解决方案，当然是从stackoverflow....

[这里](https://stackoverflow.com/questions/6475547/getting-data-from-access-into-a-text-box-in-c-sharp-by-clicking-a-button?rq=1)

感谢大家的宝贵时间，尤其是布拉德。

**布拉德 - 这是代码**

```
private void btnFind_Click(object sender, EventArgs e)
    {

        using (var command = myCon.CreateCommand())
        {
            command.CommandText = "select * from StudentTable where ID = @ID";
            command.Parameters.AddWithValue("ID", int.Parse(txtSearch.Text));

            myCon.Open();
            var reader = command.ExecuteReader();

            while (reader.Read())
            {
                txtStudID.Text = reader["ID"].ToString();
                txtFirstName.Text = reader["FirstName"].ToString();
                txtLastName.Text = reader["LastName"].ToString();
                txtStudDOB.Text = reader["StudentDOB"].ToString();
                txtCourse.Text = reader["Course"].ToString();

            }
        }       myCon.Close();
                myCon.Close();

      } 
```

我实际上可能不会使用 OR 子句——这样就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:24:40.680

Solution found as updated in bold heading solution found. I am receiving a msg saying I can close this thread tomorrow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:06:21.603

你没有在你的`Select`

```
command.Parameters.AddWithValue("@ID", SqlDbType.Int);
command.Parameters["@ID"].Value = int.Parse(txtStudID.Text); 
```

此外，您有很多参数，`Delete`但只使用其中一个。那是一个转录错误还是 do `@FirstName`, `@LastName`,`@StudDOB`并且`@Course`实际上没有使用？`@ID`只是碰巧被正确使用，因为它是第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:06:58.130

您的 SQL 查询包含一个参数标记（？），但您从未为其指定值。您的 delete 方法可以正确执行（调用集合），但即使`AddWithValue`在`Parameters`那里，您也为查询添加了太多参数。

您需要更加熟悉 OLEDB 参数化查询。您应该从[这里](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)开始并查看示例。

# c - c中的字符串处理

> ID：15371008
> 
> 赞同：8
> 
> 时间：2013-03-12T20:02:48.890
> 
> 标签：c, string, dialog

我的程序的目标是通过一个字符串查看并能够取出对话问题和答案。

例如： `("do you like me?" ("yes" ("we're friends")) ("no" ("i hate you")) )`

该程序会取出“你喜欢我吗？” 并会让您选择输入是或否。一旦你选择了相应的选项，它就会抛出“我们是朋友”或“我恨你”。

有没有关于如何做到这一点的库或任何解决方案？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-12T20:06:03.163

如果我错了，请纠正我，但 Lisp 解析器可以很好地完成这项工作。:P 说真的，这看起来像是带括号的字符串列表或其他带括号的表达式。一个简单的递归解析器就足够了，只需发明一个数据结构来创建为适合您需要的解析树。

**编辑：**该死，我终于成功了……嗯，我必须承认，在晚上 10 点到 12 点之间正确地启动一个非常简单的解析器也不是一件容易的事。

```
/*
 * lrparser.c
 * LR-parser
 * A recursive Lisp-subset parser
 * that has a misleading name (it's not an LALR, but a recursive descent one).
 *
 * Originally written to answer
 * http://stackoverflow.com/questions/15371008/string-processing-in-c/
 *
 * Made in some *really* bored hours by Árpád Goreity (H2CO3)
 * on 12-03-2013
 *
 * Language: C99 (not sure if POSIX)
 */

#include <stdlib.h>
#include <ctype.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <assert.h>
#include <stdarg.h>
#include <stdbool.h>

// AST node type
enum {
    NODE_STRING,
    NODE_LIST
};

// Permitted tokens
enum {
    TOKEN_INVALID   = -1,
    TOKEN_LPAREN    =  0,
    TOKEN_RPAREN,
    TOKEN_STRING,
    TOKEN_END
};

// Useful for debugging and error reporting
static const char *toknames[] = {
    "Left paren",
    "Right paren",
    "String",
    "End"
};

// ...Or simply an AST node...
struct ParseTree {
    int type; // string or list
    char *string; // if any
    struct ParseTree **children;
    size_t n_children;
};

// Construct a node structure from a type and any necessary data
static struct ParseTree *node_new(int type, ...)
{
    va_list args;
    va_start(args, type);
    struct ParseTree *node = malloc(sizeof(*node));
    assert(node != NULL);

    node->type = type;
    if (type == NODE_STRING) {
        /* If the node is a string, fill it
         * (ownership transfer: the argument will be
         * free()'d by the node_free() function)
         */
        node->string = va_arg(args, char *);
    }

    node->children = NULL;
    node->n_children = 0;

    va_end(args);

    return node;
}

void node_free(struct ParseTree *tree)
{
    switch (tree->type) {
    case NODE_STRING:
        free(tree->string);
        break;
    case NODE_LIST:
        for (int i = 0; i < tree->n_children; i++) {
            node_free(tree->children[i]);
        }
        free(tree->children);
        break;
    default:
        fprintf(stderr, "Warning: unknown node type %d\n", tree->type);
        break;
    }

    free(tree);
}

// Sorry, the usual logarithmic storage expansion is omitted for clarity
void node_add(struct ParseTree *parent, struct ParseTree *child)
{
    assert(parent != NULL);
    assert(child != NULL);

    parent->n_children++;
    parent->children = realloc(parent->children, sizeof(parent->children[0]) * parent->n_children);
    // Lazy error checking: assert() instead of compare to NULL
    assert(parent->children != NULL);
    parent->children[parent->n_children - 1] = child;
}

// Just in order to break thread safety
static const char *s = NULL; // the string to be parsed
static char *curstr = NULL; // the contents of the string value of the current token
static int curtok; // the current token

// The tokenizer
static int lex()
{
    // Whitespace doesn't matter
    while (isspace(s[0])) {
        s++;
    }

    // end of string
    if (s[0] == 0) {
        return TOKEN_END;
    }

    // The followin four are obvious
    if (s[0] == '(') {
        s++;
        return curtok = TOKEN_LPAREN;
    }

    if (s[0] == ')') {
        s++;
        return curtok = TOKEN_RPAREN;
    }

    if (s[0] == '"') {
        const char *begin = s;
        while (*++s != '"')
            ;

        size_t sz = s - begin - 2 + 1;
        curstr = malloc(sz + 1);
        memcpy(curstr, begin + 1, sz);
        curstr[sz] = 0;

        // skip trailing quotation mark (")
        s++;
        return curtok = TOKEN_STRING;
    }

    return curtok = TOKEN_INVALID;
}

void expect(int tok)
{
    if (curtok != tok) {
        fprintf(stderr, "Error: expected token %s, got %s\n", toknames[tok], toknames[curtok]);
        abort();
    }

    lex();
}

// a. k. a. "parse()"
// Simple recursive (one-level...) descent (root == list) approach
static struct ParseTree *recurse_and_descend()
{
    expect(TOKEN_LPAREN);       

    struct ParseTree *node = node_new(NODE_LIST);

    struct ParseTree *child;
    while (curtok != TOKEN_RPAREN) {
        if (curtok == TOKEN_LPAREN) {
            child = recurse_and_descend();
        } else if (curtok == TOKEN_STRING) {
            child = node_new(NODE_STRING, curstr);
            lex();
        } else {
            fprintf(stderr, "Unexpected token '%s'\n", toknames[curtok]);
            // lazy programmer's safety system, let the kernel do the dirty work
            abort();
        }
        node_add(node, child);
    }

    expect(TOKEN_RPAREN);

    return node;
}

static struct ParseTree *parse(const char *str)
{
    s = str; // poor man's initialization
    lex(); // The first breath of fresh token makes the baby's heart beat
    return recurse_and_descend(); // Let's do the Harlem shake!
}

// petite helper function
static void dump_indent(int indent)
{
    for (int i = 0; i < indent; i++) {
        printf("\t");
    }
}

// Because 0x7f502a00 is not very meaningful for the human eye
static void dump_tree(struct ParseTree *tree, int indent)
{
    dump_indent(indent);

    switch (tree->type) {
    case NODE_STRING:
        printf("<String \"%s\">\n", tree->string);
        break;
    case NODE_LIST:
        printf("<List>\n");
        for (int i = 0; i < tree->n_children; i++) {
            dump_tree(tree->children[i], indent + 1);
        }
        break;
    default:
        printf("Unknown node\n");
        break;
    }
}

int main(int argc, char *argv[])
{
    struct ParseTree *tree = parse(argv[1]);
    dump_tree(tree, 0);
    node_free(tree);

    return 0;
} 
```

用法：

```
h2co3-macbook:~ h2co3$ ./lrparser "(\"do you like me?\" (\"yes\" (\"we're friends\")) (\"no\" (\"i hate you\" \"me too\")) )"
<List>
    <String "do you like me?">
    <List>
        <String "yes">
        <List>
            <String "we're friends">
    <List>
        <String "no">
        <List>
            <String "i hate you">
            <String "me too"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T20:27:22.513

如果您想要“有效的东西”但不强大，那么很多技巧都可以奏效。如果你真的想让它工作，你需要研究一下[LALR(1) 解析器](http://en.wikipedia.org/wiki/LALR_parser)，然后决定这是否足够简单来滚动你自己的解析器（它是），或者你是否想使用像 YACC 这样的东西。

上下文无关语法似乎看起来像

```
QUESTION => '(' '"' TEXT '"' RESPONSES ')'
RESPONSES => null | RESPONSE RESPONSES
RESPONSE => '(' '"' TEXT '(' '"' TEXT '"' ')' ')'
TEXT => all characters except '(' '"' ')' 
```

然后你分析一下上述语言的哪些组合会导致处理的变化。基本上 RESPONSES 可以还原为什么都没有或以 '(' 开头的东西，这意味着在处理的那个时刻，您可以通过查看[前瞻](http://en.wikipedia.org/wiki/Parsing#Lookahead)（不是但解析的字符）是'（'或'）'。

模式内的解析非常简单。如果字符是固定的，只需检查它是否与预期匹配，并推进已解析元素的索引。如果字符不固定（如在文本中），则使用例程检查它是否有界，并且任何超出预期的内容都会使解析器处于错误状态。

# wix - 尝试在引用的解决方案中更改 WixLib 预处理器变量

> ID：15371016
> 
> 赞同：3
> 
> 时间：2013-03-12T20:03:10.377
> 
> 标签：wix, wix3.6, wixlib

我创建了一个 WixLib 项目和解决方案，其中包含一个片段，该片段指向我想包含在多个项目中的一组 DLLS。

但是，当我从其他解决方案中引用此 wixlib 时，dll 所在目录的预处理器值随 wixlib 一起提供。我想覆盖这个值或更新它。

我的 Wixlib 看起来像这样：

```
<Fragment>
   <ComponentGroup Id="CG.FarPointComponents">
      <Component Id="cmpBBC3777DD58F5E2AE4704D66EF87C105" Directory="INSTALLDIR"
                 Guid="6CB60019-D122-41F6-8009-C41B07BCE5C3">
         <File Id="filC126C8C2BFE502E045C17A812B8A907D" KeyPath="yes"
               Source="$(var.FarPointDir)\FarPoint.CalcEngine.dll" />
      </Component>
   </ComponentGroup>
</Fragment> 
```

我想在另一个解决方案中为 var.FarPointDir 指定另一个目录我该怎么办？我正在使用 wix 3.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:32:08.893

几个选项：

1.  创建`binary .wixlib`- 使用`-bf`开关`lit.exe`将文件嵌入到 .wixlib。这样 .wixlib 是完全独立的，尽管它会更大。

2.  使用`bind paths`- 绑定路径类似于搜索路径，但用于查找需要在包中结束的文件。如果您创建`File/@Source`相对路径（不以 开头`X:\`或仅以开头`\`），则将搜索未命名的绑定路径。`light.exe`您可以使用`-bp`命令行开关指定绑定路径。或者，您可以使用命名绑定路径，它们如下所示：

    ```
    <File Source='!(bindpath.Name)\FarPoint.CalcEngine.dll' /> 
    ```

    同样，`-bp`交换机可以创建命名绑定路径。

3.  使用`bind variable`- 而不是使用预处理器变量（在“编译”之前解析），使用在“绑定时间”解析的变量。您可以引用绑定变量，例如：`!(wix.Var)`。这可以在命令行上`light.exe`设置为，也可以使用`WixVariable`元素在代码中设置。

我使用选项 #1 将 .wixlibs 分发给其他人（自包含），如果只是我的东西，则使用选项 #2（二进制 .wixlibs 会稍微减慢构建速度）。

# java - SpringMVC/mockMVC/jsonpath比较字符串列表

> ID：15371022
> 
> 赞同：33
> 
> 时间：2013-03-12T20:03:32.110
> 
> 标签：java, spring-mvc, jsonpath

我目前正在为 Spring MVC 项目编写一些单元测试。由于返回的媒体类型是 JSON，我尝试使用 jsonPath 来检查是否返回了正确的值。

我遇到的麻烦是验证字符串列表是否包含正确的（并且只有正确的）值。

我的计划是：

1.  检查列表的长度是否正确
2.  对于每个应该返回的元素，检查它是否在列表中

可悲的是，这些东西似乎都不起作用。

这是我的代码的相关部分：

```
Collection<AuthorityRole> correctRoles = magicDataSource.getRoles();

ResultActions actions = this.mockMvc.perform(get("/accounts/current/roles").accept(MediaType.APPLICATION_JSON))
.andExpect(status().isOk()) // works
.andExpect(jsonPath("$.data.roles").isArray()) // works
.andExpect(jsonPath("$.data.roles.length").value(correctRoles.size())); // doesn't work

for (AuthorityRole role : correctRoles) // doesn't work
  actions.andExpect(jsonPath("$.data.roles[?(@=='%s')]", role.toString()).exists()); 
```

只有前两个“期望”（isOk 和 isArray）有效。其他的（长度和内容）我可以随心所欲地旋转，它们没有给我任何有用的结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-13T09:57:54.793

1）代替

```
.andExpect(jsonPath("$.data.roles.length").value(correctRoles.size())); 
```

尝试

```
.andExpect(jsonPath("$.data.roles.length()").value(correctRoles.size())); 
```

或者

```
.andExpect((jsonPath("$.data.roles", Matchers.hasSize(size)))); 
```

2）代替

```
for (AuthorityRole role : correctRoles) // doesn't work
  actions.andExpect(jsonPath("$.data.roles[?(@=='%s')]", role.toString()).exists()); 
```

尝试

```
actions.andExpect((jsonPath("$.data.roles", Matchers.containsInAnyOrder("role1", "role2", "role3")))); 
```

请记住，您必须添加 hamcrest-library。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-20T21:10:23.463

这是我最终使用的：

`.andExpect(jsonPath('$.data.roles').value(Matchers.hasSize(size)))`

和

`.andExpect(jsonPath('$.data.roles').value(Matchers.containsInAnyOrder("role1", "role2", "role3")))`

# javascript - 从父级禁用子窗口中的 javascript

> ID：15371024
> 
> 赞同：1
> 
> 时间：2013-03-12T20:03:38.690
> 
> 标签：javascript, jquery, html

有点奇怪的请求，但我希望能够有一个父窗口：

*   在同一个域上创建一个新的子窗口（使用`window.open`）
*   **防止在子窗口中运行任何 javascript**

目前，我可以通过在页面顶部包含以下内容在子窗口中*执行此操作：*

```
<script>
  Function.prototype.call = function() {};
  Function.prototype.apply = function() {};
</script> 
```

这几乎可以阻止子页面中的任何 javascript 运行。但是我有什么办法可以**从父窗口**做到这一点？我可以在任何脚本有机会运行之前以某种方式将此代码注入子页面吗？

或者有没有其他方法可以做到这一点？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:07:09.120

您可以使用一些服务器端来删除所有`<script>`标签和内联事件处理程序，例如`onclick`.

**编辑**

使用客户端，您可以尝试使用 ajax 抓取整个页面，删除那里的脚本并将内容写入新创建的窗口。我认为您将无法使用

```
$.get('page.html', function(html) {
    var html = $(html).find('script').remove().html();
}); 
```

因为脚本在添加到 DOM 时可能会被执行，所以你可能需要使用解析器或只使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:35:02.477

`window.open()`返回对新创建的窗口的引用。如果窗口位于同一来源，您可以自由访问它。

```
var popup = window.open('/some/page.html');
popup.contentWindow // = the popup's `window` object 
```

**但是，**您想出的代码[不起作用](http://jsfiddle.net/josh3736/6y7aq/)。您可能已经看到它破坏了 jQuery，它可以自由使用`call`and `apply`，但它不会阻止正常的函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:10:09.883

如果子窗口位于`iframe`? 有一个这样的问题，答案是——你不能用 php 服务器端轻松地做到这一点。

[如何禁用 iframe 中的脚本？](https://stackoverflow.com/questions/3839891/how-do-i-disable-scripts-in-my-iframe)

# javascript - jquery屏蔽输入只有第一个数字可选其余强制

> ID：15371025
> 
> 赞同：7
> 
> 时间：2013-03-12T20:03:43.257
> 
> 标签：javascript, jquery, maskedinput, jquery-mask

我使用 jquery 屏蔽输入插件，并且需要具有以下格式的电话字段：

```
1 (222) - 000 - 1114 
```

我的代码如下所示：

```
$("#myPhone").mask("9 (999) - 999 - 9999"); 
```

现在我似乎无法让它工作以使第一个数字是可选的，但其余的都是强制性的。所以以下数字是**有效**的：

```
1 (222) - 000 - 1114
  (222) - 000 - 1114 
```

以下数字**无效**

```
1 (222) - 000 - 11
  (222) - 00  - 0011 
```

使用**"?9 (999) - 999- 9999"**将不起作用，因为它使整个事情变得可选

如果这不能以蒙面方式完成，有人可以用正则表达式帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T20:18:53.060

尝试这个：

```
$.mask.definitions['~'] = '([0-9] )?';
$("#myPhone").mask("~(999) - 999 - 9999"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T19:27:42.983

它并不完美，但您可以使用数字或空格：

```
$.mask.definitions['~'] = '[0-9 ]';
$("#myPhone").mask("~(999) - 999 - 9999"); 
```

# c# - 在 Windows 7 中使用 Windows 服务截屏

> ID：15371035
> 
> 赞同：2
> 
> 时间：2013-03-12T20:04:35.507
> 
> 标签：c#, windows-services, screenshot, session-0-isolation

我知道这是一个关于 Win 7 中带有 c# 上的 winService 的屏幕截图的老问题。我已经阅读了关于 Stack Overflow 的所有文章以及 CodeProject 上的很多文章......我知道服务的 0 会话，从 Win Vista 开始以及关于允许服务与桌面检查交互......但我被卡住了（我可以'不要从服务中截取屏幕截图，因为我不知道显示图像（屏幕）保存在哪里。

```
 using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Data;
   using System.Diagnostics;
   using System.Linq;
   using System.ServiceProcess;
   using System.Text;
   using System.Timers;

   namespace MyThirdTry
   {
public partial class Third : ServiceBase
{
    private static MyTimer aTimer;
    public Third()
    {
        InitializeComponent();
        if (!System.Diagnostics.EventLog.SourceExists("MySource"))
        {
            System.Diagnostics.EventLog.CreateEventSource(
                "MySource", "MyNewLog");
        }
        eventLog1.Source = "MySource";
        eventLog1.Log = "MyNewLog";
        aTimer = new MyTimer();
        aTimer.Elapsed += new System.Timers.ElapsedEventHandler(aTimer_Elapsed);
        aTimer.Interval = 10000;
    }

    protected override void OnStart(string[] args)
    {
        eventLog1.WriteEntry("Started\t" + DateTime.Now.ToString("G"));
        aTimer.Enabled = true;
    }

    protected override void OnStop()
    {
        aTimer.Enabled = false;
        eventLog1.WriteEntry("Stopped\t" + DateTime.Now.ToString("G"));
    }
    protected override void OnPause()
    {
        aTimer.Enabled = false;
        eventLog1.WriteEntry("Paused\t" + DateTime.Now.ToString("G"));
        base.OnPause();
    }
    protected override void OnContinue()
    {
        base.OnContinue();
        aTimer.Enabled = true;
        eventLog1.WriteEntry("Continued\t" + DateTime.Now.ToString("G"));
    }
    protected override void OnShutdown()
    {
        aTimer.Enabled = false;
        eventLog1.WriteEntry("Shutted down\t" + DateTime.Now.ToString("G"));
        base.OnShutdown();
    }
    private void aTimer_Elapsed(object sender, ElapsedEventArgs e)
    {
        eventLog1.WriteEntry("Evented\t" + aTimer.TimeTaker() + "\t" + Environment.CurrentDirectory);
        aTimer.TakeScreenShot();
    }
}
} 
```

这是 MyTimer 类：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Timers;
    using System.Drawing;
    using System.Drawing.Imaging;
    using System.Security.Principal;
    using System.IO;

    namespace MyThirdTry
    {
class MyTimer:Timer
{
    Bitmap mainBit;
    System.Windows.Forms.Screen main;

    public string TimeTaker()
    {
        return DateTime.Now.ToString("G");
    }

    public void TakeScreenShot()
    {
        string PathToSave = @"c:\results";
        System.IO.Directory.CreateDirectory(PathToSave);

        main = System.Windows.Forms.Screen.PrimaryScreen;
        mainBit = new Bitmap(main.Bounds.Width, main.Bounds.Height, PixelFormat.Format32bppArgb);
        Graphics gScreenShot = Graphics.FromImage(mainBit);

        gScreenShot.CopyFromScreen(main.Bounds.X,
                                   main.Bounds.Y,
                                   0, 0,
                                   main.Bounds.Size,
                                   CopyPixelOperation.SourceCopy);

        string fileName = "result" + Directory.GetFiles(PathToSave).Count().ToString().Trim() + ".png";
        mainBit.Save(System.IO.Path.Combine(PathToSave, fileName), System.Drawing.Imaging.ImageFormat.Png);
    }
}
} 
```

并且此代码返回盲（空）屏幕截图...一切正常，但服务无法获取屏幕截图，因为它处于 0 会话中...如何从当前登录用户的会话中获取 gui？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:33:23.733

由于您需要访问会话 0 以外的桌面，因此请考虑使用任务计划程序中的任务而不是 Windows 服务来捕获屏幕截图。TS 使在用户会话中启动进程变得更加容易。应将任务配置为在任何用户登录时启动。您需要将任务运行的用户帐户设置为组，例如`Users`，并仅在用户登录时运行任务。这两个安全选项对于创建可以访问用户桌面会话的进程至关重要。过去，我已经能够使用 User32 / Gdi32 API 调用来截取屏幕截图。

如果您仍想使用 Windows 服务以某种方式聚合屏幕截图，请使用 WCF 将屏幕截图从任务进程发送到 Windows 服务。

# vb.net - COMException 未处理 Visual Basic 2010 错误

> ID：15371036
> 
> 赞同：0
> 
> 时间：2013-03-12T20:04:50.920
> 
> 标签：vb.net, visual-studio

运行代码时收到以下错误消息；

```
Private Sub submit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles     submit.Click
        'Determine Text Inpu'
        Dim IEApp As SHDocVw.InternetExplorer
        Dim IEDoc As Object
        Dim PREURL As String
        Dim LocalFileName As String
       Dim errcode As Long
       IEApp = CreateObject("InternetExplorer.Application")
            With IEApp
                .Visible = False
                .Navigate("http://mfreport.paho.org/barr/Default.asp")
                Do While .Busy : Application.DoEvents() : Loop
            Do **While .ReadyState <> 4** : Application.DoEvents() : Loop
                With .Document.Forms("RptForm")
                    .JobName.Value = job.Text
                    .UsrName.Value = user.Text
                    .JobDate.Value = dtp.Text
                    .Submit()
                    .Action.click()
                End With
               Do While Not CBool(InStr(1, .Document.url, "mfreport.paho.org/barr/Default.asp"))
                   Application.DoEvents()
               Loop
               Do While .Busy : Application.DoEvents() : Loop
            Do While .ReadyState <> 3 : Application.DoEvents() : Loop
           End With
           IEDoc = IEApp.Document
           For i = 0 To IEDoc.Links.Length - 1
                  Dim sFullImageURL As String = "http://mfreport.paho.org/barr/JobReceived/" & IEDoc.Links(i).nameProp
            Dim sLocalFileName As String = "I:\SYS_Systems\Support\Test\" & IEDoc.Links(i).nameProp
            Dim MyWebClient As New WebClient
            Call MyWebClient.DownloadFile(sFullImageURL, sLocalFileName)
        Next i
    If errcode = 0 Then
        MsgBox("Download has Completed")
    Else
        MsgBox("An error has occurred")
    End If
    IEApp = Nothing
End Sub 
```

在调试中运行此程序时，我收到以下错误消息 COMException is unhandled the RPC server is available。HRESULT 异常：0X800706BA

# perl - Perl 值不固定

> ID：15371037
> 
> 赞同：0
> 
> 时间：2013-03-12T20:04:54.163
> 
> 标签：perl

我知道我在这里遗漏了一些简单的东西，但我无法弄清楚而且谷歌无法正常工作

我正在尝试使用该值，`$F`但它不起作用。我将省略一些代码。我收到一个错误，基本上说`$f`需要特定的包名称

```
sub captureFile()
{
    my $F = $File::Find::name;
    if ($F = ~/txt$/)
    {
      $F=~ s:(.*)(\/reports\/.*):$2:;
      loadEnvironmentProperties($F);
    }
 }

 sub loadEnvironmentProperties()
 {
    print $F;
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T20:09:26.733

总是`use strict; use warnings;`！

您尝试将 $F 指定为参数

```
loadEnvironmentProperties($F);
                          ^^ 
```

你声明的函数没有参数

```
sub loadEnvironmentProperties()
                             ^^ 
```

而且您从未真正阅读过`loadEnvironmentProperties`. 你要：

```
sub loadEnvironmentProperties {
   my ($F) = @_;
   print $F;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:08:01.070

$F 不存在第二个子例程，因为您没有将其从参数数组中取出

```
sub loadEnvironmentProperties()
 {
    my $F = shift;
    print $F;
 } 
```

# c# - Parameter.addwithvalue - ExecuteReader：CommandText 属性尚未初始化

> ID：15371041
> 
> 赞同：4
> 
> 时间：2013-03-12T20:05:00.207
> 
> 标签：c#, asp.net, sqlcommand

我收到错误*ExecuteReader: CommandText property has not been initialized*在该`adapter.fill(ds)`行。奇怪的是，如果我`@user`用一个实际的字符串（例如'name'）替换它，它工作得非常好，所以在设置参数的部分似乎有些东西被破坏了。

我尝试设置带有和不带有`'`'s 的字符串（即@user/'@user'）。我也尝试过同时使用`=`和`like`。`User.Identity.Name.ToString()`已经过测试，可以通过为其设置一个文本框来正确返回登录用户。

对不起，非英语数据库变量，如果这个问题已经在某处得到回答。不过，经过六个小时的搜索，我几乎放弃了（也许我只是很烂）。

相关代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;

public partial class Bruker : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

    String conn = ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString;
    SqlConnection sql = new SqlConnection(conn);
    sql.Open();

    SqlCommand command = new SqlCommand(conn);
    command.CommandText = "SELECT klubb.KlubbNavn FROM Klubber klubb inner join User_Klubber_Connection conn on Klubb.Klubb_Id = conn.Klubb_Id inner join aspnet_Users bruker on bruker.UserId = conn.UserId WHERE bruker.UserName = @user";
    command.Parameters.AddWithValue("@user", User.Identity.Name.ToString());
    command.Connection = sql;
    SetDropDownList(command);
    DropDownList1.SelectedIndex = 0;
    ChangeGridView(GetMembersOfClub(), sql);

    sql.Close();

}

protected void SetDropDownList(SqlCommand command)
{

    SqlDataAdapter adapter = new SqlDataAdapter(command);
    SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

    DataSet ds = new DataSet();
    adapter.Fill(ds);

    DropDownList1.DataSource = ds;
    DropDownList1.DataTextField = "KlubbNavn";

    DropDownList1.DataBind();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:09:00.033

可能你要`null`进去了`command.Parameters.AddWithValue("@user", User.Identity.Name.ToString());`

尝试：

```
command.Parameters.AddWithValue("@user", User.Identity.Name ?? String.Empty); 
```

编辑：（评论后）

您是否尝试过手动创建参数？

而不是使用`AddWithValue(...)`try ：

```
SqlParameter param  = new SqlParameter();
param.ParameterName = "@user";
param.Value         = User.Identity.Name.ToString();
param.DbType        =  SqlDbType.VarChar;
command.Parameters.Add(param); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:38:33.130

**编辑**忘记一切，只需在 page_load 上执行以下操作

```
 Response.Write(String.Format("user name is {0}",  User.Identity.Name)); 
```

并查看输出

它运行良好

```
 protected void Page_Load(object sender, EventArgs e)
    {

        SqlConnection sql = new SqlConnection( ConfigurationManager.ConnectionStrings["yourConnectionName"].ConnectionString);
        sql.Open();

        SqlCommand command = new SqlCommand("Select * from userinfo where uloginid=@user", sql);
        command.Parameters.AddWithValue("@user", User.Identity.Name.ToString());
        SetDropDownList(command);
        DropDownList1.SelectedIndex = 0;

        sql.Close();

    }

    protected void SetDropDownList(SqlCommand command)
    {

        SqlDataAdapter adapter = new SqlDataAdapter(command);
        SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

        DataSet ds = new DataSet();
        adapter.Fill(ds);

        DropDownList1.DataSource = ds;
        DropDownList1.DataTextField = "uFirstName";

        DropDownList1.DataBind();

    } 
```

# php - Joomla 2.5.9、PHP 5.3.22、JFactory、获取用户

> ID：15371049
> 
> 赞同：0
> 
> 时间：2013-03-12T20:05:08.500
> 
> 标签：php, flash, joomla, uploader

我正在使用 Joomla Easy Flash Uploader，上传完成后，会有一封自动电子邮件发送给管理员（或我选择的人）。它旨在在电子邮件中显示登录用户的姓名，但它只是继续显示“Guest”，即使该表单仅由登录用户访问。我迫切需要这个来正确提取用户名。消息的内容如下：（文件名和位置已被删除以保护我的网站。

一位客人 (Guest) 已于 2013 年 3 月 12 日星期二 14:56:07 -0500 成功将 FILE NAME 上传到 LOCATION。

*   查看代码：

//邮件通知 if ($_POST['notify'] != false && JMailHelper::isEmailAddress($_POST['recipient'])) { //获取邮件对象 $mailer =& JFactory::getMailer();

```
 //set up the sender
    $config =& JFactory::getConfig();
    $sender = array( 
        $config->getValue( 'config.mailfrom' ),
        $config->getValue( 'config.fromname' )
    );
    $mailer->setSender($sender);

    //set up recipient
    $mailer->addRecipient($_POST['recipient']);

    //get user info
    $user_info = array();
    $user =& JFactory::getUser();
    if ($user->guest == true)
    {
        $user_info['name'] = 'A guest';
        $user_info['username'] = 'Guest';
    }
            else
    {
        $user_info['name'] = $user->name;
        $user_info['username'] = $user->username;
    }

    //set up message
    $body = $user_info['name']." (".$user_info['username'].") has successfully uploaded ".$fileName;
    $body.= "(".sizeToText($fileSize).") to ".JPATH_SITE.DS.$cleanedSubPath;
    $body.= " at ".date("r", time()).".\n";
    $mailer->setSubject('New File Uploaded - PC Scribe');
    $mailer->setBody($body);

    //send email
    $send =& $mailer->Send();
    if ($send !== true)
    {
        //error: DO NOTHING!!!
        /****DEBUGGING****/
        //$replaceText.= ' * Email error *';
        /****  CODE   ****/
    }
    else
    {
        //success: DO NOTHING!!!
        /****DEBUGGING****/
        //$replaceText.= ' (Email sent)';
        /****  CODE   ****/
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:01:24.480

我真的不认为代码有什么问题（嗯，除了使用 $_POST 的安全问题）。

至少代码本身可以做到这一点。

```
$user_info = array();
$user = JFactory::getUser();
if ($user->guest == true)
{
    $user_info['name'] = 'A guest';
    $user_info['username'] = 'Guest';
}
        else
{
    $user_info['name'] = $user->name;
    $user_info['username'] = $user->username;
}

var_dump($user_info); 
```

唯一的解释可能是该扩展在 Joomla 之外以某种方式工作！并且用户会话以某种方式丢失了。

自己做一些测试，用 $user 的 var_dump($user) 检查内容。

# android - 使用 TextView 创建指向 Activity 的链接

> ID：15371056
> 
> 赞同：3
> 
> 时间：2013-03-12T20:05:37.817
> 
> 标签：android, textview, android-activity

我有一个`Activity`被调用的`MainActivity.java`，带有一个`activity_main.xml`文件。但我不知道如何创建一个链接来启动另一个名为`DirectionActivity`. 下面是我的代码示例。

字符串.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
     <string name="app_name">EEMA</string>
     <string name="action_settings">Settings</string>
     <string name="hello_world">The Emergency Evacuation Mobile App!</string>
     <string name="directions">\n\nTo view directions click here!</string>
     <string name="title_activity_direction">DirectionActivity</string>
     <string name="title_activity_main">MainActivity</string>
</resources> 
```

activity_main.xml 文本视图

```
<TextView  android:id="@+id/txtView"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
    android:textSize="12sp"
    android:textColorLink="#FFFF00"
    android:textStyle="bold"
/> 
```

MainActivity.java

```
public class MainMenuActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);

        String str = "Please click here to view Directions";
        TextView txtView = (TextView) findViewById(R.id.txtView);
        txtView.setText(str);
        Linkify.addLinks(txtView, Linkify.ALL);     
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main_menu, menu);
        return true;
    }
} 
```

方向活动.java

```
public class DirectionActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainMenuActivity.EXTRA_MESSAGE);

        // Create the text view    
        TextView textView = new TextView(this);    
        textView.setTextSize(40);    
        textView.setText(message);

        // Set the text view as the activity layout    
        setContentView(textView);       
        setContentView(R.layout.activity_direction);

        // Make sure we're running on Honeycomb or higher to use ActionBar APIs        
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {            
            // Show the Up button in the action bar.            
            getActionBar().setDisplayHomeAsUpEnabled(true);        
        }       
    }
} 
```

那么我需要做什么才能获得请单击此处查看方向以显示为将打开 DirectionActivity 的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:16:33.717

你想做两件事。首先，您希望在单击 a 时发生一些事情`TextView`。其次，你想推出一个新的`Activity`.

要完成第一件事，在您的活动类的`onCreate`方法中，您需要以下内容：

```
final TextView txtView = this.findViewById(R.id.txtView);
txtView.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        ...
    }
}); 
```

然后完成第二件事，如果`Activity`你想启动被调用`DirectionActivity`：

```
final TextView txtView = this.findViewById(R.id.txtView);
txtView.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        MainMenuActivity.this.startActivity(new Intent(MainMenuActivity.this, DirectionActivity.class));
    }
}); 
```

# android - Android TalkBack 在 Webview 中错误地读取电话号码

> ID：15371057
> 
> 赞同：1
> 
> 时间：2013-03-12T20:05:42.577
> 
> 标签：android, webview, accessibility, talkback

在 WebView 中阅读电话号码时，我对 TalkBack 屏幕阅读器服务有点头疼，我似乎找不到解决方案。这是我正在读入 WebView 的一些 html 代码片段：

```
<li>Call <a href="tel:18007848669">1-800-QUIT-NOW(1-800-784-8669)</a> for phone support</li> 
```

屏幕阅读器将此读取为“呼叫一到八百现在退出一到八百链接”。有没有办法强制它/信号以不同的方式阅读它？我需要以更自然的格式阅读它，即“八百”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-24T22:04:55.290

为您的 editText 或 textView 使用以下 Accessibility Deligate

```
@Override
public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {
    super.onInitializeAccessibilityNodeInfo(host, info);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {

        switch (host.getId()) {
            case R.id.tv_bookingID:
                if (((TextView) host).getText().length() > 1) {
                    sb.delete(0, sb.length());
                    for (char c : ((TextView) host).getText().toString().toCharArray()) {
                        sb.append(c).append(" ");
                    }
                    //change text for talkback
                    info.setText(null);
                    info.setContentDescription(sb.toString().trim());

                }
                break;
        }//switch
    }//if
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T15:08:09.170

对于这个元素，android:contentDescription="一八百现在退出"

# codeigniter - 使用 $_FILES 上传多个文件，只读第一个文件 - CodeIgniter 上传类

> ID：15371060
> 
> 赞同：0
> 
> 时间：2013-03-12T20:05:55.557
> 
> 标签：codeigniter, file-upload

我的表单中有 3 个输入文件字段，每次提交表单时它只提交第一个文件，而其他文件不存在于 images 文件夹中。

这就是我在控制器中的操作方式：

```
public function book()
{
    $id = $this->manage_model->book();
    $images = array("1","2","3");
    $this->load->library('upload');

    foreach($images as $i){

        if(!empty($_FILES['files'.$i]['name']))
        {
            $config['file_name'] = $id . '_' . $i;
            $config['upload_path'] = './photos/';
            $config['allowed_types'] = 'jpg|png';

            $this->upload->initialize($config);
            $name = "files" . $i;
            if ( ! $this->upload->do_upload($name))
            {
                                    //set flashdata
                redirect('manage/add_page');
            }
            else
            {
                redirect('manage/add_page');
            }
        }

    }

} 
```

这些是文件输入字段的名称：

```
 <input type="file" name="files1" />
            <input type="file" name="files2" />
            <input type="file" name="files3" /> 
```

我在我的表单中使用了 multipart 和 post 方法，所以这也不是问题。有人看到有什么不对吗？请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:28:06.830

重定向不允许 foreach 循环多次通过，因为它在第一次循环后被重定向回 add_page。

foreach 循环应如下所示：

```
foreach($images as $i){

        if(!empty($_FILES['files'.$i]['name']))
        {
            $config['file_name'] = $id . '_' . $i;
            $config['upload_path'] = './photos/';
            $config['allowed_types'] = 'jpg|png';

            $this->upload->initialize($config);

            $name = "files" . $i;
            if ( ! $this->upload->do_upload($name))
            {
                redirect('manage/add_page');
            }

        }

    }

    redirect('manage/add_page'); 
```

我想当我在这里发布问题时我会想得更多，哈哈......

# cuda - 如何检查主板是否支持多GPU？

> ID：15371062
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:03.083
> 
> 标签：cuda, hardware, gpu, nvidia, multi-gpu

我将从事一个综合使用多个 GPU 的研究项目。我正在考虑先设置一个具有多个 GPU 的桌面。

我目前有一块[MSI P55 CD53 主板](http://www.msi.com/product/mb/P55-CD53.html#/?div=Detail)，带有 Intel I5-570 CPU 和 Nvidia GTS 250 GPU。我想再购买至少 2 个 Nvidia 显卡来添加到我现有的桌面上。

有什么资源我可以查找，这样我就可以知道它是否可行，我应该买什么显卡？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:12:15.280

您链接的规范表明：

> • 1 个 PCI Express gen2 x16 插槽

这意味着它一次只能容纳一个 PCI Express GPU。因此，在该主板上运行多个 GPU 是不可行的。

像这样的问题可能更适合超级用户等其他论坛。

# node.js - Node.js 和 Backbone.marionette 初始视图

> ID：15371066
> 
> 赞同：3
> 
> 时间：2013-03-12T20:06:07.813
> 
> 标签：node.js, backbone.js, marionette, passport.js

目前，我有一个*Node.js*应用程序，它使用我的服务器端模板语言（*在本例中是****玉***）为我的静态`/login`和HTML 页面提供服务。我想在成功验证后返回有关当前登录用户的数据，以便骨干网可以开始呈现内容。`/index`

 **例如，我在*Mongo*`UserGroup`中有一个文档，其中存储了关于它们所属的组的信息（*授权信息*）。*`User`*

 **使用*Passport*，我可以验证我的用户并将他们重定向到主页。

```
app.post('/login',
  passport.authenticate(
    'local',
    {
      successRedirect: '/',
      failureRedirect: '/login',
      failureFlash: true
    }
  )
); 
```

`/`重定向后，我如何发送关于主干将在主干路由的初始呈现中拾取的用户的数据？

`res.send()`即使不是主干发起第一个请求或使用包含有关用户的元数据的会话，这是否也会如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:19:16.100

您需要有来自客户端的开放请求。尝试查看 socket.io 以维护页面和服务器之间的连接。如果那太多，请尝试使用主干发出 AJAX 请求，并让服务器“保留”请求直到登录成功，然后在准备好时发送响应。但是，将 ajax 请求与登录请求相匹配将是一个挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:27:02.893

我认为经过身份验证的用户将有一个与他相关联的 cookie。您可以在应用初始化时解析 cookie 并构造一个全局用户对象。或者，您可以在页面上的脚本标记中以 json 格式发出用户详细信息，并使用它来构建 currentUser 对象。我不确定这是否是最好的方法；我自己正在研究它。很想听听对此的想法/反馈。****

# ruby-on-rails - Rails：在 before_create 之后调用验证

> ID：15371067
> 
> 赞同：2
> 
> 时间：2013-03-12T20:06:08.403
> 
> 标签：ruby-on-rails, validation, callback

据我所知，[验证应该在回调之前运行](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)。不过，我得到的行为表明并非如此。具体来说，我有：

```
class User::GroupInvitation < ActiveRecord::Base

  validate :user_can_be_invited

  before_create :find_or_create_membership

  private

    def user_can_be_invited
      user_membership = User::Membership.where(:group_id => self.group_id, :user_id => self.invitee_id).first
      if user_membership.present?
        case user_membership.status
        when "invited"
          errors[:base] << I18n.t("user.group_invitations.create.this_user_is_already_invited")
        end
      end
    end

    def find_or_create_membership
      user_membership = User::Membership.where(:group_id => self.group_id, :user_id => self.invitee_id).first_or_create(:status => "invited")
      user_membership.update_column(:status, "invited") unless user_membership.new_record?
      self.user_membership_id = user_membership.id
    end
end 
```

测试此代码时，我始终收到错误“该用户已被邀请”，即使该用户之前没有被邀请过。我最好的猜测是，这是因为`find_or_create_membership`首先运行，因此设置`status`为`invited`. 关于发生了什么或如何解决这种情况的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T20:09:31.903

`find_or_create_membership`首先运行

创建时的操作顺序：

```
before_validation
after_validation
before_save
around_save
before_create
after_create
after_save 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:10:24.360

问题实际上源于我的控制器：

```
invitation = User::GroupInvitation.create(params[:user_group_invitation])
if invitation.valid?
  . . . .
else
  . . . .
end 
```

这导致验证方法在 期间第二次被调用`invitation.valid?`，当然它会发送错误消息，因为 a`status`已经设置了。解决问题很容易。我只是添加了一个`:on => :create`条件：

```
validate :user_can_be_invited, :on => :create 
```

# visual-c++ - GNU g++ 内联汇编块，如 Apple g++/Visual C++？

> ID：15371071
> 
> 赞同：1
> 
> 时间：2013-03-12T20:06:18.733
> 
> 标签：visual-c++, gcc, assembly, g++, inline-assembly

我目前正在我的大学学习一门课程，在这个阶段，我们了解某些 C/C++ 结构背后的汇编代码。

工作流程通常是这样的：实验室助理简短地谈论一个主题，我们找出其中的怪癖，然后使用内联汇编解决一些完全随机的问题。

（例如：他简要介绍了`struct`（成员）是如何存储在内存中的，我们找出了模式，然后我们使用内联汇编编写了解决方案，其中我们使用了一个简单的问题`struct`。）

实验室助理（以及小组的其他成员）正在使用`Visual C++`编译器和调试器（用于反汇编）进行演示，但是由于道德原因我不能使用它，因此我选择了`g++`和`gdb`.

与 Visual C++ 相比，我对 g++ 的内联汇编感到尴尬的是：

*   如果我想编写内联汇编的“块”，我有两个选择： 有一个单一的`asm("..")`结构，其中每条指令前面都有一个`\n\t`（导致很多混乱）。或者将每条指令放在自己的`asm("..")`块中（导致大量输入）。

*   如果我想在内联程序集中引用局部变量，我必须使用扩展语法或通过使用`esp`/的偏移量来引用它`ebp`。

关于上面的两个问题，我更喜欢 Visual C++ 的内联汇编风格，在这种风格中，为了编写一个 asm 块，我所要做的就是`__asm { .. }`将每条指令写在一个新行上，为了引用一个变量，我只需要写它的名字。

在我的搜索过程中，我发现 Apple`g++`支持与带有开关 (-fasm-blocks) 的 Visual C++ 相同的语法，但 GNU 似乎并非如此`g++`。

希望我可能错过了一些我在这里问的东西，是否可以`Visual C++`在 GNU 下编译像内联汇编块一样`g++`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:26:52.943

您所指的语法不是 Microsoft 特定的。正如您所发现的，Apple 也拥有它（尽管 Apple 放弃了 GCC 并转而使用 Clang）。AFAIK，Metrowerks 支持相同的语法。GCC 不支持它（可能是因为 GCC 人认为 GCC 非常好，以至于没有人需要再编写程序集了 :-)）。但是，不需要一直键入`\n\t`，您可以将其替换为`;`. 例如：

```
void foo()
{
    asm("xor %eax,%eax;"
        "rep; nop;"
        "nop;"
        "sfence;"
        "nop;");
} 
```

希望能帮助到你。祝你好运！

# filemaker - 在小计和搜索结果中计数，相同的值不同的字段 - FileMaker 12

> ID：15371072
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:20.190
> 
> 标签：filemaker

很难想出一个好的标题。

我有一张代理和推荐人的桌子。数据显示在按代理排序的小计部分中。

当代理 = 推荐时，很容易获得计数。

但是，当按代理排序时，是否可以获得整个搜索结果中的推荐数？

例如，史密斯是 10 条记录的代理人。

Smith 也是 8 条记录的推荐人，其中 3 条 Smith 是代理人，5 条 Jones 是代理人。

在小结部分，按代理排序，当史密斯是代理和推荐人时，我可以得到 3。我怎样才能把史密斯是搜索结果中 8 条记录的推荐人放在同一部分？

我在想也许执行 SQL，但我不知道足够的 SQL 来编写有意义的语句。还是我应该这样做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:40:34.017

我不是 100% 清楚你是如何设置的，但我假设你只处理你提到的两个表 - 推荐和代理 - 并且你的报告基于推荐表，其中有两个相关字段：Referrer 和 Agent。

首先要意识到的是，如果您要报告一组已找到的推荐人，并由代理进行汇总，您不能在 Smith 的子汇总和琼斯的子汇总中显示推荐记录……它是非此即彼。

我可以想出几种方法来生成您正在寻找的报告：

1.  不是报告整个搜索结果，而是报告较小的搜索结果（按人），然后通过将每个单独的搜索结果报告彼此附加来组合您的报告。例如：创建一个脚本，以查找所有以 Smith 作为代理或推荐人的推荐人，这将为您提供 18 个搜索结果（和计数）（来自您的示例）；遍历所有代理，并根据收集的数据组装报告。

2.  创建 Referral 表的新子表，其中包含 Referral 的referrer 的每个实例的记录，以及 Referral 的代理的每个实例（**但仅在与 referrer 不同时**）......然后，改为从该表中报告。

3.  正如您所建议的，这听起来可以使用 ExecuteSQL 命令来完成。我不知道您正在寻找什么样的输出，并且您的字段名称会有所不同（我使用了“AgentName”、“agent”和“referrer”），但它会是这样的：

    ```
    Go To Layout [ "Agents" ]
    Show All
    Go To Record/Request [ First ]
    Loop
        Set Variable [ $ThisAgent ; AgentName & " referrals: " & Evaluate ( ExecuteSQL ( "SELECT 1 FROM Referrals WHERE ( agent LIKE 'SMITH' OR referrer LIKE 'SMITH')" ; "" ; "+" ) ) ]
        Set Variable [ $ReportText ; List ( $ReportText ; $ThisAgent ) ]
        Go To Record/Request [ Exit after last, Next ]
    End Loop
    set Variable [ $$MergeVariableForReportDisplay ; $ReportText ] 
    ```

# php - php和html中的简单登录系统

> ID：15371076
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:22.077
> 
> 标签：php, html, login, system

嗨，我试图制作一个简单的登录系统。（没有mysql）。我不确定我的代码有什么问题，想知道是否有人可以帮助我。

```
<?php
$user=" ";
$password=" ";
if(isset($_POST['submit'])){

if(($_POST['user'] == $user) and ($_POST['password'] == $password)){
    echo "successful login!";
    }
    else
    {
    echo "Bad Login.";
    }
}
?>
<html>
    <input type="text" name = "user" value = "username" />
    <br>
    <input type="password" name = "password" value = "password" />
    <br>
    <input type="submit" name = "submit" value = "login"/ >
</html> 
```

当我单击登录按钮时，没有任何反应。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:08:12.443

您正在分配 ( `=`) 值，而不是检查是否相等 ( `==`)。尝试更换

```
$_POST['user'] = $user 
$_POST['password'] = $password 
```

到

```
$_POST['user'] === $user
$_POST['password'] === $password 
```

此外，由于您没有为错误的登录名和错误的密码输出不同的错误，您可以将检查合并为一行：

```
if ($_POST['user'] === $user && $_POST['password'] === $password) {
    echo "Bad Login.";
} else {
    //Your other output here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:07:38.183

```
if($_POST['password'] = $password) 
```

那需要是：

```
if($_POST['password'] == $password) 
```

和

```
if($_POST['user'] = $user) 
```

需要是：

```
if($_POST['user'] == $user) 
```

单个等号将分配值，而 2 将比较它们。

您还缺少一个 HTML 表单。

```
<html>
<form method="POST">
<input type="text" name = "user" value = "username" />
<br>
<input type="password" name = "password" value = "password" />
<br>
<input type="submit" name = "submit" value = "login"/ >
</form>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:11:30.697

如您所知，您应该使用`==`而不是`=`. 但这里有一个评论（我发布作为答案，因为在评论中我无法缩进代码）

你为什么不使用

```
if(($_POST['user'] == $user) and ($_POST['password'] == $password)){
  echo 'success';
  }
else{
  echo 'Bad login';
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:10:24.950

在 PHP 和我知道的所有使用 IF 的语言中，你使用两个等号（==）。就在上面的是赋值运算符。所以你的代码如下。

```
<?php
    $user="teamhijack";
    $password="@#@#Password@#@#";
    if(isset($_POST['submit'])){

    if($_POST['user'] == $user){

    if($_POST['password'] == $password){
        echo "successful login!";
        }
        else
        {
        echo "Bad Login.";
        }
        }
        else
        {
        echo "Bad Login.";
        }
    }
    ?>
    <html>
        <input type="text" name = "user" value = "username" />
        <br>
        <input type="password" name = "password" value = "password" />
        <br>
        <input type="submit" name = "submit" value = "login"/ >
    </html> 
```

永远记住一个等于是分配。**IE: ($a = "Hello, World!";)**

两个等于是等于运算符。**即：如果（“d”==“d”）**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:11:08.927

您缺少 HTML 表单。

```
<form method="POST">
  <input type="text" name = "user" value = "username" />
  <br>
  <input type="password" name = "password" value = "password" />
  <br>
  <input type="submit" name = "submit" value = "login"/ >
</form> 
```

此外，如果您没有收到未定义的索引通知......那么当您打开错误报告时，`error_reporting(E_ALL);`您肯定会......

使用该`isset();`声明来最小化这些通知。

```
if (isset($_POST['submit']))
{
 // Carry on the login
} 
```

此外，使用`==`运算符查找与您的 if 语句更精确的精确匹配。

```
if($_POST['user'] == $user){ 
```

# java - ProgressListener 中的静态变量

> ID：15371079
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:24.723
> 
> 标签：java, weblogic, static-variables

我的 Weblogic 门户应用程序中有以下代码：

```
public class RoutesProgressListener implements ProgressListener {

private static long bytesTransferred = 0;
private static long fileSize = -100; 
```

在上面的类`bytesTransferred`和`fileSize`变量中都是静态的。这些变量可能会导致什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:05:44.893

首先，由于这些变量是静态的，它们与类相关联，而不是与对象相关联。因此，它们是按定义共享的。

其次，这是什么类型的听众？如果它是 a `HttpSessionListener`，则它是应用程序范围的。因此，即使您将这些变量设为非静态变量，它们也将被所有用户共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:32:08.790

这段代码的主要问题是您将这些变量定义为静态的，这意味着两件事：

1.  在单个 JVM 中只会创建`bytesTransferred`和的一个实例。`fileSize`
2.  所有线程将共享这些值。

像 Weblogic 这样的 Java EE 容器是一个多线程环境，因此只要您有多个活动连接，就会遇到问题。

尝试将这些更改为实例（非静态）变量，并为每个请求实例化一个新的 ProgressListener。

# python - 在 Python 中操作制表符分隔的文本文件

> ID：15371080
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:27.343
> 
> 标签：python

我将不胜感激有关如何解决该问题的任何示例代码：

我看到的是制表符分隔的文本文件 A 和 B。

文件 A 有多列不推荐使用的字母数字代码。

文件 B 有 2 列：第一列包含文件 A 中已弃用的代码，第二列包含已弃用代码的现代版本。换句话说，文件 B 在不推荐使用的代码和现代代码之间“转换”。

任务是编写一个脚本，1) 将文件 A 中已弃用的代码转换为现代代码，2) 将输出写入新的制表符分隔的文本文件，以及 3) 在新文件中将列的顺序修改为与文件 A 中的列顺序不同。

对于任务 1，我可以使用数组或哈希。虽然我知道哈希对于任务 1 可能更有效，但我对哈希的熟悉程度有限，更喜欢使用数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:08:58.403

使用该[`csv`模块](http://docs.python.org/2/library/csv.html)读取这两个文件。

对于文件 B，创建一个[字典](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)，其中第一个字段作为键，第二个字段作为值。当您浏览文件 A 时，您可以使用字典进行直接查找和替换。

# javascript - 为样式表指定“标题”属性不允许应用它？

> ID：15371082
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:31.093
> 
> 标签：javascript, jquery, html, css

我有这个有效的代码：

```
$(document).ready(function () {

  var style = $('#formulario').val();

  $('#formulario').change(function() {
    var nombreArchivo = $(this).val();
    nombreArchivo = nombreArchivo.replace(/ /gi, '_');
    var ruta = '/printbox/views/formulariosweb/';
    $('#contenedorFormulario').load( ruta + nombreArchivo + '.html');
    $('head').append( $('<link rel="stylesheet" type="text/css"/>').attr('href', ruta + nombreArchivo + '.css') );
  });

  $("#formulario").trigger('change');

}); 
```

它根据表单中的选择更改 div 的内容，并且在每次更改时都正确应用样式。

但是，它添加 css 的次数与我更改表单中的值一样多。

当我尝试将`title`属性设置为 时，问题就出现了`LINK`，那么只有第一个样式有效，当我更改它时，新样式被加载到`head`但没有被应用。

我去了 W3 网站（[http://www.w3schools.com/tags/tag_link.asp](http://www.w3schools.com/tags/tag_link.asp)），它说 LINK 支持该属性`title`，所以我不知道这里有什么问题。我这样添加：

```
$('head').append( $('<link rel="stylesheet" type="text/css"/>').attr({ 'href': ruta + nombreArchivo + '.css', 'title': nombreArchivo }) ); 
```

任何帮助都感激不尽。

谢谢

PS：我添加了 title 属性以便以后能够识别和删除它，一旦我更改了下拉列表中的值，因此它不会填充标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:16:55.340

您可以使用以下命令检查样式表是否尚未加载：

```
if (!$("link[href='/path/to.css']").length) 
```

因此，如果最终目标是您只想加载每个样式表一次，那么您的代码将是：

```
$(document).ready(function () {

  var style = $('#formulario').val();

  $('#formulario').change(function() {
    var nombreArchivo = $(this).val();
    nombreArchivo = nombreArchivo.replace(/ /gi, '_');
    var ruta = '/printbox/views/formulariosweb/';
    $('#contenedorFormulario').load( ruta + nombreArchivo + '.html');
    if (!$("link[href='" + ruta + nombreArchivo + "'.css']").length) {
      $('head').append( $('<link rel="stylesheet" type="text/css"/>').attr('href', ruta + nombreArchivo + '.css') );
    }
 });

 $("#formulario").trigger('change');

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:32:06.917

我去向 Mozilla bugtrack 报告了这个问题，发现了一个类似的问题 ( [https://bugzilla.mozilla.org/show_bug.cgi?id=223410](https://bugzilla.mozilla.org/show_bug.cgi?id=223410) ) 讨论了这个问题，并把我带到了这个页面：

[http://www.w3.org/TR/html401/present/styles.html#h-14.3.1](http://www.w3.org/TR/html401/present/styles.html#h-14.3.1)

其中规范说指定`title`属性使其成为首选样式，然后不应用其他样式。

```
Authors may specify a number of mutually exclusive style sheets called alternate style sheets. Users may select their favorite among these depending on their preferences.
For instance, an author may specify one style sheet designed for small screens and another for users with weak vision (e.g., large fonts).
User agents should allow users to select from alternate style sheets.

The author may specify that one of the alternates is a preferred style sheet. User agents should apply the author's preferred style sheet unless the user has selected a different alternate. 
```

# ios - 为 CellIdentifier 使用静态 NSString 有什么好处？

> ID：15371083
> 
> 赞同：10
> 
> 时间：2013-03-12T20:06:31.647
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我总是看到`UITableViewController`声明的样板

```
static NSString *CellIdentifier 
```

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

为什么是静态的？我已经在很多地方进行了更改，因为我的`CellIdentifier`更改基于该部分？这是静态的背后的原因是什么？我会影响性能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T20:11:22.580

`cellForRowAtIndexPath:`被称为*很多*。每当您有一个在短时间内被反复调用的方法时，您希望最小化等待自动释放的对象的数量，因为这些对象将保留在堆栈中，直到 - 至少 -下一个运行循环。使用静态字符串可确保仅创建一次字符串对象，而不是每次调用该方法时。

这不是绝对必要的，但是当您在移动设备上的内存量有限时，您希望尽可能优化在短时间内创建的对象数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:14:53.547

声明`static`变量时，程序中只有该变量的一个实例。由于这是一个只分配一次的常量值，因此这种方法避免了为其保留和分配堆栈变量。当然，堆栈变量几乎肯定会被编译器优化掉，并且字符串内容已经被编译器优化为静态存储。所以这是一个非常小的优化，它与其他任何东西一样暗示了开发人员的意思（即所有实例共享相同的值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:14:48.970

虽然我同意@Answerbot 关于静态字符串的性能方面的看法，但同样值得注意的是静态字符串不易出错。IDE 将自动完成静态 NSString 对象，从而保证字符串的命名一致。

编辑：

如果您使用以下代码：

```
static NSString *cellIndentifier = @"myCellIdentifier"; 
```

然后，您可以自由使用变量“cellIdentifier”，而不必担心正在使用的实际字符串的拼写。

# javascript - 如果包含在 span 中，则查找文本框值和属性

> ID：15371089
> 
> 赞同：0
> 
> 时间：2013-03-12T20:06:57.750
> 
> 标签：javascript, asp.net, html, listview, textbox

我有一个列表视图，其中包含一个下拉列表、3 个文本框、1 个包含在跨度中以切换可见性和 2 个按钮的文本框。我无法访问包含在跨度中的文本框的值和属性值。这可能与我尝试访问它的方式有关。任何帮助表示赞赏。

这是列表视图：

```
<asp:ListView runat="server" ID="ListView1">
<LayoutTemplate>
    <table id="tablesorter" style="border: solid 1px black; width: 55%;">
        <thead>
            <tr>
                <th>
                    <a href="#">Country</a>
                </th>
                <th>
                    <a href="#">Info.</a>
                </th>
                <th>
                    <a href="#">Action</a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr id="itemPlaceholder" runat="server" />
        </tbody>
        <tfoot>
        </tfoot>
    </table>
</LayoutTemplate>
<ItemTemplate>
    <tr>
        <td>
            &nbsp;&nbsp;<select id="Existing" data="<%# Eval("Type").ToString()%>"
                class="Existing" style="width: 90px">
                <option value="0">USA</option>
                <option value="1">CAN</option>
                <option value="2">MEX</option>
        </td>
        <td>
            <input size="4" data="" type="text" id="city" value="<%# Eval("City")%>" />
            <input size="4" data="" type="text" id="state" value="<%# Eval("State")%>" />
            <input size="4" data="" type="text" id="Phone" value="<%# Eval("PhoneNbr")%>" />
            <span class="ZipBox" id="ZipBox" style="visibility: hidden">
                <input maxlength="5" data="" class="zip" size="5" type="text" id="zip" value="<%# Eval("ZIP")%>" />
            </span>
        </td>
        <td>
            <2 buttons here>
        </td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

这是我的 Javascript，我在其中访问所有文本框的值等按钮单击...

```
$(.updatebuttonclick)
        .click(function() {
            var parent = $(this).parent().prev();
            var tr = $(this).closest('tr');

            var TypeNode = tr.find("select.Existing").first();
            var cityNode = parent.children(".city").first();
            var stateNode = parent.children(".state").first();
            var phoneNode = parent.children(".phone").first();
            var zipNode = parent.children(".zip").first();

            var newcity = cityNode.val();
            var originalcity = cityNode.attr('data');

            var newstate = stateNode.val();
            var originalstate = stateNode.attr('data');

            var newphone = phoneNode.val();
            var originalphone = phoneNode.attr('data');

            //check for business type for extension
            if (newcity == "2") {

                var newzip = zipNode.val();
                var originalzip = zipNode.attr('data');
            }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:13:25.663

是否像为文本框设置 ID 并通过以下方式访问它们一样简单：

```
document.getElementById('yourtextboxid').value 
```

或者

```
document.yourformname.yourtextboxname.value 
```

或者

```
$('#yourtextboxid').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:10:27.587

您可以使用 find 函数在 DOM 中深入查找元素

```
var zipNode = parent.find(".zip"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:13:01.123

只需通过 ID 访问 zipNode：

```
var zipNode = parent.find("#zip"); 
```

# asp.net - 如何从服务器端手动清除asp输出缓存

> ID：15371091
> 
> 赞同：0
> 
> 时间：2013-03-12T20:07:08.160
> 
> 标签：asp.net, caching, browser-cache

我已经设置了一个缓存，但想从服务器端手动清除它，但不确定你是如何做到的。我试图回收应用程序池，但这只清除了我的开发服务器而不是生产服务器的缓存。我可以在浏览器上看到旧值。

# entity-framework - 什么在我的 EF 上下文中将 LazyLoadingEnabled 设置为 false？

> ID：15371096
> 
> 赞同：10
> 
> 时间：2013-03-12T20:07:16.033
> 
> 标签：entity-framework, entity-framework-5

首先使用 EF5 数据库。在创建上下文时，我设置`ContextOptions.LazyLoadingEnabled`为`true`. 发生了一些事情来改变它`false`（在我们的代码中没有任何地方改变了设置）。

在不同的点上，我正在检查它是否仍在`true`使用[这段](http://social.msdn.microsoft.com/forums/en-us/adodotnetentityframework/thread/6C00C0B3-3BDE-4B1D-A992-3283C3F23D20)代码（从实体对象获取上下文）。该问题仅在运行多个线程时才会出现（加载一些实体，然后通过多线程代码传递它们）。它不会出现在代码中的任何一致点，因此无法确定究竟是什么原因造成的。

我想我只是希望有人可能更多地了解 EF 的内部运作并给我一个线索......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T14:31:54.630

实体框架上下文不是线程安全的。当多个线程访问延迟加载的属性时，就会出现您遇到的问题。EF 在检查 NavigationProperty 的值时会在内部关闭延迟加载，然后再将其重新打开。（见`RelatedEnd.DisableLazyLoading()`）

因此，在您的情况下发生的事情可能是这样的：一个线程当前正在访问 NavigationProperty，并且在它完成之前另一个线程尝试访问附加到同一上下文的对象的导航属性。那时延迟加载会暂时关闭，因此不会加载任何数据。

EF 明确指出 ObjectContext 不是线程安全的，因此确保不同线程没有发生并发访问可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:34:42.333

`LazyLoadingEnabled`确定在访问导航属性时是否自动加载相关对象。

我记得在 Julie Lermans 的书中读到这个：[Julie Lerman 的 Programming EF](http://shop.oreilly.com/product/0636920022237.do)

您需要一个动态代理，用于延迟加载。您需要一个具有虚拟导航属性的公共类。

# extjs - 如何在 Ext.js 中动态添加自定义网格行？

> ID：15371101
> 
> 赞同：1
> 
> 时间：2013-03-12T20:07:35.113
> 
> 标签：extjs, extjs4.1

我有一个看起来像这样的网格：

```
----------------------
Id | Customer | Total
----------------------
100| Foo, Inc.| $19.95
----------------------
200| Bar, LLC.| $23.50
---------------------- 
```

当我双击任何给定的行时，我想在包含嵌套网格的特定行下方添加一行。那么网格将如下所示：

```
----------------------
Id | Customer | Total
----------------------
100| Foo, Inc.| $19.95
----------------------
  ------------------
  ORDER DETAIL
  ------------------
  Item | Term | SKU
  ------------------
  1    | 30   | abc    
  ------------------
----------------------
200| Bar, LLC.| $23.50
---------------------- 
```

我已经有一个用于孩子的网格容器（“ORDER DETAIL”），我将在其他地方使用它。如何将该网格动态添加到双击网格下方的一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:46:15.423

正如 Robert 已经提到的，您可以使用 RowExpander 插件[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.RowExpander](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.RowExpander) 在网格行中包含额外信息。

这是实施示例： [http ://docs.sencha.com/ext-js/4-1/#!/example/grid/grid-plugins.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/grid-plugins.html)

# javascript - 使用javascript获取最高ID

> ID：15371102
> 
> 赞同：2
> 
> 时间：2013-03-12T20:07:34.987
> 
> 标签：javascript, jquery

我有一堆 note `div`，格式如下：

```
<div class="note-row" id="1">
<div class="note-row" id="2">
<div class="note-row" id="4">
<div class="note-row" id="5">
<div class="note-row" id="6"> 
```

我将如何`id`使用 javascript 获得最大的？到目前为止，我有：

```
$('.note-row').each(function() {
    ??
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T20:10:29.503

快速而肮脏的方式：

```
var max = 0;
$('.note-row').each(function() {
    max = Math.max(this.id, max);
});
console.log(max); 
```

这有点短和更复杂（如 Blazemonger 所建议的那样，用于使用[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)，并且还允许负 id 下降到）：`Number.NEGATIVE_INFINITY`

```
var max = $('.note-row').get().reduce(function(a, b){
    return Math.max(a, b.id)
}, Number.NEGATIVE_INFINITY); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T20:10:47.933

你可以这样做：

```
var ids = $('.note-row').map(function() {
    return parseInt(this.id, 10);
}).get();

var max = Math.max.apply(Math, ids); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:19:22.877

有趣，但这也有效：

```
var max = $('.note-row').sort(function(a, b) { return +a.id < +b.id })[0].id; 
```

[http://jsfiddle.net/N5zWe/](http://jsfiddle.net/N5zWe/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T20:44:36.623

为了完整起见，优化的[Vanilla JS](http://vanilla-js.com/)解决方案：

```
var n = document.getElementsByClassName('note-row'),
    m = Number.NEGATIVE_INFINITY,
    i = 0,
    j = n.length;
for (;i<j;i++) {
    m = Math.max(n[i].id,m);
}
console.log(m); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:11:51.493

与您找到任何最大循环的方式相同：

```
var max = -999; // some really low sentinel

$('.note-row').each(function() {
    var idAsNumber = parseInt(this.id, 10);
    if (idAsNumber  > max) {
        max = idAsNumber;
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T20:12:37.257

```
 var maxID = -1;
  $('.note-row').each(function() {
       var myid = parseInt($(this).attr('id'),10);
       if( maxID < myid ) maxID = myid;
  });
  // the value of maxID will be the max from id-s 
```

# api - 如何支持通过排队作业通过外部 API 安全创建用户帐户？

> ID：15371115
> 
> 赞同：0
> 
> 时间：2013-03-12T20:08:15.160
> 
> 标签：api, security, encryption, queue, job-scheduling

**因此，这个问题正在深入研究安全和加密，而这个问题可能很多人都没有遇到过。答案可能是理论上的。让我概述一下场景...**

1.  网站前端通过后端 API 驱动。后端有一个端点处理通用注册表单`username`和`password`。它使用 SSL。
2.  后端 API 通过异步作业队列处理注册。队列*不*向 API 服务器返回响应。这是一个设置和忘记操作来排队注册。
3.  排队的工作由工人接走。工作人员负责创建用户帐户。这些工作人员需要访问明文用户密码，以便他们可以使用密码触发第三方 API 注册调用。

**因此，问题的真正症结在于将密码同步到第三方 API，同时又不将其泄露给窥探者。队列带来了无法再从全局 POST 数据中直接访问明文密码的问题，这意味着它需要以某种方式存储在队列中。**

队列可以轻松存储散列密码并将其直接复制到用户表中。但是，此解决方案不允许将密码与第三方 API 同步，因为它已经加密。我玩弄了双向加密，但我全心全意地担心让密码容易被攻击者解密。

**有人能想出一种安全的方法来处理这种密码同步情况吗？**

队列是一项要求，并且假定任何有权访问服务器的人都可以读取该队列。密码不一定要同步；第三方 API 的密码可以是原始 API 的派生，只要有一种安全的方法可以通过登录用户解密而不提供密码。这本质上是用不支持 SSO 的第三方 API 模拟单点登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:41:06.893

有几种方法可以同步密码：

1.  两个身份验证存储都使用可逆加密，以便每个系统都可以提取真实值以发送到另一个系统；
2.  两者都使用完全相同的加密，以便您发送加密的文本，因此两者都可以理解。
3.  一个系统是“主”系统，用户始终通过该系统进行身份验证，而“从属”系统仅接收用户已登录的确认。这可以采取由主系统创建的机器生成密码的形式，用于在奴隶。
4.  一个系统是所有其他系统调用以进行帐户验证的“主系统”。类似于使用 LDAP 或 MyOpenID。

使用多主密码同步肯定会遇到一些问题，例如确保在用户更改密码时正确复制密码更改。

在您的情况下，听起来用户从未直接与第 3 方 API 交互。如果这是准确的，请让用户针对您的系统进行身份验证。需要时生成第 3 方 API 密码，将其与他们的帐户一起存储，并在必要时将其自动登录到其他系统。您的主密码可以以不可逆的加密方式存储；但是，第 3 方必须使用可逆加密。队列永远不必拥有初始密码，而只需生成一个新密码并将其存储在本地帐户中。

# c++ - 如何在文件中查找特定单词周围的单词

> ID：15371116
> 
> 赞同：0
> 
> 时间：2013-03-12T20:08:19.947
> 
> 标签：c++

我的结果中有一个大文件。我想在此文件中查找特定单词周围的单词。例如，如果我有这样的文件：我要回家，他们要上学，山姆要去吃午饭

如何在“going”之前和之后获取单词并使用 C++ 将其保存在哈希中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:14:02.190

您可以逐字阅读文件，始终将 N 个单词作为上下文。您可以将上下文存储在[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)允许滚动上下文的

```
const int N = 10;
std::deque<std::string> words_before, words_after;
std::string current_word, w;

// prefetch words before and after
for (int i = 0; i < N; ++i) {
    std::cin >> w;
    words_before.push_back(w);
}

std::cin >> current_word;

for (int i = 0; i < N - 1; ++i) {
    std::cin >> w;
    words_after.push_back(w);
}

// now process the words and keep reading
while (std::cin >> w) {
    words_after.push_back(w);
    // save current_word with the words around words_before, words_after
    words_before.pop_front();
    words_before.push_back(current_word);
    current_word = words_after.front();
    words_after.pop_front();
} 
```

# java - Android Java 覆盖设置按钮

> ID：15371117
> 
> 赞同：-4
> 
> 时间：2013-03-12T20:08:20.943
> 
> 标签：java, android

干杯:)

在我的应用程序（或我猜的任何应用程序）中，您有这个设置按钮（三个水平线）。当我按下这个按钮时，会出现一个虚拟按钮，上面写着“设置”我可以使用什么代码，或者我如何操纵这个按钮来打开另一个活动？（喜欢设置）谢谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:11:25.073

您需要覆盖`onOptionsItemSelected()`ex：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent intent = new Intent(this,MyNewActivity.class);
            startActivity(intent);
            break;
        }
        return super.onOptionsItemSelected(item);
    } 
```

`R.id.menu_settings`是您活动的菜单 xml 中的 id，例如：

\res\menu 文件夹中的 activity_main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
        android:id="@+id/menu_settings"
        android:orderInCategory="500"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>

</menu> 
```

# php - 如果magic getter与getter结合，调用的值是通过哪个方法

> ID：15371120
> 
> 赞同：1
> 
> 时间：2013-03-12T20:08:33.223
> 
> 标签：php, class, getter-setter, magic-methods

如果我这样使用它（在课堂之外）：

```
 $user_agent = $user->user_agent; 
```

在构造函数中调用方法 get_user_agent()。

这里魔术 __get 调用方法 get_user_agent 而不是返回成员变量 user_agent 的值。

如何避免这种情况？

```
class user
{
    private $user_agent;

    public function __get($key)
    {
        $value = null;

        if(method_exists($this, "get_$key"))
        {
            $value = $this->{"get_$key"}();
        }
        else
        {
            $value = $this->$key;
        }

        return $value;
    }

    public function get_user_agent()
    {
        $this->user_agent = $_SERVER['HTTP_USER_AGENT'];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:17:10.243

设置后忘记返回值：

```
public function get_user_agent()
{
    $this->user_agent = $_SERVER['HTTP_USER_AGENT'];
    return $this->user_agent;
} 
```

但这实际上很令人困惑，因为您不会期望以“get”为前缀的方法在返回之前先分配/定义任何内容。这`__set()`就是为了。在这种情况下，您甚至可能想在`__construct()`方法中执行此操作：

```
class user
{
    private $user_agent;

    public function __construct() {
        $this->user_agent = $_SERVER['HTTP_USER_AGENT'];
    }

    public function __get($key) {

        if(method_exists($this, "get_$key"))  {
            return $this->{"get_$key"}();
        } else {
            return isset($this->{$key}) ? $this->{$key} : null;
        }

    }

    public function __set($var, $val) {
        //only allow to set existent attributes
        if( isset($this->{$var} ) ) {
            $this->{$var} = $val;
        }
    }

    public function get_user_agent() {
        return $this->user_agent;
    }
} 
```

所以get方法不是分配属性的地方。在上面的例子中，它是在构造函数中赋值的。但如果您愿意，您可以稍后更改/分配它：

```
$user = new user(); //constructor-method is called, $user_agent is set now 
```

但您也可以稍后自行设置：

```
$user->user_agent = $_SERVER['HTTP_USER_AGENT'];  //the magic __set()-method is called

echo 'Your user agent is: ' . $user->user_agent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:13:33.433

这里的主要问题是它`get_user_agent`实际上并没有返回任何东西。你可以试试：

```
 public function get_user_agent()
 {
     $this->user_agent = $_SERVER['HTTP_USER_AGENT'];
     return $this->user_agent;
 } 
```

# cuda - CUDA C/C++：计算每点距离倒数的平均值（也许是交互能量？）

> ID：15371123
> 
> 赞同：3
> 
> 时间：2013-03-12T20:08:51.350
> 
> 标签：cuda, particle-system

我一直在尝试编写一个内核来计算 N 给定点之间距离的倒数之和。C 中的串行尾声就像

```
 average = 0;
for(int i = 0; i < Np; i++){
    for(int j = i + 1; j < Np; j++){
        average += 1.0e0f/sqrtf((rx[i]-rx[j])*(rx[i]-rx[j]) + (ry[i]-ry[j])*(ry[i]-ry[j]));
    }
}
average = average/(float)N; 
```

其中 rx 和 ry 分别是 x 和 y 坐标。

我通过使用随机数生成器的内核生成点。对于内核，我每个块使用 128(256) 个线程来获得 4k(8k) 个点。在它上面每个线程执行inner above inner loop，然后将结果传递给reduce sum函数，如下

生成点：

```
__global__ void InitRNG ( curandState * state, const int seed ){
    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    curand_init (seed, tIdx, 0, &state[tIdx]);
}

__global__
void SortPoints(float* X, float* Y,const int N, curandState *state){

    float rdmn1, rdmn2;

    unsigned int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    float range;
    if(tIdx < N){
        rdmn1 = curand_uniform(&state[tIdx]);
        rdmn2 = curand_uniform(&state[tIdx]);
        range = sqrtf(0.25e0f*N*rdmn1);
            X[tIdx] = range*cosf(2.0e0f*pi*rdmn2);
            Y[tIdx] = range*sinf(2.0e0f*pi*rdmn2);
    }
} 
```

减少：

```
__device__
float ReduceSum2(float In){

    __shared__ float data[BlockSize];

    unsigned int tIdx = threadIdx.x;

    data[tIdx] = In;
    __syncthreads();

    for(unsigned int i = blockDim.x/2; i > 0; i >>= 1){

        if(tIdx < i){

            data[tIdx] += data[tIdx + i];   
        }

        __syncthreads();
    }

    return data[0];

} 
```

核心：

```
__global__ 
void AvgDistance(float *X, float *Y, float *Avg, const int N){

    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    int bIdx = blockIdx.x;

    float x , y;
    float d = 0.0f;
    if(tIdx < N){

        for(int i = tIdx + 1; i < N ; i++){

            x = X[tIdx] - X[i];
            y = Y[tIdx] - Y[i];

            d += 1.0e0f/(sqrtf(x*x + y*y));     
        }
        __syncthreads();
        Avg[bIdx] = ReduceSum2(d);

    }
} 
```

内核配置和启动如下：

```
dim3 threads(BlockSize,BlockSize);
dim3 blocks(ceil(Np/threads.x),ceil(Np/threads.y));

InitRNG<<<blocks.x,threads.x>>>(d_state,seed);
SortPoints<<<blocks.x,threads.x>>>(d_rx,d_ry,Np,d_state);
AvgDistance<<<blocks.x,threads.x,threads.x*sizeof(float)>>>(d_rx,d_ry,d_Avg,Np); 
```

最后，我将数据复制回主机，然后执行剩余的总和：

```
Avg = new float[blocks.x];

CHECK(cudaMemcpy(Avg,d_Avg,blocks.x*sizeof(float),cudaMemcpyDeviceToHost),ERROR_CPY_DEVTOH);
float average = 0;

for(int i = 0; i < blocks.x; i++){
    average += Avg[i];
}
average = average/(float)Np; 
```

4k点，ok！结果是：

```
Average distance between points (via Kernel) = 108.615
Average distance between points (via CPU) = 110.191 
```

在这种情况下，总和可能会以不同的顺序执行，导致两个结果相互分歧，我不知道......

但是当谈到 8k 时，结果却完全不同：

```
Average distance between points (via Kernel) = 153.63
Average distance between points (via CPU) = 131.471 
```

对我来说，内核和串行代码似乎都是以相同的方式编写的。是什么让我不相信 CUDA 计算浮点数的精度。这有意义吗？或者当某些线程同时从 X 和 Y 加载相同的数据时，对全局内存的访问是否会导致一些冲突？或者我编写内核的方式在某种程度上是“错误的”（我的意思是，我是否正在做一些导致两个结果相互分歧的事情？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T02:12:45.897

实际上，据我所知，问题似乎出在 CPU 方面。我根据您的代码创建了一个示例代码。

我能够重现您的结果。

`sinf`首先，我将、`cosf`和的所有实例切换`sqrtf`到它们相应的双版本。这对结果没有影响。

`float`接下来我包含了一个 typedef，这样我就可以轻松地来回切换精度，用我的 typedef 替换代码中的`double`每个相关实例。`float``mytype`

当我使用 typedef of`float`和 4096 的数据大小运行代码时，我得到以下结果：

```
GPU average = 108.294922
CPU average = 109.925285 
```

当我使用 typedef of`double`和 4096 的数据大小运行代码时，我得到以下结果：

```
GPU average = 108.294903
CPU average = 108.294903 
```

当我使用 typedef of`float`和 8192 的数据大小运行代码时，我得到以下结果：

```
GPU average = 153.447327
CPU average = 131.473526 
```

当我使用 typedef of`double`和 8192 的数据大小运行代码时，我得到以下结果：

```
GPU average = 153.447380
CPU average = 153.447380 
```

至少有 2 个观察结果：

1.  GPU 结果在浮点数和双精度数之间没有变化，除了小数点后 5 位
2.  The CPU results vary by 1-20% or so between float and double, but when double is selected, they line up **exactly** (to the 6th decimal place, anyway) with the GPU results.

基于此，我相信 CPU 正在提供可变的、有问题的行为。

这是我的代码供参考：

```
#include <stdio.h>
#include <curand.h>
#include <curand_kernel.h>
#define DSIZE 8192
#define BlockSize 32
#define pi 3.14159f

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

typedef double mytype;

__global__ void InitRNG ( curandState * state, const int seed ){
    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    curand_init (seed, tIdx, 0, &state[tIdx]);
}

__global__
void SortPoints(mytype* X, mytype* Y,const int N, curandState *state){

    mytype rdmn1, rdmn2;

    unsigned int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    mytype range;
    if(tIdx < N){
        rdmn1 = curand_uniform(&state[tIdx]);
        rdmn2 = curand_uniform(&state[tIdx]);
        range = sqrt(0.25e0f*N*rdmn1);
            X[tIdx] = range*cos(2.0e0f*pi*rdmn2);
            Y[tIdx] = range*sin(2.0e0f*pi*rdmn2);
    }
}

__device__
mytype ReduceSum2(mytype In){

    __shared__ mytype data[BlockSize];

    unsigned int tIdx = threadIdx.x;

    data[tIdx] = In;
    __syncthreads();

    for(unsigned int i = blockDim.x/2; i > 0; i >>= 1){

        if(tIdx < i){

            data[tIdx] += data[tIdx + i];
        }

        __syncthreads();
    }

    return data[0];

}

__global__
void AvgDistance(mytype *X, mytype *Y, mytype *Avg, const int N){

    int tIdx = blockIdx.x*blockDim.x + threadIdx.x;
    int bIdx = blockIdx.x;

    mytype x , y;
    mytype d = 0.0f;
    if(tIdx < N){

        for(int i = tIdx + 1; i < N ; i++){

            x = X[tIdx] - X[i];
            y = Y[tIdx] - Y[i];

            d += 1.0e0f/(sqrt(x*x + y*y));
        }
        __syncthreads();
        Avg[bIdx] = ReduceSum2(d);

    }
}

mytype cpu_avg(const mytype *rx, const mytype *ry, const int size){
  mytype average = 0.0f;
  for(int i = 0; i < size; i++){
    for(int j = i + 1; j < size; j++){
        average += 1.0e0f/sqrt((rx[i]-rx[j])*(rx[i]-rx[j]) + (ry[i]-ry[j])*(ry[i]-ry[j]));
    }
  }
  average = average/(mytype)size;
  return average;
}

int main() {

  int Np = DSIZE;
  mytype *rx, *ry, *d_rx, *d_ry, *d_Avg, *Avg;
  curandState *d_state;
  int seed = 1;

  dim3 threads(BlockSize,BlockSize);
  dim3 blocks((int)ceilf(Np/(float)threads.x),(int)ceilf(Np/(float)threads.y));
  printf("number of blocks = %d\n", blocks.x);
  printf("number of threads= %d\n", threads.x);
  rx = (mytype *)malloc(DSIZE*sizeof(mytype));
  if (rx == 0) {printf("malloc fail\n"); return 1;}
  ry = (mytype *)malloc(DSIZE*sizeof(mytype));
  if (ry == 0) {printf("malloc fail\n"); return 1;}

  cudaMalloc((void**)&d_rx, DSIZE * sizeof(mytype));
  cudaMalloc((void**)&d_ry, DSIZE * sizeof(mytype));
  cudaMalloc((void**)&d_Avg, blocks.x * sizeof(mytype));
  cudaMalloc((void**)&d_state, DSIZE * sizeof(curandState));
  cudaCheckErrors("cudamalloc");

  InitRNG<<<blocks.x,threads.x>>>(d_state,seed);
  SortPoints<<<blocks.x,threads.x>>>(d_rx,d_ry,Np,d_state);
  AvgDistance<<<blocks.x,threads.x,threads.x*sizeof(mytype)>>>(d_rx,d_ry,d_Avg,Np);
  cudaCheckErrors("kernels");

  Avg = new mytype[blocks.x];

  cudaMemcpy(Avg,d_Avg,blocks.x*sizeof(mytype),cudaMemcpyDeviceToHost);
  cudaMemcpy(rx, d_rx, DSIZE*sizeof(mytype),cudaMemcpyDeviceToHost);
  cudaMemcpy(ry, d_ry, DSIZE*sizeof(mytype),cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudamemcpy");
  mytype average = 0;

  for(int i = 0; i < blocks.x; i++){
    average += Avg[i];
  }
  average = average/(mytype)Np;

  printf("GPU average = %f\n", average);
  average = cpu_avg(rx, ry, DSIZE);
  printf("CPU average = %f\n", average);

  return 0;
} 
```

我在 RHEL 5.5、CUDA 5.0、Intel Xeon X5560 上运行

编译：

```
nvcc -O3 -arch=sm_20 -lcurand -lm -o t93 t93.cu 
```

**编辑：** 在观察到 CPU 方面的可变性之后，我发现我可以通过修改 CPU 平均代码来消除大部分 CPU 可变性，如下所示：

```
mytype cpu_avg(const mytype *rx, const mytype *ry, const int size){
  mytype average = 0.0f;
  mytype temp = 0.0f;
  for(int i = 0; i < size; i++){
    for(int j = i + 1; j < size; j++){
        temp += 1.0e0f/sqrt((rx[i]-rx[j])*(rx[i]-rx[j]) + (ry[i]-ry[j])*(ry[i]-ry[j]));
    }
    average += temp/(mytype)size;
    temp = 0.0f;
  }
  return average;
} 
```

所以我会说CPU端的中间结果存在问题。有趣的是它没有出现在 GPU 结果上。我怀疑这样做的原因是 GPU 平均值的最终总和是在 CPU 上完成的（因此每个单独的 GPU 块结果按大小按比例缩小，例如 8192），并且这些可能具有足够的中间精度，直到最后的分裂。如果您内联 CPU 平均计算，您可能会再次观察到不同的情况。

# string - 通过字符串发送二进制数据包有优势吗？

> ID：15371140
> 
> 赞同：1
> 
> 时间：2013-03-12T20:09:51.830
> 
> 标签：string, binary, client-server, packet, tcp-ip

标题说明了一切。基本上我使用 TCP 进行客户端-服务器设置，我想知道在通过 tcp 发送数据之前将字符串转换为二进制是否有优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:14:38.883

字符串是二进制数据，或者至少可以很容易地转换成这样的，byte[]，用

```
static byte[] GetStringBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

如果您压缩/编码您发送的数据，无论它是作为字符串还是二进制数据开始，您很可能会发送相同的总字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:16:16.697

在绝大多数情况下没有真正的优势。此外，二进制数据往往更依赖于平台，因此如果您想将客户端/服务器扩展到多平台环境，您最好还是坚持使用字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-06T05:50:13.200

有些数据以二进制编码，例如[DER](https://en.wikipedia.org/wiki/X.690#DER_encoding)。

如果您的应用程序需要发送这些类型的数据，您可以直接发送二进制文件。例如[CA 的证书](https://letsencrypt.org/certs/isrgrootx1.der)。如果您将其作为[base64](https://letsencrypt.org/certs/isrg-root-x1-cross-signed.pem)之类的字符串发送，则[需要更大的大小来表示它](https://stackoverflow.com/a/11402374/12089368)。

在某些较低级别，如 TCP，由于大小、性能和容错性，两个实体之间共享信息（握手）使用二进制。

但是作为一个需要敏捷发展的应用程序开发人员，除了大小之外，还有很多事情需要考虑，比如兼容性和维护。假设您需要用二进制数据响应一些元数据，您可能需要使用 JSON 来表示：

```
{
  "version": 1,
  "data": "base64 encoded data"
} 
```

对客户来说事情会变得更容易，因为有大量工具可以帮助解析 JSON，并且当您无需工具即可查看数据（人类可读）时，调试起来会更容易。另一方面，二进制编码（如 DER）你必须升级你的协议文档，让客户可以轻松地将他们的代码升级为新格式，你还需要考虑向后/向前兼容。

虽然有一些工具可以帮助二进制编码更加兼容和可维护，例如[Apache Thrift](https://thrift.apache.org)、[Protocol Buffer](https://developers.google.com/protocol-buffers)、[Apache Avro](https://avro.apache.org)。

深入研究性能方面。除非您正在比较有无编码/解码过程（这很容易比较哪个更好）。你必须做一些负载测试来检查它。

例如，有一些[速度极快的 JSON 解析器](https://github.com/simdjson/simdjson)，它可以轻松击败一些声称性能比其他解析器更好的二进制解析器。

# vb.net - 使用 Visual Basic 在控制台中修改文本

> ID：15371146
> 
> 赞同：2
> 
> 时间：2013-03-12T20:10:10.953
> 
> 标签：vb.net, printing, console

我想知道是否有更有效的方法来修改控制台中的文本。例如：如果我正在跟踪已发生的事件数量，我将打印

```
0 events have occurred 
```

随着事件的发生，我想增加那个 0。

目前我正在以一种非常丑陋的方式做到这一点：使用 String 或 Stringbuilder 跟踪打印到控制台的所有内容，如果我需要进行任何更改，请更改字符串，清除控制台，将字符串打印到控制台。除了可能效率不高之外，当在短时间内进行太多更改时，它会以丑陋的方式显示，导致控制台“闪烁”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:59:05.023

诀窍是使用回车代码。这基本上将光标返回到同一行的开头。这与回车 + 换行 (vbCrLf) 不同，后者将光标置于下一行的开头。

在 VB 和 C# 中执行此操作的方法略有不同。

*   VB：使用 vbCr 代码。

*   C#：使用 \r 代码。

这是一些示例代码：

VB：

```
For i = 1 To 100
    Console.Write("Processing...{0}% complete  " & vbCr, i)
    System.Threading.Thread.Sleep(100)
Next 
```

C＃：

```
for (int i = 1; i <= 100; i++)
{
    Console.Write("Processing... {0}% complete\r", i);
    System.Threading.Thread.Sleep(100);
} 
```

# java - GWT/AppEngine Java 脚本解释器

> ID：15371147
> 
> 赞同：0
> 
> 时间：2013-03-12T20:10:14.220
> 
> 标签：java, google-app-engine

我有兴趣为用户提供在我的 appengine 应用程序的客户端编写脚本的可能性。这可能吗？

基本上，脚本必须在执行后存储在一个字符串中。

我已经尝试过使用 BeanShell、Java Compiler API、Java Scripting API、Groovy，但在我的 Eclipse GWT/AppEngine 项目中没有成功。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T07:35:38.237

我在 appengine 中使用 Mozilla Rhino javascript 解释器。奇迹般有效。脚本作为字符串存储在数据存储中。Rhino 甚至在执行之前将这些脚本编译为真正的 java 字节码。开箱即用 Rhino 未配置为安全沙箱。也就是说，默认情况下，您的脚本可以完全访问所有 appengine API。Rhino 允许对可访问的内容进行细粒度控制。

# regex - R中基于正则表达式的列表匹配

> ID：15371148
> 
> 赞同：2
> 
> 时间：2013-03-12T20:10:18.677
> 
> 标签：regex, r, list, subset

我有两个列表（更确切地说是字符原子向量），我想使用正则表达式进行比较以生成其中一个列表的子集。我可以为此使用“for”循环，但是有一些更简单的代码吗？以下举例说明我的情况：

```
# list of unique cities
city <- c('Berlin', 'Perth', 'Oslo')

# list of city-months, like 'New York-Dec'
temp <- c('Berlin-Jan', 'Delhi-Jan', 'Lima-Feb', 'Perth-Feb', 'Oslo-Jan')

# need sub-set of 'temp' for only 'Jan' month for only the items in 'city' list:
#   'Berlin-Jan', 'Oslo-Jan' 
```

补充说明：在我正在寻找代码的实际情况下，“月”等价物的值更复杂，而是随机的字母数字值，只有前两个字符具有我感兴趣的信息值（必须是“01” ）。

添加了实际案例示例：

```
# equivalent of 'city' in the first example
# values match pattern TCGA-[0-9A-Z]{2}-[0-9A-Z]{4}
patient <- c('TCGA-43-4897', 'TCGA-65-4897', 'TCGA-78-8904', 'TCGA-90-8984')

# equivalent of 'temp' in the first example
# values match pattern TCGA-[0-9A-Z]{2}-[0-9A-Z]{4}-[\d]{2}[0-9A-Z]+
sample <- c('TCGA-21-5732-01A333', 'TCGA-43-4897-01A159', 'TCGA-65-4897-01T76', 'TCGA-78-8904-11A70')

# sub-set wanted (must have '01' after the 'patient' ID part)
#   'TCGA-43-4897-01A159', 'TCGA-65-4897-01T76' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:27:01.297

像这样的东西？

```
temp <- temp[grepl("Jan", temp)]
temp[sapply(strsplit(temp, "-"), "[[", 1) %in% city]
# [1] "Berlin-Jan" "Oslo-Jan" 
```

更好的是，借用@agstudy 的想法：

```
> temp[temp %in% paste0(city, "-Jan")]
# [1] "Berlin-Jan" "Oslo-Jan" 
```

**编辑：**这个怎么样？

```
> sample[gsub("(.*-01).*$", "\\1", sample) %in% paste0(patient, "-01")]
# [1] "TCGA-43-4897-01A159" "TCGA-65-4897-01T76" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:56:00.020

这是继其他解决方案之后的解决方案，具有您的新要求：

```
sample[na.omit(pmatch(paste0(patient, '-01'), sample))] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:37:29.970

您可以使用`gsub`

```
x <- gsub(paste(paste(city,collapse='-Jan|'),'-Jan',sep=''),1,temp)
> temp[x==1]
[1] "Berlin-Jan" "Oslo-Jan" 
```

这里的模式是：

```
 "Berlin-Jan|Perth-Jan|Oslo-Jan" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:30:56.380

这是一个包含两个部分字符串匹配的解决方案......

```
temp[agrep("Jan",temp)[which(agrep("Jan",temp) %in% sapply(city, agrep, x=temp))]]
# [1] "Berlin-Jan" "Oslo-Jan" 
```

作为一个只是为了好玩的功能......

```
fun <- function(x,y,pattern) y[agrep(pattern,y)[which(agrep(pattern,y) %in% sapply(x, agrep, x=y))]]
# x is a vector containing your data for filter
# y is a vector containing the data to filter on
# pattern is the quoted pattern you're filtering on

fun(temp, city, "Jan")
# [1] "Berlin-Jan" "Oslo-Jan" 
```

# wpf - 绑定到 DataView 时的 WPF DataGrid 验证

> ID：15371158
> 
> 赞同：0
> 
> 时间：2013-03-12T20:10:57.583
> 
> 标签：wpf, validation, wpfdatagrid, dataview

我正在尝试验证由（例如）`DataGrid`填充的 a上的输入。但是，我看到的所有 WPF DataGrid 验证示例都假定源是 C# 类。我不知道如何将单个单元格（即一列）连接到代码隐藏验证。有人可以举个例子或指出一个例子吗？`DataView``myDataGrid.ItemsSource = myDataView``DataGrid`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:13:30.607

好的，我做了一些快速测试；我认为真正手动执行此操作的主要障碍是 DataGridCell 在直接分配 DataView 进行显示时不会为其内容创建任何绑定。但是，如果您愿意在创建 DataGrid 时跳过分配自定义 `DataGridTemplateColumn`s 的麻烦，您可以访问模板内的 TextBox 实例上的绑定，并在它们上设置自定义验证错误。

实际上，无论是这个还是覆盖 DataGrid 生成的文本框的默认样式；您会看到，默认文本框样式没有任何边框或任何内容，因此对其设置验证错误没有任何效果。使用 DataTemplate 将其变为普通文本框或覆盖其样式将使您能够实际使某些内容可见，作为设置验证错误的效果。

但是，您需要自己做一些研究；我做了一个快速原型并且它可以工作，但是我无法在 DataTemplate 中正确创建绑定（或者我忘记了自上次使用它以来我所知道的所有 WPF，或者我只知道如何使用正确的绑定:)） . 如果你得到某个地方，那么前进会更容易：

以某种方式访问​​ BindingExpression；我所做的是将处理程序附加到 LostFocus 事件并检查丢失的焦点是否是 DataGridCell 内的文本框；如果是这样，我只是将该绑定标记为无效（`t`代表一个 TextBox 实例）：

```
var x = t.GetBindingExpression(TextBox.TextProperty);

Validation.MarkInvalid(x, new ValidationError(new ExceptionValidationRule(), x.ParentBinding, "error", new Exception("error"))); 
```

我必须承认我不确定每个参数在 ValidationError 构造函数中的作用是什么（我认为异常消息默认显示在验证工具提示中？还是错误内容？），但我相信你可以想办法。现在，如果您不介意，我想我会休息一下……就像我说的那样，逆流而上并不容易：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:54:41.803

所以我做了更多的研究，我基本上缺少的是我可以用 a 的`Path`属性指定列名`Binding`（或者甚至使用括号中的列序号，*例如* `Path="[0]"`）。在实现之后，一切都与使用类属性基本相同。因此，我使用的典型`DataGrid`列定义如下：

```
<DataGridTextColumn Header="Regular" EditingElementStyle="{StaticResource ValidationErrorStyleBoxRA}" ElementStyle="{StaticResource ValidationErrorStyleBlockRA}" Width="60">
    <DataGridTextColumn.Binding>
        <Binding Path="HourlyRate" StringFormat="F3" ValidatesOnExceptions="True" ValidatesOnDataErrors="True" UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <local:HourlyRatesAmountValidate ValidatesOnTargetUpdated="True" />
            </Binding.ValidationRules>
        </Binding>
    </DataGridTextColumn.Binding>
</DataGridTextColumn> 
```

# javascript - Javascript下拉验证和警报

> ID：15371162
> 
> 赞同：0
> 
> 时间：2013-03-12T20:11:11.003
> 
> 标签：javascript, html, validation

我试图让它工作，但我根本找不到错误。另外我不知道如何使您没有选择的选择变成红色或某种颜色来提醒您。

```
<!DOCTYPE html>
<html>
    <body>
        <select id='Selection' name='Selection'>
            <option value=''>Select</option>
            <option value='1'>user1</option>
            <option value='2'>user2</option>
            <option value='3'>user3</option>
        </select>
        <br>
        <select id='Candidate' name='Candidate'>
            <option value=''>Select</option>
            <option value='1'>candidate1</option>
            <option value='2'>candidate2</option>
            <option value='3'>candidate3</option>
        </select>  
        <br>  
        <input type='button' onclick='Validate()' value='select' />
        <script>
            function Validate()
            {
              if(document.getElementById('Selection').value == '' ||
                 document.getElementById('Candidate').value == '' ||)                
              {
                alert('Please complete all selections');
                return false;
              }
              return true;
            }       
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:13:09.287

你有一个额外`||`的 if 条件，这将导致语法错误，删除它（**最后一个不是两者**）。要更改具有无效值的元素，您可以使用 css 但您必须单独检查它们。

# php - 找不到 404 页面 CodeIgniter 登录

> ID：15371168
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:11:27.180
> 
> 标签：php, forms, codeigniter, login, http-status-code-404

这是我第一次使用 CodeIgniter，我正在尝试创建一个登录表单。每当我单击我创建的提交按钮时，它都会将我带到 404 Page Not Found 错误。

我使用以下代码在视图文件夹中创建了 view_login.php：

```
<?php echo form_open('user/login') ?>
<ul>
<li>
<label> username </label>
<div>
<?php echo form_input(array('id' => 'username', 'name' => 'username')); ?>
</div>
</li>
<li>
<label> password </label>
<div>
<?php echo form_password(array('id' => 'password', 'name' => 'password')); ?>
</div>
</li>
<li><?php echo validation_errors(); ?></li>
<li>
<?php echo form_submit(array('name' => 'submit'), 'login'); ?>
</li> 
```

这是我的 user.php 控制器：

```
<?php
class User extends CI_controller
{

public function __construct()
{
    parent::__construct();
    $this->load->model('user_model');
}

public function register()
{
$this->load->library('form_validation');

if($this->form_validation->run() == FALSE)
{
    $this->load->view('templates/header', $data);   
    $this->load->view('user/view_register');
    $this->load->view('templates/footer');
}

else
{
echo 'this is being processed. thank you'; 
}   

    $this->load->view('user/view_register');
}   

public function login()
{
$this->load->library('form_validation');

$data['title'] = 'Log In';

 $this->load->view('user/view_login'); 

 if ($this->form_validation->run() == FALSE)
 { 
    $this->load->view('templates/header', $data);   
    $this->load->view('user/view_login');
    $this->load->view('templates/footer');
 {
 else
 {
     $user_id = $this->User_model->check_login($this->input->post('username',
                $this->input->post('password'); 
```

这是我的用户模型：

```
class User_model extends Model {

function User_model()
{
    parent::Model();
}

function check_login($username, $password)
{

$sha1_password = sha1($password);

$query_str = "SELECT user_id FROM users WHERE username = ? and password = ?";

$result = $this->db->query($query_str, array($username, $sha1_password));

if ($result->num_rows() ==1)
{
    return $result->row(0)->user_id;
}
else
{
    return false;
} 
```

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:41:08.630

我知道你最终会删除你的问题，就像你对前三个（我知道的）所做的那样，但是嘿。

你做错了很多事情。让我们做一些清理工作：

```
<?php  
class User extends CI_controller
{

// constructor is useless here, let's remove it.   

function index()
{
    redirect('login','refresh');
    // this is useless too, but just in case someone navigates to the url 'user'
}

function login()
{
    // you are calling form_validation methods, and loading the library _after_. 
    // It's the other way around.
    // Also, no need to load the form helper, it's already loaded
    // by the form_validation library

    $this->load->library('form_validation');
    $this->form_validation->set_rules('username', 'Username', 'required|trim|max_length[50]|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'required|trim|max_length[200]|xss_clean');

     $this->load->view('pages/view_login');

     if ($this->form_validation->run() == FALSE) {
         $this->load->view('view_login');
     {
     else {
        //extract($_POST);
        // this is quite bad practice imho (it's like goring back to register_globals).
        // You should fetch the post content directly:
         $user_id = $this->user_model->check_login($this->input->post('username',
                    $this->input->post('password');
      }    
  }
?> 
```

现在，正如我在您之前的问题中所说的那样，所有问题都涉及相同的 404 错误，我将再次告诉您：按照手册。不要发明使用内置框架功能的新方法。他们是有目的的。

您应该像这样打开表单：

```
<?php echo form_open('user/login'); ?> 
```

它会自行构建正确的 url。并且不要再告诉“我已经这样做了”，因为你没有，事实上你的每个问题仍然在 url 构建中再次显示相同的错误。

对不起，我很严厉，我希望最终能抓住一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T01:25:20.460

这就是您的问题所在。我怀疑您将控制器名称与视图内的子目录混淆了：

```
$this->load->view('user/view_login'); 
```

目前，您正在从称为用户的文件夹/目录中加载 view_login.php。如果页面不在引用的目录中，您将收到 404 Page Not Found 错误。它不存在。

我认为这是一些错误，因为用户实际上是您的控制器，并且只能从以下形式使用：

```
<?php echo form_open('user/login'); ?> 
```

除了您的 view_login.php 存在于称为用户的子目录中。

```
view/
    user/
        view_login.php 
```

尝试将 view_login.php 直接放入视图文件夹并使用它来调用它：

```
view/
    view_login.php

$this->load->view('view_login'); 
```

同样，

```
$this->load->view('templates/header', $data);   
$this->load->view('user/view_login');
$this->load->view('templates/footer'); 
```

也意味着 header.php 和 footer.php 在子目录“模板”中。其中任何一个错误都会给您 404 错误。您可能想尝试通过回显一些字符串来注释掉您的负载视图和测试——只是为了证明您的代码都很好。

通过测试每个其他 url 是否正常工作来验证您是否可能受到 htaccess 文件的干扰。

## [更新]

如果您怀疑您的表单操作是否正确，请尝试`base_url()`在配置正确的情况下使用。

```
<?php echo form_open(base_url().'user/login') ?> 
```

那应该准确地指向站点/控制器/方法（函数）

就像我在评论中提到的那样，我没有看到您在代码中的任何地方使用 form_validation->rule() 。您可以检查它是否为假。

将您的登录功能替换为以下功能并进行测试：

```
 public function login() {
        $this->load->library('form_validation');

        $data['title'] = 'Log In';
        if ($this->input->post()) {
            print_r(); //test if you have values

            $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
            $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');

            //You could set delimiter

            if ($this->form_validation->run() == FALSE) {
                //What so ever you which to do if validation fails. { else {
                        $username = $this->input->post('username'); //Make your code a bit readable
                        $password = $this->input->post('password'); //Make your code a bit readable

                        $user_id = $this->User_model->check_login($username, $password);
                        $data["user_id"] = $user_id; //you can access $user_id from your view
                    }
                }
                //Pass $data to views, you might need it in more than one view. Also change directory from user to pages to match what you stated in comment below. And please make sure these views are in the directories specified below...

                $this->load->view('templates/header', $data);
                $this->load->view('pages/view_login', $data);
                $this->load->view('templates/footer', $data);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:14:42.990

```
function user()
{
    parent::Controller();
} 
```

应该

```
function user()
{
    parent::__construct();
} 
```

你也在加载

```
$this->load->view('pages/view_login'); 
and
$this->load->view('view_login'); 
```

检查您的代码，确定这些视图都存在吗？我也真的认为你可以删除所有这部分：

```
function index()
{
    $this->login();
} 
```

另外，您在打开表单中使用 index.php，您是否使用 htacces 从 url 中删除它？404 是页面未找到

# css - IE8 无法正确显示定位的 div

> ID：15371170
> 
> 赞同：0
> 
> 时间：2013-03-12T20:11:31.227
> 
> 标签：css, internet-explorer-8, z-index

我只在 IE8 中的布局有一些问题。我有一个大的背景图像，这很好。然后我希望我的标题详细信息位于此之上。我使用绝对定位和 z-index 让它位于顶部。所有其他浏览器都很完美，只有 IE8 给我带来了问题。它将我的标题定位在大图像下方。

这是我的代码

```
<div id="homepage-banner">
     <img class="home-carousel" src="images/banner.jpg" />
</div>
              <header>
                    <div id="logo">
                            <img src="images/logo.png" />
                    </div>

                    <div id="header-text">
                            <p><span style="font-weight:bold; color: white">></span> Call us now on <strong>0800 785 7348</strong></p>
                            <p><span style="font-weight:bold; color: white">></span> <a href="#"  style="font-weight: bold; text-decoration: none; color: black">Click here</a> to enquire online</p>
                    </div>

                    <div id="nav-bar">
                            <img src="images/nav.png"  width="980" height="45"/>
                    </div>
            </header> <!-- header --> 
```

还有我的 CSS

```
header {
    height: 120px;
    width: 980px;
    z-index: 1000;
    position: absolute;
    top: 25px; }

#homepage-banner {
    height: 555px;
    width: 3000px;
    margin-left: -1000px;
    margin-bottom: -210px;
    background-color: rgb(0,173,239); } 
```

如何更改我的代码以便 IE8 在图像顶部显示我的标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:17:02.423

我假设您没有包含 shiv 脚本，因为 IE 8 支持 z-index。因为您使用的是 HTML 5`<header>`元素而不包含[html5shiv](http://code.google.com/p/html5shiv/)脚本，所以 IE 无法正确解析您的标题，从而导致行为你描述。只需按照我提供的链接并将该脚本包含在您的脚本中`<head>`，您将获得对新 HTML 5 元素的支持..

把它放在你的条件评论中`<head>`

```
<!--[if lt IE 9]>
 <script src="dist/html5shiv.js"></script>
<![endif]--> 
```

# actionscript-3 - 在 Flash 平台上使用 NResponder 真的比使用原生事件更好吗？

> ID：15371175
> 
> 赞同：1
> 
> 时间：2013-03-12T20:11:52.037
> 
> 标签：actionscript-3, flash, nresponder

我在一家公司工作，我们维护了一个 3 年前的软件，该软件完全使用本地事件编写（非常糟糕），我们计划完全重构它。

我的同事的立场是他完全赞成实施[NResponder](http://code.google.com/p/nineveh-responder/wiki/DispatchAdvanced)，但我对这个“惊人的超级骗子所有问题的解决方案”有点怀疑，并且不认为它真的值得，因为：

1.  有一天 NResponder 项目可能会被放弃

2.  在不久的将来，AVM 可以得到改进，原生事件可以变得更快

3.  新队友不会因为学习全新的事件操控方式而付出代价

4.  在调度具有特定参数的自定义事件的情况下，NResponder 的工作方式比本机事件更“规则”，NResponder 发送任何内容作为参数，您没有任何方法为此创建业务角色。

所以真的值得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:39:00.853

我不认为放弃 NResponder 是个大问题，你可以继续使用某个版本直到时间结束。问题是：如果您在 NResponder 中发现任何重大错误，您将被迫自己修复，直到项目所有者修复它，如果他们修复它。

代替您，我会努力使用本机事件（即使您将它们包装到一些自定义类中以简化重构，**如果您可以使这些类保持松散耦合**），因为您提到的其他点（学习曲线和 AVM 改进) 更为重要。

本机事件更可靠。

# three.js - 使用 David Piegza 的 3D Force-Directed Graph 处理大数据；可视化太慢

> ID：15371176
> 
> 赞同：6
> 
> 时间：2013-03-12T20:11:59.567
> 
> 标签：three.js

我正在使用 David Piegza 的开源代码来使用 Three.js 可视化 3D Force-Directed 图。源代码可以在这里找到：[https ://github.com/davidpiegza/Graph-Visualization](https://github.com/davidpiegza/Graph-Visualization)

当我开始可视化 2,000 多个节点时，事情变得非常缓慢。加载可视化需要 30 秒左右，并且旋转和平移有很长的延迟。这可能是什么原因？力导向算法？Javascript 可以在力导向的 3D 图中处理这么多节点吗？是否有某种背面剔除算法可用于 3D 力导向图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:34:02.500

我想强制导向布局算法不是这里的主要问题。主要是GPU资源。我现在正在开发一个 2D webgl 图，并使用粒子来显示节点（这比绘制立方体要快得多）。甚至这样的实现也有 GPU 的限制。您可以尝试尽可能地缩放图形，如果 fps 速率会比我的建议增加正确（您在屏幕上看到的对象更少 - 更快的 GPU 工作）。

# ios - 在 UITableViewCell 中使用 UIPanGestureRecognizer 的问题

> ID：15371179
> 
> 赞同：9
> 
> 时间：2013-03-12T20:12:14.440
> 
> 标签：ios, objective-c, uitableview, uigesturerecognizer

我正在尝试在我的 UITableViewController 中实现一个 UIPanGestureRecognizer 以用于滑动删除动画。类似于 Clear 应用程序中使用的滑动删除，如果您向左或向右滑动 UITableViewCell，则单元格会移动并被删除。

我已经尝试在我的 UITableViewCell 子类中实现它，但它似乎从未接收到该事件。

这是我放在 UITableViewCell 子类中以尝试此功能的代码。在我的初始化方法中

```
UIGestureRecognizer *recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    recognizer.delegate = self;
    [self addGestureRecognizer:recognizer]; 
```

然后是处理它的方法：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer {
CGPoint translation = [gestureRecognizer translationInView:self.superview];
//might have to change view to tableView
//check for the horizontal gesture
if (fabsf(translation.x) > fabsf(translation.y)) {
    return YES;
    NSLog(@"Panning");
}
return NO;
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer {
if (recognizer.state == UIGestureRecognizerStateBegan) {
    //if the gesture has just started record the center location
    NSLog(@"handlePan");
    _originalCenter = self.center; //Declared as a CGPoint at the top of my TableViewCell
}

if (recognizer.state == UIGestureRecognizerStateChanged) {
    //translate the center (aka translate from the center of the cell)
    CGPoint translation = [recognizer translationInView:self];
    self.center = CGPointMake(_originalCenter.x + translation.x, _originalCenter.y);
    // determine whether the item has been dragged far enough to delete/complete

}

if (recognizer.state == UIGestureRecognizerStateEnded) {
    // the frame this cell would have had before being dragged
    CGRect originalFrame = CGRectMake(0, self.frame.origin.y, self.bounds.origin.x, self.bounds.size.height);
    [UIView animateWithDuration:0.2 animations:^{
        self.frame = originalFrame;}
     ];
}
} 
```

细胞根本不动。不太确定这里发生了什么

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-09-14T15:48:11.893

如果您不希望单元格的滑动手势与表格视图滚动手势同时发生，则将平移手势添加到您的单元格并使其成为委托：

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(doPan:)];
pan.delegate = self;
[self addGestureRecognizer:pan]; 
```

并实现以下委托方法以仅在平移水平时启动：

```
#pragma mark - UIGestureRecognizerDelegate

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    // note: we might be called from an internal UITableViewCell long press gesture

    if ([gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]]) {

        UIPanGestureRecognizer *panGestureRecognizer = (UIPanGestureRecognizer*)gestureRecognizer;
        UIView *cell = [panGestureRecognizer view];
        CGPoint translation = [panGestureRecognizer translationInView:[cell superview]];

        // Check for horizontal gesture
        if (fabs(translation.x) > fabs(translation.y))
        {
            return YES;
        }

    }

    return NO;
} 
```

斯威夫特3..

```
override func awakeFromNib() {
    super.awakeFromNib()
    // do not use, say, layoutSubviews as layoutSubviews is called often
    let p = UIPanGestureRecognizer(target: self, action: #selector(yourPan))
    p.delegate = self
    contentView.addGestureRecognizer(p)
    }
}

override func gestureRecognizerShouldBegin(_ g: UIGestureRecognizer) -> Bool {
    if (g.isKind(of: UIPanGestureRecognizer.self)) {
        let t = (g as! UIPanGestureRecognizer).translation(in: contentView)
        let verticalness = abs(t.y)
        if (verticalness > 0) {
            print("ignore vertical motion in the pan ...")
            print("the event engine will >pass on the gesture< to the scroll view")
            return false
        }
    }
    return true
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-11T23:03:28.423

您需要以下方法才能检测到与滚动视图的 panGesture 同步的手势：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
   return YES; //otherGestureRecognizer is your custom pan gesture
} 
```

请记住将 panGesture.delegate 设置为您的 viewController。（更新了 OlivaresF 的评论。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:24:21.600

将手势识别器添加到内容视图。

```
[self.contentView addGestureRecognizer:recognizer]; 
```

# jquery-waypoints - 从外部页面链接到航点

> ID：15371182
> 
> 赞同：0
> 
> 时间：2013-03-12T20:12:31.267
> 
> 标签：jquery-waypoints

所以我使用 jQuery waypoints 插件来导航单页网站

现在它看起来像这样：

```
<div class="navigation">
<ul id="navi">
    <li data-slide="1"><a href="#">DC3</a></li>
    <li data-slide="2"><a href="#">THE ABOUT</a></li>
    <li data-slide="3"><a href="#">THE WORK</a></li>
    <li data-slide="4"><a href="#">THE CLIENTS</a></li>
    <li data-slide="5"><a href="#">THE WHO</a></li>
    <li data-slide="6"><a href="#">CONTACT</a></li>
</ul> 
```

每个数据幻灯片移动到一个单独的 div，如下所示：

```
<div class="slide" id="slide1" data-slide="1" data-stellar-background-ratio=".5"> 
```

我想要做的是在第二页上使用相同的导航，它将针对原始页面上的每个数据幻灯片 div。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:34:45.857

一个非常简单的解决方案是使用命名锚。在 HTML 中，在您要定位的每个元素旁边添加一个新的锚元素，例如`<a id="slide"></a>`，然后您可以使用 URL 中的片段链接到该锚点在页面上的位置，如下所示`example.html#slide`。

# configuration - 需要为 jshint 定义报告器的示例 gruntfile.js

> ID：15371183
> 
> 赞同：1
> 
> 时间：2013-03-12T20:12:36.493
> 
> 标签：configuration, jshint, gruntjs

我想在 grunt 设置中为 jshint 使用自定义报告器。目前我没有时间成为 node.js/grunt 专家，所以我希望找到一个示例 grunt 文件，其中包含记者的定义以及如何将其提供给 jshint。

广泛的搜索只给了我几个示例 gruntfile.js，这些都没有改变 jshint 的记者。我查看了所有提到“gruntfile.js”的堆栈溢出帖子的摘要。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T14:39:14.540

你需要这个：

```
 options: {
    reporter: 'jslint'
  } 
```

这是我的 Gruntfile.js（原始）：

```
/* jshint strict: true, devel: true  */
require('./config.js');

module.exports = function(grunt) {
  'use strict';

  grunt.initConfig({
    jshint: {
      all: ['Gruntfile.js', 'config.js', 'src/**/*.js'],
      options: {
        reporter: 'jslint'
      }
    }
  });

  grunt.loadNpmTasks('grunt-contrib-jshint');

  grunt.registerTask('foo', function() {
    requirejs('resources').copy();
  });

  grunt.registerTask('default', ['jshint', 'foo']);
}; 
```

# php - 将“仍然在线”ping 发送到 PHP 网络服务器的最佳间隔是多少？

> ID：15371185
> 
> 赞同：0
> 
> 时间：2013-03-12T20:12:40.833
> 
> 标签：php, web-applications, webserver

我网站上的用户可以有朋友，朋友可以互相聊天。您还可以将您的状态设置为在线、离开和忙碌。

如果用户不再在网站上，他的状态应该设置为离线。我想最好的方法是定期向服务器发送 AJAX 请求，然后如果服务器停止接收这些消息，则自动将状态设置为离线。

但是，发送这些消息的最佳间隔是多少？5秒？1分钟？

如果它真的取决于网络服务器的能力，有没有办法检查 PHP？一些常用的网络服务器功能的示例间隔是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:22:30.313

我会考虑使用这个>> [http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts -javascript](http://www.bedroomlan.org/coding/detecting-%E2%80%98idle%E2%80%99-and-%E2%80%98away%E2%80%99-timeouts-javascript)

然后修改以下内容：

```
setIdleTimeout(2000); // 2 seconds
setAwayTimeout(4000); // 4 seconds
document.onIdle = function() {$('#div_idle').css('opacity', '1');}
document.onAway = function() {$('#div_away').css('opacity', '1');}
document.onBack = function(isIdle, isAway) {
    if (isIdle) $('#div_idle').css('opacity', '0.2');
    if (isAway) $('#div_away').css('opacity', '0.2');
} 
```

类似于：

```
setIdleTimeout(120000); // Make these two 
setAwayTimeout(360000); // a lot longer
document.onIdle = function() {
    // your ajax calls for when they go
}
document.onAway = function() {
    // code here to maybe log them out or what ever you wish to do via ajax.
}
document.onBack = function(isIdle, isAway) {
    // code here for when they return
} 
```

这样你就减少了请求。

快速编辑：

关闭浏览器时注销可以通过jQuery.unload()实现：

```
$(window).unload(function() {
  // ajax call when they just go, like they don't even care!
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:24:18.967

这实际上更像是一个可用性/期望问题，而不是编码问题。如果服务器上的负载不是很高，这些甚至都不会引起注意。我怀疑您是否需要每 5 秒检查一次，但这可能是可行的，特别是如果它只是一个用户数量有限的个人网站。在高负载条件下，您可能会使其显着更高。

# java - 长轮询网络聊天：一个用户的更多设备

> ID：15371186
> 
> 赞同：0
> 
> 时间：2013-03-12T20:12:45.403
> 
> 标签：java, ajax, chat, comet, long-polling

我正在处理用户登录的网络聊天，并可以向任何其他登录用户发送消息。这是通过在客户端使用长轮询和在服务器端使用异步 java servlet 来实现的。它运行良好，直到我从两个不同的设备以相同的名称登录。一旦 servlet 接收到用户 A 的消息，它就会搜索 A 的第一个等待请求（首先是因为第二个可能正在等待另一个消息），将消息发送给他并将其从内部队列中删除。但是，当他们是两个登录的 A 客户端（例如移动和 PC）时，只有第一个会收到消息。我无法为所有 A 请求发送它，因为第二个等待的 A 请求可能是来自一个设备的另一个请求，并且两次发送消息并不好。您对如何在服务器端解决此问题有任何想法吗？如何向用户 A 的所有设备发送消息，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:15:31.880

使用 ZeroMQ 或 RabbitMQ 等消息队列技术来确保消息、扇出等的唯一传递。不要重新发明这个特定的轮子。

还有 JMS——我从来没有使用过它，因为在这些情况下我需要独立于语言，但如果你愿意假设 Java 到 Java，它可能会更简单。

# tree - 有没有更好的方法来构建这样一个优先级队列？

> ID：15371193
> 
> 赞同：2
> 
> 时间：2013-03-12T20:13:10.133
> 
> 标签：tree, functional-programming, ocaml, priority-queue

我已经实现了一个优先队列，它运行良好。下面是我的类型定义。

```
type 'a t = | Leaf of ('a -> 'a -> int)
            | Node of 'a * 'a t * 'a t * ('a -> 'a -> int) 
```

我的想法是树接受一个比较器函数（'a -> 'a -> int）并产生一个'at，它将由比较器排序。
但是，我在每个 Leaf 和 Node 上都有比较器，我想知道是否有更好的方法来做到这一点。
具体来说，给定一棵树，我希望能够轻松访问它的比较器。而且我不知道如果我的树的每个节点和叶子上没有比较器，我是否可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:36:07.343

解决这个问题的标准方法是编写一个函子，给定一个包含 PQ 中包含的类型的模块 + 您给出的比较函数返回一个专门用于该类型和比较函数的新 PQ 模块。

```
module PriorityQueue (OT : Map.OrderedType) = struct
  type t = 
    | Leaf
    | Node of OT.t * t * t
  (*Define your functions in terms of OT.compare ...*)
end 
```

然后，您将创建一个具体的 PriorityQueue 模块

```
module FunnyPQ = PriorityQueue(struct
  type t = int
  let compare _ _ = pred (Random.int 3)
end) 
```

请参阅 OrderedType 的定义：http: [//caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Map.OrderedType.html](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/Map.OrderedType.html)

您当然也可以使用您采用的方法，但通过以下方式将数据类型分解为 2 种类型

```
type 'a pq = 
  | Leaf
  | Node of 'a * 'a pq * 'a pq

type 'a t = { 
  comp : 'a -> 'a -> int ;
  pq : 'a pq
} 
```

请注意，您使用这种方法会失去一些类型安全性，因为现在如果您正在编写一个带有例如签名的函数，`'a pq -> 'a pq -> 'a pq`您不能保证第一个 pq 参数和第二个 pq 参数是使用相同的比较函数构造的。

# android - 通知在 Ginger Bread 中不显示，但在 JellyBean 中有效

> ID：15371200
> 
> 赞同：1
> 
> 时间：2013-03-12T20:13:36.270
> 
> 标签：android, android-notifications

我正在尝试展示`notification`，但它可以完美地工作`Jelly Bean`，但`Ginger Bread`它不起作用。没有错误/问题。我只想取消`notification`单击它。

**最低 API 级别为 10。**

这是代码。

```
 NotificationManager notifyManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);

    NotificationCompat.Builder notification = new NotificationCompat.Builder(
            context);

    notification.setSmallIcon(R.drawable.ic_launcher);
    notification.setContentTitle("Alarm");
    notification.setContentText("Wake up!!");

    notification.setVibrate(new long[] { 500 });
    notification.setWhen(System.currentTimeMillis());
    notification.setAutoCancel(true);

    Notification notif = notification.build();

    notifyManager.notify(1, notif); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:18:08.303

我有一个 API 级别检查，并为比 Jelly Bean 更少的东西做一些不同的事情：

```
如果（果冻豆或更高（））
{
///果冻豆
}
别的
{  
    NotificationCompat2.Builder mBuilder = new NotificationCompat2.Builder(this.context)
            ...........
}

```

这可能会为您解决。我花了很长时间才设置通知，所以这对我有用。

# sql - SQL Server 查询助手

> ID：15371201
> 
> 赞同：0
> 
> 时间：2013-03-12T20:13:41.740
> 
> 标签：sql, sql-server

假设我有两个表如下，我想写一个查询，规则是我想找出哪个 orderID 没有附件 ID。如何在 SQL 中查询它？

```
OrderID      Name
1              Computer      
2              Laptop      
3              Tablet      

AttachmentID      OrderID      Url
1                       1      ….
2                       2      …. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:21:26.850

另一个可能的答案，假设 Sql Server

```
select OrderID from Orders
EXCEPT
select OrderID from Attachments 
```

有关更多信息，请参阅[除和相交的 MSDN 文档。](http://msdn.microsoft.com/en-us/library/ms188055.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:15:06.087

```
select  *
from    Orders o
where   not exists
        (
        select  *
        from    Attachments a
        where   a.OrderID = o.OrderID
        ) 
```

# jquery - 定位表格中的复选框

> ID：15371204
> 
> 赞同：0
> 
> 时间：2013-03-12T20:13:48.690
> 
> 标签：jquery, html, css

我有一个表，我试图在其中使用 jquery 来定位复选框。我想单击单个 td 中的复选框，然后更改该 td 的背景颜色，但我似乎根本无法定位复选框。这是我表的 tr（它有更多的 td，我只为这个错误包括了两个。

```
<tr class="sources">
  <td><a href="#">Single Life Annuity</a></td>
  <td>
    <div class="left"><input type="checkbox"></div>
    <div class="right">
      <span class="relval">100%</span>
      <span class="benyou">$517.00</span>
      <span class="benben">$0</span>
    </div>
  </td>
  <td>
    <div class="left"><input type="checkbox"></div>
    <div class="right">
      <span class="relval">98%</span>
      <span class="benyou">$2,916.00</span>
      <span class="benben">$0</span>
    </div>
  </td>
</tr> 
```

这是我用来查找复选框的 jquery。我正在使用 console.log 来确保我找到了复选框，但本质上会使用`addClass(".active");`

```
 $(".sources td").click(function(e)
 {
   $(this).parent().find('input:checkbox').attr('checked', 'checked');
   console.log('you got it!');
 }); 
```

任何帮助都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:17:15.080

使用您的示例（绑定到单击表格单元格），这将选择单元格并为其应用红色背景：

```
$(this).css('background','red'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/HLtmt/)**

如果您希望绑定到复选框的单击事件，请尝试以下操作：

```
$(".sources td input").click(function (e) {
    $(this).parent().find('input:checkbox').attr('checked', 'checked');
     $(this).closest('td').css('background','red');
    console.log('you got it!');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/HLtmt/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:19:04.930

```
$('input[type="checkbox"]').click(function() {
    if($(this).is(':checked')) {
        $(this).parent().parent().addClass('active');
    } else {
        $(this).parent().parent().removeClass('active');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:24:18.193

您也可以尝试使用 .prop() 方法。

```
 $(this).parent().find('input:checkbox').prop("checked", true); 
```

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:30:45.990

根据需要：[**演示**](http://jsfiddle.net/4TnL9/2/)

```
$('input[type="checkbox"]').click(function() {
    if($(this).is(':checked')) {
        $(this).parent().parent().css('background','red');
    } else {
       $(this).parent().parent().css('background','white');
    }
}); 
```

其他方式，通过单击中的任意位置来工作`<td>`：[**DEMO**](http://jsfiddle.net/dSEkD/)

```
$(".sources td").click(function (e) {
    if ($(this).find('input:checkbox').is(':checked')) { 
        $(this).find('input:checkbox').attr('checked', false);
        $(this).closest('td').css('background','white');
    }
    else
    {
        $(this).find('input:checkbox').prop('checked', 'checked');
        $(this).closest('td').css('background','red');
    }
}); 
```

# iphone - JTRevealSidebar 推送到 ViewController

> ID：15371213
> 
> 赞同：1
> 
> 时间：2013-03-12T20:14:26.103
> 
> 标签：iphone, ios, xcode, ios6

我`UITableView`在左侧滑动条上使用 JTRevealSidebar V2。

我不知道如何通过发送消息推送到其他 ViewController。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    if (self.sidebarDelegate) {
       NSString *text = [self.leftList objectAtIndex:indexPath.row];
        if ([text isEqual:@"Warenkorb"]) {
            NSLog(@"Ist warenkorb");
           // How to push/create/bring2top view of msCartViewController Identified by "Cart"?
           // NSLog works
        }
    }
} 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:41:42.270

在您的 rootviewcontroller 中，您将分配一个新的 UIViewController，然后将其推送到 UINavigation 堆栈中。

例如：

`UIViewController *myViewController = [[UIViewController alloc] init];`

 `myViewController.title = @"My First View";

myViewController.view.backgroundColor = [UIColor redColor];

//to push the UIView.` 

`[self.navigationController pushViewController:myViewController animated:YES];`

请记住在您的根视图控制器中执行此操作！希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T03:34:01.813

也许，您的问题是如何从情节提要中获取实例，因为我看到您在情节提要中将您的 msCartViewController 称为“Cart”。

或者，也许您无法让导航控制器进行推送。

对于第一个问题

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
msCartViewController* vc=[storyboard instantiateViewControllerWithIdentifier:@"Cart"]; 
```

对于第二个问题，您需要将导航控制器指针存储到您可以访问的某个位置，例如在单例中的字典属性中。就像

```
// at first make a singleton with a dictionary property. here I call it YourNavigationCenter

UINavigationController *navigationController = [YourNavigationCenter sharedCenter].navigationDictionary[@"yourNavigationName"];
[navigationController pushViewController:self animated:YES]; 
```

如果这些解决方案没有抓住你的意思，请发表评论。

# encryption - 加密mysql数据库

> ID：15371214
> 
> 赞同：0
> 
> 时间：2013-03-12T20:14:27.447
> 
> 标签：encryption, mysqldump

我有一个我希望备份和加密的 MYSQL 数据库（它本身包含加密的数据 MD5 密码字段）。该应用程序是标准 Dreamweaver 共享托管服务器上的 PHP。

我希望必须转储整个 MYSQL 数据库，然后以某种方式对其进行加密。

我知道我需要 shell_exec() 一个 MYSQLdump，然后使用某种形式的加密实用程序对其进行加密。

我可以请 PHP 代码来执行这个转储/压缩/加密吗？

如果我走在正确的轨道上，我会期待这样的事情：

```
<?php 
1\. [connect to database]
2\. [perform MYSQLdump]
3\. [perform encryption]
4\. [write to file: /directory/backup.<timedatestamp>.gz]
5\. [create whiskey & celebrate]
?> 
```

作为一个非常低级的 PHP 开发人员，如果您不介意，我需要可以复制/粘贴的特定功能代码。我对第 1 步和第 5 步没问题，但在第 3,4 和 5 步时需要手握。

如果 PHP 没有任何内置加密并且需要第三方实用程序，我将需要知道如何确定它是否安装在我的服务器上以及如果没有安装如何安装。

PS 5 中创建的产品。自愿分享。

# f# - FSharp 活动模式的问题

> ID：15371218
> 
> 赞同：3
> 
> 时间：2013-03-12T20:14:33.267
> 
> 标签：f#, quotations, active-pattern

我正在解析 FSharp 中的代码引用并正在构建模式助手。一切都很顺利，直到我尝试

```
let (|BinaryFn|_|) fn (input:Expr) = 
    function
    | SpecificCall fn (_,_,l::r::[]) -> Some(l,r)
    | _ -> None

let (|Multiply|_|) x = 
    function
    | BinaryFn <@ (*) @> (l,r) -> Some(l,r)
    | _ -> None 
```

目的是有一个通用的二进制函数匹配器，它返回“左”和“右”，然后创建专门的二进制匹配器，例如多重、除法和加减法。

但是我在第二种模式上遇到错误

```
Error FS0001: Type mismatch. Expecting a     

'a -> 'b option     

but given a     

'a -> 'c -> (Expr * Expr) option     

The type ''a option' does not match the type 

''b -> (Expr * Expr) option' (FS0001) (Shambolics) 
```

有人可以告诉我我应该在这里做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:47:24.747

这里的问题是`function`不仅模式匹配最后一个参数，而且还添加了一个额外的参数（是 of和`function`之间的组合）。从第一个模式中删除函数参数，您的问题将得到解决。`fun``match``input`

# jquery - Jquery IE 外部自定义函数未定义

> ID：15371221
> 
> 赞同：0
> 
> 时间：2013-03-12T20:14:40.163
> 
> 标签：jquery, jquery-ui, internet-explorer, function, undefined

我有一个名为 的函数`flyout`，它在单击按钮时将菜单 div 滑入并在再次单击时滑出。

**问题 1：**它在 Chrome、FF 等中运行良好，但 IE9 告诉我`flyout is undefined`，虽然该功能仍然有效。

**问题 2：**在 IE8 中没有错误消息，但菜单一键滑入和滑出。

我不确定，但我希望这两个问题是相关的。我对 Jquery 和 Jquery UI 还很陌生，所以不确定我是否正确使用了所有内容。任何帮助将不胜感激。

外部 javascript 文件中的 JS：

```
$(function flyout() {
    $(".btn-toggle").click(function (e) {
        var newSelector = $('#flyout-' + $(this).attr('id')),
            toggle = newSelector.css('display') == 'block';

        e.preventDefault();
        newSelector.toggle('slide', { direction: 'right' }, 300);
        $('.hide').not(newSelector).hide('slide', { direction: 'right' }, 300);

        if (!toggle) {
            newSelector.children('.l-menu').effect('highlight', 1000);
            $('a.btn-toggle i').removeClass('icon-chevron-right');
            $(this).find('.icon-chevron-left').toggleClass('icon-chevron-right');
        } else {
            $(this).find('.icon-chevron-left').toggleClass('icon-chevron-right');
        };
    });
}); 
```

HTML 和 JS：

```
<a href="#" id="fo2" class="btn btn-small btn-info btn-toggle"><i class="icon-chevron-left"></i> <i class="icon-thumbs-up"></i> Helpful Hints</a>
<a href="#" id="fo1" class="btn btn-small btn-amber btn-toggle"><i class="icon-chevron-left"></i> <i class="icon-tasks"></i> Progress</a>

<div id="flyout-fo2" class="fixed-tr hide">
    ...Menu HTML
</div>
<div id="flyout-fo1" class="fixed-tr2 hide">
    ...Menu HTML
</div>

<script type='text/javascript' language='javascript'>
    $(document).ready(function () {
        flyout();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:16:23.980

您正在制作一个函数的 jQuery 对象。为什么？

将外部文件更改为此：

```
function flyout() {
    $(".btn-toggle").click(function (e) {
        var newSelector = $('#flyout-' + $(this).attr('id')),
            toggle = newSelector.css('display') == 'block';

        e.preventDefault();
        newSelector.toggle('slide', { direction: 'right' }, 300);
        $('.hide').not(newSelector).hide('slide', { direction: 'right' }, 300);

        if (!toggle) {
            newSelector.children('.l-menu').effect('highlight', 1000);
            $('a.btn-toggle i').removeClass('icon-chevron-right');
            $(this).find('.icon-chevron-left').toggleClass('icon-chevron-right');
        } else {
            $(this).find('.icon-chevron-left').toggleClass('icon-chevron-right');
        };
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:21:24.760

您实际上是在向 DOM 就绪回调添加两个事件处理程序。

首先

```
$(document).ready(function () {
    flyout();
}); 
```

然后其次

```
$(function flyout() { 
```

`$(function)`是`$(document).ready(function(){});`.

解决方案是`function flyout(){}`单独声明。然后做

```
$(flyout); 
```

# paypal - 导入到新的 Paypal 开发人员损坏

> ID：15371223
> 
> 赞同：1
> 
> 时间：2013-03-12T20:14:41.843
> 
> 标签：paypal, paypal-sandbox

我已经登录到新的 paypal 开发者网站并单击导入以恢复我的旧帐户数据，这些数据在此处列出：

[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

当我单击业务 TEST 帐户并查看该帐户的配置文件时，API 凭据（用户名和密码）为空白。然后，当我单击沙盒站点的链接并尝试使用所述测试帐户登录时，它显示“请登录以使用 PayPal 沙盒功能。”，我已经登录，即使我单击链接返回沙盒。所以基本上我被卡住了..我现在需要使用经典的 API 并且无法测试，因为沙盒显然已经坏了。

![沙盒帐户](../Images/bed5beb9b23c1f0cf590c45c32fdb7de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:39:07.567

如果您还没有尝试过，请在访问 developer.paypal.com 网站之前尝试清除所有缓存和 cookie。也可以尝试使用 IE 以外的其他浏览器。如果您随后可以登录，请尝试导航到测试沙盒帐户并登录您的测试卖家帐户并从配置文件中查看 API 凭据。随着新开发者网站的推出，目前正在调查一些问题，并且正在尽快解决这些问题。

另外作为一种解决方法，我不确定您需要专门进行的测试，但您可以尝试使用 SDK 中包含的 API 凭据。您将能够使用这些凭据进行 API 调用。但是，您将无法登录卖家账户来查看这些交易。

如果您还没有这样做，您可能还想通过 www.paypal.com/mts 向 PayPal 商家技术服务提交一张票，以便他们可以在尚未调查的情况下调查您的问题。通过填写工单，这将有助于衡量受特定问题影响的商家数量，并在问题解决后通知您。

# excel - 书面宏是指在保存单元格 VBA 2010 的值时遇到问题，如果可能，请不要使用任何密码

> ID：15371230
> 
> 赞同：0
> 
> 时间：2013-03-12T20:14:53.430
> 
> 标签：excel, vba

我尝试编写此代码是因为从活动工作簿复制文件/创建新工作表/复制新工作表上的信息/返回复制图片，因为它不是第一次复制/并保存为 cel 的名称活动工作簿表 (3) 的 C71 是日期+一些文本。发生的情况是图像拒绝复制，它不会创建另存为文件+使原始工作表图像失真。在代码中，再次选择新工作表 + 使用 cel refs 保存时出现问题。请问有什么男孩知道如何解决这个问题吗？如您所见，这不是书面代码，而是已注册。我会给予一些帮助。

```
`ActiveWindow.SmallScroll Down:=-9
Range("A1:L71").Select
Selection.Copy
Workbooks.Add
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteColumnWidths, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
Application.CutCopyMode = False
ActiveWindow.DisplayZeros = False
ActiveWindow.View = xlPageBreakPreview
ActiveSheet.VPageBreaks(1).DragOff Direction:=xlToRight, RegionIndex:=1
ActiveWindow.SmallScroll Down:=36
ActiveSheet.HPageBreaks(1).DragOff Direction:=xlDown, RegionIndex:=1
ActiveWorkbook.Sheets(3).Activate
ActiveSheet.Shapes.Range(Array("Picture 1")).Select
Selection.Copy
wbProcess.Sheets(1).Activate
ActiveWindow.SmallScroll Down:=-48
Range("B2").Select
ActiveSheet.Paste
Selection.ShapeRange.IncrementLeft 41
Selection.ShapeRange.IncrementTop -14
ActiveWindow.SmallScroll Down:=-9
Range("C10").Select
ActiveWorkbook.ActiveSheet.Shapes.Range(Array("Picture 1")).Select
Selection.ShapeRange.IncrementTop 8
Application.PrintCommunication = False
With ActiveSheet.PageSetup
    .PrintTitleRows = ""
    .PrintTitleColumns = ""
End With
Application.PrintCommunication = True
ActiveSheet.PageSetup.PrintArea = ""
Application.PrintCommunication = False
With ActiveSheet.PageSetup
    .LeftHeader = ""
    .CenterHeader = ""
    .RightHeader = ""
    .LeftFooter = ""
    .CenterFooter = "SAMANVATTING PER NIVEAU + TOTAAL"
    .RightFooter = ""
    .LeftMargin = Application.InchesToPoints(0.708661417322835)
    .RightMargin = Application.InchesToPoints(0.708661417322835)
    .TopMargin = Application.InchesToPoints(0.748031496062992)
    .BottomMargin = Application.InchesToPoints(0.748031496062992)
    .HeaderMargin = Application.InchesToPoints(0.31496062992126)
    .FooterMargin = Application.InchesToPoints(0.31496062992126)
    .PrintHeadings = False
    .PrintGridlines = False
    .PrintComments = xlPrintNoComments
    .CenterHorizontally = False
    .CenterVertically = False
    .Orientation = xlPortrait
    .Draft = False
    .PaperSize = xlPaperA4
    .FirstPageNumber = xlAutomatic
    .Order = xlDownThenOver
    .BlackAndWhite = False
    .Zoom = 80
    .PrintErrors = xlPrintErrorsDisplayed
    .OddAndEvenPagesHeaderFooter = False
    .DifferentFirstPageHeaderFooter = False
    .ScaleWithDocHeaderFooter = True``
    .AlignMarginsHeaderFooter = True
    .EvenPage.LeftHeader.Text = ""
    .EvenPage.CenterHeader.Text = ""
    .EvenPage.RightHeader.Text = ""
    .EvenPage.LeftFooter.Text = ""
    .EvenPage.CenterFooter.Text = ""
    .EvenPage.RightFooter.Text = ""
    .FirstPage.LeftHeader.Text = ""
    .FirstPage.CenterHeader.Text = ""
    .FirstPage.RightHeader.Text = ""
    .FirstPage.LeftFooter.Text = ""
    .FirstPage.CenterFooter.Text = ""
    .FirstPage.RightFooter.Text = ""
End With
Application.PrintCommunication = True
ChDir _
    "C:\Users\Path"
ActiveWorkbook.SaveAs Filename:= _
    "C:\Users\Path" & "OVERZICHT" & ("G71") & ."xls" _
    , FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False
ActiveWindow.Close 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:04:41.567

对于那些来访问这篇文章并有同样问题的人，我想发布我自己找到了解决方案，我愿意与其他有同样问题的人分享。我了解到，如果您想重新打开正在处理的文件，请参考**Windows("Map1").Activate很重要，否则它不会复制图片。**下一个重要的事情是，当您将保存为 cel 时，您必须确保在 & 和其他命令之间输入 1 个空格以进行保存。这是完美的工作！

```
Range("A1:M71").Select
Selection.copy
Workbooks.Add
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteColumnWidths, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteFormats, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False
Windows("NAME FILE.xlsm").Activate
ActiveSheet.Shapes.Range(Array("Picture 1")).Select
Application.CutCopyMode = False
Selection.copy
Windows("Map1").Activate
Range("B2").Select
ActiveSheet.Paste
Selection.ShapeRange.IncrementLeft 37.2
Selection.ShapeRange.IncrementTop -6
Range("A1:M71").Select
ActiveSheet.PageSetup.PrintArea = "$A$1:$M$71"
ActiveWindow.DisplayZeros = False
ActiveWindow.View = xlPageBreakPreview
ActiveSheet.VPageBreaks(1).DragOff Direction:=xlToRight, RegionIndex:=1
ActiveWindow.SmallScroll Down:=42
ActiveSheet.HPageBreaks(1).DragOff Direction:=xlDown, RegionIndex:=1
ActiveWindow.Zoom = 70
ActiveWindow.Zoom = 80
ActiveWindow.SmallScroll Down:=-57
Application.PrintCommunication = False
With ActiveSheet.PageSetup
    .PrintTitleRows = ""
    .PrintTitleColumns = ""
End With
Application.PrintCommunication = True
ActiveSheet.PageSetup.PrintArea = "$A$1:$M$71"
Application.PrintCommunication = False
With ActiveSheet.PageSetup
    .LeftHeader = ""
    .CenterHeader = ""
    .RightHeader = ""
    .LeftFooter = ""
    .CenterFooter = ""
    .RightFooter = ""
    .LeftMargin = Application.InchesToPoints(0.708661417322835)
    .RightMargin = Application.InchesToPoints(0.708661417322835)
    .TopMargin = Application.InchesToPoints(0.748031496062992)
    .BottomMargin = Application.InchesToPoints(0.748031496062992)
    .HeaderMargin = Application.InchesToPoints(0.31496062992126)
    .FooterMargin = Application.InchesToPoints(0.31496062992126)
    .PrintHeadings = False
    .PrintGridlines = False
    .PrintComments = xlPrintNoComments
    .CenterHorizontally = False
    .CenterVertically = False
    .Orientation = xlPortrait
    .Draft = False
    .PaperSize = xlPaperA4
    .FirstPageNumber = xlAutomatic
    .Order = xlDownThenOver
    .BlackAndWhite = False
    .Zoom = 54
    .PrintErrors = xlPrintErrorsDisplayed
    .OddAndEvenPagesHeaderFooter = False
    .DifferentFirstPageHeaderFooter = False
    .ScaleWithDocHeaderFooter = True
    .AlignMarginsHeaderFooter = True
    .EvenPage.LeftHeader.Text = ""
    .EvenPage.CenterHeader.Text = ""
    .EvenPage.RightHeader.Text = ""
    .EvenPage.LeftFooter.Text = ""
    .EvenPage.CenterFooter.Text = "TEXT"
    .EvenPage.RightFooter.Text = ""
    .FirstPage.LeftHeader.Text = ""
    .FirstPage.CenterHeader.Text = ""
    .FirstPage.RightHeader.Text = ""
    .FirstPage.LeftFooter.Text = ""
    .FirstPage.CenterFooter.Text = ""
    .FirstPage.RightFooter.Text = ""
End With
Application.PrintCommunication = True
ActiveWindow.SmallScroll Down:=-9
ChDir _
    "C:\Users\Path"
ActiveWorkbook.SaveAs Filename:= _
    "C:\Users\Path\" & Range("D2").Value & ".xlsx" _
    , FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False
End Sub 
```

# javascript - 使用 requirejs 和 r.js 优化器时无法加载 jQuery 插件

> ID：15371233
> 
> 赞同：7
> 
> 时间：2013-03-12T20:15:05.980
> 
> 标签：javascript, coffeescript, requirejs, amd

我的 requirejs 优化器有点麻烦。运行优化器后，我在构建/编译文件中收到一些错误消息。在没有优化步骤的情况下运行我的 Web 应用程序时，我没有任何错误。

这是我的 client.js 文件（包含配置）（coffeescript）

```
requirejs.config
  baseUrl: '/source/'
  paths:
    text:                 'lib/text'
    io:                   'lib/socket.io'
    underscore:           'lib/underscore'
    backbone:             'lib/backbone'
    jquery:               'lib/jquery'
#    almond:               'lib/almond'
    bootstrap:            'lib/bootstrap'
    bootstrapFileUpload:  'lib/bootstrap-fileupload'
    jqueryUniform:        'lib/jquery.uniform'
    jqueryBrowser:        'lib/jquery.browser'
    datatables:           'lib/jquery.dataTables'
    datatables_bootstrap: 'lib/DT_bootstrap'
  shim:
    io:
      exports: 'io'
    jquery:
      exports: 'jQuery'
    jqueryBrowser:
      deps:    ['jquery']
    jqueryUniform:
      deps:    ['jqueryBrowser', 'jquery']
    underscore:
      exports: '_'
    backbone:
      deps:    ['underscore', 'jquery']
      exports: 'Backbone'
    datatables_bootstrap:
      deps:    ['jquery', 'datatables']
    datatables:
      deps:    ['jquery']

require ['routers/router', 'backbone'], (Router, Backbone) ->
  MainRouter = new Router()
  Backbone.history.start() 
```

这是我的优化器配置。在需要 'requirejs' 作为模块后，我从 nodejs 运行优化器。

```
 config =
    baseUrl: __dirname + '/../client/source'
    name:    'lib/almond'
    include: './client'
    optimize: 'none'
    out:     __dirname + '/../client/' + hash + '.js'
    paths:
      text:                 'lib/text'
      io:                   'lib/socket.io'
      underscore:           'lib/underscore'
      backbone:             'lib/backbone'
      jquery:               'lib/jquery'
      bootstrap:            'lib/bootstrap'
      bootstrapFileUpload:  'lib/bootstrap-fileupload'
      jqueryUniform:        'lib/jquery.uniform'
      jqueryBrowser:        'lib/jquery.browser'
      datatables:           'lib/jquery.dataTables'
      datatables_bootstrap: 'lib/DT_bootstrap'
    shim:
      bootstrap:
        exports: 'bootstrap'
      bootstrapFileUpload:
        exports: 'bootstrapUpload'
      io:
        exports: 'io'
      jquery:
        exports: 'jQuery'
      jqueryBrowser:
        deps:    ['jquery']
      jqueryUniform:
        deps:    ['jqueryBrowser', 'jquery']
      underscore:
        exports: '_'
      backbone:
        deps:    ['underscore', 'jquery']
        exports: 'Backbone'
      datatables:
        deps:    ['jquery']
      datatables_bootstrap:
        deps:    ['jquery', 'datatables']

  requirejs.optimize config, (buildResponse) ->
    js = true
    if js && css
      require './server'
  , (err) ->
    console.log 'requirejs err'
    console.log err 
```

我在 chrome 中看到的具体错误是：“Uncaught TypeError: Cannot read property 'defaults' of undefined”

这与此片段相关：

```
/* Set the defaults for DataTables initialisation */
$.extend( true, $.fn.dataTable.defaults, { 
```

知道可能出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T03:16:07.667

我遇到了同样的问题。我认为发生此错误的原因是因为`DT_bootstrap.js`它不是 AMD 模块，而它取决于一个模块的副作用。在这种情况下`jquery.dataTables.js`。

当 RequireJS 优化器将您引用的所有模块组合到一个大 JS 文件中时，原始文件位于文件`DT_bootstrap.js`中间的某个位置，在`jquery.dataTables.js`. 问题是`DT_bootstrap.js`在加载组合的 js 文件时立即评估。它希望`$.fn.dataTable`在遇到以下行时被定义：

```
$.extend( true, $.fn.dataTable.defaults, { 
```

由于`jquery.dataTables.js`它是一个 AMD 模块，它已经编译但尚未评估。只有在以后需要它作为依赖项的代码中才会对其进行评估，然后才会定义`$.fn.dataTable`.

我通过在 AMD 模块定义中包装“DT_bootstrap.js”来解决这个问题，就像在这里完成的那样：[https ://github.com/amdjs/backbone/blob/master/backbone.js#L8-L24](https://github.com/amdjs/backbone/blob/master/backbone.js#L8-L24)

例如：

```
(function(root, factory) {
  // Set up DT_bootstrap appropriately for the environment.
  if (typeof define === 'function' && define.amd) {
    // AMD
    define(['jquery', 'datatables', 'bootstrap'], function($) {
      factory($);
    });
  } else {
    // Browser globals
    factory(root.jQuery);
  }
}(this, function($) {
    // <--- original DT_bootstrap.js goes here 
})); 
```

它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T23:14:43.200

彼得几乎是正确的。他唯一错过的是定义必须与凯西的配置相匹配。所以在上面的答案中，而不是：

```
define(['jquery', 'dataTable', 'bootstrap'], function($) ... 
```

它需要是：

```
define(['jquery', 'datatables', 'bootstrap'], function($) ... 
```

否则 require js 将寻找文件 dataTable.js 而不是它需要检索的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T14:11:07.187

由于需要 2.1.11[的 wrapShim 选项](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L86)处理这个问题，所以可以保留原始源文件。

# regex - 带有重复字符的正则表达式匹配字符串

> ID：15371234
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:15:06.720
> 
> 标签：regex

我正在寻找使用正则表达式来匹配具有多个相同文本实例的字符串。例如，在这个例子中：

一些文字在这里 357313 更多文字在这里 654321

一些文字在这里 123456 更多文字在这里 123456

一些文字在这里 123456 更多文字在这里 654321

我希望它匹配第二个选项，而不是第一个和第三个选项。我对正则表达式相当陌生，但花了几个小时在网上寻找是否有解决此问题的方法。这些字符串是未知的，以便在搜索中使用它们，我需要使用正则表达式来确定它们是否匹配。

任何帮助或帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:31:53.997

这匹配一行

[一些字符][一些数字][一些字符][与以前相同的数字][一些字符]

`/.+(\d+).+$1.+/`

那是你正在寻找的吗？

编辑：

`/[^\d]+(\d+)[^\d]+$1[^\d]+/`

使 [某些字符] 不是数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:20:42.033

我相信你想要类似下面的东西，它假设你想要一些文本的一个或多个匹配，然后是你的唯一字符串。

/^(.+123456){1,}$/

我刚刚意识到您实际上可能正在寻找不止一次包含相同字符序列的字符串。对我来说，这似乎不是一个适合正则表达式的问题。虽然对于更高级的正则表达式用户来说可能是可能的，但我会说编写如此复杂的正则表达式可能不是一个好主意。我建议您参考[http://en.wikipedia.org/wiki/Longest_common_substring_problem](http://en.wikipedia.org/wiki/Longest_common_substring_problem)，其中可能包含适用于此处的信息。

# linux-kernel - 使用用户权限从 /etc/fstab 挂载 jffs2 文件系统

> ID：15371235
> 
> 赞同：0
> 
> 时间：2013-03-12T20:15:14.497
> 
> 标签：linux-kernel, embedded-linux, mount, jffs2

我的 rootfs 是 squashfs，我试图在我的闪存设备上挂载三个 JFFS2 分区。但我想为这些分区/目录设置权限。

> 要求是 /readerconfig 只能由 id 1001 的用户访问。 /platform 只能由 id 1001 的用户访问 /apps 只能由 id 1000 的用户访问（读取、写入和执行）。
> 
> 下面是我的 fstab 条目。
> 
> ```
> rootfs               /                    squashfs   defaults              0  0 
> proc                 /proc                proc       defaults              0  0
> /dev/mtdblock12      /readerconfig        jffs2      rw,umask=0077,uid=1000,gid=1000,exec,noatime      0  0 
> /dev/mtdblock13      /platform            jffs2      rw,umask=0077,uid=1000,gid=1000,exec,noatime      0  0 
> /dev/mtdblock15      /apps                jffs2      rw,umask=0077,uid=1001,gid=1001,exec,noatime      0  0 
> tmpfs                /var                 tmpfs      mode=0777                              0  0
> tmpfs                /tmp                 tmpfs      mode=0777                              0  0
> sysfs                /sys                 sysfs      nosuid,noexec,nodev                    0  0
> /dev/mtdblock14      /etc                 jffs2      rw,mode=0777,uid=0,gid=0,noatime       0  0 
> ```

实施后，我发现没有为 JFFS2 文件系统挂载点设置 uid 和 gid 等挂载选项。

这是目标板上 mount 命令的输出。

```
> root@ti-omap3-am3517-evm:~# mount 
 >rootfs on / type rootfs (rw)
> /dev/root on / type squashfs (ro,relatime)
> devtmpfs on /dev type devtmpfs (rw,relatime,size=127428k,nr_inodes=31857,mode=755) 
> proc on  > /proc type proc (rw,relatime)
> /dev/mtdblock15 on /apps type jffs2  (rw,noatime)
> tmpfs on /var type tmpfs (rw,relatime,mode=777) 
> tmpfs on /tmp type tmpfs (rw,relatime,mode=777) 
> sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)
> /dev/mtdblock12 on /readerconfig type jffs2 (rw,noatime) 
> /dev/mtdblock13 on /platform type jffs2 (rw,noatime) 
```

如何设置目录 /readerconfig、/platform 和 /apps 目录的权限？是 JFFS2 / mount 命令的限制吗？或者我可以从 rcS 脚本中做到这一点？邀请所有替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:28:06.347

无法使用权​​限设置基于 Jffs2 的挂载点。必须使用“chown”命令更改所有权和/或使用“chmod”命令设置权限。

# python - 连接四中的匹配芯片打印匹配功能（python）

> ID：15371236
> 
> 赞同：0
> 
> 时间：2013-03-12T20:15:14.697
> 
> 标签：python

我有一个正确运行的连接四程序，但我想将我的 match_in_direction() 方法打印到屏幕上...我的代码如下

```
class ConnectFour(object): 
```

这将初始化板：

```
 def __init__(self):
        self.board = [[None for i in range(7)] for j in range(8)] 
```

这得到每个播放点的位置：

```
 def get_position(self, row, column):
        assert row >= 0 and row < 6 and column >= 0 and column < 7
        return self.board[row][column] 
```

这应该检查所玩的筹码是否匹配：

```
 def match_in_direction(self, row, column, step_row, step_col):

    assert row >= 0 and row < 6 and column >= 0 and column < 7
    assert step_row != 0 or step_col != 0 # (0,0) gives an infinite loop

    match = 1

    while True:
        nrow = row + step_row
        ncolumn = column + step_col
        if nrow >=0 and nrow <6 and ncolumn >=0 and ncolumn <7:
            if self.board[row][column] == self.board[nrow][ncolumn]:
                match == match+1
                row = nrow
                column = ncolumn
            else:
                return match
        else:
            return match
    print match 
```

这将是一个基于用户输入的游戏

```
 def play_turn(self, player, column):
    """ Updates the board so that player plays in the given column.

    player: either 1 or 2
    column: an integer between 0 and 6
    """
    assert player == 1 or player == 2
    assert column >= 0 and column < 7

    for row in xrange(6):
        if self.board[row][column] == None:
            self.board[row][column] = player
            return 
```

打印板：

```
 def print_board(self):
        print "-" * 29
        print "| 0 | 1 | 2 | 3 | 4 | 5 | 6 |"
        print "-" * 29
        for row in range(5,-1,-1):
            s = "|"
            for col in range(7):
                p = self.get_position(row, col)
                if p == None:
                    s += "   |"
                elif p == 1:
                    s += " x |"
                elif p == 2:
                    s += " o |"
                else:
                    # This is impossible if the code is correct, should never occur.
                    s += " ! |"
            print s
        print "-" * 29 
```

而我的用法：

```
b = ConnectFour()

b.play_turn(1, 3)

b.play_turn(1, 3)

b.play_turn(1, 4)

b.match_in_direction(0,3,0,2)

b.print_board() 
```

我当前的输出给了我很好的位置......但是它没有打印应该是 2 的 match_in_direction(0,3,0,2) 因为那是匹配的筹码数量......任何帮助都会很大赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:18:00.547

快速浏览一下 match_in_direction 看起来你有`match == match+1`而不是`match = match + 1`（或“更好” `match += 1`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:22:18.700

将此添加到您的测试代码中：

```
f = b.match_in_direction(0,3,0,2) 
print(m) 
```

由于返回语句，您不需要在 match_in_direction 函数中“打印匹配”，并且打印板不使用（因为没有更好的词）方向函数的匹配，因此您必须单独打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:24:39.170

match_in_direction 函数的格式有点混乱，但我认为这是因为这里的错字：

```
if self.board[row][column] == self.board[nrow][ncolumn]:
    match == match+1 
```

它应该是

```
match += 1 
```

# c# - RestSharp RestRequest.AddBody 不使用 Newton.Json 属性

> ID：15371240
> 
> 赞同：8
> 
> 时间：2013-03-12T20:15:22.613
> 
> 标签：c#, restsharp

```
var obj = new MyObject(); 
```

我在获取 RestSharp 时遇到问题`RestRequest.AddBody(obj)`；正确序列化对象。

```
class MyObject
{
   [JsonProperty(PropertyName="a")]
   public A{get;set;}

   [JsonProperty(PropertyName="b")]
   public B{get;set;}
} 
```

问题是 AddBody 序列化程序没有考虑到我的 JsonProperty 属性，我似乎可以弄清楚如何在 RestRequest 或 RestClient 上设置序列化程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:32:53.993

我发现以下链接解决了缺少属性支持[RestSharp 反序列化的问题](https://github.com/restsharp/RestSharp/wiki/Deserialization)

覆盖默认序列化程序

当使用 XML 或 JSON 请求主体发出请求时，您可以指定要使用的自己的 ISerializer 实现。

```
var request = new RestRequest();
request.RequestFormat = RequestFormat.Xml;
request.XmlSerializer = new SuperXmlSerializer(); // implements ISerializer
request.AddBody(person); // object serialized to XML using your custom serializer; 
```

并实现了以下类来覆盖默认的 JsonSerializer [New Json Serializer](https://github.com/restsharp/RestSharp/blob/master/RestSharp/RestClient.cs)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-22T19:39:01.097

我已经使用了 tafaju 的答案，并像这样为 json 实现了我的序列化程序。

```
public class CustomJsonSerializer : ISerializer
{
    public CustomJsonSerializer()
    {
        ContentType = "application/json";
    }

    public string Serialize(object obj)
    {
        return JsonConvert.SerializeObject(obj);
    }

    public string RootElement { get; set; }

    public string Namespace { get; set; }

    public string DateFormat { get; set; }

    public string ContentType { get; set; }

} 
```

它对我来说非常有效，它可以正确读取属性并序列化所有类型。但我没有用所有类型测试它。文档说 RootElement、Namespace、DateFormat 不用于 json。

# php - 在 for 循环内查询

> ID：15371241
> 
> 赞同：1
> 
> 时间：2013-03-12T20:15:24.770
> 
> 标签：php, mysql, pdo

我想知道是否有办法更有效地做我正在做的事情。现在，我有一个从数据库中检索状态的类。这很简单，不应该真正影响性能。

```
public function get ($var1, $var2, $var3)
{
    $feed = array(); //Initialize an empty array
    //Query the database
    $Statement = $this->Database->prepare("SELECT id, name, excerpt, post, timestamp, tags, title FROM posts WHERE col1 = ? AND col2 = ? AND col3 = ? ORDER BY id DESC LIMIT 15");
    $Statement->execute(array($var1, $var2, $var3));

    while($row = $Statement->fetch(PDO::FETCH_ASSOC))
    {
        $posts[] = array( "id" => $row["id"], /*etc...*/ ); 
    }

    return $posts;
} //end get 
```

然后我的页面设置了这样的东西，我知道这根本没有效率：

```
<?php for ($count = 1; $count <= $total; $count++): //Display the calendar      
    echo $count;            
    $feed = $Feed->get($count, $total, $var3);

    foreach ($feed as $post): 
        echo $post["id"];           
    endforeach; 
endfor; ?> 
```

我希望这是有道理的。那里有更多的 html 和所有内容。现在我的数据库中只有 18 行，加载页面需要 10 秒。这真的很糟糕。由于网站的设计，我必须以这种方式进行设置。所以 foreach 循环必须在 for 循环中，因为整个事情都设置为日历。

我的问题是选择所有行，将它们保存在 for 循环之外然后使用该数组是否会更有效，或者是否最好按照我现在的方式在 foreach 循环中运行每个查询（我已经阅读了很多，并且知道大多数人都说这是一个巨大的不，不）。如果我使用前一个选项并且数据库中有一百万行，我会遇到什么样的问题。

我希望这是有道理的。如果没有，我会更新问题。现在虽然大约 30 个查询只访问 1 或 2 行。但我能想到的唯一其他选择是选择表中的所有行，然后使用该数组，但如果数据库中有 100 万行，我觉得这会影响性能更多。

我是对的，有什么解决方案？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:36:54.503

我只想指出我确实解决了这个问题。如果有人想知道为什么 foreach 循环如此查询，那是因为我不小心删除了每次在 foreach 循环中连接到 Facebook api 以收集发布者信息的行。因此，如果有人偶然发现这个问题，只是为了确保我想澄清一下，进行许多 facebook->api 调用是一件坏事。将信息保存在您的数据库中并进行查询。

# winapi - WinAPI：设置只读文本框的填充颜色

> ID：15371244
> 
> 赞同：2
> 
> 时间：2013-03-12T20:15:32.673
> 
> 标签：winapi, colors, textbox, readonly, fill

我有一个几乎完成的程序 winapi (C++)。现在的问题是我想设置文本框的填充颜色并且该文本框是只读的。当我将该文本框设置为只读时，我无法将其填充为白色。当我不这样做时，它可以充满白色。这就是我创建文本框的方式：

```
CreateWindow(L"EDIT", text, WS_CHILD|WS_VISIBLE|WS_BORDER|ES_READONLY|ES_RIGHT, left, top, width, height, hWnd, (HMENU)ID, hInst, NULL) 
```

这段代码在 WinProc 中：

```
case WM_CTLCOLOREDIT:
        SetTextColor((HDC)wParam,RGB(0,0,255));
        SetBkColor((HDC)wParam,RGB(255,255,255));
        SetBkMode((HDC)wParam, TRANSPARENT);
    return (LRESULT)GetStockObject(WHITE_BRUSH); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:47:55.280

您将希望`WM_CTLCOLORSTATIC`用于只读文本框；请参阅文档[`WM_CTLCOLOREDIT`](http://msdn.microsoft.com/en-us/library/bb761691%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T14:47:19.947

根据 HerrJoebob 的解决方案，但您需要区分静态和编辑：（未经测试的代码，但想法就在那里）

```
case WM_CTLCOLORSTATIC:
{
TCHAR senderClass[256] ;
GetClassName((HWND)lParam, senderClass, 256);
if (_tscmp(senderClass, WC_EDIT)
  {
  //Code to change the colour of edit controls
  }
}
break; 
```

# bash - 如何在没有反引号评估的情况下获得目录权限？

> ID：15371245
> 
> 赞同：0
> 
> 时间：2013-03-12T20:15:32.587
> 
> 标签：bash, file, permissions

我正在更新 z/OS 中的 Bash 脚本。当前脚本使用反引号命令的结果来测试某个条件，如下所示：

```
var=`command`
[test value of var] 
```

问题是一位客户无权访问 /tmp 目录，并且 z/OS 使用 /tmp 中的文件来保存反引号命令的中间数据。

我想我可以在 /tmp 可访问性的反引号命令之前进行测试，并相应地更改脚本的行为。不过，我没有找到这样做的好方法。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:36:54.683

在 bash 中，您可以使用`test`内置来测试文件权限。

所以你可以`test -d /tmp`用来检查是否`/tmp`是一个目录或`test -w /tmp`用来测试`/tmp`你是否可以写。

您也可以将 the`[`用作`test`like in的同义词

```
if [ -d /tmp -a -w /tmp ] ; then 
    echo "/tmp is a directory and writable"
fi 
```

见`help test`bash。它解释了所有可用的测试。

另一件事：有时可以告诉程序将哪个目录用于临时数据，例如 in `sort -T /home/user/tmp`，有时它们尊重`TMPDIR`环境变量。取决于您在反引号中执行的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:37:08.053

`if [[ -w /tmp ]]...`将测试当前用户是否具有对`/tmp`.

可能还有另一种选择。我没有 z/OS，但一些 UNIX 有一个`TMPDIR`可以设置为临时目录的变量，例如：

```
export TMPDIR="$HOME" 
```

可能会奏效。

另一方面，反引号通常被认为已被弃用。改为使用`var=$(command)`。

# silverlight - SlideInEffect 不适用于 WP7？

> ID：15371246
> 
> 赞同：0
> 
> 时间：2013-03-12T20:15:33.093
> 
> 标签：silverlight, windows-phone-7, slide, silverlight-toolkit

在此先感谢您的帮助。我正在尝试在 PanoramaItem 中的某些文本块上使用工具包幻灯片动画。我相信所需要的只是将 toolkit:SlideInEffect.LineIndex 添加到我要滑动的每个文本块中。好吧，做到了，但我这辈子都无法让它发挥作用。

有什么想法我哪里出错了吗？

非常感谢

```
 <controls:PanoramaItem Header="payslips" Foreground="Black">
            <ListBox x:Name="PayslipsListBox" Margin="0,0,-12,0" ItemsSource="{Binding AllUserPayslips, Mode=OneWay}" toolkit:TiltEffect.IsTiltEnabled="True">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <StackPanel Width="400">
                                <TextBlock Text="{Binding Name, Converter={StaticResource NameConverter}}" TextWrapping="Wrap" Style="{StaticResource PhoneTextLargeStyle}" Foreground="Black" toolkit:SlideInEffect.LineIndex="1"/>
                                <TextBlock Text="{Binding Uploaded, Converter={StaticResource UploadedLongConverter}}" TextWrapping="Wrap" Style="{StaticResource PhoneTextSmallStyle}" Foreground="Gray" toolkit:SlideInEffect.LineIndex="2"/>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>                    
            </ListBox>
        </controls:PanoramaItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T14:48:14.690

简单地说 `toolkit:SlideInEffect.LineIndex`，在全景控制中不起作用。请尝试使用枢轴控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T16:16:03.197

它不会在生成的 ListBoxItem 中工作，但是您可以在列表框项目上使用它，只要它们在滑动转换发生时已经被填充。

# android - RemoteControlClient - 音频焦点是否必要/必需？

> ID：15371248
> 
> 赞同：5
> 
> 时间：2013-03-12T20:15:47.400
> 
> 标签：android, audio, lockscreen

我是新手，`RemoteControlClient`我仍在研究它。但是，我已经看到它可以用来在锁定屏幕上获取媒体按钮，例如播放/暂停。

无论如何，我的问题是，是否需要音频焦点才能`RemoteControlClient`显示在锁定屏幕上？我的应用程序没有任何形式的音频焦点（也许我的应用程序实现媒体播放器的方式可能不是最好的方法），并且我的锁屏控件没有显示。

作为旁注，我还发现 RandomMusicPlayer 示例有点令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T09:30:14.700

是的，我发现音频焦点需要在锁定屏幕上显示音频控件。我根据 RandomMusicPlayer 实现了它，现在可以正常工作了。是的，我同意 RandomMusicPlayer 是一个有点令人困惑的示例。需要合理的时间才能弄清楚。这是一个很好的关于音频焦点的教程，你也可以使用[http://developer.android.com/training/managing-audio/audio-focus.html](http://developer.android.com/training/managing-audio/audio-focus.html)。

# c# - ModalPopupExtender 向 PopupControl 发送参数？

> ID：15371250
> 
> 赞同：0
> 
> 时间：2013-03-12T20:16:00.440
> 
> 标签：c#, asp.net, ajax

我想创建一系列模态弹出窗口，以在我拥有的表单上的某些字段上显示帮助。

```
<asp:ModalPopupExtender ID="mpeMult" runat="server" TargetControlID="hlpMult" PopupControlID="Panel1" OkControlID="btnOkay"
                         drag="true" PopupDragHandleControlID="PopupHeader" BackgroundCssClass="ModalPopupBG"   >
</asp:ModalPopupExtender> 
```

是否有可能将参数传递给`Panel1`并相应地显示文本？

如果我必须为每个面板创建不同的面板，我想我必须找到另一种方法来做到这一点。

或者，也许这可以用`PopupControlExtender`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:31:02.910

如果我记得的话，PopUp Extenders 可以通过 javascript 激活。.show() 我相信。因此，您可以拥有 1 个 javascript 函数，将您的帮助文档移动到右侧面板中，然后在 1 个扩展器上调用 show，它将显示您新移动的文本。

# database - BLtoolkit 协会

> ID：15371251
> 
> 赞同：0
> 
> 时间：2013-03-12T20:16:01.063
> 
> 标签：database, entity, bltoolkit

我有这个实体：

```
namespace Entities.dbo
{
    [TableName("tbl_question")]
    public class Question : AbstractEntity
    {
        [MapField("c_from")]
        [Association(CanBeNull = false, OtherKey = "id", ThisKey = "c_from")]
        public User From { get; set; }

        [MapField("c_to")]
        [Association(CanBeNull = false, OtherKey = "id", ThisKey = "c_to")]
        public Band To { get; set; }

    }
} 
```

导致 Band 实体：

```
namespace Entities.dbo
{
    [TableName("tbl_band")]
    public class Band : AbstractEntity
    {
        [MapField("name")]
        public string Name { get; set; }

        [MapField("frontman")]
        [Association(CanBeNull = false, ThisKey = "frontman", OtherKey = "id")]
        public User Frontman { get; set; }

    }
} 
```

但是当我尝试提出以下问题时：

```
public static List<Question> GetQuestions(Band band)
        {
            using (var db = new MyDbManager())
            {
                try
                {

                    var l = db.GetTable<Question>().Where(x => x.To == band).ToList();

                    return l;
                }catch(Exception e)
                {

                    return null; 
                }
            } 
```

我得到了这个例外：

```
Association key 'c_to' not found for type 'Entities.dbo.Question. 
```

知道问题出在哪里吗？

我知道表中的 tbl_question 是列 c_to..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:40:45.850

ThisKey 属性表示定义关联一侧的关键字段（逗号分隔）。实体类的字段，不是数据库表字段！在您的情况下，您必须：

```
1\. Define field in the Question entity for ThisKey property:

[MapField("c_to")]
public int BandId { get; set; }

2\. Define field in the Band entity for OtherKey property:

[MapField("id")]
public string BandId { get; set; }

3\. Rewrite To property in the Question entity:

[Association(CanBeNull = false, OtherKey = "BandId", ThisKey = "BandId")]
public Band To { get; set; } 
```

# git - 为什么“git pull origin master”实际上并没有更改我计算机目录中的文件？

> ID：15371262
> 
> 赞同：8
> 
> 时间：2013-03-12T20:16:57.233
> 
> 标签：git, github, merge, git-pull

我对 GitHub 还是很陌生，尽管我处于必须积极使用它的位置。

无论如何，我使用“git pull upstream master”为我正在处理的项目提取和合并最新代码。我认为这个命令会更新我计算机上的实际文件（出现在目录中的文件等），但是没有任何反应。

当然控制台提到了许多变化，但似乎都没有发生。作为一项实验，我什至从其中一个文件中删除了所有内容并重新拉取，看看这是否会改变，但我得到“已经是最新的”。

如果有帮助，我输入`git branch -v`并得到以下信息：

```
* master a2e10a4 [ahead 29] git workflow experiment 
```

此外，`git status`给出以下内容：

```
# On branch master
# Your branch is ahead of 'origin/master' by 29 commits.
#
nothing to commit (working directory clean) 
```

最后一点，我唯一的分支是 master。

发生了什么事以及如何让“拉”更改显示在我的目录/计算机上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:35:14.717

我怀疑 master 没有跟踪`upstream/master`（如此[处](https://stackoverflow.com/a/4312238/6309)），这意味着 a`git pull upstream master`仅从*获取*提交`upstream`，但不*合并*任何内容。
您可以手动合并它们：`git merge upstream/master`.

另外，`upstream`不是`origin`，`master`而是领先于`origin/master`：这里没有什么可以拉的，只有 29 个新的提交要推送到源（应该是你的分叉，那是你从 GitHub 服务器端上游的克隆：请参阅*“[什么是GitHub 上的 origin 和 upstream 之间的区别？](https://stackoverflow.com/a/9257901/6309) ”*）。

![分叉和上游](../Images/783eea3771f0bbdf68a31ef7a91f40c6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:38:33.487

您键入的命令是`git pull upstream master`. 该命令*获取*然后将来自上游的更改*合并到您的本地分支。*

该`git status`消息表明上游中的所有内容都已与本地 master 合并。但是您还没有将更改**推送到遥控器。**换句话说，您已将更改提交到本地存储库，但尚未将它们推送到远程。在像 git 这样的分布式 VCS 中，`commit`并不是`push`一回事。

键入`git push origin master`以将您的更改发送到上游远程。这将使一切同步。

如果这不起作用，您可能需要重新设置本地存储库。要在本地工作下重新定位远程源，请键入`git pull -r origin master`。然后键入`git push origin master`。

如果您不确定是否准备好推送，您可以随时进行试运行，`git push origin master --dry-run`并且实际上不会推送任何更改。

# batch-file - 自动批量发送邮件，无需点击发送

> ID：15371267
> 
> 赞同：0
> 
> 时间：2013-03-12T20:17:18.457
> 
> 标签：batch-file, outlook, batch-processing

我使用 Microsoft Outlook 发送电子邮件。

我的批处理脚本进行了一些检查，我希望它自动发送电子邮件，而无需我手动单击。

我的批处理文件中有这段代码。

```
START mailto:me@myemail.com?Subject=TEST^&body=TEST_MSG. 
```

所有代码都会在 Outlook 中创建带有主题、电子邮件和正文的新电子邮件，但如果没有我点击发送，它实际上不会发送。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:22:22.113

从批处理文件（shell 脚本）发送电子邮件消息最直接的方法是使用命令行邮件应用程序，例如[blat](http://www.blat.net/)。但是，您需要知道要使用的 SMTP 服务器的名称（或地址）以及发送权限。有关该信息，请联系您的网络管理员。

# c++ - 使用多个 TClientSocket 实例导致 Windows 句柄泄漏的 C++ 应用程序

> ID：15371271
> 
> 赞同：2
> 
> 时间：2013-03-12T20:17:37.890
> 
> 标签：c++, c++builder-xe2, tthread, tclientsocket

`TClientSocket`我在使用 Borland/Embarcadero组件时遇到了明显的手柄泄漏。我有一个创建多个`TThread`实例的应用程序，每个实例`TClientSocket`动态创建一个对象，连接到它的目标发送一些消息，然后被删除。然后`TThread`删除实例（使用`FreeOnTerminate = true`）设置。我知道这效率低下，但它完美地满足了应用程序的需求——`TThread`能够同时存在的最大实例数限制为 32。我看到的问题是我可以看到一个明显的 windows 句柄泄漏问题通过任务管理器。为了隔离问题，我在单线程意义上应用了相同的问题，只是动态创建了一个`TClientSocket`对象并在主 VCL 线程中的单个循环内完成后再次删除它。这表现出相同的手柄泄漏问题。我知道该组件已被弃用，并且我知道我正在做的事情效率低下，但我不明白为什么会有句柄泄漏。在删除对象之前是否需要对对象执行任何操作`TClientSocket`以消除此句柄泄漏，或者这是组件中的错误？我在非阻塞模式下使用套接字并将事件处理程序分配给`OnConnect` `OnDisconnect`和`OnSocketError`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:20:11.957

我已经使用`TClientSocket`了很多年，包括在主线程和工作线程中的用法，我从未见过`TClientSocket`泄漏任何句柄。

但是，`TClientSocket`默认为非阻塞模式，并且在该模式下它用于`AllocateHWnd()`创建隐藏窗口来接收套接字事件，并且`AllocateHWnd()`不是**线程安全的**。在没有看到您的实际代码的情况下，这可能是您在工作线程代码中看到的泄漏的原因。解决方案就是`TClientSocket`在工作线程中使用时不使用非阻塞模式。改为在阻塞模式下使用它。无论如何，这更适合基于线程的逻辑。

但是，这并不能解释您在主线程代码中看到的泄漏。我怀疑`TClientSocket`实际上是罪魁祸首，再说一次，没有看到你的实际代码，很难确定。

# python - 列表到没有值的字典

> ID：15371272
> 
> 赞同：0
> 
> 时间：2013-03-12T20:17:51.793
> 
> 标签：python, list, dictionary

如何转换列表：

```
['a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'g1', 'g2', 'g3', 'g4', 'g5', 'g6', 'g7', 'g8', 'g9', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7', 'h8', 'h9', 'i1', 'i2', 'i3', 'i4', 'i5', 'i6', 'i7', 'i8', 'i9'] 
```

进入没有值的字典：

```
{'a1': None, 'a2': None, 'a3': None} #etc 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T20:19:25.997

```
Docstring:
dict.fromkeys(S[,v]) -> New dict with keys from S and values equal to v.
v defaults to None. 
```

* * *

```
In [1]: l = ['a1', 'a2', 'a3', 'a4']

In [2]: dict.fromkeys(l)
Out[2]: {'a1': None, 'a2': None, 'a3': None, 'a4': None}

In [3]: dict.fromkeys(l, 0)
Out[3]: {'a1': 0, 'a2': 0, 'a3': 0, 'a4': 0} 
```

* * *

*正如DSM*在评论中指出的那样，您必须小心将可变对象设置为值，因为它们都指向同一个对象。改变一个，改变所有：

```
In [5]: d = dict.fromkeys(l,[])

In [6]: [id(v) for v in d.values()]
Out[6]: [171439660, 171439660, 171439660, 171439660]

In [7]: d['a1'].append(1)

In [8]: d
Out[8]: {'a1': [1], 'a2': [1], 'a3': [1], 'a4': [1]} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T20:19:08.477

像这样：

```
dict.fromkeys(yourlist, 0)

>>> l = ['a1', 'a2', 'a3', 'a4', ...
>>> dict.fromkeys(l, 0)
{'a1': 0, 'a2': 0, 'a3': 0, 'a4': 0, ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T20:18:44.907

`my_dict = {elem:0 for elem in my_list}`

前任：

```
In [2]: my_list = ['a1', 'a2', 'a3', 'a4']

In [3]: my_dict = {elem:0 for elem in my_list}

In [4]: my_dict
Out[4]: {'a1': 0, 'a2': 0, 'a3': 0, 'a4': 0} 
```

# java - Class.getResource(className) 给我 NullPointerException

> ID：15371274
> 
> 赞同：6
> 
> 时间：2013-03-12T20:17:56.547
> 
> 标签：java, android, nullpointerexception, cross-platform, android-resources

我制作了一个独立于平台的库，我想在 J2SE 和 Android 项目上使用它。在这个库中，我有一个`Version`从清单加载其版本详细信息的类。在 PC 上效果很好，在 Android 上我得到了一个`NullPointerException`，我不知道为什么。

这是我的课：

```
public class Version {

    private static int APPCODE = 12354;
    private static int MAJOR;
    private static int MINOR;
    private static char RELEASE;
    private static int BUILD;
    private static int PROTOCOL;

    static {
        try {
            Class clazz = Version.class;
            String className = clazz.getSimpleName() + ".class";
            String classPath = clazz.getResource(className).toString(); //NullPointerException
            if (classPath.startsWith("jar")) {
                String manifestPath = classPath.substring(0,
                        classPath.lastIndexOf("!") + 1) + "/META-INF/MANIFEST.MF";
                Manifest manifest = new Manifest(new URL(manifestPath).openStream());
                Attributes attr = manifest.getMainAttributes();
                //APPCODE = Integer.parseInt(attr.getValue("APPCODE"));
                MAJOR = Integer.parseInt(attr.getValue("MAJOR"));
                MINOR = Integer.parseInt(attr.getValue("MINOR"));
                RELEASE = attr.getValue("RELEASE").charAt(0);
                BUILD = Integer.parseInt(attr.getValue("BUILD"));
                PROTOCOL = Integer.parseInt(attr.getValue("PROTOCOL"));
            } else {
                System.err.println("Couldn't find manifest, reverting to test mode");
                MAJOR = 0;
                MINOR = 0;
                RELEASE = 'n';
                BUILD = 0;
                //APPCODE = 12354;
            }
        } catch (IOException e) {
            System.err.println("Failed to load manifest file. " + e);
            MAJOR = 0;
            MINOR = 0;
            RELEASE = '0';
            BUILD = 0;
            //APPCODE = 12354;
            PROTOCOL = 0;
        } catch (NumberFormatException e) {
            System.err.println("Failed to load manifest file. " + e);
            MAJOR = 0;
            MINOR = 0;
            RELEASE = '0';
            BUILD = 0;
            //APPCODE = 12354;
            PROTOCOL = 0;
        }
    }

    public static int getProtocol() {
        return PROTOCOL;
    }

    public static int getAppCode() {
        return APPCODE;
    }

    public static int getBuildNumber() {
        return BUILD;
    }

    public static int getMajor() {
        return MAJOR;
    }

    public static int getMinor() {
        return MINOR;
    }

    public static char getRelease() {
        return RELEASE;
    }
} 
```

（请原谅这些`System.err.println()`行，这些是用于在 PC 上调试的）。

为什么这在 PC 上可以正常工作，但在 Android 上却不行？

完整的堆栈跟踪：

```
03-12 22:13:11.687: E/AndroidRuntime(11780): FATAL EXCEPTION: main
03-12 22:13:11.687: E/AndroidRuntime(11780): java.lang.ExceptionInInitializerError
03-12 22:13:11.687: E/AndroidRuntime(11780):    at com.logandam.wififileshare.android.MainActivity.onCreate(MainActivity.java:24)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.Activity.performCreate(Activity.java:4465)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.os.Looper.loop(Looper.java:137)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at android.app.ActivityThread.main(ActivityThread.java:4507)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at java.lang.reflect.Method.invokeNative(Native Method)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at java.lang.reflect.Method.invoke(Method.java:511)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-12 22:13:11.687: E/AndroidRuntime(11780):    at dalvik.system.NativeStart.main(Native Method)
03-12 22:13:11.687: E/AndroidRuntime(11780): Caused by: java.lang.NullPointerException
03-12 22:13:11.687: E/AndroidRuntime(11780):    at com.logandam.wififileshare.net.Version.<clinit>(Version.java:30)
03-12 22:13:11.687: E/AndroidRuntime(11780):    ... 15 more 
```

更新：`className`=`Version.class`在 PC 和 Android 上。在 PC 上使用`getName()`而不是`getSimpleName()`中断，但在 Android 上仍然无法使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:29:47.353

你得到`NullPointerException`是因为方法调用`clazz.getResource(className)`正在返回，这意味着找不到`null`指定的资源。 将您的资源文件放在一个文件夹中并将其设置为资源文件夹。在 SO 上查看[此答案以](https://stackoverflow.com/a/6029313/671988)获取更多信息。 您还可以查看[此 SO 答案](https://stackoverflow.com/a/270398/671988)以获取有关资源文件夹的详细信息。`className`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:44:14.880

我不是 100% 确定，但我不认为这种机制在 Android 下可以像在真正的 JVM 中那样工作（因为 dalvik 本质上不是 JVM）。我*认为*（在这里我可能错了），在打包的 APK 中，JAR 不再存在，因此您的资源路径可能是错误的。JAR 的类被转换为 dex 文件格式并[添加到`classes.dex`文件](http://en.wikipedia.org/wiki/DEX_%28file_format%29)中。因此，您无法解析资源，`foo.bar.class`因为它在类路径中不存在。

尝试将版本信息放入文本（或其他资源）文件并将其添加到 JAR 中并读取它。资源文件应正确添加，您应该能够使用该机制读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T01:13:15.753

我认为您希望将版本信息保留在清单文件中并在运行时提取它。如果是这样，欢迎使用 Android :-)

您有几个更好的选择，而不是您面临的问题。

*   [`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)与 一起使用[`Context`](http://developer.android.com/reference/android/content/Context.html)：

    ```
    PackageInfo pi = context.getPackageManager().getPackageInfo(
            context.getPackageName(), 0); 
    ```

    然后[`PackageInfo`](http://developer.android.com/reference/android/content/pm/PackageInfo.html)你有[`packageName`](http://developer.android.com/reference/android/content/pm/PackageInfo.html#packageName), [`versionCode`](http://developer.android.com/reference/android/content/pm/PackageInfo.html#versionCode), [`versionName`](http://developer.android.com/reference/android/content/pm/PackageInfo.html#versionName)... 那些定义在[`AndroidManifest.xml`](http://developer.android.com/guide/topics/manifest/manifest-intro.html).

*   将您的版本信息存储在[resources](http://developer.android.com/guide/topics/resources/available-resources.html)中，例如[`String`](http://developer.android.com/guide/topics/resources/string-resource.html)，[`Integer`](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)... 您还需要 a`Context`来获取资源：

    ```
    String appDescription = context.getString(R.string.app_description);
    int majorBuild = context.getResources().getInteger(R.integer.major_build);
    // ... 
    ```

我认为那些更好。

# mongodb - 有没有办法按嵌套集合对 Mongo 结果进行排序？

> ID：15371277
> 
> 赞同：3
> 
> 时间：2013-03-12T20:18:04.143
> 
> 标签：mongodb, mongodb-.net-driver

我们在 Mongo 设置中存储了数百万个订阅者记录。我的任务是在记录上放置一个前端，以便对其进行搜索。我的搜索查询看起来很棒，但我需要能够对它们进行排序并使其可分页。我们的 Mongo 设计就是这样，通道信息嵌套在一个数组中。我尝试对“Channels.Address”进行排序，因为电子邮件是我们唯一有地址的频道，但它不是这样工作的。无论我是升序还是降序，它都会以相同的顺序返回我的结果。

我们的集合看起来像：

订户：

```
{
  "_id" : "",
  "FirstName" : "Tester",
  "LastName" : "Tester",
  "Channels" : [{
      "_t" : "EmailChannel",
      "IsEnabled" : true,
      "Type" : 1,
      "Address" : "test@test.com"
    }, {
      "_t" : "SmsChannel",
      "IsEnabled" : true,
      "Type" : 2,
      "Number" : "88888888"
    }, {
      "_t" : "FaxChannel",
      "IsEnabled" : false,
      "Type" : 4,
      "Number" : null
    }]
} 
```

我目前的想法是编写一个 MapReduce 来返回我需要的内容并搜索它而不是这个。但这样做似乎太浪费空间了。这是一张经常使用的表，所以我不能使用 eval。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:25:09.980

据我所知，没有办法对 mongodb 嵌套数组进行排序。

您可以使用 C# 排序在您自己的代码上执行此操作，或者您可以尝试聚合框架[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)。您将需要“重新创建”您的项目，展开您的频道，对其进行排序并重新组合。我认为这会成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:31:05.527

添加一个名为`sort`. 存储您想要在该字段中排序的任何键。索引它并将其用作排序顺序。

在使用文档数据库时，有时您需要以这种方式对数据进行反规范化。通常，您需要将密钥转换为小写，并且可能还会删除某些字符，以便创建满足您精确要求的订单（或搜索字段），当然还有您所有的“保存”和“更新”代码将需要维护这个额外的字段。

您也可以尝试排序，`Channels.0.Address`但假设您的数组保持在某个看起来相当脆弱的顺序。

# c# - 添加授权后无法在 Web 应用程序表单中查看图像

> ID：15371278
> 
> 赞同：1
> 
> 时间：2013-03-12T20:18:05.080
> 
> 标签：c#, asp.net, web-config

我正在尝试建立一个基于 ASP.net 的网站。我先做了主要功能，我需要让网站安全。所以我将 web.config 设置为：

```
<system.web>
      <authorization>
          <deny users="?" />
      </authorization>
      <authentication mode="Forms">
          <forms loginUrl="~/Register/Login.aspx" timeout="2800"/>
      </authentication>

      <compilation debug="true" targetFramework="4.0" />
</system.web> 
```

当我删除这些代码时，我可以添加任何图像或任何元素，它们会显示出来。但是如果我添加这些代码，图像将不会显示。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:20:41.630

您想要`<allow users="*"/>`公共页面（包括图像）而不是`<deny users="?" />`

`deny user="?"`表示拒绝匿名用户访问。

[ASP.NET 成员资格 - 处理未经授权的经过身份验证的用户。](http://www.misfitgeek.com/asp-net-membership-handling-authenticated-users-that-are-not-authorized/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:20:31.797

在您的 web.config 中，`</system.web>`添加如下代码后：

```
<location path="images">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

并重复所有其他所需的数据，如 css、javascript 等。

# php - 在会话中保存最近查看的网页的 url

> ID：15371282
> 
> 赞同：1
> 
> 时间：2013-03-12T20:18:09.733
> 
> 标签：php, session

我想创建一种方法来在会话中保存最近查看的网页的网址，这样当用户使用我的网站时，他们可以在他们的帐户上查看他们到目前为止所查看的内容我有这个

```
<?php
session_start();
$currentpageurl = $_GET['username'];
$_SESSION['pageurl'][] = $_SERVER['REQUEST_URI'];

foreach($_SESSION['pageurl'] as $key=>$value) {
    echo 'The value of $_SESSION['."'".$key."'".'] is '."'".$value."'".' <br />';
}
?> 
```

问题是它一直在继续，当我需要它在最后查看的第 10 个页面停止并在查看新页面时删除最旧的页面时不会停止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:22:22.403

如果您的数组长度超过 10，请使用 array_shift 删除最新值。

```
<?php
session_start();
$currentpageurl = $_GET['username'];
$_SESSION['pageurl'][] = $_SERVER['REQUEST_URI'];

if( count( $_SESSION['pageurl'] ) > 10 ){
   array_shift( $_SESSION['pageurl'] );
}

foreach( $_SESSION['pageurl'] as $key=>$value) {
    echo 'The value of $_SESSION['."'".$key."'".'] is '."'".$value."'".' <br />';
}
?> 
```

# php - 自定义 Wordpress 固定链接

> ID：15371284
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:16.400
> 
> 标签：php, wordpress

美好的一天

我在主页上有一个特色滑块，可以调用一个类别，从中获取特色内容。现在，对于每个特色滑块，我都发布了一个“特色”类别的帖子。现在的问题是，当前当您单击特色幻灯片时，您会被定向到其类别为“特色”的原始帖子。

```
<h2 class="featured-title"><a href="<?php echo esc_url($arr[$i]["permalink"]); ?>"><?php echo esc_html($arr[$i]["title"]); ?></a></h2> 
```

现在，我想要实现的是将动态链接（上图）更改为指向特定类别，并且它应该指向的类别与构成此链接的标题完全相同 - （标题 = h2 特色 -标题文字）

所以动态网址应该指向

```
http://siteurl.com/category/title in the above link... 
```

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:37:05.717

尝试以下，我有一个类似的问题：

```
<h2 class="featured-title"><a href="http://siteurl.com/category/<?php echo strtolower(str_replace(" ","",$arr[$i]["title"])); ?>"><?php echo esc_html($arr[$i]["title"]); ?></a></h2> 
```

# html - 是否有可能知道 iframe 是否允许内容全屏显示？

> ID：15371286
> 
> 赞同：1
> 
> 时间：2013-03-12T20:18:17.280
> 
> 标签：html, iframe, fullscreen

我正在创建一个预期会被其他人嵌入到 iframe 中的应用程序（很像 YouTube 视频）。我有一个全屏按钮，如果它可用，它将调用 requestFullScreen 的一些变体，只要 iframe 嵌入了它就可以正常工作

```
allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" 
```

但是，我不知道如何判断嵌入 iframe 的人是否使用了这些属性。如果他们没有，单击全屏按钮将无济于事。

我想提前知道我是否能够全屏显示，所以如果我不能，我不会显示按钮。有没有办法做到这一点？

# jquery - 按角色访问 jquery 移动元素

> ID：15371287
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:20.477
> 
> 标签：jquery, cordova, mobile, mustache

我 90% 确定我做错了 100%：

我正在构建一个 Phonegap + jQuery Mobile 应用程序，并尝试在应用程序中构建尽可能多的代码重用。我有一个 html 文件，有多个

```
<div data-role="page" id="page_name"> 
```

应用程序页面的元素。每个页面元素都有典型的：

```
<div id="header" data-role="header">
</div><!-- /header -->

<div data-role="content">
<p>Page Info</p>
</div><!-- /content --> 
```

最后：

```
<div data-role="footer" data-id="footnav" data-position="fixed">
   <div data-role="navbar">
       <ul><li></li></ul>
   </div><!-- /navbar -->
</div><!-- /footer -->
</div><!-- /page --> 
```

现在，本着重用的精神，我想用相同的东西填充 data-role="navbar" div，所以我拼凑了一个小胡子模板，如：

```
function doNavigationMenu() {
  var navdata = {
     navlist: [
        { href : "ixinfo", text: "Ix" },
        { href : "ptinfo", text: "Px" },
        { href : "dxinfo", text: "Dx" },
        { href : "rxinfo", text: "Rx" },
        { href : "txinfo", text: "Tx" }
     ]
  };

  var template = "{{#navlist}}<li><a href='#{{href}}'>{{text}}</a></li>{{/navlist}}";
  var content = $.mustache(template, navdata);
  console.log(content); 
  $(".navbar ul").html( content ); **//<<< this doesn't work**
  $(".footnav").trigger( 'create' ); **//<<<This doesn't work**
} 
```

该函数由 phonegap`onDeviceReady`事件调用，确保应用程序已准备好让我处理 html。但是由于我在 jQuery mobile 应用 CSS 类之后修改内容，并且因为这是一个单页（以避免必须构建一个巨大的状态机），所以第一个“页面”上缺少 jQuery Mobile 样式。我最初为所有`navbar`div 提供了相同的 ID，但这很愚蠢，但我必须选择的唯一另一件事是`data-role="navbar"`，而我现在不知道如何选择。我已经读到我需要在`.trigger('create')`我的所有导航栏上触发，但我不知道该怎么做。

总而言之：我想使用具有多个页面的单个 html 文件，但使用 mustache 模板可以更轻松地维护我的移动应用程序中的代码大小，但不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:47:32.733

看看我的小提琴，

```
http://jsfiddle.net/idangozlan/27QMM/1/ 
```

您没有使用正确的选择器，应该是`$('[data-role="navbar"]')`..

# android - 向后移植 android.graphics.Camera.setLocation() 功能

> ID：15371288
> 
> 赞同：4
> 
> 时间：2013-03-12T20:18:23.183
> 
> 标签：android, graphics, matrix

在我的代码中，我需要减少`android.graphics.Camera`. 根据官方 API，默认情况下它的位置设置为 (0,0,-8)，但我可以使用该方法[`setLocation(float,float,float)`](http://developer.android.com/reference/android/graphics/Camera.html#setLocation%28float,%20float,%20float%29)将视点退回到 (0,0,-24)，从而减少倾斜效应。

不幸的是，这种方法仅适用于 API 12+，并且 Romain Guy 在 twitter 上确认我必须手动设置矩阵值才能在不使用该便捷方法的情况下获得相同的结果。所以（如果我没记错的话），我必须生成自己的矩阵并将它与我从`Camera`对象中得到的矩阵连接起来。

`Camera`不幸的是，类不是纯 Java，而是一个简单的 JNI 包装器，用于`SkCamera3D`实现到 Skia 2D 框架（[SkCamera.h](https://code.google.com/p/skia/source/browse/trunk/include/utils/SkCamera.h)和[SkCamera.cpp](https://code.google.com/p/skia/source/browse/trunk/src/utils/SkCamera.cpp)）中的本机类。

深入研究代码，我发现这个类中保存的矩阵可以表示如下：

```
|  scaleX  skewX   transX  |
|  skewY   scaleY  transY  |
|  persp0  persp1  persp2  | 
```

但老实说，我仍然无法理解本机代码中所有那些棘手的数学问题，而且我无法弄清楚如何自己更改矩阵值以获得我想要的东西。谁能指出我一些参考实现或（甚至更好）一些关于这种矩阵如何工作的详细解释？

# mysql - MySQL——文件系统规范化还是非规范化？

> ID：15371290
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:18:26.140
> 
> 标签：mysql, filesystems, normalization

我正在开发一个允许用户上传媒体并将他们的媒体组织到文件夹中的应用程序。用户可以确定他们创建的文件夹的“类型”：文件夹、视频、图像、文档等。

该应用程序将根据其类型以不同方式显示任何给定文件夹的内容；视频文件夹将显示带有播放列表的视频播放器，图像文件夹将显示画廊等。

为所有不同类型的文件夹创建单独的表，还是创建一个名为 FOLDERS 的大表并使用一列来分配类型会更好吗？

实际媒体本身由其自己的名为 MEDIA 的表处理，然后使用 media_ID 链接到文件夹中。

**简而言之：操作系统如何处理这个问题？是否有一个名为 FOLDERS 的主“表”，然后使用 file_ID 将各种文件链接到一个文件夹？**

**编辑：为了澄清，这里是“单文件夹表”方法将如何分解：**

```
FOLDERS
...................
id
user_ID
parent_ID
type
date

MEDIA
...................
id
type
file
date

FOLDERS_link_MEDIA
...................
id
folder_ID
media_ID 
```

因此，当用户将 MEDIA 添加到 FOLDER 时，会在 FOLDERS_link_MEDIA 表中创建连接两者的行。

在我看来，另一种选择是有几个“文件夹”表 FOLDERS_video、FOLDERS_audio、FOLDERS_images、FOLDERS_documents 等。然后是每个文件夹类型的随附链接表；FOLDERS_video_link_MEDIA 表、FOLDERS_images_link_MEDIA 等。

此外，文件的实际数据不会存储在 MEDIA 表中，“文件”列只存储一个 URL，该 URL 指向文件在 AWS S3 上的存储位置。

谢谢。

**编辑 2：SQL**

这就是我将如何遍历表。如果我要提取文件夹的内容，我将首先确定是否有任何子文件夹属于当前文件夹：

```
SELECT id FROM FOLDERS WHERE parent_ID='$this_folder_ID'; 
```

然后我会将这些文件夹显示给用户（顶部的文件夹！）。然后我会继续获取任何媒体内容：

```
SELECT media_ID FROM FOLDERS_link_MEDIA WHERE folder_ID='$this_folder_ID'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:24:35.223

一种方法当然是 FAT - 文件分配表。（存在变化）这告诉磁盘上文件的位置。

你所描述的听起来更像是一种“类型”而不是文件夹。您的 MEDIA 条目应该只有一个枚举类型 - 然后在您查询时它们都会被组合在一起。

例如，您没有描述是否可能有一个不在视频文件夹中的视频。

如果必须，则创建另一个类似于此的表“文件夹”：

```
FOLDER
------------
folder_id
type_id
name 
```

然后使用与 MEDIA 相同的 type_id 值。

制作文件夹树，如下所示：

```
FOLDER_TREE
-------------
parent_folder_id
child_folder_id 
```

将 MEDIA 添加到文件夹中，如下所示：

```
FOLDER_CONTENT
-----------------
folder_id
media_id 
```

# sql-server - 按多列分组而不使用聚合函数或使用 cfoutput/cfloop 分组？

> ID：15371291
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:29.837
> 
> 标签：sql-server, coldfusion, coldfusion-8

我仍在学习如何以我想要的方式从查询中获取我的结果组。我在网上查看了许多示例，但没有一个完全符合我的需求。我正在寻找从表中提取具有特定日期范围的一组记录的最直接方法，按公司名称对其进行子过滤，然后按 test_type 字段的计数对这些进行子过滤。它需要是动态的（测试类型是非动态的；这些是设置的并且不会改变），因为公司的数量在不断增长。这个问题与我一个月前在这里发布的另一个问题非常相似，只是现在我需要进一步（超级？）按服务日期（字段名称“dos”）过滤我的结果。这是我目前的代码（不工作；带有“donor_log.company”的错误

```
<cfquery name="invall" datasource="test">
SELECT company,dos, SUM(CASE WHEN test_type = 'UA' THEN 1 ELSE 0 END) AS UACount,
    SUM(CASE WHEN test_type = 'BA' THEN 1 ELSE 0 END) AS BACount,
    SUM(CASE WHEN test_type = 'Hair' THEN 1 ELSE 0 END) AS HairCount,
    SUM(CASE WHEN test_type = 'Bld' THEN 1 ELSE 0 END) AS BldCount,
    SUM(CASE WHEN test_type = 'DNA' THEN 1 ELSE 0 END) AS DNACount,
    SUM(CASE WHEN test_type = 'Pat' THEN 1 ELSE 0 END) AS PatCount,
    SUM(CASE WHEN test_type = 'Phys' THEN 1 ELSE 0 END) AS PhysCount,
    SUM(CASE WHEN test_type = 'Obs' THEN 1 ELSE 0 END) AS ObsCount
FROM donor_log
    WHERE dos BETWEEN '2013-03-01' AND '2013-03-13'
    GROUP BY dos
    ORDER BY dos DESC   
</cfquery>

<table border="1">
<tr>

    <th>Company</th>
    <th>UA</th>
    <th>Obs. UA</th>
    <th>BA</th>
    <th>Hair</th>
    <th>Blood</th>
    <th>DNA</th>
    <th>Pat.</th>
    <th>Phys.</th>
</tr>
<cfoutput query="invall" group="dos">
    #dateformat(invall.dos,"mm-dd-yyyy")#
<tr>

    <td>#invall.company#</td>
    <td>#invall.UACount#</td>
    <td>#invall.ObsCount#</td>
    <td>#invall.BACount#</td>
    <td>#invall.HairCount#</td>
    <td>#invall.BldCount#</td>
    <td>#invall.DNACount#</td>
    <td>#invall.PatCount#</td>
    <td>#invall.PhysCount#</td>
</tr>
</cfoutput>
</table> 
```

我知道它不是按公司过滤的，因为它不喜欢 select 语句中的两个非聚合列，但我想知道如何改变它以获得类似的东西（这个“网页”是一个发票摘要页面我们的各种客户，但供我们参考，而不是实际结算）：

```
 03-13-2013
           UA    BA    HAIR    BLD  (ETC...)
COMPANY A   3     2     0       0
COMPANY B   1     0     0       0
COMPANY C   2     4     0       0

    03-12-2013
           UA    BA    HAIR    BLD
COMPANY A   1     0     0       0
COMPANY C   2     1     1       0

    03-11-2013
           UA    BA    HAIR    BLD
COMPANY B   1     1     1       0
COMPANY D   4     2     2       1 
```

...依此类推，直到 2013 年 3 月 1 日。我已经在另一个页面上放置了代码，我可以重用这些代码以允许根据最终用户的偏好进行动态日期选择，因此三月日期是任意的。我应该在这里使用子查询吗？以不同的方式/排列使用 cfoutput/cfloop？一如既往地期待您的回复和提前致谢！:)

PS：使用 ColdFusion 8 和 SQL Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:43:44.170

您可以采用的一种仅对 HTML 进行操作的方法可以在不变得过于繁重的情况下为您提供类似的结果，如下所示：

```
<cfset variables.lastDate="">

<table border="1">
<tr>

    <th>Company</th>
    <th>UA</th>
    <th>Obs. UA</th>
    <th>BA</th>
    <th>Hair</th>
    <th>Blood</th>
    <th>DNA</th>
    <th>Pat.</th>
    <th>Phys.</th>
</tr>
<cfoutput query="invall">
<cfif not invall.dos is variables.lastdate>
    <tr><td colspan=9>#dateformat(invall.dos,"mm-dd-yyyy")#</td></tr>
</cfif>
<tr>

    <td>#invall.company#</td>
    <td>#invall.UACount#</td>
    <td>#invall.ObsCount#</td>
    <td>#invall.BACount#</td>
    <td>#invall.HairCount#</td>
    <td>#invall.BldCount#</td>
    <td>#invall.DNACount#</td>
    <td>#invall.PatCount#</td>
    <td>#invall.PhysCount#</td>
</tr>
<Cfset variables.lastdate=invall.dos>
</cfoutput>
</table> 
```

我过去曾使用过这样的样本，其中分组不实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:30:10.643

您实际上与 cfoutput 的 group 属性非常接近。你只是没有完成你开始的事情。我想你可能想要这样的东西。

```
<cfoutput query="invall" group="dos">
    output data for this grouping
    <cfoutput group="company">
        output data for this grouping
        <cfoutput>
            output ungrouped data
        </cfoutput>
    </cfoutput>
</cfoutput> 
```

您的查询必须由 dos desc, company 订购。

# msmq - NServiceBus - “类型未在序列化程序中注册。”

> ID：15371292
> 
> 赞同：1
> 
> 时间：2013-03-12T20:18:30.793
> 
> 标签：msmq, nservicebus

NServiceBus 菜鸟在这里。我创建了一个简单的 Winforms 应用程序，它向我的本地队列发送消息。它在本地工作。当我在本地运行它时，我可以在我的队列中看到测试消息。没有抛出异常。

但是，当我在不同 AD 域的机器上运行相同的示例应用程序时，它会引发以下异常。

![在此处输入图像描述](../Images/632d309f634843d4e2af43c9f8f54cf9.png)

这是代码。

```
public partial class Form1 : Form
{
    private IBus bus;

    public Form1()
    {
        InitializeComponent();
        bus = Configure.With()
            .UnityBuilder()
            .XmlSerializer()
            .MsmqTransport()
            .UnicastBus()
            .ImpersonateSender(true)
            .SendOnly();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            bus.Send("girish@my-pc-name.domain.net", new TestMessage() { OrderId = "99" });
            label1.Text = "Message sent successfully!";
        }
        catch (Exception ex)
        {
            label1.Text = ex.ToString();
            //throw;
        }
    }
}

[Serializable]
public class TestMessage : IMessage
{
    public string OrderId { get; set; }
} 
```

我什至决定传递一个字符串数组作为消息，它说“System.String 没有在序列化程序中注册......”

所以我知道问题不是 TestMessage 类型。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:03:57.630

这是一个防火墙问题。1801 端口被封锁。我必须与基础设施和网络支持团队合作才能解决这个问题。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:31:40.660

您看到的错误表明 NServiceBus 找不到合适的程序集。您的消息所在的程序集。不知道您在用字符串做什么，因为您使用的是 IMessage。您使用的是 NServiceBus 2.x 吗？

除此之外，最好在配置中指定要发送到的队列，而不是在代码中。从[文档](http://support.nservicebus.com/customer/portal/articles/852419-hosting-nservicebus-in-your-own-process)

```
<UnicastBusConfig>
  <MessageEndpointMappings>
    <add Messages="MessageDLL" Endpoint="DestinationQueue@TargetMachine"/>
  </MessageEndpointMappings>
</UnicastBusConfig> 
```

我不知道你到底在做什么，但你不是从一个 AD 域发送到另一个域吗？域之间是否存在信任，因此您可以将消息从域 A 上的 MSMQ 发送到域 B 上的 MSMQ？

# c++ - 在 iOS 上使用 OpenCV 跟踪检测到的人脸

> ID：15371296
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:43.530
> 
> 标签：c++, ios, objective-c, opencv, computer-vision

**首先，简要介绍一下背景知识**：我对 iOS 还很陌生，正在尝试在 iOS 设备上使用 OpenCV 检测人脸。我能够使用此处的示例代码使 iOS openCV 示例代码正常工作：

[http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing)

这会产生一个有用的方法，该方法为从相机轮询的每一帧调用：

```
- (void)processImage:(Mat&)image;
{
    // Do some OpenCV stuff with the image
    Mat image_copy;
    cvtColor(image, image_copy, CV_BGRA2BGR);

    // invert image
    bitwise_not(image_copy, image_copy);
    cvtColor(image_copy, image, CV_BGR2BGRA);
} 
```

在此示例中，它成功地反转了来自相机的帧并显示在设备上。这很有用，因为我可以将我赢得的 OpenCV C++ 代码代入此处，用于我想对帧进行的任何图像处理。

现在，我希望实现面部跟踪。在 OpenCV 2.4.2 及更高版本中，有一个基于检测的跟踪器的头文件，称为“opencv2/contrib/detection_based_tracker.hpp”。它定义了一个名为 DetectionBasedTracker 的类。它定义的跟踪机制在后台使用 haar 级联来检测对象。我希望使用这种时间跟踪方法而不是逐帧人脸检测的原因是跟踪比 OpenCV Haar 实现快得多。这里演示了如何实现它的指南：http: [//bytesandlogics.wordpress.com/2012/08/23/detectionbasedtracker-opencv-implementation/](http://bytesandlogics.wordpress.com/2012/08/23/detectionbasedtracker-opencv-implementation/)

我成功地在 Android 设备上用 C 语言实现了这段代码。主要代码如下：

```
DetectionBasedTracker::Parameters param;
param.maxObjectSize = 400;
param.maxTrackLifetime = 20;
param.minDetectionPeriod = 7;
param.minNeighbors = 3;
param.minObjectSize = 20;
param.scaleFactor = 1.1;

// The object needs to be defined using the constructor with the above 
// declared parameter structure. Then the object.run() method is called 
// to initialize the tracking.
DetectionBasedTracker obj = DetectionBasedTracker("haarcascade_frontalface_alt.xml",param);
obj.run(); 
```

因此，对于每一帧，我可以处理它以使用以下线条检测人脸的边界框：

```
obj.process(gray_frame);
vector< Rect_<int> > faces;
obj.getObjects(faces); 
```

**现在，问题。**在 Objective C 中，如何创建“DetectionBasedTracker obj”对象，以便它可以在“- (void)processImage:(Mat&)image;”中使用 方法？我不知道是什么调用了 processImage 方法，所以我现在不知道是否可以通过这种方式。有没有办法使“DetectionBasedTracker obj”全局化？如果是这样，我该怎么做，这是正确的做法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:01:50.660

由于您的视图控制器实现是在objective-c++中（它在您的第一个链接上这么说），并且如果您使用Apple LLVM 2.0或更高版本作为编译器，您可以在obj-c++实现文件中的任何地方使用c++代码（扩展名.mm） . 导入 c++ 头文件并在那里声明所有类范围的变量，而不是像这样在接口文件中声明：

```
#import "ViewController.h"
#import "DetectionBasedTracker.h"

//class extension in your implementation file where your c++ variables go
@interface ViewController()
{
    DetectionBasedTracker myTracker();
}
@end

@implementation ViewController 

#pragma mark - Protocol CvVideoCameraDelegate

- (void)processImage:(Mat&)image;
{
    //...
    myTracker.doSomething();
    //...
}

@end 
```

# ruby-on-rails - rails调用类方法

> ID：15371298
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:45.853
> 
> 标签：ruby-on-rails, methods, console

我有我的 Rails 应用程序。我有课

```
 class ParserPlugin < ApplicationController
   def self.loadPlugins
     Dir.foreach("/plugins") do |f|
       if f != '.' and f != '..'
         load("/plugins" + f.to_s)
       end
     end
   end
   def self.createplugin
     @@plugins << self.new
   end
 end 
```

我从“rails c”开始项目。如果我尝试调用“ParserPlugin.loadPlugins”，它会显示

```
NameError: uninitialized constant ParserPlugin 
```

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:24:34.137

确保文件名与类名匹配。文件名：

```
class ParserPlugin < ... 
```

应该是`parser_plugin.rb`否则你会得到错误

```
NameError: uninitialized constant ParserPlugin 
```

我假设文件在，因为它是从类`/app/controllers`继承的。`ApplicationController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:24:50.980

Rails 使用延迟加载，这意味着它会在常量出现时对其进行解析并查找匹配的文件。并非所有的类都在启动时加载——这发生在您第一次尝试访问时`ParserPlugin`。在这种情况下，Rails 正在寻找`parser_plugin.rb`在您的自动加载目录之一中调用的文件（可能`controllers`基于您设置的继承）。

附注：这很可能不应该继承自`ApplicationController`. 如果它不是控制器，则不应将其连接到您的控制器。把它放在别的地方。

# heroku - Heroku：在登台站点上运行不同的网络服务器进程？

> ID：15371300
> 
> 赞同：4
> 
> 时间：2013-03-12T20:18:47.383
> 
> 标签：heroku

我想在我的一个登台站点上运行不同的网络服务器，它提供了对调试更友好的错误处理。我想知道是否/如何在无需更改我的登台和生产部署之间的 Procfile 的情况下实现这一点。

我试过这个：

```
web: newrelic-admin run-program python manage.py run_gunicorn -b 0.0.0.0:$PORT -w 4 -k gevent 
debug: newrelic-admin run-program python manage.py runserver_plus 0.0.0.0:$PORT --threaded 
```

然后将 web 缩放到 0 并调试到 1，但是从[这篇文章](https://devcenter.heroku.com/articles/procfile)中我现在清楚地知道*web*是一个特殊的保留关键字，它是获取 http 请求的唯一进程。那么有什么方法可以管理这个而不必维护一个单独的分支或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:57:14.587

你当然可以。

正如您所注意到的，您需要使用“web”进程类型。

请记住，进程类型实际上只是命名命令：“每个进程类型都是在启动该进程类型的测功机时执行的命令的声明”

你控制命令。

在一个小测试应用程序中，我刚刚创建了一个 bin 目录，添加了一个文件，并赋予它执行权限 - 像这样：

```
mkdir bin
vi bin/go.sh
chmod a+x bin/go.sh 
```

内容如下所示：

```
echo $*
echo $FOOBAR
thin --rackup config.ru start $* 
```

然后我修改了我的 Procfile 看起来像这样：

```
web: ~/bin/go.sh --port $PORT 
```

我还在我的应用程序中添加了一个配置变量：

heroku 配置：添加 FOOBAR=123

然后我在开始后查看了日志

`2013-03-14T11:49:42+00:00 heroku[web.1]: Starting process with command `~/bin/go.sh --port 47302` 2013-03-14T11:49:43+00:00 app[web.1]: --port 47302 2013-03-14T11:49:43+00:00 app[web.1]: 123 2013-03-14T11:49:44+00:00 heroku[web.1]: State changed from starting to up`

出色的。你能看到发生了什么吗？

*   当我启动一个 web dyno 时，Heroku 查找了 web 进程类型并执行了命令
*   该命令启动了我的服务器，但在此之前，它打印了发送给它的参数（--port XXX）和 FOOBAR 环境变量（将由 config var 设置）

所以我认为这就是你所需要的。只需编写一个 bash 脚本，根据配置变量，在暂存和生产上执行不同的命令。在暂存时，设置配置变量。在生产中，不要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:01:01.673

您可以创建一个单独的 Heroku 应用程序作为您的暂存环境并使用相同的代码库（本地 git 存储库）。请参阅[管理应用程序的多个环境](https://devcenter.heroku.com/articles/multiple-environments)

请注意，您询问的具体任务涉及更改`Procfile`，因此您可能需要使用分支。在这种情况下，您可以像这样推送分支（假设按照上面的指南有多个 env）：

```
$ git push heroku-staging <branch_name>:master --app staging_app_name 
```

# makefile - 如果文件不存在，如何复制文件并创建路径目标文件夹？

> ID：15371302
> 
> 赞同：0
> 
> 时间：2013-03-12T20:18:50.797
> 
> 标签：makefile

我正在尝试将文件夹从源复制到目标。目标文件夹并不总是存在。

如果目标文件夹不存在，哪个复制命令会创建它？

例子：

```
$(CP) $(HOME)/text.txt $(DEST)/dir1/dir2/text.txt 
```

文件夹`dir1`并不`dir2`总是存在，应该创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:35:35.023

你用的是什么外壳？

无论如何，似乎没有很酷的捷径。最好的方法是简单地将 和 结合`mkdir`起来`cp`。按照你的例子：

`mkdir -p dir1/dir2 && cp ~/text.txt ~/dir1/dir2`

此命令会将 test.txt 放在 dir2 中。希望这可以帮助！

顺便说一句，语法`cp`是`cp [source] [destination dir]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:09:55.080

如果您使用的是最新版本的 GNU make，那么您可以使用一个巧妙的技巧来或多或少地自动为任何目标创建目录：

```
.SECONDEXPANSION:
%/.:
        mkdir -p -- "$*" 
```

现在，对于要创建目标目录的每个目标，添加“| $$(@D)/”。作为先决条件：

```
$(TARGET) : $(PREREQUISITES) | $$(@D)/.
        ... 
```

# asp.net-mvc-4 - 无法用数据初始化可观察数组

> ID：15371307
> 
> 赞同：1
> 
> 时间：2013-03-12T20:19:07.200
> 
> 标签：asp.net-mvc-4, knockout.js

我是淘汰赛的新手，我有一点问题。我有 ASP.Net MVC 4 应用程序、剃刀视图和淘汰视图模型。我使用 web api 控制器来获取数据，我无法用它初始化 ko.observableArray。

**获取数据的控制器函数：**

```
public IEnumerable<TaskModel> GetTasks()
{
    var tasks = new[] { new TaskModel { Name = "asd", Deadline = DateTime.Now, Id = new Guid() }, new TaskModel { Name = "asdfasdf", Deadline = DateTime.Now, Id = new Guid() } };
    return tasks;
} 
```

**淘汰视图模型**（对控制器的调用正确，数据变量不为空）

```
function TasksList() {
    var self = this;

    self.tasks = ko.observableArray([]);

    self.load = function() {
        $.ajax({
            type: "GET",
            url: "http://localhost:11701/api/TaskApi",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(data) {
                self.tasks(data);
            },
            error: function(error) {
                alert(error.status + "<--and--> " + error.statusText);
            }
        });
    };
}

var tasksList = new TasksList();
tasksList.load();
ko.applyBindings(tasksList); 
```

**看法**

```
@{
    ViewBag.Title = "Index";
}

@Scripts.Render("~/Scripts/jquery-1.8.3.js")
@Scripts.Render("~/Scripts/knockout-2.2.1.debug.js")
@Scripts.Render("~/Scripts/knockout.mapping-latest.debug.js")
@Scripts.Render("~/Scripts/Models/TasksList.js")

<h2>Tasks</h2>

<table>
    <tr>
        <th>Name
        </th>
        <th>Priority
        </th>
        <th>Deadline
        </th>
        <th>CreatedOn
        </th>
        <th></th>
    </tr>

    <tbody data-bind="foreach: tasks" >
        <tr>            
            <td data-bind="text: Name"></td>
            <td data-bind="text: Priority"></td>
            <td data-bind="text: Deadline"></td>
            <td data-bind="text: CreatedOn"></td>
        </tr>
    </tbody>
</table> 
```

我尝试了 ko.mapping.fromJS 和 ko.mapping.fromJSON ，但它仍然不起作用；知道我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:29:26.863

在我看来，你的问题是你`ko.applyBindings`的 HTML 之前。页面加载后调用该代码：

```
$(function() {
    var tasksList = new TasksList();
    tasksList.load();
    ko.applyBindings(tasksList);
}); 
```

或者至少将您的 javascript 代码移动到正文的末尾

# mysql - 迄今为止增加 5 天的增量

> ID：15371310
> 
> 赞同：1
> 
> 时间：2013-03-12T20:19:11.830
> 
> 标签：mysql, sql, database, date-arithmetic

我只是想在我的查询中添加一个额外的 5 天。例如，如果我的`LastDate`表格列中的数据`2013-03-31`作为日期，那么添加 5 天应该会在我的查询中显示它，因为它的日期比下面的日期更大。它不会出现，我很困惑为什么。任何帮助，将不胜感激。

```
SELECT * FROM `ts_inventory` 
WHERE `ts_inventory`.`Quantity` > 0 
AND `ts_inventory`.`LastDate` > DATE_ADD(2013-01-22, INTERVAL 5 DAY) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:20:58.820

您缺少日期周围的引号：

```
DATE_ADD(2013-01-22, INTERVAL 5 DAY) 
```

应该

```
DATE_ADD('2013-01-22', INTERVAL 5 DAY) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:21:57.447

您应该在日期前后使用引号。

试试这个

```
 SELECT * FROM `ts_inventory` 
 WHERE `ts_inventory`.`Quantity` > 0 
AND `ts_inventory`.`LastDate` > DATE_ADD('2013-01-22', INTERVAL 5 DAY) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:24:56.597

您需要在日期周围加上引号以使其成为有效的日期变量。

IE`DATE_ADD('2013-01-22', INTERVAL 5 DAY)`

编辑：忍者。

# php - 在学说2中加入两个表时出现意外结果

> ID：15371312
> 
> 赞同：0
> 
> 时间：2013-03-12T20:19:16.307
> 
> 标签：php, symfony, doctrine

我正在对两个表**Demand**和**Inventory**执行连接操作。需求表**[demand1, demand2]**中的 2 条记录对应库存表**[inventory1]**中的相同记录。

```
$em = $this->getDoctrine()->getEntityManager();
$countQuery = $em->createQueryBuilder()
              ->select('d,i')
              ->from('APIBundle:Demand', 'd')
              ->innerJoin('APIBundle:Inventory', 'i', Join::WITH, 'd.inventoryId = i.inventoryId') 
```

我期待查询返回**[demand1, inventory1, demand2, inventory1]** 但实际上查询返回**[demand1, inventory1, demand2]**

有人可以告诉我我做错了什么吗？

# c# - 如何为默认和用户配置设置两个具有相同设置名称的 setting.settings 文件

> ID：15371315
> 
> 赞同：0
> 
> 时间：2013-03-12T20:19:21.253
> 
> 标签：c#, configuration, .net-3.5, default, settings.settings

我想要两个 .settings 文件。一个为设置的默认值，另一个为用户选择。我希望这两个设置文件包含相同的设置名称，但不一定是相同的值。

也许解决方案不需要两个 .settings 文件，但这是我唯一的想法。

简而言之，我希望这能够建议用户在为他的使用选择错误设置后选择返回默认值。

**编辑 ：**

我使用visual studio 2010，它在一个win Form项目中

只是关于当用户选择更改了setting.settings文件时如何恢复默认配置（我如何保存这些默认配置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:54:23.800

每个用户设置（或任何设置）的`SettingsProperty`对象都可以通过类`Properties`上的集合获得`Settings`。然后，您可以查看该`DefaultValue`属性以获取默认值（为特定用户设置之前的值。例如，如果您通常像这样访问您的属性：

```
var value = Properties.Settings.Default.MySetting; 
```

然后你可以得到这样的默认值：

```
var defaultValue = Properties.Settings.Default.Properties["MySetting"].DefaultValue; 
```

默认值是您在 Visual Studio 的设置编辑器中设置的值。

# 更新：

我不知道获取默认值的任何其他方式。为了避免字符串属性名称，您可以编写一个扩展方法来获取基于编译器检查表达式的默认值：

```
public static class SettingsExtensions
{
    public static T GetSettingDefaultValue<T, T2>(this T2 settings,
        Expression<Func<T2, T>> expression) where T2 : ApplicationSettingsBase
    {
        MemberExpression memberExpr = expression.Body as MemberExpression;
        return (T)settings.Properties[memberExpr.Member.Name].DefaultValue;
    }
} 
```

并得到这样的默认值：

```
var defaultValue = Settings.Default.GetSettingDefaultValue(s => s.MySetting); 
```

# javascript - 在 jquery 中使用 ajax 传递标头

> ID：15371319
> 
> 赞同：0
> 
> 时间：2013-03-12T20:19:29.647
> 
> 标签：javascript, jquery

我在 jquery 的 ajax 调用中传递标头时遇到问题。

```
$.ajax({
    url: '/resources/ajax/customize.aspx?' + qs + '&nocache=' + Math.random(),
    contentType: "application/json",
    headers: values,
    context: $this,
    cache: false,
    success: function(data) {
          //do stuff here
    }
}); 
```

在大多数情况下，它会正确获取标头值，但有时它不会获取任何标头值。我确保“值”变量包含数据。我想知道是否有任何特定情况下标头不会在 ajax 中传递？

**更新：** 我试过了：

```
 $.ajax({
     url: '/resources/ajax/customize.aspx?' + qs + '&nocache=' + Math.random(),
     contentType: "application/json",
     beforeSend: function(xhr) { xhr.setRequestHeader('values',values); },
     //headers: values,
     context: $this,
     cache: false,
     success: function(data) {
                  //do stuff here
     }
 }); 
```

没有运气。

**更新 2**

想通了问题。有一个带有换行符的 URL 变量，因此换行符导致不传递标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:48:14.327

我面临着同样的问题。通过使用 jquery（或者在 JS 中执行） $.trim() 方法摆脱了换行符。就我而言，我知道 \n\r 不会合法地成为价值的一部分。这必须检查修剪以修复它。

# objective-c - NSMutableArray 错误，一直说错误越界

> ID：15371323
> 
> 赞同：0
> 
> 时间：2013-03-12T20:19:34.057
> 
> 标签：objective-c

我真的不能像他们说的那样透过树木看到森林。首先，这是我的代码：

```
 -(NSMutableArray*)getWaranty:(NSString*)string start:(NSString*)start and:(NSString*)end{
NSMutableArray *waranties = [[NSMutableArray alloc] init];
NSRange startRange = [string rangeOfString:start];
NSRange valueRange;
valueRange.location = startRange.location + startRange.length; //beginpunt
NSRange eindRange = [string rangeOfString:end];
valueRange.length = eindRange.location - valueRange.location;
NSString *result = [[NSString alloc]init];
result = nil;
if(valueRange.location != NSNotFound){
    if(valueRange.length != NSNotFound){
        result = [string substringWithRange:valueRange];
        NSString *testResult = [[NSString alloc]init];
        testResult = result;

        NSString* beginTrim = [[NSString alloc]init];
        NSString* beginTrim1 = [[NSString alloc]init];
        NSString* beginTrim2 = [[NSString alloc]init];
        NSString* beginTrim3 = [[NSString alloc]init];
        NSString* beginTrim4 = [[NSString alloc]init];
        NSString* beginTrim5 = [[NSString alloc]init];
        NSString* beginTrim6 = [[NSString alloc]init];
        NSString* beginTrim7 = [[NSString alloc]init];
        NSString* beginTrim8 = [[NSString alloc]init];
        NSString* beginTrim9 = [[NSString alloc]init];
        NSString* beginTrim10 = [[NSString alloc]init];
        beginTrim = [testResult stringByReplacingOccurrencesOfString:@"<li class=\"TopTwoWarrantyListItem\">"withString:@""];
        beginTrim1 = [beginTrim stringByReplacingOccurrencesOfString:@"<b>"withString:@""];
        beginTrim2 = [beginTrim1 stringByReplacingOccurrencesOfString:@"<li>"withString:@""];
        beginTrim3 = [beginTrim2 stringByReplacingOccurrencesOfString:@"</li>"withString:@""];
        beginTrim4 = [beginTrim3 stringByReplacingOccurrencesOfString:@"</b>"withString:@""];
        beginTrim5 = [beginTrim4 stringByReplacingOccurrencesOfString:@"<a href=\"javascript:SelectTabFromLink(5);\" id=\"SeeWarrantyTab\" class=\"uif_link\">"withString:@""];
        beginTrim6 = [beginTrim5 stringByReplacingOccurrencesOfString:@"</a>"withString:@""];
        NSString *lang =[[NSString alloc]init];
        lang= @"nl";
        if(lang == @"nl"){
            beginTrim7 = [beginTrim6 stringByReplacingOccurrencesOfString:@".  Raadpleeg het tabblad Garantie voor meer informatie."withString:@""];
        }
        beginTrim8 = [beginTrim7 stringByReplacingOccurrencesOfString:@"</div>"withString:@""];
        beginTrim9 = [beginTrim8 stringByReplacingOccurrencesOfString:@"\r\n"withString:@""];
        beginTrim10 = [beginTrim9 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSString *warant = [[NSString alloc]init];
        NSString *theWarant = [[NSString alloc]init];
        NSString *hoev = [[NSString alloc]init];
        NSString *lic = [[NSString alloc]init];
        NSString *datum = [[NSString alloc]init];
        if(lang == @"nl"){
            //split met garantie
            warant = [beginTrim10 stringByReplacingOccurrencesOfString:@"  garantie met einddatum op"withString:@""];
            NSArray *array = [[NSArray alloc]init];
            array = [warant componentsSeparatedByString:@"                                                                                                                 "];
            NSInteger hoeveel = [array count];
            if(hoeveel != 0){
                hoev = [NSString stringWithFormat:@"%d",hoeveel];
                [waranties addObject:hoev];
                for(int i = 0; i < hoeveel; i++){
                    if([array objectAtIndex:i] != NULL){
                        theWarant = [array objectAtIndex:i];
                        NSArray *specArray = [[NSArray alloc]init];
                        specArray = [theWarant componentsSeparatedByString:@"  "];
                        lic = [specArray objectAtIndex:0];
                        datum = [specArray objectAtIndex:1];
                        [waranties addObject:lic];
                        [waranties addObject:datum];
                        NSLog(@" de waraiens 1 :%@", [waranties objectAtIndex:0]);
                        NSLog(@" de waraiens 1 :%@", [waranties objectAtIndex:1]);
                    }
                    else{

                    }

                }
            NSLog(@" de waraiens 1 :%@", [waranties objectAtIndex:0]);
            NSLog(@" de waraiens 2 :%@", [waranties objectAtIndex:1]);
            NSLog(@" de waraiens 3 :%@", [waranties objectAtIndex:2]);
            NSLog(@" de waraiens 4 :%@", [waranties objectAtIndex:3]);
            NSLog(@" de waraiens 5 :%@", [waranties objectAtIndex:4]);
            return waranties;
            }
        }
    }
} 
```

}

代码应返回如下内容：

2013-03-12 21:12:51.783 DellSupportApp[6254:c07] de waraiens 1:2

2013-03-12 21:12:51.785 DellSupportApp[6254:c07] de waraiens 2：戴尔业务支持/专业支持

2013-03-12 21:12:51.785 DellSupportApp[6254:c07] de waraiens 3:30/07/2009

2013-03-12 21:12:51.785 DellSupportApp[6254:c07] de waraiens 4：下一个工作日

2013-03-12 21:12:51.786 DellSupportApp[6254:c07] de waraiens 5:30/07/2009

但棘手的是。它只能像 10 次中的 1 次一样工作...在此函数中调用该方法：

```
-(NSMutableArray*) parseIt: (NSString*) toPars {
NSMutableArray *waranties = [[NSMutableArray alloc]init];
NSString *beginTitle = @"<title>";
NSString *eindTitle = @"</title>";
NSString *title = [self getTitle:toPars start:beginTitle and:eindTitle];
if(title != NULL){
    NSLog(@"de title = %@", title);
    [waranties addObject:title];
    NSString *try = [waranties objectAtIndex:0];
    NSLog(@"de title = %@", try);
}

NSString *beginWar = @"<div class=\"TopTwoWarrantySummaryDiv\">";
NSString *eindWar = @"<div class=\"RequestWarrantyExtensionDiv\">";
NSMutableArray *warrant = [[NSMutableArray alloc]init];
warrant = [self getWaranty:toPars start:beginWar and:eindWar];
if(warrant != NULL){
    [waranties addObject:warrant];
     NSLog(@" de warant %@ ", [waranties objectAtIndex:1]);
}
return waranties; 
```

我觉得它进入这里显示的第一种方法非常麻烦，大约 10 次，而我只问过一次......我现在已经研究了 4 个多小时的问题，厌倦了一些错误，实际上错误主要是没有显示...

请指出我的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:29:20.243

查看您的代码，我担心它有多脆弱。它正在寻找一系列空间来分隔保修，但这真的是分割数据的最佳方式吗？

除此之外，您还在对这些分裂做出假设。例如：

```
specArray = [theWarant componentsSeparatedByString:@"  "]; 
```

已分配并且您检查索引 0 和 1，但永远不要确保数组中有 2 个值。

您`NSLog`在底部的 s 也不会在处理数组边界之前检查它们。

众所周知，空格是数据的不良分隔符。如果您正在寻找解析 html 的工具，可能会更好地完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:29:32.057

如果waranties在执行之前是一个空数组，则此语句将失败并超出范围：

```
if(warrant != NULL){
    [waranties addObject:warrant];
     NSLog(@" de warant %@ ", [waranties objectAtIndex:1]);
} 
```

数组中的第一个对象的索引为 0，而不是 1。

每次找不到标题时都会发生这种情况。如果总是有标题，这可能不是您的问题。但是，编码更节省：

```
if(warrant != NULL){
    [waranties addObject:warrant];
     NSLog(@" de warant %@ ", [waranties objectAtIndex:[caranties count]-1]);
} 
```

或者可能更好：

```
if(warrant != NULL){
    [waranties addObject:warrant];
     NSLog(@" de warant %@ ", [waranties lastObject]);
} 
```

无论如何，由于这只是调试输出，它肯定不是问题的根本原因。由于其格式化功能，我刚刚选择了答案而不是评论。

# xcode - 服务（OS X）不会按需自动启动，说我的操作系统版本太旧了

> ID：15371326
> 
> 赞同：1 1
> 
> 时间：2013-03-12T20:19:55.450
> 
> 标签：xcode, macos, osx-lion, osx-mountain-lion, deployment-target

我有一个文本插入 OS X 服务（[由 Mark Aufflick 创建](https://github.com/aufflick/BOFH-Excuse-Service)，[我一直在破解它](https://github.com/boredzo/BOFH-Excuse-Service)）给我带来了一个奇怪的问题。

该服务是一个 .service 应用程序，安装在 ~/Library/Services 中。pbs 已正常运行以重新散列服务列表。

问题是，如果我在服务尚未运行时选择该服务，我会收到以下错误消息：

![“无法使用 'BOFH Excuse Server' 服务，因为 '(null)' 应用程序需要更新版本的 Mac OS X。”  “尝试使用旧版本的 '(null)'，或升级到新版本的 Mac OS X。”"></p> <p>我使用的是 10.7.5。Mark 的原始版本需要 10.8，但我将部署目标更改为 10.7，清理并构建，并且我系统上此服务的唯一构建是使用 10.7 设置构建的（项目中的 Info.plist 也用作 <code>LSMinimumSystemVersion</code 的值>，所以我可以在那里看到它）。</p> <p>如果我从 Finder 手动启动服务，我不会遇到这个问题。服务启动并运行，然后我可以从其他应用程序调用它.</p> <p>除了推销员开车撞到CPU板的可能性之外，](../Images/2b1bb38f297811a54ff9cd3548d9a105.png)

# 山狮上的 sed 问题

我正在尝试删除文件中的一行，如下所示：

在 CNAME mydomain.com 中测试 1800。

我在 Mountain Lion 上使用 sed 并且我正在尝试以下操作，但我一直没有收到任何错误，但是该行没有被删除。

```
sed -i -e '/$regex/d' $file 
```

或者

```
sed -i "" -e '/$regex/d' $file 
```

$regex 是包含上述行的表达式，$file 是该行所在文件的名称。

任何帮助将不胜感激。

* * *

 <data id="15371331"># 

在您的 web.config 中，`</system.web>`添加如下代码后：

```
<location path="images">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

并重复所有其他所需的数据，如 css、javascript 等。

[xcode](/tags/xcode "show questions tagged 'xcode'")[macos](/tags/macos "show questions tagged 'macos'")[osx-lion](/tags/osx-lion "show questions tagged 'osx-lion'")[osx-mountain-lion](/tags/osx-mountain-lion "show questions tagged 'osx-mountain-lion'")[deployment-target](/tags/deployment-target "show questions tagged 'deployment-target'")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:47:05.163

也许它没有得到 FCC 的批准？</data>

# macos - 山狮上的 sed 问题

> ID：15371327
> 
> 赞同：0
> 
> 时间：2013-03-12T20:19:59.727
> 
> 标签：macos, shell, unix

我正在尝试删除文件中的一行，如下所示：

在 CNAME mydomain.com 中测试 1800。

我在 Mountain Lion 上使用 sed 并且我正在尝试以下操作，但我一直没有收到任何错误，但是该行没有被删除。

```
sed -i -e '/$regex/d' $file 
```

或者

```
sed -i "" -e '/$regex/d' $file 
```

$regex 是包含上述行的表达式，$file 是该行所在文件的名称。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:58:54.790

这是[Sed 命令 find and replace in file ...](https://stackoverflow.com/questions/5171901)的几乎重复，最便携的答案与那里相同：

```
sed -e '/$regex/d' $file >$file.tmp && mv $file.tmp $file 
```

...因为那里给出的原因和优势。当您担心可移植性时，[POSIX 规范](http://pubs.opengroup.org/onlinepubs/009695399/)是一个很好的资源，因为它描述了一个常见的 unix 命令子集，这些命令通常受到令人沮丧的限制，但它非常可靠地存在于所有可能遇到的 unix 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:07:00.503

在我看来，最可能的问题是你有一个 shell 变量`$regex`，其中包含要搜索和删除的模式，但是你的单引号阻止了 shell 扩展它。您可能需要使用：

```
sed -i .bak -e "/$regex/d" $file 
```

`sed`（ Lion 和 Mountain Lion 上的BSD支持该`-i`选项。手册页建议不要使用零长度备份扩展。）

> `-i extension`
> 
> 就地编辑文件，以指定的扩展名保存备份。如果给出零长度扩展名，则不会保存备份。不建议在就地编辑文件时提供零长度扩展名，因为在磁盘空间耗尽等情况下，您可能会面临损坏或部分内容的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:24:54.943

Mountain Lion (v10.8.2) 适用于`sed -i "" -e '/$regex/d' $file`

```
[Mar 12 17:22] [jnovack@growlithe ~]$ more test.php
<?php
echo "Test php echo 1";
echo "Test echo 2";
?>
[Mar 12 17:22] [jnovack@growlithe ~]$ sed -i "" -e "/php/d" test.php
[Mar 12 17:22] [jnovack@growlithe ~]$ more test.php
echo "Test echo 2";
?> 
```

# variables - SASS 忽略在 if 语句中定义的变量

> ID：15371332
> 
> 赞同：27
> 
> 时间：2013-03-12T20:20:32.143
> 
> 标签：variables, if-statement, sass

我有一个名为 style.scss 的文件，其代码如下：

```
@import 'variables';

body {
    color: $text-color;
    background: $background-color;
} 
```

还有一个名为 _variables.scss 的部分：

```
$colorscheme: white;

@if $colorscheme == white {
    $text-color: #333;
    $background-color: #fff;
}
@else {
    $text-color: #ccc;
    $background-color: #333;
} 
```

if 语句正常工作，但内部定义的变量不起作用。当我尝试编译它时，我不断得到：

> 语法错误：未定义变量：“$text-color”。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-12T21:19:19.320

这是完全可以预料的。变量对它们有*作用域*。如果您在控制块（如`if`语句）内定义它们，那么它们将在外部不可用。所以，你需要做的是像这样在外面初始化它：

```
$text-color: null;
$background-color: null;
@if $colorscheme == white {
    $text-color: #333;
    $background-color: #fff;
}
@else {
    $text-color: #ccc;
    $background-color: #333;
} 
```

或者...

```
$text-color: #ccc;
$background-color: #333;
@if $colorscheme == white {
    $text-color: #333;
    $background-color: #fff;
} 
```

虽然使用这样的`if()`函数会不那么冗长：

```
$text-color: if($colorscheme == white, #333, #ccc);
$background-color: if($colorscheme == white, #fff, #333); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-05T17:45:23.353

虽然这个例子*更加*冗长，但它消除了设置两个空变量的需要：

```
@if $colorscheme == white {
  $text-color: #333 !global;
  $background-color: #fff !global;
} @else {
  $text-color: #ccc !global;
  $background-color: #333 !global;
} 
```

@cimmanon's 2nd and 3rd examples are much better, though.

# jquery - 覆盖默认的jquery css？

> ID：15371333
> 
> 赞同：0
> 
> 时间：2013-03-12T20:20:32.670
> 
> 标签：jquery, css, jquery-ui

我正在尝试缩小 jQuery UI 滑块小部件的句柄。我创建了这个 CSS：

```
.ui-slider-handle {
    width: 10px;
} 
```

DOM 检查员告诉我的内容被忽略了，取而代之的是 jQuery UI CSS。

我怎样才能给我更高的优先级？标识滑块句柄的唯一方法是，因为它是由 jQuery 函数 (.slider()) 生成的，并且实际上不在 .html 文件中，所以在使用jQuery 生成它*之后*，使用代码为其分配一个 ID，并且然后希望 CSS 应用，或者使用代码手动添加宽度属性。这些看起来很不雅。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:22:43.453

它被 jQuery UI 的 CSS 覆盖，因为有更多`specificity`. 如果您查看他们拥有的代码，您只需要拥有更多代码，它就会覆盖它。

```
html body .ui-slider .ui-slider-handle {} 
/* the added points from html & body, will trump jQuery UI's rule */ 
```

* * *

Using`!important`也可以处理这个问题，但它*通常*说是你**不想使用**的东西，除非真的没有办法绕过它。一个例子是如果你在一个元素上有内联样式，并且你想在你的样式表中胜过那些。内联样式得到**1000**分，这是不可能胜过的。

在此处阅读更多信息[http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:35:54.873

如果您足够努力，您可以在自己的 CSS 中手动覆盖任何 JQuery 或 JQueryUI 默认样式。但是，这样做有几个问题：

*   正如您所发现的，级联使默认 CSS 以（可能令人惊讶的）方式优先，因此您必须`!important`在选择器中使用 hacks--like 或冗余标签，例如`html` `body`-- 以确保您的样式“击败”JQuery。
*   更成问题的是，许多小部件，Menu 是主要违规者（但还有其他小部件），在初始化时会动态创建新的选择器。要覆盖*这些*样式，您必须在编写 JS 后在页面上使用 Firebug 或类似工具来找出新的选择器名称并将它们也添加到您的样式表中。

正确的做法是使用[ThemeRoller](http://jqueryui.com/themeroller/)工具创建一个自定义 CSS“包”，一次更改所有样式。奖励：由于您可以同时查看自定义样式如何影响所有小部件，因此更容易为您的页面创建统一的外观。

# smalltalk - PetitParser 解析规则如何发出错误信号？

> ID：15371334
> 
> 赞同：3
> 
> 时间：2013-03-12T20:20:40.173
> 
> 标签：smalltalk, pharo, petitparser

我想要一个只能识别 0 到 32767 之间数字的解析规则。我尝试了类似的方法：

```
integerConstant
  ^ (#digit asParser min: 1 max: 5) flatten
      ==> [ :string | | value |
            value := string asNumber.
            (value between: 0 and: 32767)
              ifTrue: [ value ]
              ifFalse: [ **???** ]] 
```

但我不知道该为 ??? 写什么。我想过返回一个 PPFailure，但这需要知道流的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T23:24:10.260

正如您所怀疑的，您可以使操作返回 PPFailure。虽然总的来说这不是很好的风格（混合了句法和语义分析），但有时它是有帮助的。在 PetitParser 的测试中有几个例子。`PPXmlGrammar>>#element`您在和处看到的良好用途`PPSmalltalkGrammar>>#number`。

PPFailure 的位置只是 PetitParser 提供给它的用户（工具）的东西。它不是用于解析本身的东西，因此如果您感到懒惰，可以将其设置为 0。或者，您可以使用以下示例获取输入中的当前位置：

```
positionInInput
    "A parser that does not consume anything, that always succeeds and that 
     returns the current position in the input."

    ^ [ :stream | stream position ] asParser

integerConstant
    ^ (self positionInInput , (#digit asParser min: 1 max: 5) flatten) map: [ :pos :string |
        | value |
        value := string asNumber.
        (value between: 0 and: 32767)
           ifTrue: [ value ]
           ifFalse: [ PPFailure message: value , ' out of range' at: pos ] ] 
```

# neo4j - 编写自定义 Neo4j 记录插入器

> ID：15371337
> 
> 赞同：3
> 
> 时间：2013-03-12T20:20:43.060
> 
> 标签：neo4j

我需要能够频繁地插入批量节点。它可能是完全的新插入或对现有节点（和关系）的更新。

在使用 Neo4j 中的 BatchInsert 工具后，我发现了一个限制，即当我的下一批节点到达时，我不能只将它们更新到图中（或将它们添加到图中）。相反，我将不得不从头开始重新加载我之前加载的所有其他内容。

我深入研究了 neo4j-kernel 代码库，看看我是否可以实现一个自定义导入器，它允许我在新数据到达时导入和更新。BatchInserterImpl 似乎是逻辑的核心发生在 createNodes、createRelationships 等的类。正如预期的那样，我看到，nodestore（NeoStore 对象）是在构造函数中新创建的。

我该如何解决这个问题？是否有其他插入数据的实现，其中更新被照顾，所以，我不必重新导入我已经添加到图形数据库中的所有内容？如果没有，您对扩展现有代码以帮助我的用例有什么建议？

我还需要添加索引和支持事务（至少在基本级别上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:04:08.527

感觉你应该使用 EmbeddedGraphDatabase。BatchInserter 主要是做初始的大规模插入。完成后，您应该切换到支持并发读/写和事务的 EmbeddedGraphDatabase，等等。

# ruby - 以 DRY 方式跨 rspec 规范共享工厂

> ID：15371339
> 
> 赞同：2
> 
> 时间：2013-03-12T20:20:47.527
> 
> 标签：ruby, ruby-on-rails-3, rspec2, factory-bot

所以我有一些这样的模型规格：

```
describe 'something' do
  it 'another thing' do
    a_model = FactoryGirl.create(:a_model)
    another = FactoryGirl.create(:another)
    #some code using a_model and another 
  end
end 
```

然后，我有另一个模型规格：

```
describe 'something else' do
  it 'another test' do
    a_model = FactoryGirl.create(:a_model)
    another = FactoryGirl.create(:another)
    #different code using a_model and another 
  end
end 
```

我的问题是我怎么把它弄干？我查看了共享上下文，但后来我无法访问我的模型。我可以创建一个辅助方法并返回一个对象数组/散列，但似乎应该有一些内置的东西以一种优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:36:38.863

查看共享上下文：

[https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-context](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-context)

```
# /spec/support/shared_stuff.rb

shared_context "shared stuff" do
  let(:model_1) { FactoryGirl.create(:model_1) }
  let(:model_2) { FactoryGirl.create(:model_2) }
end 
```

然后在你的规范中：

```
describe "group that includes a shared context using 'include_context'" do
  include_context "shared stuff"

  # ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:33:49.150

一种选择是使用 FactoryGirl 的回调功能：

在您的测试中，您可能会执行类似的操作

```
describe 'something else' do
  it 'another test' do
    a_model = FactoryGirl.create(:a_model_with_another)
    #different code using a_model and another 
  end
end 
```

您的工厂定义将类似于：

```
FactoryGirl.define do
  factory :a_model do

    factory :a_model_with_another do
      after(:create) {FactoryGirl.create(:another)}
    end
  end
end 
```

您可以在[文档中找到更多详细信息](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#callbacks)

# php - 序列化不适用于可序列化接口

> ID：15371340
> 
> 赞同：0
> 
> 时间：2013-03-12T20:20:54.000
> 
> 标签：php, debugging, serialization

```
 class foo implements serializable
    {
    public function serialize() {

            return serialize($this);
        }

        public function unserialize($serialized)
        {
            //Revive connection
            AbstractContent::$connection=  DatabaseHandle::getConnection();
            return unserialize($serialized);
        }
    }     

var_dump($this->object); //$this object is instance of class foo returns the exact dump of objects with correc property

     var_dump(unserialize(serialize($this->object))); //Does not dump correctly. only default property values are evaluated, constructor assigned values are ignored, computed values are ignored 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:51:30.983

根据[文档](http://php.net/manual/en/class.serializable.php)：

> 当数据被反序列化时，类是已知的，并且适当的 unserialize() 方法作为构造函数调用，而不是调用 __construct()。如果您需要执行标准构造函数，您可以在方法中执行此操作

此外，由于您在使用时没有做任何逻辑，`serialize()`您可以通过简单地覆盖[_seelp() 和 __wakeup() 魔术方法](http://www.php.net/manual/en/language.oop5.magic.php#object.sleep)而不是实现`serializable`. 就像是：

```
class foo
{
    public function __wakeup() {
        // Do your logic here
    }
}
$foo = new foo();
var_dump(unserialize(serialize($foo))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:25:15.237

```
class foo implements serilizable 
```

应该：

```
class foo implements serializable 
```

只是一个简单的拼写错误

# html - 通过 CSS 中的行数限制文本

> ID：15371346
> 
> 赞同：3
> 
> 时间：2013-03-12T20:21:22.830
> 
> 标签：html, css

我有一个 textarea 框，它回显“bio”-“bio”是我数据库中的文本内容。

我在这个文本区域旁边还有一个 CSS 框，想知道如何将文本限制为三行，然后在`CSS`框下方继续。

这是一个图表：

```
_ _ _ _ _ _ _ _ _ _
|                  |   Bio Content Goes Here
|                  |   blah, blah, blah, blah     
- - - - - - - - - -    blah, blah, blah, blah  
Content carrys on here, here, here and here etc.
Content carrys on here, here, here and here etc. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T20:32:52.597

你可以试试这个：

```
.yourBox {
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: X;
    max-height: X*N
}

@media (-webkit-min-device-pixel-ratio: 0) {
    .yourBox {
        display: -webkit-box;
        -webkit-line-clamp: N; /* number of lines to show */
        -webkit-box-orient: vertical;
    }
} 
```

来自重复的问题：[使用 CSS 将文本长度限制为 n 行](https://stackoverflow.com/questions/3922739/limit-text-length-to-n-lines-using-css)

# apache - Nutch 术语中的“段”到底是什么？

> ID：15371347
> 
> 赞同：1
> 
> 时间：2013-03-12T20:21:22.830
> 
> 标签：apache, web-crawler, nutch

我刚开始使用 Nutch 1.6。我执行了我的初始爬取，该爬取成功，直到遇到以下问题：

> LinkDb：添加段：文件：/var/apache-nutch/crawl/segments/2013031234747 LinkDb：添加段：文件：/var/apache-nutch/crawl/segments/2013031250939 线程“主”org.apache.hadoop 中的异常。 mapred.InvalidInputException：输入路径不存在：文件：/var/apache-nutch/crawl/segments/20130308114306/parse_data 输入路径不存在：文件：/var/apache-nutch/crawl/segments/20130312135244/parse_data at org .apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:197) 在 org.apache.hadoop.mapred.SequenceFileInputFormat.listStatus(SequenceFileInputFormat.java:40) 在 org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat .java:208) 在 org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:989) 在 org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:981) 在 org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174) 在 org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897) 在 org.apache.hadoop.mapred .JobClient$2.run(JobClient.java:850) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:415) at org.apache.hadoop.security。 UserGroupInformation.doAs(UserGroupInformation.java:1121) at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850) at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824) at org .apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261) 在 org.apache.nutch.crawl.LinkDb.invert(LinkDb.java:180) 在 org.apache.nutch.crawl.LinkDb.invert(LinkDb .java:151) 在 org.apache.nutch.crawl.Crawl.run(Crawl.java:143) 在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) 在 org.apache.nutch.crawl.Crawl.main(Crawl.java:55)

我想了解 nutch 中的“分段”到底是什么？在上述错误的开头，它说“LinkdB：添加段..”它试图做什么？我们在细分什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:03:16.037

Segment是一个分区[hadoop input partition]，由nutch运行的map reduce作业创建，从给爬虫的种子URL的输入集开始爬取。

# android - 无父对话框

> ID：15371351
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:21:30.210
> 
> 标签：android, android-dialog

我正在尝试开发一个通过 wifi 传输数据的应用程序。我想创建一个**对话框**，提示用户是否接受数据（就像通过蓝牙接收数据时出现的弹出窗口一样）。这怎么可能 ？如果只有在浮动窗口的帮助下才有可能，任何人都可以提供一个好的教程链接吗？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:47:42.243

您可以创建一个使用类似主题的活动，`Theme.Dialog`使其看起来像一个对话框，即使它是一个活动。您不能拥有`Dialog`不与活动关联的活动。

# c++ - 类数组和赋值运算符

> ID：15371354
> 
> 赞同：1
> 
> 时间：2013-03-12T20:21:50.740
> 
> 标签：c++, arrays

我是 C++ 新手，我正在尝试做以下事情：

我有一个简单的类，称为“sim”。我想创建一个包含 10 个类型为“sim”的元素的数组。所以我用过`sim** a = new sim*[10]`。

然后我循环运行，并创建新元素，如`a[i]=new sim(i)`. 但是，当我后来尝试打印每个 a[i] 的值（字段）时，除了要得到的，我什么也得不到。

这是代码：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class sim{
private:
    int x;
    const int y;
public:
    sim();
    sim(int z);
    ~sim();
    void showInfo();
    sim& operator=(const sim& s);
};

sim::sim():y(10),x(0)
    {}

sim::sim(int z):y(10),x(z)
    {}

sim::~sim()
    {}

void sim::showInfo()
    {
    cout<<"x="<<x<<", y="<<y<<endl;
    }

sim& sim::operator=(const sim& s)
    {
    x=s.x;
    return *this;
    }

int _tmain(int argc, _TCHAR* argv[])
{
    sim** a = new sim*[10];
    for(int i=0;i<10;i++)
    {
        a[i]= new sim(i);
    }

    for(int i=0; i<10; i++)
        (*a)[i].showInfo();
    getchar();
    return 0;
} 
```

这是错误的输出：

```
x=0, y=10
x=-33686019, y=-830047754
x=-33686019, y=-572662307
x=1869774733, y=201385040
x=725928, y=726248
x=1423328880, y=11
x=24, y=2
x=55, y=-33686019
x=4814584, y=-1
x=0, y=0 
```

Y 应始终为 10，x 应为 0-9。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:25:01.667

问题是您的语句中的操作顺序

```
(*a)[i].showInfo(); 
```

这是取消引用 a，给你一个指向 sim 实例的点，然后你正在索引这个。相反，您应该索引到 a，然后取消引用结果：

```
(*(a[i])).showInfo(); 
```

上面的括号是为了清楚起见。给定 C++ 运算符优先级，您可以安全地将该行写为：

```
(*a[i]).showInfo(); 
```

您的奇怪输出的原因是您正在索引您使用 new 分配的第一个 sim 实例，该实例位于堆内存中的某个任意位置。您只是将随后的内存块视为 sim 实例，这会导致未定义的成员值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:27:00.230

```
(*a)[i].showInfo(); 
```

这个不对。这将产生与以下相同的输出：

```
(*((*a) + i)).showInfo(); 
```

这显然不是你想要的。

您正在尝试访问`showInfo`存储在第 i 个值`a`指向的地址的对象的方法。

所以你应该这样写：

```
(*(a[i])).showInfo(); 
```

然后你可以添加一些语法糖，这样你就没有那个糟糕的取消引用运算符：

```
a[i]->showInfo(); 
```

# php - 让 PEAR 使用 github 频道

> ID：15371365
> 
> 赞同：1
> 
> 时间：2013-03-12T20:22:29.843
> 
> 标签：php, github, pear

我刚刚发现（哇）PEAR 包正在被转移到 Github，我的 pear 包没有出现任何问题，直到今天我决定更新它们并且没有更新它们（我最后一次这样做了）一年前）。

也许是因为我不熟悉 PEAR 是如何工作的，但是你如何告诉它使用 Github 中的 PEAR 频道？经过一番谷歌搜索后，我尝试了以下多种变体，但没有成功

```
pear channel-discover https://github.com/pear/ 
```

为了展示一个具体的例子，我使用了 Net_FTP 包，它在 pear 存储库中的最后一次更新是在 2008 年，而 github 中的版本显示了 3 个月前的更新。

我错过了什么吗？PEAR 不应该自动添加这个频道吗？如何让我的 PEAR 使用我的包的 Github 版本？还是我需要在我的共享库目录中手动克隆这些存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:41:41.907

包的源代码只移动到 git，而不是包自己发布。

Github 将显示较新的提交，但提交 != 发布 - 您必须等待软件包发布才能获得最新的源代码更改。

这与过去 12 年我们使用 SVN（以及以前的 CVS）托管代码时没有什么不同。它们只是不像 github 那样明显。

# java - Java Textbox - 将字节转换为字符串

> ID：15371370
> 
> 赞同：1
> 
> 时间：2013-03-12T20:22:48.533
> 
> 标签：java, encryption, aes

我有一个 java 应用程序，您可以在其中输入一个字符串到一个文本框中，点击加密，它会在一个单独的文本框中显示加密的字符串。我将为此使用 AES 加密。问题是我无法让加密文本显示为字节，但文本框不会显示字节（只需要字符串）。下面是我的代码的一个尝试。

```
 public static byte[] encrypt(String plainText, String encryptionKey) throws Exception {
Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding", "SunJCE");
SecretKeySpec key = new SecretKeySpec(encryptionKey.getBytes("UTF-8"), "AES");
cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(IV.getBytes("UTF-8")));
return cipher.doFinal(plainText.getBytes("UTF-8"));
}

private class HandleThat implements ActionListener{
 public void actionPerformed(ActionEvent eve){
 JTextField jtf; //user will enter string here
 JTextField jtf1; //this will show the encrypted text
 plaintext = jtf.getText();
 String error = "Error, you must provide some text"; 
        if(eve.getActionCommand().equals("Encrypt")){
            if(!jtf.getText().equals("")){
             try{   
             byte[] cipher = encrypt(plaintext, encryptionKey);
             for (int i=0; i<cipher.length; i++)

             jtf1.setText(cipher[i]); //here is where I get my error
            } catch (Exception e) {
            e.printStackTrace();}
        }else{
                label.setText(error);
        }
        } 
```

错误 - “类 JTextComponent 中的方法 setText 不能应用于给定类型；必需：找到字符串：字节原因：无法通过方法调用转换将实际参数字节转换为字符串”

如何将密码从字节更改为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:30:48.217

如果要[漂亮地打印](http://en.wikipedia.org/wiki/Prettyprint)值数组，请`byte`使用：

`Arrays.toString(cipher)`

如果您希望将密码解释为`String`，请使用：

`new String(cipher)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:23:13.590

这不是 API 内置的，因为通常密文包含不可打印的字符。您可能希望将加密文本编码为[Base-64](https://en.wikipedia.org/wiki/Base64)，特别是如果用户计划对其进行处理（例如通过电子邮件发送）。这将确保所有字符都是可打印的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:42:59.547

显示字节和字节数组的典型格式是十六进制显示。例如，许多加密应用程序以十六进制格式显示密钥。

您可以使用[此 SO 答案](https://stackoverflow.com/a/9855338/671988)中显示的方法转换`byte[]` 为`String`十六进制格式。

# c++ - C ++中的OpenMP和wxWidgets，omp_set_num_threads在哪里？

> ID：15371371
> 
> 赞同：0
> 
> 时间：2013-03-12T20:22:49.067
> 
> 标签：c++, wxwidgets, openmp

我有通过 OpenMP 并行化的 C++ 代码。我打算从使用 wxWidgets 用 C++ 编写的 GUI 调用此代码。

现在，当我`omp_set_num_threads(omp_get_max_threads());`直接在并行化块之前调用时，这没有任何效果。

1.  我可以在哪里调用`omp_set_num_threads(omp_get_max_threads());`或如何设置 OpenMP 使用的线程数？

2.  我的调用是否因为我在 wxWidgets 启动的线程中而没有效果？

我确实为 OpenMP 正确设置了编译器参数。[这个悬而未决的问题](https://stackoverflow.com/questions/3888734/problem-with-omp-set-num-threads-called-from-a-winapi-thread)似乎是相关的。

# macos - 带有 Capybara 和 Chromedriver 的 Cucumber 测试套件挂起

> ID：15371372
> 
> 赞同：2
> 
> 时间：2013-03-12T20:22:55.510
> 
> 标签：macos, selenium, cucumber, capybara, selenium-chromedriver

我有一个黄瓜测试套件，自从我搬到一台新电脑后，它无法运行。

测试套件使用`Capybara (v1.1.2)`,`Chrome Driver (v26.0.1383.0)`和`Selenium-Webdriver (v2.27.1)`在 Chrome 中运行 JavaScript 测试。

每一个测试都伴随着 Chrome 的蓝色死亡“aw snap”。如果我`CTRL-C`在下一次测试运行时终止当前的测试运行并且也失败了。

我完全不知所措。这个完全相同的测试套件在 Circle CI 和同事的 Mac 上运行良好。

我还尝试将**Chrome 驱动程序**换成其他 Capybara 驱动程序**Phantom JS**和**Capybara Webkit**。

Phantom JS 有点被淘汰了 :(

Capybara Webkit 更进一步，但仍然未能通过以下测试：`Broken pipe (Errno::EPIPE)`

我认为我的机器上的 Webkit 存在根本性的问题。

我正在运行 Mac OS X 10.8。

有什么想法吗？

**更新**

**`features/support/env.rb`**

```
require 'cucumber/rails'

Capybara.default_selector = :css

ActionController::Base.allow_rescue = false

begin
  require 'database_cleaner'
  require 'database_cleaner/cucumber'
  DatabaseCleaner.orm = 'mongoid'
  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

Cucumber::Rails::Database.javascript_strategy = :truncation

require 'minitest/spec'
World(MiniTest::Assertions)
MiniTest::Spec.new(nil) 
```

**`features/support/chrome.rb`**

```
Capybara.register_driver :chrome do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

Capybara.javascript_driver = :chrome 
```

**`Gemfile`**

```
source 'http://rubygems.org'

ruby '1.9.3'
gem 'rails', '3.2.11'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass'
  gem 'font-awesome-rails'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
end

group :test, :development do
  gem 'factory_girl_rails'
  gem 'minitest-rails'
  gem 'minitest-rails-capybara' # provides integration_test generator
  gem 'capybara_minitest_spec' # provides RSpec-like matchers
  gem 'capybara-screenshot'
  gem 'debugger' # please only enable debugger when needed
  gem 'quiet_assets'
  gem 'jasmine-rails'
end

group :test do
  gem 'minitest-matchers'
  gem 'shoulda-matchers'
  gem 'cucumber-rails', :require  => false
  gem 'capybara'
  gem 'capybara-email'
  gem 'database_cleaner'
  gem 'factory_girl_rails'
  gem 'launchy' # for save and open page
  gem 'timecop'
  gem 'mocha', :require => false
  gem 'vcr'
  gem 'webmock'
end

group :staging, :qa do
  gem 'database_cleaner'
  gem 'factory_girl_rails'
end

gem 'jquery-rails'

gem 'thin'
gem 'ey_config'

gem 'memcachier'
gem 'dalli'

gem 'mongoid'
gem 'mongoid-history', github: 'stengland/mongoid-history'
gem 'bson_ext'

gem 'devise'
gem 'devise_invitable'
gem 'omniauth-facebook'
gem 'omniauth-twitter'
gem 'switch_user'

gem 'cancan'

gem 'simple_form', '~> 2.0'
gem 'dragonfly', '~> 0.9.12'
gem 'mongoid-grid_fs'

gem 'momentjs-rails', github: 'tkrotoff/momentjs-rails'

gem 'tabulous'

gem 'cocoon'
gem 'backbone-on-rails'

gem 'mustache'

gem 'gon'

gem 'activemerchant'
gem 'state_machine'
gem 'ruby-graphviz', :require => 'graphviz'
gem 'twilio-ruby'
gem 'twitter'

gem 'prawn'

gem "bootstrap-wysihtml5-rails", "~> 0.3.1.14"

gem 'country_select' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:39:02.303

如果你仍然可以访问旧系统，你应该检查你在那里安装的 gems 的版本；

```
gem list --local 
```

然后在新系统上做同样的比较。可能有所需的宝石不存在或版本错误。

如果您为测试添加 Cucumber 输出和您的 env.rb 文件，我们可能会提供更多有用的答案。

# java - 从java中的.txt文件读取

> ID：15371374
> 
> 赞同：0
> 
> 时间：2013-03-12T20:23:07.737
> 
> 标签：java, java-io

我有一个带有一些数字的 .txt 文件。它看起来像这样：

```
1 4364 658 4328 666
2 5109 659 5100 638
3 4936 659 4904 677
4 4936 659 4957 639
5 5518 660 5602 672 
```

我需要提取除第一列（1、2、3、4、5 ...）以外的所有数字，并将它们用于进一步计算。任何帮助，小费都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:27:26.650

您可以使用[java.io](http://docs.oracle.com/javase/7/docs/api/java/io/package-frame.html)和[java.nio](http://docs.oracle.com/javase/7/docs/api/java/nio/package-frame.html)包中的类。[BufferedReader](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)可以逐行读取您的文件：

```
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(new     File("Path"))));
String line = null;
while((line = br.readLine()) != null){
    //do stuff in here
} 
```

在 Google [Guava](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/Files.html)中，有一些有用的方法可以[读取](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/Files.html#readLines%28java.io.File,%20java.nio.charset.Charset%29)文件。

在这种特殊情况下，列的拆分可以通过[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)类的[split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)方法来完成。

```
line.split(" "); 
```

对于拆分，谷歌的[Guava](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)库的使用也可能对字符串拆分有很大帮助。

对数字的处理可以通过使用[Long](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html)、[Integer](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)等包装类来实现，尤其是各个类中的静态方法 valueOf。

```
Long.valueOf("123"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:30:01.767

您可以像这样分隔第一列。

```
import java.io.*;
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(new File("Path"))));
String line = null;
while((line = br.readLine()) != null){
    System.out.println(line.substring(line.indexOf(" ") + 1));
}
br.close(); 
```

现在您可以根据需要操作字符串的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:28:04.900

使用 Google Guava 的 Files.readLines() 方法将字符串放入列表中。从那里，可以使用正则表达式或简单地计算字母来解析其余部分。Integer 类带有一个 parseInt(String) 方法，可以将单个字符串转换为整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:29:04.277

我会使用一个双循环，一个将文件中的文本从字符 '\n' 中拆分出来，这将为您提供一个字符串数组，其中每个元素都是文件中的一行，然后遍历该数组并从字符中分解每一行' '。从那时起，只需忽略结果数组中的第一个元素。

这是我正在谈论的功能：

[字符串.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T20:31:33.427

请参阅[RandomAccesFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)和 int Wrapperclass [Integer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)

```
 RandomAccesFile f = new RandomAccessFile("file.txt", "r"); // r=read, w=write
    String line = f.readLine();
    String[] values = line.split(" ");
    int[] valueInt;
    for(int i = 1; i < values.length; i++) {
      valueInt[i-1] = Integer.pars(values[i]);
    } 
```

或尝试`RandomaccesFile.readInt()`-Methode

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T20:50:37.560

也许是这样的：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class ReadNumbers {

    public List<int[]> getNumbers(InputStream is) throws IOException {
        List<int[]> result = new ArrayList<int[]>();
        BufferedReader reader = null;
        String line = null;
        try {
            reader = new BufferedReader(new InputStreamReader(is));
            while ((line = reader.readLine()) != null) {
                String[] s = line.split("\\s+");
                int[] numbers = new int[s.length - 1];
                for (int i = 0; i < numbers.length; i++) {
                    numbers[i] = Integer.parseInt(s[i + 1]);
                }
                result.add(numbers);
            }
        } finally {
            if (reader != null) {
                reader.close();
            }
        }
        return result;
    }

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        ReadNumbers reader = new ReadNumbers();
        InputStream is = null;
        try {
            is = new FileInputStream("numbers.txt");
            List<int[]> numbers = reader.getNumbers(is);
            for (int[] n : numbers) {
                int sum = 0;
                for (int i : n) {
                    sum += i;
                }
                System.out.println("sum=" + sum);
            }
        } finally {
            if (is != null) {
                try {
                    is.close();
                } catch (IOException ignore) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T21:07:36.287

使用 FileReader 读取文件：

```
File tFile = loadGradleResource("testdata.int");
FileReader fileReader = null;
ArrayList<String> lines = new ArrayList<String>();
try {
    String line = null;
    fileReader = new FileReader( tFile );
    BufferedReader bufferedReader = new BufferedReader( fileReader );
    while ( !( line = bufferedReader.readLine() ).isEmpty() ) {
        lines.add(line); 
    }
    bufferedReader.close(); 
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
 } 
```

然后这个方法来标记每一行：

```
for ( String lin : lines ) {
    String[] stritems = lin.split( " " );
    for ( String it : stritems ) {
       // this shows how to parse to integer
       System.out.print( Integer.parseInt( it ) + "," );
    }
    System.out.println();
} 
```

# multithreading - 如何解决 FlasCC 中巨大的 pthread 内存成本？

> ID：15371381
> 
> 赞同：3
> 
> 时间：2013-03-12T20:23:49.957
> 
> 标签：multithreading, actionscript-3, memory, pthreads, flascc

我们有相当庞大的代码库编译并开始在 FlasCC 中运行。当您打开 .swf 文件时，播放器的内存使用量约为 300MB。这或多或少都很好，因为似乎仍有大约 300MB 的动态分配内存可供 C++ 代码使用。

当我们创建线程时，问题就开始了。[根据文档](http://www.adobe.com/devnet-docs/flascc/docs/Reference.html#section_concurrency)，每个线程都将 .swf 复制到内存中并在沙箱中运行。这是否意味着每个 pthread 都会占用播放器打开 .swf 所使用的相同的约 300MB 内存？

似乎是这样。我已经对生成 pthread 和转储内存使用（*flash.system.System*向我们报告的内容以及*CModule.ram.length*）进行了简单的测试。这是日志：

```
Starting 10 threads.
Memory usage: total=288MB private=335MB free=2MB CModule=33MB
Thread 0 started.
Memory usage: total=683MB private=732MB free=1MB CModule=36MB
Thread 1 started.
Memory usage: total=1071MB private=1121MB free=1MB CModule=37MB
Thread 2 started.
Memory usage: total=1459MB private=1510MB free=1MB CModule=38MB 
```

此时 plash_player_debugger 已经退出（崩溃）而没有任何错误消息。

这基本上意味着我们没有线程。启动 2 个 pthread 后，C++ 代码只剩下约 50MB 的可用内存。

Adobe Scout 对内存使用情况进行了更深入的细分。以下是 .swf 使用 2 个后台线程运行时报告的内容：（[来自 Adob​​e 论坛上相同问题的图片）](http://forums.adobe.com/servlet/JiveServlet/showImage/2-5142270-306624/ScoutMemoryReport.png)

在生成这 2 个空闲 pthread 后，“其他”块已从 11 MB 膨胀到 800 MB。记忆进入“其他玩家”和“未分类”。

所以主要问题是：如何解决这个问题？也许有办法让 AS3 工作者消耗更少的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:40:28.240

如果您考虑 AS3 工作者 API，您可以传递任何要执行的 SWF 文件。

大多数示例（在 AS3 中）建议传递当前的 SWF 字节，然后使用类似的东西`Worker.current.isPrimordial`来决定要做什么。

因此，虽然我认为您无法避免您将拥有与线程一样多的播放器实例这一事实，但更好的方法是使[工作 SWF 成为一个单独的模块](http://help.adobe.com/en_US/as3/dev/WS2f73111e7a180bd0-5856a8af1390d64d08c-7fff.html#WS2f73111e7a180bd0-153369881390e15a704-7ffe)，它不会像主 SWF 那样回收尽可能多的内存。

具体而言，对于您的情况，我意识到这可能非常困难，因为您依赖 Adob​​e 的带有工作线程的 pthread 实现，这显然只是作为工作线程传入主 SWF 文件。此外，将使用线程的现有 C/C++ 代码库转移到 AS3 工作线程绝非易事。

# sql - Oracle 对软删除实施约束

> ID：15371383
> 
> 赞同：2
> 
> 时间：2013-03-12T20:24:01.657
> 
> 标签：sql, oracle, oracle10g, constraints

我有一个表（称为表 A），它有一个**活动**列。此列可以为 1 或 0。如果为 0，则表示已删除。这是软删除。

我遇到的问题是我想验证此表中行的外键约束。如果我要从表 A 中删除一行，那么由于它与其他行的关系，它通常会通过外键约束。这是好的和预期的。我遇到的问题是，由于我的删除是软的（只是更新一个标志），我在删除时没有得到任何约束检查。这意味着我需要手动检查关系。

无论如何我可以向使用 1 和 0 作为完整性约束的一部分的 oracle 表添加约束吗？例如，如果我将**活动**列更新为 0，那么它将遇到约束，因此不允许将列更改为 0。

我能以某种方式做到这一点吗？

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:00:58.133

从建模的角度来看，在这种情况下，我倾向于 APC 关于将“软删除”行移动到另一个表（例如日志表）并使用硬删除的评论。

另一种选择（未测试）是在引用约束中包含软删除列，例如：

```
CREATE TABLE dept (
  dept_id number,
  alive number,
  constraint alive_ck check (alive in (0,1)),
  constraint dept_pk primary key (dept_id, alive),
  constraint dept_uk unique (dept_id)
);

CREATE TABLE emp (
  emp_id number,
  dept_id number,
  alive number,
  constraint emp_pk primary key (emp_id),
  constraint emp_dept_fk
    foreign key (dept_id, alive)
    references dept (dept_id, alive)
); 
```

请注意，dept 表在 dept_id 上是唯一的，但在 (dept_id, alive) 上也有一个约束，以允许来自 emp 的引用约束。

这意味着您的应用程序现在需要在软删除一个部门时同时更新所有 emp 行 - 如果您不对其进行编码，则约束有效地确保该部门不能被软删除，除非 emp 是第一个已删除（或软删除 - 尽管您必须使约束延迟才能起作用）。

# c# - 使用 C# 解密在 Salesforce 中创建的 AES256 值

> ID：15371384
> 
> 赞同：6
> 
> 时间：2013-03-12T20:24:03.377
> 
> 标签：c#, salesforce, encryption

在 Salesforce 中运行以下 Apex 代码，我加密了一个字符串：

```
public static String getEncryptedData() { 
    Blob cryptoKey = Crypto.generateAesKey(256);  

    String dataToEncrypt =  'Test string';                                  

    Blob encryptedData = Crypto.encryptWithManagedIV('AES256', cryptoKey, Blob.valueOf(dataToEncrypt));  

    return EncodingUtil.base64Encode(encryptedData);
} 
```

假设这个实现是正确的，我需要在 C# 中解密它。我有以下内容，但看到“填充无效且无法删除”错误。（示例密钥和加密字符串值，当然）：

```
private string Decrypt(string encryptedbase64Password)
{
    RijndaelManaged aes256 = new RijndaelManaged();
    aes256.KeySize = 256;
    aes256.Mode = CipherMode.CBC;
    aes256.Padding = PaddingMode.PKCS7;
    aes256.BlockSize = 128;

    // Salesforce.com stores the first 16 bytes as the IV
    // Extract first 16 bytes as IV, the rest as the Key
    string keyAndIv = "Ii7oSjjWuhp6J6/hj/wmivqx1h3N2HzJ2ByJOy1n89E="; // sample from SFDC
    // hard coded for this example:
    encryptedbase64Password = "hRVlbM79aEQi8Tz7JJIL7CEhSxZAJvCh8Ni6ORP1C55+qbJzjDshBYBjyP12/zT2";
    byte[] allBytes = Convert.FromBase64String(keyAndIv);
    byte[] iv = new byte[16];
    Array.Copy(allBytes, 0, iv, 0, iv.Length);
    byte[] key = new byte[allBytes.Length - 16];
    Array.Copy(allBytes, 16, key, 0, key.Length);

    aes256.Key = key;
    aes256.IV = iv;

    ICryptoTransform decrypto = aes256.CreateDecryptor();
    byte[] encryptedbytes = Convert.FromBase64String(encryptedbase64Password);
    byte[] decryptedText = decrypto.TransformFinalBlock(encryptedbytes, 0, encryptedbytes.Length);
    string result = Convert.ToBase64String(decryptedText);

    return result;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T14:32:06.263

[用户“双头软件”在Salesforce 开发板上](http://boards.developerforce.com/t5/NET-Development/Decrypt-AES256-value-created-in-Salesforce-using-C/m-p/587547)发布了正确的解决方案。看起来 CryptoStream 正确处理了填充问题。完整解决方案：

```
string plaintext;
byte[] Key = Convert.FromBase64String("Ii7oSjjWuhp6J6/hj/wmivqx1h3N2HzJ2ByJOy1n89E=");
string encryptedbase64Password = "hRVlbM79aEQi8Tz7JJIL7CEhSxZAJvCh8Ni6ORP1C55+qbJzjDshBYBjyP12/zT2";
byte[] IV = new byte[16];
byte[] phase = Convert.FromBase64String(encryptedbase64Password);
Array.Copy(phase, 0, IV, 0, IV.Length);
byte[] cipherText = new byte[phase.Length - 16];;
Array.Copy(phase, 16, cipherText, 0, cipherText.Length);

using (AesManaged aesAlg = new AesManaged())
{
    aesAlg.KeySize = 256;
    aesAlg.Mode = CipherMode.CBC;
    aesAlg.Padding = PaddingMode.PKCS7;
    aesAlg.Key = Key;
    aesAlg.IV = IV;
    // Create a decryptor to perform the stream transform.
    // NOTE: This is the difference between my original solution and the correct one.
    ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);
    // Create the streams used for decryption.
    using (MemoryStream msDecrypt = new MemoryStream(cipherText))
    {
        using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
        {
            using (StreamReader srDecrypt = new StreamReader(csDecrypt))
            {
                // Read the decrypted bytes from the decrypting stream and place them in a string.
                plaintext = srDecrypt.ReadToEnd();
            }
        }
    }
} 
```

# .net - 自定义工具错误：指定的架构无效。错误：（0,0）：错误0111：从属角色引用的属性

> ID：15371385
> 
> 赞同：2
> 
> 时间：2013-03-12T20:24:11.817
> 
> 标签：.net, wcf, odata, .net-4.5

我刚刚升级到 .net 4.5 去更新我的 WCF 客户端项目中的 OData 服务参考，我得到了这个自定义工具错误：

> 指定的架构无效。错误：(0,0) :error 0111:: 依赖角色 Bill 引用的属性必须是关系 BillingEntities.FK_Bill_Batch_BatchId 的引用约束中的依赖角色引用的 EntityType BillingEntities.Bill 的键的子集。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:23:12.660

我很确定这是 WCF 数据服务而不是实体框架的问题。我在我的环境中复制了这个。我发现 EDMX CSDL 命名空间在版本之间是不同的。

2.0 EDMX 设计器 xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx" WCF 服务 $metadata - xmlns="http://schemas.microsoft.com/ado/2008/09/电火花"

3.0 EDMX 设计器 - xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx" WCF 服务 $metadata - xmlns="http://schemas.microsoft.com/ado/2007/05 /edm"

如您所见，3.0 定义了一个比 2.0 明显更新的 edm 版本，但由 WCF 数据服务作为 2007 年的降级版本发布。

我的结论是 GAC 4.5 中附带的 System.Data.Services.dll 存在支持此问题的问题。由于 WCF 数据服务从 4.5 开始分拆为 NuGet，因此我将切换到此版本。我在我的环境中尝试过这个，服务发布的 CSDL 是正确的，并且可以被我的服务客户端使用。

如果无法升级，则必须使用 4.0 中的 EDMX 设计器或在幕后手动切换这些标签，这就是我最初的工作方式。

[http://msdn.microsoft.com/en-us/data/ee720179](http://msdn.microsoft.com/en-us/data/ee720179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:27:15.743

这很可能与使用与 .Net 4.5 中现在可用的不同版本的实体框架构建的模型有关。这本身不是问题，但它可能意味着实体关联可能没有创建外键属性。

您从哪个版本的框架升级？

您可以选择从头开始删除并重新创建模型（取决于复杂性），或者您可以从现有数据库重新创建模型，特别注意关联。

当我发现 .Net 4.5 不能在 Windows Server 2003 上运行并且不得不降级到 4.0 并且再次从 .net 3.5 升级到 .net 4.0 时，我遇到了类似的情况。我确实不得不重新创建模型。使用 EF 4.4 而不是从 .Net 4.5 获得的 5.0

[这里](https://stackoverflow.com/questions/6430865/target-framework-change-4-0-to-3-5-breaks-ef-model-error-111-referential-const)和[这里](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/37221bb3-1f1f-4548-bf60-63d995050b05/)有更多关于这个问题的帖子

# ruby-on-rails - Rails：使用 development.sqlite3 数据填充 Heroku 数据库

> ID：15371394
> 
> 赞同：3
> 
> 时间：2013-03-12T20:24:32.910
> 
> 标签：ruby-on-rails, heroku, github, sqlite

如果我的特殊案例已经在这个论坛上得到回答，我不会问这个问题，所以请原谅我的再次提问。

我有一个使用 sqlite3 数据库进行开发的 rails 应用程序，它已经包含了我需要的应用程序的所有数据。在将这个应用程序推送到 heroku 时，我无法查看那里的应用程序，直到我不得不运行 heroku run rake db:migrate。现在我可以查看该应用程序，但我无法使用管理员帐户登录或执行任何其他需要数据库数据的操作。我已经做了所有需要的（我认为），如下面的 gem 文件所示：

```
 source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bcrypt-ruby'
gem 'kaminari'
gem 'gon'
.
.
.
gem 'jquery-rails', '2.0.2'

group :development, :test do
  gem 'sqlite3', '1.3.7'
end

group :production do
  gem 'pg', '0.12.2'
end
.
. 
```

我也试过 heroku db:push 但这也没有帮助。主要问题是我正在和其他人一起开发这个应用程序，我们使用 github 进行版本控制。但是，每当我从彼此那里得到更新时，我们的 sqlite 数据库似乎总是自己清空。因此，为了解决这个问题，我们通常必须将更新后的数据库直接通过电子邮件发送给对方，然后对方继续使用它并替换他本地 repo 中的空 on。我怀疑 heroku rakedb:migrate 的原因是这样的。

但是，由于我们在发展中已经走到了这一步，我们真的负担不起重新开始。有没有一种方法可以使用本地 repo db 的内容填充远程 heroku 数据库？感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:57:53.733

您应该将数据从 sqlite 导出到 sql 转储文件并开始在本地使用 postgres。如果你继续在本地使用 sqlite 和远程使用 postgres，你将有一段糟糕的时光。

在本地迁移后，请按照本指南[使用 PG 备份导入和导出 Heroku Postgres 数据库。](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

另外，不要使用`db:push`or `db:pull`; 它们已被弃用。

**更新**

要在本地 postgres 中获取 sql 文件，首先安装和设置 postgres（Homebrew、macports、*其他*...），然后执行以下操作：

```
$ psql -U user -d database < file.sql 
```

从那里，您可以使用该`pg_dump`实用程序导出到`.dump`文件。您还可以将 sql 直接导入 Heroku Postgres：

```
# this will delete ALL data in your postgres, so make sure it's what you want
$ heroku pg:reset HEROKU_POSTGRESQL_COLOR --app app_name
$ heroku pg:psql HEROKU_POSTGRESQL_COLOR --app app_name < file.sql 
```

# html - 网站没有出现在搜索引擎上

> ID：15371396
> 
> 赞同：0
> 
> 时间：2013-03-12T20:24:33.720
> 
> 标签：html, seo, pagerank

它是在我制作的所有网站上的 wordpress 全新安装上制作的，但是这个已经上线了几个月，并且没有例如在 google 上的注册表。该网址甚至没有出现在谷歌上，所以它甚至不是一个糟糕的 seo 程序......

我制作的所有网站都出现在谷歌上，所以我不知道发生了什么。

我曾经有一个 robots.txt 允许所有但我删除了它，因为它没有做任何事情......

它有这个：

```
User-agent: *
Allow: / 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:26:20.343

首先遵循 Google 官方指南：

浏览网站管理员工具：

[https://www.google.com/webmasters/tools/home?hl=en](https://www.google.com/webmasters/tools/home?hl=en)

并继续阅读“这是 google 寻找的”指南：

[http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/webmasters/docs/search-engine-optimization-starter-guide.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/webmasters/docs/search-engine-optimization-starter-guide.pdf)

# python - Google Fusion Tables POST 请求使用 Python 返回 400 Bad Request

> ID：15371401
> 
> 赞同：0
> 
> 时间：2013-03-12T20:24:49.873
> 
> 标签：python, google-fusion-tables, httplib

我正在尝试创建一个脚本 Python 脚本，它允许我读取 Google Fusion Table 并将行导入其中。我一直在使用[https://developers.google.com/fusiontables/docs/samples/python](https://developers.google.com/fusiontables/docs/samples/python)上的示例代码来尝试了解如何使用融合表。

我的问题是这里涉及发出 POST 请求的示例都导致返回“400 Bad Request”。GET 请求工作得很好。据我所知，请求遵循 API 样式指南。为什么这会失败？

编辑：特别是请求返回：

```
400 Bad Request
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "parseError",
    "message": "Parse Error"
   }
  ],
  "code": 400,
  "message": "Parse Error"
 }
} 
```

# iphone - xcode，nslog 奇怪的故障

> ID：15371404
> 
> 赞同：0
> 
> 时间：2013-03-12T20:24:51.517
> 
> 标签：iphone, ios, objective-c, xcode

下面的代码在单击 tinyurl 链接时为我提供了 tinyurl 链接上的 NSLog 重定向位置。但是，如果我删除以下代码`[[UIApplication sharedApplication] openURL:[request URL]];`，它将给我 NSLog 中的实际网站，而不是 tinyurl 链接。在呈现共享应用程序代码的同时，我如何才能在 NSLog 中拥有实际的网站 URL？

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType  {
    NSLog(@"Redirect Location: %@",[request.URL absoluteString]);
    [[UIApplication sharedApplication] openURL:[request URL]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:55:54.650

简短的回答：

使用`UIWebViewDelegate`方法`shouldStartLoadWithRequest`不是确定您将被重定向到哪个站点的好机制（特别是因为从您的代码判断，您最终将在外部应用程序中打开它，而不是您的`UIWebView`），因为您在`shouldStartLoadWithRequest`重定向之前得到发生。但是，您可以使用`NSURLConnection`和[`NSURLConnectionDataDelegate`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40011348-CH1-SW9)方法来确定您最终将被重定向到哪里。

长答案：

如果你看`shouldStartLoadWithRequest`，如果你返回`YES`，你会让`UIWebView`跟随重定向请求。考虑以下内容`shouldStartLoadWithRequest`：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"%@", request.URL);
    return YES;
} 
```

如果您将其与随机`bit.ly`URL 一起使用，例如`http://nyti.ms/Yi6EAk`，您将看到以下日志：

```
2013-03-12 21:23:31.418 webtest[6959:c07] http://nyti.ms/Yi6EAk
2013-03-12 21:23:31.511 webtest[6959:c07] http://bit.ly/Yi6EAk?cc=0d7134b272b1004cb954d0400076e9fa
2013-03-12 21:23:31.560 webtest[6959:c07] http://www.nytimes.com/2013/03/13/us/politics/ryans-plan-aims-to-balance-budget-in- 10-years.html?hp&_r=0

```

第三次调用`shouldStartLoadWithRequest`是我定义`bit.ly`重定向 URL 的实际 URL，即两个连续重定向的最终目的地。但是，如果您`shouldStartLoadWithRequest`返回`NO`了，那么您将永远无法弄清楚它最终会被重定向到哪个站点。（顺便说一句，您`shouldStartLoadWithRequest`绝对应该返回`YES`或`NO`......您的样品也不会返回。）

如您所见，因为`shouldStartLoadWithRequest`发生在重定向有机会发生之前，您会看到每个重定向都发生了。根据生成的站点的功能，您可能会`shouldStartLoadWithRequest`在页面检索额外内容时看到后续调用。这使得这是一种尴尬的机制，用于找出您最终被重定向到的站点。

如果您确实需要您被重定向到的站点，您可能想要使用`NSURLConnection`, 代替。虽然这通常用于从服务器实际检索数据，但它也可以用于捕获重定向（但不会受到`UIWebViewDelegate`方法问题的影响`shouldStartLoadWithRequest`，在这种情况下，很难区分真正的重定向和页面的随机附加内容）可随后要求）。

所以考虑以下几点：

```
self.url = [NSURL URLWithString:@"http://nyti.ms/Yi6EAk"];
NSURLRequest *request = [NSURLRequest requestWithURL:self.url];
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

然后，您可以实现`connection:willSendRequest:redirectResponse:`一个`NSURLConnectionDataDelegate`方法，该方法将跟踪各种重定向：

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response
{
    self.url = request.URL;

    return request;
} 
```

显然，因为您`NSURLConnection`用于跟踪重定向，但我们并不真正关心`responseData`我们通常`NSURLConnection`用来检索的，所以我们可以在您收到良好响应后立即取消连接（确信我们已经知道哪个网站最终被重定向）：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [connection cancel];

    NSLog(@"Ok, we now know that the resulting URL is %@", self.url);
} 
```

顺便说一句，您可能还想捕获连接错误，例如：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Ok, we failed trying to retrieve data from %@", self.url);
} 
```

最后，值得指出的是，这种发出 HTTP 请求`NSURLConnection`并让它跟随整个重定向系列的技术是一个非常低效的过程，因此您必须决定是否值得。但这是确定您的 HTTP 重定向将引导您到哪里的一种方法。

One final caveat, this captures traditional redirects, but if the page is doing any client-side JavaScript redirects, I don't think this technique will work. It works for the vast majority of redirected HTTP requests, though.

# matlab - 如何从数组中的数组中获取列的平均值？

> ID：15371406
> 
> 赞同：0
> 
> 时间：2013-03-12T20:24:57.310
> 
> 标签：matlab, multidimensional-array, mean, cell-array

我目前正在 Matlab 中从事一个项目，其中我有一个单元阵列。第一个元胞数组长 464 列，深 1 行。这些单元中的每一个都是另一个 96 列和 365 行的单元阵列。我需要能够获得 464 个数组中每个数组的 96 列的平均值，并将 464 个数组中的每个数组放在一个称为均值的新数组中的不同行上。我试图编写代码来只做一列，如下所示：

```
 mean = Homes{1,1}(1:) 
```

但是当我尝试运行此代码时，我收到以下错误：

```
 mean = Homes{1,1}(1:)
                       |
    Error: Unbalanced or unexpected parenthesis or bracket. 
```

基本上我的最终数组名称意味着需要 96 列乘 464 行。我被困住了，真的可以使用你的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:43:16.280

我建议您在较小的矩阵上尝试以下代码。看看它是否能给你想要的结果。

```
a=cell(1,4); %for you it will be a=cell(1,464)
for i=1:4
   a{i}=randi(10,[5 10]); %for you it will be a{i}=randi(10,[365 96]);
end
a1=cell2mat(a);  %just concatenating
a1=mean(a1); %getting the mean for each column. in your case, you should get the mean for 96*464
a2=reshape(a1,[10 4]); %now what reshape does it it takes first 10 elements and arranges it into first column.
%Therefore, since I finally want a 4x10 matrix (in your case 464x96), i.e. mean of 10 elements in first cell array on first row and so on...
%Thus, 1st 10 elements should go to first column after doing reshape (since you want to keep them together). Therefore, instead of directly making matrix as 4x10, first make it as 10x4 and then take transpose (which is the next step).

a2=a2'; %thus you get a 4x10 matrix. 
```

具体而言，代码将是

```
a=cell(1,464); 
for i=1:464
   a{i}=randi(10,[365 96]); 
end
a1=cell2mat(a);  
a1=mean(a1); 
a2=reshape(a1,[96 365]);                        
a2=a2'; 
```

# php - 从以任何类型的格式 php 存储的生日中查找年龄

> ID：15371407
> 
> 赞同：0
> 
> 时间：2013-03-12T20:24:57.603
> 
> 标签：php

我的客户希望我使用存储在 mysql 中的孩子的出生日期来显示孩子的年龄。我以前的代码不适用于所有格式，因为该站点不限制用户输入此日期的方式。到目前为止，这是我所拥有的，但我无法弄清楚如何检查格式。他们在`mm/dd/yyyy`, `mm/dd/yy`, `dd/mm/yyyy`, `dd/mm/yy`, `Abbrev day, yy`,过生日`Abbrev day, yyyy`。他们还使用不同的分隔符，例如`.`或`-`很容易检查和使用爆炸。

```
$birthday=//data from db
$DOB=$birthday;

if(strpos($DOB,'/')){
  list($month,$day,$year)=explode('/',$DOB);
  if(strlen($year)=='4'){
    //year is in Y format
    $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("Y")-$year)-1):(date("Y")-$year));
  }else{
    if(strlen($month)=='4'){
      //format is adjusted using ymd - $month is actually the year, the $day is month, the $year is the day
      $age = (date("md", date("U", mktime(0, 0, 0, $day, $year, $month))) > date("md") ? ((date("Y")-$month)-1):(date("Y") -$month));
    }else{
      //year is in y format
      $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("y")-$year)-1):(date("y")-$year));
    }
  }
}elseif(strpos($DOB,'-')){
  list($month,$day,$year)=explode('-',$DOB);
  if(strlen($year)=='4'){
    //year is in Y format
    $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("Y")-$year)-1):(date("Y")-$year));
  }else{
    if(strlen($month)=='4'){
      //format is adjusted using ymd - $month is actually the year, the $day is month, the $year is the day
      $age = (date("md", date("U", mktime(0, 0, 0, $day, $year, $month))) > date("md") ? ((date("Y")-$month)-1):(date("Y") -$month));
    }else{
      //year is in y format
      $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("y")-$year)-1):(date("y")- $year));
    }
  }
}elseif(strpos($DOB,'.')){
  list($month,$day,$year)=explode('.',$DOB);
  if(strlen($year)=='4'){
    //year is in Y format
    $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("Y")-$year)-1):(date("Y")-$year));
  }else{
    if(strlen($month)=='4'){
      //format is adjusted using ymd - $month is actually the year, the $day is month, the $year is the day
      $age = (date("md", date("U", mktime(0, 0, 0, $day, $year, $month))) > date("md") ? ((date("Y")-$month)-1):(date("Y") -$month));
    }else{
      //year is in y format
      $age = (date("md", date("U", mktime(0, 0, 0, $month, $day, $year))) > date("md") ? ((date("y")-$year)-1):(date("y")- $year));
    }
  }
}else{}

echo $age;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T15:31:27.737

您希望做的最好的事情是`strtotime()`。所以这里是计算年龄的代码：

```
$birthday = // value from db
$birthdayTime = strtotime($birthday);

$age = date('Y') - date('Y', $birthdayTime);

if (date('md') < date('md', $birthdayTime)) {
    // we haven't reached their birthday this year so subtract one
    $age--;
}

echo $age; 
```

我们在代码中所做的事情。首先，我们将字符串生日转换为 unix 时间戳。起初，人们可能想从当前时间戳中减去该时间戳，然后除以一年中的秒数，但因为这不考虑闰年，并且会在 2 月底/3 月初的生日导致奇怪的结果我们所做的是从当前年份中减去出生年份，然后检查我们是否已经过这一年的生日。如果我们没有，那么我们减去 1 并得到年龄。

如果您的数据库允许 dd/mm/yy 和 mm/dd/yy，则 100% 不可能判断 01/02/03 是 1 月 2 日还是 2 月 1 日。因此，在您修复数据之前，您会遇到一些小问题。

您还可以尝试做出有根据的猜测 mm/dd/yy 更像是美国日期格式，而 dd/mm/yy 更像是美国以外的任何地方的日期格式，因此您可以尝试以这种方式更新数据库数据.

# java - 如何在 Jena 中将 SPARQL 查询转换为 RDF 文件？

> ID：15371413
> 
> 赞同：2
> 
> 时间：2013-03-12T20:25:26.627
> 
> 标签：java, rdf, sparql, jena

我正在尝试直接从 Oracle 数据库的 SPARQL 查询中输出 RDF/XML 文件。查询工作正常，因为我已经验证了 ResultSet 对象中的结果。

但是，我不确定如何从那里开始。我想我想为每个 QuerySolution 创建一个语句，然后将其添加到模型中。但是我想不出办法，因为我找不到获取谓词值的方法。

任何帮助将不胜感激，并提示我是否走在正确的道路上。

```
QueryExecution qe = QueryExecutionFactory.create(query, oracleSemModel) ;       
ResultSet results = qe.execSelect();

Model model = ModelFactory.createDefaultModel();

while (results.hasNext())
{
    QuerySolution result = results.next();
    Resource  subject   =  result.getResource("s");   // get the subject
    Property  predicate =  result.getProperty("p");   // <-- THIS FUNCTION DOESN'T EXIST
    RDFNode   object    =  result.get("o");           // get the object

    Statement stmt = ResourceFactory.createStatement(subject, predicate, object);

    model.add(stmt);
}

model.write(System.out, "RDF/XML-ABBREV"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:02:11.157

您还没有显示查询，但它可能是以下形式：

```
SELECT ?s ?p ?o
WHERE {
    ...
} 
```

如果您替换为，您想要实现的目标很`SELECT`简单`CONSTRUCT`：

```
CONSTRUCT { ?s ?p ?o }
WHERE {
    ...
} 
```

`CONSTRUCT`通过采用三元组模板并将每个解决方案绑定到它，然后将其添加到结果模型中，从而生成（构造）模型。在您的情况下，此模板很简单`{ ?s ?p ?o }`，即使用 ?s 作为主题等。但是，可以使用更复杂的模式，只需编写您期望的 RDF，并在查询结果中的值的位置添加变量。

最终代码：

```
QueryExecution qe = QueryExecutionFactory.create(query, oracleSemModel) ;
Model model = qe.execConstruct();
// there is no step 3 
```

# html - 如何设置 html 密码字段的样式？用自定义的东西替换默认点

> ID：15371414
> 
> 赞同：0
> 
> 时间：2013-03-12T20:25:31.030
> 
> 标签：html, css

我在设置密码字段的样式时遇到问题。我只需要知道如何用自定义图像替换默认点，如下图所示。

![http://imageshack.us/photo/my-images/27/passworddots.png/](../Images/c6f16d371053c692dc004d3e011095ce.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:28:24.090

检查[这个主题](https://stackoverflow.com/questions/6859727/styling-password-fields-in-css)。我发现了一些奇怪的东西:)

```
input[type="password"]
{
  -webkit-text-security: disc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:28:21.500

你不能用 CSS 做到这一点。您需要制作一个自定义控件。

一种方法是制作一个自定义字体，其中每个字符都是相同的字形。另一种是使用 JS 来捕获 keyup 事件，然后生成一个带有重复背景图像的 div。

（如果你不知道怎么做，我会保持原样——如果你是初学者，这不是一个特别简单的任务。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:30:20.593

> 如何用自定义图像替换默认点

你不能用纯 CSS 跨浏览器。您可以尝试使用 JavaScript 和许多事件处理程序构建自定义密码字段，但它不可避免地会在一个或另一个浏览器中出现问题，特别是对于可能使用不同设计或自定义密码字段交互的移动设备。

不用管它，使用默认文本，并尽量避免与用户期望相混淆。

# java - 当我将它输入到另一个 arrayList 中时，如何修改我的 arrayList 以便删除和更改它的值？

> ID：15371416
> 
> 赞同：0
> 
> 时间：2013-03-12T20:25:44.420
> 
> 标签：java, string, arraylist

我制作了一个数组列表，用于存储文本文件中的单词。但现在我需要创建一个单独的数组列表，它只从文件中的单词中获取字母，将它们恢复为小写，并删除单词中或其周围的所有标点符号。所以基本上它会恢复所有单词，并从中删除所有提到的元素。

```
 List<String> grams = new ArrayList<String>();
        for(String gram : words){
            gram = gram.trim();
            for(int i=0,int l=gram.size();i<l;++i){ //this line is wrong
                const String punChars = ",[]:'-!_().?\/~"; //this line is wrong
                if(gram.indexOf(i) != -1){ //this line is wrong
                    gram.remove(i); //this line is wrong
                }
                gram.add(gram.remove(0).toLowerCase()); //this line is wrong
            }
        } 
```

我基本上是在尝试读取数组中选择字符串中的每个字符，因为我将它放入新的数组列表中，然后如果它周围或其中有任何标点符号，我将其删除：我尝试使用 const 来存储标点符号值，然后我使用 if 语句检查字符串以删除字符串中的该位置。

接下来我尝试添加单词，但删除大写并将其更改为小写。

我有点迷茫，不确定我在这里用这个位做什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:31:38.463

我对您的问题的解释是您想要浏览一个单词列表，将它们转换为小写，删除标点符号，然后将它们插入另一个列表？如果是这种情况，那么我不明白您为什么需要修改原始列表。你可以这样做：

```
for(String gram : words) {
    gram = gram.trim(); //trim string
    gram = gram.replaceAll("[^A-Za-z0-9]", ""); //remove any non alphanumeric characters
    grams.add(gram); //add to the grams list
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:34:29.050

为什么不像这样循环遍历字符串中的每个字符：

```
for (char c : gram.toCharArray()) {
  ...
} 
```

然后检查您的字符是否在排除字符列表中，如果不是，则将其小写并将其添加到您的输出列表中？

# objective-c - 用作消息表达式/表示法的方括号的Objective-C运算符优先级？

> ID：15371417
> 
> 赞同：6
> 
> 时间：2013-03-12T20:25:49.970
> 
> 标签：objective-c

使用方括号 [] 的 Objective-C 消息表达式（消息表示法）运算符是否与数组下标的 C 运算符具有相同的优先级，后者也使用方括号 []？

我参考了[这张 C 运算符表](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)。

此外，与用于“通过引用选择元素”的 C 运算符相比，类似的问题适用于用于访问器方法调用的 Objective-C“点语法”运算符。它们的优先级相同吗？

我花了一个小时寻找这个基本问题的直接、明确的答案。令人惊讶的是，我没有找到一个。因此，这个问题。欢迎链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T21:29:43.170

您已经感到困惑，因为许多对语法和优先级的解释都采取了说运算符具有优先级的捷径。他们没有。语法中的产生具有优先权，并且它们相对于其他产生具有优先权。只有当语法不明确（意味着它可以为相同的输入产生两个不同的分析树）并且通过指定一个产生式的优先级来解决歧义时，两个产生式相对于彼此的优先级才有意义.

让我用一个例子来解释。

这是一个玩具语法：

```
expression =
    | IDENTIFIER
    | NUMBER
    | expression '+' expression
    | expression '*' expression
    | expression '(' expression ')' // function call
    | '(' expression ')' // grouping
    | expression '[' expression ']' // array subscript
    | '[' expression IDENTIFIER ':' expression ']' // message send
    ; 
```

现在，考虑`1 + 2 * 3`用这个语法进行解析。有两个有效的解析树：

```
 +              *
 / \            / \
1   *          +   3
   / \        / \
  2   3      1   2 
```

通过指定`*`产生式的优先级高于`+`产生式，我们要求解析器产生左树而不是右树。`+`因此，产生式和产生式之间的优先关系的想法是`*`有道理的：它对解析器的输出有影响。

同样，`1 + foo(3)`有两个解析树：

```
 +               ()
 / \             /  \
1   ()          +    3
   /  \        / \
 foo   3      1  foo 
```

因此，“+”产生式和函数调用产生式之间的优先关系的想法再次有意义。的情况`1 + foo[3]`（使用下标产生代替函数调用产生）是类似的，因此指定“+”产生和下标产生之间的优先关系是有意义的。

现在考虑`1 + (2 * 3)`。该文法只能产生一种可能的解析树：

```
 +
 / \
1  ( )
    |
    *
   / \
  2   3 
```

产生式和分组产生式之间不需要优先关系`+`，因为只有一种方法可以解析这个输入。指定分组产生式比产生式具有更高的优先级是没有意义的`+`，因为没有其他解析树可以通过这样做产生。

最后，考虑`1 + [2 add:3]`。这类似于分组示例。只有一种可能的解析树：

```
 +
  / \
 /   \
1   [ ]
   / | \
  /  |  \
 2  add  3 
```

没有其他解析树是可能的。不需要指定`+`生产和消息发送生产之间的优先关系。指定它们之间的优先关系不会产生任何影响，因为语法根本不允许以任何其他方式解析此输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:40:19.577

它们属于同一优先级组。我相信消息 send [] 等同于 () 因为运行时在消息的情况下将它们视为括号。

[http://www.techotopia.com/index.php/Objective-C_2.0_Operator_Precedence](http://www.techotopia.com/index.php/Objective-C_2.0_Operator_Precedence)

# user-feedback - tfs 反馈是否可以通过 TFS Web Access 接收而无需安装 feedbackclient.exe？

> ID：15371418
> 
> 赞同：3
> 
> 时间：2013-03-12T20:25:54.697
> 
> 标签：user-feedback, tfs-web-access

在 TFS2012 上，是否可以向正在使用 Web 客户端的客户请求反馈，而无需在他们的机器上安装 feedbackclient.exe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:49:49.380

[Usersnap](http://usersnap.com "用户快照")允许客户添加反馈，而无需在本地安装任何东西。它集成到 Microsoft Team Foundation Service 中（这意味着，来自客户的每个反馈都会自动创建为 TFS 工作流中的票证）。

您的客户甚至不需要 TFS 中的帐户来提供反馈。

将 Usersnap 与 TFS 集成很容易，您可以在此处查看文档：[https ://usersnap.com/support/docs/apicfg#tfs](https://usersnap.com/support/docs/apicfg#tfs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:54:51.170

要像[这里](http://tfs.visualstudio.com/en-us/learn/collaborate/feedback/)解释的那样处理反馈请求，如果不安装客户端工具，就无法提供反馈。

我认为它也可以通过登录 TFS Web 界面然后打开反馈请求并回答它，但显然在我自己测试之后我没有直接找到解决方案。尽管反馈将完全手动填写，而客户端工具提供了所有需要的工具。

# scala - foldLeft 内的 padTo 错误

> ID：15371426
> 
> 赞同：2
> 
> 时间：2013-03-12T20:26:18.193
> 
> 标签：scala

我正在学习自己的 Scala，而我编写的一个小型测试应用程序并没有按照我期望的方式工作。有人可以帮我理解为什么我的测试应用程序失败了。

我的小型测试应用程序包含一个“解压缩”方法，该方法执行以下“解压缩”

```
 val testList = List(Tuple2(4, 'a'), Tuple2(1, 'b'), Tuple2(2, 'c'), Tuple2(2, 'a'), Tuple2(1, 'd'), Tuple2(4, 'e'))
  require(decompress(testList) == List('a', 'a', 'a', 'a', 'b', 'c', 'c', 'a', 'a', 'd', 'e', 'e', 'e', 'e')) 
```

换句话说，Tuple2 对象应该被“解压缩”成更详细的形式。然而，我从该方法中得到的只是 List('a', 'a', 'a', 'a') - padTo 语句适用于第一个 Tuple2 但它突然停止工作？但是，如果我使用 for 循环对每个元素进行填充 - 一切正常......？

完整代码：

```
object P12 extends App {

  def decompress(tList: List[Tuple2[Int,Any]]): List[Any] = {
    val startingList: List[Any] = List();
    val newList = tList.foldLeft(startingList)((b,a) => {
      val padCount = a._1;
      val padElement = a._2;

      println
      println("  Current list: " + b)
      println("  Current padCount: " + padCount)
      println("  Current padElement: " + padElement)
      println("  Padded using padTo: " + b.padTo(padCount, padElement))
      println

      // This doesn't work
      b.padTo(padCount, padElement)

//      // This works, yay
//      var tmpNewList = b;
//      for (i <- 1 to padCount)
//        tmpNewList = tmpNewList :+ padElement
//      tmpNewList
    })
    newList
  }

  val testList = List(Tuple2(4, 'a'), Tuple2(1, 'b'), Tuple2(2, 'c'), Tuple2(2, 'a'), Tuple2(1, 'd'), Tuple2(4, 'e'))
  require(decompress(testList) == List('a', 'a', 'a', 'a', 'b', 'c', 'c', 'a', 'a', 'd', 'e', 'e', 'e', 'e'))
  println("Everything is okay!")
} 
```

任何帮助表示赞赏 - 学习 Scala，只是无法用我目前的 Scala 知识自己解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:36:25.027

您可以像这样进行解压缩：

```
val list = List(Tuple2(4, 'a'), Tuple2(1, 'b'), Tuple2(2, 'c'), Tuple2(2, 'a'), Tuple2(1, 'd'), Tuple2(4, 'e'))
list.flatMap{case (times, value) => Seq.fill(times)(value)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:43:51.853

问题是 padTo 实际上将列表填充到给定大小。所以第一次它使用填充的 4 个元素，但下一次你必须添加当前列表的实际长度 - 因此：

```
def decompress(tList: List[Tuple2[Int,Any]]): List[Any] = {
  val newList = tList.foldLeft(List[Any]())((b,a) => {
   b.padTo(a._1+b.length, a._2)
 }) 
 newList
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:36:00.707

这有效：

```
scala> testList.foldLeft(List[Char]()){ case (xs, (count, elem)) => xs ++ List(elem).padTo(count, elem)}
res7: List[Char] = List(a, a, a, a, b, c, c, a, a, d, e, e, e, e) 
```

问题实际上是当你说`b.padTo(padCount, padElement)`你总是使用相同的列表 ( `b`) 来填充元素时。因为第一个元组数据生成的元素最多，所以在下一步中没有添加任何内容`foldLeft`。如果您更改第二个元组数据，您将看到更改：

```
scala> val testList = List(Tuple2(3, 'a'), Tuple2(4, 'b'))
testList: List[(Int, Char)] = List((3,a), (4,b))

scala> testList.foldLeft(List[Char]()){ case (xs, (count, elem)) => xs.padTo(count, elem)}
res11: List[Char] = List(a, a, a, b) 
```

而不是`foldLeft`你也可以`flatMap`用来生成元素：

```
scala> testList flatMap { case (count, elem) => List(elem).padTo(count, elem) }
res8: List[Char] = List(a, a, a, a, b, c, c, a, a, d, e, e, e, e) 
```

顺便说一句，`Tuple(3, 'a')`可以写`(3, 'a')`或`3 -> 'a'`

请注意，`padTo`当您的数据计数为 <= 0 时，它不会按预期工作：

```
scala> List(0 -> 'a') flatMap { case (count, elem) => List(elem).padTo(count, elem) }
res31: List[Char] = List(a) 
```

因此使用 Garret Hall 提到的解决方案：

```
def decompress[A](xs: Seq[(Int, A)]) =
  xs flatMap { case (count, elem) => Seq.fill(count)(elem) }

scala> decompress(List(2 -> 'a', 3 -> 'b', 2 -> 'c', 0 -> 'd'))
res34: Seq[Char] = List(a, a, b, b, b, c, c)

scala> decompress(List(2 -> 0, 3 -> 1, 2 -> 2))
res35: Seq[Int] = List(0, 0, 1, 1, 1, 2, 2) 
```

应参考使用泛型类型签名，以便始终返回正确的类型。

# ios - 用户可以在本地禁用推送通知的声音吗？

> ID：15371430
> 
> 赞同：0
> 
> 时间：2013-03-12T20:26:33.367
> 
> 标签：ios, apple-push-notifications

我正在使用 APN，我有两个关于使用声音或嗡嗡声的问题。

1.  我们可以让设备发出嗡嗡声，而不是播放声音吗？
2.  用户可以通过我的应用程序的本地系统设置禁用声音吗？如果没有，我必须构建一个远程服务，让他们选择退出推送通知的声音，并将该选项存储在我的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:28:05.107

我不知道只是嗡嗡声，但是是的，用户可以禁用来自您的应用程序的推送通知的声音。在您的应用程序的通知设置中有一个名为“声音”的开关，就在“徽章应用程序图标”下方。

![Riposte 推送通知首选项的屏幕截图](../Images/09eca5a900519b298de17ef831b95b51.png)

# sql - 我想选择 sql 列中的最大字段，但也按顺序列出其余字段

> ID：15371433
> 
> 赞同：0
> 
> 时间：2013-03-12T20:26:54.803
> 
> 标签：sql

我的 sql 表只有一列，它是“ID”

```
select MAX(id) from eve.db.dde 
```

它只返回 1 字段（最高）

如何按从高到低的顺序返回所有字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:28:42.737

```
SELECT id FROM eve.db.dde ORDER BY ID DESC 
```

# mysql - 如何从 SQL 中的 COUNT 中选择 MAX

> ID：15371434
> 
> 赞同：3
> 
> 时间：2013-03-12T20:26:58.947
> 
> 标签：mysql, sql, count, max

![在此处输入图像描述](../Images/2b1359c217b07d055f32e36e590c0e8b.png)

那是我桌子的照片。

我必须在“Tegund”是最常见值的所有汽车中选择“Fastanumer”（在这个例子中是丰田）

这是我试过的代码

```
SELECT Fastanumer FROM  `Bill` 
WHERE Tegund =  
(SELECT MAX(y.cnt) FROM (SELECT COUNT(Tegund) AS cnt FROM Bill ) AS y) 
```

我不得不非常努力地弄清楚，最终却因为 MAX 只会变成一个数字这一事实而自责。（而且由于 Tegund 不是数字列表......）

这甚至可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:34:49.423

我想它应该这样工作：

```
SELECT Fastanumer 
FROM  `Bill` 
WHERE Tegund = (
    SELECT Tegund 
    FROM (
        SELECT Tegund,COUNT(*) FROM Bill GROUP BY Tegund ORDER BY COUNT(*) DESC LIMIT 1
    ) t1
) 
```

甚至像这样：

```
SELECT Fastanumer 
FROM  `Bill` 
WHERE Tegund = (
    SELECT Tegund FROM Bill GROUP BY Tegund ORDER BY COUNT(*) DESC LIMIT 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:32:15.900

这是我的解决方案：

```
SELECT Bill.*
FROM Bill
WHERE Tegund IN (
  SELECT Tegund
  FROM Bill
  GROUP BY Tegund
  HAVING COUNT(*) = (
    SELECT MAX(cnt) FROM (
      SELECT COUNT(*) cnt
      FROM Bill
      GROUP BY Tegund
    ) s
  )
) 
```

比其他的稍微复杂一些，但是如果多个`Tegund`共享相同数量的行，此查询将显示所有最常见的 Tegunds。

请[在此处](http://sqlfiddle.com/#!2/64379/1)或[此处](http://sqlfiddle.com/#!2/64379/3)查看小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:37:42.920

您首先要做的是找出`Tegund`在您的表格中出现最多的那个。这就是子查询正在做的事情。然后您将选择与`Fastanumer`该匹配的`Tegund`。

```
SELECT DISTINCT Fastanumer 
FROM 'BILL'
WHERE Tegund = (
    SELECT TOPT 1 Tegund, 
                  COUNT(*) as Count
    FROM `BILL`
    GROUP BY Tegund
    ORDER BY Count DESC) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:41:20.797

取决于数据库（和相关的 SQL）。尝试

```
select fastanumber from bill
    inner join
(select count(*) as cnt, tegund from Bill group by tegund) grpby
    on bill.tegund = grpby.tegund
    and grpby.cnt = (select max(cnt) from (select count(*) as cnt, tegund from Bill group by tegund)) 
```

# ajax - 将 ajax 收集的数据发送到当前用户数据库 Wordpress

> ID：15371439
> 
> 赞同：0
> 
> 时间：2013-03-12T20:27:08.143
> 
> 标签：ajax, database, geolocation, wordpress

我正在使用 WooCommerce 并添加了一个附加字段“location_gps”来收集位置（纬度、经度）添加了 ajax 调用来收集数据。现在我被困在将数据输入当前用户（user_meta）中。

在 funtions.php 中添加了这个

```
// AJAX - implementation  

function add_myscript(){
    wp_enqueue_script( 'my-ajax.js', get_bloginfo('template_directory') . "/scripts/my-ajax.js", array( 'jquery' ) );
}
add_action( 'init', 'add_myscript' );

function myAjax(){

global $wpdb;

//get data from our ajax() call
$long = $_POST['long'];
$lat = $_POST['lat'];

$results = "<p>".$lat.", ".$long."</p>";  // this is how it supposed to land in the DB

if($wpdb->insert('location_gps',array(
'long'=>$long,
'lat'=>$lat,
))===FALSE){

echo "Error";

}
else {
echo "Successfully added, row ID is ".$wpdb->insert_id;

}
die();
}

// create custom Ajax call for WordPress
add_action( 'wp_ajax_nopriv_myAjax', 'myAjax' );
add_action( 'wp_ajax_myAjax', 'myAjax' ); 
```

这里是JS部分..

```
jQuery(document).ready(function() {

    jQuery("#save_loc_button").click(function(){
        var long = jQuery("input#long").val();
        var lat = jQuery("input#lat").val();

        jQuery.ajax({
            type: 'POST',
            url: '/wp-admin/admin-ajax.php',
            data: { "action": "myAjax", "lat": lat, "long": long },
            beforeSend: function(){
             jQuery("#test-div").html('processing...');
        },
            success: function(event, request, settings){
                jQuery("#test-div").html('');
                jQuery("#test-div").append(event);

            },
            error: function(MLHttpRequest, textStatus, errorThrown){
                alert(errorThrown);
            }
        });
    });

}); 
```

# css - When using form-search and input-append to create a search form, the search button show up short

> ID：15371440
> 
> 赞同：2
> 
> 时间：2013-03-12T20:27:08.153
> 
> 标签：css, twitter-bootstrap

Here's the [fiddle](http://jsfiddle.net/tk8Dc/) and code below:

```
<form class="form-search">
    <div class="input-append">
        <input type="text" id="search-query" class="search-query" />
        <input type="button" id="search-submit" value="Find" class="btn" />
    </div>
</form> 
```

The button shows up fine in IE or Chrome, but when viewed with FF (ver 15 at least), the button show up a little short. Am I not using the Bootstrap correctly?

![enter image description here](../Images/bebffc6f7e814f2268dc1fb81479d5a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:49:28.477

From the [doc](http://twitter.github.com/bootstrap/base-css.html#forms), you should use `button` where you are using `input`:

```
<form class="form-search">
    <div class="input-append">
        <input type="text" id="search-query" class="search-query" />
        <button type="button" id="search-submit" class="btn" >Find</button>
    </div>
</form> 
```

[http://jsfiddle.net/tk8Dc/7/](http://jsfiddle.net/tk8Dc/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:48:50.053

Add `height: auto;` on the input textarea

Another good trait (just another tip)to use on input is:

```
box-sizing: border-box;
-webkitbox-sizing: border-box;
-moz-box-sizing: border-box; 
```

# excel - 在 Word 中引用 Excel 单元格

> ID：15371442
> 
> 赞同：12
> 
> 时间：2013-03-12T20:27:13.450
> 
> 标签：excel, ms-word, excel-formula

有谁知道直接在 Word 文档中引用 Excel 单元格的预打包解决方案？

例如，

> ```
>  {[TestExcel]Tab1!A1} 
> ```
> 
> 尊敬的 {[TestExcel]Tab1!A2} 先生，
> 
> 我们的系统已提醒我们您的帐户 {TestExcel]Tab1!AccountNumber} 已过期。请立即汇款 {TestExcel]Tab1!PaymentDue}。

此示例使用假设的 { } 语法，其中内容是标准 Excel 公式。

我见过的每个解决方案都使用自定义 VBA 来实现这一点。这似乎是一个非常普遍的需求，应该有一些好的第三方软件可以让非技术用户完成这项任务。

如上例所示，命名范围和标准单元格引用都需要支持。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T20:30:22.813

是的。

第1步：复制excel单元格。

第 2 步：转到要粘贴参考的 Word 文档。

第三步：右键

第 4 步：在粘贴选项下，选择“使用源格式链接”或“链接并合并格式”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-29T23:43:02.020

我尝试了@Green Demon 的方法，但列出的两个粘贴选项对我来说不存在（Office 2013）。我只有保留源格式、合并格式和仅保留文本。但是，我四处寻找，发现隐藏在功能区上的特殊粘贴

说明如下：

1.  复制 Excel 范围。
2.  转到您的 Word 文档，然后**左键**单击要粘贴 Excel 范围的位置。
3.  从功能区单击选择性粘贴，如下所示，或键入`Ctrl+Alt+V`。

[![选择性粘贴在 Word 2013 功能区上的位置](../Images/486f9d2a33bfe1bbbbdcab696d4a87c7.png)](https://i.stack.imgur.com/QsrxG.png)

4.  单击粘贴链接单选按钮。
5.  单击 Microsoft Excel 工作表对象。“选择性粘贴”对话框应如下所示：

[![选择性粘贴对话框](../Images/f9f7e650ed116b93ec9b3af23f871432.png)](https://i.stack.imgur.com/Jj3ah.png)

6.  单击确定。

该范围现在应该粘贴到您的文档中，如果您保存、关闭并重新打开 Word 文档，系统将提示您是否要“使用链接文件中的数据更新此文档”，这与进行 Excel 到 Excel 链接时的工作方式相同。

这个功能太棒了，我很高兴今天找到了它。但是，在我使用它的简短经验中，拥有这些 Word 到 Excel 链接会大大增加打开 Word 文档所需的时间，甚至在它提示您更新之前。之后，更新 Excel 链接的操作比您执行相同的 Excel 到 Excel 链接所花费的时间要长得多。我所有的工作都是在网络共享文件上完成的，所以 YMMV。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-22T14:36:37.840

虽然 Will 的解决方案确实从 Cell 对象链接，但内容是作为图片插入的。

在同一个对话框中，选择“未格式化的 Unicode 文本”将链接并仅插入单元格的内容，如果您在文本上应用自定义格式，这是可取的。

不幸的是，此操作仅适用于单个单元格。复制多个单元格将生成一个文本块，其中单个单元格内容由制表符或跳行分隔，整个块被认为是链接的和完整的。解决方案是使用此方法链接各个单元格。

This can become tedious if you plan on linking large portions of table from Excel, as for every cell the dialog must be invoked. It can be sped up by using hotkeys, but the sequence gets tedious:

`alt`,`h`,`v`,`s`, then `alt`+`l`, `tab`, `↓</kbd>, and finally `Enter``

Obviously this is not practial for large numbers of cells. A AutoHotkey script can help but it third party grafted solution, on par with using VBA scripts.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T07:29:53.287

`alt`+ `h`+ `v`+`l`也有效。如果您正在构建大型文档，则每次单击功能区都会在一段时间后变得杀气腾腾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-14T09:39:59.587

As this is still a problem but the other answers do not take into account the latest development in word, there is a new solution, editing Green Demons answer:

Step 1: Copy the excel cell.

Step 2: Go to your word document where you want to paste the reference.

Step 3: go to the "home" tab

第4步：在粘贴选项下，转到“选择性粘贴”，单击“粘贴链接”，单击“无格式文本”。

这解决了其他人在使用新线路时遇到的问题，而您在使用 Green Demons 的解决方案时会遇到这些问题。

希望这仍然对其他人有所帮助。

# codeigniter - codeigniter 数据库错误提示

> ID：15371447
> 
> 赞同：-2
> 
> 时间：2013-03-12T20:27:26.933
> 
> 标签：codeigniter, codeigniter-2

我在模型中有以下代码：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Membership_model extends CI_Model 
{

    function __construct()
    {
        parent::__construct();
    }

    public function register_user($info)
    {
        if(isset($info))
        {
            $data = array(
               'fullname' => $info['fullname'] ,
               'mobile' =>  $info['mobile'] ,
               'telephone' =>  $info['home'] ,
               'username' =>  $info['username'] ,
               'password' =>  $info['password'] ,
               'email' =>  $info['email'] ,
               'member_type' =>  $info['memberType'] 
            );

            $this->db->insert('users', $data);
        }
    }

} 
```

并在控制器中这样称呼它：

```
$info = array('fullname' => $fullname , 'mobile' => $mobile, 'home' => $home,
              'username' => $username, 'password' => $password,        
              'memberType' => $memberType, 'email' => $email );

$this->membershipModel->register_user($info); 
```

不过，我收到了这个错误：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Membership::$db
> 
> 文件名：core/Model.php
> 
> 行号：51

知道这意味着什么吗？问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:52:29.330

在 CodeIgniter 中，类和方法名区分大小写：

```
$this->membershipModel->register_user($info); 
```

应该读...

```
$this->Membership_model->register_user($info); 
```

**注意**
确保将模型文件命名为：`membership_model.php`CodeIgniter 文档中指定的名称。

# java - 转换为十进制格式时出错

> ID：15371448
> 
> 赞同：0
> 
> 时间：2013-03-12T20:27:31.920
> 
> 标签：java, android, mysql, coordinates, decimalformat

嘿伙计们，我正在使用 gps 位置，所以我正在获取坐标，我现在需要将这些坐标传递给我的 Web 服务并将其存储到我的数据库中。但是我无法以正确的方式存储它，我认为我得到的数据对于数据库来说太大了，这就是我试图将坐标转换为十进制格式的原因。当我将 DecimaFormat 方法放入我的代码中时，我遇到了一些错误，你们能帮帮我吗？

这些是错误：

```
03-13 22:03:16.733: E/WindowManager(1018): Activity com.example.projectthesis.Mapping2 has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41319870 that was originally added here
03-13 22:03:16.733: E/WindowManager(1018): android.view.WindowLeaked: Activity com.example.projectthesis.Mapping2 has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41319870 that was originally added here
03-13 22:03:16.733: E/WindowManager(1018):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
03-13 22:03:16.733: E/WindowManager(1018):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
03-13 22:03:16.733: E/WindowManager(1018):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
03-13 22:03:16.733: E/WindowManager(1018):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
03-13 22:03:16.733: E/WindowManager(1018):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
03-13 22:03:16.733: E/WindowManager(1018):  at android.app.Dialog.show(Dialog.java:278)
03-13 22:03:16.733: E/WindowManager(1018):  at com.example.projectthesis.Mapping2$phpconnect.onPreExecute(Mapping2.java:190)
03-13 22:03:16.733: E/WindowManager(1018):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
03-13 22:03:16.733: E/WindowManager(1018):  at android.os.AsyncTask.execute(AsyncTask.java:511)
03-13 22:03:16.733: E/WindowManager(1018):  at com.example.projectthesis.Mapping2$GPSLocationListener.onLocationChanged(Mapping2.java:124)
03-13 22:03:16.733: E/WindowManager(1018):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:234)
03-13 22:03:16.733: E/WindowManager(1018):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:167)
03-13 22:03:16.733: E/WindowManager(1018):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:183)
03-13 22:03:16.733: E/WindowManager(1018):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 22:03:16.733: E/WindowManager(1018):  at android.os.Looper.loop(Looper.java:137)
03-13 22:03:16.733: E/WindowManager(1018):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-13 22:03:16.733: E/WindowManager(1018):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 22:03:16.733: E/WindowManager(1018):  at java.lang.reflect.Method.invoke(Method.java:511)
03-13 22:03:16.733: E/WindowManager(1018):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-13 22:03:16.733: E/WindowManager(1018):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-13 22:03:16.733: E/WindowManager(1018):  at dalvik.system.NativeStart.main(Native Method) 
```

这些是我的代码（特别是在传递过程和 DecimalFormat 方法上）：

```
class phpconnect extends AsyncTask<String, String, String> {
        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Mapping2.this);
            pDialog.setMessage("Logging in..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }
        @Override
        protected String doInBackground(String... args) {
            String strLatitude = Long.toString(ILatitude);
            String strLongitude = Long.toString(ILongitude);

            DecimalFormat df = new DecimalFormat("###.00000");
            String frmLat = df.format(strLatitude);
            String frmLong = df.format(strLongitude);
            // Building parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("latitude", frmLat));
            params.add(new BasicNameValuePair("longitude", frmLong));
            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);
            // check log cat fro response
            Log.d("Create Response", json.toString());
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // successfully updated
                    Intent i = new Intent(getApplicationContext(),
                            Mapping2.class);

                    startActivity(i);
                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:00:35.217

我在您的代码中发现奇怪的是 ILatitude 和 ILongitude 显然属于这种`Long`类型。纬度和经度更好地表示为`double`值。我认为`DecimalFormat`这里并不真正需要，一个简单的`String.valueOf(ILatitude);`就足够了，考虑到你让 ILatitude 成为双倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:41:46.877

您应该将 a`long`或 a传递`double`给该`format`方法。当您传递一个`String`对象时，该方法会抛出一个`IllegalArgumentException`导致您的`doInBackground`方法过早结束的方法。因此，您在其中创建的对话框`onPreExecute`不会被关闭并被泄露。

# regex - 如何仅使用 grep/sed 提取子字符串和数字

> ID：15371450
> 
> 赞同：6
> 
> 时间：2013-03-12T20:27:46.577
> 
> 标签：regex, linux, bash, sed

我有一个包含文本和数字的文本文件，我想使用 grep 仅提取我需要的数字，例如，给定一个文件如下：

```
miss rate 0.21  
ipc 222  
stalls n shdmem 112 
```

所以说我只想提取`miss rate`is的数据`0.21`。我如何使用 grep 或 sed 执行此操作？另外，我需要多个数字，而不仅仅是`miss rate`. 也就是说，我可能想要同时获得`0.21`和`112`。示例输出可能如下所示：

```
0.21 222 112 
```

因为我需要稍后绘制的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:43:21.073

如果您*真的*只想为此使用 grep ，那么您可以尝试：

```
grep "miss rate" file | grep -oe '\([0-9.]*\)' 
```

它将首先找到匹配的行，然后只输出数字。

不过，Sed 可能更具可读性：

```
sed -n 's#miss rate ##p' file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T20:35:50.230

改用`awk`：

```
awk '/^miss rate/ { print $3 }' yourfile 
```

要仅使用 grep 执行此操作，您需要非标准扩展，例如使用 GNU grep 使用 PCRE (-P) 和正向后向 (?<=..) 并仅匹配 (-o)：

```
grep -Po '(?<=miss rate ).*' yourfile 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T21:03:59.547

使用带有[grep的](/questions/tagged/grep "show questions tagged 'grep'")[pcre](/questions/tagged/pcre "show questions tagged 'pcre'")引擎的正则表达式技巧[\K](https://stackoverflow.com/questions/13542950/support-of-k-in-regex)的特殊*外观*：

```
grep -oP 'miss rate \K.*' file.txt 
```

或使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")：

```
perl -lne 'print $& if /miss rate \K.*/' file.txt 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-12T22:05:17.483

-and-`grep`解决`cut`方案如下所示：

为每次成功使用 grep 获得第三个字段：

```
grep "^miss rate " yourfile | cut -d ' ' -f 3 
```

或获得第三个字段和其余使用：

```
grep "^miss rate " yourfile | cut -d ' ' -f 3- 
```

或者，如果您使用 bash 并且“未命中率”仅在文件中出现一次，您也可以这样做：

```
a=( $(grep -m 1 "miss rate" yourfile) )
echo ${a[2]} 
```

`${a[2]}`你的结果在哪里。

如果“未命中率”发生得更多，那么您可以循环遍历 grep 输出，只读取您需要的内容。（在 bash 中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:36:11.653

您可以使用：

```
grep -P "miss rate \d+(\.\d+)?" file.txt 
```

或者：

```
grep -E "miss rate [0-9]+(\.[0-9]+)?" 
```

这两个命令都会打印出来`miss rate 0.21`。如果您只想提取数字，为什么不使用 Perl、Sed 或 Awk？

如果你真的想避免这些，也许这会奏效？

```
grep -E "miss rate [0-9]+(\.[0-9]+)?" g | xargs basename | tail -n 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T00:01:12.803

我相信

`sed 's|[^0-9]*\([0-9\.]*\)|\1 |g' fiilename`

会成功的。但是，如果可以的话，每个条目都将在它自己的行上。我确信 sed 有办法生成逗号或空格分隔的列表，但我不是 sed 的所有事物的超级大师。

# c# - 如何使用 DataBinding 实现 ComboBox？

> ID：15371454
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:01.407
> 
> 标签：c#, wpf, data-binding, combobox

我想将以下内容从 Windows 窗体转换为 WPF：

```
achievements = DB.FillDataTable(String.Format("SELECT [id], [category], [name], [description], [count_threshold1], [count_threshold2], [count_threshold3], [count_threshold4], [count_threshold5], [date_threshold], [type], [iconImage] FROM [avatar_achievement] WHERE active = 'Y' ORDER BY [name]"));
                DataRow row = achievements.NewRow();
                row["name"] = String.Empty;
                achievements.Rows.InsertAt(row, 0);
                comboBoxAchName.DataSource = achievements;
                comboBoxAchName.DisplayMember = "name";
                comboBoxAchName.ValueMember = "id"; 
```

非常简单，这会从 SQL DB 中获取一些选择并将它们放入显示“名称”列并将“id”列存储为值的组合框中。现在，当用户在下拉列表中进行选择时，他们会选择“Oranges”，但我的代码可以获取值“222”。我需要两条信息。

我将如何重写那个确切的代码块，以便它可以在 WPF 组合框中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:14:43.503

显然，当我发布这个问题时，我对另一个问题感到疲倦和沮丧......我可以发誓我昨天搜索了整个谷歌......无论如何，这个链接给了我答案：

[wpf 组合框绑定](https://stackoverflow.com/questions/11056196/wpf-combobox-binding)

# jquery - jQuery One Page 和 Bootstrap

> ID：15371455
> 
> 赞同：1
> 
> 时间：2013-03-12T20:28:03.073
> 
> 标签：jquery, twitter-bootstrap

我正在使用带有 twitter bootstrap 的[jQuery One Page Nav 插件。](http://github.com/davist11/jQuery-One-Page-Nav)

它工作正常。链接到同一页面上的区域，如下所示：

```
<li><a href="#section-4">Kontakt</a></li> works great. 
```

但问题是使指向其他页面的链接有效。当我单击链接时没有任何反应：

```
<li><a href="blog.html">Blog</a></li> 
```

**HTML：**

```
<div class="navbar" id="top-nav">
    <div class="navbar-inner">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
           <h1><a class="brand" href="index.html">Logo here</a></h1>
            <div class="nav-collapse collapse">
                <ul class="nav pull-right">

                        <li><a href="#section-2">Cv</a></li>

                        <li><a href="#section-3">Referancer</a></li>

                        <li><a href="#section-4">Kontakt</a></li>

                        <li><a href="blog.html">Blog</a></li>

                </ul>
            </div>
        </div>
</div> 
```

**JS：**

```
$('#top-nav').onePageNav({
            currentClass: 'active',
            changeHash: true,
            scrollSpeed: 1200
           }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:39:57.503

您似乎正试图将博客链接发送到另一个页面 blog.html。

您需要使用过滤器选项来过滤掉这个链接，它记录在这里：[https ://github.com/davist11/jQuery-One-Page-Nav#filter-example](https://github.com/davist11/jQuery-One-Page-Nav#filter-example)

HTML：

```
<li><a href="blog.html" class="external">Blog</a></li> 
```

JS：

```
$('#top-nav').onePageNav({
    currentClass: 'active',
    changeHash: true,
    scrollSpeed: 1200,
    filter: ':not(.external)'
}); 
```

# c++ - 使用getline连续输入行到txt文档C ++的末尾

> ID：15371463
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:40.980
> 
> 标签：c++, input, getline

我有一个很长的 .txt 文件，我想使用 .txt 流式传输`getline`。我想输入整个文本文档，然后通过一个程序运行它。

然后，我想使用不同的值通过相同的过程运行该新字符串，依此类推 2 次。

到目前为止我有

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

void flag(string & line, int len);
void cut(string & line, int numb);

int main()
{
    string flow;
    ifstream input;
    ofstream output;
    input.open(filename.c_str()); //filename ...

    output.open("flow.txt");

    while (!input.fail())
        getline(input, flow);
    flag(flow, 10);
    flag(flow, 20);
    cut(flow, 20);
    cut(flow, 3);

    output << flow;

    return 10;
}
//procedures are defined below. 
```

我在通过一个过程运行整个文件时遇到了麻烦。我将如何使用`getline`.

我试过`getline`, `infile.fail`, `npos`, 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:32:40.450

而不是这个：

```
while(!input.fail())
getline(input, flow);
flag(flow, 10); 
flag(flow, 20); 
cut(flow, 20);
cut(flow, 3); 
```

你可能想要这个：

```
while(getline(input, flow)) {
    flag(flow, 10); 
    flag(flow, 20); 
    cut(flow, 20);
    cut(flow, 3);
} 
```

除非我误解了你，你想先阅读整个文件，然后调用`flag`and `cut`. 在这种情况下，您需要*附加*您读取的字符串：

```
string data;
while(getline(input, flow))  data += flow + '\n'; // add the newline character
                                                  // because getline doesn't save them

flag(data, 10); 
flag(data, 20); 
cut(data, 20);
cut(data, 3); 
```

请注意，它会`getline`覆盖您传递给它的字符串。

此外，`while (!input.fail())`这是一种不好的循环条件。可能会发生没有更多可用输入但流仍不处于失败状态的情况。在这种情况下，最后一次迭代将处理无效输入。

# socket.io - socket.io 断开事件，客户端断开检测

> ID：15371465
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:43.063
> 
> 标签：socket.io

我使用 soсket.io（传输 flashsockets），这是带有 websockets 库（二进制套接字）的客户端 flash 应用程序。如何立即检测客户端断开连接，例如 Internet 连接断开？目前，断开连接事件在设置为 heartbeattimeout 的延迟后触发。如果关闭心跳会发生什么？如果连接从闪存关闭，那么一切都很好。

前端是带有 tcp-proxy-module 的 nginx。这是否需要特定的设置超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:02:30.707

io.set("关闭超时", 1); 参考：[https ://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

# binary - 二进制基数 8 加法的进位会发生什么？

> ID：15371466
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:45.243
> 
> 标签：binary, base

如果我添加 2 个二进制数，10000000 + 10000000，以 8 为基数，会发生什么？携带会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:34:00.677

您不能同时使用二进制（以 2 为基数）和以 8 为基数。我还必须假设您的意思是样本值中的无符号值。您是否想知道这里的溢出、截断或其他问题？简而言之，你真正想要做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:45:46.827

大多数现代 CPU 在其通用标志集中都有一个进位标志 (CF)，它将包含加法后高位的进位。因此，在这种特定情况下，假设无符号值为 0b1000.0000，则总和将为 0b0000.0000，并设置 CF 标志，总“虚拟”值为 0b1.0000.0000，这是正确的总和。然而，正确处理此类溢出高度依赖于底层算法试图做什么。在某些情况下，溢出是可以接受的，但在许多情况下却不是。

# java - 在没有 DecimalFormat 的 Java 中使用模式解析数字

> ID：15371467
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:47.603
> 
> 标签：java, string-parsing

是否有类似的 Java 解析库`DecimalFormat`？我无法用`DecimalFormat`正则表达式做我想做的事。

我需要能够：

*   仅解析一个整数（DecimalFormat 需要更多设置而不仅仅是模式）
*   解析小数（精确无舍入）
*   解析像 123,456.789 这样的数字。（###,###.### 的 DecimalFormat 也接受“123456789”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:23:48.567

您可以尝试将其视为字符串并对其进行标记。

str.split("\\.") 将拆分小数侧，然后将其子串到您的精度，然后在数字侧您可以 split(",")

这是相当多的手动解析工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:20:27.413

我**会**使用正则表达式和`NumberFormat`：

```
Map<Pattern,NumberFormat> POSSIBLE_FORMATS = ...;
String input = ...;
Number value = null;
for (Map.Entry<Pattern,NumberFormat> possible : POSSIBLE_FORMATS.entrySet()) {
  if (possible.getKey().matcher(input).matches()) {
    value = possible.getKeValue().parse(input);
    break;
  }
}
if (value == null) {
  throw new IllegalArgumentExcption("no valid input format: " + input);
} 
```

# c# - 如何在 JSON.NET 中组合/合并两个 JArray

> ID：15371468
> 
> 赞同：16
> 
> 时间：2013-03-12T20:28:51.897
> 
> 标签：c#, json, json.net

我不知道如何连接使用 JArray.Parse 获得的两个 JArray？必须保留数组的顺序，即第一个数组应该是第一个，并且以秒为单位的元素应该在后面。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2017-05-24T15:38:16.613

我使用了[Merge](http://www.newtonsoft.com/json/help/html/M_Newtonsoft_Json_Linq_JContainer_Merge.htm "合并")方法，它修改了原来的 JArray：

```
 JArray test1 = JArray.Parse("[\"john\"]");
 JArray test2 = JArray.Parse("[\"doe\"]");
 test1.Merge(test2); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-12T20:47:59.123

您可以`JArray`通过调用`JArray.Add(element)`where element 来自第二个 JArray 来将元素添加到一个。您需要遍历第二个 JArray 以添加所有这些元素，但这将完成您想要的：

```
for(int i=0; i<jarrayTwo.Count; i++)
{
    jarrayOne.Add(jarrayTwo[i]);
} 
```

在上面的示例中`jarrayOne`，现在将包含第一个数组的所有元素，然后依次包含第二个数组的元素。您可以查看[JArray 文档](http://james.newtonking.com/projects/json/help/#)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-28T06:52:03.800

您还可以使用联合方法：

```
JArray test1 = JArray.Parse("[\"john\"]");
JArray test2 = JArray.Parse("[\"doe\"]");
test1 = new JArray(test1.Union(test2)); 
```

现在`test1`是

```
[
  "john",
  "doe"
] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-11T13:47:15.513

对于您拥有的通用案例，我的两美分`n` `JArray`：

```
IEnumerable<JArray> jarrays = ...
var concatenated = new JArray(jarrays.SelectMany(arr => arr)); 
```

并将其投影到带有两个的原始问题上`JArray`：

```
JArray jarr0 = ...
JArray jarr1 = ...
var concatenated = new JArray(new[] { jarr0, jarr1 }.SelectMany(arr => arr)); 
```

# ios - Facebook iOS SDK 从 App 分享图片

> ID：15371469
> 
> 赞同：0
> 
> 时间：2013-03-12T20:28:52.480
> 
> 标签：ios, facebook, image, sharing

我尝试将图片分享到 Facebook。这是工作。

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   kAppId, @"app_id",
                                   url, @"link",
                                  @"http://yandex.st/morda-logo/i/logo.png", @"picture",
                                   title, @"name",
                                   produc, @"caption",
                                   tempString, @"description",
                                   message, @"message",
                                   nil]; 
```

但我想从我的应用程序中分享图片。我试试

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   kAppId, @"app_id",
                                   url, @"link",
                                  [UIImage imageNamed:@"nav.png"], @"picture",
                                   title, @"name",
                                   produc, @"caption",
                                   tempString, @"description",
                                   message, @"message",
                                   nil]; 
```

但我有问题：

> :frame:decisionListener: delegate: -[UIImage length]: 无法识别的选择器发送到实例 0xc98b1d0

我究竟做错了什么？非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:48:40.927

尝试使用“来源”而不是“图片”。图片需要 url 字符串。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   kAppId, @"app_id",
                                   url, @"link",
                                  [UIImage imageNamed:@"nav.png"], @"source",
                                   title, @"name",
                                   produc, @"caption",
                                   tempString, @"description",
                                   message, @"message",
                                   nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T15:48:33.620

嗯，我不是 Facebook 用户，我不会解码您的位图图像，将图像保存在他们的服务器上并在您的墙上提供 ^^

尝试使用 URL 而不是图像的 NSData 数据。

# android - AccountManager 添加帐户但未显示在“设置”中的“帐户”下

> ID：15371475
> 
> 赞同：4
> 
> 时间：2013-03-12T20:29:13.670
> 
> 标签：android

我按照 android 提供的 SimpleSyncAdapter 示例创建了一个自定义帐户类型。我可以使用客户经理添加帐户，并且在某些手机上（在 Galaxy S3、Galaxy Nexus、HTC Desire HD 上测试），我确实在“设置”中的“帐户和同步”下看到了我的帐户。要添加帐户，我正在执行以下操作：

```
boolean added = mAccountManager.addAccountExplicitly(account, password, null); 
```

但是，在 Galaxy Note 2 和 Motorola Xoom 上，即使返回 true，该帐户也不会出现在 Accounts and Sync 下。

有没有人见过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T01:24:37.827

我错过了 setAccountAuthenticatorResult 调用。

```
boolean added = mAccountManager.addAccountExplicitly(account, password, new Bundle());
final Intent intent = new Intent();
intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, username);
intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, accountType);
setAccountAuthenticatorResult(intent.getExtras());
setResult(RESULT_OK, intent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:10:11.730

我遇到了这个问题，因为我在模拟器上遇到了同样的问题。我可以通过 AccountManager 访问帐户详细信息，但它没有显示在 Accounts & Sync 中。我终于在选中“擦除用户数据”的情况下重新启动了模拟器，问题就消失了。

我不知道如何在您的设备上模拟该过程，但也许使用 AccountManager.removeAccount(...) 删除所述帐户将清除一些旧帐户数据并允许您重置帐户。Account 数据、AccountManager 和 SyncAdapter 配置以及 Accounts & Sync 中的 Account 可用性之间显然存在脱节。我只是不明白它在哪里。

我希望这有助于知识渊博的贡献者更完整地回答原始问题。

# c# - 使用 ListBox 会锁定窗体上的其他控件

> ID：15371476
> 
> 赞同：0
> 
> 时间：2013-03-12T20:29:17.453
> 
> 标签：c#, winforms, listbox

我在 Windows 应用程序中有一个包含多个控件的表单：单选按钮、命令按钮、文本框、datagridview 和 ListBox。

dataGridView 绑定到一个数据表，而 ListBox 绑定到另一个数据表。我使用单选按钮和 ListBox 来过滤 dataGridView 的内容。

如果我单击任何单选按钮，网格中的数据会相应更改。我也可以单击其他控件，它们也会响应。

我也可以毫无问题地滚动 ListBox。但是，一旦我单击 ListBox 中的某个项目，数据网格就会更新，并会随着从 ListBox 中选择的每个项目继续更新。但是所有其他控件都处于非活动状态，就好像它们被锁定了一样。

是什么原因造成的，我该如何解决？

这是代码：

```
 private void lstColor_SelectedIndexChanged(object sender, EventArgs e)
    {
            viewLocalMatsALLBindingSource.Filter = "GRM_COLOR_DESCR = '" + lstColor.Text + "'";
    }

    private void rdbLogomat_CheckedChanged(object sender, EventArgs e)
    {
        if (rdbLogomat.Checked)
        {
            viewLocalMatsALLBindingSource.Filter = "Description LIKE '%LOGO%' OR Description LIKE '%LO-GO%'";
        }
    } 
```

广播事件工作得很好，我可以使用表单上的其他控件。但是 ListBox 事件会导致所有其他控件冻结，甚至是窗口上的红色“X”关闭按钮。但是，在列表框中选择一个项目后，我可以选择数据网格中的单元格和行。但是，如果我尝试在单元格中键入任何内容，则 ListBox 所选项目会根据我键入的字符而更改。（数据网格是只读的，所以编辑单元格没有意义。）显然列表框保持焦点，但我不知道如何失去焦点。另一件事是我可以对数据网格中的列进行排序，直到我从 ListBox 中选择一个项目，然后该功能消失。

# silverlight - Silverlight 未处理错误

> ID：15371479
> 
> 赞同：0
> 
> 时间：2013-03-12T20:29:24.907
> 
> 标签：silverlight, silverlight-4.0

对于其中一位用户，我在 Silverlight 中收到以下错误。目标运行时是 4.1.10329.0，应用程序是使用 Silverlight 4 构建的。我碰巧不明白可能是什么问题。看起来它正试图在 LoadComponent 上加载一些东西并且失败了：

```
Message: Unhandled Error in Silverlight Application 
Parser_CreateFromValue_CannotConvertInitializationText]
Arguments: PropertyChanged,System.Windows.Data.UpdateSourceTrigger
Debugging resource strings are unavailable. Often the key and arguments provide   
sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/? 
linkid=106663&Version=4.1.10329.0&File=System.Windows.dll&Key=
Parser_CreateFromValue_Cannot    ConvertInitializationText 
[Line: 582 Position: 273]    at    
System.Windows.Application.LoadComponent(Object   component, Uri resourceLocator)
at Samplexxx.MainPage.InitializeComponent()
at Samplexxx.MainPage..ctor()
at Samplexxx.App.Application_Startup(Object sender, StartupEventArgs e)
at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate  
handlerDelegate, Object sender, Object args)
at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs,
Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:35:44.643

在服务器上打开 IIS，转到 HTTP 标头，单击 Mime Types，单击“Add New”并添加以下内容：

扩展名 – Mime 类型 .xaml – application/xaml+xml .xap – application/x-silverlight-app .xbap – application/x-ms-xbap

# php - 从数据库问题中查询嵌套关联数组

> ID：15371481
> 
> 赞同：0
> 
> 时间：2013-03-12T20:29:27.440
> 
> 标签：php, javascript, mysql

您好我正在尝试查询一个关联数组，其中最终结果应该如下面的这个 json 数组所示。但是我希望数据部分和 id 名称部分为每个节点查询一次，如果一个节点有多个邻接关系，我希望邻接部分查询多次，如果条件是，我如何多次查询这个嵌套数组的一个部分在保持这种结构但节点有多个邻接或没有邻接的同时遇到其余的所有？

```
 var json =[{
        "adjacencies": [{
           "nodeTo": "graphnode9",
           "nodeFrom": "graphnode5",
           "data": {}
        }],
        "data": {
            "$color": "#C74243",
            "$type": "triangle",
        },
        "id": "graphnode5",
        "name": "graphnode5"
  }]; 
```

这是我的数据库结构

```
nodes                 Relationships                      
-----                 -------------
id int(11),           id int(11),
name varchar(35),     to int(11), //this is the destination node from the id relation 
color varchar(7),     data varchar(0) null
type varchar (12),    Foreign key (id) references nodes(id)
Primary key (id)       

engine = innodb 
```

这是我获取关联数组的尝试，但它一次查询并复制整个结构。

```
function getjson(){  
    $db = adodbConnect();
    $query = "SELECT nodes.*, relationships.* FROM nodes inner JOIN relationships ON nodes.id = relationships.id";
    $result = $db -> Execute($query);

    while($row=$result->FetchRow()) {
        $id = (float)$row['id'];
        $name = $row['name'];
        $color1 = $row['color'];
        $type1 = $row['type'];
        $to = (float)$row['to'];

        $array = array(
            "adjacencies:" => array(
                "nodeTo" => "$to",
                "nodeFrom" => "$id",
                "data" => array()
            ),
            "data" => array(
               "$"."color" => $color1,
               "$"."type" => $type1
            ),
            "id".":" => $id,
            "name".":" => $name
        );

    }
    print"$array";
    json_encode($array);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:40:30.870

您需要在循环之外创建数组并向其中添加项目

```
$array = array();
while($row=$result->FetchRow()) {
    $array[] = array(
        "adjacencies:" => array(
            "nodeTo" => (float)$row['to'],
            "nodeFrom" => (float)$row['id'],
            "data" => array()
        ),
        "data" => array(
           '$color' => $row['color'],
           '$type' => $row['type']
        ),
        "id" => (float)$row['id'],
        "name" => $row['name']
    );

} 
```

# shell - 无法在 TCL (Linux/Unix) 中使用环境变量

> ID：15371487
> 
> 赞同：1
> 
> 时间：2013-03-12T20:29:47.220
> 
> 标签：shell, tcl

我在尝试在 TCL 中使用环境变量时遇到了困难。

所以我有一个 shell 脚本，它导出了一堆环境变量，以便我的 TCL 脚本以后可以使用它们。

**set_vars.sh**中包含以下代码：

`export TEST_ENV_VAR=Test`

以及以下作品：

> % 放 $env(TEST_ENV_VAR)
> 
> 测试

但是，一旦我将环境变量放在运算符或引号中，则不会返回任何内容。

> % puts "$env(TEST_ENV_VAR) 在 TEST_ENV_VAR"
> 
> 在 TEST_ENV_VAR 中

有谁知道可能是什么问题？任何帮助将不胜感激。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T22:16:30.620

一定有一些你没有向我们展示的东西：

```
$ export TEST_ENV_VAR=Test
$ tclsh
% puts $env(TEST_ENV_VAR)
Test
% puts "$env(TEST_ENV_VAR) is in TEST_ENV_VAR"
Test is in TEST_ENV_VAR 
```

请注意，这`env`是一个**全局**变量，因此如果您在过程中使用它，则必须将其声明为`global`

```
$ tclsh
% proc show_env1 {varname} {
    puts "does not work: $env($varname)"
}
% show_env1 TEST_ENV_VAR
can't read "env(TEST_ENV_VAR)": no such variable
% proc show_env2 {varname} {
    global env
    puts "works: $env($varname)"
}
% show_env2 TEST_ENV_VAR
works: Test
% proc show_env3 {varname} {
    puts "also works: $::env($varname)"
}
% show_env3 TEST_ENV_VAR
also works: Test 
```

# c# - ASP.NET MVC Web API 值编码

> ID：15371494
> 
> 赞同：2
> 
> 时间：2013-03-12T20:30:07.940
> 
> 标签：c#, encoding, asp.net-web-api

我将值从 C# 应用程序传递到已创建的 ASP.NET MVC Web API。我了解到，当我的值包含“\”时，如下所示：

```
{ id:"1", path:"D:\Backup\DataSource\MyFile.txt", name:"test" } 
```

MyAction 中的参数为空。

```
[HttpPost]
public CustomResponse MyAction(CustomEntity entity)
{
  ... // do stuff
}

public class CustomEntity
{
  public string id { get; set; }
  public string path { get; set; }
  public string name { get; set; }
} 
```

如果路径不包含“\”，则一切都按预期工作。我猜这是某种类型的编码问题。但是，在将值从 C# 应用程序发送到 Web API 之前，我不确定需要使用哪种编码。

我需要使用哪种编码？

# python - 在 python 上带有 Selenium 的 PhantomJS 1.8。如何阻止图像？

> ID：15371495
> 
> 赞同：12
> 
> 时间：2013-03-12T20:30:10.887
> 
> 标签：python, selenium, phantomjs

有没有办法在 Selenium 上配置 PhantomJS webdriver 以不加载图像？我知道如果我直接使用 phantomjs，我可以启动它`--load-images=no`并且它不会加载图像，但是如何通过 Selenium 和 Python 配置它？

更新尝试了以下方法：

```
args = {
    'desired_capabilities': {
         'loadImages': False
     }
}
driver = webdriver.PhantomJS(**args) 
```

没有成功...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-16T09:22:00.273

你为什么不尝试`webdriver.PhantomJS(service_args=['--load-images=no'])`？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T15:59:11.530

编辑：传递参数被暴露，请参阅下面提到的相同答案以了解如何做

将参数传递给 phantomjs 目前没有通过 selenium 的 webdriver 的 init 公开......[我已经通过猴子修补 PhantomJS 执行](https://stackoverflow.com/a/15699530/742390)器来解决这个问题。检查将 service_args 更改为以下内容的答案：

```
service_args += [
    '--load-images=no',
] 
```

您也可以选择自己启动 phantomjs 服务器，只需使用以下调用指向端口 8080 上已经运行的 phantomjs

```
# init the webdriver
self.driver = webdriver.PhantomJS(port=8080) 
```

# vim - 在没有有效文件扩展名的情况下检测 vim 中的文件类型

> ID：15371499
> 
> 赞同：6
> 
> 时间：2013-03-12T20:30:25.460
> 
> 标签：vim, syntax-highlighting, file-type, vim-syntax-highlighting

我正在寻找一种方法来确定 vim 中文件的文件类型并根据文件类型设置语法突出显示。唯一的问题是我不能使用文件扩展名来确定文件类型。

这是我的场景：我使用`vimdiff`or`gvimdiff`作为我的`P4DIFF`工具，它显示了本地副本中的文件与 perforce 服务器中的文件之间的更改。Perforce 似乎将文件从 perforce 服务器引入 /tmp 目录并使用`PID`来命名文件，例如：

```
/tmp/tmp.24673.23 
```

这是针对 C++ 源文件的。

我在 perforce 存储库中遇到的最常见的文件类型是 C/C++ 源文件和头文件、Makefile、python 脚本、perl 脚本、ruby 脚本和 tcl 脚本。

*   我已经研究过使用`modeline`，但我们树中的大多数源都没有在文件中嵌入此信息。

*   [这篇](https://stackoverflow.com/a/10584645/380757)文章提到了一种搜索和识别魔法模式的可能方法。我找不到任何能获得高成功率的一致魔法模式。

*   尝试`file`在我的 linux 机器上使用二进制文件来查看我得到的结果。它似乎可以很好地识别 C/C++ 源，但对于 Makefile 甚至 python 脚本（没有 hashbang）都失败了

一件好事是，在比较的 2 个文件中，右侧的文件来自我的本地副本，因此具有正确的文件名和扩展名，从而为右侧的文件正确启用了语法突出显示。

有没有办法可以利用它为左侧显示的文件设置相同的语法突出显示？

也欢迎对此问题的任何替代解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T22:30:09.857

这是一个有趣的谜题。:)

```
aug SmartDiffType
  au!
  au VimEnter * :if &diff && len(&ft) | call setwinvar(2/winnr(),'&ft',&ft) | elseif &diff | let &ft=getwinvar(2/winnr(),'&ft') | endif
aug END 
```

笔记：

*   在上面的 4 行中，您只*需要*该`au VimEnter`行，但通常最好将自动命令放在`au!`顶部带有重置 ( ) 的某个自动命令组中。
*   自动命令打开`VimEnter`，否则`diff`或窗口尚未正确初始化
*   `vimdiff`可能是由拆分右侧或左侧的旧文件触发的，因此我们考虑这两种情况。
*   这`2/winnr()`是一个在 1 和 2 之间翻转的数学技巧 (2/2 = 1, 2/1=2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:18:24.043

假设您只打开了 2 个拆分并且左侧的拆分是您的本地文件，您可以执行以下操作

```
:windo let &ft = getwinvar(1, '&ft') 
```

这将为`filetype`所有窗口设置最左上角窗口的值。

如需更多帮助，请参阅：

```
:h :windo
:h 'ft'
:h getwinvar( 
```

# gnuplot - 带有误差线的 Gnuplot 直方图（高和低）

> ID：15371500
> 
> 赞同：1
> 
> 时间：2013-03-12T20:30:27.327
> 
> 标签：gnuplot, histogram, bar-chart

我正在尝试使用 gnuplot 创建具有高和低错误的直方图（条形图）。我发现这个线程[Gnuplot barchart histogram with errorbars](https://stackoverflow.com/questions/12023736/gnuplot-barchart-histogram-with-errorbars)不幸的是它只包含 X 值和 X-error (2 vaues)。我想要实现的是 X 值（平均值）和由高值和低值组成的误差条（总共 3 个：平均、高和低）。我如何使用 gnuplot 做到这一点？![我正在尝试做的示例](../Images/43240681707a4dba7fd9944fa0b7e520.png)

我的脚本与线程中提到的脚本相同，我只更改了一些标签等（简单的外观更改）。我的示例数据集结构如下：

```
WikiVote 10 12 7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:47:16.323

如果您有一个非常简单的数据文件：

```
#y ymin ymax
4   3    8 
```

您可以使用以下方法绘制此数据文件：

```
set yrange [0:]
set style histogram errorbars gap 2 lw 1
plot 'datafile' u 1:2:3 w hist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:40:26.467

我已经修改了 mgilson 提供的代码，以实现单个 X 值的多个直方图。如果有人需要，这里是代码。

```
plot 'stack_2.dat' u 2:3:4:xtic(1) w hist ti "Hadoop" linecolor rgb "#FF0000", '' u 5:6:7:xtic(1) w hist ti "Giraph" lt 1 lc rgb "#00FF00" 
```

这是模式

```
 #y_0 #min #max #y_1 #min #max
Dataset 4   3    8    6    5    9 
```

# jquery - jQuery wrappAll nextUntil

> ID：15371502
> 
> 赞同：0
> 
> 时间：2013-03-12T20:30:39.007
> 
> 标签：jquery, wrapall

如何将 gfield_html 下的所有 li 包装在 div 中。

目前我们正在使用这个：

```
$('.gfield_html').each(function(i, e) {
    $(e).nextUntil('.gfield_html').wrapAll('<div class="box"></div>');
}); 
```

但是第二个 gsection 被包装到 div 中，它是一个标题，所以我们不希望它被包装。

这是结构

```
<li class="gsection">test</li>
<li class="gfield_html">test</li>
<li>test</li>
<li>test</li>

<li class="gsection">test2</li>
<li class="gfield_html">test2</li>
<li>test2</li>
<li>test2</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:54:20.697

如果您只想在 and 之间包装元素`gfield_html`，`gsection`那么您可以这样做

```
$('li.gfield_html').each(function(){
    var $set = $();
    var nxt = this.nextSibling;
    while(nxt) {
        if(!$(nxt).is('li.gsection')) {
            $set.push(nxt);
            nxt = nxt.nextSibling;
        } else break;
    } 
   console.log($set.wrapAll('<div class="wrapper" />'));
}); 
```

**[演示](http://jsfiddle.net/8S5jR/)**

**[巴斯德宾](http://pastebin.com/fv26VXC3)**

# python - 使用 python wikitools 解析维基百科存根

> ID：15371505
> 
> 赞同：2
> 
> 时间：2013-03-12T20:30:55.167
> 
> 标签：python, api, parsing, mediawiki

我从以下位置实现了示例：[Mediawiki 和 Python](https://stackoverflow.com/questions/6589873/wikitools-wikipedia-and-python/6593085#6593085)

我阅读了[Get wikipedia abstract using python](https://stackoverflow.com/questions/8429597/get-wikipedia-abstract-using-python/8431544#8431544)和[How to parse/extract data from a mediawiki mark-up article via python](https://stackoverflow.com/questions/1968132/how-to-parse-extract-data-from-a-mediawiki-marked-up-article-via-python)和其他几篇文章。

我正在尝试获取与某个类别相关的一些维基百科存根的转储，并将它们插入到内部语义媒体维基站点中。出于本示例的目的，我使用“Somali_Region”类别。该脚本使用 mediawiki API 获取数据，然后解析数据，删除所有需要的模板信息。

```
from wikitools import wiki
from wikitools import category
import mwparserfromhell

wikisite = "http://en.wikipedia.org/w/api.php"
parse_category = "Somali_Region"

wikiObject = wiki.Wiki(wikisite) 
wikiCategory = category.Category(wikiObject, parse_category)
articles = wikiCategory.getAllMembersGen(namespaces=[0])

for article in articles:
   wikiraw = article.getWikiText()
   parsedWikiText = mwparserfromhell.parse(wikiraw)
   for template in parsedWikiText.filter_templates():
      parsedWikiText.remove(template)
   print parsedWikiText 
```

如果我尝试从维基百科进行转储并进行插入，则内部语义媒体维基站点会失败，因此这不是一个选项。是否可以使用 API 将数据插入语义媒体维基站点？我阅读了[mediawiki API 编辑页面](http://www.mediawiki.org/wiki/API:Edit_-_Create%26Edit_pages)，但找不到 python 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T19:07:53.830

如果我理解正确，您希望`parsedWikiText`将其保存到私人 wiki 中。

这就是我做这种事情的方法（你需要存储在某个地方；我使用配置文件`USERNAME`，`PASSWORD`但有更安全的方法）。`for`我会在你的循环之前从你那里接...

```
# Set up and authenticate into the target wiki if you need to.
from wikitools import wiki, page
target_wiki = wiki.Wiki('http://wiki.example.com/w/api.php')
site.login(USERNAME, PASSWORD)

for article in articles:
    wikiraw = article.getWikiText()
    parsedWikiText = mwparserfromhell.parse(wikiraw)
    for template in parsedWikiText.filter_templates():
        parsedWikiText.remove(template)

    # Use the API's edit function to save the new content.
    target_title = article.title
    target_page = page.Page(target_wiki, target_title)
    result = target_page.edit(text=parsedWikiText, summary="Imported text")

    # Check to see if it worked.
    if result['edit']['result'] == 'Success':
        print 'Saved', target_title
    else:
        print 'Save failed', target_title 
```

我在这里假设您要保存`parsedWikiText`到新页面中。如果您的 wiki 页面上已经有内容，您必须先阅读它`target_page.getWikiText()`，然后以某种方式混合新文本。我还假设该文章将与维基百科中的名称相同；如果没有那么改变`target_title`。

# jquery - 阻止或阻止临时电子邮件地址域

> ID：15371506
> 
> 赞同：2
> 
> 时间：2013-03-12T20:30:55.817
> 
> 标签：jquery, regex

我是 jQuery 和正则表达式的新手，想知道从 designchemical.com 向这个函数添加额外的临时电子邮件域的最佳方法是什么？

```
<script type="text/JavaScript">
// prepare the form when the DOM is ready 
$(document).ready(function() { 

    $('#submit').click(function() {  

            $(".error").remove();
            var hasError = false;
            var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            var emailblockReg =  /^([\w-\.]+@(?!mailinator.com)(?!guerrillamail.com)(?!mytrashmail.com)(?!mailexpire.com)([\w-]+\.)+[\w-]{2,4})?$/;

            var emailaddressVal = $("#Email").val();
            if(emailaddressVal == '') {
                $("#Email").after('<span class="error">Please enter your email!</span>');
                hasError = true;
            } else if(!emailReg.test(emailaddressVal)) {    
                $("#Email").after('<span class="error">Enter a valid email!</span>');
                hasError = true;
            } else if(!emailblockReg.test(emailaddressVal)) {   
                $("#Email").after('<span class="error">No Disposable E-Mail Address!</span>');
                hasError = true;
            } 

            if(hasError == true) { return false; }
    }); 
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:46:57.853

首先，我会说您应该始终在后端进行验证。但是，如果您仍然想使用 jQuery（用于初始筛选等），我会这样做：

将另一个组添加到电子邮件正则表达式：

```
var emailReg = /^([\w-\.]+@(([\w-]+\.)+[\w-]{2,4}))?$/; 
```

创建或传入不需要的域数组：

```
var bad_domains = ['comcast.net', 'gmail.com']; 
```

检查每个域`bad_domain`：

```
var emailMatch = emailAddressVal.match(emailRex)
    domain = emailMatch[3];
for (var i = 0; i < bad_domains.length; i += 1) {
    if (domain.toLowerCase() == bad_domains[i])
        return false;
} 
```

要添加一些自定义操作，只需将 替换`return false`为该自定义操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-12T11:25:51.753

建议在后端进行验证，因为 JavaScript 可以在客户端被拦截和操作。此外，一次性电子邮件每天都会出现，如果您不想每天更新您的列表，您可以简单地使用第三方 API。

例如你可以使用我的 API [antideo.com](http://antideo.com/documentation/)

这是一个 PHP 示例：

```
$request = file_get_contents('http://api.antideo.com/email/u978293@mvrht.net');
$response = gzdecode($request);
$result = json_decode($response);

if($result['disposable']) {
    echo 'Email is disposable'; 
} else {
    // email is not disposable do you stuff here
    echo 'Email is not disposable'; 
} 
```

和使用 jQuery 的 JavaScript：

```
$.getJSON('https://api.antideo.com/email/u978293@mvrht.net',function(result){
   if(result['disposable']) {
      console.log('Email is disposable');   
   } else {
      // email is not disposable do you stuff here
      console.log('Email is not disposable');
   }
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-16T12:32:08.950

您可以在这里使用免费服务 DEAGuard：[https ://deaguard.eu.org](https://deaguard.eu.org)

它包含 5000 多个虚假提供程序，并返回 JSON/XML 或 Plain。

# c# - Web 浏览器未触发 DocumentCompleted 事件

> ID：15371514
> 
> 赞同：4
> 
> 时间：2013-03-12T20:31:12.497
> 
> 标签：c#, multithreading, webbrowser-control

我正在尝试实现简单的网页截屏程序。当我在 UI 线程上使用我的代码时，一切似乎都没有问题，但是当我从非 UI 线程调用方法时，我无法再触发 WebBrowserDocumentCompleted 事件。我也试过这个：

```
System.Windows.Forms.WebBrowser wb = new System.Windows.Forms.WebBrowser();
        wb.DocumentCompleted += WebBrowserDocumentCompleted;
        wb.Visible = true;
        wb.ScrollBarsEnabled = false;
        wb.ScriptErrorsSuppressed = true;
        wb.Navigate(url);

        while (wb.ReadyState != System.Windows.Forms.WebBrowserReadyState.Complete)
        {
            Application.Current.Dispatcher.Invoke(DispatcherPriority.Background,
                                              new Action(delegate { }));
        } 
```

程序只是无限期地挂在while循环中。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:49:28.000

像这样的东西：

```
public void Start()
{
    System.Windows.Forms.WebBrowser wb = new System.Windows.Forms.WebBrowser();
    wb.DocumentCompleted += WebBrowserDocumentCompleted;
    wb.Visible = true;
    wb.ScrollBarsEnabled = false;
    wb.ScriptErrorsSuppressed = true;
    wb.Navigate(url);
}

private void WebBrowserDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if( (sender as WebBrowser).ReadyState == System.Windows.Forms.WebBrowserReadyState.Complete)
    {
        // Do what ever you want to do here when page is completely loaded.
    }
} 
```

我希望这对您的探索有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T00:51:20.440

在您的构建输出窗口中，查找以下警告：

“*发现同一依赖程序集的不同版本之间存在冲突*”

如果您发现此警告，请确保所有程序集都使用相同版本的冲突引用程序集，并重新检查 WebBrowser 是否传递您的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-19T06:21:35.570

解决方案令人难以置信。经过数小时的搜索和尝试，我找到了答案。

在 的属性中`webBrowser1`，我设置了`AllowNavigation = false`.

如果设置为`false`，它只注册`DocumentCompleted`一次事件，但是当`AllowNavigation = true`（默认情况下）时，`DocumentCompleted`事件会被触发多次。

# java - java XML解析，标记必须格式正确

> ID：15371515
> 
> 赞同：0
> 
> 时间：2013-03-12T20:31:13.783
> 
> 标签：java, xml, xml-parsing

我的 XML 文件采用以下格式：

```
<top>
  <name></name>
  <title></title>
  <time></time>
</top>
<top>
  ...
</top>
<top>
  ...
</top> 
```

我编写以下代码来读取 xml 文件：

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(new File(QUERY_FILE));  //LINE (*)
doc.getDocumentElement().normalize();

NodeList nList = doc.getElementsByTagName("top"); 
```

但问题是我在 (*) 行遇到错误：

> 文档中根元素之后的标记必须格式正确。

似乎该错误是因为我在 xml 文件中有多个根元素。一种解决方案可能是我`<doc></doc>`在所有`<top>`元素之外添加。但是有没有其他方法可以直接在 XML 文件中读取元素数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:34:07.157

您可以尝试隔离每个`<top>`元素并尝试分别解析它们，但这比仅仅包裹`<doc></doc>`xml 内容更麻烦。

我过去做过的一件事是，我没有将根标签放在文件本身中，而是将文本读入字符串，然后`<doc></doc>`在加载 XML 之前将标签包裹在字符串周围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T23:46:46.337

您要为格式正确添加此行：

```
<?xml version="1.0" encoding="UTF-8"?> <!-- this line-->
<top>
  <name></name>
  <title></title>
  <time></time>
</top> 
```

使用此页面查看您的文档是否正确，因为它是为这种元语言设定标准的那个。 [http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

验证 xml dtd 等..

万维网联盟 (W3C) 是万维网（简称 WWW 或 W3）的主要国际标准组织。字体维基百科

# python - 如何将 re.search 用作整数？Python

> ID：15371516
> 
> 赞同：0
> 
> 时间：2013-03-12T20:31:14.907
> 
> 标签：python, string, search

所以我有一个字符串

```
s = '>n269412 | AK142815 | msdfhakjfdkjfs' 
```

我想包括所有内容，但不包括“|”的第一个实例

所以我所做的是

```
import re

p = re.search('|',s)

print s[:p] 
```

但我收到了这个错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: slice indices must be integers or None or have an __index__ method 
```

我明白为什么它不起作用。. 因为该值不是整数，但有什么方法可以在搜索找到该元素的地方使用该值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:36:06.553

为什么还要为这个用例使用正则表达式？

```
s = '>n269412 | AK142815 | msdfhakjfdkjfs'
print s.partition('|')[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:36:34.927

您不需要正则表达式：

```
first, rest = s.split('|', 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:35:06.830

我认为`re.match()`提供了一个更直接的解决方案（即匹配所有内容，但不包括第一个`|`）：

```
In [7]: re.match('[^|]*', s).group(0)
Out[7]: '>n269412 ' 
```

如果没有`|`，则返回整个字符串。从这个问题是否完全清楚这是否是你想要的。

但正如其他人所说，你真的不需要正则表达式......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:37:55.320

[`re.search`](http://docs.python.org/3/library/re.html#re.search)返回[一个匹配对象](http://docs.python.org/3/library/re.html#match-objects)，其中包含的不仅仅是一个索引。

您可能想要的是[`start`](http://docs.python.org/3/library/re.html#re.match.start)索引：

```
>>> s[:p.start()]
'>n269412 ' 
```

顺便提一句。你需要修复你的正则表达式，因为这只会匹配一个`''`或`''`（即什么都不匹配）。你想使用`'\|'`：

```
p = re.search('\|', s) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:39:04.310

该错误是因为 re.search 返回一个 MatchObject，您尝试对其进行切片但无法执行。请参阅研究[文档](http://docs.python.org/2/library/re.html#re.search)。

我会做以下事情：

```
s = '>n269412 | AK142815 | msdfhakjfdkjfs'

# look for the pipe character
findPipe = s.find("|")

# replace everything after the pipe with empty string
s = s.replace(s[findPipe:], "")

print s 
```

有关切片字符串的更多信息，请参阅[这](https://stackoverflow.com/questions/509211/the-python-slice-notation)两个[链接](https://stackoverflow.com/questions/1010961/string-slicing-python)。

# java - 如何检索Java括号内的数字部分？

> ID：15371525
> 
> 赞同：1
> 
> 时间：2013-03-12T20:32:10.603
> 
> 标签：java, parsing, arraylist, stringtokenizer

对于我的 Java 作业的一部分，我需要选择所有具有特定区号的记录。我在 中 有自定义对象`ArrayList`，例如`ArrayList<Foo>`.

每个对象都有一个字符串 phoneNumber 变量。它们的格式类似于“(555) 555-5555”

我的目标是搜索`ArrayList<Foo>`（调用它`listOfFoos`）中的每个自定义对象，并将区域代码为“616”的对象放在`temporaryListOfFoos` `ArrayList<Foo>`.

我研究了分词器，但无法使语法正确。我觉得我需要做的与这篇文章类似，但由于我只尝试检索前 3 位数字（我不关心剩下的 7 位），所以这真的没有给我确切的信息正在寻找。[使用字符串标记器忽略括号？](https://stackoverflow.com/questions/4003159/ignore-parentheses-with-string-tokenizer)

作为临时解决方法，我所做的是...

```
for (int i = 0; i<listOfFoos.size();i++){
  if (listOfFoos.get(i).getPhoneNumber().contains("616")){
    tempListOfFoos.add(listOfFoos.get(i));
  }
} 
```

这适用于我们当前的数据集，但是，如果电话号码中的其他任何地方有 616 [如“(555) 616-5555”]，它显然无法正常工作。

如果有人可以就如何只检索前 3 位数字而忽略括号给我建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:42:58.750

你有两个选择：

1.  使用`value.startsWith("(616)")`或，
2.  使用此模式的正则表达式`"^\(616\).*"`

第一个选项会快很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:36:45.150

`areaCode = number.substring(number.indexOf('(') + 1, number.indexOf(')')).trim()`鉴于您拥有的电话号码格式，应该为您完成这项工作。

或者，如果您没有任何多余的空格，只需使用`areaCode = number.substring(1, 4)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:37:50.503

我认为您需要的是一个**捕获组**。查看本[文档中的](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)*组和捕获*部分。

完成将输入与模式（例如 ）匹配后，您可以使用带有 的(object of )`"\((\\d+)\) \\d+-\\d+"`获取括号中的数字。`matcher``java.util.regex.Matcher``matcher.group(1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:41:26.410

您可以使用如下所示的正则表达式。该模式将确保整个电话号码符合您的模式 ( *(XXX) XXX-XXXX* ) 并抓取括号内的号码。

```
int areaCodeToSearch = 555;
String pattern = String.format("\\((%d)\\) \\d{3}-\\d{4}", areaCodeToSearch);

Pattern p = Pattern.compile(pattern);
Matcher m = p.matcher(phoneNumber);
if (m.matches()) {
  String areaCode = m.group(1);
  // ...
} 
```

您是否选择使用正则表达式与简单的字符串查找（如其他答案中所述）将取决于您对整个字符串格式的困扰程度。

# javascript - 将焦点设置在 javascript 函数中的 div 上

> ID：15371526
> 
> 赞同：1
> 
> 时间：2013-03-12T20:32:12.043
> 
> 标签：javascript, jquery, html

所以我有一个显示我隐藏的 div 的 javascript 函数，我想知道如何在 div 上设置焦点，以便它在页面上直接向下。我说 setfocus 是因为我之前尝试过但没有用。这是我所拥有的聚焦功能和理念。

```
<script>
function toggle_travelarea(id) {
        var e = document.getElementById(id);
    document.getElementById("canada").style.display = 'none';   
    document.getElementById("asia").style.display = 'none';
    document.getElementById("australia").style.display = 'none';
    document.getElementById("newzealand").style.display = 'none';
    document.getElementById("africa").style.display = 'none';
    document.getElementById("usa").style.display = 'none';
    document.getElementById("samerica").style.display = 'none';
    document.getElementById("europe").style.display = 'none';
        e.style.display = 'block';
     document.getElementByClassName('slidedeck').focus()
    }
</script> 
```

我想集中注意力的区域！

```
<div class="slidedeck"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:24:14.640

实际上认为这不起作用，但对锚 div id 使用了 href ，然后对该功能使用了 onclick ，它可以正常工作。感谢大家的意见和建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:35:36.203

恐怕您必须做一些数学运算并使用scrollTo。这是示例-> [http://jsbin.com/epozur/4](http://jsbin.com/epozur/4)

基本上：

HTML

```
<div id="hidden">
</div>
<button id="show">show</button> 
```

JS

```
var btn = document.getElementById('show'),
    hidden = document.getElementById('hidden');

btn.addEventListener('click', function () {
  hidden.style.display = 'block';
  scrollTo(0, hidden.offsetTop);
}); 
```

这应该让你知道如何走得更远。

mz

# javascript - jquery.on("click") 没有像我预期的那样工作

> ID：15371528
> 
> 赞同：0
> 
> 时间：2013-03-12T20:32:12.160
> 
> 标签：javascript, jquery, ajax

我正在构建一个网络应用程序。此 Web 应用程序的主导航使用 jquery 刷新，但刷新后 jquery 事件不起作用。

“on 按钮”有一个 .on 绑定到它的 jquery 事件*，*每次单击它都会附加一个段落。“重置按钮”添加了另一个“打开按钮”，但 jquery 事件不适用于它。

我已经使用*.on*方法来规避当文档准备好时第二个“打开按钮”不在 DOM 中。

这是一个简单的例子：

[jsFiddle 上的示例](http://jsfiddle.net/GzvRu/)

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>blub</title>

<script src="js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $(".reset").click(function() {
            $("nav").append('<button class="on">test</button>');
        })

        var count = 0;
        $(".on").on("click", function(){
            $(".cont").append("<p>Another paragraph! "+(++count)+"</p>");
        });

    });
</script>
</head>

<body>
    <button class="reset">reset</button>
    <nav>
        <button class="on">test</button>
    </nav>
    <div class="cont"></div>
<script>

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:34:44.073

问题很热你使用方法“on”试试这个：

```
<script type="text/javascript">
    $(document).ready(function() {

        $(".reset").click(function() {
            $("nav").append('<button class="on">test</button>');
        })

        var count = 0;
        $(document).on("click",".on", function(){
            $(".cont").append("<p>Another paragraph! "+(++count)+"</p>");
        });

    });
</script> 
```

[演示](http://jsfiddle.net/GzvRu/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:35:50.100

`.on`不是 的直接替代品`.live`，它的语法略有不同。如果你希望它影响以后添加到 DOM 的元素，你需要像这样使用它：

```
$(document).on('click', '.on', function(){
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:48:23.283

您也可以通过这种方式非常简单地执行此操作 - 这样，单击处理程序在创建时被分配给每个按钮。

```
$(document).ready(function() {

    var count = 0;

    $(".reset").click(function() {
        $("nav").append($('<button>', {
            class: 'on',
            html: 'test',
            click: function() {
                $('.cont').append('<p>Another paragraph! ' + (++count) + '</p>');
            }
        }));
    });
}); 
```

# jsf - jsf facelets 在 tomcat 7 中找不到属性，但在 glassfish 3.1 中有效

> ID：15371529
> 
> 赞同：0
> 
> 时间：2013-03-12T20:32:15.407
> 
> 标签：jsf, glassfish, tomcat7

我试图弄清楚我需要为 tomcat 7 下载哪个 jar。我正在打电话并将参数传递给我的面孔网页中的方法，例如“availableEmployees(DepartmentName)”。这在 tomcat 7 中不起作用，但在 glassfish 3.1 中起作用。我已将 javax.faces.2.1.20.jar “Mojarra”添加到我的 Web 应用程序中以获取 jsf 依赖项。我的 tomcat 库文件夹中也有 javax.servlet.jsp.jstl.1.2.1。

有没有人遇到过这样的问题？我是否需要添加比上述 jars 更多的 jsf 支持？谢谢。不使用 maven，因为它是别人的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:01:11.133

我正在使用 netbeans，并链接到一个 eclipse 项目。我添加了自己的 primefaces 库。当我查看 netbeans 的构建输出时，我注意到有两个 primefaces 库副本。一个带有 3.4.2，另一个带有 3.3.1。

删除其中一个，一切正常。

# java - 我怎样才能更快地减去这些列表？

> ID：15371530
> 
> 赞同：11
> 
> 时间：2013-03-12T20:32:18.717
> 
> 标签：java, android, performance, arraylist

我想减去两个 ArrayList，这样我就可以拥有不在另一个列表中的孩子。

我这样做：

```
removeIDs=(ArrayList<Integer>) storedIDs.clone();
removeIDs.removeAll(downloadedIDs);

downloadIDs=(ArrayList<Integer>) downloadedIDs.clone();
downloadIDs.removeAll(storedIDs); 
```

问题是这两个列表都包含 5000childs 并且在我的 androidphone 上需要将近 4 秒。

有没有快速的方法来做到这一点？使用集合更快吗？（我在列表中没有重复值）

我开发了一个安卓应用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:36:17.833

除非您需要保持顺序，否则请使用 HashSet 而不是 ArrayList。

删除一个元素需要扫描完整的 List 以获取列表实现，相比之下，HashSet 只是计算哈希码，然后识别目标桶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:37:53.480

套装应该更快。现在，它基本上是在做一个 n^2 循环。它遍历 removeIDs 中的每个元素并检查该 id 是否在下载的IDs 中，这需要搜索整个列表。如果将下载的 ID 存储在更快的搜索中，比如 HashSet，这会更快，并且变成 O(n) 而不是 O(n^2)。Collections API 中可能还有更快的速度，但我不知道。

如果您需要保留排序，您可以使用 LinkedHashSet 而不是普通的 HashSet，但它会增加一些偷听的内存和插入/删除元素的一些性能损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:39:43.930

我同意 HashSet 的建议，除非整数 ID 适合相对较小的范围。在这种情况下，我将使用 HashSet 和 BitSet 中的每一个进行基准测试，并实际使用对您的环境中的数据更快的那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T04:09:31.407

首先，我为冗长的回答道歉。如果我在任何时候错了，随时欢迎您纠正我。在这里，我比较了解决解决方案的一些选项

**选项 1 < 数组列表 >：**

在您的代码中，您使用了该`ArrayList.removeAll`方法让我们查看 removeAll 的代码

removeAll 的源代码

```
public boolean removeAll(Collection<?> c) {
        return batchRemove(c, false);
    } 
```

所以需要知道`batchRemove`方法是什么。这是[链接](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.batchRemove%28java.util.Collection%2Cboolean%29)。如果你能看到这里的关键部分

```
for (; r < size; r++)
         if (c.contains(elementData[r]) == complement)
                 elementData[w++] = elementData[r]; 
```

现在让我们看一下`contains`方法，它只是`indexOf`方法的包装器。[链接](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractList.java#AbstractList.indexOf%28java.lang.Object%29)。在 indexOf 方法中有一个 O(n) 操作。（这里只注意一部分）

```
 for (int i = 0; i < size; i++)
            if (elementData[i]==null)
                    return i; 
```

所以总的来说它是一个

> O(n^2)

中的操作`removeAll`

**选项 2 < HashSet >：** 以前我在这里写过一些东西，但似乎我在某些时候错了，所以删除它。最好听取专家关于 Hashset 的建议。我不确定在你的情况下 hashmap 是否会是一个更好的解决方案。所以我提出另一种解决方案

**选项3 <我的建议你可以试试>：**

**第 1 步：**如果您的数据已排序，则不需要此步骤，否则对要减去的列表进行排序（第二个列表）

**第 2 步：**对于未排序列表的每个元素，在第二个列表中运行二进制搜索

**第 3 步：**如果未找到匹配项，则存储在另一个结果列表中，但如果找到匹配项，则不添加

**第 4 步：**结果列表是您的最终答案

**选项 3 的成本：**

**第1步：**如果没有排序`O(nlogn)`时间

**第二步：** `O(nlogn)`时间

**第三步：** `O(n)`空间

**

> **所以总体 O(nlogn) 时间和 O(n) 空间**

**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T21:13:20.437

如果需要列表，您可以选择[LinkedList](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)。在您的情况下，正如@Chris 所说， ArrayList 实现将在每次删除中移动所有元素。

使用 LinkedList，您将获得更好的随机添加/删除性能。看到这个[帖子](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)。

# sql - 无法理解为什么接受 WHERE 子句

> ID：15371531
> 
> 赞同：4
> 
> 时间：2013-03-12T20:32:18.657
> 
> 标签：sql, sql-server, database, sql-server-2008

我试图了解 HAVING 和 WHERE 之间的区别。我知道这`HAVING`与 GROUP BY 语句一起使用。但是，我不明白为什么接受以下声明：

```
select SUM(child_id) from children WHERE child_ID = 5 GROUP BY Child_ID 
```

不应该是正确的说法`select SUM(child_id) from children GROUP BY Child_ID HAVING child_ID = 5`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:37:01.923

WHERE 子句在分组过程发生之前执行，并且只能访问输入表中的字段。HAVING 在分组过程发生后执行，可以根据分组过程中计算的聚合值的值过滤结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:40:38.670

即使使用了 HAVING，也可以使用 WHERE 子句。它们的含义非常不同。思考的方法如下：

*   WHERE 子句充当记录级别的过滤器
*   然后将通过的任何内容放入您的 GROUP BY 指定的组中
*   然后，HAVING 子句根据聚合（SUM、COUNT、MIN 等）条件过滤掉组

所以，如果我有一张桌子：（STORE_ID，STATE_CODE，SALES）

```
Select STATE, SUM(SALES)
from MyTable
Where SALES > 100
Group By STATE
Having Sum(Sales) > 1000 
```

这将首先过滤以仅读取销售额超过 100 的商店记录。对于每个组（按州），它将仅汇总销售额为 100 或更多的商店的销售额。然后，它将丢弃任何州，除非州级总和超过 1000。[注：州总和不包括任何销售额 100 或以下的商店。]

# sql - SELECT CASE 中缺少关键字

> ID：15371534
> 
> 赞同：1
> 
> 时间：2013-03-12T20:32:39.247
> 
> 标签：sql, oracle, select, oracle10g, case

我不确定这一系列 case 语句有什么问题。我在网上看过，语法似乎是正确的，但我得到了错误缺失关键字。任何帮助将非常感激！

```
CASE 
when A = '1' then
         when sequence_number = 5 then 9
         when sequence_number = 6 then 9
         end
 when A = '2' then
       when sequence_number = 5 then 9
       when sequence_number = 6 then 9
       end
  when A = '3' then
        when sequence_number =7 then 9
        when sequence_number =8 then 9
        end
else T.number
end as number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:56:11.723

最简单的选择似乎是：

```
 case 
   when (A in (1,2) and sequence_number in (5,6)) or
        (A in (3  ) and sequence_number in (7,8))
   then 9
   else t.number
 end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:40:29.220

您要么需要`CASE`在每个分支中添加第二条语句，要么需要组合条件

```
CASE 
when A = '1' and sequence_number = 5 then 9
when A = '1' and sequence_number = 6 then 9
when A = '2' and sequence_number = 5 then 9
...
else T.number
end as number 
```

或者

```
CASE 
when A = '1' then
         case when sequence_number = 5 then 9
              when sequence_number = 6 then 9
         end
when A = '2' then
       case when sequence_number = 5 then 9
            when sequence_number = 6 then 9
       end
when A = '3' then
        case when sequence_number =7 then 9
             when sequence_number =8 then 9
        end
else T.number
end as number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:42:25.117

@mikeb 是正确的 - 你需要一个额外的 CASE。

我在测试时也遇到了`Number`列问题；只是猜测，但也许甲骨文将其作为保留字窒息？如果您像我一样遇到`ORA-01747: invalid user.table.column, table.column, or column specification`异常，请将其更改为类似`Num`or `TheNumber`。

这是更新的案例：

```
CASE
when A = '1' then
       case
       when sequence_number = 5 then 9
       when sequence_number = 6 then 9
       end
when A = '2' then
       case
       when sequence_number = 5 then 9
       when sequence_number = 6 then 9
       end
when A = '3' then
       case
       when sequence_number =7 then 9
       when sequence_number =8 then 9
       end
else T.number
end as number 
```

# c# - 如何将 Razor 视图转换为字符串？

> ID：15371540
> 
> 赞同：13
> 
> 时间：2013-03-12T20:33:02.600
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我想将我的 Razor 视图用作某种模板来发送电子邮件，因此我想将我的模板“保存”在视图中，将其作为字符串读入控制器，进行一些必要的替换，然后发送它。

我有可行的解决方案：我的模板作为 HTML 页面托管在某处，但我想将它放入我的应用程序中（即在我看来）。我不知道如何在控制器中将视图读取为字符串。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T20:35:05.777

我使用以下。如果你有一个，把它放在你的基本控制器上，这样你就可以在所有控制器中访问它。

```
public static string RenderPartialToString(Controller controller, string viewName, object model)
{
    controller.ViewData.Model = model;

    using (StringWriter sw = new StringWriter())
    {
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, viewName);
        ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T20:39:01.510

看看[RazorEngine](https://github.com/Antaris/RazorEngine)库，它完全符合您的要求。我以前用它来做电子邮件模板，效果很好。

你可以这样做：

```
// Read in your template from anywhere (database, file system, etc.)
var bodyTemplate = GetEmailBodyTemplate();

// Substitute variables using Razor
var model = new { Name = "John Doe", OtherVar = "Hello!" };
var emailBody = Razor.Parse(bodytemplate, model);

// Send email
SendEmail(address, emailBody); 
```

# r - （日期）内的总和

> ID：15371544
> 
> 赞同：4
> 
> 时间：2013-03-12T20:33:31.613
> 
> 标签：r, sum, base

我正在尝试计算`XYZmin`同一日期发生的值的总和（in ）。

我的数据看起来像这样

```
bar <- structure(list(date = structure(c(15622, 15622, 15622, 15628, 
15632, 15635, 15639, 15639, 15639, 15639, 15639, 15642, 15646, 
15646, 15650, 15650, 15650, 15657, 15660, 15660, 15674, 15681, 
15691, 15695, 15709, 15716, 15723, 15730, 15737, 15737, 15737, 
15737, 15737, 15737, 15740, 15743, 15743, 15743, 15744, 15744, 
15744, 15744, 15746, 15751, 15755, 15758), class = "Date"), XYZmin = c(-20, 
-15, -10, -70, -60, -60, -95, -10, -10, -40, -25, -25, -20, -10, 
-3, -5, -25, -5, -70, -5, -30, -30, -25, 60, 60, 60, 60, 60, 
-10, -10, -30, -30, -10, -10, -10, -60, -30, -10, 75, -10, -10, 
-10, 60, 60, -15, 60)), .Names = c("date", "XYZmin"), class = "data.frame", row.names = c(NA, 
-46L))

head(bar)   
        date XYZmin
1 2012-10-09    -20
2 2012-10-09    -15
3 2012-10-09    -10
4 2012-10-15    -70
5 2012-10-19    -60
6 2012-10-22    -60 
```

我正在努力完成的是创建一个新变量`XYZtot`，其中，在多次出现的数据中，将第二个数据的第一个和第二个值相加，并将第三个数据的第一个、第二个和第三个值相加。这是我的目标的一个片段。

```
head(new_bar_with_XYZtot) 

        date XYZmin XYZtot
1 2012-10-09    -20    -20
2 2012-10-09    -15    -35
3 2012-10-09    -10    -40
4 2012-10-15    -70    -70
5 2012-10-19    -60    -60
6 2012-10-22    -60    -60 
```

### 更新了*大* `microbenchmark`测试

```
alexwhan <- function(bar,date,XYZmin) ddply(bar, .(date), transform, XYZmin.sum = cumsum(XYZmin))

Arun <- function(bar,date,XYZmin) within(bar, {XYZtot <- ave( XYZmin, date, FUN=cumsum)})

agstudy <- function(bar,date,XYZmin) transform(bar, XYZtot = ave(XYZmin, date, FUN = cumsum))

# install.packages("data.table", dependencies = TRUE)
library(data.table)
mnel <- function(bar,date,XYZmin)  bar <- data.table(bar); bar[, XYZmin.sum := cumsum(XYZmin), by = date]

# install.packages("microbenchmark", dependencies = TRUE)
require(microbenchmark)

# run test
res <- microbenchmark(alexwhan(bar,date,XYZmin), Arun(bar,date,XYZmin), agstudy(bar,date,XYZmin), mnel(bar,date,XYZmin), times = 666)

## Print results:
print(res) 
```

号码，

```
Unit: microseconds
                        expr       min        lq    median        uq       max neval
 alexwhan(bar, date, XYZmin) 14484.077 15056.613 15237.760 15945.482 72650.126   666
     Arun(bar, date, XYZmin)   963.632  1018.311  1070.759  1138.655  4988.226   666
  agstudy(bar, date, XYZmin)  1967.292  2021.115  2078.261  2158.689  9240.500   666
     mnel(bar, date, XYZmin)   251.312   270.295   282.821   325.040  6540.367   666

### Plot results:
boxplot(res) 
```

![绘制结果](../Images/62c14a7becfc31d6fc5391199586669b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T23:32:58.387

如果您要花钱，我会提出`data.table`解决方案

```
library(data.table)
bar <- data.table(bar)

# assigning within bar
bar[, XYZmin.sum := cumsum(XYZmin), by = date] 
```

这将适用于大数据！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:39:05.160

这是一个使用`ave`：

```
bar <- within(bar, {XYZtot <- ave( XYZmin, date, FUN=cumsum)}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T20:40:18.220

也使用`ave` 但与`transform`

```
transform(bar, XYZtot = ave(XYZmin, date, FUN = cumsum)) 
```

**OP评论后**编辑****

 **```
transform(bar, XYZtot = ave(XYZmin, date, FUN = 
                          function(x)
                            if(length(x) < 1) NA 
                            else c(cumsum(x[-length(x)]),NA))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T20:37:34.037

这就是你所追求的吗？

```
bar.sum <- ddply(bar, .(date), transform,
                 XYZmin.sum = cumsum(XYZmin))
bar.sum 
```**

# c# - 填写多页 Web 表单

> ID：15371545
> 
> 赞同：1
> 
> 时间：2013-03-12T20:33:35.833
> 
> 标签：c#, winforms, browser

我可以使下面的代码适用于多页表单，但这会很混乱。基本上，最大的挑战是一旦我按下提交按钮，它会加载一个新页面，并且再次调用 WebBrowserDocumentCompletedEventHandler，但使用相同的代码。任何建议将不胜感激，谢谢！

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();

        WebBrowser.Navigate(@"A_WEBSITE_URL");
        WebBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(Null);
    }

    public void Null(object sender, WebBrowserDocumentCompletedEventArgs e) {
        WebBrowser.Document.GetElementById("UserId").SetAttribute("value", "MY_USER_NAME");
        WebBrowser.Document.GetElementById("loginButton").InvokeMember("click");
    }
} 
```

# javascript - 在 jQuery 或普通 Javascript 中的操作之间暂停

> ID：15371546
> 
> 赞同：0
> 
> 时间：2013-03-12T20:33:41.587
> 
> 标签：javascript

我正在开发一款游戏，我希望它在每件事之间有 2 秒的停顿来做某些事情。

因为它不是 jQuery 包装的选择，所以我不能使用 delay()。下面代码的问题是 RedFlash() 函数在暂停之前发生。也许我需要一个大函数来运行数组中的函数，每个函数之间有 2 秒的暂停。

```
// Attack Phase
function attackPhase() {
  animateMessage("You slash with your weapon!", "red");
  window.setTimeout(function() {
     animateMessage("You dealt 15 damage!", "red");
  }, 2000);
  window.setTimeout(function() {
     $('.card_hp').redFlash();
  }, 2000);    
} 
```

在摘要中，它是这样的：

```
// action
// pause 2 seconds
// action
// pause 2 seconds
// action
// pause 2 seconds
// and so on 
```

我找到了几个关于如何暂停一次的答案，但没有找到如何暂停几次并让每个动作等待整个 2 秒的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:36:12.343

您的问题是因为您本质上是`setTimeout()`同时启动这两个功能。

```
// Attack Phase
  function attackPhase() {
    animateMessage("You slash with your weapon!", "red");
    window.setTimeout(function() {
          animateMessage("You dealt 15 damage!", "red");
          window.setTimeout(function() {
                $('.card_hp').redFlash();
           }, 2000);
    } , 2000);
 } 
```

注意：这不是写得很好的代码。您应该将 setTimeouts 设置为 a `var`，以便`clearTimeout(var)`在需要时使用。还有很多其他的事情也应该考虑，但超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:53:18.010

这是一个如何将动作放入队列中并以 2s 的间隔依次执行的示例。此外，下次您激活一个操作时，它将被发布到同一个队列中，并且在所有先前的操作完成之前不会开始。

```
var queue = [],
    timer,
    processQueue,
    animateMessage,
    attackPhase;

processQueue = function processQueue(force) {
  if(!timer || force) {
    timer = setTimeout(function() {
      if(queue.length > 0) {
        queue.splice(0,1)[0]();
        processQueue(true);
      } else {
        timer = null;
      }
    }, 2000);
  }
};

animateMessage = function animateMessage(msg, color) {
  console.log(msg);
};

attackPhase = function attackPhase() {
  queue.push(function(){
    animateMessage("You slash with your weapon!", "red");
  });
  queue.push(function() {
    animateMessage("You dealt 15 damage!", "red");
  });
  processQueue();
};

attackPhase();
attackPhase(); 
```

这是一个工作示例[http://jsbin.com/akagin/4/edit](http://jsbin.com/akagin/4/edit)

# grails - 使用 Grails 2 Web Flow 插件实现无共享架构

> ID：15371547
> 
> 赞同：0
> 
> 时间：2013-03-12T20:33:43.160
> 
> 标签：grails, persistence, scalability, grails-plugin, spring-webflow-2

我将 grails 2.2 用于大型、非平凡的 Web 应用程序，采用“无共享”方法。我发现 Grails 插件 -> grails Web 流非常有用，但是我无法将会话状态存储在用户会话中。有没有办法将其存储在诸如 memcached 或 Coherence*Web 之类的外部存储中？

注意：shared nothing 是指不在 Java EE Web 引擎的 Http session 中存储任何信息，以避免在集群环境中需要复制 session 信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:31:21.860

Web Flow 插件提供了一个名为 conversionManager 的 bean，其定义如下：

```
conversationManager(SessionBindingConversationManager) 
```

ConversationManager 接口的这个默认实现将对话存储在会话中。您可以通过在 grails-app/conf/spring/resources.groovy 中定义一个同名 bean 来将此实现替换为在其他地方（例如在 Coherence 中）存储对话的实现：

```
conversationManager(CoherenceConversationManager) 
```

请注意，据我所知，“CoherenceConversationManager”不存在，您需要自己实现。

# ruby-on-rails - 在 Mac Mountain Lion 上安装 therubyracrer

> ID：15371548
> 
> 赞同：0
> 
> 时间：2013-03-12T20:33:43.710
> 
> 标签：ruby-on-rails, osx-mountain-lion, therubyracer

我安装了 XCode 和 XCode CLI，安装任何其他 gem 没有任何问题，但是当我尝试安装 therubyracer 时会发生以下情况：

```
gem install therubyracer
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
ERROR: Failed to build gem native extension.

    /Users/me/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for main() in -lpthread... yes
checking for main() in -lobjc... yes
creating Makefile

make
compiling accessor.cc
make: g++-4.2: No such file or directory
make: *** [accessor.o] Error 1 
```

当我这样做时：g++ -v，这就是我所看到的：

```
g++ -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~148/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~148/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

# 解决方案：

我最终为我工作的是将 Gemfile 中的条目更改为 gem 'therubyracer', '0.10.1'。

如果我没有指定这个版本，那么它会尝试安装 0.10.2 并且那个版本似乎有问题。

# html - Bootstrap Modal 自动打开

> ID：15371549
> 
> 赞同：0
> 
> 时间：2013-03-12T20:33:46.013
> 
> 标签：html, css, twitter-bootstrap

不知道真正发生了什么，但我只是实现了模式（没有 js 调用），它会在页面加载时自动打开。我在同一页面上有两个，有人知道为什么会发生这种情况以及如何使它们仅在链接上打开吗？提前致谢

```
<a href="#save-list" role="button" data-toggle="modal">Title</a>
<div id="save-list" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-body">
<p><h4>sample text</h4></p>
<div class="row-fluid">
<div class="span12"><input name="" type="text"></div>
</div>
</div>
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">No</button>
<button class="btn btn-confirm">Yes</button>
</div>
</div> 
```

和这个

```
<a href="#save-add-guest" role="button" data-toggle="modal">Popup de transición entre tabs</a>
<div id="save-add-guest" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-body">
<p><h4>Would you like to add these <br>contacts to the guest list?</h4></p>
</div>
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">No, Thanks</button>
<button class="btn btn-confirm">Yes Please!</button>
</div>
</div> 
```

# sql-server - 在 Express Edition 中的特定日期执行程序

> ID：15371553
> 
> 赞同：0
> 
> 时间：2013-03-12T20:34:07.760
> 
> 标签：sql-server, sql-server-express, jobs

我有从客户表复制数据到历史表的过程。

如何在不涉及用户在特定日期每个月按下按钮的情况下自动执行此操作？

我使用的是 SQL Server 2008 Express Edition，因此无法使用 SQL Server 代理安排作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:37:23.573

由于您使用的是 SQL Express，因此您不能使用 SQL Server 代理。但是有许多替代方案，您可以根据您的操作系统使用[schtasks](http://technet.microsoft.com/en-us/library/cc725744(v=ws.10).aspx)或[Windows 任务计划程序来安排所有这些：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85).aspx)

*   [VBScript](https://stackoverflow.com/questions/5997896/)
*   [C# 命令行应用程序](https://stackoverflow.com/questions/12462447/how-to-run-an-sql-stored-procedure-through-c-sharp-at-a-specific-time)
*   [带有 SQLCMD 的批处理文件](http://ask.sqlservercentral.com/questions/2931/how-to-call-a-stored-procedure-from-command-line.html)
*   [电源外壳](https://stackoverflow.com/questions/83410/how-do-i-call-an-sql-server-stored-procedure-from-powershell)

所有这些语言/工具（以及许多其他语言）都能够连接到 SQL Server 并执行存储过程。您还可以尝试以下代理替换：

*   [SQL调度器](http://www.lazycoding.com/products.aspx)
*   [快递代理](http://weblogs.asp.net/alex_papadimoulis/archive/2005/11/10/Express-Agent-for-SQL-Server-Express_3A00_-Jobs_2C00_-Jobs_2C00_-Jobs_2C00_-and-Mail.aspx)
*   [独立 SQL 代理（测试版）](http://standalonesqlagent.codeplex.com/)

下面是一个使用 VBScript 的示例：

1.  打开记事本。键入以下代码，将 $tokens$ 替换为您的真实值：

    ```
    s = "$your server/instance name$"
    db = "$your database name$"
    u = "$your SQL auth user ID$"
    p = "$your SQL auth password$"
    constr = "provider=SQLOLEDB;Data Source=" & s & ";Initial Catalog=" & s & _
             ";User ID=" & u & ";Password=" & p & ";Network=DBMSSOCN;"
    Set conn = CreateObject("ADODB.Connection")
    conn.Open constr
    conn.Execute "EXEC dbo.$your procedure name$;"
    conn.close: set conn = nothing 
    ```

2.  将此文件另存为`c:\somewhere\ScheduledProcedure.vbs`

3.  打开命令提示符并键入以下内容（这将安排此脚本在每个月的 15 日午夜运行），全部在一行中：

    ```
    schtasks /create /tn "some name" 
      /tr "wscript ""c:\somewhere\ScheduledProcedure.vbs""" 
      /sc monthly /d 15 /st 00:00 
    ```

要在您的计划任务列表中查看此任务（有很多，但它应该在第一组）：

```
schtasks /query 
```

如果您以后想删除它：

```
schtasks /delete /tn "some name" /F 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:36:06.607

在 SQL Express 中这是不可能的——您需要编写一个执行此操作的程序，然后您可以使用 Windows 任务调度程序来执行该程序。更高版本的 SQL Server 包括 SQL Server 代理，您可以使用它来为您运行东西。

# c++ - `int a = 0, b = a` 是否有未定义的行为？

> ID：15371554
> 
> 赞同：13
> 
> 时间：2013-03-12T20:34:13.157
> 
> 标签：c++, declaration, undefined-behavior

问题标题说明了一切：表单的声明是否`int a = 0, b = a`具有未定义的行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T20:37:30.270

不，这是明确定义的。这是一个带有两个声明符的声明，`a`并且`b`. 每个声明器都有一个初始化器。

> 声明中的每个*init-declarator*都被单独分析，就好像它本身在声明中一样。

也就是说，该行被视为：

```
int a = 0;
int b = a; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T20:42:01.883

**不，没有未定义的行为**。

根据 C++11 标准的第 8/3 段：

> 声明中的每个 init-declarator 都被单独分析，就好像它本身在声明中一样

此外，如脚注 97 所述：

> 具有多个声明符的声明通常**等效于相应的声明序列，每个声明**都具有单个声明符。那是
> 
> `T D1, D2, ... Dn;`
> 
> 通常（*）相当于
> 
> `T D1; T D2; ... T Dn;`

这意味着`a`首先被初始化，然后`b`被初始化并采用 的值`a`。另请注意，即使情况并非如此，关于 SO是否会是 UB也存在[相当长的争论，并且已经就这不是 UB 达成了一些共识。](https://stackoverflow.com/questions/14935722/does-initialization-entail-lvalue-to-rvalue-conversion-is-int-x-x-ub)

* * *

(*)：正如 Olaf Dietsche 在评论中所解释的，稍后在同一个脚注中提到了这种等价不成立*的情况。*

# ios - 如何在超级视图中定位 UIView？

> ID：15371557
> 
> 赞同：3
> 
> 时间：2013-03-12T20:34:32.740
> 
> 标签：ios, uiview, uiimageview, frame, bounds

我添加了一个带有 UIImage 的 UIImageView，我希望它出现在主 UIView 的中心顶部。

我将使用 UIPageControl 将该视图向左滑动并从右侧引入新视图。我添加了 UIImageView 通常只是将它添加到右下角

```
-(void)createUIViews{
    UIImage *image1 = [UIImage imageNamed:@"GiftCard.png"];
    firstView = [[UIImageView alloc] initWithImage:image1];
    firstView.backgroundColor = [UIColor grayColor];
    firstView.tag = 1;
    firstView.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin);
} 
```

现在我想把它放在顶部中心。所以我在想这样的事情：

```
CGRect newFrame = self.view.frame;
    newFrame.origin.x += 50;
    self.view.frame = newFrame;

    [self.view addSubview:firstView]; 
```

但是当我在前一个代码的底部添加这段代码时（顺便说一句，它是从 viewDidLoad 调用的），图像仍然出现在右下角。如何正确定位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:49:54.747

将您的代码移动到 viewDidAppear。在 viewWillAppear/viewDidAppear 之前，不能保证已设置边界和框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:01:48.067

确保正确设置支柱和弹簧，然后执行以下操作：

```
 -(void)viewWillAppear:(BOOL)animated 
  {
    [super viewWillAppear:animated];
    firstView.center = self.center;
  } 
```

# android - Android - 快速调试

> ID：15371560
> 
> 赞同：0
> 
> 时间：2013-03-12T20:34:46.550
> 
> 标签：android, debugging

在 Android 上“快速”调试的最佳方法是什么？

在做 web 开发时，通常我只是使用*alert()*来快速获取变量的值。Android中是否有类似的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:36:23.403

你可以使用`Log`类。打电话`Log.d("Some Tag", Message);`

您还可以在代码中设置断点。这将让您停止执行您的应用程序并检查变量的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:38:40.750

这在很大程度上取决于情况

如果我只是想要一条快速消息来知道我在我的某个时间点上做到了，`Activity`那么我可以只使用[Toast](http://developer.android.com/reference/android/widget/Toast.html)`Activity`在我的创建或某个事件发生时显示一条消息。您还可以使用[日志](http://developer.android.com/reference/android/util/Log.html)消息在您的 logcat 中查看以查看某些变量和其他消息。

除此之外，如果您需要进行更彻底的调试，例如准确查看某个函数内部发生的情况，那么您可以在您怀疑有问题的任何行设置断点并检查“变量”中的变量/数据值或调试器中的“表达式”选项卡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:29:09.133

我正在使用这些方法来防止在未处于开发阶段时打印日志，并在能够时在 toast 中显示消息：

```
 public static void log(Object message) {
        if (BuildConfig.DEBUG) {
            Log.v(TAG, message.toString());
        }
    }

    public static void log(Context context, Exception e) {
        if (BuildConfig.DEBUG) {
            e.printStackTrace();

            if (context != null)
                Toast.makeText(context, e.getClass().getSimpleName() + ": " + e.getMessage(), Toast.LENGTH_LONG).show();
        }
    }

    public static void log(Context context, Object message) {
    if (BuildConfig.DEBUG) {
        Log.v(TAG, message.toString());

        if (context != null)
            Toast.makeText(context, message.toString(), Toast.LENGTH_LONG).show();

    }
} 
```

或者使用调试模式，您可以在其中查看变量的详细信息。

# hibernate - jboss 4.0.5下的多个持久单元

> ID：15371563
> 
> 赞同：0
> 
> 时间：2013-03-12T20:34:51.760
> 
> 标签：hibernate, jpa, jboss

我正在开发一个使用非常旧版本的 Jboss（4.0.5 - JDK 1.5）的项目。由于时间/预算限制，我无法改变这一点。

我的应用程序部署为单个 EAR 文件。在耳朵之内，有一个提供基本实体管理的 JAR 文件。调用它`jpa-old.jar`。该 JAR 文件包含一个 persistence.xml，它定义了一个 PU `OldPersist`，如下所示：

```
<persistence version="1.0" >
 <persistence-unit name="OldPersist">
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  <jta-data-source>java:/MySqlDS</jta-data-source>
  <class>com.oldjpa.OldEntity1</class>
  <class>com.oldjpa.OldEntity2</class>
  <exclude-unlisted-classes>true</exclude-unlisted-classes> 
 </persistence-unit>
</persistence> 
```

jar 提供实体本身以及一些用于 CRUD 操作的访问 EJB。EntityManger 被注入到 EJB 中`@PersistenceContext(unitName = "OldPersist")`

由于各种原因，不再需要维护旧的实体 jar（设计不佳，代码膨胀）。因此我想创建一个新的实体访问层。目前，它将仅通过 EJB 提供对新实体的访问，但随着时间的推移，旧代码将被移植到新的 JAR 中。两者必须同时工作。

所以我创建了一个新的`jpa-new.jar`JAR `NewPersist`(

```
<persistence version="1.0" >
 <persistence-unit name="NewPersist">
  <provider>org.hibernate.ejb.HibernatePersistence</provider>
  <jta-data-source>java:/MySqlDS</jta-data-source>
  <class>com.newjpa.NewEntity1</class>
  <class>com.newjpa.NewEntity2</class>
  <exclude-unlisted-classes>true</exclude-unlisted-classes> 
 </persistence-unit>
</persistence> 
```

请注意，两个 PU 之间没有实体的交叉管理。

然后我在新的 JAR 中创建一些新的 EJB 并注入 EM`@PersistenceContext(unitName = "NewPersist")`

在部署时，我收到此错误：

```
WARN  [org.jboss.system.ServiceController] Problem starting service persistence.units:ear=MyEar.ear,unitName=jpa-new.jar org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.oldjpa.OldEntity1 references an unknown entity:com.oldjpa.OldEntity2 
```

Hibernate 抱怨新的 PU - 关于应该由旧 PU 管理的实体。

我已经单独尝试了每个 JAR，它们都工作正常。我尝试添加`<jar-file>`到persistence.xml，但jboss 然后抱怨它在部署时找不到JAR（它假设是一个相对路径，但相对于什么？）。我尝试将共享的persistence.xml 添加到EARs META-INF。这并没有给出相同的错误，但是每个 JAR 文件中的 EJB 抱怨他们找不到他们的 PU。

所以我的问题是，是否支持这种配置（多个 jar，每个 jar 都有自己的 persistence.xml），如果支持，我该如何让它工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:33:57.977

为什么不创建一个包含 2 个持久性单元的单个 persistence.xml？

# .net - Visual Studio 2012 损坏/错误的 ASP.NET 字符串终止检测

> ID：15371571
> 
> 赞同：2
> 
> 时间：2013-03-12T20:35:07.057
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2012

对于尚未（尚未！）使用 Razor 语法的 ASP.NET MVC3 项目，是否有任何方法可以阻止 Visual Studio 在错误列表中显示警告，并在视图中完全有效的代码上显示红色智能感知错误，如下所示：

```
<input type='image' src='/images/buy-now.png' 
   onclick='return DoAjaxRequest("<%= Model.Order.Invoice %>");' /> 
```

`"`开头之前`<%=`和结尾之后的所有内容都显示`%>`为带有悬停文本的红色波浪线，上面写着“未终止的字符串常量”。

这段代码显然可以编译并运行良好，但警告有点烦人。我希望能够在不迁移到 Razor 的情况下围绕它们进行重构？

我尝试使用一个丑陋的`string.Format`解决方法，但虽然它编译得很好，但它也给出了一个智能感知错误，这次是`<%= %>`位的全部内容，抱怨“预期的表达式”

```
<%= string.Format("<input type='image' src='/images/buy-now.png' 
   onclick='return DoAjaxRequest(\"{0}\");' />", Model.Order.Invoice); %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T09:18:13.550

Razor 语法错误现在正在审核反馈中

[http://connect.microsoft.com/VisualStudio/feedback/details/759398/razor-input-and-onclick](http://connect.microsoft.com/VisualStudio/feedback/details/759398/razor-input-and-onclick)

我相信他们甚至会修复非剃刀语法。

# python - python匹配列表中的项目以创建新列表

> ID：15371576
> 
> 赞同：1
> 
> 时间：2013-03-12T20:35:16.837
> 
> 标签：python, list

我正在尝试编写一个程序，为一定数量的玩家创建一个循环锦标赛时间表（每个玩家都玩其他玩家）。
我想知道是否有办法只使用列表来做到这一点。我试图不使用 itertools.combinations()

如果我有一个允许您输入玩家数量并生成这些玩家列表的程序，任何人都可以想到一种方法吗？示例：4 个玩家生成列表 [1,2,3,4]

我需要程序打印：

第 1 轮：1 对 4 2 对 3

第 2 轮：1 对 3 4 对 2

第 3 轮：1 对 2 3 对 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:51:57.487

[这是此处](http://en.wikipedia.org/wiki/Round_robin_tournament#Scheduling_algorithm)描述的第一个算法的简单实现。

```
N = 6
a = range(N)
for i in xrange(N-1):
    print zip(a[:N/2], reversed(a[N/2:]))
    a = a[:1] + a[-1:] + a[1:-1] 
```

编辑：实际上，正如所指出的，它甚至适用于奇数`N`。

（ORIG：这只适用`N`于偶数。该链接解释了如何扩展它以支持奇数`N`。）

# matlab - 找出两个信号之间的差异

> ID：15371577
> 
> 赞同：4
> 
> 时间：2013-03-12T20:35:19.843
> 
> 标签：matlab, signal-processing

我有两个信号，我们称它们为“a”和“b”。但是，它们都是几乎相同的信号（从相同的输入记录并包含相同的信息），因为我在两个不同的“b”处记录了它们，它们的时间偏移量未知。显然，每个都有随机噪声。

目前，我正在使用互相关来计算时间偏移，但是，我仍然得到不正确的结果。

这是我用来计算时移的代码：

```
function [ diff ] = FindDiff( signal1, signal2 )
%FINDDIFF Finds the difference between two signals of equal frequency 
%after an appropritate time shift is applied
%   Calculates the time shift between two signals of equal frequency 
%   using cross correlation, shifts the second signal and subtracts the
%   shifted signal from the first signal. This difference is returned.
length = size(signal1);

if (length ~= size(signal2))
    error('Vectors must be equal size');
end

t = 1:length;
tx = (-length+1):length;
x = xcorr(signal1,signal2);
[mx,ix] = max(x);
lag = abs(tx(ix));
shifted_signal2 = timeshift(signal2,lag);
diff = signal1 - shifted_signal2;

end

function [ shifted ] = timeshift( input_signal, shift_amount )
input_size = size(input_signal);
shifted = (1:input_size)';
for i = 1:input_size
    if i <= shift_amount
        shifted(i) = 0;
    else
        shifted(i) = input_signal(i-shift_amount);
    end
end

end

plot(FindDiff(a,b)); 
```

然而，函数的结果是周期波，而不是随机噪声，因此滞后必须仍然关闭。我会发布该情节的图片，但 imgur 目前不合作。

除了互相关之外，有没有更准确的方法来计算滞后，或者有没有办法改善互相关的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T22:52:28.460

[互相关](http://en.wikipedia.org/wiki/Cross-correlation)通常是确定两个信号之间时间延迟的最简单方法。峰值位置表示两个信号最相似的时间偏移量。

```
%// Normalize signals to zero mean and unit variance
s1 = (signal1 - mean(signal1)) / std(signal1);
s2 = (signal2 - mean(signal2)) / std(signal2);

%// Compute time lag between signals
c = xcorr(s1, s2);                       %// Cross correlation
lag = mod(find(c == max(c)), length(s2)) %// Find the position of the peak 
```

请注意，必须首先将两个信号归一化到相同的能级，这样结果才不会有偏差。

顺便说一句，不要`diff`用作变量的名称。MATLAB 中已经有一个同名的[内置函数](http://www.mathworks.com/help/matlab/ref/diff.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-30T04:45:12.587

现在Matlab中有两个函数：

一个叫[finddelay](http://www.mathworks.com/help/signal/ref/finddelay.html)

我相信另一个叫做[alignsignals](http://www.mathworks.com/help/signal/ref/alignsignals.html)可以做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T22:05:57.913

corr 在向量之间找到一个点积`(v1, v2)`。如果它对您的信号效果不佳，我会尝试最小化差异平方和（即`abs(v1 - v2)`）。

```
 signal = sin(1:100);
 signal1 = [zeros(1, 10) signal];
 signal2 = [signal zeros(1, 10)];

 for i = 1:length(signal1)
     signal1shifted = [signal1 zeros(1, i)];
     signal2shifted = [zeros(1, i) signal2];
     d2(i) = sum((signal1shifted - signal2shifted).^2);
 end

 [fval lag2] = min(d2);

 lag2 
```

它在计算上比使用 FFT 可以加速的交叉计算更差。据我所知，你不能用欧几里德距离做到这一点。

UPD。删除了关于与周期信号互相关的错误想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:16:22.270

您可以尝试在频域进行匹配过滤

```
function [corr_output] = pc_corr_processor (target_signal, ref_signal)
L = length(ref_signal);
N = length(target_signal);

matched_filter = flipud(ref_signal')';
matched_filter_Res = fft(matched_filter,N);
corr_fft = matched_filter_Res.*fft(target_signal);
corr_out = abs(ifft(corr_fft)); 
```

上面 corr_out 的匹配滤波器最大索引的峰值应该为您提供滞后量。

# javascript - 在浏览器中操作 HTML 表格

> ID：15371578
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:23.727
> 
> 标签：javascript, html, firefox, web, firefox-addon

我经常阅读图表和图形，我想知道是否有 FF 或 GC 扩展允许我以拖放类型的方式执行诸如交换行和列之类的操作。

例如，如果我想比较第 1、55、92 和 143 行中的值，是否可以重新排列表格，将这四行放在图表顶部以便于比较？

我知道我可能可以将其复制并粘贴到 Excel 中，我希望浏览器有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:40:10.917

火狐：

[https://addons.mozilla.org/en-us/firefox/addon/tabletools2/](https://addons.mozilla.org/en-us/firefox/addon/tabletools2/)

[https://addons.mozilla.org/en-us/firefox/addon/export-to-csv/](https://addons.mozilla.org/en-us/firefox/addon/export-to-csv/)

您还可以导出到 excel：

[如何使用javascript将html表格导出到excel](https://stackoverflow.com/questions/6566831/how-to-export-html-table-to-excel-using-javascript)

[http://www.mrkent.com/tools/converter/](http://www.mrkent.com/tools/converter/)

然而，我...突出显示我需要的 > cntrl c > cntrl v 到 excel 中并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:27:31.577

```
var rowIndexWanted = [4, 5];

var table1 = document.getElementById('table1');
var table1body = table1.getElementsByTagName('tbody');
var rows = table1.getElementsByTagName('tr');
var rowsWanted = [];

for(i in rowIndexWanted)
{
    rowsWanted.push(rows[rowIndexWanted[i]]);
}

for(i in rowsWanted)
{
    table1body[0].insertBefore(rowsWanted[i], table1body[0].childNodes[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:37:39.697

**提示：**`Ctrl`您可以通过按住按键并选择单元格范围来选择单元格（至少在 Firefox 中） 。

[J. Ruderman 的书签](https://www.squarefree.com/bookmarklets/pagedata.html)可让您按任何列对表格进行排序、转置或对行编号。

您正在搜索的内容似乎类似于 Kendo 等框架提供的功能：[列重新排序](http://demos.kendoui.com/web/grid/column-reordering.html)或[聚合](http://demos.kendoui.com/web/grid/aggregates.html)？

# c++ - c ++单独的文件？

> ID：15371582
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:39.603
> 
> 标签：c++, file

我的问题是，当你编译你的 c++ 程序时，为什么它都放在一个 exe 文件中？该文件可能会变得很大。您会使用 dll 库来缩小大小，还是可以制作其他文件？我只想知道如何制作一个使用单独文件运行的程序。

（编辑）我只是不想将所有内容都放在一个文件中。文件最终可能会变得太大，计算机无法处理，对吧？必须有一种方法来分离文件。就像在 java 中一样，一切都在一个类文件中，这看起来更简单、更高效。FAT32 等一些驱动器的文件不能超过 4 GB，因此它们需要更细分的程序。我看了我的游戏叫portal，它的exe文件是100KB，里面有大约100个dll文件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:48:42.340

要回答你的问题，是的。如果您愿意，您绝对可以将您的程序拆分为单独的 DLL 文件。

我见过一些开发人员将实用程序函数编译成单独的通用 DLL 文件，这些文件可以作为参考包含在其他项目中。这样就可以从中调用它的对象和方法。

事后看来，编译后的代码相对较小。二进制数据确实占用了最多的空间：视频、图像、模型、声音等。尽管较小的程序可以将这些资源直接打包到可执行文件中并且很常见，但由于许多明显的原因，这通常不是一个好主意.

最后，大型可执行文件对于当今的技术来说并不是一个大问题。对于较小的程序，我不会出汗。项目越大，设计开发就越重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:40:27.093

太大了怎么办？如果是由于存储空间限制，将其拆分为多个文件不会给您带来任何好处。除非您以某种方式超出了平台上文件的最大大小（例如某些 32 位平台上的 2GB 限制），这似乎不太可能，否则您可能会担心非问题。

您可以通过关闭编译器中的调试选项、在各种平台上“剥离”它、设置优化设置以优化代码大小而不是执行速度等来减小生成的可执行文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:48:37.143

正如 OP 所建议的那样，将 exe 拆分为多个文件（在 Windows 上）的方法是使用 dll。

评论者是正确的，这实际上不会占用更少的磁盘空间，也不会节省任何内存，但是还有其他原因将应用程序拆分为多个文件。例如，共享代码（一个 dll 可以被多个应用程序使用），或者帮助应用程序更快地加载（仅在实际需要时加载 dll）。

# php - PHP 中的受保护函数

> ID：15371583
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:42.397
> 
> 标签：php

这可能看起来很简单，我相信它是，我只是不明白。

我了解 PHP 中类中的受保护属性只能在类本身和继承的类中访问。到目前为止，这是我的代码：

```
class q {

    public $publicQ = "This is a public property";
    protected $protectedQ = "This is a proected property";

    public function displayProtected() {

        echo $this->protectedQ;

    }

}

$q = new q;
echo $q->publicQ; #prints "This is a public property"
echo $q->protectedQ; #nothing
$q->displayProtected(); 
```

我已经阅读了文档，查看了关于 SO 的其他答案，但这个概念并没有引起我的注意。受保护的属性实际上做了什么，我们为什么要使用它们，为什么我的示例不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:32:05.900

将您的公共属性和方法视为您向外部世界公开的 API，将私有/受保护的 API 视为您的类的“内部工作”，外部世界不仅不应该关注而且不应该搞乱任何一个。

这是强制性的坏车类比：

您在`Car`类中公开的方法可以是`driveForward()`and `driveBackwards()`。他们都将使用一个名为的方法，`transmitTheDriveToTheWheels()`但它不应该涉及汽车的用户，也不应该被他们访问，所以你可以通过将其设为私有来“隐藏”它。

您的汽车将拥有`engine`财产。您绝对不希望有人能够通过使用可爱的小猫来替换引擎，`$car->engine = $kitty;`因此您也可以将引擎设为私有。

最后，您的汽车将拥有`mileage`财产。您希望用户能够读取里程但不能修改它。因此，您将其`mileage`设为私有并公开一个公共`getMileage()`方法。

现在，是否要使用 private 或 protected 来封装类的“内部”内容，取决于您是否希望类被扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:39:53.993

受保护的字段可以被继承，但不能像`echo $q->protectedQ;` 私有字段一样既不能显示也不能继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:39:45.163

受保护的函数使您的类更加灵活。

想想某个地方必须加载一些数据的类。它有一个默认实现，从文件中读取数据。如果你想使用同一个类，但想改变它获取数据的方式，你可以创建一个子类并覆盖 getData() 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:41:28.267

正如您所发现的，与公共方法的唯一真正区别是，受保护的函数只能从类内部或继承树中的另一个类中访问。

当函数不打算从类外部使用时，您不希望将函数声明为受保护的。这是一个语言功能，纯粹是为了让您的代码更易于理解（更易于阅读）并且不易受到错误和误用的影响。没有任何事情（以功能形式）是您仅使用公共方法无法完成的。

如果您与他人共享您的代码或者它是某种库，这将非常有用。

[对于 PHP，在使用 PHP 的魔法 getter 和 setter 函数 ( http://www.php.net/manual/en/language.oop5.overloading.php#object.set](http://www.php.net/manual/en/language.oop5.overloading.php#object.set) )时有一个特别有用的案例。

```
public $a = '1';
protected $b = '2';

public function __get($name) {
    return $this->{$name}.' (protected)';
}

$obj->a; //1
$obj->b; //2 (protected) 
```

例如，您可以“保护”您的变量并使用魔术函数捕获调用。如果您发布了一个带有变量的类，然后您决定在返回变量之前在类内部进行一些预处理，这将很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:44:11.463

您使用受保护/私有方法来包含功能，以使您的代码更易于阅读并防止在公共方法中重复相同的功能。

使属性受保护可以保护对象不被外部修改，除非您通过设置器提供访问权限。

您可以更好地控制对象的使用方式。

# c# - 用隐藏数字计算

> ID：15371584
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:49.083
> 
> 标签：c#, calculated-field

设计：

```
ComboBox1__txtBox1__txtBox2___txtBox3 
```

当您在 comboBox1 中选择一个名称时，将使用 txtBox1 和 txtBox2 中的 DataBinding 调用一个数字。

```
double a1 = Convert.ToDouble(textBox1.Text);
double b1 = Convert.ToDouble(textBox2.Text);

textBox3.Text = (a1 * b1).ToString(); 
```

我怎样才能做到这一点，以便在设计中看不到 textBox2。如果我将 textBox2 Properties Visible 设置为 false，我会收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:40:10.670

尝试使用这个。

```
<asp:HiddenField id="InvisibleField" runat="server" /> 
```

赋值 (a1 * b1).ToString(); 的结果 到“隐形场”。

# jquery - Backbone.js 和 setInterval：如何检查 DOM 中是否已经存在某些内容

> ID：15371587
> 
> 赞同：1
> 
> 时间：2013-03-12T20:35:53.400
> 
> 标签：jquery, dom, backbone.js

我在我的通话中添加了一个`setInterval`通话`fetch`（在我的收藏中），它产生了意想不到的副作用。这是调用集合的视图：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tableView'
],
function($, _, Backbone, tableModel, tablesCollection, tableView) {
    var tablesView = Backbone.View.extend({
        tagName: 'div',
        initialize: function(options) {
            this.collection.on('reset', this.render, this);
            this.template = this.options.template;
            this.url = this.options.url;
        },
        render: function() {
            this.collection.each(this.addOne, this);
            return this;
        },
        addOne: function(model) {
            var TableView = new tableView({ model: model, template: this.template, url: this.url });
            $(this.$el).append(TableView.render().el);
            return this;
        }
    });

    return tablesView;
}); 
```

如您所见，此视图遍历集合，将每个线索附加到 DOM，这正是我想要的。`setInterval`但是每次获取集合时都会调用它。这就是我想要的，但我想在 之前添加一行`append`以检查该项目是否已经在 DOM 中。我想我可以使用`model.get('id')`它并将其与 DOM 进行比较。这是最好的方法吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:55:40.210

此类事物的基本/幼稚模式是具有遵循此模式的渲染方法：

```
render: function() {
    this.$el.empty()
    this.collection.each(this.addOne, this);
    return this;
} 
```

否则，您的 DOM 和集合将不同步，正如您所注意到的。如果您正在做一些非常激烈的事情（这也可能是不明智的），例如每 100 毫秒重新获取您的集合或渲染 5000 个模型，您可能需要一种更复杂的方法，但这些代码味道表明您的方法是错误的。如果你想要一些实时的东西，请查看 socket.io 和 pub/sub。如果您要使用 setInterval 进行服务器轮询，只需 KISS 并清空视图并重新渲染所有内容。

既然您问过，如果您确实需要通过手动（和脆弱）检查来避免重新渲染，请将一个`data-id="<%= model.id %>"`属性放在模型视图的最外层标记上，然后检查`this.$('[data-id=' + model.id + ']').length`以确定它是否已经在 DOM 中。

# jquery - 使用 JQuery 显示按钮的不同状态和显示/隐藏内容

> ID：15371589
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:59.137
> 
> 标签：jquery, html, css

我的网站：[实时工作示例](http://www.interfaithmedical.com/validate/test.htm)

到目前为止，我已经实现了内容的淡出和淡入。

代码：

```
$(document).ready(function(){

    $('.clinical').click(function (event){
        $("#cl").fadeIn();
        $("#nc").fadeOut();
        $("#bth").fadeOut();
    });
    $('.nonclinical').click(function (event){
        $("#cl").fadeOut();
        $("#nc").fadeIn();
        $("#bth").fadeOut();
    });
    $('.both').click(function (event){
        $("#cl").fadeOut();
        $("#nc").fadeOut();
        $("#bth").fadeIn();
    });

}); 
```

如果有人可以提供帮助，我需要以下帮助：

1.  默认情况下，由于显示临床文本，我希望临床按钮处于按下状态，以便与其他按钮区分开来。

#1 的 CSS 代码：

```
#demo {
    margin: 0px auto;
    display: block; /* Change anchor to block element */
    width: 275px; height: 47px; /* Specify width and height of the image. Height is value of each individual button graphic */
    background-image: url(testBtn.png); /* Add the image as a background */
    background-position: top; /* Set the position to the top */
    text-align: center;
    vertical-align: middle;
    line-height: 47px;       /* the same as your div height */
    font-size: 24px;
    font-weight: bold;
    font-style: italic;
    color: #5E5E5E;
}
    #demo:hover {
        background-position: center; /* Set the position to the center */
    }
    #demo:active {
        background-position: bottom; /* Set the position to the bottom */
        color: #ffffff;
    }

    #nc {
        display: none;
    }
    #bth {
        display: none;
    } 
```

1.  用户单击内容的哪个按钮应该淡入（正在工作）并且按钮处于按下状态。

2.  在IE中淡入/淡出非常不稳定，可以修复吗？

3.  优化代码以减少代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:52:15.443

当您单击按钮时，您可以添加一个类或使用 toggleClass，使用 css 添加“on”状态所需的样式。当您单击其他按钮时，您需要从按钮中删除该类并将其添加到当前按钮

像这样的东西

[http://jsfiddle.net/jue6t/2/](http://jsfiddle.net/jue6t/2/)

```
 $('.button').on('click', function() {
        if(!$(this).hasClass('on')) {
            $('.button').removeClass('on');
            $(this).addClass('on');
        }
    }); 
```

代码可以整理得更多，但你明白了

你甚至可以使用

```
$('.button.on').removeClass('on'); 
```

如果您有一个整体 ID，明智的做法是添加它，这样它就变成了

```
$('#myID .button.on').removeClass('on'); 
```

# c# - 创建一个接受类型参数的 DataContractSerializer 的通用子类是否有用？

> ID：15371590
> 
> 赞同：0
> 
> 时间：2013-03-12T20:35:59.817
> 
> 标签：c#, datacontractserializer

我过去使用过[XmlSerializer](http://msdn.microsoft.com/en-gb/library/system.xml.serialization.xmlserializer.aspx)类，发现创建 Serilize 和 Deserialize 方法的通用版本似乎很常见。我最近没有任何以前的代码，所以我搜索了一些并找到了这个页面： http: [//www.codeproject.com/Articles/233908/Xml-serialization-using-generics#section2](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics#section2)。

对于使用 XmlSerializer，它看起来非常有用。我开始做一些测试，但后来意识到我使用的是不可序列化的[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)类型。所以我再次在网上搜索，发现[DataContractSerializer](http://msdn.microsoft.com/en-gb/library/system.runtime.serialization.datacontractserializer.aspx)类，它确实支持 TimeSpan 类型。所以实际的代码现在应该可以正常工作了。

我开始想知道如何创建一个通用版本的 DataContractSerializer 类，就像它似乎与 XmlSerializer 一样常见。在网上搜索后，我无法找到任何示例。目前我认为可以创建一个通用版本，但我想知道是否有任何意义。

任何对 DataContractSerializer 有用的人都可以告诉我他们是否遇到过这个问题吗？在我尝试使用标准类之前，我是否已经过度设计了一个解决方案？

我的想法是创建一个通用包装器，它可以放入一个通用实用程序/工具程序集中，我将尝试为未来的工作开始构建它。

编辑：我还找到了这个示例： http: [//books.google.co.uk/books ?id=PvNrurEhmiEC&pg=PA108&lpg=PA108&dq=datacontractserializer+generic+wrapper&source=bl&ots=ChCqGuHXIs&sig=-uMLuqd7B1bUj6uWZfTQcScLfe0&hl=en&sa=X&eiPdAE=ypw_G&UdjvCC4YesPdAE=ypw_G&UdjvCCQ4](http://books.google.co.uk/books?id=PvNrurEhmiEC&pg=PA108&lpg=PA108&dq=datacontractserializer+generic+wrapper&source=bl&ots=ChCqGuHXIs&sig=-uMLuqd7B1bUj6uWZfTQcScLfe0&hl=en&sa=X&ei=ypw_UdjvGYesPdKqgPAG&ved=0CC4Q6AEwAA)

虽然我发现它没有编译，因为它没有实现所需的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:13:17.070

好吧，我想你可以做到这一点。您实际上也可以编写非通用版本；这是执行此操作的两个函数：

```
public static void Write<T>(T data)
{
    DataContractSerializer dcs = new DataContractSerializer(typeof(T));
    using (MemoryStream stream = new MemoryStream())
    {
        dcs.WriteObject(stream, data);
    }
}

public static void Write(object data)
{
    if (data == null)
        throw new ArgumentNullException();

    DataContractSerializer dcs = new DataContractSerializer(data.GetType());
    using (MemoryStream stream = new MemoryStream())
    {
        dcs.WriteObject(stream, data);
    }
} 
```

总的来说，它可以让您节省几行代码，并为您提供一致的界面，所以只要您正确编写它（不要只是复制粘贴;））我认为这是一个合理的做法。

# asp.net - ASP.NET 未将数据插入 SQL Server

> ID：15371601
> 
> 赞同：0
> 
> 时间：2013-03-12T20:36:18.193
> 
> 标签：asp.net, sql-server, vb.net

这里有新海报，请多多包涵。我正在做一个小型客户注册/等待列表 Web 应用程序，除了一件事之外，大多数程序都运行良好......向 SQL Server 添加数据。我已经尝试了一切，但没有任何效果。这基本上是我的代码：

```
<asp:SqlDataSource ID="SqlDataSource4" runat="server"
    ConnectionString="<%$ ConnectionStrings:CustMastTestConnectionString %>"
    InsertCommand="INSERT INTO [Turns2] ([CustNum]) VALUES (@CustNum)" >

    <InsertParameters>
        <asp:ControlParameter Name="CustNum" ControlID="txtInput" 
            PropertyName="Text" Type=String />
    </InsertParameters>
</asp:SqlDataSource> 
```

仍然......它根本没有插入任何数据。我试图看看可能出了什么问题，但我什么也没看到。任何帮助将不胜感激。

更新：这是我当前按下按钮的代码。这对我来说似乎很好，但它没有插入数据。我还确保列有足够的字符、可写、添加了自动增量等。我手动添加了一个条目，它工作正常

```
Try
        Dim connectionString As String = "Data Source=servername;Initial Catalog=CustMast_Test;Integrated Security=True"
        Using cn As New SqlConnection(connectionString)

            cn.Open()

            Dim cmd As New SqlCommand()
            cmd.Parameters.AddWithValue("@AcctNum", txtInput.Text)
            cmd.CommandText = "INSERT INTO [Turns2] ([AcctNum]) VALUES (@AcctNum)"

            cmd.ExecuteNonQuery()
            cn.Close()

        End Using
    Catch

    End Try 
```

也尝试不使用 ExecuteNonQuery。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:57:09.380

这个问题解决了吗？如果不是，则可能是您的 SQL Server 连接属性已关闭自动提交。如果是这样，则您的插入正在工作并立即回滚。没有错误，没有犯规。也没有数据。

# c - 将 Unix 移植到 Windows - pwd.h 的使用

> ID：15371602
> 
> 赞同：3
> 
> 时间：2013-03-12T20:36:18.493
> 
> 标签：c, windows, unix, mingw, posix-api

我正在尝试使用 MinGW 编译[libUnihan](http://sourceforge.net/projects/libunihan/)代码，但遇到了需要移植的函数。该函数的目的是获得规范的路径表示。它使用`pwd.h`（这是 POSIX，而 MinGW 不是），因此它可以通过检索`passwd`包含`pw_dir`. 我确实在这里找到了一些信息，并且[在](http://www.cplusplus.com/reference/cstring/strchr/)[这里](http://www.suacommunity.com/dictionary/getpwnam-entry.php)找到了一个端口，但我仍然完全不知道如何处理这个问题。使用 MinGW，我仍然有一个由 表示并位于的主目录，但由于它不是 POSIX，我不必帮助我找到这个主目录的位置。`realpath` `~``/home/nate``pwd.h`

**问：**如何移植以下功能以与 MinGW 正常工作？

```
/**
 * Return the canonicalized absolute pathname.
 *
 * It works exactly the same with realpath(3), except this function can handle the path with ~,
 * where realpath cannot.
 *
 * @param path The path to be resolved.
 * @param resolved_path Buffer for holding the resolved_path.
 * @return resolved path, NULL is the resolution is not sucessful.
 */
gchar*
truepath(const gchar *path, gchar *resolved_path){
    gchar workingPath[PATH_MAX];
    gchar fullPath[PATH_MAX];
    gchar *result=NULL;
    g_strlcpy(workingPath,path,PATH_MAX);

//     printf("*** path=%s \n",path);

    if ( workingPath[0] != '~' ){
        result = realpath(workingPath, resolved_path);
    }else{
        gchar *firstSlash, *suffix, *homeDirStr;
        struct passwd *pw;

        // initialize variables
        firstSlash = suffix = homeDirStr = NULL;

    firstSlash = strchr(workingPath, DIRECTORY_SEPARATOR);
        if (firstSlash == NULL)
            suffix = "";
        else
        {
            *firstSlash = 0;    // so userName is null terminated
            suffix = firstSlash + 1;
        }

        if (workingPath[1] == '\0')
            pw = getpwuid( getuid() );
        else
            pw = getpwnam( &workingPath[1] );

        if (pw != NULL)
            homeDirStr = pw->pw_dir;

        if (homeDirStr != NULL){
        gint ret=g_sprintf(fullPath, "%s%c%s", homeDirStr, DIRECTORY_SEPARATOR, suffix);
        if (ret>0){
        result = realpath(fullPath, resolved_path);
        }

    }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T00:10:24.017

目的是实现`~[username]/`重映射逻辑。这种代码在 Linux/UNIX 环境中是有意义的，但最常见的用途只是引用用户自己的主目录。

为方便起见，我只是添加对常见情况的支持`~/`——即当前用户，而不是支持更一般的情况——在这种情况下让它失败并出现明显错误。

获取当前用户主目录的函数是[`SHGetFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181.aspx).

```
#include <windows.h>

char homeDirStr[MAX_PATH];
if (SUCCEEDED(SHGetFolderPath(NULL, CSIDL_PERSONAL, NULL, 0, homeDirStr))) {
    // Do something with the path
} else {
    // Do something else
} 
```

在用户查找失败的情况下，您粘贴的代码不会尝试替换该字符串，而是简单地返回`NULL`，因此您可以模拟它。

# c++ - 在 Ubuntu 12.10 上使用 C++ 通过 TCP 聊天程序出现问题

> ID：15371608
> 
> 赞同：1
> 
> 时间：2013-03-12T20:36:35.180
> 
> 标签：c++, sockets, ubuntu, tcp

我正在通过 TCP 开发一个聊天程序，以允许我通过 WAN 在两台机器之间进行通信。我对 C++（来自 Java）很陌生，对 TCP 也很陌生，所以不要对我太苛刻！（：我环顾了相当多的教程并继续只找到 Echo 程序，没有任何东西可以让连接长时间保持打开状态以允许类似聊天的功能。我当前的代码如下所示：

```
#include "ClientManager.h"

ClientManager::ClientManager() {

}

void ClientManager::connectCom(char* ipAdd) {

portno = atoi(PORT);
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
server = gethostbyname(ipAdd);
if (server == NULL) {
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
}
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *)server->h_addr, 
     (char *)&serv_addr.sin_addr.s_addr,
     server->h_length);
serv_addr.sin_port = htons(portno);
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
    error("ERROR connecting");
}

void ClientManager::message(std::string msg) {
// printf("Please enter the message: ");

char * buffer = new char[msg.size() + 1];
std::copy(msg.begin(), msg.end(), buffer);
buffer[msg.size()] = '\0';
// bzero(buffer,256);
// fgets(buffer,255,stdin);
n = write(sockfd,buffer,strlen(buffer));
if (n < 0) 
     error("ERROR writing to socket");
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) 
     error("ERROR reading from socket");
printf("%s\n",buffer);
bzero(buffer,256);
}

void ClientManager::closeCom() {
close(sockfd);
}

void ClientManager::error(const char *msg)
{
perror(msg);
exit(0);
} 
```

我的服务器管理器看起来像这样：

```
#include "ServerManager.h"

ServerManager::ServerManager() {
    // int sockfd, portno, n;
 //         struct sockaddr_in serv_addr;
 //     struct hostent *server;

}

void ServerManager::openCom() {
char buffer[256];
struct sockaddr_in serv_addr, cli_addr;
int n;
     socklen_t clilen;

sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
bzero((char *) &serv_addr, sizeof(serv_addr));
portno = atoi(PORT);
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(portno);
if (bind(sockfd, (struct sockaddr *) &serv_addr,
    sizeof(serv_addr)) < 0) 
    error("ERROR on binding");
listen(sockfd,5);

clilen = sizeof(cli_addr);
newsockfd = accept(sockfd, 
            (struct sockaddr *) &cli_addr, 
            &clilen);
if (newsockfd < 0) 
    error("ERROR on accept");
bzero(buffer,256);
// n = read(newsockfd,buffer,255);
// if (n < 0) error("ERROR reading from socket");
//  printf("Here is the message: %s\n",buffer);
// n = write(newsockfd,"I got your message",18);
// if (n < 0) error("ERROR writing to socket");
}

int ServerManager::readCom() {
bzero(buffer,256);
n = read(newsockfd,buffer,255);
if (n < 0) error("ERROR reading from socket");
    printf("Here is the message: %s\n",buffer);
n = write(newsockfd,"I got your message",18);
if (n < 0) error("ERROR writing to socket");
if (buffer[0] == '0') 
    return 1;
return 0;
}

void ServerManager::closeCom() {
close(newsockfd);
close(sockfd);

}

void ServerManager::error(const char *msg) {
perror(msg);
exit(1);
} 
```

这两个类都由调用必要函数的单独主函数实现。我知道代码本身可以发送一条消息——它已经这样做了一段时间了。只是当客户端调用多个 message() 时，我遇到了错误，特别是分段错误。这只发生在第二条消息上，第一条消息被适当地发送和接收。

如果有人可以帮助我，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:36:45.583

在 ClientManager::message 中，您忘记在方法结束时删除缓冲区。或者，您应该在本地堆栈上声明缓冲区，如下所示：

```
char buffer[msg.size() + 1]; 
```

因此，缓冲区将在调用结束时自动释放。并阅读以后的代码，您最好这样做：

```
char buffer[256]; 
```

我认为如果您的 msg.size() < serverReply.size，读取服务器回复的代码会导致缓冲区溢出，即使您认为您有 256 个字符（您只是没有在方法开始时分配它们）。请注意这个缓冲区长度声明和以后的处理，因为 C++ 会让你写超出它的结尾，破坏相邻的变量并导致段错误。

# iphone - NSDateComponents 中的设置时间

> ID：15371610
> 
> 赞同：3
> 
> 时间：2013-03-12T20:36:39.557
> 
> 标签：iphone, ios, ipad, nsdatecomponents

我正在尝试在 NSDateComponents 中设置小时，我编写了以下代码

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComps = [[NSDateComponents alloc] init];

[dateComps setDay:intDay];
[dateComps setMonth:intMonth];
[dateComps setYear:intYear];
[dateComps setHour:intHoures];
[dateComps setMinute:intMinutes];

NSDate *itemDate;
itemDate = [calendar dateFromComponents:dateComps];

NSLog(@"reminder date: %@", itemDate); 
```

但是当我将小时数设置为 13 时，它设置为 11。我想要 24 小时的风格。任何人都可以在这个问题上帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:43:05.227

小时的时差表明您可能对时区有问题，您可以尝试设置日期的时区，我知道`NSDateFormatter`有`timeZone`属性，我怀疑是否`NSDateComponents`有 timeZone 属性。但是，您可以为日历设置时区

```
[calendar setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

# javascript - 光标不是实时更新的，而是在事件发生后更新的

> ID：15371616
> 
> 赞同：1
> 
> 时间：2013-03-12T20:36:57.333
> 
> 标签：javascript, html

我正在研究拖放解决方案，但我不希望放置特定项目。为此，我`dragnot = "true"`在 div 中使用该属性。

它可以工作，但是当用户在这个`dragnot`div 上拖动一个 div 时，我想将光标更改为`not-allowed`. 但光标仅在我删除 div**后**更新，而不是在我`dragenter`.

我已经在其中演示了一个[JSfiddle 。](http://jsfiddle.net/fZSS4/)尝试将 div A 或 div C 移动到 div B。你会看到在你放下 div**后**光标发生了变化（如果你没有看到光标变化，请再次将鼠标悬停在 div B 上）。

如何实时更改光标？

# php - Facebook 应用显示不同的权限框

> ID：15371617
> 
> 赞同：0
> 
> 时间：2013-03-12T20:37:01.357
> 
> 标签：php, facebook, login, permissions, facebook-login

我刚刚建立了一个网站以使用 Facebook 帐户登录。一切正常，我们现在处于测试模式。昨天我的测试员告诉我，当他想通过 Facebook 注册到该网站时，他获得的权限框与他的朋友不同。

测试箱：[箱式测试仪](http://reinvanleirsberghe.be/images/box1.jpg)

Friends box: [boxfriend](http://reinvanleirsberghe.be/images/box2.jpg) 这怎么可能，我该如何改变呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:54:51.727

您的朋友看到​​的是 Facebook 迄今为止使用的“旧”身份验证对话框，并且正在被您的测试人员看到的新对话框所取代。

（有关不同平台/设备上新对话框的描述和图片，请参阅[https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/#login-dialog](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/#login-dialog)。）

由于这仍处于推出阶段，不同的用户可能会在一段时间内看到不同的版本（旧/新），直到推出完成，它将成为每个人的新版本。

与上次 FB 更改 Auth 对话框不同，现在我所知道的没有迁移设置允许应用程序明确地“选择加入”新的。

# java - 现代 GLSL 基础知识

> ID：15371618
> 
> 赞同：1
> 
> 时间：2013-03-12T20:37:01.390
> 
> 标签：java, opengl, glsl, lwjgl

我正在尝试学习现代 GLSL，但我什至无法展示我的立方体...

这就是我创建 VBO 的方式：

```
 glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glBufferData(GL_ARRAY_BUFFER, vertexData, GL_STATIC_DRAW);
    glVertexPointer(3, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, vboNormalHandle);
    glBufferData(GL_ARRAY_BUFFER, normalData, GL_STATIC_DRAW);
    glNormalPointer(GL_FLOAT, 0, 0L);        

    glBindBuffer(GL_ARRAY_BUFFER, vboTextureHandle);
    glBufferData(GL_ARRAY_BUFFER, textureData, GL_STATIC_DRAW);
    glTexCoordPointer(2, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

这就是我渲染vbo的方式：

```
 glLoadIdentity();

    glPushAttrib(GL_TRANSFORM_BIT);
    glMatrixMode(GL_MODELVIEW);

    glTranslatef(0f, 0f, camera.zoom);

    glRotatef(camera.rotation.x, 1, 0, 0);
    glRotatef(camera.rotation.y, 0, 1, 0);
    glRotatef(camera.rotation.z, 0, 0, 1);

    glTranslatef(camera.position.x, camera.position.y, camera.position.z);

    glPopAttrib();

    texture.bind();
    glBindBuffer(GL_ARRAY_BUFFER, vboVertexHandle);
    glVertexPointer(3, GL_FLOAT, 0, 0L);
    glBindBuffer(GL_ARRAY_BUFFER, vboNormalHandle);
    glNormalPointer(GL_FLOAT, 0, 0L);
    glBindBuffer(GL_ARRAY_BUFFER, vboTextureHandle);
    glTexCoordPointer(2, GL_FLOAT, 0, 0L);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glMaterialf(GL_FRONT, GL_SHININESS, 10f);
    glDrawArrays(GL_TRIANGLES, 0, triangles.size() * 3);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);  
    glBindBuffer(GL_ARRAY_BUFFER, 0);
    TextureImpl.bindNone(); 
```

如果我不使用任何着色器程序或在旧的 glsl 120 中使用某些东西，一切都会渲染得很好，但是当我使用这个应该显示我的立方体的程序时，我会得到一个黑屏......

顶点着色器程序：

```
#version 330

layout (std140) uniform Matrices {
    mat4 pvm;
} ;

in vec4 position;

out vec4 color;

void main()
{
    gl_Position = pvm * position ;
} 
```

片段着色器程序：

```
#version 330

out vec4 outputF;

void main()
{
    outputF = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

**我做错了什么？我在哪里可以找到如何用现代 glsl 做这些基本的东西？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T21:13:39.823

我们在这里遇到的是沟通失败。

考虑一下：

```
glVertexPointer(3, GL_FLOAT, 0, 0L); 
```

好的。您告诉 OpenGL 位置数据由某个缓冲区对象提供，并且每个顶点有 3 个浮点数。好的。

OpenGL如何知道这个位置数据应该进入`position`顶点着色器？

答：不会。

`glVertexPointer`是已从 GL 3.1+ 中删除的功能。它不会将数据提供给任意顶点着色器输入；它将数据馈送到已移除的顶点着色器输入`gl_Vertex`。这是硬编码的。

您应该[使用通用顶点属性](http://www.opengl.org/wiki/Vertex_Specification)，通常通过[`glVertexAttribPointer`](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer)和[`glEnableVertexAttribArray`](http://www.opengl.org/wiki/GLAPI/glEnableVertexAttribArray)。您还应该[使用 VAOs](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object)。

同样，OpenGL 无法知道您希望它移除矩阵函数以将数据提供给 uniform `pvm`。事实上，这更糟糕，因为你把它放在[一个统一的块](http://www.opengl.org/wiki/Interface_Block#Buffer_backed)中。统一块的数据应该来自[用户提供的*缓冲区对象*](http://www.opengl.org/wiki/Uniform_Buffer_Object)。您没有提供哪些，OpenGL 不会神奇地为您提供哪些。

In short, you can't mix old-style OpenGL code with modern-style GLSL. You can use old-style GLSL (using `gl_Vertex` and `gl_ModelViewProjectionMatrix`), but then you're not using modern-style GLSL.

# hibernate - Grails 应用程序中奇怪的休眠/Gorm 行为

> ID：15371625
> 
> 赞同：1
> 
> 时间：2013-03-12T20:37:35.700
> 
> 标签：hibernate, grails, foreign-keys, relational-database, grails-orm

我有一个非常简单的关系，通常级联删除应该起作用。我的关系是这样的：

```
enum StatusName {
    PENDING, SENDING, SENT
}

abstract class Notification {
    StatusName status = StatusName.PENDING
    Date dateCreated
    Date scheduledDate
    String text = ""
    User recipient
    boolean hasBeenSeen = false

    static belongsTo = [
        selectedChannel: SelectedChannel
    ]

    static constraints = {
        status blank: false, 
            inList:[StatusName.PENDING, StatusName.SENDING, StatusName.SENT]
        scheduledDate nullable: true
        text size: 0..1000
        recipient nullable: true 
    }

    def beforeInsert() {
        if(!recipient) { 
            recipient = selectedChannel?.user
        }
    } 
```

}

这里是其他类：

包 de.carmeq.carmob

```
class SelectedChannel {

    static hasMany = [
        notifications: Notification
    ]

    static belongsTo = [
        channel: Channel,
        user: User,
        notificationType: NotificationType
    ]

    static constraints = {
        channel blank: false,
        user blank: false,
        notificationType blank: false, unique: ['channel', 'user']
    }
} 
```

我想删除给定用户的所有 selectedChannels，所以我执行以下操作：

```
Collection<SelectedChannel> selectedChannels = SelectedChannel.findAllByUser(greedyUser)
selectedChannels*.delete() 
```

但这会导致以下错误：

```
Referential integrity constraint violation: "FK237A88EBC25A325D: PUBLIC.NOTIFICATION FOREIGN KEY(SELECTED_CHANNEL_ID) REFERENCES PUBLIC.SELECTED_CHANNEL(ID)"; SQL statement: 
```

从 id=? 的 selected_channel 中删除 和版本=？[23503-164]

即使我像这样删除所有通知：

```
Collection<Notification> notifications = Notification.findAllByRecipient(greedyUser)
notifications*.delete() 
```

我犯了同样的错误...

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:44:05.673

将此映射闭包添加到**SelectedChannel**域：

```
static mapping = {
    notifications cascade: 'all-delete-orphan'
} 
```

并像这样删除 selectedChannels：

```
Collection<SelectedChannel> selectedChannels = SelectedChannel.findAllByUser(greedyUser)
selectedChannels.each{sc->
    sc.notifications.each{nt->
        sc.removeFromNotifications(nt)
    }
    sc.delete()
} 
```

如果在or Domain中也引用了**selectedChannels ，请先使用**[removeFrom](http://grails.org/doc/latest/ref/Domain%20Classes/removeFrom.html)方法清除引用。`User``NotificationType`

# mysql - SQL 连接 wordpress 表

> ID：15371632
> 
> 赞同：1
> 
> 时间：2013-03-12T20:37:51.860
> 
> 标签：mysql, sql, database, wordpress

我正在努力使用 SQL 查询来连接 3 个表以返回特定结果。

任何熟悉 wordpress 的人都可以提供帮助，因为我正在使用 wordpress 在后台与数据库进行交互，但正在构建自定义 UI。这三个表是： -

```
posts  (**ID**, post_title, post_content, post_modified_gmt)
term_relationships (**object_id**, term_taxonomy)
terms (**term_id**, name, slug) 
```

我已经到了..

```
 SELECT posts.post_title FROM posts
 INNER JOIN term_relationships
 ON posts.ID = term_relationships.object_id 
```

它返回在 term_relationships 中具有匹配 ID 号的所有帖子标题的列表。但是，术语名称在表“术语”中，并且 ID 与其他两个表不匹配。在术语表中，term_id 是指术语的名称，例如

```
term_id = 2, name = blog 
```

基本上我正在尝试实现一个查询，如果我设置 term_id = 2 它会返回表中与博客有术语关系的所有行，这意味着查询返回所有博客文章，我完全迷失了！

谁能给我一些指点？我的脑子里糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:14:16.387

我设法通过以下查询实现了我正在寻找的结果，但如果有人偶然发现这一点并有倾向，我仍然会很感激一些指针:)

```
 SELECT * FROM posts
            INNER JOIN term_relationships
            ON posts.ID = term_relationships.object_id
         WHERE term_relationships.term_taxonomy_id = 2 
            AND posts.post_type = 'post' 
            AND posts.post_status = 'publish'
         ORDER BY posts.post_modified_gmt ASC
         LIMIT 0,5 
```

# python - PAM audit_log_acct_message() 失败：不允许操作 & 用户身份验证失败

> ID：15371643
> 
> 赞同：1
> 
> 时间：2013-03-12T20:38:38.363
> 
> 标签：python, linux, authentication, ubuntu, pam

在 auth.log 文件中使用 Ubuntu（13.04 开发分支）上的 pam_python 对 vsftpd 用户进行身份验证时，我收到此错误，

```
vsftpd[1]: PAM audit_log_acct_message() failed: Operation not permitted 
```

然后 vsftpd 在尝试连接时说密码错误。以下是 auth.log 文件的完整部分：

```
vsftpd[1]: pam_auth.py(9): pam_sm_authenticate()
vsftpd[1]: pam_auth.py(9): get_user_base_dir()
vsftpd[1]: pam_auth.py(9): auth_user()
vsftpd[1]: pam_auth.py(9): get_user_base_dir()
vsftpd[1]: pam_auth.py(9): verify_password()
vsftpd[1]: pam_auth.py(5): LOGIN: dev
vsftpd[1]: PAM audit_log_acct_message() failed: Operation not permitted 
```

现在，这根本不正常，`LOGIN: dev`当帐户`dev`经过正确身份验证时输出，因此它应该对我进行身份验证（或者 python 脚本应该给出错误）.. 这是来自另一台服务器的健康输出，具有完全相同的配置：

```
vsftpd[11037]: pam_auth.py(9): pam_sm_authenticate()
vsftpd[11037]: pam_auth.py(9): get_user_base_dir()
vsftpd[11037]: pam_auth.py(9): auth_user()
vsftpd[11037]: pam_auth.py(9): get_user_base_dir()
vsftpd[11037]: pam_auth.py(9): verify_password()
vsftpd[11037]: pam_auth.py(5): LOGIN: dev
vsftpd[11037]: pam_auth.py(9): pam_sm_acct_mgmt()
vsftpd[11037]: pam_auth.py(9): get_user_base_dir()
vsftpd[11037]: pam_auth.py(9): pam_sm_setcred()
vsftpd[11037]: pam_auth.py(9): get_user_base_dir()
vsftpd[11037]: pam_auth.py(5): /home/dev/downloads/ 
```

该服务器唯一不同的是，它运行的是不同的内核（它来自与平常不同的数据中心），内核通常是：

```
Linux sb16 3.2.13-grsec-xxxx-grs-ipv6-64 #1 SMP Thu Mar 29 09:48:59 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

而我无法让 pam 工作的服务器上的内核是：

```
Linux sb17 3.8.0-12-generic #21-Ubuntu SMP Thu Mar 7 19:08:49 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

肯定有问题，但我可以在任何地方看到的唯一错误是`audit_log_acct_message() failed`消息。
当直接尝试 python 脚本时，它也会输出成功：

```
$ pam_auth.py dev test
success 
```

这可能是什么原因造成的？我该如何修复它/绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:45:36.013

我有同样的错误。

我从 kernel.org 编译了我的内核，我在过去 4 小时内尝试了很多内核。

现在我可以说内核 3.6.11 是最后一个适合我的内核。内核 3.7.0、3.8.0 和 3.8.2 不起作用。

使用内核 3.6.2 和 3.6.11 一切正常。

我使用 OpenSuSe 12.2-1.5。最新的软件包。PAM 的版本为 3.2.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:38:24.263

这有效：

*   安装新内核。
*   从源代码编译 vsftpd

（我从源代码安装了我所有的内核，所以也许你还需要内核源代码。）

现在应该可以工作了。

如果您收到“响应：500 OOPS：priv_sock_get_cmd”错误，请将“seccomp_sandbox=NO”放入您的 /etc/vsftpd.conf。

希望有帮助。

最好的问候本尼迪克特

（这是用 OpenSuSe 12.2 和 Kernel 3.8.2 测试的）

# google-sheets - 计算多列中单词的出现次数

> ID：15371646
> 
> 赞同：2
> 
> 时间：2013-03-12T20:38:57.470
> 
> 标签：google-sheets, ranking, google-sheets-formula

我有一个这样的电子表格，其中值 AE 是来自表单的相同选项：

```
+------+------+------+
| Opt1 | Opt2 | Opt3 |
+------+------+------+
|   A  |   A  |   B  |
|   B  |   C  |   A  |
|   C  |   C  |   B  |
|   A  |   E  |   C  |
|   D  |   B  |   E  |
|   B  |   E  |   D  |
+------+------+------+ 
```

我想进行排名，显示每个选项中选择最多的选项。我已经有了这个，其中 Rank 是选项的排名，而 number 是选项的计数：

```
+------+------+------+
| Rank | Opt1 | Numb |
+------+------+------+
|   1  |   A  |   2  |
|   1  |   B  |   2  |
|   3  |   C  |   1  |
|   3  |   D  |   1  |
+------+------+------+ (I have 3 of these, one for each option) 
```

我现在想对 3 个选项做一个总结，做出相同的排名但加入选项。它会是这样的：

```
+------+------+------+
| Rank |Opt123| Numb |
+------+------+------+
|   1  |   B  |   5  |
|   2  |   A  |   4  |
|   2  |   C  |   4  |
|   4  |   E  |   3  |
|   5  |   D  |   2  |
+------+------+------+ 
```

最简单的方法是从三个排名表或原始三个数据列中获取数据？

我该怎么做？

我已经有了获取选项名称、计数和排名的公式，但我不知道如何使它们与多列一起使用。

我所拥有的（F 列是数据列之一）：

另一张纸上的 B 列：

```
=SORT(UNIQUE(FILTER('Form Responses'!F2:F;NOT(ISBLANK('Form Responses'!F2:F)))); RANK(COUNTIF('Form Responses'!F2:F; UNIQUE(FILTER('Form Responses'!F2:F;NOT(ISBLANK('Form Responses'!F2:F))))); COUNTIF('Form Responses'!F2:F; UNIQUE(FILTER('Form Responses'!F2:F;NOT(ISBLANK('Form Responses'!F2:F))))); TRUE); FALSE) 
```

C栏：

```
=ArrayFormula(COUNTIF('Form Responses'!F2:F; FILTER(B2:B;NOT(ISBLANK(B2:B))))) 
```

A栏：

```
=ARRAYFORMULA(SORT(RANK(FILTER(C2:C;NOT(ISBLANK(C2:C))); FILTER(C2:C;NOT(ISBLANK(C2:C)))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:24:31.033

编辑：

合并列：

```
=TRANSPOSE(split(join(",",D2:D,E2:E),",")) 
```

合并 2 个 cols，不是很干净，但可以。（与此处的[Stacking multiple columns on to one 相同？](https://stackoverflow.com/questions/9442099/stacking-multiple-columns-on-to-one)）

完整公式：

```
=SORT(UNIQUE(FILTER(TRANSPOSE(split(join(",",D2:D,E2:E),","));NOT(ISBLANK(TRANSPOSE(split(join(",",D2:D,E2:E),",")))))); RANK(COUNTIF(TRANSPOSE(split(join(",",D2:D,E2:E),",")); UNIQUE(FILTER(TRANSPOSE(split(join(",",D2:D,E2:E),","));NOT(ISBLANK(TRANSPOSE(split(join(",",D2:D,E2:E),","))))))); COUNTIF(TRANSPOSE(split(join(",",D2:D,E2:E),",")); UNIQUE(FILTER(TRANSPOSE(split(join(",",D2:D,E2:E),","));NOT(ISBLANK(TRANSPOSE(split(join(",",D2:D,E2:E),","))))))); TRUE); FALSE) 
```

转置可以在排序之后完成。

# c++ - 删除数组会导致运行时错误。C++

> ID：15371654
> 
> 赞同：0
> 
> 时间：2013-03-12T20:39:14.503
> 
> 标签：c++, arrays, resize

我有一个有序的数组列表。在我的调整大小函数中，我创建了一个新数组并将旧数组的值分配给它，然后我使用删除旧数组`delete[] arrayname;`。每当调整大小功能发挥作用时，这都会在运行时导致错误。dbgheap.c 被调用。有没有人见过这个？

这是我的代码：

```
//--------------------------------------------------------------------------------------------
//  Name:           OrderedArray.h.
//  Description:    Header file for the use in OrderedArray.cpp.
//--------------------------------------------------------------------------------------------
#ifndef ORDEREDARRAY_H
#define ORDEREDARRAY_H
#include <iostream>

using namespace std;
//--------------------------------------------------------------------------------------------
//  Name:           template <class Datatype>   
//  Description:        
//--------------------------------------------------------------------------------------------
template <class Datatype>
//--------------------------------------------------------------------------------------------
//  Class: OrderedArray.            
//--------------------------------------------------------------------------------------------
class OrderedArray
{
//--------------------------------------------------------------------------------------------
//  Member Variables.           
//--------------------------------------------------------------------------------------------
private:
Datatype* m_array;
int size;
int g_size;
int num_elements;   //Counter for the number of elements in the Array.

void Resize(int p_size)//resizes the array to the size of p_size
    {
        cout << "Did i get this far ";
        if(p_size < 0)//checks if new size is less than 0
        {
            cout << "ERROR! Size of an array can not be less than 0!" << endl;
        }
        else//else its ok to continue
        {
            Datatype* newArray = new Datatype[p_size];//creates a pointer newArray that points at a new array
            if(newArray == 0)
            {
                return;
            }
            cout << "Did i get this far ";
            int min;

            if(p_size < size)//checks the if the new array is smaller than the old one
                min = p_size;
            else//else its going to be bigger
                min = size;
            cout << "Did i get this far ";
            int index;
            int temp = num_elements;//puts num_elements into a temporary variable called temp
            num_elements = 0;//num_elements is set to 0
            for(index = 0; index < min; index++)
            {
                newArray[index] = m_array[index];//places everything from the old array into the new array that will fit.
                if(num_elements < temp)//if the num_elements is less than temp(the original num_elements)
                {
                    num_elements++;//increment num_elements. This will keep incrementing to create the new num_elements based the number of elements cut off in the resize
                }
            }
            size = p_size;//sets the old size to be equal to the new size
            cout << "Did i get this far ";
            if(m_array != 0)
            {
            cout << "\nI am just about to delete ";
            delete[] m_array;//deletes the old array
            }
            m_array = newArray;//makes m_array point at the new array
            newArray = 0;//makes newArray a null pointer
        }
    }
//---------------------------------------------------------------------------------------
// Name:             Push
// Description:      
//---------------------------------------------------------------------------------------
void push(Datatype p_item)
{
    if(num_elements == size)//checks if the array is full and needs to be resized
    {
        Resize(size + g_size);//calls the resize function
    }

    int pos = num_elements;
    for(int x=0;x<num_elements;x++)
    {
        if(p_item < m_array[x])
        {
        pos=x;
        }
    }

    //loops through the array from high to low moving all values to the right
    //to make space for the passed in value until it gets to the right place
    for(int index = num_elements; index >= pos; index--)
    {
        m_array[index] = m_array[index-1];//moves the values to the right
    }
        m_array[pos] = p_item;//the passed in value is positioned into its ordered position
        num_elements++;

    cout<< "Num Elements " << num_elements;
    cout<< "Size " <<size;
}

    //--------------------------------------------------------------------------------------------
    //  Name:           Constructor.
    //  Description:    Constructs the Array.
    //--------------------------------------------------------------------------------------------
    OrderedArray(int p_size, int grow_size)
    {
        //Sets the Array size.
        m_array = new Datatype[p_size,grow_size];   
        size = p_size;
        g_size = grow_size; 
        //How many elements are in the Array.
    num_elements = 0;               
} 
```

//size 和 g_size 由用户在程序开始时赋予其值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:02:19.770

这里可能还有其他问题，但我能看到的最明显的是：

```
for(int index = num_elements; index >= pos; index--)
{
    m_array[index] = m_array[index-1];
} 
```

如果`pos`碰巧为零，你最终会这样做：

```
 m_array[0] = m_array[-1]; 
```

这个问题将立即显示（当`num_elements`为零时 - 你没有显示你的构造函数，但我确实希望你初始化了所有东西）。

更改`>=`为`>`in the loop 可能会解决您所有的麻烦。

从概念上讲，你应该同意这个逻辑。当您即将用新项目替换它时，*将* `m_array[pos]`项目向前移动是没有意义的。`m_array[pos]`

* * *

**[编辑]**现在你已经发布了你的构造函数：

```
m_array = new Datatype[p_size,grow_size]; 
```

由于逗号运算符的工作方式，这将使用大小`grow_size`而不是初始化您的数组。`p_size`阅读本文：[逗号运算符如何工作](https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work)

请改为：

```
m_array = new Datatype[p_size]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:13:44.063

您 `m_array = new Datatype[p_size,grow_size];` 在构造函数中的代码应该只接受一个参数，即数组的大小。

改成这样：`m_array = new Datatype[p_size];`

# nodatime - 如何使用 NodaTime 解析带有偏移量的日期和时间字符串？

> ID：15371656
> 
> 赞同：4
> 
> 时间：2013-03-12T20:39:18.070
> 
> 标签：nodatime

我正在尝试学习如何在我的应用程序中使用 NodaTime，但找不到很多如何使用该库执行某些操作的示例。

鉴于：

*   日期/时间文本`"2012/08/30 17:45:00"`
*   格式字符串是`"yyyy/MM/dd HH:mm:ss"`
*   与 UTC 的日期/时间偏移量是`-5`

我如何用 NodaTime 解析这个以获得一个

*   `OffsetDateTime`?
*   `Instant`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T23:06:00.573

使用纯 NodaTime 代码，目前没有用于`OffsetDateTime`. 请参阅[记录的限制](http://noda-time.googlecode.com/hg-history/1.0.x/docs/userguide/limitations.html)。但是，您可以通过分别解析 a`LocalDateTime`和 an来构造一个`Offset`：

```
var ldt = LocalDateTimePattern.CreateWithInvariantCulture("yyyy/MM/dd HH:mm:ss")
                              .Parse("2012/08/30 17:45:00")
                              .Value;

var o = OffsetPattern.GeneralInvariantPattern
                     .Parse("-05")
                     .Value;

var odt = new OffsetDateTime(ldt, o); 
```

有一个类似的解析器`Instant`，但它需要 UTC 时间 - 而不是偏移量。

您也可以只使用`DateTimeOffset`BCL 中的文本解析，然后执行以下操作：

```
var odt = OffsetDateTime.FromDateTimeOffset(dto); 
```

无论哪种方式，一旦你有了`OffsetDateTime`，它就可以转换为`Instant`：

```
var instant = odt.ToInstant(); 
```

# android - 如何将方形视图放入带有圆角的布局中

> ID：15371657
> 
> 赞同：3
> 
> 时间：2013-03-12T20:39:19.377
> 
> 标签：android, android-layout, android-view

这是我的问题...我正在尝试将方形按钮放入具有圆角的布局中。请看下面的截图

![android-剪辑角](../Images/8403fbbef0861609ba59d0b32151e7d9.png)

顶部部分（评论部分）应该在 twitter 和 facebook 共享按钮上具有圆角以匹配布局。

底部（列表视图）是形状应该如何作用的示例。

这就是我的形状。

```
<?xml version="1.0" encoding="UTF-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke android:width="1dp" android:color="#FF747474" />
    <solid android:color="#FFFFFF" />
    <corners android:radius="15dp" />
</shape> 
```

这是 Twitter 分享按钮。

```
<Button
    android:id="@+id/iv_chat_detail_twittershare"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:layout_margin="0dp"
    android:layout_weight="50"
    android:background="@drawable/sharetwitter" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:57:29.107

我认为这样做并不容易，因为您的线性布局的背景仍然是完整的矩形，尽管它被设置为带有圆角的形状。实现这一点的一种方法（我承认这有点过于复杂）是为 facebook 和 twitter 按钮创建单独的选择器并设置适当的角半径。

```
<!-- facebook button corners -->
<corners android:bottomRightRadius="0dp" android:bottomLeftRadius="15dp" 
     android:topLeftRadius="0dp" android:topRightRadius="0dp"/> 

<!-- twitter button corners -->
<corners android:bottomRightRadius="15dp" android:bottomLeftRadius="0dp" 
     android:topLeftRadius="0dp" android:topRightRadius="0dp"/> 
```

# wpf - 将弹出窗口位置锁定到元素，或使用图层伪造弹出窗口以在 ItemsControl 中进行就地编辑

> ID：15371659
> 
> 赞同：3
> 
> 时间：2013-03-12T20:39:22.293
> 
> 标签：wpf, popup, z-index, edit-in-place

我想要实现的基本上是`ItemsControl`在 wpf 中对数据绑定对象进行就地编辑。

my`ItemsControl`是一个`WrapPanel`包含多个用户控件 ( `NameControl`) 实例的水平控件，它显示为带有人名的粉红色小字形。看起来像这样

![图。1](../Images/a015c031435b75fb34993af83c87cf53.png)

通过弹出窗口，我可以显示此“名称”的编辑器（绑定对象的其他属性，例如`Address`等`Gender`），这绝对可以正常工作。此时我的 XAML 将类似于

```
<Style x:Key="NamesStyle" TargetType="{x:Type ItemsControl}">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
            <StackPanel>
                <Button Command="{Binding EditName}" BorderThickness="0" Background="Transparent" Panel.ZIndex="1">
                    <widgets:NameControl />
                </Button>
                <Popup IsOpen="{Binding IsEditMode}"
                            PlacementTarget="{Binding ElementName=button}"
                            Margin="0 5 0 0" Placement="Relative" AllowsTransparency="True" >

                <Border Background="White" BorderBrush="DarkOrchid" BorderThickness="1,1,1,1" CornerRadius="5,5,5,5" 
                        Panel.ZIndex="100">
                    <Grid ShowGridLines="False" Margin="5" Background="White" Width="300">
                        <!-- Grid Content - just editor fields/button etc -->
                    </Grid>
                </Border>
                </Popup>
            </StackPanel>
        </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当我点击一个看起来像的名字时给出一个输出

![图2](../Images/ae71ff7a131716dacb5d7f8bf8e28846.png)

有了这个外观，我很高兴（除了我糟糕的颜色选择！！）除了弹出窗口不随寡妇移动（调整大小/最小化/最大化）并且弹出窗口甚至高于*其他*窗口。

因此，解决部分问题的一种方法是将弹出位置“附加”或锁定到元素。我还没有找到一个好的/简单的/xaml 方法来做到这一点。我遇到了一些基于代码的解决方案，但我不确定我是否喜欢。它只是有点气味。

我试图实现的另一个解决方案是放弃弹出窗口并尝试模拟位于其他名称之上但位于相关名称控件之上（或之下，我不挑剔）的层/面板的行为。

我尝试了一些不同的事情，主要是围绕`Panel.ZIndex`在一个（网格、WrapPanel、我的主窗口顶部的一个 DockPanel）中设置控件`PanelControl`，但收效甚微。我已经实现了一个简单`BoolToVisibilityConverter`的将我的编辑器网格`Visibility`属性绑定到我的`IsEditMode`视图模型属性并且工作正常，但我不能在我的生命中安排我的元素以在`ItemsControl`名称上显示编辑器网格。

要执行上述操作，我只需注释掉`Popup`并将以下绑定添加到`Border`包含编辑器网格的`Visibility="{Binding IsEditMode, Converter={StaticResource boolToVisibility}}"`中。

所做的就是：

![图3](../Images/59fecf21c8e88c4031be3a1d79a83eac.png)

它只显示名称*下的弹出窗口，**而*不是其他名称。

有什么帮助吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:16:47.490

对我来说，这听起来像是 AdornerLayer 的工作。

我的实现一次只显示一个“弹出窗口”，您可以通过再次单击按钮来隐藏它。但是您也可以向 ContactAdorner 添加一个小的关闭按钮，或者坚持使用您的 OK 按钮，或者使用 IsHitTestVisible 的元素填充 ContactAdorner 后面的 AdornerLayer，并通过隐藏打开的 Adorner 对点击做出反应（因此点击外面的任何地方都会关闭弹出窗口） .

*编辑：应您的要求添加了小的关闭按钮。ContactAdorner 和 ContactDetailsTemplate 的变化。*

您可能要添加的另一件事是从底部剪裁后重新定位装饰器（我只检查从右侧剪裁）。

![在此处输入图像描述](../Images/766dfb86670ad17ac1a5f215b410efed.png)

xml:

```
<UserControl x:Class="WpfApplication1.ItemsControlAdorner"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                 mc:Ignorable="d" 
                 xmlns:local="clr-namespace:WpfApplication1"
                 d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:ViewModel />
    </UserControl.DataContext>

    <UserControl.Resources>
        <local:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />

        <!-- Template for the Adorner -->
        <DataTemplate x:Key="ContactDetailsTemplate" DataType="{x:Type local:MyContact}" >
            <Border Background="#BBFFFFFF" BorderBrush="DarkOrchid" BorderThickness="1" CornerRadius="5" TextElement.Foreground="DarkOrchid" >
                <Grid Margin="5" Width="300">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Full name" />
                    <TextBox Grid.Row="1" Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock  Grid.Row="2" Text="Address" />
                    <TextBox Grid.Row="3" Grid.ColumnSpan="2" Text="{Binding Address}" />
                    <TextBlock Grid.Column="1" Text="Gender" />
                    <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="1" >
                        <RadioButton Content="Male" IsChecked="{Binding Gender, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static local:Gender.Male}}" />
                        <RadioButton Content="Female" IsChecked="{Binding Gender, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static local:Gender.Female}}" />
                    </StackPanel>
                    <Button x:Name="PART_CloseButton" Grid.Column="2" Height="16">
                        <Button.Template>
                            <ControlTemplate>
                                <Border Background="#01FFFFFF" Padding="3" >
                                    <Path Stretch="Uniform" ClipToBounds="True" Stroke="DarkOrchid" StrokeThickness="2.5" Data="M 85.364473,6.9977109 6.0640998,86.29808 6.5333398,85.76586 M 6.9926698,7.4977169 86.293043,86.79809 85.760823,86.32885"  />
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Border>
        </DataTemplate>

        <!-- Button/Item style -->
        <Style x:Key="ButtonStyle1" TargetType="{x:Type Button}" >
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontFamily" Value="Times New Roman" />
            <Setter Property="Background" Value="#CC99E6" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="MinHeight" Value="24" />
            <Setter Property="Margin" Value="3,2" />
            <Setter Property="Padding" Value="3,2" />
            <Setter Property="Border.CornerRadius" Value="8" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="{TemplateBinding Border.CornerRadius}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" Margin="{TemplateBinding Margin}" >
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ItemsControl style -->
        <Style x:Key="NamesStyle" TargetType="{x:Type ItemsControl}">
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Button x:Name="button" Style="{StaticResource ButtonStyle1}" Content="{Binding FullName}" >
                            <i:Interaction.Behaviors>
                                <local:ShowAdornerBehavior DataTemplate="{StaticResource ContactDetailsTemplate}" />
                            </i:Interaction.Behaviors>
                        </Button>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <ItemsControl ItemsSource="{Binding MyContacts}" Style="{StaticResource NamesStyle}" />
    </Grid>

</UserControl> 
```

ShowAdornerBehavior、ContactAdorner、EnumToBooleanConverter：

```
using System.Windows;
using System.Linq;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Interactivity;
using System.Windows.Media;
using System.Windows.Data;
using System;
namespace WpfApplication1
{
    public class ShowAdornerBehavior : Behavior<Button>
    {
        public DataTemplate DataTemplate { get; set; }

        protected override void OnAttached()
        {
            this.AssociatedObject.Click += AssociatedObject_Click;
            base.OnAttached();
        }

        void AssociatedObject_Click(object sender, RoutedEventArgs e)
        {
            var adornerLayer = AdornerLayer.GetAdornerLayer(this.AssociatedObject);
            var contactAdorner = new ContactAdorner(this.AssociatedObject, adornerLayer, this.AssociatedObject.DataContext, this.DataTemplate);
        }
    }

    public class ContactAdorner : Adorner
    {
        private ContentPresenter _contentPresenter;
        private AdornerLayer _adornerLayer;
        private static Button _btn;
        private VisualCollection _visualChildren;

        private double _marginRight = 5;
        private double _adornerDistance = 5;
        private PointCollection _points;

        private static ContactAdorner _currentInstance;

        public ContactAdorner(Button adornedElement, AdornerLayer adornerLayer, object data, DataTemplate dataTemplate)
            : base(adornedElement)
        {
            if (_currentInstance != null)
                _currentInstance.Hide(); // hides other adorners of the same type

            if (_btn != null && _btn == adornedElement)
            {
                _currentInstance.Hide(); // hides the adorner of this button (toggle)
                _btn = null;
            }
            else
            {
                _adornerLayer = adornerLayer;
                _btn = adornedElement;

                // adjust position if sizes change
                _adornerLayer.SizeChanged += (s, e) => { UpdatePosition(); };
                _btn.SizeChanged += (s, e) => { UpdatePosition(); };

                _contentPresenter = new ContentPresenter() { Content = data, ContentTemplate = dataTemplate };

                // apply template explicitly: http://stackoverflow.com/questions/5679648/why-would-this-contenttemplate-findname-throw-an-invalidoperationexception-on
                _contentPresenter.ApplyTemplate();

                // get close button from datatemplate
                Button closeBtn = _contentPresenter.ContentTemplate.FindName("PART_CloseButton", _contentPresenter) as Button;
                if (closeBtn != null)
                    closeBtn.Click += (s, e) => { this.Hide(); _btn = null; };

                _visualChildren = new VisualCollection(this); // this is needed for user interaction with the adorner layer
                _visualChildren.Add(_contentPresenter);

                _adornerLayer.Add(this);

                _currentInstance = this;

                UpdatePosition(); // position adorner
            }
        }

        /// <summary>
        /// Positioning is a bit fiddly. 
        /// Also, this method is only dealing with the right clip, not yet with the bottom clip.
        /// </summary>
        private void UpdatePosition()
        {
            double marginLeft = 0;
            _contentPresenter.Margin = new Thickness(marginLeft, 0, _marginRight, 0); // "reset" margin to get a good measure pass
            _contentPresenter.Measure(_adornerLayer.RenderSize); // measure the contentpresenter to get a DesiredSize
            var contentRect = new Rect(_contentPresenter.DesiredSize);
            double right = _btn.TranslatePoint(new Point(contentRect.Width, 0), _adornerLayer).X; // this does not work with the contentpresenter, so use _adornedElement

            if (right > _adornerLayer.ActualWidth) // if adorner is clipped by right window border, move it to the left
                marginLeft = _adornerLayer.ActualWidth - right;

            _contentPresenter.Margin = new Thickness(marginLeft, _btn.ActualHeight + _adornerDistance, _marginRight, 0); // position adorner

            DrawArrow();
        }

        private void DrawArrow()
        {
            Point bottomMiddleButton = new Point(_btn.ActualWidth / 2, _btn.ActualHeight - _btn.Margin.Bottom);
            Point topLeftAdorner = new Point(_btn.ActualWidth / 2 - 10, _contentPresenter.Margin.Top);
            Point topRightAdorner = new Point(_btn.ActualWidth / 2 + 10, _contentPresenter.Margin.Top);

            PointCollection points = new PointCollection();
            points.Add(bottomMiddleButton);
            points.Add(topLeftAdorner);
            points.Add(topRightAdorner);

            _points = points; // actual drawing executed in OnRender
        }

        protected override void OnRender(DrawingContext drawingContext)
        {
            // Drawing the arrow
            StreamGeometry streamGeometry = new StreamGeometry();
            using (StreamGeometryContext geometryContext = streamGeometry.Open())
            {
                if (_points != null && _points.Any())
                {
                    geometryContext.BeginFigure(_points[0], true, true);
                    geometryContext.PolyLineTo(_points.Where(p => _points.IndexOf(p) > 0).ToList(), true, true);
                }
            }

            // Draw the polygon visual
            drawingContext.DrawGeometry(Brushes.DarkOrchid, new Pen(_btn.Background, 0.5), streamGeometry);

            base.OnRender(drawingContext);
        }

        private void Hide()
        {
            _adornerLayer.Remove(this);
        }

        protected override Size MeasureOverride(Size constraint)
        {
            _contentPresenter.Measure(constraint);
            return _contentPresenter.DesiredSize;
        }

        protected override Size ArrangeOverride(Size finalSize)
        {
            _contentPresenter.Arrange(new Rect(finalSize));
            return finalSize;
        }

        protected override Visual GetVisualChild(int index)
        {
            return _visualChildren[index];
        }

        protected override int VisualChildrenCount
        {
            get { return _visualChildren.Count; }
        }
    }

    // http://stackoverflow.com/questions/397556/how-to-bind-radiobuttons-to-an-enum
    public class EnumToBooleanConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value.Equals(parameter);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value.Equals(true) ? parameter : Binding.DoNothing;
        }
    }
} 
```

视图模型，我的联系人：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Input;
namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private ObservableCollection<MyContact> _myContacts = new ObservableCollection<MyContact>();
        public ObservableCollection<MyContact> MyContacts { get { return _myContacts; } set { _myContacts = value; OnPropertyChanged("MyContacts"); } }

        public ViewModel()
        {
            MyContacts = new ObservableCollection<MyContact>()
            {
                new MyContact() { FullName = "Sigmund Freud", Gender = Gender.Male },
                new MyContact() { FullName = "Abraham Lincoln", Gender = Gender.Male },
                new MyContact() { FullName = "Joan Of Arc", Gender = Gender.Female },
                new MyContact() { FullName = "Bob the Khann", Gender = Gender.Male, Address = "Mongolia" },
                new MyContact() { FullName = "Freddy Mercury", Gender = Gender.Male },
                new MyContact() { FullName = "Giordano Bruno", Gender = Gender.Male },
                new MyContact() { FullName = "Socrates", Gender = Gender.Male },
                new MyContact() { FullName = "Marie Curie", Gender = Gender.Female }
            };
        }
    }

    public class MyContact : INotifyPropertyChanged
    {
        private string _fullName;
        public string FullName { get { return _fullName; } set { _fullName = value; OnPropertyChanged("FullName"); } }

        private string _address;
        public string Address { get { return _address; } set { _address = value; OnPropertyChanged("Address"); } }

        private Gender _gender;
        public Gender Gender { get { return _gender; } set { _gender = value; OnPropertyChanged("Gender"); } }

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public enum Gender
    {
        Male,
        Female
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T18:33:50.950

`Popup`出于这些原因，我个人讨厌 WPF 的内置控件，我的解决方法是使用[自定义弹出用户控件](http://rachel53461.wordpress.com/2011/08/20/popup-panel-for-wpf/)

基本上，我会将 Popup 放在一个允许其子级重叠的面板中，例如 a`Grid`或 a `Canvas`，并将其放置在它应该位于的任何内容之上。

它包括 DependencyProperties 来指定它的父面板以及它是否打开，并且是普通 VisualTree 的一部分，因此它会随着您的 Window 移动并以与任何常规 UI 元素相同的方式运行。

典型用法如下所示：

```
<Grid x:Name="ParentPanel">
    <ItemsControl ... />

    <local:PopupPanel Content="{Binding PopupContent}"
        local:PopupPanel.PopupParent="{Binding ElementName=ParentPanel}"
        local:PopupPanel.IsPopupVisible="{Binding IsPopupVisible}" />
</Grid> 
```

可以[在我的博客上](http://rachel53461.wordpress.com/2011/08/20/popup-panel-for-wpf/)找到 UserControl 的代码以及可[下载的使用示例](http://www.mediafire.com/?ca4dwi5obdof6wh)，但我也会在此处发布它的副本。

UserControl 的 XAML 是：

```
<UserControl x:Class="PopupPanelSample.PopupPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:PopupPanelSample"
             FocusManager.IsFocusScope="True"
             >

    <UserControl.Template>
        <ControlTemplate TargetType="{x:Type local:PopupPanel}">
            <ControlTemplate.Resources>
                <!-- Converter to get Popup Positioning -->
                <local:ValueDividedByParameterConverter x:Key="ValueDividedByParameterConverter" />

                <!-- Popup Visibility -->
                <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
                <Style x:Key="PopupPanelContentStyle" TargetType="{x:Type Grid}">
                    <Setter Property="Grid.Visibility" Value="{Binding Path=IsPopupVisible,
                        RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}},
                        Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </Style>
            </ControlTemplate.Resources>

            <Grid x:Name="PopupPanelContent" Style="{StaticResource PopupPanelContentStyle}">
                <Grid.Resources>
                    <!-- Storyboard to show Content -->
                    <Storyboard x:Key="ShowEditPanelStoryboard" SpeedRatio="5">
                        <DoubleAnimation
                            Storyboard.TargetName="PopupPanelContent"
                            Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                            From="0.00" To="1.00" Duration="00:00:01"
                            />
                        <DoubleAnimation
                            Storyboard.TargetName="PopupPanelContent"
                            Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                            From="0.00" To="1.00" Duration="00:00:01"
                            />
                    </Storyboard>
                </Grid.Resources>

                <!-- Setting up RenderTransform for Popup Animation -->
                <Grid.RenderTransform>
                    <ScaleTransform
                        CenterX="{Binding Path=PopupParent.ActualWidth, Converter={StaticResource ValueDividedByParameterConverter}, ConverterParameter=2, RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}}}"
                        CenterY="{Binding Path=PopupParent.ActualHeight, Converter={StaticResource ValueDividedByParameterConverter}, ConverterParameter=2, RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}}}"
                        />
                </Grid.RenderTransform>

                <!-- Grayscale background & prevents mouse input -->
                <Rectangle
                    Fill="Gray"
                    Opacity="{Binding Path=BackgroundOpacity, RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}}}"
                    Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}}, Path=Height}"
                    Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:PopupPanel}}, Path=Width}"
                    />

                <!-- Popup Content -->
                <ContentControl x:Name="PopupContentControl"
                                KeyboardNavigation.TabNavigation="Cycle"
                                PreviewKeyDown="PopupPanel_PreviewKeyDown"
                                PreviewLostKeyboardFocus="PopupPanel_LostFocus"
                                IsVisibleChanged="PopupPanel_IsVisibleChanged"
                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                >
                    <ContentPresenter Content="{TemplateBinding Content}" />
                </ContentControl>
            </Grid>
        </ControlTemplate>
    </UserControl.Template>
</UserControl> 
```

UserControl 背后的代码如下所示：

```
using System;
using System.ComponentModel;
using System.Globalization;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Threading;

namespace PopupPanelSample
{
    /// <summary>
    /// Panel for handling Popups:
    /// - Control with name PART_DefaultFocusControl will have default focus
    /// - Can define PopupParent to determine if this popup should be hosted in a parent panel or not
    /// - Can define the property EnterKeyCommand to specifify what command to run when the Enter key is pressed
    /// - Can define the property EscapeKeyCommand to specify what command to run when the Escape key is pressed
    /// - Can define BackgroundOpacity to specify how opaque the background will be. Value is between 0 and 1.
    /// </summary>
    public partial class PopupPanel : UserControl
    {
        #region Fields

        bool _isLoading = false;                    // Flag to tell identify when DataContext changes
        private UIElement _lastFocusControl;        // Last control that had focus when popup visibility changes, but isn't closed

        #endregion // Fields

        #region Constructors

        public PopupPanel()
        {
            InitializeComponent();
            this.DataContextChanged += Popup_DataContextChanged;

            // Register a PropertyChanged event on IsPopupVisible
            DependencyPropertyDescriptor dpd = DependencyPropertyDescriptor.FromProperty(PopupPanel.IsPopupVisibleProperty, typeof(PopupPanel));
            if (dpd != null) dpd.AddValueChanged(this, delegate { IsPopupVisible_Changed(); });

            dpd = DependencyPropertyDescriptor.FromProperty(PopupPanel.ContentProperty, typeof(PopupPanel));
            if (dpd != null) dpd.AddValueChanged(this, delegate { Content_Changed(); });

        }

        #endregion // Constructors

        #region Events

        #region Property Change Events

        // When DataContext changes
        private void Popup_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            DisableAnimationWhileLoading();
        }

        // When Content Property changes
        private void Content_Changed()
        {
            DisableAnimationWhileLoading();
        }

        // Sets an IsLoading flag so storyboard doesn't run while loading
        private void DisableAnimationWhileLoading()
        {
            _isLoading = true;
            this.Dispatcher.BeginInvoke(DispatcherPriority.Render,
                new Action(delegate() { _isLoading = false; }));
        }

        // Run storyboard when IsPopupVisible property changes to true
        private void IsPopupVisible_Changed()
        {
            bool isShown = GetIsPopupVisible(this);

            if (isShown && !_isLoading)
            {
                FrameworkElement panel = FindChild<FrameworkElement>(this, "PopupPanelContent");
                if (panel != null)
                {
                    // Run Storyboard
                    Storyboard animation = (Storyboard)panel.FindResource("ShowEditPanelStoryboard");
                    animation.Begin();
                }
            }

            // When hiding popup, clear the LastFocusControl
            if (!isShown)
            {
                _lastFocusControl = null;
            }
        }

        #endregion // Change Events

        #region Popup Events

        // When visibility is changed, set the default focus
        void PopupPanel_IsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            if ((bool)e.NewValue)
            {
                ContentControl popupControl = FindChild<ContentControl>(this, "PopupContentControl");
                this.Dispatcher.BeginInvoke(DispatcherPriority.Render,
                    new Action(delegate()
                    {
                        // Verify object really is visible because sometimes it's not once we switch to Render
                        if (!GetIsPopupVisible(this))
                        {
                            return;
                        }

                        if (_lastFocusControl != null && _lastFocusControl.Focusable)
                        {
                            _lastFocusControl.Focus();
                        }
                        else
                        {
                            _lastFocusControl = FindChild<UIElement>(popupControl, "PART_DefaultFocusControl") as UIElement;

                            // If we can find the part named PART_DefaultFocusControl, set focus to it
                            if (_lastFocusControl != null && _lastFocusControl.Focusable)
                            {
                                _lastFocusControl.Focus();
                            }
                            else
                            {
                                _lastFocusControl = FindFirstFocusableChild(popupControl);

                                // If no DefaultFocusControl found, try and set focus to the first focusable element found in popup
                                if (_lastFocusControl != null)
                                {
                                    _lastFocusControl.Focus();
                                }
                                else
                                {
                                    // Just give the Popup UserControl focus so it can handle keyboard input
                                    popupControl.Focus();
                                }
                            }
                        }
                    }
                    )
                );
            }
        }

        // When popup loses focus but isn't hidden, store the last element that had focus so we can put it back later
        void PopupPanel_LostFocus(object sender, RoutedEventArgs e)
        {
            DependencyObject focusScope = FocusManager.GetFocusScope(this);
            _lastFocusControl = FocusManager.GetFocusedElement(focusScope) as UIElement;
        }

        // Keyboard Events
        private void PopupPanel_PreviewKeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Escape)
            {
                PopupPanel popup = FindAncester<PopupPanel>((DependencyObject)sender);
                ICommand cmd = GetPopupEscapeKeyCommand(popup);
                if (cmd != null && cmd.CanExecute(null))
                {
                    cmd.Execute(null);
                    e.Handled = true;
                }
                else
                {
                    // By default the Escape Key closes the popup when pressed
                    var expression = this.GetBindingExpression(PopupPanel.IsPopupVisibleProperty);
                    var dataType = expression.DataItem.GetType();
                    dataType.GetProperties().Single(x => x.Name == expression.ParentBinding.Path.Path)
                        .SetValue(expression.DataItem, false, null);
                }
            }
            else if (e.Key == Key.Enter)
            {
                // Don't want to run Enter command if focus is in a TextBox with AcceptsReturn = True
                if (!(e.KeyboardDevice.FocusedElement is TextBox &&
                     (e.KeyboardDevice.FocusedElement as TextBox).AcceptsReturn == true))
                {
                    PopupPanel popup = FindAncester<PopupPanel>((DependencyObject)sender);
                    ICommand cmd = GetPopupEnterKeyCommand(popup);
                    if (cmd != null && cmd.CanExecute(null))
                    {
                        cmd.Execute(null);
                        e.Handled = true;
                    }
                }

            }
        }

        #endregion // Popup Events

        #endregion // Events

        #region Dependency Properties

        // Parent for Popup
        #region PopupParent

        public static readonly DependencyProperty PopupParentProperty =
            DependencyProperty.Register("PopupParent", typeof(FrameworkElement),
            typeof(PopupPanel), new PropertyMetadata(null, null, CoercePopupParent));

        private static object CoercePopupParent(DependencyObject obj, object value)
        {
            // If PopupParent is null, return the Window object
            return (value ?? FindAncester<Window>(obj));
        }

        public FrameworkElement PopupParent
        {
            get { return (FrameworkElement)this.GetValue(PopupParentProperty); }
            set { this.SetValue(PopupParentProperty, value); }
        }

        // Providing Get/Set methods makes them show up in the XAML designer
        public static FrameworkElement GetPopupParent(DependencyObject obj)
        {
            return (FrameworkElement)obj.GetValue(PopupParentProperty);
        }

        public static void SetPopupParent(DependencyObject obj, FrameworkElement value)
        {
            obj.SetValue(PopupParentProperty, value);
        }

        #endregion

        // Popup Visibility - If popup is shown or not
        #region IsPopupVisibleProperty

        public static readonly DependencyProperty IsPopupVisibleProperty =
            DependencyProperty.Register("IsPopupVisible", typeof(bool),
            typeof(PopupPanel), new PropertyMetadata(false, null));

        public static bool GetIsPopupVisible(DependencyObject obj)
        {
            return (bool)obj.GetValue(IsPopupVisibleProperty);
        }

        public static void SetIsPopupVisible(DependencyObject obj, bool value)
        {
            obj.SetValue(IsPopupVisibleProperty, value);
        }

        #endregion // IsPopupVisibleProperty

        // Transparency level for the background filler outside the popup
        #region BackgroundOpacityProperty

        public static readonly DependencyProperty BackgroundOpacityProperty =
            DependencyProperty.Register("BackgroundOpacity", typeof(double),
            typeof(PopupPanel), new PropertyMetadata(.5, null));

        public static double GetBackgroundOpacity(DependencyObject obj)
        {
            return (double)obj.GetValue(BackgroundOpacityProperty);
        }

        public static void SetBackgroundOpacity(DependencyObject obj, double value)
        {
            obj.SetValue(BackgroundOpacityProperty, value);
        }

        #endregion ShowBackgroundProperty

        // Command to execute when Enter key is pressed
        #region PopupEnterKeyCommandProperty

        public static readonly DependencyProperty PopupEnterKeyCommandProperty =
            DependencyProperty.RegisterAttached("PopupEnterKeyCommand", typeof(ICommand),
            typeof(PopupPanel), new PropertyMetadata(null, null));

        public static ICommand GetPopupEnterKeyCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(PopupEnterKeyCommandProperty);
        }

        public static void SetPopupEnterKeyCommand(DependencyObject obj, ICommand value)
        {
            obj.SetValue(PopupEnterKeyCommandProperty, value);
        }

        #endregion PopupEnterKeyCommandProperty

        // Command to execute when Enter key is pressed
        #region PopupEscapeKeyCommandProperty

        public static readonly DependencyProperty PopupEscapeKeyCommandProperty =
            DependencyProperty.RegisterAttached("PopupEscapeKeyCommand", typeof(ICommand),
            typeof(PopupPanel), new PropertyMetadata(null, null));

        public static ICommand GetPopupEscapeKeyCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(PopupEscapeKeyCommandProperty);
        }

        public static void SetPopupEscapeKeyCommand(DependencyObject obj, ICommand value)
        {
            obj.SetValue(PopupEscapeKeyCommandProperty, value);
        }

        #endregion PopupEscapeKeyCommandProperty

        #endregion Dependency Properties

        #region Visual Tree Helpers

        public static UIElement FindFirstFocusableChild(DependencyObject parent)
        {
            // Confirm parent is valid.
            if (parent == null) return null;

            UIElement foundChild = null;

            int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < childrenCount; i++)
            {
                UIElement child = VisualTreeHelper.GetChild(parent, i) as UIElement;

                // This is returning me things like ContentControls, so for now filtering to buttons/textboxes only
                if (child != null && child.Focusable && child.IsVisible)
                {
                    foundChild = child;
                    break;
                }
                // recursively drill down the tree
                foundChild = FindFirstFocusableChild(child);

                // If the child is found, break so we do not overwrite the found child.
                if (foundChild != null) break;
            }
            return foundChild;
        }

        public static T FindAncester<T>(DependencyObject current)
        where T : DependencyObject
        {
            // Need this call to avoid returning current object if it is the same type as parent we are looking for
            current = VisualTreeHelper.GetParent(current);

            while (current != null)
            {
                if (current is T)
                {
                    return (T)current;
                }
                current = VisualTreeHelper.GetParent(current);
            };
            return null;
        }

        /// <summary>
        /// Looks for a child control within a parent by name
        /// </summary>
        public static T FindChild<T>(DependencyObject parent, string childName)
        where T : DependencyObject
        {
            // Confirm parent and childName are valid.
            if (parent == null) return null;

            T foundChild = null;

            int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < childrenCount; i++)
            {
                var child = VisualTreeHelper.GetChild(parent, i);
                // If the child is not of the request child type child
                T childType = child as T;
                if (childType == null)
                {
                    // recursively drill down the tree
                    foundChild = FindChild<T>(child, childName);

                    // If the child is found, break so we do not overwrite the found child.
                    if (foundChild != null) break;
                }
                else if (!string.IsNullOrEmpty(childName))
                {
                    var frameworkElement = child as FrameworkElement;
                    // If the child's name is set for search
                    if (frameworkElement != null && frameworkElement.Name == childName)
                    {
                        // if the child's name is of the request name
                        foundChild = (T)child;
                        break;
                    }
                    else
                    {
                        // recursively drill down the tree
                        foundChild = FindChild<T>(child, childName);

                        // If the child is found, break so we do not overwrite the found child.
                        if (foundChild != null) break;
                    }
                }
                else
                {
                    // child element found.
                    foundChild = (T)child;
                    break;
                }
            }

            return foundChild;
        }

        #endregion

    }

    // Converter for Popup positioning
    public class ValueDividedByParameterConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            double n, d;
            if (double.TryParse(value.ToString(), out n)
                && double.TryParse(parameter.ToString(), out d)
                && d != 0)
            {
                return n / d;
            }

            return 0;
        }        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# python - 反斜杠后跟python字符串中的数字

> ID：15371660
> 
> 赞同：6
> 
> 时间：2013-03-12T20:39:25.957
> 
> 标签：python, windows, string, directory, slash

在处理字符串中的反斜杠后跟数字时，我在 Python 中遇到了问题。我使用windows操作系统环境。

当目录中名称的开头有数字时，这变得特别烦人。

前任：`"P:\70_parseFile\80_FileDir\60_FA_050"`

这对我来说是一个发现，如果您执行“\1”、“\2”、“\3”......等等，您可以创建特殊字符。尽管这看起来很棒，但我不得不问如何关闭它，或者还有什么其他不同的字符串函数没有这个特殊功能？

谢谢大家！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T20:42:08.557

你有两个选择：

*   反斜杠那些反斜杠：

    ```
    "P:\\70_parseFile\\80_FileDir\\60_FA_050" 
    ```

*   使用[原始字符串](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)，其中反斜杠失去其“特殊含义”

    ```
    r"P:\70_parseFile\80_FileDir\60_FA_050" 
    ```

# android - Android实用按钮背景绘制不正确

> ID：15371661
> 
> 赞同：0
> 
> 时间：2013-03-12T20:39:32.513
> 
> 标签：android, button, drawable

我正在尝试在运行时为我的应用程序制作一些按钮。在大多数情况下，它有效，所以我知道我很接近。

--已解决-- 问题是，背景首先不会为正常的 UNPRESSED 状态绘制。但那是因为我没有看到可供选择的“正常”状态。那么如何设置正常状态呢？/ - 解决了 -

其次，当我点击文本时它会绘制，但它会在第三个按钮周围绘制背景，无论点击了哪个按钮。为什么它不会在按下的任何按钮周围绘制 gdPressed 可绘制对象？

这是我的代码：

```
GradientDrawable gdNormal = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[] { 0, 0, 0 });
gdNormal.setGradientType(GradientDrawable.LINEAR_GRADIENT);
gdNormal.setCornerRadii(new float[] { 8, 8, 8, 8, 8, 8, 8, 8 });
gdNormal.setStroke(1, contentColor);

GradientDrawable gdPressed = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[] { 0, 0, contentColor });
gdPressed.setGradientType(GradientDrawable.LINEAR_GRADIENT);
gdPressed.setCornerRadii(new float[] { 8, 8, 8, 8, 8, 8, 8, 8 });
gdPressed.setStroke(1, contentColor);

StateListDrawable sld = new StateListDrawable();
sld.addState(new int[] { android.R.attr.state_pressed }, gdPressed);
sld.addState(new int[] { android.R.attr.state_focused }, gdPressed);
// sld.addState(new int[] {android.R.attr.state_normal}, gdPressed); //
// no such state

btnAlarmSettings.setBackgroundDrawable(sld);
btnSettings.setBackgroundDrawable(sld);
btnSkipNextAlarm.setBackgroundDrawable(sld);

btnAlarmSettings.setText("Alarm Settings");
btnAlarmSettings.setTextColor(contentColor);
btnAlarmSettings.setTextSize(24);
btnAlarmSettings.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        btnAlarmSettings_clicked(v);
    }
});

btnSettings.setText("Settings");
btnSettings.setTextColor(contentColor);
btnSettings.setTextSize(24);
btnSettings.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        btnSettings_clicked(v);
    }
});

btnSkipNextAlarm.setText("Skip Next Alarm");
btnSkipNextAlarm.setTextColor(contentColor);
btnSkipNextAlarm.setTextSize(24);
btnSkipNextAlarm.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // not implemented yet
    }
});

llButtonRow.addView(btnAlarmSettings);
llButtonRow.addView(btnSettings);
llButtonRow.addView(btnSkipNextAlarm);

btnAlarmSettings.setBackgroundDrawable(sld);
btnSettings.setBackgroundDrawable(sld);
btnSkipNextAlarm.setBackgroundDrawable(sld); 
```

谢谢，@AwadKab。您解决了缺少的正常可绘制对象。

我仍然有一个问题，当我按下前两个按钮中的任何一个时，突出显示总是出现在“跳过下一个警报”按钮周围，而不是被点击的按钮。突出显示的 gdPressed 状态永远不会显示在前两个按钮周围。当我单击前两个按钮时，它们关联的 onClickListener 会触发并且下一个活动会开始。只是按钮周围没有突出显示。

此外，当我从后续活动（通过按后退按钮）返回并返回此活动时，按钮周围的笔划变得不完整。具体来说，前两个按钮的右侧消失了。第三个按钮完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:07:55.973

要绘制正常状态，请尝试以下操作：

```
sld.addState(new int[] { -android.R.attr.state_focused,-android.R.attr.state_pressed }, gdNormal); 
```

见`-`之前`android.R.attr.state_focused`和`android.R.attr.state_pressed`

希望这对您有所帮助。

# php - 如何将数组从 Javascript 传递到 PHP

> ID：15371671
> 
> 赞同：1
> 
> 时间：2013-03-12T20:40:09.630
> 
> 标签：php, javascript, html

我有一个函数，每次单击按钮到 localStorage 时都会保存一个数组。该按钮将被多次单击，我需要以某种方式将此数组列表放入 PHP 中，该列表位于该文件的另一个页面上。

谢谢

a.js（这个函数监听页面的onLoad）

```
 function doFirst(){
    var button = document.getElementById("button");
    button.addEventListener("click", save, false);

    var buttons = document.getElementById("clear");
    buttons.addEventListener("click", clear, false);

    var buttonss = document.getElementById("submittodb");
    buttonss.addEventListener("click", toPHP, false);

        $.ajax({
            method: 'post',
            dataType: 'json',
            url: 'edit.php',
            data: { items: oldItems }, //NOTE THIS LINE, it's QUITE important
            success: function() {//some code to handle successful upload, if needed
            }
        });

        }

        function save(){

        var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

        var newItem = {
           'num': document.getElementById("num").value,
            'methv': document.getElementById("methv").value,
            'q1': document.getElementById("q1").value,
            'q2':document.getElementById("q2").value,
            'q3':document.getElementById("q3").value,
            'q4':document.getElementById("q4").value,
            'comm':document.getElementById("comm").value,

        };
        oldItems.push(newItem);

        localStorage.setItem('itemsArray', JSON.stringify(oldItems));}

edit.php

$parsed_array = json_decode($_POST['items']);

and i get the error: Notice: Undefined index: items in /home/project/edit.php on line 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:48:15.460

为了将此数组传递给 PHP，您需要：

1.  对其进行 JSon 编码
2.  向 PHP 发出 AJAX 或 POST 请求
3.  将传入的数组解析为 PHP 数组

如果你正在使用`jQuery`（如果你不是你应该开始 - 它是非常方便的工具）步骤（1）和（2）就像

```
$.ajax({
    method: 'post',
    dataType: 'json',
    url: 'the URL of PHP page that will handle the request',
    data: { items: oldItems }, //NOTE THIS LINE, it's QUITE important
    success: function() {//some code to handle successful upload, if needed
    }
}); 
```

在 PHP 中，您可以解析传递的数组

```
$parsed_array = json_decode($_POST['items']); 
```

`{ items: oldItems }`和之间有直接联系`$_POST['items']`。您在 javascript 调用中为参数提供的变量名称将是`$_POST`它结束的数组中的键名称。因此，如果您仅`data: oldItems`在 javascript 中使用，您的所有实体都会散布在`$_POST`数组周围。

更多关于[$.ajax](http://api.jquery.com/jQuery.ajax/)和[json_decode](http://php.net/manual/en/function.json-decode.php)的信息供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:42:52.527

您可以创建一个 AJAX 函数（使用 jQuery）并将 JSON 数据发送到服务器，然后使用 PHP 函数/方法对其进行管理。

基本上，您需要将数据从客户端（浏览器）发送回数据库托管的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:44:25.910

1.  调用`JSON.stringify(oldItems);`创建 json 字符串

2.  使用 AJAX 执行 POST 请求。

可能最简单的方法是使用 jQuery：

```
$.post('http://server.com/url.php', { items: JSON.stringify(oldItems) }, function(response) {
  // it worked.
}); 
```

# bash - 案例陈述与“*”不匹配

> ID：15371679
> 
> 赞同：3
> 
> 时间：2013-03-12T20:40:23.947
> 
> 标签：bash

我正在编写一个 bash 脚本。它是菜单驱动的。

出于某种原因，我使用了 case 语句，并且在打印了所有选项之后，我使用 * 来捕获用户可能键入的任何其他内容。但由于某种原因，我的输出没有完成。

例子：

```
while [ 1 ]; do
       if [ $MAIN_MENU -eq 1 ]; then
       printMainMenu
       read option
       case "$option" in
            "1" ) printDiskSpace;;
            "2" ) printFreeMemory;;
            "0" ) exit;;
            "*" ) echo "Input not understood.";;
       esac
       fi
done 
```

现在发生的情况是，当我使用菜单时，如果我输入 1、2 或 0，它会执行正确的操作。但如果我输入 55，它只会重新显示菜单，而不会回显“输入不理解”。

我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T20:43:59.333

`*)`不适用于`"*")`Bash 默认情况。

因此，在您的示例中：

```
 *) echo "Input not understood.";; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:41:50.513

我发现我需要删除星号周围的引号......哇。

感谢您的关注！

# jquery - 如何同步 html 5 输入类型 =“范围”（滑块）项目？

> ID：15371680
> 
> 赞同：0
> 
> 时间：2013-03-12T20:40:24.050
> 
> 标签：jquery, html, input

我有以下 html，包含 3 个 html5 input="range" 项目，我将其称为滑块。html 也有一个 span 标签来显示每个滑块的值。每个跨度标签显示一个百分比数量，所有 3 个总和为 100%。

HTML：

```
<div class="container">
    <input type="range" class="slider" id="r1" value="70" /><span id="s1"></span><br />
    <input type="range" class="slider" id="r2" value="20" /><span id="s2"></span><br />
    <input type="range" class="slider" id="r3" value="10" /><span id="s3"></span><br />
    <input type="hidden" class="placeholder" />
</div> 
```

我编写了以下 jquery 代码，用于更新 2 个未更改的滑块，因为任何一个滑块都在更改。该代码使 span 标签的所有值保持同步，调整滑块未更改的两个标签，使三个标签的总和为 100。

jQuery：

```
<script type="text/javascript">
    $().ready(function () {

        //set the initial values for the spans
        var sliders = $('.slider');
        sliders.each(function (index, element) {
            var slider = $(this);
            slider.next('span').text(element.value);
        })

        $('.container').on('change', '.slider', function () {
            var slider = $(this);
            var sliderId = this.id;
            var amount = this.value;
            slider.next('span').text(amount);

            //Iterate over the sliders that are not being changed, and update them
            var sliders = $('.slider');
            var sliderCount = sliders.length;
            var otherSlidersCount = sliderCount - 1;
            sliders.each(function (index, element) {
                var x_id = this.id;

                if (x_id != sliderId) {
                    var totalChangeAmount = 100 - amount;
                    var sliderChangeAmount = totalChangeAmount / otherSlidersCount;
                    this.value = sliderChangeAmount;
                    $(this).next('span').text(sliderChangeAmount);
                }

            })

        });
    });
</script> 
```

这是一个带有工作代码的jsfiddle：

[jsfiddle](http://jsfiddle.net/rdclark/zCDNr/)

我遇到的问题是，我只是将更改滑块的更改百分比除以其他滑块的计数 (2)，然后将该数量平均分配给其他 2 个滑块中的每一个。

我需要更改它，以便每个不变滑块的跨度值相对于其现有值进行更改。例如，如果我将滑块 1 从 70 增加到 80，那么滑块 2 应该减少 5 到 15，滑块 3 也应该减少 5 到 5（总共 100%）。

任何人都可以提供有关如何完成此任务的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:50:09.980

您最好的选择是跟踪最近最少使用的滑块并仅更新其值。这是相当多的编码，特别是如果你只有 3 个滑块，但它可以让你做几乎任何事情。

# ruby-on-rails - Guard-cucumber：查看与功能相关的视图和控制器

> ID：15371684
> 
> 赞同：0
> 
> 时间：2013-03-12T20:40:27.453
> 
> 标签：ruby-on-rails, cucumber, guard

Cucumber 代表验收测试框架。因此 Cucumber 中的 BDD 假定使用控制器和视图。

但令人惊讶的是，如果控制器或视图文件（与此功能相关）已更改，guard-cucumber 不提供运行功能的方法。

可以标记特征和场景。在这种情况下如何使用控制器命名的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:40:59.847

BDD 的思想是从外向内推动开发，这意味着您从用 Cucumber 从外部描述功能开始。从外部看，您对软件的内部运作一无所知，因此您对 Cucumber 中的控制器或查看文件一无所知。要从外部与应用程序通信，您可以使用提供的界面，例如 CLI 界面或 Web 界面。给定一个 Web 界面，您可以通过浏览 Web 来描述外部：导航到 url，按下链接和按钮，填写表格并通过查看网页来验证结果。

在 BDD 周期中，您从外部描述功能，但要实现它，您需要进入内部，在那里您使用另一个测试框架（如 RSpec）来推动您的开发。在内部循环中工作时，您编写模型、控制器和视图测试来驱动您的实现，当内部测试循环和外部测试循环都为绿色时，您已经成功实现了您的功能。

Guard::RSpec 和 Guard::Cucumber 没有为外部开发提供开箱即用的实现，但您可以使用 Guard API 来实现它：

```
guard :rspec do 
  # ... your normal rspec guard config goes here

  # run cucumber after rspec passes
  callback(:run_all_end) do
    unless Guard.guards(:rspec).last_failed
      Guard.run_all({ :guard => Guard.guards(:cucumber) })
    end
  end
end 
```

当所有 RSpec 规范为绿色时，此胶水代码将触发 Cucumber，将焦点传递回外部循环。当然，您可以增强它以对正在运行的功能进行更细粒度的控制，但这在很大程度上取决于您的功能/规范文件和目录的正确命名模式。

# .net - 为什么 .NET 应用程序会停止执行任何网络 I/O？

> ID：15371686
> 
> 赞同：1
> 
> 时间：2013-03-12T20:40:30.403
> 
> 标签：.net, winsock

我正在调查在客户端工作站上看到的一个问题，其中相当大的 WinForms .NET 3.5 应用程序偶尔会停止执行任何类型的网络操作，并最终由于在主线程上执行网络操作而冻结。

通过网络操作，我的意思是任何需要新网络连接的东西。该应用程序连接到多个 Oracle 数据库和 SOAP Web 服务。

检查应用程序的内存转储会显示在不同线程上对非托管代码的各种阻塞调用：

DNS 查找卡住 ( `System.Net.UnsafeNclNativeMethods+SafeNetHandlesXPOrLater.getaddrinfo`)

打开的套接字卡住 ( `System.Net.UnsafeNclNativeMethods+OSSOCK.WSAConnect`)

关闭套接字卡住 ( `System.Net.UnsafeNclNativeMethods+SafeNetHandles.closesocket`)

打开 ODBC 卡住 ( `System.Data.Common.UnsafeNativeMethods.SQLDriverConnectW`)

以上所有非托管堆栈的顶部如下所示：

```
0a90df4c 77858cd8 ntdll!ZwWaitForSingleObject+0x15
0a90df74 73c5716f ntdll!RtlIntegerToUnicodeString+0x20b
0a90dfbc 76f45db1 siifslsp!WSPStartup+0x483f 
```

重新启动应用程序后，它恢复正常。这向我暗示了某种类型的资源泄漏，但我该如何追踪呢？

我检查了开放网络连接的实例，可以看到以下计数：

*   `System.Net.HttpWebRequest`5 个实例
*   `System.Net.Sockets.Socket`11 个实例
*   `System.Data.Odbc.OdbcConnectionHandle`4 个实例

这些对我来说看起来并不高。

**更新 1** - 截断输出`!FinalizeQueue`

的输出`!FinalizeQueue`对我来说没有任何异常。我已将其限制为与 IO 相关的任何内容。

```
0:024> !FinalizeQueue
SyncBlocks to be cleaned up: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 359 finalizable objects (41f35654->41f35bf0)
generation 1 has 0 finalizable objects (41f35654->41f35654)
generation 2 has 10697 finalizable objects (41f2af30->41f35654)
Ready for finalization 0 objects (41f35bf0->41f35bf0)
Statistics:
      MT    Count    TotalSize Class Name
6e612a38        1           20 System.Net.SafeLocalFree
6ea7e550        1           24 System.Net.Sockets.TcpClient
6a606c54        1           24 System.Data.Odbc.OdbcEnvironmentHandle
6e60f7f4        2           40 System.Net.SafeFreeAddrInfo
05da845c        2           40 System.Net.SafeCloseSocket+InnerSafeCloseSocket
0642c010        2           56 System.Net.SafeCloseSocketAndEvent
6e6106bc        4           96 System.Net.SafeRegistryHandle
6e6105d0        4          112 System.Net.SafeCloseSocketAndEvent
6a6069bc        4          112 System.Data.Odbc.OdbcConnectionHandle
6a6060c8        4          256 System.Data.Odbc.OdbcConnection
6e60f764       11          264 System.Net.SafeCloseSocket
6e6115cc        7          336 System.Net.Sockets.NetworkStream
66e60eeec       11          836 System.Net.Sockets.Socket

Total 11056 objects 
```

**更新 2** - 使用`!locks`和`!critsec`查看块在哪里

的输出`!critsec`是：

```
0:002> !critsec 73c7147c

CritSec siifslsp!GetLspGuid+1a0fc at 73c7147c
WaiterWoken        No
LockCount          8
RecursionCount     1
OwningThread       5f24
EntryCount         0
ContentionCount    8
*** Locked 
```

不确定`5f24`指的是什么。的输出`!Threads`不显示任何带有`OSID`of 的线程`5f24`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:48:06.003

我承认我没有明确的答案，但这里有一些建议。

`!waitlist`首先，尝试使用WinDbg 中的命令找出线程阻塞的对象，如[本博](http://dotnetdebug.net/2005/06/22/blocked-finalizer-thread/)文中所述。这可能会抛出一个线索，可以解释为什么不同的线程被阻塞。

[这是另一个方便的博客文章](http://voneinem-windbg.blogspot.co.uk/2006/04/how-to-find-out-on-which-thread.html)，它解释了如何深入挖掘以找到阻塞线程的内容。

好的信息的另一个来源可能是`Event Viewer`, 特别`the Windows Logs -> System`部分。您可以扫描此处的条目并查找任何条目`Error`或`Warnings`查看他们所说的内容。那里可能会发布与网络相关的消息，你永远不知道。

我会不断更新此答案，因为我会为您找到其他可能有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:20:09.657

.NET 默认将远程连接数限制为 2。

确保正确设置了以下属性：

```
<system.net>
  <connectionManagement>
    <add address = "*" maxconnection = "24" />
  </connectionManagement>
</system.net> 
```

查看以下 MSDN 页面以获取更多信息：

[http://msdn.microsoft.com/en-gb/library/system.net.configuration.connectionmanagementelement.maxconnection(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/system.net.configuration.connectionmanagementelement.maxconnection%28v=vs.100%29.aspx)

# c# - 如何保存 CheckedListBox 的选中项以供以后检索？

> ID：15371688
> 
> 赞同：0
> 
> 时间：2013-03-12T20:40:31.780
> 
> 标签：c#, winforms, combobox, checkedlistbox

控制：

*   1 个组合框
*   1 选中列表框

组合框：

*   项目：110
*   事件：
    *   SelectedIndexChanged：每次选中的索引改变时CheckedListBox的items集合改变

职能：

```
private void cbSubCategories_SelectedIndexChanged(object sender, EventArgs e)
{
    switch(cbSubCategories.Text)
    {
        clbSubCategories2.Items.Clear();
        case "Category 1":
            AddSubCategory(0, 15);
            break;
        //etc.
    }
}

private void AddSubCategories2(int from, int to)
{
    for (int i = from; i < to; i++)
        clbSubCategories2.Items.Add(strSubCategories2[i]);
} 
```

选中列表框

*   项目：取决于在 ComboBox 中选择的项目
*   事件：
    *   ItemCheck：将选中的项目添加到列表中

职能：

```
List<string> checkedItems = new List<string>();

private void clbSubCategories2_ItemCheck(object sender, ItemCheckEventArgs e)
{
    int idx = 0;
    if (e.NewValue == CheckState.Checked)
        checkedItems.Add(clbSubCategories2.Items[e.Index].ToString());
    else if (e.NewValue == CheckState.Unchecked)
    {
        if (checkedItems.Contains(clbSubCategories2.Items[e.Index].ToString()))
        {
            idx = checkedItems.IndexOf(clbSubCategories2.Items[e.Index].ToString());
            checkedItems.RemoveAt(idx);
        }
    }
} 
```

现在假设我在 ComboBox 上选择了项目**A**，所以 CheckedListBox 现在有 Collection Items **Q**。**我从Q**中检查 2 个项目，然后从 ComboBox **B中选择不同的项目，因此 CheckedListBox (** **W** )的集合项目也发生了变化。现在如果我回到**A**，Collection Items **Q**会再次被取回。我现在也想检索我检查的 2 个项目。我怎么能这样做？

我的想法是这样的（我在最后的 cbSubCategories_SelectedIndexChanged 中添加了这段代码）但它抛出了这个异常`Collection was modified; enumeration operation may not execute.`：

```
int x = 0;
foreach (string item in clbSubCategories2.Items)
{
    foreach (string item2 in checkedItems)
    {
        if (item2 == item)
            clbSubCategories2.SetItemChecked(x, true);
    }
    x++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:50:30.553

你为什么不在你`SelectedIndexChanged`的组合框发生时这样做。这就是您每次 CheckedListBox 重新绑定的地方。

所以在里面`AddSubCategories2(int from, int to)`，在将项目添加到您的 CheckedListBox 之后，再次遍历它的项目并标记所有存在于 checkedItems 列表中的项目。

```
private void AddSubCategories2(int from, int to)
{
       for (int i = from; i < to; i++)
        clbSubCategories2.Items.Add(strSubCategories2[i]);

       if(checkedItems!=null)
          foreach(string item in checkedItems)
          { 
              int index=  clbSubCategories2.FindStringExact(item);
              if(index>-1)
                clbSubCategories2.SetItemChecked(index, true);
          }
} 
```

# python - 如何按值（DESC）然后按键（ASC）对字典进行排序？

> ID：15371691
> 
> 赞同：26
> 
> 时间：2013-03-12T20:40:44.057
> 
> 标签：python, sorting, key

在发现了惊人的之后`sorted()`，我又陷入了困境。

问题是我有一个形式的字典，`string(key) : integer(value)`我需要按其整数值的降序对其进行排序，**但**如果两个元素具有相同的值，则按键的升序排序。

一个更清楚的例子：

```
d = {'banana':3, 'orange':5, 'apple':5}
out: [('apple', 5), ('orange', 5), ('banana', 3)] 
```

在做了一些研究之后，我得出了如下结论：

```
sorted(d.items(), key=operator.itemgetter(1,0), reverse=True)
out: [('orange', 5), ('apple', 5), ('banana', 3)] 
```

这是因为它对值和键都进行了反向排序。我需要不反转的密钥。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-12T20:44:00.057

就像是

```
In [1]: d = {'banana': 3, 'orange': 5, 'apple': 5}

In [2]: sorted(d.items(), key=lambda x: (-x[1], x[0]))
Out[2]: [('apple', 5), ('orange', 5), ('banana', 3)] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-01T22:39:27.380

*   字典不能直接排序，因此您需要对*items()*进行排序，即包含键/值对的元组列表。

*   由于您要按值字段排序，然后按键字段排序，因此有必要从元组中提取这些字段以用作`operator.itemgetter`获取指定字段的排序键。

*   最后，要对一个字段进行降序排序，然后对另一个字段进行降序排序，请执行两遍，首先按辅助键升序排序，然后再按主键降序排序。这一步依赖于 Python 的[排序稳定性](https://en.wikipedia.org/wiki/Category:Stable_sorts)。

例如：

```
import operator
In [1]: d = {'banana': 3, 'orange': 5, 'apple': 5}

In [2]: fruit = sorted(d.items(), key=operator.itemgetter(0))
In [3]: sorted(fruit, key=operator.itemgetter(1), reverse=True)
Out[3]: [('apple', 5), ('orange', 5), ('banana', 3)] 
```

有关更多详细信息，请参阅[Python Sorting-HOWTO 指南](https://docs.python.org/2.7/howto/sorting.html)。

# grails - 在 Grails 中查找会话用户的公共 IP 地址

> ID：15371692
> 
> 赞同：2
> 
> 时间：2013-03-12T20:40:44.287
> 
> 标签：grails, groovy, get, request, ip-address

我想在 grails 中请求会话用户的远程地址。我在这里找到了一个描述问题的问题（[Grails 找到会话用户的公共 IP 地址](https://stackoverflow.com/questions/8135467/grails-find-public-ip-address-of-the-session-user)）并且答案确实有效。我只使用 request.getRemoteAddr() 并在我的本地主机中收到 0:0:0:0:0:0:0:1。但是，我必须做什么才能看到用户的真实 IP 地址？

在我发现的上一个问题中，说“尝试从另一台计算机查看站点时查看 request.remoteAddr 的输出”。我真的不知道这意味着什么，我需要你的帮助。我只能在我自己的浏览器中加载服务器，我使用“localhost:8080/...”请告诉我如何以及在哪里获得正确的请求。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:15:46.723

> “从另一台计算机查看站点时，请尝试查看 request.remoteAddr 的输出”

意味着您需要从 LAN 中的另一台机器连接到在您的机器上运行的应用程序。
如果您的 LAN 中有另一台机器，您将需要找到您的本地网络 IP 地址（使用 ipconfig）并从另一台机器连接到该地址。例如，如果您的 IP 是`192.168.0.2`，请连接到`http://192.168.0.2:8080`

正如 tim_yates 提到`request.getRemoteAddr()`的，由于动态寻址和代理服务器，可能并不总是返回正确的地址。但是，您**可能会**从各种 HTTP 标头中找到原始地址，例如：`HTTP_CLIENT_IP, HTTP_X_FORWARDED_FOR, HTTP_X_FORWARDED`
查看此[问题](https://stackoverflow.com/questions/527638/getting-the-client-ip-address-remote-addr-http-x-forwarded-for-what-else-coul)的答案，它提供了有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:04:31.963

这是你将得到的最好的。

```
0:0:0:0:0:0:0:1 
```

是您的本地地址。此外，由于动态寻址和代理服务器，这不能保证对用户来说是唯一的

# java - 如何借助通过不同wifi连接到互联网的IP地址连接客户端和服务器？

> ID：15371694
> 
> 赞同：0
> 
> 时间：2013-03-12T20:40:54.130
> 
> 标签：java, sockets, network-programming, ip-address, serversocket

我使用笔记本电脑作为服务器，使用移动设备作为客户端。我需要在他们之间发送消息。我可以通过使用笔记本电脑的本地 IP 地址并将它们都连接到同一个 wifi 网络来做到这一点。但是，如果我需要发送消息，尽管它们通过不同的 wifi 网络连接到不同的互联网，我如何使用 IP 地址。这是客户端中的代码：

```
 client = new Socket("192.168.0.103", 4444); //local ip address of server 
```

这是服务器中的代码：

```
serverSocket = new ServerSocket(4444);  //Server socket
clientSocket = serverSocket.accept();   //accept the client connection
inputStreamReader = new InputStreamReader(clientSocket.getInputStream());
bufferedReader = new BufferedReader(inputStreamReader); //get the client message
String input=bufferedReader.readLine(); 
```

我可以使用网关或动态或静态 ip 来解决这个问题吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:09:48.167

您需要在服务器端配置调制解调器/路由器，以便（从客户端 mobil）到端口 4444 的外部呼叫将被重定向到子网中的正确设备。

这是必须在路由器上手动完成的配置更改。此外，并非所有路由器都支持这种服务重定向功能（但大多数都支持）。即使路由器支持它，有时也可能很难找到正确的方法，因为模型之间可能有不同的名称。

通常，即使有单个设备连接到路由器，您也必须这样做。

在某些安装中，路由器和模型是两个不同的物理设备，但您也可以在单个设备中找到这两个功能。如果您有能力将多个设备连接到您的调制解调器，那么您的调制解调器也可能提供路由功能。但是，我记得过去看到一些调制解调器无法将外部服务调用重定向到特定设备（或者至少，我个人从未找到如何为这些模型执行此操作）。

如果您的网络只有一个路由器 - 就像大多数家庭安装一样；那么网关和路由器之间没有真正的区别。但是，如果您的服务器位于具有多个路由器的复杂本地网络上，那么正确配置整个网络会变得非常困难；特别是当您进行安全检查时。

因此，如果您在家，您应该查阅 wify 设备的文档，或者请负责公司网络的人员进行配置。

# asp.net - 查询适用于 Excel 中的 Microsoft 查询，但不适用于 Visual Studio asp.net

> ID：15371697
> 
> 赞同：0
> 
> 时间：2013-03-12T20:41:09.920
> 
> 标签：asp.net, visual-studio-2010

您好，我有一个组合两个表的查询。它在 excel 中运行良好，但是在尝试将其添加到 gridview 时在 VS10 中超时。ODBC 是 ProvideX ，它不是很灵活......它甚至不会让我使用连接，但我的代码和查询如下。有什么问题可以告诉我，谢谢！

```
SELECT CWIPH.CUST_NO, CWIPH.JOB_NAME, CJCMS.JOB_DESC
FROM CJCMS CJCMS, CWIPH CWIPH
WHERE CWIPH.JOB_NO = CJCMS.JOB_NO 
```

ASP

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1">
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="Dsn=Jake" ProviderName="System.Data.Odbc" 
    SelectCommand="SELECT CWIPH.CUST_NO, CWIPH.JOB_NAME, CJCMS.JOB_DESC
    FROM CJCMS CJCMS, CWIPH CWIPH
    WHERE CWIPH.JOB_NO = CJCMS.JOB_NO"> 
```

# sql - 在 MS Access 2010 中将参数作为字段名传递给子查询

> ID：15371698
> 
> 赞同：0
> 
> 时间：2013-03-12T20:41:18.123
> 
> 标签：sql, ms-access

我正在寻找（在 Access SQL 而不是 VBA 中）基于父查询的字段值传递参数。有任何想法吗？

```
SELECT 
o25Year, 
(SELECT 'Y' & [p0] FROM tblOCA WHERE LEID = tblo25U.LEID) AS OCI
FROM tblo25U 
```

我想做的是根据 o25Year 的值分别从名为 Y1、Y2、Y3、Y4 或 Y5 的字段中提取数据。这在 SQL 中是否可能，或者我是否坚持将一个很好的快速查询转换为缓慢的 VBA？基本上设置参数 p0 = o25Year 然后从 Y*o25Year* 字段中提取数据。

将表格重新设计为两端更有用的结构不是一种选择。

# visual-studio - 构建机器上的大型 TFSUser\AppData\Local\Temp 目录

> ID：15371702
> 
> 赞同：12
> 
> 时间：2013-03-12T20:41:28.043
> 
> 标签：visual-studio, tfs, tfsbuild

我在 Windows Server 2008 R2 上使用 TFS 2012 Update 1。我们在帐户 TFSUser 下运行 TFS 构建。前几天，我们的构建机器空间不足。经过调查，我发现文件夹 C:\Users\TFSUser\AppData\Local\Temp 中有超过 50GB 的文件，其中一些可以追溯到 2012 年 10 月。这些文件都不是太大，但它们不会似乎总是被清理干净。

今天的调查表明，在自动构建过程中，文件夹被写入了很多内容。为什么这些文件没有被清理，我可以做些什么来确保我的构建机器不会因为这个问题而再次耗尽空间？

**更新 2013-03-13**
我创建了一个小型 powershell 脚本，它每晚运行以删除临时目录内容。这是powershell脚本：

```
Stop-Service TFSBuildServiceHost.2012
Remove-Item Drive:\Path\To\TFSUser\AppData\Local\Temp\* -recurse -exclude Build*
Start-Service TFSBuildServiceHost.2012 
```

我以 TFSUser 帐户的身份每晚以提升的权限运行任务。需要提升的权限，因为我们需要启动和停止服务。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:06:54.767

这是一个 TFS2010 问题，我猜他们在 2012 年还没有解决。构建系统创建临时文件并且从不清理它们，最终导致失败，因为磁盘已满或因为它们使用有限数量的数字作为唯一 ID 并且用完了可以使用的新 ID（IIRC，它失败了在 65536 个文件，我们通常在我们运行磁盘空间之前很久就点击了）

解决方案是定期删除临时文件。我每年大约手动执行 2-4 次。最安全的方法可能是禁用构建代理，然后清理临时文件夹，然后重新启用代理（如果服务器已经运行了几个月，同时重新启动服务器可能不是一个坏主意）。

另一种方法可能是每天/每周设置一个小型计划任务，清除几天前的任何临时文件，并在您不知道其他任何内容（如通宵构建）将运行的半夜运行它。

或者，如果您的服务器每年重新启动几次，那么在构建代理启动之前清理临时文件夹的启动脚本可能是一个干净整洁的解决方案。

这完全取决于您的磁盘填满的速度 - 您可能会发现这是几个月积累的垃圾，而不是在短时间内击中您的东西，在这种情况下，您不需要非常积极的方法来保持运行顺利。

# java - 如何使用 Spring 管理与多个数据库的连接

> ID：15371706
> 
> 赞同：1
> 
> 时间：2013-03-12T20:41:33.833
> 
> 标签：java, database, spring, hibernate, jdbc

我已阅读其他主题，但没有找到好的明确答案

我正在尝试开发一个能够：

1) 在一个单独的 UI 数据库中记录/跟踪用户事件，我们通过 hibernate 使用相同的数据库模式连接该数据库（可能将 connectionString 保存到不同的 oracle 数据库）

2）在运行时登录时，您可以选择一个环境连接到具有相同架构（但数据不同）的三个不同oracle数据库之一

3) 提供正确的 DataSource 以及用户名和密码（从哪里获取这些敏感数据？我不会将其存储在应用程序的某个位置）

我对 Spring 框架相当陌生。我发现这个[链接](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)可能是第一个线索。

有什么建议么？

同样使用 Spring 3.1 或 3.2，JDBC 来查询我的 oracle 数据库和休眠映射到我的 UI 数据库。这听起来很混乱，所以我有一张照片：

[基础设施](http://imageshack.us/photo/my-images/838/infrastructurearchitect.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:59:02.593

只需创建不同的 DAO，每个 DAO 都附加一个单独的持久性单元。在您的 persistence.xml 中，您可以有多个持久性单元，每个都连接到不同的数据库。

例子：

```
public class Dao1{
@PersistenceContext(unitName="Database1")
protected EntityManager entityManager;

public class Dao2{
@PersistenceContext(unitName="Database2")
protected EntityManager entityManager;

<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="Database1">     
        <exclude-unlisted-classes />                    
        <properties>
        </properties>
    </persistence-unit>

    <persistence-unit name="Database2">     
        <exclude-unlisted-classes />                    
        <properties>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:19:52.127

您在帖子中提到的链接如下：

1）创建指向不同模式的不同数据源。

2) 扩展 AbstractRoutingDataSource 并创建您自己的数据源，覆盖将提供键值的确定当前查找键方法。在您的情况下，它将返回用户从 UI 中选择的任何内容。同样在您的自定义数据源的 bean 定义中，将所有数据源作为映射传递，其中键作为 UI 上可用的选项。

3) 现在将此数据源分配给您的会话工厂 bean。

# eclipse - 为什么ADT让我导出一次。第二次导出它会使 OSX 10.6 崩溃

> ID：15371708
> 
> 赞同：1
> 
> 时间：2013-03-12T20:41:38.480
> 
> 标签：eclipse, osx-snow-leopard, adt

几天以来，我遇到了一个奇怪的问题。在为 android 导出一个项目后，一旦它工作正常，第二次导出我做 eclipse 崩溃并出现此错误：

```
Identifier:      org.eclipse.eclipse
Version:         3.8 (3.8)
Code Type:       X86-64 (Native)
Parent Process:  launchd [269]

Date/Time:       2013-03-12 21:36:13.365 +0100
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          321292 sec
Crashes Since Last Report:           3
Per-App Interval Since Last Report:  44806 sec
Per-App Crashes Since Last Report:   2
Anonymous UUID:                      52A136CA-CDAE-4661-B166-51B04A18C21C

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: 0x000000000000000a, 0x000000011f1c965f
Crashed Thread:  46  Java: ModalContext 
```

任何线索。运行：adt-bundle-mac-x86_64-20130219

SIGBUS 看起来像坏 RAM，但其他​​事情也会发生？乙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:27:10.240

我想那是随机的。正如[这个线程](https://stackoverflow.com/questions/11752270/exporting-apk-from-eclipse-adt-silently-crashes)中提到的，如果 eclipse 在您导出项目的同时构建您的项目，它看起来可能会发生。您可以在导出时尝试禁用 eclipse 中的“自动构建”选项。

# c# - XML 值不会读取到字符串

> ID：15371711
> 
> 赞同：1
> 
> 时间：2013-03-12T20:41:48.470
> 
> 标签：c#, xml, winforms, listbox

我的 XML 代码遇到问题，它似乎没有保存，当我打印出来时，什么也没有发生。我不确定出了什么问题，因为在它加载到我的列表框之前，它会加载不正确。代码如下，我读取 XML 的目的是将值存储在列表中，然后获取选定的标签并将其添加到列表框中。

```
String workingDir = Directory.GetCurrentDirectory();

XmlTextReader textReader = new XmlTextReader(workingDir + @"\XML.xml");
textReader.Read();
XmlNodeType type;

while (textReader.Read())
{
    textReader.MoveToElement();
    type = textReader.NodeType;
    if (type == XmlNodeType.Text)
    {

        if (textReader.Name == "Code")
        {
            textReader.Read();
            code = textReader.Value;
            Console.WriteLine(code);
        }
        if (textReader.Name == "Name")
        {
            textReader.Read();
            name = textReader.Value;
            Console.WriteLine(name);
        }
        if (textReader.Name == "Semester")
        {
            textReader.Read();
            semester = textReader.Value;
            Console.WriteLine(semester);
        }
        if (textReader.Name == "Prerequisite")
        {
            textReader.Read();
            preReq = textReader.Value;
            Console.WriteLine(code);
        }
        if (textReader.Name == "LectureSlot")
        {
            textReader.Read();
            lSlot = textReader.Value;
            Console.WriteLine(lSlot);
        }
        if (textReader.Name == "TutorialSlot")
        {
            textReader.Read();
            tSlot = textReader.Value;
            Console.WriteLine(tSlot);
        }
        if (textReader.Name == "Info")
        {
            textReader.Read();
            info = textReader.Value;
            module.Add(new modules(name, code, semester, tSlot, lSlot, info, preReq));
        }
    }

    foreach (object o in module)
    {
        modules m = (modules)o;
        String hold = m.mName;
        selectionBox.Items.Add(hold);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:47:54.717

问题是您要查找`type == XmlNodeType.Text`，但文本节点没有任何名称，没有文本节点将匹配`textReader.Name == "Code"`。

您需要`textReader.Name`从最后一个节点开始存储`type == XmlNodeType.Element`变量，并在找到`XmlNodeType.Text`节点时使用存储的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:52:30.500

我认为最可能的原因是在您的每个 if 语句中，您使用的是`textReader.Read()`. 对于大多数`Reader`s 这将读取下一个项目，而不是当前项目。

正如另一个答案所说，您需要查看元素，`Name`然后读取值。

考虑这样的事情：

```
while (textReader.Read())
    {
        textReader.MoveToElement();
        type = textReader.NodeType;
        if (type == XmlNodeType.Element)
        {
            textReader.Read();
            switch( textReader.Name )
            {
               case "Code":
                  code = textReader.Value;
                  break;
               case "Name":
                  name = textReader.Value;
                  break;
               //SNIP
               case "Info":
                  info = textReader.Value;
                  module.Add(new modules(name, code, semester, tSlot, lSlot, info, preReq));
                  break;
               default:
                  //Whatever you do here
                  break;
             }
             Console.WriteLine(textReader.Value);
        }
        foreach (object o in module)
        {
            modules m = (modules)o;
            String hold = m.mName;
            selectionBox.Items.Add(hold);
        }

    } 
```

这样，您的 XMLTextReader 每次迭代只读取一个节点，并且您的 if 检查要少得多——这就是 switch case 设计的情况。

# java - 如何更快地编写java代码

> ID：15371712
> 
> 赞同：3
> 
> 时间：2013-03-12T20:41:49.750
> 
> 标签：java

我被要求编辑一个 java 文件，以便它可以检索一个值。值名称并不重要，但它是 SiteCategory。

在 Eclipse 的帮助下，我能够找到看起来像我正在寻找的方法。

然后我创建了这七行，看看其中一条是否返回了我正在寻找的内容。

```
System.out.println("1) " + p_objRecord.getSiteCategoryList().toString());
System.out.println("2) " + p_objRecord.getSiteCategoryList().getClass());
System.out.println("3) " + p_objRecord.getSiteCategoryList().getSiteCategory().toString());
System.out.println("4) " + p_objRecord.getSiteCategoryList().getSiteCategory(0).getCategoryDescription());
System.out.println("5) " + p_objRecord.getSiteCategoryList().getSiteCategory(0).toString());
System.out.println("6) " + p_objRecord.getSiteCategoryList().getSiteCategory(0).getCategory().getName());
System.out.println("7) " + p_objRecord.getSiteCategoryList().getSiteCategory(0).getCategory().toString()); 
```

这是输出

1) com.webservices.lists.farming.SiteCategoryList@47c7b1f5

2) com.webservices.lists.farming.SiteCategoryList 类

3) [Lcom.webservices.lists.farming.SiteCategory;@105e924

4) >P 对齐=左>

5) com.webservices.lists.farming.SiteCategory@ca143fc6

6) 产品：杂项：瓶子

7) com.webservices.platform.core.RecordRef@78f8dcf1

6 号正是我想要的。我花了一些时间才最终达到这一点并找出正确的语法。如果你被要求用一个不熟悉的 API 来做这件事，你会怎么做才能找出正确的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:46:01.870

我会寻找与您正在寻找的相同的东西。但是，我通常不会使用 Sys-Out。相反，我会在那里添加一个断点，使用调试器运行到该点。然后，使用“inspect”查看返回的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:46:46.287

我会查看导入 a 的代码，`SiteCategory`然后看看是否可以在`some.package.name.SiteCategory`.

真的，如果没有某种 javadoc 或实际的源代码，您几乎只能希望方法名称是描述性的“足够”。

因此，在文件中，您应该看到上述类的类或接口定义`SiteCategory`或“导入”块，如下所示

```
 import org.myorg.site.SiteCategory; 
```

如果你不这样做，那么它实际上与包声明在同一个包中（文件中的第一个非注释非空行）。所以

```
 package com.mypackage.here; 
```

这意味着`com.mypackage.here.SiteCategory`导入语句或“.java”文件中的定义失败。

然后根据源代码的可用性，我可能会打开源代码，或者如果它不可用，则查找一些已发布的 javadoc 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:09:48.803

在引用父对象的行设置断点，在调试模式下启动应用程序，然后当程序在断点处停止时，*检查*对象。你会很快弄清楚如何获得你想要的价值。

所有 IDE 都允许您检查对象及其字段（getter 与否）。

不要编写代码来调试：使用 java 的内置调试功能。

# javascript - 使用 .append() 时原始对象消失

> ID：15371716
> 
> 赞同：0
> 
> 时间：2013-03-12T20:41:56.533
> 
> 标签：javascript, jquery, arrays, append, push

我做了一个快速的“添加到收藏夹”类型的程序来练习。您单击“收藏夹”框并将其添加到侧边栏。

这是 JSFiddle：http: [//jsfiddle.net/LCBradley3k/sdKgP/](http://jsfiddle.net/LCBradley3k/sdKgP/)

Javascript：

```
$(document).ready(function(){
    var favorites = [];
    var counter = 0;

    $('#container, #container2, #container3').click(function(){
       favorites.push($(this))            
        $('.favorite').append(favorites);
    });  
}); 
```

我希望它继续做它所做的事情，但不要让原来的容器消失。

另外，`$(container 1, 2, 3, etc)`有没有办法让它知道单击了哪个容器，然后移动那个特定的容器，而不是说 。如果我有 50 个容器会怎样？我不想一一列举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:43:10.700

这是工作的 JSFiddle [http://jsfiddle.net/9Dmcg/3/](http://jsfiddle.net/9Dmcg/3/)

给容器一个类并绑定到该类。

```
$('.containers').bind('click', function(){

    favorites.push($(this).clone())

    $('.favorite').append(favorites);
}); 
```

看起来 jcubic 具有正确的克隆语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:14:53.930

试试这个[http://jsfiddle.net/sdKgP/25/](http://jsfiddle.net/sdKgP/25/)

你应该得到容器的 id。在您的情况下，您可能有很多书签容器，所以您不想为每个书签容器添加 css。所以你也需要改变你的CSS。

CSS

```
#sidenav {
height:700px;
width:250px;
border: 1px solid rgb(150,150,150);
position:absolute;
display:inline;
float: right;
left: 125px;
}

.container {
height:50px;
width:75px;
border:1px solid #000;
position:relative;
margin-bottom:10px;
} 
```

DOM

```
<div style="float:left">
<div class="container">
 Favorite
 </div>

<div class="container">
  Favorite
</div>

<div class="container">
  Favorite
 </div>
</div>
 <div>
 <div id="sidenav">
  <div class="favorite"> </div>
 </div>
</div> 
```

JS：

```
 $(document).ready(function(){
   var favorites = [];
   var counter = 0;
  $('.container').click(function(){
    favorites.push($(this).clone());
    $('.favorite').append(favorites);
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:43:03.667

尝试使用 jQuery 的[`clone()`](http://api.jquery.com/clone/)：

```
$('#container, #container2, #container3').click(function(){
  $(this).clone().appendTo('.favorite');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:45:14.093

您可以使用克隆 jquery 功能[http://jsfiddle.net/sdKgP/1/](http://jsfiddle.net/sdKgP/1/)

```
$('#container, #container2, #container3').click(function(){

    favorites.push($(this).clone())

    $('.favorite').append(favorites);
}); 
```

# php - Symfony2 - 不在控制器中运行 catch 块

> ID：15371717
> 
> 赞同：0
> 
> 时间：2013-03-12T20:41:58.440
> 
> 标签：php, exception, symfony

我在 Symfony2 控制器中遇到异常问题...我正在尝试捕获`NotFoundHttpException`，但是 catch 块...只是没有发生，它转到带有堆栈跟踪的标准 Symfony2 异常页面在开发环境...

我有以下代码：

```
<?php

namespace SeerUK\DWright\GalleryBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

use SeerUK\DWright\GalleryBundle\Entity\Gallery;

class GalleryController extends Controller
{
    public function indexAction($galleryId)
    {
        try
        {
            $gallery = $this->getDoctrine()
                ->getRepository('SeerUKDWrightGalleryBundle:Gallery')
                ->find($galleryId);

            throw $this->createNotFoundException('rawr'); // Just for the sake of testing...

            if (!$gallery) {
                throw $this->createNotFoundException(
                    'No gallery found for id ' . $galleryId
                );
            }

            $galleryId          = $gallery->getId();
            $galleryName        = $gallery->getName();
            $galleryDesc        = $gallery->getDesc();
            $galleryPublishedOn = $gallery->getPublishedOn();

            return $this->render('SeerUKDWrightGalleryBundle:Gallery:index.html.twig', array(
                'galleryId'          => $galleryId,
                'galleryName'        => $galleryName,
                'galleryDesc'        => $galleryDesc,
                'galleryPublishedOn' => $galleryPublishedOn->format('Y-m-d H:i:s'),
            ));
        }
        catch (Symfony\Component\HttpKernel\Exception\NotFoundHttpException $e)
        {
            echo $e->message;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:57:44.530

您应该尝试 `catch (\Symfony\Component\HttpKernel\Exception\NotFoundHttpException $e)`或仅使用此 NotFoundHttpException ...

可能它想抓住`SeerUK\DWright\GalleryBundle\Controller\Symfony\Component\HttpKernel\Exception\NotFoundHttpException`你的情况:)

# sql-server - 如何将 Null 日期变量传递给 SQL Server 数据库

> ID：15371727
> 
> 赞同：7
> 
> 时间：2013-03-12T20:42:49.730
> 
> 标签：sql-server, vb.net, date, null, sql-server-2008-r2

我正在寻找最佳实践，真正的解决方案，`Null`在日期未知时将 a 发送到 SQL Server 2008 R2 数据库表。

我从表单视图中读取了一些输入，并且日期字段可能未知。数据库允许在字段中使用 Null 值，但 VB 在参数化查询更新之前存储 Null 不起作用/让我无法理解。

```
 Dim tb2 As TextBox = TryCast(FormView1.FindControl("tbPurchDate"), TextBox)
    Dim purDT As Date
    If tb2.Text = "" Then
        IsDBNull(purDT)    ' Tried this along with other possible code
    Else
        purDT = Convert.ToDateTime(tb2.Text)
    End If 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T22:27:33.660

如果日期未知，则`DbNull.Value`作为参数值发送：

```
If dateIsUnknown Then
    cmd.Parameters.Add(New SqlParameter _
                       With {.ParameterName = "@purDT", _
                             .SqlDbType = SqlDbType.Date, _
                             .Value = DBNull.Value})
Else
    cmd.Parameters.Add(New SqlParameter _
                       With {.ParameterName = "@purDT", _
                             .SqlDbType = SqlDbType.Date, _
                             .Value = theDateVariable})
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:58:38.543

您可以使用`Nullable(Of Date)`来允许您的`purDT`变量也为`Nothing`：

```
Dim purDT As Nullable(Of Date) = Nothing

If tb2.Text <> "" Then
    purDT = Convert.ToDateTime(tb2.Text)
End If 
```

但是，当您定义将保存该值的 SQL 参数时，奇迹就会发生。参数应该是`DBNull.Value`或有效（非空）`Date`：

```
' initialize connection, command...

Dim param = New SqlParameter()
param.ParameterName = "NullableDate"
param.Value = IIf(purDT Is Nothing, DBNull.Value, purDT)

cmd.Parameters.Add(param)
cmd.ExecuteNonQuery() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:03:04.083

这取决于您用于将数据发送到服务器的数据方法。

purDate 是 DateTime 类型的变量，不能设置为 null。

我建议您使用 IsDate 而不是测试长度。

```
 Dim purDT As Date
    If Not IsDate(TextBox1.Text) Then
        purDT = Nothing
    Else
        purDT = Convert.ToDateTime(TextBox1.Text)
    End If 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T20:52:11.483

试试这个 ：

```
Dim purDT As Nullable(Of Date)

If tb2.Text = "" Then
    purDT = DBNull.Value
Else
    purDT = Convert.ToDateTime(tb2.Text)
End If 
```

# c# - 在 Windows 应用程序中从自己的控件继承

> ID：15371729
> 
> 赞同：1
> 
> 时间：2013-03-12T20:42:58.237
> 
> 标签：c#, windows, wcf, inheritance, controls

我正在使用 WCF 开发 Windows 8 应用程序。为此，我创建了自己的控件。现在我需要从第一个继承的另一个控件。这基本上可以吗？

在我的尝试中，我使用 VS tempalte 创建了第一个控件，默认情况下由 .cs 和 .xaml 文件组成。第二个是一个普通的普通类，它只是从第一个继承而来。但是，一旦第二个控件被初始化，应用程序就会崩溃并显示错误消息“解析器内部错误：对象编写器'xClassNotDerivedFromElement'。[行：2 位置：13]”

首先控制.cs：

```
namespace Reaction
{
    public partial class ReactionGame : UserControl
    {
        public bool finished = false;
        public bool winable = false;

        public ReactionGame()
        {
            this.InitializeComponent();
        }

        public virtual void load()
        {
            // do all games actions (set up timers, etc)
        }

        public virtual void won()
        { 
            // called when the game is won (free grafics, animate win stuff)
        }

        public virtual void lost()
        {
            // called when the game is lost (free grafics, animate loose stuff)
        }
    }
} 
```

第一个控制 XAML：

```
<UserControl
    x:Class="Reaction.ReactionGame"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Reaction"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid/>
</UserControl> 
```

第二个控制 .cs（仅限）：

```
namespace Reaction.ReactionGames
{
    public class WhiteGame:ReactionGame
    {

        Windows.UI.Xaml.DispatcherTimer timer = null;

        public WhiteGame()
        {
            this.InitializeComponent();
        }

        public override void load()
        {
            Windows.UI.Xaml.DispatcherTimer timer = new DispatcherTimer();
            timer.Tick += timer_Tick;
            timer.Interval = new TimeSpan(00, 0, 5);
            timer.Start(); 
        }

        void timer_Tick(object sender, object e)
        {
            timer.Stop();

            Rectangle rect = new Rectangle();
            rect.Height = 200;
            rect.Width = 200;
            rect.Fill = new SolidColorBrush(Color.FromArgb(255, 105, 203, 44));
            this.Content = rect;

            winable = true;
        }

        public override void won()
        {
            MessageDialog msg = new MessageDialog("Gewonnen!");
            msg.ShowAsync();
        }

        public override void lost()
        {

        }
    }
} 
```

# c# - MessageInspector 和 Web 服务之间的共享信息

> ID：15371733
> 
> 赞同：4
> 
> 时间：2013-03-12T20:43:00.443
> 
> 标签：c#, web-services, variables, idispatchmessageinspector

我有一个关于在 MessageInspector 和 Web 服务之间共享信息的问题。

我有一个标识符 (Guid)，用于“绑定”AfterReceiveRequest 和 BeforeSendReply。它工作正常。但我希望这个标识符也可以在 Web 服务中使用的方法中使用。这对于跟踪日志中的问题非常有用。

下面是一个小的演示示例来说明这个想法。我的问题是找到一个解决方案，可以从 AfterReceiveRequest 方法访问返回对象。符合“MagicStuff”。

```
namespace Demo.MessageInspector
{
    public class DemoMessageInspector : IDispatchMessageInspector
    {
        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            Guid activityId = Guid.NewGuid();
            MyLog.Message("AfterReceiveRequest", activityId);
            return activityId;
        }

        public void BeforeSendReply(ref Message reply, object correlationState)
        {
            Guid activityId = (Guid)correlationState;
            MyLog.Message("BeforeSendReply", activityId);
        }
    }
}

namespace Demo.WebServices
{
    [ServiceBehavior]
    [MessageInterceptionServiceBehaviour]
    public class MyWebService : IMyWebService
    {
        public void MyWebServiceMethod()
        {
            Guid activityId = (Guid)MagicStuff; // <-- correlationState from AfterReceiveRequest

            bool success = DoSomthing();

            if (!success)
                MyLog.Message("Error happened in MyWebServiceMethod", activityId);
        }
    }
} 
```

我将不胜感激任何帮助或提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:07:43.120

您可以使用[OperationContext.IncomingMessageProperties 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.incomingmessageproperties.aspx)。这是您的场景中的用法：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using Demo.MessageInspector;
using Demo.Utilities;

namespace Demo.WebServices
{
    public class MyWebService : IMyWebService, IServiceBehavior
    {
        public void MyWebServiceMethod()
        {
            // get the activityId from the incoming message properties
            var activityIdProperty = OperationContext.Current.IncomingMessageProperties
                .FirstOrDefault(property => property.Key == Properties.ActivityId.ToString());

            // create an empty Guid
            Guid activityId = new Guid();
            if (activityIdProperty.Value != null)
            {
                // replace the empty Guid with the activityId
                activityId = (Guid)activityIdProperty.Value;
            }
            bool success = DoSomething();
            if (!success)
                MyLog.Message("Error happened in MyWebServiceMethod", activityId);
        }

        private bool DoSomething()
        {
            // TODO: implement
            return false;
        }

        public void AddBindingParameters(
          ServiceDescription serviceDescription,
          ServiceHostBase serviceHostBase,
          System.Collections.ObjectModel.Collection<ServiceEndpoint> endpoints,
          BindingParameterCollection bindingParameters
        )
        {
            return;
        }

        public void ApplyDispatchBehavior(ServiceDescription serviceDescription,
            ServiceHostBase serviceHostBase)
        {
            foreach (ChannelDispatcher chDisp in serviceHostBase.ChannelDispatchers)
            {
                foreach (EndpointDispatcher epDisp in chDisp.Endpoints)
                {
                    var messageInspector = new DemoMessageInspector();
                    epDisp.DispatchRuntime.MessageInspectors.Add(messageInspector);
                }
            }
        }

        public void Validate(ServiceDescription serviceDescription, 
            ServiceHostBase serviceHostBase)
        {
            // TODO: implement validation
            //throw new NotImplementedException();
        }
    }
}

namespace Demo.MessageInspector
{
    public class DemoMessageInspector : IDispatchMessageInspector
    {
        public object AfterReceiveRequest(ref Message request, 
            IClientChannel channel, InstanceContext instanceContext)
        {
            Guid activityId = Guid.NewGuid();

            // add the activityId to the incoming message properties
            OperationContext.Current.IncomingMessageProperties
                .Add(Properties.ActivityId.ToString(), activityId);

            MyLog.Message("AfterReceiveRequest", activityId);
            return activityId;
        }

        public void BeforeSendReply(ref Message reply, object correlationState)
        {
            Guid activityId = (Guid)correlationState;
            MyLog.Message("BeforeSendReply", activityId);
        }
    }
}

namespace Demo.Utilities
{
    public enum Properties
    {
        ActivityId
    }

    public class MyLog
    {
        internal static void Message(string p, Guid guid)
        {
            File.AppendAllText(@"C:\Temp\log.txt", 
                String.Format("{0} {1} {2}\r\n", DateTime.Now, p, guid));
        }
    }
} 
```

**[更新]**

或者，您可以使用[CorrelationManager.ActivityId 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.correlationmanager.activityid.aspx)。为此，首先将以下内容添加到您的配置文件（客户端**和**服务器）：

```
<system.diagnostics>
  <sources>
    <source name="System.ServiceModel" propagateActivity="true">
      <listeners>
        <add name="ignored" type="System.Diagnostics.DefaultTraceListener" />
      </listeners>
    </source>
  </sources>
</system.diagnostics> 
```

然后，在类中添加以下方法`Demo.Utilities.Helper`：

```
namespace Demo.Utilities
{
    internal class Helper
    {
        internal static Guid GetCorrelationId()
        {
            var headerPosition = OperationContext.Current.IncomingMessageHeaders.FindHeader("ActivityId",
                "http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics");
            if (headerPosition > -1)
            {
                var activityIdHeader = OperationContext.Current.IncomingMessageHeaders
                    .GetReaderAtHeader(headerPosition);
                var activityIdAttribute = activityIdHeader.GetAttribute("CorrelationId");
                return Guid.Parse(activityIdAttribute);
            }
            else
            {
                return Guid.Empty;
            }
        }
    }
} 
```

现在你可以在下面使用这样的方法`DemoMessageInspector`：

```
public object AfterReceiveRequest(ref Message request,
    IClientChannel channel, InstanceContext instanceContext)
{
    var correlationId = Helper.GetCorrelationId();
    MyLog.Message("AfterReceiveRequest\tCorrelationId", correlationId);
    // ...
} 
```

在您的服务方法中像这样：

```
public void MyWebServiceMethod()
{
    var correlationId = Helper.GetCorrelationId();
    MyLog.Message("MyWebServiceMethod\tCorrelationId", correlationId);

    // ...
} 
```

# java - 参数化查询抛出 IllegalArgumentException：无法绑定参数

> ID：15371734
> 
> 赞同：4
> 
> 时间：2013-03-12T20:43:03.350
> 
> 标签：java, android, sqlite

我正在尝试从我的[SQLite](http://www.sqlite.org/)数据库中检索一些信息以获取 Android 应用程序的登录页面。从数据库中检索的代码是：

```
login.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            SQLiteDatabase db = SQLiteDatabase.openDatabase("/data/data/com.example.androidproject/databases/myDB", null, 0);
            // Check Login
            String username = usernamelogin.getText().toString();
            String password = loginpassword.getText().toString();

            Cursor c = db.rawQuery("SELECT name, password FROM User WHERE name='?' AND password='?'", new String[] {username, password});
            if(c.moveToFirst()) {
                Intent intent=new Intent(Login.this, MainActivity.class);
                 startActivity(intent);
            } else {
                Toast.makeText(getApplicationContext(), "Invalid", Toast.LENGTH_LONG).show();
            }
            c.close();
            db.close();
        }
    }); 
```

但我不断收到此错误：

```
03-12 20:38:40.216: E/AndroidRuntime(691): FATAL EXCEPTION: main
03-12 20:38:40.216: E/AndroidRuntime(691): java.lang.IllegalArgumentException: Cannot bind argument at index 2 because the index is out of range.  The statement has 0 parameters.
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteProgram.bind(SQLiteProgram.java:212)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:166)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteProgram.bindAllArgsAsStrings(SQLiteProgram.java:200)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
03-12 20:38:40.216: E/AndroidRuntime(691):  at com.example.androiddiet.Login$2.onClick(Login.java:61)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.view.View.performClick(View.java:4084)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.view.View$PerformClick.run(View.java:16966)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.os.Handler.handleCallback(Handler.java:615)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.os.Looper.loop(Looper.java:137)
03-12 20:38:40.216: E/AndroidRuntime(691):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-12 20:38:40.216: E/AndroidRuntime(691):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 20:38:40.216: E/AndroidRuntime(691):  at java.lang.reflect.Method.invoke(Method.java:511)
03-12 20:38:40.216: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-12 20:38:40.216: E/AndroidRuntime(691):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-12 20:38:40.216: E/AndroidRuntime(691):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T20:45:09.573

不要将替换字符括在引号中：

```
WHERE name=? AND password=? 
```

使用`name='?'`将尝试与`name`文字*问号*进行比较...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T20:54:09.873

没有回答您提出的问题，而是您尚未提出的问题……您正在 UI 线程上执行数据库操作。肯定是不行的，考虑用AsyncTask把这个数据库操作代码放在里面而不是onClick里面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-29T05:44:56.697

我也得到了类似的错误。

问题是相等运算符周围的空格。

通过删除空格来解决`WHERE fieldName = ?`问题`WHERE fieldName=?`

# google-maps-api-3 - Google Fusion Tables API v1 和 GeoJSON 到 Google 地图实用程序

> ID：15371736
> 
> 赞同：0
> 
> 时间：2013-03-12T20:43:04.023
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在使用 Google Fusion Tables API v1 请求以 JSON 格式加载到融合表中的点 kml。我使用这个请求：

```
<script src="https://www.googleapis.com/fusiontables/v1/query?sql=SELECT * FROM 1CNJWjLDYgBkJGZVslJ67Fak4DyqadEFIabzQ60&callback=dataHandler&key=AIzaSyKBzv-rs32Zat-8fDZuWwOXo7hCtpBR78"></script> 
```

[查看请求数据](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20%2a%20FROM%201CNJWjLDYgBkJGZVslJ67Fak4DyqadEFuIabzQ60&callback=dataHandler&key=AIzaSyCKBzv-rs32Zat-8fDZuWwOXo7hCtpBR78)

回调函数使用[GeoJSON 到 Google Maps Utility](https://github.com/JasonSanford/GeoJSON-to-Google-Maps)来解析请求中的标记。几何数据位于名为“geometry”的 idx 2 列中：

```
 function dataHandler(results) {
        var rows = results['rows'];
        for (var i in rows){
            var geometries = rows[i][2]['geometry'];
            //alert(geometries.coordinates)
            if (geometries) {
              var options = {
                "icon": "http://labs.google.com/ridefinder/images/mm_20_red.png"
              };
              var overlay = new GeoJSON(geometries, options);
              if (overlay.error){
                alert("error in GeoJSON")
              }else{
                alert(map) // return undefined
                overlay.setMap(map); //not working
              } 
            }else {
              alert('No geometry column')
            }
          }
        } 
```

JSON 或 GeoJSON 实用程序创建的覆盖没有错误，但谷歌地图变量“地图”在函数中是未定义的，即使它是全局定义的。这就是为什么 overlay.setMap(map) 不工作的原因。我想在定义 var 映射之前调用回调函数。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:42:14.253

```
<script src="https://www.googleapis.com/fusiontables/v1/query?sql=SELECT * FROM
 TABLE_ID&callback=dataHandler&key=API_KEY"></script>

    var map;
    var overlays = [];

    function initialize(){
      map = new google.maps.Map(document.getElementById('map'), {
            center: new google.maps.LatLng(49.75, -71.25),
            zoom: 5,
            mapTypeId: 'roadmap'
      });

      for (var i = 0; i < overlays.length; i++){
          overlays[i].setMap(map);
      }
    }

    function dataHandler(results) {
        var rows = results['rows'];
        var cols = results['columns'];
        for (var i = 0; i < cols.length; i++){
          if (cols[i] == 'geometry') {
            var ColIndex = i;
          }
        }
        if (!ColIndex){
          alert('Geometry column "geometry" not found.')
        }
        for (var i in rows){
          var geometries = rows[i][ColIndex]['geometry'];
          if (geometries) {
            var options = {
              "icon": "http://labs.google.com/ridefinder/images/mm_20_red.png"
            };
            var overlay = new GeoJSON(geometries,options);
            if (overlay.error){
              alert("error in overlay")
            }else{
              overlays.push(overlay);
            } 
          }else {
            alert("error in geoJSON response")
          }
        } 
```

# forms - GET 表单和 Node.JS 和 Express 的问题

> ID：15371741
> 
> 赞同：0
> 
> 时间：2013-03-12T20:43:18.310
> 
> 标签：forms, node.js, get, express

我用 HTML 编写了一个非常简单的表单，它使用 Express 将 GET 信息发送到我的 Node.JS 服务器。这是表格：

```
 <form method="get" action="/search" autocomplete="off" class="navbar-search pull-left">
       <input name="search" type="text" id="search" data-provide="typeahead" placeholder="Search..." />
    </form> 
```

这是服务器部分：

```
app.get('/search', function (req, res){

   console.log(req.query["search"]);

   res.render('search.ejs')

}); 
```

当我在输入中写入内容并按 Enter 键时，页面会持续加载很长时间，并且当我进入时收到 340 错误，例如在`http://localhost:8080/search?search=foo`. 我认为我的 from 有问题，它没有正确发送值，因为它也不适用于`POST`请求。有什么解决办法吗？

谢谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:26:02.310

这是因为您必须使用 req.params.search 而不是 req.query 不起作用。

```
app.get('/search', function (req, res){
   var search = req.query.search;

   console.log(search);

   res.render('search.ejs')

}); 
```

在这里您可以了解更多信息： [http ://expressjs.com/api.html#req.param](http://expressjs.com/api.html#req.param)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:30:43.957

下次要找出错误，输入`app.get(... console.log(res, req);`并找到变量的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T18:31:01.253

非常有趣，对我来说它有效！

```
app.get('/search', function (req, res){
   var search = req.query;

   console.log(search, 'of type', typeof search);
   res.send("the query is about the student with name " + search.sname + ' and subject '+search.ssubject );

}); 
```

用表格

```
<form method= 'GET' action="/search" autocomplete="off">
            Student Name:<br>
            <input type="text" name="sname">
            <br>
            Student Subject:<br>
            <input type="text" name="ssubject">
            <br>
            <input type="submit" value="Submit">
            <input type="reset" value="Reset">
        </form> 
```

# java - 与策略模式一起使用什么模式来避免具体策略中的重复代码？

> ID：15371746
> 
> 赞同：4
> 
> 时间：2013-03-12T20:43:29.570
> 
> 标签：java, design-patterns

我对设计模式比较陌生，在下面的示例中，我使用了我认为是策略模式的东西。但是，我在**一些（不是全部）**具体策略中重复自己，想知道有没有办法避免这种情况？注意 ACommand 和 CCommand 在做一些独特的事情之前有相同的代码。

```
public interface Command 
{
    public boolean execute(CommandSender sender, String[] args);
    public String getName();
    //...
}

public abstract class PlayerCommand implements Command 
{
    protected BukkitPlugin plugin = BukkitPlugin.getInstance();

    private String name;
    //...

    public PlayerCommand(String name) 
    {
        this.name = name;
    }

    public String getName() 
    {
        return this.name;
    }

    //...
} 
```

**指令**

```
 public class ACommand extends PlayerCommand
    {
        public ACommand()
        {
            super("A");
        }

        public boolean execute(CommandSender sender, String[] args)
        {
            Player player = (Player) sender;
            PlayerInventory inventory = player.getInventory();
            ItemStack itemInHand = inventory.getItemInHand();

            if(itemInHand.getType() != Material.COMPASS)
            {
                sender.sendMessage("You must be holding a phone to use this command");
                return true;
            }

            int id = itemInHand.getDurability();

            MobilePhoneManager phoneManager = plugin.getMobilePhoneManager();       
            boolean isMobilePhone = phoneManager.isMobilePhone(id);

            if(!isMobilePhone)
            {
                sender.sendMessage("You must be holding a mobile phone to use this command");
                return true;
            }

            //DO SOMETHING UNIQUE HERE
        }
} 
```

**B命令**

```
public class BCommand extends PlayerCommand
        {
            public BCommand()
            {
                super("B");
            }

            public boolean execute(CommandSender sender, String[] args)
            {
                //SOMETHING ELSE
            }
    } 
```

**C命令**

```
 public class CCommand extends PlayerCommand
    {
        public CCommand()
        {
            super("C");
        }

        public boolean execute(CommandSender sender, String[] args)
        {
            Player player = (Player) sender;
            PlayerInventory inventory = player.getInventory();
            ItemStack itemInHand = inventory.getItemInHand();

            if(itemInHand.getType() != Material.COMPASS)
            {
                sender.sendMessage("You must be holding a phone to use this command");
                return true;
            }

            int id = itemInHand.getDurability();

            MobilePhoneManager phoneManager = plugin.getMobilePhoneManager();       
            boolean isMobilePhone = phoneManager.isMobilePhone(id);

            if(!isMobilePhone)
            {
                sender.sendMessage("You must be holding a mobile phone to use this command");
                return true;
            }

            //DO SOMETHING UNIQUE HERE
        }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:47:09.680

您可以使用[模板模式](http://en.wikipedia.org/wiki/Template_method_pattern)`ACommand`作为和之间的公共基类的基础`CCommand`。基类中的模板方法将保存公共代码，然后调用 ( `abstract`) 方法`doSomethingUnique()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:13:14.300

安德烈在所有方面都是正确的。您正在使用命令模式，您只需要稍微调整您的界面以包含有关命令当前是否处于可以执行的状态的一些概念

```
bool canExecute();
boll canExecute(args) 
```

但是，您通常看不到 execute 方法返回任何内容。

HTH，
绿柱石

# php - 查询嵌入式 mongodb->documents (objects)

> ID：15371753
> 
> 赞同：0
> 
> 时间：2013-03-12T20:44:05.517
> 
> 标签：php, mongodb

我有这个结构：

```
{
 "_id": NumberInt(101),
"link_id": {
"125": {
"thumb_position": NumberInt(1),
"last_scan": NumberInt(1234563645),
"row_numb": NumberInt(301),
"clicks": NumberInt(120)
},
"126": {
 "thumb_position": NumberInt(2),
 "last_scan": NumberInt(-2147483648),
 "row_numb": NumberInt(1301),
 "clicks": NumberInt(199)
   },
   {
...
   }
}
} 
```

问题是我想通过_id 和link_id 查询。我在 PHP 中尝试过：

```
 $arr_ = array("_id" => intval(101), "link_id" => "125");
 $res = $collection->findOne($arr_); 
```

和许多其他变体并没有结果。如果我只搜索 _id 一切正常。有任何想法吗？多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:29:09.087

由于 link_id 125 不是一个值，我看到两个选项：

a) 使用[$exists](http://docs.mongodb.org/manual/reference/operator/exists/)运算符：

```
$arr_ = array(
    "_id" => intval(101),
    "link_id" => array("125" => array('$exists' => true))
); 
```

b）更改您的结构并使用稍微不同的查询：

```
{
    "_id": NumberInt(101),
    "link": [
        {
            "id": "125",
            "thumb_position": NumberInt(1),
            "last_scan": NumberInt(1234563645),
            "row_numb": NumberInt(301),
            "clicks": NumberInt(120)
        },{
            "id": "126",
            …
       }
    ]
} 
```

…</p>

```
$arr_ = array(
    "_id" => intval(101),
    "link" => array("id" => "125")
); 
```

未经测试，但它应该以类似的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:28:56.640

嗯，这里更好的模式是将其转换为对象数组而不是对象的对象，但是，要回答：

```
$arr_ = array("_id" => intval(101), "link_id.125" => array('$exists' => true)); 
```

这将检查该元素作为`link_id`子文档的键存在的位置：http `$exists`: [//docs.mongodb.org/manual/reference/operator/exists/](http://docs.mongodb.org/manual/reference/operator/exists/)

# asp.net - WebActivator - 访问服务器对象/当前目录

> ID：15371761
> 
> 赞同：3
> 
> 时间：2013-03-12T20:44:40.483
> 
> 标签：asp.net, webactivator

我有一个需要访问该`Server`属性的 WebActivator 引导程序。具体来说，它需要知道是什么`Server.MapPath("~")`。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:01:11.270

最好的方法是调用`HttpRuntime.AppDomainAppPath`.

或者，如果您想在任意路径上调用 MapPath，请使用`System.Web.Hosting.HostingEnvironment.MapPath("~/some/file.aspx")`.

# objective-c - 根据用户默认设置在启动时显示特定的视图控制器

> ID：15371768
> 
> 赞同：0
> 
> 时间：2013-03-12T20:45:01.093
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller

我想在我的 iOS 应用程序启动时问用户一个问题。我有一个视图控制器来显示文本和一个按钮来回答。

我在我的应用程序委托文件中也有这个来检测它是否已经被回答过：

```
if(![[NSUserDefaults standardUserDefaults] valueForKey:@"questionAnswered"]) 
```

我知道如何向更改`questionAnswered`值的按钮添加方法。

我在上面的 if 语句中放了什么来使视图控制器出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:52:14.107

最好在您的初始视图控制器中检查这一点并显示条款和条件视图。以下将从您的视图控制器初始化并呈现视图：

```
UIViewController *tncView = [self.storyboard instantiateViewControllerWithIdentifier:@"TermsViewController"];
[tncView setModalInPopover:YES];
[tncView setModalPresentationStyle:UIModalPresentationFormSheet];
[tncView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[self presentViewController:tncView animated:YES completion:NULL]; 
```

然后，从您的 T&C 视图控制器中退出：

```
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

更新：如果您为视图使用 .xib 文件，则只需将其初始化为：

```
termsViewController *tncView = [[termsViewController alloc] initWithNibName:@"termsView" bundle:nil]; 
```

`termsViewController`EULA 的视图控制器的类名在哪里，并且`termsView`是 xib/nib 文件的名称，没有扩展名（iOS 4.0+ 不需要扩展名）。

如果您没有使用 nib/xib 并以编程方式编写视图控制器：

```
termsViewController *tncView = [[termsViewController alloc] init]; 
```

如果使用故事板，您将使用我在上面发布的内容：

```
 UIViewController *tncView = [self.storyboard instantiateViewControllerWithIdentifier:@"TermsViewController"]; 
```

初始化视图控制器后，设置它的显示属性：

```
[tncView setModalInPopover:YES];
[tncView setModalPresentationStyle:UIModalPresentationFormSheet];
[tncView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal]; 
```

最后，提出观点。我会在您的初始视图控制器的`viewDidAppear`方法中执行此操作：

```
- (void)viewDidAppear:(BOOL)animated
{
    [self presentViewController:tncView animated:YES completion:NULL];
} 
```

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:52:58.913

苹果在 HIG 中声明：

> 如果您为您的 iOS 应用程序提供最终用户许可协议（或 EULA），App Store 会显示它，以便人们在获得您的应用程序之前可以阅读它。
> 
> 如果可能，请避免要求用户在首次启动您的应用程序时表明他们同意您的 EULA。在没有显示协议的情况下，用户可以毫不拖延地享受您的应用程序。但是，即使这是首选的用户体验，也可能并非在所有情况下都可行。如果您必须在您的应用程序中显示许可协议，请以与您的用户界面协调一致的方式执行此操作，并将给用户造成的不便降至最低。
> 
> 如果可能，请在您的应用说明或 EULA 中提供免责声明。用户随后可以在 App Store 中查看免责声明，您可以平衡业务需求和用户体验需求。

Apple 提供了一个在 iTunes Connect 中放置自定义 EULA 的位置。

# wpf - 在 WPF 中禁用项目时如何禁用突出显示？

> ID：15371772
> 
> 赞同：0
> 
> 时间：2013-03-12T20:45:14.340
> 
> 标签：wpf

我是 WPF 新手。我在 WPF 的列表视图中有一个复选框列表。我有功能，当用户单击复选框时，它会突出显示该行。一切正常。但是，当复选框被禁用时，它仍然会突出显示该行并且它还会检查复选框。我如何使它不突出显示或检查用户何时单击禁用的复选框？提前致谢。

```
<ListView ScrollViewer.ScrollChanged="lstRewardsExpiration_ScrollChanged" Height="178" HorizontalAlignment="Left" Margin="12,0,0,81" Name="lstRewardsEarned" VerticalAlignment="Bottom" Width="327" SelectionMode="Multiple" Background="White" FontFamily="Calibri" FontSize="16">
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="IsSelected" Value="{Binding Path=IsChecked, Mode=TwoWay}" />

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Border" SnapsToDevicePixels="true">
                            <ContentPresenter />
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="Cyan"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListView.ItemContainerStyle>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:22:50.663

您可能必须使用 a`MultiTrigger`才能使其正常工作

如果我正确阅读了您的问题，这是一个示例

```
 <Style TargetType="{x:Type ListViewItem}">
    <Setter Property="IsSelected" Value="{Binding Path=IsChecked, Mode=TwoWay}" />

    <!-- bind content IsEnabled to the ListViewItem IsEnabled -->
    <Setter Property="IsEnabled" Value="{Binding Path=IsEnabled, Mode=TwoWay}" />

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <Border x:Name="Border" SnapsToDevicePixels="true">
                    <ContentPresenter />
                </Border>

                <ControlTemplate.Triggers>

                    <!--Highlight if IsSelected and IsEnabled-->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="True"/>
                            <Condition Property="IsEnabled" Value="True"/>
                        </MultiTrigger.Conditions>
                        <MultiTrigger.Setters>
                            <Setter TargetName="Border" Property="Background" Value="Cyan"/>
                        </MultiTrigger.Setters>
                    </MultiTrigger>

                    <!--Remove highlight if is not Selected and IsEnabled-->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="False"/>
                            <Condition Property="IsEnabled" Value="True"/>
                        </MultiTrigger.Conditions>
                        <MultiTrigger.Setters>
                            <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                        </MultiTrigger.Setters>
                    </MultiTrigger>

                    <!--Add a trigger to remove the higlighting if IsEnabled is changed to false-->
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# javascript - 为 Windows 8 扩展 PhoneGap (cordova) 的最佳方法是什么

> ID：15371777
> 
> 赞同：1
> 
> 时间：2013-03-12T20:45:36.953
> 
> 标签：javascript, cordova, windows-store-apps, winjs

Cordova/Phone Gap 在 Windows 8 上的工作方式不同。实际上没有原生层，因为 phonegap/cordova 模板直接使用 WinJS。扩展cordova以便我可以编写插件的推荐方法是什么？有人可以发布一个类似于他们的 Echo 示例的示例吗？

[http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

# java - jboss - 在模块调用中找不到类

> ID：15371782
> 
> 赞同：2
> 
> 时间：2013-03-12T20:46:09.023
> 
> 标签：java, jboss, ejb-3.0, jboss7.x

我的耳朵里有 apache commons lang，我正在调用一个 ejb，它在 ear 文件夹中包含所有 jar 并正确配置，但是当我调用 ear 时，我收到以下错误

```
Caused by: java.lang.ClassNotFoundException:    
org.apache.commons.lang.builder.ToStringBuilder from [Module "test.common:main" 
```

这是从我创建（编译）的使用 commons lang 的模块中抛出的。为什么jboss不使用ear部署中的commons lang？除了罐子在耳朵外面，我还应该在其他地方使用它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:24:42.580

EAR 是隔离的，因此您的模块无法看到您在 EAR 中打包的内容。

模块本身也是隔离的。因此，您需要在模块`module.xml`文件中为模块提供“commons lang”的依赖项。例如 JBossAS7 提供了一个 commons-lang 模块。您可以将其作为依赖项包含在 module.xml 中：

```
 <dependencies>
    <module name="org.apache.commons.lang" />
 </dependencies> 
```

同样，您可以在`EAR/META-INF/jboss-deployment-structure.xml`. 这样，模块和 EAR 都将使用相同的 commons-lang jar，因此您可以避免 CLassCastExceptions。

或者，您可以在中添加`export="true"`依赖项，`module.xml`以便在包含模块时将其依赖项导出到其他包。

# javascript - 在离开页面之前执行的 JavaScript 动作 onbeforeunload

> ID：15371783
> 
> 赞同：1
> 
> 时间：2013-03-12T20:46:11.097
> 
> 标签：javascript, onbeforeunload

我已经编写了一些代码，我试图用来追踪访问者的 ip，以及他们在网站上停留的时间。代码：

```
<script>
var startTime = new Date();
window.onbeforeunload = $(function() {
    /* var ip = (window.location != window.parent.location) ? document.referrer: document.location; */
    /* var ip = "192.168.1.1"; */
    var endTime = new Date();        //Get the current time.
    var timeSpent = (endTime - startTime);        //Find out how long it's been.
    var ip = (window.location != window.parent.location) ? document.referrer: document.location; 
    $(window).load(function(event) {
         $.post('ajax.php', {ip: ip, timeSpent: timeSpent});
    });            
});
</script> 
```

我不明白的是，为什么这不会等到用户尝试离开站点后再运行此脚本。

谁能帮我让它等到那时运行？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:59:14.813

我可以看到此代码存在一些问题。

首先，`$(function(){})`是`$(document).ready(function(){})`. 这意味着它将在 DOM 准备好时运行该函数，然后返回一个 jQuery 对象 ( `$(document)`)。

第二，`$(window).load(function(){})`不需要。我假设当用户离开页面时，DOM 已经被加载了。

第三，`window.onbeforeunload`(and `window.onunload`)*不会*等待您的 AJAX 调用完成。您可以尝试使用`async:false`让它等待（这可能不适用于所有浏览器）。

```
$.ajax({
    url: 'ajax.php',
    data: {ip: ip, timeSpent: timeSpent},
    async: false
}); 
```

（注意：`window.onbeforeunload`不适用于所有浏览器；我知道 Opera 不会触发它。）

此外，`window.onbeforeunload`用于询问用户是否要离开页面。如果您从将呈现给用户的事件中返回一个字符串（Firefox 除外）。

如果您想在用户离开页面时发送 AJAX 调用，我建议您`window.onunload`改用。

```
(function(){  // Anonymous function so startTime isn't global
    var startTime = new Date();
    window.onunload = function() { // set to a function
        var endTime = new Date();  //Get the current time.
        var timeSpent = (endTime - startTime);  //Find out how long it's been.
        var ip = (window.location != window.parent.location) ? document.referrer: document.location; 
        $.ajax({
            url: 'ajax.php',
            data: {ip: ip, timeSpent: timeSpent},
            async: false
        });
    };
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:57:14.787

你把这整件事弄得一团糟。所有你需要的是：

```
var startTime = new Date();
window.onbeforeunload = function() {
    var endTime = new Date();        //Get the current time.
    var timeSpent = (endTime - startTime);        //Find out how long it's been.
    var ip = (window.location != window.parent.location) ? document.referrer: document.location; 
    $.post('ajax.php', {ip: ip, timeSpent: timeSpent});
}; 
```

# opengl - 用 GL_OBJECT_LINEAR 模拟 GL_EYE_LINEAR

> ID：15371786
> 
> 赞同：1
> 
> 时间：2013-03-12T20:46:18.260
> 
> 标签：opengl

我想使用opengl纹理将位图图像放置到对象[1]，然后将其固定到对象[2]：就像贴纸一样。

GL_EYE_LINEAR 模式很适合将我的对象移动到我的“贴纸”[1] 前面，但是我怎样才能在我的对象 [2] 上修复这个“贴纸”（在按钮事件或其他事件之后），然后我会继续进入 GL_OBJECT_LINEAR 模式...

我尝试在阶段 [1] 期间使用 GL_OBJECT_LINEAR 模式“模拟”GL_EYE_LINEAR，并根据 GL_MODELVIEW 矩阵的旋转/平移修改 GL_TEXTURE 矩阵，但仍然没有与 GL_EYE_LINEAR 模式相同的行为......

ps：我需要使用 GL_OBJECT_LINEAR 来检索我的贴纸纹理的 x,y,z 和 rot(x,y,z)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:34:30.420

好吧，我可能是唯一一个试图用 GL_OBJECT_LINEAR 模拟 GL_EYE_LINEAR 的人，但我终于找到了一种方法。

首先，目的是使用位图纹理粘贴在模型上，因此您必须在需要粘贴纹理/位图的位置保存当前的旋转 (rx,ry,rz) 和平移 (tx,ty,tz)， SAVE_POSITION= (rx_save,ry_save,rz_save,tx_save,ty_save,tz_save)。

然后，您只需执行以下步骤：

0- gl.glMatrixMode(gl.GL_MODELVIEW), gl.glLoadIdentity()

1-然后用这个严格的顺序修改模型视图矩阵：旋转（CURRENT_POSITION） b. 翻译（CURRENT_POSITION） c. 翻译（-SAVE_POSITION）旋转（-SAVE_POSITION）

2-设置纹理生成（放置位图纹理）：

```
gl.glTexGendv(gl.GL_S,gl.GL_EYE_PLANE,(self.TexSize,0,0,0))
gl.glTexGendv(gl.GL_T,gl.GL_EYE_PLANE,(0,self.TexSize,0,0))
gl.glTexGeni(gl.GL_S,gl.GL_TEXTURE_GEN_MODE,gl.GL_EYE_LINEAR)
gl.glTexGeni(gl.GL_T,gl.GL_TEXTURE_GEN_MODE,gl.GL_EYE_LINEAR)
gl.glEnable(gl.GL_TEXTURE_GEN_S)
gl.glEnable(gl.GL_TEXTURE_GEN_T) 
```

3- 重新加载 MODELVIEW gl.glLoadIdentity()（或使用 push/pop） 4- 像往常一样旋转/平移到 CURRENT_POSITION 5- 绘制模型

希望它可以帮助某人。

但正如 Jason 所说，最好的方法是使用着色器而不是传统的 opengl ......我在这里为 python 程序员找到了一些很好的教程：http: [//pyopengl.sourceforge.net/context/](http://pyopengl.sourceforge.net/context/)

问候，-baco

# vb6 - VB6 的协议缓冲区？

> ID：15371790
> 
> 赞同：3
> 
> 时间：2013-03-12T20:46:31.107
> 
> 标签：vb6, protocol-buffers

我似乎找不到任何在 VB6 中使用协议缓冲区的[库？](https://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)

我唯一的选择是通过 COM Interop 使用包装 C# 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:44:00.017

另一种选择是为 VB6 编写协议缓冲区库；它不是编写时髦的序列化代码最友好的语言，但它是一个有趣的智力练习，可以使用 VB6 提供给您的简化的运算符集进行位运算。

我用于 VB6 序列化代码的模式是在要序列化的类上实现一个通用接口；您需要对实例变量进行内部访问，因为即使是公共字段也被编译器封装在访问器后面。我有一个基础库，它声明了这样的接口，以及一些管理类元数据的位，你可以编写一些序列化类来理解这个接口并将实例变量转换为 XML、SQL、数组中的字节、字段在平面文件等中

唉，我不再有权访问此代码，无论如何共享它的合法性都是值得怀疑的。

Protocol Buffers 在 VB6 过时之后很久就进入了现场，除非您花钱请人或自己编写，否则您不太可能为它们获得本机 VB6 库。

# jquery - 使用更改事件防止两次提交表单

> ID：15371791
> 
> 赞同：1
> 
> 时间：2013-03-12T20:46:40.263
> 
> 标签：jquery, form-submit, double-submit-prevention

我有一个带有隐藏提交按钮和一个文本输入的表单。在文本输入中，使用 jQuery 我附加了一个提交表单的更改事件。问题是，如果我在输入中按 Enter，则表单会提交两次。我认为是因为输入提交表单并且输入检测到更改事件并再次提交表单。我有两个问题： - 我的想法对吗？- 我怎样才能解决这个问题？

这是javascript：

```
$("input.price").live('change', function () {
  $(this).closest('form').submit();
}); 
```

编辑：我认为 e.preventDefault() 阻止了事件“更改”的默认设置，但没有阻止事件“提交”..我在事件“更改”之前尝试这个没有运气但也许我接近解决方案：

```
$("input.price").live('submit', function (e) {
       e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:47:43.167

```
$("input.price").live('change', function (eventObject) {
     eventObject.preventDefault();
     $(this).closest('form').find('input.submitButton').click();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:48:30.543

您需要使用该[`preventDefault()`](http://api.jquery.com/event.preventDefault/)功能来阻止表单提交。

例如

```
$("input.price").live('change', function (e) {
  e.preventDefault();
  $(this).closest('form').find('input.submitButton').click();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T20:50:46.273

我在这里错过了什么，你为什么不这样做：

```
$("input.price").live('change', function (eventObject) {
     $(this).closest('form').submit();
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T22:05:45.443

最后我想出了一个解决方案！问题是……正如 Mike C. 所说，额外的代码可以帮助解决问题。问题是我试图提交的表单是 MVC 的 Ajax.BeginForm 所以..主要问题是该表单的 ajax 提交，这是第二次提交！

我无法改变这种行为.. 只能用 Html.Beginform 改变 Ajax.Beginform .. 我不想做的事情。所以..我想出了这个“生锈”的解决方案：

```
$("input.price").live('keypress', function (e) {
     if (e.keyCode == 13) {
        $(this).attr('data-submitting', true);
     }
});

$("input.price").live('change', function (e) {
     if (!$(this).attr('data-submitting')) {
         $(this).closest('form').submit();
     }
}); 
```

# ruby-on-rails - Rails 用数组连接表

> ID：15371794
> 
> 赞同：0
> 
> 时间：2013-03-12T20:46:56.247
> 
> 标签：ruby-on-rails, arrays, ruby, join

我尝试搜索，但找不到任何东西。请注意，我可能一直在寻找错误的东西。

所以，我的问题是关于 Rails 中的连接表。

我计划拥有用户和书籍以及将用户链接到书籍的连接表收藏夹。

所以，我最初的想法是收藏夹表应该有 user_id 和 book_id。

不过，我也想提供一些建议。因此，如果 user1 喜欢书籍 1、2、3、4，而 user2 喜欢书籍 1、2、3、4、5；我希望能够向 user1 推荐第 5 本书。

我在想，有一个带有 user_id 的表，然后是一个包含他们最喜欢的书的数组，这对于找出适当的建议是最容易的。

所以，我的问题有两个。首先，我需要两张桌子吗？一个连接表，另一个用于带有数组的表？或者这两个可以/应该是一样的吗？其次，这是设置这一切的最佳方式吗？我是自学成才的，所以我很可能会遗漏一些非常基本的东西。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:02:43.083

所以，我不确定你想在哪里以及如何显示建议，但可以这样说：

我假设您像这样创建了 User、Book 和 Favorite 类：

```
Class User < ActiveRecord::Base
   has_many :favorites
   has_many :books, :through => :favorites
end

Class Book < ActiveRecord::Base
   has_many :favorites
   has_many :users, :through => :favorites
end

Class Favorite < ActiveRecord::Base
   belongs_to :user
   belongs_to :book
end 
```

假设每个用户都有他的个人资料页面（显示操作），并且每次某个用户访问另一个用户的个人资料页面时，您都希望显示建议。

您不必为建议制作任何表格，只需几种方法来计算建议并将其显示给用户。

假设要推荐一本书，您需要至少三本您与其他用户喜欢的书。

在您的用户类中：

```
def suggest_books_from?(user)
     true if self.books & user.books > 3
end 
```

这将产生一个相交，看看您是否与其他用户兼容。如果您是兼容的，例如该方法返回 true，那么您将不得不计算向他推荐哪些书籍，因此调用将是这样的：

```
if current_user.suggest_books_from?(user)
     user.books - current_user.books
end 
```

并且该方法应该返回包含用户收藏但当前用户尚未收藏的所有书籍的数组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T20:53:56.673

要回答您的第一个问题：您正在寻找一个单一的标准连接表。包含具有相同信息的不同表示的另一个表（或另一列）将证明您难以保持一致，并且可能不会像您想象的那样帮助您。

原因是问题二的答案：这里有很多非常棒的推荐引擎可以为您完成所有这些工作！

最大的一个是[Recommendify](https://github.com/paulasmuth/recommendify)，但它已经有大约一年没有活跃了。我在一个项目中使用它，发现它非常令人满意：它速度很快，而且根据我的经验，结果似乎是准确的。

[Recommendable](https://github.com/davidcelis/recommendable)是最近更新的，但也更适用于 upvotes 和 downvotes。尽管如此，您仍然可以将产品的“最喜欢”视为赞成票，并且如果您愿意，可能会这样使用它。

如果这些都不符合您的需求，您可以查看[RubyToolbox 的推荐引擎列表](https://www.ruby-toolbox.com/categories/Recommendation_Engines)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:03:10.720

一种简单的方法是使用您创建的连接模型（收藏夹）来获取该 ID 数组。从长远来看，它可能不是高性能的，但考虑到应用程序的早期状态，我现在会保持简单，稍后再处理性能。

所以，在那种情况下，如果你有这样的事情：

```
class User < ActiveRecord::Base
  has_many :favorites
  has_many :books, :through => :favorites
end

class Book < ActiveRecord::Base
end

class Favourite < ActiveRecord::Base
  belongs_to :user
  belongs_to :book
end 
```

然后，您可以像这样获取用户的图书 ID：

```
user = User.first
user.book_ids 
```

我不能说推荐书，但要看看两个用户没有共同点的书：

```
frank = User.first
joe = User.last
frank.book_ids - joe.book_ids # IDs for books Frank has but Joe doesn't
joe.book_ids - frank.book_ids # IDs for books Joe has but Frank doesn't 
```

# ios - 写入使用 NSKeyedArchiver 编码的数据时，CoreBluetooth 失败？

> ID：15371800
> 
> 赞同：2
> 
> 时间：2013-03-12T20:47:12.693
> 
> 标签：ios, nskeyedarchiver, core-bluetooth, bluetooth-lowenergy, ios-universal-app

我有一个使用 CoreBluetooth 框架通过蓝牙 LE 与 iDevice 通信的应用程序。对于我的一个特点，我发送了一个用 NSKeyedArchiver 编码的日期（例如在[这个问题的接受答案中](https://stackoverflow.com/questions/5837536/save-nsdate-to-disk)）。

发生这种情况时，我得到：

```
CoreBluetooth[WARNING] Unknown Error: 9 
```

而且外设甚至没有收到写请求，也没有抛出任何错误。

在中央，它执行以下操作：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:self.myDate];
[self.connectedDevice writeValue:data forCharacteristic:self.myCharacteristic type:CBCharacteristicWriteWithResponse]; 
```

其中 myDate 是一个有效的 NSDate。

我知道根据蓝牙核心 4.0 文档第 2 卷 D 部分第 2 节，错误代码 0x09 是超出连接限制。但是，这在这种情况下没有意义（两者之间只有一个联系）。

一个有趣的事实是，如果我只是编码一个字符串并发送它，就没有问题：

```
NSData *data = [self.localTestString dataUsingEncoding:NSUTF8StringEncoding];
[self.connectedDevice writeValue:data forCharacteristic:self.myCharacteristic type:CBCharacteristicWriteWithResponse]; 
```

外围设备接收到写请求，可以正确解码，可以毫无问题地接受。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T02:35:18.083

您的键控存档数据和本地测试字符串有多大？听起来您可能超出了该特征的可写大小。

# javascript - 将 google Dart 与 Google Maps JavaScript API 一起使用

> ID：15371802
> 
> 赞同：3
> 
> 时间：2013-03-12T20:47:15.913
> 
> 标签：javascript, google-maps, dart

有没有办法在 dart 项目中使用 JS api 和 Google Maps JavaScript API、dojo 等框架。指向一些样本的指针会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T01:34:37.590

我使用了 Alexandre Ardhuin 的[google_maps](http://pub.dartlang.org/packages/google_maps)包。将其安装为依赖项：

```
dependencies:
  google_maps: any 
```

然后在 HTML 中导入几个文件：

```
<head>
  <script src="http://maps.googleapis.com/maps/api/js?v=3.10&sensor=false"></script>
  <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
</head> 
```

**注意：**我必须使用 JS API 的 3.10 版本——一定要在 URL 中指定（就像我上面所做的那样），直到包更新为使用最新版本。

然后是地图的实际 HTML 容器：

```
<div class="map" style="width: 640; height: 640px;"></div> 
```

一些进口：

```
import 'dart:html';
import 'package:js/js.dart' as js;
import 'package:google_maps/js_wrap.dart' as jsw;
import 'package:google_maps/google_maps.dart'; 
```

然后是实际代码：

```
js.scoped(() {
  var mapOptions = new MapOptions()
    ..mapTypeId = MapTypeId.ROADMAP
    ..center = new LatLng(60.987097,25.767059)
    ..zoom = 6;

  var map = new GMap(_root.query(".map"), mapOptions);

  var marker = new Marker(
    new MarkerOptions()
      ..position = new LatLng(60.987097,25.767059)
      ..map = map
      ..title = 'Foo'
  );

  var content = new DivElement();
  content.innerHtml = '''
<h3>Foo</h3>

<p>bar</p>
''';

  var infoWindow = new InfoWindow(
    new InfoWindowOptions()
      ..content = content
  );

  marker.on.click.add((e) {
    infoWindow.open(map, marker);
  });

  jsw.retainAll([map, marker, infoWindow]);
}); 
```

结果是一张我标记了我的家乡城市的地图。

![在此处输入图像描述](../Images/0ad688cb5eeab595ad80ebc09961d383.png)

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:49:09.103

您可以使用[google_maps](http://pub.dartlang.org/packages/google_maps)包来处理[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/)。

处理 Js Api 可以使用[js](http://pub.dartlang.org/packages/js)包。有关更多信息，请参阅[使用 Dart 中的 JavaScript：js 库](http://www.dartlang.org/articles/js-dart-interop/)。

# javascript - d3。缺失数据。仅绘制每组中的初始值

> ID：15371808
> 
> 赞同：1
> 
> 时间：2013-03-12T20:47:28.400
> 
> 标签：javascript, d3.js, data-visualization, scatter-plot

我正在构建这里生成的非常好的 d3 示例[http://2011.12devsofxmas.co.uk/2012/01/data-visualisation/](http://2011.12devsofxmas.co.uk/2012/01/data-visualisation/)

我仍处于探索阶段，弄清楚原始版本中所有代码的作用，以及如何调整它来实现我的可视化目标。

这是当前版本的一个块。单击“在新窗口中打开”可以最好地查看可视化效果

[http://bl.ocks.org/natemiller/119c49ffc4f159fd49ce](http://bl.ocks.org/natemiller/119c49ffc4f159fd49ce)

作为 d3 相对较新并且对 JavaScript 来说非常新，它肯定是一个相当陡峭的学习曲线。无论如何，我在我的小而简单的练习示例中遇到的问题是，并非所有数据都被绘制出来。你可以看到我只有 3 个，而不是 7 个数据点。我不完全确定这里发生了什么。

我已经完成了一些后台故障排除：原始代码使用了 2.7 版的 d3/d3.js 脚本，而不是我在这里使用的（“ [http://d3js.org/d3.v3.min.js](http://d3js.org/d3.v3.min.js) ”）。此外，他们使用了另一个脚本 d3/d3.csv.js，我假设读取 .csv 文件。我省略了这个脚本，只是在 d3.js 中使用了 d3.csv()。

如果我将这两个原始脚本都保留在代码中，我的可视化会正确绘制（7 个数据点），但如果我用当前版本替换原始 d3.js（v.2.7），我会得到只有三个数据点的图。

知道这里发生了什么吗？关于如何修改我发布的代码以便绘制所有数据点的想法？

谢谢你的帮助，

内特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:13:15.470

在第 55 行，你有`.data(rawData, function (d) { return d.site;}),`

尝试更改为`.data(rawData),`

.data 中的第二个参数是一个键。当您尝试创建您的圆形 svg 元素时，它正在查看键，该键只有三个不同的值（d.site 中的站点 1、站点 2 和站点 3），因此仅创建三个圆圈。

关于数据选择方法的参考在[这里](https://github.com/mbostock/d3/wiki/Selections#wiki-data/ "这里")

# python - 查找 numpy.where 返回的值的数量

> ID：15371812
> 
> 赞同：4
> 
> 时间：2013-03-12T20:47:43.370
> 
> 标签：python, numpy

我想找到 numpy.where 评估为真的地方的数量。以下解决方案有效，但非常难看。

```
b = np.where(a < 5)
num = (b[0]).shape[0] 
```

我来自一种语言，在对结果数组进行操作之前，我需要检查是否 num > 0。有没有比找到 num 更优雅的获取 num 的方法，或者更 Pythonic 的解决方案？

（对于那些熟悉 IDL 的人，我正在尝试复制它的简单`b = where(a lt 5, num)`.)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:54:42.577

```
In [1]: import numpy as np

In [2]: arr = np.arange(10)

In [3]: np.count_nonzero(arr < 5)
Out[3]: 5 
```

或者

```
In [4]: np.sum(arr < 5)
Out[4]: 5 
```

* * *

如果您`b = np.where(arr < 5)[0]`无论如何都必须定义，请使用`len(b)`or `b.size`(`len()`似乎快一点，但它们在性能方面几乎相同)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:57:43.150

这仅在 where 语句的条件暗示结果未评估为 False 时才有效。但这很容易：

```
import numpy as np
a = np.random.randint(1,11,100)
a_5 = a[np.where(a>5)]
a_10 = a[np.where(a>10)]
a_5.any() #True
a_10.any() #False 
```

因此，如果您希望可以在分配之前尝试一下，当然：

```
a[np.where(a>5)].any() #True
a[np.where(a>10)].any() #False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:08:15.917

另一种方式

```
In [14]: a = np.arange(100)
In [15]: np.where(a > 1000)[0].size > 0
Out[15]: False
In [16]: np.where(a > 10)[0].size > 0
Out[16]: True 
```

# javascript - Google maps API v3 - 是否可以添加非特定位置，例如大陆或国家？

> ID：15371813
> 
> 赞同：0
> 
> 时间：2013-03-12T20:47:46.010
> 
> 标签：javascript, google-app-engine, google-maps, google-maps-api-3

我最近开发了一个使用谷歌地图 APi v3 的应用程序，以便让我的客户指定他们的位置，并根据他们的用户（最终用户）的请求在地图上指示这个位置。

现在，我有两个问题：

我在 2 种语言中使用 API，有时它们会变得混乱，并且变得非常难看。

现在，最佳情况下，我希望允许用户实时更改地图的语言，允许添加两种语言的位置，具体取决于最终用户（我的用户的用户）的需求，但从根据我进行的一项研究，这似乎是不可能的，除非您在同一页面中再次调用 API，而且我不会违反 Google 的使用条款。

我想出的是，我需要对每个位置进行地理编码，然后翻译成另一种语言，然后我就可以为每个用户和页面使用适当的位置名称。

第二个问题是，Google 似乎无法在全球范围内识别非特定类型的位置。假设我输入“美国”或“欧洲”，现在，一些用户更愿意显示它，而 Google API 似乎将地址补全为：“德克萨斯，美国”或“斯德哥尔摩” ，瑞典，欧洲'。那是它放置标记的位置，我想这就是地理编码所做的，获取一个特定的位置，但是是否有一个好的、防错误的方法来解决它，而不是分析用户的输入文本，或者以某种方式过滤和操作来自 API 的结果，这显然违反了使用条款？

在此先谢谢大家！，在过去的几周里，我一直在为此头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:34:28.760

您可以使用[Google Maps 的 Geocoder API](https://developers.google.com/maps/documentation/geocoding/)

您像这样定义地理编码器：

```
geocoder = new google.maps.Geocoder(); 
```

看看这个例子：[http](http://geocodezip.com/v3_zoom2countrySelectList.html) ://geocodezip.com/v3_zoom2countrySelectList.html如下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:38:43.613

这是我在两个国家之间进行地理编码和交换的示例，以及使用打印地理编码调试的东西

`console.log(results[0]);`

并且，

`alert('Got formatted to: ' + results[0].formatted_address);`

“欧洲”和“美国”应该出现。标记放置到地理编码返回的 latLng 值。

它使用 gmap3 库来启动地图，因为它是我最近构建的一个示例，但所有相关的东西都是普通的谷歌地图地理编码代码。随心所欲地使用它。

查看**[JS fiddle（使用国家/地区名称进行地理编码）](http://jsfiddle.net/MDFTN/6/)**

为了基于可见视口进行地理编码，您需要获取并传递地理编码器的当前边界，我创建了一个示例，该示例根据实际地理编码器结果对视口边界和中心映射到位置进行地理编码。

查看**[JS fiddle（使用视口边界进行地理编码）](http://jsfiddle.net/NUkCs/)**

# c# - C# 使用 php 数组

> ID：15371814
> 
> 赞同：0
> 
> 时间：2013-03-12T20:47:48.017
> 
> 标签：c#

我正在使用返回一些包含许多项目的数组的 API：

```
s:7:"members";
    a:37:
        {
        i:0;
        a:7:
        {
            s:4:"h_id";s:4:"9352";
            s:6:"h_name";
            s:6:"Name";
            s:7:"h_level";
            s:2:"14";
            s:8:"c_status";
            s:5:"Wild";
            s:8:"p_status";
            s:0:"";
            s:8:"h_online";
            s:1:"1";
            s:12:"u_last_visit";
            s:10:"1363069620";
            }
        }; 
```

有没有办法在 c# 中轻松使用这个集合？或者它只能用正则表达式解析？

# .net - 在 .NET 中读取 XML 模式和数据

> ID：15371815
> 
> 赞同：1
> 
> 时间：2013-03-12T20:47:49.257
> 
> 标签：.net, sql-server, xml, xsd

我正在使用 SQL Server 和 VB.NET。在我的 SQL 中，我使用以下内容：

```
select top 1 * from tablename where 1=0 for xml auto, type, xmlschema 
```

获取表名的架构。然后我用

```
select * from tablename where ID=1 for xml, auto, type, elements xsinil, root('xml') 
```

获取我感兴趣的数据行。

如果我在 VB 中使用以下代码：

```
Private ds as New Dataset

ds.ReadXMLSchema("xmlschema.txt") 
```

我最终得到一个 ds 包含一个表，其中包含一组正确定义的列

如果我再尝试：

```
ds.ReadXML("xmldata.txt") 
```

代码成功，但我的数据集表中没有任何行。

我的问题是，我需要做什么才能将 SQL Server 创建的 xml 数据读入具有 SQL Server 指定架构的数据表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T08:28:28.583

1.  您需要`XMLSchema`在第二个（数据）查询以及第一个（模式）查询中包含该子句。如果您不这样做，那么数据输出将缺少命名空间，因此将不符合架构。

2.  您需要通过限定`XMLSchema`指令（例如`XMLSchema('http://tempuri.org')`）来为您的模式指定目标名称空间。如果您不这样做，那么 SQL Server 将在每个查询中为您生成一个命名空间，并且它们可能不匹配。

3.  您需要确保`FOR XML`两个查询的列列表和子句完全相同。在您的示例中，您已`xsinil`在数据查询中指定，但未在模式查询中指定。

所以在这里你需要为模式查询指定这样的东西

```
select top 1 * from tablename 
where 1=0 
for xml auto, type, elements xsinil, root('xml'), xmlschema('http://tempuri.org') 
```

这用于数据查询

```
select * from tablename 
for xml auto, type, elements xsinil, root('xml'), xmlSchema('http://tempuri.org') 
```

# facebook - Facebook 游戏应用 Flash CS6 AS3.0

> ID：15371819
> 
> 赞同：0
> 
> 时间：2013-03-12T20:47:59.507
> 
> 标签：facebook, flash, actionscript, facebook-as3-api

我正计划为一个大学项目创作一个 Facebook 应用程序，但我不确定如何处理细节。

我在 Flash（动画、通用 AS3.0 编码）领域工作了将近三年，所以我在这个程序中工作非常自在。我查找了很多关于使用 Facebook SDK for ActionScript 等的信息，但我真的不确定我在做什么。

是否可以在 Flash CS6 中创建整个游戏，然后添加任何必要的 PHP 添加（用于发布到时间线等）？

很抱歉没有线索，但非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:49:31.647

你可以从中得到一些例子

[http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

谢谢 Dhiraj

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:42:58.117

如果您只想将游戏中的数据发布到 Facebook - 例如，简单的“我获得了 [score] 分！” 用户墙上的消息 - 那么您不需要在 Flash 游戏之外编写任何代码，除了确保它所在的页面设置正确（使用 Facebook 标记和 JavaScript 等）。

我发现这篇文章有助于展示使用 AS3 API 登录并将数据从 Facebook 拉入 Flash 的基础知识：http: [//permadi.com/blog/2011/02/using-facebook-graph-api-in-flash -as3-1-5/](http://permadi.com/blog/2011/02/using-facebook-graph-api-in-flash-as3-1-5/)。

# php - 如何使用 .htaccess 定义友好的 URL 规则？

> ID：15371824
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:48:20.793
> 
> 标签：php, url, mod-rewrite, url-rewriting

很长一段时间我都在尝试定义重写规则但我还没有成功？我有一个简单的页面[http://www.myURL.com/pdf.php?id=2](http://www.myURL.com/pdf.php?id=2)。我想让它变得友好：[http](http://www.myURL.com/pdf/2/) ://www.myURL.com/pdf/2/ ...

我在谷歌上花时间后写了这条规则：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^pdf/([0-9]+)\$ pdf.php?id=$1\. 
```

当我在服务器上上传我的 .htaccess 文件并尝试先运行时，它给了我 500 错误。第二次加载页面，但无法显示友好的 URL；它像以前一样显示。请告诉我更好的解决方案，我遵循了许多说明使其有用但未能成功。除非我向他显示友好的 URL，否则我的客户不会走得更远。请尽快帮助我。这是我的客户托管组织：Justhost.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:51:51.473

您可以使用 Apache 的重写引擎来执行此操作。像这样的东西：

```
RewriteEngine On
RewriteRule ^pdf/([0-9/]+)$ /pdf.php?id=$1 [L] 
```

这将允许您访问[http://yoursite.com/pdf/192](http://yoursite.com/pdf/192)而不是[http://yoursite.com/pdf.php?id=192](http://yoursite.com/pdf.php?id=192)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:54:27.130

[这](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)是一个关于使用 Apache 的 mod_rewrite 创建友好 URL 的非常简单的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:56:12.260

现在可能有点太多了，但是您可以查看一些可用的 MVC 框架来帮助您解决这个问题。我猜主机只提供 PHP 5.2，所以我会看一下 Zend Framework 1.12 的路由/控制器解决方案来解决这个问题，因为它可以在现有代码中实现而不会有太多麻烦。

# java - 向左移动时如何削减二进制数？

> ID：15371827
> 
> 赞同：0
> 
> 时间：2013-03-12T20:48:26.543
> 
> 标签：java, bit

向左移动时如何减少二进制数而不是扩展位数？

```
int num = 0b101010;
num = num << 1 // I want num to be now 01010 
num = num << 1 // I want num to be now 1010
num = num << 1 // I want num to be now 010
num = num << 1 // I want num to be now 10 
```

有简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:52:02.790

是的，这很容易做到：用所有的（`0b111111`在你的情况下）制作一个面具，然后用它来掩盖你的原始号码`&`。当您向右移动蒙版时，您将获得以下效果：

```
Number Mask   Result
------ ------ ------
101010 011111 001010
101010 001111 001010
101010 000111 000010
101010 000011 000010
101010 000011 000010
101010 000001 000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:31:12.203

您可以使用：

```
int num = 0b101010;
num = num >> 4; 
```

现在是`0b10`。

# dns - @主机名没有被其他A记录覆盖？

> ID：15371836
> 
> 赞同：0
> 
> 时间：2013-03-12T20:48:51.230
> 
> 标签：dns, tumblr

我的域的`A`记录是：

```
Host:           Points to:
@               66.6.44.4
experiments     188.121.46.1 
```

`@`指向我的 Tumblr 博客，子`experiments`域指向我的主机。

我遇到的问题是，`experiments.example.com`以某种方式重定向（`curl`表明它是 301）到`example.com/experiments/`. 我检查了[http://whatsmydns.net](http://whatsmydns.net)，它也确认这些主机指向这些 IP。

这是怎么回事？我已经清空了几次 DNS 缓存，所以我不认为是这样。该重定向来自哪里？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:00:11.943

**实际上，这不是 DNS 问题，而是网络服务器问题。**

**您运行的**网络服务器**`http://experiments.example.com` **重定向**到`http://example.com/experiments/`. 因此，请检查您的 Web 服务器配置以查找任何重定向指令。**

 ****DNS 仅将名称解析为 IP 地址。**它不会重定向 HTTP 请求。

HTTP 是一种协议。随着`http://experiments.example.com`您连接到`experiments.example.com`端口 80 上的服务器（IP 192.0.2.46），您的网络服务器会在该端口侦听、接受请求并将其重定向到，`http://example.com/experiments/`并且您的浏览器会在端口 80 上遵循此重定向查询主机*example.com*（IP 203.0.113.42）到`GET /experiments/`那里。**

# java - 将线性布局动态添加到相对布局中

> ID：15371837
> 
> 赞同：0
> 
> 时间：2013-03-12T20:48:52.963
> 
> 标签：java, android, android-relativelayout

我有这段代码，我想在 LinearLayout 中动态添加 CheckBoxes，该复选框嵌套在嵌套在 RelativeLayout 中的 ScrollView 中（RelativeLayout->ScrollView->LinearLayout->My ChechBoxes）

```
li = (RelativeLayout) findViewById(R.id.mainlayout);    
ScrollView sv = new ScrollView(this);
final LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
li.addView(sv);
sv.addView(ll);
for(int i = 0; i < 20; i++) {
    CheckBox cb = new CheckBox(getApplicationContext());
    cb.setText("I'm dynamic!");
    ll.addView(cb);
}
this.setContentView(sv); 
```

但我收到此错误：

```
03-12 20:32:14.840: E/AndroidRuntime(945): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

我在我的 XML 文件中声明的 RelativeLayout 已经如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:54:03.120

```
this.setContentView(sv); 
```

这会尝试将您的 ScrollView 添加到 FrameLayout `android.R.id.content`，但是您已经将...设为`li`父级，`sv`因此“指定的子级已经有父级”。

我相信您可以删除~~`this.setContentView(sv);`~~，因为您似乎只想将 ScrollView（等）添加到 RelativeLayout，而不是替换整个现有布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:38:12.730

检查这个[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html) 当您下载示例应用程序时，请通过 LayoutChangesActivity.java

以下是添加项目的代码..

```
private void addItem() {
    // Instantiate a new "row" view.
    final ViewGroup newView = (ViewGroup) LayoutInflater.from(this).inflate(
            R.layout.list_item_example, mContainerView, false);

    // Set the text in the new row to a random country.
    ((TextView) newView.findViewById(android.R.id.text1)).setText(
            COUNTRIES[(int) (Math.random() * COUNTRIES.length)]);

    // Set a click listener for the "X" button in the row that will remove the row.
    newView.findViewById(R.id.delete_button).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            // Remove the row from its parent (the container view).
            // Because mContainerView has android:animateLayoutChanges set to true,
            // this removal is automatically animated.
            mContainerView.removeView(newView);

            // If there are no rows remaining, show the empty view.
            if (mContainerView.getChildCount() == 0) {
                findViewById(android.R.id.empty).setVisibility(View.VISIBLE);
            }
        }
    });

    // Because mContainerView has android:animateLayoutChanges set to true,
    // adding this view is automatically animated.
    mContainerView.addView(newView, 0);
} 
```

# delphi - 在 dwscript 中注册隐式/显式类型转换运算符

> ID：15371838
> 
> 赞同：1
> 
> 时间：2013-03-12T20:48:55.793
> 
> 标签：delphi, operator-overloading, dwscript

是否可以从 Delphi 注册隐式和/或显式类型转换运算符？

我找到了[http://code.google.com/p/dwscript/issues/detail?id=124](http://code.google.com/p/dwscript/issues/detail?id=124)，但它似乎处理脚本内运算符重载，这是一个相当古老的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:45:41.520

目前不可能，目前支持的隐式转换仍然是在编译器中硬编码的。启动了一个增量 WIP 来重构它（[https://code.google.com/p/dwscript/issues/detail?id=246](https://code.google.com/p/dwscript/issues/detail?id=246)），但它仍然没有完成。

# mongodb - 如何使用 Java 将数组添加到 MongoDB 文档？

> ID：15371839
> 
> 赞同：18
> 
> 时间：2013-03-12T20:48:58.533
> 
> 标签：mongodb, mongodb-java

我想使用 java 驱动程序在 mongoDB 中创建以下文档模式

```
{
  "_id": {
    "$oid": "513e9820c5d0d8b93228d7e8"
  },
  "suitename": "testsuite_name",
  "testname": "testcase_name",
  "milestones": [
    {
      "milestone_id": "359",
      "testplans": [
        {
          "pland_id": "965",
          "runs": [
            6985,
            5896
          ]
        },
        {
          "plan_id": "984",
          "runs": [
            9856,
            3684
          ]
        }
      ]
    }
  ]
} 
```

我有以下代码

```
BasicDBObject testObject = new BasicDBObject();
BasicDBObject milestoneObject = new BasicDBObject();

testObject.put("suitename", testsuite);
testObject.put("testname", testcase);
testObject.put("milestones", new BasicDBObject("milestone_id", "2333"));
locations.insert(testObject); 
```

但这不会以数组的形式生成里程碑。如何将里程碑添加为数组？我目前使用我的代码得到这个

```
{
  "_id": {
    "$oid": "513f93dac5d0e2439d34308e"
  },
  "suitename": "test_deployment_disable_client.TestDeploymentDisableClient",
  "testname": "test_deployment_disable_client",
  "milestones": {
    "milestone_id": "2333"
  }
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-12T21:08:06.067

更改为这样的内容：

```
testObject.put("suitename", testsuite);
testObject.put("testname", testcase);         
List<BasicDBObject> milestones = new ArrayList<>();
milestones.add(new BasicDBObject("milestone_id", "2333"));
testObject.put("milestones", milestones);
locations.insert(testObject); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-19T19:26:56.020

您可以创建一个接收 DBObjects 的 ArrayList。

```
List<DBObject> array = new ArrayList<DBObject>(); 
```

为数组内的对象添加创建的 DBObject，并将其添加到创建的数组对象中。

```
array.add(/* some object */); 
```

最后，将数组放入主文档对象中。

```
document.put("milestones", array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-10T14:01:43.530

更好的使用：

```
MongoClient client = new MongoClient("localhost",27017);

MongoCollection<Document> collection =        client.getDatabase("db").getCollection("collection");

List<Document> docs=new ArrayList<>();
docs.add();

collection.insertMany(docs);

client.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T14:33:33.510

很少延伸到以前的答案

```
 BasicDBObject testObject = new BasicDBObject();
    testObject.put("type", "milestones");
    testObject.put("usecase", "milestone_type");

    List<BasicDBObject> testplans = new ArrayList<>();
    testplans.add(new BasicDBObject("plan_id","3232"));
    testplans.add(new BasicDBObject("plan_day","sunday"));

    BasicDBObject milestoneObject = new BasicDBObject();
    milestoneObject.put("milestone_id", "3232");
    milestoneObject.put("plans", testplans);

    List<BasicDBObject> milestones = new ArrayList<>();
    milestones.add( milestoneObject);
    testObject.put("milestones", milestones);

    locations.insert(testObject); 
```

# drupal - 为什么我无法访问我的 Drupal6 管理员或页面？

> ID：15371846
> 
> 赞同：0
> 
> 时间：2013-03-12T20:49:27.893
> 
> 标签：drupal, admin, access-denied

我正在重新激活一个以前的员工创建的旧 Drupal 项目。他没有留下关于如何访问 Drupal 的说明。我获得了对 Drupal 正在使用的 postgres 数据库的访问权限，并更改了每个人的密码。我还确保所有用户都具有管理员角色，并且该管理员角色具有所有权限。当我与任何用户一起登录时，对于我尝试访问的每个页面，我都会得到“拒绝访问”。我已经尝试过 /admin、/user、/node 和其他几个页面。更改密码肯定会重置他们的密码，因为我没有收到无效的登录消息，只是一条拒绝访问的消息。该站点首先使用 LDAP 通过 apache 进行身份验证，并且我确保有与 Drupal 用户匹配的 apache 用户。我完全被难住了。就像我说的，最初做这个项目的人已经走了，无法联系到。我查看了几个类似的主题主题，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:13:58.360

你在apache中启用了ldap mod吗？试试 /?q=user

phpMyAdmin 安装了吗？也检查那里的用户。

# android - Android：点击网站中的按钮

> ID：15371848
> 
> 赞同：2
> 
> 时间：2013-03-12T20:49:41.130
> 
> 标签：android, post

我有一个问题，我在 Android 设备和某个站点上有应用程序，在按钮上处理 POST 检查的位置，所以我通过在服务器上传递此 POST 检查向该站点发送 POST 请求，并提供正确的数据，并且无法以图表方式单击-side，我需要用我的应用程序或服务器端代码做什么？

这是我发送 POST 的代码：

```
/****** SEND POST REQUEST ******/
private void sendPostRequest_cabinet(String clientID) 
{
    class SendPostReqAsyncTask extends AsyncTask<String, Void, String> 
    {

        @Override
        protected String doInBackground(String... params) 
        {

            // insert data into massive
            String paramClientID = params[0];

            HttpClient httpClient = new DefaultHttpClient();
            //httpPost = new HttpPost(post_url + /*language from dropdown + */ "/en/login/");

            if (LANGUAGE != null)
            {           
                if (LANGUAGE.equals("English"))
                {
                    httpPost = new HttpPost(link.getEng());
                    Toast.makeText(getApplicationContext(), (CharSequence) httpPost, Toast.LENGTH_LONG).show();
                }
                else if (LANGUAGE.equals("Russian"))
                {
                    httpPost = new HttpPost(link.getRussian());
                }
                else if (LANGUAGE.equals("Dutch(German)"))
                {
                    httpPost = new HttpPost(link.getDeutch());
                }
                else if (LANGUAGE.equals("French"))
                {
                    httpPost = new HttpPost(link.getFrance());
                }
                else if (LANGUAGE.equals("Italian"))
                {
                    httpPost = new HttpPost(link.getItalian());
                }
                else if (LANGUAGE.equals("Spanish"))
                {
                    httpPost = new HttpPost(link.getSpanish());
                }
            }

            // send parameters with values
            BasicNameValuePair email1BasicNameValuePair = new BasicNameValuePair("client_id", paramClientID);

            // insert parameters into massive
            List<NameValuePair> nameValuePairList = new ArrayList<NameValuePair>();
            nameValuePairList.add(email1BasicNameValuePair);

            try 
            {
                UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(nameValuePairList);
                httpPost.setEntity(urlEncodedFormEntity);

                try 
                {
                    HttpResponse httpResponse = httpClient.execute(httpPost);
                    InputStream inputStream = httpResponse.getEntity().getContent();
                    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
                    BufferedReader buffereReader = new BufferedReader(inputStreamReader);
                    StringBuilder stringBuilder = new StringBuilder();

                    String bufferedStrChunk = null;

                    while ((bufferedStrChunk = buffereReader.readLine()) != null) 
                    {
                        stringBuilder.append(bufferedStrChunk);
                    }

                    return stringBuilder.toString();
                }
                catch (ClientProtocolException cpe) 
                {
                    System.out.println("First Exception of HttpResponse: " + cpe);
                    cpe.printStackTrace();
                } 
                catch (IOException ioe) 
                {
                    System.out.println("Second Exception of HttpResponse: " + ioe);
                    ioe.printStackTrace();
                }
            } 
            catch (UnsupportedEncodingException uee) 
            {
                System.out.println("An Exception given  because of UrlEncodedFormEntity argument : " + uee);
                uee.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result)
        {
            // Toast.makeText(getApplicationContext(),
            // "POST request has been send successfully",
            // Toast.LENGTH_LONG).show();

            super.onPostExecute(result);

            //Toast.makeText(getApplicationContext(), result, Toast.LENGTH_LONG).show();

            //go to the browser with lang redirect              
            if (LANGUAGE != null)
            {           
                if (LANGUAGE.equals("English"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getEng()));
                    startActivity(i);
                }
                else if (LANGUAGE.equals("Russian"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getRussian()));
                    startActivity(i);
                }
                else if (LANGUAGE.equals("Dutch(German)"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getDeutch()));
                    startActivity(i);
                }
                else if (LANGUAGE.equals("French"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getFrance()));
                    startActivity(i);
                }
                else if (LANGUAGE.equals("Italian"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getItalian()));
                    startActivity(i);
                }
                else if (LANGUAGE.equals("Spanish"))
                {
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(link.getSpanish()));
                    startActivity(i);
                }
            }
        }
    }
    /***** second check of Internet connection *****/
    if (!isOnline()) 
    {
        showNoConnectionDialog(this);
        // Toast.makeText(getApplicationContext(),
        // "Internet connection is disabled!", Toast.LENGTH_LONG).show();
    } 
    else 
    {
        SendPostReqAsyncTask sendPostReqAsyncTask = new SendPostReqAsyncTask();
        sendPostReqAsyncTask.execute(clientID);
    }
} 
```

**UPD** 这里是我发送数据和从以前的活动中获取数据的方式：

```
//go to the ThirdScreen
Intent intent = new Intent(SecondScreen.this, ThirdScreen.class);
intent.putExtra("CLIENT_ID", stringClientID);
intent.putExtra("PASSWORD", getUserPWD);
intent.putExtra("LANGUAGE", language);
startActivity(intent);
finish();

Intent intent = getIntent();
CLIENT_ID = intent.getExtras().getString("CLIENT_ID"); 
```

**UPD2** 也许我没有清楚地解释我需要什么，所以我会尝试解释......我有网站，我需要通过 POST 向这个网站发送一些数据，这是什么意思？我启动我的 Android 应用程序，用数据填写一些文本框，然后单击按钮，通过单击此按钮，我需要打开 WebBrowser 并将数据发送到该站点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:07:51.343

我通过在其中创建带有 WebView 组件的新活动并检索需要的站点来确定我的问题，因此版主可以关闭此问题。

# java - Android：AsyncTask 中的 Jsoup

> ID：15371849
> 
> 赞同：2
> 
> 时间：2013-03-12T20:49:43.580
> 
> 标签：java, android, android-asynctask, jsoup

我有个问题。我使用 Jsoup 来解析网站。为此，我使用 AsyncTask。但很多时候数据没有得到。当我尝试使用此代码时：

```
public class ShowBar extends AsyncTask<String, Void, String>
{
    ProgressDialog mProgressDialog;
    public String info = "empty";
    private  boolean today = true;
    private Context  context_dialog;
    private OnCompleteListener mOnCompleteListener;

    public ShowBar(Context context, boolean day)
    {
        context_dialog = context;

        today = day;

    }

    public void setOnCompleteListener(OnCompleteListener listener) {
        mOnCompleteListener = listener;
    }

    @Override
    protected void onPostExecute(String result) {

            mOnCompleteListener.OnComplete(info,true);

        super.onPostExecute(result);
        mProgressDialog.dismiss();
    }

    @Override
    protected void onPreExecute() {
        mProgressDialog =
                ProgressDialog.show
                        (context_dialog
                                , "Loading"
                                , "Please wait", true);

        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        //publishProgress(new Void[] {});

         core();

        return info;

    }

     void core()
     {
         Elements links;

         final String URL = "http://dissp.com/translation/sport/footbol";
         final String YesterdayURL = "http://dissp.com/translation/sport/footbol/start";

         if (today)
         {

             Document doc = null;
             try {
                 doc = Jsoup.connect(URL).get();
                 links = doc.select("table[class=translation]");
                 info =  links.outerHtml();

             }catch (Exception e){
                 Log.e("errors","try-");
                 core();
             }

         }
     } 
```

在日志中写道：

```
03-12 22:45:50.809: ERROR/errors(24683): try-
03-12 22:45:52.519: ERROR/errors(24683): try-
03-12 22:45:52.709: ERROR/errors(24683): try-
03-12 22:45:53.879: ERROR/errors(24683): try-
03-12 22:45:55.579: ERROR/errors(24683): try-
03-12 22:45:55.779: ERROR/errors(24683): try-
03-12 22:45:56.949: ERROR/errors(24683): try-
03-12 22:45:58.659: ERROR/errors(24683): try-
03-12 22:45:58.859: ERROR/errors(24683): try-
03-12 22:46:00.099: ERROR/errors(24683): try-
03-12 22:46:01.719: ERROR/errors(24683): try-
03-12 22:46:01.929: ERROR/errors(24683): try-
03-12 22:46:03.179: ERROR/errors(24683): try-
03-12 22:46:04.799: ERROR/errors(24683): try-
03-12 22:46:04.999: ERROR/errors(24683): try- 
```

等等....

堆栈跟踪：

```
03-13 12:22:32.239: INFO/InputDispatcher(176): Delivering key to current input target
03-13 12:22:32.239: INFO/PowerManagerService(176): Ulight 3->7|0
03-13 12:22:32.319: INFO/InputDispatcher(176): Delivering key to current input target
03-13 12:22:32.509: WARN/System.err(25804): java.net.SocketTimeoutException
03-13 12:22:32.519: WARN/System.err(25804): at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:461)
03-13 12:22:32.519: WARN/System.err(25804): at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
03-13 12:22:32.519: WARN/System.err(25804): at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:65)
03-13 12:22:32.519: WARN/System.err(25804): at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:140)
03-13 12:22:32.529: WARN/System.err(25804): at java.io.BufferedInputStream.read(BufferedInputStream.java:225)
03-13 12:22:32.529: WARN/System.err(25804): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:660)
03-13 12:22:32.529: WARN/System.err(25804): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readResponseHeaders(HttpURLConnectionImpl.java:690)
03-13 12:22:32.529: WARN/System.err(25804): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1040)
03-13 12:22:32.529: WARN/System.err(25804): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:726)
03-13 12:22:32.529: WARN/System.err(25804): at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:412)
03-13 12:22:32.529: WARN/System.err(25804): at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:393)
03-13 12:22:32.529: WARN/System.err(25804): at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:159)
03-13 12:22:32.529: WARN/System.err(25804): at org.jsoup.helper.HttpConnection.get 
```

这是方法：

```
 void core()
 {
     Elements links;

     final String URL = "http://dissp.com/translation/sport/footbol";
     final String YesterdayURL = "http://dissp.com/translation/sport/footbol/start";

     if (today)
     {

         Document doc = null;
         try {
             doc = Jsoup.connect(URL).get();
             links = doc.select("table[class=translation]");
             info =  links.outerHtml();

         }catch (Exception e){
             Log.e("errors","try-");
             core();
         }

     }
 } 
```

我该如何解决？我希望应用程序始终显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:30:55.557

您收到套接字超时错误 - 您的网络或站点太慢。您是否尝试过延长超时时间？如果问题是间歇性的，这应该会有所帮助。

```
Jsoup.connect(url).timeout(10*1000); // sets timeout to 10 seconds 
```

有关详细信息，请参阅 jsoup 食谱[从 URL 加载文档](http://jsoup.org/cookbook/input/load-document-from-url)。

# c++ - O(1) std 或 boost 列表连接

> ID：15371850
> 
> 赞同：3
> 
> 时间：2013-03-12T20:49:48.783
> 
> 标签：c++, list, boost, std

是否有一种数据结构，例如`std::list`允许将一个列表 O(1) 连接到另一个列表的末尾？即列表A 中的最后一项链接到列表B 的第一项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T20:52:23.260

是的，[std::list::splice()](http://en.cppreference.com/w/cpp/container/list/splice)允许您在恒定时间内连接两个 std::list。

# android - 大屏幕xhdpi的android模拟器不起作用

> ID：15371851
> 
> 赞同：1
> 
> 时间：2013-03-12T20:49:50.217
> 
> 标签：android, android-emulator, resolution

我创建了配置屏幕尺寸为 5.3 英寸和 900x1480 分辨率的自定义设备。然后我用不同的操作系统版本创建了 AVD，但模拟器永远不会启动。它显示了模拟器屏幕，但一直只有黑屏，甚至没有显示“Android”。在 DDMS LogCat 中有一些动作，但对我来说，它看起来像是一个大循环重复。

我也尝试模拟 HTC One (normal-xxhdpi) 但也有同样的问题。在这种情况下，可能没有更新来支持 xxhdpi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T20:32:17.627

如果我在 RAM 中设置超过 786MB 你应该使用 512MB 并且模拟器将启动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T13:44:34.173

尝试在虚拟设备设置中选择“使用主机 GPU”。

# silverlight - ScrollViewer 内的 Silverlight 4 TextBlock 正在剪辑右侧的文本

> ID：15371853
> 
> 赞同：0
> 
> 时间：2013-03-12T20:49:59.360
> 
> 标签：silverlight, silverlight-4.0

我有这个非常简单的 ChildWindow：

```
<Grid x:Name="LayoutRoot" Margin="2">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Button x:Name="CancelButton" Content="Cancel" Click="CancelButton_Click" Width="75" Height="23" HorizontalAlignment="Right" Margin="0,12,0,0" Grid.Row="1" />
    <Button x:Name="OKButton" Content="OK" Click="OKButton_Click" Width="75" Height="23" HorizontalAlignment="Right" Margin="0,12,79,0" Grid.Row="1" />
    <ScrollViewer Width="378">
        <StackPanel>
            <TextBlock x:Name="txtFracture" HorizontalAlignment="Left" Margin="10,10,10,10" TextWrapping="Wrap" VerticalAlignment="Top" Width="358"/>
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

我的问题是 TextBlock 中的文本在右侧被剪裁了。（我最初没有 StackPanel ——那只是一个实验。）我在 Margin.Right 中添加了越来越多的内容，但这并没有帮助。滚动条本身并没有踩到文本，文本只是在到达块的右侧时下降了一堆像素。有时，甚至不是整个字母都被剪掉了。看到什么了吗？

此外，如果我将 Horizo​​ntalAlignment 从 Left 更改为 Center，我会在块的两侧得到像素剪裁。

此外，如果我完全删除 ScrollViewer，剪辑仍然存在，所以这也不是他的错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:37:57.057

我注意到你的 texblock 宽度是恒定的，你需要边距为 10。在这种情况下，ScrollViewer ScrollBar 会剪辑您的 TextBlock。可能的解决方案是 1\. 删除文本块上的宽度并设置对齐拉伸。

试试这个

```
 <ScrollViewer Width="378" HorizontalScrollBarVisibility="Disabled"  VerticalScrollBarVisibility="Auto">
         <TextBlock x:Name="txtFracture"  HorizontalAlignment="Stretch" Margin="10,10,10,10" TextWrapping="Wrap" VerticalAlignment="Stretch" 
                    Text="Testing"/>   
    </ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:46:02.677

事实证明这是有效的：

```
 <ScrollViewer Width="378" >
        <StackPanel>
            <TextBlock x:Name="txtFracture" Margin="10,10,10,10" TextWrapping="Wrap" />
        </StackPanel>
    </ScrollViewer> 
```

据我所知，真正的罪魁祸首是明确设置的 TextBlock Width。

# css - 延长边框css的长度

> ID：15371856
> 
> 赞同：22
> 
> 时间：2013-03-12T20:50:19.320
> 
> 标签：css, html, border

如何将边框的长度扩展到文本长度之外？这是我到目前为止所拥有的：

```
 color: #8C4600;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-weight: bold;
    font-size: 15px;
    border-bottom: 1px solid #D1D1D1; 
```

这是 HTML： `<li class = "vendors">VENDORS</li>`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T21:10:50.557

使用填充和负边距。

例如：

```
div {
  padding: 1em;
  margin: 0 -1em;
  border-bottom: 1px solid red;
} 
```

上面给出了所有边的填充，以及左右两边的负 1em 边距。你可能想摆弄那个。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-12T21:10:58.240

CSS 边框位于 HTML 元素的边距和内边距之间。如果您希望 HTML 元素的边框超出该元素的宽度（或高度），您可以向元素添加 CSS 填充，以便将边框向外推。

例如，如果您的 html 正在`<li class=vendors">VENDORS</li>`添加`padding:0 10px;`到您的 CSS 中，则会将边框左右向外推 10 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:54:48.233

```
 .inner {
        width: 80%;
    }

    .outer {
        border-bottom: 1px solid #D1D1D1;
        color: #8C4600;
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 15px;
    }
```

```
<div class="outer">
  <p class="inner">Your text</p>
</div>
```

不过，您可能需要设置外部宽度。因为它可能无法在每个浏览器中正确自动缩放。或者只是使外部 120%，内部固定宽度。这应该可以通过多种方法实现。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-12T21:10:44.830

您必须`"border: ##px color;` 在 css 中指定。

这将在相关的 html 标记周围创建一个边框。

示例代码是：

```
<!DOCTYPE html>
  <html>
   <head>
    <style>
     p {
       width:225px;
       border-style:solid;
       border:2px solid red;
     }
    </style>
  </head>
<body>
  <p>This is some text in a paragraph.</p>
</body> 
```

默认情况下，如果没有宽度和边框样式，边框将占据 100% 的空间。您可以以任何您想要的方式限制其宽度和样式。

这是一个对您最有帮助的网站[的链接。](http://www.w3schools.com/css/css_border.asp)

# php - 我如何在订单页面中调用我的 mysqli？

> ID：15371859
> 
> 赞同：0
> 
> 时间：2013-03-12T20:50:25.097
> 
> 标签：php, mysql, insert

我在 db.php 页面中有这个：

```
function db_connect(){ $link = new mysqli(localhost, user, pass, table); } 
```

这是在其他页面：

```
require_once("db.php");
function register($username, $email, $password){
        global $link;
        $query  = "INSERT INTO proyecto.user (username, password, email)
                  VALUES ('$username', '$password', '$email')";
        $result = mysqli_query($link, $query);
    } 
```

但是当我调用“注册”时它不起作用。我应该如何调用函数“db_connect”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:51:55.957

已`db_connect()`返回`$link`, 或使`$link`全局 in`db_connect()`

```
function db_connect() {
  return new mysqli(localhost, user, pass, table);
}

function register($username, $email, $password) {
  $link = db_connect();
  $query  = "INSERT INTO proyecto.user (username, password, email)
             VALUES ('$username', '$password', '$email')";
  $result = mysqli_query($link, $query);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:53:11.370

您可以这样做（PDO 连接）：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
         return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

然后初始化变量：

```
$host = 'localhost';
$user = 'root';
$dataBaseName = 'databaseName';
$pass = ''; 
```

现在您可以通过以下方式访问您的数据库

```
$db = connectToDatabase($host , $databaseName, $user, $pass); // You can make it be a global variable if you want to access it from somewhere else. 
```

如果你愿意，你可以让它成为一个全局变量。

```
$GLOBALS['db'] = $db; 
```

请注意，这是 pdo，一个针对您的案例的 PDO 数据库操作示例，请注意，这使用准备好的语句，因此对于 sql 注入非常安全，并且非常易于使用：

```
function register($username, $email, $password){
    $query = "INSERT INTO user (username, password, email) VALUES (:username, :password, :email)"; // Construct the query, making it accept a prepared variable search.
    $statement = $db->prepare($query); // Prepare the query.
    $result = $statement->execute(array(
        ':username' => $username, 
        ':password' => $password, 
        ':email' => $email
    )); // Here you insert the variable, by executing it 'into' the prepared query.
    if($result)
    {
        return true;
    }
    return false
} 
```

你可以这样称呼它：

```
$registerSuccess = register($username, $email, $password); 
```

# c# - 应用程序不包含定义

> ID：15371860
> 
> 赞同：5
> 
> 时间：2013-03-12T20:50:28.337
> 
> 标签：c#, visual-studio-2010

我有一个 C# 表单应用程序。我在程序中导入了一个额外的 CS 文件，现在它不再编译了。每次我尝试编译时，我都会收到以下消息：

```
Application does not contain a definition for 'EnableVisualStyles'
Application does not contain a definition for 'SetCompatibleTextrenderingDefault'
Application does not contain a definition for 'Run' 
```

当我单击错误时，它会将我带到 Programs.cs。它只包含以下信息：

```
/// <summary>
/// The main entry point for the application.
/// </summary>
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
} 
```

任何帮助，将不胜感激。

还有一点，一个测试控制台应用程序工作正常，但是我希望这个应用程序成为表单应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T20:56:55.527

您为名称空间添加了一条新`using`语句，该名称空间具有另一个定义`Application`, （它可能是您自己的）并且优先。您可以使用完全限定名称来确保您的目标是正确的`Application`类：

```
global::System.Windows.Forms.Application.EnableVisualStyles();
global::System.Windows.Forms.Application.SetCompatibleTextRenderingDefault(false);
global::System.Windows.Forms.Application.Run(new Form1()); 
```

`global::`（只要您没有命名的类，您就可以省略，`System`但以上只是在命名空间/类名不明确的情况下更加健壮一点。

其他替代方法包括重命名自定义`Application`类，如果它确实是您自己的，不`using`为该文件（或使用`System.Windows.Forms` `Application`该类的任何文件）所在的任何命名空间添加一个别名，为`System.Windows.Forms.Application`（这由类似的东西完成`using FormApplication = System.Windows.Forms.Application;`）等.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T13:14:10.170

我在使用实体模型框架连接到恰好有一个名为“应用程序”的表的数据库时遇到了这个问题。为数据库生成类后，我立即有两个“应用程序”类导致了相关错误。在我的 Program.cs 文件的 Main() 方法中，以下代码更改解决了该问题：

```
System.Windows.Forms.Application.EnableVisualStyles();         
System.Windows.Forms.Application.SetCompatibleTextRenderingDefault(false);
System.Windows.Forms.Application.Run(new MyForm()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T16:22:32.783

我知道这是一个死灵肿块，但它适用于我今天的情况。@James G 上面的回答让我意识到我已经导入了一个包含“应用程序”定义的 Web 服务，这也导致了这个错误。作为检查的一部分，请确保任何导入的服务都不会偶然包含“应用程序”。

如果有人正在导入它，DynamicsSecurityAdminService 就是对我做的那个。

# javascript - 让 javascript 计时器不断运行（用于会话检查）是不是很糟糕？

> ID：15371865
> 
> 赞同：2
> 
> 时间：2013-03-12T20:50:40.770
> 
> 标签：javascript, session, timer

我正在考虑创建一个 1 分钟的会话注销警告消息。

为此，我假设我需要一个在后台持续运行的 javascript 计时器。

这是对资源的可怕使用来不断运行这样的计时器还是足够小而不重要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:53:34.430

你不需要一个持续运行的计时器，你只需要使用`setTimeout`set 1 分钟。如果您认为这应该是一个不活动计时器，那么您需要做的就是清除它`clearTimeout`并在用户执行某些操作时重置它。

您可以执行以下操作：

```
var timerID;

function startTimer() {
    clearTimeout(timerID);
    timerID = setTimeout(function() {
        // Put your warning or auto logout here
    }, 60000);
}

function UserIsDoingSomething() {
    clearTimeout(timerID);
    // do something....
    startTimer();
} 
```

# git - 为什么 git 将我的分支名称前缀大写？

> ID：15371866
> 
> 赞同：75
> 
> 时间：2013-03-12T20:50:40.860
> 
> 标签：git

我有一组非常简单的 git 命令会导致一些奇怪的行为：

显示我当前的本地分支机构，看看我在`release/beta1`：

```
$ git branch
  develop
  master
* release/beta1 
```

从创建一个`bugfix/somefeature`分支`release/beta1`：

```
$ git checkout -b bugfix/somefeature
Switched to a new branch 'bugfix/somefeature' 
```

到目前为止一切顺利，对吧？好吧，再给我看看当地的分支机构：

```
$ git branch
  BUGFIX/somefeature 
```

问题：

*   为什么`bugfix`我的分支的前缀被大写为`BUGFIX`？
*   相关，为什么没有用星号标记为我当前的分支？

我在 OS X 10.8.2 上通过 Homebrew 使用 git 版本 1.8.1.5，无论我的驯服是否`~/.gitconfig`到位，都会发生这种情况。似乎每个`bugfix/...`分支都会发生这种情况。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-03-12T21:08:28.667

分支存储为目录中的*文件*`.git`。单个分支是包含分支指向的提交对象的散列的单个文件。

所以，你可能猜到了，当创建一个分支时，`foo/bar`这将对应于一个带有文件的目录。因此，Git 将创建一个文件夹`foo`，其中包含一个`bar`指向提交的文件。

这意味着当您添加另一个分支`foo/baz`时，它将创建一个文件`baz`并将其添加到文件夹中。

现在，对于不区分大小写的文件系统，分支名称不区分大小写。这意味着`FOO/bar`和`foo/bar`是相同的。但实际的*内部*名称取自原始文件夹和文件名。因此，当您的`bugfix`分支类别的文件夹以大写字母书写时，分支将被识别为大写字母`BUGFIX`。

要解决此问题，只需进入`.git/refs/heads`并将文件夹名称更改为您喜欢的方式。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-02-01T15:20:37.923

感谢您的回答，它帮助我找到了问题的解决方案，但我的有点不同。在我的情况下，具有大写名称的文件夹不在 中`.git/refs/heads`，而是在`.git/refs/remotes`.

很久以前，有人创建了两个远程文件夹，它们的区别仅在于第一个字母的大小写。大写的版本已被放弃；但我的回购，在那个时间之前，仍然有大写的拼写。

所以每次我尝试从新文件夹中拉取时，它都会起作用，但是git将本地分支放入本地大写文件夹中。症状是我无法对该分支进行新的更改。每次我都必须删除我的本地副本并再次检查远程。

我的解决方法是更改​​文件夹名称的拼写，`.git/refs/remotes`问题已经解决。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-25T11:40:51.463

要解决此问题，您应该遵循@poke 所说的并禁用它，我使用了本地 git 命令，可以将忽略大小写切换为 false。

要识别这一点，您可以通过运行以下命令来检查忽略大小写。

```
git config --global --get core.ignorecase 
```

此命令将返回`true`，这表明 git 正在忽略大小写。要解决此问题，请通过以下命令将其设为 false。

```
git config --global core.ignorecase false 
```

这将禁用 git 中的忽略大小写。希望这能解决这个问题。确保您不是在处理多语言项目，在这种情况下，此设置可能需要 true。

# excel - 如何根据范围内的值填充单元格？

> ID：15371867
> 
> 赞同：0
> 
> 时间：2013-03-12T20:50:43.423
> 
> 标签：excel, excel-formula

**你好，**

如果我没有很好地表达我的问题，请原谅我。但是，我有一个 Excel 电子表格，我必须每月完成并提交给我们的总部。我一直在手动编辑大部分字段，但我认为有一种方法可以自动化一些值。不幸的是，我还没有弄清楚，所以我想我会在这里寻求帮助。

所以我有两个表（表 1 和表 2） - 如下图。如果 WEIGHT（C 列）在某个范围内（在表 2 中定义），我需要一种自动填充 RATE FACTOR（D 列）的方法。

我在这里阅读有关使用 VLOOKUP 的信息，但无法使其正常工作。任何帮助将不胜感激，谢谢。

**图片如下** *（无法将图片附加到问题中）。*

表一： [https ://dl.dropbox.com/u/55292384/table1.jpg](https://dl.dropbox.com/u/55292384/table1.jpg)

表2： [https ://dl.dropbox.com/u/55292384/table2.jpg](https://dl.dropbox.com/u/55292384/table2.jpg)

//Kismet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:22:51.697

假设您的示例在第 1 行中有标题，请在单元格 D2 中输入`=VLOOKUP(C2,$G$2:$H$17,2)`

您可以将此公式复制到 D 列中的其他单元格。

VLOOKUP 要求值表按第一列升序排序。查找值（此处为 C2）在第一列中找到，2 表示在第二列中返回相应的值。默认情况下，如果未找到查找值，则 VLOOKUP 返回与小于查找值的最接近的值对应的结果。这可能适合也可能不适合您的费率系数计算（如果不适合，我可以提出额外的建议）。

# php - 通过在数据库中查询图像文件名，在 Codeigniter 中使用 AJAX 显示图像列表

> ID：15371873
> 
> 赞同：2
> 
> 时间：2013-03-12T20:51:14.757
> 
> 标签：php, mysql, sql, ajax, codeigniter

我有一个存储在数据库中的一些图像的文件名列表。我正在尝试使用 ajax 获取该列表，但我收到了警告消息：

`[json] (php_json_encode) type is unsupported, encoded as null`

下面是我的代码：

**控制器：**

```
<?php
class Create extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('get_files');
    }

    public function index()
    {
        $data['title'] = 'Create New Map';
        $this->load->view('head&foot/create_header', $data);
        $this->load->view('create', $data);
        $this->load->view('head&foot/create_footer');
    }

    // Loads the default tiles into the gallery
    public function update_gallery()
    {
        echo json_encode($this->get_files->get_image_list()); 
    }

}
?> 
```

**模型：**

```
<?php

/*
 * Returns a list of files from a database
 */

class Get_files extends CI_Model
{
    public function __construct()
    {
        parent::__construct();
        $this->load->database();
    }

    function get_image_list(){
        return $this->db->query("SELECT * FROM default_tile");
    }
}

?> 
```

**在我看来，ajax 请求是：**

```
$.ajax({
          url:'create/update_gallery',
          type:'GET',
          success:function(data){
            $('#default_tiles_view').html(data);
          }
       }) 
```

任何人都可以看到导致警告的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:59:46.603

问题是你的`get_image_list()`方法。它实际上并没有返回一个图像列表，而是一个[`database result object`](http://ellislab.com/codeigniter/user-guide/database/queries.html): 的结果`$this->db->query("SELECT * FROM default_tile")`。

在该函数中，您将需要遍历结果集以获取列表（数组）中的所有图像并从函数返回该列表。

例子：

```
function get_image_list(){
    $images = array();
    $query =  $this->db->query("SELECT * FROM default_tile");

    // simple example
    foreach ($query->result_array() as $row) 
    {
      $images[] = $row;
    }

    return $images;
} 
```

# java - 在java中将日期递增18年

> ID：15371875
> 
> 赞同：1
> 
> 时间：2013-03-12T20:51:18.003
> 
> 标签：java, date, milliseconds, jdatechooser

1.我想在 JDateChooser 中设置**setMaxSelectableDate=** 18years，所以我通过增加毫秒来提供日期，但是我应该如何将它增加 18 年。
2.以 18 年递增，计算结果为**365*18*24*60*60*1000=56764800000**，这使我的错误整数变大。

```
 Date max=new Date();
Date oth1=new Date(max.getTime() + (365*18*24*60*60*1000));  //days*hours*minutes*seconds*milliseconds
SimpleDateFormat maxdateFormatter1 = new SimpleDateFormat("MMM d,yyyy hh:mm:ss a");
String maxdate=maxdateFormatter1.format(oth1);  
DateChooser_V1.setMaxSelectableDate(new java.util.Date(maxdate)); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T20:56:19.793

让我们**[`java.util.Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)**为您完成这项工作：

```
Calendar c = Calendar.getInstance();
c.setTime(oldDate);
c.add(Calendar.YEAR, 18);
Date newDate = c.getTime(); 
```

它负责闰年、历史 GMT 偏移变化、历史夏令时时间表变化等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:52:58.697

您需要使用`long`. `L`您可以通过在您的号码中添加一个来实现此目的：

`365L* ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:06:33.487

与[乔达时间](http://joda-time.sourceforge.net/)

```
DateTime in18Years = new DateTime( ).plusYears( 18 ); 
```

以下是如何转换为`java.util.Date`

```
Date in18Years = new DateTime( ).plusYears( 18 ).toDate( ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:53:39.437

您不能随意添加秒（或毫秒）并期望日历计算正确。基本上，要考虑所有这些闰年、闰秒和夏令时变化，需要付出一些额外的努力。

在 Java 1.8 出来之前，使用`java.util.Calendar`而不是`java.util.Date`，确实有充分*的理由*`java.util.Date`不推荐使用其中的所有内容。虽然它一开始看起来不错，但如果使用足够多，您会发现它经常“不起作用（tm）”。

```
 GregorianCalendar now = new GregorianCalendar();
 now.add(Calendar.YEAR, 18); 
```

这是假设你没有溢出`Integer.MAX_INT`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:55:58.840

我会使用一个`Calendar`对象来实现这一点：

```
Calendar cal = Calendar.getInstance();
Date dt = new Date();
...
// Set the date value
...
cal.setTime(dt);
cal.add(Calendar.YEAR, +18);
dt = cal.getTime(); 
```

希望这可以帮助你

# php - php中开关的条件中断

> ID：15371880
> 
> 赞同：-1
> 
> 时间：2013-03-12T20:51:37.627
> 
> 标签：php

我有以下形式的开关：

```
switch ($action) {
case 'saveTemp':
break;
case 'save':
break
} 
```

我希望能够有这样的休息条件：

```
switch ($action) {
case 'saveTemp':
    if ($skipbreak) {
        break;
    }
case 'save':
break
} 
```

简单来说，当`$skipbreak == true`我希望代码通过 saveTemp 案例进入 save 案例时。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:09:31.160

很可能你不会做我要告诉你的事情。至少暂时不会，然后当您重新审视您的这个问题时（偶然），您会意识到我的回答是正确的。

不要将 if 块嵌套在 switch 块中，甚至不要将 switch 块嵌套在 switch 块中。两者都是代码异味，表明您的代码违反了 SRP（单一责任原则）。这意味着代码的这个特定部分同时负责太多不同的事情。

在代码层次结构中上一层或上一层，找到可以将某些任务删除到特定功能的地方。也许你意识到你需要在一个类中封装一组函数。突然之间，您意识到您不再需要嵌套控制块。

如果您使用 PHPLOC 或类似的度量工具，您还将意识到，当您按照建议重构代码时，代码的圈复杂度会下降，并且您可能还会看到性能提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:53:04.640

是的，这是可能的，你刚刚做到了。但是，您想要这样做并没有任何意义。哦，是的，就像 nickb 说的那样，你需要像这样否定你的跳过逻辑：

```
if(!$skipBreak)
    break; 
```

您应该考虑使用`if-else`块而不是`switch`语句。请参阅[何时使用 If-else if-else over switch 语句，反之亦然](https://stackoverflow.com/questions/427760/when-to-use-if-else-if-else-over-switch-statments-and-vice-versa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:00:45.180

您还可以在 switch case 中嵌套 switch case，如下所示：

```
$action = 'saveTemp'; // Example using saveTemp
$skipbreak = TRUE;    // Example using TRUE

switch ($action) {
    case 'saveTemp':
    switch ($skipbreak) {
        case TRUE:
        echo 'this is True';
        break;
        case FALSE:
        echo 'this is FALSE';
        break;
    }
    break;
    case 'save':
    echo 'this is save';
    break;
} 
```

# php - Facebook api 通过“我的应用程序名称”发布

> ID：15371887
> 
> 赞同：0
> 
> 时间：2013-03-12T20:52:01.970
> 
> 标签：php, android, ios, facebook-graph-api, jquery-mobile

我有 facebook 应用程序作为状态更新发布到其用户时间轴。我正在使用下面的代码来启动并向所有用户发布消息，但我的问题是在所有移动设备（iphone 和 BB、三星）上“通过名称”发布。
帖子出现在 feed 墙上，就好像用户自己而不是应用程序一样。

```
<?PHP

require_once '../scripts/config.php';
require_once '../inc/facebook.php';

$facebook = new Facebook(array(
'appId' => $fb_app_id,
'secret' => $fb_secret,
'cookie' => 'true',
));

$dbh = new PDO('mysql:dbname='.$db_name.';host='.$db_host.';charset=utf8', $db_username, $db_password );

$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, 1);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$sqlid = "SELECT SQL_CALC_FOUND_ROWS * FROM offline_access_users";
$sqlmsg = "SELECT message FROM fb_messages WHERE msg_id = (SELECT MAX(msg_id) FROM fb_messages WHERE sent = 'No')";

try {

    $userid = $dbh->prepare($sqlid);
    $userid->execute();
    $id = $userid->fetchAll(PDO::FETCH_COLUMN, 1);

    $msg = $dbh->prepare($sqlmsg);
    $msg->execute();
    $txt = $msg->fetchColumn(); 
}

catch(PDOException $e)
{
    echo $e->getMessage();
    die();
}

$counter = 0;

foreach($id as $fbid){

$counter++;  

$body = array(  
        'access_token'  => $access_token,
                'app_id'        => $fb_app_id,
                'from'          => $fb_app_id,
                'message'       => $txt,
                'display'       => "touch",
                'redirect_uri'  => "http://mydomain.com",
                'link'          => "",
                'picture'       => "",
                'name'          => "",
                'caption'       => "",
                'description'   => "",
                );

$batchPost=array();

$batchPost[] = array('method' => 'POST', 'relative_url' => "/".$fbid."/feed", 'body' => http_build_query($body));

try {
$multiPostResponse = $facebook->api('?batch='.urlencode(json_encode($batchPost)), 'POST');
$poststs = "Sent Successfully";
}

catch(FacebookApiException $e){
        echo $e->getMessage();
        error_log($e);
        die();
}
            }
unset($batchPost);
$dbh = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:59:07.470

您使用的是什么 $access_token？您在哪里生成 $access_token？`$access_token`您使用的是哪个？

帖子的创建者（通过...）是创建该帖子的人`$access_token`- “发件人”将始终是 Facebook 帐户的所有者，无论您在其中放置什么。

# ios - iOS 格式背景

> ID：15371898
> 
> 赞同：1
> 
> 时间：2013-03-12T20:52:25.417
> 
> 标签：ios, format

我正在创建一个简单的报价应用程序作为学习体验，需要对其进行格式化以使其看起来更好。

![在此处输入图像描述](../Images/63fb9386516870e01a9a5518503796c6.png)

我正在尝试使背景在文本所在的位置具有“白色方块”并使文本变黑。就像您单击推文时的 Twitter 应用程序一样。

最好的方法是什么？我应该从什么开始？

我知道这很简单，我只有 15 岁，正在努力学习 iOS。如您所见，我有一台服务器并启动并运行了应用程序，只是想在我称之为完成之前进行格式化。谢谢！:)

-亨利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:05:34.337

这将取决于您如何创建显示文本的标签，但您可以很容易地做到这一点：

如果您在 XCode 中的 Storyboard / XIB 文件中创建 UI：假设您拖出 a`UILabel`或，您可以使用属性检查器设置文本颜色和包含文本的元素`UITextView`的背景颜色（在*视图部分中）。*

如果您在代码中创建了标签（或文本视图），则可以以编程方式设置`textColor`属性和属性。`backgroundColor`

# cakephp - cakephp 限制结果 find('all')

> ID：15371912
> 
> 赞同：1
> 
> 时间：2013-03-12T20:53:16.620
> 
> 标签：cakephp, controller, find

我只想在 index.ctp 上显示一个模型的所有结果，这些结果都作为条件成立。像这样选择：

select * from revistas where isonline = 'true';

我已经在控制器上尝试了以下代码：

```
public function index() {
        //$iscond = $this->Revista->findAllByNome('testa');
        //$this->Revista->query("SELECT id, nome, acronimo, modified, user_id from xconv.revistas where isonline = 't'");
        $this->Revista->find('all', array(
            'contain' => array( 
                'conditions' => array('Revista.isonline' => 't'))));
        $this->Revista->recursive = 0;
        $this->set('revistas', $this->paginate());
    } 
```

上面的那 2 条评论尝试了 b4。它不返回任何错误，但不执行条件。

是否还有其他 MVC 文件可以编写更多代码？什么地方出了错 ？？

泰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:24:41.440

**TLDR：**

您需要将条件提供给实际的分页，而不是进行`find()`查询，然后再进行完全独立的`$this->paginate()`.

**解释：**

`$this->paginate();`实际上会为您运行查询。所以 - 基本上，在你的问题中，你无缘无故地运行一个查询，然后`paginate()`运行另一个没有条件的查询。

相反，应用这样的条件：

```
$this->Paginator->settings = array('conditions'=>array('Revista.isonline' => 't'));
$this->paginate(); 
```

**注意：**正如您的评论和另一个答案所指出的，有多种方法可以将条件应用于分页 - 此答案的要点是指出您需要将条件应用于分页，而不是先前的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:06:41.210

在@Dave 的回答评论中使用您的线索，我认为这是使用“分页器过滤器”的解决方案，

```
public function index() {
    $this->Revista->recursive = 0;  //your old code
    $this->paginate['conditions']=array('Revista.isonline' => 't'); //new code
    $this->set('revistas', $this->paginate());  //your old code
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T20:55:39.890

试试这个：

```
public function index() {

        $this->Revista->find('all', array(
                'conditions' => array('Revista.isonline' => 't')));
        $this->Revista->recursive = 0;
        $this->set('revistas', $this->paginate());
    } 
```

# jquery - 将选项文本更改为值 jquery

> ID：15371914
> 
> 赞同：1
> 
> 时间：2013-03-12T20:53:30.733
> 
> 标签：jquery, option

我有一个选项列表，我想做的是将所选选项的文本替换为当前选项的值。

```
<select name="sorting-box" class="sort-box" id="sort">
        <option value="Alphabetical">Alphabetical</option>
    <option value="Math: &uarr; to &darr;">Math Required: High to Low</option>
    <option value="Math: &darr; to &uarr;">Math Required: Low to High</option>
            <option value="Lang: &uarr; to &darr;">Second Language Required: High to Low</option>
    <option value="Lang: &darr; to &uarr;">Second Language Required: Low to High</option>
    <option value="Salary: &uarr; to &darr;">Average Starting Salary: High to Low</option>
    <option value="Salary: &darr; to &uarr;">Average Starting Salary: Low to High</option>
        <option value="Credits: &uarr; to &darr;">Credits Required: High to Low</option>
    <option value="Credits: &darr; to &uarr;">Credits Required: Low to High</option>
</select>

$('#sort').change(function(){
        $(this).find('option:selected').text($(this).find('option:selected').attr('value'));
    }); 
```

[http://jsfiddle.net/3Eq2A/](http://jsfiddle.net/3Eq2A/)

它与此类似，但如果未选择它，我无法确定如何让它切换回来，所以它保持原样。

我在想也许可以添加一个类，并在类上检测？任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:02:05.857

您可以使用数据属性来存储文本的状态，然后在选择另一个选项时恢复它。这是一个演示：http: [//jsfiddle.net/3Eq2A/3/](http://jsfiddle.net/3Eq2A/3/)

* * *

演示代码

html和上面一样

js

```
$('#sort').change(function(){
 var $prev = $('.tempSelect',this);
 if( $prev.length > 0 ){
  $prev.text($prev[0].getAttribute("data-text"));
  $prev[0].removeAttribute("data-text");
  $prev.removeClass('tempSelect');
 }
 var $sel = $(this).find('option:selected');
 $sel.addClass("tempSelect");
 $sel[0].setAttribute("data-text",$sel.text());
 $sel.text($sel.attr('value'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:02:17.313

只需将原始文本存储在选项属性中：

```
<option value="Math: &uarr; to &darr;" data-original="Math Required: High to Low">Math Required: High to Low</option> 
```

而且你可以轻松实现你想要的：

```
$('#sort').change(function() {
    $(this).find('option').each(function() { $(this).text($(this).attr('data-original')); });
    $(this).find('option:selected').text($(this).find('option:selected').attr('value'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:02:46.053

尝试用类作为标识符交换值。

**演示：http:** [//jsfiddle.net/JFB4H/1/](http://jsfiddle.net/JFB4H/1/)

完整代码如下，

```
$('#sort').change(function () {   

    $(this).find('.swapped').text(function (i, v) {
        tmp = v;
        return this.value;
    }).val(function () {
        return tmp;
    }).removeClass('swapped');

    var tmp = $(this).val();
    $(this).find('option:selected')
        .val(function () {
        return this.text;
    }).text(tmp)
        .addClass('swapped');

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T21:04:49.310

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/3Eq2A/2/)**

```
$('#sort option').each(function () {
    $(this).data('txt', $(this).text());
});
$('#sort').change(function () {
    $('option', this).each(function () {
        $(this).text($(this).data('txt'));
    });
    $(this).find('option:selected').text($(this).find('option:selected').attr('value'));
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T20:57:07.553

您可以将数据属性“数据文本”添加到“选项”元素，并在更改时重置文本。将这样的内容添加到您的“更改”处理程序中：

```
$("#sort").change(function(){
    var $swapped = $(this).find(".swapped");
    var $selected = $(this).find("option:selected");

    $swapped.text($swapped.data("text")).removeClass("swapped");

    $selected.text($(this).find('option:selected').attr('value')).addClass("swapped");
}); 
```

# javascript - 不匹配的匿名 define() 模块

> ID：15371918
> 
> 赞同：140
> 
> 时间：2013-03-12T20:53:46.100
> 
> 标签：javascript, jquery, requirejs

当我第一次浏览我的[web 应用](http://codemagic.gr)程序时（通常在禁用缓存的浏览器中），我收到了这个错误。

> 错误：不匹配的匿名定义（）模块：函数（需要）{

**HTML**：

```
<html>
   .
   .
   .
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
   <script> var require = { urlArgs: "v=0.4.1.32" }; </script>
   <script data-main="assets/js/main" src="assets/js/libs/require.js"></script>
   <script src="assets/js/ace/ace.js?v=0.4.1.32"></script>
   </body>
</html> 
```

**JS**：

```
$(function () {
    define(function (require) {
        // do something
    });
}); 
```

任何人都知道这个错误的确切含义以及它为什么会发生？

[源文件](https://github.com/varemenos/codemagic/blob/master/assets/js/main.js#L8)，关于它的[简短讨论](https://github.com/varemenos/codemagic/issues/21)在 github 问题页面

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2014-05-05T07:28:51.733

就像 AlienWebguy 所说，根据文档，如果[出现 require.js 可能会爆炸](http://requirejs.org/docs/errors.html#mismatch)

*   您在自己的脚本标签中有一个匿名定义（“*调用define（）且没有字符串ID的模块”）（我假设它们实际上是指全局范围内的任何地方）*
*   您的模块名称冲突
*   您使用加载器插件或匿名模块，但不使用 require.js 的优化器来捆绑它们

我在包含使用 browserify 构建的捆绑包和 require.js 模块时遇到了这个问题。解决方案是：

*A. 在加载 require.js之前*，在 script 标签中加载 non-require.js 独立包，或者

B. 使用 require.js（而不是脚本标签）加载它们

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-14T00:59:25.900

在开始使用 require.js 时，我遇到了这个问题，作为初学者，[文档](http://requirejs.org/docs/errors.html#mismatch)也可以用希腊语编写。

我遇到的问题是，当您应该使用“字符串 id”时，大多数初学者示例都使用“匿名定义”。

**匿名定义**

```
define(function() {
        return { helloWorld: function() { console.log('hello world!') } };
 })

define(function() {
        return { helloWorld2: function() { console.log('hello world again!') } };
 }) 
```

**用字符串 id 定义**

```
define('moduleOne',function() {
    return { helloWorld: function() { console.log('hello world!') } };
})

 define('moduleTwo', function() {
      return { helloWorld2: function() { console.log('hello world again!') } };
}) 
```

当您使用**带有字符串 id 的定义**时，当您尝试使用如下模块时，您将避免此错误：

```
require([ "moduleOne", "moduleTwo" ], function(moduleOne, moduleTwo) {
    moduleOne.helloWorld();
    moduleTwo.helloWorld2();
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-08-11T21:58:19.610

我遇到了这个错误，因为我包含了 requirejs 文件以及直接包含在脚本标记中的其他库。这些库（如 lodash）使用了与 require 的定义冲突的定义函数。requirejs 文件是异步加载的，所以我怀疑 require 的定义是在其他库定义之后定义的，因此发生了冲突。

要消除错误，请使用 requirejs 包含所有其他 js 文件。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-12T20:55:39.527

根据[文档](http://requirejs.org/docs/errors.html#mismatch)：

> 如果您在 HTML 中手动编写脚本标记以通过匿名 define() 调用加载脚本，则可能会发生此错误。
> 
> 如果您在 HTML 中手动编写脚本标记以加载具有几个命​​名模块的脚本，然后尝试加载最终与手动加载的脚本中的命名模块之一具有相同名称的匿名模块，也可以看到编码的脚本标签。
> 
> 最后，如果您使用加载器插件或匿名模块（调用 define() 且没有字符串 ID 的模块）但不使用 RequireJS 优化器将文件组合在一起，则可能会发生此错误。优化器知道如何正确命名匿名模块，以便它们可以与优化文件中的其他模块组合。
> 
> 为避免错误：
> 
> *   确保通过 RequireJS API 加载所有调用 define() 的脚本。不要在 HTML 中手动编写脚本标记来加载其中包含 define() 调用的脚本。
>     
>     
> *   如果您手动编写 HTML 脚本标记，请确保它仅包含命名模块，并且不会加载与该文件中的模块之一同名的匿名模块。
>     
>     
> *   如果问题是使用加载器插件或匿名模块但 RequireJS 优化器未用于文件捆绑，请使用 RequireJS 优化器。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-10T17:22:12.197

现有的答案很好地解释了这个问题，但是如果由于遗留代码而使用 requireJS 或之前包含您的脚本文件不是一个简单的选择，那么稍微有点hacky的解决方法是在脚本标记之前从窗口范围中删除 require ，然后在之后恢复它。在我们的项目中，这包含在服务器端函数调用之后，但实际上浏览器会看到以下内容：

```
 <script>
        window.__define = window.define;
        window.__require = window.require;
        window.define = undefined;
        window.require = undefined;
    </script>
    <script src="your-script-file.js"></script>        
    <script>
        window.define = window.__define;
        window.require = window.__require;
        window.__define = undefined;
        window.__require = undefined;
    </script> 
```

不是最整洁的，但似乎可以工作并且节省了很多折射。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-04-28T19:24:30.963

请注意，某些浏览器扩展可以向页面添加代码。就我而言，我有一个“所有文本区域中的 Emmet”插件，它弄乱了我的 requireJs。通过在浏览器中检查文档，确保没有额外的代码被添加到您的文档中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-04T14:14:02.793

或者您可以使用这种方法。

*   在你的代码库中添加 require.js
*   然后通过该代码加载您的脚本

`<script data-main="js/app.js" src="js/require.js"></script>`

**它会在加载 require.js 后加载你的脚本**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-03T12:40:14.193

对于基于`require.js`. 如[https://requirejs.org/docs/errors.html](https://requirejs.org/docs/errors.html)`MISMATCHED ANONYMOUS DEFINE() MODULES`中所述，此错误有多种原因，在我的案例中有趣的是：. 事实证明，编译器习惯于在构建期间合并/缩小 Javascript 代码。解决方案是删除编译器，而是使用's 优化器 ( ) 来合并 js 文件。`If the problem is the use of loader plugins or anonymous modules but the RequireJS optimizer is not used for file bundling, use the RequireJS optimizer``Google Closure``Google closure``require.js``r.js`

# sql - SQL：3个表，从2个表中选择列并在一列上求和

> ID：15371920
> 
> 赞同：-2
> 
> 时间：2013-03-12T20:53:54.773
> 
> 标签：sql

**表1**

```
fld1 fld12 fld3 fld4 
```

**表2**

```
fld5 fld6 fld7 
```

**表3**

```
fld8 fld9 fld10 fld11 fld12 fld13 
```

询问：

```
select fld8, fld11, fld12, sum(fld3), fld4
from tbl1, tbl2, tbl3
where fld1=fld5 and fld2=fld6 and fld7=fld8 
```

查询未运行。我使用了连接，但总和不起作用。查询`fld3`将起作用但不是`sum(fld3)`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:56:54.627

你必须有`group by`

```
select fld8, fld11, fld12, sum(fld3), fld4 
from tbl1, tbl2, tbl3 where fld1=fld5 and fld2=fld6 and fld7=fld8 
group by fld8, fld11, fld12, fld4 
```

否则该`sum`功能将如何工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:58:00.350

一些数据库引擎要求您在使用聚合时指定一个组（sum、count avg 等）

```
select fld8, fld11, fld12, sum(fld3), fld4
from tbl1, tbl2, tbl3
where fld1=fld5 and fld2=fld6 and fld7=fld8
GROUP BY fld8, fld11, fld12, fld4 
```

或以不同的方式编写

```
select fld8, fld11, fld12, sum(coalesce(fld3,0)), fld4
from tbl1 
INNER JOIN tbl2 on fld1=fld5 and fld2=fld6
INNER JOIN tbl3 on  fld7=fld8
GROUP BY fld8, fld11, fld12, fld4 
```

现在都假设您在所有 3 个表中都有记录。如果不是这种情况，您可能需要使用外连接并根据引擎在 sum 字段或 nvl 上合并。

所以也许...

```
SELECT fld8, fld11, fld12, sum(coalesce(fld3,0)), fld4
FROM  tbl1 
LEFT JOIN tbl2 on fld1=fld5 and fld2=fld6
LEFT JOIN tbl3 on  fld7=fld8
GROUP BY fld8, fld11, fld12, fld4 
```

# c - 如何检查C中宏的值？

> ID：15371923
> 
> 赞同：1
> 
> 时间：2013-03-12T20:53:58.267
> 
> 标签：c

基本上我想做以下事情：

```
#define TYPE float

int main()
{
  if (TYPE==float)...;
} 
```

当然它不会'工作，并且不知道如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:56:20.407

如果您正在寻找一种独立于平台的机制，那么基本上没有。^*

一种可行的方法是这样的：

```
#if USE_FLOAT
#define TYPE float
#else
#define TYPE blah
#endif

...

int main() {
    if (USE_FLOAT) {
       ...
    }
} 
```

但是，作为一般规则，您应该尽可能避免基于宏的条件编译。

* * *

[* 好吧，事实证明有@Barmar 的巧妙解决方案，但我想我认为这是一个相当重量级的运行时检查......]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T20:59:00.467

您可以使用 C 预处理器的*字符串化*运算符。

```
 #define xstr(s) str(s)
 #define str(s) #s

 if (strcmp(xstr(TYPE), "float") == 0) ... 
```

有关此的说明，请参见[此处](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:58:19.300

您可以使用[`__builtin_types_compatible_p()`](http://www.ocf.berkeley.edu/~pad/tigcc/doc/html/gnuexts_SEC104___builtin_types_compatible_p.html)来判断两种类型是否兼容。

```
if (__builtin_types_compatible_p(TYPE, float)) ...; 
```

GCC 和 Clang 都支持这一点。

# xcode - 如何检查是否安装了命令行工具

> ID：15371925
> 
> 赞同：132
> 
> 时间：2013-03-12T20:54:02.123
> 
> 标签：xcode, macos

我有一台装有 OS X 10.8.2 的 macbook pro。XCode 已安装。我知道这一点，因为它出现在 Applications 目录中。/usr/bin 中还有 xcodebuild 和 xcode-select 文件我需要知道是否安装了命令行工具。有命令吗？我可以做些什么来查看是否安装了 XCode CLT，如果是的话来查找安装的版本？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-12T20:56:50.277

# 10.15 卡特琳娜更新：

请参阅优胜美地更新。

# 10.14 莫哈韦更新：

请参阅优胜美地更新。

# 10.13 高山脉更新：

请参阅优胜美地更新。

# 10.12 塞拉利昂更新：

请参阅优胜美地更新。

# 10.11 埃尔卡皮坦更新：

请参阅优胜美地更新。

# 10.10 优胜美地更新：

只需输入`gcc`或`make`在命令行上！OSX 会知道您没有命令行工具并提示您安装它们！

要检查它们是否存在，`xcode-select -p`将打印目录。`2`或者，如果它们不存在，则返回值将是，如果它们存在`0`。只打印返回值（*感谢@Andy*）：

```
xcode-select -p 1>/dev/null;echo $? 
```

# 10.9 小牛队更新：

采用`pkgutil --pkg-info=com.apple.pkg.CLTools_Executables`

# 10.8 更新：

**选项 1：** [Rob Napier](https://stackoverflow.com/users/97337/rob-napier)建议使用`pkgutil --pkg-info=com.apple.pkg.DeveloperToolsCLI`，这可能更清洁。

**选项 2：**检查内部`/var/db/receipts/com.apple.pkg.DeveloperToolsCLI.plist`以获取参考`com.apple.pkg.DeveloperToolsCLI`，它将列出版本`4.5.0`。

```
[Mar 12 17:04] [jnovack@yourmom ~]$ defaults read /var/db/receipts/com.apple.pkg.DeveloperToolsCLI.plist
{
    InstallDate = "2012-12-26 22:45:54 +0000";
    InstallPrefixPath = "/";
    InstallProcessName = Xcode;
    PackageFileName = "DeveloperToolsCLI.pkg";
    PackageGroups =     (
        "com.apple.FindSystemFiles.pkg-group",
        "com.apple.DevToolsBoth.pkg-group",
        "com.apple.DevToolsNonRelocatableShared.pkg-group"
    );
    PackageIdentifier = "com.apple.pkg.DeveloperToolsCLI";
    PackageVersion = "4.5.0.0.1.1249367152";
    PathACLs =     {
        Library = "!#acl 1\\ngroup:ABCDEFAB-CDEF-ABCD-EFAB-CDEF0000000C:everyone:12:deny:delete\\n";
        System = "!#acl 1\\ngroup:ABCDEFAB-CDEF-ABCD-EFAB-CDEF0000000C:everyone:12:deny:delete\\n";
    };
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-11-11T06:14:50.080

## 优胜美地

以下是一些人可能需要的新 Mac 上的一些额外步骤。这为@jnovack 的出色回答增加了一点点。

更新：设置时的其他一些注意事项：

确保您的管理员用户有密码。尝试启用 root 用户时，空白密码将不起作用。

```
System Preferences > Users and Groups > (select user) > Change password 
```

然后启用root，`dsenableroot`在终端中运行：

```
$ dsenableroot
username = mac_admin_user
user password:
root password:
verify root password:

dsenableroot:: ***Successfully enabled root user. 
```

输入管理员用户的密码，然后输入新启用的 root 密码两次。

下一个类型：

```
sudo gcc 
```

或者

```
sudo make 
```

它会响应如下内容：

```
WARNING: Improper use of the sudo command could lead to data loss
or the deletion of important system files. Please double-check your
typing when using sudo. Type "man sudo" for more information.

To proceed, enter your password, or type Ctrl-C to abort.

Password:

You have not agreed to the Xcode license agreements. You must agree to 
both license agreements below in order to use Xcode. 
```

当它提示您显示许可协议时按回车键。

```
Hit the Enter key to view the license agreements at 
'/Applications/Xcode.app/Contents/Resources/English.lproj/License.rtf'

IMPORTANT: BY USING THIS SOFTWARE, YOU ARE AGREEING TO BE BOUND BY THE 
FOLLOWING APPLE TERMS:

//... 
```

按`q`退出许可协议视图。

```
By typing 'agree' you are agreeing to the terms of the software license 
agreements. Type 'print' to print them or anything else to cancel, 
[agree, print, cancel] 
```

键入`agree`。然后它将以：

```
clang: error: no input files 
```

这基本上意味着您没有提供`make`或`gcc`任何输入文件。

这是支票的样子：

```
$ xcode-select -p
/Applications/Xcode.app/Contents/Developer 
```

## 小牛队

有了小牛队，现在有点不同了。

当未找到工具时，这是命令`pkgutil`命令返回的内容：

```
$ pkgutil --pkg-info=com.apple.pkg.CLTools_Executables
No receipt for 'com.apple.pkg.CLTools_Executables' found at '/'. 
```

要安装命令行工具，这可以在终端上很好地工作，带有漂亮的 gui 和一切。

```
$ xcode-select --install 
```

[http://macops.ca/installing-command-line-tools-automatically-on-mavericks/](http://macops.ca/installing-command-line-tools-automatically-on-mavericks/)

当他们被发现时，这是`pkgutil`命令返回的内容：

```
$ pkgutil --pkg-info=com.apple.pkg.CLTools_Executables
package-id: com.apple.pkg.CLTools_Executables
version: 5.0.1.0.1.1382131676
volume: /
location: /
install-time: 1384149984
groups: com.apple.FindSystemFiles.pkg-group com.apple.DevToolsBoth.pkg-group com.apple.DevToolsNonRelocatableShared.pkg-group 
```

此命令在安装前后返回相同的结果。

```
$ pkgutil --pkg-info=com.apple.pkg.DeveloperToolsCLI
No receipt for 'com.apple.pkg.DeveloperToolsCLI' found at '/'. 
```

此外，我之前在 xcode 的下载部分中选择并安装了 CLT 的组件，但它似乎没有进入终端......

希望有帮助。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2017-03-10T17:23:52.973

要检查是否安装了命令行工具，请运行：

```
xcode-select --version

// if installed you will see the below with the version found in your system
// xcode-select version 1234. 
```

如果未安装命令行工具，请运行：

```
xcode-select --install 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-02-06T10:23:59.583

在 macOS Sierra (10.12) 上：

1.  运行以下命令以查看是否安装了 CLT：

    ```
    xcode-select -p 
    ```

    如果已安装 CLT，这将返回工具的路径。像这样的东西-

    ```
    /Applications/Xcode.app/Contents/Developer 
    ```

2.  运行以下命令以查看 CLT 的版本：

    ```
    pkgutil --pkg-info=com.apple.pkg.CLTools_Executables 
    ```

    这将返回版本信息，输出将是这样的 -

    ```
    package-id: com.apple.pkg.CLTools_Executables
    version: 8.2.0.0.1.1480973914
    volume: /
    location: /
    install-time: 1486372375 
    ```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-11-11T12:26:02.060

在 macOS **Catalina**以及可能的一些早期版本中，您可以使用以下命令查找命令行工具的安装位置：

`xcode-select -p`又名`xcode-select --print-path`

如果已安装，它将响应以下内容：

`/Library/Developer/CommandLineTools`

要找出您在那里安装的版本，您可以使用：

`xcode-select -v`又名`xcode-select --version`

这将返回如下内容：

`xcode-select version 2370.`

**但是**，如果您尝试将其升级到最新版本，假设已安装，请使用以下命令：

`xcode-select --install`

您将收到以下回复：

`xcode-select: error: command line tools are already installed, use "Software Update" to install updates`

这相当错误地给人的印象是你需要使用 Spotlight 找到一个叫做“软件更新”的东西。实际上，您需要在终端中继续，并使用以下命令：

`softwareupdate -i -a`又名`softwareupdate --install --all`

它试图更新它可以更新的所有内容，并且很可能会回应：

```
Software Update Tool

Finding available software
No new software available. 
```

要找出您的机器上安装了哪些不同 Apple SDK 的版本，请使用以下命令：

`xcodebuild -showsdks`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-02-14T06:58:30.437

我认为对我来说找到命令行工具的最简单方法是否已安装及其版本与 macOS 版本无关

```
$brew config 
```

macOS：10.14.2-x86_64
CLT：10.1.0.0.1.1539992718
Xcode：10.1

当您正确安装了命令行工具并正确设置了路径时。

早些时候我得到如下输出
macOS: 10.14.2-x86_64
CLT: N/A
Xcode: 10.1

尽管有 gcc 并且使工作正常且低于输出，但 CLT 显示为 N/A

```
$xcode-select -p              
/Applications/Xcode.app/Contents/Developer
$pkgutil --pkg-info=com.apple.pkg.CLTools_Executables
No receipt for 'com.apple.pkg.CLTools_Executables' found at '/'.
$brew doctor
Your system is ready to brew. 
```

最后做 xcode-select --install 解决了我的 brew 无法找到 CLT 来安装包的问题，​​如下所示。

```
Installing sphinx-doc dependency: python
Warning: Building python from source:
  The bottle needs the Apple Command Line Tools to be installed.
  You can install them, if desired, with:
    xcode-select --install 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-02T20:53:17.720

转到应用程序 > Xcode > 首选项 > 下载

您应该在那里看到命令行工具供您安装。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-19T09:54:42.643

从编程的角度来看，[Homebrew 人员检查是否存在各种文件以确定是否安装了命令行工具](https://github.com/Homebrew/install/blob/52237ea74f41d2456a5b1bd3e4c2b0cb94485c3c/install#L122)。目前它总是检查 `/Library/Developer/CommandLineTools/usr/bin/git`并且还将检查`/usr/include/iconv.h`操作系统版本是否为 10.13 或更低。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-11T15:15:15.357

在 bash 脚本上使用：

```
if ! command -v xcode-select &> /dev/null
then
    echo "\t xcode was not found! You need to manually install it :/ "
else
    echo "xcode is installed, checking other IOS build tools"
fi 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-02T18:54:26.430

因为如果首先安装 Xcode 包含 CLI 工具，我使用以下已在 10.12 和 10.14 上验证的混合。我希望它适用于许多其他版本：

`installed=$(pkgutil --pkg-info=com.apple.pkg.CLTools_Executables 2>/dev/null || pkgutil --pkg-info=com.apple.pkg.Xcode)`

盐与`awk`分支逻辑的味道。

当然`xcode-select -p`可以使用非常短的命令来处理变化，但无法提供详细的包、版本和安装日期元数据。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-12T20:48:17.487

打开你的终端并检查你是否已经安装了 Xcode：

```
xcode-select -p 
```

作为回报，如果你得到这个：

```
/Library/Developer/CommandLineTools 
```

这意味着您已经安装了 Xcode。

另一种方法是检查是否安装了“HomeBrew”，您可以使用以下命令查看是否安装了 Xcode 和版本：

```
brew config 
```

最后，如果您没有 Xcode，请点击此链接从 Appstore 下载 Xcode。[来自 App Store 的 Xcode](https://itunes.apple.com/us/app/xcode/id497799835?mt=12&ign-mpt=uo%3D2)。

祝你好运。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-15T14:59:49.707

% xcode-select -h 用法：xcode-select [选项]

打印或更改活动开发者目录的路径。该目录控制用于 Xcode 命令行工具（例如 xcodebuild）以及 BSD 开发命令（例如 cc 和 make）的工具。

选项： -h, --help 打印此帮助信息并退出 -p, --print-path 打印活动开发者目录的路径 -s , --switch 设置活动开发者目录的路径 --install 打开一个对话框用于安装命令行开发者工具 -v，--version 打印 xcode-select 版本 -r，--reset 重置为默认命令行工具路径

# android - Android：在仅纵向应用程序中获取物理设备方向

> ID：15371927
> 
> 赞同：1
> 
> 时间：2013-03-12T20:54:05.433
> 
> 标签：android

我的应用程序仅锁定为纵向，但是在一个片段中，我有一个相机预览，我想根据设备方向旋转捕获的图像。我相信因为我的应用程序只是纵向的，所以下面的代码总是记录为零。

```
Display display = ((WindowManager)getActivity().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int rotation = display.getRotation();
Log.i(TAG, "Rotation: " + rotation ); 
```

在将应用程序锁定为纵向时是否可以获取设备的实际方向？

我的目标是 android 4.0+，所以我不担心该解决方案是否不适用于旧设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:10:37.320

您可以实现一个 SensorEventListener，然后查看 onSensorChanged 中的 Roll：

```
@Override
public void onSensorChanged(SensorEvent event) {    

    synchronized(this)
    {
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            mAccelerometerValues = event.values;     
        }           
        if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
            mGeomageneticValues = event.values;     
        }       

        if ((mAccelerometerValues != null) && (mGeomageneticValues != null))
        {

            boolean success = SensorManager.getRotationMatrix(R, I, mAccelerometerValues, mGeomageneticValues);
            if (success)
            {
                SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, outR); 
                SensorManager.getOrientation(outR,orientation);
                mYaw = orientation[0] * MathX.toDegreesF;               
                mPitch = orientation[1] * MathX.toDegreesF;
                mRoll = orientation[2] * MathX.toDegreesF;

                String sText = String.format("a:%1.4f\np:%1.4f\nr:%1.4f", yaw,pitch,roll); 

            }

        }
    }

} 
```

# asp.net-mvc - 以多对多关系查看

> ID：15371930
> 
> 赞同：0
> 
> 时间：2013-03-12T20:54:16.020
> 
> 标签：asp.net-mvc, entity-framework-4

我遇到了以下情况：

我有 2 张桌子：

Eventos 和 Convidados

我必须创建第三个表来关联多个

id_evento 和 id_convidado

我创建了一个名为 EventoConvidado 的控制器，并且需要在屏幕上显示所有 Convidados。

如何将模型传递给视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:07:08.443

我在您的描述中只发现了一个问题 - 如何将模型传递给视图。您可以像这样创建一个名为 EventosConvidadosViewModel 的视图模型：

```
public class EventosConvidadosViewModel
{
  public Eventos Eventos { get; set; }
  public Convidados Convidados { get; set; }
} 
```

在控制器中，您执行以下操作：

```
public ActionResult Index()
{
  var viewModel = new EventosCandidatosViewModel();
  // should you need to fill in the parameters for the view model you do it here
  return View(viewModel);
} 
```

在视图中，您的第一行应该是

```
@model EventosCandidatosViewModel; 
```

您可以通过以下方式在视图中使用此模型：`@Model`. 您可以像这样访问它的属性：`@Model.Eventos`或`@Model.Convidados`.

希望这对您有所帮助。

# php - MySQL查询，codeigniter中的子查询

> ID：15371931
> 
> 赞同：0
> 
> 时间：2013-03-12T20:54:15.830
> 
> 标签：php, mysql, codeigniter

我使用 codeigniter 作为我的框架，但我没有使用活动记录，我在执行这个查询时遇到了问题，它给了我一个错误号 1064

本质上，我试图将一堆数据插入到一个表中，但是从其他表中查询一些 id 号

```
$titulo = $datos['titulo'];
    $tipo   =   $datos['tipo'];
    $autor  =   $datos['autor'];
    $autor2 =   $datos['autor2'];
    $editorial =    $datos['editorial'];
    $ano        =   $datos['ano'];
    $paginas    =   $datos['paginas'];
    $descripcion =  $datos['descripcion'];
    $image_path =   'hola';
    $genero     =   $datos['genero'];
    $genero2    =   $datos['genero2'];

    $sql = "INSERT INTO productos (titulo, autor_id, autor2_id, editorial_id, ano, paginas, genero_id,
             genero2_id, tipo, descripcion, image_path)
             SELECT ? AS titulo,
             id FROM autores WHERE nombre_autor=?,
             id FROM autores WHERE nombre_autor=?,
             id FROM editoriales WHERE nombre_editorial=?,
             ? as ano, 
             ? as paginas,
             id FROM generos WHERE nombre_genero=?,
             id FROM generos WHERE nombre_genero=?,
             ? as tipo,
             ? as descripcion,
             ? as image_path";

    if($this->db->query($sql, array($titulo, $autor, $autor2, $editorial, $ano, $paginas, $genero, $genero2, $tipo, $descripcion, $image_path))){
        return true;
    }else{
        return false;
    } 
```

有人可以帮我解决这个问题吗？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:46:59.917

这不是一个完美的查询，因为我不知道您的数据库的设计，但就语法而言，它应该引导您朝着正确的方向前进。

```
INSERT INTO productos (titulo, autor_id, autor2_id, editorial_id, ano, paginas, genero_id,
         genero2_id, tipo, descripcion, image_path)
SELECT a.titulo, b.id, b.id2, c.id, a.ano, a.paginas, d.id, d.id2, a.tipo, a.description, a.image_path
FROM table_1 a
JOIN table_2 b ON a.autor_id = b.id
JOIN table_3 c ON a.editorial_id = c.id
JOIN table_4 d ON a.genero_id = d.id
WHERE a.id = 25 
```

本质上，这会将您需要的所有数据合并到一个表中，然后再添加到“productos”中。这是使用 SQL 执行所需操作的正确方法。当然，这也取决于表之间的关系——在此示例中，我假设您在 table_1 中有引用其他表中数据的外键。

然后，您将能够根据您想要/需要的任何参数执行此查询——只需参考 WHERE 子句中的参数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:18:50.460

一个 select 语句只能有一个 FROM 子句。

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

研究使用 JOIN

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# c++ - 如何使用 C++ 打开、读取输出并为 .jar 文件提供输入？

> ID：15371939
> 
> 赞同：0
> 
> 时间：2013-03-12T20:54:53.213
> 
> 标签：c++, jar, c++-cli, minecraft

我想制作一个 GUI 来在 Windows 中托管 Minecraft 服务器。Minecraft 服务器使用一个 .jar 文件和一个 .bat 文件来运行 .jar 文件并读取输出并向它提供输入。

**如何制作一个可以打开 .jar 文件、读取输出并为其提供输入的 C++ 程序？**

我试过了`execlp`，但是当我`#include <unistd.h>`收到“无法读取源文件”的错误时（我认为这是因为它是为 POSIX 制作的，但我不确定）。

任何帮助，将不胜感激！

（另外，你知道，我对编程和 C++ 很陌生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T17:32:25.843

我设法在 C# 中做到了这一点。这是代码（我认为 C++ 代码会非常相似）：

```
var arguments = "-jar -Xms" + Settings.ServerStartInfo.InitialRam + "M -Xmx" +
                            Settings.ServerStartInfo.MaximumRam + "M \"" + Settings.ServerStartInfo.FileName +
                            "\" -nojline" + Settings.ServerStartInfo.Arguments; 

var processStartInfo = new ProcessStartInfo
{
    FileName = "javaw.exe",
    Arguments = arguments,
    CreateNoWindow = true,
    ErrorDialog = false,
    RedirectStandardOutput = true,
    RedirectStandardError = true,
    RedirectStandardInput = true,
    StandardOutputEncoding = Encoding.UTF8,
    StandardErrorEncoding = Encoding.UTF8,
    UseShellExecute = false,
    WorkingDirectory = Settings.ServerStartInfo.WorkingDirectory
};

Process = new Process { StartInfo = processStartInfo };
Process.OutputDataReceived += ServerOutputHandler.ServerOutputReceived;
Process.ErrorDataReceived += ServerOutputHandler.ServerOutputReceived;
Process.Start();

Process.BeginOutputReadLine();
Process.BeginErrorReadLine();
Process.WaitForExit();

Process.Start(); 
```

有关更多信息，请查看此处：[https ://servercrafter.codeplex.com/SourceControl/latest#ServerCrafter/ServerCrafter.ClassLibrary/ClassLibrary/Server/Server.cs](https://servercrafter.codeplex.com/SourceControl/latest#ServerCrafter/ServerCrafter.ClassLibrary/ClassLibrary/Server/Server.cs)

# three.js - 解决 three.js / webGL 中的 gl_PointSize 限制

> ID：15371940
> 
> 赞同：8
> 
> 时间：2013-03-12T20:54:58.283
> 
> 标签：three.js, glsl, webgl

我正在使用three.js 来创建交互式数据可视化。这种可视化涉及渲染 68000 个节点，其中每个不同的节点具有不同的大小和颜色。

最初我尝试通过渲染网格来做到这一点，但事实证明这非常昂贵。我目前的尝试是使用 three.js 粒子系统，每个点都是可视化中的一个节点。

我可以控制点的颜色*大小，但只能控制到某个点。在我的卡上，gl 点的最大尺寸似乎是 63。当我放大到可视化时，点会变大 - 到一个点，然后保持在 63 像素。

我目前正在使用顶点和片段着色器：

顶点着色器：

```
attribute float size;
attribute vec3 ca;
varying vec3 vColor;

void main() {
    vColor = ca;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_PointSize = size * ( 300.0 / length( mvPosition.xyz ) );
    gl_Position = projectionMatrix * mvPosition;
} 
```

片段着色器：

```
uniform vec3 color;
uniform sampler2D texture;

varying vec3 vColor;

void main() {
    gl_FragColor = vec4( color * vColor, 1.0 );
    gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );
} 
```

这些几乎是从三个.js 示例之一中逐字复制的。

我对 GLSL 完全陌生，但我正在寻找一种方法来绘制大于 63 像素的点。我可以为任何大于一定大小的点绘制网格，但使用 gl_point 吗？我可以使用其他解决方法来绘制大于 63 像素的点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T19:45:20.987

您可以通过制作单位四边形数组 + 中心点然后在 GLSL 中按大小扩展来制作自己的点系统。

因此，您将有 2 个缓冲区。一个缓冲区只是一个 2D unitQuad 重复你想绘制多少点。

```
var unitQuads = new Float32Array([
  -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5,
  -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5,
  -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5,
  -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5,
  -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5,
]; 
```

第二个是你的积分，除了每个位置需要重复4次

```
var points = new Float32Array([
  p1.x, p1.y, p1.z, p1.x, p1.y, p1.z, p1.x, p1.y, p1.z, p1.x, p1.y, p1.z,
  p2.x, p2.y, p2.z, p2.x, p2.y, p2.z, p2.x, p2.y, p2.z, p2.x, p2.y, p2.z,
  p3.x, p3.y, p3.z, p3.x, p3.y, p3.z, p3.x, p3.y, p3.z, p3.x, p3.y, p3.z,
  p4.x, p4.y, p4.z, p4.x, p4.y, p4.z, p4.x, p4.y, p4.z, p4.x, p4.y, p4.z,
  p5.x, p5.y, p5.z, p5.x, p5.y, p5.z, p5.x, p5.y, p5.z, p5.x, p5.y, p5.z,
]); 
```

设置缓冲区和属性

```
var buf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf);
gl.bufferData(gl.ARRAY_BUFFER, unitQuads, gl.STATIC_DRAW);
gl.enableVertexAttribArray(unitQuadLoc);
gl.vertexAttribPointer(unitQuadLoc, 2, gl.FLOAT, false, 0, 0);

var buf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buf);
gl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW);
gl.enableVertexAttribArray(pointLoc);
gl.vertexAttribPointer(pointLoc, 3, gl.FLOAT, false, 0, 0); 
```

在您的 GLSL 着色器中，计算您想要的 gl_PointSize，然后将 unitQuad 乘以视图空间或屏幕空间中的该大小。屏幕空间将匹配 gl_Point 所做的，但人们通常希望他们的点像正常的东西一样在 3D 中缩放，在这种情况下，视图空间就是你想要的。

```
attribute vec2 a_unitQuad;
attribute vec4 a_position;
uniform mat4 u_view;
uniform mat4 u_viewProjection;

void main() {
   float fake_gl_pointsize = 150;

   // Get the xAxis and yAxis in view space
   // these are unit vectors so they represent moving perpendicular to the view.
   vec3 x_axis = view[0].xyz;
   vec3 y_axis = view[1].xyz;

   // multiply them by the desired size 
   x_axis *= fake_gl_pointsize;
   y_axis *= fake_gl_pointsize;

   // multiply them by the unitQuad to make a quad around the origin
   vec3 local_point = vec3(x_axis * a_unitQuad.x + y_axis * a_unitQuad.y);

   // add in the position you actually want the quad.
   local_point += a_position;

   // now do the normal math you'd do in a shader.
   gl_Position = u_viewProjection * local_point;
} 
```

我不确定这是否有意义，但这里有更复杂但[工作示例](https://www.khronos.org/registry/webgl/sdk/demos/google/particles/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:17:55.237

> 我可以为任何大于一定大小的点绘制网格，但使用 gl_point 吗？

不在 WebGL 中。

您可以将粒子系统绘制为一系列四边形（即：两个三角形）。但仅此而已。

# php - 没有缓存头的 Laravel 重定向

> ID：15371943
> 
> 赞同：2
> 
> 时间：2013-03-12T20:55:02.617
> 
> 标签：php, laravel, http, redirect, laravel-3

我正在使用 Laravel 3，除了 through 之外，如何设置标题并不明显`Response::make()`。

我正在做这样的重定向：

```
return Redirect::to('admin/check'); 
```

我想`no-cache`为重定向设置一个额外的标头，如下所示：

```
"Cache-Control: no-store, no-cache, must-revalidate" 
```

我意识到我可以直接在 PHP 中执行此操作，但是有没有办法通过 Laravel 设置响应标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:28:25.793

当你调用时，`Redirect::to()`Laravel 会实例化一个 Response 具有 302 状态和 Location 头的对象。然后，该 Response 对象由控制器返回并呈现为正确的 HTTP 响应，因此，在控制器时，您仍然可以更改其标头。

更准确地说`class Redirect extends Response`。看看[这里](http://laravel.com/api/source-class-Laravel.Redirect.html#44) 你可以通过简单地使用来实现：

```
return Redirect::to('admin/check')
    ->header('Cache-Control', 'no-store, no-cache, must-revalidate'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-19T08:21:44.457

恐怕，公认的答案是错误的和误导性的！

无论您使用什么语言或框架，都无法重定向到设置了自定义标题的页面。换句话说，没有办法触发 HTTP 重定向并导致客户端（浏览器）添加自定义标头。

您可能会认为这段代码应该可以正常工作：

```
return Redirect::to('admin/check')
    ->header('Cache-Control', 'no-store, no-cache, must-revalidate'); 
```

但它不会。您正在为指示浏览器重定向的响应设置自定义标头，而不是为重定向本身。

站点指示浏览器发出带有自定义标头的 HTTP 请求的唯一方法是使用 Javascript 和`XMLHttpRequest`对象。它需要在目标服务器上实现 CORS 以允许此类 ajax 请求。

请注意，页面不能设置 HTTP 请求标头，除非它使用`XMLHttpRequest`. 这意味着您也不能在客户端使用自定义标头进行此类重定向。

这不是网络的工作方式。

# three.js - MacBook Pro 触控板滚动功能的 TrackballControls.js 问题

> ID：15371944
> 
> 赞同：3
> 
> 时间：2013-03-12T20:55:02.600
> 
> 标签：three.js

在特定情况下无法控制的摄像机移动。我正在使用鼠标滚轮来控制缩放（非常标准）。Macbook 触控板滚动可通过两根手指接触和平行垂直移动来实现。当您的手指分开时，我还没有尝试过缩放功能。无论用户的手指移动多远，使用触控板上的滚动功能都可以“无限”缩小场景。

这是细分：

*   使用 Three.js > TrackballControls.js

*   Three.js 的版本似乎无关紧要。

*   浏览器似乎略有不同。Chrome 中的问题更加严重，Firefox 中更稳定，但仍然存在。

*   灵敏度并没有太大的区别。下面的两个示例都使用不同的 ZoomSpeed 常量。

可以看到问题的示例（当然需要 Macbook）：

*   [我目前的项目](http://talbot.frisbeebiotech.com/atlas_webgl.html)

*   [TrackballControls.js 示例页面](http://mrdoob.github.com/three.js/examples/misc_controls_trackball.html)

感谢您的时间！

**添加了编辑 23:00EDT 12/3/13 以指定问题：**

抱歉我没有具体说明。MacBook 触控板的滚动功能可能会被意外或故意使用，从而在用户每次访问时使网站无法使用。刷新是重置问题的唯一方法。解决这个问题的最佳方法是什么？检测操作系统并禁用滚动是一种选择，但也是一种荒谬的选择。对于任何使用 TrackballControls.js 的网站来说，这都是一个可访问性问题。其他开发人员如何解决这个问题？有任何想法吗？那是我的问题。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:02:20.727

我遇到了同样的问题。更改 TrackballControl.js 鼠标滚轮事件处理程序中的最后一行代码：

```
_zoomStart.y += ( 1 / delta ) * 0.05; 
```

对此：

```
_zoomStart.y += delta * 0.01; 
```

如果你的触控板和我的一样，它会多次触发鼠标滚轮事件，但增量会更小。由于鼠标滚轮增量被反转，较小的增量变成了较大的增量，并且由于它们的数量更多，因此缩放的调整幅度更大。我不确定为什么它在原始代码中会像这样反转。

# sql - 使用 column 与另一列 oracle 一起评估

> ID：15371945
> 
> 赞同：1
> 
> 时间：2013-03-12T20:55:14.307
> 
> 标签：sql, oracle, math

我有一个包含 3 个字段的表：

字段 1 (NUMBER)：具有如下值：1, 2,50 ,40

字段 2 (VARCHAR)：具有如下值：“+”、“-”、“*”

字段 3（数字）：如字段 1：5,65.4, 90

我如何评价这个领域的内容 2.

例子

```
|field1| field2| field3| RESULT
-------------------------------
|     1|      +|      5|  6
|     1|      *|      5|  5
|     1|      -|      5| -4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:11:40.403

我不知道`EXECUTE IMMEDIATE`PL/SQL 之外的任何 EVAL 类型功能，并且一次仅限于一个语句。您无法构建将添加一行、乘以另一行并减去另一行的东西，但您可以创建一个游标，循环遍历它，并构建一个`EXECUTE IMMEDIATE`以评估每个游标行上的值。如果您正在考虑比具有两个操作数的简单数学更复杂的操作，请务必考虑一下。

下面的查询将按照您的要求执行，但是如果您要执行比两列之间的操作更复杂的操作，它很快就会变得很麻烦：

```
SELECT
  CASE field2
    WHEN '+' THEN field1 + field3
    WHEN '*' THEN field1 * field3
    WHEN '-' THEN field1 - field3
  END
FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T07:26:04.257

正如 Annjawn 在[此答案](https://stackoverflow.com/a/13808867/458741)中解释的那样，您可以使用 的一些内置功能[`XMLQuery`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions249.htm#SQLRF06209)，特别`.getnumberval()`是伪造公式。这将比 CASE 语句慢得多，但它更干净。

假设表：

```
create table tmp_test (
   field1 number not null
 , field2 varchar2(1) not null
 , field3 number not null );

insert all
  into tmp_test values (1, '+', 5)
  into tmp_test values (1, '*', 5)
  into tmp_test values (1, '-', 5)
select * from dual; 
```

您的查询将如下所示：

```
SQL> select xmlquery(field1 || field2 || field3 returning content
  2                   ).getnumberval() as field4
  3    from tmp_test;

    FIELD4
----------
         6
         5
        -4 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!4/74759/2)

我*强烈*建议不要在数据库中存储计算列。它只会导致问题，就好像您更新了您的列没有更新的数据库一样。执行此操作的正确方法是拥有一个包含计算定义的视图并始终从该视图中选择，或者使用[创建表文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#SQLRF01402)中定义的[VIRTUAL 列](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)。

然后，您可以使用`XMLQuery`或[DETERMINISTIC 函数](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_function.htm#LNPLS01370)（例如[APC 提供的](https://stackoverflow.com/a/15377691/458741)函数）来自动计算您的列。

如果您的表创建如下：

```
create table tmp_test (
   field1 number not null
 , field2 varchar2(1) not null
 , field3 number not null
 , field4 number generated always as (
           xmlquery(field1 || field2 || field3 returning content
                 ).getnumberval()
           ) virtual
    ); 
```

然后一个更简单的查询将得到你的结果

```
SQL> select * from tmp_test;

    FIELD1 F     FIELD3     FIELD4
---------- - ---------- ----------
         1 +          5          6
         1 *          5          5
         1 -          5         -4 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!4/6d4cd/1)

这样做的另一个好处是您的计算*始终*以完全相同的方式完成。对于需要此计算列的每个单独的代码，它们的实现方式不同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T05:26:20.163

你可以建立一个评估函数

```
create or replace function eval 
   ( n1 in number
     , n2 in number
     , op in varchar2 )
return number deterministic
as
   result number;
begin
   execute immediate ' select :1 '|| op || ' : 2 from dual'
      into result
      using n1, n2;
    return result;
end;
/ 
```

然后您可以在 SELECT 语句中调用它：

```
select eval ( field1, field3, field2) as result 
from your_table; 
```

这将处理简单的算术，但它不是更复杂的公式的好方法。如果你想走这条路，我建议你点击我对另一个关于在 PL/SQL 中做数学的问题的回答中的链接。 [了解更多](https://stackoverflow.com/a/14729740/146325)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T21:11:31.540

```
SELECT
  field1,
  field2,
  field3,
  Case
   When field2='+' then field1+field3
   When field2='*' then field1*field3
   When field2='-' then field3-field1
   else 0
  end as Result
FROM table 
```

（[http://www.techonthenet.com/oracle/functions/case.php](http://www.techonthenet.com/oracle/functions/case.php)）

# android - HTML 映射死区

> ID：15371947
> 
> 赞同：0
> 
> 时间：2013-03-12T20:55:21.117
> 
> 标签：android, html, map, coordinates

我正在为博物馆展览的 android 平板电脑制作 html 地图。我们使用展览的图片作为地图的基础，并使用矩形坐标作为对象。当您单击一个对象时，您会被带到一个页面，其中包含有关该对象的更多信息。

但是，当您单击没有定义坐标的地图部分时，它会说找不到网页。我想做到这一点，以便地图的唯一响应部分是具有定义坐标的对象。

如何使地图中的死区无法点击和/或不会离开主页？帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:03:57.680

假设您使用的是客户端图像映射，您可以像这样设置默认值...

```
<map name="mymap">
  <area shape="rect" coords="91,30 186,98" href="/hit-the-box/" alt="the box">
  <area shape="default" href="/default/url/">
</map> 
```

# grails - GORM如何保证相关对象属性的唯一性

> ID：15371949
> 
> 赞同：0
> 
> 时间：2013-03-12T20:55:37.210
> 
> 标签：grails, grails-orm, unique, one-to-many

我试图了解 GORM 和关系映射。关系运作良好，但有一个问题。我似乎无法确保每个`MailAddress`添加到`MailingList`的地址都有唯一的地址。什么是必须有效的方法来做到这一点？

**注意：**上没有唯一约束`MailAddress.address`。相同的地址可以存在于同一个表中。

```
class MailAddress {

    String name
    String email

    static belongsTo = MailingList

    static constraints = {
        name blank:true
        email email:true, blank:false
    }
}

class MailingList {

    String name

    static hasMany = [addresses:MailAddress]

    static mapping = {
        addresses cascade: 'all-delete-orphan'
    }

    static constraints = {
        name blank:false
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:42:53.667

正如@ibaralf 在评论中提到的，答案是自定义验证器。该类`MailingList`需要验证所有地址 ( `MailAddress`) 是否具有唯一的电子邮件地址。

我将此约束添加到`MailingList`类中并且它起作用了。

```
static constraints = {
    name blank:false

    addresses(validator: {

        if (!it) {
            // validates to TRUE if the collection is empty
            // prevents NULL exception
            return true
        }

        // Grab a collection with all e-mailaddresses in the list
        def addressCollection = it*.email
        // Compare to a collection with only unique addresses
        return addressCollection == addressCollection.unique()
    })
} 
```

更多信息可以在这里找到[http://grails.org/doc/2.2.0/ref/Constraints/validator.html](http://grails.org/doc/2.2.0/ref/Constraints/validator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:00:21.530

您可以添加一个唯一约束：

```
static constraints = {
    name blank:true
    email email:true, blank:false, unique: true
} 
```

=> 将唯一约束放在 email 变量上（**unique: true**）。这将防止将相同的电子邮件地址保存在表中。

# php - 如何进行部分单词匹配的多列mysql全文搜索

> ID：15371951
> 
> 赞同：10
> 
> 时间：2013-03-12T20:55:39.753
> 
> 标签：php, mysql, sql, full-text-search

我目前有一个使用此代码搜索多个列的搜索字段：

```
$searchArray = explode(" ", $searchVal);
$query="SELECT * FROM users WHERE ";
$i=0;
foreach ($searchArray as $word) {
    if ($i != 0) $query .= " OR ";
    $query .= " MATCH (`first_name`, `last_name`, `email`) AGAINST ('".$word."*'  IN BOOLEAN MODE)";
    $i++;
} 
```

假设我在表中有这两行：

```
id | last_name | first_name | email
1  | Smith     | John       | john_smith@js.com
2  | Smith     | Bob        | bob_smith@js.com 
```

如果我输入“John S”，则只有第一个结果会显示所需的行为。

如果我输入“John Smith”，则只有第一个结果会显示所需的行为。

如果我键入“Smith J”，即使 Bob 不匹配，两个结果都会显示。

如果我键入“Smith John”，即使 Bob 不匹配，两个结果都会显示。

最后，如果我键入“Jo S”，尽管“Jo”和“S”部分匹配，但不会返回任何结果。

谁能帮我修复我的查询以处理不重要且部分结果匹配的订单所需功能？如果它可以按最佳匹配（即单词的最长部分，仅从第一个字母开始，而不是中间的部分，列数最多）进行排序，那也将是一个巨大的帮助。

**更新：**

只是想发布基于解决方案的最终代码。我的循环创建多个匹配语句不正确，我的 ft_min_word_len 也是如此。

我的代码现在是：

```
$searchArray = explode(" ", $searchVal);
$query="SELECT * FROM users WHERE  MATCH (`first_name`, `last_name`, `email`) AGAINST ('";
$i=0;
foreach ($searchArray as $word) {
    $query .= "+".$word."* ";
}
$query .= "' IN BOOLEAN MODE)"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T21:05:10.097

在布尔模式下，要求字符串存在（而不是仅仅得分更高），使用`+`. 前缀匹配以结尾完成`*`。这似乎是你想要的，所以搜索：

```
+John* +S*
+John* +Smith*
+Smith* +J*
+Jo* +S* 
```

请注意，全文索引无法帮助您搜索“单词中的任何位置”。所以类似的东西`*mith*`肯定会失败：它们应该从索引中的字符 1 开始匹配。

如果您还想按匹配值对它们进行排序，例如需要`John Smith` *before* `Johnny Smithson`，您可以这样做：

```
 SELECT * FROM user 
 WHERE MATCH(..fields..) AGAINST ('match' IN BOOLEAN MODE)
 ORDER BY MATCH(..fields..) AGAINST ('match' IN BOOLEAN MODE) DESC; 
```

`ft_min_word_len`除非您再次单独添加所有单词 >=，否则您将看到的将一事无成：

```
+John* +S* John
+John* +Smith* John Smith
+Smith* +J* Smith
+Jo* +S* 
```

对于最后一个，两者都是 < 默认的 4 个字符，因此我们无法在默认 mysql 中为其添加排序参数，但您可以根据`ft_min_world_len`需要进行不同的设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T21:04:24.020

`IN BOOLEAN MODE`您可以使用`+`-modifier 强制`AND`或`-`-modifier 强制`NOT`。没有运算符，您的情况，意味着可选。

并且你需要检查你的mysql配置中的最小字长，使FULLTEXT INDEX索引字小于一定长度。

我不得不设置

```
ft_min_word_len = 2 
```

在 my.cnf 中，必须重建索引才能使其生效。默认情况下为 3。

要找出你的 min_word_len 检查（并投票）[这个问题](https://stackoverflow.com/questions/5716362/how-can-i-get-the-value-of-mysqls-ft-min-word-len-configuration-variable-usin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T21:09:05.100

见[http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

您可以在单词前放置“+”、“-”或无运算符，以使其搜索“AND 包含此单词”、“NOT 包含此单词”和“没有运算符”为“OR 包含此单词”

> 如果我输入“John S”，则只有第一个结果会显示所需的行为。

只有一个约翰，所以这是可行的，S 低于最小字长并被丢弃

> 如果我输入“John Smith”，则只有第一个结果会显示所需的行为。

只有一个约翰所以这行得通

> 如果我键入“Smith J”，即使 Bob 不匹配，两个结果都会显示。

J 低于最小字长，所以它唯一匹配的 smith 是两行

> 如果我键入“Smith John”，即使 Bob 不匹配，两个结果都会显示。

由于您处于 BOOLEAN MODE MySQL 将其解释为 Smith OR John... Smith 两者都匹配。

> 最后，如果我键入“Jo S”，尽管“Jo”和“S”部分匹配，但不会返回任何结果。

Jo 和 S 低于最小字长 - 我相信 MySQL 将其视为无搜索

您需要在搜索参数之前添加一个“+”以将它们转换为 AND 搜索...`+Smith +John`

# memory - 内存映射 I/O 与端口映射 I/O

> ID：15371953
> 
> 赞同：8
> 
> 时间：2013-03-12T20:55:47.507
> 
> 标签：memory, assembly, architecture, io, cpu

内存映射 I/O 是一种允许使用中央内存 (RAM) 与外围设备通信的技术。端口映射 I/O 使用端口（带有特殊的汇编指令）通过数字端口进行通信。

一种方法相对于另一种方法的优势是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T21:17:39.460

正如克苏鲁所说，

*   内存映射 I/O 允许写入/读取 I/O 设备端口，就像读取/写入普通内存一样（使用相同的机器代码/asm）

但有一个缺点：

*   您为内存映射的 I/O 设备耗尽了物理内存地址空间（想想 32 位 Windows 无法访问 PC 上的所有 4G RAM）

因此，使用端口映射 I/O 方法的一个优点是您有一个单独的 I/O 设备地址空间，您可以使用整个内存寻址范围来访问内存。

编辑：这是您问题的更完整答案：[硬件端口到内存地址](https://stackoverflow.com/questions/4333849/what-real-platforms-map-hardware-ports-to-memory-addresses?rq=1)

# wso2 - 集成 WSO2 API 管理器和 WSO2 BAM 分析

> ID：15371956
> 
> 赞同：2
> 
> 时间：2013-03-12T20:55:53.603
> 
> 标签：wso2, wso2bam, api-manager

我们发现了 WSO2 API Manager 1.3 的一个主要问题，它集成到 WSO2 BAM 2.0.1 分析产品中，我想知道是否有人解决了这个问题？

细节

在尝试将 API 数据记录到 BAM 服务器的 100 次调用之后，所有进一步的调用都将失败，并且在某些情况下，这也会停止 API Manager 服务器的服务 API 请求。

问题出现在 DataPublisher.java 类中，该类从一个信号量获取许可，然后在错误的信号量上释放许可。

在[https://wso2.org/jira/browse/APIMANAGER-992的 JIRA 问题中提到](https://wso2.org/jira/browse/APIMANAGER-992)

这显然是我们使用 API Manager 的一个障碍，因为我们不能再向客户展示任何 API 分析 - 希望那里有人遇到类似的问题并且手指交叉解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:59:29.593

我们对 API Manager 的数据发布器进行了一些重大改进。这些修复将包含在 1.4.0 版本中，该版本将于 4 月底准备就绪。

我们计划从本周开始推送预览版。我不确定现在是否已解决上述问题。但是，我们已将此作为 1.4.0 版本的阻止程序。因此，如果现在不修复，它将很快被占用。我们将随着进展更新 JIRA 问题。

# css - 主题主页上幻灯片的CSS标签？

> ID：15371963
> 
> 赞同：0
> 
> 时间：2013-03-12T20:56:30.907
> 
> 标签：css

我正在尝试在[主题](http://themeforest.net/item/newcastle-a-woocommerce-powered-wordpress-theme/full_screen_preview/3887883)上向下移动幻灯片，但无法识别 CSS 标签，当我键入以下 css 时，它会推送图像而不是实际的幻灯片位置：

```
.newcastle-carousel img {
margin-top: 100px;
} 
```

希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:59:18.203

你很接近......将边距添加到父div，而不仅仅是`img`......

```
.newcastle-carousel-wrapper{
  margin-top: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:59:19.007

```
.newcastle-carousel-wrapper {
    margin-top: 100px;
} 
```

# objective-c - 在用户移动 NSWindows 时将其捕捉到位

> ID：15371973
> 
> 赞同：3
> 
> 时间：2013-03-12T20:57:11.250
> 
> 标签：objective-c, cocoa, nswindow

`NSWindow`在用户移动某个位置时将其捕捉到某个位置的最佳方式是什么？

我已经尝试使用`windowDidMove`, 来处理鼠标按下事件，但是每次移动都会调用这个函数。我找不到任何与旧`kEventWindowBoundsChanging`的 with等效的东西`kWindowBoundsChangeUserDrag`，而这正是执行此操作所需要的。它需要随时可用`10.7`。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:53:29.050

通常，最简单的方法是继承 NSWindow 并实现`-setFrame:`，在其中修改`NSRect`参数，然后将其传递给`super`.

# php - 我的 PHP/MySQL 语法错误在哪里？

> ID：15371984
> 
> 赞同：1
> 
> 时间：2013-03-12T20:58:03.433
> 
> 标签：php, mysql, syntax-error

我可能只是看这个太久了，但我没有看到错误。任何帮助，将不胜感激。

错误：

> [INSERT INTO 'PlayerSats' (username,character,FirstPlay) VALUES ('WaxyChicken','20','FALS')] 发生错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''PlayerSats' (username,character,FirstPlay) VALUES ('WaxyChicken','20','FALS')' 附近使用正确的语法

请注意，“PlayerSats”不是拼写错误，并且大写正确。

编码：

```
if ($Funct == "SETFIRSTPLAY") {
    $sql = "INSERT INTO $PlayerStats (username,character,FirstPlay) VALUES ('$username','$Char','FALS')";
    mysql_query($sql) or die("Error occurred in [$sql]: " . mysql_error());
    echo "SUCCESS";
} 
```

表结构：

```
CREATE table PlayerStats (
    ID int(10) unsigned not null auto_increment,
    username char(20) not null default '' utf8_general_ci,
    character char(2) not null default '00' utf8_general_ci,
    invLand char(115) not null default '000:99' utf8_general_ci,
    FirstPlay char(4) not null default 'true' utf8_general_ci,
    Bank int(20) unsigned not null default 2000
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:59:48.587

您`$`在 PlayerStats 前面有一个。尝试：

```
$sql = "INSERT INTO PlayerStats (username,character,FirstPlay) VALUES ('$username','$Char','FALS')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:00:05.810

表名不能用引号引起来。应该只是

```
INSERT INTO PlayerSats (username,character,FirstPlay) VALUES ('WaxyChicken','20','FALS') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T21:20:14.193

您的列“字符”是 MySQL 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)...您需要通过将其括在反引号中来转义或使用另一个列名

```
$sql = "INSERT INTO $PlayerStats (username,`character`,FirstPlay) VALUES ('$username','$Char','FALS')"; 
```

# git - 使用 TeamCIty 在 Heroku 上 Git 推送部署随机失败

> ID：15371987
> 
> 赞同：0
> 
> 时间：2013-03-12T20:58:16.250
> 
> 标签：git, heroku, teamcity, gruntjs

当使用我们的节点应用程序从外部 CI 服务器 (TeamCity) 推送时，我们看到 git 推送失败。它偶尔会发生一次（每 10 个构建中大约有 1 个），我无法确定是什么原因造成的。我在构建中添加了一个“失败时重试”步骤，它总是在第二次尝试时工作。

如果我更改 TeamCity 以对每个构建进行新的检查，它永远不会出错，但构建时间会增加一倍以上。

仅供参考，构建过程会进行检查，执行 grunt 构建，然后在本地提交构建，以便将构建的代码推送到 Heroku。我正在做一个应该涵盖这种情况的强制推送：

git push -f git@heroku.com:myapp.git trunk:master

这是从 Heroku 返回的日志摘录：

```
[[08:27:37][Step 7/7] Dependencies installed
[08:27:37][Step 7/7] -----> Building runtime environment
[08:27:37][Step 7/7] -----> Discovering process types
[08:27:37][Step 7/7] Procfile declares types -> web
[08:27:42][Step 7/7] 
[08:27:42][Step 7/7] ! Heroku push rejected due to an unrecognized error.
[08:27:42][Step 7/7] ! We've been notified, see http://support.heroku.com if the problem persists.
[08:27:42][Step 7/7] 
[08:27:42][Step 7/7] 
[08:27:42][Step 7/7] To git@heroku.com:devgrade.git
[08:27:42][Step 7/7] ! [remote rejected] trunk -> master (pre-receive hook declined)
[08:27:42][Step 7/7] error: failed to push some refs to 'git@heroku.com:myapp.git'
[08:27:42][Step 7/7] Process exited with code 1
[08:27:42][Step 7/7] Step Push to Heroku (Command Line) failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:30:45.653

通过使用 Heroku Push 推送绕过 Git 管道，您可能会获得更多运气：[https ://github.com/ddollar/heroku-push](https://github.com/ddollar/heroku-push)

# c++ - 错误 C2101: '&' 常量

> ID：15371989
> 
> 赞同：0
> 
> 时间：2013-03-12T20:58:26.270
> 
> 标签：c++, visual-studio-2010, map, reference, assign

我有以下代码：

```
std::map<size_t,Cell&> m_cellMap; 
```

当 Cell 定义如下：

```
class Cell
    {
      public:
        Cell(int x = 0,int y = 0) : m_x(x),m_y(y) { }
      private:
        int m_x;
        int m_y;
        /// class members and methods
    }; 
```

我无法编译以下代码：

```
Cell c;
m_cellMap[0] = c; 
```

得到错误：出了`error C2101: '&' on constant` 什么问题？如何解决？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T21:00:30.590

不能在标准容器中保存引用，请改用指针：

```
std::map<size_t,Cell*> m_cellMap;

Cell c;
m_cellMap[0] = &c; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T21:00:30.163

您不能`std::map`对引用进行引用。引用不具有`std::map`映射到的值必须具有的属性。

尝试创建一个`std::map<size_t, Cell*>`, 并做`m_cellMap[0] = &c;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T21:14:59.540

如果您不想处理原始指针（并且您真的不想），那么您可以使用`std::reference_wrapper`。

```
std::map<size_t,std::reference_wrapper<Cell>> m_cellMap; 
```

如果你这样做，那么你需要避免使用`[]`操作符。

执行以下操作以插入地图。

```
m_cellMap.insert(std::make_pair(0, c)); 
```

如果您使用指针而不是引用，那么您需要管理`Cell`您创建的对象的生命周期。

# php - 使用星号 queue_log 表或 AMI 检索/制作星号队列的统计信息

> ID：15371991
> 
> 赞同：2
> 
> 时间：2013-03-12T20:58:37.453
> 
> 标签：php, asterisk, asteriskami

使用 PHP 星号管理器界面，我可以通过发出 QueueStatusAction 来查询星号以获取当前队列状态。这为我提供了有用的统计数据，例如：

1.  保持时间
2.  已放弃通话
3.  通话完成
4.  平均通话时间。

据我了解，这些统计信息仅针对服务器上星号进程的生命周期计算，并且一旦进程停止就会丢失。

在我的应用程序中，我想显示关于最近 {day|week|month|year} 队列的上述统计信息。有没有办法通过星号管理器接口或在其之上的一些抽象来检索历史静态数据，还是由我来编写一种方法来从星号 queue_log 表中的数据中生成这些统计数据？

如果有人这样做或对如何解决这个问题有一些想法，请分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:37:42.040

你走错路了。

Asterisk 是 PBX 软件。它不负责保存/记录/管理有关队列的信息。它并非旨在将有关队列的信息存储在星号内，而是提供以下方式：

1.  通过管理器 API 的代理登录/注销/呼叫等事件
2.  事件记录在 /var/log/asterisk/queue_log
3.  同 2，但 queue_log 在数据库中（推荐方式）。看到这个：

    *   [http://www.voip-info.org/wiki/view/Asterisk+queue_log+on+MySQL](http://www.voip-info.org/wiki/view/Asterisk+queue_log+on+MySQL)
    *   [http://www.asteriskdocs.org/en/3rd_Edition/asterisk-book-html-chunk/ACD_id289009.html](http://www.asteriskdocs.org/en/3rd_Edition/asterisk-book-html-chunk/ACD_id289009.html)

放置数据后，您可以使用 SQL 查询语言创建您需要的报告。实际上，对于任何具有 sql 技能的人来说，它都是简单的 SQL。

例如要获得保持时间，您需要选择所有带有您的队列号和事件 CONNECT 的事件，它提供等待时间。对于通话时间，您需要检查 CONNECT 并检查具有相同唯一 ID 的下一个事件 COMPLETECALLER/COMPLETEAGENT。

如果由于某种原因您对 sql 不太满意，您可以检查一些开源项目，例如 Asternic Call Center Stats 或其他（通过队列管理/报告谷歌）并检查它使用的 SQL 或雇用某人来完成您的 sql 部分。

# ios - 在没有 prepareForSegue 的情况下推送到另一个视图控制器

> ID：15371995
> 
> 赞同：11
> 
> 时间：2013-03-12T20:58:52.370
> 
> 标签：ios, objective-c, uiviewcontroller, uistoryboardsegue, pushviewcontroller

你怎么能在没有 的情况下推送到另一个视图控制器`prepareForSegue`？

```
myClassVC *viewController = [myClassVC alloc];
UIStoryboardSegue *segue = [[UIStoryboardSegue alloc] initWithIdentifier:@"pushToMyVC" source:self destination:viewController];

if ([segue.identifier isEqualToString:@"pushToMyVC"]) {
 NSLog(@"logging");
 myClassVC *viewController = (myClassVC *)[segue destinationViewController];
 [self presentViewController:viewController animated:YES completion:nil];        
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-12T21:11:51.977

如果您想以编程方式调用推送转场，请在 Interface Builder 中为转场提供“故事板 ID”，然后您可以：

```
[self performSegueWithIdentifier:"pushToMyVC" sender:self]; 
```

或者，如果您不想执行转场，您可以实例化目标视图控制器，然后手动推送到该视图控制器。您需要做的就是确保目标视图控制器在 Interface Builder 中有自己的“故事板 ID”，然后您可以：

```
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"DestinationController"];
[self.navigationController pushViewController:controller animated:YES]; 
```

你说“推”（因此我在`pushViewController`上面使用）。如果你真的想“呈现一个模态视图控制器”，那么第二行是：

```
[self presentViewController:controller animated:YES completion:nil]; 
```

如您所见，您不必*使用*推`prepareForSegue`送到新场景。仅`prepareForSegue`当您想将信息传递给目标视图控制器时才使用。否则不需要。

显然，如果您不使用情节提要（例如，您使用的是 NIB），那么过程就完全不同了。但我假设您没有使用 NIB，因为`prepareForSegue`它不适用于该环境。但是，如果您使用的是 NIB，则如下所示：

```
SecondViewController *controller = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
[self.navigationController pushViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T21:04:28.637

`[self presentViewController:viewController animated:YES completion:nil];`不需要，因为 segue 将使用您自动选择的转换推送目标视图控制器。

如果您不想使用该`segue`过程，则需要手动推送视图控制器：

`[self presentViewController:viewController animated:YES completion:nil];`

但请确保首先删除情节提要中的转场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T06:09:35.200

```
 NSString * storyboardName = @"Main";
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:storyboardName bundle: nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewControllerID"];
    [self presentViewController:vc animated:YES completion:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-16T12:48:06.183

在我的例子中，所有的 viewControllers 都是动态构建的。我没有为此目的使用故事板。如果这是您的情况，您可以只实例化您想要打开的 viewController 类并进行推送，如下面的示例所示：

```
MyViewController* myViewController = [[MyViewController alloc] init];
[self.navigationController pushViewController:myViewController animated:YES]; 
```