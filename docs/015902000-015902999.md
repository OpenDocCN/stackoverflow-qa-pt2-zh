# StackOverflow 问答 15902000-15902999

# javascript - 使用javascript在primefaces日历上动态设置默认日期

> ID：15902004
> 
> 赞同：2
> 
> 时间：2013-04-09T12:32:31.083
> 
> 标签：javascript, jsf, primefaces, jsf-2

我需要为`p:calendar`另一个日历中给定的选定日期设置建议日期。我可以通过解析 DOM 来获取要设置的日期的字符串表示形式，所以那里没有问题。我尝试对组件使用*客户端 API*，因为首选方法是在选择日历时执行此操作：

**客户端 API 方法**（如 primefaces 文档中所述）：

> *setDate(date)：*要显示的日期（设置显示日期）

**日历组件：**

```
<p:calendar value="#{someVar.startDate}"
            locale="en_GB"
            navigator="true"
            id="startDate"
            showOtherMonths="true"
            size="11"
            pattern="yyyy-MM-dd"
            pages="4"
            widgetVar="startDateCalendar"
            onclick="startDateCalendar.setDate(new Date(2012, 9, 9));"/> 
```

这不会影响任何事情，即使函数正在执行。我已经调试过了。

是否可以使用 javascript 设置默认日期`p:calendar`？理想情况下，它应该作为`pagedate`组件的属性，即它只是为日历预填充的建议日期，而不是预填充实际值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T13:18:13.587

在 bean 中设置默认日期。

```
private Date date = new Date(); // define your start date here

public Date getDate() {
    return date;
}

public Date setDate(final Date newDate) {
    this.date = newDate;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-16T13:56:19.793

尝试`onclick="PF('calendar_widget_name').setDate(new Date(2012, 9, 9));"`

# c# - 编组数据类型问题

> ID：15902007
> 
> 赞同：0
> 
> 时间：2013-04-09T12:32:39.580
> 
> 标签：c#

下面是我试图从 c++ 转换为 c# 的代码

```
struct PSB {
   short    type_of_psb;
   short    call_dependent;
   int32    del_psb_status;
   uint32   seq_number[2];
   int32    uma_psb_status;
   short    psb_reserved[6];
} 
```

以前，我写了下面的结构。

```
 [StructLayout(LayoutKind.Explicit)]
        public struct PSB
        {
            [FieldOffset(0)]
            public short type_of_psb;
            [FieldOffset(2)]
            public short call_dependent;
            [FieldOffset(4)]
            public int del_psb_status;
            [FieldOffset(8)]
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
            public uint32 seq_number; // Here is the problem
            [FieldOffset(16)]
            public int uma_psb_status;
            [FieldOffset(20)]
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)]
            public short[] psb_reserved;
        } 
```

但上面的 c# 代码不起作用，问题出在成员**seq_number**

所以我把它改成了

`public ulong seq_number`从`uint seq_number`，我删除了上述 marshalas 属性。

现在它正在使用遗留代码。我不知道为什么？如果我将 like 定义为 array 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:44:55.773

您的 C++ 结构和`MarshalAs`属性都将类型列为数组，但您的 C# 结构仅声明了一个数字。我不确定您到底遇到了什么错误，但看起来您正试图将两个数字的数组转换为一个数字，这显然会导致一些问题。

尝试`MarshalAs`在您发布的结构中保持属性原样并简单地替换`public uint32 seq_number;`为`public uint32[] seq_number;`.

# c# - OLEDB 不返回 excel 文件的第一行

> ID：15902015
> 
> 赞同：10
> 
> 时间：2013-04-09T12:33:17.993
> 
> 标签：c#, oledb

我正在使用 Microsoft.ACE.OLEDB.12.0 连接到 Microsoft excel 文件并从中获取数据。我使用 Visual Studio 2012 用 C# 语言编写代码。这是我的代码：

```
public DataTable getData(string fileName, string sheetName)
{
    connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" 
                      + fileName
                      + "';Extended Properties= 'Excel 8.0;HDR=Yes;IMEX=1'";

    errorCode = ErrorDefinition.ERROR_NOERROR;
    errorMessage = "";
    DataTable dt = new DataTable();            
    try
    {
            string query = "SELECT * FROM [" + sheetName + "]";
            OleDbConnection con = new OleDbConnection(connectionString);
            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, con);
            dataAdapter.Fill(dt);
    }
    catch (Exception exp)
    {
            errorCode = ErrorDefinition.ERROR_OLEDBERROR;
            errorMessage = exp.Message;
    }
    return dt;
} 
```

问题是`dt`文件中不包含指定工作表的第一行。它出什么问题了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T12:39:27.563

在您的连接字符串中，您使用设置`"HDR=YES"`，这意味着 OleDb 将 Excel 文件中的第一行视为包含当前工作表表示的表的字段名称的行。

Using`"HDR=NO"`向 OleDb 指示第一行包含数据，并且列名是自动命名的，在进行中。如“F1”、“F2”、“F3”等......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T12:34:57.057

尝试`HDR=NO`连接字符串

# asp.net - 日期问题的 C# 格式

> ID：15902017
> 
> 赞同：0
> 
> 时间：2013-04-09T12:33:23.683
> 
> 标签：asp.net

**我的问题：**我需要将日期格式设置为“mm/dd/yyyy”

**设想：**

我已将 DateBirth 声明为可为空的 DateTime。

我使用时得到的价值：

```
AdvancedObj.DateBirth .Value.ToString() 
```

是：**“13/03/2013 00:00:00”**

我使用时得到的价值

```
AdvancedObj.DateBirth .Value.ToString(CultureInfo.InvariantCulture) 
```

is : **"03/13/2013 00:00:00"** //这大致正确，但我不需要 00:00:00

我也试过这个，但是格式正确，值不正确。

```
AdvancedObj.DateBirth.Value.ToString("dd/mm/yyyy",CultureInfo.GetCultureInfo("en-Us"))

 **"13/00/2013"** 
```

谁能指出我，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:35:06.327

使用正确的格式字符串数月 - 它是`MM`. `mm`是分钟：

```
AdvancedObj.DateBirth.Value.ToString("MM/dd/yyyy",CultureInfo.InvariantCulture) 
```

此外，请按上述正确订购它们 - 如果您想要几天前`MM/dd/yyyy`的几个月，请使用 ，如果相反，请使用`dd/MM/yyyy`。

我建议您仔细阅读 MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:35:22.027

月份是'M'。'm' 是分钟。

```
"dd/MM/yyyy" 
```

# regex - 如何在 ADT Bundle for Linux 中打开正则表达式？

> ID：15902021
> 
> 赞同：1
> 
> 时间：2013-04-09T12:33:41.247
> 
> 标签：regex, eclipse, search

它似乎不起作用。我按了`Ctrl + F`，输入`^Log$`了，但什么也没找到，尽管我有一行 contains `Log`，仅此而已。为什么？我需要任何额外的插件吗？

我的 IDE 是 ADT Bundle for Linux（内部版本：v21.1.0-569685）。

![截屏](https://i.stack.imgur.com/NqHTt.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:44:58.437

尝试

```
^[ \t]*Log[ \t]*$ 
```

考虑字符串周围的潜在制表符和空格。

（顺便说一句，我不会使用`^\s*Log\s*$`，因为`\s`也匹配换行符）

# excel - OR函数总是让我绊倒

> ID：15902032
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:13.633
> 
> 标签：excel, excel-formula

这些年来我一直遇到这个问题！我似乎无法在 Excel 中使用 OR 函数。在我的模型中，单元格 E46 应包含有效的邮政编码或值“无”。不幸的是，我在 E46 中也遇到了“#value”，因此编写了以下公式来捕获此错误并在遇到时返回“None”：

```
=IF(OR(E46="None",ISERROR(E46)),"None",VLOOKUP(E46, List,2,FALSE)) 
```

麻烦的是，即使我认为我正在捕获它， 当contains时我仍然会`#value`被这个公式返回！`E46``#value`

所有的帮助文本都表明我已经正确地编写了公式——我看不出我做错了什么。任何有用的建议都非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:41:35.230

当其中可能存在错误时，您不能使用 OR（因为 OR 函数在这种情况下会给出错误 - 从 E46="None" 部分），请尝试首先使用嵌套的 IF 捕获错误，例如

`=IF(ISERROR(E46),"None",IF(E46="None",E46,VLOOKUP(E46, List,2,FALSE)))`

如果 E46 不在列表中，您仍然会收到错误......

如果您有 Excel 2007 或更高版本，则可以使用 IFERROR 之类的

`=IFERROR(IF(E46="None",E46,VLOOKUP(E46, List,2,FALSE)),"None")`

# java - 如何让我的 Jslider 适合我的 JPanel？

> ID：15902034
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:14.790
> 
> 标签：java, swing, jframe, jpanel, jslider

我正在编写一个小型应用程序并且遇到了很大的问题。我被困在为什么 JSlider 不允许我将它添加到 JPanel 上。当最后一行代码显示：

“添加。（滑块）；”

JSlider 覆盖了整个 JPanel。这是正确的，我需要以某种方式调整我的 JSlider 的大小吗？或者，我是否在代码上犯了错误，并且没有使 Jslider 在 Jpanel 中可见？

这是我的代码：

```
package atmosfile;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JSlider;

import java.awt.*;

public class Main extends JFrame {
private static final long serialVersionUID = 1L;

 public Main() {

     super("Package Choice");
     setSize(800, 600);
     setDefaultCloseOperation(EXIT_ON_CLOSE);
     setLocationRelativeTo(null);

       JPanel panel = new JPanel();

         panel.setLayout(new FlowLayout(1, 100, 500));
         panel.add(new JButton("Package 1"));
         panel.add(new JButton("Package 2"));
         panel.add(new JButton("Package 3"));
         add(panel);

       JSlider slider = new JSlider();   

         slider.setLayout(new FlowLayout(1, 100, 200));
         slider.setMajorTickSpacing(5);
         slider.setPaintTicks(true);
         slider.setSize(200, 200);
         slider.setVisible(true);
         panel.add(slider);

        }    
} 
```

提前感谢您提供的任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:35:51.063

您的水平间隙`FlowLayout`是如此之大，以至于它将组件“推”`JSlider`出框架的可绘制区域。减少它会使它再次出现。还建议避免使用幻数（1 = `FlowLayout.CENTER`）：

```
panel.setLayout(new FlowLayout(FlowLayout.CENTER, 50, 500)); 
```

# zend-framework2 - 如何从视图访问上传的文件

> ID：15902036
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:26.277
> 
> 标签：zend-framework2

所有上传的文件都存储在

```
__namespace__/src/__namespace/Controller/logos/file.jpg 
```

并且控制器文件在视图中仅返回文件名“file.jpg”。

那么如何在 IMG 标签中的视图中提供徽标文件夹的路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:45:48.703

这是您犯第一个“错误”的地方！**永远不要将用户数据存储在您的模块中！**

当您有用户为您的模块上传数据时，将它们存储在`/data/module-name/`! 这样您就可以通过以下方式轻松访问文件`src="../data/module-name/filename.jpg"`

或者，当您想为您的模块提供文件并能够使用它们时，有一个很棒的模块，[`AssetManager`](https://github.com/RWOverdijk/AssetManager)称为[`Assetic`](https://github.com/kriswallsmith/assetic).

# php - 比较两个爆炸的 php 数组以查找重叠的问题

> ID：15902037
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:32.500
> 
> 标签：php, arrays, codeigniter, explode, array-intersect

我正在比较两个爆炸字符串的结果（查询的结果），但是当我使用 array_intersect 查找数组的重叠时，不幸的是，我只收到了每个数组中首先出现的那些标签的重叠......所以例如，如果两个数组如下所示：

阵列1：

```
array(
  [0]=> tag_a
  [1]=> tag_b
) 
```

数组2：

```
array(
  [0]=> tag_a
  [1]=> tag_b
) 
```

Array_Intersect 仅返回**tag_a**作为匹配项。我预计 array_intersect 的行为会返回 tag_a 和 tab_b。

正如您稍后在我的代码中看到的那样，我使用匹配项（两个数组中都存在的标签）来构建数组**contactarray**。我可以构建数组，它只是不包含我期望的值（例如：tag_b）。

编辑我已经运行了几个测试打印contactarray并将各种标签字符串应用于这些联系人，并且只有具有tag_a的联系人（在数组中）被返回，即使其他几个联系人有tag_a，虽然它不是第一个数组。想法？

```
if ($frequency == 'Weekly')
{
  $data['query_tag'] = $this->db->get('tags');

  foreach ($data['query_tag']->result() as $row2)
  {
    $contact_tags = $row2->tags;
    $contact_tags_exploded = explode(",", $contact_tags);

    $rule_tags_exploded = explode(",", $rule_tags);
    $result = array_intersect($rule_tags_exploded, $contact_tags_exploded);

    if(isset($result) && count($result) != 0){
      $contactarray[] = $row2->contact_name;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:42:56.427

尝试 array_uintersect()

这里 $arr1 是你的第一个数组， $arr2 是第二个数组

```
$intersect = array_uintersect($arr1, $arr2, 'compareDeepValue');
print_r($intersect);

function compareDeepValue($val1, $val2)
{
   return strcmp($val1['value'], $val2['value']);
} 
```

这应该给你两个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:41:04.043

不确定您面临的问题在哪里复制粘贴此代码，您将正确看到这两个值。

```
$arr = array( 'tag_a','tab_b ');

$arr = array('tag_a','tab_b ');
print_r(array_intersect($arr, $arr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:43:17.253

使用主数组作为第一个参数，使用数组作为第二个参数进行比较。我不确定你有什么问题。

# c# - 在 .net 框架 2.0 中使用 Linq？

> ID：15902039
> 
> 赞同：1
> 
> 时间：2013-04-09T12:34:34.477
> 
> 标签：c#, winforms, visual-studio-2010, linq

我在 .net framework 4.0、visual studio 2010 中创建了一个应用程序，但由于某种原因，我将框架从 4.0 更改为 2.0，但现在我收到错误消息

```
The type or namespace name 'Linq' does not exist in the namespace 'System' (are you 
missing an assembly reference?) 
```

LINQ 在这个项目中被大量使用，现在我想知道有没有办法在 .net 2.0 中使用 LINQ。需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T12:37:30.150

dotnet 2.0 不支持 Linq

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T12:41:09.163

您可以使用[LinqBridge](http://www.albahari.com/nutshell/linqbridge.aspx)，它提供了 Linq to Objects 运算符的替代实现。（注意：它**仅**适用于 Linq to Objects，**不适**用于 Linq to XML 或 Linq to XML...）

# php - PHP Datetime：根据月份，一年中的一周和工作日获取日期

> ID：15902040
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:34:37.293
> 
> 标签：php, datetime

我有三个参数，我想根据这些参数获取确切的日期。我有以下参数：

```
Month : integer (01-12) |
Week of month : integer (01-05) |
Day of week : (Sunday-Saturday) 
```

我上面有三个参数，我想获取日期。

例如：

假设我`01 as month 01`的星期和星期几是星期五，那么它应该返回`03-01-2014`

假设：任何输入将仅用于未来日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:10:03.433

使用 strtotime。需要写出星期几和月份（2013 年 1 月 1 日星期五），所以我将月份编号转换为名称。我假设星期几已经是“星期五”。

```
function calcDate($day,$week,$month)
{
  $thisYear = date("Y");

  $monthName = date("F", mktime(0, 0, 0, $month, 10)); //http://gilbert.pellegrom.me/php-month-number-to-month-name-the-easy-way/
  $query = $week." ".$day." ".$monthName;
  $outDate = strtotime($query." ".$thisYear));

  if (outDate < time())
  {
    $outDate = strtotime($query." ".($thisYear+1));
  }
  return date('d-m-Y', $outDate);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:14:46.760

我相信这可以扩展：

```
$month = 'January';
$week = 0;
$day = 'friday';
$year = date("Y") + 1;

$d = new DateTime();
$d->modify("first {$day} of {$month} {$year} +{$week} week");
echo $d->format('d/m/Y'); 
```

# batch-file - 在“output.txt”文件中，在每行末尾插入具有多个 60 的特定文本行

> ID：15902045
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:45.310
> 
> 标签：batch-file

请帮助我创建一个脚本以在输出文本文件中在每行末尾插入具有多个 60 的特定文本行

我有特定的文字，例如：specific_text60

当我运行脚本时，生成的输出文本文件内容如下：

特定文本60

具体_text120

具体_text180

specific_text240

......

specific_text64800

并且行以 60 的倍数结尾，以指定的数字结尾，在我的情况下为 64800

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:53:03.970

试试这个：

```
(for /l %%i in (60,60,64800) do echo specific_text%%i)>out.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:46:14.860

```
@echo off
setlocal enabledelayedexpansion
set /a "incr=60, end=64800"
set text=specific_text
set outfile=output.txt

for /L %%I in (%incr%, %incr%, %end%) do >>"%outfile%" echo(%text%%%I 
```

* * *

如果您希望数字位于行首而不是行尾，请将 移至`%%I`另一侧，`%text%`如下所示：

```
@echo off
setlocal enabledelayedexpansion
set /a "incr=60, end=64800"
set text=specific_text
set outfile=output.txt

for /L %%I in (%incr%, %incr%, %end%) do >>"%outfile%" echo(%%I%text% 
```

# android - 在视图中添加布局

> ID：15902046
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:45.557
> 
> 标签：android, layout, android-canvas

我有这段代码，所以我可以用手指在特定图像上绘图。现在我想在这个布局中添加一个布局和一些 Imageviews。我怎么能做到这一点？因为我想在布局中添加一些 onTouch 和 onClick 监听器来移动 ImageViews。另外，我可以添加现有的 xml 布局还是只动态创建新的布局？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyView view1 =new MyView(this);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);

    setContentView(view1);
}

public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);
        setBackgroundResource(R.drawable.half_court);
      //  this.inflate(c, R.drawable.playera1, null);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    }

    @Override
   protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
       // canvas.drawLine(mX, mY, Mx1, My1, mPaint);
       // canvas.drawLine(mX, mY, x, y, mPaint);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);

    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
           // mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
           //   Mx1=(int) event.getX();
             //  My1= (int) event.getY();
               invalidate();
                break;
        }
        return true;
    }
} 
```

（编辑）当我尝试 Gunaseelan 的解决方案时，我会遇到以下错误：

> 04-09 13:05:08.842: D/dalvikvm(852): GC_FOR_ALLOC 释放 50K, 4% 释放 9056K/9347K, 暂停 89ms 04-09 13:05:08.892: I/dalvikvm-heap(852): 增长堆 ( frag case) 到 11.503MB 用于 2716016 字节分配 04-09 13:05:09.033: D/dalvikvm(852): GC_CONCURRENT freed <1K, 3% free 11708K/12039K, paused 9ms+19ms 04-09 13:05: 09.741: D/AndroidRuntime(852): 关闭 VM 04-09 13:05:09.751: W/dalvikvm(852): threadid=1: 线程退出未捕获异常 (group=0x409c01f8) 04-09 13:05:09.783 ：E/AndroidRuntime（852）：致命异常：主要 04-09 13:05:09.783：E/AndroidRuntime（852）：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.mitsos.thebasic/com.mitsos。 thebasic.main}：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。reflect.Method.invokeNative(Native Method) 04-09 13:05:09.783: E/AndroidRuntime(852): at java.lang.reflect.Method.invoke(Method.java:511) 04-09 13:05:09.783 : E/AndroidRuntime(852): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 04-09 13:05:09.783: E/AndroidRuntime(852): 在 com.android。 internal.os.ZygoteInit.main(ZygoteInit.java:551) 04-09 13:05:09.783: E/AndroidRuntime(852): at dalvik.system.NativeStart.main(Native Method) 04-09 13:05:09.783 ：E / AndroidRuntime（852）：引起：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。04-09 13:05:09.783: E/AndroidRuntime(852): 在 android.view.ViewGroup.addViewInner(ViewGroup.java:3337) 04-09 13:05:09.783: E/AndroidRuntime(852): 在 android.看法。1049) 04-09 13:05:09.783: E/AndroidRuntime(852): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 04-09 13:05:09.783: E/AndroidRuntime(852): . .. 11 更多 04-09 13:05:21.712: I/Process(852): 发送信号。PID：852 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:51:16.653

试试这个方法

```
LinearLayout layout = new LinearLayout(this);
ImageView iv = new ImageView(this);
iv.setImageResource(R.drawable.your_image);
layout.addView(iv);
layout.addView(view1);
setContentView(layout); 
```

那么你`onCreate()`应该是

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyView view1 =new MyView(this);

    LinearLayout layout =  new LinearLayout(this);
    ImageView iv = new ImageView(this);
    iv.setImageResource(R.drawable.your_image);
    layout.addView(iv);
    layout.addView(view1);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);

    setContentView(layout);
} 
```

我希望这会奏效。

# ember.js - ember.js：为 link_to 中的 url 提供格式

> ID：15902047
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:49.400
> 
> 标签：ember.js

我是 ember 的新手，我找不到可以在链接中附加格式的任何地方。

我必须显示来自我的服务器的pdf，在rails中我会这样做：

`<%= link_to "Print", document, format: pdf %>`

假设我的服务器实际上在响应`documents/:id.pdf`，当我在这种类型的循环中时，如何在 ember 中建立这个链接？

```
{{#each document in controller}}
  ...print document link here...
{{/each}} 
```

谢谢，
马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:00:02.577

Ember`{{linkTo}}`用于内部链接。

如果您想链接到外部资源，您应该使用[标签](http://emberjs.com/guides/templates/binding-element-attributes/#toc_binding-element-attributes)[`{{bindAttr}}`上的`<a>`](http://emberjs.com/guides/templates/binding-element-attributes/#toc_binding-element-attributes)用户，或者[编写自定义 Handlebars 助手](http://emberjs.com/guides/templates/writing-helpers/#toc_writing-custom-helpers)。

# java - 纸足球 Java

> ID：15902048
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:34:55.803
> 
> 标签：java, algorithm, bots

我想用 Java 实现一个玩[纸足球](http://en.wikipedia.org/wiki/Paper_Soccer)的机器人，但我不知道如何开始。

我需要选择哪种算法来降低复杂度？关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:42:54.410

首先学习如何编写类似的算法。

国际象棋[http://www.sluijten.com/winglet/](http://www.sluijten.com/winglet/)

博弈树算法简介

[http://www.hamedahmadi.com/gametree/](http://www.hamedahmadi.com/gametree/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:54:40.820

一个简单的算法是测试 8 个方向中的每一个的有效性，然后随机选择其中一个。您可能想要更接近对手目标的方向。您可以为所有选择平均分配 60% 的概率，然后将 20% 额外分配给最佳选择，将 10% 额外分配给第二和第三最佳选择。如果只有 2 个选项可用，则分配 75/25% 的机会。当只有一个可用的选择时，就不需要随机性了。

**编辑：**

示例 1：起始位置、屏幕顶部的目标、每次移动的百分比机会：

```
17.5 27.5 17.5
 7.5       7.5
 7.5  7.5  7.5 
```

示例 2：

那么，如何将动作从最好到最差排列？我会使用在每个方向上与目标的距离，如果你朝着目标移动，我会加上它，如果你离开，我会减去它。因此，如果目标是向上 7 个方格和向左 3 个方格，那么每个方向的得分将是：

```
10  7   4
 3     -3
-4 -7 -10 
```

假设在上述情况下有 5 种可能的移动，并且非法移动恰好是向上、向上和向下，那么每个移动的百分比机会将是（非法移动被分配为 0 机会）：

```
32  0  0
22    22
12 12  0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:38:05.527

尝试[minimax](http://en.wikipedia.org/wiki/Minimax)，但它不会那么容易。

# javascript - 在 HTML 代码中查找数字

> ID：15902049
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:56.497
> 
> 标签：javascript, jquery, html, find

你好，我的问题是：有没有办法使用 jquery 或 javascript 从 html 代码中获取数字？

代码是这样的：

```
<div class="issue-details">
<a href=/issues/3373"><img alt="Ticket" src="/images/ticket.png?1364554312">#3373</a>
Issue name - Issue description
</div> 
```

我需要得到的数字是 3373（改变的数字，它并不总是一样的！）

有谁知道怎么弄出来？

**编辑**

我需要在里面搜索这个数字和 HTMLLiElement，我使用 innerHTML 访问它。关于我应该如何使用 parseInt 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:36:45.750

您的最终选择器可能会有所不同，但您的代码应该是这样的。

读取属性：

```
var num = parseInt($('.issue-details a').attr('href').split('/').pop(), 10); 
```

阅读文本内容：

```
var num = parseInt($('.issue-details a').text().trim().slice(1), 10); 
```

在第二个中，我使用[trim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)删除文本周围的潜在空格并`slice(1)`删除`#`.

您可能还想使用正则表达式搜索您的 id：

```
var num = parseInt($('.issue-details').text().match(/#(\d+)/)[1], 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:37:10.073

您可以使用

```
 parseInt($('.issue-details a').attr('href').split('/').pop(), 10); 
```

也[见这里](https://stackoverflow.com/questions/8357138/how-can-get-only-numbers-from-the-text-using-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:36:54.927

您可以使用 jquery 获取所需锚点的 href 属性的值，然后简单地使用 javascript 函数进行解析（例如，用“/”分割并取最后一部分）

# php - function_exists() 不工作

> ID：15902050
> 
> 赞同：0
> 
> 时间：2013-04-09T12:34:56.813
> 
> 标签：php, function

我正在尝试检查函数是否存在并进行处理。

我通过以下方式检查：

```
if(function_exists("create_offerlovit_template_data"))
{
    echo "function exists";
}
else
{
    echo "function not exists";
} 
```

我有这个功能：

```
public function create_offerlovit_template_data($update,$shop_id)
{

} 
```

该函数存在，但总是打印“函数不存在”。为什么会这样？如何正确使用`function_exists`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:37:36.230

您正在搜索[http://www.php.net/manual/en/function.method-exists.php](http://www.php.net/manual/en/function.method-exists.php)。

function_exists 仅适用于函数。

例子：

```
method_exists($instance, "create_offerlovit_template_data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:38:01.900

`public function create_offerlovit_template_data($update,$shop_id){}`

这看起来像一个类方法而不是“独立”？功能（我知道的不好的术语），

我相信你正在寻找这个[`method_exists`](http://php.net/method_exists)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:38:01.977

您正在检查函数的存在，但“公共函数” - 是一种方法。使用“method_exists()”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:39:43.517

要检查某个对象中是否存在特定方法，请尝试使用 method_exists() 函数：

资源（[链接](http://php.net/method_exists)）

你可以试试

```
 if (method_exists($this,$method)) {
            // if true
        } else {
            // if false
        } 
```

# c# - 如何将对象数组转换为自定义类数组？

> ID：15902061
> 
> 赞同：3
> 
> 时间：2013-04-09T12:35:15.857
> 
> 标签：c#

我有

```
public class ABSInfo 
    {
        public decimal CodeCoveragePercentage { get; set; }
        public TestInfo TestInformation { get; set; }      

    } 
```

我有一个对象数组说“SourceType”

```
public object[] SourceType { get; set; } 
```

我想将对象数组（SoiurceType）转换为 ABSInfo[]。

我正在尝试

```
ABSInfo[] absInfo = Array.ConvertAll(SourceType, x => (ABSInfo)x); 
```

但错误

**无法将“WindowsFormsApplication1.TestInfo”类型的对象转换为“WindowsFormsApplication1.ABSInfo”类型。**

如何进行转换？

**编辑：**

```
public class TestInfo
    {
        public int RunID { get; set; }
        public TestRunStatus Status { get; set; }
        public string Description { get; set; }
        public int TotalTestCases { get; set; }
        public int TotalTestCasesPassed { get; set; }
        public int TotalTestCasesFailed { get; set; }
        public int TotalTestCasesInconclusive { get; set; }
        public string ReportTo { get; set; }
        public string Modules { get; set; }
        public string CodeStream { get; set; }
        public int RetryCount { get; set; }
        public bool IsCodeCoverageRequired { get; set; }
        public FrameWorkVersion FrameworkVersion { get; set; }
        public string TimeTaken { get; set; }
        public int ProcessID { get; set; }
        public int GroupID { get; set; }
        public string GroupName { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:38:47.550

你可以使用 LINQ；

```
ABSInfo[] absInfo = SourceType.Cast<ABSInfo>().ToArray(); 
```

或者

```
ABSInfo[] absInfo = SourceType.OfType<ABSInfo>().ToArray(); 
```

第一个将尝试将每个源数组元素转换为并在至少一个元素不可能时`ABSInfo`返回。`InvalidCastException`

第二个将仅将这些元素放入返回数组中，这些元素可以转换为`ABSInfo`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:41:14.753

你有一个对象数组。您不能将 all 强制`object`转换为`ABSInfo`，除非所有对象都是`ABSInfo`（或更多派生类）的实例。

所以要么把 null 放在你的数组中

```
ABSInfo[] absInfo = Array.ConvertAll(SourceType, x => x as ABSInfo); 
```

或者不要添加除`ABSInfo`to之外的其他内容`SourceType`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:42:18.263

`ABSInfo`通过使其继承来更正您的类`TestInfo`：

```
public class ABSInfo : TestInfo
{
    public decimal CodeCoveragePercentage { get; set; }
} 
```

这将解决转换问题，并允许您直接在 ABSInfo 类实例上访问 TestInfo 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:42:43.123

您的数组似乎包含 TestInfo 类型的对象。
因此，您需要为数组中的每个 TestInfo 构建一个对象 ABSInfo。

在 LINQ 中：

```
var absInfo = SourceType.Select(s => new ABSInfo()
                            { 
                              TestInformation = (TestInfo)s
                            , CodeCoveragePercentage = whatever
                            }).ToArray() 
```

# python - 将浮点数放入列表中

> ID：15902066
> 
> 赞同：-6
> 
> 时间：2013-04-09T12:35:30.907
> 
> 标签：python, python-3.x

我的程序将文本文件作为列表的每一行读取。然后它将具有相同索引号的所有元素放入列表中。所以基本上它将所有列放入列表中。然后将元素转换为浮点数。然后我我的程序中有几行看起来像这样

```
p1 = float(p[2])*dollar/maximum[money[0]]
p2 = ... 
```

等等。当我写

```
print(p1) 
```

它给了我

```
1.0
2.0
3.0 
```

当我写 print(p2) 它给了我

```
5.0
6.0
7.0 
```

我想以这样的方式保存这些数字（在列表中），它们看起来像这样

```
[1.0, 5.0]
[2.0, 6.0]
[3.0, 7.0] 
```

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:38:29.060

只需创建列表：

```
somelist = [p1, p2] 
```

您可能希望将它们附加到在循环之外初始化的另一个数据结构中：

```
somelargerlist = []

for presumed_loop_variable in presumed_loop_not_shown:
    p1 = ...
    p2 = ...
    somelist = [p1, p2]
    somelargerlist.append(somelist) 
```

# jquery - jQuery 菜单中未显示 div 标签

> ID：15902068
> 
> 赞同：1
> 
> 时间：2013-04-09T12:35:48.580
> 
> 标签：jquery, html, menu, hidden

我有一个菜单，当我单击一个按钮时，一个 div 框会显示为相应的选项。它工作得很好，但我似乎唯一想不明白的是如何让我放置在框内的 div 显示而不是显示为`display:hidden.`

我试过添加`.css("display","block");`它，但这只是让事情变得有点疯狂。这是我现在所在的位置：[FIDDLE](http://tinyurl.com/csbzhkd)。

如果对 CSS 或 JS 进行了任何更改，请告诉我您更改了什么以使其正常工作？

我什至在第一个和第二个框中添加了一些 div 以表明它们没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:03:41.237

我花了一段时间才弄清楚你在问什么，你的 css 把一切都推到了右边，但我认为这就是你要找的东西？[http://jsfiddle.net/GbMRx/3/](http://jsfiddle.net/GbMRx/3/)

```
$(function () {
    $('.button').on('click', function () {
        var el = $('#cnt' + this.id.replace('btn', ''));
        $('#content-new div').not(el).animate({
            height: "toggle",
            opacity: "toggle"
        }, 100).hide();
        el.toggle();
        el.children("div").toggle();
    });
}); 
```

我也刚刚切换了孩子们。

另一种选择（可能是更好的选择）是只隐藏/切换第一级儿童...... [http://jsfiddle.net/GbMRx/4/](http://jsfiddle.net/GbMRx/4/)

JS：

```
 $('#content-new > div').not(el).animate({... 
```

CSS：（从中删除`display:none`并`#content-new div`添加）

```
#content-new>div {
    display:none;
} 
```

...我开始思考，您可能一开始只影响第一级子 div？如果这是真的，这可能是你想要的......除了把所有的都`#content-new div`变成`#content-new>div`...... [http://jsfiddle.net/GbMRx/5/](http://jsfiddle.net/GbMRx/5/)

# jquery - 查找元素的位置，然后在 jquery 中使用 .position() 不工作

> ID：15902070
> 
> 赞同：0
> 
> 时间：2013-04-09T12:35:54.050
> 
> 标签：jquery, scroll, gallery, image-gallery, css-position

我似乎找不到 jQuery 理解元素当前位置的方法。我使用下面的 html 和 css、jQuery 滚动浏览一些标记（就像一个画廊 - 但我不想使用任何插件）但需要找到最后和第一个位置，因此它不会持续让某人将内容滚动出页面 - 目前我只是在应用操作时为父容器着色，但会实时将其换出，以不显示或灰显分页/滚动按钮。

滚动通过调整 209px 或 -209px 来工作，只是不了解第一个和最后一个元素（li）的位置。如果没有更多以前的 li，我试图停止上一个按钮的工作，反之亦然 - 就像我说现在只为父级着色以供视觉使用。当它们动态吐出时，其中可能有任意数量的 li。附上小提琴 URL： http: [//jsfiddle.net/jambo/zLSUT/](http://jsfiddle.net/jambo/zLSUT/) 抱歉，此演示中的图像无法正常工作。所以回顾一下 - 需要在没有更多内容可查看的方向停止分页。希望这是有道理的，提前谢谢你。

css

```
 .smartH{
    float: left; position: relative;
    width:10000px; height: 80px; padding: 5px 0;
    font-family: arial;
    background: #fff;
    }
    .smartH a{
    float: left;
      text-decoration: none; cursor:pointer;
    }
    .smartH img{
    float: left;
    width: 100px; height: 80px;
    border: none;
    }
      .smartH .title{
     float: right;
      margin: 0 5px; width:90px;
    font-weight: bold; font-size: 13px; color: #000; line-height: 1.4; text-align: left;
    }
    .smartH .text{
    float: right;
    margin: 5px 5px 0; width:90px; 
    font-size: 12px; color: #000; line-height: 1.1; text-align: left;
    }

    .smartAd{
    float:left;
    width:627px; overflow: hidden;
     }

     .smartH li{
    position:relative;
    float:left; display: inline;
    height:80px; width:200px; padding:0 4px 0 5px;
    list-style-type: none;
     }
     .smartAd .paginate{
    float:right
     }
     .smartAd i{
    cursor:pointer;
    } 
```

jQuery

```
 $( function () {
    var posF = $(".smartH li.first").position(); 
    var posL = $(".smartH li.last").position();     

    $("a#next").click( function () {
        $(".smartH li").stop().animate({
        left: "-=209px",
        }, 500 );
        if (posL.left == -627){
            $(".smartH").css("background", "blue");   
        }
        return false;
    });
    $("a#prev").click( function () {
        $(".smartH li").stop().animate({
        left: "+=209px",
        }, 500 );
        if (posF.left == 0){
           $(".smartH").css("background", "green");   
        }

        return false;
     }); 

    }); 
```

html

```
<div class="smartAd">
<ul class="smartH"><!-- posit abs?  -->
    <li class="first">
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">Call for a free quote today</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>
    </li>
    <li>
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="coach" />
            <p class="title">Experience great days out</p>
            <p class="text">Great value coach trips</p>
        </a>
    </li>
    <li>
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="coffee" />
            <p class="title">Need beans?</p>
            <p class="text">We have a great variety of beans at great prices</p>
        </a>
    </li>
    <li>
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/creditcard.gif" alt="credit card" />
            <p class="title">Got bad credit?</p>
            <p class="text">We can help you boost your rating</p>
        </a>
    </li>
    <li>
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/mobility.gif" alt="mobility" />
            <p class="title">Struggling to get around?</p>
            <p class="text">Great value scooters!</p>
        </a>
    </li>
    <li class="last">
        <a href="http://www.google.com" target="_blank">
            <img src="http://advertising.co.uk/wallpaper/plumber.gif" alt="plumber" />
            <p class="title">Got a leak?</p>
            <p class="text">Ring for reliable and friendly plumbers</p>
        </a>
    </li>       
</ul><!-- // ul.smartH -->
<span class="paginate">
    <a href="" class="icon" id="prev">Prev 1-</a>
    <a href="" class="icon" id="next">- Next 1</a>      
</span>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:46:30.417

好的，所以我使用jQuery使用jQuery“scrollTo”（所有元素在盒子模型中都有固定的外部尺寸）按照元素宽度或高度的数量移动到下一个兄弟元素，然后添加“动画”速度来转换这个. 效果很好。我在网上苦苦搜索了几天，但无法获得所需的解决方案。我希望随附的代码对其他人有很大用处。我试图让它尽可能直截了当——没有插件的简单 jQuery 库——显示 3 个内联广告，然后单击上一个/下一个按钮滚动到下一个。 [http://jsfiddle.net/jambo/eU3jk/13/](http://jsfiddle.net/jambo/eU3jk/13/)

```
html
<!-- jamie paterson -->
<div class="smartAd">
<ul class="smartH">
<!-- posit abs? -->
<li>    
<a href="#">
<img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
<p class="title">First Hampshire Rose</p>
<p class="text">For great value food with friends</p>
</a>
</li>
<li>    
<a href="#">
<img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">Nara Sushi Restaurant</p>
            <p class="text">Healthy & appetising food</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Alexandra Sports</p>
            <p class="text">Running & fitness retailers</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">Blades Barbers</p>
            <p class="text">£10 off Intensive Muscle Release</p>
        </a>

    </li>
    <li>    <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Aerial Connections</p>
            <p class="text">Audio & visual entertainment</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Highgrove Windows</p>
            <p class="text">10yr guarantee as standard</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">seven</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">eight</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">nine</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">Last</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>        
</ul>
<div class="nav">
    <button class="prev" title="previous"><</button>
    <button class="next" title="next">></button>
</div>
</div>
<!-- // smartAd -->

<br /><br /><br /><br /><br />

<div class="smartAdV">
<ul class="smartV">
    <!-- posit abs? -->
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">First Hampshire Rose</p>
            <p class="text">For great value food with friends</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">Nara Sushi Restaurant</p>
            <p class="text">Healthy & appetising food</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Alexandra Sports</p>
            <p class="text">Running & fitness retailers</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">Blades Barbers</p>
            <p class="text">£10 off Intensive Muscle Release</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Aerial Connections</p>
            <p class="text">Audio & visual entertainment</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coffee.gif" alt="blinds" />
            <p class="title">Highgrove Windows</p>
            <p class="text">10yr guarantee as standard</p>
        </a>

    </li>
    <li>    <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">seven</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">eight</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/blinds.gif" alt="blinds" />
            <p class="title">nine</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>
    <li>    
        <a href="#">
            <img src="http://advertising.co.uk/wallpaper/coach.gif" alt="blinds" />
            <p class="title">Last</p>
            <p class="text">Best value blinds in Lincolnshire!</p>
        </a>

    </li>        
</ul>
<div class="nav">
    <span class="wrap">
        <button class="next" title="next">v</button>        
        <button class="prev" title="previous">^</button>
    </span>
</div>
</div>
<!-- // smartAdV -->

    css
    /* jamie paterson */
    /* start horizontal */
    .smartAd {
    float:left; position:relative; /* pos:rel for IE7 only when hasLayout init */
    width:627px; overflow:hidden;
    }
    .smartH {
    width:10000px; position:relative; float:left;
    height: 80px; padding: 0; margin:0;
    font-family: arial;
    background: #fff;
    }
.smartH img, .smartV img{
    float: left;
    width: 100px; height: 70px;
    border: none;
}
.smartH .title{
    float: right;
    margin: 0 0 0 5px; width:100px;
    font-weight: bold; font-size: 13px; color: #000; line-height: 1.4; text-align: left;
}
.smartH .text{
    float: right;
    margin: 5px 5px 0; width:95px; 
    font-size: 12px; color: #000; line-height: 1.1; text-align: left;
}
.smartH a, .smartV a{
    float: left;
    text-decoration: none; cursor:pointer;
}
.smartH li {
    display: inline-block; float:left;
    width:205px; margin:0 4px 0 0; height: 70px; padding: 5px 0;
}
.smartAd .nav {
    float: right;
    width:33px; margin: 10px 0 0;
}
button{
    border: none; cursor: pointer;
    background-image:url("images/carousel-arrows.gif");
}
.prev{
    float: left;
    width:16px; height:16px; margin: 0 1px 0 0;
    background-position: 0 16px;
}
.next{
    float: right;
    width:16px; height:16px;
    background-position: 0 0;
}
/* end Horizontal Style */
/* start Vertical style */
.smartAdV {
    float:left; clear:left; position:relative; /* pos:rel for IE7 only when hasLayout init */
    height:616px; padding: 0 10px; overflow:hidden;
}
.smartV {
    width:100px; position:relative; float:left;
    height: 10000px; padding: 0; margin:0;
    font-family: arial;
    background: #ebebeb;
}
.smartV .title{
    float: left;
    margin: 8px 0; width:100px;
    font-weight: bold; font-size: 13px; color: #000; line-height: 1.4; text-align: left;
}
.smartV .text{
    float: right;
    margin: 5px 0 10px; width:100px; 
    font-size: 12px; color: #000; line-height: 1.4; text-align: left;
}
.smartV li {
    display: inline-block; float:left;
    width:100px; margin:0 0 8px; height: 180px; padding: 10px 0 0;
    border-top: 1px solid #ebebeb; border-bottom:1px solid #ebebeb;
    background: #fff;
}
.smartAdV .nav {
    float: left; position:relative; left:-100px; bottom: -600px;
    width:100px; margin: 0;
    background:#fff;
}
.smartAdV .wrap{
    float: right;
    width:33px;
}
.smartAdV .prev{
    float: left;
    width:16px; height:16px; margin: 0 1px 0 0;
    background-position: 16px 0;
}
.smartAdV .next{
    float: right;
    width:16px; height:16px;
    background-position: 16px 16px;
}
jQuery
// jamie paterson //
//adding classes via jQuery instead of direct for ease - some of these variables not used as var's
var currentElement = $(".smartH li:first"); // sets first current horiz
var lastElementThree = $(".smartH").children("li").eq(-3).addClass("lastThird"); //horiz
var firstElementOne = $(".smartH").children("li").eq(0).addClass("firstOne"); //horiz
var currentElementV = $(".smartV li:first"); // sets first current vert
var lastElementThreeV = $(".smartV").children("li").eq(-3).addClass("lastThirdV"); //vertical
var firstElementOneV = $(".smartV").children("li").eq(0).addClass("firstOneV"); //vertical
var prevBtn = $(".smartAd .prev, .smartAdV .prev").prop('disabled', true).css({ opacity: 0.5 }); // hide but show on scroll
// HORIZONTAL section
$(".smartAd .prev").click(function () {
    currentElement = currentElement.prev();
    scrollTo(currentElement);
    $(currentElement).nextAll().slice(2, 3).css("display", "none"); //move back one place/element and hide prev li
    $(".smartAd .next").prop('disabled', false).css({ opacity: 1.0 }); 
    $(".smartH").stop().animate({
        left: "+=209px" // block li's are white space dependent 
        }, 500 );
    e.preventDefault();
});
$(".smartAd .next").click(function () {
    currentElement = currentElement.next();
    scrollTo(currentElement);
    $(currentElement).nextAll().slice(0, 2).css("display", "inline-block");//move on one place/element and show next li
    $(".smartAd .prev").prop('disabled', false).css({ opacity: 1.0 }); 
    $(".smartH").stop().animate({
        left: "-=209px" // block li's are white space dependent
        }, 500 );
    e.preventDefault();
});
// VERTICAL section
$(".smartAdV .prev").click(function () {
    currentElementV = currentElementV.prev();
    scrollTo(currentElementV);
    $(currentElementV).nextAll().slice(2, 3).css("display", "none"); //move back one place/element and hide prev li
    $(".smartAdV .next").prop('disabled', false).css({ opacity: 1.0 }); 
    $(".smartV").stop().animate({
        top: "+=200px" // block li's are white space dependent 
        }, 500 );
    e.preventDefault();
});
$(".smartAdV .next").click(function () {
    currentElementV = currentElementV.next();
    scrollTo(currentElementV);
    $(currentElementV).nextAll().slice(0, 2).css("display", "inline-block");//move on one place/element and show next li
    $(".smartAdV .prev").prop('disabled', false).css({ opacity: 1.0 }); 
    $(".smartV").stop().animate({
        top: "-=200px" // block li's are white space dependent
        }, 500 );
    e.preventDefault();
});
    function scrollTo(element) { // includes/combined horiz and vert - left action and top action respectively
        if ($(currentElement).hasClass("lastThird")){
           $(".smartAd .next").prop('disabled', true).css({ opacity: 0.5 }); 
           $(window).scrollLeft(element.position().left);
        }
        else if ($(currentElement).hasClass("firstOne")){
           $(".smartAd .prev").prop('disabled', true).css({ opacity: 0.5 });
           $(window).scrollLeft(element.position().left);
        } 
        else{
        $(window).scrollLeft(element.position().left);
        }        
        if ($(currentElementV).hasClass("lastThirdV")){ // vert
           $(".smartAdV .next").prop('disabled', true).css({ opacity: 0.5 });
           $(currentElementV).children().scrollTop(element.position().top);
        }
        else if ($(currentElementV).hasClass("firstOneV")){ // vert
           $(".smartAdV .prev").prop('disabled', true).css({ opacity: 0.5 });
           $(currentElementV).children().scrollTop(element.position().top);
        } 
        else{ // vert
            $(currentElementV).children().scrollTop(element.position().top);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:10:00.590

您使用错误的语法来指定第一个和最后一个孩子，它应该是：

```
var posF = $(".smartH li:first-child").position(); 
var posL = $(".smartH li:last-child").position(); 
```

如果遵循 CSS 伪选择器的路线。

# jquery - 通过 Ajax 进行跨域调用

> ID：15902073
> 
> 赞同：0
> 
> 时间：2013-04-09T12:36:01.433
> 
> 标签：jquery, ajax, json

我正在使用下面的脚本来发送跨域 ajax 调用。

```
$(document).ready(function() 
{
var uniqcod=$(".abc").attr('id');   
$.ajax({
    url:'abc.com',
    data:{uniId:uniqcod},
    dataType: 'jsonp',
    jsonp: 'callback',
    crossDomain: true,
    jsonpCallback:"jsonpCallback",
    success: function(result){},
    error: function() {console.log('Failed!');
    console.log(arguments); }
    });

function jsonpCallback(data){
    document.getElementById(uniqcod).innerHTML=data.content;
}

}); 
```

但问题是这个脚本没有进入 jsoncallback 函数。每次我调用此函数时，它都会在控制台中显示失败消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:40:46.100

除非您经过身份验证，否则您不能使用 jQuery 进行跨域调用。但是，您可以使用 YQL（雅虎查询语言）并进行一些调用并获取 xml、json 格式的数据。

请参见下面的示例。

```
function requestCrossDomain( site, callback ) {  

    // If no url was passed, exit.  
    if ( !site ) {  
        alert('No site was passed.');  
        return false;  
    }  

    // Take the provided url, and add it to a YQL query. Make sure you encode it!  
    var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + site + '"') + '&format=xml&callback=cbFunc';  

    // Request that YSQL string, and run a callback function.  
    // Pass a defined function to prevent cache-busting.  
    $.getJSON( yql, cbFunc );  

    function cbFunc(data) {  
    // If we have something to work with...  
    if ( data.results[0] ) {  
        // Strip out all script tags, for security reasons.  
        // BE VERY CAREFUL. This helps, but we should do more.   
        data = data.results[0].replace(/<script[^>]*>[\s\S]*?<\/script>/gi, '');  

        // If the user passed a callback, and it  
        // is a function, call it, and send through the data var.  
        if ( typeof callback === 'function') {  
            callback(data);  
        }  
    }  
    // Else, Maybe we requested a site that doesn't exist, and nothing returned.  
    else throw new Error('Nothing returned from getJSON.');  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:38:20.463

只有当您请求的服务器发回 CORS（跨域资源共享）标头时，您才能执行跨域请求。

如果它是您控制的服务器，那么您只需要进行更改。

如果没有，您需要通过您控制的服务器代理数据*以*添加适当的标头。

编辑：或者如果它是 JSONP，那么您需要确保您请求的服务器实际上支持 JSONP。

# javascript - HTML5 + Javascript 拖放

> ID：15902076
> 
> 赞同：0
> 
> 时间：2013-04-09T12:36:11.300
> 
> 标签：javascript, html, drag-and-drop, draggable, droppable

我的问题是基于这个例子，但有一些区别.. [http://jsfiddle.net/raad/SSxdB/15/](http://jsfiddle.net/raad/SSxdB/15/)

我使用一个菜单，它有 3-4 个类别，每个类别有 4 个项目.. 所以我想将一个元素拖放到指定的 div.. 和指定的元素，从菜单列表中隐藏（我已经这样做了）但也能够撤消它（也已经弄清楚了），而且，如果我将另一个元素拖放到指定的 div 上，则已经删除了另一个元素，第一个要恢复的元素，并且新的取代了它的位置..这是我有问题..这是代码..

```
 function allowDrop(ev) {
        ev.preventDefault();
        }
    }

    function drag(ev) {
        ev.dataTransfer.setData("Text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("Text");
        var draggedOrNewNodeId = "dragged-"+data;
        var theNode = document.getElementById(data);
        var draggedNode = document.getElementById(draggedOrNewNodeId);
        if (draggedNode != null) { ev.target.removeChild(draggedNode); }
        var nodeCopy = theNode.cloneNode(true);
        nodeCopy.id = draggedOrNewNodeId;
        nodeCopy.setAttribute("class", "dragged");
        nodeCopy.setAttribute("draggable", "false");
        document.getElementById(data).style.display = "none";
        remove_id = draggedOrNewNodeId +  "_remove";
        nodeCopy.innerHTML="<span class='undo' id='" + remove_id + "'>x</span>";
        ev.target.appendChild(nodeCopy);

        var remove = document.getElementsByClassName("undo").length;
            for (i=0; i<remove; i++) {
            var nodeToBeRemoved = /_remove$/;
            var nodeToBeReplaced = /dragged-/;
            deletedNode = remove_id.replace(nodeToBeRemoved, "");
            restoredNode = deletedNode.replace(nodeToBeReplaced, "");
                document.getElementsByClassName("undo")[i].onclick = function() {
                    elem = document.getElementById(deletedNode);deleted
                    elem.parentNode.removeChild(elem);
                    document.getElementById(restoredNode).style.display = "block";
                }
            }
    } 
```

这是“导致”我的问题的部分，如果已经放置了 2 个或移动 div，它们就会全部消失。另一个问题是，如果我将它插入到 allowDrop(ev) 函数中，它实际上确实删除了以前的元素，并且在放置新元素时放置了新元素..但是当元素超过 div 时它会删除它们..但是我希望在放置时完成..所以当我移动这段代码时要删除函数，它确实删除了先前输入的元素，但它“消失”了新元素..以及......无法说明为什么会这样......我也想建议替换 temp_node = document. getElementsByClassName("拖动")[0]; 更具体的（也许是来自指定 ev.target 的子节点？

```
 tempNodeCheck = hasClass(ev.target, "dragged"); 
        if (tempNodeCheck) {
                var nodeToBeReplacedcopy = /dragged-/;
                tempParentNode = ev.target.parentNode;
                temp_node = document.getElementsByClassName("dragged")[0];
                temp_node1 = document.getElementsByClassName("dragged")[0].id;
                restoredNode = temp_node1.replace(nodeToBeReplacedcopy, "");
                temp_node1.parentNode.removeChild(temp_node1);
                document.getElementById(restoredNode).style.display = "block"; 
```

html看起来像这样

```
<div id="drag1" draggable="true" ondragstart="drag(event)"></div>
<div id="drag2" draggable="true" ondragstart="drag(event)"></div>
<div id="drag3" draggable="true" ondragstart="drag(event)"></div>
<div id="drag4" draggable="true" ondragstart="drag(event)"></div>

<div class="droparea" id="drop1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div class="droparea" id="drop2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div class="droparea" id="drop3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div class="droparea" id="drop4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div class="droparea" id="drop5" ondrop="drop(event)" ondragover="allowDrop(event)"></div> 
```

这里是 jsfiddle 类型的[http://jsfiddle.net/q5FAq/3/](http://jsfiddle.net/q5FAq/3/) 但我也注意到，如果删除的 div 包含 sth 在里面，它不会与 div 一起“移动”.. （目前在什么我试过我在每个 div 上都使用了背景图片，所以它并不明显..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:12:33.960

解决方案来了..为什么 div 消失了，当动作是替换 droparea 上的现有 div 时？

因为 ev.target 将“看到”为目标，droparea 内的现有 div .. 例如..

当一个元素被放置在放置区域的第一个位置时，ev.target 是例如 div 与`id=drop1`（如果选择将其放置在那里）

但是，当另一个元素被放置在先前已放置在放置区域中的元素之上时，ev.target 将是`dragged-drag1`，但是由于代码应该删除该 div，因此最近放置的 div 也消失了...

所以下线

```
 ev.target.appendChild(nodeCopy); 
```

被这个块取代

```
 tempNodeCheck = hasClass(ev.target, "dragged");
        if (tempNodeCheck) {
                var nodeToBeReplacedcopy = /dragged-/;
                tempParentNode = ev.target.parentNode;
                temp_node_class = tempParentNode.getElementsByClassName("dragged")[0];
                temp_node_id = temp_node_class.id;
                remove_node = document.getElementById(temp_node_id);
                restoredNode = temp_node_id.replace(nodeToBeReplacedcopy, "");  
                remove_node.parentNode.removeChild(remove_node);
                document.getElementById(restoredNode).style.display = "block";
                tempParentNode.appendChild(nodeCopy);
        }
        else {
        ev.target.appendChild(nodeCopy);
        } 
```

# jquery - html的jQuery移动结构

> ID：15902083
> 
> 赞同：2
> 
> 时间：2013-04-09T12:36:33.110
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-listview

如果从 jquery mobile 基本结构中跳出是不好的做法，我会感到很痛苦。在我的示例中，我得到了完全相同的代码。但在另一个中，我在 -tag*之前添加了一个 div。*这让我再看一眼，因为 css 不正确。不好吗？它打破了我好看的清单。有什么好的解决方案吗？

原因是因为我想要对列表中的信息进行一些控制，以使用 som jQuery 显示和隐藏 div。我会很容易地解决这个问题，给 li 标签一个类并隐藏和显示它。但我还是有点困惑

如果我有这个代码（取自 jquery 演示页面）：

```
 <li>
                        <a href="#">
                            <h2>
                                Stephen Weber</h2>
                            <p>
                                <strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                            <p>
                                Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the
                                jQuery team.</p>
                        </a>
                        <p class="ui-li-aside">
                            <strong>6:24</strong>PM</p>
                </li> 
```

它将生成这个html：

```
 <li class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c" data-corners="false"
                    data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="false"
                    data-iconpos="right" data-theme="c">
                    <div class="ui-btn-inner ui-li">
                        <div class="ui-btn-text">
                            <p class="ui-li-aside ui-li-desc">
                                <strong>6:24</strong> PM
                            </p>
                            <a class="ui-link-inherit" href="#">
                                <h2 class="ui-li-heading">
                                    Stephen Weber</h2>
                                <p class="ui-li-desc">
                                    <strong>You've been invited to a meeting at Filament Group in Boston, MA</strong>
                                </p>
                                <p class="ui-li-desc">
                                    Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the
                                    jQuery team.</p>
                            </a>
                        </div>
                    </div>
                </li> 
```

但是，如果我在我的代码中添加一个 div，如下所示：

```
 <li>
                    **<div>**
                        <a href="#">
                            <h2>
                                Stephen Weber</h2>
                            <p>
                                <strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                            <p>
                                Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the
                                jQuery team.</p>
                        </a>
                        <p class="ui-li-aside">
                            <strong>6:24</strong>PM</p>
                    </div>
                </li> 
```

它将生成这个html：

```
 <li class="ui-li ui-li-static ui-btn-up-c">
                    <div>
                        <p class="ui-li-aside ui-li-desc">
                            <strong>6:24</strong> PM
                        </p>
                        <a class="ui-link" href="#">
                            <h2 class="ui-li-heading">
                                Stephen Weber</h2>
                            <p class="ui-li-desc">
                                <strong>You've been invited to a meeting at Filament Group in Boston, MA</strong>
                            </p>
                            <p class="ui-li-desc">
                                Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the
                                jQuery team.</p>
                        </a>
                    </div>
                </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:51:10.417

jQuery Mobile 已经有一个列表视图元素切换的解决方案。所以不需要用父 div 包装 li 元素。

这是适合您的解决方案：http: [//jsfiddle.net/Gajotres/TvwnQ/](http://jsfiddle.net/Gajotres/TvwnQ/)

```
$(document).on('pagebeforeshow', '#index', function(){    
    // Hide first listview element
    $('#mylist li').eq(0).addClass('ui-screen-hidden');    
}); 
```

基本上你只需要在 listview li 元素上切换类 ui-screen-hidden 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:32:28.753

所以它最终是这样的：

```
 module.toggleClickableAndCheckableMessage = function () {
    var checkableMessage = pageId.find('li.checkableMessage');
    var clickableMessage = pageId.find('li.clickableMessage');

    if (clickableMessage.eq(0).is(':visible')) {
        clickableMessage.addClass('ui-screen-hidden');
        checkableMessage.removeClass('ui-screen-hidden');
    } else {
        checkableMessage.addClass('ui-screen-hidden');
        clickableMessage.removeClass('ui-screen-hidden');
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:52:47.473

Jquery Mobile Page的基本结构如下：

```
<html>
<body>
    <div data-role="page" name="page1">
        <div data-role="header">
            <!-- your header text ->
        </div>
        <div data-role="content">
            <!-- your main data write here ex listitem,form etc ->
        </div>
        <div data-role="header">
            <!-- your footer text ->
        </div>

    </div>
    <div data-role="page" name="page=2">
        <div data-role="header">
            <!-- your header text ->
        </div>
        <div data-role="content">
            <!-- your main data write here ex listitem,form etc ->
                     <!-- here you can define your list and main content [body of page]-->
        </div>
        <div data-role="header">
            <!-- your footer text ->
        </div>
    </div>
</body>
</html> 
```

--更多请参考[www.jquerymobile.com](http://www.jquerymobile.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:36:45.897

谢谢Butani，但我知道基本结构。只是好奇jqm希望我如何以不同的方式构建列表视图以使其正确。这就像以一种新的方式再次学习 html/css。在将生成其他标签的其他标签中有标签。我并不总是看到这样做的逻辑。

奥基加约特雷斯。这几乎是我想要的。我把它删减了一点：

```
 <li data-role="fieldcontain" data-theme="@messageTheme" class="clickableMessage" data-icon="false">
                    <div class="clickableMessage">
                        <a href="">
                            <div class="receivers">
                                <span>text </span>
                            </div>
                            <h2>@message.Header</h2>
                            <p>
                                @message.Text</p>
                        </a>
                    </div>
                    <div class="markeableMessage">
                        <a href="#">
                            <label>
                                <div class="receivers">
                                    <span>text </span>
                                </div>
                                <h2>@message.Header</h2>
                                <p>
                                    @message.Text</p>
                                <fieldset data-role="controlgroup">
                                    <input id="@("cbx" + message.MessageRef)" class="markedForDelete" name="CheckboxToDelete" type="checkbox" value=@message.MessageRef />
                                </fieldset>
                            </label>
                        </a>
                    </div>
                </li> 
```

`<div class="clickableMessage">`拥有and的原因`<div class="markeableMessage">`是因为我想隐藏和切换它们。显示 ClickableMessage 和隐藏 markeableMessage，切换这两个。

但正如我在第一篇文章中所说，我现在在“li”上开设了课程并隐藏了它。所以我将生成两个带有两个不同类的“li”，而不是一个带有两个不同 div 的“li”。但无论如何，我有点好奇应该怎么做。

# c++ - 命名空间检测

> ID：15902086
> 
> 赞同：1
> 
> 时间：2013-04-09T12:36:44.533
> 
> 标签：c++, namespaces, iostream, token-name-resolution

我正在尝试编写一个使用外部工具的日志库

为了使库更自然地使用，我希望能够检测使用 cout 的名称空间。

具体来说，结果应该这样使用

```
namespace A
{
    void foo()
    {
          cout << "Something went very wrong" << endl;
    }
}

namespace B
{
    void bar()
    {
          cout << "C should equal 3" << endl;
    }
}

int main()
{
    B::bar();
    A::foo();
} 
```

结果输出应该是这样的

```
MODULE::B : C should equal 3
MODULE::A : Something went very wrong 
```

我已经使用`std::streambuf`向 cout 的输出添加某些关键字，我需要做的就是指定在哪个命名空间中使用哪个 streambuf。

我如何实现这一目标？

此外，我正在制作的库将被集成到具有多个名称空间的项目中，这些名称空间大量使用了`using namespace`声明。我需要一个不需要删除这些声明的解决方案。

编辑1：我不关心必须手动指定哪个名称空间与哪个字符串相关联或将对象添加到任何使用的名称空间（`std`当然除外）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:46:10.470

如何创建自定义记录器流？这样，用户可以指定失败的组件，如下所示：

```
namespace A {
    void foo()
    {
          log("A") << "Something went very wrong" << endl;
    }
}

namespace B {
    void bar()
    {
          log("B") << "C should equal 3" << endl;
    }
}

int main()
{
    B::bar();
    A::foo();
} 
```

也许不那么自动化，但`__FILE__`宏也可以提供一些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:43:39.730

这在语言中是不可能的。如果你使用 Clang，你可以重新编译 Clang 来为你执行这样的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:45:51.580

您可以尝试`std::string namespace_name()`在要显示的每个命名空间中注入函数，然后调用`std::cout << namespace_name()`将导致大多数内部命名空间名称输出

# grails - 如何在 Grails 中使用嵌入式 GORM 类？

> ID：15902093
> 
> 赞同：4
> 
> 时间：2013-04-09T12:37:04.947
> 
> 标签：grails, grails-orm, scaffolding, grails-domain-class

按照[GORM 文档](http://grails.org/doc/2.2.0/guide/GORM.html#gormComposition)，我尝试在 Grails 2.2.1 中使用以下域类：

```
package grailscompositiontest

class ScafPerson {
    String name
    ScafAddress homeAddress
    ScafAddress workAddress

    static constraints = {
        name(nullable: false, blank: false)
    }

    static embedded = ['homeAddress', 'workAddress']
}

class ScafAddress {
    String number
    String code
} 
```

控制器只使用脚手架：

```
package grailscompositiontest

class ScafPersonController {
    static scaffold = true
} 
```

不幸的是，这不起作用，一旦我浏览到“创建”视图，它就会触发服务器错误：

```
URI:     /GrailsCompositionTest/scafPerson/create
Class:   java.lang.NullPointerException
Message: Cannot get property 'id' on null object 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:31:31.007

前几天我遇到了同样的问题。我相信脚手架功能使用的模板中可能存在错误。您可以更新模板，或者如果您不想使用模板，请按照 Benoit 所述运行**generate-all然后修复生成的视图。**

**要更新模板：**

1.  grails> 安装模板
2.  打开 src/templates/scaffolding/renderEditor.template
3.  找到以下行：

```
    sb << ' value="${' << domainInstance << '.' << property.name << '}"'

```

并更改为

```
    sb << ' value="${' << domainInstance << '?.' << property.name << '}"'

```

**要修复生成的视图：**

1.  grails> 生成所有 grailscompositiontest.ScafPerson
2.  打开视图/scafPerson/_form.gsp
3.  寻找

```
    <g:field name="id" type="number" value="${scafAddressInstance.id}" required=""/>
    <g:field name="version" type="number" value="${scafAddressInstance.id}" required=""/>

```

并更改为

```
    <g:field name="id" type="number" value="${scafAddressInstance?.id}" required=""/>
    <g:field name="version" type="number" value="${scafAddressInstance?.id}" required=""/>

```

**请注意**，您将执行两次，因为您有 homeAddress/workAddress

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-23T13:24:25.513

我发现 grails 文档说要将嵌入式类定义放在与域类相同的源文件中，或者将其放入 src/groovy。我将 Address.groovy 放在 src/groovy 中，并为我的 Family 类生成了 UI，该类有一个嵌入式对象。生成的创建页面现在可以正确显示，地址字段包含在家庭页面中。但是，我仍然需要修改生成的_form.gsp 中每个表单字段的名称和值字段。

例如，以下生成的代码...

```
<g:textField name="line1" required="" value="${addressInstance?.line1}"/> 
```

改为...

```
<g:textField name="address.line1" required="" value="${familyRegistrationInstance.address?.line1}"/> 
```

其中主域对象是 FamilyRegistration 域类（在生成的 _form.jsp 中称为 familyRegistrationInstance），它具有嵌入的 Address 对象。我正在使用 grails 2.3.11。

保存操作现在适用于正确填充的嵌入对象的字段。就我而言，这意味着 FamilyRegistration.address 已正确填充。

这是来自 Grails 参考文档的相关信息...

“嵌入式组件类通常在与所属类相同的源文件中声明，或者在 src/groovy 下它自己的文件中声明。您可以将组件类放在 grails-app/domain 下，但如果这样做，Grails 将自动创建一个专用表。将类放在 src/groovy 下通常是最好的选择，因为您可以在多个域类之间共享组件。

[http://grails.org/doc/2.2.4/ref/Domain%20Classes/embedded.html](http://grails.org/doc/2.2.4/ref/Domain%20Classes/embedded.html)

# php - 使用 JSONP 的跨域不起作用：权限问题

> ID：15902096
> 
> 赞同：0
> 
> 时间：2013-04-09T12:37:11.107
> 
> 标签：php, jquery, ajax

我试图通过从不同的网站加载它们来在我的网站上显示一些电影海报。我抓取了海报的 URL 并将它们保存到 mySQL 数据库中。当用户查找海报时，脚本将搜索数据库并通过 ajax 获取完整 URL 并填充 IMG 标签以显示图片。

我注意到我从中获取链接的两个网站之一返回“**您无权访问...** ”。但是如果我在浏览器地址栏中复制相同的链接，我可以看到图片。经过一些研究**，我猜这是由于跨域问题**。我读到最常见的解决方案是 JSONP，所以我设法制定了以下代码。您可能会看到有两个链接：第一个链接有效，第二个链接（filmup.it）返回权限错误。（问题不是由于缺少“www”）。

**HTML 代码**

```
<input type="text" id="link" value="http://www.cinemadelsilenzio.it/images/film/poster/11469_big.jpg" />
<!-- <input type="text" id="link" value="http://filmup.leonardo.it/posters/loc/500/dieanotherday.jpg" /> -->
<button class="searchbutton" type="button">Vai</button>

<br />

<img id="poster" src=""/>

<script type="text/javascript">
$(document).ready(function() {
    $(".searchbutton").click(function(){    
        var _text = document.getElementById("link").value;
        $.ajax({
            url: 'img.php',
            data: {parameter1: _text},
            dataType: 'jsonp',
            jsonp: 'callback',
            jsonpCallback: 'jsonpCallback',
            success: function(){
                alert("success");
            }
        });
    }); 
});

function jsonpCallback(data){
    $("#poster").attr("src", data);
}
</script> 
```

**PHP 代码**

```
// let's suppose that here there's a mySQL code to retrieve the links
if (isset($_GET['parameter1']) && isset($_GET['callback'])) {
    $picture = $_GET['parameter1'];
    echo $_GET['callback']."(".json_encode($picture).");";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:42:56.493

**解决了！**最后我自己解决了。将上面的 Jquery 代码更改为以下内容：

```
$(".searchbutton").click(function(){    
    var _text = document.getElementById("link").value;
    $.get("img.php", {parameter1: _text }, 
        function(data) {
            $('#poster').html('<img src="data:image/jpg;base64,' + data + '" />');
        }
    );
}); 
```

并使用以下内容更改上面的所有 PHP 代码：

```
<?php
    header('Content-type: image/jpeg');
    echo base64_encode(file_get_contents($_GET["parameter1"]));
?> 
```

不要在 之后`<?php`和之前留下任何空间`?>`。

**--- 如果你使用 mySQL ---**

我注意到，如果您需要在将数据发送到 mySQL 数据库之前检索数据，那么如果您在上述 PHP 文件中添加 mySQL 代码，`file_get_contents`这将**不起作用。**例如下面的代码**不会输出**任何东西：

```
header('Content-type: image/jpeg');
$db = mysql_connect('localhost', 'user', 'pass');
$db_selected = mysql_select_db('posters', $db);
if (isset($_GET['parameter1'])) {
    $p = mysql_real_escape_string($_GET['parameter1']);
    $result = mysql_query("SELECT link FROM posters WHERE title = '".$p."'");
    $row = mysql_fetch_array($result);
    echo base64_encode(file_get_contents($row["Link"]));
} 
```

我不知道为什么，但是`file_get_contents`从数据库中检索到的数据没有完成，尽管`$row["Link"]`内容正确。看起来这`$row["Link"]`只是空的，但事实并非如此。

您需要将输出重定向到其他页面。改变

```
echo base64_encode(file_get_contents($row["Link"])); 
```

和

```
header("location: image.php?link=".$row["Link"]); 
```

image.php 文件将是：

```
header('Content-type: image/jpeg');
echo base64_encode(file_get_contents($_GET["link"])); 
```

希望这可以帮助某人。

# java - 如何返回多个字符串？

> ID：15902098
> 
> 赞同：0
> 
> 时间：2013-04-09T12:37:17.770
> 
> 标签：java, return-value

我正在开发一个程序来为您提供卡片，但我不确定为什么它不返回卡片。这是我的类 Builder 中生成随机卡片的方法：

```
public static String hand(){

String card = Builder();
String card2 = Builder();
String card3 = Builder();
String card4 = Builder();
String card5 = Builder();

out.println("Your hand is: ");
out.println( card );
out.println( card2 );
out.println( card3 );
out.println( card4 );
out.println( card5 );

return card;
return card2;
return card3;
return card4;
return card5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T05:44:09.513

不，您不能返回多个值。
但是您可以发送包含所有这些字符串的字符串数组。

要声明该方法，请尝试以下操作：

```
Public String[] hand() {
String card = Builder();
String card2 = Builder();
String card3 = Builder();
String card4 = Builder();
String card5 = Builder();
return new String[] {card, card2, card3, card4, card5};
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:49:18.213

我建议您尽快阅读“ **Head first core java** ”。
您只能从方法返回一个值。如果您仍然希望将所有变量设置为给定的卡片，请遵循以下方法。在这种情况下，您甚至不需要返回单个值（请参阅返回类型为`void`）。一切都设置在方法内。

```
class Play {
    String card;
    String card2;
    String card3;
    String card4;
    String card5;

    public void hand() {
        this.card = builder();
        this.card2 = builder();
        this.card3 = builder();
        this.card4 = builder();
        this.card5 = builder();
    }

    private static String builder() {
        // return random card
        return null;  //temporary set to null

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:38:27.763

返回一个`String`数组：

```
return new String[] {card, card2, card3, card5, card5}; 
```

**编辑：**

要完成这项工作，您必须将方法的返回类型更改为`String[]`.

我推荐[关于定义方法的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:39:29.347

只能返回一个值，为什么不返回一个String数组

```
return new String[] {card, card2, card3, card4, card5}; 
```

# java - 使用java读取后将excel中的数据存储在列表中

> ID：15902099
> 
> 赞同：1
> 
> 时间：2013-04-09T12:37:18.180
> 
> 标签：java, arrays, apache-poi

我正在使用 APACHE POI 从 excel 文件中读取数据。我想将它们存储在列表中（如 c 中的列表）结果，因为之后我将尝试将它们存储在 mysql 数据库中，例如仅调用 list[0]、list[1]。我将尝试做的是制作这个列表，然后我将使用 jdbc 驱动程序并给出这个列表来制作 mysql 中的表。读取excel文件的代码如上：

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;

public class readexcel{ 
```

@SuppressWarnings({ "unchecked", "unchecked" }) public static void main(String[] args) throws Exception {

```
//
 // An excel file name. You can create a file name with a full
 // path information.
 //
String filename = "C:\\Users\\xxx\\Documents\\test.xls";

//
// Create an ArrayList to store the data read from excel sheet.
//
List sheetData = new ArrayList();
FileInputStream fis = null;
try {
//
// Create a FileInputStream that will be use to read the
// excel file.
//
fis = new FileInputStream(filename);

 //
 // Create an excel workbook from the file system.
//
HSSFWorkbook workbook = new HSSFWorkbook(fis);
//
// Get the first sheet on the workbook.
//
HSSFSheet sheet = workbook.getSheetAt(0);

 //
  // When we have a sheet object in hand we can iterator on
// each sheet's rows and on each row's cells. We store the
// data read on an ArrayList so that we can printed the
// content of the excel to the console.
 //
Iterator rows = sheet.rowIterator();
while (rows.hasNext()) {
HSSFRow row = (HSSFRow) rows.next();
Iterator cells = row.cellIterator();

List data = new ArrayList();
while (cells.hasNext()) {
HSSFCell cell = (HSSFCell) cells.next();
data.add(cell);
 }

sheetData.add(data);
 }
 } catch (IOException e) {
e.printStackTrace();
 } finally { 
 if (fis != null) {
 fis.close();
 }
 }

 showExcelData(sheetData);
  }

 private static void showExcelData(List sheetData) {
  //
    // Iterates the data and print it out to the console.
  //
for (int i = 0; i < sheetData.size(); i++) {
 List list = (List) sheetData.get(i);
for (int j = 0; j < list.size(); j++) {
Cell cell = (Cell) list.get(j);
if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
System.out.print(cell.getNumericCellValue());
} else if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
System.out.print(cell.getRichStringCellValue());
} else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
System.out.print(cell.getBooleanCellValue());
}
if (j < list.size() - 1) {
System.out.print(", ");
}
}
System.out.println("");
}
}
} 
```

我必须添加什么来做我向你解释的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:45:13.593

在开始迭代工作表之前初始化数组列表方式，数组列表必须有一个范围，可以在 excel 工作表的行和列迭代中的任何地方持续存在。

```
ArrayList myList = new ArrayList() 
```

将这些行放在单元迭代循环中，该循环正在执行 n 行基础

```
if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) 
{
System.out.print(cell.getNumericCellValue());
myList.add(cell.getNumericCellValue());
} 
else if (cell.getCellType() == Cell.CELL_TYPE_STRING) 
{
System.out.print(cell.getRichStringCellValue());
myList.add(cell.getRichStringCellValue());
} 
else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) 
{
System.out.print(cell.getBooleanCellValue());
myList.add(cell.getBooleanCellValue());
} 
```

现在您处理此列表以将数据插入数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T10:33:35.617

我发现这个功能可用

 `````
public static ArrayList<ArrayList<String>> GetExcelTableInto2DArrayListString(String excelFile, boolean debug){

    ArrayList<ArrayList<String>> OUT = new ArrayList<ArrayList<String>>();  
        File myFile = new File(excelFile); 
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(myFile);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

        // Finds the workbook instance for XLSX file 
        XSSFWorkbook myWorkBook = null;
        try {
            myWorkBook = new XSSFWorkbook (fis);
        } catch (IOException e) {
            e.printStackTrace();
        } 

        // Return first sheet from the XLSX workbook 
        XSSFSheet mySheet = myWorkBook.getSheetAt(0); 

        // Get iterator to all the rows in current sheet 
        Iterator<Row> rowIterator = mySheet.iterator(); 

        // Traversing over each row of XLSX file 
        int count=1;
        while (rowIterator.hasNext()) { 
            Row row = rowIterator.next();
            ArrayList<String> InnerArray = new ArrayList<String>() ;
            if(debug)System.out.print(count + ". \t");
        // For each row, iterate through each columns 
            Iterator<Cell> cellIterator = row.cellIterator(); 

            while (cellIterator.hasNext()) {

                Cell cell = cellIterator.next(); 

                switch (cell.getCellType()) { 
                case Cell.CELL_TYPE_STRING: 
                    String c = cell.getStringCellValue();
                    if(debug)System.out.print(c + "\t");
                    InnerArray.add(c);
                    break; 
                case Cell.CELL_TYPE_NUMERIC: 
                    int n = (int) cell.getNumericCellValue();
                    if(debug)System.out.print(n + "\t");
                    InnerArray.add(String.valueOf(n));
                    break; 
                case Cell.CELL_TYPE_BOOLEAN:
                    boolean b = cell.getBooleanCellValue();
                    if(debug)System.out.print(b + "\t");
                    InnerArray.add(String.valueOf(b));
                break; 
                default : 
                    } 
                }
            if(debug)System.out.println("");
            OUT.add(InnerArray);
            count++; 
            }

    return OUT;
} 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-03T17:14:49.603

看下面的代码

```
public List<ArrayList<String>> readExcelData2(String excelFile) throws IOException {

    List<ArrayList<String>> depts = new ArrayList<ArrayList<String>>();

    FileInputStream excelFileToRead = new FileInputStream(new File(excelFile));

    XSSFWorkbook wb = new XSSFWorkbook(excelFileToRead);

    XSSFSheet sheet = wb.getSheetAt(0);

    XSSFRow row;
    XSSFCell cell;
    int maxDataCount = 0;

    Iterator<Row> rows = sheet.rowIterator();

    while (rows.hasNext()) {
        row = (XSSFRow) rows.next();
        // skip the first row because it will be header
        if (row.getRowNum() == 0) {
            maxDataCount = row.getLastCellNum();
            continue;
        }

        // if the row is empty stop the loop, do not go further
        if (this.isRowEmpty(row, maxDataCount)) {
            // exit processing
            break;
        }

        // define arraylist object to store list of departments of each row
        ArrayList<String> innerArrayList = new ArrayList<String>();

        for (int cn = 0; cn < maxDataCount; cn++) {
            cell = row.getCell(cn, Row.CREATE_NULL_AS_BLANK);

            switch (cell.getCellType()) {
            case Cell.CELL_TYPE_STRING:
                innerArrayList.add(cell.getStringCellValue());
                break;
            case Cell.CELL_TYPE_NUMERIC:
                innerArrayList.add(String.valueOf(cell.getNumericCellValue()));
                break;

            default:
                innerArrayList.add(cell.getStringCellValue());
                break;
            }

        }
        depts.add(innerArrayList);

    }
    return depts;
}

public boolean isRowEmpty(Row row, int lastCellNo) {
    for (int c = row.getFirstCellNum(); c < lastCellNo; c++) {
        Cell cell = row.getCell(c, Row.CREATE_NULL_AS_BLANK);
        if (cell != null && cell.getCellType() != Cell.CELL_TYPE_BLANK) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-30T15:03:15.150

将您的条件部分更改为此应该可以工作：

```
 if (cell.getCellType() == NUMERIC) {
    System.out.print(cell.getNumericCellValue());
    } else if (cell.getCellType() == STRING) {
    System.out.print(cell.getRichStringCellValue());
    } else if (cell.getCellType() == BOOLEAN) {
    System.out.print(cell.getBooleanCellValue());
    } 
`````

# balanced-payments - 删除卡或重新分配到新帐户

> ID：15902103
> 
> 赞同：1
> 
> 时间：2013-04-09T12:37:25.213
> 
> 标签：balanced-payments

我们正在开发中，并且在卡和帐户方面存在问题。看来，一旦卡与帐户相关联，它就会永远卡在那里。

我们有客户创建新帐户的情况，尤其是在开发中:)，并且需要一种方法来删除卡和帐户或将卡分配给新帐户。

当在开发中使用测试 4111... 卡时，我们尝试开发和测试创建新帐户等，自该测试以来，我们收到类似“card-already-funding-src：卡已与帐户关联”之类的错误卡已经在帐户中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:12:04.573

实际上直接从Balanced得到了答案。关键是创建卡片。您可以使用相同的卡号，但您需要为每张卡获取一个新的 URI，然后您可以将其添加到新帐户！如果您尝试添加具有相同 uri 的同一张卡，它将失败。

# hibernate - 在 Hibernate 中取消瞬态引用

> ID：15902115
> 
> 赞同：0
> 
> 时间：2013-04-09T12:37:59.587
> 
> 标签：hibernate, transient

我有一个场景，我需要删除一个父实体，这样做我需要取消与父实体关联的引用。

例如，我有两个表格/实体人员和地址。人是父母，地址是孩子（一对多）。现在，当我删除 Person 时，我需要取消 Address 表中的人员引用。

我们是否有任何预定义的注释来完成这项工作。

非常感谢任何帮助/建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:54:09.463

我看到的最简单的方法是在删除后刷新子实体。由于您的关系是双向的，否则您可以使用父级上的 @PreRemove 方法自动管理它（将所有子级的父级引用设置为 null）。

恕我直言，这里误用了瞬态这个词，瞬态意味着该属性不会被持久化，删除引用应该更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:12:03.547

您必须手动完成：

```
@Entity
public class Person {
    ...
    @OneToMany(mappedBy="person")
    public List<Address> addresses;  
    ...
}

@Entity
public class Address {
    ...
    @ManyToOne
    public Person person;
    ...
}

for (Address address: person.addresses) {
    address.person = null;  
}
session.delete(person); 
```

# c# - 是否可以删除 TabControl 中选定选项卡上的虚线矩形和视觉样式？

> ID：15902118
> 
> 赞同：0
> 
> 时间：2013-04-09T12:38:05.213
> 
> 标签：c#, focus, tabcontrol, ownerdrawn

我的extendedtabcontol 类有问题，我无法摆脱选定选项卡上的虚线框或视觉样式框。我有自己的 DrawItem（见下文），我已经覆盖了 tabcontrol 中的几个方法，甚至覆盖了 WndProc 中的 WM_SETFOCUS 和 WM_PAINT，但框和突出显示不会消失。无论如何要关闭它们（框或视觉样式）或简单的方法来绘制它们/停止它们绘制？

用户可以知道选择了哪个选项卡，因为当其他选项卡为灰色时，它以黑色绘制。

```
 protected void OnDrawItem(object sender, DrawItemEventArgs e)
    {

       // VisualStyleRenderer renderer =
       // new VisualStyleRenderer(VisualStyleElement.Tab.TabItem.Disabled);
        DrawItemState ds = e.State;
        SolidBrush mybrush = new SolidBrush(Color.FromArgb(255, 151, 0, 11));
        Rectangle tabArea2 = new Rectangle(0, 0, this.Size.Width+10, this.Size.Height+10);

        //renderer.DrawBackground(e.Graphics, tabArea2);
        e.Graphics.FillRectangle(mybrush, tabArea2);
        int i = 0;

        foreach (TabPage tb in this.TabPages)
        {               
            Rectangle tabArea = this.GetTabRect(i);
            Point newp = new Point(tabArea.Location.X,tabArea.Location.Y + 2);
            tabArea.Location = newp;
            if (this.SelectedIndex != i)
            {
                RectangleF tabTextArea = (RectangleF)this.GetTabRect(i);
                e.Graphics.DrawImage(global::Config.Properties.Resources.Tab2, tabArea.Location);
            }
            else
            {
                e.Graphics.DrawImage(global::Config.Properties.Resources.Tab1, tabArea.Location);
            }
            SizeF size = e.Graphics.MeasureString(tb.Name.ToString().Trim(), drawFont);
            PointF pf = new PointF();
            pf.X = tabArea.X + (tabArea.Width / 2) - (size.Width/2);
            pf.Y = tabArea.Y + (tabArea.Height / 2) - (size.Height/2);
            e.Graphics.DrawString(tb.Name.ToString().Trim(), drawFont, drawBrush, pf);

            i++;
        }
    } 
```

我会发布一张图片，但我没有声誉。例如类似的问题： [我可以删除 TabControl 上选项卡上的虚线焦点矩形吗？](https://stackoverflow.com/questions/5216764/can-i-remove-the-dotted-focus-rectangle-over-tabs-on-a-tabcontrol/15901021#15901021)

# javascript - jQuery数据表行选择

> ID：15902129
> 
> 赞同：0
> 
> 时间：2013-04-09T12:38:33.653
> 
> 标签：javascript, asp.net, datatable, multipleselection

我正在使用 jquery 数据表。我需要使用普通的单击、ctrl+A 和 shift 键选择来选择行。下面给出了示例，使用 javascript 并将行 ID 存储在任何变量中。我们是怎么做到的？如果示例是代码，请在此处提出建议

[这是一个样本](http://demos.telerik.com/aspnet-ajax/grid/examples/client/selecting/defaultcs.aspx)

同样需要 javascript ，数据表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:58:38.947

让我给你一个更高层次的逻辑

1.  创建带有复选框的数据表。确保为这些复选框和相应的行生成 id。

2.  单击复选框时，您可以轻松找到行的ID。继续单击时将它们保存在数组中。

3.  如果您想一次全选，请为全选复选框提供一个特定的 ID，然后单击该复选框，遍历您的数据表并获取所有行并将它们放入一个数组中。

4.  一旦你有了 onClick 的逻辑，你就可以轻松地添加 javascript 键盘事件。

我很抱歉没有将一些代码放在一起，这是很多代码要编写但足够简单。

# boost-graph - 从提升图中临时移除边

> ID：15902134
> 
> 赞同：1
> 
> 时间：2013-04-09T12:38:49.217
> 
> 标签：boost-graph

我写了一个算法，它（某种）“拓扑排序”（不精确）。该算法复制给定的图，然后操作副本（通过删除边）。在百万节点提升图上，如果我的算法需要 3.1 秒，则将给定图复制到新图会消耗 2.19 秒。

我可以删除边缘而不实际永久删除它们，例如 boost::graph 库中的某种掩蔽吗？算法完成后，我取消屏蔽所有边，图恢复其原始状态。我怀疑这应该使我的算法运行得更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:33:42.513

Boost.Graph[`filtered_graph`](http://www.boost.org/libs/graph/doc/filtered_graph.html)似乎非常适合您想要的。不幸的是，我真的不知道它是否会比您当前的方法表现更好（我怀疑它会）。如果您决定实施这种方法，我很想听听结果。

[LWS 上的示例](http://liveworkspace.org/code/4pvbsa%240)。

```
#include <iostream>
#include <tuple>

#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/filtered_graph.hpp>
#include <boost/graph/topological_sort.hpp>

#include <boost/unordered_set.hpp>

struct Vertex
{
   Vertex(){}
   Vertex(int val):name(val){}
   int name;
};

typedef boost::adjacency_list<boost::vecS,boost::vecS,boost::directedS,Vertex> graph_type;

typedef boost::graph_traits<graph_type>::vertex_descriptor vertex_descriptor;
typedef boost::graph_traits<graph_type>::edge_descriptor edge_descriptor;

// A hash function for edges.
struct edge_hash:std::unary_function<edge_descriptor, std::size_t> 
{
    edge_hash(graph_type const& g):g(g){}

    std::size_t operator()(edge_descriptor const& e) const {
    std::size_t seed = 0;
    boost::hash_combine(seed, source(e,g));
    boost::hash_combine(seed, target(e,g));
    //if you don't use vecS as your VertexList container
    //you will need to create and initialize a vertex_index property and then use:
    //boost::hash_combine(seed,get(boost::vertex_index, g, source(e,g)));
    //boost::hash_combine(seed,get(boost::vertex_index, g, target(e,g)));
    return seed;
  }

  graph_type const& g;
};

typedef boost::unordered_set<edge_descriptor, edge_hash> edge_set;
typedef boost::filtered_graph<graph_type,boost::is_not_in_subset<edge_set> > filtered_graph_type;

template <typename Graph>
void print_topological_order(Graph const& g)
{
   std::vector<vertex_descriptor> output;
   topological_sort(g,std::back_inserter(output));
   std::vector<vertex_descriptor>::reverse_iterator iter=output.rbegin(),end=output.rend();
   for(;iter!=end;++iter)
      std::cout << g[*iter].name << " ";
   std::cout << std::endl;
}

int main()
{
   graph_type g;

   //BUILD THE GRAPH
   vertex_descriptor v0 = add_vertex(0,g);
   vertex_descriptor v1 = add_vertex(1,g);
   vertex_descriptor v2 = add_vertex(2,g);
   vertex_descriptor v3 = add_vertex(3,g);
   vertex_descriptor v4 = add_vertex(4,g);
   vertex_descriptor v5 = add_vertex(5,g);

   edge_descriptor e4,e5;
   add_edge(v0,v1,g);
   add_edge(v0,v3,g);
   add_edge(v2,v4,g);
   add_edge(v1,v4,g);
   std::tie(e4,std::ignore) = add_edge(v4,v3,g);
   std::tie(e5,std::ignore) = add_edge(v2,v5,g);
   //GRAPH BUILT

   std::cout << "Original graph:" << std::endl;
   print_topological_order(g);

   edge_hash hasher(g);
   edge_set removed(0,hasher); //need to pass "hasher" in the constructor since it is not default constructible

   filtered_graph_type fg(g,removed); //creates the filtered graph

   removed.insert(e4); //you can "remove" edges from the graph by adding them to this set
   removed.insert(e5);   

   std::cout << "Filtered Graph after \"removing\" 2 edges" << std::endl;
   print_topological_order(fg);

   removed.clear(); //clearing the set restores your original graph

   std::cout << "Filtered Graph after resetting" << std::endl;
   print_topological_order(fg);

} 
```

# c# - 如何在 Silverlight 中为文本框设置输入语言

> ID：15902135
> 
> 赞同：1
> 
> 时间：2013-04-09T12:38:49.703
> 
> 标签：c#, wpf, silverlight

我可以像这样在 WPF 中为文本框设置输入语言：

```
InputLanguageManager.SetInputLanguage(textBoxName, CultureInfo.CreateSpecificCulture("ru")); 
```

但是 System.Windows.Input 程序集中没有 InputLanguageManager 类。如何更改 Silverlight 中的输入语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:00:04.327

Silverlight 不支持更改用户输入语言。因为 silverlight 是部分受信任的，并且出于安全原因无法访问系统资源。

欲知更多详情，请查看以下链接

[Silverlight 中的用户输入语言](http://msdn.microsoft.com/en-us/library/dd470128%28v=VS.95%29.aspx)

# javascript - TinyMCE、save_callback 和 onSaveContent

> ID：15902136
> 
> 赞同：2
> 
> 时间：2013-04-09T12:38:51.970
> 
> 标签：javascript, jquery, callback, tinymce, save

我正在使用带有一些自定义插件的 tinyMCE 编辑器。我遇到的问题是当我保存内容时，我想在将 HTML 发送到服务器之前做一些工作。我知道有两个函数可以捕获保存事件。save_callback(id, html, body) 允许直接修改 html。我无法修改 onSaveContent 中的内容（DOM 或其他）。

```
save_callback: function (id, html, body) {
    // do the work on html
    return html;
},
setup: function (ed) {
    ed.onSaveContent.add(function (ed, o) {
        //I can't modify
    });
}, 
```

此外，每个保存操作都会多次调用 save_callback（2 或 4 次）。

我成功修改了 save_callback 中的 HTML，但是使用原始参数重新调用了该函数，并且我不想再次执行该工作，因为内部调用了 Web 服务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T10:59:29.930

```
save_callback: function (id, html, body) {
    // do the work on html
    return html;
},
setup: function (ed) {
    ed.onSaveContent.add(function (ed, o) {
        o.content = mynewcontent; // here you can modify the content
    });
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T21:12:38.167

这是一个示例，如果您想使用 DOM 操作而不是字符串来更新编辑器内容。

```
setup: function (ed) {
    ed.onSaveContent.add(function (ed, o) {
       var images = ed.dom.select("img");
       ed.dom.setAttrib(images, "height", "55")
       o.content = editor.getContent();
    });
}, 
```

# javascript - 在 Node 上使用 Selenium 的 WebDriverJs 截屏的正确语法

> ID：15902142
> 
> 赞同：13
> 
> 时间：2013-04-09T12:39:11.310
> 
> 标签：javascript, node.js, selenium, selenium-webdriver, webpage-screenshot

[使用Selenium 的 webdriverjs](https://code.google.com/p/selenium/wiki/WebDriverJs)运行 webdriver 测试时截屏的正确方法是什么？

我已经启动了独立的 selenium 服务器，我可以看到在 selenium-server 上记录了截图命令，但截图没有被保存。

我的代码如下：

```
var webdriver = require('selenium-webdriver');
var driver = new webdriver.Builder().usingServer('http://localURL:4444/wd/hub').withCapabilities({'browserName': 'chrome'}).build();
driver.get([URL to webserver on my local machine])

driver.takeScreenshot("c:\\selenium_local_map\\out1.png"); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-20T03:25:55.937

截屏返回一个承诺，该承诺将使用 Base64 编码的 png 进行解析。要写入数据，您需要执行以下操作：

```
function writeScreenshot(data, name) {
  name = name || 'ss.png';
  var screenshotPath = 'C:\\selenium_local_map\\';
  fs.writeFileSync(screenshotPath + name, data, 'base64');
};

driver.takeScreenshot().then(function(data) {
  writeScreenshot(data, 'out1.png');
}); 
```

更多文档可以在[这里找到](http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/index_exports_WebDriver.html#takeScreenshot)

# javascript - fcbkcomplete 与 ajax 请求来获取数据

> ID：15902143
> 
> 赞同：0
> 
> 时间：2013-04-09T12:39:14.550
> 
> 标签：javascript, jquery, ajax

我刚刚在我的项目中尝试了 fcbkcomplete，但是我在调​​用 ajax 请求以将结果获取到自动完成时遇到了麻烦，有人知道如何完成吗？

服务器端 ：

```
 public static string tagFriendAutocomplete()
{
    string Result = "";
    string query = "select fr.FRIEND_ID,c.[USER_NAME] from clients c inner join friends fr on c.CLIENT_ID=fr.FRIEND_ID and fr.CLIENT_ID=1 and c.[USER_NAME] like '%a%' ";

    DataTable dt = new SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
    if (dt.Rows.Count > 0)
    {
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            Result += dt.Rows[i]["USER_NAME"] + ",";
        }
    }

    return Result;
} 
```

客户端 ：

```
$(document).ready(function () {
            $("#select3").fcbkcomplete({
                //"autoCompleteFriendTag/data.txt",
                addontab: true,
                maxitems: 10,
                input_min_size: 0,
                height: 10,
                cache: true,
                newel: false,
                select_all_text: "select"
            });

 }); 
```

我不知道在哪里放置 jquery ajax 代码任何帮助请我已经 2 天寻找解决方案，但遗憾的是我找不到我的 ajax 代码是：

```
$.ajax({
                type: 'POST',
                url: 'Testautocomplete.aspx/tagFriendAutocomplete',
                data: "{}",
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {

                  return  data.d.split(',');

                },
                error: function (xhr) {
                    alert("responseText: " + xhr.responseText);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:59:44.590

尝试这个;

```
$(document).ready(function () {
        $("#select3").fcbkcomplete({
            json_url: 'Testautocomplete.aspx/tagFriendAutocomplete',
            addontab: true,
            maxitems: 10,
            input_min_size: 0,
            height: 10,
            cache: true,
            newel: false,
            select_all_text: "select"
        });
}); 
```

有一点很重要，您必须`json`通过序列化数据以格式发送数据。

你后面的代码应该是这样的；

```
public static string tagFriendAutocomplete()
{

   Dictionary<> jsonResult= new Dictionary<>();  
   string query = "select fr.FRIEND_ID,c.[USER_NAME] from clients c inner join friends fr           on c.CLIENT_ID=fr.FRIEND_ID and fr.CLIENT_ID=1 and c.[USER_NAME] like '%a%' ";

   DataTable dt = new  SQLHelper(SQLHelper.ConnectionStrings.WebSiteConnectionString).getQueryResult(query);
   if (dt.Rows.Count > 0)
   {
     for (int i = 0; i < dt.Rows.Count; i++)
      {
        jsonResult.Add(dt.Rows[i]["USER_NAME"], i); 
      }
   }

   var result = from r in jsonResult select new  
    {  
       key = r.Key,  
       value = r.Value  
    };  

   JavaScriptSerializer ser = new JavaScriptSerializer();
   context.Response.Write(ser.Serialize(result));
} 
```

# sql - 此 SQL 没有匹配的唯一键或主键

> ID：15902152
> 
> 赞同：0
> 
> 时间：2013-04-09T12:39:38.513
> 
> 标签：sql, oracle

我正在尝试编写此代码

```
CREATE TABLE BOOK
(BOOKNO NUMBER(4) PRIMARY KEY NOT NULL,
BTIME NUMBER(24,22),
CNAME VARCHAR2(10) ,
BTYPE VARCHAR2(13),
TABLENO NUMBER(2),
EMPNO NUMBER(4),
ENAME VARCHAR2(10),
BDATE  DATE DEFAULT '23-MAR-13',
FOREIGN KEY (CNAME) REFERENCES BOOK (CNAME)); 
```

但它告诉我，我在创建外键时遇到了这个错误

> 第 10 行出现错误：
> ORA-02270：此列列表没有匹配的唯一键或主键

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:43:24.283

**Oracle/PLSQL：ORA-02270 错误**

您尝试使用唯一键或主键引用表，但您列出的列与主键不匹配，或者此表不存在主键。

```
CREATE TABLE BOOK
(BOOKNO NUMBER(4) PRIMARY KEY NOT NULL,
BTIME NUMBER(24,22),
CNAME VARCHAR2(10) ,
BTYPE VARCHAR2(13),
TABLENO NUMBER(2),
EMPNO NUMBER(4),
ENAME VARCHAR2(10),
BDATE  DATE DEFAULT '23-MAR-13',
FOREIGN KEY (CNAME) REFERENCES BOOK (BOOKNO)); 
```

**更新**

```
CREATE TABLE BOOK
    (BOOKNO NUMBER(4) PRIMARY KEY NOT NULL,
    BTIME NUMBER(24,22),
    CNAME VARCHAR2(10) NOT NULL UNIQUE,
    BTYPE VARCHAR2(13),
    TABLENO NUMBER(2),
    EMPNO NUMBER(4),
    ENAME VARCHAR2(10),
    BDATE  DATE DEFAULT '23-MAR-13',
    FOREIGN KEY (CNAME) REFERENCES BOOK (CNAME)); 
```

# oracle - Oracle Discoverer BI：如何在使用 SUM 的计算中使用 DECODE

> ID：15902161
> 
> 赞同：0
> 
> 时间：2013-04-09T12:39:50.317
> 
> 标签：oracle, plsql

是否可以在 SUM 字段上使用 DECODE ？例如，像这样：

```
DECODE( SUM("QTA' CONV SUM 1 2 2"),'>0',1,'=0',0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:45:41.180

`1`在您的特定情况下，如果您希望结果`SUM`大于零或`0`为零`SUM`，您可以使用 Oracle`SIGN`函数。我不确定是否有任何特殊的 Discoverer 语法，但在 Discoverer 之外我会这样做：

```
SIGN(SUM(whatever you're summing)) 
```

“techonthenet”站点在[此处](http://www.techonthenet.com/oracle/functions/sign.php)记录了该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:55:25.280

@EdGibbs 的替代方法，如果您求和的值是整数：

```
Greatest(Sum(...),1) 
```

如果您有负面因素要应对，那么也许：

```
Least(Greatest(Sum(...),1),0) 
```

语法有点粗糙，所以如果你确实想坚持使用 Decode 或 Case 然后：

```
Case Sum(...)
  When 0 Then 0
  Else 1
End 
```

... 或者 ...

```
Decode(Sum(...),0,0,Sum(...)) 
```

不过，我不会寻求重复 Sum() 的解决方案。保持[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

# apache - 如何找出上次重新启动apache的时间？

> ID：15902165
> 
> 赞同：11
> 
> 时间：2013-04-09T12:40:00.173
> 
> 标签：apache, centos, kloxo

我有一个`kloxo`安装了控制面板的 VPS。我正在使用`CentOS 5.8 32-bit`.

我今天重新启动了 Apache，但忘记了我这样做的时间。知道准确的时间非常重要。

我可以使用日志文件或 SSH 命令找到它吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T15:16:16.633

通过 SSH 登录到您的 VPS 并输入命令：

```
grep resuming /var/log/httpd/error_log 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T14:47:36.787

您可以从 Apache 日志中找到这一点。您需要通过 ssh 登录您的 VPS 并检查您的 apache 实例的 error_log。

您应该找到类似以下内容：

```
[Tue Apr 09 11:43:23 2013] [notice] Apache/2.2.15 (Unix) DAV/2 configured -- resuming normal operations 
```

这将准确地告诉您上次成功启动 apache 实例的时间

# ios - 自定义 UINavigationBar 动画

> ID：15902168
> 
> 赞同：1
> 
> 时间：2013-04-09T12:40:09.783
> 
> 标签：ios, cocoa-touch, uinavigationbar

我将 UINavigationBar 子类化以设置自定义背景图像。

我正在使用它来初始化 UINavigationController：

```
-(id)initWithNavigationBarClass:(Class)navigationBarClass toolbarClass:(Class)toolbarClass 
```

问题是当新的 UIViewControllers 被推送到 NavigationController 堆栈时，标题文本会从右侧穿过背景图像以一种看起来有点糟糕的方式进行动画处理。

问题：如何调整动画，例如它在动画时淡入。

我最接近的方法是在推送/弹出的 ViewController 类中创建自定义淡入淡出动画。我使用 NSTimer 来触发对 titleView 的 alpha 的更改：

```
UILabel *titleView = (UILabel *)self.navigationItem.titleView;

...

-(void)setAlpha:(float)alpha
{
   titleView.textColor = [UIColor colorWithRed:grayShade green:grayShade blue:grayShade alpha:alpha];
} 
```

但是，如果我在“ViewDidAppear”中触发它已经太晚了，并且在新视图完成滑入后开始淡出。我想我可以在“ViewWillAppear”中触发它，但这可能会导致不确定和不一致的时间在不同的设备上。我的假设是否正确，如果是这样，我怎样才能以我想要的方式自定义动画？

# web-services - Web 服务支持逻辑的适当位置

> ID：15902171
> 
> 赞同：0
> 
> 时间：2013-04-09T12:40:27.133
> 
> 标签：web-services, axis2, wso2

我将在 WSO2 AS 上创建 Axis2 Web 服务。AFAIK .aar 必须在 service.xml 中包含服务类及其配置。为了处理 Web 服务收到的请求，我将实现一些业务逻辑，包括通过 Hibernate 与 DB 进行交互。就系统架构而言，将所有这些逻辑放入 Web 服务类是错误的。在我的情况下，业务逻辑实现的合适位置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:48:14.110

您可以在 Axis2 项目中对此进行建模。您应该只在服务类中添加服务发布方法，无需在其中实现核心逻辑。您可以轻松地将其建模为具有不同层次结构和方面的项目。

查看此[示例博客文章](http://fazlansabar.blogspot.com/2012/04/apache-axis2-tutorial-integrating-with.html)以及如何对项目进行建模，可在教程末尾找到。

# objective-c - Objective C / 解决数学系统

> ID：15902173
> 
> 赞同：4
> 
> 时间：2013-04-09T12:40:30.923
> 
> 标签：objective-c, xcode, math, computational-geometry

我一直在尝试开发一个简单的应用程序，该应用程序使用用户提供的信息计算曲线方程。

例如，假设用户有一个圆方程和一个椭圆方程，他想知道交点。从数学上讲，这是一个非常简单的问题，但我不知道如何告诉 Xcode 解决该系统。

我查看了 Accelerate 框架，发现了 Lapack 的“dgesv”功能。对于线系统来说，这将是一个完美的解决方案，但是像我之前所说的更复杂的系统呢？

我什至想知道如何计算曲线的切线，以及其他类似的几何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-07T20:03:46.117

> 例如，假设用户有一个圆方程和一个椭圆方程，他想知道交点。从数学上讲，这是一个非常简单的问题，但我不知道如何告诉 Xcode 解决该系统。

圆和椭圆相交的问题通常涉及求解四次多项式方程。您可以将其分解为三度，但仅平方根是不够的。所以我会说这不是一个真正的“安静简单的问题”。话虽如此，一些数值库确实支持查找单变量多项式的实根或复根的算法。所以你会消除你的一个变量（例如使用结果或 Gröbner 基），然后将得到的多项式提供给它。不确定哪些库最适合 Objective C 世界。但是无论如何，一个要求建议特定库的问题都将被视为离题，因此请使用我提到的关键字来找到适合您需求的内容。

> 我什至想知道如何计算曲线的切线，以及其他类似的几何问题。

切线方向简单地与隐式形式的梯度正交。换句话说，不要将曲线参数化地描述为 x=f(t) 和 y=g(t)，而是隐含地描述为 f(x,y)=0。如果一个圆看起来像*x* ² + *y* ² + *ax* + *by* + *c* =0。然后计算关于*x*和*y*的偏导数。即 2x+a 和 2y+b。所以 (2x+a, 2y+b) 垂直于圆，而 (2y+b, -2x-a) 是切线的。不确定您认为与此类似的内容。

# c# - 在 C# 中显示/排序列表项的最佳方式

> ID：15902174
> 
> 赞同：-5
> 
> 时间：2013-04-09T12:40:31.270
> 
> 标签：c#, sorting

不久前，我决定自学 C#，并在过去的 3 个月中慢慢学习了 Windows 窗体应用程序的许多控件。我知道这似乎是一个简单的问题，但在这一点上，我不知道该往哪个方向去满足我的需要。有人可以给我一点方向吗？

为了自学 C#，我创建了一个基本上模仿 Quicken 的个人应用程序。到目前为止，我刚刚弄清楚如何保存我的 CHECK#、PAYEE、ETC。检查字段作为列表项，然后将其保存为 CSV ......就像我说的，仍然在这里学习。我想做的是采取下一步并加载 CSV 文件并以表格格式显示所有支票，可能具有交替的背景颜色，以及我单击的可排序标题（CHECK #、PAYEE、AMOUNT、BALANCE）按特定列排序。我还不想进入数据库，所以有人可以指出我可以通过的控制和控制教程的方向吗？我正在考虑将 CSV 加载到字符串列表中，然后将其发送到 ListView 容器，但我不熟悉该工具，或者即使它是适合该工作的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:43:35.210

您可能需要一个数据网格。这个问题显示了如何将数据网格绑定到列表（例如，与来自数据库的数据源相反）：

[如何将列表绑定到 dataGridView？](https://stackoverflow.com/questions/1228539/how-to-bind-list-to-datagridview)

# web - 打开位置数据？

> ID：15902177
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:40:35.583
> 
> 标签：web, geolocation, location, opendata

有谁知道我在哪里可以访问英国或全球城镇/城市/县等的一些良好**位置数据？**

希望用于在网络应用程序中自动完成表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:04:48.020

你可以试试[OpenStreetMap](http://wiki.openstreetmap.org/wiki/Downloading_data)。您可以下载整个星球的地理位置数据，也可以仅下载某些区域的地理位置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:16:59.100

您还可以查看英国的[开放数据门户](http://data.gov.uk/)。

# dependency-injection - Ninject 多层控制台应用程序

> ID：15902179
> 
> 赞同：2
> 
> 时间：2013-04-09T12:40:43.803
> 
> 标签：dependency-injection, ninject, console-application, multi-tier

我有一个具有以下组件的多层控制台应用程序： - 数据访问层 - 域层 - 使用数据访问层中定义的数据存储库类 - 引擎 - 这包含应用程序的入口点并使用域层类，编排操作

数据访问层类和领域层类实现了一组接口。你如何建议我做 DI？我是否需要在我的域类和引擎类中都引用 Ninject，有没有其他方法可以在一个地方进行绑定？这样做的最佳模式是什么。

我刚开始使用 DI 和 Ninject，所以任何帮助、示例和解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:45:07.187

我会给你写一个简单的例子并添加到我的github上。应该在 30 分钟左右到达。将尽快在此处发布链接

编辑：这里有示例项目：[ConsoleApplicationNinject](https://github.com/codeplanner/ConsoleAppNinject)

编辑：这就是你要做绑定的地方。[https://github.com/codeplanner/ConsoleAppNinject/blob/master/ConsoleAppNinject/Ninject/ServiceModule.cs](https://github.com/codeplanner/ConsoleAppNinject/blob/master/ConsoleAppNinject/Ninject/ServiceModule.cs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:50:32.053

> 我是否需要在我的域类和引擎类中都引用 Ninject，有没有其他方法可以在一个地方进行绑定？这样做的最佳模式是什么。

尽可能靠近应用程序的入口点。

这个地方被称为[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)。

# c - 整数在C文件中显示为字符

> ID：15902180
> 
> 赞同：0
> 
> 时间：2013-04-09T12:40:45.383
> 
> 标签：c

这是我的一段代码，它应该创建一个由 10 个随机整数组成的数组，将它们打印到文件中，然后将它们按顺序排列并将有序数组附加到文件中，

如何停止在文件中显示为 ascii 字符的整数？

```
size=10;
int nums1[size];
for(i=0;i<size;i++)
{
    nums1[i]=rand();
}

FILE *fp;
if((fp=fopen("ARRAY_1", "w"))==NULL) {
    printf("Cannot open file.\n");
}
if(fwrite(nums1, sizeof(int), size, fp) != size) {
    printf("File read error.");
}
fclose(fp);

bubblesort(nums1,size);

if((fp=fopen("ARRAY_1", "a"))==NULL) {
    printf("Cannot open file.\n");
}
if(fwrite(nums1, sizeof(int), size, fp) != size) { 
    printf("File read error.");
}
fclose(fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:58:21.453

`fwrite`只会调用`fputc`哪个输出指定字节到指定文件。当您在文本编辑器中打开此文件时，它将将该数据解释为 ASCII 代码。您可以使用[od](http://unixhelp.ed.ac.uk/CGI/man-cgi?od)（适用于 Linux）或[Debug](http://en.wikipedia.org/wiki/Debug_%28command%29)（适用于 Windows）之类的命令来检查文件的实际内容，以显示该文件中数据的各种表示形式。

如果您希望实际整数在文本编辑器中显示为字符，请使用`fprintf`：

```
int i;
for(i = 0; i < size; i++) {
    if(fprintf(fp, "%d ", nums1[i]) < 0) {
        /* An error occurred */
    }
} 
```

`fprintf`将像您预期的那样工作，因为它将*参数*（即`nums1[i]`）转换为指定为第二个参数的格式。

例如，考虑

`fprintf(stdout, "%d", 1);`

在这里，`fprintf`将取数字 1 并将其转换为等效的 ASCII 码（ASCII 码是十进制的 49）并将该 ASCII 码输出到标准输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:43:29.377

如果您使用 fwrite 并用它写入二进制数据，则不能期望文件中有文本。使用 fprintf 或 ofstream (C++)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:45:11.840

您只是将数组作为二进制数据块写入文件。

如果你想输出数组的元素，你需要像`fprintf(fp, "%d", nums[i]);`循环一样的东西。

# php - 如何将html表单传递的值原样存储到mysql DB中？

> ID：15902184
> 
> 赞同：0
> 
> 时间：2013-04-09T12:40:57.033
> 
> 标签：php, html, mysql, encryption, encode

我想知道如何将 html 表单传递的值存储到 mysql 表中，因为它是格式方面的。谁能帮我。

让我澄清一下我的问题。当用户在文本区域中输入他的地址时，例如，

```
no:14,cross cut road,

XXX nagar,

Tamilnadu,

india. 
```

当这个值从表单传递并存储在 mysql 表中时，当我下次检索它时，它将显示在一行中，比如

```
no:14,cross cut road,XXX nagar,Tamilnadu,india. 
```

但我想像上一个一样以相同的格式显示它，就像他们输入的方式一样。

任何人都可以帮助如何做到这一点？？？

提前致谢。

我不知道使用任何网络编辑器。所以我尝试了 n2lbr 函数并得到了相同的格式。新线路问题已解决，但现在面临空间问题。如果我留下 10 个空格并写了一个文本，它只会显示文本......而不是空格。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:49:41.083

利用

```
mysql_real_escape_string doesn't remove line breaks, it escapes them. 
```

显示使用时

```
 nl2br for adding those line breaks. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:50:25.743

当您在文本区域中按 Enter 键时，“\n”字符会附加到您的文本中，并且该字符存储在 DB 中，但是当您从 DB 中读取并想要可视化您的文本时，您应该考虑您的组件识别 '\ n' 字符，如果它不能识别换行符（即'\n'），那么你应该用html break（即br）标签替换'\n' 以在html 中显示新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:44:42.277

您应该使用像[ckeditor这样的](http://ckeditor.com/)[所见即所得](http://en.wikipedia.org/wiki/WYSIWYG)编辑器。

# c# - 查询字符串演示

> ID：15902189
> 
> 赞同：1
> 
> 时间：2013-04-09T12:41:07.090
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，我有 productId、ProductName 及其图像，我现在将所有数据保存在数据库中的某个地方我的应用程序用户单击 Demo 下载一个查询表应该打开并且用户填写他的查询和演示链接将被发送到他的电子邮件。现在查询表应该是动态的，意味着多个产品只有一个查询表。那么我应该使用查询字符串传递哪些参数以及这些参数如何传递，以便假设用户单击 Xyz 产品的演示，然后应该打开一个页面并且其 URL 类似于... www.abc.com/Inquiry.aspx?Id=1&ProductName=xyz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:03:51.690

您只需要在查询字符串中传递 productid 和 productname ，例如

```
www.abc.com/Inquiry.aspx?Productid=10&Productname=xyz 
```

并在 Inquiry.aspx 页面中首先获取该查询字符串值并在页面中的任何位置使用。在 Inquiry.aspx 中获取您的查询字符串值就像

```
int product_id = Convert.ToInt32(Request.QueryString["Productid"]);
string  productName = Request.QueryString["Productname"]; 
```

您必须使用这种类型的方案。如果您将在查询字符串中传递加密值并在 Inquiry.aspx 页面上解密它会非常好。对于加密和解密检查此[链接](http://www.codeproject.com/Articles/19538/Encrypt-Decrypt-String-using-DES-in-C)

**第二阶段** 将字符串变量声明为开始

```
String Productname = "";
String queryProductname =  ""; 
```

并在页面加载时为 Productname 赋值

```
protected void Page_Load(object sender, EventArgs e)
{
Productname = "abc";    
queryProductname =  Productname ;     
} 
```

并在您的锚标记中分配该 queryProductname 之类的

```
<a href=\"abc.co.in/test.aspx?period="; + DateTime.Now + " &ProductName=<%= queryProductname %>"\"> 
```

并再次使用查询字符串来检索它的值

```
string  productName = Request.QueryString["ProductName"]; 
```

这是场景。希望你能理解。

# c# - 电子表格齿轮和日期时间格式

> ID：15902190
> 
> 赞同：3
> 
> 时间：2013-04-09T12:41:07.497
> 
> 标签：c#, .net, excel, spreadsheetgear

我正在尝试使用电子表格齿轮库在 excel 文件中以 dd/MM/yyyy 格式显示日期，但系统和办公室看起来像是在运行英语本地化。

我已经尝试使用 Cell.NumberFormat 属性并将 DateTime 对象直接设置为 Cell.Value 属性，但没有成功...

您对如何控制 DateTime 的 excel 格式有任何想法吗？

格茨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:32:06.993

好的，刚刚找到解决方案。

当我创建 WorkbookSet 对象时，我可以指定 CultureInfo（之后无法设置）。

例子：

```
SpreadsheetGear.Factory.GetWorkbookSet(CultureInfo.CurrentCulture); 
```

# ios - UITableView 和 heightForRowAtIndexPath 偶尔出现的问题

> ID：15902192
> 
> 赞同：1
> 
> 时间：2013-04-09T12:41:14.223
> 
> 标签：ios, uitableview

我有一个 UITableView 与动态更新其高度的行。我有以下方法作为 UITableView 的每个单元格中的 UITextView 的代表：

```
-(void)textViewDidChange:(UITextView *)textView
{
[self resizeRow];
[self setNeedsDisplay];
[table beginUpdates];
[table endUpdates];
} 
```

当文本添加到文本视图时，此方法适用于更新表格视图行高。当我更新单元格中的 UIImageView 以增加其大小时，我的问题就出现了。这需要调整表格单元格的高度，这可以正常工作，但是从那时起，每当`[table begineUpdates]` `[table endUpdates]`调用块时，`heightForRowAtIndexPath`表格视图就不再被调用。我没有收到任何错误或警告，也不知道代码中的其他位置。我的问题是，`heightForRowAtIndexPath`当调用块时应该始终调用，`[table begineUpdates]` `[table endUpdates]`或者是否存在这种情况不会发生的情况，如果是，它们是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:00:10.767

发现了问题。有一个虚假的`[table endUpdates]`；调用隐藏在方法中。这显然`[table beginUpdates];` `[table endUpdates];`在某种程度上变得不同步。现在感觉幸福多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:34:33.810

此[答案](https://stackoverflow.com/questions/3069339/how-to-dynamically-resize-uitableviewcell-height)可能会对您有所帮助，但通常`heightForRowAtIndexPath`会在首次显示单元格时或调用时调用一次`reloadRowsAtIndexPaths:withRowAnimation`。但是，从单元格发出该调用可能会很尴尬，因为该单元格不知道它的`indexPath`，但您可以`indexPath`使用对 的调用来获得`indexPathForCell:`。

# servicestack - 服务栈 IRequiresHttpRequest 模式

> ID：15902196
> 
> 赞同：1
> 
> 时间：2013-04-09T12:41:20.410
> 
> 标签：servicestack

这是如何运作的？我已阅读文档，但希望获得更多信息。

通过阅读文档，我了解到当我的 DTO 实现 IRequiresHttpRequest 时，DTO 的属性将不会自动填充，但在我的 DTO 中，我现在可以访问 HttpRequest 对象，因此我可以将我的 DTO 更改为具有拉取东西的“获取”属性从请求对象。

将 HttpRequest 注入我的 DTO 意味着什么？文档建议服务堆栈在幕后执行此操作，但是如果我注册自定义请求绑定器并手动注入 HttpRequest 对象，我只能让它工作。

```
RequestBinders.Add(typeof(MyDto), httpReq => { 
    var dto = new MyDto(); 
    dto.HttpRequest = httpReq;
    return dto;
}); 
```

问题 1：IRequiresHttpRequest 的注入究竟是如何工作的？

问题 2：有没有办法访问 HttpRequest 对象，以便我的 DTO 可以支持自定义“获取”属性，仍然让服务堆栈运行它自动映射？例如：

```
public class MyDto
    : IRequiresHttpRequest
{
    public Int32 AutoMappedProperty1 { get; set; }
    public Int32 AutoMappedProperty2 { get; set; }
    public Int32 AutoMappedProperty3 { get; set; }
    public Int32 AutoMappedProperty4 { get; set; }

    public Int32 CustomMappedProperty { get { return customMappedProperty; } }

    IHttpRequest httpRequest;

    public IHttpRequest HttpRequest
    {
        get
        {
            return httpRequest;
        }
        set
        {
            httpRequest = value;

            // lets say this searches the query string for a variety of 
            // different keys, and then maps one of them of 
            // CustomMappedProperty based upon a specific set of rules
            customMappedProperty = [...]
        }
    }
} 
```

在上面的例子中，我定义了如何填充 CustomMappedProperty，但我仍然希望服务堆栈继续并映射所有“设置”属性。有没有办法做到这一点？我可以手动调用服务堆栈 dto 映射器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:37:47.780

您阅读了哪些文档`IRequiresHttpRequest`？`IRequiresRequestContext`IRequiresHttpRequest 与仅用于装饰**服务**和**验证器**的工作相同，以告诉 ServiceStack 它需要访问并注入当前的 IHttpRequest 或 IRequestContext。

[Custom Serialization / Deserialization wiki](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)只提到了这一点，并且`IRequiresRequestStream`可以`IRequiresSoapMessage`在**请求 DTO**上使用，以向 ServiceStack 发出信号以跳过处理请求正文并允许您自己手动反序列化请求。

# android - Android错误：安装失败：超时

> ID：15902197
> 
> 赞同：4
> 
> 时间：2013-04-09T12:41:24.547
> 
> 标签：android, timeout, apk

无法在设备“emulator-5554”上安装 TempDate.apk：超时运行我的 android 项目时出现此错误。通过此链接解决[Android 错误：无法在设备上安装 *.apk *：超时](https://stackoverflow.com/questions/4775603/android-error-failed-to-install-apk-on-device-timeout)

我一步一步走，但仍然有问题..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:46:02.917

从您的设备上卸载您的应用程序，然后尝试运行。如果问题仍然存在，我认为问题出在您的设备上。只需关闭并重新启动。它再次继续然后重新启动你的 adb 和你的 Eclipse。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:56:45.127

尝试更改 ADB 连接超时。我认为它默认为 5000 毫秒，我将我的更改为 10000 毫秒以摆脱这个问题。如果您在 Eclipse 中，您可以通过 Window -> Preferences 执行此操作，然后它位于 Android 下的 DDMS 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:49:46.160

转到命令提示符并键入

adb 杀死服务器

按 Enter 再次输入

adb 启动服务器

按回车

现在清除您的项目并运行....

# performance - Symfony1.4 百应用

> ID：15902200
> 
> 赞同：0
> 
> 时间：2013-04-09T12:41:34.510
> 
> 标签：performance, cron, symfony-1.4

我有一个用 Symfony1.4 构建的巨大网站，它有大约 600/700 个应用程序。
使用 cronjob，它会在发生某些事情时自动创建新应用程序，因此，假设我们每天创建 5 个新应用程序。现在，我的问题是，当系统创建应用程序时，在我启动清除缓存并修复权限的命令后：

```
php symfony cc;
php symfony project:permissions 
```

但是，这样做，有 700 个应用程序，我的服务器变得非常缓慢，有时甚至无法访问。

我怎样才能做到这一点？
谁能给我们一个建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:50:09.363

*哇 600/700 应用程序：o*

无论如何，我认为您最好使用 shell 脚本来执行此类操作（因为您实际上并不需要 symfony 环境来执行这些任务）。

基本上，`symfony cc`删除缓存文件夹中的内容，因此，您可以运行`rm -Rf cache/*`它，它可能会更快。

对于权限部分，您可以运行以下命令：

```
# permission on global dirs
chmod 777 web/uploads
chmod 777 cache
chmod 777 log
chmod 777 symfony

# permissions on every thing inside cache, upload & log dir
find cache -type f -print | xargs chmod 666
find web/upload -type f -print | xargs chmod 666
find log -type f -print | xargs chmod 666

find cache -type d -print | xargs chmod 777
find web/upload -type d -print | xargs chmod 777
find log -type d -print | xargs chmod 777 
```

# xslt - 使用 XSLT 不移动子 XML 元素

> ID：15902206
> 
> 赞同：0
> 
> 时间：2013-04-09T12:41:58.220
> 
> 标签：xslt

我需要移动输出中显示`<sub>`的`<sup>`元素。我可以移动`<sup>`元素。子元素没有移动。我还需要相应地重命名`<msub>`元素`<msup>`。如果我运行 XSLT 两次，我可以获得输出。但我不想那样做。请纠正我犯错的地方。我应该使用 XSLT1.0

输入 XML：

```
<?xml version='1.0' encoding='UTF-8' ?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
    <math display="block">
        <mfenced>
            <mrow>
                <mfrac>
                    <mrow>
                        <mi>v</mi>
                        <sub>
                            <mrow><mi>n</mi></mrow>
                        </sub>
                    </mrow>
                    <mrow>
                        <mi>v</mi>
                        <sub>
                            <mrow><mi>d</mi></mrow>
                        </sub>
                    </mrow>
                </mfrac>
            </mrow>
        </mfenced>
        <sup><mrow><mn>2</mn></mrow></sup>
    </math>
</chapter> 
```

示例 XSLT 尝试：

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.w3.org/1998/Math/MathML" exclude-result-prefixes="m">

<xsl:output method="xml"/>
<xsl:template match="@* | node()">
<xsl:choose>
<xsl:when test="self::*/following-sibling::*[1]/self::m:sub"></xsl:when>
<xsl:when test="self::*/following-sibling::*[1]/self::m:sup"></xsl:when>
<xsl:when test="self::*/following-sibling::*[1]/self::m:subsup"></xsl:when>
<xsl:otherwise>
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:otherwise>
</xsl:choose>
</xsl:template>

<xsl:template match="m:sub">
<msub>
<xsl:copy-of select="self::*/preceding-sibling::*[1]"/>
<xsl:apply-templates/>
</msub>
</xsl:template>

<xsl:template match="m:subsup">
<msubsup>
<xsl:copy-of select="self::*/preceding-sibling::*[1]"/>
<xsl:apply-templates/>
</msubsup>
</xsl:template>

<xsl:template match="m:sup">
<msup>
<xsl:copy-of select="self::*/preceding-sibling::*[1]"/>
<xsl:apply-templates/>
</msup>
</xsl:template>
</xsl:stylesheet> 
```

所需输出：

```
<?xml version='1.0' ?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
<math display="block">
<msup>
    <mfenced>
        <mrow>
            <mfrac>
                <mrow>
                    <msub><mi>v</mi><mrow><mi>n</mi></mrow></msub>
                </mrow>
                <mrow>
                    <msub><mi>v</mi><mrow><mi>d</mi></mrow></msub>
                </mrow>
            </mfrac>
        </mrow>
    </mfenced>
    <mrow><mn>2</mn></mrow>
</msup>
</math>
</chapter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:42:47.013

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet
  xmlns="http://www.w3.org/1998/Math/MathML"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:m="http://www.w3.org/1998/Math/MathML"
  exclude-result-prefixes="m" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="m:mfenced">
    <msup>
      <mfenced>
        <xsl:apply-templates />
      </mfenced>
      <xsl:apply-templates select="following-sibling::m:sup/*" />
    </msup>
  </xsl:template>

  <xsl:template match="m:mfrac/m:mrow">
    <mrow>
      <msub>
        <xsl:apply-templates />
      </msub>
    </mrow>
  </xsl:template>

  <xsl:template match="m:sub">
    <xsl:apply-templates />
  </xsl:template>

  <xsl:template match="m:sup" />
</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
  <math display="block">
    <mfenced>
      <mrow>
        <mfrac>
          <mrow>
            <mi>v</mi>
            <sub>
              <mrow>
                <mi>n</mi>
              </mrow>
            </sub>
          </mrow>
          <mrow>
            <mi>v</mi>
            <sub>
              <mrow>
                <mi>d</mi>
              </mrow>
            </sub>
          </mrow>
        </mfrac>
      </mrow>
    </mfenced>
    <sup>
      <mrow>
        <mn>2</mn>
      </mrow>
    </sup>
  </math>
</chapter> 
```

**...产生了想要的结果：**

```
<?xml version="1.0"?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
  <math display="block">
    <msup>
      <mfenced>
        <mrow>
          <mfrac>
            <mrow>
              <msub>
                <mi>v</mi>
                <mrow>
                  <mi>n</mi>
                </mrow>
              </msub>
            </mrow>
            <mrow>
              <msub>
                <mi>v</mi>
                <mrow>
                  <mi>d</mi>
                </mrow>
              </msub>
            </mrow>
          </mfrac>
        </mrow>
      </mfenced>
      <mrow>
        <mn>2</mn>
      </mrow>
    </msup>
  </math>
</chapter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:03:37.773

如果我对你的理解正确，你想要做的是

1.  对于任何`sub`或`sup`元素，将其先前的兄弟（如果有）移动到元素内，并且
2.  重命名`sub`为`msub`和。`sup``msup`

这个 XSLT 应该可以解决问题：

```
<?xml version='1.0' encoding='UTF-8' ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.w3.org/1998/Math/MathML" exclude-result-prefixes="m">
  <xsl:output method="xml"/>

  <xsl:template match="*[following-sibling::*[1]/self::m:sub]">
    <msub>
      <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
      <xsl:apply-templates select="following-sibling::*[1]/self::m:sub/@* | following-sibling::*[1]/self::m:sub/node()"/>
    </msub>
  </xsl:template>

  <xsl:template match="*[following-sibling::*[1]/self::m:sup]">
    <msup>
      <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
      <xsl:apply-templates select="following-sibling::*[1]/self::m:sup/@* | following-sibling::m:sup/node()"/>
    </msup>
  </xsl:template>

  <xsl:template match="m:sub | m:sup"></xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

我唯一不清楚的是如何执行此`sub`( `sup`) 没有先前兄弟的元素。上面的代码只是忽略了它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:46:08.747

Siva，您可以通过引入新模板来阻止原始“mi”输出：

<xsl:template match="m:mi"> <xsl:if test="not(name(following-sibling:: *[1]) = 'sub') and not(name(following-sibling::* [1] ) = 'sup') 而不是(name(following-sibling::*[1]) = 'subsup')"> <mi> <xsl:apply-templates/> </mi> </xsl:if> < /xsl:模板>

# java - Android中的iText合并pdf错误，带有最新的库

> ID：15902208
> 
> 赞同：0
> 
> 时间：2013-04-09T12:42:01.900
> 
> 标签：java, android, itext

我读过这个问题：

[Android中的iText合并pdf错误](https://stackoverflow.com/questions/15309434/itext-merge-pdf-error-in-android)

这基本上解释了我的问题，但提出的解决方案 - 升级到最新的 Android 版本的 iText 并不能解决问题。

我正在使用 itextgoogle-5.4.0.jar，但我仍然得到相同的编译错误。

显然，当我让项目工作时，我会很乐意支付许可费，但 PDF 的合并是一项要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:44:40.987

我已解决此问题并将 5.4.0 重新上传到存储库： [http ://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/5.4.0/](http://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/5.4.0/)

你能确认修复吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:39:53.590

iText 端口 5.4.0 中似乎存在一些编译错误，它仍然引用了一些 java.awt 类。当您开始使用 PdfContentByte 时，您会注意到这一点。

我回滚到之前的 5.3.5 版本，这里是：

[http://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/](http://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/)

# javascript - 使while循环同步

> ID：15902211
> 
> 赞同：26
> 
> 时间：2013-04-09T12:42:17.010
> 
> 标签：javascript, node.js, asynchronous

我有以下一段代码

```
var page = 2;
var last_page = 100;
while(page <= last_page) {
  request("http://some_json_server.com/data?page=" + page, function (error, response, body) {
    if (!error && response.statusCode == 200) {
      store_data(body)
    }
    page++;
  });                
} 
```

我已经完成了以下操作，但它实际上没有检索任何内容。我这样做正确吗？

```
var page = 2;
var last_page = 100;
while(page <= last_page) {
var async_arr = [];
async_arr.push(
  function(next) {
    request("http://some_api_url?page=" + page, function (error, response, body) {
      if (!error && response.statusCode == 200) {
        store_data(body);
      }
    });
  }
);

async.series(
  async_arr, done
); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-09T13:12:31.150

随着`while`你得到一个繁忙的循环，这在 Node.js 中是相反的。

改为使其成为递归函数。每个调用都将在单独的刻度中完成。

```
var page = 2;
var last_page = 100;

(function loop() {
    if (page <= last_page) {
        request("/data?page=" + page, function (error, response, body) {
            if (!error && response.statusCode == 200) {
                store_data(body)
            }
            page++;
            loop();
        });
    }
}()); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-09T12:59:50.807

您正在寻找[async.whilst()](https://github.com/caolan/async#whilst)。此解决方案假设您实际上想要一个接一个地执行每个请求。正如@UpTheCreek 提到的（*编辑*：我提到的评论已被编辑），它可能会异步执行并使用`async.parallel`.

```
var page = 2,
    lastPage = 100;

async.whilst(function () {
  return page <= lastPage;
},
function (next) {
  request("http://some_json_server.com/data?page=" + page, function (error, response, body) {
    if (!error && response.statusCode == 200) {
      store_data(body)
    }
    page++;
    next();
  });
},
function (err) {
  // All things are done!
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-15T16:23:52.483

您还可以将您的 while 循环包装在异步中，并在您的承诺解决/条件得到满足后中断...

```
 const request = require("request")

    ;(async()=>{

    let results = []
    while(true){
      await new Promise(resolve => {
        request('http://www.seanbehan.com/', (err, resp, body)=>{
          console.log(new Date, 'Downloading..')
          results.push(body)
          resolve(body)
        })
      })

      if(results.length >= 5){
        break
      }
    }

    console.log(results)
  })() 
```

# mule - Mule EE 罐与 CE 罐

> ID：15902214
> 
> 赞同：0
> 
> 时间：2013-04-09T12:42:21.313
> 
> 标签：mule

我们正在使用 mule（企业版），并且正在讨论是使用 EE jars（只要可用）还是 CE jars。有没有理由走一条或另一条路。该应用程序最终将部署在 Mule 企业版中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:44:06.430

您需要使用 EE jar 才能正确解析 XML 模式的 EE 版本。

# antlr - antlr3 - 将闭包值读取到变量

> ID：15902215
> 
> 赞同：1
> 
> 时间：2013-04-09T12:42:21.573
> 
> 标签：antlr, antlr3, antlrworks

我想在一个简单的文本行中解析和读取一个闭包值，如下所示：

**1 !某事**

```
line
    :   (NUMBER EXCLAMATION myText=~('\r\n')*)
{ myFunction($myText.text); }

NUMBER
    :   '0'..'9'+;

EXCLAMATION
    :   '!'; 
```

我在*myText*变量中得到的只是 'something' 的最后一个 'g'，因为在生成的代码中可以看到*myText*在每次出现*~('\r\n')*时都会在 while 循环中重写。

我的回答是：有没有什么优雅的方法可以读取变量“myText”的“某物”值？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:54:23.270

在解析器规则中，`~`不否定字符，而是令牌。所以`~('\r\n')`将匹配除文字标记以外的任何`'\r\n'`标记（在您的示例中，这将是 a `NUMBER`or `EXCLAMATION`）。

词法分析器不能由解析器“驱动”：在解析器匹配 a`NUMBER`和 a之后`EXCLAMATION`，您不能告诉词法分析器生成一些其他标记，而不是以前所做的。无论解析器“需要”什么，词法分析器总是会根据[一些简单的规则生成标记。](https://stackoverflow.com/questions/9251048/antlr-v3-error-with-parser-lexer-rules)

换句话说：你不能在解析器中处理这个。

# android - 引用 google-play-services 库

> ID：15902222
> 
> 赞同：13
> 
> 时间：2013-04-09T12:42:46.093
> 
> 标签：android, eclipse, google-maps, libraries, google-play-services

我正在使用 Google Maps Android API v2 开发一个项目，当我开始引用 google-play-services_lib 时遇到问题。我的项目图标上出现一个红色感叹号，并且在“问题”选项卡中出现错误消息（我使用的是 Eclipse）：

```
The container 'Android Dependencies' references non existing library 'C:\Users\Labo FMS\Documents\Applications\04-adt-bundle-windows-x86_64\sdk\extras\google\google_play_services\libproject\google-play-services_lib\bin\google-play-services_lib.jar' 
```

而且，确实，如果我去那个文件夹，我会看到没有“google-play-services_lib.jar”文件。

我试过重新安装库，我注意到安装时底部有一条错误消息：

```
[2013-04-09 13:54:32 - google-play-services_lib] Unable to resolve target 'android-8'
[2013-04-09 13:54:32 - google-play-services_lib] Unable to resolve target 'android-8'
[2013-04-09 13:56:18 - MainActivity] Unable to resolve target 'android-8' 
```

有人知道这一切意味着什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T12:48:55.547

`google-play-services_lib`找不到`target 'android-8'`，因为它没有安装在您的`Android SDK`.

将您的 Android 更改`target 'android-8'`为任何其他使用。

```
Your Project--->Right Click-->Properites-->Android-->Select Google API 15(whatever you have)-->ok 
```

或者

将此添加到 Android 清单文件中。

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

您可以添加任何您拥有的目标 SDK，但它必须是`Google API`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:49:30.103

您的第二条消息意味着您没有所需的文件`SDK android-8`，您需要做的是打开`SDK Manager`并下载您想要的 SDK 版本（例如）：

![在此处输入图像描述](https://i.stack.imgur.com/nBOnP.jpg)

之后，您将拥有所需的 jar 文件，因此您可以将其添加到您的 Google 地图项目中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-19T11:26:35.783

为我解决的问题是在 SDK 管理器中更新一些包（'sdk platform-tools'，'sdk build-tools' 从 16 更新到 17）。之后，一切正常。

我花了将近半天的时间来解决这个问题......我意识到这可能对任何人都没有帮助，但是对于这确实帮助某人的远程 0.1% 的机会，我决定在这里写下我的答案。

希望这可以帮助某人:-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-18T21:52:24.673

尝试了上面的最佳答案，但仍然无效。在尝试了所有其他方法并继续在其他地方搜索但没有用。

最终解决该问题的是重新启动 ECLIPSE 并清理（在执行上面最佳答案中所写的内容之后）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-18T01:13:47.703

在你的清单文件中添加这个

```
 <meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-30T20:53:33.047

导入项目时，我选中了将项目复制到工作区复选框。这为我解决了这个问题，事实上这很奇怪，但我们都知道 eclipse 一直在发疯。顺便说一句，我想要一个可以在这个圣诞节使用的 Eclipse。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-04T23:24:50.137

通过 Android SDK 管理器更新 Android SDK 组件时，这发生在我身上。以前，我已将几个 Google 库（Google Play 服务等）导入到我的 Eclipse 工作区中，并选择了**将项目复制到工作区**选项。升级打破了这一点，因为导入库的版本与主 SDK 的版本不同。

从 Eclipse 中删除复制的项目，然后直接从 SDK 目录重新导入它们在我的情况下解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-09T17:54:39.090

只需做一个项目 --> 清理。它对我有用。祝你好运 ！

# json - Elastic Search 升级后出现问题的结果

> ID：15902225
> 
> 赞同：0
> 
> 时间：2013-04-09T12:42:50.750
> 
> 标签：json, grails, elasticsearch, render

我已经将我的弹性搜索从 0.19.4 更新到 0.20.6，但我没有得到想要的结果。我在按键后进行动态搜索，而之前运行良好的代码现在有所不同。

搜索：

```
'' = (empty field) fine
a = 9400 hits
ab = 126 hits ERROR
abc = 2 hits ERROR
abcd 0 hits fine 
```

我已更改的依赖项：

```
runtime 'org.elasticsearch:elasticsearch-lang-groovy:1.1.0' --> runtime 'org.elasticsearch:elasticsearch-lang-groovy:1.3.0'
runtime 'org.elasticsearch:elasticsearch:0.19.4' --> runtime 'org.elasticsearch:elasticsearch:0.20.6'
runtime 'org.xerial.snappy:snappy-java:1.0.4.1' (new) 
```

堆：

```
2013-04-09 10:47:58,130 [http-bio-8080-exec-2] DEBUG xxxx.SearchController  - result stuff is: [hits:org.elasticsearch.search.internal.InternalSearchHits@9b0d61b]
2013-04-09 10:47:58,137 [http-bio-8080-exec-2] ERROR xxxx.SearchController  - Problem...
org.codehaus.groovy.grails.web.converters.exceptions.ConverterException: Error converting Bean with class org.elasticsearch.search.internal.InternalSearchHit
    at grails.converters.JSON.value(JSON.java:199)
    at grails.converters.JSON.convertAnother(JSON.java:162)
    at grails.converters.JSON.value(JSON.java:199)
    at grails.converters.JSON.convertAnother(JSON.java:162)
    at grails.converters.JSON.value(JSON.java:199)
    at grails.converters.JSON.convertAnother(JSON.java:162)
    at grails.converters.JSON.value(JSON.java:199)
    at grails.converters.JSON.render(JSON.java:134)
    at grails.converters.JSON.render(JSON.java:150)
    at xxx.xxxx.xxxx.SearchController.autocomplete(SearchController.groovy:514)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.InvocationTargetException
    ... 13 more
Caused by: java.lang.NullPointerException
    at org.elasticsearch.common.compress.lzf.LZFCompressor.isCompressed(LZFCompressor.java:76)
    at org.elasticsearch.common.compress.CompressorFactory.compressor(CompressorFactory.java:124)
    at org.elasticsearch.common.compress.CompressorFactory.uncompressIfNeeded(CompressorFactory.java:174)
    at org.elasticsearch.search.internal.InternalSearchHit.sourceRef(InternalSearchHit.java:172)
    at org.elasticsearch.search.internal.InternalSearchHit.getSourceRef(InternalSearchHit.java:181)
    ... 13 more 
```

代码失败的地方：

```
try {
            log.debug("result stuff is: ${results}");
            render results as JSON
        }
        catch ( Exception e ) {
            log.error("Problem...",e);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:01:00.377

这是由于ES结构略有变化，不得不重写我的转换方法:)

# html - 在表单操作上添加 http:// 不会返回表单输入值

> ID：15902227
> 
> 赞同：0
> 
> 时间：2013-04-09T12:42:54.140
> 
> 标签：html, forms

情况1：

```
<form action='update.php' method='post'> 
```

案例二：

```
<form action='http://site.net/update.php' method='post'> 
```

案例 1 工作正常，但是当我添加包含 http:// 的完整站点 URL 时，案例 2 会返回错误。它没有给出表单返回的值。

是否禁止使用 http:// 或完整 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:43:52.400

第一个是相对的。第二个是具体的。使用相对网址总是更好。不是具体的网址

# asp.net - 如何将moodle与asp.net集成

> ID：15902231
> 
> 赞同：0
> 
> 时间：2013-04-09T12:42:59.987
> 
> 标签：asp.net, sql-server, integration, moodle

我想将moodle 与我的asp.net 站点集成。有什么方法可以让我们在我的 dot 网站上访问 moodle 功能吗？moodle也可以与sql server数据库一起使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-29T11:42:28.810

是的，您可以使用 Web 服务将 Moodle 与 .net 应用程序集成。因为moodle 使用可以通过.net 或任何应用程序访问的多个协议公开相同的方法。

如果有帮助，这是一个有用的链接： [https ://delog.wordpress.com/2010/09/08/integrating-c-app-with-moodle-2/](https://delog.wordpress.com/2010/09/08/integrating-c-app-with-moodle-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:54:06.813

根据文档，Moodle 是用 PHP 编写的，因此您将无法轻松地将其集成到您的 .Net 站点中。但是，没有理由不能将 Moodle 应用程序托管为虚拟目录/应用程序/子域，因为 IIS 将允许您托管 PHP 应用程序。

此外，是的，您可以将 MS SQL Server 与 Moodle 一起使用。

Moodle的一个很好[的概述可以在这里找到](http://docs.moodle.org/dev/Moodle_architecture)。

# api - Google+ api - 来自 https://accounts.google.com/o/oauth2/token 的密钥给出 401 错误

> ID：15902238
> 
> 赞同：2
> 
> 时间：2013-04-09T12:43:21.583
> 
> 标签：api, oauth-2.0, google-plus

我在使用 Google+ API OAuth2 令牌时遇到了一些问题。

这是一个获取 OAuth2 访问令牌的简单程序：

```
HttpClient httpclient = new HttpClient();
        PostMethod postMethod = new PostMethod("https://accounts.google.com/o/oauth2/token");
        NameValuePair[] data = {
                new NameValuePair("client_id", "API KEY HERE"),
                new NameValuePair("redirect_uri", "URL HERE"),
                new NameValuePair("client_secret", "SECRET HERE"),
                new NameValuePair("code", "CODE HERE"),
                new NameValuePair("grant_type", "authorization_code")
        };
        postMethod.setRequestBody(data);
        try {
            int result = httpclient.executeMethod(postMethod);
            assertEquals(result, 200);
            System.out.println("Response body: ");
            System.out.println(postMethod.getResponseBodyAsString());
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

这成功生成了 OAuth2 令牌。如：ya29.AHES6ZTZgptKHyZ530MoYVDPaeXvjK5DWQzPqxoNNEL2C7gsQwGfmvfT8Q

然后我设置了一个简单的测试程序，可以测试从该令牌调用 /people API：

```
@Test
    public void testGoogleAPIAuthdRequest() throws Exception {
        String feedUrl = "https://www.googleapis.com/plus/v1/people/me";
        String apiKey = "MY API KEY";
        String oauthCode = "OAUTH CODE FROM ABOVE";
        String jsonStr = executeGoogleFeed(feedUrl, apiKey, oauthCode).getResponseBodyAsString("UTF-8");
    }

    public Response executeGoogleFeed(String feedURL, String apiKey, String oauthCode) throws Exception {
        StringBuilder urlStr = new StringBuilder();
        urlStr.append(feedURL);
        urlStr.append("?key=");
        urlStr.append(apiKey);
        Map<String, String> hashMap = new HashMap<String, String>();
        hashMap.put("Authorization", "Bearer " + oauthCode);
        return HttpUtil.doHttpRequest(urlStr.toString(), MethodType.GET.toString(), null,
                hashMap);
    } 
```

这给了我一个 401 错误。没有权限。

当我转到[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=INSERT_ACCESS_TOKEN](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=INSERT_ACCESS_TOKEN)时，令牌显示为有效。

此外，当我转到[https://developers.google.com/+/api/latest/people/get](https://developers.google.com/+/api/latest/people/get)并从 OAuth2 登录功能获取 OAuth 令牌时......我将该 OAuth 令牌插入到我的 JUnit 测试中... 有用！

有人知道为什么我对[https://accounts.google.com/o/oauth2/token](https://accounts.google.com/o/oauth2/token)的调用不能用作 Google+ api 中的 Bearer 参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:31:54.967

听起来潜在的问题是当您发送用户进行身份验证并授权您的应用程序时，您没有请求 plus.me 范围。这是在您在此处显示的内容之前的步骤中完成的，并且是返回您在上面添加的 OAuth2“代码”的组件。您可能想要更新您的示例以说明您如何获取代码以及您使用什么范围来执行此操作。

如果您正确设置范围，并且您正在使用返回的代码，则可能是您不断重复使用相同的代码。第一阶段返回的OAuth2代码只能使用一次，发出后必须非常迅速地使用。它被交换为一个具有有限生命周期的 access_token（这是您正确尝试做的）和一个具有无限生命周期的 refresh_token，用于生成新的 access_tokens。

有关用于获取和交换 OAuth2 代码的多步骤过程的完整详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2WebServer 。](https://developers.google.com/accounts/docs/OAuth2WebServer)

# servicestack - 服务堆栈过滤器模式

> ID：15902242
> 
> 赞同：2
> 
> 时间：2013-04-09T12:43:34.917
> 
> 标签：servicestack

在实现自定义过滤器时，我目前正在使用一种模式，其中我的 DTO 都使用过滤器属性进行标记，并且还实现了一个自定义接口，该接口公开了一些我想在我的服务中使用的公共变量，例如：

```
public interface IMyInterface
{
    Int32 MyVariable { get; set; }
}

[MyFilter]
public class MyDto
    : IMyInterface
{
    public Int32 MyVariable { get; set; }
}

public class MyFilterAttribute 
    : Attribute
    , IHasRequestFilter 
{
    public int Priority { get { return 0; } }

    public IHasRequestFilter Copy () { return this; }

    public void RequestFilter(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var temp = requestDto as IMyInterface;

        if( temp != null )
        {
            var x = [something from the request object...]
            temp.MyVariable = x;
        }
    }
} 
```

这是预期的模式吗？或者有没有办法只用界面来做到这一点？有没有办法为所有通过 AppHost 实现接口的 dto 注册过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:43:45.417

除非您有充分的理由推荐该建议是从[RequestFilterAttribute](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RequestFilterAttribute.cs)继承，后者专门用于此目的，这也让您忽略为**Priority**和**Copy()**提供默认实现。

如果您确实想坚持，`IHasRequestFilter`那么正确的实现`Copy()`是：

```
public virtual IHasRequestFilter Copy()
{
    return (IHasRequestFilter)this.MemberwiseClone();
} 
```

这确保每个请求只使用一个副本而不是同一个实例，这对于确保过滤器保持状态时的线程安全非常重要。

# c# - 比较两个列表时的奇怪结果

> ID：15902243
> 
> 赞同：2
> 
> 时间：2013-04-09T12:43:35.210
> 
> 标签：c#, .net, .net-4.0

我想比较两个列表。我想检查 List2 是否有 List1 中的任何项目。我得到了意想不到的结果。请在下面查看我的代码。

测试代码类

```
class Program
{
    static void Main(string[] args)
    {
        bool loop = true;
        int textcount = 1;
        while (loop)
        {

            var collection1 = GetCollection();
            var collection2 = GetCollection();

            Console.WriteLine("Test No " + textcount.ToString());

            Console.WriteLine("Collection 1 =" + String.Join(", ", collection1.ToArray()));

            Console.WriteLine("Collection 2 =" + String.Join(", ", collection2.ToArray()));

            System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();
            watch.Start();
            var hasitem = collection1.Any(item => collection2.Contains(item));

            watch.Stop();

            Console.WriteLine(hasitem.ToString() + "  Found in " + watch.ElapsedTicks.ToString());
            watch.Reset();

            watch.Start();
            var hasAtLeastOne = collection1.Intersect(collection2).Any();
            watch.Stop();
            Console.WriteLine(hasAtLeastOne.ToString() + "  With Intersect Found in " + watch.ElapsedTicks.ToString());
            textcount++;
            Console.ReadKey();
        }

    }
    static Random ran = new Random();
    private static IEnumerable<int> GetCollection()
    {
        for (int i = 0; i < 5; i++)
        {
            yield return ran.Next(i, 20);
        }
    }
} 
```

结果很烦人。查看最后 4 个结果。

```
Test No 1
Collection 1 =10, 8, 18, 6, 11
Collection 2 =3, 12, 18, 13, 6
True  Found in 3075
True  With Intersect Found in 15297
 Test No 2
Collection 1 =18, 13, 7, 18, 5
Collection 2 =12, 18, 8, 3, 5
True  Found in 22
True  With Intersect Found in 100
 Test No 3
Collection 1 =1, 6, 15, 7, 9
Collection 2 =16, 15, 14, 14, 12
True  Found in 21
True  With Intersect Found in 23
 Test No 4
Collection 1 =3, 16, 7, 4, 19
Collection 2 =6, 3, 15, 15, 9
True  Found in 21
True  With Intersect Found in 56
 Test No 5
Collection 1 =18, 18, 9, 17, 10
Collection 2 =17, 12, 4, 3, 11
True  Found in 25
True  With Intersect Found in 20
 Test No 6
Collection 1 =9, 9, 2, 17, 19
Collection 2 =17, 2, 18, 3, 15
False  Found in 109
False  With Intersect Found in 41
 Test No 7
Collection 1 =3, 15, 3, 5, 5
Collection 2 =2, 2, 11, 7, 6
True  Found in 22
False  With Intersect Found in 15
 Test No 8
Collection 1 =7, 14, 17, 14, 18
Collection 2 =18, 4, 7, 18, 16
False  Found in 28
True  With Intersect Found in 19
 Test No 9
Collection 1 =3, 9, 6, 18, 9
Collection 2 =10, 3, 17, 17, 18
True  Found in 28
True  With Intersect Found in 22
 Test No 10
Collection 1 =15, 18, 2, 9, 8
Collection 2 =10, 15, 3, 10, 19
False  Found in 135
True  With Intersect Found in 128
 Test No 11
Collection 1 =6, 2, 17, 18, 18
Collection 2 =14, 16, 14, 6, 4
False  Found in 20
False  With Intersect Found in 17 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T12:46:38.537

问题是你所说的“集合”实际上是一个不稳定的项目序列，每次枚举时都会发生变化。原因是您实施的方式`GetCollection`。使用`yield return`基本上会返回有关如何创建序列的蓝图。它不返回序列本身。
因此，每次枚举“蓝图”时，它都被用来创建一个新序列。您可以通过简单地输出您的“收藏”两次来验证这一点。您将看到每次的值都不同。

这就是您的测试产生完全任意结果的原因：您将每个集合枚举三遍：

1.  当您将其输出到控制台时会发生第一次枚举
2.  第二次枚举发生在使用 and 的测试`Any`中`Contains`。因为这会开始一个新的枚举，所以会生成新的随机数。
3.  第三次枚举发生在`Intersect`测试中。这会创建另一组随机数。

要修复它，请通过调用`ToArray()`.`GetCollection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:08:15.110

这是你的问题：

```
private static IEnumerable<int> GetCollection()
{
    for (int i = 0; i < 5; i++)
    {
        yield return ran.Next(i, 20);
    }
} 
```

把它变成这样：

```
private static List<int> GetCollection()
{
  return new List<int>
         {
           ran.Next(0, 20),
           ran.Next(1, 20),
           ran.Next(2, 20),
           ran.Next(3, 20),
           ran.Next(4, 20)
         };
} 
```

你的问题就会消失。

冗长的解释是，当您创建一个 IEnumerable 函数时，您可以期望它在各种 LINQ 调用上重复调用迭代器（毕竟，这就是 IEnumerable 所做的，对吧？）。由于您`yield return <some random number>`对每个迭代器调用都执行一次，因此您可能会得到不稳定的结果。最好保存对`.ToArray()`结果的引用，或者只返回一个稳定的列表。

# ruby - 没有这样的 mongoid 配置文件问题

> ID：15902245
> 
> 赞同：0
> 
> 时间：2013-04-09T12:43:35.563
> 
> 标签：ruby, mongodb, mongoid

我在一个目录中有一个 minitest_helper.rb 和 mongoid.yml 文件。我把下面的代码放在 minitest_helper 中；

```
require 'mongoid'
Mongoid.load!("mongoid.yml", :test) 
```

虽然这些文件在同一个目录中，但 Mongoid 无法加载 yml 文件，我得到“没有这样的文件”，如下所示：

```
/home/developer/.rvm/gems/ruby-1.9.3-p374/gems/mongoid-3.1.2/lib/mongoid/config
/environment.rb:40:in `initialize': No such file or directory - mongoid.yml
(Errno::ENOENT) 
```

此外，我不使用 Rails、Sinatra 等任何框架。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:40:28.730

正如您在[文档](http://rdoc.info/github/mongoid/mongoid/Mongoid/Config#load!-instance_method)中看到的，`#load!`需要文件的完整路径。尝试将代码更改为如下内容：

```
Mongoid.load!(File.join('path_to_the_yml','starting_at_root_of_the_project', 'mongoid.yml') , :test) 
```

您构建的方式`File.join`将取决于您的目录结构。如果我有这样的结构：

```
project_root
--lib
--spec
----fixtures
------test.xml  # the path for this file is project_root/spec/fixtures/test.xml 
```

然后`File.join`将如下所示：

```
File.join('spec','fixtures', 'test.xml') 
```

# c - 如何从视图的基地址获取文件句柄

> ID：15902249
> 
> 赞同：1
> 
> 时间：2013-04-09T12:43:41.337
> 
> 标签：c, winapi, memory-mapped-files, kernel32

假设您有某个文件的句柄并且想要获取进程中的所有视图（内存基地址），或者您没有句柄但您有视图并且想要句柄。任何想法如何做到这一点？这应该是可能的，因为函数 FlushViewOfFile 也只需要视图的基地址来写入文件。我尝试在 kernel32.dll 中搜索导出，谷歌搜索了一下，但没有成功。

# powershell - 如果用户在 ADGroup 中错误地评估 powershell

> ID：15902250
> 
> 赞同：0
> 
> 时间：2013-04-09T12:43:44.440
> 
> 标签：powershell, active-directory

我试图用一个 sql 数据库表来保持和 AD 组的最新状态。但我无法让我的逻辑正常工作，这是我的意思的一个示例：

```
 $group = "<ADGroupName>"
    $user = (Get-ADUser -Identity <sAMAccountName> -Properties MemberOf,sAMAccountName | Select-Object MemberOf,sAMAccountName)

    Function Add-ADUserToGroup{
        if ($user.MemberOf -notmatch $group){
            Add-ADGroupMember -Identity $group -Members $user.sAMAccountName
            }
        else{
            Wirte-Host "User is already a member of $group"
            }
        }

    Add-ADUserToGroup 
```

如果我将我的 sAMAccountName 放入`$user`变量集中，并且如果我存在`$group`变量中指定的组，它仍然会尝试将我添加到组中并且失败，因为我已经存在于组中。我已经尝试过其他操作数来代替`-notmatch`诸如，`-notin` `-ne`但似乎没有任何东西可以正确评估 if 语句，我不知道为什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:10:45.597

试试这个：

```
$group = "<ADGroupName>"
$user = (Get-ADUser -Identity <sAMAccountName> -Properties MemberOf,sAMAccountName | Select-Object MemberOf,sAMAccountName)

Function Add-ADUserToGroup{
    if (-not ($user.MemberOf -match $group)){
        Add-ADGroupMember -Identity $group -Members $user.sAMAccountName
        }
    else{
        Wirte-Host "User is already a member of $group"
        }
    }

Add-ADUserToGroup 
```

您正在对数组进行匹配，然后将结果转换为 IF 中的 [bool]。

`$user.MemberOf -notmatch $group`将返回用户所属的所有不匹配的组`$group`。如果返回任何结果，则 IF 的结果将为 True，并且它可能总是会找到一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:01:24.833

所以，我找到了一个解决方案，它在操作数中。所以如果我用这个：

```
if ($user.MemberOf -notmatch $group){
     <Foo>
     } 
```

if 语句根本无法正确评估，但是如果我使用它：

```
if (!($user.MemberOf -match $group)){
     <Foo>
     } 
```

if 语句确实评估正确。我没有解释，但它有效。

# android - 如何在 Android 中删除视图？

> ID：15902253
> 
> 赞同：2
> 
> 时间：2013-04-09T12:43:50.193
> 
> 标签：android, android-view, layout-inflater, viewgroup, android-inflate

我有两个`Buttons`在主要布局中。如果`Button`单击添加，则必须`EditText`动态添加（使用 Inflater）。这部分正在工作。如果`Button`单击删除，则必须删除`EditText`后进先出的内容。但我不知道如何删除视图。

```
add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = layoutInflater.inflate(R.layout.add_edit, null);
            ll.addView(view);
        }
    });
    remove.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            ll.removeViewAt(0);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:51:25.077

用它来删除最后一个：

```
ll.removeViewAt(ll.getChildCount() - 1 ); 
```

或者，您可以在通货膨胀期间“记住”要删除的观点

```
ArrayList<View> viewList = new ArrayList<View>();

// during inflation
view = layoutInflater.inflate(R.layout.add_edit, null);
viewList.add(view);
ll.addView(view);

// then to remove the last
view  = list.get(list.size() - 1);
ll.removeView(view); 
```

# sharepoint - Sharepoint 2013：在页面 javascript csom 上插入图像

> ID：15902254
> 
> 赞同：4
> 
> 时间：2013-04-09T12:43:50.457
> 
> 标签：sharepoint, sharepoint-2013, csom

我用 javascript csom 创建了一个新页面。我可以给它一个标题、署名、内容等，但它不接受图像参考。它没有给我任何错误消息，也没有达到我的错误功能，但我显然在这里遗漏了一些东西，因为新页面没有附加任何图像。

关于如何做到这一点的任何想法？

这是我的代码：

```
var pageInfo = new SP.Publishing.PublishingPageInformation();
var newPage = pubWeb.addPublishingPage(pageInfo);
context.load(newPage);

context.executeQueryAsync(function () {

    var listItem = newPage.get_listItem();
    context.load(listItem);

    context.executeQueryAsync(function () {

        var title = $('#head').val();
        listItem.set_item('Title', title);

        listItem.set_item('PublishingPageImage', { "Url": "/sites/intranett/PublishingImages/ExampleImage.png", "Description": "testing" });

        listItem.update();

        context.executeQueryAsync(function () { }, onFailedCallback);

    }, onFailedCallback);
 }, onFailedCallback); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:07:37.760

在设置 PublishingPageImage 属性时，我需要包含 html 图像标记。

```
listItem.set_item('PublishingPageImage',  "<img alt='image' src='/sites/intranett/PublishingImages/ExampleImage'>"); 
```

# javascript - iFrame 动态调整大小

> ID：15902258
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:05.903
> 
> 标签：javascript, html

我有此代码但无法正常工作... iFrame 不会根据其内容调整大小...

我做错了什么？我已经尝试了很多代码，任何人都在为我工作......

有什么建议么？

page.html

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>TEST</title>
</head>
<body>
    <iframe id="klaus" src="iframe.html" width="960" height="100%"></iframe>
</body>
</html> 
```

iframe.html

```
<!DOCTYPE html>
<html>
<head>
<title>pagina</title>
<script language="Javascript" type="text/javascript">
  parent.document.getElementById("klaus").height = document.getElementById("size").scrollHeight + 40;
</script>
</head>
<body>
<div id="size">
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
<p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p> <p>Conteudo</p>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:18:32.873

我认为这会对您有所帮助，将此块放在 iframe.html 页面的末尾并删除您的块。

```
<script language="Javascript" type="text/javascript">

  var _iframe = parent.document.getElementById("klaus"),
      _height = _iframe.contentDocument.getElementById("size").scrollHeight || _iframe.contentWindow.document.getElementById("size").scrollHeight;
      _iframe.height = _height + 40;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:01:57.570

您设置错误的高度属性。它缺少高度之前的**样式。**此外，没有调用 javascript 代码，我将它添加到在页面的 onload 中调用的函数中。检查代码：

```
<title>pagina</title>
<script language="Javascript" type="text/javascript">
function resizeIframe(){  
parent.document.getElementById("klaus").style.height = document.getElementById("size").scrollHeight + 40;
}
</script>
</head>
<body onload="resizeIframe()"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:10:08.450

iframe 永远不会根据其内容调整大小。您需要使用 javascript 来实现这一点。您的百​​分比样式值将始终引用 iframe 的最近定位父级，就像大多数其他元素一样。

这个问题显示了如何为此使用脚本：

[调整 iframe 的宽度高度以适应其中的内容](https://stackoverflow.com/questions/819416/adjust-width-height-of-iframe-to-fit-with-content-in-it)

# php - php中的JSONObject arrayList解析

> ID：15902259
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:11.707
> 
> 标签：php, android, json

我是 JSON 新手。请帮助我解析从 android 发送的 php 中的 JSON。

我有一个 A 类，有成员电话号码和姓名。我有一个`arrayList`对象**A**

```
 private ArrayList<A> contactList = new ArrayList<A>();
    contactList.add(a1);
    contactList.add(a2); [objects of A] 
```

现在我正在尝试使用 JSON 将此 arrayList 发送到 php 服务器。

```
JSONObject json = new JSONObject();
json.put("contactList", contactList);
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("");
StringEntity se = new StringEntity("JSON: " + json.toString());
post.setEntity(se);
HttpResponse resP = client.execute(post); 
```

请让我知道如何在 php 服务器端解析它以获取每个对象**A**的 phoneNumber 和名称。

我试图在 php 服务器端创建一个相同的类**A并尝试这种方式。**

```
<?php
    $contactList = array();
    if(isset($_POST["contactList"])) {
        $contactList = json_decode($_POST["contactList"]);
        include_once './eachContactClass.php';
        foreach ($contactList->contactList as $eachContact) {
            $eachObj = new eachContactClass();
            $eachObj = $eachContact;
            $name = $eachObj->getName();
            $phoneNumber = $eachObj->getPhone();

        }
    } 
```

请让我知道该方法是否正确，或者请帮助我更正

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:50:20.007

首先，我建议您使用一个库来处理 JSON 序列化/反序列化。[GSON](http://code.google.com/p/google-gson/)将适合您的工作。

然后，您应该在将结果 JSON 发送到任何远程服务器之前检查其有效性。

要在 PHP 中解析它，请使用[json_decode()](http://php.net/manual/fr/function.json-decode.php)函数，该函数将返回一个代表 JSON 的对象。如果您愿意，也可以获取哈希，只需查看文档即可。

我认为您的问题是您的 JSON 无效，因为 JSONObject 没有正确序列化您的 ArrayList。你应该检查一下。

# python - 为什么我的脚本在从 cron 和其他预定服务调用时不运行？

> ID：15902260
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:13.933
> 
> 标签：python, bash, cron

我只是试图触发一个脚本以经常运行以将项目下载到目录中。

我有一个下载目录的 python 脚本。我试过直接从 cron 运行 python 脚本......

```
5 * * * * python /home/yt/pybox/boxclient.py -U email@address.com -td -Pd moremusic/youtube 
```

甚至让 cron 调用运行 python 脚本的 bash 脚本......

```
5 * * * * cd /home/yt/yxbox/runscript 
```

我什至设置了一个 inotifywait 来监听 cron 执行触摸命令，然后从那里触发 python 脚本......

```
#!/usr/bin/env bash

inotifywait -mr -e ATTRIB * |

while read dir ev file;
do
   python boxclient.py -U email@address.com -td -Pd moremusic/youtube;
done; 
```

所有这些方式都给了我这个我迷失的错误：

```
Traceback (most recent call last):
  File "boxclient.py", line 224, in <module>
    sys.exit(main())
  File "boxclient.py", line 190, in main
    (parser, options, args) = parse_args(argv)
  File "boxclient.py", line 80, in parse_args
    return (parser, options, decode_args(args, options))
  File "/home/yt/pybox/pybox/utils.py", line 134, in decode_args
    setattr(options, attr, value.decode(ENCODING))
TypeError: decode() argument 1 must be string, not None 
```

当我在 cl 上运行 python 和 bash 脚本时，一切都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:58:21.730

我认为你需要失去和之间的`-U`空间`email@address.com`。语法是：

```
python pybox/boxclient.py -Ubob -td -Pd dir1/dir2 
```

（来自[https://github.com/hzheng/pybox](https://github.com/hzheng/pybox)）。所以在 Cron 中尝试：

```
5 * * * * /usr/bin/env python /home/yt/pybox/boxclient.py -Uemail@address.com -td -Pd moremusic/youtube 
```

通常，短格式选项在实参和它的参数之间不使用空格，而长格式选项可以。所以要么是`-Uemail@address.com`要么`--username email@address.com`。

# javascript - 在 Angular.js 中添加“喜欢”按钮

> ID：15902269
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:31.930
> 
> 标签：javascript, angularjs

我对我正在做的事情做了一点小小的改动，虽然它不会奇怪地在小提琴中工作，但会在我的版本中逐渐添加一个类似的东西：http: [//jsfiddle.net/LQFrv/](http://jsfiddle.net/LQFrv/)

```
function($scope) {

var hasLiked = false;

$scope.likeClicked = function() {

    if( hasLiked === false ){
        $scope.likeCount = $scope.likeCount + 1;
    }

    hasLiked = true;

    if (hasLiked === true) {
        $scope.liked = 'Unlike';
    }

}; 
```

});

我想要做的是：添加一个'like'>禁用'like'并替换为'unlike'>在下次单击元素时，删除like

请帮忙！

谢谢，

J.P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:22:53.837

HTML：

```
<body ng-app ng-controller="Ctrl"> 
    <a ng-click="likeClick()" ng-init="liked='Like'; likeCount=0">
        {{liked}} {{likeCount}}
    </a>
</body> 
```

JS：

```
function Ctrl($scope) {
var hasLiked = false;
$scope.likeClick = function () {
    if (!hasLiked) {
        hasLiked = true;
        $scope.liked = 'Unlike';
        $scope.likeCount += 1;
    } else {
        hasLiked = false;
        $scope.liked = 'Like';
        $scope.likeCount -= 1;
    }
}; 
```

}

工作小提琴：[jsfiddle.net/LQFrv/4/](http://jsfiddle.net/LQFrv/4/)
希望有帮助！

**编辑：**搞砸了链接，它导致另一个小提琴，对不起，现在应该是正确的！

# mongodb - 返回字符串的函数

> ID：15902271
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:36.287
> 
> 标签：mongodb, mongomapper

我正在 mongodb 中进行设置，正在研究使用大于哈希参数，但出现错误。但是，当我使用哈希火箭时，它可以工作。为什么是这样？

```
require 'rubygems'
require 'mongo'
require 'pry'
require 'win32ole'

db = Mongo::Connection.new.db("test")
x = db['text']

y = x.find({a: {$gt: 0}})
y.each {|y| puts y } 
```

数据

```
{"_id"=>BSON::ObjectId('51630eea5a8d7b8a8be738c0'), "a"=>1.0}
{"_id"=>BSON::ObjectId('51632de8583be71698000001'), "a"=>1}
{"_id"=>BSON::ObjectId('51632de8583be71698000002'), "a"=>1, "b"=>2} 
```

错误

```
syntax error, unexpected ':', expecting tASSOC 
```

对于 $gt 处的这一行：part y = x.find({a: {$gt: 0}})

这段时间

```
y = x.find({'b' =>  {'$gt' => 0}})
y.each {|y| puts y } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:49:13.147

我认为这`$gt`被解释为对全局变量的引用`$gt`，而不是符号`:$gt`。而且由于您不能将带殖民化的哈希语法与变量一起使用，因此它理所当然地期望使用哈希火箭。查询应该同时使用字符串和符号：

```
y = x.find({'b' =>  {'$gt' => 0}})
y = x.find({'b' =>  {:$gt => 0}}) 
```

# asp.net - 外部css中有哪些选择器名称？

> ID：15902276
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:43.717
> 
> 标签：asp.net, html, css

我首先在我的 aspx 中设置了图像和标题的样式，但是为了使代码看起来整洁，我想将所有样式放入外部样式表中。但是现在每当我采用所有格式并将其复制到我的样式表时，它都正确链接到我的 aspx 页面，但它不起作用。有些有一个 id，有些有一个类。noraml 标签喜欢`<h1> <p>`，但表格中的那些标签不起作用

这是我的代码

```
<table>  
    <tr>
        <td colspan="2"></td>
    </tr>

    <tr>
        <td colspan="2">
            <img src="Images/DoradoTop.jpg" alt="Dorado Image 1" class="DefaultImage"/>                            
        </td>
    </tr>
</table> 
```

我的 Css 尝试编辑图像：

```
img.DefaultImage
{
   border: meduim solid #006699;
   padding: 5px;
   width: 550px;
   height: 380px;
} 
```

我的另一个尝试

```
table tr td img.DefaultImage
{
   border: meduim solid #006699;
   padding: 5px;
   width: 550px;
   height: 380px;
} 
```

这些不起作用，我不知道如何在 CSS 中调用它们

任何帮助都可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:24:41.450

您的 aspx 页面可能会生成额外的 HTML 代码，尤其是当它们是任何将内容动态加载到您的页面上的代码隐藏时。例如，SharePoint 就是这样做的。如果您想真正“拥有”您的选择器和 ID，请下载 Google Chrome，打开开发人员工具并查看 DOM 准备好后 HTML 内容的样子。

然后复制您从他们那里看到的 HTML 表格，并将其与您在上面的初始示例中向所有人展示的表格进行比较，看看它们看起来是否相同。

开发者工具非常适合调试前端 Web 代码。

你能行的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:48:08.353

`img.Default.Image`

这是对的。使用`img.Default Image`您正在寻找带有 class的标签`Image`内的标签。`img``Default`

# ruby-on-rails - rails 记录集上的父子过滤

> ID：15902282
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:57.227
> 
> 标签：ruby-on-rails, tree, parent-child

我有一个非常复杂的查询，导致记录集有很多记录。现在在 Ruby on Rails 中，我想以这样一种方式进行排序，即孩子归于父母之下。

喜欢`record_set.sort_by_relation`。

它是同一张表的父子关系。孩子通过 parent_id 与父母相关联。

示例：具有以下结果的记录集：

*   主标1
*   分投标 21
*   主标2
*   分投标 1
*   分投标 22
*   分投标 2

期望的结果是：

*   主标1
*   分投标 1
*   分投标 2

*   主标2

*   分投标 21
*   分投标 22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:00:36.380

您可以使用像[Awesome Nested Set](https://github.com/collectiveidea/awesome_nested_set "很棒的嵌套集")这样的 gem来实现这种嵌套。

如果您不想使用 gem，您可以考虑首先让您的父母使用类似的东西`where('parent_id IS NULL')`，然后让每个父母使用`where('parent_id = ?', object.id)`.

Awesome Nested Set 非常整洁。您将能够执行以下操作：

```
<ul>
  <%- record_set.roots.each do |record| %>
    <%= render :partial => 'record', :locals => {:record => record} %>
  <%- end %>
</ul> 
```

_record.html.erb

```
<li>
  <%= record.name %>
  <%- unless record.children.empty? %>
    <ul>
      <%- record.children.each do |child|
        <%= render :partial => 'record', :locals => {:record => child} %>
      <%- end %>
    </ul>
  <%- end %>
</li> 
```

我希望这有帮助 ：）

# php - 如何在 PHP 中将接收到的 http 变量的字符集设置为 UTF-8？

> ID：15902284
> 
> 赞同：0
> 
> 时间：2013-04-09T12:44:58.210
> 
> 标签：php, character-encoding

如何在 PHP 中将接收到的 http 变量的字符集设置为 UTF-8？

我有一个使用`POST`带有 1 个输入字段的方法的 html 表单。但是当我提交表单并回显从输入字段中检索到的内容时，`$_POST['input_name']`我得到了这个：KrkiÄ - 但我输入（并且我需要）这个：Krkič

那么我该如何解决这个问题？

我现在想通了。:)

如果我想将内容添加到 MYSQL，那么我需要添加：

```
if(!$mysqli->set_charset("utf8")){
printf("Error loading character set utf8: %s\n",$mysqli->error);
} 
```

如果我只需要回显内容然后添加此元标记

```
<meta charset="utf-8"> 
```

进入html头就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:49:18.403

PHP 中没有全局默认字符集——很多东西都是编码感知的，每个都需要独立配置。

`mb_internal_encoding`仅适用于多字节字符串系列函数，因此仅当您已经在使用它们时它才有效（大多数时候您需要在 PHP 代码中操作多字节文本时这样做）。

错误设置的编码会给您带来问题的其他地方包括：

*   源文件本身（使用哪种编码保存在磁盘上？）
*   发送到浏览器的 HTTP 标头（显示接收到的内容为哪种编码？）
*   您的数据库连接（应该使用哪种编码来解释您的查询？将结果发送回您的哪种编码？）

这些中的每一个都需要独立解决，而且大多数情况下，它们还需要彼此达成一致。

因此，仅仅说“我想显示一些字符”是不够的。您还需要展示如何显示它们、它们来自哪里以及广告中的 HTML 编码是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:47:53.860

您可以使用：

```
<meta charset="UTF-8" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:47:57.850

在你的`php`文件顶部放置这个

```
 header('Content-Type: text/html; charset="UTF-8"'); 
```

# java - MongoDB Java 驱动程序 - 在查找查询中使用存在投影

> ID：15902287
> 
> 赞同：3
> 
> 时间：2013-04-09T12:45:01.087
> 
> 标签：java, mongodb, bson, mongo-java

我想获取字段下载不存在的所有文档

```
find{ "download" : {$exists: false}} 
```

对于 Java，我找到了一个示例：

```
 BasicDBObject neQuery = new BasicDBObject();
  neQuery.put("number", new BasicDBObject("$ne", 4));
  DBCursor cursor = collection.find(neQuery);

  while(cursor.hasNext()) {
    System.out.println(cursor.next());
  } 
```

我的适应是

```
 BasicDBObject field = new BasicDBObject();
      field.put("entities.media", 1);
  field.put("download", new BasicDBObject("$exists",false));
  System.out.println("Start Find");
  DBCursor  cursor = collection.find(query,field);      
      System.out.println("End Find Start Loop ALL 100k");
   int i = 1;
                while(cursor.hasNext()) 
```

存在线不起作用：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: com.mongodb.MongoException: Unsupported projection option: $exists
        at com.mongodb.MongoException.parse(MongoException.java:82)
        at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:314)
        at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:295)
        at com.mongodb.DBCursor._check(DBCursor.java:368)
        at com.mongodb.DBCursor._hasNext(DBCursor.java:459)
        at com.mongodb.DBCursor.hasNext(DBCursor.java:484)
        at ImgToDisk.main(ImgToDisk.java:61)
        ... 5 more 
```

它现在不知道正确的适应是什么，因为我的查询在 shell 和 UMongo 中工作，转移到 java 似乎并不那么容易看到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T13:03:47.327

你用

```
collection.find(query,field); 
```

作为 find 方法的第二个参数的 DBObject 用于指示要返回的结果文档的哪些属性。它对于减少网络负载很有用。

在您的示例中，您尝试将 $exists 子句放入`field`DBObject。那是行不通的。第二个参数对象的属性值只能为 1（包括此属性）或 0（排除）。

将其放入第一个调用的 DBObject 中`query`。

另请参阅[此处](http://docs.mongodb.org/manual/core/read-operations/#result-projections)和[此处](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#find%28com.mongodb.DBObject,%20com.mongodb.DBObject%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T13:22:37.643

您可以使用 DBCollection 通过 JAVA API 来执行此操作

```
public List<BasicDBObject> Query(String collection, Map<String, String> query, String... excludes) {
BasicDBObject bquery = new BasicDBObject(query);
BasicDBObject bexcludes = new BasicDBObject(excludes.length);
for (String ex : excludes) {
  bexcludes.append(ex, false);
}
return db.getCollection(collection, BasicDBObject.class).find(bquery).projection(bexcludes)
    .into(new ArrayList<BasicDBObject>()); 
```

}

db 是[MongoDataBase](http://api.mongodb.org/java/current/com/mongodb/client/MongoDatabase.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-16T22:43:41.497

我们需要指定两件事。

第一的 ：

```
collection.find(query,field); 
```

上述命令不是来自 MongoDB Java 驱动程序。这意味着我们只能在 mongo shell（或 mongo Compass）中运行，而不能在 java.util 中运行。

第二：要限制java中的字段，您可以使用projection()，如下代码

```
find(queryFilter)
.projection(fields(include("title", "year"),exclude("_id"))) 
```

完整示例：

```
Bson queryFilter = eq("cast", "Salma Hayek");
//or Document queryFilter = new Document("cast", "Salma Hayek");

Document result =
        collection
            .find(queryFilter)
            //.limit(1)  if you want to limit the result 

            .projection(fields(include("title", "year"),exclude("_id")))
       //or .projection(fields(include("title", "year"), excludeId()))
       //or .projection(new Document("title", 1).append("year", 1))
            .iterator()
            .tryNext(); 
```

# ruby-on-rails - Rails Elastic Beanstalk - 没有这样的文件或目录

> ID：15902288
> 
> 赞同：0
> 
> 时间：2013-04-09T12:45:05.820
> 
> 标签：ruby-on-rails, amazon-ec2, amazon-elastic-beanstalk

我有一个使用 Elastic Beanstalk 部署的 rails 应用程序。我想使用 ffmpeg 来获取有关存储在 S3 上的音频文件的信息，并且正在使用 streamio-ffmpeg gem 来使这更容易一些。

我已经在 EC2 实例上安装了 ffmpeg，它在通过 SSH 连接到实例时工作正常，并且在本地一切正常。我基本上是从 S3 下载文件，并将其存储在 /tmp 文件夹中，然后通过 streamio-ffmpeg gem 调用它。

```
s3 = AWS::S3.new(
:access_key_id => ENV["AWS_ACCESS_KEY_ID"],
:secret_access_key => ENV["AWS_SECRET_ACCESS_KEY"])
object = s3.buckets[ENV["AWS_S3_BUCKET"]].objects[CGI::unescape(self.url)]

tempname = Digest::MD5.hexdigest(DateTime.now.to_s) + "." + self.file_format
File.open(Rails.root.to_s + '/tmp/' + tempname, 'wb') do |f|
    f.write(object.read)
end

dl = Rails.root.to_s + '/tmp/' + tempname
audio = FFMPEG::Movie.new(dl) 
```

当我收到此错误时，错误发生在最后一行

```
Errno::ENOENT (No such file or directory - ffmpeg -i /var/app/current/tmp/46951a3d16abb2e5fcf1da9e4cf8e0f3.flac) 
```

我在这里做傻事吗？当我通过 SSH 进入实例时，文件就在它应该在的位置，当我在命令行中运行该行时，它运行得非常好。

更新我不是 Linux 专家，但在 tmp 目录中运行 ls -l 给了我

```
-rw-r--r-- 1 webapp webapp 26445358 Apr  9 13:07 90da56d83822a0bf716b5dfaae27844b.wav 
```

这些权限是否有限制？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:13:41.447

首先，我只会构建完整路径一次，并在两个地方以相同的方式引用它，这样如果你改变路径的组合方式，它们就不会不同步。它还应该使其更易于阅读。

```
tempname = Digest::MD5.hexdigest(DateTime.now.to_s) + "." + self.file_format
temppath = Rails.root.join('tmp', tempname)
File.open(temppath, 'wb') do |f|
    f.write(object.read)
end

audio = FFMPEG::Movie.new(temppath) 
```

如果仍然没有找到，我唯一能想到的就是某种竞争条件，如果它在关闭后对操作系统不太可见。不过似乎不太可能。

# css - 为什么我的元素不能绝对定位？

> ID：15902293
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:45:15.293
> 
> 标签：css

使用 CSS3 菜单，但我似乎无法`ul`使用`position:absolute`.

我试图让导航元素位于屏幕的左上角。

我已使用以下代码来实现这一点，但对元素位置的更改没有生效。

```
position: absolute;
top: 0;
left: 0; 
```

[代码笔链接](http://codepen.io/sanjaypoyzer/pen/CHnlw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:02:28.470

奇怪的是，即使您没有任何语法错误，重新键入属性/值也可以使其正常工作

[http://codepen.io/anon/pen/ICzqx](http://codepen.io/anon/pen/ICzqx)

# reporting-services - 分组后的SSRS报告列重新排序列

> ID：15902295
> 
> 赞同：-2
> 
> 时间：2013-04-09T12:45:37.967
> 
> 标签：reporting-services

这是我报告的当前输出

![在此处输入图像描述](https://i.stack.imgur.com/IzXuY.png)

我对除“产品采样”之外的所有字段进行了分组

现在我想将列位置重新排列为“产品采样”作为倒数第三个

*   医生密码
*   医生姓名
*   POB
*   专科医生
*   班级
*   产品抽样
*   产品详细
*   宣传材料

请为此提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:47:50.850

我后悔做了必要的...

为什么不简单地将列的占位符移动/拖动到您想要的顺序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:32:50.663

如果你有一个数据集。我的意思是首先尝试在报表生成器中打开现有报表并拖动列并保存它。它会成功的

# winforms - 选择列表框中的项目以将其分配为临时变量

> ID：15902299
> 
> 赞同：0
> 
> 时间：2013-04-09T12:45:43.080
> 
> 标签：winforms, visual-studio-2010, c#-4.0

我目前有 2 个列表框（lstbox1 和 lstbox2）。两个列表框都包含通过 StreamReaders 输入的数据，ArrayLists 保存文件中的所有数据。

目前，我的 lstbox1 包括：Genre、GenreDesc、AgeRange（这些只是我给它们的变量名，实际文件如下所示）：

*   动作, 描述这里, 12+
*   恐怖，描述在这里，18+
*   喜剧, DescriptionHere, 12+

这只是通过 SR 放入我的 lstbox1 的文本文件的示例。

我想做的是，当我从 lstbox1 中选择一个项目时，它会过滤掉 lstbox2 中与我选择的流派匹配的电影，并将其显示在列表框中。

我的第二个文本文件被输入到 lstBox2 中，看起来像这样（movieTitle，movieGenre，movieDesc，movieRating：

*   变形金刚, 动作, 描述在这里, 77/100
*   宿醉, 喜剧, DescriptionHere, 52/100
*   黑暗骑士, 动作, 描述在这里, 85/100
*   矩阵, 行动, 描述在这里, 74/100

由于两个列表框都包含多个变量，我希望我的 lstbox1 指定流派，并忽略其中的其他值，这样当我从 lstBox1 中选择一个值时，它将搜索细节。

```
if (lstBox1.Genre == lstBox2.movieGenre)
{
    lstbox2.items.clear();
    //Add Genre Name as header (Based upon your selected item)
    //Add movieTitle + movieDesc + movieRating
} 
```

& 循环这个直到所有的电影都被搜索到。

我制作了 2 个类（1 个用于流派，1 个用于电影）并且我不确定如何从 lstBox1 中选择“流派”部分用作过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:51:42.760

我想你已经加载了`lisBox1`with 类型的对象`Genre`。

```
lisBox1.Datasource = this.GetAllGenresFromTextFiles();
lisBox1.DisplayMember = "Genre"; 
```

将事件添加到`SelectionChanged`您的`lstBox1`：

```
lstBox1.SelectionChanged += lstBox1_SelectionChanged; 
```

然后在这种情况下，过滤 listbox2 的数据：

```
void lstBox1_SelectionChanged(object sender, EventArgs e)
{
    var movies = m_allMovies;
    var genre = lstBox1.SelectedItem as Genre;
    if(genre != null)
    {
        movies = movies.Where(m => m.Genre == genre.Genre).ToList();
    }
    lstbox2.Datasource = movies;
} 
```

`m_allMovies`是您从文本文件中加载的所有电影的列表。
您还可以在用户每次单击不同类型时读取文本文件，这将消耗更少的内存但更多的 CPU：

```
void lstBox1_SelectionChanged(object sender, EventArgs e)
{
    var movies = this.GetAllMoviesFromTextFiles();
    var genre = lstBox1.SelectedItem as Genre;
    if(genre != null)
    {
        movies = movies.Where(m => m.Genre == genre.Genre).ToList();
    }
    lstbox2.Datasource = movies;
} 
```

这里的关键点不是从`Listbox`. 您必须将其视为您`Listbox`包含所有电影的子集。
并且每次您想从 a 中添加或删除行时`Listbox`，实际上您正在使用适当的数据重新加载它。

# c# - WinRT C# - 创建转换器字符串到字符串以绑定 Gridview

> ID：15902304
> 
> 赞同：2
> 
> 时间：2013-04-09T12:46:00.987
> 
> 标签：c#, binding, windows-runtime, converter

我今天来找你是为了一个“小”问题。我不知道如何创建一个简单的转换器，因为它是第一次，我没有找到一个简单的例子。我想为 gridview 绑定创建一个转换器“字符串到字符串”。这是一个图像源。我从一个对象中获取一个字符串（这是图像的名称），我想添加“完整路径”，例如：

```
 return "ms-appdata:///local/" + value; 
```

这实际上是我所做的：

```
 class thumbToFullPathConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        var fullPath = value;

        return ("ms-appdata:///local/" + value);
        Debug.WriteLine(value.ToString());
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

抱歉，我认为这是一个快速的胜利，但我不知道该怎么做。谢谢你的时间，问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:57:27.563

您希望您的类从`IValueConverter`接口继承。

```
public class ThumbToFullPathConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {           
        if (value == null)            
            return value;

        return String.Format("ms-appdata:///local/{0}", value.ToString());
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您需要将此转换器包含在您的 XAML 中（作为页面本地的资源，或在整个应用程序中可用的应用程序资源）。在页面上您要访问转换器的位置导入命名空间。（更改`MyConverters`为您的命名空间）

```
xmlns:local="clr-namespace:MyConverters" 
```

然后将其设置为资源

```
<MyPage.Resources>
   <local:ThumbToFullPathConverter x:Key="ThumbToFullPathConverter" />
</MyPage.Resources> 
```

然后你可以在你喜欢的地方使用它

```
<TextBlock Text="{Binding MyText, Converter={StaticResource ThumbToFullPathConverter}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:03:54.607

使用此代码添加一个类。它将是你的转换器

```
public class ThumbToFullPathConverter : IValueConverter
{
    public object Convert(object value, Type targettype, object parameter, string Path)
    {
        return ("ms-appdata:///local/" + value).ToString();
    }
    public object ConvertBack(object value, Type targettype, object parameter, string Path)
    {
        throw new NotImplementedException();
    }
} 
```

现在下面的代码将向您解释如何使用它在 gridview 数据模板中绑定图像。

在 XAMl 页面中添加页面资源。

```
<Page.Resources>
    <local:ThumbToFullPathConverter 
               x:Key="ThumbToFullPathConverter" />
</Page.Resources>

<DataTemplate x:Key="MyTemplate">
     <Image 
            Source="{Binding path, Converter={StaticResource ThumbToFullPathConverter}}"
            Stretch="None" />
</DataTemplate> 
```

# pointers - 打印用户在 C++ 中键入的内存地址的内容

> ID：15902310
> 
> 赞同：0
> 
> 时间：2013-04-09T12:46:05.567
> 
> 标签：pointers, memory, hex

如何打印用户输入的地址？这种方式行不通。

这是代码。谢谢。

```
#include <iostream>

using namespace std;

int main()
{
    int num = 123456;
    int *addr = &num;

    cout << "Var: num, address: " << &num << ", has: " << num << endl
         << "Var: *addr, address: " << &addr << ", has: " << addr << endl
         << "Printing value of num using the pointer *addr: " << *addr << endl;

    int addr_user;
    cout << "Type the memory address: "; cin >> addr_user;

    int *p_addr_user = (int *)addr_user;

    cout << "The address given (" << addr_user << ") has: " << *p_addr_user << endl;
    return( 0 );
} 
```

对不起，我不是很清楚：

程序必须做什么：要求输入一个整数，从这些整数中打印内存地址，要求输入上面打印的内存地址，打印该内存地址的内容并确认该地址是否具有在步骤一中输入的数字。

一站式运行。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:46:45.043

我在Linux中试过这个：

```
g++ q.cpp 
q.cpp: In function ‘int main()’:
q.cpp:17:31: warning: cast to pointer from integer of different size [-Wint-to-pointer-    cast]
./a.out
Var: num, address: 0x7fff562d2828, has: 123456
Var: *addr, address: 0x7fff562d2818, has: 0x7fff562d2828
Printing value of num using the pointer *addr: 123456
Type the memory address: 0x7fff562d2828 
Segmentation fault (core dumped) 
```

所以我注意到几个问题：

1.  我自然想试试把num的地址放进去，但是显示的是16进制
2.  段错误

要以十六进制输入，我将输入行更改为：

```
cout << "Type the memory address: "; cin >> hex >> addr_user; 
```

（否则解释为 0）

但它仍然是段错误。

这是问题所在：

```
int *p_addr_user = (int*)addr_user; 
```

哦，上面有一个警告。有时关于不同的大小（还要注意指针是无符号的。）

整数和指针的大小可以不同（这取决于您的平台）对我来说，int 是 32 位，指针是 64 位。

这是我如何让它工作的：

```
#include <stdint.h>
#...
uintptr_t addr_user;
cout << "Type the memory address: "; cin >> hex >> addr_user;
uintptr_t *p_addr_user =(uintptr_t*) addr_user; 
```

# kendo-grid - Kendo UI Grid：分页不起作用

> ID：15902316
> 
> 赞同：2
> 
> 时间：2013-04-09T12:46:20.370
> 
> 标签：kendo-grid

我有一张桌子：

```
<table id="grid">
<thead>
    <tr><th data-field="name">Name</th></tr>
</thead>
<tbody>
    <tr><td>name 1</td></tr>
    <tr><td>name 2</td></tr>
    ...
</tbody>
</table> 
```

这就是它的初始化方式：

```
$('#grid').kendoGrid({
    scrollable: false,
    sortable: true,
    autoBind: true,
    columns: [ { field: 'name' } ],
    pageable: {
        buttonCount: 5,
        pageSizes: [10, 20, 50, 100, 200]
    },
    pageSize: 20
}); 
```

加载页面时，网格会显示所有元素。例如，如果有 500 个元素，则显示所有元素。页码等于 1，但未突出显示。PageSize 切换器显示“500”。当我单击 PageSize 切换器并将其更改为任何值时，分页开始工作。或者，如果我单击上一页/下一页图标，它也可以工作。怎么可能修好？

现在我用这个：

```
if ($grid.data("kendoGrid")) {
    $grid.data("kendoGrid").dataSource.page(1);
} 
```

但我不确定它是否足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T23:35:18.220

pageSize 是数据源而不是 kendoGrid 的属性，尽管 Kendo 文档（截至今天）将 pageSize 作为 KendoGrid 的属性，但在他们的示例中，您将在 DataSource 中看到它。

不要与正确位置的“pageSizes”混淆。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T13:03:06.583

尝试这个

```
$('#grid').kendoGrid({
    scrollable: false,
    sortable: true,
    autoBind: true,
    columns: [ { field: 'name' } ],
    pageable: {
                   refresh: true,
                   pageSizes: true
                    },
    pageSize: 20
}); 
```

# eclipse - Eclipse 调试会话中的完整跟踪

> ID：15902322
> 
> 赞同：0
> 
> 时间：2013-04-09T12:46:27.970
> 
> 标签：eclipse, debugging, trace

我有一个关于 Eclipse 调试的问题。我想在输出文件中包含调试会话的所有方法调用。我想跟踪所有主题的调用方法，就像在调试视图中一样，但不仅针对断点，而且针对所有调试会话。

使用断点不允许知道之前调用了哪些方法。知道这一点可以帮助有效地放置断点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:33:49.933

Eclipse Java 调试器没有跟踪功能。您需要查看其他工具，例如 Yourkit 分析器（我经常将其用于跟踪和基准测试）或 JProfiler。

# javascript - 擦除部分运动图像

> ID：15902324
> 
> 赞同：0
> 
> 时间：2013-04-09T12:46:35.583
> 
> 标签：javascript, html

有没有办法清除只有 1 个元素的画布（html5）？我在画布上有一个动态图像，当我擦除图像时，背景颜色也会消失。有没有办法只删除图像而不是整个背景。我的背景只是一个简单的颜色，但将来会更复杂。

这也很棘手，因为无法从属性中获取图像 x,y pos。

```
 ClassLoadImages.prototype.m_move = function(){
     this.x=++img1_x;
     this.y=++img1_y; 
     //img1_x++;
   //img1_y++;
  // alert(img.x);
      ctx.drawImage(img.imgElement,  this.x,   this.y);
     // ctx.fillText("finished loading " ,10,40);
  };

 function doGameLoop() {

    ctx.clearRect(0,0,600,400);
    img.m_move();
     if (img.x>30)
     {
          clearInterval(gameLoop);

     }
 }

  var img= new ClassLoadImages('images/image4.jpg');
 gameLoop = setInterval(doGameLoop, 100);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:48:23.653

简单的答案是否定的。画布是平面位图，而不是对象的分层集合。一旦你画到它，你就会失去你画的东西背后的背景。

您可以尝试自己实现该功能，方法是首先记录您用于创建画布的步骤，然后在使用或不使用相关图像的情况下重新创建它。

# java - java随机数生成器

> ID：15902326
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:46:39.313
> 
> 标签：java

我不明白 roll < 1000 的作用。我的意思是我不明白为什么在 rand 函数生成随机数时使用它。

```
public class Hello {
    public static void main(String[] args) {
        Random rand = new Random();
        int freq[] = new int[7];
        for (int roll = 1; roll < 1000; roll++) { // is there a reason for roll<1000
            ++freq[1 + rand.nextInt(6)];
        }
        System.out.println("Face \tFrequency");
        for (int face = 1; face < freq.length; face++) {
            System.out.println(face + "\t" + freq[face]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:52:12.343

```
for (int roll =1; roll<1000;roll++){ // is there  a reason  for roll<1000
    ++freq[1+rand.nextInt(6)];
} 
```

这里的作用是将 +1 添加到频率数组上的随机位置 999 次。

这里的“真正”随机数是 rand.nextInt(6)，它生成一个 0 到 6 之间的数字。

这里：

```
for( int face=1;face<freq.length;face++){
    System.out.println(face + "\t"+freq[face]);
} 
```

打印频率数组上的 6 个数字

干净简单的代码：

```
`public class Hello {
    public static void main(String[] args) {

        //Creates an instance of Random and allocates 
        //the faces of the dices on memory
        Random rand = new Random();
        int freq[] = new int[6];

        //Rolls the dice 1000 times to make a histogram
        for (int roll = 0; roll < 1000; roll++) {
            ++freq[rand.nextInt(6)];
        }

        //Prints the frequency that any face is shown
        System.out.println("Face \tFrequency");
        for (int face = 0; face < freq.length; face++) {
            System.out.println(face + "\t" + freq[face]);
        }
    }
}` 
```

现在它在内存上分配了 6 个 int 作为骰子面，滚动 1000 次，并且应该很容易理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:48:38.020

因为他们只想生成最多 999 个随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:48:53.937

在这种情况下，滚动用作 for 循环中的计数器，以在达到限制后中断循环。在此示例中，限制为`1000`。由于 roll 被初始化为 1，它会生成`999`数字。

# c# - 从输出参数中提取类

> ID：15902332
> 
> 赞同：2
> 
> 时间：2013-04-09T12:47:14.497
> 
> 标签：c#, .net-3.5, resharper

我有一个带有`out`参数的方法，例如：

```
void Do(int anInput, out List<string> items, out int count)
{
   /* some code */
} 
```

现在我想转换该签名，以便将输出参数替换为该方法返回的对象，例如：

```
DoResult Do(int anInput)
{
   /* some code */
   return new DoResult{Items=TODO, Count=TODO};
}

class DoResult {
    public List<string> Items;
    public int Count;
} 
```

在 Visual Studio 2010 或 ReSharper 7 中是否对这种转换进行了重构？

我知道 ReSharper 重构*Extract Class From Parameters*。但它似乎对我的`out`参数没有帮助。

*更新：* Daniel A. White 的回答非常适合 .Net 4.0。.Net 3.5 有解决方案吗？*元组*的生成也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:49:17.417

我在他们的文档中发现了这种重构。它将它更改为一个[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)，但它至少应该让你开始。

[http://www.jetbrains.com/resharper/webhelp/Refactorings__Transform_Out_Parameters.html](http://www.jetbrains.com/resharper/webhelp/Refactorings__Transform_Out_Parameters.html)

从那里，您可以更改签名。

# jquery - ajaxComplete 上的 Galleria 中的目标元素

> ID：15902333
> 
> 赞同：0
> 
> 时间：2013-04-09T12:47:16.977
> 
> 标签：jquery, ajax, jquery-selectors, galleria

我正在尝试操作一个包含一段文本的特定元素，我想将它包装在一个 href 中，尽管我使用 css 背景红色来证明元素的目标。

我正在使用 Galleria 1.2.8，我目前有一个在 ajaxComplete 上触发并且可以工作的函数。

这是当前的工作功能：

```
// dynamically create data-links for all gallery items
$(document).ajaxComplete(function() {
    $('#galleria a').each(function() {
        var $href = $(this).attr('href');
        $(this).children().attr('data-link',$href);
    });
    $('.galleria-info-description:contains("NN")').css('background', 'red');  
}); 
```

最后一行是该功能的一部分不起作用。

这是动态创建的简化的 html 基本块：

```
 <div class="galleria-container">
    <div class="galleria-stage">
    </div>
    <div class="galleria-thumbnails-container">
    </div>
    <div class="galleria-info">
       <div class="galleria-info-text">
          <div class="galleria-info-description">
              NN Contemporary Art
          </div>
       </div>
       <div class="galleria-info-link">
       </div>
       <div class="galleria-info-close">
       </div>
    </div>
 </div> 
```

我尝试了很多变体，创建了一个变量来保存内容并对其进行操作。通过深入研究其几个父母来定位班级，似乎没有任何效果。我可以在 ajaxComplete 上完全从页面中删除#galleria id，只是似乎无法获取对象中返回的特定元素。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:24:03.210

所以有点笨拙，但我在这里查看了 Galleria 文档：http: [//galleria.io/docs/api/methods/#retrieval](http://galleria.io/docs/api/methods/#retrieval)

我现在在 Galleria init 之前添加了这段代码：

```
Galleria.ready(function(options) {
$targetElem = ( this.getData([10]));
$targetElem.description = '<a href="http://www.nncontemporaryart.org/exhibitions/guests-   hosts" target="_blank">NN Contemporary Art Northampton</a>';
}); 
```

# database-design - 数据库：外键执行

> ID：15902335
> 
> 赞同：1
> 
> 时间：2013-04-09T12:47:29.233
> 
> 标签：database-design, spring-roo, foreign-key-relationship

我敢肯定这可以回答，但不完全知道在哪里。

前言：

我们的解决方案是计费解决方案。应用程序设计非常简单，我们为企业创建网络商店并向企业主提供凭据。

企业主可以登录并创建相关产品、类别等。他们还可以注册他们可能想要用于计费的设备。

可以使用 Web 界面创建主实体，而计费发生在设备的本机应用程序上。

**数据库表：**

```
BUSINESS: id, name etc. - Business Info Table
CATEGORY: id, business_id, name etc. - Product Categories
PRODUCT: id, category_id, name etc. - Products 
```

**应用：**

基于 Spring ROO 的 Web 应用程序。Spring MVC 作为 GUI 技术

**问题：**

如前所述，所有者必须使用他们的凭据登录网络商店。因此，当他们开始创建实体时，webapp 知道相关的业务 ID，该 ID 透明地存储在所有类别、产品等中。

在创建产品时，用户可以选择产品可能属于的类别。

问题是：将 business_id 存储在产品表中是个好主意吗？因为我们只会在生成产品 GUI 时填充与业务相关的类别。对于在 GUI 中强制执行此类规则的所有关联表，情况也是如此。

有些人可能知道，ROO 采用为每个 CRUD 操作创建服务的方法。因此，如果我们决定不将 business_id 与产品一起存储，那么如果有人尝试使用不属于相关业务的类别 id 调用服务，则可以规避业务规则。或者，保持数据库设计不变并专注于保护服务是一个好主意。

如果您有任何相关的利弊，也请在此处发布。

提前致谢 ：）！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:48:52.113

您面临的问题称为多租户。您可以在此处阅读有关选项优缺点的更多信息：

[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

我更喜欢按模式租户的方法。

您可以使用 JBoss Hibernate 的多租户功能来自动执行此操作：

[http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)

# asp.net - 在asp.net中上传多个文件的高效可靠方法是什么？

> ID：15902346
> 
> 赞同：1
> 
> 时间：2013-04-09T12:48:02.497
> 
> 标签：asp.net, file-upload

我需要一个在 asp.net 中开发应用程序的想法。该应用程序的目的是为特定任务上传多个文件。

那么我如何一次上传多个文件而没有可靠性、可扩展性和性能问题。除此之外，每个文件也可以有一些描述。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:50:38.070

使用多文件上传用户控件 此链接为您提供多文件上传用户控件 [http://www.codeproject.com/Articles/24271/Multiple-File-Upload-User-Control](http://www.codeproject.com/Articles/24271/Multiple-File-Upload-User-Control)

# scala - this.type 作为构造函数参数

> ID：15902347
> 
> 赞同：1
> 
> 时间：2013-04-09T12:48:02.737
> 
> 标签：scala, generics, types

从这个问题开始，[为什么不能 this.type 用于新实例](https://stackoverflow.com/questions/775312/why-cannot-this-type-be-used-for-new-instances)。我想在构造函数中有一个 this.type 对象。我不相信可以做到这一点，但是我希望这里有人知道方法！
这是我的基本特征

```
trait Node {
  def parent:Option[this.type]
} 
```

我已经实现了一个类如下

```
case class NodeInstance(parentValue:Option[NodeInstance]) extends Node {
  def parent = parentValue.asInstanceOf[Option[this.type]]
} 
```

但我想拥有

```
case class NodeInstance(parent:Option[NodeInstance]) extends Node 
```

但这给出了一个覆盖方法 parent 具有不兼容的类型异常。

我想我不能把它作为继承 NodeInstance 的对象（如果它是一个类的话），会破坏 this.type 要求。但是我想我会检查一下是否有更好的方法来解决这个问题......

现在如果我使用

```
trait Node[T] { self:T =>
  def parent:Option[T]
} 
```

我想要一个返回根节点的函数'root'，如果我将它嵌入到特征中

```
trait Node[T] { self:T =>
  def parent:Option[T]
  def root:T = this.parent.map(_.root).getOrElse(this)
} 
```

然后我得到编译器异常值 root is not a member of type Parameter T

如果我抽象出根，然后我会得到 T 的类型参数问题

```
object Node {
  def root[T <: Node[?]](node:T):T = node.parent.map(root(_)).getOrElse(this)
} 
```

好的，刚刚发现我可以有 [T <: Node[T]]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:01:00.643

`this.type`指实例类型。由于您在构造函数中，因此无法确定`this.type`. 你会得到错误：`this can be used only in a class, object, or template`。

在这些情况下，通常会引入类型参数和 self 类型

```
trait Node[T] { self:T =>
  def parent: Option[T]
}

case class NodeInstance(parent:Option[NodeInstance]) extends Node[NodeInstance] 
```

# flash - 在帧加载 Actionscript 3.0 上运行函数

> ID：15902352
> 
> 赞同：0
> 
> 时间：2013-04-09T12:48:13.880
> 
> 标签：flash, actionscript, air

我正在使用 actionscript 和 flash 创建一个移动应用程序（我知道它已经过时了）。我想知道当我加载到新框架时是否有一种方法可以执行函数。例如：当进入第 10 帧时，我想调用一个函数从数据库中检索一些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:09:47.840

您必须添加帧侦听器。

```
stage.addEventListener(Event.ENTER_FRAME, onFrameEnter); 
```

# c# - 初始化一个三级锯齿状数组，得到错误“需要嵌套数组初始化程序”

> ID：15902355
> 
> 赞同：1
> 
> 时间：2013-04-09T12:48:18.737
> 
> 标签：c#, arrays

我正在尝试创建一个三级锯齿状数组。

这是我的代码：

```
int[][, ,][,] x = new int[1][, ,][,]{
                new int[1,1,1][,] {
                    new int[7,8]
                }
            }; 
```

我收到此错误：`A nested array initializer is expected`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:52:34.877

考虑一下 a 的初始化程序是什么`[,,]`样的。例如：

```
int[,,] arr = {{{1}}}; 
```

因此，您需要的更像是：

```
int[][, ,][,] x = new int[1][, ,][,]{
        new int[1,1,1][,] {{{new int[7,8]}}}
    }; 
```

甚至只是：

```
int[][, ,][,] x = {
        new int[1,1,1][,] {{{new int[7,8]}}}
    }; 
```

# php - joomla 2.5 中蜘蛛目录扩展中的致命错误

> ID：15902364
> 
> 赞同：0
> 
> 时间：2013-04-09T12:48:50.833
> 
> 标签：php, plugins, joomla, web-crawler, catalog

我正在使用蜘蛛目录扩展来显示我网站中的产品目录。将网站上传到服务器后，当我尝试访问产品页面时遇到此错误：

> 致命错误：在第 1 行的 /home/a5401627/public_html/components/com_spidercatalog/spidercatalog.php 中调用未定义函数 phpdefined()

这是`spidercatalog.php`文件：

```
<?php
defined( '_JEXEC' ) or die( 'Restricted access' );
$document =& JFactory::getDocument();

$document->addStyleSheet(JURI::root(true).'/components/com_spidercatalog/css/spidercatalog_main.css');
$document->addScript(JURI::root(true).'/components/com_spidercatalog/js/common.js');
$document->addScript('components/com_spidercatalog/spiderBox/spiderBox.js.php?delay=3000&allImagesQ=0&slideShowQ=0&darkBG=1&juriroot='.urlencode(JURI::root(false)).'&spiderShop=1');

require_once( JPATH_COMPONENT.DS.'controller.php' );
$controller = JRequest::getVar( 'controller' );

global $param_values;
$db =& JFactory::getDBO();
$query ="SELECT *  from #__spidercatalog_params ";

$db->setQuery($query);
$rows = $db->loadObjectList();
if ($db->getErrorNum()) {
    echo $db->stderr();
    return false;
}
$param_values=array();

foreach($rows as $row){
$key=$row->name;
$value=$row->value;
$param_values[$key]=$value;
}

class jsshparams{

    function get($key) {
        global $param_values;   
        return $param_values[$key];
    }
}

$classname    = 'spidercatalogController'.$controller;

$controller   = new $classname( );

$controller->execute( JRequest::getVar( 'task' ) );

$controller->redirect();

?> 
```

我试图在这里和在线查找该错误，但无济于事，有趣的是，当我在`XAMPP`本地计算机上运行时，它可以完美运行。如果大家能提供帮助，我将不胜感激。

编辑：我已经能够通过再次重新安装扩展来解决问题。也许在我将文件上传到服务器时出现了问题

# javascript - 更改特定元素的引导弹出位置

> ID：15902366
> 
> 赞同：5
> 
> 时间：2013-04-09T12:48:52.500
> 
> 标签：javascript, jquery, twitter-bootstrap, popup

我在数据表上使用[引导弹出窗口](http://twitter.github.io/bootstrap/javascript.html#popovers)，正如您从下面的 jsFiddle 中看到的那样，每个单元格在单击时都会创建一个弹出窗口。

我正在尝试为连续最后一个 td 调整弹出框的位置或“位置”，想法是单击最后一个单元格时，弹出框将位于左侧而不是顶部。

您将看到是否滚动到表格末尾单击我已实现选择但未实现定位的最后一个单元格。

关于如何实现这一目标的任何想法？

[http://jsfiddle.net/N8NNC/1/](http://jsfiddle.net/N8NNC/1/)

弹出窗口的 javascript 继承人：

```
$(".metapop").popover({ 

    html: true,
    trigger: 'manual',
    placement: 'top',
    title: "You clicked on this cell:",
    content: 'hello this is a popover'

}).click(function(e) {

        $('.popover').hide();
        $(this).popover('show');
        if($(this).parent().is('td:last-child'))
            {
                alert($(this))
            }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:13:01.980

您可以像这样为“放置”选项分配一个功能..

```
$(".metapop").popover({ 

    html: true,
    trigger: 'manual',
    placement: function(pop,ele){
        if($(ele).parent().is('td:last-child')){
        return 'left'
        }else{
        return 'top'
        }
    },
    title: "You clicked on this cell:",
    content: 'hello this is a popover'

}) 
```

# mysql - MySql 仅获取 wordpress 查询的不同结果

> ID：15902374
> 
> 赞同：0
> 
> 时间：2013-04-09T12:49:03.933
> 
> 标签：mysql, group-by, wordpress

我想从 Wordpress 数据库中选择内容来填充所有不同类别的 <select> ，但有可能 2 个或更多帖子具有相同的类别，在这种情况下，我应该只显示一次该类别。

一个例子：

```
Post1 cat = EN
Post2 cat = EN
Post3 cat = DE
Post4 cat = FR
Post5 cat = FR

// The Result sould look like this:
EN
DE
FR 
```

这是代码的当前状态：（但效果不佳）

```
 <select name="sprache">
        <option value="0">Alle Sprachen</option>
        <?php

        $selectsql = " 
            SELECT  
            wpos ts.*,
            wterms.*

            FROM $wpdb->posts wposts
                    INNER JOIN $wpdb->term_relationships AS tr ON (wposts.ID = tr.object_id)
                    INNER JOIN $wpdb->term_taxonomy AS tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id)
                    INNER JOIN $wpdb->terms wterms ON (tt.term_id = wterms.term_id)
                    INNER JOIN $wpdb->postmeta wpostmeta ON (wposts.ID = wpostmeta.post_id)

            WHERE wposts.post_status = 'publish'
            AND tt.taxonomy = 'th5'
            AND wpostmeta.meta_key= '_sprachgruppen'

            GROUP BY tt.taxonomy 
            ";

 $select_output = $wpdb->get_results($selectsql,OBJECT);

 if ($select_output){ 
    foreach ($select_output as $post){
        setup_postdata($post);

   if(isset($_POST[gruppe])){
        $option .= '<option value="'.$post->term_id.'"';
        $option .= ' >';
        $option .= $post->name;
        $option .= '</option>';

   }
 echo $option; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:12:25.877

这里有一个类别列表`post_type`

```
 SELECT `name` FROM`wp_terms` WHERE `term_id` IN (
 SELECT term_id FROM `wp_term_taxonomy` WHERE `term_taxonomy_id` IN 
 (SELECT `term_taxonomy_id` FROM `wp_term_relationships` WHERE `object_id` IN 
 (SELECT ID FROM `wp_posts` WHERE post_type='your custom post type') AND `object_id` IN
 (SELECT post_id FROM `wp_postmeta` WHERE meta_key='_sprachgruppe')
 )
 ) 
```

如果知道确切的会更容易`term_taxonomy name`

# android - 如果 android 手机是唯一的 A2DP 源设备，蓝牙耳机如何将语音发送到 android 手机？

> ID：15902380
> 
> 赞同：0
> 
> 时间：2013-04-09T12:49:11.427
> 
> 标签：android, bluetooth

如果 android 手机是唯一的 A2DP 源设备，蓝牙耳机如何将语音发送到 android 设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:23:41.193

我不确定您从哪里得到 Android 设备仅支持 A2DP 的想法。大多数（如果不是全部）（？）具有蓝牙的 Android 设备都支持免提配置文件，其中语音音频通过 SCO 链接在设备和附件之间传输。

如果您的问题实际上是*“我有一个仅支持 A2DP 的 Android 设备，我可以使用它通过蓝牙进行语音通话吗？”* 那我不知道。我怀疑不是，因为 A2DP 是单向的。

# asp.net-mvc-4 - View(PartialView)返回的ViewModel为空

> ID：15902395
> 
> 赞同：1
> 
> 时间：2013-04-09T12:49:37.483
> 
> 标签：asp.net-mvc-4, asp.net-mvc-partialview, asp.net-mvc-viewmodel

请帮助我理解为什么我的视图模型被视图返回为空。我试图在谷歌中找到解决方案，但绝大多数建议是添加隐藏。但对我来说，添加 Html.HiddenFor 不起作用

这是我的代码

**视图模型**

```
public class MyViewModel
{
    public FilterViewModel Filter {get; set;}

    public MyViewModel()
    {
        Filter = new FilterViewModel();
    }
}

public class FilterViewModel
{
    public IEnumerable<SelectListItem> TimeUnits { get; set; }
    public string SelectedTimeUnit { get; set; }
} 
```

**控制器**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        MyViewModel model = new MyViewModel();
        model.Filter.TimeUnits = new SelectList( new string[] {"week", "month", "year"});

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        *here I have empty model*
        return View();
    }
} 
```

**看法**

```
@model Mvc4WebApplication.Models.MyViewModel

@using (Html.BeginForm())
{
    @Html.HiddenFor(m => m.Filter.SelectedTimeUnit)
    @Html.Partial("_FilterPartial", Model.Filter)

    <input type="submit" class="ok" value="OK" />
} 
```

**部分视图**

```
@model Mvc4WebApplication.Models.FilterViewModel

<div class="select">
    <div class="background">
        @Html.DropDownListFor(m => m.SelectedTimeUnit, Model.TimeUnits as SelectList, "Select time unit", new { onchange = "FetchPeriods();" })
    </div>
</div> 
```

提前谢谢。

**UPD** 生成的 HTML 看起来像这样

```
<form action="/" method="post">
   <input id="Filter_SelectedTimeUnit" name="Filter.SelectedTimeUnit" type="hidden" value="">
   <div class="select">
       <div class="background">
           <select id="SelectedTimeUnit" name="SelectedTimeUnit" onchange="FetchPeriods();">
               <option value="">Select time unit</option>
               <option>week</option>
               <option>month</option>
               <option>year</option>
           </select>
       </div>
</div>
    <input type="submit" class="ok" value="OK">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-06T19:27:13.910

不确定4年后您是否仍在寻找答案，但我遇到了同样的事情并找到了这个解决方案：

改变你的

```
@Html.Partial("_FilterPartial", Model.Filter) 
```

至

```
@Html.Partial("_FilterPartial", Model.Filter,
       new ViewDataDictionary(Html.ViewData)
       {
            TemplateInfo = new TemplateInfo { HtmlFieldPrefix = Html.NameFor(m => m.Filter).ToString() }
       }) 
```

[我在这里](https://stackoverflow.com/questions/36848815/how-to-update-view-model-in-a-partial-view-in-mvc5)找到了答案

# php - 如何知道 apache/php 的默认字符集

> ID：15902399
> 
> 赞同：3
> 
> 时间：2013-04-09T12:49:41.850
> 
> 标签：php, apache, character-encoding, iso-8859-1

当 httpd.conf 或 php.ini 或 .htaccess 等中未指定字符集时，apache 服务器/php 使用的默认字符集是什么？

当响应标头不包含任何字符集信息时，浏览器将其视为 ISO-8859-1，但我找不到任何确认 apache 服务器/php 实际上使用 ISO-8859-1 编码发送数据作为响应。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:00:55.577

我不完全确定，但 Apache 不会*产生*输出，它只是*提供*输出。所以这一切都取决于资源的编码方式，而不是由 Apache 来编码它们。

即使您指定了字符集，它也只是对浏览器的提示。您可以`utf-8`通过 php 或通过 Apache 设置字符集，但如果提供的资源使用不同的编码，您的浏览器只会显示错误的编码数据。

如果没有设置字符集，那么您的浏览器必须猜测（或使用默认字符集）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:15:36.913

的默认值为，[`default_charset`](http://www.php.net/manual/en/ini.core.php#ini.default-charset)适用`"iso-8859-1"`于 PHP 提供的所有页面。

对于 Apache，text 和 html 的默认字符集是强制的，[`AddDefaultCharset`](http://httpd.apache.org/docs/2.2/mod/core.html#adddefaultcharset)其中也有默认的`"iso-8859-1"`.

# iphone - 在将文件从捆绑包复制到文档路径时显示进度条

> ID：15902402
> 
> 赞同：3
> 
> 时间：2013-04-09T12:49:52.490
> 
> 标签：iphone, ios, objective-c, ipad, nsfilemanager

我正在制作一个应用程序，在登录时我将一些文件从**我的主包****复制**到**应用程序文档的目录**。大约需要3-4分钟。在此期间，我向用户显示活动指示器。

 ****但是我想显示一个**进度条**，以便用户知道复制完成的百分比。有没有人遇到过这种情况？

任何建议，都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:32:51.040

Yannick Loriot的`YLProgressBar`项目非常容易实施，并且可以实现您想要实现的基本功能。

[您可以在此处](http://www.cocoacontrols.com/controls/ylprogressbar)找到开源（MIT 许可）项目。

希望能帮助到你！

PS。如果您不喜欢，[这里](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=progress)是其他开源进度视图。`YLProgressBar`****

# javascript - 当孩子变长时，父 div 会变长

> ID：15902404
> 
> 赞同：1
> 
> 时间：2013-04-09T12:49:56.213
> 
> 标签：javascript, html, css, twitter-bootstrap

我在左侧有一个日历，在右侧有一个侧栏： ![在此处输入图像描述](https://i.stack.imgur.com/OqoYj.png)

问题是，案件泛滥。相反，当滚动条比其父级长时，我需要显示滚动条。

他们在引导手风琴中。

这是html：

```
 <div id="cal-container">
        <div id="cal-side">
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle project-header" data-toggle="collapse" data-parent="#accordion2" href="#project-list">Projects
                        </a>
                    </div>
                    <div id="project-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container project-container">
                            </div>

                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle task-header" data-toggle="collapse" data-parent="#accordion2" href="#task-list">Tasks
                        </a>
                    </div>
                    <div id="task-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container task-container">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle case-header" data-toggle="collapse" data-parent="#accordion2" href="#case-list">Cases
                        </a>
                    </div>
                    <div id="case-list" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="event-container case-container">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div id="cal">
            <div id='calendar'>
            </div>
        </div>
    </div> 
```

事件进入事件容器。

这是CSS：

```
#cal-side
{
    float:right;
    height:100%;
    width:200px;
    margin:50px 5px 5px 5px;
}

#cal-container
{
    width:100%;
}

.accordion-inner
{
    padding:2px 2px !important;
}

.external-event { /* try to mimick the look of a real event */
    margin: 2px;
    padding-left:4px;
    color: #ffffff;
    background-color:blue;
    font-size: .85em;
    cursor: pointer;    
    -webkit-border-radius: 3px;
    border-radius: 3px;
    height: 20px;
    overflow:hidden;
    }

.event-container
{
    margin:1px;
}
#cal{ 
} 
```

这是一些生成的html： ![在此处输入图像描述](https://i.stack.imgur.com/jlLJa.png)

我尝试了几种类型的溢出：自动。唯一“有效”的是将事件容器最大高度设置为固定像素数量。然后我看到一个案例滚动条，但除此之外，它会执行您所看到的操作。我需要最大高度是 cal-side 的高度或其他东西......

我不知道该怎么办。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:16:52.720

在你的容器上，设置一个`max-height`并放`overflow: auto`

**工作示例：**

[http://jsfiddle.net/DRVMG/13/](http://jsfiddle.net/DRVMG/13/)

**编辑**下面的代码只是为了满足OP在下面所做的评论，我不建议`jQuery`他原来的帖子：

要将日历的高度设置为侧边栏的高度，您可以：

```
$("#sidebar-id").css({"max-height" : $("#calendar-id").height() }); 
```

然后在 CSS中你需要`overflow`将`sidebar div``auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:54:46.883

设置溢出不会改变元素扩展以包含其子元素的方式。您似乎已经注意到，您需要将您选择的溢出设置（例如`auto`）*与*特定高度相结合。

你试过100%的高度`.event-container`吗？不摆弄它很难说清楚，但这可能会产生所需的行为（不过，这取决于你在 DOM 树上的进一步操作）。

# windows-phone-8-emulator - 获取“Windows Phone Emulator 无法发送键盘数据。电话关闭了连接。某些功能可能会减少”

> ID：15902405
> 
> 赞同：1
> 
> 时间：2013-04-09T12:49:57.160
> 
> 标签：windows-phone-8-emulator, windows-phone-8-sdk

WP8 模拟器中的某些功能无法正常工作，例如返回按钮、主页按钮、加速度计、屏幕截图功能。应用程序正在工作。单击返回按钮时出现错误“Windows Phone Emulator 无法发送键盘数据。电话关闭了连接。某些功能可能是减少"

对于加速度计我得到

Windows Phone Emulator 无法发送加速度计数据。Phone 关闭了连接。某些功能可能会减少”。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T06:26:55.677

您应该尝试以下方法 -

1.  重启手机模拟器。

    否则，

2.  打开 Hyper-V Manager 并删除 Emulator 的虚拟实例。同时删除快照并启动模拟器的新实例。

    别的，

3.  打开 Hyper-V 管理器并从 Virtual Switch Manager（操作窗格，右侧）检查 Windows Phone Emulator Internal Switch。移除模拟器开关并启动模拟器的新实例。

希望这可以帮助。:)

# asp.net-web-api - 使用 MVC FormsAuthentication 在 .NET Web API 中进行身份验证

> ID：15902409
> 
> 赞同：4
> 
> 时间：2013-04-09T12:50:06.580
> 
> 标签：asp.net-web-api, xmlhttprequest, cross-domain, forms-authentication, session-cookies

我们有一个使用 AngularJS 框架的单页应用程序，它需要与在不同域上的 .NET Web API 中实现的 API 对话。

**问题**

API 在 .NET Web API 中实现。为了对用户进行身份验证以访问我们的 API，我们实现了 MVC 单页应用程序模板。这使用 FormsAuthentication 来授予对 API 的访问权限。

我们使用 Fiddler 进行调试。当我们在 API 上访问需要直接在浏览器中进行身份验证的控制器时，我们可以确认用户确实已通过身份验证。正如我们所怀疑的，当我们执行 XMLHttpRequest 时，标头中没有发送任何身份验证 cookie。

我们想要完成的是使用 FormsAuthentication 通过 XMLHttpRequests 访问 .NET Web API。

对此提出的一种解决方案是在 .NET Web API 和 MVC 之间共享会话。我们如何轻松维护 .NET Web API 和项目的 MVC 部分之间的状态？

*我们知道，它不是很 RESTful，但我们需要快速解决这个问题。*

*PS！FormsAuthentication 通过使用 [Authorize] 属性与 .NET Web API 控制器一起使用。只是控制器不能被 XMLHttpRequests 访问。*

**fiddler 使用 XMLHttpRequest 时的截图**

![XmlHttpRequest](https://content.screencast.com/users/kennethlynne/folders/Jing/media/bb5931e2-9be8-4cbc-857d-9ed95188eb99/2013-04-09_1437.png)

**直接在浏览器中完成请求时 fiddler 的屏幕截图** ![直接在浏览器中](https://content.screencast.com/users/kennethlynne/folders/Jing/media/26446429-0aa9-4230-a701-7d95bd8f3c62/2013-04-09_1438.png)

**要测试的身份验证控制器的屏幕截图** ![认证控制器](https://content.screencast.com/users/kennethlynne/folders/Jing/media/f0da991e-a387-4162-8274-1f0157854670/2013-04-09_1440.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T06:16:47.577

这是一个[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)请求。您可以使用 Microsoft.AspNet.WebApi.Cors 库。

`webapi config`在 ASP.NET WEB API 中使用 CORS只需要添加一行：

```
config.EnableCors("*","*","*"); 
```

[详细查看此内容](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api)。

# ios - 如何在 iOS 上使用数据库制作 UITableView

> ID：15902412
> 
> 赞同：-6
> 
> 时间：2013-04-09T12:50:16.567
> 
> 标签：ios, objective-c, database, uitableview

我想将数据显示到我从数据库中获取的部分中。我的目标是根据创建日期显示数据（日期是我的对象的一个​​属性），因此标题必须是创建日期。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:57:11.813

这可以帮助您入门：

*   [iOSMadeSimple UITableView 教程](http://iosmadesimple.blogspot.in/2012/10/adding-uitableview-tutorial.html)
*   [iOSDevNotes UITableView 教程](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)
*   [AppCoda UITableView 教程](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)
*   [TechPro UITableView 教程](http://tech.pro/tutorial/1026/how-to-create-and-populate-a-uitableview)

哦，我怎么能忘记提到[UITableView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/)

永远记住，不要在没有自己做**任何事情的情况下开始寻求帮助。**

至少，在在这里发布问题之前做一些研究。我希望你能学得更快。

# universal-image-loader - 直接获取Bitmap而不是discCacheUtil中的文件

> ID：15902414
> 
> 赞同：1
> 
> 时间：2013-04-09T12:50:20.877
> 
> 标签：universal-image-loader

我正在使用 Universal Image Loader 下载图像。这是我的配置和显示选项。

```
File cacheDir = getApplicationContext().getCacheDir();
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(
    getApplicationContext())
    .discCache(new UnlimitedDiscCache(cacheDir)).threadPoolSize(3)
    .denyCacheImageMultipleSizesInMemory()
    .tasksProcessingOrder(QueueProcessingType.LIFO)
    .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
    .build();

options = new DisplayImageOptions.Builder()
    .cacheOnDisc().bitmapConfig(Bitmap.Config.RGB_565)
    .imageScaleType(ImageScaleType.EXACTLY).resetViewBeforeLoading()
    .showStubImage(R.drawable.bt_fine_dining).build(); 
```

一切正常。但我想检查图像是否已经存在。使用 discCacheUtil 能够获取图像文件。[DiscCacheUtil.findInCache(imageUri, discCache)]。但是有没有办法直接获取位图而不是文件？

而且如果我同时指定 cacheInMemory() 和 cacheOnDisc() ，图像会被保存两次吗？这里是否有任何额外的内存消耗，因为图像将同时保存在内存和磁盘中？请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T22:59:37.500

尝试使用`loadImageSync(String uri)`. 它为您提供位图。

如果你想从位图中绘制

```
Drawable d = new BitmapDrawable(getResources(),imageLoader.loadImageSync(url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T06:03:24.753

```
imageLoader.displayImage(imageUri, imageView, displayOptions, new ImageLoadingListener() {
@Override
public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
    // Here loadedImage is you Bitmap object.
}
}); 
```

# c# - Web API 自定义 IContractResolver

> ID：15902416
> 
> 赞同：2
> 
> 时间：2013-04-09T12:50:24.540
> 
> 标签：c#, json.net, asp.net-web-api

我实现了一个自定义的 IContractResolver，以便我可以从我的 Web API 中动态过滤出对象的某些属性。例如，GetEmployees 操作将过滤掉返回的每个员工的“Id”属性。

```
public IEnumerable<Employee> GetEmployees()
{
    var ignoreList = new List<string> {"Id"};
    GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new JsonContractResolver(ignoreList);
    return db.Employees.AsEnumerable();
} 
```

问题是，在相同的方法中，我想将合同解析器设置回其默认值。像这样的东西：

```
public IEnumerable<Employee> GetEmployees()
{
    var defaultContractResolver = GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.ContractResolver;
    var ignoreList = new List<string> {"Id"};
    GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new JsonContractResolver(ignoreList);
    // Serialize object
    GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.ContractResolver = defaultContractResolver;
    // return serialized object
} 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:08:17.160

这绝对不是你尝试的方式。您将以这种方式处理线程问题。

一种方法可能是将返回的对象更改为不包含`Id`-property。而是制作一个更专业的对象。这就是我要走的路。

或者，您可以`HttpResponseMessage`直接返回 a 并将内容设置为您喜欢的任何内容。但是你必须自己处理序列化和内容否定。

# git - Git克隆访问-无法在命令行上粘贴密钥

> ID：15902418
> 
> 赞同：0
> 
> 时间：2013-04-09T12:50:27.223
> 
> 标签：git, command-line, key, clone

在命令行上粘贴键似乎是逐行粘贴，而不是整个键。

因此，密钥的每一行都说明了`-bash keyxxxxxxxxxxxxxxxxxxxxxxxxx command not found` 其中`keyxxxxxxxxxxxxxxxxxxxxxxxxx`的一行密钥，并且逐行显示，而不是仅仅让我登录并让我能够 git clone。

我在文本文件中有一个私有 RSA 密钥

该文件以：

```
-----BEGIN RSA PRIVATE KEY----- 
```

并以：

```
-----END RSA PRIVATE KEY----- 
```

在这之间有一个很长的多行密钥（如前所述，我在尝试 git clone 时无法粘贴为一个密码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:57:36.647

您不要将密钥粘贴到命令行中，您必须使用您在 github（或您使用的任何托管服务）上的帐户注册 SSH 密钥。

请参阅[本文](https://help.github.com/articles/generating-ssh-keys)了解如何在 github 上执行此操作，并阅读一般的 ssh 密钥（即 google，或那篇文章，或两者兼而有之）

# linq - 将字符串作为 Linq 执行

> ID：15902422
> 
> 赞同：3
> 
> 时间：2013-04-09T12:50:36.013
> 
> 标签：linq, c#-4.0, dynamic

有没有办法可以将字符串作为 Linq 执行？我有一个 dynamci 查询，为此我必须将 Linq 表达式转换为字符串，然后附加具有一些条件查询的字符串 bulider。所以整个表达式现在是字符串。现在如何执行这个字符串？我应该再次将此字符串转换为 Linq 吗？如何进行？

```
 StringBuilder sb = new StringBuilder();
 if (InstId != String.Empty)
 {
     sb.Append("application.Id ==" + InstId);
 }
 if (BId != String.Empty)
 {
     sb.Append("&& application.BId ==" + BId);
 }
 if (CId != String.Empty)
 {
     sb.Append("&& application.CId ==" + CId);
 }

String query=("from tables in context.Application .........
........join .........."+sb);

var q1=query; 
```

现在如何执行这个 q1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:54:22.943

你不需要这样做`StringBuilder`：

```
var query = context.Application;

if (InstId != String.Empty)
{
    query = query.Where(a => a.Id == InstId);
}
if (BId != String.Empty)
{
    query = query.Where(a => a.BId == BId);
}
if (CId != String.Empty)
{
    query = query.Where(a => a.CId == CId);
}

var items = query.Join(/* your join here */).ToList(); 
```

查询不会被执行，直到`ToList`或其他类似的方法被调用，所以你可以随意追加`Where()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:58:43.853

虽然我不一定认为在很多情况下这是一个很好的做法，但有一个[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)库可以让您做到这一点。

一般来说，如果可能的话，我建议使用可以进行更严格类型检查的东西，例如[@MarcinJuraszak](https://stackoverflow.com/a/15902498/940)的响应或类似[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)类的东西。

# file-upload - 使用richfaces fileUpload时如何恢复ViewState？

> ID：15902426
> 
> 赞同：0
> 
> 时间：2013-04-09T12:50:54.490
> 
> 标签：file-upload, jsf-2, richfaces

我在提交包含两种形式的模板时遇到问题，其中一个`<h:form>`s 是 a `multipart/form-data`（即，用于通过 Richfaces4's 提交文件`rich:fileUpload`）。

基本模板如下所示：

```
<h:form enctype="multipart/form-data">
  <rich:fileUpload fileUploadListener="#{uploader.doUpload}" execute="@form" render="@form :inputForm" />
</h:form>

<h:form id="inputForm">
  <h:inputText value="#{uploader.input1}" />
  <h:commandButton action="#{uploader.save}" value="Save" />
</h:form> 
```

此模板还有一个 page.xml，它调用一个操作：

```
<action execute="#{uploader.selectObjectsFromRequest}" on-postback="false" /> 
```

我的问题是`selectObjectsFromRequest`当我单击“保存”按钮时不断被调用。

调试这个，`FacesContext.getCurrentInstance().isPostback()`在这种情况下返回 false 并且足够真实，表单提交时没有`javax.faces.ViewState`.

我知道丢失 ViewState 是一个 JSF 错误，我们应该明确地重新渲染表单以恢复它们的状态。但这就是我已经在做的事情。

那么，这是 Richfaces 中的错误吗？

**编辑添加：在**[此处](http://balusc.blogspot.de/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)添加 BalusC 发布的 Workaround javascript 片段可恢复 ViewState 并使表单正确提交。所以也许有人可以解释为什么在这种情况下显式重新渲染是不够的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T09:13:27.193

我认为问题在于 RichFaces 组件会重新呈现表单：我制作了一个小测试页，在其中观察到与其他 RF 4 组件（如 a4j:commandButton）相同的情况。“重新呈现表单”的解决方法只有在 f:ajax 完成时才有效。

关于您的编辑：我也尝试了 BalusC 的剪辑，但它不再与 RichFaces 组件一起使用。所以我尝试了一种稍微不同的方法，[这里发布了](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click)。也许你可以看看它。

如那里所写，我不能 100% 确定这是否是适用于所有情况的正确解决方案，但目前这对我有用。

# sungridengine - sge qstat 默认队列的名称？

> ID：15902431
> 
> 赞同：0
> 
> 时间：2013-04-09T12:51:03.853
> 
> 标签：sungridengine, lsf

在阅读了 qstat 和 sge_qstat 手册之后，我仍然不知道我可以使用什么方法来以编程方式解析我的 SGE 6.1 系统中的默认队列的名称：也就是说，作业所在的队列的名称如果我执行 qsub 命令，将提交。

我有一个空文件：

```
~/.sge_qstat    # actually the file doesn't exist 
```

而这个文件只包含一个'-u *'：

```
$SGE_ROOT/$SGE_CELL/common/sge_qstat 
```

我希望有一种方法能够以编程方式获取默认情况下将提交作业的队列的名称。与此 LSF 命令中 grep 后面的名称等效的名称：

```
lsid 2>/dev/null | grep 'My cluster name is' 
```

SGE有什么等价的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:06:46.700

假设“默认”是指如果您没有将 -q 开关指定为 qsub 时作业将落入的队列，这很困难。

开箱即用，SGE 根本不应该有一个硬默认队列，但是默认调度程序会根据哪个队列的平均负载最低来为给定的提交（如果你没有指定一个）选择一个队列 - 这是由调度程序属性 queue_sort_method 定义（参见 sched_conf(5)）。在这种情况下，您最多只能猜测。

但是，如果您可以保证将在提交者的本地 .sge_request 文件或全局 $sge_root/$cluster/common/sge_request 文件中设置真正的默认队列（该文件定义了 qsub 的默认开关，请参阅 sge_request(5)） ，您当然可以从这些中解析出 -q 开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-25T07:43:37.853

制定默认队列的另一种方法是发送一个虚拟请求。

```
qrsh -w p -verbose -verify | grep hard_queue_list 
```

请注意，该值可以是逗号分隔的列表。即 hard_queue_list: all.q,some.q

第一个是系统默认值，第二个是用户默认值。

# c# - C#，无效标记 '='

> ID：15902434
> 
> 赞同：-9
> 
> 时间：2013-04-09T12:51:13.943
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.Text;

namespace HowTo
{
    class Variables
    {
        private List<recMessage> = new List<recMessage>();
    }
}

Error   1   Invalid token '=' in class, struct, or interface member declaration G:\GPRS\How-To Using the Comm Port_CS\How-To Using the Comm Port_CS\Variables.cs    9   34  How-To Using the Comm Port_CS 
```

这个错误来自哪里？我已经做了十几次没有这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T12:51:55.860

添加变量名：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace HowTo
{
    class Variables
    {
        private List<recMessage> nameofvariable = new List<recMessage>();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:52:03.120

您忘记了列表的名称：

```
private List<recMessage> myList = new List<recMessage>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T12:54:07.573

您忘记了变量 List 的名称：

```
private List<recMessage> list = new List<recMessage>(); 
```

# objective-c - 保存和检索历史 iphone

> ID：15902435
> 
> 赞同：0
> 
> 时间：2013-04-09T12:51:14.280
> 
> 标签：objective-c, uitableview, nsmutablearray, nsuserdefaults, data-persistence

在我的应用程序中，我正在上传各种类型的数据，例如图像、音频、视频、文本。现在我希望该用户应该能够查看最近上传的 100 个项目，即使他退出并重新打开应用程序也是如此。为此，我将创建一个包含表格视图的视图。表格视图将填充最近上传的 100 个项目。现在我想通过 NSUserDefaults 来实现它。对于图像、音频和视频，iphone 返回它们的路径或 URL，我必须将其存储到 NSUserDefaults 但表视图必须由数组填充，所以我如何将文件路径存储到 NSUserDefaults 或数组然后获取这些项目填充我的表格视图。或者有没有比 NSUserDefaults 更容易实现的更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:10:27.483

如果数据不止这些，也许可以试试 sqlite 数据库。如果只是这些数据，只为它创建一个数据库似乎有点过头了。您可以使用类似于以下内容的方式将数组保存到 NSUserDefaults：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:@"sd"] forKey:@"k"];
[[NSUserDefaults standardUserDefaults] synchronize];

NSArray *array = [[NSUserDefaults standardUserDefaults] objectForKey:@"k"];
if( array == nil )  {
    //No data
}
else {
    for( NSString *string in array ) {
        NSLog(@"String: %@",string);
    }
} 
```

缺点是，如果您想在数组中存储自定义对象，则需要手动对对象进行编码，详见这篇[文章](https://stackoverflow.com/a/2315972/352891)

# wcf - 将 WCF 服务中的派生类型反序列化为基类型，但保留类型信息

> ID：15902437
> 
> 赞同：8
> 
> 时间：2013-04-09T12:51:19.203
> 
> 标签：wcf, serialization, types, datacontractserializer

我希望我的服务能够接受和返回派生自的类型，`BaseType`而无需真正知道这些类型是什么。我几乎[从这篇优秀的博客文章](http://blogs.msdn.com/b/youssefm/archive/2009/06/05/introducing-a-new-datacontractserializer-feature-the-datacontractresolver.aspx)`DataContractResolver`中得到了一个使用基于SharedTypeResolver 的自定义的解决方案。

难题中缺少的部分是我的服务将处理的类型可能不会被服务共享和知道，但我仍然想接受它们并知道应该是什么类型。我提出了以下充当堆栈的服务示例。您可以推送和弹出任何派生的类型，`BaseType`前提是您使用`SharedTypeResolver`并且这些类型在客户端和服务器之间共享。

```
[DataContract]
public class BaseType
{
    [DataMember]
    public string SomeText { get; set; }

    public override string ToString()
    {
        return this.GetType().Name + ": " + this.SomeText;
    }
}

[DataContract]
public class DerivedType : BaseType
{
    [DataMember]
    public int SomeNumber { get; set; }

    public override string ToString()
    {
        return base.ToString() + ", " + this.SomeNumber;
    }
}

[ServiceContract]
public interface ITypeStack
{
    [OperationContract]
    void Push(BaseType item);

    [OperationContract]
    BaseType Pop();
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class TypeStackService : ITypeStack
{
    private Stack<BaseType> stack = new Stack<BaseType>();

    public void Push(BaseType item)
    {
        this.stack.Push(item);
    }

    public BaseType Pop()
    {
        return this.stack.Pop();
    }
} 
```

这显然是我遇到的问题的一个大大简化的例子。客户端可以很高兴地推送和弹出`BaseType`，或者`DerivedType`因为客户端和服务器都知道它们，但是如果客户端推送`UnsharedType`了服务不知道的内容，我会如您所料那样收到错误。

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:item](http://tempuri.org/:item)时出错。InnerException 消息是“第 1 行位置 316 中的错误。元素“ [http://tempuri.org/:item](http://tempuri.org/:item) ”包含映射到名称“TestWcfClient，Version=1.0.0.0，Culture=neutral，PublicKeyToken=”的类型的数据空：TestWcfClient.UnsharedType'。反序列化器不知道映射到此名称的任何类型。考虑更改 DataContractResolver 上 ResolveName 方法的实现，以返回名称“TestWcfClient.UnsharedType”和命名空间“TestWcfClient, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null”的非空值。

我目前的想法是添加`IExtensibleDataObject`以`BaseType`保存非共享类型的值，并在推送项目时使非共享类型看起来像`BaseType`反序列化服务；弹出项目时需要发生相反的情况。我只是不知道该怎么做。到目前为止，我对可能方法的想法：

*   进一步的定制`DataContractResolver`可能涉及`TypeDelegator`
*   `IDataContractSurrogate`代替非共享类型使用
*   以某种方式保留推送项目时服务收到的序列化 XML，然后在弹出项目时在回复中使用它
*   使用消息检查器来操作消息

我不知道这些是否可行，会涉及什么或什么是最佳解决方案。你？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:33:26.313

我使用消息检查器和实现的占位符类型在这方面取得了一些进展`IExtensibleDataObject`。检查器处理传入的消息并将类型提示更改为占位符的提示，并将原始类型添​​加为属性。然后在回复中发送类型时，会发生相反的情况，从而使占位符看起来像原始类型。

我对这个解决方案的不满在于它与服务绑定，因为我必须包含服务的 XML 命名空间并明确命名要操作的方法和参数。除此之外，它似乎工作得相当好，尽管我只在从`BaseType`.

有人可以改进吗？里面有赏金给你。

```
public class PlaceholderType : BaseType, IExtensibleDataObject
{
    [IgnoreDataMember]
    public string OriginalTypeName { get; set; }

    [IgnoreDataMember]
    public string OriginalNamespace { get; set; }

    ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; }
}

public class FunkadelicInspector : IDispatchMessageInspector, IContractBehavior
{
    const string PlaceholderNamespace = "http://my.placeholder.namespace";
    const string ServiceNamespace = "http://tempuri.org/";

    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        XmlDocument xmlDoc = ReadMessage(request);

        XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
        // Dislike: having to know the service namespace, method and parameters
        nsmgr.AddNamespace("s", ServiceNamespace);
        XmlNode itemElement = xmlDoc.SelectSingleNode("//s:Push/s:item", nsmgr);

        if (itemElement != null)
        {
            XmlAttribute typeAttribute = itemElement.Attributes["type", "http://www.w3.org/2001/XMLSchema-instance"];
            if (typeAttribute != null)
            {
                // Record original type
                string[] parts = typeAttribute.Value.Split(':');
                string originalTypeName = parts[1];
                // Replace with placeholder type
                typeAttribute.Value = parts[0] + ":" + typeof(PlaceholderType).FullName;

                // Record original assembly
                XmlAttribute nsAtt = itemElement.Attributes["xmlns:" + parts[0]];
                string originalAssembly = nsAtt.Value;
                // Replace with placeholder type's assembly
                nsAtt.Value = typeof(PlaceholderType).Assembly.FullName;

                // Add placeholders
                itemElement.AppendChild(xmlDoc.CreateElement("OriginalType", PlaceholderNamespace)).InnerText = originalTypeName;
                itemElement.AppendChild(xmlDoc.CreateElement("OriginalAssembly", PlaceholderNamespace)).InnerText = originalAssembly;
            }
        }

        //Now recreate the message
        request = WriteMessage(request, xmlDoc);
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
        XmlDocument xmlDoc = ReadMessage(reply);

        XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
        nsmgr.AddNamespace("s", ServiceNamespace);
        nsmgr.AddNamespace("plc", PlaceholderNamespace);
        // Dislike: having to know the service namespace, method and parameters
        XmlNode resultElement = xmlDoc.SelectSingleNode("//s:PopResponse/s:PopResult", nsmgr);

        if (resultElement != null)
        {
            XmlElement originalType = resultElement.SelectSingleNode("plc:OriginalType", nsmgr) as XmlElement;
            XmlElement originalAssembly = resultElement.SelectSingleNode("plc:OriginalAssembly", nsmgr) as XmlElement;
            if (originalType != null && originalAssembly != null)
            {
                // Replace original type
                XmlAttribute type = resultElement.Attributes["type", "http://www.w3.org/2001/XMLSchema-instance"];
                string[] parts = type.Value.Split(':'); // 0 is an alias for the assembly, 1 is the type
                type.Value = parts[0] + ":" + originalType.InnerText;

                // Replace original assembly
                XmlAttribute ass = resultElement.Attributes["xmlns:" + parts[0]];
                ass.Value = originalAssembly.InnerText;

                // Remove placeholders
                resultElement.RemoveChild(originalType);
                resultElement.RemoveChild(originalAssembly);
            }
        }

        //Now recreate the message
        reply = WriteMessage(reply, xmlDoc);
    }

    private static Message WriteMessage(Message original, XmlDocument xmlDoc)
    {
        MemoryStream ms = new MemoryStream();
        xmlDoc.Save(ms);
        ms.Position = 0;
        XmlReader reader = XmlReader.Create(ms);
        Message newMessage = Message.CreateMessage(reader, int.MaxValue, original.Version);
        newMessage.Properties.CopyProperties(original.Properties);
        return newMessage;
    }

    private static XmlDocument ReadMessage(Message message)
    {
        MemoryStream ms = new MemoryStream();
        using (XmlWriter writer = XmlWriter.Create(ms))
        {
            message.WriteMessage(writer); // the message was consumed here
            writer.Flush();
        }
        ms.Position = 0;
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(ms);
        return xmlDoc;
    }

    void IContractBehavior.AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {
    }

    void IContractBehavior.ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    void IContractBehavior.ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
    {
        dispatchRuntime.MessageInspectors.Add(this);
    }

    void IContractBehavior.Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)
    {
    }
} 
```

# iphone - 如何在 iPhone sdk 中使用 AVMutableComposition 合并视频

> ID：15902439
> 
> 赞同：5
> 
> 时间：2013-04-09T12:51:22.980
> 
> 标签：iphone, ios, ios5, ios4, ios6

我使用了以下方式，但视频没有合并，并且在输出中添加到 AVMutableCompositionTrack 的最后一个视频存储在库中。

```
NSArray *arrVideoUrl=[objApp.dictSelectedVideos allKeys];
AVURLAsset *video1=[[AVURLAsset alloc]initWithURL:[arrVideoUrl objectAtIndex:0] options:nil];
AVURLAsset *video2=[[AVURLAsset alloc]initWithURL:[arrVideoUrl objectAtIndex:1] options:nil];
AVURLAsset *audioAsset=[[AVURLAsset alloc]initWithURL:songUrl options:nil];

AVMutableComposition *mixcomposition=[AVMutableComposition composition];

AVMutableCompositionTrack *track1=[mixcomposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
[track1 insertTimeRange:CMTimeRangeMake(kCMTimeZero, video1.duration) ofTrack:[[video1 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                 atTime:kCMTimeZero error:nil];

AVMutableCompositionTrack *track2=[mixcomposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

[track2 insertTimeRange:CMTimeRangeMake(kCMTimeZero, video2.duration) ofTrack:[[video2 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                 atTime:kCMTimeZero error:nil]; 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:34:21.580

现在你有`AVMutableComposition`两个轨道的 s，你需要为它们创建 - - `AVMutableVideoCompositionLayerInstruction`。

*   为您的合并轨道创建`AVMutableVideoCompositionInstruction`其对象将包含在一个由 第一和第二轨道
    组成`instructions`的数组中。`AVMutableVideoCompositionLayerInstruction`

*   为合并的轨道对象创建`AVMutableVideoComposition`并提供上述
    `AVMutableVideoCompositionInstruction`.

这种方法来自[这个](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)链接的一个非常好的教程。

# networking - 确定哪些文章可用于给定的 usenet 组的最佳方法是什么？

> ID：15902444
> 
> 赞同：0
> 
> 时间：2013-04-09T12:51:40.150
> 
> 标签：networking, nntp, usenet

我想知道最有效的方法是获取给定 nntp 组的可用文章。我实施的方法如下：

(i) 选择组：

```
GROUP group.name.subname 
```

(ii) 从组中获取文章编号列表（推回到向量“代码”中）：

```
LISTGROUP 
```

(iii) 循环代码并抓取文章（例如标题）

```
for code in codes do
    HEAD code
end 
```

但是，这不适用于具有许多文章代码的大型组。

在 RFC 3977 中，GROUP 命令被指示为还返回“低”和“高”文章编号。例如，

```
[C] GROUP misc.test
[S] 211 1234 3000234 3002322 misc.test 
```

其中 3000234 和 2002322 是低和高数字。因此，我正在考虑使用这些代替，而不是最初推回所有文章代码。但是这些数字可以依靠吗？3000234 是否肯定表示上述选定组中的第一篇文章 ID，同样，3002322 是否肯定表示上述选定组中的最后一篇文章 ID，或者它们只是估计值？

非常感谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:58:12.647

原来我在想这一切都错了。我需要做的就是

(i) 使用 GROUP 设置组

(ii) 执行 NEXT 命令后跟 HEAD 以获得我想要的许多标题（最多计数）：

```
for c : count do
    articleId <-- NEXT
    HEAD articleID
end 
```

编辑：我确信一定有更好的方法，但除非有人提出其他建议，否则我会认为这种方法是最有效的。干杯。

# c++ - stat() 中的 UID 值错误，psinfo_t 中的 pr_pid 错误

> ID：15902446
> 
> 赞同：0
> 
> 时间：2013-04-09T12:51:53.183
> 
> 标签：c++, c, unix, solaris, pid

我的函数从 读取进程列表`/proc`，然后将进程`psinfo`文件读入适当的结构，以及有关该文件的数据，并打印出来。问题是，这些结构中的一些数据是错误的。像往常一样，程序部分工作的那一刻是最令人困惑的。它正确读取所有数据，除了 PID (pr_pid) 始终为 0，文件的 UID 也始终为 0。为什么？数据是否可以部分正确加载？这不应该是可能的。如果我们谈论的是 PPID，0 是可能的，但是 solaris 文档清楚地指出 pr_pid 是 PID。我认为会有答案的链接，但我找不到：

[http://docs.oracle.com/cd/E19963-01/html/821-1473/proc-4.html](http://docs.oracle.com/cd/E19963-01/html/821-1473/proc-4.html) [http://linux.die.net/man/3/getpwnam](http://linux.die.net/man/3/getpwnam) [http://linux.die。净/人/2/统计](http://linux.die.net/man/2/stat)

代码：

```
void printProcessInformation(char pid[]){
    //find full path name to your "stat" file
    //DIR *dir;
    //struct dirent *ent;
    //Creating string with /proc/PID
    char * s = malloc(snprintf(NULL, 0, "%s%s", "/proc/", pid) + 1);
    sprintf(s, "%s%s", "/proc/", pid);

    //Creating string with /proc/PID/psinfo (full path)
    char * fullPath = malloc(snprintf(NULL, 0, "%s%s", s, "/psinfo") + 1);
    sprintf(fullPath, "%s%s", s, "/psinfo");
    free(s);
    //printf("%s\n",fullPath);
    //Reading data from file
    FILE* file = fopen(fullPath, "r");
    char* buffer;
    buffer = (char*) malloc(sizeof(psinfo_t));
    if(file == NULL)
    {
        perror("Error: Couldn't open file");
        return;
    }
    fread((void *)buffer, sizeof(psinfo_t), 1, file);
    psinfo_t* pData = (psinfo_t*) buffer;
    free(buffer);
    buffer = (char*) malloc(sizeof(stat));
    stat(file,buffer);
    struct stat* fileStat=(struct stat*) buffer;
    printf("File owner id:%d\n",fileStat->st_uid);
    free(buffer);
    fclose(file);
    struct passwd* pw=getpwuid(fileStat->st_uid);

    //Loading data from structures
    time_t sTime=pData->pr_start.tv_sec;
    int pr_pid=pData->pr_pid;
    char* fname=pData->pr_fname;
    char* uid=pw->pw_name;
    printf("%8s %5d %16s %.24s\n", uid, pr_pid, fname, ctime(&sTime));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:09:10.087

看这个：

```
psinfo_t* pData = (psinfo_t*) buffer;
free(buffer);
 ...
int pr_pid=pData->pr_pid; 
```

您将 pData 设置为第一行中缓冲区的内容，然后将其释放。pData 指向的东西现在已经丢失了，它实际上可能会在下一个 malloc 中重用。当您尝试在上面的最后一行中使用它时，您正在阅读谁知道什么。在这种情况下，你释放得太激进了。不要释放 pData，（间接通过缓冲区），直到你完成使用它。

# javascript - 无法使用 javascript 在 onclick() 上添加新文本框并禁用元素

> ID：15902453
> 
> 赞同：0
> 
> 时间：2013-04-09T12:52:05.970
> 
> 标签：javascript, html

调用 onclick 事件后我无法添加新的输入框，有没有办法在输入框出现后禁用选择选项？对于这样一个菜鸟问题，我很抱歉，但我在这里处于死胡同，已经尝试了一个小时。请将我链接到一个我可以通过示例轻松学习 JS 的地方。

```
 <script>
    function funcGet(val)
    {
      if(val=="Create new category")
      {
         var element = document.createElement("input");
         element.setAttribute("type", "input");
         element.setAttribute("name", "new_cat");
         var foo = document.getElementById("cat");
         foo.appendChild(element);
       }
    }
    </script>
    <div name="cat">
    <form method="post" action="">
    <input type="text" placeholder="Enter a topic name" name="word"><br/>
    <select name = "category" onchange="funcGet(this.value);">
    <?php
       displayCat();
    ?>
    </select>
    </div>
    <select name = "site_type">
    <?php
       displaySitetype();
    ?>
    </select>
    <input type="submit" value="Submit data">
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:58:06.710

这里

`var foo = document.getElementById("cat");`给空

不存在具有 id 的元素`cat`

错误是：类型错误：`foo is null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:01:03.400

改变这个：

```
<div name="cat"> 
```

对此：

```
<div id="cat"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:12:17.337

尝试更改`<div name="cat">`为

```
<div id="cat"> 
```

.getElementById 仅适用于 ID，

如在

```
document.getElementById("cat"); 
```

如果你想离开`<div name="cat">`，你应该使用`.getElementsByTagName[0]`。

作为通过示例学习 JavaScript 的链接，我推荐[W3Schools JavaScript 教程](http://www.w3schools.com/js/default.asp)，因为它们可以让你在他们的网站上学习代码时尝试代码。一旦你变得更加熟悉，你可以参考[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T05:13:24.873

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>
    Untitled Document
  </title>
  <script>

    function generateRow() {
      var d=document.getElementById("div");
      d.innerHTML+="<td><input type='text'<td><input type='text'<td><input type='text' name='food'name='food'name='food'name='food'>";
    }
  </script>
  </head>
  <body>
    <form id="form1" name="form1" method="post" action="">
      <label>

        <input name="food" type="text" id="food" />
      </label>
      <td>
        <input name="food" type="text" id="food" />
      </td>
      <td>
        <input name="food" type="text" id="food" />
      </td>
      <div id="div">
      </div>
      <td>
        <input type="button" value="Add" onclick="generateRow()"/>
      </td>
      <td>
        <label>
          <input type="submit" name="Submit" value="Submit" />
        </label>
      </td>
    </form>
  </body> 
```

# php - 是否有可以标记和转换日文文本的 Python 或 PHP 库

> ID：15902454
> 
> 赞同：2
> 
> 时间：2013-04-09T12:52:10.003
> 
> 标签：php, python

给定一个可以包含日文和英文文本的字符串，我想：

1.  将日语部分从平假名转换为片假名，将半角转换为全角。
2.  按单词拆分字符串（日语文本不使用空格分隔单词）

我目前正在使用优秀的 iOS / OS X 字符串库（可满足数百种复杂性和边缘情况）。

[`CFStringTransform`](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFMutableStringRef/Reference/reference.html#//apple_ref/c/func/CFStringTransform)与`kCFStringTransformHiraganaKatakana`常数。

[`enumerateSubstringsInRange:options:usingBlock:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/enumerateSubstringsInRange%3aoptions%3ausingBlock%3a)与`NSStringEnumerationByWords`常数。

搜索正在从客户端转移到服务器，因此我们需要这些方法的 PHP 或 Python 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:59:39.050

也许[nltkjp](https://code.google.com/p/nltkjp/)或[tiny segmenter](https://github.com/miyamuko/tiny-segmenter)都与[nltk](http://nltk.org/)兼容，对于日本语料库，您可以访问[Masato Hagiwara](http://lilyx.net/nltk-japanese-corpus/)网站。

# c# - 使用 LINQ 从列表中随机选择匹配的字符串

> ID：15902456
> 
> 赞同：2
> 
> 时间：2013-04-09T12:52:13.720
> 
> 标签：c#, linq, list, random, windows-phone-8

假设我`List<string> FontStyle`包含以下内容

```
 "a0.png",
        "b0.png",
        "b1.png",
        "b2.png",
        "b3.png", 
        "c0.png",
        "c1.png",
        "d0.png",
        "d1.png",
        "d2.png" 
```

我想从列表中随机选择一个字符串，其第一个字符与某个字符匹配。例如，如果字符是`c`. 该方法将返回`c0.png`或`c1.png`随机返回。

如何使用 LINQ 执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:55:20.297

这应该可以解决问题：

```
var random = new Random();
var list = new List<string> {
    "a0.png",
    "b0.png",
    "b1.png",
    "b2.png",
    "b3.png", 
    "c0.png",
    "c1.png",
    "d0.png",
    "d1.png",
    "d2.png" 
};
var startingChar = "d";

var filteredList = list.Where(s => s.StartsWith(startingChar)).ToList();
Console.WriteLine(filteredList.Count);

int index = random.Next(filteredList.Count);
Console.WriteLine(index);

var font = filteredList[index];
Console.WriteLine(font); 
```

但整个解决方案的问题在于，生成的过滤列表越小，您获得真正随机值的可能性就越小。该`Random`课程在更大的约束条件下效果更好 - 所以请记住这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:53:49.800

```
Random random = ...;
var itemsStartingWithC = input
    .Where(x => x.StartsWith("c"))
    .ToList();
var randomItemStartingWithC =
    itemsStartingWithC.ElementAt(random.Next(0, itemsStartingWithC.Count())); 
```

调用 to`ToList`不是绝对必要的，但在这种情况下会导致更快的代码。没有它，`Count()`将完全枚举并且`ElementAt`需要枚举到随机选择的索引。

# java - 在 java 中使用 imgscalr API 调整图像大小

> ID：15902457
> 
> 赞同：2
> 
> 时间：2013-04-09T12:52:14.910
> 
> 标签：java, file, bufferedimage, imgscalr

如何将缓冲图像转换为文件对象。我的函数实际上需要返回一个文件对象。imgscalr调整大小函数在调整大小后返回一个BufferedImage。so如何将其转换为文件对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:55:11.760

以下是写入 PNG 文件的示例：

```
ImageIO.write(yourImage, "PNG", "yourfile.png"); 
```

但是，您必须先导入`ImageIO`( `javax.imageio`)。

然后您可以使用 获取`File`图像的对象`new File("yourfile.png");`。

你可以把它放在一个函数中以便于使用；这是一个例子：

```
public File imageToFile(BufferedImage img, String fileName) {
    if (!(fileName.endsWith(".png"))) fileName += ".png";
    ImageIO.write(img, "PNG", filename);
    return new File(fileName);
} 
```

[这是](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)文档的链接。

不保存就**无法**创建文件对象......好吧，一个文件。不过，您可以将其放在临时目录中，并在使用完毕后将其删除。

# php - php 中 2013-04-09T10:00:00Z 的格式

> ID：15902464
> 
> 赞同：4
> 
> 时间：2013-04-09T12:52:47.137
> 
> 标签：php

我正在寻找`date()`可以给我这样的日期的格式：

```
2013-04-09T10:00:00Z 
```

有什么比使用格式更简单的`'Y-m-d ...'`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T12:53:52.557

与（UTC 时间）一起使用的日期格式`'c'`（ISO 8601）`gmdate()`非常接近：

```
2013-04-09T10:00:00+00:00 
```

您只需要通过将尾随替换为（对于 Zulu）来修改`+00:00`它`Z`：

```
echo substr_replace(gmdate('c'), 'Z', -6); 
```

替代方案很简单：

```
echo gmdate('Y-m-d\TH:i:s\Z'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T12:54:04.177

```
date("c"); 
```

可能是您搜索的内容？您可以使用爆炸等更改自己的后缀。

# php - Zend框架中带有附件的垃圾邮件

> ID：15902466
> 
> 赞同：0
> 
> 时间：2013-04-09T12:52:53.520
> 
> 标签：php, zend-framework

我正在尝试使用 zend 框架发送带有 zip 文件附件的电子邮件。但我总是把它发送到我电子邮件的垃圾目录。

这是我使用的附加代码。

我不知道是什么问题，请帮助我找到这个。非常感谢。

```
 $mail = new Zend_Mail();
    $mail->setType(Zend_Mime::MULTIPART_RELATED);
    $mail->setBodyHtml($email_body);
    $mail->setFrom('admin@website.com', 'Stephen Nolan');
    $mail->addTo($_POST['email'], 'Kamalifestyle Client');
    $mail->setSubject('Thanks From Kamalifestyle, See Attachment');

    $attachment = $mail->createAttachment(file_get_contents($currentFile));
    $attachment->type = 'zip';        
    $attachment->filename = "completebook.zip";

    if ($mail->send()) {
        unlink($currentFile);
        echo 'Message Sent';
        ?>

    <?php
    } else {
        echo 'Error Sending ';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:58:19.380

`$attachment->type`应该是附件的 MIME 类型，而不是文件扩展名。

可能存在其他原因导致电子邮件最终出现在您的垃圾目录中。请查阅将邮件放入垃圾目录的软件手册（即邮件服务器或您的邮件用户代理）。例如，如果您的 IMAP 服务器使用 sieve 根据 Spam Assassin 添加的标头将邮件移动到垃圾目录中，您可能需要阅读[Spam Assassin Wiki: False Positives](http://wiki.apache.org/spamassassin/FalsePositives)。

# java - 如何替换评论

> ID：15902471
> 
> 赞同：1
> 
> 时间：2013-04-09T12:53:21.677
> 
> 标签：java, replace, character

我正在为不同的设备（手机、平板电脑、电视盒）创建一个应用程序，该应用程序采用带有用户输入（几句话）的文本框并将其发送到服务器。大约有五个带有用户输入的文本框。我打算将所有输入框组合成一个长字符串，用逗号分隔。

在这样做时，我知道我需要转换逗号（转换为 ascii、十六进制、??）。我`stringtokenizer`在服务器上使用逗号分隔。

我要将用户输入存储在服务器上的数据库中（并将转换后的逗号保留在那里？？）

1.  有没有更好的方法从五个输入框中发送输入？
2.  替换用户可能在文本框中输入的任何逗号的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:01:05.863

使用 JSON 或 XML 将数据发送到服务器，这样您就不必担心用户输入包含逗号。有很多库可以序列化和反序列化 JSON 和 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:59:15.457

我会使用 JSON 将数据传输到服务器。在 java 中，一个很好的序列化/反序列化 JSON 的库是 GSON ( [https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:08:27.833

由于您从文本框中获取文本并且您拥有的是字符串，因此您可以将其与您需要的编码一起使用：

[http://exampledepot.8waytrips.com/egs/java.nio.charset/ConvertChar.html](http://exampledepot.8waytrips.com/egs/java.nio.charset/ConvertChar.html)

但请记住，Java 的本机字符集是 Unicode，它可以用来表示任何排版和字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:13:41.420

您可以将输入配置为仅接受字符和数字并避免问题或运行 "awk '{sub(/\,/,"\,");print}' 以用转义字符替换所有 , 或将字符串存储在文件，发送文件，读取文件。还有很多其他选项

# c++ - 如何在 C++ 中访问实例变量，如 Objective-C getter 和 setter

> ID：15902474
> 
> 赞同：2
> 
> 时间：2013-04-09T12:53:30.547
> 
> 标签：c++, objective-c, class, operator-overloading

下面是一个例子：

**在圈子.h**

```
class circle
{
    double _radius;
public:
    double getRadius() {return _radius;}
    void setRadius(double r) {_radius=r;} 
} 
```

**在主要**

```
int main()
{
    circle a;
    cout<<a.getRadius();    // I want to use "a.radius"
    a.setRadius(3.2);       // I want to use "a.radius=3.2"
} 
```

那么第一个问题是为什么我们应该使用 get 和 set 函数来访问实例变量而不是直接访问它们？第二个问题是如何做运算符重载，让get和set的函数调用看起来简洁（就像objective-c那样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:05:27.803

当然，使您希望的语法可用的最简单方法是创建`_radius`一个名为的公共成员`radius`：

```
class circle
{
public:
    double radius;
} 
```

现在你可以像这样使用它：

```
circle c;
c.radius = 10.0; 
```

但是，您不应该仅根据您希望如何编写代码（或者您可能如何在 C# 中编写代码）来做出此类决定。我建议您为每个成员考虑以下几点：

1.  直接设置成员有意义吗？也许成员只是对象状态的私有部分，并受其他成员函数的影响。考虑以下示例，您真正想要公开的接口只是一个增加 大小的函数`circle`：

    ```
    class circle
    {
    public:
        circle(double radius, double delta = 1.0)
          : radius(radius), delta(delta) { }

        double increaseSize() {
          radius += delta;
          return radius;
        }
    private:
        double radius;
        double delta;
    } 
    ```

2.  您需要强制执行不变量吗？考虑一下，也许，你已经决定不可能`circle`有负半径的 a 这样的东西。您可能希望通过使用一个成员函数来检查给定的新半径以确保它大于 0 来强制执行此操作。

3.  您想通过界面提供成员的一些不同表示吗？也许您希望`circle`保留其作为成员的半径，但任何客户唯一想知道的是它的区域。您可以将其设为`radius`私有，然后提供`getArea`如下函数：

    ```
    class circle
    {
    public:
        circle(double radius)
          : radius(radius) { }

        double getArea() {
          return PI * radius * radius;
        }
    private:
        double radius;
    } 
    ```

4.  以上几点可能目前都不适用，但将来可能会适用。如果您有这种远见，最好现在提供 getter 和 setter 函数。这确保了客户端使用的接口以后不会改变。

作为 getter 和 setter 的另一种命名方案，简单地拥有两个重载函数是很常见的——一个用于设置，一个用于获取——如下所示：

```
class circle
{
public:
    void radius(double); // Set the radius
    double radius();     // Get the radius
private:
    double radius;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:54:56.053

回答第一个问题：因此您的对象被封装，您可以处理更改的内部表示或在半径更改时需要修改/更新。

第二个：你不能。C++ 不支持这样的对象获取器和设置器。

（这实际上几乎是可能的，但它真的不值得）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:13:06.820

1.  使用 setter 和 getter 执行此操作有多种原因；

    *   它们提供了更好的封装；类的内部变量的实际值*应该*是类设置/获取的责任，而*不是*类实例用户的责任。但是在这个问题上有不同的思想流派。
    *   他们留下了在调用 setter/getter 时做更多事情的可能性。例如，

        ```
        class circle
        {
            double _radius;
            double _perimeter;

        public:

            double getRadius() {return _radius;}

            void setRadius(double r) {
                    _radius = r;
                    _perimeter = 2*M_PI*r;
            } 
        }; 
        ```

2.  好吧，您指示的方式可以简单地通过创建`radius`一个公共变量来完成:) 但是，请考虑这种替代方法：

    ```
    class circle
    {
    private: 
        double _radius;

    public:
        const double &radius;

        circle(double R)
            : radius(R)
            : radius(_radius)   
        {}

        void setRadius(double r) {
            _radius = r;
        } 
    }; 
    ```

    然后将像这样使用：

    ```
    cout << a.radius;    // works
    a.radius = 3.2;      // produces error
    a.setRadius(3.2);    // works 
    ```

    这种方法的好处是简洁，可能更直观的 getter（即使用实际的变量名），更简洁的代码（不需要无数几乎空的 getter），甚至可能提高性能（对 getter 函数的调用比直接访问变量，尽管这取决于编译器优化设置）。

这里提到的所有方法都有优点和缺点。最后，这*完全*取决于您的团队/雇主的偏好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:56:03.483

您使用 getter 和 setter 来实现更好的封装，并以更简单的方式更改底层实现。

关于第二个问题：你不能那样做。您将不得不编写一个 getter 和 setter 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-29T07:03:17.590

那么有初始化方法：

```
OCD::OCD ( ) : _number( 0 )
{
} 
```

和体内构造方法：

```
OCD::OCD ( size_t initial_value )
{
  _number = initial_value;
} 
```

要在类实例中访问它们，只需使用变量名：

```
 _number = value; 
```

但如果你有一个同名的全局、局部或参数变量，你可以像这样具体：

```
 this->_number = value; 
```

然后从实例外部你可以这样调用它：

```
 // (that is if _number was public)
  std::cout << "ocd2._number    => " << ocd2._number << std::endl;
  std::cout << "ocd3p->_number  => " << ocd3p->_number << std::endl; 
```

方法也是如此：

```
 std::cout << "ocd2.get( )     => " << ocd2.get() << std::endl;
  std::cout << "ocd3p->get( )   => " << ocd3p->get() << std::endl; 
```

请参阅我关于该主题的要点：[https ://gist.github.com/LaughingSun/7d2330ccff0777bec106](https://gist.github.com/LaughingSun/7d2330ccff0777bec106)

# jquery - jquery datepicker: beforeShowDay

> ID：15902478
> 
> 赞同：0
> 
> 时间：2013-04-09T12:53:41.783
> 
> 标签：jquery, datepicker

我喜欢在日期选择器中更改日期的可点击状态。因此我使用 beforeShowDay：

```
$('#datepicker').datepicker({
    inline: true,
    beforeShowDay: function(date){
        var dateTime = parseInt(date.getTime()/1000);
        if (isWeekend(date)){
            return [false,''];
        }
        var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
        var specialDates = getSpecialSet(y,m);
        for (i = 0; i < specialDates.length; i++) {
            if($.inArray((m+1) + '-' + d + '-' + y,specialDates) != -1 || new Date() > date) {
                console.log('HL: '+(m+1) + '-' + d + '-' + y);
                return [true,'highlight1','Almost sold out'];
            }
        }
        return [true,'normal']; // ordinary day
    },
    onSelect: function(dateText, inst) {
        var d = new Date(dateText);
        cal_gotoDate(d);
    }
}); 
```

我通过函数加载我的**specialDates**`getSpecialSet(y,m)`。此函数将针对当前月份的每个日期运行。因为我的 specialDates 集非常大：未来 20 年有 specialDates。我喜欢仅在当月通过 ajax 加载特殊集。

但我需要一个在月份更改后调用的函数，以通过 ajax 预加载我的 specialDates。

但我没有在 api 中找到任何有用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T06:47:49.980

使用 Ajax 预先加载所有月份的数据，但是在 Ajax 调用的回调函数中将日期选择器与 #DataePicker 关联的代码。

# java - 使用 Eclipse(Android) 奇怪的错误

> ID：15902481
> 
> 赞同：1
> 
> 时间：2013-04-09T12:53:48.500
> 
> 标签：java, android, eclipse

我仍在学习编码，但我持续编码的应用程序无法在 2 个不同的设备上运行。Eclipse（最新的android sdk）可以是错误还是我每个应用程序都编码错误？它的力量在 2 台设备上关闭

```
 public class MainActivity extends Activity {

Button dugme = (Button) findViewById(R.id.dugme);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dugme.setOnClickListener(new View.OnClickListener(){

@Override
    public void onClick(View v) {
            Cao();
        }   
        });

}
private void Cao(){
    Intent Cao = new Intent(this, Cao.class);
    startActivity(Cao);
}} 
```

这是曹班

```
 public class Cao  extends Activity{

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cao);
}} 
```

和清单

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.book1"
    android:versionCode="1"
     android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.book1.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
       </activity>
       <activity
        android:name="com.example.book1.Cao"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.Action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
      </activity>
      </application></manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:57:51.597

试着放

```
Button dugme = (Button) findViewById(R.id.dugme); 
```

`onCreate`您的方法中的这一行。一个类应该只有变量和方法。这条线是定义。所以我认为这只是你的代码中的问题。除了您的代码没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:10:48.997

把这条线

```
Button dugme = (Button) findViewById(R.id.dugme) 
```

后

```
setContentView(R.layout.activity_main) 
```

> Android 根据其每个布局 xml 获取 view_id 的每个引用

想想如果android在为给定的活动设置布局之前获取视图reference_id，那么我们甚至不能为两个不同的布局xml保留相同的视图ID名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:04:32.393

这一行是错误的：

```
Button dugme = (Button) findViewById(R.id.dugme); 
```

不是因为它不在`onCreate`方法中，而是因为它出现在这一行之前：

```
 setContentView(R.layout.activity_main); 
```

原因是：如果您没有将布局设置为活动的内容视图，则无法使用该`findViewById`方法，因为找不到该视图的位置（您的布局尚未设置）。

# ruby-on-rails - 对其他网站的 Ajax 请求在 heroku 上不起作用

> ID：15902486
> 
> 赞同：-2
> 
> 时间：2013-04-09T12:54:01.447
> 
> 标签：ruby-on-rails, ruby, ajax, heroku

我有一个 Rails 应用程序，当用户单击按钮时，它会向其他网站发出 ajax 请求。在本地主机上它工作得很好，但`heroku`它没有。它返回`"We're sorry, but something went wrong."`（500），这是日志

```
Processing by HomeController#some_request as */*
2013-04-09T12:42:33.050720+00:00 app[web.1]:   Parameters: {"q"=>"another_web_site.com"}
2013-04-09T12:42:33.048011+00:00 app[web.1]: Started POST "/ajax/some_request" for 180.183.158.162 at 2013-04-09 12:42:33 +0000
2013-04-09T12:42:29.793791+00:00 heroku[router]: at=info method=GET path=/assets/application.js host=my_host.org fwd="180.183.158.162" dyno=web.1 connect=1ms service=5ms status=304 bytes=0
2013-04-09T12:42:54.057280+00:00 app[web.1]: 
2013-04-09T12:42:54.057280+00:00 app[web.1]: Errno::ETIMEDOUT (Connection timed out - connect(2)):
2013-04-09T12:42:54.057280+00:00 app[web.1]: 
2013-04-09T12:42:54.057280+00:00 app[web.1]: 
2013-04-09T12:42:54.057280+00:00 app[web.1]:   lib/domain_info.rb:14:in `who_is'
2013-04-09T12:42:54.057280+00:00 app[web.1]:   app/controllers/home_controller.rb:8:in `who_is'
2013-04-09T12:42:54.055802+00:00 app[web.1]: Completed 500 Internal Server Error in 21004ms
2013-04-09T12:42:54.059787+00:00 heroku[router]: at=info method=POST path=/ajax/some_request host=my_host.org fwd="180.183.158.162" dyno=web.1 connect=2ms service=21017ms status=500 bytes=643 
```

现在是超时了。就在昨天，它是[https://devcenter.heroku.com/articles/error-codes#h18-request-interrupted](https://devcenter.heroku.com/articles/error-codes#h18-request-interrupted)`sock field`等于`client`.

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:10:15.270

无论您的应用程序在做什么`lib/domain_info.rb`都会超时 - 您确定代码在您的机器/本地主机以外的位置工作吗？这段代码在做什么？分享会很有帮助。

# java - JavaScript 或 Python 从块数据中提取 IP 地址

> ID：15902494
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:17.527
> 
> 标签：java, javascript, python

我正在尝试过滤谷歌电子表格中的一堆乱码，然后只提取 IP 地址并存储它们，以便以后进行比较。IE用户输入

```
"Summary: unauthorized ms-rdp traffic
Notes:  SRC_IP: 211.238.202.137   91.212.144.2   92.66.145.194   121.229.128.42   81.162.195.34   81.88.125.86    213.42.28.188   85.21.42.240   94.56.89.117   177.55.40.14   219.69.14.40
SRC_Port:
SRC_Country: US KR IL CN CZ AE RU BR TW
DST_IP: MANY
DST_Port:
DST_Country: US
Campus_Agency:" 
```

该脚本存储所有 scr_ip 地址，以后如果需要，用户可以输入一个 IP 地址，如 211.238.202.137，它将返回一个验证 IP 是否在列表中的语句。我已经尝试过 if 语句并且没有运气，我一直在尝试不同的变化，我认为这只是我的技能集。我最接近的是它提取了 IP 地址，但按值对它们进行了排序，因此它们与原件不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:59:09.540

一个快速的正则表达式，可以提取所有类似 IP 地址的文本：

```
import re

ipaddress = re.compile(r'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}')

addresses = ipaddress.findall(inputtext)
if '211.238.202.137' in addresses:
    print 'We have a match!' 
```

对于您的示例文本，`.findall()`调用返回：

```
>>> ipaddress.findall(inputtext)
['211.238.202.137', '91.212.144.2', '92.66.145.194', '121.229.128.42', '81.162.195.34', '81.88.125.86', '213.42.28.188', '85.21.42.240', '94.56.89.117', '177.55.40.14', '219.69.14.40'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:00:01.183

```
import re

text = """Summary: unauthorized ms-rdp traffic
Notes:  SRC_IP: 211.238.202.137   91.212.144.2   92.66.145.194   121.229.128.42   81.162.195.34   81.88.125.86    213.42.28.188   85.21.42.240   94.56.89.117   177.55.40.14   219.69.14.40
SRC_Port:
SRC_Country: US KR IL CN CZ AE RU BR TW
DST_IP: MANY
DST_Port:
DST_Country: US
Campus_Agency:"""

"""This will store all the ips in the text variable in a list called ips"""
ips = re.findall('(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})', text, re.DOTALL)

ipEntered = raw_input('Please enter an IP: ')
if ipEntered in ips:
    print 'The IP you entered is in the list.'
else:
    print 'The IP you entered is not in the list.' 
```

# java - 如何在 Java 6 上将 Hibernate bean 属性标记为 @Transient？

> ID：15902499
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:28.097
> 
> 标签：java, hibernate, java-7, java-6, hibernate-4.x

我有一个应用程序被迫托管在仅运行 JRE 6 的提供程序上。

我的 Hibernate bean 上出现编译错误，这些 bean 的属性已用`@Transient`. `java.beans.Transient`编译错误是由于Java 7 中引入的事实造成的。

有没有办法在没有此注释的情况下将 Hibernate 属性标记为瞬态？最好不必完全迁移到`*.hbm.xml`并完全放弃注释？是否有可能以某种方式将此注释接口添加到 JRE 6 的类路径中？

*如果您想指出这在 Java 6 上是不可能的，并且我应该切换托管服务提供商，那么请将此作为评论发布，说明这将被否决的答案。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:11:02.500

尝试将属性标记为瞬态，例如

```
private transient int x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:25:51.703

尝试使用

```
import javax.persistence.Transient; 
```

但是，不确定它是否可以在没有 JPA 模式的情况下在休眠状态下工作。

# php - 一些用户名显示为混乱的字符串！YouTube API AuthSub

> ID：15902500
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:29.520
> 
> 标签：php, youtube-api, authsub

我的网站使用 YouTube API 供用户交互。*不是全部*，而是一些用户名进入我的系统，它们是不存在的频道，我不确定如何检测到这个？

它们的长度正确，我已经只检查了字母数字字符串。一个例子：

> l3C9jpHV76COU9UHhWNneg

这是获取帐户用户名的代码片段。大多数时候：我的这部分代码没有问题！

```
//User Profile Object
$userProfileEntry = $yt->getUserProfile('default');

//Get the username of the currently authed channel
$AuthedAccountName = (string)$userProfileEntry->getUsername(); 
```

# android - 显示值'??' 在字符串.xml 中

> ID：15902502
> 
> 赞同：2
> 
> 时间：2013-04-09T12:54:32.367
> 
> 标签：android

我有一个小问题，但我没有答案。我使用 strings.xml 来存储我的应用程序中的所有文本。如果我想保存下一个值：'??' 所以当我执行我的应用程序时出现错误。

```
<string name="unknown_text">??</string>

error: Error: No resource found that matches the given name (at 'unknown_text' with value '??'). 
```

是否有解决方案将此值保存在 xml 中，或者我必须对所有需要它的小部件使用 setText()？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:03:13.497

总是引用整个字符串是一个好习惯：

```
<string name="unknown_text">"??"</string> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:58:54.267

采用`<string name="questions">\??</string>`

检查[FormattingAndStyling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)和此[链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/vV3A9nkbGPc)以获取更多详细信息。

# c# - WPF 设计器中标记扩展参数的设计时检查

> ID：15902503
> 
> 赞同：18
> 
> 时间：2013-04-09T12:54:34.903
> 
> 标签：c#, wpf, markup-extensions, visual-studio-designer

我已经为 WPF 编写了一个标记扩展，它允许我做

```
<!-- Generic Styles -->
<Style x:Key="bold" TargetType="Label">
    <Setter Property="FontWeight" Value="ExtraBold" />
</Style>

<Style x:Key="italic" TargetType="Label">
    <Setter Property="FontStyle" Value="Italic" />
</Style>

<Style x:Key="gridHeader" TargetType="Label" 
    BasedOn="{WPF:CombiStyle bold italic }" > 
```

这是一个非常有用的扩展，在运行时效果很好。但是在设计时我看不到应用的样式，或者如果我错误地输入粗体和斜体，它们可能不会被找到为静态资源。

我可以做些什么来让它工作？

扩展的源代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Markup;

namespace MarkupExtensions
{
    [MarkupExtensionReturnType(typeof(Style))]
    public class CombiStyleExtension : MarkupExtension
    {

        private string[] MergeStyleProviders { get; set; }

        public CombiStyleExtension(string s0)
        { 
            MergeStyleProviders = s0.Split(new[]{' '});
        }

        public override object ProvideValue(IServiceProvider
                                            serviceProvider)
        {
            return MergeStyleProviders
                .Select(x => StringToStyle(serviceProvider, x))
                .Aggregate(new Style(), RecursivelyMergeStyles);
        }

        private static Style StringToStyle(IServiceProvider serviceProvider, string x)
        {
            var style = new StaticResourceExtension() { ResourceKey = x }.ProvideValue(serviceProvider) as Style;
            if (style==null)
            {
                throw new ArgumentException("Argument could not be converted to a style");
            }
            return style;
        }

        private static Style RecursivelyMergeStyles(Style accumulator,
                                           Style next)
        {
            if (next.BasedOn != null)
            {
                RecursivelyMergeStyles(accumulator, next.BasedOn);
            }

            MergeStyle(accumulator, next);

            return accumulator;
        }

        private static void MergeStyle(Style targetStyle, Style sourceStyle)
        {
            targetStyle.TargetType = sourceStyle.TargetType;
            // Merge the Setters...
            foreach (var setter in sourceStyle.Setters)
                targetStyle.Setters.Add(setter);

            // Merge the Triggers...
            foreach (var trigger in sourceStyle.Triggers)
                targetStyle.Triggers.Add(trigger);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T16:56:43.377

**更新：**添加了**VS2012**的屏幕截图（工作正常）和**VS2012 的 Blend**（部分工作：基于 BasedOn 样式的基本样式由于某种原因未正确拾取）。

还在**VS2013 Preview**和**Blend for VS2013 Preview中检查了它 - 它的工作原理与****Blend** for VS2012部分且完全相同。希望他们在发布时解决这个问题。

![在 VS2012 中工作与在 VS2010 中一样好](https://i.stack.imgur.com/QBbf6.gif)

![在 Blend for VS2012 中，它部分工作](https://i.stack.imgur.com/oYEgx.png)

问题是，当您尝试在 XAML 中描述的对象具有用于实例化该对象的设计时实例的公共默认构造函数时，Visual Studio 设计者非常喜欢。

我已经更新了一点您的**CombiStyleExtension.cs**类以考虑到这一点，并且 Visual Studio 2010 设计器现在喜欢它。但是 Blend 4 设计师仍然没有，抱歉。

看一看：

```
using System;
using System.Linq;
using System.Windows;
using System.Windows.Markup;

namespace WpfApplication7
{
    [MarkupExtensionReturnType(typeof(Style))]
    public class CombiStyleExtension : MarkupExtension
    {
        /// <summary>
        /// Set space-separated style names i.e. "size16 grey verdana".
        /// </summary>
        public string Names { private get; set; }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return Names.Split(new[] { ' ' })
                        .Select(x => Application.Current.TryFindResource(x)
                            as Style)
                        .Aggregate(new Style(), RecursivelyMergeStyles);
        }

        private static Style RecursivelyMergeStyles(Style accumulator,
                                                    Style next)
        {
            if(accumulator == null || next == null)
                return accumulator;

            if(next.BasedOn != null)
                RecursivelyMergeStyles(accumulator, next.BasedOn);

            MergeStyle(accumulator, next);

            return accumulator;
        }

        private static void MergeStyle(Style targetStyle, Style sourceStyle)
        {
            if(targetStyle == null || sourceStyle == null)
            {
                return;
            }

            targetStyle.TargetType = sourceStyle.TargetType;

            // Merge the Setters...
            foreach(var setter in sourceStyle.Setters)
                targetStyle.Setters.Add(setter);

            // Merge the Triggers...
            foreach(var trigger in sourceStyle.Triggers)
                targetStyle.Triggers.Add(trigger);
        }
    }
} 
```

这个标记扩展的使用也发生了一些变化。它怎么样：

```
BasedOn="{WPF:CombiStyle bold italic }" 
```

以及现在如何：

```
BasedOn="{WPF:CombiStyle Names='bold italic'}" 
```

在这里为您节省一些时间是一些 xaml 来复制粘贴运行和观看：

**MainWindow.xaml**：

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:WPF="clr-namespace:WpfApplication7"
        Title="MainWindow" Height="350" Width="569">
    <Window.Resources>
        <!-- Did not managed to make the type-level style work -->
        <!-- from app.xaml, so put it here. Just in case. -->
        <Style TargetType="{x:Type Label}"
                  BasedOn="{WPF:CombiStyle Names='size16 grey verdana'}" />
    </Window.Resources>
    <StackPanel>
        <Label Content="Type-level: size16 + grey + verdana" />
        <Label Content="'h1': size24 + royalBlue" Style="{DynamicResource h1}" />
        <Label Content="'warning': size24 + yellow + bold + shadow"
                   Style="{DynamicResource warning}" />
        <Label Content="Inline: size12 + italic"
                   Style="{WPF:CombiStyle Names='size12 italic'}" />
        <Label Content="Inline: size16 + bold + italic + red"
                   Style="{WPF:CombiStyle Names='size16 bold italic red'}" />
        <Label Content="Inline: size24 + green"
                   Style="{WPF:CombiStyle Names='size24 green'}" />
    </StackPanel>
</Window> 
```

**应用程序.xaml**：

```
<Application x:Class="WpfApplication7.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:WPF="clr-namespace:WpfApplication7"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <!-- Sizes -->
        <Style x:Key="size12" TargetType="Label">
            <Setter Property="FontSize" Value="12" />
        </Style>
        <Style x:Key="size16" TargetType="Label">
            <Setter Property="FontSize" Value="16" />
        </Style>
        <Style x:Key="size24" TargetType="Label">
            <Setter Property="FontSize" Value="24" />
        </Style>
        <!-- Bold/Italic -->    
        <Style x:Key="bold" TargetType="Label">
            <Setter Property="FontWeight" Value="ExtraBold" />
        </Style>
        <Style x:Key="italic" TargetType="Label">
            <Setter Property="FontStyle" Value="Italic" />
        </Style>
        <!-- Colors --> 
        <Style x:Key="grey" TargetType="Label">
            <Setter Property="Foreground" Value="#333333" />
        </Style>
        <Style x:Key="royalBlue" TargetType="Label">
            <Setter Property="Foreground" Value="RoyalBlue" />
        </Style>
        <Style x:Key="green" TargetType="Label">
            <Setter Property="Foreground" Value="Green" />
        </Style>
        <Style x:Key="yellow" TargetType="Label">
            <Setter Property="Foreground" Value="Yellow" />
        </Style>
        <Style x:Key="red" TargetType="Label">
            <Setter Property="Foreground" Value="#D00000" />
        </Style>
        <!-- Fonts -->  
        <Style x:Key="verdana" TargetType="Label">
            <Setter Property="FontFamily" Value="Verdana" />
        </Style>
        <!-- Effects -->
        <Style x:Key="shadow" TargetType="Label">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="0" />
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Predefined Combinations -->
        <Style x:Key="h1" TargetType="{x:Type Label}"
               BasedOn="{WPF:CombiStyle Names='size24 royalBlue'}" />
        <Style x:Key="warning" TargetType="{x:Type Label}"
               BasedOn="{WPF:CombiStyle Names='size24 yellow bold shadow'}">
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="Yellow" />
        </Style>
    </Application.Resources>
</Application> 
```

享受 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:53:30.423

不 不幸的是，我对这个问题的理解是这样的，

由于依赖属性，设计时间解析似乎在 WPF 中起作用。由于`MarkupExtension`不是从依赖对象派生的，因此您的扩展永远不会在设计时进行评估。至于天气，这是一个疏忽或故意是有争议的。

可能有另一种方法可以解决这个问题，但会略有不同。创建一个名为 MergeStyles 的新附加属性。在该属性中，您可以指定要合并和应用的样式名称。当值更改时，只需使用上面的代码更新附件的样式。您可以使用每个要合并的样式进入的位置来确定层次结构。

这不是你想要的，但它可能会让你成功一半。这样做的结果是您可以绑定到它。

# java - 将值保存到需要保留的偏好摘要

> ID：15902505
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:38.107
> 
> 标签：java, android, sharedpreferences, preferences, preferenceactivity

我有preferences.xml，其中包含复选框、preferences..etc。我正在扩展首选项活动并使用 addpreferencesfromxml 方法设置首选项布局。单击第一个首选项打开 TimePickerDialog，用户需要选择小时和分钟。当用户单击“确定”时，我将该特定偏好的摘要设置为用户选择的值（比如说 3:05 AM）。

我想保存这个值，所以当用户离开我的偏好活动时，如果返回值（和摘要）仍然存在（它不是默认值，而是应该是用户之前选择的值）。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:15:08.827

您可以在打开 PreferenceActivity 时加载这些值（请参阅[阅读首选项](http://developer.android.com/guide/topics/ui/settings.html#ReadingPrefs)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:20:31.853

[http://developer.android.com/guide/topics/ui/settings.html#CustomSave](http://developer.android.com/guide/topics/ui/settings.html#CustomSave)

```
@Override
protected void onDialogClosed(boolean positiveResult) {
    // When the user selects "OK", persist the new value
    if (positiveResult) {
        persistInt(mNewValue);
    }
} 
```

# sql - 使用 SQL 'OR' 语句访问设计视图冻结

> ID：15902506
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:38.663
> 
> 标签：sql, filter

我在访问过滤数据时使用此 SQL 语句，它运行良好，唯一的问题是“或”语句导致查询的设计视图完全崩溃，从而导致整个访问。

我有大约。表中有 70 列。如果我在 4-5 列上使用查询的设计视图，但如果我将它放在更多列或所有列上，它就会崩溃。我注意到访问会自动在设计视图的列中添加标准。知道为什么会这样吗？一切正常，直到我尝试在设计视图中查看查询。

```
WHERE ((table.[column]) Like [Forms]![form]![combo-box] Or [Forms]![form]![combo-box] Is Null) 
AND ((table.[column2]) Like [Forms]![form]![combo-box2] Or [Forms]![form]![combo-box2] Is Null) AND ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:34:00.920

尝试

```
WHERE (
          (
                ( [Forms]![form]![combo-box] Is Not Null )
            AND ( table.[column] Like [Forms]![form]![combo-box] )
          )
       Or ( [Forms]![form]![combo-box] Is Null )
      )
  AND (
          (
                ( [Forms]![form]![combo-box2] Is Not Null )
            AND ( table.[column2] Like [Forms]![form]![combo-box2] )
          )
       Or ( [Forms]![form]![combo-box2] Is Null )
      )
  AND ... 
```

# php - 使用 PHP 将多个元素中的值插入数据库

> ID：15902512
> 
> 赞同：0
> 
> 时间：2013-04-09T12:54:54.407
> 
> 标签：php, jquery, mysql, html

我需要将这些页面元素中的数据保存到数据库中 - 它们将由用户动态创建，但始终采用类似的格式

出现 HTML：

```
<div><p>1</p>
   <div><p>Broccoli</p></div>
   <div><p>Carrot</p></div>
</div>

<div><p>2</p>
   <div><p>Chicken</p></div>
   <div><p>Beef</p></div>
   <div><p>Lamb</p></div>
</div> 
```

需要的值：

```
"1:Broccoli", "1:Carrot", "2:Chicken", "2:Beef", "2:Lamb" 
```

（很高兴将类/ID 添加到任何 div 以提取所需的值）

应该发生什么：

1.  单击保存按钮后，数据被抓取到一个数组中（通过 Jquery？）
2.  数组被发送到 PHP 文件并插入到数据库中

对此的任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:59:56.593

您应该在用户创建数据时将此数据保存到数据库中。之后不要尝试抓取自己的页面。这将为您节省大量时间并使您的脚本运行得更快。

完成此操作后，您可以使用`serialize()`将数组转换为可以存储在数据库中的字符串，然后将字符串转换回数组`unserialize()`

# android - 如何将数据从 Android 应用程序发送到服务器？

> ID：15902516
> 
> 赞同：1
> 
> 时间：2013-04-09T12:55:11.947
> 
> 标签：android, sockets, long-polling, chess, google-cloud-messaging

我正在 Android 中开发在线国际象棋游戏。第一个播放器使用该应用程序，第二个播放器使用 html 网页。

我想要做的是发送文本，其中包含每个玩家轮流进行的每一步的信息。游戏的所有处理和验证部分都将在 Android 应用程序中完成。第二个玩家只是接收文本，将其解析为 html 代码，然后将非常相似的文本发送给应用程序，以便接收移动授权。

我真的在尝试尽可能少地使用互联网资源。

我一直在寻找最好的选择，以便使用 Android 发送消息，但由于我对它不是很有经验，所以我不知道该怎么做。

我发现了这些发送消息的可能性：

*   [GCM](http://developer.android.com/google/gcm/index.html)
*   Android ServerSockets 和 Sockets
*   [制作 Push 技术，如长轮询](http://en.wikipedia.org/wiki/Push_technology)

我从未使用过这些技术中的任何一种，但我想知道哪种技术最适合开始进行更深入的研究。

正如您所看到的，国际象棋游戏不需要大量的消息传递，因为我必须根据 Android 应用程序中的国际象棋引擎的每次移动和授权发送和接收一条消息。

如果您知道更好的解决方案或与我应该使用的技术示例的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:05:15.130

在您的情况下，Android 播放器是否需要与应用程序一起运行（实时播放）或者发送播放、播放关闭应用程序并在几个小时内查看下一步动作的选项很重要?

如果是实时的，只需打开连接并使用轮询或套接字来保持游戏运行。

如果它不是实时游戏，GCM 可能是您最好的方法。

但请注意，这两个选项都意味着您将需要自己的网络服务器运行的东西。

# c# - 采用 DateTimeOffset 的表达式导致 Visual Studio 内部编译器错误

> ID：15902520
> 
> 赞同：7
> 
> 时间：2013-04-09T12:55:20.930
> 
> 标签：c#, visual-studio, visual-studio-2012, compiler-errors, roslyn

我试图模拟一个将 a`DateTimeOffset?`作为其参数之一的接口。突然之间，Visual Studio 开始报告“内部编译器错误”并且它已经“停止工作”。经过大量的尝试，我开始一个一个地删除文件，然后逐行代码。这简化为以下代码，它重现了此错误：

```
public class testClass
{
    public interface ITest
    {
        void Test(DateTimeOffset? date);
    }

    public void test2()
    {
        var mock = new Mock<ITest>();
        mock.Setup(x => x.Test(new DateTime(2012, 1, 1)));
    }
} 
```

问题似乎是行：

```
mock.Setup(x => x.Test(new DateTime(2012, 1, 1))); 
```

如果我评论它，编译器工作正常。另外，问题是我正在设置一个`new DateTime()`，它适合`DateTimeOffset`.

这是一个错误`Moq`，还是`VS2012`？以前有人遇到过这个错误吗？

## 更新

以下代码示例还会导致编译错误，无论是使用常规 Visual Studio 2012 编译器还是使用 Roslyn CTP 2012 年 9 月：

```
using System;
using System.Linq.Expressions;

public interface ITest
{
    void Test(DateTimeOffset? date);
}

public class TestClass
{
    Expression<Action<ITest>> t = x => x.Test(new DateTime(2012, 1, 1));
} 
```

错误：

> 1>CSC：错误 CS0583：内部编译器错误（地址 00D77AFB 处的 0xc0000005）：可能的罪魁祸首是“BIND”。

此代码与起订量无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:12:48.837

这显然是语义分析器中的一个错误。（文本“可能的罪魁祸首是 BIND”是语义分析器中错误的特征，在内部称为“绑定器”。）这里的场景是我们在 lambda 中有一个提升到可空的用户定义转换，即被转换为表达式树。该代码是一个*错误农场*。我以为我为这个确切的场景写了一个测试用例，但也许我没有。

无论如何，这个问题很可能是我的错，所以很抱歉。不过，我现在对此无能为力。

真正奇怪的是，据称该错误在 Roslyn 和 C# 5 编译器上都存在。这是一个疯狂的巧合，因为 Roslyn 和 C# 5 编译器对这部分语义分析有完全不同的代码。我们从头开始重写了大部分内容。奇怪的是，我们会以同样的方式两次弄错。

无论如何，Kevin 会看到这个，因为你将它标记为 Roslyn，如果你想在 Connect 网站上输入错误，我相信团队会很感激。

## 更新：

等等，你在 Roslyn 中遇到了*完全相同的错误？*那么发生的事情很可能是 IDE 仍在使用 C# 5 分析库。如果您编写的代码将有问题的代码加载到 Roslyn 编译中并对其进行分析，您可能不会收到错误。对？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T12:43:18.997

这令人印象深刻，像这样使 C# 编译器崩溃是非常罕见的壮举。你可以在 connect.microsoft.com 上报告它，尽管微软应该从它那里收到一堆 WER 报告。反正我有几个:)

您可以通过重写代码来解决该问题。要么：

```
static DateTimeOffset? arg = new DateTime(2012, 1, 1);
Expression<Action<ITest>> t = x => x.Test(arg); 
```

或使用清洁剂：

```
public class TestClass
{ 
    Expression<Action<ITest>> t;

    public TestClass() {
        DateTimeOffset? arg = new DateTime(2012, 1, 1);
        t = x => x.Test(arg);
    }
} 
```

# c# - GridView 动态添加删除列（服务器端）

> ID：15902521
> 
> 赞同：0
> 
> 时间：2013-04-09T12:55:21.540
> 
> 标签：c#, asp.net, gridview, dynamic

我们从 XML 读取并在 asp gridview 中创建列。同样的 XML 也用于在数据表中创建列。我们用所需的数据填充该数据表，并使用服务器端代码将数据表绑定到 gridview。

现在，我们想在每个 gridview 行中添加删除链接，但不知道如何管理它。由于我们没有使用 RowDataBound 方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:32:48.973

这个问题有很多解决方案。示例从数据源中删除行 ( `DataSource.RemoveCurrent`)。

如果您可以定义“删除按钮行”（类型按钮），您可以使用简单的`dataGridView1.Rows.Remove`.

或者，如果您想通过单击按钮删除该行：

```
private void dataGridView1_CellMouseClick(object sender, DataGridViewCellMouseEventArgs e)  {
       if (e.ColumnIndex == 8)// define the delete button column
       {
             dataGridView1.Rows.Remove(dataGridView1.Rows[e.RowIndex]); // delete with index!
        } } 
```

# android - Android - 从 URL 抓取图像并使用 AsyncTask 在 ImageView 中显示它

> ID：15902523
> 
> 赞同：0
> 
> 时间：2013-04-09T12:55:22.610
> 
> 标签：android, image, url, android-asynctask

我正在尝试让应用程序显示来自 URL 的图像，我相当确定问题出在 AsyncTask 但过去一周我已经多次返回此代码，但我仍然看不出哪里出错了.

已设置 Internet 权限，但我没有收到 LogCat

```
ImageView eventImage2;
eventImage2 = (ImageView) findViewById(R.id.eventImage2);

new imageupdate().execute();

public class imageupdate extends AsyncTask<Bitmap, Void, Bitmap> {

    @Override
    protected Bitmap doInBackground(Bitmap... url) {

        URL url1;

        try {

            url1 = new URL("http://masterzangetsu.eu/Apps/NowIGetYou/banner.png");
            HttpURLConnection connection  = (HttpURLConnection) url1.openConnection();

            InputStream is = connection.getInputStream();
            Bitmap img = BitmapFactory.decodeStream(is);

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return img;

    }

    protected void onPreExecute(String result) {

    }

    protected void onPostExecute(Bitmap result) {
        super.onPostExecute(result);

        eventImage2.setImageBitmap(result);

    }

} 
```

据我所知，使用定义的 img 变量

```
img = BitmapFactory.decodeStream(is); 
```

没有链接到返回的变量

```
return img; 
```

变量 result 和 img 都返回为 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:05:14.690

改变这个

```
 Bitmap result = null;

        InputStream is = connection.getInputStream();
        Bitmap img = BitmapFactory.decodeStream(is); 

        img = result; 
```

到

```
 Bitmap img = null;

        InputStream is = connection.getInputStream();
        Bitmap img = BitmapFactory.decodeStream(is); 

        result = img; 
```

并且`return result`在`doInBackground()`. `null`你让它们切换，所以无论发生什么，“img”都会出现。

此外，您不能使用`Toast`in`doInBackground()`因为此方法不在`UI`线程上运行。您需要将其设置为 a`Log`或`Toast`放入`onPostExecute()`or `onProgressUpdate()`。这些是我看到的。如果您仍然遇到问题，那么您需要更清楚具体是什么。您将需要调试并使用断点来查看应该返回的内容并进一步查明问题所在

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) - 任何`UI`更新都必须在其他方法之一中完成，`AsyncTask`或者`doInBackground()`您可以将值传递回 以`Activity`更新`UI`那里。

# c# - 实体框架表关系

> ID：15902527
> 
> 赞同：1
> 
> 时间：2013-04-09T12:55:37.477
> 
> 标签：c#, asp.net, entity-framework

## 介绍

*   我是实体框架的新手
*   我正在使用代码优先

## 用例

我必须遵循表格

```
[Table("TBL_UserVariant")]
public class UserVariant
{
    [Key, Column(Order = 0)]
    public int UserId { get; set; }
    [Key, Column(Order = 1)]
    public int VarId { get; set; }
    public string Value { get; set; }
}

[Table("TBL_UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string eMail { get; set; }
} 
```

我希望 TBL_UserProfile 引用所有 TBL_UserVariant 条目的列表，其中 TBL_UserProfile::UserId == TBL_UserVariant::UserId

以下是我的目标示例

```
[Table("TBL_UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string eMail { get; set; }

    public UserVariant[] variants;
} 
```

其中 'UserProfile::variants' 应包含 'TBL_UserProfile::UserId == TBL_UserVariant::UserId' 的项目列表

## 问题

这可以直接使用 EF 吗？或者，我应该实现一个填充 'UserProfile::variants' ~manually~ 的包装器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:58:14.807

您只需将导航属性添加到 UserProfile 实体。

```
 [Table("TBL_UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }

        public string eMail { get; set; }
        public virtual ICollection<UserVariant> UserVariants { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:59:29.347

以下是您应该需要的。EF 将负责其余的工作。

```
[Table("TBL_UserProfile")]
public class UserProfile
{
    [Key]
    public int UserId { get; set; }
    public string eMail { get; set; }

    public virtual ICollection<UserVariant> Variants { get; set; }
}

[Table("TBL_UserVariant")]
public class UserVariant
{
    [Key]
    public int VarId { get; set; }
    public UserProfile User { get; set; }
    public string Value { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:59:58.783

我认为你要的是你想要一个`UserProfile`，映射到 Many`UserVariants`

在这种情况下，您需要将一个集合添加到您的 UserProfile 类。

```
public virtual ICollection<UserVariant> UserVariants { get; set; } 
```

您还需要修复`[Key]`UserVariant 类上的属性，因为我认为它应该在 VarId 上。然后，您可以只指定一个导航属性

```
[Key]
public int VarId { get; set; }
public UserProfile User { get; set; } 
```

**编辑**

顺便说一句，您的命名约定无处不在。不要在表名前加上`TBL_`. 将所有属性/列大写。例如`Email`不是`eMail`

# php - Zend 会话启动

> ID：15902528
> 
> 赞同：1
> 
> 时间：2013-04-09T12:55:43.457
> 
> 标签：php, session, zend-framework, bootstrapping

我的 zend 应用程序引导文件中有以下代码

```
protected function _initSessionId() {
    $this->bootstrap( 'session' );
    $opts = $this->getOptions();
    $cache = $this->bootstrap( 'cachemanager' )
    ->getResource( 'cachemanager' )
    ->getCache( 'memcached' );
    Zend_Db_Table_Abstract::setDefaultMetadataCache( $cache );

    Zend_Registry::set( 'cache', $cache );
    $defaultNamespace = new Zend_Session_Namespace();
    if ( !isset( $defaultNamespace->initialized ) ) {
        Zend_Session::regenerateId();
        $defaultNamespace->initialized = true;
    }
} 
```

我想知道这条线`$this->bootstrap('session')`实际上做了什么。它实例化和调用哪个类/函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:03:42.170

# 如何引导*资源*

`bootstrap(<resource_name>)`告诉 Zend_Bootstrap 在继续之前初始化指定的资源。通常用于在初始化实际之前初始化所需的依赖项`resource`

资源引导程序可以通过两种方式声明。

类中的一个 PHP 方法`Bootstrap`。

```
function _init<Resource_name>() { ... } 
```

或者在`ini`文件中

```
resources.<resource_name> 
```

在最后一种情况下（`ini`文件），`Zend_Application_Resource_ResourceAbstract`必须使用初始化资源的代码声明扩展自的类。

## 会话资源引导

对于`bootstrap('session')`默认情况下的具体情况，使用中`init()`声明的方法`Zend_Application_Resource_Session`

# ruby-on-rails - 通过 twitter bootstrap 在 popover 上渲染 html

> ID：15902530
> 
> 赞同：1
> 
> 时间：2013-04-09T12:55:44.607
> 
> 标签：ruby-on-rails, twitter-bootstrap, html-safe

我无法将放置在 yml 文件中的 html 呈现为通用 popover 的数据属性。我将以这种方式呈现文本字段：

```
= f.text_field :link_url, :class => "span6 popoverable", :data => {:content => t("popover.campaign.link_url.message"), :original_title => t("popover.campaign.link_url.title")}, :placeholder => "URL link to your song, fan page, site" 
```

在 yml 文件中我有：

```
en:
  popover:
    campaign:
      link_url:
        message: "Description.<br><b>Example:</b> <i>http://yoursite.com/</i>"
        title: "Title" 
```

但输出不是 html 代码，而是包含 html 标记的普通版本。

我尝试使用 raw 和 .html_safe 但我总是得到相同的结果。

```
t(:string).html_safe
raw(t(:string)) 
```

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:25:16.520

您是否尝试在 Bootstrap .popover 上设置 :html => true 选项？ [http://twitter.github.io/bootstrap/javascript.html#popovers](http://twitter.github.io/bootstrap/javascript.html#popovers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:07:28.197

您可以通过清理内容来做同样的事情。请转到此文档：[http ://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)

可能这会对你有所帮助。

# java - 为什么格式化日期是上个世纪

> ID：15902541
> 
> 赞同：2
> 
> 时间：2013-04-09T12:56:09.637
> 
> 标签：java, date, date-format, simpledateformat

我有 4 位数字的日期。我遇到了 2050 年之后的输入。在我的应用程序 `"0150"`中意味着`January 01 2050`. 但是当我格式化它返回以下输出。

```
Sun Jan 01 00:00:00 PKT 1950

 public static Date getFormatDate( String newformat, String dateValue ) throws Exception {

        try {

            SimpleDateFormat simpleDateFormat = new SimpleDateFormat( newformat );
            java.util.Date newdate = simpleDateFormat.parse( dateValue );
            return newdate;
        }
        catch( Exception e ) {
            System.out.println( "Exception in converting date format --->" + e );
            throw e;
        }
    }

    public static void main( String[] args ) throws Exception {        
        System.out.println(getFormatDate( "MMyy", "0150" ));
    } 
```

解决此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:02:09.410

根据[API 文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，`SimpleDateFormat`解析两位数字的年份字段，因此结果是“在 SimpleDateFormat 实例创建时间之前的 80 年内和之后的 20 年内”。

如果您想修改行为以更好地满足您的要求，您可以使用该方法`set2DigitYearStart`设置 100 年期间的开始，您的日期将映射到该期间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T13:01:43.907

从 SimpleDateFormat javadoc ：

> 对于使用缩写年份模式（“y”或“yy”）进行解析，SimpleDateFormat 必须解释相对于某个世纪的缩写年份。它通过将日期调整为创建 SimpleDateFormat 实例之前的 80 年和之后的 20 年来实现这一点。

就您而言，1950 年是今天之前的 80 年之内。

为了获得正确的日期 (2050)，您必须调用[SimpleDateFormat.set2DigitYearStart(Date)](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html#set2DigitYearStart-java.util.Date-)。

# android - CloudBlobClient .setTimeoutInMs() 不起作用

> ID：15902542
> 
> 赞同：0
> 
> 时间：2013-04-09T12:56:13.217
> 
> 标签：android, azure, azure-blob-storage

我正在尝试设置超时值：

```
CloudBlobClient cloudBlobClientUserData = cloudClientAccountUserData.createCloudBlobClient();
cloudBlobClientUserData.setTimeoutInMs(60000); //1 Minute 

CloudBlobContainer container = cloudBlobClientUserData.getContainerReference(containerName);
CloudBlockBlob blob = container.getBlockBlobReference(blobName);

inputStream = new ByteArrayInputStream(data);
blob.upload(inputStream, data.length); 
```

有时，当互联网连接较弱`blob.upload(....)`时，1 分钟后不会超时。需要10多分钟。

知道为什么会这样吗？

PS：我什至尝试了 1 毫秒，例如：

```
cloudBlobClientUserData.setTimeoutInMs(1); 
```

但仍然每个 blob 都在 Azure 云上上传。没有时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:46:45.160

[我在这里](https://github.com/WindowsAzure/azure-sdk-for-java/blob/master/microsoft-azure-api/src/main/java/com/microsoft/windowsazure/services/core/storage/ServiceClient.java)浏览了此功能的文档，引起我注意的一件事是下面的最后一条语句：

> 服务器超时间隔从服务接收到完整请求时开始，服务器开始处理响应。如果在响应返回给客户端之前超时时间已过，则操作超时。**如果请求被重试，超时间隔会在每次重试时重置**。

这就是我在想正在发生的事情：

我假设您没有明确设置重试策略，因此存储客户端库使用默认重试策略（即指数重试策略）。因此，您的第一个请求超时并重试请求，但是当重试请求时，超时间隔将重置为其默认值，即 90 秒。您是否可以通过显式设置重试策略来尝试`No Retry`不重试请求，并根据您在代码中指定的时间间隔查看您的请求是否超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:44:11.817

超时设置适用于单个存储服务操作。我不确定你的 blob 有多大，但我怀疑它是以更小的块上传的。上传的每个块都会受到超时的影响。因此，虽然整个上传可能需要几分钟，但每个块都在超时期限内完成。

另一种可能性是发生了重试。如果有重试，则重置超时。因此，可能会发生一些间歇性故障，这些故障在重试尝试中得到解决。

您可以使用 Fiddler 来验证所有这些以跟踪上传。例如，在跟踪中查找这样的行：

输入 https://.blob.core.windows.net/test/?comp=block&blockid=MkZGREU3RkItMDAwMDE1&timeout=90 HTTP/1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:47:29.703

我对 Android 的东西不是很熟悉，但你能追踪请求吗？您应该在线上看到 REST 调用，并且如果它被设置，它将有一个 '&timeout=xxx' 参数。通常这是每个块而不是每个 blob。您的重试策略是什么？确保你也关闭它。

# node.js - node.js (NowJS) 上的聊天服务器具有 XMPP 中的功能？

> ID：15902543
> 
> 赞同：0
> 
> 时间：2013-04-09T12:56:14.173
> 
> 标签：node.js, xmpp, socket.io, chat

我正在寻找一个用 node.js 编写的聊天服务器，我正在寻找可以扩展的东西。

任何人都可以建议一些至少支持最少数量的开箱即用功能的东西，我不介意弄脏我的手并扩展它，实际上期待它。

我知道存在一种叫做 NowJS 的东西，但它似乎不再被积极开发了。

我一直在寻找 XMPP 提供的一些功能，即 Pub/Sub、发送图像、联系人......这通常是用 XML 完成的......

任何人都在使用这样的东西......我发现的唯一一个是chat.io，但我希望有更多开箱即用的功能。

还可以开箱即用地使用 websockets

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:06:18.903

Socket.IO 可能是您正在寻找的东西：

[http://socket.io/](http://socket.io/)

# pagination - 页面滚动后 YUI scrollView 箭头不起作用

> ID：15902550
> 
> 赞同：1
> 
> 时间：2013-04-09T12:56:46.240
> 
> 标签：pagination, scrollview, yui, arrows

我使用 YUI 滚动视图来制作带有触摸、轻弹和箭头的菜单结构。然而，由于某种原因，箭头有一个错误。

但是，当第一次加载页面时它工作正常，一旦用户用鼠标滚动页面（在平板电脑或手机上），箭头就不再工作了。当我滑动内容时，箭头会神奇地重新开始工作。

这是我用于滚动视图的脚本：

```
YUI().use('scrollview-base', 'scrollview-paginator', function(Y) {

    var scrollView = new Y.ScrollView({
        id: "scrollview",
        srcNode : '#clientslider-content',
        width : 950,
        flick: {
            minDistance: 10,
            minVelocity: 0.3,
            axis: "x"
        }
    });

    scrollView.plug(Y.Plugin.ScrollViewPaginator, {
        selector: 'li'
    });

    scrollView.render();

    var content = scrollView.get("contentBox"); 
    var scrollViewCurrentX = $('#clientslider-content').offset();

    content.delegate("click", function(e) {

        var scrollViewNewX = $('#clientslider-content').offset();
        var scrollMarginL = (scrollViewNewX.left-2);
        var scrollMarginR = (scrollViewNewX.left+2);

        if (scrollViewCurrentX.left < scrollMarginL || scrollViewCurrentX.left > scrollMarginR)
        {
            e.preventDefault();
        }               
    }, ".clientlink");

    content.delegate("mousedown", function(e) {
        scrollViewCurrentX = $('#clientslider-content').offset();               
        e.preventDefault();            
    }, "a, img");

    Y.one('#clientslider-next').on('click', Y.bind(scrollView.pages.next, scrollView.pages));
    Y.one('#clientslider-prev').on('click', Y.bind(scrollView.pages.prev, scrollView.pages));

}); 
```

你可以在这里找到一个演示： [http ://www.circlesoftware.nl/demo/test.html](http://www.circlesoftware.nl/demo/test.html)

重现： - 加载页面 - 按下右键（不要做任何其他事情） - 用鼠标向下滚动 - 现在箭头已损坏 要修复： - 只需抓住滑块的内容，滑动它 - 尝试向左或向右按钮，他们再次工作

有谁知道这里可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:38:03.567

问题似乎来自图书馆本身，正在使用 3.7.3，将其升级到 3.9.1，现在似乎已解决：http: [//yui.yahooapis.com/3.9.1/build/yui/yui-min。 js](http://yui.yahooapis.com/3.9.1/build/yui/yui-min.js)

# tsql - 如何遍历表并为每一行调用存储过程？

> ID：15902551
> 
> 赞同：-1
> 
> 时间：2013-04-09T12:56:49.860
> 
> 标签：tsql, stored-procedures

我有一个包含 10 个值的临时表，如下所示：

```
CREATE TABLE #RequireAuth (val1 int, val2 int /*, etc...*/ ) 
```

如何调用另一个存储这 10 个值并返回 6 个值的存储过程？

```
SELECT * FROM #RequireAuth  -- Not sure how to call a SP from here? 
```

然后我需要获取这 6 个值并更新另一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:39:25.577

我对您的临时表做了一些假设，因为您描述的内容和显示的内容不同，但这是 while 循环的基本概念。

```
CREATE TABLE #RequireAuth (val1 int, done bit default 0)

declare @varible int
        ,@count int

select @count =count(2) from #RequireAuth where done=0
while (@count>0) 
    BEGIn
        select top 1 @varible=val1 from #RequireAuth where done=0
        exec sp_YourProc @variable

        update R  set done=1 from #RequireAuth R where val1=@varible
        select @count =count(2) from #RequireAuth where done=0
END 
```

# django - 如何在 django 中显示“在几分钟前编辑过”

> ID：15902553
> 
> 赞同：0
> 
> 时间：2013-04-09T12:56:52.460
> 
> 标签：django

我的模板中的 template.html 我给出了以下行： 其中 date_edit 包含当前时间。它总是显示 0 分钟前。我该怎么做？？？

```
 {{date_edit|timesince}} ago 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:01:35.153

如果 date_edit 存储当前时间，显示 0 分钟是正常的。您应该存储上次编辑时间。`auto_now=True`您可以通过在模型的 DateTimeField 属性中添加参数来实现此目的。这样，仅当您保存模型时它才会更新。

# java - 如何在java中打印数组？

> ID：15902556
> 
> 赞同：-2
> 
> 时间：2013-04-09T12:57:09.913
> 
> 标签：java, arrays, casting

我已经用 Java 编写了这段代码，该代码将多个整数作为输入，并在数组中插入整数并打印数组。问题是输出打印全0。

```
public class Array2 {
    private static int i;
    private static int[] vett ;
    private static int num2;
    private static int n;

 public static void main(String[] args) throws IOException{

     InputStreamReader In = new InputStreamReader(System.in); 
     BufferedReader myInput = new BufferedReader(In); 
     String stringa = new String();

     String s="";

     System.out.println("Enter the number of integers:");
     n = Integer.parseInt(myInput.readLine());  

      vett=new int[n];

              for(i=0;i<n;i++){
                  System.out.println("Insert integer:");
                  num2 = Integer.parseInt(myInput.readLine());  
                  s=s+vett[i]+" ";

        }  
               System.out.println(s);

 }

 } 
```

跑：

```
Enter the number of integers:
2
Insert integer:
1
Insert integer:
2
0 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:59:44.127

您没有将`num2`变量存储到数组中。

尝试

```
vett[i] = num2; 
```

`num2`从输入流中读取值之后。

顺便说一句，要简单地打印数组以检查其内容，您可以使用

```
System.out.println(java.util.Arrays.toString(vett)); 
```

您不需要使用单独的字符串来跟踪数组内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:01:32.030

您忘记将数字*实际*放入数组中：

```
for(i=0;i<n;i++){
   System.out.println("Insert integer:");
   num2 = Integer.parseInt(myInput.readLine());  
   vett[i] = num2;    // <-- this line here
   s=s+vett[i]+" ";   // and just an info: this is the same as s+=vett[i]+" ";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:59:45.627

你实际上并没有做任何事情`num2`，你需要类似的东西

```
vett[i] = num2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T12:59:52.017

也许您忘记了以下行：

```
vett[i] = num2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T13:02:41.220

这就是在 Java 中打印数组的方式

```
System.out.println(Arrays.toString(array)); // where array is vett[i] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:05:15.320

分配`num2`给`vet[i]`。默认情况下，如果您不指定值，则它的值为零。

```
vett[i] = num2;
s=s+vett[i]+" "; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-27T04:18:57.747

你实际上并没有用 num2 做任何事情，你需要类似的东西

```
vett[i] = num2; 
```

您可以使用此语句打印它

```
 `System.out.println(Arrays.toString(array));` 
```

// 其中数组是 vett[i]

# regex - 我想使用电话号码，它应该有 15 个数字，只有两个连字符

> ID：15902558
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:21.523
> 
> 标签：regex

我想使用电话号码，它应该有 15 个数字，只有两个连字符。我正在使用它，但它不能正常工作：

```
[\d\-]{7,15} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:02:44.857

电话号码（包含两个连字符）由三组数字组成。让我们假设 3 组 5 个数字像这样。

```
xxxxx-xxxxx-xxxxx 
```

对此的自然正则表达式是

```
^\d{5}-\d{5}-\d{5}$ 
```

要更改组更改数字是大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:04:50.977

尝试这个：

```
^(?=(.*?-){,2})[\d-]{7,15}$ 
```

这允许输入 7-15 个数字/破折号，但最多 2 个破折号

请注意，您不必在字符类中第一次出现破折号时对其进行转义。

# php - 停止当前正在运行的 cron 作业（isp manager）

> ID：15902560
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:22.923
> 
> 标签：php, cron

我执行了一个 cron 作业，它执行了我的 php 函数：

```
 public function run($arguments)
    {
        restart:
        DB::query('insert into test(`label`) values ("run")');
        sleep(1);
        goto restart;
    } 
```

所以它正在循环并且每秒向数据库添加一条记录，我已经从 cron 作业列表中删除了该任务，但该过程仍然有效，我如何在不重新启动服务器的情况下停止它，我也可以使用 SSH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:59:37.760

```
`killall -9 php`; 
```

在 PHP 或 shell 中会杀死所有的 php 进程。或执行`kill -9 PID`其中 PID 是 php-job 的进程 ID。

# sql-server - CAST 未能创建日期

> ID：15902561
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:25.450
> 
> 标签：sql-server, tsql

我的演员阵容失败了，我无法理解为什么。

这是失败的原因：

```
select cast('16/04/2012' as datetime) 
```

错误是：

> “将 char 数据类型转换为日期时间数据类型导致日期时间值超出范围。”

如果我使用`CONVERT`for`103`格式，它可以正常工作，如您所料。

服务器设置为英国日期格式，因此 MSSQL 帐户也应默认为英国格式。它已重新启动，因此该服务不应该使用不同的日期格式。

这是一个 SQL2005 实例。

我真正想知道的是，什么可能导致 CAST 失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:25:50.170

使用此代码：

```
SELECT convert(datetime, '16/04/2012',105) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:02:47.977

日期格式和日期时间格式不一定相同。虽然它可能会为 hh:mm:ss 隐式添加 00:00:00，但可以尝试添加它。103 型只包括 dd/mm/yyyy，所以它当然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:03:09.170

您的数据格式为 MM:dd:YY，并且 cast 尝试将您转换为“dd/MM/yy”的“16/04/2012”并抛出异常，因为 16 小于 12 个月。

[您可以在服务器设置](http://blogs.msdn.com/b/sqlserverfaq/archive/2009/11/13/how-to-change-date-format-after-installing-sql-server.aspx)中更改数据格式，也可以在查询之前 使用[SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx)语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:01:44.623

你试过`SET DATEFORMAT DMY`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:05:53.493

你确定服务器是英国语言格式吗？如果我运行：

```
set language british
select cast('16/04/2012' as datetime) 
```

然后我得到：

> 2012-04-16 00:00:00.000

您可以检查当前会话语言

```
select @@language 
```

会话语言默认来自正在使用的登录名，假设它是 SQL Server 提供的登录名（即不是 Windows 用户）。检查给定用户的语言：

```
select loginproperty('myuser', 'DefaultLanguage') 
```

要为所有新创建的登录名进行永久服务器更改：

```
EXEC sp_configure 'default language', 23
reconfigure 
```

...其中 23 是通过`langid`获得的`sp_helplanguage`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T16:55:36.553

始终使用语言中立的日期格式 - 无论任何设置如何，它都将始终有效：

```
CAST('YYYYMMDD', AS DATE); 
```

4 位年，2 位月，2 位日，无分隔符。您将永远不必再担心默认语言设置。

# c# - 带有 IDictionary 的 C# 嵌套反射 SetValue

> ID：15902568
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:45.373
> 
> 标签：c#, reflection

如何设置嵌套对象的值？这是我的课程：

```
public class MyPage<MyData> { 
    public MyData Content {get;set;}
}

public class MyData { 
    public IDictionary<string, string> Text { get;set; }
} 
```

我有一个表示为字符串的表达式，如下所示

```
var expressionString = "Content[\"Main\"]"; 
```

要设置的值

```
var value = "hello world!"; 
```

要设置的对象

```
var page = new MyPage<MyData>(); 
```

请注意，内容为空，文本为空。我想创建同时设置 Text["Main"] = "hello world!";

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:19:52.610

您的代码可以工作，您必须初始化所有内容才能使其工作。要使用这些类，您需要执行以下操作：

```
MyPage<MyData> myPage = new MyPage<MyData>();
myPage.Content = new MyData();
myPage.Content.Text = new Dictionary<string, string>();
myPage.Content.Text["foo"] = "bar";
myPage.Content.Text["fizz"] = "buzz";

foreach (var item in myPage.Content.Text)
{
   Console.WriteLine(item.Key + item.Value);
} 
```

您可能想要做的是更改您的课程以执行以下操作。这样，当您创建 MyPage 类时，您的所有对象都已初始化。另外，我认为不需要添加到 MyPage，因为无论如何您都将其限制在其中。

```
public class MyPage
{
    public MyPage()
    {
        Content = new MyData();
    }
    public MyData Content { get; set; }
}

public class MyData
{
    public MyData()
    {
        Text = new Dictionary<string, string>();
    }
    public IDictionary<string, string> Text { get; private set; }
} 
```

# php - PHP中数组中字符串的所有变体

> ID：15902570
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:48.067
> 
> 标签：php, string, text-parsing

我有一个带空格的字符串。我需要拆分（分解）它并从中获取所有序列变体。例如：

```
字符串1 字符串2 字符串3
```

我需要解析它并得到这样的输出：

```
字符串1 字符串2 字符串3
字符串 1 字符串 3 字符串 2
字符串 2 字符串 1 字符串 3
字符串 2 字符串 3 字符串 1
字符串 3 字符串 2 字符串 1
字符串 3 字符串 1 字符串 2

```

最有效的方法是什么？
编辑：实际上我需要解析最多 3 个字符串。所以我这样做不是一个漂亮的方式（硬编码）：

```
$exploded_query = explode(' ', $query);
如果（计数（$exploded_query）== 2）{
//2个变种
}
如果（计数（$exploded_query）== 3）{
//6 个变种
}

```

所以我正在寻找一些漂亮的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:36:14.163

它是数组的排列

看这里 ->[查找数组的所有排列](http://docstore.mik.ua/orelly/webprog/pcook/ch04_26.htm)，这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:08:46.743

我绝不是声称这是有效的或最佳的。那里有更好的解决方案。但这只是对您问题的直接回答。如果您想消除一些膨胀（以可能会降低一点性能为代价），您可以将`getRemainingWords`函数调用替换为：

```
$index = 0;
array_values(array_filter($words, function($key, &$index) { return !($key == $index++); })); 
```

否则，这里是

```
function getPossibleCombinations($words) {
    $combinations = array();
    $count = count($words);

    // Base case: if there's only 1 word, there's only one combination
    if ($count == 1) {
        return array($words);
    }

    // Otherwise, loop over each words
    foreach ($words as $key=>$word) {

        // For each item, get all of the remaining items in the array (all except the current one)
        $otherWords = getRemainingWords($words, $key);

        // And recursively permute them
        $otherCombinations = getPossibleCombinations($otherWords);
        foreach ($otherCombinations as $otherCombination) {
            $combinations[] = array_merge(array($word), $otherCombination);
        }
    }

    return $combinations;
}

function getRemainingWords($array, $index) {
    $results = array();

    foreach ($array as $key=>$value) {
        if ($key == $index) {
            continue;
        }

        $results[] = $value;
    }

    return $results;
} 
```

# php - php表单给出错误

> ID：15902575
> 
> 赞同：1
> 
> 时间：2013-04-09T12:57:56.457
> 
> 标签：php, html, forms, captcha

我有这个表格，直到几天前它工作正常，现在它显示“需要地址”，无论在该字段中输入地址。

下面是我正在使用的表单的代码。

```
isset($_POST['d1_add']) 
```

这是 if(empty 语句：

```
if (!empty($_POST)) {
 echo "         <ul>\n";
    if(empty($d1_fname))    {echo "         <li>First Name Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_lname))    {echo "         <li>Last Name Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_add))      {echo "         <li>Address Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_city))     {echo "         <li>City     Required</li>\n";}else{$complete = $complete + 1;}
    if($d1_state=="STATE")  {echo "         <li>State Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_zip))      {echo "         <li>Zip Code Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_county))   {echo "         <li>County Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_email))    {echo "         <li>E-Mail Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_phone1) || empty($d1_phone2) ||empty($d1_phone3))
                        {echo "         <li>Phone Number Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_contact))  {echo "         <li>Preferred Contact Required</li>\n";}else{$complete = $complete + 1;} 
```

这是表单部分：

```
<td>Street Address</td>
<td><input style="background-color: #FEFEB6;" name="d1_add" size="20" type="text" 
<?php if(!empty($d1_add)){echo 'value="'.$d1_add.'" ';} ?>/></td> 
```

我的 URL 几天前也过期了，这会导致我的验证码失败吗？还是有其他原因会搞砸？好久没碰这个网站了，什么都没变。

除了表格以某种方式无效之外，还有什么理由可以打破吗？

此外，如果您需要我发布我将发布的所有代码，我只是在必要时提取了我假设的部分。

被搞砸的页面的网址也是： [https ://www.mymra.com/Motorcycle_Insurance_Quote.php](https://www.mymra.com/Motorcycle_Insurance_Quote.php)

我的所有代码：

```
<?php
    function setinclude(){
        $levels = substr_count($_SERVER['PHP_SELF'],'/');
        $root = '';
        for($i = 1; $i < $levels; $i++){$root .= '../';}   
        set_include_path($root);
    }      
    setinclude();
    session_start(); 
    include 'site/config.php';
    require_once 'site/inc/smtpmail.php';
    $linkedURL = $secureURL;

if (!isset($_SERVER['HTTPS']) && strtolower($_SERVER['HTTPS']) != 'on') {
    header('Location: '.$secureURL.'/Motorcycle_Insurance_Quote.php');
}

    //require_once('site/inc/recaptchalib.php');
    //$recaptcha_publickey = '6Le2lt8SAAAAANUh2Qlb0ncvg7pGB79eP52ijeXV';
    //$recaptcha_privatekey = '6Le2lt8SAAAAAMSkGyo0HHV8hhcL7PWWm3fVN90d';

if (
isset($_POST['d1_fname'])           ||  isset($_POST['d1_lname'])   ||
isset($_POST['d1_mname'])           ||  isset($_POST['d1_sname'])   ||
isset($_POST['d1_add'])             ||
isset($_POST['d1_city'])            ||  isset($_POST['d1_state'])   ||  isset($_POST['d1_zip'])     ||
isset($_POST['d1_county'])          ||
isset($_POST['d1_phone1'])          ||  isset($_POST['d1_phone2'])  ||  isset($_POST['d1_phone3'])  ||
isset($_POST['d1_email'])           ||
isset($_POST['d1_contact'])
    ) {

        // Reverse magic_quotes_gpc/magic_quotes_sybase effects on those vars if ON.
        if(get_magic_quotes_gpc()) {
            if(ini_get('magic_quotes_sybase')) {
                $d1_fname           = str_replace("''", "'", $_POST['d1_fname']);
                $d1_lname           = str_replace("''", "'", $_POST['d1_lname']);
                $d1_mname           = str_replace("''", "'", $_POST['d1_mname']);
                $d1_sname           = str_replace("''", "'", $_POST['d1_sname']);
                $d1_add             = str_replace("''", "'", $_POST['d1_add']);
                $d1_city            = str_replace("''", "'", $_POST['d1_city']);
                $d1_state           = str_replace("''", "'", $_POST['d1_state']);
                $d1_zip             = str_replace("''", "'", $_POST['d1_zip']);
                $d1_county          = str_replace("''", "'", $_POST['d1_county']);
                $d1_phone1          = str_replace("''", "'", $_POST['d1_phone1']);
                $d1_phone2          = str_replace("''", "'", $_POST['d1_phone2']);
                $d1_phone3          = str_replace("''", "'", $_POST['d1_phone3']);
                $d1_email           = str_replace("''", "'", $_POST['d1_email']);
                $d1_contact         = str_replace("''", "'", $_POST['d1_contact']);
            } else {
                $d1_fname           = stripslashes($_POST['d1_fname']);
                $d1_lname           = stripslashes($_POST['d1_lname']);
                $d1_mname           = stripslashes($_POST['d1_mname']);
                $d1_sname           = stripslashes($_POST['d1_sname']);
                $d1_add             = stripslashes($_POST['d1_add']);
                $d1_city            = stripslashes($_POST['d1_city']);
                $d1_state           = stripslashes($_POST['d1_state']);
                $d1_zip             = stripslashes($_POST['d1_zip']);
                $d1_county          = stripslashes($_POST['d1_county']);
                $d1_phone1          = stripslashes($_POST['d1_phone1']);
                $d1_phone2          = stripslashes($_POST['d1_phone2']);
                $d1_phone3          = stripslashes($_POST['d1_phone3']);
                $d1_email           = stripslashes($_POST['d1_email']);   
                $d1_contact         = stripslashes($_POST['d1_contact']);
            }
        } else {
                $d1_fname           = $_POST['d1_fname'];
                $d1_lname           = $_POST['d1_lname'];
                $d1_mname           = $_POST['d1_mname'];
                $d1_sname           = $_POST['d1_sname'];
                $d1_city            = $_POST['d1_city'];
                $d1_state           = $_POST['d1_state'];
                $d1_zip             = $_POST['d1_zip'];
                $d1_county          = $_POST['d1_county'];
                $d1_phone1          = $_POST['d1_phone1'];
                $d1_phone2          = $_POST['d1_phone2'];
                $d1_phone3          = $_POST['d1_phone3'];
                $d1_email           = $_POST['d1_email'];
                $d1_contact         = $_POST['d1_contact'];
        }        
      }

include 'site/inc/www2-metas.php';
?>

<title>Free Motorcycle Insurance Quote - Affordable Motorcycle Insurance</title>
<meta name="description" content="Get your Free Motorcycle Insurance Quote from the Motorcycle Professionals at the MRA (Motorcycle Riders Association).  We will quote you with several different companies and get you the best rate.">
<meta name="keywords" content="Harley-Davidson, Harley Davidson, Motorcycle Motorclub, motorcycle insurance, motorcycle towing, biker, motorcycle, harley, davidson, sportbike,sportbikes,motorcycle club,motorcycle organization,motorcycle,organizations,motorcycle clubs,motorcycle association,motorcycle associations,motorcycle tour,motorcycle tours,motorcycle touring,motorcycle rider,motorcycle riders,motorcycle stuff,motorcycle event,motorcycle events,honda motorcycle,honda motorcycles,honda,bmw,bmw motorcycle,bmw motorcycles,bmw insurance,honda insurance,yamaha,yamaha motorcycle,yamaha motorcycles,yamahas,yamaha insurance,kawasaki,kawasaki motorcycle,kawasaki motorcycles,kawasaki insurance,kawasaki sportbikes,kawasaki sportbike,crotch rocket,crotch rockets,crotch rockets,rice burner,rice rocket,dirt bike,dirtbike,dirt bikes,dirtbikes,motocross,motorcross,daytona,daytona beach,bike week,bikeweek,daytona beach bikeweek,daytona beach bike week,daytona beach harley davidson,daytona beach harley-davidson,daytona beach harley,bike shop,bike shops,harley shop,harley shops,indian,indian motorcycle,indian motorcycles,boot hill,boothill,daytona boothill,daytona boot hill,daytona boot hill,boot hill saloon,froggy,froggy's,daytona froggy's,motorcycle racing,motorcycle races,motorcycle drag strip,motorcycle drags,ahdra,all harley drag racing association,aaa,triple a,roadside assistance,towing,big dog motorcycles,big dog,boss hoss,boss hoss motorcycles,suzuki,suzuki motorcyles,suzuki parts,suzuki shop,volusia,volusia motorcycle,volusia motorcycles,suzuki volusia,v-star,v star,yamaha v-star,road star,yamaha road star,v-star motorcycles,v-star motorcycle,v star motorcycle,v star motorcycles,gold wing,goldwing,honda goldwing,honda gold wing,gold wing motorcycles,gold wing motorcycle,Goldwing motorcycle,goldwing motorcycles,honda hoot,wing ding,honda wing ding,sturgis,sturgis south dakota,sturgis rally,sturgis rally and races,black hills rally,black hills south dakota,laconia,laconia races,myrtle beach bike week,myrtle beach bikeweek,myrtle beach,deal's gap,deals gap,motorcycle rally,motorcycle rallys,motorcycle show,bike show,flat track,flat track racing,arlen ness,ness,arlen ness motorcycles,jesse james,jesse james motorcycles,west coast,westcoast,westcoast choppers,west coast choppers,easy rider,ez rider,choppers,chopper,perowitz,dave perowitz,dave perowitz motorcycles,nhra drag racing,nhra motorcycle,harley pipes,harley parts,vance & hines,triumph,triumph,motorcycles,corbin,corbin seats,motorcycle safety foundation,trikes,progressive,progressive motorcycle insurance,aprilia,aprilia motorcycles,v-rod,v rod harley v rod,harley v-rod,harley davidson v rod,harley davidson v-rod,fatboy,fat boy,harley fatboy,harley fat boy,softtail,harley softtail,harley davidson softtail,heritage softtail,harley heritage softtail,harley davidson heritage softtail,vulcan,kawasaki vulcan,geico,geico direct,geico motorcycle insurance,dairyland,dairyland motorcycle insurance,road king,roadking,harley road king,harley roadking,harley davidson road king,harley davidson roadking,corbin motorcycle seats,sportster,sporty,harley sportster,harley davidson sportster,883,harley 883,harley davidson 883,harley-davidson 883,ama,american motorcycle association,speedvision,american thunder,high octane,american iron,motorcycle tour & cruiser,cyril huze,cyril huze motorcycles,bikers choice,custom chrome,chrome specialties,chrome specialties inc,drag specialties,performance machine,kuryakyn,sampson,paul yaffe originals,paul yaffe,cycle shack,buell,buell motorcycles,victory,victory motorcycles,ultra,ultra motorcycles,thunder motorcycles,white brothers,screamin' eagle,screamin' eagle parts,thunder cycle,surgical steeds,pro-one,pro-one motorcycles,pure steel,pure steel motorcycles,confederate motorcycles,exile,exile cycles,california customs,california custom motorcycles,bourget's bike works,bourget's motorcycles,boar motor company,american iron horse,v twin,j&p cycles,barnetts harley davidson,barnetts harley-davidson,motorcycle tires,harley tires,harley davidson tires,firebolt,buell firebolt,hayabusa,hayabusa motorcycles,cycle world,bsa,bsa motorcycles,norton,norton motorcycles,ktm,ktm motorcycles,motorcycle events,bike nights,bikenights,motorcycle bikenights,pastrana,travis pastrana,biketoberfest,loughlin,loughlin river run,americade,rainsuits,rain suits,classic,h-d,shadow,honda shadow,shadow motorcycle,blue ridge,blue ridge parkway,blue ridge touring,blue ridge tours,blue ridge mountains,gilleys pub,gilleys pub 44,cabbage patch,broken spoke,broken spoke saloon,excelsior,excelsior-henderson,escelsior motorcycles,ride to the wall,helmet laws,swingarm,motorcycle runs,s&s cycle,toy run,toy runs,abate,hells angels,gwrra,goldwing roadriders,association,goldwing road riders association,southern cruisers,southern cruisers motorcycle club,blue knights,blue knights motorcycle club,las vegas bike week,hollister races,dyna,dyna lowrider,dyna super glide,harley dyna super glide,harley dyna lowrider,harley dyna,harley davidson dyna,harley davidson,dyna super glide,harley davidson dyna lowrider,buell lightning,buell cyclone,american iron magazine,hot bike,hot bike magazine,v twin magazine,rolling thunder,walnecks,shovelhead,panhead,knucklehead,evo,evolution,revolution,harley shovelhead,harley panhead,harley knucklehead,harley evo,harley evolution,weanie bite,peter fonda,willie g,willie g davidson,lorenzo lamas,shaquille o'neal,jay leno,shaq,evil knievel,robbie knievel,bubba blackwell,hulk hogan,hulkster,born to ride,btr,full throttle,full throttle magazine,poker run,poker runs,handlebar,ron simms,ron simms motorcycles,helmets,motorcycle helmets,bubbs,bubbs pipes,bubbs motorcycle pipes,titan,titan motorcycles,titan motorcycle,indian chief,indian scout,hawk,honda hawk,rebel,honda rebel,tow truck,flat bed,millers,millers motorcycle parts,millers daytona,millers daytona beach">

<?php include 'site/inc/www2-css.php'; ?>
<link rel="stylesheet" href="<?php echo $linkedURL; ?>/site/quote.css" type="text/css" media="screen" />

</head>
<body>
<?php include 'site/inc/www2-header-insurance.php'; ?>
    <div id="body"> 
      <div id="quote">
        <img src="<?php echo $linkedURL; ?>/images/motorcycle-insurance-quote.jpg" alt="free motorcycle insurance quote" />
          <div class="errors">
<?php
//Check Required Information
if (!empty($_POST)) {
 echo "         <ul>\n";
    if(empty($d1_fname))    {echo "         <li>First Name Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_lname))    {echo "         <li>Last Name Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_add))      {echo "         <li>Address Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_city))     {echo "         <li>City Required</li>\n";}else{$complete = $complete + 1;}
    if($d1_state=="STATE")  {echo "         <li>State Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_zip))      {echo "         <li>Zip Code Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_county))   {echo "         <li>County Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_email))    {echo "         <li>E-Mail Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_phone1) || empty($d1_phone2) ||empty($d1_phone3))
                            {echo "         <li>Phone Number Required</li>\n";}else{$complete = $complete + 1;}
    if(empty($d1_contact))  {echo "         <li>Preferred Contact Required</li>\n";}else{$complete = $complete + 1;}

    ////////
    // Check reCAPTCHA and hook into pre existing bad system.
    $resp = recaptcha_check_answer ($recaptcha_privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

    // this is where the hook into the bad system comes into play
    if(!$resp->is_valid) { echo "           <li>The reCAPTCHA wasn't entered correctly.</li>\n"; } else { $complete += 1; }
    ////////

    if($complete==11){
    date_default_timezone_set('EST');
    $added = $updated = date('YmdHis');
    $d1_phone = $d1_phone1.'-'.$d1_phone2.'-'.$d1_phone3;
    // Connect
    include 'site/db/MCMonsterNetwork-db.php';
    $link = mysql_connect("$db_host", "$db_user", "$db_pass");

    $select = mysql_select_db("$db_name", $link);

    if(!is_resource($link)) {

        echo "Failed to connect to the server";

    } elseif(!$select) {

        echo "Failed to select database";

    }else{
        // Make a safe query
        $query = sprintf("INSERT INTO quotes 
                        (d1_contact, d1_fname, d1_mname, d1_lname, d1_sname, d1_add, d1_city, d1_state, d1_zip, d1_county, d1_email, d1_phone, added, updated) 
                VALUES  ('%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s')",
                    mysql_real_escape_string($d1_contact),
                    mysql_real_escape_string($d1_fname),
                    mysql_real_escape_string($d1_mname),
                    mysql_real_escape_string($d1_lname),
                    mysql_real_escape_string($d1_sname),
                    mysql_real_escape_string($d1_add),
                    mysql_real_escape_string($d1_city),
                    mysql_real_escape_string($d1_state),
                    mysql_real_escape_string($d1_zip),
                    mysql_real_escape_string($d1_county),
                    mysql_real_escape_string($d1_email),
                    mysql_real_escape_string($d1_phone),
                    mysql_real_escape_string($added),
                    mysql_real_escape_string($updated)
                    );

        mysql_query($query, $link);
        echo mysql_error();

    $_SESSION['id'] = mysql_insert_id();
    $_SESSION['veh'] = 1;

$message =" 
        Name: 
        $d1_fname $d1_lname

        Email:
        $d1_email

        Address:        
        $d1_add
        $d1_city, $d1_state $d1_zip

        Phone:
        $d1_phone
";

    //mail( "motorcycleriders@msn.com", "Motorcycle Insurance Quote - $d1_fname $d1_lname", $message, "From: $d1_email" ); 
    smtpmail( "motorcycleriders@msn.com", "Motorcycle Insurance Quote - $d1_fname $d1_lname", $message, "From: MyMRA.com <no-reply@mymra.com>\r\nReply-To: $d1_email\r\n" ); 

    echo '
    <script language=javascript>
    setTimeout("location.href=\''.$secureURL.'/quote/Vehicles.php\'", 0000);
    </script>

    <center><b>If You are not redirected in 5 seconds <a href="'.$secureURL.'/quote/Vehicles.php">click here</a>.</b></center>  
    ';
  } 
 }
}
?>
          </div>
        <div id="quotebar">
        <ul>
            <li class="current">Information</li>
            <li>Vehicles</li>
            <li>Drivers</li>
            <li>Incidents</li>
            <li>Additional Info</li>
            <li>Complete</li>
        </ul>
        </div><!--close quotebar-->
        <div id="quotebox">
        <form action="<?php echo $secureURL; ?>/Motorcycle_Insurance_Quote.php" method="POST">
        <table border="0" width="100%" cellspacing="0" cellpadding="2">
          <tr>
            <td>First Name</td>
            <td><input style="background-color: #FEFEB6;" style="background-color: #FEFEB6;" name="d1_fname" size="15" type="text" <?php if(!empty($d1_fname)){echo 'value="'.$d1_fname.'" ';} ?> /></td>
            <td>Middle Initial</td>
            <td><input name="d1_mname" size="1" type="text" <?php if(!empty($d1_mname)){echo 'value="'.$d1_mname.'" ';} ?> /></td>
          </tr>
          <tr>
            <td>Last Name</td>
            <td><input style="background-color: #FEFEB6;" name="d1_lname" size="20" type="text" <?php if(!empty($d1_lname)){echo 'value="'.$d1_lname.'" ';} ?> /></td>
            <td>Suffix</td>
            <td>
            <select name="d1_sname">
              <option></option>
              <option value="Jr"<?php if($d1_sname=="Jr"){echo  ' selected="selected"';} ?>>Jr</option>
              <option value="Sr"<?php if($d1_sname=="Sr"){echo  ' selected="selected"';} ?>>Sr</option>
              <option value="I"<?php if($d1_sname=="I"){echo  ' selected="selected"';} ?>>I</option>
              <option value="II"<?php if($d1_sname=="II"){echo  ' selected="selected"';} ?>>II</option>
              <option value="III"<?php if($d1_sname=="III"){echo  ' selected="selected"';} ?>>III</option>
            </select>
            </td>
          </tr>
          <tr>
            <td>Street Address</td>
            <td><input style="background-color: #FEFEB6;" name="d1_add" size="20" type="text" <?php if(!empty($d1_add)){echo 'value="'.$d1_add.'" ';} ?>/></td>
            <td>City</td>
            <td><input style="background-color: #FEFEB6;" name="d1_city" size="20" type="text" <?php if(!empty($d1_city)){echo 'value="'.$d1_city.'" ';} ?>/></td>
          </tr>
          <tr>
            <td>State</td>
            <td>
            <select style="background-color: #FEFEB6;" name="d1_state">
              <option value="STATE"<?php if($d1_state=="STATE"){echo  ' selected="selected"';} ?>>-- Select --</option>
              <option value="AL"<?php if($d1_state=="AL"){echo  ' selected="selected"';} ?>>Alabama</option>
              <option value="AZ"<?php if($d1_state=="AZ"){echo  ' selected="selected"';} ?>>Arizona</option>
              <option value="AR"<?php if($d1_state=="AR"){echo  ' selected="selected"';} ?>>Arkansas</option>
              <option value="CO"<?php if($d1_state=="CO"){echo  ' selected="selected"';} ?>>Colorado</option>
              <option value="DE"<?php if($d1_state=="DE"){echo  ' selected="selected"';} ?>>Delaware</option>
              <option value="FL"<?php if($d1_state=="FL"){echo  ' selected="selected"';} ?>>Florida</option>
              <option value="GA"<?php if($d1_state=="GA"){echo  ' selected="selected"';} ?>>Georgia</option>
              <option value="IL"<?php if($d1_state=="IL"){echo  ' selected="selected"';} ?>>Illinois</option>
              <option value="IN"<?php if($d1_state=="IN"){echo  ' selected="selected"';} ?>>Indiana</option>
              <option value="IA"<?php if($d1_state=="IA"){echo  ' selected="selected"';} ?>>Iowa</option>
              <option value="KS"<?php if($d1_state=="KS"){echo  ' selected="selected"';} ?>>Kansas</option>
              <option value="KY"<?php if($d1_state=="KY"){echo  ' selected="selected"';} ?>>Kentucky</option>
              <option value="LA"<?php if($d1_state=="LA"){echo  ' selected="selected"';} ?>>Louisiana</option>
              <option value="ME"<?php if($d1_state=="ME"){echo  ' selected="selected"';} ?>>Maine</option>
              <option value="MI"<?php if($d1_state=="MI"){echo  ' selected="selected"';} ?>>Michigan</option>
              <option value="MO"<?php if($d1_state=="MO"){echo  ' selected="selected"';} ?>>Missouri</option>
              <option value="NE"<?php if($d1_state=="NE"){echo  ' selected="selected"';} ?>>Nebraska</option>
              <option value="NV"<?php if($d1_state=="NV"){echo  ' selected="selected"';} ?>>Nevada</option>
              <option value="NJ"<?php if($d1_state=="NJ"){echo  ' selected="selected"';} ?>>New Jersey</option>
              <option value="NY"<?php if($d1_state=="NY"){echo  ' selected="selected"';} ?>>New York</option>
              <option value="NC"<?php if($d1_state=="NC"){echo  ' selected="selected"';} ?>>North Carolina</option>
              <option value="ND"<?php if($d1_state=="ND"){echo  ' selected="selected"';} ?>>North Dakota</option>
              <option value="OH"<?php if($d1_state=="OH"){echo  ' selected="selected"';} ?>>Ohio</option>
              <option value="OK"<?php if($d1_state=="OK"){echo  ' selected="selected"';} ?>>Oklahoma</option>
              <option value="OR"<?php if($d1_state=="OR"){echo  ' selected="selected"';} ?>>Oregon</option>
              <option value="PA"<?php if($d1_state=="PA"){echo  ' selected="selected"';} ?>>Pennsylvania</option>
              <option value="RI"<?php if($d1_state=="RI"){echo  ' selected="selected"';} ?>>Rhode Island</option>
              <option value="SC"<?php if($d1_state=="SC"){echo  ' selected="selected"';} ?>>South Carolina</option>
              <option value="SD"<?php if($d1_state=="SD"){echo  ' selected="selected"';} ?>>South Dakota</option>
              <option value="TN"<?php if($d1_state=="TN"){echo  ' selected="selected"';} ?>>Tennessee</option>
              <option value="TX"<?php if($d1_state=="TX"){echo  ' selected="selected"';} ?>>Texas</option>
              <option value="UT"<?php if($d1_state=="UT"){echo  ' selected="selected"';} ?>>Utah</option>
              <option value="VA"<?php if($d1_state=="VA"){echo  ' selected="selected"';} ?>>Virginia</option>
              <option value="WV"<?php if($d1_state=="WV"){echo  ' selected="selected"';} ?>>West Virginia</option>
              <option value="WI"<?php if($d1_state=="WI"){echo  ' selected="selected"';} ?>>Wisconsin</option>
            </select>
            </td>
            <td>Zip</td>
            <td><input style="background-color: #FEFEB6;" name="d1_zip" size="5" type="text" <?php if(!empty($d1_zip)){echo 'value="'.$d1_zip.'" ';} ?>/></td>
          </tr>
          <tr>
            <td>County</td>
            <td><input style="background-color: #FEFEB6;" name="d1_county" size="20" type="text" <?php if(!empty($d1_county)){echo 'value="'.$d1_county.'" ';} ?>/></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>E-Mail Address</td>
            <td><input style="background-color: #FEFEB6;" name="d1_email" size="20" type="text" <?php if(!empty($d1_email)){echo 'value="'.$d1_email.'" ';} ?>/></td>
            <td>Home Phone</td>
            <td>
            (<input style="background-color: #FEFEB6;" name="d1_phone1" size="3" type="text" maxlength="3" <?php if(!empty($d1_phone1)){echo 'value="'.$d1_phone1.'" ';} ?>/>) 
            <input style="background-color: #FEFEB6;" name="d1_phone2" size="3" type="text" maxlength="3" <?php if(!empty($d1_phone2)){echo 'value="'.$d1_phone2.'" ';} ?>/>-
            <input style="background-color: #FEFEB6;" name="d1_phone3" size="4" type="text" maxlength="4" <?php if(!empty($d1_phone3)){echo 'value="'.$d1_phone3.'" ';} ?>/>
            </td>
          </tr>
          <tr>
            <td>Preferred Contact</td>
            <td colspan="3">
              <input name="d1_contact" value="1" type="radio" <?php if($d1_contact=="1"){echo 'checked="checked" ';}?>>E-Mail
              <input name="d1_contact" value="2" type="radio" <?php if($d1_contact=="2"){echo 'checked="checked" ';}?>>Phone
              <input name="d1_contact" value="3" type="radio" <?php if($d1_contact=="3"){echo 'checked="checked" ';}?>>USPS Mail
            </td>
          </tr>
        </table>
        <hr />

        <h3>Call (866) 333-1829 for Fast Personal Service!</h3>
        <hr />

        <table border="0">
        <tr>
            <td><p>We appreciate you taking the time to submit your quote information. The MRA is an agency with several different A rated companies. We will shop the market for you to find the best rate. All the questions asked pertain to the many discounts our insurance companies offer. Should you have any questions about getting an insurance quote or would feel more comfortable talking to an agent please contact our office at <b>(866) 333-1829</b> 9:00am - 6:00pm EST Monday thru Friday.</p></td>
            <td><?php echo $siteSeal; ?></td>
        </tr>
        </table>        

        <hr />
        <p>We currently insure in the following states: Alabama, Arizona, Arkansas, Colorado, Delaware, Florida, Georgia, Illinois, Indiana, Iowa, Kansas, Kentucky, Louisiana, Maine, Michigan, Missouri, Nebraska, Nevada, New Jersey, New York, North Carolina, North Dakota, Ohio, Oklahoma, Oregon, Pennsylvania, Rhode Island, South Carolina, South Dakota, Tennessee, Texas, Utah, Virginia, West Virginia and Wisconsin.</p>
        <hr />
        <p>If you have more than 2 drivers and/or 2 vehicles and would like to get a quote with, please call our Office Toll-Free at <b>(866) 333-1829</b>.</p>
        <hr />
    <center><?php echo recaptcha_get_html($recaptcha_publickey, null, true); ?></center>
        <hr />
        <p class="center"><input name="submit" value="Continue" src="<?php echo $linkedURL; ?>/images/continue-motorcycle-quote.jpg" type="submit"></p>
        </form>
        </div><!--close quotebox-->
      </div><!--close quote-->

<?php include 'site/inc/www2-footer.php'; ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:10:28.197

改变：

```
 } else {
                $d1_fname           = $_POST['d1_fname'];
                $d1_lname           = $_POST['d1_lname'];
                $d1_mname           = $_POST['d1_mname'];
                $d1_sname           = $_POST['d1_sname'];
                $d1_city            = $_POST['d1_city'];
                $d1_state           = $_POST['d1_state'];
                $d1_zip             = $_POST['d1_zip'];
                $d1_county          = $_POST['d1_county'];
                $d1_phone1          = $_POST['d1_phone1'];
                $d1_phone2          = $_POST['d1_phone2'];
                $d1_phone3          = $_POST['d1_phone3'];
                $d1_email           = $_POST['d1_email'];
                $d1_contact         = $_POST['d1_contact'];
        } 
```

到

```
 } else {
                $d1_add             = $_POST['d1_add'];
                $d1_fname           = $_POST['d1_fname'];
                $d1_lname           = $_POST['d1_lname'];
                $d1_mname           = $_POST['d1_mname'];
                $d1_sname           = $_POST['d1_sname'];
                $d1_city            = $_POST['d1_city'];
                $d1_state           = $_POST['d1_state'];
                $d1_zip             = $_POST['d1_zip'];
                $d1_county          = $_POST['d1_county'];
                $d1_phone1          = $_POST['d1_phone1'];
                $d1_phone2          = $_POST['d1_phone2'];
                $d1_phone3          = $_POST['d1_phone3'];
                $d1_email           = $_POST['d1_email'];
                $d1_contact         = $_POST['d1_contact'];
        } 
```

在你最后的`else`声明中。问题是该值没有被赋予一个值，因此每次发布时它都会返回空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:09:40.193

您最后可能错过了以下行`else`

```
$d1_add             = $_POST['d1_add']; 
```

# c++ - MotorBee dll 和 c++，内存访问冲突

> ID：15902577
> 
> 赞同：0
> 
> 时间：2013-04-09T12:57:58.890
> 
> 标签：c++, dll

我正在尝试使用 c++ 控制 MotorBee，问题是我使用的是 MotorBee “mtb.dll”附带的 dll 文件

我正在尝试将 dll 中的函数加载到我的 C++ 程序中，如下所示：

```
#include "stdafx.h"
#include <iostream>
#include "mt.h"
#include "windows.h"
using namespace std;

HINSTANCE BeeHandle= LoadLibrary((LPCWSTR) "mtb.dll"); 
Type_InitMotoBee InitMotoBee;
Type_SetMotors SetMotors;
Type_Digital_IO Digital_IO;

int main() {
InitMotoBee = (Type_InitMotoBee)GetProcAddress( BeeHandle, " InitMotoBee");
SetMotors =(Type_SetMotors)GetProcAddress(BeeHandle, " SetMotors");
Digital_IO =(Type_Digital_IO)GetProcAddress(BeeHandle, " Digital_IO ");     InitMotoBee();
SetMotors(0, 50, 0, 0, 0, 0, 0, 0, 0);
      system("pause");
return 0;
} 
```

我收到一条错误消息，说我正在尝试读取内存中的地址 0x00000000，当我尝试计算 BeeHandle 时，它​​显示 0x0 地址（尝试检查句柄值）示例错误：

```
First-chance exception at 0x00000000 in 111111.exe: 0xC0000005: Access violation reading location 0x00000000.
First-chance exception at 0x6148f2b4 in 111111.exe: 0xC0000005: Access violation reading location 0x00000000.
First-chance exception at 0x6148f2b4 in 111111.exe: 0xC0000005: Access violation reading location 0x00000000.
First-chance exception at 0x6148f2b4 in 111111.exe: 0xC0000005: Access violation reading location 0x00000000.
First-chance exception at 0x6148f2b4 in 111111.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:04:06.127

这个演员表不正确：

```
HINSTANCE BeeHandle= LoadLibrary((LPCWSTR) "mtb.dll"); 
```

因为它将字符串文字转换为宽字符串文字。只需使用宽字符串文字：

```
HINSTANCE BeeHandle = LoadLibrary(L"mtb.dll"); 
```

*   检查结果`LoadLibrary()`：
*   `GetProcAddress()`在尝试使用返回的函数指针之前检查结果。每个字符串文字中都有一个前导空格（还有一个尾随空格，感谢 Roger 在注释中的说明）用于指定函数名称，删除它们。
*   如果其中一个`LoadLibrary()`或`GetProcAddress()`失败使用[`GetLastError()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms679360%28v=vs.85%29.aspx)来获取失败的原因。

代码摘要：

```
HINSTANCE BeeHandle = LoadLibrary(L"mtb.dll");
if (BeeHandle)
{
    SetMotors = (Type_SetMotors)GetProcAddress(BeeHandle, "SetMotors");
    if (SetMotors)
    {
        // Use 'SetMotors'.
    }
    else
    {
        std::cerr << "Failed to locate SetMotors(): " << GetLastError() << "\n";
    }
    FreeLibrary(BeeHandle);
}
else
{
    std::cerr << "Failed to load mtb.dll: " << GetLastError() << "\n";
} 
```

# c# - 建立数据库连接（静态，抽象，每个请求，...）的最佳方法是什么？

> ID：15902581
> 
> 赞同：12
> 
> 时间：2013-04-09T12:58:14.313
> 
> 标签：c#, entity-framework, design-patterns

我使用了很多模型来连接数据库，在我使用 C# 和实体框架的上一个项目中，我为数据库连接创建了静态类，但是我在打开和关闭连接时遇到了问题，因为当超过 10-15 时出现错误请求聚集在一起，我通过更改连接到数据库的方法解决了这个问题，我现在根据请求连接并删除了所有静态方法和类。

现在我想知道，

**建立连接的最佳模型是什么？**

1.  我应该在每次查询后关闭它并在使用之前打开它还是...？
2.  静态类中的连接是很好的模型（我不需要每次都创建它）？
3.  这个问题有好的设计模式吗？
4.  所有这些都是针对同一个问题 建立数据库连接的最佳方法是什么（静态、抽象、每个请求……）？

**例如**，我在一个 sms sender web 面板上工作，我应该每秒发送 100K sms，这些 sms 与其他人一起收集并制作一个包，每个包有 1~20 sms 然后我需要每秒发送 5K~100K 个包，当我发送一个包裹，我应该执行以下步骤：

1.  将单个短信更新为已送达或未送达
2.  如果交付减少用户帐户表中的用户余额，则更新用户余额
3.  更新用户表中的短信发送计数
4.  更新手机号码表中的短信发送次数
5.  更新发件人号码表中的短信发送次数
6.  更新包表中已发送和失败短信的包
7.  更新包以了解线程如何在包表中发送此包
8.  更新线程表，了解该线程发送了多少条短信以及失败了多少条
9.  在 AccountDocument 表中添加此交易的帐户凭证

所有步骤和许多其他事情，如日志、用户界面和监控小部件，都应该这样做，我需要数据库连接来完成每一个事务。

现在，连接数据库的最佳模型是什么？通过人工请求或线程请求或每个事务..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-13T06:54:49.283

回答您的问题：

1.  关闭它。.NET 在后台为您提供连接池。

2.  创造它。每次都使用 using (Connection conn = new ....) - 这样，您将充分利用 .NET 池机制。

3.  您可以使用 .NET ThreadPool（或您自己的自定义线程池），将 ThreadPool 定义为仅并行使用 10 个线程，并将工作项一个接一个地入队。这样，同一时间不会使用超过 10 个连接 + 它可能会更快地工作。更多关于自定义线程池：[自定义线程池实现](http://www.codeproject.com/Articles/31028/A-Custom-Thread-Pool-Implementation-Using-C)

4.  每个实例。

* * *

这是我对架构的建议：

1.  为待发送的 SMS 创建一个数据库表（队列）。

2.  每行将包含短信所需的所有信息+当前状态。

3.  创建一个工作进程，也许是一个 Windows 服务，它将不断地对该表进行采样 - 比如说，每 5 秒。它将选择 TOP ~20 条状态为“待发送”的短信（应表示为 int）。并将状态更新为“正在发送”

4.  每条短信都将使用 Windows 服务端的自定义线程池发送出去。

5.  在该过程结束时，所有已处理的短信状态都将使用 CTE 更新为“完成”（通用表表达式 - 您可以发送一个 cte，其中包含刚刚处理的所有短信行 ID 以进行“批量更新”到“完成”状态）。

6.  您可以使状态更新存储过程与“getpending”相同。这样，您可以选择更新而没有锁定并使数据库工作得更快。

7.  这样，您可以运行不止一个处理器服务（但随后您将不得不松开 nolock）。

记住要避免尽可能多的锁定。

顺便说一句，这也很好，因为您只需在待处理的 SMS 表中添加一行，就可以从系统中的任何位置发送 SMS。

还有一件事，我不建议为此使用实体框架，因为它在幕后发生了太多事情。完成此类任务所需的只是调用 3-4 个存储过程，仅此而已。也许看看[Dapper-dot-NET](https://code.google.com/p/dapper-dot-net/) - 它是一个非常轻量级的 MicroDal 框架，在大多数情况下比 EF（实体框架）快 10 倍以上

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-15T02:55:37.847

`1\. Should i close it after every query?`

.Net 会为你做这件事，所以让它处理它，这是一个垃圾收集器任务。所以不要费心手动处理你的对象，这是 Jon Skeet 的一个很好的答案：[https](https://stackoverflow.com/a/1998600/544283) ://stackoverflow.com/a/1998600/544283 。但是，您可以使用该`using(IDisposable){ }`语句来强制 GC 完成它的工作。这是一篇关于资源重新分配的好文章：http: [//www.codeproject.com/Articles/29534/IDisposable-What-Your-Mother-Never-Told-You-About](http://www.codeproject.com/Articles/29534/IDisposable-What-Your-Mother-Never-Told-You-About)。

`2\. A connection in static class is good?`

**永远不要**使数据上下文静态！数据上下文**不是**线程安全的或并发安全的。

`3\. Is there a good design pattern for this problem?`

正如 Belogix 提到的依赖注入和工作单元模式很棒，实际上实体框架本身**就是**一个工作单元。不过，DI 和 UoW 有点被高估了，如果这是您第一次处理 IoC 容器，那么实施起来并不容易，如果您要走这条路，我会推荐 Ninject。另一件事是，如果您不打算运行测试，您实际上并不需要 DI，这些模式的美妙之处在于解耦，因此您可以毫不费力地进行测试和模拟。

简而言之：如果您要针对您的代码运行测试，请选择这些模式。如果没有，我将为您提供一个示例，说明如何在您想要的服务之间共享您的数据上下文。这是你第四个问题的答案。

`4\. What is the best method for making database connection (static, per request)?`

您的上下文服务：

```
public class FooContextService {
    private readonly FooContext _ctx;

    public FooContext Context { get { return _ctx; } }

    public FooContextService() {
        _ctx = new FooContext();
    }
} 
```

其他服务：

```
public class UnicornService {
    private readonly FooContext _ctx;

    public UnicornService(FooContextService contextService) {
        if (contextService == null)
            throw new ArgumentNullException("contextService");

        _ctx = contextService.Context;
    }

    public ICollection<Unicorn> GetList() {
        return _ctx.Unicorns.ToList();
    }
}

public class DragonService {
    private readonly FooContext _ctx;

    public DragonService(FooContextService contextService) {
        if (contextService == null)
            throw new ArgumentNullException("contextService");

        _ctx = contextService.Context;
    }

    public ICollection<Dragon> GetList() {
        return _ctx.Dragons.ToList();
    }
} 
```

控制器：

```
public class FantasyController : Controller {
    private readonly FooContextService _contextService = new FooContextService();

    private readonly UnicornService _unicornService;
    private readonly DragonService _dragonService;

    public FantasyController() {
        _unicornService = new UnicornService(_contextService);
        _dragonService = new DragonService(_contextService);
    }

    // Controller actions
} 
```

第二个想法（几乎是一个编辑）：如果您需要您的上下文不为您的实体创建代理，因此也没有延迟加载，您可以重载您的上下文服务，如下所示：

```
public class FooContextService {
    private readonly FooContext _ctx;

    public FooContext Context { get { return _ctx; } }

    public FooContextService() : this(true) { }

    public FooContextService(bool proxyCreationEnabled) {
        _ctx = new FooContext();
        _ctx.Configuration.ProxyCreationEnabled = proxyCreationEnabled;
    }
} 
```

笔记：

*   如果您将启用代理创建设置为 false，您将**不会**有开箱即用的延迟加载。
*   如果你有 api 控制器，你**不想**处理任何完整的对象图。

编辑：

先读一些：

*   此链接与 EF6 的预发布版本相关：[实体框架和异步](http://msdn.microsoft.com/en-us/data/jj819165.aspx)。
*   Scott Allen 在他的博客中发布了这一点：[实体框架 6.0 中的异步](http://odetocode.com/blogs/scott/archive/2012/08/28/async-in-entity-framework-6-0.aspx)。
*   如果您要使用工作单元，我建议您阅读以下内容：[使用 UnitOfWorkScope 制作 DbContext Ambient](http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/)。
*   [Darin Dimitrov](https://stackoverflow.com/a/8744096/544283)对[Do asynchronous operations in ASP.NET MVC use a thread from ThreadPool on .NET 4](https://stackoverflow.com/questions/8743067/do-asynchronous-operations-in-asp-net-mvc-use-a-thread-from-threadpool-on-net-4)的回答。

完成这个：

```
(_context as IObjectContextAdapter).ObjectContext.Connection.Open(); 
```

这是一篇关于[管理连接和事务](http://msdn.microsoft.com/en-us/library/bb896325.aspx)的好文章。

实体框架通过 Connection 属性公开 EntityConnection。读作：`public sealed class EntityConnection : DbConnection`。

管理连接的注意事项：（取自上一个链接）

*   如果在操作之前对象上下文尚未打开，则对象上下文将打开连接。如果对象上下文在操作期间打开了连接，那么它总是会在操作完成时关闭连接。
*   如果手动打开连接，对象上下文不会关闭它。调用**Close**或**Dispose**将关闭连接。
*   如果对象上下文创建了连接，则在释放上下文时始终会释放连接。
*   在长时间运行的对象上下文中，您必须确保在不再需要上下文时将其释放。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T12:59:28.383

我认为每个请求的规模最好。使用线程安全的连接池，并使连接范围与工作单元一致。让负责事务行为和工作单元的服务检查连接，使用它，并在工作单元提交或回滚时将其返回到池中。

更新：

10-12 秒提交状态更新？你做错了什么。您所写的问题不足以提供合适的答案。

[纳斯达克的每日交易量](http://www.phlx.com/Trader.aspx?id=DailyMarketSummary)为 1.3B 笔交易，每天 8 小时的交易量约为每秒 45K 笔交易。您的交易量是纳斯达克交易量的 2 倍。如果你想用一台机器来做，我会说纳斯达克正在使用不止一台服务器。

我还想知道您是否可以不使用 ACID 更新该状态。毕竟，[星巴克不使用两阶段提交](http://www.eaipatterns.com/ramblings/18_starbucks.html)。也许更好的解决方案是使用带有阻塞队列的生产者/消费者模式来在发送这些状态后更新这些状态。

# c# - 在类中创建通用对象

> ID：15902584
> 
> 赞同：0
> 
> 时间：2013-04-09T12:58:18.730
> 
> 标签：c#, generics

我正在制作一个可以派生其他类的基类。

```
public class BaseClass<T> where T
{
    public BaseClass()
    {
        TClassObject = new T("SomeText"); // Error here
    }

    public T TClassObject { get; set; }
} 
```

“T”：创建变量类型的实例时无法提供参数。

我在这里缺少什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:59:37.573

来自 MSDN：

> 新约束指定泛型类声明中的任何类型参数都必须具有公共无参数构造函数。

所以它需要是无参数的。你可能想看看`Activator.CreateInstance`

[http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:04:22.660

`where T : new()`约束状态`T`必须有一个无*参数*的构造函数。您的代码正在调用带有字符串参数的构造函数，并且不能保证您`T`将拥有这样的构造函数。

在 C# 中不可能对特定的构造函数签名创建约束。如果您需要此功能，最好使用类似此[线程](https://stackoverflow.com/questions/840261/passing-arguments-to-c-sharp-generic-new-of-templated-type)中的答案之一的内容。

# erlang - 钩子没有在 ejabberd 中被调用

> ID：15902591
> 
> 赞同：1
> 
> 时间：2013-04-09T12:58:27.737
> 
> 标签：erlang, ejabberd

我遇到的问题是我定义的钩子没有被事件“user_send_packet”调用。我确实假设正在发送的任何节（包括消息）都会触发此事件。

我已经通过将钩子设置为“0”来考虑如何调用钩子的优先级。在日志中，我已验证模块已启动（“mod_stanza_ack 启动”）。erl 文件确实编译了，它只收到警告“gen_mod”未定义，但我在 ejabberd 邮件列表上读到这是无害的，并且变量“Host”在第 12 行中未使用。也许这有关系有了它，但我无法确定是否是这种情况。

```
-module(mod_stanza_ack).
-behaviour(gen_mod).

-include("ejabberd.hrl").

-export([start/2,
         stop/1]).

-export([on_user_send_packet/3]).

start(Host, _Opts) ->
    ?INFO_MSG("mod_stanza_ack starting", []),
    ejabberd_hooks:add(user_send_packet, global, ?MODULE, on_user_send_packet, 0),
    ok.

stop(Host) ->
    ?INFO_MSG("mod_stanza_ack stopping", []),
    ejabberd_hooks:delete(user_send_packet, global, ?MODULE, on_user_send_packet, 0),
    ok.

on_user_send_packet(From, To, Packet) ->
    ?INFO_MSG("mod_stanza_ack a package has been sent coming from: ~p", [From]),
    ?INFO_MSG("mod_stanza_ack a package has been sent to: ~p", [To]),
    ?INFO_MSG("mod_stanza_ack a package has been sent with the following packet: ~p",     [Packet]),
    Packet. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:09:42.157

语法看起来不错，并且您对钩子和编译警告有正确的假设。您使用哪个版本的 ejabberd？

“全局”处理似乎存在错误/混乱。

运行 user_send_packet 的 ejabberd_c2s 以 Host 作为范围运行它。范围的实现非常幼稚，并且“全局”回调未连接到主机挂钩下。

在我的 2.1.6 中仍然存在“错误”行为，我可以重现您的情况。要修复它，请添加带有主机的钩子，而不是“全局”关键字。

# c# - access文件表和sql server表的关系

> ID：15902593
> 
> 赞同：1
> 
> 时间：2013-04-09T12:58:39.680
> 
> 标签：c#, sql, winforms

此代码从 Access 文件 (.mdb) 中读取表信息并将表信息复制到 sql server 表中。此代码`field1`将 Access 文件复制到`field1`sql server 表中并复制`field2`到`field2`...此代码正常工作，但我想要更改副本。我想将`name`Access 文件中的`nameperson`字段复制到 sql server 表中的字段。例如复制到sql server 表`field1`中的访问权限。`field5`我该怎么做呢？

```
 OpenFileDialog openfiledialog1 = new OpenFileDialog();
     openfiledialog1.Title = "select path access file";

        openfiledialog1.Filter = "Access 2003 (*.mdb)|*.mdb";
        if (openfiledialog1.ShowDialog() == DialogResult.OK)
        {

            string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + openfiledialog1.FileName;
            const string connectionStringDest = @"server=ahmad-pc\anfd;database = phonebook;Integrated Security = true";
            using (var sourceConnection = new OleDbConnection(connectionString))
            {
                sourceConnection.Open();

                var commandSourceData = new OleDbCommand("SELECT id , name , family from numberperson", sourceConnection);
                var reader = commandSourceData.ExecuteReader();

                using (var destinationConnection = new SqlConnection(connectionStringDest))
                {
                    destinationConnection.Open();

                    using (var bulkCopy = new SqlBulkCopy(destinationConnection))
                    {
                        bulkCopy.DestinationTableName = "profile2";

                        try
                        {
                            bulkCopy.WriteToServer(reader);
                        }
                        catch (Exception ex)
                        {
                            Console.WriteLine(ex.Message);
                        }
                        finally
                        {
                            reader.Close();
                        }
                    }
                }
                MessageBox.Show("copy successully");
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:05:50.313

请参见下面的示例，我添加了一个映射，用于将列名转换为 nameperson

```
[...]
using (var bulkCopy = new SqlBulkCopy(destinationConnection))
{             
 bulkCopy.ColumnMappings.Add("name", "nameperson"); //THIS A MAPPING REPLACE IT WITH YOUR NEED
 bulkCopy.DestinationTableName = "profile2";
[....] 
```

# python - MRJOB 打开 JSON 文件 - Python

> ID：15902595
> 
> 赞同：1
> 
> 时间：2013-04-09T12:58:44.497
> 
> 标签：python, mrjob

我正在尝试加载一个 json 文件作为映射器函数的一部分，但它返回“目录中没有此类文件”，尽管该文件存在。

我已经打开一个文件并解析它的行。但是想将它的一些值与第二个 JSON 文件进行比较。

```
from mrjob.job import MRJob
import json
import nltk
import re    

WORD_RE = re.compile(r"\b[\w']+\b")
sentimentfile = open('sentiment_word_list_stemmed.json') 

def mapper(self, _, line):
    stemmer = nltk.PorterStemmer()
    stems = json.loads(sentimentfile)

    line = line.strip()
    # each line is a json line
    data = json.loads(line)
    form = data.get('type', None)

    if form == 'review':
      bs_id = data.get('business_id', None)
      text = data['text']
      stars = data['stars']

      words = WORD_RE.findall(text)
      for word in words:
        w = stemmer.stem(word)
        senti = stems.get[w]

        if senti:
          yield (bs_id, (senti, 1)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:57:30.590

您根本不应该在映射器函数中打开文件。您只需要将文件作为 STDIN 或作为映射器获取它的第一个参数传递。像这样做：

```
python mrjob_program.py sentiment_word_list_stemmed.json > output 
```

或者

```
python mrjob_program.py < sentiment_word_list_stemmed.json > output 
```

任何一个都可以。它说没有这样的文件或目录，因为这些映射器无法看到您指定的文件。映射器设计为在远程机器上运行。即使您想从映射器中的文件中读取数据，您也需要将要传递的文件复制到集群中的所有机器，这对于本示例来说并没有什么意义。您实际上可以指定 DEFAULT_INPUT_PROTOCOL 以便映射器也知道您正在使用哪种类型的输入。

这是一个关于这个主题的谈话，这将有所帮助：

[http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-mrjob-distributed-computing-for-everyone-4898987/](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-mrjob-distributed-computing-for-everyone-4898987/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:01:29.030

您正在使用该`json.loads()`函数，同时传入一个打开的文件。改为使用`json.load()`（注意，否`s`）。

```
stems = json.load(sentimentfile) 
```

每次调用函数时都需要*重新打开*文件，最好只全局存储*文件名：*`mapper()`

 *```
sentimentfile = 'sentiment_word_list_stemmed.json'

def mapper(self, _, line):
    stemmer = nltk.PorterStemmer()
    stems = json.load(open(sentimentfile)) 
```

最后但同样重要的是，您应该使用文件名的*绝对*路径，而不是依赖当前工作目录是否正确。*

# java - JComboBox 未从 Hashtable 和 ArrayList 填充

> ID：15902597
> 
> 赞同：0
> 
> 时间：2013-04-09T12:58:51.330
> 
> 标签：java, swing, arraylist, hashtable, jcombobox

我正在创建一个 Fruit and Vedg 应用程序，允许用户从下拉框中进行选择。如果我使用 String[] 而不是 ArrayList，我的JComboBox *subComboBox将填充。*我可以查看任何想法或文件吗？使用下面的代码*subComboBox*是空的。

```
public class FruitAndVedg extends JFrame implements ActionListener, ItemListener {

private static final long serialVersionUID = 4L;
private JComboBox mainComboBox;
private JComboBox subComboBox;
private ArrayList item;
private Hashtable<ArrayList<Object>, Object> subItems = new Hashtable<>();

public FruitAndVedg() {
    item = new ArrayList();
    item.add("Select Item");
    item.add("Fruit");
    item.add("Vedg");

    mainComboBox = new JComboBox(item.toArray());
    mainComboBox.addActionListener(this);
    mainComboBox.addItemListener(this);
    getContentPane().add(mainComboBox, BorderLayout.WEST);

    subComboBox = new JComboBox();
    subComboBox.setPrototypeDisplayValue("XXXXXXXXXX");

    getContentPane().add(subComboBox, BorderLayout.CENTER);
    String[] subItems1 = {"Select Fruit", "Apple", "Plum"};
    subItems.put(item, subItems1);

    String[] subItems2 = {"Select Vedg", "Carrot", "Peas"};
    subItems.put(item, subItems2);
}

@Override
public void actionPerformed(ActionEvent ae) {
    String item = (String) mainComboBox.getSelectedItem();
    Object o = subItems.get(item);
    if (o == null) {
        subComboBox.setModel(new DefaultComboBoxModel());
    } else {
        subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
    }
}

@Override
public void itemStateChanged(ItemEvent ie) {
    if (ie.getStateChange() == ItemEvent.SELECTED) {
        if (ie.getSource() == mainComboBox) {
            if (mainComboBox.getSelectedIndex() != 0) {
            }
        }
    }
}

  public static void main(String[] args) {
    JFrame frame = new FruitAndVedg();
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}
} 
```

未报告错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:11:13.000

> 如果我使用 String[] 而不是 ArrayList，我的 JComboBox subComboBox 将填充。

默认的 ComboBoxModel 不支持 ArrayList。

您可以使用向量。

如果您真的想使用 ArrayList，那么您需要创建一个自定义模型。或者创建一个循环，一次将 ArrayList 中的项目添加到模型中。创建自定义模型并不难，只需复制 DefaultComboBoxModel 的代码并将代码更改为使用 List 而不是 Vector。

# c - 除以 2 的幂得到浮点数

> ID：15902603
> 
> 赞同：4
> 
> 时间：2013-04-09T12:59:08.837
> 
> 标签：c, floating-point, bit-manipulation

我发现自己需要计算 16 位无符号整数除以 2 的幂，这应该导致 32 位浮点数（标准 IEEE 格式）。这是在嵌入式系统上，并且该例程被重复使用，所以我正在寻找比`(float)x/(float)(1<<n)`. 此外，C 编译器非常有限（没有数学库、位域、reinterpret_cast 等）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:09:44.663

如果您不介意一些旋转，那么显而易见的方法是将整数转换为浮点数，然后从指数位中减去 n 以实现除以 2^n：

```
y = (float)x;                          // convert to float
uint32_t yi = *(uint32_t *)&y);        // get float value as bits
uint32_t exponent = yi & 0x7f800000;   // extract exponent bits 30..23
exponent -= (n << 23);                 // subtract n from exponent
yi = yi & ~0x7f800000 | exponent;      // insert modified exponent back into bits 30..23
y = *(float *)&yi;                     // copy bits back to float 
```

请注意，对于 x = 0，这将失败，因此您应该在转换前检查 x > 0。

总成本是一次 int-float 转换加上少量整数位/算术运算。如果您使用联合，则可以避免使用单独的 int/float 表示，而直接在 float 上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:55:41.643

使用`ldexpf(x, -n)`. 这个函数是由 C 标准定义的，可以**完全按照**您的意愿执行，返回*x* •2 ^(-n)，因此任何体面的编译器都会为此提供良好的代码。（这需要数学库的一部分或将其优化为内联代码的编译器。）

如果`n`在编译时已知，也可以考虑`x * (1.f/(1<<n))`. 一个好的编译器会`(1.f/(1<<n))`在编译时进行计算，因此可执行代码将是两个操作：转换`x`为`float`常量并乘以常量。`ldexpf(x, -n)`如果编译器没有`ldexpf(x, -n)`像它可能的那样优化，这可能比生成的代码要快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:59:19.760

一个快速而简单的解决方案是预先计算一个浮点值 2 ^(-n)的表格`n >= 0`（上限是`n`多少，大约 31？），然后乘以表格`x`的第 n^个元素。

如果您的代码模拟浮点乘法，这可能不是最快的，因为 CPU 不直接支持它。

但是，您可以只使用整数数学更快地完成它。

示例（假设 IEEE-754 32 位浮点数）：

```
#include <limits.h>
#include <string.h>
#include <stdio.h>

#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]

C_ASSERT(CHAR_BIT == 8);
C_ASSERT(sizeof(float) == 4);
C_ASSERT(sizeof(int) == 4);

float div(int x, unsigned n)
{
  float res;
  unsigned e = 0;
  unsigned sign = x < 0;
  unsigned m = sign ? -x : x;  

  if (m)
  {
    while (m >= (1u << 24))
      m >>= 1, e++;

    while (m < (1u << 23))
      m <<= 1, e--;

    e += 0x7F + 23;

    e -= n; // divide by 1<<n

    m ^= 1u << 23; // reset the implicit 1

    m |= (e & 0xFF) << 23; // mix in the exponent

    m |= sign << 31; // mix in the sign
  }

  memcpy(&res, &m, sizeof m);

  return res;
}

void Print4Bytes(unsigned char buf[4])
{
  printf("%02X%02X%02X%02X ", buf[3], buf[2], buf[1], buf[0]);
}

int main(void)
{
  int x = 0x35AA53;
  int n;
  for (n = 0; n < 31; n++)
  {
    float v1 = (float)x/(1u << n);
    float v2 = div(x, n);
    Print4Bytes((void*)&v1);
    printf("%c= ", "!="[memcmp(&v1, &v2, sizeof v1) == 0]);
    Print4Bytes((void*)&v2);
    printf("%14.6f %14.6f\n", v1, v2);
  }
  return 0;
} 
```

输出（[ideone](http://ideone.com/YVLU25)）：

```
4A56A94C == 4A56A94C 3517011.000000 3517011.000000
49D6A94C == 49D6A94C 1758505.500000 1758505.500000
4956A94C == 4956A94C  879252.750000  879252.750000
48D6A94C == 48D6A94C  439626.375000  439626.375000
4856A94C == 4856A94C  219813.187500  219813.187500
47D6A94C == 47D6A94C  109906.593750  109906.593750
4756A94C == 4756A94C   54953.296875   54953.296875
46D6A94C == 46D6A94C   27476.648438   27476.648438
4656A94C == 4656A94C   13738.324219   13738.324219
45D6A94C == 45D6A94C    6869.162109    6869.162109
4556A94C == 4556A94C    3434.581055    3434.581055
44D6A94C == 44D6A94C    1717.290527    1717.290527
4456A94C == 4456A94C     858.645264     858.645264
43D6A94C == 43D6A94C     429.322632     429.322632
4356A94C == 4356A94C     214.661316     214.661316
42D6A94C == 42D6A94C     107.330658     107.330658
4256A94C == 4256A94C      53.665329      53.665329
41D6A94C == 41D6A94C      26.832664      26.832664
4156A94C == 4156A94C      13.416332      13.416332
40D6A94C == 40D6A94C       6.708166       6.708166
4056A94C == 4056A94C       3.354083       3.354083
3FD6A94C == 3FD6A94C       1.677042       1.677042
3F56A94C == 3F56A94C       0.838521       0.838521
3ED6A94C == 3ED6A94C       0.419260       0.419260
3E56A94C == 3E56A94C       0.209630       0.209630
3DD6A94C == 3DD6A94C       0.104815       0.104815
3D56A94C == 3D56A94C       0.052408       0.052408
3CD6A94C == 3CD6A94C       0.026204       0.026204
3C56A94C == 3C56A94C       0.013102       0.013102
3BD6A94C == 3BD6A94C       0.006551       0.006551
3B56A94C == 3B56A94C       0.003275       0.003275 
```

# javascript - 在 chrome 上禁用输入（类型提交）时输入触发器表单提交

> ID：15902606
> 
> 赞同：1
> 
> 时间：2013-04-09T12:59:18.053
> 
> 标签：javascript, html, forms, form-submit

最近我偶然发现了浏览器之间的另一个不一致。
在 Chrome 上，在禁用提交按钮的表单中，按 Enter（在文本输入中）将触发提交。我创建了这个简单的页面作为示例：http: [//jsfiddle.net/andreitudor/s6EDX/1/](http://jsfiddle.net/andreitudor/s6EDX/1/)

```
<form id="test" onSubmit="testForm()" >
    <input type="text">
    <input type="submit" disabled="disabled" >
</form> 
```

这也发生在 IE9 上（没关系），但它不会发生在 Firefox 和 Opera 上。

我认为这是 Chrome 中的一个错误，但我可能错了。这种行为可能非常令人沮丧。假设我们有一个输入要在提交之前验证（例如电子邮件地址）。作为此问题的解决方法，我们必须将验证逻辑移至 onSubmit 函数。

那么，这是一个错误吗？而我们如何才能以一种简单而优雅的方式超越它呢？也许 jQuery 对此有修复？！

# python - 调用基类方法的问题

> ID：15902608
> 
> 赞同：0
> 
> 时间：2013-04-09T12:59:21.717
> 
> 标签：python, python-3.x

我是 Python 的新手。我知道这个问题没用。但我对我的问题感到沮丧。我在基类中定义了 2 个方法`Animals`。当我尝试在继承的类中调用基方法时，它显示以下错误： `NameError: name 'display_name' is not defined`

```
class Animals():
    def display_name(self):
        print ('Name is Mr.X')        
    def display_age(self):
        print('Age is 25')    
class Name(Animals):
    display_name(self)
class Age(Animals):
    display_age(self)

n=Name()
a=Age()
n.display_name()
a.display_age() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:01:28.823

您需要`display_name`使用前缀引用函数，而不是作为参数`self`传递。`self`

此外，正如 Antimony 所指出的，您需要在`display_name`与类实例关联的函数内调用 from（在接受`self`参数的函数内）。

出现在方法函数外部但在类内部的代码与整个类相关联，而不与该类的任何特定实例相关联——`self`在这种情况下使用变量没有意义——如果你从它所引用的类创建多个对象到？

```
class Animals():
    def display_name(self):
        print ('Name is Mr.X')

    def display_age(self):
        print('Age is 25')    

class Name(Animals):
    def call_display_name(self):
        self.display_name()

class Age(Animals):
    def call_display_name(self):
        self.display_age()

Name().call_display_name() 
```

# iphone - 统一禁用 iPhone 4 的视网膜

> ID：15902610
> 
> 赞同：2
> 
> 时间：2013-04-09T12:59:26.827
> 
> 标签：iphone, ios, opengl-es, screen, unity3d

我们使用 Unity（基本版）为 iOS 开发应用程序。
在 iPhone 4 上，我们的 fps 很低。
我们想在 iPhone 4 上使用非视网膜 320*480 的屏幕尺寸（和渲染缓冲区 320*480）。
我们认为这将提高 iPhone 4 的性能。
我们知道如何通过代码在 iOS 应用程序中执行此操作（例如此处显示的[openGL ES Retina support](https://stackoverflow.com/questions/4504614/opengl-es-retina-support)）。
我们如何通过 Unity 做到这一点？
有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:06:23.493

打开 Unity3d 并进入 iOS 的播放器设置：

*   iOS 设置 > 其他设置 > 目标分辨率 > 选择 320(iPhone)。
*   如果您的应用未使用加速度计，则禁用加速度计频率。
*   同样在优化中：脚本调用优化 = 快速但没有例外。

# reporting-services - 如何在 ssrs 的查询设计器中进行此 mdx 查询？

> ID：15902628
> 
> 赞同：1
> 
> 时间：2013-04-09T13:00:00.140
> 
> 标签：reporting-services, ssrs-2008, ssms, mdx, query-designer

我有这个查询，我可以在 SSMS 中毫无问题地执行它，它按降序显示。

```
with 
member [Measures].[YTD Sales] as
[Measures].[Invoiced_Am]

select [Measures].[YTD Sales] on columns,
order([01 Customer].[Customer_Nm].[Customer_Nm],
[Measures].[YTD Sales], desc) on rows       

from [VismaBusinessLogistics_cube] 
```

如何在 SSRS 的查询设计器中对结果进行排序？我不能在那里创建一个 select - 子句。如果我使用 order 函数尝试此操作，它只会在创建计算成员的外部浏览窗口中显示空值：

```
order([01 Customer].[Customer_Nm].[Customer_Nm],
[Measures].[YTD Sales], desc) 
```

# svn - 升级 Drupal 后如何提交？

> ID：15902630
> 
> 赞同：0
> 
> 时间：2013-04-09T13:00:01.463
> 
> 标签：svn, drupal

升级 Drupal 后如何提交更改？它实际上是一个替换旧 Drupal 站点的新文件夹。

我不确定我的做法是否正确。因为它是一个全新的文件夹，所以我将存储库中的旧主干文件移动到一个新标签并重新导入新升级的 Drupal 作为主干。

我丢失了旧工作副本的所有 svn 日志。（在后备箱中，我认为它们现在在标签中）

我应该如何在工作副本上进行 Drupal 升级并仍然保持版本控制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:03:52.387

我的过程是通过命令行使用[drush来更新 Drupal 核心。](http://drupal.org/project/drush)Drush 有 svn 集成，这使得这很容易做到。无需将现有的后备箱移开并重新创建它（正如您所发现的那样，这是有问题的）。

在您的工作副本中，运行以下 drush 命令：

```
drush up drupal --svnsync 
```

这会将最新的 Drupal 核心下载到您的工作副本中。将`svn add`编辑新版本中添加的文件。在新版本中删除的文件将同样被`svn rm`编辑。

我遇到的一个问题是新的 Drupal 版本的 tarball 有时被 svn 标记为“丢失”，因为它已被`add`编辑，但不再存在（因为 Drush 删除了它）。解决方案很简单 - 只需还原该文件：

```
svn revert drupal-[version].tar.gz 
```

毕竟，像往常一样提交，你应该更新到最新的 Drupal 核心。要更新模块，您可以再次使用 drush，如下所示：

```
drush up --svnsync 
```

像以前一样提交更改。现在 Drupal 核心和您的第三方模块都应该是最新的。

此过程应在本地开发站点上完成。它将升级您的数据库以及代码。当您推送到生产环境时，您需要在执行正常的 svn 更新/切换后升级其数据库。这可以使用 Drupal 的 upgrade.php 或使用 drush 来完成：

```
drush updatedb 
```

# multithreading - 在 C#NET 中将数据从多个线程发送到主窗体

> ID：15902633
> 
> 赞同：0
> 
> 时间：2013-04-09T13:00:06.320
> 
> 标签：multithreading, events, delegates

我有多个 IP 设备连接到我的计算机。每个设备都使用单独的线程连接。使用类实例为每个线程分配一个函数，并使用套接字编程进行通信。所有设备都独立地向 PC 软件发送数据。现在我必须将此数据发送到我的主窗体（其他类）以显示。怎么做 ？？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:06:53.093

One approach is to have an object that all threads (including the main) know and in which you can put the received data. The main thread/form just needs to read it from time to time. You need to take care of lock/unlock this object before you write/read it.

[http://msdn.microsoft.com/en-us/magazine/cc163744.aspx](http://msdn.microsoft.com/en-us/magazine/cc163744.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:04:02.063

我建议您将回调函数（从您的主表单）传递给每个实例。然后，您可以为每个线程分配一些 ID，并在调用此回调时将此线程 ID 与数据一起传递，以便您可以区分它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:43:28.453

可以这样做：

线程类： 1\. 声明一个委托 --- public delegate void UPDATEVALUE(o_sender, string value); 2.声明一个委托类型的事件-----公共事件UPDATEVALUE更新；3\. 在我收到数据的任何地方引发此事件 ------ update(this, value);

主类：

1.  为我正在创建的每个线程添加事件——Threadclass tc = new Threadclass(); tc.update += 新 Threadclass.UPDATEVALUE(DisplayValue)

其中 DisplayValue 是 MainClass 中用于显示更新值的函数。

# android - 当我更改语言环境时，整个主题都会更改

> ID：15902634
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:00:12.220
> 
> 标签：android, android-layout

这太奇怪了。

最好的方法是给你看一张图片：

![在此处输入图像描述](https://i.stack.imgur.com/dQYI7.png)

我没有设置任何主题或类似的东西，所以应该使用默认的...

任何的想法？

编辑：**这是同一个设备！**安卓 4.2 模拟器。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="es.triiui.myapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="es.triiui.myapp.Activity_EditDetails"
        android:label="@string/title_activity_activity__edit_details" >
    </activity>
    <activity
        android:name="es.triiui.myapp.AddNewEntry"
        android:label="@string/title_activity_add_new_entry" >
    </activity>
    <activity
        android:name="es.triiui.myapp.ShowDetails"
        android:label="@string/title_activity_show_details" >
    </activity>
    <activity
        android:name="es.triiui.myapp.Setpassword"
        android:label="@string/title_activity_setpassword" >
    </activity>
</application> 
```

(values/styles.xml) 是：

```
<resources>
<style name="AppBaseTheme" parent="android:Theme.Light">
</style>

<style name="AppTheme" parent="AppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>
</resources> 
```

(values-ca/styles.xml) 是：

```
<resources>
<style name="AppBaseTheme" parent="android:Theme.Light">
</style>
<style name="AppTheme" parent="AppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style>

</resources> 
```

两者完全相同。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:24:18.617

> 我没有设置任何主题或类似的东西，所以应该使用默认的...

从以下文档`android:theme`：

> `<application>`如果未设置此属性，则活动从元素的主题属性继承整个应用程序的主题集。如果该属性也未设置，则使用默认系统主题

因此，由于您没有指定主题，它将使用 devicedefault 主题，因此左侧设备使用 holo 主题，右侧设备使用 pre HC 主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:14:06.177

您发布的那些 XML 资源是错误的。

通常，主题会进入`themes.xml`（但这不重要，因为它们只是一种样式），但更重要的是，您没有结束`</resources>`标记（复制/粘贴错误？），也没有命名空间定义（`xlmns`属性 on `<resources>`）。

这两个都应该触发 AAPT 错误（肯定是缺少关闭标记，命名空间，我不确定 - 它肯定会触发 Android Lint 错误！）。

尝试删除`values-ca/styles.xml`文件。它将默认为`values/styles.xml`，您不应该看到任何视觉变化。

# php - Mysql 查询失败，但我没有收到特定错误

> ID：15902640
> 
> 赞同：0
> 
> 时间：2013-04-09T13:00:33.400
> 
> 标签：php, mysqli

这里正在发生一些非常奇怪的事情。我有这个方法用于 mysqli 查询。

```
 public function select($options) {
    $default = array (
        'table' => '',
        'fields' => '*',
        'condition' => '2',
        'order' => '1',
        'limit' => 50
    );
    $options = array_merge($default,$options);
    $query = "SELECT {$options['fields']} FROM {$options['table']} WHERE {$options['condition']} ORDER BY {$options['order']} LIMIT {$options['limit']}";
    if ($result = $this->conn->query($query)) {
        while ($row = $result->fetch_assoc()) {
            $rows[] = $row;
        }
        return $rows;
    } else {
        printf("Query failed: %s\n", $mysqli->error);
        exit;
    }
} 
```

一旦查询被执行，我就会得到 $rows ，一切都像魅力一样。但是当我尝试获取数组中的特定键时，我得到“查询失败：”而没有特定消息：S

```
$options = array(
        'table' => 'settings',
        'fields' => 'setting_wall_post,setting_status_tag,setting_photo,setting_like,setting_comment',
        'limit' => '1',
        'condition' => "setting_id = 6",
    );
    $check = $this->mysql->select($options);    
    print_r($check);
    $check = $check[0];

    if($check["setting_wall_post"]) //if I comment out this IF block it works :(
        $this->scope["wall_post"] = "publish_stream"; 
```

我也尝试关闭 mysqli 连接，然后我得到

```
Warning: mysqli::query() [mysqli.query]: Couldn't fetch mysqli 
```

这个 IF 块的行为就像它与 mysqli 一起工作：S

所以问题是，这里的问题是什么？为什么我无法访问“setting_wall_post”？我想这部分是问题所在，因为如果我注释掉那个 IF 块，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:11:04.877

编辑。我多么愚蠢，忽略了这样一个错字：`$this->conn`必须使用而不是 undefined `$mysqli`。

## 这就是为什么一个人应该总是有不少于 E_ALL 的错误报告

您发布的代码不会导致这种错误。
将您的错误报告代码更改为此

```
} else {
    throw new Exception($this->conn->error);
} 
```

这样，您将有一个堆栈跟踪，它将显示调用链，指向导致特定错误的代码位置。

顺便说一句，整个功能对我来说看起来不可用且容易出错。它对注入开放，并且需要比传统 SQL 更多的代码

# c# - 如何记录异步方法的异常？

> ID：15902645
> 
> 赞同：16
> 
> 时间：2013-04-09T13:00:48.940
> 
> 标签：c#, .net, asynchronous, documentation

带有 XML 文档的示例方法：

```
// summary and param tags are here when you're not looking.
/// <exception cref="ArgumentNullException>
///    <paramref name="text" /> is null.
/// </exception>
public void Write(string text)
{
    if (text == null)
        throw new ArgumentNullException("text", "Text must not be null.");

    // sync stuff...
} 
```

`Write(null)`按预期抛出异常。这是一个异步方法：

```
public async Task WriteAsync(string text)
{
    if (text == null)
        throw new ArgumentNullException("text", "Text must not be null.");

    // async stuff...
} 
```

`WriteAsync(null)`, 在等待之前不会抛出异常。我应该`ArgumentNullException`在`exception`标签中指定吗？我认为这会让消费者认为调用`WriteAsync`可能会抛出一个`ArgumentNullException`并写下这样的东西：

```
Task t;
try
{
    t = foo.WriteAsync(text);
}
catch (ArgumentNullException)
{
    // handling stuff.
} 
```

在异步方法中记录异常的最佳实践是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T13:07:23.233

不是*直接*的答案，但我个人建议在这里倾向于快速失败；这可能意味着编写 2 种方法：

```
public Task WriteAsync(string text) // no "async"
{
    // validation
    if (text == null)
        throw new ArgumentNullException("text", "Text must not be null.");

    return WriteAsyncImpl(text);
}
private async Task WriteAsyncImpl(string text)
{
    // async stuff...
} 
```

这种模式也是添加“快速路径”代码的理想场所，例如：

```
public Task WriteAsync(string text) // no "async"
{
    // validation
    if (text == null)
        throw new ArgumentNullException("text", "Text must not be null.");

    if (some condition)
        return Task.FromResult(0); // or similar; also returning a pre-existing
                                   // Task instance can be useful

    return WriteAsyncImpl(text);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:05:29.817

微软似乎没有区分`async`抛出异常的方法和返回`Task`的异常存储在其`Exception`属性中的方法。例如：

[`WebClient.DownloadFileTaskAsync(string, string)`](http://msdn.microsoft.com/en-us/library/hh159424.aspx)

就个人而言，我会选择将异常记录为返回值（即返回的`Task`）文档的一部分，因为这种区别可能对客户很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-15T09:43:30.957

我建议保留异常标签，因为它们出现在 Intellisense 中。

力求简洁，我不会提及异常是否快速失败，只要这遵循直觉。也就是说，健全性检查应该快速失败，而执行期间的失败则不应该。如果您必须偏离此规则，请记录下来。

请注意，更改异常是同步抛出（快速失败）还是等待时可能会破坏客户代码。

# php - 在 POST 的回显值中出现错误

> ID：15902651
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:01:03.817
> 
> 标签：php

这就是我的代码，所有`<input>`标签的问题，谁能告诉我这是集成 HTML 和 PHP 的正确方法

```
<div style="width:115px; padding-top:10px;float:left;" align="left">Email Address:</div>
<div style="width:300px;float:left;" align="left">

<input type="text" name="email" id="email" value="<?php echo strip_tags($_POST["email"]); ?>"     class="vpb_textAreaBoxInputs"></div><br clear="all"><br clear="all"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:07:01.217

you need to make sure that `$_POST["email"]` is set before use for that you can use `isset()` like

```
<?php if(isset($_POST["email"])) { echo strip_tags($_POST["email"]); }else{echo 'default' ;} ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:04:21.027

用于显示每个默认`ternary operator`值`input`

```
<input type="text" name="email" id="email" value="<?php echo isset($_POST['email'])?strip_tags($_POST['email']):''; ?>" class="vpb_textAreaBoxInputs"></div><br clear="all"><br clear="all"> 
```

同样的`firstname`

```
<input type="text" name="firstname" id="firstname" value="<?php echo isset($_POST['firstname'])?strip_tags($_POST['firstname']):''; ?>" > 
```

# ios - 如何从Objective C中的文件创建私钥？

> ID：15902653
> 
> 赞同：4
> 
> 时间：2013-04-09T13:01:07.560
> 
> 标签：ios, objective-c, security, pem

我创建了一个这样的公钥：

```
 NSString *pkFilePath = [[NSBundle mainBundle] pathForResource:@"public_key" ofType:@"der"];
NSData *myCertData = [NSData dataWithContentsOfFile:pkFilePath];

SecCertificateRef cert = SecCertificateCreateWithData (kCFAllocatorDefault, (CFDataRef)myCertData);
CFArrayRef certs = CFArrayCreate(kCFAllocatorDefault, (const void **) &cert, 1, NULL);

SecTrustRef trust;
SecPolicyRef myPolicy   = SecPolicyCreateBasicX509();
SecTrustCreateWithCertificates(certs, myPolicy, &trust);
SecTrustResultType trustResult;
SecTrustEvaluate(trust, &trustResult);
SecKeyRef pub_key_leaf = SecTrustCopyPublicKey(trust);
NSLog(@"%@",pub_key_leaf); 
```

但是如何从文件中创建私钥？

这是一些创建私钥的相关代码，但我不知道如何使用我的私钥文件从中创建私钥。

[https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW10](https://developer.apple.com/library/mac/#documentation/security/conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:56:47.393

AFAIK 没有简单的方法可以从 NSData 创建 SecPrivateKeyRef。如果可能的话 - 将您的私人和公共文件合并到 p12 中：

```
openssl pkcs12 -export -out combined.p12 -in public.der -inform DER -inkey private...
Password: 12345678 
```

然后做

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: @"12345678", kSecImportExportPassphrase, nil];

```
OSStatus status = SecPKCS12Import((__bridge CFDataRef)pkcs12derAsData,  
     (__bridge CFDictionaryRef)options, &items); 
```

在我不得不处理 DER/PEM 的情况下——我发现与 openssl 链接最容易。并从那里拿走它。

德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T10:50:34.970

我有同样的问题，原来你需要使用 p12 文件来导入私钥。

在这里查看我的答案[https://stackoverflow.com/a/17295321/480467](https://stackoverflow.com/a/17295321/480467)

# javascript - 通过 jsonreststore 将 dojo.grid 绑定到带有身份验证的 restful 服务

> ID：15902655
> 
> 赞同：0
> 
> 时间：2013-04-09T13:01:17.427
> 
> 标签：javascript, json, rest, dojo, dojox.grid.datagrid

我为这个问题搜索了一段时间，但找不到太多关于它的信息。

在我的 javascript 应用程序中，我尝试通过 jsonreststore 和 dgrid 可视化我的 restful 后端的数据。

这就是我到目前为止得到的：

```
 <script>
        function getRequest(args) {
            return {
                url: 'http://myworkingapiwithevents/events',
                handleAs: 'json',
                sync: false,
                headers: {
                    'Authorization': 'Basic HriB5jsHUib2K='
                }
            }
        }

        require(["dojo/store/JsonRest", "dojo/rpc/JsonService"], function (JsonRest, JsonService) {            
            service = new JsonService('http://myworkingapiwithevents/events', true /*isJson*/, undefined /*schema*/, getRequest);
            myStore = new JsonRest({ service: service });
        });

        require(["dojox/grid/DataGrid", "dojo/data/ObjectStore", "dojo/domReady!"
        ], function (DataGrid, ObjectStore) {
            grid = new DataGrid({
                store: dataStore = new ObjectStore({ objectStore: myStore }),
                structure: [
                    { name: "Event", field: "name", width: "200px" }
                ]
            }, "grid3");
            grid.startup();
        });
    </script> 
```

一开始我使用硬编码的 base64 授权，它应该适用于我的后端服务。使用 getRequest 方法，我初始化了我的服务“解决方法”，我的 jsonreststore 可以使用它来处理授权。

在萤火虫（Chrome）中，我收到以下错误：

```
ErrorCtor {stack: "Error: Unable to load http://myworkingapiwithevents/ev... p://localhost:52894/Scripts/dojo/dojo.js:1094:43)", message: "Unable to load http://myworkingapiwithevents/events status: 0", response: Object, status: 0, responseText: ""…}

Error {popStackFrame: function} "Error: Unable to load SMD from http://myworkingapiwithevents/events 
```

会不会是跨域问题？我知道我的后端服务支持跨域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:40:43.430

您不需要使用 dojo/rpc/JsonService。试试这个：

```
require(["dojo/store/JsonRest", "dojox/grid/DataGrid", "dojo/data/ObjectStore", "dojo/domReady!"], function (JsonRest, DataGrid, ObjectStore) {
        var restStore = new JsonRest({
            target : 'http://myworkingapiwithevents/events',
            headers: {'Authorization': 'Basic HriB5jsHUib2K='}
        });
        var dataStore = new ObjectStore({ objectStore : restStore });
        grid = new DataGrid({
            store: dataStore,
            structure: [
                { name: "Event", field: "name", width: "200px" }
            ]
        }, "grid3");
        grid.startup();
}); 
```

# javascript - 在 PDF 中搜索文本

> ID：15902656
> 
> 赞同：0
> 
> 时间：2013-04-09T13:01:20.023
> 
> 标签：javascript, search, pdf, google-custom-search

是否可以使用[Google 自定义搜索](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=72369)来搜索 PDF 中的文本？

我认为这是不可能的，尽管谷歌显然索引了 PDF，这意味着你可以搜索它们，对吧？

我认为使用 JavaScript 可能是可能的，尽管我认为它不能在 PDF 中搜索关键字，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:02:55.130

尝试这个：

```
"The text you look for" filetype:pdf 
```

# java - 如何使用 suns 简单的 httpserver 提供静态内容

> ID：15902662
> 
> 赞同：15
> 
> 时间：2013-04-09T13:01:30.540
> 
> 标签：java, jersey, httpserver

我正在使用球衣`HttpServerFactory`创建一个简单的嵌入式`HttpServer`来托管几个休息服务。我们只需要一些快速轻便的小东西。我需要在同一个服务器实例中托管一个小的静态 html 页面。有没有一种简单的方法可以将静态处理程序添加到服务器？有我可以使用的预定义处理程序吗？这似乎是一个很常见的任务，如果它已经存在，我不想为它重新编写代码。

```
server = HttpServerFactory.create(url);
server.setExecutor(Executors.newCachedThreadPool());
server.createContext("/staticcontent", new HttpHandler() {
    @Override
    public void handle(HttpExchange arg0) throws IOException {
        //What goes here?
    }
});
server.start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-24T13:01:38.467

这可以解决问题，尽管它确实允许任何人通过请求 ../../../ 来遍历树。您可以将 ./wwwroot 更改为任何有效的 java 文件路径。

```
static class MyHandler implements HttpHandler {
    public void handle(HttpExchange t) throws IOException {
        String root = "./wwwroot";
        URI uri = t.getRequestURI();
        System.out.println("looking for: "+ root + uri.getPath());
        String path = uri.getPath();
        File file = new File(root + path).getCanonicalFile();

        if (!file.isFile()) {
          // Object does not exist or is not a file: reject with 404 error.
          String response = "404 (Not Found)\n";
          t.sendResponseHeaders(404, response.length());
          OutputStream os = t.getResponseBody();
          os.write(response.getBytes());
          os.close();
        } else {
          // Object exists and is a file: accept with response code 200.
          String mime = "text/html";
          if(path.substring(path.length()-3).equals(".js")) mime = "application/javascript";
          if(path.substring(path.length()-3).equals("css")) mime = "text/css";            

          Headers h = t.getResponseHeaders();
          h.set("Content-Type", mime);
          t.sendResponseHeaders(200, 0);              

          OutputStream os = t.getResponseBody();
          FileInputStream fs = new FileInputStream(file);
          final byte[] buffer = new byte[0x10000];
          int count = 0;
          while ((count = fs.read(buffer)) >= 0) {
            os.write(buffer,0,count);
          }
          fs.close();
          os.close();
        }  
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-22T23:47:04.613

这是一个安全的版本。您可能想要添加几个 MIME 类型，具体取决于哪些是常见的（或者如果[您的平台有，请](https://developer.android.com/reference/android/webkit/MimeTypeMap.html)使用其他方法）。

```
package de.phihag.miniticker;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.HashMap;
import java.util.Map;

import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

public class StaticFileHandler implements HttpHandler {
    private static final Map<String,String> MIME_MAP = new HashMap<>();
    static {
        MIME_MAP.put("appcache", "text/cache-manifest");
        MIME_MAP.put("css", "text/css");
        MIME_MAP.put("gif", "image/gif");
        MIME_MAP.put("html", "text/html");
        MIME_MAP.put("js", "application/javascript");
        MIME_MAP.put("json", "application/json");
        MIME_MAP.put("jpg", "image/jpeg");
        MIME_MAP.put("jpeg", "image/jpeg");
        MIME_MAP.put("mp4", "video/mp4");
        MIME_MAP.put("pdf", "application/pdf");
        MIME_MAP.put("png", "image/png");
        MIME_MAP.put("svg", "image/svg+xml");
        MIME_MAP.put("xlsm", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
        MIME_MAP.put("xml", "application/xml");
        MIME_MAP.put("zip", "application/zip");
        MIME_MAP.put("md", "text/plain");
        MIME_MAP.put("txt", "text/plain");
        MIME_MAP.put("php", "text/plain");
    };

    private String filesystemRoot;
    private String urlPrefix;
    private String directoryIndex;

    /**
     * @param urlPrefix The prefix of all URLs.
     *                   This is the first argument to createContext. Must start and end in a slash.
     * @param filesystemRoot The root directory in the filesystem.
     *                       Only files under this directory will be served to the client.
     *                       For instance "./staticfiles".
     * @param directoryIndex File to show when a directory is requested, e.g. "index.html".
     */
    public StaticFileHandler(String urlPrefix, String filesystemRoot, String directoryIndex) {
        if (!urlPrefix.startsWith("/")) {
            throw new RuntimeException("pathPrefix does not start with a slash");
        }
        if (!urlPrefix.endsWith("/")) {
            throw new RuntimeException("pathPrefix does not end with a slash");
        }
        this.urlPrefix = urlPrefix;

        assert filesystemRoot.endsWith("/");
        try {
            this.filesystemRoot = new File(filesystemRoot).getCanonicalPath();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }

        this.directoryIndex = directoryIndex;
    }

    /**
     * Create and register a new static file handler.
     * @param hs The HTTP server where the file handler will be registered.
     * @param path The path in the URL prefixed to all requests, such as "/static/"
     * @param filesystemRoot The filesystem location.
     *                       For instance "/var/www/mystaticfiles/".
     *                       A request to "/static/x/y.html" will be served from the filesystem file "/var/www/mystaticfiles/x/y.html"
     * @param directoryIndex File to show when a directory is requested, e.g. "index.html".
     */
    public static void create(HttpServer hs, String path, String filesystemRoot, String directoryIndex) {
        StaticFileHandler sfh = new StaticFileHandler(path, filesystemRoot, directoryIndex);
        hs.createContext(path, sfh);
    }

    public void handle(HttpExchange he) throws IOException {
        String method = he.getRequestMethod(); 
        if (! ("HEAD".equals(method) || "GET".equals(method))) {
            sendError(he, 501, "Unsupported HTTP method");
            return;
        }

        String wholeUrlPath = he.getRequestURI().getPath();
        if (wholeUrlPath.endsWith("/")) {
            wholeUrlPath += directoryIndex;
        }
        if (! wholeUrlPath.startsWith(urlPrefix)) {
            throw new RuntimeException("Path is not in prefix - incorrect routing?");
        }
        String urlPath = wholeUrlPath.substring(urlPrefix.length());

        File f = new File(filesystemRoot, urlPath);
        File canonicalFile;
        try {
            canonicalFile = f.getCanonicalFile();
        } catch (IOException e) {
            // This may be more benign (i.e. not an attack, just a 403),
            // but we don't want the attacker to be able to discern the difference.
            reportPathTraversal(he);
            return;
        }

        String canonicalPath = canonicalFile.getPath();
        if (! canonicalPath.startsWith(filesystemRoot)) {
            reportPathTraversal(he);
            return;
        }

        FileInputStream fis;
        try {
            fis = new FileInputStream(canonicalFile);
        } catch (FileNotFoundException e) {
            // The file may also be forbidden to us instead of missing, but we're leaking less information this way 
            sendError(he, 404, "File not found"); 
            return;
        }

        String mimeType = lookupMime(urlPath);
        he.getResponseHeaders().set("Content-Type", mimeType);
        if ("GET".equals(method)) {
            he.sendResponseHeaders(200, canonicalFile.length());            
            OutputStream os = he.getResponseBody();
            copyStream(fis, os);
            os.close();
        } else {
            assert("HEAD".equals(method));
            he.sendResponseHeaders(200, -1);
        }
        fis.close();
    }

    private void copyStream(InputStream is, OutputStream os) throws IOException {
        byte[] buf = new byte[4096];
        int n;
        while ((n = is.read(buf)) >= 0) {
            os.write(buf, 0, n);
        }
    }

    private void sendError(HttpExchange he, int rCode, String description) throws IOException {
        String message = "HTTP error " + rCode + ": " + description;
        byte[] messageBytes = message.getBytes("UTF-8");

        he.getResponseHeaders().set("Content-Type", "text/plain; charset=utf-8");
        he.sendResponseHeaders(rCode, messageBytes.length);
        OutputStream os = he.getResponseBody();
        os.write(messageBytes);
        os.close();
    }

    // This is one function to avoid giving away where we failed 
    private void reportPathTraversal(HttpExchange he) throws IOException {
        sendError(he, 400, "Path traversal attempt detected");
    }

    private static String getExt(String path) {
        int slashIndex = path.lastIndexOf('/');
        String basename = (slashIndex < 0) ? path : path.substring(slashIndex + 1);

        int dotIndex = basename.lastIndexOf('.');
        if (dotIndex >= 0) {
            return basename.substring(dotIndex + 1);
        } else {
            return "";
        }
    }

    private static String lookupMime(String path) {
        String ext = getExt(path).toLowerCase();
        return MIME_MAP.getOrDefault(ext, "application/octet-stream");
    }
} 
```

# html - 显示不同的导航链接，具体取决于您从哪个页面导航

> ID：15902672
> 
> 赞同：1
> 
> 时间：2013-04-09T13:01:45.893
> 
> 标签：html

抱歉，如果标题具有误导性，希望我能在这里解释一下自己。

基本上，为了简化它.. 我有一个产品页面，我们将其称为“Apple”

“Apple”是两种方式之一，或者来自页面“水果”或来自页面“流行品牌”

现在，在“Apple”页面的顶部，我有一组导航链接..类似于这个..

**首页 - 分类 - 水果 - 联系方式**

现在，如果您从“水果”页面到达“Apple”，这一切都很好，但是，就目前而言，如果您从“流行品牌”页面到达，您仍然会看到相同的导航链接。

我希望它显示在哪里..

**首页 - 分类 - 热门品牌 - 联系方式**

所以我的问题是，

如何根据您最初来自的页面更改链接，而不会为任何一种情况制作重复页面。

代码没什么特别的，只是基本链接..

```
<ul>

<li> <a href="index.html">Home</a></li>

<li> <a href="categories.html">Categories</a></li>

<li> <a href="fruit.html">Fruit</a></li>

<li class="current_page_item"><a href="fruit.html">Fruit</a></li>

<li> <a href="Contact.html">Contact</a></li>

</ul> 
```

希望我已经清楚地解释了自己，并感谢任何帮助。

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:13:13.473

您可以将源附加到 url 本身，以便它以`?source=fruit`或什至结尾`?source=popular%20brand`。搜索此`source`变量，并隐藏两个链接之一作为响应。

假设这是您的 HTML：

```
<nav id="nav">
    <a href="#">Home</a> 
    <a href="#">Categories</a> 
    <a href="#" data-toggle>Fruit</a> 
    <a href="#" data-toggle>Popular Brand</a> 
    <a href="#">Contact</a>
</nav> 
```

最初它包含我们的两个链接：水果和流行品牌。接下来是一个帮助我们查找值的函数`document.location.search`：

```
function getParam ( p ) {
    var search = decodeURIComponent( document.location.search );
    var val, exp = new RegExp( "[?&]" + p + "=([^&]+)" );
    return ( val = search.match( exp ) ) ? val[1] : false;
} 
```

这通过传入一个名称来工作，并返回相应的值或`false`. 接下来，我们将获取或提供 的值`source`。如果我们的`getParam`函数找不到，我们将简单地假设它是“水果”：

```
var source = getParam( "source" ) || "Fruit"; 
```

现在我们收集对导航区域中所有链接的引用：

```
var links = document.getElementById("nav").getElementsByTagName("a"), 
    count = links.length, a; 
```

在这一点上，我们循环遍历`a`元素的集合。如果它们具有该`data-toggle`属性，我们将检查它们的文本是否与源文本匹配。如果没有，我们将其隐藏。这意味着`?source=fruit`将隐藏热门品牌链接，`?source=popular%20brand`并将隐藏水果链接。

```
while ( a = links[ --count ] ) {
    if ( a.hasAttribute("data-toggle") )
        if ( (a.textContent || a.innerText).toLowerCase() !== source.toLowerCase() )
            a.parentElement.removeChild( a );
} 
```

您可以通过查看以下 URL 在线查看此内容：

*   [http://jsfiddle.net/jonathansampson/dLkfc/show/](http://jsfiddle.net/jonathansampson/dLkfc/show/)
*   [http://jsfiddle.net/jonathansampson/dLkfc/show/?source=fruit](http://jsfiddle.net/jonathansampson/dLkfc/show/?source=fruit)
*   [http://jsfiddle.net/jonathansampson/dLkfc/show/?source=popular%20brand](http://jsfiddle.net/jonathansampson/dLkfc/show/?source=popular%20brand)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:07:25.197

您使用脚本语言根据 url 中传递的参数显示不同的内容，例如`?from=fruit`或`?from=popular_brand`按照上面的示例。

# python - 如何四舍五入一个值但不是单位步长

> ID：15902675
> 
> 赞同：2
> 
> 时间：2013-04-09T13:01:58.070
> 
> 标签：python, perl, bash, rounding

我正在尝试使用 awk 在 bash 中舍入几个十进制值。例如：如果值为 6.79

```
awk 'BEGIN {rounded = sprintf("%.0f", 6.79); print rounded }' 
```

这让我返回 7。

有没有一种方法可以不四舍五入到最接近的整数 (1,2,3,..)，而是以 0.5 的步长 (0,0.5,1,1.5,2,2.5...)

在 python 或 perl 中工作的任何替代方法也可以。python中的当前方式

```
python -c "from math import ceil; print round(6.79)" 
```

也返回 7.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:15:15.513

Perl 解决方案：

```
perl -e 'print sprintf("%1.0f",2 * shift) / 2'  -- 6.79
7 
```

诀窍很简单：将数字乘以 2，四舍五入，再除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:47:12.773

这是一个通用子程序，用于以给定精度舍入到最接近的值：我举了一个你想要的舍入示例，即 0.5，我已经对其进行了测试，即使使用负浮点数它也能完美运行

```
#!/usr/bin/env perl
use strict;
use warnings;

for(my $i=0; $i<100; $i++){
    my $x = rand 100;
    $x -= 50;
    my $y =&roundToNearest($x,0.5);
    print "$x --> $y\n";
} 
exit;

############################################################################
# Enables to round any real number to the nearest with a given precision even for negative numbers
#  argument 1 : the float to round
# [argument 2 : the precision wanted]
#
# ie: precision=10 => 273 returns 270
# ie: no argument for precision means precision=1 (return signed integer) =>  -3.67 returns -4
# ie: precision=0.01 => 3.147278 returns 3.15

sub roundToNearest{

  my $subname = (caller(0))[3];
  my $float = $_[0];
  my $precision=1;
  ($_[1]) && ($precision=$_[1]);
  ($float) || return($float);  # no rounding needed for 0

  # ------------------------------------------------------------------------
  my $rounded = int($float/$precision + 0.5*$float/abs($float))*$precision;
  # ------------------------------------------------------------------------

  #print  "$subname>precision:$precision float:$float --> $rounded\n";

  return($rounded);
} 
```

# jquery-ui - 在一页上实现 nivoslider 和 jqueryui.com/demos/dialog

> ID：15902676
> 
> 赞同：0
> 
> 时间：2013-04-09T13:01:58.570
> 
> 标签：jquery-ui, nivo-slider

我想为幻灯片和 jQueryUI 弹出框实现 Nivoslider。当我将它们实现为单独的实体时，弹出框将停止正常工作。

有没有办法一起实现它们，还是有致命错误？

顺便说一句，谈到 js，我是一个完全的菜鸟 - 请善待并为我拼写出来：D

这是 Nivoslider 的代码：

```
<script type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="scripts/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider({
    effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
    animSpeed: 2000, // Slide transition speed
    pauseTime: 6000, // How long each slide will show
    });
});
</script> 
```

这是 jQuery UI 弹出框的代码：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>
$( "#dialog" ).dialog({ autoOpen: false });
$( "#opener" ).click(function() {
$( "#dialog" ).dialog( "open" );
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T21:09:08.817

我的实现基于 Nivo Slider 提供的演示脚本，只需添加 jquery UI 并使用此代码。它存储滑块信息并在每次打开对话框时重新创建滑块。

HTML 代码

```
<div id="wrapper">
        <a href="http://dev7studios.com" id="dev7link" title="Go to dev7studios">dev7studios</a>

        <button id="btnTestMe">Open Slideshow</button>
    </div>

    <div id="dlgTestMe">
        <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
                <img src="images/toystory.jpg" data-thumb="images/toystory.jpg" alt="" />
                <a href="http://dev7studios.com"><img src="images/up.jpg" data-thumb="images/up.jpg" alt="" title="This is an example of a caption" /></a>
                <img src="images/walle.jpg" data-thumb="images/walle.jpg" alt="" data-transition="slideInLeft" />
                <img src="images/nemo.jpg" data-thumb="images/nemo.jpg" alt="" title="#htmlcaption" />
            </div>
            <div id="htmlcaption" class="nivo-html-caption">
                <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>. 
            </div>
        </div>  
    </div> 
```

jQuery 代码

```
$('#btnTestMe').click(function(e){
    e.preventDefault();
    $('#dlgTestMe').dialog({
        open: function(){
                var data = $('.slider-wrapper').html();
                if (typeof($(this).data("slider")) == "undefined"){
                    $(this).data("slider", data);
            }                   
            $('#slider').nivoSlider();
        }, beforeClose: function(){
            $('#slider, .nivo-controlNav, .nivo-html-caption').detach();
            $(this).children('.slider-wrapper').html($(this).data("slider"));
        }
    });     
}); 
```

# ruby - Selenium::WebDriver::Error::StaleElementReferenceError 缓存中不存在元素

> ID：15902678
> 
> 赞同：2
> 
> 时间：2013-04-09T13:02:03.610
> 
> 标签：ruby, watir, watir-webdriver

# 这不是我的实际代码，但场景完全相同。

# mysite.com 是这样的：

```
<iframe name:something1>
    <form id:something2> 
        <ul>
        <li>
            <input class = "class a" id = "id1" name = "name1">
        </li>
        <li>
            <input class = "class b" id = "id2" name = "name2">
        </li>
        <li>
            <input class = "class c" id = "id3" name = "name3">
        </li>
        <li>
            <input id = "sbmt_btn" type = "submit">
        </li>

        </ul>
    </form>
</iframe> 
```

# 我使用的 Watir 脚本：

```
require "watir-webdriver"
b = Watir::Browser.new :chrome
b.goto "mysite.com"
b.frame(:name, "something1").text_field(:id, "id1").set "45"     #line1
b.frame(:name, "something1").text_field(:id, "id2").set "Hello"  #line2
b.frame(:name, "something1").text_field(:id, "id3").set "World"  #line3
b.frame(:name, "something1").button(:id, "sbmt_btn").click       #line4 
```

**问题：** line1 和 line2 运行成功。但是系统在执行 line3 时抛出错误。系统找不到 id= id3 和 id = sbmt_btn 的对象。我浏览了很多页面来解决这个问题，但不能。请帮忙。我的红宝石版本：红宝石 1.9.3p362

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T23:31:01.730

尝试 when_present 命令：

```
. . .
b.frame(:name, "something1").text_field(:id, "id3").when_present.set "World"
. . . 
```

# android - 如何在android的arraylisthashmap中用空更改重复值？

> ID：15902680
> 
> 赞同：1
> 
> 时间：2013-04-09T13:02:13.033
> 
> 标签：android, arraylist, hashmap

我想在arraylist hashmap中用空更改重复值我们如何用空更改重复值你可以看到我有TAG_ALPHAABET，我存储0到9，a到zi想用空更改重复值

```
try {
    JSONObject jobject = new JSONObject(data);
    JSONObject jdata = jobject.getJSONObject(TAG_DATA);
    JSONArray jbrands = jdata.getJSONArray(TAG_BRAND);

    for(int i = 0; i < jbrands.length(); i++)   {
        HashMap<String, String> map = new HashMap<String, String>();

        brandid = jbrands.getJSONObject(i).get(TAG_BRANDID).toString();
        brandname = jbrands.getJSONObject(i).get(TAG_BRANDNAME).toString();
        brandimage = jbrands.getJSONObject(i).get(TAG_BRANDIMAGE).toString();

        Character checkchar = brandname.charAt(0);
        Character checkcharcase Character.toUpperCase(checkchar);
        String convert = Character.toString(checkcharcase);
        map.put(TAG_ALPHABET,convert);
        map.put(TAG_BRANDID,brandid);
        map.put(TAG_BRANDNAME,brandname);
        map.put(TAG_BRANDIMAGE,brandimage);

        stellolist.add(map);
    }
}
catch (Exception e) {
    e.printStackTrace();
} 
```

# vb.net - 您如何正确地将“关于”按钮添加到系统菜单？

> ID：15902681
> 
> 赞同：0
> 
> 时间：2013-04-09T13:02:13.290
> 
> 标签：vb.net, button, systemmenu

我正在尝试在我的应用程序的系统菜单中添加一个“关于”按钮，但我发现的代码抛出了一个错误 -

> 在 DLL 'user32' 中找不到名为 'AppendMenu' 的入口点。

我想知道是否有人可以看一下代码并就我需要做些什么来修复它提出建议？谢谢。

```
Private Declare Function GetSystemMenu Lib "user32" (ByVal hWnd As IntPtr, ByVal bRevert As Boolean) As IntPtr
Private Declare Function AppendMenu Lib "user32" (ByVal hMenu As IntPtr, ByVal uFlags As Int32, ByVal uIDNewItem As IntPtr, ByVal lpNewItem As String) As Boolean

Private Const MF_STRING As Integer = &H0
Private Const MF_SEPARATOR As Integer = &H800

Private Sub AddSysMenuItems()

    'Get the System Menus Handle.
    Dim hSysMenu As IntPtr = GetSystemMenu(Me.Handle, False)

    'Add a standard Separator Item.
    AppendMenu(hSysMenu, MF_SEPARATOR, 1000, Nothing)
    'Add an About Menu Item.
    AppendMenu(hSysMenu, MF_STRING, 1001, "About")

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:56:44.540

嗯，消息是准确的，user32.dll 中没有名为“AppendMenu”的入口点。它实际上有两个版本。一个叫AppendMenuA，A的意思是Ansi。使用 8 位编码字符串的旧版本，通常用于旧的 C 程序。而AppendMenuW，W的意思是Wide。它需要一个 Unicode 字符串，就像现代 Windows 版本上的所有 winapi 函数一样。

您的旧式 Declare 语句正在使用 legacy 函数。您应该使用 Alias 关键字来提供正确的入口点名称：

```
Private Declare Function AppendMenu Lib "user32.dll" Alias "AppendMenuA" (ByVal hMenu As IntPtr, ByVal uFlags As Int32, ByVal uIDNewItem As IntPtr, ByVal lpNewItem As String) As Boolean 
```

或者直接称它为 AppendMenuA。使用 legacy 函数不是很漂亮，尽管将“About”转换为 Unicode 不会有问题。但是要支持声明 pinvoke 函数的现代方式，除了自动映射到 A 或 W 版本之外，它还有许多优点：

```
Imports System.Runtime.InteropServices
Imports System.ComponentModel
...
    <DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
    Private Shared Function AppendMenu(ByVal hMenu As IntPtr, ByVal uFlags As Int32, ByVal uIDNewItem As IntPtr, ByVal lpNewItem As String) As Boolean
    End Function
...
        If Not AppendMenu(hSysMenu, MF_STRING, IntPtr.Zero, "About") Then
            Throw New Win32Exception()
        End If 
```

# php - 表行单击上的复选框单击事件

> ID：15902683
> 
> 赞同：0
> 
> 时间：2013-04-09T13:02:17.243
> 
> 标签：php, javascript, jquery, drupal

我有一个表，其中包含几行，每行包含一个 checknox。复选框将在行点击事件中被选中。现在如何`onclick`为复选框应用事件？

```
$('input[type=checkbox]').click(function() {      
  countPopChecked();           
}); 
```

这是我的脚本。当我单击复选框时，这是有效的。但是当我点击表格行时，我想要这个功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:03:41.263

```
$('input[type="checkbox"]').closest('tr').on('click', function() {      
    countPopChecked();           
}); 
```

或者 ：

```
$('tr').has('input[type="checkbox"]').on('click', function() {      
    countPopChecked();           
}); 
```

# mysql - 使用 Mysql2 gem 的 Ruby SQL 插入

> ID：15902684
> 
> 赞同：2
> 
> 时间：2013-04-09T13:02:18.077
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, mysql2

我正在尝试插入远程 mysql 数据库。我能够正确连接并且可以从中查询“选择”没有问题。但是，我无法在可以从中选择的同一个表中执行插入操作。我怀疑它与我的绑定有关，但这与我用来让 sqlite3 工作的方法几乎相同，我认为它使用相同的 Arel 插入。

```
@result = @db.query("insert into lead_to_processes (case_number, style_of_case) values (?,?)", [
      self.case_number.to_blob.force_encoding("UTF-8"),
      self.style_of_case.to_blob.force_encoding("UTF-8")
    ]
) 
```

最终目标是能够从模型内部查询远程数据库并将数据插入其中。我尝试过使用 Octopus，但效果不佳，因为表与数据库不同。

我对该用户拥有数据库的完全权限。

因此，按照评论的指导，我更改了语法并得到了不同的错误

Mysql2::Error: 你的 SQL 语法有错误；

但是我现在正在做这样的查询

```
@db = Mysql2::Client.new(connectionstring)

 @case_number            =  @db.escape(self.case_number)
 @style_of_case          =  @db.escape(self.style_of_case)

@db.query("insert into lead_to_processes (case_number, style_of_case) VALUES
(#{@case_number}, #{@style_of_case}) 
```

有什么想法或指导吗？我也试过用 '' 封装我要插入的变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:49:52.280

我猜我的代码中有一些奇怪的字符，所以我不得不强制 UTF-8 编码，然后使用下面的 gsub 删除这些字符，现在一切都在流动。

感谢您的建议

```
@db.escape(self.style_of_case.force_encoding("UTF-8"))
@db.escape(self.case_number.gsub(/[\xC2]/,'').gsub(/[\xA0]/,'').force_encoding("UTF-8")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:45:39.620

您是否可能缺少结束报价？

这个

```
@db.query("insert into lead_to_processes (case_number, style_of_case) VALUES
(#{@case_number}, #{@style_of_case}) 
```

应该

```
@db.query("insert into lead_to_processes (case_number, style_of_case) VALUES
(#{@case_number}, #{@style_of_case}") <== notice the quote at the end. 
```

# database - 存储 youtube id 数据库的最佳数据类型是什么？

> ID：15902687
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:02:34.243
> 
> 标签：database, types, youtube, storing-data

存储 youtube id 数据库的最佳数据类型是什么？

ps youtube 代码 (id) 有 11 个符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:24:08.657

youtube ID 是大小为 11 的 ASCII 字符串。这似乎[不太可能改变](https://stackoverflow.com/a/6250619/2213023)。所以我会使用 11 个字符的固定长度字符串。

# python - 供应商发票和帐户类型

> ID：15902689
> 
> 赞同：0
> 
> 时间：2013-04-09T13:02:37.293
> 
> 标签：python, openerp, accounting

我成功生成了供应商发票。我现在遇到的问题是我无法支付我创建的发票（通过代码）。似乎是由于用于付款的帐户不正确？

错误是：没有任何反应，如果状态没有从打开变为已付款，但是当我从演示数据手动将帐户更改为“X111111 债权人（测试）”时，它会毫无问题地获得付款。

这是我的代码：

```
 for commission in self.browse(cr, uid, ids, context=context):
        if commission.supplier_invoice.id:
            continue
        journal_ids = self.pool.get('account.journal').search(cr, uid,
                                                              [('type', '=', 'purchase'),
                                                               ('company_id', '=',
                                                                commission.invoice.company_id.id)],
                                                              limit=1)
        if not journal_ids:
            raise osv.except_osv(_('Error!'),  # TODO change text message
                                 _('Please define sales journal for this company: "%s" (id:%d).') % (
                                     'dummy', 'dummy'))
        invoice_line = {
            'name': 'commission',
            'sequence': 5,
            'invoice_id': False,
            'account_id': commission.salesperson.partner_id.property_account_receivable.id,
            'price_unit': commission.commission_total,
            'quantity': 1.0,
        }

        invoice_line_id = self.pool.get('account.invoice.line').create(cr, uid, invoice_line, context=context)
        new_invoice = {
            'name': 'commission on sale',
            'type': 'in_invoice',
            'reference': '',
            'account_id': commission.salesperson.partner_id.property_account_receivable.id,
            'partner_id': commission.salesperson.partner_id.id,
            'journal_id': journal_ids[0],
            'invoice_line': [(6, 0, [invoice_line_id])],
            'currency_id': commission.invoice.currency_id.id,
            'comment': 'test',
            'fiscal_position': commission.salesperson.partner_id.property_account_position.id,
            'company_id': commission.invoice.company_id.id,
            'user_id': uid
        }
        invoice_id = self.pool.get('account.invoice').create(cr, uid, new_invoice, context=context)

        self.write(cr,
                   uid,
                   [commission.id],
                   {'supplier_invoice': invoice_id},
                   context=context) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:15:33.787

关于发票创建，

```
'account_id': commission.salesperson.partner_id.property_account_receivable.id 
```

在这里，您需要使用应付账款而不是应收账款，因为您要创建供应商发票。所以代码应该是这样的：

```
'account_id': commission.salesperson.partner_id.property_account_payable.id 
```

关于发票行创建，

```
'account_id': commission.salesperson.partner_id.property_account_receivable.id, 
```

在这里您需要使用产品或产品类别的费用帐户。

# php - 什么会加载得更快。转换后的变量或 $_POST 变量？

> ID：15902691
> 
> 赞同：1
> 
> 时间：2013-04-09T13:02:39.990
> 
> 标签：php, performance

我对 PHP 还很陌生，但仍然不了解 PHP 的一些最基本的基础知识，所以请多多包涵。

编写脚本时；IE：（请忽略语法错误）

```
if isset($_POST['name']) {$Name = $_POST['nsme'];} 
```

在页面中使用此名称时，哪种方式更好并且加载更快？

一个：）`echo $Name. ' went to the river';`

乙:)`echo $_POST['name']. 'went to the river';`

显然这是一个虚构的例子，我只是想知道哪种方式更好，无论是回声还是任何其他功能，如果有人不介意插话，我将不胜感激，再次感谢大家.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:04:28.010

明显地

```
echo $_POST['name'].' went to the river'; 
```

会更快，因为您跳过了将 post 变量分配给 php 变量的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:04:32.770

如果您关心速度，请不要担心您可以使用它们中的任何一个，差异显着降低，但创建仅使用一次的变量不是一个好主意

但是，如果你正在做

```
$Name = $_POST['nsme']; 
```

并使用`$name`变量我确定您想了解[**单例变量**](http://en.wikipedia.org/wiki/Singleton_variable)

如果你在其他地方使用 $name 也是完美的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:06:16.110

```
echo $_POST['name'].' went to the river'; 
```

跳过一步会更快。

但是，如果您需要`$_POST['name']`多次使用，第二种方法会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:10:06.967

如果你有 var`$foo`和 make：

```
$bar = $foo; 
```

在您更改之前，它不会`$foo`在内存中创建另一个副本，`$foo`或者`$bar`您将拥有几乎相同的 var 两者。

您将拥有相同的速度，但`$bar`看起来会更好，`$_POST['bar']`并且更容易工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T13:04:52.730

直接变量访问总是更快。至少 zend 词法分析器没有识别尺寸......

至少对于多种用途...

（始终使用 isset() - 至少检查一下，否则你会收到通知。）

# python - 使用函数调用元组

> ID：15902694
> 
> 赞同：0
> 
> 时间：2013-04-09T13:02:42.010
> 
> 标签：python

我遇到了另一个问题，虽然元组内的字符串已经找到；只返回第一个信息元组。

```
def info(name, food_list):
    food_list = = [('Donut', '320', '4.00'), ('Apple Pie', '200', '3.20')]
    innertup = food_list[0]
    for c in food_list:
        if name in c:
            print name,':',innertup[1:3]
            return None
        else:
            print "Unknown food", name
            return None 
```

当它运行时它只会打印出来`Donut: ('320', '4.00')`，即使 Apple Pie 是该函数返回的名称`Apple Pie: ('200', '3.20')`。我还希望摆脱元组周围的括号，但我不知道如何，把`str()`它放在一边并不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:06:15.173

这应该有效：

```
def info(name, food_list):
    food_list = = [('Donut', '320', '4.00'), ('Apple Pie', '200', '3.20')]
    for c in food_list:
        if name in c:
            print c[0],':',c[1], ' ', c[2]
            return None
    else:
        print "Unknown food", name
        return None 
```

c[0] 将是食物的名称，c[1] 是第一个数字（可能是数量），c[2] 是第二个数字（可能是价格）。

小心点！else 语句用于 for 循环，而不用于 if！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:07:33.400

查看名称是否在其中一个元组中：

```
for x in food_list:
    if 'Apple Pie' in x:
        print (x) 
```

[以更好的格式](http://docs.python.org/2/library/string.html#format-string-syntax)打印元组：

```
print "{0[0]}: {0[1]} : {0[2]}".format(x) 
```

您可以更改对周围的格式`{}`以匹配您想要的。

所以总的来说：

```
def info(name, food_list):
    for x in food_list:
        if name in x:
            print "{0[0]}: {0[1]} : {0[2]}".format(x) 
```

# joomla - Joomla 3 的变化

> ID：15902699
> 
> 赞同：0
> 
> 时间：2013-04-09T13:02:56.373
> 
> 标签：joomla, joomla3.0

我有一个 joomla 3.0.3。（从 2.5 升级）。但是当我保存自定义 html 模块时，joomla 会不断更改我的 html 代码。

我正在使用 JCK 编辑器，并且也尝试过“无”编辑器，但这并没有改变它。我还将全局设置中的文本过滤器权限切换为“无过滤”......没有更改以太。

## 这是我输入的代码（图像和表格）：

```
<p style="text-align: center;">
<img alt="En verden af skønne og skæve blomster" src="images/Content/General/skoenneogskaeveblomster.png" style="width: 428px; height: 39px;" /></p>
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%;">
    <tbody>
    <tr>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <strong>Nyhedsmail</strong></td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <strong>Adresse</strong></td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <strong>Kontakt</strong></td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <strong>Bankoplysninger</strong></td>
        <td colspan="2" rowspan="1" style="text-align: center; vertical-align: top; width: 20%;">
            <strong>Åbningstider</strong></td>
    </tr>
    <tr>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <p>
                Gå ikke glip af tilbud og arangmenter.</p>
            <p>
                <a href="http://blomstergalleriet-viborg.dk/>Tilmeld dig vores nyhedsmail.</a></p>
        </td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <p>
                Blomster Galleriet</p>
            <p>
                Li. Sct. Mikkelsgade 19</p>
            <p>
                8800 Viborg</p>
        </td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <p>
                Tlf: 86 84 86 84</p>
            <p>
                Email: <a href="mailto:someemail?subject=Blomster%20Galleriet">someemail</a></p>
        </td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            <p>
                Reg. nr: 2783</p>
            <p>
                Konto nr: 4380 1656 49</p>
        </td>
        <td style="text-align: right; vertical-align: top; width: 10%;">
            <p>
                Mandag - Fredag:</p>
            <p>
                Lørdag:</p>
        </td>
        <td style="text-align: center; vertical-align: top; width: 10%;">
            <p>
                9:30 - 17:30</p>
            <p>
                9:30 - 13:00</p>
        </td>
    </tr>
    <tr>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td colspan="2" rowspan="1" style="vertical-align: top; width: 10%; text-align: center;">
            <strong>Specielle åbningstider</strong></td>
    </tr>
    <tr>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: center; vertical-align: top; width: 20%;">
            &nbsp;</td>
        <td style="text-align: right; vertical-align: top; width: 10%;">
            <p>
                Store bededag:</p>
            <p>
                Mors dag:</p>
            <p>
                Pinse dag:</p>
            <p>
                2\. Pinse dag:</p>
            <p>
                Uge 29-30:</p>
        </td>
        <td style="text-align: center; vertical-align: top; width: 10%;">
            <p>
                9:30 - 13:00</p>
            <p>
                7:00 - 14:00</p>
            <p>
                Lukket</p>
            <p>
                Lukket</p>
            <p>
                Ferielukket</p>
        </td>
    </tr>
</tbody> 
```

*站长OG设计师：我*

## 但是当我保存它看起来像这样：

```
<p>
&lt;p center;\&quot;=&quot;&quot;&gt; <img af="" alt="\&quot;En" nne="" og=""  src="\&quot;images/Content/General/skoenneogskaeveblomster.png\&quot;" ve="" verden="" /></p>
<p>
Nyhedsmail</p>
<table border="\&quot;0\&quot;" cellpadding="\&quot;0\&quot;" cellspacing="\&quot;0\&quot;" td="">
<tbody>
    <tr>
        <td a="" af="" dig="" glip="" href="\&quot;http://blomstergalleriet-viborg.dk/" ikke="" og="" td="" tilbud="" tilmeld="" vores="">
            <p>
                Blomster Galleriet</p>
            <p>
                Li. Sct. Mikkelsgade 19</p>
            <p>
                8800 Viborg</p>
        </td>
        <td 84="" 86="" a="" href="\&quot;mailto:someemail?subject=Blomster%20Galleriet\&quot;" td="">
            <p>
                Reg. nr: 2783</p>
            <p>
                Konto nr: 4380 1656 49</p>
        </td>
        <td -="" mandag="" td="">
            <p>
                9:30 - 17:30</p>
            <p>
                9:30 - 13:00</p>
        </td>
    </tr>
    <tr>
        <td td="">
            &nbsp;</td>
        <td td="">
            &nbsp;</td>
        <td colspan="\&quot;2\&quot;" rowspan="\&quot;1\&quot;" specielle="" td="">
            &nbsp;</td>
        <td td="">
            &nbsp;</td>
        <td td="">
            <p>
                Store bededag:</p>
            <p>
                Mors dag:</p>
            <p>
                Pinse dag:</p>
            <p>
                2\. Pinse dag:</p>
            <p>
                Uge 29-30:</p>
        </td>
        <td -="" 7:00="" 9:30="" p="">
            <a href="\&quot;mailto:someemail?subject=Blomster%20Galleriet\&quot;"><em>&lt;span 9px;\&quot;=&quot;&quot;&gt;Webmaster og designer: Me</em></a></td>
    </tr>
</tbody> 
```

如您所见，以下更改： * 图片未加载 * 链接更改 * 文本大小更改 * 表格更改

我希望有人知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:10:24.630

输入 HTML 标签时，您是否关闭了编辑器（显示 HTML 源代码）？否则，编辑器通常会假定您要输入一些文本并更改 HTML 标记，以便安全显示。

或者你的服务器自己做了一些有趣的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:42:45.287

我现在开始工作了。我认为这与 PHP 设置中的魔术引号设置有关。

# java - Struts2 用 facebook 登录/注册

> ID：15902708
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:03:31.053
> 
> 标签：java, facebook, struts2, restfb

我最近发现了一个开源库，可以在用户的​​ facebook 墙上发布（[restfb](http://restfb.com/)和[facebook4j](http://facebook4j.org/)）

他们都做了必要的事情，但我还需要做一件事，那就是使用他们的 Facebook 帐户登录并注册用户到我的 Web 应用程序。是否有此类任务的相关框架？如果不是，请提供替代解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:24:15.137

如果我的理解是正确的，那么您只需要使用 Oauth 或 Open Id 系统让用户使用 Facebook 或任何其他此类服务提供商注册并登录您的网站。

如果我的理解是正确的，那么有一个非常好的库，它非常易于使用且重量很轻。

*   [抄写员-Java](https://github.com/fernandezpablo85/scribe-java)

它还包含一些示例，展示了如何使用它以及它是如何工作的，让我们知道这是否是您正在寻找的。

# javascript - 如何编辑动态列表项文本并将其保存在数据库中？

> ID：15902709
> 
> 赞同：0
> 
> 时间：2013-04-09T13:03:36.420
> 
> 标签：javascript, jquery, sqlite, cordova

我已经编写了这段代码来从 DB 中检索值并将其放入 listitem 中，它工作正常这里是我的 html 代码：我已经添加了所有插件。

```
<html>
<head>

    $('#showcollapsed li').live('click',function(event)
    {  var txt = $(this).text();
        window.localStorage.setItem("clickedValueofList",txt);
        $.mobile.changePage('#viewInformation',null,true,true);
        getDataofSelectedListItem();
    }); 
```

这是我的代码，但它不能正常工作。

```
$('#list1').on('click','li',function()
    {
        $(this).hide();
        $('#list1').siblings('#editTextBox').show().val($(this).text()).focus();
    });

    $('#editTextBox').focusout(function()
    {
        //$('#list1').listview('refresh');
        $(this).hide();
        $(this).siblings('#list1').show().text($(this).val());

    }); 
```

```
 </head>
<body>
        <div data-role="page" id="viewUser" data-theme="d">
         <div data-role="header" data-theme="e" class="ui-bar ui-bar-e">
          <a href="#" id="backbtn" data-role="button" data-icon="arrow-l">BACK</a>
          <h3>STUDENT INFO</h3>
         </div>
         <div data-role="content">
            <a href="#" id="showinfo" data-role="button" style="width:100px;">SHOW</a>
           <div data-role="collapsible-set" id="showinfodiv" data-theme="b" data-content-theme="d">
           <div data-role="collapsible" id="showcollapsed" data-collapsed-icon ="plus" data-iconpos="left">
            <h3>user names</h3>
           <ul id="list" content-editable="true" data-role="listview" data-filter="true" data-filter-placeholder="Search Student Name..."  data-filter-theme="e"></ul>
               <li content-editable="true">fdfdfd</li>
              </div>   
           </div>  
         </div> 
        </div> 
        <div data-role="page" id="viewInformation" data-theme="d" data-add-back-btn="true" data-back-btn-text = "back">
          <div data-role="header" id="headerid" class="ui-bar ui-bar-b">

           <h3></h3> 
          </div>
           <div data-role="content" id="contentid">
           <ul id="list1" data-role="listview" data-theme="e"></ul> 

            <input type="text" id="editTextBox" style="display:none"/> 
            <a href="#" id="saveDBValue" data-role="button" data-mini="true" style="width:60px; height:40px; float:center;">SAVE</a> 
          </div>
        </div>
    </body>
    </html> 
```

现在我的下一个任务是编辑动态列表项，这意味着当用户单击第一个列表项时，列表项应该被 TEXTBOX 替换，并且当用户完成编辑时，其余未点击的列表项将保持不变，现在文本框应该是隐藏的和最近的编辑文本应该出现在列表项中，与列表项的其余部分类似，但用户一次只能编辑一个列表项。很难实现这一目标。
.js 代码：
//从数据库中获取数据并将其动态放入列表视图中，它工作正常

```
 function getDataofSelectedListItem()
    {
        alert("getDataofSelectedListI");
        clickedListItem = window.localStorage.getItem("clickedValueofList");
        console.log("clicked list item"+clickedListItem);
        //db = window.openDatabase("loginintro", "1.0", "loginintro", 1000000);
        var sqlQuery = 'SELECT * FROM loginTable WHERE username=\''+window.localStorage.getItem("clickedValueofList").trim()+'\';';

        console.log("selected list query:"+sqlQuery);
        db.transaction(function(tx)
        {
          tx.executeSql(sqlQuery,[],successCBofListItem,errorCBofListItem);
        },errorCB,successCB);
    }
    function successCBofListItem(tx,results)
    {   alert("erer");
      if(results != null && results.rows != null && results.rows.length > 0) 
         { alert("fdfdf");

         $('#list1').append('<li> UserName: '+results.rows.item(0).username+'</li>');
         $('#list1').append('<li> Password:' +results.rows.item(0).password+'</li>');
         $('#list1').append('<li> Emailid:' +results.rows.item(0).emailid+'</li>');
         console.log("username:" + results.rows.item(0).username);
         console.log("emailid:" + results.rows.item(0).emailid);
         console.log("password:" + results.rows.item(0).password);
         }
       $('#list1').listview('refresh');
    }
    function errorCBofListItem()
    {
        alert("errorCBofListItem");
    } 
```

这是我的代码，但它不能正常工作。

```
$('#list1').on('click','li',function()
    {
        $(this).hide();
        $('#list1').siblings('#editTextBox').show().val($(this).text()).focus();
    });

 $('#editTextBox').focusout(function()
    {       $(this).hide();
        $(this).siblings('#list1').show().text($(this).val());

    }); 
```

# java - Java：如果条件只检查一次

> ID：15902716
> 
> 赞同：1
> 
> 时间：2013-04-09T13:03:47.100
> 
> 标签：java, if-statement, conditional

我正在尝试使用以下代码在 Java 中创建一个简单的 Android 应用程序：

```
public class MainActivity extends Activity {

    //Declare variables
    boolean first = true;
    boolean secondorbefore = true;

        Button ClickMe = (Button) findViewById(R.id.clicker);

        ClickMe.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //Check to see if this is the first click
                if (first = true) {
                first = false;
                // DO STUFF FOR FIRST CLICK
                } else if ((secondorbefore = true) {
                    //so this is the second click?
                    secondorbefore = false;
                // DO STUFF FOR SECOND CLICK                
                    } else {
                    //OK it's the third click or later
                // DO STUFF FOR THIRD OR LATER CLICKS
                }
            }
        });

    } 
```

但是，它似乎只通过 if 条件一次。它在第一个实例中执行代码，包括将 secondorbefore 变量设置为 false，但随后的点击似乎什么也没做。代码 OnClickListener 正在随后的点击中执行，但它只是没有通过条件语句运行。

Java新手，所以我可能犯了一个非常明显的错误。

提前谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:05:02.863

**暗示：**

*   `=`是赋值运算符。
*   `==`是一个相等运算符。
*   在 if 语句中使用赋值运算符会发生什么？
*   在 if 语句中使用相等运算符时会发生什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T13:06:10.687

在`if`条件下，您始终必须使用`==`运算符进行比较，而*不是*单个`=`. 所以它会是：

```
if (first == true) {   // this is comparison
        first = false;  // this is assignment
        // DO STUFF FOR FIRST CLICK
 } else if ((secondorbefore == true) {
        //so this is the second click?
         secondorbefore = false;
        // DO STUFF FOR SECOND CLICK                
 } else {
        //OK it's the third click or later
        // DO STUFF FOR THIRD OR LATER CLICKS
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T13:05:50.580

如果您使用`=`而不是`==`分配值而不是比较。分配的返回是分配的值。所以在那种情况下，它将是`true`：

```
if(bool = true){...} 
```

和

```
if(true){...} 
```

在比较中是等价的。不同之处在于`bool`它将从该语句中携带新值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T13:04:55.583

将其更改 `if (first = true)` 为`{ if (first == true) {`

这里 = 是一个赋值运算符。但是 == 是相等运算符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T13:06:02.163

检查变量是否等于其他变量时，请始终使用`==`

IE

```
public void onClick(View v) {
    //Check to see if this is the first click
    if (first == true) {
        first = false;
        // DO STUFF FOR FIRST CLICK
    } else if ((secondorbefore == true) {
        //so this is the second click?
        secondorbefore = false;
        // DO STUFF FOR SECOND CLICK                
    } else {
        //OK it's the third click or later
        // DO STUFF FOR THIRD OR LATER CLICKS
    }
} 
```

# java - 如何在 Android 中使用 sharedpreferences 更改 Pin Number？

> ID：15902721
> 
> 赞同：0
> 
> 时间：2013-04-09T13:03:56.083
> 
> 标签：java, android

我正在使用共享首选项为应用程序 pin 实现 android 演示，我输入 pin 并确认 pin。问题是当我访问这个值时，它没有返回更新的值，它给了我`NullPointerException`。

```
String strGetPin;
public final String pref_filename = "settings";
String myPassword;
static SharedPreferences shaedPref;
public static String strdataReturned = "";

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.settings_list);
  activity = this;
  edtxt_EnterPin = (EditText) findViewById(R.id.edtxt_Pin);
  edtxt_NewPin = (EditText) findViewById(R.id.edtxt_NewPin);
  edtxt_ConfirmPin = (EditText) findViewById(R.id.edtxt_ConfirmPin);
  shaedPref = getSharedPreferences(pref_filename, 0);
  strdataReturned = shaedPref.getString("user", "");
  if (strdataReturned.equals("")) {
    SharedPreferences.Editor editor = shaedPref.edit();
    editor.putString("user", "1234"); // newData is new pass,passwordKey is key
    editor.commit();
  }
  btnChangePin = (Button) findViewById(R.id.btn_ChangePin);

  btnChangePin.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
      // TODO Auto-generated method stub
      myDialog = new Dialog(Settings_Activity.this);
      myDialog.setContentView(R.layout.pin_change);
      myDialog.setTitle("Application PIN Change");
      myDialog.setCancelable(false);
      //Button For Change Pin save
      Button btnChange = (Button) myDialog.findViewById(R.id.btn_Save);

      btnChange.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
          // TODO Auto-generated method stub
          String stringData = edtxt_EnterPin.getText().toString().trim();
          strdataReturned = shaedPref.getString("user", ""); // key/def message
          // if stored password is equal to entered password
          if (strdataReturned.equals(stringData)) {
            String newData = edtxt_NewPin.getText().toString().trim();
            SharedPreferences.Editor editor = shaedPref.edit();
            editor.putString("user", newData); // newData is new pass, passwordKey is key
            editor.commit();
            Toast.makeText(getApplicationContext(), "PIN Change successfully", Toast.LENGTH_LONG).show();
            edtxt_EnterPin.setText("");
            edtxt_NewPin.setText("");
          } else {
            Toast.makeText(getApplicationContext(), "Wrong Pin!", Toast.LENGTH_LONG).show();
            edtxt_EnterPin.setText("");
            edtxt_NewPin.setText("");
          }
        }
      });
      Button btnCancel = (Button) myDialog.findViewById(R.id.btn_Cancel);

      btnCancel.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
          // TODO Auto-generated method stub
          myDialog.dismiss();
        }
      });
      myDialog.show();
    }
  });
} 
```

日志猫：

```
04-09 18:42:12.694: D/(29235): onClick: Stoping Service
04-09 18:42:12.781: E/(29235): Service Stopped
04-09 18:42:19.861: D/dalvikvm(29235): GREF has increased to 201
04-09 18:42:50.712: D/AndroidRuntime(29235): Shutting down VM
04-09 18:42:50.712: W/dalvikvm(29235): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-09 18:42:50.721: E/AndroidRuntime(29235): FATAL EXCEPTION: main
04-09 18:42:50.721: E/AndroidRuntime(29235): java.lang.NullPointerException
04-09 18:42:50.721: E/AndroidRuntime(29235):    at com.sms_alert.Settings_Activity$1$1.onClick(Settings_Activity.java:95)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.view.View.performClick(View.java:2485)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.view.View$PerformClick.run(View.java:9080)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.os.Handler.handleCallback(Handler.java:587)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.os.Looper.loop(Looper.java:123)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at java.lang.reflect.Method.invoke(Method.java:507)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-09 18:42:50.721: E/AndroidRuntime(29235):    at dalvik.system.NativeStart.main(Native Method)
04-09 18:42:53.932: I/Process(29235): Sending signal. PID: 29235 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:57:45.063

在写入之前尝试清除 SharedPreferences。

```
editor.clear(); 
```

# ssh - 使用 SSH 下载 FTP 数据

> ID：15902723
> 
> 赞同：2
> 
> 时间：2013-04-09T13:03:59.410
> 
> 标签：ssh, debian, putty

我需要将文件从一台服务器传输到另一台服务器。通常我只是下载文件，然后使用 FTP 将它们上传到新服务器。

现在我面临着超过 15GB 数据的海量文件。是否可以直接从新服务器下载 em，从而跳过一步？我可以完全控制第二台服务器，但只有旧服务器上的 FTP 权限。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:32:20.343

您可以`wget`在新服务器上使用从旧服务器下载数据。就像是

```
$ wget -r -N -l inf 'ftp://old.example.com/' 
```

应该这样做。如果您需要更具体的内容，请查阅手册页；wget 非常强大。

或者，可以直接使用 FTP 从服务器传输到服务器。由于 FTP 使用单独的控制和数据连接，数据连接可以建立到与控制连接发起的主机不同的主机。这是通过将其中一台服务器切换到被动模式来完成的。我认为[SecureFX](https://www.vandyke.com/products/securefx/index.html)通过打开与两个服务器的连接并在它们之间拖放文件来支持这种操作模式。但是，我不知道是否有任何免费软件可以做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:28:17.640

如果您可以通过 SSH 对新服务器进行命令行访问，只需在新服务器上打开一个会话，然后在该会话中从旧服务器执行 FTP“mget”。

这里有命令行 FTP 的总结：[http ://www.cyberciti.biz/faq/linux-unix-ftp-commands/](http://www.cyberciti.biz/faq/linux-unix-ftp-commands/)

# mysql - node.js 同步mysql查询

> ID：15902724
> 
> 赞同：-1
> 
> 时间：2013-04-09T13:04:00.133
> 
> 标签：mysql, node.js, coffeescript

如何在 node.js 中同步使用 mysql？我想使用数据库中的数据执行查询并呈现正确呈现的表单，例如：

```
userData = db.query "SELECT * FROM users WHERE id=1"
form.bind(userData)
res.render 'user/edit', {'form' : form} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:34:58.627

通过标题，我假设您的意思是同步方式。答案是你不能。这是因为 NodeJS 是单线程的，并且由于 I/O（即与数据库的通信）是在单独的线程中处理的（NodeJS 内部使用，它对程序员不可用），所以 I/O 的结果被推送到事件循环的顶部。但是 NodeJS 不能在不离开当前事件的情况下跳转到事件循环中的另一个事件。

不管你喜不喜欢，你都必须坚持使用异步模式。

# objective-c - sqlite3_column_text 返回 Null

> ID：15902725
> 
> 赞同：1
> 
> 时间：2013-04-09T13:04:01.647
> 
> 标签：objective-c, sqlite

我有一个表，我想打印一行的内容，这里是表结构：

```
CREATE TABLE "quotes_type" ("type_id" INTEGER PRIMARY KEY  NOT NULL , "content" TEXT) 
```

我可以通过调试看到 type_id 并且值正确为 1 但我无法在 sqlite3_column_text 的帮助下返回上下文值这里是代码：

```
 NSString *qry = [NSString stringWithFormat: @"select * from quotes_type"];
    const char *count_stmt = [qry UTF8String];
    sqlite3_prepare_v2(contactDB, count_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_ERROR) {
        NSAssert1(0,@"Error when selecting rows  %s",sqlite3_errmsg(contactDB));
    } else {
        int myid=sqlite3_column_int(statement, 0);

        NSLog(@"Context: %s", sqlite3_column_text(statement, 1));
        NSLog(@"myid is %d",myid);

        sqlite3_finalize(statement);
        sqlite3_close(contactDB); 
```

问题是这一行：

```
 NSLog(@"Data: %s", sqlite3_column_text(statement, 1)); 
```

结果为空

我意识到它不会更新我的 sqlite 文件并且它正在从我以前的文件中读取我如何强制它从新的文件中读取？即使我删除了所有 .sqlite 文件但它仍然从某个地方读取它

# iphone - 新游戏中的 GKTurnBasedMatch 我可以等到其他玩家接受我的邀请吗？

> ID：15902728
> 
> 赞同：0
> 
> 时间：2013-04-09T13:04:10.440
> 
> 标签：iphone, ios, game-center, gamekit

我正在编写回合制游戏的多人游戏部分，我正在使用游戏中心来管理比赛。使用 GKTurnBasedMatch 开始新游戏不会立即向其他玩家发送邀请通知。要发送通知，我必须采取行动并结束第一回合...我可以修改此行为吗？只有当其他玩家已经接受了我的邀请时，我才想进行我的第一个回合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T00:53:53.563

这样做的一种方法是在 NSData 中添加一个值，比如一个 int，它会记住它的轮数。开始您的游戏，然后立即结束您的回合，而不向用户显示任何内容。它所做的只是增加轮数。当其他玩家接受时，如果轮数为第二轮，则再次增加轮数，并结束他们的轮次。继续这种 end-increment-end 模式，直到第一个玩家收到转身，然后开始正常玩，所有玩家都接受了邀请并正式加入游戏。

我不建议这样做，因为这可能会导致准备开始的玩家的游戏时间显着延迟。他们最终可能会从您的游戏中期待它，但标准模式的玩家开始游戏的明显等待时间更短。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T14:14:03.303

您可以检查`status`其他参与者的财产`GKTurnBasedParticipant`。如果它的状态仍然是`GKTurnBasedParticipantStatusInvited`，请禁止自己打开游戏控制器并显示警报。

[GKTurnBasedParticipant 文档](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedParticipant_Ref/Reference/Reference.html#//apple_ref/occ/cl/GKTurnBasedParticipant)

# spring - 每天两次 Cron

> ID：15902737
> 
> 赞同：3
> 
> 时间：2013-04-09T13:04:37.970
> 
> 标签：spring, cron, scheduled-tasks

我想在早上 5 点和 1830 安排一个 cron 作业

我试过

```
0,30      5,18     *       *       * 
```

但这实际上每天运行四次

*   0500
*   0530
*   1800
*   1830

我可以设置 cron 来执行此操作吗？我正在使用 spring 来运行这个 cron 作业，所以如果我不能使用标准 cron 来做，我可以用另一种方式来做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T13:05:50.883

您需要用两行来安排它：

```
0      5     *       *       *
30    18     *       *       * 
```

无法指定某些分钟/小时组合：如果您定义其中的两对，则将执行所有组合。

# symfony - Symfony2：已删除的属性仍在查询中使用

> ID：15902739
> 
> 赞同：2
> 
> 时间：2013-04-09T13:04:41.070
> 
> 标签：symfony, doctrine-orm, apc, query-builder, doctrine-query

我从一个实体（销售）中删除了一个属性（预告片）。我使用 CLi 更新数据库和实体：

```
$ php app/console doctrine:schema:update --complete --force
$ php app/console doctrine:generate:entities Our --no-backup
$ php app/console doctrine:cache:clear-metadata
$ php app/console doctrine:cache:clear-result 
```

我清除了缓存：

```
$ php app/console cache:clear --no-optional-warmers --no-warmup 
```

现在我有一个由查询生成器创建的查询：

```
$qb = $this->createQueryBuilder('s');
$q = $qb
    ->select('s.id')
    ->leftJoin('s.bills','b')
    ->where('b.paid = true')
    ->getQuery()
    ->getResult(); 
```

这会引发错误，因为它会生成一个包含旧属性的 select 语句：

```
Column not found: 1054 Unknown column 's0_.teaser' in 'field list' 
```

我试图了解 Doctrine 如何执行查询，但未能找到问题的根源。有没有人有任何线索？

**更新：**我从查询中获取 DQL，由 querybuilder 生成，然后用它来创建一个新的查询。同样的错误。然后我将 DQL 中的一个单词从大写更改为小写（*LEFT*现在是*Left*）并且那个执行得很好。

```
$q = $this->getEntityManager()
->createQuery('SELECT s,b FROM Our\BuyBundle\Entity\Sale s Left JOIN s.bills b WHERE s.id IN (:randomIds)')
->setParameter('randomIds', $allSaleIds); 
```

所以看起来 DQL 语句被缓存在某个地方，使用 DQL 作为哈希来获取相应的 SQL 语句。我仍然无法弄清楚在哪里以及如何清除缓存的信息。特别是考虑到我也删除了 app/cache 文件夹中的所有内容。

UPDATE2：找到解决方案。必须手动清除 APC 缓存，因为控制台不能这样做。所以解决方案是：

```
$ php app/console doctrine:cache:clear-query 
```

如果这不起作用，请清除您的 APC 缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:18:50.153

我的问题是 APC 缓存。

我无法清除CLI ( *app/console ) 中的**查询缓存*，因为控制台无法（*或不允许*）清除 APC 缓存。所以我不得不手动清除 APC 缓存。

 **解决方案是：

```
$ php app/console doctrine:cache:clear-result 
```

如果这不起作用，请手动**清除 APC 缓存**（*或您使用的任何缓存）。***

# node.js - 服务器有时会关闭 - Node.js express.js socket.io

> ID：15902742
> 
> 赞同：0
> 
> 时间：2013-04-09T13:04:48.240
> 
> 标签：node.js, express, socket.io

由于某种未知的原因，我的服务器正在关闭，我已经登录服务器并再次运行我的应用程序。有人有这个问题吗？

这是我的日志。

```
info: socket.io started  
debug: client authorized  
info: handshake authorized m2-7nzTeYuhWz7aT9-AQ  
debug: setting request GET /socket.io/1/websocket/m2-7nzTeYuhWz7aT9-AQ  
debug: set heartbeat interval for client m2-7nzTeYuhWz7aT9-AQ  
debug: client authorized for  
debug: websocket writing 1::  
debug: websocket writing 5:::{"name":"connect","args":[{"objSeats":{"4536":{"5851":{"6":[]}}}}]}  
debug: websocket writing 5:::{"name":"connect","args":[{"objSeats":{"4536":{"5851":{"6":[]}}}}]}  
debug: websocket writing 5:::{"name":"connect","args":[{"objSeats":{"4536":{"5851":{"6":[]}}}}]}  
info: transport end (socket end)  
debug: set close timeout for client fgFEi9a8ZCJ4vGe49-AO  
debug: cleared close timeout for client fgFEi9a8ZCJ4vGe49-AO  
debug: cleared heartbeat interval for client fgFEi9a8ZCJ4vGe49-AO  
debug: discarding transport  
info: transport end (socket end)  
debug: set close timeout for client vbWkAQBC6rMIiOl99-AP  
debug: cleared close timeout for client vbWkAQBC6rMIiOl99-AP  
debug: cleared heartbeat interval for client vbWkAQBC6rMIiOl99-AP  
debug: discarding transport  
info: transport end (socket end)  
debug: set close timeout for client m2-7nzTeYuhWz7aT9-AQ  
debug: cleared close timeout for client m2-7nzTeYuhWz7aT9-AQ  
debug: cleared heartbeat interval for client m2-7nzTeYuhWz7aT9-AQ  
debug: discarding transport  
debug: client authorized  
info: handshake authorized i5J-qT9e34ta2l3J9-AR  
debug: setting request GET /socket.io/1/websocket/i5J-qT9e34ta2l3J9-AR  
debug: set heartbeat interval for client i5J-qT9e34ta2l3J9-AR  
debug: client authorized for  
debug: websocket writing 1::  
debug: websocket writing 5:::{"name":"connect","args":[{"objSeats":{"4536":{"5851":{"6":[]}}}}]}  
info: transport end (socket end)  
debug: set close timeout for client i5J-qT9e34ta2l3J9-AR  
debug: cleared close timeout for client i5J-qT9e34ta2l3J9-AR  
debug: cleared heartbeat interval for client i5J-qT9e34ta2l3J9-AR  
debug: discarding transport  
debug: client authorized  
info: handshake authorized RJTRf_Jy2WX-uUej9-AS  
debug: setting request GET /socket.io/1/websocket/RJTRf_Jy2WX-uUej9-AS  
debug: set heartbeat interval for client RJTRf_Jy2WX-uUej9-AS  
debug: client authorized for  
debug: websocket writing 1::  
debug: websocket writing 5:::{"name":"connect","args":[{"objSeats":{"4536":{"5851":{"6":[]}}}}]}  
debug: emitting heartbeat for client RJTRf_Jy2WX-uUej9-AS  
debug: websocket writing 2::  
debug: set heartbeat timeout for client RJTRf_Jy2WX-uUej9-AS  
debug: got heartbeat packet  
debug: cleared heartbeat timeout for client RJTRf_Jy2WX-uUej9-AS  
debug: set heartbeat interval for client RJTRf_Jy2WX-uUej9-AS  
info: transport end (undefined)  
debug: set close timeout for client RJTRf_Jy2WX-uUej9-AS  
debug: cleared close timeout for client RJTRf_Jy2WX-uUej9-AS  
debug: cleared heartbeat interval for client RJTRf_Jy2WX-uUej9-AS  
debug: discarding transport 
```

# c++ - 运行 OpenCV HOG 示例

> ID：15902743
> 
> 赞同：3
> 
> 时间：2013-04-09T13:04:48.893
> 
> 标签：c++, opencv

任何 OpenCV 专家？我对 OpenCV 有点陌生。我想运行 ocl 文件夹下的 hog.cpp。我在 MSVC++9.0 中编译文件时出错

```
1>------ Build started: Project: hog_ocl, Configuration: Debug Win32 ------
1>Linking...
1>hog.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::ocl::HOGDescriptor::detectMultiScale(class cv::ocl::oclMat const &,class std::vector<class cv::Rect_<int>,class std::allocator<class cv::Rect_<int> > > &,double,class cv::Size_<int>,class cv::Size_<int>,double,int)" (?detectMultiScale@HOGDescriptor@ocl@cv@@QAEXABVoclMat@23@AAV?$vector@V?$Rect_@H@cv@@V?$allocator@V?$Rect_@H@cv@@@std@@@std@@NV?$Size_@H@3@2NH@Z) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::ocl::oclMat::upload(class cv::Mat const &)" (?upload@oclMat@ocl@cv@@QAEXABVMat@3@@Z) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::ocl::HOGDescriptor::setSVMDetector(class std::vector<float,class std::allocator<float> > const &)" (?setSVMDetector@HOGDescriptor@ocl@cv@@QAEXABV?$vector@MV?$allocator@M@std@@@std@@@Z) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::ocl::HOGDescriptor::HOGDescriptor(class cv::Size_<int>,class cv::Size_<int>,class cv::Size_<int>,class cv::Size_<int>,int,double,double,bool,int)" (??0HOGDescriptor@ocl@cv@@QAE@V?$Size_@H@2@000HNN_NH@Z) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: static class std::vector<float,class std::allocator<float> > __cdecl cv::ocl::HOGDescriptor::getPeopleDetector48x96(void)" (?getPeopleDetector48x96@HOGDescriptor@ocl@cv@@SA?AV?$vector@MV?$allocator@M@std@@@std@@XZ) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: static class std::vector<float,class std::allocator<float> > __cdecl cv::ocl::HOGDescriptor::getPeopleDetector64x128(void)" (?getPeopleDetector64x128@HOGDescriptor@ocl@cv@@SA?AV?$vector@MV?$allocator@M@std@@@std@@XZ) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "int __cdecl cv::ocl::getDevice(class std::vector<class cv::ocl::Info,class std::allocator<class cv::ocl::Info> > &,int)" (?getDevice@ocl@cv@@YAHAAV?$vector@VInfo@ocl@cv@@V?$allocator@VInfo@ocl@cv@@@std@@@std@@H@Z) referenced in function "public: void __thiscall App::run(void)" (?run@App@@QAEXXZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::ocl::oclMat::release(void)" (?release@oclMat@ocl@cv@@QAEXXZ) referenced in function "public: __thiscall cv::ocl::oclMat::~oclMat(void)" (??1oclMat@ocl@cv@@QAE@XZ)
1>hog.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::ocl::Info::~Info(void)" (??1Info@ocl@cv@@QAE@XZ) referenced in function "public: void * __thiscall cv::ocl::Info::`scalar deleting destructor'(unsigned int)" (??_GInfo@ocl@cv@@QAEPAXI@Z)
1>C:\Users\CT\Documents\Visual Studio 2008\Projects\hog_ocl\Debug\hog_ocl.exe : fatal error LNK1120: 9 unresolved externals
1>Build log was saved at "file://c:\Users\CT\Documents\Visual Studio 2008\Projects\hog_ocl\hog_ocl\Debug\BuildLog.htm"
1>hog_ocl - 10 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

起初，我`C:\opencv\build\x86\vc9\lib`在 project->config 中包含了所有库。属性->链接器->输入。不幸的是，它没有用。因此，通过尝试，我排除了不能最小化错误计数的库并达到以下列表

```
opencv_imgproc244.lib
opencv_highgui244.lib
opencv_core244.lib
opencv_objdetect244.lib 
```

仍然没有工作。我想知道我是否从错误的样本开始，对我来说太先进了？

添加。信息：我按照手册安装 OpenCV 甚至重建了库。希望我的程序是正确的。

代码（OpenCV 2.4.4）：

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <iomanip>
#include <stdexcept>
#include "opencv2/ocl/ocl.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace std;
using namespace cv;

bool help_showed = false;

class Args
{
public:
    Args();
    static Args read(int argc, char** argv);

    string src;
    bool src_is_video;
    bool src_is_camera;
    int camera_id;

    bool write_video;
    string dst_video;
    double dst_video_fps;

    bool make_gray;

    bool resize_src;
    int width, height;

    double scale;
    int nlevels;
    int gr_threshold;

    double hit_threshold;
    bool hit_threshold_auto;

    int win_width;
    int win_stride_width, win_stride_height;

    bool gamma_corr;
};

class App
{
public:
    App(const Args& s);
    void run();

    void handleKey(char key);

    void hogWorkBegin();
    void hogWorkEnd();
    string hogWorkFps() const;

    void workBegin();
    void workEnd();
    string workFps() const;

    string message() const;

private:
    App operator=(App&);

    Args args;
    bool running;

    bool use_gpu;
    bool make_gray;
    double scale;
    int gr_threshold;
    int nlevels;
    double hit_threshold;
    bool gamma_corr;

    int64 hog_work_begin;
    double hog_work_fps;

    int64 work_begin;
    double work_fps;
};

static void printHelp()
{
    cout << "Histogram of Oriented Gradients descriptor and detector sample.\n"
         << "\nUsage: hog_gpu\n"
         << "  (<image>|--video <vide>|--camera <camera_id>) # frames source\n"
         << "  [--make_gray <true/false>] # convert image to gray one or not\n"
         << "  [--resize_src <true/false>] # do resize of the source image or not\n"
         << "  [--width <int>] # resized image width\n"
         << "  [--height <int>] # resized image height\n"
         << "  [--hit_threshold <double>] # classifying plane distance threshold (0.0 usually)\n"
         << "  [--scale <double>] # HOG window scale factor\n"
         << "  [--nlevels <int>] # max number of HOG window scales\n"
         << "  [--win_width <int>] # width of the window (48 or 64)\n"
         << "  [--win_stride_width <int>] # distance by OX axis between neighbour wins\n"
         << "  [--win_stride_height <int>] # distance by OY axis between neighbour wins\n"
         << "  [--gr_threshold <int>] # merging similar rects constant\n"
         << "  [--gamma_correct <int>] # do gamma correction or not\n"
         << "  [--write_video <bool>] # write video or not\n"
         << "  [--dst_video <path>] # output video path\n"
         << "  [--dst_video_fps <double>] # output video fps\n";
    help_showed = true;
}

int main(int argc, char** argv)
{
    try
    {
        if (argc < 2)
            printHelp();
        Args args = Args::read(argc, argv);
        if (help_showed)
            return -1;
        App app(args);
        app.run();
    }
    catch (const Exception& e) { return cout << "error: "  << e.what() << endl, 1; }
    catch (const exception& e) { return cout << "error: "  << e.what() << endl, 1; }
    catch(...) { return cout << "unknown exception" << endl, 1; }
    return 0;
}

Args::Args()
{
    src_is_video = false;
    src_is_camera = false;
    camera_id = 0;

    write_video = false;
    dst_video_fps = 24.;

    make_gray = false;

    resize_src = false;
    width = 640;
    height = 480;

    scale = 1.05;
    nlevels = 13;
    gr_threshold = 8;
    hit_threshold = 1.4;
    hit_threshold_auto = true;

    win_width = 48;
    win_stride_width = 8;
    win_stride_height = 8;

    gamma_corr = true;
}

Args Args::read(int argc, char** argv)
{
    Args args;
    for (int i = 1; i < argc; i++)
    {
        if (string(argv[i]) == "--make_gray") args.make_gray = (string(argv[++i]) == "true");
        else if (string(argv[i]) == "--resize_src") args.resize_src = (string(argv[++i]) == "true");
        else if (string(argv[i]) == "--width") args.width = atoi(argv[++i]);
        else if (string(argv[i]) == "--height") args.height = atoi(argv[++i]);
        else if (string(argv[i]) == "--hit_threshold")
        {
            args.hit_threshold = atof(argv[++i]);
            args.hit_threshold_auto = false;
        }
        else if (string(argv[i]) == "--scale") args.scale = atof(argv[++i]);
        else if (string(argv[i]) == "--nlevels") args.nlevels = atoi(argv[++i]);
        else if (string(argv[i]) == "--win_width") args.win_width = atoi(argv[++i]);
        else if (string(argv[i]) == "--win_stride_width") args.win_stride_width = atoi(argv[++i]);
        else if (string(argv[i]) == "--win_stride_height") args.win_stride_height = atoi(argv[++i]);
        else if (string(argv[i]) == "--gr_threshold") args.gr_threshold = atoi(argv[++i]);
        else if (string(argv[i]) == "--gamma_correct") args.gamma_corr = (string(argv[++i]) == "true");
        else if (string(argv[i]) == "--write_video") args.write_video = (string(argv[++i]) == "true");
        else if (string(argv[i]) == "--dst_video") args.dst_video = argv[++i];
        else if (string(argv[i]) == "--dst_video_fps") args.dst_video_fps = atof(argv[++i]);
        else if (string(argv[i]) == "--help") printHelp();
        else if (string(argv[i]) == "--video") { args.src = argv[++i]; args.src_is_video = true; }
        else if (string(argv[i]) == "--camera") { args.camera_id = atoi(argv[++i]); args.src_is_camera = true; }
        else if (args.src.empty()) args.src = argv[i];
        else throw runtime_error((string("unknown key: ") + argv[i]));
    }
    return args;
}

App::App(const Args& s)
{
    args = s;
    cout << "\nControls:\n"
         << "\tESC - exit\n"
         << "\tm - change mode GPU <-> CPU\n"
         << "\tg - convert image to gray or not\n"
         << "\t1/q - increase/decrease HOG scale\n"
         << "\t2/w - increase/decrease levels count\n"
         << "\t3/e - increase/decrease HOG group threshold\n"
         << "\t4/r - increase/decrease hit threshold\n"
         << endl;

    use_gpu = true;
    make_gray = args.make_gray;
    scale = args.scale;
    gr_threshold = args.gr_threshold;
    nlevels = args.nlevels;

    if (args.hit_threshold_auto)
        args.hit_threshold = args.win_width == 48 ? 1.4 : 0.;
    hit_threshold = args.hit_threshold;

    gamma_corr = args.gamma_corr;

    if (args.win_width != 64 && args.win_width != 48)
        args.win_width = 64;

    cout << "Scale: " << scale << endl;
    if (args.resize_src)
        cout << "Resized source: (" << args.width << ", " << args.height << ")\n";
    cout << "Group threshold: " << gr_threshold << endl;
    cout << "Levels number: " << nlevels << endl;
    cout << "Win width: " << args.win_width << endl;
    cout << "Win stride: (" << args.win_stride_width << ", " << args.win_stride_height << ")\n";
    cout << "Hit threshold: " << hit_threshold << endl;
    cout << "Gamma correction: " << gamma_corr << endl;
    cout << endl;
}

void App::run()
{
    std::vector<ocl::Info> oclinfo;
    ocl::getDevice(oclinfo);
    running = true;
    cv::VideoWriter video_writer;

    Size win_size(args.win_width, args.win_width * 2); //(64, 128) or (48, 96)
    Size win_stride(args.win_stride_width, args.win_stride_height);

    // Create HOG descriptors and detectors here
    vector<float> detector;
    if (win_size == Size(64, 128))
        detector = cv::ocl::HOGDescriptor::getPeopleDetector64x128();
    else
        detector = cv::ocl::HOGDescriptor::getPeopleDetector48x96();

    cv::ocl::HOGDescriptor gpu_hog(win_size, Size(16, 16), Size(8, 8), Size(8, 8), 9,
                                   cv::ocl::HOGDescriptor::DEFAULT_WIN_SIGMA, 0.2, gamma_corr,
                                   cv::ocl::HOGDescriptor::DEFAULT_NLEVELS);
    cv::HOGDescriptor cpu_hog(win_size, Size(16, 16), Size(8, 8), Size(8, 8), 9, 1, -1,
                              HOGDescriptor::L2Hys, 0.2, gamma_corr, cv::HOGDescriptor::DEFAULT_NLEVELS);
    gpu_hog.setSVMDetector(detector);
    cpu_hog.setSVMDetector(detector);

    while (running)
    {
        VideoCapture vc;
        Mat frame;

        if (args.src_is_video)
        {
            vc.open(args.src.c_str());
            if (!vc.isOpened())
                throw runtime_error(string("can't open video file: " + args.src));
            vc >> frame;
        }
        else if (args.src_is_camera)
        {
            vc.open(args.camera_id);
            if (!vc.isOpened())
            {
                stringstream msg;
                msg << "can't open camera: " << args.camera_id;
                throw runtime_error(msg.str());
            }
            vc >> frame;
        }
        else
        {
            frame = imread(args.src);
            if (frame.empty())
                throw runtime_error(string("can't open image file: " + args.src));
        }

        Mat img_aux, img, img_to_show;
        ocl::oclMat gpu_img;

        // Iterate over all frames
        while (running && !frame.empty())
        {
            workBegin();

            // Change format of the image
            if (make_gray) cvtColor(frame, img_aux, CV_BGR2GRAY);
            else if (use_gpu) cvtColor(frame, img_aux, CV_BGR2BGRA);
            else frame.copyTo(img_aux);

            // Resize image
            if (args.resize_src) resize(img_aux, img, Size(args.width, args.height));
            else img = img_aux;
            img_to_show = img;

            gpu_hog.nlevels = nlevels;
            cpu_hog.nlevels = nlevels;

            vector<Rect> found;

            // Perform HOG classification
            hogWorkBegin();
            if (use_gpu)
            {
                gpu_img.upload(img);
                gpu_hog.detectMultiScale(gpu_img, found, hit_threshold, win_stride,
                                         Size(0, 0), scale, gr_threshold);
            }
            else cpu_hog.detectMultiScale(img, found, hit_threshold, win_stride,
                                          Size(0, 0), scale, gr_threshold);
            hogWorkEnd();

            // Draw positive classified windows
            for (size_t i = 0; i < found.size(); i++)
            {
                Rect r = found[i];
                rectangle(img_to_show, r.tl(), r.br(), CV_RGB(0, 255, 0), 3);
            }

            if (use_gpu)
                putText(img_to_show, "Mode: GPU", Point(5, 25), FONT_HERSHEY_SIMPLEX, 1., Scalar(255, 100, 0), 2);
            else
                putText(img_to_show, "Mode: CPU", Point(5, 25), FONT_HERSHEY_SIMPLEX, 1., Scalar(255, 100, 0), 2);
            putText(img_to_show, "FPS (HOG only): " + hogWorkFps(), Point(5, 65), FONT_HERSHEY_SIMPLEX, 1., Scalar(255, 100, 0), 2);
            putText(img_to_show, "FPS (total): " + workFps(), Point(5, 105), FONT_HERSHEY_SIMPLEX, 1., Scalar(255, 100, 0), 2);
            imshow("opencv_gpu_hog", img_to_show);

            if (args.src_is_video || args.src_is_camera) vc >> frame;

            workEnd();

            if (args.write_video)
            {
                if (!video_writer.isOpened())
                {
                    video_writer.open(args.dst_video, CV_FOURCC('x','v','i','d'), args.dst_video_fps,
                                      img_to_show.size(), true);
                    if (!video_writer.isOpened())
                        throw std::runtime_error("can't create video writer");
                }

                if (make_gray) cvtColor(img_to_show, img, CV_GRAY2BGR);
                else cvtColor(img_to_show, img, CV_BGRA2BGR);

                video_writer << img;
            }

            handleKey((char)waitKey(3));
        }
    }
}

void App::handleKey(char key)
{
    switch (key)
    {
    case 27:
        running = false;
        break;
    case 'm':
    case 'M':
        use_gpu = !use_gpu;
        cout << "Switched to " << (use_gpu ? "CUDA" : "CPU") << " mode\n";
        break;
    case 'g':
    case 'G':
        make_gray = !make_gray;
        cout << "Convert image to gray: " << (make_gray ? "YES" : "NO") << endl;
        break;
    case '1':
        scale *= 1.05;
        cout << "Scale: " << scale << endl;
        break;
    case 'q':
    case 'Q':
        scale /= 1.05;
        cout << "Scale: " << scale << endl;
        break;
    case '2':
        nlevels++;
        cout << "Levels number: " << nlevels << endl;
        break;
    case 'w':
    case 'W':
        nlevels = max(nlevels - 1, 1);
        cout << "Levels number: " << nlevels << endl;
        break;
    case '3':
        gr_threshold++;
        cout << "Group threshold: " << gr_threshold << endl;
        break;
    case 'e':
    case 'E':
        gr_threshold = max(0, gr_threshold - 1);
        cout << "Group threshold: " << gr_threshold << endl;
        break;
    case '4':
        hit_threshold+=0.25;
        cout << "Hit threshold: " << hit_threshold << endl;
        break;
    case 'r':
    case 'R':
        hit_threshold = max(0.0, hit_threshold - 0.25);
        cout << "Hit threshold: " << hit_threshold << endl;
        break;
    case 'c':
    case 'C':
        gamma_corr = !gamma_corr;
        cout << "Gamma correction: " << gamma_corr << endl;
        break;
    }
}

inline void App::hogWorkBegin() { hog_work_begin = getTickCount(); }

inline void App::hogWorkEnd()
{
    int64 delta = getTickCount() - hog_work_begin;
    double freq = getTickFrequency();
    hog_work_fps = freq / delta;
}

inline string App::hogWorkFps() const
{
    stringstream ss;
    ss << hog_work_fps;
    return ss.str();
}

inline void App::workBegin() { work_begin = getTickCount(); }

inline void App::workEnd()
{
    int64 delta = getTickCount() - work_begin;
    double freq = getTickFrequency();
    work_fps = freq / delta;
}

inline string App::workFps() const
{
    stringstream ss;
    ss << work_fps;
    return ss.str();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:34:46.820

事实证明，`opencv_ocl.lib`运行此代码需要该库，`ocl`文件夹下的其他示例也是如此。OpenCV 必须使用 CMake 和 C 编译器在您的设备上构建（我使用的是 MSVC 2010）。经过几天和长时间的尝试在 OCL 和 GPU 上构建/重建和读数后，我设法正确地构建了它。我只是想知道为什么它不能像其他库一样预先构建并包含在包中，是因为硬件依赖吗？

但是，这是所需的库列表`ocl\hog.cpp`：

```
opencv_imgproc245.lib
opencv_highgui245.lib
opencv_core245.lib
opencv_objdetect245.lib
opencv_ocl245.lib 
```

使用最新的 OpenCV 2.4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:17:35.247

我认为您需要包含 features2d 库。

# java - 找不到主类：SortAlgorithms

> ID：15902744
> 
> 赞同：2
> 
> 时间：2013-04-09T13:04:51.020
> 
> 标签：java, linux, bash, boinc

我有这个Java类：

```
public class SortAlgorithms {
public static void main(String... args) {

        String out = "";
        int vec1[] = readFile(args[0]);

        out = out + write(vec1);
        out = out + "=== INSERTION SORT ===\n";
        insertionSort(vec1, vec1.length);
        out = out + write(vec1) + "\n";
...
}
...
} 
```

我将它部署在我的 Boinc 平台上的其他机器上。有一个 bash 脚本来运行这个类：

```
#!/bin/sh

export JAVA_HOME="/usr/java/jdk1.6.0_34/"
export PATH=${JAVA_HOME}/bin:${PATH}

java SortAlgorithms 10 "output.txt" > saida.txt 
```

我收到这个错误：

```
<stderr_txt>
Exception in thread "main" java.lang.ClassFormatError: Incompatible magic value 1014198118 in class file SortAlgorithms
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: SortAlgorithms.  Program will exit.

</stderr_txt> 
```

有谁知道发生了什么？提前谢谢。费利佩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:02:39.393

您的类文件未正确复制。它以字符串 '<sof' 开头，这绝对不是 java 字节码的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:39:24.163

查看 Java API：

> 文件格式错误或不能被解释为类文件。

我相信您需要在将运行代码的机器上编译您的 Java 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:24:02.770

虽然 maxkar 和 user1773630 的答案似乎都是正确的，但听起来确实像 .class 文件没有正确传输。比较校验和，还是制作一个 .jar？

如果您安装了不同主要版本的 jdk，也可能存在类兼容性问题，这可能会导致类似的错误。

# iphone - 优化此核心数据请求

> ID：15902749
> 
> 赞同：1
> 
> 时间：2013-04-09T13:05:08.260
> 
> 标签：iphone, ios, objective-c, core-data

我在 Core Data 中有一个名为 MusicInterest 的实体。我必须一次添加 5000 个左右，我当前的过程是查询 MusicInterest 是否已经存在，如果不创建一个新的。

似乎这需要 5000 次到商店查看每个标题是否存在。当然，还有插入行程，但 5000 次查询让我慢了下来。

每个 FacebookFriend 都会有多种音乐兴趣，我使用字符串标题数组枚举每个音乐，调用以下代码。

任何想法如何优化这个？

```
+ (MusicInterest*) musicInterestForFacebookFriend:(FacebookFriend*)facebookFriend WithTitle:(NSString*)musicTitle UsingManagedObjectContext:(NSManagedObjectContext*)moc
{
    // query to see if there
    NSArray *matches = [self queryForMusicTitle:musicTitle moc:moc];

    if (([matches count] >= 1)) {
        // NSLog(@"Music already in database");
        MusicInterest *existingMusic = [matches lastObject];
        [existingMusic addLikedByObject:facebookFriend];
        return [matches lastObject];
    } else {
        // create new Music Interest
        MusicInterest *newMusic = [NSEntityDescription insertNewObjectForEntityForName:@"MusicInterest" inManagedObjectContext:moc];
        newMusic.title = musicTitle;
        [newMusic addLikedByObject:facebookFriend];
        return newMusic;
    }
}

+ (NSArray *)queryForMusicTitle:(NSString *)MusicTitle moc:(NSManagedObjectContext *)moc
{
    // query to see if there
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"MusicInterest"];
    request.predicate = [NSPredicate predicateWithFormat:@"title == %@", [NSString stringWithFormat:@"%@", MusicTitle]];

    NSError *error = nil;
    NSArray *matches = [moc executeFetchRequest:request error:&error];
    if (error) {
        NSLog(@"Error querying title in Music interest. Error = %@", error);
    }
    return matches;
} 
```

更新：

我采用了 Core Data 编程指南中建议的设计，它把我的时间从 12 秒减少到了 4 秒（在其他方面仍然需要一些优化：）

该指南仅包含一半示例代码 - 我想我会分享我的完整实现：

```
musicArray = [[music componentsSeparatedByString:@", "] sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
                if (obj1 > obj2)
                    return NSOrderedDescending;
                else if (obj1 < obj2)
                    return NSOrderedAscending;
                return NSOrderedSame;
            }];

            if (musicArray) {

                NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"MusicInterest"];
                [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"title IN %@", musicArray]];
                [fetchRequest setSortDescriptors:
                 @[[[NSSortDescriptor alloc] initWithKey: @"title" ascending:YES]]];

                NSError *fetchError = nil;
                NSArray *musicInterestMatchingTitles = [backgroundContext executeFetchRequest:fetchRequest error:&fetchError];

                if ([musicArray count] > 0) {
                    // walk musicArray and musicInterestsMatchingTitles in parallel
                    for (int i = 0; i < [musicArray count]; i++) {
                        NSString *title = musicArray[i];
                        if (i < [musicInterestMatchingTitles count]) {
                            MusicInterest *comparingMusicInterest = musicInterestMatchingTitles[i];
                            // compare each title
                            if (![title isEqualToString:comparingMusicInterest.title]) {
                                // if it doesn't exist as a ManagedObject (a MusicInterest), create one
                                MusicInterest *musicInterest = [MusicInterest createNewMusicInterestUsingManagedObjectContext:backgroundContext];
                                musicInterest.title = title;
                                [musicInterest addLikedByObject:friend];
                            } else {
                                // otherwise, just establish the relationship
                                [comparingMusicInterest addLikedByObject:friend];
                            }
                        } else {
                            // if there are no existing matching managedObjects, create one
                            MusicInterest *musicInterest = [MusicInterest createNewMusicInterestUsingManagedObjectContext:backgroundContext];
                            musicInterest.title = title;
                            [musicInterest addLikedByObject:friend];
                        }
                    }
                }
            }

        }];
        [self saveBackgroundContext:backgroundContext]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:19:05.560

[在“Core Data Programming Guide”中高效地实现 Find-or-Create](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW4)描述了一种在这里可能有用的模式。基本思想是：

*   按也存储在数据库中的某个唯一 ID 对要插入/更新的项目列表进行排序。
*   执行一个*获取请求*，从数据库中获取所有具有列表中 id 的对象，并按相同的 id 排序。
*   现在并行遍历您的列表和获取的项目数组，以查找必须插入哪些项目以及哪些项目已经存在并且可以更新。

# python - 使用 Python 中的 API 查询在 SQL Alchemy 中插入关系数据

> ID：15902754
> 
> 赞同：1
> 
> 时间：2013-04-09T13:05:15.703
> 
> 标签：python, json, api, sqlalchemy, python-requests

也许我之前的问题太长而且没完没了地回答，对不起......我会尝试更具体地缩短我之前的问题

我可以从 API 查询（json 格式作为输出）中提取以下信息：

基因1

```
Experiment1     
Experiment2     
Experiment3     
Experiment4 
```

基因2

```
Experiment5     
Experiment2     
Experiment3     
Experiment8     
Experiment9 
```

> [...]

所以我获得了研究过它们的基因及其相关实验......一个基因可以有多个实验，1个实验可以有多个基因（多对多）

我在 SQL Alchemy 中有这个模式：

```
from sqlalchemy import create_engine, Column, Integer, String, Date, ForeignKey, Table, Float
from sqlalchemy.orm import sessionmaker, relationship, backref
from sqlalchemy.ext.declarative import declarative_base
import requests

Base = declarative_base()

Genes2experiments = Table('genes2experiments',Base.metadata,                                                                                                                                                                                                     
  Column('gene_id', String, ForeignKey('genes.id')),                                                                                                                                                                                                       
  Column('experiment_id', String, ForeignKey('experiments.id'))
)

class Genes(Base):
    __tablename__ = 'genes'
    id = Column(String(45), primary_key=True)
    experiments = relationship("Experiments", secondary=Genes2experiments, backref="genes")
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<genes(id:'%s')>" % (self.id)

class Experiments(Base):
    __tablename__ = 'experiments'
    id = Column(String(45), primary_key=True)
    def __init__(self, id=""):
        self.id= id
    def __repr__(self):
        return "<experiments(id:'%s')>" % (self.id)

def setUp():
    global Session
    engine=create_engine('mysql://root:password@localhost/db_name?charset=utf8', pool_recycle=3600,echo=False)
    Session=sessionmaker(bind=engine)

def add_data():   
    session=Session()
    for i in range(0,1000,200):
        request= requests.get('http://www.ebi.ac.uk/gxa/api/v1',params={"updownInOrganism_part":"brain","rows":200,"start":i})
        result = request.json
        for item in result['results']:
            gene_to_add = item['gene']['ensemblGeneId']            
    session.commit()
    session.close()       

setUp()
add_data() 
```

使用此代码，我只需将 API 查询到基因表中的所有基因添加到我的数据库中......

第一个问题：我应该如何以及何时添加实验信息以保持他们的关系？？？

第二个问题：我应该在 Experiments 类中添加一个新的辅助关系，就像在 Genes 类中一样，还是只放一个就足够了？

谢谢

（更多上下文/信息：[我以前的问题](https://stackoverflow.com/questions/15899565/how-to-insert-relational-data-many-to-many-in-sql-alchemy-by-means-of-api-quer)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:09:17.723

1.  每当您记录实验结果时，甚至在*计划*实验时，您都可以将实例添加到数据库和关系中。

2.  拥有`backref`将有效地添加关系的另一端，因此拥有 的实例`Experiments`，您可以通过`my_experiment.genes`

*注意：我会从您的实体名称中删除复数：`class Gene, class Experiment`而不是`class Genes, class Experiments`*.

# solr - 将突出显示的片段与相应的文档合并

> ID：15902755
> 
> 赞同：2
> 
> 时间：2013-04-09T13:05:16.833
> 
> 标签：solr, solr4

在使用突出显示时，我们在 2 个部分中获得输出。

```
<result name="response" numFound="2345" start="0">
<doc>...</doc>
<doc>...</doc>
</result>

<lst name="highlighting">
<lst name="08dcc4e3">...highlighted fields with <em> tag...</lst>
<lst name="12e47c63">...highlighted fields with <em> tag...</lst>
</lst> 
```

是否可以在文档内的字段中使用“em”标签？例如，如果查询是针对“引擎”的，我应该得到类似 -

```
<doc>
<str name="content">
Build your own search <em>engine</em> using solr
</str>
.
.
.
</doc> 
```

如果上述事情是不可能的，是否可以在文档内突出显示文档 id xyz 的输出以及其他字段，例如 -

```
<doc>
<str name="id">xyz</str>
.
.
.
<lst name="highlighting">
<arr name="content">
<str>...</str>
</arr>
</lst>
</doc> 
```

如果通过简单的配置更改和默认突出显示这是不可能的，是否可以使用自定义突出显示模块（通过扩展默认突出显示等）。

我目前正在使用 solr 3.4，但请告诉我是否可以在 3.4 之后的 solr 版本中使用

# machine-learning - 预测性维护计划的机器学习算法

> ID：15902760
> 
> 赞同：1
> 
> 时间：2013-04-09T13:05:32.000
> 
> 标签：machine-learning, maintenance

我正在尝试设计一个 MATLAB（以及下一个可能的 C++）模型，该模型将为感兴趣的特定资产提供基于预测的维护计划。目前，我的输入数据是维护时间戳和修复了什么故障。希望我目前想到的输出是建议何时需要维护的时间戳（即需要照顾资产）。

我正在尝试找到一些好的调度算法。你们知道或想提出任何好的建议吗？

PS 我正在尝试关注 Alpaydin 的“机器学习”。有谁知道好不好用？我很抱歉，但这是一个我需要完成的项目，并且完全超出了我的舒适区，因为它涉及统计建模和分析（我很烂！）。我不是要我的问题的答案。我只是想要一些建议，因为我可以在哪里为像我这样的新手找到一些好的信息。

韩国,

# java - 鼠标释放时的 JTree 选择

> ID：15902762
> 
> 赞同：1
> 
> 时间：2013-04-09T13:05:32.937
> 
> 标签：java, swing, mouse, selection, jtree

我正在使用 a`JTree`为我的应用程序生成一些选项卡。

每次我在右侧面板上选择一个节点时，我都会加载一个新页面。

我想在鼠标释放时生成节点选择事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:00:14.927

尽管它具有重要的用户界面含义，但您可能会查看[*JTree select on mouse release*](https://forums.oracle.com/forums/thread.jspa?threadID=1348063)中显示的方法。它用一个侦听器替换树中的所有实例，`MouseListener`该侦听器将所需的鼠标事件转发给原始实例。

# symfony - 如何在 Symfony2 中实现多租户翻译

> ID：15902772
> 
> 赞同：5
> 
> 时间：2013-04-09T13:06:07.653
> 
> 标签：symfony

我正在开发一个支持多租户的 Symfony2 解决方案，并且想知道是否有办法为每个租户使用不同的翻译文件，因为目前的默认翻译文件包含例如对初始租户公司名称的引用等。

我正在使用 Liip Theme Bundle ( [https://github.com/liip/LiipThemeBundle](https://github.com/liip/LiipThemeBundle) ) 允许租户使用我们的代码库，将他们自己的设计分层放在上面，但无法找到一种简单且可扩展的方式来允许他们使用他们的自己的翻译文件。

关于这个主题包 git repo 的讨论，但我不相信有任何实现（[https://github.com/liip/LiipThemeBundle/issues/12](https://github.com/liip/LiipThemeBundle/issues/12)）。理想情况下，我想遵循他们在该线程中建议的目录结构，例如

```
root
  - app
    - Resources
      - themes
        - <theme name>
          - public
          - translations (this would be new)
          - views 
```

因为这将允许我们继续将主题作为租户可以自己维护的独立 git 子模块的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:55:22.857

我最终使用了上面概述的目录结构，并有一个控制台命令将翻译覆盖文件符号链接到 app/Resources/translations。这个命令在我的部署脚本中运行，然后我创建了自己的“trans”twig 函数来检查是否应该使用覆盖文件。

不是最干净的，但绝对按我想要的方式工作。

# java - BigInteger in Java

> ID：15902789
> 
> 赞同：-3
> 
> 时间：2013-04-09T13:06:28.560
> 
> 标签：java

I try using BigInteger like this (where m and n are integers):

```
m.substract(BigInteger.ONE), n.substract(BigInteger.ONE) 
```

it says: "cannot invoke subtract(BigInteger) on the primitive type int"

What am I doing wrong here?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T13:09:43.917

`int` is a native datatype, it is **not** an object!!!

Maybe you should declare `m` and `n` as `BigIntegers` instead?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T13:10:48.797

m.substract(BigInteger.ONE) 这里的 m 只是一个`int`它既不是 a`BigInteger`也不是`Object`任何类型的 an，而是一个原语。如果你想调用一个方法（`substract(BigInteger i)`），那么 m 和 n 需要是实际拥有该方法`Object`的一些。`class``substract(BigInteger i)`

你可以这样做：

```
BigInteger mBig = new BigInteger(m);  // in this case n is a String
mBig = mBig.subtract(BigInteger.ONE); 
```

顺便说一句：它被称为**减法**而不是减法（没有 s）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:12:53.020

`int`s 是原始时代，他们没有方法。
盒装类型，`Integer`也没有`subract(BigInteger)`方法。

您需要将`int`s 变为`BigInteger`s with`BigInteger.valueOf`或将`BigInteger`s 变为`int`s with `intValue`。

后一种方法是不安全的，因为`BigInteger`可能大于`Integer.MAX_VALUE`。

所以你需要做

```
BigInteger.valueOf(m).subtract(BigInteger.ONE),
BigInteger.valueOf(n).subtract(BigInteger.ONE) 
```

但这有点混乱，所以为什么不这样做

```
BigInteger.valueOf(m - 1), BigInteger.valueOf(n - 1) 
```

# jsf - 在 WebSphere 8 中将 JSF 1.x 迁移到 JSF 2.x 后，t:saveState 不再起作用

> ID：15902792
> 
> 赞同：1
> 
> 时间：2013-04-09T13:06:34.260
> 
> 标签：jsf, migration, websphere, tomahawk, savestate

我在我的项目中使用了 JSF 1.x 和 Tomahawk 1.1.9，现在我正在将此项目迁移到 Websphere 8。我已经更改了 Faces 配置和`web.xml`配置。

除了`t:savestate`. 我仍在使用 Tomahawk 1.1.9。
在 JSF 2.x 应用程序中使用 Tomahawk 1.1.9 版本有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:21:43.087

您需要将 Tomahawk 升级到与 JSF 2.x 兼容的版本。

在[他们的下载页面](http://myfaces.apache.org/tomahawk/download.html)中，选择“for JSF 2.0”而不是“for JSF 1.2”。

# android - initLoader() 和 onCreateOptionsMenu() 可能的线程错误/问题

> ID：15902794
> 
> 赞同：1
> 
> 时间：2013-04-09T13:06:41.260
> 
> 标签：android

我正在使用 CursorLoader 从片段中的 SQLite 获取一些数据。为此的 initLoader() 在 onActivityCreated() 中执行...

```
public class MyFragment extends Fragment implements LoaderCallbacks<Cursor>
{
    MenuItem menuItemOne;

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
        inflater.inflate(R.menu.myMenu, menu);
        menuItemOne = menu.findItem(R.id.menuItemOne);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
    {
        menuItemOne.doSomething();
    }
} 
```

为便于阅读，对上述代码进行了简化。这是我的问题...

*   在**Nexus S**上，**没有问题**。
*   在**Nexus 7**上，**空指针出现在 onLoadFinished 中**。menuItemOne 在这里为空。

Nexus S 使用的是 Android 4.1.2，而 Nexus 7 使用的是 Android 4.2.2。

*   我应该在其他地方运行 initLoader() 吗？
*   您认为 Android 版本存在错误/差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:16:17.793

它们是不同的设备，因此肯定存在差异。

但也许/很可能这是您看到的更微妙的错误。N7 上的数据库访问速度比 Nexus S 上快得多。这样，即使在创建菜单之前，也会调用 onLoadFinished。

这段代码中的主要错误是它依赖于异步和完全独立的进程来按定义的顺序完成。

您可以尝试开始加载不同的回调或执行一些类似以下代码的方案来保证执行：

```
Cursor c;

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    inflater.inflate(R.menu.myMenu, menu);
    menuItemOne = menu.findItem(R.id.menuItemOne);
    loadFinishMenuInflated();
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
{
     c = cursor;
     loadFinishMenuInflated();
}

private void loadFinishMenuInflated(){
    if(c!=null && menuItemOne!=null){
       // do something...
    }
} 
```

这样你就可以保证`// do something`只有在两个项目都初始化后才执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:25:38.047

这是我的另一个想法：

```
public class MyFragment extends Fragment implements LoaderCallbacks<Cursor>
{
    MenuItem menuItemOne;
    boolean executeMenuItemAction = false;

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
        inflater.inflate(R.menu.myMenu, menu);
        menuItemOne = menu.findItem(R.id.menuItemOne);
        if(executeMenuItemAction )
            menuItemOne.doSomething();
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
    {
        executeMenuItemAction = true;
        getActivity.invalidateOptionsMenu(); //or getActivity().supportInvalidateOptionsMenu() if you are using sherlock
    }
} 
```

# javacv - JavaCV cvApproxPoly method call error

> ID：15902803
> 
> 赞同：0
> 
> 时间：2013-04-09T13:07:11.173
> 
> 标签：javacv

Im working in `JavaCV` and im trying to detect rectangle skewed by perspective and fix the image to right perspective using 4 corners of a rectangle. I have this code:

```
CvSeq corners_seq = new CvSeq();
int count = 0;
for (int i = 0; i < table_lines.length; i++)
{
    for (int j = i + 1; j < table_lines.length; j++)
    {
        CvPoint pt = HelperClass.ComputeIntersection(table_lines[i][0],table_lines[i][1], table_lines[j][0],table_lines[j][1]);
        if (pt.x() >= 0 && pt.y() >= 0)
        {
             corners_seq.put(pt);
        }
    }
}
CvMemStorage corners_storage = cvCreateMemStorage(0);
CvSeq corners = cvApproxPoly(corners_seq, corners_seq.header_size(), corners_storage, CV_POLY_APPROX_DP, 8, 0); 
```

And at cvApproxPoly i get error from native method:

```
Exception in thread "main" java.lang.RuntimeException: ..\..\..\src\opencv\modules\imgproc\src\utils.cpp:54: error: (-5) Input array is not a valid matrix at com.googlecode.javacv.cpp.opencv_imgproc.cvApproxPoly(Native Method) 
```

What am i doing wrong? As i understand it, the input argument is `Pointer` to CvSeq

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:20:48.407

CvMemStorage 存储 = cvCreateMemStorage(0);

CvSeq cvSeq = cvCreateSeq(0, Loader.sizeof(CvContour.class), Loader.sizeof(CvSeq.class), storage);

# python - Python OpenCV Doesn't Support Codec

> ID：15902812
> 
> 赞同：0
> 
> 时间：2013-04-09T13:07:33.750
> 
> 标签：python, opencv

I am running into strange problems with the Python wrapper for OpenCV. I am using the cv2 binding and have been able to do a lot with it but the latest problem is my inability to create a `VideoWriter`.

When I try to create a video writer using this command:

```
cv2.VideoWriter('foo.out.mov', cv2.cv.CV_FOURCC('m','p','4','v'), 25, (704, 480), 1) 
```

I get the following error:

```
error: /builddir/build/BUILD/OpenCV-2.3.1/modules/highgui/src/cap_gstreamer.cpp:483:     error: (-210) Gstreamer Opencv backend doesn't support this codec acutally. in function CvVideoWriter_GStreamer::open 
```

When create a `VideoCapture` I can successfully retrieve frames by using the read method, but any calls to the get method to retrieve parameters such as frame width, frame height, or FOURCC code all return *0.0*.

I wanted to get the exact codec from the file I am opening to pass this into VideoWriter, but since this only returns 0.0 I don't know what to do.

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:40:11.780

尝试将 -1 作为fourcc 参数传递。这应该会弹出一个对话框，让您选择一个视频编解码器。我用这种方式，效果很好。

```
cv2.VideoWriter('foo.out.mov', -1, 25, (704, 480), 1) 
```

# c# - Authentication using Azure

> ID：15902818
> 
> 赞同：2
> 
> 时间：2013-04-09T13:07:45.177
> 
> 标签：c#, asp.net, .net, authentication, azure

I have an Azure account and currently a Mobile Service setup with a SQL Database so that my Windows Store app can communicate with the database.

I have developed sites using ASP.NET WebPages authentication. And I need something similar for my Windows Store app.

I have successfully gone through the documentation and tutorials on the Windows Azure website and implemented ACS (Windows Live ID, Google, Yahoo!, and Facebook) - but the thing is - I don't want Google, Yahoo!, Facebook or even Windows Live ID or Microsoft Account) logins - I want my OWN login but it seems that they don't give you this option (correct me if I am wrong).

I need to allow users to signup from within my application (that means, providing their name, DOB, email, phone, address, etc) and shove it all in my database.

Now, after implementing Microsoft Account login with my Azure service, I found out that you can't even get the most basic information about any user who has logged in to your application - not even an email address.

I have spent hours searching online for something that could possibly help but I am running out of keywords - and have not hit a single related result yet.

Does anyone know if this is possible? How would we go about integrating login and signup with a Windows Store app that set/gets this data into/from a Windows Azure service?

Any code, samples, links, tutorials, documentation, etc would be highly appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:19:15.190

您已经走上了连接外部身份验证的道路，在我看来，这对于面向外部的 Web 应用程序来说是一种更好的方法。好处是：

*   您的应用程序只负责授权而不是身份验证。身份验证涉及大量工作和大量最佳实践。最好让最了解的人承担这个负担。这并不意味着您不应该尝试理解它。
*   如果您的网站被黑客入侵，您不必告诉他们他们的用户名/电子邮件和密码组合已被泄露，他们可能不得不在其他网站上更改密码。
*   您还确保您的用户不必记住/管理另一个用户名/电子邮件地址密码组合

如果您真的想进行身份验证，那很好，但您需要自己做。[查看有关Asp.Net Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)的示例。这不是唯一的方法，也不是最好的方法，但是有很多例子。

现在，如果您决定要使用外部身份验证，我可以为您提供一些指导来帮助您当前的实现。

*   首先要注意的是，您从 Live、Google、Facebook 获得的 ID 只能被假定为对于该提供商来说是唯一的。因此，如果您想在您的系统中为该身份保留一个配置文件，并且您想使用多个提供商，您需要以这样一种方式实现它，即您可以在您的系统中保持唯一的 id 并帮助您将其与提供者。

[使用社交身份提供者和 ACS 进行网站身份验证第 2 部分 - 将 ACS 与通用配置文件提供者集成](http://geekswithblogs.net/asmith/archive/2013/03/24/152503.aspx)

*   正如您所发现的，并非所有身份验证提供程序都返回相同的“声明”。声明是用户声称拥有的东西，例如电子邮件地址、姓名、出生日期等。默认情况下，您可以通过 ACS 使用的所有内容都返回 Uid，有些则返回姓名和电子邮件地址。你要做的就是填补空白。当有人注册时，您需要提取相关索赔，然后要求他们填写缺失的索赔。您可能还希望将 ACS 中的不同声明映射到您可以在您的应用程序中使用的通用名称，因为一个提供商可能使用稍微不同的名称。

[与 Windows Azure 访问控制服务的联合身份](http://msdn.microsoft.com/en-us/library/hh446535.aspx)

*   仅仅因为您不处理身份验证，您仍然需要负责保持应用程序的安全。已经为您完成了一半的工作，因此您的代码应该更轻松，但您仍然需要使用角色。

[Windows Azure 基于角色的身份验证 (ACS)](https://stackoverflow.com/questions/11953277/windows-azure-role-based-authentication-acs)

*   这种方法的真正好处是您可以像 SO 使用身份模型一样实现您的应用程序。您可以允许用户将多个身份与他们的个人资料相关联，这意味着他们可以按照自己的意愿登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:18:25.167

如果您选择不使用内置提供程序，`ACS`则需要使用 SAML、OpenId 等实现您自己的身份提供程序...

您可以查看[`Windows Identity Foundation`](http://msdn.microsoft.com/en-us/security/aa570351.aspx)(WIF) 以实现[`WS-Trust`](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.protocols.wstrust.aspx)或[`WS-Federation`](http://msdn.microsoft.com/en-us/library/bb498017.aspx).

还有[`ADFS`](http://technet.microsoft.com/en-us/library/cc736690.aspx)一个具有相同的支持集，但将 Active Directory 与 WIF 结合使用，Azure 有自己的 AD 版本可供使用。

还有[`thinktecture identityserver`](http://thinktecture.github.io/Thinktecture.IdentityServer.v2/)一个可以让你开始冒险进入 IdP 领域，但我自己还没有使用它。

如果你想去 OpenId 路线，有[`DotNetOpenAuth`](http://www.dotnetopenauth.net/).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T18:09:50.567

如果您希望将自定义身份添加到您的移动服务应用程序，请查看 Josh 关于自定义身份验证的帖子：[http ://www.thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx](http://www.thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx)

# jboss7.x - JBoss 7 模块未解决的依赖关系

> ID：15902819
> 
> 赞同：0
> 
> 时间：2013-04-09T13:07:46.547
> 
> 标签：jboss7.x, ejb-3.1

我有几个 .jar，比如 EasyEjbNode1.jar 和 EasyEjbNode2.jar。EasyEjbNode1.jar 想要从 EasyEjbNode2.jar 调用一个会话 bean，该 bean 之前已成功部署。这是会话 bean 的代码，在 EasyEjbNode1 中，想要从 EasyEjbNode2 调用会话 bean：`

```
import java.util.Properties;
import javax.ejb.EJB;
import javax.ejb.Stateless;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import edu.pezzati.node2.RemoteNode2;

@Stateless
public class SessionNode1 implements RemoteNode1 {
@EJB(name="java:global/SessionNode2!edu.pezzati.node2.RemoteNode2")

RemoteNode2 rn2;

    @Override
    public String getNodeName() {
        return "node1 ";
    }

    @Override
    public String getRemoteNodeName() {
        return "node1 "+rn2.getNodeName();
    }
} 
```

` 这里是 EasyEjbNode1.jar/META-INF/MANIFEST.MF 的内容：

```
Manifest-Version: 1.0
Dependencies: deployment.EasyEjbNode2.jar 
```

可悲的是，出了点问题：

```
10:40:04,725 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."EasyEjbNode1.jar".INSTALL: org.jbos.msc.service.StartException in service jboss.deployment.unit."EasyEjbNode1.jar".INSTALL: Failed to process phase INSTALL of deployment "EasyEjbNode1.jar"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: 
    JBAS014544: No EJB found with interface of type 'edu.pezzati.node2.RemoteNode2' for binding java:global/EasyEjbNode2/SessionNode2!edu.pezzati.node2.RemoteNode2
    at org.jboss.as.ejb3.deployment.processors.EjbInjectionSource.getResourceValue(EjbInjectionSource.java:88)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.addJndiBinding(ModuleJndiBindingProcessor.java:249)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor$1.handle(ModuleJndiBindingProcessor.java:194)
    at org.jboss.as.ee.component.ClassDescriptionTraversal.run(ClassDescriptionTraversal.java:54)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.processClassConfigurations(ModuleJndiBindingProcessor.java:162)
    at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.deploy(ModuleJndiBindingProcessor.java:155)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more 
```

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:32:16.027

我自己管理。这个问题只是一个愚蠢的错误。代替

```
 @EJB(name="java:global/SessionNode2!edu.pezzati.node2.RemoteNode2") 
```

和

```
 @EJB(lookup="java:global/SessionNode2!edu.pezzati.node2.RemoteNode2") 
```

这对我有用。我可以从放置在不同 jar 中的 SessionNode1 成功调用 SessionNode2 的服务。

# .net - 给定 IComparer，Zip 两个有序的 IEnumerable-s，只配对相等的元素？

> ID：15902823
> 
> 赞同：0
> 
> 时间：2013-04-09T13:07:54.580
> 
> 标签：.net, linq

我需要迭代两个有序的`IEnumerable`-s`a`和`b`，由给定的`IComparer`、“并排”和`Zip`相等的元素（根据相同的`IComparer`）排序。

我需要`Zip`其他集合中没有匹配的所有元素`null`（或`default`值，无论如何）。

*通过ping 我的意思是“返回调用结果`Zip`的集合，其中一个给定的闭包采用 2 个参数，一个来自，一个来自”。`f()``f()``a``b`*

`a`并且`b`可以有不同数量的元素，并且不必匹配 1:1。

例如：

```
IComparer comparer = ...;

int[] a = { 1, 2, 4, 7, 7 };
int[] b = { -1, 1, 3, 4, 7, 8 };

var zipped = EvenMoreLinq.ZipEqual(a, b, comparer, (a, b) => new int[]{ a, b }); 
```

我希望`zipped`是：

```
{ {0, -1}, {1, 1}, {2, 0}, {0, 3}, {4, 4}, {7, 7}, {7, 0}, {0, 8} }; 
```

`a`和中的相等元素`b`应该与另一个集合中的匹配元素一样多。

输出集合最好保持源顺序。

是否存在这样的库实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:15:47.133

假设 Jon 的评论的答案是“是”，实现可能如下所示：

```
public static IEnumerable<TResult> ZipEqual<TFirst, TSecond, TResult>(
    this IEnumerable<TFirst> first, IEnumerable<TSecond> second,
    Func<TFirst, TSecond, TResult> resultSelector,
    IComparer comparer)
{
    var enumerator1 = first.GetEnumerator();
    var enumerator2 = second.GetEnumerator();

    var enumerator1HasElement = enumerator1.MoveNext();
    var enumerator2HasElement = enumerator2.MoveNext();

    while(enumerator1HasElement || enumerator2HasElement)
    {
        if(!enumerator2HasElement)
        {
            yield return resultSelector(enumerator1.Current, default(TSecond));
            enumerator1HasElement = enumerator1.MoveNext();
        }
        else if(!enumerator1HasElement)
        {
            yield return resultSelector(default(TFirst), enumerator2.Current);
            enumerator2HasElement = enumerator2.MoveNext();
        }
        else
        {
            var compareResult = comparer.Compare(enumerator1.Current,
                                                 enumerator2.Current);
            if(compareResult == 0)
            {
                yield return resultSelector(enumerator1.Current,
                                            enumerator2.Current);
                enumerator1HasElement = enumerator1.MoveNext();
                enumerator2HasElement = enumerator2.MoveNext();
            }
            else if(compareResult < 0)
            {
                yield return resultSelector(enumerator1.Current,
                                            default(TSecond));
                enumerator1HasElement = enumerator1.MoveNext();
            }
            else
            {
                yield return resultSelector(default(TFirst),
                                            enumerator2.Current);
                enumerator2HasElement = enumerator2.MoveNext();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T11:57:05.923

**编辑**

可以避免分组，但结果显然与[丹尼尔的答案相似。](https://stackoverflow.com/a/15902982/659190)

```
public static IEnumerable<Tuple<T, T>> ZipEqual<T>(
    this IEnumerable<T> source,
    IEnumerable<T> other,
    IComparer<T> comparer = null)
{
    if (other == null)
    {
        throw new ArgumentNullException("other");
    }

    if (comparer == null)
    {
        comparer = Comparer<T>.Default;
    }

    var first = source.OrderBy(t => t, comparer).GetEnumerator();
    var second = other.OrderBy(t => t, comparer).GetEnumerator();

    var firstMore = first.MoveNext();
    var secondMore = second.MoveNext();

    while (firstMore && secondMore)
    {
        var comp = comparer.Compare(first.Current, second.Current);

        if (comp == 0)
        {
            yield return Tuple.Create(first.Current, second.Current);
            firstMore = first.MoveNext();
            secondMore = second.MoveNext();
            continue;
        }

        if (comp > 0)
        {
             yield return Tuple.Create(default(T), second.Current);
             secondMore = second.MoveNext();
             continue;
        }

        yield return Tuple.Create(first.Current, default(T));
        firstMore = first.MoveNext();
    }

    while (firstMore)
    {
        yield return Tuple.Create(first.Current, default(T));
        firstMore = first.MoveNext();
    }

    while (secondMore)
    {
        yield return Tuple.Create(default(T), second.Current);
        secondMore = second.MoveNext();
    }
} 
```

* * *

怎么样，

```
public static IEnumerable<Tuple<T, T>> ZipEqual<T>(
    this IEnumerable<T> source,
    IEnumerable<T> other,
    IComparer<T> comparer = null)
{
    if (other == null)
    {
        throw new ArgumentNullException("other");
    }

    if (comparer == null)
    {
        comparer = Comparer<T>.Default;
    }

    var orderedGroups =
        source.Select(t => new { Value = t, First = true })
            .Concat(other.Select(t => new { Value = t, First = false }))
            .ToLookup(a => a.Value)
            .OrderBy(l => l.Key, comparer);

    foreach (var group in orderedGroups)
    {
        var firsts = group.Where(a => a.First).Select(a => a.Value).ToList();
        var seconds = group.Where(a => !a.First).Select(a => a.Value).ToList();

        var limit = Math.Max(firsts.Count, seconds.Count);
        for (var i = 0; i < limit; i++)
        {
            yield return Tuple.Create(
                firsts.ElementAtOrDefault(i),
                seconds.ElementAtorDefault(i));
        }
    }
} 
```

# mongodb - Mongo 2.4.1 升级导致致命错误：找不到类 'Doctrine\MongoDB\Util\InvalidArgumentException'

> ID：15902824
> 
> 赞同：1
> 
> 时间：2013-04-09T13:08:01.877
> 
> 标签：mongodb, symfony, boost, mongodb-php

我一切正常，我升级了我的 mac 上的 mac 端口以获取最新的软件包。它安装了 Mongo 2.4.1，我也得到了 boost @1.53.0_1+no_single+no_static+python27。现在，当我尝试在 Symfony 2 应用程序中使用相同的代码进行交互时，我得到：

```
Fatal error: Class 'Doctrine\MongoDB\Util\InvalidArgumentException' not found in /Users/saudfaisal/Sites/dailytamatar.com/vendor/doctrine/mongodb/lib/Doctrine/MongoDB/Util/ReadPreference.php on line 63 
```

我的 composer.json 如下所示：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "friendsofsymfony/user-bundle": "*",
        "friendsofsymfony/rest-bundle": "*",
        "jms/serializer-bundle": "*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev",
        "doctrine/mongodb-odm-bundle": "3.0.*@dev"
    },  "minimum-stability": "stable",
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

我知道过去 boost 存在问题，必须回滚以 boost @1.49.0_0 但是这次没有用。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:58:09.563

`doctrine/mongodb`这已在几个月前发布的软件包 1.0.2 版中得到修复。如果您想确认，实际提交是[b317c8e 。](https://github.com/doctrine/mongodb/commit/b317c8e30e9510703fa3d2c2942c4e466d521b4a#lib/Doctrine/MongoDB/Util/ReadPreference.php)

我建议明确要求`doctrine/mongodb-odm`并且可能`doctrine/mongodb`在您的`composer.json`文件中，而不是依赖捆绑包的内部依赖项。此外，您的`composer.lock`文件可能指向`doctrine/mongodb`仍然满足 ODM 版本要求的过时版本。在这种情况下，您需要升级您的依赖项（通过`composer upgrade`），这也应该升级您的锁定文件和其中的版本/提交点。

# java - 从 Java 代码到 Verilog？

> ID：15902828
> 
> 赞同：0
> 
> 时间：2013-04-09T13:08:17.117
> 
> 标签：java, verilog

我正在尝试编写一个能够生成`Verilog`代码的小型 Java 程序。由于我几乎不了解 Verilog 语言，因此在创建一个简单的示例时遇到了问题。

假设我们有 2 个输入`a, b`和 1 个输出`c`。还有2个州。`State1`是初始状态，并且达到`State2`一定的条件`wire1`，这需要`b = 1`。

我在此示例中的输出将具有`state2 & a`要满足的条件。

问题：使用下面的近似设计，`Verilog`根据我的示例，完整的代码看起来如何？

```
//simplified without inheritance
class Input {
    String varname;
    new Input(String varname);
}

class Output {
    String varname;
    String condition;
    new Output(String varname, String condition);
}

class State {
    String varname;
    new State(String varname);
}

class Wire {
    String condition;
    Input input;
    Ouput output;
    new Wire(Input input, Output output, String condition);
}

Input input1 = new Input("a");
Input input2 = new Input("b");
State state1 = new State("initial");
State state2 = new State("following");
Wire wire12 = new Wire(state1, state2, "b");
Ouput output1 = new Output(c, "state2 & a"); 
```

基于此，verilog 代码将如何看待？

```
module BasicFsm(
    input clock,
    input reset,
    input a,
    input b,
    output c
);

always @(posedge clock)
//how to continue here? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:02:21.337

像下面这样的东西将是一个很好的开始，我认为可以很容易地从输入规范中派生出来。

在使用这样的东西之前，您还需要测试生成的代码，并且有许多免费的模拟器可用于此。[这里](https://stackoverflow.com/questions/4731010/free-verilog-simulator-compiler)有免费模拟器的相关问题。

```
module BasicFsm(
    input      clock,
    input      reset,
    input      a,
    input      b,
    output reg c
);

reg        state;
wire       nexstate;

localparam S_STATE1    = 1'b0; //Could name initial
localparam S_STATE2    = 1'b1; //Could name following

always @(posedge clock or posedge reset) begin
  if(reset) begin
    state <= S_STATE1;
  end
  else begin
    state <= nextstate
  end
end

//Combinatorial nextstate
always @* begin
  case(state) 
    S_STATE1    : 
     if ( b == 1'b1 ) begin
       nextstate = S_STATE2 ; 
     end
     else begin
       nextstate = state ; //Hold state
     end
    S_STATE2    : nextstate = state ; //locked up forever if you get here
    default     : nextstate = S_STATE1;
  endcase
end

//Combinatorial output
always @* begin
  c = (state == S_STATE2) && (a == 1'b1);
end 
```

# fitnesse - FitClient: external process terminated before a connection could be established.

> ID：15902830
> 
> 赞同：0
> 
> 时间：2013-04-09T13:08:22.783
> 
> 标签：fitnesse

I am creating Sample Fitnesse Test and facing this error while running test

fit

Date: 6:34:29 PM (IST) on Tuesday, April 9, 2013

Test Page: .CalculatorRunner

Command: java -cp fitnesse.jar; fit.FitServer devcode 8082 12

Exit code: -1

Time elapsed: 1.013 seconds

Standard Error: Error: Could not find or load main class fit.FitServer

Internal Exception: FitClient: external process terminated before a connection could be established.

## code at C# side

```
 namespace ConsoleApplication1
   {

   public class CalculatorRunner : ColumnFixture
    {

       int arg1;

       public int Arg1
       {
            get { return arg1; }
            set { arg1 = value; }
       }
       int arg2;

       public int Arg2
      {
           get { return arg2; }
           set { arg2 = value; }
      }

      public int Sum()
      {
           return Arg1 + Arg2;
     }
   }
} 
```

## And Code for Fitnesse Page

```
 !path C:\..\bin\Debug\*.*

!| import |
| ConsoleApplication1 |

!1 Let's run a simple calculator
!| CalculatorRunner |
| Arg1 | Arg2 | Sum? |
| 0 | 0 | 0 |
| 1 | 1 | 3 |
| 1 | 3 | 4 |
| 2 | 3 | 5 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:28:51.690

For C# fixtures you need a different fit server:

[http://fitsharp.github.io/Fit/UsingFitnesse.html](http://fitsharp.github.io/Fit/UsingFitnesse.html)

# php - 在php中执行AT命令发送短信

> ID：15902831
> 
> 赞同：6
> 
> 时间：2013-04-09T13:08:27.233
> 
> 标签：php, sms, at-command

我正在尝试从 PHP 执行 AT 命令。

我试过 exec() 和 shell_exec()

请不要建议第三方短信网关 我的客户不想透露他的私人信息并想从他自己的服务器发送短信。

我有一个 GSM 调制解调器连接到一个串行端口，我可以通过如图中的“腻子”访问它 ![腻子屏 1](https://i.stack.imgur.com/GJL7l.png)

我可以输入 AT 命令来发送短信，如下图所示。 ![在此处输入图像描述](https://i.stack.imgur.com/o6lcQ.png)

我想通过 PHP 运行那些 AT 命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-10T08:06:09.400

嗨，我通过这个 php 代码在 Windows 8 上使用 php 类发送短信。

```
require "php_serial.class.php";
$serial = new phpSerial;
$serial->deviceSet("COM4");
$serial->confBaudRate(115200);

// Then we need to open it
$serial->deviceOpen();

// To write into
$serial->sendMessage("AT+CMGF=1\n\r"); 
$serial->sendMessage("AT+cmgs=\"+92234444444\"\n\r");
$serial->sendMessage("sms text\n\r");
$serial->sendMessage(chr(26));

//wait for modem to send message
sleep(7);
$read=$serial->readPort();
$serial->deviceClose(); 
```

[PHP SERIAL 类链接](https://drive.google.com/file/d/0B0NgcxAkZSCHS2MzUEtQMWZYWUc0QmF0RzNBMUItck8wZUtR/edit?usp=sharing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:23:07.817

您只需要一个 RS232 通信类，例如这个 [http://www.phpclasses.org/package/3679-PHP-Communicate-with-a-serial-port.html](http://www.phpclasses.org/package/3679-PHP-Communicate-with-a-serial-port.html)

或者，您也可以使用 fopen()

```
exec('mode COM1: baud=115200 data=8 stop=1 parity=n xon=on');
$fd = fopen('COM1:', O_RDWR);
fwrite($fd,chr(0).chr(1));
fclose($fd); 
```

# python - 在Python中更改for循环内的迭代变量

> ID：15902835
> 
> 赞同：38
> 
> 时间：2013-04-09T13:08:46.427
> 
> 标签：python

我正在尝试做一些简单的事情，比如更改我正在迭代的变量 (i)，但我在 Python 和 C 中都得到了不同的行为。

在 Python 中，

```
for i in range(10):
    print i,
    if i == 2:
        i = 4; 
```

我得到`0 1 2 3 4 5 6 7 8 9`了，但在 C 中是等价的：

```
int i;
for (i = 0; i < 10; i++) {
    printf("%d", i);
    if (i == 2)
        i = 4;
} 
```

我明白`01256789`了（请注意，数字 3 和 4 没有出现，正如预期的那样）。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-09T13:12:20.610

Python 在 for 循环的背景下发生了一些好事。例如：

```
for i in range(10): 
```

无论如何，将不断设置`i`为范围中的下一个元素。`0-10`

如果你想在 python 中做同样的事情，你会这样做：

```
i = 0
while i < 10:
    print(i)
    if i == 2:
        i = 4
    else:      # these line are
        i += 1 # the correct way
    i += 1 # note that this is wrong if you want 1,2,4,5,6,7,8,9 
```

如果您尝试将其转换为，`C`那么您必须记住循环中的`i++`in`for`将始终添加到`i`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T13:13:47.463

该函数`range()`创建一个列表。例如，`range(10)`将创建以下列表：`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`.

当您说 时`for i in range(10)`，首先`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`将生成所有列表，然后`i`按顺序分配该列表中的所有值。

更改 的值并不重要，`i`因为在下一次迭代中，它将被分配列表中的下一个元素。

另一方面，它是 C/C++，在每次迭代结束时，值`i`会递增，然后与最大允许值（在本例中为 9）进行比较，如果更大，则循环结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:12:54.997

当您调用时，`range(10)`您会创建一个可迭代列表`[0,1,2,3,4,5,6,7,8,9]`。

并且 for 循环在每一轮都从列表中一个接一个地选取一个数字，无论您是否更改了`i`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T13:12:49.980

Python 一个接一个地为您提供 中的元素`range(10)`。C 反复递增一个变量。

他们俩并不真正关心您对循环内的变量还做了什么，但是由于两种语言结构做的事情略有不同，因此在某些情况下结果是不同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T13:46:28.463

你不能通过使用范围函数来做到这一点。您必须仅使用 while 循环来执行此操作，因为 for 循环使用范围函数，并且在范围函数中，无论您在循环中指定什么，它都将通过其内部方法递增，它只会通过范围列表递增。for i in range(10): ... print i ... if i == 2: ... i = 4 ... else: ... i += 1 ... 0 1 2 3 4 5 6 7 8 9

一个有趣的例子在这里....

for i in range(10): ... print i ... i = i + 10 ... print i ... 这将打印... 0 10 1 11 2 12 3 13 4 14 5 15 6 16 7 17 8 18 9 19

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T13:15:24.977

这是因为当您在 python 中使用 range() 函数时。您的变量 i 将通过范围内的值。例如，

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

但是，您编写的 C 语言只是使用正常条件来更改 i 的值。不涉及任何功能。

# matlab - 在 Matlab 中生成 64 位随机整数

> ID：15902839
> 
> 赞同：3
> 
> 时间：2013-04-09T13:08:56.833
> 
> 标签：matlab, random, 64-bit

我正在尝试编写一个 matlab 函数，该函数生成一个二进制文件，其中包含一系列 64 位随机整数。这些应该质量很好，这就是为什么我想使用 64 位 mersenne twister 算法或更好的原因。内置的*randi()*函数只能产生 32 位数字。我之前使用以下方法生成了 32 位结果：

```
rng('shuffle', 'twister');
randi(2^32-1, 'uint32') 
```

但这在 64 位中不可用。如果我记得正确使用多个 32 位整数来生成 64 位随机整数是不好的做法，但如果有一个好的解决方案，我愿意接受。
为了使事情变得更加困难，我目前使用的是 32 位 windows xp 机器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:44:47.440

似乎 Matlab 中对 64 位随机整数（以及一般的 64 位整数）的支持仍然很差。

我怀疑“最好的”解决方法是做一些黑客攻击：

```
% create 32-bit uints, and cast to 64-bit
f = @() uint64( randi([0 intmax('uint32')], 'uint32') );

% bitshift and bitor to convert into a proper uint64        
R = bitor( bitshift(f(),32), f() ); 
```

或`typecast`按照 Andrew Jake 的建议使用，以提高可读性：

```
f = @() randi([0 intmax('uint32')], 'uint32');
R = typecast([f() f()], 'uint64'); 
```

创建多个随机数时，您必须更改`g`为：

```
% bitshift and bitor: 
% ------------

% create an Nx1 uint32, and cast to 64-bit
g = @(N) uint64( randi([0 intmax('uint32')], N,1, 'uint32') );

tic
R = bitor( bitshift(g(1e7),32), g(1e7) );
toc

% typecast 
% ------------

% create a 1xN uint32, but leave the casting to typecast
g = @(N) randi([0 intmax('uint32')], 1,N, 'uint32');

tic
R = typecast([g(1e7) g(1e7)], 'uint64');   
toc 
```

结果：

```
Elapsed time is 0.717668 seconds.    % bitor/bitshift
Elapsed time is 0.705700 seconds.    % typecast w/ loop 
```

它们同样快，所以它真的是你喜欢的任何东西。

Mersenne Twister 主页[提到](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/efaq.html)连接两个 s 时分布不会改变`uint32`（感谢 Andrew 的提醒），因此您确实可以安全地执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:23:32.513

从[这个页面](http://www.mathworks.nl/help/matlab/math/creating-and-controlling-a-random-number-stream.html)判断，可以使用乘法滞后斐波那契生成器。但是，根据一般标准，我认为它不会比梅森捻线机表现更好。

此外，您需要一台 64 位机器来运行 64 位 Matlab。

编辑：[这个问题](https://stackoverflow.com/questions/14876901/comparing-the-mersenne-twister-in-java-and-matlab)还表明 64 位版本的 Matlab 已经使用默认设置生成 64 位随机整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T03:18:43.410

如果你真的想要高质量的随机数，Mersenne Twister 的 64 位版本已经发布。这是它的C实现。它说它适用于“64 位机器”，但我认为您也可以在 32 位机器上编译它——它只是使用`unsigned long long`64 位指针，而不是 64 位指针。将其放入 MEX 文件中，您可以轻松地从 M 代码中调用它。

[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt64.html](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt64.html)

[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/C-LANG/mt19937-64.c](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/C-LANG/mt19937-64.c)

# iphone - how to make a Questionnaire iPhone app with sqlite

> ID：15902840
> 
> 赞同：-2
> 
> 时间：2013-04-09T13:09:02.897
> 
> 标签：iphone

I want to make an iPhone app just like a questionnaire/Quize, and want to store all questions in sqlite database , i need to have One question that can be a label and 4 radio buttons for answers, user will select the option and will go for the next question, questions and answers will be saved in sqlite and at the end user will come to know how many he made correct or wrong choices.

Please suggest me any tutorial or anything that can be help full for me,please guise i will be grateful to u for this kindness in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:54.420

将您的项目分解为以下问题： 1\. 如何在 iPhone 中创建 GUI？2\. iPhone如何连接数据库？3\. 如何在 iPhone 中创建标签、单选按钮？4\. 如何在 iPhone 中提交表单？等等。

然后在网上搜索其中的每一个。单独执行这些示例，测试它们并将它们组合起来。

瞧，你有一个全新的问卷应用程序:)！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:20:25.540

只需创建一个包含如下列的表的数据库：id，问题，answer1，answer2，answer3，answer4，正确答案，正确答案；

如果您不了解 SQL，请使用[FMDB 之类的包装器](https://github.com/ccgus/fmdb)

之后，我们使用内置函数从数据库中获取具有特定 id（即问题编号）的问题并将其传递给您的问题提问类。当用户按下答案时，检查它是否正确并修改“回答正确”列。

# jsp - FacesMessage 的出现取决于标记顺序

> ID：15902844
> 
> 赞同：1
> 
> 时间：2013-04-09T13:09:23.040
> 
> 标签：jsp, jsf

在其他人编写的 jsf 应用程序上工作，我一定遗漏了一些非常基本的东西。我把它精简到这个，这是行不通的：

`page.jsp`：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>

<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<!doctype html>
<html>
<body>
    <f:view>
        <h:messages id="error" globalOnly="true"/>
        <h:outputText value="#{testBean.msg}"/>
    </f:view>
</body>
</html> 
```

`testBean.java`：

```
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;

public class testBean {

    public String getMsg() {
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "getMsg"), null));
        return "getMsg";
    }
} 
```

该代码不显示生成的错误消息`testBean#getMsg`。如果我将 to 移到该`<h:messages>`行之后`<h:outputText>`，则会显示该消息。这是为什么？这应该工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:36:47.413

您正在使用 getter 方法执行业务工作，在此特定示例中，该方法仅在呈现响应阶段生成 HTML 输出期间调用。如果消息组件的 HTML 表示已经预先生成，那么在这个特定的构造中添加一个 faces 消息为时已晚。您无法从响应中取回已写入的字节。

事实上，[你永远不应该在 getter 中做业务逻辑](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。您没有在任何地方明确说明具体的功能要求，因此很难提出正确的解决方案，但在这个特定示例中，解决方案之一是在预渲染视图侦听器方法中执行该工作。

```
<f:view>
    <f:event type="preRenderView" listener="#{testBean.init}" />
    <h:messages id="error" globalOnly="true"/>
    <h:outputText value="#{testBean.msg}"/>
</f:view> 
```

和

```
private String msg;

public void init() { 
    msg = "getMsg";
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "getMsg"), null));
}

public String getMsg() { // Keep getter untouched! Don't do business logic in there!
    return msg;
} 
```

* * *

**以上更新**仅适用于 JSF2 Facelets。在遗留和已弃用的 JSP 上没有类似的方法。您最好的选择是返回一个空字符串并在 JSP 顶部引用它的 getter。

```
<f:view>
    <h:outputText value="#{testBean.initHack}" />
    <h:messages id="error" globalOnly="true"/>
    <h:outputText value="#{testBean.msg}"/>
</f:view> 
```

和

```
private String msg;

public String getInitHack() {
    msg = "getMsg";
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "getMsg"), null));
    return "";
}

public String getMsg() { // Keep getter untouched! Don't do business logic in there!
    return msg;
} 
```

# android - 在 ios 中需要与 android 中的“ConnectivityManager.CONNECTIVITY_ACTION”相同的回调

> ID：15902855
> 
> 赞同：1
> 
> 时间：2013-04-09T13:09:49.310
> 
> 标签：android, iphone, ios, reachability

我是ios开发新手。我想在连接更改（或设备的 IP 地址更改）时进行回调。我在我的应用程序中添加了[可达性（Apple 的示例代码）](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。但它不给回调。

我在 Android 中做了同样的事情 - 接收“ConnectivityManager.CONNECTIVITY_ACTION”，它检测到网络连接发生了变化。

iOS 中是否有任何 API 可以执行与 CONNECTIVITY_ACTION 类似的功能？任何帮助表示赞赏。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:15:15.450

使用[SCNetworkReachabilitySetCallback](https://developer.apple.com/library/ios/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html#//apple_ref/c/func/SCNetworkReachabilitySetCallback)：

```
Boolean SCNetworkReachabilitySetCallback (
   SCNetworkReachabilityRef target,
   SCNetworkReachabilityCallBack callout,
   SCNetworkReachabilityContext *context
); 
```

所以你的回调方法看起来像这样

```
typedef void (*SCNetworkReachabilityCallBack) (
   SCNetworkReachabilityRef target,
   SCNetworkReachabilityFlags flags,
   void *info
); 
```

意味着你首先声明回调

```
static void MyReachabilityCallback(SCNetworkReachabilityRef target, SCNetworkReachabilityFlags flags, void* info)
{
 // do somthing
} 
```

然后注册它：

```
SCNetworkReachabilityContext ctx = {0, self, NULL, NULL, NULL};
if(SCNetworkReachabilitySetCallback(reachabilityRef, MyReachabilityCallback, &ctx)) {
 // registered callback 
```

# selenium - PHPUnit - Selenium 2：如何选择没有 id 和名称的 iframe？

> ID：15902856
> 
> 赞同：1
> 
> 时间：2013-04-09T13:09:52.400
> 
> 标签：selenium, phpunit, selenium-webdriver

我正在尝试使用 PHPUnit Selenium 选择一个 iframe，但不知何故它似乎不起作用。这是代码：

```
<body>
...
<div id="container">
<iframe src="x.html">
    <html>
    ...
    <body></body> <!-- this is the body I would like to get -->
    ...
    </html>
</iframe>
</div>
...
</body> 
```

和 PHP：

```
<?php
class Test extends PHPUnit_Extensions_Selenium2TestCase {

    public function testIframe() {

        $theFrame = $this->byCssSelector('#container iframe');

        $this->frame($theFrame->getId());

        $this->byCssSelector('body')->text('test');

    }
} 
```

如果我检查 $theFrame 变量，它是一个 id=5 的 PHPUnit_Extensions_Selenium2TestCase_Element，但不知何故 $this->frame($theFrame->getId()) 会抛出一个错误：

```
PHPUnit_Extensions_Selenium2TestCase_WebDriverException: Unable to locate frame: 5
Command duration or timeout: 32 milliseconds
Build info: version: '2.31.0', revision: '1bd294d', time: '2013-02-27 20:52:59'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.2.0-39-generic',         
java.version: '1.7.0_17'
Session ID: 0192c3aa-d4a2-4c9d-bcca-bbd7139dd8c3
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=LINUX, databaseEnabled=true, cssSelectorsEnabled=true,     
javascriptEnabled=true, acceptSslCerts=true, handlesAlerts=true, browserName=firefox,     
browserConnectionEnabled=true, nativeEvents=false, webStorageEnabled=true, 
rotatable=false, locationContextEnabled=true, applicationCacheEnabled=true,     
takesScreenshot=true, version=20.0}] 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T14:52:50.747

为 iframe 提供一些 id 或名称并使用以下代码，它将起作用。

```
$this->frame('id/name');
$this->byCssSelector('body')->text('test'); 
```

如果有多个 iframe，则分配值 null 并开始根据层次结构（父->子->等等）获取

```
$this->frame(null);
$this->frame('parentFrame');
$this->frame('childFrame'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T06:08:27.760

有同样的问题，我的解决方法是执行一个将迭代所有 iframe 标记的 javascript，然后通过其现有属性确定要定位的 iframe，然后将您自己的属性设置为唯一标识符。

```
 $this->execute(array(
        'script' => "
            var myiFrames = document.getElementsByTagName('iframe');
            for(var i=0; i<=myiFrames.length; i++)
            {
                //determine iframe by src which may contain 'test' str
                if( myiFrames[i].getAttribute('src').search('test')>=0 ){
                    myiFrames[i].setAttribute('myCustomId', 'myTargetFrame')
                }
            }",
        'args' => array()
    )); 
```

那么您现在可以通过 xpath 定位您的 iframe ...

```
$myframe = $this->byXPath("//*[@myCustomId='myTargetFrame']");
$this->frame($frame->attribute('id')); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T14:27:44.250

您可以使用下面的方法使用它的索引切换到一个框架。要切换到网页中存在的第一帧，我们可以使用以下方法。

```
 public function switchToIFrame($index = 0) {

                           $this->session->getDriver()->switchToIFrame($index);

                                              } 
```

# sublimetext2 - 仅在当前组/窗格中更改选项卡

> ID：15902857
> 
> 赞同：0
> 
> 时间：2013-04-09T13:09:54.043
> 
> 标签：sublimetext2

我正在开发一个高分辨率的大显示器，因此我在多个组/窗格中工作，因为它更有效率（恕我直言）。我使用 + 切换选项卡，使用+`ctrl`切换`tab`组/窗格到。我想将+ “锁定”到当前组/窗格，这样它就不会选择其他窗格中的选项卡。`ctrl``1``9``ctrl``tab`

我真的很想要那个功能，但想不出办法来实现这个功能。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:38:08.513

你可以使用一个简单的插件来做到这一点。

```
import sublime
import sublime_plugin

class ChangeViewCommand(sublime_plugin.WindowCommand):
    def run(self, reverse=False):
        window = self.window
        group, view_index = window.get_view_index(window.active_view())
        if view_index >= 0:
            views = window.views_in_group(group)
            if reverse:
                if view_index == 0:
                    view_index = len(views)

            if reverse:
                new_index = view_index - 1
            else:
                new_index = (view_index + 1) % len(views)

            window.focus_view(views[new_index]) 
```

然后将以下内容添加到您的用户键绑定中。

```
{ "keys": ["ctrl+tab"], "command": "change_view" },
{ "keys": ["ctrl+shift+tab"], "command": "change_view", "args": { "reverse": true } } 
```

对于焦点小组，已经有命令可以转到第 1 - 4 组，但您可以添加以下内容以更进一步（只需更改键绑定号和组号）

```
{ "keys": ["ctrl+1"], "command": "focus_group", "args": { "group": 0 } } 
```

# magento - 在 Magento Admin 中：如何在“购物车中的产品”报告下添加“颜色”属性列

> ID：15902858
> 
> 赞同：0
> 
> 时间：2013-04-09T13:09:57.670
> 
> 标签：magento

在 Magento 管理员中：在报告/购物车/购物车中的产品下。
我想在“购物车中的产品”网格下添加“颜色”属性列。假设网店中的所有产品都是可配置产品。
IE; 如果从网上商店 - 客户选择带有颜色“红色”选项的测试产品（可配置产品），则该属性值应显示在报告中。

请提出实现这一目标的最佳方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:17:51.410

复制 \app\code\core\Mage\Reports\Model\Resource\Quote\Collection.php 并粘贴到 app\code\local\Mage\Reports\Model\Resource\Quote\Collection.php

覆盖 **公共函数 prepareForProductsInCarts()**函数

```
public function prepareForProductsInCarts()
    {
        $productEntity          = Mage::getResourceSingleton('catalog/product_collection');
        $productAttrName        = $productEntity->getAttribute('name');
        $productAttrNameId      = (int) $productAttrName->getAttributeId();
        $productAttrNameTable   = $productAttrName->getBackend()->getTable();
        $productAttrPrice       = $productEntity->getAttribute('price');
        $productAttrPriceId     = (int) $productAttrPrice->getAttributeId();
        $productAttrPriceTable  = $productAttrPrice->getBackend()->getTable();

        $ordersSubSelect = clone $this->getSelect();
        $ordersSubSelect->reset()
            ->from(
                array('oi' => $this->getTable('sales/order_item')),
                array(
                   'orders' => new Zend_Db_Expr('COUNT(1)'),
                   'product_id'))
            ->group('oi.product_id');

        $this->getSelect()
            ->useStraightJoin(true)
            ->reset(Zend_Db_Select::COLUMNS)
            ->joinInner(
                array('quote_items' => $this->getTable('sales/quote_item')),
                'quote_items.quote_id = main_table.entity_id',
                null)
            ->joinInner(
                array('e' => $this->getTable('catalog/product')),
                'e.entity_id = quote_items.product_id',
                null)
            ->joinInner(
                array('product_name' => $productAttrNameTable),
                "product_name.entity_id = e.entity_id AND product_name.attribute_id = {$productAttrNameId}",
                array('name'=>'product_name.value'))
            ->joinInner(
                array('product_price' => $productAttrPriceTable),
                "product_price.entity_id = e.entity_id AND product_price.attribute_id = {$productAttrPriceId}",
                array('price' => new Zend_Db_Expr('product_price.value * main_table.base_to_global_rate')))
            ->joinLeft(
                array('order_items' => new Zend_Db_Expr(sprintf('(%s)', $ordersSubSelect))),
                'order_items.product_id = e.entity_id',
                array()
            )
            ->columns('e.*')
            ->columns(array('carts' => new Zend_Db_Expr('COUNT(quote_items.item_id)')))
            ->columns('order_items.orders')
            ->where('main_table.is_active = ?', 1)
            ->group('quote_items.product_id');

        return $this;
    } 
```

**并替换为以下功能。**

```
public function prepareForProductsInCarts()
    {
        $productEntity          = Mage::getResourceSingleton('catalog/product_collection');
        $productAttrName        = $productEntity->getAttribute('name');
        $productAttrNameId      = (int) $productAttrName->getAttributeId();
        $productAttrNameTable   = $productAttrName->getBackend()->getTable();
        $productAttrPrice       = $productEntity->getAttribute('price');
        $productAttrPriceId     = (int) $productAttrPrice->getAttributeId();
        $productAttrPriceTable  = $productAttrPrice->getBackend()->getTable();

        $ordersSubSelect = clone $this->getSelect();
        $ordersSubSelect->reset()
            ->from(
                array('oi' => $this->getTable('sales/order_item')),
                array(
                   'orders' => new Zend_Db_Expr('COUNT(1)'),
                   'product_id'))
            ->group('oi.product_id');

        $this->getSelect()
            ->useStraightJoin(true)
            ->reset(Zend_Db_Select::COLUMNS)
            ->joinInner(
                array('quote_items' => $this->getTable('sales/quote_item')),
                'quote_items.quote_id = main_table.entity_id',
                null)
            ->joinInner(
                array('e' => $this->getTable('catalog/product')),
                'e.entity_id = quote_items.product_id',
                null)
            ->joinInner(
                array('product_name' => $productAttrNameTable),
                "product_name.entity_id = e.entity_id AND product_name.attribute_id = {$productAttrNameId}",
                array('name'=>'product_name.value'))
            ->joinInner(
                array('product_price' => $productAttrPriceTable),
                "product_price.entity_id = e.entity_id AND product_price.attribute_id = {$productAttrPriceId}",
                array('price' => new Zend_Db_Expr('product_price.value * main_table.base_to_global_rate')))

            ### Newly added script ###
            ->joinLeft(
            array('cpei' => 'catalog_product_entity_int'),
            'cpei.entity_id = e.entity_id AND cpei.attribute_id = 92',
            array()
            )
            ->joinLeft(
            array('eaov' => 'eav_attribute_option_value'),
            'eaov.option_id = cpei.value',
            array('color'=>'eaov.value')
           )
           ### End script ###

            ->joinLeft(
                array('order_items' => new Zend_Db_Expr(sprintf('(%s)', $ordersSubSelect))),
                'order_items.product_id = e.entity_id',
                array()
            )
            ->columns('e.*')
            ->columns(array('carts' => new Zend_Db_Expr('COUNT(quote_items.item_id)')))
            ->columns('order_items.orders')
            ->where('main_table.is_active = ?', 1)
            ->group('quote_items.product_id');

        return $this;
    } 
```

这里**cpei.attribute_id = 92**是我的**“颜色”属性 id**。您可以根据您的要求进行更改。

还将以下代码放入 `\app\code\core\Mage\Adminhtml\Block\Report\Shopcart\Product\grid.php`文件中。

```
$this->addColumn('color', array(
            'header'    =>Mage::helper('reports')->__('Color'),
            'index'     =>'color', 
```

是的，我们可以将 grid.php 文件从核心复制到本地文件夹。 **在 magento 1.7 中工作和测试**

# c++ - QSqlQuery 与列名 Sqlite 的 prepare 和 bindValue

> ID：15902859
> 
> 赞同：7
> 
> 时间：2013-04-09T13:10:00.400
> 
> 标签：c++, sqlite, qt, qsqlquery

```
void updateDB(const int id, const QString& column, const QVariant& value) const 
 //*****
 //all stuff on open DB etc. 
QSqlQuery query;
query.prepare("UPDATE table SET  :column = :value WHERE id = :id ");
query.bindValue(":column", QVariant(column));   
query.bindValue(":value", value);
query.bindValue(":id", id);
query.exec(); 
```

不工作。同时，如果我将查询重写为

```
query.exec("UPDATE table SET " + column + " = " + value.toString() + " WHERE id = " + QString::number(id)); 
```

有用。如果我删除 :column 占位符并写入我正在测试的查询列名，它也可以工作。所以似乎我不能对列名使用 bindValue 和占位符，至少在 Sqlite 中是这样。但是我在任何文档中都没有找到提到这一点。

所以没有办法对列名使用 bindValue 和占位符，或者我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T13:14:56.287

这里正确的代码是：

```
query.prepare(QString("UPDATE table SET %1 = :value WHERE id = :id ").arg(column));
query.bindValue(":value", value); 
```

您绑定值，而不是字段名称。

PS：在阅读整个问题之前回答。是的，你是对的 - 没有办法使用 bindValues 来绑定列，不仅适用于 sqlite，而且适用于每个 db。

# c++ - 如何在 C++ 类中声明动态大小的数组字段？

> ID：15902860
> 
> 赞同：0
> 
> 时间：2013-04-09T13:10:00.323
> 
> 标签：c++, arrays, oop, class

我是 C++ 新手。

我想要有 5 个数组作为字段的类。这些数组的大小应动态初始化。

我已经编写了一些代码，但这不正确知道：

```
class ParsedData {
  public:
    int generators_count;
    double mean_arr[generators_count];
    double variance_arr[generators_count];
    int amount_of_numbers_to_generate_arr[generators_count];
    int intervals_count;
    double interval_begins_arr[intervals_count];
    double interval_ends_arr[intervals_count];
};

ParsedData::ParsedData(int _generators_count, double[] _mean_arr, double[] _variance_arr, int[] _amount_of_numbers_to_generate_arr,
    int _intervals_count, double[] _interval_begins_arr, double[] _interval_ends_arr) {
  generators_count = _generators_count;
  mean_arr = _mean_arr;
  variance_arr = _variance_arr;
  amount_of_numbers_to_generate_arr = _amount_of_numbers_to_generate_arr;
  intervals_count = _intervals_count;
  interval_begins_arr = _interval_begins_arr;
  interval_ends_arr = _interval_ends_arr;
} 
```

编译错误日志：

```
z01.cpp:53:9: error: invalid use of non-static data member ‘ParsedData::generators_count’
z01.cpp:54:21: error: from this location
z01.cpp:53:9: error: invalid use of non-static data member ‘ParsedData::generators_count’
z01.cpp:55:25: error: from this location
z01.cpp:53:9: error: invalid use of non-static data member ‘ParsedData::generators_count’
z01.cpp:56:43: error: from this location
z01.cpp:57:9: error: invalid use of non-static data member ‘ParsedData::intervals_count’
z01.cpp:58:32: error: from this location
z01.cpp:57:9: error: invalid use of non-static data member ‘ParsedData::intervals_count’
z01.cpp:59:30: error: from this location
z01.cpp:62:56: error: expected ‘,’ or ‘...’ before ‘_mean_arr’
z01.cpp:62:1: error: prototype for ‘ParsedData::ParsedData(int, double*)’ does not match any in class ‘ParsedData’
z01.cpp:51:7: error: candidates are: ParsedData::ParsedData(const ParsedData&)
z01.cpp:51:7: error:                 ParsedData::ParsedData()
z01.cpp: In function ‘ParsedData load_input_data()’:
z01.cpp:102:62: error: no matching function for call to ‘ParsedData::ParsedData(int&, double [(((sizetype)(((ssizetype)generators_count) + -1)) + 1)], double [(((sizetype)(((ssizetype)generators_count) + -1)) + 1)], int [(((sizetype)(((ssizetype)generators_count) + -1)) + 1)], int&, double [(((sizetype)(((ssizetype)intervals_count) + -1)) + 1)], double [(((sizetype)(((ssizetype)intervals_count) + -1)) + 1)])’
z01.cpp:102:62: note: candidates are:
z01.cpp:51:7: note: ParsedData::ParsedData()
z01.cpp:51:7: note:   candidate expects 0 arguments, 7 provided
z01.cpp:51:7: note: ParsedData::ParsedData(const ParsedData&)
z01.cpp:51:7: note:   candidate expects 1 argument, 7 provided 
```

有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:12:15.070

`std::vector<double>`. C 样式数组的大小必须是编译时常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:14:03.470

在 C++ 中，您将使用`std::vector<double>`, 并将其初始化为构造函数中所需的大小。例如：

```
#include <vector>

class Foo
{
 public:
  Foo(int i) : intervals_count(i), interval_begins_arr(intervals_count) {}
 private:
  int intervals_count;
  std::vector<double> interval_begins_arr;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:14:12.847

```
int generators_count;
double mean_arr[generators_count]; 
```

初始化类时， generators_count 没有值，这意味着您不能使用它来确定数组的大小。你可以改用 std::vector 吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T13:14:50.590

使用 a[`vector`](http://www.cplusplus.com/reference/vector/vector/)或使用 a `double*`then allocate with `new`（仅当初始分配后大小不会改变时）

数组需要在编译时知道大小

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T13:21:19.517

我建议使用`std::vector`如下。

```
class ParsedData {
    std::vector<double> mean_arr, variance_arr, interval_begins_arr, interval_ends_arr;
    std::vector<int> amount_of_numbers_to_generate_arr;

    ParsedData(std::vector<double> mean_arr,
            std::vector<double> variance_arr,
            std::vector<double> interval_begins_arr,
            std::vector<double> interval_ends_arr,
            std::vector<int> amount_of_numbers_to_generate_arr)
        : mean_arr(mean_arr), variance_arr(variance_arr)
        , interval_begins_arr(interval_begins_arr), interval_ends_arr(interval_ends_arr)
        , amount_of_numbers_to_generate_arr(amount_of_numbers_to_generate_arr) {}
} 
```

您可以使用以下命令将 C++ 数组或指针转换为向量：

```
int count = 5;
int a[count] = {1, 2, 3, 4, 5};
std::vector<int> vec_a(a, a+5); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T13:28:52.273

如果`generators_count`和`intervals_count`在编译时已知[但不是整个程序的单个常量]，则可以使用`template`.

```
template <const int T1, const int T2>
class ParsedData {
  public:
    int generators_count;
    double mean_arr[T1];
    double variance_arr[T1];
    int amount_of_numbers_to_generate_arr[T1];
    int intervals_count;
    double interval_begins_arr[T2];
    double interval_ends_arr[T2];
}; 
```

否则，如其他地方所建议的，使用`vector`.

我个人喜欢使用 a`struct`来保存生成器值和另一个`struct`用于间隔数据的建议 - 节省了向量的数量。[我可能在提出这个结构之前就已经这样做了，因为它让生活更容易看到所有这些都属于一起]。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-09T13:31:08.820

好。第一个答案是：你应该试试`std::vector<double>.`

但是看看你的代码……你的意图是什么？

`ParsedData`在您的代码中，它只是带有数据的实际数组的一种接口，您不会在 ParsedData 中复制任何更多的引用（实际上是指针），但数据在其他地方。这是你的意图吗？

如果是，您可以使用简单`double *maen_arr;`等。

如果不是，并且您实际上需要数据的副本，那么请考虑使用`vector`.

# powershell - 通过 Powershell 的 TCP 烟囱命令

> ID：15902870
> 
> 赞同：1
> 
> 时间：2013-04-09T13:10:43.233
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我有以下内容，我一直在努力工作，但目前还不能。我希望它通过并获得 netsh 命令的输出，但我只需要它来检查三个输出。

如果我只是运行它，这是命令输出：

```
netsh int tcp show global | where {$_ -match ': disabled'}

Receive-Side Scaling State          : disabled 
Chimney Offload State               : disabled 
Direct Cache Acess (DCA)            : disabled 
Receive Window Auto-Tuning Level    : disabled 
ECN Capability                      : disabled 
RFC 1323 Timestamps                 : disabled 
```

现在，如果我运行以下命令以获取例如“烟囱卸载状态”并检查它是否设置为 DISABLED，那么它会失败并通过 ELSE 语句说它在不是时设置为 ENABLED...知道如何修复这个请：

代码：

```
clear
$netsh = netsh int tcp show global | where {$_ -match ': disabled'}

if ($netsh -eq 'Chimney Offload State               : disabled')
{
    Write-Host "TCP Chimney disabled"
}
else
{
    Write-Host "TCP Chimney is ENABLED - WRONG!!!"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:34:18.020

另一种方法是将结果对象化：

```
$pso = New-Object -TypeName PSObject

netsh int tcp show global | where {$_ -match ':'} | foreach{
    $item = $_.Split(':') -replace '\s|-|\(|\)'
    $pso | Add-Member -MemberType NoteProperty -Name $item[0] -Value $item[1]
}

if($pso.ChimneyOffloadState -eq 'disabled')
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:13:14.717

明白了......它是在语句中添加一个-match......

```
if ($netsh -MATCH 'Chimney Offload State               : disabled') 
```

# elasticsearch - 用于匹配 BoolQuery 中提供的任何条件的弹性查询

> ID：15902872
> 
> 赞同：0
> 
> 时间：2013-04-09T13:10:48.343
> 
> 标签：elasticsearch, elasticjs

我让 elastic.js 像这样构建动态查询：

```
{
    "size": 15,
    "query": {
        "bool": {
            "must": [
                { "term": { "tag": { "term": "rocket" } } },
                { "term": { "name": { "term": "space" } } }
            ],
            "should": [
                { "wildcard": { "place": { "value": "Moo*" } } }
            ]
        }
    }
} 
```

用于此的 Elastic.js 代码是（[翻译器](http://docs.fullscale.co/translator/)）：

```
ejs.Request()
    .size(15)
    .query(
      ejs.BoolQuery()
        .must(ejs.TermQuery('tag', 'rocket'))
        .must(ejs.TermQuery('name', 'space'))
        .should(ejs.WildcardQuery('place', 'Moo*'))
) 
```

它工作得很好，我很高兴，我希望它是那样的。*但*我意识到我需要添加一个选项来执行这个`OR`有条件的查询，而不是`AND`现在。

它应该找到符合**任何**提供条件的文档。

而这项任务让我没有任何线索（即使是关于将完成此目的的 DSL）。

我看过[OrFilter](http://www.elasticsearch.org/guide/reference/query-dsl/or-filter/)但我不知道如何正确使用它（尤其是使用 elasticJS）。任何关于弹性/js的可靠信息来源将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:14:15.273

您可以将所有子句放在[bool 查询](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query/)的 should 部分中。

关于[elastic.js](http://www.fullscale.co/elasticjs/)，我个人认为它是一款很棒的软件，文档也很完善。看看它的[API 文档](http://docs.fullscale.co/elasticjs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T09:42:23.617

```
var r = ejs.Request({indices: index, types: type}),
    boolQ = ejs.BoolQuery();

boolQ.should(ejs.FieldQuery("DEAL_NAME","value")).defaultOperator("AND"));
boolQ.should(ejs.TermQuery( "DEAL_MOTTO","value"));                     
boolQ.should(ejs.FieldQuery("dealaddresses.CITY","value").defaultOperator("AND"));

r.query(boolQ); 
```

# magento - 将主页链接添加到 Magento 菜单栏

> ID：15902873
> 
> 赞同：0
> 
> 时间：2013-04-09T13:10:48.597
> 
> 标签：magento

我正在尝试将主页链接添加到 Magento 的主菜单。我在我的模板/目录/导航中修改了 top.phtml 并添加了该行

```
<li>
    <a href="<?php echo $this->getUrl('') ?>"><?php echo $this->__('Home'); ?></a>
</li> 
```

之间`<ul>`但它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:53:40.653

尝试

```
<li>
      <a href="<?php echo Mage::helper('core/url')->getHomeUrl(); ?>"><?php echo $this->__('Home'); ?></a>
</li> 
```

然后刷新缓存（如果有）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:19:34.207

尝试使用这个。它将返回您网站的基本网址。

```
<?php echo Mage::getBaseUrl(); ?> 
```

# jquery - $.data 的数据限制？

> ID：15902881
> 
> 赞同：2
> 
> 时间：2013-04-09T13:11:11.917
> 
> 标签：jquery, html, web, client-side, data-storage

我正在寻找在客户端存储大量数据的解决方案。[但是由于某些技术的一些限制，](https://stackoverflow.com/questions/15876098/how-to-store-data-locally)我无法找到正确的方法。

我开始了解，[`$.data`](http://api.jquery.com/jQuery.data/)但我没有得到任何[关于`$.data`](https://stackoverflow.com/questions/7734224/jquery-data-how-much-data-can-i-store-in-it).

任何信息都会很棒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:19:55.033

它可以存储操作系统允许的任何内容，这实际上是无限的。这是因为`$.data`将数据存储在对象属性中，ECMAScript 没有对它们设置任何特定的内存限制。

# jquery - jQuery插件多个实例，内部变量递增

> ID：15902885
> 
> 赞同：1
> 
> 时间：2013-04-09T13:11:34.487
> 
> 标签：jquery, plugins, multiple-instances

我正在尝试制作一个 jQuery 插件，它将增加和减少一个变量（不是一个元素的值！）。这行得通，但是多个实例增加了同一个变量，并且没有为每个实例创建一个孤立的值。
这是我的代码：

```
(function( $ )
{

var current_value = 5;
var maxs = 10;
var container_id;

$.fn.moveLeft = function(container_id){
    return this.each(function()
    {
        if (current_value+1 <= maxs)
            {
            current_value++;
            $("#"+container_id).animate({
                marginLeft: "-=194px",
                },200);

            }
    });
    }
$.fn.moveRight = function(container_id){
    return this.each(function()
    {
        if (current_value-1 >= 1)
            {
            current_value--;
            $("#"+container_id).animate({
                marginLeft: "+=194px",
                },200);
            }
    });
    }

})(jQuery); 
```

html部分：

```
<div id="back" onclick="$('#back').moveLeft('s1');" >BACK</div><div id="fward" onclick="$('#fward').moveRight('s1');" >FWARD</div>
<div id="s1">SOME CONTENT 1</div>

<div id="back2" onclick="$('#back2').moveLeft('s2');" >BACK</div><div id="fward2" onclick="$('#fward2').moveRight('s2');" >FWARD</div>
<div id="s2">SOME CONTENT 2</div> 
```

我需要的是`current_value`为每个实例分开。有人可以指导我吗？我是 jQuery 的新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:35:32.630

根据[插件创作](http://docs.jquery.com/Plugins/Authoring#Data)文档，您可以使用[.data()](http://api.jquery.com/data/)来存储状态。

```
$.fn.moveLeft = function(container_id) {
    return this.each(function() {
        var $this = $(this), moveLeftValue = $this
            .data('moveLeftValue')
            || 5;

        if (moveLeftValue < maxs) {
            $("#" + container_id).animate({
                        marginLeft : "-=194px"
                    }, 200);
            $this.data('moveLeftValue', moveLeftValue + 1);
        }
    });
} 
```

# java - 如何从 JAX-RS MessageBodyWriter 访问 CDI 托管 bean？

> ID：15902889
> 
> 赞同：2
> 
> 时间：2013-04-09T13:11:52.427
> 
> 标签：java, jax-rs, cdi, apache-tomee

我正在努力从 TomEE 中的 JAX-RS 消息正文处理程序访问 CDI 托管 bean。

我的处理程序类 ( `implements MessageBodyWriter<Object>, MessageBodyReader<Object>`) 是通过 中的`cxf.jaxrs.providers`属性注册的`openejb-jar.xml`。当我`@Inject`在构造函数上使用注释时，处理程序被静默忽略（因为它缺少无参数构造函数）。改为使用字段注入时，该字段保持为空。显然，消息体处理程序在 TomEE (CXF) 中完全不受管理。

我尝试通过 JNDI 获取 BeanManager，但是没有记录异常就失败了。

有没有其他方法可以做到这一点，或者我做错了什么？或者，我当然希望有一种方法可以使处理程序本身受到管理，并以某种方式以编程方式注册它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:44:49.720

在 CXF >= 2.7 的版本中，注入应该可以正常工作。以前的版本使用 JAX-RS 1.x，它*没有*与 CDI 紧密集成。特别是，JAX-RS 1.x 提供程序，即使存在 CDI 容器，也由 JAX-RS 运行时（不是 CDI 运行时）管理，并且**仅**支持以下注入注释：

*   @资源
*   @资源
*   @EJB
*   @EJBs
*   @WebServiceRef
*   @WebServiceRefs
*   @PersistenceContext
*   @PersistenceContexts
*   @PersistenceUnit
*   @PersistenceUnits

参考：

*   [JAX-RS 1.0 规范，第 6.2 节](http://download.oracle.com/otn-pub/jcp/jaxrs-1.0-fr-eval-oth-JSpec/jaxrs-1.0-final-spec.pdf)
*   [JAX-RS 2.0 规范，第 10.2.3 节](http://download.oracle.com/otn-pub/jcp/jaxrs-2_0-pfd-spec/339-spec.pdf)
*   [Apache CXF - 从 JAX-RS 1.1 迁移到 2.0](http://cxf.apache.org/docs/jax-rs.html#JAX-RS-MigratingfromJAXRS1.1to2.0)

# mysql - 获取已解决的错误的最后结果

> ID：15902890
> 
> 赞同：0
> 
> 时间：2013-04-09T13:11:52.517
> 
> 标签：mysql, sql, mantis

我一直在尝试获取状态，因此我可以找出错误更改其状态“已解决”需要多长时间，因此我有以下 SQL：

```
select bug.id,
       bug.project_id,
       DATEDIFF (FROM_UNIXTIME(his.date_modified), FROM_UNIXTIME(date_submitted)) as dias_resolucao,
       DATE_FORMAT(FROM_UNIXTIME(his.date_modified), '%Y-%m') as ano_mes
from mantis_bug_table bug
left join mantis_project_table pro on bug.project_id = pro.id
left join mantis_custom_field_string_table cus on bug.id = cus.bug_id
left join mantis_bug_history_table his on bug.id = his.bug_id
where bug.category_id = 1 and
      (cus.field_id=1 or cus.field_id is null) and      
      his.new_value = 80 and 
      his.field_name = 'status' and                 
      bug.id = 5171 and
      cus.value='Sim'      
having his.date_modified = max(his.date_modified) 
```

问题是我不知道为什么会打印以下错误：

```
[SELECT - 0 row(s), 0.000 secs]  
[Error Code: 1054, SQL State: 42S22]  
Unknown column 'his.date_modified' in 'having clause' 
```

运行相同的 SQL，但不使用 have 子句，我会得到以下结果：

```
╔══════╦════════════╦════════════════╦═════════╗
║  id  ║ project_id ║ dias_resolucao ║ ano_mes ║
╠══════╬════════════╬════════════════╬═════════╣
║ 5171 ║          4 ║             17 ║ 2012-12 ║
║ 5171 ║          4 ║             18 ║ 2012-12 ║
╚══════╩════════════╩════════════════╩═════════╝ 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:31:20.150

尝试一下。

```
SELECT his.date_modified, bug.id,
       bug.project_id,
       DATEDIFF (FROM_UNIXTIME(his.date_modified), FROM_UNIXTIME(date_submitted)) AS dias_resolucao,
       DATE_FORMAT(FROM_UNIXTIME(his.date_modified), '%Y-%m') AS ano_mes
FROM mantis_bug_table bug
LEFT JOIN mantis_project_table pro ON bug.project_id = pro.id
LEFT JOIN mantis_custom_field_string_table cus ON bug.id = cus.bug_id
LEFT JOIN mantis_bug_history_table his ON bug.id = his.bug_id
WHERE bug.category_id = 1 AND
      (cus.field_id=1 OR cus.field_id IS NULL) AND      
      his.new_value = 80 AND 
      his.field_name = 'status' AND                 
      bug.id = 5171 AND
      cus.value='Sim'      
HAVING his.date_modified = MAX(his.date_modified) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:43:41.967

几件事。首先，我认为默认情况下您不能在 HAVING 子句中使用别名。我可能是错的，我无法在[这里](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html%20here)解析文档。所以 HAVING 行应该看起来更像 `HAVING mantis_bug_history_table.date_modified = MAX(mantis_bug_history_table.date_modified)

不过我可能是错的。也就是说，我认为您需要进行自我加入才能获得 MAX date_modified。像这样的东西：

```
select bug.id,
       bug.project_id,
       DATEDIFF (FROM_UNIXTIME(his.date_modified), FROM_UNIXTIME(date_submitted)) as dias_resolucao,
       DATE_FORMAT(FROM_UNIXTIME(his.date_modified), '%Y-%m') as ano_mes
from mantis_bug_table bug
left join mantis_project_table pro on bug.project_id = pro.id
left join mantis_custom_field_string_table cus on bug.id = cus.bug_id
left join mantis_bug_history_table his on bug.id = his.bug_id
inner join (select bug_id, max(date_modified) as max_date_modified from mantis_bug_history_table group by bug_id) as his_max_dates
 on his.bug_id = his_max_dates.bug_id and his.date_modified = his_max_dates.max_date_modified
where bug.category_id = 1 and
      (cus.field_id=1 or cus.field_id is null) and      
      his.new_value = 80 and 
      his.field_name = 'status' and                 
      bug.id = 5171 and
      cus.value='Sim' 
```

试试看。

# c# - 级联下拉 MVC3 返回空下拉字段

> ID：15902891
> 
> 赞同：0
> 
> 时间：2013-04-09T13:11:53.983
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3, cascadingdropdown

我正在尝试使用 MVC3 创建级联下拉列表。父下拉列表称为“类别”，当用户选择类别时，子下拉列表将填充属于该类别的图片列表。我现在有一些代码，当用户选择一个类别时，我可以从视图中调用控制器。这是我的代码：

**控制器：**

```
 public ActionResult Pictures(int catId)
    {
        var k = ((List<Picture>) ViewBag.AllPictures)
            .FindAll(x => x.CategoryId == catId)
            .Select(x => new
                {
                    Value = x.PictureId,
                    Text = x.Title
                });

        return Json(k, JsonRequestBehavior.AllowGet);
    } 
```

**看法：**

```
 <div class="editor-field">
            @Html.DropDownListFor(model => model.Picture.PictureId, Enumerable.Empty<SelectListItem>(),  new { @id = "pictureFilter" })
            @Html.ValidationMessageFor(model => model.Picture.PictureId)
        </div> 
```

**Javascript：**

```
<script type="text/javascript">
    $('#ddlFilter').on("change", function() {
        var selectedCat = $(this).val();
        $.getJSON("/StoreManager/Pictures", { catId: selectedCat }, function(pictures) {
            var picturesSelect = $('#pictureFilter');
            picturesSelect.empty();
            $.each(pictures, function(index, picture) {
                picturesSelect.append($('<option/>', {
                    value: picture.val,
                    text: picture.text
                }));
            });
        });  
    });
</script> 
```

当我查看变量“k”时，我的控制器正在返回。它确实包含图片的所有正确集合项，并分配了它们各自的“值”和“文本”字段。当它将 JSON 返回到视图时，它会创建一个下拉菜单，其中包含应该存在的确切字段数，但它们都包含空数据。当我在 Chrome 中检查元素时，下面是 HTML：

```
<option><option/>
<option><option/>
<option><option/>
<option><option/> 
```

感谢所有帮助。请求的任何其他代码都将链接到 pastebin 帖子中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:18:30.577

您已返回 JSON，然后您需要使用与从`Pictures`控制器发送的相同变量。试试这个：

```
<script type="text/javascript">
    $('#ddlFilter').on("change", function() {
        var selectedCat = $(this).val();
        $.getJSON("/StoreManager/Pictures", { catId: selectedCat }, function(pictures) {
            var picturesSelect = $('#pictureFilter');
            picturesSelect.empty();
            $.each(pictures, function(index, picture) {
                picturesSelect.append($('<option/>', {
                    value: picture.Value,
                    text: picture.Text
                }));
            });
        });  
    });
</script> 
```

或者您也可以使用 firebug 控制台选项卡检查从您的 Action 方法获取的响应变量。

# android - 将可绘制对象放入 xml imageView 时不支持的图像类型

> ID：15902894
> 
> 赞同：2
> 
> 时间：2013-04-09T13:12:04.377
> 
> 标签：android, imageview

当我通过代码在图像视图中引用图像时：

```
<ImageView
   android:id="@+id/imageView2"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:src="@drawable/tequila" /> 
```

我在错误日志中收到以下错误：

```
javax.imageio.IIOException: Unsupported Image Type
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(    at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(    at javax.imageio.ImageIO.read(    at javax.imageio.ImageIO.read(    at android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:96)
    at com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:233)
    at android.content.res.BridgeTypedArray.getDrawable(BridgeTypedArray.java:782)
    at android.widget.ImageView.<init>(ImageView.java:120)
    at android.widget.ImageView.<init>(ImageView.java:110)
    at sun.reflect.GeneratedConstructorAccessor10.newInstance(    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(    at java.lang.reflect.Constructor.newInstance(    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
    at android.view.BridgeInflater.onCreateView(BridgeInflater.java:86)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:131)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:749)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:749)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372) 
```

是否正在发生这种情况？我无法在我的电脑上毫无问题地打开图像，但 Eclipse 不喜欢、不采样我也不在图形布局中

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:24:49.643

也许您的 JPG 处于 CYMK 模式。尝试从代码中设置 ImageView 的 src。

```
BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inPreferredConfig = Bitmap.Config.ARGB_8888;
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), 
                                                          R.drawable.tequila, opts);
        ImageView view = (ImageView) findViewById(R.id.imageView2);
view.setImageBitmap(bmp); 
```

# java - Java 客户端和 C++ 服务器通过 TCP Socket 发送和接收

> ID：15902898
> 
> 赞同：6
> 
> 时间：2013-04-09T13:12:28.627
> 
> 标签：java, c++, ruby, sockets, send

我有一个 C++ 服务器和两个客户端（ruby 和 java）。一切都在 64 位 linux 机器上运行（java 1.7.0_17） ruby​​ 客户端完全可以工作，但是 java 版本会出现问题。

在 Java 中，我尝试将字符串从客户端发送到服务器。实际上服务器收到了整个字符串，但服务器认为还有更多的东西要接收。

ruby 客户端看起来有点像这样：

```
socket = TCPSocket.open(@options[:host],@options[:port])
test = "Hello, World"
socket.puts test
socket.shutdown 1
response = socket.gets 
```

这里的一切工作正常。ruby 客户端发送一个字符串。服务器接收该字符串并发送回复。

Java 版本如下所示：

```
String ip = "127.0.0.1";
int port = 6686;
java.net.Socket socket = new java.net.Socket(ip,port);
OutputStreamWriter out = new OutputStreamWriter(socket.getOutputStream());
InputStreamReader in = new InputStreamReader(socket.getInputStream());

String msg = "Hello, world!";

//send
PrintWriter pw = new PrintWriter(out, true);
pw.print(msg);
pw.flush();
// I also tried: out.write(msg); out.flush(); nothing changed

//receive the reply
BufferedReader br = new BufferedReader(in);
char[] buffer = new char[300];
int count = br.read(buffer, 0, 300);
String reply = new String(buffer, 0, count);
System.out.println(reply);

socket.close(); 
```

在另一边有一个 C++ 服务器：

```
string receive(int SocketFD) {
   char buffer[SOCKET_BUFFER_SIZE];
   int recv_count;

   // empty messagestring
   string message = "";

   // empty buffer
   memset(buffer, 0, sizeof(buffer));

   while ((recv_count = recv(SocketFD, buffer, sizeof(buffer) - 1, 0)) > 0) {
      /*if (recv_count == -1) {
         cout << "failed." << endl;
         break;
      }*/
      cout << recv_count << endl;
      if (ECHO_SOCKETS) cout << "received: " << buffer << endl;

      message.append(buffer);
      memset(buffer, 0, sizeof(buffer));

      if (ECHO_SOCKETS) cout << "message is now: " << message << endl;

   }
   return message;
} 
```

Java 消息的服务器输出为：

```
13
received: Hello, world!
message is now: Hello, world! 
```

然后什么也没有发生。问题是：

```
recv(SocketFD, buffer, sizeof(buffer) - 1, 0) 
```

陷入无限循环（或类似的东西）。如果我终止 Java 客户端进程或者我输入如下内容：

```
pw.print(msg);
out.close(); 
```

服务器端的输出是：

```
_sending reply: "Request unrecognized/invalid" request="Hello, world!"
send reply success
now close connection 
```

这个输出是正确的（除了“发送回复成功”），但在添加的情况下：

```
out.close(); 
```

客户端收不到服务器的回复。因为 Socket 是关闭的。

```
java.net.SocketException: Socket is closed
at java.net.Socket.getInputStream(Socket.java:864)
at MyServer.writeMessage(MyServer.java:56)
at MyServer.test(MyServer.java:42)
at MyServer.main(MyServer.java:30) 
```

# **编辑**

我试图调用 pw.flush(); 以及不同的分隔符，如“\n”、“\r”、“\r\n”和“\n\r”，但服务器仍然认为还有一些东西要读。我也尝试使用 DatagramSockets：

```
java.net.DatagramSocket dSocket = new java.net.DatagramSocket();
InetAddress address = InetAddress.getByName("localhost");
String msg = "Hello, world!";
byte[] buf = msg.getBytes();
java.net.DatagramPacket packet = new DatagramPacket(buf, buf.length, address, 6686); 
```

但是服务器不能接受这个数据包。

# **解决方案**

ruby 客户端执行类似于 socket.shutdownOutput(); 的操作。(ruby: socket.shutdown 1) 在调用 puts 之后。我改变了java-client-code：

```
out.write(msg);
socket.shutdownOutput(); 
```

它有效！

正如@Charly 所说：我必须定义一个“协议”。在我的情况下，我不允许更改任何与通信相关的代码（在服务器和 ruby​​ 客户端中），因为该功能被另一组研究人员使用。因此，我必须以这种方式修改我的 java-client，使其在与 ruby​​-client**完全相同**的时间执行**完全相同**的操作（类似于协议）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:23:38.310

PrintWriter 缓冲区（当 autoflush 为 true 时）仅通过调用 println 或 printf 来刷新。调用 print 可能不会刷新缓冲区 ( [Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html) )。尝试调用 println 或直接使用 OutputStreamWriter 和 flush()。请注意使用正确的字符集（您可以在 OutputStreamWriter 构造函数中设置它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:19:25.667

分别关闭流以如下方式刷新它：

```
DataOutputStream dataOut = new DataOutputStream(socket.getOutputStream());
dataOut.writeUTF(s);
dataOut.flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:45:42.610

```
while ((recv_count = recv(SocketFD, buffer, sizeof(buffer) - 1, 0)) > 0) {
      if (recv_count == -1) { 
```

我不知道你的问题是什么，但这段代码肯定是无稽之谈。内测是不可能成功的。

# mysql - sql获取具有最大日期和相对ID记录的行

> ID：15902900
> 
> 赞同：3
> 
> 时间：2013-04-09T13:12:32.837
> 
> 标签：mysql, sql, greatest-n-per-group

我尝试做一个简单的查询，花了几个小时的音调却什么也没得到……
我所需要的只是获取 MAX 日期，所有都是相应的字段。

我解释一下：我有一个包含以下字段的表：`BasketID`, `OrderStatusTypeID`, `StatusDate`。
我尝试只获取一个包含`OrderStatusTypeID`最后一个值的记录`StatusDate`。

**这是数据**

```
BasketID    OrderStatusTypeID   date
1111        13              2013-04-01 11:38:31
1111        26              2013-04-04 17:44:17
1111        39              2013-04-02 12:35:07
1111        40              2013-04-08 12:52:55 
```

**这是我的查询：**

```
SELECT BasketID, OrderStatusTypeID, max(StatusDate) date
FROM st
where BasketID=1111
group by BasketID 
```

**这是我需要的结果**

```
BasketID    OrderStatusTypeID   date
63558       40          2013-04-08 12:52:55 
```

出于某种原因，我只得到`OrderStatusTypeID = 13`而不是`40`！（StatusDate 的最大值，而不是 OrderStatusTypeID 的最大值）。
为什么？？？

```
BasketID    OrderStatusTypeID   date
63558       13                   2013-04-08 12:52:55 
```

**感谢您的快速响应！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:14:47.150

我假设您正在使用`MySQL`，因为即使您没有在`GROUP BY`子句中指定所有非聚合列，您也可以运行查询。

有很多方法可以解决这个问题，但我习惯这样做。该查询使用一个子查询，它分别`date`为每个`BasketID`. 由于子查询仅返回两列，因此您需要将其连接回表本身以获取其他列，前提是它在两列上匹配：`BasketID`, `Date`.

```
SELECT  a.*
FROM    st a
        INNER JOIN
        (
            SELECT  BasketID, MAX(Date) max_date
            FROM    st
            GROUP   BY BasketID
        ) b ON  a.BasketID = b.BasketID AND
                a.Date = b.max_date 
```

您的查询已成功执行而未引发异常，即使`GROUP BY`子句中未指定非聚合列，因为它在 MySQL 中是允许的。请参阅[GROUP BY 的 MySQL 扩展](http://dev.mysql.com/doc/refman/5.6/en/group-by-extensions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T08:01:19.527

我知道这是一个旧线程，但是为什么在这种情况下不能使用 ORDER BY 和 LIMIT 呢？像这样的查询：

SELECT * FROM st WHERE BasketID=1111 ORDER BY Date DESC LIMIT 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T08:08:29.947

它非常容易使用 TOP 命令，例如：

```
SELECT TOP 1 * FROM st 
WHERE BasketID = 1111
ORDER BY date DESC 
```

# javascript - JS 将键盘快捷键绑定到函数

> ID：15902902
> 
> 赞同：1
> 
> 时间：2013-04-09T13:12:45.277
> 
> 标签：javascript, jquery, jquery-hotkeys

```
function initKeys() {

    $(document).bind("keydown", "U", LoadPlayer);
}

window.onload = initKeys; 
```

我想在按键时执行“LoadPlayer”功能`u`。我得到的是，对于任何按下的键，都会执行“LoadPlayer”。

HotKeys 库是这样添加的：

```
<script language="javascript" type="text/javascript" src="./libraries/jquery.hotkeys.js"></script> 
```

但是找不到。我把它放在和其他图书馆完全相同的地方。其他的没问题

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:32:48.953

试试这个，它应该工作。它检查匿名函数中按下的键（以便您可以根据需要添加任意数量的热键）。

```
$(document).ready(function(){
    $(document).bind("keydown", function(e){ 
        e = e || window.event;
        var charCode = e.which || e.keyCode;
        if(charCode == 85) LoadPlayer();
    });
}); 
```

Demo： http: [//jsfiddle.net/HULgw/](http://jsfiddle.net/HULgw/) （运行后点击结果块，监听keydown事件：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:50:25.410

尝试从您的 javascript src 路径中删除 ./ 。还要检查热键库的文件权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:16:52.960

您正在将 keydown 事件绑定到所有键上。“U”是您将传递给处理程序 loadPlayer (qv [http://api.jquery.com/bind/](http://api.jquery.com/bind/) ) 的参数。而是直接绑定 keydown，并在 keycode 上对其进行过滤。

# sql-server - 从 MS Access 中的 ODBC 连接中提取 UID

> ID：15902905
> 
> 赞同：1
> 
> 时间：2013-04-09T13:12:53.567
> 
> 标签：sql-server, ms-access, odbc, ms-access-2010

我有一个 MS Access 前端，其中的表链接到 SQL Server。我使用文件 DSN 链接表，打开 Access 数据库后，用户必须输入 SQL 服务器用户 ID 和密码。

有没有办法从已建立的 ODBC 连接中提取该用户 ID（而不是密码），例如将其用于显示和审核目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:45:37.870

是的，您可以在 Access 中创建一个直通查询，只需以下语句...

```
SELECT CURRENT_USER 
```

...然后在该查询的属性表中单击旁边的省略号按钮`ODBC Connect Str`并选择您的文件 DSN。（当询问您是否要将密码保存在连接字符串中时，请说“否”。）

然后保存 Pass-Through 查询（我称为“getCurrentSqlUser”）并运行它以获取 SQL 服务器上当前用户的名称。

（注意：在测试时，我以身份登录`sa`并发现查询返回`dbo`。我认为这是因为我以`sysadmin`服务器角色的成员身份登录。）

# hibernate - 如何在 JPQL 构造函数表达式中使用连接？

> ID：15902910
> 
> 赞同：1
> 
> 时间：2013-04-09T13:13:09.777
> 
> 标签：hibernate, jpa, spring-data-jpa

我有一个包含客户的数据模型，每个客户都有 n 个投资组合，而这些投资组合又具有 n 个投资，都映射为 @ManyToMany 并懒惰地获取。

我也有一个只有以下字段的 DTO：

*   顾客姓名
*   投资组合名称列表

是否可以编写使用构造函数表达式创建 DTO 的单个 JPQL 查询？尤其是如何在 DTO 构造函数中获取投资组合名称列表？

如果我改为查询具有投资组合的客户模型并自己构建 DTO，是否效率低下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:28:40.970

你必须自己做，它甚至可能比在 JPQL 中使用构造函数更有效，因为不需要反射：

```
select c.name, p.name from Customer c left join c.portfolios 
```

然后循环遍历结果，并构建你的结果。例如：

```
Map<String, Result> results = new HashMap<String, Result>();
for (Object[] row : rows) {
    String customerName = (String) row[0];
    Result r = results.get(customerName);
    if (r == null) {
        result.put(customerName, new Result(customerName));
    }
    r.addPortfolio((String) row[1]);
}
Collection<Result> namesAndPortfolios = results.values(); 
```

# java - JAVA_OPTS 无法识别

> ID：15902913
> 
> 赞同：1
> 
> 时间：2013-04-09T13:13:16.043
> 
> 标签：java, amazon-ec2

我有以下序列

```
ubuntu@ip-10-63-3-254:/mnt$ export JAVA_OPTS=-Dmt.config.from=En
ubuntu@ip-10-63-3-254:/mnt$ echo $JAVA_OPTS
-Dmt.config.from=En
ubuntu@ip-10-63-3-254:/mnt$ javac hello.java
ubuntu@ip-10-63-3-254:/mnt$ java 你好
mt.config.from=null
ubuntu@ip-10-63-3-254:/mnt$ java -Dmt.config.from=En 你好
mt.config.from=En
ubuntu@ip-10-63-3-254:/mnt$

```

hello.java 在哪里

```
公共课你好{
公共静态无效主要（字符串[]参数）{
       字符串属性 = "mt.config.from";
       字符串值 = System.getProperty(property);
       System.out.println(property + "=" + value);
  }
}

```

为什么我的 export JAVA_OPTS=-Dmt.config.from=En 没有被 hello.java 选中？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:17:51.947

我认为您在运行时需要参考`$JAVA_OPTS`，例如：

```
java $JAVA_OPTS hello 
```

我认为根本不`java`检查环境变量，它更像是启动 jvm 时脚本中使用的约定。

# c# - 可以直接从代码生成类图的程序

> ID：15902914
> 
> 赞同：6
> 
> 时间：2013-04-09T13:13:16.213
> 
> 标签：c#, import, uml, documentation-generation, class-diagram

我有一个有点大的 C# 项目，我开始失去对它的概述。我想知道是否有一些软件可以以图形方式表示我的类，调用什么等等。

我尝试了一些谷歌搜索，但只找到了旧软件和 Visual Studio 扩展，它们无法直接导入到输出功能。

欢迎提出建议:-)

问候，约翰

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T13:28:54.730

您可以使用 Visual Studio 的内置“类图”文件类型。

在您的项目中添加一个新的类图：

```
Add -> New Item -> Class diagram 
```

然后将您的类拖放到图表文件中：

![在此处输入图像描述](https://i.stack.imgur.com/zawCy.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T13:22:29.500

[即使对于大型项目， Doxygen](https://github.com/doxygen/doxygen/blob/master/README.md#doxygen)也会从源代码生成漂亮的超文本图表。它使用 graphviz 库来绘制图表并提供 html 帮助作为输出。它适用于类 C 语言。

# android - ABS + IntelliJ IDEA：无法开始活动

> ID：15902918
> 
> 赞同：0
> 
> 时间：2013-04-09T13:13:27.717
> 
> 标签：android, jar, intellij-idea, actionbarsherlock

按照[本教程](http://www.ashokgelal.com/2012/12/setting-up-intellij-idea-12-with-maven-actionbarsherlock-roboelectric-androidannotations/)，我在 IntelliJ IDEA 中的 Android 项目中添加了 Maven、ABS 和 AndroidAnnotations。起初，我一直在为[DEX/无法访问 android.support.v4.app.FragmentActivity](https://stackoverflow.com/questions/14099291/intellij-android-support-v4-jar-in-included-in-actionbarsherlock-and-project)异常而苦苦挣扎，并且似乎使用以下配置对其进行了修复：

![应用程序部门](https://i.stack.imgur.com/pyXSh.png)

![腹肌](https://i.stack.imgur.com/EREb2.png)

现在我得到`java.lang.RuntimeException: Unable to start activity`错误。

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="ru.erarta.erarta"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <application android:label="@string/app_name"
                 android:theme="@style/Theme.Sherlock"
                 android:icon="@drawable/ic_launcher"
                 android:name=".Erarta">
        <activity android:name=".TabsFragmentActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".DayActivity_" />
        <activity android:name=".CalendarActivity"/>
        <activity android:name=".AboutActivity"/>
        <activity android:name=".EventActivity"/>
        <activity android:name=".PermanentExhibitionActivity"/>
        <activity android:name=".MediaActivity"/>
        <activity android:name=".MapActivity"/>
        <activity android:name=".TypesActivity" android:label="Типы событий"/>
        <!-- uses-library android:name="com.google.android.maps" /-->
    </application>
</manifest> 
```

主要活动声明：

```
public class TabsFragmentActivity extends SherlockFragmentActivity
        implements TabHost.OnTabChangeListener 
```

日志输出：

```
04-09 16:45:48.614: ERROR/AndroidRuntime(26562): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity ComponentInfo{ru.erarta.erarta/ru.erarta.erarta.TabsFragmentActivity}: java.lang.ClassCastException: ru.erarta.erarta.CalendarActivity
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
        at android.app.ActivityThread.access$1500(ActivityThread.java:135)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4385)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.ClassCastException: ru.erarta.erarta.CalendarActivity
        at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
        at ru.erarta.erarta.TabsFragmentActivity.onTabChanged(TabsFragmentActivity.java:108)
        at ru.erarta.erarta.TabsFragmentActivity.initialiseTabHost(TabsFragmentActivity.java:73)
        at ru.erarta.erarta.TabsFragmentActivity.onCreate(TabsFragmentActivity.java:51)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
        ... 11 more 
```

我在`apktool`这里反编译了 APK `$ find . | grep support`：

```
./smali/android/support
./smali/android/support/v4
./smali/android/support/v4/app
./smali/android/support/v4/app/Watson$OnCreateOptionsMenuListener.smali
./smali/android/support/v4/app/Watson$OnOptionsItemSelectedListener.smali
./smali/android/support/v4/app/Watson$OnPrepareOptionsMenuListener.smali
./smali/android/support/v4/app/Watson.smali
./smali/com/actionbarsherlock/internal/view/View_HasStateListenerSupport.smali 
```

这是 TabsFragmentActivity.java:108 周围的代码：

```
public void onTabChanged(String tag) {
    TabInfo newTab = this.mapTabInfo.get(tag);
    if (mLastTab != newTab) {
        FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(this,
                        newTab.clss.getName(), newTab.args);
                ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:00:54.453

问题很基本：我试图把`FragmentActivity`而不是`Fragment`在标签中。[这是](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/HuZEQG1mk08)ABS组的相关讨论。

# jquery - 调整元素大小会触发窗口的调整大小事件

> ID：15902920
> 
> 赞同：6
> 
> 时间：2013-04-09T13:13:28.700
> 
> 标签：jquery, jquery-ui, jquery-ui-resizable

看起来当调整 HTML 元素的大小时，windows 的 resize 事件也会被触发。

由于我想在调整元素大小和调整窗口大小时执行不同的逻辑，是否有一种非黑客的方式来处理这个问题？

[http://jsfiddle.net/CPUwW/1/](http://jsfiddle.net/CPUwW/1/)

```
$(function(){
    $(window).on('resize', function(){        
          // This event gets fired when the #my_element div gets resized, event if
          // window doesn't get resized itself
          $('#text').text(++resizes);
    });

    $('#my_element').resizable();    
}); 
```

换句话说，问题是当我调整一个元素的大小时，即使它们的大小没有改变，resize 事件也会为它的所有父级触发

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T13:50:34.020

根据其他信息，我认为这反映了窗口的行为。

```
$(function () {
    var resizes = 0;

    $(window).on('resize', function () {
        $('#text').text(++resizes);
    });
    $('#my_element').resizable();

    $("#my_element").on('resize', function (e) {
        e.stopPropagation();
    });

}); 
```

[http://jsfiddle.net/djwave28/CPUwW/7/](http://jsfiddle.net/djwave28/CPUwW/7/)

**编辑：替代和“更优雅”的解决方案**

尽管上述解决方案完美无缺，但我对必须在 resizable() 小部件之外进行管理并不满意。它不一定是。在深入挖掘之后，可以在“创建”阶段停止传播。为了展示这个解决方案，我将它添加到之前的解决方案中。

```
$(function () {
    var resizes = 0;

    $(window).on('resize', function () {
        $('#text').text(++resizes);
    });
    $('#my_element').resizable({
        create: function (event, ui) {
            $(this).parent().on('resize', function (e) {
                e.stopPropagation();
            });
        }
    });
}); 
```

**更新小提琴：http:** [//jsfiddle.net/djwave28/CPUwW/9/](http://jsfiddle.net/djwave28/CPUwW/9/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T13:20:05.543

使用 e.target：

[看演示](http://jsfiddle.net/CPUwW/3/)

```
$(window).on('resize', function(e){
        if(e.target===this)        
           $('#text').text(++resizes);
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:28:50.527

为我工作[演示](http://jsfiddle.net/b0zar/dBj3f/2/)

```
 if (e.originalEvent.type == 'resize'){
        $('#textWindow').text(++resizesWindow);
    } else {
        $('#text').text(++resizes);
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-20T12:45:29.940

根据[http://www.quirksmode.org/dom/events/resize.html](http://www.quirksmode.org/dom/events/resize.html)调整大小事件在窗口上可用，但在文档或其他元素上不可用（如果我们忽略该页面上提到的一些例外情况）。

因此，使用 resizable() 更改某些元素的宽度和/或高度确实是出乎意料的：
1) 调整大小事件完全触发
2) 调整大小事件冒泡到窗口对象

如果我只想使 $('#elem') 可调整大小，这就是我想要的。没有任何冒泡或窗口调整大小事件触发。

我对示例小提琴进行了一行更改（并将库更新为最新版本）：

[http://jsfiddle.net/CPUwW/56/](http://jsfiddle.net/CPUwW/56/)

```
// The following line is the needed change. widgetEventPrefix is
// originally 'resize'. It have to be changed.

$.ui.resizable.prototype.widgetEventPrefix = 'myresize';

$(function(){
    var resizes = 0;
    $(window).on('resize', function(){        
        $('#text').text(++resizes);
    });
    $('#my_element').resizable();    
}); 
```

编辑：此页面（以及[此处](https://stackoverflow.com/questions/7494378/jquery-ui-resizable-fire-window-resize-event)）其他解决方案中的问题是，如果您只想调整某些 div 左右的大小，那么冒泡到窗口并触发窗口的调整大小事件会导致不必要的开销。

EDIT2：因为`widgetEventPrefix`是一个内部参数，所以它的名称可以更改，可以删除，并且在新版本的 jQuery UI 中可以更改其行为。因此，在升级 UI 时，请检查它是否像以前一样工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T13:29:03.530

接受`e`作为匿名函数的第一个参数。

它将是[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)，您可以使用它来停止使用 e.stopPropagation 传播事件（正如 Daniel 在上面的评论中所建议的那样）。

```
$(function(){
  $(#my_element).on('resize', function(e){
    e.stopPropagation();       
    $('#text').text(++resizes);
  });

  $('#my_element').resizable();    
}); 
```

PPK 有一篇关于事件顺序的精彩文章，解释了事件冒泡和捕获，这就是在这里给你带来麻烦的原因。[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-10T00:15:56.800

如果您只需要区分浏览器大小调整和元素大小调整，可以检查事件 (e) 的 'bubbles' 属性：

```
$(window).resize(function(e)
   {
   if (!e.bubbles)
      {
      clearTimeout( resizeId );
      resizeId = setTimeout( doneResizing, 250 );
      }
   }); 
```

当浏览器调整大小时，e.bubbles 为 False（因为它是顶级实体），但是当任何 Document Element 调整大小时，e.bubbles 将为 True。

我已经在 Chrome 中对此进行了测试……与其他浏览器 YMMV。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-21T05:40:07.787

这是[jQuery 核心](http://%E2%80%8Bhttp://bugs.jquery.com/ticket/9841)中的一个错误，但可以通过目标检查来解决

```
$(window).resize(function(e) {
if (e.target == window)
/* do your stuff here */;
}) 
```

# qt5 - 我应该安装哪个 Qt 环境来编译和运行 qtify 项目？

> ID：15902926
> 
> 赞同：0
> 
> 时间：2013-04-09T13:13:39.813
> 
> 标签：qt5, qtquick2

我想编译并运行[qtify](http://gitorious.org/+qt-developers/qtify/qtify)项目以查看使用**桌面组件**的后续示例。该项目使用：

```
import QtQuick 2.0 // I must have Qt 5 or later
import QtDesktop 1.0 // I search an extension which compile with Qt 5.1 
```

我今天早上刚刚安装了**Qt 5.1.alpha**，我想安装支持**QtDesktop 1.0**的“Qt-desktop-components”兼容版本。我的**QtCreator 版本是 2.7.0**。我试图安装这个版本的[qtdesktopcomponent](http://qt.gitorious.org/qt/qtquickcontrols)但是当我编译时：

```
 `qmake && nmake install` 
```

我收到此错误：（此命令用于 Visual Studio 命令提示符（2010））

```
C:\Users\Luciole\Downloads\desktop-component\qtquickcontrols>qmake && nmake

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.exe" -
f Makefile.Debug

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -DUNIC
ODE -DWIN32 -DQT_NO_EXCEPTIONS -DQT_GUI_LIB -DQT_CORE_LIB -I"." -I"C:\Users\Luci
ole\Downloads\qt-everywhere-opensource-src-5.1.0-alpha\qtbase\include" -I"C:\Use
rs\Luciole\Downloads\qt-everywhere-opensource-src-5.1.0-alpha\qtbase\include\QtG
ui" -I"C:\Users\Luciole\Downloads\qt-everywhere-opensource-src-5.1.0-alpha\qtbas
e\include\QtCore" -I".moc\debug_shared" -I"C:\Users\Luciole\Downloads\qt-everywh
ere-opensource-src-5.1.0-alpha\qtbase\mkspecs\win32-msvc2010" -Fo.obj\debug_shar
ed\ @C:\Users\Luciole\AppData\Local\Temp\nm54D2.tmp
main.cpp
tools\qmlwidget\main.cpp(43) : fatal error C1083: Cannot open include file: 'QtQ
ml': No such file or directory
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\nmake.exe"' : return code '0x2'
Stop. 
```

我的**PATH**值是：

```
C:\Users\Luciole\Downloads\qt-everywhere-opensource-src-5.1.0-alpha\qtbase\qmake;C:\Users\Luciole\Downloads\qt-everywhere-opensource-src-5.1.0-alpha\qtbase\bin;C:\Qt\qtcreator 2.7.0\bin;C:\Git\cmd;C:\Python27;C:\Ruby200;C:\Perl64\site\bin;C:\Perl64\bin; 
```

**而且我已经验证：我的Qt.5.1.alpha**安装中没有“ **QtQml.h** ” 。你怎么看待这件事？你能帮我解决这个错误，或者你能告诉我使用哪个版本的 Qt 和 qtdesktopcomponent 吗？（请提供存储库的链接）

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:15:52.243

请参考[此链接](http://qt-project.org/wiki/New-Features-in-Qt-5.1)，您不必安装 Qt Desktop，它已包含在软件包中。名称已更改`Qt Desktop Components`为`Qt Quick Controls`

**编辑：** 文档快照可以从[这里找到](http://doc-snapshot.qt-project.org/qt5-stable/qtquickcontrols/qtquickcontrols-index.html)**

# methods - 使用函数名作为参数

> ID：15902930
> 
> 赞同：2
> 
> 时间：2013-04-09T13:13:45.070
> 
> 标签：methods, types, struct, go, first-class-functions

在 Go 中，您可以将函数作为参数传递，例如`callFunction(fn func)`. 例如：

```
package main

import "fmt"

func example() {
    fmt.Println("hello from example")
}

func callFunction(fn func) {
    fn()
}    

func main() {
    callFunction(example)
} 
```

但是当它是结构的成员时可以调用函数吗？以下代码将失败，但为您提供了我正在谈论的示例：

```
package main

import "fmt"

type Example struct {
    x int
    y int
}

var example Example

func (e Example) StructFunction() {
    fmt.Println("hello from example")
}

func callFunction(fn func) {
    fn()
}    

func main() {
    callFunction(example.StructFunction)
} 
```

（我知道我在那个例子中试图做的有点奇怪。我遇到的确切问题并没有很好地缩小到一个简单的例子，但这是我问题的本质。但是我也很感兴趣这是从学术角度来看的）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T13:21:34.840

方法（不是*“结构的成员”，*而是任何命名类型的方法，不仅是结构）是第一类值。Go 1.0.3 尚未实现方法值，但提示版本（如即将到来的 Go 1.1 中）支持[方法值](http://tip.golang.org/ref/spec#Method_values)。在这里引用完整的部分：

> **方法值**
> 
> 如果表达式`x`具有静态类型`T`并且`M`在 type 的方法集中`T`，`x.M`则称为方法值。方法值`x.M`是一个函数值，可以使用与 的方法调用相同的参数进行调用`x.M`。表达式`x`在方法值的求值过程中求值并保存；然后将保存的副本用作任何调用中的接收者，这可能会在以后执行。
> 
> 该类型`T`可以是接口或非接口类型。
> 
> 正如上面对方法表达式的讨论，考虑一个结构类型，它`T`有两个方法，`Mv`，其接收者是类型`T`，和`Mp`，其接收者是类型`*T`。
> 
> ```
> type T struct {
>     a int
> }
> 
> func (tv  T) Mv(a int) int         { return 0 }  // value receiver
> func (tp *T) Mp(f float32) float32 { return 1 }  // pointer receiver
> 
> var t T
> var pt *T
> func makeT() T 
> ```
> 
> 表达方式
> 
> ```
> t.Mv 
> ```
> 
> 产生类型的函数值
> 
> ```
> func(int) int 
> ```
> 
> 这两个调用是等价的：
> 
> ```
> t.Mv(7)
> f := t.Mv; f(7) 
> ```
> 
> 同样，表达式
> 
> ```
> pt.Mp 
> ```
> 
> 产生类型的函数值
> 
> ```
> func(float32) float32 
> ```
> 
> 与选择器一样，使用指针对具有值接收器的非接口方法的引用将自动取消引用该指针：`pt.Mv`等价于`(*pt).Mv`.
> 
> 与方法调用一样，使用可寻址值的指针接收器对非接口方法的引用将自动获取该值的地址：`t.Mv`等效于`(&t).Mv`.
> 
> ```
> f := t.Mv; f(7)   // like t.Mv(7)
> f := pt.Mp; f(7)  // like pt.Mp(7)
> f := pt.Mv; f(7)  // like (*pt).Mv(7)
> f := t.Mp; f(7)   // like (&t).Mp(7)
> f := makeT().Mp   // invalid: result of makeT() is not addressable 
> ```
> 
> 尽管上面的示例使用了非接口类型，但从接口类型的值创建方法值也是合法的。
> 
> ```
> var i interface { M(int) } = myVal
> f := i.M; f(7)  // like i.M(7) 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T05:57:50.817

Go 1.0 不支持使用绑定方法作为函数值。Go 1.1 将支持它，但在那之前你可以通过闭包获得类似的行为。例如：

```
func main() {
    callFunction(func() { example.StructFunction() })
} 
```

这不是很方便，因为您最终会复制函数原型，但应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:23:22.373

我修复了你的编译错误。

```
package main

import "fmt"

type Example struct {
    x, y float64
}

var example Example

func (e Example) StructFunction() {
    fmt.Println("hello from example")
}

func callFunction(fn func()) {
    fn()
}

func main() {
    callFunction(example.StructFunction)
} 
```

输出：

```
hello from example 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T09:03:53.843

添加到@zzzz 很好的答案（以及在[https://golang.org/ref/spec#Method_values](https://golang.org/ref/spec#Method_values)给出的答案）这里是一个从接口类型的值创建方法值的示例。

```
package main

import "fmt"

type T struct{}

func (T) M(i int) { fmt.Println(i) }

func main() {
    myVal := T{}
    var i interface{ M(int) } = myVal
    f := i.M
    f(7) // like i.M(7)
} 
```

# html - 如果使用外部样式表，是否需要更改标签 ID 属性？

> ID：15902933
> 
> 赞同：0
> 
> 时间：2013-04-09T13:13:49.983
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:18:54.620

你的问题在于你的定义。在您的 HTML 中，您使用的是 ID`#KitchenOverlay`

您的 CSS 正在使用`.KitchenOverlay`哪个目标类。

**你有两个选择：**

在您的 CSS 中更改`.KitchenOverlay`为。`#KitchenOverlay`

**或者**

改变...

`<div id="KitchenOverlay" style="height: 310px; width: 267px;">`

到...

```
<div class="KitchenOverlay" style="height: 310px; width: 267px;"> 
```

***编辑您的回复：***

尝试将#closePopup 更改为一个类。所以`class="closePopup"`在**HTML**

然后在**CSS**中像这样定位你的标签......

```
#KitchenOverlay .closePopup {
***STYLES***
} 
```

**编辑：**

```
#closePopup 
{
position: absolute !important; 
top: 40px !important; 
left: 20px !important; 
width: 83px !important; 
height: 83px !important; 
background-color: transparent !important; 
border: 1px solid yellow !important; 
} 
```

# java - currentStyle的意义是什么

> ID：15902935
> 
> 赞同：4
> 
> 时间：2013-04-09T13:13:51.480
> 
> 标签：java, javascript, css, jakarta-ee, aem

你能告诉我`CQ5`，确切的用途`currentStyle`。

我有一条线

`int absParent = currentStyle.get("absParent", 3);`

我可以知道 currentStyle 将在这里做什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:59:53.027

[Style](https://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/com/day/cq/wcm/api/designer/Style.html)类的`currentStyle`一个实例包含反映单元格设计方面的属性。

在设计模式下对组件属性的任何更改都会保存在`/etc/designs/<<your project design>>`（如果该`cq:design`属性可用于页面或其任何父级）或`/etc/designs/default`（默认设计）下，这与在普通对话框中创建的属性不同，其中如果值存储在同一页面下。

因此，`currentStyle.get()`, 功能类似于`properties.get()`它扩展[ValueMap](https://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/org/apache/sling/api/resource/ValueMap.html)，只是它为您提供存储在设计中的值而不是内容。

文档中没有太多与此相关的信息。但是，您可以查看[Designer](https://docs.adobe.com/docs/en/aem/6-0/develop/components.html#Logo%20Component)以进一步了解它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T16:40:25.577

简单来说，currentStyle.get() 用于从 design_dialog 获取数据，properties.get() 用于从对话框获取数据。

注意：design_dialog 中的数据对于模板来说是全局的，这意味着您可以通过使用 currentStyle.get() 来访问模板中的任何位置，而无需 setAttribute()，在对话框中，数据本地存储在页面属性。

# mysql - Rails 3 - 突然挂起的迁移错误

> ID：15902940
> 
> 赞同：3
> 
> 时间：2013-04-09T13:14:03.987
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3

我突然遇到了一个奇怪的错误。当我尝试运行时，`rake spec`我收到：

```
You have 2 pending migrations:
  20130405105004 CreateReports
  20130405113839 AddDocumentToReports 
```

我不知道原因（我过去运行迁移，所以我在数据库和 schema.rb 中有数据）。

这里是`rake spec --trace`：

```
** Invoke spec (first_time)
** Invoke test:prepare (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
You have 2 pending migrations:
  20130405105004 CreateReports
  20130405113839 AddDocumentToReports
Run "rake db:migrate" to update your database then try again. 
```

这里是`rake db:migrate:status`：

```
 ...
   up     20121210112419  Create simple captcha data
   up     20130214110545  Add weeknum to alerts
  down    20130405105004  Create reports
  down    20130405113839  Add document to reports
   up     20121018133601  *** NO FILE ***
   up     20121018163051  *** NO FILE ***
   up     20121024124111  *** NO FILE *** 
```

这是`rake db:migrate`

```
==  CreateReports: migrating ==================================================
-- create_table(:reports)
rake aborted!
An error has occurred, all later migrations canceled:

Mysql2::Error: Table 'reports' already exists: CREATE TABLE `reports` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `ready_status` tinyint(1) DEFAULT 0, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB

Tasks: TOP => db:migrate 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T14:07:36.483

如果这是在开发环境中并且数据库中没有重要数据，则运行

```
bundle exec rake db:migrate:reset 
```

这将重建架构，但代价是破坏所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T00:02:41.350

通过使用 Recks 答案和代码重建架构，我能够让一切正常工作

```
bundle exec rake db:migrate:reset 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T23:48:23.367

有一个使用`schema_migrations`您的 postgres 数据库创建的表，您可以通过删除该表 ( `drop table schema_migrations;`) 来重置迁移状态。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-26T14:47:37.843

**我对* No File ***有类似的问题。我做了一个 rake db:migrate:status 并发现 rake 正在寻找一些我保存在 migrate 文件夹下的另一个文件夹中的旧迁移。所以，我删除了旧的迁移和 schema.rb。然后我做了 rake db:drop、rake db:create 和 rake db:migrate。这解决了问题。

# database-design - 用于异步 BI 的标签驱动数据库

> ID：15902945
> 
> 赞同：0
> 
> 时间：2013-04-09T13:14:16.227
> 
> 标签：database-design, tags, nosql

我在为我正在设计的标签驱动软件的架构提出一个小问题。

我想要做的是将纯文本存储在数据库中，这对于所有者和其他实体来说是很喜欢的。纯文本充满了标签，就像 Twitter 的主题标签一样，应该是可搜索/可索引的。这可以在应用程序端完成，因此我将拥有大量需要为商业智能处理的小块数据。

没有人会准备好纯文本，它只是关于不需要一致并且可以异步运行的分析。

我知道 Twitter 使用多个数据库：用于推文的 Gizzard 和 Cassandra 以及用于关系的 FlockDb。

我不想使用混合来完成关系，我也不想建立下一个社交网络。我需要做的是分析与其他实体相关的所有标签。

如何解决哈希标签问题，或者如何处理文本以使其工作？

我真的在寻找一个不错的解决方案，而不仅仅是任何解决方案。我真的知道如何为 SQL 创建模式。

感谢您帮助我度过了那个数据库丛林。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:11:42.653

这是在数据库中表示标签的一种相当标准的方法：

![在此处输入图像描述](https://i.stack.imgur.com/YsP0r.png)

应用程序解析 RAW_TEXT，为每个识别的标签检查它是否已经在 TAG 中，如果不是，则将其插入那里。然后它只是通过插入 TAG_POST 将帖子与从中提取的标签连接起来。

请注意 TAG_POST 的复合主键中的字段顺序 - 将 TAG_ID 置于前沿有助于有效搜索给定标签的帖子。如果您想获取给定帖子的标签，请翻转顺序。如果两者都需要，请以与 PK 相反的顺序创建复合索引。

如果您的 DBMS 支持[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，那么 TAG_POST 将是一个不错的选择。

* * *

如果您的 DBMS 支持前沿索引压缩 (Oracle)，请考虑简单地执行以下操作：

![在此处输入图像描述](https://i.stack.imgur.com/0ui43.png)

压缩索引将有效地存储相同 TAG_NAME 的许多重复，因此无需为了节省空间而将其“外包”到另一个表。

# python - 在 python 中使用带有 ctypes 的 C 数据类型

> ID：15902950
> 
> 赞同：0
> 
> 时间：2013-04-09T13:14:29.247
> 
> 标签：python, ctypes

我尝试在 python 3.3 中使用 C char 指针数据类型。我使用了以下代码：

```
 from ctypes import *

    firstname = c_char_p("I am a noob programmer".encode("utf-8"))
    print(firstname.value) 
```

我想要的输出是

```
 I am a noob programmer 
```

但我得到的是

```
 b'I am a noob programmer' 
```

我正在关注为 python 2.6 制作的教程。我使用“ascii”作为编码函数的参数。并且还尝试了“bytes()”而不是编码。但在任何时候都没有区别。为什么我没有得到我想要的输出？以及如何获得所需的输出。

请任何人帮助我理解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:32:39.887

在 Python 3 中，`str`如果您希望它表现得像`str`.

```
print(firstname.value.decode("utf-8")) 
```

# asp.net - 如何重命名datagridView列

> ID：15902955
> 
> 赞同：0
> 
> 时间：2013-04-09T13:14:46.230
> 
> 标签：asp.net

我有类似这样的 sql 查询：`Select Sum(value) from Database.table`。我将它发布到 asp.net web 表单中的一些 gridView 中。

```
<asp:gridview id="foo" runat="server" autogeneratecolumns="false">
    <columns>
        <asp:boundfield datafield="ID" headertext="Identifier" />
    </columns> 
</asp:gridview> 
```

这个`Sum(VALUE)`没有，`datafield`或者我不知道这是什么。如何改变 `HeaderText of SUM(value) column`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:03:38.523

你需要使用 an`ALIAS`然后在你的内部使用它`DataField`

```
Select Sum(value) AS SumOfValue from Database.table 
```

然后

```
<columns>
    <asp:boundfield datafield="SumOfValue" headertext="Identifier" />  // use the alias name here
</columns> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:41:44.933

```
Select Sum(value) As ColumnName from Database.table 
```

将 ColumnName 替换为您想为该列指定的任何名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:18:56.823

您应该使用 Select Sum(value) AS SomeColumnName 并将其用作您的数据字段。

# php - 具有多个变量的干净 URL

> ID：15902967
> 
> 赞同：1
> 
> 时间：2013-04-09T13:15:03.997
> 
> 标签：php, apache, .htaccess, mod-rewrite

我计划收到一些网址。我将使用什么 mod 重写规则对传入的 url 进行以下转换：

```
http://domain.com/i/ => 
http://domain.com/index.php

http://domain.com/i/b/233223/c/23333 => 
http://domain.com/index.php?b=233223&c=23333

http://domain.com/i/dd/9844kjhf/fj/djP756/ee/kjhKJH => 
http://domain.com/index.php?dd=9844kjhf&fj=djP756&ee=kjhKJH

http://domain.com/r/ => 
http://domain.com/restore.php

http://domain.com/w/place/chicago =>
http://domain.com/withold.php?place=chicago

http://domain.com/w/ =>
http://domain.com/withold.php 
```

基本上，域之后的第一部分对应于一个页面，其余部分是一组要传递的任意数量的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:26:50.210

尝试：

```
# If the URI is just /i/, rewrite to index.php
RewriteRule ^i/?$ /index.php [L]

# If the URI is /i/ plus some paths, rewrite the paths into query string and let rewrite engine loop
RewriteRule ^i/([^/]+)/([^/]+)(/?.*)$ /i$3?$1=$2 [L,QSA] 
```

[这将采用与内部递归限制](http://httpd.apache.org/docs/2.2/mod/core.html#limitinternalrecursion)设置的一样多的路径节点，默认情况下为 10。这意味着默认情况下，您最多可以拥有 9 组参数，除非您超出此限制。所以：

```
http://example.com/i/a/1/b/2/c/3/d/4/e/5/f/6/g/7/h/8/j/9 
```

将首先匹配第二条规则，并继续循环：

```
1\. /i/b/2/c/3/d/4/e/5/f/6/g/7/h/8/j/9?a=1
2\. /i/c/3/d/4/e/5/f/6/g/7/h/8/j/9?b=2&a=1
3\. /i/d/4/e/5/f/6/g/7/h/8/j/9?c=3&b=2&a=1
4\. /i/e/5/f/6/g/7/h/8/j/9?d=4&c=3&b=2&a=1
etc. 
```

直到最后你只剩下

```
/i?j=9&h=8&g=7&f=6&e=5&d=4&c=3&b=2&a=1 
```

并且第一条规则得到应用，你最终应该得到：

```
/index.php?j=9&h=8&g=7&f=6&e=5&d=4&c=3&b=2&a=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:05:27.063

由于您的 URL 中可以有无限数量的参数，因此最好在您的应用程序中创建一个脚本来解析它们。

您可以使用 .htaccess 将所有传入请求定向到路由文件（例如 index.php ）

```
Options -MultiViews
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

然后运行[​​PHP explode()](http://php.net/manual/en/function.explode.php)之类的东西来解析 URL

# html - 右侧白块（html外）

> ID：15902974
> 
> 赞同：0
> 
> 时间：2013-04-09T13:15:30.383
> 
> 标签：html, css

我有一个问题，在我的页面上的 html 之外出现了一个白色块。没有内容，萤火虫报告它在 html 标记之外。

我想问题应该是图像太宽或填充超过 100%，但到目前为止我找不到任何东西。也许有人有想法。

我指的页面是：[**www.sailbook.org**](https://www.sailbook.org/app/registration/register.mvc)

**编辑：** 我发现，它必须是一个 Javascript 问题，因为禁用 Java Script 会消除错误。问题是：如果没有 Javascript，网站的效果只有一半。并且实现了很多脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:23:30.913

好吧，我可以告诉您，这是由于相对定位，因为当您使用上/左/下/右值时，仍会考虑[元素最初占用的空间](http://www.w3.org/TR/CSS2/visuren.html#relative-positioning)，并保留在文档流中。

问题是`#controlmenu {position: relative; left: 50%;}`，如果你删除左边的值，你会注意到空白消失了..虽然我不确定这会如何影响你的布局..

# c# - 将高度图转换为网格以在 XNA for WP7 中进行渲染

> ID：15902979
> 
> 赞同：0
> 
> 时间：2013-04-09T13:15:44.463
> 
> 标签：c#, windows-phone-7, image-processing, xna, heightmap

我相信你们中的大多数人都知道 WP7 不支持自定义着色器文件，除非我遗漏了一些东西，这意味着我不能像在 Windows 上那样从顶点和索引数据中绘制任何东西，我需要使用从其他数据类型中加载或解析的模型。

我正在寻找的是一种获取模型变量和高度图位图（可能作为 Texture2D 加载）并根据灰度值为每个像素创建一个顶点的方法，从一个函数构造函数变量。

以下是我在游戏中绘制模型的函数供参考：

```
protected void DrawMesh(Model myMesh, Vector3 meshPos, float meshRot)
{
    // Copy any parent transforms
    Matrix[] transforms = new Matrix[myMesh.Bones.Count];
    myMesh.CopyAbsoluteBoneTransformsTo(transforms);

    // Draw the model. A model can have multiple meshes, so loop.
    foreach (ModelMesh mesh in myMesh.Meshes)
    {
        // This is where the mesh orientation is set, as well 
        // as our camera and projection.
        foreach (BasicEffect effect in mesh.Effects)
        {
            effect.EnableDefaultLighting();
            effect.View = camera.View;
            effect.World = transforms[mesh.ParentBone.Index] * Matrix.CreateRotationY(MathHelper.ToRadians(meshRot)) * Matrix.CreateTranslation(meshPos);
            effect.Projection = camera.Projection;
        }
        // Draw the mesh, using the effects set above.
        mesh.Draw();

    }
} 
```

有谁知道我怎么能相当简单地做到这一点？在我理解这个过程之前，我不想让多个文件过于复杂。

谢谢！

-瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:26:30.587

首先，缺少自定义着色器并不意味着您不能使用原始顶点/索引进行绘制。事实上你可以在 WP7 上。这意味着您无法控制原始像素输出（像素着色器），或编写代码来更改每个单独顶点的投影映射到屏幕（顶点着色器）。在整个管道的各个阶段也有其他类型的着色器，但它们都与告诉显卡使用哪些顶点和索引无关。您自己在游戏代码中执行此操作。事实上，它们（或者更确切地说，从它们中获取的数据）被用作着色器的*输入*（除其他外）。

也就是说，您仍然可以在游戏代码中自己生成顶点。如果您愿意，甚至可以在一定程度上操纵它们。即使在 WP7 上，也不需要任何着色器来生成顶点和索引并绘制它们。不要`Model`用于此；这是矫枉过正。

您可以使用`GetData`纹理来获取其颜色值，并根据每个像素的颜色值简单地生成一个顶点数组（`VertexPositionColor`，或纹理，或您希望的任何其他格式）。有一个教程列出了您需要在[这里](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Terrain_from_file.php)做的所有事情。除了效果参数外，几乎所有的东西都可以在 WP7 上按原样工作；将它们映射到 a`BasicEffect`等。其中没有自定义着色器。

后记：您应该阅读 3D 图形的基础知识，了解着色器的作用与顶点的用途，以及整个管道，以获得更好的理解。那里有很多好的文章、博客和书籍。

# python - Django 内容保留字？

> ID：15902985
> 
> 赞同：0
> 
> 时间：2013-04-09T13:15:50.593
> 
> 标签：python, django

尝试导入我的模型时出现此错误...

```
from pages.models import Content
ImportError: cannot import name Content 
```

之所以奇怪，是因为百分百存在！！！！我已经做过很多次了。名称“内容”是否有问题，它是保留字？

内容在我的模型中，我的模型在 pages.models 中是 100 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:40:50.883

您有循环依赖导入。在`pages.models`文件中您尝试导入`shorturl.models.Link`，但同时在`shorturl.models`您尝试`Content`从`pages.models`.

# python - 无法格式化的对象错误

> ID：15902986
> 
> 赞同：0
> 
> 时间：2013-04-09T13:15:52.940
> 
> 标签：python, python-2.7, scrapy

这是我的代码：

```
from scrapy import * 
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector 
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class lala(CrawlSpider):
    name="lala"
    start_url=["http://www.lala.net/"]       
    rule = [Rule(SgmlLinkExtractor(), follow=True, callback='self.parse')] 

    def __init__(self):
        super(lala, self).__init__(self)    
        print "\nworking\n"

    def parse(self,response):        
        print "\n\n Middle \n"  

print "\nend\n" 
```

问题是：

```
UNFORMATTABLE OBJECT WRITTEN TO LOG with fmt '[%(system)s] %(text)s\n', MESSAGE LOST
2013-04-09 13:48:25+0100 UNFORMATTABLE OBJECT WRITTEN TO LOG with fmt '[%(system)s] %(text)s\n', MESSAGE LOST
2013-04-09 13:48:25+0100 UNFORMATTABLE OBJECT WRITTEN TO LOG with fmt '[%(system)s] %(text)s\n', MESSAGE LOST
2013-04-09 13:48:25+0100 UNFORMATTABLE OBJECT WRITTEN TO LOG with fmt '[%(system)s] %(text)s\n', MESSAGE LOST
2013-04-09 13:48:25+0100 UNFORMATTABLE OBJECT WRITTEN TO LOG with fmt '[%(system)s] %(text)s\n', MESSAGE LOST 
```

请注意，在这种情况下，两者都会`end`被`working`打印出来。

如果我删除了 init，则没有错误，但由于未打印中间 msg，因此未调用解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:20:01.017

调用继承的方法*时*不需要传入：`self``__init__()``super()`

```
def __init__(self):
    super(lala, self).__init__() 
```

查看[文档中列出的示例](http://doc.scrapy.org/en/latest/topics/spiders.html#crawlspider-example)，应该调用该属性`rules`，而不是`rule`：

```
class lala(CrawlSpider):
    name="lala"
    start_url=["http://www.lala.net/"]       
    rules = [
        Rule(SgmlLinkExtractor(), follow=True, callback='self.parse')
    ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:39:55.320

scrapy 文档[明确警告不要使用 CrawlSpider 并覆盖 parse 方法](https://scrapy.readthedocs.org/en/latest/topics/spiders.html?highlight=crawlspider#crawlspider)。

尝试将您的`parse`方法重命名为类似的名称`parse_item`，然后重试。

# xslt - 将 xsl:template 应用到所有元素而不是一半

> ID：15902991
> 
> 赞同：1
> 
> 时间：2013-04-09T13:16:01.817
> 
> 标签：xslt

我有一个 XSL 模板，它将 XML 文档处理成 Gherkin 中的测试。对于我正在生成的 XML 和 Gherkin 行中的每个元素，例如

```
And I fill in the "check-temp" field with "23" 
```

这很好，但我只想为 的前 20 个实例生成这一行，然后做一些其他输出，然后从我离开的地方继续。像这样，使用虚构的语法：

```
<xsl:for-each select="formline" [0..20]> 
...other stuff...
<xsl:for-each select="formline" [21..40]> 
```

与此相关，XSL 能否“知道”找到多少匹配项？

已解决：感谢您的贡献。这是我所做的：

```
# Fill in first 'half' of form 
<xsl:for-each select="formline[not(position() > 20)]">                           
<xsl:for-each select="formentrycontext">And I fill in "<xsl:value-of select="formentry/@id"/>" with "xxx"
</xsl:for-each>
</xsl:for-each>
# Check first 'half' of form 
<xsl:for-each select="formline[not(position() > 20)]">                           
<xsl:for-each select="formentrycontext">And the "<xsl:value-of select="formentry/@id"/>" field should contain "xxx"
</xsl:for-each>
</xsl:for-each>
# Fill in second 'half' of form 
<xsl:for-each select="formline[position() > 20 and not(position() > last())]">                           
<xsl:for-each select="formentrycontext">And I fill in "<xsl:value-of select="formentry/@id"/>" with "xxx"
</xsl:for-each>
</xsl:for-each>
# Check second 'half' of form 
<xsl:for-each select="formline[position() > 20 and not(position() > last())]">                           
<xsl:for-each select="formentrycontext">And I fill in "<xsl:value-of select="formentry/@id"/>" with "xxx"
</xsl:for-each>
</xsl:for-each> 
```

我没有使用应用模板，因为我想一次应用一个转换，然后再将另一个转换应用于相同的数据。也许有办法做到这一点，但到目前为止这对我来说非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:44:26.773

> 与此相关，XSL 能否“知道”找到多少匹配项？

**是的，使用以下[`count()`](http://www.w3.org/TR/xpath/#function-count)功能**：

```
 count(formline[not(position() > 20)]) 
```

**或者，在一个匹配的模板中`xsl:for-each`可以使用[`last()`](http://www.w3.org/TR/xpath/#function-last)函数**。

```
 <xsl:apply-templates select="formline[not(position() > 20)]"/> 
```

**并且在**

```
 <xsl:template match="formline">
   <xsl:value-of select="last()"/>
   <!-- Your processing here -->
 </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:45:19.007

这种方法可以为您工作：

```
<xsl:apply-templates select="formline[not(position() > 20)]"/>
...other stuff...
<xsl:apply-templates select="formline[position() > 20 and not(position() > 40)]"/> 
```

您需要将显示表单数据的代码放入这样的模板中

```
<xsl:template match="formline"> 
```

所以你只需要一个每次都会再次使用的。如果 XML 数据中的 formline 元素不与其他元素混合以便可以使用它们的位置，这将起作用。
编辑：我更喜欢使用 ">" 和 "not( > )" 而不是 ">" 和 "& lt;" 甚至“>” 和“<” 但这只是时尚。编辑：根据迈克尔凯的评论更正（谢谢，我不知道）

# json - 用 mod_proxy_html 替换 json 编码的 URL

> ID：15902992
> 
> 赞同：3
> 
> 时间：2013-04-09T13:16:02.297
> 
> 标签：json, reverse-proxy, mod-proxy-html

我目前已经安装了反向代理。一个阿帕奇正在做这项工作。所以我配置了 mod_proxy 来适应 url。我还使用 mod_proxy_html 来适应 HTML 和 JavaScript 链接。现在我遇到了一个 ajax 调用的问题，它返回一个 json 编码的 url。

有没有办法用 mod_proxy_html 做到这一点？有没有人建议如何调整这些网址？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:55:50.620

我找到了另一种替换 json-links 的方法：

我使用了 apache 模块**mod_substitute**。如果您将*application/json*声明为 OutputFilter，则 Proxy 将替换链接。mod_substitute 的语法类似于 unix-/linux-command **sed**的语法。

一个小例子：

`AddOutputFilterByType SUBSTITUTE application/json Substitute "s|zuersetzen|ersetzt|n"`

参考以下链接： [http ://httpd.apache.org/docs/2.4/mod/mod_substitute.html](http://httpd.apache.org/docs/2.4/mod/mod_substitute.html)

# winapi - MessageBox & WM_TIMER (Win2k 之后)

> ID：15902996
> 
> 赞同：2
> 
> 时间：2013-04-09T13:16:13.497
> 
> 标签：winapi

这里大家都知道，从WinXP到user32.dll都出现了MessageBoxTimeout API。

但现在不是使用未记录的 MessageBoxTimeout，而是使用已记录的 MessageBox：

所以这是一个巧合，在 WinXP 中对于任何 MessageBox - PostMessage (WM_TIMER, 0,0) 等同于 PostMessage (WM_CLOSE, 0,0)。

向内部人员提问 MS：这是一个错误还是一个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:02:03.503

这不是巧合。事实证明，这是通过传递超时值的`MessageBox`调用实现的。使用调试器来辨别这是微不足道的。事实证明，对话框通过关闭对话框来响应消息。这就是实现超时的方式。`MessageBoxTimeout``0xFFFFFFFF``MessageBoxTimeout``WM_TIMER``MessageBoxTimeout`

因此，如果您将`WM_TIMER`消息发布到对话框，您实际上是在将`MessageBox`其发布到`MessageBoxTimeout`对话框，因此您确实会关闭它。

这当然不是一个错误，因为`MessageBox`它根本没有承诺它将如何响应接收到的`WM_TIMER`消息。它不是一个特性，因为它没有记录。这只是当前实现的一个奇怪的副作用`MessageBox`。

当然，所有这些都是实现细节，可能会发生变化等。

# java - 如何找到以确切单词开头的字符串

> ID：15902998
> 
> 赞同：0
> 
> 时间：2013-04-09T13:16:22.787
> 
> 标签：java, string, apache-commons-config

我在 gwt 上有一个带有 GUI 的应用程序。使用这个 gui 我想更改（这是子问题：更改 .properties 文件如何更好（我知道如何使用 .properties 从它们读取属性`org.apache.commons.configuration`，但不知道如何编辑（作为字符串或如何...))) .properties 文件。例如：我编写了以下 .properties 文件：

```
################################################################################
# User permissions                                                             #
################################################################################

users = admin, root, guest
users.admin.keywords = admin
users.admin.regexps = test-5, test-7

users.root.keywords = root
users.root.regexps = *

users.guest.keywords = guest
users.guest.regexps = * 
```

那么，例如，如何`keywords`为管理员添加？

**UPD：** 这是我要更改配置文件的配置类：

```
 public class Config {

    private static final Config ourInstance = new Config();
    private static final CompositeConfiguration prop = new CompositeConfiguration();

    public static Config getInstance() {
        return ourInstance;
    }

    public Config(){
    }

    public synchronized void load() {
        try {
            prop.addConfiguration(new SystemConfiguration());

            System.out.println("Loading /rules.properties");
            final PropertiesConfiguration p = new PropertiesConfiguration();
            p.setPath("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
            p.load();
            prop.addConfiguration(p);

        } catch (ConfigurationException e) {
            e.printStackTrace();
        }

        final int processors = prop.getInt("server.processors", 1);

        // If you don't see this line - likely config name is wrong
        System.out.println("Using processors:" + processors);
    }

    public void setKeyword(String customerId, String keyword){
        prop.setProperty("users." + customerId + ".keywords", prop.getProperty("users." + customerId + ".keywords") + ", " + keyword);
        prop.
    }

    public void setRegexp(String customerId, String regexp)
    {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:39:13.847

加载道具

```
void getPropertiesFromFile( Properties props, String fileName )
{
    try {
        File file = new File( fileName ) ;
        if (!file.exists())
            return ;

        FileInputStream in = new FileInputStream( file ) ;

        try {
            props.load( in ) ;
        } finally {
            in.close() ;
        }
    } catch (Exception e) {
    }
} 
```

注意：也许，您不想从文件中加载它们，而是使用 classLoader.getResource(); 代码会略有变化。

然后，遍历名称并找到您需要的内容

```
for (String name : props.keys) {
   if (name.startWith("users.admin.")) {
       String value = props.get(name);
       ...
   }
} 
```

如果要在迭代期间修改 props，则应按如下方式包装 props.keys

```
for (String name : new HashSet(props.keys)) { 
```

完成后，将它们存储起来

```
 FileOutputStream fos = null;
    try {
        File file = new File("abc");
        fos = new FileOutputStream(file);
        props.store(fos, null);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (fos != null) {
            try {
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:19:47.150

尝试关注

```
Properties prop = new Properties();

        try {
            //set the properties value
            prop.setProperty("users.guest.keywords", "keyword");
            prop.setProperty("users.guest.regexps", "regexps");    
            prop.store(new FileOutputStream("config.properties"), null);

        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:21:08.127

回答你原来的问题。

```
boolean String.startsWith(<prefix>) 
```

# php - 如何在表单drupal 7中编辑图像字段

> ID：15902999
> 
> 赞同：0
> 
> 时间：2013-04-09T13:16:26.403
> 
> 标签：php, forms, drupal-7

我在上下文链接内容中创建了自定义表单。我创建了名为“block_contents”的模式，当用户单击此链接时，如果数据库中存在数据，它将编辑表单，否则它将创建一个新条目......![在这里，我附上了屏幕截图。](https://i.stack.imgur.com/yWLOT.png) 这是我的代码：

```
function custom_links_menu() {
    $menuItems = array();

    $menuItems['node/%node/block_contents'] = array(
        'title' => 'Block Content',
        'description' => 'Block Content',
        'page callback' => 'custom_links_form',
        'access arguments' => array('access content'),
        'type' => MENU_LOCAL_TASK,
        'context' => MENU_CONTEXT_PAGE | MENU_CONTEXT_INLINE
    );

    return $menuItems;
}

/*
 * implements hook_form()
 */
function custom_links_form() {
    return drupal_get_form(arg(2));
}

function block_contents($form_state) {
        $form['nid'] = array('#type' => 'hidden', '#value' => arg(1));
        $form['intro_title'] = array(
            '#type' => 'textfield',
            '#title' => 'Inro title : ',
        );
        $form['intro_image'] = array(
            '#type' => 'file',
            '#title' => t('Intro Image'),
            '#description' => t('Upload a file, allowed extensions: jpg, jpeg, png, gif'),
        );
        $form['intro_text'] = array(
            '#type' => 'textarea',
            '#title' => 'Intro Text : ',
        );
        $form['left_free_text_1'] = array(
            '#type' => 'textarea',
            '#title' => 'Left Free Text 1 : ',
        );
        $form['use_left_free_text'] = array(
            '#type' => 'checkbox',
            //'#default_value' => 1,
            '#title' => 'Use Left Free Text 1 : ',
        );

    $form['submit'] = array(
        '#type' => 'submit',
        '#value' => 'Submit',
    );
    $form['#attributes']['enctype'] = 'multipart/form-data';

    return $form;
}

/*
 * Implements hook_validate()
 */
function block_contents_validate($form, &$form_state) {
    $file = file_save_upload('intro_image', array(
        'file_validate_is_image' => array(),
        'file_validate_extensions' => array('png gif jpg jpeg'),
    ));

    if ($file) {
        if ($file = file_move($file, 'public://image/')) {
            $fileinfo = pathinfo($file->uri);
            $form_state['values']['intro_image'] = $fileinfo['basename']; //$file->filename;
        } else {
            form_set_error('intro_image', t('Failed to write the uploaded file the site\'s file folder.'));
        }
    } else {
        $form_state['values']['intro_image'] = null;
        //form_set_error('intro_image', t('No file was uploaded.'));
    }
}

/*
 * implements hook_submit()
 */
function block_contents_submit($form, &$form_state) {

        db_insert('block_contents')
        ->fields(array(
            'nid',
            'intro_title',
            'intro_image',
            'intro_text',
            'left_free_text_1',
            'use_left_free_text'
        ))
        ->values($form_state['values'])
        ->execute();
    } 

    drupal_set_message(t('Data saved !!'));
} 
```

现在我想编辑这个表单。如何在编辑时管理图像字段？它应该显示我在编辑表单时上传的图像。还有人可以建议我正确编辑这个表单吗？任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:21:58.283

您可以使用 managed_file 小部件而不是文件。这样你就可以摆脱 _validate 函数中的所有图像处理逻辑。如果设置，它还显示直接链接到图像，并允许您删除/替换它。

至于编辑表格，您需要加载数据，即。

```
$record = db_select('block_contents', 'bc')
->fields('bc')
->condition('nid', $nid)
->execute()
->fetch(); 
```

然后对于每个表单字段值，您可以将“#default_value”设置为加载的数据。