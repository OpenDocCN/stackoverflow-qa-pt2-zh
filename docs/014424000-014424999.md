# StackOverflow 问答 14424000-14424999

# sqlite - 使用具有“现在”值的日期时间字段在 SQLite（csv 文件）中导入数据

> ID：14424000
> 
> 赞同：1
> 
> 时间：2013-01-20T11:25:38.160
> 
> 标签：sqlite, datetime, csv

我正在尝试通过 csv 文件填充表格。我的字段之一是指定字段创建时间的日期时间，所以我想插入 datetime('now') 值...

您现在如何将此字段创建到 csv 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:51:19.333

这是不可能的。

SQLite 没有单独[的日期/时间数据类型](http://www.sqlite.org/datatype3.html#datetime)；日期字符串只是字符串。

此外，CSV 并没有真正的数据类型。所有字段都按原样读取，不以任何方式解释。

# android - 编辑文本值没有改变-Android eclipse

> ID：14424002
> 
> 赞同：0
> 
> 时间：2013-01-20T11:26:16.340
> 
> 标签：android, eclipse, android-edittext

所以，我想做的是，如果姓名或联系人字段为空，则要打印消息，否则提交。现在，问题是，对于第一次试验（两个字段都为空），它给了我“输入名称”。然后即使我再次输入名称，仍然一样。

你能帮我么..

这是代码...

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button sub=(Button) findViewById(R.id.submit);
    final EditText name=(EditText) findViewById(R.id.editText1);
    final EditText phone=(EditText) findViewById(R.id.editText2);

    final String cust_name=name.getText().toString();
    final String phone_num=phone. getText(). toString();

sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {  
            if(cust_name.length()==0)
                    Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();

            else if(phone_num.length()==0)
                Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();

            else
            {   
            Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
            finish();
            }
        }  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:29:42.200

您必须在按钮`getText()`的 中输入代码行。`onclicklistener`

它不起作用，因为您从 onCreate() 中的编辑文本中获取文本。`onCreate()`是活动开始时系统调用的回调。到它开始时，edittexts 不包含任何值。但是只有在edittexts中输入了一些值之后，只有你点击按钮才能得到这些值。因此，`getText()`应将代码行移到`onClick()`单击按钮时始终调用的代码行中。

```
sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) { 

 String cust_name=name.getText().toString();
     String phone_num=phone. getText(). toString();

            if(cust_name.length()==0)
                    Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();

            else if(phone_num.length()==0)
                Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();

            else
            {   
            Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
            finish();
            }
        }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T13:54:19.130

从您共享的代码来看，您的姓名和电话号码字符串将始终为空。因此，无论您向 EditText 框中添加什么内容，它们都不会被填充到 String 中，从而一次又一次地向您抛出相同的错误。

以下应该工作。

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button sub=(Button) findViewById(R.id.submit);
    final EditText name=(EditText) findViewById(R.id.editText1);
    final EditText phone=(EditText) findViewById(R.id.editText2);

    //final String cust_name=name.getText().toString(); **REMOVE**
    //final String phone_num=phone. getText(). toString(); **REMOVE**

sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {
            String cust_name=name.getText().toString();
            String phone_num=phone. getText(). toString();  
            if(cust_name.length()==0)
                    Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();

            else if(phone_num.length()==0)
                Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();

            else
            {   
            Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
            finish();
            }
        }  
}); 
```

这一次，当您按下提交按钮时，我们将获得此时 EditText 框中的**文本**。因此，如果您通过 UI 输入内容，它不会为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T09:47:35.377

它不起作用，因为您从 onCreate() 中的编辑文本中获取文本。onCreate() 在活动开始时由系统调用。那时编辑文本不包含任何值。但是只有在edittexts中输入了一些值之后，只有你点击按钮才能得到这些值。

移动

> name.getText().toString()

和

> 电话。获取文本（）。toString()

内部按钮单击以从中获取最新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:20:48.477

您必须将 edittext 变量声明为 public，以便可以在此类中的任何位置使用。

```
String cust_name,phone_num;
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
//your code for intialize another variable  
sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) { 
    if(cust_name.getText().toString().length()==0){
        //toast with error message
    }else if(phone_num.getText().toString().length()==0){
        //toast with error message
    }else{
        //you have to get fresh value           

    }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T11:41:41.283

使其成为嵌套类型条件，然后检查它是否可以正常工作

```
sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {  
            if(cust_name.equals(""))
              {
                if(phone_num.equals(""))
                   Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();}

                    Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();}    

            else
            {   
            Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
            finish();
            }
        }  
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T11:27:44.667

下面的代码行中的问题

```
oncreate(--) {
 ---
 --- 
   final String cust_name=name.getText().toString(); // here edittexts are empty hence string variables are empty too.
    final String phone_num=phone. getText(). toString();

} 
```

您在 oncreate() 方法中设置 cust_name 和 phone_num ，因此它们始终为空，无论您稍后键入什么......您的代码必须如下所示

```
super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            final Button sub=(Button) findViewById(R.id.submit);
            final EditText name=(EditText) findViewById(R.id.editText1);
            final EditText phone=(EditText) findViewById(R.id.editText2);

        sub.setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) {  
                       String cust_name=name.getText().toString();
                    String phone_num=phone. getText(). toString();
                    if(cust_name.length()==0)
                            Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();

                    else if(phone_num.length()==0)
                        Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();

                    else
                    {   
                    Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
                    finish();
                    }
                }  
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-26T06:15:32.617

只需使用`[TextViewName].getText().length()==0`而不是`[TextViewName].getText()==0`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-20T11:29:55.553

移动`name.getText().toString()`和`phone. getText(). toString()`内部按钮单击以从中获取最新值：

```
String cust_name,phone_num;
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
      // your code here
sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {  
       cust_name=name.getText().toString();
       phone_num=phone. getText(). toString();
       //..your code here 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-20T11:30:22.613

试试这个方法：

```
sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {  

           final String cust_name=name.getText().toString();
           final String phone_num=phone. getText(). toString();

            if(cust_name.length()==0)
                    Toast.makeText(MainActivity.this, "Name must be      provided!", Toast.LENGTH_SHORT).show();

            else if(phone_num.length()==0)
                Toast.makeText(MainActivity.this, "You must provide your phone number!", Toast.LENGTH_SHORT).show();

            else
            {   
            Toast.makeText(MainActivity.this, "Success!", Toast.LENGTH_SHORT).show();
            finish();
            }
        }  
}); 
```

# ios - 从回调函数保存音频缓冲区

> ID：14424005
> 
> 赞同：1
> 
> 时间：2013-01-20T11:26:31.243
> 
> 标签：ios, objective-c, c

在 iPhone 上的音频输入回调函数中，我得到了 1024 个样本缓冲区。我需要将它们保存大约 3 秒的输入声音。这意味着每个缓冲区是 23 毫秒，所以每秒或多或少 50 个缓冲区，所以我有这个数组：

```
int16_t buffersRing[200][1025]; 
```

每个回调都填充了数据：

```
static OSStatus recordingCallback(void *inRefCon,
                                  AudioUnitRenderActionFlags *ioActionFlags,
                                  const AudioTimeStamp *inTimeStamp,
                                  UInt32 inBusNumber,
                                  UInt32 inNumberFrames,
                                  AudioBufferList *ioData)
{

    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2; //* sizeof(SInt16) ?
    buffer.mData = NULL; 

    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;
    OSStatus status;
    status = AudioUnitRender(audioUnit,
                             ioActionFlags,
                             inTimeStamp,
                             inBusNumber,
                             inNumberFrames,
                             &bufferList);

    int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;

buffersRing[ringNum][0]=inNumberFrames;
         for( int k=1;k<inNumberFrames+1;k++)
             buffersRing[ringNum][k]=q[k-1]; 
```

我可以看到它以某种方式占用了很多内存。（数组），我认为填充它们的时间也太多了。我想知道是否有更好的方法来保存 3-4 秒的所有缓冲区，以便稍后处理它们。谢谢 。

# mysql - 在单独的表上创建三个表的视图及其 id 连接

> ID：14424006
> 
> 赞同：1
> 
> 时间：2013-01-20T11:26:35.290
> 
> 标签：mysql, sql, join

所以我有一些桌子。城市：

```
CI_ID | City
1     | Aberdeen
2     | Abingdon 
```

国家：

```
CO_ID | Country
1     | United States of America
2     | Australia 
```

省：

```
PR_ID | Province
1     | Alabama
2     | South Dakota 
```

城市_省

```
CI_ID | PR_ID
1     | 2
2     | NULL 
```

城市，国家

```
CI_ID | CO_ID
1     | 1
2     | 2 
```

通过创建我想要的视图

```
CI_ID | City     | Province     | Country
1     | Aberdeen | South Dakota | United States of America
2     | Abingdon | NULL         | Australia 
```

而且我无法弄清楚查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:30:10.103

`JOIN`五个表，但`LEFT JOIN`表`Province`是这样的：

**创建视图：**

```
CREATE VIEW AllData
AS
SELECT
  c.CI_ID, 
  c.city,
  p.Province,
  co.Country     
FROM City c
INNER JOIN City_Province cp ON c.CI_ID = cp.CI_ID
INNER JOIN City_Country cc ON cc.CI_ID = c.CI_ID
INNER JOIN Country co ON cc.CO_ID = co.CO_ID 
LEFT JOIN Province p ON p.PR_ID  = cp.PR_ID; 
```

然后，无论何时要从该视图中进行选择，都可以像普通表格一样从中进行选择：

```
SELECT * FROM AllData 
```

这会给你：

```
| CI_ID |     CITY |     PROVINCE |                  COUNTRY |
--------------------------------------------------------------
|     1 | Aberdeen | South Dakota | United States of America |
|     2 | Abingdon |       (null) |                Australia | 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b7f61/1)

了解更多信息：

*   [Mysql 参考：**13.1.12。创建视图语法**](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

*   [**^(从维基百科)**](http://en.wikipedia.org/wiki/Join_%28SQL%29)[**加入（SQL）**](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

*   [**SQL 连接的另一种可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# c++ - c++编译器如何知道类在哪里

> ID：14424010
> 
> 赞同：2
> 
> 时间：2013-01-20T11:27:13.000
> 
> 标签：c++, compilation

如果您定义了一个用于做某事的类，那么使用它所需要做的就是包含一个包含其方法原型的头文件（.h 文件），但您不必包含类文件本身（ .cpp 文件，其中包含类方法的实际实现），

这是否意味着 .cpp 文件必须具有与其头文件相同的名称，以便编译器匹配名称以定位 .cpp 文件？

或者

当编译器遇到函数（方法）调用时，它会转到头文件并查看它是否具有原型。然后它在其内置函数中搜索实现，如果没有找到它在当前目录中的所有 .cpp 文件中搜索？

还是两个假设都不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:40:12.853

文件名在 C++ 中是无关紧要的。*链接器*将所有部分放在一起。在编译一些 C++ 代码时，您需要知道的只是事物名称的含义。这就是*声明*和*类定义的目的：它们*引入名称，从而为编译器提供足够的信息来生成代码：

**文件 1.cpp：**

```
int f(int, bool);         // declaration

class Foo;                // class declaration

class Bar { int g(); };   // class definition (implies declaration)

int main()
{
    Foo * p;              // OK, Foo * is a complete type, since we know that
                          // "Foo" denotes a class

    // p->h();            // Error: We don't know what Foo actually is!

    Bar b;                // OK, we know how size and alignment for Bar

    int m = b.g();        // OK, we know what sort of function B::g() is

    int n = f(50, true);  // OK, we don't need to know what f does

    return m + n;
} 
```

编译上述代码时，它将包含和的*未解析符号*。只要*一个*（并且只有一个）其他翻译单元包含这些符号的*定义*，链接器就可以解析它们并且程序可以成功链接：`f``B::g`

 ****文件 2.cpp：**

```
int f(int n, bool b) { return b ? n * 2 : 50 - n; }

// include class definition here
int Bar::g() { return f(sizeof(Bar), sizeof(int) == sizeof(char)); } 
```

基本规则是，你可以*声明*一个函数或一个类，或者*定义一个类*a 任意多次，但你只能*定义*一个函数和一个类成员函数一次。有一个例外：如果您将类成员函数的函数声明为`inline`，那么您实际上可以重复*定义*它，前提是所有定义都相同。

这条规则的推论是，您可以安全地将所有函数声明和类定义放入头文件并重复包含它，只要您在一个翻译单元中只提供一次实际定义。（并且该`inline`规则允许您在类定义中包含实际的成员函数定义——与声明一起定义的成员函数是隐式的`inline`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:30:05.053

编译器只需要头文件。但是所有的 C++ 文件都需要编译，因此链接器可以生成最终的二进制文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T11:37:33.073

为了生成程序，编译器需要两者。通常，从 C++ 到二进制文件的编译分两步进行，首先将每个 CPP 文件（也称为翻译单元）转换为目标文件（主要包含机器代码，但也包含地址表）。然后，目标文件相互连接（链接）（需要地址表），形成最终的可执行文件。通常，在头文件中，您会说“有一个带有这些参数和这个返回值的函数”。在目标文件中，对该函数的调用被记录为对该函数的引用。最后，在链接时，这个引用被解析为必须由其他目标文件提供的函数的实际地址。**

# java - 从 Java 代码运行 Sox 命令

> ID：14424013
> 
> 赞同：1
> 
> 时间：2013-01-20T11:27:28.683
> 
> 标签：java, command, sox

我正在尝试从 java 代码运行 SoX 命令，但遇到了一些困难。已安装 SoX（SOund eXchange）软件，但我不想从命令提示符运行程序，而是想运行程序并通过我的 java 代码获得结果。我要运行的命令是：

```
Sox -m sounda.wav soundb.wav final.wav 
```

这是我用来测试的示例代码：

```
package soxcmd;
import java.io.IOException;

public class SoxCmd {
public static void main(String[] args) throws IOException {
    String path = "c:\\sox";
    String[] mystring = {path + "\\sox -m", path + "\\fdir\\sounda.wav", path + "\\fdir\\soundb.wav", path + "\\bdfiles\\final.wav"};
    Runtime.getRuntime().exec(mystring); 
} 
```

}

我会感谢你在这方面的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:55:45.673

我找到了解决这个问题的方法，灵感来自[http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java/](http://www.linglom.com/2007/06/06/how-to-run-command-line-or-execute-external-application-from-java/)

我使用“c:\sox\sox.exe”绝对调用 sox 我还使用了绝对路径，因为相对路径似乎不起作用，并且我像在命令行中一样发送了整个字符串。因此我有

```
Process pr;  
pr = rt.exec("c:\\sox\\sox.exe c:\\sox\\files\\filea.wav c:\\sox\\files\\fileb.wav c:\\sox\\files\\filec.wav");
BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream())); 
```

它现在正在工作。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T21:39:25.517

我围绕 sox 编写了一个小型包装应用程序。它在 Github 上免费提供。看，也许它会满足你的需求。该项目仍处于早期状态，但也许您会发现它很有用。

[GitHub 上可用的 soundeXchange 的 Java 包装器](https://github.com/corballis/sox-wrapper-java)

# android - Gps 当前位置问题

> ID：14424014
> 
> 赞同：-1
> 
> 时间：2013-01-20T11:27:35.313
> 
> 标签：android

我的 Gps 设置一开始是“关闭”的，我执行了这段代码，我可以得到 CurrentLocation 的纬度和经度。

但是一旦我以编程方式打开，设置就会改变，一切都很好。

当我再次执行时，它没有给我（提供者、位置参考），我不明白为什么会这样。

```
 public void getCurrentlocation()
{
    String providers = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
    Log.e("provider",providers);
    if(!providers.contains("gps")){
      final Intent poke = new Intent();
      poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
      poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
      poke.setData(Uri.parse("3")); 
      sendBroadcast(poke);
      Log.e("your gps is","enabled");
    }
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
       // Define the criteria how to select the locatioin provider -> use
       // default
       Criteria criteria = new Criteria();
       String provider = locationManager.getBestProvider(criteria,true);
       Location location = locationManager.getLastKnownLocation(provider);

       // Initialize the location fields
       if (location != null) 
       {
        System.out.println("Provider " + provider + " has been selected.");
              strLatitude=String.valueOf(location.getLatitude());
              strLongitude=String.valueOf(location.getLongitude());
              Log.e("lattitude",strLatitude);
              Log.e("logntitude",strLongitude);
       }
       else 
       {
              strLatitude=String.valueOf(0);
              strLongitude=String.valueOf(0);
              Log.e("lattitude",strLatitude);
              Log.e("logntitude",strLongitude);
       }

       Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);

       try {
  List<Address> addresses = geocoder.getFromLocation(Double.parseDouble(strLatitude), Double.parseDouble(strLongitude), 5);
 getAddress(Double.parseDouble(strLatitude), Double.parseDouble(strLongitude));
  if(addresses != null) {
   Address returnedAddress = addresses.get(0);
   StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
   for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
    strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
   }
   Log.e("address",strReturnedAddress.toString());
  }
  else{
   Log.e("not found","No Address returned!");
  }
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
  Log.e("cannot get address","Canont get Address!");
 }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:25:25.457

您正在寻找 lastKnownlocation，如果设备有任何 lastknownlocation（如果 GPS 已打开），它将为您提供，然后它将寻找新位置并且 lastKnownlocation 可能为空。

您应该实现 LocationListner。尝试使用这个：

公共类 GetLocationUpdate {

```
LocationManager locationManager;
LocationListener locationListner;
LinearLayout linearLayout;
TextView locLat, locLong, locInfo;
LocationProvider locationProvider;
private Context context;

/* public double mLattitude = 28.618527, mLongitude = 77.372642; */

public double mLattitude = 0.0, mLongitude = 0.0;
public static GetLocationUpdate getLocationUpdateInstance;

public static GetLocationUpdate getLocationUpdateInstance(Context context)
{
    getLocationUpdateInstance = new GetLocationUpdate(context);
    return getLocationUpdateInstance;
}

private GetLocationUpdate(Context context)
{
    this.context = context;

    locationManager = (LocationManager) context.getSystemService(context.LOCATION_SERVICE);

    locationListner = new MyLocationListner();
}

public static Criteria createCoarseCriteria()
{

    Criteria c = new Criteria();
    c.setAccuracy(Criteria.ACCURACY_COARSE);
    c.setAltitudeRequired(false);
    c.setBearingRequired(false);
    c.setSpeedRequired(false);
    c.setCostAllowed(true);
    c.setPowerRequirement(Criteria.POWER_HIGH);
    return c;

}

/** this criteria needs high accuracy, high power, and cost */
public static Criteria createFineCriteria()
{

    Criteria c = new Criteria();
    c.setAccuracy(Criteria.ACCURACY_FINE);
    c.setAltitudeRequired(false);
    c.setBearingRequired(false);
    c.setSpeedRequired(true);
    c.setCostAllowed(true);
    c.setPowerRequirement(Criteria.POWER_HIGH);
    return c;

}

public void startLocationListner()
{

    try
    {

        locationManager.requestLocationUpdates(

        LocationManager.GPS_PROVIDER, 1000, 0, locationListner);

        mLattitude = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLatitude();
        mLongitude = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLongitude();
    }
    catch (Exception e)
    {
        // e.printStackTrace();
    }

    try
    {
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 0, locationListner);
        if (mLattitude == 0.0 || mLongitude == 0.0)
        {
            mLattitude = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER).getLatitude();
            mLongitude = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER).getLongitude();
        }
    }
    catch (Exception e)
    {
        // e.printStackTrace();
    }

    Log.w("value : ",
            String.valueOf(mLattitude) + ":" + String.valueOf(mLongitude));

}

public void stopLocationListner()
{
    if (locationListner != null)
    {

        locationManager.removeUpdates(locationListner);
        locationListner = null;
    }
}

private class MyLocationListner implements LocationListener
{

    @Override
    public void onLocationChanged(Location location)
    {

        mLattitude = location.getLatitude();
        mLongitude = location.getLongitude();

        Log.w("value : ",
                String.valueOf(location.getLatitude()) + String.valueOf(location.getLongitude())
                        + 

        context.sendBroadcast(new Intent(Constants.BRDCAST_LOCATION_UPDATED));

    }

    @Override
    public void onProviderDisabled(String provider)
    {
        // Log.w("provider", provider);

    }

    @Override
    public void onProviderEnabled(String provider)
    {
        // Log.w("provider", provider);

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        // Log.w("status", String.valueOf(status));

    }

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:02:26.913

尝试这个。

```
Location getGPSLocation(Context context) {
    try {
        LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        Criteria cr = new Criteria();
        cr.setCostAllowed(true);
        cr.setAccuracy(Criteria.NO_REQUIREMENT);
        cr.setPowerRequirement(Criteria.NO_REQUIREMENT);
        String provider = lm.getBestProvider(cr, true);
        if(provider == null)
            provider = lm.getBestProvider(cr, false);
        return lm.getLastKnownLocation(provider);
    }
    catch(Exception e) {
        Log.e("NeartoMe", "Exception while fetch GPS at: " + e.getMessage());
    }
    return null;
} 
```

像这样调用上面的方法。如果在这里您得到空值，则意味着获取 gps 时出现问题，然后重定向以启用位置和安全设置中的“使用无线网络”。然后再次尝试获取 GPS。

```
Location location = new Helper().getGPSLocation(context);
if(location != null) {
    latitude = (int) (location.getLatitude() * 1E6);
    longitude = (int) (location.getLongitude() * 1E6);
} else {
    Builder alert = new Builder(context);
    alert.setTitle(R.string.app_name);
    alert.setMessage(context.getString(R.string.enable_use_wireless_network));
    alert.setPositiveButton(R.string.button_ok, new DialogInterface.OnClickListener() 
    {
        @Override
        public void onClick(DialogInterface dialog, int which)
        {
            dialog.dismiss();
            context.startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS));
        }
    });
    alert.show();
} 
```

# tcl - 如何从 solaris/linux 远程调试 TCL 代码？是否有任何 Eclipse 插件可以做到这一点？

> ID：14424015
> 
> 赞同：2
> 
> 时间：2013-01-20T11:27:37.233
> 
> 标签：tcl, remote-debugging

我试图远程调试为 solaris10 和 SuSE10 编写的 (i)TCL 代码。我尝试了主动 tcl 和远程包装方法。但是我无法调试 iTCL 部分。

有什么方法可以远程调试tcl代码吗？

# mysql - 在单个 mysql 查询中使用大约 50 个“和”运算符可以吗？

> ID：14424017
> 
> 赞同：0
> 
> 时间：2013-01-20T11:27:53.903
> 
> 标签：mysql, sql

不会严重影响性能吗？

或者有更好的方法来完成同样的事情吗？

提前谢谢...

**编辑** 它与存储大约 70 个汽车字段的表相关，我必须将用户的要求与汽车的可用性相匹配

和相对于“如果有更好的方法”的表现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:36:14.060

从对该问题的评论中：

> 它与存储大约 70 个汽车字段的表相关，我必须将用户的要求与汽车的可用性相匹配

有了这种结构，我看不到使用一堆`AND`运算符的合理替代方案。您可以根据主要标准对表进行分片，然后只查询相关表，但这会使其非规范化——这意味着所有不愉快（报告、修改、维护困难）。

直到/除非你看到一个真正的性能问题，我不会担心它。如果/当您这样做时，您将拥有用于比较其他方法的数据。

# matlab - 控制 Matlab 工作人员或实验室

> ID：14424018
> 
> 赞同：2
> 
> 时间：2013-01-20T11:28:02.110
> 
> 标签：matlab, parallel-processing, parfor

在 Matlab 的 parfor 循环中，当工作人员完成执行时，他们保持活动状态（0 CPU 使用率），直到其余工作人员完成计算，因为`matlabpool close`命令在`parfor`循环之外。我可以单独控制工作人员的执行并在工作人员完成时动态释放工作人员吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:16:43.637

如果您正在使用`matlabpool`and ，则不会`parfor`。`matlabpool`在您使用`matlabpool close`.

如果您将算法设置为使用[`Jobs`](http://www.mathworks.com/help/distcomp/createjob.html)and [`Tasks`](http://www.mathworks.com/help/distcomp/createtask.html)，它们将在完成分配的任务后动态释放。尽管`parfor`实现简单的并行化通常很容易，但对于许多算法来说，使用它实现它并没有那么难，`Jobs`而且`Tasks`一旦你第一次解决它。

# python - 从 args 和 kwargs 生成正确顺序的参数列表？

> ID：14424020
> 
> 赞同：1
> 
> 时间：2013-01-20T11:28:20.767
> 
> 标签：python, arguments, decorator, args, keyword-argument

关注本主题：[允许用户“扩展” API 功能](https://stackoverflow.com/questions/14174799/allow-users-to-extend-api-functions)

```
class Inspector:
    def __init__(self, passedFunc):
        self.passedFunc = passedFunc

    def __call__(self, *args, **kwargs):
        # Inspector needs to generate a list of arguments of the passed function and print them in *correct* order

        # now how to generate a list of arguments using data from both ''args' and 'kwargs'?
        # the user might keep default argument values, in which case both will be None,
        # he might only use args, in which case it is easy,
        # but he might also use kwargs, in which case I don't see how to generate a list with correct order of arguments
        # and he might use all 3 from above together

        # I found this solution for when only default arguments are used
        if args == () and kwargs == {}: args = self.passedFunc.__defaults__

        print args  

@Inspector
def exampleFunc(value=0, otherValue=3):
    pass

exampleFunc() 
```

如何为所有场景生成正确的订单参数列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:41:49.193

这是在装饰器中构建实际参数列表的方法：

```
import inspect

class Inspector:
    def __init__(self, passedFunc):
        self.passedFunc = passedFunc

    def __call__(self, *args, **kwargs):

        spec = inspect.getargspec(self.passedFunc)
        params = dict(zip(spec.args, args))
        defaults = dict(zip(spec.args[-len(spec.defaults):], spec.defaults))

        for k, v in kwargs.items():
            if k not in spec.args:
                raise TypeError('unexpected argument', k)
            if k in params:
                raise TypeError('mulitple values for argument', k)
            params[k] = v

        for k in spec.args:
            if k not in params:
                if k in defaults:
                    params[k] = defaults[k]
                else:
                    raise TypeError('missing argument', k)

        args_in_order = [params[x] for x in spec.args]

        print args_in_order 
```

例子：

```
@Inspector
def exampleFunc(value=0, otherValue=3):
    pass

exampleFunc()  # 0,3
exampleFunc('foo')  # foo,3
exampleFunc(otherValue='foo', value=555) # 555,foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:15:04.153

```
In [244]: def myinspector(func):
     ...:     def inner(*args,**kwargs):
     ...:         myrs1=[list(x) for x in zip(func.func_code.co_varnames[-len(func.func_defaults):],func.func_defaults)]
     ...:         if kwargs:
     ...:             for x in myrs1:
     ...:                 if x[0] in kwargs: x[1]=kwargs.get(x[0])
     ...:             for x in kwargs:
     ...:                 if x not in func.func_code.co_varnames: myrs1.append([x,kwargs.get(x)])
     ...:         if args:myrs1=list(args)+ myrs1
     ...:         print myrs1
     ...:     return inner

In [245]: @myinspector
     ...: def exampleFunc(value=0,othervalue=3):
     ...:     pass

In [246]: exampleFunc()
[['value', 0], ['othervalue', 3]]

In [247]: exampleFunc(1,4,5,value=9,name=5)
[1, 4, 5, ['value', 9], ['othervalue', 3], ['name', 5]]

In [248]: exampleFunc(name=5, othervalue=6)
[['value', 0], ['othervalue', 6], ['name', 5]] 
```

# html - 悬停时菜单栏下的图像显示

> ID：14424028
> 
> 赞同：0
> 
> 时间：2013-01-20T11:29:24.143
> 
> 标签：html, css

我想要一个菜单​​，其中包含与每个选项相关的图像。我希望该图像被隐藏并仅在鼠标悬停在特定选项上时显示。另外，我希望图像被菜单栏覆盖一半，所以它只会显示它的下半部分。知道怎么做吗？？？

我试过类似的东西

HTML：

```
<div id="menu_bar">
     <a href="javascript:change(0)"> text <img src="image"> </a>
     <a href="javascript:change(1)"> text <img src="image"> </a>
     <a href="javascript:change(2)"> text <img src="image"> </a>
</div> 
```

CSS：

```
a>img { display: none; }
a:hover>img { display: block; } 
```

但它甚至不接近我想要完成的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:39:27.217

的HTML：

```
<ul class="main-menu">
     <li id="el-1"><span class="text">Item</span><img src="item-1.png" alt="" /></li>
     <li id="el-2"><span class="text">Item</span><img src="item-1.png" alt="" /></li>
</ul> 
```

Css

```
<style>
.main-menu li > span.text {
    display:block;
    position:relative;
    z-index:1;
    background:white;
}
.main-menu li {
    overflow:hidden;
}
.main-menu li > img {
    display:none;
}
.main-menu li#el-1:hover > img {
    display:block;
    margin-top:-20%;
}
</style> 
```

# android - 观察者未注册。ListView 适配器有时会崩溃

> ID：14424030
> 
> 赞同：0
> 
> 时间：2013-01-20T11:29:33.503
> 
> 标签：android, listview, android-arrayadapter

我有一项服务正在下载一些相册数据，并且有一个活动。服务有 Activity 的引用，并调用 Activity 的方法通知 UI 显示队列中的最新列表数据。该服务调用具有作为处理程序的活动方法来更新 UI，例如

```
public void askForChecheList ( ) {
    galleryHandler.sendEmptyMessage ( 5 ) ;
} 
```

处理程序就像

```
private Handler galleryHandler = new Handler() {
    @ Override
    public void handleMessage (Message msg) {
        // ...
        if ( msg.what == 5 ) {
            showUpdatedList ( ) ;
        }
    }
}; 
```

我正在使用以下代码更新 listView 项目：

```
private synchronized void showUpdatedList ( ) {

    try {

        checkForPhotoService ( ) ;
        if ( mPhotoSyncService != null ) {
            this.mAllAlbumsData = mPhotoSyncService.getSyncAlbumsList ( ) ;
        }
        if ( mAlbumQueuedListAdapter == null ) {
            mAlbumQueuedListAdapter = new AlbumQueueListAdapter ( mContext , mAllAlbumsData ) ;
            mQueuedListView.setAdapter ( mAlbumQueuedListAdapter ) ;
        } else {
            mAlbumQueuedListAdapter.setData ( mAllAlbumsData ) ;
            mAlbumQueuedListAdapter.notifyDataSetChanged ( );
        }
    } catch ( Exception e ) {
        e.printStackTrace ( ) ;
    }
} 
```

但不知道有时它会使用此日志使应用程序崩溃。我在使用 listView 和 Adapter 方面有很好的体验，但我第一次遇到这个错误。有人经历过吗？

```
01-19 23:21:01.139: W/System.err(13013): java.lang.IllegalStateException: Observer android.widget.AbsListView$AdapterDataSetObserver@413afb00 was not registered.
01-19 23:21:01.139: W/System.err(13013): at android.database.Observable.unregisterObserver(Observable.java:69)
01-19 23:21:01.139: W/System.err(13013): at android.widget.BaseAdapter.unregisterDataSetObserver(BaseAdapter.java:42)
01-19 23:21:01.139: W/System.err(13013): at android.widget.ListView.setAdapter(ListView.java:556)
01-19 23:21:01.139: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedList(StatusActivity.java:326)
01-19 23:21:01.139: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.getCachedList(StatusActivity.java:228)
01-19 23:21:01.139: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.PhotoSyncService.downloadAlbums(PhotoSyncService.java:540)
01-19 23:21:01.144: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.PhotoSyncService.onHandleIntent(PhotoSyncService.java:111)
01-19 23:21:01.144: W/System.err(13013): at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
01-19 23:21:01.144: W/System.err(13013): at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 23:21:01.144: W/System.err(13013): at android.os.Looper.loop(Looper.java:155)
01-19 23:21:01.144: W/System.err(13013): at android.os.HandlerThread.run(HandlerThread.java:60)
01-19 23:21:01.174: W/System.err(13013): java.lang.IllegalStateException: Observer android.widget.AbsListView$AdapterDataSetObserver@413afb00 was not registered.
01-19 23:21:01.174: W/System.err(13013): at android.database.Observable.unregisterObserver(Observable.java:69)
01-19 23:21:01.174: W/System.err(13013): at android.widget.BaseAdapter.unregisterDataSetObserver(BaseAdapter.java:42)
01-19 23:21:01.174: W/System.err(13013): at android.widget.ListView.setAdapter(ListView.java:556)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedList(StatusActivity.java:326)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.getCachedList(StatusActivity.java:228)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedValues(StatusActivity.java:275)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.access$4(StatusActivity.java:259)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity$2.handleMessage(StatusActivity.java:93)
01-19 23:21:01.174: W/System.err(13013): at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 23:21:01.174: W/System.err(13013): at android.os.Looper.loop(Looper.java:155)
01-19 23:21:01.174: W/System.err(13013): at android.app.ActivityThread.main(ActivityThread.java:5485)
01-19 23:21:01.174: W/System.err(13013): at java.lang.reflect.Method.invokeNative(Native Method)
01-19 23:21:01.174: W/System.err(13013): at java.lang.reflect.Method.invoke(Method.java:511)
01-19 23:21:01.174: W/System.err(13013): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-19 23:21:01.174: W/System.err(13013): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-19 23:21:01.174: W/System.err(13013): at dalvik.system.NativeStart.main(Native Method)
01-19 23:21:01.174: W/System.err(13013): java.lang.IllegalStateException: Observer android.widget.AbsListView$AdapterDataSetObserver@413afb00 was not registered.
01-19 23:21:01.174: W/System.err(13013): at android.database.Observable.unregisterObserver(Observable.java:69)
01-19 23:21:01.174: W/System.err(13013): at android.widget.BaseAdapter.unregisterDataSetObserver(BaseAdapter.java:42)
01-19 23:21:01.174: W/System.err(13013): at android.widget.ListView.setAdapter(ListView.java:556)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedList(StatusActivity.java:326)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.getCachedList(StatusActivity.java:228)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedValues(StatusActivity.java:275)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.access$4(StatusActivity.java:259)
01-19 23:21:01.174: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity$2.handleMessage(StatusActivity.java:93)
01-19 23:21:01.174: W/System.err(13013): at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 23:21:01.174: W/System.err(13013): at android.os.Looper.loop(Looper.java:155)
01-19 23:21:01.174: W/System.err(13013): at android.app.ActivityThread.main(ActivityThread.java:5485)
01-19 23:21:01.174: W/System.err(13013): at java.lang.reflect.Method.invokeNative(Native Method)
01-19 23:21:01.174: W/System.err(13013): at java.lang.reflect.Method.invoke(Method.java:511)
01-19 23:21:01.174: W/System.err(13013): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-19 23:21:01.174: W/System.err(13013): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-19 23:21:01.174: W/System.err(13013): at dalvik.system.NativeStart.main(Native Method)
01-19 23:21:02.589: W/System.err(13013): java.lang.IllegalStateException: Observer android.widget.AbsListView$AdapterDataSetObserver@413afb00 was not registered.
01-19 23:21:02.609: W/System.err(13013): at android.database.Observable.unregisterObserver(Observable.java:69)
01-19 23:21:02.609: W/System.err(13013): at android.widget.BaseAdapter.unregisterDataSetObserver(BaseAdapter.java:42)
01-19 23:21:02.609: W/System.err(13013): at android.widget.ListView.setAdapter(ListView.java:556)
01-19 23:21:02.609: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.showUpdatedList(StatusActivity.java:326)
01-19 23:21:02.619: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity.getCachedList(StatusActivity.java:228)
01-19 23:21:02.619: W/System.err(13013): at au.com.apparitionimaging.photosuitcase.activities.StatusActivity$2.handleMessage(StatusActivity.java:97)
01-19 23:21:02.619: W/System.err(13013): at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 23:21:02.629: W/System.err(13013): at android.os.Looper.loop(Looper.java:155)
01-19 23:21:02.629: W/System.err(13013): at android.app.ActivityThread.main(ActivityThread.java:5485)
01-19 23:21:02.629: W/System.err(13013): at java.lang.reflect.Method.invokeNative(Native Method)
01-19 23:21:02.629: W/System.err(13013): at java.lang.reflect.Method.invoke(Method.java:511)
01-19 23:21:02.629: W/System.err(13013): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)
01-19 23:21:02.629: W/System.err(13013): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:795)
01-19 23:21:02.629: W/System.err(13013): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:32:42.147

这不是您的处理程序问题的解决方案，但我建议使用**观察者模式**以避免您遇到的问题，我发现这个**[网站](http://www.grokkingandroid.com/use-contentobserver-to-listen-to-changes/)**应该解释如何正确执行此操作的逻辑。

# iphone - dataWithContentsOfURL 不检索数据

> ID：14424032
> 
> 赞同：3
> 
> 时间：2013-01-20T11:29:55.023
> 
> 标签：iphone, html, objective-c

我正在尝试获取此页面 (http://www.sanmarinocard.sm) 的源代码，但 dataWithContentsOfURL 不检索数据。

```
NSURL *url = [NSURL URLWithString:@"http://www.sanmarinocard.sm"];
NSData *responseData = [NSData dataWithContentsOfURL:url];
NSString *result = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding]; 
```

直到几天前一切正常，但从昨天开始没有结果。

你能帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:15:07.890

是的，它也对我有用。也许服务器暂时不可用。

不建议使用 dataWithContentsOfURL: 因为它是同步的并且会阻止您的应用程序正常工作；如果服务器没有响应，它可能会在很长一段时间内阻止您的应用程序。

首选方法是使用 NSMutableURLRequest 并发送异步请求。这将使您的应用程序在加载时保持响应，还可以让您设置超时间隔并更轻松地处理任何错误。

```
NSURL *url = [NSURL URLWithString:@"http://www.sanmarinocard.sm"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setTimeoutInterval: 10.0]; // Will timeout after 10 seconds
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue currentQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    if (data != nil && error == nil)
    {
        NSString *sourceHTML = [[NSString alloc] initWithData:data];
        // It worked, your source HTML is in sourceHTML
    }
    else
    {
        // There was an error, alert the user
    }

   }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T22:36:42.237

我发现我的应用程序通过过滤用户代理被站点阻止。我更改了值，现在它可以完美运行。

我修改了这样的代码：

```
NSString *userAgent = @"Mozilla/4.0 (compatible; MSIE 5.23; Mac_PowerPC)";
NSURL *url = [NSURL URLWithString: @"http://www.sanmarinocard.sm"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:url];
[request setValue:userAgent forHTTPHeaderField:@"User-Agent"];
NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *result = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding]; 
```

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:02:24.503

现在，它工作正常。可能由于临时服务器不可用而发生错误。

此外，如前所述，`NSUTF8StringEncoding`强烈推荐使用。

## 编辑：

它也可以与缓存有关：`dataWithContentsOfURL:`在后台使用 NSURLConnection，默认情况下缓存响应。看到这个[问题](https://stackoverflow.com/questions/405151/is-it-possible-to-prevent-an-nsurlrequest-from-caching-data-or-remove-cached-dat)如何忽略它。

# json - 使用关系将 Json 数据导入 Core Data

> ID：14424035
> 
> 赞同：0
> 
> 时间：2013-01-20T11:30:05.377
> 
> 标签：json, core-data, relationships

我有一个包含两个实体的模型：

`Country`和`City`

Country 有一个属性“countryname”和一个“to many”关系属性，称为：“cities”

City 有一个属性“cityname”和一个“to many”关系属性，称为：“countries”

Country 与 City 具有“对多”关系，因为 1 个国家有超过 1 个城市。

我能够将这个预填充的 Json 文件导入到我的核心数据中，其中还包含以下关系：

```
[{"CITY":"PARIS","COUNTRY":"FRANCE"},
{"CITY":"NICE","COUNTRY":"FRANCE"},
{"CITY":"NANCY","COUNTRY":"FRANCE"},
{"CITY":"BERLIN","COUNTRY":"GERMANY"}] 
```

我的问题是检查应用程序生成的sqlite，我在表中看到国家重复`COUNTRY`，例如，如果我有四个来自法国的城市，我看到 4 条记录“法国”而不是与 4 个城市相关的一条。

我不知道如何解决这个问题。

# android - Android：RelativeLayout 问题

> ID：14424036
> 
> 赞同：1
> 
> 时间：2013-01-20T11:30:06.543
> 
> 标签：android, android-layout

我需要在 RelativeLayout 的中心放置一个网格，但我不想使用 Gravity 只是因为我需要使用 leftMargin 和 topMargin 将其放在特定位置。

网格是使用
我尝试使用此代码的两个 LinearLayout 制作的，但我在屏幕的左上角看到了网格：

```
RelativeLayout fl = new RelativeLayout(this);

    RelativeLayout.LayoutParams flp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT, 
            RelativeLayout.LayoutParams.MATCH_PARENT);

    fl.setLayoutParams(flp);
    fl.setBackgroundResource(R.drawable.background);

    //Linear Layout to contain grid rows
    LinearLayout grid_layout = new LinearLayout(this);

    LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT, 
            LinearLayout.LayoutParams.WRAP_CONTENT);

    llp.leftMargin = (int)Util.convertDpToPixel(200, this);
    llp.topMargin = (int)Util.convertDpToPixel(200, this);

    //Set Params
    grid_layout.setOrientation(LinearLayout.VERTICAL);
    grid_layout.setId(12);
    fl.addView(grid_layout, llp);

    Log.d("Display", "" + grid_layout.getHeight());

    //LinearLayout(s) ROWS
    for (int i = 0; i < 4; i++)
    {
        LinearLayout ll = new LinearLayout(this);

        llp = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT, 
                LinearLayout.LayoutParams.WRAP_CONTENT);

        ll.setLayoutParams(llp);
        grid_layout.addView(ll);

        //Cells
        for (int j = 0; j < 4; j++) //Creating 4 cell blocks in a row
        {
            TextView tv = new TextView(this);
            tv.setBackgroundResource(R.drawable.cell_shape);
            tv.setHeight((int)Util.convertDpToPixel(42, this));
            tv.setWidth((int)Util.convertDpToPixel(42, this));

            ll.addView(tv);

            grid[i][j] = new CellBlock(grid, i, j, tv, null); //Building the game grid
        }
    } 
```

似乎这两行：

```
llp.leftMargin = (int)Util.convertDpToPixel(200, this);
llp.topMargin = (int)Util.convertDpToPixel(200, this); 
```

不工作！为什么一直把网格放在左上角？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:32:39.620

你必须使用

```
RelativeLayout.LayoutParams llp = new RelativeLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
llp.setMargins((int)Util.convertDpToPixel(100, this), (int)Util.convertDpToPixel(200, this), (int)Util.convertDpToPixel(200, this), (int)Util.convertDpToPixel(200, this)); 
```

代替

```
LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
llp.leftMargin = (int)Util.convertDpToPixel(200, this);
llp.topMargin = (int)Util.convertDpToPixel(200, this); 
```

为您的相对布局“grid_layout”

# c# - 如果仅缺少一个值，DataContractSerializer 反序列化将完全失败

> ID：14424040
> 
> 赞同：3
> 
> 时间：2013-01-20T11:30:31.757
> 
> 标签：c#, serialization, datacontractserializer

有什么办法可以防止`DataContractSerializer`Deserialize 忽略缺失值并继续反序列化其余数据，而不是放弃一切，抛出异常并返回`NULL`？

我正在积极构建应用程序，因此它的对象自然会频繁添加新字段，并且越往前走，每次任何对象类型获得额外字段时都必须重新输入所有数据就越痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:45:41.390

您可以使用`IsRequired`属性的`DataMember`属性。

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute_properties.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute_properties.aspx)

例子：

```
[DataContract]
public class Data
{
     [DataMember]
     public string Required { get; set; }

     [DataMember(IsRequired=false)]
     public string? NotRequired { get; set; }
} 
```

# forms - 获取当前表单的名称

> ID：14424041
> 
> 赞同：2
> 
> 时间：2013-01-20T11:30:47.747
> 
> 标签：forms, delphi, delphi-xe2

我在表单上有一个按钮。
按钮名称是`bmod2`，而表单名称是`fLayOut1`

当用户单击按钮时，我想保存当前表单的名称和按钮名称

```
procedure TFLayout1.bMod2Click(Sender: TObject);
var
azone : string;
adept : string;
begin
azone := //forum name here
adept := //button name here
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T11:31:59.570

要获取事件方法所属的当前表单的名称，您可以[`Name`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Name)直接访问该属性，也可以通过*隐藏* `Self`对象访问该属性，如下面的注释代码行所示。

要获取触发某个事件的组件的名称，在这种情况下是[`OnClick`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.OnClick)事件，您可以使用常用`Sender`参数，它（通常）是对导致事件触发的对象的引用。由于传递的`Sender`参数是基`TObject`类类型，还没有该[`Name`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Name)属性，因此您需要将此对象类型转换为该[`Name`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Name)属性具有的类型。它可能直接是绑定了事件的对象的类型，或者，如果您不确定它，或者可能有更多的组件类型绑定到事件，您可以使用例如属性定义的公共[`TComponent`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent)祖先类([`Name`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Name)如以下代码中的注释行所示）：

```
procedure TFLayout1.bMod2Click(Sender: TObject);
var
  azone: string;
  adept: string;
begin
  azone := Name;
  // azone := Self.Name;
  adept := TButton(Sender).Name;
  // adept := TComponent(Sender).Name;
  ShowMessage('Form name: ' + azone + sLineBreak +
    'Sender name: ' + adept);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:20:08.847

如果您想要按钮父级的名称，上面的代码会为您完成，但如果您真的想要包含按钮的表单名称（可能按钮位于 GroupBox 或 Panel 等），您可以这样做：

```
var
  ParentClass: TWinControl;
begin
  ParentClass:= Button1.Parent;
  while not (ParentClass is TForm) do
    ParentClass := ParentClass.Parent;
  ShowMessage(Button1.Name);
  ShowMessage(ParentClass.Name);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:51:12.297

由于您**不是**在构建复合组件，因此您也**可以**使用 TButton 的所有者。

```
procedure TFLayout1.bMod2Click(Sender: TObject);
var
  azone: string;
  adept: string;
  btn: TButton;
begin
  btn := (Sender as TButton);
  adept := btn.Name;
  // adept := TComponent(Sender).Name;
  // adept := (Sender as TButton).Name;
  azone := btn.Owner.Name;

  ShowMessage('Form name: ' + azone + sLineBreak +
    'Sender name: ' + adept);
end; 
```

IDE 始终使表单成为所有控件的所有者，而不是它们的直接容器（它是它们的父级）。

# c++ - 使用 SOCI 和 soci::indicators [C++] 从表中获取行

> ID：14424043
> 
> 赞同：0
> 
> 时间：2013-01-20T11:31:00.750
> 
> 标签：c++, soci

我想从名为“人”的表中获取行。我想在指标的帮助下做到这一点，以避免当这个人没有名字时出现异常。这个怎么做？

我写了代码：

```
try
{
soci::statement st = (sql.prepare << "SELECT firstname FROM person;", soci::into(r, ind));
st.execute();

while (st.fetch())
{
    if(sql.got_data())
    {
        switch(ind)
        {
        case soci::i_ok:
            std::cout << r.get<std::string>(0) << "\n";
            break;
        case soci::i_null:
            std::cout << "Person has no firstname!\n";
            break;
        }
    }else
    {
        std::cout << "There's no such person!\n";
    }
}
} 
```

但它没有显示任何行，只有当我添加一行时：

```
std::cout << r.get<std::string>(0) << "\n"; 
```

在我的 if 语句之前，只有这样我才能看到数据库中的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:37:12.057

我认为您不需要`soci::row`为此目的使用，而是`std::string`

```
//...
std::string firstname;
soci::statement st = (sql.prepare << "SELECT firstname FROM person;"
                    , soci::into(firstname, ind));

//...
        case soci::i_ok:
            std::cout << firstname << std::endl;
            break;
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T11:42:25.717

如果要查询整个数据库表行，则只能使用 soci::row。由于您只查询列，“名字”您可以直接将其提取到字符串中。所以你的代码看起来像；

```
soci::indicator ind;
std::string sFirstName;
try
{
soci::statement st = (sql.prepare << "SELECT firstname FROM person;", 
    soci::into(sFirstName, ind));
st.execute();

while (st.fetch())
{
    switch(ind)
    {
        case soci::i_ok: {
            std::cout << sFirstName << std::endl;
            break; }
        case soci::i_null: {
            std::cout << "Person has no first name!" << std::endl;
            break;
        }
    }
} 
```

# c# - 如何将 css 关联到从服务器接收的 html 字符串？

> ID：14424051
> 
> 赞同：5
> 
> 时间：2013-01-20T11:32:05.553
> 
> 标签：c#, html, css, webview, microsoft-metro

我正在开发一个地铁应用程序。假设我收到一个字符串 (html) 并将该字符串加载到 webview 中。如何将 .css 与该 html 关联？

更新：

答案中建议的 WebViewColumnRight 是一种android方法；我正在开发一个地铁应用程序，c#。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:15:03.300

正如 JanivZ 所说，一种方法是您返回的 html 字符串应该包含对所需 CSS 的引用，以便可以自动加载它。

或者您拥有的另一个选项是，您可以使用[WebView.loadDataWithBaseURL](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

```
htmlData = "<link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />" +    htmlData;
webView.loadDataWithBaseURL(baseUrl, htmlData, "text/html", "UTF-8", null); 
```

在此之后，WebView 将能够从基本 URL 目录中找到您的 CSS 文件。如果 HTML 和 CSS 都来自同一个基本 URL，则无需在 webView.loadDataWithBaseURL 中指定 baseURL

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T11:44:29.300

我会说“返回的字符串”应该包含加载 css 文件所需的引用（例如下面）

```
<head>
<link rel="stylesheet" type="text/css" href="test.css" />
</head> 
```

并让其中的元素引用该css文件中定义的规则。不 ？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T10:38:08.623

如果你正在做`WEBVIEW.NavigateToString(stringHtmlContent)`然后请注入一个

`string styleSheetString = "<link rel='stylesheet' type='text/css' href='test.css' />"`

```
strUpdatedHtmlContent = stringHtmlContent.Insert(stringHtmlContent.IndexOf("<head>",styleSheetString); 
```

然后做

`WEBVIEW.NavigateToString(strUpdatedHtmlContent)`

我只是希望这会有所帮助。O还有一件事，请注意css的路径以及我刚刚从上述讨论中得出的所有信息......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T16:26:15.937

**指向可以找到 css 文件的完整路径的外部样式表。**

```
 <head>
    <link rel="stylesheet" type="text/css" href="full path to css file on server">
    </head> 
```

**html 附带的内部样式表，不需要依赖 css 文件**

```
<head>
<style>
hr {color:sienna;}
p {margin-left:20px;}
body {background-image:url("images/back40.gif");}
</style>
</head> 
```

**内联样式是一种更混乱的方式来完成内部样式表的工作（不依赖于外部 css 文件）**

```
<p style="color:sienna;margin-left:20px">This is a paragraph.</p> 
```

# c++ - 获取旋转时顶点的当前顶点位置

> ID：14424055
> 
> 赞同：1
> 
> 时间：2013-01-20T11:32:20.557
> 
> 标签：c++, opengl, 3d, transformation, vertex

我有一个非常简单的程序，里面有我的介绍者 OpenGL 的东西。我在屏幕上有 3d 顶点，整个系统正在沿 y 轴旋转。

```
float rotation =0;
//update function
rotation = rotation +1; 
```

绘制函数看起来像这样：

```
glPushMatrix();
        glTranslatef(500,390,0);
        glRotatef(rotation,0.0,1.0,0.0);
        glVertex3d(365,50,0);
glPopMatrix(); 
```

当 glVertex 被旋转时，它*在屏幕上的*位置发生了明显的变化。但是点本身的坐标却不是。当它们的“实际”坐标是静止的时，如何获得`current`屏幕上已旋转点的坐标？`glRotatef`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T11:57:35.767

> 当它们的“实际”坐标静止时，如何获取屏幕上已由 glRotatef 旋转的点的当前坐标？

您必须模仿 OpenGL 转换管道。由于您使用的是陈旧的固定功能 OpenGL，我将向您展示如何使用陈旧的*GLU*来做到这一点：

首先我们需要当前视口和投影矩阵

```
GLint viewport[4];
glGetIntegerv(GL_VIEWPORT, viewport);

GLdouble projection[16];
glMatrixMode(GL_PROJECTION);
glGetDoublev(GL_PROJECTION_MATRIX, projection);

glMatrixMode(GL_MODELVIEW);
glPushMatrix();
    glTranslatef(500,390,0);
    glRotatef(rotation,0.0,1.0,0.0); 
```

此时模型视图矩阵保存了应用的模型视图变换，所以也得到这个。

```
GLdouble modelview[16];
glGetDoublev(GL_MODELVIEW_MATRIX, modelview); 
```

现在我们有一切可以投影它。

```
GLdouble obj_x, obj_y, obj_z; // point coordinates
GLdouble win_x, win_y, win_z; // receives window coordinates
gluProject( obj_x, obj_y, obj_z,
            modelview, projection, viewport,
            &win_x, &win_y, &win_z ); 
```

你去吧。我建议查看 MesaGL 提供的 gluProject 的源代码。但基本上是这些步骤：

```
clip = Projection · Modelview · obj{x,y,z,w}
clip = clip / clip.w;
win{x,y} = viewport{x,y} + viewport{width,height} * (clip{x,y} + 1)/2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:44:17.413

在调用之前获取 ModelView 矩阵`glVertex3d(365,50,0);`

```
glGetFloatv(GL_MODELVIEW_MATRIX, ptr) 
```

其中 ptr 是指向浮点数组的指针。因此，在您获得该矩阵后，将其与顶点位置相乘，您将获得旋转位置。使用 GLM 库轻松进行矩阵运算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T04:53:43.567

我建议你首先用它们的质心在原点绘制你的对象`(0, 0, 0)`。

然后，当您调用该函数时：

```
GLfloat matrixMV[16];
glGetFloatv(GL_MODELVIEW_MATRIX, matrixMV); 
```

坐标`(x, y, z)`将分别为 ( `matrixMV[12], matrixMV[13], matrixMV[14])`.

# android - 自动开启 GPS

> ID：14424056
> 
> 赞同：2
> 
> 时间：2013-01-20T11:32:42.057
> 
> 标签：android, gps

我用谷歌搜索了一下，有一些关于利用 Power Manager Bug 来解决这个问题的解决方案。但是由于该错误现已解决。那么现在我该如何解决这个应用程序启动时启动 GPS 的问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:43:04.683

使用此功能：

```
private void turnGPSOn(){
    String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

    if(!provider.contains("gps")){ //if gps is disabled
        final Intent poke = new Intent();
        poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
        poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
        poke.setData(Uri.parse("3")); 
        sendBroadcast(poke);
    }
} 
```

从`onCreate()`您的`activity`.

**或者 ：**

```
Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE");
intent.putExtra("enabled", true);
sendBroadcast(intent); 
```

谢谢。

# c - C-测量函数调用的读写次数

> ID：14424060
> 
> 赞同：3
> 
> 时间：2013-01-20T11:33:08.417
> 
> 标签：c

我想检查一个函数进行的读写次数。可以说我的 c 程序有两个函数，它们分别与 main() 调用，这两个函数都提供了一些读写活动（或 IO 操作的系统调用）。现在我想从IO方面对这两个功能进行比较分析。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:36:56.460

围绕 IO 函数编写包装器，以便在调用包装器时增加一个计数器，例如：

```
void custom_read(int *counter) {
  *counter++;
  real_read();
}

/* ... */

int read_counter = 0;
custom_read(&read_counter);
custom_read(&read_counter);
...
custom_read(&read_counter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:41:26.597

这本质上是*代码覆盖分析*、*调用图跟踪*和*分析*的混合体。

使用的工具很大程度上取决于操作系统，但总体思路是相同的：

您使用*调用图*生成器来查找触发您要分析的函数的所有代码路径。接下来，您使用分析器来计算另一个函数对函数的调用（例如，您可以过滤函数`foo`调用函数的所有事件`bar`）。现在您可以使用*代码覆盖率*分析来查看在代码区域上花费的 CPU 周期的分布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T11:37:07.930

您需要包装 read 和 write 函数，并用目标程序中的包装器替换 read 和 write 函数。

# asp.net-mvc - 如何使用 EntityFramework 注册 UserModel？

> ID：14424061
> 
> 赞同：0
> 
> 时间：2013-01-20T11:33:11.927
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

在我的模型中有 4 个字段

```
[Table("MUser")]
public class UserModel
{
  [Required]
  [ScaffoldColumn(false)]
  [Key, Column("ID", TypeName = "uniqueidentifier")]
  public int Id {get; set;}
  public string UserName {get; set;}
  [Required]
  [Column("Password", TypeName = "nvarchar")]
  public string Password {get; set;}
  [Required]
  [DataType(DataType.Password)]
  [Display(Name = "Confirm password")]
  [Compare("Password", ErrorMessage ="The password and conf password do not match.")]
  public string ConfirmPassword {get; set;}
} 
```

**注意：** ConfirmPassword 不是数据库字段的一部分

所以当尝试保存

```
[HttpPost]
[AllowAnonymous]
[ActionName("UserRegister")]
public ActionResult Register(UserModel model)
{
     if (ModelState.IsValid)
     {
        using (MyDbContext db = new MyDbContext())
        {
          db.User.Add(model);
          db.SaveChanges();
        }
     }
} 
```

我收到了 Invalid Column Name **ConfirmPassword的错误**

那么如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:57:53.630

**使用[NotMapped]**属性标记您不想保留到数据库的列。

**ForeverDebugging**描述的其他方法

 **[来自数据库的“隐藏”列的](https://stackoverflow.com/questions/9723340/hide-column-from-database-but-not-view-in-entity-framework)更多详细信息，但不是在实体框架中查看**

# python - Python 3：何时使用 dict，何时使用元组列表？

> ID：14424064
> 
> 赞同：5
> 
> 时间：2013-01-20T11:33:36.683
> 
> 标签：python, list, dictionary, python-3.x, tuples

例如，我有`id`几个监狱囚犯。每个囚犯都有一个名字。

我知道字典是如何工作的，我知道元组是如何工作的，我知道列表是如何工作的，但有时我会看到正在使用的字典，有时是元组列表。在我的情况下我应该使用哪一个？

```
d = {
    1: "Mike",
    2: "Bob",
    3: "Tom"
} 
```

对比

```
l = [
    (1, "Mike"),
    (2, "Bob"),
    (3, "Tom")
] 
```

概括一下这个问题：什么时候应该使用字典，什么时候应该使用元组列表，一个有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T11:38:50.380

当按顺序存储项目有意义时，您应该使用列表。在这种情况下，只有将 ID 映射到名称很重要。

字典是一种映射，这意味着键和值之间的关系是不对称的。例如，通过已知值获取键是很棘手的（并且在一般情况下并不总是可能），而通过任何项的值过滤元组列表（或一组）同样容易。

话虽如此，在选择数据结构时，考虑如何从中检索数据是有意义的。如果您可以看到`id`和`name`作为类似 C 的东西的相等部分`struct`（例如，您需要按其中任何一个进行搜索，等等），那么您最好使用元组或[`collections.namedtuple`](http://docs.python.org/3.3/library/collections.html#collections.namedtuple). 您仍然可以将它们放在一个列表或一组中，具体取决于您保持有序的需要。

但是 if`id`是一个“特殊”字段，用于检索有关对象的其余信息，并且保证是唯一的（嗯，“ID”是指它），并且您不需要内部订单，并且您想要恒定时间随机访问——当然使用字典。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T11:37:22.147

它们之间有两个主要区别：

*   字典是无序的，元组列表是。因此，如果订购很重要，请使用后者。

*   将键映射到值在字典中需要恒定时间，在元组列表中执行相同操作需要线性时间。因此，键值对的数量越大，扫描元组列表以查找匹配项所需的时间就越多，而在字典中查找总是几乎是即时的。

    （如果您的元组*按排序*顺序保存，您可以使用二进制搜索将搜索时间减少到 O(log n)；但这仍然比字典的恒定时间慢）。

在大多数情况下，您使用`dict`. 即使需要订购，您也可以使用 a[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)来获得两全其美的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T11:35:21.597

在你的情况下，我会使用字典。您可能需要考虑使用其中一个原因有几个。

*   **字典允许使用其 API 来操作其中的键**和值，这需要更多代码来处理元组列表。

例如，考虑一下：

要使用字典获取囚犯的姓名，您只需执行以下操作：

```
d.values() 
```

要对元组列表做同样的事情，你需要这样做：

```
names = []
for tup in l:
    names.append(tup[1]) 
```

*   **字典值是可变的**，这意味着它们可以被允许改变。**你不能对元组做同样的事情**（它是**不可变**的）。

例如

```
d[1] = 'Fotis' 
```

要使用元组列表实现相同的目的，您必须将要操作的元组替换为新的元组。

例如

```
l[1] = (2, 'Max') 
```

# c++ - 简单的链接器错误，找不到解决方案

> ID：14424066
> 
> 赞同：0
> 
> 时间：2013-01-20T11:33:42.767
> 
> 标签：c++, xcode

我对 C++ 有点陌生，但这对于有更多经验的人来说应该很容易找到，因为我已经盯着它看了一段时间了。

我有一个类，它有另一个类实例作为 ivar：

```
private:
Test test1; 
```

然后我有`test.hpp`：

```
class Test{
int x;
void tester();
public:
Test(); //constructor
}; 
```

并且`test.cpp`：

```
 Test::Test():x(5){
    tester();
}

void Test::tester(){
std::cout<<x;
} 
```

当我尝试跑步时，我得到了这个：

`Test::Test() referenced from <my original class with the test1 ivar> not found in architecture`

现在我有很多其他的 C++ 代码工作正常，所以“架构”，不管这意味着什么，显然支持语言正常（我正在使用 Xcode）。

什么可能导致此链接器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T11:40:10.667

确保包含您的测试类的 C++ 文件已编译并且实际上与最终的可执行文件链接。

在 Xcode 中，这意味着将 C++ 文件分配给目标。

# ruby - 如何读取网页`html`表的``值？

> ID：14424070
> 
> 赞同：-2
> 
> 时间：2013-01-20T11:34:03.190
> 
> 标签：ruby, selenium-webdriver

我有一个网页，当我查看源代码时，我得到以下信息：

```
<td>
  <a href="www.example.com">Ryhanu Datta</a>
</td>

<td> daffodil</td>
<td> b2/24 </td> 
```

如何使用Ruby读取`<td>`网页上表格的值？`selenium-webdriver`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:39:53.733

介于两者之间的信息称为表数据。这是一个更加充实的表格，其含义：

```
 <table>
   <tr>
     <th>Table header for column 1</th>
     <th>Table header for column 2</th>
     <th>Table header for column 3</th>
   </tr>
   <tr>
     <td>data in row 1, column 1</td>
     <td>data in row 1, column 2</td>
     <td>data in row 1, column 3</td>
   </tr>
   <tr>
     <td>data in row 2, column 1</td>
     <td>data in row 2, column 2</td>
     <td>data in row 2, column 3</td>
   </tr>
   <tr>
     <td>data in row 3, column 1</td>
     <td>data in row 3, column 2</td>
     <td>data in row 3, column 3</td>
   </tr>
</table> 
```

因此，您有表格本身的一对标签 ..，然后是标题或标题的一对标签 ... ，以及每一行的一对标签 ... ，最后，您要询问的标签是表数据去： ... 。这真的很简单。

对半个帖子感到抱歉。我遇到了一些手指问题，而且我的旧 Mac 也不配合。干杯！

我已经添加了这个。它在评论中的格式不太好。因此，您需要以下代码来加载页面（例如，假设 google.ca），然后找到标签：

```
driver.get "http://www.google.ca"
table_data = driver.find_element(:tag_name, "td") 
```

[再一次，我从这里](http://seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver-api-commands-and-operations)想出了如何做到这一点。

干杯。（我希望这次我能正确理解你）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:46:52.027

使用 mechanize gem [点击这里](http://rubygems.org/gems/mechanize)下载 mechanize gem

# java - Libgdx JsonWriter StackOverflowError

> ID：14424071
> 
> 赞同：1
> 
> 时间：2013-01-20T11:34:16.953
> 
> 标签：java, json, libgdx, stack-overflow, circular-reference

我`StackOverflowError`在尝试将对象写入 json with 时遇到了问题`com.badlogic.gdx.utils.Json`，这是基于[jsonbeans](https://code.google.com/p/jsonbeans/)的。除了对 ShapeRenderer 的引用之外，该对象及其引用的所有对象仅包含原始变量，例如 float、boolean、int 等。多个对象都引用同一个 ShapeRenderer。有一些循环引用（对象都相互引用），但我认为它应该能够处理。

这些错误的原因可能是什么？循环引用有问题吗？如果不回到绘图板并重组我的应用程序的主要部分，我就不能简单地删除它们。

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: java.lang.StackOverflowError
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:111)
Caused by: java.lang.StackOverflowError
    at java.util.regex.Pattern$CharProperty$1.isSatisfiedBy(Unknown Source)
    at java.util.regex.Pattern$7.isSatisfiedBy(Unknown Source)
    at java.util.regex.Pattern$7.isSatisfiedBy(Unknown Source)
    at java.util.regex.Pattern$7.isSatisfiedBy(Unknown Source)
    at java.util.regex.Pattern$7.isSatisfiedBy(Unknown Source)
    at java.util.regex.Pattern$CharProperty.match(Unknown Source)
    at java.util.regex.Pattern$Curly.match0(Unknown Source)
    at java.util.regex.Pattern$Curly.match(Unknown Source)
    at java.util.regex.Pattern$CharProperty.match(Unknown Source)
    at java.util.regex.Matcher.match(Unknown Source)
    at java.util.regex.Matcher.matches(Unknown Source)
    at com.badlogic.gdx.utils.JsonWriter$OutputType.quoteName(JsonWriter.java:174)
    at com.badlogic.gdx.utils.JsonWriter.name(JsonWriter.java:46)
    at com.badlogic.gdx.utils.JsonWriter.set(JsonWriter.java:113)
    at com.badlogic.gdx.utils.Json.writeType(Json.java:574)
    at com.badlogic.gdx.utils.Json.writeObjectStart(Json.java:533)
    at com.badlogic.gdx.utils.Json.writeValue(Json.java:491)
    at com.badlogic.gdx.utils.Json.writeFields(Json.java:237)
    at com.badlogic.gdx.utils.Json.writeValue(Json.java:492)
    at com.badlogic.gdx.utils.Json.writeFields(Json.java:237)
    at com.badlogic.gdx.utils.Json.writeValue(Json.java:492)
    at com.badlogic.gdx.utils.Json.writeFields(Json.java:237)
    at com.badlogic.gdx.utils.Json.writeValue(Json.java:492)
    at com.badlogic.gdx.utils.Json.writeFields(Json.java:237) 
```

这持续了大约 1024 行：

```
 at com.badlogic.gdx.utils.Json.writeValue(Json.java:492)
    at com.badlogic.gdx.utils.Json.writeFields(Json.java:237) 
```

不确定这是日志限制还是堆栈限制，我猜是第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T07:32:41.727

循环引用是问题所在。这是一个不错的[解决方案](https://stackoverflow.com/a/20562820/1895303)：

> 我认为解决这个问题的最佳方法是，可能通过以某种方式重新构建您的数据结构来删除您的循环链接，也许使用某种地图或表格来代替将实体链接到项目。
> 
> 如果您确实必须保留循环引用，那么我建议您编写自己的解析器，因为在序列化时简单地忽略所有者将意味着在反序列化序列化对象时不会返回所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T20:00:21.300

在某些情况下，您还可以在序列化之前将这些引用设置为 null，然后在反序列化后立即恢复它们。例如：

```
class Parent {
    Array<Son> sons;

    public void serialize() {
       clearParents();
       ... serialization code ...
       restoreParents();
    }

    public static Parent deserialize(data) {
        Parent parent = ... deserialization code ...
        parent.restoreParents();
        return parent;
    }

    public void clearParents() {
        for (Son son :sons) {
            son.parent = null;
        }
    }

    public void restoreParents() {
        for (Son son :sons) {
            son.parent = this;
        }
    }

}

class Son {
    Parent parent;

    public Son (Parent parent) {
        this.parent = parent;
        parent.sons.add(this);
    }
} 
```

# java - 在java中设置Jasper Report的字体

> ID：14424072
> 
> 赞同：1
> 
> 时间：2013-01-20T11:34:23.003
> 
> 标签：java, jasper-reports

我想在 Java 代码中为 Jasper 报告设置字体。可以吗？如果是，请建议答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-20T11:47:28.717

如果您使用的是动态碧玉，那么您可以使用：

包裹

```
import ar.com.fdvs.dj.domain.constants.Font;
import ar.com.fdvs.dj.domain.Style; 
```

并使用这些软件包：-

```
Font columnFont=new Font(10, "SansSerif", false);
Style stringColumnStyle=new Style("stringColumnStyle");
stringColumnStyle.setFont(columnFont);
stringColumnStyle.setBorder(Border.THIN);
stringColumnStyle.setHorizontalAlign(HorizontalAlign.LEFT);
stringColumnStyle.setVerticalAlign(VerticalAlign.MIDDLE);
stringColumnStyle.setBorderColor(Color.LIGHT_GRAY); 
```

# java - Spring @ExceptionHandler 没有捕获 AccessDeniedException

> ID：14424076
> 
> 赞同：6
> 
> 时间：2013-01-20T11:34:45.283
> 
> 标签：java, spring, spring-mvc, spring-security

我有一个使用以下代码设置的异常处理程序

```
@ExceptionHandler(Throwable.class)
public @ResponseBody CustomResponse handleException(Throwable throwable){
    // handles exception, returns a JSON
} 
```

我正在使用 Spring Security 3.1。当我尝试在没有身份验证的情况下执行操作时，应用程序会引发 AccessDeniedException。它永远不会用到这种方法。但适用于其他例外情况。这是它应该工作的方式吗？还是我的代码有问题？

[这](https://stackoverflow.com/questions/6742324/exception-handler-in-spring-mvc)看起来像一个解决方案。但如果我能在一个点处理异常会更好。

这是我的配置文件

```
<global-method-security secured-annotations="enabled" pre-post-annotations="enabled" />
<http auto-config="true" use-expressions="true">
    //intercept urls
    <form-login login-page="/signin" default-target-url="/" always-use-default-target="true"/>
</http>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder ref="encoder" />
    </authentication-provider>
</authentication-manager>

<!-- This encoder doesn't require a salt -->
<beans:bean id="encoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder" /> 
```

**更新**

此处用户未经过身份验证 (ROLE_ANONYMOUS)。当我尝试访问受保护的页面时，它会将我重定向到登录 URL。我的问题是，我进行了 AJAX 调用。所以重定向到返回 ModelAndView 的方法是行不通的。这附近有工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T15:01:49.637

Spring Security 的请求处理全部发生在过滤器链中，在调用调度程序 servlet 之前，因此它对 Spring MVC 异常处理程序一无所知，实际上完全可以在没有 Spring MVC 的情况下使用。

您看到的是未经身份验证用户的[预期行为](http://static.springsource.org/spring-security/site/faq/faq.html#faq-anon-access-denied)，但您不希望将 Ajax 调用重定向到 UI 代码。很难准确地说出最佳解决方案是什么，因为对于未经身份验证的 ajax 调用，您希望行为是什么并不明显。例如，如果您希望它们简单地以 403 失败，那么您可以将 ajax api 分离到一个单独的过滤器链中。例如，如果您的 ajax 调用`/ajaxapi`可以在现有的之前添加以下链定义：

```
<http pattern="/ajaxapi/**" create-session="never" use-expressions="true" entry-point-ref="entryPoint">
    <intercept-url pattern="/**" access="isAuthenticated()" />
</http>

<bean entryPoint="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint" /> 
```

然后，ajax 调用将只得到 403 响应，直到用户通过浏览器界面进行身份验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:45:49.567

我猜你[`<access-denied-handler>`](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/appendix-namespace.html#nsa-access-denied-handler)在你的 spring 安全配置中定义了一个。这个处理程序正在捕获`AccessDeniedException`. 这可能就是为什么你没有在你的 generic 中得到它`ExceptionHandler`。

有一个默认的 AccessDeniedHandler（带有默认的 spring 安全设置）。请阅读[本文](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#access-denied-handler)了解更多详情。

# ruby-on-rails - 如何在 fb_graph 中获取访问令牌过期时间？

> ID：14424078
> 
> 赞同：0
> 
> 时间：2013-01-20T11:35:13.300
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, fb-graph

我知道如何获取访问令牌。

```
access_token = @client.authorization.process_callback(params[:code], :redirect_uri => fb_redirect_url) 
```

任何人都可以建议我如何获得到期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:54:49.220

我得到了解决方案。

```
 @client.auth.expires_in 
```

谢谢

# c# - 在 C# .Net winforms 中使用 Membership 类

> ID：14424091
> 
> 赞同：0
> 
> 时间：2013-01-20T11:36:57.913
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在尝试集成`Membership`提供程序类来处理桌面应用程序中的角色和身份验证。我已经`reg_sql`针对数据库运行以创建必要的过程和表。在我的`app config`中，我添加了应用程序服务连接字符串以指向我必要的数据库

```
<add name="ApplicationServices"
     connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=mydatabase;User ID=user;Password=password"
     providerName="System.Data.SqlClient" /> 
```

我正在调试应用程序，当我调用 时，我返回了成功状态，但是当我检查数据库时， or表`Membership.CreateUser()`中没有记录。但是，当我尝试使用相同的详细信息重新注册用户时，我会收到重复的 userName 状态。因此记录必须存在于某处？`user``membership`

如何配置 Membership 类以指向我定义的数据库？

提前致谢

**编辑**这是我的整个应用程序配置

```
 <?xml version="1.0"?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
      <add name="ApplicationServices"
         connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=mydatabase;User ID=user;Password=password"
         providerName="System.Data.SqlClient" />

        <add name="CODS.Properties.Settings.CODSConnectionString" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=CODS;User ID=user;Password=password" providerName="System.Data.SqlClient"/>
    </connectionStrings>
<startup><supportedRuntime version="v2.0.50727"/></startup>

</configuration> 
```

# c# - 在选择查询中使用具有列名的sql查询字符串中的字符串变量

> ID：14424095
> 
> 赞同：0
> 
> 时间：2013-01-20T11:37:12.547
> 
> 标签：c#, asp.net

我正在尝试将列名放入变量中，然后我在 sql 查询中使用此字符串：

```
string s="ID";

string sql="select '"+s+"' from table_name where name='abhk'";

cmd=new SqlCommand(sql_pics, con);

cmd.ExecuteNonQuery(); 
```

*它说 ID 附近有不正确的语法错误*`ID is column name.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:53:24.257

单引号在这里不起作用，但我建议在列名前后加上方括号，而不是什么都不加，以防列名包含空格或特殊字符：

```
string sql="select ["+s+"] from table_name where name='abhk'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:40:23.080

它应该是`string sql = "select "+s+" from table_name where name='abhk'";`列名，不能也不应该是包含在`single quotes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:40:23.967

试试这样；

```
string sql = "select ID from table_name where name='abhk'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:40:42.580

问题是您的查询使用您当前的逻辑如下所示：

```
select 'ID' from table_name where name = 'abhk' 
```

您需要将您的 sql 字符串更改为：

```
string sql="select " + s + " from table_name where name='abhk'"; 
```

但是，这有点小题大做。

# android - 将正确的上下文传递给 greendao 的 OpenHelper 构造函数

> ID：14424099
> 
> 赞同：3
> 
> 时间：2013-01-20T11:37:26.367
> 
> 标签：android, greendao

如果我理解正确，在使用 DB 时，我必须执行以下操作

```
DaoMaster.OpenHelper helper = new DaoMaster.OpenHelper(this, "test-db", null) {

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    };
    SQLiteDatabase db = helper.getWritableDatabase();
    DaoMaster daoMaster = new DaoMaster(db);
    daoSession = daoMaster.newSession(); 
```

但是，如果我尝试在不扩展活动或服务的类中执行此操作，我根本无法传递它们的上下文。

打开我的数据库的正确方法是什么？应该在哪里做？

如果你能提供除官方greendao之外的一些教程链接（我在那里找不到答案），那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T00:02:40.403

提供自定义应用程序对象并使用其上下文（即应用程序上下文）。

在您的 AndroidManifest 文件中，提供一个扩展应用程序的类。

```
<application android:label="@string/app_name"
             android:name=".MyApp"
             > 
```

MyApp 类如下所示：

```
public class MyApp extends Application {

    private static MyApp instance;
    public MyApp() {
        instance = this;
    }

    public static MyApp getInstance() {
        return instance;
    }
.... 
```

所以现在每当您需要应用程序中的上下文时，您都可以调用`MyApp.getInstance`. 只要你在调用 MyApp 之后调用它`onCreate`，你就安全了。请记住，这`instance`是您的应用程序上下文，因此只要您的应用程序还活着，它就会一直存在。（例如没有泄漏的危险）

```
new DaoMaster.OpenHelper(MyApp.getInstance(), "test-db", null) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T11:42:43.827

您可以将上下文从拥有它的类（活动或服务）传递给您要从中调用 OpenHelper 的类：

```
Public class NonActivity {
 private Context context;

   public NonActivity(Context context) {
       this.context = context;
    }
} 
```

并使用它：

`new OpenHelper(context, "test-db", null)`.

# c# - C# 监控和更新

> ID：14424103
> 
> 赞同：0
> 
> 时间：2013-01-20T11:37:45.500
> 
> 标签：c#, .net

在我的程序（基本任务管理器）中，我监视进程列表，并允许对进程进行更改（例如终止进程或提高其优先级）。

为了实现它，我将其设计如下：一个线程是完成所有工作的工作线程，一个线程正在更新 GUI 中的状态。有一个进程列表，我使用 lock 使其成为线程安全的。问题是我定期（比如 1 秒）扫描所有进程，同时我无法更改列表，因为另一个线程正在处理它。因此我的程序有时会延迟显示操作

这是一个好的设计吗？我能做些什么来改善它？我认为降低间隔值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:51:18.830

与其拥有一个共享列表，不如考虑拥有一个您的工作线程维护的列表，它是主列表。一旦完成扫描，它就会将主列表的*副本传递给 GUI 线程。*GUI 线程随后能够使用副本中包含的新信息更新 GUI，同时工作线程可以执行另一次扫描。

这消除了对锁的需求，因为工作线程只写入一个列表，然后创建一个副本（在同一个线程中）。

这种方法的一个问题是，如果后台工作人员能够以比 GUI 更新速度更快的速度收集新进程列表，会发生什么情况。您需要能够在它仍在处理先前的更新时处理接收新的进程列表。

# android - 使用手机用户名将二维码扫描到浏览器中，以记录扫描二维码的人

> ID：14424107
> 
> 赞同：1
> 
> 时间：2013-01-20T11:38:35.587
> 
> 标签：android, ios, qr-code

从手机读取二维码时是否可以传递手机的用户名或电子邮件？我正在开发一个游戏，当人们在不同的地方扫描二维码时会收集积分，因此如果每个人找到并扫描路径上的二维码，我需要为每个人分配积分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:48:30.587

不是直接的。QR 码是静态路径（URL，...），您不能添加用户特定参数。

可能在您的应用程序上，在他们扫描之后，将特定的用户参数添加到 URL，您的 Web 服务只需读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:48:48.063

如果 QR 码确实包含此信息，那么您就完成了。:)

如果没有，则必须将用户信息添加到某个位置，最好位于您的应用程序中，该应用程序将 QR 扫描仪作为子进程启动，然后添加用户信息，然后报告回您的服务器。

# iphone - UINavigationController 添加 UIView

> ID：14424109
> 
> 赞同：0
> 
> 时间：2013-01-20T11:38:57.653
> 
> 标签：iphone, ios, uitableview, parse-framework

![演示图片](../Images/c6035940869846eb2372859167125614.png)

我正在创建一个类似于附加图像的应用程序。在这个应用程序中，他们使用带有默认导航栏的 UITableview。我正在使用 Parse 框架来创建应用程序。我创建了一个以**PFQueryTableViewController**作为父类的类。现在我需要将固定条放在桌子的顶部。[如图所示]。当我放置一个栏时，它会在我滚动表格时向上移动。这意味着该栏被放置在特定的表格单元格中。我没有找到如何在表格上方添加视图栏。所以我需要帮助来使用解析框架添加视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:27:26.687

您可以将导航栏和固定栏放在 UIVIewController 中，并将 tableview 用作 containerViewController（childviewcontroller）。看这里 wwdc 视频：[https ://developer.apple.com/videos/wwdc/2011/?id=102](https://developer.apple.com/videos/wwdc/2011/?id=102)

# ruby-on-rails - Heroku AWS3 CarrierWave 和 rails 问题

> ID：14424116
> 
> 赞同：2
> 
> 时间：2013-01-20T11:39:58.023
> 
> 标签：ruby-on-rails, heroku, amazon-s3, carrierwave

在尝试使用 Heroku 安装 S3 时，我的应用程序崩溃了。

我想要做的是让 Carrierwave 将文件上传到 S3 存储，并让 rails 从 S3 存储加载资产。我打开了我的 S3 帐户，在我的应用程序存储桶中，我上传了整个 Assets 文件夹，目录树如下：

*   我的应用
    *   资产
        *   图片
        *   javascripts
        *   样式表

以下是我遵循的步骤，阅读指南[Heroku：使用 AWS S3 存储静态资产和文件上传](https://devcenter.heroku.com/articles/s3)以及[使用 Carrierwave 设置 S3 的示例](https://gist.github.com/1303386/b47377dfbddd7a29af087a64660464dfd35392d3)：

在我的 Gemfile 中，我添加了

```
gem 'fog' 
```

我运行了命令：

```
heroku config:add AWS_ACCESS_KEY_ID=XXXXXX AWS_SECRET_ACCESS_KEY=XXXXXX
heroku config:add S3_BUCKET_NAME=myapp
heroku config:add S3_REGION=ap-southeast-1 # I created my bucket in Singapore
heroku config:add S3_ASSET_URL=https://s3-ap-southeast-1.amazonaws.com/myapp/assets_%24folder%24 
```

然后运行`bundle install`

然后我创建了 config/initializers/carrierwave.rb

```
# config/initializers/carrierwave.rb
CarrierWave.configure do |config|
  config.fog_credentials = {
    # Configuration for Amazon S3 should be made available through an Environment variable.
    # For local installations, export the env variable through the shell OR
    # if using Passenger, set an Apache environment variable.
    #
    # In Heroku, follow http://devcenter.heroku.com/articles/config-vars
    #
    # $ heroku config:add S3_KEY=your_s3_access_key S3_SECRET=your_s3_secret S3_REGION=eu-west-1 S3_ASSET_URL=http://assets.example.com/ S3_BUCKET_NAME=s3_bucket/folder
    # Configuration for Amazon S3
    :provider => 'AWS',
    :aws_access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :aws_secret_access_key => ENV['AWS_SECRET_ACCESS_KEY'],
    :region => ENV['S3_REGION']
  }

  # For testing, upload files to local `tmp` folder.
  if Rails.env.test? || Rails.env.cucumber?
    config.storage = :file
    config.enable_processing = false
    config.root = "#{Rails.root}/tmp"
  else
    config.storage = :fog
  end

  config.cache_dir = "#{Rails.root}/tmp/uploads" # To let CarrierWave work on heroku
  config.fog_directory = ENV['S3_BUCKET_NAME']
  config.s3_access_policy = :public_read # Generate http:// urls. Defaults to :authenticated_read (https://)
  config.fog_host = "#{ENV['S3_ASSET_URL']}/#{ENV['S3_BUCKET_NAME']}"

end 
```

之后我更新了我的 git 并推送了 heroku：

```
git add .
git commit -m "added S3 configs with fog"
git push heroku master 
```

当我继续我的 Heroku 应用程序时，我意识到有一个错误，我检查了我的日志，发现以下错误：

```
...
2013-01-20T11:00:17+00:00 heroku[web.1]: Process exited with status 1
2013-01-20T11:00:17+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-20T11:00:17+00:00 heroku[web.1]: State changed from crashed to starting
...
2013-01-20T11:00:52+00:00 app[web.1]: /app/config/initializers/carrierwave.rb:29:in `block in <top (required)>': undefined method `s3_access_policy=' for CarrierWave::Uploader::Base:Class (NoMethodError)
...
2013-01-20T11:00:53+00:00 heroku[web.1]: Process exited with status 1
2013-01-20T11:00:53+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-20T11:04:52+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=myapp.herokuapp.com fwd=xxx.xxx.xx.x dyno= queue= wait= connect= service= status=503 bytes=
2013-01-20T11:04:54+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=myapp.herokuapp.com fwd=xxx.xxx.xx.x dyno= queue= wait= connect= service= status=503 bytes=
2013-01-20T11:04:55+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=myapp.herokuapp.com fwd=xxx.xxx.xx.x dyno= queue= wait= connect= service= status=503 bytes= 
```

我也尝试运行`heroku run rake db:migrate`

并得到一个错误：

```
rake aborted!
undefined method `s3_access_policy=' for CarrierWave::Uploader::Base:Class 
```

另外，在我看来，我应该为静态资产设置什么 URL？

谢谢你的任何明智的建议

奥雷连

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:20:55.433

这是我解决问题的方法：

我注释掉了这些方法：`config.s3_access_policy`并且`config.fog_host`它奏效了。这是我的最终初始化程序，带有额外的条件检查，以便在基于 Rails 环境上传时使用雾化 Rails 文件系统。谢谢 FrontierPsycho，你是对的，凭证是最低要求。

```
# config/initializers/carrierwave.rb
CarrierWave.configure do |config|
  config.fog_credentials = {
    # Configuration for Amazon S3 should be made available through an Environment variable.
    # For local installations, export the env variable through the shell OR
    # if using Passenger, set an Apache environment variable.
    #
    # In Heroku, follow http://devcenter.heroku.com/articles/config-vars
    #
    # $ heroku config:add S3_KEY=your_s3_access_key S3_SECRET=your_s3_secret S3_REGION=eu-west-1 S3_ASSET_URL=http://assets.example.com/ S3_BUCKET_NAME=s3_bucket/folder
    # Configuration for Amazon S3
    :provider => 'AWS',
    :aws_access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :aws_secret_access_key => ENV['AWS_SECRET_ACCESS_KEY'],
    :region => ENV['S3_REGION']
  }

  # For testing, upload files to local `tmp` folder.
  if Rails.env.test? || Rails.env.cucumber?
    config.storage = :file
    config.enable_processing = false
    config.root = "#{Rails.root}/tmp"

  elsif Rails.env.development?
    config.storage = :file
  else
    config.storage = :fog
  end

  config.cache_dir = "#{Rails.root}/tmp/uploads" # To let CarrierWave work on heroku
  config.fog_directory = ENV['S3_BUCKET_NAME']
  # config.s3_access_policy = :public_read # Generate http:// urls. Defaults to :authenticated_read (https://)
  # config.fog_host = "#{ENV['S3_ASSET_URL']}/#{ENV['S3_BUCKET_NAME']}"

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:42:20.807

我不确定这一点，但我似乎遵循了与您相同的指南，并且它一定已经过时了。CarrierWave Uploader API 似乎发生了变化。现在，上传的图片默认是公开的，您可以通过 config.fog_public 配置选项进行更改。

[在这里](https://github.com/jnicklas/carrierwave#using-amazon-s3 "CarrierWave 自述文件")和[这里](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/storage/fog.rb "CarierrWave 雾参考")查看更多信息。

我最终只得到：

```
...
:provider              => 'AWS',
:aws_access_key_id     => ENV['S3_KEY'],
:aws_secret_access_key => ENV['S3_SECRET'],
:region                => ENV['S3_REGION']
... 
```

在我的雾初始化器中。什么都不需要了。

# ios - 音频不在后台播放（iOS）

> ID：14424122
> 
> 赞同：1
> 
> 时间：2013-01-20T11:40:12.477
> 
> 标签：ios, audio, background

我试图让我的程序在后台播放重复的声音。

1.  在 info.plist 中添加（必需的背景模式）属性和（应用程序播放音频）。

2.  在我的故事板中，应用程序启动了一个带有根 TableViewController 的 UINavigation 控制器。在我的根 TableViewController.m 中有#import。

3.  在我的 Root TableViewController 中有一个 NSTimer 属性 my_timer。我在 viewDidLoad 方法中设置如下：

my_timer = [NSTimer scheduleTimerWithTimeInterval:1.0 target:self 选择器：@selector(doMyFunction) userInfo:nil repeats:YES];

1.  在 doMyFunction 方法中，我有 playSystemSound(1003)。

我的应用程序在前台模式下按预期定期播放声音，但在后台模式下永远不会播放。我无法弄清楚什么是不正确的，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:10:47.940

playSystemSound 永远不会在后台播放音频。为此，请在主源代码中调用此函数，只需在 ViewDidLoad 之后：

```
-(void)createAudioSession 
{

    // Registers this class as the delegate of the audio session.
    [[AVAudioSession sharedInstance] setDelegate: self];

    // Use this code instead to allow the app sound to continue to play when the screen is locked.
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

    NSError *myErr;

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:&myErr];

} 
```

然后

```
AVAudioPlayer * FXPlayer;

FXPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:resourcePath] error:&err];

FXPlayer.numberOfLoops = -1; // will loop forever

[FXPlayer play]; 
```

# eclipse - 如何从远程存储库更新现有项目？

> ID：14424123
> 
> 赞同：1
> 
> 时间：2013-01-20T11:40:18.153
> 
> 标签：eclipse, git, bitbucket, egit

我在使用 Git 的 bitbucket 上有我的项目。我想从几台计算机上处​​理这个项目。在 Eclipse 中使用 EGit 提交项目没有问题。

到目前为止，我总是删除我的项目并从 bitbucket 的最新提交中导入一个新项目。

但是如何根据远程 bitbucket 存储库的状态更新 eclipse 中的现有项目？无需删除？

当我尝试拉动时，我得到：

> 当前分支未配置为 pull 在配置中找不到 key branch.master.merge 的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:05:01.817

找到了。以下条目必须放在 .git/config 下：

```
[core]
    repositoryformatversion = 0
    filemode = false
    logallrefupdates = true

    [branch "master"] 
        remote = origin 
        merge = refs/heads/master 
    [remote "origin"] 
        url = ssh://git@bitbucket.org/username/project.git
        fetch = +refs/heads/*:refs/remotes/origin/* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:46:36.927

如果您使用的是 eGit，则执行拉取请求或团队/拉取。

# ruby-on-rails - 我在 Books#add 在我的 ruby 中收到 NoMethodError

> ID：14424130
> 
> 赞同：-1
> 
> 时间：2013-01-20T11:40:50.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 Ruby 非常陌生，大约 4 周前才开始学习。我现在只是在建造一些非常小的东西。一个包含一些字段的表单，用于存储有关书名的数据输入，然后将其吐出到下面的列表中，到目前为止，这就是我得到的：

```
books_controller.rb

    class BooksController < ApplicationController
  def add
    @book_name = params[:book_name]
  end

  def sign_in
        @book_name = params[:book_name]
    unless @book_name.blank?
        @book = Book.create({:book_name => @book_name})
    end
        @books = Book.all
  end
end 
```

这是创建控制器的地方。我认为非常直接。

这是这里的数据库创建者：

```
class CreateBooks < ActiveRecord::Migration
  def change
    create_table :books do |t|
      t.string :book_name
      t.timestamps
    end
  end
end 
```

然后我们有 app/models/book.rb：

```
class Book < ActiveRecord::Base
  attr_accessible :book_name
end 
```

然后我有一个添加模板，其中添加了书名并创建了列表（这是我收到错误的页面）

```
<p>Find me in app/views/books/add.html.erb</p>

<h2>Recent book: <%= @book_name %> and the Author is: <%= @book_author %></h2>
<%= form_tag :action => 'add' do %>
<p>Book name: <%= text_field_tag 'book_name', @book_name %></p>
<%= submit_tag 'Add Book' %>
<% end %>

<p>Book list:</p>
<ul>
<% @books.each do |book| %>
<li><%= book.book_name %></li>
<% end %>
</ul>
<hr>
<%= debug(params) %>
<%= debug(assigns) %> 
```

有人会碰巧知道我为什么会收到此错误吗，我将在下面显示完整的错误：

书籍中的 NoMethodError #add undefined method `each' for nil:NilClass

任何帮助都会很好。

干杯，马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:50:00.673

`Book#add` is calling an undefined method. `#add` is defined in `BooksController`, not `Book`.

Unfortunately, this is only one of several issues. Your code suggests an incomplete understanding of how Rails works, which is not atypical of someone just starting out.

I suggest you focus your Rails studies on:

*   the HTTP request/response cycle
*   instance variables, especially lifespan and scope in controllers
*   CRUD methods (a basic Rails convention)
*   MVC architecture and the relationship between controllers and models

# jquery - 使用fancybox和沙盒菜单的javascript冲突

> ID：14424133
> 
> 赞同：1
> 
> 时间：2013-01-20T11:41:16.623
> 
> 标签：jquery

我遇到的问题正在[www.provalserv.com/testfsb/test/w3c.html](http://www.provalserv.com/testfsb/test/w3c.html)进行测试。大多数画廊都可以工作，但它应该像[www.provalserv.com/testfsb/test/gallery.html](http://www.provalserv.com/testfsb/test/gallery.html)一样工作，图像滑出和滑回，而不仅仅是给我一个白色背景的图像。

# c# - 将文件（例如屏幕截图）附加到 log4net smtp appender

> ID：14424136
> 
> 赞同：0
> 
> 时间：2013-01-20T11:41:29.097
> 
> 标签：c#, log4net

我想附加一个带有 log4net smtp appender 发送的日志的文件。这将允许我们在电子邮件日志中包含屏幕截图或输入文件数据。

无论如何，开箱即用自动执行此操作。我似乎找不到任何关于此的信息，并且我猜测我们需要将其与 log4net 日志记录分开或将信息写入日志中（但这需要我们在收到电子邮件后对其进行反序列化）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-07T14:04:57.417

您可以使用自己的 smtp appender 来完成，这是我用来向多个用户发送邮件的代码，带有自定义主题和附件：

*   在配置文件中

对于自定义主题：

```
<layoutSubject type="log4net.Layout.PatternLayout,log4net">
    <conversionPattern value="Custom subject %level in application" />
</layoutSubject> 
```

对于多个收件人：

```
email1@domain.com;email2@domain.com;... 
```

*   在您的日志类中

每次要添加附件时都必须调用的代码。
小心，你必须让这个适应你的程序！

```
private static void AddAttachment(string Attachment)
{
    if (!string.IsNullOrEmpty(Attachment))
    {
        if (File.Exists(Attachment))
        {
            foreach (IAppender Appender in Log.log.Logger.Repository.GetAppenders())
            {
                if (Appender.GetType().ToString().IndexOf(".SmtpCustomAppender") != -1)
                {
                    ((SmtpCustomAppender)(Appender)).Attachment = Attachment;
                }
            }
        }
        else
        {
            VPLog.Log4Net.LogWarning(string.Format("Le fichier {0} est introuvable sur le disque, il sera ignoré.", Attachment));
        }
    }
} 
```

最重要的是自定义附加程序：

```
public class SmtpCustomAppender : log4net.Appender.SmtpAppender
{
    public SmtpCustomAppender()
        : base()
    {
    }
    public ILayout LayoutSubject { get; set; }
    public bool IsBodyHtml { get; set; }
    public string Attachment { get; set; }

    protected override void SendEmail(string messageBody)
    {
        // .NET 2.0 has a new API for SMTP email System.Net.Mail
        // This API supports credentials and multiple hosts correctly.
        // The old API is deprecated.

        // Create and configure the smtp client
        SmtpClient smtpClient = new SmtpClient();
        if (!String.IsNullOrEmpty(this.SmtpHost))
        {
            smtpClient.Host = this.SmtpHost;
        }
        smtpClient.Port = this.Port;
        smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
        smtpClient.EnableSsl = this.EnableSsl;

        if (Authentication == SmtpAuthentication.Basic)
        {
            // Perform basic authentication
            smtpClient.Credentials = new System.Net.NetworkCredential(Username, Password);
        }
        else if (Authentication == SmtpAuthentication.Ntlm)
        {
            // Perform integrated authentication (NTLM)
            smtpClient.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
        }

        using (System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage())
        {
            mailMessage.IsBodyHtml = IsBodyHtml;
            mailMessage.Body = messageBody;
            //mailMessage.BodyEncoding = BodyEncoding;
            mailMessage.From = new MailAddress(From);
            foreach(string emailTo in To.Split(';'))
                mailMessage.To.Add(emailTo);
            if (!String.IsNullOrEmpty(Cc))
            {
                foreach (string emailCc in Cc.Split(';'))
                    mailMessage.CC.Add(emailCc);
            }
            if (!String.IsNullOrEmpty(Bcc))
            {
                foreach (string emailBcc in Bcc.Split(';'))
                    mailMessage.Bcc.Add(emailBcc);
            }
            if (!String.IsNullOrEmpty(this.ReplyTo))
            {
                // .NET 4.0 warning CS0618: 'System.Net.Mail.MailMessage.ReplyTo' is obsolete:
                // 'ReplyTo is obsoleted for this type.  Please use ReplyToList instead which can accept multiple addresses. http://go.microsoft.com/fwlink/?linkid=14202'
//#if !NET_4_0
                //mailMessage.ReplyTo = new MailAddress(this.ReplyTo);
//#else
                mailMessage.ReplyToList.Add(new MailAddress(this.ReplyTo));
//#endif
            }
            mailMessage.Subject = this.Subject;
            //mailMessage.SubjectEncoding = m_subjectEncoding;
            mailMessage.Priority = this.Priority;

            #region on ajoute la ou les pièce(s) jointe(s)
            if (!string.IsNullOrEmpty(Attachment))
            {
                var attachments = Attachment.Split(';');
                foreach (var attach in attachments)
                {
                    if (!string.IsNullOrEmpty(attach.Trim()))
                    {
                        var path = attach.Trim();
                        try
                        {
                            var context = HttpContext.Current;
                            if (context == null) //context non web
                            {
                                //on teste s'il s'agit d'un chemin absolu ou non
                                if (!Path.IsPathRooted(path))
                                {
                                    path = Directory.GetCurrentDirectory() + "\\" + path;
                                }

                                if (File.Exists(path))
                                {
                                    //si le fichier spécifié existe bien, on l'ajoute en pièce jointe au mail
                                    AttachFile(mailMessage, path);
                                }
                                else
                                {
                                    // Sinon, on écrit dans le corps du mail que le fichier n'a pas été trouvé
                                    mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                                    mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                                    mailMessage.Body += "Fichier non trouvé: " + attach;
                                }
                            }
                            else //context web
                            {
                                //on teste s'il s'agit d'un chemin absolu ou non
                                if (!Path.IsPathRooted(path))
                                {
                                    path = context.Server.MapPath(path);
                                }

                                if (File.Exists(path))
                                {
                                    //si le fichier spécifié existe bien, on l'ajoute en pièce jointe au mail
                                    AttachFile(mailMessage, path);
                                }
                                else
                                {
                                    // Sinon, on écrit dans le corps du mail que le fichier n'a pas été trouvé
                                    mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                                    mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                                    mailMessage.Body += "Fichier non trouvé: " + attach;
                                }
                            }
                        }
                        catch (Exception ex)
                        {
                            // En cas d'erreur, on précise dans le corps du mail que le fichier n'a pu être joint
                            mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                            mailMessage.Body += IsBodyHtml ? "<br/>" : Environment.NewLine;
                            mailMessage.Body += string.Format("<b>Erreur lors de l'ajout de la piece jointe: {0}</b>", attach);

                            // On logge l'erreur avec le logger interne de log4net
                            VPLog.Log4Net.Log.log.Error(string.Format("Erreur lors de la pièe jointe: {0} (path: {1})", attach, path), ex);
                        }
                        finally
                        {
                            this.Attachment = "";
                        }
                    }
                }
            }
            #endregion

            // TODO: Consider using SendAsync to send the message without blocking. This would be a change in
            // behaviour compared to .NET 1.x. We would need a SendCompletedCallback to log errors.
            smtpClient.Send(mailMessage);
        }
    }

    /// <summary>
    /// On permet la customisation de l'objet du mail
    /// </summary>
    /// <param name="loggingEvent"></param>
    protected override void Append(log4net.Core.LoggingEvent loggingEvent)
    {
        if (this.BufferSize <= 1 && this.LayoutSubject != null)
        {
            #region Custo pour le sujet
            var subjectWriter = new StringWriter(System.Globalization.CultureInfo.InvariantCulture);
            LayoutSubject.Format(subjectWriter, loggingEvent);
            this.Subject = subjectWriter.ToString();
        #endregion
    }
    base.Append(loggingEvent);
}

/// <summary>
/// Attache une pièce jointe au mail
/// </summary>
/// <param name="mailMessage">mailMessage</param>
/// <param name="path">Chemin du fichier</param>
private void AttachFile(System.Net.Mail.MailMessage mailMessage, string path)
{
    var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    mailMessage.Attachments.Add(new Attachment(stream, Path.GetFileName(Attachment)));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:50:27.347

这是不支持的。它也很难支持，因为只有少数日志记录目标可以支持附加文件。

但是您可以 - 作为一种变通方法 - 生成 HTML 日志消息并使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_schemehttp://en.wikipedia.org/wiki/Data_URI_scheme)来嵌入二进制数据，尤其是图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:46:03.993

使用自己的 smpt 行为创建自己的附加程序，[文章如何做附加程序](http://www.codeproject.com/Articles/406634/Creating-a-custom-log4net-appender)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-23T11:39:52.577

SeleniumLog 是专门为此而构建的应用程序 - 将屏幕截图和任意文件/二进制文件附加到日志中。它的任务很重，可以毫不费力地处理成百上千的屏幕截图。您可以为它创建一个附加程序，或者只是等待我听说他们正在为它开发一个 log4net 插件，等等。

# c - 调用多个 _popen 失败

> ID：14424141
> 
> 赞同：1
> 
> 时间：2013-01-20T11:41:57.960
> 
> 标签：c, windows, popen

我有问题`_popen(const char *, const char *)`

我正在尝试使用 awk 从 adb 获取信息，但我的程序在第二次 _popen 调用时崩溃（该方法被调用两次）。

这是有问题的代码（`sysinf_getvalue()`在主程序中被多次调用）。

* * *

# 丑陋的代码

```
int deviceadbinfowritten = 0;
int devicebootloaderinfowritten = 0;
int adbinit = 0;

int initadb()
{
    if(!adbinit)
    {
        system("adb kill-server && adb start-server");
        adbinit = 1;
    }
    return 0;
}

int sysinfo_getadbinfofile()
{
    if(!deviceadbinfowritten)
    {
        system("echo Please connect your device && adb wait-for-device && adb.exe shell getprop > deviceinfo");
        deviceadbinfowritten = 1;
    }

    return 0;
}

int sysinfo_getbootloaderinfofile()
{
    if(!devicebootloaderinfowritten)
    {
        system("adb wait-for-device && adb reboot bootloader && fastboot getvar all > bootloaderinfo && fastboot reboot");
        devicebootloaderinfowritten = 1;
    }
    return 0;
}

char *sysinfo_getvalue(char *key, int bootloader)
{
    initadb();
    if(bootloader) sysinfo_getbootloaderinfofile();
    else sysinfo_getadbinfofile();
    char *file = (bootloader)?"bootloaderinfo":"deviceinfo";

    char *command = malloc(sizeof(char) * (strlen("awk.exe -F\":\" \" { print $2 }\" < ") + strlen(key) + (bootloader)?0:2 + strlen(file)));
    char *adbkey = malloc((strlen(key)+2)* (sizeof(char)));
    if(!bootloader) sprintf(adbkey, "/%s/", key);
    sprintf(command, "awk.exe -F\":\" \"%s { print $2 }\" < %s", ((bootloader)?key:adbkey), file);

    printf("%s\n", command);
    char *pointer = exe(command);
    if(!bootloader)
    {
        pointer += 2;
        pointer[strlen(pointer)-3] = 0;
    }

    return pointer;
}

char *exe(char *exe)
{
    char buffer[1024];
    FILE *f;

    printf("debug %s\n", exe);

    f = _popen(exe, "r");

    printf("debug\n");

    char *res = NULL;

    printf("debug\n");

    if (f == NULL) {
        printf("[-] Failed to run command\n" );
        return NULL;
}
    printf("debug\n");

    while (fgets(buffer, sizeof(buffer), f) != NULL) {
        if(res == NULL) {res = malloc(strlen(buffer) * sizeof(char)); strcpy(res, buffer);}
        else {res = realloc(res, strlen(res) * sizeof(char) + sizeof(buffer));sprintf(res, "%s%s", res, buffer);}
}

    printf("debug\n");

    _pclose(f);

    return res;
} 
```

注意：如果我`exe()`使用提供的相同字符串直接调用 main _popen 不会崩溃。

注2：调试器说`"warning: HEAP[program.exe]: warning: Heap block at 002D2EC0 modified at 002D2EC9 past requested size of 1"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:39:22.313

It looks as if you are missing to allocate room for the 0-terminator.

That is the one last additional byte every character array needs if used as string to indicate the end of the string by a character of value `NUL` (decimal `0`).

At least this line:

```
char *command = malloc(sizeof(char) * (strlen("awk.exe -F\":\" \" { print $2 }\" < ") + strlen(key) + (bootloader)?0:2 + strlen(file))); 
```

shall allocate one character more:

```
char *command = malloc(
  sizeof(char) * (
    strlen("awk.exe -F\":\" \" { print $2 }\" < ") + 
    strlen(key) + 
    (bootloader)?0:2 + strlen(file)) + 
    1
  )
); 
```

(I did not check all allocations/delcaration of character arrays in your code, for issues like this.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:04:56.120

我在此链接中发现[C++ system() not working 当两个不同的参数中有空格时，](https://stackoverflow.com/questions/9964865/c-system-not-working-when-there-are-spaces-in-two-different-parameters)如果您希望它们正常工作，您需要用引号将所有系统调用封装起来。例如在我的代码中我需要使用`exe("\"mycommand\"");`而不是`exe("mycommand");`

# java - 如何从运行在 TomCat 中的 Java 应用程序中读取 Apache Httpd Env 变量？

> ID：14424142
> 
> 赞同：3
> 
> 时间：2013-01-20T11:42:21.990
> 
> 标签：java, apache, tomcat, stripes

我有几个 Java 应用程序在 Apache Httpd 后面的 TomCat 容器中运行。`SetEnv FOO bar`在 Apache Httdp 中，如果您安装了mod_env，您可以使用 设置 Env 变量。如何在 TomCat 中运行的 Java 应用程序中读取这些变量？Java 应用程序大多是用 Stripes 构建的，如果有帮助的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T16:00:42.870

因为 Tomcat 是在 Apache 之外启动的，所以它无法访问 Apache 环境。这意味着您需要某种方式将环境变量从 Apache 传递到 Tomcat。

如果您使用 连接 Apache 和 Tomcat `mod_jk`，则可以使用该`JkEnvVar`指令将特定变量传递给 Tomcat。从[mod_jk 文档](https://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)：

> 该指令`JkEnvVar`允许您将环境变量从 Apache 服务器转发到 Tomcat 引擎。您可以将默认值作为第二个参数添加到指令中。如果未明确给出默认值，则仅在运行时设置变量时才会发送该变量。这些变量可以在 Tomcat 端作为请求属性通过`request.getAttribute(attributeName)`. 请注意，变量 send via`JkEnvVar`不会在 中列出`request.getAttributeNames()`。

如果您使用的是 HTTP 代理 ( `mod_proxy`) 而不是`mod_jk`，则可以使用 将环境变量作为请求标头传递`mod_headers`，例如：

```
RequestHeader set X-MYVAR %{MYVAR}e 
```

...然后在 Tomcat 中，您必须提取`X-MYVAR`标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T07:05:04.957

此外，如果您通过 AJP 使用模块代理，即`mod_proxy_ajp`根据[文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)：

> 名称带有前缀 AJP_ 的环境变量将作为 AJP 请求属性转发到源服务器（从密钥名称中删除 AJP_ 前缀）。

# php - 如果没有数据库信息，则返回一个变量以用于创建关于无数据的注释

> ID：14424145
> 
> 赞同：0
> 
> 时间：2013-01-20T11:43:03.667
> 
> 标签：php, mysql, loops

我目前正在研究一个 php 函数，我遇到了一些麻烦。

目前我在一个php页面上使用一个函数，如下所示：

```
get_Properties($currUser); 
```

依次转到执行此操作的第二个 php 文件：

```
function get_Properties($currUser) {
    $mysql = New Mysql();
    return $mysql->get_Properties($currUser);   
} 
```

最后但并非最不重要的一点是，这带来了我正在处理的功能：

```
function get_Properties($currUser) {
    //new instance of mysqli
        $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
        //if it doesn't work give an error
        if (!$mysqli) {
            die('There was a problem connecting to the database.');
        }
        $queryProperties ="SELECT Id, Agent, MainImage, Address, Bedrooms, Baths, Price
                     FROM Properties
                     WHERE Agent = '$currUser'
                     ORDER BY Id DESC";
        if ($Results = $mysqli->query($queryProperties)){
            if (!$Results) {
                echo 'Could not run query: ' . mysql_error();
                exit;
            }
            else{
                $Results = $mysqli->query($queryProperties);
            }
            while ($rows = $Results->fetch_assoc()) {
                echo '<div class="product clearfix">';
                  echo '<div class="l-image">';
                    echo '<img src="'.$rows['MainImage'].'" alt="'.$rows['Agent'].'" title="'.$rows['Agent'].'" />';
                    echo '<div class="l-image-hover">';
                      echo '<a href="#" class="l-lupa"><!-- --></a>';
                      echo '<a href="#" class="l-link"><!-- --></a>';
                    echo '</div>';
                 echo ' </div>';
                  echo '<div class="l-shadow"><!-- --></div>';
                  echo '<div class="l-title"><a href="property-details.php">'.$rows['Address'].'</a></div>';
                  echo '<div class="l-features clearfix">';
                    echo '<div class="l-bedrooms">'.$rows['Bedrooms'].' Bedrooms</div>';
                    echo '<div class="l-baths">'.$rows['Baths'].' Bathrooms</div>';
                  echo '</div>';
                  echo '<div class="l-details clearfix">';
                    echo '<div class="l-price">£'.$rows['Price'].' PCM</div>';
                    echo '<div class="l-view"><a href="property-details.php?PropertyId='.$rows['Id'].'">View details</a></div>';
                  echo '</div>';
                echo '</div>';
            }
        }
        $mysqli->close();
    }
} 
```

现在我遇到的问题是 - 并不总是会有回声。有时 $rows 变量不会返回任何内容（该特定用户没有条目）。

问题是。我如何让它说“如果没有返回行，显然这个用户没有数据，所以返回一个变量，如 $userHasNoData = 1。或者类似的东西。所以在主页上我可以说“如果（isset ($userHasNoData)) { echo "没有数据！"; }

哦，因为我还在学习，请随时以任何方式批评我的代码以帮助我改进:) 谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:57:59.797

扩展 shannonoman 的答案，您可以[`num_rows`](http://php.net/manual/en/mysqli-result.num-rows.php)在执行 while 语句之前添加调用作为检查：

```
if ($result->num_rows == 0) {
    echo 'Sorry, no data!';
} else {
    while ($rows = $Results->fetch_assoc()) {
        // output stuff
    }
} 
```

作为进一步改进代码的机会，我还想指出，`$mysqli->query`当你可以调用一次时，你调用了两次：

```
if ($Results = $mysqli->query($queryProperties)) {
    if ($result->num_rows == 0) {
        echo 'Sorry, no data!';
    } else {
        while ($rows = $Results->fetch_assoc()) {
            // output stuff
        }
    }
} else {
    echo 'Could not run query: ' . $mysqli->error; // not mysql_error!
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:46:19.913

您可以使用以下命令检查返回的行数：

```
$num_rows = $Results->num_rows; 
```

所以检查为零并采取任何你需要的行动。

# google-apps-script - 如何在类范围内创建自定义函数

> ID：14424148
> 
> 赞同：1
> 
> 时间：2013-01-20T11:43:21.280
> 
> 标签：google-apps-script

我想创建一个自定义函数，即 myrange.ckeck_if_included(row,col,numrow,numcol)，它返回一个布尔值，表示输入中给出的范围是否包含在 myrange 中。是否可以在类范围内创建此功能？以及如何将我的函数引用到 myrange？谢谢弗兰科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:12:18.337

您始终可以使用代理对象来执行此操作。这是一个通用的代理制作实用程序：

```
function proxy(obj) {
  var x = {};
  Object.keys(obj).map(function(k) { x[k] =
      function() { return obj[k].apply(obj, [].slice.call(arguments, 0)); }})
  return x;
} 
```

在你的情况下，你可以这样做

```
r=proxy(SpreadsheetApp.openById("...").getSheetByName("Sheet1").getActiveRange());
r.myFunction=function () { ... } 
```

更一般地说，您甚至可以用代理替换顶级对象：

```
GmailApp = proxy(GmailApp);
GmailApp.myFunction = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:51:23.740

So you want to extend an Object/Class of the Google-Services? This does not work, you get an exception "Object does not allow properties to be added or changed" if you try like this:

```
r=SpreadsheetApp.openById("...").getSheetByName("Sheet1").getActiveRange();
r.myFunction=function () { ... } 
```

# database - 应用更新后保留文件

> ID：14424149
> 
> 赞同：0
> 
> 时间：2013-01-20T11:43:28.697
> 
> 标签：database, xcode, macos, core

我是可可应用程序编程的新手，所以如果这是一个愚蠢的问题，请耐心等待。

我正在使用核心框架建立一个数据库。我的应用程序将经常更新和修复错误。如何防止我的应用程序更新覆盖数据库？我可以更新数据库以外的所有内容吗？

谢谢！

最好的祝福

伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:53:27.883

更新应用程序将仅覆盖应用程序包（即 Yourprogram.app 文件夹）。它不会对 ~/Library/ 和 ~/Documents 做任何事情，所有数据库都应该存储在其中。

# c++ - Win32 WndProc 作为类成员

> ID：14424150
> 
> 赞同：2
> 
> 时间：2013-01-20T11:43:53.700
> 
> 标签：c++, winapi, mingw

有没有办法将 WndProc 包装为私有成员？

如果我有这个：

```
class Window
{
public:
    Window();
    virtual ~Window();
    void create();

private:
    LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);
}; 
```

在我的`create()`这个：

```
WNDCLASSEX wc;
wc.lpfnWndProc = (WNDPROC) &Window::WndProc; 
```

我收到这个警告：

`warning: converting from 'LRESULT (Window::*)(HWND, UINT, WPARAM, LPARAM) {aka long int (Window::*)(HWND__*, unsigned int, unsigned int, long int)}' to 'WNDPROC {aka long int (__attribute__((__stdcall__)) *)(HWND__*, unsigned int, unsigned int, long int)}' [-Wpmf-conversions]`

我的窗口`HWND`是`NULL`，`GetLastError()`也返回 0。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T11:45:50.187

使其静态：

```
static LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T12:01:33.520

您应该将`static`修饰符添加到它。

这样做的原因是，当它是一个成员函数（我相信`__thiscall`在 Visual C++ 中是一个）时，它实际上只是一个`this`作为第一个参数的 C 函数。这看起来像这样：

```
LRESULT CALLBACK WndProc(Window& this, HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam); 
```

如果将其设为静态，编译器将去掉第一个`Window& this`参数，使其与`lpfnWndProc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T22:55:20.963

是的，可以将 WndProc 包含为类成员。此外，您可以从中修改其他类成员。诀窍是使用两个 WndProc 函数，其中一个是静态的。

# macos - Qt5安装问题

> ID：14424158
> 
> 赞同：1
> 
> 时间：2013-01-20T11:44:37.357
> 
> 标签：macos, qt, installation, osx-lion, qt5

我正在尝试使用[预构建的二进制版本](http://releases.qt-project.org/qt5/5.0.0/qt-mac-opensource-5.0.0-clang-offline.dmg)在 OS-X 10.7.5 上安装 Qt5 。

一切似乎都很好，QtCreator 已安装并且可以正常工作。

但是，当我创建一个新项目时，我收到错误：“找不到有效的工具包”。检测到的 Qt 版本似乎只是旧的 Qt4 版本。

我用于安装的文件是包含所有内容的文件：Qt5、QtCreator、... (398 MB)，但安装时似乎只有带有 QtCreator 的目录可用。

我应该先卸载 Qt4 吗？
是不是别人遇到的问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:35:56.280

Qt Creator 2.6 引入了“工具包”的概念。您需要至少有一个工具包正确配置了 Qt 版本和工具链。不幸的是，SDK 安装并没有为您配置工具包，而且文档完全缺乏。

以下是有关如何设置套件的一些信息。该页面甚至没有从主文档页面链接。 [http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html](http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:47:13.417

在 QtCreator 中，您可以设置要使用的 Qt SDK 的位置。

请在官方网站上查看[本指南。](http://doc.qt.digia.com/qtcreator-2.4/creator-project-qmake.html)

# php - PHP - 地址后的问号如何工作？

> ID：14424162
> 
> 赞同：5
> 
> 时间：2013-01-20T11:44:50.487
> 
> 标签：php, url

我一直想知道像[http://example.com/filename.php?dosomething](http://example.com/filename.php?dosomething)和[http://somesite.net?logoff](http://somesite.net?logoff)这样的链接有什么作用。

由于我对 PHP 了解不多，而且英语不是我的母语，所以我一直无法找到这样的好信息。

我知道[http://mysite.com/edit.php?editpassword](http://mysite.com/edit.php?editpassword)和[http://mysite.com/edit.php?editname](http://mysite.com/edit.php?editname)可以提供完全不同的内容，但我该如何实现呢？

假设我想将这几行代码实现为 ?editpassword

```
Password
<input type="password" name="password">
<input type="submit"> 
```

这些行到 ?editname

```
Type your name
<input type="text" name="name">
<input type="submit"> 
```

我怎么能在一个可能包含的文件中做到这一点

```
<?php 
require "includes/head.php"; 
require "includes/nav.php";
if(!isset($_SESSION['login'])){
    header("Location: index.php");
}
?>

            <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
            <li class="nav-header">New</li>
              <li><a href="#">sss</a></li>

            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
          <div class="row-fluid">
            <div class="span9">
              <h2>Some header</h2>
              <p>Some text</p>
            </div><!--/span-->
          </div><!--/row-->
          <div class="row-fluid">
            ?editname & ?editpassword should appear here.
      </div><!--/row-->

            <?php require "includes/footer.php"; ?> 
```

类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T11:46:34.383

如果只有在is`?foo`中可用的整个查询字符串。`$_SERVER['QUERY_STRING']``"foo"`

使用 HTML 表单时，`method="GET"`您会获得键值对，然后可以通过`$_GET['key']`. 实际上，您在使用 POST 时也会收到这些对，但它们在 URL 中不可见，您可以通过`$_POST['key']`.

* * *

因此，假设您希望它完全简单并且不使用某些高级路由框架，您的代码将如下所示：

```
switch($_SERVER['QUERY_STRING']) {
    case 'editname':
        // do stuff
        break;
    case 'editpassword':
        // do stuff
        break;
    default:
        // do stuff if none of the cases matched
} 
```

**但我真的建议您使用正确的 GET 变量，而不仅仅是简单的查询字符串。**只需将剪断的第一行替换为：

```
$action = isset($_SERVER['QUERY_STRING']) ? $_SERVER['QUERY_STRING'] : '';
switch($action) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T11:48:36.053

在使用 URL 之后传递的任何内容`?`本质上都是一个“查询字符串”。传入的变量可以通过`$_GET[]`超全局在 PHP 内部访问。

假设在您的示例中，您`editname`单独`editpass`传入。然后，您可以使用以下代码处理此问题：

```
<?php
if(isset($_GET['editname']))
{
    // handle edit name code here (i.e. show form, etc.)
}
elseif(isset($_GET['editpass']))
{
    // handle edit pass code here
}
?> 
```

如果做不到这一点，您还可以使用`$_SERVER['QUERY_STRING']`数组值，它将返回出现在`?`. 如果您要使用许多不同的可能查询字符串，最好使用以下`switch()`语句：

```
switch($_SERVER['QUERY_STRING'])
{
    case 'editname':
        break;

    case 'editpass':
        break;

    default:
        // i.e. no query string.
        break;
} 
```

有时，您可能需要在查询字符串中传递多个变量，在这种情况下，变量由`&`. 您还可以使用通常的赋值运算符 ( `=`) 为变量赋值。例如，考虑以下 URL：

`view-user.php?id=1&action=view`

然后，我们可以访问`$_GET['id']`和`$_GET['action']`内部`view-user.php`，并根据需要处理所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:48:39.593

问号后面的所有值都是 http-get-parameters。您可以检查它们是否使用`if(isset($_GET['login'])) {}`. 您还可以使用 parameter=value 分配给这些参数值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T11:50:46.097

`?`标记第一个 URL 参数。您可以使用 . 添加其他 URL 参数`&`。

URL`http://example.com/index.php?foo=1`将导致

```
// index.php
echo $_GET['foo']; // outputs: 1 
```

网址`http://example.com/page.php?foo=2&bar=baz`

```
// page.php
echo $_GET['foo']; // outputs: 2
echo $_GET['bar']; // outputs: baz 
```

请记住，`&`in (X)HTML （正确）写为`&amp;`，因为它是保留字符。

所以，一个完整的例子 index.php：

```
<html><head><title>Example</title></head><body>
<?php
    if (isset($_GET['foo'])) {
        echo 'link was clicked '.$_GET['foo'].'x<br>';
        if (isset($_GET['bar'])) {
            echo 'foo is '.$_GET['bar'].'<br>';
        }
        $url = 'index.php?bar=world&amp;foo='.($_GET['foo'] + 1);
    } else {
        $url = 'index.php?foo=1&amp;bar=hello';
    }
    echo '<a href="'.$url.'">click me!</a><br>';
?>
</body></html> 
```

# linq - 更新前检查重复项

> ID：14424163
> 
> 赞同：1
> 
> 时间：2013-01-20T11:44:56.773
> 
> 标签：linq, entity-framework, c#-4.0

我有一个用于//主题信息的 Web UI，`add`并且`edit`这些`delete`数据保存在名为`Subject`. 在该表中，有诸如`Id(PK)`、`SubjectCode`、`SubjectName`等列`Tutor`...

*`Id`*field 是主键，总是唯一的。

*`SubjectCode`*是一个`varchar`应该是唯一的字段（值`CS1001`等）

插入和更新数据时，我已经使用`LINQ`(C#) 验证了唯一性，如下所示。

```
bool isCodeExist = DbContext.Subject.Any(record => record.SubjectCode == subject.SubjectCode);

if (true == isCodeExist )
{
    // SubjectCode is already exist. Do not proceed.
    return -1;
}
else
{
    // Proceed...
} 
```

这仅适用于插入。

有时更新时会出现错误，例如仅更新主题的导师姓名（或其他列）。感谢您对此的帮助。

**UPDATE**：更新操作的完整代码部分。

```
 public int EditSubject(Subject subject)
    {
        using (SMSEntities DbContext= new SMSEntities())
        {
            try
            {                    
                bool isCodeExist = DbContext.Subject.Any(record => record.SubjectCode == subject.SubjectCode);

                if (true == isCodeExist )
                {
                     // SubjectCode is already exist. Do not proceed.
                     return -1;
                }
                else
                {
                    // Create table object 
                    Subject theSubject = new Subject();

                    // Assign values from the domain entity obj from param
                    theSubject.SubjectCode = subject.SubjectCode;
                    theSubject.Tutor = subject.Tutor;       
                    theSubject.LastUpdatedDate = DateTime.Now;
                    // other value assignment also same....

                    // Save subject
                    DbContext.Subjects.Attach(theSubject);
                    DbContext.ObjectStateManager.ChangeObjectState(theSubject, EntityState.Modified);
                    DbContext.SaveChanges();

                    return 0;
                }
            }                
            catch (Exception)
            {
                // Log exception
                throw;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:26:24.833

如果仅用于更新，则在您的谓词中您也应该检查 Id，如下所示：

```
bool isCodeExist = DbContext.Subject.Any(record => 
                                         record.SubjectCode == subject.SubjectCode &&
                                         record.Id != subject.Id); 
```

## 更新：

但如果它是一个 UpdateOrInsert ：

```
public int EditSubject(Subject subject)
{
    using (SMSEntities DbContext= new SMSEntities())
    {
        try
           {                    
            var theSubject = DbContext.Subject.SingelOrDefault(record => record.SubjectCode == subject.SubjectCode);

            if (theSubject != null)
            {
                 // A subject with the same SubjectCode exists.
                 if(existingSubject.Id != Subject.Id)
                 {
                     //It's another subject.
                     return -1;
                 }// else it's the same Subject so we may want to update it.
            }
            else //Subject does not exist.
            {
                // Create table object 
                theSubject = new Subject();
            }
            // Assign values from the domain entity obj from param
            theSubject.SubjectCode = subject.SubjectCode;
            theSubject.Tutor = subject.Tutor;       
            theSubject.LastUpdatedDate = DateTime.Now;
            // other value assignment also same....

            // Save subject
            DbContext.Subjects.Attach(theSubject);
            DbContext.ObjectStateManager.ChangeObjectState(theSubject, EntityState.Modified);
            DbContext.SaveChanges();

            return 0;
        }                
        catch (Exception)
        {
            // Log exception
            throw;
        }
    }
} 
```

让我知道它是否有帮助。

# android - 带有父样式的Android自定义标题栏

> ID：14424164
> 
> 赞同：0
> 
> 时间：2013-01-20T11:45:17.130
> 
> 标签：android, android-layout

我已经设置了一个自定义标题栏，它工作正常，但在调用代码之前显示默认标题栏，我不想要这个。

[在这里](https://stackoverflow.com/questions/3157522/android-custom-title-bar/ "这里")，有人给出了从头开始定义新样式的解决方案。如果此自定义样式没有父样式，则它可以正常工作，但是如果您使用父样式，则会在我的前面显示之前的标题栏。

至于我在我的应用程序中使用 Theme.Light，我该如何解决这个问题？我应该在我的自定义样式中重写哪个参数来删除这个以前的标题栏？？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:46:55.180

改为使用`Theme.Light.NoTitleBar`，或将其用作您自己主题的父级。

# android - EditText 在屏幕旋转时改变颜色

> ID：14424165
> 
> 赞同：0
> 
> 时间：2013-01-20T11:45:24.057
> 
> 标签：android

我有一个采用 xml 颜色的 EditText。

`myr1.setTextAppearance(getApplicationContext(), R.style.myr_ok);`

我知道，当您旋转屏幕时，活动被破坏，并且我设法使用 onSaveInstanceState () 检索了一些数据（值、状态按钮），但我找不到如何检索编辑文本的颜色（可以是绿色或红色）并保持 . 是否可以使用 onSaveInstanceState () 或者我必须使用其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:54:11.277

您可以使用`getTextColors()`in`onSaveInstanceState`检索`TextView`. 或者，您可以保留一个变量来记住您上次设置的文本外观样式的资源 ID，并将其保存在`onSaveInstanceState`

# windows-8 - Windows 8 中的自定义应用程序磁贴不会一直出现

> ID：14424167
> 
> 赞同：0
> 
> 时间：2013-01-20T11:45:39.860
> 
> 标签：windows-8, microsoft-metro, tile

所以我使用下面的代码来创建一个简单的图块。在下面`this.InitializeComponent();`

 ````
 var tileCon = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquareBlock);
        var tileLines = tileCon.SelectNodes("tile/visual/binding/text");
        tileLines[0].InnerText = "hell";
        tileLines[1].InnerText = "hi";
        var notification = new TileNotification(tileCon);
        var updater = TileUpdateManager.CreateTileUpdaterForApplication();
        updater.Update(notification); </code> 
```

我第一次运行应用程序时，会出现磁贴。但是，如果我从 Metro UI 取消固定磁贴，无论我运行该应用多少次，它都不会再显示。但我希望它每次都添加一个新图块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:04:58.620

我认为您可能会混淆动态磁贴和辅助磁贴的概念。（更令人困惑的是，辅助磁贴也可以是活动的。）:) 上面的代码实现了“活动磁贴”的概念......将通知推送到现有磁贴以更新其文本/图像。

您声明要“每次都添加一个新图块”。从您的应用程序向“开始”菜单添加一个新磁贴是“辅助磁贴”的概念......它不是您的主应用程序的磁贴，而是一个附加磁贴，当启动时，它会将您直接带到特定的子部分你的申请。例如，在一个天气应用程序上，它有一个城市中心，然后是每个城市的天气详细页面，您可以为您所居住的城市（比如纽约市）的天气固定一个辅助磁贴。然后单击“开始”菜单中的该 NYC 辅助磁贴将启动应用程序并直接将您带到纽约市的天气页面（绕过中心页面）。

最后，没有最终用户的同意，我们无权创建额外的图块。因此，即使您实现了辅助磁贴代码，您也应该在创建新磁贴之前获得最终用户的确认。我无法想象你总是想在 InitializeComponent 中创建一个新图块的场景；你能提供更多关于你想要做什么的细节吗？

以下是一些带有代码示例的资源：

*   [真实世界动态磁贴：在 Windows 8 应用程序中使用动态磁贴](http://blogs.msdn.com/b/jennifer/archive/2012/11/20/real-world-live-tiles-working-with-live-tiles-in-windows-8-apps.aspx)

*   [真实世界的辅助磁贴：在 Windows 8 应用程序中使用辅助磁贴的三大技巧](http://blogs.msdn.com/b/jennifer/archive/2012/11/19/real-world-secondary-tiles-top-three-tips-for-working-with-secondary-tiles-in-windows-8-apps.aspx)

*   [在 30 天内构建 Windows 8 应用程序](http://aka.ms/Jen30TLWin8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:32:30.243

一旦用户取消固定磁贴，您的应用程序将无法以编程方式将其放回 - 由用户重新固定。`

# entity-framework - 实体框架：创建与自身的一对一关系

> ID：14424172
> 
> 赞同：4
> 
> 时间：2013-01-20T11:46:02.307
> 
> 标签：entity-framework, ef-code-first, code-first

我有实体联系人必须链接到自身而不是分层模式

```
public partial class Contact 
{
  [Key, Column(Order = 0)]
  public int AgentId { get; set; }
  [Key, Column(Order = 1)]
  public int ContactId { get; set; }
  public virtual Contact Opposite { get; set; }
  public ..... many other properties
} 
```

每个联系人都有相反的`Contact`链接`ON c1.AgentId = c2.ContactId AND c1.ContactId = c2.AgentId`。相反的接触是可选的，但当它存在时，它们是一对一的。不是亲子。此关系的名称必须是`Opposite`。我已经在`Contact`课堂上声明了财产。现在我正在尝试设置关系，但这不起作用，我觉得我不知道如何正确设置它。请指教？

```
public class EFDbContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        Action<ForeignKeyAssociationMappingConfiguration> mapKey = x => x.MapKey("ContactId", "AgentId");
        modelBuilder.Entity<Contact>().HasOptional<Contact>(c => c.Opposite).WithRequired().Map(mapKey);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:08:09.963

当您使用主键作为关系的外键时，该关系不能是*可选*的，因为主键不能有`NULL`值。外键将始终具有值 - 例如 ( `ContactId`= 1, = 2) - 如果 ( = 1, = 2) 的行不存在`AgentId`，则外键约束将被违反。`AgentId``ContactId`

但是对于必需的关系，您只能有成对的行，并且根本不可能将任何有意义的行插入到数据库表中，因为它总是会违反外键约束：要插入行（`AgentId`= 1，`ContactId`= 2）行（`AgentId`= 2, `ContactId`= 1) 必须存在，反之亦然。您可以插入的唯一可能的行是（`AgentId`= 1，`ContactId`= 1）之类的行，即`Opposite`联系人是联系人本身。

为了实现可选关系，您需要单独的外键：

```
public partial class Contact 
{
    [Key, Column(Order = 0)]
    public int AgentId { get; set; }
    [Key, Column(Order = 1)]
    public int ContactId { get; set; }

    [ForeignKey("Opposite"), Column(Order = 2)]
    public int? OppositeContactId { get; set; }
    [ForeignKey("Opposite"), Column(Order = 3)]
    public int? OppositeAgentId { get; set; }

    public virtual Contact Opposite { get; set; }

    //...
} 
```

这是一对多的关系。使用 Fluent API 而不是数据注释，它将是：

```
modelBuilder.Entity<Contact>()
    .HasOptional(c => c.Opposite)
    .WithMany()
    .HasForeignKey(c => new { c.OppositeContactId, c.OppositeAgentId }); 
```

在 EF 方面，您不能使其成为一对一的关系。您只能在数据库中的复合外键上添加唯一索引，以确保没有两个联系人具有相同的对立面。

# autofac - 不同项目中的 autofac mvc 区域

> ID：14424174
> 
> 赞同：2
> 
> 时间：2013-01-20T11:46:08.487
> 
> 标签：autofac, areas

我已经将我的 MVC4 应用程序分成多个区域，但使用单独的项目在每个模块项目（区域）中，我有一个模块来注册控制器

```
protected override void Load(ContainerBuilder builder)
        {
            var assembly = Assembly.GetExecutingAssembly();

            builder.RegisterControllers(assembly);
            builder.RegisterModelBinders(assembly);
            builder.RegisterModelBinderProvider();
            builder.RegisterFilterProvider();
        } 
```

我有一个控制器

```
public class SomeController : Controller {
        public SomeController (IDependency dependency){}
 } 
```

在全球主要项目中，我有这个：

```
 builder.RegisterAssemblyModules(); 
```

然后当我运行这个我得到这个错误：

```
No parameterless constructor provided. 
```

注册似乎没有发生。区域项目未在主项目中引用

我怎样才能注册它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:55:13.100

很可能（除了问题中提供的小代码片段之外，没有看到您的项目是如何设置和初始化的）这是 ASP.NET 无法正确定位要解析的类型的问题。

**确保您已在 BuildManager 中注册了插件程序集。**

[这篇博客文章应该可以帮助您到达您需要去的地方。](http://www.paraesthesia.com/archive/2013/01/21/putting-controllers-in-plugin-assemblies-for-asp-net-mvc.aspx)

# c# - c#/WPF - 获取 DPI - 矩阵返回 1

> ID：14424179
> 
> 赞同：0
> 
> 时间：2013-01-20T11:46:44.230
> 
> 标签：c#, wpf, matrix, dpi

我正在使用 C#/WPF 编写应用程序，并且正在尝试获取屏幕的 DPI。我正在尝试这样做：

```
Window MainWindow = Application.Current.MainWindow;
PresentationSource MainWindowPresentationSource = PresentationSource.FromVisual(MainWindow);
Matrix m = MainWindowPresentationSource.CompositionTarget.TransformToDevice;
MessageBox.Show(m.M11.ToString()); 
```

但是我得到的打印 m.M11 总是 1。为什么会这样，我怎样才能得到实际的 DPI（我猜是 96）？

# php - 使用 Mod_Rewrite 删除 GET 查询

> ID：14424181
> 
> 赞同：0
> 
> 时间：2013-01-20T11:46:53.590
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试`page.php?title=foo`更改为`/page/foo`. 我已经让它工作到 page.php 转到 /page/ 的地步，但是当我这样做时，`page.php?title=foo`它会将 url 重写为`/page/title?title=foo`.

我想删除`?title=foo`最后一个网址的一部分。有任何想法吗？

我对此很陌生-我尝试按照教程进行操作，但不确定`[OR]`and `[NC]`(etc) 是什么意思。

```
RewriteEngine on
RewriteCond %{QUERY_STRING}     ^$              [OR]
RewriteCond %{QUERY_STRING}     ^title=(.*)$    [NC]
RewriteRule ^page.php$       page/%1      [NC,L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:57:12.847

你可以这样做：

```
RewriteEngine on
RewriteRule page.php - [L]
RewriteRule ^page/(.*)$ page.php/?title=$1 // $1 - content of () 
```

因此，当用户询问时`http://example.com/page/foo`，Apache 会打开他`http://example.com/page.php/?title=foo`。但是地址栏还在`http://example.com/page/foo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:12:52.243

对于我所有的开发人员，我将所有请求转发到`index.php`，我排除所有 css、js、jp(e)g、pdf、zip 等。

**.htaccess**

```
DirectoryIndex  index.php
#ErrorDocument 404 /index.php?page=404
RewriteEngine on
RewriteCond %{REQUEST_URI}  !\.(.+)$
RewriteRule ^(.*)([^/])$ http://%{HTTP_HOST}/$1$2/ [L,R=301]
RewriteCond %{REQUEST_URI}  !\.(ico|docx|php|png|css|jpe?g|js|pdf|txt|mp3)$
RewriteRule ^(.*)$      index.php 
```

**然后在您的 PHP 启动代码**中，

设置 vars 以提供内容并`$_GET`在以后根据需要使用.... 示例：

```
<?php
function rewrite(){
$link = $_SERVER['REQUEST_URI'];    
    $params = array("base_url", "locale", "page", "action", "par1", "par2", "par3", "par4");
    $extraParams = preg_match("/\?/i", $link, $extraParamsMatches);
    if($extraParams){
        $link =  explode("?", $link);
        $link = $link[0];
    }
    $link = explode("/", $link);
    $i = 0;
    $vals = array();
    foreach($link as  $key => $value){
        if($params[$key] == "base_url") $value = $_SERVER['SERVER_NAME'];
        //if(empty($value)) continue ;
        $vals[$params[$key]] = $value;
        if($i == sizeof($params)-1){        
            break;
        }
    $i++;
    }
    return $vals;
}
}    
?> 
```

**重要** 的是，您可以编辑此代码以提高安全性，例如在函数中使用之前清理数据；-) 如果在物理上或从 php 或数据库的数组中找不到请求的页面，您可以发送`header('Location : ',true, 404);`并提供您的 404 页面！

# java - 如何立即停止其他线程执行？

> ID：14424186
> 
> 赞同：2
> 
> 时间：2013-01-20T11:47:23.730
> 
> 标签：java, multithreading

> **可能重复：**
> [如何从java中的另一个线程立即杀死一个线程？](https://stackoverflow.com/questions/4530744/how-to-kill-a-thread-immediately-from-another-thread-in-java)
> [如何正确停止Java中的线程](https://stackoverflow.com/questions/10961714/how-to-properly-stop-the-thread-in-java)

我需要一种方法来按时停止另一个线程执行，我的意思是没有任何延迟，例如，当用户单击一个按钮时，线程**立即**停止它的执行（不重要在做什么）。

我认为一种方法是通过 an 提交该 Runnable 类，`ExecutorService`并在需要时取消返回的 Future 。在另一边，我必须检查`Thread.currentThread.isInterrupted()`，如果这是真的，线程返回。

但它有一个问题，它不能立即工作。有更好的主意吗？

# java - 图像列表 J2ME

> ID：14424191
> 
> 赞同：1
> 
> 时间：2013-01-20T11:47:46.443
> 
> 标签：java, java-me, lcdui, j2mepolish

嗨，我想在 j2me 中显示带有字符串的图像列表，下面是我的代码

![在此处输入图像描述](../Images/1f25d562b9c849a9cedf069b0819f8c5.png)

```
 public ListImage() {
    try {
        for (int i = 0; i < 2; i++)
            img[i] = Image.createImage("/res/flag_" + i + ".png");

    } catch (Exception e) {
        System.err.println(e.getMessage());
    }
} 
```

在这里你可以看到图像在 res 文件夹中，我正在使用 /res/flag_ 访问图像，但我仍然收到 Null Pointer Exception 错误

```
 Using Untrusted simulated domain
 Cannot read /res/flag_0.png
java.lang.NullPointerException
 at ListImage.startApp(+12)
at javax.microedition.midlet.MIDletProxy.startApp(+7)
 null
null
null
java.lang.NullPointerException
at ListImage.startApp(+12)
at javax.microedition.midlet.MIDletProxy.startApp(+7)
null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:45:51.250

在`J2ME`中，`res`是任何图像、数据等文件的*资源目录。*它的路径是`root (/)`默认的。因此不需要在路径中使用它的名称`/res/MyImage.png`。而是将其称为`/MyImage.png`.

**示例**：

```
Image img = Image.createImage( "/MyImage.png" ); 
```

**参考**：

1.  [使用 EclipseME 开发 J2ME 应用程序](https://www6.software.ibm.com/developerworks/education/wi-nokia/wi-nokia-a4.pdf)
2.  [J2ME 教程：使用 MIDP 2.0 的用户界面](http://today.java.net/pub/a/today/2005/05/03/midletUI.html)
3.  [在 J2me 应用程序中我在哪里放置图像](http://www.coderanch.com/t/473466/JME/Mobile/put-images-application)

# symfony - symfony2 树枝变量

> ID：14424193
> 
> 赞同：1
> 
> 时间：2013-01-20T11:48:12.760
> 
> 标签：symfony, twig

我正在尝试更改css链接的href属性。问题是它没有显示`{{app.user.tema}}`引号问题的变量。

```
{% block tema%}
   {% if app.user.tema %}
     <link id = "hojaestilo" rel = "stylesheet" type = "text / css" href = "{{asset ('bundles / appapp / css / themes / {{app.user.tema}} / jquery-wijmo.css')}} "media =" screen ">
    {% endif %}
{% endblock %} 
```

我得到的错误是：

> 参数必须用逗号分隔。`","`第 9 行 appappBundle:Default:index.html.twig 中的值“{”的意外标记“标点符号”（“标点符号”应为 value ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:06:36.683

用 ~ 连接变量和字符串可能有效：

```
 <link id = "hojaestilo" rel = "stylesheet" type = "text/css" href = "{{asset ('bundles/appapp/css/themes/' ~ app.user.tema ~ '/jquery-wijmo.css')}}" media ="screen"> 
```

# constructor - 在 Dojo 中编写自己的 MenuBar

> ID：14424194
> 
> 赞同：1
> 
> 时间：2013-01-20T11:48:26.093
> 
> 标签：constructor, dojo, menubar

我正在尝试稍微整理一下我的代码，因此我想做的一个步骤是将我的声明性标记从导航菜单栏转换为程序化标记。我只是想扩展 dijit/MenuBar 类并在其中添加我的功能。这是到目前为止的样子：

```
define([ "util/debugger", "dojo/_base/declare", "dojo/_base/lang", "dojo/on",
    "dojo/ready", "dijit/MenuBar", "dijit/PopupMenuBarItem",
    "dijit/MenuItem", "dijit/DropDownMenu" ], function(debug, declare,
    lang, on, ready, MenuBar, PopupMenuBarItem, MenuItem, DropDownMenu) {
return declare("navMenu", [ MenuBar ], {

    constructor : function(kwArgs) {
        debug.log("constructor called", "navMenu.constructor()", 1);
        lang.mixin(this, kwArgs);
        /* Ansicht */
        var subMenuAnsicht = new DropDownMenu({});
        var item_showFilterBar = new MenuItem({
            label : "Filterleiste anzeigen"
        });
        subMenuAnsicht.addChild(item_showFilterBar);
        // [...]
        var test = new PopupMenuBarItem({
            label : "Ansicht",
            popup : subMenuAnsicht
        });
//---------
        this.addChild(test); // <==== this is where dojo says "c is null"
//---------         
        /* Hilfe */
        var subMenuHelp = new DropDownMenu({});
        var item_showVersion = new MenuItem({
            label : "Versionsinfo"
        });
        on(item_showVersion, "click", clickVersionInfo);
        subMenuHelp.addChild(item_showVersion);
        // [...]
        this.addChild(new PopupMenuBarItem({
            label : "Hilfe",
            popup : subMenuHelp
        }));
        /* Meine Einstellungen */
        var subMenuMySettings = new DropDownMenu({});
        var item_showMySettings = new MenuItem({
            label : "Meine Einstellungen"
        });
        subMenuMySettings.addChild(item_showMySettings);
        // [...]
        this.addChild(new PopupMenuBarItem({
            label : "Meine Einstellungen",
            popup : subMenuMySettings
        }));
        /* Administration */
        // if (sessionHandler.getPermission == "admin") {
        var subMenuAdmin = new DropDownMenu({});
        var item_showUserManager = new MenuItem({
            label : "Userverwaltung"
        });
        subMenuAdmin.addChild(item_showUserManager);
        // [...]
        this.addChild(new PopupMenuBarItem({
            label : "Administration",
            popup : subMenuAdmin
        }));
        // }
        this.placeAt("navMenu");
        this.startup();
    } // [...]
})}); 
```

不幸的是，我收到一条错误消息“c is null”。我想继承的 addChild 方法上的 this-function-call 可能有问题。

有人有想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:29:04.660

添加子小部件的逻辑应该在`postCreate`方法中完成。以下链接将使您更好地了解小部件的生命周期。

[http://dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/](http://dojotoolkit.org/documentation/tutorials/1.6/understanding_widget/)

```
postCreate: function() {
  this.inherited(arguments);

  /* Ansicht */
  ...

  /* Hilfe */
  ...

  etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:14:03.843

为什么不尝试 dojo.extend 并仅提供您想要覆盖的那些功能的定义或提供 dojo.extend 的新功能[视图](http://dojotoolkit.org/reference-guide/1.7/dojo/extend.html)

# matlab - 如果第一个变量 x 没有出现，我如何评估 x0=(0,0) 中的矩阵？

> ID：14424196
> 
> 赞同：0
> 
> 时间：2013-01-20T11:48:27.160
> 
> 标签：matlab

我为“矢量函数的 Newton-Raphson 方法”制作了一个程序。

假设我有这个功能`f(x,y)=(x-y,x+y^2)`。雅可比矩阵是`[1,-1;1,2*y]`。然后我输入`r=symvar(jacobian)`并评估它，我使用`subs(jacobian,r,x0)`.

`x0=(0,0)`如果第一个变量`x`没有出现，我如何评估矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:59:10.420

我正在为你为什么试图让你（和我）的生活复杂化而摸不着头脑。

1.  您不需要计算 jacobian：Matlab 使用`jacobian`函数为您计算（首先您必须从工作区中删除 jacobian 变量实例）

    ```
    jak = jacobian(f); 
    ```

2.  接下来，您可以使用该`eval`功能进行投标：

    ```
    x = 0, y = 0;
    eval(jak)

    ans =

      1.00         -1.00
      1.00             0 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:26:40.953

如果 x 没有出现在 jacobian 的表达式中，则意味着它的值不会影响得到的 jacobian。

如果您的问题是如何评估：

```
[1,-1;1,2*y] 
```

当 x 和 y 都等于 0 时，答案很简单：

```
[1,-1;1,2*0] 
```

归结为：

```
[1,-1
 1, 0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:00:48.377

正如其他用户已经建议的那样，您可以遵循此替代解决方案

```
syms x y
jacobian([x - y,x + y.^2]) 
```

对于评估，`x = 0`只需输入

```
subs(jacobian([x - y,x + y.^2]),0) 
```

我希望这有帮助。

# symfony - symfony2 在测试环境中表现：未创建数据库表

> ID：14424203
> 
> 赞同：1
> 
> 时间：2013-01-20T11:49:04.507
> 
> 标签：symfony, behat, mink

我正在尝试模仿我的应用程序，但我遇到了一个大问题；没有创建数据库表，所以我不能放置任何固定装置。

我的情况是：

```
 Scenario: Check the stories page
    Given Database is set
      And I am logged as "admin" and password "123123123"
      And print last response
      ... 
```

FeatureContext 的一部分：

```
/**
 * @Given /^Database is set$/
 */
public function databaseIsSet()
{
    $this->generateSchema() ;
    $admin = new User() ;
    $admin->setRoles(array(User::ROLE_SUPER_ADMIN)) ;
    $admin->setEnabled(true) ;
    $admin->setUsername("admin") ;
    $admin->setPlainPassword("123123123") ;
    $admin->setEmail("admin@mysite.com") ;
    $em = $this->getEntityManager() ;
    $em->persist($admin) ;
    $em->flush() ;
            echo $admin->getId() . "==" ;
    echo "db set" ;
}
/**
 * @Given /^I am logged as "([^"]*)" and password "([^"]*)"$/
 */
public function iAmLoggedAsAndPassword($username, $password)
{
    return array(
        new Step\When('I am on "/login"'),
        new Step\When('I fill in "username" with "' . $username . '"'),
        new Step\When('I fill in "password" with "' . $password . '"'),
        new Step\When('I press "Login"'),
    );
}
protected function generateSchema()
{
    // Get the metadatas of the application to create the schema.
    $metadatas = $this->getMetadatas();

    if ( ! empty($metadatas)) {
        /**
        * @var \Doctrine\ORM\Tools\SchemaTool
        */
        $tool = new SchemaTool($this->getEntityManager());
//            $tool->dropDatabase() ;
        $tool->createSchema($metadatas);
    } else {
        throw new Doctrine\DBAL\Schema\SchemaException('No Metadata Classes to process.');
    }
}

/**
 * Overwrite this method to get specific metadatas.
 *
 * @return Array
 */
protected function getMetadatas()
{
    $result = $this->getEntityManager()->getMetadataFactory()->getAllMetadata() ;return $result;
}

protected function getEntityManager()
{
    return $this->kernel->getContainer()->get("doctrine")->getEntityManager() ;
}
 .... 
```

的代码`generateSchema`取自互联网的某个地方，并在我拥有的 Phpunits 测试中使用并且运行良好。

但; 当我跑步时`bin/behat`，我得到

```
 SQLSTATE[HY000]: General error: 1 no such table: tbl_user 
```

登录部分场景后。

我的`echo`语句也显示在输出中，只是为了确保该方法实际执行。此外，$admin 的 ID 为 1，这在输出中也可见。

我的测试环境使用默认的sqlite DB，如果我在配置中放置`'http://mysite.local/app_dev.php/'`或`'http://mysite.local/app_test.php/'`用于base_url，则无关紧要；尽管我从 knpLabs 页面复制并粘贴了登录，但登录不起作用。为了确保 $admin 仍在数据库中，我尝试从存储库重新加载它并且它可以工作（我删除了那部分代码）。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:37:47.387

其实我发现了问题。Sqlite 在内存中工作，每次请求某个页面（如`login`url）时，先前的状态都已丢失。我在`app_behat.php`以下设置中创建了新环境`config_behat.yml`：

```
imports:
  - { resource: config.yml }

framework:
  test: ~
  session:
    storage_id: session.storage.mock_file

doctrine:
  dbal:
    dbname:   other_database 
```

现在可以了。也许有人会发现这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T15:34:49.847

我有同样的问题，对我来说问题出在`config_test.yml`文件中。

我`pdo_sqlite`改为`pdo_mysql`.

```
doctrine:
    dbal:
        driver: pdo_mysql
#        driver:   pdo_sqlite 
```

它就像一个魅力。

# jquery - 通过jquery检索多复选框值

> ID：14424209
> 
> 赞同：0
> 
> 时间：2013-01-20T11:49:35.237
> 
> 标签：jquery, ajax, checked

我在网上搜索和堆栈，但我找不到解决我的问题的方法，所以我希望有人可以帮助我我有一个同名的多复选框“shopitem []”，我想检查复选框是否被选中将它们的值作为数组发送，如“1,3,5,7”到带有 ajax 的 php 代码

这是我的代码：

```
<form id="ShopItemForm" class="ShopItemForm" method="post" name="ShopItemForm">
    <input class="ShopItem" checked="checked" name="ShopeItem[]" id="1" value="1" type="checkbox">1
    <input class="ShopItem" name="ShopeItem[]" id="2" value="2" type="checkbox">2
    <input class="ShopItem" checked="checked" name="ShopeItem[]" id="3" value="3" type="checkbox">3
    <input class="ShopItem" name="ShopeItem[]" id="4" value="4" type="checkbox">4
    <input class="ShopItem" name="ShopeItem[]" id="5" value="5" type="checkbox">5

    <input name="submitShopItem" value="submit" class="button button-push" id="submitShopItem" type="submit">
</form>

    $(function() {
    $("#submitShopItem").click(function(e) {
                    e.preventDefault();
                    // put all checked box to array checkedArray
                    var shopItem = 
                    $("#shop-item-Loader").html('');
                    $("#shop-item-Loader").html('load');
                    $.ajax({
                            type: "POST",
                            url: "checked.php",
                            data: "act=shopItem&ShopItem="+checkedArray,
                            cache: false,
                            success: function(html){
                                alert(checkedArray);
                                $("#shop-item-Loader").html('');
                                $("#shop-item-Loader").append(html);
                            }
                    });
                });
            }); 
```

**我想将所有新的检查值发送到 ajax 页面，如逗号分隔的字符串**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:02:11.600

看到这个：http: [//jsfiddle.net/Q2Kdt/](http://jsfiddle.net/Q2Kdt/)

```
 $(function () {
 $("#submitShopItem").click(function (e) {
     e.preventDefault();
     var result = "";
     $('input[type=checkbox]').each(function (e) {
         if ($(this).is(':checked')) result = result + $(this).val() + ", ";
     });
     alert(result);
 });
 }); 
```

或按名称本身检查：http: [//jsfiddle.net/Q2Kdt/2/](http://jsfiddle.net/Q2Kdt/2/)

```
$(function () {
 $("#submitShopItem").click(function (e) {
     e.preventDefault();
     var result = "";
     $("input[name*='ShopeItem[]']").filter(':checked').each(function (e) {
        result = result + $(this).val() + ", ";
     });
     alert(result);
 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:03:38.983

```
var checkedArray = $("#ShopItemForm").find(":checked").map(function() {
    return this.value;
}).get();

console.log(checkedArray); 
```

[例子](http://jsfiddle.net/qB7M3/)

**编辑**
正如@DavidThomas 和问题的最后一句话所建议的那样：要获取已检查元素的逗号分隔字符串，您必须`.join()`调用`checkedArray`

```
checkedArray.join(); 
```

像这里一样使用时

```
data: "act=shopItem&ShopItem="+checkedArray, 
```

这是自动完成的

# java - 在没有构造函数的情况下使用另一个类的方法

> ID：14424212
> 
> 赞同：0
> 
> 时间：2013-01-20T11:50:04.930
> 
> 标签：java, methods, constructor

我正在尝试使用另一个类的方法，但我认为我不能真正使用构造函数，这里是第一个类：

```
public class Rules {
    public Rules(int size) {
        //body
    }

    public void methodINeed() {

    }
} 
```

我想在我的第二堂课中使用其中的方法，但是因为如果我使用构造函数，我必须给出一个 int，这基本上会搞砸我的计算，我不知道该怎么做，我的这里的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:53:52.920

只需创建另一个空构造函数：

```
public class Rules{
  public Rules(int size){
    //body
  }

 public Rules()
 {
    //body
  }

  public void methodIneed(){

  }
} 
```

然后访问您需要的方法，

```
Rules x = new Rules();
x.methodINeed(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:52:37.330

如果将这些方法声明为静态，则可以访问其他类的方法而无需构造它们：

```
public class Rules{
  public Rules(int size){
    //body
  }
  public static void methodIneed(){

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:31:50.407

我认为你必须审查你的类的设计，为什么在地球上你必须调用其他类中的方法来进行计算？？？

可能的解决方案：

*   混合两个班级
*   添加第三个类（例如 Helper 类）并调用 HelperClass.calculateForMe(sth)

# java - 在构造函数中初始化公共静态最终变量

> ID：14424215
> 
> 赞同：4
> 
> 时间：2013-01-20T11:50:35.507
> 
> 标签：java, initialization, constants, manifest, static-classes

我正在尝试`Version`为我的应用程序创建一个类，该类将在加载时从清单中读取版本号，然后仅`Version.MAJOR`在其他地方需要它时引用例如等。但是，我在这样做时遇到了问题。这是我当前的代码：

```
 public class Version {

    public static final int APPCODE;
    public static final int MAJOR;
    public static final int MINOR;
    public static final char RELEASE;
    public static final int BUILD;

    static {

        try {
            Class clazz = Version.class;
            String className = clazz.getSimpleName() + ".class";
            String classPath = clazz.getResource(className).toString();
            if (classPath.startsWith("jar")) {
                String manifestPath = classPath.substring(0, classPath.lastIndexOf("!") + 1) + "/META-INF/MANIFEST.MF";
                Manifest manifest = new Manifest(new URL(manifestPath).openStream());
                Attributes attr = manifest.getMainAttributes();
                APPCODE = Integer.parseInt(attr.getValue("APPCODE"));
                MAJOR = Integer.parseInt(attr.getValue("MAJOR"));
                MINOR = Integer.parseInt(attr.getValue("MINOR"));
                RELEASE = attr.getValue("RELEASE").charAt(0);
                BUILD = Integer.parseInt(attr.getValue("BUILD"));
            }
        } catch (IOException e) {
            System.exit(9001);
        }
    }
} 
```

它不会编译，因为`static final`变量可能没有被初始化（例如，如果加载了错误的清单或加载它时出现异常），我无法弄清楚执行此操作的正确过程是什么。

阅读[这个](https://stackoverflow.com/questions/10047802/public-static-final-or-private-static-final-with-getter)问题给了我一些不使用的见解`public static final`。我应该使用`public static`getter 方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T11:59:11.407

如果您确保始终只为`final`字段分配一次，编译器会很高兴：

```
public class Version {

    public static final int APPCODE;
    public static final int MAJOR;
    public static final int MINOR;
    public static final char RELEASE;
    public static final int BUILD;

    static {
        int appcode = 0;
        int major = 0;
        int minor = 0;
        char release = 0;
        int build = 0;
        try {
            Class clazz = Version.class;
            String className = clazz.getSimpleName() + ".class";
            String classPath = clazz.getResource(className).toString();
            if (classPath.startsWith("jar")) {
                String manifestPath = classPath.substring(0,
                        classPath.lastIndexOf("!") + 1)
                        + "/META-INF/MANIFEST.MF";
                Manifest manifest = new Manifest(
                        new URL(manifestPath).openStream());
                Attributes attr = manifest.getMainAttributes();
                appcode = Integer.parseInt(attr.getValue("APPCODE"));
                major = Integer.parseInt(attr.getValue("MAJOR"));
                minor = Integer.parseInt(attr.getValue("MINOR"));
                release = attr.getValue("RELEASE").charAt(0);
                build = Integer.parseInt(attr.getValue("BUILD"));
            }
        } catch (IOException e) {
            System.exit(9001);
        }
        APPCODE = appcode;
        MAJOR = major;
        MINOR = minor;
        RELEASE = release;
        BUILD = build;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:56:17.457

我会：

*   删除最终修饰符
*   降低从公共到私人的可见性。
*   为所需字段提供（静态）getter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:59:14.863

如果您使用`public final`字段，则必须分配默认值，因为它们是常量。将可见性更改为私有并删除 final 修饰符并提供 getter/setter。这应该是解决您的问题的最佳方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:21:52.813

您可以从 Version 类中删除处理读取清单的代码块并将其放入单独的类中 - 例如 (ManifestReader) - 并使用构造函数中的实际值直接初始化版本实例。

我会将“public static final”更改为“private final”（不是静态的），因为如果您有多个版本类的实例，则所有实例都必须有自己的应用程序代码、主要次要等！

除了提供 getter() 来访问私有 final 字段！

# perl - 为什么要为子进程执行 else 块？

> ID：14424218
> 
> 赞同：0
> 
> 时间：2013-01-20T11:50:53.633
> 
> 标签：perl, process, fork, child-process, waitpid

这是一个带有[fork](http://perldoc.perl.org/functions/fork.html)和[waitpid](http://perldoc.perl.org/functions/waitpid.html)的程序。

```
#!/usr/bin/perl
use strict;
use warnings;
my ($childProcessID, $i);

print "I AM THE ONLY PROCESS.\n";

$childProcessID = fork ();

if ($childProcessID){
        print "I am the parent process.\n";
        print "I spawned a new process with ID $childProcessID\n";
        waitpid ($childProcessID, 0);
        print "The child process is terminated with status $?\n";
    }
else{
    for ($i = 0; $i <= 10; $i++){
         print "I am the child process: Counting $i\n";
    }
} 
```

输出可能如下所示。

```
I AM THE ONLY PROCESS.
I am the parent process.
I spawned a new process with ID 7610
I am the child process: Counting 0
I am the child process: Counting 1
I am the child process: Counting 2
I am the child process: Counting 3
I am the child process: Counting 4
I am the child process: Counting 5
I am the child process: Counting 6
I am the child process: Counting 7
I am the child process: Counting 8
I am the child process: Counting 9
I am the child process: Counting 10
The child process is terminated with status 0 
```

现在有许多关于网络和书籍的类似程序`fork`，也就是说

> if 块中的代码由父进程执行，else 中的代码由子进程执行。waitpid 用于等待孩子完成。

我的问题是

**如何以及为什么为子进程执行 else 块？**我知道 fork 已经创建了新的子进程。但是在 fork 语句之后如何执行 child（即 else 块）？有人可以逐步向我解释子进程，或者更深入地了解我缺少的东西，例如为什么子进程不执行下面的语句？

```
print "I AM THE ONLY PROCESS.\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T11:57:13.347

*Fork在执行时*将当前进程一分为二。两个进程在 fork 调用之后继续执行。

^*两个结果进程之间唯一的区别是，一个（父进程）`fork()`返回子进程的 PID，而另一个进程（子进程）`fork()`返回零。

因此，在父级中，变量为`$childProcessID`非零并采用分支`if`，而在子级中，变量为零并`else`执行分支。

[^*可能不是真正的迂腐真实。]

# c - 我如何从标准输入读取一行数字并计算它们的平均值？

> ID：14424219
> 
> 赞同：2
> 
> 时间：2013-01-20T11:51:00.237
> 
> 标签：c

如何从标准输入中计算和提取一些元素？

例如， len() 在 Python 中很容易使用，但在 C 中不可用？

我试图计算平均值，当用户输入例如：1 3 5 7 8 10 11 -1

我尝试了以下方法：

```
while (user_input != -1)
{
    total   += user_input;
    scanf ("%d", &user_input);

    //cannot work               
    average = total /  ...
}       
printf("Average = %f\n", average); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:01:25.797

你必须维护一个计数器来做你想做的事情。它只是`int counter = 0;`在循环中：`counter++`

```
int counter = 0;
while (user_input != -1)
{
    total   += user_input;
    counter ++;
    scanf ("%d", &user_input);
}       
average = total / counter;
printf("Average = %f\n", average); 
```

显然，您必须检查是否`scanf()`至少返回 1

--- 编辑 --- 以下程序（对应于前一个程序）是有效的并按要求工作。不了解如何`scanf()`工作的人应该远离该死的：

```
#include <stdio.h>

int main(int argc, char *argv[])
{
   int total = 0;
   float average = 0.0f;
   int userinput = 0;
   int counter = -1;
   while(userinput != -1){
      counter ++;
      if(scanf("%d",&userinput) == 1 && userinput != -1){
         total += userinput;
      }
   }
   average = ((float)total/(float)counter);
   printf("Average = %f", average);
   return 0;
} 
```

输入：`10 20 30 40 50 60 -1` 输出：`Average = 35`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:54:45.957

从您修改后的问题和评论中，您似乎真正想做的是从用户那里读取一行输入，然后从该输入行中提取数字。
答案是您不能使用 来做到这一点`scanf`，您需要使用`fgets`从中读取该行`stdin`，然后您需要从该读取行中提取数字。这是一个
**[快速示例程序](http://ideone.com/KacsyH)**：

```
#include<stdio.h>
int main()
{
    char line[1024], *beg, *end;
    long readvalue;
    while (fgets(line, sizeof(line), stdin)) 
    {
        beg = line;
        for (beg = line; ; beg = end) 
        {
            readvalue = strtol(beg, &end, 10);
            if (beg == end)
                break;
                printf("[%d]",readvalue);
        }
    }
    return 0;
} 
```

**输入：**

```
1 3 5 7 8 10 11 -1 
```

**输出：**

```
[1][3][5][7][8][10][11][-1] 
```

# .net - 从 .Net Frameworkf v.4.0 到 4.5 还发生了哪些其他无声的变化？

> ID：14424221
> 
> 赞同：7
> 
> 时间：2013-01-20T11:51:14.147
> 
> 标签：.net, .net-4.0, task-parallel-library, .net-4.5

我们想切换到 .net 4.5，因为它提供了许多改进。

但是……有时我会发现一些关于框架中非平凡更改的棘手细节。

让我们以 TPL 未观察到的[异常处理](http://msdn.microsoft.com/en-us/library/dd997415.aspx)为例：

> 如果您不等待传播异常的任务或访问其 Exception 属性，则在对任务进行垃圾收集时，将根据 .NET 异常策略升级异常。（注意，“例外政策”一词没有链接或说明）

好吧，这似乎是 .Net v.4.0 中的行为

但斯蒂芬图布[告诉我们更多](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx)：

> 为了使开发人员更容易编写基于任务的异步代码，.NET 4.5 更改了未观察到的异常的默认异常行为。虽然未观察到的异常仍会导致引发 UnobservedTaskException 事件（不这样做将是一项重大更改），但默认情况下进程不会崩溃。相反，无论事件处理程序是否观察到异常，异常最终都会在事件引发后被吃掉。但是，可以配置此行为。新的 CLR 配置标志可用于恢复到 .NET 4 的崩溃行为。
> 请注意，此更改并不意味着开发人员应该粗心忽略未处理的异常……它只是意味着运行时比使用时更宽容成为。

这是一个很大的惊喜。考虑到文档中没有更新。

所以，我想知道 .Net v4.5 中发生的其他“无声”变化，
请分享你的知识。

PS 这里的“沉默”一词是指从 Wat 的新[文章](http://blogs.msdn.com/b/pfxteam/archive/2011/09/17/10212961.aspx)甚至官方文档中几乎不知道的变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T19:36:28.197

[.NET Framework 重大更改文档](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx)对此进行了说明（以及更多内容！）。

# c# - 在 XML 解析中没有 nullReferenceException

> ID：14424227
> 
> 赞同：0
> 
> 时间：2013-01-20T11:51:55.020
> 
> 标签：c#, linq, windows-phone-7, xml-parsing, linq-to-xml

我编写了 ac# 函数来解析 XML 流。我的 XML 可以有多个节点。

例子 ：

```
<Stream>
 <One>nnn</One>
 <Two>iii</Two>
 <Three>jjj</Three>
</Stream> 
```

但有时，它是：

```
<Stream>
 <Two>iii</Two>
</Stream> 
```

这是我的 C# 代码：

```
var XML = from item in XElement.Parse(strXMLStream).Descendants("Stream") select item;
string strOne = string.Empty;
string strTwo = string.Empty;
string strThree =  string.Empty;

if ((item.Element("One").Value != "")
{
   strOne = item.Element("One").Value;
}

if ((item.Element("Two").Value != "")
{
   strTwo = item.Element("Two").Value;
}

if ((item.Element("Three").Value != "")
{
   strThree = item.Element("Three").Value;
} 
```

使用此代码，如果我的 Stream 已满（Node On、2 和 3），就没有问题！但是，如果我的 Stream 只有节点“Two”，我会得到一个`NullReferenceException`.

有没有办法避免这个异常（我不能改变我的流）。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:58:19.007

你需要做：

```
if (item.Element("One") != null)
{
   strOne = item.Element("One").Value;
} 
```

`.Element(String)``null`如果您请求的名称的元素不存在，则返回。

检查值`!= ""`是否毫无意义，因为您所阻止的只是将空字符串重新分配给`strOne`已经是空字符串的变量。此外，如果您确实需要进行空字符串检查，则使用`String.IsNullOrEmpty(String)`方法是首选方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:02:27.777

您应该在访问它的属性之前检查是否`item.Element("anything")`是。`null``Value`

```
if (item.Element("Three") != null && item.Element("Three").Value != "") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:36:24.700

而不是访问属性（如您所知，如果元素不存在`Value`则引发）将元素转换为字符串。`NullReferenceException`您可以使用`??`为不存在的元素提供默认值：

```
string strOne = (string)item.Element("One") ?? String.Empty;
string strTwo = (string)item.Element("Two") ?? String.Empty;
string strThree =  (string)item.Element("Three") ?? String.Empty; 
```

# delphi - 在 DataModule 上使用函数

> ID：14424240
> 
> 赞同：3
> 
> 时间：2013-01-20T11:54:18.797
> 
> 标签：delphi, delphi-xe2

我有一个数据模块 (TfDB) 我想向它添加这个函数

```
 Function GetZone(zone :string):string; 
```

当我尝试运行它时，我得到了这个错误......外部声明不满意：TfDB.GetZone

```
unit MyDataModule;

interface

uses
  System.SysUtils, System.Classes, Data.DB, Data.Win.ADODB;

type
  TfDB = class(TDataModule)
    dbconnection: TADOConnection;
  private
    { Private declarations }
  public
          Function GetZone(zone :string):string;
  end;

var
  fDB: TfDB;

implementation

{%CLASSGROUP 'System.Classes.TPersistent'}

{$R *.dfm}

  Function GetZone(zone:string):string;
  begin
  if zone = 'FLayout1' then
        result := '1';
  if zone = 'FLayout2' then
      result := '2';
  if zone = 'FLayout3' then
      result := '3';
  if zone = 'FLayout4' then
      result := '4' ;
  if zone = 'FBoneYard' then
      result := 'BoneYard';
  if zone = 'FShop' then
      result := 'shop';
  if zone = 'FMisc' then
      result := 'Misc' ;
  end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T11:56:12.770

在实现部分，您需要将函数声明为类的方法：

```
function TfDB.GetZone(zone:string):string;
begin
  ....
end; 
```

您的声明如下所示：

```
function GetZone(zone:string):string;
begin
  ....
end; 
```

这定义了一个独立的函数而不是类的方法。

# achartengine - 使用微调器和 achartEngine 库在同一活动中生成不同的图表

> ID：14424242
> 
> 赞同：1
> 
> 时间：2013-01-20T11:54:31.747
> 
> 标签：achartengine

我是 android 新手，我正在使用 achartEngine 库来绘制折线图。我想要做的是使用微调器更新图表。例如，如果我选择第一个选项，我将得到一个黄色图表，当
我在微调器中切换到第二个选项时，图表会更改并变为白色，并带有新的标题和数据

目前我只能更新数据，但不能更新图表的其余部分

```
package com.example.test2;

import java.text.Format;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.List;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.SeriesSelection;
import org.achartengine.model.TimeSeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.example.test2.R;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class Graphique  extends Activity {

private GraphicalView mChart1;
private GraphicalView mChart2;

private TimeSeries glecimieSeries ;
private TimeSeries pressionSeries;
private XYMultipleSeriesDataset dataset;

private XYSeriesRenderer glecimieRenderer;
private XYSeriesRenderer pressionRenderer;
private XYMultipleSeriesRenderer multiRenderer;

// Progress Dialog
    private ProgressDialog pDialog;

// Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> listeappareil;

    // url to get all products list
    private static String url_liste_appareil ;

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static String TAG_APPAREIL;
    private static final String TAG_PID = "pid";
    private static final String TAG_NOM = "nom";
    private static final String TAG_J = "jour";
    private static final String TAG_Y = "Y";

    // products JSONArray
    JSONArray appareil = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.graphique);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String pid = in.getStringExtra(TAG_PID);
    String nom = in.getStringExtra(TAG_NOM);

    // Displaying all values on the screen
    TextView lblNom = (TextView) findViewById(R.id.nom_patient);
    lblNom.setText(nom);

    Spinner mySpinner = (Spinner)findViewById(R.id.mesure);
    ArrayAdapter adapter = ArrayAdapter.createFromResource(this, R.array.appareils, android.R.layout.simple_spinner_item);    
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);    
    mySpinner.setAdapter(adapter);

    OnItemSelectedListener selectedGraph = new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> spinner, View container,
                int position, long id) {
            String graph = spinner.getItemAtPosition(position).toString().toLowerCase();

            if(graph == "tensiometre"){
                url_liste_appareil = "http://10.0.2.2/connexion_android/"+graph+".php";
                TAG_APPAREIL = graph;
                // Setting up chart
                setupChart2();
                // Start plotting chart
                new ChartTask2().execute();     
        }else{

            url_liste_appareil = "http://10.0.2.2/connexion_android/"+graph+".php";
            TAG_APPAREIL = graph;
            // Setting up chart
            setupChart1();
            // Start plotting chart
            new ChartTask1().execute();

        }

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
        }
    };

 // Setting ItemClick Handler for Spinner Widget
    mySpinner.setOnItemSelectedListener(selectedGraph);

}

private void setupChart1(){     

    // Creating TimeSeries for Glecimie
    glecimieSeries = new TimeSeries("Glecimie");            

    // Creating a dataset to hold each series
    dataset = new XYMultipleSeriesDataset();

    // Adding Glecimie Series to the dataset
    dataset.addSeries(glecimieSeries);

    // Creating XYSeriesRenderer to customize glecimieSeries    
    glecimieRenderer = new XYSeriesRenderer();
    glecimieRenderer.setColor(Color.YELLOW);
    glecimieRenderer.setPointStyle(PointStyle.CIRCLE);
    glecimieRenderer.setFillPoints(true);
    glecimieRenderer.setLineWidth(2);
    glecimieRenderer.setDisplayChartValues(true);

    // Creating a XYMultipleSeriesRenderer to customize the whole chart
    multiRenderer = new XYMultipleSeriesRenderer();

    multiRenderer.setZoomButtonsVisible(true);      

    // Adding glecimieRenderer and pressionRenderer to multipleRenderer
    // Note: The order of adding dataseries to dataset and renderers to multipleRenderer
    // should be same
    multiRenderer.addSeriesRenderer(glecimieRenderer);

    // Getting a reference to LinearLayout of the MainActivity Layout
    LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);

        // Creating a Time Chart
        mChart1 = (GraphicalView) ChartFactory.getTimeChartView(getBaseContext(), dataset, multiRenderer,"dd-MMM-yyyy");        

        multiRenderer.setClickEnabled(true);
        multiRenderer.setSelectableBuffer(10);

    // Setting a click event listener for the graph
    mChart1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Format formatter = new SimpleDateFormat("dd-MMM-yyyy");

            SeriesSelection seriesSelection = mChart1.getCurrentSeriesAndPoint();

            if (seriesSelection != null) {                  
                int seriesIndex = seriesSelection.getSeriesIndex();
                String selectedSeries="Glecimie";
                if(seriesIndex==0)
                    selectedSeries = "Glecimie";
                else
                    selectedSeries = "Pression";

                // Getting the clicked Date ( x value )
                long clickedDateSeconds = (long) seriesSelection.getXValue();
                Date clickedDate = new Date(clickedDateSeconds);
                String strDate = formatter.format(clickedDate);

                // Getting the y value 
                int amount = (int) seriesSelection.getValue();

                // Displaying Toast Message
                Toast.makeText(
                       getBaseContext(),
                       "Prélèvement au "  + strDate + " : " + amount ,
                       Toast.LENGTH_SHORT).show();
            }
        }

    });

    chartContainer.removeAllViews();

        // Adding the Line Chart to the LinearLayout
    chartContainer.addView(mChart1);

    }

    private class ChartTask1 extends AsyncTask<String, String, String>{

        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Graphique.this);
            pDialog.setMessage("Loading data. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        // Generates dummy data in a non-ui thread

        protected String doInBackground(String... params) {

            // Building Parameters
                        List<NameValuePair> param = new ArrayList<NameValuePair>();
                        // getting JSON string from URL
                        JSONObject json = jParser.makeHttpRequest(url_liste_appareil, "GET", param);

                        // Check your log cat for JSON reponse
                        Log.d("Tous les appareil: ", json.toString());

            try{

                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    appareil = json.getJSONArray(TAG_APPAREIL);
                    Date[] dt = new Date[appareil.length()];

                    // looping through All Products
                    for (int j = 0; j < appareil.length(); j++) {
                        JSONObject p = appareil.getJSONObject(j);

                        // Storing each json item in variable
                        GregorianCalendar gc = new GregorianCalendar(2012, 10, j+1);
                        dt[j] = gc.getTime();

                        String y = p.getString(TAG_Y);
                        String jr = p.getString(TAG_J);

                        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                        Date d = sdf.parse(jr);

                        // Adding data to Glecimie and Pression Series 

                        glecimieSeries.add(d,Double.parseDouble(y));

                        multiRenderer.setXTitle("Dates");
                        multiRenderer.setYTitle("Prélèvements");

                    }
                }
            }catch (JSONException e) {
                e.printStackTrace();
                } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        // Plotting generated data in the graph

        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into the graph
                     * */
                    mChart1.repaint();
                }
            });

        }

    } 

 private void setupChart2(){    

    // Creating TimeSeries for Pression
    pressionSeries = new TimeSeries("Pression");        

    // Creating a dataset to hold each series
    dataset = new XYMultipleSeriesDataset();

    // Adding Glecimie Series to dataset
    dataset.addSeries(pressionSeries);      

    // Creating XYSeriesRenderer to customize pressionSeries

    pressionRenderer = new XYSeriesRenderer();
    pressionRenderer.setColor(Color.YELLOW);
    pressionRenderer.setPointStyle(PointStyle.CIRCLE);
    pressionRenderer.setFillPoints(true);
    pressionRenderer.setLineWidth(2);
    pressionRenderer.setDisplayChartValues(true);

    // Creating a XYMultipleSeriesRenderer to customize the whole chart
    multiRenderer = new XYMultipleSeriesRenderer();

    multiRenderer.setZoomButtonsVisible(true);      

    // Adding glecimieRenderer and pressionRenderer to multipleRenderer
    // Note: The order of adding dataseries to dataset and renderers to multipleRenderer
    // should be same

    multiRenderer.addSeriesRenderer(pressionRenderer);

    // Getting a reference to LinearLayout of the MainActivity Layout
    LinearLayout chartContainer = (LinearLayout) findViewById(R.id.chart_container);

        // Creating a Time Chart
        mChart2 = (GraphicalView) ChartFactory.getTimeChartView(getBaseContext(), dataset, multiRenderer,"dd-MMM-yyyy");        

        multiRenderer.setClickEnabled(true);
        multiRenderer.setSelectableBuffer(10);

    // Setting a click event listener for the graph
    mChart2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Format formatter = new SimpleDateFormat("dd-MMM-yyyy");

            SeriesSelection seriesSelection = mChart2.getCurrentSeriesAndPoint();

            if (seriesSelection != null) {                  
                int seriesIndex = seriesSelection.getSeriesIndex();
                String selectedSeries="Glecimie";
                if(seriesIndex==0)
                    selectedSeries = "Glecimie";
                else
                    selectedSeries = "Pression";

                // Getting the clicked Date ( x value )
                long clickedDateSeconds = (long) seriesSelection.getXValue();
                Date clickedDate = new Date(clickedDateSeconds);
                String strDate = formatter.format(clickedDate);

                // Getting the y value 
                int amount = (int) seriesSelection.getValue();

                // Displaying Toast Message
                Toast.makeText(
                       getBaseContext(),
                       " Prélèvement au"  + strDate + " : " + amount ,
                       Toast.LENGTH_SHORT).show();
            }
        }

    });

    chartContainer.removeAllViews();

        // Adding the Line Chart to the LinearLayout
    chartContainer.addView(mChart2);

    }

    private class ChartTask2 extends AsyncTask<String, String, String>{

        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Graphique.this);
            pDialog.setMessage("Loading data. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        // Generates dummy data in a non-ui thread

        protected String doInBackground(String... params) {

            // Building Parameters
                        List<NameValuePair> param = new ArrayList<NameValuePair>();
                        // getting JSON string from URL
                        JSONObject json = jParser.makeHttpRequest(url_liste_appareil, "GET", param);

                        // Check your log cat for JSON reponse
                        Log.d("Tous les appareil: ", json.toString());

            try{

                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    appareil = json.getJSONArray(TAG_APPAREIL);
                    Date[] dt = new Date[appareil.length()];

                    // looping through All Products
                    for (int j = 0; j < appareil.length(); j++) {
                        JSONObject p = appareil.getJSONObject(j);

                        // Storing each json item in variable
                        GregorianCalendar gc = new GregorianCalendar(2012, 10, j+1);
                        dt[j] = gc.getTime();

                        String y = p.getString(TAG_Y);
                        String jr = p.getString(TAG_J);

                        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                        Date d = sdf.parse(jr);

                        // Adding data to Glecimie and Pression Series 

                        pressionSeries.add(d,Double.parseDouble(y));
                        multiRenderer.setChartTitle("la pression");
                        multiRenderer.setXTitle("Dates");
                        multiRenderer.setYTitle("Prélèvements");

                    }
                }
            }catch (JSONException e) {
                e.printStackTrace();
                } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        // Plotting generated data in the graph

        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into the graph
                     * */
                    mChart2.repaint();
                }
            });

        }

    } 

// Initiating Menu XML file (menu.xml)

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.menu_graphique, menu);
            return (super.onCreateOptionsMenu(menu));
        }
 } 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:14:14.590

为了刷新两个图表，您需要调用`repaint`两者：

```
mChart1.repaint();
mChart2.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T13:22:13.153

您可以通过传递值来更新图表的颜色和其他值。

在 openChart() 方法中，您可以传递值。

```
private void openChart(final String[] code, final int[] distribution,final int color){      
defaultRenderer.setBackgroundColor(color);

} 
```

# scala - 将 List[Task(username, description)] 转换为 Map[username,Set[Task]]

> ID：14424244
> 
> 赞同：3
> 
> 时间：2013-01-20T11:54:38.530
> 
> 标签：scala, collections, grouping

（请*注意*，我对 Scala 不熟悉，但仍在为最常见的集合操作操作而苦恼。）

我想将 List[Task] 转换为 Map。这里有一些细节：

```
// assignee may be null
case class Task(assignee: String, description: String)
// might refactor it into:
// case class Task(assignee: Option[String], description: String) 
```

我想要一个 Map ，其中*Keys*是受让人，每个*Value*都是*Set[Task]*。我在管理以下两种情况时遇到了麻烦：

*   *地图对null*键不友好（咳嗽）（我使用 Option[String] 为受让人解决了这个问题）和
*   必须区分映射中是否已存在键（仅向现有集合添加值）与已添加键因此集合值存在

我想出了以下内容，但看起来过于冗长。

```
def groupByAssignee(tasks : List[Task]) : Map[Option[String], Set[Task]] = {
 tasks.foldLeft(Map[Option[String], Set[Task]]())(
  (m, t) => {
    m.get(t.assignee) match {
      case Some(_) => m + ((t.assignee, m.get(t.assignee).get.+(t)))
      case _       => m + ((t.assignee, Set(t)))
    }
  })
} 
```

实现这一目标的更简单/更清晰的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:02:51.723

这个用例非常常见，因此有一个内置方法：

```
tasks groupBy {_.assignee} 
```

`groupBy`但是会`Map[String,List[Task]]`在您想要的时候返回`.Map[String, Set[String]]`。这应该这样做：

```
groupBy {_.assignee} mapValues {_ map {_.description} toSet} 
```

`groupBY`是`null`友好的，但你不应该。`Option[String]`更好，更惯用。

# azure - 在我的本地机器上创建 azure VM

> ID：14424248
> 
> 赞同：3
> 
> 时间：2013-01-20T11:54:55.020
> 
> 标签：azure, azure-web-roles, azure-virtual-machine, azure-vm-role

是否可以在我的本地计算机上创建一个或多个 azure VM？我想创建一个 Web 应用程序并在本地对其进行负载测试，而无需将其放在云中。我正在考虑以下场景：我有一个本地 VM 运行带有我的 Web 应用程序的 IIS 服务器；我使用一个工具来产生大量的负载；我需要部署第二个 VM，其中包含与第一个 VM 相同的内容。Web 应用程序的停机时间应该等于 0（希望如此）。

**澄清（更新）：** 我想实现以下目标：创建一个 Web 应用程序和一个监控应用程序（CPU、内存）并将它们部署在一个 VM 上。在负载测试中，如果 VM 无法处理它（例如 CPU 超过 80%），我想以编程方式部署一个新 VM（具有相同的配置，同时具有 Web 应用程序和监控应用程序），这样就不会发生停机.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:40:23.860

Azure 提供多种托管站点的方法。

*   虚拟机就是这样，普通的虚拟机。您可以在本地创建它们并上传它们，但一切都取决于您，包括如何处理升级。如果这是您需要做的，那么我不知道您将如何在没有停机的情况下处理升级；不过，您可以将多个虚拟机添加到负载均衡器，然后一次升级一个。
*   听起来您真正想要探索的是云服务。您可以在模拟器中本地运行一个或多个虚拟机，在云中升级一次而无需停机，实现自动缩放（您将不得不使用工具或编写一些代码）。
*   或者，您可能想查看 Azure 网站，但这是一个完全不同的概念，您无法以相同的方式真正在本地测试负载和负载平衡。

根据您实质上想要自动扩展您的应用程序的声明，您希望使用 Auto Scaling 查看云服务。但是，您无法在云模拟器中对此进行完全测试 - 但您可以测试您的逻辑。

## 背景

Azure 云服务就是为这种事情而设计的；您并没有真正以您可能习惯的方式使用 VM，而是创建一个包，然后 Azure 将其部署到您喜欢的任意数量的服务器上。一旦启动并运行，您可以手动进入管理控制台并通过移动滑块来增加或减少活动服务器的数量。当然，您想自动执行此操作，因此您有几个选择。

您可以使用一个管理 API 来更改服务器的数量。因此，编写一些代码将非常简单，您可以在 WebRole.Start 的另一个线程中启动它，它只是坐在并监视机器上的 CPU，然后调用管理 API 以启动一个新的服务器实例，如果您CPU 超过某个阈值。好的，您只能在本地测试对管理 API 的调用，您实际上不会看到新服务器的出现。但是，如果您获取 Azure 的免费试用版并尝试一下，您会发现您真的不需要测试该部分 - 它就可以工作。

然而，在实践中，自动缩放还有很多东西。以下是您需要考虑的一些事项；

*   即使是相对空闲的 Web 服务器也经常会短暂飙升至 100%，因此仅拥有一个简单的阈值不太可能足够好；在启动另一个服务器实例之前，您需要确定服务器需要超过某个阈值的时间。
*   当您拥有多个服务器时会发生什么？而且，在 Azure 上，您应该始终拥有至少两台服务器以确保您具有弹性。请注意，云服务的想法实际上是拥有许多小型服务器，而不是几台大型服务器。您按核心付费，而不是按服务器数量付费。
    *   想象一下，您当前有三台服务器，其中一台由于某种原因真的很忙，而另外两台则处于空闲状态。你想启动第四台服务器吗？
    *   想象一下，您当前有两台服务器，它们都很忙。你真的希望他们*都*启动一个新服务器，这样你最终会运行四台服务器吗？

有几种方法可以应对这些挑战。对于初学者，与其在每台服务器上本地运行监控程序，不如将监控移到外部；Azure 能够以您选择的任何时间间隔将性能指标转储到表存储中。然后，您可以运行一个外部程序，从您当前的所有服务器中检索一段时间内的性能数据，然后在决定启动或关闭其他服务器之前对整体工作负载进行推理。现在，您当然可以在每个 webroles 上的单独线程中托管该外部监控程序，以提供您的监控弹性 - 但关键是监控程序不会监控它运行的服务器，它监控所有服务器. 你当然会，仍然必须处理从所有启动和停止服务器停止多个监控程序实例。一种方法是将停止/启动命令放入 Azure“消息队列”（有几种不同的类型）并使用内置的“de-duper”，它将自动删除放入队列中的相同命令一个特定的时间窗口（我过于简单了，但你明白了）。

## 实际答案

但实际上，您想查看[Auto Scaling 应用程序块](http://www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/)，它将为您完成大部分工作。我想这是您问题的真正答案，但我想先提供一些背景信息。同样，我知道您询问如何在本地进行测试 - 但我相信这个问题在 Azure 的上下文中并没有真正意义，我希望上述信息有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:35:30.440

我很确定你不能那样做，而且无论如何也没有意义。如果你想要负载测试，你需要在尽可能类似于生产的环境中运行它，这意味着你必须运行你的应用程序是 Azure 云。你怎么知道负载实际上会在真正的云上得到很好的处理？

# mysql - 在带有条件的mysql中插入过程

> ID：14424249
> 
> 赞同：0
> 
> 时间：2013-01-20T11:54:59.090
> 
> 标签：mysql, mysql-workbench

我想创建一个插入具有某些条件的行的过程。我是这个领域的新手，请任何人帮助我做到这一点。

我的表结构是。

```
Id startDate enddate    transdate   status.
1  1/12/2012 30/12/2012 31/12/2013  CLOSED
2  1/1/2013  30/1/2013  31/1/2013   OPEN 
```

我的查询逻辑在这里。

该程序每天运行。但程序检查最后一个条目 id=2 并检查交易日期。如果交易日期小于当前日期意味着。将最后一条记录状态更新为 CLOSED 并使用以下最后一条记录自动插入新记录。

```
Id startDate enddate    transdate   status.
1  1/12/2012 30/12/2012 31/12/2013  CLOSED
2  1/1/2013  30/1/2013  31/1/2013   CLOSED
2  1/2/2013  27/2/2013  28/2/2013   OPEN 
```

任何人都可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:23:46.293

这将是这样的：

```
create procedure updatetable()   
BEGIN
    declare found_id as int;
    select id into found_id from table where transdate >= curdate() and status = 'open';
    if (!is_null( found_id )) THEN
       update table set status = 'closed' where id = found_id;
       insert into table( startdate, enddate, transdate, status ) 
           values concat( year(curdate()), "-01-", month(curdate())), 
                  concat( year(curdate()), "-", LAST_DAY( curdate()), month(curdate())), curdate(),
                  "open" );
    END IF

END 
```

您需要稍微调试一下，因为我只是在猜测语法。目的是检查transdate等于或晚于当前日期的任何条目。如果找到任何条目，则将该条目更新为“关闭”，并创建一个新条目，其中包含本月的第一个和最后一个日期，状态 =“打开”。

# knockout.js - 扩展实体或添加 ko.computed 以返回不在数据库中的实体中的附加属性

> ID：14424251
> 
> 赞同：0
> 
> 时间：2013-01-20T11:55:44.007
> 
> 标签：knockout.js, breeze

我无法完全理解如何做到这一点。我从 Julie Lerman 的“BreezyDevices”解决方案开始学习，并以她的 javascript 视图模型为基础。

我有：

```
//properties and methods to expose via this class
var vm = {
    game: ko.observableArray([]),
    save: function () {
        dataservice.saveChanges();
    },
    reset: function () { dataservice.reset(getAllGames) },

}; 
```

在视图模型的顶部，这将在一个数组中返回我的每个游戏。一切正常。“游戏”具有相关数据，该数据返回一个名为“Sets”的数组，其中包含“ourscore”和“theirscore”作为属性。

在我的 html 页面上，我想绑定作为“游戏”实体的一部分返回的具体数据库属性，但我还想为每个游戏创建一个“结果”属性，该属性是基于循环每个设置分数的 javascript 函数计算的，并且相应地返回值。

我尝试在微风“Todo”解决方案中使用布局，并立即在上面的代码下进行设置：

```
initVm();

function initVm() {
    addComputeds();
}

function addComputeds() {
    vm.result = ko.computed(function () {
        var ourSets = getResult().ourSets;
        var theirSets = getResult().theirSets;

        if (ourSets == 0 && theirSets == 0) {
            return "No Result";
        }
        return (ourSets > theirSets ? "Won " : "Lost ") + "<b>" + ourSets.toString + "</b>-" + theirSets.ToString;
    });
}

function getResult() {
    var ourSets = 0;
    var theirSets = 0;

    vm.game().forEach(function (game) {
        for (var gs in game.Sets) {
            if (gs.ourScore > gs.theirScore) {
                ourSets +=1;
            }
            else {
                theirSets +=1;
            }               
        }
    });

    return {
        ourSets: ourSets,
        theirSets: theirSets
    };
} 
```

但在我看来，好像它会为视图模型（vm）而不是每个游戏实体添加一个“结果”？此外，当我运行代码时，它不会出错，但它不会在我能看到的任何地方创建“结果”属性，而且似乎无法正常工作。

当我在这里添加它时再次查看它，我可以看到它是错误的，因为它需要处理每个特定的游戏实体来计算每个结果而不是游戏数组（所以我需要 vm.games.result 中的东西而不是vm.result），但我对此太陌生，无法理解如何处理每个单独的游戏实体。我的 .net 编码大脑会让我将循环中的每个游戏实体传递给一个函数以返回该游戏的结果，但我不知道它是否也适用于微风/淘汰赛。

我到处搜索，但我似乎无法找到符合我要求的相关示例，所以非常感谢一些指点！

* * *

@BeaverProj

我有一个 main.js 文件，其中发生了这种情况：

```
(function (root) {
    var app = root.app;

    app.logger.info('Please wait... data loading');

    ko.applyBindings(app.gameViewModel, $("content").get(0));

    $(".view").css({ display: 'block' });
}(window)); 
```

现在已将顶部部分编辑为：

```
var vm = {
    game: ko.observableArray([]),
    save: function () {
        dataservice.saveChanges();
    },
    reset: function () { dataservice.reset(getAllGames) },
    result: ko.computed(function () {
        var gameRes = getResult();
        var ourSets = gameRes.ourSets;
        var theirSets = gameRes.theirSets;

        if (ourSets == 0 && theirSets == 0) {
            return "No Result";
        }
        return (ourSets > theirSets ? "Won " : "Lost ") + "<b>" + ourSets + "</b>-" + theirSets;
        })
}; 
```

"getResult" 现在引用 "app.gameViewModel.game().forEach(function (Game) {" 而不是 "vm..."

和以前一样 - 没有错误，但也没有结果。我仍然得到“游戏”的数组，但没有别的。上面的视图模型对我来说仍然是错误的......“结果”应该附加到游戏实体（vm.game）而不是 vm - 目前这将给出 vm.result 并且每个游戏都有一个结果（所以 vm. game.result)，而不是每个游戏数组。这就是为什么我想知道是否需要通过微风扩展实体。我可以在普通的 javascript 中做到这一点，但似乎微风或淘汰赛应该能够更容易做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:41:34.190

不要出汗。继续探索。我们都在学习。

我不知道将它放在 ViewModel (VM) 还是实体中是否更好。没有内在的正确答案。

假设您希望在实体中使用它（因为从 Breeze 的角度来看这更有趣）。下一个问题：你需要它是可观察的吗？

您写道“*这是一个简单的独立计算结果，仅用于显示目的。页面上不会发生任何会影响结果的更改，它已经发生了。* ”这表明它不需要是可观察的，因此您不需要一个 KO 计算。您最近的解决方案甚至没有将其作为属性呈现；我猜你的虚拟机中的某些东西正在调用`getResult()`.

这使我认为您可能更喜欢注册**自定义构造函数**并放置`getResult`该构造函数的原型：

```
var 游戏 = 函数 () { }

Game.prototype.getResult = function () {
  var 我们的 = 0;
  var 他们的 = 0;
  this.sets().forEach(function (s) {
    (s.ourScore() > s.theirScore()) ？我们的 += 1 : 他们的 += 1;
  });
  返回（我们的||他们的）？
      （我们的>他们的？“赢了”：“输了”）+我们的+“-”+他们的：
      “没有结果”;
}

store.registerEntityTypeCtor("游戏", 游戏); // ctor 但没有初始化器

```

另一方面，如果您认为分数可能会改变，并且您希望屏幕按照他们所做的那样更新，您可能希望将逻辑移动到`results`计算的 KO 中。`ourScore`和`theirScore`observables 应该保持计算的`results`最新。我在这里大声思考，没有尝试过。

**您将在初始化程序**而不是 ctor中定义`results`计算。为什么？因为 KO observables 必须附加到实例，而不是原型。如果您在 ctor 中定义它，Breeze 可能会尝试序列化并更改跟踪它。最好将它附加到初始化程序中的实体上；Breeze 忽略初始化器添加的实体成员。

 **进一步考虑，也许我`getResult`会将方法保留在原型中的位置并编写一个添加了 ko 计算的初始化程序......就像这样（警告：未测试）：

```
功能游戏初始化器（游戏）{
   game.results = ko.computed(function() { return game.getResults();});
}

store.registerEntityTypeCtor("游戏", Game, gameInitializer);

```

现在是严肃的一点：***这个逻辑应该在数据***服务中吗？

出于您自己陈述的原因，我不会在我的*数据服务中使用它。*这种逻辑表达了模型固有的关注点，与管理数据访问无关。可以在演示的*数据服务*中将所有内容混合在一起。在“真实”代码中，将其分解为*model.js*组件（我认为`Game`是 Model 组件，而不是 ViewModel 组件）并在 dataservice.js 和 viewmodel.js 脚本标签之间加载该脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:42:55.323

您的构造后初始化程序与此问题的答案非常相似，即使用 ko 映射插件 doc'd @ [http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)。

您将使用映射配置添加一个创建处理程序来附加您想要的计算结果。就像是

```
var mapping = {
  game : {
    create : function(options) {
            var game = options.data;
            game.results = ko.computed( function(){ 
              //your result sets calc here
            }  );

            return game;
        }
  }
} 
```

更好的是定义您自己的 GameVM 类型并将其放在那里。

```
function GameVM( GameData )
{
    var self = this;
    this.Sets = ko.mapping.fromJS( GameData.Sets );
    this.Results = ko.computed( function(){
         self.Sets()...
    } );

} 
```

和一个映射

```
 var mapping = {
      game : {
        create : function(options) {
               return new GameVM( options.data );
      }
    } 
```

这更干净，并且它使您的游戏 VM 更易于测试，因为它是一个较小的测试单元。

查看映射文档以真正了解它如何通过自定义更新回调帮助您的 reset() 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:07:36.887

好的，经过一番折腾，我取得了一些进展。对不起，沃德（如果你读到了这篇文章）——你的文档可能对有经验的编码员很好，但对新手不好！）

dataservice.js 的顶部现在是这样的：

```
var manager = new breeze.EntityManager(serviceName);
var store = manager.metadataStore;

var Game = function () {
    //this.result = "Won 3-2";

};

var gameInitializer = function (game) {
    //game.result = "Won 3-2";
    game.result = function () {
        return getResult(game);
    }();
 };

store.registerEntityTypeCtor("Game", Game, gameInitializer); 
```

和 getResult 函数：

```
function getResult(game) {
    var ourSets = 0;
    var theirSets = 0;

    game.Sets().forEach(function (gs) {
        if (gs.ourScore() > gs.theirScore()) {
            ourSets += 1;
        }
        else {
            theirSets += 1;
        }
    }
    );
    if (ourSets == 0 && theirSets == 0) {
                return "No Result";
    }
    else {
            return (ourSets > theirSets ? "Won " : "Lost ") + ourSets + "-" + theirSets;
    }
} 
```

显然，这在微风中被称为“构造后初始化程序”，并且在这种情况下似乎是满足我需求的一个很好的解决方案，因为我不需要对结果做任何事情，它是一个简单的独立计算结果和仅用于显示目的。页面上没有任何改变会影响结果，它已经发生了。

我仍然不知道这是否是最（甚至唯一）这样做的方式，或者我是否可以通过淘汰赛甚至标准 javascript 来获得类似的结果。在微风中执行它似乎可以处理游戏实体的传递，然后公开相关的“集合”实体。只是必须小心引用带有括号的属性，否则一切都会失败。

但是，我不喜欢让数据服务充满特定于模型的构造函数、初始化程序和函数的想法。在我看来，我所做的大部分工作都属于“vm.game.js”文件，而不是目前的通用“dataservice.js”文件。

我现在将尝试将代码转移过来。我可能需要一些时间来制定参考资料！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:22:14.743

一些东西：

*   我相当确定您会希望在视图模型定义中声明您的结果计算函数。把它放在reset功能下就行了。

*   在您共享的代码中，您尚未初始化视图模型或与 knockout.js 共享它。你需要在这样的地方打电话：

    var gameViewModel = new vm(); ko.applyBindings(gameViewModel);

*   更改后，在您的 getResult() 方法中，您将引用 gameViewModel（实例）而不是 vm 变量（类定义）。

*   最后一件事不应该影响它是否工作太多是你应该只在你的计算结果中调用一次 getResult() 并将返回值分配给一个变量。否则，您将计算两次，这是一种资源浪费，并且在技术上可能会在调用之间发生变化。**

# ios - 获取 NSMutableArray 中相同对象的索引

> ID：14424252
> 
> 赞同：2
> 
> 时间：2013-01-20T11:55:47.330
> 
> 标签：ios, iphone, objective-c

我有这样`NSMutableArray`的对象：**“0,1,0,1,1,1,0,0”**

我需要获取所有值为“1”的对象的索引

我正在尝试使用以下代码来获取它：

```
for (NSString *substr in activeItems){
            if ([substr isEqualToString:@"1"]){
                NSLog(@"%u",[activeItems indexOfObject:substr]);   
            }
    } 
```

但正如它在文档方法中所说的`indexOfObject:`“返回 - 对应数组值等于 anObject 的最低索引。”

**问题**：如何获取值为“1”的数组的所有索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:01:35.620

您可以使用以下方法`NSArray`：

```
- (NSIndexSet *)indexesOfObjectsPassingTest:(BOOL (^)(id obj, NSUInteger idx, BOOL *stop))predicate 
```

（[文档在这里。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW24)）

```
NSIndexSet *set = [array indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
    return [obj isEqualToString:@"1"];
}]; 
```

这就是如何将索引作为数组元素（由`NSNumber`对象表示）的方式：

```
NSIndexSet *set = // obtain the index set as above

NSUInteger size = set.count;

NSUInteger *buf = malloc(sizeof(*buf) * size);
[set getIndexes:buf maxCount:size inIndexRange:NULL];

NSMutableArray *array = [NSMutableArray array];

NSUInteger i;
for (i = 0; i < size; i++) {
    [array addObject:[NSNumber numberWithUnsignedInteger:buf[i]]];
}

free(buf); 
```

然后将包含包装在s`array`中的匹配对象的所有索引。`NSNumber`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T12:00:03.853

只需使用 NSArray 的**indexOfObjectsPassingTest:**方法，提供一个块作为参数来检查您的对象。

它将返回一个 NSIndexSet。

```
- (NSIndexSet *)indexesOfObjectsPassingTest:(BOOL (^)(id obj, NSUInteger idx, BOOL *stop))predicate 
```

然后从`NSIndexSet`,

```
[indexset enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
      //idx is what you want!
}]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T12:00:56.780

您可以使用`[NSArray indexesOfObjectsPassingTest:]`（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/indexesOfObjectsPassingTest%3a)）：

```
NSIndexSet *indexes = [activeItems indexesOfObjectsPassingTest:^BOOL (id obj, NSUInteger idx, BOOL *stop) {
    return [obj isEqualToString:@"1"];
}]; 
```

`[NSArray objectsAtIndexes:]`获得索引后，您可以使用( [reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/objectsAtIndexes%3a) )获取原始数组的子集，其中仅包含您感兴趣的对象：

```
NSArray *subset = [activeItems objectsAtIndexes:indexes]; 
```

# ubuntu - Intellij 启动器不能统一运行？

> ID：14424254
> 
> 赞同：82
> 
> 时间：2013-01-20T11:55:48.327
> 
> 标签：ubuntu, intellij-idea, ubuntu-unity

在`/usr/share/applications`我创建下：

`intellij.desktop`：

```
#!/usr/bin/env xdg-open
[Desktop Entry]
Version=1.0
Type=Application
Terminal=false
Exec=/path/To/idea.sh"
Name[en_US]=Intellij
Name=Intellij
Icon=/path/to/intellij.png 
```

然后我将它拖到 Unity 启动栏。我点击它，但没有任何反应。我怎样才能让它工作？

`JAVA_HOME`设置正确，其他 Java 应用程序（如 Eclipse）工作并单击`idea.sh`.

* * *

我的配置：

*   Ubuntu 12.10 64 位（桌面）
*   甲骨文 JDK 1.7
*   IntelliJ 社区 12

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2013-01-20T19:22:48.580

您可以在 IntelliJ 本身中使用“*工具*”>“*创建桌面条目”。*

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-02-13T05:21:36.520

1.  **在/path/idea/bin**文件夹中打开一个终端
2.  **使用./idea.sh**启动 IntelliJ
***   **工具**->**生成桌面条目***   关闭 IntelliJ*   在终端中，以管理员身份启动 nautilus ( **gksudo nautilus** )*   转到**/usr/share/applications***   将 IntelliJ 的新图标拖到您的启动器**

 *** * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-18T14:30:28.993

带有创建桌面条目的事件仍然存在错误，因为启动器未读取 JDK_HOME 配置。

所以在创建桌面条目后，右键单击启动器并选择属性，然后在命令输入文本 exp 中的双引号之前添加 bash -i：command [ bash -i "/home/me/ides/idea/bin/idea.sh" ％F ]

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-10-03T19:05:17.713

从启动器启动 IntelliJ IDEA
1\. 创建一个 idea.desktop 文件并在其中包含以下内容。

```
 [Desktop Entry]
    Name=IntelliJ IDEA
    Comment=IntelliJ IDEA IDE
    Exec=/{installation directory}/idea-IC-129.713/bin/idea.sh
    Icon=/{installation directory}/idea-IC-129.713/bin/idea.png
    Terminal=false
    StartupNotify=true
    Type=Application
    Categories=Development;IDE; 
```

2\. 添加权限文件可执行（在权限选项卡中右键单击文件并检查执行权限）[或`sudo chmod +x idea.desktop`]
3\. 将该文件复制到`/usr/share/applications`（在命令行中，执行`sudo cp idea.desktop /usr/share/applications`）
4\. 将该文件复制到`~/.local/share/applications`（命令行，`sudo cp idea.desktop ~/.local/share/applications`）

现在检查破折号。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-20T19:26:34.367

我通常只是在普通菜单下创建一个运行器（右键单击开始菜单并选择编辑），它指向类似的东西`bash -i ~/bin/idea/bin/idea.sh`

我`bash -i`曾经在 .bashrc 中读取我正确设置了 JAVA_HOME 的位置。这就像任何其他程序一样工作。

bin/idea 始终是最新版本的链接，因此我无需重新创建此开始菜单项。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-02-04T15:39:33.237

我刚刚遇到这个问题，我想为可能需要它的人添加一些答案。

> 您可以在 IntelliJ 中使用“工具”>“创建桌面条目”

就像这张图片： [![在此处输入图像描述](../Images/ee3402691010b7618246358d93aa57fc.png)](https://i.stack.imgur.com/3w0ub.png) 如果你第一次打开 intellij，你应该创建一个新项目来执行此操作。我花了一段时间才弄清楚

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-28T11:57:07.663

对于新安装，从以下位置创建桌面条目：`Tools > Create Desktop Entry`

如果要将 IntelliJ 升级到新版本，请执行以下操作：

```
ll ~/.local/share/applications | grep idea 
```

你应该看到这两个文件

```
-rw------- 1 user user  315 Mar 28 17:06 jetbrains-idea-ce.desktop
-rw-rw-r-- 1 user user  311 Mar 28 17:06 jetbrains-idea.desktop 
```

打开这两个文件并更新它们中新安装的 IntelliJ 路径

```
[Desktop Entry]
Version=1.0
Type=Application
Name=IntelliJ IDEA Community Edition
Icon=/home/user/Downloads/idea-IU-181.4203.550/bin/idea.png
Exec="/home/user/Downloads/idea-IU-181.4203.550/bin/idea.sh" %f
Comment=The Drive to Develop
Categories=Development;IDE;
Terminal=false
StartupWMClass=jetbrains-idea-ce 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-13T19:43:20.383

在我运行 Ubuntu 17.10 并使用 snap 安装 Intellij 的机器上，我找不到任何**创建桌面条目**选项。

事实证明，我不得不将`.desktop`文件从复制`/var/lib/snapd/desktop/applications`到`.local/share/applications`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-27T20:52:56.880

只是发布以防其他人遇到此问题。

对我来说，我所要做的就是右键单击该条目并转到属性，然后在`Application`选项卡下`Work path`我将完整路径放入 bin 文件夹。

例如`/home/teodorvecerdi/Development/idea-IU-172.3317.76/bin/`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-22T00:13:04.823

创建文件 jetbrains-datagrip.desktop

```
sudo gedit /usr/share/applications/jetbrains-datagrip.desktop

[Desktop Entry]
Version=1.0
Type=Application
Name=DataGrip
Icon=/home/gilcierweb/DataGrip/bin/product.png
Exec="/home/gilcierweb/DataGrip/bin/datagrip.sh" %f
Comment=Develop with pleasure!
Categories=Development;IDE;
Terminal=false
StartupWMClass=jetbrains-datagrip 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-25T20:59:02.553

另一种选择：

1.  `cd /bin`
2.  `ln -s <path to idea.sh> idea`- 现在它在“idea”下的破折号中可用
3.  打开**破折号**，输入**idea**并**启动IntelliJ**
4.  右键**单击侧边栏中的图标**并将**其添加到启动器**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-17T06:19:46.650

为了在启动器上只有一个 IntelliJ 图标，您需要在您的想法 .desktop 文件中添加以下行：

```
StartupWMClass=jetbrains-idea 
```

我的工作示例 idea.desktop 文件如下所示：

```
[Desktop Entry]
Type=Application
Terminal=false
Name=Idea13
Icon=/usr/local/bin/idea13/bin/idea.png
Exec=/usr/local/bin/idea13/bin/idea.sh
StartupWMClass=jetbrains-idea 
```**

# php - PHP - 如何将像“eg1”、“eg2”、“eg3”这样的数组变成“+eg1”、“+eg2”、“+eg3”？

> ID：14424260
> 
> 赞同：0
> 
> 时间：2013-01-20T11:56:22.117
> 
> 标签：php, string, implode

我正在为我的网站开发搜索功能。

目前我正在从单个输入中获取一个字符串，然后将其清理成一个字符串，如“eg1 eg2 eg3”。

这是代码：

```
$pattern = mysqli_real_escape_string($link, $_POST['search']);
$pattern = strip_tags($pattern); 
$pattern = trim ($pattern);
$pattern = explode(' ', $pattern);
$pattern = implode(" ", $pattern); 
```

我想要做的是获取原始字符串，并在它位于数组中的任一点（爆炸之后）在每个值前面附加 + 。

我一直在查看有关我一直在使用的功能的文档，但似乎不太了解它们如何以这种方式工作。这是因为我可以将字符串转换为“eg1 +eg2 +eg3”，但我无法在第一个结果前面得到加号？

如果有人能指出可能为我提供一个关于如何完成这项任务的示例的相关功能，将不胜感激！

欢迎任何输入/建议/反馈，谢谢！

请不要燃烧并去RTM！！！！！！！因为我有而且我似乎找不到我要找的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:01:53.143

只需将缺少的 + 添加为结果字符串中的第一个字符：

```
$pattern = "+".implode(" +", $pattern); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:00:35.027

```
$pattern = implode(" +", $pattern); 
```

无论如何，我认为创建一个数组然后将其转换回字符串没有任何意义。`str_replace(" ", " +", $str)`应该够了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:03:54.643

这个怎么样： $pattern = explode(' ', $pattern); $pattern = '+'.implode('+', $pattern);

# java - 结果集错误

> ID：14424261
> 
> 赞同：1
> 
> 时间：2013-01-20T11:56:40.730
> 
> 标签：java, sql, resultset

我正在使用 Java EE 和 derby，我尝试从我的结果集中获取数据并将它们放入 int 和 string 但不工作它给了我这个错误：

java.sql.SQLException：当前光标位置的操作无效。

我尝试了 result.next() 但没有，这是我的代码：

```
 Connection conn = null;
    Statement stmt = null;
    ResultSet result = null;  

    Hotel hot = new Hotel();
    try {
        synchronized (dataSource) {
            conn = dataSource.getConnection();
        }

        stmt = conn.createStatement();
        String req = "SELECT * FROM hotel WHERE num = " + num;
        result = stmt.executeQuery(req);                                                              

        }

        //result.next();           

        int xxnum = result.getInt(1);
        String nom = result.getString("nom");
        String villeV = result.getString("ville");
        int etoilesV = result.getInt("etoiles");
        String directeur = result.getString("directeur");

        Hotel hol = new Hotel(num, nom, villeV, etoilesV, directeur);                

        result.close();
        stmt.close();
        return hol;
    } catch (SQLException ex) {
        throw new DAOException("probl�me r�cup�ration de la liste des hotels !!", ex);
    } finally {
        closeConnection(conn);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:01:13.503

错误

```
java.sql.SQLException: Invalid operation for the current cursor location. 
```

将由未使用将光标设置到下一个位置引起

```
result.next(); 
```

将电话放在`if`声明中

```
if (result.next()) {
   // build Hotel object
   ...
} 
```

如果您仍然没有看到任何结果，请`SQL`直接针对您的数据库运行您的数据库并查看是否返回了任何记录。如果没有，请相应地调整您的查询或数据。

* * *

*旁注：*

*   用于`PreparedStatement`防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。
*   在一个块中放置`result.close();`和`stmt.close();`调用。`finally`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:00:53.700

您需要使用`next()`ResultSet 的方法。

检查Javadocs [here](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)，我已经剪掉了下面的相关部分。

将光标从其当前位置向前移动一行。ResultSet**游标最初位于第一行之前**；第一次调用 next 方法使第一行成为当前行；第二次调用使第二行成为当前行，依此类推。

因此，您需要在代码中执行此操作：

```
if(result.next())
{
    int xxnum = result.getInt(1);
    String nom = result.getString("nom");
    String villeV = result.getString("ville");
    int etoilesV = result.getInt("etoiles");
    String directeur = result.getString("directeur");
} 
```

# yii - Yii activeRadioButton 没有得到 activerecord 的真实值

> ID：14424263
> 
> 赞同：0
> 
> 时间：2013-01-20T11:57:00.260
> 
> 标签：yii

可能是什么问题？我在 $Row 中有一个活动记录。该模型具有属性“id”。然后我想在这样的界面上显示单选按钮：

```
echo CHtml::activeRadioButton($Row, 'id'); 
```

当在浏览器上呈现时，我可以看到单选按钮的值为“1”。但是当我这样做时：

```
echo $Row['id']; 
```

显示正确的值（128）。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:03:19.860

该`'id'`参数指定提交表单时单选按钮将写入的属性。但是，您还需要指定单选按钮在选中时的值。通过函数的第三个参数执行此操作：

```
echo CHtml::activeRadioButton($Row, 'id', array('value' => $Row['id'])); 
```

# c++ - NLOpt 与 windows 窗体

> ID：14424277
> 
> 赞同：0
> 
> 时间：2013-01-20T11:59:21.227
> 
> 标签：c++, clr, nlopt

尝试在 Windows 窗体应用程序中使用 nlopt 库 (http://ab-initio.mit.edu/wiki/index.php/NLopt_Tutorial) 时遇到严重问题。我创建了以下命名空间，它在控制台应用程序中完美运行。

```
#include "math.h"
#include "nlopt.h"

namespace test
{

    typedef struct {
        double a, b;
    } my_constraint_data;

    double myfunc(unsigned n, const double *x, double *grad, void *my_func_data)
    {
        if (grad) {
            grad[0] = 0.0;
            grad[1] = 0.5 / sqrt(x[1]);
        }
        return sqrt(x[1]);
    }

    double myconstraint(unsigned n, const double *x, double *grad, void *data)
    {
        my_constraint_data *d = (my_constraint_data *) data;
        double a = d->a, b = d->b;
        if (grad) {
            grad[0] = 3 * a * (a*x[0] + b) * (a*x[0] + b);
            grad[1] = -1.0;
        }
        return ((a*x[0] + b) * (a*x[0] + b) * (a*x[0] + b) - x[1]);
     }

    int comp()
    {
        double lb[2] = { -HUGE_VAL, 0 }; /* lower bounds */
        nlopt_opt opt;
        opt = nlopt_create(NLOPT_LD_MMA, 2); /* algorithm and dimensionality */
        nlopt_set_lower_bounds(opt, lb);
        nlopt_set_min_objective(opt, myfunc, NULL);
        my_constraint_data data[2] = { {2,0}, {-1,1} };
        nlopt_add_inequality_constraint(opt, myconstraint, &data[0], 1e-8);
        nlopt_add_inequality_constraint(opt, myconstraint, &data[1], 1e-8);
        nlopt_set_xtol_rel(opt, 1e-4);
        double x[2] = { 1.234, 5.678 };  /* some initial guess */
        double minf; /* the minimum objective value, upon return */

        int a=nlopt_optimize(opt, x, &minf) ;
        return 1;
    }
} 
```

它优化了简单的非线性约束最小化问题。当我尝试在 Windows 窗体应用程序中使用此命名空间时，就会出现问题。我经常在 myfunc 中遇到未处理的异常，由于某种原因将“x”视为空指针，因此在尝试访问其位置时会导致错误。我相信这个问题是由 Windows 窗体使用 CLR 的事实引起的，但我不知道它是否可以解决。我正在使用 Visual Studio 2008，测试程序是简单的控制台项目（工作正常）和 Windows 窗体项目（导致上述错误）。我的测试代码基于提供的链接中的 C 教程。我虽然尝试了 C++ 版本，它在控制台应用程序中再次正常工作，但在 Windows 窗体应用程序中给出了调试断言失败错误。
所以我想我的问题是：我有工作的 Windows 窗体应用程序，我想使用 NLOpt。有没有办法使这项工作？

# javascript - 带参数的jQuery函数

> ID：14424280
> 
> 赞同：2
> 
> 时间：2013-01-20T11:59:52.863
> 
> 标签：javascript, jquery, function, parameters, tooltip

我是 jQuery 新手，我正在尝试实现一个非常简单的工具提示，只是为了了解 jQuery 的工作原理。

谷歌搜索后，这就是我所做的：

**jQuery：**

```
$(document).ready(function(){

    $("#foo1").mouseover(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $('#div1').css({'top':y,'left':x}).show();
    });

    $("#foo1").mousemove(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $('#div1').css({'top':y,'left':x});
    });

    $("#foo1").mouseout(function(){
        $('#div1').hide();
    });

}) 
```

**HTML：**

```
<div style="width: 200px; border: 1px black solid; position: relative;">
    Something here
</div>
<div id="container" style="width: 300px; border: 1px black solid; position: relative;">
    <a id="foo1" href="javascript:void(0);">[hover me]</a>
    <div id="div1" class="tt">Content goes here.</div>
    <a id="foo2" href="javascript:void(0);">[hover me too!]</a>
    <div id="div2" class="tt">I'm not working :(</div>
</div> 
```

我使用`var x = e.pageX - $("#container").offset().left;`是因为我在`#div1`div 内时遇到了问题`position: relative;`

一切正常，但如果我添加其他链接呢？

我想传递`#foo1`和`#div1`（最终`#container`，但实际上我真的不需要它）作为参数，但事实是我完全不知道如何做到这一点。

我试着在这里搜索，我发现了这个：[JQuery, Passing Parameters](https://stackoverflow.com/questions/1202551/jquery-passing-parameters)

所以我认为也许我可以做类似的事情：

```
function doStuff(param1, param2) {
    $(param1).mouseover(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(param2).css({'top':y,'left':x}).show();
    });
    //etc etc
} 
```

但我不知道如何在 HTML 中调用这个函数：在 javascript 中我会做类似的事情`onmouseover="doStuff('foo1', 'div1')"`，但我真的不知道如何处理 jQuery :|

**编辑：**

这是生成 div 的代码：

```
foreach ($colors_array as $key => $value) {
    echo "<div id='foo" . $key . "'>";
    // something else
    // according to some condition, I will decide whether to
    // call or not the function doStuff for this div.
    echo "</div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:23:11.417

这是另一种解决方案，在具有**tt**类的旁边找到元素：

```
$(document).ready(function(){

    $(".tooltipped").mouseover(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(this).next('.tt').css({'top':y,'left':x}).show();
    });

    $(".tooltipped").mousemove(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(this).next('.tt').css({'top':y,'left':x});
    });

    $(".tooltipped").mouseout(function(){
        $(this).next('.tt').hide();
    });

}) 
```

你的 html ：

```
<div id="container" style="width: 300px; border: 1px black solid; position: relative;">
    <a id="foo1" class="tooltipped" href="javascript:void(0);">[hover me]</a>
    <div id="div1" class="tt">Content goes here.</div>
    <a id="foo2" class="tooltipped" href="javascript:void(0);">[hover me too!]</a>
    <div id="div2" class="tt">I'm not working :(</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:39:12.270

以下内容如何：（假设您将 class="active" 添加到您想要悬停效果的元素中 + 动态 div 在 a 元素旁边）

```
$(document).ready(function(){

$(".active").each(function(index, value){
    $(this).mouseover(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(this).next().css({'top':y,'left':x}).show();                        
    });

    $(this).mousemove(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(this).next().css({'top':y,'left':x});
    });

        $(this).mouseout(function(){
        $(this).next().hide();
    });
}); 
```

})

示例 HTML 代码：

```
<div style="width: 200px; border: 1px black solid; position: relative;">
    Something here
</div>
<div id="container" style="width: 300px; border: 1px black solid; position: relative;">
    <a id="foo1" class="active" href="javascript:void(0);">[hover me]</a>
    <div id="div1" class="tt">Content goes here.</div>
    <a id="foo2" href="javascript:void(0);">[hover me too!]</a>
    <div id="div2" class="tt">I'm not working :(</div>
    <a id="foo3" class="active" href="javascript:void(0);">[hover me too 3!]</a>
    <div id="div3" class="tt">I'm not working :(</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:05:24.483

你已经拥有了你需要的东西。您对函数名称感到困惑：

```
function setUpHandlers(param1, param2) {
    $(param1).mouseover(function(e){
        var x = e.pageX - $("#container").offset().left;
        var y = e.pageY - $("#container").offset().top;
        $(param2).css({'top':y,'left':x}).show();
    });
    //etc etc
}

$(document).ready(function(){
    //Ok, now set them up once
    setUpHandlers('#foo1', '#div1');
    setUpHandlers('#foo2', '#div2');
}); 
```

# tcl - 路由器重新加载时生成路由器停止，路由器重新加载后有任何方式自动重新生成

> ID：14424282
> 
> 赞同：1
> 
> 时间：2013-01-20T12:00:01.013
> 
> 标签：tcl, telnet, expect

我在文件中运行 tcl send expect 脚本并作为 ./file 执行

```
#!/usr/bin/expect
spawn -noecho telnet 42.0.1.11
set timeout 900
expect "login:"
send "admin\r"
expect "Password: "
send "ram\r"
expect "#"
for {set i 0} {$i <= 1000000000} {incr i} {
 some router commands
} 
```

这工作正常，直到路由器重新加载，当路由器重新加载时，此脚本停止，因为 spawn id 未打开。，我想恢复脚本（我不知道重新加载需要多少时间，因为它大部分时间都在变化）。，有吗任何自动恢复脚本的方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:04:38.673

将您的登录过程包装到一个 proc 中，如果您获得 EOF，请再次调用它。这是基本思想，请记住，可能还有其他方法会出错。

编辑：经过一番调查，我已经重写了代码。这已经在 Linux 上通过 Solaris 10 工作站模拟“路由器重新启动”进行了测试（抱歉，没有 Cisco 在此处重新启动）。正如我提到`ping`的，实现因操作系统而异，因此`proc Ping`可能需要进行更改以适应您的情况。

```
#!/usr/bin/tclsh

package require Expect

proc RouterLogin {ip user pass} {
    spawn -noecho telnet $ip
    set timeout 60
    expect "login:"
    send "$user\r"
    expect "Password: "
    send "$pass\r"
    expect "#"
    return $spawn_id
}

proc RouterPing ip {
    # ping retry limit      - 3
    # delay between retries - 30 seconds
    set limit   3
    set delay   30
    set attempt 1
    set result false
    while {$result == false && $attempt <= $limit} {
        set result [Ping $ip]
        incr attempt
        if {!$result && $attempt <= $limit} {
            # wait $delay seconds
            after [expr {1000 * $delay}]
        }
    }
    return $result
}

proc Ping ip {
    set pingCmd "ping -c 1 $ip"
    catch {eval exec $pingCmd} pingRes
    if {[regexp "bytes from" $pingRes]} {
        return true
    } else {
        return false
    }
}

proc RouterExec {ip user pass commandList} {
    set spawn_id [RouterLogin $ip $user $pass]
    set timeout 30
    foreach cmd $commandList {
        send "$cmd\r"
        expect {
            "#" {
                # you are good
                puts "Command executed successfully"
            }
            eof {
                # wait 5 minutes
                after [expr {1000 * 60 * 5}]
                if {[RouterPing $ip]} {
                    # ping was successful, relogin and resume
                    set spawn_id [RouterLogin $ip $user $pass]
                } else {
                    # ping was not successful, abort execution
                    return false
                }
            }
            timeout {
                puts "INF: timeout"
                return false
            }
        }
    }
    send "logout\r"
    return true
}

set commandList [list command1 command2 command3]

RouterExec "42.0.1.11" "admin" "ram" $commandList 
```

# linux - 有效的赋值运算符 Bash

> ID：14424285
> 
> 赞同：2
> 
> 时间：2013-01-20T12:00:18.163
> 
> 标签：linux, bash, shell, command-line, sh

在我的 bash 脚本中，我尝试使用等号 (=) 运算符作为 IF 语句的输入，可以这样做吗？

```
echo "Plese enter an operator as shown in the brackets (-)subtract, (*)Multiply, (+)Add, (/)divide, quit(=)?"
read operator
..........

if [[ $operator == '=' ]]; then 
'do something'
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:05:36.917

我不明白你为什么不能这样做。

```
> operator==
> echo $operator
=
> if [[ $operator == '=' ]]; then echo 'ok'; fi;
ok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:31:32.497

试试这个`shell.sh`：

```
#!/bin/sh
EQUAL="=" #this is our operator
echo "Please enter operator"
read operator

if [ $operator = $EQUAL ]; then
    echo "Entered = "
else
    echo "Not = entered"
fi 
```

执行：

```
:~$ sh shell.sh
Please enter operator
=
Entered = 
:~$ sh shell.sh
Please enter operator
-
Not = entered
:~$ 
```

[学习参考](http://www.dreamsyssoft.com/unix-shell-scripting/ifelse-tutorial.php)

# gnuplot - Gnuplot 匹配抽动

> ID：14424287
> 
> 赞同：0
> 
> 时间：2013-01-20T12:00:21.243
> 
> 标签：gnuplot, multiple-axes

我正在尝试使用以下代码绘制具有两个不同 x 轴的数据：

```
reset
# Settings
set grid
set x2tics
set xtics nomirror

plot './data/N.dat' u ($1*c1)/f_offset:($2*c2) w lp ls 1,\
 '' u ($1*c1)/f_offset:($3*c2) w lp ls 2,\
 '' u ($1*c1):($2*c2) w p ps 0 notitle axis x2y1 
```

其中 c1,c2 和 f_offset 是常量。最后一行仅用于获取第二组刻度。这工作正常，但 x 和 x2 轴上的刻度未对齐。这是一件小事，但与第一个轴对齐的网格看起来确实很奇怪。是否有我缺少的简单解决方案或者我必须手动设置值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:16:35.700

实际上，有一个简单的解决方案，尽管我不知道可能有类似的选项。在这种情况下，只需手动设置刻度即可：

```
set x2tics 0.9*f_offset,0.005*f_offset,0.935*f_offset
set xtics nomirror 0.9,0.005,0.935 
```

我不知道为什么我不早点尝试。

# youtube - 在 iOS 设备上打开 youtube 播放列表的方案

> ID：14424293
> 
> 赞同：1
> 
> 时间：2013-01-20T12:01:15.910
> 
> 标签：youtube, uri, url-scheme

我想知道打开 Youtube 播放列表的方案。

我有这个代码：

```
if ([[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString      stringWithFormat:@"youtube://playlist?list=PLgrYntDWyYDdHwZney5QoTDFQrphRmYoK"]]]//https://twitter.com/cms24es
    ) {

}else if ([[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://twitter.com/TmrrrsApp"]]]//https://twitter.com/cms24es
          ) {

} 
```

如果我使用`youtube://`，我知道打开视频的方案，但要打开播放列表，我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T15:42:41.250

好吧，我猜 youtube 不理解这样的播放列表的浏览器 URL -

```
http://www.youtube.com/playlist?list=PLgrYntDWyYDdHwZney5QoTDFQrphRmYoK 
```

或者，转到您的视频->播放列表-![你的播放列表](../Images/4446be96a03211537e52112b8d1e5a3a.png)

右键单击播放列表并选择“复制链接地址”

![复制链接地址](../Images/85729e44b703662c79bcc07453833594.png)

它提供了一个类似这样的链接 -

```
http://www.youtube.com/watch?v=ILwOQV32rHg&list=FLLpWow4PGIVkCJifJxrMfwA 
```

使用它作为 URI 在本地 youtube 应用程序中播放。

```
youtube://www.youtube.com/watch?v=ILwOQV32rHg&list=FLLpWow4PGIVkCJifJxrMfwA 
```

# php - PHP在不使用javascript的情况下将数据发送到父窗口

> ID：14424294
> 
> 赞同：0
> 
> 时间：2013-01-20T12:01:18.993
> 
> 标签：php, pdf, parent, fpdf

我正在使用 FPDF 在 iF​​rame 中创建 pdf 文档...在 pdf 创建过程中，脚本与服务器通信并从服务器获取大量数据，然后我想显示一个进度条。这就是为什么我放iFrame中的php生成器..然后我的计划是php脚本可以将循环数据发送到父窗口..

例如，每次进行循环时，它都会说`$count++;`，然后我知道它经历了多少次循环，并且我已经知道它将行限制为前 200 行。然后我想显示循环数据父寡妇是这样的：..`$count of §goal has been generated successfully!`目前我正在使用jQuery，`echo`每次循环显示结果时，我都会向php询问一些jQuery脚本，以便在父winodw中显示结果，它实际上运行良好，直到必须显示 PDF。然后我收到一条错误消息，告诉我脚本无法显示 PDF，因为页面已经输出了数据。`window.parent.count($count, $goal);``Count`

有谁知道如何让 PHP 将数据发送到父窗口，所以我阻止使用`echo`?

抱歉我的英语不好..如果愿意，我可以稍后尝试上传我的脚本供您查看...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:15:17.693

我做的有点不一样...

我还编写了一个应用程序，其中 PDF 生成器需要获取相当大量的数据，因此生成需要几秒钟。

我使用 jQuery 在后台获取一个 php 页面。在此下载过程中，屏幕变为灰色并显示一个经典的“请稍候”圆圈。当生成完成时，php 文件生成的唯一输出是“OK”回显以及文件链接。我没有将文件内联显示，而是将 PDF 保存在文件夹 ( `$pdf->Output('filename.pdf','S')`) 中，并使用提供的链接和 jQuery 回调将其作为下载提供。

我希望你明白我的意思。也许这个想法会进一步帮助你。

**编辑：**不知道这是否可行，但我只是想到了......您可以保存文件并输出文件名。使用 jQuery，您可以刷新 iframe 的内容以获取一个页面，在该页面中显示已保存的 PDF 内联...

# sorting - 排序 NSJSON 数组无法正常工作

> ID：14424297
> 
> 赞同：0
> 
> 时间：2013-01-20T12:01:29.870
> 
> 标签：sorting, for-loop, ios6, nsjsonserialization

在我的 json 文件中，我有一个`title`,`subtitle`和`url`.

我对 进行排序`title`以按字母顺序设置项目，但`url`没有用 排序，`title`我不知道为什么。

这就是我所做的：

```
NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
    NSArray *arrayOfItems = [allDataDictionary objectForKey:@"items"];

    for (NSDictionary *diction in arrayOfItems) {
        NSString *titles = [diction objectForKey:@"title"];
        NSString *station = [diction objectForKey:@"url"];

        [jsonArray addObject:titles];
        [jsonStations addObject:station];

// SORT JSON
        NSArray *sortedArray;
        sortedArray = [jsonArray sortedArrayUsingComparator:^NSComparisonResult(NSString *title1, NSString *title2)
                       {
                           if ([title1 compare:title2] > 0)
                               return NSOrderedDescending;
                           else
                               return NSOrderedAscending;
                       }]; 
        [jsonArray setArray:sortedArray]; 
```

当我按下 tableView 中的第一个项目时，我得到了`url`来自 total diffrent 的`title`。我应该怎么做才能`title`匹配`url`tableView中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T22:57:01.647

首先，这似乎是一种奇怪的排序方式，您应该使用字典而不是 2 个数组，否则事情很快就会变得混乱。

其次，您需要将您的**sortedArray**传递给表而不是**jsonArray**目前它似乎只是试图重置**jsonArray**。

我会创建一种方法来处理它（我已经剥离了一些排序脚本来简化它）

```
-(NSArray *)sortContentWithJSONData {
    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];
    NSArray *arrayOfItems = [allDataDictionary objectForKey:@"items"];
    NSArray *sortedArray = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:false];
    NSMutableArray *outputArray = [[NSMutableArray alloc] init];;
    for (NSDictionary *diction in arrayOfItems) {
        NSString *titles = [diction objectForKey:@"title"];
        NSString *station = [diction objectForKey:@"url"];

        [outputArray addObject:[NSDictionary dictionaryWithObjectsAndKeys:titles, @"title", station, @"station", nil]]

    }

    return [outputArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortedArray]];

} 
```

然后您可以设置一个全局数组并使用以下命令在表格视图中访问它...

```
NSArray *tableContent = [self sortContentWithJSONData]; 
```

希望能把事情弄清楚一点:)

# php - 将 jQuery 值传递给 PHP 函数

> ID：14424305
> 
> 赞同：1
> 
> 时间：2013-01-20T12:02:20.277
> 
> 标签：php, jquery

我正在尝试在用户在表单字段中写他的电子邮件时创建 gravatar 自动加载。现在，我有了 php 函数，它将生成带有所需参数的 gravatar url，它可以在整个网站上运行。

现在，当用户输入有效的电子邮件时，我应该调用 jQuery：

```
image.attr("src", "<?=$this->Gravatar(" + input.attr('value') + ");?>"); 
```

但这是否可以将此参数传递给 PHP 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:17:01.123

您将需要 jQuery 的[`ajax()`](http://api.jquery.com/jQuery.ajax/)功能。在您的 JavaScript 中，您需要查看期望它的外部 PHP 脚本的值。

**jQuery：**

```
$('.email').keyup(function() {
   $.ajax({
     type: "POST",
     url: "/path/to/your/script.php",
     data: { email: this.value }
   }).done(function( data ) {
     alert( data );
   });
}); 
```

**PHP：**

```
if (isset($_POST['email'])) {

    // DB call - you'll need to replace with your own functionality
    // Make sure you sanitize input

    if (check_record_exists($_POST['email'])) {
       echo 'This e-mail is already being used';
    } else {
       echo 'This e-mail is fine';
    }
} else {
   echo 'No e-mail specified';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:23:53.727

如果我理解得很好，您想执行以下操作：

*   用户输入有效的电子邮件
*   从 PHP 函数中获取 Gravatar 而不发出提取请求

如果没有对服务器的任何请求，您将无法真正执行此操作，但您可以采用更简单的方法

准备一个网关脚本来调用您的 PHP 函数并使用 get 向它发送一个参数，应该如下所示：

```
http://YOUR-FULL-URL/getgravatar?email=use-email@example.com 
```

比当用户输入电子邮件时，您可以通过这种方式获得它

```
image.attr("src", "http://YOUR-FULL-URL/getgravatar?email=" + input.val() ); 
```

就像这样，你避免使用 Ajax 和直接的 AJAX 调用

# c++ - 将元素插入到 std::set 会导致几个错误

> ID：14424309
> 
> 赞同：2
> 
> 时间：2013-01-20T12:02:35.670
> 
> 标签：c++, set

考虑下面的类

```
#include <set>
#include <vector>
using namespace std;
class foo {
public:
  struct spatial {
    bool block;
    char status;  // H, M, Z
  };

  typedef pair< int, vector<spatial> > way;  // tag + spatial vector
  typedef set< way > one_set;

  void bar() 
  {
     way theWay;
     theWay.first = 10;

     one_set theSet;
     one_set::iterator sit = theSet.end();
     if (theSet.size() == 16) {
        sit = theSet.begin();
     }
     theSet.insert(sit, theWay);
  }
}; 
```

对于插入功能，我收到这些错误，我不知道这是什么意思

```
error C2784: 'bool std::operator <(const std::vector<_Ty,_Ax> &,const std::vector<_Ty,_Ax> &)' : could not deduce template argument for 'const std::vector<_Ty,_Ax> &' from 'const foo::spatial'    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility

error C2784: 'bool std::operator <(const std::_Tree<_Traits> &,const std::_Tree<_Traits> &)' : could not deduce template argument for 'const std::_Tree<_Traits> &' from 'const foo::spatial'   c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144

error C2784: 'bool std::operator <(const std::unique_ptr<_Ty,_Dx> &,const std::unique_ptr<_Ty2,_Dx2> &)' : could not deduce template argument for 'const std::unique_ptr<_Ty,_Dx> &' from 'const foo::spatial'  c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144

error C2784: 'bool std::operator <(const std::reverse_iterator<_RanIt> &,const std::reverse_iterator<_RanIt2> &)' : could not deduce template argument for 'const std::reverse_iterator<_RanIt> &' from 'const foo::spatial'    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144

error C2784: 'bool std::operator <(const std::_Revranit<_RanIt,_Base> &,const std::_Revranit<_RanIt2,_Base2> &)' : could not deduce template argument for 'const std::_Revranit<_RanIt,_Base> &' from 'const foo::spatial'  c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144    

error C2784: 'bool std::operator <(const std::pair<_Ty1,_Ty2> &,const std::pair<_Ty1,_Ty2> &)' : could not deduce template argument for 'const std::pair<_Ty1,_Ty2> &' from 'const foo::spatial'    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144

error C2676: binary '<' : 'const foo::spatial' does not define this operator or a conversion to a type acceptable to the predefined operator    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility 3144 
```

卡在这一点上。感谢任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T12:05:05.920

您的`way`类型必须有一个`operator<`定义才能在`std::set`.

`std::pair``operator<`如果两种类型都有，则有`operator<`。`int`has `operator<`，没关系，但`vector<spatial>`只有`operator<`当它的元素类型 has 时 has `operator<`。您的`spatial`班级没有，因此您的`way`typedef 也没有`operator<`。

`operator<`为您的`spatial`班级创建一个，您就可以了。

如果您认为`spatial`类不应该具有可比性但坚持要`way`在一个集合中，您还可以创建自己的比较器（具有两个`const way&`参数的仿函数/lambda，`true`如果第一个小于第二个则返回）并将其作为第二个模板传递您设置的参数。

无论如何，因为`std::set`存储其元素已排序，要使用它，您必须在某个时候定义元素的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:26:09.747

根据您的用例，您还可以使用`unordered_set`. 在那里你需要一个`operator==`和一个哈希函数：

```
#include <unordered_set>
#include <vector>
using namespace std;

class foo {
public:
  struct spatial {
    bool block;
    char status;  // H, M, Z

    bool operator== (spatial const & that) const {
       return block==that.block && status==that.status;
    }

    size_t hash() const {
       return status & static_cast<int>(block) << 9;
    }
  };

  typedef pair< int, vector<spatial> > way;  // tag + spatial vector

  struct way_hash {
    size_t operator()(const way &w) const{
      return w.first;
    }
  };

  typedef unordered_set< way, foo::way_hash > one_set;

  void bar() 
  {
     way theWay;
     theWay.first = 10;

     one_set theSet;
     one_set::iterator sit = theSet.end();
     if (theSet.size() == 16) {
        sit = theSet.begin();
     }
     theSet.insert(sit, theWay);
  }
};

int main() {
   foo f;
   f.bar();

   return 0;
} 
```

# c++ - 抽象类继承另一个具有相同函数名的抽象类

> ID：14424313
> 
> 赞同：4
> 
> 时间：2013-01-20T12:03:10.397
> 
> 标签：c++, class, inheritance, virtual, abstract

```
 class subscriber
 {
 public:
      virtual void update() = 0;
 }

 class entity : public subsriber
 {
 public:
      virtual void update() = 0;
 }

 class myObject : public entity
 {
 public:
      virtual void update()
       {
        do_things();
       }
 }

 subscriber * ptr = new myObject; //will use shared_ptr, but here i want simplicity

  ptr->update(); 
```

问题是，会调用正确的更新函数（在 myObject 中实现的那个）吗？在一个“家族”中拥有两个同名的纯虚函数是否有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:06:07.417

> 会调用正确的更新函数（在 myObject 中实现的那个）吗？

是的，它会被调用。

> 在一个“家族”中拥有两个同名的纯虚函数是否有效？

第二个声明（即在`entity`类内部）没有将第二个纯虚函数引入家族：签名是相同的，`update()`单个虚函数也是如此。此外，不需要第二次声明它：将保持抽象，并且即使您删除了第二次声明`entity`，也可以访问该方法。`update()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:08:51.090

虚函数或虚方法是一种函数或方法，其行为可以在继承类中被具有相同签名的函数覆盖。

所以答案是*肯定*的。

# assembly - 使用 INT 进行显示

> ID：14424315
> 
> 赞同：1
> 
> 时间：2013-01-20T12:03:24.927
> 
> 标签：assembly, x86, dos

为什么指令 109 似乎已被执行，即使它在运行时实际上并没有被指令指针到达。据我所知（C++ 背景），处理器一次处理 1 条指令，并且有条不紊。首先执行地址 100,102,105 和 107，那么为什么 INT 21 可以在成为下一行（尚未声明）之前显示内存位置 109 的内容？

（假设我们在调试时输入这些指令）

```
100 MOV AH,09
102 Dx,109
105 INT 21
107 JMP 100
109 DB 'Hello World', '$' <Enter> <Enter> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:08:24.120

`DB`不是*指令*，它是*伪指令*，也就是*汇编指令*。它告诉汇编器将以下*数据*字节存储在当前地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:08:22.497

当程序被汇编时，汇编器会将你的字符串放在正确的地址。处理器可以从它没有执行的地址中读取。指令指针只是一个指针，您可以从大于指令指针的地址读取而不会出现问题。毕竟内存是“随机可访问的”。

没有“声明”。只有地址。一些汇编程序有标签，但这些标签在汇编时由汇编器翻译成地址。

# opencv - Opencv 无法访问我的网络摄像头

> ID：14424325
> 
> 赞同：5
> 
> 时间：2013-01-20T12:04:24.127
> 
> 标签：opencv, webcam

我无法使用 opencv 2.4.3 访问网络摄像头。

我的系统：

HP Probook 4530s - HP 固定式高清网络摄像头

Ubuntu 12.10

OpenCV 2.4.3

如果我想捕捉我的内置相机，我会收到错误：捕捉为空

我正在使用[http://opencv.willowgarage.com/wiki/CameraCapture](http://opencv.willowgarage.com/wiki/CameraCapture)示例代码。

示例代码是：

```
#include "cv.h" 
#include "highgui.h" 
#include <stdio.h>  
// A Simple Camera Capture Framework 
int main() {
CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY );
if ( !capture ) {
 fprintf( stderr, "ERROR: capture is NULL \n" );
 getchar();
 return -1;
}
// Create a window in which the captured images will be presented
cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );
// Show the image captured from the camera in the window and repeat
while ( 1 ) {
 // Get one frame
 IplImage* frame = cvQueryFrame( capture );
 if ( !frame ) {
   fprintf( stderr, "ERROR: frame is null...\n" );
   getchar();
   break;
 }
 cvShowImage( "mywindow", frame );
 // Do not release the frame!
 //If ESC key pressed, Key=0x10001B under OpenCV 0.9.7(linux version),
 //remove higher bits using AND operator
 if ( (cvWaitKey(10) & 255) == 27 ) break;
}
// Release the capture device housekeeping
cvReleaseCapture( &capture );
cvDestroyWindow( "mywindow" );
return 0;
} 
```

我还使用打字终端尝试了**xawtv -hwscan 。**我得到这个输出：

```
looking for available devices
port 129-144

type : Xvideo, image scaler
name : Intel(R) Textured Video`

/dev/video0: OK    
             [ -device /dev/video0 ]
type : libv4l

name : HP HD Webcam [Fixed]

flags:  capture 
```

然后我可以输入**xawtv video0**访问我的网络摄像头。我想我的网络摄像头没有问题。我对opencv有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:47:48.660

几分钟前我解决了我的问题。我决定与处理类似错误的人分享我的解决方案。

首先我没有安装下面的一些数据包（我不记得它们中的哪一个，所以我将它们全部粘贴）

libjpeg62-dev

libtiff4-dev

zlib1g-dev

libjasper-开发

libavcodec-dev

libdc1394-22-dev

libgstreamer0.10-dev

libgstreamer-plugins-base0.10-dev

libavformat-dev

libv4l-开发

libswscale-dev

然后您应该使用此代码配置您的 cmake 进程

```
cmake -D CMAKE_BULD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON USE_V4L=ON WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON USE_GStreamer=ON .. 
```

请注意 USE_V4L=ON 此代码..

我希望你在阅读我的解决方案后解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T13:09:09.057

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace cv;
using namespace std;

int main()
{
  VideoCapture webcam;
  webcam.open(0);

  if(!webcam.isOpened())//**EDITED**
    {
      std::cout<<"CANNOT OPEN CAM"<<std::endl;
      return -1;
    }

  Mat frame;

  while(true)
  {
    webcam >> frame;
    imshow("TEST",frame);
    waitKey(20);
  }
  return 0;
} 
```

试试上面的代码...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-26T11:55:37.977

在某些情况下，这取决于内置摄像头的响应时间（就像我的情况一样）。我发现 HP G62 上的内置网络摄像头仅在第一次 opencv cap.read(frame) 调用后“唤醒”。因此，为了从相机中获得正面读数（因此代码后面没有错误），我在继续之前多次调用：

```
if (!cap.read(frame))
{
    if(!cap.read(frame))
    {
        if(!cap.read(frame))
        {
            if(!cap.read(frame))
            {
                 printf("Cam read error");
            }
        }
    }
} 
```

对我来说，最佳值是 4 次读取调用，这可以确保我的相机在运行主代码块之前处于唤醒状态并打开。一个简单的“waitKey”调用可能会起作用，并且只有两个读取调用，尽管我还没有尝试过。

# eclipse - 更改了 Tomcat 中的 JSF 实现。从 Mojarra 到 MyFaces。托管豆不起作用

> ID：14424326
> 
> 赞同：0
> 
> 时间：2013-01-20T12:04:48.530
> 
> 标签：eclipse, jsf, tomcat, myfaces

我正在使用具有内置 jsf 实现 Mojarra 的 Tomcat-7.0.33。是对的吗？

我想搬到 Apache MyFaces。我做了什么，以实现这一目标：

**我已从 /WEB-INF/lib/ 中删除**

1.  jsf-api-2.1.7
2.  jsf-impl-2.1.7

**在 /WEB-INF/lib/ 中添加：**

1.  myfaces-api-2.1.10
2.  myfaces-impl-2.1.10
3.  加上 5 个 apache commons-jars

**所以我完全 /lib 文件夹：**

1.  commons-beanutils-1.8.3
2.  commons-codec-1.3
3.  commons-collections-3.2
4.  commons-digester-1.8
5.  公共日志记录-1.1.1
6.  gson-2.2.2
7.  jstl-1.2
8.  myfaces-api-2.1.10
9.  myfaces-impl-2.1.10
10.  漂亮的脸-jsf2-3.3.3
11.  primefaces-3.4

我正在使用 Eclipse 4.2 (Juno)。**我已经清理了 Tomcat 服务器。**

当我请求我的一个页面时，一切看起来都很好（甚至是源代码）。但是我的托管豆不起作用。似乎 JSF 没有注册/找到它们。

我想我不需要在这里张贴我的脸或豆子，因为使用 mojarra 它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:12:23.233

MyFaces 与自身的另一个实例发生冲突。`myfaces-bundle.jar`已经包含 API 和 impl 。您需要*包括*

*   `myfaces-api.jar`
*   `myfaces-impl.jar`

*或者*

*   `myfaces-bundle.jar`

但不是两者兼而有之。

# javascript - 如何获取存储在 DOM 元素中的数据？

> ID：14424327
> 
> 赞同：3
> 
> 时间：2013-01-20T12:04:53.393
> 
> 标签：javascript, jquery

我有一个`bar`存储数据的类 DOM 元素`foo`，它是另一个 DOM 元素的 id。

```
<div class="bar" data="foo">...</div> 
```

当我将鼠标悬停在此类元素上时，我想获取数据（id）指向的 DOM 元素。我这样做了：

```
$(".bar").hover(function(){alert($("#"+$(this).data()));}); 
```

但是当我悬停时，我得到了这个错误：

```
Uncaught Error: Syntax error, unrecognized expression: #[object Object] 
```

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T12:08:36.930

您将`data()`方法与元素的`data`属性混淆了。

该`data()`方法返回附加到元素的不相关数据对象，而不是您要查找的字符串。

* * *

**解决方案 1 - 数据作为属性**

要在示例中获取您要查找的值，您应该使用以下`attr()`方法查询属性：

```
$(".bar").hover(function(){alert($("#"+$(this).attr('data')));}); 
```

* * *

**解决方案 2 - 数据作为对象**

使用该`data()`方法，您可以手动将信息附加到元素：

```
$('.bar').data('data','foo');
$(".bar").hover(function(){alert($("#"+$(this).data('data')));}); 
```

请注意，在这种情况下`'data'`，它只是元素数据对象中键的任意名称。有关该`data()`方法的更多信息，请参阅[jQuery 手册](http://api.jquery.com/data/)

* * *

**解决方案 3 - 作为对象的数据和 HTML5 属性**

我相信您的初衷是将`data`属性作为 HTML5 数据属性进行查询，根据[jQuery 文档](http://api.jquery.com/data/)应该是`automatically pulled in to jQuery's data object`.

但是，请注意，根据[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)，HTML5 数据属性应具有`data-`前缀。因此，为了让您的示例正常工作，该属性不能命名`data`，而是`data-something`. 例如：

```
<div class="bar" data-something="foo">...</div> 
```

然后您可以使用 jQuery 的`data()`方法访问它：

```
 $(".bar").hover(function(){alert($("#"+$(this).data('something')));}); 
```

请注意如何`data-something`使用 访问`data('someting')`，因为 jQuery 会自动删除`data-`前缀。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T12:08:25.403

您需要使用 attr 函数访问属性。

```
$(".bar").hover(function() {
     alert($("#"+$(this).attr('data')));
   }); 
```

# c# - 如何在最后一个列表中插入元素？

> ID：14424329
> 
> 赞同：11
> 
> 时间：2013-01-20T12:04:59.307
> 
> 标签：c#, list

我有一个清单`m`。我想在 this 的末尾插入一个元素`List`。请告诉我我该怎么做。

```
public List<double> m = new List<double>();
m[0].Add(1);
m[1].Add(2);
m[2].Add(3); 
```

如果我将元素 7 添加到末尾，我想要以下输出：

```
1 2 3 7 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T12:09:42.150

`m.Add(7);`将其添加到列表的末尾。

你正在做的是试图调用方法 Add on a double

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T12:08:22.207

利用：

```
List<double> m = new List<double>();
m.Add(1);
m.Add(2);
m.Add(3);
m.Add(7); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:10:28.027

您应该使用[Add](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)方法。

例子 ：

```
m.Add(7); 
```

此[示例](http://www.dotnetperls.com/list)向您展示如何将元素添加到`List`以及如何打印它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:09:53.140

你可以使用[**`List<T>.Add()`**](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)方法。喜欢;

> 将对象添加到列表的**末尾**。

```
List<double> m = new List<double>();
   m.Add(1);
   m.Add(2);
   m.Add(3);
   m.Add(7); 
```

这是一个[**`DEMO`**](http://ideone.com/hTpd8k).

# asp.net-mvc - 在 MVC 中将 dbml 与存储过程一起使用

> ID：14424331
> 
> 赞同：0
> 
> 时间：2013-01-20T12:05:03.393
> 
> 标签：asp.net-mvc

我使用 Webforms 在 MVC 中创建了一个项目。我需要在 MVC 中包含带有存储过程的 dbml。我是 MVC 新手，我知道我需要创建 dbml 并在模型中调用它们。

我不知道如何实现它。请给我一个 MVC 中的示例项目，其中包含 dbml 中的存储过程。

请提供任何网址。

问候 S.Guhananth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:51:18.707

因此，既然您提到了 dbml，我们就知道您使用的是 Linq to SQL。它实际上与 MVC 无关，因为您可以将 Linq to SQL 与任何前端技术一起使用。这是示例教程：

[http://dodgenotes.blogspot.ca/2012/02/how-to-create-dbml-and-invoke-stored.html](http://dodgenotes.blogspot.ca/2012/02/how-to-create-dbml-and-invoke-stored.html)

# ios - 从 sqlite 检索表视图中每个部分的数据

> ID：14424335
> 
> 赞同：0
> 
> 时间：2013-01-20T12:05:16.653
> 
> 标签：ios, sqlite

我的应用程序用于每个月的费用，我有一个名为 Expense 的表包含 4 列（类型、ExpenseMonth、金额和名称），我现在每天都为我的费用插入数据我如何在一个部分中显示每天的费用表视图？

`e.g :`如果日期是`2-1-2013`我只想检索这一天的费用，依此类推。

我编写了以下查询，但每个部分都检索相同的数据。

```
const char *sql ="select Name from Expense  where strftime('%m-%d',ExpenseMonth) Group by ExpenseMonth order by ExpenseMonth desc"; 
```

这是我更正后的代码....

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSMutableArray *Dateo= [[NSMutableArray alloc]init];
NSMutableArray *NAMeA= [[NSMutableArray alloc]init ];

if (sqlite3_open([[AppDelegate getDBPath] UTF8String], &database) == SQLITE_OK) {

    const char *sql ="select ExpenseMonth,count(*) as day from Expense  where strftime('%m',ExpenseMonth)=strftime('%m','now') group by ExpenseMonth order by ExpenseMonth desc";
    sqlite3_stmt *selectstm;
    int result = sqlite3_prepare_v2(database, sql, -1, &selectstm, NULL);
    if( result== SQLITE_OK) {
        while(sqlite3_step(selectstm) == SQLITE_ROW) {
            NSString *dateAndTime=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstm, 0)];
            NSInteger numofday=sqlite3_column_int(selectstm,1);
            MaxEntity *DatTime=[[MaxEntity alloc]initWithDate:dateAndTime andnumofDay:numofday];                
            [Dateo addObject:DatTime];
            NSLog(@"Date %@",dateAndTime);
            for (NSString *str in Dateo) {
                NSString *querySQL =[NSString stringWithFormat:@"select Name, amount from Expense  where ExpenseMonth=\"%@\" order by ExpenseMonth desc",dateAndTime];
                const char *query_stmt = [querySQL UTF8String];
                sqlite3_stmt *selectstmt;
                int result = sqlite3_prepare_v2(database, query_stmt, -1, &selectstmt, NULL);
                if( result== SQLITE_OK) {
                    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
                        NSString *NAMe=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
                        NSString *Amount=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                        MaxEntity *NM=[[MaxEntity alloc]initWithName:NAMe andAmount:Amount];
                        [NAMeA addObject:NM];                          
                        MaxEntity *curItem = [NAMeA objectAtIndex:indexPath.section ]; //Get the model information at row location.
                        cell.textLabel.text = curItem.name;
                        NSLog(@"text%@",cell.textLabel.text);

                        [NAMeA removeLastObject];
                        [Dateo removeLastObject];
                    }
                }
                sqlite3_finalize(selectstmt);
             }
        }
    }
    sqlite3_finalize(selectstm);
    sqlite3_close(database);
}

return cell;

} 
```

它读取日期，然后根据日期选择数据，在完成检索数据后，它再次返回数据库以再次检索第一个日期并在此行中引发异常，请任何人帮助我停止选择语句什么时候检索所有日期？？？ `MaxEntity *curItem = [NAMeA objectAtIndex:indexPath.section ];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:37:10.157

`select Name from Expense where strftime('%m-%d',ExpenseMonth) Group by ExpenseMonth order by ExpenseMonth desc`

你的 where 子句只计算一个字符串值，它不比较任何东西，所以它总是返回相同的结果。它需要采用`where ExpenseMonth = ...`. 因此，对于给定的部分/日期，您需要设置如下查询：

`NSString *sql = [NSString stringWithFormat:@"select Name from Expense where ExpenseMonth = %@ Group by ExpenseMonth order by ExpenseMonth desc", sectionDate];`

（抱歉，这是在 Objective-C 中，这是我的工作，但应该让你知道如何在 C++ 中做到这一点，我认为这是你正在工作的。）

基本上，循环遍历将日期字符串 (sectionDate) 替换为表的每个部分的 SQL 语句（替换“%@”）的日期。

# c# - netsh interface set interface name="Local Area Connection 2" admin=DISABLED

> ID：14424338
> 
> 赞同：1
> 
> 时间：2013-01-20T12:05:39.900
> 
> 标签：c#, interface, adapter, netsh

我想禁用所有网络适配器：

我看到它可以通过系统命令 netsh 来完成。

当我运行以下命令时，出现错误。

```
C:\Windows\system32>netsh interface set interface name="Local Area Connection 2" admin=DISABLED
Area is not an acceptable value for connect.
The parameter is incorrect. 
```

似乎命令行解析器无法获取间距。如果使用单引号（而不是双引号），也会发生同样的情况。

我需要你的帮助大师。

顺便说一句，我的代码是 C#，我尝试了很多来自网络的示例，但都没有奏效。

```
System.Diagnostics.ProcessStartInfo psi = 
       new System.Diagnostics.ProcessStartInfo(
               "netsh", 
               "interface set interface name=\"" + interfaceName + "\" admin=enabled");
 System.Diagnostics.Process p = new System.Diagnostics.Process(); 
  p.StartInfo = psi; 
  bool result = p.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T09:25:01.297

我用

```
netsh interface set interface "Local Area Connection 2" ENABLED 
```

它对我来说很好，并启用了“本地连接 2”

可能你可能会在你的代码中使用这种方式，它应该适合你。

# windows - Windows批处理编程：仅从文件中删除完全匹配的行

> ID：14424339
> 
> 赞同：0
> 
> 时间：2013-01-20T12:05:41.113
> 
> 标签：windows, batch-file, cmd

我有一个这样的文件：

```
exit;
exit_cool
int exit =30
exitstatus;
exit ;
 exit;
some exit;
coolexit;
this line should not be removed.
exitexit; 
```

我想删除仅包含“exit;”的行 从此文件中。所以我希望该命令仅从文件中删除第一行。我目前正在使用此命令：

```
type somefile.txt | find /v "exit;" 
```

但我得到的输出是：

```
exit_cool
int exit =30
exitstatus;
exit ;
this line should not be removed. 
```

正如您所看到的，该命令删除了所有包含的行`exit;`。我只希望删除第 1 行，因为它是完全匹配的。有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:51:13.370

FIND 不能做你想做的事。但是 FINDSTR 可以:-)

将 FINDSTR 与正则表达式锚点`^`一起用于行首和`$`行尾：

```
findstr /v "^exit;$" "somefile.txt" 
```

或者使用`/x`具有完全相同含义的选项，但也可以与字符串文字一起使用，而不仅仅是正则表达式：

```
findstr /v /x /c:"exit;" "somefile.txt" 
```

请注意，行尾`$`锚和`/x`选项（和`/e`结束选项）仅在文本文件使用以回车/换行符终止的 Windows 样式行时才能正常工作。仅以换行符结尾的 Unix 样式行将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:12:43.250

使用`findstr`命令。而不是`find` 它更好，它也需要正则表达式。

```
type somefile | findstr /v "^exit;" 
```

或者

```
findstr /v "^exit;" somefile 
```

祝你好运

# mysql - 估计/加速 mysql 上的巨大表自连接

> ID：14424344
> 
> 赞同：0
> 
> 时间：2013-01-20T12:06:14.733
> 
> 标签：mysql, performance

我有一张大桌子：

```
 CREATE TABLE `messageline` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `hash` bigint(20) DEFAULT NULL,
  `quoteLevel` int(11) DEFAULT NULL,
  `messageDetails_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK2F5B707BF7C835B8` (`messageDetails_id`),
  KEY `hash_idx` (`hash`),
  KEY `quote_level_idx` (`quoteLevel`),
  CONSTRAINT `FK2F5B707BF7C835B8` FOREIGN KEY (`messageDetails_id`) REFERENCES `messagedetails` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=401798068 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

我需要以这种方式找到重复的行：

```
create table foundline AS
select ml.messagedetails_id, ml.hash, ml.quotelevel
from messageline ml,
     messageline ml1
where ml1.hash = ml.hash
  and ml1.messagedetails_id!=ml.messagedetails_id 
```

但是这个请求已经工作了> 1天。这太长了。几个小时就好了。我怎样才能加快速度？谢谢。

解释：

```
+----+-------------+-------+------+---------------+----------+---------+---------------+-----------+-------------+
| id | select_type | table | type | possible_keys | key      | key_len | ref           | rows      | Extra       |
+----+-------------+-------+------+---------------+----------+---------+---------------+-----------+-------------+
|  1 | SIMPLE      | ml    | ALL  | hash_idx      | NULL     | NULL    | NULL          | 401798409 |             |
|  1 | SIMPLE      | ml1   | ref  | hash_idx      | hash_idx | 9       | skryb.ml.hash |         1 | Using where |
+----+-------------+-------+------+---------------+----------+---------+---------------+-----------+-------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:22:39.640

你可以像这样找到你的重复项

```
SELECT messagedetails_id, COUNT(*) c
FROM messageline ml
GROUP BY messagedetails_id HAVING c > 1; 
```

如果仍然太长，请添加条件以在索引字段上拆分请求：

```
WHERE messagedetails_id < 100000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:25:12.913

是否需要仅使用 SQL 来执行此操作？因为对于如此多的记录，您最好将其分解为两个步骤：

1.  首先运行以下查询

    ```
     CREATE TABLE duplicate_hashes
     SELECT * FROM (
       SELECT `hash`, GROUP_CONCAT(`id`) AS ids, COUNT(*) AS cnt,
       COUNT(DISTINCT messagedetails_id) AS cnt_message_details,
       GROUP_CONCAT(DISTINCT messagedetails_id) as messagedetails_ids
       FROM `messageline` GROUP BY `hash` ORDER BY NULL HAVING cnt > 1
     ) tmp 
     WHERE cnt > cnt_message_details 
    ```

    这将为您提供每个哈希的重复 ID，并且由于您在*哈希*字段上有一个索引，分组依据将相对较快。现在，通过计算不同的*messagedetails_id*值并进行比较，您可以隐式满足对不同*messagedetails_id的要求*

    ```
     where ml1.hash = ml.hash
     and ml1.messagedetails_id!=ml.messagedetails_id 
    ```

2.  使用脚本检查duplicate_hashes表的每条记录

# c# - 在 DataGridViewComboBoxColumn 中通过 FK 过滤 DataGridView

> ID：14424345
> 
> 赞同：0
> 
> 时间：2013-01-20T12:06:21.080
> 
> 标签：c#, datagridview

我有以下数据库结构：

`T_CUSTOMER: ID (PK), F_NAME varchar`

`T_ORDERS: ID (PK), ID_CUSTOMER (FK), F_ORDER_DATE datetime`

`DataGridView`显示表中的数据，`T_ORDERS`我希望能够按客户名称过滤和排序结果`("F_NAME LIKE '% s%', 'ORDER BY F_NAME')`。

我所能做的就是过滤和排序`ID_CUSTOMER`包含数值的列。如何最容易地为包含外键并且是`DataGridViewComboBoxColumn`.

# php - 寻找复杂数组的最大路径

> ID：14424346
> 
> 赞同：2
> 
> 时间：2013-01-20T12:06:30.570
> 
> 标签：php

我有一个数组：

```
$data = array(
  1 => array(
    "time" => 1,
    "parent" => array(4)
  ),
  2 => array(
    "time" => 3,
    "parent" => array(4, 5)
  ),
  3 => array(
    "time" => 2,
    "parent" => array(6)
  ),
  4 => array(
    "time" => 1,
    "parent" => array(6)
  ),
  5 => array(
    "time" => 1,
    "parent" => array(4)
  ),
  6 => array(
    "time" => 1,
    "parent" => array()
  )
); 
```

key是一个元素的id，parent是一个元素数组，指的是元素id，time就是一个整数。

这是给定数组的图示示例：

[架构](http://i.stack.imgur.com/k06xu.png)

左下角的整数是“id”，中间的整数是“time”。

我的目标是找到这个数组最耗时的路径。在给定的示例中，路径将是 2->5->4->6 (id wise)，导致总共 6 个“时间”。在纸上看起来很容易，但是我似乎无法编写算法来获取最耗时路径的元素。我将不胜感激任何帮助。

我认为算法应该是一种蛮力式的，并检查所有可用的选项。因此，对于给定的数组，它会像：

```
1 -> 4 -> 6 = 3
2 -> 4 -> 6 = 5
2 -> 5 -> 4 -> 6 = 6 
3 -> 6 = 3
4 -> 6 = 2
5 -> 4 -> 6 = 3 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:30:44.603

请注意，这仅在数组中没有循环时才有效。

```
// Note: built this in the SO editor, might have bugs
$cached = [];
$arrays = []; // Do this yourself

function get_path($num) {
    global $arrays, $cached;
    if (isset($cached[$num])) return $cached[$num];

    $array = $arrays[$num];
    $maxtime = $array['time'];
    $bestpath = array($num);
    foreach ($array['parent'] as $i) {
        $path = get_path($i);
        if ($path['time']+$array['time'] > $maxtime) {
            $maxtime = $path['time'] + $array['time'];
            $bestpath = array_merge(array($num),$path['path']);
        }
    }

    $cached[$num] = array('path' => $bestpath, 'time' => $maxtime);
    return $cached[$num];
}

var_dump(get_path(5)); 
```

不是真正的蛮力方式，应该足够接近`O(n)`. 基本思想是您只需缓存它可以采用的路径。

*注意：我在这里使用了一些 C 风格的语法，但理想情况下，您实际上不会像这样编写代码*

# android - 使用android将文本文件数据插入sqlite数据库

> ID：14424350
> 
> 赞同：1
> 
> 时间：2013-01-20T12:06:46.793
> 
> 标签：android, sqlite

我的 android 应用程序在数据库中包含两个表，其中一个表存储动态数据，另一个表应通过解析文本文件将近 7000 个字典单词存储到该表中。此操作应在应用程序第一次安装时执行一次。文本文件是存储在原始文件夹中。

我在这里面临的问题是，当我尝试解析并存储到该表中时，logcat 说数据库中没有这样的表。

这是方法和 DBHelper 代码段：

DBHelper 类片段：

```
private static final String DICTIONARY_TABLE_CREATE =
"CREATE TABLE " + DATABASE_TABLE_NAME_DICTIONARY + "(" +
"_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
"words TEXT NOT NULL);";

private static final String USER_TABLE_CREATE =
"CREATE TABLE " + DATABASE_TABLE_NAME_USERINFO + "(" +
"_id INTEGER PRIMARY KEY AUTOINCREMENT,"+
"player_name TEXT NOT NULL, " +
"player_username TEXT NOT NULL, " +
"player_pass TEXT NOT NULL, " +
"player_played VARCHAR NOT NULL, " +
"player_won VARCHAR NOT NULL, " +
"player_loss VARCHAR NOT NULL);";

public void onCreate(SQLiteDatabase db) 
{       
try
{
db.execSQL(USER_TABLE_CREATE);
db.execSQL(DICTIONARY_TABLE_CREATE);
System.out.println("In onCreate");
}
catch(Exception e)
{
e.printStackTrace();
}
} 
```

这是解析文本文件并将值插入数据库的方法：

```
public void CopytxtfileTodb()
{
InputStream inputStream = getResources().openRawResource(R.raw.wordslists);
BufferedReader br = new BufferedReader( new InputStreamReader(inputStream));
SQLiteDatabase db = playerDB.getWritableDatabase();

try 
{                     
String line = ""; 

while((line= br.readLine()) != "")
{                                                 
ContentValues values = new ContentValues();

values.put("words", line);

try
{   
db.insert(DBHelper.DATABASE_TABLE_NAME_DICTIONARY, null, values);                                       
}                                                                  
catch(Exception e)
{
e.printStackTrace();

}                 
}              

} 
catch(Exception e) 
{ 
System.err.println("Parse Error: " + e.getMessage());                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:58:11.330

问题可能是因为 DbHelper 没有正确实例化。请检查在 dbhelper 实例化期间是否传递了正确的数据库名称、版本和上下文。- 你也能告诉我代码中的哪个地方 logcat 抱怨没有数据库存在 - 附上你的整个代码而不是片段

# python - 查找列表中元素的顺序号

> ID：14424351
> 
> 赞同：0
> 
> 时间：2013-01-20T12:07:09.243
> 
> 标签：python, recursion

我正在尝试在列表中查找订单号，例如：

```
lst = [ a, b, [c,d], e, f]

order([c,d]) = 2
order('e') = 3 
```

我是这样想的：

```
def order(item,lst):
    if lst[0] == item:
       return n
    else:
       return order(item,lst[0:]) 
```

但它给出了错误（相关的递归深度）。我的错是什么？或者我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:26:18.093

为什么不直接使用`.index()`？

```
In [1]: l = [ a, b, [c,d], e, f]
In [2]: l.index([c,d])
Out[2]: 2
In [4]: l.index(e)
Out[4]: 3 
```

如果您确实需要递归函数，请使用以下内容：

```
def order(item, l, n=0):
    if l:
        if l[0] == item:
            return n
        elif len(l) >= 2: # for python 2, use "else:"
            return order(item, l[1:], n+1) 
```

如果递归不是必须的，但你不能使用`.index()`，请使用 for 循环：

```
def order(item, l):
    for i,v in enumrate(l):
        if v == item:
            return i 
```

使用这两种方法，只需调用`order([c,d], lst)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:15:46.350

1.  您的函数在基本情况下返回 n，但从不为其分配任何内容。如果你要找的东西在第一个元素中，它应该返回 0。
2.  您的递归案例通过了整个列表，这就是递归永远不会结束的原因。如果您传递了 lst[1:]，那么每次调用时列表都会变小，但您需要将结果加 1（实际上，在每次递归调用中，所有内容都会下移 1 个位置）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:23:49.437

```
def order(item, lst,n=0):
    if not lst:
        return None
    elif lst[0] == item:
        return n
    else:
        return order(item, lst[1:],n+1)

lst = ['a', 'b', ['c', 'd'], 'e', 'f']

order(['c', 'd'], lst) 
```

*出去：*

```
2 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T12:08:30.163

Python 有一个内置函数可以做到这一点：

```
lst = ['a', 'b', ['c', 'd'], 'e', 'f']

assert lst.index(['c', 'd']) == 2
assert lst.index('e') == 3 
```

如果要修复自己的功能，则需要一个基本案例：

```
def order(item, lst):
    if not lst:
        return None
    elif lst[0] == item:
        return n  # You need to calculate n here. 
                  # I'm not doing your homework for you
    else:
        return order(item, lst[1:]) 
```

# sqlcipher - 如何获取 sqlcipher 加密源代码，sqlcipher 是否支持数据恢复机制？

> ID：14424355
> 
> 赞同：0
> 
> 时间：2013-01-20T12:07:30.817
> 
> 标签：sqlcipher

我刚开始研究 sqlcipher 代码库。我有两个问题。首先，我对 sqlcipher 源代码的逻辑/加密部分感兴趣。在我看来，这部分是用 C/C++ 实现的，但我无法获得源代码。如果可以的话，你能指点我的代码吗？二、sqlcipher是否支持用户忘记密码的数据恢复机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:41:40.600

SQLCipher 源代码在 Github 上公开[可用](http://github.com/sqlcipher/sqlcipher)。就你可能开始寻找的地方而言，我建议`src/crypto_impl.c`. 由于数据库的全部内容都是加密的，因此如果没有数据库的密钥，就无法推断数据。

# c# - 处理空结果

> ID：14424358
> 
> 赞同：1
> 
> 时间：2013-01-20T12:07:55.153
> 
> 标签：c#, asp.net, asp.net-mvc, database, linq-to-sql

我有一个可以返回的数据库请求`null`：

```
Pony MyPony = db.Pony.Where(p => p.PonyOwnerId == user.UserId).First(); 
```

如果我的数据库中没有行，则会出现错误消息。

如何接受空查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:10:00.753

你可以写：

```
Pony myPony = db.Pony.Where(p => p.PonyOwnerId == user.UserId).FirstOrDefault();
if( myPony != null ) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:10:01.627

您可以使用[FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb340482.aspx)

```
Pony myPony = db.Pony.Where(p => p.PonyOwnerId == user.UserId).FirstOrDefault();

if (myPony == null) 
{ 
    .. 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T12:14:03.220

```
var MyPony = db.Pony.FirstOrDefault(p => p.PonyOwnerId != null && p.PonyOwnerId == user.UserId); 
```

或者

```
var MyPony = db.Pony.Where(p => p.PonyOwnerId != null && p.PonyOwnerId == user.UserId).FirstOrDefault(); 
```

或者

```
if (db.Pony.FirstOrDefault(p => p.PonyOwnerId != null && p.PonyOwnerId == user.UserId) != null)
{
 //Do stuff
} 
```

# perl - 在 perl CAM::PDF 中阅读 pdf

> ID：14424362
> 
> 赞同：-1
> 
> 时间：2013-01-20T12:08:20.810
> 
> 标签：perl

我想为 Linux 安装 perl 模块 CAM::PDF。有人可以建议如何做到这一点吗？我找不到可以下载此模块的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:57:45.140

> 我找不到可以下载此模块的任何地方

如何？？？

该模块在 CPAN 上可用。

尝试`cpanp install CAM-PDF`

# sockets - 套接字编程：bind() 系统调用

> ID：14424378
> 
> 赞同：1
> 
> 时间：2013-01-20T12:09:44.047
> 
> 标签：sockets, networking

在研究计算机网络作为课程主题时，我的概念是操作系统根据目标端口区分数据包并将其传递给在该端口上运行的应用程序。

后来我才知道我们可以使用同一个源（SourceIP:SourcePort）连接到两个不同的目的地（DestinationIP:DestinationPort）。

```
tcp        0      0 192.168.1.5:60000       199.7.57.72:80          ESTABLISHED 1000       196102      10179/firefox
tcp        0      0 192.168.1.5:60000       69.192.3.67:443         ESTABLISHED 1000       200361      10179/firefox
tcp        0      0 192.168.1.5:60000       69.171.234.18:80        ESTABLISHED 1000       196107      10179/firefox
tcp        0      0 192.168.1.5:60000       107.21.19.182:22        ESTABLISHED 1000       196399      10722/ssh
tcp        0      0 192.168.1.5:60000       69.171.234.18:443       ESTABLISHED 1000       201792      10179/firefox
tcp        0      0 192.168.1.5:60000       69.192.3.34:443         ESTABLISHED 1000       200349      10179/firefox
tcp        0      0 127.0.0.1:4369          127.0.0.1:51889         ESTABLISHED 129        12036       1649/epmd
tcp        0      0 192.168.1.5:60000       69.192.3.58:443         ESTABLISHED 1000       200352      10179/firefox
tcp        0      0 192.168.1.5:60000       74.125.236.88:80        ESTABLISHED 1000       200143      10179/firefox
tcp        0      0 192.168.1.5:60000       174.122.92.78:80        ESTABLISHED 1000       202935      10500/telnet
tcp        0      0 192.168.1.5:60000       74.125.236.87:80        ESTABLISHED 1000       201600      10179/firefox 
```

再深入一点，我开始知道如果应用程序使用 bind() 系统调用将套接字描述符与特定的 IP 和端口组合绑定，那么我们就不能再次使用相同的端口。否则，如果端口未绑定到任何套接字描述符，我们可以再次使用相同的端口和 IP 组合连接到不同的目标。

我在 bind() 系统调用的手册页中读到

```
 bind() assigns the address specified to by addr to the socket referred to by the file descriptor sockfd. 
```

我的问题是：

1.  当我们在编写客户端程序时通常不调用 bind() 系统调用时，操作系统如何自动选择端口号。

2.  当两个不同的应用程序使用相同的端口和 IP 组合连接到两个不同的服务器时，当这些服务器回复时，操作系统如何找出需要将哪个数据包重定向到哪个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:14:44.793

> 当我们在编写客户端程序时通常不调用 bind() 系统调用时，操作系统如何自动选择端口号

操作系统会随机选择一个未使用的端口（不一定是“下一个”端口）。

> 操作系统如何找出哪个数据包需要重定向到哪个应用程序

每个 TCP 连接由一个 4 元组标识：(src_addr, src_port, dst_addr, dst_port)，它是唯一的，因此足以识别每个段所属的位置。

### 编辑

> 当我们在编写客户端程序时通常不调用 bind() 系统调用时，操作系统如何自动选择端口号。

在 TCP 套接字的情况下，在“连接”之前的某个时间。例如，Linux 具有`inet_csk_get_port`获取未使用端口号的功能。`inet_hash_connect`在 中寻找`tcp_v4_connect`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:12:22.177

对于 1：操作系统只选择下一个可用端口。
对于 2：它是基于 dst 端口完成的。客户端应用程序将通过不同的客户端端口连接到同一服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T16:20:19.583

我认为对于客户端程序，操作系统在建立 TCP 连接后维护一个带有套接字 fd（由客户端打开）和服务器 IP+端口的表。因此，每当服务器回复时，操作系统可以针对特定服务器 IP+PORT 获取套接字 fd 和数据被写入套接字 fd。因此，在这个特定的套接字 fd 上，客户端可以使用服务器回复。

# javascript - RequireJS - 依赖注入器或服务定位器

> ID：14424382
> 
> 赞同：1
> 
> 时间：2013-01-20T12:10:04.007
> 
> 标签：javascript, dependency-injection, requirejs

好的，

使用 requirejs 作为依赖注入器是否合适/正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:46:47.317

是的。除了脚本加载之外，requirejs 的主要优点是解析应用程序的依赖树。它有很多不错的功能：

*   r 编译器将解析所有依赖项并将结果保存为单个 JavaScript 文件。
*   您可以更改单个依赖项的路径，以便创建可以共享某些模块但它们获得的依赖项不同的移动和桌面版本。
*   您可以稍后在您的应用程序中延迟加载模块

# java - 将适配器应用于 Spinner 会导致 NullPointerException？

> ID：14424383
> 
> 赞同：1
> 
> 时间：2013-01-20T12:10:05.713
> 
> 标签：java, android, android-layout, nullpointerexception, android-spinner

我有一个带有 2 个片段的基本 Android 应用程序。

我正在尝试用 some填写`Spinner`其中一个。这是我的方法（顺便说一句，如果我在.`Fragments``String``Try``onCreate`

```
public class RadarSelectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public RadarSelectionFragment() {
    }

    @Override
    public final View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.\
        if (getArguments().getInt(ARG_SECTION_NUMBER) == 1) {
            return inflater.inflate(R.layout.radars, container, false);
        } else {
            return container;
        }

    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            Spinner s = (Spinner) findViewById(R.id.stateselector);
            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity(), R.array.states, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s.setAdapter(adapter);
        } catch (Exception e) {
            Toast.makeText(getActivity(), e.toString(), 1).show();
        }
    }
} 
```

`R.array.states`是一个包含澳大利亚州和领地的数组，定义`R.id.stateselector`为：

```
 <Spinner
        android:id="@+id/stateselector"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"/> 
```

如果我注释掉该`Try`语句，则显示没有项目。

这一切都是按照来自 - [http://developer.android.com/guide/topics/ui/controls/spinner.html的教程完成的](http://developer.android.com/guide/topics/ui/controls/spinner.html)

任何帮助是极大的赞赏！！！

编辑 1：堆栈跟踪

```
01-20 22:25:09.402: E/AndroidRuntime(8442): FATAL EXCEPTION: main
01-20 22:25:09.402: E/AndroidRuntime(8442): java.lang.NullPointerException
01-20 22:25:09.402: E/AndroidRuntime(8442):     at com.example.radarau.MainActivity$RadarSelectionFragment.onCreate(MainActivity.java:176)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:877)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:807)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.app.Fragment.setUserVisibleHint(Fragment.java:801)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.app.FragmentPagerAdapter.setPrimaryItem(FragmentPagerAdapter.java:130)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1010)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.View.measure(View.java:15513)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.View.measure(View.java:15513)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.View.measure(View.java:15513)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.View.measure(View.java:15513)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.Choreographer.doFrame(Choreographer.java:532)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.os.Handler.handleCallback(Handler.java:725)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.os.Looper.loop(Looper.java:137)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at java.lang.reflect.Method.invokeNative(Native Method)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at java.lang.reflect.Method.invoke(Method.java:511)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-20 22:25:09.402: E/AndroidRuntime(8442):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:27:03.863

You can't use `findViewById` in `onCreate` method because the view hierarchy is not created yet. Try to move your code to `onActivityCreated`:

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    try {
        Spinner s = (Spinner) findViewById(R.id.stateselector);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity(), R.array.states, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(adapter);
    } catch (Exception e) {
        Toast.makeText(getActivity(), e.toString(), 1).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:22:22.137

我通过这种方式让它工作：

```
private Spinner spinner;
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
  View view = inflater.inflate(R.layout.myFragmentXmlFile, container, false);
  // Now use the above view to populate the spinner.
  setSpinnerContent( view );
  ...
}

private void setSpinnerContent( View view )
{
  spinner = (Spinner) view.findViewById( R.id.mySpinner );
  ...
  spinner.setAdapter( adapter );
  ...
} 
```

I passed the `fragment view` into my function and referenced that view to configure the `spinner`. That worked perfectly.

# javascript - 程序失败 - html 和 javascript 之间的连接错误？

> ID：14424385
> 
> 赞同：-3
> 
> 时间：2013-01-20T12:10:42.953
> 
> 标签：javascript

问题是按下按钮时没有任何反应。问题现在解决了。事情是 Javascript 是区分大小写的，这就是它的原因。愚蠢的失败从我这边。

```
 <script>
        function calculate() {
        var elev = document.getElementsByName("txt"); 
```

会做吗？但它没有？怎么了？

> ```
>  ...
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                 </td>
>                 <td>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
>                     <input type="text" name="txt" value="Insert name"><br/>
> 
>                     ...
>     <input type="button" value="Calculate" onclick="Calculate(event)" />
>         <script>
>         function calculate() {
>         var elev = document.getElementsByName("txt");
>         for(i=0; i<elev.length; i++) {
>             elev[i].used = false;
>         }
> 
>         for(j=0; j<elev.length; j++) {
>             var name1;
>             var name2;
>             var r = Math.floor(Math.random() * 20);
>             var k = Math.floor(Math.random() * 20);
> 
>             if (elev[r].used) {
>                 for(a=0; elev[a].used=true; a++) {
>                     elev[a] = elev[r];
>                 }
>                 }
>             if (elev[k].used) {
>                 for(b=11; elev[b].used=true; b++) {
>                     elev[b] = elev[r];
>                     if (b===11) {
>                         b=0;
>                     }
>                 }
>             }
> 
>             name1 = elev[r];
>             name1.used = true;
>             name2 = elev[k];
>             name2.used = true;
>             document.write(name1 + " og " + name2 );
>         }
>     }
> 
>          </script>
>       </body>
>     </html> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:14:32.313

“JavaScript”区分大小写。您为事件分配一个`Calculate`处理函数`onclick`。

```
<input type="button" value="Calculate" onclick="Calculate(event)" /> 
```

但实际的函数名称是`calculate`（对于 JS 来说是一个不同的函数）。

```
function calculate() { 
```

只要解决这个问题，代码就可以工作了。

# javascript - 如何创建使用原型属性的对象

> ID：14424387
> 
> 赞同：0
> 
> 时间：2013-01-20T12:10:59.713
> 
> 标签：javascript, prototypal-inheritance

我正在尝试创建类似于静态语言“静态字段”的东西。基本上：计数器属性应该在每次调用 init 函数时递增，但不管在哪个实例上。这是我用来测试的示例代码（[http://jsfiddle.net/HK8BY/2/](http://jsfiddle.net/HK8BY/2/)）：

```
var Widget = {
    counter: 0,
    init: function () {
        this.counter++;
        console.log("init called: " + this.counter);
    }
};

var t1 = Object.create(Widget);
var t2 = Object.create(Widget);
t1.init(); // should print: init called 1
t2.init(); // should print: init called 2
console.log(t1);
console.log(t2); 
```

目前，当我 console.log 实例时，我看到**proto**和 instance 都包含 counter 属性。我认为通过这种方法，只有**proto**才能拥有它。

那么如何将其更改为原型中只有计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:15:25.993

```
var twitter = (function() {
    var counter = 0;
    return {
        init : function() { counter++; console.log("init called: " + counter); }
    };
}()); 

var t1 = Object.create(twitter);
var t2 = Object.create(twitter);

t1.init();
t2.init(); 
```

[http://jsfiddle.net/HK8BY/1/](http://jsfiddle.net/HK8BY/1/)

因此，您只需创建返回所需对象的 IEFE（立即执行函数表达式）。该`counter`变量可用于该对象`init`函数的闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:17:42.010

```
var Widget = {
    init: function () {
        this.prototype.counter++;
        console.log("init called: " + this.counter);
    }
};
Widget.prototype.counter = 0;

var t1 = Object.create(Widget);
var t2 = Object.create(Widget);
t1.init();
t2.init();
console.log(t1);
console.log(t2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:46:07.527

You can simulate static fields by defining properties on a constructor function, but if you prefer to use `Object.create` in place of `new` then this might not be a solution you want to consider.

```
function Widget() {
    this.init()
};

Widget.counter = 0;

Widget.prototype.init = function() {
    this.constructor.counter++;
    console.log("init called: " + this.constructor.counter);
}; 
```

# jquery - 灯箱不适用于 ajax 调用后生成的新内容

> ID：14424389
> 
> 赞同：0
> 
> 时间：2013-01-20T12:11:08.360
> 
> 标签：jquery, ajax

ajax 调用后我的灯箱出现问题

目前是这样的

```
$(".trackz").click(function () {
    $(".contentmusic").remove();

    $.ajax({
        url: "data/loadContent.php?clickedcontent=" + $(this).attr("id"),
        success: function (html) {
            if (html) {
                $("#lightbox-panel").append(html);
                $("#lightbox, #lightbox-panel").fadeIn(300);
            }
        }
    });
}); 
```

但是当我用这个 ajax 调用加载新内容时

```
 $(window).scroll(function () {
     if ($(window).scrollTop() == $(document).height() - $(window).height()) {

         var myStylesLocation = "css/demo.css";

         $.ajax({
             url: "data/loadMoreMusic.php?lastMusic=" + $(".trackz:last").attr("id"),
             success: function (html) {
                 if (html) {
                     $("#trackz").append(html);
                     $('.fdw-background').hover(
                         function () {
                             $(this).animate({
                                 opacity: '1'
                             });
                         },
                         function () {
                             $(this).animate({
                                 opacity: '0'
                             });
                         }
                     );
                 } else {
                     $('div#loadMoreMusic').replaceWith("<center>Finished loading Music</center>");
                 }
             }
         });
     }
 }); 
```

我的灯箱不再适用于第二次 ajax 调用生成的新内容。任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:46:40.397

您（可能）试图在加载 DOM 时触发一个尚不存在的元素。

用这个：

```
//another notation because we want to trigger on a DOM manipulation
$('.someClass').on("click", "#someId", function(event){
     //do something
}); 
```

哪里`.someClass`是加载 DOM 时已经存在的类，哪里`#someId`是你想要点击但还不存在的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:19:40.407

更换时会发生什么：

```
$(".trackz").click(function () { 
```

和

```
$(".trackz").on('click', function () { 
```

当您向 DOM 添加动态内容时，您无法利用它们的事件处理。该`on()`方法允许您访问元素上的事件处理程序，而不管 DOM 是否更改。

您还应该使用`ajax()`. 成功功能应该放在`done()`（链接在同一个 jQuery 对象上的方法）中。

# c# - 设置 ClaimTypes.Name 不会产生 identity.name

> ID：14424391
> 
> 赞同：3
> 
> 时间：2013-01-20T12:11:17.827
> 
> 标签：c#, .net, claims-based-identity, claims

我正在玩 .net 4.5 中的声明授权。这工作得很好。但我有一个希望是小问题。

我认为设置名称声明类型应该产生一个身份名称

我检查了 ident.NameClaimType 与 ClaimTypes.Name 具有相同的值两者都是[http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name)

我设置了新的声明。我可以看到这是身份声明的一部分。但 Identity.Name 仍然是空的。

我究竟做错了什么？

```
 ClaimsIdentity ident = (ClaimsIdentity)incomingPrincipal.Identity;

  ident.AddClaim(new Claim(ClaimTypes.Name, resourceName)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:25:52.277

当我的声明身份没有`AuthenticationType`设置时，我遇到了同样的问题。一旦我`AuthenticationType`在`ClaimsIdentity`构造函数中传递了它，它就起作用了。

# ruby-on-rails - AJAX on Rails：如何放置加载的内容

> ID：14424393
> 
> 赞同：0
> 
> 时间：2013-01-20T12:11:57.553
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

`servicios`我的内部有一个名为的视图`static_pages`，该视图左侧有一个菜单，应在右侧单击时加载不同的服务描述`div`，我已经进行了 AJAX 调用，但现在我不知道如何将加载的内容放在页面上.

**app/views/static_pages/servicios.html.erb**

```
<%= provide(:title,'Servicios') %>
<% provide(:navbar,'serviciosnav') %>
<h1>Servicios</h1>
<div class="row">
    <div class="servicelist">
    <div class="navbar span4">
        <div class="navbar-inner">
            <ul class="nav" style="padding: 0">
            <% @servicios.each do |serv| %>
                <li><%= link_to serv.name,  "servicios/load?id="+serv.id.to_s, remote: true  %></li>
            <% end %>
            </ul>
        </div>
    </div>
    </div>
    <div id="servicedesc" class="span8">
        <%= render partial: "servicios/load", locals: {assets: @serv = @servicios.first} %>
    </div>
</div>
<script>
</script> 
```

**应用程序/控制器/servicios_controller.erb**

```
class ServiciosController < ApplicationController
  respond_to :html, :js

  def load
    @serv = Servicio.first
    if !params[:id].nil?
        @serv = Servicio.find(params[:id])
    end
    respond_with(@serv) do |format|
      format.html { render partial: "servicios/load"}
    end
  end
end 
```

Ans 这是对服务器的 GET 请求的响应：

```
GET http://localhost:3000/servicios/load?id=5

304 Not Modified
        63ms    
jquery.js?body=1 (line 8435)
ParamsHeadersResponseCookies

<h2>Promoción de Inversiones</h2>
<ul>
        <li>Captación de Inversionistas en Mercados Externos.</li>
        <li>Promoción de Proyectos Industriales, Empresariales e Inmobiliarios.</li>
        <li>Intermediación en la compra ó venta de Empresas.</li>
</ul> 
```

`div#servicedesc`每次从菜单中选择某些内容时如何更新。我一直在阅读整个互联网（API，论坛，这里），但它们都令人困惑和混乱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:31:34.557

jQuery 有一个漂亮的函数叫做[load()](http://api.jquery.com/load/)。

使用这行 jQuery 代码，您的 div 将异步加载并显示从该控制器返回的任何内容：

```
$('.navbar').on('click', function(){
  $('#servicedesc').load('servicios/load?id=5');
}); 
```

# c# - System.InvalidOperationException 从独立存储加载保存的图像时发生

> ID：14424396
> 
> 赞同：0
> 
> 时间：2013-01-20T12:12:20.460
> 
> 标签：c#, wpf, windows-phone-7, windows-phone-7.1, windows-phone-8

我从链接[ImageCaching](https://gist.github.com/2688372#file_cache_image_file_converter.cs%20%20images%20caching)中找到了一个类， 但是当我从隔离存储加载时，我得到了一个异常“System.InvalidOperationException”

这是我的代码

```
 public static object DownloadFromWeb(Uri imageFileUri)
    {
        WebClient m_webClient = new WebClient();                                //Load from internet
        BitmapImage bm = new BitmapImage();

        m_webClient.OpenReadCompleted += (o, e) =>
        {
            if (e.Error != null || e.Cancelled) return;
            WriteToIsolatedStorage(IsolatedStorageFile.GetUserStoreForApplication(), e.Result, GetFileNameInIsolatedStorage(imageFileUri));
            bm.SetSource(e.Result);
            e.Result.Close();
        };
        m_webClient.OpenReadAsync(imageFileUri);
        return bm;
    }

    public static object ExtractFromLocalStorage(Uri imageFileUri)
    {
        byte[] data;
        string isolatedStoragePath = GetFileNameInIsolatedStorage(imageFileUri);       //Load from local storage
        if (null == _storage)
        {
             _storage = IsolatedStorageFile.GetUserStoreForApplication();
        }
        using (IsolatedStorageFileStream sourceFile = _storage.OpenFile(isolatedStoragePath, FileMode.Open, FileAccess.Read))
        {

            // Read the entire file and then close it
            sourceFile.Read(data, 0, data.Length);
            sourceFile.Close();
           BitmapImage bm = new BitmapImage();
            bm.SetSource(sourceFile);///here got the exeption 
            return bm;

        }

    } 
```

所以我无法设置图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:46:45.720

我正在使用您提到的转换器，它可以工作，但您修改了方法。

您的 ExtractFromLocalStorage 方法不一样。在使用 SetSource 方法之前关闭流。

这是原始方法代码：

```
 private static object ExtractFromLocalStorage(Uri imageFileUri)
    {
        string isolatedStoragePath = GetFileNameInIsolatedStorage(imageFileUri);       //Load from local storage
        using (var sourceFile = _storage.OpenFile(isolatedStoragePath, FileMode.Open, FileAccess.Read))
        {
            BitmapImage bm = new BitmapImage();
            bm.SetSource(sourceFile);
            return bm;
        }
    } 
```

# php - 使会话变量在动态创建的子域上处于活动状态

> ID：14424398
> 
> 赞同：1
> 
> 时间：2013-01-20T12:12:25.543
> 
> 标签：php, database

我正在开发一个允许用户动态创建自己的子域的 Web 项目。在创建子域之前，他们应该登录到网站。现在想知道如何在他访问的子域上设置活跃用户的会话变量。尝试了很多功能，如 **session_set_cookie_params(0, '/', '.example.com');** **ini_set('session.cookie_domain', '.example.com');**

但一切都没有。没有功能起作用。所以请建议我如何处理这个问题。

**这是我的代码，一旦用户登录就开始会话：** checkusrlog.php

```
<?php
//for session to be active on subdomain
session_set_cookie_params(0, '/', '.xyz.com');

session_start(); // Start Session First Thing

error_reporting(E_ALL);
ini_set('display_errors', '1');

include_once "connectiontomysql.php"; // Connect to the database
$dyn_www = $_SERVER['HTTP_HOST']; 
//------ CHECK IF THE USER IS LOGGED IN OR NOT AND GIVE APPROPRIATE OUTPUT -------
$logOptions = ''; // Initialize the logOptions variable that gets printed to the page
$newMessage = ''; 
```

// 如果没有设置会话变量和 cookie 变量，此代码运行

```
if (!isset($_SESSION['idx'])) { 
  if (!isset($_COOKIE['idCookie'])) {
     $logOptions = '<a href="http://' . $dyn_www . '/index.php">Register Account</a>
     &nbsp;&nbsp; | &nbsp;&nbsp; 
     <a href="http://' . $dyn_www . '/index.php">Log In</a>';
   }
} 
```

// 如果为没有 cookie 的登录用户设置了会话 ID，请记住我的功能集

```
if (isset($_SESSION['idx'])) { 

    $decryptedID = base64_decode($_SESSION['idx']);
    $id_array = explode("p3h9xfn8sq03hs2234", $decryptedID);
    $logOptions_id = $id_array[1];

} else if (isset($_COOKIE['idCookie'])) {// If id cookie is set, but no session ID is set yet, we set it below and update stuff

    $decryptedID = base64_decode($_COOKIE['idCookie']);
    $id_array = explode("nm2c0c4y3dn3727553", $decryptedID);
    $userID = $id_array[1]; 
    $userPass = $_COOKIE['passCookie'];
    // Get their user first name to set into session var
    $sql_uname = mysql_query("SELECT username, email FROM siteMembers WHERE id='$userID' AND password='$userPass' LIMIT 1");
    $numRows = mysql_num_rows($sql_uname);
    if ($numRows == 0) {
        // Kill their cookies and send them back to homepage if they have cookie set but are not a member any longer
        setcookie("idCookie", '', time()-42000, '/');
        setcookie("passCookie", '', time()-42000, '/');
        header("location: index.php"); // << makes the script send them to any page we set
        exit();
    }
    while($row = mysql_fetch_array($sql_uname)){ 
        $username = $row["username"];
        $useremail = $row["email"];
    }

$_SESSION['id'] = $userID; // now add the value we need to the session variable
$_SESSION['idx'] = base64_encode("g4p3h9xfn8sq03hs2234$userID");
$_SESSION['username'] = $username;
$_SESSION['useremail'] = $useremail;
$_SESSION['userpass'] = $userPass;

$logOptions_id = $userID; 
```

?>

注意：所有子域仅使用单个代码进行管理，其中属于该特定子域的数据是基于子域从数据库动态转储的。

在这两者之间我正在开发共享托管服务并使用 *.streamicon.com 作为根域。使用 *.streamicon.com 作为我的根域，因为它允许我动态创建“n”个子域。

# c# - 具有透明背景的用户控件

> ID：14424399
> 
> 赞同：6
> 
> 时间：2013-01-20T12:12:27.257
> 
> 标签：c#, .net, graphics, user-controls, gdi+

我有一个简单的用户控件，实际上只是一个面板，当我单击该面板时，将添加一个子用户控件。那个孩子只是我将`width = 150px`&`height = 100px`和背景颜色设置为透明的另一个用户控件。它的中心还有一个 100 x 100 像素的文本框。

这个基础结构在未来将是一个基于节点的接口，其中每个盒子都有连接锚和逻辑 btn 或类似的东西。

我的问题是，如果我在面板中单击几次并且添加的框与另一个重叠，透明度将不会生效。

这是一个截图

![在此处输入图像描述](../Images/e2f3f5d95e98b3cf53d2ae2dae98efbc.png)

我该如何解决这个问题？有没有`allowTransparency`类似的东西？

绘图顺序也有问题，新添加的块总是在另一个块的后面。

如果您想查看此代码，请告诉我，但我认为与此无关。

另外，如果您知道实现节点图的更好方法，请随时告诉我。

**编辑**

在我什至想到在 StackOverFlow 中发布问题之前，我首先尝试了以下代码。

```
SetStyle(ControlStyles.SupportsTransparentBackColor, true);
MakeTransparentControls(this); 
```

所以请不要将此视为重复的问题或发布该代码作为答案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T13:09:47.667

这通常是 Windows 中一个非常基本的限制。一扇窗户与另一扇窗户重叠并挡住了它后面的任何东西。每个人都喜欢的答案，使用 ControlStyles.SupportsTransparentBackColor，不是解决方法，它已经为 UserControl 打开，所以再次设置它没有任何区别。

样式标志*模拟*窗口透明度。它通过改变窗口自己绘制的方式来做到这一点。它首先要求父级在窗口内绘制自身以提供背景，然后在其上绘制自身。因此，通过将 BackColor 属性设置为 Color.Transparent，您可以期望看到父窗口的像素作为背景。

你也是。您的用户控件的父级是表单。它尽职尽责地首先绘制自己，并在左侧和右侧产生灰色边缘。您*希望*看到的也是其他用户控件的像素。但这不起作用，它只要求父级绘制，而不是任何*其他*碰巧重叠的控件。这当然不是不可能的，它只是丑陋而缓慢。这篇[知识库文章](http://support.microsoft.com/kb/943454)展示了这种方法。而是强调“丑陋”的绰号。

显然，您可以改进您的 UserControl，从表面上看，在面板的左侧和右侧设置这些透明边缘是没有意义的。因此，将面板的 Location 属性设置为 (0, 0)，将 Dock 属性设置为 Fill。现在每个用户控件都只是一个“节点”，您不需要也不希望看到任何重叠的其他“节点”。在节点之间绘制任何线都需要实现表单的 Paint 事件。

如果你真的需要这种透明度，那么你将不得不以不同的方式做到这一点。您必须放弃为每个节点使用窗口的想法。一种方法是只画它们。如果您以正确的顺序执行此操作，那么您将毫无问题地模拟真正的透明度，这是通过分层油漆创建的，而不是在您需要查看“背景”的地方绘制。它也会快很多，控件很昂贵。但是，您将放弃使用控件的便利性，而必须编写代码。鼠标点击测试之类的事情变得更加复杂。如果文本框实际上不应该是标签（肯定是？）或者使用放弃使用窗口作为控件的 GUI 类库，那么文本框肯定会挂断。就像 WPF 一样。并且不要 不要忘记已经有很多库已经为您完成了这项工作，连接节点是一种非常常见的用户界面范例。以 Visio 为例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T12:17:46.423

在你的 UserControl 的构造函数中试试这个：

```
this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
this.BackColor = Color.Transparent; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-19T10:46:42.973

你也可以试试这个：

```
 public partial class UCTransparent : UserControl
     {

         public UCTransparent()
         {
                InitializeComponent(); 
         }
         protected override CreateParams CreateParams
         {
                get
                {
                       CreateParams cp = base.CreateParams;
                       cp.ExStyle |= 0x20;
                       return cp;
                }
         }

         protected override void OnPaintBackground(PaintEventArgs e)
         {
             base.OnPaintBackground(e);
         }
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:52:02.883

在我的一个项目中，我必须为窗体上的几乎每个子控件设置透明背景，所以我创建了这个方法：

```
private void MakeTransparentControls(Control parent)
{
    if (parent.Controls != null && parent.Controls.Count > 0)
    {
        foreach (Control control in parent.Controls)
        {
            if ((control is PictureBox) || (control is Label) || (control is GroupBox) || (control is CheckBox))
                control.BackColor = Color.Transparent;

            if (control.Controls != null && control.Controls.Count > 0)
                MakeTransparentControls(control);
        }
    }
} 
```

在表单的构造函数中，我添加了这些行：

```
SetStyle(ControlStyles.SupportsTransparentBackColor, true);
MakeTransparentControls(this); 
```

您可以在自己的上下文中尝试这样的事情。

# iphone - 停止 MKMapview 的用户位置更新（蓝点）

> ID：14424402
> 
> 赞同：2
> 
> 时间：2013-01-20T12:12:47.637
> 
> 标签：iphone, ios, mapkit, core-location, cllocationmanager

我正在为我的应用程序使用 CLLocationManager 和 MKMapView 的实例。我有一个点击按钮，将触发我的位置管理器的 startUpdatingLocation，它允许我通过 didUpdateToLocation 回调接收新的位置更新。一旦我对准确性感到满意，我就会停止这些更新：

```
[locationManager stopUpdatingLocation];
locationManager.delegate = nil; 
```

问题是，GPS 保持打开状态，如状态栏右上角的箭头所示。经过进一步调查，我意识到这是由于 mapView 有 showUserLocation = YES，这意味着它会继续接收更新，即使我自己的 locationManager 实例已停止更新。

在我停止更新后添加以下内容会关闭 GPS 标志，但蓝点显然会消失（但我确实希望当前位置仍然存在以进行可视化）。

```
mapView.showsUserLocation = NO; 
```

对于我的应用程序，我需要同时使用 CLLocationManager（计算一定距离内最近的 POI）和 MKMapView（主要用于将这些 POI 显示为我的位置周围的注释）。有没有办法简单地停止对两者的所有 GPS 更新，并在此时冻结蓝点？

我想过完全禁用 mapView.showsUserLocation，并将 CLLocation 从 LocationManager 绘制到 mapView 作为自定义注释，但我不确定这是最好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:47:52.533

我认为，一旦您完成将位置更新到所需的精度，删除注释图钉将足以让用户知道所选位置。这在 MKMapView 用法中是相当标准的。

另一件要考虑的事情是，即使在您停止监视位置之后，位置箭头实际上也会持续一段时间（取决于使用方式）。您可以在 Apple 的位置指南中找到它的持续时间，但也需要考虑一些问题。

# sql-server - OData 适合多租户 LOB 应用吗？

> ID：14424405
> 
> 赞同：3
> 
> 时间：2013-01-20T12:13:06.947
> 
> 标签：sql-server, entity-framework, search, odata

我正在开发基于云的业务线应用程序。用户可以将文档和其他类型的对象上传到应用程序。用户上传了相当多的文档，总共存储了数百万个文档。我使用 SQL Server。

今天我有一个有点安静的 API，它允许用户传入一个 DocumentSearchQuery 实体，他们在其中提供关键字以及请求排序顺序和分页信息。他们返回一个 DocumentSearchResult，它本质上是对实际文档的引用的排序集合。

我现在想将搜索 API 扩展到文档以外的其他实体类型，并且我正在研究为此使用 OData。但我的印象是，如果我使用 OData，我将面临几个问题：

*   用户可以查询的字段没有内置限制，这意味着性能将取决于他们是否查询索引字段，或者我必须自己解析传入的 OData 请求以确保它们只查询索引字段. （因为它是一个多租户应用程序并且它们共享物理硬件，所以慢查询是不可接受的，因为这会影响其他客户）
*   无论我使用什么来访问后端数据都需要支持 IQueryable。我目前正在使用执行此操作的实体框架，但将来我可能会使用其他东西。这意味着我可能需要再次自己解析传入的查询。
*   没有内置支持限制用户可以访问的数据。我需要验证传入的 Odata 查询，以确保他们访问他们实际上有权访问的数据。

我认为我不想走手动解析传入表达式树的道路，以确保他们只尝试访问他们有权访问的数据。这似乎很麻烦。

我的问题是：考虑到上述情况，在客户编写自己的客户端访问实体的多租户环境中使用 OData 是否是一种合适的协议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:00:33.063

我觉得这里很合适。让我给你一些关于你认为你将面临的问题的意见：

> 用户可以查询的字段没有内置限制，这意味着性能将取决于他们是否查询索引字段，或者我必须自己解析传入的 OData 请求以确保它们只查询索引字段. （因为它是一个多租户应用程序并且它们共享物理硬件，所以慢查询是不可接受的，因为这会影响其他客户）

真的。但是，您可以检查过滤器中的允许字段以允许或拒绝操作。

> 无论我使用什么来访问后端数据都需要支持 IQueryable。我目前正在使用执行此操作的实体框架，但将来我可能会使用其他东西。这意味着我可能需要再次自己解析传入的查询。

是的，有 EF 提供商。这意味着如果您将来使用其他东西，您将需要编写自己的提供程序。如果您更改 EF，您可能会提前做出决定。在这种情况下，我不推荐 WCF DS。

> 没有内置支持限制用户可以访问的数据。我需要验证传入的 Odata 查询，以确保他们访问他们实际上有权访问的数据。

对 WCF 数据服务没有任何开箱即用的支持来做到这一点。但是，这是您无论如何都需要实施的授权机制的一部分。但我要告诉你一个好消息：使用 QueryInterceptors 很容易做到。简单地拦截查询，并根据用户权限。这是您必须根据您使用的技术独立实施的事情。

我的回答：考虑到上述情况，WCF 数据服务是多租户环境中的合适协议，在该环境中，客户编写自己的客户端访问实体，至少您更改 EF。你应该记住它为你节省的巨大努力。

# null - 如果条件基于列值是否为空，则使用 linq to entity

> ID：14424406
> 
> 赞同：1
> 
> 时间：2013-01-20T12:13:22.907
> 
> 标签：null, linq-to-entities, dbnull

我有一个存储图像文件路径的表，现在在我的代码中我有一些条件：

```
var UserQuery = 
    (from u in DataContext.UserProfiles where u.UserIDfk == currentUserId select u)
        .FirstOrDefault();

if (UserQuery.Avatar == DBNull.Value.ToString()) 
{ 
   UsersAvatarImage.ImageUrl = "Images/UserAvatar/default_avatar.jpg";
}

if (UserQuery.Avatar != DBNull.Value.ToString()) 
{ 
   UsersAvatarImage.ImageUrl = UserQuery.Avatar; 
} 
```

我正在检查列的值是否为空，如果是，则将图像控件的值设置为某个默认图像，如果它不显示存储在数据库中的图像，我不知道为什么它不工作。

我还尝试了 string.IsNullOrEmpty 和 else 子句作为第二个 if 或空双引号而不是 DBNull.Value.ToString() 但它也不起作用。

奇怪的是，当我评论第二个 if 条件时，第一个 if 满足条件并显示默认图像，但是当我评论第二部分时，第一部分不起作用

值得注意的是，当我插入数据时，我使用 DBNull.Value.ToString() 将值作为空值传递，该列如何同时为空而不为空，有没有更好的方法来检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:19:28.503

您应该只在引用类型上使用 null 而不是 DBNull，或者使您的值类型可以为空。实体框架将为您处理转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:23:10.347

好吧，既然您似乎在比较字符串，您是否尝试过这个？：

[线](https://stackoverflow.com/questions/3843060/linq-to-entities-case-sensitive-comparison)

# android - android联系人提供者：如何设置电话号码主要

> ID：14424407
> 
> 赞同：3
> 
> 时间：2013-01-20T12:13:48.177
> 
> 标签：android, contacts, android-contentprovider, android-contacts, android-syncadapter

如何在添加或更新构建自定义联系人提供程序的联系人时将联系人的电话号码设置为主号码。联系人的添加和更新工作正常，但我不知道如何将联系人的一个号码设置为主号码或默认号码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:19:46.163

```
mValues.put(Phone.IS_PRIMARY, 1);
mValues.put(Phone.IS_SUPER_PRIMARY, 1); 
```

两者`Phone.IS_PRIMARY`都`Phone.IS_SUPER_PRIMARY`必须设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T13:56:11.293

我有同样的问题，我的解决方案是：

```
ContentProviderOperation.Builder bld = ContentProviderOperation.newUpdate(Uri.withAppendedPath(ContactsContract.Data.CONTENT_URI, myRawIdOfNumber ));
bld = bld.withValue( ContactsContract.CommonDataKinds.Phone.IS_PRIMARY, new Integer(1) );
bld = bld.withValue( ContactsContract.CommonDataKinds.Phone.IS_SUPER_PRIMARY, new Integer(1) );
ops.add( bld.build() );
try { getContentResolver().applyBatch( ContactsContract.AUTHORITY, ops ); } catch ... 
```

# python - PythonAnywhere 上的连接拒绝 Twitter API

> ID：14424408
> 
> 赞同：3
> 
> 时间：2013-01-20T12:13:49.893
> 
> 标签：python, twitter, streaming, twitter-oauth, pythonanywhere

我正在尝试在任何地方连接到 Python 上的 twitter 流 API，但总是收到连接被拒绝错误。

我在我的应用程序中使用[Tweepy](https://github.com/tweepy/tweepy)，为了测试连接，我使用了可以在 repo 中找到的流示例。

这是代码的总结：

```
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream

# Go to http://dev.twitter.com and create an app. 
# The consumer key and secret will be generated for you after
consumer_key=""
consumer_secret=""

# After the step above, you will be redirected to your app's page.
# Create an access token under the the "Your access token" section
access_token=""
access_token_secret=""

class StdOutListener(StreamListener):
    """ A listener handles tweets are the received from the stream. 
    This is a basic listener that just prints received tweets to stdout.

    """
    def on_data(self, data):
        print data
        return True

    def on_error(self, status):
        print status

if __name__ == '__main__':
    l = StdOutListener()
    auth = OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_token, access_token_secret)

    stream = Stream(auth, l)    
    stream.filter(track=['basketball']) 
```

[当我在任何地方的 python](https://www.pythonanywhere.com)的 bash 控制台中运行此行时（当然在填充了令牌之后）

```
12:02 ~/tweepy/examples (master)$ python streaming.py 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "streaming.py", line 33, in <module>
    stream.filter(track=['basketball'])
  File "/usr/local/lib/python2.7/site-packages/tweepy/streaming.py", line 228, in filter
    self._start(async)
  File "/usr/local/lib/python2.7/site-packages/tweepy/streaming.py", line 172, in _start
    self._run()
  File "/usr/local/lib/python2.7/site-packages/tweepy/streaming.py", line 106, in _run
    conn.connect()
  File "/usr/local/lib/python2.7/httplib.py", line 1157, in connect
    self.timeout, self.source_address)
  File "/usr/local/lib/python2.7/socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 111] Connection refused 
```

.twitter.com 域在 pythonanywhere whithelist 中，所以我不明白为什么连接会被拒绝：s。

同样的代码在我的 Ubuntu 上就像一个魅力。

任何想法都会受到欢迎，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:44:14.507

如果您使用的是免费帐户，则 tweepy 将无法使用。它不使用环境中的代理设置。

在主线正确使用代理设置之前，您可能可以使用一个 tweepy 分支 (http://github.com/ducu/tweepy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T20:44:05.873

正如 Glenn 所说，tweepy 目前没有代理支持。

由于某种原因，我无法解释（也没有记录），大约一个月前，一个拉取请求在没有任何合并的情况下关闭。

[https://github.com/tweepy/tweepy/pull/152](https://github.com/tweepy/tweepy/pull/152)

github上显然有一个fork（见Glenn的回答），但我没有测试它。

知道我最终需要使用自己的域名，我终于在 pythonanywhere 上获得了一个付费帐户，并一起摆脱了代理的东西。

# html - 图像上的重叠 div

> ID：14424412
> 
> 赞同：0
> 
> 时间：2013-01-20T12:14:26.633
> 
> 标签：html, css

这是我想要完成的：

```
 _____________________________________________________________________________
|    option             option               option            option         |
|_____________________________________________________________________________|
  |  image  |         |  image  |          |  image  |       |  image  |
  |_________|         |_________|          |_________|       |_________| 
```

在只有选项而不是按钮的菜单栏中。此外，图像仅显示下半部分。我试过这个：

HTML

```
<div class="m_img"> <img src="image1.png" width="60px" height="30px"> </div>
<div class="m_img"> <img src="image2.png" width="60px" height="30px"> </div>
<div class="m_img"> <img src="image3.png" width="60px" height="30px"> </div>
<div class="m_img"> <img src="image4.png" width="60px" height="30px"> </div>
<div id="menu_bar" class="centered">
    <a class="m_button" href="javascript:change(0)"> text0 </a>
    <a class="m_button" href="javascript:change(1)"> text1 </a>
    <a class="m_button" href="javascript:change(2)"> text2 </a>
    <a class="m_button" href="javascript:change(3)"> text3 </a>
</div> 
```

CSS

```
.m_img {
     float: left;
     width: 250px;
     z-index: 1;
}
.m_button {
     float: left;
     width: 250px;
     font-size: 110%;
     z-index: 2;
} 
```

但是菜单栏会下降并且不会与图像重叠。知道如何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:23:54.197

HTML：

```
<div style="width:400px; background-color: red; font-size:1em; height:1em">
    <span class="menup option">option1</span>
    <span class="menup option">option2</span>
    <div style="z-index: -1; width: 100%; position:relative; top:-0.5em;">
        <span class="menup">menu1</span>
        <span class="menup">menu2</span>
    </div>
</div> 
```

CSS：

```
.menup { background-color: blue; width: 6em; display: inline-block; margin-left: 1em; margin-right: 1em; }
.option { background-color: green; } 
```

见[http://jsfiddle.net/mK4bJ/1/](http://jsfiddle.net/mK4bJ/1/)

如果你有意见，我很想听听。

# git - 解决 git merge 章鱼上的冲突

> ID：14424414
> 
> 赞同：6
> 
> 时间：2013-01-20T12:14:39.947
> 
> 标签：git

八达通合并是指合并2个以上的头。

用户应该如何使用序数三向合并工具比较文件？

3 个文件被传递到合并工具：BASE、LOCAL、REMOTE

3个头需要多少个和什么组合？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T17:16:18.857

在这种情况下，您不应该使用章鱼合并。Octopus 合并只应在没有合并冲突或冲突非常简单以至于您可以在没有合并工具的情况下手动解决它们的情况下使用。

在您的情况下，您应该只进行 2 次正常合并，这与章鱼合并的效果完全相同，但允许您使用合并工具。

您可以手动检查不同的分支头版本并运行两次 3 路合并工具以使您的章鱼合并工作。但这与进行两次正常合并的过程完全相同——只是更复杂。

如果你想做一个章鱼合并，让你的历史看起来更好，只需做两次合并，然后重写你的历史。

# php - 注意：mysql_fetch_array 使用未定义的常量

> ID：14424424
> 
> 赞同：0
> 
> 时间：2013-01-20T12:15:52.403
> 
> 标签：php, sql

我在 2 年前写的一些代码遇到了一些麻烦，

收到垃圾邮件通知：使用未定义的常量。

```
 <?php 
 include ("conectarbd.php");
 $sql = "SELECT * from stock WHERE tipo='microonda'";
 $result = mysql_query($sql,$con);
 echo "<table border=\"0\">";
 echo "<tr><td></td><td>".ID."</td><td>".Nombre."</td><td>".Modelo."</td></tr>";

 while($registro=mysql_fetch_array($result))
 {
  echo '<tr><td>'.$registro[0].'</td><td>'.$registro[2].'</td><td>'.$registro[3].'</td><td><a href=profile.php?id='.$registro[0].'><img src="images/arrowbw.png" border="0"title="Profile"></a></td></tr>';

 }
 echo "</table>";
 mysql_close($con);
 ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:19:52.537

`ID` `Nombre`并被`Modelo`视为常数。

如果它们是字符串（它们是列标题，对吗？），你想把它们放在引号内。

# python - 如何使用 python 解析 XML

> ID：14424426
> 
> 赞同：1
> 
> 时间：2013-01-20T12:16:08.957
> 
> 标签：python, xml, parsing, xml-parsing

我正在尝试使用 python 解析 xml 以创建结果摘要文件。下面是我的代码和 xml 片段，就像下面一样，我有几个部分`<test>`和`</test>`

```
<test name="tst_case1">
  <prolog time="2013-01-18T14:41:09+05:30"/> 
  <verification name="VP5" file="D:/Squish/HMI_testing/tst_case1/test.py" type="properties" line="6"> 
    <result time="2013-01-18T14:41:10+05:30" type="PASS"> 
      <description>VP5: Object propertycomparisonof ':_QMenu_3.enabled'passed</description>        <description type="DETAILED">'false' and 'false' are equal</description> 
      <description type="object">:_QMenu_3</description> 
      <description type="property">enabled</description> 
      <description type="failedValue">false</description> 
    </result> 
  </verification>
  <epilog time="2013-01-18T14:41:11+05:30"/> 
</test> 
```

我想要得到的是，在一个`<test>`部分中有多少 PASS / FAIL 。

使用下面的代码打印 xml 文件中的总通过/失败。但我对每个部分有多少通过/失败感兴趣。任何男孩都可以告诉我取出这个的程序吗？

```
import sys
import xml.dom.minidom as XY

file = open("result.txt", "w")
tree = XY.parse('D:\\Squish\\squish results\\Results-On-2013-01-18_0241 PM.xml')
Test_name = tree.getElementsByTagName('test')
Test_status = tree.getElementsByTagName('result')
count_testname =0
passcount = 0
failcount = 0
Test_name_array = []
for my_Test_name in Test_name:
    count_testname = count_testname+1
    passcount = 0
    failcount = 0
    my_Test_name_final = my_Test_name.getAttribute('name')
    Test_name_array = my_Test_name_final
    if(count_testname > 1):
        print(my_Test_name_final)
        for my_Test_status in Test_status:
            my_Test_status_final = my_Test_status.getAttribute('type')
            if(my_Test_status_final == 'PASS'):
               passcount = passcount+1
            if(my_Test_status_final == 'FAIL'):
               failcount = failcount+1
            print(str(my_Test_status_final)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:33:32.390

我不会使用 minidom 来完成这项任务。DOM API 非常繁琐、冗长，不适合搜索和匹配。

Python 库还包括[`xml.etree.ElementTree`API](http://docs.python.org/2/library/xml.etree.elementtree.html)，我会使用它来代替：

```
from xml.etree import ElementTree as ET

tree = ET.parse(r'D:\Squish\squish results\Results-On-2013-01-18_0241 PM.xml')
tests = dict()

# Find all <test> elements with a <verification> child:
for test in tree.findall('.//test[verification]'):
    passed = len(test.findall(".//result[@type='PASS']"))
    failed = len(test.findall(".//result[@type='FAIL']"))
    tests[test.attrib['name']] = {'pass': passed, 'fail': failed} 
```

上面的代码计算每个`<test>`元素通过和失败的测试数量，并将它们存储在字典中，键控到元素的`name`属性`<test>`。

我已经使用 Python 3.2 和您发布的另一个问题的[完整 XML 文档](https://stackoverflow.com/questions/14461128/xml-parsing-to-get-description-using-python-using-minidom)测试了上述代码，结果如下：

```
{'tst_Setup_menu_2': {'fail': 0, 'pass': 8}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:33:46.123

感谢您的发帖。我使用 minidon 让它工作。仍然希望看看如何使用 xml.etree.ElementTree 解决

```
import sys
import xml.dom.minidom as XY

file = open("Result_Summary.txt", "w")
#tree = XY.parse('D:\\Squish\\squish results\\Results-On-2013-01-18_0241 PM.xml')
#print (str(sys.argv[1]))
tree = XY.parse(sys.argv[1])

Test_name = tree.getElementsByTagName('test')
count_testname =0

file.write('Test Name \t\t\t No:PASS\t\t\t No:FAIL\t \n\n')
for my_Test_name in Test_name:
    count_testname = count_testname+1
    my_Test_name_final = my_Test_name.getAttribute('name')
    if(count_testname > 1):
        #print(my_Test_name_final)
        file.write(my_Test_name_final)
        file.write('\t\t\t\t')
        my_Test_status = my_Test_name.getElementsByTagName('result')
        passcount = 0
        failcount = 0
        for my_Test_status_1 in my_Test_status:
            my_Test_status_final = my_Test_status_1.getAttribute('type')
            if(my_Test_status_final == 'PASS'):
               passcount = passcount+1
            if(my_Test_status_final == 'FAIL'):
               failcount = failcount+1
            #print(str(my_Test_status_final))
        file.write(str(passcount))
        #print(passcount)
        file.write('\t\t\t\t')
        file.write(str(failcount))
       # print(failcount)
        file.write('\n')

#print ('loop count: %d' %count_testname)
#print('PASS count: %s' %passcount)
#print('FAIL count: %s' %failcount)
file.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:43:21.433

虽然不是标准模块，但值得努力安装的是[lxml](http://lxml.de/xpathxslt.html) ，特别是如果你想做快速 Xml 解析等恕我直言。

如果没有您的结果的完整示例，我猜测它们会是什么样子。

```
from lxml import etree

tree = etree.parse("results.xml")

count_result_type = etree.XPath("count(.//result[@type = $name])")

for test in tree.xpath("//test"):
    print test.attrib['name']
    print "\t# FAILS ", count_result_type(test, name="FAIL")
    print "\t# PASSES", count_result_type(test, name="PASS") 
```

我根据我对您的 xml 的猜测生成了以下运行结果，这应该让您了解正在发生的事情。

```
tst_case1
    # FAILS  1.0
    # PASSES 1.0
tst_case0
    # FAILS  0.0
    # PASSES 1.0
tst_case2
    # FAILS  0.0
    # PASSES 1.0
tst_case3
    # FAILS  0.0
    # PASSES 1.0 
```

我喜欢[lxml](http://lxml.de/)的地方在于它的表现力，YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T11:41:42.430

我看到你正在使用 Squish。您应该检查**\examples\regressiontesting**下的 squish 文件夹。在那里您可以找到一个名为**xml2result2html.py**的文件。在这里您可以找到将 squish 测试结果转换为 html 的示例。

# facebook - 使用facebook对话框发送请求后如何显示成功消息？

> ID：14424429
> 
> 赞同：-2
> 
> 时间：2013-01-20T12:16:46.770
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在 facebook 上有一个应用程序。我可以发送请求或发布以分享分享，但在发送请求后我遇到了问题。

我想显示成功消息。您的请求之类的内容已发送。实际上，如果我更具体地说，我需要`requestCallback`在从 facebook 对话框发送请求后显示成功消息（需要代码）的代码。

我正在开发我的 Facebook 游戏应用程序： http: [//apps.facebook.com/siegiusarena](http://apps.facebook.com/siegiusarena)

处理程序的任何参考链接或代码`requestCallback`都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:34:37.867

```
FB.ui({ method: 'apprequests',
    title: 'Title',
    message: 'Message'
},
function (res) {
    if (res && res.request) {
        // do something if the request was created
        alert('your requests has been sent');
        // or maybe something like that
        $('#messagecontainer').text('your requests has been sent');
    }
    else if (!res) {
        // do something if the request was not created
    }
}); 
```

编辑：

如果您想显示与 FB 对话框相同的成功消息对话框，有两种方法：

1）您可以使用旨在执行此操作的库/插件，例如 Facebox - [http://defunkt.io/facebox/](http://defunkt.io/facebox/)

2）您可以自己设置样式，例如，jQuery UI 对话框来实现这一点，类似的东西 - [http://www.neilyoungcv.com/blog/code-share/emulating-facebooks-dialogue-using-jquery-ui -对话/](http://www.neilyoungcv.com/blog/code-share/emulating-facebooks-dialogue-using-jquery-ui-dialogues/)

# android - 谷歌地图与按钮、菜单混合

> ID：14424432
> 
> 赞同：0
> 
> 时间：2013-01-20T12:17:10.767
> 
> 标签：android, google-maps

我在我的应用程序中使用谷歌地图。并且它总是应该在屏幕上可见。屏幕上是否可以有一些按钮，菜单，..在它旁边？所以不是整个屏幕都是地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:31:27.117

如果你想在地图上显示按钮的一种方式，就像这篇文章中的那样，我检查了它

[Android - 带有 3 个按钮的地图](https://stackoverflow.com/questions/3544875/android-map-with-3-buttons)

# ckeditor - CKEditor - 触发对话框确定按钮

> ID：14424438
> 
> 赞同：2
> 
> 时间：2013-01-20T12:17:55.597
> 
> 标签：ckeditor

我正在使用 CKEditor，并且我编写了一个弹出 CKEditor 对话框的插件。

我需要重新设计 ok 按钮并向页脚添加更多元素，如文本框和复选框，但这样做似乎很复杂，所以我隐藏了页脚部分并在对话框内容中创建了一个 uiElement需要但现在我想要的是触发隐藏页脚中的 okButton 但我找不到方法来做到这一点..

任何人？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:54:59.083

可能有更好的方法，但我是这样做的：

```
var ckDialog = window.CKEDITOR.dialog.getCurrent(),
    ckCancel = ckDialog._.buttons['cancel'],
    ckOk = ckDialog._.buttons['ok'];

ckOK.click(); 
```

诀窍是获取按钮，然后使用 CKEditor Button API 来模拟点击。由于某种原因，我无法调用 dialog.getButton('ok') 因为 getButton 由于某种原因未定义。我的方法深入研究了私人数据，我怀疑这是最好的方法。

从 onShow 事件（定义对话框时），我能够得到 ok 按钮，如文档所示：

```
onShow: function () {
    var okBtn = this.getButton('ok');
    ...
} 
```

这是 Button API：[http](http://docs.ckeditor.com/#!/api/CKEDITOR.ui.dialog.button) ://docs.ckeditor.com/#!/api/CKEDITOR.ui.dialog.button ，您也可以在那里访问对话框 API（我假设您已经去过那里！！ ！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T02:46:14.167

您可以尝试在您的 plugin.js 中添加这一行。

```
var dialog = this.getDialog();
document.getElementById(dialog.getButton('ok').domId).click(); 
```

在我的自定义插件中，我只是隐藏“确定”按钮而不是整个页脚。下面是我的 plugin.js 语句的一部分。

```
{
    type : 'fileButton',
    id : 'uploadButton',
    label : 'Upload file',
    'for' : [ 'tab1', 'upload' ],
    filebrowser :
    {
        action : 'QuickUpload',
        onSelect : function(fileUrl, data){
            var dialog = this.getDialog();
            dialog.getContentElement('tab1','urlTxt').setValue(fileUrl);
            document.getElementById(dialog.getButton('ok').domId).click();
        }
    }
} 
```

顺便说一句，我正在使用**CKEditor 4.0（修订版 769d96134b）**

# c - 读取文本文件的函数

> ID：14424439
> 
> 赞同：-4
> 
> 时间：2013-01-20T12:18:13.303
> 
> 标签：c, file-handling

我希望在 C 编程中有一个用户定义的函数，该函数将从文件中返回文本，并且文件名通过参数传递给该函数。谢谢。

这是因为我需要将文本附加到变量中。我如何为此修改以下代码。这就是我尝试这样做的方式，但我现在遇到了很多错误。

```
example1.c: In function ‘readfile’:
example1.c:47:5: warning: passing argument 1 of ‘fopen’ makes pointer from integer without a cast [enabled by default]
/usr/include/stdio.h:273:14: note: expected ‘const char * __restrict__’ but argument is of type ‘int’
example1.c:48:5: warning: implicit declaration of function ‘exit’ [-Wimplicit-function-declaration]
example1.c:48:52: warning: incompatible implicit declaration of built-in function ‘exit’ [enabled by default]
example1.c:56:5: warning: implicit declaration of function ‘malloc’ [-Wimplicit-function-declaration]
example1.c:56:22: warning: incompatible implicit declaration of built-in function ‘malloc’ [enabled by default]
example1.c:57:57: warning: incompatible implicit declaration of built-in function ‘exit’ [enabled by default]
example1.c:61:59: warning: incompatible implicit declaration of built-in function ‘exit’ [enabled by default]
example1.c:65:2: warning: return makes integer from pointer without a cast [enabled by default]
example1.c:68:5: warning: implicit declaration of function ‘free’ [-Wimplicit-function-declaration]
example1.c:68:5: warning: incompatible implicit declaration of built-in function ‘free’ [enabled by default]
example1.c: At top level:
example1.c:71:30: warning: initialization makes pointer from integer without a cast [enabled by default]
example1.c:71:1: error: initializer element is not constant 
```

请帮忙。

```
char readfile (fname) {
    FILE * pFile;
    long lSize;
    char * buffer;
    size_t result;

    pFile = fopen ( fname , "rb" );
    if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

    fseek (pFile , 0 , SEEK_END);
    lSize = ftell (pFile);
    rewind (pFile);

    buffer = (char*) malloc (sizeof(char)*lSize);
    if (buffer == NULL) {fputs ("Memory error",stderr); exit (2);}

    result = fread (buffer,1,lSize,pFile);
    if (result != lSize) {fputs ("Reading error",stderr); exit (3);}

    return buffer;
    fclose (pFile);
    free (buffer);
}
AC_ALPHABET_t * input_text = readfile("infile"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:01:30.353

这确实应该通过一些研究很容易做到，但是我已经修改了您的程序，使其具有返回给定文件名的字符串的函数。我想这不是最简单、最好或最正确的方法，但您要求修改您的程序。

```
#include <stdio.h>
#include <stdlib.h>

char *read_from_file(const char *filename)
{
    long int size = 0;
    FILE *file = fopen(filename, "r");

    if(!file) {
        fputs("File error.\n", stderr);
        return NULL;
    }

    fseek(file, 0, SEEK_END);
    size = ftell(file);
    rewind(file);

    char *result = (char *) malloc(size);
    if(!result) {
        fputs("Memory error.\n", stderr);
        fclose(file);
        return NULL;
    }

    if(fread(result, 1, size, file) != size) {
        fputs("Read error.\n", stderr);
        fclose(file);
        return NULL;
    }

    fclose(file);
    return result;
}

int main(int argc, char **argv) 
{
    if(argc < 2) {
        fputs("Need an argument.\n", stderr);
        return -1;
    }

    char *result = read_from_file(argv[1]);

    if(!result) return -1;

    fputs(result, stdout);
    free(result);

    return 0;
} 
```

样品运行：

```
[michael@michael-desktop ~]$ echo "hello world" > some_file.txt
[michael@michael-desktop ~]$ ./test some_file.txt
hello world
[michael@michael-desktop ~]$ 
```

如有必要，我可以评论程序，但查找函数引用可能就足够了。

# javascript - 根据用户 latlong 位置过滤一组 latlong 位置

> ID：14424442
> 
> 赞同：-1
> 
> 时间：2013-01-20T12:18:34.723
> 
> 标签：javascript, google-maps-api-3, geolocation

我有一系列事件的 latlong，我试图根据用户的 latlong 确定他们是否在其中一个事件中。我确信我可以使用 Google Maps JavaScript API 来完成此操作，但我只需要它为我做过滤，我不需要渲染地图。什么是最好的方法，或者请指点我一个jsfiddle或其他东西。

提前致谢。- 汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T14:45:14.073

这是不允许的！如果您展示的是可公开访问的地图，您只能使用 Google 地图数据。请参阅[**TOS 的第 9.1 节**](https://developers.google.com/maps/terms#section_9_1)和第**10.1.1 (g)节[“没有 Google 地图，不得使用内容。](https://developers.google.com/maps/terms#section_10_1)** ”：

# core-data - Fetch on Core Data 可以在模拟器上运行，但不能在设备上运行

> ID：14424444
> 
> 赞同：0
> 
> 时间：2013-01-20T12:18:50.027
> 
> 标签：core-data, ios6, nsfetchrequest, persistent-storage, uimanageddocument

我有一个应用程序，我在其中展示 VC1 来选择游戏，并展示 VC2 来提交所选游戏的播放。当用户从 VC2 切换回 VC1 时，我想保留他们正在玩的游戏的游戏数据。由于它是 iOS 6.0，我使用 UIManagedDocument 来访问 Core Data 以存储和检索游戏数据。我完全被我所面临的问题难住了，在花费了无数个小时之后，我正在与这个论坛上的智者联系。

当我在模拟器中运行下面的代码时，一切正常，数据被存储，如果用户选择与之前玩的游戏相同的游戏，我也能够检索并显示它。不幸的是，在设备上，我可以看到数据存储在 segue 上 - 我放置了一个断点并使用 iExplorer 查看了 persistentStore - 但是一旦我回到 VC2 选择存储的游戏，persistentStore 似乎被覆盖或清除的所有数据。在调试器中，我注意到“UIManagedDocument”的_persistentStoreCoordinator 对象的_persistentStores NSArray 属性在设备上完成检索时始终显示为0。

任何帮助深表感谢！！！

```
- (void) addOrGetDataToGamesDatabase:(CNPUIManagedDocument *)document withFlag:(BOOL)getFlag {    
    if (getFlag) {
    NSLog(@"INSIDE addDataToGamesDatabase to get data");
    }
    else
    NSLog(@"INSIDE addDataToGamesDatabase to set data");

    dispatch_queue_t update = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0);
    dispatch_sync(update, ^{
    [document.managedObjectContext performBlockAndWait:^{
        NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Game"];
        request.predicate = [NSPredicate predicateWithFormat:@"game = %@", self.selectedGameID];
        NSError *error = nil;
        NSLog(@"Persistent Store Name = %@", [[document class] persistentStoreName]);
        NSArray *matches = [document.managedObjectContext executeFetchRequest:request error:&error];       
        NSLog(@"Fetch Error if any: %@ %@", error.debugDescription, [error userInfo]);

        if (!matches || matches.count >1) {
        NSLog(@"There is a problem with creating the game data");
        }

        //This is where it fails on the device as the match.count is always 0 as the fetch retrieves nothing
        else if ([matches count] == 0) {
        if (!getFlag) {
        // Code to initialize the game data in store
        }
        }
        else if ([matches count] == 1) {
        // Another fetch - nested
        if (!oTeammatches || [oTeammatches count] >1) {
            NSLog(@"There is a problem with creating the offense team data");
        }
        else if ([oTeammatches count] == 0) {
            if (!getFlag) {
              //Code to initialize the team data in store
           }
        }
        else if ([oTeammatches count] == 1) {
            OTeam *newOTeam = [oTeammatches lastObject];
            if (getFlag) {
                //Retrieves data
                //Shown by log lines beginning with "Getting"
            }
            else {
                //Sets/Saves data
                //Shown by log lines beginning with "Setting"
            }
         }

        }
    }];
    if (!getFlag) {
        [document updateChangeCount:UIDocumentChangeDone];
    }
    });
}

- (IBAction)pressBackButton:(UIButton *)sender {
    [self addOrGetDataToGamesDatabase:self.gamesDatabase withFlag:NO];
    if ((self.gamesDatabase.documentState & UIDocumentStateEditingDisabled) != UIDocumentStateEditingDisabled) {
    [self.gamesDatabase saveToURL:self.gamesDatabase.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
        if (success) {
           NSLog(@"DB save file path: %@", self.gamesDatabase.fileURL);
           NSLog(@"Saved!!!");
        }
        else
        NSLog(@"Unable to save");
    }];
    }
  [self performSegueWithIdentifier:@"BackToPickGame" sender:self];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
  //Some Initialization code

    if (!self.gamesDatabase) {
      NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
      url = [url URLByAppendingPathComponent:@"GameDB"];
      self.gamesDatabase = [[CNPUIManagedDocument alloc] initWithFileURL:url];
      NSLog(@"DB File URL generated: %@", url);
      NSLog(@"self.gameDatabase initialized");
    }

   [self addOrGetDataToGamesDatabase:self.gamesDatabase withFlag:YES];
   NSLog(@"Calling game with ID %@ , self.selectedGameID);
} 
```

有关持久存储的一些日志信息

DEVICE
首先进入VC2
Printing description of document->_persistentStoreCoordinator: Printing description of document->_persistentStoreCoordinator-> *persistentStores: <* _NSArrayM 0x1fd28ce0>(

)

首先在 VC2 中设置退出 VC2
Printing description of document->_persistentStoreCoordinator: Printing description of document->_persistentStoreCoordinator-> *persistentStores: <* _NSArrayM 0x1fd28ce0>( (URL: file://localhost/var/mobile/Applications/4DD2D219-5AC1- 406F-8020-260B01E46E0C/Documents/GameDB/StoreContent/persistentStore) )

二进VC2
Printing description of document->_persistentStoreCoordinator: Printing description of document->_persistentStoreCoordinator-> *persistentStores: <* _NSArrayM 0x211d4660>(

)

SIMULATOR
首先进入VC2
Printing description of document->_persistentStoreCoordinator: Printing description of document->_persistentStoreCoordinator-> *persistentStores: <* _NSArrayM 0x84e4b60>( (URL: file://localhost/Users/Rujul/Library/Application%20Support/iPhone %20Simulator/6.0/Applications/B187169B-8D32-4BB1-AB41-33DB76637D9C/Documents/GameDB/StoreContent/persistentStore))

首先在退出 VC2
打印文档描述->_persistentStoreCoordinator:打印文档描述->_persistentStoreCoordinator-> *persistentStores:<* _ NSArrayM 0x84e4b60>((URL:file://localhost/Users/Rujul/Library/Application%20Support/iPhone% 20Simulator/6.0/Applications/B187169B-8D32-4BB1-AB41-33DB76637D9C/Documents/GameDB/StoreContent/persistentStore))

二进VC2
Printing description of document->_persistentStoreCoordinator: Printing description of document->_persistentStoreCoordinator-> *persistentStores: <* _NSArrayM 0xf777910>((URL: file://localhost/Users/Rujul/Library/Application%20Support/iPhone% 20Simulator/6.0/Applications/B187169B-8D32-4BB1-AB41-33DB76637D9C/Documents/GameDB/StoreContent/persistentStore))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:30:00.273

检查代码中的所有覆盖（如上面的`UIDocumentSaveForOverwriting`）。记录前后的准确值。我相信你会以这种方式找到罪魁祸首。

另外，检查您在每个`prepareForSegue:`.

顺便说一句，我建议也许将令人困惑的`addOrGetDataToGamesDatabase`业务重构为两种易于理解的方法。

# javascript - history.start() 函数在骨干网中不起作用

> ID：14424447
> 
> 赞同：3
> 
> 时间：2013-01-20T12:19:06.390
> 
> 标签：javascript, jquery, backbone.js

我是新尝试在骨干网中使用路由器，但我的`Backbone.history.start()`方法不起作用。它给了我以下错误

```
Uncaught TypeError: Cannot call method 'start' of undefined 
```

这是我的代码

```
(function ($) {
window.App = {
    Models: {},
    Collections: {},
    Views: {},
    Router: {}
};

window.Template = function (id) {
    return _.template( $('#' + id).html() );
};

App.Router = Backbone.Router.extend({
    routers: {
        '': 'index'
    },

    index: function () {
        console.log('index page');
    }
});

var r = new App.Router;
Backbone.history.start();
})(jQuery); 
```

如何消除此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:43:10.893

发生这种情况是因为您的路由器中没有任何`routes`路由器。你有`routers`，但不一样:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T09:56:34.147

将路由器更改为路由

```
App.Router = Backbone.Router.extend({
    routes: {
        '': 'index'
    },

    index: function () {
        console.log('index page');
    }
}); 
```

现在创建路由器对象并启动骨干历史。

```
app = App.Router();
Backbone.history.start(); 
```

# android - 阻止从 apk 文件安装

> ID：14424448
> 
> 赞同：1
> 
> 时间：2013-01-20T12:19:11.403
> 
> 标签：android, block, apk

是否可以直接阻止从 apk 文件安装应用程序。如何使用代码而不是使用手机上的某些设置来做到这一点。

我只需要阻止在 Play 商店之外安装应用程序。那就是阻止用户将apk文件复制到手机并安装它。但仍允许他们通过 Play 商店安装应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:26:49.167

**你不能。**这是您无法处理的系统设置，因为它是安全设置。这不会被任何应用程序编辑。试想一下，如果任何应用程序都可以这样做：然后应用程序可以下载一个错误的 .apk 并在没有任何警告的情况下安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:25:15.477

这在 AOSP Android 上是不可能的。

从未知来源安装选项是`Settings.Global`（以前在`Settings.Secure`）中的设置，无法由第三方应用程序控制。

但是，如果您愿意为要使用它的每台设备修改和编译 Android 本身，就可以实现这一点，就像 AT&T 在他们的一些设备上所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:43:24.127

尝试使用代码将文件复制到目录 /data/app/ 。但设备已植根，某些应用程序无法正常工作

# ruby-on-rails - 2 颗宝石捆绑为 RAILS 的一颗宝石

> ID：14424455
> 
> 赞同：0
> 
> 时间：2013-01-20T12:20:30.047
> 
> 标签：ruby-on-rails, gem

我只是想问是否有可能从 2 个工作宝石中创建一个宝石。

例如，我想结合 gem 1 和 gem 2 来创建 gem 3。

```
gem 1 + gem 2 = gem 3 
```

我知道可以从头开始创建宝石。但我想要完成的是通过混合 2 个开源 gem 来创建一个 gem。

有了这个，我不需要在我垂死的 GEMFILE 中添加 2 个单独的宝石。

是否有任何工具或我需要的东西......为了实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:26:16.733

Gems 包含执行特定任务的文件。

合并两个 gem 就像将一个 gem 的内容复制到另一个中以使其成为一个。这样做的缺点是它会增加依赖性，并且适合您项目中的特定目的或任务。因此，在稍后阶段，如果您想更改代码或修改它，可能只有当您将其中一个 gem 更改或替换为另一个时才会发生修改，但是由于您将它合并到另一个，您再次需要回到什么你以前有过。

其次，如果在远程站点上更新了一个 gem，那么您将无法在合并后的应用程序中更新它。再次，您需要提取 gem，再次更新和合并。

这样做虽然可能，但合并并不是一个好的做法，因为它会降低代码的使用和灵活性。

所以只需要在你的 gemfile 中添加一行代码就很好了。

# jquery - jQuery 没有针对我需要它的 div

> ID：14424459
> 
> 赞同：1
> 
> 时间：2013-01-20T12:20:57.613
> 
> 标签：jquery, html

我确定这是一个简单的，但我想不出如何让它工作。我试过 .next() 和 .nextAll() 无济于事。我唯一能想到的是我正在尝试的功能由于代码流而无法正常工作。无论如何，下面是适合您的 jquery 和 html。我只是想在单击下载时使表单框淡入。

HTML：

```
 <div class="pdfs">
                    <div class="pdf-left">
                        <div class="image">
                            <img src="images/pdfs/macrolux/1.jpg" width="100" height="79">
                        </div>
                        <div class="text">
                            <div class="view">View</div>
                            <div class="download">Download</div>
                        </div>
                    </div>
                    <div class="pdf-right">
                        <div class="image">
                            <img src="images/pdfs/macrolux/2.jpg" width="100" height="79">
                        </div>
                        <div class="text">
                            <div class="view">View</div>
                            <div class="download">Download</div>
                        </div>
                    </div>
                </div>
                <div class="form-box">
                    Form
                </div> 
```

jQuery：

```
$(document).ready(function(){
    $('div.download').on('click', function(){
        $(this).next('div.form-box').fadeIn('slow');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:24:51.090

你没有`$(this).next()`，你可以在 chrome/firefox 中测试一下：

```
console.log($('div.download').next()); 
```

要获得正确的`div`，请尝试：

```
$(document).ready(function(){
    $('div.download').on('click', function(){
        $(this).parent().parent().parent().next().fadeIn('slow');
    });
}); 
```

**[演示](http://jsfiddle.net/kLGWv/1/)**

或者如果`form-box`您只想隐藏一个：

```
$(document).ready(function(){
  $('div.download').on('click', function(){
      $('div.form-box').fadeIn('slow');
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:25:10.170

如果您没有超过一个，[这应该足够了](http://jsfiddle.net/DELwR/)`div.form-box`

```
$(document).ready(function(){
  $('div.download').on('click', function(){
      $('div.form-box').fadeIn('slow');
  });
}); 
```

如果你有`div.form-box`每个`pdfs` `div`：

```
$(document).ready(function(){
    $('div.download').on('click', function(){
        $(this).parents('.pdfs').next('div.form-box').fadeIn('slow');
    });
}); 
```

**[演示](http://jsfiddle.net/DELwR/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:25:49.123

`$(this).next()`将针对任何下一个兄弟节点，而不是“HTML 中此之后的所有内容”。

您可以执行以下操作：

```
$(this).parent().parent().parent().next().fadeIn('slow'); 
```

不建议这样做：您对 DOM 所做的每次更改都会使您的 JS 发生更改。您可以更好地针对`.form-box`自身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T12:38:34.670

接受的答案很脆弱，如果您的文档结构发生变化，您需要重写 jquery。

更通用的解决方案是提供表单框 div 和您的下载 div 相关 id，例如

```
<div id="download-1" class="download">
   Download<
</div> 
```

和

```
<div id="download-1_formbox" class="form-box">
    Form
</div>` 
```

然后在你的jQuery中

```
$(document).ready(function(){
    $('div.download').on('click', function(){
        var divId=$(this).attr("id");
        $("#" + divId + "_formbox").fadeIn('slow');
    });
}); 
```

更新：根据要求，我添加了一些代码以使其切换，工作小提琴在[这里](http://jsfiddle.net/HkeZ3/2/)/（只有第一个下载链接有效，没有给第二个链接一个 id）

# php - 没有代码辅助的 PHPStorm Symfony 2

> ID：14424460
> 
> 赞同：0
> 
> 时间：2013-01-20T12:21:32.210
> 
> 标签：php, symfony, phpstorm

我在 PHPStorm 5.04 中遇到了代码辅助问题。我尝试将 Symfony 供应商文件夹添加为外部库，但它不起作用。

如何解决问题？

![在此处输入图像描述](../Images/d7067000eb726f61d0f83646c847b179.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:33:32.163

**当您的代码出现错误时，PHPStorm 无法自动完成。**

你扩展了一个 Controller 类，但它没有在“use”语句中声明，这就是为什么 PHPStorm 不知道你在扩展哪个类并且它不能自动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:42:32.683

您可以在设置中配置特定的“框架集成”。搜索“Symfony2”并选择您的应用程序/控制台路径。

# string - applescript - 无法输入类型号

> ID：14424463
> 
> 赞同：1
> 
> 时间：2013-01-20T12:21:47.273
> 
> 标签：string, numbers, applescript

为什么这个简单的 Applescript 片段不起作用？

```
set x to 0
set thePath to "~/Pictures/party hard/b93-" + x + ".png" 
```

我得到错误：

```
Can’t make "~/Pictures/party hard/b93-" into type number. 
```

我已经尝试了很多其他的东西，比如`(x as string)`.

它是如此简单，我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:27:40.900

AppleScript 的连接运算符是`&`, while`+`是按字面解释的。它会引发错误，因为您的代码正在尝试将字符串和数字相加。

试试这个：

```
set x to 0
set thePath to "~/Pictures/party hard/b93-" & x & ".png" 
```

# javascript - JQuery 在运行时从 Checkbox 中检索 id

> ID：14424472
> 
> 赞同：2
> 
> 时间：2013-01-20T12:22:31.863
> 
> 标签：javascript, jquery

我的问题是，我想在运行时检索复选框 id 并稍后将它们用于其他目的。但是检索到的 id 被读取为对象。

我的代码是：

```
 // Following code gives id of checkbox which contains myCheckbox as its id.

   var myCheckbox= $('input[id$=myCheckbox]')[0].id;

 //  and Now I want to check if that checkbox is checked with following code:

  if ($(myCheckbox).is(':checked')) 
    return 1;
  else 
    return 0; 
```

但是这里 myCheckbox id 被读取为 Object 而不是 id ，因此总是在 else 条件下输入并返回 0。当我直接输入复选框的 id 时，此代码有效。

```
if ($('#ctl001_myCheckbox').is(':checked')) 
        return 1;
      else 
        return 0; 
```

它不应该那么复杂，我一直在使用 Javascript，但对 JQuery 来说是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:24:44.943

您正确获取了 ID，但 jQuery 选择器需要该`#`符号，这与 CSS 选择器的方式非常相似。您需要将`#`字符添加到选择器中：

```
if ($('#'+myCheckbox).is(':checked')) 
    return 1;
  else 
    return 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:43:20.737

BenM 是对的，但是为什么要获取元素的 ID，然后再查找*呢*？您已经找到了该元素，无需再次搜索它。

只需保留对元素的引用：

```
var myCheckbox = $('input[id$=myCheckbox]').first();
// or var myCheckbox = $('input[id$=myCheckbox]')[0];

// and later 

if (myCheckbox.is(':checked')) { 
// or if (myCheckbox.checked) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T12:44:53.593

简单地：

```
return  (($('#' + myCheckbox).is(':checked')) ^ false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:24:21.153

您是否尝试过使用：

```
var myCheckbox= $('input[id$=myCheckbox]').attr('id'); 
```

# antlr - Stringtemplate 模板参数总是被评估为一个字符串

> ID：14424483
> 
> 赞同：1
> 
> 时间：2013-01-20T12:24:07.713
> 
> 标签：antlr, stringtemplate, antlr4

我正在使用 Antlr 4 RC1（完整的 jar）来解析语法，构建自定义 ast，并使用 stringtemplate4 从该 AST 生成代码（我使用 antlr jar 中的 stringtemplate 类）。在模板中，我调用另一个带有 bean 列表的模板，例如

```
<subtemplate(myListArg=parm.listOfBeans)> 
```

然后在子模板中我得到一个字符串列表（每个字符串都是评估为字符串的 bean 之一）。但我需要的是 java bean 的列表（例如带有属性的简单 java 对象），因为我想处理 bean 的属性而不是 bean 的值，例如

```
<subtemplate(myListArg)> ::= <<
  <myListArg: {x | {... <x.someProperty> ...}>
>> 
```

在我看来，模板的参数总是被评估为字符串。这是预期的行为吗？如果是，我还应该写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:10:17.613

StringTemplate 4 在调用子模板时不会呈现数组的成员或`List`字符串，如下所示。**编辑：尽管在这篇文章的评论中有相反的说法，但**我重申 ST4在调用子模板时*不会*呈现数组的成员*或* `List`字符串。存储在数组或列表中的元素类型*没有区别*。

```
start(class) ::= <<
<fields(class.fields)>
>>

fields(fieldsArray) ::= <<
<fieldsArray:{field | <field.name>}; separator="\n">
>> 
```

如果您创建`start`模板实例并传递参数，您`Integer.class`将`class`获得以下输出：

```
MIN_VALUE
MAX_VALUE
TYPE
SIZE 
```

您的应用程序中必须出现以下情况之一：

1.  `myListArg`实际上不是字符串列表（即您得到了意外的输出，但不是出于此处列出的原因）
2.  您`ModelAdaptor`注册了一个类型，该类型`parm`正在返回该属性的字符串列表`listOfBeans`
3.  的类型`parm`有一个`getListOfBeans`返回字符串列表的方法
4.  项 (3) 不成立，并且类型`parm`有一个 listOfBeans 字段，它是一个字符串列表

编辑：关于列表与数组的问题，我执行了上面的单元测试并传递`new Clazz(Integer.class)`而不是仅仅传递`Integer.class`给`start`模板：

```
private static class Clazz {
    private final Class<?> clazz;

    public Clazz(Class<?> clazz) {
        this.clazz = clazz;
    }

    public List<Field> getFields() {
        return Arrays.asList(clazz.getFields());
    }
} 
```

# php - 未定义的偏移量通知，如何用空表行替换它

> ID：14424492
> 
> 赞同：0
> 
> 时间：2013-01-20T12:24:55.270
> 
> 标签：php, html

```
$arrQuestionContent = array();
$arrAnswerFile = array();

while ($qandaqrystmt->fetch()) {
    $arrQuestionId[] = $qandaQuestionId;
    $arrQuestionContent[] = $qandaQuestionContent;
}

...

while ($imgqrystmt->fetch()) {
  $arrAnswer[] = $AnswerFile;
} 
```

上面我有两个数组，它们从数据库中获取数据，`arrQuestionContent[]`获取所有问题，同时`$arrAnswer[]`获取每个问题的所有答案。

但是有些问题可能不包含答案，这导致`Notice: Undefined offset:`我的表中的每个问题行都不包含答案。

我的问题是，如果问题行不包含答案，我怎样才能让表格在列下显示一个空白行`Answer`？

也有可能一个问题有多个答案。如果是这种情况，那么我希望具有多个答案的问题行能够将其所有答案包含`Answer`在问题行中的列下。目前，它只为假设有多个答案的问题行显示一个答案：

下面是表格：

```
 <table id="tableqanda" align="center" cellpadding="0" cellspacing="0" border="1">
    <thead>
    <tr>
        <th width="30%" class="question">Question</th>
        <th width="12%" class="images">Answer</th>
    </tr>
    </thead>
    <tbody>
        <?php
          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="30%" class="question">'.htmlspecialchars($arrQuestionContent[$key]).'</td>' . PHP_EOL;
        echo '<td width="12%" class="images">'. ( empty ($arrAnswerFile[$key]) ) ? "&nbsp;" : htmlspecialchars( is_array( $arrAnswerFile[$key] ) ? implode(",", $arrAnswerFile[$key]) : $arrAnswerFile[$key] ) . '</td>' . PHP_EOL;
        echo '</tr>'.PHP_EOL;
        }
?>
    </tbody>
    </table> 
```

**更新：**

显示表应该是什么样子的屏幕截图：

![在此处输入图像描述](../Images/55768d45f32ea5c65bf9ffdd0a7ac5f6.png)

**更新 2：**

结果`var_dump($arrQuestionContent);`：

```
array(2) { [0]=> string(19) "Name these 2 things" [1]=> string(11) "What is 4+4" } 
```

结果`var_dump($arrAnswerFile);`：

```
array(3) { 
[0]=> string(1) "A" 
[1]=> string(1) "C" 
[2]=> string(1) "A" 
} 
```

下面是表格截图。无论问题是否有答案，都会发生这种情况：

![在此处输入图像描述](../Images/d7f47c9b08ed3c22afd50b16c9226a36.png)

数据库：

```
QuestionId  QuestionContent         Answer
1           Name these 2 Things     A
1           Name these 2 Things     C
2           What is 4+4?            A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:36:50.040

为了显示一个空单元格，您可以执行以下操作：

```
echo '<td>'. ( empty ($arrAnswerFile[$key]) ) ? "&nbsp;" : htmlspecialchars( $arrAnswerFile[$key] ) . '</td>' . PHP_EOL; 
```

对于另一种情况，要显示多个答案，如何做商店主题？如果您的 $arrAnswerFile[$key] 变量是一个数组，您可以执行以下操作来解决它：

```
echo '<td>'. ( ( empty ($arrAnswerFile[$key]) ) ? "&nbsp;" : htmlspecialchars( is_array( $arrAnswerFile[$key] ) ? implode(",", $arrAnswerFile[$key]) : $arrAnswerFile[$key] ) ). '</td>' . PHP_EOL; 
```

答案将以逗号分隔显示，但如果您以其他方式存储答案，请告诉我们，我们可以提出更好的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:33:50.880

在我们的聊天讨论之后，我们修复了问题的一部分，即为每个问题分配每个答案，对于其余的，多个答案的情况，请使用以下代码：

```
while ($qandaqrystmt->fetch()) { 
    $arrQuestionId[ $qandaQuestionId ] = $qandaQuestionId; 
    $arrQuestionNo[ $qandaQuestionId ] = $qandaQuestionNo; 
    $arrQuestionContent[ $qandaQuestionId ] = $qandaQuestionContent; 
    $arrOptionType[ $qandaQuestionId ] = $qandaOptionType; 
}
...
while ($imgqrystmt->fetch()) { 
    $arrImageFile[ $imgQuestionId ][] = basename($imgImageFile); 
} 
```

然后在 HTML 表格中显示元素，如下所示：

```
foreach ($arrQuestionId as $key=>$question) { 
    echo '<tr class="tableqandarow">'.PHP_EOL; 
    echo '<td width="5%" class="questionno">'.htmlspecialchars($arrQuestionNo[$key]).'</td>' . PHP_EOL; 
    echo '<td width="27%" class="question">'.htmlspecialchars($arrQuestionContent[$key]).'</td>' . PHP_EOL; 
    echo '<td width="7%" class="option">'.htmlspecialchars($arrOptionType[$key]).'</td>' . PHP_EOL; 
    echo '<td width="11%" class="imagetd">'. ( ( empty ($arrImageFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(" ", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</li></ul></td>' . PHP_EOL; 
    echo '</tr>'.PHP_EOL; 
    } 
```

我希望这现在有效，如果不只是告诉我它给了我什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:36:16.917

不清楚如何设置变量 $qandaQuestionContent 和 $AnswerFile （获取值）。

也许您应该修改问题中提到的两个**while**循环以获得 $qandaQuestionContent 和 $AnswerFile 的值。

# scala - 根据条件构建不可变列表

> ID：14424493
> 
> 赞同：7
> 
> 时间：2013-01-20T12:25:04.430
> 
> 标签：scala

我必须根据每个不同的条件建立一个列表，其成员应该包括或不包括在内。

假设我必须验证采购订单，并且根据价格，我必须通知一些人：如果价格超过 10，则必须通知主管。如果价格超过 100，那么主管和经理都是。如果价格超过 1000 则为主管、经理和主管。

我的函数应该将价格作为输入并输出要通知的人员列表。我想出了以下内容：

```
def whoToNotify(price:Int) = {
  addIf(price>1000, "director",
        addIf(price>100, "manager",
              addIf(price>10, "supervisor", Nil)
        )
       )
}

def addIf[A](condition:Boolean, elem:A, list:List[A]) = {
  if(condition) elem :: list else list
} 
```

在普通的 Scala 中是否有更好的方法来做到这一点？我是在用我的`addIf`功能重新发明一些轮子吗？

请注意，价格检查只是一种简化。在现实生活中，对许多数据库字段的检查会更加复杂，并且在组织层次结构中包括某人并不意味着包括下面的所有人，因此截断列表解决方案将不起作用。

## 编辑

基本上，我想使用不可变列表实现以下目标：

```
def whoToNotify(po:PurchaseOrder) = {
      val people = scala.collection.mutable.Buffer[String]()
      if(directorCondition(po)) people += "director"
      if(managerCondition(po)) people += "manager"
      if(supervisorCondition(po)) people += "supervisor"
      people.toList
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:49:17.640

您可以使用`List#flatten()`从子元素构建列表。它甚至可以让您同时添加两个人（我将在下面的示例中为经理这样做）：

```
def whoToNotify(price:Int) =
  List(if (price > 1000) List("director") else Nil,
       if (price > 100) List("manager1", "manager2") else Nil,
       if (price > 10) List("supervisor") else Nil).flatten 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T13:13:21.107

好吧，这是风格问题，但我会这样做以使所有条件都更适合 -

```
case class Condition(price: Int, designation: String)

val list = List(                                                
                Condition(10, "supervisor"), 
                Condition(100, "manager") , 
                Condition(1000, "director") 
                )

def whoToNotify(price: Int) = {
        list.filter(_.price <= price).map(_.designation)
} 
```

您可以根据自己的要求适应所有条件`Condition class`并发挥作用。`filter`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T12:38:36.930

嗯，这是一个风格问题，但我更愿意保留一份人员列表以通过规则通知而不是函数嵌套。我没有看到像`addIf`上面例子中那样的东西有多大价值。

我的解决方案。

```
val notifyAbovePrice = List(
    (10, "supervisor"),
    (100, "manager"),
    (1000, "director"))

def whoToNotify(price: Int): Seq[String] = {
  notifyAbovePrice.takeWhile(price > _._1).map(_._2)
} 
```

在现实世界中，如果没有订单或订单不暗示较低级别的通知，您可能有对象来`notifyAbovePrice`代替元组并使用`filter`代替。`takeWhile`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T12:40:04.687

如果您有原始成员列表，您可能会考虑使用该`filter`方法。如果您还想转换成员对象以在末尾具有不同类型的列表，请查看该`collect`方法，该方法采用偏函数。

# ios - iOS 音频：剪切和拼接音频？

> ID：14424494
> 
> 赞同：2
> 
> 时间：2013-01-20T12:25:05.053
> 
> 标签：ios, audio, editing

我是一名 Unity 开发人员，需要帮助同事在 Obj-C 中本地执行此操作。在 Unity 中这没什么大不了的：

1) 样本作为 float[] 的列表存储在内存中

2）辅助函数在任何给定偏移处为任何给定样本返回 n 大小的 float[]

3）如果需要，另一个辅助函数会淡化数据

4) 创建一个大小合适的 AudioClip 对象以容纳所有剪切样本，然后以适当的偏移量填充。

5）AudioClip被分配给一个播放器组件（AudioSource）。

6)AudioSource.Play(ulong offsetInSamples)，在未来的采样准确时间播放。循环也只是设置 AudioSource 对象的循环参数。

如果有人能指出正确的类以在 iOS 设备的 Obj-C 中实现类似结果，我将不胜感激。我很确定很多 iOS 音频新手也会感兴趣。提前谢谢了！

格雷佐

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:48:27.847

[此处](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)对 iOs 中可用的相关音频 API 进行了很好的概述

对于将音频剪辑拼凑在一起、设置它们的音量级别并在您的情况下播放它们有意义的最高级别的框架可能是[`AVFoundation`](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html).

它将涉及创建`AVAsset`s，将它们添加到`AVPlayerItem`s，可能将它们放入`AVMutableComposition`s 以将多个项目合并在一起并调整它们的音量 ( `audioMix`)，然后用 s 回放它们`AVPlayer`。

AVFoundation 与 AVAsset 一起使用，用于在您想要查看的相关格式和较低级别的字节之间进行转换`AudioToolbox`（我还不能发布两个以上的链接）。

对于控制较少的稍微简单的 API，请查看`AVAudioPlayer`. 如果您需要更好的控制（例如：游戏 - 实时/低延迟），您可能需要使用 OpenAL 进行播放。

# python - Python中的文本移位功能

> ID：14424500
> 
> 赞同：8
> 
> 时间：2013-01-20T12:25:42.450
> 
> 标签：python, python-2.7

我正在编写代码，以便您可以将文本沿字母表移动两个位置：“ab cd”应该变成“cd ef”。我正在使用 Python 2，这就是我目前所得到的：

```
def shifttext(shift):
    input=raw_input('Input text here: ')
    data = list(input)
    for i in data:
        data[i] = chr((ord(i) + shift) % 26)
        output = ''.join(data)
    return output
shifttext(3) 
```

我收到以下错误：

```
File "level1.py", line 9, in <module>
    shifttext(3)
File "level1.py", line 5, in shifttext
    data[i] = chr((ord(i) + shift) % 26)
TypError: list indices must be integers, not str 
```

所以我必须以某种方式将字母更改为数字？但我想我已经这样做了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T12:37:00.970

您正在遍历字符列表，`i`因此是一个字符。然后，您尝试将其存储回`data`使用`i`字符作为索引。那是行不通的。

用于`enumerate()`获取索引*和*值：

```
def shifttext(shift):
    input=raw_input('Input text here: ')
    data = list(input)
    for i, char in enumerate(data):
        data[i] = chr((ord(char) + shift) % 26)
    output = ''.join(data)
    return output 
```

您可以使用生成器表达式来简化它：

```
def shifttext(shift):
    input=raw_input('Input text here: ')
    return ''.join(chr((ord(char) + shift) % 26) for char in input) 
```

但是现在你会注意到你的`% 26`行不通；ASCII 码点在 26 之后*开始：*

```
>>> ord('a')
97 
```

您需要使用该`ord('a')`值才能使用模数；减法将您的值置于 0-25 范围内，然后再次添加：

```
 a = ord('a')
    return ''.join(chr((ord(char) - a + shift) % 26) + a) for char in input) 
```

但这仅适用于小写字母；这可能很好，但是您可以通过小写输入来强制执行此操作：

```
 a = ord('a')
    return ''.join(chr((ord(char) - a + shift) % 26 + a) for char in input.lower()) 
```

如果我们然后从函数中请求输入以使其专注于做好一项工作，则变为：

```
def shifttext(text, shift):
    a = ord('a')
    return ''.join(chr((ord(char) - a + shift) % 26 + a) for char in text.lower())

print shifttext(raw_input('Input text here: '), 3) 
```

并在我看到的交互式提示中使用它：

```
>>> print shifttext(raw_input('Input text here: '), 3)
Input text here: Cesarsalad!
fhvduvdodgr 
```

当然，现在标点符号被带走了。上次修订，现在只转换字母：

```
def shifttext(text, shift):
    a = ord('a')
    return ''.join(
        chr((ord(char) - a + shift) % 26 + a) if 'a' <= char <= 'z' else char
        for char in text.lower()) 
```

我们得到：

```
>>> print shifttext(raw_input('Input text here: '), 3)
Input text here: Ceasarsalad!
fhdvduvdodg! 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T12:45:53.453

看起来你正在做 cesar-cipher 加密，所以你可以尝试这样的事情：

```
strs = 'abcdefghijklmnopqrstuvwxyz'      #use a string like this, instead of ord() 
def shifttext(shift):
    inp = raw_input('Input text here: ')
    data = []
    for i in inp:                     #iterate over the text not some list
        if i.strip() and i in strs:                 # if the char is not a space ""  
            data.append(strs[(strs.index(i) + shift) % 26])    
        else:
            data.append(i)           #if space the simply append it to data
    output = ''.join(data)
    return output 
```

**输出：**

```
In [2]: shifttext(3)
Input text here: how are you?
Out[2]: 'krz duh brx?'

In [3]: shifttext(3)
Input text here: Fine.
Out[3]: 'Flqh.' 
```

`strs[(strs.index(i) + shift) % 26]`：上面的行意味着找到字符的索引，`i`然后`strs`将移位值添加到它。现在，在最终值（索引+移位）上应用 %26 来获取移位索引。当传递给时，这个移位的索引会`strs[new_index]` 产生所需的移位字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-30T08:50:32.960

Martijn的回答很棒。这是实现相同目的的另一种方法：

```
import string

def shifttext(text, shift):
    shift %= 26 # optional, allows for |shift| > 26 
    alphabet = string.lowercase # 'abcdefghijklmnopqrstuvwxyz' (note: for Python 3, use string.ascii_lowercase instead)
    shifted_alphabet = alphabet[shift:] + alphabet[:shift]
    return string.translate(text, string.maketrans(alphabet, shifted_alphabet))

print shifttext(raw_input('Input text here: '), 3) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T12:34:17.000

写一个直接的函数更容易`shifttext(text, shift)`。如果需要提示，请使用 Python 的交互模式`python -i shift.py`

```
> shifttext('hello', 2)
'jgnnq' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-04T22:23:56.110

尝试使用基本 python。可能对某人有用。

```
# Caesar cipher
import sys

text = input("Enter your message: ")

cipher = ''
try:
  number = int(input("Enter Number to shift the value : "))
except ValueError:
  print("Entered number should be integer. please re0enter the value")
  try:
    number = int(input("Enter Number to shift the value : "))
  except:
    print("Error occurred. please try again.")
    sys.exit(2)

for char in text:
    if not char.isalpha():
      flag = char
    elif char.isupper():
      code = ord(char) + number
      if 64 < code <= 90:
        flag = chr(code)
      elif code > 90:
        flag = chr((code - 90) + 64)

    elif char.islower():
      code = ord(char) + number
      if 96 < code <= 122:
        flag = chr(code)
      elif code > 122:
        flag = chr((code - 122) + 96)

    else:
      print("not supported value by ASCII")

    cipher += flag

print(cipher) 
```

# vmware - 使用 VMware 在 Windows 和 Linux 之间无明显原因的 Darcs 推送失败

> ID：14424508
> 
> 赞同：1
> 
> 时间：2013-01-20T12:26:24.953
> 
> 标签：vmware, darcs

我在这里有一个奇怪的 Darcs 问题。

我正在运行具有 Linux 来宾操作系统和 Windows 主机操作系统的 VM。我已设置`/mnt`为“共享文件夹”；放置在这里的任何文件实际上都存储在主机操作系统上的文件夹中。除其他外，这会导致所有文件的权限设置为`666 root,root`. （当然，Windows 不支持 Unix 风格的文件模式。）

这是发生的事情：

*   `cd /mnt/some-random-folder`
*   `darcs init`
*   `cd ~/some-random-folder`
*   `darcs pull /mnt/some-random-folder`
*   创建几个文件
*   `darcs add`文件
*   `darcs record`

到目前为止，一切正常。但现在...

```
user1:~/some-random-folder> darcs push
Pushing to "/mnt/some-random-folder"...
Sun Jan 20 12:11:50 GMT 2013  User1
* Update dependencies.
Shall I push this patch? (1/1)  [ynW...], or ? for more options: y
darcs: ./_darcs/tentative_pristine-0: rename: permission denied (Permission denied)
Apply failed! 
```

呃……这到底是怎么回事？？

（而且，更重要的是，我如何让它停止发生并真正*起作用*？）

我尝试使用`cp`同步存储库，认为问题可能是我从一个完全空的存储库开始，没有补丁。这会更改错误消息（现在它无法打开`_darcs\index`- 权限被拒绝），但它实际上仍然不起作用。

**编辑：** Darcs 2.8.1 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T21:06:37.650

进一步玩了这个，似乎从来宾操作系统访问主机操作系统上的文件会做各种奇怪的事情。像，我删除一个文件，`ls`告诉我文件已经消失了，但是当我尝试写入该文件时，它说它不能，因为它已经存在。卸载并重新安装文件系统，问题就消失了。

简而言之，我认为这可能与 Darcs 根本无关，只是 VMware 驱动器很奇怪/有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:32:43.523

权限可能有点棘手。值得检查一下 /mnt/some-random-folder 中的所有文件是否真的对每个人都是可写的。

我怀疑这不是解决此类问题的理想论坛，因为它可能涉及大量来回聊天以弄清楚发生了什么。darcs-users 邮件列表或#darcs IRC 频道怎么样？

# python - 如何在 Pygame 上显示玩家的分数？

> ID：14424509
> 
> 赞同：2
> 
> 时间：2013-01-20T06:33:25.243
> 
> 标签：python, memory

我是一名新程序员，正在为我的计算机科学总结开发记忆游戏。游戏是这样的：计算机在随机位置显示随机框，然后用户必须猜测框在哪里并单击它。

我基本上完成了，除了现在我正在尝试创建 5 个不同级别的难度级别。例如，级别 1 将显示 2 个框，级别 2 将显示 5，等等。然后，如果用户通过所有级别，他们可以再次玩。我知道很多，但我真的很想在这方面获得 A。

但是现在我被卡住了，因为在我尝试关闭窗口之前它并没有真正起作用，即使那样它也只能运行到一半。任何帮助，将不胜感激。

```
import pygame , sys
import random
import time
size=[500,500]
pygame.init()
screen=pygame.display.set_mode(size)

# Colours
LIME = (0,255,0) 
RED = (255, 0, 0)
BLACK = (0,0,0)
PINK = (255,102,178)
SALMON = (255,192,203)
WHITE = (255,255,255)
LIGHT_PINK = (255, 181, 197)
SKY_BLUE = (176, 226, 255)
screen.fill(BLACK)

# Width and Height of game box
width=50
height=50

# Margin between each cell
margin = 5

rows = 20
columns = 20

# Set title of screen
pygame.display.set_caption("Spatial Recall")

# Used to manage how fast the screen updates
clock=pygame.time.Clock()

coord=[]

# Create a 2 dimensional array. A two dimesional
# array is simply a list of lists.
def resetGrid():
    grid = []
    for row in range(rows):
        # Add an empty array that will hold each cell
        # in this row
        grid.append([])
        for column in range(columns):
            grid[row].append(0) # Append a cell  
    return grid

def displayAllPink(pygame):
    for row in range(rows):
        for column in range(columns):
            color = LIGHT_PINK
            pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
            pygame.display.flip()      

def displayOtherColor(pygame,grid):
    coord = []
    for i in range(random.randint(2,5)):
        x = random.randint(2, rows-1)
        y = random.randint(2, columns-1)                
        color = LIME    
        pygame.draw.rect(screen,color,[(margin+width)*y + margin,(margin+height)*x+margin,width,height])
        coord.append((x,y))  
        grid[x][y] = 1
        pygame.display.flip() 
    time.sleep(1)
    return coord

def runGame(gameCount,coord,pygame,grid):
    pygame.event.clear()
    pygame.display.set_caption("Spatial Recall: Level "+ str(gameCount))
    pygame.time.set_timer(pygame.USEREVENT,1000)
    time = 0
    #clock.tick( 
            # -------- Main Program Loop -----------
    #Loop until the user clicks the close button.
    done = False
    while done==False:    
        event = pygame.event.wait() # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
            pygame.event.clear()
            print "Game ",gameCount, "ends"
        elif event.type == pygame.USEREVENT:
            time = time + 1
            pygame.display.set_caption("Spatial Recall: Level "+ str(gameCount) + " Time: "+ str(time))
            if time == 100:
                done = True
                pygame.display.set_caption("Time out, moving to next level")
                pygame.event.clear()
                return False
        elif event.type == pygame.MOUSEBUTTONDOWN:
            # User clicks the mouse. Get the position
            pos = pygame.mouse.get_pos()
            # Change the x/y screen coordinates to grid coordinates
            column=pos[0] // (width+margin)
            row=pos[1] // (height+margin)
            if (row,column) in coord:
                print coord
                coord.remove((row,column))
                print coord
                color = LIME
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
                if coord == []:
                    done=True 
                    pygame.display.set_caption("Time out, moving to next level")
                    pygame.event.clear()
                    return True
            else:
                color = RED
                pygame.draw.rect(screen,color,[(margin+width)*column + margin,(margin+height)*row+margin,width,height])
            pygame.display.flip() 

def startTheGame(gameCount):
    grid = resetGrid()
    displayAllPink(pygame)
    coord = displayOtherColor(pygame,grid)
    displayAllPink(pygame)
    runGame(gameCount,coord,pygame,grid)

for i in range(2):
    startTheGame(i+1)
pygame.quit () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:18:38.940

您可能想要使用该`pygame.font`模块。 [http://pygame.org/docs/ref/font.html](http://pygame.org/docs/ref/font.html)

*   首先，从文件或系统字体函数之一加载字体。
*   打电话`YourFontObject.render(your_text_string)`。这将返回一个`Surface`包含以给定字体呈现的字符串。请注意，您不能使用换行符 ( `\n`) 字符！你必须自己做间距。
*   在其他所有内容之后将其粘贴`Surface`到屏幕上，因此没有任何东西会掩盖它。

此外，您不需要`pygame`函数中的参数。

希望这可以帮助。

# python - 在python中获取文件夹的正确路径

> ID：14424514
> 
> 赞同：2
> 
> 时间：2013-01-20T12:26:45.563
> 
> 标签：python, path

我有一个目录结构如下

```
/home/damon/dev/python/misc/path/
                                /project/mycode.py
                                /app/templates/ 
```

我需要从 mycode.py 获取模板文件夹的绝对路径

我试着`mycode.py`写成

```
import os

if __name__=='__main__':
    PRJ_FLDR=os.path.dirname(os.path.abspath(__file__))
    print 'PRJ_FLDR=',PRJ_FLDR
    apptemplates = os.path.join(PRJ_FLDR,'../app/templates')
    print 'apptemplates=',apptemplates 
```

我希望 apptemplates 是

```
/home/damon/dev/python/misc/path/app/templates 
```

但我得到

```
/home/damon/dev/python/misc/path/project/../app/templates 
```

如何获得正确的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:41:34.893

那条路*是*对的，试试看。但是，如果您想为了清楚起见删除多余的“项目/../”部分，请使用`os.path.normpath`

> `os.path.normpath(path)`
> 
> 规范化路径名。这会折叠多余的分隔符和上层引用，以便 A//B、A/B/、A/./B 和 A/foo/../B 都变为 A/B。

[http://docs.python.org/2/library/os.path.html#os.path.normpath](http://docs.python.org/2/library/os.path.html#os.path.normpath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:28:37.813

这是你想要的吗？

```
import os

if __name__=='__main__':
    PRJ_FLDR=os.path.dirname(os.path.abspath(__file__))
    print 'PRJ_FLDR=',PRJ_FLDR
    apptemplates = os.path.abspath(os.path.join(PRJ_FLDR, '../app/templates'))
    print 'apptemplates=',apptemplates 
```

考虑到评论，我进行了适当的编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:37:48.537

我试过这个，它似乎工作

```
parentpath=os.path.abspath(os.path.join(os.path.dirname(__file__),".."))
apptemplates=os.path.join(parentpath,'app/templates') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:46:20.550

这有效：

```
apptemplates = os.path.join(os.path.split(PRJ_FLDR)[0], "app/templates") 
```

# php - 为什么图像压缩有时会缩小尺寸，有时会增大尺寸？

> ID：14424521
> 
> 赞同：1
> 
> 时间：2013-01-20T12:27:21.977
> 
> 标签：php, image, compression, imagemagick, imagick

我正在使用 Imagick 压缩图像（主要是 JPEG），但结果非常随机。例如，查看这些结果（近似数字和所有 JPEG）：

1600kb -> 600kb（节省 1000kb）
1000kb -> 1200kb（浪费 200kb）
400kb -> 500kb（浪费 100kb）

这是我使用的代码：

```
$image = new Imagick($path);
$image->stripImage(); // remove metadata, though Imagick adds its own, not sure why
$image->setImageCompressionQuality(0); // lossless compression
$image->writeImages($path, true); // writeImages instead of writeImage, in case it's a GIF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:39:06.693

图像重新压缩会因源图像文件而异。如果原始图像是用好的软件精心制作的，ImageMagick 可能无法匹配它。简单的解决方案：比较原始版本和新版本的文件大小，保留较小的。

另外，请注意，压缩质量数字的含义取决于图像的文件类型。特别是，0 表示 JPEG 的“最差质量、最小尺寸”，但表示 PNG 的“快速压缩，不一定很小”。见[http://www.imagemagick.org/script/command-line-options.php#quality](http://www.imagemagick.org/script/command-line-options.php#quality)

# c++ - Copy static class member to local variable for optimization

> ID：14424526
> 
> 赞同：4
> 
> 时间：2013-01-20T12:28:20.900
> 
> 标签：c++, optimization

While browsing open source code (from *OpenCV*), I came across the following type of code inside a method:

```
// copy class member to local variable for optimization
int foo = _foo; //where _foo is a class member

for (...) //a heavy loop that makes use of foo 
```

From [another question](https://stackoverflow.com/questions/8269874/performance-difference-between-accessing-local-and-class-member-variables) on SO I've concluded that the answer to whether or not **this actually needs to be done or is done automatically by the compiler may be compiler/setting dependent.**

My question is if it would make any difference if `_foo` were a `static` class member? Would there still be a point in this manual optimization, or is accessing a static class member no more 'expensive' than accessing a local variable?

*P.S. - I'm asking out of curiosity, not to solve a specific problem*.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:39:26.677

Accessing a property means de-referencing the object, in order to access it.

As the property may change during the execution (read threads), the compiler will read the value from memory each time the value is accessed.

Using a local variable will allow the compiler to use a register for the value, as it can safely assume the value won't change from the outside. This way, the value is read only once from memory.

About your question concerning the static member, it's the same, as it can also be changed by another thread, for instance. The compiler will also need to read the value each time from memory.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T12:39:59.163

I think a local variable is more likely to participate in some optimization, precisely because it is *local* to the function: this fact can be used by the compiler, for example if it sees that nobody modifies the *local* variable, then the compiler may load it *once*, and use it in every iteration.

In case of member data, the compiler may have to work more to conclude that nobody modifies the member. Think about multi-threaded application, and note that the memory model in C++11 is multi-threaded, which means some other thread might modify the member, so the compiler may not conclude that nobody modifies it, in consequence it has to emit code for *load* member for every expression which uses it, possibly multiple times in a single iteration, in order to work with the updated value of the member.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:47:22.357

In this example the the _foo will be copied into new local variable. so both cases the same. Statis values are like any other variable. its just stored in different memory segment dedicated for static memory.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T15:10:36.563

Reading a static class member is effectively like reading a global variable. They both have a fixed address. Reading a non-static one means first reading the this-pointer, adding an offset to the result and then reading that address. In other words, reading a non-static one requires more steps and memory accesses.

# java - 从树中选择随机节点

> ID：14424534
> 
> 赞同：5
> 
> 时间：2013-01-20T12:28:47.907
> 
> 标签：java, data-structures, random, tree

我有一个树数据结构，其中每个节点可以有多个子节点。因此，不仅有左和右，而且更少甚至更多。现在我想从这棵树中随机选择一个节点。对于每个节点，我知道有多少孩子连接到它。但是我怎么能以随机的方式挑选它们，统一会很棒。有任何想法吗？我找到了只有左右孩子的解决方案，但正如我所说，这在这里并不适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:59:21.030

这是一个可能有用的观察：假设您以某种方式对树中的所有节点进行编号，这样可以有效地查找某个任意 n 的第 n 个树节点。如果你能做到这一点，那么你可以通过选择一个随机节点号来有效地选择一个随机节点，然后去那个节点。

一种非常简单的方法是执行 DFS 或树的其他遍历并将所有节点存储在动态数组中。然后，您只需索引数组即可进行 O(1) 时间随机采样。但是，这有 O(n) 的内存开销，如果树不断变化，那就不好了。

如果树正在快速变化，另一种对节点进行编号以减少重新计算索引所需时间的方法如下。首先将根节点编号为 0。然后，对第一个子树中的节点进行递归编号，然后是第二个，依此类推。您可以通过让每个树节点将节点总数存储在以该节点为根的子树。这样，要查找树中的第 n 个节点，您可以执行以下操作：

1.  如果 n = 0，则返回根节点。
2.  否则，设置 n = n - 1，然后从左到右一次循环遍历当前节点的子节点，如下所示：
    1.  设 k 为子树中的节点数。
    2.  如果 n < k，则递归查找此子树中的第 n 个节点。
    3.  否则，设置 n = n - k。

如果您有一个具有合理分支因子的相对平衡的树，则此方法运行得非常快，因为您可以快速丢弃树中不包含第 n 个元素的部分。

使用这种方法，您可以获得一种非常快速的方法（尽管不是 O(1)），用于从树中挑选第 n 个元素：选择一个随机索引，然后返回该索引处的节点。此外，即使在树中添加或删除节点，这也有效。每当插入一个节点时，只需增加从根到该节点的路径上所有节点的计数。每当删除节点时，减少从根到已删除节点的路径上的所有节点的计数。

不过，这种方法仍然使用 O(n) 开销来存储计数。对于在线性时间内运行的 O(1) 开销算法，请查看 @NPE 基于水库采样的出色解决方案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:32:06.457

如果均匀分布很重要，您可以遍历树并使用[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)。

但是，其时间复杂度与节点数量呈线性关系。

# android - 在 Android 应用中发送电子邮件

> ID：14424535
> 
> 赞同：0
> 
> 时间：2013-01-20T12:29:01.710
> 
> 标签：android, email

我正在开发一个安卓应用程序，我的客户的要求是在应用程序中添加一个“忘记密码”页面，这个页面要求用户输入他的电子邮件，如果电子邮件通过身份验证，那么应用程序应该将密码通过电子邮件发送到用户电子邮件。

我正在寻找在线电子邮件服务器，但不知道这样做。

场景很简单，应用程序应该能够使用私人电子邮件帐户发送电子邮件（例如`XXXX@App.com`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:46:58.363

```
 Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL, new String[]{"youremail@app.com"});        
    email.putExtra(Intent.EXTRA_SUBJECT, "subject");
    email.putExtra(Intent.EXTRA_TEXT, "message");
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

来源：[教程](http://www.mkyong.com/android/how-to-send-email-in-android/)。

**PS：**您应该购买一个 SMTP 服务器来从您的应用程序向用户发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:48:11.907

您可以使用`javax.mail`API 发送电子邮件。请记住，发送电子邮件需要您拥有 SMTP 服务器，但您可以使用 GMail 的 SMTP 服务器作为开始。可以在此处找到示例代码：

[http://www.javapractices.com/topic/TopicAction.do?Id=144](http://www.javapractices.com/topic/TopicAction.do?Id=144)

只要记住几件事：

*   您*不应该*从您的 Android 应用程序发送电子邮件。由于您必须提供 SMTP 服务器及其帐户凭据，它们可能会从您的应用程序代码中剥离并被滥用。
*   您应该将电子邮件发送代码放在您的服务器中，并允许它根据消息类型和其他一些需要的数据（如用户 ID）仅发送几种消息类型（例如密码恢复帮助程序、订阅通知等）从发送你的申请。这可以保护您免受有人使用您的服务器发送任意消息（例如常规垃圾邮件）的可能性。
*   您必须提供有效凭据，而不是`fromblah@blah.com`配置您的电子邮件设置。例如，GMail 为 SMTP 服务器使用自定义端口。您可以在此处找到帮助：http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=78775](http://support.google.com/mail/bin/answer.py?hl=en&answer=78775)

# wpf - WPF：如果位图经常更新，则呈现 WriteableBitmap 的最佳方法

> ID：14424537
> 
> 赞同：3
> 
> 时间：2013-01-20T12:29:13.130
> 
> 标签：wpf, bitmap

我目前正在通过在 WPF 中使用 WriteableBitmap 来实现宽带声纳显示。宽带声纳“瀑布”显示从顶部开始，随着时间的推移，历史数据向下移动，第一“行”始终显示当前情况。

从技术上讲，我首先使用 WriteableBitmap.CopyPixels() 将位图的内容向下移动，然后更新数组以更新显示的当前行（顶部）。

我现在的问题是 - 在位图更新期间 - 屏幕闪烁。我尝试编写自己的 WritePixels 实现：

```
 public static unsafe void WritePixels(WriteableBitmap writeableBitmap, BitmapProperties bitmapProperties)
    {

       writeableBitmap.Lock();
       IntPtr buff = writeableBitmap.BackBuffer;

       byte* pbuff = (byte*)buff.ToPointer();

        for (int i = 0; i < bitmapProperties.BitmapArray.Length; i += bitmapProperties.BytesPerPixel)
        {
            pbuff[i] = bitmapProperties.BitmapArray[i];
            pbuff[i + 1] = bitmapProperties.BitmapArray[i + 1];
            pbuff[i + 2] = bitmapProperties.BitmapArray[i + 2];
            pbuff[i + 3] = bitmapProperties.BitmapArray[i + 3];

        }

        writeableBitmap.AddDirtyRect(new Int32Rect(0, 0, (int)writeableBitmap.Width, (int)writeableBitmap.Height));
        writeableBitmap.Unlock();

    } 
```

不幸的是，ouctome 是一样的。

我在这里看到了一些类似的问题（实现医疗超声显示），但这里的用例略有不同，因为我不是从第三方 c++ 界面获取图片，而是我自己“绘制”并复制位图（更改/复制位图数组）。渲染（位图的更新）应每 ~ 250 毫秒发生一次。

我在这里最好的选择是什么……使用缓存的位图？对于 WPF 中的低级位图操作（我使用的是 WPF 4.5），我没有太多经验。

谢谢。

编辑：我已经将它与一个用 C++/DirectX 编写的参考应用程序进行了比较：令我惊讶的是，我看到即使发生了“闪烁”。可能是一些光学效应，干扰眼睛等。然而，关于是否有比我目前的实现更好的方法，这个问题仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:23:11.697

您是否尝试过衡量刷新整个图像是否需要太长时间？也许双缓冲可以帮助你：

*   复制整个位图
*   添加您的更改或在后台线程中替换图像的副本
*   如果工作完成，从后台线程切换准备好的图像与当前可见的图像
*   再次对当前不可见的图像进行更改等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-06T10:02:24.793

也许你可以在 kernel32.dll 中使用 CopyMemory，这样更快

```
[DllImport("kernel32.dll", EntryPoint = "CopyMemory", SetLastError = false)]
public static extern void CopyMemory(IntPtr dest, IntPtr src, uint count);

private Data2Image(int width, int height, IntPtr data, WriteableBitmap)
{
    writeableBitmap.Lock();            
    try
    {
        CopyMemory(writeableBitmap.BackBuffer, data, (uint)(width * height * 4));
        writeableBitmap.AddDirtyRect(new Int32Rect(0, 0, width, height));
    }
    finally
    {
        writeableBitmap.Unlock();
    }
} 
```

# php - 如何将复选框中的值添加到“选择”查询？

> ID：14424538
> 
> 赞同：1
> 
> 时间：2013-01-20T12:29:18.917
> 
> 标签：php, sql, post, checkbox

我有一些像这样的复选框

```
<form action="tt.php" method="post">
<input type="checkbox" name="lvl[]" value="0">0&nbsp
<input type="checkbox" name="lvl[]" value="1">1&nbsp
<input type="checkbox" name="lvl[]" value="2">2&nbsp
<input type="checkbox" name="lvl[]" value="3">3&nbsp
<input type="checkbox" name="lvl[]" value="4">4&nbsp
<input type="submit" value="Ok"> 
```

如何像这样将选中的值添加到 SQL 查询中？：

如果选中 2 和 4 然后
`select name,lvl,team from $table where lvl=2 or lvl=4`
如果选中 2 和 4 **AND 0**然后
`select name,lvl,team from $table where lvl=2 or lvl=4 or team='abc'`（如果选中 0 则 'select' 必须包含其中 team='abc' 的字符串，如果没有 - 不要）
如果没有选择则
`select name,lvl,team from $table`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:37:15.047

```
$where = '';

if (isset($_POST['lvl']) && $vals = $_POST['lvl']) {

   // Begin WHERE string
   $where = 'WHERE '; 

   // Remove '0' from array
   if ($key = array_search('0', $vals)) {
      $where .= 'team = "abc" ';
      unset($vals[$key]);
   } 

   // Append `WHERE lvl IN (2,4)`
   $where .= 'AND lvl IN (' . implode(',', $vals) . ')';

   // Final statement

}

$sql = "select name,lvl,team from $table $where"; 
```

* * *

**编辑**

如果你替换它会发生什么：

```
if ($key = array_search('0', $vals)) {
   $where .= 'team = "abc" ';
   unset($vals[$key]);
} 
```

和：

```
if ($vals[0] === '0') {
   $where .= 'team = "abc" ';
   unset($vals[0]);
} 
```

* * *

将您的代码更改为：

```
$first = false;
if ($vals[0] === '0') {
    $where .= 'team = "neutral"';
    unset($vals[0]);
    $first = true;
}
if (count($vals)) {
    if ($first) $where .= ' OR ';
    $where .= 'lvl IN (' . implode(',', $vals) . ')';
} 
```

# sml - 为什么类型 'a 和 ''Z 在 SML 中不匹配？

> ID：14424540
> 
> 赞同：4
> 
> 时间：2013-01-20T12:29:44.017
> 
> 标签：sml

我有以下递归函数：

```
fun tester (f:'a -> 'b, tl:(string * 'a * 'b) list) =
    case tl of
    [] => []
     | (t, c, e)::rest => 
       let val tr = f (c)
       in
           if tr <> (e)
           then ((t), (e), tr)::(tester (f, rest))
           else tester (f, rest)
       end; 
```

加载时出现“错误：运算符和操作数不同意 [UBOUND 匹配]”：

```
lec1test.sml:17.5-19.26 Error: operator and operand don't agree [UBOUND match]
  operator domain: ''Z * ''Z
  operand:         'b * 'Y
  in expression:
    tr <> e

uncaught exception Error
  raised at: ../compiler/TopLevel/interact/evalloop.sml:66.19-66.27
             ../compiler/TopLevel/interact/evalloop.sml:44.55
             ../compiler/TopLevel/interact/evalloop.sml:296.17-296.20 
```

我发现我认为它与 tr 的通用绑定有关，但我不明白为什么这是个问题。我分配`tr`给函数的值 from `f`，它返回`'b`。然后我将结果与元组中的最后一个值进行比较，该值也是 type `'b`。有人可以解释为什么这会给我一个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T13:05:25.297

并非所有类型都支持相等运算符`=`，`<>`只有所谓的*相等类型*。例如，`int`or `string list`or`bool * unit`是相等类型，但例如函数类型`t -> u`永远不是，因为没有合理的（可确定的）方法来比较函数。

像多态类型的值`'a`也不是相等类型，因为类型变量可以由任何类型实例化。要获得限制为相等类型的多态类型，您需要编写一个带有双勾号的类型变量，例如`''a`.

在您的情况下，将第一行更改为

```
fun tester (f : ''a -> ''b,  tl : (string * ''a * ''b) list) = 
```

应该为你修复它。

# sublimetext2 - 如何在 Sublime Text 2 (Windows) 中执行/运行 Ruby 代码？

> ID：14424551
> 
> 赞同：1
> 
> 时间：2013-01-20T12:31:36.897
> 
> 标签：sublimetext2

我曾尝试使用 ctrl + B，但我得到的只是 [在 0.3 秒内完成]。我需要下载一个包才能使用热键吗？如果是这样，有谁知道我在哪里可以找到我需要的带有良好说明的包裹？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:55:46.020

`Control`+`b`运行您当前在 ST2 的 irc（交互式 ruby​​ 控制台）中查看的文件。

`Control`+ ```（即勾选/tilda 按钮）为您当前查看的项目打开 irc。

假设没有其他包或键绑定覆盖这些默认命令，这些对 linux、osx 和 windows 都很好。

另外，请注意，控制台是 OSX 中的系统 Python，以及 Windows 和 linux 中的 Python 解释器。

可在此处找到良好的可搜索文档，这是从 ST2 的网站上找到的关于[此处文档](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/basic_concepts.html#the-python-console-and-the-python-api)[的](http://www.sublimetext.com/support)三个建议链接之一。

# eclipse - 添加现有的本地 git 存储库 - Zend 工作室

> ID：14424558
> 
> 赞同：2
> 
> 时间：2013-01-20T12:32:15.877
> 
> 标签：eclipse, git, zend-studio

我有本地 git 存储库，我想将其作为`GIT PHP Project`.

我的工作区位于`C:\www`，repo 位于`C:\www\citest`现有的 git 存储库中。

现在，当我尝试像这样从 git 创建项目时

```
Project Name: citest
Location: C:\www
URI: file:///C:\www\citest 
```

然后我收到以下错误：

`C:\www\citest overlaps the location of another project: 'citest'`

但`C:\www\citest` **不是**zend 项目。这是一个 git repo。

到目前为止，我已经尝试过文件 > 导入，但没有任何结果。

然后我尝试将`citest/`文件夹放在我的工作区之外，初始化新的 git 项目，从 zend 中删除项目，将`citest/`文件夹复制回`www/`并尝试导入现有项目。它有效，但它没有 git 功能。

如何从现有的 git local repo 创建**git 项目**，以便文件夹最终出现在我的工作区中`C:\www`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:24:00.803

就eclipse项目而言，我宁愿将git repo与http工作区分开。

您可以将 git 存储库作为 php 项目进行管理，并在您的工作区中添加该存储库的*克隆。*`c:\www`

然后一个`post-commit`钩子（在 Eclipse 管理的 git repo 中）可以自动检出您在 Eclipse 项目中所做的任何提交（在`c:\www`工作区的 git repo 中检出）。
参见例如“[简单的 git post-commit hook to copy commited files to a certain folder](https://stackoverflow.com/questions/7633299/simple-git-post-commit-hook-to-copy-committed-files-to-a-certain-folder) ”。

# .htaccess - 从主 domain.com 上的 sub.domain.com 加载脚本

> ID：14424564
> 
> 赞同：-1
> 
> 时间：2013-01-20T12:32:53.263
> 
> 标签：.htaccess, dns, subdomain

有没有办法在我的 domain.com 上加载我在 sub.domain.com 上的脚本？我需要以某种方式执行此操作，而无需从子域的文件夹中移动脚本。

有什么办法可以用 htacess 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:21:06.697

`domain.com/script`要从`sub.domain.com/script`的子文件夹中加载`domain.com`，您可以使用

```
Redirect /script /subdomain/script 
```

如果您希望浏览器 URL 保持不变，则必须使用`RewriteRule`a

```
RewriteEngine On
RewriteRule script subdomain/script 
```

# r - 如何填补 data.frame 中的（日期）空白？

> ID：14424565
> 
> 赞同：10
> 
> 时间：2013-01-20T12:32:54.580
> 
> 标签：r, dataframe

我有一个带有日期列的 data.frame。这些日期可能出现多次，但也可能出现零次：

```
 date value
1 2013-01-01     5
2 2013-01-01     3
3 2013-01-03     3
4 2013-01-04     3
5 2013-01-04     1
6 2013-01-06     1 
```

如何填补此 data.frame 中的日期空白，以便获得以下信息？

```
 date value
1 2013-01-01     5
2 2013-01-01     3
3 2013-01-02     0
4 2013-01-03     3
5 2013-01-04     3 
6 2013-01-04     1
7 2013-01-05     0
8 2013-01-06     1 
```

欢迎任何帮助。

TIA，杰瑞

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T12:56:54.323

您可以`merge`将 data.frame 与另一个 data.frame 按顺序包含所有日期。在这里，我假设 dat 是您的原始 data.frame。

```
hh<- data.frame(date=seq(as.Date("2013-01-01"), as.Date("2013-01-6"), by="days"))
>res <- merge(dat,hh,by.x='date',by.y='date',all.x=T,all.y=T)
        date value
1 2013-01-01     5
2 2013-01-01     3
3 2013-01-02    NA
4 2013-01-03     3
5 2013-01-04     3
6 2013-01-04     1
7 2013-01-05    NA
8 2013-01-06     1 
```

现在我们对 dat 中的每一行都有 NA，而 hh 中没有匹配的行。就个人而言，我认为最好让 NA 说这些是缺失值但你可以将它们设置为 0：

```
res$value[is.na(res$value)] <- 0 
```

**编辑**

一般而言，您可以生成 hh，如@Arun 解决方案中所示：

```
 hh <- seq(min(dat$date), max(dat$date), by="days") 
```

# android - android-maven-plugin 的问题

> ID：14424569
> 
> 赞同：1
> 
> 时间：2013-01-20T12:33:26.117
> 
> 标签：android, maven, maven-plugin

（经过几个小时的尝试，我终于辞职了。）

好吧：

-1。我愿意

```
mvn    -X   archetype:generate   -DarchetypeArtifactId=android-release 
-DarchetypeGroupId=de.akquinet.android.archetypes -DarchetypeVersion=1.0.9                           
-DgroupId=org.me -DartifactId=myAndroidApp     -Demulator=myEmu
-Dplatform=10 
```

-2。第一个问题：您必须手动编辑顶级 pom.xml 以添加

```
< properties>
< platform.version>  2.3.3  < /platform.version> 
```

< /属性>

`-Dplatform=10`尽管它是和 2.3.3之间的直接关系

-3。（可能）第二个问题（仪器测试：myAndroidApp-it dir。）您必须编辑 AndroidManifest.xml 并检查`android:targetPackage`值是否正确

-4。第三个问题（**我无法解决**）。仪器测试中 zipaligned-classifier 依赖项的问题（myAndroidApp-it dir.）

做的时候`mvn install`

-4.1

```
 [WARNING] The POM for org.me:myAndroidApp:apk:${zipaligned-classifier}:1.0-SNAPSHOT 

is missing, no dependency information available

[WARNING] The POM for org.me:myAndroidApp:jar:1.0-SNAPSHOT 

is missing, no dependency information available 
```

-4.2

```
 [ERROR] Failed to execute goal on project myAndroidApp-it: 
    Could not resolve dependencies for 
project org.me:myAndroidApp-it:apk:1.0-SNAPSHOT: 
    The following artifacts could not be resolved: 
org.me:myAndroidApp:apk:${zipaligned-classifier}:1.0-SNAPSHOT, org.me:myAndroidApp:jar:1.0-SNAPSHOT: 
    Could not find artifact org.me:myAndroidApp:apk:${zipaligned-classifier}:1.0- 
```

谢谢

更新：在[这里报告了这个问题](http://code.google.com/p/maven-android-plugin/issues/detail?id=345&thanks=345&ts=1358700408)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:01:42.630

我在你的`<Properties>`部分添加这个可能会修复第一个警告：

```
<zipaligned-classifier>aligned</zipaligned-classifier> 
```

然后在您的 myAndroidApp 项目中运行 mvn install。确保您的应用程序的构建成功（暂时不用关心您的 myAndroidApp-it），然后查看您的本地存储库以查看安装位置的工件。( `<USER_HOME>/.m2/repository/org/me`)

对于您的第二个警告：确保您在 myAndroidApp-it 的依赖项中有类似的内容：

```
<dependency>
    <groupId>org.me</groupId>
    <artifactId>myAndroidApp</artifactId>
    <type>apk</type>
    <version>1.0-SNAPSHOT</version>
<dependency> 
```

根据安装的工件，您可能需要为此依赖项添加分类器（因为您没有发布 pom.xml，所以很难说 mvn 将安装什么）。

```
<dependency>
    <groupId>org.me</groupId>
    <artifactId>myAndroidApp</artifactId>
    <type>apk</type>
    <classifier>${zipaligned-classifier}</classfier>
    <version>1.0-SNAPSHOT</version>
<dependency> 
```

# c - 关于指针的问题

> ID：14424571
> 
> 赞同：1
> 
> 时间：2013-01-20T12:33:49.237
> 
> 标签：c, pointers, function-pointers, void-pointers

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

1.  如果 p 是一个指针（比如`int * p`），那么`[p]`意味着什么？还有什么`4[p]`意思？（即将标量与 [p] 相乘）

2.  假设 xyz 是程序中定义的某种数据类型。然后做什么

    ```
    void (*xyz)(void); 
    ```

    声明是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T12:34:27.940

1.  `4[p]`意思相同`p[4]`。参见例如[http://c-faq.com/aryptr/joke.html](http://c-faq.com/aryptr/joke.html)。

2.  如果`xyz`已经是一种数据类型，那么这是一个错误。如果不是，那么它是一个名为 的函数指针的定义`xyz`。假设您的意思是“ `void`”不是“ `coid`”，那么[cdecl.org 会](http://cdecl.ridiculousfish.com/?q=void+%28*xyz%29%28void%29)告诉我们：

    > 将 xyz 声明为指向返回 void 的函数 (void) 的指针

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T12:38:40.830

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T12:36:21.960

> 是什么`[p]`意思？

本身没什么。

> 还有什么`4[p]`意思？

由于指针算术，`4[p]`意味着`*(4 + p)`，即，假设加法是可交换的，等价于`*(p + 4)`，而后者又可以写为`p[4]`，即它是 指向的数组的第 5 个元素`p`。

> 如果`xyz`是数据类型，那么`void (*xyz)(void);`语句是什么意思？

那么这是一个语法错误。

如果`xyz`不是数据类型，则它声明`xyz`为函数指针获取和返回`void`（即“无”）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T12:36:37.263

1) 4[p] 与 p[4] 的含义相同，两者本质上都意味着 *(p+4) ，这意味着从数组开始的第 5 个元素`p`。

2)`xyz`是指向函数的指针类型，它不接受任何争论并且不返回任何内容。

```
typedef void (*xyz)(void);    

void func();

xyz f= func; 
```

如果以下列方式使用，它也可能是函数指针本身

```
//imagine the above typedef is omitted.

void (*xyz)(void) = func;

void (*xyz)(void);  // uninitialized pointer. 
```

# sml - SML：List.nth() 函数在 Let..in..end 中不起作用？

> ID：14424572
> 
> 赞同：0
> 
> 时间：2013-01-20T12:33:52.100
> 
> 标签：sml, smlnj

我又带着一个基本问题回来了。！;)

我已经学习了一些 List 函数。“List.nth”就是其中之一。当我在 SML 命令窗口中使用此功能时，它工作正常。但是当在 Let..in..end 中使用时；块，它不起作用。

我希望，有人能够提供帮助。

```
let
  val actualDays = 0;

in
  actualDays = List.nth([10,20,31,50,45], 2);
  actualDays
end; 
```

预期输出：

```
 val it = 31 : int 
```

实际输出：

```
 val it = 0 : int 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:41:17.313

The reason that this does not work as you intend has nothing to do with the `List.nth` function or the fact that you're inside a `let` expression. The reason that this does not work as you intend is that `=` is the equality operator, not an assignment operator, in SML.

The only assignment operator in SML is the `:=` operator and its left operand needs to be a `ref`, not a plain integer. So one way to fix your code would be to change `actualDays` to be an `int ref` rather than just an `int` and to use `:=` instead of `=`. However mutating variables isn't very idiomatic in SML. A better solution would be to adjust your logic to not need any mutation - probably by using recursive functions or, depending on what exactly you're trying to do, higher order functions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:19:11.323

你需要放下你的“命令式思维”，而为“功能性思维”敞开心扉。例如

如前所述，除非它是引用，否则您不能重新分配变量。而且，如果您需要使用引用，那么无论如何您都可能做错了。在函数式编程中，您实际上是在进行[名称绑定](http://en.wikipedia.org/wiki/Name_binding)（有时也称为单一赋值），而不是变量赋值。将它们视为“不可变对象”。

让我们先看看你的代码

```
let
  val actualDays = 0;    
in
  actualDays = List.nth([10,20,31,50,45], 2);
  actualDays
end; 
```

当你在部件中放入一系列表达式时`in ... end`，它实际上与 have 相同`in ( expr_1; ... ; expr_n) end`，请注意表示表达式序列的括号。一系列表达式从左到右计算每个表达式，忽略除最后一个表达式结果之外的所有表达式。因此它主要用于评估具有副作用的表达式

```
- (print "foo\n"; print "bar\n"; 3);
foo
bar
val it = 3 : int 
```

在您的情况下，由于等号不是赋值运算符，而是比较运算符，因此您的第一个表达式将计算为一个布尔表达式，该表达式被“忽略”，因为它没有副作用，然后`actualDays`返回它的值是最后一个表达式。

修复示例的一种方法是声明`actualDays`为`List.nth`. 然后你的函数可以有两个参数，一个参数是你期望得到的元素，另一个参数可能是你不想查找的索引。

```
fun foo x i =
    let
      val actualDays = List.nth([10,20,31,50,45], i)
    in
      x = actualDays
    end

- foo 20 1;
val it = true : bool
- foo 50 3;
val it = true : bool 
```

但是在这个特定的函数中，不需要 let 表达式，你也可以这样写

```
fun foo x i = x = List.nth([10,20,31,50,45], i) 
```

# delphi - 更新到最新的 Indy TCP 库版本

> ID：14424582
> 
> 赞同：3
> 
> 时间：2013-01-20T12:34:47.297
> 
> 标签：delphi, delphi-xe2, indy10

我从 E/2011 开始使用 DELPHI XE2。我现在检查了我的编译器附带的已实现的 INDY Lib，发现 gsIdVersion = '10.5.8.0';

如果我想升级到最新的 INDY 版本，我使用 [Indy 下载链接](http://indy.fulgan.com/)

在这里我找到了[最新的 INDY ZIP 文件](http://indy.fulgan.com/ZIP/)。文件的日期是从今天开始的，修订版小于我安装的 indy 版本 ID。在做任何进一步的行动之前，可以帮助我并解决我的版本号混乱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:49:14.493

根据 subversion repo，Indy 10 的最新版本是 r4910。您链接到的 ZIP 文件名为 Indy10_4910.zip。所以这是最新的，你可以。

检查此类内容的方法是自己查看源代码控制存储库。Indy 网站在这里有一个源代码控制 repo 网关页面：http: [//www.indyproject.org/sockets/Download/svn.EN.aspx](http://www.indyproject.org/sockets/Download/svn.EN.aspx)

更新：如果@mjn 说的是真的，那么 ZIP 文件可能已经过时了。我总是使用 svn 来获取最新版本。

# c# - mvc.net 4 的管理 UI 界面

> ID：14424584
> 
> 赞同：3
> 
> 时间：2013-01-20T12:35:17.050
> 
> 标签：c#, web-applications, asp.net-mvc-4

我一直在寻找用于 mvc.net 4 的管理界面生成器。我注意到对于不同的环境有类似的工具（例如[http://activeadmin.info/](http://activeadmin.info/)用于 Ruby on Rails）。

我的主要目标是为管理员用户提供所有 CRUD 选项（新建、编辑等），但还添加其他功能，例如表单等。此外，这应该是通用的，因此不必重新编写对于每个应用程序。

任何人都可以指出 mvc.net 4 这样的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:41:03.330

I'm not sure that there is a tool that will generate a whole interface for you nor be entirely generic, however, there is built-in functionality to generate a CRUD Controller (and corresponding views) from within your project if you're using Entity Framework.

Right click your project file, and add a new controller and you are presented with Templates. Choosing `MVC controller with read/write actions and views, using Entity Framework` will allow you to select your model and entities class, and then generate forms for you.

![Add Controller R/W](../Images/dce01b9722e4e106c2f1d06dcb553bf1.png)

Most of the time you can begin using the forms immediately, however sometimes they may need minor modifications (best example I can think of is if you're using `UNIQUEIDENTIFIER` as your key). You will need to add authorisation for the controllers too.

Of course, if you're not using Entity Framework, this won't be of much help to you.

# integer - 检查字符是否是 Prolog 中的数字？如何实现整数/1？

> ID：14424588
> 
> 赞同：2
> 
> 时间：2013-01-20T12:35:45.400
> 
> 标签：integer, char, prolog, atomic

如何在不使用`integer/1`(HW) 的情况下检查字符是否是 Prolog 中的数字？

我可以使用`atomic/1`，但它对我没有多大帮助，因为它也返回 true

除了数字之外的任何东西。

```
2 ?- atomic(1).
true.

3 ?- atomic(asasa).
true.

4 ?- 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:43:18.210

Use `char_type(X,digit).`

```
?- char_type('3',digit).
true.

?- char_type('a',digit).
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:51:07.787

Well, what do you consider a number? Just integers? Hex numbers? In case you want to recognise just plain integers (`[0-9]+`) you can just convert the number to a list and then check if each member of the list is a digit:

```
is_digit(1).
is_digit(2).
.... 
```

Another idea is trying to add `1` to the number using `is`; but this will not always guarantee that it's an integer.

# android - Detect broken internet connection whenever the application is running

> ID：14424591
> 
> 赞同：0
> 
> 时间：2013-01-20T12:36:20.193
> 
> 标签：android

I'm already using the code below to detect if the user is connected to the internet at the application's splash screen, but I need to detect this whenever the user is in a specific activity. Imagine you are using turn-by-turn navigation and you depend on internet connection, so you must detect a broken internet connection when it happens.

How can I do this without slowing down the app with an infinite loop?

```
private boolean isOnline(Context context) {
    try {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo networkInfo = cm.getActiveNetworkInfo();

        return (networkInfo != null && networkInfo.isConnected());
    } catch (Exception exc) {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:56:07.970

I belive you shoul write your own service with [PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html), you should implement this method `public void onDataConnectionStateChanged(int state) {}` And from this service you can check in any time if there is DataConection.

Here is an article about [Android PhoneStateListener Illustration–with Auto Logging Calls to Google Calendar Example](http://www.roman10.net/android-phonestatelistener-illustrationwith-auto-logging-calls-to-google-calendar-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:01:27.173

You should use a `BroadcastReceiver` do to so:

Here are few references for this you can get better idea about this with example.

[Reference 1](https://stackoverflow.com/a/3142590/556975)

[Reference 2](https://stackoverflow.com/a/10350511/556975)

[Reference 3](http://paragchauhan2010.blogspot.in/2012/04/check-network-connection-using.html)

Thanks,

# ios - 如何在ios中动态生成多页pdf时处理分页

> ID：14424595
> 
> 赞同：1
> 
> 时间：2013-01-20T12:36:43.373
> 
> 标签：ios, objective-c, ipad, pdf, ios6

我使用以下代码生成 pdf 文件及其内容。最初，我设计了 pdf 内容，通过将 cgpoint 值赋予线条来绘制表格。

```
+(void)drawPDF:(NSString*)fileName
{

    UIGraphicsBeginPDFContextToFile(fileName, CGRectZero, nil);

    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 1024, 748), nil);

    int xOrigin = 50;
    int yOrigin = 300;

   int rowHeight = 120;
   int columnWidth = 130;

   int numberOfRows = 7;
    int numberOfColumns = 4;

    [self drawTableAt:CGPointMake(xOrigin, yOrigin) withRowHeight:rowHeight andColumnWidth:columnWidth andRowCount:numberOfRows andColumnCount:numberOfColumns];

   UIGraphicsEndPDFContext();
}

 +(void)drawTableAt:(CGPoint)origin
  withRowHeight:(int)rowHeight
andColumnWidth:(int)columnWidth
   andRowCount:(int)numberOfRows
andColumnCount:(int)numberOfColumns

 {

    for (int i = 0; i <= numberOfRows; i++) {

        int newOrigin = origin.y + (rowHeight*i);

        CGPoint from = CGPointMake(origin.x, newOrigin);
        CGPoint to = CGPointMake(origin.x + (numberOfColumns*columnWidth), newOrigin);

        [self drawLineFromPoint:from toPoint:to];

    }

    for (int i = 0; i <= numberOfColumns; i++) {

        int newOrigin = origin.x + (columnWidth*i);

        CGPoint from = CGPointMake(newOrigin, origin.y);
        CGPoint to = CGPointMake(newOrigin, origin.y +(numberOfRows*rowHeight));

        [self drawLineFromPoint:from toPoint:to];

    }
}

+(void)drawLineFromPoint:(CGPoint)from toPoint:(CGPoint)to
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 2.0);

    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

    CGFloat components[] = {0.2, 0.2, 0.2, 0.3};

    CGColorRef color = CGColorCreate(colorspace, components);

    CGContextSetStrokeColorWithColor(context, color);

    CGContextMoveToPoint(context, from.x, from.y);
    CGContextAddLineToPoint(context, to.x, to.y);

    CGContextStrokePath(context);
    CGColorSpaceRelease(colorspace);
    CGColorRelease(color);

} 
```

输出为 ![在此处输入图像描述](../Images/635c61bfb4d447a511383ccb69018c70.png)

但我将 numberOfRows 指定为 7，只有 3 行可见，查看其余行（即）我需要查看 pdf 的第二页。numberOfRows 可能会动态变化，如果 numberOfRows = 12 表示否。pdf 中的页数应为 3 或以上。该怎么办？我是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:43:54.093

我相信你必须自己处理分页。即，随着您的呼叫

```
 UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 1024, 748), nil); 
```

您在这里只有一页，1024x768。您当然也可以使该尺寸更大，但是如果您需要添加第二页，则必须添加更多。我认为此链接为您说明了一切：

[http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)

（看到第一组 6 个步骤表明您应该根据需要重复步骤 2/3/4，其中 2 是按您的方式添加页面）。

# oop - OCaml 有多态性吗？

> ID：14424602
> 
> 赞同：5
> 
> 时间：2013-01-20T12:37:19.913
> 
> 标签：oop, polymorphism, ocaml, strong-typing

既然 OCaml 对整数和双精度数的乘法有不同的操作，那么它怎么可能是面向对象的呢？这不是说 OCaml 没有多态性吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T12:50:59.540

是的，OCaml 具有多态性。以下是算术运算不作为多态方法实现的一些原因：

1.  整数和双精度不是 OCaml 中的对象，因此它们不能有方法。
2.  OCaml 中的运算符是函数，而不是方法。当然，该语言可以设计为使它们成为方法，但是您不能为任何不是对象的东西定义自定义运算符。
3.  如果你写一个类似`f (x, y) = x + y`推断类型的函数是`int * int -> int`. 如果您更改语言以创建操作符方法和 ints 对象，则推断的类型将是`< + : 'a -> 'b; .. > * 'a -> 'b`. 对于这样一个简单的功能，拥有如此复杂的类型可能是不可取的。
4.  每次使用算术运算时都支付多态调度的成本对性能不利。

另请注意，在许多支持运算符重载的主流语言中，运算符也倾向于以非虚拟（因此非多态）方法或函数的形式实现。大概是出于我上面提到的性能原因。具有多态运算符是相当少见的。

PS：在函数式语言的上下文中，术语“多态性”最常用于指代“参数多态性”（OO 语言有时称为“泛型”），而在 OO 语言中，它最常用于指代“子类型多态性” ”。该答案假定您使用的是该词的后一种含义，因为您明确提到了面向对象，并且前一种含义在这种情况下实际上没有意义。

# c# - 如何查找属于列表的任何范围的数字？

> ID：14424607
> 
> 赞同：-1
> 
> 时间：2013-01-20T12:38:02.520
> 
> 标签：c#

我有一个列表和一个数组，我想为属于该列表的任何范围找到数组中的每个元素。这是一些代码：

```
int[] number = {1, 2, 3, 5};
public List<double> m = new List<double>();
m.add(1);
m.add(1.5);
m.add(2.6);
m.add(4);
m.add(50); 
```

例如：获取数组中的元素，例如 2，我看到范围（在列表中的任何数字之间）通过列表 ==> 1.5 和 2.6 回答

我想要一个返回这个输出的方法：

> **`find 1 range is {1} to {1.5} and 2 range is {1.5} to {2.6}`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:01:31.300

我希望我已经得到了你想要的。

```
void Main()
{
    var numbers =new [] {1, 2, 3, 5};

    //ordering to make sure that ranges is ascending order
    var orderedRanges = new []{1, 1.5, 2.6, 4, 50}.OrderBy(v => v);

    var valuesInRanges = numbers.Select(number => 
                          FormatValueInRange(
                            number,
                            orderedRanges.Last(range => range <= number ),
                            orderedRanges.First(range => range > number )));

    var result = "Find " + string.Join("and ", valuesInRanges);

    Console.WriteLine (result);
}

private string FormatValueInRange(double val, double lower, double upper)
{
    return string.Format(@"{0} is {{{1}}} to {{{2}}} ", val, lower, upper);
} 
```

印刷：

```
Find 1 is {1} to {1.5} and 2 is {1.5} to {2.6} and 3 is {2.6} to {4} and 5 is {4} to {50} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:04:18.063

您需要使用以下逻辑（在伪代码中，带有示例编号）：

```
rangeStart = 1
rangeEnd = 7

numberOne = 3.7

if numberOne >= rangestart and numberOne <= rangeEnd
    // number is in range

numberTwo = 12

if numberTwo >= rangestart and numberOne <= rangeEnd
    // number is NOT in range 
```

这应该为您指明解决问题的正确方向。试一试，如果您有任何问题，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:05:36.267

```
int[] numbers = new int[] { 1, 2, 3, 5 };
List<double> m = new List<double>();
m.Add(1);
m.Add(1.5);
m.Add(2.6);
m.Add(4);
m.Add(50);

foreach (int n in numbers)
{
    for (int i = 0; i < m.Count; i++)
    {
        try
        {
            if (m[i] <= n && m[i + 1] >= n)
                MessageBox.Show(
                    string.Format("{0} is between {1} and {2}",
                    n, m[i], m[i + 1]));
        }
        catch (Exception){ }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T13:07:51.117

您可以使用 LINQ。

```
 List<double> m = new List<double>();
   m.Add(1);
   m.Add(1.5);
   m.Add(2.6);
   m.Add(4);
   m.Add(50);

   m.Sort();

   int[] numbers = { 1, 2, 3, 5 };
   foreach (var item in numbers)
   {
        double min = m.Where(x => x <= item).Last();
        double max = m.Where(x => x > item).First();

        Console.WriteLine("find {0} range is {1} to {2}", item, min, max);
   } 
```

# java - 为什么 Random 类不是静态的？

> ID：14424608
> 
> 赞同：25
> 
> 时间：2013-01-20T12:38:28.490
> 
> 标签：java, random

在 Java 中，我们有静态类 Math。您不需要创建它的对象，所以它是静态的。另一个是随机类。我们不需要创建它的实例，那为什么它也不是静态的呢？我的课程我经常使用随机数，当必须在每个课程中创​​建字段 rand 以生成随机数时，我会很生气。那么为什么不是静态的呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-20T12:40:51.940

Random 类具有状态，包括它在其序列中的位置，因为产生的值不是真正随机的，只是一个伪随机序列。

这可以通过用相同的种子初始化两个实例来证明。

```
Random a = new Random(123);
Random b = new Random(123);
for (int i = 0; i < 5; i++) {
    System.out.println(a.nextInt() + "," + b.nextInt());
} 
```

输出

```
-1188957731,-1188957731
1018954901,1018954901
-39088943,-39088943
1295249578,1295249578
1087885590,1087885590 
```

如果使用默认构造函数 Random() 创建，则种子会根据当前时间（以纳秒为单位）+ 静态计数器进行初始化，这意味着不同的实例很可能具有不同的序列。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-20T12:40:24.013

您**确实**需要创建实例，因为随机数生成器具有**state**。具体来说，是控制伪随机序列中当前位置的状态。

如果您想要多个独立的生成器（不共享状态），那么您需要单独的实例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T12:42:02.127

这都是关于种子的。如您所知，我们谈论的不是真正的随机数，而是伪随机数。当您知道第一个数字时，您可以计算其他数字。这就是为什么我们使用所谓的“种子”的原因。的每个对象`Random`都有不同的种子。如果`Random`是静态的，你就不能有两个不同的种子。请注意，该`setSeed()`方法将影响所有随机数生成器（我们通常只想更改一个）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-20T12:40:37.377

原因是您可能需要几个独立的随机数生成器。这是通过多个实例来实现的`Random`。

# xna - XNA 中的开始和结束屏幕

> ID：14424609
> 
> 赞同：0
> 
> 时间：2013-01-20T12:38:33.653
> 
> 标签：xna, xna-4.0

这是我在 XNA 中的第一个程序，如果我遗漏了一些明显的东西，请道歉。我首先尝试通过案例逻辑来实现加载和结束屏幕，当它不起作用时，我想知道我是否在某个地方搞砸了，所以我切换到 if/else 语句。

到目前为止，我的结果是无论我如何更改我的游戏都会加载 InGame 逻辑。没有开始屏幕，没有结束屏幕，没有矢车菊蓝与我的 InGame Bisque。我不知道为什么。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace FeedMe
{
    public enum GameState
    {
        Start,
        InGame,
        GameOver
    }

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        Texture2D kitty;
        Texture2D cheese;
        Vector2 kittyPosition;
        Vector2 cheesePosition = Vector2.Zero;
        float speed1 = 4f;
        float speed2 = 5f;
        float secs = 30000.0f;
        MouseState prevMouseState;
        bool wasDown;
        int clicks;
        int speedUp = 5;
        AudioEngine audioEngine;
        WaveBank waveBank;
        SoundBank soundBank;
        Cue trackCue;
        SpriteFont splashFont;
        GameState currentGameState = new GameState();

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        public Random rnd { get; private set; }

        protected bool Collide()
        {
            Rectangle kittyRect = new Rectangle(
                (int)kittyPosition.X,
                (int)kittyPosition.Y, 
                kitty.Width, 
                kitty.Height
            );

            Rectangle cheeseRect = new Rectangle(
                (int)cheesePosition.X,
                (int)cheesePosition.Y, 
                cheese.Width, 
                cheese.Height
            );

            return kittyRect.Intersects(cheeseRect);
        }

        protected override void Initialize()
        {
            currentGameState = GameState.Start;
            kittyPosition = Vector2.Zero;
            wasDown = false;
            clicks = 0;
            this.IsMouseVisible = false;
            rnd = new Random();
            base.Initialize();
        }

        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);
            kitty = Content.Load<Texture2D>(@"Images/kitty");
            cheese = Content.Load<Texture2D>(@"Images/cheese");
            audioEngine = new AudioEngine(@"Content\Audio\GameAudio.xgs");
            waveBank = new WaveBank(audioEngine, @"Content\Audio\Wave Bank.xwb");
            soundBank = new SoundBank(audioEngine, @"Content\Audio\Sound Bank.xsb");
            splashFont = Content.Load<SpriteFont>(@"Fonts\Splash");
        }

        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        protected override void Update(GameTime gameTime)
        {
            if (currentGameState == GameState.Start)
                soundBank.PlayCue("gameStart");

            if (Keyboard.GetState().GetPressedKeys().Length > 0)
            {
                currentGameState = GameState.InGame;
            }
            else if (currentGameState == GameState.InGame)
            {
                kittyPosition.X += speed1;

                if (kittyPosition.X > Window.ClientBounds.Width - kitty.Width || kittyPosition.X < 0)
                    speed1 *= -1;

                kittyPosition.Y += speed2;

                if (kittyPosition.Y > Window.ClientBounds.Height - kitty.Height || kittyPosition.Y < 0)
                    speed2 *= -1;

                MouseState mouseState = Mouse.GetState();

                if (mouseState.X != prevMouseState.X || mouseState.Y != prevMouseState.Y)
                    cheesePosition = new Vector2(mouseState.X, mouseState.Y);

                if (cheesePosition.X < 0)
                    cheesePosition.X = 0;
                if (cheesePosition.Y < 0)
                    cheesePosition.Y = 0;
                if (cheesePosition.X > Window.ClientBounds.Width - cheese.Width)
                    cheesePosition.X = Window.ClientBounds.Width - cheese.Width;
                if (cheesePosition.Y > Window.ClientBounds.Height - cheese.Height)
                    cheesePosition.Y = Window.ClientBounds.Height - cheese.Height;

                secs -= (float)gameTime.ElapsedGameTime.TotalMilliseconds;

                if (secs <= 0.0f)
                {
                    secs = 0;
                }

                ButtonState bs = mouseState.LeftButton;
                bool nowDown = bs == ButtonState.Pressed;

                if (Collide() && (!nowDown && wasDown))
                {
                    soundBank.PlayCue("chomp");
                    clicks++;
                    Window.Title = "Cheeseburgers fed = " + clicks + "     Time Remaining = " + (int)secs / 1000;
                    kittyPosition = new Vector2(
                        (rnd.Next(0, Window.ClientBounds.Width - kitty.Width)),
                        (rnd.Next(0, Window.ClientBounds.Height - kitty.Height))
                    );
                }

                wasDown = nowDown;

                if (clicks == speedUp)
                {
                    soundBank.PlayCue("turbo");
                    speedUp = speedUp + 5;
                    speed1 = speed1 * 1.5f;
                    speed2 = speed2 * 1.5f;
                }
            }
            else if (currentGameState == GameState.GameOver)
            {
                soundBank.PlayCue("gameOver");

                if (Keyboard.GetState().GetPressedKeys().Length > 0)
                {
                    currentGameState = GameState.InGame;
                }
            }

            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            audioEngine.Update();
            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            if(currentGameState == GameState.Start)
            {
                GraphicsDevice.Clear(Color.CornflowerBlue);
                spriteBatch.Begin();
                string text = "Testing!";
                spriteBatch.DrawString(
                    splashFont, 
                    text, 
                    new Vector2((Window.ClientBounds.Width / 2) - (splashFont.MeasureString(text).X / 2), 
                    (Window.ClientBounds.Height / 2) - (splashFont.MeasureString(text).Y / 2)), 
                    Color.DarkBlue
                );

                text = "Testing2!";

                spriteBatch.DrawString(
                    splashFont, 
                    text, 
                    new Vector2((Window.ClientBounds.Width/2) - (splashFont.MeasureString(text).X/2),        
                    (Window.ClientBounds.Height/2) - (splashFont.MeasureString(text).Y/2) + 30), 
                    Color.DarkBlue
                );

                spriteBatch.End();
            }
            else if(currentGameState == GameState.InGame)
            {
                GraphicsDevice.Clear(Color.Bisque);

                spriteBatch.Begin();
                spriteBatch.Draw(kitty, kittyPosition, null, Color.White, 0, Vector2.Zero, 1, SpriteEffects.None, 0);
                spriteBatch.Draw(cheese, cheesePosition, null, Color.White, 0, Vector2.Zero, 1, SpriteEffects.None, 0);
                spriteBatch.End();
            }
            else if (currentGameState == GameState.GameOver)
            {
                GraphicsDevice.Clear(Color.CornflowerBlue);
                spriteBatch.Begin();
                string text = "Testing3";
                spriteBatch.DrawString(
                    splashFont, 
                    text, 
                    new Vector2((Window.ClientBounds.Width / 2) - (splashFont.MeasureString(text).X / 2), 
                    (Window.ClientBounds.Height / 2) - (splashFont.MeasureString(text).Y / 2)), 
                    Color.DarkBlue
                );

                text = "Testing4";

                spriteBatch.DrawString(
                    splashFont, 
                    text, 
                    new Vector2((Window.ClientBounds.Width/2) - (splashFont.MeasureString(text).X/2, 
                    (Window.ClientBounds.Height/2) - (splashFont.MeasureString(text).Y/2) + 30), 
                    Color.DarkBlue
                );

                spriteBatch.End();
            }

            base.Draw(gameTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:55:28.690

```
if (currentGameState == GameState.Start)
{
                soundBank.PlayCue("gameStart");
                if(Keyboard.GetState().GetPressedKeys().Length>0)
                {
                    currentGameState = GameState.InGame;
                } 
} 
```

没有`{ }`after`if (currentGameState == GameState.Start)`它只会提供`if`下一个语句，所以它不会包括`if(Keyboard.GetState().GetPressedKeys().Length>0)`

如果你仔细看看是什么触发了它，

```
 if(Keyboard.GetState().GetPressedKeys().Length>0)
                {
                    currentGameState = GameState.InGame;
                }
            else if (currentGameState == GameState.InGame) 
```

基本上，它说如果没有按键被按下，请进入游戏。只需在 GameState.Start 逻辑周围添加 {}，就可以了。

还需要第 234 行`new Vector2((Window.ClientBounds.Width/2) - (splashFont.MeasureString(text).X/2), (Window.ClientBounds.Height/2) - (splashFont.MeasureString(text).Y/2) + 30), Color.DarkBlue);`

**编辑：**您也做了同样的事情，也 `else if (currentGameState == GameState.GameOver)`添加了我上面所说的内容。

# css - 网页角的反弧

> ID：14424612
> 
> 赞同：1
> 
> 时间：2013-01-20T12:38:39.070
> 
> 标签：css, rounded-corners

我知道如何在网络角落制作弧线。对于此弧的右侧部分，`)`我们可以使用以下代码：

```
 border-bottom-right-radius: 15px; 
```

对于带有此弧的左侧部分，`(`我们可以使用以下代码：

```
 border-bottom-left-radius: 15px; 
```

从而得出这个结果： `(_____)`

但是你如何在右上角创建一个弧“（”，在左角创建一个“）”。我不能使用 -15px 作为半径。

结果应该是这样的： `)_____(`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:13:07.303

简单的解决方案是将一些具有边框半径和相反背景的子元素附加到父元素：HTML

```
<div id="test">
    <div class="right_border border"></div>
    <div class="left_border border"></div>
</div> 
```

CSS

```
#test {
    background:#CCC;
    height:100px;
    width:100px;
    position:relative;
    overflow:hidden
}
div.border {
    position:absolute;
    top:0;
    bottom:0;
    background:#FFF;
    width:50%;
}
.left_border {
    left:-25%;
    border-radius: 50%
}
.right_border {
    right:-25%;
    border-radius: 50%
} 
```

演示：http: [//jsfiddle.net/xq3C7/](http://jsfiddle.net/xq3C7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:56:23.750

有一种时髦的方法可以使用 css 渐变来做到这一点。

像这样的东西：

```
div {
background:
        -webkit-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -webkit-linear-gradient(135deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(225deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(315deg, transparent 10px, #c00 10px);
} 
```

请参阅此链接：

[http://jsfiddle.net/leaverou/EjE7c/light/](http://jsfiddle.net/leaverou/EjE7c/light/)

和教程：

[http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)

也有 jQuery 插件，但它们似乎很重。

您也可以使用背景图像来伪造它，但我想这不是您想要的。

# android - 使用带有 LoaderManager 的 CursorLoader 从 android 应用程序中检索图像

> ID：14424624
> 
> 赞同：3
> 
> 时间：2013-01-20T12:39:28.057
> 
> 标签：android, android-cursoradapter, android-cursor, android-loadermanager, android-cursorloader

目前我正在使用 getContentResolver().query()/managedQuery() 来获取光标以从图库应用程序中检索图像。因为我使用的 API 已部分弃用，所以我想将 CursorLoader 与 LoaderManager 一起使用。

```
/**
 * Creates a cursor to access the content defined by the image uri for API
 * version 11 and newer.
 * 
 * @return The created cursor.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private Cursor createCursorHoneycomb() {
    String[] projection = {
            MediaStore.Images.Media.DATA
    };
    Cursor cursor = getContentResolver().query(imageUri, projection, null, null, null);

    return cursor;
}

/**
 * Creates a cursor to access the content defined by the image uri from API
 * version 8 to 10.
 * 
 * @return The created cursor.
 */
@SuppressWarnings("deprecation")
@TargetApi(Build.VERSION_CODES.FROYO)
private Cursor createCursorFroyo() {
    String[] projection = {
            MediaStore.Images.Media.DATA
    };
    Cursor cursor = managedQuery(imageUri, projection, null, null, null);

    return cursor;
} 
```

由于我没有 ListView 我不使用任何适配器。我只是为 ImageView 设置了一个图像位图。

```
/**
 * Sets the image bitmap for the image view.
 */
private void setupImageView() {
    String imagePath = getImagePathFromUri(imageUri);
    Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
    ImageView imageView = (ImageView) findViewById(R.id.image_view);

    imageView.setImageBitmap(bitmap);
}

/**
 * Returns an image path created from the supplied image uri.
 * 
 * @param imageUri The supplied image uri.
 * @return Returns the created image path.
 */
@SuppressWarnings("deprecation")
private String getImagePathFromUri(Uri imageUri) {
    Cursor cursor = null;
    String imagePath = null;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        cursor = createCursorHoneycomb();
    } else {
        cursor = createCursorFroyo();
    }

    // if image is loaded from gallery
    if (cursor != null) {
        startManagingCursor(cursor);

        int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

        cursor.moveToFirst();
        imagePath = cursor.getString(columnIndex);
    }
    // if image is loaded from file manager
    else {
        imagePath = imageUri.getPath();
    }

    return imagePath;
} 
```

是否可以将 CursorLoader 与 LoaderManager 一起使用从图库应用程序或文件管理器加载图像？我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T20:42:52.763

在需要时通过调用 getSupportLoaderManager 来启动加载器管理器。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE) {
        if (resultCode == Activity.RESULT_OK) {
            imageUri = data.getData();
            getSupportLoaderManager().initLoader(0, null, this);
        } else if (resultCode == Activity.RESULT_CANCELED) {
            Toast.makeText(this, "Action canceled.", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(this, "Action failed!", Toast.LENGTH_LONG).show();
        }
    }
} 
```

然后创建一个用于检索图像路径的游标加载器。

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = {
            MediaStore.Images.Media.DATA
    };
    CursorLoader cursorLoader = new CursorLoader(this, imageUri, projection, null, null, null);

    return cursorLoader;
} 
```

游标加载器完成后，它使用检索到的数据来更新 UI。

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    if (data != null) {
        int columnIndex = data.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

        data.moveToFirst();
        imagePath = data.getString(columnIndex);
    } else {
        imagePath = imageUri.getPath();
    }

    setupImageView();
} 
```

这很容易做到。但我必须了解如何使用 onCreateLoader() 和 onLoadFinished()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T22:41:15.323

你可能想替换这个

`Cursor cursor = managedQuery(imageUri, projection, null, null, null);`

有了这个

```
CursorLoader cursorLoader = new CursorLoader(this, imageUri,
projection, null, null, null);
Cursor cursor = CursorLoader.loadInBackground(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:28:45.587

> 是否可以将 CursorLoader 与 LoaderManager 一起使用从图库应用程序或文件管理器加载图像？

仅当他们发布、记录和支持`ContentProvider`.

# javascript - 如何包含一个将许多 javascript 加载到 HTML 文件的标题中的公共文件

> ID：14424625
> 
> 赞同：3
> 
> 时间：2013-01-20T12:39:31.187
> 
> 标签：javascript, header

我尝试了很多方法，但无法弄清楚如何做到这一点。

我在许多 html 文件的标题中加载了许多外部脚本。这是一个例子：

```
<script type="text/javascript"  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>

<script type="text/javascript" language="Javascript" 
        src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>

<script type="text/javascript" src="http://www.wolfram.com/cdf-player/plugin/v2.1/cdfplugin.js"></script> 
```

避免在每个 HTML 文件中一次又一次地复制和粘贴这些内容的最佳方法是什么？

我无法将所有这些放在一个 common.js 文件中并包含它，因为它们已经包含`<script>`在其中。即我不能这样做

```
<script src="common.js"></script> 
```

知道怎么做吗？可能是jQuery？（我对此一无所知）。可能这有关系吗？[Jquery load() 一个包含 JavaScript 的 html 文件](https://stackoverflow.com/questions/5668219/jquery-load-a-html-file-which-contains-javascript)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T12:47:35.667

对于要加载的每个源，您可以在 common.js 中多次使用以下命令。只是不断改变`node.src`价值。

```
 var node = document.createElement('script');
    node.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js";
    document.body.appendChild(node); 
```

您可以选择在`body`ie`document.body.appendChild(node);`或`head`ie`document.head.appendChild(node);`的 html中添加脚本的位置

# javascript - 如何在另一个模块中使用模块功能的输出

> ID：14424626
> 
> 赞同：0
> 
> 时间：2013-01-20T12:39:44.870
> 
> 标签：javascript, node.js, redis

我有一个 mdoule，我在其中创建一个数据库连接和一个运行查询的函数。我想在另一个模块中使用这个查询的输出。我该怎么做呢？

该查询应该返回键值对（hello:world）中的值。但是，每次我尝试在另一个模块中使用该变量时，我都会得到“true”而不是“world”。

我的代码在这里 [https://github.com/rishavs/RedisDbConnect](https://github.com/rishavs/RedisDbConnect)

我想从 app.js 调用 getValue 函数，也许还有 console.log(db.getValue()) 的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:23:55.433

您不能像从同步一样从异步函数返回值。您需要使用回调方式。像这样修改你的代码：

获取值函数：

```
var getValue = function(cb) {
    dbConnection.get("hello", function (err, reply) {
        var val = reply ? reply.toString() : null;
        cb(err, val);
    });
}; 
```

控制器：

```
app.get('/json', function(req, res, next) {
    res.contentType('application/json');
    db.getValue(function(err, val) {
        if (err) return next(err);
        res.send(val);  
    });
}); 
```

# jquery - 变量未按预期工作 JQuery

> ID：14424634
> 
> 赞同：0
> 
> 时间：2013-01-20T12:40:36.167
> 
> 标签：jquery, variables, post

我有一个功能：

```
function name(type)
{
    $.i="";
    $.post("name.php", type, function(data, status){
        $(".pic").attr("src", data);
        $.i=data;

    })
    alert($.i); //this is not working
} 
```

在上面的代码中，警报显示空警报框。但是当我有

```
function name(type)
{
    $.i="";
    $.post("name.php", type, function(data, status){
        $(".pic").attr("src", data);
        $.i=data;
        alert($.i); //now this is working
    })

} 
```

我想返回 name.php 文件返回的值。`name.php`包含`echo "string"`. 它仅用于测试。在第二个给定的代码`string`中显示，但在第一个它不起作用。

我该怎么做才能从函数返回值并将接收到的值分配给在 $.post() 之外或在函数中声明的变量。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:42:47.840

post 的异步回调是在 post 执行后调用。您可以从 post 中调用一个函数来对回调中的值返回执行操作。

```
function name(type)
{
    $.i="";
    $.post("name.php", type, function(data, status){
        $(".pic").attr("src", data);
        $.i=data;
        //alert($.i); //now this is working
        callToFunctionPassingData(data);
    })    
} 
```

您可以尝试使用延迟执行，这篇[**文章**](https://stackoverflow.com/questions/6433696/jquery-post-deferred)将指导您如何实现它。

# google-chrome - GWT 披露面板错误

> ID：14424636
> 
> 赞同：0
> 
> 时间：2013-01-20T12:40:50.520
> 
> 标签：google-chrome, gwt

我有一个 GWT 披露面板，当单击披露按钮时，它在无限循环中的打开和关闭状态之间进行动画处理。但这似乎只发生在 Chrome 浏览器中，而不是 Safari 或 Firefox。有谁知道这是关于什么的？

```
DisclosurePanel disclosurePanel = new DisclosurePanel("Reset password");
    disclosurePanel.setAnimationEnabled(true);
    disclosurePanel.setContent(passwordGrid);
    disclosurePanel.addOpenHandler(new OpenHandler<DisclosurePanel>() {

        public void onOpen(OpenEvent<DisclosurePanel> event) {
            saveButton.setEnabled(false);//enable on close or after verifying current password

        }
    });
    disclosurePanel.addCloseHandler(new CloseHandler<DisclosurePanel>() {

        public void onClose(CloseEvent<DisclosurePanel> event) {
            saveButton.setEnabled(true);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:41:05.063

这是最新 chrome 浏览器报告的问题 - [http://code.google.com/p/chromium/issues/detail?id=158910](http://code.google.com/p/chromium/issues/detail?id=158910)

相关信息 - [https://code.google.com/p/google-web-toolkit/source/detail?spec=svn10989&r=10989](https://code.google.com/p/google-web-toolkit/source/detail?spec=svn10989&r=10989)

其他 Stackoverflow 答案 - [GWT DeckLayoutPanel 动画在 Chrome 上进入无限循环](https://stackoverflow.com/questions/14317709/gwt-decklayoutpanel-animation-goes-into-infinite-loop-on-chrome)

# sql - 在 REPLACE 中选择以与 SSRS 一起使用

> ID：14424644
> 
> 赞同：0
> 
> 时间：2013-01-20T12:41:45.370
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services

我有以下查询可在 SSRS 中使用：

```
SELECT  
  INCIDENTSM1.INCIDENT_ID, 
  (select '  ' + 
     PROBSUMMARYM2.HPC_ASSIGNEE
   from probsummarym1
   join PROBSUMMARYM2 on PROBSUMMARYM1.NUMBER = PROBSUMMARYM2.NUMBER
   where incidentsm1.INCIDENT_ID = PROBSUMMARYM1.INCIDENT_ID
   for XML path('')
  ) as Incidents, 
INCIDENTSM1.OPEN_TIME, ... 
```

第二次选择返回以下数据：

```
UserName1(UserLogin1)  UserName2(UserLogin2)  ... 
```

我需要摆脱括号中的所有这些用户登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:52:39.237

我希望我理解正确

```
SELECT  
  INCIDENTSM1.INCIDENT_ID, 
  (select '  ' + 
     STUFF(PROBSUMMARYM2.HPC_ASSIGNEE,CHARINDEX('(',PROBSUMMARYM2.HPC_ASSIGNEE),CHARINDEX(')',PROBSUMMARYM2.HPC_ASSIGNEE)-2,'')
   from probsummarym1
   join PROBSUMMARYM2 on PROBSUMMARYM1.NUMBER = PROBSUMMARYM2.NUMBER
   where incidentsm1.INCIDENT_ID = PROBSUMMARYM1.INCIDENT_ID
   for XML path('')
  ) as Incidents, 
```

# sql - 一次删除所有存储过程

> ID：14424647
> 
> 赞同：9
> 
> 时间：2013-01-20T12:42:02.473
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

`Stored Procedures`我的数据库中有 200 个`Sql server 2008 R2`由应用程序自动生成。现在我想将它们***全部***删除并重新生成它们，因为表发生了很大变化。

[这个问题与我的情况非常相似，](https://stackoverflow.com/questions/9191398/delete-all-stored-procedures-in-a-specific-sql-server-schema)但在我的情况下，所有 SP 都以**sp_ 开头**，我认为使用相同的代码很危险，因为系统 SP 也以***sp_ 开头***，我可能会全部杀死它们。

我应该相信[上面链接](https://stackoverflow.com/questions/9191398/delete-all-stored-procedures-in-a-specific-sql-server-schema)中的解决方案吗？如果没有，有没有更安全的解决方案？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-20T13:06:10.633

如果这是一次性任务，只需打开对象资源管理器，展开您的数据库 > 可编程性并突出显示存储过程节点。然后打开对象资源管理器详细信息（我认为是 F7）。在右边你应该看到你的列表，在这里你可以多选 - 所以你可以按名称排序，选择所有以 sp_ 开头的过程，然后一键删除它们。

如果您重复执行此操作，那么（假设您的程序都在 dbo 模式中）：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'DROP PROCEDURE dbo.'
  + QUOTENAME(name) + ';
' FROM sys.procedures
WHERE name LIKE N'sp[_]%'
AND SCHEMA_NAME(schema_id) = N'dbo';

EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T04:57:27.983

```
-- drop all user defined stored procedures

    Declare @procName varchar(500) 
    Declare cur Cursor For Select [name] From sys.objects where type = 'p' 
    Open cur 
    Fetch Next From cur Into @procName 
    While @@fetch_status = 0 
    Begin 
     Exec('drop procedure ' + @procName) 
     Fetch Next From cur Into @procName 
    End
    Close cur 
    Deallocate cur 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:10:20.187

我发现了这个[How to Drop All Stored Procedures in Your Database](http://www.sqlmusings.com/2009/03/15/how-to-drop-all-stored-procedures-in-your-database/)然后我进行了测试，它是在*Stored Procedures*文件夹`StoredProcedure`之外创建的。

 *```
CREATE PROC UserStoredProcedure_Sample1
 AS
       SELECT 'SQL Server rocks'
  GO

CREATE PROC UserStoredProcedure_Sample2
 AS
     SELECT 'SQL Server rocks'
 GO

 SET NOCOUNT ON

  -- to do this we have to use EXEC instead of sp_executesql
 -- sp_executesql does not accept a DROP command in the SQL String
 DECLARE @UserStoredProcedure    VARCHAR(100)
 DECLARE @Command                    VARCHAR(100)

 DECLARE UserStoredProcedureCursor CURSOR SCROLL STATIC READ_ONLY FOR
 SELECT
     SPECIFIC_NAME
 FROM
    INFORMATION_SCHEMA.ROUTINES

  OPEN UserStoredProcedureCursor

FETCH NEXT FROM UserStoredProcedureCursor
 INTO @UserStoredProcedure
  WHILE (@@FETCH_STATUS = 0) BEGIN
        SET @Command = 'DROP PROCEDURE ' + @UserStoredProcedure

         -- display; visual check
         SELECT @Command

        -- when you are ready to execute, uncomment below
        EXEC (@Command)

        FETCH NEXT FROM UserStoredProcedureCursor
         INTO @UserStoredProcedure
  END

 CLOSE UserStoredProcedureCursor
 DEALLOCATE UserStoredProcedureCursor

   SET NOCOUNT OFF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T11:25:19.567

```
DECLARE @DeleteProcCommand NVARCHAR(500)

DECLARE Syntax_Cursor CURSOR
FOR
SELECT 'DROP PROCEDURE ' + p.NAME
FROM sys.procedures p

OPEN Syntax_Cursor

FETCH NEXT FROM Syntax_Cursor

INTO @DeleteProcCommand

WHILE (@@FETCH_STATUS = 0)
BEGIN

EXEC (@DeleteProcCommand)

FETCH NEXT FROM Syntax_Cursor
INTO @DeleteProcCommand

END

CLOSE Syntax_Cursor

DEALLOCATE Syntax_Cursor 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T12:21:43.657

```
DECLARE @sql VARCHAR(MAX)='';

SELECT @sql=@sql+'drop procedure ['+name +'];' FROM sys.objects 
WHERE type = 'p' AND  is_ms_shipped = 0

exec(@sql); 
```*

# javascript - 画布上的漂亮椭圆？

> ID：14424648
> 
> 赞同：3
> 
> 时间：2013-01-20T12:42:11.120
> 
> 标签：javascript, html, canvas

是否可以创建具有更好笔画且没有“模糊”边框的椭圆/椭圆，类似于：

*   [http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-ellipse-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-ellipse-tutorial/)
*   [http://www.html5canvastutorials.com/advanced/html5-canvas-ovals/](http://www.html5canvastutorials.com/advanced/html5-canvas-ovals/)

我可以以某种方式在椭圆周围创建更清晰的笔划线，还是我必须忍受那个“模糊”的边界？ ![在此处输入图像描述](../Images/ba838816dac6e2223925c526d5c9ac93.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T21:08:07.150

！你能行的 ！通过进行后处理：

1）使用 globalCompositeOperation ：

编辑：是的，但不是：至少在 Chrome 上，'destination-in' 与规范不匹配：源用于计算目标颜色，因此我们不能从阴影中获得单一颜色。
（我尝试了 JSBin：http: [//jsbin.com/ecipiq/4/](http://jsbin.com/ecipiq/4/)）

或者

2）使用 getImageData 和性能数组：

*   在临时画布中绘制边框
*   画布的getImageData
*   获取底层数据的 Uint32Array 或 Uint8Array 视图
*   在数组内线性循环：如果值 > 阈值将其设置为边框颜色
*   在目标画布上绘制椭圆的填充
*   putImageData 在目标画布上。

哪一个 ？

*   第二个不需要 globalCompositeOperation 工作。
    但是在大多数浏览器上（全部？）get/put ImageData 都慢得要命，仅凭这一事实就可能使
    该*解决*方案无效。
    好消息是您可以精确地决定如何取消抗锯齿。

其他 StackOverflow 成员可能对这一切都有见解。

这些解决方案中的任何一个都将比手写的非锯齿椭圆函数快得多。

第一个解决方案的有用链接：http:
[//www.html5rocks.com/en/tutorials/webgl/typed_arrays/](http://www.html5rocks.com/en/tutorials/webgl/typed_arrays/)

让您更快入门的备注：
您可以通过以下方式在 ImageData 上获得 UInt32Array 视图：

```
var myGetImageData = myTempCanvas.getImageData(0,0,sizeX, sizeY);
sourceBuffer32     = new UInt32Array(myGetImageData.data.buffer); 
```

然后 sourceBuffer32[i] 包含打包成一个无符号 32 位 int 的红色、绿色、蓝色和透明度。将其与 0 进行比较以了解像素是否为非黑色（ != (0,0,0,0) ）

或者您可以使用 Uint8Array 视图更精确：

```
var myGetImageData = myTempCanvas.getImageData(0,0,sizeX, sizeY);
sourceBuffer8     = new Uint8Array(myGetImageData.data.buffer); 
```

如果您只处理灰色阴影，则 R=G=B，因此请注意

```
sourceBuffer8[4*i]>Threshold 
```

您可以使用 UInt32Array 视图一次性将第 i 个像素设置为黑色：

```
sourceBuffer32[i]=(255<<24)||(255<<16)||(255<<8); 
```

从这个例子中，你肯定能够弄清楚如何处理灰色/黑色以外的其他颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:58:23.610

简短的回答是否定的，对不起！

该规范没有评论浏览器必须使用（或不使用）的抗锯齿方法，因此浏览器之间会有所不同。不同版本的 Chrome（尤其是如果您使用 chrome beta 或开发者频道）总是在这个问题上出现问题。

在规范中对此进行了一些讨论，但没有采取任何行动，除了现在可以选择关闭图像平滑的图像（上下文的`imageSmoothingEnabled`属性）。但是，这绝不适用于路径。

不幸的是，一种解决方案只能在最狭窄的情况下工作：如果您的椭圆是固定的，则在 Firefox（可以说是具有最平滑抗锯齿的浏览器）中创建它们并从中生成图像，然后在所有浏览器上绘制图像.

简而言之，如果您想要在所有浏览器中使用*相同的像素*形状，则必须使用图像，目前没有其他方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T19:26:28.063

是的你可以！这是调用`context.stroke()`25 次而不是一次的结果：

![非模糊椭圆](../Images/19bd718daa126a5b5b8bc135260deb50.png)

对比一下，原文如下：

![模糊的椭圆](../Images/1fd9aac80b6720fbf04673842a0caf1f.png)

# html - Make div same as normal text using CSS

> ID：14424649
> 
> 赞同：0
> 
> 时间：2013-01-20T12:42:16.043
> 
> 标签：html, css

I want to make my website responsive,

When the width is less than 1024px, I need to add the div menu-item to the menu.

I need to use this when the width is more than 1024px

```
<div id="menu" >
    HOME
    TOP40
    DJS
        <div id="br"></div>
    SHOUTBOX
    VERZOEKJES
</div> 
```

And when the width is less than 1024px, I need to use this

```
<div id="menu" >
    <div id="menu-item">HOME</div>
    <div id="menu-item">TOP40</div>
    <div id="menu-item">DJS</div>
        <div id="br"></div>
    <div id="menu-item">SHOUTBOX</div>
    <div id="menu-item">VERZOEKJES</div>
</div> 
```

So when the width of the screen is more than 1024px, I want to make the #menu-item the same as text, I already tried float: left; but that wasn't working.

Sorry, I don't know what kind of code's you need so Live demo is at random-radio.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:46:46.710

You need to read up on CSS media queries, here's a good article: [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# codeigniter - 如何在codeigniter中创建助手？

> ID：14424651
> 
> 赞同：0
> 
> 时间：2013-01-20T12:42:38.460
> 
> 标签：codeigniter, helper

我刚刚创建了文件`/CodeIgniter/application/helpers/ajax_helper.php`，现在想使用它的功能，`CodeIgniter/application/controllers/Ajax.php`所以我使用：

```
function __construct(){
    parent::__construct();
    if((bool)$this->session->userdata('logged_in'))
        $this->load->helper('ajax');
    else
        return FALSE;
} 
```

但是发生了错误：

> 无法加载请求的文件：helpers/ajax_helper.php

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:31:12.677

当 CodeIgniter 有内置的同名助手（ajax_helper）时，您只能使用“MY_”前缀。请将文件名“my_ajax_helper.php”更改为“ajax_helper.php”并使用`$this->load->helper('ajax');`

"MY_" 前缀**仅**用于扩展 CI 内置的核心助手（控制器、模型等规则相同），例如，您可以使用 my_url_helper 扩展 url_helper，并通过`$this->load->helper('url');`、 not加载它`'my_url'`，但您不能创建自己具有此前缀的自己的助手。

**更新：** 糟糕，对不起，我发现我的答案可能是错误的，CI 可以在我的测试中加载带有“my_ajax”的自定义助手。也许另一个可能的原因是文件/文件夹权限？

**更新：**我检查了 CI 的代码，发现它只在 file_exists() 返回 false 时输出此消息，这意味着帮助文件不存在。所以问题可能是由 ajax_helper.php 的文件名、路径或字母大小写引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:09:51.747

codeigniter 系统中不存在帮助程序“ajax”，因此首先您可以重命名文件名，例如`ajax_helper.php`，第二次使用：

```
 function __construct(){
parent::__construct();
if((bool)$this->session->userdata('logged_in'))
    $this->load->helper('ajax_helper');

else
    return FALSE;
} 
```

# ios - AS3: Smooth touch swipe scroll for iOS

> ID：14424653
> 
> 赞同：1
> 
> 时间：2013-01-20T12:42:50.607
> 
> 标签：ios, actionscript-3, air, scroll, touch

I've been trying to figure out for days now how to get the smooth scrolling on a touch device as all other apps have.. For the time being I've implemented this:

```
Multitouch.inputMode = MultitouchInputMode.GESTURE;

stage.addEventListener (TransformGestureEvent.GESTURE_SWIPE, fl_SwipeHandler);

function fl_SwipeHandler(event:TransformGestureEvent):void
{
    switch(event.offsetX)
    {
        // swiped right
        case 1:
        {
            // Start your custom code
            // This example code moves the selected object 20 pixels to the right.

            // End your custom code
            break;
        }
        // swiped left
        case -1:
        {
            // Start your custom code
            // This example code moves the selected object 20 pixels to the left.

            // End your custom code
            break;
        }
    }

    switch(event.offsetY)
    {
        // swiped down
        case 1:
        {
            // Start your custom code
            // This example code moves the selected object 20 pixels down.
            if (PActive == true) {
                dgPlace.verticalScrollPosition = dgPlace.verticalScrollPosition - 60;
            }
            if (SActive == true) {
                dgSubject.verticalScrollPosition = dgSubject.verticalScrollPosition - 60;
            }
            if (OActive == true) {
                dgObject.verticalScrollPosition = dgObject.verticalScrollPosition - 60;
            }
            if (FActive == true) {
                dgFeeling.verticalScrollPosition = dgFeeling.verticalScrollPosition - 60;
            }
            if (AActive == true) {
                dgAction.verticalScrollPosition = dgAction.verticalScrollPosition - 60;
            }
            if (NActive == true) {
                dg.verticalScrollPosition = dg.verticalScrollPosition - 60;
            }
            // End your custom code
            break;
        }
        // swiped up
        case -1:
        {
            // Start your custom code
            // This example code moves the selected object 20 pixels up.
            if (PActive == true) {
                dgPlace.verticalScrollPosition = dgPlace.verticalScrollPosition + 60;
            }
            if (SActive == true) {
                dgSubject.verticalScrollPosition = dgSubject.verticalScrollPosition + 60;
            }
            if (OActive == true) {
                dgObject.verticalScrollPosition = dgObject.verticalScrollPosition + 60;
            }
            if (FActive == true) {
                dgFeeling.verticalScrollPosition = dgFeeling.verticalScrollPosition + 60;
            }
            if (AActive == true) {
                dgAction.verticalScrollPosition = dgAction.verticalScrollPosition + 60;
            }
            if (NActive == true) {
                dg.verticalScrollPosition = dg.verticalScrollPosition + 60;
            }
            // End your custom code
            break;
        }
    } 
```

Which basically just says that if a swipe occurs then scroll the active datagrid up or down by 60 units which is 2 rows. Please if anyone has any idea how to do this, I would greatly appreciate the help. ^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T02:14:45.850

只是一个建议（虽然我自己还没有尝试过），滑动体验真的取决于影片剪辑（或内容）的大小。

所以，也许不是使用固定数字 60，您可以使用类似`dgSubject.height / 3`. （3，这样您将通过 3 次滑动到达终点）。

只是想扔一些东西来引发更多的思考。

另外，我刚刚找到以下链接： [http://www.greensock.com/throwprops/](http://www.greensock.com/throwprops/) [http://www.swfgeek.net/2011/09/08/greensocks-throwpropsplugin-ipad-test/](http://www.swfgeek.net/2011/09/08/greensocks-throwpropsplugin-ipad-test/)

看看他们是否解决了你的问题

# android - 如何清除 EditText 的焦点？

> ID：14424654
> 
> 赞同：43
> 
> 时间：2013-01-20T12:42:52.003
> 
> 标签：android, android-edittext

我有一个活动，`EditText`顶部有一个搜索框 ( )，下面有一个 ListView。每当活动开始时，EditText 始终具有焦点并调出部分覆盖`ListView`.

没有其他文本视图可以具有焦点。我希望 EditText 仅在用户触摸它并开始输入时才具有焦点。我尝试`clearFocus()`输入`onCreateView`,`onViewCreated`或`onCreated`，但没有运气。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-20T12:47:51.887

在您的父布局中设置下一个属性：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:descendantFocusability="beforeDescendants"
    android:focusableInTouchMode="true" > 
```

现在，当`activity`这个布局开始时获得默认焦点。

我们也可以在运行时从子视图中移除焦点（例如在完成子编辑之后）：

```
findViewById(R.id.mainLayout).requestFocus(); 
```

或者

查看 AndroidManifest.xml 元素。

```
android:windowSoftInputMode="stateHidden" 
```

进入活动时它总是隐藏键盘。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-26T09:19:26.363

您可以在容器视图上使用 set focus。添加到容器**android:focusableInTouchMode="true"**、**android:focusable="true"**和标签**requestFocus**示例：

```
<RelativeLayout
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusableInTouchMode="true"
    android:focusable="true">
    <requestFocus/>

    <EditText
        android:id="@+id/edit_text_id"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T12:46:58.053

你必须`<requestFocus>`在你的 XML 中提到标签`editTiext field`删除它并再次运行

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-24T11:56:08.013

你可以试试这个：

```
editText.clearFocus(); 
```

您想在哪里清晰焦点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-01T11:19:27.220

在 EditText 的父布局中添加 android:focusable="true" 和 android:focusableInTouchMode="true" 元素，如下所示；

```
android:id="@+id/linearLayout7" android:layout_width="fill_parent"

android:layout_height="wrap_content"

android:focusable="true" android:focusableInTouchMode="true"> 
```

我想，它应该对你有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T12:48:37.663

这是EditText的答案[，明确关注外部触摸](https://stackoverflow.com/questions/4828636/edittext-clear-focus-on-touch-outside)。

或者您可以只编写小部件，它仅显示带有 textView 的文本，并`onClick`显示对话框`EditText`，您可以在其中编辑此文本/

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-20T12:46:28.053

试试这个

在您的`Activity`声明中`AndroidManifest.xml`添加以下代码：

```
android:windowSoftInputMode="stateHidden" 
```

当活动可见时，它将防止键盘弹出。

快乐编码:)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-03-26T18:39:51.897

这将完成您的工作：

`android:windowSoftInputMode="stateHidden"`

# cocoa-touch - 在应用程序中更改 UIDatePicker 日历/区域格式

> ID：14424663
> 
> 赞同：0
> 
> 时间：2013-01-20T12:43:30.333
> 
> 标签：cocoa-touch, uidatepicker

如何通过应用内选项更改 UIDatePicker 上的语言/区域格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:13:44.780

创建一个选择器，用于从列表`[NSLocale availableLocaleIdentifiers]`或类似这样的列表中进行选择。然后根据用户的选择设置日期选择器的区域设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:24:19.947

在这里找到我需要的东西：

[https://stackoverflow.com/a/8944352/1827583](https://stackoverflow.com/a/8944352/1827583)

[http://iphonedevsdk.com/forum/iphone-sdk-development/97760-set-locale-and-calendar-to-uidatepicker.html](http://iphonedevsdk.com/forum/iphone-sdk-development/97760-set-locale-and-calendar-to-uidatepicker.html)

我可以将日历格式更改为日语，将区域格式更改为“ja_JP”

# ios - ios + xcode + PhoneGapDelegate.h 未找到问题

> ID：14424664
> 
> 赞同：0
> 
> 时间：2013-01-20T12:43:31.940
> 
> 标签：ios, xcode, cordova

Mac OS X 10.7.4
Xcode 4.5.2

当我尝试构建我的 xcode 应用程序时，我收到一个错误：**'PhoneGap/PhoneGapDelegate.h' file not found**。

我搜索了很多时间。但没有成功。

有人可以帮我吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:57:03.970

我必须安装 phonegap 1.2
我当前的 phonegap 版本是 2，但它需要 1.2

# php - 如何将多个复选框值插入数据库

> ID：14424665
> 
> 赞同：0
> 
> 时间：2013-01-20T12:43:35.807
> 
> 标签：php, mysql, mysqli

我一直在研究这个并在网上搜索，两天的大部分时间都是空的。费了很多功夫，我可以将一个选中的值插入数据库；但是，如果我选中更多框，它仍然只会插入一个值。

这是我在输入用户页面上使用的代码（不包括表单标签）：

```
 <input type="checkbox" name="skills[]" value="1"> ActionScript<br />
  <input type="checkbox" name="skills[]" value="2"> AppleScript <br /> 
```

现在我正在获取两个会话变量，以将所选技能链接到登录的用户：

```
 $skills = $_POST['skills'];
  $id = $_SESSION['Ind_ID']; 
```

**这是有一些小错误的代码：**

```
for ($i=0; $i<sizeof($skills);$i++) {
    // echo $skills[$i];
    $query= "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES (" .$skills[$i]. ",
            ".$_SESSION['Ind_ID'].")";
 } 
```

使用我的 echo $skills[$i] 我可以看到我正在循环并且可以在屏幕上显示尽可能多的用户输入；所以，这是个好消息。

**问题**是我无法将**多个值插入 DB**。我一次可以做一个值；但是，不超过一个。

看来我的查询非常接近。如果我选择只选择一个复选框，它就完美了；但是，如果我选择多个，它只输入最后一个值（因此，如果我选择了 10 个值，它会将最后一个值插入数据库）。

任何帮助，非常感谢。

我正在使用 PHP 和 MySQLi

**根据反馈进行更新 FOR LOOP** 这是更新后的循环。我在循环之外有查询，现在尝试追加到我的初始查询。错误表示查询的语法有问题。

```
$query= "INSERT INTO individual_skills(Skills_ID,Ind_ID) VALUES (" .$skills[$i]. ",
                                                        ".$_SESSION['Ind_ID'].")";

  for ($i=0; $i<sizeof($skills);$i++) {
  //echo $skills[$i];
  $query.= " VALUES (" .$skills[$i]. ",".$_SESSION['Ind_ID'].")";
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:49:42.717

想想你的代码在做什么。每个循环，您都在重新定义`$query`变量，这样当您到达终点时，最终值`$query`将是您检查的最后一个值。

如果您仍然想使用您编写的相同循环逻辑，这可能不是最有效的方式，那么您必须每次*在*循环内执行查询，以便您编写的每个查询都会被执行。

更准确地说，混淆似乎源于您还没有完全发现将值分配给变量和将变量传递给函数以执行之间的区别。

# asp.net-mvc-4 - Using 'Remote' attribute with [MetadataType]

> ID：14424673
> 
> 赞同：0
> 
> 时间：2013-01-20T12:45:02.593
> 
> 标签：asp.net-mvc-4, data-annotations, metadatatype

I am getting an error using the [Remote] attribute on a [MetadataType] class. I get the following error: Error 15 Attribute 'Remote' is not valid on this declaration type. It is only valid on 'property, indexer' declarations.

I understand what the error is saying, I just don't understand why [Remote] won't work but other attributes work fine.

```
[MetadataType(typeof(StudentRowMeta))]  
public class StudentRow
{
    public string Login { get; set; }
}

public class StudentRowMeta
{
    [Required(ErrorMessage = "Please Enter Login")]
    [StringLength(50, ErrorMessage = "Login can not be more than 50 characters")]
    [Remote("IsLoginAvailable", "Validation")]
    public object Login;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T15:15:25.943

在 Remote 属性的定义处：

```
 [AttributeUsage(AttributeTargets.Property)]
  public class RemoteAttribute : ValidationAttribute, IClientValidatable { ... 
```

您只能将原始 RemoteAttribute 与属性一起使用。但是，没有什么能阻止使用后代的新属性定义：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field)]
public class MyRemoteAttribute : RemoteAttribute
{
    public MyRemoteAttribute(string action, string controller)
        : base(action, controller)
    {
    }
    public MyRemoteAttribute(string action, string controller, string area)
        : base(action, controller, area)
    {
    }
} 
```

它对我有用。

# android - Unable to display a html file a blank screen appears

> ID：14424674
> 
> 赞同：1
> 
> 时间：2013-01-20T12:45:20.067
> 
> 标签：android, webview

I have a demo file in raw folder under res. When i click on a button to open the file a blank screen appears i am unable to resolve the problem.

Here's the code :

For the xml file :

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

For the activity :

```
package com.ashsoft.basiccprogram;

import java.io.ByteArrayOutputStream;
 import java.io.IOException;
  import java.io.InputStream;

  import android.app.Activity;
    import android.os.Bundle;
     import android.webkit.WebView;

      public class First extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
  setContentView(R.layout.first);

         WebView webView = (WebView) this.findViewById(R.id.webView1);
         webView.getSettings().setBuiltInZoomControls(true);
         webView.loadData(readTextFromResource(R.raw.demo), "text/html", "utf-8");
}

    private String readTextFromResource(int resourceID)
        {
            InputStream raw = getResources().openRawResource(resourceID);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
        int i;
        try
            {
          i = raw.read();
                while (i != -1)
            {
         i = raw.read();
                }
            raw.close();
            }
            catch (IOException e)
       {
                e.printStackTrace();
        }
            return stream.toString();
        }

}; 
```

I am getting a blank screen. The demo.html is saved in the raw folder.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:49:07.177

Move `demo.html` into your `assets` folder and use:

```
webView.loadUrl("file:///android_asset/demo.html"); 
```

# php - Joomla - 管理面板中的动态下拉列表

> ID：14424689
> 
> 赞同：2
> 
> 时间：2013-01-20T12:47:35.057
> 
> 标签：php, javascript, joomla

我在 Joomla 的管理面板中向我的用户创建表单添加了一个下拉列表！1.5（使用 .xml 文件）。我遇到的问题是它的内容必须是动态的（来自外部源文件）。我的问题是我可以在哪里（以及如何）做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:53:37.233

您可以创建自己的类型。在您的 default.xml 中，您将拥有如下内容：

```
<url addpath="/administrator/components/com_componentname/elements/">
    <param name="id" type="myType" default="0" label="SELECT_LABEL" description="SELECT_DESC" />
</url> 
```

并作为 /administrato/components/com_componentname/elements/myType.php 中的实现

```
class JElementmyType extends JElement {
    var     $_name = 'myType';

    function fetchElement($name, $value, &$node, $control_name)
    {

            $list = READ_FILE_OR_DB_OR_ANYTHING();
            array_unshift($list, JHTML::_('select.option', '0', '-'.JText::_('Select Me').' -', 'value', 'text'));

            return JHTML::_('select.genericlist',  $list, ''.$control_name.'['.$name.']', 'class="inputbox"', 'value', 'text', $value, $control_name.$name );
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:07:50.743

如果您使用的是 xml 表单，则可以使用 sql 类型字段。

```
<param name="user" type="sql" default="" label="Select an User" query="SELECT id, username FROM #__user" key_field="id" value_field="username" /> 
```

阅读更多 - [http://docs.joomla.org/Sql_parameter_type](http://docs.joomla.org/Sql_parameter_type)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T20:45:28.047

我有这个问题 - 就像你告诉我的那样，我的代码如下所示：

```
 <?php

jimport( 'joomla.html.html.select' );

class JElementKlasa extends JElement {
    var     $_name = 'Klasa';

    function fetchElement($name, $value, &$node, $control_name)
    {

            $list = array(1=>'a', 2=>'b');
            $options = array();
            foreach($list as $key=>$value)
                $options[] = JHTML::_('select.option', $key, $value);

            //array_unshift($list, JHTML::_('select.option', '0', "Take it"));

            return JHTML::_('select.genericlist',  $options, 'klas', '', 'value', 'text');
 }

 ?> 
```

但它没有出现在那里 - 它实际上为它腾出了空间，但它是空的:(同时我会继续尝试修复它。

# actionscript-3 - listen for click in skin class

> ID：14424690
> 
> 赞同：0
> 
> 时间：2013-01-20T12:47:44.153
> 
> 标签：actionscript-3, flex4

In Flex4 I have a ButtonA with SkinClassA and a ButtonB with SkinClassB. Is it possible to listen in SkinClassA for clicks on ButtonB?

```
<Components:IconToggleClass id="ButtonA" skinClass="SkinClassA">
<s:Button id="ButtonB" skinClass="SkinClassB"  click="ButtonB_clickHandler(event)" />

// the SkinClassA class
<s:SparkSkin currentStateChanging="onCurrentStateChanging(event)" 
     added="onAddedHandler(event)" >

<!-- host component -->
<fx:Metadata>
<![CDATA[  
    [HostComponent("Components.IconToggleClass")]
 ]]>
</fx:Metadata>

<fx:Script >
    <![CDATA[

    import mx.events.StateChangeEvent;

    private function onAddedHandler(event:Event):void
    {
        setIcon("iconDefault");
    }
//I want something like this:
    private function onButtonBClick():void
    {
       //do something
    }

     ]]>

</fx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:32:32.860

您应该在主机组件中监听 click 事件并相应地更新皮肤状态。

```
private function onButtonBClick(event:MouseEvent):void {
   beenClicked = true;
   invalidateSkinState();
}

protected override function getCurrentSkinState():String {
   if (beenClicked) 
       return "clicked";
   else
       return super.getCurrentSkinState();
} 
```

然后，您应该在您的皮肤中实现单击状态，并在其中加载第二个图标。

# windows - addChildWindow equivalent for Windows platform

> ID：14424693
> 
> 赞同：0
> 
> 时间：2013-01-20T12:48:06.150
> 
> 标签：windows, cocoa, nswindow

On Cocoa, to lock a child window to its parent window, one can use addChildWindow:ordered: from the Cocoa library.

I am looking for a similar method on Windows for cross-platform developping.

Do you know of any equivalent method on Windows ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:41:09.623

子（即'WS_CHILD'）窗口**总是**与父窗口一起移动，它们不需要被锁定。

但是，如果您的意思是浮动（例如“WS_POPUP”）窗口，则无法在 WinAPI 中“锁定”它们。例如，您需要处理 WM_WINDOWPOSCHANGED，并手动重新定位浮动窗口。

# prolog - Prolog - 列表列表

> ID：14424702
> 
> 赞同：0
> 
> 时间：2013-01-20T12:49:08.067
> 
> 标签：prolog

有——`myMultiply/3`

```
myMultiply([],X,[]) :- !.
myMultiply([H|T],X,Result) :-
    myMultiply(T,X,NewRest),
    Elem is H*X,
    Result = [Elem|NewRest]. 
```

哪个将左侧列表中的每个元素叠加到第二个 arg 处的修女并返回`Result`。

例如 -

```
myMultiply([1,4,5],4,R).
R = [4,16,20]. 
```

和 `tlm/3`

```
tlm(List1,[],_) :- !.
tlm(List1,[H2,Rest2],Result):-
    myMultiply(List1,H2, Elem),
    tlm(List1,Rest2,NewResult),
    Result = [Elem|NewResult]. 
```

我试图 `myMultiply/3`在右列表的每个元素上制作左列表并 retun `Result` 。

例如 -

```
?- tlm([3,4,2],[4,7,8],R).
R = [[12,16,8],[21,28,14],[24,32,16]]. 
```

一般来说，这个想法是获取`Elem`列表并将他连接到`NewResult`.

我的问题是`tlm/3`返回`false`-

```
 ?- tlm([3,4,2],[4,7,8],R).
false. 
```

而不是上面的例子。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:09:52.113

您的代码有两个问题。

在这里，我做了一个基本的更正，并评论了无用的削减。

```
myMultiply([],X,[]) :- !. % the cut is useless here
myMultiply([H|T],X,Result) :-
    myMultiply(T,X,NewRest),
    Elem is H*X,
    Result = [Elem|NewRest].

tlm(List1,[],[]) :- !. % the cut is useless here
tlm(List1,[H2|Rest2],Result):-
    myMultiply(List1,H2, Elem),
    tlm(List1,Rest2,NewResult),
    Result = [Elem|NewResult]. 
```

结果是……

```
?- tlm([3,4,2],[4,7,8],R).
R = [[12, 16, 8], [21, 28, 14], [24, 32, 16]]. 
```

你能看出为什么削减是无用的吗？

# quickdialog - 如何使用 json 设置 QDateTimeElement 的模式？

> ID：14424703
> 
> 赞同：0
> 
> 时间：2013-01-20T12:49:10.983
> 
> 标签：quickdialog

我正在使用 QuickDialog 从 JSON 生成表单，一切都很好，除了日期/时间选择器。不幸的是，文档确实提到了可用的不同类型的日期选择器。示例源还从代码生成表单，但是我想使用 JSON 机制生成它。

这是我的 JSON 的摘录。这仅选择时间选择器：

```
"elements": [
    {"type":"QDateTimeInlineElement","title":"Date"}, // time only picker
    {"type":"QDateTimeInlineElement","mode":"UIDatePickerModeDate","title":"Date"}, // crashes
    {"type":"QDateTimeElement","title":"Date","date":"01/03/2013"}, // crashes
    {"type":"QDateTimeInlineElement","title":"Date","mode":"1"}, // crashes
    {"type":"QDateTimeInlineElement","title":"Time"} // time only
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:49:10.983

事实证明我很接近这种模式。这就是仅在仅使用 json 构建表单时才给我的日期：

```
{"type":"QDateTimeInlineElement","title":"Date","_mode":"1"}, //works 
```

这是有效的，因为 1 是 UIDatePickerMode 枚举的 UIDatePickerModeDate 值的计算结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T00:39:22.123

如果您查看 QRootBuilder 的实现，则有一个名为“initializeMappings”的方法。此方法具有所有 JSON 等效 iOS 映射。

例如：{"type":"QDateTimeInlineElement","title":"Date","mode":"Date"}

在 initializeMappings 方法中“Date”对应于 UIDatePickerModeDate

# c# - WCF Web 服务和 Windows Phone

> ID：14424707
> 
> 赞同：0
> 
> 时间：2013-01-20T12:49:27.303
> 
> 标签：c#, wcf, mobile, service

只是一个快速的问题，因为我正在努力让我的 Web 服务正常工作。基本上我遵循了一个教程，因为我是 Windows Phone 和数据库的新手，

```
"http://studentguru.gr/b/dt008/archive/2010/12/02/querying-a-database-on-windows-phone-7-using-wcf.aspx" 
```

但是我使用的是我自己的数据库，一个在 Visual Studio 中创建的 .sdf 文件

我设法创建了服务、引用和它所说的所有方法。但是，当我尝试在运行时从服务中获取数据时，它只会返回

```
 Timesheet_System.Servicereference.TimeData
       Timesheet_System.Servicereference.TimeData
       Timesheet_System.Servicereference.TimeData
       Timesheet_System.Servicereference.TimeData 
```

对于数据库中的所有 4 个项目。

有谁知道为什么？非常感谢。下面的代码：

我在 asp.net 站点中有一个数据服务和一个 ado.net 数据模型，然后我在手机应用程序中有一个服务引用和 2 个调用数据的方法这是 asp.net 应用程序中的数据服务代码

```
namespace TimesheetDataSite
{
     [ServiceContract(Namespace = "")]
    [SilverlightFaultBehavior]
    [AspNetCompatibilityRequirements(RequirementsMode =     AspNetCompatibilityRequirementsMode.Allowed)]
public class Service1
{
    [OperationContract]
    public List<TimeData> DoWork()
    {
        // Add your operation implementation here
        using (TimeDataEntities2 entities = new TimeDataEntities2())
        {
            var alldata = from x in entities.TimeDatas select x;
            return alldata.ToList();
        }
    }

    // Add more operations here and mark them with [OperationContract]
} 
```

}

手机应用程序中的两种方法

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
        {
        Service1Client client = new Service1Client();

        client.DoWorkCompleted +=
            new EventHandler<DoWorkCompletedEventArgs>(client_DoWorkCompleted);
        client.DoWorkAsync();
    }
    void client_DoWorkCompleted(object sender, DoWorkCompletedEventArgs e)
    {
        if (e.Error == null)
        {

            listBox1.ItemsSource = e.Result;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:24:18.863

TimeData 根据我的评论，请尝试以下操作：

```
void client_DoWorkCompleted(object sender, DoWorkCompletedEventArgs e)
{
    if (e.Error == null)
    {
        listBox1.DisplayMemberPath = "PropertyA";
        listBox1.ItemsSource = e.Result;
    }
} 
```

您要显示`PropertyA`的属性的名称在哪里。`TimeData`

就像我说的，我没有可用的 Visual Studio 来测试它，但它应该可以工作。

# php - Error (#3502) while tring to post watch action

> ID：14424708
> 
> 赞同：0
> 
> 时间：2013-01-20T12:49:38.490
> 
> 标签：php, facebook, facebook-graph-api

This is driving me crazy... I am trying to use the Facebook's open graph to publish actions from my webiste to the user's wall. The verb is "watch" and the object is "video".

This is my meta tags:

```
<meta property="fb:app_id" content="111" />
<meta property="og:type" content="video.other" /> 
<meta property="og:url" content="http://www.111.com/videos.php?v=<?php echo $name;?>">
<meta property="og:image" content="http://www.111.com/thumbnails/<?php echo $name;?>.png">
<meta property="og:title" content="<?php echo $caption;?>">
<meta property="og:description" content="111">
<meta property="fb:admins" content="111">
<meta property="og:site_name" content="111"> 
```

This is my php code:

```
//facebook
    require_once('scripts/facebook.php');
    $config = array('appId' => '111', 'secret' => '111');
    $params = array('scope'=>'publish_actions');
    $facebook = new Facebook($config);
    $user = $facebook->getUser();

    $login_url = $facebook->getLoginUrl($params);
    $logoutUrl = $facebook->getLogoutUrl();
    if($user){

        try{
            $params = array('video'=>'http://www.111.com/videos.php?v='.$name);
            $out = $facebook->api('/me/video.watches','post',$params);
            }catch(Exception $e){
                echo $e->getMessage().'<br>';
                }
} 
```

When I run the above code, I get this error:

```
(#3502) Object at URL http://www.111.com/videos.php?v=111 has og:type of 'website'. The property 'video' requires an object of og:type 'video.other'. 
```

I tried using the debug tool with this url and I found no problem with it. As you can see I have `video.other` for `og:type` So it make no sence why I am getting this error. Any one know what I am doing wrong here. I already was able to publish an action to my wall using Graph API Explorer tool by facebook but not with my php code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:46:24.757

所以我把东西留在原样，2小时后回来，一切都很好。

# events - What's the Correct Way to Run Code After Event Handlers?

> ID：14424712
> 
> 赞同：2
> 
> 时间：2013-01-20T12:50:14.917
> 
> 标签：events, event-handling, gtk#

I am deriving a class from `Gtk.Button` that is supposed to run some code when the button is clicked, but only *after* the user-defined event handlers.

Based on .NET conventions, this wouldn't be a problem. The following exemplary Windows Forms code shows a subclass of `System.Windows.Forms.Button` that executes some code *before* the event handlers, then invokes the event handlers (by calling the inherited [`OnClick` method](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx); the same would work in WPF with [`System.Windows.Controls.Button.OnClick`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.onclick.aspx)), and then executes some code *after* the event handlers:

```
using System;
using System.Windows.Forms;
using System.Drawing;

namespace ButtonClickedTestSWF
{
    class Program
    {
        private class MyButton : Button
        {
            protected override void OnClick(EventArgs e)
            {
                Console.WriteLine("before");
                base.OnClick(e);
                Console.WriteLine("after");
            }
        }

        [STAThread]
        public static void Main(string[] args)
        {
            using (Form win = new Form() {
                    Text = "Test"
                   }) {
                win.StartPosition = FormStartPosition.CenterScreen;
                win.Size = new Size(300, 200);

                MyButton btn = new MyButton();
                btn.Text = "Button";
                btn.Click += delegate {
                    Console.WriteLine("event");
                };
                btn.Dock = DockStyle.Fill;
                btn.Parent = win;

                Application.Run(win);
            }
        }
    }
} 
```

As expected, the output is:

```
before
event
after 
```

* * *

However, I have so far failed to replicate this behaviour in Gtk#. Contrary to .NET conventions, the inherited [`OnClicked` method of `Gtk.Button`](http://docs.go-mono.com/?link=M%3aGtk.Button.OnClicked%28%29) does not seem to fire the [`Clicked` event](http://docs.go-mono.com/monodoc.ashx?link=M%3aGtk.Button.Clicked). In fact, the docs call the `OnClicked` method a "default handler".

To verify that Gtk# behaves differently, here's some sample code:

```
using System;

using Gtk;

namespace ButtonClickedTest
{
    class Program
    {
        private class MyButton : Button
        {
            public MyButton()
            {
            }

            public MyButton(IntPtr raw) : base(raw)
            {
            }

            protected override void OnClicked()
            {
                Console.WriteLine("before");
                base.OnClicked();
                Console.WriteLine("after");
            }
        }

        [STAThread]
        public static void Main(string[] args)
        {
            Application.Init();

            using (Window win = new Window("Test")) {
                win.WindowPosition = WindowPosition.Center;
                win.SetSizeRequest(300, 200);
                win.Hidden += delegate(object sender, EventArgs e) {
                    Application.Quit();
                };

                MyButton btn = new MyButton();
                btn.Add(new Label("Button"));
                btn.Clicked += delegate {
                    Console.WriteLine("event");
                };
                win.Add(btn);

                win.ShowAll();
                Application.Run();
            }
        }
    }
} 
```

Unfortunately, the output is

```
before
after
event 
```

i.e. even code at the end of `OnClicked` runs already before the `Clicked` event handlers.

* * *

My question is: **What is the proper way in Gtk# to execute some code upon an event only *after* the event handlers?**

* * *

I have found two dissatisfying workarounds so far:

The first is to define a replacement for the `Clicked` event, say, a `Clicking` event (with an according `OnClicking` method that fires the `Clicking` event handlers). I could invoke `OnClicking` in my overridden version of `OnClicked` and thus run code before and after the event handlers as I like. Additionally, any subclasses of my button class could use `OnClicking` in the expected way, i.e. calling `base.OnClicking` when the `Clicking` event handlers should run.

This is not very clean, though, because nothing would prevent users of my button class from registering their event handlers with the original `Clicked` event rather with the new `Clicking` event that is properly embedded into the button's logic. In particular, I could not even modify the API documentation for the inherited `Clicked` event to express there that `Clicked` should not be used and users should turn to `Clicking` instead.

The other workaround works only in this specific case, as there happens to be an [`OnReleased` method](http://docs.go-mono.com/?link=M%3aGtk.Button.OnReleased%28%29) that is always executed after the `Clicked` event handlers. I could use that method to insert some code that is guaranteed to run only after any `Clicked` event handlers, but obviously, this solution couldn't be transferred to events that are not conveniently followed by some other events.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:03:49.360

在 Gtk+ 中，因此在 Gtk# 中就是这样。`Gtk.Button.OnClicked`安装为信号的类处理程序。由于此信号属于*“首先运行”*类型，因此处理程序在连接到它的任何其他回调之前运行。

使用 C 中的 Gtk+，您可以在类处理程序和其他回调被调用*之后*`g_signal_connect_after()`注册要调用的回调，但这似乎不适用于 Gtk#。

 *在某些事情通过后运行代码的最简单方法是使用一次*空闲*回调。是的，这有点骇人听闻，但它适用于任何情况，甚至与 Gtk 信号无关：

```
protected override void OnClicked()
{
    Console.WriteLine("before");
    base.OnClicked();
    GLib.Idle.Add(delegate {
                Console.WriteLine("after");
                return false;
            });
} 
```*

# javascript - Two javascript functions not called when return type function is first called

> ID：14424713
> 
> 赞同：0
> 
> 时间：2013-01-20T12:50:20.780
> 
> 标签：javascript, html, css

I need to call 2 functions onkeypress out of which first function is return type; and second function is not getting called but if use in reverse order it is working

**Requirement:**

> OnKeyPress, the key should be validated. if number, accept the value in TextBox then copy the value into another textbox; If not a number, then do nothing

Correct Order but 2nd function is **not** getting called;

```
<input type="text" name="no_of_units" id="no_of_units" size="5" 
onkeypress="return isNumberKey(event);calc_exchange();"> 
```

In Reverse order both functions are working. I need the **isNumberKey** function to be called first.

```
<input type="text" name="no_of_units" id="no_of_units" size="5"
 onkeypress="calc_exchange();return isNumberKey(event);" 
```

Functions :

```
function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
         return true;
      }
function calc_exchange()
{
var raw1=document.getElementById("no_of_units").value;
document.getElementById("next_no_of_units").value=raw1;
} 
```

I need the following order of function to be called;

> 1.  return isNumberKey(event)
> 2.  calc_exchange()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-31T09:30:50.163

您可以在按键上调用两个 javascript 函数，其中第一个函数是返回类型函数。

```
<input type="text" name="txtName" id="txtName" size="5" 
Onkeypress="return isNumberKey(event,this) && clickButton(event,'imgbtnSearch')">
```

使用 && 运算符，我们可以在按键上调用两个 javascript 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T12:54:49.967

调用`return`将执行它右边的内容然后退出，所以自然不会调用第二个函数。

如果不知道函数内部有什么，就很难回答。但我建议你使用 JavaScript 附加事件处理程序，而不是像你正在做的那样内联。这样，您将获得更多控制权。

在这里查看如何附加事件处理程序：[http ://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T13:00:23.410

所以你不能在返回后调用任何东西，因此你可以试试这个。如果输入错误会引发警报。

```
<input type="text" name="no_of_units" id="no_of_units" size="5" 
onblur=calcexchange() onkeypress="isNumberKey(event)">
....
function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            alert("Wrong I/P");
             evt.focus()
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T12:55:08.690

`return`不必是第一个声明。只需按顺序调用函数，稍后返回结果。

```
<input type="text" name="no_of_units" id="no_of_units" size="5" 
onkeypress="var result = isNumberKey(event); calc_exchange(); return result;"> 
```

返回结果`isNumberKey`可能会阻止默认操作，如果返回 false，则输入将被忽略。看来您想防止非数字*并*执行`calc_exchange`. *在这种情况下，如果*输入不是数字，您应该只返回 false ：

```
if(!isNumberKey(event)) { // validate input
  return false; // it's not a number, so prevent default action (do nothing)
}
calc_exchange(); // it was a number, copy the value 
```

唯一的问题是，在您执行`calc_exchange`时，输入的数字尚未插入到文本框的值中。不过，您可以收听其他事件，例如用户输入完成时：

```
<input type="text" name="no_of_units" id="no_of_units" size="5" 
onkeypress="return isNumberKey(event);"
onchange="calc_exchange();" > 
```

# javascript - onpaste event replaces text in textbox

> ID：14424715
> 
> 赞同：1
> 
> 时间：2013-01-20T12:50:31.983
> 
> 标签：javascript, javascript-events, onpaste

I have an issue with the onpaste event in JS. I need to copy the clipboard content into 2 text boxes by splitting it into half. I am using the code below.

```
function paste(){
document.getElementById("txt1").value = clipboarddata.substr(0,2);
document.getElementById("txt2").value = clipboarddata.substr(2,4);
} 
```

this function is called on the `onpaste` event. The content gets pasted but after the function the entire string is again paste in the box into which the data was paste.

Can i by any chance cancel the event by using `cancelbubble` etc to cancel the event in the paste() function. ??

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T13:40:45.753

我知道这有点晚了，但是对于任何寻找这个的人来说，这里有一种方法：

在你做了你必须做的事情之后，你必须这样做`return false;`这将阻止默认处理程序运行。

这是一个演示：

## HTML

```
<textarea id="txt1"></textarea>
<textarea id="txt2"></textarea> 
```

## Javascript

```
var myElement = document.getElementById('txt1');
myElement.onpaste = function (e) {
   var pastedText = undefined;
   if (window.clipboardData && window.clipboardData.getData) { // IE
      pastedText = window.clipboardData.getData('Text');
   } else if (e.clipboardData && e.clipboardData.getData) {
      pastedText = e.clipboardData.getData('text/plain');
   }
   document.getElementById("txt1").value = pastedText.substr(0, pastedText.length / 2);
   document.getElementById("txt2").value = pastedText.substr(pastedText.length / 2 + 1, pastedText.length);
   return false; // Prevent the default handler from running.
}; 
```

`[jsfiddle demo](http://jsfiddle.net/7N6Xq/124/)`

# jquery - Jquery Cookie 错误

> ID：14424719
> 
> 赞同：1
> 
> 时间：2013-01-20T12:50:40.163
> 
> 标签：jquery, cookies

我有这段代码，我尝试在重定向到另一个页面之前使用 jQuery 设置 cookie：

```
$(document).ready(function() {

   $("#offers-categories").click(function () {
      $.cookie("cardType", "1");
      window.location = "categories.html";
   });

}); 
```

这是我单击`#offers-categories`div 时在控制台中遇到的错误：

```
Uncaught TypeError: Object function (e,t){return new st.fn.init(e,t,X)} has no method 'cookie' 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:00:36.610

你在使用[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)吗？标准 jQuery 中没有 cookie 方法。

# jsp - Spring mvc import simple html

> ID：14424723
> 
> 赞同：0
> 
> 时间：2013-01-20T12:51:08.480
> 
> 标签：jsp, spring-mvc

I am using spring mvc. Now, I am trying to put inside my JSPs simple import to HTML file which contains the toolbar.

This tag does not seem to be working:

```
<jsp:include page="toolbar.html" /> 
```

I tried to put it in the root of the webapp folder (changed the path of the import of course), but still.. it did not work.

How do I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:29:29.590

我解决了。

我必须在控制器中添加一个方法，因为我使用了 jsp 标签。似乎路径是正确的，但 jsp 资源从未连接。

谢谢

# javascript - Foundation top bar toggle not working

> ID：14424730
> 
> 赞同：0
> 
> 时间：2013-01-20T12:51:58.850
> 
> 标签：javascript, css, zurb-foundation

My code is here:

[http://ivanabilic.mixture.io/nnb/](http://ivanabilic.mixture.io/nnb/)

The top bar adjusts to a dropdown when under 940px, but the toggle does not work at that point. I initialise the topbar script in the footer, but I don't know how to fix this. I think it's a problem with my CSS, but not sure how.

Help? Thanks!

EDIT: This is the navbar code specifically:

```
 <div class="nav-background">
    <div class="row" id="top">
            <div class="twelve columns">
                    <nav class="top-bar">
                            <ul>
                            <li class="name"><h1><a href="#"><img src="{{ "public/images/logo.png" | root_asset }}" alt="PlusDigital"></a></h1></li>
                            <li class="toggle-topbar"><a href="#"></a></li>
                            </ul>
                            <section>
                            <ul class="right">
                            <li class="active"><a class="home" href="#">
                            <img class="home-icon" src="{{ "public/images/home-icon.png" | root_asset }}" alt="Home"></a></li>
                            <li><a href="#">Web Solutions</a></li>
                            <li><a href="#">Plans &amp; Pricing</a></li>
                            <li><a href="#">Agency Services</a></li>
                            <li><a href="#">Portfolio</a></li>
                            <li><a href="#">Contact</a></li>
                            </ul>
                            </section>
                    </nav>
            </div>
    </div>
    </div> 
```

And this is the initialise of the Javascript:

```
 <script src="/public/scripts/jquery.foundation.topbar.min.js"></script>
    <script type="text/javascript">$(document).foundationTopBar();</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:13:07.513

我认为问题来自您遇到的失败资源错误：

```
Failed to load resource: the server responded with a status of 403 (Forbidden) 
 https://s3.amazonaws.com/mixture-projects/1286/nnb/public/styles/app.css
Failed to load resource: the server responded with a status of 403 (Forbidden)  
 https://s3.amazonaws.com/mixture-projects/1286/nnb/public/scripts/app.js 
```

据我所知，您也需要这两个。查看链接是否正确和/或这是正确的服务器。

**编辑：** 根据[基金会文档](http://foundation.zurb.com/docs/index.php)

*我们所有的插件和必要的 Javascript 使 Foundation 正常工作。这里最重要的文件是`app.js`，用于初始化您可能想要使用的各种插件。*

您可以在页面下方找到建议的 HTML 标记结构的示例。

# android - How to avoid Service to be stopped on configuration change?

> ID：14424731
> 
> 赞同：2
> 
> 时间：2013-01-20T12:51:59.510
> 
> 标签：android, service, configuration, ondestroy

Hi and thanks for your help.

I have the following situation.

My Activity is bound to a Service that performs heavy data retrival from internet via an AsyncTask.

Since the Service is heavy I need to make make sure it is stopped when the user navigates away for the Activity, therefore I make sure to stop the service in `onDestroy()`.

When configuration changes `onDestroy()` is called - and so are `onPause()` and `onStop()`- and subsequently the Service is stopped by `onDestroy()`.

**The point is that I do not want the Service tho stop on configuration change.**

Please any suggestion very much appreciated!

And thanks for your help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:16:03.513

您可以调用API 级别 11 及更高级别`isChangingConfigurations()`。`onDestroy()`您可以参考这篇文章，[如何区分活动是否正在更改配置](https://stackoverflow.com/questions/6716893/how-to-distinguish-whether-ondestroy-is-called-as-part-of-configuration-change)。

也许你应该采取另一种方法。我认为您应该使用 a `IntentService`（在后台运行，不再需要`AsyncTask`），使用该服务来检索和存储数据，然后使用 a Maybe通知`Activities`数据已更新。`Broadcast`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:14:27.633

对于您的问题，我可以建议两件事。

1）在清单文件中的活动（是活动不是服务）声明中使用以下标签，这将基本上避免在方向更改时重新创建活动。因此不会调用 onDestroy。

```
android:configChanges="keyboardHidden|orientation" 
```

2）您可以在您的活动中以以下方法终止/停止您的服务，仅当用户想要离开您的活动时才会调用该方法。并且您还应该在开始其他活动时停止您的服务。

```
 @Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:58:45.240

试试这个：

```
<service android:name=".yourService"
       android:configChanges="keyboardHidden|orientation"></service> 
```

将此属性应用于您的`manifest`文件。

**简短说明：**

默认情况下，当 Android 上发生某些关键配置更改（常见示例是方向更改）时，Android 会完全重新启动正在运行的 Activity/Service 以帮助其适应此类更改。

当您在 中定义`android:configChanges="keyboardHidden|orientation"`时`AndroidManifest`，您是在告诉 Android：“请不要在拔出键盘或旋转手机时进行默认重置；我想自己处理。是的，我知道我在做什么” .

# cocoa - 从文件加载图像 - 保存在核心数据中 - 显示带有绑定的图像

> ID：14424732
> 
> 赞同：0
> 
> 时间：2013-01-20T12:51:59.360
> 
> 标签：cocoa, core-data, nsdata, cocoa-bindings

我想从磁盘加载图像并将它们添加到核心数据中。我有一个属性设置为`transformable`.

我想获得有关如何阅读图像然后将它们添加到实体的说明。稍后我想使用绑定在图像中显示图像。

我应该将文件读取为 NSData 吗？

边注，

我还有 JSON 中图像的 base64 数据。读取base64并将其添加到核心数据会更好吗？当我测试阅读和添加 base64 代码时，我的印象是它很慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:43:33.337

推荐的方法是将图像存储在文件系统中，并将文件名/部分路径存储在 Core Data 中。

原因是 big `BLOB`s（内部 SQLite 格式）会显着降低数据库速度。只有相对较小的图像（例如缩略图），Core Data 才能合理处理。

您对 Core Data “慢”的体验正是由于这种现象。因此，您的图像不足以存储在核心数据中。因此，您无需费心将 Core Data 存储的图像转换为`UIImage`. 你的方法`NSData`是正确的。

# php - 无法在php中获取下拉列表的选定值

> ID：14424733
> 
> 赞同：0
> 
> 时间：2013-01-20T12:52:01.507
> 
> 标签：php, jquery, html, ajax, smarty

有问题的下拉列表称为 subCategory ，它的内容是通过选择另一个下拉类别来填充的，该类别的 onchange 事件正在触发 ajax 请求。

问题是，即使子类别的内容按预期填充（可见）并且我可以看到它们并在子类别下拉列表中选择它们，但当我执行 php 帖子时，`<option value="subCategory1">Select a subcategory</option>`无论我是否都只能获取初始选项的值选择任何其他元素。

也许dom没有刷新，但我不确定..

`$_REQUEST`提交后直接的PHP print_r

```
Array ( [act] => additem  [category] => 200381 [subCategory] => subCategory ) 
```

HTML（已编辑）

```
<form id="additemform" action="add-item.php?act=additem" method="post" enctype='multipart/form-data'>
    <div id="section-category">
        <select id="category" class="category"  name="category">
            <option value="category1">Select a category</option>
            {html_options values=$cat_id_array  options=$cat_names_array selected=$smarty.session.additem_category} 
        </select>
        <p class="test" id="boxCity">
        <select id="subCategory"  class="subCategory" name="subCategory">
            <option value="subCategory1">Select a subcategory</option>
                {html_options  options=$smarty.session.subcategories selected=$smarty.session.additem_subcategory}
        </select>
        </p>
    </div>
    <!--/#section-category-->
    <div class="bottom-area">
        <input id="submit-addItem" type="button" value="Add my item" />
    </div>                    
</form> 
```

页面来源：

```
<div id="section-category">
 <select id="category" class="category"  name="category">
    <option value="category1">Select a category</option>
    <option value="200381" selected="selected">Antiques</option>
    <option value="200841" >Other cat</option>
</select>
<p class="test" id="boxCity">
<select id="subCategory"  class="subCategory" name="subCategory">
    <option value="subCategory1">Select a subcategory</option>
    <option value="23430118">Digital Art</option>
    <option value="6643435">Photographic Images</option>
</select>
</p>
</div><!--/#section-category--> 
```

查询

```
$(function () {
    //$("#subCategory").selectbox();
    $("#section-category #category").selectbox({
    onChange: function () {
        var id=$(this).val(); 
        var dataString = 'id='+ id;  

        $.ajax  
        ({  
        type: "POST",  
        url: "findsub.php",  
        data: dataString,  
        cache: false,  
        success: function(html)  
        {  
            //$("#subCategory").selectbox("detach")
            $("#subCategory").html(html);
        // $("#section-category #subCategory").selectbox();
        }  
    }); 

},
effect: "slide"
}); 

$('.subCategory').change(function() {
//NOTE I CAN SEE THE SELECTED VALUE OF THE SUBCATEGORY NORMALLY IN THIS ALERT   
    alert($(this).serialize());
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:29:00.007

这不起作用的原因是我有另一个选择框（更下方），其名称和第一个选项与子类别相同，PHP 正在采用这个值。

这现在有效，谢谢

# audio - 如何循环播放一首歌多次？

> ID：14424738
> 
> 赞同：0
> 
> 时间：2013-01-20T12:52:51.100
> 
> 标签：audio, unity3d

我想在关卡播放时播放特定歌曲，但到目前为止我只使用了`audio.PlayOneShot(soundClip)`. 如何多次播放一首歌曲直到级别发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:00:04.567

您必须确保音频源的循环设置为 true。这是您需要启用的音频源的复选框。

![在此处输入图像描述](../Images/16535e62d845c9882f63aa6ad2912461.png)

如果你然后简单地播放它，它应该循环播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:57:31.983

正如 Bart 指出的那样，您可以从 Inspector 更改音频源的循环属性，但您也可以从代码中进行更改。

```
// ON SCENE LOAD
audio.loop = true;
audio.PlayOneShot(soundClip);

// ON SCENE CHANGE
audio.loop = false;
audio.Stop();
Application.LoadLevel(0); // or whatever 
```

当你第一次加载一个关卡时，你播放剪辑并循环它，当你改变关卡时，你停止剪辑并禁用它循环（实际上没有必要）。

# c# - 如何以编程方式从属性中获取我的 Windows 8 应用程序名称？

> ID：14424740
> 
> 赞同：0
> 
> 时间：2013-01-20T12:53:30.560
> 
> 标签：c#, windows-8, windows-runtime, manifest, title

我需要将 Windows 8 应用程序名称添加到变量中，但我找不到执行此操作的方法。

我想从应用程序属性中获取标题（“ *TEMEL UYGULAMA* ”），如下截图所示：http: [//prntscr.com/psd6w](http://prntscr.com/psd6w)

或者，如果有人知道如何获取应用程序名称或标题，我可以使用它。我只需要获取应用程序名称或标题（在程序集中）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:04:52.163

从您的屏幕截图中，您似乎想要程序集标题。您可以通过执行以下操作在运行时获取程序集标题属性：

```
// Get current assembly
var thisAssembly = this.GetType().Assembly;

// Get title attribute (on .NET 4)
var titleAttribute = thisAssembly
        .GetCustomAttributes(typeof(AssemblyTitleAttribute), false)
        .Cast<AssemblyTitleAttribute>()
        .FirstOrDefault();

// Get title attribute (on .NET 4.5)
var titleAttribute = thisAssembly.GetCustomAttribute<AssemblyTitleAttribute>();

if (titleAttribute != null)
{
    var title = titleAttribute.Title;
    // Do something with title...
} 
```

但请记住，这**不是**应用程序名称，而是程序集名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T10:23:29.263

我使用这样的一些代码来获取我的*Windows Store App 程序集的*`Title` *属性*：

 *首先，您需要这些程序集：

```
using System.Reflection;
using System.Linq; 
```

...然后这样的代码应该可以工作（可能需要更多检查）：

```
// Get the assembly with Reflection:
Assembly assembly = typeof(App).GetTypeInfo().Assembly;

// Get the custom attribute informations:
var titleAttribute = assembly.CustomAttributes.Where(ca => ca.AttributeType == typeof(AssemblyTitleAttribute)).FirstOrDefault();

// Now get the string value contained in the constructor:
return titleAttribute.ConstructorArguments[0].Value.ToString(); 
```

希望这可以帮助...*

# sphinx - 自动 Sphinx 增量索引

> ID：14424741
> 
> 赞同：0
> 
> 时间：2013-01-20T12:53:30.687
> 
> 标签：sphinx

我正在寻找有关如何自动化索引的建议，如何记录已索引的行？一旦我解决了这个问题，我只需要使用 cron。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:39:53.580

主要文档有一个例子......

[http://sphinxsearch.com/docs/manual-2.0.6.html#delta-updates](http://sphinxsearch.com/docs/manual-2.0.6.html#delta-updates)

使用特殊的柜台...

# html - 如何仅在 div 内更改整个页面的默认滚动条

> ID：14424745
> 
> 赞同：0
> 
> 时间：2013-01-20T12:54:18.430
> 
> 标签：html, css, scrollbar

我正在尝试借助[教程更改网页的默认滚动条。](http://manos.malihu.gr/jquery-custom-content-scroller/)

问题是，我们放置在特定 div 标签中的内容的滚动条发生了变化，而不是整个页面的变化。例如，在这个 [演示](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/fluid_scrollbar_example.html)中，滚动条发生了变化，但整个页面没有变化。谁能帮我更改整个页面的滚动条，而只是更改特定的内容块

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:44:41.010

在大多数浏览器中，您无法更改浏览器滚动条。

元素上只能有一个自定义滚动条。

要解决此问题，您需要使用溢出。

```
html, body {
overflow:hidden;
} 
```

Thios 将禁用默认滚动条和行为。

然后，您可以在所有内容周围使用包装器元素并将 js 应用到它。

# jquery - jquery：添加代码以单击事件

> ID：14424747
> 
> 赞同：0
> 
> 时间：2013-01-20T12:54:20.717
> 
> 标签：jquery

我想保留按钮单击功能的参考，做我的事情，然后运行原始的单击功能。

我知道通常我可以在 document.ready 中做这些事情，例如：

```
 var originalOnClick = $("#myBtn").click;
    $("#myBtn").click = function() {
      // do my staff here, and only then call the original:
      originalOnClick();
    } 
```

（如有错误请更正此代码！）

但是，我有一个特殊情况。在我的页面 onLoad 函数中，有异步 ajax 调用。所以在 document.ready 上调用的函数实际上是在 ajax 代码完成之前调用的。

调用 click() 或 onclick() 时有没有办法改变点击事件？我的意思是，是否有一个事件在点击事件之前\之后立即被调用？

或者我必须要求用户单击一个（我可以看到此页面已加载）按钮，然后我才能做我的员工？

编辑 1： ajax 代码在包含的脚本中。我无法改变它。

编辑 2：可能的解决方案：隐藏原始按钮，但使用其事件：

HTML：

```
 <div class="object1" style="display: none;" >original button.</div>
 <div class="object2">my button.</div> 
```

JS：

```
function doMyStuff() {
    alert(' doMyStuff .');
}

$(document).ready(function(){

  $('.object1').click(function(){
     alert('original staff. ');        
  });  // actually, this is just a test code. In my project, I cannot edit this function

  $('.object2').click(function() {
   doMyStuff();
    $('.object1').click();      
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:05:21.477

您可以有一个单击事件，然后将其自身作为事件处理程序移除，然后创建一个新的事件处理程序：

```
function doNormalStuffWithClick() {
}

//First click
$('#myBtn').click(function() {
    // switch off this event handler
    $(this).off('click');
    // do stuff with first click
    // ....
    doNormalStuffWithClick();

    // Set up handler for subsequent clicks
    $("#myBtn").click(function() {
      doNormalStuffWithClick();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:09:00.840

如果在您的 AJAX 请求完成之前绑定代码是一个问题，您可以调用它`ajaxSuccess`：

```
$(document).ajaxSuccess(function () {
    // do stuff
}); 
```

如果您想在所有 AJAX 请求完成后做某事，您可以检查您可以在每个请求开始时设置的变量。您甚至可以尝试使用`ajaxStart`来更改当前请求的数量，然后再将其签入`ajaxSuccess`

```
$(document).ajaxStart(function () {
    // do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:03:18.517

听起来您想阻止用户在 ajax 功能完成之前单击您的按钮。有几种方法可以做到这一点。最简单的方法如下所示：

```
var ajaxCount = 0;

$.ajax('some/url', function(res){
    ajaxCount++
    // code here
});

$.ajax('some/url', function(res){
    ajaxCount++
    // code here
});

$('#myBtn').click(function(e){
    if(ajaxCount != 2) return false;

    // code here
}); 
```

在这种形式中，您只需检查以确保两个 ajax 函数都已触发。

# perl - 如何测试 Perl 字符串是否包含非负数？

> ID：14424749
> 
> 赞同：0
> 
> 时间：2013-01-20T12:54:32.487
> 
> 标签：perl

我需要检测用户输入的值是否包含正数、非零数。输入字段代表产品数量，并且必须大于零，并且不包含字母或非数字字符。IOW，输入必须只包含这些字符：0123456789 但是当然，零本身是不可接受的。这是我使用代码的方式：

```
 if( $fields{'quantity'} =~ [this is where I am unsure]  )
  {
    $errors .= "Please enter a whole number for the quantity.";
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:59:29.683

请记住，像这样`1E4`的字符串也是数字，因此并非每个数字都必须`[0-9]`只包含。

提供的`looks_like_number`函数[`Scalar::Util`](https://metacpan.org/module/Scalar%3a%3aUtil)是检查变量是否为数字的正确方法。

```
use Scalar::Util 'looks_like_number';

if ( not looks_like_number( $fields{quantity} ) or $fields{quantity} <= 0 ) {

    warn "Please enter a whole number for the quantity";
} 
```

同样的事情更简洁：

```
warn "Please enter a whole number for the quantity"
  unless looks_like_number( $fields{quantity} )
         && $fields{quantity} > 0; 
```

请注意，像`Nan`,`Inf`和之类的字符串`Infinity`也[被视为 numeric](http://perldoc.perl.org/perlapi.html)，因此您可能还需要考虑将这些字符串剔除：

```
warn "Please enter a whole number for the quantity"
  unless looks_like_number( $fields{quantity} )
         && $fields{quantity} !~ /Inf|NaN/i
         && $fields{quantity} > 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T13:44:43.460

There really is no need to allow for exotics like `1E4` in the input: just make them type a string of digits.

Also, checking for the truth of the value entered will weed out `undef`, zero, and the empty string, so this will work fine. It checks that the input is defined, non-empty, non-zero, and contains no non-numeric characters.

```
unless ($fields{quantity} and $fields{quantity} !~ /\D/) {
  $errors .= "Please enter a whole number for the quantity.";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T13:00:18.227

我相信使用`looks_like_number`from [Scalar::Util](http://cpan.me/Scalar%3a%3aUtil)更安全，正如@Zaid 指出的答案，但这里有一个正则表达式版本：

```
if (not defined $fields{'quantity'}) or $fields{'quantity'} !~ /^[0-9]+$/ or $fields{'quantity'} <= 0) {
    $errors .= "Please enter a whole number for the quantity.";
} 
```

# sql-server - 使用批处理文件尝试静默安装 SQL Server

> ID：14424755
> 
> 赞同：0
> 
> 时间：2013-01-20T12:55:19.983
> 
> 标签：sql-server

我已将以下语句保存在批处理文件中以静默安装 SQL Server Express。

```
E:\UnInstall\SQLServer\sqlexpr.exe/Q/SAPWD="testpwd123"/security=SQL 
```

当我运行批处理文件时，我收到错误

> *该系统找不到指定的路径。*

当我`sqlexpr.exe`在给定的文件夹中时 ( `E:\uninsall\SQLServer`)

请问有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:52:11.383

在文件名和参数之间放一个空格`/Q`：

```
E:\UnInstall\SQLServer\sqlexpr.exe /Q /SAPWD="testpwd123" /security=SQL 
```

# c# - 嵌套画布上用户控件中的操作

> ID：14424756
> 
> 赞同：0
> 
> 时间：2013-01-20T12:55:20.887
> 
> 标签：c#, wpf

我正在尝试在结构如下的用户控件中捕获画布上的操作：

```
<UserControl IsManipulationEnabled="true">    
    <Canvas x:Name="CanvasContainer" Width="1500" Height="780">
        <ZoomableCanvas ManipulationStarting="ShareSwarmCanvas_OnManipulationStarting" ApplyTransform="false" x:Name="ShareSwarmCanvas" Width="1500" Height="780" MinWidth="1500" MinHeight="780" />
    </Canvas>
</UserControl> 
```

如果我将“ManipulationStarting”事件添加到控件并对其进行处理，它会很好地捕获并将 UserControl 作为发送者传递。但是，即使我在嵌套画布上设置了“IsManipulationEnabled=true”，我也无法在嵌套画布上进行捕捉。我知道路由事件会冒泡直到处理完毕，我正在处理它。不是堆积问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:58:18.893

到头来还是一如既往的简单。将背景属性添加到`UIElement`.

# api - GWAN 加密

> ID：14424761
> 
> 赞同：0
> 
> 时间：2013-01-20T12:55:37.860
> 
> 标签：api, encryption, aes, g-wan

任何人都可以告诉我为什么我对这段 testkode 有问题，GWAN 在被调用时会崩溃。

gwan API 帮助：void aes_init(aes_t *ctx, u32 mode, u8 *key, u32 keylen);

我的测试代码：

```
aes_t *testaes = 0;
u32 ed = 0;  
u32 keylen = 128;
u8 *testkey = 0;
testkey = (u8*)strdup("B00DDF9D93E199EFEAE967805E0A5228");
aes_init( testaes, ed, testkey , keylen ); 
```

我真的很讨厌仅仅因为我不理解已经包含的内容而实现另一个加密库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T14:44:33.887

您的 aes_t testaes 是一个指向 null 的指针。

正确的调用应该是：

```
aes_t ctx;
u32   mode = 0; // decrypt
u32   keylen = 128;
u8   *testkey = (u8 *)strdup("B00DDF9D93E199EFEAE967805E0A5228");
aes_init(&ctx, mode, testkey, keylen); 
```

# shell - 在 bash 中在 debian 中创建存档文件，无需安装软件

> ID：14424762
> 
> 赞同：2
> 
> 时间：2013-01-20T12:55:41.590
> 
> 标签：shell, zip, debian, archive

我想在 debian 6.0 中压缩一个文件而不安装任何额外的工具（即 apt-get zip）。

谁能告诉我这是否可行，如果可以，shell / bash 中的命令是什么。

我找到的所有教程都告诉我安装额外的软件，但我确信 Debian 必须捆绑某种归档工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T12:59:13.923

几乎每个新发行版都包含 tar。利用：

```
tar cvzf filea fileb filec 
```

这将创建 tar.gzip 存档。如果你只想要arch.tar，从参数中删除*z 。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:02:00.683

你可以使用 zip 或 tar 这个

```
zip -r filename.zip folderName
tar -czvf filename.tar.gz folderName 
```

# c++ - 为什么作者在包装类的析构函数中创建这个 boost::intrusive_ptr 的新实例？

> ID：14424764
> 
> 赞同：1
> 
> 时间：2013-01-20T12:55:54.367
> 
> 标签：c++, boost, com

我读过[一篇关于使用 boost::intrusive_ptr 管理 COM 对象](http://code-freeze.blogspot.hu/2012/02/using-intrusiveptr-with-com.html)的文章。作者展示了一个包装类，它负责为通常的 COM 语义调整智能指针。这是课程：

```
template <typename T>
class WrapPtr
{
public:
    WrapPtr(boost::intrusive_ptr<T>& ref)
    : m_ref(ref), m_ptr(0)
    {
    }

    ~WrapPtr()
    {
        // The second parameter indicates that the reference count should not be incremented
        m_ref = boost::intrusive_ptr(m_ptr, false);
    }

    operator T**()
    {
        return &m_ptr;
    }

    operator void**()
    {
        // Some COM functions ask for a pointer to void pointer, such as QueryInterface
        return reinterpret_cast<void**>(&m_ptr);
    }

private:
    T* m_ptr;
    boost::intrusive_ptr<T> m_ref;
};

template <typename T>
WrapPtr<T> AttachPtr(boost::intrusive_ptr<T>& ref)
{
    return WrapPtr<T>(ref);
} 
```

我不明白的是析构函数。它将丢弃当前的 m_ref 对象（这`Release`当然会导致调用），但随后他分配了一个从 m_ptr 成员构造的新 intrusive_ptr。我不明白为什么在析构函数中需要这样做，因为 Wrapper 类持有 intrusive_ptr 的副本，而不是对它的引用。如果被调用者改变了指向的对象，那么这个改变在析构函数离开后就会丢失。这是这里的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:32:49.580

在我曾经见过的一个类似的“安全地址”类中，该类有一个 intrusive_ptr 引用 ( `intrusive_ptr<T>&`)，而不是一个实际的对象 ( `intrusive_ptr<T>`)。您发布的课程实际上不会影响客户端的 intrusive_ptr。所以看起来代码只是有问题：它应该包含对客户端 intrusive_ptr 的引用，而不是单独的 intrusive_ptr 对象：

```
template <typename T>
class WrapPtr
{
private:
    T* m_ptr;
    boost::intrusive_ptr<T>& m_ref;

    ...
}; 
```

**编辑：**我忘了回答你的实际问题:)

通过上面的修复，析构函数的作用变得更加清晰：它将客户端的 intrusive_ptr 设置为保存通过调用**operator T**设置的指针****或**运算符 void*** ******并将其传递给“getter”方法（例如 QueryInterface）。*

# visual-c++ - 如何在 VISUAL C++ 中创建自己的数据类型变量

> ID：14424765
> 
> 赞同：-1
> 
> 时间：2013-01-20T12:55:55.240
> 
> 标签：visual-c++, binary

我想创建我自己的仅包含两个值 0 和 1 的变量。我想创建仅包含两个数字 0 和 1 的变量，它将等于 2 位，一位代表 1，一位代表 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:59:30.790

我建议您使用`bool`布尔值。

要强制编译器仅使用固定数量的位，请使用位域：

```
struct onebit { int data: 1 }; 
```

但是，这很可能仍需要内存中的一个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:18:20.200

尽管您可以`bool`在结构中使用位字段，但可以使用枚举（仅限制 2 个值）。但是你不能限制这种类型的内存使用。它仍然需要程序堆栈（或堆）上的至少 1 个字节。

所以，如果你有：

```
struct OneBit
{
   short OnOrOff : 1;
}; 
```

的大小`OneBit`仍然是 1 字节（最小！）。

# c++ - 四个旋转顶点之间的命中测试

> ID：14424768
> 
> 赞同：0
> 
> 时间：2013-01-20T12:56:09.653
> 
> 标签：c++, algorithm, opengl, 3d, openframeworks

我的程序中有一个简单的矩形，我必须在上面进行命中测试。我正在使用 openFrameworks，但我认为这里的问题也与 OpenGL 主题有关。

```
public class Shape : public class ofNode {
  Shape() {
    container.setFromCenter(getPosition(), 200,100);
    setPosition(ofVec3f(365, 50, 0)); //set the position of the node
    lookAt(ofVec3f(0,0,0));
  }

  virtual void draw() {
    ofRect(container); //the 200/100 rectangle will be drawn as per the container position and dimensions
  }
  ofVec3f getTopLeft() const {
    return getTopLeft() * ofNode::getGlobalTransformMatrix();
  }

  ofVec3f getTopRight() const {}    //similar - getTopRight from container and multiply
  ofVec3f getBottomLeft() const {}  //similar
  ofVec3f getBottomRight() const {} //similar

  bool hitTest(int tx, int ty) {
    // return true if mouse pointer is inside four vertices - hit test logic working fine
  }

  private:
    ofRectagle container;
}; 
```

我在这里遇到的问题是我在程序中旋转和平移形状：

```
void draw() {
  ofPushMatrix();
  ofTranslate(600,300,0);
  ofRotateY(rotate);
  shape->draw();

  ofCircle(shape->getTopLeft(), 10); //circle is drawn at the rectangle top left vertex on the screen but the coordinates while rotating and drawing do not change (as seen on cout)
  ofCircle(shape->getTopRight(), 10); //similar
  ofCircle(shape->getBottomLeft(), 10); //similar
  ofCircle(shape->getBottomRight(), 10); //similar
  ofPopmatrix();
} 
```

在上述`draw`函数中改变旋转时，点不会改变。因此，我没有合适的四个顶点来进行命中测试来确定鼠标是否在里面。如何获取屏幕中点的位置，这些点可以根据鼠标位置进行点击测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:36:06.773

如果您想测试鼠标指针是否在矩形的范围内，我建议您首先将它们转换为屏幕空间并在那里进行测试，按照我在[https://stackoverflow.com/a/中给您的总体思路14424267/524368](https://stackoverflow.com/a/14424267/524368)

我还要说，是时候停止使用 OpenGL 的内置矩阵操作函数了。*使用它们绝对没有任何好处！*有些人认为他们会被 GPU 加速，但事实并非如此。一旦您在程序中的其他点需要这些矩阵，为此滥用 OpenGL 是不切实际的。OpenGL 毕竟不是一个数学库。在后来的版本中，整个矩阵堆栈已从 OpenGL 中删除——很好摆脱。

[OpenFrameworks 带有一个功能齐全的矩阵数学库](http://www.openframeworks.cc/documentation/math/ofMatrix4x4.html)。我强烈建议你使用*它*。`glLoadMatrix`您可以使用（固定函数管道）或`glUniformMatrix`（着色器管道）向 OpenGL 提供生成的矩阵。

您可以使用它来实现我在其他答案中概述的投影功能。

要测试一个点是否位于边定义的边界内，您可以使用一个称为“半边”的概念。假设你的边缘形成一个[星域](https://en.wikipedia.org/wiki/Star_domain)循环。然后，对于循环中的每条边，您都取该点与边的叉积。如果该点在环定义的形状内，则所有叉积将指向同一方向。共面四边形（即投影到屏幕空间中的四边形）总是形成星域。

# php - sql过滤表数据

> ID：14424769
> 
> 赞同：0
> 
> 时间：2013-01-20T12:56:30.730
> 
> 标签：php, sql, filter

我有一个超过 10 列的表。我可以使用`sql`以下命令过滤数据：

```
mysql_select_db("mydb", $con);

$sql="SELECT * FROM files WHERE PUB LIKE '".$PUB."' AND
ID LIKE '".$ID."' AND PG_NO LIKE '%".$PG_NO."%' AND
SECTION LIKE '".$SECTION."' AND EDITION LIKE '%".$EDITION."%' AND
COLOR LIKE '".$COLOR."' AND REVISION LIKE '".$REVISION."'"; 
```

问题是我必须填写搜索/过滤查询的每个字段。我有时想使用所有字段和其他一些字段。

有什么方法可以只使用 1 个或 2 个过滤条件进行过滤，其余过滤器留空以显示所有相应的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:11:26.780

在调用 SQL 语句之前添加它

```
if(isset($PUB)){}
else{
    $PUB = "%";
    }
if(isset($ID)){}
else{
    $ID = "%";
    }   
if(isset($SECTION)){}
else{
    $SECTION = "%";
    }
if(isset($EDITION)){}
else{
    $EDITION = "%";
    }
if(isset($COLOR)){}
else{
    $COLOR = "%";
    }
if(isset($REVISION)){}
else{
    $REVISION = "%";
    } 
```

如果没有选择任何选项，我们实际上要做的是给出所有标准通配符。

# c++ - 为可变数量的内核编写多线程程序

> ID：14424770
> 
> 赞同：0
> 
> 时间：2013-01-20T12:56:31.137
> 
> 标签：c++, multithreading, visual-c++

我正在编写一个程序，其中有 4 个线程的范围。我正在使用**VC++ 6.0**并且不想只使用 VC++ 的任何库。（按规则）应根据内核数确定最佳线程数。

**如何编写基于不同内核数创建不同线程数的代码？？？**

我想按照下表

```
Cores | Threads
---------------
   1  |  2 
   2  |  3
   3+ |  4 
```

有 1 个 GUI 和 3 个工作线程。所有工作线程都使用循环缓冲区。我正在考虑实现 3 个工作线程，如下所示。

1.  从文件中读取 2\. 处理文件 3\. 处理后创建一个新文件。

对于每个单个输入文件，所有这 3 个步骤都是按顺序完成的。

将有大量文件需要处理（1000+）

我知道如何检测核心。也可以有 if then else 方式。但是，按照“if then else”的方式管理代码似乎将是一项艰巨的任务。

在这种情况下是否有任何标准的方法来管理代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:12:21.083

您可以使用[std::hardware_concurrency](http://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency)：

```
#include <iostream>
#include <thread>

int main() {

  std::cout << "Number of available cores on this system (hint): " 
            << std::thread::hardware_concurrency() << "\n";

} 
```

然后启动适当数量的[std::threads](http://en.cppreference.com/w/cpp/thread/thread)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:06:54.427

目前，让我们忽略 GUI 线程，因为它总是一样的。

对于工作线程，您基本上是在创建与核心相同数量的线程，最多三个，因此您需要以下内容：

```
HANDLE worker_threads[3];
int num_threads = min(num_cores, 3);

for (int i=0; i<num_threads; i++)
    worker_threads[i] = CreateThread(...); 
```

现在，关于如何使用这些线程：简短的回答是我*不会*像你在问题中描述的那样去做。采取三个需要按顺序执行的步骤，并在线程之间分解它们是没有意义的。事实上，我完全会避免将线程专用于特定类型的任务。

相反，我会保持线程通用，因此每个线程都可以执行这三个任务中的任何一个。使用要执行的任务队列。线程只是从队列中检索任务并执行它们。如果该任务导致要执行另一个任务，则该任务将与其余任务一起放回队列中。

由于您在 C++ 中执行此操作，因此一种明显的实现方法是为所有任务创建一个基类：

```
class Task {
public:
    virtual int operator()() = 0;
}; 
```

然后让你的三种不同的任务类型从中派生出来。然后，您可能想要创建一个小的包装类来掩盖您正在处理指针以保持代码简单明了的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:12:51.440

由于问题不是很具体，因此很难猜测您需要什么。

一般来说，您可以创建`workers`执行某项工作的程序并通知您（通过回调或其他方式）结果。

`worker`然后，每次你需要做一些事情时，你就开始一个新的。可能有一个最大数量，`workers`具体取决于内核的数量。有可能以某种方式将您想要执行的任务存储在队列中并将它们交给下一个 free `worker`。

如果你能以某种方式描述你想做什么（也许作为一个简化的例子），它可能会更好地帮助你。也许有可能向您展示如何使工人设计适合您的目的。

# ruby-on-rails - Rails: :before_return?

> ID：14424773
> 
> 赞同：1
> 
> 时间：2013-01-20T12:56:58.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

以前可能已经问过这个问题，但我想知道是否有一种机制可以让我反其道而行之`:before_save`？

例如

```
class MyObject < ActiveRecord::Base

    before_return :split_tags

    def split_tags
        self.tags = self.tags.split(',')
    end

end 
```

我将 MyObject 的标签保存到数据库中，用逗号分隔。当从数据库中请求返回 MyObject 时，我希望标签成为一个数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T12:59:24.660

只需更改吸气剂：

```
def tags
  self["tags"] ? self["tags"].split(',') : []
end 
```

# android - 如何使用 Android 检索 Gmail 收件箱

> ID：14424778
> 
> 赞同：3
> 
> 时间：2013-01-20T12:58:13.567
> 
> 标签：android

我是`android`编程新手，我想检索`Gmail`收件箱。在浏览了许多页面后，我对如何检索它有了一些想法，编译时没有错误，但在通过模拟器执行时，突然应用程序关闭说。不幸的是，“App_name”已经停止。

我在这里粘贴我的代码，请让我知道问题出在哪里。

inbox.java 我想在其中获取我的收件箱。

```
import javax.mail.MessagingException;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TextView;

public class Inbox extends Activity {

    EmailManager emailManager;
    private String stmpHost = "smtp.gmail.com";
    private String mailServer = "imap.gmail.com";    
    public String urlServer = "gmail.com";
    public String username = "your username";
    public String password = "your password";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_inbox);

        emailManager=new EmailManager(username, password, urlServer, stmpHost, mailServer);
        try {
            emailManager.getInboxMails();           
            emailManager.close();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Intent intent = getIntent();
        String message = intent.getStringExtra(DatabaseConnector.EXTRA_MESSAGE);
        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);
        // Set the text view as the activity layout
        setContentView(textView);
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_inbox, menu);
        return true;
    }

}

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;
import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.Part;
import javax.mail.Session;
import javax.mail.Store;
//import javax.mail.Transport;
//import javax.mail.internet.InternetAddress;
//import javax.mail.internet.MimeMessage;
//
//import android.location.Address;
import android.util.Log;
//import android.widget.Toast;

public class EmailManager {
    private String stmpHost = "smtp.gmail.com";
    private String mailServer = "imap.gmail.com";
    private EmailAccount account;
    private Session smtpSession; 
    private Session imapSession; 

    private Folder inbox,sentMail;
    private Store store,sentstore;
      boolean isSet;
    public EmailManager(String username, String password, String urlServer, String stmpHost, String mailServer) {
        account = new EmailAccount(username, password, urlServer);
        this.stmpHost = stmpHost;
        this.mailServer = mailServer;
        initProtocol();
    }

    private void initProtocol() {
        EmailAuthenticator authenticator = new EmailAuthenticator(account);     
        Properties props1 = new Properties();  
        props1.setProperty("mail.transport.protocol", "smtps");  
        props1.setProperty("mail.host", stmpHost);  
        props1.put("mail.smtp.auth", "true");  
        props1.put("mail.smtp.port", "465");  
        props1.put("mail.smtp.socketFactory.port", "465");  
        props1.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");  
        props1.put("mail.smtp.socketFactory.fallback", "false");  
        props1.setProperty("mail.smtp.quitwait", "false");  
        smtpSession = Session.getDefaultInstance(props1, authenticator); 

        Properties props2 = new Properties();
        props2.setProperty("mail.store.protocol", "imaps");
        props2.setProperty("mail.imaps.host", mailServer);
        props2.setProperty("mail.imaps.port", "993");
        props2.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props2.setProperty("mail.imaps.socketFactory.fallback", "false");
        imapSession = Session.getInstance(props2);
    }   

    public void getInboxMails() throws MessagingException {
        store = imapSession.getStore("imaps");
        store.connect(mailServer, account.username, account.password);
        inbox = store.getFolder("Inbox");
        inbox.open(Folder.READ_ONLY);
        Message[] messages = inbox.getMessages();
//      List<Address>addresses=new ArrayList<Address>();

        for (int i = messages.length - 1; i >= 0; i--) 
        {

             Part p = messages[i]; 
            try {
                String subject = messages[i].getSubject();
                Log.v("subject","subject="+subject);
                String body=getText(p);
                Log.v("body","body="+body);
                javax.mail.Address[] address=messages[i].getFrom();
                String add=address.toString().trim();
                Log.v("address","address="+add);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        return ;
    }

    private boolean textIsHtml = false;

    /**
     * Return the primary text content of the message.
     */
    private String getText(Part p) throws
                MessagingException, IOException {
        if (p.isMimeType("text/*")) {
            String s = (String)p.getContent();
            textIsHtml = p.isMimeType("text/html");
            return s;
        }

        if (p.isMimeType("multipart/alternative")) {
            // prefer html text over plain text
            Multipart mp = (Multipart)p.getContent();
            String text = null;
            for (int i = 0; i < mp.getCount(); i++) {
                Part bp = mp.getBodyPart(i);
                if (bp.isMimeType("text/plain")) {
                    if (text == null)
                        text = getText(bp);
                    continue;
                } else if (bp.isMimeType("text/html")) {
                    String s = getText(bp);
                    if (s != null)
                        return s;
                } else {
                    return getText(bp);
                }
            }
            return text;
        } else if (p.isMimeType("multipart/*")) {
            Multipart mp = (Multipart)p.getContent();
            for (int i = 0; i < mp.getCount(); i++) {
                String s = getText(mp.getBodyPart(i));
                if (s != null)
                    return s;
            }
        }

        return null;
    }

    public void close() {
        //Close connection 
        try {
//          inbox.close(false);
//          store.close();
            sentMail.close(false);
            sentstore.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       
    }

}

package com.example.lomenttech;

import javax.mail.Authenticator;
import javax.mail.PasswordAuthentication;

public class EmailAuthenticator extends Authenticator   {
    private EmailAccount account;
    public EmailAuthenticator(EmailAccount account) {
        super();
        this.account = account;
    }
    protected PasswordAuthentication getPasswordAuthentication() {  
        return new PasswordAuthentication(account.emailAddress, account.password);  
    } 
}

package com.example.lomenttech;

public class EmailAccount {
    public String urlServer = "gmail.com";
    public String username = "meenashah.np";
    public String password = "your password";
    public String emailAddress;
    public EmailAccount(String username, String password, String urlServer) {
        this.username = username;
        this.password = password;
        this.urlServer = urlServer;
        this.emailAddress = username + "@" + urlServer;
    }

}

package com.example.lomenttech;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.SQLException;

import javax.sql.DataSource;

public class ByteArrayDataSource implements DataSource {   
    private byte[] data;   
    private String type;   

    public ByteArrayDataSource(byte[] data, String type) {   
        super();   
        this.data = data;   
        this.type = type;   
    }   
    public ByteArrayDataSource(byte[] data) {   
        super();   
        this.data = data;   
    }   
    public void setType(String type) {   
        this.type = type;   
    }   
    public String getContentType() {   
        if (type == null)   
            return "application/octet-stream";   
        else  
            return type;
    }   
    public InputStream getInputStream() throws IOException {   
        return new ByteArrayInputStream(data);   
    }   
    public String getName() {   
        return "ByteArrayDataSource";   
    }   
    public OutputStream getOutputStream() throws IOException {   
        throw new IOException("Not Supported");   
    }
    @Override
    public PrintWriter getLogWriter() throws SQLException {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public int getLoginTimeout() throws SQLException {
        // TODO Auto-generated method stub
        return 0;
    }
    @Override
    public void setLogWriter(PrintWriter arg0) throws SQLException {
        // TODO Auto-generated method stub

    }
    @Override
    public void setLoginTimeout(int arg0) throws SQLException {
        // TODO Auto-generated method stub

    }
    @Override
    public boolean isWrapperFor(Class<?> arg0) throws SQLException {
        // TODO Auto-generated method stub
        return false;
    }
    @Override
    public <T> T unwrap(Class<T> arg0) throws SQLException {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public Connection getConnection() throws SQLException {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public Connection getConnection(String arg0, String arg1)
            throws SQLException {
        // TODO Auto-generated method stub
        return null;
    }   
} 

These are the logcat errors:

01-22 19:54:23.027: E/AndroidRuntime(849): FATAL EXCEPTION: main
01-22 19:54:23.027: E/AndroidRuntime(849): java.lang.NoClassDefFoundError: javax.mail.Session
01-22 19:54:23.027: E/AndroidRuntime(849):  at com.example.lomenttech.EmailManager.getInboxMails(EmailManager.java:73)
01-22 19:54:23.027: E/AndroidRuntime(849):  at com.example.lomenttech.Inbox.onCreate(Inbox.java:37)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.Activity.performCreate(Activity.java:5104)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.os.Looper.loop(Looper.java:137)
01-22 19:54:23.027: E/AndroidRuntime(849):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-22 19:54:23.027: E/AndroidRuntime(849):  at java.lang.reflect.Method.invokeNative(Native Method)
01-22 19:54:23.027: E/AndroidRuntime(849):  at java.lang.reflect.Method.invoke(Method.java:511)
01-22 19:54:23.027: E/AndroidRuntime(849):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-22 19:54:23.027: E/AndroidRuntime(849):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-22 19:54:23.027: E/AndroidRuntime(849):  at dalvik.system.NativeStart.main(Native Method) 
```

# linux - 32位机器上64位进程的远程调试

> ID：14424786
> 
> 赞同：4
> 
> 时间：2013-01-20T12:59:22.040
> 
> 标签：linux, gcc, gdb, intel

我正在尝试从我的 32 位英特尔笔记本电脑在远程英特尔 64 位机器上调试（一个简单的 Hello World 应用程序，没有测试错误）。

我跑

```
gcc -g -o cexecute cexecute.c
gdbserver localhost:2345 cexecute 
```

在远程机器上。

在我将笔记本本地端口转发`2345`到同一个远程端口后，运行`gdb`并输入

```
target remote localhost:2345 
```

我得到：

```
GNU gdb (GDB) 7.5-ubuntu
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
(gdb) target remote localhost:2345
Remote debugging using localhost:2345
warning: A handler for the OS ABI "GNU/Linux" is not built into this configuration
of GDB.  Attempting to continue with the default i386:x86-64 settings.

warning: Architecture rejected target-supplied description
Remote register badly formatted: T0506:0000000000000000;07:e0dbffffff7f0000;10:c0b6ddf7ff7f0000;thread:p64bc.64bc;core:6;
here: 00000000;07:e0dbffffff7f0000;10:c0b6ddf7ff7f0000;thread:p64bc.64bc;core:6; 
```

我很困惑，因为我以前做过这个工作。建议执行的反向问题（来自 64 位机器的 32 位应用程序）也有类似的问题`set architecture`： [Remote debug error with GDB](https://stackoverflow.com/questions/697763/remote-debug-error-with-gdb)

我用各种论据尝试了这个，但没有成功。目标平台类型`i386:x86-64`似乎也是正确的。两台机器都运行 ubuntu linux。自从我上次成功运行 gdb 以来，我在两台机器上都安装了版本更新。缺陷在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:40:26.447

> 自从我上次成功运行 gdb 以来，我在两台机器上都安装了版本更新。缺陷在哪里？

这个缺陷一定是你的记忆：一个`i*86-linux-*`版本的 GDB 不能调试一个`x86-64`进程，你*必须*构建`gdb`一个交叉调试器（正如 Mats Petersson 已经建议的那样），或者从某个地方获得一个预构建的。

就像是：

```
./configure --target=x86_64-linux-gnu --host=i686-linux-gnu \
            --build=i686-linux-gnu CC=gcc AR=ar RANLIB=ranlib 
```

应该管用。

# fullscreen - avplayer全屏

> ID：14424791
> 
> 赞同：3
> 
> 时间：2013-01-20T12:59:48.337
> 
> 标签：fullscreen, avplayer, avasset

我有一个与 AVAsset 一起使用的 AVPlayer 来播放视频。

我添加了一些控件，例如播放、停止、前进等...

但是如何使用按钮切换到全屏？我不想使用 MPMoviePlayerController 因为我不知道如何同步开始时间。但是我怎样才能简单地“扩展”当前的 playerView 以使用 fullScreen？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-12T06:27:06.637

1.  如果 AvPlayer 与视图或窗口具有相同的框架

    *   要将 AVPlayer 设为全屏，您必须将窗口的总帧提供给 AVPlayer 层，而不是通过 pi/2 旋转视图。
2.  如果 AvPlayer 的视图或窗口框架较少

    *   当用户按下横向按钮时，在父协议上创建以将播放器的框架更改为窗口框架

    *   以 pi/2 旋转视图。

创建一种方法并使用以下代码。

```
-(void)enlarge
{
    if(!_isLandscapeMode)
    {
        [self.landscapeDelegate changeFrameForLandscapeMode:YES];
        [_landscapeMode setImage:[UIImage imageNamed:IMAGE_NAME_PORTRAIT_MODE] forState:UIControlStateNormal];
        _isLandscapeMode=YES;

        self.transform =  CGAffineTransformMakeRotation(M_PI_2);
    }
    else
    {
        [self.landscapeDelegate changeFrameForLandscapeMode:NO];
        _isLandscapeMode=NO;
        [_landscapeMode setImage:[UIImage imageNamed:IMAGE_NAME_LANDSCAPE_MODE] forState:UIControlStateNormal];
        self.transform =  CGAffineTransformMakeRotation(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-22T12:23:56.537

假设你有`UIViewController`一个 UIView 全屏

您需要使用 AVPlayerLayer

```
var player = AVPlayer(playerItem: AVPlayerItem(asset: asset))
var layer = AVPlayerLayer(player: player)
self.view.layer.addSublayer(layer)
layer.frame = CGRectMake(0,0,self.view.frame.size.width,self.view.frame.size.height) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-09T09:02:59.237

我遇到过同样的问题。我在我的代码中添加了以下几行，

```
 [playerLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill]; 
```

它现在将显示全屏。

# javascript - 过滤 - 多项选择 jquery javascript

> ID：14424797
> 
> 赞同：1
> 
> 时间：2013-01-20T13:00:48.773
> 
> 标签：javascript, jquery, html, sorting, filter

我正在尝试创建一个过滤脚本来帮助我搜索特定的东西。我对 javascript / jquery 不是很好，我找到了以下脚本并按照我喜欢的方式对其进行了更改。

一切正常，我可以选择白鸡，但问题是当我选择白色和黑色来搜索所有白色和黑色的动物时，它不起作用。

我做错了什么或者我可以改变什么来解决这个问题？

[http://jsfiddle.net/d6Zyr/2/](http://jsfiddle.net/d6Zyr/2/)

Javascript：

```
 $(function(){
  $('div.tags').delegate('input[type=checkbox]', 'change', function()
  {
var $lis = $('.results > li'),
$checked = $('input:checked');
if ($checked.length)
{
    var selector = $checked.map(function ()
    {
        return '.' + $(this).attr('rel');
    }).get().join('');

    $lis.hide().filter(selector).show().addClass("show");     
}
else
{
    $lis.show().removeClass("show");
}
});

}) 
```

html:

```
<div class="tags">
 <fieldset class="filter-grp">
 <label><input type="checkbox" rel="white" name="year" /> white </label><br>
 <label><input type="checkbox" rel="blue" name="year" /> blue </label><br>
<label><input type="checkbox" rel="yellow" name="year" /> yellow </label><br>
</fieldset>

<br>
<fieldset class="filter-grp">
<label><input type="checkbox" rel="horse" name="type"  /> horse</label><br>
<label><input type="checkbox" rel="chicken" name="type"  /> chicken</label><br>
<label><input type="checkbox" rel="cow" name="type"  /> cow</label><br>
</fieldset>
<br>

</div>

<ul class="results">
<li class="white cow">white cow</li>
<li class="white horse">white horse</li>
<li class="white chicken">white chicken</li>
<li class="black cow">white cow</li>
<li class="blue horse">white horse</li>
<li class="white chicken">white chicken</li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-26T12:34:10.510

更改为以下脚本会有所帮助。将 join 方法调用为 join('') ，这将有助于为多个类创建和案例。

`join()`. => 创建类，`.white,.horse`因为`,`默认添加。

`join('')`. => 会创建类，`.white.horse`我想你想要的。

```
 $(function(){
      $('div.tags').delegate('input[type=checkbox]', 'change', function()
      {
    var $lis = $('.results > li'),
    $checked = $('input:checked');
    if ($checked.length)
    {
        var selector = $checked.map(function ()
        {
            return '.' + $(this).attr('rel');
        }).get().join('');

        $lis.hide().filter(selector).show().addClass("show");     
    }
    else
    {
        $lis.show().removeClass("show");
    }
    }); 
```

# tomcat7 - 关于 tomcat bin 目录和为 tomcat 配置 eclispse 的 Dought

> ID：14424804
> 
> 赞同：0
> 
> 时间：2013-01-20T13:01:48.557
> 
> 标签：tomcat7, ubuntu-12.10

我已经在 Ubuntu 12.10 中安装了 tomcat7，但我遇到了 两个问题。 第一个是，当转到 tomcat 安装目录，即**/etc/tomcat**目录时，我没有找到**bin**目录。在哪儿？ 第二个是，在为 Tomcat7 配置 Eclipse IDE 时，我遵循 了这些步骤 1）转到**首选项** 2）在服务器选项卡上，我选择**运行时环境** 3）单击**添加**按钮，我选择了 **apache**，然后选择了**Apache Tomcatv7.0**然后我有点击下一步。 4）在那里我给了Tomcat安装目录，然后我得到如下错误：**`sudo apt-get install tomcat7`**

 ****************`/etc/tomcat7`**
**指定了未知版本的 Tomcat。**

所以，请帮我解决这些问题......**************

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:09:45.137

我遇到了同样的问题，唯一的错误是选择 /usr/share/tomcat7 文件夹而不是 /etc/tomcat7 文件夹，因为 bin 存在于 /usr/share/tomcat7 文件夹中。

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T07:45:48.047

我猜英语不是你的第一语言，它的怀疑而不是 dont :-)

在 Ubuntu 中，您必须在 Eclipse 中提供位置 /usr/share/tomcat7 才能使其工作。查找哪个目录的其他方法是运行以下代码

```
locate bin | grep tomcat7 
```

并找到tomcat7安装目录在哪里。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T02:54:18.073

你能做一个“哪个tomcat”并确保你在正确的位置寻找bin目录。如果您没有获得 bin 目录，那么您要么没有找到正确的位置，要么您的安装过程出现了一些严重的问题。尝试查看您的环境变量（CATALINA_HOME）。

在 Eclipse 中，我相信您失败了，因为它没有获取 bin 目录。一旦你通过了第一个问题，它肯定会帮助你回答第二个问题。

希望有帮助。****

# ios - 没有数据时如何处理 UISplitViewController？

> ID：14424807
> 
> 赞同：0
> 
> 时间：2013-01-20T13:02:11.890
> 
> 标签：ios, uisplitviewcontroller

对于没有数据的 UISplitViewController 的情况，是否有最佳实践实现？如果相关，我的应用程序使用 coredata 并附带一两个示例集，但显然，用户可能决定删除该数据，在这种情况下将有零数据。

具体来说，是否有保持 UIPopoverController 开放之类的标准？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:06:56.717

一个很好的（设计）观点是：

*   [为空状态设计](http://tympanus.net/codrops/2013/01/09/designing-for-the-empty-states/)

您可以在可能为空的视图中使用它来给用户一些关于如何添加新数据的微妙提示。

# c# - 在用户中获取最后一条消息的更短方法是什么

> ID：14424808
> 
> 赞同：3
> 
> 时间：2013-01-20T13:02:19.610
> 
> 标签：c#, entity-framework

我正在编写一个类似于 WhatsApp 的消息程序。

我想显示用户和他/她的朋友之间的最后一条消息。但要做到这一点，我会在它们之间获取全部消息并使用一些查询来查找最后一条消息。我认为我可以重写一个更好的方法。因为通过这种方式，我把所有的信息都记住了。如果我有一百万条消息，那不是一个好方法

```
 var myID = Convert.ToInt32(txtID.Text);
    var myMessages = db.MemberMessages
        .Where(m => m.MemberTo == myID || m.MemberFrom == myID)
        .Select(s => new
            {
                s.ID,
                s.Text,
                s.MemberFrom,
                s.MemberTo
            });

    List<int> messageIDs = myMessages
        .Where(s => s.MemberTo == myID).Select(s => s.MemberFrom).Distinct().ToList();

    List<int> messageIDs2 = myMessages
        .Where(s => s.MemberFrom == myID)
        .Select(s => s.MemberTo).Distinct().ToList();

    List<int> differentIDS = messageIDs2.Except(messageIDs).ToList();

    foreach (int item in differentIDS)
    {
        messageIDs.Add(item);
    }

    foreach (int userID in messageIDs)
    {
        var deger = myMessages
            .Where(m => 
                (m.MemberFrom == myID && m.MemberTo == userID) ||
                (m.MemberFrom == userID && m.MemberTo == myID))
                .OrderByDescending(m => m.ID).ThenByDescending(m => m.MemberFrom).First();

        if (deger.MemberFrom == myID)
            lstLastMessages.Items.Add(String.Format("From Me - To ID:{0}  -  Message: {1}", deger.MemberTo, deger.Text));
        else
            lstLastMessages.Items.Add(String.Format("From ID: {0} - To: Me -Message: {1}", deger.MemberFrom, deger.Text));
    } 
```

![](../Images/a5bf6b08fe00eef3b174d86d686a885f.png)

您可以看到用户和他/她的不同朋友之间的最后一条消息`ID`。是否可以用一个查询重写它？还是更短的方式？

寻求一些建议。

编辑： ![在此处输入图像描述](../Images/e40ba6c70ad5ff964e604b2daa797bee.png)

如您所见，我在用户中有一些记录。例如，我的 ID 是 1，我想查找我之前与用户交谈的最后一条消息。

```
memberfrom 1 （它的我） memberfromTo : 2 。消息：xxx
memberfrom 2 （它的我） memberfromTo : 1 。留言：yyy
memberfrom 1 （它的我） memberfromTo : 2 。留言：zzzz

```

如果你看上面，我想得到最后一条消息是`zzzz`. 但我想为每个发送最后一条消息的用户这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T13:32:33.650

只需按`MemberTo`和`MemberFrom`字段对消息进行分组，并从按以下顺序排序的每个组中获取最后一条消息`CreationTime`：

```
var query = from m in db.MemberMessages
            where m.MemberTo == id || m.MemberFrom == id
            group m by new { m.MemberTo, m.MemberFrom } into g
            select g.OrderByDescending(x => x.CreationTime).First(); 
```

这将返回来自用户和您正在寻找的用户的最后一条消息（因为组将具有不同的键）。

更新

```
var query = from m in db.MemberMessages
            let msgTo = m.MemberTo == id
            let msgFrom = m.MemberFrom == id 
            where msgTo || msgFrom
            group m by msgTo ? m.MemberFrom : m.MemberTo into g
            select g.OrderByDescending(x => x.CreationTime).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:30:39.157

如果您想要与时间相关的对话，只需添加

时间戳字段然后您可以使用`OrderByDescending(s => s.Timestamp).First()`

映射发件人表单/收件人之间的对话您可以在保存消息之前添加**ConversationID**字段，这可能比每次使用 Linq 设置操作更有效。

# mysql - 查看用户是否在线、性能的方法

> ID：14424809
> 
> 赞同：0
> 
> 时间：2013-01-20T13:02:20.800
> 
> 标签：mysql, performance

我正在开发一个用户系统，我想在其中查看用户是否在线。我考虑在我的用户表中创建一个额外的列，使用`last_action`. 这将在用户**每次**查看页面时更新。

这显然需要 MySQL 数据库在每次加载页面时更新用户行。这会是这样做的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:08:02.213

您可以使用 cookie 来解决这个问题。在您的数据库中，您似乎已经有一个`Time`（或类似的）字段。对饼干做同样的事情。然后，您可以将 cookie 的时间与当前的时间进行比较，如果差异足够大（例如 5、10 分钟），您也可以在数据库中对其进行编辑。

# javascript - 努力使用准确的替换 setInterval / setTimeout

> ID：14424811
> 
> 赞同：0
> 
> 时间：2013-01-20T13:02:44.070
> 
> 标签：javascript, settimeout, setinterval

我正在尝试使用超大 jquery 插件（[此处](https://github.com/buildinternet/supersized/blob/master/slideshow/js/supersized.3.2.7.js)）中底部的代码（来自[此处](https://gist.github.com/1d99b3cd81d610ac7351)）。这是因为我需要一个更准确的计时器，因为我正在同步图像和声音。

本质上，超大有以下几行：

```
vars.slideshow_interval = setInterval(base.nextSlide, base.options.slide_interval); 
```

和

```
clearInterval(vars.slideshow_interval); 
```

我需要做类似的事情：

```
vars.slideshow_interval = accurateInterval(base.nextSlide, base.options.slide_interval); 
```

和

```
vars.slideshow_interval.clear(); 
```

问题我的 javascript 技能有些有限，我什至不知道以下函数的术语/描述，我想它需要采用 base.accurateInterval = function(time fn).. 的形式而不是按原样包装因为我怀疑问题与在错误的上下文中使用 (this) 有关。

我尝试按原样使用代码，当我调用 clear() 时，我得到“不是函数错误”。

请问我怎样才能让它工作？任何指针，非常感谢。谢谢你。

```
(function () {
    window.accurateInterval = function (time, fn) {
        var cancel, nextAt, timeout, wrapper, _ref;
        nextAt = new Date().getTime() + time;
        timeout = null;
        if (typeof time === 'function') _ref = [time, fn], fn = _ref[0], time = _ref[1];
        wrapper = function () {
            nextAt += time;
            timeout = setTimeout(wrapper, nextAt - new Date().getTime());
            return fn();
        };

        cancel = function () {
            return clearTimeout(timeout);
        };

        timeout = setTimeout(wrapper, nextAt - new Date().getTime());
        return {
            cancel: cancel
        };
    };
}).call(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:44:31.217

# macros - Common Lisp 宏模式匹配

> ID：14424812
> 
> 赞同：2
> 
> 时间：2013-01-20T13:02:57.967
> 
> 标签：macros, common-lisp

长期以来一直在为家庭作业做一个宏，但我们完全卡住了，我的老师时间有限，而且截止日期远远超过了限制。这是我们最后一次尝试解决这个问题。

**说明如下：**

我们将编写一个宏匹配模式，将参数 expr 与多个参数 pattern_i 进行匹配。如果成功，body_i 将在评估期间使用 pattern_i 中的自由变量进行评估。

*   模式是一个 s 表达式

*   它必须完全匹配

*   不能使用符号引号

*   Expr 应该只被评估一次

    例子：

    ```
     * (match-pattern '((foo bar) foo baz)
            ((car . car)     `(:cons ,car ,car))
            ((one two three) `(:three ,one ,two ,three)))

       (:THREE (FOO BAR) FOO BAZ) 
    ```

**到目前为止，我们的策略是这样的：**

1

我们计划在宏中使用一个匹配函数来比较模式。（也许不完全正确，但你明白了）

```
 (defun match (sexpr1 sexpr2)
      (cond ((and (consp sexpr1) (consp sexpr2)) 
             (and (match (first sexpr1) (first sexpr2))
                  (match (rest sexpr1)  (rest sexpr2))))
            ((and (atom sexpr1) (atom sexpr2))
             t)
            (t nil))) 
```

2

我们想针对 expr 循环所有模式，并通过将它们传递给我们的 match 函数，我们将返回 true 或 nil。如果它是真的，我们将 expr 分配给模式的主体。

```
(defmacro match-pattern (sexpr &body body)
  (cond
    ((match sexpr (car (car body))) (print "sexpr shall match with body here"))
    ((null (cdr body)) nil)
    (t `(match-pattern sexpr ,@(cdr body))))) 
```

3

不知道匹配是如何工作的，我们尝试将#'mapcar 与匿名 lambda 函数结合使用，但没有比这更进一步。

这看起来是一种合理的方法吗？报价有很多问题。在描述的示例中，expr 上有一个引用，但正文中的模式中没有引用，这是为什么呢？为什么身体里有：三个和：缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:27:49.450

The common approach to this problem is following:

1.  Expand your matchers into a more elaborate intermediate representation, for example, a pattern and action pair `(('a b) b)` is translated into `(match-action V1 (match-cons (match-quote a) (match-cons (match-bind b) (match-nil))) (progn b))`.

2.  Implement a simpler macro `match-action`, which unrolls a tree of commands into a sequence of nested bindings and checks. Each failing check returns a special failure value. For example, `(match-action V1 (match-bind x) x)` is expanded into `(let ((x V1)) x)`, or `(match-action V1 (match-cons (match-bind a) (match-bind b)) (cons b a))` is expanded into `(if (listp V1) (let ((V2 (car V1)) (V3 (cdr V1)) (a V2) (b V3)) (cons b a)) match-failure)`. Note that `match-bind` command must check if its argument is already in the context, and in this case it should translate into a structural equality check.

3.  Now, implementing a `match` macro is trivial - introduce a new variable (with `gensym`), bind it to the value of your expression, and apply matchers in sequence unless a matcher returns something different from `match-failure`.

I hope it's sufficient for you to implement your own matcher. Note that this approach is extensible, you can add more complicated patterns, like ellipsis, function matchers, regexps, and so on.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:00:30.483

我记得回答了一个模式匹配问题，但是以一种实用的方式：[使用通配符比较列表](https://stackoverflow.com/a/13426505/800524)。以下答案保留了该答案的上下文。

你的宏可以做这样的事情：

1.  评估`expr`一次成变量；
2.  将每个`(pattern &body body)`子句扩展为调用`cmp`（或您的`match`），将结果保存在变量中，如果不是`nil`，则运行`body`.

例子：

```
(defmacro match-pattern (expr &rest clauses)
  (let ((expr-var (make-symbol (symbol-name '#:expr)))
        (bindings-var (make-symbol (symbol-name '#:bindings))))
    `(let ((,expr-var ,expr)
           (,bindings-var nil))
       (declare (ignorable ,expr-var))
       (cond ,@(mapcar #'(lambda (clause)
                           (destructuring-bind (pattern &body body)
                               clause
                             `((setf ,bindings-var (cmp ,expr-var ,pattern))
                               (let (,@(mapcar #'(lambda (var)
                                                   `(,var (cdr (assoc ',var ,bindings-var))))
                                               (pattern-vars pattern)))
                                 ,@body))))
                       clauses))))) 
```

鉴于此，您仍然需要：

*   定义`pattern-vars`；
*   调整`cmp`（或您的`match`）以返回[`alist`](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_a.htm#alist)变量绑定，而不是仅`t`在匹配模式中有变量时返回。

# mysql - 按日期分组 MYSQL 结果行

> ID：14424814
> 
> 赞同：0
> 
> 时间：2013-01-20T13:03:10.683
> 
> 标签：mysql, performance, group-by

我想按时间戳对从 MYSQL 数据库中获取的结果进行分组。时间戳以 格式存储在表中`2012-12-14 03:19:09`。我使用查询

```
SELECT
    HOUR(`timestamp`) AS `hour`,
    AVG(`somevalue`) AS `average`
FROM ...
GROUP BY
    HOUR(`timestamp`),
    DAY(`timestamp`),
    MONTH(`timestamp`),
    WEEK(`timestamp`),
    YEAR(`timestamp`)
ORDER BY ...
LIMIT 0, 24; 
```

这有效，并返回正确的行和值......

```
+------+-------+
| hour | value |
+------+-------+
| 13   | 21.16 | 
| 12   | 21.11 |
| 11   | 20.88 |
| 10   | 20.93 |
|  9   | 20.87 |
|  8   | 20.89 |
| ...  | ...   |
+------+-------+ 
```

...但速度极慢（表包含约 90k 行）。有人[建议](https://stackoverflow.com/a/14067251/1828051)我不要按每个日期实体分组，而是按`UNIX_TIMESTAMP(`timestamp`)/3600`. 不幸的是，这不会导致预期的结果，结果看起来像这样

```
+------+-------+
| hour | value |
+------+-------+
| 13   | 21.20 |
| 13   | 21.20 |
| 13   | 21.20 |
| 13   | 21.20 |
| 13   | 21.20 |
| ...  | ...   |
+------+-------+ 
```

有没有办法只通过一个 group 子句对它们进行分组（这将使其更快），但返回正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:47:32.463

而不是使用按日期和小时分组

```
SELECT
    HOUR(`timestamp`) AS `hour`,
    AVG(`somevalue`) AS `average`
FROM ...
GROUP BY
    DATE(`timestamp`),
    HOUR(`timestamp`),
ORDER BY ...
LIMIT 0, 24; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:11:04.443

1.  索引时间戳列。
2.  试试`GROUP BY DATE_FORMAT(timestamp,'%Y%m%d%H')`。

请注意，我自己并没有真正尝试过。

# scala - 如何在不关闭会话的情况下清空购物车内容？

> ID：14424816
> 
> 赞同：1
> 
> 时间：2013-01-20T13:03:18.140
> 
> 标签：scala, lift, lift-json

我正在关注 Lift 网站上的教程：http: [//simply.liftweb.net/index-6.3.html#prev](http://simply.liftweb.net/index-6.3.html#prev)但我自己无法弄清楚如何在不关闭会话的情况下清空购物车内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:44:23.573

您可以将以下方法添加到类中，该方法将通过将 的内容替换为空`Cart`来清除购物车。`ValueCell``Vector`

```
def removeAllItems() = contents.atomicUpdate(v => Vector.empty) 
```

Regis Jean-Gilles 的评论也将起作用，但使用该`atomicUpdate`方法将处理同步。

# c - 如何更改此 C 代码以预取一些数据？

> ID：14424818
> 
> 赞同：0
> 
> 时间：2013-01-20T13:03:27.827
> 
> 标签：c, loops, matrix, openmp, prefetch

我做了一个检查矩阵效率的应用程序。我使用各种方法（例如更改循环、2/3 循环、openmp 等）。剩下一件事：我必须检查数据预取。

代码：

```
#define SIZE 5000

for(int i=0;i<SIZE;i++)
 for(int j=0;j<SIZE;j++)
   mul+=tab[i][j] 
```

通常单独处理`prefetch`数据（当我们在单行并递增时`j`），但并非总是如此（例如`tab[0][0]`从不`prefeched`或当我们转到下一行时（`loop i++ ,tab[i][0]`））。在我们计算它们之前，如何更改此代码以帮助`proc` `prefetch`来自`tab[0][0], tab[1][0],tab[2][0],tab[3][0]`等的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:02:47.530

您可以使用预取内置函数：

无效_m_prefetch（无效*）；

您希望在您所在的位置之前至少预取 128 个字节。您可能需要展开循环，以便它在每次预取之间完成正确的工作量，否则您将在实际的预取指令上浪费时钟周期。

但是，我怀疑处理器会自行完成不错的预取工作，因为您正在“直接”读取内存[假设选项卡是二维编译时数组，而不是运行时构建的数组]。

# javascript - Fancybox 使用 youtube api 打开空白页面

> ID：14424819
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:03:28.387
> 
> 标签：javascript, fancybox, youtube-api

当我放置“http://www.youtube.com/embed/WQNQU_EQy6I”之类的链接时，Fancybox 工作正常，但我从 youtube 频道获取视频，视频的链接类似于“http://www.youtube. com/watch?v=Neff9scaCCI&feature=youtube_gdata" 和 fancybox 无法使用这些链接。

请帮忙。

JS-

```
<script type="text/javascript">
            $(document).ready(function() {
                $(".various").fancybox({
                    maxWidth    : 800,
                    maxHeight   : 600,
                    fitToView   : false,
                    width       : '70%',
                    height      : '70%',
                    autoSize    : false,
                    closeClick  : false,
                    openEffect  : 'elastic',
                    closeEffect : 'none'
                });
            });
</script> 
```

HTML -

```
<a class="various fancybox.iframe" href="http://www.youtube.com/watch?v=Neff9scaCCI&feature=youtube_gdata">Video</a> 
```

**解决方案：** 我用它来解决问题。$vd 将视频的 url 存储在其中，通过此代码，我将该链接转换为工作链接。

```
$vd = preg_replace('/.+(\?|&)v=([a-zA-Z0-9]+).*/', 'http://youtube.com/embed/$2', $vd); 
```

然后用了

```
<a class="various fancybox.iframe" href="<?php echo $vd;?>">Video</a> 
```

希望它可以帮助像我这样的人寻找解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:34:50.203

您需要使用 fancybox 媒体功能。尝试将您的 JS 更改为：

```
 $(document).ready(function() {
    $('.fancybox-media').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        helpers : {
            media : {}
        }
    });
}); 
```

并尝试将链接更改为：

`<a class="fancybox-media" href="http://www.youtube.com/watch?v=opj24KnzrWo">Video</a>`

欲了解更多信息，请查看fancybox 网站： http: [//www.fancyapps.com/fancybox/#examples](http://www.fancyapps.com/fancybox/#examples)

我希望这个对你有用！

# token - 散列的 uuid4 是一个好的 csrf 令牌吗？

> ID：14424823
> 
> 赞同：2
> 
> 时间：2013-01-20T13:04:13.973
> 
> 标签：token, csrf, uuid, entropy

这是一个好的 csrf 令牌吗？它是否有足够的熵，或者是否有一些容易猜到并且可以减少熵的部分，比如请求的时间？

一个示例 python 实现将 b

```
token = hashlib.sha256(str(uuid.uuid4())).hexdigest() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T03:06:33.467

uuid v4 有 122 个随机位（可能有 128 个），所以，是的，它作为 CSRF 令牌应该没问题。

（顺便说一句，散列这个有什么作用吗？除了随机排列随机位之外，它并没有做太多事情。）

# lua - 为什么 ("bar"):find("(foo)?bar") 返回 nil？

> ID：14424825
> 
> 赞同：1
> 
> 时间：2013-01-20T13:04:34.940
> 
> 标签：lua, lua-patterns

不应该`("bar"):find("(foo)?bar")`回来`1, 3`吗？

`print(("bar"):find("(foo)*bar"))`也`print(("bar"):find("(foo)-bar"))`不会工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T13:22:15.017

这是因为 Lua 模式中的括号（很不幸）不能用作分组结构，只能用作捕获组的分隔符。当你写一个 pattern`(foo)?bar`时，Lua 将它解释为“match `f`, `o`, `o`, `?`, , `b`, `a`, `r`, capture `foo`in a group”。这是[一个演示的链接](http://ideone.com/IMBbEW)。不幸的是，您可以获得的最接近您想要的行为的是`f?o?o?bar`，这当然也可以匹配`fbar`和`oobar`，以及其他错误捕获。

这段代码

```
print(("bar"):find("f?o?o?bar")) 
```

[返回 1 3](http://ideone.com/TBLtgw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:08:49.930

您正在搜索 string`"(foo)bar"`或`"(foobar"`from string `"bar"`，问号`?`仅指向最后一个字符。

如果您希望它指向整个单词，请`[]`改用：`("bar"):find("[foo]?bar")`

# big-o - 用于简单验证的大 O 表示法

> ID：14424827
> 
> 赞同：2
> 
> 时间：2013-01-20T13:05:03.227
> 
> 标签：big-o, notation

我需要推导出这个验证程序的大 O 符号。它的工作是接受这种类型的产品条目：'jacket,8,12,18,16,6'，对其进行验证，对尺寸进行排序，按字母顺序将条目排序到列表中，并在每个条目之后打印新列表。

Big-O 表示法基于最坏情况，即程序执行特定输入所需的时间最长。采用 'parseData' 方法，最坏的情况是输入完全有效，因此不传递任何异常并执行所有方法。产品名称有 15 个字符，输入 5 种尺寸。在这种情况下，此方法和以下其他较小的验证方法将始终花费相同的时间来执行此最坏情况事件。如评论中所示，这给了他们 O(1) 的复杂性。

主要是有；- 验证 - O(n) - 排序 - O(nlogn) - 打印 - O(n^2)

这会归结为O（n ^ 2）吗？还是取决于所考虑的条目数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:16:32.453

对于渐近分析，它会归结为 O(n^2)，因为它的增长速度比 O(n logn) 和 O(n) 快得多。但请注意，这只是一个渐近上限，这意味着它可能不是很紧，正如你所说，它是最坏的情况，而不是平均或预期的情况。

# ruby-on-rails-3 - 单表继承情况的批量分配错误

> ID：14424828
> 
> 赞同：0
> 
> 时间：2013-01-20T13:05:12.803
> 
> 标签：ruby-on-rails-3, inheritance

我正在设置一个联系人模块，基本上是在设置它，以便联系人可以拥有无​​限的联系方式，即 x 电话号码、电子邮件、地址等。我设置了两个不同的表，其中一个用于联系人基本详细信息和另一个只保留联系方式，例如：

```
Contact
NAME|DETAILS|COUNTRY ....

ContactDetails
TYPE|LOCATION|DETAILS
enter code here 
```

其中类型可以是电话、传真、电子邮件，位置可以是“工作”、“官方”、“直接”，详细信息是实际号码或电子邮件。

我最初设置了一个contact_details 模型，后来考虑为每个contact_detail 设置不同的模型，例如称为电话、传真和电子邮件的模型，每个模型都将从contact_details 继承。

这是我目前的模型：

```
class Contact < ActiveRecord::Base
  acts_as_citier
  attr_accessible :about, :name, :type

  has_many :contact_details

  accepts_nested_attributes_for :contact_details

end

class Company < Contact
  attr_accessible :company_name, :description, :timezone, :website, :twenty_four_ops, :type
  acts_as_citier
  before_save :set_parent_attributes
####  
end

# this is the contact etail which corresponds to either a phone, email or fax etc
class ContactDetail < ActiveRecord::Base
  attr_accessible :contact_id, :type, :details, :location

  belongs_to :contact
end

The phone and fax classes

class Phone < ContactDetail

end

class Fax < ContactDetail

end 
```

[我使用railscasts](http://railscasts.com/episodes/197-nested-model-form-part-2?view=asciicast)上的嵌套表单教程设置了一个表单，但基本上我的表单是用于输入 COMPANY 对象，它是 Contact 类的子对象。联系方式与联系方式相关联，因此我假设如果联系人有联系方式，那么作为联系方式的子公司也应该有联系方式。我的表单设置得很好，但是当我提交表单时，我得到了一个`Can't mass-assign protected attributes: contact_details_attributes error.`

我不太确定这里出了什么问题 - 我已经设置了 attributes_accessible，因为它们应该在上面的代码中 - 这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:35:09.240

`type`是 activerecord 中的保留属性。您仍然可以通过设置使用它

```
self.inheritance_column = :kind # or provide another name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:23:28.847

您是否尝试过，在公司类中接受_nested_attributes？或者将contact_details_attributes 添加到基类的attr_accessible 列表中

# php - 无法在while循环之外调用数组？

> ID：14424829
> 
> 赞同：0
> 
> 时间：2013-01-20T13:05:15.877
> 
> 标签：php, arrays, scope

如何设置`$sections`使其在 while 循环之外工作？

```
while($sections = mysql_fetch_array($query)) {
        $section_name = $sections['location'];
        $sections[$section_name] = $sections['content'];
        echo $sections['main'];
    } 
```

`$sections['main']`在这里正确回显，但是当我在代码中（在while循环之外）进一步运行它时，它什么也不显示。我认为这与范围有关？

`$sections = array();`我在循环之前和`$sections = '';`之前都试过了。两者都解决不了问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:06:43.380

最后一次迭代将使 $sections 变量为空，从而中断了 while 循环。

# windows-installer - Microsoft 可再发行下载链接的可靠性如何？

> ID：14424834
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:05:31.320
> 
> 标签：windows-installer, setup-deployment, prerequisites, redistributable

Microsoft 可再发行组件的下载链接的可靠性如何？

在为安装包编码先决条件时是否应该使用它们？

例如，在为安装包做先决条件时，我应该使用此页面上的下载链接吗？

[http://www.microsoft.com/en-au/download/details.aspx?id=13255](http://www.microsoft.com/en-au/download/details.aspx?id=13255)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:01:47.400

FWIW，这个没有简单的答案。我向客户解释它，让他们在自己托管 prereq 或依赖外部（对他们）资源之间进行选择。

如果您使用的是 InstallShield PRQ，则可以采用混合策略。您可以托管 PRQ，但不能托管内容。如果没有 Internet 连接，InstallShield 将使用嵌入或以其他方式在源媒体上的 PRQ (XML)。如果有互联网连接，它将尝试从您的托管版本下载和覆盖。它们可以是相同的，并告诉它从 MSFT 中提取内容，或者如果 MSFT 链接变得无效，您可以选择托管内容并在那时覆盖。

网络下载器有其优势，但复杂性和 IMO 风险要高得多。

# javascript - 在闭包中使用全局对象会导致内存泄漏吗？

> ID：14424835
> 
> 赞同：0
> 
> 时间：2013-01-20T13:05:34.367
> 
> 标签：javascript

```
var globalObject = {    
    prop1
    prop2
} 
```

我有一个全局对象，我在我的闭包中引用它。这会导致任何内存泄漏。

```
(function(){
      var a;

      function inner1(arg){
        a = arg;
        globalObject .prop1 = dosomething;
      }

      function inner2(){
        globalObject .prop1 = add more properties to prop1
        globalObject .prop2 = dosomething;
        alert(a);
      }

    })(); 
```

之后我打电话给我`inner2()`的服务电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:32:56.763

您正在将有权访问闭包范围的函数分配给全局对象。因此，闭包调用的变量环境不会被垃圾收集，直到函数不再通过全局对象访问——这通常会持续到你的应用程序被卸载。

这不一定是内存泄漏。您似乎有充分的理由通过全局对象使函数可用，并且只要它们可以访问，它们就会工作。到那时，闭包内部的变量当然*需要*保存在内存中。

# javascript - 如何使用 If 语句确认整数已放入 javascript 中的文本字段中？

> ID：14424838
> 
> 赞同：1
> 
> 时间：2013-01-20T13:05:43.223
> 
> 标签：javascript

我正在使用一个按钮和两个文本字段做一个简单的华氏到摄氏度数字转换函数作为练习，我想确保当有人在每个文本字段中输入一个值然后尝试使用 onclick 执行该函数时我的函数将停止?

这是Javascript的一部分，其他一切都很好：

```
function transfer ()
{
   var fahr= document.form.fahrenheit.value;
   var celc= document.form.celcius.value;

if ( isNaN(celc) || isNaN(fahr))
{
   alert('Please provide a valid number');  
   return;
}     
else if (//what do I put here? == true)
}
   alert('conversion will not calculate correctly with values in both fields');
   return;
} 
```

我对编程真的很陌生，我希望这里有足够的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:13:36.200

试试这个：

```
else if (fahr != '' && celc != '')
{
   alert('conversion will not calculate correctly with values in both fields');
   return;
} 
```

因此，当字段一不为空且字段二不为空时，两个字段都已填充。在这种情况下，您需要与空字符串进行比较`''`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:14:30.573

试试这个

从每个文本框中调用这些函数，而不是 if else。

```
function notEmpty(elem, Msg){
    if(elem.value.length == 0){
        alert(Msg);
        elem.focus();
}
function isNumr(elem, Msg){
    if(!isNan(elem.Value))){
        alert(Msg);
            elem.focus();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:15:33.970

首先，您（尝试）检查任一字段是否具有有效值。这可以通过检查*两个*字段是否都不是数字 (NaN) 来完成。要检查两种条件，请使用`&&`（布尔值和运算符）：

```
if ( isNaN(celc) && isNaN(fahr))
{
   alert('Please provide at least one valid number');
   return;
} 
```

接下来，您似乎想检查两个字段是否都已填写（因此您不知道转换需要的方向）。因此，检查*一个*字段是否为空，这可以通过检查两个字段是否已设置来完成（由于先前的检查，您已经知道至少有一个有效值）：

```
if (celc != '' && fahr != '')
}
   alert('conversion will not calculate correctly with values in both fields');
   return;
} 
```

# python - Python 3 列表切片引发索引错误

> ID：14424842
> 
> 赞同：2
> 
> 时间：2013-01-20T13:06:42.910
> 
> 标签：python, python-3.x, indexing

我遇到了一个问题，我猜这是 Python、我的计算机/Windows 或两者中的某种错误。

到目前为止，这对我来说还不是问题，我什至不知道它不应该发生。

当从它的索引中切出一个列表时，`[]`应该返回的值：

```
>>> l = [1, 2, 3]
>>> l[5:]
[] 
```

这确实可以在我的 Mac 和我朋友的计算机上正常工作。

但是，当我在我的 PC 上（Windows 7 Home Premium 64bit，芬兰语）时，我得到`IndexError: list index out of range`

```
>>> l = [1, 2, 3]
>>> l[5:]
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    l[5:]
IndexError: list index out of range 
```

我有 Python 3.3.0 和 2.7.3，它在 2.7.3 上运行良好，但在 3.3.0 上出现错误。我已经尝试重新安装两个版本，没有效果。Python 文档还说它不应该在 Python 3 上引发错误：http: [//docs.python.org/3/library/exceptions.html#IndexError](http://docs.python.org/3/library/exceptions.html#IndexError)

我可以使用简单的 . 轻松解决它`if len(l) >= 2`，但我宁愿不使用不需要的东西。

从谷歌没有找到太多，想知道是否有其他人遇到同样的问题，是否有解决方案？或者我应该联系python开发人员吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:09:29.243

不，我无法在 Win7 64 位 Python 3.3.0 安装上重现此错误。在命令 shell 和 IDLE 中，我看到的行为完全符合预期。

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> l = [1, 2, 3]
>>> l[5:]
[]
>>> import dis
>>> dis.dis('l=[1,2,3];l[5:]')
  1           0 LOAD_CONST               0 (1)
              3 LOAD_CONST               1 (2)
              6 LOAD_CONST               2 (3)
              9 BUILD_LIST               3
             12 STORE_NAME               0 (l)
             15 LOAD_NAME                0 (l)
             18 LOAD_CONST               3 (5)
             21 LOAD_CONST               4 (None)
             24 BUILD_SLICE              2
             27 BINARY_SUBSCR
             28 POP_TOP
             29 LOAD_CONST               4 (None)
             32 RETURN_VALUE 
```

请提供有关您可能对环境所做的任何更改的更多详细信息。

# mysql - 1列的两个外键？

> ID：14424848
> 
> 赞同：0
> 
> 时间：2013-01-20T13:07:10.840
> 
> 标签：mysql, foreign-keys

我正在尝试设计一个数据库，但在设置外键时遇到了困难。我使用 InnoDB 和 phpMyAdmin。

我有 3 张桌子：

```
1) orders
- order_id
- order_details
- files_id

2) contacts
- contact_id
- contact_details
- files_id

3) files
- filе_id (not primary key, just index)
- filename 
```

想法如下：一个联系人和一个订单可以附加 0 个或多个文件。我正在尝试设置外键，因此**当我删除联系人或订单时，它会自动删除所有引用的文件（DELETE 上的 CASCADE）。**

**如您所见，我需要使用 2 个外键附加 files.file_id - contacts.files_id、orders.files_id。我不知道该怎么做，或者是否有可能。**有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:11:51.130

你可以这样做：

1) 订单

*   order_id
*   订单详细信息

2) 联系人

*   联系人 ID
*   联系方式

3)orders_Files

*   order_id
*   文件标识

4) 联系人文件

*   Contact_id(FK),
*   文件标识

5) 文件

*   file_id（主键，）
*   文件名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T13:15:48.287

[@MahmoudGamal 的答案](https://stackoverflow.com/a/14424890)的替代方法是考虑`orders`并`contacts`成为更具体的泛型类型`object`：

```
CREATE TABLE object (
  object_id       SERIAL
);

CREATE TABLE orders (
  order_id        SERIAL,
  order_details   TEXT,
  object_id       BIGINT UNSIGNED NOT NULL,
  UNIQUE (object_id),
  FOREIGN KEY (object_id) REFERENCES object (object_id) ON DELETE CASCADE
);

CREATE TABLE contacts (
  contact_id      SERIAL
  contact_details TEXT,
  object_id       BIGINT UNSIGNED NOT NULL,
  UNIQUE (object_id),
  FOREIGN KEY (object_id) REFERENCES object (object_id) ON DELETE CASCADE
); 
```

然后文件与那些相关联`objects`：

```
CREATE TABLE files (
  file_id         SERIAL,
  filename        TEXT
  object_id       BIGINT UNSIGNED NOT NULL,
  FOREIGN KEY (object_id) REFERENCES object (object_id) ON DELETE CASCADE
); 
```

现在，当您删除一个 时`object`，相关的`order`或`contact`连同所有关联的`files`都将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:11:41.500

这些表格不允许每个订单或联系人有多个文件。

您将需要两个额外的 order_id+files_id 和 contact_id+files_id 映射表，并且您应该创建 files.file_id 和主键。

# javascript - Chrome中子节点的顺序问题

> ID：14424851
> 
> 赞同：1
> 
> 时间：2013-01-20T13:07:34.270
> 
> 标签：javascript, google-chrome, dom, nodes

我在这里遇到了一个奇怪的问题。

在我的应用程序中，它使用 for 循环遍历 DOM 的子节点并在这些子节点内设置值。它看起来像以下。

```
for (var j = 0, length = contentsArray.length; j < length; j++) {
      //get the control for the node at this index
      contentControl = contentControlDef.getControlForObjectAtContainerIndex(contentsArray[j], j);
      //repopulate node; call overwriteDomNode(instanceDom, contentsArray, index);
      contentControl.overwriteDomNode(contentsDom.childNodes[j], contentsArray, j);
    } 
```

overwriteDomNode 方法如下所示。

```
overwriteDomNode(instanceDom, contentsArray, index) {
  //simple default.
  instanceDom.innerHTML = contentsArray[index].value;
} 
```

这些值设置在一行中，如下所示。

![在此处输入图像描述](../Images/cccefb92b634ba034513e18ed7b7ecf1.png)

在 Firefox 和 IE 中，这些值从第一个单元格开始正确设置。但在 chrome 中，情况并非如此。这些值是从数组的中间设置的。

例如：- 数组的第 6 个值位于 chrome 中该行的第一个单元格。

有人知道如何解决这个问题吗？

# python - 如何使用python登录网站

> ID：14424858
> 
> 赞同：1
> 
> 时间：2013-01-20T13:08:33.200
> 
> 标签：python

有人可以帮我完成 python 工作并登录到这些值吗？以下

```
 <div class='field'>
  <label for='login'>Login</label><br/>
  <input id='login' name='login' size='16' type='text' />
</div>
<div class='field'>
  <label for='login_password'>Password</label><br/>
  <input id='login' name='password' size='16' type='password' />
</div>
<div class='field'>
  <input type='submit' value='Login' />
</div> 
```

我厌倦了用这段代码尝试数百万次

```
import sys,os,time,subprocess,threading,readline,fileinput, urllib, urllib2, cookielib
usernameInsnort = ''
passwordInsnort = ''
print 'can you pleasse insert your snort user name:'
usernameStr = raw_input(usernameInsnort)
print 'can you please insert your snort password:'
passwordStr = raw_input(passwordInsnort)
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
login_data = urllib.urlencode({'login' : usernameStr, 'login' : passwordStr})
opener.open('https://www.snort.org/login', login_data)
resp = opener.open ('https://www.snort.org/downloads/2142')
print resp.read() 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:36:44.627

您错过了源代码中的一些 HTML 引用，这是快速说明您的方法不起作用的原因所必需的

```
<form action="https://www.snort.org/session" 
    method="post">
    <input name="authenticity_token" 
        type="hidden" value="y4xmS1IJatlRmkFz4GT4OrBuE57cBCtHj0ka0UPg9sw=" />
    <fieldset> 
        [Snip - You already provided this bit]
    </fieldset>
</form> 
```

从这个 HTML 我们可以确定两个问题

*   表格张贴`/session`不`/login`
*   ~~有一个`authenticity_token`字段可以防止 Cross Site Request Forgery (CSRF)~~似乎不是问题，可能是因为还没有设置用户会话

* * *

从您提供的原始 Paython 代码中，请注意这一行

```
login_data = urllib.urlencode({'login' : usernameStr, 'login' : passwordStr}) 
```

其中确定了另一个问题

*   您永远不会对密码的值进行编码，因为它被编码为登录

* * *

因此，考虑到所有这些，我们可以通过进行一些更改来使您的代码正常工作

```
import sys,os,time,subprocess,threading,readline,fileinput, urllib, urllib2, cookielib
usernameInsnort = ''
passwordInsnort = ''
print 'can you pleasse insert your snort user name:'
usernameStr = raw_input(usernameInsnort)
print 'can you please insert your snort password:'
passwordStr = raw_input(passwordInsnort)
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 

# Changed the second dictionary item to password instead of login
login_data = urllib.urlencode({'login' : usernameStr, 'password' : passwordStr})

# Changed the URL opened to that the login form submits to
opener.open('https://www.snort.org/session', login_data)

resp = opener.open ('https://www.snort.org/downloads/2142')
print resp.read() 
```

# java - OpenGL错误的纹理大小

> ID：14424873
> 
> 赞同：0
> 
> 时间：2013-01-20T13:09:57.817
> 
> 标签：java, opengl, size, textures

```
Texture texture = loadTexture("main_menu/bg");    
texture.bind();

    glBegin(GL_QUADS);

        glTexCoord2f(0, 0);
        glVertex2i(1, 1);

        glTexCoord2f(0, 1);
        glVertex2i(1, 720);

        glTexCoord2f(1, 1);
        glVertex2i(1280, 720);

        glTexCoord2f(1, 0);
        glVertex2i(1280, 1);
    glEnd(); 
```

我将 LWJGL 库与 slick2D 一起使用。我正在用上述方式渲染纹理，但纹理的位置不正确。我有 1280x720 全屏窗口，我在窗口上渲染背景纹理，但纹理在 X 轴减少到窗口的 2/3，在 Y 轴减少到窗口的 3/4。

我正在添加 openGL 的设置，所以这里是：

```
WINDOW_WIDTH = 1280;
WINDOW_HEIGHT = 720;

glEnable(GL_TEXTURE_2D);
glDisable(GL_DEPTH_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();

glOrtho(0, WINDOW_WIDTH, WINDOW_HEIGHT, 0, -1, 1);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();       
glViewport(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT); 
```

这是加载纹理的方法：

```
private Texture loadTexture(String key) {
try {
    return TextureLoader.getTexture("PNG", new FileInputStream(
            new File("res/" + key + ".png")));
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:10:54.940

在 OpenGL1 中，纹理宽度和高度必须是 2 的整数次方，例如

128x128, 256x256, 512x64, ...

你的似乎是 1280x720，这不是一个。:) 请注意，您的尺寸在 OpenGL2 中并不重要。

# symfony - Symfony 2.2 Doctrine ResolveTargetEntities 监听器

> ID：14424876
> 
> 赞同：2
> 
> 时间：2013-01-20T13:10:14.413
> 
> 标签：symfony, doctrine, entity-relationship, symfony-2.2

我正在创建一个包含关系关联的包。为了保持抽象，我想使用 Doctrine 的全新`ResolveTargetEntities`监​​听器。

问题是我希望监听器的设置是自动化的，所以未来使用我的包的开发人员不需要自己配置监听器。

在我的包中，有一个名为 的配置参数`data_class`，我想用它来设置`ResolveTargetEntities`监听器：

```
# app/config/config.yml
my_bundle:
    City:
        data_class: Acme\DemoBundle\Entity\City 
```

如何在我的包中设置服务或配置文件以使用此参数配置侦听器？像这样的东西：

```
resolve_target_entities:
    Dev\MyBundle\Model\City: %my_bundle.City.data_class% 
```

编辑：

上面的配置示例是为了展示学说应该完成的事情，但这个问题的目的是找到一种方法来`ResolveTargetEntities`自动设置监听器，使用服务、依赖注入容器或任何其他需要最终用户的方式在命名空间下只提供一个参数`my_bundle`：`data_class`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T10:49:28.397

您可以为此使用 DependancyInjection 文件夹中的 Bundle Extension 类。有一个选项可以将自定义配置添加到另一个捆绑配置（[http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html](http://symfony.com/doc/current/cookbook/bundles/prepend_extension.html)）。我的代码如下。

```
<?php

namespace Zveen\CmsBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Extension\PrependExtensionInterface;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class ZveenCmsExtension extends Extension implements PrependExtensionInterface
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $container->setParameter('zveen.cmsbundle.tenant.class', $config['tenant']['class']);
        $container->setParameter('zveen.cmsbundle.tenant.dql', $config['tenant']['class']);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
    }

    /**
     * Allow an extension to prepend the extension configurations.
     *
     * @param ContainerBuilder $container
     */
    public function prepend(ContainerBuilder $container)
    {
        // get all Bundles
        $bundles = $container->getParameter('kernel.bundles');
        if (isset($bundles['DoctrineBundle'])) {
            // Get configuration of our own bundle
            $configs = $container->getExtensionConfig($this->getAlias());
            $config = $this->processConfiguration(new Configuration(), $configs);

            // Prepare for insertion
            $forInsertion = array(
                'orm' => array(
                    'resolve_target_entities' => array(
                        'Zveen\CmsBundle\Entity\TenantInterface' => $config['tenant']['class']
                    )
                )
            );
            foreach ($container->getExtensions() as $name => $extension) {
                switch ($name) {
                    case 'doctrine':
                        $container->prependExtensionConfig($name, $forInsertion);
                        break;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:43:46.353

见[https://github.com/doctrine/doctrine2/blob/master/docs/en/cookbook/resolve-target-entity-listener.rst](https://github.com/doctrine/doctrine2/blob/master/docs/en/cookbook/resolve-target-entity-listener.rst)

> 接下来，我们需要配置监听器。将此添加到您设置 Doctrine 的区域。您必须按照下面概述的方式进行设置，否则无法保证 targetEntity 解析将可靠地发生： $evm = new \Doctrine\Common\EventManager;

```
$rtel = new \Doctrine\ORM\Tools\ResolveTargetEntityListener;
$rtel->addResolveTargetEntity('Acme\\InvoiceModule\\Model\\InvoiceSubjectInterface',
    'Acme\\CustomerModule\\Entity\\Customer', array());

// Add the ResolveTargetEntityListener
$evm->addEventSubscriber($rtel);

$em = \Doctrine\ORM\EntityManager::create($connectionOptions, $config, $evm); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:27:20.160

尝试写作

```
my_bundle.City.data_class: Acme\DemoBundle\Entity\City 
```

在 parameters.yml 文件中，它对我有用。

# php - 在 Joomla 中使用 HTML 按钮删除数据库表项

> ID：14424882
> 
> 赞同：0
> 
> 时间：2013-01-20T13:11:06.567
> 
> 标签：php, mysql, joomla

有人能指出我正确的方向吗，我正在尝试从用户“最喜欢的文章”表中删除项目。模块的工作方式如下：在表中：`id`、、`user_Id`和。文章“保存”功能没问题。然后我在每个条目旁边做了“删除”按钮，但我不知道如何处理它。我的猜测是：`article_Id``article_link`

```
public static function delete_art(){
    $db =& JFactory::getDBO(); 
    $query = 'DELETE FROM #__cdart WHERE id = *SOMF HERE!*';
    $db->setquery($query);
    $db->query();
} 
```

但我不知道如何判断用户按下了哪个文章“删除”按钮......

更新：这样制作的按钮：\

```
<div class="fapa_box">
                    <?php foreach ($getFapList as $getFap): ?>
                    <div class="fapa<?php if(modCdFapaHelper::pageExists() === $getFap->fap_id) echo ' fapa_active'; ?>" id="fapa_<?php echo $getFap->fap_id; ?>">
                        <span class="fapa_icon ui-icon ui-icon-star">&nbsp;</span><a class="fapa_tooltip" href="<?php echo str_replace('&', '&amp;', $getFap->fap_link); ?>" title="<?php echo htmlspecialchars($getFap->fap_note); ?>"><?php echo htmlspecialchars($getFap->fap_title); ?></a>
        <form name="fapa_delete" action="" method="post">
        <?php echo JHTML::_('form.token'); ?>
                    <input type="hidden" name="fapa" value="remove" />
                    <button type="submit" name="submit" value="submit">delete</button>
        </form>

                    </div>
                    <?php endforeach; ?>
                </div> 
```

# ruby - 如何将 pcap 类型 (PDML) 的 xml 转换为 json 并以正确的格式打印

> ID：14424896
> 
> 赞同：1
> 
> 时间：2013-01-20T13:13:12.083
> 
> 标签：ruby, xml, json, pcap

1.  他们有什么方法可以将 xml 转换为 json，反之亦然，用于 pcap 类型的 xml？
2.  确实会转换它，但整个`to_json`输出会打印在一行中。如何获得格式正确的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:01:28.467

您可以使用[http://cobravsmongoose.rubyforge.org](http://cobravsmongoose.rubyforge.org)库来做到这一点。这是一个基于上面链接中的代码的简单示例：

```
require 'cobravsmongoose'
xml = '<pdml><packet><proto name="geninfo" pos="1" showname="General information" size="74">...' # PDML document contents
json = CobraVsMongoose.xml_to_json(xml)
# => "pdml":{"packet":{"proto":[{"@name":"geninfo","@pos":"1","@showname":"General information","@size":"74",... 
```

[我使用http://gd.tuwien.ac.at/.vhost/analyzer.polito.it/30alpha/docs/dissectors/PDMLSpec.htm](http://gd.tuwien.ac.at/.vhost/analyzer.polito.it/30alpha/docs/dissectors/PDMLSpec.htm)上的 ICMP 示例来测试上述转换。

要解决关于如何漂亮打印输出的原始问题的评论，您可以使用`#pretty_generate`JSON 库中的方法来执行此操作：

```
require 'json'
pretty_json = JSON.pretty_generate(JSON.parse json) # same json as above
puts json 
```

# delphi - Delphi XE3 在 TFileStream 的构造函数中指定“FILE_SHARE_READ 或 FILE_SHARE_WRITE”时给出 EFOpenError

> ID：14424904
> 
> 赞同：1
> 
> 时间：2013-01-20T13:14:08.527
> 
> 标签：delphi, delphi-xe3, tfilestream

以下语句在 Delphi XE (Windows 7 x64) 下运行良好，但在 Delphi XE3 (Windows 7 x64) 下给出“异常类 EFOpenError with message...”。它看起来像一个错误。如果是这样，是否有解决方法？

```
 TFileStream.Create(
        'C:\Test.txt'
        , fmOpenRead,
//        FILE_SHARE_READ);
//        FILE_SHARE_WRITE);
        FILE_SHARE_READ or FILE_SHARE_WRITE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T13:27:23.323

使用`fmShareDenyNone`常量代替`FILE_SHARE_READ or FILE_SHARE_WRITE`：

```
 TFileStream.Create(
    'C:\Test.txt', fmOpenRead or fmShareDenyNone); 
```

这不是一个错误。有关详细信息，请参阅[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TFileStream.Create)。

# awk - 将模式限制为指定的字符串

> ID：14424909
> 
> 赞同：0
> 
> 时间：2013-01-20T13:14:57.917
> 
> 标签：awk

我有一组字符串。可以说，（list.txt）它们是：

```
 1abc_A
 2pqr_X
 4ghi_Z 
```

我还有一个文本文件 (test.txt)，如下所示：

```
1abc_A    2pqr_X    0.55       0.87
2pqr_X    3def_Y    0.21       0.24
4ghi_Z    1abc_A    0.98       0.75
2pqr_X    4ghi_Z    0.99       0.76
2pqr_X    2pqr_X    1.00       1.00 
```

我只需要从 test.txt 中获取那些行，以便第 1 列和第 2 列中的字符串属于 list.txt 中包含的字符串

在这种情况下，我的输出如下：

```
1abc_A    2pqr_X    0.55       0.87
4ghi_Z    1abc_A    0.98       0.75
2pqr_X    4ghi_Z    0.99       0.76
2pqr_X    2pqr_X    1.00       1.00 
```

即 test.txt 中除第 2 行外的所有行，因为第 2 行中的第 2 列，3def_Y 不在 list.txt 中指定的字符串列表中

我怎样才能在 awk 中做到这一点？请注意，test.txt 是一个大文本文件，将近 7GB。

解决这个问题的最快方法是什么？请帮忙 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:48:47.460

```
awk 'NR==FNR{a[$0];next} ($1 in a) && ($2 in a)' list.txt test.txt 
```

将 list.txt 的内容存储为数组的索引，然后逐行检查 test.txt 的第一个和第二个字段是否都是该数组的索引。适用于任何大小的 test.txt，因为它不会将任何 test.txt 存储在内存中。

# svn - WebSVN不同repos的不同登录

> ID：14424910
> 
> 赞同：1
> 
> 时间：2013-01-20T13:15:13.157
> 
> 标签：svn, websvn

有人可以告诉我如何为不同用户启用 WebSVN 的登录功能，但允许 WebSVN 主页面可见，显示所有不同的可用存储库。

我的任务是为我的团队创建一个 SVN，以下是我关注的链接之一，它帮助我成功设置了我的第一个 repos。

[https://websvnphp.github.io/docs/install.html](https://websvnphp.github.io/docs/install.html)

但是在安装 WebSVN 之后，我可以看到我的存储库，但任何有效用户都可以访问所有存储库。

如果我的用户直接访问存储库（[http://example.com/repos/repo1](http://example.com/repos/repo1)），如果对该存储库进行身份验证，他们将获得访问权限。

我的 httpd.conf 内容：

```
DAV svn 
SVNParentPath /home/svn2 
AuthType Basic 
AuthName "Subversion repository" 
AuthUserFile /etc/apache2/passwd 
AuthzSVNAccessFile /etc/apache2/dav_svn.authz 
Require valid-user 
```

我的授权内容：

```
[repos:/] 
janedoe = r 
```

这个问题是我找到的最接近的问题，但仍希望主 WebSVN 页面显示所有存储库，并在选择一个要查看的存储库时提示对该存储库进行身份验证。

[WebSVN - 存储库中路径的身份验证](https://stackoverflow.com/questions/4280034/websvn-authentication-for-paths-in-the-repository)

# r - addOBV 抛出错误

> ID：14424911
> 
> 赞同：1
> 
> 时间：2013-01-20T13:15:16.527
> 
> 标签：r, quantmod

我试图用价格和一些技术指标（如 ADX、RSI 和 OBV）绘制图表。我无法弄清楚为什么`addOBV`会出现错误以及为什么`addADX`在图表的图形线中根本没有显示？

这是我的代码：

```
tmp <- read.csv(paste("ProcessedQuotes/",Nifty[x,],".csv", sep=""),
  as.is=TRUE, header=TRUE, row.names=NULL)
tmp$Date<-as.Date(tmp$Date)
ydat = xts(tmp[,-1],tmp$Date) 
lineChart(ydat, TA=NULL, name=paste(Nifty[x,]," Technical Graph"))
plot(addSMA(10))
plot(addEMA(10))
plot(addRSI())
plot(addADX())
plot(addOBV()) 
```

错误`addOBV`是：

```
Error in try.xts(c(2038282, 1181844, -1114409, 1387404, 3522045, 4951254,  : 
  Error in as.xts.double(x, ..., .RECLASS = TRUE) :   
        order.by must be either 'names()' or otherwise specified 
```

您可以在下面看到 DIn 未在图中完全显示。

![在此处输入图像描述](../Images/ef6d41fa73db61614d41a114e18dd55e.png)

```
> class(ydat)
[1] "xts" "zoo"
> head(ydat)
  Open  High    Low  Close  Volume Trades Sma20 Sma50 DIp DIn DX ADX aroonUp aroonDn oscillator  macd signal RSI14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:53:41.550

我不知道为什么那个补丁对你不起作用，但你可以创建一个新函数（或者你可以从 quantmod 中屏蔽这个函数）。让我们创建一个新的补丁版本`addOBV2`，它是`addOBV`除了一个补丁行之外的代码。(`x <- as.matrix(lchob@xdata)`替换为`x <- try.xts(lchob@xdata, error=FALSE)`)。

```
addOBV2 <- function (..., on = NA, legend = "auto") 
{
  stopifnot("package:TTR" %in% search() || require("TTR", quietly = TRUE))
  lchob <- quantmod:::get.current.chob()
  x <- try.xts(lchob@xdata, error=FALSE)
  #x <- as.matrix(lchob@xdata)
  x <- OBV(price = Cl(x), volume = Vo(x))
  yrange <- NULL
  chobTA <- new("chobTA")
  if (NCOL(x) == 1) {
    chobTA@TA.values <- x[lchob@xsubset]
  }
  else chobTA@TA.values <- x[lchob@xsubset, ]
  chobTA@name <- "chartTA"
  if (any(is.na(on))) {
    chobTA@new <- TRUE
  }
  else {
    chobTA@new <- FALSE
    chobTA@on <- on
  }
  chobTA@call <- match.call()
  legend.name <- gsub("^.*[(]", " On Balance Volume (", deparse(match.call()))#, 
  #extended = TRUE)
  gpars <- c(list(...), list(col=4))[unique(names(c(list(col=4), list(...))))]
  chobTA@params <- list(xrange = lchob@xrange, yrange = yrange, 
                        colors = lchob@colors, color.vol = lchob@color.vol, multi.col = lchob@multi.col, 
                        spacing = lchob@spacing, width = lchob@width, bp = lchob@bp, 
                        x.labels = lchob@x.labels, time.scale = lchob@time.scale, 
                        isLogical = is.logical(x), legend = legend, legend.name = legend.name, 
                        pars = list(gpars))
  if (is.null(sys.call(-1))) {
    TA <- lchob@passed.args$TA
    lchob@passed.args$TA <- c(TA, chobTA)
    lchob@windows <- lchob@windows + ifelse(chobTA@new, 1, 
                                            0)
    chartSeries.chob <- quantmod:::chartSeries.chob
    do.call("chartSeries.chob", list(lchob))
    invisible(chobTA)
  }
  else {
    return(chobTA)
  }
} 
```

现在它起作用了。

```
# reproduce your data
ydat <- getSymbols("ZEEL.NS", src="yahoo", from="2012-09-11", 
                   to="2013-01-18", auto.assign=FALSE)

lineChart(ydat, TA=NULL, name=paste("ZEEL Technical Graph"))
plot(addSMA(10))
plot(addEMA(10))
plot(addRSI())
plot(addADX())
plot(addOBV2()) 
```

![在此处输入图像描述](../Images/08c9c2bc7ed8e7f20a8d8636418d17d9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T15:53:57.147

此代码重现错误：

```
library(quantmod)
getSymbols("AAPL")
lineChart(AAPL, 'last 6 months')
addOBV() 
```

会话信息：

```
sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.3-17 TTR_0.21-1      xts_0.9-1       zoo_1.7-9       Defaults_1.1-1  rgeos_0.2-11   
[7] sp_1.0-5        sos_1.3-5       brew_1.0-6     

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6 tools_2.15.0 
```

谷歌搜索，该错误似乎与`addOBV`将数据转换为矩阵的事实有关，这会导致`TTR::OBV`. [RForge](http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2391&group_id=125&atid=546)上发布了一个补丁。

# jquery-plugins - FullCalendar 在月视图中显示事件而不是日视图和周视图？

> ID：14424916
> 
> 赞同：4
> 
> 时间：2013-01-20T13:16:03.487
> 
> 标签：jquery-plugins, fullcalendar

我正在使用 FullCalendar 从 json 提要中获取事件。但是，我遇到了一个问题。

日历在月视图中显示我的活动很好，但是在日视图和周视图中转到日/周时，偶数没有显示？

我对 fullcalendar 的初始化如下所示：

```
var options = {
    header: {
        left: 'prev, next',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    allDaySlot: false,

    monthNames: ["Januar","Februar","Marts","April","Maj","Juni","Juli", "August", "September", "Oktober", "November", "December" ], 
    monthNamesShort: ['Jan','Feb','Mar','Apr','Maj','Jun','Jul','Aug','Sep','Okt','Nov','Dec'],
    dayNames: ['Søndag',  'Mandag', 'Tirsdag', 'Onsdag', 'Torsdag', 'Fredag', 'Lørdag'],
    dayNamesShort: ['Søn','Man','Tir','Ons','Tor','Fre','Lør'],
    buttonText: {
        today: 'I dag',
        month: 'Måned',
        week: 'Uge',
        day: 'Dag'
    },
    weekends: false,

    defaultView: 'agendaWeek',
    events: '/feed/',

    firstHour: 8,
    slotMinutes: 20,
    defaultEventMinutes: 120,
    axisFormat: 'HH:mm',
    timeFormat: {
        agenda: 'H:mm{ - h:mm}'
    },
    minTime: 8,
    maxTime: 16
};

$('#calendar-holder').fullCalendar(options); 
```

我的提要返回以下 json：

```
[{"id":"7","title":"Elias  (10:00)","start":1359108000,"end":1359109800,"url":"\/tidsbestillinger\/edit\/"}] 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T13:26:50.703

解决了！不得不设置

```
allDayDefault: false, 
```

在初始化 FullCalendar 时。

或者我可以设置

```
allDay = false 
```

在 JSON 中 - 但在全球范围内执行此操作要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T08:04:20.720

还要确保事件长度必须足够长，才能在 slotDuration 中显示。例如，我的 slotDuration 是 15 分钟，我的事件仅在持续时间至少为 2 分钟时才会显示。[![在此处输入图像描述](../Images/aca9eb477a3aadb9f52c117cdd0728d6.png)](https://i.stack.imgur.com/QUml8.jpg)

# windows - Windows 批处理：无法过滤掉完全匹配的行

> ID：14424919
> 
> 赞同：0
> 
> 时间：2013-01-20T13:16:36.573
> 
> 标签：windows, batch-file, cmd

我正在使用此命令过滤掉该行`set timing on;`

```
type filea.sql | findstr /v "^set timing on;$" 
```

我得到的输出如下：

```
whenever sqlerror exit 9;

grant select on exfdsfds;

exit; 
```

filea.sql 的内容是：

```
set timing on;
whenever sqlerror exit 9;

grant select on exfdsfds;

timing on; cool

exit; 
```

为什么要删除`timing on; cool`？需要对命令进行哪些修改才能避免这种结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:59:06.027

如中所述，如果要匹配包含空格的整个字符串，则`findstr /?`需要使用：`/c`

> 除非参数以 /C 为前缀，否则使用空格分隔多个搜索字符串。例如，'FINDSTR "hello there" xy' 在文件 xy 中搜索 "hello" 或 "there" 'FINDSTR /C:"hello there" xy' 在文件 xy 中搜索 "hello there"

如果您想使用`^`并且`$`还需要`/r`，否则该字符串将被视为文字字符串而不是正则表达式。

```
type filea.sql | findstr /v /r /c:"^set timing on;$" 
```

如果没有`/c`该命令，则会从输出中删除包含任何给定单词的所有行，其中包括该行`timing on; cool`，因为存在与 word 的匹配项`timing`。

# sql - 从表中删除未引用的记录

> ID：14424922
> 
> 赞同：0
> 
> 时间：2013-01-20T13:17:02.720
> 
> 标签：sql, sql-server, delete-row

假设我有表 A 和 B。表 A 对表 B 有一个 FK。

我可以将 B 中的记录分类为“已引用”和“未引用”，这意味着数据库中的某些记录分别具有指向或不指向该记录的 FK。

我想找到一种与*方案无关的*方法来删除 B 中未引用的所有行。在没有任何约束的情况下对表 B 进行简单的 DELETE 操作（因为我想要*独立于方案*，即一种通用方式），几乎可以肯定，它会失败。

如果它也可以独立于供应商，那就太好了，但我觉得我要求太多了。

编辑：也许我不清楚。当我说我不想依赖该方案时，我指的是在执行“删除”时避免从其他表中命名列名。只需删除 B 的记录，这些记录可以在不破坏数据库一致性的情况下删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:39:02.777

缓慢的方式：

```
declare del_cur cursor
local
forward_only
static
scroll_locks
for
  select 0 from B
;

declare @foo int;

open del_cur;

fetch next from del_cur into @foo;
while @@fetch_status = 0
begin
  begin try
    delete from B where current of del_cur;
  end try
  begin catch
    -- It was referenced, skip
  end catch;

  fetch next from del_cur into @foo;
end;

close del_cur;
deallocate del_cur; 
```

一种更快的方法是检查现有的外键并构建包含其列名的动态 SQL 语句。

# java - 删除 ViewGroup 中的视图

> ID：14424923
> 
> 赞同：1
> 
> 时间：2013-01-20T13:17:14.717
> 
> 标签：java, android

我在使用 ViewGroup 和自动生成的 ViewPager 时遇到了一些问题。我想添加一个视图并删除一个视图，但每次我尝试它时都会收到错误消息：

```
 01-20 14:05:40.028: E/AndroidRuntime(3615): FATAL EXCEPTION: AsyncTask #1
    01-20 14:05:40.028: E/AndroidRuntime(3615): java.lang.RuntimeException: An error occured while executing doInBackground()
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.lang.Thread.run(Thread.java:856)
    01-20 14:05:40.028: E/AndroidRuntime(3615): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.View.requestLayout(View.java:15468)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.View.requestLayout(View.java:15468)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.View.requestLayout(View.java:15468)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.View.requestLayout(View.java:15468)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.view.ViewGroup.removeView(ViewGroup.java:3524)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at de.tecfriends.vbtsplash2013.MainActivity$DummySectionFragment.Teilnehmer(MainActivity.java:219)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at de.tecfriends.vbtsplash2013.MainActivity$DummySectionFragment$1.onTaskCompleted(MainActivity.java:148)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at de.tecfriends.vbtsplash2013.BackgroundDownload.doInBackground(BackgroundDownload.java:38)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at de.tecfriends.vbtsplash2013.BackgroundDownload.doInBackground(BackgroundDownload.java:1)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-20 14:05:40.028: E/AndroidRuntime(3615):     ... 4 more 
```

在类中，`onCreateView`我设置了一个名为的公共 ViewGroup `vGroup`。`vGroup.removeView(vGroup.findViewById(1));`在所有数据处理结束时，我尝试`vGroup.addView(modeList);`但我得到了上面的错误。

我怎样才能到达`original Thread`可以添加和删除视图的位置`ViewGroup`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:21:02.547

`ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.`表示您正在尝试从后台线程（即非 UI 线程）访问 UI 元素。

`vGroup.removeView()`只能从`onPreExecute()`or调用`onPostExecute()`，因为这两个函数在 UI 线程上运行。

```
private class MyAsyncTask extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {
            .... // runs on background / non-UI thread
      }      

      @Override
      protected void onPostExecute(String result) {   
            ... // runs on UI thread            
      }

      @Override
      protected void onPreExecute() {
            ... // runs on UI thread      
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

[AsyncTask 的文档](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:18:34.247

您正在`vGroup.removeView()`从后台线程调用。要更改 UI，您应该/必须始终使用`UI Thread`.

**编辑：**创建一个`Handler`并`UIThread`使用`mHandler.post(new Runnable());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T18:04:28.700

下次使用`vGroup.removeView()`你需要打电话`vGroup.refreshDrawableState()`

# php - 获取用户详细信息并将其存储在数据库中

> ID：14424926
> 
> 赞同：0
> 
> 时间：2013-01-20T13:17:22.457
> 
> 标签：php, mysql, session

我遵循 PHPAcademy 的注册和登录系列，并构建了一个登录系统。我想为它添加一个公告系统。我已经建立了它，但我无法将登录用户的名字和姓氏存储在表中。消息和日期被插入，但不是用户数据。

姓名、性别、部门等用户详细信息都存储在其他表中，但我只需要两个字段——名字和姓氏，所以我想到了使用会话变量。另外，我在那个 JOIN 概念上很弱，谁能解释一下，我有一种奇怪的感觉，它可以使用它来完成，但我不知道如何，我尝试了两次但失败了（可能是因为我没有得到概念）

请帮忙。以下是代码：

```
 <?php
    include $_SERVER["DOCUMENT_ROOT"].'/TestSite/core/init.php';
    faculty_protect_page();
    include $_SERVER["DOCUMENT_ROOT"].'/TestSite/includes/overall/header.php';

    if(empty($_POST)===false) {
        $required_fields = array('announce');
        foreach($_POST as $key=>$value) {
            if(empty($value) && in_array($key, $required_fields) === true ) {
                $errors[] = 'It seems like you have not made any announcement!';
                break 1;
            }
        }
        if(empty($errors) === true ){
            if(strlen($_POST['announce']) < 20) {
                $errors[] = 'Your announcement must be atleast 20 characters long!';
            }
            if(strlen($_POST['announce']) > 250) {
                $errors[] = 'Your announcement cannot be more than 250 characters long!';
            }
        }
    }
?>
<center><h3>Make an announcement</h3></center>
<?php
                if(isset($_GET['success'])===true && empty($_GET['success'])===true) {
                    echo 'You have successfully made an announcement';
                }
                else {
                    if(empty($_POST)=== false && empty($errors)===true) {
                        $announcement = array(
                            'announce'     => $_POST['announce'],
                       //'faculty_fname' => $_SERVER['faculty_fname'] this didn't work
                            );
                        announce($announcement);
                        header('Location: announce.php?success');
                        exit();
                    }
                    else if(empty($errors)===false) {
                        echo output_errors($errors);
                    }

    ?>
    <form action="" method="POST">
        <br/>
        <input type="text" class="span12" name="announce" maxlength="250"/><br/><br/>
        <center><input type="submit" class="btn btn" value="Announce" /></center>     
    </form>
<?php
}
include $_SERVER["DOCUMENT_ROOT"].'/TestSite/includes/overall/footer.php'; ?> 
```

这是放置在函数文件中的我的宣布函数（init.php 需要）：

```
 function announce($announcement) {
        array_walk($announcement, 'array_sanitize');
        $announcement['announce'] = ucfirst($announcement['announce']);
        $fields = '`' . implode('`, `', array_keys($announcement)) . '`';
        $data = '\'' . implode('\', \'', $announcement) . '\'';
        $one = $_SESSION['faculty_fname'];        
        mysql_query("INSERT INTO `notices` ($fields, `faculty_fname`, `datetime`) VALUES ($data, '$one', NOW())");
    } 
```

谁能帮我在表中插入教师的名字？我已经花了一整天的时间，但无法成功。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:26:49.500

如果您想将用户信息存储在通知记录中，您需要存储例如用户表中与发布通知的用户相对应的主键。您的 notices 表必须有一个 user_id 列，并且将存储在该列中的 id 通常称为外键。这样，您就不会在数据库中存储重复的信息。所有用户特定信息都已存储在 user_table 中，因此无需将其再次存储在 notices 表中，这只是将用户连接到通知的一种手段。

要将其应用到您当前的代码中，您可以执行以下操作。

1.  当您想在通知表中插入新通知时，您首先需要从数据库中检索提交通知的人的用户记录。您如何执行此操作取决于您的登录系统是如何构建的，但例如，在登录时，您可以将用户的主键存储在会话中。在通知提交时，您从会话中检索用户 ID 并使用它来查询数据库。在半伪代码中：

    ```
    $mysqli = new mysqli("localhost", "root", "", "");
    $user_id = $_SESSION['user_id'];  
    $sql = $mysqli->prepare("SELECT * FROM user_table WHERE user_id = ?");  
    $sql->bind_param("i", $user_id); 
    ```

2.  现在我们有了登录用户的记录，您可以在通知表中插入通知

    ```
    $notice = $_POST['notice'];  
    $user_id = $_SESSION['user_id'];  
    $sql = $mysqli->prepare("INSERT INTO notices ('notice', 'user', 'datetime') VALUES (?,?,NOW())");  
    $sql->bind_param("si", $notice, $user_id); 
    ```

执行查询后，新记录包含表 notices 的 user 列中的 user_id，对应于 user_table 中的主键，可以找到所有用户特定信息。

# asp.net - 部分缓存和提琴手？

> ID：14424927
> 
> 赞同：0
> 
> 时间：2013-01-20T13:17:41.440
> 
> 标签：asp.net, asp.net-mvc, caching, fiddler, partial-caching

*我正在用 asp.net (webforms) 构建一个网站页面。*

我正在为页面使用部分缓存（输出缓存）。所以`A`和`B`（用户控件）被缓存。（而页面*不是*）。有什么方法我可以在其中看到`Fiddler`并`A`在页面不在时从*缓存*`B`中检索？

 *```
 ___________________
| Page              |
|   ____            |
|  +    +           |
|  |  A |(ascx)     |
|  +____+           |
|                   |
|                   |
|   ____            |
|  +    +           |
|  |  B |(ascx)     |
|  +____+           |
|                   |
|                   |
 ___________________ 
```

# 编辑

可以说`A.ascx`仅包含：

`<span>Hello A</span>`

并且`B.ascx`仅包含：

`<span>Hello B</span>`

并且输出缓存位置是“ *Private* ”（*仅适用于 ascx！*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:12:06.503

Fiddler 显示浏览器加载的所有 HTTP 请求/响应。

如果客户端缓存了*A*和*B* ，那么当页面加载时，您将不会在 Fiddler 中看到对*A*或*B的请求，***除非是在第一个页面加载时**。在第一次加载时，*A*和*B*将被下载（您将在 Fiddler 中看到它们）并缓存在客户端上。*

# sql-server - 在 SELECT INTO 中保留 ORDER BY

> ID：14424929
> 
> 赞同：36
> 
> 时间：2013-01-20T13:18:00.223
> 
> 标签：sql-server, tsql, sql-order-by, select-into

我有一个 T-SQL 查询，它从一个表中获取数据并将其复制到一个新表中，但只有满足特定条件的行：

```
SELECT VibeFGEvents.* 
INTO VibeFGEventsAfterStudyStart 
FROM VibeFGEvents
LEFT OUTER JOIN VibeFGEventsStudyStart
ON 
    CHARINDEX(REPLACE(REPLACE(REPLACE(logName, 'MyVibe ', ''), ' new laptop', ''), ' old laptop', ''), excelFilename) > 0
    AND VibeFGEventsStudyStart.MIN_TitleInstID <= VibeFGEvents.TitleInstID
    AND VibeFGEventsStudyStart.MIN_WinInstId <= VibeFGEvents.WndInstID
WHERE VibeFGEventsStudyStart.excelFilename IS NOT NULL
ORDER BY VibeFGEvents.id 
```

使用表格的代码依赖于它的顺序，上面的副本没有保留我期望的顺序。即新表中的行在从 复制`VibeFGEventsAfterStudyStart`的列中不是单调递增的。`VibeFGEventsAfterStudyStart.id``VibeFGEvents.id`

在 T-SQL 中，我如何保留 in 中的行`VibeFGEvents`顺序`VibeFGEventsStudyStart`？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-04-23T07:17:38.540

我知道这有点旧，但我需要做类似的事情。我想将一个表的内容插入另一个表，但顺序是随机的。我发现我可以通过使用`select top n`and来做到这一点`order by newid()`。如果没有“top n”，则不会保留顺序，并且第二个表的行顺序与第一个表相同。但是，使用“前 n”，顺序（在我的情况下是随机的）被保留。我使用了大于行数的“n”值。所以我的查询是这样的：

```
insert Table2 (T2Col1, T2Col2)
  select top 10000 T1Col1, T1Col2
  from Table1
  order by newid() 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-20T13:53:40.790

做什么的？

要点是——表中的数据没有排序。在 SQL Server 中，表的内在存储顺序是（如果已定义）聚集索引的顺序。

插入数据的顺序基本上是“无关紧要的”。数据写入表的那一刻就忘记了。

因此，即使你得到了这些东西，也没有任何收获。如果在处理数据时需要排序，则必须在获取它的 select 上放置 order by 子句。其他任何事情都是随机的 - 即您输入数据的顺序未确定并且可能会更改。

因此，当您尝试实现时，在插入件上具有特定顺序是没有意义的。

SQL 101：集合没有顺序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-06T12:46:10.990

我发现了一个特定场景，我们希望在列内容中以特定顺序创建新表：

*   行数非常大（从 200 到 20 亿行），所以我们使用`SELECT INTO`而不是`CREATE TABLE + INSERT`因为需要尽可能快地加载（最小日志记录）。我们已经测试了使用[跟踪标志 610](https://docs.microsoft.com/en-us/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql?view=sql-server-2017)来加载已创建的具有聚集索引的空表，但仍然比以下方法花费更长的时间。
*   我们需要按特定列对数据进行排序以提高查询性能，因此我们`CLUSTERED INDEX`在表加载后创建一个。我们放弃创建非聚集索引，因为它需要再次读取未包含在索引中的有序列中的数据，并且我们放弃创建全覆盖非聚集索引，因为它实际上会使所需空间量翻倍拿着桌子。

碰巧的是，如果您设法以*某种方式*创建具有已“排序”列的表，则创建聚集索引（具有相同顺序）所花费的时间比未排序数据时要少得多。有时（您必须测试您的案例），对中的行进行排序`SELECT INTO`比无序加载并稍后创建聚集索引要快。

问题是 SQL Server 2012+在执行时或执行`ORDER BY`时会忽略列列表。如果您在上指定列或插入的表有列，它将考虑列，***但只是为了确定标识值***而不是基础表中的实际存储顺序。在这种情况下，排序可能会发生但不能保证，因为它高度依赖于执行计划。`INSERT INTO``SELECT INTO``ORDER BY``IDENTITY``SELECT INTO``IDENTITY`

 *我们发现的一个技巧是，如果你有一个列表`SELECT INTO`，对 a 的结果执行 a`UNION ALL`会使引擎执行 a `SORT`（并不总是显式`SORT`运算符，有时是 a`MERGE JOIN CONCATENATION`等） 。`ORDER BY`这样，select into 已经按照我们稍后创建聚集索引的顺序创建了新表，因此创建索引所需的时间更少。

所以你可以重写这个查询：

```
SELECT
    FirstColumn = T.FirstColumn,
    SecondColumn = T.SecondColumn
INTO
    #NewTable
FROM
    VeryBigTable AS T
ORDER BY            -- ORDER BY is ignored!
    FirstColumn,
    SecondColumn 
```

到

```
SELECT
    FirstColumn = T.FirstColumn,
    SecondColumn = T.SecondColumn
INTO
    #NewTable
FROM
    VeryBigTable AS T

UNION ALL

-- A "fake" row to be deleted
SELECT
    FirstColumn = 0,
    SecondColumn = 0

ORDER BY
    FirstColumn,
    SecondColumn 
```

我们已经使用过这个技巧几次，但我不能保证它会一直排序。我只是将其发布为一种可能的解决方法，以防有人遇到类似情况。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-12-13T12:57:50.337

只需`top`使用大于实际行数的数字添加到您的 sql 中：

```
SELECT top 25000 * 
into spx_copy
  from SPX
  order by date 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-17T18:28:43.227

您不能使用 ORDER BY 执行此操作，但如果您在 SELECT INTO 之后在 VibeFGEvents.id 上创建聚集索引，则该表将按 VibeFGEvents.id 在磁盘上排序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-25T08:16:46.590

我已经对 MS SQL 2012 进行了测试，它清楚地向我展示了 insert into ... select ... order by 是有道理的。这是我所做的：

```
create table tmp1 (id int not null identity, name sysname);
create table tmp2 (id int not null identity, name sysname);

insert into tmp1 (name) values ('Apple');
insert into tmp1 (name) values ('Carrot');
insert into tmp1 (name) values ('Pineapple');
insert into tmp1 (name) values ('Orange');
insert into tmp1 (name) values ('Kiwi');
insert into tmp1 (name) values ('Ananas');
insert into tmp1 (name) values ('Banana');
insert into tmp1 (name) values ('Blackberry');

select * from tmp1 order by id; 
```

我得到了这个清单：

*   1 苹果
*   2 胡萝卜
*   3 菠萝
*   4 橙色
*   5 猕猴桃
*   6 凤梨
*   7 香蕉
*   8 黑莓

这里没有惊喜。然后我以这种方式从 tmp1 复制到 tmp2 ：

```
insert into tmp2 (name)
select name
from tmp1
order by id;

select * from tmp2 order by id; 
```

我得到了像以前一样的确切响应。苹果到黑莓。现在颠倒顺序来测试它：

```
delete from tmp2;

insert into tmp2 (name)
select name
from tmp1
order by id desc;

select * from tmp2 order by id; 
```

*   9 黑莓
*   10 香蕉
*   11 凤梨
*   12 猕猴桃
*   13 橙色
*   14 菠萝
*   15 胡萝卜
*   16 苹果

所以 tmp2 中的顺序也颠倒了，所以当目标表中**有标识列时****order by**才有意义！

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-07T02:45:58.843

人们想要这个（特定顺序）的原因是因为你不能在子查询中定义顺序，所以，这个想法是，如果你创建一个表变量，然后从那个表变量中进行查询，你会认为你将保留顺序（例如，连接必须按顺序排列的行 - 例如对于 XML 或 json），但您不能。所以你会怎么做？答案是通过在您的选择中使用 TOP 来强制 SQL 对其进行排序（只需选择一个足够高的数字以覆盖所有行）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-15T14:50:57.227

我遇到了同样的问题，我需要保留订单的一个原因是当我尝试使用 ROLLUP 根据原始数据而不是该列中的平均值来获取加权平均值时。例如，假设我想查看基于四个商店位置销售的单位数量的平均利润？通过创建等式利润/#Units = Avg，我可以很容易地做到这一点。现在我在我的 GROUP BY 中包含一个 ROLLUP，这样我还可以查看所有位置的平均值。现在我对自己想，“这是很好的信息，但我希望按照从最佳平均到最差的顺序来查看它，并将整体保持在列表的底部（或顶部））。ROLLUP 在这方面会让你失望，所以你采取不同的方法。

为什么不根据您需要保留的顺序（顺序）创建行号？

```
 SELECT OrderBy = ROW_NUMBER() OVER(PARTITION BY 'field you want to count' ORDER BY 'field(s) you want to use ORDER BY')
    , VibeFGEvents.*  
    FROM VibeFGEvents
    LEFT OUTER JOIN VibeFGEventsStudyStart
    ON 
        CHARINDEX(REPLACE(REPLACE(REPLACE(logName, 'MyVibe ', ''), ' new laptop', ''), ' old laptop', ''), excelFilename) > 0
        AND VibeFGEventsStudyStart.MIN_TitleInstID <= VibeFGEvents.TitleInstID
        AND VibeFGEventsStudyStart.MIN_WinInstId <= VibeFGEvents.WndInstID
    WHERE VibeFGEventsStudyStart.excelFilename IS NOT NULL 
```

现在您可以使用表中的 OrderBy 字段来设置值的顺序。我从上面的查询中删除了 ORDER BY 语句，因为它不会影响数据如何加载到表中。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-20T14:03:13.130

尝试使用`INSERT INTO`而不是`SELECT INTO`

```
INSERT INTO VibeFGEventsAfterStudyStart 
SELECT VibeFGEvents.* 
FROM VibeFGEvents
LEFT OUTER JOIN VibeFGEventsStudyStart
ON 
    CHARINDEX(REPLACE(REPLACE(REPLACE(logName, 'MyVibe ', ''), ' new laptop', ''), ' old laptop', ''), excelFilename) > 0
    AND VibeFGEventsStudyStart.MIN_TitleInstID <= VibeFGEvents.TitleInstID
    AND VibeFGEventsStudyStart.MIN_WinInstId <= VibeFGEvents.WndInstID
WHERE VibeFGEventsStudyStart.excelFilename IS NOT NULL
ORDER BY VibeFGEvents.id` 
```***

# java - 使用 Java 容器配置的 Spring 依赖注入

> ID：14424930
> 
> 赞同：3
> 
> 时间：2013-01-20T13:18:02.453
> 
> 标签：java, spring, dependency-injection

我是 Java 和 Spring 的新手，来自 C# 和 .NET 世界，所以请耐心等待 - 我试图做的事情可能不合时宜......

我正在尝试使用 Java 配置和注释而不是 XML 配置来配置 Spring DI，但是我遇到了一些问题。这适用于独立应用程序，而不是 Web 应用程序。我已经阅读[了 springsource 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)，据我所知，我的基本配置应该是正确的......但不是。请看下面的代码：

Java 配置注解类：

```
package birdalerter.common;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import birdalerter.process.ISightingsProcessor;
import birdalerter.process.SightingsProcessor;

@Configuration
@ComponentScan({"birdalerter.process", "birdalerter.common"})
public class AppConfig {
    @Bean
    @Scope("prototype")
    public ISightingsProcessor sightingsProcessor(){
        return new SightingsProcessor();
    }
} 
```

配置实现 ISightingsProcessor 接口的组件：

```
package birdalerter.process;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.LinkedBlockingQueue;

import org.springframework.stereotype.Component;

import birdalerter.domainobjects.IBirdSighting;
@Component
public class SightingsProcessor implements ISightingsProcessor{

    private LinkedBlockingQueue<IBirdSighting> queue;
    private List<ISightingVisitor> sightingVisitors = new ArrayList<ISightingVisitor>();

    public SightingsProcessor(){
    }

    ...
} 
```

配置工厂组件：

```
package birdalerter.process;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Required;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component
public class ProcessorFactory {
    private ISightingsProcessor sightingsProcessor;

    @Autowired
    @Required
    private void setSightingsProcessor(ISightingsProcessor sightingsProcessor){
        this.sightingsProcessor = sightingsProcessor;
    }

    public ISightingsProcessor getSightingsProcessor(){
        return this.sightingsProcessor;
    }
} 
```

连接 AnnotationConfigApplicationContext 并测试：

```
@Test
public void testProcessingDI(){
    @SuppressWarnings("resource")
    AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext();
    context.register(AppConfig.class);
    context.refresh();

    ISightingsProcessor processor = new ProcessorFactory().getSightingsProcessor();
    System.out.println(processor);
    Assert.assertTrue(processor != null);
} 
```

SightingsProcessor 没有被设置器注入，并且断言失败，因为返回的对象为空。希望我错过了一些非常明显的东西。

提前致谢。

**针对 Meriton 编辑：**

谢谢美利通的回答。

为什么 Spring 不知道新创建的对象？Spring 是否不会在整个应用程序生命周期中维护依赖关系并在创建配置为 bean 的新对象时适当地注入？

老实说，如果我可以帮助它，我不想直接使用`context.getBean(ISightingsProcessor.class)`它，我希望在 setter 方法中注入依赖项而无需手动干预 - 它看起来更干净。

我正在使用接口扩展- 实现对象将作为线程启动`ProcessorFactory`。该应用程序将可配置为具有 n* 个线程，每个线程都在循环迭代中启动。我认为在方法声明中不可能有注释（我可能错了，请告知），因此我使用工厂来提供注入的具体类的新实例。`ISightingsProcessor``Runnable``@Autowired``ISightingsProcessor`

是的，我刚刚查看了`@Scope`注释-您是对的，需要移至`AppConfig` `@Bean`声明（我在此编辑中已完成），谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:47:36.210

```
ISightingsProcessor processor = new ProcessorFactory().getSightingsProcessor(); 
```

这会调用 ProcessorFactory 的构造函数，然后调用构造函数创建的实例的 getter。Spring 无法知道该新创建的对象，因此不会注入其依赖项。您应该向 Spring 询问 ProcessorFactory，例如

```
ProcessorFactory pf = context.getBean(ProcessorFactory.class);
ISightingsProcessor processor = pf.getSightingsProcessor(); 
```

也就是说，我根本不知道你为什么需要类 ProcessorFactory。您也可以直接获取 ISightingsProcessor：

```
ISightingsProcessor processor = context.getBean(ISightingsProcessor.class); 
```

此外，“基于 Java 的配置”和组件扫描是声明 bean 的独立方式。目前，您因此要声明 ISightingsProcessor 两次：一次使用带有 @Bean 注释的工厂方法，一次使用组件扫描和类上的 @Component 注释。做任何一个都可以。事实上，两者都做可能会导致一个 bean 定义覆盖另一个。

哦，`@Scope`注释是针对 bean 定义的（那些你用`@Bean`or注释的`@Component`）。它可能会在注入点 ( `@Autowired`) 上被忽略。

# javascript - 如何在javascript中将父类转换为子类

> ID：14424932
> 
> 赞同：0
> 
> 时间：2013-01-20T13:18:29.503
> 
> 标签：javascript, casting, box2d, box2dweb

我正在使用[box2dweb](http://code.google.com/p/box2dweb/)并且我正在尝试制作一个函数，该函数将添加说明如何根据“身体”形状绘制“身体”。

即：当收到一个'b2BodyDef'时得到形状，并结合外部信息，得到形状规格。为此，我需要将“b2Shape”转换回“b2CircleShape”。

我想用 C++ 这会像

```
 b2CircleShape* shape_circle = dynamic_cast< (b2CircleShape*) >( shape ); 
```

我如何用javascript做类似的事情？我知道还有很多其他方法可以做到这一点（比如在这个例子中传递想要的半径作为参数），但我想做我觉得正确的事情，而不是 hack。

```
function Add_new_drawable_object_to_world( body, type )
{
      GLOBAL_world_objects.push( body );
      var s = new Sprite();

      if ( type == OBJECT_TYPE_PLAYER )
      {
         s.graphics.beginFill ( 0x2222ff, 0.6);

         var b2CircleShape   = Box2D.Collision.Shapes.b2CircleShape;

         var fixture_list = body.GetFixtureList();
         var shape        = fixture_list.GetShape() ;

         // FIXME: TypeError: shape.GetRadius is not a function 
          var radius = shape.GetRadius();

         // here i would draw fancy circle with 'radius' 
```

早些时候我有：

```
 // Create player
   var player     = new b2FixtureDef();   // ball fixture definition
   player.shape   = new b2CircleShape();
   player.density = 0.5;
   player.shape.SetRadius( 0.2 );

   var bodyDef = new b2BodyDef();
   bodyDef.type = b2Body.b2_dynamicBody;
   bodyDef.position.Set( 0.0, 0.0 );

   var body = GLOBAL_world.CreateBody(bodyDef);
   body.CreateFixture( player );

   Add_new_drawable_object_to_world( body, OBJECT_TYPE_PLAYER ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:00:56.127

正如 Bergi 所说，Javascript 没有类，因此私有/受保护成员的概念并不真正存在。我建议看看 box2dweb 是如何做到这一点的，因为调试绘图显示与您在这里所做的几乎完全相同。`b2World.prototype.DrawShape`在 box2dweb 源码中搜索。

如果它让你感觉更好，在原始 C++ b2CircleShape 中，成员变量是公共的，所以没有 GetRadius 并且直接访问“内部”:)

# javascript - 布局phonegap

> ID：14424935
> 
> 赞同：1
> 
> 时间：2013-01-20T13:19:01.480
> 
> 标签：javascript, android, html, cordova

我找不到如何设置带有电话间隙的布局

导航到应用程序的最佳方式是在 html 或 javascript 中使用用户 href 吗？

在这种情况下，我使用 html 页面，但我不想每次都写相同的标题，标题...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:55:37.793

您可以使用[jQueryMobile](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html)有效地在页面之间导航。

另外，请查看 StackOverflow 上的这个[问题](https://stackoverflow.com/questions/11700794/how-can-i-navigate-to-another-page-dynamically-in-phonegap)。

# php - Facebook API - 多个操作 - 1 个 API 请求

> ID：14424937
> 
> 赞同：-1
> 
> 时间：2013-01-20T13:19:08.537
> 
> 标签：php, jquery, facebook

所以我到处搜索，但除了会被限制或删除的过时 FQL（不太确定）之外，我找不到任何东西。所以我正在构建一个应用程序，我想让它发布在假设所有朋友的墙上，但我不想使用 for 循环，因为这会像疯狗一样吃掉主机的 CPU。我的问题是你能建议一个方法吗？

我目前得到的：

*   长寿代币
*   jQuery + PHP 登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:10:02.173

让我们在这里澄清几件事：

1.  [Facebook 查询语言 (FQL)](https://developers.facebook.com/docs/technical-guides/fql/)并**没有**过时，据我所知，没有计划弃用它！
2.  2013年[2 月](https://developers.facebook.com/roadmap/#february-2013)*将***删除**发帖到朋友墙
3.  Facebook 始终建议使用用户发起的共享模型，而不是自动化该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:24:19.690

read about the Batch Requests concept here: [https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

this will enable you to make multiple graph API calls at once

but, this is extremely not recommended to make 1000 calls with it, and it probably won't work at all because you will easily reach facebook's call timeout. FQL will be a better method in this case because you can do it in one query (with start and limits)

# java - 获取 TimeZoneOffset - Java

> ID：14424942
> 
> 赞同：1
> 
> 时间：2013-01-20T13:19:45.943
> 
> 标签：java, timezone, timezone-offset

我正在尝试在 java 中获取“TimeZoneOffset”，并参考[这个](http://doc.java.sun.com/DocWeb/api/java.util.TimeZone)，我实现了这个：

```
long unix_time_at_midnight;
DateFormat dateFormat= new SimpleDateFormat("MM/dd/yyyy");
Date d = new Date((unix_time*1000)/1000);
String d1 = dateFormat.format(d);
unix_time_at_midnight = Long.parseLong(d1);
int m=TimeZone.getOffset(unix_time_at_midnight) ; 
```

我得到“TimeZone 类型的方法 getOffset(int, int, int, int, int, int) 不适用于参数（long）”。任何人都可以指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:25:39.313

The method `Timezone.getOffset(int era, int year, int month, int day, int dayOfWeek, int milliseconds);` is an abstract class and one has to reference it from a implemented `Timezone` subclass.

You're trying to access a non-static method statically, and the compiler is matching it to the abstract method.

The solution you're seeking of is:

```
int m=TimeZone.getDefault().getOffset(unix_time_at_midnight) ; 
```

* * *

**EDIT**: Looking on [`TimeZone`](http://www.blackberry.com/developers/docs/4.1api/java/util/TimeZone.html) on BlackBerry API, I see there is no `getOffset(long date)` method, but [`getOffset(int era, int year, int month, int day, int dayOfWeek, int millis)`](http://www.blackberry.com/developers/docs/4.1api/java/util/TimeZone.html#getOffset%28int,%20int,%20int,%20int,%20int,%20int%29).

A possible solution might be:

```
Date d = new Date((unix_time*1000)/1000)
TimeZone tz = TimeZone.getDefault();
Calendar c = Calendar.getInstance(tz);
c.setTime(d);
int m = tz.getOffset(1, c.get(Calendar.YEAR), c.get(Calendar.MONTH), c.get(Calendar.DAY_OF_MONTH), c.get(Calendar.DAY_OF_WEEK), c.get(Calendar.MILLISECOND)); 
```

# php - mysqli_num_rows() 总是抛出错误

> ID：14424944
> 
> 赞同：0
> 
> 时间：2013-01-20T13:20:06.587
> 
> 标签：php, mysql

我已经到处搜索，但找不到问题的解决方案。我在 php 中有一个登录脚本。当数据库中没有用户输入的值匹配时，会显示一条错误消息。但还会引发另一个警告。

```
Warning: mysqli_num_rows() expects parameter 1 to be mysqli, 
boolean given in C:\xampp\htdocs\index.php on line 26 
```

这是代码。我知道类似的问题已被问过很多次，但没有一个可以为我提供解决方案。这是整个代码。

```
 <?php

    session_start();
    require_once('connectionvariables.php');
    $error_msg = "";

    if(!isset($_SESSION['user_id']))
     {
      if(!empty($_COOKIE['user_id']) && !empty($_COOKIE['username']))
        {
          $_SESSION['user_id'] = $_COOKIE['user_id'];
          $_SESSION['username'] = $_COOKIE['username'];
     }
     else
      {
        if(isset($_POST['submit']))
         {
          $dbc = mysqli_connect(DB_HOST,DB_USER,DB_PASSWORD,DB_NAME);
        $user_username = mysqli_real_escape_string($dbc,trim($_POST['username']));
        $user_password = mysqli_real_escape_string($dbc,trim($_POST['password']));

        if(!empty($user_username) && !empty($user_password))
        {
            $query = "SELECT user_id,username FROM mismatch_user WHERE username =       '$user_username' AND password = SHA('$user_password')";
            $data = mysqli_query($dbc,$query); 
            if(mysqli_num_rows($data) == 1)
            {
                $row = mysqli_fetch_array($data);
                $_SESSION['user_id'] = $row['user_id'];
                $_SESSION['username'] = $row['username'];
                setcookie('user_id',$row['user_id'],time() + ( 60 * 60 * 3600));
                setcookie('username',$row['username'],time() + ( 60 * 60 * 3600));
                header('Location: http://www.google.com');    

            }
            else
            {
                $error_msg = 'enter a valid username and password';
            }
        }
        else
        {
            $error_msg = 'you have to enter username and password to Log In...';
        }
    }
   }
}
?> 
```

这是第 26 行。

```
if(mysqli_num_rows($data) == 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:26:28.060

您的查询中可能有错误。例如，未知的列名或类似问题将让`mysqli_query`返回`false`（布尔值）。我建议您仔细检查查询的内容以修复任何错字。有关详细信息，请参阅[http://php.net/manual/en/mysqli.query.php 。](http://php.net/manual/en/mysqli.query.php)

# c# - 接口上的私有成员

> ID：14424948
> 
> 赞同：2
> 
> 时间：2013-01-20T13:20:44.650
> 
> 标签：c#, .net

我对整个 C# 有点陌生，但基本上我正在为我正在开发的应用程序编写基于插件的架构。每个插件都需要有一些基本的东西，所以我有一个界面如下：

```
interface IPlugin
{
   string Username {get;}
   string Password {get;}
} 
```

问题是用户名和密码只会在实现接口的类中使用，因此不需要将其公开。

所以这意味着我不能使用接口，因为它只允许公开。我在想我可以使用一个抽象类，但是什么是正确的访问修饰符我需要放在一个类成员上以便我可以实现当我从类继承时我可以看到它。

我尝试了以下但它从来没有工作过，我知道为什么它没有，我只是不知道正确的修饰符是什么。

```
abstract class Plugin
{
  private string Username;
}

class Imp : Plugin
{
  this.Username = "Taylor";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:22:40.510

尝试使用`protected`修饰符，以便可以从子类访问字段

```
abstract class Plugin
{
  protected string Username;
  protected string Password;
}

class Imp : Plugin
{
    public Imp()
    {
        base.Username = "Taylor";
        base.Password = "Pass";
    }
} 
```

您可以省略`base`accesor 或`this`改用，但我曾经明确说明我正在更改的内容。它使代码更具可读性并且不那么模棱两可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:22:34.000

您是正确的，因为接口只公开公共方法和属性。您不能在接口中设置访问修饰符。

鉴于您的情况，创建摘要可能是一种正确的方法。要使字段或属性仅对从抽象类*继承*的类可见，您应该使用`protected`访问修饰符。

更多信息：**[受保护的访问修饰符](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.71%29.aspx)**

在您的示例中：

```
abstract class Plugin
{
   protected string Username;
}

class Imp : Plugin
{
  public Imp()
  {
      this.Username = "Taylor"; // No error here...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T13:22:44.963

You are looking for the `protected` modifier.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T13:22:47.427

I think you're looking for the `protected` keyword, like this:

```
abstract class Plugin
{
    protected string Username;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T13:23:21.937

The correct modifier is `protected`. You are right about using an abstract class and not interface in this case - interface is a contract so that the outside world knows some capabilities of the implementors, while abstract class may (and often does) contain some logic and protected members used by that logic.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T13:38:20.887

正如其他人所说，正确的方法是将抽象类作为基类。这意味着只有您的`Imp`班级才能访问`Username`. 但是您可以通过接口实现接近这一目标，尽管不完全如此。

```
interface IPlugin
{
    string Username { get; }
}

class Imp : IPlugin
{
    string IPlugin.Username
    {
        get { return "Taylor"; }
    }
} 
```

关键是`explicit implementation`接口。现在您将无法执行以下操作：

```
new Imp().Username; //error 
```

但是您将能够：

```
((IPlugin)new Imp()).Username; //works 
```

在显式实现中，`Username`仅对接口实例公开，而不对派生类型实例公开。

至于为什么不允许私有，请参阅[C# 接口的非公共成员](https://stackoverflow.com/questions/17576/non-public-members-for-c-sharp-interfaces)

# php - PHP版本升级后出现致命错误

> ID：14424949
> 
> 赞同：0
> 
> 时间：2013-01-20T13:20:48.393
> 
> 标签：php, iis, fatal-error, iis-8, windows-server-2012

重新安装服务器后，我刚刚升级了我的 PHP 版本。以前有效的代码不再有效。它告诉我一个致命错误。

```
Fatal error: in J:\web\intranet\dologin.php on line 40 
```

我检查了附近的线路（39-41 包括在下面），我看不到任何可能出错的地方。

```
$query = $connection->prepare("SELECT COUNT(*) FROM users WHERE user = ? AND password = ?");
$query->execute(array($user, $password));

$result = $query->fetch(); 
```

我在 Windows Server 2012 上运行 PHP 5.4.9。在 php.ini 中，我设置了错误报告以显示所有错误，并且我还启用了 PDO 扩展。

怎么了？

# r - 使用 for() do() 循环语句在 R 中生成外部（1:10,1:10）矩阵

> ID：14424963
> 
> 赞同：0
> 
> 时间：2013-01-20T13:22:51.977
> 
> 标签：r, for-loop, matrix

我希望在 R 中编写一个简单的代码来生成一个如下所示的矩阵。

我知道你开始一个像：

```
 for(i in 1:10){ 
```

但我不确定从这里去哪里。我知道我可以使用`outer(1:10,1:10)`但我希望使用`for()` `do()`声明。

```
 1   2   3   4   5   6   7   8   9   10
 1  1   2   3   4   5   6   7   8   9   10  
 2  2   4   6   8   10  12  14  16  18  20  
 3  3   6   9   12  15  18  21  24  27  30  
 4  4   8   12  16  20  24  28  32  36  40  
 5  5   10  15  20  25  30  35  40  45  50  
 6  6   12  18  24  30  36  42  48  54  60  
 7  7   14  21  28  35  42  49  56  63  70  
 8  8   16  24  32  40  48  56  64  72  80  
 9  9   18  27  36  45  54  63  72  81  90 
 10 10  20  30  40  50  60  70  80  90 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:28:36.020

免责声明：这是一种愚蠢的做法，因为`outer`它是一种更好的选择。出于娱乐和教育目的：

```
#Define dimensions
matx <- 10
maty <- 10
mat <- matrix(NA, matx, maty)

#For loop
for(i in seq_len(maty)){
  mat[,i] <- i * seq_len(matx)
} 
```

请注意，我在循环之前定义了矩阵的大小。[这将防止R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)中描述的生长对象的恐怖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T13:34:33.170

让我解释一下`outer`，你需要 2 个循环（至少如果我想实现它我会怎么做）

```
v <- c()
for(i in 1:10)
  for(j in 1:10)
    v <- c(v,i*j)      ## This is SLOW! (naughty)
matrix(v,ncol=10,nrow=10) 
```

**编辑**

在我的最后一个实现中，我动态分配了非常慢的矩阵大小。最好在循环之前分配矩阵，如下所示：

```
xx <- matrix(NA,ncol=10,nrow=10)
for(i in 1:10)
  for(j in 1:10)
    xx[i,j] <- i*j 
```

使用向量的另一种方法：

```
I <- 1:10
J <- 1:10
I %*% t(J) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T13:52:51.410

另一个建议：

```
lines = 10
output= seq(from=1,by=1,length.out=columns)
i=2
while (i<lines+1){
  temp2 = seq(from=i, by=i, length.out=lines)
  output= cbind(output, temp2)
  i = i+1
} 
```

# php - oracle 10g中的执行函数

> ID：14424966
> 
> 赞同：0
> 
> 时间：2013-01-20T13:23:31.770
> 
> 标签：php, oracle10g

下面的函数在执行时应该发送一条短信。实际上，我几乎没有与 Oracle 合作 8 年多，并且使用 MySQL。有人可以帮助我如何在 Oracle 中执行以下功能。我已经安装了 Oracle 10g 并创建了这个函数，但不知道如何保存和执行它。`sendsms.php`是我服务器中的一个页面，负责从 Oracle 函数数据中获取帖子并发送消息。

```
Create or replace function Send_MSG
    ( 
    P_User_Name in varchar2,
    P_Password  in varchar2,
    P_numbers   in varchar2,
    P_Sender    in varchar2,
    P_msg       in varchar2,
    P_dateSend  in varchar2 default 0, 
    P_timeSend  in varchar2 default 0,
    P_deleteKey in varchar2,
    P_msgKey    in varchar2
    )
    Return varchar2 is
    Begin

    Return 'http://www.mywebsite.com/sendsms.php?mobile='||P_User_Name||'&'||'password='||P_Password||'&'||'numbers='||P_numbers||'&'||'sender='||P_sender||'&'||'msg='||xx_unicode(P_msg)||'&'||'dateSend='||nvl(P_dateSend,0)||'&'||'timeSend='||nvl(P_timeSend,0)||'&'||'msgId='||P_msgKey||'&'||'applicationType=24';

    End Send_MSG; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:48:10.457

如果您希望 oracle 转到该 url 并从中获取输出，则只需将您的返回行更改为：

```
return utl_http.request(
'http://www.mywebsite.com/sendsms.php?mobile='||P_User_Name||'&'||'password='||P_Password||'&'||'numbers='||P_numbers||'&'||'sender='||P_sender||'&'||'msg='||xx_unicode(P_msg)||'&'||'dateSend='||nvl(P_dateSend,0)||'&'||'timeSend='||nvl(P_timeSend,0)||'&'||'msgId='||P_msgKey||'&'||'applicationType=24'); 
```

ps如果需要设置代理，需要调用

```
utl_http.set_proxy('your-proxy:port', ''); 
```

在返回之前。

# c - Avoid Deadlock - Process

> ID：14424971
> 
> 赞同：0
> 
> 时间：2013-01-20T13:23:58.617
> 
> 标签：c

I want to know how can I avoid a deadlock in this program

```
void transfer(int from, into to, double amount) {
     sem_t *sem_from, *sem_to;
     sem_from=get_sem(from); //function that obtains the semaphore from bank account argument
     sem_to=get_sem(to);
     sem_wait(sem_from);
     sem_wait(sem_to);
     withdraw(from, amount); 
     deposit(to, amount); 
     sem_post(sem_to);
     sem_post(sem_from);
} 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T13:39:30.533

您可以通过始终以相同的顺序获取锁来避免死锁。

由于您的帐号是整数，因此将它们锁定在一个自然顺序：最小（或最大）在前。（并以相反的顺序释放。）

就像是：

```
if (from < to) {
  sem_one = get_sem(from);
  sem_two = get_sem(to);
} else if (to < from) {
  sem_one = get_sem(to);
  sem_two = get_sem(from);
} else {
  // weird self transfer, deal with it
}
sem_wait(sem_one);
sem_wait(sem_two);
// process transaction
sem_post(sem_two);
sem_post(sem_one); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:44:17.937

您可能正在以不同的顺序锁定。假设在线程 1`from`中等于 1 并且`to`等于 2。在线程 2`from`中等于 2 并且`to`等于 1。然后你有这样的东西：

时间 1：线程 1：锁 1 线程 2：锁 2

时间 2：线程 1：无法锁定 2，线程 2：无法锁定 1

僵局。

# html - FixedHeader 和固定菜单栏

> ID：14424972
> 
> 赞同：3
> 
> 时间：2013-01-20T13:24:04.743
> 
> 标签：html, css

我一直在修补这个问题太久了，所以我在这里提出了问题。我试图在网页顶部有一个菜单栏。我的方法的问题是内容页面在菜单栏“后面”滚动，这会导致[DataTable/FixedHeader](http://www.datatables.net/extras/fixedheader/)出现问题。它不会在菜单中停止表格的标题，而是滚动到菜单并锁定在屏幕顶部。![在此处输入图像描述](../Images/df967d4b79a5d2a372f49d8ed5b7ba67.png).

CSS看起来像这样

```
#header {
    width:100%;
    height:50px;
    position: fixed;
    top:0;
    background-color:rgba(255,0,0,0.5);
}

#content {
    background-color:rgba(0,0,255,0.5);
    position: static;
    margin-top: 50px;
} 
```

我能做些什么来阻止表格一直向上滚动并且标题停止在菜单下方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:47:16.803

我想您可能会在 DataTable/FixedHeader 的文档中找到答案。正如您在此处看到的，您可以[指定以下内容](http://www.datatables.net/extras/fixedheader/options)：

> **offsetTop**指定从窗口顶部的偏移量，当滚动时固定标题被锁定到该位置。这对于使用页面顶部的固定元素很有用 - 例如 Twitter Bootstrap 固定菜单。

```
$(document).ready( function () {
    var oTable = $('#example').dataTable();
    new FixedHeader( table, {
        "offsetTop": 40
    } );
} ); 
```

将 更改为`offsetTop`菜单栏的高度（50），您应该一切就绪！

此外，您还可以添加一个 big`z-index`以`#header`确保它保持在其他元素的“顶部”。

```
#header {
    z-index: 9999;
    /* And your other properties here */
} 
```

# r - rstudent() 到 nnet 对象

> ID：14424982
> 
> 赞同：3
> 
> 时间：2013-01-20T13:25:25.310
> 
> 标签：r, polymorphism, neural-network

我正在尝试评估三个对象的剩余正态性：一个 lm() 对象、一个 nnet() 和一个 randomForest()。对于 lm() 使用代码：

```
> qqnorm(rstudent(lmodel)); qqline(rstudent(lmodel))" 
```

它工作得很好。但是对于 nnet() 和 RandomForest() 我没有成功：

```
> Error in UseMethod("rstudent") : 
  no applicable method for 'rstudent' applied to an object of class "nnet" 
```

有人对处理这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:48:09.210

`rstudent`是一个所谓的泛型函数，这意味着`rstudent`将为不同的输入对象调用不同的函数。在计算机科学中，这被称为**多态**，即`rstudent`多态函数。比如`rstudent(lm())`会触发函数`rstudent.lm`。

通用函数的这些特定实现需要为函数支持的每种对象类型编写，并且不会自动生成。你得到的错误表明你的神经网络函数的输出没有具体的实现`rstudent`，即 No `rstudent.nnet`。

解决方案是自己编写这个具体的实现，或者向包维护者提出它的实现。

# php - Get data from a JSON multi-level

> ID：14424989
> 
> 赞同：0
> 
> 时间：2013-01-20T13:26:55.630
> 
> 标签：php, json, export

I have searched and read a lot of different forums to manage JSON data i have tried many things, but none of them works ;(

```
{"data": {"results": [{"qid_data": {"custom_id": "XXXXXX", "labels": "YYYYY", "meta": "{}", "bbox": [73, 57, 128, 516], "obj_id": "ZZZZZZ"}, "qid": "WWWWWWWW"}], "error": 0}} 
```

I would like to get the values of: `custom_id`, `labels`, `bbox`, `objet_id`, `qid`

Right now I have the following code (for example for `custom_id`)

```
$json_output = json_decode($data);
foreach ($json_output as $json_result) {
echo "custom_id:".$json_result->data->results->qid_data->custom_id;
} 
```

I have tried all the variations possible.

`$json_result->results->qid_data->custom_id;`

OR

`$json_result->results->qid_data->custom_id;`

OR

`$json_result->data->results->custom_id;`

OR

`$json_result->results->custom_id;`

I never get the result, always an error

If someone can help on how to export with an example for data `custom_id`, `bbox`, `qid`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T13:33:06.013

```
{"data": {"results": [{"qid_data": {" 
```

不等于

```
$json_result->results->qid_data 
```

它等于

```
 $json_output->data->results[0]->qid_data 
```

注意显示结果的方括号是一个列表

```
{"data": {"results": [{"qid_data": {"
                     ^ 
```

看起来您想要的是迭代该列表

```
foreach ($json_output->data->results as $result) {
    echo "custom_id:".$result->qid_data->custom_id;
} 
```

# postgresql - pgadmin 可以管理大对象吗？

> ID：14424992
> 
> 赞同：3
> 
> 时间：2013-01-20T13:27:23.400
> 
> 标签：postgresql, pgadmin

pgadmin 是否知道 PostgreSQL 大对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:05:45.250

pgAdmin 似乎没有任何*特殊*的大对象支持。但是，您可以使用任何客户端界面上可用的标准 sql 语言函数来管理它们。请参阅[http://dave.webdev.pgadmin.org/docs/1.4/pg/largeobjects.html](http://dave.webdev.pgadmin.org/docs/1.4/pg/largeobjects.html)作为这些函数的参考。

这导致了许多重要的限制。当您从数据库中拉出一个大对象时，您会得到一个转义字符串。例如，您不能拉取文件并将其显示为图像等。