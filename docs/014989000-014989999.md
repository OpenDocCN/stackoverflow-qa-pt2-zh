# StackOverflow 问答 14989000-14989999

# javascript - 正则表达式文字模式匹配多个单词

> ID：14989004
> 
> 赞同：0
> 
> 时间：2013-02-20T20:10:57.230
> 
> 标签：javascript, jquery, regex

试图匹配字面意思 NEGATIVE（仅靠它自己）

但我的正则表达式也匹配这些：

消极的

负稀释

当短语是 NEGATIVE DILUTE 或除 NEGATIVE 之外的任何其他短语时，我怎么能让它完全不匹配

这是在 jQuery 中，到目前为止我的正则表达式是这样的：

```
 /\bNEGATIVE\b/i 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:12:37.383

```
^NEGATIVE$ 
```

这将匹配`NEGATIVE`，并且如果在它之前或之后有任何内容，则不会匹配。基本上，如果字符串只包含短语而不包含其他内容。

这是一个网站，可以解释这个正则表达式和您输入的任何其他内容：[http ://www.regex101.com/r/iA7fY5](http://www.regex101.com/r/iA7fY5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:13:23.983

使用 ^ 表示正则表达式应该从字符串的开头开始，使用 $ 表示匹配的结尾必须等于字符串的结尾：

```
^NEGATIVE$ 
```

# mysql - 想在 SQL 列中使用数学，但它不是 INT

> ID：14989007
> 
> 赞同：0
> 
> 时间：2013-02-20T20:11:13.873
> 
> 标签：mysql, sql

我在“用户”表中有这一行：

```
id = 1; 
birthdate(date) = 1992-02-12; 
joined(int) = 2000; 
```

我想创建这样的东西：

```
SELECT 
  CAST(birthdate as INT(4)) as birthyear, joined 
FROM 
  users 
WHERE 
  (birthyear - joined >= 20) 
```

谁能给我一个提示/提示？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:15:11.117

我想你想要这个功能`year()`：

```
select year(birthdate) as birthyear, joined
from users
where year(birthdate) - joined >= 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:16:18.603

您可以使用该[`YEAR()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)函数获取年份值。然后要获得您想要的结果，您可以使用以下内容：

```
select year(birthdate), joined
from users 
where (joined - year(birthdate)) >= 20 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/10c7a/7)

# mysql - UPDATE 语句是否同时（同时）设置所有值？

> ID：14989008
> 
> 赞同：4
> 
> 时间：2013-02-20T20:11:14.810
> 
> 标签：mysql, sql

非常简单的问题，但我找不到答案。

假设我有一个`var`包含 和 列`foo`的表`bar`，它们都是整数，**当前为 0**。

如果我运行：

`UPDATE var SET foo=foo+1, bar=foo+1`

那么 的价值是`bar`多少？1 还是 2？

如果我改变顺序，它会改变吗？

`UPDATE var SET bar=foo+1, foo=foo+1`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:47:15.613

正如[Joe 的 SQL Fiddle 评论](https://stackoverflow.com/questions/14989008/do-update-statements-set-all-values-concurrently-at-the-same-time#comment21051031_14989008)所指出的，执行列更新的顺序确实很重要。MySQL 文档[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)指出了这一点，指出每个列更新的表达式将按照声明的顺序进行评估，并且它始终使用列的“当前”值：

> 如果您访问要在表达式中更新的表中的列，则`UPDATE`使用该列的当前值。例如，以下语句设置`col1`为比其当前值大一：
> 
> ```
> UPDATE t1 SET col1 = col1 + 1; 
> ```
> 
> 以下语句中的第二个赋值设置`col2`为当前（更新）`col1`值，而不是原始`col1`值。结果是`col1`和`col2`具有相同的值。此行为不同于标准 SQL。
> 
> ```
> UPDATE t1 SET col1 = col1 + 1, col2 = col1; 
> ```
> 
> 单表 UPDATE 分配通常从左到右进行评估。对于多表更新，不能保证以任何特定顺序执行分配。

所以对于`UPDATE var SET foo=foo+1, bar=foo+1`,`foo`将设置为`foo+1`，那么`bar`更新将使用新设置的`foo`in值`foo+1`。

值得注意的是，这种行为与 SQL 标准不同，后者表明所有列更新在概念上应该“同时”发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:35:59.717

顺序在 MySQL 中很重要。此外，您可以执行以下操作：

```
update test set foo=foo+1, bar=foo+1, foo=bar+1; 
```

顺便说一句，这是另一个有用的特定于 MySQL 的技巧：

```
insert into test (foo, bar) values ('some text', MD5(foo)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:53:18.087

注意 - 对于 postgresql，查询在查询开始时使用值执行，而不是在查询执行时动态变化的值

```
create table test (
field1 int2 default 0,
field2 int2 default 0
);

insert into test values (1, 2);

update test set field1 = field2, field2 = field1 +1;

select * from test; 
```

结果：

```
field1, field2
    2,2 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-20T20:29:22.443

foo=1, bar=1 无论顺序如何[编辑：在 MS-SQL 中。（显然我的 MySQL 不好）]

# php - 命名空间和 APC 失败

> ID：14989011
> 
> 赞同：0
> 
> 时间：2013-02-20T20:11:29.177
> 
> 标签：php, namespaces, apc

我正在尝试将 APC 与 PHP 一起使用。我已经从[PHP 手册中复制了用于在 APC 中存储数组](http://php.net/manual/en/function.apc-store.php)的代码；正如我所料，它工作得很好。

当我在失败时引入命名空间时，就会出现我的问题。

```
<?php
namespace tester;

$objs = array();
$objs[] = "123";
$objs[] = "123";
$objs[] = "123";

apc_store('tester:objs', new ArrayObject($objs),60);
$tmp = apc_fetch('tester:objs');
print_r($tmp -> getArrayCopy());
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:36:58.193

啊啊啊！我知道这会很简单！我只是忘记将 ArrayObject 声明为全局命名空间类。在 ArrayObject 前面添加一个斜线有效。傻我！:(

工作代码：

```
<?php
namespace tester;

$objs = array();
$objs[] = "123";
$objs[] = "123";
$objs[] = "123";

apc_store('tester:objs', new \ArrayObject($objs),60);
$tmp = apc_fetch('tester:objs');
print_r($tmp -> getArrayCopy());
exit; 
```

# visual-studio-2010 - 由于 AVG 防病毒软件，签名程序集出错

> ID：14989013
> 
> 赞同：4
> 
> 时间：2013-02-20T20:11:34.157
> 
> 标签：visual-studio-2010, antivirus, assembly-signing

IT 部门昨天更新了我的开发机器上的 AVG 防病毒软件，现在当我尝试编译我的程序集时出现以下错误：

*错误 CS1606：程序集签名失败；输出可能未签名——错误签名程序集——该进程无法访问该文件，因为它正被另一个进程使用。*

该程序集是使用 VS2010 编写的 C#。我正在使用强名称密钥文件对程序集进行签名。

当我在安全模式下运行或暂时禁用 AVG 保护时，没有错误。

我已经关闭了 VS 并在命令行上使用 MSBuild 构建。我已经运行“sn -c”将 CSP 重置为默认值。我尝试向 AVG 添加各种异常：

*   C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys\
*   我的源代码目录
*   甚至走极端加了“C:\”

这些都没有奏效。

当然，我总是可以禁用病毒防护，但我认为 IT 部门不会对此感到太高兴。

有什么想法吗？

# javascript - javascript if语句检查div是否可见不起作用

> ID：14989017
> 
> 赞同：0
> 
> 时间：2013-02-20T20:11:53.480
> 
> 标签：javascript

我一生都无法弄清楚为什么这个 if 语句不起作用。

retrieveInfo 函数传递一个`event`,`code`和 ,`target div`如下所示：

`onmouseover="return retreiveInfo(event, 'M003', 'target')"`

我必须尽可能多地使用提供的代码来完成学校作业。

```
function retreiveInfo(e, movieCode, div) {
    if(e.pageX) {
        this.x = e.pageX;
    } else {
        this.x = e.clientX;
    }
    if(e.pageY) {
        this.y = e.pageY;
    } else {
        this.y = e.clientY;
    }

    div = document.getElementById(div);

    if(div.style.visibility == "visible") {
        console.log("More Good");
    }
    else if(div.style.visibility == "hidden"){
        console.log("Hidden");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:14:40.303

仅当 HTML 标记包含“样式”属性，或者您的代码在其他地方对其进行了修改时，检查“样式”对象才有效。如果有 CSS 使对象的“可见性”属性被“隐藏”，您将无法通过该方法判断。

还有其他方法可以使对象不可见：

*   `display: none`
*   `position: absolute; left: -10000px;`

等等。一个元素可以在另一个隐藏的元素内。因此，确定 DOM 中的特定元素是否可见并不总是一项简单的任务:-)

现在，如果其他地方的某些代码执行以下操作：

```
document.getElementById(whatever).style.visibility = "hidden"; 
```

那么您的代码*应该*可以正常工作。

# apache - 使用带有 Apache 的 mod_proxy 操作 HTML，例如删除广告

> ID：14989018
> 
> 赞同：1
> 
> 时间：2013-02-20T20:11:56.063
> 
> 标签：apache, mod-proxy, man-in-the-middle, mod-proxy-html

现在这只是一个技术挑战，但基本上我想做以下事情：

**创建一个基于 web 的反向（网关）代理[`mod_proxy`](http://httpd.apache.org/docs/trunk/mod/mod_proxy.html)，[`mod_proxy_html`](http://httpd.apache.org/docs/trunk/mod/mod_proxy_html.html)它不仅重写 HTML url 以匹配代理的主机名，而且重写或操作正在代理的 HTML。**

这种对“中间人”网关代理的操作将允许人们做各种事情，例如：

*   移除广告
*   将文本从一种语言翻译成另一种语言
*   以其他方式破解或“改进”原始网站

当然，它也可能被用于很多不好的事情，但这超出了这个问题的范围。

我知道它会`mod_proxy_html`解析原始 HTML 以重写所有 URL，但它是否也允许我编写自己的代码来评估和操作正在解析的 HTML？或者还有其他模块吗？

或者，是否有可用的反向代理可以做到这一点？我愿意适应任何适合此目的的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:06:36.333

通过使用`mod_rewrite`or`mod_proxy_html`你也许可以做到这一点。

这些模块允许您重写/美化 URL，正如您可能已经知道的那样。*您可以更改它们的结构*，以便接收到的网页中的链接如下所示，而不是更改网页的*内容*，这不是 Apache 的角色：

 *```
10.10.1.1/my_secret_injector/alter?url=<the_real_url> 
```

而不仅仅是`<the_real_url>`.

*然后在指定的网络服务器(10.10.1.1)*上以您选择的语言实施您的广告移除算法或任何其他语言。*

# php - 通过 AJAX 使用 PHP 变量更新 URL

> ID：14989022
> 
> 赞同：0
> 
> 时间：2013-02-20T20:12:11.503
> 
> 标签：php, javascript, jquery, mysql, ajax

这里可能是一个简单的解决方案，我很困惑。我有一个`<select>`通过来自 MySQL 用户数据库的数组填充的。那里没问题。I've also got a script that when a certain user is selected, I can via AJAX the user's user_id. 我的问题是将该用户 ID 放入变量 $assigned_to 中，以包含在 URL 中。
对不起，编码太具体了。如果需要，我可以将其分解为更简化的版本。这是我到目前为止所得到的：

```
<script type="text/javascript">
function showData(str)
{
if (str=="")
  {
  document.getElementById("showData").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("showData").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getdata.php?assign_to="+str,true);
xmlhttp.send();
}
</script>

//
//This gets the user_id value from the `<select>` when a user selects it.
//

<?php

//
//Here is the function that displays my users:
//

function userlist()
{               
echo "<select name=\"assigned_to\" onChange=\"showData(this.value)\">";
echo "<option default value=\"\">Assignee</option>";

$mysqli = new mysqli("xxx", "xxx", "xxx", "xxx");
$userlist = "SELECT * FROM users where user_level = 2";
$result = $mysqli->query($userlist);

while( $row = $result->fetch_assoc() ) {
echo "<option value=\"".$row['user_id']."\">".$row['first_name']." ".$row['last_name']."</option>";
}
echo "</select>&nbsp;";
}
echo "<p>";
echo userlist();

echo "<a id=\"show\" href=\"index.php?page=overview&location=advance&assignee=\"".$assign_to."\">Assign</a></p>";
?>
<!-- The line below **will** display the correct user_id value when selected -->
<div id="showData">User Id Shows Here</div> 
```

最后一个 URL 变量 $assign_to 是我希望 $row['user_id'] 选择返回时的值。

我了解解决所有这些问题的理想方法是将表单发布到 php 页面并使用 _POST 来检索所有这些变量。不幸的是，在这种情况下，我需要 URL 中的变量。

一如既往地感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:49:12.263

你在这里所做的应该已经做了你想做的事情。更改Select-box时，您的showdata功能将带有Select-box的当前选择值：

```
<select name=\"assigned_to\" onChange=\"showData(this.value)\"> 
```

在 showData 函数中，检索到的参数“str”包含此值，并将其附加到 url：

```
xmlhttp.open("GET","getdata.php?assign_to="+str,true); 
```

您应该在首选调试工具（firebug、chrome 开发人员工具）的网络选项卡中看到它，或者您可以将其记录到控制台/警告它

```
alert("getdata.php?assign_to="+str);
console.log("getdata.php?assign_to="+str); 
```

你会看到它有效

编辑：

可以像这样使用参数重定向到当前页面（即使我不明白您为什么要这样做......）：

```
var current_url = document.location.href;
var separator = current_url.indexOf('?') === -1 ? '?' : '&'; 
document.location.href = current_url + separator + 'assign_to=' + str; 
```

编辑2：

将此功能添加到您的脚本中：

```
function setLinkAssignee(assignee) {
  var i, newParams = [], link = document.getElementById('show'),
      href = link.getAttribute('href')
      linkArr = href.split('?')
      params = (linkArr[1] || '').split('&');

  for(i=0; i < params.length; i++) {
    if(params[i].indexOf('assignee=') === -1) {
      newParams.push(params[i]);
    }
  }
  link.setAttribute('href', linkArr[0] + '?' + newParams.join('&') + '&assignee='+assignee);
} 
```

如果您不希望完成 ajax 请求，请像这样调用它：

```
<select name=\"assigned_to\" onChange=\"setLinkAssignee(this.value)\"> 
```

或者在你的 showData 中像这样：

```
function showData(str) {
  // your stuff here
  setLinkAssignee(str); 
```

# javascript - CoffeeScript 中未定义静态属性的问题

> ID：14989023
> 
> 赞同：1
> 
> 时间：2013-02-20T20:12:15.573
> 
> 标签：javascript, coffeescript

所以我正在为一个项目编写一些咖啡脚本，并且我正在尝试在一个类中创建一些静态属性。我一直在关注代码库中的另一个文件，它成功地做了同样的事情，但我的不工作。

我的代码

```
class Messages
    @toggleUnreadConversations:()->
        # This is the line in question, Messages is defined with all the 
        # functions but the property ViewOnlyUnread is undefined

        Messages.ViewOnlyUnread = !Messages.ViewOnlyUnread

    @init:->
        @ViewOnlyUnread = false 
```

代码库中其他成功使用静态属性的代码

```
class Map
   @CacheRealtor: (realtor) ->
        realtor.realtor_id = parseInt(realtor.realtor_id)

        # Here the static property IdToRealtorMap is defined 
        Map.IdToRealtorMap[parseInt(realtor.realtor_id)] = new Realtor()
   @Init: ->
       @IdToListingMap = []
       @IdToRealtorMap  = [] 
```

据我所知，当页面加载时调用 init 时，这些 init 函数的调用方式相同。这两个类都是静态类，永远不会创建它们中的任何一个的实例。有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:21:48.203

该`init`函数正在设置一个**实例变量**，但您的`toggleUnreadConversations`函数试图引用它，就好像它是您的类的属性一样。

您应该使用`@`来引用设置的实例变量`init`：

```
class Messages
  @toggleUnreadConversations: ->

    # reference the instance variable
    @ViewOnlyUnread = !@ViewOnlyUnread

  @init: ->
    @ViewOnlyUnread = false 
```

# python - 索引 2 处的 for 循环内的列表索引超出范围

> ID：14989024
> 
> 赞同：0
> 
> 时间：2013-02-20T20:12:16.127
> 
> 标签：python, list, python-3.x

所以我遇到了一个非常奇怪的错误。我有一个模块 ten.py 包含

```
import math

def go():
    list_ = list(range(3, 100000, 2))
    max_ = int(math.sqrt(len(list_)))
    print(len(list_))
    print(max_)
    for i in range(1,max_):
        print(i)
        current = list_[i]
        for j in list_[i+1:]:
            if j % i == 0:
                list_.remove(j)
go() 
```

输出是这样的：

```
49999
223
1
2
Traceback (most recent call last):
  File "D:\Documents\KomodoProjects\Project Euler\ten.py", line 14, in <module>
    go()
  File "D:\Documents\KomodoProjects\Project Euler\ten.py", line 10, in go
    current = list_[i]
IndexError: list index out of range 
```

如您所见，列表的大小为 49999，for 循环仅达到 223。尽管如此，它已经在 index=2 处给出了超出范围的异常！

for 循环中的 list_ 是否以某种方式不引用 go() 中的 list_？我不知道为什么会出现这个问题。

通过更改修复

```
for i in range(1,max_): 
```

to for i in list_:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:23:30.943

这是你的问题：

您有一个`for`循环从`list_`. 它删除了这么多`list_`长度为 2 的数字，然后`list_[2]`失败并引发异常。

它删除这么多数字的原因是您正在计算`x % 1 == 0`对于任何 x 值都是正确的。由于您从列表中的第 2 位开始，因此您将删除该位置之后的所有内容。

我不确定你在做什么，但这将是一种缓慢的方法，不管它是什么。这看起来有点像筛选素数……你可能想在 Google 上搜索“Python 查找素数”之类的东西。

# javascript - 将处理程序（具有不同操作）附加到多个生成的元素的最佳实践？

> ID：14989026
> 
> 赞同：0
> 
> 时间：2013-02-20T20:12:30.393
> 
> 标签：javascript

假设我正在动态生成一些控件（使用 jQuery 的示例）：

```
for (var c=0 ; c<100 ; c++) {
  $(body).append('<input id="btn_'+c+'" type="button" value="Button #'+c+'" />');
} 
```

而且我希望他们根据点击哪个按钮（鼠标悬停等）有不同的操作，附加处理程序的最佳做法是什么，以便它知道正在点击哪个按钮？我可以想到 3 种选择：

1.  将相同的处理程序（通过 javascript）附加到所有按钮，并让处理程序解析元素 id 以确定单击哪个
2.  在为控件生成 HTML 时添加处理程序内联（即有 onclick="do_something('+c+');"）
3.  为在处理程序参数中设置了按钮编号的每个元素附加不同的处理程序（例如，使用循环）

哪种方法更受欢迎，或者还有其他选择吗？

**编辑：**

抱歉，但我可能应该提到生成元素的数量是可变的，并且处理程序只需要按钮编号（即，每个按钮不是完全不同的处理程序函数）。一个简单的示例用例是您希望用户订购的通过 ajax 抓取的列表，在这种情况下，处理程序只需要列表的索引号。

对于具有不同处理程序的固定数量的元素，大卫的回答是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:16:48.643

在这种情况下，我会说[事件委托](http://davidwalsh.name/event-delegate)是首选：

```
$('body').on('click', 'input', function(e) {
    // do something with this (the element that was clicked)
    console.log(this.value);
}); 
```

这样，只有一个事件侦听器附加到按钮的父级（`body`在本例中），但您仍然可以访问在处理程序中单击的按钮元素。

您可以 f.ex 将操作映射到按钮，如下所示：

```
for (var c=0 ; c<100 ; c++) {
    $('body').append('<input id="btn_'+c+'" type="button" value="Button #'+c+'" />');
}

var actions = {
    btn_0: function() {
        console.log('btn 0 clicked');
    },
    btn_1: function() {
        console.log('btn 1 clicked');
    }
    // etc...
};

$('body').on('click', 'input', function(e) {
    $.isFunction(actions[this.id]) && actions[this.id].call(this);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-07T13:31:09.593

方法 1 最灵活。David 提到的“事件委托”也只是您方法 1 的一种变体（如果您将 Object 键转换为函数参数）。与其他事件赋值一起使用时，可以灵活地开启/关闭对同一对象的不同处理。您还可以更好地处理“事件传播”。

方法 2 简单但功能有限，与其他方法（如 jQuery）一起使用注册事件处理程序时有点奇怪。一篇关于内联处理程序的好文章：[https ://www.htmlgoodies.com/html5/javascript/working-with-inline-event-handlers.html](https://www.htmlgoodies.com/html5/javascript/working-with-inline-event-handlers.html)

方法 3 的性能听起来很糟糕，因为该函数必须多次编译，并且会使您的代码更难维护。

# jquery - jquery fancybox iframe 更改href

> ID：14989027
> 
> 赞同：0
> 
> 时间：2013-02-20T20:12:31.080
> 
> 标签：jquery, iframe, dynamic, fancybox, href

我当然错过了一些基本的东西，但我只是想看看谁能帮助我。在这个网站上：www.hedenstugan.se 我有一个小小的预订表格。当您更改上部选择字段中的日期时，将调用 ajax 脚本并返回更新的下部日期选择字段。

到目前为止，一切都很好。

但是，当单击橙色提交按钮时，我有点希望 iframe 的 URL 也会更改，但它仍然保留第一个初始值。

我的 fancybox 启动器如下所示：

```
$("#b_availSubmitButton_foo").fancybox({
        'overlayColor'      : '#000',
        'width'             : '90%',
        'height'            : '90%',
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe',
        'href'              : $("#b_availFrm").prop("action")
                                +'?aid='+$("input[name=aid]").val()
                                +'&hotel_id='+$("input[name=hotel_id]").val()
                                +'&lang='+$("input[name=lang]").val()
                                +'&pb='+$("input[name=pb]").val()
                                +'&stage='+$("input[name=stage]").val()
                                +'&hostname='+$("input[name=hostname]").val()
                                +'&checkin_monthday='+$("select[name=checkin_monthday]").val()
                                +'&checkin_year_month='+$("select[name=checkin_year_month]").val()
                                +'&checkout_monthday='+$("select[name=checkout_monthday]").val()
                                +'&checkout_year_month='+$("select[name=checkout_year_month]").val()
}); 
```

我也试过这个解决方案[将动态href传递到Fancybox Iframe](https://stackoverflow.com/questions/12074798/passing-a-dynamic-href-into-fancybox-iframe)但没有成功。

看起来一切正常，但 iframe 中的 URL 仅具有更改的“签入日期”而不是签出日期 - 它从选择字段中获取初始值。

可能与 ulr 是在文档加载时而不是在实际点击时生成的事实有关。

我还尝试使用函数调用设置 HREF 选项，但这似乎是不可能的。喜欢：

```
function buildHref(){
    return $("#b_availFrm").prop("action")
    +'?aid='+$("input[name=aid]").val()
    +'&hotel_id='+$("input[name=hotel_id]").val()
    +'&lang='+$("input[name=lang]").val()
    +'&pb='+$("input[name=pb]").val()
    +'&stage='+$("input[name=stage]").val()
    +'&hostname='+$("input[name=hostname]").val()
    +'&checkin_monthday='+$("select[name=checkin_monthday]").val()
    +'&checkin_year_month='+$("select[name=checkin_year_month]").val()
    +'&checkout_monthday='+$("select[name=checkout_monthday]").val()
    +'&checkout_year_month='+$("select[name=checkout_year_month]").val()
    ;
}); 
```

然后像这样调用fancybox：

```
 $.fancybox.open({
        href: buildHref,
        type: 'iframe'
    }); 
```

但正如我所说 - 没有工作

我在这里想念什么？我猜是瞎了眼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:23:43.253

哇！我自己找到了。答案是在`beforeLoad`回调中改变它。

```
$("#b_availSubmitButton").fancybox({
        beforeLoad : function() {
            this.href = $("#b_availFrm").prop("action")
            +'?aid='+$("input[name=aid]").val()
            +'&hotel_id='+$("input[name=hotel_id]").val()
            +'&lang='+$("input[name=lang]").val()
            +'&pb='+$("input[name=pb]").val()
            +'&stage='+$("input[name=stage]").val()
            +'&hostname='+$("input[name=hostname]").val()
            +'&checkin_monthday='+$("select[name=checkin_monthday]").val()
            +'&checkin_year_month='+$("select[name=checkin_year_month]").val()
            +'&checkout_monthday='+$("select[name=checkout_monthday]").val()
            +'&checkout_year_month='+$("select[name=checkout_year_month]").val()
            ;
        },
        'overlayColor'      : '#000',
        'width'             : '90%',
        'height'            : '90%',
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe'
}); 
```

奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T15:18:00.963

当然，你会更好地简化这个：

```
$("#b_availSubmitButton").fancybox({
    beforeLoad : function() {
        this.href = $("#b_availFrm").prop("action")
        +'?' + $("#b_availFrm").serialize()
    },
    'overlayColor'      : '#000',
    'width'             : '90%',
    'height'            : '90%',
    'autoScale'         : false,
    'transitionIn'      : 'none',
    'transitionOut'     : 'none',
    'type'              : 'iframe'
}); 
```

# wordpress - 一段时间后如何将用户重定向到另一个站点？

> ID：14989029
> 
> 赞同：0
> 
> 时间：2013-02-20T20:12:42.203
> 
> 标签：wordpress

我正在将 wordpress 用于网站。如果任何用户从我的网站访问页面 X，我想在 30 秒后将他们重定向到另一个网站。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:37:50.547

将此 javascript 添加到您的页脚：

```
window.setInterval(yourfunction, 10000); //100 seconds

function yourfunction() { window.location = "http://www.yoururl.com"; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T03:09:35.343

在您的 header.php 中，将此代码添加到 head 标记部分

```
 <head>
     <!-- your other meta element -->
     <meta http-equiv="refresh" content="30;URL='http://example.com/'">
 </head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T20:45:06.457

在我开始查看 wordpress 函数文档之前，混合了这两个答案。我找到了一些东西并将其添加到我的 wordpress 网站上的 header.php 中。

```
<?php if ( is_page('Page Title') ) { ?>
   <script type="text/javascript">
      window.setInterval(customRedirect, 3000);
      function customRedirect() { 
         window.location = "http://www.google.com"; 
      }
   </script>
<?php } > 
```

因此，每当用户输入具有该标题的页面时，它都会进行重定向。谢谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-15T10:53:52.937

有用我发现来自 Camilo 的代码片段导致网站崩溃，所以我将最后一行更改为：

```
<?php }> 
```

到：

```
<?php }; ?> 
```

现在它可以工作了。

# c++ - 如何让 Dev C++ 下编译的程序更小？

> ID：14989031
> 
> 赞同：-2
> 
> 时间：2013-02-20T20:12:44.007
> 
> 标签：c++, performance, compiler-construction, dev-c++

我使用的是 5.4.0 版，最简单的程序（空屏）几乎有 1 兆字节。例如，编译后这个简单的程序有 1 276 KB。但是删除#include 会使文件非常小：27 KB。

```
#include<iostream>
using namespace std;

int sum(int a){
    if(a>1) 
        return sum(a-1)+a;
    else
        return 1;
}

int main(){

    int a=1;

    while(a>=0){
        cout<<"a = ";
        cin>>a;
        cout<<"1+...+a = "<<sum(a)<<endl;
    }

    return(0);
} 
```

在我看来，应该可以为上述生成一个小得多的可执行文件。我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:13:17.237

以下是我经验中的一些想法：

## 死代码

查看所有源代码并删除未使用的代码，包括未使用的函数和不会执行的语句块。使用静态代码分析器来帮助找到它们。

## 打印

`printf`除非必要，否则不要使用。它包含大量代码，尤其是格式化浮点数。

## 链接未使用的函数

您的编译器是否从库文件中提取未使用的函数？
一些编译器链接整个库文件，而不仅仅是其中使用的函数。

## 调试与发布指标

您是在测量调试（带符号）还是发布（无符号）？
您是在测量静态库版本还是只测量没有动态库的代码？

## 内联函数

查看所有内联函数。
将较大的内联函数转换为非内联函数。

## 模板

从模板和函数中删除通用代码。

## 静态和全局初始化变量

减少静态和全局初始化变量的数量。
初始化会占用可执行文件中的空间。`static const`尽可能声明常量变量。

## 字符串和文本

将常见的文本文字放入一个文件并返回指向它们的引用或常量指针。
这将帮助编译器跨模块合并重复的字符串。

## 常见代码片段

分析常见代码片段的函数。将它们分解为单独的函数或方法。

## 动态库

将一些功能移动到动态库中。让操作系统决定何时使用代码。

## 未来的功能

删除与当前未执行的未来功能相关的所有代码。

## 将数据移动到数据文件

数据会占用可执行文件中的空间，尤其是用于初始化静态或全局变量的值。考虑将数据移动到文件并按需加载数据。

* * *

其中一些建议会缩小您的可执行文件，但不会缩小应用程序，例如数据文件和动态库。它们将是您的程序执行所必需的，但在可执行文件中可能不需要它们。

一些建议会降低应用程序的性能。抱歉，这是*时间/内存的权衡*：您可以节省内存，但会花费更多的执行时间（例如打包字段）。

# html - 签名需要使用 RTF 而不是 HTML。从 VB6 传入 Outlook

> ID：14989038
> 
> 赞同：0
> 
> 时间：2013-02-20T20:13:30.063
> 
> 标签：html, outlook, rtf

我在 VB6 中将一串 HTML 格式的文本作为签名传递给 Outlook，但在某些具有非常旧版本 Outlook 的非常旧的计算机上，它遇到了一个问题，即连字符会开始一个新行，或者如果我使用标签来修复然后自动换行将完全关闭。

我想尝试使用 RTF 而不是希望这能解决问题。但是，我仍然拥有 HTML 格式的签名，我需要使用富文本格式将其作为字符串传递到 Outlook。我找不到任何好的资源，或者即使有可能，每当我尝试时，它们都会出现转义命令和所有内容。

我当前的 HTML 字符串：

```
string = vbCrLf & vbCrLf & "<B><FONT face=Arial color=#365f91 size=2>" & _
                        strName & "</FONT>" & _
                        "<FONT face=Arial size=2><BR>" & _
                        "<I>" & strPosition & "</I>" & _
                        "</FONT></B><BR/><B><FONT face=Arial size=2>" & _
                        strAddress1 & "</FONT></B><BR/><FONT face=Arial size=1>" & _
                        strAddress2 & "<BR>" & strCity & ", " & _
                        strProvince & ", " & strPostalCode & _
                        "<BR>" & strCountry & "<BR>Office: " & strPhone & _
                        "<BR>" & strEmail & "<BR>www.website.com<BR>" & _
                        "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" & _
                        "<I><FONT face=Arial size=2>" & strImageCaption & "</FONT>" & _
                        "<BR/><BR/><BR/></I><FONT face=Arial size=1>" & strDisclaimer & _
                        "</FONT></P>" 
```

任何人都可以帮助我将其作为 rtf 传递或知道我可以这样做吗？将不胜感激！

编辑：或者，如果有人知道如何用自动换行/换行连字符解决问题，我也会喜欢的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:23:26.350

这可以是[RTF](http://msdn.microsoft.com/en-us/library/office/aa140277%28v=office.10%29.aspx)模板的想法，由写字板制作并稍作改动。我假设您可以混合 VB 的东西来替换变量文本。

要得到这个：
**你好**
*位置*
My‑street
Mystreet 2
我的城市
我的免责声明

（我不知道如何在 SO 标记中使用颜色，但在 RTF 中，RED 的第一行和我的免责声明要小一点）

使用这个 RTF：

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1043{\fonttbl{\f0\fnil\fcharset0 Arial;}}
{\colortbl ;\red255\green0\blue0;}
\cf0\b\fs22 Hello\par
\cf0\b0\i\fs24 postion\par
\i0 My\_street\par
Mystreet 2\par
My city\par
\fs22 My disclaimer\par
\f1\par
} 
```

根据 RTF 规范，在 My 和 street 之间，我放置了一个不间断的连字符。在 html 中，同样可以通过使用来实现

```
&#8209; 
```

# c# - 如何在 Mono for android 中使用 Runnable

> ID：14989040
> 
> 赞同：15
> 
> 时间：2013-02-20T20:13:37.057
> 
> 标签：c#, xamarin.android, runnable

我正在尝试学习 Monodroid！我尝试将 java 代码重新编写为 C#，但遇到了一些问题：我不明白如何使用 Runnable。那是Java中的代码片段，我无法翻译成C#：

```
public class RunActivity extends Activity implements OnClickListener
{
   ...

   private Handler mHandler;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.run);
       ... 
       mHandler = new Handler();
       mHandler.postDelayed(mUpdateGeneration, 1000);
   }

   private Runnable mUpdateGeneration = new Runnable()
   {
       public void run()
       {
          mAdapter.next();
          mLifeGrid.setAdapter(mAdapter);

          mHandler.postDelayed(mUpdateGeneration, 1000);
       }
   }; 
   ... 
```

你能解释一下我必须如何编写这段代码并使用 Runnable 吗？此 Runnable 用于更新 gridview 适配器并在后台将数据从适配器加载到 gridview。如果我尝试在主线程中更新适配器？像这样（C#代码）：

```
mAdapter.next()
mLifeGrid.Adapter = mAdapter;
Thread.Sleep(1000); 
```

活动卡住了。如果我不能使用 Runnable，如何在新线程中实现适配器和网格视图的更新？如果我使用 C# 线程，像这样：

```
...
Thread th = new Thread(new ThreadStart(mUpdatGeneration));
th.Start();
}
public void mUpdateGeneration()
{
    mAdapter.next()
    mLifeGrid.Adapter = mAdapter;
    Thread.Sleep(1000);
} 
```

它会生成错误“System.NullReferenceException”

感谢大家的帮助！PS对不起我的英语:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:26:12.753

似乎有[一个重载`PostDelayed()`需要一个`Action`参数](http://androidapi.xamarin.com/?link=M%3aAndroid.OS.Handler.PostDelayed%28System.Action,System.Int64%29)，所以直接的方法是做这样的事情：

```
void UpdateGeneration()
{
    mAdapter.next();
    mLifeGrid.setAdapter(mAdapter);
    mHandler.PostDelayed(UpdateGeneration, 1000);
}

// ...

mHandler.PostDelayed(UpdateGeneration, 1000); 
```

（免责声明：我从未真正使用过 MonoDroid，但它*应该*是有效的。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-07T23:08:08.817

以下是在 c# 中翻译 Runnable 实现的方法

```
private Java.Lang.Runnable mUpdateGeneration = new Java.Lang.Runnable(() =>
{
     mAdapter.next();
     mLifeGrid.setAdapter(mAdapter);
     mHandler.postDelayed(mUpdateGeneration, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-06T04:41:50.297

测试这段代码。我希望问题得到解决

```
 Task.Delay(10).ContinueWith(t =>
        {
            this.RunOnUiThread(() => adepter.NotifyDataSetChanged());

        }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

# java - Android SQLite 查询订单问题

> ID：14989044
> 
> 赞同：8
> 
> 时间：2013-02-20T20:14:01.857
> 
> 标签：java, android, sql, database, sqlite

如何查询数据库以显示包含两个不同 ID 的数据的表，但每行交替每个 ID，但仍按时间排序。例如。数据库有 10 个 ID1 元素和 10 个 ID2 元素。

我需要它是：

```
ID1 #data #2minutes ago

ID2 #data #15minutes ago

ID1 #data #4minutes ago

ID2 #data #50minutes ago 
```

有任何想法吗？

更新：ID 的数量必须能够从 1 到 n 不同，而且我目前正在尝试通过 SQLite.query() 方法来做到这一点。

更新 2：#data 表示该行中的数据列，而不仅仅是一个，因此例如可能有 5 列。此外，数据必须通过游标返回。

更新3：进一步阐述，下面是我试图达到的表格和预期结果。

输入表（按时间排序）..

```
id | name | number | time
01   Tim    561481   2 minutes ago
02   Jon    951484   5 minutes ago
02   Jon    978284   7 minutes ago
04   Zen    171484   15 minutes ago
04   Zen    171484   17 minutes ago
03   Ken    468488   20 minutes ago
02   Jon    978284   32 minutes ago 
```

和输出：注意，我需要在可能的情况下在数据库中替换 Id，但仍然按时间排序整个事情，例如：

```
id | name | number | time
01   Tim    561481   2 minutes ago
02   Jon    951484   5 minutes ago
04   Zen    171484   15 minutes ago
03   Ken    468488   20 minutes ago
02   Jon    978284   7 minutes ago
04   Zen    171484   17 minutes ago
02   Jon    978284   32 minutes ago 
```

**更新 4：**更喜欢一个非常简单的解决方案，例如复杂而干净的 sql 查询等。 **更新 5：**尽管不得不放弃赏金，但这个问题仍然没有得到一个简单的解决方案来做我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:43:54.643

```
SELECT t.id, t.time, 
    (
        SELECT count(*) 
        FROM tab u 
        WHERE u.id = t.id AND u.time < t.time 
        ORDER BY u.time
    ) counter 
FROM tab t 
ORDER BY counter, t.time 
```

我希望我正确理解了你的问题。

随机数据的输出：

```
id  time  counter
2   2   0
0   7   0
4   16  0
1   21  0
3   50  0
2   5   1
1   29  1
0   32  1
4   38  1
3   69  1
2   25  2
1   30  2
0   37  2
4   53  2
2   51  3
4   59  3
0   87  3
4   62  4
2   73  4
0   90  4 
```

不要忘记使用索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:47:17.383

尝试以下操作：
1\. 为两个集合（ID1 的项目和 ID2 的项目）创建 SELECT 语句
2\. 在这些语句中使用 ORDER BY 来获取时间/IDx 顺序
3\. 添加一列

```
(SELECT COUNT(*) FROM table AS tab2 WHERE tab2.item <= tab1.item) AS rownum
```

4\. 为两个集合添加列表标识符
5\. 使用 UNION 来联合两个结果集
6\. 从该联合列表中选择并组成一个构建为 (rownum||set identifier)
的字段 7\. 添加一个 ORDER BY 组合字段到整个表达

***更新：***这更适用于两张桌子；在查看了上面的示例更新并尝试了一些事情之后，我认为在单个 SQL 中编写代码相当困难（使用 SQLite）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:00:25.953

我发现您执行两个查询的唯一解决方案

首先查询按ID和日期排序的数据

```
SELECT ID,
       Date,
       COUNT(1) AS TotalRows
FROM Table
ORDER BY ID, Date 
```

然后查询你拥有的不同ID，存储在一个数组中，我们称之为`idsArray`

```
SELECT COUNT(1) FROM Table GROUP BY ID 
```

将第一个查询的所有结果读入 Queue: 伪代码：

```
Queue<YourData> yourQueue = // read it from database cursor

ArrayList sortedData = new ArrayList();

YourData d = null;

String lastId = null;

int position = 0;

while((d = yourQueue.dequeue()) != null) {

    if (lastId == null || d.id.equals(idsArray[position])) {

        sortedData.add(d);

        lastId = d.id;

        if (position < idsArray.length -1) {
            position ++;
        } else {
            position = 0;
        }
    } else {
        yourQueue.enqueue(d);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:23:13.800

就像是：

```
select a, b, c from (
    select a, b, c, rank = row_number() over (order by time) * 2 FROM ID1
    UNION ALL
    select a, b, c, rank = row_number() over (order by time) * 2 + 1 FROM ID2 ) t
order by rank 
```

[编辑：我的坏 - 在 SQLite 中不可用]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T01:57:34.133

如果相同的 id 可能无法具有相同的时间，则此查询将起作用。

```
select id, name, rc from
(select id,  name , @rownum:=@rownum+1 as rc from tbl,
(select @rownum:=0) r 
order by (cast(substring(time,1,2) as UNSIGNED)/rc)*cast(ascii(substring(name, 1,1)) as unsigned), time asc) data 
```

行号计算[礼貌](http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/)

我要做的就是为表中的每一行赋予一个权重因子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T20:42:18.237

您的数据似乎组织得很差。如果您有多个看似相同但仅类型不同的数据表，则应将数据存储在一个具有类型列的表中。

考虑表签入（id、用户、日期时间）和表签出（id、用户、日期时间），它们可以合并到表签出（id、用户、日期时间、inorout）中。

当数据结构优化时，您会发现处理该数据的查询更容易设计。

另请参阅。有关规范化的任何教程或[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

# ios - 确定视图是否隐藏并以编程方式更改按钮状态

> ID：14989046
> 
> 赞同：1
> 
> 时间：2013-02-20T20:14:05.063
> 
> 标签：ios, uiview, uibutton, visibility

我有三个视图和三个按钮，每个按钮切换视图（隐藏 = 是/否）

```
- (IBAction)switchOne:(id)sender {        
    [_firstPage setHidden:NO];
    [_secondPage setHidden:YES];
    [_thirdPage setHidden:YES];
}

- (IBAction)switchTwo:(id)sender {        
    [_firstPage setHidden:YES];
    [_secondPage setHidden:NO];
    [_thirdPage setHidden:YES];        
}

- (IBAction)switchThree:(id)sender {        
    [_firstPage setHidden:YES];
    [_secondPage setHidden:YES];
    [_thirdPage setHidden:NO];
} 
```

我想根据视图是否隐藏来设置按钮的背景。

我试过这个但没有结果：

```
if (_firstPage.hidden == NO)
{
    UIImage *buttonImage = [UIImage imageNamed:@"currentPage.png"];
    [_pageOneButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [self.view addSubview:_pageOneButton];

} else if (_firstPage.hidden == YES) {
    [_pageOneButton setBackgroundImage:nil forState:UIControlStateNormal];
} 
```

`_pageOneButton`即使视图隐藏，它也会保持背景。

我现在保留菜单的图像：

![菜单激活](../Images/d1e8fa45e648198a087cbfc38b15c3c9.png)

关键是：当 Página 2 处于活动状态（隐藏 == NO）时，Página 1 按钮应该没有背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:33:10.277

这里的细节很少，但与此同时，您可以使用以下建议进行一些尝试。

首先，移动你的

```
[self.view addSubview:_pageOneButton]; 
```

方法之外。例如，在`viewDidLoad`方法中，您将该按钮添加到`superview`.

然后你可以控制它的状态（通过引用它，就像你做的那样）

```
// set the image
[_pageOneButton setImage:image forState:UIControlStateNormal];

// remove the image
[_pageOneButton setImage:nil forState:UIControlStateNormal]; 
```

# c++ - 使用 QAtomicInt 作为内存围栏

> ID：14989048
> 
> 赞同：0
> 
> 时间：2013-02-20T20:14:08.117
> 
> 标签：c++, fifo, smp, memory-fences

再说一次关于无锁的事情......

假设我实现了一个简单的基于数组的整数循环 FIFO。FIFO 由 2 个线程单生产者、单消费者访问。读取和写入索引始终在访问项目后更新。在单个 CPU 上，这将是安全的（假设索引的更新操作是原子的），因为只有一个线程具有对索引的写访问权限。在 SMP 机器上，这可能会导致问题，因为两个 CPU 可能会由于其缓存和重新排序而看到不同的索引表示。

QT 具有跨平台原子变量，它们也实现了内存栅栏，使用 QAtomicInt 会使 fifo 实现 SMP 安全还是我忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:23:07.320

这将是安全的，只要您的实施的其余部分是合理的。

正如您所提到的，QAtomicInt 实现了防止指令重新排序的[内存栅栏](http://doc.qt.digia.com/stable/qatomicint.html#memory-ordering)，这也加强了处理器之间的缓存一致性（事实上，x86 和 x86_64 处理器的缓存无论如何都是一致的，尽管一致性协议可能会导致管道停顿并降低性能，如果你在一个紧密的循环中依赖它）。

# node.js - 获取 cookie 时出现未定义的异常

> ID：14989050
> 
> 赞同：0
> 
> 时间：2013-02-20T20:14:13.207
> 
> 标签：node.js, cookies, express

我正在玩节点，并试图在请求上设置一个 cookie，但得到一个未定义的异常。这是我的示例应用程序

```
var express = require('express');

var app = module.exports = express();

process.env.NODE_ENV = 'production';

app.configure('production', function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});

app.get("/", function(req, res){
    res.cookie('cart', 'test', {maxAge: 900000, httpOnly: true});

    res.send("OK");
});

app.get('/users/:id', function(req, res) {
    var s = req.params.id;

    res.send('testcookie: ' + req.cookies.cart);
});    

app.listen(3000);
console.log('Listening on port 3000'); 
```

我可以在 Charles 中验证我正在获取和返回 cookie：

![在此处输入图像描述](../Images/6bb23b77a8381c02be0fc76fed39a82d.png)

但是每当我去的结果`/users:id`（其中 :id 显然是某个数字）时，我都会收到一条消息，说 cookie 对象未定义。

```
TypeError: Cannot read property 'cart' of undefined
    at c:\Projects\app\app.js:29:42
    at callbacks (c:\Projects\app\node_modules\express\lib\router\index.js:161:37)
    at param (c:\Projects\app\node_modules\express\lib\router\index.js:135:11)
    at param (c:\Projects\app\node_modules\express\lib\router\index.js:132:11)
    at pass (c:\Projects\app\node_modules\express\lib\router\index.js:142:5)
    at Router._dispatch (c:\Projects\app\node_modules\express\lib\router\index.js:170:5)
    at Object.router (c:\Projects\app\node_modules\express\lib\router\index.js:33:10)
    at next (c:\Projects\app\node_modules\express\node_modules\connect\lib\proto.js:199:15)
    at Object.expressInit [as handle] (c:\Projects\app\node_modules\express\lib\middleware.js:31:5)
    at next (c:\Projects\app\node_modules\express\node_modules\connect\lib\proto.js:199:15) 
```

我已经阅读了关于将`cookieParser`上述其他中间件放在上面的所有其他 SO 问题，并且从所有方面来看，这个示例应该可以工作，但我不知道缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:03:49.430

好的，原来这与我的设置方式有关`app.configure`。配置回调函数没有被调用，因为应用程序配置的内部没有调用`production`ENV 的初始化函数，即使我认为它是在上面明确设置的。

为了解决这个问题，我改变了`process.env.NODE_ENV`to`app.settings.env`并且一切都开始工作了。

在此处找到该信息：[如何找出 express 应用程序正在运行的当前 NODE_ENV？](https://stackoverflow.com/questions/9441287/how-to-find-out-the-current-node-env-the-express-app-is-running-under)

# sql-server - MVC4 Scaffolding 数据库位于何处？

> ID：14989054
> 
> 赞同：1
> 
> 时间：2013-02-20T20:14:37.737
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-4, scaffolding

我已经开始使用在 web 配置中枚举了 DefaultConnection 的 MVC4 项目。（共享开发服务器上的 sql server 2005）

在尝试使用 MVCScaffoling 时，我遵循了教程，然后当我运行`scaffold controller tablename -force`命令行时，我重新加载了 sql server 数据库表的列表，没有看到预期的

所有现有的脚手架操作都有效，包括多对多关系和一切。

但是这些表不在数据库中，所以它们必须在其他地方。他们在哪里？我如何告诉 MVC 脚手架完成所有工作，`DefaultConnection`而不是自行确定脚手架的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:41:25.433

如果有的话，数据库文件将位于您的`App_Data`文件夹中。在单击解决方案资源管理器上方的显示所有文件图标之前，您不会立即看到它。

我不确定你做脚手架的原因是什么，但如果我是你，我会做`Code First`。这样，您就知道所有内容在哪里，并且您知道大部分内容都是您自己编写的。

此外，如果这是开发，为什么您可以轻松使用 2012 年的旧服务器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:17:00.273

啊……这个简介：http: [//www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and)

说：

> 注意：实体框架将始终尝试连接到本地 SQL Server Express 数据库 (.\SQLEXPRESS)。从 EF 5 开始，如果 Ef 未检测到 SQL Express 正在运行，它将使用 LocalDb。如果安装了 SQL Express，它将始终获得优先权，即使您使用的是 Visual Studio 2012。

所以看起来脚手架不允许我选择发生这一切的数据库。这有点痛苦，因为我希望它与我的用户表位于同一个位置，这些用户表确实驻留在 DefaultConnection 中指定的数据库中。

# css - CSS 列让我的 LI 项目符号消失

> ID：14989056
> 
> 赞同：0
> 
> 时间：2013-02-20T20:14:40.127
> 
> 标签：css

如何取回我的*外部*列表项目符号？

[http://jsfiddle.net/mblase75/s9FVT/](http://jsfiddle.net/mblase75/s9FVT/)

```
.two-column-list {
    padding-left: 1.4em;
    list-style: outside disc;
    -webkit-columns: 2;
    -moz-columns: 2;
    columns: 2;
}
.two-column-list li {
    -webkit-column-break-inside: avoid;
    -moz-column-break-inside: avoid;
    column-break-inside: avoid;
} 
```

当我在带有项目符号的无序列表上使用 CSS 列时`outside disc`，无论列表元素上的填充如何，我的项目符号都会消失。

[我可以使用 来取回它们`inside disc`](https://stackoverflow.com/q/10855627/901048)，但是我的长线会包裹在项目符号下，我也想避免这种情况。

`text-indent`向元素添加负数`<li>`也不起作用；它只是剪掉前几个字母。

我正在使用最新版本的 Chrome。Firefox 似乎不受影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:21:14.067

您可以`list-style-position: inside`在`ul`元素上使用：

```
.two-column-list {
    /* all the other stuff */
    list-style-position: inside;
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/s9FVT/3/)或关于`li`元素：

```
.two-column-list li {
    /* all the other stuff */
    list-style-position: inside;
} 
```

（[JS Fiddle 演示](http://jsfiddle.net/davidThomas/s9FVT/4/)）。

或者您可以简单地将 a 分配`margin-left`给`li`元素：

```
.two-column-list li {
    /* all the other stuff */
    margin-left: 1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s9FVT/5/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T20:17:06.567

在制作列表本身的同时，向列表元素添加`padding-left`一个负数，似乎可以解决问题：`text-indent``list-style: inside disc`

```
.two-column-list {
    padding: 0 0.4em;
    list-style: inside disc;
    -webkit-columns: 2;
    -moz-columns: 2;
    columns: 2;
}
.two-column-list li {
    padding-left: 1em;
    text-indent: -1em;
} 
```

[http://jsfiddle.net/mblase75/s9FVT/6/](http://jsfiddle.net/mblase75/s9FVT/6/)

# mongodb - 总计 $project 中的新 Date()

> ID：14989058
> 
> 赞同：20
> 
> 时间：2013-02-20T20:14:44.057
> 
> 标签：mongodb, aggregation-framework

对于我的一个集合，它必须保留 unix 时间戳而不是 isodate，我通常将时间戳转换为 new Date(unix_timestamp)。

现在我需要`new Date(ts)`聚合。（示例在 PHP 中）

> '$project' => 数组（'day' => '$new Date(ts)', ...
> 
> '$group' => array ("_id" => array('day' => '$day)', ...),...

没有到达结果。结果中的“天”字段完全丢失。

如何在聚合中进行转换？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-28T11:21:07.147

为了能够从文档中添加时间戳字段，您可以这样做，给定：

```
{"ts": 1400512120100} 
```

聚合为日期：

```
db.foo.aggregate({
   $project: {
       date: { $add: [new Date(0), "$ts"] }
   }
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T21:09:05.107

对于投影中的其他计算字段，您需要使用 $add 运算符，如下所示：（控制台示例）

```
db.so.aggregate([{$project: {date: {$add: Date() }}}]) 
```

但这是错误的，我们收到一条错误消息：

```
exception: $add does not support strings (or dates) 
```

但我发现了一个简单的 hack =)

```
db.so.aggregate([{$project: {date: {$substr: [Date(), 0, -1] }}}]) 
```

在这种情况下，我们将得到带有日期的预期结果此外，在 PHP 输出中，您可以看到如下错误：

```
exception: disallowed field type Date in object expression (at 'date') 
```

现在，解决方案（php 5.4 语法）：

```
$so->aggregate([
    ['$project' => ["date" => ['$substr' => [new MongoDate(), 0, -1]] ] ]
]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-19T20:01:00.613

开始`Mongo 4.0`，这可以通过[`$toDate`](https://docs.mongodb.com/manual/reference/operator/aggregation/toDate/#exp._S_toDate)聚合运算符来实现：

```
// { "ts": 1400512120100 }
db.collection.aggregate({ $project: { date: { $toDate: "$ts" } } })
// { "date": ISODate("2014-05-19T15:08:40.100Z") } 
```

# java - 移动增值服务 MVAS 入门

> ID：14989060
> 
> 赞同：0
> 
> 时间：2013-02-20T20:14:50.047
> 
> 标签：java, android, iphone, cordova, sms

我对移动开发很感兴趣，并且一直在自学android开发。我还计划学习I-phone开发并使用phonegap进行跨平台开发。

但是来自尼泊尔，我发现如果我要开发一个应用程序，我的大多数用户都不会是智能手机用户。我看到另一种选择是基于 SMS 的 MVAS 应用程序，因此想了解此类应用程序如何工作以及如何开发和部署此类应用程序。我一直在 Google 上搜索，但找不到任何涉及技术细节的资源。我找到了很多关于什么是 MVAS 以及它可以应用于什么的材料，但没有关于它如何工作以及如何开发 MVAS 应用程序的单一资源。

如果有人可以为我提供一些答案，我将不胜感激，因为我真的有兴趣找到更多关于此类应用程序如何工作的信息。

PS：我真的希望有人可以帮助我解决这个问题，因为我发现 stackoverflow 中尚不存在 MVAS 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:30:41.117

我发现了两种方法可以做到这一点。有称为一线短信和快速短信的开源解决方案。这些工具可用于接收和发送 SMS，并且可以使用 GSM 电话或 GSM 调制解调器与您的服务器集成。收到数据后，您如何使用和处理它完全取决于您。该解决方案可以集成到您现有的系统中，您还可以编写新的解决方案来提供内容和其他数据。

1.  [http://www.frontlinesms.com/](http://www.frontlinesms.com/)
2.  [http://www.rapidsms.org/](http://www.rapidsms.org/)

# ios - UITextField 和键盘控件检查字段是否有数据

> ID：14989061
> 
> 赞同：0
> 
> 时间：2013-02-20T20:14:50.187
> 
> 标签：ios, ios5, uitextfield

我正在使用 BSKeyboard Controls 在用户名和密码的登录字段上的键盘上方有一个下一个/上一个和完成按钮。

我想要实现的是： - 当其中一个字段为空白时，完成按钮应该显示“完成” - 当两个字段至少有一个字符时，它应该显示“登录”

我知道有多种方法可以检查文本字段的内容，hasText isEqualToString !=nil 等。但我想我想在这里检查字符。

我需要知道放置 if 语句的最佳位置以及使用哪个位置。

我的领域是

```
self.usernameField
self.passwordField 
```

我的键盘控件更新如下：

```
self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsDone", @"test"); 
```

或者

```
self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsLogin", @"test"); 
```

更新方法：

```
NSString *newText = [textField.text stringByReplacingCharactersInRange:range withString:string];

UITextField *otherTextField;
if (textField == self.passwordField)
{
    otherTextField = self.usernameField;
}
else
{
    otherTextField = self.passwordField;
}

if ([newText length] > 0 && [otherTextField.text length] > 0)
{
    self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsLogin",@"Button for Keyboard Controls on Login page");
} else {
    self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsDone", @"test");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:06:13.630

您可以实现`textField:shouldChangeCharactersInRange:replacementString:`UITextFieldDelegate 以在用户输入键时执行您想要的任何操作。像这样的东西：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newText = [textField.text stringByReplacingCharactersInRange:range withString:string];

    UITextField *otherTextField;
    if (textField == self.passwordField)
    {
        otherTextField = self.usernameField;
    }
    else
    {
        otherTextField = self.passwordField;
    }

    if ([newText length] > 0 && [otherTextField.text length] > 0)
    {
//        Your code
    }
    return YES;
} 
```

编辑

不要使用该委托方法，而是使用更改的事件编辑。您必须使用 IB 或通过代码为该事件设置操作，它看起来像这样：

```
- (IBAction) textFieldEditingChanged
{
    if ([self.usernameField.text length] > 0 && [self.passwordField.text length] > 0)
    {
        self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsLogin",@"Button for Keyboard Controls on Login page");
    } else {
        self.keyboardControls.doneTitle = NSLocalizedString(@"KeyboardControlsDone", @"test");
    }
} 
```

# c++ - 将窗口设置为最顶层

> ID：14989062
> 
> 赞同：17
> 
> 时间：2013-02-20T20:14:52.343
> 
> 标签：c++, winapi, window, topmost

我试图将我的窗口放在所有其他窗口之上。我是 C++ Win32 编程的新手。这是我的窗口初始化`WinMain`：

```
hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL); 
```

我以前使用过对话框，所以最上面的属性真的很容易使用。但是在这里，在一个窗口上我不知道如何设置它。我也希望能够触发它。有谁能够帮我？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-07-01T19:39:39.123

```
SetWindowPos(hwnd01, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE); 
```

**注：** `SWP_NOMOVE | SWP_NOSIZE`用于忽略函数的第 3、4、5、6 个参数`SetWindowPos`。

第二个参数可以是：

*   `HWND_BOTTOM`

*   `HWND_NOTOPMOST`（设置窗口为普通窗口）

*   `HWND_TOP`

*   `HWND_TOPMOST` **（将窗口设置为始终在顶部）**

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-20T20:18:24.063

`CreateWindowEx`与（扩展的）窗口样式一起使用`WS_EX_TOPMOST`。

免责声明：我接触那些东西已经有 15 年左右的时间了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-20T20:17:13.293

见[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)，`hWndInsertAfter`参数。通过`HWND_TOPMOST`应该做你想做的事。

此外，如果您想保持位置和大小不变，您可能需要传递`SWP_NOMOVE | SWP_NOSIZE`给参数。`uFlags`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-04T15:59:07.297

SWP_NOMOVE 保留当前位置（忽略 X 和 Y 参数）。SWP_NOSIZE 保留当前大小（忽略 cx 和 cy 参数）。如果不设置这些标志，则应指定位置和大小，而不是传递 0、0、0、0

# php - Wordpress，通过名称或 URL 获取帖子内容

> ID：14989066
> 
> 赞同：3
> 
> 时间：2013-02-20T20:14:54.837
> 
> 标签：php, wordpress, custom-post-type

我在这里看到我可以使用帖子 ID 在 WordPress 中获取帖子的内容。就像是：

```
<?php $my_postid = 83;//This is page id or post id
$content_post = get_post($my_postid);
$content = $content_post->post_content;
$content = apply_filters('the_content', $content);
$content = str_replace(']]>', ']]&gt;', $content);
echo $content;?> 
```

我想要同样的东西，但要按其名称获取帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:36:36.343

您可以使用

```
$content_post = get_posts( array( 'name' => 'yourpostname' ) ); // i.e. hello-world
if( count($content_post) )
{
    $content = $content_post[0]->post_content;
    // do whatever you want
    echo $content;
} 
```

**更新：**您也可以在您的中添加此功能，`functions.php`并可以从任何地方调用它

```
function get_post_by_name($post_name, $post_type = 'post', $output = OBJECT) {
    global $wpdb;
    $post = $wpdb->get_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post_name = %s AND post_type= %s", $post_name, $post_type ));
    if ( $post ) return get_post($post, $output);
    return null;
}

// call the function "get_post_by_name"
$content_post = get_post_by_name('hello-world');
if($content_post)
{
    $content = $content_post->post_content;
    // do whatever you want
    echo $content;
} 
```

**更新：要按****标题**获取帖子，您可以使用

```
// 'Hello World!' is post title here
$content_post = get_page_by_title( 'Hello World!', OBJECT, 'post' ); 
```

或者你可以使用你的`$item->item_title`变量

```
$content_post = get_page_by_title( $item->item_title, OBJECT, 'post' );
if($content_post)
{
    $content = $content_post->post_content;
    // do whatever you want
    echo $content;
} 
```

# powershell - 带双引号的参数未通过 ArgumentList 正确传递给 Scriptblock

> ID：14989073
> 
> 赞同：8
> 
> 时间：2013-02-20T20:15:21.933
> 
> 标签：powershell, powershell-remoting

我正在编写通用的 powershell 脚本来在远程机器上执行部署。我遇到了一个不能超限的问题，这个问题是 ArgumentList 传递的 Scriptblock 中带双引号的参数

我有这样的事情：

```
$remoteAddress = "some-pc"
$deploymentCommand = "D:\some path\Command.exe"
$deploymentPackages = @(`"“package - one - external"`", `"“package - two - external"`", `"“package - three - internal"`")

foreach ($deploymentPackage in $deploymentPackages)
{
invoke-command -ComputerName $remoteAddress -ScriptBlock { param ($deployCmd, $deployPackage) &  $deployCmd -package:$deployPackage -action:doit } -ArgumentList   $deploymentCommand,$deploymentPackage
} 
```

我在 $deploymentPackages 中添加了双引号。而且我仍然像这样远程执行我的命令（当然失败了）：

```
D:\some path\Command.exe -package:package - one - external -action:doit
D:\some path\Command.exe -package:package - two - external -action:doit
D:\some path\Command.exe -package:package - three - external -action:doit 
```

而正确的执行路径应该是：

```
D:\some path\Command.exe -package:"package - three - external" -action:doit 
```

包装周围没有引号 - 一 - 外部搞砸了一切

如何解决这个问题，因为我已经测试了许多解决方案，但没有一个有效。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T21:21:35.700

您可以通过使用单引号来包装字符串来解决此问题。使用单引号，引号之间的内容将保持不变（变量不会扩展，引号之类的符号将被保留）。例如

```
PS > '"this is a test"'
"this is a test" 
```

因此，要修复您的脚本，请尝试将您的`deploymentpackages`数组替换为：

```
$deploymentPackages = @('"package - one - external"', '"package - two - external"', '"package - three - internal"') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T20:54:02.603

你可以做这样的事情

```
$remoteAddress = "some-pc"
$deploymentCommand = "D:\some path\Command.exe"
$deploymentPackages = @('package - one - external', 'package - two - external', 'package - three - internal')
$remoteScript = {
    param( $deployCmd, $deployPackage )
    & $deployCmd "-package:$deployPackage" -action:doit
}

foreach ($deploymentPackage in $deploymentPackages)
{
   invoke-command -ComputerName $remoteAddress -ScriptBlock $remoteScript -ArgumentList $deploymentCommand,$deploymentPackage
} 
```

当传递给您的可执行文件时，它会捆绑`-package:<some string here>`成一个参数，这与`-package:"aaa bbb ccc"`在 cmd.exe 中执行的操作相同。

我假设您不希望将文字引号传递给 exe，而只是作为`-package:<some string here>`单个参数而不管空格`<some string here>`

如果要将文字引号传递给 exe，请使用上面的代码

```
& $deployCmd "-package:`"$deployPackage`"" -action:doit 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T21:19:57.950

尝试在带有双引号的字符串周围使用单引号。我稍微简化了脚本，只写字符串而不是运行它。

```
$remoteAddress = "some-pc";
$deploymentPackages = @('"package - one - external"', '"package - two - external"', '"package - three - internal"');

foreach ($deploymentPackage in $deploymentPackages)
{
    invoke-command -ComputerName $remoteAddress -ScriptBlock {
        param ($deploymentPackage) write-host ("-package:{0} -action:doit" -f $deploymentPackage); 
    } -ArgumentList   $deploymentPackage;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-18T10:07:58.693

尝试从 DOS 脚本调用的 PowerShell 脚本发送电子邮件时，我遇到了同样的问题。我已经失去了一些时间来找到以下解决方案。

DOS 脚本

```
set MSG="US-TrackingFile has been copied to Z: drive"
call SendMail.bat %MSG% 
```

SendMail.bat DOS 脚本

```
PowerShell.exe .\SendMail.ps1 '"%1"' 
```

SendMail.ps1 PowerShell 脚本

```
$msg = $args[0]

Send-MailMessage
  -to "bernard_schleich@atos.net" 
  -subject "$msg" 
  -smtpserver emearelay.ec.company.com 
  -from "windows.system@company.com" 
```

以下解决方案无需调用中间 DOS 脚本也可以工作

```
set MSG="\"US-TrackingFile has been copied to Z: drive\""
PowerShell.exe .\SendMail.ps1 %MSG% 
```

但有点棘手，因为您必须在每条消息的开头和结尾添加 \" 。

在所有情况下，我的消息标题都正确显示，消息开头和结尾没有双引号 :-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-07T16:08:26.937

使用`"""`. 例如，

```
$Var = "One" 
```

`$Var`将显示`One`.

虽然`"""$Var"""`会显示`One`

# c# - WPF 中枚举 System.IO.Ports.Parity 的 ComboBox

> ID：14989074
> 
> 赞同：0
> 
> 时间：2013-02-20T20:15:29.307
> 
> 标签：c#, .net, wpf, combobox

我希望（在 C# 中）使用 enumeration 的允许值填充组合框的允许值列表`System.IO.Ports.Parity`。为此，我创建了一个集合：

```
public class theParitySource : ObservableCollection<Parity>
{
    public theParitySource()
    {            
        Array parities = System.Enum.GetValues( typeof( Parity ) );
        foreach (Parity p in parities) this.Add(p);            
    }
} 
```

（顺便说一句：这个初始化有oneliner吗？）并将其作为组合框的数据上下文：

```
 ...
  xmlns:local="clr-namespace:myNamespace"
  ...

  <ComboBox ...>
      <ComboBox.DataContext>
          <local:theParitySource />
      </ComboBox.DataContext>
  </ComboBox> 
```

然而，组合框仍然是空的（它显示为空，但似乎具有正确的长度），即使我可以在调试器中看到如何`theParitySource`填充。这种方法确实适用于另一个组合框（即使在同一个类中），我为波特率执行此操作。我用整数值初始化，所以我想这与我在这里使用枚举的事实有关，但我不知道可能是什么原因。任何指针？我需要写一个转换器吗？

（当然我可以通过从枚举中创建一个字符串列表来解决这个问题，但这会有点不愉快......）

编辑：实际上我更愿意在 XAML 中完成所有这些工作。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:22:46.747

你可以在`Xaml`using中做到这一切`ObjectDataProvider`

在您`Window.Resources`（或您正在使用的任何资源）中设置一个`ObjectDataProvider`.

要`ObjectDataProvider`为`Enums`您设置`ObjectType`to`{x:Type sys:Enum}`和`MethodName`to`GetValues`以填充`ComboBox`实际`Enums`值，或者您可以使用字符串表示形式`GetNames`来填充`ComboBox``Enum`

```
 xmlns:sys="clr-namespace:System;assembly=mscorlib"
   xmlns:io="clr-namespace:System.IO.Ports;assembly=System"

   <Window.Resources>

        <ObjectDataProvider MethodName="GetValues" ObjectType="{x:Type sys:Enum}" x:Key="ParityValues">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="io:Parity" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>

    </Window.Resources> 
```

然后绑定到您的 ComboBox

```
 <ComboBox ItemsSource="{Binding Source={StaticResource ParityValues}}" /> 
```

结果：

![在此处输入图像描述](../Images/24df49cf56a64e0ef39b66b5da937d99.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:20:34.703

您需要绑定到正确的路径，您可能正在设置它的数据上下文，但您并没有告诉它要显示的属性。

您需要告诉它您想要显示绑定上下文的哪一部分以及您想要“选择”哪一部分。

[WPF 组合框 DisplayMemberPath](https://stackoverflow.com/questions/1460612/wpf-combobox-displaymemberpath)

# mongodb - MongoDB疯了？匹配错误的文件

> ID：14989075
> 
> 赞同：0
> 
> 时间：2013-02-20T20:15:37.580
> 
> 标签：mongodb, truncation

我在 64 位 Ubuntu 12.04 版本上使用 MongoDB 2.2.3。我的 Mongo Shell 中的输出如下：

```
>db.clusters.findOne({'_id':-3118541015882674000})
{
    "_id" : NumberLong("-3118541015882673983"),
    "members" : [
        {
            "participationCoeff" : 1,
            "tweetID" : NumberLong("-3118541015882673983")
        },
        {
            "participationCoeff" : 0.6666666666666666,
            "tweetID" : NumberLong("-7489837299951056630")
        },
        {
            "participationCoeff" : 0.5,
            "tweetID" : NumberLong("-4808081224284120148")
        }
    ]
} 
```

如您所见，匹配条件中给出的数字**与**返回的数字不同。_id 字段没有相同的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:50:22.560

这里发生的事情是 JavaScript 不能原生表示 64 位整数`-3118541015882673983`，因此当将该`NumberLong`值转换为 JS 64 位浮点数时，它会失去精度并最终成为`-3118541015882674000`.

您可以在 mongo shell 中看到：

```
> num = NumberLong("-3118541015882673983")
NumberLong("-3118541015882673983")
> num.toNumber()
-3118541015882674000 
```

因此，在这种情况下，您将`_id`查询中的 64 位浮点数证明，因此 mongo 将数字文档转换`_id`为相同的数据类型，以便可以比较它们并获得匹配。

# c# - 获取确切的监视器/显示器/屏幕名称

> ID：14989079
> 
> 赞同：1
> 
> 时间：2013-02-20T20:15:46.013
> 
> 标签：c#, winforms, desktop-application

我有一个用户选择目标监视器的程序，但我无法获得真正的监视器名称/型号。

我已经尝试过以下方法：

*   Screen.AllScreens 没有用；
*   WMI 和 Win32 EnumDisplayDevices 都返回 Generic PnP Monitor；
*   设备管理器还显示通用 PnP 监视器...

在资源管理器中有附加的监视器的实际名称，在珠穆朗玛峰中，它显示了更详细的细节......

这两个程序从哪里获得这些信息？我遇到的最后一个选项是从注册表中解析 EDID ......有没有人试过这个并且它有效吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-18T11:42:15.797

好吧，这个问题很老，但是，为了谷歌重定向，我建议使用“WindowsDisplayAPI”库。

[https://www.nuget.org/packages/WindowsDisplayAPI](https://www.nuget.org/packages/WindowsDisplayAPI)

* * *

使用该库，有多种方法可以获取显示名称。最简单的方法是：

```
foreach (var display in Display.GetDisplays())
{
    Console.WriteLine(display.DeviceName);
} 
```

但这是使用旧 API，如果您确定您的程序至少针对 Windows Vista，我建议使用以下代码：

```
foreach (var target in DisplayConfig.PathDisplayTarget.GetDisplayTargets())
{
    Console.WriteLine(target.FriendlyName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:14:42.100

看起来这可能已经在另一个问题中得到了回答： [我如何获得在分辨率对话框中看到的实际监视器名称](https://stackoverflow.com/questions/4958683/how-do-i-get-the-actual-monitor-name-as-seen-in-the-resolution-dialog)

# javascript - Node.js 获取/确定操作系统版本

> ID：14989081
> 
> 赞同：15
> 
> 时间：2013-02-20T20:15:49.310
> 
> 标签：javascript, node.js

我想确定正在执行的某些脚本是否正在运行特定版本的 Mac OSX。我意识到我可以执行/生成命令：

```
sw_vers -productVersion 
```

[有没有办法在没有node-exec-sync 的](https://github.com/jeremyfa/node-exec-sync)情况下同步执行此操作（类似于 process.arch）？我意识到同步生成/执行是一种公认​​的不好的做法，但我看不到另一种方式。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-20T20:34:50.690

你可以像这样使用 [OS 模块](http://nodejs.org/api/os.html#os_os_platform)：

```
var os = require('os');
os.platform(); // 'darwin'
os.release(); //'10.8.0' 
```

然后将发布版本映射到特定版本的 Mac OS X。

Darwin 到 Mac OS X 的映射可以在[这里找到](http://en.wikipedia.org/wiki/Darwin_%28operating_system%29#Release_history)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-10T05:45:30.253

正如上面 AndyD 的回答评论中提到的，`os.release()`返回内核版本。如果您想获得用户在“关于此 Mac”UI 中看到的相同版本号，您可以读取并解析出来`/System/Library/CoreServices/SystemVersion.plist`，如下所示：

```
const plist = require('plist');
let versionInfo = plist.parseFileSync('/System/Library/CoreServices/SystemVersion.plist');
console.log(JSON.stringify(versionInfo)); 
```

[https://github.com/kevinsawicki/node-plist](https://github.com/kevinsawicki/node-plist)

# python - Python中描述符的使用示例

> ID：14989082
> 
> 赞同：2
> 
> 时间：2013-02-20T20:16:07.677
> 
> 标签：python, descriptor

我希望这个问题不会太开放。阅读[http://python-history.blogspot.com/2010/06/inside-story-on-new-style-classes.html](http://python-history.blogspot.com/2010/06/inside-story-on-new-style-classes.html)后，我终于“得到”了 Python 中的描述符。但是我在它们上看到的所有内容都只是描述了它们如何用于实现静态方法、类方法和属性。

我很欣赏这些的重要性，但是 Python 中的描述符还有哪些其他用途呢？我可能希望我的代码具有什么样的魔法，只能使用描述符来实现（或者至少最好使用描述符来实现）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:28:08.763

延迟加载的属性：

```
import weakref
class lazyattribute(object):
    def __init__(self, f):
        self.data = weakref.WeakKeyDictionary()
        self.f = f
    def __get__(self, obj, cls):
        if obj not in self.data:
            self.data[obj] = self.f(obj)
        return self.data[obj] 
```

```
class Foo(object):
    @lazyattribute
    def bar(self):
        print "Doing a one-off expensive thing"
        return 42 
```

```
>>> f = Foo()
>>> f.bar
Doing a one-off expensive thing
42
>>> f.bar
42 
```

# java - 将推特消息分类为正面和负面推文

> ID：14989085
> 
> 赞同：-4
> 
> 时间：2013-02-20T20:16:10.783
> 
> 标签：java

我是二年级电子工程专业的学生，​​我有这个关于推特消息数据挖掘的二年级项目，老实说，我不知道该怎么做！我所发现的是，我首先需要获取推文，并且我找到了许多可以为我做到这一点的网站，最好的一个是 tweetarchivist.com，它允许我将结果保存为 xls 文件，这是我现在正在努力解决的问题是数据挖掘过程，为此我决定开发一个我在几个网站上看到过的想法，它根据一些关键字将特定的推文（例如电影）分类为正面和负面，但我不知道该怎么做那..我读了一些关于使用“python和NLTK（朴素贝叶斯分类器）”的信息 但老实说，我对 Python 语言或除 java 之外的任何其他语言一无所知（仅限基本命令）.. 所以请任何人帮助我并建议一个可以执行我想要的好且简单的数据挖掘工具？我没有太多时间，所以如果您对此有任何线索，请发布它，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:39:06.797

这是一个开始的地方[（链接到 pdf 文件）](http://www-nlp.stanford.edu/courses/cs224n/2009/fp/3.pdf)。作者用一个简单的朴素贝叶斯分类器走得很远。希望你不打算今晚完成这个...

无论如何，快乐的编码！

# titanium-mobile - 未定义全局名称“self”

> ID：14989087
> 
> 赞同：0
> 
> 时间：2013-02-20T20:16:16.087
> 
> 标签：titanium-mobile

```
[ERROR] Application Installer abnormal process termination. Process exit value was 1
[INFO] logfile = C:\Documents and Settings\Administrator\My Documents\Titanium_Studio_Workspace\Todo List\build.log
[DEBUG] C:\Documents and Settings\Administrator\Application Data\Titanium\mobilesdk\win32\3.0.2.GA\android\builder.py simulator Todo List E:\New SDK C:\Documents and Settings\Administrator\My Documents\Titanium_Studio_Workspace\Todo List com.appcelerator.sample.todo 7 WVGA854
Traceback (most recent call last):
  File "C:\Documents and Settings\Administrator\Application Data\Titanium\mobilesdk\win32\3.0.2.GA\android\builder.py", line 2340, in <module>
    builder = Builder(project_name,sdk_dir,project_dir,template_dir,app_id)
  File "C:\Documents and Settings\Administrator\Application Data\Titanium\mobilesdk\win32\3.0.2.GA\android\builder.py", line 355, in __init__
    self.set_java_commands()
  File "C:\Documents and Settings\Administrator\Application Data\Titanium\mobilesdk\win32\3.0.2.GA\android\builder.py", line 399, in set_java_commands
    commands = java.find_java_commands()
  File "C:\Documents and Settings\Administrator\Application Data\Titanium\mobilesdk\win32\3.0.2.GA\android\java.py", line 61, in find_java_commands
    java_home = os.path.dirname(os.path.dirname(self.javac))
NameError: global name 'self' is not defined 
```

注意：当我在钛工作室运行简单的应用程序时，它会抛出这个错误。我对钛完全陌生。所以伙计们，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:19:45.560

似乎环境变量 JAVA HOME 不存在。该错误表示无法调用 javac，因为未设置“self”。在这种情况下，'self' 应该是 java home。

[http://docs.appcelerator.com/titanium/latest/#!/guide/Setting_up_Titanium_Studio](http://docs.appcelerator.com/titanium/latest/#!/guide/Setting_up_Titanium_Studio)

[http://docs.appcelerator.com/titanium/latest/#!/guide/Software_Locations_and_Environment_Variables](http://docs.appcelerator.com/titanium/latest/#!/guide/Software_Locations_and_Environment_Variables)

# xslt - 使用 XSLT 将数据从一个 XML 文档复制到另一个

> ID：14989091
> 
> 赞同：2
> 
> 时间：2013-02-20T20:16:30.350
> 
> 标签：xslt, transformation

我必须将节点元素的数据从 file1.xml 复制到 file2.xml。 **文件1.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <header>
    <AsofDate>31-Dec-2012</AsofDate>
    <FundName>This is Sample Fund</FundName>
    <Description>This is test description</Description>
  </header>
</root> 
```

**文件2.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<root id="1">
  <header id="2">
    <AsofDate id="3"/>
    <FundName id="4" />
    <Description id="5" />
  </header>
</root> 
```

将 file1.xml 合并到 file2.xml 后，结果应如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<root id="1">
  <header id="2">
    <AsofDate id="3">31-Dec-2012</AsofDate>
    <FundName id="4">This is Sample Fund</FundName>
    <Description id="5">This is test description</Description>
  </header>
</root> 
```

我正在使用下面的 XSLT 来转换文件。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

下面是用于执行转换的代码：

```
 XslCompiledTransform tf = new XslCompiledTransform();
    tf.Load("TranFile.xsl");

    tf.Transform("file1.xml", "file2.xml"); 
```

但上面的代码是用 file1.xml 内容覆盖 file2 内容。这只是示例 XML。在实际情况下，我们不知道 xml 文件的节点名称和层次结构。但是文件和场景的任何结构都将完全相同。我是 XSLT 的新手，不确定这种方法是否正确。真的有可能通过 XSLT 实现结果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:49:56.540

我发布的解决方案是在考虑以下内容的情况下编写的：

*   *唯一需要合并的是属性*。文本和元素节点从 file1.xml 中出现时被复制。

*   *@id 属性在 file2.xml 中没有按顺序编号*，因此 file2.xml 中的 @id 可能是（例如）121 432 233 12 944 而不是 1 2 3 4 5。如果是后者，则不需要file2.xml 以生成所需的输出。

*   *document() 函数可用于*访问与当前文件不同的文件。如果在使用文档函数时 XslCompiledTransform 出现错误，我建议[在 .NET XSLT 中使用 document() 函数来执行此操作会生成错误](https://stackoverflow.com/questions/2710369/using-document-function-in-net-xslt-generates-error)。我正在使用不同的 XSLT 处理器 (xsltproc)，它工作正常。

此解决方案基于保留对外部文件的引用，因此每次我们处理 file1.xml 中的元素时，引用都会移动到指向 file2.xml 中的同一元素。可以这样做是因为根据问题，两个文件都呈现相同的元素层次结构。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="no"/>

    <!-- Match the document node as an entry point for matching the files -->
    <xsl:template match="/">
        <xsl:apply-templates select="node()">
            <xsl:with-param name="doc-context" select="document('file2.xml')/node()" />
        </xsl:apply-templates>
    </xsl:template>

    <!-- In this template we copy the elements and text nodes from file1.xml and
         we merge the attributes from file2.xml with the attributes in file1.xml -->
    <xsl:template match="node()">
        <!-- We use this parameter to keep track of where we are in file2.xml by
             mimicking the operations that we do in the current file. So we are at
             the same position in both files at the same time. -->
        <xsl:param name="doc-context" />

        <!-- Obtain current position in file1.xml so we know where to look in file2.xml -->
        <xsl:variable name="position" select="position()" />

        <!-- Copy the element node from the current file (file1.xml) -->
        <xsl:copy>
            <!-- Merge attributes from file1.xml with attributes from file2.xml -->
            <xsl:copy-of select="@*|$doc-context[position() = $position]/@*" />
            <!-- Copy text nodes and process children -->
            <xsl:apply-templates select="node()">
                <xsl:with-param name="doc-context" select="$doc-context/node()" />
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# optimization - 在嵌入式平台中充分利用 GPU

> ID：14989092
> 
> 赞同：2
> 
> 时间：2013-02-20T20:16:35.800
> 
> 标签：optimization, opencv, opengl-es, parallel-processing, embedded

我的平台是运行 ob Exynos4412CPU 的 Ubuntu，它具有 Mali400GPU。我想用 OpenCV 和 OpenGL 做一些计算机视觉，我也要做一些片段着色器。我的问题是将内容从 GPU 复制到 CPU 的最快方法是什么，这在我的平台上使用 glreadpixels 真的很慢。在自己的线程中使用 glreadpixels 或使用 OpenMP 是否有益？欢迎提出建议:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:14:12.687

Exynos 4412 在硬件级别没有单独的 CPU 和 GPU 内存；它都是相同的 RAM，并且两者都可以物理访问。因此，可能有某种方法可以直接从 CPU 访问 GPU 的内存部分。

# toad - 如何在 Toad for Oracle 中将 ERD 保存为 .txp 文件？

> ID：14989093
> 
> 赞同：2
> 
> 时间：2013-02-20T20:16:39.677
> 
> 标签：toad, erd, datamodel

如何在 Toad for Oracle 中将 ERD 保存为 .txp 文件或可以在 Toad Data Modeler 中打开的任何其他格式？

我试图找到一种方法来打开我在 TDM 中拥有的 .erx 文件，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T16:43:20.627

很长一段时间（现在大约一年），我一直在寻找一种方法来做到这一点，但它似乎不可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T11:11:30.570

如果您使用的是 6.4 版，则无需以其他方式保存。只需从“文件”菜单中选择“导入”，逆向工程向导就会从那里获取它。

[![导入 ERD 文件](../Images/e0052409975de77a0980f64913aac69e.png)](https://i.stack.imgur.com/nDp9R.png)

# android - 指向 Web 应用程序的 Android 应用程序

> ID：14989094
> 
> 赞同：0
> 
> 时间：2013-02-20T20:16:43.480
> 
> 标签：android, iphone, web-applications

我有一个针对移动查看进行了优化的 Web 应用程序，因此它可以在所有智能手机（Android、iPhone 等）上使用。

Web 应用程序的开发已接近完成，但我还希望有一个实际可下载的应用程序，用户可以将其放在手机上。这个应用程序所做的只是直接指向 Web 应用程序并要求他们登录。

这是可以轻松完成的事情，还是我需要分别开发成熟的 Android 和 iPhone 应用程序，以某种方式与我的网络应用程序交互？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:21:05.420

试试[这个](http://www.appsgeyser.com/)。

> 从任何 Web 内容创建应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:42:23.437

[PhoneGap](http://phonegap.com)是一个开箱即用的工具，基本上可以满足您的要求。如果您对原生开发有些熟悉，您还可以创建一个简单的应用程序，其中主视图是 Web 浏览器（请参阅[WebView (Android)](http://developer.android.com/reference/android/webkit/WebView.html)或[UIWebView (iOS)](http://developer.android.com/reference/android/webkit/WebView.html)）。

# apache - 在匹配 URI Slug 上启用 SSL 时重定向循环

> ID：14989095
> 
> 赞同：1
> 
> 时间：2013-02-20T20:16:45.990
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试使用 mod_rewrite 完成 2 个任务：

1.  如果 URL（无论协议如何）都没有“www”子域，则将“www”添加到 URL。

2.  如果 URI 以 /secure.php 开头并且协议不是 https，则将协议切换为 https。

所以我尝试了：

```
# Redirect to www subdomain
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Force SSL for secure.php URIs
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/secure.php
RewriteRule ^(.*)$ https://www.mysite.com%{REQUEST_URI} [R=301,L] 
```

但是在访问 /secure.php URI 时出现重定向循环。我无法弄清楚问题是什么，这就是我看到事件顺序的方式：

1.  请求[http://mysite.com/secure.php](http://mysite.com/secure.php)
2.  主机名不**包含**“www”，所以通过了第一个条件
3.  URL 更新为[http://www.mysite.com/secure.php](http://www.mysite.com/secure.php)，并且该过程循环回到顶部。
4.  主机名**确实**包含“www”，因此它不满足第一个条件并跳过重写。
5.  HTTPS**已**关闭，因此它匹配下一个条件，并且
6.  URI 以“/secure.php”开头，因此它匹配**两个**必需的条件
7.  URL 更新为[https://www.mysite.com/secure.php](https://www.mysite.com/secure.php)，并且该过程循环回到顶部。
8.  主机名**确实**包含“www”，因此它不满足第一个条件，并跳过重写。
9.  HTTPS**没有**关闭，因此它不符合下一个条件并跳过重写。

我说对了吗？我在这里做错了什么？

我在 .htaccess 中还有另一条规则，用于从 ExpressionEngine URL 中删除 index.php：

```
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

所以这是整个 .htaccess 文件：

```
RewriteEngine On
RewriteBase /

# Remove index.php from ExpressionEngine URIs
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L]

# Redirect to www subdomain
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Force SSL for /secure.php URIs
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/secure.php
RewriteRule ^(.*)$ https://www.mysite.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:11:37.823

`HTTP_HOST`类似或的服务器变量`REQUEST_URI`在 a 中可用`RewriteCond`，但在 a 中不可用`RewriteRule`。如果您需要这些变量，则必须在 RewriteCond 中捕获它们

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} (.+)
RewriteRule .* http://www.%1/$0 [R,L] 
```

你不需要`secure.php`在 RewriteCond 中检查，你可以在 RewriteRule 中指定它

```
RewriteCond %{HTTPS} off
RewriteRule ^/?(secure.php.*) https://www.mysite.com/$1 [R,L] 
```

OT：永远不要在`301`启用的情况下进行测试，有关详细信息，请参见[调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)的提示。

# java - Python 中的 JavaBean 等价物

> ID：14989100
> 
> 赞同：23
> 
> 时间：2013-02-20T20:16:57.847
> 
> 标签：java, python, javabeans

我对使用 Python 作为 OOP 还是很陌生。我来自 Java 背景。你将如何在 python 中编写一个等效的 javabean？基本上，我需要一个类：

1.  实现可序列化。
2.  有 getter 和 setter -> 私有属性
3.  虚拟构造函数

有什么输入吗？我正在寻找示例代码！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-20T20:26:38.167

你没有，因为[Python 不是 Java](http://dirtsimple.org/2004/12/python-is-not-java.html)。很可能您应该只编写一个不那么琐碎的类，构造一个[namedtuple](http://docs.python.org/library/collections.html#collections.namedtuple)，传递一个字典或类似的东西。但是要回答这个问题：

1.  在 Python 中，“实现接口”都没`serializable`有意义（嗯，在某些框架和高级用例中确实如此，但在这里不是）。序列化模块，例如[`pickle`](http://docs.python.org/library/pickle.html)，无需实现或继承任何特殊功能即可工作（您可以通过其他方式自定义流程，但几乎不需要）。
2.  [你不写 getter 和 setter](https://stackoverflow.com/q/6618002/395760)。您只需使用公共属性。如果你以后需要一个重要的 getter/setter，你可以把它变成一个`property`透明的。
3.  不需要虚拟构造函数，除非您想创建属性并为它们设置默认值。但这可能是一个坏主意（*对于 bean-ish 类*），因为不为这些属性分配值很可能是一个错误，即使不是这样也很可疑。因此，只需让 Python 为您捕获这些错误（`AttributeError`当访问不存在的属性时它会引发）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-24T14:28:24.903

好吧，我认为[数据类](https://docs.python.org/3/library/dataclasses.html)将类似于 Java bean，并且使用它们实际上是一个好主意，因为它删除了样板。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T20:21:54.910

1.  [您可以通过pickle](http://docs.python.org/2/library/pickle.html)模块序列化大多数对象；
2.  Python 中没有私有属性之类的东西（另见：
    *   [python 类中是否有“私有”变量？](https://stackoverflow.com/questions/1641219/does-python-have-private-variables-in-classes),
    *   [python类中私有变量的实际实现](https://stackoverflow.com/questions/14168791/actual-implementation-of-private-variables-in-python-class/14168801)）；
3.  未定义构造函数的类将使用默认值（根据方法解析顺序）。

构造函数“链”的示例：

```
>>> class A(object):
...     def __init__(self):
...         print("A")
...     
... 
>>> class B(A): pass # has no explicit contructor
... 
>>> b = B()
A
>>> 
```

而且 - 正如[@delnan](https://stackoverflow.com/a/14989262/89391)所写 - 您可能想阅读：[http](http://dirtsimple.org/2004/12/python-is-not-java.html) ://dirtsimple.org/2004/12/python-is-not-java.html - Java 和 Python 有完全不同的*文化*，需要一些时间才能深入了解进入（并欣赏）两者。

此外，在编写了一些代码之后，将其与常见的习语进行比较可能会有所帮助，如下所示（我当然通过这种方式学到了很多东西）：

*   [http://www.jeffknupp.com/blog/2012/10/04/writing-idiomatic-python/](http://www.jeffknupp.com/blog/2012/10/04/writing-idiomatic-python/)
*   [http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html)
*   [http://python3porting.com/improving.html](http://python3porting.com/improving.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T20:31:18.357

正如 miku 所指出的：

1.  对象可以通过picke模块序列化，但是没有接口可以实现，Python不是Java。

2.  python中没有私有属性，通常人们使用**bar**（下划线）来表示私有属性，但是可以从外部访问它们。getter 和 setter 对 CPU 和程序员来说都是浪费时间。

3.  没有什么可以添加到 miku 答案中。

关于属性：[关于如何在 python 中使用属性功能的真实示例？](https://stackoverflow.com/questions/6304040/real-world-example-about-how-to-use-property-feature-in-python)

好文：[http ://dirtsimple.org/2004/12/python-is-not-java.html](http://dirtsimple.org/2004/12/python-is-not-java.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T20:26:13.367

> 实现可序列化。

选择你最喜欢的格式，并编写一个函数来为你序列化它。JSON，Pickle，YAML，任何工作。只要决定！

> 有 getter 和 setter -> 私有属性

我们在这里不这样做，那些是束缚语言的属性，我们都是这种语言的成年人。

> 虚拟构造函数

同样不是我们真正担心的事情，因为我们的构造函数比其他语言更聪明。所以你可以只定义一个`__init__`，它可以做你所有的初始化，如果你必须写一个工厂或子类它。

# button - FancyBox - iframe

> ID：14989101
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:17:05.493
> 
> 标签：button, iframe, fancybox

我想在 iframe 的页脚中添加一个按钮，但如果有滚动条，它就无法隐藏。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:35:56.670

```
<body> 
<script>
$(document).ready(function() {
$(".various").fancybox({
    maxWidth    : 800,
    maxHeight   : 500,
    fitToView   : false,
    width       : '100%',
    height      : '100%',
    autoSize    : true,
    closeClick  : false,
    openEffect  : 'elastic',
    closeEffect : 'elastic',
    beforeShow: function () {
        if (this.title) {
            // New line
            this.title += '<br />';
            this.title += '<button class="btn btn-primary" id="enviar" name="enviar" type="submit">Cadastrar Produto</button>';
        }
    },

     helpers : {
        title : {
            type: 'inside'
        }
    } 

});

</script>
</body> 
```

# regex - 正则表达式在 2 个字符串之间选择文本？

> ID：14989108
> 
> 赞同：2
> 
> 时间：2013-02-20T20:17:35.447
> 
> 标签：regex

我有以下字符串

```
Month: March 2011
Month: January 2012
Month: December 2011 
```

我想写一个正则表达式，它只为 2011 年选择月份的名称（即“March”）。这意味着选择字符串“Month:”和年份“2011”之间的所有内容。我做的正则表达式是

```
^(Month:)[A-Za-z0-9]+(2011)$ 
```

但它似乎不起作用。怎么了？？？结果应该是“三月”和“十二月”。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:20:14.613

使用前瞻：

```
/[a-z]+(?= 2011)/ig 
```

在此处查看实际操作：[http ://regex101.com/r/fE9lR9](http://regex101.com/r/fE9lR9)

这是一个 JavaScript 演示：http: [//jsfiddle.net/rZJur/](http://jsfiddle.net/rZJur/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:20:23.063

它不匹配，因为您没有考虑月份和年份之间的空白。

您可以在考虑空间后捕获月份组：

```
^(?:Month: )([A-Za-z]+)(?: 2011)$ 
```

或者您可以使用前瞻/后视组合：

```
(?<=^Month: )[A-Za-z]+(?= 2011$) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:32:53.720

这个表达式有效（向后看/向前看）`(?<=Month\:\s)(.+?)(?=\s2011)`。

编辑：只有非捕获组，这有效：`(?:Month\:\s)(.+?)(?:\s2011)`

# javascript - 控制生成的 JavaScript 的浏览器缓存

> ID：14989113
> 
> 赞同：1
> 
> 时间：2013-02-20T20:17:42.830
> 
> 标签：javascript, asp.net-mvc, browser-cache

**背景**

MVC 4 应用程序需要包含从数据库生成的 JavaScript。生成的文件比较大，只是偶尔变化（2-10天变化一次）。

接受的答案

[在 asp.net mvc 中动态生成 javascript 文件](https://stackoverflow.com/q/8133546/141172)

为生成 JavaScript 提供了一个很好的框架。但是，JavaScript 资源的 URL 是静态的。据我了解，浏览器将缓存该资源。该缓存可以由`OutputCacheAttribute`.

**问题**

每当生成的 JavaScript 更改时，如何使浏览器缓存过期，类似于捆绑的工作方式？A `SqlDependency`for the`OutputCacheAttribute`不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:17:59.580

我有类似的情况，每次重新生成 JavaScript 文件时，我都会在脚本标记中的查询字符串末尾附加一个随机 Guid。

例如：

```
<script type="text/javascript" src="/scripts/generated.js?id=7c97aa32-29d9-dd11-a926-001d096d84f2"></script> 
```

您可以使用随机字符串甚至时间戳，只要更改查询参数，就会下载新的脚本文件。

# c# - 使用 LINQ 的递归查询

> ID：14989119
> 
> 赞同：2
> 
> 时间：2013-02-20T20:18:06.747
> 
> 标签：c#, linq

是否可以在 LINQ 中编写此代码？我尝试使用 LINQ。但是，我认为它必须循环两次；首先验证是否`a`存在，然后遍历`qs`.

所以我想出了这个代码。

```
public a Traverse(List<q> qs,string id)
    {

        foreach (var q in qs)
        {
            if (q.as.Any(a => a.Id == id))
            {
                return q.as.First(a => a.Id == id);

            }

            foreach (var a in q.as)
            {
                var result =Traverse(a.qs, id);
                if(result != null)
                  return result;
            }
        }
        return null;
    } 
```

我正在从 XML 中读取它，就像“q”有“a”，“a”有“q”以递归方式。

我需要找到属于的唯一 ID `a`。

我知道已经在其他线程上进行了讨论，但它们没有帮助。

编辑：这是 XML 的片段

```
 <qs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <qs>
    <q>q 1</q>
    <Id>1</Id>
    <as>
      <a>
        <aprop>a</aprop>
        <Id>a 1.1</Id>
        <qs>
          <q>
            <q>q 1.1.1</q>
            <Id>1.1.1</Id>
            <as>
              <a>
                <a>a</a>
                <Id>a 1.1.1.1</Id>
                <qs />
                <type>1</type>
              </a>
              <a>
                <a>a</a>
                <Id>a 1.1.1.2</Id>
                <qs />
                <type>1</type>
              </a>
            </as>
          </q>
          <q>
            <q>q 1.1.2</q>
            <Id>1.1.2</Id>
            <as>
              <a>
                <a>a</a>
                <Id>a 1.1.2.1</Id>
                <qs />
                <type>1</type>
              </a>
              <a>
                <a>a</a>
                <Id>a 1.1.2.2</Id>
                <qs />
                <type>1</type>
              </a>
            </as>
          </q> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:10:27.083

我不确定你真正要达到什么目标。这就是我对问题的理解：

> 我们正在寻找`<a>`标签，它包含另一个名为value 的标签，其`<Id>` 值等于给`id`定的方法参数。如果未找到元素，则方法应返回`null`。

我认为它可以使用`Descendants()`方法在 XML 上完成：

假设我们将您的 XML 加载到一个名为 的变量`doc`中，该变量是`XDocument`类的一个实例。

```
var query= from a in doc.Descendants("a")
           let i = (string)a.Element("Id")
           where i == id
           select a;

return query.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T21:20:44.030

如果 LINQ to XML 对您有用，那么 MarcinJuraszek 的答案是完美的。为了解决您的 LINQ to Objects 问题，这样的事情怎么样？

```
 public a Traverse(IQueryable<q> qList, string id)
    {
        return this.GatherAs(qList).FirstOrDefault(a => a.Id == id);
    }

    public IQueryable<a> GatherAs(IQueryable<q> qList)
    {
        IQueryable<a> aList = qList.SelectMany(q => q.aList);

        if (aList.Count != 0)
            aList = aList.Union(this.GatherAs(aList.SelectMany(a => a.qList)));

        return aList;       
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:07:36.290

使用 LINQ 遍历相互引用的事物对我来说似乎很难实现。如果将 q 和 a 类合并到一个类中会更容易。

但是，作为开始，您的功能可以这样简化：

```
public a Traverse(List<q> qs, string id)
{
    foreach (var q in qs)
    {
        foreach (var a in q._as)
        {
            if (a.Id == id)
                return a;
            else
                return Traverse(a.qs, id);
        }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T21:25:01.280

您应该能够`XDocument`更轻松地查询您的 xml

例子：

```
 XDocument xdoc = XDocument.Load("c:\\MyXmlFile.xml");
  var results = xdoc.Descendants("a").Descendants("Id").Select(id => id.Value); 
```

返回元素的所有`Id`值。`a`

# macos - 如果文件夹存在，则 packagemaker 部分安装

> ID：14989121
> 
> 赞同：0
> 
> 时间：2013-02-20T20:18:18.633
> 
> 标签：macos, installation, packagemaker

我创建了一个 PackageMaker (OSX) 安装程序，它成功地安装了两个项目，一个主文件和一个文件文件夹（带有根），位于“/Applications/[特定应用程序文件夹]/”路径中。现在我想确保安装程序不会安装已经存在的文件夹（但我确实想覆盖主文件）。很基本，我敢肯定……但是如何做到最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:33:41.030

**标准程序：** 您必须创建两个组件包 - 一个用于主文件，另一个用于文件夹。现在在您的分发脚本中，您可以根据系统上文件夹的存在来禁用第二个软件包的安装。

**解决方法：** 使用您的预安装脚本重命名系统上的现有文件夹，安装新文件夹，然后从安装后脚本中删除新安装的文件夹并将旧包重命名为原始名称。

# file - Fortran：将一行数字读入数组

> ID：14989125
> 
> 赞同：1
> 
> 时间：2013-02-20T20:18:29.807
> 
> 标签：file, loops, fortran

我有一个输入文件，其中一行格式如下： 10110100000001011 我想使用循环将每个数字读入数组元素。但是如果我用 Read (1, "1i1") num(j) 格式化它， j =1,10 它只读取第一个整数。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:34:56.697

该格式`1I1`指示 Fortran 从记录/行中读取一个整数，然后继续到下一个记录/行（我的意思是，如果这就是格式所包含的全部内容）。例如，如果您想在一行上读取 10 个个位整数，则使用格式`10I1`.

Fortran 2008 增加了“无限格式项”，这样您在编写格式时不必知道项数：`*(i1)`.

两种方法的代码示例：

```
program tst

   integer :: array1 (10), array2 (10)

   open (unit=20, file="digits.txt", access="sequential", form="formatted")

   read (20, '(10i1)' )  array1
   write (*, *) array1

   rewind (20)
   read (20, '( *(i1) )' ) array2
   write (*, *) array2

end program tst 
```

# excel - X 轴无法正确绘制图表

> ID：14989126
> 
> 赞同：0
> 
> 时间：2013-02-20T20:18:30.630
> 
> 标签：excel, charts, axis, vba

我有一个为我绘制数据图表的宏。关于宏的所有内容都有 1 个例外：我想重新指定 x 轴标签。宏确实做到了这一点，但它做得不对。在某些情况下，它会改变类别，在其他情况下，它会完全错误地标记类别。该宏应该按产品 ID 绘制数据图表（每个产品 ID 一个图表），然后将 x 轴类别更改为“图表数据”上 F 列中的标签。

在此先感谢您的帮助。

以下是创建图表并随后更改 x 轴的宏部分：

```
Sub MakeCharts()
Dim sh As Worksheet
Dim rAllData As Range
Dim rChartData As Range
Dim cl As Range
Dim rwStart As Long, rwCnt As Long
Dim chrt As Chart

Set sh = ActiveSheet
ActiveSheet.Range("a1").Select
With sh

' Get reference to all data
    Set rAllData = .Range(.[A2], .[A2].End(xlDown)).Resize(, 5)
    ' Get reference to first cell in data range
    rwStart = 1
    Set cl = rAllData.Cells(rwStart, 1)
    Do While cl <> ""
        ' cl points to first cell in a station data set
        ' Count rows in current data set
        rwCnt = Application.WorksheetFunction. _
           CountIfs(rAllData.Columns(1), cl.Value)
        ' Get reference to current data set range
        Set rChartData = rAllData.Cells(rwStart, 1).Resize(rwCnt, 5)
        ' Create Chart next to data set
        Set chrt = .Shapes.AddChart(xlLineMarkers, _
           rChartData.Width, .Range(.[A2], cl).Height).Chart
        With chrt
            .SetSourceData Source:=rChartData.Offset(0, 1).Resize(, 4)
            ' -----> Set any chart properties here <-----

            ' Add Title
            .SetElement msoElementChartTitleCenteredOverlay
            .ChartTitle.Caption = cl.Value

            'Change chart name
            .Parent.Name = cl.Value

            'Remove Legend
            .SetElement (msoElementLegendNone)

            ' Adjust plot size to allow for title
            .PlotArea.Height = .PlotArea.Height - .ChartTitle.Height
            .PlotArea.Top = .PlotArea.Top + .ChartTitle.Height

            'Change the x-axis to a more organized set
            .SeriesCollection(1).XValues = "='Chart Data'!$F$2:$F$1048576"

            'Set Max and Min for charts
            .Axes(xlValue).MinimumScale = Sheets("Chart Data").Range("K1")
            .Axes(xlValue).MaximumScale = Sheets("Chart Data").Range("K2")

            'Adjust x-axis to tilt 45 degrees top left to bottom right
            .Axes(xlCategory).TickLabels.Orientation = 45

        End With

        ' Get next data set
        rwStart = rwStart + rwCnt
        Set cl = rAllData.Cells(rwStart, 1)
    Loop

End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:05:06.883

在“将 x 轴更改为更有条理的集合”下，我使用了以下代码：

```
.SeriesCollection(1).XValues = "='Chart Data'!" & rChartData.Offset(, 5).Resize(, 1).Address 
```

# c# - ToList() 给出错误“无法解决排序规则冲突”

> ID：14989127
> 
> 赞同：3
> 
> 时间：2013-02-20T20:18:32.810
> 
> 标签：c#, sql-server, entity-framework, exception-handling, collation

这是我的查询

```
var maillst = (from o in ObjContext.CashDepositCapturings
               join m in ObjContext.Merchants on o.MerchantID equals m.MerchantID
               join u in ObjContext.Users on o.CreatedBy equals u.UserID
               where u.EmailAddress != String.Empty && u.EmailAddress != null && 
               o.CashDepositCapturingID.Equals(dataModel.CashDepositId)
               select new CashDepositApproveMail
               {
                  SendToEmailId = u.EmailAddress,
                  SendToFirstName = u.FirstName,
                  sendToLastName = u.LastName,
                  cashDepoCreatedBy = o.CreatedBy,
                  CashDepoCaptrId = o.CashDepositCapturingID
               }).ToList(); 
```

这给了我错误：

> 无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突。

但是当我删除 .ToList() 它工作正常

我有三个这样的查询我想将所有三个的结果添加到一个列表中并将其发送到某个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:32:19.140

当它到达数据库时，您最终会尝试比较使用不同排序规则存储的两个 varchar。一种是使用 Latin1 General Case Insensitive Accent Sensitive 的 SQL 排序规则，另一种是该排序规则的 Windows 风格。

在 SQL`collate`中，您可以通过使用相关列来解决此问题，以确保它们在相同的排序规则中进行比较。在您的实体框架中，您将不得不找到一些其他方法来使排序规则相同。

# android - Android 应用程序在 XMl 解析时不断崩溃

> ID：14989129
> 
> 赞同：1
> 
> 时间：2013-02-20T20:18:35.197
> 
> 标签：android, xml, parsing, xmlhttprequest

在调试模式下运行时，我的应用程序 LogCat 给了我这个输出：

我正在尝试解析从 HTTPGet 请求（字符串结果）接收到的 XML 文档，结果是字符串格式的 XML。只是不能让它输入字符串值来测试登录。

> 02-20 19:39:48.326：E/AndroidRuntime(774)：致命异常：主要 02-20 19:39:48.326：E/AndroidRuntime(774)：java.lang.ClassCastException：org.apache.harmony.xml。 dom.ElementImpl 无法转换为 android.sax.Element 02-20 19:39:48.326: E/AndroidRuntime(774): at com.testingapp.MainActivity$startLogin.onPostExecute(MainActivity.java:112) 02-20 19: 39:48.326: E/AndroidRuntime(774): 在 com.testingapp.MainActivity$startLogin.onPostExecute(MainActivity.java:1) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.AsyncTask .finish(AsyncTask.java:631) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.AsyncTask.access$600(AsyncTask.java:177) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644) 02-20 19:39:48.326: E/AndroidRuntime(774):在 android.os.Handler.dispatchMessage(Handler.java:99) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.Looper.loop(Looper.java:137) 02-20 19 :39:48.326: E/AndroidRuntime(774): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 java.lang.reflect。 Method.invokeNative(Native Method) 02-20 19:39:48.326: E/AndroidRuntime(774): at java.lang.reflect.Method.invoke(Method.java:511) 02-20 19:39:48.326: E /AndroidRuntime(774): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:560) 02-20 19:39:48.326: E/AndroidRuntime(774): at dalvik.system.NativeStart.main(Native Method)99) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.Looper.loop(Looper.java:137) 02-20 19:39:48.326: E/AndroidRuntime(774): 在android.app.ActivityThread.main(ActivityThread.java:5039) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-20 19:39 :48.326: E/AndroidRuntime(774): at java.lang.reflect.Method.invoke(Method.java:511) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02 -20 19:39:48.326：E/AndroidRuntime（774）：在 dalvik.system.NativeStart.main（本机方法）99) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 android.os.Looper.loop(Looper.java:137) 02-20 19:39:48.326: E/AndroidRuntime(774): 在android.app.ActivityThread.main(ActivityThread.java:5039) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-20 19:39 :48.326: E/AndroidRuntime(774): at java.lang.reflect.Method.invoke(Method.java:511) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02 -20 19:39:48.326：E/AndroidRuntime（774）：在 dalvik.system.NativeStart.main（本机方法）326: E/AndroidRuntime(774): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 java.lang.reflect.Method.invokeNative （本机方法）02-20 19:39:48.326：E/AndroidRuntime（774）：在 java.lang.reflect.Method.invoke（Method.java:511）02-20 19:39:48.326：E/AndroidRuntime（ 774): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 com.android.internal.os.ZygoteInit .main(ZygoteInit.java:560) 02-20 19:39:48.326: E/AndroidRuntime(774): at dalvik.system.NativeStart.main(Native Method)326: E/AndroidRuntime(774): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 java.lang.reflect.Method.invokeNative （本机方法）02-20 19:39:48.326：E/AndroidRuntime（774）：在 java.lang.reflect.Method.invoke（Method.java:511）02-20 19:39:48.326：E/AndroidRuntime（ 774): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): 在 com.android.internal.os.ZygoteInit .main(ZygoteInit.java:560) 02-20 19:39:48.326: E/AndroidRuntime(774): at dalvik.system.NativeStart.main(Native Method)326: E/AndroidRuntime(774): at java.lang.reflect.Method.invoke(Method.java:511) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02- 20 19:39:48.326：E/AndroidRuntime（774）：在 dalvik.system.NativeStart.main（本机方法）326: E/AndroidRuntime(774): at java.lang.reflect.Method.invoke(Method.java:511) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os .ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-20 19:39:48.326: E/AndroidRuntime(774): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02- 20 19:39:48.326：E/AndroidRuntime（774）：在 dalvik.system.NativeStart.main（本机方法）

我能够将错误集中到我的 onPostExecute AsyncTask 中：

```
@Override
              protected void onPostExecute(String result) {

                int z = 0;  
                String xml = result;
                String KEY_ITEM = "Response";
                String KEY_SUCCESS = "Success";
                String KEY_FAIL = "Fail";
                String KEY_UID = "UID";

                  Document doc = getDomElement(xml);

                    if(xml != null)
                    {
                        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                        for (int i = 0; i < nl.getLength(); i++)
                        {   
                        Element e = (Element) nl.item(i);
                        String successString = getValue(e,KEY_SUCCESS);
                        String UIDString = getValue(e,KEY_UID);
                        String failString = getValue(e,KEY_FAIL);

                        if(failString.equals("Fail")){
                            int duration = Toast.LENGTH_LONG;
                            Toast toast = Toast.makeText(MainActivity.this, "Please check username and password.", duration);
                            toast.setGravity(Gravity.TOP|Gravity.RIGHT, 0, 0);
                            toast.show();
                        }
                        else{
                            if(successString.equals("Success")){
                                Intent intent = new Intent (MainActivity.this, HomeActivity.class);
                                startActivity(intent);
                                }
                            }
                        }
                    }
                    else
                    {
                        Toast toast = Toast.makeText(MainActivity.this, "No Connection to Retrieve Data.", Toast.LENGTH_LONG);
                        toast.show();
                    }
        } 
```

我不明白我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:26:35.670

这就是问题所在......改变这个

```
public String getValue(Element item, String str) { 
    NodeList n = ((Document) item).getElementsByTagName(str);
    return getElementValue(n.item(0)); 
} 
```

至

```
public String getValue(Element item, String str) { 
    NodeList n = item.getElementsByTagName(str);  // Removed Typecast
    return getElementValue(n.item(0)); 
} 
```

您正在转换 Element.getElementsByTagName(str) 正在返回一个 NodeList 对象。但是您将其转换为 Document 对象，因此出现 Class Cast Exception。

# jquery - 文档准备就绪和链接加载时的 Jquery 动画

> ID：14989132
> 
> 赞同：1
> 
> 时间：2013-02-20T20:18:50.267
> 
> 标签：jquery

目前，我有一个动画，可以在悬停和左右滑动面板以显示其下方的内容。我要做的是让面板在主页的初始加载时左右滑动，然后当人们单击指向单独页面的链接时，面板返回到页面中心，一旦加载数据后，它们会左右移动以再次显示其下方的数据。

我不知道在哪里采取我必须使所有这些工作。到目前为止，这是我对 css 的通用描述：

```
 body {margin:0;padding:0;height:100%;width:100%;}
.overlay_container {height:100%;width:100%;overflow:hidden;}
    .box_container{  
position:relative; /* important */  
width:1280px; /* we must set a specific width of the container, so it doesn't strech when the image starts moving */  
height:953px; /* important */  
overflow:hidden; /* hide the content that goes out of the div */  
/*just styling bellow*/  
background: black;  
color:white;  
}  
.images_holder{  
position:absolute; /* this is important, so the div is positioned on top of the text */  
}  
.image_div {  
    position:relative; /* important so we can work with the left or right indent */  
    overflow:hidden; /* hide the content outside the div (this is how we will hide the part of the image) */  
    width:50%; /* make it 50% of the whole images_holder */  
    float:left; /* make then inline */  
}  
.right img{  
    margin-left: -100%; /* 100% is in this case 50% of the image, so this is how we show the second part of the image */  
}  
.clear{  
    clear:both;  
} 
```

然后是jQuery：

```
$(document).ready(function() {

    //when the user hovers over the div that contains our html...
    $('.box_container').hover(function(){
        //... we get the width of the div and split it by 2  ...
        var width = $(this).outerWidth() / 2;
        /*... and using that width we move the left "part" of the image to left and right "part"
        to right by changing it's indent from left side or right side... */
        $(this).find('.left').animate({ right : width },{queue:false,duration:500});
        $(this).find('.right').animate({ left : width },{queue:false,duration:500});
    }, function(){
        //... and when he hovers out we get the images back to their's starting position using the same function... '
        $(this).find('.left').animate({ right : 0 },{queue:false,duration:500});
        $(this).find('.right').animate({ left : 0 },{queue:false,duration:500});
        //... close it and that's it
    }); 
```

});

和html：

```
 <div class='box_container'>  

        <!--START THE IMAGE PARTS HOLDER-->  
        <div class='images_holder'>  

            <!--INSERT THE SAME IMAGE IN 2 DIVS, THEY BOTH HAVE image_div CLASS AND left OR right CLASS DEPENDING ON POSITION-->  
            <div class='image_div left'><img class='box_image' src='1280overlay.jpg' style='width:1280px'/></div>  
            <div class='image_div right'><img class='box_image' src='1280overlay.jpg' style='width:1280px'/></div>  

            <!-- WE USED CSS FLOAT PROPERY, SO WE NEED TO CLEAR NOW-->  
            <div class='clear'></div>  

        </div>  
        <!--END THE IMAGE PARTS HOLDER-->  

        <!--START THE TEXT-->  
        Just some dummy text.  
        <!--END THE TEXT-->  

</div> 
```

想法？

# jsf - JSF 在渲染后将 ViewScoped bean 的属性重置为初始值

> ID：14989133
> 
> 赞同：1
> 
> 时间：2013-02-20T20:18:51.240
> 
> 标签：jsf, primefaces, reset

我有一个 ViewScoped ManagedBean。此 bean 有一个布尔属性，用于控制是否应显示数据表。见下文：

```
<p:dataTable value="#{loc.locationRows}" var="obj" ... rendered="#{loc.renderLocationTable}">   
    <p:column>
        ...
    </p:column>

    ...
</p:dataTable> 
```

我的 ManagedBean 看起来像这样：

```
@ManagedBean(name = "loc")
@ViewScoped
public class LocationController implements Serializable {
    private boolean renderLocationTable = false;

    // JSF ActionListener.
    public void methodA() {
        if(someCondition) {
            renderLocationTable = true; // this is the only time we should render location table
        }
    }
} 
```

一旦调用 methodA() 并满足某些条件，则应呈现该表；这很好用。但是，问题在于，对于每一个被调用的其他 JSF ActionListener 方法，我必须显式地将呈现的布尔值设置回 false。见下文：

```
@ManagedBean(name = "loc")
@ViewScoped
public class LocationController implements Serializable {
    private boolean renderLocationTable = false;

    // JSF ActionListener.
    public void methodA() {
        if(someCondition) {
            renderLocationTable = true; // this is the only time we should render location table
        }
    }        

    // JSF ActionListener.
    public void methodB() {
        renderLocationTable = false;
    }

    // JSF ActionListener.
    public void methodC() {
        renderLocationTable = false;
    }
} 
```

我给出了一个非常小的实际 ManagedBean 和 XHTML 文件的片段。在现实中，这些文件很大，而且还有很多其他布尔“渲染”标志正在发生。保持这些标志的准确性变得越来越困难。另外，每个 ActionListener 方法现在都必须知道所有布尔标志，即使它们与手头的业务无关。

这就是我希望能够做到的：

```
<f:event type="postRenderView" listener="#{loc.resetRenderLocationTable}" />
<p:dataTable value="#{loc.locationRows}" var="obj" ... rendered="#{loc.renderLocationTable}">   
    <p:column>
        ...
    </p:column>

    ...
</p:dataTable> 
```

然后，在 ManagedBean 中有一个方法：

```
public void resetRenderLocationTable(ComponentSystemEvent event) {
    renderLocationTable = false;
} 
```

这不是很好吗？不再玩重置布尔变量的游戏。没有更多的测试用例，我们需要确保表格在不应该显示的时候不显示。当适当的 JSF ActionListener 方法将其设置为 true 时，可以将呈现的标志设置为 true，然后“回发”调用会将标志重置为 false……完美。但是，显然没有办法用 JSF 开箱即用地做到这一点。

那么，有人有解决这个问题的方法吗？

谢谢！

顺便说一句，这种情况的发生可能比你想象的要多得多。任何时候，只要您有一个使用 ActionListener 的带有多个 commandButtons 的表单，那么这种情况就可能发生在您身上。如果您曾经有一个 JSF ManagedBean，并且您发现自己在整个类中设置布尔标志为真或假，那么这种情况适用于您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:58:09.213

您没有添加 primefaces 标签，但根据您的代码，我看到您正在使用 Primefaces。假设您`methodA()`的调用来自，例如`p:commandButton`。我建议首先创建 primefaces 远程命令：

```
<p:remoteCommand name="resetRenderLocationTable">
  <f:setPropertyActionListener value="#{false}" target="#{loc.renderLocationTable}"/>
</p:remoteCommand> 
```

这将创建一个名为的 JavaScript 函数`resetRenderLocationTable`，其调用将生成 AJAX 请求，该请求将`renderLocationTable`属性设置为`false`. `oncomplete`现在只需在您`commandButton`（或任何其他 AJAX 源）中添加对该函数的调用：

```
<p:commandButton action="#{loc.methodA()}" update="myDatatable" oncomplete="resetRenderLocationTable()"/> 
```

在下一个请求中，您不必担心重置此属性，只需更新您的数据表。

# file - Qt：下载文件不起作用

> ID：14989135
> 
> 赞同：0
> 
> 时间：2013-02-20T20:18:53.413
> 
> 标签：file, qt, ssl, download

三天以来，我试图提出一个可行的代码来简单地从 URL 下载文件，但到目前为止我遇到了很多问题，现在我处于看不到错误的地步。

首先，我的代码：

主文件

```
#include "mainwindow.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    w.downloadArchive(QString("https://bitbucket.org/BattleClinic/evemon/downloads/EVEMon-binaries-1.8.1.4016.zip"), QCoreApplication::applicationDirPath(), QString("evemon.zip"));

    return a.exec();
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QFile>
#include <QFileInfo>
#include <QNetworkAccessManager>
#include <QNetworkReply>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    bool downloadArchive(QString archiveUrl, QString saveToPath, QString archiveName);

private slots:
    void downloadReadyRead();
    void downloadProgress(qint64 bytesReceived, qint64 bytesTotal);
    void downloadFinished();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QMessageBox>

QNetworkAccessManager manager;
QFile *file;
QNetworkReply *reply;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->downloadLabel->hide();
    ui->downloadProgressBar->hide();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::downloadReadyRead()
{
    if(file)
    {
        file->write(reply->readAll());
    }
}

void MainWindow::downloadProgress(qint64 bytesReceived, qint64 bytesTotal)
{
    ui->downloadProgressBar->setMaximum(bytesTotal);
    ui->downloadProgressBar->setValue(bytesReceived);
}

void MainWindow::downloadFinished()
{
    downloadReadyRead();
    file->flush();
    file->close();

    if(reply->error())
    {
        QMessageBox::information(this, "Download failed", tr("Failed: %1").arg(reply->errorString()));
    }

    reply->deleteLater();
    reply = NULL;
    delete file;
    file = NULL;

    ui->downloadLabel->hide();
    ui->downloadProgressBar->hide();
}

bool MainWindow::downloadArchive(QString archiveUrl, QString saveToPath, QString archiveName)
{
    QUrl url(archiveUrl);

    if(archiveName.count() <= 0)
    {
        return false;
    }

    if(QFile::exists(saveToPath + "/" + archiveName))
    {
        QFile::remove(saveToPath + "/" + archiveName);
    }

    file = new QFile(saveToPath + "/" + archiveName);

    if(!file->open(QIODevice::WriteOnly))
    {
        delete file;
        file = NULL;
        return false;
    }

    reply = manager.get(QNetworkRequest(url));

    connect(reply, SIGNAL(finished()), this, SLOT(downloadFinished()));
    connect(reply, SIGNAL(readyRead()), this, SLOT(downloadReadyRead()));
    connect(reply, SIGNAL(downloadProgress(qint64,qint64)), this, SLOT(downloadProgress(qint64,qint64)));

    ui->downloadLabel->setText(QString("Downloading %1...").arg(archiveName));
    ui->downloadLabel->show();
    ui->downloadProgressBar->show();

    return true;
} 
```

下载器.pro

```
QT       += core gui network

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = Downloader
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

在 mainwindow.cpp 中，我正在检查错误并将其打印到 MessageBox，以防万一。我在回复中使用当前代码遇到的第一个错误是“无法初始化 SSL 上下文”，因为我正在从 https 站点请求数据。我用谷歌搜索了一段时间，发现解决方案是两个名为“libeay32.dll”和“ssleay32.dll”的文件，我必须将其复制到可执行文件的目录中。

现在回复中不再有错误（至少 MessageBox 没有出现）....但是，在执行 downloadFinished 函数后，下载的文件大小为 0 kb，这让我觉得，他们不是根本没有发生下载。

我跳过了“if(reply->error())”语句并无论如何都显示了 MessageBox....我得到了一个：“未知错误”。“未知错误”是否应该不将“if(reply->error())”语句设置为 true？

权限也没有问题......我以管理员身份尝试过......所以创建文件本身没有问题。任何人都可以帮助我使该代码正常工作吗？我会错过任何 dll 或 #include 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T11:38:38.703

使用 SSL 下载：

```
connect(&http, SIGNAL(finished(QNetworkReply*)), this, SLOT(finishedHttp(QNetworkReply*)));
QNetworkRequest *req = new QNetworkRequest();
req->setUrl( QUrl("https://...") );
QSslConfiguration configSsl = QSslConfiguration::defaultConfiguration();
configSsl.setProtocol(QSsl::AnyProtocol);
req->setSslConfiguration(configSsl);
http.get(*req); 
```

您需要：libeay32.dll、libssl32.dll、ssleay32.dll（来自 OpenSSL）和 Visual c++ 2008 SP1 redist 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:26:45.023

确保它适用于非 ssl 文件。然后要添加 ssl 支持，请尝试按照此问题的答案中的说明进行操作：

[缺少 Qt SSL 支持](https://stackoverflow.com/questions/3516143/qt-ssl-support-missing)

大多数时候也尝试`qDebug`在您的代码中使用而不是 QMessageBox 。它使添加调试行更容易，并且不会中断您的代码或使用 QMessageBoxes 填充您的屏幕。

# css - 在 Bootstrap 中缩小屏幕时，如何防止两个“spanX”div 重叠？

> ID：14989138
> 
> 赞同：0
> 
> 时间：2013-02-20T20:19:08.140
> 
> 标签：css, twitter-bootstrap

我正在使用`responsive`Twitter Bootstrap 2.3 的布局。我有一个`span9 row-fluid`包含两个div 的`span4`div。

为了测试屏幕的流动性，我正在缩小窗口。有一个特定的点，右边`span4`与左边重叠`span4`。如果我继续缩小窗口，它将适当堆叠。但我希望它在重叠之前适当堆叠。我想要的功能是否内置在 Bootstrap 中，而我只是做得不对？

当然感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:11:48.217

也许仔细检查您使用的是引导响应式 css 并且您的 HTML 中没有亮点。我对您的布局并不完全清楚，但这是一个接近的工作示例：http: [//jsfiddle.net/panchroma/RMUmW/](http://jsfiddle.net/panchroma/RMUmW/)

**HTML**

```
<div class="container">
    <div class="row-fluid">
        <div class="span9">
            <div class="row-fluid">
                <div class="span4">
                    nested span4
                </div>
                 <div class="span4">
                    nested span4
                </div>
                 <div class="span4">
                    nested span4
                </div>

            </div> <!-- end nested row -->

        </div> <!-- end span9 -->
        <div class="span3">
            span 3
        </div> <!-- end span3 -->
    </div><!-- end row -->

</div> <!-- end container --> 
```

祝你好运！

# ruby-on-rails-3 - 在导轨上的控制器内存储变量

> ID：14989142
> 
> 赞同：0
> 
> 时间：2013-02-20T20:19:24.047
> 
> 标签：ruby-on-rails-3, controller, action

我知道有很多信息可用于在一个控制器操作和另一个控制器操作之间传递变量，无论是在同一个控制器内还是到其他控制器。

但是我试图做的（我一直无法找到任何文档）是将变量临时存储在一个控制器操作中，以便在不久之后调用另一个控制器操作（在同一控制器内）时可用。

我尝试使用实例变量，但它不起作用。

我不相信我可以使用闪光灯，因为那只是为了下一个动作。

类变量不合适，因为如果用户同时做事，它会导致冲突。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:22:55.593

您可能希望在第一次通过时在控制器中为此使用会话：

```
session[:save_me] = "for next time" 
```

然后在下一次在那里

```
if( session[:save_me] )
 #do cool stuff here
 session[:save_me] = nil 
end 
```

Http 是无状态的，因此我们使用会话将信息从请求传递到请求。

# vbscript - 直接通过 WSUS 检查 Windows 更新

> ID：14989145
> 
> 赞同：1
> 
> 时间：2013-02-20T20:19:34.850
> 
> 标签：vbscript, windows-update

本月早些时候，我提出了一个[关于](https://stackoverflow.com/questions/14758763/checking-with-vbscript-if-server-has-all-critical-updates-installed-managed-b)如何使用 vbscript 检查服务器是否有任何关键更新待处理的问题。提供的答案效果很好，我将脚本发送到我们的 QA 环境进行额外测试。

有一个服务器可以运行的“保险库”环境，它无法访问 Windows 更新代理，只能通过 WSUS 直接获取 Windows 更新。*VBScript 有没有办法直接通过 WSUS 而不是*Windows 更新代理检查关键更新。

我收到此代码的 0x8024402C 错误（逻辑取自上一个问题）。它被包装在一个子程序中，该子程序将根据结果给出 PASS 或 FAIL 输出。我已经验证了这在某些服务器上有效。

```
Dim count
count = 0

'Microsoft Magic
Set updateSession = CreateObject("Microsoft.Update.Session")
Set updateSearcher = updateSession.CreateupdateSearcher()
Set searchResult = updateSearcher.Search("IsAssigned=1 and isHidden=0 and IsInstalled=0 and Type='Software'")
'End Microsoft Magic
    If searchResult.Updates.Count <> 0 Then ' If Updates were found
      For i = 0 to searchResult.Updates.Count - 1 'Just count the number of updates
         count = count + 1
      Next
      objResult.Text = "FAIL"
      objComment.Text = "There are " & count & " updates that need to be installed"
    Else
      objResult.Text = "PASS"
      objComment.Text = "All updates are installed"
    End If

  If NOT len(objResult.Text) Then 'Just in case searchResult produces an error
    objResult.Text = "FAIL"
    objComment.Text = "Could not query Windows Update Server"
  End If 
```

至少，如果我当前的代码无法连接到 Windows 更新代理并像我在上面所做的那样输出，那么我当前的代码是否有办法检查错误，这样我就可以继续我的脚本的其余部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:34:40.257

> 有一个服务器可以运行的“保险库”环境，它无法访问 Windows 更新代理，只能通过 WSUS 直接获取 Windows 更新。VBScript 有没有办法直接通过 WSUS 而不是 Windows 更新代理检查关键更新。

也许关于架构的注释会对此有所帮助。每个系统都有一个 Windows 更新代理。它随操作系统一起提供。Windows 更新代理完成所有工作，无论是与自动更新通信的家庭系统、在 IE 中浏览到 Windows 更新的旧系统、使用控制面板 WUApp 还是与 WSUS 服务器通信——它都是 Windows 更新代理做这项工作。

上述脚本与 WSUS 服务器对话，并根据 Windows 更新代理向 WSUS 服务器报告的内容检索信息。

断开连接的系统（我相信“保险库环境”所指的内容）无法访问 AU/WU/MU，但根据“保险库环境”的大小，可以实施 WSUS该环境中的服务器。WSUS 文档包含有关如何在断开连接的网络中部署和管理 WSUS 服务器的详细说明。

如果断开的网络中没有 WSUS 服务器，您也可以使用脱机扫描 cab (WSUSSCN2.CAB)，但需要注意的是，此脱机文件不包含所有更新 - 它包含安全更新、更新汇总和服务包，因此如果希望获得所有关键更新，那将无法满足需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:00:43.550

该脚本将（尝试）检查使用相应主机配置的任何更新服务器。如果主机配置为使用 WSUS，则脚本将检查该服务器。如果主机配置为检查 Microsoft 的 Windows Update 服务器，它将尝试连接到这些服务器。

错误`8024402C`表示计算机无法连接到配置的更新服务器。检查您的主机是否配置为使用 WSUS：

```
Const HKLM  = &h80000002
Const wuKey = "SOFTWARE\Policies\Microsoft\Windows\WindowsUpdate"

Set wmi = GetObject("winmgmts://./root/default:StdRegProv")
status = wmi.GetStringValue(HKLM, wuKey, "WUServer", wsus)

If status = 0 Then
  WScript.Echo "Using WSUS: " & wsus
Else
  WScript.Echo "Using Windows Update directly."
End If 
```

然后检查是否可以连接到相应的服务器（如有必要，将端口 80 更改为 WUServer 值中指定的端口）：

```
telnet wsus.example.com 80 
```

或（对于 Windows 更新）：

```
telnet windowsupdate.microsoft.com 80 
```

请注意，如果没有 WSUS，您的主机**必须**能够连接到[MSKB 文章 885819中列出的](http://support.microsoft.com/kb/885819)**所有**URL 。

还要确保名称解析适用于您的主机。

# android - 有问题的自定义适配器偶尔在 ListFragment 中为空

> ID：14989146
> 
> 赞同：1
> 
> 时间：2013-02-20T20:19:41.867
> 
> 标签：android, android-fragments, android-arrayadapter

所以这个问题只发生几次。我看不到任何韵律或理由。我怀疑，用户在应用程序中移动的速度越快，它发生的可能性就越大。

这是LogCat：

```
02-20 12:09:58.526: E/AndroidRuntime(18777): FATAL EXCEPTION: main
02-20 12:09:58.526: E/AndroidRuntime(18777): java.lang.NullPointerException
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.widget.ArrayAdapter.init(ArrayAdapter.java:310)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at com.---.---.ReviewAdapter.<init>(ReviewAdapter.java:42)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at com.---.---.RateFragmentActivity$ReviewFragment$ReviewTask.onPostExecute(RateFragmentActivity.java:1203)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at com.---.---.RateFragmentActivity$ReviewFragment$ReviewTask.onPostExecute(RateFragmentActivity.java:1)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.os.AsyncTask.finish(AsyncTask.java:631)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.os.Looper.loop(Looper.java:137)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at android.app.ActivityThread.main(ActivityThread.java:5193)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
02-20 12:09:58.526: E/AndroidRuntime(18777):    at dalvik.system.NativeStart.main(Native Method) 
```

崩溃发生在这里：

```
adapter = new ReviewAdapter(getActivity(), r, tf); 
```

`r`(an `array`) 不是`null`，也不是`tf`，`TrueType`字体）。

在 ReviewAdapter 上，这是崩溃线 42 的另一侧：

```
public ReviewAdapter(Context context, Review[] objects, Typeface tf) {
        super(context, 0, objects);  // line 42 
```

我相信上下文是`null`.

这是大图：

我有一个和`FragmentActivity`一个。当然是在里面。这些片段都没有相互作用。它们静态显示在. `Fragment``ListFragment``adapter``ListFragment``xml`

所以 ReviewAdapter 在里面被调用：

```
protected void onPostExecute(Void v) { 
```

代替：

```
public class ReviewTask extends AsyncTask<String, String, Void> { 
```

代替：

```
public static class ReviewFragment extends ListFragment { 
```

代替：

```
public class RateFragmentActivity extends SherlockFragmentActivity implements
        ActionBar.TabListener { 
```

这就是事物的背景。我一定没有正确处理我的片段生命周期，但这个错误是如此零星。

最后一点：我的清单中确实有这个：

```
 android:configChanges="orientation|screenSize|keyboardHidden" 
```

所以配置更改不会导致这种情况。

有人请帮我解决这个问题：这个问题困扰了我好几个月。如果您需要查看更多代码，请务必告诉我，我会提供！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:45:56.713

`null`我通过使用 Luksprog 的建议解决了这个问题：在设置适配器之前检查上下文。

简单地：

`if (getActivity() != null) { \\ set adapter }`

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:41:52.860

听起来您可能正在创建`OnCreate`片段的适配器，并且根据它的执行方式，片段可能尚未附加到活动。更多代码将有助于查看您`ReviewTask`的执行位置，如果可以的话，我建议将其移动到，`onCreateView`因为我怀疑它当前在`onCreate`其中并且它正在运行并尝试在您的 Fragment 附加到它的活动之前创建适配器。

# c - 行不提示输入

> ID：14989149
> 
> 赞同：1
> 
> 时间：2013-02-20T20:19:50.100
> 
> 标签：c, visual-studio-2010

我是编程新手，一直在做课堂作业。出于某种奇怪的原因，程序一直在同一行打印 2 个不同的 printf，而不是让我有机会输入信息

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main (void)
{   char Name[20];
    char cid1[6]="", cid2[6]="", cid3[6]="", cid4[6]="", cid5[6]="", cid6[6]="";
    char Description1[21]="", Description2[21]="", Description3[21]="", Description4[21]="", Description5[21]="", Description6[21]="";
int hrs1 = 0, hrs2=0, hrs3=0, hrs4=0, hrs5=0, hrs6=0;
char grade1[2]="",grade2[2]="",grade3[2]="",grade4[2]="",grade5[2]="",grade6[2]="";

printf("Enter Students Name ");
fgets(Name, 20, stdin);

printf("Enter Class ID ");
scanf("%5s", cid1);

printf("Enter Class Description ");             // Problem
fgets(Description1, 20, stdin);                 // here

printf("Enter Class Hours ");
scanf("%d", &hrs1);

printf("Enter Class Grade ");
fgets(grade1, 1, stdin);

printf("%s\n", Name);
printf("%s\n", cid1);
printf("%s\n", Description1);
printf("%d\n", hrs1);
printf("%s\n", grade1);

system("pause");

return 0; 
```

标有“Problem here”的区域是当前出现问题的地方。它不会提示输入课程描述，而是直接跳到输入课程时间并完全忽略底部的输入课程成绩。

它打印为：输入课程描述输入课程时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:28:04.823

输入缓冲区中还有一个换行符，来自上一个输入操作。摆脱它的一种方法是逐个字符地阅读，直到您阅读`'\n'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:31:25.760

`scanf`您没有通过调用消耗换行符。当`fgets`它读取换行符时返回，它立即返回。

您可以更改`scanf`格式字符串以使用换行符，如下所示

```
scanf("%5s\r\n", cid1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:32:41.743

好像您在 Windows 上运行它。Windows 在正确刷新其标准输入方面存在问题。尝试使用

```
 fflush(stdin); 
```

从控制台读取任何内容后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:37:25.487

[`scanf`](http://www.cplusplus.com/reference/cstdio/scanf/)他们试图教你和之间的区别[`fgets`](http://www.cplusplus.com/reference/cstdio/fgets/)。他们可能会通过告诉您 Class ID 必须是 4 个字符来欺骗您。

因此，如果您的 Class ID 是“1234”并且您点击`Enter`后，最终结果`stdin`是：

`1234\r\n`

中的`%5s`格式`scanf`说要读取 5 个字符，然后继续。因此，您在流中阅读`1234\r`并离开。然后在执行时，它会读入并继续前进。`\n``stdin``fgets``\n`

从上面开始`fgets`：

> **从流中获取字符串**
> 
> 从流中读取字符并将它们作为 C 字符串存储到 str 中，直到读取 (num-1) 个字符或到达换行符或文件结尾，以先发生者为准。

# scala - 错误：在 Play 2.1.0 中运行现有项目时无法检索 sbt 0.11.3？

> ID：14989154
> 
> 赞同：9
> 
> 时间：2013-02-20T20:20:26.800
> 
> 标签：scala, playframework, playframework-2.0, sbt

我是 Play Framework 的新手。我刚刚阅读了有关如何创建和运行游戏项目的信息。我已经获得了一个项目并且面临`Error: Could not retrieve sbt 0.11.3`：

```
Getting org.scala-sbt sbt 0.11.3 ...

:: problems summary ::
:::: WARNINGS
        module not found: org.scala-sbt#sbt;0.11.3

    ==== local: tried

      /home/ritesh/Play/play-2.1.0/repository/local/org.scala-sbt/sbt/0.11.3/ivys/ivy.xml

    ==== Maven2 Local: tried

      file:///home/ritesh/.m2/repository/org/scala-sbt/sbt/0.11.3/sbt-0.11.3.pom

    ==== typesafe-ivy-releases: tried

      http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt/0.11.3/ivys/ivy.xml

    ==== Maven Central: tried

      http://repo1.maven.org/maven2/org/scala-sbt/sbt/0.11.3/sbt-0.11.3.pom

        ::::::::::::::::::::::::::::::::::::::::::::::

        ::          UNRESOLVED DEPENDENCIES         ::

        ::::::::::::::::::::::::::::::::::::::::::::::

        :: org.scala-sbt#sbt;0.11.3: not found

        ::::::::::::::::::::::::::::::::::::::::::::::

:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
unresolved dependency: org.scala-sbt#sbt;0.11.3: not found
Error during sbt execution: Error retrieving required libraries
  (see /home/ritesh/Play/play-2.1.0/framework/sbt/boot/update.log for complete log)
Error: Could not retrieve sbt 0.11.3 
```

我只安装了 Play Framework`2.1.0`发行版，没有别的。

如何通过错误并`play`成功执行命令？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T22:31:26.440

我认为您现有的项目依赖于 sbt 0.11.3，并且您正在使用使用 sbt 0.12.2 的 Play 2.1.0 运行它。

检查位于项目文件夹下的文件 build.properties。如果它显示 0.11.3，您的项目可能使用另一个 Play 版本，需要升级到 2.1.0。
sbt-plugin 应该分配了 Play 2.1.0 - se plugins.sbt 在项目文件夹下。

升级您的项目：[http ://www.playframework.com/documentation/2.1.0/Migration](http://www.playframework.com/documentation/2.1.0/Migration)

或者 - 切换到较旧的 Play 版本 - 适合您的项目。=> [http://www.playframework.com/download](http://www.playframework.com/download)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T16:31:51.840

看来您正在使用`2.1.0`与 sbt 一起分发的 play `0.12.2`。

解决方案不是升级您的播放分发，因为您只需要编辑`project/build.properties`文件并更改

```
sbt.version=0.11.3 
```

至

```
sbt.version=0.12.2 
```

随着变化，项目应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:21:21.400

sbt 0.11.3 没有 Play 2.1。由于您不在窗口框上，我建议您使用[sbt-extras](https://github.com/paulp/sbt-extras)。该实用程序将自动下载正确版本的 sbt。

```
curl https://raw.github.com/paulp/sbt-extras/master/sbt > ~/bin/sbt
chmod +x ~/bin/sbt 
```

然后从您的项目目录中：

```
~/bin/sbt 
```

如果文件`bin`夹中的文件自动位于路径上，则可以跳过该`~/bin/`部分。

要在没有 sbt extras 的情况下工作，您需要下载适当的 play 版本，该版本可以在`project/plugins.sbt`您的项目目录中找到。

# jquery - 为什么我的新元素被包裹在一个数组中？

> ID：14989157
> 
> 赞同：-2
> 
> 时间：2013-02-20T20:20:39.387
> 
> 标签：jquery

为什么我的新元素被包裹在一个数组中？

```
$('<a>')
[<a>​&lt;/a>​] 
```

当我尝试使用它时，`appendChild`我得到一个 dom 异常 8 错误。

编辑：这是一个例子。我的确切代码是

```
addendum = $("<a>", {href: download_url, text:"Download .nupkg file"})
badge = $(".nuget-badge")[0]
badge.appendChild(addendum) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:22:27.040

所有 jQuery 对象都是类数组对象。选择集合中的第`[0]`一个元素将只返回一个元素。如果您改为记录 jQuery 对象，它将在控制台中显示为一个数组。

请注意，jQuery 有一个名为 .append 的内置方法，它应该可以满足您的需求。

```
$('<a>').append('<span>Hello World!</span>'); 
```

或者

```
$('<a>').append(someotherelement); 
```

或对于您给定的代码：

```
$(".nuget-badge").append($("<a>", {href: download_url, text:"Download .nupkg file"})) 
```

或（首选）

```
$("<a>", {href: download_url, text:"Download .nupkg file"}).appendTo(".nuget-badge"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:24:15.353

您可以`body`像这样附加一个元素：

```
$('body').append($('<a>',{text:"test", href:"#"})); 
```

所以我认为你创建元素的方式没有真正的问题

**编辑**

试试这个：

```
var addendum = $("<a>", {href: download_url, text:"Download .nupkg file"});
$(".nuget-badge").append(addendum); 
```

# android - Android Loopers：无法从 UIThread 获取消息到工作线程

> ID：14989158
> 
> 赞同：1
> 
> 时间：2013-02-20T20:20:43.003
> 
> 标签：android

```
private Handler workerHandler; // instance variable of UIThread 
```

在 onCreate() 方法中

```
WorkerThread wt = new WorkerThread();
workerHandler = wt.getHandler();
wt.start(); 
```

使用下面的 SeekBar 侦听器方法将消息发送到 WorkerThread 的队列

```
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        tv.setText(String.valueOf(progress));
        workerHandler.sendMessage(workerHandler.obtainMessage(99,String.valueOf(progress)));
    } 
```

工作线程：

```
private Handler handler;

//getHandler() method 

public void run() {
        super.run();  
        Looper.prepare();

        handler = new Handler(){
            @Override
            public void handleMessage(Message msg) {
                super.handleMessage(msg);  
                if (msg.what == 99)
                    Log.d("RTR","Message from Main Thread:"+(String)msg.obj);
            }
        };

        Looper.loop(); 
```

但是当我更改时，会`SeekBar`出现“程序不幸停止”的消息。可能是什么原因？

更新：问题出在工作线程的处理程序上。`workerHandler`它仍然是`null`。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:13:42.540

在这段代码中：

```
WorkerThread wt = new WorkerThread();
workerHandler = wt.getHandler();
wt.start(); 
```

第 1 行实例化一个新`WorkerThread`对象并调用其构造函数。**注意：这实际上并没有创建一个正在运行的线程，也没有调用该`run()`方法**

`getHandler()`第 2行调用对象并返回从未设置为任何`WorkerThread`值的成员变量，所以它是`workerHandler``null`

第 3 行启动线程。

问题是`run()`线程中的方法直到第 3 行执行**后才**被调用。

请看一下`HandlerThread`Android提供的。它几乎与此相同。搜索教程或示例以了解如何使用它。例如：[http ://stephendnicholas.com/archives/42](http://stephendnicholas.com/archives/42)

# angularjs - angular.js - evalAsync 未调用

> ID：14989161
> 
> 赞同：0
> 
> 时间：2013-02-20T20:20:49.653
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

在下面的 jsFiddle 中，我演示了一个让我思考的问题。它源于需要向所有范围发送系统范围的事件，告诉他们系统已完成引导。为了做到这一点，我在引导后得到了 rootScope，并调用了它的 evalAsync。唉! 它没有执行。

见这里：http: [//jsfiddle.net/cusrC/8/](http://jsfiddle.net/cusrC/8/)

```
angular.element(document).ready(function() {
angular.bootstrap(body, ['app']);
var ngInjector = angular.injector(['ng']);

var rootScope = ngInjector.get('$rootScope');
var x = rootScope.$eval(function(scope) {   
        console.log('in eval');
        scope.$broadcast('onLoad'); 
        scope.$evalAsync(function(scope) {  
            console.log('in evalAsync');
            scope.$broadcast('onLoad'); 
        });
    });
console.log('x',x);
console.log('after');
}); 
```

非常感谢您的任何想法或想法 Lior

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:48:37.960

由于您的代码在 Angular 的“外部”运行，因此您需要在示例代码的末尾调用 rootScope.$digest() 以使摘要循环运行。然后 $evalAsync() 中的表达式将被评估/执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:26:33.207

Mark 关于调用`$digest`函数是正确的，但还有一件事：你没有得到正确的根范围。

`angular.bootstrap`返回模块的注入器，该注入器已经拉入`'ng'`模块。

[这是您的小提琴，已修改](http://jsfiddle.net/cusrC/9/)。

# node.js - node.js 配置文件语法错误行 433

> ID：14989164
> 
> 赞同：16
> 
> 时间：2013-02-20T20:20:53.770
> 
> 标签：node.js

我通过一个不是joyent的链接下载了node.js，它给了我一个旧版本的node。所以我想用新的 git://github.com/joyent/node.git 重新安装 node.js。所以我尝试运行相同的克隆脚本，它给出了一个致命错误，因为我的节点文件夹不是空的。所以我删除了节点文件夹并再次运行它并克隆了它。

之后我尝试运行配置文件，但出现错误：

```
File "./configure", line 433
    fpu = 'vfpv3' if armv7 else 'vfpv2'
                   ^
SyntaxError: invalid syntax 
```

我不知道如何解决问题？我尝试删除节点文件夹并再次克隆 git，但同样的错误。

这是我在第 433 行附近的文件中找到的代码：

```
armv7 = is_arch_armv7()
# CHECKME VFPv3 implies ARMv7+ but is the reverse true as well?
fpu = 'vfpv3' if armv7 else 'vfpv2' 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-21T14:07:29.630

问题是尝试运行配置文件的 python 脚本是 Python 2.4。所以我安装了 Python 2.7（我可能已经安装了它），然后我再次运行脚本：

```
python2.7 configure 
```

然后它运行正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:03:47.623

您可以使用 curl 从终端安装它：

```
$ curl http://nodejs.org/dist/node-latest.tar.gz | tar xz --strip-components=1
$ ./configure --jobs=1 --prefix=$HOME
$ make install 
```

安装 npm：

```
$ curl http://npmjs.org/install.sh | sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T23:39:30.133

添加到@Samir 的答案，这是您可能需要做的。

```
python2.7 configure 
make PYTHON=python2.7 
```

这将使用 python2.7 配置安装，而不是使用可能早于 2.6 的默认 python。

或者，`configure`您可以更新顶部`Makefile`以使用相同版本的python

```
PYTHON ?= python2.7 
```

# sql-server - 有没有一种方法可以列出所有对象，例如使用 SYNONYM 的视图？

> ID：14989166
> 
> 赞同：2
> 
> 时间：2013-02-20T20:21:04.367
> 
> 标签：sql-server, sql-server-2008

就像它在锡上说的那样。如何确定哪些 SQL 对象正在使用给定的 SYNONYM？我想一种方法是搜索 PROC 或 VIEW 的所有内容并运行 a `LIKE '%SYN_NAME%'`，但这似乎很笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:31:12.810

```
select * from sys.sql_expression_dependencies
where referenced_id = object_id('<syn schema>.<syn name>') 
```

此视图允许访问依赖关系树。因此，如果想要引用 this 返回的对象的对象，您将需要递归或类似的方法。

您可以通过连接到 sys.objects 或使用 objectproperty() 来限制视图

# highcharts - 如何调整highcharts中网格线的间距

> ID：14989176
> 
> 赞同：4
> 
> 时间：2013-02-20T20:21:45.090
> 
> 标签：highcharts

在旧的 highcharts 中，网格线的默认间距比现在小。似乎没有调整网格线间距的api。有办法解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T11:21:54.583

网格线的位置取决于根据数据生成的刻度。因此您可以修改刻度参数（如 tickInterval / tickPixelInterval 等）

[http://api.highcharts.com/highcharts#yAxis.tickPixelInterval](http://api.highcharts.com/highcharts#yAxis.tickPixelInterval)

# php - PHP登录脚本的问题

> ID：14989177
> 
> 赞同：0
> 
> 时间：2013-02-20T20:21:47.700
> 
> 标签：php, mysql

在提到我的问题之前，我先在这里写下我的登录脚本。

我的登录页面脚本：-

```
<?php
include_once('core.inc.php'); 
if(loggedin())
{
header('Location:index.php');
} else {
include_once('connection.php');
if($_POST['parse']=="login")
    {
    if(isset($_POST['username']) && isset($_POST['password']))
        {
            $username=$_POST['username'];
            $password=$_POST['password'];
            if(!empty($username) && !empty($password))
            {
            $username=strip_tags($username);
            $username=mysql_real_escape_string($username);
            $password=strip_tags($password);
            $password=mysql_real_escape_string($password);
            $hash_password=md5($password); /* It will encrypt the password enterd by user in to 15 digit combination of character and number. Then the sql command will be generated to find the appropriate user according to their login details. It will search for the user details in the user table. */
            $query="SELECT `id` FROM `user` WHERE `Email`='".$username."' AND `Hash_password`='".$hash_password."' AND `Approved`=1";
            $query_run=mysql_query($query);
            $mysql_num_rows=mysql_num_rows($query_run);
            if($mysql_num_rows == 1)
                {
                $user_id=mysql_result($query_run,0,'id');
                $_SESSION['user_id']= $user_id; 
                header('Location:http://leadstool.net/profile/index.php');
                } else {
                        print "<script type=\"text/javascript\">";
                        print "alert('Email Id and Password Combination is wrong.')";
                        print "</script>";
                }
            }
        }
    }// loop for parse ends here
}// 1st condition ends here
?> 
```

core.inc.php 文件脚本是：-

```
<?php
ob_start();
include_once('connection.php');
session_start();
$current_file=$_SERVER['SCRIPT_NAME'];
if(isset($_SERVER['HTTP_REFERER']) && !empty($_SERVER['HTTP_REFERER']))
{
$http_referer=$_SERVER['HTTP_REFERER'];
}
function loggedin()
{
    if(isset($_SESSION['user_id']) && !empty($_SESSION['user_id']))
    {
    return true;
    } else {
    return false;
    }
}

function getfield($field)
{
if(isset($_SESSION['user_id']) && !empty($_SESSION['user_id']))
    {
    $query="SELECT `$field` FROM `user` WHERE `id`='".$_SESSION['user_id']."'";
    if($query_run=mysql_query($query))
        {
        if($query_result= mysql_result($query_run, 0,$field))
            {
            return $query_result;
            }
        }
    }

}
?> 
```

首先让我解释一下上述代码的程序流程：
Step-1：用户将输入他/她的登录详细信息。如果找到电子邮件 ID 和密码组合匹配，则将创建用户会话。

步骤 2：现在，在为用户创建会话后，用户将立即被重定向到他/她的个人资料页面。

Step-3：由于用户已经登录，如果他/她将点击菜单栏中的主页按钮。然后用户将仅被重定向回个人资料页面。由于用户会话已经处于活动模式。因此，不允许用户查看主页的内容，而该用户将仅被重定向回个人资料页面。

但这里的问题是，如果用户第一次登录，他/她的会话没有正确创建。因此，一旦用户单击该***主页***按钮，他/她就会被重定向回主页。但这不应该发生。用户必须仅被重定向回个人资料页面。因为，在主页脚本中，我正在检查用户会话详细信息，如果会话处于活动状态，用户将仅被重定向回个人资料页面。

但主要问题从这里开始，如果同一用户尝试使用相同的登录详细信息进行登录。然后代码没有问题。这意味着，如果允许单个用户同时登录两次，则代码没有问题。所以，现在我想知道错误在哪里？

所以，这是我的问题：-
Q1。我的脚本有问题还是浏览器兼容性问题？Q2。在这两种情况下，可能的解决方案是什么？

我试图解释这个问题。但如果我仍然在这里遗漏了什么，请访问网站***[http://www.leadstool.net](http://www.leadstool.net)***。注册成功后尝试登录一次并点击菜单栏中的***leadstool***按钮。我想你会在那里找到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:52:00.240

可能性是您的脚本可能有一些错误。如果您上传了主页的代码会更好。无论如何，让我告诉可能的解决方案。

请检查您的首页是否包含以下代码：

```
 include_once('core.inc.php');         
    session_start();
    if(!loggedin())
    {
        header('Location:[your homepage url]');
    } 
```

或使用以下代码。

```
 session_start();
    if(isset['user_id'])
    {
        header('Location:[your homepage url]');
    } 
```

# r - R创建矩阵数组

> ID：14989179
> 
> 赞同：8
> 
> 时间：2013-02-20T20:21:49.497
> 
> 标签：r, data-structures

我想以这样的方式创建一个矩阵数组，即我首先创建一个具有 NA 值的 k 矩阵数组，然后循环 k 并通过数组更新每个第 k 个矩阵。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T20:31:34.610

我可能错过了重点，但不会：

```
k = 2; n=3; m = 4
array(NA, c(n,m,k))

, , 1

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA

, , 2

     [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA 
```

给你你想要的？然后你可以正常循环：

```
R> for(k in 1:2){print(a[,,k])} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:49:35.660

当心术语:-)。正如 CSGillespie 指出的那样，您可以在`R`. 或者，您可以创建一个`list`变量，其中的每个条目都包含一个矩阵。后者的优点是矩阵可以具有不同的大小。缺点是创建初始状态可能会更加痛苦。

例如

```
mat1 <- matrix(NA, 3,5)
mat2 <- matrix(NA, 4,7)
matlist <- list(mat1=mat1,mat2=mat2) 
```

# c++ - 临时对象销毁后为什么不崩溃

> ID：14989183
> 
> 赞同：3
> 
> 时间：2013-02-20T20:22:06.893
> 
> 标签：c++

```
class C
{
public:
    int True(int i) const
    {
        return i+2;
    }
};

const C& F(const C& c)
{
    return c;
}

int main()
{ 
    const C& c = F(C());                             // Line 1
    cout << boolalpha << c.True(1) << endl;          // Line 2
} 
```

问题> 为什么上面的代码可以打印正确的值？我假设该变量在第 2 行时`c`将引用一个无效的临时对象。`C`

// 更新

我想更新此 OP 以说明我对这个问题感到担忧的原因。

这是来自 C++ 模板的代码片段：完整指南

```
// maximum of two values of any type 
template <typename T> 
inline T const& max (T const& a, T const& b) 
{ 
    return a < b ? b : a; 
} 
```

如您所见，函数返回对传入参数的引用。我只是想知道为什么不使用以下版本：

```
// maximum of two values of any type 
template <typename T> 
inline T max (T const& a, T const& b) 
{ 
    return a < b ? b : a; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:39:15.873

C++11 标准的第 12.2/4 段规定，*在某些情况下*，临时对象的生命周期确实可以延长到生成它们的完整表达式的末尾：

> 在**两种情况下**，临时对象在与完整表达式结尾不同的点被销毁。[...]

第一个上下文不相关。但是，根据第 12.2/5 段：

> 第二个上下文是引用绑定到临时的。**引用绑定**到的临时对象或作为引用绑定到的子对象的完整对象的临时对象在引用**的生命周期内持续存在，*除了***：
> 
> — 临时绑定到构造函数的 ctor-initializer (12.6.2) 中的引用成员，直到构造函数退出。
> 
> —**在函数调用 (5.2.2) 中对引用参数的临时绑定一直持续到包含调用的完整表达式完成为止。**
> 
> — 在函数返回语句 (6.6.3) 中临时绑定到返回值的生命周期没有延长；临时在 return 语句中的完整表达式的末尾被销毁。
> 
> — 在 new-initializer (5.3.4) 中对引用的临时绑定一直存在，直到包含 new-initializer 的完整表达式完成为止。

在这里，临时构造的 with`C()`绑定到`c`function的参数`F`。因此，临时在包含对 function 的调用的完整表达式的末尾被销毁`F()`，并且返回的引用是*dangling*。

在其上调用函数`True()`会导致**Undefined Behavior**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:31:51.180

通常，当临时对象绑定到 const 引用时，临时对象的生命周期会延长到引用的生命周期。因此，如果您的代码说`const C& c = C()`，那么临时文件将尽可能长地`c`存在。

但是，您将临时传递给另一个函数`F()`。在这种情况下，C++11 规范的 §12.2.5 规定临时将持续到包含调用的完整表达式完成为止。

因此，当您说 时`const C& c = F(C())`，临时`C()`实际上在该语句的末尾被破坏，并且在下一行不再有效。

也就是说，您的代码似乎可以正常运行，因为`c.True()`在编译时调用是已知的，并且函数定义实际上并未引用 中的任何数据`c`，因此临时已死的事实并不会真正影响观察到的行为. 然而，这在技术上是未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T20:39:36.247

这会调用未定义的行为。一旦涉及的完整表达式`F(C())`完成，临时创建的`C()`被销毁，因此返回的引用`F`不再有效。

但是，未定义的行为并不能保证您的程序会崩溃。在更烦人的情况下（像这样），它只会导致微妙的、难以诊断的错误。至于为什么这种未定义的行为会给你这个特定的结果，我建议你参考这个[着名的答案](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T20:47:47.693

您所看到的是未定义的行为。很有可能，由于您调用的函数根本不依赖于对象的状态或 vtable，编译器将其内联到`cout << boolalpha << ( 1+2 );`，因此对象是否被销毁并不重要 - 事实上，编译器可能不会甚至一开始就费心去创造它。

例如，对于 VS2010，在“调试”中它调用`F`并`True`作为静态调用。由于`True`没有引用`this`其中的代码，它恰好可以正常工作。（它甚至可能仍然有效，因为没有`C`可访问的成员变量，所以它唯一能做的就是打印出 的地址`this`，而那只是堆栈上的一个地址。如果`C`有`C`的析构函数更改并使用它们的成员变量`True`，然后您会看到不同之处-在所有情况下，行为都是未定义的，只是实现的产物）

在“发布”中，VS2010 不会费心创建任何`C`对象或调用`F`，或者`True`- 它只是调用`cout << boolalpha << 3`，`C::True(2)`在编译时确定了 的值。编译器生成的程序中没有临时`C`对象，无论是否无效。

因此，仅仅因为在对象上调用函数似乎有效，并不意味着该对象存在或曾经存在于编译器生成的程序中。具有不同未定义行为的不同源程序可能会导致编译器生成引发访问冲突的可执行文件，或表现出一些其他行为。

* * *

将返回值绑定到 const 引用只适用于按值返回，不返回对参数或本地的引用，否则编译器需要解决停机问题来确定对象的生命周期。

例如，这段代码：

```
#include<iostream>

class C
{
public:
    int t;
    C( int t ) : t(t){}
    ~C() { std::cout << __FUNCTION__ << " " << t << std::endl; }
};

const C& F(const C& c)
{
    return c;
}
const C& G()
{
    return C(2);
}
C H()
{
    return C(3);
}

int main()
{
    const C& c = F(C(1));
    std::cout << "main 1" << std::endl;
    const C& d = G();    
    std::cout << "main 2" << std::endl;
    const C& e = H();    
    std::cout << "main 3" << std::endl;
} 
```

导致此输出 - 仅`H()`按值返回，因此只有第 3 个 C 的生命周期延长：

```
C::~C 1
main 1
C::~C 2
main 2
main 3
C::~C 3 
```

# javascript - 如果 iframe 高度超过，则调整父窗口大小

> ID：14989185
> 
> 赞同：0
> 
> 时间：2013-02-20T20:22:17.360
> 
> 标签：javascript, iframe

我正在使用 javascript 根据其内容动态更改 iframe 的高度

```
function resizeIframe(obj) {
  obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
}

<iframe id ="iframe" scrolling="no" onload='javascript:resizeIframe(this);'>
        <p>Iframe not supported,go get a new browser</p>
</iframe> 
```

现在如果 iframe 页面高度使得其他内容 + iframe 页面的总高度超过窗口本身的高度，则页面的下部被修剪，使得 iframe 的底部内容不可见。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:35:00.650

你应该有办法阻止 iframe 变得太大。例如，如果你想阻止 iframe 变得超过 700 像素高，你应该这样做：

```
function resizeIframe(obj){
    var newheight=obj.contentWindow.document.body.scrollHeight;
    obj.style.height=newheight>700?'700px':newheight+'px';
} 
```

# sql - 用于查找每个唯一时间戳的总和的 sql

> ID：14989187
> 
> 赞同：0
> 
> 时间：2013-02-20T20:22:21.710
> 
> 标签：sql, join, timestamp, sum, max

不幸的是，我已经离开数据库游戏快 2 年了，所以我失去了一些知识，并试图找回它。

我需要获取 A 列中具有等效时间戳（B 列）的所有行的总数。

因此，例如，如果这是我的数据库：

```
site   |  products |      sell_time
tokyo  |  12       | 2013-02-19 00:01:00
tokyo  |  17       | 2013-02-19 00:01:00
nyc    |  10       | 2013-02-19 00:01:00
dallas |   3       | 2013-02-19 00:02:00
tokyo  |  32       | 2013-02-19 00:03:00
tokyo  |   3       | 2013-02-19 00:03:00
nyc    |  10       | 2013-02-19 00:04:00 
```

我想知道东京每个时间戳的计数，我想看看

```
site   | num_products |   sell_time
tokyo  | 29           | 2013-02-19 00:01:00
tokyo  | 35           | 2013-02-19 00:03:00 
```

任何帮助表示赞赏。在这件事上我已经失去了优势，现在我必须把它找回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:24:19.510

您将需要使用具有以下功能的聚合函数`GROUP BY`：

```
select site,
  sum(products) num_products,
  sell_time
from yourtable
where site = 'tokyo'
group by site, sell_time 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8dc58/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:24:04.787

像这样？

```
SELECT site, SUM(products), sell_time
FROM yourTable
WHERE site = 'tokyo'
GROUP BY sell_time 
```

在 MySQL 中，以上应该可以工作。在 SQL Server 中，您需要添加`site`到 GROUP BY，或者`MAX(site)`在`SELECT`.

# c# - XNA、winform 和全屏

> ID：14989189
> 
> 赞同：0
> 
> 时间：2013-02-20T20:22:23.990
> 
> 标签：c#, winforms, xna

我已经将 XNA 和 winform 与本教程集成在一起[http://roy-t.nl/index.php/2008/10/09/xna-30-and-winforms-the-easy-way/](http://roy-t.nl/index.php/2008/10/09/xna-30-and-winforms-the-easy-way/)问题是我想要能够全屏查看 XNA 的内容。怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:58:48.060

如果要调整图片框中内容的大小，则需要添加`SizeChanged` 更新 BackBuffer 宽度和高度的事件。否则渲染输出将变为像素化。

```
 PresentationParameters params;
 params.BackBufferWidth = control.ClientSize.Width;
 params.BackBufferHeight = control.ClientSize.Height;
 GraphicDevice.Reset(params); 
```

# matlab - 在Matlab的For循环中对不同的值求和

> ID：14989192
> 
> 赞同：1
> 
> 时间：2013-02-20T20:22:31.680
> 
> 标签：matlab

我的代码在下面，我想要做的是获取 5 个单独的 ft 数组并将它们添加到 for 循环中，这样我就可以播放它们全部叠加的声音。谢谢你的帮助！

```
`fs = 44100;  % standard sampling rate
T = 1/fs;    % sampling period
t = 0:T:5;   % time vector
conv = 1E5;  % conversion factor for frequencies

phi=2*pi*rand(1,1); % random phase

Msun = 2E30; % mass of the sun
Rsun = 6.9599E5; % radius of the sun
M = 1E32; % mass of target star
R = 7E5; % radius of target star
Teff = 6000;

% frequency of maximum oscillation mode

vmax  = 3090*(M/Msun)*(R/Rsun)^(-2) * (Teff/5777)^(-1/2);

% difference between consecutive frequencies

dv = 134.9*(M/Msun)^(1/2) * (R/Rsun)^(-3/2);

for n = 0:1:4

    vi = vmax + n.*dv; % pulsation mode frequencies
    ft = sin(2*pi.*vi.*t + phi); % sinusoidal perturbation function
    cft = conv.*ft; % converted perturbation for human audible range
    sound(cft, fs) % play sound of each frequency mode

end 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:39:37.267

您需要将各个声音相加以获得叠加。只需`cft = 0;`在循环之前执行，然后`cft = cft + conv.*ft;`在内部执行。循环之后，调用`sound(cft, fs)`.

# sql - 如何防止对空值进行算术运算？

> ID：14989193
> 
> 赞同：0
> 
> 时间：2013-02-20T20:22:35.740
> 
> 标签：sql, oracle11g, arithmetic-expressions

使用 Oracle11g：

如果该列为空，我想排除该列上的算术。

在这种情况下，我怎样才能让**seqno=1**的**lag_diff**为**null**？

 ****```
 with detail_records as (
    select 1 seqno, 10 set_a  from dual union all
    select 2 seqno, 10 set_a  from dual union all
    select 3 seqno, 20 set_a  from dual union all
    select 4 seqno, 30 set_a  from dual )
  select  seqno,
          set_a,
          lag_val,
    case (lag_val - set_a)
    when 0 then 'AAA'
    else  'BBB'
    end  as lag_diff
 from ( select seqno, 
        set_a, 
        lag(set_a,1) over (order by seqno) as lag_val       
  from detail_records)
order by seqno 
```

**期望的结果**

```
 SEQNO  SET_A LAG_VAL LAG_DIFF
  ----------------------------
  1       10  <NULL>   <null>
  2       10   10       AAA
  3       20   10       BBB
  4       30   20       BBB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:30:04.580

将您的情况更改为以下内容：

```
 with detail_records as (
    select 1 seqno, 10 set_a  from dual union all
    select 2 seqno, 10 set_a  from dual union all
    select 3 seqno, 20 set_a  from dual union all
    select 4 seqno, 30 set_a  from dual )
  select  seqno,
          set_a,
          lag_val,
    case 
    when (lag_val - set_a) is null then null
    when (lag_val - set_a) = 0 then 'AAA'
    else  'BBB'
    end  as lag_diff
 from ( select seqno, 
        set_a, 
        lag(set_a,1) over (order by seqno) as lag_val       
  from detail_records)
order by seqno 
```****

# push-notification - 设备上的 Windows Phone 推送通知

> ID：14989205
> 
> 赞同：1
> 
> 时间：2013-02-20T20:23:13.207
> 
> 标签：push-notification, windows-phone-8, mpns

我正在尝试为我的 Windows 8 手机应用程序创建推送通知。我正在使用 Microsoft 的示例（下面的代码和演示视频链接），它可以通过模拟器正常工作，但是当我调试到设备时，应用程序运行但从未连接到发送通知的 WPF 应用程序。但是，模拟器每次都可以正常工作。我确保执行以下操作；

*   VS 必须处于 WPF 应用程序的管理员模式
*   在电话应用程序中，在 SubscribeToService() 方法中，我将地址更改为我的电脑名称；`string baseUri = "http://MY-PC-NAME:8000/RegistrationService/Register?uri={0}";`
*   我总是在电话应用程序之前运行 WPF 应用程序
*   我关闭了防火墙以允许访问端口 8000

为了让应用程序在实际设备上运行，我需要做些什么额外的事情吗？

[http://code.msdn.microsoft.com/Windows-Phone-8-JumpStart-ab6c839a](http://code.msdn.microsoft.com/Windows-Phone-8-JumpStart-ab6c839a)

[http://channel9.msdn.com/Series/Building-Apps-for-Windows-Phone-8-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-08-Push-Notifications](http://channel9.msdn.com/Series/Building-Apps-for-Windows-Phone-8-Jump-Start/Building-Apps-for-Windows-Phone-8-Jump-Start-08-Push-Notifications)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:57:12.820

我最终使用了 WPF 的 ASP.NET 网络表单并且没有任何问题。请参阅下面的链接。我刚刚在手机和提供的网络表单之间添加了功能。当“订阅服务”时，正如您在问题中所述（即，将设备 URI 发送到 Web 服务，以发送推送通知），我只是在运行 Web 表单时使用了 ASP.NET 提供的地址（即，点击运行，并使用地址栏中的地址）。这应该在您的机器上本地工作。

希望这会有所帮助，我从 MSDN 示例中粘贴了下面的示例项目。

[http://code.msdn.microsoft.com/Toast-Notification-Sample-fb20ae13](http://code.msdn.microsoft.com/Toast-Notification-Sample-fb20ae13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T11:48:13.013

确保从发送推送的服务器打开 TCP 端口号 2195 出站。

# java - 试图获得整数序列

> ID：14989211
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:23:21.870
> 
> 标签：java

我尝试了不同的方法来获取用户的输入序列，但不知道该怎么做。这是我的代码。大小为 N 的数组 A 中的多数元素是出现超过 N/2 次的元素。例如 (3,3,4,2,4,4,2,4,4) 有一个多数元素 (4)，而数组 (3,3,4,2,4,4,2,4) 有没有多数元素。我正在尝试从用户那里获取输入序列。

```
import java.util.Scanner;

class rough1 {
   public static int arrMajority1( int A[] ) {
      int n = A.length;
      for( int i = 0; i < A.length; i++ ) {
         int c = 1;
         for( int j = i + 1; j < A.length; j++ )
            if( A[ i ] == A[ j ] )
               c = c + 1;
         if( c > ( A.length / 2 )) {
            return A[ i ];
         }
      }
      return -1;
   }

   public static void main(String[] args){
      Scanner input = new Scanner(System.in);
      int A[] = new int [];
      A[] = input.nextInt();
      String employee = "A[]";
      String delims = "[,]";
      String[] tokens = employee.split(delims);
      if (arrMajority1(A) != -1)
         System.out.println("The majority element is " + arrMajority1(A));
      else 
         System.out.println("There is no majority element.");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:47:24.497

这个怎么样？

```
public static void main(String[] args) throws FileNotFoundException {
    int[] arrayWithMajorityElements = {3,3,4,2,4,4,2,4,4};

    Integer[] majorityElements = getMajorityElements(arrayWithMajorityElements);
    System.out.println(Arrays.toString(majorityElements));
    // result = 4

    int[] arrayWithoutMajorityElements = {3,3,4,2,4,4,2,4};
    majorityElements = getMajorityElements(arrayWithoutMajorityElements);
    System.out.println(Arrays.toString(majorityElements));
    // result = empty array (ie no majory elements)
}

private static Integer[] getMajorityElements(int[] array) {
    Map<Integer, Integer> map = new HashMap<>();
    for (int i : array) {
        int count = 0;
        if (map.containsKey(i)) {
            count = map.get(i);
        }
        map.put(i, ++count);
    }

    List<Integer> majorityElements = new ArrayList<>();
    int check = array.length / 2;
    for (Integer i : map.keySet()) {
        if (map.get(i) > check) {
            majorityElements.add(i);
        }
    }
    return majorityElements.toArray(new Integer[majorityElements.size()]);
} 
```

请注意，我假设您可以拥有多个多数元素-如果不能，则必须修改最后一个循环

# ant - 将参数从 Java 对象传递给 Ant Build 文件？

> ID：14989220
> 
> 赞同：0
> 
> 时间：2013-02-20T20:23:47.147
> 
> 标签：ant

我有一个场景，我正在使用 Ant 脚本执行一组 JUnit 测试用例。ant 文件中的最后一件事是报告和邮件应该发送到指定的用户列表。但要做到这一点，我需要来自执行的测试用例的一些信息。我创建了一个单例类来保存测试用例执行时的一些信息。最后，当我调用类从 Ant 脚本发送邮件时，我想将某些值从单例类传递给邮件发送类。我希望我解释得当！:) 如果您需要更多信息，我在这里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:06:31.640

Junit 可以生成 XML 格式的报告，您可以在构建结束时对其进行解析。

```
<junit printsummary="yes" haltonfailure="yes">
    <classpath>
        <path refid="test.path"/>
        <pathelement location="${classes.dir}"/>
        <pathelement location="${test.classes.dir}"/>
    </classpath>
    <batchtest fork="yes" todir="${test.reports.dir}">
        <formatter type="xml"/>
        <fileset dir="${test.src.dir}">
            <include name="**/*Test.java"/>
        </fileset>
    </batchtest>
</junit> 
```

如果您的报告需求更复杂（您提到了单例类），您可以考虑编写自定义格式化程序。在[junit 任务](http://ant.apache.org/manual/Tasks/junit.html)文档中描述。

```
..
<formatter classname="com.myorg.junit.CustomFormatter"/>
.. 
```

# android - 在黑莓 10 上的 android 应用程序播放器中隐藏“菜单”按钮

> ID：14989226
> 
> 赞同：1
> 
> 时间：2013-02-20T20:24:30.320
> 
> 标签：android, button, menu, hide, blackberry-10

如何在黑莓 10 上的 Android 应用程序播放器中隐藏“菜单”按钮（我的 android 应用程序中没有菜单，但是当我在 BB10 上运行它时 - 出现此按钮（单击时显然什么也不做））？

![在此处输入图像描述](../Images/0828523d14ff734497b33c0c5023dcbf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:38:02.593

恐怕你不能隐藏或改变那个酒吧的东西。是否应该隐藏它完全取决于用户。

我在 BlackBerry 支持论坛上的一些线程上读到，他们试图让开发人员可以在新的 Jelly Bean 更新中隐藏此栏。因此，目前您无法隐藏/更改此栏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-18T05:18:42.107

我使用此代码并且它有效：

```
thepage.actionBarVisibility = ChromeVisibility.Hidden 
```

# asp.net-mvc - 无法解析绑定敲除错误

> ID：14989227
> 
> 赞同：4
> 
> 时间：2013-02-20T20:24:35.157
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin, knockout-2.0

我正在处理淘汰赛并且遇到了一个我不知道如何解决的问题。我从 asp.net mvc 控制器中检索了一个 json 对象。我将它传递给以下函数：

```
load = function (data) {
        var myViewModel = function () {
            var self = this;

            ko.mapping.fromJS(data, self);

            self.hasItems = ko.computed(function () {
                return self.NumberOfItems > 0;
            }, self);

        };
        ko.applyBindings(myViewModel, window.document.getElementById("my-container"));
    } 
```

我正在根据 json 中返回的内容向模型对象添加自定义行为，特别是 json 的 NumberOfItems 属性。我的标记是：

```
 <div class="content" style="display: none;" data-bind="visible: hasItems === false">
    <span class="empty">My Items</span>
</div> 
```

但我不断收到此错误：

错误：无法解析绑定。消息：ReferenceError：hasItems 未定义；绑定值：可见：hasItems === false

我不知道为什么-我是新手，所以真的很感谢任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:05:58.693

applyBindings 需要一个对象。尝试

```
ko.applyBindings(new myViewModel(), window.document.getElementById("my-container")); 
```

此外，当您想要获取 observable 的值时，您需要使用括号。

```
return self.NumberOfItems() > 0; 
```

[http://jsfiddle.net/36xtR/](http://jsfiddle.net/36xtR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:29:39.230

您看到的错误“无法解析绑定”意味着淘汰赛找不到您要绑定的内容（hasItems）。

我认为这是因为您仅在调用 load 函数时才创建 viewModel，但在解析绑定时 viewModel 不存在，因此它会抱怨。

我会尝试设置你的 viewModel 更像这样：

```
var myViewModel = function () {
        var self = this;

        self.load = function (data) {
            ko.mapping.fromJS(data, self);
        }

        self.hasItems = ko.computed(function () {
            return self.NumberOfItems > 0;
        }, self);

    };
ko.applyBindings(new myViewModel(), window.document.getElementById("my-container")); 
```

然后，您可以在 viewModel 中调用加载函数来代替您调用当前加载函数的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:14:35.473

除了 ckal 答案，您可能还想以这种方式使用 ko.mappings ：

```
ko.mapping.fromJS(data, {}, self); 
```

# c++ - Visual Studio 的脚本文件中定义的“$OutDir”在哪里？

> ID：14989229
> 
> 赞同：10
> 
> 时间：2013-02-20T20:24:41.983
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

[Visual Studio 在此处](http://msdn.microsoft.com/en-us/library/c02as0cs%28v=vs.100%29.aspx)列出的项目设置中使用了一堆宏。我无法找到这些宏或标识符在实际脚本文件中定义的位置（不在项目设置中）。

在我的情况下，我试图将项目的输出文件夹更改为解决方案调试或发布文件夹（上一级），但在项目设置中更改“输出目录”无效。

.vcxproj 文件中也没有提到这些宏，所以我真的不知道它们在哪里定义？我对`$(OutDir)`要更改为解决方案调试/发布文件夹的最感兴趣。有谁知道这些是在哪里定义的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T20:52:28.440

在 Visual Studio 2010 中，主要项目设置将定义一个输出文件夹，从该文件夹分配设置的宏是 $(OutDir)。还有其他预定义的宏您无法修改，但您可以修改*这个*。

如果我了解您要执行的操作，请按照以下步骤操作：

1.  打开项目的属性对话框。
2.  对话框顶部有两个下拉列表，一个用于“配置”，一个用于“平台”。为配置列表选择“全部”选项。
3.  在顶部的常规设置页面上是一个指定为“输出目录”的文件夹。将其更改为以下（引号可选）**"$(SolutionDir)$(Configuration)\"**。尾随反斜杠很重要。这是 $(OutDir) 最终选择的设置。
4.  打开左侧树中的“链接器”项。然后选择“常规”设置。
5.  在列表顶部的右窗格中是“输出文件”选项。它应该默认为 **"$(OutDir)$(TargetName)$(TargetExt)"**。如果不是，则将其设置为这样。
6.  重建世界。

注意：如果您有多个平台目标（例如 win32 和 x64），这会涉及更多，但还不错。希望这可以帮助。

* * *

**EDIT** OP 还希望 PDB 和增量链接文件*不要*发布在同一个文件夹中，但*希望*导入库在那里发布。所以.....

要更改创建 PDB 文件的位置：

1.  打开项目文件，再次选择“All”选项以更改所有构建配置目标（参见上面的#2）。
2.  在左侧树中选择链接器/调试设置。
3.  顶部的第二项应该是“生成程序数据库文件”设置。将其更改为**“$(IntDir)$(TargetName).pdb”**

* * *

增量链接文件*必须*（据我所知）与最终目标位于同一文件夹中。但是，您可以根据需要禁用增量链接。这是在以下位置完成的：

1.  打开项目文件，再次选择“全部”选项以更改所有构建配置目标（参见上面的#1）。
2.  选择项目的链接器/常规设置。
3.  向下的第四项应该是“启用增量链接”。将其设置为**否**。
4.  如果确实禁用了增量链接，则无法使用 Visual Studio 的 Edit & Continue PDB 调试格式功能，但是当您禁用增量链接时，UI 太笨了，无法为您解决此问题，因此.. 在项目窗格中选择 C++/General . 然后，如果它设置为“用于编辑/继续的程序数据库”，请将其切换到**程序数据库 /Zi**。

* * *

移动构建导入库的位置。

1.  打开项目文件，再次选择“All”选项以更改所有构建配置目标（参见上面的#2）。
2.  选择链接器/高级
3.  在右侧窗格中将有一个项目大约一半，导入库。将其更改为**“$(OutDir)$(TargetName).lib”**

不要问我如何摆脱导出列表文件（.exp），因为我真的不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T21:13:40.467

这些宏中的大多数是在每个 VS2010 项目中包含的 MSBuild 目标文件中定义的。在你的项目文件的某个地方，可能靠近底部，你会发现这样一行：

```
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" /> 
```

如果您返回路径变量链，您最终会找到包含 的文件夹，该文件夹`Microsoft.Cpp.targets`本身将包含：

```
 <Import Project="Microsoft.Common.targets" /> 
```

在此文件中，您将找到以下注释：

> 在使用此 .TARGETS 文件之前，必须在主项目文件中设置几个属性。但是，如果未设置属性，我们会选择一些默认值。
> 
> OutDir：表示项目或解决方案的最终输出位置。在构建解决方案时，

如果没有明确设置，MSBuild`$(OutDir)`选择的默认值是默认值。*在您的项目文件中*定义，因此在包含目标文件之前更改该属性将更改. 您也可以在命令行上使用or 指定一个值，这将覆盖 MSBuild 想要使用的任何默认值。（这就是 TFSBuild 所做的，例如，将解决方案中的所有内容转储到同一个文件夹中。）`$(OutputPath)``$(OutputPath)` *`$(OutDir)``$(OutDir)``msbuild``/p:OutDir=bin\DebugElsewhere`*

 *此外，为了将来可能的参考，大多数剩余的宏也在这个文件中定义，稍微向下：

```
<PropertyGroup>
  <TargetDir Condition="'$(OutDir)' != ''">$([MSBuild]::Escape($([System.IO.Path]::GetFullPath(`$([System.IO.Path]::Combine(`$(MSBuildProjectDirectory)`, `$(OutDir)`))`))))</TargetDir>
  <TargetPath Condition=" '$(TargetPath)' == '' ">$(TargetDir)$(TargetFileName)</TargetPath>
  <ProjectDir Condition=" '$(ProjectDir)' == '' ">$(MSBuildProjectDirectory)\</ProjectDir>
  <ProjectPath Condition=" '$(ProjectPath)' == '' ">$(ProjectDir)$(ProjectFileName)</ProjectPath>
      .
      .
      .
</PropertyGroup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T14:56:49.673

让我分享一下我提出这个问题后的发现。这些宏/属性是 VS2010 的默认值，但您可以通过在记事本中编辑它们自己在 .vcproj 文件中设置它们。注意：首先在 .vcproj 文件中搜索属性，如果它在那里，则将其值更改为所需的值，如果没有像下面那样定义它。我认为它通过在 .vcproj 文件中添加/编辑它们来覆盖这些定义。

```
 <PropertyGroup Label="My Values">
    <ProjectName>New_Project_Name</ProjectName>
  </PropertyGroup> 
```

我已经定义了我自己的组“我的价值观”来保留这些价值观，但你可以在任何地方定义它们。我更喜欢在文件中尽可能高地定义它们，以便脚本的其余部分将它们考虑在内。*

# php - 带有 XMLHttpRequest 的收藏按钮

> ID：14989231
> 
> 赞同：0
> 
> 时间：2013-02-20T20:24:46.827
> 
> 标签：php, javascript

我有一个链接，如果单击或从数据库中查询为真，则该图标将显示一个完整的心脏，并且信息将保存在数据库中，如下所示：

```
<a id="fav"  href="#"><i <?if($fe == 1){?>class="faved"<?}else{?>class="fav"<?}?>></i></a>

$("#fav i.fav").click(function(){
                fav= new XMLHttpRequest();
                fav.open("GET", "http://test.php?u=<?=$user_id?>",  true);
                fav.send();
                $("#fav i").removeClass('fav').addClass('faved');
            });

            $("#fav i.faved").click(function(){
                fav= new XMLHttpRequest();
                fav.open("GET", "http://test.php?u=<?=$user_id?>",  true);
                fav.send();
                $("#fav i").removeClass('faved').addClass('fav');
            }); 
```

目前它工作得很好，但我遇到的问题是，如果用户决定取消收藏一个页面，它要么保存另一条记录，要么根据其当前状态再次尝试删除。如何让它根据状态进行切换。例如，如果它不是收藏夹，则单击它会保存到数据库中，并且不刷新，再次单击它会从数据库中删除。

**更新**

我在链接中也有动作告诉我的 php 删除或保存记录。例如：（`http://test.php?u=<?=$user_id?>a=1`保存）`http://test.php?u=<?=$user_id?>a=2`（删除）

**回答**

基于@epascarello 的回答。

```
$("#fav").on("click", "i.fav", function(){
                var icon = $(this);
                var makeFavorite = icon.hasClass("fav");
                $.post("http://test.php&u=<?=$user_id?>&a=1",{isFav:makeFavorite}, function(){
                    icon.toggleClass("fav").toggleClass("faved");
                });
            });

$("#fav").on("click", "i.faved", function(){ 
            var icon = $(this);
            var delFavorite = icon.hasClass("faved");
            $.post("http://test.php&u=<?=$user_id?>&a=2",{isFav:delFavorite}, function(){
                icon.toggleClass("faved").toggleClass("fav");
            });   
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:35:28.830

打一个电话而不是两个电话。这是相同的逻辑，只需检查！[假设您使用的是 jQuery]

```
$("#fav").on("click", "i.fav, i.faved", function(){
    var icon = $(this);
    var makeFavorite = icon.hasClass("fav");
    $.post("http://test.php?u=<?=$user_id?>",{isFav:makeFavorite}, function(){
        icon.toggleClass("fav").toggleClass("faved");
    });  
}); 
```

# ios - 数组一直返回 Null

> ID：14989234
> 
> 赞同：1
> 
> 时间：2013-02-20T20:24:56.980
> 
> 标签：ios, objective-c, arrays, object

所以我有一系列学生姓名。我正在运行测试数据，所以我正在通过一个循环分配和初始化每个学生，然后把它扔进去`stuArr`- 如果我 NSLog 我的`Student.h`init() 方法它会给我我期望的名字但是当我尝试在外面打电话给他们我的方法得到空值：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    for (int i = 0; i < 5; i++) {
        stuArr = [stuArr arrayByAddingObject:[[Student alloc] init]];
        id test = [stuArr objectAtIndexedSubscript:i];
        NSLog(@"%@", [test stuName]);
    }
} 
```

我在这里错过了什么重要的东西吗？如果需要，我可以输入我的 Student.m 文件，但那里的一切似乎都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:31:27.053

我猜你应该在这一行之前分配 + init stuArr：

```
stuArr = [stuArr arrayByAddingObject:[[Student alloc] init]]; 
```

或者尝试做这样的事情：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray *mutStudentsArray = [NSMutableArray array];

    for (int i = 0; i < 5; i++)
    {
        [mutStudentsArray addObject:[[Student alloc] init]];
        id test = [mutStudentsArray objectAtIndex:i];
        NSLog(@"%@", [test stuName]);
    }

    stuArr = [NSArray arrayWithArray:mutStudentsArray];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:11:33.020

tikhop 是对的：如果在 for 循环中填充数组，则应在填充之前初始化 NSMutableArray（可变数组，因为您正在更改循环中的数组）。在循环中，您使用 . 将对象添加到数组中`[array addObject:id]`。

它的作用是`[array arrayByAddingObject:id]`创建接收数组的副本并将新对象添加到末尾。这意味着要使用它，您将需要执行以下操作（尽管在 for 循环中执行此操作没有多大意义，但可能有助于理解）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *stuArr = [NSArray alloc] init]; //stuArr can be used now

    for (int i = 0; i < 5; i++) {
        //someCopiedArr is some existing array- arrayByAddingObject will copy someArr and add an object
        stuArr = [someArr arrayByAddingObject:[[Student alloc] init]];
        id test = [stuArr objectAtIndexedSubscript:i];
        NSLog(@"%@", [test stuName]);
    }
} 
```

最后`stuArr`将`someArr`只是将对象添加到末尾的副本。

# javascript - 在整个页面上展开导航栏

> ID：14989237
> 
> 赞同：0
> 
> 时间：2013-02-20T20:25:22.737
> 
> 标签：javascript, html, css, horizontal-scrolling

我正在做一些响应式 CSS，我想要这样的东西：

```
<body>
<nav>
<ul>
 <li>Asd</li>
 <li>sdf</li>
</ul>
</nav>
<table>
 (Some wide table goes here)
</table> 
```

我将导航定义为页面顶部的条（=水平条）。对于小屏幕（当表格太大时），会出现水平滚动条。

我的问题是，当我水平滚动时，导航栏会向左移动并在右侧留下空白区域。我只是希望它是可见的，以保持酒吧的印象。有什么想法吗？

我知道，其中之一是位置：固定，因此导航保持固定，但这也意味着即使使用垂直滚动，导航也会固定，这是我不想要的。

我只希望它与整个页面一样宽（而不仅仅是与屏幕一样宽），同时也可以垂直滚动。（如果发生水平滚动时导航内容也滚动，或者导航内容刚刚滚动并且只有导航背景（和导航边框等），这对我来说并不重要）

编辑：http: [//imageshack.us/photo/my-images/39/201302202145541024x600s.png/](http://imageshack.us/photo/my-images/39/201302202145541024x600s.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:28:07.600

使用 CSS，`position:absolute; left:0;`（当页面滚动时阻止它从网页屏幕的左侧移开。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T01:35:29.310

我不确定我是否完全理解您，但我认为您的问题的解决方案是使用 CSS 设置`overflow: hidden`参数。

您可以使用内部/外部 CSS`<style>`中的标签来执行此操作，如下所示：`<head>`

```
<head>
  <style>
    table {
      display: flex;
      overflow: hidden;
    }
  </style>
</head> 
```

否则，您可以使用带有样式属性的内联 CSS 直接添加它，这不会占用太多空间，但仅适用于该特定表格（而不是页面上的所有表格）。例如：

```
<body>
  <table style="overflow:hidden">
   (Some wide table goes here)
  </table>
</body>
```

# java - Java：从模板和字典生成 XML 表

> ID：14989238
> 
> 赞同：2
> 
> 时间：2013-02-20T20:25:24.330
> 
> 标签：java, xml, templates

所以基本上我一直在尝试解决这个问题，这就是问题所在：

我有一个`XML`模板文件，无论是模板文件`XSLT`还是其他文件对我来说都不是问题，因为尚未创建模板。但我很好奇我将如何获取，例如，一个字典对象并`XML`用它们的值填充模板的空白。

例子：

假设我有一个伪代码字典：

```
dict = { "name" : "bob" , 
         "age"  : "100" } 
```

和某种`XML`模板：

```
<person>
     <name></name>
     <age></age>
</person> 
```

在 Java 中，我将如何生成一个`XML`如下所示的工作表：

```
<person>
      <name>bob</name>
      <age>100</age>
</person> 
```

同样，我不是在寻找一个超级具体的答案，因为我是一个有能力的编码人员，我更想知道这样做的好方法是什么？有没有好的图书馆？是`XLST`要走的路吗？如果是这样，我该去哪里了解 Java 与他们的交互？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:06:03.480

您的伪代码字典看起来像 JSON。您可以将 JSON 加载到一个 Java 对象，该对象将具有杰克逊或 GSON 等库的名称和年龄属性，并使用任何 Java XML 库将对象存储到 XML（对于简单的情况，我喜欢 XStream - 看看这个问题：[How to将 XML 转换为 java.util.Map，反之亦然](https://stackoverflow.com/questions/1537207/how-to-convert-xml-to-java-util-map-and-vice-versa)）

# r - 将数据转换为整数/nu 会更改数据

> ID：14989242
> 
> 赞同：1
> 
> 时间：2013-02-20T20:25:43.343
> 
> 标签：r, database, casting

我在将数据从字符串转换为整数时遇到问题。

例如，原始数据如下所示

```
orderdt[1:10,2]

[1] 71004 13943 11337 9647  9363  6836  5957  5167  4963  4850 
```

但是当我像这样将它转换成双倍时，它会变成完全不同的数字

```
as.numeric(orderdt[1:10,2])

[1]  854  164   82 1069 1051  823  724  636  613  600 
```

最初我将柱子（大约 1 行）铸成双列，下部的大部分都被转换了，只有前 300 个左右被这样搞砸了。您知道为什么会发生这种情况或如何解决吗？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:27:15.270

几乎可以肯定你有一个因素。要检查，请使用：

```
is.factor(orderdt[1:10,2]) 
```

如果是一个因素，那么

```
as.numeric(as.character(is.factor(orderdt[1:10,2]))) 
```

应该做你所期望的。

你现在（可能）有的问题是**为什么**我有一个因素？如果没有更多难以了解的信息，但通常的原因是您已加载数据（例如通过 csv 文件）并且您的“数字”之一不是数字。例如，您有“1,12”而不是“1.12”

# javascript - 将鼠标指针移到图像上

> ID：14989245
> 
> 赞同：0
> 
> 时间：2013-02-20T20:25:54.530
> 
> 标签：javascript, image, onmouseover

我在一个 HTML 页面中有 4 个图像：1.png、2.png、3.png 和 4.png。当用户将鼠标指针移到 1.png 上时，2.png 应该替换 4.png。同样，如果鼠标指针指向 2.png，则应将 3.png 替换为 1.png。

这是我的代码：

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">
            function image1_mouseover()
            {
                var img2 = document.getElementById('img2');
                var img4 = document.getElementById('img4');
                img2.setAttribute('src','exercice1/4.png');
                img2.setAttribute('id','img4');
                img4.setAttribute('src','exercice1/2.png');
                img4.setAttribute('id','img2');
            }

            function image2_mouseover()
            {
                var img1 = document.getElementById('img1');
                var img3 = document.getElementById('img3');
                img1.setAttribute('src','exercice1/3.png');
                img1.setAttribute('id','img3');
                img3.setAttribute('src','exercice1/1.png');
                img3.setAttribute('id','img1');
            }

            function image3_click()
            {

            }
        </script>
        <style type="text/css">
            table
            {
                margin-left:auto;
                margin-right:auto;
            }
        </style>
    </head>
    <body>
        <table class="centrer">
            <tr>
                <td><img src="exercice1/1.png" alt="Image 1" id="img1" onmouseover="image1_mouseover()"></td>
                <td><img src="exercice1/2.png" alt="Image 2" id="img2" onmouseover="image2_mouseover()"></td>
            </tr>
            <tr>
                <td><img src="exercice1/3.png" alt="Image 3" id="img3"></td>
                <td><img src="exercice1/4.png" alt="Image 4" id="img4"></td>
            </tr>
        </table>
    </body>
</html> 
```

当我将鼠标移动到 1.png 并且 2.png 替换 4.png 时，它首先起作用。但是当我将鼠标移动到 2.png 时，1.png 并没有取代 3.png，而是我必须将鼠标移到 4.png 上才能发生这种情况。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:31:13.440

我认为您对图像发生的事情感到困惑。

与其切换它们的属性，不如切换图像的位置？

```
function switch_images(i1,i2) {
    var e1 = document.getElementById('img'+i1),
        e2 = document.getElementById('img'+i2),
        e1parent = e1.parentNode;
    e2.parentNode.appendChild(e1);
    e1parent.appendChild(e2);
} 
```

然后使用这个 HTML：

```
<table class="centrer">
    <tr>
        <td><img src="exercice1/1.png" alt="Image 1" id="img1" onmouseover="switch_images(2,4)"></td>
        <td><img src="exercice1/2.png" alt="Image 2" id="img2" onmouseover="switch_images(1,3)"></td>
    </tr>
    <tr>
        <td><img src="exercice1/3.png" alt="Image 3" id="img3"></td>
        <td><img src="exercice1/4.png" alt="Image 4" id="img4"></td>
    </tr>
</table> 
```

# android - Android MediaPlayer 中的暂停和搜索

> ID：14989250
> 
> 赞同：5
> 
> 时间：2013-02-20T20:26:02.130
> 
> 标签：android, android-mediaplayer

我有一个`SeekBar`和一个`MediaPlayer`。我想在它暂停时寻找，但似乎文档对我说谎：

> 请注意，seekTo(int) 也可以在其他状态下调用，例如 Prepared、Paused 和 PlaybackCompleted 状态。

像往常一样，在 Android 上我必须编写解决方法而不是代码（`MediaPlayer`此时我不知道处于哪种状态，所以这个表和状态机完全没用）。因为`onSeekComplete` `onCompletion`调用了方法而不是（超过 9000 次，我不是在开玩笑）！仅在从(WHY, GOD, WHY???)`onSeekComplete`调用之后才调用。我什至不知道该怎么办。我花了大约 5 个小时在它上面，没有任何东西是固定的。我能做些什么？`seekTo``onPrepared`

# UPD

这是我的代码。

```
private void setupMediaPlayer() {
    savedMediaPlayerState = null;

    mediaPlayer = application.getMediaPlayer();

    String mp3Path = "/path/to/mp3";

    mediaPlayer.setOnCompletionListener(this);
    mediaPlayer.setOnSeekCompleteListener(this);
    mediaPlayer.setOnErrorListener(this);

    mediaPlayer.setDataSource(mp3Path);
    mediaPlayer.prepare();
}

@Override
public void onProgressChanged(android.widget.SeekBar sb, int i, boolean b) {
    Log.i(TAG, String.format("Progress changed! %d", i));
    if (b) {
        mediaPlayer.seekTo(i);
        updateProgressBarAndDurationLabels(i, mediaPlayer.getDuration(), false);
    }
}

@Override
public void onStartTrackingTouch(android.widget.SeekBar sb) {
    handler.removeCallbacks(updateTimeTask);
    mediaPlayer.pause();
}

@Override
public void onStopTrackingTouch(android.widget.SeekBar sb) {
    int totalDuration = mediaPlayer.getDuration();
    int currentPosition = sb.getProgress();// * totalDuration / 100;

    mediaPlayer.seekTo(currentPosition);
    mediaPlayer.start();

    updateProgressBar();

    isSeeking = false;
}

@Override
public void onCompletion(MediaPlayer mediaPlayer) {
    if (!isSeeking) {
        Log.i(TAG, "completed"); // Called over 9000 times
        audioStopped();
    }
}

@Override
public boolean onError(MediaPlayer mediaPlayer, int i, int i2) {
    return false;    // Error -38 lol
}

@Override
public void onSeekComplete(MediaPlayer mp) {
    Log.i(TAG, String.format("seek to: %d", mp.getCurrentPosition()));
    isSeeking = false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:55:47.907

添加后`onErrorListener`，我发现`what=-38`这里发生了错误。但是，`true`从`onError`解决了我的问题。没有人知道这意味着什么。

# xcode - 带有约束的 iOS 6.0 AutoLayout 问题：旋转时子视图消失

> ID：14989254
> 
> 赞同：2
> 
> 时间：2013-02-20T20:26:15.730
> 
> 标签：xcode, ios6, interface-builder, xib, autolayout

您好我设计了一个使用 AutoLayout 约束的 XIB 来显示两行按钮，每行三个按钮，如屏幕截图所示（我将在获得满意的布局后将按钮放在红色 UIViews 中）：

![纵向模式自动布局](../Images/e71f04a0074d7fa52f5c920fd8c428a2.png)

到目前为止一切顺利，在纵向模式下，如上图所示，按钮看起来不错。但是，当我旋转到横向时，标题（蓝色）和父视图（灰色）会调整大小并正确显示，但红色按钮视图会消失（见下文）。

![在此处输入图像描述](../Images/975fcdc76fa89e4152767263c2ee8a56.png)

设置约束以使其正常工作的最佳方法是什么？我遵循了 Ray Wenderlich 教程并使用了他在示例中使用的相同 Editor\Pin]Vertical Spacing 和 Editor\Pin\Horizo​​ntal 间距： [Ray Wenderlich 教程](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

我也得到了很多约束错误，如下所示：

```
 Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x859abe0 UIView:0x85a8fb0.height == UIView:0x85a8e60.height>",
    "<NSLayoutConstraint:0x859ab60 V:[UIView:0x85a8fb0]-(114)-|   (Names: '|':UIView:0x85a8170 )>",
    "<NSLayoutConstraint:0x859ab20 V:|-(424)-[UIView:0x85a8fb0]   (Names: '|':UIView:0x85a8170 )>",
    "<NSLayoutConstraint:0x85a3430 V:|-(150)-[UIView:0x85a8170]   (Names: '|':UIView:0x85a8da0 )>",
    "<NSLayoutConstraint:0x85a33b0 V:[UIView:0x85a8170]-(NSSpace(20))-|   (Names: '|':UIView:0x85a8da0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x75ac610 h=--& v=--& V:[UIView:0x85a8da0(704)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x859ab60 V:[UIView:0x85a8fb0]-(114)-|   (Names: '|':UIView:0x85a8170 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

我对此束手无策，所以这个博学团体的任何帮助将不胜感激......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:40:01.893

该错误意味着您有冲突的约束。试着让它工作一排。

1.  将每个具有垂直间距的红色框固定到蓝色标题框
2.  将带有前导空格的左侧红色框固定到超级视图
3.  将带有尾随空格的右侧红色框固定到超级视图
4.  设置中心红框左右水平间距
5.  固定高度
6.  选择所有三个红色框并将它们设置为具有相等的宽度（宽度相等）
7.  删除 IB 添加的任何无关约束
8.  在设备上测试。（我有模拟风景/肖像）在界面构建器中有时会改变约束。9 它应该看起来像所附的图像![在此处输入图像描述](../Images/880162438d6cafa2fa550fb6b49b4e92.png)

# java - 关于版本 >=Java 5 的收集方法

> ID：14989258
> 
> 赞同：0
> 
> 时间：2013-02-20T20:26:22.930
> 
> 标签：java, autoboxing

我有一个疑问，想知道 JRE 可能使用了哪个类方法来删除下面代码中的对象。因为 remove 有两个签名 remove(int) 和 remove(Object)。作为 AutoBoxing 功能的一部分，这里的 int 在添加到 Collection 时将被视为 Integer。在这种情况下，哪个 remove 方法将获得更高的优先级，为什么？请分享原因....

```
 Vector v=new Vector();
    for(int i=0;i<10;i++)
    {
        v.add(i);           
    }       
    v.remove(5); 
    System.err.println(v); 
```

问候 Sudhakar Chavali

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:30:30.517

它拿起索引一

```
package com.jigar.stackoverflow.question.java;

public class VectorAutoBox {
    public static void main(String[] args) {
        Vector vector = new Vector();
        vector.add(1);
        vector.add(5);
        vector.add(2);
        vector.add(3);
        vector.add(4);
        vector.add(6);
        System.out.println(vector);
        vector.remove(5);
        System.out.println(vector);
    }
} 
```

**输出**

```
[1, 5, 2, 3, 4, 6]
[1, 5, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:35:28.750

在不构造 Integer 类的实例的情况下，参数是一个 int，Vector 的方法可以直接处理它而无需自动装箱。编译器使用[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)中详述的最简单方法。

这个版本删除了第二个 Integer (index = 1)，因为它明确地是一个 Integer：

```
import java.util.Vector;

public class VectorAutoBox {
    public static void main(String[] args) {
        Vector vector = new Vector();
        vector.add(1);
        vector.add(5);
        vector.add(2);
        vector.add(3);
        vector.add(4);
        vector.add(6);
        System.out.println(vector);
        vector.remove( new Integer( 5 )); // case 1
//      vector.remove( 5 );               // case 2
        System.out.println(vector);
    }
} 
```

案例 1 的输出：

```
[1, 5, 2, 3, 4, 6]
[1, 2, 3, 4, 6]      value '5' at index 1 removed 
```

案例 2 的输出：

```
[1, 5, 2, 3, 4, 6]
[1, 5, 2, 3, 4]      value '6' at index 5 removed 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T20:38:20.647

[JLS #15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)中详细说明了确定哪些方法适用的规则。实际上，不需要装箱/拆箱的方法优先于需要装箱/拆箱操作的方法：

> *   第一阶段（第 15.12.2.2 节）执行重载决议，不允许装箱或拆箱转换，或使用变量 arity 方法调用。如果在此阶段没有找到适用的方法，则处理继续到第二阶段。
> *   第二阶段（第 15.12.2.3 节）执行重载决议，同时允许装箱和拆箱，但仍排除使用变量 arity 方法调用。

写的时候这么`remove(int)`叫`remove(5);`。

请注意，对于大多数用途，Vector 已过时。

# android - 按钮覆盖 Scrollview

> ID：14989259
> 
> 赞同：0
> 
> 时间：2013-02-20T20:26:24.997
> 
> 标签：android, layout, button, scrollview

看看这段代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fadeScrollbars="true"
    android:scrollbarStyle="insideInset" >

    <TextView
        android:id="@+id/txt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:autoLink="all"
        android:paddingLeft="3dp"
        android:paddingRight="3dp"
        android:textIsSelectable="true" />
</ScrollView>

<Button
    android:id="@+id/nextbtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:onClick="nextButton"
    android:text="@string/next" />

<Button
    android:id="@+id/backbtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:onClick="prevButton"
    android:text="@string/back" /> 
```

我得到的结果是，在显示滚动视图和文本时，左下角和左下角的按钮位于文本/滚动视图的顶部。我曾尝试使用线性布局，但没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:42:46.090

`android:layout_above="@+id/nextbtn"`通过在您的 ScrollView添加尝试以下操作：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:fadeScrollbars="true"
        android:scrollbarStyle="insideInset"
        android:layout_above="@+id/nextbtn" >

        <TextView
            android:id="@+id/txt"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:autoLink="all"
            android:paddingLeft="3dp"
            android:paddingRight="3dp"
            android:textIsSelectable="true" />
    </ScrollView>

    <Button
        android:id="@id/nextbtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="nextButton"
        android:text="next" />

    <Button
        android:id="@+id/backbtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:onClick="prevButton"
        android:text="back" />

</RelativeLayout> 
```

编辑：不幸的是，贾斯汀 V. 答案不起作用，因为 Android 用您的 ScrollView 填充屏幕并将您的按钮放在屏幕下方。

# objective-c - 使用 ViewController 调整 NIB 中指定的 UIImageView 的大小

> ID：14989261
> 
> 赞同：1
> 
> 时间：2013-02-20T20:26:31.717
> 
> 标签：objective-c, uiview, uiviewcontroller, uiimageview

我创建了一个单视图应用程序。在 NIB 文件中，我添加了一个 UIImageView。

ViewController.h 文件设置 UIImageView：

```
@property (nonatomic, retain) IBOutlet UIImageView *imgView; 
```

ViewController.m 看起来像这样：

```
@implementation NDViewController

@synthesize imgView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *img = [UIImage imageNamed:@"ND.png"];
    [imgView setImage:img];
}
- (void)awakeFromNib {
    [imgView setFrame:CGRectMake(10, 10, 10, 10)];
} 
```

虽然`setImage`效果很好，但`setFrame`没有效果。

NIB 中指定的原始尺寸仍为所示尺寸；但肯定有一种方法可以覆盖视图大小吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:29:43.220

```
[imgView setFrame:CGRectMake(10, 10, 10, 10)]; 
```

将此代码放在 viewDidLoad 方法中。然后调整大小工作。关于真正的问题及其解决方案[检查here](https://stackoverflow.com/questions/6302629/viewdidload-and-awakefromnib-timing)

# php - 在 OS X 中将 PhantomJS 作为守护进程运行

> ID：14989263
> 
> 赞同：1
> 
> 时间：2013-02-20T20:26:38.300
> 
> 标签：php, javascript, permissions, command-line-interface, phantomjs

我正在使用 Zend 框架和[phantomJS](http://phantomjs.org/)为我工作的网站渲染图像。我有一个作业侦听器脚本，它循环并在队列中查找作业。找到工作后，它使用来自工作消息的数据来构造 phantomJS 命令并通过 php 的 EXEC 命令执行该命令。

如果我自己从命令行启动作业侦听器，则此过程非常有效。但是，如果守护程序用户（OS X 中的 Web 用户）尝试运行 phantomJS，则不会发生任何事情。没有错误信息，什么都没有。

我尝试了几件事，包括
1.*将此行添加到 sudoers daemon ALL=NOPASSWD: /usr/bin/phantomjs*
2.*授予 phantomjs 及其父目录 777 权限。*
3.*赋予 phantomjs 的守护进程所有权*

然而，尽管如此，我还是无法从 Daemon 用户那里得到执行 phantomJS。

如果有人能指出我正确的方向或添加一些建议，我将不胜感激。

提前致谢，

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T13:59:38.483

您可以尝试像服务一样运行您的 phantomjs 脚本，而不是通过 EXEC 命令运行它。

> 使用名为 Mongoose 的嵌入式 Web 服务器模块，PhantomJS 脚本可以启动 Web 服务器。这是为了方便 PhantomJS 脚本与外部世界之间的通信，不建议用作一般生产服务器。

有关嵌入式 Web 服务器如何工作的信息，请参见[此处](http://phantomjs.org/api/webserver/)

这是一个关于 PhantomJS 脚本如何启动 Web 服务器的示例。

```
var server = require('webserver').create();
var service = server.listen('127.0.0.1:8080', function(request, response) {
    response.statusCode = 200;
    response.write('<html><body>Hello!</body></html>');
    response.close();
}); 
```

服务运行后，它可以发送一个 JSON 对象作为响应，PHP 可以轻松解释该对象。

收听任何域`server.listen('8080', ....)`

设置 HTTP 响应标头`response.setHeader("Access-Control-Allow-Origin","*");`

# android - 从位图描述符中获取位图

> ID：14989265
> 
> 赞同：11
> 
> 时间：2013-02-20T20:26:45.327
> 
> 标签：android, google-maps

是否可以从[BitmapDescriptor](http://developer.android.com/reference/com/google/android/gms/maps/model/BitmapDescriptor.html)获取位图？

我正在尝试使用 googles api 使我的应用程序更加简洁，但我可以制作自定义标记选项对象......我认为 BitmapDescriptor 会扩展 FileDescriptor 但我没有看到。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-18T18:01:12.953

所有的 BitmapDescriptor 都来自 BitmapDescriptorFactory。

MediaStore 中 imageId 的示例自定义标记。

```
final BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 8;  //about the size of standard marker

Bitmap bm = MediaStore.Images.Thumbnails.getThumbnail(
                            context.getContentResolver(), newImageId,
                            MediaStore.Images.Thumbnails.MINI_KIND,
                            bmOptions);
                    if (bm != null) {
                        BitmapDescriptor bd = BitmapDescriptorFactory
                                .fromBitmap(bm);
                        if (bd != null) {
                            markeroptions.icon(bd); 
```

# image - 每行 3 张图像

> ID：14989269
> 
> 赞同：0
> 
> 时间：2013-02-20T20:26:59.693
> 
> 标签：image, wordpress, count, row

我想从自定义字段（Wordpress）中检索图像并每行显示 3 张图像。另外我想添加一个

`<ul> <li>image1</li> <li>image2</li> <li>image3</li> </ul>`

`<ul> <li>image4</li> <li>image5</li> <li>image6</li> </ul>`

我找到了一些代码并尝试了一些自定义编码来实现这一点。几乎可以正常工作，但我需要`</ul>`在最后一张检索到的图像之后添加一个标签。下面的代码将`</ul>`在最后检索到的图像之前生成标签......另外，我对数组和循环不是很熟悉，所以可能有比下面的代码更简单的解决方案来实现这一点。

谁能帮帮我？非常感谢您的宝贵时间！

```
<?php 

// vars
$images = array();
$row = 0;
$i = 0;
$gallery_images = get_field('galerie' );

// loop through gallery images and sort into the $images array
if( $gallery_images )
{
    foreach( $gallery_images as $image )
    {

        // Insert the url tag
        if ( $i === 0 ) 
        {
                 echo "<ul class='galerieul'>";
        }

        // increase $i
        $i++;
 // Insert the url tag
        if( $i > 3 )
        {
            echo "<ul class='galerieul'>";
        }
        // if $i has increased above 3, increase the row and reset $i
        if( $i > 3 )
        {    
        $i = 1;
        $row++;
        }

    // add image to row
        $images[ $row ][] = $image;
 ?>
   <li class="customimagestyle">
                    <?php echo $image['title']; ?><br />
                    <a href="<?php echo $image['url']; ?>" rel="lightbox"><img src="<?php echo $image['sizes']['thumbnail']; ?>" alt="<?php echo $image['alt']; ?>" /></a><br />
                    <?php echo $image['description']; ?>
                </li>

                <?php
// Insert the url tag

         if ( $i === 3 ) 
        {
             echo "</ul>";
        }
        if ($i < $row) 
        { 
            echo '</ul>'; 
        }

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:26:29.203

使用[模](http://php.net/manual/en/language.operators.arithmetic.php)运算符，并确保检查部分填充的行，例如，

```
<?php

// loop through gallery images and sort into the $images array
if( $gallery_images )
{
    $i = 0;
    foreach( $gallery_images as $image )
    {

        if ( ($i % 3) == 0 ) {
           echo "<ul class='galerieul'>";
        }

 ?>
        <li class="customimagestyle">
              <?php echo $image['title']; ?><br />
              <a href="
              <?php echo $image['url']; ?>" rel="lightbox"><img src="
              <?php echo $image['sizes']['thumbnail']; ?>" alt="
              <?php echo $image['alt']; ?>" /></a><br />
              <?php echo $image['description']; ?>
         </li>

<?php

        if (($i % 3) == 0) {
           echo "</ul>";
        }

        $i++;
    }

    // Close the ul tag, in the case of a partially-filled row
    if (($i % 3) != 0) {
       echo "</ul>";
    }

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:10:04.007

`get_field('galerie' )`在工作吗？你能得到画廊中的图像吗？

请记住，图像（附件）存储为帖子。所以如果你知道post t hat的ID有画廊，这应该不是问题。

以下是一些可能对您有所帮助的代码/解决方案（未经测试）：

```
function display_images_in_list($size = thumbnail) {

    if($images = get_posts(
        array(
        'post_parent'    => get_the_ID(),
        'post_type'      => 'attachment',
        'numberposts'    => -1, // show all
        'post_status'    => null,
        'post_mime_type' => 'image',
            'orderby'        => 'menu_order',
            'order'           => 'ASC')
        )
    ){
        foreach($images as $image) {
            $attimg   = wp_get_attachment_image($image->ID,$size);
            echo $attimg;
        }
    }
} 
```

来源：[http ://wordpress.org/support/topic/list-all-images-attached-to-a-post-based-on-gallery](http://wordpress.org/support/topic/list-all-images-attached-to-a-post-based-on-gallery)

```
function aldenta_get_images($size = 'thumbnail') {
  global $post;

  $photos = get_children( 
    array(
      'post_parent' => $post->ID, 
      'post_status' => 'inherit', 
      'post_type' => 'attachment', 
      'post_mime_type' => 'image', 
      'order' => 'ASC', 
      'orderby' => 
      'menu_order ID') 
  );

  $results = array();

  if ($photos) {
    foreach ($photos as $photo) {
    // get the correct image html for the selected size
    $results[] = wp_get_attachment_image($photo->ID, $size);
  }

  return $results;
} 
```

来源：[http ://snipplr.com/view/52857/](http://snipplr.com/view/52857/)

# c++ - 是否可以确定 c++ 枚举类的元素数量？

> ID：14989274
> 
> 赞同：100
> 
> 时间：2013-02-20T20:27:11.340
> 
> 标签：c++, c++11, cardinality, enum-class

是否可以确定 c++ 的基数`enum class`：

```
enum class Example { A, B, C, D, E }; 
```

我尝试使用`sizeof`，但是，它返回枚举元素的大小。

```
sizeof(Example); // Returns 4 (on my architecture) 
```

有没有获得基数的标准方法（在我的示例中为 5）？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-20T20:30:37.153

不是直接的，但您可以使用以下技巧：

```
enum class Example { A, B, C, D, E, Count }; 
```

然后基数可用作`static_cast<int>(Example::Count)`。

当然，这只有在让枚举的值从 0 开始自动分配的情况下才能很好地工作。如果不是这样，您可以手动将正确的基数分配给 Count，这实际上与必须维护一个单独的常量没有什么不同反正：

```
enum class Example { A = 1, B = 2, C = 4, D = 8, E = 16, Count = 5 }; 
```

一个缺点是编译器将允许您将其`Example::Count`用作枚举值的参数——所以使用它时要小心！（不过，我个人认为这在实践中不是问题。）

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2019-05-18T12:50:47.587

对于 C++17，您可以`magic_enum::enum_count`从 lib [https://github.com/Neargye/magic_enum](https://github.com/Neargye/magic_enum)使用：

`magic_enum::enum_count<Example>()`-> 4。

## 缺点在哪里？

该库使用特定于编译器的 hack（基于`__PRETTY_FUNCTION__`/ `__FUNCSIG__`），它适用于 Clang >= 5、MSVC >= 15.3 和 GCC >= 9。

我们遍历给定的区间范围，并找到所有具有名称的枚举，这将是它们的计数。阅读有关[限制的更多信息](https://github.com/Neargye/magic_enum/blob/master/doc/limitations.md)

[在这篇文章https://taylorconor.com/blog/enum-reflection](https://taylorconor.com/blog/enum-reflection)中有更多关于这个 hack 的信息。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-01-27T17:50:34.167

```
// clang-format off
constexpr auto TEST_START_LINE = __LINE__;
enum class TEST { // Subtract extra lines from TEST_SIZE if an entry takes more than one 
    ONE = 7
  , TWO = 6
  , THREE = 9
};
constexpr auto TEST_SIZE = __LINE__ - TEST_START_LINE - 3;
// clang-format on 
```

这源自[UglyCoder 的答案](https://stackoverflow.com/a/39317502/309334)，但通过三种方式对其进行了改进。

*   type_safe 枚举 ( `BEGIN`and `SIZE`) 中没有额外的元素（[Cameron 的回答](https://stackoverflow.com/a/14989325/309334)也有这个问题。）
    *   编译器不会抱怨它们从 switch 语句中丢失（一个重大问题）
    *   它们不能无意中传递给期望您的枚举的函数。（不是常见问题）
*   它不需要铸造即可使用。（[卡梅伦的回答](https://stackoverflow.com/a/14989325/309334)也有这个问题。）
*   减法不会弄乱枚举类类型的大小。

它保留了[UglyCoder相对于](https://stackoverflow.com/a/39317502/309334)[Cameron 的回答](https://stackoverflow.com/a/14989325/309334)的优势，即可以为枚举数分配任意值。

一个问题（与[UglyCoder](https://stackoverflow.com/a/39317502/309334)共享但与[Cameron](https://stackoverflow.com/a/14989325/309334)不共享）是它使换行符和注释变得重要......这是出乎意料的。`TEST_SIZE`因此，有人可以在不调整' 计算的情况下添加带有空格或注释的条目。这意味着代码格式化程序可以打破这一点。在[evg656e](https://stackoverflow.com/users/2895579/evg656e)发表评论后，我将答案编辑为 disable `clang-format`，但如果您使用不同的格式化程序，请*注意购买者。*

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-09-04T13:36:25.687

```
// clang-format off
enum class TEST
{
    BEGIN = __LINE__
    , ONE
    , TWO
    , NUMBER = __LINE__ - BEGIN - 1
};
// clang-format on

auto const TEST_SIZE = TEST::NUMBER;

// or this might be better 
constexpr int COUNTER(int val, int )
{
  return val;
}

constexpr int E_START{__COUNTER__};
enum class E
{
    ONE = COUNTER(90, __COUNTER__)  , TWO = COUNTER(1990, __COUNTER__)
};
template<typename T>
constexpr T E_SIZE = __COUNTER__ - E_START - 1; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-02-13T20:31:28.103

它可以通过 std::initializer_list 的技巧来解决：

```
#define TypedEnum(Name, Type, ...)                                \
struct Name {                                                     \
    enum : Type{                                                  \
        __VA_ARGS__                                               \
    };                                                            \
    static inline const size_t count = []{                        \
        static Type __VA_ARGS__; return std::size({__VA_ARGS__}); \
    }();                                                          \
}; 
```

用法：

```
#define Enum(Name, ...) TypedEnum(Name, int, _VA_ARGS_)
Enum(FakeEnum, A = 1, B = 0, C)

int main()
{
    std::cout << FakeEnum::A     << std::endl
              << FakeEnun::count << std::endl;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-21T12:13:12.043

有一个基于 X()-macros: image 的技巧，你有以下枚举：

```
enum MyEnum {BOX, RECT}; 
```

将其重新格式化为：

```
#define MyEnumDef \
    X(BOX), \
    X(RECT) 
```

然后下面的代码定义了枚举类型：

```
enum MyEnum
{
#define X(val) val
    MyEnumDef
#undef X
}; 
```

以下代码计算枚举元素的数量：

```
template <typename ... T> void null(T...) {}

template <typename ... T>
constexpr size_t countLength(T ... args)
{
    null(args...); //kill warnings
    return sizeof...(args);
}

constexpr size_t enumLength()
{
#define XValue(val) #val
    return countLength(MyEnumDef);
#undef XValue
}

...
std::array<int, enumLength()> some_arr; //enumLength() is compile-time
std::cout << enumLength() << std::endl; //result is: 2
... 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-20T20:31:27.230

您可以尝试的一个技巧是在列表末尾添加一个枚举值并将其用作大小。在你的例子中

```
enum class Example { A, B, C, D, E, ExampleCount }; 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-08-26T08:26:46.553

### Reflection TS：枚举（和其他类型）的静态反射

[反射 TS ，特别](https://github.com/cplusplus/reflection-ts)[是反射 TS 草案最新版本的](https://github.com/cplusplus/reflection-ts)[reflect.ops.enum]/2提供了以下`get_enumerators` `TransformationTrait`操作：

> **[reflect.ops.enum]/2**
> 
> ```
> template <Enum T> struct get_enumerators 
> ```
> 
> 的所有专业`get_enumerators<T>`应符合 `TransformationTrait`要求（20.10.1）。命名的嵌套类型 `type`指定满足 的元对象类型 `ObjectSequence`，包含满足`Enumerator`并反映由 反映的枚举类型的枚举数的元素`T`。

草案的 [reflect.ops.objseq] 涵盖了`ObjectSequence`操作，特别是 [reflect.ops.objseq]/1 涵盖了`get_size`提取满足以下条件的元对象的元素数量的特征`ObjectSequence`：

> **[reflect.ops.objseq]/1**
> 
> ```
> template <ObjectSequence T> struct get_size; 
> ```
> 
> 的所有特化`get_size<T>`应满足 `UnaryTypeTrait`具有基本特征的要求 (20.10.1) `integral_constant<size_t, N>`，其中`N`是对象序列中元素的数量。

因此，在反射 TS 被接受并以其当前形式实现时，可以在编译时计算枚举的元素数量，如下所示：

```
enum class Example { A, B, C, D, E };

using ExampleEnumerators = get_enumerators<Example>::type;

static_assert(get_size<ExampleEnumerators>::value == 5U, ""); 
```

我们可能会看到别名模板`get_enumerators_v`并`get_type_v`进一步简化反射：

```
enum class Example { A, B, C, D, E };

using ExampleEnumerators = get_enumerators_t<Example>;

static_assert(get_size_v<ExampleEnumerators> == 5U, ""); 
```

* * *

### 反射 TS 的状态

正如 Herb Sutter 的[*旅行报告：*](https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/) 2018 年 6 月 9 日 ISO C++ 委员会夏季会议的夏季 ISO C++ 标准会议 (Rapperswil) 所述，Reflection TS 已被宣布为功能完备

> **Reflection TS is feature-complete**：Reflection TS 被宣布为功能完整，并将在夏季进行主要评论投票。再次注意，TS 当前基于模板元编程的语法只是一个占位符；所要求的反馈是关于设计的核心“胆量”，委员会已经知道它打算用更简单的编程模型替换表面语法，该模型使用普通的编译时代码而不是`<>`风格的元编程。

最初[计划用于 C++20](https://isocpp.org/std/status)，但目前尚不清楚 Reflection TS 是否仍有机会进入 C++20 版本。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-01T22:12:36.163

如果您使用 boost 的预处理器实用程序，您可以使用`BOOST_PP_SEQ_SIZE(...)`.

例如，可以将`CREATE_ENUM`宏定义如下：

```
#include <boost/preprocessor.hpp>

#define ENUM_PRIMITIVE_TYPE std::int32_t

#define CREATE_ENUM(EnumType, enumValSeq)                                  \
enum class EnumType : ENUM_PRIMITIVE_TYPE                                  \
{                                                                          \
   BOOST_PP_SEQ_ENUM(enumValSeq)                                           \
};                                                                         \
static constexpr ENUM_PRIMITIVE_TYPE EnumType##Count =                     \
                 BOOST_PP_SEQ_SIZE(enumValSeq);                            \
// END MACRO 
```

然后，调用宏：

```
CREATE_ENUM(Example, (A)(B)(C)(D)(E)); 
```

将生成以下代码：

```
enum class Example : std::int32_t 
{
   A, B, C, D, E 
};
static constexpr std::int32_t ExampleCount = 5; 
```

这只是涉及到 boost 预处理器工具的皮毛。例如，您的宏还可以为您的强类型枚举定义 to/from 字符串转换实用程序和 ostream 运算符。

更多关于提升预处理器工具的信息： [https ://www.boost.org/doc/libs/1_70_0/libs/preprocessor/doc/AppendixA-AnIntroductiontoPreprocessorMetaprogramming.html](https://www.boost.org/doc/libs/1_70_0/libs/preprocessor/doc/AppendixA-AnIntroductiontoPreprocessorMetaprogramming.html)

* * *

*顺便说一句，我碰巧强烈同意@FantasticMrFox 的观点，即`Count`在接受的答案中使用的额外枚举值如果使用`switch`语句会造成编译器警告问题。我发现`unhandled case`编译器警告对于更安全的代码维护非常有用，所以我不想破坏它。*

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-05-06T03:50:57.057

还有另一种不依赖行数或模板的方法。唯一的要求是将枚举值粘贴在它们自己的文件中，并使预处理器/编译器像这样进行计数：

my_enum_inc.h

```
ENUMVAL(BANANA)
ENUMVAL(ORANGE=10)
ENUMVAL(KIWI)
...
#undef ENUMVAL 
```

我的枚举.h

```
typedef enum {
  #define ENUMVAL(TYPE) TYPE,
  #include "my_enum_inc.h"
} Fruits;

#define ENUMVAL(TYPE) +1
const size_t num_fruits =
  #include "my_enum_inc.h"
  ; 
```

这允许您使用枚举值添加注释，重新分配值，并且不会注入需要在代码中忽略/考虑的无效“计数”枚举值。

如果您不关心评论，则不需要额外的文件，并且可以像上面提到的那样做，例如：

```
#define MY_ENUM_LIST \
    ENUMVAL(BANANA) \
    ENUMVAL(ORANGE = 7) \
    ENUMVAL(KIWI) 
```

`#include "my_enum_inc.h"`并用 MY_ENUM_LIST替换指令，但`#undef ENUMVAL`每次使用后都需要。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-22T23:07:40.443

另一种“愚蠢”的解决方案是：

```
enum class Example { A, B, C, D, E };

constexpr int ExampleCount = [] {
  Example e{};
  int count = 0;
  switch (e) {
    case Example::A:
      count++;
    case Example::B:
      count++;
    case Example::C:
      count++;
    case Example::D:
      count++;
    case Example::E:
      count++;
  }

  return count;
}(); 
```

通过与`-Werror=switch`您一起编译，确保在您省略或重复任何 switch case 时收到编译器警告。它也是 constexpr 所以这是在编译时计算的。

但请注意，即使`enum class`枚举的第一个值不是 0，即使默认初始化值为 0。因此，您必须从 0 开始或显式使用第一个值。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-02-20T20:28:16.033

不，你必须把它写在代码中。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-22T02:26:44.070

您还可以考虑`static_cast<int>(Example::E) + 1`哪个消除了额外的元素。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-06T10:58:53.133

这是在 2020 年对我有用的解决方案，使用 Visual Studio 2019

```
#define Enum(Name, ...)                                                        \
    struct Name {                                                              \
        enum : int {                                                           \
            __VA_ARGS__                                                        \
        };                                                                     \
        private: struct en_size { int __VA_ARGS__; };                          \
        public: static constexpr  size_t count = sizeof(en_size)/sizeof(int);  \
    } 
```

用法：

```
struct S {

    Enum(TestEnum, a=11, b=22, c=33);

    void Print() {
        std::cout << TestEnum::a << '\n';
        std::cout << TestEnum::b << '\n';
        std::cout << TestEnum::count << '\n';
    }

};

int main()
{        

    S d;
    d.Print();

    return 0
} 
```

输出：

```
11
22
3 
```

# joomla - 在 Joomla 2.5 中抓取文章元数据（元描述、元键）

> ID：14989275
> 
> 赞同：0
> 
> 时间：2013-02-20T20:27:13.513
> 
> 标签：joomla, metadata

我正在尝试将文章的元描述和元键添加到其 Joomla 的 RSS 提要中。我正在使用文章自定义元描述和元键字段来存储股票代码符号并尝试将它们放入 RSS 提要组件中。试图通过获取每篇文章的元数据值来解决这个问题。我希望会有某种全局变量，其中存储了所有内容参数，有点像 wordpress 循环。但是无论我是在寻找错误的地方还是网络上没有任何关于此事的信息。

我可以调用数据库并获取它，但我不想经历填补我可能创建的安全漏洞的麻烦。我正在为一个人口众多的博客解决这个小问题，我不想在他们的系统中制造一个漏洞。

所以我想知道是否有任何方法或函数可以用来从内容表中获取变量？它不一定是我的问题的确切答案，如果有人能指出我正确的方向，那真的很好。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:09:53.667

我假设您在代码中的某个地方通过数据库循环您的文章对象您可以尝试这段代码：

```
$metakey=$articles->metakey;

$metadesc=$articles->metadesc; 
```

# sql - 如何快速找到不同字符串长度的匹配项

> ID：14989279
> 
> 赞同：-5
> 
> 时间：2013-02-20T20:27:46.873
> 
> 标签：sql

我一直在尝试想出一些伪逻辑来弄清楚以下内容。

我有一张大约有十万条记录的表

主键是 ID，例如

```
ID, col1, col2, col3

A3242X,,,
B323X,,,
A3242Y,,,
Y32YXX,,, 
```

现在我有用户输入，例如 `A3242XABC123`and `Y32`and ... and ...

我的输出是找出表中的所有记录，其中表中的 ID 以任何输入值开头，或者任何输入值以 Id 表中的任何值开头。

在这种情况下，输出将是

```
A3242X  (ID A3242XABC123 begins with this)     and 

Y32YXX  (the input Y32 begins with this). 
```

我的想法是我会遍历输入值，比较然后从末尾减去一个字符......例如

```
search_var=A3242XABC123;

Loop

  select id from table where value = search_var;

  if found exit;

  search_var = substr(search_var, 0,length(search_var-1));

end; 
```

--基本上循环直到找到值。

--对于第二种情况，我想我可以做一些像

```
search_var[1] = A3242XABC123;

search_var[2] = Y32YXX;

for i = 1 to 2 loop

select id from table where id begins search_var;

add id to result array;

end; 
```

我正在寻找一种有效的方法来做到这一点。在大多数情况下，用户最多只能输入几十个 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:47:34.260

忘记数组并将变量放入表中。然后，您可以执行以下操作：

```
select *
from t cross join
     vars
     on t.id like concat(vars.val, '%') or
        vars.val like concat(t.id, '%') 
```

在 SQL Server 中，您甚至可以执行以下操作：

```
with vars as (select 'var1' as val union all
              select 'var2' as val union all
              . . . 
             )
select *
from t cross join
     vars
     on t.id like vars.val + '%' or
        vars.val like t.id + '%' 
```

# python - 在 python 中搜索字符串以查找子字符串时的深不可测（对我而言）问题

> ID：14989281
> 
> 赞同：0
> 
> 时间：2013-02-20T20:27:50.207
> 
> 标签：python, string

我有一段代码遍历一个列表并搜索一个字符串，该列表是足球运动员的名字。它适用于几乎所有球员，但随机不会识别名为阿什利韦斯特伍德的球员。我检查了列表，他肯定在里面，一切都是小写的，脚本功能，因为它正在识别所有其他玩家（到目前为止）

基本上我在问使用'in'时会出现什么问题？我从中得到的数据库条目根本没有意义。

我已经包含了代码，虽然它有点脏而且不是很相关。

我也是一个相对的菜鸟。

代码

```
 if 'corner' in text3[:50] or ('inswinging corner' in text3) or ('outswinging corner' in text3) :
        print text3
        print time
        for player in away_players_names:
            this_player = player[0].lower()
            upper = player[0]
            if this_player in segment:
                player_id = away_team_dict[upper]
                player_id = int(player_id[0])
                etype = 10
                team = 2
                cur.execute("""INSERT INTO football.match_events(type, player, time, game_id, team) VALUES (%s, %s, %s, %s, %s) ON DUPLICATE KEY UPDATE game_id = game_id""", (etype, player_id, time, game_id, team))  
                db.commit()
        for player in home_players_names:
            this_player = player[0].lower()
            print this_player
            upper = player[0]
            if this_player in segment:
                player_id = home_team_dict[upper]
                player_id = int(player_id[0])
                etype = 10
                print player_id
                team = 1
                cur.execute("""INSERT INTO football.match_events(type, player, time, game_id, team) VALUES (%s, %s, %s, %s, %s) ON DUPLICATE KEY UPDATE game_id = game_id""", (etype, player_id, time, game_id, team)) 
                db.commit() 
```

这是打印语句和失败的示例。

```
corner taken right-footed by ashley westwood to the near post
38.22
bradley guzan
ron vlaar
ciaran clark
nathan baker
matthew lowton
charles n'zogbia
ashley westwood
fabian delph
christian benteke
jordan bowery
andreas weimann
shay given
joe bennett
yacouba sylla
simon dawkins
barry bannan
darren bent
brett holman 
```

这还没有认出这个名字，我不知道为什么？

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:34:40.733

在

```
if this_player in segment: 
```

段的价值是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:45:12.860

段中的字符串“ashley westwood”可能有尾随空格。'阿什利韦斯特伍德'！='阿什利韦斯特伍德'

# c++ - WriteFile 到调制解调器后的 ReadFile 仅返回通过 WriteFile 发送的内容

> ID：14989283
> 
> 赞同：2
> 
> 时间：2013-02-20T20:27:51.877
> 
> 标签：c++, serial-port, modem

我正在尝试将 AT 命令发送到使用 C++ 代码通过 USB 连接的调制解调器。我正在使用“AT+MDN”进行测试，它在这个特定的调制解调器上返回其电话号码，并且在通过连接到其串行端口的 Putty 进行测试时可以正常工作。GetComPort 确定调制解调器连接到的 com 端口号并为其创建句柄。sendCommand() 方法打开端口，发送命令，刷新缓冲区，然后尝试读取结果但只接收回发送的命令，因此在本例中它接收“AT+MDN”。我已经尝试了所有我能找到的解决这个问题的方法（刷新缓冲区，在写入和读取之间添加一个睡眠），但没有一个奏效。

串行ATDT.cpp

```
#include "SerialATDT.h"
#include "EventSem.h"
#include "Traces.h"
#include <setupapi.h>
#include <devguid.h>
#include <regstr.h>

SerialATDT::SerialATDT(String ident) : mComPortIdentifier(ident)
{
}

SerialATDT::~SerialATDT(void)
{
}

String SerialATDT::getComPortId() 
{
  HDEVINFO hDevInfo;
  SP_DEVINFO_DATA DeviceInfoData;
  int devOffset = 0;
  DWORD propertyDataType;
  HKEY devKey;
  DWORD portNameSize;
  DWORD result;
  String comPort = "";
  BYTE friendlyName[4096];
  TCHAR devName[4096];
  TCHAR portName[4096];

  // Create a HDEVINFO with all present devices.
  hDevInfo = SetupDiGetClassDevs(&GUID_DEVCLASS_MODEM, 0, 0, DIGCF_PRESENT);
  if (hDevInfo == INVALID_HANDLE_VALUE)
  {
    TRACE_L(TEXT("\nSetupDiGetClassDevs() failed: %d\n"), GetLastError());
    return "";
  }

  // Enumerate through all devices in Set.
  DeviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
  while (SetupDiEnumDeviceInfo(hDevInfo, devOffset++, &DeviceInfoData))
  {

    if (!SetupDiGetDeviceRegistryProperty(hDevInfo, &DeviceInfoData, SPDRP_FRIENDLYNAME,
      &propertyDataType, friendlyName, sizeof(friendlyName), NULL))
    {
      TRACE_L(TEXT("\nSetupDiEnumDeviceInfo() failed: %d\n"), GetLastError());
      continue;
    }

    // Look for identifying info in the name
    if ( mComPortIdentifier.size() > 0 ) {
      const char *temp = strstr((const char*)friendlyName, mComPortIdentifier.c_str());

      if ( temp == 0 ) {
        continue;
      }
    }

    // Get the device name.
    if (!SetupDiGetDeviceInstanceId(hDevInfo, &DeviceInfoData, devName, MAX_PATH, NULL))
    {
      TRACE_L(TEXT("\nSetupDiGetDeviceInstanceId() failed: %d\n"), GetLastError());
      continue;
    }

    // Open the registry key associated with the device.
    devKey = SetupDiOpenDevRegKey(hDevInfo, &DeviceInfoData, DICS_FLAG_GLOBAL, 0, DIREG_DEV, KEY_READ);
    if (devKey == INVALID_HANDLE_VALUE)
    {
      TRACE_L(TEXT("\nSetupDiOpenDevRegKey() failed: %d\n"), GetLastError());
      continue;
    }

    // Read the PortName registry key.
    portNameSize = sizeof(portName);
    result = RegQueryValueEx(devKey, TEXT("PortName"), NULL, NULL, (LPBYTE) portName, &portNameSize);
    if(result != ERROR_SUCCESS)
    {
      TRACE_L(TEXT("\nRegQueryValueEx() failed: %d\n"), result);
      continue;
    }

    // We are not guaranteed a null terminated string from RegQueryValueEx, so explicitly NULL-terminate it.
    portName[portNameSize / sizeof(TCHAR)] = TEXT('\0');

    // Close the registry key.
    result = RegCloseKey(devKey);
    if (result != ERROR_SUCCESS)
    {
      TRACE_L(TEXT("\nRegCloseKey() failed: %d\n"), result);
      continue;
    }

    // Try to open the COM port.
    comPort = portName;
  }

  SetupDiDestroyDeviceInfoList(hDevInfo);

  return comPort;
}

bool SerialATDT::getComPort(HANDLE *hFile)
{
  String comPort = getComPortId();

  *hFile = INVALID_HANDLE_VALUE;

  if ( comPort.size() > 0 ) {
    String comPortStr;

    comPortStr.Format("\\\\.\\%s", comPort.c_str());

    *hFile = ::CreateFile( comPortStr.c_str(),
      GENERIC_READ | GENERIC_WRITE,
      0,
      NULL,
      OPEN_EXISTING,
      0,
      NULL );

    if ( *hFile == INVALID_HANDLE_VALUE ) {
      TRACE_L("AT file open error %ld", GetLastError());
    }
  }

  return *hFile != INVALID_HANDLE_VALUE;
}

bool SerialATDT::sendCommand(String command, String &response)
{
  bool retFlag = true;
  HANDLE hFile = NULL;

  response = "";

  if ( !getComPort(&hFile) ) {
    TRACE("SerialATDT-Unable to get comport");
    return false;
  }

  ::SetupComm( hFile, 2048, 2048 );

  DCB dcb = { 0 };
  dcb.DCBlength = sizeof(DCB);
  ::GetCommState( hFile, &dcb );

  dcb.BaudRate = 9600;

  // set additional parameters for 8-bit, no parity, one stop bit, no flow control
  dcb.fRtsControl     = RTS_CONTROL_DISABLE;
  dcb.ByteSize        = 8;
  dcb.Parity          = NOPARITY;
  dcb.StopBits        = ONESTOPBIT;
  dcb.fOutxCtsFlow    = FALSE;
  dcb.fOutxDsrFlow    = FALSE;
  dcb.fDtrControl     = DTR_CONTROL_DISABLE;
  dcb.fDsrSensitivity = FALSE;
  dcb.fOutX           = FALSE;
  dcb.fInX            = FALSE;

  ::SetCommState( hFile, &dcb );

  // Retrieve the timeout parameters for all read and write operations on the port. 
  COMMTIMEOUTS CommTimeouts;
  ::GetCommTimeouts (hFile, &CommTimeouts);

#define BUFFER_LENGTH 256

  // Change the COMMTIMEOUTS structure settings.
  CommTimeouts.ReadIntervalTimeout = 50;  
  CommTimeouts.ReadTotalTimeoutMultiplier = (2000/BUFFER_LENGTH);  // Only wait 2 seconds (2000ms).
  CommTimeouts.ReadTotalTimeoutConstant = 50;    
  CommTimeouts.WriteTotalTimeoutMultiplier = 50;  
  CommTimeouts.WriteTotalTimeoutConstant = 50;    

  // Set the timeout parameters for all read and write operations on the port. 
  ::SetCommTimeouts (hFile, &CommTimeouts);

  char buffer[BUFFER_LENGTH+1];
  OVERLAPPED m_ReadSync;
  unsigned error = 0;
  EventSem readWait;
  bool finished = false;

  memset(&m_ReadSync, 0, sizeof(OVERLAPPED));

  m_ReadSync.hEvent = readWait.GetHandle();
  m_ReadSync.Pointer = (void*)buffer;

  static int index = 0;

  // Edited here
  command += "\r";

  // First write the command out to the serial port
  UInt32 numBytesWritten = 0;
  UInt32 totalBytesWritten = 0;
  do {
    if ( !::WriteFile(hFile, command.c_str(), command.length(), &numBytesWritten, NULL) ) {
      TRACE("SerialATDT-sendCommand failed on sending.");
      retFlag = false;
      break;
    }

    totalBytesWritten += numBytesWritten;
  } while (totalBytesWritten < command.length() );

  ::FlushFileBuffers(hFile);

  // Read in the response
  if ( retFlag ) {
    Sleep(1000);

    while ( !finished ) {
      UInt32 numBytesRead = 0;

      buffer[0] = '\0';

      if ( !::ReadFile(hFile, buffer, BUFFER_LENGTH, &numBytesRead, &m_ReadSync ) )
        {
        if ( ( error = ::GetLastError() ) == ERROR_IO_PENDING )
          {
          error = 0;
          if ( !::GetOverlappedResult( hFile, &m_ReadSync, &numBytesRead, true ) )
            {
            error = ::GetLastError();
            }
          }
        }

      // We read something
      if ( numBytesRead > 0 ) {
        buffer[numBytesRead] = '\0';
        response += buffer;
      } else { // We timed out so just drop out
        finished = true;
      }
    }
  }

  // Remove the command from what we read in the response
  if ( response.find(command) != std::string::npos ) {
    response = response.substr(command.length());
  }

  if ( hFile != INVALID_HANDLE_VALUE ) {
    ::CloseHandle( hFile );
  }

  return retFlag;
} 
```

和 SerialATDT.h

```
#ifndef SERIALATDT_H
#define SERIALATDT_H

#pragma once

#include "SgiString.h"
#include "FileSystem.h"

using namespace sgi;

class SerialATDT
{
private:
  String mComPortIdentifier;

  bool getComPort(HANDLE *hFile);
  String getComPortId();

public:
  SerialATDT(String ident);
  ~SerialATDT(void);

  bool sendCommand(String command, String &response);
};

#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:45:49.117

当您返回写入的字符串时，这可能是调制解调器故意回显（这是您可以看到您在 Putty 中键入的内容的一种方式）。你试过再读一遍吗？此外，您是否检查了写入字符串上的不同行尾。有些调制解调器只需要换行符“\n”，有些则需要回车换行符“\r\n”。如果没有正确的行尾，调制解调器可能不会执行您的 AT 命令。

# mysql - 使用事务日志刷新延迟是否危险 - 例如将 innodb_flush_log_at_trx_commit 设置为 0？

> ID：14989286
> 
> 赞同：1
> 
> 时间：2013-02-20T20:28:06.150
> 
> 标签：mysql, transactions, recovery

启用这样一个选项的风险是否真的高于丢失最后 N 秒的交易？

让我解释一下我为什么要问这个问题。想象一下，DB 服务器刚刚处理了一个事务 T，并因此修改了一组索引页。这些索引页中很少有已经刷新到磁盘，但很少有其他索引页没有。但是 T 进行的所有操作还没有刷新到磁盘事务日志中。现在我们关闭电源。

因此，当数据库服务器重新启动并尝试恢复时，它在事务日志中看不到任何 T 操作。但是它的一些索引实际上反映了这些操作，因为一些被 T 修改的索引页在断电之前被刷新了。即结果，T 被部分应用——并且可能以导致索引结构不一致的方式（例如，表 X 的主索引不反映 T 所做的任何更改，但它的一些二级索引却反映）。

所以我想知道如果我延迟事务日志刷新，这样的事情真的可能发生，如果没有，数据库服务器实际上做了什么来防止这种情况（MySQL 5.5 w/InnoDB 对我来说是最有趣的情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:57:59.700

在 Quora 上得到了关于这个问题的完整答案：

“检查点（脏页刷新）fsync 事务日志也是为了避免您提到的情况。后台线程计时器不是日志刷新的唯一来源。请注意，这会引发大量警告，因为页面中的 LSN 会在您的事务日志 LSN 之前。

一般来说，在禁用事务日志刷新的情况下运行 InnoDB 是安全的，只要您真的不需要最后的数据（如果您运行复制设置，您必须处理主服务器上丢失的数据，这些数据可能存在于从服务器上） 。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:40:41.737

这个来自几年前 Percona Live 会议的[PDF有一个不错的文章（见第 55 页）。](http://www.percona.com/files/percona-live/justin-innodb-internals.pdf)

简短的回答： 0 的值不会在 COMMIT 上刷新或同步，因此它根本不耐用。至少值为 2，您在 COMMIT 上刷新；但即便如此，您也只能每秒同步一次，因此这通常也是一种不可接受的妥协。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T21:39:30.153

简短的回答 - 这是安全的，但如果 OS 或 MySQL 崩溃，您可能会丢失最多一秒钟的已提交事务。

由您决定它是否适合您的应用程序（例如，金融软件不会容忍数据丢失，但如果评论丢失，博客将继续存在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T22:28:23.340

```
innodb_flush_log_at_trx_commit    
1  every commit log buffer flashed, synced,     no data loss
2  every commit log buffer flashed, not synced, data loss in OS crash or power loss
0  every second log buffer flashed, synced,     data loss on mysql crash, OS crash or power loss 
```

我认为如果您的数据不重要并且您的硬件有限`innodb_flush_log_at_trx_commit=0`，则可以使用。`innodb_flush_log_at_trx_commit=1`但是对于金钱，必须使用银行或安全解决方案以免丢失任何数据。

# sql - 检查生产中是否存在行集

> ID：14989297
> 
> 赞同：0
> 
> 时间：2013-02-20T20:28:38.507
> 
> 标签：sql

我有两张类似的表格，一张在生产中，另一张在进行中。

我需要将工作中的记录集复制到生产中。如果生产中已经存在类似的记录集，我无法复制。

相反，我需要获取匹配行的 id。

所以，在尝试复制之前，我首先检查类似的记录集是否在生产中。

这是示例

**生产表中的标准**

```
CriteriaId    CriteriaVal    CriteriaText

1               42               SAM

1               43               Guess

2               324              Sale

2               432              Jones

2               423              Patrick

2               4322             Tiffany 
```

* * *

**正在进行的工作表中的标准**

```
CriteriaId    CriteriaVal    CriteriaText

41               42               SAM

41               43               Guess

42               324              Sale

42               432              Jones

42               423              Patrick

42               4322             Tiffany

43               42               SAM

442               324              Sale

442               432              Jones

442               423              Patrick

442               4322             Tiffany

442               3432             SAM 
```

* * *

在上面的示例中，Work in Progress 中的标准 id 41 和 42 与生产中的标准 id 1 和 2 匹配。

所以，在我尝试将 41 复制到 prod 之前，当我检查它是否存在于 prod 中时，我需要获取 id 1 与 41 相同。

此外，Work in progress 中的 id 442 与 2 不同，因为它有一个额外的行。我需要计数以及值应该完全匹配。

我正在尝试在 SQL 查询中执行此操作，但我无法执行此操作。

有关如何跨表匹配一组记录的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:37:38.547

一种策略（SQL2005 及更高版本）：

```
select a,b,c from InProgress
EXCEPT
select a,b,c from Production 
```

或者：

```
select a,b,c, min(criteriaID), max(criteriaID)
from (
    SELECT criteriaID, a,b,c from InProgress
    UNION ALL
    SELECT criteriaID, a,b,c from Production
) t group by a,b,c having min(criteriaID) <> max(criteriaID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:34:49.617

这种语法通常可以完成工作。

```
insert into table1
(field1, field2, etc)
from table2
where not exists
(subquery to check for exsiting records) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:08:19.707

这是我用来解决这个问题的查询。

```
 SELECT CriteriaId FROM CRITERIA JBCRV1, (
            SELECT DISTINCT JBCRV2.CriteriaId AS CRITERIAID 
            FROM WIPCRITERIA JWBCRV1 
            INNER JOIN CRITERIA JBCRV2
                ON    JWBCRV1.CriteriaVal= JBCRV2.CriteriaVal
                AND   JWBCRV1.CriteriaText = JBCRV2.CriteriaText
            WHERE  JWBCRV1.CriteriaId = #{CriteriaId}
            GROUP BY JBCRV2.CriteriaId HAVING COUNT(1) = 
                (SELECT COUNT(1) 
                 FROM WIPCRITERIA 
                 WHERE CriteriaId = #{CriteriaId} ) 
        ) RESULT_TABLE
        WHERE JBCRV1.CriteriaId = RESULT_TABLE.CRITERIAID
        GROUP BY JBCRV1.BEN_CRTR_ID HAVING COUNT(1) = 
                (SELECT COUNT(1) 
                 FROM WIPCRITERIA 
                 WHERE CriteriaId = #{CriteriaId} ) 
```

我已经测试了各种条件和这项工作。

感谢所有试图帮助我的人。

# r - 单列数据到多列数据框，没有分隔符

> ID：14989304
> 
> 赞同：1
> 
> 时间：2013-02-20T20:29:15.963
> 
> 标签：r, dataframe

我有一些由 Windows 软件生成的数据输出。这是一个制表符分隔的 rtf 文件，但在导出时它会被传输到一长列数据中。我想使用 R 将其返回到数据框中以导出为制表符分隔，以便我可以轻松地分析数据：

基本上没有分隔符，但我知道在完成的文件中应该有 7 列，所以我希望数据框在 7 个条目进入后开始新行。

为了说明，输出如下所示：

```
>Sample  
>Location  
>Test  
>Mean  
>Stdev  
>Status  
>Points  
>A  
>A1  
>XX1  
>0.034541  
>0.04596  
>UN  
>0  
>B  
>A1  
>XX2  
>0  
>0  
>TA  
>1 
```

我想将其解析为：

```
    >样本位置测试平均标准偏差状态点  
    >A A1 XX1 0.03 0.04 UN 0  
    >B A1 XX2 0 0 TA 1  

```

我不完全确定如何搜索这个，但我想做的最接近的例子是在这个例子中：
[将列表的内容写入 R 中的一个文件](https://stackoverflow.com/questions/9913857/writing-contents-of-list-to-one-file-in-r?rq=1)

但我不知道如何将答案应用于我的数据，特别是设置宽度选项（我没有完全遵循，但可能是关于列号？），capture.output，以及我不知道的两个列表元素' t认为适用于此。

也对 BASH 或 awk 解决方案开放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:44:07.653

这是一套完整的步骤，可带您完成。

1.  正常读取文件

    ```
    d = read.table("/tmp/tmp.txt", header=FALSE, stringsAsFactors=FALSE) 
    ```

    这给出了一个具有一列的数据框。

2.  接下来我们改变行数和列数：

    ```
    d = unlist(d)
    dim(d) = c(7, nrow(d)/7)
    d = t(d)
    ##Or 
    d = matrix(as.matrix(d), ncol=7, byrow=TRUE) 
    ```

3.  然后我们删除“>”符号：

    ```
    d = gsub(">", "", d) 
    ```

    在这里，我们将“>”替换为空“”

4.  然后整理列标题：

    ```
    colnames(d) = d[1,]
    d = d[-1,] 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:37:10.433

我想你想要这样的东西：

```
# Read data
x<-read.table(textConnection('>Sample  
>Location  
>Test  
>Mean  
>Stdev  
>Status  
>Points  
>A  
>A1  
>XX1  
>0.034541  
>0.04596  
>UN  
>0  
>B  
>A1  
>XX2  
>0  
>0  
>TA  
>1'),stringsAsFactors=FALSE)
# Convert to matrix
mat<-matrix(as.matrix(x),ncol=7,byrow=TRUE)
# Dump as tab delimited
write.table(mat,'file.tab',sep='\t') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:37:28.713

与其他解决方案类似，我保留它，因为还有进一步的处理：

```
matrix(gsub('>','',dat$V1),ncol=7,byrow=T)
colnames(dat) <- dat[1,]
> dat <- dat[-1,]
> dat
    Sample Location Test  Mean       Stdev     Status Points
[1,] "A"    "A1"     "XX1" "0.034541" "0.04596" "UN"   "0"   
[2,] "B"    "A1"     "XX2" "0"        "0"       "TA"   "1" 
```

# asp.net - 当前上下文中不存在名称“ActionIcon”，但它是

> ID：14989307
> 
> 赞同：1
> 
> 时间：2013-02-20T20:29:30.910
> 
> 标签：asp.net, listview

我的代码在当前上下文中不存在 ActionIcon 时出现错误，但我很确定它是....这是我的代码

我究竟做错了什么？

` 

```
 <a class="LinkButtonBlueSmall" name="ApproveBtn"
                                 onclick="ChangeOne('Approve','<%#ActionIcon.ClientID %>');">
                                 Approve</a>

                              <a class="LinkButtonOrangeSmall" name="RejectBtn"
                                 onclick="ChangeOne('Reject', '<%#ActionIcon.ClientID %>');">
                                 Reject</a>

                              <a class="LinkButtonMutedSmall" name="ClearBtn"
                                 onclick="ChangeOne('Clear', '<%#ActionIcon.ClientID %>');">
                                 Clear</a>

                              </span>
                            </td>` 
```

# c - 关闭标准输出时的奇怪行为

> ID：14989308
> 
> 赞同：0
> 
> 时间：2013-02-20T20:29:34.083
> 
> 标签：c, sockets, stdout

我有一个程序。在这个程序中，我有一个与其他设备的 http 会话。在程序中我有很多`printf`. 当我关闭`stdout`with时，`fclose(stdout)`我注意到由打印的消息`printf`发送到 http 会话（消息包含在 http 数据包中）。

我想知道这种奇怪的行为，我想知道如何避免这种行为？我的意思是如何避免将打印的消息重定向到 http 会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:38:42.663

调用`printf`后`fclose(stdout)`调用未定义的行为。不要这样做。如果您只需要抑制`stdout`，请打开 /dev/null 并将`dup2`其放到 fd #1 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:37:08.890

发生的事情是您正在关闭 stdout 使用的文件描述符，并且创建的下一个文件描述符（在本例中为套接字）以它传统上使用的文件描述符（FD 1）结束。

不要关闭标准输出。如果您需要让它消失，请将其替换为指向的文件描述符`/dev/null`，例如：

```
freopen("/dev/null", "w", stdout); 
```

# email - 使用带有 RMAIL 和消息包的 Emacs 的多个电子邮件帐户

> ID：14989309
> 
> 赞同：2
> 
> 时间：2013-02-20T20:29:41.177
> 
> 标签：email, emacs

我正在尝试准备 RMAIL 和 Emacs 以支持多个电子邮件帐户。我已经有了一个解决方案，可以根据电子邮件的*From字段（基于*[EmacsWiki](http://www.emacswiki.org/emacs/MultipleSMTPAccounts)中的信息）使用不同的 SMTP 服务器，但我目前必须手动设置*From*字段。

我想要的是在回复 RMAIL 中的某人时自动设置*From*字段（即在回复发送到*account1@example.net*的电子邮件时，将*撰写消息缓冲区中的**From*设置为*account1@example.net*）。我使用 Message 包作为. Gnus 有一个类似的特性，叫做.**`mail-user-agent`[`gnus-posting-styles`](https://www.gnu.org/software/emacs/manual/html_node/gnus/Posting-Styles.html)**

 **确切地说，我需要的是如下所示：

1.  当在 RMAIL 摘要上按`r`或时，在回复消息的 、 、或字段中查找*account1@example.net*或*account2@example.net*并将找到的第一个存储在某个变量中；`M-x rmail-reply`**`To``Cc``Envelope-To``X-Origintal-To``Delivered-To`**

***   已经在消息缓冲区上撰写电子邮件，自动将 From 字段设置为先前存储的值。** 

 **有没有办法执行1？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:33:36.640

是的，有办法做到这一点。

您需要建议该功能`rmail-reply`。

这是一个例子：

```
（defadvice rmail-reply（围绕 rmail-grab-to-field）
  “抓住收件人字段并将回复输入为'发件人'。”
  (let ((origin-to (mail-fetch-field "to"))))
    （预测
      做它）
    （保存游览
      (goto-char (point-min))
      （执行替换
       “^来自：\\(.*\\)$”
       （连接“发件人：”始发地）
       nil t nil 1 nil (point-min) (point-max)))))

(ad-activate 'rmail-reply)

```

您可以在 EmacsLisp 手册中找到有关[建议的所有信息。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)

上面的建议并不完全通用，它在一定程度上取决于您用于发送邮件的模式（我使用消息模式并且上面的代码有效）。

一个更好的版本也将划定范围，`perform-replace`以便它只能更改邮件标题中的某些内容。****

# ios - 获取期望类型的解析错误

> ID：14989317
> 
> 赞同：0
> 
> 时间：2013-02-20T20:30:09.667
> 
> 标签：ios, objective-c

我正在使用以下代码创建一个静态方法来返回 DashboardMainMenuViewController。在接口 .h 文件中，我收到一条错误消息，指出期望类型。

```
+(DashboardMainMenuViewController *) dashboardMainMenuController;

+(DashboardMainMenuViewController *) dashboardMainMenuController
{
    UISplitViewController *splitViewController = (UISplitViewController *) [[[self appDelegate] window] rootViewController];

    NSArray *navigationControllers = [splitViewController viewControllers];

    NSArray *viewControllers = [[navigationControllers objectAtIndex:0] viewControllers];

    return (DashboardMainMenuViewController *) [viewControllers objectAtIndex:0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:32:46.147

要么 要么`#import "DashboardMainMenuViewController.h"`用 声明对它的前向引用`@class DashboardMainMenuViewController`。编译器只知道导入头文件中定义的类型或前向声明的类型

# c - 从文件中获取数据并通过管道移动

> ID：14989319
> 
> 赞同：3
> 
> 时间：2013-02-20T20:30:17.690
> 
> 标签：c, linux, unix, io, ipc

### 免责声明：这是一个任务。我不是要求明确的代码。我只是寻求帮助理解这些概念，以便我可以学习材料而不复制其他人所做的事情。

我的任务是从文本文件中获取一些数据，解析出单词，按字母顺序排序，删除重复项，然后将它们输出到一个新的文本文件中。这将使用三个进程来完成，使用 IPC 管道。这是我第一次与管道或任何 IPC 一起工作，所以如果我遇到一些外行，请理解。

所以我把主函数分成了三个进程：输入/父进程、排序（子进程）和输出（孙子进程）。我在父进程中创建了一个 IO 流，需要将其通过管道传输到排序过程。我已经创建了那个管道并关闭了未使用的末端（`stdin`用于输入，`stdout`用于排序。）

我的问题是：我不知道如何将数据从 IO 缓冲区移动到管道（在标准输出）。我觉得它应该使用`fputs`，其中一次将解析的单词列表传递给`stdout`一个单词。

以下是我迄今为止为输入过程创建的内容。文件 IO 不是我的强项，所以如果那里有错误，请告诉我，我会尽我所能修复它们。谢谢您的帮助！

```
} else {                            /* This is the input/parent process */

    printf("This is the input process\n");

    close(input_to_sortFD[0]);      /*  
                                     * Closes the parent-side read-end of
                                     * the pipe 
                                     */

    pipeStream = fdopen(input_to_sortFD[1], "w"); /* 
                                                   * Buffer that feeds into
                                                   * write-end of pipe
                                                   */

    ioFileFD = fopen(ioFile, "r");
    if (ioFileFD == NULL) {
        perror("Fatal error: failed to open requested file");
        exit(-1);
    }

    int i = 0;

    while (fscanf(ioFileFD, "%s", wordList) != EOF) {
        fputs(wordList[i], stdout);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T05:27:03.223

你的问题是：

> 我不知道如何将数据从 IO 缓冲区移动到管道中（在标准输出处）。

从我收集到的信息来看，您对问题的思考过度了。如果您知道如何从 a 读取`FILE *`和写入 a `FILE *`，那么管道就没有什么特别之处了。

我会像这样构建程序：

*   父进程
    *   打开输入和输出文件，创建管道
    *   启动子进程“wordify”
    *   启动子进程“sortunique”
    *   等待孩子完成
*   词化过程
    *   读取输入并写入单词
*   排序独特的过程
    *   读取单词，对出现的唯一事件进行排序，并输出结果列表

`sed`您可以分别使用和对“wordify”和“sortunique”过程进行原型设计`sort`。下面的原型将单词定义为连续出现的字母字符。

```
void wordify (FILE *infile, FILE *outfile)
{
    int r;
    make_stdio(infile, outfile);
    r = execlp("sed", "sed", "-e",
               "s/[^a-zA-Z][^a-zA-Z]*/ /g;s/^ *//;s/ *$//;/^$/d;s/ /\\n/g",
               (char *)0);
    assert(r == 0);
}

void sortunique (FILE *infile, FILE *outfile)
{
    int r;
    make_stdio(infile, outfile);
    r = execlp("sort", "sort", "-u", (char *)0);
    assert(r == 0);
} 
```

由于原型使用`execlp()`，`infile`需要映射到`stdin`和`outfile`需要映射到`stdout`。这是用 完成的`dup2()`，但我实现了一个`fdup2()`处理`FILE *`.

```
FILE * fdup2 (FILE *oldstream, FILE *newstream)
{
    if (newstream) {
        if (fileno(oldstream) != fileno(newstream)) {
            if (dup2(fileno(oldstream), fileno(newstream)) < 0) return 0;
            fclose(oldstream);
        }
        return newstream;
    }
    return oldstream;
}

void make_stdio (FILE *infile, FILE *outfile)
{
    FILE *x = fdup2(infile, stdin);
    FILE *y = fdup2(outfile, stdout);
    assert(x && y);
} 
```

进程`fork()`按预期启动。

```
void launch (void (*func)(FILE *, FILE *), FILE *infile, FILE *outfile)
{
    assert(infile && outfile);
    switch (fork()) {
    case -1: perror("fork");
             exit(EXIT_FAILURE);
    case 0:  func(infile, outfile);
             exit(EXIT_SUCCESS);
    default: fclose(infile);
             fclose(outfile);
    }
} 
```

现在，主程序只需要打开输入和输出文件，创建管道，启动进程，然后等待它们完成。唯一的技巧是必须使用管道，以便它的写入端是 的输出`wordify`，而它的读取端是 的输入`sortunique`。

```
int main (int argc, char *argv[])
{
    FILE *infile;
    FILE *outfile;
    int pipefds[2];
    int r;

    if (argc < 3) {
        fprintf(stderr, "need input and output filenames\n");
        exit(EXIT_FAILURE);
    }

    if ((infile = fopen(argv[1], "r")) == 0) {
        perror(argv[1]);
        exit(EXIT_FAILURE);
    }

    if ((outfile = fopen(argv[2], "w")) == 0) {
        perror(argv[2]);
        exit(EXIT_FAILURE);
    }

    r = pipe(pipefds);
    assert(r == 0);

    launch(wordify, infile, fdopen(pipefds[1], "w"));
    launch(sortunique, fdopen(pipefds[0], "r"), outfile);
    while (waitpid(-1, 0, 0) == 0) {}

    return 0;
} 
```

注意，总共有 3 个进程参与。如果您必须启动 3 个，并且有 4 个进程参与，我会考虑拆分`sortunique`为`sort`和`unique`。

```
 r = pipe(pipefds1);
    assert(r == 0);
    r = pipe(pipefds2);
    assert(r == 0);

    launch(wordify, infile, fdopen(pipefds1[1], "w"));
    /* sort: behaves like "sort" command with no arguments */
    launch(sort, fdopen(pipefds1[0], "r"), fdopen(pipefds2[1], "w"));
    /* unique: behaves like "uniq" command with no arguments */
    launch(unique, fdopen(pipefds2[0], "r"), outfile);
    while (waitpid(-1, 0, 0) == 0) {} 
```

一旦您将问题分解为这些组件，那么实现特定组件就只是一个标准的读取输入和写入输出练习。管道问题被抽象为按正确顺序排列的文件流，组件只是读写。您甚至可以删除`make_stdio()`代码，然后读取`infile`并写入`outfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:44:00.760

通常，管道通信是通过 read() 和 write() 调用完成的。但是我看到您正在将 int 文件描述符提升为 FILE* 以便您可以使用 fscanf 和朋友。

如果您使用 fscanf() 进行读取，则可以使用 fprintf() 进行写入。

# ios - iOS中的Socket编程，如何同时接收和发送数据

> ID：14989322
> 
> 赞同：0
> 
> 时间：2013-02-20T20:30:29.997
> 
> 标签：ios, objective-c, sockets, nsstream

我希望有人可以帮助我。我有两个应用程序（一个服务器，一个客户端）。客户端通过套接字连接将图像发送到服务器。

一切正常，但我有一个问题。一旦服务器接收到图像包，我希望服务器将收到的字节发送回客户端。问题是，在收到完整图像之前，不会调用服务器上的 NSStreamEventHasSpaceAvailable。接收到图像后，调用 NSStreamEventHasSpaceAvailable 并发送接收到的数据字节（它们都已添加到 NSMutableData）。

但是，我需要这个才能同时发送。我正在考虑创建第二个连接来处理此传输，但不确定这是否是一种好习惯。

任何帮助都非常感谢。

# batch-file - 通过 SSH 连接的批处理脚本，执行命令并将结果传递给 OUTPUT 文件

> ID：14989326
> 
> 赞同：0
> 
> 时间：2013-02-20T20:30:40.263
> 
> 标签：batch-file, output

我意识到查询很简单，互联网上有很多类似的主题，但由于某种原因，我无法完成这项工作，我已经走到了尽头。

这就是场景。批处理脚本将（使用 putty 链接）连接到主机。它将执行一个命令（如检查主机版本）。该脚本会将输出带到一个文件中。

到目前为止，我能够配置其中的大部分内容——我的脚本使用一个池——包含 IP 的源文件，以读取它需要连接到的主机；它连接到主机；执行检查版本命令并将结果保存到文件中。但是，结果格式错误，我无法在输出文件中显示我想看到的格式。

这是我的代码：

```
:Var
set out=E:\output.txt
set src=E:\servers.txt
set ver=cat /etc/*-release
set creds=-l root -pw root
set host=hostname
:Cond
for /f %%i in (%src%) do call :Cmd %%i
:Cmd
plink -ssh %1 %creds% %host%
plink -ssh %1 %creds% %ver%
echo %1 is %ver% >> %out% 
```

结果是这样的：

```
server01Red Hat Enterprise Linux Server release 5.7 Beta (Tikanga)
server02Red Hat Enterprise Linux Server release 5.7 Beta (Tikanga) 
```

所以我想让它的格式正确，例如：

```
server01 OS:Red Hat Enterprise Linux Server release 5.7 Beta (Tikanga)
server02 OS:Red Hat Enterprise Linux Server release 5.7 Beta (Tikanga) 
```

甚至能够截断在主机上运行的命令的输出并仅显示它的一部分，例如“Red Hat”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:04:58.580

在 linux 端解决您的问题更容易，即更改脚本，使其准确显示您想要的内容。例如，您可以执行以下命令：

```
(hostname;echo -e "\tOS:";cat /etc/issue)|sed '{:q;N;s/\n//g;t q}' 
```

这将执行主机名，回显一个制表符和“OS：”，并显示 /etc/issue（您也可以使用 /etc/*-release）。最后，使用 sed 从结果中删除所有换行符。（你也可以使用`tr "\n" ""`）

如果要使用 plink 执行此操作，则需要确保正确转义`|`批处理文件中的字符。我没有关闭 Windows 机器，但它可能看起来像这样：

```
plink -ssh %1 %creds% ^(hostname;echo -e "\tOS:";cat /etc/issue^)^|sed '{:q;N;s/\n//g;t q}' 
```

我不确定我是否正确地逃脱了它。将命令存储在文件中然后执行它会更容易。您甚至可以使用 scp 上传脚本，执行并删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:59:50.333

您正在调用 :Cmd 一次并且没有返回。如果你确实从 :Cmd 返回，你就会陷入其中。你需要用 goto :eof 结束 :Cmd

然后你需要在 :Cmd 之前放置另一个 goto :eof （或一些 goto ），这样你就不会陷入其中。

你希望输出看起来如何？如果您总是想要前 2 个标记，请使用 FOR 语句。

# time - SAS时间格式精度：毫秒

> ID：14989327
> 
> 赞同：1
> 
> 时间：2013-02-20T20:30:45.490
> 
> 标签：time, sas

我的 SAS 数据集中有一个字段，其中包含自午夜以来的秒数。例如：

```
34204.050479 
```

我可以使用 SAS 转换这个数字，`format time10.`这给了我以下信息：

```
9:30:04 
```

我希望有比简单的小时、分钟和秒更高的精度。我可以在 SAS 中获得以下内容：

```
9:30:04:ms 
```

哪里`ms`代表毫秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T07:19:36.060

感谢 Dirk Nachbar，答案是将时间格式化为`time12.3`

# php - 在 PHP 中使用 OOP 时在方法中使用函数

> ID：14989328
> 
> 赞同：2
> 
> 时间：2013-02-20T20:30:53.050
> 
> 标签：php, class, methods

我需要了解一些关于 PHP 中的 OOP 的知识。
我可以将函数放在类方法中吗？像这样：

```
<?php
class test {
   function test1() {

      // do something

      function test1_1() {
         // something else
      }

   }
}
?> 
```

并以这种方式使用它： `$test->test1->test1_1();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:33:03.053

你不能。这只会在[全局命名空间中创建一个新函数，并且会](http://codepad.viper-7.com/ABDcBW)[在多次调用时](http://codepad.viper-7.com/Yde9e0)给您尝试重新声明该函数的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:33:01.633

您可以将函数放在方法中（查找*闭包*）。但是，您不能这样称呼它们。

闭包的一个例子是

```
class MyClass {
    public function myFunction() {
        $closure = function($name) {
            print "Hello, " . $name . "!";
        };

        $closure("World");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:40:39.327

您可以使用[闭包](http://php.net/manual/en/functions.anonymous.php)(>=PHP5.3) 将函数存储在变量中。

例如：

```
class Test {

    public $test1_1;

    public function test1() {
        $this->test1_1 = function() {
            echo 'Hello World';
        };
    }

    public function __call($method, $args) {
        $closure = $this->$method;
        call_user_func_array($closure, $args);
    }
}

$test = new test();
$test->test1();
$test->test1_1(); 
```

或者您可以创建另一个具有您想要的功能的对象并将其存储在测试中。

```
class Test {
    public $test1;
    public function __construct(Test1 $test1) {
        $this->test1 = $test1;
    }
}

class Test1 {
    public function test1_1 {
        echo 'Hello World';
    }
}

$test1 = new Test1();
$test = new Test($test1);
$test->test1->test1_1(); 
```

我看不出通过在另一个函数中编写一个函数会完成什么。你不妨写两个函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:38:00.603

不，你不能那样打电话`test1_1`。当您在函数中定义任何变量或函数时，它只会在其中定义的地方成为本地的。

因此，只有这样才能工作；

```
class test {
   function test1($x) {
      $test1_1 = function ($x) {
        return $x*2;
      };
      echo $test1_1($x) ."\n";
   }
}

// this will give 4
$test->test1(2); 
```

# symfony - Symfony 2 Twig |date() 不工作？

> ID：14989330
> 
> 赞同：1
> 
> 时间：2013-02-20T20:30:57.927
> 
> 标签：symfony, twig, symfony-2.2

我有一个小问题，我真的不知道为什么。我正在使用 |date() 在树枝中打印日期时间变量，但它总是打印实际时间。

对于调试，我将以下代码放入我的模板中：

```
<pre>
{% debug entity.getCreatedAt|date("d.m.Y H:i:s") %}
{% debug entity.getCreatedAt|raw %}
{% debug entity.CreatedAt|raw %}
{% debug entity.CreatedAt|date("d.m.Y H:i:s") %} 
```

我的变量被称为 CreatedAt，所以通常我应该使用 entity.CreatedAt|date("dmY H:i:s") 获得正确的输出，对吗？

我的调试输出如下：

```
string '16.01.2013 13:46:03' (length=19) //entity.getCreatedAt|date("d.m.Y H:i:s")

object(DateTime)[4611] //entity.getCreatedAt|raw
 public 'date' => string '2013-01-16 13:46:03' (length=19)
 public 'timezone_type' => int 3
 public 'timezone' => string 'Europe/Berlin' (length=13)

object(DateTime)[4938] //entity.CreatedAt|raw
 public 'date' => string '2013-02-20 21:46:53' (length=19)
 public 'timezone_type' => int 3
 public 'timezone' => string 'Europe/Berlin' (length=13)

string '20.02.2013 21:46:53' (length=19) //entity.CreatedAt|date("d.m.Y H:i:s") 
```

我不明白为什么我一调用 CreatedAt 就为 NULL。并且在调试标记之外它始终为 NULL，而不取决于写入。

在我的实体中，我有：

```
private $CreatedAt;

public function setCreatedAt($createdAt)
{
    $this->CreatedAt = $createdAt;

    return $this;
}

public function getCreatedAt()
{
    return $this->CreatedAt;
} 
```

在 YML 中，我得到了：

```
CreatedAt:
  type: datetime
  nullable: true 
```

有人看错了吗？？实在是没找到，可能是bug吧？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:37:44.313

如果您想在实体类之外访问**私有**变量`$CreatedAt`，则必须调用**公共**getter 方法`getCreatedAt()`（这就是它的用途）。

在您的 twig 模板中，当您调用时`{% debug entity.CreatedAt|date("d.m.Y H:i:s") %}`，因为`entity.CreatedAt`is `NULL`，返回的字符串基于一个新的日期对象：

> 如果传递给日期过滤器的值为空，则默认返回当前日期。

[http://twig.sensiolabs.org/doc/filters/date.html](http://twig.sensiolabs.org/doc/filters/date.html)

**更新：**

正如@insertusernamehere 所提到的，twig 会自动调用公共 getter。
但是这种行为似乎只有在使用分隔符时才会`{{ }}`发生`{% %}`。

[http://twig.sensiolabs.org/doc/templates.html#synopsis](http://twig.sensiolabs.org/doc/templates.html#synopsis)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:41:14.003

在 PHP 中，成员函数不区分大小写，类成员区分大小写。所以`getCreatedAt`将与. `getcreatedat`_`CreatedAt``createdat`

这里有一些关于它的进一步信息：[为什么 PHP 中的函数和方法不区分大小写？](https://stackoverflow.com/q/2749781/1456376).

# .net - WCF、GC 和内存管理

> ID：14989332
> 
> 赞同：1
> 
> 时间：2013-02-20T20:31:05.287
> 
> 标签：.net, wcf, memory-management, serialization

是否可以在 WCF 中实现“自定义”缓存以提高内存使用率？或者也许 WCF 已经内置支持它？或者这是不可能的，我对事情的运作方式还不够了解。

例如，我在服务器内存缓存中有一个大型对象的集合（二进制序列化后每个项目约 50 项/约 7KB）。因此，当它位于内存中时没有问题，每个对象都很小并且位于堆中。但是当我通过 WCF 发送该集合时，该集合被序列化并且它的大小约为 400KB。由于字节数组现在是大对象，它位于大对象堆中。通过 WCF 非常频繁地发送完全相同的集合，这会通过为每个请求重新创建大型字节数组来破坏内存。目前我们通过“通信分页”（将集合拆分为小部分并发出多个请求以检索所有项目）来解决它。

是否可以预序列化集合，然后通过 WCF 发送相同的字节数组？我认为，如果它是相同的字节数组实例，那么即使它位于 LOH 中，每个集合也只有一个数组实例，并且内存不会因在每个请求上重新创建大数组而崩溃。

如果可能的话，我应该从哪里开始以及我需要阅读什么来实现这一点？

# javascript - Backbone.js 模型同步——在哪里设置方法？

> ID：14989337
> 
> 赞同：0
> 
> 时间：2013-02-20T20:31:25.273
> 
> 标签：javascript, backbone.js

我编写了一个自定义 Backbone.sync 方法，如下所示：

```
sync: function(method, model, options) {
switch(method)
case 'create':
//do stuff here
} 
```

稍后，我使用 set() 设置所有内容，并通过调用 save() 调用同步。虽然我可以设置主干模型的属性，但我在哪里可以将方法设置为“创建”、“删除”。ETC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:49:17.070

您无需`method`为自己指定参数`Backbone.sync`。在以下场景中使用不同的方法：

*   `create`- 当您调用`model.save()` 一个新模型（没有 id）时
*   `update`- 当您调用`model.save()`现有模型（具有 id）时
*   `patch`- 你打电话时`model.save(..., {patch:true})`
*   `delete`- 你打电话时`model.destroy()`
*   `read`- 当你打电话`model.fetch()`或`collection.fetch()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:37:06.343

根据代码，我不确定您在此处所做的确切操作，但我假设您正在使用创建和删除调用类似 AJAX 的方法。如果我对您的理解正确，这些方法应该在您的观点中。

# ios - iOS 6 - 某些视图的导航控制器横向旋转，而其他视图仅纵向

> ID：14989353
> 
> 赞同：3
> 
> 时间：2013-02-20T20:32:24.620
> 
> 标签：ios, rotation, modal-dialog, uiinterfaceorientation

我正在构建一个应用程序，该应用程序仅适用于主要视图（正常和倒置）。我已经在项目设置/Plist 中设置了这个设置，一切正常。但是，我有一些模态视图可以执行诸如显示图像/视频之类的操作，并且我希望它们能够旋转到所有方向。

我尝试为 UINavigationController 添加一个类别，但没有运气。我还向调用模式的 viewController 添加了以下代码：

```
-(BOOL)shouldAutomaticallyForwardAppearanceMethods{
    return NO;
}
-(BOOL)shouldAutomaticallyForwardRotationMethods{
    return NO;
} 
```

我已将以下代码添加到要允许所有方向的模态视图控制器中：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

我错过了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:44:07.780

在 iOS 6 上，旋转处理发生了变化。对于您描述的问题，有几种方法。首先，在 plist 中，启用除纵向倒置之外的所有方向。

然后您可以使用以下解决方案之一：

1.  使用 UINavigationController 的子类，它只允许旋转到纵向。
2.  对于所有控制器，指定它们支持的旋转。
3.  您可以覆盖应用程序委托中的方法。由于每当方向更改或推送新的视图控制器时都会在您的委托上调用该方法，因此您可以使用它来临时启用/禁用应用程序的横向显示：

    ```
    // In AppDelegate.h:
    @property (nonatomic) BOOL portraitOnly;

    // In AppDelegate.m:
    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        return _portraitOnly ? UIInterfaceOrientationMaskPortrait : UIInterfaceOrientationMaskAllButUpsideDown;
    }

    // to switch to portrait only:
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = YES;

    // to switch to allowing landscape orientations:
    ((AppDelegate *)[UIApplication sharedApplication].delegate).portraitOnly = NO; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:47:13.883

您需要在构建设置中为作为层次结构中祖先的 viewController 启用旋转（以允许层次结构中较低层的 VC 能够根据需要进行旋转）。然后从每个 viewController 中`shouldAutoRotate`返回正确的逻辑。`supportedInterfaceOrientations``willAnimateRotationToInterfaceOrientation`

`shouldAutoRotate`- 对于根本不移动的视图控制器返回NO 。

- 同样，从返回 YES`shouldAutoRotate`并返回在该 VC 中有效的方向`supportedInterfaceOrientations`

- 用于在新方向出现`willAnimateRotationToInterfaceOrientation`之前进行任何最后一分钟的清理或数据更改。

如果您仍有问题，请随时告诉我。希望能帮助到你！

# excel - 线性到数组

> ID：14989363
> 
> 赞同：-2
> 
> 时间：2013-02-20T20:33:05.147
> 
> 标签：excel, vba

我正在尝试自学有关数组的知识。有人可以使用数组翻译下面的代码并解释吗？

```
Dim i As Integer
For i = 1 To 100

If Sheets("Sheet1").Range("A" & i) < Sheets("Sheet1").Range("B1") Then
    Sheets("Sheet1").Range("C" & i) = "Less than"

ElseIf Sheets("Sheet1").Range("A" & i) > Sheets("Sheet1").Range("B1") Then
    Sheets("Sheet1").Range("C" & i) = "Greater than"

Else: Sheets("Sheet1").Range("C" & i) = "Equal to"

End If

Next i 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:58:31.850

此代码使用数组来存储您可能根据 A 列和 B 列中的单元格比较给出的结果...

```
Option Explicit

Sub marine()
    Dim rowNumber As Integer

    ' create an array of strings here
    Dim values(-1 To 1) As String

    ' populate the values
    values(-1) = "less than"
    values(0) = "equal to"
    values(1) = "greater than"

    For rowNumber = 1 To 100
        Dim signValue As Integer
        signValue = Math.Sgn(Sheets("Sheet1").Cells(rowNumber, 1) - Sheets("Sheet1").Cells(rowNumber, 2))

        ' copy the correct value from the array into the cell
        Sheets("Sheet1").Cells(rowNumber, 3).Value = values(signValue)
    Next rowNumber
End Sub 
```

# extjs - 添加空项目/行后无法从组合框中选择

> ID：14989367
> 
> 赞同：2
> 
> 时间：2013-02-20T20:33:21.927
> 
> 标签：extjs, combobox, extjs4

我按照 [如何将空项目添加到 ExtJS 组合框？](https://stackoverflow.com/questions/9399771/how-to-add-an-empty-item-to-extjs-combobox/14989155)我可以根据需要看到一个空白行/项目，但我***无法***从组合框中选择任何项目！

有什么猜测吗？

我的代码如下

```
var rModel = Ext.regModel('State', {
  fields: [
     {type: 'string', name: 'fips_state_code'},
     {type: 'string', name: 'state_name'}
  ]
});

// The data store holding the states

var store = Ext.create('Ext.data.Store', {
  model: 'State',
  data: [{fips_state_code: '0', state_name: ' '}]
});

store.add(obj.results);

{
      xtype:'combo',
      id:'filterstate',
      width: 250,
      fieldLabel: 'Filter By State',
      store: store,
      queryMode: 'local',
      displayField: 'state_name',
      valueField: 'fips_state_code',
      editable: false,
      forceSelection : true,
      triggerAction : 'all',
      typeAhead: true,
      selectOnFocus:true,
      allowBlank:true,
      tpl : '<tpl for=\".\"><div class=\"x-combo-list-item\">{state_name}&nbsp;<\/div><\/tpl>'

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:37:18.773

问题是 tpl 属性，为了选择一个属性，您需要将**x-boundlist-item**类添加到您的 tpl。像这样

```
tpl : '<tpl for=".">'+
          '<div class="x-boundlist-item">'+
              '<div class="list-item">{state_name}&nbsp;</div>'+
          '</div>'+
      '</tpl>' 
```

[http://jsfiddle.net/alexrom7/CnwpD/](http://jsfiddle.net/alexrom7/CnwpD/)

但是，如果您只想将自定义 css 类应用于组合框列表中的每个项目。我会建议你这样做

```
listConfig: {
// Custom rendering template for each item
            getInnerTpl: function() {
                return '<div class="list-item">{state_name}&nbsp;<\/div>';
            }
        } 
```

[http://jsfiddle.net/alexrom7/6Jt5T/](http://jsfiddle.net/alexrom7/6Jt5T/)

直接使用**tpl**可能会给您带来一些麻烦。

# linux - 将变量传递给bash中的函数（奇怪的输出？）

> ID：14989368
> 
> 赞同：0
> 
> 时间：2013-02-20T20:33:27.997
> 
> 标签：linux, bash, terminal

```
function f(){
local y=$1;
local z=$2;
echo $x $y $z;
}
function main(){
x=1;
y=2;
z=3;
f $y $z;
}

main $* 
```

我的输出是 1 2 3

为什么会这样？我只传递了两个变量 y 和 z。

$1 将是来自 main 的 y，它是 2，所以返回函数 f local y=$1 将是 y=2。本地 z=$2 也是一样的，那就是 z=3。

所以我会假设一个错误，因为我试图回显 $x 这不是一个有效的变量，或者我应该得到 2 3。

为什么它会回显 1 2 3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:11:31.607

`$x`是一个全局变量。它在函数中分配的事实并没有改变这一点。

所以当然它在`f()`或任何其他功能中都是可见的。

# mysql - SQL左连接多个表并在每个表中有条件地计算值

> ID：14989370
> 
> 赞同：0
> 
> 时间：2013-02-20T20:33:53.250
> 
> 标签：mysql, sql, count, group-by, left-join

我在正确组合 SQL 语句时遇到了一些麻烦，因为我没有太多的 SQL 经验，尤其是聚合函数。可以肯定地说，我真的不*知道*在基本 SQL 结构之外我在做什么。我可以进行常规连接，但不能进行复杂连接。

我有一些表格：**'Survey'**、**'Questions'**、**'Session'**、**'ParentSurvey'**和**'ParentSurveyQuestion'**。在结构上，调查可以有问题，可以有启动调查的用户（会话），也可以有一个父调查，其问题被导入当前调查。

我想要做的是在调查表中获取每个调查的信息；它有总问题，已经开始了多少次会议（有条件地，那些尚未完成的），以及家长调查中的问题数量。三个连接表可以但不必包含任何值，如果不包含，则 COUNT 应返回 0。三个表中的公共字段是**“survey_id”的变体**

到目前为止，这是我的 SQL，我将表结构放在它下面。

```
 SELECT 
   `kp_survey_id`,
   COALESCE( q.cnt, 0 ) AS questionsAmount,
   COALESCE( s.cnt, 0 ) AS sessionsAmount
   COALESCE( p.cnt, 0 ) AS parentQAmount,
 FROM `Survey`
   LEFT JOIN                    <-- I'd like the count of questions for this survey
      ( SELECT COUNT(*) AS cnt 
      FROM Questions
      GROUP BY kf_survey_id ) q
     ON Survey.kp_survey_id = Questions.kf_survey_id
   LEFT JOIN 
      ( SELECT COUNT(*) AS cnt    <-- I'd like the count of started sessions for this survey
      FROM Session
      WHERE session_status = 'started'  <-- should this be Session.session_status?
      GROUP BY kf_survey_id ) s
     ON Survey.kp_survey_id = Session.kf_survey_id
   LEFT JOIN            
      ( SELECT COUNT(*) AS cnt    <-- I'd like the count of questions in the parent survey with this survey id
      FROM ParentSurvey
      GROUP BY kp_parent_survey_id ) p
     ON Survey.kf_parent_survey_id = ParentSurveyQuestion.kf_parent_survey_id 
```

“kp”前缀表示主键，而“kf”前缀表示外键
结构：

**调查：** 'kp_survey_id' | 'kf_parent_survey_id'

**问题：** 'kp_question_id' | 'kf_survey_id'

**会话：** 'kp_session_id' | 'kf_survey_id' | '会话状态'

**家长调查：** 'kp_parent_survey_id' | '调查名称'

**家长调查问题：** 'kp_parent_question_id' | 'kf_parent_survey_id'

每个表中还有其他列，例如“name”或“account_id”，但我认为在这种情况下它们并不重要

我想知道我是否正确执行此操作，或者我是否遗漏了什么。我正在重新利用我在 stackoverflow 上找到的一些代码并对其进行修改以满足我的需求，因为我没有在这个站点上看到超过三个表的条件聚合。

我的预期输出是这样的：

```
kp_survey_id   |   questionsAmount   |   sessionsAmount   |   parentQAmount  
    1          |         3           |         0          |        3
    2          |         0           |         5          |        3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:44:18.010

您需要做的一件事是更正您的联接。加入子查询时，需要使用子查询的别名。在您的情况下，您使用的是子查询中使用的表的别名。

您需要更改的另一件事是在子查询的 JOIN 中包含您希望使用的字段。

进行这些更改并尝试运行。您是否收到错误或想要的结果？

```
SELECT 
   `kp_survey_id`,
   COALESCE( q.cnt, 0 ) AS questionsAmount,
   COALESCE( s.cnt, 0 ) AS sessionsAmount
   COALESCE( p.cnt, 0 ) AS parentQAmount,
 FROM `Survey`
   LEFT JOIN                    <-- I'd like the count of questions for this survey
      ( SELECT kf_survey_id, COUNT(*) AS cnt 
      FROM Questions
      GROUP BY kf_survey_id ) q
     ON Survey.kp_survey_id = q.kf_survey_id
   LEFT JOIN 
      ( SELECT kf_survey_id, COUNT(*) AS cnt    <-- I'd like the count of started sessions for this survey
      FROM Session
      WHERE session_status = 'started'  <-- should this be Session.session_status?
      GROUP BY kf_survey_id ) s
     ON Survey.kp_survey_id = s.kf_survey_id
   LEFT JOIN            
      ( SELECT kp_parent_survey_id, COUNT(*) AS cnt    <-- I'd like the count of questions in the parent survey with this survey id
      FROM ParentSurvey
      GROUP BY kp_parent_survey_id ) p
     ON Survey.kf_parent_survey_id = p.kf_parent_survey_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:45:44.420

我认为您非常接近 - 只需要修复您的连接并将调查 ID 包含在子查询中以在这些连接中使用：

```
SELECT 
   `kp_survey_id`,
   COALESCE( q.cnt, 0 ) AS questionsAmount,
   COALESCE( s.cnt, 0 ) AS sessionsAmount
   COALESCE( p.cnt, 0 ) AS parentQAmount,
 FROM `Survey`
   LEFT JOIN                    
      ( SELECT COUNT(*) cnt, kf_survey_id AS cnt 
      FROM Questions
      GROUP BY kf_survey_id ) q
     ON Survey.kp_survey_id = q.kf_survey_id
   LEFT JOIN 
      ( SELECT COUNT(*) cnt, kf_survey_id
      FROM Session
      WHERE session_status = 'started'  
      GROUP BY kf_survey_id ) s
     ON Survey.kp_survey_id = s.kf_survey_id
   LEFT JOIN            
      ( SELECT COUNT(*) cnt, kp_parent_survey_id
      FROM ParentSurvey
      GROUP BY kp_parent_survey_id ) p
     ON Survey.kf_parent_survey_id = p.kp_parent_survey_id 
```

# java - Android：隐藏 ActionBar，保留 Tabs

> ID：14989372
> 
> 赞同：22
> 
> 时间：2013-02-20T20:33:58.327
> 
> 标签：java, android, android-actionbar

为了简单起见：我的操作栏中有选项卡，但操作栏占用了太多空间。我想要那个额外的空间。我需要一种方法来隐藏操作栏，同时保留我的标签。有没有办法做到这一点？或者有没有一种方法可以像在横向模式下一样将选项卡内置到操作栏中？谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-20T20:46:49.050

您可以有一个空的操作栏，然后选项卡将占据空间：

```
getSupportActionBar().setDisplayShowHomeEnabled(false);              
getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-02T19:30:51.460

试试下面的代码：

```
 final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false); 
```

还要删除以下代码中的以下内容，该代码在创建项目时添加默认值：

```
public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.main, menu);
      return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-07T11:20:00.240

这对我有用

```
 actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false); 
```

我也评论了这条线

```
 getMenuInflater().inflate(R.menu.main, menu); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-19T07:52:00.590

Ahmad 的回答是正确的，但它需要 API 11。要支持较低的 API，请使用此代码 -

```
setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); 
```

要启用它，请使用 -

```
setNavigationMode(ActionBar.NAVIGATION_MODE_TABS) 
```

# sql - left join self 与标准

> ID：14989377
> 
> 赞同：1
> 
> 时间：2013-02-20T20:34:38.847
> 
> 标签：sql, sql-server, left-join

**设置**

```
create table #history (
adddttm date,
number int
)
insert into #history values ('2013-01-01 08:56:00.000',1);
insert into #history values ('2013-01-01 08:56:00.000',2);
insert into #history values ('2013-02-13 08:56:00.000',2);
insert into #history values ('2013-02-13 08:56:00.000',3); 
```

**询问**

```
select *
from #history new
left join #history old
  on new.number = old.number
where new.adddttm = '2013-02-13 08:56:00.000'
and   old.adddttm = '2013-01-01 08:56:00.000' 
```

我希望以下查询返回：

```
----------|-|----------|-
2013-02-13|2|2013-01-01|2
2013-02-13|3|null      |null 
```

但我从来没有得到第二排。为什么这个左连接会跳过丢失的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:38:18.073

很简单，因为 where 子句中引用了 old.adddttm。我写了一篇文章 [Fun with Outer Joins](http://www.sqlservercentral.com/articles/T-SQL/93039/)，其中详细说明了原因。再次非常简单，因为 ON 子句仅用于两个表之间的连接，而 WHERE 子句仅用于限制结果集。不过很容易混淆这两者。

此查询将起作用。

```
select *
from #history new
left join #history old
  on new.number = old.number 
  and old.adddttm = '2013-01-01 08:56:00.000'
WHERE new.adddttm = '2013-02-13 08:56:00.000' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:40:37.107

您的 where 子句不包括该行。

```
select old.*
from history new
left join history old
  on new.number = old.number and old.adddttm = '2013-01-01 08:56:00.000' 
where new.adddttm = '2013-02-13 08:56:00.000' 
```

现在，当它没有获得连接行时，您会按预期获得空值。

# linq - NHib 3 配置和映射返回空结果？

> ID：14989379
> 
> 赞同：2
> 
> 时间：2013-02-20T20:34:44.273
> 
> 标签：linq, oracle, nhibernate, odp.net, nhibernate-3

**注意**：我特别不使用 Fluent NHibernate，而是使用 3.x 的内置映射样式。但是，当我认为应该返回记录时，我得到了一个空白记录集。

我确定我做错了什么，它把我逼到了墙角。:)

# 背景/设置

*   我有一个名为 Maximo 的 IBM 产品的 Oracle 11g 数据库
*   该产品有一个名为 workorder 的表格，其中列出了工作订单；该表有一个名为“wonum”的字段，它代表一个唯一的工作订单号。
*   我有一个“报告”用户，可以通过 maximo 模式访问表
    *   例如“从 maximo.workorder 中选择 *”
*   我正在使用 Oracle 的托管 ODP.NET DLL 来完成数据任务，并且是第一次使用它。

# 我尝试过的事情

*   我创建了一个基本的控制台应用程序来测试它
*   我在主分支上添加了 NHibernate.Driver 中的 OracleManagedClientDriver.cs（我正在使用的版本中没有正式发布）。
*   我创建了一个名为 WorkorderBriefBrief 的 POCO，它只有一个 WorkorderNumber 字段。
*   我创建了一个类映射 WorkorderBriefBriefMap，它只将该值映射为只读值。
*   我创建了一个带有控制台输出的控制台应用程序来尝试编写工单行。
*   会话和事务似乎正确打开，
*   我测试了一个标准 ODP.NET OracleConnection 到我的连接字符串

# 编码

## POCO：WorkorderBriefBrief.cs

```
namespace PEApps.Model.WorkorderQuery
{
    public class WorkorderBriefBrief
    {
        public virtual string WorkorderNumber { get; set; }

    }
} 
```

## 映射：WorkorderBriefBriefMap.cs

```
using NHibernate.Mapping.ByCode;
using NHibernate.Mapping.ByCode.Conformist;
using PEApps.Model.WorkorderQuery;

namespace ConsoleTests
{
    public class WorkorderBriefBriefMap : ClassMapping<WorkorderBriefBrief>
    {
        public WorkorderBriefBriefMap()
        {
            Schema("MAXIMO");
            Table("WORKORDER");

            Property(x=>x.WorkorderNumber, m =>
                {
                    m.Access(Accessor.ReadOnly);
                    m.Column("WONUM");
                });
          }
    }
} 
```

## 放在一起：Program.cs

```
namespace ConsoleTests
{
    class Program
    {
        static void Main(string[] args)
        {
            NHibernateProfiler.Initialize();
            try
            {
                var cfg = new Configuration();
                cfg
                   .DataBaseIntegration(db =>
                   {
                       db.ConnectionString = "[Redacted]";
                       db.Dialect<Oracle10gDialect>();
                       db.Driver<OracleManagedDataClientDriver>();
                       db.KeywordsAutoImport = Hbm2DDLKeyWords.AutoQuote;
                       db.BatchSize = 500;
                       db.LogSqlInConsole = true;
                   })
                   .AddAssembly(typeof(WorkorderBriefBriefMap).Assembly)
                   .SessionFactory().GenerateStatistics();

                var factory = cfg.BuildSessionFactory();

                List<WorkorderBriefBrief> query;

                using (var session = factory.OpenSession())
                {
                    Console.WriteLine("session opened");
                    Console.ReadLine();
                    using (var transaction = session.BeginTransaction())
                    {
                        Console.WriteLine("transaction opened");
                        Console.ReadLine();
                        query =
                            (from workorderbriefbrief in session.Query<WorkorderBriefBrief>() select workorderbriefbrief)
                                .ToList();
                        transaction.Commit();
                        Console.WriteLine("Transaction Committed");
                    }
                }

                Console.WriteLine("result length is {0}", query.Count);
                Console.WriteLine("about to write WOs");

                foreach (WorkorderBriefBrief wo in query)                
                {
                    Console.WriteLine("{0}", wo.WorkorderNumber);
                }

                Console.WriteLine("DONE!");
                Console.ReadLine();

                // Test a standard connection below
                string constr = "[Redacted]";

                OracleConnection con = new OracleConnection(constr);
                con.Open();
                Console.WriteLine("Connected to Oracle Database {0}, {1}", con.ServerVersion, con.DatabaseName.ToString());
                con.Dispose();

                Console.WriteLine("Press RETURN to exit.");
                Console.ReadLine();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error : {0}", ex);
                Console.ReadLine();
            }
        }
    }
} 
```

提前感谢您提供的任何帮助！

# 更新

以下代码（带有 OracleDataReader 的标准 ADO.NET）可以正常工作，返回应有的 16 个工单编号。对我来说，这表明我对 NHibernate 的使用比 Oracle Managed ODP.NET 更多。所以我希望这只是我在上面的映射或配置中所做的一些愚蠢的事情。

```
 // Test a standard connection below
            string constr = "[Redacted]";

            OracleConnection con = new Oracle.ManagedDataAccess.Client.OracleConnection(constr);
            con.Open();
            Console.WriteLine("Connected to Oracle Database {0}, {1}", con.ServerVersion, con.DatabaseName);
            var cmd = new OracleCommand();
            cmd.Connection = con;
            cmd.CommandText = "select wonum from maximo.workorder where upper(reportedby) = 'MAXADMIN'";
            cmd.CommandType = CommandType.Text;
            Oracle.ManagedDataAccess.Client.OracleDataReader reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                Console.WriteLine(reader.GetString(0));
            }

            con.Dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:24:06.787

在配置 NHibernate 时，您需要告诉它您的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:01:18.770

我找到了答案——感谢Oskar 最初的建议，我意识到不仅仅是我没有添加程序集，我还需要创建一个新的映射器。

为此，我在构建会话工厂之前将以下代码添加到配置中：

```
var mapper = new ModelMapper();

//define mappingType(s) -- could be an array; in my case it was just 1
var mappingType = typeof (WorkorderBriefBriefMap);

//use AddMappings instead if you're mapping an array
mapper.AddMapping(mappingType);

//add the compiled results of the mapper to the configuration
cfg.AddMapping(mapper.CompileMappingForAllExplicitlyAddedEntities());
var factory = cfg.BuildSessionFactory(); 
```

# html - 如何在不覆盖 CSS 的情况下附加新的背景图像

> ID：14989389
> 
> 赞同：0
> 
> 时间：2013-02-20T20:35:12.387
> 
> 标签：html, css

我正在尝试使用两个这样的背景图片

CSS：

```
nav li { 
background bg1
}

li#abc {
background bg2
} 
```

HTML：

```
 nav

ul
  li id="abc" 
```

我知道你可以通过做覆盖，`li#abc { background bg1 bg2 }..`但我想知道你是否可以附加 bg2？

# python - 当我将 PostgreSQL 作为 Django 的数据库时，为什么要使用 Redis？

> ID：14989390
> 
> 赞同：58
> 
> 时间：2013-02-20T20:35:16.590
> 
> 标签：python, django, postgresql, redis

我有一个当前托管在 Amazon 的 EC2 服务上的 Django 应用程序。我有两台机器，一台装有 Django 应用程序，另一台装有我的 PostgreSQL 数据库。到目前为止，它一直坚如磐石。

许多消息来源声称我应该在我的堆栈中实现 Redis，但是使用 Django 和 Postgresql 实现 Redis 的目的是什么？例如，如何在我的 Django 代码中实现 Redis？

如何将它与 PostgreSQL 一起使用？

这些都是我一直试图寻找答案的问题，所以我来到这里希望从最大和最好的人那里得到答案。我真的很感激任何答案。

谢谢你

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-02-20T20:41:56.773

[Redis](http://redis.io/)是一个在 RAM 内存中运行的键值存储系统，它就像一个“轻型数据库”，并且由于它在 RAM 内存级别上工作，因此与读取/写入 PostgreSQL 或任何其他传统[关系数据库](http://en.wikipedia.org/wiki/Relational_database)相比，它的速度要快几个数量级。Redis 是一个所谓的[NoSQL](http://nosql-database.org/)数据库，就像[Mongo](https://www.mongodb.org/)和许多其他数据库一样。它不能直接取代 PostgreSQL，你仍然需要永久存储，但它与关系数据库一起作为替代存储系统工作。如果您的 IO 操作开始变得昂贵，您可以使用 Redis，它非常适合快速计算和基于键的查询。

您可以使用包装器将它包含在您的 Django/Python 项目中，例如[redis-py](https://github.com/andymccurdy/redis-py)。

Redis 的安装和使用非常简单，您可以查看[redis-py](https://github.com/andymccurdy/redis-py)中的示例。Redis 独立于任何关系数据库，因此您可以使用它来永久和/或临时地缓存、计算或存储值。它可以帮助减少对 PostgreSQL 的查询，最终你可以按照你想要的方式使用它，并利用它来改进你的应用程序/架构。

这个类似的问题可以帮助您[使用 Django 进行 Redis](https://stackoverflow.com/questions/3801379/how-can-i-use-redis-with-django)

# c# - 确定字典是否包含所有一组键

> ID：14989393
> 
> 赞同：20
> 
> 时间：2013-02-20T20:35:26.827
> 
> 标签：c#, .net, linq

我试图找出确定一个`Dictionary<string, string>`对象是否包含*所有*一组`string`对象作为键的最佳方法。

我可能没有任何意义，所以这里有一些使用一组明确字符串的示例代码：

```
public static bool ContainsKeys(this Dictionary<string, string> dictionary)
{
  return dictionary.ContainsKey("fname") && dictionary.ContainsKey("lname") && dictionary.ContainsKey("address1") &&
         dictionary.ContainsKey("city") && dictionary.ContainsKey("state") && dictionary.ContainsKey("zip");
} 
```

这里的想法是接受任意一组字符串 as`keys`并检查`Dictionary<string, string>`对象的键是否包含`keys`.

我试图沿着 LINQ 之路走下去：

```
public static bool ContainsKeys(this Dictionary<string, string> dictionary, string[] keys)
{
  var query = from entry in dictionary
              where keys.Contains(entry.Key)
              select entry;

  return query.Any();
} 
```

我不知道我是否走在正确的道路上 - 我认为如果我想知道是否`dictionary`包含任何这些字符串作为键，这可能会起作用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-20T20:38:11.180

像这样的东西应该满足你的要求。当然，围绕你的论点应用适当的验证。

```
return keys.Any() 
    && keys.All(key => dictionary.ContainsKey(key)); 
```

注意：我包括`Any`，因为如果源序列（键）实际上是空的，`All`将返回*true 。*如果您不介意这一点，请消除使用`Any`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T20:40:07.160

这可以使用[All](http://msdn.microsoft.com/en-us/library/bb548541.aspx)扩展方法非常简单地完成。

```
return keys.All(k => dictionary.ContainsKey(k)); 
```

这将检查给定谓词 ( `dictionary.ContainsKey(k)`) 对于给定数组中的所有键是否为真。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T20:38:50.777

LINQ 确实适合这种事情：

```
public static bool ContainsKeys(this Dictionary<string, string> dictionary, string[] keys)
{
  return keys.All(dictionary.ContainsKey);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T20:42:23.893

应该这样做，只需使用`Except`消除其中的键`Dictionary`并检查是否有任何剩余；

```
return !keys.Except(dictionary.Keys).Any(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-31T22:06:24.100

为了扩展[接受的答案](https://stackoverflow.com/a/14989449/403765)，这里是一个扩展方法的完整源代码，它适用于任何类型的字典，而不仅仅是一个带有字符串键的字典：

```
using System.Linq;

namespace System.Collections.Generic
{

    /// <summary>
    /// 
    /// </summary>
    public static class IDictionaryExtensions
    {

        public static bool ContainsKeys<TKey, TValue>(this IDictionary<TKey, TValue> dictionary, IEnumerable<TKey> keys)
        {
            return keys.Any() && keys.All(key => dictionary.ContainsKey(key));
        }

    }

} 
```

# java - 强制 Tomcat 通过 http 使用安全的 JSESSIONID cookie

> ID：14989396
> 
> 赞同：28
> 
> 时间：2013-02-20T20:35:31.143
> 
> 标签：java, security, tomcat, session-cookies

有没有办法配置 Tomcat 7 以在所有场合创建带有安全标志的 JSESSIONID cookie？

仅当通过 https 建立连接时，通常的配置才会导致 Tomcat 使用安全标志标记会话 cookie。然而，在我的生产场景中，Tomcat 位于一个反向代理/负载均衡器后面，它处理（和终止）https 连接并通过 http 联系 tomcat。

即使通过纯 http 建立连接，我能否以某种方式强制使用 Tomcat 的会话 cookie 上的安全标志？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-08T10:55:48.797

最后，与我最初的测试相反，web.xml 解决方案在 Tomcat 7 上为我工作。

例如，我将此片段添加到 web.xml 中，即使反向代理通过纯 HTTP 联系 tomcat，它也会将会话 cookie 标记为安全。

```
<session-config>
    <cookie-config>
        <http-only>true</http-only>
        <secure>true</secure>
    </cookie-config>
</session-config> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T21:04:50.433

ServletContext.getSessionCookieConfig().setSecure(true)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T14:17:51.323

另一种类似于 Mark 的方法是使用`SessionCookieConfig`，但将其设置在 JNDI 配置的上下文侦听器中：

编码：

```
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.SessionCookieConfig;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class JndiSessionCookieConfigListener implements ServletContextListener {
    private static final Logger logger = LoggerFactory.getLogger( JndiSessionCookieConfigListener.class );

    private volatile Context jndiSessionCookieConfig;
    private volatile SessionCookieConfig sessionCookieConfig;

    @Override
    public void contextInitialized( ServletContextEvent sce ) {
        String listenerName = getClass().getSimpleName();
        try {
            logger.info( "JNDI override session cookie config found for {}", listenerName );
            jndiSessionCookieConfig = (Context) new InitialContext().lookup(
                    "java:comp/env/" + listenerName );
        }
        catch ( NamingException e ) {
            logger.info( "No JNDI override session cookie config found for {}", listenerName );
        }

        sessionCookieConfig = sce.getServletContext().getSessionCookieConfig();

        String comment = getString( "comment" );
        if ( comment != null ) {
            logger.debug( "\t[comment]: [{}]", comment );
            sessionCookieConfig.setComment( comment );
        }

        String domain = getString( "domain" );
        if ( domain != null ) {
            logger.debug( "\t[domain]: [{}]", domain );
            sessionCookieConfig.setDomain( domain );
        }

        Boolean httpOnly = getBoolean( "http-only" );
        if ( httpOnly == null ) {
            sessionCookieConfig.setHttpOnly( true );
        }
        else {
            logger.debug( "\t[http-only]: [{}]", httpOnly );
            sessionCookieConfig.setHttpOnly( httpOnly );
        }

        Integer maxAge = getInteger( "max-age" );
        if ( maxAge != null ) {
            sessionCookieConfig.setMaxAge( maxAge );
        }

        String name = getString( "name" );
        if ( name != null ) {
            logger.debug( "\t[name]: [{}]", name );
            sessionCookieConfig.setName( name );
        }

        String path = getString( "path" );
        if ( path != null ) {
            logger.debug( "\t[path]: [{}]", path );
            sessionCookieConfig.setPath( path );
        }

        Boolean secure = getBoolean( "secure" );
        if ( secure == null ) {
            sessionCookieConfig.setSecure( true );
        }
        else {
            logger.debug( "\t[secure]: [{}]", secure );
            sessionCookieConfig.setSecure( secure );
        }
    }

    @Override
    public void contextDestroyed( ServletContextEvent sce ) {
    }

    private Boolean getBoolean( String name ) {
        Object value;
        try {
            value = jndiSessionCookieConfig.lookup( name );
            if ( value instanceof Boolean ) {
                return (Boolean)value;
            }
            else {
                return Boolean.valueOf( value.toString() );
            }
        }
        catch ( NamingException e ) {
            return null;
        }
    }

    private Integer getInteger( String name ) {
        Object value;
        try {
            value = jndiSessionCookieConfig.lookup( name );
            if ( value instanceof Integer ) {
                return (Integer)value;
            }
            else {
                return Integer.valueOf( value.toString() );
            }
        }
        catch ( NamingException e ) {
            return null;
        }
    }

    private String getString( String name ) {
        Object value;
        try {
            value = jndiSessionCookieConfig.lookup( name );
            return value.toString();
        }
        catch ( NamingException e ) {
            return null;
        }
    }
} 
```

在 web.xml 中：

```
...
  <listener>
    <listener-class>
      org.mitre.caasd.servlet.init.JndiSessionCookieConfigListener
    </listener-class>
  </listener>
... 
```

在您的 context.xml 中：

```
...
<Environment name="JndiSessionCookieConfigListener/secure"
  type="java.lang.String"
  override="false"
  value="true" />
... 
```

这允许您在运行时*在部署环境*中设置所有会话 cookie 配置。因此，您可以使用相同的 webapp（war 文件）在本地进行开发（您不会有 https）和在生产中您*总是*需要 https。

*[请注意， OWASP 文档](https://www.owasp.org/index.php/SecureFlag#Environment_consideration)中提到了这种方法*

# android-ndk - 如何将采样率从 AV_SAMPLE_FMT_FLTP 转换为 AV_SAMPLE_FMT_S16？

> ID：14989397
> 
> 赞同：14
> 
> 时间：2013-02-20T20:35:34.553
> 
> 标签：android-ndk, ffmpeg, sample, pcm, libav

我正在使用带有avcodec_decode_audio3的ffmpeg将aac解码为pcm。但是它解码为 AV_SAMPLE_FMT_FLTP 样本格式（PCM 32 位浮点平面），我需要 AV_SAMPLE_FMT_S16（PCM 16 位签名 - S16LE）。

我知道 ffmpeg 可以使用 -sample_fmt 轻松做到这一点。我想对代码做同样的事情，但我仍然无法弄清楚。

audio_resample 不适用于：它失败并显示错误消息：.... 转换失败。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-12T21:23:12.663

**编辑 2013 年 4 月 9 日**：制定了如何使用 libswresample 来做到这一点......更快！

在过去 2-3 年的某个时间点，FFmpeg 的 AAC 解码器的输出格式从 AV_SAMPLE_FMT_S16 更改为 AV_SAMPLE_FMT_FLTP。这意味着每个音频通道都有自己的缓冲区，每个样本值都是一个 32 位浮点值，从 -1.0 缩放到 +1.0。

而对于 AV_SAMPLE_FMT_S16，数据位于单个缓冲区中，样本交错，每个样本都是从 -32767 到 +32767 的有符号整数。

如果您真的需要音频作为 AV_SAMPLE_FMT_S16，那么您必须自己进行转换。我想出了两种方法：

**1.使用libswresample**（推荐）

```
#include "libswresample/swresample.h"

...

SwrContext *swr;

...

// Set up SWR context once you've got codec information
swr = swr_alloc();
av_opt_set_int(swr, "in_channel_layout",  audioCodec->channel_layout, 0);
av_opt_set_int(swr, "out_channel_layout", audioCodec->channel_layout,  0);
av_opt_set_int(swr, "in_sample_rate",     audioCodec->sample_rate, 0);
av_opt_set_int(swr, "out_sample_rate",    audioCodec->sample_rate, 0);
av_opt_set_sample_fmt(swr, "in_sample_fmt",  AV_SAMPLE_FMT_FLTP, 0);
av_opt_set_sample_fmt(swr, "out_sample_fmt", AV_SAMPLE_FMT_S16,  0);
swr_init(swr);

...

// In your decoder loop, after decoding an audio frame:
AVFrame *audioFrame = ...;
int16_t* outputBuffer = ...;
swr_convert(&outputBuffer, audioFrame->nb_samples, audioFrame->extended_data, audioFrame->nb_samples); 
```

这就是你所要做的！

**2.用C手工做**（原答案，不推荐）

所以在你的解码循环中，当你有一个音频包时，你可以像这样解码它：

```
AVCodecContext *audioCodec;   // init'd elsewhere
AVFrame *audioFrame;          // init'd elsewhere
AVPacket packet;              // init'd elsewhere
int16_t* outputBuffer;        // init'd elsewhere
int out_size = 0;
...
int len = avcodec_decode_audio4(audioCodec, audioFrame, &out_size, &packet); 
```

然后，如果你有一个完整的音频帧，你可以很容易地转换它：

```
 // Convert from AV_SAMPLE_FMT_FLTP to AV_SAMPLE_FMT_S16
    int in_samples = audioFrame->nb_samples;
    int in_linesize = audioFrame->linesize[0];
    int i=0;
    float* inputChannel0 = (float*)audioFrame->extended_data[0];
    // Mono
    if (audioFrame->channels==1) {
        for (i=0 ; i<in_samples ; i++) {
            float sample = *inputChannel0++;
            if (sample<-1.0f) sample=-1.0f; else if (sample>1.0f) sample=1.0f;
            outputBuffer[i] = (int16_t) (sample * 32767.0f);
        }
    }
    // Stereo
    else {
        float* inputChannel1 = (float*)audioFrame->extended_data[1];
        for (i=0 ; i<in_samples ; i++) {
             outputBuffer[i*2] = (int16_t) ((*inputChannel0++) * 32767.0f);
             outputBuffer[i*2+1] = (int16_t) ((*inputChannel1++) * 32767.0f);
        }
    }
    // outputBuffer now contains 16-bit PCM! 
```

为了清楚起见，我留下了一些东西......单声道路径中的钳位理想情况下应该在立体声路径中复制。并且可以轻松优化代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T07:43:44.793

我从 FFMPEG 中找到了 2 个重采样函数。性能也许更好。

1.  avresample_convert() [http://libav.org/doxygen/master/group__lavr.html](http://libav.org/doxygen/master/group__lavr.html)
2.  swr_convert() [http://spirton.com/svn/MPlayer-SB/ffmpeg/libswresample/swresample_test.c](http://spirton.com/svn/MPlayer-SB/ffmpeg/libswresample/swresample_test.c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T22:29:49.787

感谢鲁本解决这个问题。我确实发现与直接的 ffmpeg -i file.wav 相比，某些示例值略有偏差。似乎在转换中，他们对值使用了 round() 。

为了进行转换，我做了你所做的修改，以适用于任何数量的渠道：

```
if (audioCodecContext->sample_fmt == AV_SAMPLE_FMT_FLTP)
{
    int nb_samples = decoded_frame->nb_samples;
    int channels = decoded_frame->channels;
    int outputBufferLen = nb_samples & channels * 2;
    short* outputBuffer = new short[outputBufferLen/2];

    for (int i = 0; i < nb_samples; i++)
    {
         for (int c = 0; c < channels; c++)
         {
             float* extended_data = (float*)decoded_frame->extended_data[c];
             float sample = extended_data[i];
             if (sample < -1.0f) sample = -1.0f;
             else if (sample > 1.0f) sample = 1.0f;
             outputBuffer[i * channels + c] = (short)round(sample * 32767.0f);
         }
    }

    // Do what you want with the data etc.

} 
```

我从 ffmpeg 0.11.1 -> 1.1.3 开始，发现样本格式的变化很烦人。我查看了将 request_sample_fmt 设置为 AV_SAMPLE_FMT_S16 但似乎 aac 解码器不支持除 AV_SAMPLE_FMT_FLTP 之外的任何内容。

# java - JSP Servlet 显示不存在的数据

> ID：14989399
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:35:40.763
> 
> 标签：java, jsp

我创建了一个简单的 servlet，它打印了一些像这样的消息：

```
@WebServlet("/servletExample")
public class ServletExample extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { 

        PrintWriter out = response.getWriter();
        out.println("Hello there");

    } 
```

一切运作良好。然后我创建了2个这样的jsp页面：

```
<body>
    <form method="post" action="servletExample">
        <table border="0">
            <tr>
                <td>
                    First name:
                </td>
                <td>
                    <input type="text" name="firstname"/>
                </td>               
            </tr>
            <tr>
                <td>
                    Last name:
                </td>
                <td>
                    <input type="text" name="lastname"/>
                </td>               
            </tr>   
            <tr>
                <td colspan="2">
                    <input type="submit" value="Submit"/>
                </td>               
            </tr>
        </table>
    </form>
</body> 
```

和

```
<body>
    <%
        String firstName = (String)request.getAttribute("firstname");
        String lastName = (String)request.getAttribute("lastname");

        out.println(firstName+ " "+lastName);
    %>
</body> 
```

servlet 现在看起来像这样：

```
@WebServlet("/servletExample")
public class ServletExample extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { 

        String firstName=request.getParameter("firstname");
        String lastName=request.getParameter("lastname");

        if(firstName == null || lastName==null){
            getServletContext().getRequestDispatcher("/index.jsp").forward(request, response);
            return;
        }

        request.setAttribute("firstname", firstName);
        request.setAttribute("lastname", lastName);
        getServletContext().getRequestDispatcher("/output.jsp").forward(request, response);
    }
} 
```

当我运行它时，我看到了该表单，但是当我提交时，我看到了我 2 天前所做的示例中的“Hello there”。无论我做什么，我都看到了。我需要清洁什么？我错过了什么？

编辑：我使用 eclipse 和 tomcat 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:38:42.150

假设您在 Eclipse 中，停止 Tomcat 服务器，选择您的项目，在 Eclipse 的菜单中选择 Project，`Clean`然后选择`Build Project`. 然后重新启动 Tomcat 服务器并重试。

每次运行时，Eclipse 都会使用 Tomcat 的最后构建项目版本。您需要清理项目并为 Eclipse 和 Tomcat 重建它以刷新更改。

# c# - 如何从同一解决方案中的另一个项目获取项目的相对路径？

> ID：14989405
> 
> 赞同：2
> 
> 时间：2013-02-20T20:36:04.927
> 
> 标签：c#, .net

我的解决方案中有两个项目。我需要从第二个项目中的第一个项目获取图像文件的相对路径。我怎么能这样做？

已经尝试过[此资源](http://msdn.microsoft.com/en-us/library/aa970069%28v=vs.85%29.aspx#Resource_File_Pack_URIs___Referenced_Assembly)中的代码：

我从 ProjectA 引用 ProjectB 并使用它（在 ProjectA 中）：

```
@"/ProjectB;component/images/prod-2809854.jpg" 
```

不工作。

我知道我可以使用它（在 ProjectA 中）：

```
 AppDomain.CurrentDomain.BaseDirectory 
```

它将返回 ProjectA 的基本目录。我认为我可以解析字符串，获取解决方案目录并附`ProjectB/images/`加到它。

这是正确的方法吗？可以做得更好吗？

谢谢！

**编辑：**作为一个例子，我在控制台应用程序中运行代码（添加到同一个解决方案中，因为在这个阶段我无法测试我的 Windows 服务应用程序）。我需要获取图像相对路径：

```
// e.g. to check the GetMonitoringPath() method in main() in console app
Console.WriteLine(File.Exists(GetMonitoringPath())); 

public static string GetMonitoringPath()
    {
        return @"/WebStore;component/images/prod-2809854.jpg";
    } 
```

File.Exists() 返回 false，但文件存在，我确定 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:45:10.553

这对我有用

```
<img alt="" style="cursor:pointer" src="../../../Booking/images/plus.gif" /> 
```

输入 src 后，VS 会要求你选择你的 URL。

如果这不起作用，请发布有关您正在做什么的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:00:08.173

如果您想从控制台应用程序或服务访问 Web 项目中的文件，我会保持简单并将 Web 项目的路径存储在另一个项目的 app.config appSettings 中。

如果文件在编译期间存在，则可以使用嵌入式资源在项目之间共享文件。除此之外，需要使用某种路径（相对或其他）来引用其他文件夹。

# java - POST 请求到 AsyncTask 中的 REST 服务

> ID：14989406
> 
> 赞同：0
> 
> 时间：2013-02-20T20:36:12.940
> 
> 标签：java, android, oop

我正在编写一些适用于 REST 服务的小型 android 应用程序。响应的基本结构是： { result: "ok/error", message: "some string", entity: "either object or error description" }

每次响应是好的还是错误的，实体类型都不同。现在，我从 AsyncTask 调用服务，我需要将结果返回给 UI 线程。

我正在使用 gson 库从服务器反序列化 JSON。问题是我无法知道我得到了什么类型的响应（正常或错误）。

此外，AsyncTask 只能将单一类型返回给 UI 线程。下面是我能想到的一个例子。我需要声明我不是 java 程序员，我可能不知道所有的模式，也许我错过了一些东西。

无论如何，我会很高兴得到任何帮助。

```
public class RegisterProxyAsync extends AsyncTask<User, String, Object> {

@Override
protected Object doInBackground(User... params) {
    try {
        Gson gson = new Gson();
        String request = gson.toJson(params[0]);

        HttpClient client = new DefaultHttpClient();
        HttpPost postAction = new HttpPost("http://SomeServiceEndpoint/register");
        postAction.addHeader(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        postAction.setEntity(new StringEntity(request));

        HttpResponse response = client.execute(postAction);
        if (response != null) {
            InputStream stream = response.getEntity().getContent();
            String strResult = CharStreams.toString(new InputStreamReader(stream));
            try {
                UserResponse userResponse = gson.fromJson(strResult, UserResponse.class);
                return userResponse;
            } catch (Exception e) {
                ErrorResponse errorResponse = gson.fromJson(strResult, ErrorResponse.class);
                return errorResponse;
            }

            Log.e("debug", strResult);
        }
    } catch (Exception e) {
        // TODO:Handle exception
        e.printStackTrace();
    }

    return null;
}

@Override
protected void onPostExecute(Object result) {
    // TODO: execute some work
} 
```

}

编辑：我已更改服务器以返回正确的 HttpCodes（200 表示成功，400 表示错误）但是，我仍然遇到从 doinbackground 方法返回两种不同类型的对象的问题，一种用于错误，另一种用于成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:46:18.880

一个适当的 REST 服务应该包含一个 HTTP 响应代码，指示已处理请求的状态。如果您可以控制该服务，那么我建议您更改它以返回 40x 或 50x 代码的变体，以表明发生了错误。如果请求成功，服务应该只返回 200 OK。在您的客户端，您将根据状态代码解析响应（正常实体表示 200 ok，错误实体表示其他任何内容）。伪代码：

```
if(response.getStatusLine().getStatusCode() == 200) {
    UserResponse userResponse = gson.fromJson(strResult, UserResponse.class);
} else {
    ErrorResponse errorResponse = gson.fromJson(strResult, ErrorResponse.class);
} 
```

如果您出于某种原因无法更改服务器端，那么在您的客户端，您将不得不使用泛型`JsonObject`来解析响应。伪代码：

```
JSONObject jsonObj = new JSONObject(strResult);
if("ok".equals(jsonObj.get("result")) {
    return gson.fromJson(jsonObj.toString(), UserResponse.class);
} else {
    return gson.fromJson(jsonObj.toString(), ErrorResponse.class);
} 
```

# python - 在前导斜杠之前不丢弃的 os.path.join() ？

> ID：14989407
> 
> 赞同：10
> 
> 时间：2013-02-20T20:36:13.143
> 
> 标签：python, os.path

Python`os.path.join`被[描述为“几乎毫无意义”](https://stackoverflow.com/a/1945930/14420)，因为它会丢弃包含前导斜杠之前的任何参数。暂且不说这是有意的和记录在案的行为，是否有一个现成的函数或代码模式不会像这样丢弃？

给定`HOMEPATH=\users\myname`，以下将丢弃路径的开头

```
print os.path.join('C:\one', os.environ.get("HOMEPATH"), 'three') 
```

结果：

```
\Users\myname\three 
```

想要的：

```
C:\one\Users\myname\three 
```

被这个咬过几次了，我现在很擅长在我写的东西时注意到一个前导斜线，但是当你不知道传入的字符串是什么样子的时候呢，就像在这个例子中一样?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T20:40:04.893

也许......在每个参数（或第二个和后续）上`os.environ.get("HOMEPATH").lstrip(os.path.sep)`编写你自己的版本是微不足道的。`join`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T20:43:07.743

只需剥离斜线

```
path = os.environ.get("HOMEPATH").lstrip(os.path.sep)
os.path.join('C:\one', path, 'three') 
```

# android - Android拦截点击iframe链接-adbanner

> ID：14989410
> 
> 赞同：2
> 
> 时间：2013-02-20T20:36:18.033
> 
> 标签：android, iframe, webview, onclick, click

> 我正在开发一个可以呈现一些网站的应用程序。
> 
> 我正在使用 webview 来做到这一点，但我遇到了一个大问题。
> 
> 我无法拦截任何 iframe 内的点击，例如访问此网址：[http ://clikseguro.com/Search.aspx?q=android](http://clikseguro.com/Search.aspx?q=android)
> 
> 您将在左侧看到一个横幅，当我使用任何 PC 网络浏览器单击此横幅时，它们将在新选项卡或新窗口中打开。但在 android 上，我无法拦截此事件，并且页面加载到 iframe 中。
> 
> 反正有这个点击吗？
> 
> 此点击不调用 shouldOverrideUrlLoading
> 
> 我的 WebView 有 WebViewClient 和 WebChromeClient。
> 
> 谢谢

**我解决了它。**

你刚刚设置：

```
mWebView.getSettings().setSupportMultipleWindows(true); 
```

并覆盖

```
public boolean onCreateWindow(WebView v, boolean d, boolean u, Message r) 
```

因此，您可以在 iframe 中接收任何点击（链接、img、电子邮件）

谢谢

# scala - 表单问题将 play-2.0.4 迁移到 play-2.1.0

> ID：14989411
> 
> 赞同：0
> 
> 时间：2013-02-20T20:36:22.063
> 
> 标签：scala, migration, playframework-2.0

在尝试将一个项目从 play 版本 2.0.4 迁移到 2.1.0 时，我遇到了这个错误：

```
type mismatch found: play.api.data.Form[...]
              required: play.data.Form[...] 
```

在所有类型的 Form[...] 的所有控制器中。在控制器中它看起来像这样：

```
import play.api._
import data.Form
import data.Forms._

val someform = Form(
       tuple(
       "name" -> text,
       "email" -> text
       )
  ) 
```

视图开始如下：

```
@(form : Form[...]) 
```

所有这些都会引发上述错误，但仅限于使用 2.0.4 版本创建然后迁移到 2.1.0 的项目。并且使用 2.1.0 从头开始​​创建项目，所有这些都像魅力一样工作。为什么会这样？此外，如果我在（已迁移项目的）视图中指定完全限定名称，例如：

```
@(form : play.api.data.Form[...])  it works fine.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:44:29.477

您必须`javaCore`从您的 appDependencies 中删除`Build.scala`. 否则 Play 会将您的项目视为**Java**项目，这意味着您的模板需要 Java API，在您的情况下，`play.data.Form`而不是 Scala API `play.api.data.Form`。

请注意，这种行为与 2.0.x 不同，在 2.0.x 中您可以毫无问题地混合使用 Java 和 Scala。

# javascript - 当请求的 ID 不存在时如何避免空记录？（余烬）

> ID：14989412
> 
> 赞同：0
> 
> 时间：2013-02-20T20:36:23.613
> 
> 标签：javascript, model-view-controller, ember.js, ember-data

我有以下模型（针对这个问题进行了简化）：

```
App.Manager = DS.Model.extend({
  name: DS.attr('string'),

  teamMembers: DS.hasMany('App.Employee')
}); 
```

当这个模型被加载（比如说`App.Manager.find(1)`）时，它会从我的服务器返回一个 teamMembers 数组：

```
[10, 11, 12] 
```

我的视图需要来自这些团队成员的数据，因此 Ember 会`findMany()`按预期自动通过请求加载它们。我遇到的问题是员工 #11 不存在。`findMany()`服务器仅使用员工 10 和 12响应请求：

```
{
  "employees": [
    {
      "id":   10,
      "name": "John Doe"
    },

    {
      "id":   12,
      "name": "Jane Doe"
    }
} 
```

但是，Ember-Data 似乎仍然为员工 11 保留了一个空的（且已实现的）承诺，即使该员工的数据从未返回。所以现在当我的视图呈现时，我得到一个有 3 行的表（每个员工一个），其中一行是完全空白的（因为记录是空的）。

检查记录的状态：

```
{
    isLoaded:  true,
    isDirty:   false,
    isSaving:  false,
    isDeleted: false,
    isError:   false,
    isNew:     false,
    isValid:   true
} 
```

所以，我不确定如何在不检查我需要的每个属性是否为空的情况下将这个空记录保留在我的视野之外。服务器有没有办法响应告诉 ember 不要履行这个承诺？有没有办法配置 ember 以识别何时不返回数据？

* * *

**编辑：**我意识到，理想情况下，服务器不会为不存在的员工返回 ID。但现实情况是，有时数据不可靠或维护不善。如果员工 11 返回的数据不准确，那么我同意问题出在数据和/或服务上，而不是 Ember。但是，在这种情况下，员工 11 没有返回不准确的数据，它根本没有返回任何*数据*。在这种情况下，在我看来，ember 至少应该设置一个标志（即 isValid：false），指示记录为空/无效/未找到，如果不是完全销毁对空记录的引用。

**编辑 2**：这是[Github 上的一个问题](https://github.com/emberjs/data/issues/839)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:33:31.477

很难说 Ember-data 是否应该尝试为这种情况提供一些魔力。通过在关系中包含 ID，您有效地告诉 ember-data 它存在。

REST 适配器（从服务器请求数据）与序列化程序（将响应数据转换为模型）是分开的，因此很难知道是否所有请求的数据都实际返回了。如果您不介意将适配器紧密耦合到序列化程序，您可以验证服务器是否为您提供了您所期望的一切。

**解决方法：**

将验证属性添加到您的员工模型以用作一种伪状态。这应该默认为 false 或 null 并且您的 API 返回的每条记录都必须覆盖它。相当骇人听闻。幸运的是，可以使用现有属性（例如员工姓名）来实现相同的概念。

`if (App.Employee.find(11).get('name') != null) { dance('thriller'); }`

如果您将上述概念视为标准验证要求，您可以选择在模型或序列化程序中实现它。

# css - 显示：块不工作

> ID：14989417
> 
> 赞同：1
> 
> 时间：2013-02-20T20:36:39.217
> 
> 标签：css, block

我正在尝试设置完全可点击的导航链接（使用列表）。但是，现在只有文本和图像是可点击的。显示块似乎不起作用。

这是最终结果：[http ://rec.wordpress.uconn.edu](http://rec.wordpress.uconn.edu)

```
#program-buttons {
display:block;
width:100%;
height:65px;
background-color:#cccccc;   
}
.program-button {
display:block;
float: left;
font-size: 14px;
height: 45px;
line-height: 17px;
list-style-type: none;
margin:0;
padding: 10px;
width: 208px;
vertical-align:middle;
border-left: solid 1px #ffffff;
border-right: solid 1px #8C8C8C;
transition: background 0.4s ease;
-webkit-transition: background 0.4s ease;
-o-transition: background 0.4s ease;
-moz-transition: background 0.4s ease;
 }
.program-button:hover {
background-color:#202631;
}

#program-buttons .program-button a {
display:block;
color:#fff;
font-weight:bold;
}
#program-butt ons .program-button a:hover {
text-decoration:none;
}

#program-buttons img {
background-clip: border-box;
background-color: rgba(0, 0, 0, 0);
background-image: none;
background-origin: padding-box;
border-bottom-color: rgb(255, 255, 255);
border-bottom-style: solid;
border-bottom-width: 1px;
border-left-color: rgb(255, 255, 255);
border-left-style: solid;
border-left-width: 1px;
border-right-color: rgb(255, 255, 255);
border-right-style: solid;
border-right-width: 1px;
border-top-color: rgb(255, 255, 255);
border-top-style: solid;
border-top-width: 1px;
box-shadow: rgba(0, 0, 0, 0.199219) 1px 2px 2px 0px;
color: rgb(46, 44, 42);
cursor: auto;
display: block;
float: left;
height: 45px;
list-style-type: none;
margin-right: 10px;
margin-top: 0px;
text-align: -webkit-auto;
text-decoration: none;
text-shadow: 
rgba(255, 255, 255, 0.296875) 0px 1px 0px;
width: 60px;
}

<ul id="program-buttons" class="clearfix">
   <li class="program-button"><a href="#"><img src="http://www.recsports.ufl.edu/images/uploads/KanJam_thumbnail_1.jpg" width="60" height="45" alt="Title"> <span>Intramural<br> Sports</span></a></li>
   <li class="program-button"><a href="#"><img src="/images/uploads/KanJam_thumbnail_1.jpg" width="60" height="45" alt="Title"> <span>BodyWise</span></a></li>
   <li class="program-button"><a href="#"><img src="/images/uploads/KanJam_thumbnail_1.jpg" width="60" height="45" alt="Title"> <span>UConn<br> Outdoors</span></a></li>
   <li class="program-button"><a href="#"><img src="/images/uploads/KanJam_thumbnail_1.jpg" width="60" height="45" alt="Title"> <span>Drop-In<br> Rec</span></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:39:50.060

问题是您的`li`标签有 10 像素的填充。而是将该填充移至`a`标签。

编辑：并删除固定高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:43:36.513

实际上我认为你误解了什么`display:block`。您的`li`项目将永远无法点击，这不是他们的目的。您需要对`a`元素进行样式设置，以便它们占用您的`li`元素现在所做的所有空间。

简单的解决方案是从元素中删除“程序按钮”类`li`，并将其应用于`a`元素。这将直接在链接上完成所有样式，无需进一步更改（在您网站上的 Chrome 上检查）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:44:24.637

我建议您将`width:100%`和添加`height:100%`到您的`href`.

```
li.program-button a {
  ... etc ...
  display: block;
  width: 100%;
  height: 100%;
} 
```

如果您希望整个按钮区域都是可点击的，请考虑将填充从您`LIs`的`href`.

```
li.program-button {
  ... etc ...
  width: 228px;
  height: 65px;
  padding: 0px;
}

li.program-button a {
  ... etc ...
  display: block;
  width: 100%;
  height: 100%;
  padding: 10px;
} 
```

# php - 我正在使用 codeigniter 2.1.3，我在 /home 文件夹中有网站外部的图像，无法显示图像

> ID：14989419
> 
> 赞同：0
> 
> 时间：2013-02-20T20:36:40.213
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用 Codeigniter 2.1.3，我在 /home 文件夹中有网站外部的图像，无法显示图像。

```
 <img src="<?php echo img('/home/pedro/iagora.jpg');?>" title="" alt="avatar_<?php echo $project['id']; ?>" width="120" height="80"/> 
```

我努力了：

```
 <img src="<?php echo '/home/pedro/iagora.jpg';?>" title="" alt="avatar_<?php echo $project['id']; ?>" width="120" height="80"/> 
```

和：

```
 <img src="/home/pedro/iagora.jpg" title="" alt="avatar_<?php echo $project['id']; ?>" width="120" height="80"/> 
```

但这些都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:14:55.513

I suggest you to create the folder "assets" in your base folder. In "assets" you will store js, css, uploads images and all others. In this form you can organize better your aplication

And after that, you can load the images with base_url(). for example:

```
<img src="<?php echo base_url(); ?>assets/your_folder/your_image.jpg" title="" alt="avatar_<?php echo $project['id']; ?>" width="120" height="80" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:54:34.010

i saved the script file on the root of the website and now its working

```
<img src="<?php echo base_url().'get_image.php?i='.$images_thumb_dir.$project['avatar'];?>" title="" alt="avatar_<?php echo $project['id']; ?>" width="120" height="80"/> 
```

thanks Pedro

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:41:18.177

如果这些文件位于 Web 根目录之外，则您无法正常通过 HTTP 访问它们。您需要编写一个 PHP 脚本来为您输出图像：

```
<img src="/get_image.php?i=iagora.jpg" title=""> 
```

`/get_image.php`将是检索图像并为您输出的 PHP 文件。该`i`参数将是您想要的图像的名称。

该文件看起来像：

```
<?php
    $file_name = $_GET['i'];
    $file = '/home/pedro/' . $file_name;

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
?> 
```

# rvm - 配置 rvm 和“未安装捆绑程序”时出现问题

> ID：14989422
> 
> 赞同：0
> 
> 时间：2013-02-20T20:36:45.667
> 
> 标签：rvm, bundler

我是一个新手，对 rvm 有很大的问题。`bundle install`给我错误

```
`ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

即使我知道它*已*安装，但如果我运行`gem list -l`. 我怀疑这会返回一个系统 gem 列表，这表明 rvm 绝对是问题所在。再试`gem install bundler`一次也没有用。我环顾了其他有类似问题的人，但找不到对我所处的任何情况都有帮助的答案。`rvm info`给了我这个输出：

```
# rvm info

system:

  system:
    uname:       "Linux box576.bluehost.com 2.6.32-20130101.60.1.bh6.x86_64 #1 SMP Tue Jan 1 22:59:09 EST 2013 x86_64 x86_64 x86_64 GNU/Linux"
    system:      "unknown/libc-2.12/x86_64"
    bash:        "/ramdisk/bin/bash => GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)"
    zsh:         "/usr/bin/zsh => zsh 4.3.10 (x86_64-redhat-linux-gnu)"

  rvm:
    version:      "rvm 1.18.8 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "22 hours 59 minutes ago"

  homes:
    gem:          "/home7/contenw6/ruby/gems"
    ruby:         "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194"

  binaries:
    ruby:         "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin/rake"

  environment:
    PATH:         "/usr/local/jdk/bin:/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@projecta/bin:/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@global/bin:/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin:/home7/contenw6/.rvm/bin:/home7/contenw6/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home7/contenw6/ruby/gems/bin:/home7/contenw6/bin"
    GEM_HOME:     "/home7/contenw6/ruby/gems"
    GEM_PATH:     "/home7/contenw6/ruby/gems:/usr/lib/ruby/gems/1.8"
    MY_RUBY_HOME: "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

如果我做`rvm use 1.9.3-p194@projecta --default`环境部分现在看起来像这样：

```
 environment:
    PATH:         "/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@projecta/bin:/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@global/bin:/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/bin:/home7/contenw6/.rvm/bin:/usr/local/jdk/bin:/home7/contenw6/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home7/contenw6/ruby/gems/bin:/home7/contenw6/bin"
    GEM_HOME:     "/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@projecta"
    GEM_PATH:     "/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@projecta:/home7/contenw6/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/home7/contenw6/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "projecta" 
```

但是当我登录并重试时，它会恢复到上面的第一个输出。我显然在某个地方搞砸了，我不知道如何修复我的安装或问题出在哪里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:12:55.140

这看起来像您以前的 ruby​​ 设置，请检查您的`~/.bashrc`或`~/.zshenv`可能包含上述路径的任何变量集

如果您没有找到任何东西，请尝试签入`/etc`：

```
grep -rn "/home7/contenw6/ruby/gems" /etc 
```

从评论更新：

```
sed -i'' '/GEM_HOME=/ d;' ~/.bashrc
rm ~/.gemrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:35:05.753

这个对我有帮助

```
cd ~/.rvm/bin
rm bundle 
```

然后返回到你的项目文件夹安装一个 bundler gem 并运行 bundle w/o 问题

# ios - iOS iPod API - 获取实际歌曲文件

> ID：14989423
> 
> 赞同：3
> 
> 时间：2013-02-20T20:36:53.693
> 
> 标签：ios, api, file, ipod

在我的应用程序中，我想展示媒体选择器，让用户选择一首歌曲，然后获取它的实际 MP3（或任何其他格式，只要它可由其他 iOS 设备播放）文件。

怎么可能实现？我如何才能用歌曲文件实际创建一个对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T21:41:44.417

我不知道为什么每个人都说这么多关于被应用商店拒绝的废话。我将为您简要介绍如何开始。

- 呈现媒体选择器以打开用户的 iPod：

```
MPMediaPickerController *pickerController = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeMusic];
pickerController.prompt = NSLocalizedString(@"Choose Song", NULL);
pickerController.allowsPickingMultipleItems = NO;
pickerController.delegate = self;
[self presentViewController:pickerController animated:YES completion:nil];
[pickerController release]; 
```

- 等到用户选择一首歌曲并在 mediaPicker 委托中获取回调：

```
 - (void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{
    MPMediaItem *theChosenSong = [[mediaItemCollection items]objectAtIndex:0];
    NSString *songTitle = [theChosenSong valueForProperty:MPMediaItemPropertyTitle];
    NSString *artist = [theChosenSong valueForProperty:MPMediaItemPropertyArtist];

   //then just get the assetURL
    NSURL *assetURL = [theChosenSong valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset  *songAsset  = [AVURLAsset URLAssetWithURL:assetURL options:nil];

  //Now that you have this, either just write the asset (or part of) to disk, access the asset directly, send the written asset to another device etc

} 
```

# c# - 创建一个类的新实例，调用一个方法，并将其返回值转换为一行

> ID：14989432
> 
> 赞同：0
> 
> 时间：2013-02-20T20:37:16.563
> 
> 标签：c#

是否可以创建一个类的新实例、调用一个方法并将其返回值转换为一行？

我正在尝试在一行中执行以下操作：

```
var converter = new ColorConverter();
return (Color)converter.ConvertFromString("#FFDFD991"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:39:10.723

```
return (Color)(new ColorConverter()).ConvertFromString("#FFDFD991"); 
```

从我所见，看起来 ConvertFromString() 可能会变成一个静态方法，在这种情况下，您可以像这样简单地调用它：

```
return (Color)ColorConverter.ConvertFromString("#FFDFD991"); 
```

# c# - 二元运算符 Or 没有为类型“DAL.Tag”和“System.Boolean”定义

> ID：14989436
> 
> 赞同：1
> 
> 时间：2013-02-20T20:37:31.750
> 
> 标签：c#, linq, entity-framework, exception-handling

我创建了一个通用存储库类，如下所示：

```
public abstract class Repository<TEntity, TIdentifier> : IRepository<TEntity, TIdentifier> where TEntity : class
{
    //TEntity is type of DBSet and TIdentifier is name of SQL Table's Id column
    protected Repository(DbContext context)
    {
        Context = context;
        DBSet = Context.Set<TEntity>();
    }
} 
```

在这个类中，我们有一个名为`SelectAll`如下的方法：

```
[DataObjectMethod(DataObjectMethodType.Select, true)]
public IEnumerable<TEntity> SelectAll(IEnumerable<TIdentifier> ids, List<string> includeNavigationProperties = null)
{
    ParameterExpression parameter = Expression.Parameter(typeof(TEntity), "entity");
    MemberExpression leftParam = Expression.MakeMemberAccess(parameter, typeof(TEntity).GetProperty(IdentifierColumn));
    Expression body = parameter;
    foreach (TIdentifier identifier in ids)
    {
        var rightParam = Expression.Constant(identifier);
        body = Expression.Or(body, Expression.Equal(leftParam, rightParam));//Exception
    }
    return (IEnumerable<TEntity>) DBSet.Select(Expression.Lambda<Func<TEntity, bool>>(body, parameter));
} 
```

如您所见，我想选择所有带有 Id 列的行`IEnumerable<TIdentifier> ids`。但是出现了以下异常：

> 二元运算符 Or 没有为类型“DAL.Tag”和“System.Boolean”定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:34:29.930

如果你在纸上执行你的逻辑，你会得到类似的东西

1.  表达式 = 实体
2.  表达式 = 实体或（参数 = ids[0]）或（参数 = ids[1]）...

可能不是你的意思，除非 Entity 恰好是一个布尔值。

# javascript - 如何将字符串值从 javascript 传递到 ASHX 中的函数

> ID：14989443
> 
> 赞同：0
> 
> 时间：2013-02-20T20:37:57.930
> 
> 标签：javascript, ajax, parameters, ashx

我使用此代码将参数从 jQuery 传递到 ASHX，实际上我想使用 Uploadify 插件上传文件并将名为“Id”的参数发送到 ASHX

```
function CallHandler() {
    $.ajax({
        url: "PIU.ashx/MyMethod",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: { 'Id': '10000' },
        responseType: "json",
        success: OnComplete,
        error: OnFail
    });
    return false;
}

function OnComplete(result) {
    alert(result);
}
function OnFail(result) {
    alert('Request Failed');
} 
```

这个 ASHX 代码：

```
public void ProcessRequest(HttpContext context)
{
    var employee = Convert.ToInt32(context.Request["Id"]);

    JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
    string serEmployee = javaScriptSerializer.Serialize(employee);
    context.Response.ContentType = "text/html/plain";
    context.Response.Write(serEmployee);

    parent MyParent = (parent)context.Session["mahdZNUparent"];

    //the file data is the file that posted by Uploadify plugin
    HttpPostedFile PostedFile = context.Request.Files["Filedata"];

    string FileName = PostedFile.FileName; // whene i comment this line, the code works
    // properly, but when uncomment this line, the code get to 'Request Failed'
}

public bool IsReusable
{
    get
    {
        return false;
    }
} 
```

我怎么解决这个问题！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:44:59.120

您可能想在此掠夺：[http ://encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

还有这个：[Using jQuery for AJAX with ASP.NET Webforms](https://stackoverflow.com/questions/202538/using-jquery-for-ajax-with-asp-net-webforms)

# ios - UIActivityIndi catorView 显示在键盘下方

> ID：14989448
> 
> 赞同：1
> 
> 时间：2013-02-20T20:38:04.963
> 
> 标签：ios, objective-c, uialertview, uiactivityindicatorview

在静态库（lib.a）中，我`NavigationController`在 Storyboard 中有一个在点击按钮后启动的：

```
[mainWindow.rootViewController presentViewController:newController animated:NO completion:Nil]; 
```

在其中`newController`我有一个`UITextField`我设置`becomeFirstResponder`的`viewDidLoad`按钮和另一个按钮，当我点击它时我想显示一个`UIAlertView`，在按下“确定”后应该`UIActivityIndicatorView`在所有东西（包括键盘）的顶部显示一个。

用于显示的代码`UIActivityIndicatorView`如下

```
UIWindow *mainWindow = [[UIApplication sharedApplication] keyWindow];
spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
spinner.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                            UIViewAutoresizingFlexibleRightMargin |
                            UIViewAutoresizingFlexibleTopMargin |
                            UIViewAutoresizingFlexibleBottomMargin);
spinner.center = CGPointMake(CGRectGetWidth(mainWindow.bounds)/2, CGRectGetHeight(mainWindow.bounds)/2);
spinner.frame = mainWindow.bounds;
spinner.backgroundColor = [UIColor darkGrayColor];
spinner.alpha = 0.7f;
[mainWindow addSubview:spinner]; 
```

每当用户点击按钮时，我都会执行以下操作：

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Confirmation"
                                                      message:@"Are you sure?"
                                                     delegate:self
                                            cancelButtonTitle:@"No"
                                            otherButtonTitles:@"Yes", nil];
[message show]; 
```

当被点击时，我有一个简单的方法：

```
//Initializing spinner
[spinner startAnimating];

 //Execute NSURL Connection.... 
```

问题是`UIActivityIndicatorView`键盘顶部没有显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:44:10.663

尝试添加后

```
[mainWindow addSubview:spinner]; 
```

就像是

```
[mainWindow bringSubviewToFront:spinner]; 
```

尝试将此视图用作 UIActivityIndi​​catorView 的超级视图

```
- (UIView *)keyboardView {
    NSArray *windows = [[UIApplicatio sharedApplication] windows];
    for (UIWindow *window in [windows reverseObjectEnumerator]) {
        for (UIView *view in [window subviews]) {
            if (!strcmp(object_getClassName(view), "UIKeyboard"))  {
                return view;
            }
        }
    }

    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:09:14.827

在显示指标之前将 设置`UIActivityIndicatorView`为窗口的最前面的子视图

添加代码：`[mainWindow bringSubviewToFront:spinner];`之前`[spinner startAnimating];`

# c# - String.Format() 不调用自定义格式化程序

> ID：14989452
> 
> 赞同：1
> 
> 时间：2013-02-20T20:38:14.930
> 
> 标签：c#, string-formatting

我指定了一个自定义格式化程序，基本上是这样的：

```
public class NotationNumericFormatter : IFormatProvider, ICustomFormatter
{
    public object GetFormat(Type formatType_)
    {
      return (formatType_ == typeof(ICustomFormatter) ? this : null;
    }

    public string Format(string format_, object arg_, IFormatProvider formatProvider_)
    {
       if (!Equals(formatProvider_) || arg_ == null)  // <-- I put a breakpoint here...
       {
         return;
       }

       // then a bunch of stuff happens here.
    }
} 
```

目前让我难过的是，以下代码：

```
// _myFormatter is a NotationNumericFormatter which gets instanced 
// in the ctor of the class in question.
var result = string.Format(_myFormatter, (parameter_ ?? "").ToString(), value_); 
```

`Format()`在我的格式化程序方法中，这永远不会打到第一行。我在这里想念什么？`string.Format`我错过了一些微妙之处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:14:45.833

如果参数没有 {0} 则格式化程序不会断点

这将断点

```
var result = string.Format(_myFormatter, "{0}", value_); 
```

这不会

```
var result = string.Format(_myFormatter, "", value_); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:13:32.503

当您调用 String.Format(IFormatProvider provider , String format , params Object[] args ) 时，第二个参数 format 必须指定为有效的格式字符串，即它不能为空。

尝试将 parameter_ 设置为“{0}”之类的内容，然后它应该可以工作。

# php - curl 并重定向到 ssl 站点

> ID：14989456
> 
> 赞同：3
> 
> 时间：2013-02-20T20:38:31.963
> 
> 标签：php

我有一段代码使用 curl 执行发布 http 请求并返回输出。我正在发出发布请求的网站具有从 http 到 https 的重定向。

当我向 https 端口发出 post 请求时，一切正常。当我对 http 端口执行相同的请求（并被重定向到 https 端口）时，我得到一个空字符串。拜托，谁能告诉我为什么它不起作用以及如何正确地做到这一点。

执行 post 请求的函数：

```
function curl_query($url, $username, $password, $payload) {
    $additionalHeaders = "";
    $process = curl_init($url);
    curl_setopt($process, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded',$additionalHeaders));
    curl_setopt($process, CURLOPT_HEADER, false);
    curl_setopt($process, CURLOPT_USERPWD, $username . ":" . $password);
    curl_setopt($process, CURLOPT_TIMEOUT, 30);
    curl_setopt($process, CURLOPT_POST, 1);
    curl_setopt($process, CURLOPT_POSTFIELDS, $payload);
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($process, CURLOPT_MAXREDIRS, 4);
    curl_setopt($process, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false);
    $return = curl_exec($process);
    return $return;
} 
```

将查询从端口 80 重定向到端口 443 的 .htaccess 条目：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

**更新** 经过一些调试后，我发现在初始 POST 并被重定向到新位置之后 curl 正在发送 GET 请求。是否可以将初始 POST 重新发送到新位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T23:05:47.220

今天遇到同样的问题，首先认为这是 curl 的错误。然而，在深入研究之后，我发现 RFC 2616 声明了以下关于重定向 POST 请求的内容：

301 - 永久移动：

> 如果收到 301 状态代码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出请求的条件。
> 
> > 注意：当收到 301 状态码后自动重定向 POST 请求时，一些现有的 HTTP/1.0 用户代理会错误地将其更改为 GET 请求。

302 - Found: > 如果收到 302 状态码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出了请求。> >> 注意：RFC 1945 和 RFC 2068 指定不允许客户端更改重定向请求的方法。然而，大多数现有的用户代理实现将 302 视为 303 响应，无论原始请求方法如何，都对 Location 字段值执行 GET。状态码 303 和 307 已被添加用于希望明确明确期望客户端做出何种反应的服务器。
303 - 请参阅其他：> 可以在不同的 URI 下找到对请求的响应，并且应该在该资源上使用 GET 方法检索。此方法的存在主要是为了允许 POST 激活脚本的输出将用户代理重定向到选定的资源。新的 URI 不是原始请求资源的替代引用。
307 - 临时重定向 > 如果收到 307 状态代码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出了请求。
来源：https://www.rfc-editor.org/rfc/rfc2616#section-10.3.2（第62-65页）

因此，知道 curl 不能询问用户任何事情，对于 301 和 302 重定向，POST 转换为 GET 似乎是合理的（即使根据 RFC 这不是 100%）。

幸运的是，自 curl 7.19.1 (php 5.3.2) 以来，可以选择强制 curl 保留 POST 方法进行重定向：

**CURLOPT_POSTREDIR**

> 如果在设置 CURLOPT_FOLLOWLOCATION 并发生特定类型的重定向时应维护 HTTP POST 方法，则位掩码为 1（301 永久移动）、2（302 找到）和 4（303 请参阅其他）。

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

所以例子：

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_POSTREDIR, 7);
$response = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T16:03:38.523

使用“CURLOPT_UNRESTRICTED_AUTH: true”继续向重定向请求发送身份验证参数。

使用“CURLOPT_POSTREDIR: true”继续向重定向请求发送带有 POST 参数的 POST 类型请求。

这些选项在@Arthur 链接中进行了描述：http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# xsd - 无法找到一种方法来创建将随机订单项与条件匹配的 XML 模式

> ID：14989457
> 
> 赞同：0
> 
> 时间：2013-02-20T20:38:39.267
> 
> 标签：xsd

我们试图找到一种方法来建立一个可以验证某些规则的模式，但是我们尝试了 xs:all、xs:choice、xs:group 和 xs:sequence 的各种组合，但没有成功。规则基本上是这样的：

1.  应该只出现一次 LICAPPIN01 元素
2.  LICAPPIN99 元素应该只出现一次
3.  应该有相同数量的 LICAPIN30 和 LICAPIN31
4.  应该有相同数量的 LICAPIN40 和 LICAPIN41
5.  至少需要一组 LICAPPIN30/31 或 LICAPPIN40/41（两者都可以）
6.  对于上述所有内容，顺序无关紧要 - 任何顺序都可以接受

我们尝试过的最简单的模式是这样的：

```
<?xml version="1.0" standalone="yes"?>
<xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="NewDataSet">
    <xs:complexType>
      <xs:choice  minOccurs="1" maxOccurs="unbounded">
        <xs:element name="LICAPPIN01" minOccurs="1" maxOccurs="1">
        </xs:element>
        <xs:element name="LICAPPIN30" minOccurs="1" maxOccurs="unbounded">
        </xs:element>
        <xs:element name="LICAPPIN31" minOccurs="1" maxOccurs="unbounded">
        </xs:element>
        <xs:element name="LICAPPIN40" minOccurs="1" maxOccurs="unbounded">
        </xs:element>
        <xs:element name="LICAPPIN41" minOccurs="1" maxOccurs="unbounded">
        </xs:element>
        <xs:element name="LICAPPIN99" minOccurs="1" maxOccurs="1">
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

这有很多问题：

*   它允许多个 LICAPPIN01 和 LICAPPIN99 （替换为 xs:all 可能会解决此问题？）
*   它不执行规则 3 和 4
*   对于规则 5，它似乎强制 LICAPPIN30/31 和 LICAPPIN40/41 当它应该只能有两组中的一组时

我们还为 LICAPPIN30/31 和 LICAPPIN40/41 尝试了使用 xs:group 的更复杂的方法，但它违反了规则 6。

知道这是否有可能满足我们所有的基本规则吗？在一个相对简单的 Schema 中。在上面的示例中，我删除了每个 LICAPPINnn 元素中的所有细节——它们每个都包含复杂类型，理想情况下，我们不希望在多个地方重复这些内容。

谢谢，丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:37:07.483

编写一个内容模型来满足您的所有要求并不容易，但很容易满足除最后一个要求之外的所有要求。

如果元素顺序的变化对于传达必要的信息至关重要，那么最好的办法是使用 XSD 1.1 或 Schematron 中的断言。如果元素顺序的变化没有传达任何信息，那么您可以选择声明顺序变化毕竟不是要求。我最推崇的词汇设计权威一致地表示，如果孩子的顺序不能传达信息，那么没有理由不修复它。

这是一个满足您列出的所有要求的内容模型，除了最后一个：

```
<xs:complexType>
  <xs:sequence>
    <xs:element name="LICAPPIN01"/>
    <xs:choice maxOccurs="unbounded">
      <xs:sequence>
        <xs:element name="LICAPPIN30"/>
        <xs:element name="LICAPPIN31"/>
      </xs:sequence>
      <xs:sequence>
        <xs:element name="LICAPPIN40"/>
        <xs:element name="LICAPPIN41"/>
      </xs:sequence>
    </xs:choice>        
    <xs:element name="LICAPPIN99"/>
  </xs:sequence>
</xs:complexType> 
```

# android - 如何获取在 android Gallery 中列出的应用程序

> ID：14989460
> 
> 赞同：1
> 
> 时间：2013-02-20T20:38:46.813
> 
> 标签：android, android-gallery

我正在开发一个 android 应用程序，该应用程序向用户提供图像，以便可以对其进行操作。

该应用程序还有一个处理图像的图像池。

我的意图是将这些图像列在 android 内置图库中，我希望该应用程序能够像 facebook 或 Picasa 一样被图库识别。基本上想列在这里。

[这里](https://stackoverflow.com/questions/14906081/syncing-photos-in-android-gallery)提出了一个类似的（我认为相关的）问题，但没有答案。

![在此处输入图像描述](../Images/a4466561caee237842c4e55567b71a69.png)

为了实现这一目标，我必须编写什么代码？

# javascript - jQuery点击过滤列表

> ID：14989464
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:38:59.377
> 
> 标签：javascript, jquery, html-lists

抱歉，但我对 js 还很陌生。基本上我在顶部有主导航（#filter），然后我有 3 个进一步的列表（`#one`和`#two`）`#three`。

我想要做的是当点击所有它显示所有列表项来自`#one`，`#two`和`#three`。然后当点击`One`它时，它只显示列表项 from `#one`，`Two`from`#two`和`Three`from `#three`。

这是帮助的标记。

```
<ul id="filter">
  <li class="current">
    <a href="#">All</a>
  </li>
  <li>
    <a href="#">One</a>
  </li>
  <li>
    <a href="#">Two</a>
  </li>
  <li>
    <a href="#">Three</a>
  </li>
</ul>

<ul id="one">
  <li>
    <a href="#">1</a>
  </li>
  <li>
    <a href="#">1</a>
  </li>
</ul>

<ul id="two">
  <li>
    <a href="#">2</a>
  </li>
  <li>
    <a href="#">2</a>
  </li>
</ul>

<ul id="three">
  <li>
    <a href="#">3</a>
  </li>
  <li>
    <a href="#">3</a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:42:39.363

```
$(function() {
    $('#filter a').on('click', function(e) {
        e.preventDefault();
        var clicked = $.trim( $(this).text().toLowerCase() );
        if ( clicked == 'all' ) {
            $('#one, #two, #three').show();
        }else{
            $('#one, #two, #three').hide();
            $('#' + clicked).show();
        }

        $(this).closest('li')
               .addClass('current')
               .siblings()
               .removeClass('current');
    });
}); 
```

# c# - 通过代码进行 Nhibernate 映射 - 扩展子类

> ID：14989465
> 
> 赞同：1
> 
> 时间：2013-02-20T20:38:59.873
> 
> 标签：c#, fluent-nhibernate

在以下[问题/答案](https://stackoverflow.com/questions/311318/nhibernate-inheritance-mapping-when-sub-class-in-separate-assemblly)中，答案显示了如何`extends="BaseClass"`在 XML 中进行操作。如何在按代码映射中做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:32:22.813

代码映射将在将它们添加到配置时生成序列化映射，因此不需要显式指定扩展。

# javascript - JQuery Cycle 插件 - 主图像下方带有缩略图的寻呼机

> ID：14989474
> 
> 赞同：0
> 
> 时间：2013-02-20T20:39:26.873
> 
> 标签：javascript, jquery, html, css, jquery-cycle

我正在开发 jQueryCycle 插件，以获取带有主图像下方缩略图的寻呼机。这是我工作的教程。 [http://digitalunion.osu.edu/2011/10/18/jquery-cycle-plugin-a-little-tutorial/](http://digitalunion.osu.edu/2011/10/18/jquery-cycle-plugin-a-little-tutorial/)

下面是我正在处理的 jQuery 代码

```
$(document).ready(init);

function init() {
// dynamically add a div to hold the slideshow's pager
$(".bison_images").before('<div class="pager"></div>');

// now to use the cycle plugin
$(".bison_images").cycle({
    pause: 1,
    pager: ".pager",
    pagerAnchorBuilder: imagePager
}); 
 }

  function imagePager(index, slide) {
var slide = jQuery(slide);
var img = slide.children("img").get(0);
return '<a href="#"><img src="' + img.src + '" width="110" height="66" /></a>'; 
 } 
```

在这里，我得到了与上面粘贴的示例链接中所示相同的输出。但我想要主图像下方的寻呼机。我用以下命令尝试过，但没有成功。

```
 $(".bison_images").after('<div class="pager"></div>'); 
```

任何人都可以建议我解决方案。

拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:19:16.997

```
enter code here 
```

检查这个工作...

```
 $('.bison_images').after('<div class="pager">').cycle({
            fx:     'scrollHorz',
            speed:  'slow',
            timeout: 9000,
            pager:  '.pager',
            pagerAnchorBuilder: function(idx, slide) {
   var slide = jQuery(slide);
   var img = slide.children("img").get(0);
   return '<a href="#"><img src="' + img.src + '" width="110" height="66" /></a>';
}
        }); 
```

# java - 通过 getMemoryMXBean() 和 jvisualvm 获得的内存使用量之间的差异？

> ID：14989476
> 
> 赞同：2
> 
> 时间：2013-02-20T20:39:33.380
> 
> 标签：java, profiling, mbeans, jvisualvm

尝试通过以下代码监控我自己的程序的内存使用情况时

```
public static String heapMemUsage() 
{
    long used = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
    long max = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getMax();
    return ""+used+" of "+max+" ("+ used/(double)max*100.0 + "%)";
} 
```

我得到的结果与通过 jvisualvm 看到的略有不同（`17 588 616`在我的程序中与`18 639 640`在 jvisualvm 中）。我知道这没什么大不了的，但它确实让我思考。

这个事实有什么解释吗？

如果可能的话，我想使用编码版本，但如果它的结果​​在某种程度上有偏差，jvisualvm 在某种程度上更可信，我将不得不坚持使用 jvisualvm。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:19:42.593

VisualVM 确实使用相同的方法来获取所需的值，让我们检查[MonitoredDataImpl.java](http://java.net/projects/visualvm/sources/svn/content/trunk/visualvm/jvm/src/com/sun/tools/visualvm/jvm/MonitoredDataImpl.java?rev=3190)：

```
MonitoredDataImpl(Jvm vm,JmxSupport jmxSupport,JvmMXBeans jmxModel) {
    //...
    MemoryUsage mem = jmxModel.getMemoryMXBean().getHeapMemoryUsage();
    MemoryPoolMXBean permBean = jmxSupport.getPermGenPool();    
    //...
    genCapacity = new long[2];
    genUsed = new long[2];
    genMaxCapacity = new long[2];
    genCapacity[0] = mem.getCommitted();
    genUsed[0] = mem.getUsed();

    genMaxCapacity[0] = mem.getMax();

    if (permBean != null) {
        MemoryUsage perm = permBean.getUsage();
        genCapacity[1] = perm.getCommitted();
        genUsed[1] = perm.getUsed();
        genMaxCapacity[1] = perm.getMax();
    }
  } 
```

所以无论如何使用你的方法是安全的。请发布有关 JVM 版本等的附加信息以跟踪此问题。

# json - 用于确定交易确认的区块链 API

> ID：14989481
> 
> 赞同：11
> 
> 时间：2013-02-20T20:39:47.517
> 
> 标签：json, bitcoin

我正在尝试确定比特币区块链中的交易是否已被确认。我已经使用以下网址从 blockchain.info 访问了交易的 JSON 表示：[https ://blockchain.info/tx/62f9419e56ac1b628840aaf52307867f9856d7a52b3c1d945a9938a3021cbf2c?show_adv=false&format=json](https://blockchain.info/tx/62f9419e56ac1b628840aaf52307867f9856d7a52b3c1d945a9938a3021cbf2c?show_adv=false&format=json)

我在响应中找不到任何表明它有多少确认的东西......

```
{"block_height":221580,"time":1361068368,"inputs":[{"prev_out":{"n":0,"value":100000000,"addr":"1NaPjDPGcfaVCBd3cTmy4zEPjRbDwzkW49","tx_index":53213157,"type":0}},{"prev_out":{"n":0,"value":100000,"addr":"1FDBdn8cseukiteu1myGQCfgYnncdMNpFk","tx_index":53252395,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"13QRi4W5bq3FWrNGrWGcF1dH4mSWD6Huun","tx_index":52575903,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"1MhEJx1BodWATGxoZ7az3GnmUQwx2adCG2","tx_index":53376409,"type":0}},{"prev_out":{"n":1,"value":90000000,"addr":"1FosGa87ZSjoagVu1j8djiJKzUeLkhhp6P","tx_index":53308634,"type":0}},{"prev_out":{"n":0,"value":200000,"addr":"1DZzEunCP1SxBsz2aZah2q9WAFuYSsDrq9","tx_index":53272656,"type":0}},{"prev_out":{"n":1,"value":98500000,"addr":"19q8NEgZKQcQMMx5z16JETbe1bx6StNZfj","tx_index":53506579,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"15LXjh36usUspAYsGnhURVEnPn86W7SPSu","tx_index":53532799,"type":0}},{"prev_out":{"n":1,"value":119000000,"addr":"1PNbeqfPgMjjL6sLdXqkNZyCSkGFHop3bz","tx_index":53492488,"type":0}},{"prev_out":{"n":1,"value":150000000,"addr":"153hqmnNqUM8RGWdLE12tj74aAyS9U2pe7","tx_index":53283295,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"149BGgDjaMyYfYnrja4asYtuUnpsBjobnH","tx_index":53440208,"type":0}},{"prev_out":{"n":167,"value":35000,"addr":"1F3eAsYGC45s2Q8XiE7ywGXMr8QLB8FTCD","tx_index":53578752,"type":0}},{"prev_out":{"n":862,"value":5000,"addr":"1CD4Dcy3yUiBejmQX1hKfJi1y5ysAX9RwZ","tx_index":53578752,"type":0}},{"prev_out":{"n":0,"value":60000000,"addr":"1Q7hDXko9U8MxoAZGmYk2se6tf8WFSQbUK","tx_index":53305081,"type":0}},{"prev_out":{"n":1,"value":98000000,"addr":"1RuMjWETvUPAUqfJKhZ4GBo5tKuszbDTA","tx_index":53521527,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"17rBkeKtc7APY5PQjbicBbucfaUA1PZSpm","tx_index":53511134,"type":0}},{"prev_out":{"n":0,"value":169216027,"addr":"1EBz5v7dJfBPJzSwivVQcY19eT5hUBxa8w","tx_index":53194652,"type":0}},{"prev_out":{"n":1,"value":80000000,"addr":"1KLn85reRxN1JZL1S3gD2Kp2x8LZ14rz6S","tx_index":53194567,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"1EppQ2h8Ddvp1vsoSb2DLJqJAws2DrYnv9","tx_index":53190665,"type":0}},{"prev_out":{"n":174,"value":2,"addr":"1CDDR1vZtZPWc48v4brHmka3tDpXbuT9wd","tx_index":53620404,"type":0}},{"prev_out":{"n":1,"value":100000000,"addr":"12zQxFPPh5rsUyakdZZyADj2N5bFRFZRcd","tx_index":53540021,"type":0}},{"prev_out":{"n":1,"value":801624197,"addr":"1JEjtpHB7aZJm3QSRp76qQqchFfs4TjDeE","tx_index":53526428,"type":0}},{"prev_out":{"n":1,"value":100000000,"addr":"1K1Sn9V775d7i94voiYLLUSaFNUQ9BVj9Q","tx_index":53430153,"type":0}},{"prev_out":{"n":1156,"value":1,"addr":"1CxXkpmJ9Nr4S9b3rKeKU5WWLXGp5nv553","tx_index":53619724,"type":0}},{"prev_out":{"n":0,"value":99950000,"addr":"1Hp5GdoX4oXmjUD6ZRKvXNJQCZp2sk712c","tx_index":53229930,"type":0}},{"prev_out":{"n":1,"value":98000000,"addr":"12aqif4GXBd17N6EFj4onrHLd8febY4n6j","tx_index":53160076,"type":0}},{"prev_out":{"n":0,"value":357452267,"addr":"146eveRJD2YnxvNBw4hHtZn8xR3LHHVxtH","tx_index":53651895,"type":0}},{"prev_out":{"n":1,"value":60000000,"addr":"1FZximueHPa9sqTZSg2Q4LAsg91dZaJK5D","tx_index":53640062,"type":0}},{"prev_out":{"n":1,"value":100000000,"addr":"12VL7U1BLf8kLrkN3sca9w5dGVhVAy1kvD","tx_index":53578503,"type":0}},{"prev_out":{"n":0,"value":67315003,"addr":"1BbYNxYAGJJJz6wP4pK5eHmwcieRSiPDZm","tx_index":53437082,"type":0}},{"prev_out":{"n":1,"value":100000000,"addr":"1DoTTLAs5VUm2QHBXeL34h2kSfYnqSpsCj","tx_index":53116751,"type":0}},{"prev_out":{"n":1,"value":195951000,"addr":"1Epje2MuDrckP4zVJmRXyEu5jWby2MvgHy","tx_index":53599874,"type":0}},{"prev_out":{"n":25,"value":1,"addr":"1CdACYi1JQDGekGPPc8bd3vq5d5v6s2KKY","tx_index":53620401,"type":0}},{"prev_out":{"n":105,"value":2,"addr":"15dsKW8yotixATZdDomBkRJh7YvzJJ4z7X","tx_index":53620401,"type":0}},{"prev_out":{"n":1,"value":90000000,"addr":"17ra7TQoPSmrxvLXGhupexd3Dk9fnZLM8Q","tx_index":53675760,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"1Fm2j4k7XK8veWdeJaxDuZdujdQQh3mj9j","tx_index":53696368,"type":0}},{"prev_out":{"n":39,"value":1500,"addr":"1PB3DrsvvTMkxv7AoV5FdMAVbrnv1R9AvF","tx_index":53366964,"type":0}},{"prev_out":{"n":1,"value":70000000,"addr":"1HDxhL7H8thYC9RaLwACRoeTP6cjTERzkq","tx_index":53197639,"type":0}},{"prev_out":{"n":0,"value":60000000,"addr":"1Mzt5Y815fnf3rbCigx411bmUGqTiAMMMf","tx_index":53534495,"type":0}},{"prev_out":{"n":0,"value":3000000,"addr":"191cP1rSfJX9kATiujqbavKPHta8ryPbUk","tx_index":53397518,"type":0}},{"prev_out":{"n":0,"value":80000000,"addr":"1E7zhSRBexQYN98PxKZrnocZzb7yuCoobF","tx_index":53616202,"type":0}},{"prev_out":{"n":0,"value":60000000,"addr":"1DNGJSkn2jaBtzHpeu2EV8Za7GzLkYRKrk","tx_index":53211317,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"1FPHkZfftpfBVYg46sBAZmU7k4R6nMWjgm","tx_index":53714935,"type":0}},{"prev_out":{"n":1,"value":80000000,"addr":"1NJmpCAfoeZa8M8RoWCT1PAs85k4URKwuL","tx_index":53437066,"type":0}},{"prev_out":{"n":1,"value":320000000,"addr":"17MCmBPgv2SEKsmGf1o7X6qbK59C1Pnwr3","tx_index":53584050,"type":0}},{"prev_out":{"n":0,"value":100000000,"addr":"1KrtH7ceJthEfBFd8t9G4Vohj2myGB1eDj","tx_index":53212472,"type":0}},{"prev_out":{"n":1,"value":103000000,"addr":"13zZzqKR3XYPUKpLWvGkimSJbDMaJim9Ru","tx_index":53218032,"type":0}},{"prev_out":{"n":1,"value":92500000,"addr":"1G5EdCerj7Yryoc4tpmCrFe7rvkbLcjHtz","tx_index":53633538,"type":0}},{"prev_out":{"n":0,"value":97800000,"addr":"1K59Q1UJSULsHhs4Rv8PiakEhDK689jQSj","tx_index":53232395,"type":0}}],"vout_sz":2,"relayed_by":"184.71.200.221","hash":"62f9419e56ac1b628840aaf52307867f9856d7a52b3c1d945a9938a3021cbf2c","vin_sz":52,"tx_index":53744354,"ver":1,"out":[{"n":0,"value":1000000,"addr":"1cm8zPZqjfWs5MBg8yKxJwWvDAkqF4CVu","tx_index":53744354,"type":0},{"n":1,"value":5000000000,"addr":"1EGP5pSnttKRdAcPxdiTviSrjsyHEAnXhy","tx_index":53744354,"type":0}],"size":9439} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-25T17:37:52.253

比特币上的“确认”概念本质上转化为自包含交易的区块以来已经生成了多少区块。换句话说，您必须发出另一个请求来获取当前网络块计数（[http://blockchain.info/q/getblockcount](http://blockchain.info/q/getblockcount)），然后确认计数变为`current_block_count - transaction_block_height + 1`。请注意，`block_height`只有在此后至少生成一个块时才会出现在响应中（即新交易甚至可能不包含该元素）。

# sql - 使用插入触发器处理多行

> ID：14989485
> 
> 赞同：2
> 
> 时间：2013-02-20T20:39:55.547
> 
> 标签：sql, triggers, insert

我在订单表上有一个触发器，可将订单详细信息插入`order_details`表中。这在仅输入一行时有效，但在一次插入多行时无效。我已经阅读了多个线程 > 在各个站点上关于使用游标、while 语句、临时表等。我尝试了一些但没有成功。有关最佳/最简单方法的任何建议，以确保我在下订单时添加所有详细行。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[CreateOrderDetails]
ON [dbo].[Orders]
FOR INSERT 
AS
    declare @OrderStagingId uniqueidentifier
    declare @OrderType as varchar(50)
    declare @OrderID uniqueidentifier
    declare @LocationID uniqueidentifier
    declare @status as varchar (25)
    declare @vendorid as uniqueidentifier

     SELECT @OrderID = OrderID, @LocationID = LocationID, 
            @vendorid = vendorid, @OrderStagingId = OrderStagingId
     FROM inserted

     Begin

    SET NOCOUNT ON;

     -- Insert statements for trigger here

     Insert into [Brain].dbo.[Order_Details]

     SELECT     
        NEWID() AS OrderDetailId, @OrderID AS OrderId, 
        dbo.OrderStaging_Details.EcProductID,    
        dbo.OrderStaging_Details.Qty, dbo.OrderStaging_Details.Qty_Type, 
        dbo.OrderStaging_Details.Cost, dbo.OrderStaging_Details.Ext_Cost, 
        dbo.OrderStaging_Details.EnteredBy,
        NULL AS ReceivedBy, NULL AS ReceivedDate, NULL AS ReceivedQty, 
        dbo.OrderStaging_Details.OrderNote, NULL AS ReceivedNote,    
        dbo.OrderStaging_Details.UpdatedBy, dbo.OrderStaging_Details.UpdateDate
     FROM         
        dbo.Vendor_Assigned_Locations 
     INNER JOIN
        dbo.Vendor_Contacts 
     INNER JOIN
        dbo.Vendors 
     INNER JOIN
        dbo.OrdersStaging 
     INNER JOIN
        dbo.OrderStaging_Details ON dbo.OrdersStaging.OrderStagingID = dbo.OrderStaging_Details.OrderStagingID 
            ON dbo.Vendors.VendorID = dbo.OrderStaging_Details.VendorId 
            ON dbo.Vendor_Contacts.Vendor_ID = dbo.Vendors.VendorID 
            ON dbo.Vendor_Assigned_Locations.LocationID = dbo.OrdersStaging.LocationID 
               AND dbo.Vendor_Assigned_Locations.VCID = dbo.Vendor_Contacts.VCID 
     INNER JOIN
        dbo.Orders ON dbo.OrdersStaging.OrderStagingID = dbo.Orders.OrderStagingID 
                   AND dbo.Vendors.VendorID = dbo.Orders.VendorID 
                   AND dbo.Vendor_Contacts.VCID = dbo.Orders.VendorContactID 
                   AND dbo.OrdersStaging.LocationID = dbo.Orders.LocationID 
     LEFT OUTER JOIN
        dbo.Order_Details ON dbo.Orders.OrderID = dbo.Order_Details.OrderID
     WHERE     
        (dbo.OrderStaging_Details.OrderStagingID = @OrderStagingID) 
        AND (dbo.OrdersStaging.LocationID = @Locationid)    
        AND (dbo.Vendors.VendorID = @Vendorid) 
        AND (dbo.Order_Details.OrderID IS NULL)
     end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:47:51.453

您在其中选择@OrderID、@LocationID 等的外部选择语句仅从插入的第一行中挑选出第一行，其中包含所有插入到触发触发器的事务中的订单。

```
Use insert into detail(...)
Select NewID(), Inserted.OrderID, ... 
From Inserted
inner join ...
Where etc 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:48:55.583

这是因为您正在考虑行而不是列。转储@variables，并加入`inserted`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:38:16.617

这个触发器对你来说可能是必要的

```
ALTER TRIGGER [dbo].[CreateOrderDetails] ON [dbo].[Orders]
FOR INSERT 
AS 
BEGIN
  SET NOCOUNT ON;    
  -- Insert statements for trigger here    
  INSERT INTO [Brain].dbo.[Order_Details]    
  SELECT     
    NEWID() AS OrderDetailId, i.OrderID AS OrderId, 
    dbo.OrderStaging_Details.EcProductID,    
    dbo.OrderStaging_Details.Qty, dbo.OrderStaging_Details.Qty_Type, 
    dbo.OrderStaging_Details.Cost, dbo.OrderStaging_Details.Ext_Cost, 
    dbo.OrderStaging_Details.EnteredBy,
    NULL AS ReceivedBy, NULL AS ReceivedDate, NULL AS ReceivedQty, 
    dbo.OrderStaging_Details.OrderNote, NULL AS ReceivedNote,    
    dbo.OrderStaging_Details.UpdatedBy, dbo.OrderStaging_Details.UpdateDate
  FROM               
    dbo.OrdersStaging 
  INNER JOIN
    dbo.OrderStaging_Details ON dbo.OrdersStaging.OrderStagingID = dbo.OrderStaging_Details.OrderStagingID 
  INNER JOIN
    dbo.Vendors ON dbo.Vendors.VendorID = dbo.OrderStaging_Details.VendorId
  INNER JOIN
    dbo.Vendor_Contacts ON dbo.Vendor_Contacts.Vendor_ID = dbo.Vendors.VendorID 
  INNER JOIN          
    dbo.Vendor_Assigned_Locations ON dbo.Vendor_Assigned_Locations.LocationID = dbo.OrdersStaging.LocationID 
                                       AND dbo.Vendor_Assigned_Locations.VCID = dbo.Vendor_Contacts.VCID
  INNER JOIN
    dbo.Orders ON dbo.OrdersStaging.OrderStagingID = dbo.Orders.OrderStagingID 
                    AND dbo.Vendors.VendorID = dbo.Orders.VendorID 
                    AND dbo.Vendor_Contacts.VCID = dbo.Orders.VendorContactID 
                    AND dbo.OrdersStaging.LocationID = dbo.Orders.LocationID 
  INNER JOIN
    inserted i ON dbo.Orders.OrderID = i.OrderID
END 
```

# python - 为什么相同的 utf-8 字符串在打印时可以正常打印而在日志记录中失败？

> ID：14989487
> 
> 赞同：1
> 
> 时间：2013-02-20T20:40:00.107
> 
> 标签：python, unicode, utf-8

为了记录 utf-8 字符串，我是否需要手动记录 print 为我所做的事情？

```
for line in unicodecsv.reader(cfile, encoding="utf-8"):
    for i in line:
        print "process_clusters: From CSV: %s" % i
        print "repr: %s" % repr(i)
        log.debug("process_clusters: From CSV: %s", i) 
```

无论字符串是基于拉丁文还是俄文西里尔文，我的打印语句都可以正常工作。

```
process_clusters: From CSV: escuchan
repr: u'escuchan'
process_clusters: From CSV: говоритъ
repr: u'\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044a' 
```

但是，log.debug 不会让我传入相同的变量。我收到此错误：

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/logging/__init__.py", line 765, in emit
    self.stream.write(fs % msg.encode("UTF-8"))
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/codecs.py", line 686, in write
    return self.writer.write(data)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/codecs.py", line 351, in write
    data, consumed = self.encode(object, self.errors)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 28: ordinal not in range(128) 
```

我的日志、格式化程序和处理程序是：

```
log = logging.getLogger(__name__)
loglvl = getattr(logging, loglevel.upper()) # convert text log level to numeric
log.setLevel(loglvl) # set log level
handler = logging.FileHandler('inflection_finder.log', 'w', 'utf-8')
handler.setFormatter(logging.Formatter('[%(levelname)s] %(message)s'))
log.addHandler(handler) 
```

我正在使用 Python 2.6.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:30:48.120

阅读回溯，日志模块似乎正在尝试在写入消息之前对其进行编码。该消息被假定为 ASCII 字符串，但它不可能是因为它包含 UTF-8 字符。如果在将消息传递给记录器之前将消息转换为 Unicode，它可能会起作用。

```
 log.debug(u"process_clusters: From CSV: %s", i) 
```

编辑，我注意到您的参数字符串已经解码为 Unicode，因此我相应地更新了示例。

同样根据您的最新编辑，您可能希望在设置中使用 Unicode 字符串：

```
handler.setFormatter(logging.Formatter(u'[%(levelname)s] %(message)s'))
                                     --^-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:02:50.713

Python2 中的所有字符串与 unicode 都是一团糟……幸运的是，在 Python3 中得到了纠正。但是假设迁移到 Python3 不是一种选择，那就去吧。

`logging`正如我所看到的，在使用编码时有两个选项：

1.  以二进制形式打开文件并将所有字符串用作字节字符串。
2.  以文本形式打开文件并将所有字符串用作 unicode-strings。

任何其他选择都注定失败！

问题是您`"utf-8"`在打开文件时指定了编码，但您的俄语文本是 unicode 字符串。

因此，您可以执行以下一项（仅一项）操作：

1.  以二进制打开文件，即从构造中删除`"utf-8"`参数。`FileStream`
2.  将所有相关文本转换为 unicode 字符串，其中包括参数 to`log.debug`和一个 to `logging.Formatter`。

# jquery - 反转 jQuery 上的 Meta 属性

> ID：14989492
> 
> 赞同：1
> 
> 时间：2013-02-20T20:40:08.390
> 
> 标签：jquery, attributes, meta

我正在尝试使用 jQuery 函数反转元属性（内容和名称），但前提是元内容以“some”开头

```
<meta name="abc" content="something"/>
<meta name="def" content="somewhere" /> 
```

我试过这个功能：

```
<script>
$('meta').ready(function(){
var a_metaname = $(this).attr("name");
var a_metacontent = $(this).attr("content");

if(a_metacontent^="some") {
$('head').append("<meta name="+ a_metacontent +" content="+ a_metaname +" />");

}
 });
</script> 
```

但它不会反转每个元的情侣名称/内容。

我该如何改进功能？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:45:42.203

替换这个

```
if (a_metacontent.match(new RegExp('some[a-z0-9A-Z]+$'))){
    $('head').append("<meta name="+ a_metacontent +" content="+ a_metaname +" />");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:02:57.870

```
$('meta').ready(function(){ 
```

在这里，您可能会混淆两件事：`$('meta').each(...)`将遍历所有元标记。`$(document).ready(...)`等待就绪事件。`$('meta').ready(...)`可能不会按照你的想法去做。

由于`stript`我认为标签位于`meta`标签之后，因此您无需等待`ready`事件。不确定您是否*可以*在初始加载后修改元标记（据我所知，它们中的大多数会更快生效）。因此，我建议*不要*等待。

```
$('meta').each(function(){ 
```

* * *

```
if(a_metacontent^="some") { 
```

与 CSS 不同，`^=`在 Javascript 中并不意味着“以”开头。相反，`^=`执行按位异或（在将两个操作数都转换为整数之后）并将结果分配回去。您可以使用`indexOf`“开始于”功能，也可以使用正则表达式。

```
if(/^some/.test(a_metacontent)){ 
```

* * *

```
$('head').append("<meta name="+ a_metacontent +" content="+ a_metaname +" />"); 
```

您将原始元标记保留在文档中，并添加新标记。也许你应该删除它。或者，不是为浏览器创建 HTML 来解析，而是操作现有节点。解析 HTML 很慢。

```
$(this).attr("content", a_metaname).attr("name", a_metacontent) 
```

* * *

另请注意

```
$('meta').each(function(){
    if(/^some/.test($(this).attr("content"))) {
        ...
    }
} 
```

可以替换为

```
$('meta[content^="some"]').each(function(){
    ...
}) 
```

# python - 创建后修改 Django QuerySet 对象

> ID：14989493
> 
> 赞同：2
> 
> 时间：2013-02-20T20:40:10.037
> 
> 标签：python, django

假设我进行以下查询：

```
showtimes = ShowTime.objects.filter(
    start_date__lte=start,
    end_date__gte=end,
    movie__slug=movie.slug,
    city=city,
    visible=1) 
```

现在我想要一个函数来接收它`queryset object`并根据其他一些属性进一步过滤结果，如下所示：

```
def is_subtitled_3d(showtimes):
    return (
        showtimes.language == LANGUAGE_SUBTITLED and
        showtimes.type_vip == None and
        showtimes.type_3d == 1 and
        showtimes.type_gtmax == None and
        showtimes.type_xd == None) 
```

类似的东西可以用来修改对象还是有不同的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:42:51.660

查询集是[惰性且可链接的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)

您可以随意过滤`showtimes`多次。我不相信你的语法是正确的，但你可以使用标准`filter`来过滤查询集

```
def is_subtitled_3d(showtimes):
  return showtimes.filter(
    language=LANGUAGE_SUBTITLED,        
    type_vip__isnull=True,
    type_3d=1,
    type_gtmax__isnull=True,
    type_xd__isnull=True
  ) 
```

也许如果用户想要过滤 3d 电影，以说明如何组合过滤器，例如：

```
showtimes = ShowTime.objects.filter(
    start_date__lte=start,
    end_date__gte=end,
    movie__slug=movie.slug,
    city=city,
    visible=1)

if request.GET.get('is_3d_movie'):
  showtimes = showtimes.filter(type_3d=1)
etc... 
```

# java - 我如何在其他人之后绘制某些观点？

> ID：14989496
> 
> 赞同：3
> 
> 时间：2013-02-20T20:40:22.537
> 
> 标签：java, android, android-layout, android-custom-view

我有一个简单`LinearLayout`的只包含一个自定义视图扩展`TextView`（我将开始调用“ `IdiomView`”）和一个`ListView`. `IdiomView`与普通的唯一区别`TextView`是我已经重写了`onDraw()`迭代减小文本大小直到文本长度小于 3 行的方法。我的问题是，当绘制视图时，用户会看到：

```
 ______________
|__ACTION_BAR__|
|  IdiomView   |
|______________|
|              |
|   ListView   |
|              |
|              |
|______________| 
```

很快就变成了：

```
 ______________
|__ACTION_BAR__|
|__IdiomView __|
|              |
|   ListView   |
|              |
|              |
|              |
|______________| 
```

`IdiomView`即ListView被绘制，然后在整理好它的大小后跳起来。

我想要的是一种等到我`IdiomView`的完全绘制，然后再绘制 ListView 的方法。这篇文章[在完全绘制所有视图后会触发什么事件？](https://stackoverflow.com/questions/3947145/what-event-is-fired-after-all-views-are-fully-drawn)解释了如何在绘图完成后通过调用来排列线程`View.post(Runnable)`。问题是我的重写`onDraw()`方法调用`onDraw()`多次以计算较小的文本是否覆盖少于 3 行，所以这个元素可能在我想要`ListView`出现之前多次“完成绘图”。

我感谢所有的评论和答案。这是我当前的代码：

布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp"
    android:background="@color/off_white"
    android:orientation="vertical" >

    <carter.cwords.idioms.IdiomView
        android:id="@+id/idiom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginBottom="10dp"
        android:textColor="@color/transparent"
        android:textSize="28sp"
        android:textStyle="italic"
        android:visibility="invisible" />

    <ListView
        android:id="@+id/quote_list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:choiceMode="none"
        android:footerDividersEnabled="false"
        android:headerDividersEnabled="false"
        android:visibility="invisible" />

</LinearLayout> 
```

活动：

```
private IdiomView mIdiomTextView;
private ListView mQuoteList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.idiom_of_the_day);
    mIdiomTextView = (IdiomView) findViewById(R.id.idiom);
    mQuoteList = (ListView) findViewById(R.id.quote_list);      

    // Populate page data onResume()
}

@Override
protected void onResume() {
    super.onResume();

    sendRequest(R.string.url_idiom_of_the_day, new AfterRequest(){
        @Override
        public void useResults(Document resultXml) {
            if(resultXml != null){

                Log.i(getClass().getSimpleName(), "useResults()");

                String idiomString = XmlUtilities.getTextValue(resultXml, NetworkHelper.XML_TAG_IDIOM_CONTENT);

                logDebug("idiomString: " + idiomString);
                mIdiomTextView.setText("\"" + idiomString + "\"");
                mQuoteList.setAdapter(new ContentAdapter(mContext, resultXml));
                mIdiomTextView.setVisibility(View.VISIBLE);

                mIdiomTextView.post(new Runnable(){
                    @Override
                    public void run() {
                        mQuoteList.setVisibility(View.VISIBLE);
                    }
                });
            }

        }
    });

} 
```

`IdiomView`：

```
public class IdiomView extends TextView {

    public IdiomView(Context context) {     
        super(context);
    }

    public IdiomView(Context context, AttributeSet attrs){
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Log.i(getClass().getSimpleName(), "onDraw(): " + this.getLineCount());
        if(this.getLineCount() > 2){
            this.setTextSize(TypedValue.COMPLEX_UNIT_PX, this.getTextSize()-1);
        }
        else{
            this.setTextColor(getResources().getColor(R.color.text));
        }
        Log.i(getClass().getSimpleName(), "onDraw(): " + this.getLineCount());

    }

} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:25:29.860

我以前从未在 a 上尝试过，但我认为它可以帮助指导您的应用在绘制后`View`仅与, 一起使用。您也许可以使用侦听器来实现这一点。但是，它将要求您使用代码隐藏方法。`ListView``IdiomView`

创建一个接口，`IdiomView`例如

```
public static interface OnDrawComplete {
    public abstract void onDrawComplete();
}

private OnDrawComplete mListener;

public IdiomView(Context context) {     
    super(context);
    // this forces it to make sure it's actually an activity
    // context so you can get a listener
    if (context instanceof Activity)
        this.mListener = context;
} 
```

现在在你的绘图结束时，调用它

```
if (this.mListener != null)
    this.mListener.onDrawComplete(); 
```

这将调用创建对象的 Activity 并通知它正在绘制。所以在你的活动中，你实现了接口

```
public void onDrawComplete() {
    // After the draw completes, it calls this callback.
    // setup the rest of your layout now
    mQuoteList = (ListView) findViewById(R.id.quote_list);
    this.populateQuoteList();
} 
```

您也许还可以召集`this.mListener.onDrawComplete();`其他某种`View`活动，但我找不到合适的活动。你提到了`View.post(runnable)`，它可能有效，但我也从未使用过那种东西。

最大的潜在问题是我不知道`IdiomView`将如何接收上下文或哪个上下文。在这种情况下，您需要`Activity`实现接口的上下文。

如果没有获得正确的上下文，您可能需要手动实例化并将其添加到布局中以使用此方法。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mIdiomTextView = new mIdiomTextView(this);
    // add to the Layout manually.  
} 
```

这里有更多内容

**成语视图**

```
public class IdiomView extends TextView {
    public static interface OnDrawComplete {
        public abstract void onDrawComplete();
    }

    private OnDrawComplete mListener;

    public IdiomView(Context context) {     
        this(context, 0);
    }

    public IdiomView(Context context, AttributeSet attrs){
        super(context, attrs);
        if (context instanceof Activity)
            this.mListener = context;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // do your drawing code here
        // ...
        // after drawing, call the listener, which tells your
        // Activity to deal with the ListView.
        if (this.mListener != null)
            this.mListener.onDrawComplete();
    }
} 
```

**活动**

```
public class MyActivity extends Activity implements IdiomView.OnDrawComplete {
    //...

    private IdiomView mIdiomTextView;
    private ListView mQuoteList;

    public void onDrawComplete() {
        // After the draw completes, it calls this callback.
        // setup the rest of your layout now
        mQuoteList = (ListView) findViewById(R.id.quote_list);
        this.populateQuoteList();
        // now show the ListView
        mQuoteList.setVisibility(View.Visible);
    }

    private void populateQuoteList() {
        // populate your ListView here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T05:18:57.583

重复设置文本大小直到找到合适的字体大小可能效率很低，因为`TextView`每次都需要重新测量和重新绘制。您可以使用它的`TextView.getPaint()`方法只测量和设置一次文本，而不是这样做。您可以使用 in 循环测量文本，`Paint`为其提供不同的字体大小，直到返回的值`Paint.measureText()`低于小部件当前宽度的两倍。

# soap - RALLY API：无法为标签设置值：无法在属性标签中使用类型 ObjectReference

> ID：14989501
> 
> 赞同：2
> 
> 时间：2013-02-20T20:40:54.240
> 
> 标签：soap, rally

我正在尝试在 Rally 中创建一个新故事。

使用：[https](https://rally1.rallydev.com/slm/webservice/1.40/RallyService) ://rally1.rallydev.com/slm/webservice/1.40/RallyService 下面是代码

```
 var parentStory = rallyService.query(Workspace, Projs["xxx"], true, true,                "HierarchicalRequirement", query, "", true, 1, 20).Results[0] as HierarchicalRequirement;
    var tag = new Tag[1];
    tag[0] = new Tag()
    {
       Archived = true,
       ArchivedSpecified = true,
       CreationDate = DateTime.Now,
       CreationDateSpecified = true,
       Name = tagName,
    };

    var childStory = new HierarchicalRequirement
    {
      Name = feedback.FeedBackSubject,
      Description = feedback.FeedBackDescription,
      Parent = parentStory,
      Owner = parentStory.Owner,
      Tags = tag
    };
    return rallyService.create(childStory); 
```

我收到以下错误：无法为标签设置值：无法在属性标签中使用类型 ObjectReference

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:40:46.347

我通常使用 REST 端点而不是 SOAP，但我猜您需要先创建标签，然后再在您正在创建的故事中引用它。我认为错误是由于数组中传递的标签没有引用。

# ms-access - 在 Access 中为所有记录创建派生字段

> ID：14989502
> 
> 赞同：0
> 
> 时间：2013-02-20T20:40:58.043
> 
> 标签：ms-access, procedure, recursive-query

我正在尝试将“年份”字段添加到缺少数据的表中（我有 10 个需要此过程的表）。我的报告数据库生成带有月份字段的月度报告，但年份仅在元数据中。由于我正在进行多年分析，因此我需要一个显示月-年格式的字段，例如 2001-01 或 0101 等。

我知道我可能可以使用递归函数将表中的固定年份手动连接到其月份；但我不确定如何编写程序。我可以运行该程序 10 次，手动调整年份常数。我只会这样做一次。

# php - 在页面加载时自动显示 div

> ID：14989507
> 
> 赞同：0
> 
> 时间：2013-02-20T20:41:10.043
> 
> 标签：php, javascript, css

我正在尝试显示一个 CSS 模态框，如果用户在他的收件箱中有邮件，则在页面加载时应该会弹出该框。到目前为止，我已经为链接工作了`<a href="#" id="mail_modal"></a>`，但我不确定如何让它在页面加载时自动显示。这是我的代码：

```
<?php
if ($items > 0)
    {
        echo '<strong><font color="yellow">You have new unread mail</font></strong>';
    ?>

    <script type="text/javascript">
    $(document).ready(function() {
    $('#button_modal').click(function(e) { 
            $('#modal').reveal({ 
                animation: 'fadeAndPop', 
                animationspeed: 400,   
                closeonbackgroundclick: true, 
                dismissmodalclass: 'close'
            });
        return false;
        });
    });
    </script>

    <div id="modal">

        <div id="mail-form">

            <h1>New Mail</h1>

            <fieldset>

                <form name="loginform" action="<?php echo url('/Mail');?>">

                    <p>You have new unread mail in your inbox. Press 'Mail' button to access your inbox.</p>

                    <input type="hidden" name="redir" value="<?php echo url('/Mail'); ?>" />
                    <input type="hidden" name="action" value="mail" />
                    <input type="submit" name="submit" value="Mail" />

                </form>

            </fieldset>

        </div> <!-- end login-form -->

    </div>

    <?php
    }
    else
    {
        echo '<i>You have no new mail</i>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:51:57.913

```
<script type="text/javascript">
$(document).ready(function() {
  $('#button_modal').click(function(e) { 
    $('#modal').reveal({ 
      animation: 'fadeAndPop', 
      animationspeed: 400,   
      closeonbackgroundclick: true, 
      dismissmodalclass: 'close'
    });
    return false;
  });

  // and here we show popup automatically, if a user has new letters.
  <?php if ($items > 0) echo "$('#button_modal').trigger('click');"; ?>

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:44:58.070

```
$(document).ready(function() {
    if(/* check if has mail */ === true) {
        $('#modal').reveal({ 
            animation: 'fadeAndPop', 
            animationspeed: 400,   
            closeonbackgroundclick: true, 
            dismissmodalclass: 'close'
        });
    }
}); 
```

# java - 从带有 HTTPS URL 的 java.net.URLConnection 返回什么？结果是否加密？

> ID：14989508
> 
> 赞同：3
> 
> 时间：2013-02-20T20:41:12.727
> 
> 标签：java, encryption, https, urlconnection

我正在使用`java.net.URLConnection`，我传递给它的许多 URL 都使用 HTTPS 协议。使用 HttpsURLConnection 类发出请求是否更安全，或者如果使用 URLConnection 类仍然可以获得加密的好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:44:20.507

不是一个真正的问题。你没有选择权。URL.openConnection() 为 HTTPS 返回的 URLConnection：URL*是*一个 HttpsURLConnection。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:44:08.337

如果您将 URLConnection 连接到 https URL，它将使用 HTTPS 连接或产生错误[，如文档](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection%28%29)所述。

# .net - 单声道多声道播放器

> ID：14989516
> 
> 赞同：0
> 
> 时间：2013-02-20T20:41:48.693
> 
> 标签：.net, audio, naudio, asio

我是音频编程的新手，我有一个任务要做，但我不知道怎么做。如果你能引导我朝着正确的方向前进，那对我来说意义重大。

我想通过一个声音设备的所有通道播放不同的 mp3 文件，例如在 7.1 卡中，通过所有 8 个单声道。但我想单独控制它们，我的意思是，能够播放、暂停、停止和所有其他标准播放器选项。

我一直在测试 MultiplexingWaveProvider，它工作得很好，但我没有播放或停止音乐等选项。然后我尝试了 Naudio 的 ASIO 驱动程序，试图单独处理每个通道，但我最后一次调用 ASIO构造函数覆盖第一个。我怎样才能使它工作？使用 Naudio 或任何其他免费库？

这是我的代码

```
AsioOut waveOutdevice1 = new AsioOut();
waveOutdevice1.ChannelOffset = -1;
waveOutdevice1.Init(input1);

AsioOut waveOutdevice2 = new AsioOut();
waveOutdevice2.ChannelOffset = 1;
waveOutdevice2.Init(input2);

waveOutdevice1.Play();
waveOutdevice2.Play(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:01:06.257

您不能打开多个 AsioOut 实例。您必须提供多通道输入。这`MultiplexingWaveProvider`是你需要使用的。我不确定您的意思是您没有播放和停止的选项 - 您只需使用 Play。如果您想播放某些频道而不播放其他频道，那么您将实现另一个 WaveProvider，它可以在从其源读取和输出静音之间切换。换句话说，所有频道一直在播放，但其中一些正在播放静音。

# php - PHP 5.3 $this 与 PHP 5.4

> ID：14989518
> 
> 赞同：0
> 
> 时间：2013-02-20T20:41:54.027
> 
> 标签：php

我正在使用 $this 在匿名函数中调用成员函数。

```
 $this->exists($str) 
```

PHP 5.4 没有给我带来问题，5.3 给我带来了问题。

错误是

```
<b>Fatal error</b>:  Using $this when not in object context in 
```

这是我的代码

```
class WordProcessor
{

private function exists($str)
{
 //Check if word exists in DB, return TRUE or FALSE
 return bool;
}

private function mu_mal($str)
{

    if(preg_match("/\b(mu)(\w+)\b/i", $str))
    {   $your_regex = array("/\b(mu)(\w+)\b/i" => "");      
        foreach ($your_regex as $key => $value) 
            $str = preg_replace_callback($key,function($matches)use($value)
            {
                if($this->exists($matches[0])) //No problems in PHP 5.4, not working in 5.3
                    return $matches[0];
                if($this->exists($matches[2]))
                    return $matches[1]." ".$matches[2];
                 return $matches[0];
            }, $str);
    }
    return $str;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:43:33.150

您正在使用`$this`在单独上下文中执行的闭包内部。

在`mu_mal`函数的开头，您应该声明`$that = $this`（或者`$wordProcessor`更明确地说明变量是什么）。然后，在你`preg_replace_callback`的闭包中，你应该在你的闭包中添加`use ($that)`和引用`$that`而不是`$this`.

```
class WordProcessor
{

    public function exists($str)
    {
        //Check if word exists in DB, return TRUE or FALSE
        return bool;
    }

    private function mu_mal($str)
    {
        $that = $this;

        if(preg_match("/\b(mu)(\w+)\b/i", $str))
        {
            $your_regex = array("/\b(mu)(\w+)\b/i" => "");      
            foreach ($your_regex as $key => $value) 
                $str = preg_replace_callback($key,function($matches)use($value, $that)
                {
                    if($that->exists($matches[0])) //No problems in PHP 5.4, not working in 5.3
                        return $matches[0];
                    if($that->exists($matches[2]))
                        return $matches[1]." ".$matches[2];
                    return $matches[0];
                }, $str);
        }
        return $str;
    }
} 
```

**请注意，您必须公开`exists`该类的公共 API（我在上面已经完成了）**

此行为在 PHP 5.4 中已更改

# java - 使 struts 1.0 文本框只读

> ID：14989520
> 
> 赞同：2
> 
> 时间：2013-02-20T20:42:08.513
> 
> 标签：java, html, css, struts

发现当我启动服务器时，我的浏览器页面中没有出现 disabled 属性，这真的很奇怪。

```
<td class="label" width="20%"><bean:message key="mrBeanName" /></td>
        <td width="30%"><td width="30%"><html:text property="mrbeanId" size="30" maxlength="16" disabled="disabled"/></td></td> 
```

有什么我遗漏的，还是 Struts 1.0 的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:45:24.653

阅读[API](http://struts.apache.org/development/1.x/struts-taglib/tlddoc/html/text.html)，应该是`readonly="true"`或`disabled="true"`。

# regex - vim中的正则表达式否定

> ID：14989521
> 
> 赞同：0
> 
> 时间：2013-02-20T20:42:08.950
> 
> 标签：regex, vim, negative-lookahead

在 vim 中，我想使用正则表达式突出显示以字母结尾的每一行，该字母前面没有`//`noor `:`。我尝试了以下

```
syn match systemverilogNoSemi "\(.*\(//\|:\).*\)\@!\&.*[a-zA-Z0-9_]$" oneline 
```

这对注释非常有效，但不适用于包含冒号的行。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:01:50.387

因为有了这个正则表达式，vim 可以为你的正则表达式选择任何开始匹配​​的点。显然，它选择了第一个 concat 匹配的点（即没有`//`or `:`）。这些事情通常是通过使用

```
\v^%(%(\/\/|\:)@!.)*\w$ 
```

（删除第一个 concat 和分支本身，更改`.*`为`%(%(\/\/|\:)@!.)*`; 用等效替换集合`\w`;**添加指向行开头的锚点**）：如果您需要匹配整行。或者如果您只需要匹配最后一个字符，则为负向后看。您也可以将锚点添加到变体的第一个 concat（您应该`.*`从第一个 concat 中删除尾随，因为它是无用的，并且出于相同的原因分支符号）。

注意：我不知道为什么您的正则表达式适用于评论。在我检查的所有情况下，它都不适用于您需要的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:08:55.243

这对你有用吗？

```
^\(\(//\|:\)\@<!.\)*[a-zA-Z0-9_]$ 
```

# file-upload - 在没有另一个完全自定义的类的情况下在 Classic ASP 中上传文件

> ID：14989524
> 
> 赞同：2
> 
> 时间：2013-02-20T20:42:19.243
> 
> 标签：file-upload, asp-classic, runtime-error

是的，我使用的是 Classic ASP，而不是选择我支持 Legacy 应用程序。目标：我需要一个表单页面提交到另一个.asp页面，该页面将上传文件并将其存储在服务器上的某个目录中，例如“/uploads”。我对asp或asp.net并不熟悉，所以我对此很陌生。我创建了一个测试原型：

表格页面：

```
<!DOCTYPE html>
<head>
<title>Test upload</title>
</head>
<body>

<form action="process.asp" method="post" enctype="multipart/form-data">
     <p>Filename: <input type="text" name="filename" size="50" /></p>
     <p><input type="file" name="file" /><input type="submit" value="Upload file" /></p>
</form>

</body>
</html> 
```

处理页面：

```
<%

Set fs = Server.CreateObject("Scripting.FileSystemObject")

Set tfolder = fs.GetSpecialFolder(2)
tname = fs.GetTempName

'Declare variables
Dim fileSize
Dim filename
Dim file
Dim fileType
Dim p
Dim newPath

'Assign variables
fileSize       = Request.TotalBytes
fileName       = Request.form("filename")
file           = request.form("file")
fileType       = fs.GetExtensionName(file)
fileOldPath    = tfolder
newPath        = Server.MapPath("/uploads/")

fs.MoveFile fileOrigPath, newPath

set fs = nothing

%> 
```

问题是每次我尝试上传或运行脚本时都会收到此错误：

```
Microsoft VBScript runtime error '800a0035'
File not found
/tbird/fileUpload/process.asp, line 25 
```

显然我没有正确映射到文件，我认为我卡住的主要原因是在`MoveFile`方法的第一个参数中我没有正确映射到文件。谁能告诉我应该如何引用该文件，或者我是否做错了？

提前感谢我非常感谢我搜索过的所有帮助，我发现与经典 asp 和上传文件相关的所有内容都是您可以购买的课程，我不想这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T20:49:05.417

看看[Pure ASP Upload](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19297/Pure-ASP-File-Upload.htm)之类的解决方案，它应该对您有所帮助。*在经典 ASP 中，当数据在multipart/form-data*`Request.Form`中发送时，您无法直接访问，因此您可以选择使用第三方组件（如[ASPUpload）](http://www.aspupload.com/)或 ASP 类来为您解析请求并将方法公开给保存文件。

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T06:48:23.843

移动文件时，您还必须指定文件名。

改变：

```
fs.MoveFile fileOrigPath, newPath 
```

到：

```
fs.MoveFile fileOrigPath & fileName, newPath & fileName 
```

假设“fileName”是文件名的正确变量，而不是上面的“file”变量。*

# php - 打开php标签后缩进

> ID：14989525
> 
> 赞同：7
> 
> 时间：2013-02-20T20:42:22.507
> 
> 标签：php, phpstorm

我刚开始使用 PhpStorm，它不希望我在开始`<?php`标记后缩进第一行。我更喜欢，所以我每次都手动做。这可能看起来相当微不足道，但在搜索之后，我找不到任何明确的理由来做这件事。打开脚本标签后是否有缩进的最佳做法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T20:50:09.580

虽然没有直接定义，但[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)、[PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)、[PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)和[PSR-3](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md)不会在 PHP 标记后缩进。由于 PSR 是 PHP 编码风格的事实标准，我建议坚持 PSR 标准并尝试打破您最初缩进的习惯，如果没有其他原因来减少行的长度，从而减少换行和换行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T12:57:41.430

打开 PhpStorm 的设置。在*Project Settings -> Code Style -> PHP*您应该找到一个选项卡*Other*您可以通过单击复选框*Indent code in PHP tags*来设置所需的行为。

但正如另一个答案所暗示的那样，这可能不是一个好主意，因为它违反了我所知道的任何常见编码标准。:-)

# c# - WPF UI线程冻结在TreeView中加载一堆项目

> ID：14989528
> 
> 赞同：2
> 
> 时间：2013-02-20T20:42:26.923
> 
> 标签：c#, .net, wpf

在过去的几个月里，我玩了很多 TreeView，现在我遇到了 UI 冻结问题。当您拥有大量项目并且这些项目的数据部分创建速度非常快但创建 TreeViewItems 并可视化这些项目（必须在 UI 线程上完成）需要时间时，它就会出现。

我们以 Shell 浏览器和 C:\Windows\System32 目录为例。（我为此重新设计了[http://www.codeproject.com/Articles/24237/A-Multi-Threaded-WPF-TreeView-Explorer](http://www.codeproject.com/Articles/24237/A-Multi-Threaded-WPF-TreeView-Explorer)解决方案。）这个目录有大约 2500 个文件和文件夹。

DataItem 和 Visual 加载在不同的线程中实现，但由于文件和目录信息被快速读取，它没有任何好处。应用程序在创建 TreeViewItems 并使其可见时冻结。我试过了：

1.  在加载项目时为 UI 线程设置不同的 DispatcherPriorities，例如窗口是与 DispatcherPriority.ContextIdle 交互的（我能够移动它），但随后项目的加载速度非常慢..
2.  以块的形式创建和可视化项目，例如一次 100 个项目，但没有任何好处，UI 线程仍然冻结..

我的目标是应用程序在加载这些项目时是交互式的！目前我只有一个想法如何解决这个问题，实现我自己的控件来跟踪窗口大小、滚动条位置并仅加载可见的项目，但这并不容易，我不确定在最终表现会更好.. :)

也许有人知道如何在加载一堆视觉项目时使应用程序交互？！

**代码：**

完整的解决方案可以在这里找到：[http ://www.speedyshare.com/hksN6/ShellBrowser.zip](http://www.speedyshare.com/hksN6/ShellBrowser.zip)

**程序：**

```
public partial class DemoWindow
{
    public DemoWindow()
    {
        InitializeComponent();
        this.Loaded += DemoWindow_Loaded;
    }

    private readonly object _dummyNode = null;

    delegate void LoaderDelegate(TreeViewItem tviLoad, string strPath, DEL_GetItems actGetItems, AddSubItemDelegate actAddSubItem);       
    delegate void AddSubItemDelegate(TreeViewItem tviParent, IEnumerable<ItemToAdd> itemsToAdd);

    // Gets an IEnumerable for the items to load, in this sample it's either "GetFolders" or "GetDrives"
    // RUNS ON:  Background Thread
    delegate IEnumerable<ItemToAdd> DEL_GetItems(string strParent);

    void DemoWindow_Loaded(object sender, RoutedEventArgs e)
    {
        var tviRoot = new TreeViewItem();

        tviRoot.Header = "My Computer";
        tviRoot.Items.Add(_dummyNode);
        tviRoot.Expanded += OnRootExpanded;
        tviRoot.Collapsed += OnItemCollapsed;
        TreeViewItemProps.SetItemImageName(tviRoot, @"Images/Computer.png");

        foldersTree.Items.Add(tviRoot);
    }

    void OnRootExpanded(object sender, RoutedEventArgs e)
    {
        var treeViewItem = e.OriginalSource as TreeViewItem;

        StartItemLoading(treeViewItem, GetDrives, AddItem);

    }

    void OnItemCollapsed(object sender, RoutedEventArgs e)
    {
        var treeViewItem = e.OriginalSource as TreeViewItem;

        if (treeViewItem != null)
        {
            treeViewItem.Items.Clear();
            treeViewItem.Items.Add(_dummyNode);
        }

    }

    void OnFolderExpanded(object sender, RoutedEventArgs e)
    {
        var tviSender = e.OriginalSource as TreeViewItem;

        e.Handled = true;
        StartItemLoading(tviSender, GetFilesAndFolders, AddItem);
    }

    void StartItemLoading(TreeViewItem tviSender, DEL_GetItems actGetItems, AddSubItemDelegate actAddSubItem)
    {
        tviSender.Items.Clear();

        LoaderDelegate actLoad = LoadSubItems;

        actLoad.BeginInvoke(tviSender, tviSender.Tag as string, actGetItems, actAddSubItem, ProcessAsyncCallback, actLoad);
    }

    void LoadSubItems(TreeViewItem tviParent, string strPath, DEL_GetItems actGetItems, AddSubItemDelegate actAddSubItem)
    {
            var itemsList = actGetItems(strPath).ToList();

            Dispatcher.BeginInvoke(DispatcherPriority.Normal, actAddSubItem, tviParent, itemsList);
    }

    // Runs on Background thread.
    IEnumerable<ItemToAdd> GetFilesAndFolders(string strParent)
    {
        var list = Directory.GetDirectories(strParent).Select(itemName => new ItemToAdd() {Path = itemName, TypeOfTheItem = ItemType.Directory}).ToList();

        list.AddRange(Directory.GetFiles(strParent).Select(itemName => new ItemToAdd() {Path = itemName, TypeOfTheItem = ItemType.File}));

        return list;
    }

    // Runs on Background thread.
    IEnumerable<ItemToAdd> GetDrives(string strParent)
    {
        return (Directory.GetLogicalDrives().Select(x => new ItemToAdd(){Path = x, TypeOfTheItem = ItemType.DiscDrive}));
    }

    void AddItem(TreeViewItem tviParent, IEnumerable<ItemToAdd> itemsToAdd)
    {
        string imgPath = "";

        foreach (ItemToAdd itemToAdd in itemsToAdd)
        {
            switch (itemToAdd.TypeOfTheItem)
            {
                case ItemType.File:
                    imgPath = @"Images/File.png";
                    break;
                case ItemType.Directory:
                    imgPath = @"Images/Folder.png";
                    break;
                case ItemType.DiscDrive:
                    imgPath = @"Images/DiskDrive.png";
                    break;
            }

            if (itemToAdd.TypeOfTheItem == ItemType.Directory || itemToAdd.TypeOfTheItem == ItemType.File)
                IntAddItem(tviParent, System.IO.Path.GetFileName(itemToAdd.Path), itemToAdd.Path, imgPath);
            else
                IntAddItem(tviParent, itemToAdd.Path, itemToAdd.Path, imgPath);                 
        }            
    }

    private void IntAddItem(TreeViewItem tviParent, string strName, string strTag, string strImageName)
    {
        var tviSubItem = new TreeViewItem();
        tviSubItem.Header = strName;
        tviSubItem.Tag = strTag;
        tviSubItem.Items.Add(_dummyNode);
        tviSubItem.Expanded += OnFolderExpanded;
        tviSubItem.Collapsed += OnItemCollapsed;

        TreeViewItemProps.SetItemImageName(tviSubItem, strImageName);

        tviParent.Items.Add(tviSubItem);
    }

    private void ProcessAsyncCallback(IAsyncResult iAR)
    {
        // Call end invoke on UI thread to process any exceptions, etc.
        Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal, (Action)(() => ProcessEndInvoke(iAR)));
    }

    private void ProcessEndInvoke(IAsyncResult iAR)
    {
        try
        {
            var actInvoked = (LoaderDelegate)iAR.AsyncState;
            actInvoked.EndInvoke(iAR);
        }
        catch (Exception ex)
        {
            // Probably should check for useful inner exceptions
            MessageBox.Show(string.Format("Error in ProcessEndInvoke\r\nException:  {0}", ex.Message));
        }
    }

    private struct ItemToAdd
    {
        public string Path;
        public ItemType TypeOfTheItem;
    }

    private enum ItemType
    {
        File,
        Directory,
        DiscDrive
    }
}

public static class TreeViewItemProps
{
    public static string GetItemImageName(DependencyObject obj)
    {
        return (string)obj.GetValue(ItemImageNameProperty);
    }

    public static void SetItemImageName(DependencyObject obj, string value)
    {
        obj.SetValue(ItemImageNameProperty, value);
    }

    public static readonly DependencyProperty ItemImageNameProperty;

    static TreeViewItemProps()
    {
        ItemImageNameProperty = DependencyProperty.RegisterAttached("ItemImageName", typeof(string), typeof(TreeViewItemProps), new UIPropertyMetadata(string.Empty));
    }
} 
```

**xml:**

```
<Window x:Class="ThreadedWpfExplorer.DemoWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ThreadedWpfExplorer"
    Title="Threaded WPF Explorer" Height="840" Width="350" Icon="/ThreadedWpfExplorer;component/Images/Computer.png">
    <Grid>
        <TreeView x:Name="foldersTree">
            <TreeView.Resources>
                <Style TargetType="{x:Type TreeViewItem}">
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate DataType="ContentPresenter">
                                <Grid>
                                    <StackPanel Name="spImg" Orientation="Horizontal">
                                        <Image Name="img"  
                                               Source="{Binding 
                                                           RelativeSource={RelativeSource 
                                                                            Mode=FindAncestor, 
                                                                            AncestorType={x:Type TreeViewItem}},
                                                                            Path=(local:TreeViewItemProps.ItemImageName)}" 
                                               Width="20" Height="20"  Stretch="Fill" VerticalAlignment="Center" />
                                        <TextBlock Text="{Binding}" Margin="5,0" VerticalAlignment="Center" />
                                    </StackPanel>
                                </Grid>

                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TreeView.Resources>
        </TreeView>
    </Grid>
</Window> 
```

**替代加载块中的项目：**

```
private const int rangeToAdd = 100;

void LoadSubItems(TreeViewItem tviParent, string strPath, DEL_GetItems actGetItems, AddSubItemDelegate actAddSubItem)
{
    var itemsList = actGetItems(strPath).ToList();

    int index;
    for (index = 0; (index + rangeToAdd) <= itemsList.Count && rangeToAdd <= itemsList.Count; index = index + rangeToAdd)
    {
        Dispatcher.BeginInvoke(DispatcherPriority.Normal, actAddSubItem, tviParent, itemsList.GetRange(index, rangeToAdd));
    }

    if (itemsList.Count < (index + rangeToAdd) || rangeToAdd > itemsList.Count)
    {
        var itemsLeftToAdd = itemsList.Count % rangeToAdd;

        Dispatcher.BeginInvoke(DispatcherPriority.Normal, actAddSubItem, tviParent, itemsList.GetRange((rangeToAdd > itemsList.Count) ? index : index - rangeToAdd, itemsLeftToAdd));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:08:06.033

您正在寻找的内容称为 UI 虚拟化，并受到许多不同 WPF 控件的支持。特别是关于 TreeView，有关如何打开虚拟化的详细信息，请参阅[本文。](http://msdn.microsoft.com/en-us/library/cc716882.aspx)

一个主要的警告是，为了从此功能中受益，您需要使用 ItemsSource 属性并提供集合中的项目，而不是直接从代码中添加项目。无论如何，这是一个好主意，但可能需要进行一些重组才能使其与现有代码一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:56:37.323

为什么不直接创建您的可观察集合并从 xaml 绑定到它？

查看 MvvM 设计模式，您只需创建一个类，并将 xaml 指向它，在那里，从初始化开始，创建您的列表，然后告诉树视图绑定到该列表，显示您的每个项目的属性列表。

我知道这在信息上有点少，但是做 MvvM 真的很容易，只要看看 stackoverflow，你就会看到例子。

你真的不需要在每个项目上调用 begininvoke - 这不是从 mvvm 的角度来看 - 只是绑定到一个列表。

您也可以对对象使用索引“级别”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T07:46:22.640

另一个有用的技术是这方面，是数据虚拟化。CodeProject 上有一篇很好的文章和示例项目，它讨论了[WPF 中的数据虚拟化。](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)

# vbscript - 如何使用 Visual Basic 结束进程？

> ID：14989531
> 
> 赞同：0
> 
> 时间：2013-02-20T20:42:37.623
> 
> 标签：vbscript, kill, kill-process

基本上，我制作了一个同时具有“RUN BOT”和“KILL BOT”按钮的程序。我的问题是我使用什么代码来“杀死”机器人，或者换句话说，在单击“RUN BOT”按钮时关闭它正在运行的“batchfile.bat”。感谢所有未来的帮助！

![带有两个按钮的应用程序](../Images/fecc72ad3ecc0778f25df5f93e187d8e.png)

这是到目前为止的代码：

```
Public Class Form1
    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Process.Start("C:\batchfile.bat")
    End Sub
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:56:29.523

将 Process.Start() 方法返回的 Process 实例存储在实例变量中。然后，调用更适合您需要的[CloseMainWindow](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow%28v=vs.71%29.aspx)或[Kill 。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill%28v=vs.71%29.aspx)

编辑：这适用于 VS 2010

```
Public Class Form1
Private p As Process

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    p = Process.Start("c:\batchfile.bat")
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    p.Kill()
End Sub
End Class 
```

# nhibernate - 如何从 hasmany 关系中仅返回一个特定项目

> ID：14989536
> 
> 赞同：2
> 
> 时间：2013-02-20T20:42:54.880
> 
> 标签：nhibernate

虽然我多次受益于这个网站的集体智慧，但这是我在这里的第一个问题。

比如说，我有三个这样的课程：

```
public class ClassA
{
    public ClassA() {}

    public virtual IList<ClassB> ClassBs { get; set; }
}

public class ClassB
{
    public ClassB() {}

    public virtual DateTime StartDate { get; set; }
    public virtual DateTime? EndDate { get; set; }
    public virtual ClassC SomeObject { get; set; }
}

public class ClassC
{
    public ClassC() {}

    public virtual string Name { get; set; }
} 
```

我正在使用 NHibernate (3.3.1.4) 和 FluentNHibernate (1.3.0.733)，映射文件是：

```
public Class ClassAMap : ClassMap<ClassA>
{
    HasMany(x => x.ClassBs);
}

public Class ClassBMap : ClassMap<ClassB>
{
    Map(x => x.StartDate).Not.Nullable();
    Map(x => x.EndDate).Nullable();
    References(x => x.SomeData).Not.Nullable();
}

public Class ClassCMap : ClassMap<ClassC>
{
    Map(x => x.Name).Not.Nullable();
} 
```

还有 ID 和版本控制，但我不知何故认为它们无关紧要。

我想做的是：

```
select all "SomeObject"s from ClassBs of all "ClassA"s which have their "EndDate"s null and which have the most current StartDate in their group. 
```

我尝试了一些使用 QueryOver 的杂耍，但我能得到的最多的是一个`IList<IList<ClassB>>`与我想要完成的目标相去甚远的东西。

编辑：（我认为）以下代码使用 Linq 完成任务。但是此代码需要数据库中的所有记录。这对于每个 ClassA 最多 3 条记录左右的 ClassB 可能不是问题，但对于具有数百条记录的 ClassB，这意味着从 DB 中获取所有这些记录以仅使用 DB 中每个 ClassA 的 ClassB 中的一条记录。

```
IList<ClassC> classCLs = new List<ClassC>();
ClassB latest = null;
foreach (
    IList<ClassB> classBLs in 
        Session.QueryOver<ClassA>()
            .Select(c => c.ClassBs).List<IList<ClassB>>()
) {
    latest = classBLs.Where(cB => cB.EndDate == null).Aggregate((curr, next) => next.StartDate > curr.StartDate ? next : curr);
    if (latest != null && !classCLs.Contains(latest.SomeObject)) {
        classCLs.Add(latest.SomeObject);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:36:22.647

假设您的 ClassA 具有 Id 属性，也许这涉及子查询可能会有所帮助：

```
ClassA aAlias = null;
ClassB bAliasMax = null, bAlias = null;

var subQuery = QueryOver.Of<ClassA>().JoinAlias(a => a.ClassBs, () => bAliasMax)
                        .Where(Restrictions.On(() => bAliasMax.EndDate).IsNotNull)
                        .Where(a=>a.Id==aAlias.Id)
                        .Select(Projections.Max(() => bAliasMax.StartDate));

var result =
    _laSession.QueryOver(() => aAlias)
                .JoinAlias(a => a.ClassBs, () => bAlias)
                .WithSubquery.WhereProperty(() => bAlias.StartDate).Eq(subQuery)
                .Select(Projections.Property(() => bAlias.SomeObject))  // suggested adding from question's author
                .List<ClassC>(); // see above 
```

我想有更有效的答案，这将涉及分组。

# typo3 - 从另一个扩展调用 extbase 查询函数

> ID：14989543
> 
> 赞同：1
> 
> 时间：2013-02-20T20:43:20.187
> 
> 标签：typo3, extbase

我使用以下存储库获得了一个基于 TYPO3 extbased 的扩展：

```
public function findSomething() {              
    $query = $this->createQuery();
    $results = $query->execute();     
    return $results;
} 
```

呼叫来自同一分机。不，我得到了第二个扩展，我在其中实例化了第一个扩展：

```
$repo = t3lib_div::makeInstance('the_first_Repository');
$item = $repo->findSomething(); 
```

但是存储库什么也没返回（type=object 有一堆无用的数据）。不，我重写了存储库中的 findSomething() 函数以使用老式的 DBAL 层：

```
public function findSomething() {    
    $items = array();        
    $res = $GLOBALS['TYPO3_DB']->exec_SELECTquery('*','some_table');
    while($row = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res)){
        $items[] = $row;
    }
    return $items;
} 
```

哪个有效。我要做什么才能从我的第二个扩展中使用基于 extbase 的查询框架？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:18:20.047

好的。典型的 8+ 小时编程问题 -.- 我忘了`persistence.storagePid`为第一个扩展的对象添加 。

# flash - 类型 1061：通过静态类型 slotmachine:SlotMachineGame 的引用调用可能未定义的方法 addChild

> ID：14989550
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:04.107
> 
> 标签：flash, addchild

我对这部分代码有问题，它应该将这些片段添加到一个数组中，但我一直收到这个错误。这是代码的一部分：

```
 function addPiece(xCoord:Number,yCoord:Number,id:Number){
        classLoader = getDefinitionByName("piece"+id) as Class;
        var tmp:Piece = new classLoader();
        tmp.x = xOffSet+(xCoord * 128);
        tmp.y = yOffSet+(yCoord * 128);
        tmp.id = id;
        //trace("===>"+tmp.x + ","+tmp.y)
        pieces.push(tmp);
        this.addChild(tmp);
    } 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:35:41.363

您正在调用类上的方法，而不是类的实例，从当前范围内不可用`addPiece()`的静态方法调用。`this`

将片段添加到您的老虎机游戏类的实例中：

```
var slotMachine:SlotMachine = new SlotMachine();
slotMachine.addPiece(0, 0, 1); 
```

否则如果从静态方法调用，`this.addChild()`当前上下文中不存在。

# android - AsyncHttpClient 与 ThreadPoolExecutor 知道所有任务何时完成？

> ID：14989554
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:08.667
> 
> 标签：android, android-asynctask, threadpoolexecutor

我`AsyncHttpClient`用来获取一些 JSON。我的方法将解析 JSON 并触发另一个 get 请求，所以我实际上不知道有多少线程正在运行。经过一番搜索，我想我可以`ThreadPoolExecutor`知道我所有的线程何时完成，所以我可以写入数据库。如果我正在使用，执行者如何知道我提交了工作`AsyncHttpClient.get()`？

```
AsyncHttpClient client = new AsyncHttpClient();
int limit = 20;
BlockingQueue<Runnable> q = new ArrayBlockingQueue<Runnable>(limit);
ThreadPoolExecutor executor = 
                        new ThreadPoolExecutor(limit, limit, 20, TimeUnit.SECONDS, q);
client.setThreadPool(executor);
parseSilo(url, context); // this fires client.get() ... as it encounters urls in JSON feed
executor.shutdown();
while (!executor.awaitTermination(10, TimeUnit.SECONDS)) {
      Log.e(TAG, executor.getTaskCount() + " tasks left");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:49:06.820

我看不到您将工作提交给`ThreadPoolExecutor`

示例代码：

```
executor.execute(new Runnabale() {
    public void run() {
       // your job code
    }
}); 
```

**编辑：**

我刚刚注意到您正在覆盖默认值`ThreadPoolExecuter`，`AsyncHttpClient`因此在发出请求时将使用它（例如`get`），它应该可以在不显式发送任何内容的情况下工作`executor`

您还可以覆盖该方法`terminated()`而不是循环直到所有任务完成。

# google-apps-script - 如何在 Logger 中显示电子表格名称

> ID：14989555
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:10.240
> 
> 标签：google-apps-script, google-sheets

我正在尝试从电子表格中获取图表`A`。我将其放入 Chart 对象中，并尝试将其放回电子表格中`B`。

我总是收到“未知的工作表名称”错误。正如您在代码中看到的那样，我一直在尝试在新图表中添加新范围。当我这样做时，`Logger.log(newrange.getSheet())`我确实得到`Sheet`了而不是`SHEETNAME`，就像图表生成器与工作表名称混淆一样。

怎么了？

```
function updateCharts() {
  var ss = SpreadsheetApp.openById("ID");
  var sheet = ss.getSheetByName("SHEETNAME");
  var charts = sheet.getCharts();

  var ss2 = SpreadsheetApp.openById("NEW ID");
  var sheet2 = ss2.getSheetByName("SHEETNAME");

  for (var c=0; c<charts.length; c++) {

    var chart = charts[c];
    var ranges = chart.getRanges();
    var type = chart.getType();
    var info = chart.getOptions();

    var builder = chart.modify();

    var range = ranges[0];

    builder.removeRange(range);

    var startRow = range.getRow();
    var startCol = range.getColumn();
    var numRows = range.getNumRows();
    var numCols = range.getNumColumns();

    var newrange = ss2.getSheetByName("statistiek").getRange(startRow, startCol,     numRows, numCols);

    Logger.log(newrange.getSheet());
    builder.addRange(newrange);

    var title = chart.getOptions().get('title')
    builder.setOption('title', title + " " + p);
    var newchart = builder.build();
    ss2.getSheetByName("statistiek").insertChart(newchart);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:33:59.970

`Logger.log()`需要一个字符串，但你用 . 给它一个对象`newrange.getSheet()`。如果您想要工作表的名称，请尝试此操作：

```
Logger.log(newrange.getSheet().getName()) 
```

要查看电子表格中所有工作表的名称，请尝试：

```
var ss = SpreadsheetApp.openById("ID");
var allSheets = ss.getSheets();
for (i in allSheets) {
  Logger.log("Sheet " + i + " is named " + allSheets[i].getName());
} 
```

# mysql - 使用 OUTFILE 将 mySQL 导出为 CSV

> ID：14989559
> 
> 赞同：1
> 
> 时间：2013-02-20T20:44:15.700
> 
> 标签：mysql, csv

我尝试使用在线找到的 PHP 脚本但没有成功，所以我恢复使用 mySQL 语法 OUTFILE，这是我正在尝试使用的当前代码，尽管它会引发一些错误

```
SELECT Name, ID INTO OUTFILE 'data.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\n' FROM data 
```

它抛出一个错误，如下所示

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:51:48.143

看起来这个错误是由 PHP 引发的。尝试转义双引号

```
SELECT Name, ID INTO OUTFILE 'data.csv' 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"' 
ESCAPED BY '\\' 
LINES TERMINATED BY '\n' 
FROM data 
```

如果上述查询有效，请尝试再次转义反斜杠。

```
SELECT Name, ID INTO OUTFILE 'data.csv' 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"' 
ESCAPED BY '\\\\' 
LINES TERMINATED BY '\n' 
FROM data 
```

# php - 使用 mysql 和 mysqli

> ID：14989562
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:21.473
> 
> 标签：php, mysql, mysqli

如果与数据库的连接使用 mysqli 之类的

```
$conn =  mysqli_connect('localhost', 'user', 'pwd', 'db'); 
```

我还可以使用以下代码吗？

```
function get_book($book_id) {
    return mysql_result(mysql_query("SELECT title FROM books WHERE book_id = '$book_id'"), 0, 'title');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:45:27.793

不，您不能混合使用`mysql_*`和`mysqli_*`功能。

并且由于[`mysql_*`不推荐使用函数](https://wiki.php.net/rfc/mysql_deprecation)，因此选择使用哪个函数很容易。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:47:45.587

我们在目标 php 中使用 mysqli。对于“正常”的程序 php，我们使用 mysql。在 php 手册中阅读它。您不能混合使用此前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:50:09.870

不，Mysqli 与 mysql 不同，你不能使用 mysql 函数。此外，我学会连接到 mysqli 的方式不是使用 mysqli_connect 而是像这样：

```
$conn=new mysqli(/*credentials here*/) 
```

请参阅[PHP 手册](http://www.php.net/manual/en/book.mysqli.php)了解如何使用 mysqli

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T20:50:20.393

这并不简单。您仍然可以使用[程序样式](http://www.php.net/manual/en/mysqli.quickstart.dual-interface.php)，但您必须在函数名称中添加“i”。

即改变：

*   `mysql_result`至`mysqli_result`

*   `mysql_query`至`mysqli_query`

等等。

```
<?php

function list_book() {

    $database_connection =  mysqli_connect('localhost', 'user', 'pwd', 'db') or die('Could Not Connect' . mysql_error());
    $books = array();
    $books_query = mysqli_query("SELECT * FROM book");

    while ($books_row = mysql_fetch_assoc($books_query)) {
        $books[] = array(
            'book_id'    => $books_row['book_id'],
            'book_title' => $books_row['book_title']
        );
    }

    print_r($books);
    exit();
}
?> 
```

# python - 有人可以向我解释一些简单的 python 概念吗？

> ID：14989563
> 
> 赞同：4
> 
> 时间：2013-02-20T20:44:22.067
> 
> 标签：python

我一直在研究“Learn Python the Hard Way”，到目前为止进展顺利，但我有几个问题：

```
the_count = [1, 2, 3, 4, 5]
fruits = ['apples', 'oranges', 'pears', 'apricots']
change = [1, 'pennies', 2, 'dimes', 3, 'quarters']

# this first kind of for-loop goes through a list
for number in the_count:
    print "This is count %d" % number

# same as above
for fruit in fruits:
    print "A fruit of type: %s" % fruit

# also we can go through mixed lists too
# notice we have to use %r since we don't know what's in it
for i in change:
    print "I got %r" % i 
```

在这些 for 循环中，“number”、“fruit”和“i”分别是什么词重要吗？感觉就像 python 中的所有东西都需要定义，但如果这有意义的话，我们从来没有真正“定义”过数字。我不确定如何正确表达这个问题=/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:46:24.087

不，这些名称使用什么并不重要。您可以为这些标识符选择任何您希望的名称，只要它们是有效的 Python 标识符。

命名它们`foo`，，，，随便`bar`。`vladiwostok`当然，*最好*选择一个更具描述性的名称，`fruit`或者`number`在使用它们的上下文中是很棒的名称。

在任何情况下，以下所有 te 都是等价的：

```
for foo in fruits:
    print "A fruit of type: %s" % foo

for bar in fruits:
    print "A fruit of type: %s" % bar

for vladivostok in fruits:
    print "A fruit of type: %s" % vladivostok 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:04:32.207

您用来调用这些变量的实际单词并不重要。显然，如果您将它们称为其他名称，则必须使用新名称来指代它们。

即）你不可能有

```
for bla in the_count:
    print "This is the count &d" %number 
```

因为你还没有定义数字是多少

Python 与许多其他语言的不同之处在于它的类型非常弱。您无需在任何地方明确说明变量的类型。

在 C/C++ 中，整数变量将被定义为

```
int i;
i=24; 
```

在 Python 中，要定义一个变量，只需将其设置为某个值就足够了。例如，

```
i=24 
```

将隐式定义 i 为整数。

同样，该行

```
for number in the_count: 
```

将隐含地将 number 定义为与 the_count 相同类型的变量。

但是，变量的类型可以改变。只需将不同类型的值分配给变量，它就可以切换任意次数。

IE。

```
i=12        #i is an integer
i="bla"     #i has changed to a string
i=true      #i has changeed to a bool 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:19:13.883

正如其他人之前所说，这并不重要，因为 Python 足够聪明，并且能够*在后台理解正在*引用的对象的确切类型。您只需要担心变量的名称是否不奇怪和/或没有意义:)

另外，你说了这句话：

> 在这些 for 循环中，“number”、“fruit”和“i”分别是什么词重要吗？感觉就像 python 中的所有东西都需要定义，但如果这有意义的话，我们从来没有真正“定义”过数字。我不确定如何正确表达这个问题=/

Python 的优点是您不必基于类型编写任何代码，而是基于对象编写代码。我的意思是你不应该使用像这个示例这样的代码：

```
def hello(arg):
   if type(arg) is "str":
       // do something
   elif type(arg) is "list":
       // do another thing 
```

您必须以这种方式尽可能减少限制，因为在 Python 中，许多函数实现了多态性，并且它们可以很好地接受传入参数的不同类型。这使得创建程序变得更加容易，因为该语言是强类型的，但是针对特定问题的编码良好的函数可以处理整数、浮点数和字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:52:27.753

`for <name> in <value>:`在语义上相当于一个循环

```
__iter = iter(<value>)
while 1:
    try:
        <name> = __iter.next()
    except StopIteration:
        break
    <block> 
```

`<name>`因此，只要它通常适合作业的左侧，您就可以放置任何您想要的东西。通常，这是一个普通标识符，但您也可以使用属性：

```
class Namespace: pass
foo = Namespace()

for foo.bar in range(10):
    print foo.bar

l = [1,2,3,4,5]
for l[0] in range(10):
    print l 
```

# c++ - 为什么 max (max(a,b), c) 是错误的

> ID：14989564
> 
> 赞同：3
> 
> 时间：2013-02-20T20:44:22.563
> 
> 标签：c++

参考：来自 C++ 模板的代码片段：完整指南

```
// maximum of two values of any type (call-by-reference) 
template <typename T> 
inline T const& max (T const& a, T const& b) 
{ 
    return a < b ? b : a; 
} 

// maximum of two C-strings (call-by-value) 
inline char const* max (char const* a, char const* b) 
{ 
    return std::strcmp(a,b) < 0 ? b : a; 
} 

// maximum of three values of any type (call-by-reference) 
template <typename T> 
inline T const& max (T const& a, T const& b, T const& c) 
{ 
    return max (max(a,b), c); // error, if max(a,b) uses call-by-value 
} 

int main () 
{ 
    ::max(7, 42, 68); // OK 

    const char* s1 = "frederic"; 
    const char* s2 = "anica"; 
    const char* s3 = "lucas"; 
    ::max(s1, s2, s3); // ERROR 

} 
```

上述代码的陈述问题：

> 问题是，如果你为三个 C 字符串调用 max()，语句
> 
> 返回最大值（最大值（a，b），c）；变成一个错误。这是因为对于 C 字符串，max(a,b) 创建了一个新的临时本地值，该值可能由函数通过引用返回。

问题> 我还是不明白上面的几点。为什么

> “您不能使用三参数版本来计算三个 C 字符串的最大值”？

// 更新

```
const int* fReturnValue(const int *i)
{
    return i;
}

int main()
{
    int i = 3;
    const int* i4= fReturnValue(&i);

    cout << &i << endl;
    cout << i4 << endl;
} 
```

观察：两行返回相同的地址。所以我假设在函数 fReturnValue 中，函数按值返回，但它不会伤害 b/c，它是一个指针地址。换句话说，返回地址仍然有效。

真的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T20:50:27.507

问题是*C 字符串*风格的`max`按值返回，而不是按值获取参数。通用的 3 路`max`函数被声明为返回一个引用，但*C 字符串* `max`返回一个值，这将导致返回一个临时引用，该引用在您访问它之前就已失效。

**更新**：您添加的新代码不等同于您原来的问题。这个会：

```
const int*& fReturnValue(const int *i)
{
    return i;
} 
```

请注意，它`fReturnValue`返回对局部变量的引用`i`，其生命周期在函数返回时结束。因此该函数返回对无效对象的引用。尝试使用该更改编译您的代码，您应该会从几乎每个编译器中收到警告。

# c# - 有没有比使用字符串数组更好的方法来组织这些数据？

> ID：14989567
> 
> 赞同：3
> 
> 时间：2013-02-20T20:44:27.647
> 
> 标签：c#, xml

我有两个循环从两个 XML 源中提取数据：

循环1：

```
foreach (XmlNode nodes in node.ChildNodes)
            {
                if (nodes.Name == "DEFAULT")
                    defaults[count] = nodes.InnerText;
                if (nodes.Name == "TYPE"
                    types[count] = nodes.InnerText;
                if (nodes.Name == "COL_NAM"
                    names[count] = nodes.InnerText;

            }
            count++; 
```

循环2：

```
foreach (XmlNode nodes in root.ChildNodes)
        {
            vals[i] = nodes.InnerText;
            cols[i] = nodes.Name;
            i++;
        } 
```

不知何故，我想将这些数据组织成一个终极对象。该对象需要有 4 个部分：名称、类型、值和默认值。本质上，我想将 Loop1 中的所有内容组合在一起，然后将 Loop2 中的所有内容组合在一起，然后将这两个对象添加到一个对象中，匹配来自 Loop1 的名称和来自 Loop2 的 cols。理想情况下，Loop2 中的节点数量可能少于 Loop1。但是，如果那不可能，我可以解决它。

为了更好地了解最终对象：

```
object everything = {{names}, {types}, {values}, {defaults}}; 
```

名称将来自两个循环，并将成为对象的“关键”。类型和默认值将来自 Loop1，值将来自 Loop2。串联将使用名称/列进行匹配。

PS：我尝试使用 2D 字符串数组来执行此操作，但在尝试组合匹配 cols 和 names 字段的两个时遇到了麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:53:12.347

您可以使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)类并将`Name`用作对象的键。

例如：

```
public class MyObj{
  public string Name{get;set;};
  public string Type{get;set;};
  public string Value{get;set;};
  public string Default{get;set;};
} 
```

并修改您的循环以使用它：

```
var allObjs = new Dictionary<string, MyObj>();   

foreach (XmlNode nodes in node.ChildNodes)
{
  var obj = new MyObj();
    if (nodes.Name == "DEFAULT")
      obj.Default = nodes.InnerText;
    ...
    allObjs.Add(obj.Name, obj);
} 
```

然后在第二个循环中使用键检索现有对象以更新值。像这样的东西：

```
foreach (XmlNode nodes in root.ChildNodes)
{
  var myObj = allObs[nodes.Name];
  myObj.Value = nodes.InnerText;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:35:56.757

好吧，您可以使用 XPath 来选择您的值。

```
public class Ultimate
{
    public Ultimate(XmlNode node)
    {
       XmlNode child = node.SelectSingleObject("./COL_NAM");
       if (child == null) throw new InvalidArgument("COL_NAM not found");
       Name = child.InnerText;

       XmlNode child = node.SelectSingleObject("./TYPE");
       if (child == null) throw new InvalidArgument("TYPE not found");
       Type = child.InnerText;

       XmlNode child = node.SelectSingleObject("./DEFAULT");
       if (child == null) throw new InvalidArgument("DEFAULT not found");
       Default = child.InnerText;

       XmlNode child = node.SelectSingleObject("./COL_NAM");
       if (child == null) throw new InvalidArgument("COL_NAM not found");
       Name = child.InnerText;

    }
    public string Name;
    public string Type;
    public string Value;
    public string Default;
} 
```

// 读取对象会是这样的：

```
Dictionary<string, Ultimate> ultimateCollection = new Dictionary<string, Ultimate>();
foreach(XmlNode node in xmlDocument1.SelectNodes("/DATA1"))
{
    Ultimate ultimate = new Ultimate(node);
    ultimateCollection.Add(ultimate.Name, ultimate);
}

foreach(XmlNode node in root.ChildNodes)
{
    Ultimate ultimate;
    if (ultimateCollection.TryGetValue(node.Name, out ultimate))
        ultimate.Values = node.InnerText;
} 
```

我希望这对你的追求有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:58:11.400

根据您的描述，我会使用 XElement \ LINQ。 [http://codingsense.wordpress.com/2008/09/23/join-xml-using-linq/](http://codingsense.wordpress.com/2008/09/23/join-xml-using-linq/)

*..和/或..*

将 xml 序列化/反序列化为 C# 对象 [http://www.java2s.com/Code/CSharp/XML/XmlSerializationHelper.htm](http://www.java2s.com/Code/CSharp/XML/XmlSerializationHelper.htm)

# jquery - 点击后如何设置表格奇/偶行样式按钮

> ID：14989568
> 
> 赞同：1
> 
> 时间：2013-02-20T20:44:28.710
> 
> 标签：jquery, css, input, internet-explorer-8, input-type-file

我允许用户使用 <input type=file> 按钮将文件添加到页面。每个文件都作为新行添加到表中。我需要为奇数行和偶数行设置不同的背景颜色。我现在在我的风格中使用第 n 个孩子，但我需要 IE8 的解决方案。

在 IE 8 中：每次用户添加新文件时，我都需要表格来设置行的背景颜色。

到目前为止，这是我的代码：

```
<style>
 .OddRow {
    background: #eeeeee;   
    border-bottom: 1px solid #ccc;  
}

.EvenRow {
    background: #fff;     
    border-bottom: 1px solid #ccc;
}

</style>

        <span class="addfiles">
            <span>Add Files...</span>
            <input id="addFile" type="file" name="files[]" multiple>
        </span>

<table class="table table-striped">
    <tbody class="files"></tbody>
</table>

 <script>
    $(function () {
        $('#addFile').change(function () {
            $(".table table-striped tbody tr:even td").addClass('EvenRow');
            $(".table table-striped tbody tr:odd td").addClass('OddRow');
        });     
    });

 </script> 
```

正在调用更改函数，但未应用行样式。我已经为 .addClass 代码尝试了许多事件和位置，所以我真的很感激对此的另一种看法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:49:13.513

您正在选择`td`而不是表格行本身。也`table-striped`没有正确定位（假设它是另一个类）。将您的 jQuery 选择器更改为

```
 $(".table.table-striped tbody tr:even").addClass('EvenRow');
    $(".table.table-striped tbody tr:odd").addClass('OddRow'); 
```

# php - Perl 的 PHP/MySQL 表搜索

> ID：14989570
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:44:33.933
> 
> 标签：php, mysql, perl

由于对 perl/MySQL 的了解不够，我希望这里有人可以提供帮助。该代码显然不起作用，但这是我到目前为止所拥有的，我仍在学习。

我想打开并搜索`$ticket_id`从 php 页面获得的数据库，并获取电子邮件地址和/或电话电子邮件中的一个或两个（如果有的话）`$ticket_id`。至少会有一个。

因为我似乎每隔一段时间就会被问到这个问题。（这不是学校项目。我从 75 岁起就辍学了）。

我的脚本在没有信息的数据库查找的情况下工作，但我必须使用ticket_id 和电子邮件地址对每个设置进行手动编码。很高兴我只有 5 个人在使用它，但一直被其他想要使用它的人询问。因此，我认为这是简化使用 MySQL 数据库的过程的好时机，如果我忙于使用 MySQL 数据库，除了填写表单页面来添加他们的信息之外，我不需要做太多工作。

在需要搜索的数据库中有 3 个表，我需要搜索 ticket_id，然后获取作为他们的电子邮件地址和/或电话电子邮件的用户名，但根据他们想要的通知类型，其中一个可能为空。

这可以根据需要进行更改。它只有一条记录可用于此新设置。

```
username:  email(at)address(dot)com
ticket_id: 1-YS25UHRN3N9D
phone: 1234567890(at)cellphone(dot)com 
```

有人告诉我这可以用 JavaScript window.onload 来完成，因此不需要将 HTML 页面更改为 PHP，但根本不知道 JavaScript。

回声脚本可能是错误的。`$pg`此时脚本很好地接收了`echo`它，不需要它。

PHP 页面顶部

```
<?php
  $ip = $_SERVER['REMOTE_ADDR']; // Client IP address
  $pg = $_SERVER['HTTP_REFERER']; // What page did they view
  $ticket_id = '1-YS25UHRN3N9D'; // Ticket id
  $message = '1'; // 1=email, 2=text, 3=email & text
  $url = "/cgi-bin/log_it.cgi"; // back-end url
echo '<script type="text/javascript" src="' . $url . '?id=' . $id . '&amp;ip=' . $ip 
.  '?ticket_id=' . $ticket_id . ' . '?message=' . $message . '"></script>';
?> 
```

有人告诉我将数据库登录信息放在 cgi 中是不好的，但我不知道如何将其放入 php 文件并从 perl 或其他方式访问该文件。

```
#!/usr/bin/perl -W

use CGI;
use CGI param;
use POSIX qw/strftime/;

# database
$host = "localhost";
$database = "users";
$tablename = "tickets";
$user = "username";
$pw = "password";

# Obtain $id & $ip from web page.
$id = param("ticket_id");
$ip = param("ip");

# message
# 1 = email
# 2 = phone
# 3 = both
$message = param("message");

# Connect to database
$connect = Mysql->connect($host, $database, $user, $pw);

# DB
$connect->selectdb($database);

# MySQL QUERY
$myquery = "SELECT ticket_id FROM user";

# QUERY
$myquery = "SELECT ticket_id FROM $tablename";

# Need to be worked on.
# If record not found.
#
#  "To Do" send a page or popup if the id is not valid.
#    $file = "/var/log/invalid_id_iptrace.txt";
#    open(FILE, ">$file");
#   print FILE strftime("%A %B %d, %Y - %I:%M %p %Z\n", localtime(time) );
#    print FILE " -- IP Address: $ip\n\t Accessed unknown $id:\n------\n";
#    close(FILE);
#    system("mail -s 'Page visited Unknown' admin\@mydomain.com \< /var/log
#    /invalid_id_iptrace.txt");
# exit();

#check if we have a matching $id == $ticket_id
if ($id =~ /$ticket_id/) {

 #if we have a match open the file to write.
 $file = "/var/log/$ticket_id_iptrace.txt";
 open(FILE, ">$file");

 # lets put the time in the file.
 print FILE strftime("%A %B %d, %Y - %I:%M %p %Z\n", localtime(time) );

 # put the IP address and web page visited.
 print FILE " -- IP Address: $ENV{REMOTE_ADDR}\n\t Accessed your page:
 $ENV{HTTP_REFERER}\n------\n";
 print FILE " -- Here is the IP information we found:\n------\n";

 #close the file. Finished with the first part
 close(FILE);

 # Run the IP2Location script.
 system("./iptrace.sh $ENV{REMOTE_ADDR} json city>>/var/log/$ticket_id_iptrace.txt");

 # Lets send an email and or text with all the information.

 # Send email
 if($message =~ /1/) {
  system("mail -s 'Web Page visited' $username \< /var/log/$ticket_id_iptrace.txt");
 }

 # Send text
 if($message =~ /2/) {
  system("mail -s 'Web Page visited' $phone \< /var/log/$ticket_id_iptrace.txt");
 }

 # Send email and text message
 if($message =~/3/) {
  system("mail -s 'Web Page visited' $username \< /var/log/$ticket_id_iptrace.txt");
  system("mail -s 'Web Page visited' $phone \< /var/log/$ticket_id_iptrace.txt");
 }
 exit();
 }

exit();
#end of script 
```

谢谢

**更新：**代码的第二个（清理）版本：

```
#!/usr/bin/perl
use warnings;
use strict;
use CGI qw/param/;
use DBI();

# database
my $host = "remotehost";
my $database = "database";
my $tablename = "table";
my $user = "user";
my $pw = "pwd";

# Obtain $id & $ip from web page.
my $id = param("id");
my $ip = param("ip");
my $ticket_id = "ticket_id";
my $file = "/tmp/_iptrace.txt";
my $fileb = "/tmp/invalid_id_iptrace.txt";
my $fh = "FILE";
my $phone = "phone";
my $username = "username";
# message
# 1 = email
# 2 = phone
# 3 = both
my $message = param("message");

# Connect to database
my $connect = Mysql->connect($host, $database, $user, $pw);

# DB
$connect->selectdb($database);

 # QUERY
my $myquery = "SELECT ticket_id FROM $tablename";

# EXECUTE
my $execute = $connect->query($myquery);

#check if we have a matching $id == $ticket_id
if ($id == $payer_id) {
#if we have a match open the file to write.
open(my $fh, '>', $file) or die $!;

# lets put the time in the file.
print $fh strftime("%A %B %d, %Y - %I:%M %p %Z\n", localtime(time) );

# put the IP address and web page visited.
print $fh " -- IP Address: $ENV{REMOTE_ADDR}\n\t Accessed your page:
    $ENV{HTTP_REFERER}\n------\n";
print $fh " -- Here is the information we found:\n------\n";

#close the file. Finished with the first part
close($fh);

# Run the IP2Location script.
system("./iptrace.sh $ENV{REMOTE_ADDR} json city>>/tmp/$ticket_id$file");

# Lets send an email and or text with all the information.
# Send email
    if($message == 1) {
    system("mail -s 'Web Page visited' $username \< /tmp/$ticket
            _id$file");
    }
    # Send text
    if($message == 2) {
    system("mail -s 'Web Page visited' $phone \< /tmp/$ticket
            _id$file");
}
# Send email and text message
if($message == 3) {
    system("mail -s 'Web Page visited' $username \< /tmp/$ticket
            _id$file");
    system("mail -s 'Web Page visited' $phone \< /tmp/$ticket
            _id$file");
    }
exit();
}
#  "To Do" send a page or popup if the id is not valid.

open($fh, ">$fileb");
print $fh strftime("%A %B %d, %Y - %I:%M %p %Z\n", localtime(time) );
print $fh " -- IP Address: $ip\n\t Accessed unknown $id:\n------\n";
close($fh);
system("mail -s 'Page visited Unknown' admin\@mydomain.com \<
/tmp/invalid_id_iptrace.txt");

exit();
#end of script 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:41:50.010

您的帖子中似乎没有问题。您说“代码显然不起作用”，但您没有告诉我们您看到的意外行为是什么样的。所以这里有一些关于你的代码的评论。其中之一可能会解决这个问题。

1/ 在 shebang 线上应该是“-w”，而不是“-W”。事实上，这些天你应该只删除'-w'并`use warnings;`在shebang线下方包含。

2/您还应该`use strict;`在下面添加`use warnings;`。这似乎会完全破坏您的程序，因为它会坚持要求您预先声明所有变量 - 您使用`my`(`my $host = 'localhost'`等) 来做这些。一开始这会很痛苦，但这是一个非常好的习惯。

3/ 你只需要一根`use CGI`线。它应该是`use CGI qw/param/;`。

4/ 你正在使用一个名为 Mysql 的类。但是您不会在任何地方加载该类。那个类是从哪里来的？你真的应该使用[DBI](https://metacpan.org/module/DBI)和[DBD::mysql](https://metacpan.org/module/DBD%3a%3amysql)的组合。

5/ 你输入了一个 SQL 查询，`$mysquery`但随后你立即用另一个查询覆盖它。这不会导致错误 - 这可能只是表明您有些困惑。

6/ 你`if ($id =~ /$ticket_id/)`几乎可以肯定写成`if ($id == $ticket_id)`. 如果您只是比较两个数字，则无需使用正则表达式。

7/ 你真的应该检查你调用的返回值`open`。

```
open(FILE, ">$file") or die $!; 
```

事实上，我会重写它以使用 3-arg open 和 autovivified 文件句柄。

```
open(my $fh, '>', $file) or die $!; 
```

然后，您需要更改`FILE`整个`$fh`代码。

8 / 同样，您的三个比较`$message`可以只是简单的`==`匹配，而不是使用正则表达式匹配。

如果你打算做很多这样的事情，那么我真的建议你阅读一本好书，比如“Learning Perl”或“Beginning Perl”。

# c# - 在 linux vps (CentOS 5) 上运行一小段 C# 或 VB 或 asp 代码

> ID：14989573
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:43.547
> 
> 标签：c#, php, linux, mono

我需要在我的 linux vps 上运行一小段代码（如下）来生成基于特定 ID 号的字符串。我对 PHP 不是很有经验，但我尝试过 PHP 中的编码算法，但我总是得到与 c# 代码不同的结果——很可能是由于 Randomize 或 Rnd 函数的运行方式。

对于这么小的东西，单声道是一个有效的解决方案吗？实施中涉及什么。任何信息都是有用的，我可以做更多的研究，但我只需要验证我没有浪费时间试图让它在 Linux 上运行。有人有使用 Mono 处理小脚本的经验吗？

*编辑*我对任何有这么小的单声道实现经验的人都非常感兴趣。

c# 的代码如下。在此运行之前，我将调用我的数据库以检索存储在 unqiueid 字符串变量中的数字。在此代码段运行后，我将拥有将 unlockcode 变量写入数据库的代码。

```
var rnum = Microsoft.VisualBasic.VBMath.Rnd(-1);
var seed = 2 * uniqueid.AsInt();
Microsoft.VisualBasic.VBMath.Randomize(seed);
for (int i = 1; i <= 6; i++)
{
   unlockcode = unlockcode + Convert.ToChar((int)((26) * Microsoft.VisualBasic.VBMath.Rnd() + 1 + 64));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:49:53.103

我对你的问题有点疑惑。
应用程序的有限大小不是“不”使用 Mono 的理由。

但是，当您以 Linux 为目标时，您应该避免使用特定于 Windows 的东西。
例如，您不能在 Linux 上运行 WPF 应用程序。

理论上，您可以只编译代码并在 Linux 上使用 Mono 运行它，
但您使用的是 Microsoft.VisualBasic 中的类。我没有检查它是否在 Mono 上可用，但即使是，也没有必要使用它：

```
var unlockCode = 0;
var random = new Random(Convert.ToInt32(uniqueId));
var randomNumber = random.Next();
for (int i = 1; i < 6; i++)
{
    unlockCode += Convert.ToChar((int)((26) * random.Next() + 1 + 64));
} 
```

使用 System.Random 而不是 Microsoft.VisualBasic.VBMath.Randomize，这样就少了一个需要担心的依赖项。

我还应该注意，当您在 Windows 上使用例如 Visual Studio 进行
编译时，无需重新编译即可在 Linux 上使用它，只需复制已编译的程序集 (exe) 并将其部署到 Linux 上并执行它与单声道。

反之亦然，如果您在 Linux 上使用 mono csharp 编译器编译应用程序，您可以简单地将其复制到您的 Windows 机器并使用 .NET（或 Mono）执行它

如果您在 Windows 上编译了一个应用程序并想知道它是否使用了 Linux/Mono 上不可用的任何东西，请使用 MoMa 工具：[http ://www.mono-project.com/MoMA](http://www.mono-project.com/MoMA)

它会告诉你如果在 Linux/Mono 上运行应用程序会遇到什么问题。

更新：关于您的评论

> 运行 Mono 只是为了运行 7 行遗留 c# 代码似乎有点傻

它没有什么可笑的……当然它会占用一些磁盘空间，但它不是一个在后台连续运行的进程或其他任何东西。Mono 运行时在您执行应用程序时使用，并在没有其他 Mono/.NET 应用程序处于活动状态时停止。Python 应用程序甚至命令行 PHP 应用程序也是如此。在您的系统上安装 Mono 并没有什么坏处，我不会担心。

# jquery - jQuery词云验证错误

> ID：14989574
> 
> 赞同：0
> 
> 时间：2013-02-20T20:44:45.467
> 
> 标签：jquery, css, html, rel

请帮助！:) 我在尝试验证（HTML5）jQuery 词云时遇到问题。

我收到了所有 rel 值的信息：“元素 a 上的属性 rel 的错误值 1：不是绝对 IRI。字符串 1 不是注册关键字或绝对 URL。”

另外我应该在 jQuery 中进行哪些修改？！[在此处输入图像描述][1]

```
 <div id="tagcloud">
    <a class="pointOne" rel="0.1" href="http://www.text.dk/" target="_blank">Text</a>
    <a class="two" rel="2" href="http://www.text.dk/" target="_blank">Text</a>
    <a class="three" rel="3" href="http://www.text.dk/" target="_blank">Text</a>
    <a class="four" rel="4" href="http://www.text.dk/" target="_blank">Text</a>
    <a class="five"rel="5" href="http://www.text.dk/" target="_blank">Text</a>
        <a class="six" rel="6" href="http://www.text.dk/" target="_blank">Text</a>
        <a class="seven" rel="7" href="http://www.text.dkk" target="_blank">Text</a>
        <a class="eight" rel="8" href="http://www.text.dk/" target="_blank">Text</a>
        <a class="five" rel="5" href="http://www.text.dk/" target="_blank">Text</a>
        <a class="seven" rel="7" href="http://www.text.dk/" target="_blank">Text</a>
        <a class="three" rel="3" href="http://www.text.dk/" target="_blank">Text </a>
        <a class="one" rel="1" href="http://www.text.dk/">Text</a>
        <a class="twelve"rel="12" href="http://www.text.dk/">Text</a>
        <a class="one" rel="1" href="http://www.text.dk/">Text</a>
        <a class="two" rel="2" href="http://www.text.dk/">Text</a>
        <a class="five" rel="5" href="http://www.text.dk/">Text</a>
        <a class="seven" rel="7" href="http://www.text.dk/">Text</a>
        <a class="one" rel="1" href="http://www.text.dk/">Text</a>
        <a class="four" rel="4" href="http://www.text.dk/">Text</a>
        <a class="one" rel="1" href="http://www.text.dk/">Text</a>
        <a class="two" rel="2" href="http://www.text.dk/">Text</a>

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:59:33.253

数字不是属性的[有效值](https://developer.mozilla.org/en-US/docs/HTML/Element/link)`rel`：

> 此属性命名链接文档与当前文档的关系。**该属性必须是链接类型值的空格分隔列表**。该属性最常见的用途是指定指向外部样式表的链接：rel 属性设置为样式表，href 属性设置为外部样式表的 URL 以格式化页面。

可接受的[链接类型值为](https://developer.mozilla.org/en-US/docs/HTML/Link_types)：`alternate`, `archives`, `author`, `bookmark`, `external`, `first`, `help`, `icon`, `index`, `last`, `license`, `next`, `nofollow`, `noreferrer`, `pingback`, `prefetch`, `prev`, `search`, `stylesheet`, `sidebar`, `tag`, 和`up`.

我建议您改用[自定义数据属性](https://developer.mozilla.org/en/HTML/Global_attributes#attr-data-%2a)，例如：

```
<a class="one" data-rel="1" href="http://www.text.dk/">Text</a> 
```

然后相应地修改您的 JavaScript 以从`data-rel`（或任何您想调用的名称）中获取值，而不是`rel`.

# ruby - Ruby 1.9.3 向 URI.escape 添加不安全字符

> ID：14989581
> 
> 赞同：3
> 
> 时间：2013-02-20T20:45:11.130
> 
> 标签：ruby, escaping, sinatra, uri, ruby-1.9.3

我正在使用 Sinatra 并使用该`get '/foo/:bar' {}`方法从 url 获取参数。不幸的是，in 中的值`:bar`可能包含一些讨厌的东西，比如`/`导致 404，因为没有路由匹配`/foo/:bar/baz`/。我`URI.escape`用来转义 URL 参数，但它认为`/`valid 是一个有效字符。正如[这里](http://usernameguy.livejournal.com/3495.html)提到的，这是因为要检查的默认正则表达式不区分不安全字符和保留字符。我想改变它并这样做：

```
URI.escape("foo_<_>_&_3_#_/_+_%_bar", Regexp.union(URI::REGEXP::UNSAFE, '/')) 
```

只是为了测试它。

`URI::REGEXP::UNSAFE`是根据[Ruby 1.9.3 Documentaton](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html#method-i-escape)匹配的默认正则表达式：

```
escape(*arg)
Synopsis
    URI.escape(str [, unsafe])

Args
    str
        String to replaces in.
    unsafe
        Regexp that matches all symbols that must be replaced with
        codes. By default uses REGEXP::UNSAFE. When this argument is
        a String, it represents a character set.
Description
    Escapes the string, replacing all unsafe characters with codes. 
```

不幸的是，我收到此错误：

```
uninitialized constant URI::REGEXP::UNSAFE 
```

正如[这个 GitHub 问题](https://github.com/ripienaar/graphite-graph-dsl/issues/19)所暗示的，这个 Regexp 已从 1.9.3 的 Ruby 中删除。不幸的是，`URI`模块文档通常有点糟糕，但我真的无法弄清楚这一点。有什么提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T23:36:33.083

[URI#escape](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html#method-i-escape)不是您要查找的内容。你想要[CGI#escape](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escape)：

```
require 'cgi'
CGI.escape("foo_<_>_&_3_#_/_+_%_bar")
# => "foo_%3C_%3E_%26_3_%23_%2F_%2B_%25_bar" 
```

这将正确地对其进行编码以允许 Sinatra 检索它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:34:26.650

也许你会有更好的运气`CGI.escape`？

```
>> require 'uri'; URI.escape("foo_<_>_&_3_#_/_+_%_bar")
=> "foo_%3C_%3E_&_3_%23_/_+_%25_bar"
>> require 'cgi'; CGI.escape("foo_<_>_&_3_#_/_+_%_bar")
=> "foo_%3C_%3E_%26_3_%23_%2F_%2B_%25_bar" 
```

# c# - 定期看到 ASP.NET 错误 CS0656: Missing compiler required member

> ID：14989584
> 
> 赞同：11
> 
> 时间：2013-02-20T20:45:13.610
> 
> 标签：c#, asp.net-mvc, iis-7.5

我在我的 Web 应用程序上偶尔（似乎是随机地）出现以下错误。我们正在运行 Windows Server 2008R2、IIS 7.5、MVC3、.NET 4.5。

![编译器错误](../Images/cb00fb3afcd1d360f73ff97742eebec6.png)

每次都是同样的错误：**CS0656: Missing compiler required member 'Microsoft.CSharp.RuntimeBinder.Binder.BinaryOperation'**

发生此错误时，它可以采取任何措施，从重新启动应用程序池到重新安装我们的应用程序本身，再进行修复。

该错误发生在全新的 VM 映像（之前没有安装我们的软件）以及之前安装了我们的软件的机器上。该错误可能发生在应用程序第一次运行时，或者当应用程序已经坐了足够长的时间让 IIS 应用程序池回收工作进程时（看起来如此）。

这变得非常难以处理，因为我已经对此错误进行了大量研究，并尝试了多种解决方案，但没有运气。此外，错误发生的随机频率使得故障排除非常困难。对此问题的任何见解或可能的解决方案的想法将不胜感激。在这一点上，我几乎愿意尝试任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:26:59.887

这看起来很熟悉。如果我没记错的话，我不得不删除 bin 目录并重新构建，因为旧版本的 dll 到处都是，而且这个类是在 .net 4.0 中引入的

经过一番研究，这个网站似乎同意： http: [//our.umbraco.org/forum/using/ui-questions/20474-Missing-compiler-required-member-MicrosoftCSharpRuntimeBinderBinderInvokeMember](http://our.umbraco.org/forum/using/ui-questions/20474-Missing-compiler-required-member-MicrosoftCSharpRuntimeBinderBinderInvokeMember)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:58:38.343

**[试试*林诚*答案：](http://forums.asp.net/t/1656827.aspx)**

您的 .NET Framework 是什么版本？ASP.NET MVC 3 运行时组件需要 .NET Framework 版本 4 和 Visual Studio 2010 或 Visual Web Developer 2010 Express。想要了解更多信息，请查看[ASP.NET MVC 3 Release Notes](http://www.asp.net/learn/whitepapers/mvc3-release-notes#installation-notes)。

**编译器错误 CS0656 可能由以下问题引起：**

1.  您安装的公共语言运行时已损坏。

2.  您有一个对定义类型的程序集的引用，该类型也在公共语言运行时中找到。但是，您的程序集类型未按照 C# 编译器的预期方式定义。

因此，请检查您的引用以确保您使用的是正确版本的公共语言运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T02:11:34.493

我们曾经在很久以前的 .net 1 及更高版本中随机出现这些编译错误。这需要删除临时 asp.net 文件夹的内容，并找到其他流氓 dll，即使在 Visual Studio 缓存中也是如此。通常，刷新临时 asp.net 文件夹即可。

确保找到所有 dll - bin 文件夹太明显，并记住 dll 是从影子目录执行的。这就是为什么我记得（也来自遥远的记忆）与加载程序集的默认 appdomain 的连接，特别是如果您随后从不同的文件位置加载“相同的程序集”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-06T08:01:15.707

确保在项目中添加了 Microsoft.CSharp 参考。

我将它添加到我的测试项目中，错误消失了。

# standards - 为什么标准经常被关闭？

> ID：14989590
> 
> 赞同：6
> 
> 时间：2013-02-20T20:45:33.060
> 
> 标签：standards

我理解为什么标准可以开放而其实施可以关闭。但是，我在理解逆运算时遇到了问题。例如，C++ 标准是商业的，但它的一些实现（例如 gcc 和 clang）是开源的。我相信PDF也是这样的。

更一般地说，封闭标准是否不会禁止其广泛使用，而这是标准的目标之一？实际上，谁受益于什么，为什么使用封闭标准？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:50:10.220

# java - 使用 onTouch/onClick 改变 Android 上显示的画布绘图

> ID：14989595
> 
> 赞同：0
> 
> 时间：2013-02-20T20:45:54.623
> 
> 标签：java, android

我有一个画布绘图，我将使用 onTouch 来更改绘图的颜色。这是一座房子，一旦触摸屏幕，它就会变成更暗的阴影。我只被告知我需要将方法调用移动到 dayTime 和 nightTime，可通过布尔值切换，并且必须在图像上相应地呈现文本白天和夜间时间。

下面是我用来绘制图像的代码。任何有关如何完成此操作的帮助将不胜感激：

```
/*
 * DrawView.java 
 */
public class DrawView extends View implements OnTouchListener
{

    private Paint backgroundPaint = new Paint();
    private Paint drawPaint_grass = new Paint();
    private Paint drawPaint_door = new Paint();
    private Paint drawPaint_house = new Paint();
    private Paint drawPaint_roof = new Paint();
    private Paint circlePaint = new Paint();
    private Paint circlePaint_sun = new Paint();
    private Paint textPaint = new Paint();
    private Paint path = new Paint();
    private Path trianglePath;
    private float sx, sy;

    public DrawView(Context context)
    {
        super(context);         

        setFocusable(true);
        setFocusableInTouchMode(true);

        backgroundPaint.setColor(Color.rgb(135,250,205));
        backgroundPaint.setAntiAlias(true);
        backgroundPaint.setStyle(Style.FILL);

        drawPaint_grass.setColor(Color.rgb(124, 252, 0));
        drawPaint_grass.setStyle(Style.FILL);

        drawPaint_door.setColor(Color.RED);
        drawPaint_door.setStyle(Style.FILL);

        //drawPaint_.setColor(Color.RED);
        //drawPaint_door.setStyle(Style.FILL);

        drawPaint_house.setColor(Color.rgb(205, 133, 63));
        drawPaint_house.setStyle(Style.FILL);

        drawPaint_roof.setColor(Color.rgb(160, 82, 45));
        drawPaint_roof.setStyle(Style.FILL);

        circlePaint_sun.setColor(Color.rgb(255, 255, 0));
        circlePaint_sun.setStyle(Style.FILL);

        trianglePath = new Path();
        trianglePath.moveTo(70, 300); // starting point
        trianglePath.lineTo(170,250); // 1st vertix
        trianglePath.lineTo(270, 300); // 2nd vertix
        trianglePath.lineTo(70, 300); // 3rd vertix and close
        //path.moveTo(getRight()/2, getLeft()/2, getTop()/2, getBottom()/2);
        textPaint.setColor(Color.BLACK);
        textPaint.setStyle(Style.FILL);
        //255, 255, 240
        circlePaint.setColor(Color.rgb(211, 211, 211));
        circlePaint.setStyle(Style.FILL);

        this.setOnTouchListener(this);
    }

    @Override
    public void onDraw(Canvas canvas)
    {

        //canvas.drawPath(path, paint);
        //canvas.drawPath(path, paint);

        // Draw white background
        canvas.drawRect(this.getLeft(), this.getTop(), this.getRight(), this.getBottom(), backgroundPaint);

        //draw a rectangle with blue paint
        canvas.drawRect(0,400, 540,600, drawPaint_grass); 
        canvas.drawRect(100,400, 240,300, drawPaint_house);
        canvas.drawRect(150,400, 190,335, drawPaint_door); 
        canvas.drawPath(trianglePath, drawPaint_roof); 

        //draw text with green paint
        canvas.drawText("Muhibur Rahim", 232, 565, textPaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(sx-30,sy-30, 3, circlePaint);

        canvas.drawCircle(80, 80, 30, circlePaint_sun);
    }

    public boolean onTouch(View v, MotionEvent event)
    {   
        //update the coordinates for the OnDraw method above, with wherever we touch
        sx = event.getX();
        sy = event.getY();

        invalidate();
        return true;
    }

} 
```

我正在考虑将代码的着色部分（circlePaint_sun.setColor(Color.rgb(255, 255, 0)）放入私有Drawview（Context，Context）下的方法（例如static void dayTime（），然后分配两者方法值 0 和 1，并且在触摸或单击时（我认为 onclick 会更好）计数器增加并且值在 0 和 1 之间交替。但是我不确定如何在重复尝试后在代码中使用它，任何帮助是赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:55:24.423

将 a 添加`private boolean dark = false;`到您的变量中。

在您的`onDraw`方法中，添加类似

```
if (dark) backgroundPaint.setColor(Color.rgb(0,0,0));
else backgroundPaint.setColor(Color.rgb(255,255,255)); 
```

在绘制背景之前。

更改`onTouch`方法内的布尔值：

```
if (event.getAction() == MotionEvent.ACTION_DOWN) {
   dark = !dark;
   DrawView();
} 
```

# javascript - Javascript .on("change" 仅在手动更改时有效 [jsFiddle]

> ID：14989601
> 
> 赞同：0
> 
> 时间：2013-02-20T20:46:22.553
> 
> 标签：javascript, jquery, onchange, google-loader

我已经制作了一个包含有关该问题的所有数据和信息的 jsFiddle。我认为更容易理解发生了什么：

请看一下：

[http://jsfiddle.net/lukinhasb/GuZq2/](http://jsfiddle.net/lukinhasb/GuZq2/)

```
$("#estado").val(unescape(resultadoCEP["uf"])); 
```

仅当您手动选择该选项时，掩码才会更改。当 javascript 增加具有相同数据的字段时，它不会更改掩码。

```
 $("#estado").on("change", function() {
         if ($(this).val() == 'SP') {
             $("#celular_pessoa_fisica").mask("(99) 99999-9999");
                 } else {
             $("#celular_pessoa_fisica").mask("(99) 9999-9999");
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:50:13.777

当您使用 javascript 更改字段时，它不会自动触发更改事件。使用 jQuery，您可以使用 $elem.change() 触发更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:50:26.747

这就是它的工作方式，但是当您通过 JS 设置值时，您可以自己触发更改事件：

```
$("#estado").val(unescape(resultadoCEP["uf"])).trigger('change'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T20:50:40.017

您可以在输入上触发更改，以便调用您的函数：

```
$("#estado").val(unescape(resultadoCEP["uf"])).trigger("change"); 
```

更多信息：

1.  [jQuery 触发器](http://api.jquery.com/trigger/)

# ruby-on-rails - Pow.cx Rails 资产未加载（IOError：已关闭流）

> ID：14989605
> 
> 赞同：4
> 
> 时间：2013-02-20T20:46:50.653
> 
> 标签：ruby-on-rails, rack, rack-pow

我通过 Pow 在本地提供的 Rails 应用程序的资产超时。当我直接访问资产的 url（例如'/assets/home.css'）时，我会遇到以下错误：

```
{
    "name":"IOError",
    "message":"closed stream",
    "stack":"/Users/XXX/Library/Application/ Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:158:in `close'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:158:in `ensure in handle'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:158:in `handle'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:99:in `rescue in block (2 levels) in start'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:96:in `block (2 levels) in start'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:86:in `each'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:86:in `block in start'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:66:in `loop'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:66:in `start'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/server.rb:13:in `run'
    /Users/XXX/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/bin/nack_worker:4:in `<main>'"
} 
```

我正在使用 Pow 0.4.0、Rack 1.4.5 和 Rails 3.2.12。

我试过重启 Pow 站点，重启 Pow，卸载并重新安装 Pow，然后重启我的机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T16:21:20.303

看起来您可能需要更新 node.js。如果您通过 Homebrew 安装，您可以使用：

```
brew update
brew upgrade node
npm update npm -g 
```

这将更新 Homebrew 和 Node Package Manager。

# endianness - pcap 文件和字节序

> ID：14989608
> 
> 赞同：6
> 
> 时间：2013-02-20T20:47:06.067
> 
> 标签：endianness, pcap, libpcap, tcpdump

对 pcap 文件运行 file 命令将打印出以下内容 -

```
$ file pcap.pcap
pcap.pcap: tcpdump capture file (little-endian) - version 2.4 .... 
```

我一直在寻找一种方法来创建一个大端捕获文件，或者在线下载一个样本，但无济于事。

我也很困惑 pcap 中究竟是小端还是大端。据我了解，libpcap 捕获了它在网络上看到的内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T02:41:19.490

好吧，一种方法是在大端机器上运行 tcpdump 或 Wireshark；例如，尝试使用运行 OS X 的旧的基于 PowerPC 的 Mac。

除此之外，获取它们的唯一方法是查看[Wireshark Wiki 的 SampleCaptures 页面](http://wiki.wireshark.org/SampleCaptures)，看看是否有任何捕获被描述为在基于 SPARC 的机器或基于 PowerPC 的机器上完成（或大端 MIPS 机器，例如 SGI 机器，但不是 DEC 机器），或在[Wireshark 错误数据库](http://bugs.wireshark.org)中查找包含在大端机器上进行的捕获的错误。libpcap/WinPcap 按主机字节顺序写出捕获文件 - 目标是在写出实时捕获时消除字节交换开销，将负担转移到读取文件的程序。

而且，是的，libpcap/WinPcap 捕获他们在网络上看到的内容，*但是*它们添加了一个文件头，例如，数据包的链路层头类型，并为每个数据包添加一个数据包头，给出时间戳数据包，出现在网络上的数据包长度，以及捕获的字节数（如果捕获程序被告知以最大大小“切片”数据包，以减少 CPU 和 I/O 带宽例如，在捕获时，如果只有链路层、网络层和传输层标头是有趣的）。 *该*信息是什么是大端或小端；实际的数据包*数据*是它在网络上的任何顺序（尽管数据包元数据，例如 802.11 的无线电信息，可能是标准字节顺序，例如用于[radiotap](http://www.radiotap.org)无线电信息的 little-endian，或者可能是主机字节顺序，如Linux USB 元数据的情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T13:38:08.290

无耻的插件，但我写了一个*转换*pcap 文件字节序的实用程序：

[https://github.com/ehrmann/pcap-endianness-converter](https://github.com/ehrmann/pcap-endianness-converter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T13:11:28.963

要转换 pcap 文件的字节顺序，您还可以使用 wireshark 或 tcpdump：

*   使用wireshark，只需打开文件并保存，无需修改。保存的文件将与您的计算机具有相同的字节序。

*   或使用 tcpdump，只需执行“sudo tcpdump -r inputpcapfile -w outputpcapfile”

这样，您可以将 pcap 文件转换为与您的计算机具有相同的字节序。假设您的计算机使用 little endian，而 pcap 文件是 big endian，则保存的文件将使用 little endian。这仅适用于一种方式，不可能使用它来转换为您的计算机以外的其他字节序。

# java - 如何绘制列表中包含的多个 glQuad？

> ID：14989615
> 
> 赞同：1
> 
> 时间：2013-02-20T20:47:24.870
> 
> 标签：java, opengl, lwjgl

我做了一个小 lwjgl 程序，在其中我可以通过按一个按钮来创建盒子。但是，我似乎无法在 for 循环中绘制多个四边形。

这是我的代码：我有一个盒子类，这样我就可以处理很多盒子

```
package LWJGL_Learn;

import java.util.Random;
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.opengl.*;
import org.lwjgl.*;

public class Box {

    static int xPos, yPos, boxWide, boxHigh;
    public Box(int width, int height) {
        Random ran = new Random();
        xPos = ran.nextInt(width);
        yPos = ran.nextInt(height);
        boxWide = ran.nextInt(40)+20;
        boxHigh = ran.nextInt(40)+20;
    }
    public void draw() {
            glVertex2f(xPos, yPos);
            glVertex2f(xPos + boxWide, yPos);
            glVertex2f(xPos + boxWide, yPos + boxHigh);
            glVertex2f(xPos, yPos + boxHigh);   
    }
} 
```

然后，在我的主文件中，我有一个 LinkedList 存储我的盒子类，初始化为

```
static LinkedList<Box> boxes = new LinkedList<Box>(); 
```

实际呈现它的代码如下：

```
glBegin(GL11.GL_QUADS);
for (int x = 0; x < boxes.size(); x++) {
    boxes.get(x).draw();
}
glEnd(); 
```

这段代码的问题在于它似乎只绘制了最近添加到列表中的框。我不确定为什么会这样，但是当我添加代码以在执行结束时打印框列表时，每次都会出现正确大小的列表。我假设这意味着每个框都在 for 循环中迭代，这意味着在代码中的某处，在绘制下一个框之前，前一个框已从屏幕上清除。

我认为。你们能纠正我的代码并向我解释为什么openGL会这样做吗？

如果需要，我可以发布完整的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:54:48.043

不是 GL 只渲染一个四边形，而是您的代码只定义一个四边形，然后渲染它的“n”个副本。

这：

```
static int xPos, yPos, boxWide, boxHigh; 
```

将您的盒子参数声明为静态的 - 这意味着它们由盒子的所有实例共享。

# php - 自定义喜欢功能

> ID：14989625
> 
> 赞同：0
> 
> 时间：2013-02-20T20:48:01.143
> 
> 标签：php, mysql, facebook

我有一个漫画网站，我想在其中建立自己的好恶功能。

我想只使用 Facebook 的，但以下是我想要自己的原因：

1.  想收集好恶。Facebook like 按钮无法做到这一点。
2.  想要为喜欢和不喜欢创建自定义图形
3.  想收集与漫画id相关的好恶，并用它来按人气排序

该功能通过用户单击like按钮起作用，脚本将该IP记录到数据库中......如果存在该IP已经喜欢某个imd id的条目，它不会增加与该img关联的点赞计数ID。

在测试该功能时，我意识到从可扩展性的角度来看这将具有挑战性，**原因有两个：**

1.  数据库的负担将是 n 个唯一 IP * x 漫画。比如3000个粉丝有可能点赞60部漫画，也就是18万个条目。另外，还有很多查询在服务器上来回传递……更不用说每次有人可能不喜欢和喜欢图像时。我通过 GoDaddy 进行托管，因此服务器的大小可能是个问题。

2.  可管理性。如果有这么多条目，我不确定清理错误或错误会有多大的挑战性。

所以，我的问题是：

1）建立自己的有意义吗？

2) 是否有我可以实现的预先构建的喜欢/不喜欢功能？

3) 扩展的挑战是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:01:22.287

1）它是一个非常简单的模型......一个由 id 键的漫画表，一个带有漫画 ID 和 IP 地址的唯一复合键的喜欢表

2）即使有为前端 javascript 预先构建的东西......根据您的知识，它很容易实现

3）真的没有 - 正如 deceze 在评论中所说，像这样正确索引的简单表中的 180,000 个条目对于任何数据库服务器来说都是在公园里散步。

这是一个高水平的答案，但是具有相当基本的 PHP 知识，您应该能够实现它！

# javascript - 对可变数量的 ajax 请求使用 jquery deferreds

> ID：14989628
> 
> 赞同：2
> 
> 时间：2013-02-20T20:48:34.403
> 
> 标签：javascript, jquery, jquery-deferred

当我有可变数量的 ajax 请求时，如何使用延迟调用它们？

我猜：

```
//qty_of_gets = 3;

function getHTML(productID, qty_of_gets){

    var dfd = $.Deferred(),
            i = 0,
            c = 0;

    //this is where there could be some magic to 
    //do multiple ajax posts
    //obviously I'm out of my depth here...
    while (i <= qty_of_gets){

        dfd.pipe(function(){
            $.get("queries/html/" + product_id + i + ".php");
        });                       
    i++
    }
    dfd.done(function(){

        while (c <= qty_of_gets){
           $('myDiv').append(c);
           c++;
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T21:15:19.450

如果要按顺序执行 Ajax 调用，则必须从回调中返回承诺，并将新的回调附加到最后一个承诺对象：

```
var dfd = $.Deferred(),
   promise = dfd.promise(),
   i = 0,
   c = 0;

while (i <= qty_of_gets) {
    // needs an IIFE
    (function(i)
        promise = promise.then(function(){
            return $.get("queries/html/" + product_id + i + ".php");
        });
    }(i++));                       

}

promise.done(function(){

    while (c <= qty_of_gets){
       $('myDiv').append(c);
       c++;
    }

});

// resolve deferred
dfd.resolve(); 
```

从 jQuery 1.8 开始，您应该`.then`使用`.pipe`.

另一个问题是（至少在您的示例中），在执行回调时，`i`不会具有您期望的值。您可以使用*立即调用的函数表达式*来捕获`i`. 请参阅[循环内的 JavaScript 闭包——了解更多信息的简单实用示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。

* * *

没有获得结果的干净解决方案。我认为您能做的最好的事情就是将结果添加到一个数组并在`.done`回调中访问该数组。IE：

```
var results = [];

while (i <= qty_of_gets) {
    // needs an IIFE
    (function(i)
        promise = promise.then(function(){
            return $.get("queries/html/" + product_id + i + ".php")
                     .then(function(result) {
                       results[i] = result;
                     });
        });
    }(i++));                       

}

promise.done(function(){
    // do something with `results`
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:52:02.853

~~`.pipe`关闭，您需要从回调中返回一个 Promise 对象。~~
请参阅 felix 的回答，下一个示例除了缺少返回之外还有其他问题。

```
dfd.pipe(function(){
    return $.get("queries/html/" + product_id + i + ".php");
}); 
```

~~另外，我认为它实际上还没有写在任何地方，但是~~ `.pipe`在最近的版本中是这样在核心中实现的：

```
promise.pipe = promise.then 
```

因此，您~~应该~~替换`dfd.pipe`为`dfd.then`
参考：[http ://api.jquery.com/deferred.pipe/](http://api.jquery.com/deferred.pipe/)

提到的 adeneo 的替代方法是使用`$.when`

```
function getHTML(productID, qty_of_gets) {

    var dfdArr = [];

    while (i <= qty_of_gets) {
        dfdArr.push($.get("queries/html/" + product_id + i + ".php"));
        i++
    }
    $.when.apply(null, dfdArr).done(function () {

        for (response in arguments) {
            $('#myDiv').append(response[0]);
        }

    });
} 
```

# input - 从“div contenteditable”提交文本

> ID：14989629
> 
> 赞同：4
> 
> 时间：2013-02-20T20:48:35.290
> 
> 标签：input, submit, contenteditable, insertonsubmit

我正在尝试找到一个可行的解决方案，但目前没有任何用处。我有以下表格：

```
<form id="searchform" action="/search" onsubmit="putText()">
<div class="section" >
<div class="edit"><div ContentEditable = "true" id="text"></div></div>
<div class="control" onclick="sbmt()"></div>
</div>
<input id="s" name="q" class="submit" type="submit" value="Send">
</form> 
```

使用以下js：

```
$(window).load(function(){
$(document).ready(function() {
 $('.edit').keydown(function(e) {
     if(e.which == 13) {
         //debugger;
        $(this).blur().next().focus();
        return false;
      }
 });
 })
});

function ElementInit() {
  new SectionalElement({
    sectionalNodeClassName: 'section',
    controlNodeClassName: 'control',
    background: '#f4fa58'
  }, 'sectional_element');
  return true;
}

function putText() {
  document.getElementById('s').value = document.getElementById('text').textContent;  
  return true;
}

function sbmt() {
document.getElementById("searchform").submit();
} 
```

（我也使用 jquery-1.8.3.js）查询应该看起来像“mysite.com/search?q=”。我所需要的只是使用 div class="control" 作为提交按钮而不是简单的输入（只需将输入按钮替换为 div）。当我按下输入按钮时一切正常，但是当我使用 DIV class="control" 提交不起作用 - 表单提交，但没有查询文本。我不能只使用输入，因为提交 div 是第三方 api 的一部分。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:09:42.750

如果你想获取 #text div 中的数据，你可以使用 jQuery 从 div 中获取数据：

```
function sbmt() {
  var param = '';

  // jQuery
  param = $('#text').text();

  // or you could use pure javascript
  param = document.getElementById('text').innerHTML;

  // Now that you have these values you should add them to your form as an input
  // input fields are how you send data through forms to wherever you are posting them
  // build the input field
  param = "<input type='text' name'param1' value='" + param + "'/>";

  // append it to the form
  $('#searchform').append(param);

  // finally submit the form.
  document.getElementById("searchform").submit();
} 
```

然后您将能够根据`name`您在输入字段中分配的参数访问您提交的参数（在本例中为**param1**）

如果你想锻炼正在发生的事情，可以试试这个[**jsfiddle 。**](http://jsfiddle.net/UBg3V/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T16:25:41.657

## contenteditable.coffee

```
$('[contenteditable_form]').on 'submit', (e) -> 
  $form = $ e.target
  $form.find("[data-hidden-input]").each (i, e) ->
    $contenteditable = $ e
    attr = $contenteditable.data('hiddenInput')

    hidden_input = $form.find "[#{attr}]"

    value = $contenteditable.html()

    $(hidden_input).val value 
```

## 例子.html

```
<input class="hidden" hidden_description name="some_name" type="hidden"> 
<div contenteditable="true" data-hidden-input="hidden_description"></div> 
```

来源：[https ://gist.github.com/dapi/eb737f5a7a7461cb548e](https://gist.github.com/dapi/eb737f5a7a7461cb548e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:59:35.287

您正在尝试对非表单元素使用表单操作。请改用输入元素。

# c# - 是内核单例，我可以在需要时创建它吗

> ID：14989637
> 
> 赞同：1
> 
> 时间：2013-02-20T20:48:59.813
> 
> 标签：c#, ninject

我是第一次尝试使用 Ninject，但我不知道如何使用它。假设我没有使用注入（构造函数或方法），我可以自由地做吗？

```
var kernel = new StandardKernel();
var types = kernel.GetBindings(typeof(IDomainEventHandler<T>))
.GetImplementingTypes(); 
```

还是有访问内核的特定方式？`new StandardKernel()`我什么时候创建一个新内核，或者它只是一个包装类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:31:35.180

当您调用`new StandardKernel()`它时，它总是会创建一个新的`StandardKernel`. 如果它是一个单例，构造函数将不会被暴露。

如果您想使用 Ninject 作为服务定位器（*不管我不建议这样做多少*），您必须将该实例传递给相关代码。或者只是将其公开为一些`public static`属性并在应用程序启动时进行初始化。

`Microsoft.Practices.ServiceLocation.ServiceLocator`你也可以这样使用它：

**登记**

```
IKernel kernel = new StandardKernel();
IServiceLocator ninjectServiceLocator = new NinjectServiceLocator(kernel);
Microsoft.Practices.ServiceLocation.ServiceLocator.SetLocatorProvider(() => ninjectServiceLocator); 
```

**用法**

```
var service = ServiceLocator.Current.GetInstance<IMyService>(); 
```

或者在 ASP Web 应用程序中，您可以像这样访问它：

```
var kernel = ((NinjectHttpApplication) HttpContext.ApplicationInstance).Kernel;
var service = kernel.Get<IService>(); 
```

*但正如我所说。通常不推荐这些方法。Ninject 不打算以这种方式使用。您最好尝试使用构造函数注入进行 DI。*

# java - 我的 Java 套接字代码正在破坏数据

> ID：14989648
> 
> 赞同：0
> 
> 时间：2013-02-20T20:49:28.130
> 
> 标签：java, sockets, nio

我正在编写一个程序来测试 Java 的网络 API（旧 io vs nio vs nio2）。

我有一个只发送两个值的服务器：

1.  System.nanoTime()
2.  计数器计算发送的消息数。

客户端接收此数据，将远程 System.nanoTime() 与本地时间戳进行比较以计算延迟并检查计数器以确保没有数据丢失。

由于这只是一个测试，服务器和客户端运行在同一个 JVM 中。90% 的时间数据被正确传输；但是，每隔一段时间，时间戳就会完全错误。看起来它可能是一个上溢/下溢错误，但我看不出它是如何引入的。以下是错误示例：

> 错误：计数器 3，remoteTS -8267580102784516096，localTS 155321716184402，差异 8267735424500700498

请注意，本地时间戳 155321716184402 转换为晚上 7 点之后。但是远程时间戳只是负数！如果您查看代码，我没有做任何花哨的日期数学，它不可能是负面的。我也看不出我怎么会得到一个溢出错误。我认为这可能是由于大端与小端，但是每个值都是错误的，而不仅仅是其中一些。

代码（从稍大的测试中提取）如下：

```
package networkioshootout;

import static java.lang.System.out;

import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.nio.ByteBuffer;
import java.util.Date;
import java.util.Random;
import java.util.concurrent.ExecutionException;

public class DebugNetwork {
  private final static int SENDCOUNT = 100;
    private final static int PORT = 9000;
    private final static int TESTLOOP = 10;
    private final static Random rn = new Random();

    public static void main(String[] args) throws IOException, InterruptedException, ExecutionException {
        long currentNanos = System.nanoTime();
        long currentMillis = System.currentTimeMillis();
        Date now = new Date();
        System.out.println(String.format("Current date/time:%s, nanos:%s, millis:%s",
                now, currentNanos, currentMillis));

        //Server
        new Server().start();

        //Client
        for(int i=0; i< TESTLOOP; i++){
            final int DATASIZE = (1+rn.nextInt(99))*8;
            clientInputstream(DATASIZE);
        }
    }

    private static void clientInputstream(int bufferSize) throws IOException, UnknownHostException {
        final byte[] internalBuffer = new byte[bufferSize+16] ;
        final ByteBuffer longExtractor = ByteBuffer.allocate(16);

        int bytesReadSoFar = 0;
        long counter = 0;

        Socket client = new Socket(InetAddress.getLocalHost(), PORT);
        InputStream in = client.getInputStream();

        byte[] data = new byte[bufferSize];
        int size = 0;

        try{
            while(-1 != (size = in.read(data))){
                for(int i=0; i < size; i++){
                    internalBuffer[i+bytesReadSoFar] = data[i];
                }
                bytesReadSoFar += size;

                if(bytesReadSoFar >= 16){
                    int values = bytesReadSoFar/16;
                    int toRead = values;
                    int remainder = bytesReadSoFar % 16;

                    for(int i=0; i< toRead; i++){
                        int j = i * 16;

                        //long remoteTS = ByteBuffer.wrap(new byte[]{internalBuffer[j+0],internalBuffer[j+1],internalBuffer[j+2],internalBuffer[j+3],internalBuffer[j+4],internalBuffer[j+5],internalBuffer[j+6],internalBuffer[j+7]}).getLong();
                        //long remoteCounter = ByteBuffer.wrap(new byte[]{internalBuffer[j+8],internalBuffer[j+9],internalBuffer[j+10],internalBuffer[j+11],internalBuffer[j+12],internalBuffer[j+13],internalBuffer[j+14],internalBuffer[j+15]}).getLong();

                        //long remoteTS = data[0] | ((int)(data[1]) << 4) | ((int)(data[1]) << 8) | ((int)(data[1]) << 12) | ((int)(data[1]) << 16) | ((int)(data[1]) << 20) | ((int)(data[1]) << 24) ;

                        longExtractor.put(internalBuffer, j, 16);
                        longExtractor.flip();
                        long remoteTS = longExtractor.getLong();
                        long remoteCounter = longExtractor.getLong();
                        longExtractor.clear();

                        if(remoteCounter != counter){
                            String error = "ERROR: Expected remote counter to be "+counter+" but it was actually "+remoteCounter;
                            //System.out.println(error);
                            throw new RuntimeException(error);
                        }
                        counter++;

                        long localTS = System.nanoTime();
                        long latency = localTS - remoteTS;
                        if(Math.abs(latency) > 1200000000) {
                            out.println(String.format("ERROR: counter %s, remoteTS %s, localTS %s, diff %s",
                                    counter, remoteTS, localTS, latency));
                            continue;
                        }

                    }

                    //System.arraycopy(data, toRead, data, 0, remainder);
                    for(int i=0; i < remainder; i++){
                        internalBuffer[i] = internalBuffer[i+toRead];
                    }
                    bytesReadSoFar = remainder;
                }
            }
        }
        finally{
            client.close();
        }
    }

    static final class Server extends Thread{

        public void run(){
            try {
                startServer();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        private static void startServer() throws IOException {
            final ServerSocket server = new ServerSocket(PORT);

            //System.out.println("Server listening on port "+PORT);

            while(true){
                final Socket c1 = server.accept();
                c1.setTcpNoDelay(true);
                //System.out.println("Client connected");
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        long totalMsgs = 0;
                        long counter = 0;
                        DataOutputStream serverout;
                        try {
                            serverout = new DataOutputStream(c1.getOutputStream());
                            for(int i=0;i<SENDCOUNT;i++){ 
                                serverout.writeLong(System.nanoTime());
                                serverout.writeLong(counter);
                                totalMsgs++;
                                counter++;
                            }
                            //System.out.println("Sent bytes to client: "+total);
                        } catch (IOException e) {
                            out.println("Messages sent:"+totalMsgs+", current counter:"+counter);
                            e.printStackTrace();
                        }
                        finally{
                            //System.out.println("Client disconnected when counter was "+counter);
                            try { c1.close(); } catch (IOException e) { e.printStackTrace();}
                        }
                    }
                }).start();
            }
        }
    }

} 
```

编辑：由于对此有一些评论，实际程序有客户端通过输入流、缓冲流、NIO、NIO2 连接到服务器。这是该程序的更完整（但已过时）版本： [https ://gist.github.com/falconair/4975243](https://gist.github.com/falconair/4975243)

我还没有添加数据输入流，尝试使用套接字选项等。我想在进一步移动之前解决数据损坏问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:07:28.943

该错误与您使用`data[]`和`internalBuffer[]`所有数据洗牌有关。我没有看到真正的客户是使用类似这样的代码编写的。任何理智的人都会使用`BufferedInputStream`.

如果您想测试不同缓冲区大小的效果，请使用`new DataInputStream(new BufferedInputStream(socket.getInputStream(), bufferSize))`and并完全`readLong()`摆脱`data`and ：它们只会导致不相关的问题。`internalBuffer``longExtractor`

以下作品完美无瑕：

```
private static void clientInputstream(int bufferSize) throws IOException, UnknownHostException
{
    long counter = 0;

    Socket client = new Socket(InetAddress.getLocalHost(), PORT);
    DataInputStream in = new DataInputStream(new BufferedInputStream(client.getInputStream(), bufferSize));

    try
    {
        for (;;)
        {
            long remoteTS = in.readLong();
            long remoteCounter = in.readLong();
            if (remoteCounter != counter)
            {
                String error = "ERROR: Expected remote counter to be " + counter + " but it was actually " + remoteCounter;
                //System.out.println(error);
                throw new RuntimeException(error);
            }
            counter++;

            long localTS = System.nanoTime();
            long latency = localTS - remoteTS;
            if (Math.abs(latency) > 1200000000)
            {
                out.println(String.format("ERROR: counter %s, remoteTS %s, localTS %s, diff %s",
                    counter, remoteTS, localTS, latency));
                continue;
            }
        }
    }
    catch (EOFException exc)
    {
        System.out.println("EOS");
    }
    finally
    {
        client.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:51:53.257

返回的值[`System.nanoTime()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)特定于正在运行的 JVM。您应该改用 System.currentTimeMillis() 。

> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意的原始时间以来的纳秒（可能在将来，因此值可能为负数）。在 Java 虚拟机实例中，此方法的所有调用都使用相同的来源；其他虚拟机实例可能使用不同的来源。

编辑：

由于您在同一个 JVM 中运行测试，因此 (this) 错误的来源必须与上述不同（尽管您应该考虑使用“currentTimeMillis”，以便在不同的 JVM 之间进行比较）。

我建议使用 BufferedInputStream 缓冲流，然后一次读取和处理 N（16？）个字节的块。

```
 Socket client = new Socket(InetAddress.getLocalHost(), PORT);
 InputStream in = new BufferedInputStream(client.getInputStream());

 int length = 16, offset=0;     
 while (length>0) {
   int read = in.read(data,offset,length);
   if (read<0) ... //connection error
   offset+=read;
   length-=read;
 } 
```

# c# - ABAddressBook 已弃用，如何使用 ABAddressBook.Create 方法？

> ID：14989649
> 
> 赞同：2
> 
> 时间：2013-02-20T20:49:28.817
> 
> 标签：c#, ios6, xamarin.ios, abaddressbook

创建`ABAddressBook`对象时，我在 iOS6 上收到以下警告。我这样使用它：

```
ABAddressBook ab = new ABAddressBook (); 
```

结果：

```
Warning CS0618: `MonoTouch.AddressBook.ABAddressBook.ABAddressBook()' is obsolete: `Use static Create method in iOS 6.0' (CS0618) 
```

我应该如何使用上面提到的静态方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:07:54.450

最重要的是，当您看到有关*已弃用*`[Obsolete]`API 的警告时，请将其与您的应用程序目标进行比较。

 *例如，如果您希望您的应用程序在 iOS 5.1 上运行（因此它可以在原始 iPad 上执行），那么您可能无法使用新的 API（例如`Create`在这种情况下）。

如果您只针对 iOS 6（及更高版本），那么您**可以**停止使用*已弃用*的 API。

OTOH 这并不**意味着**旧代码不起作用。它仍然存在，因为 Apple 希望您创建适用于多个 iOS 版本的应用程序。因此，您有时间将它们从您的应用程序中删除（在 Apple 将它们从其库中删除之前）。

> 如何使用上面提到的静态方法？

以下是使用新 API 的方法：

```
NSError error;
ABAddressBook ab = ABAddressBook.Create (out error);
if (error != null)
    Console.WriteLine ("uho, deal with error"); 
```*

# c++ - 没有新运算符的动态数组？

> ID：14989674
> 
> 赞同：3
> 
> 时间：2013-02-20T20:51:08.753
> 
> 标签：c++, arrays, memory-management

从什么时候开始这是有效的语法？（使用 g++ 4.6.3 工作）我应该搜索什么以找到有关此的更多信息（我习惯于新建/删除）？

```
#include <iostream>

int main(){
    size_t sz;
    std::cout<<"number?\n";
    std::cin>>sz;

    // This line
    float dynamic_arr[sz];

     //output the (uninitialized) value just to use the array.
     std::cout<<dynamic_arr[0]<<std::endl;
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T20:51:47.457

Varialbe 长度数组 (VLA) 不是标准 C++，它们是编译器扩展。如果您希望代码可移植，则不应使用它。

如果您使用`-Wvla -Werror`标志编译，或者`-Werror=vla`，您的代码将产生错误

> 错误：使用了可变长度数组“dynamic_arr”[-Werror=vla]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:19:33.210

标准 C++ 不支持 C99 和 g++ 的可变长度数组 (VLA)。

在标准 C++ 中，您可以使用 eg **`std::vector`**，如下所示（您的代码已修改）：

```
#include <iostream>
#include <vector>

int main(){
    int sz;
    std::cout<<"number?\n";
    std::cin>>sz;

    // This line
    std::vector<double> dynamic_arr( sz );    // Initialized to zeroes.

     //output the value just to use the array.
     std::cout<<dynamic_arr[0]<<std::endl;
} 
```

此外，对于您可以使用的字符串**`std::basic_string`**，通常通过`typedef`s`std::string`和`std::wstring`.

通常，主要问题只是动态大小，如上所述，然后很好地完成工作`std::vector`。`std::basic_string`但是，有时问题是效率，如何对动态大小的数组进行极其高效的*堆栈分配*。许多 C 和 C++ 实现为此支持非标准函数**`alloca`**，但不幸的是，它们在处理故障的方式上存在很大差异。据我所知，也没有通用的图书馆解决方案。但令人高兴的是，我所知道的主要用途（尽管如前所述`alloca`可用于许多平台）一直用于 Windows 中的字符串编码翻译，随着时间的推移，它的相关性越来越低，而且 Windows 程序越来越纯面向 Unicode。

# php - PHP多维数组元素被跳过

> ID：14989678
> 
> 赞同：0
> 
> 时间：2013-02-20T20:51:42.340
> 
> 标签：php, arrays

我在 PHP 中设置了一个多维数组，如下所示：

```
$contents = array(
    "Header1" => array(
         "Section 1" => array (
               "Description1",
               "Notes1",
         ),
         "Gap" => "Gap",
         "Section 2" => array (
               "Description2",
               "Notes2",
         ),
         "Gap" => "Gap",
         "Section 3" => array (
               "Description3",
               "Notes3",
         ),
    ),
); 
```

然后我循环遍历这个数组，如下所示：

```
foreach ($contents as $header => $section) {
      foreach ($section as $title => $details) {
            echo $title."<br>";
      }
} 
```

输出将是：

```
Section1
Gap
Section2
Section3 
```

为什么没有显示第二个“Gap”？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:53:24.487

因为你不能有重复的数组键。第二个覆盖第一个。

`Gap2`为您的下一个数组键使用或其他东西。或者，更好的是，嵌套它：

```
array(
    'Gap' => array(
        'Gap1',
        'Gap2'
    )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:54:13.743

数组中的两个值不能绑定到同一个键。一种常见的方法是将多个值放在另一个子数组中，但使用相同的键。虽然它增加了代码的复杂性。小心。

# android - 有没有办法让 Fruit Ninja 应用程序在 Android 设备上无限运行？

> ID：14989679
> 
> 赞同：1
> 
> 时间：2013-02-20T20:51:43.010
> 
> 标签：android

我在 Android 设备上运行 Fruit Ninja 应用程序时进行了一些带宽和频率测量。（这是用例测试过程的一部分。）我创建了一个自动获取 CPU 频率数据的脚本。该脚本每 30 秒更改一次实际 CPU 频率（足以获得稳定的频率数据），在这个长长的 CPU 频率列表中的一个数字：cpufreq=( 51000 102000 204000 306000 ... 更多！)。问题是 Fruit Ninja 只运行 60 秒，所以我在一次运行期间只能进行 2 次测量，然后我必须在屏幕上手动选择“重试”。这太耗时了。我想要一种让 Fruit Ninja 在没有人工干预的情况下无限运行的方法，或者一种自动执行“重试”的方法，这样我就可以运行脚本并等待结果。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:10:17.167

你应该试试[monkeyrunner 。](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:06:35.897

Android 平台的设计会阻止这种情况，除非您以某种方式获得了 Fruit Ninja 的源代码。

在 Android 中，每个应用程序都是一个“孤岛”，任何其他应用程序都无法触及，除非两个应用程序都明确允许。Android 生态系统设计禁止以这种方式与应用程序交互。这是一个安全的事情。

# ruby-on-rails - Rails 通过复杂的 has_many 和 has_many

> ID：14989680
> 
> 赞同：0
> 
> 时间：2013-02-20T20:51:48.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我有 4 个模型：Drawer、Folder、FolderDocument 和 Document，如下所示：

```
class Drawer < ActiveRecord::Base
  has_many :folders #Drawer has many folders
end

class Folder < ActiveRecord::Base
  belongs_to :drawer
  has_many :folder_documents

  # Folder has a "version" attribute which reflects the latest version
  # Use proc to give back latest version by default e.g. folder.documents or folder.documents(5) will give back a specific version.      
  has_many :documents, :through => :folder_documents, :conditions => proc { |v = nil|
         v ||= self.version
         "documents.active IS TRUE AND version = #{v}"
       }, :uniq => true 
end

class FolderDocument < ActiveRecord::Base
  # Has a version attribute
  belongs_to :document
  belongs_to :folder
end

class Document < ActiveRecord::Base
  has_many :folder_documents
  has_many :folders, :through => :folder_documents
end 
```

我的问题是我无法创建

```
has_many :documents, :through => :folders 
```

在类 Drawer 上，作为 proc 条件（对于来自 FolderDocument 的文档）不能计算，因为“版本”是在 Drawer 的上下文中计算的，而不是中间文件夹关联。

有没有办法我可以做到这一点，而无需在 Folder 和 FolderDocuments 之间创建另一个名为 FolderVersion 的模型？

编辑：目标是获取属于当前版本文件夹的所有文档（文件夹中的版本）。

# sql - 如何将表格行详细信息复制到 Visual Studio 表单

> ID：14989684
> 
> 赞同：-3
> 
> 时间：2013-02-20T20:51:52.703
> 
> 标签：sql, vb.net

> 我有一个表试试 - “uid、pwd、mob 和名称。”

```
CL001 abc 9876589 admin
CL002 def 8909898 admin2 
```

我想从表中以视觉基本形式调用值并**在相应的文本框中显示值**。我知道这个 SQL 查询 -->`select * from try where uid="CL001"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:02:17.480

这是一个允许您在数据库上执行 SELECT 语句的函数。在调用它之前，您必须声明一个新的数据表，例如：

```
Dim dt as New DataTable
dt = doSQL("select * from try where uid='CL001'")

    Public Function DoSQL(ByVal sqlCmd As String) As DataTable
    Dim cmd As New SQL.SqlCommand()
    Dim cnn As New SQL.SqlConnection(My.Settings.cnnString) ' your connection string here
    Dim sqlDT As New DataTable
    With cmd
        .Connection = cnn
        .CommandText = sqlCmd
        .CommandType = CommandType.Text
    End With
    Dim da As New SQL.SqlDataAdapter()
    da.SelectCommand = cmd
    da.Fill(sqlDT)

    Return sqlDT

End Function 
```

数据表将具有匹配的记录。因此，如果您知道只有 1 条记录，您可以执行以下操作：

```
textbox.text = dt.Rows(0).Item("uid").ToString 
```

或者你可以将它绑定到一个文本框并使用 bindingmanagerbase 来跟踪你喜欢的位置：

```
Private WithEvents bm As BindingManagerBase ' Class scope

Private Sub partBind(ByVal dt As DataTable)
txtBox.DataBindings.Add("Text", dt, "uid")
End Sub 
```

然后，您可以使用 bm.position 控制翻转记录，如下所示：

```
Private Sub btnNavClick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnNext.Click, btnPrevious.Click, btnLast.Click, btnFirst.Click
    Dim btnClicked As Button = DirectCast(sender, Button)

    Select Case btnClicked.Name
        Case "btnNext"
            If bm.Position < bm.Count - 1 Then
                bm.Position += 1
            Else
                bm.Position = 0
            End If

        Case "btnPrevious"
            If bm.Position > 0 Then
                bm.Position -= 1
            Else
                bm.Position = bm.Count
            End If
            bm.Position -= 0
        Case "btnLast"
            bm.Position = bm.Count
        Case "btnFirst"
            bm.Position = 0
    End Select

End Sub 
```

# java - Java SE服务器+数据库+REST框架

> ID：14989688
> 
> 赞同：0
> 
> 时间：2013-02-20T20:51:58.693
> 
> 标签：java, database, rest

我正在寻找 JAVA SE EMBEDDED SOLUTION（简单的服务器+数据库+（可选）rest 框架）。我会避免使用 GlassFish、|Tomcat 等。我找到了 Oracle JAVA 嵌入式套件。这个解决方案听起来很漂亮，但它仅限于 x86 linux 架构。那么，这种类型的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:56:35.450

[您选择的Jersey](http://jersey.java.net/) + [Grizzly](http://grizzly.java.net/) + Embedded DB 应该可以正常工作。有很多嵌入式数据库可供选择[——Derby](http://db.apache.org/derby/)、[HSQLDB](http://hsqldb.org/)、[SQLite](http://www.sqlite.org/)只是其中的一小部分。

# php - CakePHP 2.3 中特定操作的特定验证

> ID：14989690
> 
> 赞同：0
> 
> 时间：2013-02-20T20:52:01.407
> 
> 标签：php, cakephp

我怎么能这样做？

在具体操作中，我只想验证 1 个字段。在另一个，3个字段等。但不仅仅是在创建/更新中，例如：

我有一个**搜索表单**，带有一些过滤器，并且需要验证用户是否填写了所有字段（不是在 javascript 中）。

* * *

# 细节

**CakePHP：** 2.3
**MySQL：** 5.1
**阿帕奇：** 2.2
**PHP：** 5.3.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:59:10.190

您必须`Model->validates()`使用要验证的字段数组手动运行。然后运行 ​​->save() 而不进行验证检查。

```
$this->ModelName->set($this->request->data);
if ($this->ModelName->validates(array('fieldList' => array('email', 'password')))) {
      $this->ModelName->save($this->request->data, false); //false = no validation checking
} 
```

参考：[http ://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:11:14.247

[这是](https://gist.github.com/ADmad/4038473)一个基于动作切换验证规则的奇特解决方案。

# python - 与 MySQL 连接的 Python 错误

> ID：14989691
> 
> 赞同：0
> 
> 时间：2013-02-20T20:52:01.670
> 
> 标签：python, mysql

1.  当我有 con.close()- mysql.connector.errors.OperationalError: [Errno 9] Bad file descriptor 时收到错误消息
2.  当我删除 con.close()-mysql.connector.errors.InterfaceError: 2055: Lost connection to MySQL server at 'localhost:3306', system error: 10054 时，我收到错误消息

有什么建议吗？Thx
以下是我的查询：

```
import mysql.connector
class databaseConnection:
    def __init__ (self,settings ): 
        cur=settings.cursor()

        selectstmt=("SELECT qSQL FROM TBLTEST WHERE id = 4")
        cur.execute(selectstmt)
        res=cur.fetchone()
        qSQL=res[0]
        cur.execute(qSQL)
        qSQLresults=cur.fetchall()
        for row in qSQLresults:
            id= row[0]
            city= row[1]
            state=row[2]
            insertstmt=("""INSERT into FACTRESTTBL (id, city, state) 
                           values (%d, '%s', '%s')""" % (id, city, state))
            cur.execute(insertstmt)
            con.commit() 
        con.close() # 

print 'done'

con=mysql.connector.connect(host="localhost", 
                            user="root", 
                            password="test", 
                            database="test")
databaseobject = databaseConnection(con) 
```

--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:13:37.640

当我在服务器上的 Vim 上运行脚本时，它可以工作。

# java - 安卓 SQLite ID

> ID：14989693
> 
> 赞同：1
> 
> 时间：2013-02-20T20:52:03.323
> 
> 标签：java, android, sqlite, auto-increment

我想知道`SQLite`在删除之前的一些行之后如何处理添加新行。例如，我有 3 条记录/行和它们的 3 个自动增量 ID：

```
ID 1 
ID 2
ID 3 
```

我删除了 ID 为 2 的记录，所以现在我有：

```
ID 1
ID 3 
```

现在我添加一个新记录/行。

该数据库是添加`ID 4`还是添加`ID 2`（当其自动递增时）？我想它只是从最后一条记录中添加了+1，但我不确定。但如果确实如此，这对数据库大小有何影响？如果我经常删除/添加新记录，ID 会在你不知不觉中达到一百万？那会有什么问题吗？是否有自动增量来填充跳过的 ID 号（已删除）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:55:10.450

因为 SQL 不关心要删除的当前行，所以它在创建新行时总是使用最后一个已知的递增值。

前任：

20 21

10000 10001

这就是标准 SQL 与自动增量一起工作的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:25:46.707

[您的许多问题都在SQLite 的`AUTOINCREMENT`](https://www.sqlite.org/autoinc.html)页面上得到了间接回答，但我将提供一个精简版。

> 该数据库是添加 ID 4 还是添加 ID 2（当其自动递增时）？

它将使用 4。

> 但如果确实如此，这对数据库大小有何影响？

主键索引的大小*会*增长，但每一行中的数据会比数字索引更快地增加数据库的大小。所以这不是应用程序的问题。

> 如果我经常删除/添加新记录，ID 会在你不知不觉中达到一百万？那会有什么问题吗？

SQLite 可以容纳的最大 id 是 9223372036854775807，略多于一百万。假设您（以某种方式）每毫秒增加此 id 并且您的应用程序连续运行，您将在不到 300,000 年的时间内达到此限制。
不要失去希望！在此 SQLite 将随机选择一个未使用的 id 后，只有在检查了“合理数量”的 id 之后，SQLite 才会放弃并抛出一个错误，声称它已满。

> 是否有自动增量来填充跳过的 ID 号（已删除）？

我相信您可以编写一个查询来执行此操作，但是找到这些空索引只会减慢您的应用程序的速度。所以考虑到上面的数学：我不会出汗。:)

# sql-server - 这些插件有什么区别？

> ID：14989694
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:52:05.537
> 
> 标签：sql-server, select, insert

在 SQL Server 中，它们本质上做同样的事情。每种方式的优点/缺点是什么？

```
select * into table 
```

对比

```
insert into table select * 
```

我正在寻找诸如性能、最佳实践、可维护性等原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:55:08.870

`SELECT ... INTO mytable`创建一个新表。如果`mytable`已经存在则失败。

`INSERT ... INTO mytable`插入到现有表中。如果`mytable`不存在则失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:54:24.973

```
SELECT * INTO TABLE 
```

这会将数据插入到新表中

```
INSERT INTO TABLE SELECT * 
```

将数据从现有表复制到另一个现有表

# c++ - 如何使用 SIGAR 库正确获取每个进程的已用 CPU 百分比

> ID：14989697
> 
> 赞同：0
> 
> 时间：2013-02-20T20:52:09.260
> 
> 标签：c++, cpu-usage, sigar

我正在编写一个代码来获取每个进程的已用 CPU 百分比，但是我的代码有问题。这会显示奇怪的值，例如 3.63499e+262 % 和 0%，而任务管理器会显示大于 0% 且低于或等于 100% 的值。我做错了什么？

```
sigar_t *sigarproclist;
sigar_proc_list_t proclist;
sigar_open(&sigarproclist);
sigar_proc_list_get(sigarproclist, &proclist);
for (size_t i = 0; i < proclist.number; i++)
{
    sigar_proc_cpu_t cpu;
    sigar_proc_cpu_get(sigarproclist, proclist.data[i], &cpu);
    sigar_proc_state_t procstate;
    sigar_proc_state_get(sigarproclist, proclist.data[i], &procstate);
    qDebug() << procstate.name << 100 * cpu.percent << "%";
}
sigar_close(sigarproclist); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:53:31.490

我对我的代码进行了一些更改，现在它看起来有效。

```
sigar_t *sigarcpulist;
sigar_cpu_info_list_t cpulist;
sigar_open(&sigarcpulist);
sigar_cpu_info_list_get(sigarcpulist, &cpulist);
sigar_close(sigarcpulist);

forever
{
    float percent;
    sigar_t *sigarproclist;
    sigar_proc_list_t proclist;
    sigar_open(&sigarproclist);
    sigar_proc_list_get(sigarproclist, &proclist);
    for (size_t i = 0; i < proclist.number; i++)
    {
        sigar_proc_cpu_t cpu;
        sigar_proc_cpu_get(sigarproclist, proclist.data[i], &cpu);
    }
    Sleep(1000);
    for (size_t i = 0; i < proclist.number; i++)
    {
        sigar_proc_cpu_t cpu;
        int status = sigar_proc_cpu_get(sigarproclist, proclist.data[i], &cpu);
        if (status == SIGAR_OK)
        {
            sigar_proc_state_t procstate;
            sigar_proc_state_get(sigarproclist, proclist.data[i], &procstate);
            percent = cpu.percent * 100 / cpulist.size;
            qDebug() << procstate.name << percent << "%";
        }
    }
    sigar_close(sigarproclist);
} 
```

# php - 销毁和 session_start() 后无法处理 $_SESSION 数组

> ID：14989698
> 
> 赞同：0
> 
> 时间：2013-02-20T20:52:15.383
> 
> 标签：php, session, session-management

我`$_SESSION`用来存储来自多页表单的数据。一切都很顺利，直到我完成提交并结束会话以防止在该人尝试重新输入表单时复制相同的表单数据。表单完成并提交后，终止会话并擦除会话数据：

```
$_SESSION = array();

setcookie(session_name(), '', time() - 42000);

session_destroy(); 
```

接下来是这样的：

```
<?php
session_start();

include "connect-moo.php";
$learning = true;

//get any post variables and save them to the session
foreach ($_POST as $key => $val) {
$_SESSION[$key] = $val;
 }

sessionDump();  //dumps session to db

//check to see if step is set (in the post eg ?step=getaquote). If not, set it to current session step

if(!isset($_POST["step"])) {
if(isset($_SESSION['step'])) {
    $_POST['step'] = $_SESSION['step'];
}
}

//show the page appropriate to the current step
if ($_SESSION['mode'] == 'edit' && $_SESSION['lastpage'] != "review" && $_SESSION['step'] != "session") {
$_SESSION['lastpage'] = 'review';
getReview();    
}
else { 
if($_SESSION['step'] != 'session') $_SESSION['lastpage'] = $_SESSION['step'];

switch ($_POST["step"])
{

    case "session":

        foreach($_SESSION as $key => $val){
            echo $key.": ".$val."<br>";
            //phpinfo();

        }

        echo "Post Data<br>";
        foreach($_POST as $key => $val) {
            $sval = mysql_real_escape_string($val);
            $skey = mysql_real_escape_string($key);
            echo $skey.": ".$sval."<br>";
        }

        break;

    case "getaquote":

        getAQuote();
    break;

    // and so on... 

            default:
        start();
}
}

... (all of the abovementioned functions)

?> 
```

我已经确认正在建立一个新的会话 cookie，但在重新启动会话`$_POST`后`$_SESSION`它是空的。通过最近的修复（谢谢！）我可以以编程方式将数据推送到 $_POST 和 $_SESION 数组中（例如 $_POST['foo'] = 'bar';），但通过 URI 传递的变量会被忽略。

* * *

解决方案：

重新 session_destroy，请参阅 Alex B 的答案。

回覆。$_POST 问题 - 事实证明，当直接通过 URL 输入信息时，服务器将其（正确）解释为 GET 而不是 POST。我修改了我的代码以获取所有 GET 和 POST 数据，但在生产中只需要 POST。这是新代码：

```
//get any submitted variables and save them to the session
foreach ($_GET as $key => $val) {
$_SESSION[$key] = $val;
 }
foreach ($_POST as $key => $val) {
$_SESSION[$key] = $val;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:58:45.753

你这样做是错的。

`session_destroy()`销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。要再次使用会话变量，`session_start()`必须调用。

为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。`setcookie()`可用于此。

**解决方案：**

```
session_start();
session_unset();
session_destroy();
session_write_close();
setcookie(session_name(),'',0,'/');
session_regenerate_id(true); 
```

# android - 是否可以在 Android 中创建与操作栏重叠的视图？

> ID：14989702
> 
> 赞同：0
> 
> 时间：2013-02-20T20:52:40.200
> 
> 标签：android

我已经从表格布局中创建了一个菜单。激活后，菜单将在背景视图上进行动画处理，直到覆盖整个窗口。

当菜单可见时，我希望此菜单也与操作栏重叠。我的问题是，是否可以让视图与操作栏容器重叠？如果是这样，我怎么能做到这一点？

# iphone - 元视口 - 设备宽度必须是最小值

> ID：14989704
> 
> 赞同：1
> 
> 时间：2013-02-20T20:53:03.790
> 
> 标签：iphone, metadata, viewport, device-width

我们创建了一个优化为 480px 的网站。但是，如果我们将元视口设置为 device-width 且初始比例 = 1，那么在 iPhone 上，宽度为 320 像素，站点为宽。

将初始比例设置为 0.65 时，该站点在 iPhone 上很好，但在 iPad 上，该站点太小了！

我们如何将显示站点的最小宽度设置为 480 像素但没有水平滚动条？`Body { min-width 480px; }`已在 CSS 中设置。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T21:21:39.580

也许尝试这样的事情：

```
<meta name="viewport" content="width=device-width"> 
```

如果这不起作用，您可以使用 CSS 中的媒体标签：

```
@media all and (max-width: 480px) {
    body { -webkit-transform: scale(0.65); }
} 
```

# c++ - 当某个成员变量取某个值时，在 gdb 中是否有一种快速的方法来中断类的任何方法？

> ID：14989707
> 
> 赞同：0
> 
> 时间：2013-02-20T20:53:15.897
> 
> 标签：c++, gdb

现在这涉及到我在每个成员方法上放置断点，并在每个方法中添加关于一个也是唯一一个成员变量的相同条件语句。有没有更简洁的方式来指定，也许是这样的：

```
b ClassFoo if m_classCounter > bla && m_id == 17 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:09:02.300

我相信您正在寻找的东西称为观察点。基本上，只要给定表达式的值发生变化，它就会中断。

[http://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html](http://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html)

# c++ - pthread_create 无法与 pthread_attr_setschedparam 一起正常工作

> ID：14989708
> 
> 赞同：1
> 
> 时间：2013-02-20T20:53:16.790
> 
> 标签：c++, linux, pthreads

我是线程编程的新手。所以我为这个看似愚蠢的问题道歉。

我正在尝试使用 pthread_attr_t 使用 pthread_create() 创建一个 POSIX 线程。我正在尝试设置 sched_priority 值并将其放入属性中。代码粘贴在下面：

```
#include <iostream>
#include <cstring>
#include <pthread.h>
using namespace std;

void* log(void* arg)
{

  FILE *fp = fopen("/tmp/log.txt", "w+");
   if (fp != NULL)
   {
     fputs("Logging with Thread", fp);
    }
   else
   {
    cout <<"file pointer not created" << endl;
   }
   return 0;
 }
int main(int argc, char** argv )
{

  pthread_t th;
  pthread_attr_t th_attr;
  int policy;
  struct sched_param thparam;
  memset(&thparam, 0,sizeof(sched_param));
  int retval = pthread_attr_init(&th_attr);
  if (0 != retval)
   {
     cout <<"Attribute initialization failed" << endl;
   }

  thparam.sched_priority = 10;

  int ret1 = pthread_attr_setschedparam(&th_attr, &thparam);
  if (0 == ret1)
  {
   cout <<"pthread_attr_setschedparam PASSED" << endl;
   } 

 int ret = pthread_create(&th, &th_attr, log, NULL);
 if (0 != ret)
  {
   cout <<"thread not created" << endl;      
  }
 else
  {
   cout <<"Thread created" << endl;
  }

  int retval1 = pthread_getschedparam(th, &policy, &thparam);
  if (0 != retval1)
  {
   cout <<"Inside Main::pthread_getschedparam FAILED at start" << endl;
  }
  else
  {
   cout <<"Inside Main::priority: " << thparam.sched_priority << endl;
   cout <<"Inside Main::sched policy: " << policy << endl;
  }
  pthread_join(th, NULL);

  return (0);
 } 
```

每次我运行这个程序时，都会创建线程，但默认优先级（在我的例子中是 15）。由于我已将优先级设置为 10，它应该以 10 优先级开始。我不明白为什么会这样。我打印的所有日志消息都符合预期，似乎没有错误。谁能指出我在代码中做错了什么？

谢谢！！！！

编辑：

我似乎发现了一件有趣的事情。我无法在线程创建期间设置线程优先级。但是我可以在创建线程后更改线程的优先级。我使用 API`pthread_setschedparam`来设置优先级。这次线程的优先级正确地改变了。仍然无法理解为什么会这样。

我还应该提到我正在使用带有 ARM arch 的嵌入式系统。我还将调度程序策略设置为 SCHED_RR。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:10:03.033

你确定你看到这个输出吗？

```
pthread_attr_setschedparam PASSED 
```

您没有检查`pthread_attr_setschedparam`错误调用，我认为它可能返回 EINVAL，因此线程的优先级没有改变。

Linux 手册页声称该功能始终成功，但当我测试您的代码时，情况并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:43:11.277

尝试这样的事情：

```
pthread_attr_init(&thread_attr);
pthread_attr_setdetachstate(&thread_attr, PTHREAD_CREATE_DETACHED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T17:44:27.287

从手册页：

> ```
>  In order for the parameter setting made by
>    pthread_attr_setschedparam() to have effect when calling
>    pthread_create(3), the caller must use
>    pthread_attr_setinheritsched(3) to set the inherit-scheduler
>    attribute of the attributes object attr to PTHREAD_EXPLICIT_SCHED. 
> ```

# java - Java 编辑程序将 println 直接打印到 SWT 文本小部件而不是控制台

> ID：14989712
> 
> 赞同：1
> 
> 时间：2013-02-20T20:53:33.263
> 
> 标签：java, arrays, eclipse, swt

我有一个使用 println 打印格式良好的二维数组的 java 程序。在eclipse中，这个数组当然会打印到控制台。但是，我在同一个项目中制作了一个单独的 SWT 程序，我希望将此数组打印到文本小部件而不是 Eclipse 控制台。我该怎么做呢？

```
public static void main(String[] args) throws IOException {
    try {
        ReadFile file = new ReadFile(path);
        String[][] pf = file.aryData();
        int tmp = 1;
        int yn=1;
        while(yn==1){
        Scanner in = new Scanner(System.in);
        System.out.print("To View-0 , Add-1 ");
        yn = in.nextInt();
        PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter(path, true)));
        out.println("");
        if (yn == 1) {
            String[][] newpf = new String[pf.length + 1][c];
            String newData1;
            System.arraycopy(pf, 0, newpf, 0, pf.length);
            for (int i = 0; i < c; i++) {
                System.out.print("Insert " + pf[0][i]+":     ");
                if (i==0){
                    in.nextLine();
                    newData1 = in.nextLine();
                    out.print(newData1);
                }   
                else { 
                    newData1 = in.nextLine();
                    out.print(", "+newData1);
                }   
                newpf[pf.length][i] = newData1;
            }
            System.out.print("");
            pf=newpf;
            out.close();
            }
        }
        for (int i = 0; i < pf.length; i++) {

            for (int k = 0; k < c; k++) {
                int tmp2 = pf[i][k].length();
                if (tmp2 > tmp) {
                    tmp = tmp2 + 5;
                }
            }
        }
        for (int i = 0; i < pf.length; i++) {
            for (int j = 0; j < c; j++) {
                String fmStr = "%-" + tmp + "s";
                System.out.printf(fmStr, pf[i][j]);
            }  
            System.out.println("");
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:14:27.877

如果它打印到控制台，它是否直接使用 System.out ？您可能必须将 System.out 参数化为 PrintStream，以便使用另一个将打印到 OutputStream 的 PrintStream。

[上传代码后编辑]

如果我得到你想要做的，你将不得不替换行“System.out.printf(fmStr, pf[i][j]);” 存储字符串或将格式化的输出写入另一个流并将其重定向到您的其他程序。您可能希望从 Main 外部化处理，以便在您的 SWT 程序中使用它。

# r - 当 P 小于 0.05 时，我们如何强制我们的代码计算相关性？

> ID：14989714
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:53:51.990
> 
> 标签：r, correlation

我正在计算两个数据集之间的相关图。我得到的结果如下：[![在此处输入图像描述](../Images/dd1fd09217eeaa54e369885fb7883fd1.png)](https://i.stack.imgur.com/AsaUf.png)

```
dir1 <- list.files("D:thly", "*.bin", full.names = TRUE)
dir2 <- list.files("D:002", "*.envi", full.names = TRUE)
file_tot <- array(dim = c(1440, 720, 11, 2))

} 
```

我只想在 P 值低于 0.05 时计算相关性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:00:05.573

您的问题不是非常（即根本不是）可重复的，但这应该让您开始。诀窍是计算所有相关性，但仅绘制/返回高于阈值的相关性。该函数`cor.test`执行相关性测试。

```
return_cor = function(x, y)  {
    z = cor.test(x,y)
    if(z[[3]] < 0.05) {
        return(z[[4]])
    } else { 
        return(NA) 
    }
} 
```

和一个测试：

```
x = rnorm(10); y = rnorm(10)
R> return_cor(x, x)
cor 
  1 
R> return_cor(x, y)
[1] NA 
```

所以

```
resultsr = apply(file_tot, c(1,2), function(x) {return_cor(x[,1],x[,2])}) 
```

# java - 带有排序和限制的mongodb命令

> ID：14989723
> 
> 赞同：2
> 
> 时间：2013-02-20T20:54:16.353
> 
> 标签：java, mongodb

嗨，我正在尝试使用 Mongo Java api 在下面实现这个确切的命令

```
db.system.profile.find({},{millis:1}).sort({$natural:-1}).limit(1); 
```

我正在考虑做类似下面的事情，但我只希望返回一个 INT，这可能是一个错误/漫长的做法。

```
Mongo mongoClient = new Mongo( "localhost" , 27017 );
        DB db = mongoClient.getDB( "user" );    
        /*  db.system.profile.find({},{millis:1}).sort({$natural:-1}).limit(1);*/
        DBCollection collTime = db.getCollection("system.profile");
        DBCursor cursor = collTime.find(new BasicDBObject("millis", 1),new BasicDBObject("$natural", -1)).limit(1);  
        System.out.println(cursor.toString()); 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:22:05.060

看看[*public DBObject findOne(DBObject o, DBObject fields, DBObject orderBy)*](http://api.mongodb.org/java/current/com/mongodb/DBCollection.html#findOne%28com.mongodb.DBObject,%20com.mongodb.DBObject,%20com.mongodb.DBObject%29)。代码看起来像这样：

```
String str = collection.findOne(new BasicDBObject(), new BasicDBObject("millis", 1),
    new BasicDBObject("$natural", -1)).get("millis").toString(); 
```

# ios - 更改 uiwebview 选择颜色。

> ID：14989724
> 
> 赞同：2
> 
> 时间：2013-02-20T20:54:15.940
> 
> 标签：ios, uiwebview

当在 uiwebview 上选择任何文本以清除颜色或透明时，如何更改默认值（浅蓝色）？

# ios - 带有暂存资产的应用商店提交

> ID：14989727
> 
> 赞同：0
> 
> 时间：2013-02-20T20:54:34.083
> 
> 标签：ios, app-store, appstore-approval

我们的应用程序使用从生产服务器下载的资产来提供内容。使用我们的新版本 2.0 应用程序，我们正在更新内容的格式。旧的 1.0 客户端将无法使用 2.0 资产。

因此，当需要提交到 App Store 时，我们还不能将 2.0 资产推送到服务器，因为 2.0 应用程序还不可用。所以问题是，在 Apple 审查期间，他们将查看旧的 1.0 资产，这些资产在 2.0 应用程序中也不太适用。

有没有一种方法可以提交我们的应用程序以供审核，并让 Apple 使用暂存内容，以便他们使用 2.0 应用程序正确查看 2.0 资产？我认为必须为此做好准备，我知道我们不能成为第一个遇到这个问题的团队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:57:59.420

在不同位置的服务器上拥有`v1.x`和`v2.x`资产。如果`2.x`资产破坏`1.x`代码，那么您不想覆盖它们，因为您将拥有不`2.x`立即更新的用户，然后发现应用程序损坏，只会给您留下差评或彻底离开您的应用程序。

将`2.x`代码指向`2.x`资产，将`1.x`代码指向`1.x`资产。

# c# - 无法运行 WCF https Web 服务

> ID：14989728
> 
> 赞同：1
> 
> 时间：2013-02-20T20:54:38.423
> 
> 标签：c#, visual-studio-2010, wcf, ssl, ssl-certificate

我创建了一个`WCF HTTP`自托管的 Web 服务。现在我想把它转换成`HTTPS`. 所以我遵循以下几点：

按照[此](http://msdn.microsoft.com/en-us/library/ms733791%28VS.100%29.aspx)页面创建一个`certificates`并将其绑定到特定端口。`mmc`我使用->创建了一个证书`console root`，并遵循上面链接中编写的相同步骤。

然后我运行以下命令将端口与证书绑定：

```
netsh http add sslcert ipport=0.0.0.0:8000 certhash=0000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

我`certhash`根据我的证书改变。我也检查`Created certificate info`并得到了这个。

![在此处输入图像描述](../Images/4008369fbb7f0bf2e949e4d0134819f8.png)

我还将粘贴在我的项目中编写的代码以在绑定端口上运行 Web 服务：

```
try
  {
    m_running = true;
    private static String m_baseAddress = "https://10.0.0.1:8083";
    WebHttpBinding _binding = new WebHttpBinding();
    _binding.Security.Mode = WebHttpSecurityMode.Transport;
    _binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;
    m_serviceHost = new WebServiceHost(typeof(TService), new Uri(m_serviceAddress));
 m_serviceHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName,"contoso.com");
    ServiceEndpoint ep = m_serviceHost.AddServiceEndpoint(typeof(TContract), _binding, "");
     m_serviceHost.Open();
    }
     catch(Exception e){ } 
```

每当我重建我的项目并运行它时。它总是开始一秒钟然后停止。我检查了日志，什么都没有。

但是当我删除这条线时

```
m_serviceHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName,"contoso.com"); 
```

并替换`https`为`http`. 它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:13:57.730

这些是创建`HTTPS` `WCF self hosted`Web 服务的以下步骤。

*   首先，使用 netsh 为端口添加一个命名空间： `netsh http add urlacl url=https://127.0.0.1+:8085/ user=EVERYONE`

*   键入以下命令以创建客户端证书： `makecert -sk RootCA -sky signature -pe -n CN=localhost -r -sr LocalMachine -ss Root MyCA.cer`

*   现在创建一个服务器证书： `makecert -sk server -sky exchange -pe -n CN=localhost -ir LocalMachine -is Root -ic MyCA.cer -sr LocalMachine -ss My MyAdHocTestCert.cer`

`certificate`现在创建了两个新文件`\Program Files\Microsoft SDKs\Windows\v7.0A\Bin`，其名称为`MyCA.cer`和`MyAdHocTestCert.cer`

打开`server certificate`ie`MyAdHocTestCert.cer`并`thumbprint`从`details`选项卡中选择。

![在此处输入图像描述](../Images/9cc6ac458ac7bbdcc3674c005239ec04.png)

*   选择`thumbprint`并删除其中的所有空格。

*   现在使用以下命令将端口与此证书绑定： `netsh http add sslcert ipport=127.0.0.1:8085 certhash=0000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} clientcertnegotiation=enable`

在哪里

*   `ipport :` 主机地址和端口：输入与您在第一步中选择的地址相同的地址

*   `certhash :` 指纹

现在您完成了证书和端口绑定。要检查在 cmd 中写入的所有内容`netsh http show sslcert`，您会得到如下内容：

![这只是一个例子](../Images/354df32a1eef32d12a142cb6ef0563f4.png)

现在为 编写以下代码`WSHTTPbinding`：

```
WebHttpBinding _binding = new WebHttpBinding();
_binding.Security.Mode = WebHttpSecurityMode.Transport;
_binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
m_serviceHost = new WebServiceHost(typeof(Serviceclass), new Uri("https://127.0.0.1:8085/"));
             m_serviceHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, "611fe7748c5883f8082351744604a8c917608290");
            ServiceEndpoint ep = m_serviceHost.AddServiceEndpoint(typeof(InstanceClass), _binding, "hello");
            m_serviceHost.Open(); 
```

现在创建你的消费者来使用这个自托管的 WS

# css - IE8位置相对负值问题

> ID：14989731
> 
> 赞同：1
> 
> 时间：2013-02-20T20:54:49.863
> 
> 标签：css, internet-explorer-8

我正在建立一个网站[http://inbrackets.dk/marek/](http://inbrackets.dk/marek/)在 IE8 中看起来很糟糕，我真的不知道如何修复它。

问题出在首页的图片上。为了使它们重叠一点，我使用了：

```
.marek-photo,
.aref-photo,
.truc-photo {
    left: 80px;
    position: relative;
    height: auto;
}
.aref-photo {
    left: -30px;
}
.truc-photo {
    left: -120px;
}
.photos {
    height: auto;
    float: left;
    border-bottom: 1px solid #003D3D;
} 
```

我知道，这个问题并不新鲜，但我仍然找不到合适的解决方案。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:04:37.553

您正在使用 CSS 媒体查询将三个图像的大小更改为 33%。IE8- 不支持媒体查询（`print`我相信除了 之外）。添加一般屏幕规则以将宽度设置为 33% 或使用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:57:24.577

[尝试在您的页面http://modernizr.com](http://modernizr.com)中插入modernizr 库

# c++ - boost::spirit：语义动作块中的多个语句

> ID：14989734
> 
> 赞同：4
> 
> 时间：2013-02-20T20:55:04.973
> 
> 标签：c++, boost, boost-spirit-qi, boost-phoenix

boost::phoenix 使用运算符 "," 定义语句块（参见[boost phoenix 块语句](http://www.boost.org/doc/libs/1_53_0/libs/spirit/phoenix/doc/html/phoenix/composite.html#phoenix.composite.statement.block_statement)）。我正在尝试在 boost::spirit 规则的语义操作部分中使用此构造。但是，看起来只执行了语句块中的最后一条语句。这是一个显示问题的最小可编译示例：

```
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_fusion.hpp>
#include <boost/spirit/include/phoenix_stl.hpp>
#include <boost/spirit/include/phoenix_object.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>

int main()
{
    using boost::spirit::qi::int_;
    using boost::phoenix::ref;
    using boost::spirit::qi::phrase_parse;
    using boost::spirit::ascii::space;

    int a = 0;
    int b = 0;

    const std::string s("1");
    bool f = phrase_parse(s.begin(),s.end(),
            int_[
                 ref(a)=1,
                 ref(b)=2
                ],
            space);
    std::cout << f << ": a=" << a << ", b=" << b << std::endl;
} 
```

该程序（使用 boost 1.52）打印

1：a=0，b=2

但我期待a = 1，b = 2。这是它应该如何工作的吗？为什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:50:16.277

鉴于使用 Spirit 编译时间永远不会*很快*，我建议坚持使用实用程序库的“高级包含”：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

int main()
{
    namespace qi = boost::spirit::qi;

    int a = 0, b = 0;

    const std::string s("1");
    bool f = qi::phrase_parse(s.begin(),s.end(),
            qi::int_[
                 boost::phoenix::ref(a)=1,
                 boost::phoenix::ref(b)=2
                ],
            qi::space);
    std::cout << f << ": a=" << a << ", b=" << b << std::endl;
} 
```

同样，我通常建议`boost/fusion/adapted.hpp`通过`boost/fusion/adapted/struct.hpp`ea 或`boost/range/algorithm.hpp`.

您的里程可能会有所不同，但 TU 定义的 Spirit 解析器通常不是优化我项目中编译时间的重点。

# php - 基于javascript输出自定义html中的文本

> ID：14989739
> 
> 赞同：0
> 
> 时间：2013-02-20T20:55:11.933
> 
> 标签：php, javascript, jquery

我有一个模式对话框功能，该功能设置有一个 javascript/jquery 脚本，当用户单击按钮时会弹出该脚本。我从按钮中提取数据以找出哪个按钮。但是弹出的文本是在html中设置的，带有一个调用脚本函数的div。

我的问题是，如何根据我在脚本中提取的数据自定义此文本。

这是下面的相关代码，可让您了解我正在尝试做的事情：

剧本：

```
<script>
$(function() {
  $( "#dialog-modal" ).dialog({autoOpen: false, height: 250, width: 400, modal: true});

  $( "#opener" ).click(function() {
                       $( "#dialog-modal" ).dialog( "open" );

                       $.get('/like_artist.php', {artist_id : $(this).data('artist_id')}, function(data) {
                             alert("Data Loaded: " + data.artist_id);
                             }, "json");

        });

  });
</script> 
```

在这个 div 中调用它：

```
<div id="dialog-modal" title="Basic dialog">
<p>You have just liked </p>

<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

用户单击的按钮（具有不同 data-artist_id 值的众多按钮之一）：

```
<div class="button_row">
                        <button type="button" id="opener" data-artist_id="1">Play My City</button>
                    </div> 
```

基本上我想让artist_id 通知div 为每个按钮定制对话框中的文本。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:03:43.680

我假设你正在寻找这样的东西？

```
$( "#opener" ).click(function(e) {
    var text = '';
    var artistId = $(e.target).data('artist_id');
    switch(artistId) {
        case 1: text = 'text for artist 1'; break;
        case 2: text = 'text for artist 2'; break;
        default: text = 'unknown'; break;
    }
    $('#idOfPTagWhereYouWantText').text(text); 
```

# hibernate - Hibernate 存储过程调用导致 GenericJDBCException: Invalid column index

> ID：14989742
> 
> 赞同：1
> 
> 时间：2013-02-20T20:55:25.377
> 
> 标签：hibernate

为了学习使用 Oracle 存储过程的 Hibernate 4.1，我试图让一个示例尽可能简单地工作： 1\. 没有传入参数 2\. SYS_REFCURSOR 作为一个返回参数

我得到的是一个例外：“org.hibernate.exception.GenericJDBCException：无效的列索引”。在网上搜索几个小时来解决这个问题并没有多大帮助。

============================== 程序

```
CREATE OR REPLACE PROCEDURE IFC_OWNER.JPA_APPLICATION_R_TEST 
(    o_result_set OUT SYS_REFCURSOR  )
AS
BEGIN
    OPEN o_result_set FOR
    SELECT APPLICATION_ID, APP_COMMON_NM, APP_DESC, APP_URL FROM APPLICATION_R;
END;
/ 
```

============================== xml调用

```
<sql-query name="oracleproccall" callable="true">
    <return alias="application_r" class="com.myco.entities.ApplicationR"/>
    <![CDATA[ call JPA_APPLICATION_R_TEST() ]]>
</sql-query> 
```

=============================java（调用sqlQuery.getResultList()时抛出异常）

```
public void run() {
EntityManager entityManager = entityManagerFactory.createEntityManager();
try {
    Query sqlQuery = entityManager.createNamedQuery("oracleproccall");
    List list = sqlQuery.getResultList();    
    ...snip...
} catch (PersistenceException ex) {
    ex.printStackTrace();
} finally {
    entityManager.close();
}    
} 
```

==============================实体类

```
 @Entity
    @Table(name = "APPLICATION_R", schema = "IFC_OWNER")
    public class ApplicationR implements Serializable {
        private int applicationId;
        private String appCommonNm;
        private String appDesc;
        private String appUrl;
        ...snip...
More available if needed. 
```

============================== 异常

```
## ApplicationsByStoredProc ##
Hibernate: 
    /* named native SQL query oracleproccall */ call JPA_APPLICATION_R_TEST()
Feb 19, 2013 2:58:07 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 17003, SQLState: 99999
Feb 19, 2013 2:58:07 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Invalid column index
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Invalid column index
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:266)
    at com.myco.jpa.tests.ApplicationsByStoredProc.run(ApplicationsByStoredProc.java:37)
    at com.dstoutput.jpa.JPAEntities_InFactDomain_Test.main(JPAEntities_InFactDomain_Test.java:56)
Caused by: org.hibernate.exception.GenericJDBCException: Invalid column index
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.CallableStatementProxyHandler.continueInvocation(CallableStatementProxyHandler.java:49)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy16.registerOutParameter(Unknown Source)
    at org.hibernate.dialect.Oracle8iDialect.registerResultSetOutParameter(Oracle8iDialect.java:507) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:36:35.663

我发现了这个问题。我使用的是 Session 和 Query 类的 javax.persistence 版本，而不是 org.hibernate 版本；javax.persistence 不支持 Oracle 存储过程调用，而 Hibernate 支持。如果没有下面提供的导入语句，差异是微妙的。赠品应该是使用 sqlQuery.getResultList()。这是一个在 Hibernate 版本的 Query 中不存在的 JPA 方法调用。

导入导入 javax.persistence.Query；

查询 sqlQuery = entityManager.createNamedQuery("oracleproccall"); 列表列表 = sqlQuery.getResultList();

使用 Hibernate 版本的构造是 query.list() 而不是 query.getResultList()：

```
import java.util.Iterator;
import java.util.List;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import com.myco.entities.ApplicationR

private void anotherTest() {
    Configuration cfg = new Configuration();
    cfg.configure("hibernate.cfg.xml");
    SessionFactory sf = cfg.buildSessionFactory();
    Session s = sf.openSession();
    Transaction tx = s.beginTransaction();

    List<AppR> apps;
    Query namedQuery = s.getNamedQuery("oraclestoredproc");
    apps = namedQuery.list();
    apps = s.getNamedQuery("oraclestoredproc").list();
    Iterator<ApplicationR> iterator = apps.iterator();
    while (iterator.hasNext()) {
        ApplicationR app = (ApplicationR) iterator.next();
        System.out.print(app.getApplicationId() + " ");
        System.out.print(app.getAppCommonNm() + " ");
        System.out.print(app.getAppDesc() + " ");
        System.out.println(app.getAppUrl() + " ");
    }
    s.flush();
    tx.commit();
    s.close();
} 
```

感谢Jitu Ji和这个[来源](http://www.coderanch.com/t/466425/ORM/databases/Working-Hibernate-Call-Oracle-Stored)

# python - 为什么 QSplashscreen 并不总是有效？

> ID：14989749
> 
> 赞同：1
> 
> 时间：2013-02-20T20:55:49.630
> 
> 标签：python, pyqt, splash-screen

我刚刚在我的 PyQt 应用程序中编写了启动画面，以便在开始之前显示图像。我用过 QSplashscreen。问题是图像显示，比方说，每 20 次。在其他情况下，会显示一个灰色矩形。两种情况的截图：

是否有效： http: [//dl.getdropbox.com/u/1088961/prob2.jpg](http://dl.getdropbox.com/u/1088961/prob2.jpg)

不起作用：[http ://dl.getdropbox.com/u/1088961/prob1.jpg](http://dl.getdropbox.com/u/1088961/prob1.jpg)

我试图延迟启动窗口，但如果灰色矩形变成图片，它就在消失之前（即使我将所有东西都延迟了 10 秒）。

这是我的代码：

```
# -*- coding: utf-8 -*-
import sys
from time import time, sleep
from PyQt4.QtGui import QApplication, QSplashScreen, QPixmap

from gui.gui import MainWindow

def main():
    app = QApplication(sys.argv)
    start = time() 
    splash = QSplashScreen(QPixmap("aquaticon/images/splash_screen.jpg"))
    splash.show()
    if time() - start < 1:
        sleep(1)
    win = MainWindow()
    splash.finish(win)
    win.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

我正在使用带有 Fluxbox 的 Debian Linux（但在 Gnome 中是一样的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:06:01.440

是因为`sleep(1)`线。为了`QSplashScreen`正常工作，应该有一个事件循环正在运行。但是，`sleep`正在阻塞。因此，在完成之前（一整秒），您不会进入`app.exec_()`（事件循环）部分。`sleep`那个“灰色矩形”是您`sleep`之前输入的情况，`QSplashScreen`甚至可以自己绘制。

对于正常情况，您不会遇到此问题，因为您将在 Qt 中等待并且事件循环将运行。如果您想“模拟”等待，请睡一小段时间并强制`app`执行它的工作`.processEvents()`：

```
# -*- coding: utf-8 -*-
import sys
from time import time, sleep
from PyQt4.QtGui import QApplication, QSplashScreen, QPixmap

from gui.gui import MainWindow

def main():
    app = QApplication(sys.argv)
    start = time() 
    splash = QSplashScreen(QPixmap("aquaticon/images/splash_screen.jpg"))
    splash.show()
    while time() - start < 1:
        sleep(0.001)
        app.processEvents()
    win = MainWindow()
    splash.finish(win)
    win.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

# python - 我可以在 python 中使用库抽象吗？

> ID：14989750
> 
> 赞同：5
> 
> 时间：2013-02-20T20:55:54.170
> 
> 标签：python, windows, python-3.x

我在用：

```
for root, dirs, files in os.walk(rootDir): 
```

浏览目录。都很酷。但是，我在当然有库抽象的 Windows 7 上运行。因此，例如图片库可能映射到`c:\users\me`并且`c:\users\share` 有什么方法可以将这个库抽象与 python 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:13:08.973

除非我对这个功能的工作方式有误（我面前实际上没有 Win7 机器），否则您必须访问 Windows Shell API 才能访问库。

阅读MSDN Magazine 中的[Introducing Libraries](http://msdn.microsoft.com/en-us/magazine/dd861346.aspx#id0370007)，似乎很清楚，仅处理文件系统的应用程序会将库视为常规目录，甚至没有任何迹象表明构成该库的各种分散目录。除非您始终坚持使用花哨的文件选择器对话框来获取所有路径（在这种情况下，用户会看到库，但最终总是选择特定的文件夹，因此您不必处理库），您必须明确使用外壳 API。

我认为您想从[Windows 库](http://msdn.microsoft.com/en-us/library/windows/desktop/dd758096%28v=vs.85%29.aspx)开始作为开发指南，从[IShellLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391719%28v=vs.85%29.aspx)开始作为参考。

这些显然是 COM API，因此您可能希望使用[`win32com`](http://sourceforge.net/projects/pywin32/)它从 Python 访问它们。（你可以使用`ctypes`和处理 C 风格的 COM 东西，但你真的不想这样做。）可能有人已经将这些 COM 对象封装在一个漂亮的 Python 接口中——我在快速 PyPI 中没有找到任何东西和 ActiveState 搜索，但您可能想尝试更认真的搜索。

或者，当然，您可以使用 IronPython 并使用 .NET API 而不是本机 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:17:28.043

最新版本的 Pywin32 (218) 支持 shell 库接口：

```
import pythoncom
from win32com.shell import shell, shellcon
from win32com import storagecon
import os

kfm = pythoncom.CoCreateInstance(shell.CLSID_KnownFolderManager, None,
        pythoncom.CLSCTX_INPROC_SERVER, shell.IID_IKnownFolderManager)
libs_folder = kfm.GetFolder(shell.FOLDERID_Libraries)
libs_path = libs_folder.GetPath()

for lib_file in os.listdir(libs_path):
    if os.path.splitext(lib_file)[1] == '.library-ms':
        print lib_file
        i = shell.SHCreateItemFromParsingName(os.path.join(libs_path, lib_file),
                                              None, shell.IID_IShellItem)
        lib = pythoncom.CoCreateInstance(shell.CLSID_ShellLibrary, None,
                                         pythoncom.CLSCTX_INPROC, shell.IID_IShellLibrary)
        lib.LoadLibraryFromItem(i, storagecon.STGM_READ)
        for folder in lib.GetFolders():
            print '\t' + folder.GetDisplayName(shellcon.SHGDN_FORPARSING) 
```

# php - Codeigniter 向表中插入多个查询

> ID：14989751
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:55:59.670
> 
> 标签：php, mysql, database, codeigniter

我目前正在使用 codeigniter 为库存跟踪系统创建一个应用程序。我创建了一种创建/显示/更新/删除事件的方法。我遇到的问题是库存表。我正在显示一个表格，每一行都是一个独特的产品。我希望能够同时更新数据库库存表行。我在我的模型中尝试这样的事情：

```
function insert_inventory($data){

    foreach($_POST['product'] as $product){
        $this->db->insert('inventory', $data);
    }
} 
```

这是控制器：

```
function add_show_inventory() {
    $data['products']=$this->product->get_products();

    $this->form_validation->set_rules('skuID', 'skuID', 'required');
    $this->form_validation->set_rules('brought-in', '"Brought In"', 'required');
    $this->form_validation->set_rules('finished-with', '"Finished With"', 'required');
    $this->form_validation->set_rules('deliveries', 'Deliveries');
    $this->form_validation->set_error_delimiters('<div class="error-module">', '</div>');

    if($this->form_validation->run()== FALSE){
        $this->load->view('header');
        $this->load->view('menu');
        $this->load->view('inventory/show-add-inventory', $data);
        $this->load->view('footer');
    } else {
        if($_POST){

            //$data['show']=$this->show->get_show();

            $data=array(
                'skuID'=>$_POST['skuID'],
                'product'=>$_POST['product'],
                'deliveries'=>$_POST['deliveries'],
                'brought-in' =>$_POST['brought-in'],
                'finished-with'=>$_POST['finished-with'],
            );

            $this->inventory->insert_inventory($data);
            redirect(base_url().'shows/');
        }
    }
} 
```

关于如何同时插入多行的任何想法？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:16:33.207

为此优化您的代码：[$this->db->insert_batch();](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)

```
$data = array(
   array(
      'title' => 'My title' ,
      'name' => 'My Name' ,
      'date' => 'My date'
   ),
   array(
      'title' => 'Another title' ,
      'name' => 'Another Name' ,
      'date' => 'Another date'
   )
);

$this->db->insert_batch('mytable', $data); 
```

# php - 当我从 HTML 页面提交时，我收到以下错误：“错误：表 'searchquery_interfaithmedical_com.Persons' 不存在”

> ID：14989754
> 
> 赞同：1
> 
> 时间：2013-02-20T20:56:31.290
> 
> 标签：php, html, sql

我在使用 PHP 设置 SQL 查询时遇到了一些困难。

我有以下 php 脚本：

```
 <?php $con = mysql_connect("URL","USERNAME","PASSWORD"); if (!$con)   {   die('Could not connect: ' . mysql_error());   }

mysql_select_db("searchquery_interfaithmedical_com", $con);

$sql = "CREATE TABLE Persons ( FirstName varchar(15), LastName varchar(15), Age int )";

$sql="INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

    if (!mysql_query($sql,$con))   {   die('Error: ' . mysql_error());   } echo "1 record added";

mysql_query($sql);
$sql = "SELECT * FROM Persons";

mysql_close($con); ?> 
```

我要做的是将名字、姓氏和年龄放入 searchquery_interfaithmedical_com 数据库中的 Persons 表中。当我从 HTML 页面提交时，我收到以下错误：“错误：表 'searchquery_interfaithmedical_com.Persons' 不存在”。

PHP 脚本在插入之前不是已经在处理 TABLE 的创建了吗？我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:00:26.010

您正在覆盖`$sql`变量以在运行之前创建表。尝试：

```
$sql = "CREATE TABLE Persons ( FirstName varchar(15), LastName varchar(15), Age int )";
mysql_query($sql);
$sql = "INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')"; 
```

要从表中获取这些值，您可以这样做：

```
$sql = mysql_query("SELECT * FROM Persons");
while($results = mysql_fetch_array($sql)) {
    echo $results['FirstName'] . ', ' . $results['LastName'] . ', ' . $results['Age'] . '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:05:12.390

您的 Create Table 没有首先执行，因为您已经用插入覆盖了查询。请使用以下代码更正问题，并尽量避免再次频繁使用相同的变量。

```
<?php $con = mysql_connect("URL","USERNAME","PASSWORD"); 
if (!$con)   
{
   die('Could not connect: ' . mysql_error());   
}

mysql_select_db("searchquery_interfaithmedical_com", $con);

$query1 = "CREATE TABLE Persons ( FirstName varchar(15), LastName varchar(15), Age int )";

mysql_query$query1,$con);

$query2="INSERT INTO Persons (FirstName, LastName, Age) VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysql_query($query2,$con))   
{   
die('Error: ' . mysql_error());  
} 
echo "1 record added";

mysql_close($con); ?> 
```

# neo4j - 有没有办法确定neo4j数据库是否已关闭？

> ID：14989761
> 
> 赞同：0
> 
> 时间：2013-02-20T20:56:57.483
> 
> 标签：neo4j

标题说明了一切。我知道你可以`graphDb.shutdown()`在数据库上调用 a ，它说你应该在那之后删除所有引用，但是有没有一种编程方式来确定图形数据库的状态，看看它是否已关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-24T20:29:08.220

尝试[`GraphDatabaseService.isAvailable(long timeout)`](http://api.neo4j.org/current/org/neo4j/graphdb/GraphDatabaseService.html#isAvailable%28long%29)

> “使用此方法检查数据库是否处于可用状态。如果数据库当前不处于可用状态，您可以提供超时等待它变为可用状态。**如果数据库已关闭，则立即返回 false。** "

我相信超时以毫秒为单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:17:46.173

我认为你能得到它的唯一方法是使用反射。对于例如 EmbeddedGraphDatabase，您可以像这样得到它：

```
final Field life = InternalAbstractGraphDatabase.class.getDeclaredField("life");
life.setAccessible(true);
System.out.println(((LifeSupport) life.get(db)).getStatus()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T11:12:59.320

在 linux 服务器控制台中时，您可以使用此命令：（也可以在 Windows 上使用）

```
neo4j-community-1.9.M04/bin$ ./neo4j status
Neo4j Server is not running 
```

将任何高级语言与 REST 一起使用时的解决方法，您可能想要简单地`curl`或`wget`实例通常在其上运行的特定 url。如果您没有返回数据，您就知道它已关闭。

# html - 使用 CSS 将两列表格居中

> ID：14989765
> 
> 赞同：1
> 
> 时间：2013-02-20T20:57:08.800
> 
> 标签：html, css, html-table, centering

我在网站上有以下页面：

![截屏](../Images/81168ade2c93bdff45c9329ea42ba49f.png)

我通过在它们周围添加具有定义宽度的两列来使这两列居中：

```
 <table class="form">
    <tbody>
    <tr>
    <td style="width:20%;"></td>
    <th>User ID</th>
    <td><input type="text" name="userid" id="userid" class="medium" value="" /></td>
    <td style="width:20%;"></td>
    </tr>
    <tr>
    <td></td>
    <th>Password</th>
    <td><input type="password" name="password" id="password" class="medium" /></td>
    <td></td>
    </tr>
    <tr>
    <td></td>
    <th><label for="remember">Remember my user ID</label></th>
    <td><input type="checkbox" name="remember" id="remember" value="true" /></td>
    <td></td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
    <td colspan="3"><a href="forgot/">Forgot your user ID or password?</a></td>
    <td><input type="submit" name="submit" id="submit" value="Login" /></td>
    </tr>
    </tfoot>
    </table> 
```

如果没有宽度为 20% 的侧面的两个空列，有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:58:42.087

```
<style>
table.form {
    width: 400px; /* or however wide you want it */
    margin: 0 auto;
}
</style> 
```

然后，如果您愿意，可以通过将提交按钮放在自己的元素中来使提交按钮跨越整个宽度，或者您可以将其保留在表格中以获得一致的宽度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T21:00:41.613

尽管您可以找到解决方案来处理表格，因为有人已经解决了，但我建议您不要为此使用它们，表格的样式总是有问题的。您可以使用不同的 html 元素（例如 div）来完成此操作。下次再考虑吧：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:48:11.153

定义要居中的元素的宽度（使用像素、em-s、百分比..），并设置`margin-left: auto` `margin-right: auto`会有所帮助

# jquery - mootools 1.4.5 滚动功能

> ID：14989768
> 
> 赞同：0
> 
> 时间：2013-02-20T20:57:20.857
> 
> 标签：jquery, asp.net-mvc, mootools

我在我的网站上使用水平滚动浏览我的新闻。我正在为此使用 mootools 滚动器功能。当我使用 mootools 1.1 版本时，滚动条正在工作，但它与 jQuery 冲突。我可以使用 jQuery.noConflict()。但是我有很多文件在其中使用了 jQuery，并且这些文件相互依赖。所以我转向 mootools 1.4.5 核心和 1.4.0.1 更多。所以现在这些 mootools 版本与 jQuery 没有任何冲突，但滚动功能不起作用。我只是想知道 mootools 1.1 和 1.4.5 的滚动功能有什么重大变化吗？

# ios - 平移 UITableViewCell 时显示什么视图？

> ID：14989771
> 
> 赞同：0
> 
> 时间：2013-02-20T20:57:25.970
> 
> 标签：ios, uitableview, swipe, gestures

我正在平移 UITableViewCell contentView，如下面的代码所示。我想知道正在移动的 UITableViewCell contentView 后面存在的视图是什么？

我问的原因是因为我想改变这个“显示视图”的颜色。滑动单元格时，我想自定义每个 tableViewCell 下方的颜色。例如，如果您向左滑动第三行，您会在单元格后面看到蓝色。如果您向左滑动第 4 行，您会在单元格后面看到绿色。

```
- (void)panGestureRecognizer:(UIPanGestureRecognizer *)recognizer {

    //...

    if ((recognizer.state == UIGestureRecognizerStateBegan
         || recognizer.state == UIGestureRecognizerStateChanged)
        && [recognizer numberOfTouches] > 0) {

        CGPoint location1 = [recognizer locationOfTouch:0 inView:self.tableView];
        NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location1];           
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

        CGPoint translation = [recognizer translationInView:self.tableView];
        cell.contentView.frame = CGRectOffset(cell.contentView.bounds, translation.x, 0);
    }

    //...
} 
```

我尝试的一件事是创建一个 UIView 并将其添加到 contentView 后面的单元格中。这行得通，但并不令我满意。如果您使用 UITableViewRowAnimationLeft 输入代码以动画方式删除单元格，则背景颜色将随着单元格向左移动。这是有道理的，因为当动画将单元格移出以删除它时，我创建的背景视图会随着整个单元格一起移动。我想要的行为是背景颜色实际上位于单元格后面，因此在删除动画中移动单元格时它不会移动。

以下代码是我如何将背景视图添加到单元格并将其放在 contentView 下方。

```
[cell.contentView setBackgroundColor:[UIColor whiteColor]];

UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, self.tableView.rowHeight)];
view.backgroundColor = [UIColor redColor];
[cell addSubview:view];  
[cell bringSubviewToFront:cell.contentView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:23:57.350

啊哈！

我找到了一个优雅而美妙的解决方案。我高兴得发抖。

我在 cell.contentView 的右侧添加了另一个视图，其中包含我想要的背景颜色。现在，当您滑动单元格时，rightSideView 会随之拉动，因此看起来就像是正在显示的视图。（现在如果你想把内容放在那里，这对另一个人来说是另一个复杂的事情......我不这样做）我想做的就是让每个单元格能够有不同的显示颜色。耶！请注意，您必须使框架超长（即 500），以便删除的滑动看起来正确。

这是我的代码。

```
UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(320, 0, 500, self.tableView.rowHeight)];
label.backgroundColor = [UIColor redColor];
[cell.contentView addSubview:label]; 
```

# wcf - 在 WCF 中使用 XmlSerializer 序列化 IXmlSerializable 类型

> ID：14989774
> 
> 赞同：1
> 
> 时间：2013-02-20T20:57:33.287
> 
> 标签：wcf, xml-serialization, xsd, xmlserializer, ixmlserializable

对 DataContractSerializer 彻底失望，我尝试使用 IXmlSerializable 类型和 XmlSerializer 在 WCF 中启动和运行。

我已经在我的类中实现了 IXmlSerializable*和*XmlSchemaProvider 以进行序列化并为我的 OperationContract 声明 [XmlSerializerFormat]。

使用复杂模式时，我在尝试查看 WSDL 时收到以下错误：

```
"Schema type information provided by IXmlSerializable is invalid: 
Reference to undeclared attribute group 'anAttributeGroupInMySchema'" 
```

该模式具有各种包含（此属性在其中一个中声明）。我什至在代码 ( `schema.Includes`) 中添加了包含的模式，但无济于事。

即使在最简单的示例项目中（具有 1 个元素和 2 个属性的简单模式，简单的对应类，你可以命名它）我终于克服了这个错误，但碰到了：

```
"WCF_IXmlSerializable.TestClass.TestSchemaProvider() must return a valid type 
name. Type 'TEST' cannot be found in the targetNamespace='www.test.com'." 
```

可悲的是，我不知道什么*是*有效的类型名称。这当然不是我的 XSD AFAICS 中的元素名称。

有任何想法吗？

**编辑：**

示例源代码可以在[这里](https://github.com/tomisbiginthegame/WCF_IXmlSerializable/tree/master/WCF_IXmlSerializable)在线查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:51:41.773

我看到两个问题：您的测试架构没有定义名为 的类型`TEST_CLASS`，它定义了一个具有该名称的元素。XSD 应该是这样的：

```
<xs:schema xmlns="www.test.com" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="www.test.com">
  <xs:complexType name="TEST_CLASS">
    <xs:sequence>
      <xs:element name="TEST">
        <xs:complexType>
          <xs:attribute name="TYPE"/>
          <xs:attribute name="DURATION"/>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

第二个问题是`XmlSchema`应该使用以下`XmlSchema.Read()`方法加载对象：

```
using (XmlReader reader = XmlReader.Create(xsdDir + xsdFile)) {
  XmlSchema schema = XmlSchema.Read(reader, null); 
  . . . 
} 
```

# system-verilog - SystemVerilog vs C++ 赋值：参考还是复制？

> ID：14989776
> 
> 赞同：5
> 
> 时间：2013-02-20T20:57:53.523
> 
> 标签：system-verilog

我主要有 C++ 背景。我正在追踪我正在处理的一些 SystemVerilog 代码中的一个错误，并惊讶地发现我认为是对象复制分配实际上是一个引用分配。这个简化的代码说明了我的意思：

```
for (int i = 0; i < max_num; ++i)
{
    var cls_obj obj1;
    obj1 = obj_array[i];

    some_function(obj1); // modifies the object passed in

    // at this point BOTH obj1 and obj_array[i] are modified.

    // some other code goes here
} 
```

我期待的只是`obj1`被修改。这是因为 var 关键字吗？复制分配与引用分配在 SystemVerilog 中究竟是如何工作的？我很难从网络搜索中找到信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T21:34:43.957

SystemVerilog 中的类变量是引用或句柄。`new`只有在您使用关键字时才会创建实例。

因此，在您的示例中，`obj1`两者`obj_array[i]`都引用（或指向）同一个实例。

默认情况下，SystemVerilog 中的函数参数是按值传递的。但是，类句柄被视为值，因此您传递给函数的任何类都有效地通过引用传递。

在初始化类对象时，语言中有一种内置机制可以进行浅拷贝。

```
Packet p1;
Packet p2;
p1 = new;
p2 = new p1; 
```

这是一个浅拷贝。对于对象，仅复制句柄！

IEEE 1800-2009 第 8.11 章中的示例对此进行了解释。

关键字与您看到的`var`行为没有任何关系。事实上，我什至从未见过或使用过`var`. 根据 LRM，这允许在声明变量时省略类型。在您的代码中，指定了类型 (cls_obj)，因此我认为它的存在不会做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-01T12:55:56.790

当我学习 C++ 和 SV 时，我也注意到了这个问题。实际上，所有 sv 属性都在 LRM 中进行了详细描述（最新版本是 IEEE-1800-2017）。这个问题在第 8.2 章和第 13.5 章中有说明：

在第 13.5 章中：关于子程序

> SystemVerilog 提供了两种将参数传递给任务和函数的方法：通过值和通过引用。参数也可以通过名称和位置来绑定。子程序参数也可以被赋予默认值，允许对子程序的调用不传递参数

总结：
**子例程（包括函数和任务）参数默认按值传递，只有在添加 ref 关键字时才通过引用传递。**

第8.2章：关于类和对象

> 面向对象的类扩展允许动态创建和销毁对象。类实例或对象可以通过对象句柄传递，这提供了安全指针功能。可以将对象声明为具有方向输入、输出、输入输出或参考的参数。在每种情况下，复制的参数都是对象句柄，而不是对象的内容。

总而言之：
**对象是类的实例，对象的名称是它的引用或句柄，而不是它本身，这类似于 c++ 中的指针（通过 type *ptrname 声明）或引用（delcare by: type &refname）**。对象，你操纵它的句柄。因此，当你将对象传递给没有 ref 关键字 althrough 的子程序时，它会通过值传递，但值（对象名称）是对象的句柄，而不是对象本身。因此，类是通过引用传递的您是否添加 ref 关键字。

此外，这就是为什么对于 SV 中的新人来说，流动时会出现一个非常常见的错误（来自[SystemVerilog for Verification, Second Edition: A Guide to Learning the Testbench Language FeaturesJune 2008](https://dl.acm.org/doi/10.5555/1481672)）：

```
> task generate_transaction()
Transaction t;
mailbox mbx;
**t = new(); // wrong place**
repeat(10) begin
    assert(t.randomize());
    mbx.put(t);
end 
```

错误是：只创建一个类 Transaction 的实例，因此邮箱 mbx 中的 10 个对象指向单个相同的实例。正确的方法是在需要对象时创建许多对象，换句话说，将“t = new()”放在循环块中。

```
> task generate_transaction()
Transaction t;
mailbox mbx;
repeat(10) begin
    **t = new(); // right place**
    assert(t.randomize());
    mbx.put(t);
end 
```

# facebook - 在网页上标记来自 Facebook 喜欢/分享按钮的人

> ID：14989777
> 
> 赞同：0
> 
> 时间：2013-02-20T20:57:55.513
> 
> 标签：facebook

从网页上的 Facebook 点赞按钮“点赞/分享”页面时是否可以标记人？我试过查看他们的 API 文档，但我只发现在`@`他们的名字前面放了一个，但这仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:17:58.840

事实证明这是不可能的。

# java - 深拷贝3维数组

> ID：14989783
> 
> 赞同：1
> 
> 时间：2013-02-20T20:58:08.763
> 
> 标签：java, multidimensional-array

我无法理解深度复制的工作原理。我有这个想要复制的 3d 矢量。

```
int bands[][][] = new int[parameters.numberPredictionBands + 1][][];
int copy[][][] = new int [parameters.numberPredictionBands + 1][][]; 
```

然后我将这个向量传递给一些改变波段的方法

```
prepareBands(bands); 
```

最后我需要创建一个带的深层副本，所以当副本更改时，带保持不变，反之亦然。

```
copy = copyOf3Dim(bands, copy); 
```

我尝试了这些不同的方法，但它们似乎对我不起作用

方法一：

```
private int[][][] copyOf3Dim(int[][][] array, int[][][]copy) {

    for (int x = 0; x < array.length; x++) {  
        for (int y = 0; y < array[0].length; y++) {  
            for (int z = 0; z < array[0][0].length; z++) {
                copy[x][y][z] = array[x][y][z];  
            }  
        }  
    } 
    return copy;
} 
```

方法二：

```
private int[][][] copyOf3Dim(int[][][] array, int[][][]copy) {

    for (int i = 0; i < array.length; i++) {

        copy[i] = new int[array[i].length][];
        for (int j = 0; j < array[i].length; j++) {
            copy[i][j] = Arrays.copyOf(array[i][j], array[i][j].length);
        }
    }
    return copy;
} 
```

方法三：

```
public int[][][] copyOf3Dim(int[][][] array, int[][][] copy) {

    for (int i = 0; i < array.length; i++) {
        copy[i] = new int[array[i].length][];
        for (int j = 0; j < array[i].length; j++) {
            copy[i][j] = new int[array[i][j].length];
            System.arraycopy(array[i][j], 0, copy[i][j], 0, array[i][j].length);
        }
    }
    return copy;
} 
```

我认为我的程序在执行时崩溃`array[i].length`

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:01:36.577

我已经成功使用过几次的深度克隆的一般技巧是将对象序列化为 a`ByteArrayOutputStream`然后立即反序列化它。它不是表现最好的，但它是一个简单的两三行代码，可以工作到任何深度。

数组恰好是`Serializable`.

```
final ByteArrayOutputStream out = new ByteArrayOutputStream();
new ObjectOutputStream(out).writeObject(array);
final Spec clone = (int[][][]) 
     new ObjectInputStream(new ByteArrayInputStream(out.toByteArray())). 
```

# java - 来自结果集的基本编程 JTable 模型

> ID：14989786
> 
> 赞同：1
> 
> 时间：2013-02-20T20:58:19.823
> 
> 标签：java, mysql, swing, jtable, tablemodel

它不会添加数据，columames 工作，我已经筋疲力尽了，我不知道从这里去哪里。没有错误消息只是不会这样做，它显示的是对象而不是字符串，我也不知道为什么它不起作用，因为 model.addRow() 要求一个对象 [] [] 并且我相信我交付了？

```
initComponents();
   try {
    PreparedStatement stat = Domein.dConnection().prepareStatement("SELECT domainid , domain FROM nabilpx84_hamchi.dnsp_domains");
        ResultSet resultaat = stat.executeQuery();
        ResultSetMetaData naam = resultaat.getMetaData();

        Object[] kolommen = new Object[2];
        Object[][] data = null ;
        DefaultTableModel model = new DefaultTableModel(null,data);

        // kolom namen          
        for (int i = 1; i <= naam.getColumnCount(); ++i) {
            model.addColumn(naam.getColumnName(i));
        }
        //records

        data = new Object[1][2];

         while(resultaat.next())
        {
            data[0][0] = resultaat.getInt(1);
            data[0][1] = resultaat.getString(2);
            if(resultaat.isFirst())
            {
                model.addRow(data);
            }
        }

        uitvoerTabel.setModel(model);

    } catch (SQLException ex) {
        Logger.getLogger(Domein.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:02:32.520

你有一些看起来很时髦的代码，你似乎在你的表模型中添加*了两次数据。*为什么不创建一个列标题 Vector 或 String 数组且行数为 0 的 DefaultTableModel，然后在 while 循环中添加 Object 数组行或 Vector 行？

此外，您*必须*为每一行创建一个新的对象数组或向量。你没有在你的while循环中这样做。

就像是：

```
 ResultSet resultaat = stat.executeQuery();
    ResultSetMetaData naam = resultaat.getMetaData();

    Vector<String> columnVector = new Vector<String>();
     for (int i = 1; i <= naam.getColumnCount(); ++i) {
        columnVector.addElement(naam.getColumnName(i));
    }       

    DefaultTableModel model = new DefaultTableModel(columnVector, 0);

    while(resultaat.next())    {
       // you must create a new Object array or Vector for each row
       Object[] rowData = new Object[2];
       rowData[0] = resultaat.getInt(1);
       rowData[1] = resultaat.getString(2);
       if(resultaat.isFirst()) {  // not sure what this is for
          model.addRow(rowData);
       }
    } 
```

Also, please have a look at Rob Camick's Table from Database blog which you can find here: [Table From Database](http://tips4java.wordpress.com/2009/03/12/table-from-database/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:03:17.380

You can try something like that:

```
ResultSetMetaData metaData = rs.getMetaData();

// names of columns
Vector<String> columnNames = new Vector<String>();
int columnCount = metaData.getColumnCount();
for (int column = 1; column <= columnCount; column++) {
    columnNames.add(metaData.getColumnName(column));
}

// data of the table
Vector<Vector<Object>> data = new Vector<Vector<Object>>();
while (rs.next()) {
    Vector<Object> vector = new Vector<Object>();
    for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
        vector.add(rs.getObject(columnIndex));
    }
    data.add(vector);
}

DefaultTableModel model = new DefaultTableModel(data, columnNames); 
```

In another hand, a service layer can helps you to decouple or have a service facade one or more repositories in your Swing application.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:16:50.040

I have my own class and i survive form this head ache if you need to fill any jtable just try this :

```
SQLGenerat sql  = new SQLGenerat ();
jTable1.setModel(new DefaultTableModel(sql.getRows("SQL code"), sql.getColumns("SQl CODE"))); 
```

Here is the Class you can use it

```
import java.sql.*;
import java.util.Vector;

/**
 *
 * @author Azad
 */
public class SQLGenerat {
    Connection con;
    Statement  st ;
    ResultSet  rs ;

    public Vector getColumnNames(String sql)
      {
          Vector  columnNames = new Vector();
          /*
           *dont foeget to  wirte your connection 
           *before executing any sql statement
           */
          try{
              st = con.createStatement();
              rs=  st.executeQuery(sql);
              ResultSetMetaData metaData = rs.getMetaData();
              int columns = metaData.getColumnCount();

              while(rs.next())
              {
                  Vector column = new Vector(columns);
                  for(int i = 0 ; i <= columns-1 ; i++){
                      column.addElement(metaData.getColumnName(i));
                  }
                  columnNames.addElement(column);
              }
          }
          catch(SQLException ex)
          {
             System.out.println(ex.getMessage());
          }
          return columnNames;
      }

      public Vector getRowDatas(String sql)
      {
          Vector rowDatas = new Vector ();
           /*
           *dont foeget to  wirte your connection 
           *before executing any sql statement
           */

          try{
              st = con.createStatement();
              rs=st.executeQuery(sql);
              ResultSetMetaData metaData = rs.getMetaData();
              int columns = metaData.getColumnCount();

              while(rs.next())
              {
                  Vector  rows = new Vector(columns);

                  for(int i = 0 ; i <= columns -1 ;i++)
                  {
                      rows.addElement(rs.getObject(i));
                  }
                  rowDatas.addElement(rows);
              }
              rs.close();
              st.close();
          }
          catch(Exception ex)
          {
              System.out.println(ex.getMessage());
          }

          return rowDatas;
      }
} 
```

# c - C - 段错误 - 找不到错误

> ID：14989787
> 
> 赞同：1
> 
> 时间：2013-02-20T20:58:20.883
> 
> 标签：c, segmentation-fault

我正在编写一个程序（用 C 语言）来实现一个自引用链表。我已经编写了一些代码并对其进行了编译，但现在我遇到了分段错误，我不知道为什么。下面是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#define TRUE 1 
#define FALSE 0 
struct Node {  
  int value ; 
  struct Node *next;  
};

void insert(int x, struct Node **pL);
void printList(struct Node *L);

typedef int BOOLEAN;

int main(int argc, char *argv[]) {
    int i;
    struct Node *L;
    for(i = 3 ; i < 20; i+= 2) 
    insert(i,(&L));
    printList(L);
    return 0;
}

void insert(int x, struct Node **pL) {
    if((*pL) == NULL)
    {
        (*pL) = malloc(sizeof(struct Node));
        (*pL)->value = x;
        (*pL)->next = NULL;
    } else {
        insert(x, &((*pL)->next));
    }
}

void printList(struct Node *L) {
    printf("%d\n", (L)->value);
    if(((L)->next) != NULL) {
        printList((L)->next);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:00:15.077

您不初始化`L`，然后在`insert`via中使用它`*pL`。尝试：

```
struct Node *L = NULL; 
```

# mysql - 锁定整个单个表，但仍允许访问 MySQL 上同一会话中的其他表

> ID：14989789
> 
> 赞同：0
> 
> 时间：2013-02-20T20:58:35.527
> 
> 标签：mysql, database, locking, table-locking, database-concurrency

是否可以为会话锁定 MySQL 上的单个表，并且仍然能够在锁定该表的同一会话上读取和写入其他未锁定的表，而该表仍处于锁定状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:00:16.000

是的，`LOCK TABLES`正是这样做的。

# css - 如何在我的文本之后创建一条线到容器的宽度？

> ID：14989790
> 
> 赞同：6
> 
> 时间：2013-02-20T20:58:40.057
> 
> 标签：css, class, html, underline

是的，我是新手，所以请放轻松。我知道必须有几种方法来实现这一点。基本上，我一直在尝试想出一种一致的方法，在文本后面加上一行的标题，该行将运行到容器元素的整个宽度。

像这样的东西：

```
This is my header _______________________________________________________ |<- end container
This is another header __________________________________________________ |<- end container 
```

我正在尝试创建一个 .line 类，该类将使用底部边框来创建线条，但我未能成功创建一个可变长度的线条来扩展容器的整个宽度。

这是我尝试过的：

CSS：

```
.line
{
    display:inline-block;
    border-bottom:2px #5B3400 solid;
    margin-left:5px;
    width:80%;
} 
```

HTML：

```
 <h2>Our Mission<span class="line"></span></h2> 
```

当然，这只给了我从左边框起 80% 的容器行，包括文本的宽度。无论同一行上有多少文本，如何创建一条在文本之后开始并运行边框的整个宽度的行？

我知道这应该很容易，但我还没有找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T22:38:29.923

**此方法适用于带纹理的背景（背景图像）：**

`<h2>`如果您位于背景图像之上，您可以尝试使用此方法。

**HTML：**

```
<h2 class="line-title"><span>This is my title</span><hr /></h2> 
```

**CSS：**

```
.line-title {
    font-size: 20px;
    margin-bottom: 10px;
    padding-top: 1px; /* Allows for hr margin to start at top of h2 */
}

/* clearfix for floats */
.line-title:after {
    content: "";
    display: table;
    clear: both;
}

.line-title span {
    padding-right: 10px;
    float: left;
}

.line-title hr {
    border:1px solid #DDD;
    border-width: 1px 0 0 0;
    margin-top: 11px;
} 
```

请参阅此处的工作示例：http: [//jsfiddle.net/yYBDD/1/](http://jsfiddle.net/yYBDD/1/)

**这个怎么运作：**

1.  `<h2>`标签充当浮动元素的容器。

2.  向左`<span>`浮动，导致向左`<hr />`折叠并填充右侧空间。

3.  `<hr />`充当线，并填充右侧的剩余空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T21:04:50.067

**此方法适用于纯色背景色：**

**HTML：**

```
<h2 class="line-title"><span>This is my title</span></h2> 
```

**CSS：**

```
.line-title {
    border-bottom: 1px solid #DDD;
    font-size: 20px;
    height: 12px;
    margin-bottom: 10px;
}

.line-title span {
    background: #FFF;
    padding-right: 10px;
} 
```

你可以在这里看到一个工作示例：http: [//jsfiddle.net/yYBDD/](http://jsfiddle.net/yYBDD/)

**这个怎么运作。**

1.  标签有一个类，将高度设置为`<h2>`它包含的文本高度的一半。

2.  the`<h2>`有一个底部边框，它延伸到它的父容器的宽度（因为它是一个块元素）。

3.  内部`<span>`有`<h2>`一个白色背景，它将覆盖文本和边框重叠的区域。

4.  最后，`<h2>`> 有一个底部边距，可以补偿`<h2>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T21:41:50.460

你可以使用 flexbox 来做到这一点。

[http://jsfiddle.net/eHHep/](http://jsfiddle.net/eHHep/)（不包括前缀）

```
<h1 class="lineme">This is my header</h1>

<h2 class="lineme">This is another header</h2>

.lineme {
    display: flex;
}

.lineme:after {
    display: block;
    content: " ";
    border-bottom: 1px solid;
    flex: 1 1 auto;
} 
```

与其他方法相比的优势：

*   不需要额外的标记
*   背景颜色不是必需的

下侧：

*   对 flexbox 的支持很低，因为 IE10 是第一个支持它的 IE（参见[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)）
*   如果您的文字环绕，您的线条就会消失

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T21:03:12.597

HTML：

```
<h2><span>Our Mission</span></h2> 
```

CSS：

```
h2{
    border-bottom: 1px solid #000;
    height: 20px;
    overflow: visible;
    display: block;
    width: 100%;
}

h2 span{
    display: inline-block;
    background: #fff;
    height: 21px;
} 
```

这样它会溢出底部边框，因为它有更大的高度。

演示：http: [//jsfiddle.net/afuzk/](http://jsfiddle.net/afuzk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T21:29:48.330

这是我尝试过并且有效的方法：

**HTML**

```
<h2>Our Mission</h2> 
```

**CSS**

```
h2:after
{
    content:       "\00a0";
    border-bottom: solid 2px black;
    position:      fixed;
    top:           0;
    width:         100%;
    margin-left:   3px;
} 
```

要测试的 JS Bin：http: [//jsbin.com/ayuvuc/4](http://jsbin.com/ayuvuc/4)

# javascript - Javascript：用 js 替换 html 类 no-js

> ID：14989796
> 
> 赞同：-5
> 
> 时间：2013-02-20T20:59:03.930
> 
> 标签：javascript, regex

请解释以下javascript代码行

```
(function (d, c) {
    d[c] = d[c].replace(/\bno-js\b/, "js");
})(document.documentElement, "className"); 
```

此行替换文档元素类名称`class="no-js"`，例如`class="js"`

它工作正常，但我不完全理解。 `d[c] = d[c].replace`？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:05:33.840

我不确定为什么这被否决了——看起来是一个关于可变性的好问题。

原因是字符串是不可变的——您可以用新值替换它们，但不能更改它们。

最终结果是

```
d[c].replace() 
```

实际上并没有改变值，而是返回一个带有更新值的新字符串。

只有对返回值进行赋值，才能使源发生变化。

```
d[c] = d[c].replace(...) 
```

“进行替换，然后将替换后的值用作原始值”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:03:15.350

Firs 创建函数

```
function(d, c){
    d[c] = d[c].replace(/\bno-js\b/,"js");
} 
```

它将函数包装`()`成一个表达式，而不是一个语句，所以这种方式是可调用的，然后它传递参数

```
(documentElement, "className") 
```

换句话说，执行以下代码：

```
document.documentElement["className"] = document.documentElement["className"].replace(/\bno-js\b/,"js"); 
```

然后检索文档的`documentElement`属性并根据正则表达式替换其“类名”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:04:34.857

```
(function(d, c) {
    d[c] = d[c].replace(/\bno-js\b/,"js"); }
)(document.documentElement, "className"); 
```

使用两个参数调用该函数。为清楚起见，我们将函数中的变量替换为用于调用函数的参数。

```
// Find the element in the DOM identified by "documentElement"
// and access its "className" property, which controls the attribute in
// the markup called "class"
document.documentElement["className"] = 
// Then, take that same property (which is a string), and run
// .replace() on it, with a regex that says "find no-js separated by word
// boundaries", and replace that with js
// Finally, assign the result of that replacement to the original property.
document.documentElement["className"].replace(/\bno-js\b/,"js"); 
```

# entity-framework - 无法在单元测试中创建我的 DbContext

> ID：14989797
> 
> 赞同：0
> 
> 时间：2013-02-20T20:59:07.773
> 
> 标签：entity-framework, code-first

当我在单元测试中创建我的 TLPContext 时，我在此页面底部收到一个异常。

我在单元测试中这样做了：

```
DbContext context = new TLPContext();
context.Database.CreateIfNotExists(); 
```

这不是正确的方法吗？

我的连接字符串/提供程序有什么问题？

我遵循了这个：[http ://www.thereforesystems.com/turn-on-msdtc-windows-7/](http://www.thereforesystems.com/turn-on-msdtc-windows-7/)

但重新启动后它没有帮助。

这就是我的单元测试项目中的 app.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <connectionStrings>
    <add name="TLPContext" providerName="System.Data.SqlClient" connectionString="Data Source=LISA\SQLEXPRESS;Initial Catalog=TLPTEST;Integrated Security=True;Pooling=False;"/>
  </connectionStrings>
</configuration> 
```

那是我的 DbContext，它应该足以创建数据库而不是表......

```
public class TLPContext : DbContext
{

} 
```

那是我得到的例外：

当我在单元测试 SetUp 中创建 TLPContext 实例时：

```
Test 'TLP.DataAccess.UnitTests.GenericRepositoryTests.Test' failed: System.Data.ProviderIncompatibleException : An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.
---- System.Data.ProviderIncompatibleException : Der Anbieter hat keine ProviderManifestToken-Zeichenfolge zurückgegeben.
-------- System.Data.SqlClient.SqlException : MSDTC on server 'LISA\SQLEXPRESS' is unavailable.
    at System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection)
    at System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:37:36.913

如果您不使用连接字符串，它将自动查找数据库服务器（它搜索 SQLEXPRESS）并根据您的项目名称创建数据库。

您缺少的是提供连接字符串或其名称，这可以通过使用 DbContext 的构造函数之一来实现：

```
TLPContext(string connectionStringOrName) : DbContext(connectionStringOrName) {} 
```

我希望这有帮助！

# ios - 在 Objective C 中访问数组元素时遇到问题

> ID：14989805
> 
> 赞同：-6
> 
> 时间：2013-02-20T20:59:40.113
> 
> 标签：ios, objective-c

所以编译器告诉我 using`[arrayName objectAtIndex:i]`是一个无效的表达式，但文档中的所有内容都告诉我我做得对。我很困惑。为什么不让我以这种方式访问​​数组？

```
-(IBAction)textWasEdited:(id)sender
{
   int i = 0;
   do
   {
       //do stuff
       i++
   } while([tipPercentages objectAtIndex:i] != Nil);
} 
```

我看不出这段代码有什么问题！有点把我的头发拉在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:03:07.573

返回 nil是不可能的`objectAtIndex:`，因此您的代码毫无意义。没有 NSArray 可以包含 nil。如果`tipPercentages`不是 NSArray（例如，如果它是 C 数组），则它无法响应`objectAtIndex:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:32:35.037

好的，我不完全清楚你在这里做什么，但我认为你的问题是你的代码一直试图访问数组末尾之后的数组元素（因为`objectAtIndex:`不能返回 nil）。你想要更像这样的东西：

```
- (IBAction)textWasEdited:(id)sender {
   __block int i = 0;
   [tipPercentages enumerateObjectsWithBlock:^(id object, NSUInteger idx, BOOL *stop) {
       //do stuff
       i++
   }];
} 
```

或者，如果您真的想维护原始循环：

```
- (IBAction)textWasEdited:(id)sender {
   int i = 0;
   for (; i < [tipPercentages count]; i++) {
       id object = [tipPercentages objectAtIndex:i];
       //do stuff
   }];
} 
```

我很确定你在调试器中所做的任何被它拒绝的事情都是一个附带问题——如果你的代码正在编译，编译器*不会*告诉你你的代码是无效的。

# macos - Google 地球 (Mac) 中的图标调色板

> ID：14989807
> 
> 赞同：1
> 
> 时间：2013-02-20T20:59:45.380
> 
> 标签：macos, icons, kml, google-earth

（来自 GE 支持小组的交叉张贴 - 现在已不复存在？）

在使用 gs:x 扩展来使用图标组中的图标调色板时遇到问题。

我已将适当的 xmlns:gx="http://www.google.com/kml/ext/2.2" 加载到 kml 标头中，但在我的 Macintosh 上的 GE Google Earth 6.0.3.2197 下收到消息“未知类型 gs:x

我怀疑这还没有在 Mac 版本上实现 - 有这方面经验的人吗？

最终代码如下，它在第一 gx:s 行失败。如果我使用现在已弃用的 x（而不是 gx:x），它也会以同样的方式失败

此外，如图所示，它遵循 kml 文档，但我认为所有终止术语都应采用 /gx:x 的形式，而不是 KML 参考中所示的 gx:x/。做出这种改变并没有帮助，因为无论如何它永远不会达到那个程度。

标题是从 GE 地标复制并粘贴到编辑器中的。

任何帮助表示赞赏。

鲍勃·J。

```
<?xml version="1.0" encoding="UTF-8"?> 
<kml xmlns="http://www.opengis.net/kml/2.2" 
 xmlns:gx="http://www.google.com/kml/ext/2.2" 
 xmlns:kml="http://www.opengis.net/kml/2.2"
 xmlns:atom="http://www.w3.org/2005/Atom"> 
<Document> 
        <StyleMap id="s_Ic_SP"> 
                <Pair><key>normal</key><styleUrl>#sn_Ic_SP</styleUrl></Pair> 
                <Pair><key>highlight</key><styleUrl>#sh_Ic_SP</styleUrl></Pair> 
        </StyleMap> 
        <Style id="sn_Ic_SP"> 
                <IconStyle> 
                        <scale>1.8</scale> 
                        <Icon> 
                                <href>Icons/Traps.png</href> 
                                <gx:x>0<gx:x/><gx:y>128<gx:y/> <gx:w>64<gx:w/><gx:h>64<gx:h/> 
                        </Icon> 
                        <hotSpot x="32" y="1" xunits="pixels" yunits="pixels"/> 
                </IconStyle> 
                <BalloonStyle> 
                        <displayMode>default</displayMode><bgColor>ff00d0ff</bgColor> 
                        <text><![CDATA[<font face="Comic Sans MS" /><table 
bgcolor="#ff8000" cellspacing="3" width="160"> 
                        <tr bgcolor="#ffff80"><td><b>Sponsor $[name]</b><br/><br/>$ 
[description]</td></tr></table>]]></text> 
                </BalloonStyle> 
                <LabelStyle> 
                        <scale>0.9</scale><color>ff00ffff</color> 
                </LabelStyle> 
                <LineStyle><color>ff00ffff</color><width>2.0</width></LineStyle> 
                <ListStyle> 
                        <ItemIcon> 
                                <href>Icons/Traps.png</href> 
                                <gx:x>0<gx:x/><gx:y>128<gx:y/> <gx:w>64<gx:w/><gx:h>64<gx:h/> 
                        </ItemIcon> 
                </ListStyle> 
        </Style> 
etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:25:37.010

哎呀

似乎我的问题是语法问题

gx:x 设置确实可以正常工作。但是，它们在 ItemIcon 组内无法操作，如我的示例所示。事实上，他们在该组中被忽略了。

谢谢你容忍我的愚蠢

鲍勃·J。

# python - 在列表中查找元素

> ID：14989810
> 
> 赞同：1
> 
> 时间：2013-02-20T20:59:55.607
> 
> 标签：python, flask

我是 python 的初学者，我有一个这样的列表

```
 [{'status': 1L, 'permalink': 'said', 'title': 'a', 'author': 'said', 'content': 'a', 'created_on': datetime.datetime(2013, 2, 10, 17, 46, 9), 'type': 1L, 'id': 1L}, 
{'status': 1L, 'permalink': 'said', 'title': 'hello', 'author': 'said', 'content': 'this is my first post', 'created_on': datetime.datetime(2013, 2, 10, 17, 48, 5), 'type': 2L, 'id': 2L}] 
```

我想获得 ID 为 1 的帖子。我该怎么做。我应该使用 for 循环还是有其他简单的方法？我使用 Flask 框架。

例如，我通过调用这样的 url 获得了一个 id，`/editpost/1`然后我想获得 id 为 1 的帖子。我该怎么做？还有为什么它是整数 1L 而不是 1？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:06:24.163

`1L`是python`long`类型；它和 normal 一样`int`，python 对待它是一样的，区别并不重要。

要获得与您的密钥匹配的特定项目，我将使用`next()`带有生成器表达式的函数：

```
entryid = 1

try:
    match = next(s for s in inputlist if s['id'] == entryid)
except StopIteration:
    match = None  # not found 
```

这将找到第*一个*`id`具有与您的 entryid 匹配的键的字典，或者如果没有这样的项目则设置`match`为。`None`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:11:16.723

虽然 Martijn Pieters 回答了如何在列表中找到数据的问题，但问题的实际答案是使用数据库并在数据库中查询 id。你永远不应该混合代码和数据——这正是数据库的用途。

但是，如果您绝对确定您不想使用数据库来存储您的帖子，那么创建一个按 id 索引帖子并简单地查询字典的字典将是一个好主意：

```
#construct the dictionary
posts_by_id = {post["id"]: post for post in list_of_posts}

#now getting a post is as simple as this:
mypost = posts_by_id[theid] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:35:55.823

您可以尝试两种可能比您的方法更容易的替代方法。

第一个称为“列表推导”，它们几乎总是迭代对象的最快方法（在我看来，是最好的）。我不确定，但我认为它们对列表、元组和字典也有效。所以，你可以这样写：

```
// "posts" is the list of dictionaries you wrote in the question

my_post = [x for x in posts if x['id'] == 1L] 
```

`filter`第二种选择是使用函数式编程中的一种方法并调用Python 中的内置函数，该函数有 2 个参数。第一个是表达过滤条件的函数（其实这个东西叫做*lambda 表达式*），第二个参数就是可迭代对象：

```
filter (lambda x : x['id'] == 1L, posts) 
```

这样，'filter' 函数在每次迭代中从 'posts' 中获取一个元素，并将其作为 lambda 的参数传入。然后，它检查当前帖子的 id 值是否为 1L，如果为真，则该帖子被过滤并在循环结束时返回。

我不知道第二个选项是否有点高级。在那种情况下很抱歉。

希望对你有帮助！:)

# java - 为什么这种计算二叉树之和的方法不起作用？

> ID：14989818
> 
> 赞同：0
> 
> 时间：2013-02-20T21:00:26.233
> 
> 标签：java, sum, binary-tree

我知道这段代码应该可以工作，但它没有。有谁知道我错过了什么？我正在尝试获取二叉树中所有节点的总和。

```
public int getSum() {
    if (this == null) {
        return 0;
    } else {
        return this.value + right.getSum() + left.getSum();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:05:31.740

你的支票`this == null`完全没用。但是，您***确实***需要检查左右节点是否存在。试试这个：

```
return this.value + (right != null ? right.getSum() : 0)
        + (left != null ? left.getSum() : 0); 
```

# sql-server - 如何将漂移合并回我的 Sql Server 数据库项目？

> ID：14989820
> 
> 赞同：1
> 
> 时间：2013-02-20T21:00:27.950
> 
> 标签：sql-server, version-control, visual-studio-2012, sql-server-data-tools

使用通常的源代码控制解决方案，程序员将从存储库更新他的代码，然后将他的更改签入到存储库。

我知道如何将漂移重新合并到我的项目中的唯一方法是使用模式比较功能，但是这个功能只是告诉我我的项目和目标数据库之间的区别是什么，而没有给出任何关于发生什么变化的迹象所以如果我在使用 Schema Compare 更新我的项目时不小心排除了这些项目，我可能会恢复我最终所做的更改。

有没有更好的方法可以将漂移重新融入我的项目，而不必担心非常小心不要吹走我所做的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T18:06:52.627

您可以将您的数据库项目 (SSDT) 作为目标，将“漂移数据库”作为源进行比较，“更新”按钮将同样轻松地更新您的模型。

换句话说，您可以使用模式比较将更改导入您的 SSDT 项目，然后转身并将您的模式（新合并的更改）发布回数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:48:30.220

如果您使用 SSMS，您可以尝试将 SQL 源代码控制与您的数据库项目结合使用。我们已经宣布了一个 beta 版本，这个功能在这里工作：

[http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/0c763f98-c55a-44a7-9100-80a6d9223d04](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/0c763f98-c55a-44a7-9100-80a6d9223d04)

这将区分对数据库所做的尚未同步到项目的更改，以及项目中需要应用到数据库的更改。如果这不能满足您的需求，SQL 源代码控制项目团队很乐意听取您的意见！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:49:31.687

sqlpackage.exe 有一个选项来检测数据库漂移（即自部署数据库以来所做的更改）：

[漂移报告参数。SqlPackage.exe 报告操作创建一个 XML 报告，其中包含自上次注册以来对已注册数据库所做的更改。](http://msdn.microsoft.com/en-us/library/hh550080%28v=vs.103%29.aspx)

它要求您在部署时注册数据库，但我认为这并不是什么大问题。

希望有帮助。

捷通

# javascript - KineticJS android 舞台大小

> ID：14989824
> 
> 赞同：2
> 
> 时间：2013-02-20T21:00:45.340
> 
> 标签：javascript, android, height, width, kineticjs

定义 KineticJS 阶段我是这样的：

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 320,
    height: 480
  }); 
```

所以舞台的宽度和高度是固定的。如果分辨率不同，如何将其拉伸以适合手机屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:10:22.067

好吧，这确实是一个 javascript 问题。您想让舞台的大小与窗口大小相同。这对我的android项目有用：

```
 var stage = new Kinetic.Stage({
      container: 'container',
      width: window.innerWidth,
      height: window.innerHeight
 }); 
```

**编辑：**
此外，我建议您也添加 jQuery，以便检查方向更改，然后您可以执行以下操作：

```
window.onresize = function(event) {  //this function will resize your stage to the size of your window
    stage.setWidth(window.innerWidth);
    stage.setHeight(window.innerHeight);
    stage.draw(); //redraw the stage, not sure if really needed, but good to have.
} 
```

或者你可以这样做：

```
window.onresize = function(event) {
    stage.setScale(x,y); //set x, y scale values when the orientation changes
    stage.draw(); //redraw the stage, not sure if really needed, but good to have.
} 
```

# eclipse - eclipse 在“JSP 索引管理器：处理资源事件”期间发生内部错误。java.lang.NullPointerException

> ID：14989825
> 
> 赞同：1
> 
> 时间：2013-02-20T21:00:53.227
> 
> 标签：eclipse

每次打开 Eclipse 时，我似乎都会收到此错误。我正在使用带有典型 Java 开发人员设置的 Juno 版本。有任何想法吗？谢谢！

在“JSP 索引管理器：处理资源事件”期间发生内部错误。java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:13:39.577

不幸的是，这似乎是一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402541)，仍在 Juno SR2 中发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T13:02:09.447

我刚在 Kepler 上得到这个（昨天安装的，它不是 SR1）。既然我的消息说：

*在“JSP 索引管理器：处理资源事件”期间发生内部错误。Java 堆空间*

我做了显而易见的事情 - 打开 eclipse.ini 文件并将默认**vmargs**值增加到以下值：

```
-vmargs
-Xms512m
-Xmx1536m 
```

这些值对我有用，从那时起该消息就没有出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T20:57:18.017

-Xms512m -Xmx512m 或 -Xms512m -Xmx1024m 将取决于您的配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T18:41:12.830

-Xms512m -Xmx512m 为我工作，我正在使用 Eclipse 开普勒。请根据您的要求进行调整

# jquery - 如何在 jquery 验证错误上调用自定义函数

> ID：14989826
> 
> 赞同：-2
> 
> 时间：2013-02-20T21:00:55.063
> 
> 标签：jquery, jquery-validate, unobtrusive-validation

如果表单元素的验证失败，我如何调用函数。如果验证期间发生错误，我的目标是在页面上显示其他项目。我正在使用不显眼的表单验证。最好在表单元素标签上定义一个额外的数据元素，如 data-error-callback 或类似的东西。

有没有办法挂钩验证过程以使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:04:07.917

也许这个链接可以帮助你 - 这是一个名为 JQuery Validation Hook 的项目，它

> 添加挂钩到 jQuery.validate 的表单/元素验证方法（通过 trigger()）

[https://gist.github.com/remi/957732](https://gist.github.com/remi/957732)

# javascript - 为什么这个javascript数组打印出0？

> ID：14989827
> 
> 赞同：0
> 
> 时间：2013-02-20T21:01:07.407
> 
> 标签：javascript, arrays, list, canvas

我有一个名为 front images 的数组，写成`var frontImages = [];`. 据我了解，javascript 数组不需要指定长度。当我运行下面的代码时，它会在输出到控制台时打印 0 作为数组的长度。但是，当我将数组长度指定为 时`var frontImages = new Array(3);`，它会打印出 3，即数组的正确长度。为什么未指定长度的数组不返回 3？

```
function getMainPosters() {

    var games = new Image(); //create 3 images
    var apps = new Image();
    var aboutme = new Image();

    games.onload = function() { //add image to frontImages array on load

        frontImages.push(games);

    };

    apps.onload = function() {

        frontImages.push(apps);

    };

    aboutme.onload = function() {

        frontImages.push(aboutme);

    };

       games.src = "images/assets/posters/games_poster.jpg"; //specify source of image
       apps.src = "images/assets/posters/apps_poster.jpg";
       aboutme.src = "images/assets/posters/aboutme_poster.jpg";

       console.log(frontImages.length); //print the length of frontImages to console

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:03:45.467

图像是异步加载的，所以当 console.log 运行时，frontImages 的长度仍然为 0。

您需要等待图像加载，然后才能针对它们查询任何信息（通过使用 jQuery Deferred 或其他一些自定义构造）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T21:03:51.210

您在执行 onload 函数之前将数组打印到控制台，当时数组为空，因为您正在等待的图像尚未加载？

# javascript - Titanium - 在 iOS 上使用带数字键盘的 secure_text_input 的 createAlertDialog？

> ID：14989831
> 
> 赞同：1
> 
> 时间：2013-02-20T21:01:30.397
> 
> 标签：javascript, iphone, ios, titanium, appcelerator

如何在警报对话框中启用数字键盘？

此代码不会打开加载数字键盘

```
var dialog = Ti.UI.createAlertDialog({
    style : Titanium.UI.iPhone.AlertDialogStyle.SECURE_TEXT_INPUT,
    message : 'Please Login',
    maxLength : 4,
    keyboardType : Ti.UI.KEYBOARD_NUMBER_PAD,
    buttonNames : ['Logout', 'Login'],
    title : 'Login'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:22:48.940

`keyboardType`Titanium 中的警报对话框不支持该属性。这仅适用于 TextField。

所以你不能用 Titanium 做到这一点，另一种方法是使用嵌入 TextField 的 Ti.UI.View 制作自定义警报。

[文档快速参考。](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.AlertDialog)

# android - 我的活动不显示地图，而是黑色背景

> ID：14989836
> 
> 赞同：0
> 
> 时间：2013-02-20T21:02:00.397
> 
> 标签：android, maps

我正在尝试编写我的第一个 android 应用程序。我有这个问题

当我尝试展示此活动时

```
 setContentView(R.layout.activity_poi_map); 
```

这是活动的文件 xml

```
<?xml version="1.0" encoding="utf-8"?>

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
class="com.google.android.gms.maps.SupportMapFragment"/> 
```

该应用程序显示黑色背景，空白和黑色，日志文件是这样的：

```
02-20 21:33:45.113: D/libEGL(19145): loaded /system/lib/egl/libEGL_mali.so
02-20 21:33:45.113: D/libEGL(19145): loaded /system/lib/egl/libGLESv1_CM_mali.so
02-20 21:33:45.123: D/libEGL(19145): loaded /system/lib/egl/libGLESv2_mali.so
02-20 21:33:45.153: D/OpenGLRenderer(19145): Enabling debug mode 0
02-20 21:33:45.223: E/SensorManager(19145): thread start
02-20 21:33:45.233: D/SensorManager(19145): registerListener :: handle = 0  name= MPU-     6050 Accelerometer delay= 200000 Listener=    android.view.OrientationEventListener$SensorEventListenerImpl@419da6c0
02-20 21:33:59.237: W/dalvikvm(19145): VFY: unable to resolve static field 849  (MapAttrs) in Lcom/google/android/gms/R$styleable;
02-20 21:33:59.237: D/dalvikvm(19145): VFY: replacing opcode 0x62 at 0x000e 
```

这个活动只需要显示地图，为什么不工作？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:03:35.020

> `unable to resolve static field`

这种错误可能意味着您正在尝试一起运行不匹配的代码版本。清理您的构建并重建所有内容，然后重试。

# ios - iOS 6 Autolayout - 带有嵌入式 ImageView 的 ScrollView 无法正确缩放

> ID：14989837
> 
> 赞同：2
> 
> 时间：2013-02-20T21:02:13.473
> 
> 标签：ios, uiscrollview, uiimageview, autolayout, zooming

我正在尝试设置一个显示图像并允许用户根据需要放大/缩小和平移图像的简单视图。我启用了自动布局，并且视图由带有嵌入式 UIImageView 的 UIScrollView 组成。两个视图的大小都适合整个屏幕。

我使用了 Apple 的 ScrollViewSuite（“1_TapToZoom”示例）中的逻辑和代码，一切似乎都是正确的。但是，当捏视图时，ScrollView/ImageView 会全部变形并且无法正确响应。很难解释这种行为，但让我们称之为“时髦”。大小和方面的变化不一致。

我的猜测是这与自动布局约束有关。有没有人对此有一些建议/修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:05:05.510

发生的问题是缩放过程中图像视图的位置变化。在缩放过程中，imageview 的原点位置将变为负值。我相信这就是为什么会发生生涩的运动。同样，缩放完成后，imageView 仍然在错误的位置，这意味着滚动看起来会偏移。

如果你`-(void) scrollViewDidZoom:(UIScrollView *)scrollView`在这段时间内实现并记录 UIImageView 的框架，你可以看到它的原点发生了变化。

我最终通过实施这样的策略来解决问题：[https ://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch20p573scrollViewAutoLayout/ch20p573scrollViewAutoLayout/ViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/ch20p573scrollViewAutoLayout/ch20p573scrollViewAutoLayout/ViewController.m)

除了在缩放时更改 contentView 的框架

```
-(void) scrollViewDidZoom:(UIScrollView *)scrollView {
    CGRect cFrame = self.contentView.frame;
    cFrame.origin = CGPointZero;
    self.contentView.frame = cFrame;
} 
```

# c# - 无法将控件呈现给占位符

> ID：14989841
> 
> 赞同：0
> 
> 时间：2013-02-20T21:02:31.757
> 
> 标签：c#, .net, sitecore, sitecore6

以下代码不会将控件添加到 aspx 占位符：

```
var control = new ASCXControl { ID="searchFilters", Filters = filters };

var placeholder = Utility.FindControlRecursive(Page, "rightColumnSearchFilters") as PlaceHolder;
if(placeholder != null){
  placeholder.Controls.Add(control);
  placeholder.Visible = true;
} 
```

调试时，找到占位符，并且在进入块后控件显示为已添加到占位符控件集合中，但我没有看到页面上的占位符呈现任何内容。

我目前需要将变量传递给控件，​​以便找到我需要显示的过滤器。虽然我不喜欢在控件之间传递变量，但我看不到任何其他方式。

我缺少什么会使控件不呈现？有一个更好的方法吗？

编辑：

我试图让 ascx 中的 HTML 进行渲染。我能够在控件的 Page_Load 中获取 Filters 参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:41:55.647

这可能是也可能不是整个问题，但通常试图实例化`UserControl`你正在做的方式会导致问题。你应该使用类的`LoadControl(path)`方法来做到这一点`Page`：

```
ASCXControl ctl = (ASCXControl) LoadControl("path"); 
```

我不是 100% 肯定，但我认为如果你只是像普通的类/控件一样实例化它，你最终不会运行`Load`你通常会运行的所有事件处理程序（例如）。

# c# - 使用亚马逊产品广告 API 按规格查找产品

> ID：14989843
> 
> 赞同：0
> 
> 时间：2013-02-20T21:02:37.183
> 
> 标签：c#, amazon, amazon-product-api

我正在尝试使用亚马逊产品广告 api 查找智能手机。 [http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl](http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl)

在亚马逊网站上，您可以设置各种过滤器，例如“存储”“功能关键字”。 [http://www.amazon.com/s/ref=sr_nr_n_1?rh=n%3A2335752011%2Cn%3A!2335753011%2Cn%3A2407749011&bbn=2335753011&ie=UTF8&qid=1361393129&rnid=2335753011](http://www.amazon.com/s/ref=sr_nr_n_1?rh=n%3A2335752011%2Cn%3A!2335753011%2Cn%3A2407749011&bbn=2335753011&ie=UTF8&qid=1361393129&rnid=2335753011)

例如，我想从三星找到价格低于 250 美元且存储空间至少为 32 GB 且具有 Android 操作系统的智能手机。

```
 ItemSearchRequest request = new ItemSearchRequest();            
        request.SearchIndex = "Electronics";
        //this browsenode is for amazon.de (cell phones)
        request.BrowseNode = "1384526031";
        request.MaximumPrice = "250";
        // ? request.Storage = 32 
        // ? request.OperatingSystem = "Android"            
        request.ResponseGroup = new string[] { "Large" };

        ItemSearch itemSearch = new ItemSearch();
        itemSearch.AssociateTag = "xxx";
        itemSearch.Request = new ItemSearchRequest[] { request };
        itemSearch.AWSAccessKeyId = ConfigurationManager.AppSettings["accessKeyId"];

        ItemSearchResponse response = amazonClient.ItemSearch(itemSearch);

        foreach (var item in response.Items[0].Item)
        {
            Console.WriteLine(item.ItemAttributes.Title);
        } 
```

我的问题是 ItemSearchRequst 类没有“存储”或“功能”或“操作系统”等属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T18:10:47.317

我已经找到这个信息一个多星期了，但确实没有关于这个功能的文档。我相信亚马逊希望保留这一点，以及自己的产品技术细节和产品评论。但是，您可以过滤其中一些关键字（例如操作系统），但不是全部`itemsearch`，`responsegroup('Large')`

# vb.net - vb2008 使用文本框搜索列表框

> ID：14989845
> 
> 赞同：0
> 
> 时间：2013-02-20T21:02:46.127
> 
> 标签：vb.net, textbox, listbox

嗨，我有一个表单，可以使用文本框查找或过滤列表框中的项目。我有一个用于搜索的文本框和一个填充了数据库项目的列表框。现在，假设列表框项目包括苹果、香蕉、浆果、腰果、柠檬、芒果、花生。如果我在文本框中输入“b”，列表框只显示香蕉和浆果。如果我输入“ba”，那么列表框只显示香蕉，但如果我输入“be”，那么它会显示浆果等等。我已经得到了这个工作（在 txtSearch 事件中标记为注释的代码）。我的问题是，当用户按下退格键时，如何将列表框中的项目带回来？因为，假设我现在列表框中有香蕉和浆果，当我删除我在文本框中输入的文本时，它应该再次列出所有项目，这样如果我想搜索另一个项目，它将再次被过滤。

**代码更新**

```
Public Class Glossary

Private Sub Glossary_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Call List()
    Refreshlist()
End Sub
Private Sub List()
    Dim myCmd As New MySqlCommand
    Dim myReader As MySqlDataReader
    Dim myAdptr As New MySqlDataAdapter
    Dim myDataTable As New DataTable
    Call Connect()
    With Me
        STRSQL = "Select word from glossary"
        Try
            myCmd.Connection = myConn
            myCmd.CommandText = STRSQL
            myReader = myCmd.ExecuteReader
            If (myReader.Read()) Then
                myReader.Close()
                myAdptr.SelectCommand = myCmd
                myAdptr.Fill(myDataTable)
                lstword.DisplayMember = "word"
                lstword.ValueMember = "word"
                If myDataTable.Rows.Count > 0 Then
                    For i As Integer = 0 To myDataTable.Rows.Count - 1
                        lstword.Items.Add(myDataTable.Rows(i)("word"))
                    Next
                End If
            End If
            'lstword.Items.Clear()
            'lstword.Items.AddRange(word.Where(Function(word) word.ToString().Contains(txtSearch.Text)).ToArray())
        Catch ex As Exception
            MessageBox.Show(ex.Message)
        End Try
        myReader = Nothing
        myCmd = Nothing
        myConn.Close()
        Call Disconnect()
    End With
End Sub

Dim word As List(Of Object)
Private Sub Refreshlist()
    lstword.Items.Clear()
    lstword.Items.AddRange(word.Where(Function(word) word.ToString().Contains(txtSearch.Text)).ToArray())
End Sub
Private Sub txtSearch_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSearch.TextChanged
    lstword.Items.Clear()
    lstword.Items.AddRange(word.Where(Function(word) word.ToString().Contains(txtSearch.Text)).ToArray())
    Refreshlist()
    'Call List()
    'lstword.BeginUpdate()

    'Try
    '    ' keep track of the "non-searched items" '
    '    Dim word As New List(Of Object)

    '    lstword.SelectedIndices.Clear()
    '    If txtSearch.Text.Length > 0 Then
    '        For index As Integer = 0 To lstword.Items.Count - 1
    '            Dim item As String = lstword.Items(index).ToString()

    '            If item.IndexOf(txtSearch.Text, StringComparison.CurrentCultureIgnoreCase) >= 0 Then
    '                lstword.SelectedIndices.Add(index)
    '            Else
    '                ' this item was not searched for; we will remove it '
    '                word.Add(index)
    '            End If
    '        Next

    '        ' go backwards to avoid problems with indices being shifted '
    '        For i As Integer = word.Count - 1 To 0 Step -1
    '            Dim indexToRemove As Integer = word(i)
    '            lstword.Items.RemoveAt(indexToRemove)
    '        Next
    '    End If
    'Finally
    '    lstword.EndUpdate()
    'End Try

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:21:17.457

第一步是将项目存储在屏幕外内存中。例如：

```
Dim words As List(Of Object) 
```

然后，当您刷新列表框时，仅使用该内存列表中与当前条件匹配的项目填充它：

```
lstword.Items.Clear()
lstword.Items.AddRange(
    words.FindAll(
        Function(word) Return word.ToString().Contains(txtSearch.Text)
        ).ToArray()
    ) 
```

或者，使用 LINQ：

```
lstword.Items.Clear()
lstword.Items.AddRange(
    words.Where(
        Function(word) word.ToString().Contains(txtSearch.Text)
        ).ToArray()
    ) 
```

**更新**

由于您似乎无法使其正常工作，并且很难在没有实际看到它的情况下说出您的代码有什么问题，这里有一个完整的工作示例：

```
Public Class Form1
    Dim words As New List(Of Object)(New String() {"apple", "banana", "berry", "cashew", "lemon", "mango", "peanut"})

    Private Sub RefreshList()
        lstword.Items.Clear()
        lstword.Items.AddRange(
            words.Where(
                Function(word) word.ToString().Contains(txtSearch.Text)
                ).ToArray()
            )
    End Sub

    Private Sub txtSearch_TextChanged(sender As Object, e As EventArgs) Handles txtSearch.TextChanged
        RefreshList()
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
        RefreshList()
    End Sub
End Class 
```

**更新 2**

我尝试将您的代码与我推荐的建议一起使用，并且效果很好。这是对我有用的代码。试试看，如果它不适合你，请告诉我：

```
Public Class Glossary
    Private Sub Glossary_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        List()
        Refreshlist()
    End Sub

    Private Sub List()
        word.AddRange(New String() {"apple", "banana", "berry", "cashew", "lemon", "mango", "peanut"})
    End Sub

    Private word As New List(Of Object)()

    Private Sub Refreshlist()
        lstword.Items.Clear()
        lstword.Items.AddRange(word.Where(Function(word) word.ToString().Contains(txtSearch.Text)).ToArray())
    End Sub

    Private Sub txtSearch_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSearch.TextChanged
        Refreshlist()
    End Sub
End Class 
```

如果可行，那么您需要做的就是更改`List`从数据库加载的方法，而不是硬编码列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:18:04.620

从数据库中获取您的初始列表，将其弹出到 List 类中，例如 List。使用您的搜索文本选择所有匹配的项目并将它们放在列表框中。您只需将它们全部放入空白搜索文本。

您可能还想看看 Foreach 和 List.FindAll。

# c# - xPath 获取具有特定值的元素的兄弟值

> ID：14989846
> 
> 赞同：1
> 
> 时间：2013-02-20T21:02:51.647
> 
> 标签：c#, xml, xpath

鉴于此 XML：

```
<InitResponse>
  <LottoToken>908ec70b308adf10d04db1478ef9b01b</LottoToken>
  <GameInfoList>
    <GameInfo>
      <Draw>
        <gameId>L649</gameId>
        <draw>3035</draw>
      </Draw>
    </GameInfo>
    <GameInfo>
      <Draw>
        <gameId>BC49</gameId>
        <draw>2199</draw>
      </Draw>
    </GameInfo>
  </GameInfoList>
</InitResponse> 
```

我需要根据特定的游戏 ID 获取抽奖号码。例如，如果我指定 gameID L649，我需要得到 3035。

以下适用于几个在线评估器，但不适用于 C#。它说它找不到它。建议？

```
/InitResponse/GameInfoList/GameInfo/Draw/draw[preceding-sibling::gameId='L649'] 
```

我试过的 C# 代码：

```
XmlNode node = xmlDoc.SelectSingleNode("/InitResponse/GameInfoList/GameInfo/Draw/draw[preceding-sibling::gameId='L649']"); 
```

... 其中 xmlDoc 是与 xml 一起加载的 xmlDocument 对象。节点变量以空值结束，这似乎表明没有找到匹配项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:06:57.207

这是xpath（使用Linq）

```
var xdoc = XDocument.Load(path_to_xml);
string xpath = "/InitResponse/GameInfoList/GameInfo/Draw[gameId='L649']/draw";
var draw = xdoc.XPathSelectElement(xpath);
if (draw != null) // check if draw with gameId found in xml
    value = (int)draw; 
```

您也可以使用纯 Linq to Xml（但在这种情况下，xpath 看起来更紧凑）：

```
var draw = xdoc.Descendants("GameInfo")
               .SelectMany(g => g.Elements("Draw"))
               .SingleOrDefault(d => (string)d.Element("gameId") == "L649");
if (draw != null)
    value = (int)draw.Element("draw"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:14:49.163

**使用 XmlDocument**

我没有在您的陈述中看到任何问题，请`XPath`查看以下内容：

（所以我想还有其他问题）

```
XmlDocument myDoc = new XmlDocument();

String str = @"<InitResponse>
                 <LottoToken>908ec70b308adf10d04db1478ef9b01b</LottoToken>
                     <GameInfoList>
                         <GameInfo>
                             <Draw>
                               <gameId>L649</gameId>
                               <draw>3035</draw>
                              /Draw>
                            </GameInfo>
                            <GameInfo>
                              <Draw>
                                <gameId>BC49</gameId>
                                <draw>2199</draw>
                              </Draw>
                            </GameInfo>
                          </GameInfoList>
                        </InitResponse>";

            myDoc.LoadXml(str);

            XmlNode node =
                myDoc.SelectSingleNode("/InitResponse/GameInfoList/GameInfo/Draw/draw[preceding-sibling::gameId='L649']"); 
```

从结果返回的节点是：3035

**注意：**您的第一个注释必须是，`<InitResponse>`否则它将返回 null

# java - 向 JButton 添加关闭操作

> ID：14989847
> 
> 赞同：0
> 
> 时间：2013-02-20T20:01:48.687
> 
> 标签：java, swing, awt, jbutton, actionlistener

我在弄清楚如何让 JButton 提示用户在关闭程序之前将内容保存在 JTextArea 中时遇到了一些麻烦。到目前为止，我有一些用于按钮关闭操作的代码，但即使这样似乎也不起作用......当我点击它时没有任何反应：

```
public void actionPerformed(ActionEvent event) {

  if(event.getSource() == this.Quit)
        this.dispose();
.... 
```

其余的是其他按钮的更多 else/if/try 语句。

我将我的类设置为扩展 JFrame 并实现 ActionListener，所以我的整个程序都在一个类中......可能不是一种非常简洁的编码方式，但我发现在我将一些函数分发到之前将所有内容都粘贴在这里更容易其他类。

基本上，什么都没有发生，我不知道如何添加保存提示以及之后关闭它。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:54:02.633

> 有什么方法可以在关闭前将其与保存提示联系起来吗？

请参阅[关闭应用程序](http://tips4java.wordpress.com/2009/05/01/closing-an-application/)。

注意：您还可以将 ExitAction 添加到您的 JButton。然后，当您单击按钮时，它将开始关闭窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:05:08.477

尝试这个：

```
MyClass.this.setVisible(false); 
```

同样对于硬应用程序退出，请执行以下操作：

```
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:12:14.973

做你想做的更简单的方法是：

```
class MyClass extends JFrame{
    public MyClass(){
        JButton myButton;
        //... etc
        myButton.addActionListener(new ActionListener(){

            public void actionPerformed(ActionEvent event){
                 MyClass.this.setVisible(false);
            }
        });
    }
} 
```

# css - css渐变中的停止颜色％到底是什么意思？

> ID：14989851
> 
> 赞同：0
> 
> 时间：2013-02-20T21:03:11.460
> 
> 标签：css

css3渐变中的停止颜色％到底是什么意思？很好的例子会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:13:31.667

来自[MDN](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_gradients)：

> **色标**
> 
> 色标是沿渐变线的点，在该位置将具有特定颜色。位置可以指定为线长度的百分比，也可以指定为绝对长度。您可以指定任意数量的色标，以达到所需的效果。
> 
> 如果指定位置为百分比，0%代表起点，100%代表终点；但是，如果需要，您可以使用该范围之外的值来获得所需的效果。

按照上面的链接查看三个很好的例子。

# php - Drupal 6 页面和表单自定义模块

> ID：14989852
> 
> 赞同：0
> 
> 时间：2013-02-20T21:03:11.523
> 
> 标签：php, drupal, drupal-6

我想用表格制作一个drupal页面。类似于以下内容，不会呈现：

```
function score_table_menu() {

  $items['table'] = array(
    'title' => t('name'),
    'page arguments' => array('table_page'),
    'page arguments' => array('table_form'),
    'description' => t('score table'),
    'type' => MENU_CALLBACK,

  );
  return $items;
}

function table_page(){
$output .= t('Complicated Hello');
$header = stuff;
$rows = stuff;
$output .= theme_table($header, $rows);
return $output;
}

function table_form(){

$stuff_array = array (values);
$form['choice']= array(
    '#type' => 'select',
    '#title' => t('Select Stuff'),
    '#options' => $stuff_array,
  );

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',
  );
    return $form;

}

function table_form_validate(){}

function table_form_submit(){
drupal_set_message(t('Submitted'));
} 
```

是否可以让一半模块呈现页面而另一半呈现表单？我写了两个页面参数。我看不出页面参数和回调之间有什么区别。还可能需要使用 drupal_get_form() 在页面上呈现表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:48:20.007

```
page callback 
```

是您希望此 URI 触发的功能。

```
page arguments 
```

是调用回调时要发送给该函数的任何参数。

您的菜单项应如下所示：

```
$items['table'] = array(
  'title' => t('name'),
  'page callback' => 'table_page',
  'description' => t('score table'),
  'type' => MENU_CALLBACK,
); 
```

或这个：

```
$items['table'] = array(
  'title' => t('name'),
  'page callback' => 'drupal_get_form',
  'page arguments' => array('table_form'),
  'description' => t('score table'),
  'type' => MENU_CALLBACK,
); 
```

在您的 table_form 中，您可以使用其他表单类型来显示标记，

```
$form['table'] = array(
  '#type' => 'markup',
  '#markup' => theme_table($header, $rows),
); 
```

查看 API 以更好地理解 hook_menu：[http ://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_menu/6](http://api.drupal.org/api/drupal/developer%21hooks%21core.php/function/hook_menu/6)

# python - 在 Python 脚本中获取当前的 git 哈希

> ID：14989858
> 
> 赞同：228
> 
> 时间：2013-02-20T21:03:29.117
> 
> 标签：python, git, git-hash

我想在 Python 脚本的输出中包含当前的 git 哈希（作为生成该输出的代码的*版本号）。*

如何在我的 Python 脚本中访问当前的 git 哈希？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2016-12-18T16:03:44.110

无需`git`自己从命令中获取数据。[GitPython](http://gitpython.readthedocs.io/en/stable/)是一种非常好的方式来执行此操作以及许多其他`git`内容。它甚至对 Windows 有“尽力而为”的支持。

之后`pip install gitpython`可以做

```
import git
repo = git.Repo(search_parent_directories=True)
sha = repo.head.object.hexsha 
```

* * *

使用此库时需要考虑的事项。以下取自[gitpython.readthedocs.io](https://gitpython.readthedocs.io/en/stable/intro.html#installing-gitpython)

> 系统资源泄漏
> 
> GitPython 不适合长时间运行的进程（如守护进程），因为它往往会泄漏系统资源。它是在析构函数（在`__del__`方法中实现）仍然确定性运行的时候编写的。
> 
> 如果您仍想在这种情况下使用它，您将需要在代码库中搜索`__del__`实现，并在您认为合适时自己调用它们。
> 
> 确保正确清理资源的另一种方法是将 GitPython 分解为一个单独的进程，该进程可以定期删除

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2014-02-20T07:40:24.757

[这篇文章](https://stackoverflow.com/questions/949314/how-to-retrieve-the-hash-for-the-current-commit-in-git)包含命令，[格雷格的答案](https://stackoverflow.com/a/14989911/3357935)包含子进程命令。

```
import subprocess

def get_git_revision_hash() -> str:
    return subprocess.check_output(['git', 'rev-parse', 'HEAD']).decode('ascii').strip()

def get_git_revision_short_hash() -> str:
    return subprocess.check_output(['git', 'rev-parse', '--short', 'HEAD']).decode('ascii').strip() 
```

跑步时

```
print(get_git_revision_hash())
print(get_git_revision_short_hash()) 
```

你得到输出：

```
fd1cd173fc834f62fa7db3034efc5b8e0f3b43fe
fd1cd17 
```

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2013-02-20T21:06:49.187

该[`git describe`](https://www.kernel.org/pub/software/scm/git/docs/git-describe.html)命令是创建人类可展示的代码“版本号”的好方法。从文档中的示例：

> 使用 git.git current tree 之类的东西，我得到：
> 
> ```
> [torvalds@g5 git]$ git describe parent
> v1.0.4-14-g2414721 
> ```
> 
> 即我的“父”分支的当前负责人基于v1.0.4，但由于它有一些提交，因此描述添加了额外提交的数量（“14”）和提交的缩写对象名称本身（“2414721”）在最后。

在 Python 中，您可以执行以下操作：

```
import subprocess
label = subprocess.check_output(["git", "describe"]).strip() 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2019-08-28T00:40:41.307

[这是格雷格答案](https://stackoverflow.com/a/14989911/1918127)的更完整版本：

```
import subprocess
print(subprocess.check_output(["git", "describe", "--always"]).strip().decode()) 
```

或者，如果从 repo 外部调用脚本：

```
import subprocess, os
print(subprocess.check_output(["git", "describe", "--always"], cwd=os.path.dirname(os.path.abspath(__file__))).strip().decode()) 
```

或者，如果从存储库外部调用脚本并且您喜欢`pathlib`：

```
import subprocess
from pathlib import Path
print(subprocess.check_output(["git", "describe", "--always"], cwd=Path(__file__).resolve().parent).strip().decode()) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-10-21T06:56:43.257

`numpy`有一个漂亮的多[平台例程](https://github.com/numpy/numpy/blob/master/setup.py#L70-L92)`setup.py`：

```
import os
import subprocess

# Return the git revision as a string
def git_version():
    def _minimal_ext_cmd(cmd):
        # construct minimal environment
        env = {}
        for k in ['SYSTEMROOT', 'PATH']:
            v = os.environ.get(k)
            if v is not None:
                env[k] = v
        # LANGUAGE is used on win32
        env['LANGUAGE'] = 'C'
        env['LANG'] = 'C'
        env['LC_ALL'] = 'C'
        out = subprocess.Popen(cmd, stdout = subprocess.PIPE, env=env).communicate()[0]
        return out

    try:
        out = _minimal_ext_cmd(['git', 'rev-parse', 'HEAD'])
        GIT_REVISION = out.strip().decode('ascii')
    except OSError:
        GIT_REVISION = "Unknown"

    return GIT_REVISION 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-05-21T20:11:50.900

如果 subprocess 不可移植，并且您不想安装软件包来做这么简单的事情，您也可以这样做。

```
import pathlib

def get_git_revision(base_path):
    git_dir = pathlib.Path(base_path) / '.git'
    with (git_dir / 'HEAD').open('r') as head:
        ref = head.readline().split(' ')[-1].strip()

    with (git_dir / ref).open('r') as git_hash:
        return git_hash.readline().strip() 
```

我只在我的 repos 上对此进行了测试，但它似乎工作得相当一致。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-02-20T14:57:59.903

这是对*Yuji 'Tomita' Tomita*答案的改进。

```
import subprocess

def get_git_revision_hash():
    full_hash = subprocess.check_output(['git', 'rev-parse', 'HEAD'])
    full_hash = str(full_hash, "utf-8").strip()
    return full_hash

def get_git_revision_short_hash():
    short_hash = subprocess.check_output(['git', 'rev-parse', '--short', 'HEAD'])
    short_hash = str(short_hash, "utf-8").strip()
    return short_hash

print(get_git_revision_hash())
print(get_git_revision_short_hash()) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-08-26T14:37:21.903

如果您想要比哈希更多的数据，您可以使用`git-log`：

```
import subprocess

def get_git_hash():
    return subprocess.check_output(['git', 'log', '-n', '1', '--pretty=tformat:%H']).strip()

def get_git_short_hash():
    return subprocess.check_output(['git', 'log', '-n', '1', '--pretty=tformat:%h']).strip()

def get_git_short_hash_and_commit_date():
    return subprocess.check_output(['git', 'log', '-n', '1', '--pretty=tformat:%h-%ad', '--date=short']).strip() 
```

有关格式化选项的完整列表 - 查看`git log --help`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-28T14:13:05.767

如果由于某种原因您没有可用的 git，但您有 git repo（找到 .git 文件夹），您可以从 .git/fetch/heads/[branch] 获取提交哈希

例如，我使用了以下在存储库根目录运行的快速而简单的 Python 片段来获取提交 id：

```
git_head = '.git\\HEAD'

# Open .git\HEAD file:
with open(git_head, 'r') as git_head_file:
    # Contains e.g. ref: ref/heads/master if on "master"
    git_head_data = str(git_head_file.read())

# Open the correct file in .git\ref\heads\[branch]
git_head_ref = '.git\\%s' % git_head_data.split(' ')[1].replace('/', '\\').strip()

# Get the commit hash ([:7] used to get "--short")
with open(git_head_ref, 'r') as git_head_ref_file:
    commit_id = git_head_ref_file.read().strip()[:7] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-07T09:44:51.713

如果你像我一样：

*   多平台，因此子进程可能有一天会崩溃
*   使用 Python 2.7 所以 GitPython 不可用
*   不想仅仅为此使用 Numpy
*   已经在使用 Sentry（旧版本：raven）

然后（这在 shell 上不起作用，因为 shell 没有检测到当前文件路径，请将 BASE_DIR 替换为当前文件路径）：

```
import os
import raven

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
print(raven.fetch_git_sha(BASE_DIR)) 
```

而已。

我一直在寻找另一种解决方案，因为我想迁移到 sentry_sdk 并离开 raven，但也许你们中的一些人想继续使用 raven 一段时间。

[这是让我进入这个stackoverflow问题的讨论](https://forum.sentry.io/t/fetch-git-sha-equivalent-in-the-unified-python-sdk/5521/2)

所以使用没有 raven 的 raven 代码也是可能的（见讨论）：

```
from __future__ import absolute_import

import os.path

__all__ = 'fetch_git_sha'

def fetch_git_sha(path, head=None):
    """
    >>> fetch_git_sha(os.path.dirname(__file__))
    """
    if not head:
        head_path = os.path.join(path, '.git', 'HEAD')

        with open(head_path, 'r') as fp:
            head = fp.read().strip()

        if head.startswith('ref: '):
            head = head[5:]
            revision_file = os.path.join(
                path, '.git', *head.split('/')
            )
        else:
            return head
    else:
        revision_file = os.path.join(path, '.git', 'refs', 'heads', head)

    if not os.path.exists(revision_file):
        # Check for Raven .git/packed-refs' file since a `git gc` may have run
        # https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery
        packed_file = os.path.join(path, '.git', 'packed-refs')
        if os.path.exists(packed_file):
            with open(packed_file) as fh:
                for line in fh:
                    line = line.rstrip()
                    if line and line[:1] not in ('#', '^'):
                        try:
                            revision, ref = line.split(' ', 1)
                        except ValueError:
                            continue
                        if ref == head:
                            return revision

    with open(revision_file) as fh:
        return fh.read().strip() 
```

我将此文件命名为 versioning.py 并在需要将文件路径作为参数传递的地方导入“fetch_git_sha”。

希望它会帮助你们中的一些人;）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-01T19:08:49.973

我遇到了这个问题并通过实现这个功能解决了它。 [https://gist.github.com/NaelsonDouglas/9bc3bfa26deec7827cb87816cad88d59](https://gist.github.com/NaelsonDouglas/9bc3bfa26deec7827cb87816cad88d59)

```
from pathlib import Path

def get_commit(repo_path):
    git_folder = Path(repo_path,'.git')
    head_name = Path(git_folder, 'HEAD').read_text().split('\n')[0].split(' ')[-1]
    head_ref = Path(git_folder,head_name)
    commit = head_ref.read_text().replace('\n','')
    return commit

r = get_commit('PATH OF YOUR CLONED REPOSITORY')
print(r) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-07-28T20:30:17.123

我遇到了类似于 OP 的问题，但在我的情况下，我将源代码作为 zip 文件提供给我的客户端，虽然我知道他们会安装 python，但我不能假设他们会有 git。由于 OP 没有指定他的操作系统，并且如果他安装了 git，我想我可以在这里做出贡献。

为了只获得提交的哈希值，[Naelson Douglas 的回答](https://stackoverflow.com/a/68215738/1669975)是完美的，但要获得标签名称，我使用的是[dulwich](https://pypi.org/project/dulwich-windows/) python 包。它是 python 中一个简化的 git 客户端。

用一个安装包后`pip install dulwich --global-option="--pure"`可以这样做：

```
from dulwich import porcelain

def get_git_revision(base_path):
    return porcelain.describe(base_path)

r = get_git_revision("PATH OF YOUR REPOSITORY's ROOT FOLDER")
print(r) 
```

我刚刚在这里的一个存储库中运行了这段代码，它显示了输出`v0.1.2-1-gfb41223`，类似于[git describe 返回的](https://stackoverflow.com/a/52723698/1669975)内容，这意味着我是标签*v0.1.2之后的**1*次提交，提交的 7 位哈希是*fb41223* .

 **它有一些限制：目前它没有显示存储库是否脏的选项，它[总是显示一个 7 位数的 hash](https://github.com/dulwich/dulwich/issues/824#issuecomment-759119488)，但不需要安装 git，因此可以选择权衡。

*编辑：*`pip install`如果由于选项导致命令错误`--pure`（问题在[此处](https://github.com/dulwich/dulwich/issues/824#issuecomment-759119488)解释），请选择两种可能的解决方案之一：

1.  首先安装 Dulwich 包的依赖： `pip install urllib3 certifi && pip install dulwich --global-option="--pure"`
2.  安装不带选项 pure: `pip install dulwich`。这将在您的系统中安装一些平台相关文件，但会[提高包的性能](https://github.com/dulwich/dulwich#installation)。**

# maven - 如何在我的项目中编译和运行我的自定义 Doclet 类？

> ID：14989871
> 
> 赞同：1
> 
> 时间：2013-02-20T21:04:25.313
> 
> 标签：maven, maven-2, javadoc, maven-javadoc-plugin, doclet

我试图在编译时将所有类 javadoc 注释（最好是库 WebPage 类的子类）转储到格式为 .properties 的文件中`classname=comment`。

到目前为止，我有：

*   创建 doclet 类`SiteMapDoclet`
    *   该类被定义为扫描项目中的所有 javadocs 并将它们转储到 .properties 文件中
*   将必要的配置添加到我的 pom.xml 以使其正常工作。

**版本：** Java 1.6.0.21、Maven 2.2.1

**问题：**
`mvn site`返回：

```
Embedded error: Error rendering Maven report: 
Exit code: 1 - java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at us.ak.state.revenue.cssd.Personnel.utils.SiteMapDoclet.<clinit>(SiteMapDoclet.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

我尝试将 jar 设置为`AdditionalDependencies`即使它们是我的项目的正常依赖项。我还尝试将路径添加到我希望我的类需要作为引导类路径的一部分的 jar 中。

我的 pom.xml 的报告部分如下所示：

```
<reporting>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-javadoc-plugin</artifactId>
      <version>2.9</version>
      <reportSets>
        <reportSet>
          <id>html</id>
          <reports>
            <report>javadoc</report>
          </reports>
        </reportSet>
        <reportSet>
          <id>siteMap</id>
          <configuration>
            <doclet>
              us.ak.state.revenue.cssd.Personnel.utils.SiteMapDoclet
            </doclet>
            <docletPath>${project.build.outputDirectory}</docletPath>
            <destDir>SiteMap</destDir>

            <author>false</author>
            <useStandardDocletOptions>false</useStandardDocletOptions>
            <!-- there has got to be a better way to do this! -->
            <!-- how can I fix the CSSD-Web - Base to use a proper manifest file? -->
            <bootclasspath>
              ${bootClassPath};
              ${env.CLASSPATH};
              ${m2Repository}/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar;
              ${m2Repository}/org/apache/wicket/wicket-core/${wicket.version}/wicket-core-${wicket.version}.jar;
              ${m2Repository}/us/ak/state/revenue/cssd/CSSD-Web/${CSSDWebBase.version}/CSSD-Web-${CSSDWebBase.version}.jar
            </bootclasspath>
            <additionalDependencies>
              <additionalDependency>
                <groupId>us.ak.state.revenue.cssd</groupId>
                <artifactId>CSSD-Web</artifactId>
                <version>${CSSDWebBase.version}</version>
              </additionalDependency>
              <additionalDependency>
                <groupId>org.apache.wicket</groupId>
                <artifactId>wicket-core</artifactId>
                <version>${wicket.version}</version>
              </additionalDependency>
              <additionalDependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>1.2.16</version>
              </additionalDependency>
              <additionalDependency>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
                <version>1.1.1</version>
              </additionalDependency>
            </additionalDependencies>

            <name>SiteMapDoclet</name>
            <description>Page Descriptions for SiteMap generation</description>
          </configuration>
          <reports>
            <report>javadoc</report>
          </reports>
        </reportSet>
      </reportSets>
    </plugin>
  </plugins>
</reporting> 
```

**注意：**
`${m2Repository}`被定义为文件上层的属性，
定义为`${env.USERPROFILE}/.m2/repository`
`${bootClassPath}`定义为文件上层的属性，
定义为`${env.JRE_6_HOME}\lib\rt.jar;${env.JAVA_HOME}\lib\tools.jar;`

我该如何解决`NoClassDefFoundError`？

此外，我希望我的 SiteMap 文件作为正常构建过程的一部分`compile`在`package`.

我已经尝试在 中定义它`build`，但是 javadoc 没有被创建，而且我没有看到我的 Doclet 的任何日志输出。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <executions>
      <execution>
        <id>build-siteMap-Descriptions</id>
        <phase>process-classes</phase>
      </execution>
    </executions>
  </plugin> 
```

**更新：**
感谢@ben75 的建议。我已经删除了**pom.xml**`<reporting>`的部分，现在在构建过程中该过程失败了。我从. _**`<goals>``<configuration>``<reporting>`**

 **它仍在抛出，`NoClassDefFoundError`但它发生在我想要的构建位置。我尝试添加：

```
<includeDependencySources>true</includeDependencySources>
<dependencySourceIncludes>
  <dependencySourceInclude>org.apache.wicket:wicket-core:*</dependencySourceInclude>
  <dependencySourceInclude>org.apache.commons.logging:*</dependencySourceInclude>
  <dependencySourceInclude>us.ak.state.revenue.cssd:CSSD-Web:*</dependencySourceInclude>
</dependencySourceIncludes> 
```

到配置部分，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:23:59.610

您可以尝试将您的`<additionalDependencies>`as 插件依赖项：

```
 <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-javadoc-plugin</artifactId>
      <version>2.9</version>
      <dependencies>
         <dependency>
            <groupId>us.ak.state.revenue.cssd</groupId>
            <artifactId>CSSD-Web</artifactId>
            <version>${CSSDWebBase.version}</version>
         </dependency>
         ... 
```

要将 javadoc 插件附加到您的正常构建过程中，我认为您只需要指定目标并最好将其附加到 prepare-package 阶段（以便在您简单地运行测试阶段时不会生成 javadoc）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.9</version>
            <executions>
                <execution>
                    <id>attach-javadoc</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:53:56.800

在@ben75s 的优秀建议的基础上，我终于能够让它运行起来。
这“有效”。感觉不对，我很想看到更好的方法。

这是我所做的：

*   使用 javadoc 目标在构建部分定义插件。
    *   确保 tools.jar 和 rt.jar 在`<bootclasspath>`
    *   定义`<docletPath>`为`\;.;${project.build.outputDirectory};`
        *   这`\;.;`是必要的，因为 Maven 没有正确附加
        *   还必须在此处显式添加某些包的路径，以防止继承冲突版本。（特别是 Log4J）
    *   `<docletArtifacts>`用抛出的类的包定义`NoClassDefFoundError`

我的插件现在看起来像这样：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <executions>
      <execution>
        <id>build-siteMap-Descriptions</id>
        <phase>process-classes</phase>
        <goals>
          <!--<goal>aggregate</goal>-->
          <goal>javadoc</goal>
        </goals>
        <configuration>
          <doclet>
            us.ak.state.revenue.cssd.Personnel.utils.SiteMapDoclet
          </doclet>
          <!-- the initial '\;.;' is required
               because maven doesn't separate the path statements properly

               The 5 packages are necessary
               because otherwise slf4j complains about multiple bindings
          -->
          <docletPath>
            \;.;${project.build.outputDirectory};
            ${m2Repository}/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar;
            ${m2Repository}/log4j/log4j/1.2.16/log4j-1.2.16.jar;
            ${m2Repository}/log4j/apache-log4j-extras/1.1/apache-log4j-extras-1.1.jar;
            ${m2Repository}/us/ak/state/revenue/cssd/CSSD-Web/${CSSDWebBase.version}/CSSD-Web-${CSSDWebBase.version}.jar;
            ${m2Repository}/org/apache/wicket/wicket-core/${wicket.version}/wicket-core-${wicket.version}.jar;
            ${m2Repository}/org/apache/wicket/wicket-util/${wicket.version}/wicket-util-${wicket.version}.jar;
          </docletPath>
          <docletArtifacts>
            <!--
            <docletArtifact>
              <groupId>commons-logging</groupId>
              <artifactId>commons-logging</artifactId>
              <version>1.1.1</version>
            </docletArtifact>
            -->
            <docletArtifact>
              <groupId>org.slf4j</groupId>
              <artifactId>slf4j-log4j12</artifactId>
              <version>1.6.2</version>
            </docletArtifact>
            <!-- how do I fix the download errors? -->
            <!--
            <docletArtifact>
              <groupId>org.slf4j</groupId>
              <artifactId>slf4j-api</artifactId>
              <version>1.6.2</version>
            </docletArtifact>
            -->
            <!--
            <artifact>
              <groupId>log4j</groupId>
              <artifactId>log4j</artifactId>
              <version>1.2.16</version>
            </artifact>
            -->
            <!--
            <docletArtifact>
              <groupId>log4j</groupId>
              <artifactId>apache-log4j-extras</artifactId>
              <version>1.1</version>
            </docletArtifact>
            <docletArtifact>
              <groupId>us.ak.state.revenue.cssd</groupId>
              <artifactId>CSSD-Web</artifactId>
              <version>${CSSDWebBase.version}</version>
            </docletArtifact>
            <docletArtifact>
              <groupId>org.apache.wicket</groupId>
              <artifactId>wicket-core</artifactId>
              <version>${wicket.version}</version>
            </docletArtifact>
            -->
          </docletArtifacts>

          <!-- the initial '\;.;' is required
               because maven doesn't separate the path statements properly -->
          <bootclasspath>
            \;.;
            ${bootClassPath};
            ${env.CLASSPATH};
          </bootclasspath>

          <destDir>SiteMap</destDir>

          <author>false</author>
          <!-- don't print the packages/classes it's running on -->
          <quiet>true</quiet>
          <debug>true</debug> <!-- save options -->
          <useStandardDocletOptions>false</useStandardDocletOptions>

          <name>SiteMapDoclet</name>
          <description>Page Descriptions for SiteMap generation</description>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```**

# c# - WPF 清除 UserControl 的子项

> ID：14989872
> 
> 赞同：1
> 
> 时间：2013-02-20T21:04:29.293
> 
> 标签：c#, wpf

我在 WPF 中创建了一个 UserControl，并且 UserControl 的工作原理是当用户将鼠标移到控件上时，它的子控件应该被删除，但我似乎没有找到 Children 属性或类似的东西..

XAML 在这里：

```
<UserControl x:Class="myTextBox"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         Name="thisTextBox"
         mc:Ignorable="d" d:DesignWidth="300" Height="57"     MouseEnter="UserControl_MouseEnter_1" MouseLeave="UserControl_MouseLeave_1">
<TextBlock Name="TypeText" TextWrapping="NoWrap" Text="" />
</UserControl> 
```

在代码中我需要做这样的事情来让 TextBlock 消失：

```
private void UserControl_MouseEnter_1(object sender, MouseEventArgs e)
{
     Children.Clear(); // There is no such thing as children here!!!
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:09:49.307

UserControl 的“子元素”包含在[Content](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content.aspx)属性中。您可以将其设置为`null`以删除内容。

```
private void UserControl_MouseEnter_1(object sender, MouseEventArgs e)
{
    Content = null;
} 
```

# oracle - 如何在 Oracle SQL Developer 上显示第二个表？

> ID：14989878
> 
> 赞同：0
> 
> 时间：2013-02-20T00:18:20.170
> 
> 标签：oracle

这是有史以来最简单的问题！

我想并排看两张桌子。但是按下我想在连接窗口上显示的表，只是用我刚刚按下的表替换现有表。

右键单击-> 打开，做同样的事情。

没有“打开新窗口”类型选项。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:31:35.903

绘图针将其固定在窗口上。当您打开另一个表时，它将在新选项卡中打开。您可以右键单击 -> 'New editor tab group' 并排查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:51:52.510

打开两个 SQL Developer 实例。一个带有 tableA 的实例，另一个带有 tableB 的实例。把两个窗口的一面买一面。这是最简单的方法。

# asp.net - 在应用程序池上安装 Web 服务会导致所有已安装服务的应用程序池发生更改

> ID：14989882
> 
> 赞同：0
> 
> 时间：2013-02-20T21:04:56.830
> 
> 标签：asp.net, web-services, iis, setup-project, web-setup-project

Windows 服务器 2008，IIS 7.5。使用“Web 设置项目”中的“Web 部署项目”来部署 Web 服务。我安装了一些 Web 服务。当我安装一个新的并针对不同的应用程序池时，所有现有服务都在之后切换到新的应用程序池设置完成。关于可能导致此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:00:37.827

经过一番搜索，以下问题和答案让我走上了正轨： [如何在 Web 设置项目中创建新的应用程序池？](https://stackoverflow.com/questions/658675/how-can-i-create-a-new-application-pool-in-a-web-setup-project)

在看到上述内容后，我仔细阅读了我正在为从 Installer 继承的类的解决方案的代码库，并找到了几个。问题似乎是在覆盖的 Install 方法中，他们正在更改属于正在安装软件包的站点的所有虚拟目录的应用程序池。

简而言之，我认为是设置配置问题实际上是一个烦人的自定义操作问题。

# ruby - FileUtils.mkdir_p 不起作用

> ID：14989888
> 
> 赞同：2
> 
> 时间：2013-02-20T21:05:10.603
> 
> 标签：ruby

我有这个红宝石代码：

```
FileUtils.mkdir_p("/Users/naorye/dev/naorye/_site/photography/grid/items/thumbnails") 
```

出于某种原因，这什么也没做，也没有抛出异常..我错过了什么吗？

将两个别名 mkpath、makedirs 设为 mkdir_p 的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:39:54.680

你的代码对我有用。您是否尝试过使用详细标志运行它？

```
FileUtils.mkdir_p("/Users/naorye/.../thumbnails", :verbose => true) 
```

[FileUtils.mkdir_p](http://apidock.com/ruby/FileUtils/mkdir_p)类似于 unix shell 命令`mkdir -p`，它在您指定的路径中创建终端目录*和所有中间目录*。至于同义词`mkpath`and `makedirs`，出于同样的原因，它们很可能同时`Enumerable`存在`inject`and `reduce`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-25T04:16:01.483

我正在运行 Ruby 1.8.7，似乎路径开头的正斜杠会导致命令失败。 `FileUtils.makedirs("/a/b/c/d")`无法创建目录并且`FileUtils.makedirs("a/b/c/d")`似乎可以正常工作。

# php - 密码更改 PHP

> ID：14989892
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:05:21.527
> 
> 标签：php, passwords

我正在开发一个允许用户创建帐户的简单脚本。它没有什么特别之处，它要求的是用户名和密码。我遇到的唯一问题是创建一个允许用户更改密码的脚本。这是我的进步。

它说“您当前的密码不正确！”，即使密码没问题。我已经将它与同一页面上的另一个代码连接到数据库。

```
<?php
    $CurrentPassword  = mysql_real_escape_string(strip_tags(stripslashes($_POST['CurrentPassword'])));
    $NewPassword    = mysql_real_escape_string(strip_tags(stripslashes($_POST['NewPassword'])));
    $ConfirmNewPassword = mysql_real_escape_string(strip_tags(stripslashes($_POST['ConfirmNewPassword'])));
    $Submit2      =    mysql_real_escape_string(strip_tags(stripslashes($_POST['Submit2'])));
?>
<?php
    if ($Submit2) {
       $_OLDHASH = hash('sha512',''.$CurrentPassword.'');
       $_NEWHASH = hash('sha512',''.$NewPassword.'');
       $_CONFIRMNEWHASH = hash('sha512',''.$ConfirmNewPassword.'');

       if ($myU->Password == $_OLDHASH) {
           if ($_NEWHASH == $_CONFIRMNEWHASH) {
               mysql_query("UPDATE Password='".$_NEWHASH."' WHERE Username='".$User."'");
               session_destroy();
               header("Location: index.php");
           }
           else {
               echo "Your new password and new confirm password does not match!";
           }
       }
       else {
           echo "Your current password is not right!";
       }
    }
?>

<form action='' method='POST'>
<br />
Update Password
<br />
<input placeholder='Current Password' type='password' name='CurrentPassword'>
<br />
<input placeholder='New Password' type='password' name='NewPassword'>
<br />
<input placeholder='Confirm New Password' type='password' name='ConfirmNewPassword'>
<br />
<input type='submit' value='Change' name='Submit2'><br />
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:14:53.630

当您在登录时检查密码时，您是否也在做所有这些无关紧要的废话？

```
mysql_real_escape_string(strip_tags(stripslashes())) 
```

因为我可以看到包含特殊字符的密码会导致问题，即强密码。我的建议是根本不要这样做，您在将输入包含在查询中之前对其进行哈希处理，因此没有机会使用此特定字段进行 SQL 注入。

其他错误：

1.  `''.$NewPassword.''`相当于简单地`$NewPassword`
2.  为什么？

    ```
    ?>
    <?php 
    ```

    这将输出一个原始换行符，它将中断您的`header()`通话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:14:06.103

尝试制作两个文件：

changePass.html：

```
<form action='changePass.php' method='POST'>
<br />
Update Password
<br />
<input placeholder='Current Password' type='password' name='CurrentPassword'>
<br />
<input placeholder='New Password' type='password' name='NewPassword'>
<br />
<input placeholder='Confirm New Password' type='password' name='ConfirmNewPassword'>
<br />
<input type='submit' value='Change' name='Submit2'><br />
</form> 
```

和第二个copyPass.php：

```
<?php
//    Copy your php code here
?> 
```

因此，当用户想要更改密码时，将他指向changePass.html，当他进入表单时，数据将被传输并处理到changePass.php。请注意，在表单标签/操作参数中添加了 changePass.php 作为将处理数据的网页。

现在我还注意到您的 SQL 查询中有错误的语法，您应该编写如下内容：

mysql_query("更新`passwordTable` `SET`密码='".$_NEWHASH."' WHERE 用户名='".$User."'");

# email - 如何设置 Mandrill MX 记录并保留我的旧电子邮件？

> ID：14989894
> 
> 赞同：2
> 
> 时间：2013-02-20T21:05:25.847
> 
> 标签：email, mx-record, mandrill

我为我的域设置了 MX 记录。根据教程，应删除所有其他记录。我删除了旧记录，后来意识到我仍然想要一个普通的电子邮件帐户，

```
 info@mydomain.com 
```

如何设置我的 MX 记录来处理这个问题？

Mandrill 的教程说不允许其他 MX 记录。我希望 info@mydomain 路由也存在。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T21:20:16.370

不可能有一个域的传统收件箱以及让 Mandrill 接受该域的电子邮件。相反，您可能希望 Mandrill 只处理一个子域，如 inbound.domain.com，并为该子域设置路由。然后，您的根域可用于发送和接收邮件的传统收件箱。

或者，您可以将根域设置为由 Mandrill 处理。每当您收到发送到 info@yourdomain.com 的邮件时，您都会处理 webhook POST，并使用该 POST 中的信息创建一条新的出站消息，发送到可以接收邮件的其他收件箱。

# java - 使用 SSLSocketFactory 后连接 twitter

> ID：14989895
> 
> 赞同：1
> 
> 时间：2013-02-20T21:05:25.453
> 
> 标签：java, exception, ssl-certificate, rmi, jsse

我正在尝试使用 Twitter4J 从 Twitter 流 API 中检索推文。该项目使用 SSLSocket 连接到远程服务器以检索一些数据，然后调用 Twitter4J。问题是，如果我建立这个连接 Twitter4J 会出现这个异常：

> [2013 年 2 月 20 日星期三 11:32:02 CET]sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效认证路径

如果我不建立连接并清理下一行定义的密钥库，则不会发生这种情况：

```
System.clearProperty("javax.net.ssl.trustStore");
System.clearProperty("javax.net.ssl.trustStorePassword"); 
```

连接代码是这样的：

```
private String publishFetcher() throws UnknownHostException, IOException {
    // Set trustStore.
    System.setProperty("javax.net.ssl.trustStore", properties.getProperty("trustedStore"));
    System.setProperty("javax.net.ssl.trustStorePassword", properties.getProperty("trustedStorePassword"));

    String host = properties.getProperty("host");
    int hostPort = Integer.parseInt(properties.getProperty("host_port"));
    SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();
    SSLSocket socket = (SSLSocket) factory.createSocket(host, hostPort);

    // Get input and output streams from socket connection.
    BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    PrintWriter output = new PrintWriter(socket.getOutputStream());

    // Request connection token to controller
    String connectionToken = getConnectionToken(input, output);

    // Publish fetcher
    final int rmiPort = Integer.parseInt(properties.getProperty("rmi_port"));
    TwitterFetcher fetcher = new TwitterFetcher(connector);
    Fetcher stub = (Fetcher) UnicastRemoteObject.exportObject(fetcher, 0);
    Registry registry = LocateRegistry.createRegistry(rmiPort);
    registry.rebind(connectionToken, stub);

    // Send RMI port
    output.write(String.valueOf(rmiPort) + "\n");
    output.flush();

    input.close();
    output.close();

    // Clean trusteStore properties.
    System.clearProperty("javax.net.ssl.trustStore");
    System.clearProperty("javax.net.ssl.trustStorePassword");

    return connectionToken;
} 
```

我认为这个问题与 SSLSocketFactory 有关，因为我在不同的项目中测试了一些东西。例如，这段代码就像一个魅力：

```
SSLSocketFactory deffactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
System.setProperty("javax.net.ssl.trustStore", "sttv_keystore");
System.setProperty("javax.net.ssl.trustStorePassword", "Smart.Table");

SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();

factory = deffactory;
// Twitter4J code... 
```

但是这段代码不起作用：

```
System.setProperty("javax.net.ssl.trustStore", "sttv_keystore");
System.setProperty("javax.net.ssl.trustStorePassword", "Smart.Table");

SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();
// Twitter4J code... 
```

我不能在我的实际项目中做同样的事情，因为休息......几乎所有东西^^

可能是什么问题呢？和解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:02:21.730

代码的问题是我正在替换信任库，而不是为我的应用程序创建一个新的。解决问题的代码是下一个：

```
private SSLSocket getSSLSocket() throws TrackerSSLConnectionException {
    try {
        // Load properties.
        String keystore = properties.getProperty("keystore");
        String passphrase = properties.getProperty("keystorePassphrase");
        String host = properties.getProperty("host");
        int hostPort = Integer.parseInt(properties.getProperty("host_port"));

        // Create keystore.
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        keyStore.load(new FileInputStream(keystore), passphrase.toCharArray());

        // Get factory for the given keystore.
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(keyStore);
        SSLContext ctx = SSLContext.getInstance("SSL");
        ctx.init(null, tmf.getTrustManagers(), null);
        SSLSocketFactory factory = ctx.getSocketFactory();

        return (SSLSocket) factory.createSocket(host, hostPort);
    } catch (Exception e) {
        throw new TrackerSSLConnectionException(e.getMessage(), e.getCause());
    }
}

private String publishFetcher() throws TrackerSSLConnectionException, IOException {
    // Get socket connection.
    SSLSocket socket = getSSLSocket();

    // Get input and output streams from socket.
    BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    PrintWriter output = new PrintWriter(socket.getOutputStream());

    // Request connection token to controller.
    String connectionToken = getConnectionToken(input, output);

    // Publish fetcher.
    final int rmiPort = Integer.parseInt(properties.getProperty("rmi_port"));
    TwitterFetcher fetcher = new TwitterFetcher(connector);
    Fetcher stub = (Fetcher) UnicastRemoteObject.exportObject(fetcher, 0);
    Registry registry = LocateRegistry.createRegistry(rmiPort);
    registry.rebind(connectionToken, stub);

    // Send RMI port.
    output.write(String.valueOf(rmiPort) + "\n");
    output.flush();

    input.close();
    output.close();

    return connectionToken;
} 
```

# scripting - Maya MEL 脚本 sprintf 等效

> ID：14989897
> 
> 赞同：0
> 
> 时间：2013-02-20T21:05:32.017
> 
> 标签：scripting, mel

如何在 Maya MEL 脚本中将整数打印到字符串中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:09:37.937

事实证明，您可以`+`在 Maya 嵌入式语言中使用来连接字符串和整数对象。

例如：

```
int $i ;
string $s ;

    for( $i = 0; $i < 5; $i++ ) {
        $s = "ooh" + $i ;
        print $s ;
    } 
```

还有[格式](http://download.autodesk.com/us/maya/2010help/Commands/format.html)命令

# ios - 如何将子视图的顺序放入数组中？

> ID：14989900
> 
> 赞同：-1
> 
> 时间：2013-02-20T21:05:55.930
> 
> 标签：ios, uiview, nsarray

我在另一个 supperView 中有许多子视图随机布局。

我想将它们全部放在一个数组中，其顺序基于它们的位置从左到右，从上到下：

前任：

视图1 - 视图2 - 视图3

视图 4 - 视图 5 - 视图 6

数组 = {view1、view2、view3、view4、view5、view6}

当 array = superView.subviews 时，如何始终获得正确的顺序（数组索引）？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:17:20.710

调用`subviews`将始终按视图层次结构中从后到前的顺序返回它们。

> 您可以使用此属性来检索与您的自定义视图层次结构关联的子视图。数组中子视图的顺序反映了它们在屏幕上的可见顺序，索引 0 处的视图是最后面的视图。（[来源](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW17)）

如果这不是反映您的目标的顺序，您将不得不自己跟踪它们。您可能必须根据`origin`属性手动对它们进行排序，这是一个向下几级的结构。

# objective-c - UICollection 从 url 查看图片

> ID：14989903
> 
> 赞同：1
> 
> 时间：2013-02-20T21:06:04.460
> 
> 标签：objective-c, url, ios6, uicollectionview

我已经按照本教程制作了 UICollectionView 自定义布局：[http](http://skeuo.com/uicollectionview-custom-layout-tutorial#section4) ://skeuo.com/uicollectionview-custom-layout-tutorial#section4 我通过了它并且我得到了它的工作。但是当我尝试将它与我自己的图片一起使用时，我无法在应用程序中显示它们。这是获取图片的代码

```
 self.albums = [NSMutableArray array];

    NSURL *urlPrefix =
        [NSURL URLWithString:@"https://raw.github.com/ShadoFlameX/PhotoCollectionView/master/Photos/"];

    NSInteger photoIndex = 0;

    for (NSInteger a = 0; a < 12; a++) {
        BHAlbum *album = [[BHAlbum alloc] init];
        album.name = [NSString stringWithFormat:@"Photo Album %d",a + 1];

        NSUInteger photoCount = 1;
        for (NSInteger p = 0; p < photoCount; p++) {
            // there are up to 25 photos available to load from the code repository
            NSString *photoFilename = [NSString stringWithFormat:@"thumbnail%d.jpg",photoIndex % 25];
            NSURL *photoURL = [urlPrefix URLByAppendingPathComponent:photoFilename];
            BHPhoto *photo = [BHPhoto photoWithImageURL:photoURL];
            [album addPhoto:photo];

            photoIndex++;
        }

    [self.albums addObject:album];
} 
```

因此，当我将 url 字符串更改为带有我的图片的字符串时，问题就来了。我想使用一个公共网站来托管像 Flickr 这样的图像，但我也尝试过 Imageshak.us 和 postimage.org，但没有成功。我有照片名称，因为它说的是字符串：thumbnail%d.jpd，所以这不是问题。有任何想法吗？

更新：我尝试使用这个

```
[NSURL URLWithString:@"http://www.flickr.com/photos/93436974@N06/"]; 
```

这是画廊的网址，但它没有显示任何内容。如果我不能使用 Flickr，是否有其他类似的网站可以使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:53:35.760

对于您的缩略图，您将它们命名为“thumbnail0.jpg”“thumbnail1.jpg”等，对吗？%d 表示在此处插入引号外的数字，对于您发布的代码，它将获取您所在的任何数字照片并将其添加到您的字符串中（最多 25 个，此时它将重新启动，即照片 27将返回 thumbnail2.jpg

只需快速搜索一下，flickr 似乎没有保留源文件名，因此它不适用于您发布的代码。我会推荐 photobucket 我相信他们保留了源文件名和 url 很容易使用

# python - Django DB 表名，复数 double s

> ID：14989907
> 
> 赞同：2
> 
> 时间：2013-02-20T21:06:32.670
> 
> 标签：python, django, django-models, grammar

在 Rails 中，当从模型创建数据库表时，**Product**变成**Products**，**Status**变成**Statuses**等等。Django 似乎没有完全具备内置的语法功能。 **产品**变成**产品**，但**状态**变成**状态**。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:32:11.230

是的，您可以将属性添加到模型类 Meta，`verbose_name_plural`-

```
class YourModel(Model):
    # fields
    class Meta:
        verbose_name_plural = 'Statuses' 
```

请参阅[文档。](https://docs.djangoproject.com/en/dev/ref/models/options/#verbose-name-plural)

# wcf - 如何使用 XAMPP 测试 WCF 服务以与 Apache 服务器一起使用？

> ID：14989917
> 
> 赞同：2
> 
> 时间：2013-02-20T21:07:14.507
> 
> 标签：wcf, xampp, virtual-machine, htdocs, wcftestclient

我在 Windows 虚拟机上构建了一个 WCF 服务，并通过在我的浏览器上键入以下内容使用 WCF 测试客户端对其进行了测试：

```
http://localhost/Service1.svc/getAllCustomers 
```

...而且效果很好。现在的问题是我想在我的真实计算机（而不是虚拟机）上做同样的测试。

我在 VM 上使用 XAMPP，我在`htdocs`文件夹中设置了项目，然后在浏览器上输入：

```
http://10.211.55.3/WCFWebService/Service1.svc.cs/getAllCustomers 
```

问题是它不返回调用的结果`getAllCustomers`，而是返回`Service1.svc.cs`纯文本。

我希望它在 VM 上做同样的事情 - 有人可以告诉我问题是什么吗？我认为这是因为在 VM 上它可以与 WCF 测试客户端一起使用，并且由于我的计算机是 Mac，我无法运行 WCF 测试客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T16:36:46.653

I found this with a Google query.

I kept the tab open, but continued exploring the other search results.

One I found particularly interesting was this one: [WCF acting as Web Service without IIS](http://bytes.com/topic/net/answers/689981-wcf-acting-web-service-without-iis)

It appears WCF gives options other than IIS to host the web service (Console Application, Windows Application, Windows Services).

The Windows Service link is provided here: [How to: Host a WCF Service in a Managed Windows Service](http://msdn.microsoft.com/en-us/library/ms733069(v=vs.100).aspx)

I have not done this, so I cannot elaborate on what problems you will run into.

I just want others that may run into this (like I did) to know that the one answer posted last year may not actually be the end of the road.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:26:32.460

WCF 服务不能在 Apache Web 服务器上运行，您应该在 VM 上安装 IIS 服务器以测试该服务。请参阅：http: [//msdn.microsoft.com/en-us/library/ms733766.aspx](http://msdn.microsoft.com/en-us/library/ms733766.aspx)

# java - 在 ubuntu 下的 Intellij 中为 android 编译 hello world 项目时出错

> ID：14989918
> 
> 赞同：1
> 
> 时间：2013-02-20T21:07:22.323
> 
> 标签：java, compiler-errors, intellij-idea

您能帮我解决启动/构建我的第一个 hello world android 应用程序的困难吗？我正在使用 ubuntu 作为我的操作系统。我下载了 android sdk 和 Intellij。我添加了库。我通过前面提到的库处理了与缺少的 android.app 相关的错误。不幸的是，我遇到了以下消息的另一个问题：

> 信息：编译完成，9 秒内出现 33 个错误和 0 个警告信息：33 个错误信息：0 个警告处理“javax/crypto/ExemptionMechanismSpi.class”时出现问题：
> 
> 不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。那是，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你无法做到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。
> 
> 1个错误；中止

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T17:39:11.620

您可能必须从构建路径中删除 android.jar（项目结构> 库> android 库> 分离 android.jar）。

# objective-c - 预期标识符错误或“（”错误

> ID：14989921
> 
> 赞同：0
> 
> 时间：2013-02-20T21:07:33.717
> 
> 标签：objective-c

我正在制作一个温度转换器并想改进应用程序，所以我决定添加代码，根据输出更改背景图像，这将是转换后的数字。我想要做的是，如果我的 convertTemperatureLabel.text < 0，背景会变成我将导入的某个图像，当它> 0 时，背景会变成另一个图像。所以我使用了下面的代码，它给了我预期的标识符错误：

```
if ([convertedTemperatureLabel.text doubleValue] < 0) {
NSLog("The temperature is above 0");
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"snowy- grand-canyon-nichols_26007_600x450.jpg"]];
}

else {
NSLog("The temperature is below 0");
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"wallpaper_hazybluedots.jpg"]];
} 
```

我的错误在哪里？代码也是我的目的所需的代码吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:08:14.720

您传递给`NSLog`的字符串不是`NSString`;的实例 它们是 C 弦。

```
NSLog(@"The temperature is above 0"); 
```

添加“at”符号会使事情变得正确。

您的日志语句与您实际想要的相反；如果温度小于零，您不想说温度*高于*零。而且您*缺少*一个条件：如果转换后的温度为零怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:11:17.980

正如 trudyscousin 所说，你应该为 NSLog 提供 obj-c 字符串，如下所示：

```
 NSLog(@"The temperature is below 0"); 
```

# c# - 在 C# 中访问映射驱动器上的数据库

> ID：14989923
> 
> 赞同：0
> 
> 时间：2013-02-20T21:07:41.600
> 
> 标签：c#, sql, database, visual-studio

我已经构建了一个 SQL 数据库程序，其中包含零件编号和有关它们的详细信息。现在该程序在我的机器上本地运行。但是，我需要做的是让程序访问网络驱动器（例如`L:\`驱动器）上的数据库。这样，用户可以拥有自己的程序副本，但发送和接收的所有数据都在该公共网络数据库中完成。我一直在玩，也在网上搜索，但似乎找不到任何东西，我是一个数据库初学者。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:09:37.247

你想要做的是在你的[网络的某个地方安装一个](http://msdn.microsoft.com/en-us/library/ms143219.aspx)[sql server 实例](http://msdn.microsoft.com/en-us/library/bb545450.aspx)。然后使用[连接字符串](http://www.connectionstrings.com/)而不是驱动器位置来访问数据。

这是跨应用程序共享数据的标准方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:28:56.423

简单地说，这种方法的问题是锁定和多用户支持。您将遇到用户争相访问该文件。您需要一个数据库服务器（SQL Server、Sql Server Express、MySQL 等）来为您处理这个问题。DB 服务器可以在该网络服务器上运行。

# javascript - 计算 div 并添加 jquery 以展开和折叠 Text

> ID：14989924
> 
> 赞同：1
> 
> 时间：2013-02-20T21:07:52.417
> 
> 标签：javascript, jquery

我希望有人能帮帮忙。包含的 html 代码中有 3 个带有员工块类的 div。我想添加 javascript/jquery 代码来展开/折叠第二个 div（或员工块 div）之后的任何内容。这是我的html：

```
<div class="employee-block">
    <img alt="test" title="test" src="/images/42.png" /><div class="employee-details"><span class="red strong">TEST</span><br /><p>test description</p></div>                    
</div>               
<div class="bottom"></div>            
<div class="employee-block">
    <div class="employee-details"><span class="red strong">support@.net</span><br /><p>testing description</p></div>                    
</div>               
<div class="bottom"></div>            
<div class="employee-block">
    <img alt="test" title="test" src="/images/42.png" /><div class="employee-details"><span class="red strong">TEST</span><br /><p>test description</p></div>
</div>               
<div class="bottom"></div> 
```

我有这个 jquery 代码，但不知道如何插入它。在我的示例 html 代码中，我只想隐藏/显示第三个员工块 div，所以实际上超过 2 个，因为可能超过 2 个：

```
<script type="text/javascript">
$(document).ready(function () {        
    $('div.view').hide();         
    $('div.slide').click(function () {            
        $('div.view').slideToggle(400);
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:23:04.773

你的问题对我来说不是很清楚，但看看这段代码：

```
$('a.createSomeButton').click( function() {
  if ( ! $('#IwillCollapse').length ) {
    $('.employee-block:gt(1)').wrap('<div id="IwillCollapse" />');
  }
  $('#IwillCollapse').slideToggle();
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:30:45.223

这应该可以帮助您上路。有许多不同的方法可以实现您想要的，但这可能是最容易掌握的。[http://jsfiddle.net/jSZxp/1/](http://jsfiddle.net/jSZxp/1/)

```
var employeeBlocks = $('.employee-block').slice(2); //returns all after the first 2

employeeBlocks.addClass('hidden'); //attach the hidden class

$('button').on('click', function(){
    employeeBlocks.toggle('hidden'); //toggles the hidden class
}); 
```

# html - 将进入子文件夹的所有流量重定向到主页

> ID：14989925
> 
> 赞同：0
> 
> 时间：2013-02-20T21:07:52.487
> 
> 标签：html, .htaccess

根据谷歌的说法，我有大量的错误页面。检查它们告诉我大约 95% 左右进入子文件夹 (/test123/)。该子文件夹不再存在，我无法弄清楚谷歌从哪里获取数据，所以我只想重新路由进入该子文件夹的任何内容（无论前面是什么，文件和/或子文件夹结构）只是简单地重新路由到主页。

我该怎么做呢？（或者如果可以解决我的问题，请提出其他建议..）

谢谢。

好的，所以它应该是一个 301 重定向。感谢谷歌，我发现了一些东西..我只是想知道，如果以下内容正确：

```
Redirect 301 /test123/ http://domain.com/ 
```

甚至可能：

```
Redirect 301 /test123/ / 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:12:50.880

**回答第一个问题：**

如果页面消失，请使用 301 永久重定向。每当您从您的网站上删除任何资源时，您都应该这样做，否则谷歌会因任何链接而惩罚您。

Apache：您可以使用带有 [L,R=301] 的重定向或 mod_rewrite

IIS（堆栈答案）：[如何在 IIS 中重定向 URL 路径？](https://stackoverflow.com/questions/888325/how-to-redirect-a-url-path-in-iis)

Nginx（堆栈答案）：[如何在 NGINX 中重定向 url](https://stackoverflow.com/questions/10294481/how-to-redirect-a-url-in-nginx)

您可以通过将其复制到页面中来创建文件夹并将 index.html 与页面中的 http 重定向一起放入其中，但与真正的 301 http 响应相比，不建议这样做。

**回答你的第二个问题：**

您需要问几个问题。首先，重定向 404 主要是 SEO 问题，因此您需要阅读有关 404 和 SEO 的信息。有关其他信息，请参见此处：[http ://www.seomoz.org/learn-seo/http-status-codes](http://www.seomoz.org/learn-seo/http-status-codes)

您可能想要做的第一件事是分析页面丢失的原因，并询问流量是否可恢复/可重建，以及除了重定向到您的主页之外所做的其他事情是否会增加收益。我猜这是否只是某种测试链接，那么您并不在乎，否则您可能希望重定向到一些相关的相关内容。

如果您要询问实际创建重定向的语义，例如，如果您使用的是虚拟主机块，则需要将规则粘贴在虚拟主机块中。

请求是否有尾部斜杠？这些是不等价的。

```
Redirect 301 /test123/ http://domain.com/ 
Redirect 301 /test123 http://domain.com/ 
```

如果你真的想要一个 404，你应该使用一个真正的 404 错误页面：

```
ErrorDocument 404 /Lame_excuses/not_found.html 
```

# sql - sql滑动窗口 - 在间隔内找到最大值

> ID：14989927
> 
> 赞同：3
> 
> 时间：2013-02-20T21:07:54.760
> 
> 标签：sql, postgresql, intervals, sliding-window, postgresql-8.1

我有滑动窗口问题。具体来说，我不知道我的窗口应该从哪里开始以及应该在哪里结束。我知道我的间隔/窗口的大小。

我需要找到提供最佳（或最差，取决于您如何看待）案例场景的窗口的开始/结束。

这是一个示例数据集：

```
 value  | tstamp
 100    | 2013-02-20 00:01:00
 200    | 2013-02-20 00:02:00
 300    | 2013-02-20 00:03:00
 400    | 2013-02-20 00:04:00
 500    | 2013-02-20 00:05:00
 600    | 2013-02-20 00:06:00
 500    | 2013-02-20 00:07:00
 400    | 2013-02-20 00:08:00
 300    | 2013-02-20 00:09:00
 200    | 2013-02-20 00:10:00
 100    | 2013-02-20 00:11:00 
```

假设我知道我的间隔需要 5 分钟。所以，我需要知道“价值”之和最高的 5 分钟间隔中包含的价值和时间戳。在我上面的例子中，从 '2013-02-20 00:04:00' 到 '2013-02-20 00:08:00' 的行将给我一个总和 400+500+600+500+400 = 2400 ，这是该表中 5 分钟内的最高值。

如果需要，我不反对使用多个表。但我试图找到一个“最佳情况”区间。结果可以是任何一种方式，只要它们净间隔。如果我在该时间间隔内获得所有数据点，它仍然有效。如果我得到起点和终点，我也可以使用它们。

我发现了几个 SQL 的滑动窗口问题，但还没有发现窗口大小是已知因素的任何地方，并且起点是未知的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T21:21:39.207

```
SELECT  *,
        (
        SELECT  SUM(value)
        FROM    mytable mi
        WHERE   mi.tstamp BETWEEN m.tstamp - '5 minute'::INTERVAL AND m.tstamp
        ) AS maxvalue
FROM    mytable m
ORDER BY
        maxvalue DESC
LIMIT   1 
```

在 PostgreSQL 11 及更高版本中：

```
SELECT  SUM(value) OVER (ORDER BY tstamp RANGE '5 minute' PRECEDING) AS maxvalue,
        *
FROM    mytable m
ORDER BY
        maxvalue DESC
LIMIT   1 
```

# sql - 无法附加数据库 SQL Server 2012 错误 5

> ID：14989930
> 
> 赞同：1
> 
> 时间：2013-02-20T21:08:05.897
> 
> 标签：sql, sql-server-2012

当我输入这个：

```
CREATE DATABASE AdventureWorks2012
ON (FILENAME = 'C:\Users\sohm\Desktop\Pohm\AdventureWorks2012_Data.mdf')
FOR ATTACH_REBUILD_LOG ; 
```

我明白了：

> *文件激活失败。物理文件名“C:\Users\sohm\Desktop\AdventureWorks2012_Data_log.ldf”可能不正确。*
> *消息 5123，级别 16，状态 1，第 1 行
> CREATE FILE 在尝试打开或创建物理文件“C:\adventuredb\AdventureWorks2012_Data_log.ldf”时遇到操作系统错误 5（访问被拒绝。）。
> 消息 1813，第 16 级，状态 2，第 1 行
> 无法打开新数据库“AdventureWorks2012”。CREATE DATABASE 已中止。*

我知道这与权限有关。我有管理员帐户。我已经阅读了一百万篇文章，但到目前为止没有任何效果。此外，当我尝试将包含 mdf 文件的文件夹更改为完全控制但它不断恢复为只读时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-20T17:00:53.703

您应该以管理员身份运行 SSMS。
此外，您可能正在以“sa”用户身份运行查询（sql 服务器身份验证）。
尝试使用 Windows 身份验证运行查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T06:57:37.830

**精简版**

要允许 MS SQL Server 2012 附加数据库文件，您必须授予对 mdf 和 ldf 文件的完全访问权限：

> NT 服务\MSSQLSERVER
> 
> 完全访问

**长版**

SQL 安全性在 2012 年对文件的处理进行了很多更新。 [http://technet.microsoft.com/en-us/library/ms189128.aspx](http://technet.microsoft.com/en-us/library/ms189128.aspx)

如果您查看现有的附加数据库并且存在安全性，您可能会看到只有 2 个角色允许具有完全访问权限。**MSSQLSERVER**和**管理员**，当附加 SQL 从文件中删除所有其他角色。

尝试从 fil 安全权限设置 MSSQLSERVER 将不起作用。

查看您的 services.msc 概述，您将在默认安装中看到 NT Service\MSSQLSERVER 也运行 SQL 服务器服务。

服务帐户不可见，与 IIS AppPools 的问题相同，系统创建了一个子组并“隐藏”自动发现帐户，可能是为了尝试保护帐户，但在我看来只是掩盖了设置。

问候
简

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-17T10:05:25.717

以管理员模式打开 SQL Server Management Stdio（右键单击 -> 选择以管理员身份运行。如果询问用户名和密码，请输入您的管理员用户名密码）。然后选择 Windows 身份验证单击确定，现在尝试附加它会附加没有任何错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T21:22:27.427

这与您的帐户无关。SQL Server 正在尝试在运行 SQL Server 的服务帐户的上下文中写入该文件夹。您可以通过转到服务小程序并查看实例运行的身份（可能是 NT AUTHORITY\SYSTEM 或其他）来查看这是谁。您可以覆盖它，也可以将 MDF 文件放在 SQL Server 已经具有固有访问权限的数据文件夹中，而不是将它们放在 C:\ 驱动器上的其他位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-07T12:44:23.787

尝试这个

转到您存储`mdf`文件的文件夹。

`file -> Right click -> click`在 mdf 上选择为已登录用户安全性授予文件的**完全权限。**

如果问题仍然存在，并且可能是由于事务日志损坏，您可以使用工具[SQL 数据库恢复工具修复](https://www.stellarinfo.com/sql-recovery.php)来修复损坏的 mdf 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-07T21:03:45.257

解决此问题的另一种方法是将所有 SQL Server 服务更改为本地系统帐户而不是服务。开始 -> 运行 ->Services.msc -> 向下滚动到 SQL Server，您应该会看到五个以 SQL Server 开头的服务。右键单击，属性，登录，更改为本地系统帐户。对所有其余的 SQL Server 服务重复并重新启动它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T21:27:52.183

弄清楚了。我去了 sql server 配置管理器并右键单击 SQL Server 服务。然后我添加了我的 Windows 管理员帐户来运行该服务，现在它可以工作了。

# list - 打印openCMS中的所有元素navItem列表

> ID：14989932
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:14.960
> 
> 标签：list, opencms

在我的 openCMS 项目中，内容文件夹按年份命名：

*   2010
*   2011
*   2012
*   2013

我用

```
CmsJspNavBuilder navigation = a_cms.getNavigation();
List navItems = navigation.getSiteNavigation(a_rootFolder,99); 
```

创建所有这些文件夹的列表。如何逐项打印整个列表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:45:36.127

我建议使用 taglibs 而不是 java 代码，它更干净。在那里查看示例：

[http://www.opencms-wiki.org/wiki/The_OpenCms_8_Demo_Template_Modules_in_Detail#Navigation_tag](http://www.opencms-wiki.org/wiki/The_OpenCms_8_Demo_Template_Modules_in_Detail#Navigation_tag)

```
 <cms:navigation type="forFolder" startLevel="0" endLevel="1" var="nav"/>
   <c:forEach items="${nav.items}" var="elem">
     <c:set var="currentLevel" value="${elem.navTreeLevel}" />
     […]
     <a href="<cms:link>${elem.resourceName}</cms:link>">
       ${elem.navText}
     </a>
   </c:forEach>
 </cms:navigation> 
```

来自维基：

该标签提供对导航信息的访问。该标记在 /WEB-INF/opencms.tld OpenCms 标记库描述符 (TLD) 中进行了描述。Web 容器（例如 Tomcat）使用 TLD 来验证标签。opencms.tld 描述了自定义 OpenCms 标记库。

导航标签有六个属性：

*   变量（必填）
*   type(required) 可以设置为treeForFolder、forFolder、forSite、forResource、breadCrumb
*   startLevel（可选）读取资源或文件夹上的属性“NavStartLevel”
*   endLevel（可选）
*   资源
*   参数（可选）。

在 JSP 中使用导航标记会调用核心方法 org.opencms.jsp.CmsJspTagNavigation，该方法用于通过 EL 访问 JSP 上的 OpenCms VFS 导航信息。

# python - Python/Django - 无法导入我自己的 models.py

> ID：14989934
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:17.403
> 
> 标签：python, django, import

这是荒唐的。我的文件夹：

```
eVistA
--manage.py
--evista
----__init__.py
----settings.py
----urls.py
----wsgi.py
--fms
----__init__.py
----models.py
----tests.py
----views.py
----features
------__init__.py
------funding.feature
------funding.py 
```

在funding.py我有

```
from fms.models import * 
```

当我运行生菜时，我得到：

```
ImportError: No module named fms.models 
```

我要自己开枪了。

* * *

只是为了笑，我在 features 文件夹中放了一个 models.py 的副本，现在

```
from models import * 
```

结果是

```
ImportError: Settings cannot be imported, because environment variable DJANGO_SE
TTINGS_MODULE is undefined. 
```

在 manage.py 我有

```
if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "evista.settings") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:28:54.487

我似乎在做生意：

```
from fms.models import * 
```

似乎你没有用 Django 运行生菜，你必须运行：

```
python manage.py harvest 
```

从包含`manage.py`当然的顶部文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:00:52.633

尝试

```
from evista.fms.models import * 
```

# ruby-on-rails - Rails 3 使用自定义消息验证是否存在许多列

> ID：14989935
> 
> 赞同：9
> 
> 时间：2013-02-20T21:08:20.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

有没有办法更简洁地指定许多这样的验证？

```
validates :col_a, :presence => {:message => 'col_a cannot be blank'}
validates :col_b, :presence => {:message => 'col_b cannot be blank'}
validates :col_c, :presence => {:message => 'col_c cannot be blank'} 
```

如果必须的话，我会接受一个通用的信息。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-21T10:56:58.900

您可以为验证器提供多个字段名称

```
validates :col_a, :col_b, :col_c, :presence => true 
```

您可以在同一行中指定多个验证器。

```
validates :col_a, :col_b, :col_c, :presence => true, :numericality => true 
```

完整的错误消息将包含字段名称。您不需要添加字段名称前缀。如果要使用自定义消息，则：

```
validates :col_a, :col_b, :col_c, :presence => {:message => "empty value found"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T03:13:01.157

您可以使用

```
validates :col_a, presence: true
validates :col_b, presence: true
validates :col_c, presence: true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:10:55.283

使用 validates_presence_of 助手。

```
validates_presence_of :col_a 
```

编辑

您可以使用 validates_each 对其进行一些清理。api页面上有一个示例。[http://api.rubyonrails.org/classes/ActiveModel/Validations.html](http://api.rubyonrails.org/classes/ActiveModel/Validations.html)

希望有帮助

# vba - VBA：当行为空时退出循环

> ID：14989936
> 
> 赞同：3
> 
> 时间：2013-02-20T21:08:25.193
> 
> 标签：vba, excel

我正在使用以下代码将行导出到单个文本文件：

```
Sub export_Test()

Dim firstRow As Integer, lastRow As Integer, fileName As String
Dim myRow As Integer,  myStr As String

firstRow = 10 
lastRow = 29

For myRow = firstRow To lastRow

     fileName = "C:\mallet\test\" & Cells(myRow, 1) & ".txt"
     Open fileName For Append As #1
     myStr = Cells(myRow, 2).Value
     Print #1, myStr
     Close #1
Next

End Sub 
```

问题是此代码适用于特定数量的行。我想将此代码用于不同的数据样本，因此 excel 文件中的行数会有所不同，并且可能数以千计。我需要将 lastRow 变量设置为无限数，并在遇到空行时退出 For 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:20:29.217

此代码将从第 10 行开始运行，直到在第二列中找到一个空白单元格。请注意，我还稍微缩短了您的代码（尽管它仍然对文件执行相同的写入操作）：

```
Sub export_Test()
    Dim myRow As Long
    myRow = 10
    While Cells(myRow, 2).Value <> ""
        Open "C:\mallet\test\" & Cells(myRow, 1) & ".txt" For Append As #1
        Print #1, Cells(myRow, 2).Value
        Close #1
        myRow = myRow + 1
    Wend
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:13:00.840

这是我的一个项目的代码，它完全符合您的要求 - 以空白值结尾

```
Sub export_Test()

Dim firstRow As Integer, lastRow As Integer, fileName As String
Dim myRow As Integer,  myStr As String

   firstRow = 10 
   myRow = firstRow

   ' Seed initial value
   Cells(myRow, 1).Select

   ' Keep going until a blank cell is found
   While Trim(ActiveCell.Value) <> ""

      fileName = "C:\mallet\test\" & ActiveCell.Value & ".txt"

      Open fileName For Append As #1

      myStr = Cells(myRow, 2).Value
      Print #1, myStr
      Close #1 

      ' Get the next value      
      myRow = myRow + 1
      Cells(myRow, NameCol).Select
   Wend

End Sub 
```

# html - HTML5 标记省略：关于语言的规范说明

> ID：14989937
> 
> 赞同：5
> 
> 时间：2013-02-20T21:08:26.800
> 
> 标签：html

标记省略的 HTML5 规范 ( [http://www.w3.org/TR/html51/syntax.html#syntax-tag-omission](http://www.w3.org/TR/html51/syntax.html#syntax-tag-omission) ) 以以下两个语句开头（强调我的）：

*   **如果 html 元素中的第一件事** 不是注释，则可以省略 html 元素的开始标记。
*   如果 html 元素后面没有 **紧跟**注释，则可以省略 html 元素的结束标记。

那些声明读起来类似，但不一样，我想知道是否有人可以澄清它们的含义。

以下情况似乎很明确 - 您无法删除开始或结束标签：

```
<html><!-- start --> ... </html><!-- end --> 
```

但是当空白被引入混合时呢？`html`在以下情况下可以消除开始标记吗？

```
<html>
   <!-- comment after whitespace -->
   ... 
```

在类似的情况下可以消除结束标签吗？

```
 ...
</html>
<!-- comment after whitespace --> 
```

其他一些规则特别提到了空白字符，这让我相信应该考虑它们。大多数规则都说“……紧跟……”，这与列出的第一个要点不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:50:21.683

在 html 中，标签之间的空格无关紧要。`<html> <head>`和`<html><head>`浏览器一样。在内容中（例如，span/p 标签内的单词之间）它由浏览器呈现，但是当您想在元素之间使用空间（作为设计资源）时，您应该使用  。

因此，正如我所看到的，**紧随其后的**并不是“下一个字符”，而是“结束标签应该在的位置之后的第一件事，无论它们之间有多少空格。

`</html>`然后，在这两种情况下删除 html 标记都会使 html 无效，因为无论该位置与评论之间有多少空格。

编辑：我认为他们试图用另一个词来表达同样的事情，避免重复，但最终被混淆了；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:54:03.713

这里的重要因素是短语**first thing inside**和**紧随其后**的是谈论*节点*，即 DOM，而不是*标签*或其他标记，所以它所做的区分是关于节点是子节点（里面的第一件事）还是后续节点兄弟姐妹（紧随其后）。

就空间而言：

> 如果 html 元素中的第一件事不是注释，则可以省略 html 元素的开始标记。

html 元素中的第一件事不能是空格字符，因为在解析器算法中，空格字符标记被丢弃并且不会添加到 DOM 中。

> 如果 html 元素后面没有紧跟注释，则可以省略 html 元素的结束标记。

空格字符，无论它们出现在`</html>`标签之前还是之后，最终都会出现在 html 元素内（实际上也是在 body 元素内），因此无论是否有空格，注释都将紧跟在 html 元素之后在标记之间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-01T21:21:09.067

关于标记省略的规则有些误导，因为在大多数情况下，它们实际上并没有说明*何时*可以省略标记，而是在省略标记时应该如何解释它们。以以下文档为例：

```
<!DOCTYPE html><!-- A comment --><title>A title</title> 
```

这是一个有效的 HTML5：您可以自己通过[W3C 验证器](https://validator.w3.org/)运行它。但是[标签省略规则](https://www.w3.org/TR/html5/syntax.html#optional-tags)明确指出

> 如果元素内的第一件事不是注释`html`，则可以省略[a]n元素的开始标记。`html`

我们如何调和这一点？答案是这些是消歧规则。因为如果`html`元素内的第一件事是注释，则元素的开始标签可能不会被省略，所以我们在解析时可以自由地假设注释*不是*`html`元素内的第一件事。同样，标签省略规则规定

> `body`如果元素为空，或者元素内的第一件事`body`不是空格字符或注释 [... ]

所以我们可以自由地假设注释*也不*`body`是元素内部的第一件事。所以实际上这个文档可以明确地解析为等价于

```
<!DOCTYPE html><!-- A comment --><html><head><title>A title</title></head><body></body></html> 
```

HTML5 的解析器算法指定如果我们处于[before html](https://www.w3.org/TR/html5/syntax.html#the-before-html-insertion-mode)插入模式，这是解析器在看到之后转换到的状态`<!DOCTYPE html>`，我们看到

> 一个字符标记，它是 U+0009 CHARACTER TABULATION、"LF" (U+000A)、"FF" (U+000C)、"CR" (U+000D) 或 U+0020 SPACE 之一

那么我们要“忽略令牌”。另一方面，如果我们看到一个评论标记，那么我们将

> 插入注释作为 Document 对象的最后一个子对象。

直到我们看到其他类型的标签，我们才会发出一个`html`元素。所以我们应该期望这种行为不会受到空格的影响，实际上 Firefox 54 和 Chrome 60 都会解释文档

```
<!DOCTYPE html>
         <!-- A comment -->
    <title>A title</title> 
```

等同于

```
<!DOCTYPE html><!-- A comment --><title>A title</title> 
```

也就是说，他们都被视为

```
<!DOCTYPE html><!-- A comment --><html><head><title>A title</title></head><body></body></html> 
```

# php - 创建模板类：通过更改模板文件目录丢失图像和样式

> ID：14989941
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:33.267
> 
> 标签：php, html, template-engine

我正在为已经等待的模板编写模板引擎。

现在，在您说这是多么重要之前。我得到报酬，但我不知道他们为什么坚持拥有自己的一个（可能是因为模板已经完成并且他们已经标记了它）。

他们已经像这样标记了模板：

索引.html

```
<html>
<head><title> [title] </title></head>
<link href="css/style.css" rel="stylesheet" type="text/css" />

<body>
<img class="header" src="images/header.jpg" />
[contents]
</body>

</html> 
```

我正在使用一种非常简单的查找和替换方法，并且效果很好：

索引.php

```
$e = new tengine ;
$e->load_template('index.html');// basically file_get_contents 

$e->replace('title' , 'zzzzzzz'); 

$e->replace( 'contents' , 'xxxx');

$e->show(); 
```

当它们在同一目录中时，它可以正常工作。

现在我想将我的资产移动到另一个名为模板的目录。

所以我必须这样称呼我的模板：

```
index.php

    $e->load_template('template/index.html'); 
```

现在呈现模板的页面 (index.php) 与模板文件 (index.html) 不在同一目录中。

它仍然有效，但是我丢失了模板页面中的所有样式和图像以及 .js，因为它们位于模板目录中，并且我将页面呈现在它们上方的一个目录中。

有什么解决方法吗？请记住，模板已经完成，创建某种 GLOBAL`base_url`类并更改所有图像和 .js/.css 链接是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:56:04.467

我还建议创建一个 .htaccess 文件，重写对“templates/”子目录的每个请求，除非请求的文件存在（因此 index.php 或 webroot 中的其他文件仍然可以正常服务）：

为 apache2 启用“mod_rewrite”。在外壳类型：

```
a2enmod rewrite 
```

将名为“.htaccess”的文件放在您的 Web 应用程序的根目录中，其内容如下：

```
RewriteEngine On

# If the requested file does not exist redirect it to the "template/" subdirectory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ template/$1 [L] 
```

现在，如果您请求“css/style.css”，“RewriteCond”语句将注意到没有“css/style.css”并将请求重写为“template/css/style.css”。但是，如果您请求“index.php”，重写条件会注意到有一个具有这样名称的文件并像往常一样提供它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:20:29.253

只需使用媒体文件的绝对路径而不是相对路径。所以，而不是使用类似的东西

```
 <img src='../assets/img/temp.png' /> 
```

或者

采用

```
 <img src='/assets/img/temp.png' /> 
```

和

然后，您的处理发生在哪里、模板所在的位置、文件从哪个服务器目录调用等都不再重要。您可以将它们转移到您心中的内容，这不会有任何区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T06:12:50.513

您可以使用 .htaccess 使用重写引擎

例如，为 css 文件夹创建一个重写规则并将其寻址到[http://www.mysite.com/css/](http://www.mysite.com/css/)。

使用重写模块，我相信您可以以某种方式处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T21:18:15.750

目录名（**文件**）呢。'/example.php';

使用 dirname 文件，您就在文件所在的位置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T21:58:49.277

这是因为'css'目录在模板目录中，浏览器无法访问。将“css”目录放在视图目录中或使用更准确的地址。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T09:20:46.220

如果可以选择修改模板的 html 头，则可以使用**base**标记来更改文档中所有相对 URL 的基本 URL：

```
<head>
<base href="http://yourdomain/template/">
...
</head> 
```

请记住在使用任何相对路径之前将其插入顶部。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-27T10:17:04.033

在 HTML 中有一个简单的 hack 可以用来做你需要的事情。黑客是通过基本网址，你必须添加额外的标签链接：

```
<head>
      <base href="domin.com/directory">
</head> 
```

请注意，使用基本 html 标记的所有内容都有其优点和缺点

临：

*   不使用 .htaccess

*   不使用复制文件

*   文档的静态表示

缺点：

*   它将所有href标签链接到提供的基本href，包括锚、链接或任何使用href的东西

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-01T10:21:35.337

我建议，资产包含也应该由您的模板引擎完成。

所以不要写

```
<link href="css/style.css" rel="stylesheet" type="text/css" /> 
```

在你的模板中，做这样的事情

```
[stylesheet css/style.css] 
```

然后在您的引擎中使用您预先添加的资产路径创建适当的 HTML。或者将相对目录中的 css 文件复制到根目录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-01T06:48:14.290

我认为模板的链接不是问题，因为它没有从模板目录访问 .css/.js 。这里重要的是呈现它们的文件的位置，因为链接将在呈现后被读取。所以只要 index.php 和以前在同一个目录下，模板中的链接应该仍然可以正常工作。

# c# - 向表单动态添加控件时，只会显示一个

> ID：14989943
> 
> 赞同：6
> 
> 时间：2013-02-20T21:08:40.930
> 
> 标签：c#, winforms

我在运行时动态添加两个控件，但是只显示首先创建的控件。

这是代码：

```
Label tempLab = new Label();
tempLab.text = "Test Label";
MyControl.Controls.Add(tempLab);
tempLab.Location = new Point(5,5);

Button tempBut = newButton()
tempBut.text = "Test Button";
MyControl.Controls.Add(tempBut);
tempBut.Location = new Point(20,20); 
```

*是不是 copypasta 所以忽略带有大写的语法错误。* 有任何想法吗 ？

它们被添加到组框。我已经尝试将它们添加到面板或只是表单中，并且发生了同样的问题。我不需要事件处理程序，所以请不要引用该要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T21:21:48.850

我很快尝试将您的代码粘贴到 Windows 窗体构造函数中。它运行正常，但由于其大小，标签与按钮略有重叠。您可能想要自动调整它：

```
Label tempLab = new Label();
tempLab.Text = "Test Label";
tempLab.AutoSize = true;
Controls.Add(tempLab);
tempLab.Location = new Point(5,5);

Button tempBut = new Button();
tempBut.Text = "Test Button";
Controls.Add(tempBut);
tempBut.Location = new Point(20,20); 
```

哦，顺便说一句。您提到您将 MyControl 用作面板或 GroupBox。请确保您还将 MyControl 添加到您的 Controls 集合中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:43:31.517

看来该位置没有尺寸，它变成一条平线，可以说是不可见的..这个`tempBut.Location = new Point(20,20);`尝试改为这个

```
this.tempBut.Location = new System.Drawing.Point(20,20); 
this.tempBut.Size = new System.Drawing.Size(30, 15); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:04:57.613

希望这可以帮助。我正在将一组 MyTextBox 添加到面板中。

```
 Point prevlocation = new Point(0,0);
         foreach (object key in keys)  //List of Objects or which make new controls
         {

            MyTextBoxControlArray[i] = new MyTextBoxUserControl(key);   //User control but could be any control like textbox etc
            MyTextBoxControlArray[i].Width = this.panel1.Width - 50;
            MyTextBoxControlArray[i].AutoSize = true;
            MyTextBoxControlArray[i].InfoLoad += new MyTextBoxUserControl.InfoLoadEventHandler(Form1_InfoLoad);

            if (i == 0)
            {
                //first control
                prevlocation.Y += 3;
                prevlocation.X += 3;
                MyTextBoxControlArray[i].Location = prevlocation;
            }
            else
            {
            //adjsuting height and width
                MyTextBoxControlArray[i].Location = new System.Drawing.Point(
                             prevlocation.X,
                             prevlocation.Y + MyTextBoxControlArray[i].Height+3);
            }

            prevlocation = MyTextBoxControlArray[i].Location;

            i++;
        }

        this.panel1.Controls.AddRange(MyTextBoxControlArray); //in panel i can add a array of controls , but this could be done one by one 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T05:59:40.243

```
 string sql3 = "SELECT COUNT(*) from systeminfo";//counting no of element
        n = dm.countelement(sql3);
        int i, c = 1;
        int m = 100;

        for (i = 0; i < n; i++, c++)
        {
            sql3 = " SELECT Company_name FROM systeminfo LIMIT " + (i + 1) + " OFFSET " + i + "";
            string cname = dm.getlang(sql3);

            PictureBox pb = new PictureBox();
            Label lb = new Label();
           pb.Location = new System.Drawing.Point(m, 30 + (30 * i));
           lb.Location = new System.Drawing.Point(m-30, 30 + ((30 * i)-30));
           pb.Name = "p" + c;
           lb.Name = "l" + c;
           lb.Size = new System.Drawing.Size(100, 20);
           pb.Size = new System.Drawing.Size(30, 30);
           lb.Text = cname;
           lb.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
           lb.BackColor = Color.Transparent;
           pb.ImageLocation = @"..\image\image.jpg";
           pb.MouseDown += new         System.Windows.Forms.MouseEventHandler(this.picmap1_MouseDown_1);
           pb.MouseMove += new System.Windows.Forms.MouseEventHandler(this.picmap1_MouseMove_1);
           pb.MouseUp += new System.Windows.Forms.MouseEventHandler(this.picmap1_MouseUp_1);

            picmap1.Controls.Add(pb);
            picmap1.Controls.Add(lb);
            c++;

        } 
```

private void picmap1_MouseMove_1(object sender, MouseEventArgs e) { var c = sender as PictureBox;

```
 if (!_dragging || null == c) return;
        c.Top = e.Y + c.Top - _yPos;
        c.Left = e.X + c.Left - _xPos;
        foreach (Control d in picmap1.Controls)
            if (d is Label)
            {

                d.Top = e.Y + d.Top - _yPos;
                d.Left = e.X + d.Left - _xPos;

            }
    }

    private void picmap1_MouseUp_1(object sender, MouseEventArgs e)
    {
        var c = sender as PictureBox;
        if (null == c) return;
        _dragging = false;
    }

    private void picmap1_MouseDown_1(object sender, MouseEventArgs e)
    {

        if (e.Button != MouseButtons.Left) return;
        _dragging = true;
        _xPos = e.X;
        _yPos = e.Y;
        foreach (Control d in picmap1.Controls)
            if (d is Label)
            {

                _xPos = e.X;
                _yPos = e.Y;

            }
    } 
```

这是通过鼠标拖动移动的动态添加控件的示例

# php - 更新所有代码点火器

> ID：14989944
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:42.360
> 
> 标签：php, codeigniter

我有一个在 codeigniter 中开发的网站，我想制作一个编辑表格的功能，但我有两个页面用不同的字段更新表格。这是我在模型中的功能：

```
public function editHotel($service_id) {
         $hotel_id = $this->getHotelByServiceId($service_id);
         $hotel = array(
              'rating_id'=>$this->input->post('rating'),
              'treatment_id'=>$this->input->post('treatment'),
              'nation_id'=>$this->input->post('nation'),
              'region_id'=>$this->input->post('region'),
              'city_id'=>$this->input->post('city'),
              'area_id'=>$this->input->post('area'),
              'address'=>$this->input->post('address'),
              'phone'=>$this->input->post('phone'),
              'fax'=>$this->input->post('fax'),
              'email'=>$this->input->post('email'),
              'site'=>$this->input->post('site'),
              'description_it'=>$this->input->post('description_it'),
              'description_en'=>$this->input->post('description_en'),
              'latitudine_google'=>$this->input->post('latitudine_google'),
              'longitudine_google'=>$this->input->post('longitudine_google'),
              'modified'=> date('Y-m-d H:i:s'),
        );
        $this->db->where('service_id', $service_id);
        $this->db->update('hotel',$hotel);
    } 
```

在这个函数中，我更新了我的所有表格，但我有一个只有一些值的页面，我只想像这样更新：

```
public function editDescriptionHotel($service_id) {
             $hotel_id = $this->getHotelByServiceId($service_id);
             $hotel = array(
                  'description_it'=>$this->input->post('description_it'),
                  'description_en'=>$this->input->post('description_en'),
                  'modified'=> date('Y-m-d H:i:s'),
            );
            $this->db->where('service_id', $service_id);
            $this->db->update('hotel',$hotel);
        } 
```

我还有其他页面可以更新表格的某些值。如果我在所有页面中使用函数“editHotel”如果我没有输入代码点火器将 0 插入表的字段是否可以只使用第一个函数“editHotel”并只更新我发布的字段？我只想在所有页面中使用一个函数，它不是更新所有字段，而是只更新我在页面中拥有的字段。有可能吗？我不希望更新表格的每个页面都编写表格的不同函数更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:24:48.267

好吧，如果您使输入字段与表格列具有相同的名称，那很容易：

```
public function updateHotels($service_id) 
{
   $hotel_id = $this->getHotelByServiceId($service_id);
   $fields = array();

   foreach($this->input->post() as $k => $v){
    if($k != 'submit'){   //or anything you always want to esclude
      $fields[$k] = $v;
    }
   }

   $fields['modified'] = date('Y-m-d H:i:s');

   $this->db->where('service_id', $service_id);
   $this->db->update('hotel', $fields);
} 
```

为了获得更好的控制和更好的可重用性，您可以将可逃逸索引数组（那些不想匹配或您不想匹配列名的索引）作为参数传递。您可以更进一步，列出您想要添加的*额外字段：*

```
$exclude = array('submit', 'other_field');
$extra = array('modified' => date('Y-m-d H:i:s'));

public function updateHotels($service_id, $exclude, $extra) 
    {
       $hotel_id = $this->getHotelByServiceId($service_id);
       $fields = array();

       foreach($this->input->post() as $k => $v){
        if(!in_array($k, $exclude){
          $fields[$k] = $v;
        }
       }

       $columns = array_merge($fields, $extra);

       $this->db->where('service_id', $service_id);
       $this->db->update('hotel', $columns);
    } 
```

# ruby-on-rails - 如果您使用 ActiveAdmin，您的 gem 中是否需要 sass

> ID：14989945
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:46.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用 activeadmin gem，当您执行 bundle install 时，它应该负责安装 sass。当我进行捆绑表演时，我可以看到 sass(3.2.5) 存在。但是，当我从我的 :assets 组中删除 sass 时，我的 rake 命令未能给出异常：

```
rake aborted!
cannot load such file -- sass-rails
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activeadmin-0.5.1/lib/active_admin/sass/helpers.rb:3:in `<top (required)>'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activeadmin-0.5.1/lib/active_admin.rb:11:in `<top (required)>'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activeadmin-0.5.1/lib/activeadmin.rb:1:in `require'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/activeadmin-0.5.1/lib/activeadmin.rb:1:in `<top (required)>'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `require'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `each'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `block in require'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `each'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `require'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler.rb:128:in `require'
/Users/kc025858/webApp/data-source-onboarding/config/application.rb:10:in `<top (required)>'
/Users/kc025858/webApp/data-source-onboarding/Rakefile:4:in `require'
/Users/kc025858/webApp/data-source-onboarding/Rakefile:4:in `<top (required)>'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/rake_module.rb:25:in `load'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:604:in `raw_load_rakefile'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:89:in `block in load_rakefile'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:88:in `load_rakefile'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:72:in `block in run'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/lib/rake/application.rb:70:in `run'
/Users/kc025858/webApp/data-source-onboarding/vendor/cache/ruby/1.9.1/gems/rake-0.9.6/bin/rake:37:in `<top (required)>'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:in `load'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:in `<main>'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/Users/kc025858/.rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main> 
```

当您已经包含 ActiveAdmin 时，为什么还需要将 sass 包含到您的 gemfile 中？

如果您看到dependency.txt，您会发现sass 是activeadmin 的一部分。

```
activeadmin (0.5.1)
      arbre (>= 1.0.1)
      bourbon (>= 1.0.0)
      devise (>= 1.1.2)
      fastercsv
      formtastic (>= 2.0.0)
      inherited_resources (>= 1.3.1)
      jquery-rails (>= 1.0.0)
      kaminari (>= 0.13.0)
      meta_search (>= 0.9.2)
      rails (>= 3.0.0)
      sass (>= 3.1.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:59:35.683

不知道为什么，但 ActiveAdmin 的网站在其文档中明确指出，您需要在 gemfile 中包含 sass-rails：

[`If you are using Rails >= 3.1, you must also include a beta version of MetaSearch and sass-rails`](http://activeadmin.info/documentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:51:08.830

ActiveAdmin 在其依赖列表中有 sass 但没有 sass-rails，这是在 rails 资产管道中添加 sass 适配器所必需的。

# php - sql查询的变量结果未显示

> ID：14989946
> 
> 赞同：0
> 
> 时间：2013-02-20T21:08:46.047
> 
> 标签：php, sql

在这种情况下有什么问题吗？结果没有显示。也许我的语法错误？

```
 // fetch the latest tweet
$lastTweet = '';
$q2 = "SELECT tweet FROM timel ORDER BY id DESC LIMIT 1";
list($lastTweet) = $conn->get_results($q2);

if(!$lastTweet){  
$lastTweet = "You don't have any tweets yet!";
}
var_dump($lastTweet); 
```

这在html正文上：

```
<span class="latest"><strong>Latest: </strong><span id="lastTweet"><?.=$lastTweet?></span></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:46:58.197

如果您将第一行更改为

```
$lastTweet = array(); 
```

而你的第三行

```
$lastTweet = $conn->get_results($q2); 
```

然后你就可以使用

```
<?php var_dump($lastTweet); ?> 
```

但是在您的情况下 lastTweet 包含一串文本，因此您需要使用 echo 来打印它的内容。

```
<?php echo $lastTweet ?> 
```

注意：我不确定您的项目详细信息，但我猜您还需要获取推文的日期，可能是 id 和 user_id，如果是这种情况，您可能希望将 lastTweet 设为空数组（）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:17:51.787

用这个：

```
<span class="latest"><strong>Latest: </strong><span id="lastTweet">
<?php echo $lastTweet; ?></span>    </span> 
```

萨卢多斯 ;)

# java - 使用 DATE 输入调用 Oracle 存储过程不会设置 HH:MM:SS

> ID：14989947
> 
> 赞同：1
> 
> 时间：2013-02-20T21:08:48.703
> 
> 标签：java, oracle, jakarta-ee, stored-procedures, jdbc

我正在尝试使用 Spring 'CallableStatementCreator' 在 Java EE Web 应用程序 (java) 中调用 Oracle 存储过程。存储过程的输入之一是 DATE。

我的 attributeValue 是一个 java.util.date，它正确地保存了 DD-MM-YYYY 和 HH:MM:SS。使用以下代码时：

```
callableStmt.setTime(6, new java.sql.Time(attributeValue.getTime())); 
```

结果是数据库中的列（存储过程最终写入数据库）设置为 1970-01-01，并且我将正确的 HH:MM:SS 作为输入传递。这适用于我的应用程序的早期版本（我使用 JDBC lib 10.xxx）

如果我使用

```
callableStmt.setDate(6, new java.sql.Date(attributeValue.getTime())); 
```

DD-MM-YYYY 设置正确，但小时设置为 00:00:00。

那么，调用属性并将属性传递给这个存储过程的正确方法是什么？另外，有什么调试技巧吗？

Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64 位生产 Oracle JDBC 库：ojdbc6-11.2.0.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:10:33.720

尝试使用[`Timestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)：

```
callableStmt.setTimestamp(6, new java.sql.Timestamp(attributeValue.getTime())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:05:47.620

使用

```
callableStmt.setTimestamp(6, new java.sql.Timestamp(attributeValue.getTime())); 
```

在我的存储过程重载的情况下不起作用，其中我的 3 个函数之间的唯一区别是最后一个参数：VARCHAR2、DATE 或 NUMBER。使用此代码时，我的存储过程执行失败，因为 Oracle 找不到要使用的方法。（可能是因为 JDBC lib 没有将时间戳映射到 DATE 列，如此[处](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-faq-090281.html#08_01)所述）

它起作用的唯一方法是：

```
callableStmt.setObject(6, new java.sql.Timestamp(attributeValue.getTime()), OracleTypes.DATE); 
```

这似乎强制我的时间戳到 Oracle 存储过程中的 DATE 列之间的映射，同时保留 DD-MM-YYYY 和 HH:MM:SS。

# ruby-on-rails - Rails：使用 link_to 调用控制器操作

> ID：14989950
> 
> 赞同：0
> 
> 时间：2013-02-20T21:09:01.433
> 
> 标签：ruby-on-rails

我有一个 link_to，我想在呈现页面之前调用一个后台操作。我想我可以通过调用link_to中的控制器和动作来做到这一点，但它似乎没有做任何事情（我在控制器中放置了一个调试日志以查看是否正在调用该动作，并且没有任何内容被打印到控制台）。

**看法：**

```
 <%= link_to 'Back', project_step_path(@project, @steps.count-1), `{:controller=>:steps, :action=> 'destroyNewImages'}, :class => "btn btn-small" %> 
```

**控制器：**

```
 # Destroy new images
  def destroyNewImages
    logger.debug("-------testdestroy------");
  end 
```

如何从 link_to 中调用控制器操作？

# pdf - 如何在 pdf 中调整位图图像的大小/重新采样并维护矢量叠加

> ID：14989959
> 
> 赞同：3
> 
> 时间：2013-02-20T21:09:37.573
> 
> 标签：pdf, ghostscript, vector-graphics, inkscape, resampling

我的工作流程通常如下：

我使用带有矢量元素（文本、线条等）的 inkscape 对位图图像进行注释。我从 inkscape 导出 pdf 并将其包含在我的 pdflatex 源（包括图形...）中。

不知何故，我不想在嵌入到 inkscape 之前缩小位图以保持 svg 文件的通用性。另一方面，由于图像的全（荒谬）分辨率，pdflatex 之后生成的 pdf 通常是不必要的巨大。不幸的是，inkscape 的 pdf 导出不支持立即对位图进行下采样（然而，这经常被讨论）。所以我在运行pdflatex之前尝试使用ghostscript来减少inkscape中的pdf。但是，我所有的矢量注释都是在这个过程中呈现的，这是我想要避免的，也是这个问题的意义所在。

我使用了这样的ghostscript（发现它有不同的风格，但没有任何效果）：

```
gs  -dNOPAUSE -dBATCH -dSAFER \
-sDEVICE=pdfwrite \
-dCompatibilityLevel=1.3 \
-dPDFSETTINGS=/ebook \
-dEmbedAllFonts=true \
-dSubsetFonts=true \
-dColorImageDownsampleType=/Bicubic \
-dColorImageResolution=200 \
-dGrayImageDownsampleType=/Bicubic \
-dGrayImageResolution=400 \
-dMonoImageDownsampleType=/Bicubic \
-dMonoImageResolution=1200 \
-sOutputFile=out.pdf \
 in.pdf 
```

所以我正在寻找一些帮助/想法来让我的图像 pdf 更小，但仍然使用矢量格式的矢量艺术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:52:05.047

1) 不要使用 -dPDFSETTINGS 除非你*非常*确定它会做什么。在你的情况下，真的不要使用它。

2) 200 ,400 和 1200 (!) dpi 仍然是非常高的分辨率，您可以尝试更低的分辨率。

3) 你没有设置-dDownsampleColorImages、-dDownsampleGrayImages 或-dDownsampleMonoImages。因此，对下采样类型和分辨率的更改实际上不会做任何事情。（我知道这很荒谬，将我们必须模仿的设置归咎于 Adob​​e ......）

如果您可以提供示例文件，我可以对此进行测试，但我怀疑“3”是您的问题。您可能还想查看 ColorImageDownsampleThreshold（和 Gray/Mono）开关。

# sql - 是否可以在日期时间列中仅添加日期而不附加 00:00.000

> ID：14989963
> 
> 赞同：0
> 
> 时间：2013-02-20T21:09:56.537
> 
> 标签：sql, sql-server-2008

我的表由一个日期时间列组成，我想知道是否可以在列中添加日期而不在时间部分附加零。目前我使用 `CONVERT(date, getdate())`并尝试插入，但它在列中以 2013-01-20 00:00:00.000 的形式出现。如果这是一个非常基本的问题，请原谅我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:11:34.257

是的。使用`DATE`数据类型而不是`DATETIME`.

但是，不要担心 0 是否不存在 - 这不是 SQL Server 在内部存储它的方式，而是 Management Studio 向您呈现它的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:12:06.657

如果您使用的是 SQL Server，则可以使用 Date 类型而不是 DateTime。否则，时间部分将出现零。当然，如果需要，您可以选择不在应用程序中显示时间部分。

# javascript - 使用 JQuery 获取 html 文档并将其解析为 DOM 树

> ID：14989964
> 
> 赞同：1
> 
> 时间：2013-02-20T21:10:01.810
> 
> 标签：javascript, jquery, dom

所以基本上我正在尝试构建我自己版本的[GitHub 树滑块](https://github.com/blog/760-the-tree-slider)。相关的 Javascript/JQuery 代码是：

```
// handles clicking a link to move through the tree
$('#slider a').click(function() {
    history.pushState({ path: this.path }, '', this.href) // change the URL in the browser using HTML5 history module
    $.get(this.href, function(data) {
        $('#slider').slideTo(data) // handle the page transition, preventing full page reloads
    })
    return false
})

// binds hitting the back button in the browser to prevent full page reloads
$(window).bind('popstate', function() {
    $('#slider').slideTo(location.pathname)
} 
```

好的，希望这是可以理解的。现在这是我对这里发生的事情的解释，然后是我的问题/问题：

在树中导航时 GET 请求的回调函数是 slideTo 方法，并且 HTML 字符串作为参数传入该函数。我假设 slideTo 是在脚本其他地方或自定义库中定义的函数，因为我在 JQuery 文档中找不到它。因此，出于我的目的，我正在尝试构建我自己的这个函数版本。但是传递给这个函数的参数“data”只是从 GET 请求返回的 HTML 字符串。但是，这不仅仅是我可以附加到文档中的 div 的 HTML 片段，因为如果我执行相同的 GET 请求（例如，通过在 Web 浏览器中输入 url），我希望看到整个网页并且不只是一块。

因此，在我定义的这个回调函数中，我需要将“数据”参数解析为 DOM，以便提取相关节点，然后执行动画转换。但是，这对我来说没有意义。这通常看起来是个坏主意。客户端必须解析整个 HTML 字符串才能访问 DOM 的一部分是没有意义的。GitHub 声称这种方法比重新加载整页更快。但是，如果我的解释是正确的，客户端仍然必须解析完整的 HTML 字符串，无论是通过单击（并运行回调函数）浏览树还是通过在浏览器中键入新 URL 等进行全页面加载。所以我要么将返回的 HTML 字符串解析为 DOM，要么只获取 HTML 文档的一部分。

有没有办法简单地将获取的文档加载到 Javascript 或 JQuery DOM 对象中，以便我可以轻松地操作它？甚至更好的是，有没有办法只获取具有任意 id 的元素而不做一些疯狂的服务器端事情（我已经尝试过，但最终代码太意大利面条并且难以维护）？

我也已经尝试过简单地将 data 参数解析为 JQuery 对象，但这涉及一个迂回的解决方案，它似乎只工作了一半，使用 javascript 方法去除不需要的东西的 HTML，比如 doctype 声明和 head 标签：

```
var d = document.createElement('html');
d.innerHTML = data;
body = div.getElementsByTagName("body")[0].innerHTML;

var newDOM = $(body);
// finally I have a JQuery DOM context that I can use,
// but for some reason it doesn't always seem to work quite right 
```

你会如何处理这个问题？当我自己编写这段代码并尝试让它自己工作时，我觉得无论我做什么，我都在做一些非常低效和骇人听闻的事情。

有没有办法通过 GET 请求轻松返回 JQuery DOM 对象？或者更好的是，只返回通过 GET 请求获取的文档的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:29:12.383

把它包起来；jQuery 会解析它。

```
$(data) // in your callback 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:47:06.947

想象一下，您想解析`<p>`普通 HTML 网页中的标签。你可能会使用类似的东西：

```
var p = $('<p>'); 
```

正确的？因此，您必须使用相同的方法来解析整个 HTML 文档，然后浏览 DOM 树以获取所需的特定元素。因此，您只需要说：

```
$.get(this.href, function(data) {
    var html = $(data);

    // (...) Navigating through the DOM tree

    $('#slider').slideTo( HTMLportion );
}); 
```

注意，它也适用于 XML 文档，所以如果你需要通过 AJAX 从服务器下载一个 XML 文档，解析内部信息并显示在客户端，方法完全一样，好吗？

我希望它可以帮助你:)

**PS**：永远不要忘记在每个 JavaScript 语句的末尾加上分号。可能，如果您不放置它们，引擎会工作，但最好是安全并始终编写它们！

# analytics - Sitecore Analytics 截断

> ID：14989967
> 
> 赞同：0
> 
> 时间：2013-02-20T21:10:10.873
> 
> 标签：analytics, sitecore, truncate

我们已经为我们未来的网站实施了 Sitecore。我们的公司网站即将上线。我们在这个网站上进行了一些测试，以确保一切正常。由于这个原因，有一些数据被写入了 Analytics 数据库。

现在我们正在寻求摆脱这些数据并重新开始。我们想走从表中截断数据的路线。有没有办法做到这一点？我知道这可以通过 OMS 而不是 DMS 的内置功能来完成。此外，哪些表可以安全截断。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:07:56.573

Personally, I would start fresh by attaching an empty DMS database. You will need to redeploy any goals, page events, campaigns, etc., but it's a much safer option than truncating the tables.

Another thing to consider is that most (if not all) of the reports in the DMS are setup to accept a start and end date. Simply running your reports starting from the launch date may be all you need.

If you decide to truncate the tables, I would focus on any tables that have a Foreign Key relationship to the Visits table (the DMS ships with a Database Diagram that's really handy for stuff like this). Going in order that would be the `PageEvents`, `Pages`, and `Profiles` tables. Then it should be safe to clear out the `Visits` table.

# hibernate - 休眠：如果表中还没有，则保存

> ID：14989969
> 
> 赞同：0
> 
> 时间：2013-02-20T21:10:15.227
> 
> 标签：hibernate

我有一张有几列的桌子。主键是`id`，自动生成的。

考虑这段代码，它可以多次执行：

```
 session.save(x); 
```

该对象`x`具有相同的内容，假设我们运行程序两次而没有任何更改。结果，该对象在表中以不同`id`的 s 出现两次。

如何修改此代码以避免重复插入？

我考虑`session.get`过使用 ，但这需要`id`.

`x`我还考虑从除之外的所有字段设置标准`id`，但这很麻烦：有一天我会添加另一列而忘记将其添加到标准中。有没有好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:26:23.713

如果你做一个

```
YourObject cachedX = (YourObject)session.merge(x); 
```

cachedX 现在将具有生成的 ID。显然，您必须保留它，并且您很可能仍需要提出重复规则。

# c# - 我可以使用哪种打印机通过 .Net 应用程序进行按需工业打印？

> ID：14989971
> 
> 赞同：2
> 
> 时间：2013-02-20T21:10:20.867
> 
> 标签：c#, .net, barcode-printing

我正在为一家塑料厂开发一个软件系统。我的目标是拥有10台条形码标签打印机，每台塑料挤出机一台打印机。我不希望这些打印机非常智能。每台打印机都有一个 ID (1-10)，当按下打印机上的打印按钮时，信号会通过网络发送到 .Net 应用程序，该应用程序将监听并因此根据 ID 发回标签以打印打印机的。

这不是我通常会在这里问的那种问题，但我找不到适合我需要的打印机……或者更准确地说，我不知道在搜索时使用哪种术语。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:41:05.810

我不知道有任何条码打印机具有触发此类事件的按钮。

我建议使用一系列 USB 按钮并以编程方式将它们映射到特定的打印机。

[http://www.thegoodlifeoncampus.com/Dream-Cheeky-Big-Red-Button-USB-gadget-p/dc1014.htm](http://www.thegoodlifeoncampus.com/Dream-Cheeky-Big-Red-Button-USB-gadget-p/dc1014.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:17:33.367

据我所知，您将制作一个按钮并将其粘在打印机上，然后将其连接到某些东西上。

上次我在这个领域工作时，我们只使用了产品跟踪，当它检测到产品接近贴标站时，它会打印标签以便准备就绪。很多东西已经到位了。然后一些可怜的 git 可以在那里站几个小时，只是在它经过时把它们挂在上面。

# google-fusion-tables - Google Fusion Tables：过滤文本列时，如何询问“包含 A”和“包含 B”（OR 和 NOT 同上）？

> ID：14989972
> 
> 赞同：0
> 
> 时间：2013-02-20T21:10:22.583
> 
> 标签：google-fusion-tables

初学者的问题：我正在创建一个融合表，其中一列是标签列，例如：

1.  纽约、伦敦、巴黎
2.  柏林、东京
3.  纽约、东京
4.  巴黎、罗马、东京
5.  巴黎、柏林、伦敦

过滤器下拉菜单（蓝色）为我提供了上述 5 个示例的复选框，但也允许我输入特定文本作为查询。我必须如何继续输入相当于：

*   巴黎和伦敦（结果 1 和 5）
*   柏林或东京（结果 2、3、4 和 5）
*   巴黎而不是纽约（结果 4 和 5）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:59:08.857

您可以使用 WHERE IN ('New York', 'London', 'Paris')

您的 IN (xxx,xxx,xxx) 将取决于城市列表。IN 运算符意味着 OR 条件。不确定 AND 条件在您的情况下如何工作。请参阅：[https](https://developers.google.com/fusiontables/docs/v1/sql-reference#Select) ://developers.google.com/fusiontables/docs/v1/sql-reference#Select并搜索 <column_condition>

# asp.net - 从用户控制页面触发 controlID

> ID：14989981
> 
> 赞同：1
> 
> 时间：2013-02-20T21:10:57.013
> 
> 标签：asp.net, .net, vb.net

我有下面的代码，看起来应该可以工作。但是，引用controlID为“gvSearch”的控件的触发器实际上是用户控件页面内的gridview。

如何访问该网格视图以便可以将其用作触发器？

谢谢！

```
<asp:UpdatePanel ID="pnlSearch" ChildrenAsTriggers="true" runat="server" >
      <Triggers>
          <asp:AsyncPostBackTrigger ControlID="btnSearch" />
          <asp:AsyncPostBackTrigger ControlID="gvSearch" />
      </Triggers>
</asp:UpdatePanel> 
```

谢谢！

大纲：

```
<%@ Page Title="test">
<%@ Register src="test1.ascx" tagname="test1" tagprefix="test1uc" %>
    <UpdatePanel>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSearch" />
            <asp:AsyncPostBackTrigger ControlID="gvSearch" />
        </Triggers>
        <ContentTemplate>
             <test1uc:test1 ID="test1a" runat="server" />
        </ContentTemplate>
    </UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:15:11.130

你想用什么事件作为触发器，`SelectedIndexChanged`-event？然后应用适当的[`EventName`](http://msdn.microsoft.com/en-us/library/system.web.ui.asyncpostbacktrigger.eventname.aspx).

```
<asp:AsyncPostBackTrigger ControlID="gvSearch" EventName="SelectedIndexChanged" /> 
```

但是，这应该已经是[默认](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaulteventattribute.aspx)事件`GridView`（请参阅[`remarks`](http://msdn.microsoft.com/en-us/library/system.web.ui.asyncpostbacktrigger.eventname.aspx)章节）。

看看这个线程：[http ://forums.asp.net/t/1136932.aspx](http://forums.asp.net/t/1136932.aspx)

**更新**我认为在您的情况下最好的方法是在您的 UserControl 中提供一个自定义事件，该`SelectedIndexChanged`事件是从`GridView`UC 中的事件中冒出来的。然后你可以使用这个事件作为`AsyncPostBackTrigger`你的`UpdatePanel`，例如：

```
<asp:AsyncPostBackTrigger ControlID="test1a" EventName="GridSearchClicked" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:56:36.533

撇开需要访问子控件不是好习惯的事实不谈，这是我最好的建议......

在您的用户控件中创建一个`Public Sub`，如下所示：

```
Private ParentUpdatePanel As System.Web.UI.UpdatePanel

' Must be called on every Page_Load!
Public Sub RegisterAsyncTrigger(MyScriptManager As System.Web.UI.ScriptManager, MyUpdatePanel As System.Web.UI.UpdatePanel)
    MyScriptManager.RegisterAsyncPostBackControl(gvSearch)
    ParentUpdatePanel = MyUpdatePanel
End Sub 
```

在 Page_Load 事件中，您将按如下方式调用该函数：

```
Protected Sub Page_Load(Sender As Object, e As EventArgs)
    ' Call our new function, passing in the current ScriptManager and the UpdatePanel
    ' The ScriptManager handles the asynchronous postbacks
    ' The UpdatePanel handles the dynamic updates
    test1.RegisterAsyncTrigger(ScriptManager.GetCurrent(Me), pnlSearch)
End Sub 
```

在必须更新面板的 GridView 控件内的事件处理程序中，`gvSearch`将包含以下代码：

```
ParentUpdatePanel.Update() 
```

# asp-classic - schtask保存网页输出

> ID：14989982
> 
> 赞同：0
> 
> 时间：2013-02-20T21:11:03.993
> 
> 标签：asp-classic, windows-task-scheduler

我想做一个每月计划的任务来运行一个网页并保存输出。到目前为止，这个网页是asp的，当它打开时，它会自动提示在excel中保存/打开输出。

目前我正在尝试（使用 cmd 提示符）：

```
schtasks /create /tn MonthlySave /sc MONTHLY /mo LASTDAY /tr "\"C:\Program Files\Mozilla Firefox\firefox.exe\" \"URL.I.Want.To.Save.asp\"" 
```

我正在运行 Windows XP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:25:56.577

我发现了一个名为 GRABURL.EXE ( [http://toolground.com/files/GRABURL.EXE](http://toolground.com/files/GRABURL.EXE) ) 的有用工具，它可以将网页输出到文件中，因此：

```
GRABURL.EXE "http://website.com">"C:\Folder\File.xls" 
```

当然，您可以更改 URL 以及目标文件夹/文件/文件类型。

这样我可以制作一个 BATCH 文件（称为 run.bat）来获取日期并保存我想要的网站，然后在安排我的任务时调​​用该 BATCH 文件：

```
schtasks /CREATE /TN TaskName /TR "C:\run.bat" /SC MONTHLY /MO LASTDAY /M * /ST 02:00:00 
```

有关 schtasks 参数的帮助，请参见此处： [http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true)

# eclipse - MercurialEclipse 中项目名称旁边的向上箭头是什么意思

> ID：14989995
> 
> 赞同：1
> 
> 时间：2013-02-20T21:11:53.810
> 
> 标签：eclipse, mercurial, mercurialeclipse

我正在使用 mercurial 和 MercurialEclipse。我刚刚合并了我的一个项目，现在我在包资源管理器中的项目名称右侧有“默认{向上箭头符号} 2”

起初我以为这意味着我有两个提示，但用乌龟或“hg log”看它似乎只有一个提示。

向上箭头是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:43:36.720

这意味着您有 2 个尚未推送到中央仓库的本地变更集。如果您同步项目（右键单击项目-->团队-->同步），或者在命令行上执行**hg out**，您应该会看到它们。

# javascript - 本地与远程移动 Web 应用程序性能特征

> ID：14989997
> 
> 赞同：0
> 
> 时间：2013-02-20T21:11:56.853
> 
> 标签：javascript, cordova, web-applications, mobile, client-side

我可以假设本地 Web 应用程序（例如 phonegap）和远程 Web 应用程序（例如移动浏览器）的客户端性能特征（javascript、css、内存）相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:17:03.947

是的，可以肯定地假设移动网络和使用 Phonegap 开发的混合应用程序之间的特性将以类似的方式运行。Phonegap 只不过是一个带有 web 视图的外壳，它在本地存储文件并提供 API 来与本机设备功能交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:17:40.977

不，至少对于 iO 来说存在一些差异。

与已安装的应用程序相比，您将在浏览器中获得更好的性能。在 iOs 中，Safari 中启用了更快的 javascript 引擎，但 web 视图中没有。

在 Android 上也有区别：用户将使用 chrome，但 android 中的嵌入式 webkit 比 chrome 中的 webkit 更旧。在android中会有更多的错误和更差的性能。

但差异大多不是那么大。