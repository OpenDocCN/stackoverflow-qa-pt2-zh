# StackOverflow 问答 14802000-14802999

# asp.net-mvc - 如何在 MVC Razor 视图中查找编译时错误？

> ID：14802001
> 
> 赞同：4
> 
> 时间：2013-02-10T20:00:36.957
> 
> 标签：asp.net-mvc, visual-studio

当我对一个由多个视图使用的模型进行更改，但忽略更新一个或多个视图以反映更改时，问题只有在我实际浏览到受影响的视图从而触发运行时编译时才会变得明显。

如何在 Visual Studio 的编译时找到此类错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T20:00:36.957

默认情况下，MVC 视图是在运行时编译的。要改为在构建时编译它们：

*   在文本编辑器中编辑项目文件
*   更改`<MvcBuildViews>false</MvcBuildViews>`要读取的行`<MvcBuildViews>true</MvcBuildViews>`
*   保存编辑并允许 Visual Studio（如果正在运行）在出现提示时重新加载项目文件。

建造时间会稍微长一些。然而，在我的（快速）系统中，我几乎没有注意到中型项目的区别。

# java - 播放动作不响应 json 发布

> ID：14802007
> 
> 赞同：1
> 
> 时间：2013-02-10T20:01:07.447
> 
> 标签：java, javascript, jquery, json, playframework-2.0

我是新手，我正在尝试使用 JQuery 将表单数据发布到我的 Play Action。但是，我收到了来自 Action 的“预期的 json”响应。我检查 HTTP 标头以确保正在发送数据并且确实如此，我哪里出错了，我该如何解决它。（有没有更好的方法）

脚本：

```
$(document).ready (function (){
    $("form").submit (function (e) {
        e.preventDefault();
        $.post("/save",$(this).serialize(),function (data){
            alert(data);
        });
     });
}); 
```

行动

```
public static Result save()
{
    JsonNode json = request().body().asJson();
    if (json == null)
    return ok("expected json");
    else
    {
        String value = json.findPath("video").getTextValue();
        if (value == null)
            return ok("did not find");
        else
            return ok(value) ;
    }
} 
```

路线

```
 POST   /save                         controllers.Application.save() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:15:13.213

两者：**Julien Lafont**和**dfsq**都是正确的，首先：您没有将表单序列化为 JSON，其次，正如 Julien 所说，您不需要...使用您当前的 JS，您可以`DynamicForm`在您的`save`操作中使用：

```
public static Result save() {
    DynamicForm df = form().bindFromRequest();

    String value = df.get("video");
    if (value == null || value.trim().equals(""))
        return badRequest("Video param was not sent");

    // do something with the value

    return ok(value);
} 
```

顺便说一句，不要`ok()`用于返回错误请求的响应。你有很多选项：`badRequest()`、`notFound()`、`TODO`和一堆其他的[结果](http://www.playframework.com/documentation/api/2.0.4/java/play/mvc/Results.html)，甚至是 raw: `status(int)`，所以你可以在 jQuery 中读取状态，而不会传递任何其他失败的原因。

如果您出于任何原因真的非常需要将表单序列化为 JSON，请告诉我，我会给您发送一个示例。

# actionscript-3 - 内存管理 AIR IOS

> ID：14802009
> 
> 赞同：0
> 
> 时间：2013-02-10T20:01:19.697
> 
> 标签：actionscript-3, memory-management

我正在使用基于视频的 flash cs6 构建一个应用程序......我正在使用很多视频和图像......现在当我调试它时，我得到 68 mb 的文件大小，在任务管理器中它使用 70 mb到 - 150 mb 的内存，这是很多...任何人都可以给我任何关于如何更好地管理应用程序的建议帮助...我嵌入了很多东西

这些是我已经在做的事情..

*   我正在使用 1024 * 768 的 FLV 视频，大约有 15-20 个视频，每个大约 1 mb 到 - 6 mb
*   我正在使用 addChld 和 removeChild 所以每次视频播放完毕我都会摆脱它..我也会删除它的听众 - 我正在使用所有 png 图像
*   我也在他们完成播放后删除声音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:18:39.537

在您的设备上尝试它可能需要更少的内存。

# c# - guid tostring 作为字典键的近乎完美的哈希

> ID：14802012
> 
> 赞同：0
> 
> 时间：2013-02-10T20:01:35.147
> 
> 标签：c#, .net

我要解决的问题：使用 guid 字符串作为 Dictionary(string, someObject) 的键，我希望对键进行*完美*的散列...

不确定我是否遗漏了一些东西......当我使用字典构造函数运行以下测试时，只传递大小分配我每次运行都会得到 +- 10 次冲突。当我传入 IEqualityComparer 时，只需在字符串上调用 gethashcode，我的测试就顺利通过了！在某些情况下使用 x = 10 次迭代进行多次运行，并且 y 高达一百万！我认为字典正在调整哈希函数，尤其是在处理字符串时？我的机器上没有反射器:(所以我今晚不能检查...如果您注释掉交替的字典初始化，您会看到...测试在我的 i7 上运行相对较快。

```
 [TestMethod]
    public void NearPerfectHashingForGuidStrings()
    {
        int y = 100000;
        int collisions = 0;

        //Dictionary<string, string> list = new Dictionary<string, string>(y, new GuidStringHashing());
        Dictionary<string, string> list = new Dictionary<string, string>(y);
        for (int x = 0; x < 5; x++)
        {

            Enumerable.Range(1, y).ToList().ForEach((h) =>
            {
                list[Guid.NewGuid().ToString()] = h.ToString();
            });

            var hashDuplicates = list.Keys.GroupBy(h => h.GetHashCode())
                .Where(group => group.Count() > 1)
                .Select(group => group.Key).ToList();

            hashDuplicates.ToList().ForEach(v => Debug.WriteLine( x +  "--- " + v));
            collisions += hashDuplicates.Count();
            list.Clear();
        }

        Assert.AreEqual(0, collisions);
    }

        public class GuidStringHashing : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return GetHashCode(x) == GetHashCode(y);
    }

    public int GetHashCode(string obj)
    {
        return obj.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:05:00.913

你的测试坏了。

因为您的相等比较器错误地报告恰好具有相同散列的两个不同 GUID 相等，所以您的字典从一开始就不会存储冲突。

由于[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_Principle)，根本不可能为超过 2^(个 32)项创建 32 位完美哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:06:10.537

不可能。你想要一个完美的散列函数来处理一组未知的键。您可以为[*特定*](http://en.wikipedia.org/wiki/Perfect_hash_function)[的键集](http://en.wikipedia.org/wiki/Perfect_hash_function)[创建完美的散列函数](http://en.wikipedia.org/wiki/Perfect_hash_function)*。您无法创建一个适用于所有键集的完美哈希函数。*

 *原因是“两个耶稣原则”，正如 Mark Knopfler 所说的那样：“两个人说他们是耶稣，其中一个人肯定是错的。” （它更广为人知的是“鸽巢原理”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:21:21.897

完美的哈希码是什么意思？

您的代码有些混乱，尤其是因为您发布了一个`GuidStringHashing`测试方法未使用的类。

但是您的代码表明，当您制作 100,000 个 GUID，将它们全部转换为字符串，然后获取字符串的哈希码时，经常会发生并非所有哈希码都是不同的。当有超过 40 亿个整数可供选择，而您只生成 100,000 个字符串时，这可能会令人惊讶。

您正在使用`GetHashCode()`通用字符串，但您的字符串不太通用，它们都类似于

```
"2315c2a7-7d29-42b1-9696-fe6a9dd72ffd" 
```

所以也许你的哈希码不是最优的。最好将字符串解析`h`回 GUID 并使用其哈希码，如`(new Guid(h)).GetHashCode()`.

但是，这仍然会与 100,000 个 GUID 发生冲突。我想你看到的只是[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)。

试试这个更简单的代码。在这里，我`GetHashCode()`在 GUID 上使用，所以我们希望整数是非常随机的：

```
 var set = new HashSet<int>();
        for (int i = 1; true; ++i)
        {
            if (!set.Add(Guid.NewGuid().GetHashCode()))
                Console.WriteLine("Collision, i is: " + i);
        } 
```

我们看到（通过多次运行上述代码）碰撞几乎总是在计算出 100,000 个哈希码之前发生。*

# actionscript-3 - 动画停止 actionscript 3.0 勾选

> ID：14802013
> 
> 赞同：0
> 
> 时间：2013-02-10T20:01:36.043
> 
> 标签：actionscript-3, animation

所以，我有这个游戏，我希望玩家移动，所以当按键按下时我使用了一个tick方法，它创建了2个事件监听器，一个keyup监听器和一个tick。keyup监听器删除它自己并删除tick。刻度包含运动和我假定动画的位置。这是我的代码：

```
// For every frame //
import flash.events.Event;
import flash.events.TouchEvent;
import flash.events.MouseEvent;
import flash.events.KeyboardEvent;
var gravity = 0.6;
var floor = 410;
jordan1.y = floor;
jordan1.speedY = floor;
jordan1.impulsion = 10;
var onFloor:Boolean = false;
var keyRight:Boolean = false;
stage.addChild(jordan1);
stage.addChild(leftwall1);
stage.addChild(finish1);
stage.addChildAt(abovedoor, 0);
stage.addChild(left);
stage.addChild(right);
stage.addChild(jump);
addEventListener(Event.ENTER_FRAME, enters);
function enters(e:Event) {
    jordan1.speedY += gravity;
    jordan1.y += jordan1.speedY
    if(jordan1.y > floor) {
        jordan1.speedY = 0;
        jordan1.y = floor;
        onFloor = true;
        if(keyRight == true) {
            jordan1.gotoAndPlay(7);
        }
        if(keyRight == false) {
        jordan1.gotoAndStop(1);
        }
    }
}

function stageup(e:MouseEvent) {
    removeEventListener(Event.ENTER_FRAME,tickleft);
    removeEventListener(Event.ENTER_FRAME,tickright);
    removeEventListener(MouseEvent.MOUSE_UP, stageup);
}
stage.addEventListener(MouseEvent.MOUSE_DOWN, stagedown);
function stagedown(e:MouseEvent) {
    stage.addEventListener(MouseEvent.MOUSE_UP, stageup); 
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, jumpkey);
function jumpkey(e:KeyboardEvent) {
    if(e.keyCode == Keyboard.SPACE) {
       if(onFloor == true)
       {
        jordan1.speedY=-jordan1.impulsion;
        onFloor = false;
        jordan1.gotoAndStop(2);
       }
       }
    }

stage.addEventListener(KeyboardEvent.KEY_DOWN, leftkey);
function leftkey(e:KeyboardEvent) {
if(e.keyCode == Keyboard.LEFT) {
    addEventListener(Event.ENTER_FRAME, leftkeytick);
    stage.addEventListener(KeyboardEvent.KEY_UP, leftkeydown);

}
}
function leftkeydown(e:KeyboardEvent) {
    removeEventListener(Event.ENTER_FRAME, leftkeytick);
    stage.removeEventListener(KeyboardEvent.KEY_UP, leftkeydown);

}
function leftkeytick(e:Event) {
    jordan1.x-=10;
        if(onFloor == true) {
    jordan1.gotoAndStop(3);
    }
    if(onFloor == false) {
        jordan1.gotoAndStop(6);
    }

}

stage.addEventListener(KeyboardEvent.KEY_DOWN, rightkey);
function rightkey(e:KeyboardEvent) {
if(e.keyCode == Keyboard.RIGHT) {
    keyRight == true;
    addEventListener(Event.ENTER_FRAME, rightkeytick);
    stage.addEventListener(KeyboardEvent.KEY_UP, rightkeydown);
}
}
function rightkeydown(e:KeyboardEvent) {
    removeEventListener(Event.ENTER_FRAME, rightkeytick);
    keyRight == false;
    stage.removeEventListener(KeyboardEvent.KEY_UP, rightkeydown);
}
function rightkeytick(e:Event) {
    jordan1.x+=10;
    if(onFloor == true) {
    jordan1.gotoAndPlay(7);
    }
    if(onFloor == false) {
        jordan1.gotoAndStop(5);
    }
}

// Just for this frame //
leftwall1.addEventListener(Event.ENTER_FRAME, leftwall1hit);
function leftwall1hit(e:Event) {
    if(leftwall1.hitTestObject(jordan1)) {
        jordan1.x +=10;
    }
}

abovedoor.addEventListener(Event.ENTER_FRAME, abovedoorhit);
function abovedoorhit(e:Event) {
    if(abovedoor.hitTestObject(jordan1)) {
        jordan1.x-=10;
    }
}

jordan1.addEventListener(Event.ENTER_FRAME, finish1hit);
function finish1hit(e:Event) {
    if(jordan1.x > 960) {
        gotoAndStop(67);

    }
} 
```

所以，当我测试它并按下它时，它会在 7 处停止，而不是播放。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:18:23.017

你`goto`不应该在你的勾号中，否则它们将在每一帧中执行。这解释了为什么它停留在第 7 帧。

而是将它们放在您的`KEY_DOWN`侦听器中：

```
animated = false;
stage.addEventListener(KeyboardEvent.KEY_DOWN, rightkey);
function rightkey(e:KeyboardEvent) {
  if(e.keyCode == Keyboard.RIGHT) {
    if(onFloor == true && !animated) {
       jordan1.gotoAndPlay(7);
    }
    if(onFloor == false && !animated) {
        jordan1.gotoAndStop(5);
    }
    animated = true;
    addEventListener(Event.ENTER_FRAME, rightkeytick);
    stage.addEventListener(KeyboardEvent.KEY_UP, rightkeydown);
  }
}
function rightkeydown(e:KeyboardEvent) {
    animated = false;
    removeEventListener(Event.ENTER_FRAME, rightkeytick);
    stage.removeEventListener(KeyboardEvent.KEY_UP, rightkeydown);
}
function rightkeytick(e:Event) {
    jordan1.x+=10;
} 
```

但是您不应该使用带有 keydown 事件的刻度函数。

`KEY_DOWN`当您按下/a 键时，每帧都会调用它。

如果您无法更改您的逻辑（这对您想要实现的目标不利），您可以标记您的处理程序。通过为您正在收听的每个键设置一个布尔值。然后在你的滴答声中，根据按下的键做你需要做的事情。

```
keyRight = false;
keyLeft = false;
//... same for all your keys.
// or you could store them in one object for a more dynamic solution.

stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDown);
stage.addEventListener(KeyboardEvent.KEY_UP, keyUp);
stage.addEventListener(Event.ENTER_FRAME,tick);

function keyDown(e:KeyboardEvent){
    if(e.keyCode === Keyboard.RIGHT && !keyRight){
        keyRight = true;
    }
    else if(e.keyCode === Keyboard.LEFT && !keyLeft){
        keyLeft = true;
    }
    //... same for all your keys.
}

function keyUp(e:KeyboardEvent){
    if(e.keyCode === Keyboard.RIGHT){
        keyRight = false;
    }
    else if(e.keyCode === Keyboard.LEFT){
        keyLeft = false;
    }
    //... same for all your keys.
}

function tick(e:Event){
     if(keyRight) jordan1.x += 10;
     if(keyLeft) jordan1.x -= 10;
     //... etc for all your keys.
} 
```

[这个另一个问题](https://stackoverflow.com/questions/5418097/detect-first-key-down-event-only-in-as3)`KEY_DOWN`很好地涵盖了多个主题。

# xml - 使用 xsd 属性查询 xml

> ID：14802016
> 
> 赞同：1
> 
> 时间：2013-02-10T20:02:05.223
> 
> 标签：xml, linq, xsd

我有一个包含内联 XSD 的 XML 文档（如下所示）。问题是我需要使用从 XSD 推算的属性搜索 XML 内容 - 最好在 LINQ 中（XPATH 也可以）。

因此，在下面的示例中，我希望`CATALOG_NAME`通过推断 XSD`sql:field`属性值`CATALOG_NAME`然后将其与 XML 文档中的真实元素名称进行匹配来查找元素`CATALOG_NAMEC00`。一旦我有了元素，我就想要它的价值。

我看到了许多 XSD 验证示例和查询 XSD 本身的示例。最后，我正在寻找没有一些手动查找技巧的“合并”功能。

这可能吗？

```
<return xmlns="urn:schemas-microsoft-com:xml-analysis">
  <root xmlns="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msxmla="http://schemas.microsoft.com/analysisservices/2003/xmla">
    <xsd:schema targetNamespace="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:sql="urn:schemas-microsoft-com:xml-sql" elementFormDefault="qualified">
      <xsd:element name="root">
        <xsd:complexType>
          <xsd:sequence minOccurs="0" maxOccurs="unbounded">
            <xsd:element name="row" type="row" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:simpleType name="uuid">
        <xsd:restriction base="xsd:string">
          <xsd:pattern value="[0-9a-zA-Z]{8}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{12}" />
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:complexType name="xmlDocument">
        <xsd:sequence>
          <xsd:any />
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="row">
        <xsd:sequence>
          <xsd:element sql:field="CATALOG_NAME" name="CATALOG_NAMEC00" type="xsd:string" minOccurs="0" />
          <xsd:element sql:field="SCHEMA_NAME" name="SCHEMA_NAMEC01" type="xsd:string" minOccurs="0" />
          <xsd:element sql:field="CUBE_NAME" name="CUBE_NAMEC02" type="xsd:string" minOccurs="0" />
          <xsd:element sql:field="DIMENSION_UNIQUE_NAME" name="DIMENSION_UNIQUE_NAMEC03" type="xsd:string" minOccurs="0" />
          <xsd:element sql:field="HIERARCHY_UNIQUE_NAME" name="HIERARCHY_UNIQUE_NAMEC04" type="xsd:string" minOccurs="0" />
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <row>
      <CATALOG_NAMEC00>AGS PLANUNG_PA</CATALOG_NAMEC00>
      <CUBE_NAMEC02>Aktionsplan</CUBE_NAMEC02>
      <DIMENSION_UNIQUE_NAMEC03>[Planstand]</DIMENSION_UNIQUE_NAMEC03>
      <HIERARCHY_UNIQUE_NAMEC04>[Planstand].[Planstand]</HIERARCHY_UNIQUE_NAMEC04>
    </row>
  </root>
</return> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:29:28.127

你可以试试这个 XPath：

```
//*[local-name()=//*:element[@*:field='CATALOG_NAME']/@name] 
```

这是 XPath 2.0，所以我用作`*`命名空间前缀，但您可以声明命名空间并使用任何您想要的前缀。

# ruby-on-rails - 通过 select_tag 发送额外的参数值

> ID：14802018
> 
> 赞同：2
> 
> 时间：2013-02-10T20:02:34.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的观点：

```
<%= form_tag(update_user_products_path, :id => "update_user_form") do %>
<%@products.each do |product| %>
            <div class = "prod">
            <a href='<%= recommendations_path(:product_id => product.id, :rating_set_id => params[:rating_set_id]) %>' target="_blank"><img src='<%= product.cover_img %>' class='product_image_prods'></img></a>
            <div class= "title"><small><b><%= link_to truncate(product.title, :length =>30),  recommendations_path(:product_id => product.id, :rating_set_id => params[:rating_set_id]), :target => '_blank' %></b></small></div>
            <br/>
            <div><em>Current Rating: <%= product.rating %> </em></div>
            <%= select_tag "user_id:#{product.id}", options_for_select(User.all.collect {|u| [ u.name, u.id ] })%>
            </div>
            <% end %>
    <%= submit_tag %>
<% end %> 
```

我需要向我的控制器更新操作发送 2 个参数——每条记录的 product.id 和所选记录的 user.id。调用 params.keys 返回：

```
utf8
authenticity_token
user_id:1
user_id:2
user_id:3
user_id:4
...
user_id:78
commit
action
controller 
```

我能够通过（“：”）拆分 params.keys。这样做会返回与 params.keys 相同的输出。还有其他方法可以将 product.id 传递给我的 update_user 操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:41:35.303

您可以将选择的名称更改为

```
<%= select_tag :user_id, options_for_select(User.all.collect {|u| [ u.name, u.id ] }), name: "users[#{product.id}]" %> 
```

这将为您提供一个哈希值，`params[:users]`其中键是 product_ids，值是 user_ids

# php - 如果请求 .php，则返回 404

> ID：14802021
> 
> 赞同：0
> 
> 时间：2013-02-10T20:02:50.717
> 
> 标签：php, .htaccess

我的 .htaccess 文件看起来像这样，以便使我的网址从 /something.php 到 /something ：

```
Options -Multiviews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f    
RewriteCond %{REQUEST_FILENAME} !-d   
RewriteRule ^(.*)$ $1.php [L] 
```

当请求 php 扩展时，它仍然有效。如果请求 .php 扩展名，我如何返回 404？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:14:02.583

首先，您的方法应缩短为：

```
 RewriteCond %{REQUEST_FILENAME}.php -f
 RewriteRule ^(.*)$ $1.php [L] 
```

这会探测 .php 文件的存在，而不是其基本名称的缺失。

由于这是`[LAST]`规则，您可以在之后（或可能在 RewriteRule/RewriteCond 块之前）探测已经存在的 .php 后缀：

```
 RewriteRule ^(.*)\.php$ - [F] 
```

...或在这种情况下发出重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:18:49.400

试试看

```
 <FilesMatch "\.(php)$">
      RewriteRule ^(.*)$ /404.html [L,S]
  </FilesMatch> 
```

# java - 用户输入由空格、制表符或换行符分隔的数字

> ID：14802022
> 
> 赞同：0
> 
> 时间：2013-02-10T20:02:54.877
> 
> 标签：java, eclipse

我在一个初学者的java编程课上，我被困在我知道应该很简单的事情上，但这让我很生气。系统会提示用户输入任意数量的 x,y 值，输入时可以用空格、制表符或换行符分隔。所以可以这样输入：

```
1.0 1.0 2.0 2.0 3.0 3.0 etc... 
```

或者

```
1.0 (tab) 1.0 (tab) 2.0 (tab) 2.0 (tab) etc... 
```

或者

```
1.0 1.0
2.0 2.0
3.0 3.0 
```

ETC...

好吧，这很好，但我不知道如何区分这些数字。我正在考虑有一个 x var 和 ay var 并想将它们分成这个，但是我该怎么做呢？我的第一个想法可能是一个数组，但我们还没有涵盖这些。我觉得这很容易，我只是想念它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:12:18.970

您可以使用以下内容按空格拆分字符串：

```
String[] parts = userinput.split(" "); 
```

您可以使用以下选项按制表符拆分字符串：

```
String[] parts = userinput.split("\t"); 
```

您可以使用以下命令按行返回拆分字符串：

```
String[] parts = userinput.split("\n"); 
```

注意：您可能需要在上面添加一个 '/r' \n

所以，找到你的分隔符，使用上述之一（或更多，如果需要）分割你的字符串

那么您应该将所有数据都放在一个字符串数组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:12:50.097

我可以让你使用扫描仪。您可以设置可以输入的分隔符。

```
Scanner s = new Scanner("This is a , test word \n ");
s.useDelimiter(",|\\n");
while(s.hasNext()){
   System.out.println(s.next());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:13:10.503

干得好。`[ \t]`是一个正则表达式，表示空格或制表符。

```
public static void main(String[] args) throws IOException
{
  BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
  String line = br.readLine();
  while (line != null && !line.isEmpty())
  {
    String[] arr = line.split("[ \t]");
    for (int i = 0; i < arr.length; i += 2)
    {
      doSomething(Double.parseDouble(arr[i]), Double.parseDouble(arr[i+1]));
    }
    line = br.readLine();
  }
}

static void doSomething(double x, double y)
{
  System.out.println("x is "+x+", y is "+y);
} 
```

您可能还希望包括一些错误检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T20:07:23.693

如果您将输入作为字符串，您可以执行类似的操作

```
String[] input = inputString.split(" "); 
```

然后将每个元素转换为您想要的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T20:10:52.497

您将要为此使用正则表达式 - 查找字符串中的所有空格，然后对其进行拆分。

```
String[] vals = t1.split("[\\s]+"); 
```

`\s`是[空白字符正则表达式搜索模式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-10T16:44:43.023

您可以使用 BufferedReader + Scanner 读取由空格或换行符分隔的数据：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
Scanner input = new Scanner(br); 
```

& 使用 Scanner 一个一个地读取数字，它会等到它遇到一个数字然后读取它，无论它们是用空格还是换行分隔

```
int numbersCount = 5; //numbersCount is the count of the numbers you are wanting to read from the input , so if you are waiting 5 numbers then it will be 5\. 
int[] numbers = new int[numbersCount];
for (int i=0;i<numbersCount;i++) 
{
  numbers[i] = input.nextInt();
} 
```

> 所以数组 numbers 将包含您想要的所有数字 isA

希望这可以帮助

# java - 在 ImageView 上应用位图转换

> ID：14802024
> 
> 赞同：-8
> 
> 时间：2013-02-10T20:03:04.037
> 
> 标签：java, android

如何使此代码正常工作？我想把一张图片变成一个crycle，我在这个网站上找到了这个代码，但它没有说明如何使用它......有人有什么想法吗？

[在Android中从位图中裁剪圆形区域](https://stackoverflow.com/questions/11932805/cropping-circular-area-from-bitmap-in-android)

```
public Bitmap getCroppedBitmap(Bitmap bitmap) {
    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
            bitmap.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    // canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
    canvas.drawCircle(bitmap.getWidth() / 2, bitmap.getHeight() / 2,
            bitmap.getWidth() / 2, paint);
    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);
    //Bitmap _bmp = Bitmap.createScaledBitmap(output, 60, 60, false);
    //return _bmp;
    return output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:10:16.097

假设您有一个要使用的drawable？

`image`对象 - 可以是 ImageView ：

```
Bitmap bitImg = BitmapFactory.decodeResource(getResources(),
    R.drawable.YOUR_DRAWABLE_NAME);
image.setImageBitmap(getCroppedBitmap(bitImg)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:11:04.003

您将您的drawable转换为位图，将其传入并将其设置为ImageView（我假设这是您想要的）：

```
Bitmap myDrawable = BitmapFactory.decodeResource(getResources(), R.drawable.myDrawable);

myImageView.setImageBitmap(getCroppedBitmap(myDrawable)); 
```

# jquery - Jquery表单不发送？

> ID：14802025
> 
> 赞同：0
> 
> 时间：2013-02-10T20:03:06.863
> 
> 标签：jquery, html

我的代码的简化版本：

JS：

```
$(function() {
    $("submit").click(function() {
        var msg_to = $("#msg_to").val();

        var dataString = 'msg_to=' + msg_to;

        $.ajax({
            type: "POST",
            url: "sendmessage.php",
            data: dataString,
            success: function(){
                $('.success').fadeIn(200).show();
                $('.error').fadeOut(200).hide();
            }
        });

        return false;
    });
}); 
```

HTML

```
<form method="post" name="form">
            <label class="label-left" for="msg_to">Message to</label>
            <input name="msg_to" id="msg_to" type="text">
 <input type="submit" value="" class="submit" /> 
```

php 文件将表单邮寄到我的电子邮件中，当我将表单发布到 PHP 文件时，这肯定有效。通过jquery，它就是行不通的。任何人都可以在我的代码中找到错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T20:11:08.607

```
$("submit") 
```

应该：

```
$(".submit") 
```

第一个查找`<submit>`标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T20:11:35.063

尝试这个：

```
$(document).ready(function() { // use document query selector then test for ready state
    $(".submit").click(function() { // submit query selector should have class "."
        var msg_to = $("#msg_to").val();
        var dataString = "msg_to=" + msg_to;

        $.ajax({
            type: "POST",
            url: "sendmessage.php",
            data: dataString,
            success: function() {
                $(".success").fadeIn(200); // no need for show()
                $(".error").fadeOut(200); // no need for hide()
            }
        });

        return false;

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:25:06.743

有用！这是@Vulcan 的解决方案和@Jacedc 的组合，我错误地在上面的脚本之后导入jquery ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T20:17:56.390

我认为您的表单在发出 AJAX 请求之前提交。使用该`event.preventDefault()`功能可以防止表单提交，因此 AJAX 请求可以完成加载。

```
$(function() {
    $(".submit").click(function(event) { // Added the '.' for the class, and the event parameter
        event.preventDefault(); // This prevents the submit-event to be fired
        var msg_to = $("#msg_to").val();

        var dataString = 'msg_to=' + msg_to;

        $.ajax({
            type: "POST",
            url: "sendmessage.php",
            data: dataString,
            success: function(){
                $('.success').fadeIn(200).show();
                $('.error').fadeOut(200).hide();
            }
        });

        return false;
    });
}); 
```

# sql - 在 SQL Server 2005 上恢复 SQL Server 2000 备份

> ID：14802027
> 
> 赞同：0
> 
> 时间：2013-02-10T20:03:08.093
> 
> 标签：sql, sql-server-2005, sql-server-2000, database-backups

我`.bak`从一个 12 年的项目中获得了一个 SQL Server 数据库备份（文件扩展名），我试图在 SQL Server 2005 上恢复它。

但这给了我一个错误，它不是正确的版本..

所以我试图找到一个 SQL Server 2000 版本，看看我是否可以用它来恢复它，但我找不到任何有效的版本。

是否有其他程序可以保存我的备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:10:52.263

[从msdn论坛](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/d413a76e-aeff-40d1-aa9a-3d1801d408c7/)复制过来的：

1）去恢复数据库

2) 选择要备份的数据库

3) 在磁盘上找到备份文件。您可能必须将其放入 MSSQL Server -> MSSQL.1-> MSSQL -> 备份文件夹。它必须是 .bak 文件。

4) 选择要从可用备份中恢复的背面。

5）转到左上角的“选项”属性，然后选择“覆盖现有数据库”。

6) 现在确保在同一个对话框视图中要恢复的数据库文件的路径是正确的。查看数据库文件和日志文件的路径，并确保它们是要恢复的数据库的正确路径。这里的问题是这些路径将用于备份来自的文件系统，而不是您要进行还原的文件系统。

补充一点，如果您要将数据库还原到其中没有数据库的新服务器（要还原到），请创建一个具有相同名称的假数据库，然后使用上面提到的覆盖设置还原到它.

# android - 未安装 SD 驱动器时无法使媒体播放器工作

> ID：14802034
> 
> 赞同：0
> 
> 时间：2013-02-10T20:03:51.140
> 
> 标签：android

首先我打电话给

```
get_fullPathToAudio(); 
```

确定音频文件的下载路径。

```
public File get_fullPathToAudioAsFile()
    {       
        File storageFile = this.getExternalFilesDir(null);
        if (storageFile == null)
        {
            // no external storage so store on private path
            storageFile =  this.getFilesDir();
        }
        return storageFile;
    }
    public String get_fullPathToAudio() {

        return get_fullPathToAudioAsFile() + File.separator +  this.get_currentArticleAudioFileName();
    }

String filePath = this.myApp.get_fullPathToAudio();
                mediaPlayer.setDataSource(filePath);
                mediaPlayer.prepare();
                mediaPlayer.start(); 
```

如果我的模拟器上有 SD 驱动器，一切都很好，但是当我没有模拟器时，该功能

```
get_fullPathToAudioAsFile(); 
```

用途

```
getFilesDir(); 
```

代替

```
getExternalFilesDir(null); 
```

它返回安装我的应用程序的私有驱动器的路径。我可以在 data/data/com.myapp/files/myfile.m4a 中看到该文件

例如。如果音频文件不在 SD 驱动器上，是否有其他播放方式？

我得到的错误信息是

错误（-1，-2147483648）无法打开文件 null 进行播放

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:53:01.450

我这样解决了

```
FileInputStream fileInputStream = new FileInputStream(mFile);
mPlayer.setDataSource(fileInputStream.getFD());         
mPlayer.prepare(); 
```

[在内部存储上播放文件时 MediaPlayer 错误 -2147483648](https://stackoverflow.com/questions/6380765/mediaplayer-error-2147483648-when-playing-file-on-internal-storage)

# jquery - jQuery - 单击新 div 时隐藏其他 div

> ID：14802037
> 
> 赞同：0
> 
> 时间：2013-02-10T20:04:14.887
> 
> 标签：jquery, toggle

我已经编写了这段代码，当单击另一个 div 时会显示一个菜单（div）。问题是，当我打开其中一个菜单并单击 div 打开一个新菜单（有多个菜单循环出来）时，其他菜单不会关闭。这意味着我可以同时打开无限数量的菜单，只要我没有在 div/菜单之外单击...

简短：我希望在单击打开新菜单时隐藏所有打开的菜单 div，除了我刚刚打开的菜单...

代码：

```
$('.commentSettings').click(function(e) {
    var id = $(this).attr('id');
    $('#mod-dropdown' + id).stop().toggle(200);
    e.stopPropagation();
    $('#mod-dropdown' + id).show();

    $(document).click(function(){
        $("#mod-dropdown" + id).hide();
    });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:10:14.043

例如，如果您给所有要隐藏类的 div `menu`，那么您只需`$('.menu').hide();`在 click 函数的开头弹出即可。

请注意，您已在函数内准备好一个文档，我认为您不想将其放在那里。document.ready 函数应该总是首先出现，并且你在其中注册你的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:08:51.170

我认为所有菜单都有一个共同的类别。使用它首先关闭所有菜单。然后打开当前点击的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:10:40.900

你可以有这样的东西：

```
var id = -1;
$('.commentSettings').click(function(e) {
    if( id != -1 )
        $('#mod-dropdown' + id).hide();
    var id = $(this).attr('id');
    $('#mod-dropdown' + id).stop().toggle(200);
    e.stopPropagation();
    $('#mod-dropdown' + id).show();

    $(document).click(function(){
        $("#mod-dropdown" + id).hide();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T20:11:28.963

这应该有效：

```
 $('.commentSettings').click(function(e) {
    var id = $(this).attr('id');
    $('#mod-dropdown' + id).stop().toggle(200);
    e.stopPropagation();
    $('#mod-dropdown' + id).show();
 });

 $(document).click(function(){
    $('[id^="#mod-dropdown"]').hide();
}); 
```

我在这里使用 jQuery`attributeStartsWith`选择器。

您可以在这里找到更多信息：http: [//api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

# html - jQuery Mobile - 禁用输入字段的默认选择状态

> ID：14802041
> 
> 赞同：1
> 
> 时间：2013-02-10T20:04:57.580
> 
> 标签：html, jquery-mobile, input

我有一个带有默认折叠输入字段的手风琴。当我单击手风琴时，它会展开并显示一个文本输入字段和两个按钮。当文本输入字段出现时，它默认被选中（即光标在输入字段中闪烁）。我想禁用它 - 我希望用户首先物理选择该字段。

之所以会这样，是因为在低端手机上点击手风琴时，在执行jQuery之前，屏幕上弹出了键盘，屏幕上出现了表单，看起来很糟糕。如果最初没有选择表单，则只有在用户选择表单后，键盘才会在屏幕上弹出。

这是可折叠列表的代码

```
<div data-role="collapsible" data-iconpos="right" data-collapsed="true" class="question">

<h3>Name</h3>   

    <div data-role="fieldcontain" class="ux-field-contain ui-field-contain ui-body ui-br">
        <label for="answer" class="ui-input-text">answer</label>
        <input type="text" data-role="button" autofocus = "on" autocomplete = "off" data-theme="b" name="answer" value="Save">
    </div>

    <div data-theme="b">
        <input data-role="button" data-theme="b" name="save" value="Save"></div>
    </div>

</div> 
```

# gwt - gwt-preprocessor - 未知参数：-remoteUI

> ID：14802045
> 
> 赞同：0
> 
> 时间：2013-02-10T20:05:40.400
> 
> 标签：gwt, reflection, gwt-preprocessor

我正在尝试使用 gwt 预处理器进行 gwt 的反射。我在 Eclipse 中为它创建了一个运行配置。它似乎可以很好地运行预处理器，但之后我认为当我得到“未知参数：-remoteUI”时它正在尝试运行 gwt 编译器。

如果我从运行配置中删除“remoteUI”参数，则会收到以下错误：缺少必需的参数“模块 [s]”

如果有人在 Eclipse 中有一个工作配置，你能指定安装 gwt-preprocessor 的确切步骤吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:09:13.580

如果您使用的是开发模式，请使用`org.hawk.gwt.ppc.DevModeWrapper`而不是`org.hawk.gwt.ppc.CompilerWrapper`作为主类。这是我如何创建调试配置的示例：

1.  创建 Web 应用程序配置（gwt Web 应用程序）。
2.  在主选项卡上，将 DevMode 类替换为`org.hawk.gwt.ppc.DevModeWrapper`
3.  这是 Arguments->Program arguments 部分的示例：

    `-Puse-generics -Pprocess-annotations -Preflect=org.hawk.gwtppc.webtest.tests.** -remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -logLevel INFO -codeServerPort 9997 -port 8888 -war /Users/alexbereznevatiy/dev/gwtppc/webtests/war org.hawk.gwtppc.webtest.webtest`

4.  其余的几乎相同。确保在类路径选项卡和源选项卡中包含预处理器二进制文件。

随时提出任何问题或在[gwt-preprocessor](http://code.google.com/p/gwt-preprocessor/)中注册错误 （如果您发现任何问题）。

# php - 用php转换字符串/数组格式

> ID：14802047
> 
> 赞同：3
> 
> 时间：2013-02-10T20:06:00.237
> 
> 标签：php, wordpress

我正在从插件（eventscalendar wordpress）中手动读取数据库条目。数据库中存储了用户定义的字段/自定义字段。原谅我的无知 - 但我无法关联数据存储的格式：

```
a:1:{s:3:"key";s:6:"extern";} 
```

所以最后我只需要一个简单变量中的 s:6:"" 的值。假设 $key = "extern"

任何快速的解决方案？谢谢，标记

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T20:09:11.807

看一下反序列化以将其重新放入数组中：http: [//php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:11:34.400

那是一个序列化的数组——注意`a`开头的 。它也适用于对象。

它是用 PHP 创建的，[`serialize`](http://php.net/manual/en/function.serialize.php)并用[`unserialize`](http://www.php.net/manual/en/function.unserialize.php).

它的目的与[`JSON`](http://en.wikipedia.org/wiki/JSON)格式类似。

# python - Scipy 树状图叶标签颜色

> ID：14802048
> 
> 赞同：5
> 
> 时间：2013-02-10T20:06:06.130
> 
> 标签：python, scipy, hierarchical-clustering, dendrogram

是否可以为 Scipy 的树状图的叶子标签分配颜色？[我无法从文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html)中弄清楚。这是我到目前为止所尝试的：

```
from scipy.spatial.distance import pdist, squareform
from scipy.cluster.hierarchy import linkage, dendrogram

distanceMatrix = pdist(subj1.ix[:,:3])
dendrogram(linkage(distanceMatrix, method='complete'), 
           color_threshold=0.3, 
           leaf_label_func=lambda x: subj1['activity'][x],
           leaf_font_size=12) 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T13:31:03.600

[`dendrogram`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html)使用 matplotlib 创建绘图，因此在调用 之后`dendrogram`，您可以随心所欲地操纵绘图。特别是，您可以修改 x 轴标签的属性，包括颜色。这是一个例子：

```
import numpy as np
from scipy.cluster.hierarchy import dendrogram, linkage
import matplotlib.pyplot as plt

mat = np.array([[1.0,  0.5,  0.0],
                [0.5,  1.0, -0.5],
                [1.0, -0.5,  0.5],
                [0.0,  0.5, -0.5]])

dist_mat = mat
linkage_matrix = linkage(dist_mat, "single")

plt.clf()

ddata = dendrogram(linkage_matrix,
                   color_threshold=1,
                   labels=["a", "b", "c", "d"])

# Assignment of colors to labels: 'a' is red, 'b' is green, etc.
label_colors = {'a': 'r', 'b': 'g', 'c': 'b', 'd': 'm'}

ax = plt.gca()
xlbls = ax.get_xmajorticklabels()
for lbl in xlbls:
    lbl.set_color(label_colors[lbl.get_text()])

plt.show() 
```

这是示例产生的情节：

![示例图](../Images/1755252a00e7ea7b8121f50a10b16b01.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T18:46:04.787

是的！创建树状图后，您可以获取当前图形并进行修改。

```
dendrogram(
    Z, 
    leaf_rotation = 90.,  # rotates the x axis labels
    leaf_font_size = 10., # font size for the x axis labels)
    labels = y # list of labels to include 
    ) 

ax = plt.gca()
x_lables = ax.get_xmajorticklabels()
for x in x_labels:
        x.set_color(colorDict[x.get_text()]) 
```

希望这可以帮助！

# php - PHP账户激活逻辑

> ID：14802054
> 
> 赞同：0
> 
> 时间：2013-02-10T20:06:29.637
> 
> 标签：php

我正在编写 PHP 以激活用户帐户......代码经过过滤、消毒、密码加密，并且我使用 PDO 来存储数据......一旦数据，我有一个标题重定向存储，以引导用户单击其注册电子邮件地址上的激活链接。

一切正常，我使用 PDO RowCount() 来告诉重定向继续运行，但我在 MySql 数据库中添加了一个哈希列来帮助激活链接，然后查询以实际激活帐户，所以RowCount 已被填充，重定向将绕过表单本身运行。所以我编写了一些代码来启用重定向工作，它确实如此，但是它仍然绕过表单本身......我需要这段代码来运行标题重定向，说数据库已经被填充表单，但我需要它停止绕过表单本身并继续进行重定向。

下面的代码......更多代码可根据要求提供......

```
 try{
   $checkEmail = $db->prepare('SELECT email FROM users WHERE email = :email');
   $checkEmail->bindParam(':email', $clean['email']);
   $checkEmail->execute();
   $result = $checkEmail->fetch();
   print_r($result);
    } catch(PDOException $e) {
   $e->getMessage();
    }
   if ($result[0] === $clean['email']){

           header('Location:verifyemail.php');

     } 
```

$clean['email'] 是编程逻辑中的当前电子邮件地址。但似乎 PHP 已经对此具有一定的价值，因此该表单被绕过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:19:07.107

我可能完全误解了这个代码片段的意图，但是如果页面第一次加载时`$clean['email']`是`NULL`（因为没有处理任何表单输入），我认为这个`if`条件总是正确的：

1.  PDO 替换使用占位符替换 NULL 运行，因此相当于`SELECT email FROM users WHERE email = NULL`
2.  没有匹配的行（保证，因为`NULL = NULL`在 SQL 中 even 为 false）
3.  `$result[0]`未定义，因为 SQL 查询未返回任何行
4.  因此，`$result[0]`两者`$clean['email']`都评估为 PHP NULL，因此相同
5.  重定向火灾

[更新，来自评论]我认为这种方法适用于 NULL 输入以外的所有内容；您只需要检测`$clean['email']`根本没有提供的情况。也许`if ( ! empty($clean['email']) && $result[0] === $clean['email'] ) { ... }`

# c++ - OPOS BSTR* 未正确转换

> ID：14802056
> 
> 赞同：0
> 
> 时间：2013-02-10T20:06:40.320
> 
> 标签：c++, bstr, opos

因此，经过大量研究后，我发现使用 WideCharToMultiByte 非常适合通过 OPOS 将数据从控制对象发送到我的自定义 SO。好吧，我们遇到了一个错误。在 DirectIO 部分，C# 控制对象的映射是 DirectIO(int command, ref int data, ref string object);

在最长的时间内，我们只需要通过 DirectIO 发送简单的命令。例如，要打开 LED，我们会将数据设置为以毫秒为单位的长度，并将对象设置为颜色。当我们需要将数据写入标签或卡片时，必须将文本从特殊的 XML 样式的字符串解析为字节数组......现在需要我们需要一个字节数组，使用 ASCII 编码将该数组放入字符串形式，并让它写入..

问题是当我在我的服务对象中转换这个字符串时它没有正确转换它。即使 SysStringLen 知道长度是 4 字节，它似乎也停止在 null 上。示例 控制对象执行此操作

```
 int page = 16;
        byte[] data = new byte[] { 0x19, 0x00, 0x30, 0x00 };
        string pData = System.Text.ASCIIEncoding.ASCII.GetString(data);
        msr.DirectIO(902, ref page, ref pData); 
```

SO看到了这个

```
int len = (int)SysStringLen(*pString);
long dataData = *pData;
char* dataObject = new char[1+len];

WideCharToMultiByte(CP_ACP, 0, *pString, -1, dataObject, len, NULL, NULL);
ByteUtil::LogArray("dataObject", (BYTE*)dataObject, len); 
```

产生的输出

`dataObject(4)-19:00:00:00`

基本上只要达到第一个空字符，其余数据就会丢失。现在，如果我将数字从字符串转换为字符串，它可以正常工作，因为我有一个 ByteUtil 函数只是为了那个场合......但我似乎不应该这样做......为什么不能我只是把它作为一个字节数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:27:25.097

很简单，只需更改这一行：

```
WideCharToMultiByte(CP_ACP, 0, *pString, -1, dataObject, len, NULL, NULL); 
```

进入：

```
WideCharToMultiByte(CP_ACP, 0, *pString, len, dataObject, len, NULL, NULL); 
```

如果将第四个参数设置为 -1，WideCharToMultiByte 会将输入字符串视为以空字符结尾的字符串。出于兼容性原因，BSTR 以空字符结尾，但您永远不应将它们视为以空字符结尾，因为它们可以包含空字符作为字符串的一部分。

# python - 两个线程使用相同的函数

> ID：14802057
> 
> 赞同：3
> 
> 时间：2013-02-10T20:06:40.823
> 
> 标签：python, multithreading, python-2.7

基本使用线程问题在这里。

我正在修改一个带有 2 个线程类的程序，现在我想在两个类中使用一个类中定义的函数。

作为一个线程新手（只和他们一起玩了几个月）可以将函数从线程类移到主程序中并从两个类中调用它还是我需要在另一个类中复制函数那没有？

问候西蒙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T20:07:39.487

您可以从两个线程调用相同的函数。要注意的问题是一次修改来自两个线程的共享数据。如果该函数试图从两个线程修改相同的数据，您将得到一个不可预知的程序。

所以你的问题的答案是，“这取决于函数的作用。”

将函数复制到两个线程类中肯定无济于事。重要的是函数做了什么，而不是有多少份代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:10:50.983

可能想要结帐线程锁定。在 1 个函数/方法上运行的线程可以以多种语言“锁定”该函数，因此其他线程无法同时访问它。 [http://en.wikipedia.org/wiki/Lock_(computer_science)](http://en.wikipedia.org/wiki/Lock_(computer_science))

# android - webview 打开特定域的站点

> ID：14802067
> 
> 赞同：2
> 
> 时间：2013-02-10T20:07:48.633
> 
> 标签：android, webview

我正在尝试制作一个应用程序，可以在 webview 中打开某个站点的所有网页，例如 www.yahoo.com，但在默认浏览器中打开所有其他网页。这是我正在使用但无法完全正常工作的代码。

```
private class MyWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("http://www.yahoo.com")) {
            // This is my web site, so do not override; let my WebView load
            // the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch
        // another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    }
} 
```

在我看来，这段代码应该可以工作，但是当我加载雅虎时，它仍然会转到外部浏览器。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-11T05:50:44.193

这是一种不同的方法。

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    String urlHost = Uri.parse(url).getHost();
    switch (urlHost) {
        case "yahoo.com":
            return false;
        case "www.yahoo.com":
            return false;
        case "m.yahoo.com":
            return false;
        default:
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:29:14.050

`getHost()`通常只返回域名，或者有时带有`www.`前缀。它从不包含`http://`协议 AFAIK。尝试使用：

```
if ((Uri.parse(url).getHost().equals("yahoo.com")) ||  (Uri.parse(url).getHost().equals("www.yahoo.com")) ||  (Uri.parse(url).getHost().equals("m.yahoo.com"))) {
    //Your code 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-11T10:43:57.777

试试这个它应该可以帮助你

```
private WebView mWebview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_yahoo);

        mWebview  = new WebView(this);

        mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript

        final Activity activity = this;

        mWebview.setWebViewClient(new WebViewClient() {
            @SuppressWarnings("deprecation")
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Toast.makeText(activity, description, Toast.LENGTH_SHORT).show();
            }
            @TargetApi(android.os.Build.VERSION_CODES.M)
            @Override
            public void onReceivedError(WebView view, WebResourceRequest req, WebResourceError rerr) {
                // Redirect to deprecated method, so you can use it in all SDK versions
                onReceivedError(view, rerr.getErrorCode(), rerr.getDescription().toString(), req.getUrl().toString());
            }
        });

        mWebview .loadUrl("http://www.yahoo.com");
        setContentView(mWebview );

    }

} 
```

# java - Java Scanner 的分隔符的保留内容

> ID：14802074
> 
> 赞同：2
> 
> 时间：2013-02-10T20:08:40.707
> 
> 标签：java, regex

如果这是一个愚蠢的，已经回答的问题，我深表歉意。我被 RegEx 吓到了，这是我第一次觉得我几乎让它按照我想要的方式工作。

我正在使用 Scanner 和以下分隔符解析字符串：

```
sc.useDelimiter(",\\p{Alpha}"); 
```

我已经考虑过这个想法，并且我确信这是我可以确保 Scanner 仅在我想要的逗号上分隔的唯一方法。

问题是我丢失了`\p{Alpha}`我更愿意保留的内容。保留逗号也可以，因为它很容易摆脱。如在

```
. . . length_range={7.574499506969005,103667.75776468226},height_median=44756.6002109626 . . . 
```

我只在花括号外的逗号上定界，保留`height_median=447...`

我该怎么做呢？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T20:24:18.970

您可以使用*前瞻*来实现这一点，检查不属于匹配的字母字符：

```
sc.useDelimiter(",(?=\\p{Alpha})"); 
```

# javascript - 用于搜索的 JavaScript iframe

> ID：14802081
> 
> 赞同：0
> 
> 时间：2013-02-10T20:09:20.220
> 
> 标签：javascript, html, performance, dom-events

当我在我的网站上运行此脚本时，搜索有效，但是当您单击 iframe 中的链接时，iframe 消失了。在我的网站[http://gigster.webege.com](http://gigster.webege.com)上查看真实的工作示例；它在右上角的文本框。

```
<script>
mouseover = false;

function searchFocus() {
i = document.getElementById("searchResults");
i.style.display = "block";
i.onmousemove = function () {
    mouseover = true;
}
i.onmouseout = function () {
    mouseover = false;
}
}
function searchBlur () {
if (mouseover) {
    return;
}
document.getElementById("searchResults").style.display = "none";
}

function querify(query) {
return query.split(" ").join("+") // replaces spaces with +s for url
}
function updateIframe(query) {
query = querify(query);
var i = document.getElementById("searchResults");
var searchEngine = "http://startpage.com/do/m/mobilesearch/?q=" 
var yourSiteToSearch= "site:example.com+"
i.src = searchEngine + yourSiteToSearch + query;
</script>
<body>
<input oninput="updateIframe(this.value)" onBlur = "searchBlur()" onFocus =   "searchFocus(this)" size="31" maxlength="255" style="height: 24px;" placeholder="Search..."    type="text">
<iframe id="searchResults" style="display:none;background-color:white;" height="100%" width="100%"></input></iframe>
</body> 
```

找到更好的解决方案 如果您需要，请联系我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:23:36.463

我在这里在 JsFiddle 中工作：http: [//jsfiddle.net/FjXyj/1/](http://jsfiddle.net/FjXyj/1/)

我唯一改变的是重新排列你的 HTML，所以 iframe 不在输入标签内：

```
<input oninput="updateIframe(this.value)" onBlur="searchBlur()" onFocus="searchFocus()"
size="31" maxlength="255" style="height: 24px;" placeholder="Search..."
type="text" />
<iframe id="searchResults" style="display:none;background-color:white;"
height="100%" width="100%"></iframe> 
```

并在您的 updateIframe 函数上放置一个最终 }。

iframe 似乎可以运行，并且在您单击它时不会消失。

# xaml - 删除 GridView 组之间的空间

> ID：14802082
> 
> 赞同：0
> 
> 时间：2013-02-10T20:09:20.397
> 
> 标签：xaml, windows-8, windows-runtime

我有一个按姓名的第一个字母分组的人员列表。

结果如下：

[![图片](../Images/16f72f044c098ec894e454e4b07cd8a9.png)](https://i.stack.imgur.com/qIZIi.png)

问题是 D 组和 G 组之间的空间，我该如何删除它？

GroupStyle 是这样声明的：

```
<GridView.ItemTemplate>
                    <DataTemplate>
                        <Border Width="150" Height="150" Background="#FFF14B01">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <TextBlock Text="{Binding Name}" VerticalAlignment="Center" Foreground="White" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.GroupStyle>
                    <GroupStyle HidesIfEmpty="True">
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Margin="1,0,0,20">
                                    <TextBlock FontWeight="Bold" Style="{StaticResource SubheaderTextStyle}" Text="{Binding Title}" />
                                </Grid>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <VariableSizedWrapGrid Margin="0,0,80,0" ItemHeight="150" ItemWidth="150" />
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </GridView.GroupStyle> 
```

Key / Value 集合中没有带有空集合的键。

事实上，如果组“A”在 5 列上，即使只有一项，每个组也将有 5 列空间。

所以，在图片中，D 有 3 个列空间，G 也有。

提前致谢

* * *

编辑 ：

通过添加以下内容解决了问题：

```
<GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel> 
```

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:42:04.557

我认为那个空白区域的原因是您有提供名称和字母的类的空实例。但是，如果没有这样的事情，我想这也是一个解决方案：

在源中创建一个属性，以便它返回序列中是否存在元素 - 可以这样做以返回 Visibility。

```
public Visibility IsVisible
{
        get
        {
        return Key == "" ? Visibility.Collapsed : Visibility.Visible;
        }
} 
```

然后将其绑定到网格的可见性。

# sed - sed - 在变量后的第一个空格处停止

> ID：14802086
> 
> 赞同：0
> 
> 时间：2013-02-10T20:09:31.513
> 
> 标签：sed

一个相当简单的困境。

如何`sed`在一行中只修改变量，如下所示：

```
_user=Det    # The name of the user 
```

成为：

```
_user=ULTRAMONSTER    # The name of the user 
```

...而不是这里有什么问题？

```
$ sed -i "s/_user=.* */_user=ULTRAMONSTER/" script 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:13:05.153

像这样的例子：

```
sed -i 's/_user= *[^ ]*/_user=ULTRAMONSTER/' script 
```

问题`.*`在于它匹配所有内容，包括评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:51:36.447

使用 awk 你可以这样做

```
awk -F" " '{gsub("_user=.*","_user=ULTRAMONSTER",$1)}1' temp.txt 
```

# php - 使用codeigniter在mysql中输入数据

> ID：14802089
> 
> 赞同：0
> 
> 时间：2013-02-10T20:09:44.337
> 
> 标签：php, mysql, codeigniter

我在 codeigniter 中创建了一个简单的表单，将 4 个项目插入 mysql。isbn，作者，价格，标题。当我点击提交时，它告诉我 book/book_validation 404 page not found。我尝试了所有我不知道出了什么问题的方法。我的数据库和配置文件都是正确的。

这是我的代码

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Book extends CI_Controller {

    public function index() {

        $this->load->view('insert_book');
    }

    public function book_validation() {

        $this->load->library('form_validation');

        $this->form_validation->set_rules('isbn', 'ISBN', 'required');
        $this->form_validation->set_rules('author', 'Author', 'required');
        $this->form_validation->set_rules('price', 'Price', 'required');
        $this->form_validation->set_rules('title', 'Title', 'required');

        if($this->form_validation->run() == TRUE) {
            echo "Every value has been accepted";
            $this->load->model("model_books");
            $this->insert();
    }

}

        public function insert() {
        $newRow = array("isbn" => $this->input->post('isbn'),
                        "author" => $this->input->post('author'),
                        "price" => $this->input->post('price'),
                        "title" => $this->input->post('title'),

        );

        $this->get_db->insert1($newRow);
        echo "Item added ";

        }

}

?>

    <!DOCTYPE HTML>
<html>

<head>
<meta charset="utf-8">
<title>Book Database</title>
</head>

<body>

    <h1>Book Database</h1>

    <?php

        echo form_open('book/book_validation');

        echo "<p>ISBN ";
        echo form_input('isbn');
        echo "</p>";

        echo "<p>Author: ";
        echo form_input('author');
        echo "</p>";

        echo "<p>Price: ";
        echo form_input('price');
        echo "</p>";

        echo "<p>Title: ";
        echo form_input('title');
        echo "</p>";

        echo "<p> ";
        echo form_submit('submit', 'Insert Book');
        echo "</p>";

        echo form_close();
    ?>

    </body>

</html> 

    <?php

class Model_books extends CI_Model {

    public function insert1($data) {

        $this->db->insert("books", $data);

        /*
        if($result) {
            echo $this->db->affected_rows() . "books inserted into database ";
        }

        else {
            echo "Book not added ";
        }
        */
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:10:35.530

需要修改的函数：

```
public function insert() {
    $newRow = array("isbn" => $this->input->post('isbn'),
         "author" => $this->input->post('author'),
         "price" => $this->input->post('price'),
         "title" => $this->input->post('title'),
    );

    $this->model_books->insert1($newRow); // NOT get_db, but model_books
    echo "Item added "; 
```

}

其他一切都很好。我测试一下！

# join - 来自多个表的 SQL 分组值

> ID：14802096
> 
> 赞同：1
> 
> 时间：2013-02-10T20:10:16.640
> 
> 标签：join, group-by, sum

我已经尝试了很长时间将两个表之间的外部连接的结果分组，但我没有运气。

使用下面的代码，我可以获得每个属性的新业务费率的正确输出，但我只想将所有业务费率值加在一起。

我尝试过 SUM 和 GROUP BY 的组合，但都没有奏效。

```
SELECT A.SHOPPING_CENTRE, B.YEAR_RENT*0.1 as business_rate
FROM SHOPPING_CENTRES A RIGHT OUTER JOIN AGENT_LANDLORD_PARTNERSHIP B
ON A.SHOPPING_CENTRE= 'New Change London' 
```

# r - 从 url 读取的 csv 有一行

> ID：14802101
> 
> 赞同：0
> 
> 时间：2013-02-10T20:11:02.513
> 
> 标签：r

从 R 控制台执行代码时：

```
 csv <-getURL('https://raw.github.com/jeanpat/pyFISH/master/GUI/karyotyper/example%20classification/source%20data/features/jp-Jpp48-1-DAPI.csv')

> csv
[1]  "part10.png;0.516891479492;0.975990396158;6.73515981735;0.114155251142;0.114155251142;0.114155251142\npart18.png;0.53596496582;

> dat <- read.csv(csv)
Erreur dans file(file, "rt") : impossible d'ouvrir la connexion 
```

csv 被视为一个字符。如何制作数据框？

谢谢你。

J.P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:25:44.280

用 阅读后，您`csv`是一个字符串`getURL`，您需要执行以下操作：

```
read.table(text = csv, sep = ';')

#           V1        V2        V3       V4        V5        V6        V7
# 1 part10.png 0.5168915 0.9759904 6.735160 0.1141553 0.1141553 0.1141553
# 2 part18.png 0.5359650 0.9546999 7.002188 0.1094092 0.1094092 0.1094092 
```

# javascript - Select2：为标签数据扩展匹配器

> ID：14802103
> 
> 赞同：0
> 
> 时间：2013-02-10T20:11:05.007
> 
> 标签：javascript, jquery, tags, jquery-select2

我使用[Select2](http://ivaynberg.github.com/select2/)进行标记。它就像一个魅力，但我有一个额外的要求：**匹配器应该不仅仅匹配项目的文本。**

让我解释。该`matcher`函数有两个参数，`term`和`text`。这允许我们比较给定的标签和输入的文本。但是，如果我为每个标签定义附加数据（通过`tags`函数），我将无法在匹配器中访问它。

示例代码：

```
// #myinput is a hidden input field
$('#myinput').select2({
  matcher: function(term, text) {
      return text.toUpperCase().indexOf(term.toUpperCase()) >= 0;
  },
  tags: function() {
      var tags = [];
      $('#myselect').find('option').each(function(index, option) {
          option = $(option);
          tags.push({
              id: option.val(),
              text: option.text(),
              category: option.data('category')
          });
      });
      return tags;
  }
}) 
```

我为每个标签设置了强制`id`和属性。`text`此外，还有一个名为`category`. 我想匹配文本和类别，而不仅仅是文本。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:53:10.327

这目前是不可能的（从 3.3 开始），请在 select2 的 github 问题跟踪器中使用 jsfiddle 提交增强请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T09:31:39.160

使用3.4.2，仍未实现。**但是真的**很简单。

在 select2.(min).js 行中找到使用 2 个 args 调用 matcher (" *e.matcher(* ");

在我的版本上，我有这样的东西：

```
{var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c) 
```

将“this”添加到第三个参数

> e.matcher(f,c,this);

结果，整个标签对象将被传递:)

# macos - 配置 mongod 服务：启动守护进程还是启动代理？

> ID：14802113
> 
> 赞同：2
> 
> 时间：2013-02-10T20:11:40.933
> 
> 标签：macos, mongodb, daemon, launch-daemon, launch-agent

我正在使用 10gen 构建在 OS X 上安装 MongoDB。
但是[他们的安装教程](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/#using-mongodb-from-10gen-builds)对我来说有点稀缺。

到目前为止，我已经找到了`mongod`作为[启动代理](https://stackoverflow.com/a/5601077/341929)和[启动守护程序](http://www.joyceleong.com/log/mongodb-installation-on-mac-os-x/)安装的示例。根据我对[启动守护进程与启动代理](http://techjournal.318.com/general-technology/launchdaemons-vs-launchagents/)的理解，什么方法是最好的/足够的最小值？

是否`mongod`需要通过窗口服务器显示信息，所以最好将服务配置为启动代理还是使其成为启动守护程序就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:57:19.977

首次启动守护程序与启动代理：`mongod`不需要通过窗口服务器显示信息，因此您如何执行此操作将更多地取决于您的用例。如果您打算`mongod`在此主机上永久作为服务器运行，那么 daemon 是最佳选择。如果您更多地将其用作开发人员并将其用于本地开发工作，那么代理是合适的，但守护程序也可以工作。因此，如果有疑问，请使用守护程序方法。

在大多数情况下，人们在 Mac 上针对 MongoDB 进行开发，在 Linux 上进行部署，因此您会找到各种建议。如果人们更频繁地在 Mac 上部署 prod，它将更倾向于守护进程。

为了证明这一点，请考虑`mongod`在 OS X 和 Linux 上启动时的默认值。在 OS X 上，默认情况下将从[smallfiles 选项](http://docs.mongodb.org/manual/reference/configuration-options/#smallfiles)`mongod`开始，并在作为副本集成员运行时分配一个小的 oplog (~256MB) - 你将为测试系统做的所有事情。对于 Linux，它将在没有 smallfiles 选项的情况下运行，并默认为 oplog 分配 5% 的可用空间。

# python - Twisted 中的边缘触发 epoll 事件

> ID：14802114
> 
> 赞同：1
> 
> 时间：2013-02-10T20:11:47.763
> 
> 标签：python, twisted

我正在编写这个 FileDecriptor 类（继承自 tiabstract.FileDescriptor）来监听 /sys 中某个文件的事件。

不幸的是，它只能与 Epoll 的边缘触发模式一起使用。所以我目前正在使用一些 hackish 解决方案在添加后修改 epoll 列表中的文件描述符：

```
self.startReading()
self._reactor._poller._control(_epoll.CTL_MOD, self.fileno(), _epoll.IN|_epoll.ET) 
```

有没有更好的方法来做到这一点？这会带来任何问题吗（例如，Twisted 是否有可能在某个时候再次移除 ET 标志）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:21:38.330

It's quite possible that Twisted will remove this flag again. As you can see by the profusion of `_`s in your example, you're using tons of private APIs here, and they may all change without warning.

However, there's no public interface to do what you want. In my opinion, it is a kernel bug if an interface *requires* the use of a specific sycall interface to query its read/write readiness (like epoll) rather than following some general rule that works with `epoll`, `select`, `poll`, etc. My first inclination would be to file the bug against the linux kernel. However, if the kernel folks won't fix it, and you would like to contribute a patch with unit tests to expose a public interface for such linux+`epoll`-specific things to Twisted, please feel free to open a ticket.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:31:35.523

需要注意的一件有趣的事情是 epoll 文件描述符本身是由 epoll 机制支持的。

如果你真的需要以特定的方式监控另一个描述符，而 epoll reactor 不支持，你可以创建自己的 epoll 文件描述符，随心所欲地配置它，然后询问 epoll（或 select，或 poll，甚至 gtk ) reactor 为您监控您的 epoll 文件描述符。当反应器说您的 epoll 文件描述符是可读的时，您可以对其执行零超时 epoll_wait 以了解它想告诉您的内容。

Twisted 已经完全支持这一点，您需要做的就是将`IReadDescriptor`接口实现为围绕您的 epoll 文件描述符的包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-09T09:21:54.693

8 年后，这仍然是 ET EPoll with twisted 搜索结果的顶部，所以这是我确定的解决方案。请注意，这是“标签外”，因为它是扭曲本身的扩展。如果您破坏了它，请不要纠缠扭曲的作者寻求帮助。首先是代码：

```
from twisted.internet.epollreactor import EPollReactor
from select import EPOLLET, EPOLLIN, EPOLLOUT

class EPETReactor(EPollReactor):
    epflags = EPOLLIN
    def addReader(self, reader):
        try:
            self._add(reader, self._reads, self._writes, self._selectables,
                      self.epflags, EPOLLOUT)
        except IOError as e:
            if e.errno == errno.EPERM:
                self._continuousPolling.addReader(reader)
            else:
                raise
    def startET(self):
        self.epflags = EPOLLIN | EPOLLET
    def stopET(self):
        self.epflags = EPOLLIN 
```

请注意，这仍然涉及到twisted 的非公共API，但它允许您在一个地方这样做，无论您需要在哪里添加ET FD。如果 twisted 的内部变化足以破坏您的代码，您只需在此处修复它。此外，不会有任何事件未触发的边缘情况，因为事件在您添加 FD 和将其设置为 ET 模式之间到达。

另请注意，我们不只是一直强制 ET 模式，因此您可以*在*切换到 ET 模式之前配置所需的任何 FD。

### 用例

如果您正在通过套接字读取`MSG_PEEK`并且只有一半的标头已到达，则选择是在套接字上忙于旋转和使用边缘触发模式（或从套接字读取并弄清楚如何将片段与文件一起发送） -descriptor 到其目的地，但这并不总是可能的）。

# c# - 如何拦截 ADFS 2.0 身份验证请求

> ID：14802119
> 
> 赞同：0
> 
> 时间：2013-02-10T20:12:22.577
> 
> 标签：c#, wcf, claims-based-identity, adfs2.0

根据我对[ADFS 2.0 是否支持自定义身份验证存储的阅读](https://stackoverflow.com/questions/4313512/can-i-use-adfs-2-0-to-authenticate-certain-users-against-sql-server/4938662#4938662)，ADFS 支持的唯一身份验证存储是 ActiveDirectory（我最初认为自定义属性存储会在这里帮助我，不幸的是它不是）。然而，我们正在考虑向 ADFS 添加 2 因素身份验证，不仅基于浏览器的被动配置文件（基本上自定义登录页面），而且还包括主动配置文件（例如端点服务/信任/13/UsernameMixed）。我能想到的唯一方法是拦截到ADFS服务器的请求，我听说ADFS端点是WCF端点，但是我在ADFS文件夹中没有看到配置文件（安装在c:\windows\ ADFS 在我的 2012 服务器上）。否则，我正在考虑使用 WCF 行为扩展（如果您知道的话，可能还有其他方法）来拦截请求，但是到目前为止，我还没有看到如何做到这一点。我是 ADFS/WCF 的新手，对此的任何见解将不胜感激。也许我正在尝试一些不可能的事情。

在这一点上，我们真的不想使用另一个 STS 来让 ADFS 与之联合。客户 ADFS 环境的变化太大了。尽管开源 StarterSTS（[http://startersts.codeplex.com/](http://startersts.codeplex.com/)，新名称是 IdentityServer[链接](http://thinktecture.github.com/)）是一个很棒的产品，但是它是开源的，并且不确定它的测试效果如何以及它在生产部署中的可靠性如何，如果有人知道StarterSTS的生产部署，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:28:28.970

我不知道如何自定义 ADFS 的活动端点。

IdentityServer（以前称为 StarterSTS）部署在许多生产环境中（直到非常大的环境）。所以这可能是一个选择。

# javascript - 一键选择所有文本（不可编辑）

> ID：14802121
> 
> 赞同：1
> 
> 时间：2013-02-10T20:12:41.827
> 
> 标签：javascript

我试图在选择后禁用文本可编辑性，但将 contenteditable 设置为 false 不起作用。

```
<div class="block" contenteditable="true" onclick="document.execCommand('selectAll',false,null)">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:19:46.440

它的简单尝试如下......

`contenteditable="false"`在您的 div 属性中设置...

它在 chrome、firefox 和 IE 中对我来说工作正常

小提琴：http: [//jsfiddle.net/GZNYc/6/](http://jsfiddle.net/GZNYc/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:17:51.407

[http://jsfiddle.net/UQTY2/15/](http://jsfiddle.net/UQTY2/15/)

添加`disabled`属性

```
document.getElementById("myId").setAttribute("disabled", "disabled"); 
```

或者

```
document.getElementById("myId").setAttribute("readonly", "readonly"); 
```

或者

```
document.getElementById("myId").setAttribute("contenteditable", "false"); 
```

# c - ANSI 游标索引是否可移植

> ID：14802126
> 
> 赞同：1
> 
> 时间：2013-02-10T20:13:10.637
> 
> 标签：c, cross-platform, portability

我编写了一个小型控制台程序，需要偶尔清除终端屏幕。我为 *nix 系统编写了代码并`system("clear")`在这些实例中使用。一旦我的代码完成，我就会对其进行审查以评估我的代码的可移植性。上述清除屏幕的方法是我唯一明显的可移植性问题。然后，我寻找其他可能的方法来清除终端，并在 上找到了一些文档`ANSI Cursor Indexing`，特别是：

```
void cls() {
  //27 is ESC ASCII char
  printf("%c[2J",27);   //clears screen
  printf("%c[0;0H",27); //sets cursor at [0,0]
} 
```

令我惊讶的是，这段代码在我的 *nix 系统上运行得非常好。我想知道，这个 ANSI 光标索引方案是否可移植？这段代码能否在所有使用 C 标准编译器的系统上按预期编译和运行？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:17:15.190

对于像这样的跨平台终端操作，我会推荐[ncurses](http://www.gnu.org/software/ncurses/ncurses.html)和[pdcurses](http://pdcurses.sourceforge.net/)：

```
#include <curses.h>

// Init curses somewhere before in your code
initscr();

void cls() {
    clear();
    move(0, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:19:38.127

ANSI 和 VT100 转义序列非常接近，这意味着如果终端是这两个中的任何一个，上面列出的命令集肯定会起作用。但请记住，ANSI 是 VT100 的超集，因此 VT100 兼容终端不会理解所有 ANSI 序列。

VT100 终端仿真器是绝对最常见的终端仿真器之一（包括 xterm 和其他“X-windows 样式 shell”的默认设置。

很明显，一个 Volker-Craig 404 终端仿真器 [有人用吗？;)] 不会理解 ANSI 或 VT100 转义序列，或者实际上任何转义序列。

我还要指出，通过将 ESC 合并到常量字符串中，您的代码会更简单：

```
printf("\033[2J"); 
```

或者如果你想让它更具可读性：

```
#define ESC_STR "\033"

printf(ESC_STR"[2J"); 
```

# python - 元组对，使用 python 找到最小值

> ID：14802128
> 
> 赞同：74
> 
> 时间：2013-02-10T20:13:55.337
> 
> 标签：python, tuples, min

我想找到按给定列排序的元组列表的最小值。例如，我将一些数据排列为 2 元组列表。

```
data = [ (1, 7.57), (2, 2.1), (3, 1.2), (4, 2.1), (5, 0.01), 
         (6, 0.5), (7, 0.2), (8, 0.6)] 
```

如何仅通过比较元组中的第二个数字来找到数据集的最小值？

IE

```
data[0][1] = 7.57
data[1][1] = 2.1 
```

分钟（数据）=`(5, 0.01)`

`min( data )`return `(1, 7.57)`，我接受对于索引 0 的最小值是正确的，但我想要索引 1 的最小值。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-02-10T20:21:50.470

```
In [2]: min(data, key = lambda t: t[1])
Out[2]: (5, 0.01) 
```

或者：

```
In [3]: import operator

In [4]: min(data, key=operator.itemgetter(1))
Out[4]: (5, 0.01) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-24T02:19:24.320

**使用 numpy，您可以使用这些命令来获取列表中项最小的元组：**

使这项工作的成分是 numpy 的高级数组切片和 argsort 功能。

```
import numpy as np
#create a python list of tuples and convert it to a numpy ndarray of floats
data = np.array([ (1, 7.57), (2, 2.1), (3, 1.2), 
                  (4, 2.1), (5, 0.01), (6, 0.5), (7, 0.2), (8, 0.6)])

print("data is")
print(data)

#Generate sortIndices from second column
sortIndices = np.argsort(data[:,1])

print("sortIndices using index 1 is:" )
print(sortIndices)
print("The column at index 1 is:")
print(data[:,1])
print("Index 1 put into order using column 1")
print(data[sortIndices,1])
print("The tuples put into order using column 1")
print(data[sortIndices,:])
print("The tuple with minimum value at index 1")
print(data[sortIndices[0],:])
print("The tuple with maximum value at index 1")
print(data[sortIndices[-1],:]) 
```

哪个打印：

```
data is
[[ 1\.    7.57]
 [ 2\.    2.1 ]
 [ 3\.    1.2 ]
 [ 4\.    2.1 ]
 [ 5\.    0.01]
 [ 6\.    0.5 ]
 [ 7\.    0.2 ]
 [ 8\.    0.6 ]]

sortIndices using index 1 is:
[4 6 5 7 2 1 3 0]

The column at index 1 is:
[ 7.57  2.1   1.2   2.1   0.01  0.5   0.2   0.6 ]

Index 1 put into order using column 1
[ 0.01  0.2   0.5   0.6   1.2   2.1   2.1   7.57]

The tuples put into order using column 1
[[ 5\.    0.01]
 [ 7\.    0.2 ]
 [ 6\.    0.5 ]
 [ 8\.    0.6 ]
 [ 3\.    1.2 ]
 [ 2\.    2.1 ]
 [ 4\.    2.1 ]
 [ 1\.    7.57]]

The tuple with minimum value at index 1
[ 5\.    0.01]

The tuple with maximum value at index 1
[ 1\.    7.57] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-27T22:42:48.110

即使列夫的回答是正确的，我也想添加排序方法，以防有人对第一个`n` 最小值感兴趣。要考虑的一件事是`min`操作的运行时间是`O(N)`排序的位置`O(N Log N)`

```
data = [ (1, 7.57), (2, 2.1), (3, 1.2), (4, 2.1), (5, 0.01), (6, 0.5), (7, 0.2), (8, 0.6)]
data.sort(key=lambda x:x[1])
print data

>>> [(5, 0.01), (7, 0.2), (6, 0.5), (8, 0.6), (3, 1.2), (2, 2.1), (4, 2.1), (1, 7.57)] 
```

> [https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt](https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt)

# iphone - Timer Loop 从后台返回后偶尔崩溃

> ID：14802131
> 
> 赞同：5
> 
> 时间：2013-02-10T20:14:17.753
> 
> 标签：iphone, ios6

我在最新的应用程序版本中遇到了一致的问题。我有一个在 AppDelegate 中运行的计时器，它每 30 秒调用一次函数来加载新广告。我认为这是这次崩溃的罪魁祸首。使用 Crittercism，我已经为 13 个用户发生了超过 20 次崩溃。用户大多使用 IOS 6 或它的一些变体。这是它给我的日志：

SEGV_ACCERR

0 libobjc.A.dylib 0x3acd25b0 objc_msgSend + 16

1 基础 0x3394b277 __NSFireDelayedPerform + 451

2 核心基础 0x330125df **CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION** + 15

3 核心基础 0x33012291 __CFRunLoopDoTimer + 273

4 核心基础 0x33010f01 __CFRunLoopRun + 1233

5 核心基础 0x32f83ebd CFRunLoopRunSpecific + 357

6 核心基础 0x32f83d49 CFRunLoopRunInMode + 105

7 图形服务 0x36b452eb GSEventRunModal + 75

8 UIKit 0x34e99301 UIApplicationMain + 1121

9 AutoScene 0x000031b7 主要 (main.m:7)

我的计时器是：

```
[NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(resetAdTimer) userInfo:nil repeats:YES]; 
```

我不知道这是否是同样的问题，但我经历过从后台返回应用程序并且它只是挂起的时候。它似乎也挂起 30 秒，这让我相信这是计时器代码。

这是管理广告获取的糟糕方式吗？长时间进入后台时，计时器代码是否会出错？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:42:00.793

您应该使 appWillResignActive 中的计时器无效，并在 appWillBecome active 中再次创建它。 [从文档...](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

> 您应该使用此方法暂停正在进行的任务、禁用计时器并降低 OpenGL ES 帧速率。游戏应使用此方法暂停游戏。处于非活动状态的应用程序在等待转换到活动或后台状态时应该做最少的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T18:18:35.673

**对Swift 4.2**这样做

 **```
override func viewDidLoad() {
        let notificationCenter = NotificationCenter.default
        notificationCenter.addObserver(self, selector: #selector(appWillResignActive), name: UIApplication.willResignActiveNotification, object: nil)
        notificationCenter.addObserver(self, selector: #selector(appBecomesActive), name: UIApplication.didBecomeActiveNotification, object: nil)
}

@objc func appWillResignActive() {
    //to background
}

@objc func appBecomesActive() {
    //to front
} 
```

不要忘记删除观察者。

```
 notificationCenter.removeObserver(self, name: UIApplication.willResignActiveNotification, object: nil)
    notificationCenter.removeObserver(self, name: UIApplication.didBecomeActiveNotification, object: nil) 
```

灵感来自这里[https://www.hackingwithswift.com/example-code/system/how-to-detect-when-your-app-moves-to-the-background](https://www.hackingwithswift.com/example-code/system/how-to-detect-when-your-app-moves-to-the-background)**

# python - 标签 XML 中的 Python 元素树处理标签

> ID：14802132
> 
> 赞同：0
> 
> 时间：2013-02-10T20:14:21.173
> 
> 标签：python, elementtree

我正在使用来自 dailymed.nlm.nih.gov 的 xml 标签。在阅读与药物相关的禁忌症时，我遇到了问题。我想要标签内的所有内容，但是一旦我点击内部标签，它就会中断。我试过迭代所有子元素，但我能做的最好的就是让“警告”显示出来。“；无尿；对……过敏”丢失了。如果有人知道使用解析器获取这些数据的方法，那将有很大帮助。谢谢！

```
 <component>
        <section ID="LINK_8e9e0719-efa5-451c-bea3-d547298ad0a1">
           <id root="8e9e0719-efa5-451c-bea3-d547298ad0a1"/>
           <code code="34070-3" codeSystem="2.16.840.1.113883.6.1" displayName="CONTRAINDICATIONS SECTION"/>
           <title>CONTRAINDICATIONS</title>
           <text>
              <paragraph>Atenolol and chlorthalidone tablets are contraindicated in patients with: sinus bradycardia; heart block greater than first degree; cardiogenic shock; overt cardiac failure (see<content styleCode="bold">
                    <linkHtml href="#LINK_0df2629f-13c7-4b14-8664-475c32377c68">WARNINGS</linkHtml>
                 </content>); anuria; hypersensitivity to this product or to sulfonamide-derived drugs.</paragraph>
           </text>
           <effectiveTime value="20101001"/>
        </section>
     </component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:37:04.110

假设您正在使用类似以下内容的内容，您需要使用`ET.tostring`它来获取子元素的所有文本。

```
import xml.etree.ElementTree as ET
txt = """
<component>
<section ID="LINK_8e9e0719-efa5-451c-bea3-d547298ad0a1">
    <id root="8e9e0719-efa5-451c-bea3-d547298ad0a1"/>
    <code code="34070-3" codeSystem="2.16.840.1.113883.6.1" displayName="CONTRAINDICATIONS SECTION"/
    <title>CONTRAINDICATIONS</title>
    <text>
    <paragraph>Atenolol and chlorthalidone tablets are contraindicated in patients with: sinus brady
        <linkHtml href="#LINK_0df2629f-13c7-4b14-8664-475c32377c68">WARNINGS</linkHtml>
            </content>); anuria; hypersensitivity to this product or to sulfonamide-derived drugs.</
    </text>
    <effectiveTime value="20101001"/>
</section>
</component>"""

root = ET.fromstring(txt)

for e in root.iter('text'):
    print ">>"
    print ET.tostring(e, method="text")
    print "<<" 
```

给

```
>>

    Atenolol and chlorthalidone tablets are contraindicated in patients with: sinus bradycardia; heart block greater than first degree; cardiogenic shock; overt cardiac failure (see
        WARNINGS
            ); anuria; hypersensitivity to this product or to sulfonamide-derived drugs.

<< 
```

# php - ajax打印错误

> ID：14802133
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:14:35.640
> 
> 标签：php, ajax

我对其他页面有 ajax 请求以在打印机上打印某些内容，但是当我调用函数时，我无法打印该页面

阿贾克斯代码：

```
/******* Print A6 ********/
function ButtonClickHanlder( e ) {
        e.preventDefault();
        var bills_ID = $('#bills_ID').val();
        $.post("Bills/BillsPrintA6.php", { bills_ID: bills_ID },
            function(data){
                //alert("Data Loaded: " + data);
            }
        );
    }

    $(function(){

        $('#printA6').click(ButtonClickHanlder);
    });
/***************/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:25:53.633

我想当你去打印数据时没有加载。在将其发送到打印机之前，您可能需要启动 ajax。

# vim - 拼写文件之间的单词字符不同 (E763)

> ID：14802136
> 
> 赞同：14
> 
> 时间：2013-02-10T20:15:33.067
> 
> 标签：vim, spell-checking

## 概要

我无法解决 Vim 错误 E763: *Word characters different between spell files*。

## 细节

我的`.vimrc`包括多种拼写语言：

```
set spelllang=en,de,pt,fr 
```

第一次运行 Vim 时，会提示下载丢失的拼写文件，并将它们放入`.vim/spell`. 使用我上面的配置，这会产生三个文件`de.utf-8.spl`、`fr.utf-8.spl`和`pt.utf-8.spl`. （英文版随 Vim 软件包一起提供。）

E763 的文档提到：

> Vim 允许你在同一个文件中使用多种语言的拼写检查。您可以在“spelllang”选项中列出它们。因此，相同编码的所有拼写文件都必须使用相同的单词字符，否则它们无法无误地组合在一起。如果您收到单词表不同的警告，您可能需要使用 :mkspell 再次生成 .spl 文件。检查使用的 .aff 文件中的 FOL、LOW 和 UPP 行。
> 
> 使用“-ascii”参数生成的 XX.ascii.spl 拼写文件将不包含带有字符的表，因此它可以与拼写文件组合以进行任何编码。.add.spl 文件也不包含该表。

看来我需要重新生成单词表，但是这样做的步骤并不直接从手册中遵循。我该如何进行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T22:39:03.503

我有同样的问题。我通过询问*vim_dev*邮件列表上的专家解决了这个问题。

解决方案，直接从马的嘴里：

> 尝试用现在从服务器下载的一个替换您很久以前安装的 en_gb 拼写文件。网站上的文件已在一段时间前更新以修复错误。
> 
> 不幸的是，还没有“更新运行时文件”命令。

[你可以在这里](https://groups.google.com/d/topic/vim_dev/7HTs6kIKnPQ/discussion)找到完整的线程。

# android - queryIntentActivities() 导致某些应用程序出现 nullPointerException

> ID：14802137
> 
> 赞同：1
> 
> 时间：2013-02-10T20:15:34.203
> 
> 标签：android, android-intent, nullpointerexception, android-activity

## 背景

我创建了一个需要获取其他应用程序支持的意图信息的应用程序（例如，为了在桌面上创建快捷方式）。

## 问题

我正在使用下一个简单的代码，它在我测试过的 99% 的应用程序上运行良好：

```
final Intent mainIntent=new Intent();
mainIntent.setPackage(packageName);
final List<ResolveInfo> resolveInfos=getPackageManager().queryIntentActivities(mainIntent,0); 
```

问题在于，在某些应用程序上（例如[这个](https://play.google.com/store/apps/details?id=com.mxtech.videoplayer.ad)程序包名称为 "com.mxtech.videoplayer.ad" 的应用程序），它会导致 nullPointerException（在代码的最后一行）。

顺便说一句，我没有添加额外过滤标志的原因是因为我确实想获得所有可能的标志，然后向用户展示一个选择——要么使用默认标志，要么尝试其他可能效果不佳的标志。

## 我试过的

尽管我编写的代码适用于各种应用程序，但我尝试添加一些标志，例如：

```
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER); 
```

或者：

```
final List<ResolveInfo> resolveInfos=getPackageManager().queryIntentActivities(mainIntent,PackageManager.MATCH_DEFAULT_ONLY); 
```

或两者。

## 问题

为什么我只为这个应用程序获得这个异常，我该如何修复它并获得我可以启动它的所有受支持的意图？

当然，我可以添加两种获取意图的方法（使用 try-catch），但也许有一种更“正确”的方法可以做到这一点。

我知道我可以将操作添加到 "Intent.ACTION_MAIN" 的意图中，但这也消除了许多我希望获得的可能意图。

# c++ - 使用 cuda_gl_interop 函数设置时是否可以检索像素缓冲区？

> ID：14802140
> 
> 赞同：0
> 
> 时间：2013-02-10T20:15:46.423
> 
> 标签：c++, opengl, cuda, pbo

我已经阅读了该主题，并且正在实现并行化光线跟踪引擎（目前仅使用光线-球体交叉点）但是似乎我只能在 GLUT 窗口中显示我的结果或直接写入文件，而不是两者。我不知道如何实现这一目标。我目前正在设置一个 cudaGraphicsResource 并将其映射到一个 GL 像素缓冲区对象。由于对 OpenGL 相对缺乏经验，我不确定如何在 CPU 上检索像素数据。

**编辑：**对不起。正如我发布的那样，我发现了令人眼花缭乱的 glReadPixels 例程。会调查的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:50:33.797

我发现像素缓冲区对象被引用到 CUDA 代码这一事实是无关紧要的。只需进行 glReadPixels(0,0,DIM,DIM,GL_RBGA,GL_UNSIGNED_BYTE,&bucketofdata) 调用就足够简单了。我还没有完全回答自己的问题是为什么如果使用 malloc 初始化 bucketofdata 并且仅当它被声明为 GLubyte bucketofdata[DIM*DIM*sizeof(uchar4)] 时上述调用会失败。

# javascript - 获取访问令牌时签名无效的 LinkedIn Oauth

> ID：14802141
> 
> 赞同：3
> 
> 时间：2013-02-10T20:15:58.830
> 
> 标签：javascript, jquery, cordova, linkedin, childbrowser

我正在努力将 LinkedIn OAuth 添加到我创建的 Phonegap 应用程序中，以允许用户自动发布到他们的 LinkedIn 公开个人资料。我似乎无法通过 Childbrowser 插件从 LinkedIn REST API 检索访问令牌。为了签署我的 REST API 调用，我在 javascript 中使用 OauthSimple 插件。

当我将签名的 POST 发送到 REST API 时，我收到 401 Unauthorized 错误。它指定我的签名无效，我终生无法弄清楚出了什么问题。

这是我在请求访问令牌时从 LinkedIn 收到的 json 响应：

```
{"readyState":4,
"responseText":"oauth_problem=signature_invalid&
oauth_problem_advice=com.linkedin.security.auth.pub.LoginDeniedInvalidAuthTokenException%20
while%20obtaining%20request%20token%20for%20%3APOST%26
https%253A%252F%252Fapi.linkedin.com%252Fuas%252Foauth%252F
accessToken%26
oauth_consumer_key%253Dkivazo8r4xr3%2526
oauth_nonce%253D6ruTZ%2526
oauth_signature_method%253DHMAC-SHA1%2526
oauth_timestamp%253D1360525594%2526
oauth_token%253D0011aab8-0cf0-4555-ba44-304b34e4b636%2526
oauth_verifier%253D32140%2526
oauth_version%253D1.0,
"status":401,
"statusText":"Unauthorized"} 
```

如果你想看看我的 javascript，这里是我的函数：

```
function parametersFromUrl(url) {
    var result = {};
    //Remove everything up to where the parameters start. could be after # or after ?
    url = url.substr(url.indexOf('?') + 1).substr(url.indexOf('#') + 1)
    //Replace html escape characters
    url = url.replace(/%23/g, '#').replace(/%26/g, '&').replace(/%3D/g, '=');
    var parameters = url.split('&');
    for(var i = 0; i < parameters.length; i++) {
        var parameter = parameters[i].split('=');
        result[parameter[0]] = parameter[1];
    }
    return result;
}

/* -- Linkedin START -- */

var Linkedin = {
    init:function() {
        var signatures = { consumer_key: '555555', shared_secret: '555555' };
        var simple = new OAuthSimple(signatures.consumer_key, signatures.shared_secret);
        Linkedin.getRequestToken(simple, signatures);
    },
    getRequestToken:function(simple, signatures) {
        var result = simple.reset().sign({
            action: 'POST',
            path: 'https://api.linkedin.com/uas/oauth/requestToken',
            signatures: signatures
        });
        console.log(result);
        console.log(result.signed_url);
        jQuery.ajax({
            url: result.signed_url,
            type: 'POST',
            success: function(data) {
                jQuery.extend(signatures, parametersFromUrl(data));
                console.log(signatures['oauth_token']);
                Linkedin.childBrowserAuthenticate(simple, signatures);
            },
            error: function() {
                console.log('error');
            }
        });
    },
    childBrowserAuthenticate:function(simple, signatures) {
        ChildBrowser.install();
        var childBrowser = window.plugins.childBrowser;
        var browserUrl = simple.reset().sign({
            path: signatures['xoauth_request_auth_url']
        }).signed_url;
        browserUrl = browserUrl + '&oauth_token=' + signatures['oauth_token'];
        childBrowser.showWebPage(decodeURIComponent(browserUrl));

        function finish(err) {
            if (err) onFailure(err);
            childBrowser.onClose = null;
            childBrowser.close();
        }

        childBrowser.onLocationChange = function(loc) {
            if (loc.indexOf('oauth_problem') > -1) {
                finish('User authorization error');
            } else if (loc.indexOf('oauth_verifier') > -1) {
                alert('good');
                finish();
                $.each(signatures, function(i,item) {
                    console.log(i);
                    console.log(item);
                });
                console.log("next");
                params = parametersFromUrl(loc);
                jQuery.extend(signatures, params);
                $.each(signatures, function(i,item) {
                    console.log(i);
                    console.log(item);
                });
                Linkedin.getAccessToken(simple, signatures);
            }
        };

        childBrowser.onClose = function() {
            finish('User cancelled authorization.');
        };
    },
    getAccessToken:function(simple, signatures) {
        console.log("last");
        $.each(signatures, function(i,item) {
                    console.log(i);
                    console.log(item);
                });

        var requestUrl = simple.reset().sign({
            action: 'POST',
            path: 'https://api.linkedin.com/uas/oauth/accessToken',
            parameters: {
                'oauth_verifier': signatures.oauth_verifier,
                'oauth_token': signatures.oauth_token,
                'oauth_token_secret': signatures.oauth_token_secret,
                'oauth_version': "1.0"
            }
        }).signed_url;
        console.log(requestUrl);
        jQuery.ajax({
            url: requestUrl,
            type: 'POST',
            success: function(data) {
                jQuery.extend(signatures, parametersFromUrl(data));
                $.each(signatures, function(i,item) {
                    console.log(i);
                    console.log(item);
                });
                Linkedin.getUserProfile();
            },
            error: function(resp) {
                alert('crap');
                console.log(resp);
            }
        });
    },
    getUserProfile:function() {
        var result = simple.reset().sign({
            action: 'GET',
            path: 'https://api.linkedin.com/v1/people/~:(first-name,last-name,headline,picture-url)',
            parameters: {
                format: 'json'
            }
        });

        jQuery.ajax({
            url: result.signed_url,
            success: function(userData) {
                onSuccess(userData);
                alert('success');
                alert(userData);
            },
            error: function(resp) {
                onFailure('Failed to get profile information')
            }
        });
    }
};

/* -- Linkedin END -- */ 
```

当我向 LinkedIn REST API 发出请求 (POST) 以获取访问令牌时，我的网址如下所示：

```
https://api.linkedin.com/uas/oauth/accessToken?oauth_consumer_key=555555&oauth_nonce=KXuSN&oauth_signature=rk7eNjTxlhi0UOppOPfA%2BYvQ8uM%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1360527087&oauth_token=206e2377-c790-49a6-839c-a996cadfbdfc&oauth_verifier=62355&oauth_version=1.0 
```

我将我的 oauth 签名与 Linkedin oauth 控制台生成的签名进行了比较，但它们并不相同。有什么问题？

我使用[本教程](https://clearblade.wordpress.com/2012/08/09/oauth-with-worklight-cordova-childbrowser-plugin/)来指导我完成整个过程。

如果您需要更多信息，请告诉我，我会添加到我的问题中。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:48:35.297

为什么不使用 Linkedin Javascript 库？它为您完成所有后端工作，包括签署请求。把它放在你的头文件中。

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
   api_key:    [API_KEY]
</script> 
```

然后将其放置在您需要显示登录按钮的任何位置。

```
 <script type="in/Login"> Hello, <?js= firstName ?> <?js= lastName ?>. </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:06:54.197

所以我找到了我的答案！因为我使用的是Phonegap，所以我可以在没有签名库的情况下直接对API 进行JSON 调用。因此，我使用 OAuth 2.0 直接从 API 请求 Auth Code，并将值添加到 url。这是文档的链接。

[https://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication)

# iframe - 如何以编程方式覆盖浏览器的用户代理？

> ID：14802142
> 
> 赞同：0
> 
> 时间：2013-02-10T20:16:02.900
> 
> 标签：iframe, cross-browser, user-agent

假设我的`<iframe>`网页上有一个。如何让这个 iframe 显示为 iPhone，例如，通过覆盖浏览器和操作系统的默认用户代理？这种效果是否可能在不安装扩展或需要用户交互的情况下实现？

虽然我正在寻找[一个](http://googlesystem.blogspot.com/2011/12/changing-user-agent-new-google-chrome.html)程序化和跨浏览器解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:19:35.383

如果您尝试以编程方式从 Internet 中提取页面，最好的选择是使用类似`wget`或`curl (libcurl)`. 除非您为其编写扩展程序，否则 Chrome 并不是真正的“可编程”。

# java - LWJGL Display.isCloseRequested() 抛出错误？

> ID：14802143
> 
> 赞同：0
> 
> 时间：2013-02-10T20:16:28.457
> 
> 标签：java, macos, lwjgl

好吧，我目前正在使用 Mac，我只是在创建一个简单的 LWJGL 测试程序以确保该库能够正常工作……但是当我尝试获取显示器的关闭请求状态时，它会引发错误……

我目前使用的是 Mac OSX 10.7.5，我使用的是 LWJGL 2.8.5，并且我正在运行最新的 java (1.7.0_13)。如果这是我犯的错误，请不要犹豫指出。

错误：

```
JavaVM WARNING: JAWT_GetAWT must be called after loading a JVM
Fatal error: Unable to create window.
org.lwjgl.LWJGLException: Could not get the JAWT interface
Exception in thread "main" java.lang.IllegalStateException: Cannot determine close requested state of uncreated window
    at org.lwjgl.opengl.Display.isCloseRequested(Display.java:546)
    at lwjgltest.LWJGLTest.start(LWJGLTest.java:26)
    at lwjgltest.LWJGLTest.main(LWJGLTest.java:13)
Java Result: 1
BUILD SUCCESSFUL (total time: 2 seconds) 
```

编码：

```
package lwjgltest;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

/**
 *
 * @author DealerNextDoor
 */
public class LWJGLTest {
    public static void main(String[] args) {
        new LWJGLTest().start(); // Line 13
    }

    public void start() {
        try {
            Display.setDisplayMode(new DisplayMode(640, 480));
            Display.setTitle("LWJGL Test");
            Display.create();
        } catch (LWJGLException e) {
            System.err.println("Fatal error: Unable to create window.");
            System.err.println(e);
        }

        while (!Display.isCloseRequested()) { // Line 26

            Display.update();
            Display.sync(60);
        }

        Display.destroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:51:17.150

If you'll look at your error you will find that a window was not created: `Fatal error: Unable to create window.`

As a result, you cannot use the method `isCloseRequested()`.

I think that you will find some information about why it is not creating [here](http://lwjgl.org/forum/index.php?topic=4326.30)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:54:32.777

将 java 降级到 1.6 应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T22:02:58.100

我将我的移动`Display.create();`到类构造函数而不是方法内部，并且“无法确定未创建窗口的关闭请求状态”错误消失了。

```
public Core() { // Main class constructor

    try {
        LibraryLoader.loadNativeLibraries();
    } catch (Exception e) {
        e.printStackTrace();
        System.err.println("Error Loading Natives!");
    }

    Scanner in = new Scanner(System.in);
    startTime = System.currentTimeMillis();

    try {
        Display.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));
        Display.create();
        input = new InputHandler();
        Display.setTitle(TITLE);
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(1);
        cleanUp();

    }
    initGL();
    mainLoop();

} 
```

# ios - 文件目录命令文件吗？IOS

> ID：14802144
> 
> 赞同：2
> 
> 时间：2013-02-10T20:16:39.120
> 
> 标签：ios, objective-c, nsfilemanager

我以这种方式将许多不同的图像保存到文档目录中：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

int num = arc4random() % 100000000000000;

NSString* path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat:@"%dtest.png", num]];
NSData* data = UIImagePNGRepresentation(image);
[data writeToFile:path atomically:YES]; 
```

然后我以这种方式读取文件：

```
NSString *stringPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES)objectAtIndex:0];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
//NSString* FinalPath = [documentsDirectory stringByAppendingPathComponent: @"Images/"];

NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:&error];

for(int i=0;i<[filePathsArray count];i++)
{
    NSString *strFilePath = [filePathsArray objectAtIndex:i];
    if ([[strFilePath pathExtension] isEqualToString:@"jpg"] || [[strFilePath pathExtension] isEqualToString:@"png"] || [[strFilePath pathExtension] isEqualToString:@"PNG"])
    {
        NSString *imagePath = [[stringPath stringByAppendingFormat:@"/"] stringByAppendingFormat:strFilePath];
        NSData *data = [NSData dataWithContentsOfFile:imagePath];
        if(data)
        {

            @try {

               NSString *nameOfGroup = [array objectAtIndex:i];

                MWPhoto *photo;
                photo= [MWPhoto photoWithFilePath:imagePath];
                [finalPhotoArray addObject:photo];
            }
            @catch (NSException *exception) {

                NSString *nameOfGroup = @"No description available for this sheet";

                MWPhoto *photo;
                photo= [MWPhoto photoWithFilePath:imagePath];
                [finalPhotoArray addObject:photo];

            }

        }
    } 
```

问题是图像的顺序不正确，按照我保存文件的顺序，但它们混淆了。有没有办法订购它们？当我保存到文档目录时，文件是否混淆了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:09:09.670

对于`contentsOfDirectoryAtPath:error:`（这是 的非递归等价物`subpathsOfDirectoryAtPath:error:`），文档说：

> 返回数组中文件的顺序未定义。

如果要将图像路径与标题相关联，则应将该关联存储在某处。如果您将字幕存储在 NSStrings 的 NSArray 中，则可以将它们存储在 NSDictionaries 的 NSArray 中。每个字典都有一个键 @"imagePath" 和 @"caption"。

此外，在处理表示路径的 NSString 时，您应该使用文档中**使用路径**下列出的方法。（例如`stringByAppendingPathComponent:`，代替`stringByAppendingFormat:`）

# java - 错误“找不到主类”

> ID：14802145
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:16:55.443
> 
> 标签：java

如果没有向系统变量添加任何类路径，我的 java 可以正常工作。当我将类路径添加到系统变量时，出现错误显示“找不到主类”。

我的配置有问题吗？我已经安装了 JDK1.7.0_13 和 JRE7。我的开发环境是shell，没有使用任何IDE。

PS我在测试中编写了以下程序。

```
 public class jdbc11{
    public static void main(String[] args)throws Exception{
    try{
        System.out.println("hello");

    }catch(Exception e){
        throw e;
    }
} 
```

我设置的系统类路径是 JAVA_HOME\jre\lib JAVA_HOME\lib JAVE_HOME\jre\lib\ext

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:25:31.567

更改系统类路径时，类路径可能会出错。在每种情况下，正常的方法是：

应用程序.java：

```
package org.edison.pkg;
public class App {
    public static void main(String[] args) {
... 
```

有一个java源`x/y/myproject/src/java/org/edison/pkg/App.java`

编译为`x/y/myproject/target/classes/org/edison/pkg/App.class`

-cp 在命令行上给出类路径。

跑步：

```
x/y/myproject> java -cp ./target/classes org.edison.pkg.App 
```

# macos - Applescript 在 iTunes 11 中损坏

> ID：14802152
> 
> 赞同：0
> 
> 时间：2013-02-10T20:17:34.283
> 
> 标签：macos, applescript, itunes

[我从http://www.ilounge.com/index.php/articles/comments/apple-tv-not-showing-descriptions/](http://www.ilounge.com/index.php/articles/comments/apple-tv-not-showing-descriptions/)找到了这个 AppleScript，它以前显然在 iTunes 中有效，但在 iTunes 11 中似乎无效。

```
tell application "iTunes"
 set myshows to selection
 repeat with eachshow in selection
  set desc to description of eachshow
  set long description of eachshow to desc
 end repeat
end tell 
```

有谁知道如何再次使这项工作？它不必将节目设置为选择，它可以是我图书馆中的所有电视节目。我也不想在我的库中的所有电影上运行相同的脚本。

# javascript - 我无法摆脱 > 和 < 使用 javascript

> ID：14802163
> 
> 赞同：3
> 
> 时间：2013-02-10T20:18:46.203
> 
> 标签：javascript, escaping

我查了一些 SO 问题，但找不到我想要的。所以，这里是代码和问题。

```
var cell=document.createElement('td');
cell.appendChild( document.createTextNode(unescape('Test <br>')));
alert("Content: " + cell.innerHTML); 
```

我希望`alert`显示为，`Test <br>`但它显示为`Test &lt;br&gt;`. 我尝试了很多事情，例如在创建节点后尝试取消转义，在创建节点时尝试取消转义（上图），尝试提醒未`innerHTML`转义但似乎没有任何工作。无论我尝试了什么，我都未能按照我的意愿渲染输出，现在我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:27:25.547

您正在做的是创建一个 textNode < br > 并将 < 和 > 转换为 html 代码。如果您希望警报正确显示 <br> 标签，则必须插入一个元素。希望这可以帮助你

[http://jsfiddle.net/7b5Yk/](http://jsfiddle.net/7b5Yk/)

```
var cell=document.createElement('td');
var br = document.createElement('br');
cell.appendChild( document.createTextNode(unescape('Test')));
cell.appendChild(br)
alert("Content: " + cell.innerHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:28:23.067

不确定您是否`innerHTML`出于某种原因绝对需要这样做，但如果您将其更改为`innerText`您应该得到所需的结果。

```
alert("Content: " + cell.innerText); 
```

似乎这一切都取决于您是否真的打算添加文本，或者您是否希望它
成为实际的换行符。如果您希望它充当 td 中的换行符，您很可能应该使用 Ziinloader 的方法。

# django - 我如何让 django 选择域接受预设选择和用户添加的新选择

> ID：14802167
> 
> 赞同：1
> 
> 时间：2013-02-10T20:19:05.650
> 
> 标签：django, django-models, django-forms

我的模型中有以下代码

```
MY_CATEGORIES = (
('A', 'meal'),
('B', 'personal'),
)

######### and the model
class Job(models.Model):
    category= models.CharField(max_length=1,choices=MY_CATEGORIES,default='A') 
```

我想让选项列表可扩展，即如果用户想要的选项不存在，他们可以编写一个新选项，并且将来它可以作为选项使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:40:13.803

您可以添加一个模型并通过[夹具](https://docs.djangoproject.com/en/dev/howto/initial-data/)`Category`填充初始值。当用户输入一个不存在的类别时，您将创建一个新对象。`meal``personal`

**编辑**：

基本上，您创建两个模型而不是一个模型，`Job`并且`Category`, 而`Job`有一个`ForeignKey`to `Category`：

```
class Category(models.Model):
    name = models.CharField(max_length=50)

class Job(models.Model):
    category= models.ForeignKey(Category) 
```

您不必自己创建任何表，syncdb 将在下次运行时处理它。

然后你创建一个fixture并把它放到`fixtures`你的应用程序的目录中。这将确保这两个条目始终存在：

```
[
    {
        "model": "myapp.category",
        "pk": 1,
        "fields": {
            "name": "meal"
        }
    },
    {
        "model": "myapp.category",
        "pk": 2,
        "fields": {
            "name": "personal"
        }
    }
] 
```

请注意，您还可以在创建类别模型时通过类别模型的管理员输入这些条目。然后，您可以使用 dumpdata 来转储数据，因此您不必手动编写。

当然必须编写创建新类别实例的视图/表单逻辑。表格应该是非常标准的，一个`ModelForm`模型`Job`，加上一个输入新类别的附加字段应该可以完成这项工作。因此，您唯一需要考虑的是创建新条目的验证。表单将自动选择新条目，因为 a 默认`ModelChoiceField`包含所有条目。

# jquery - .toggleClass() 添加特定的点击链接类

> ID：14802168
> 
> 赞同：0
> 
> 时间：2013-02-10T20:19:05.410
> 
> 标签：jquery

因此，如果我想`toggleClass()`添加被点击的特定项目的类，我该怎么做？

我知道这就像一个基本的语法东西，但我很新，`jQuery`所以任何帮助将不胜感激。更具体地说，我有这样的事情：

```
<div class=zoom></div>

<div>
    <div class=grid info a1></div>
    <div class=grid info a2></div>
    <div class=grid info a3></div>
</div> 
```

* * *

```
$(".grid.info").click(function() {
    $('.zoom').toggleClass("A1 or A2 or A3 depending on which was clicked");
}); 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:27:24.193

如果它总是按以下顺序执行，则可以按位置执行`a1, a2, a3, etc..`：

```
$(".grid.info").click(function() {    
    $(".grid.info").not(this).each(function(){
        var classToRemove = "a" + ($(this).index() + 1);
        $('.zoom').removeClass(classToRemove);
    });

    var classClicked = "a" + ($(this).index() + 1);
    $('.zoom').toggleClass(classClicked);
}); 
```

* * *

[**演示**](http://jsfiddle.net/6QsWD/)- 切换单击 div 的 ax 类，删除所有其他先前单击的 ax

* * *

以上仅在顺序始终匹配时才有效，但如果您的 div 的顺序不同，那么 div 就`index()`变得无用了，您必须考虑添加可能的数据属性，如下所示：

```
<div class="grid info a3" data-class="a3">3</div>
<div class="grid info a2" data-class="a2">2</div>
<div class="grid info a1" data-class="a1">1</div> 
```

使用已经建议的数据属性会更可靠，您只需对此稍作更改即可编写脚本：

```
$(".grid.info").click(function() {    
    $(".grid.info").not(this).each(function(){
        var classToRemove = $(this).data("class");
        $('.zoom').removeClass(classToRemove);
    });

    var classClicked = $(this).data("class");
    $('.zoom').toggleClass(classClicked);
}); 
```

* * *

[**演示**](http://jsfiddle.net/rXPPL/)- 改用数据属性

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:25:33.543

试试这个：

```
$(".grid.info").click(function() {
        $(this).toggleClass('.zoom');
    }); 
```

.toggleClass(className).. 你可以[在这里查看](http://api.jquery.com/toggleClass/)。因此，您可以使用要切换的 ClassName 作为 toggleClass 的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:26:10.930

[如何在 jsFiddle 上执行此操作的示例](http://jsfiddle.net/htmled/dkjX5/)。

HTML：

```
<div class="zoom">
    Zoom
</div>

<div>
    <div class="grid info a1">1</div>
    <div class="grid info a2">2</div>
    <div class="grid info a3">3</div>
</div> 
```

CSS：

```
.zoom {
    display: none;
}

.show {
    display: block;
} 
```

JavaScript：

```
$(".grid.info").click(function() {
    $('.zoom').toggle("show");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T20:49:44.280

HTML：

```
<div class="zoom"></div>

<div>
    <div class="grid info a1" data-class="a1"></div>
    <div class="grid info a2" data-class="a2"></div>
    <div class="grid info a3" data-class="a3"></div>
</div> 
```

JS：

```
$(".grid.info").click(function() {
    $('.zoom').toggleClass($(this).data("class"));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T20:51:22.017

虽然您已经接受了答案，但我对解决您的问题的潜力很感兴趣，所以，我想出了这个：

```
$('.grid').click(function(){
    var theClass = /(a\d)/.exec(this.className).shift(),
        curClass = /(a\d)/.exec($('.zoom').get(0).className),
        exClass = curClass !== null ? curClass.shift() : '';
    console.log(theClass === exClass);
    if (exClass == theClass) {
        $('.zoom').removeClass(theClass);
    }
    else {
        $('.zoom')
        .removeClass(exClass)
        .addClass(theClass);
    }
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hRbas/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`get()`](http://api.jquery.com/get/).
*   [`regexp.exex()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`Array.shift()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)

# python - 分配信号时间

> ID：14802169
> 
> 赞同：0
> 
> 时间：2013-02-10T20:19:05.310
> 
> 标签：python, time

我正在尝试通过 python 控制信号。我希望“a”是信号打开的时间长度（以微秒为单位），最终将被“输入”修改，“输入”也将是来自传感器的信号。什么是告诉“a”何时发送信号的好方法？

```
import threading
import time
a=900
while True:
    print time.time ()
    input=int(raw_input("enter a number,"))
    b=int((input-5)*20)+a
    a=b
    print b 
```

我知道我距离完成还有很长的路要走，但我正在努力克服它。我正在学习 Python 的艰难课程。

# wordpress - 如何在所有帖子中显示该类别的第一篇帖子的评论？

> ID：14802175
> 
> 赞同：0
> 
> 时间：2013-02-10T20:19:37.147
> 
> 标签：wordpress, templates, comments

我只想显示该类别的第一篇文章的评论。

**例子;**

类别
- 帖子 1（2 条评论）
- 帖子 2（1 条评论）
- 帖子 3（5 条评论）

如果我正在阅读**Post 2**或**Post 3**，我应该看到**Post 1 的 2 条评论**。

如何从模板文件中对此进行编码？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:28:22.423

你只需要像这样使用 WP_query ( [http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query) )：

```
$args = array(
'cat' => 'catnumber',
'post_count' => '1'
 );

$query = new WP_Query( $args ); 
```

该查询将返回您想要的类别的最后一篇文章。然后你只需要在你的循环中使用函数 get_comments ：http: [//codex.wordpress.org/Function_Reference/get_comments](http://codex.wordpress.org/Function_Reference/get_comments)

# delphi - 为流读取构建delphi复合组件的正确方法是什么？

> ID：14802179
> 
> 赞同：3
> 
> 时间：2013-02-10T20:19:50.867
> 
> 标签：delphi, serialization, components

我无法在 Delphi 中重新加载保存的复合组件，其中子组件（TChart）似乎被创建了两次。当我在代码中创建我的组件时，它工作正常。

我的组件是一个托管与客户端对齐的 TChart 的 TPanel，我自己创建了单个系列及其数据。这是我的代码：

```
type

  TMyChart = class( TPanel )
  PRIVATE
    FChart : TChart;
  PROTECTED
    procedure Notification( AComponent : TComponent; Operation : TOperation ); override;
  PUBLIC
    constructor Create( AOwner : TComponent ); override;
    destructor  Destroy; override;
  PUBLISHED
    property Chart : TChart
               read FChart;
  end;

{ TMyChart }

constructor TMyChart.Create(AOwner: TComponent);
begin
  inherited;
  Width := 400;
  Height := 150;
  FChart := TChart.Create( Self );
  FChart.Name := '';
  FChart.SetSubComponent( True );
  FChart.FreeNotification( Self );
  FChart.Parent := Self;
  FChart.Align := alClient;
  FChart.AddSeries( TLineSeries.Create( FChart ));
  FChart.Series[0].FillSampleValues(100);
end;

destructor TMyChart.Destroy;
begin
  FreeAndNil( FChart );
  inherited;
end;

procedure TMyChart.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited;
  if (AComponent = FChart) and (Operation = opRemove) then
    FChart := nil;
end;

initialization

  RegisterClass( TMyChart );
  RegisterClass( TChart );
  RegisterClass( TLineSeries );

end. 
```

我已经按照 ExtCtrls 'TLabeledEdit' 中的示例为子组件 TChart 包含了一个 FreeNotification。

我使用 TStream.WriteComponent 将其流式传输并获得以下 DFM：

```
object Mychart1: TMyChart
  Left = 0
  Top = 0
  Width = 400
  Height = 150
  Caption = 'Mychart1'
  TabOrder = 3
  Chart.Left = 1
  Chart.Top = 1
  Chart.Width = 398
  Chart.Height = 148
  Chart.Align = alClient
  Chart.TabOrder = 0
  Chart.ColorPaletteIndex = 13
  object TChart
    Left = 1
    Top = 1
    Width = 398
    Height = 148
    Align = alClient
    TabOrder = 0
    ColorPaletteIndex = 13
    object TLineSeries
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.ShapeStyle = fosRoundRectangle
      Marks.Visible = False
      Brush.BackColor = clDefault
      Pointer.InflateMargins = True
      Pointer.Style = psRectangle
      Pointer.Visible = False
      XValues.Name = 'X'
      XValues.Order = loAscending
      YValues.Name = 'Y'
      YValues.Order = loNone
    end
  end
end 
```

我需要的一切都在那里。我使用 ReadComponent 重新加载此 DFM，如下所示：

```
procedure LoadComponentFromFile( var AComponent : TComponent );
var
  MS : TMemoryStream;
  SS : TStringStream;
begin
  MS := TMemoryStream.Create;
  SS := TStringStream.Create;
  try
    SS.LoadFromFile( GetSpecialFolderPath( CSIDL_DESKTOP ) + '\test.txt' );
    SS.Position := 0;
    ObjectTextToBinary( SS, MS );
    MS.Position := 0;
    AComponent := MS.ReadComponent( nil );
  finally
    MS.Free;
    SS.Free;
  end;
end;

procedure TForm8.Button3Click(Sender: TObject);
begin
  FreeAndNil( FMyChart );

  LoadComponentFromFile( TComponent(FMyChart) );

  FMyChart.Parent := Self;
end; 
```

在此之后，我似乎创建了两个 TChart - 一个具有正确的系列数据（由 TMyChart.Create 构建），另一个（在此前面）具有空轴，大概是 ReadComponent 正在构造“对象 TChart”的地方。我已经通过在“TMyChart.Create”中放置一个断点和在“TCustomChart.Create”中的 TChart 源代码中放置另一个断点来证明这一点。调用加载程序代码时，它会先命中 TMyChart.Create 断点一次，然后再命中 TCustomChart.Create 断点两次。我可以看到我需要告诉 TStream.ReadComponent 不要重新创建我的子组件 TChart 但经过多次试验和阅读有关组件流的文档后，我看不出如何构建它。有人可以评论吗？非常感谢。

# c++ - 如何将 2 个 fftw_complex 数组相乘

> ID：14802180
> 
> 赞同：1
> 
> 时间：2013-02-10T20:19:53.590
> 
> 标签：c++, image, image-processing, fftw

## 标题

嗨，我正在尝试将两个 fftw_complex 类型的数组相乘，我应该怎么做？

这是代码：

```
fftw_complex *rInF, *gInF, *bInF;
fftw_complex *rOutF, *gOutF, *bOutF;
for(int i=0;i<m_image->width()*m_image->height();i++)
{

    //realis
    rInF[i][0] = rIn[i][0]*rInMask[i][0] - rIn[i][1]*rInMask[i][1];
    gInF[i][0] = gIn[i][0]*gInMask[i][0] - gIn[i][1]*gInMask[i][1];
    bInF[i][0] = bIn[i][0]*bInMask[i][0] - bIn[i][1]*bInMask[i][1];
    //imaginalis
    rInF[i][1] = rIn[i][1]*rInMask[i][0] + rIn[i][0]*rInMask[i][1];
    gInF[i][1] = gIn[i][1]*gInMask[i][0] + gIn[i][0]*gInMask[i][1];
    bInF[i][1] = bIn[i][1]*bInMask[i][0] + bIn[i][0]*bInMask[i][1];
} 
```

我有每个 RGB 通道的 2 个数组（来自两个给我们 2R、2G、2B 的图像）。

rIn,gIn,bIn 和 rInMask,gInMask,bInMask 都可以。我想将两个复数相乘并将乘法的值分配给 rInF、gInF 和 bInF。

稍后我将做一个反向 fftw 并在频域进行卷积。（<- 这并不重要）。

该应用程序只是关闭并且没有给我任何错误。

# r - ggplot 中代码布局的外部化

> ID：14802183
> 
> 赞同：5
> 
> 时间：2013-02-10T20:20:06.767
> 
> 标签：r, optimization, ggplot2, knitr

我想在 ggplot2 中外部化我的布局，因为我的代码变得非常拥挤。

假设我有一个给定的布局，我将其应用于不同功能的多个绘图。它看起来像这样：

```
 scale_fill_gradientn(guide="colourbar",colours=costum.colorbar_sand.blue.green)+
      theme (legend.title = element_text(size = 15,family="Arial"))+
      theme (legend.text = element_text(size = 12,family="Arial",angle=45))+
      theme (legend.position = "bottom")+
      coord_map(projection="mercator"); 
```

我想把它放在一个外部文件或一个对象中，然后将它调用到我的绘图函数中。

[我从knitr 包](http://cran.r-project.org/web/packages/knitr/index.html)中尝试了 read_chunk，如下所示：我将上面的空白代码保存在 R 文件中，然后尝试在我的函数中实现它。因此我只是把它写成这样的函数

```
 function.xy(...){...some ggplot function...
    read_chunk("some\path")
    } 
```

但它没有成功。我也尝试过`paste(read_chunk("some\path"))`，但这不起作用。

我的另一个想法是将它保存为一个对象并粘贴文本，但这不是很好，因为我不知道如何将它保存为纯文本对象（如果有类似的东西） . 谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:53:47.800

我做这两种方法之一。在要编织的文件中，我声明了我知道将经常使用的绘图选项，将分组元素保存在列表中，如下所示：

```
plot.option1 <- list(scale_fill_gradient(guide="colourbar",colours=costum.colorbar_sand.blue.green),
                     theme(legend.title = element_text(size = 15,family="Arial"),
                           legend.text = element_text(size = 12,family="Arial",angle=45),
                           legend.position = "bottom"),
                     coord_map(projection="mercator")) 
```

那么这只是一个附加的问题`+ plot.option1`

例如：

```
ggplot(dat, aes(x,y)) + plot.option1 
```

如果你有很多它们（比如公司主题），你可以很容易地将它们放在一个单独的脚本中，然后将它放在你的文件头部进行编织。

**最小的例子：**

```
plot.opt <- list(scale_color_brewer(palette="Blues"))
ggplot(diamonds, aes(carat, price, color=color)) + geom_point() + plot.opt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T21:58:17.467

您可以将布局代码外部化为单独的块。请参阅存储库中的[示例 083](https://github.com/yihui/knitr-examples/blob/master/083-ggplot2-reference.Rmd)（及其[输出](https://github.com/yihui/knitr-examples/blob/master/083-ggplot2-reference.md)） 。`knitr-examples`关键是通过`<<>>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T20:56:54.297

另一个与@brandon-bertelsen 非常相似的选项是创建一个自定义函数：

```
add.my.layout <- function(g) {
    g + scale_fill_gradientn(guide="colourbar",colours=costum.colorbar_sand.blue.green)+
      theme (legend.title = element_text(size = 15,family="Arial"))+
      theme (legend.text = element_text(size = 12,family="Arial",angle=45))+
      theme (legend.position = "bottom")+
      coord_map(projection="mercator")
} 
```

然后在你的代码中你可以这样做：

```
myggplot <- ggplot(...)
add.my.layout(myggplot) 
```

如果您愿意，您可以在外部 R 文件中定义您的函数。

# jquery - 部分渲染取决于点击了哪个链接

> ID：14802185
> 
> 赞同：2
> 
> 时间：2013-02-10T20:20:07.907
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我有一个链接列表，单击时我希望它通过 Ajax 显示其相关部分，我已成功呈现第一个，但希望实现一些 if 语句来识别已单击哪个 link_to。我如何区分链接？

```
<ul class="nav nav-tabs">
<li><%= link_to 'Home', posts_path %></li>
<li><%= link_to 'Tynewydd', posts_path, :remote => true %></li>
<li><%= link_to 'Woodside', root_path %></li>
<li><%= link_to 'Sandpiper', root_path %></li>
<li><%= link_to 'Outreach', root_path %></li>
<li><%= link_to 'Company', root_path %></li>
<li><%= link_to 'Staff', root_path %></li>
</ul> 
```

index.js.erb

```
$('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>'); 
```

我在想这样的事情

```
<% if params[:tynewydd] %>
$('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %> 
```

但是用什么作为参数呢？

任何人都有任何想法，有点卡在这里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:42:33.893

尝试将您的链接更改为如下所示：

```
<%= link_to 'Tynewydd', posts_path(:type => 'Tynewydd'), :remote => true %> 
```

然后在你的`index.js.erb`：

```
<% if params[:type] == 'Tynewydd' %>
  $('#newsResults').html('<%= escape_javascript(render partial: 'tynewyddposts') %>');
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:43:39.010

我建议使用单个参数键（如`view`），其值将是部分的名称。如果给定名称未映射到部分，则应提供默认部分。它可能看起来像这样：

```
# methods available to controllers and helpers
def post_partials
  %w[home tynewydd]
end

def root_partials
  %w[woodside sandpiper outreach company staff]
end

# posts controller
@view = post_partials.detect?(params[:view]) || 'home'

# home controller
@view = root_partials.detect?(params[:view]) || 'woodside'

# view
<ul class="nav nav-tabs">
  <li><%= link_to 'Home', posts_path(:view => 'home') %></li>
  <li><%= link_to 'Tynewydd', posts_path(:view => 'tynewydd', :remote => true %></li>
  <% root_partials.each do |partial| %>
    <li><%= link_to partial.titelize, root_path(:view => partial) %></li>
  <% end %>
</ul>

<%= render @view %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T20:43:30.927

您可以`link_to`像这样传递值：

```
 <li><%= link_to 'Sandpiper', select_partial_path(option: "other_partial") %></li> 
```

这将在您的控制器操作中为您提供一个`:option`符号。`select_partial`由您决定如何使用它来选择部分进行渲染。

# ios - UIAlertView ClickedButtonAtIndex 不会保存整数

> ID：14802186
> 
> 赞同：0
> 
> 时间：2013-02-10T20:20:08.037
> 
> 标签：ios, cocoa-touch

我已经制作了一个`UIAlertView`其中的第二个按钮应该将分数重置回 0。

这是我的 UIAlertView 代码：

```
- (IBAction)showActionSheetReset:(id)sender
{
    UIAlertView *resetAlertView = [[UIAlertView alloc] initWithTitle:@"Delete And Reset Score"
                                                         message:@"Are You sure You Want To Reset The Score Shown on the Engligh Page? This WILL NOT affect your High Score on Game Center."
                                                        delegate:self
                                               cancelButtonTitle:@"No, Don't Erase"
                                               otherButtonTitles:@"Yes, Reset Score", nil];

    [resetAlertView show];
    resetAlertView.tag = 2;
}

- (void)alertViewReset:(UIAlertView *)alertViewReset clickedButtonAtIndex:       (NSInteger)buttonIndex
{
    if (alertViewReset.tag == 2) {
        if (buttonIndex == 1) {
            [self resetTheScore];

        }
    }
} 
```

这是我的`resetTheScore`方法：

```
- (IBAction)resetTheScore
{
    self.currentScore = 0;
    currentScoreLabel.text = [NSString stringWithFormat:@"%lld", self.currentScore];
    [self counterDefaults:self];
} 
```

这是我的`counterDefaults`方法：

```
- (IBAction)counterDefaults:(id)sender
{
    NSUserDefaults *Defaults = [NSUserDefaults standardUserDefaults];
    [Defaults setInteger:self.currentScore forKey:TapCount];
    [Defaults synchronize];
} 
```

为什么不保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:41:40.493

该`UIAlertViewDelegate`方法称为`alertView:clickedButtonAtIndex:`not `alertViewReset:clickedButtonAtIndex:`。

你的函数`alertViewReset:clickedButtonAtIndex:`永远不会被调用。改正名字应该没问题。

# android - android expandablelistview如何设置组项目之间的空间

> ID：14802189
> 
> 赞同：8
> 
> 时间：2013-02-10T20:20:48.227
> 
> 标签：android, android-layout, android-xml

我有可扩展列表视图，我想在组项目之间添加填充（或边距），我`margin-botton`在组项目上使用过，它可以工作，但现在它也适用于组项目及其子项，我想在组项目之间保留空间，而不是在一个组项目和它的孩子之间，我是这样工作的：

### 主xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#FFFFFF">

    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:typeface="serif"
        android:textSize="25dip"
        android:textColor="#025f7c"
        android:text="@string/tv_allAddresses"
        android:layout_gravity="center"
        android:layout_marginTop="20dip"
        android:layout_marginBottom="25dip"/>

    <ExpandableListView
        android:id="@+id/elv_all_addresses_addresses"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:padding="10dip">
    </ExpandableListView>

</LinearLayout> 
```

### 组 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tv_all_address_group_groupName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="30dip"
        android:textColor="#000000"
        android:textSize="20dip"
        android:typeface="serif" />

</LinearLayout> 
```

### 子xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_all_address_child_label"
        android:paddingLeft="50dip"
        android:typeface="serif"
        android:textSize="15dip"
        android:textColor="@color/BlueViolet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/tv_all_address_child_value"
        android:textColor="#000000"
        android:layout_marginLeft="10dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:47:03.477

因为您使用`adapter`的是从扩展而来的，`BaseExpandableListAdapter`所以您可以通过在组未扩展时将填充设置为组项来以编程方式设置填充，然后在组扩展时删除填充，并且为每个组将填充设置为其中的最后一个子项。

### 将填充设置为最后一个孩子

```
public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
if (childPosition == groups.get(groupPosition).getChilds().size() - 1) {
            convertView.setPadding(0, 0, 0, 20);
        } else
            convertView.setPadding(0, 0, 0, 0);
        return convertView;
} 
```

### 扩展时将填充设置为组项目

```
public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
    if (isExpanded)
            convertView.setPadding(0, 0, 0, 0);
        else
            convertView.setPadding(0, 0, 0, 20);
        return convertView;
    } 
```

### 笔记

我假设您正在为您的组和您的孩子使用 arraylist，您可以`groups.get(groupPosition).getChilds().size() - 1`根据您的结构将其替换为您的组的大小

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-23T18:14:38.787

如果您正在寻找更好的选择，只需添加

```
expandablelsv.setDividerHeight(); 
```

之后`group`，`child indicator`它在我的情况下完全正常，试一试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-05T03:59:29.290

检查孩子是否是最后一个并在那里添加填充

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {

    if (isLastChild) {
        convertView.setPadding(0, 0, 0, 30);
    }

     return convertView; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-18T14:37:46.247

这两个属性有助于给空间

```
android:divider="@android:color/transparent"
android:dividerHeight="8dp" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T19:06:08.773

我遇到了同样的问题，所以我想出了一个幼稚的解决方案。我所做的是在可扩展列表视图的父布局文件和子布局文件中添加了具有相同属性的线性布局。当单击一个组时，我使父布局文件的“线性布局”不可见，我的工作就完成了。

## 组布局文件

```
<TextView
        android:id="@+id/expandable_faqparent_id"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_margin="2dp"
        android:layout_marginBottom="30dp"
        android:background="#ffffff"
        android:gravity="center"
        android:text="hello this is dummy text"
        android:textSize="20dp"
        android:textStyle="bold" />
<LinearLayout
    android:id="@+id/linear_parent_faq"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:background="#cfd8dc"
    android:layout_weight="0.06"
    android:orientation="vertical">
</LinearLayout> 
```

## 子布局文件

```
<TextView
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:id="@+id/expandable_faq_child_id"
    android:text="DUMMY PARENT"
    android:background="#ffffff"
    android:gravity="center"
    android:elevation="2dp"/>
<LinearLayout
    android:id="@+id/linearfaq"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:background="#cfd8dc"
    android:orientation="vertical">
</LinearLayout> 
```

**单击任何组时隐藏线性布局将此行添加到适配器类的 addChildView 方法中**

```
lv.setVisibility(View.INVISIBLE); 
```

这里lv包含线性布局的id

> linear_parent_faq

组布局文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-25T05:12:58.443

我通过将两个视图添加到标题和另一个到子项来解决它，如下所示。

**标头.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content">

<RelativeLayout
    android:id="@+id/rl_header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/square_box"
    android:padding="@dimen/padding_10">

    <ImageView
        android:id="@+id/expandableIndicator"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_downarrow" />
</RelativeLayout>

<View
    android:id="@+id/view_hidden"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:layout_below="@+id/rl_header"
    android:background="@android:color/transparent" />
</RelativeLayout> 
```

**子.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content">

<RelativeLayout
    android:id="@+id/rl_childView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/square_box"
    android:padding="@dimen/padding_10">

    <TextView
        android:id="@+id/tv_startDate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:gravity="left"
        android:paddingTop="@dimen/padding_5"
        android:paddingBottom="@dimen/padding_5"
        android:text="Start Date \nSep. 23, 2019"
        android:textSize="@dimen/text_16" />

    <ImageView
        android:id="@+id/iv_arrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:src="@drawable/right_arrow" />
</RelativeLayout>

<View
    android:id="@+id/view_hidden"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:layout_below="@+id/rl_childView"
    android:background="@android:color/transparent" />
</RelativeLayout> 
```

现在将此代码添加到您的适配器类。这个想法是在组展开/折叠时显示/隐藏视图，显示在子项的最后一项上。

```
@Override
public View getGroupView(int listPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    String listTitle = (String) getGroup(listPosition);
    String listCount = "(" + getChildrenCount(listPosition) + ")";

    if (convertView == null) {
        LayoutInflater layoutInflater = (LayoutInflater) this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = layoutInflater.inflate(R.layout.expandable_header, null);
    }
    View view_hidden = convertView.findViewById(R.id.view_hidden);

    if (isExpanded) {
        view_hidden.setVisibility(View.GONE);
    } else {
        view_hidden.setVisibility(View.VISIBLE);
    }

    return convertView;
}

@Override
public View getChildView(int listPosition, final int expandedListPosition,
                         boolean isLastChild, View convertView, ViewGroup parent) {
    final Medication medication = (Medication) getChild(listPosition, expandedListPosition);
    if (convertView == null) {
        LayoutInflater layoutInflater = (LayoutInflater) this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = layoutInflater.inflate(R.layout.expandable_item, null);
    }

    View view_hidden = convertView.findViewById(R.id.view_hidden);
    if (isLastChild) {
        view_hidden.setVisibility(View.VISIBLE);
    } else {
        view_hidden.setVisibility(View.GONE);
    }

    return convertView;
} 
```

# java - 简单 if 语句与普通 if 语句

> ID：14802191
> 
> 赞同：6
> 
> 时间：2013-02-10T20:21:02.843
> 
> 标签：java, performance, if-statement, bytecode, curly-braces

在 Java 字节码级别，简单的 if 语句（示例 1）和普通的 if 语句（示例 2）之间有什么区别：

示例 1：

```
if (cond) statement; 
```

示例 2：

```
if (cond) {
    statement;
} 
```

问题的背景是，我在“高性能”类中看到了`java.awt.Rectangle`只有`Point`没有花括号的变体。

是否有任何速度优势，还是只有代码风格？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T20:42:59.477

除了代码的可维护性，在性能方面完全一样。你不会从删除中获得加速`{}`，因为`{}`它不是它自己的指令。

我通常使用 with`{}`因为使代码易于阅读（IMO）并且不利于出错。

这个例子：

```
public void A(int i) {
     if (i > 10) {
        System.out.println("i");
        }
    }

    public void B(int i) {
        if (i > 10)
            System.out.println("i");
    } 
```

生成的字节码：

```
 // Method descriptor #15 (I)V
  // Stack: 2, Locals: 2
  public void A(int i);
     0  iload_1 [i]
     1  bipush 10
     3  if_icmple 14
     6  getstatic java.lang.System.out : java.io.PrintStream [16]
     9  ldc <String "i"> [22]
    11  invokevirtual java.io.PrintStream.println(java.lang.String) : void [24]
    14  return
      Line numbers:
        [pc: 0, line: 5]
        [pc: 6, line: 6]
        [pc: 14, line: 8]
      Local variable table:
        [pc: 0, pc: 15] local: this index: 0 type: program.TestClass
        [pc: 0, pc: 15] local: i index: 1 type: int
      Stack map table: number of frames 1
        [pc: 14, same]

  // Method descriptor #15 (I)V
  // Stack: 2, Locals: 2
  public void B(int i);
     0  iload_1 [i]
     1  bipush 10
     3  if_icmple 14
     6  getstatic java.lang.System.out : java.io.PrintStream [16]
     9  ldc <String "i"> [22]
    11  invokevirtual java.io.PrintStream.println(java.lang.String) : void [24]
    14  return
      Line numbers:
        [pc: 0, line: 11]
        [pc: 6, line: 12]
        [pc: 14, line: 13]
      Local variable table:
        [pc: 0, pc: 15] local: this index: 0 type: program.TestClass
        [pc: 0, pc: 15] local: i index: 1 type: int
      Stack map table: number of frames 1
        [pc: 14, same] 
```

如您所见，它们是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T20:22:22.907

两者完全相同。Java 编译将产生相同的代码。

但是请记住，在非括号情况下，您将无法像在括号情况下那样在 if 块内添加多个子语句

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T20:26:23.977

你给出的两个例子做同样的事情。你的第一个例子是一个**简单的 if-then-statement**，而你的第二个例子是一个普通的**if-then 语句**。

执行这两个语句所需的时间是相同的，因为大括号不是指令，因此不会影响速度。不过，我仍然会使用普通的 if 语句，因此您可以在 if 语句中包含任意数量的语句。

# ruby-on-rails - 预定义的路线不起作用，为什么？

> ID：14802193
> 
> 赞同：0
> 
> 时间：2013-02-10T20:21:35.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, routes

我即将实现编辑项目的功能，但我无法获得工作路线。

**路线.rb：**

```
Ampta::Application.routes.draw do
  get "home/index"

  resources :projects
  resources :tickets
  resources :projects_users
  resources :users

  ...
end 
```

**链接到路径的视图：**

```
...
<%= link_to "Show tickets", tickets_path%><br/>
<%= link_to "Manage projects", edit_project_path %><br/> // <--- The link
<%= link_to "Log out", signout_path, method: "delete"%>
... 
```

（我已经在项目控制器中定义了“编辑”操作，但它还没有包含任何代码。）

运行 rake 路由时，路由就在那里，为什么我会收到以下错误，说明情况并非如此：

```
No route matches {:action=>"edit", :controller=>"projects"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:25:41.953

`edit_project_path`不知道您要编辑哪个项目。此路由助手将获取一个`Project`实例，然后将其路由到 like `/projects/1/edit`。也许您打算使用`projects_path`?

该`projects_path`方法将`ProjectsController's` `index`采取行动，这是（通常）提供项目列表的地方，其中包含在该页面上编辑它们的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:27:34.457

您需要传入正在编辑的项目的记录。在你的 show.html.erb 中，你最好有类似的东西；

```
<%= link_to "Manage project", edit_project_path(@project) %> 
```

在你的控制器中

```
def show
  Product.find(params[:id])
end 
```

# php - 从数据库中选择 Wordpress

> ID：14802195
> 
> 赞同：0
> 
> 时间：2013-02-10T20:21:37.057
> 
> 标签：php, database, wordpress

在`Wordpress`数据库中，我有表格横幅，我尝试编写`SELECT`以获取数据：

`'SELECT * FROM $wpdb->banners'`也尝试`'SELECT * FROM $wpdb->wp_banners'`，但没有人查询让我得到结果，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:27:10.090

该变量`$wpdb->banners`需要 a) 在某处定义（我不确定在 Wordpress 中是如何处理的，因此您可能使用也可能不使用正确的变量）和 b) 由 PHP 解释。

在您在这里粘贴的内容中，您似乎使用了单引号，这将停止 PHP 解释变量 - 它会假设您的意思是文字`$`，这将导致无效的 SQL。您需要使用双引号 - `"SELECT * FROM {$wpdb->banners}"`- 或字符串连接 -`'SELECT * FROM ' . $wpdb->banners`

# c# - 如何检查我的应用程序是否安装在客户端计算机上？

> ID：14802196
> 
> 赞同：3
> 
> 时间：2013-02-10T20:21:44.013
> 
> 标签：c#, asp.net, client, activex

我有一个包含链接的 asp.net 页面，我需要执行以下操作：

当用户单击时，它会检查我的桌面应用程序是否安装在此客户端计算机上，如果是则运行它，否则要求用户下载它。

我该怎么做这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:25:56.520

除非您在可以访问文件系统的网页上运行受信任的插件（例如 Silverlight 或 Java），否则这是不可能的。这通常被认为是一个相当大的安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:28:00.167

如果您的客户端应用安装了 activex，您可以尝试这样的事情

```
function tryCreateXObject(name){
        try{
            return new ActiveXObject(name);
        }
        catch(err){
            return undefined;
        }
}; 
```

但它不是理想的解决方案

# python - 我可以在 Pyramid 中获取浏览器的宽度和高度吗？

> ID：14802197
> 
> 赞同：1
> 
> 时间：2013-02-10T20:21:43.403
> 
> 标签：python, pyramid

是否可以在 Pyramid 中获取用户的浏览器宽度和高度？我搜索了响应对象并用 Google 搜索。

如果它在 Pyramid 中不可用，我将在 javascript 中获取它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:05:15.553

不，仅使用服务器端代码无法确定。浏览器在向服务器发出 HTTP 请求时不会共享该信息。

您必须使用 JavaScript 来执行此操作。

# android - 如何将 ArrayList <com.google.api.services.drive.model.file>传递给 Activity</com.google.api.services.drive.model.file>

> ID：14802199
> 
> 赞同：3
> 
> 时间：2013-02-10T20:22:07.263
> 
> 标签：android, arraylist, android-activity, google-drive-api

我知道如果我想传递一些自定义的东西，它必须实现 Serializable，甚至 Parcelable。但在这种情况下，我不确定如何将文件列表（来自 google drive api）传递给活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:26:38.947

如果`File`实现`Serializable`我会试试这个。

```
 Bundle args = new Bundle();
    args.putSerializable("your_key_for_this_object", mFileObjectArrayList);
    intent.putExtras(args);
    startActivity(intent); 
```

如果`File`实现`Parcelable`我会试试这个。

```
 Bundle args = new Bundle();
    args.putParcelableArrayList("your_key_for_this_object", mFileObjectArrayList);
    intent.putExtras(args);
    startActivity(intent); 
```

然后在`Activity`接收的那个中`Bundle`，尝试这样的事情。

```
 Bundle args = getIntent().getExtras();
    mFileObjectArrayList = (ArrayList<File>) args.getSerializable("your_key_for_this_object"); 
```

希望这可以帮助。

# php - 使用php脚本执行phonegap命令

> ID：14802201
> 
> 赞同：1
> 
> 时间：2013-02-10T20:22:12.360
> 
> 标签：php, cordova, upload

我正在使用 php 并想使用 phonegap 创建一个 android 应用程序文件夹。

我尝试了以下命令 shell_exec('cd C:\Desktop\phonegap-2.4.0\lib\android\bin && create C:\phpshell3 com2.wesdr.ddxf dcddf')

但它给出了以下错误：

```
缺少以下一项：
JDK
安卓 SDK
阿帕奇蚂蚁

```

但是当我直接通过命令提示符执行相同的命令时，它运行良好。如何在命令提示符下使用 php 脚本执行 phonegap-android create 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:31:21.537

这不是 PHP 问题。看起来您缺少 Android SDK。您可能需要先下载并安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T12:38:18.610

要安装 jdk，你可以在这里找到它：[https](https://jdk7.java.net/download.html)
://jdk7.java.net/download.html 安装 jdk 后，你应该将 JAVA_HOME 添加到 Windows 机器的环境中。
像这里：[如何在 Windows 7 上设置 java_home？](https://stackoverflow.com/questions/2619584/how-to-set-java-home-on-windows-7#3024721)

然后下载 android sdk 并将其路径添加到环境中。[在 sdk 从http://ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)下载 ant并将其 bin 文件夹像 sdk 一样放入环境之后。

要测试 java，在 cmd 中输入“java”，在 ant 中输入“ant”，在 sdk 中输入“android avd”。
他们必须有结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T00:58:08.530

您可以尝试将 create.bat 中的条件语句注释掉

```
::FOR %%X in (android.bat) do (
    ::SET FOUND=%%~$PATH:X
    ::IF NOT DEFINED FOUND GOTO MISSING
::) 
```

# python - 是否可以逐行读取文件，同时跳过给定的行数Python

> ID：14802202
> 
> 赞同：0
> 
> 时间：2013-02-10T20:22:14.013
> 
> 标签：python, file-io, python-3.x, iteration

我正在尝试在 python 中编写一个程序，该程序将符合某些条件的数据行从输入文件解析到一系列输出文件。

该程序读取一个输入文件，该文件包含染色体上基因的起始和终止位置。对于此输入文件的每一行，它会逐行打开第二个输入文件，其中包含目标染色体上已知 SNP 的位置。如果 SNP 位于被迭代基因的开始和停止位置之间，则将其复制到新文件中。

我的程序的问题在于它效率低下。对于每个被分析的基因，程序从第一行开始读取 SNP 数据的输入文件，直到它到达位于大于（即具有更高位置编号）的染色体位置的 SNP被迭代的基因的停止位置。由于所有基因和 SNP 数据都是按染色体位置排序的，如果对于每个被迭代的基因，我可以以某种方式“告诉”我的程序开始读取 SNP 位置数据的输入文件，我的程序的速度和效率将大大提高从上次迭代中读取的最后一行开始；而不是从文件的第一行开始。

有什么办法可以做这个 Python 吗？还是必须从第一行读取所有文件？

到目前为止，我的代码如下。任何建议将不胜感激。

```
import sys
import fileinput
import shlex
geneCoordinates = open("Gene Coordinates.txt",'r')
geneCoordinates = list(geneCoordinates)
n = (len(geneCoordinates))
nSNPsPerGene=open("C:/Users/gwilymh/Desktop/Python/SNPsPerGene/nSNPs per gene.txt", 'a')

i=0
for i in range(i,n):
    x=i
    L=shlex.shlex(geneCoordinates[x],posix=True)
    L.whitespace += ','
    L.whitespace_split = True
    L=list(L)
    output=open((("C:/Users/gwilymh/Desktop/Python/SNPsPerGene/%s.txt")%(str(L[2]))), 'a')
    geneStart=int(L[2])
    geneStop=int(L[3])
    for line in fileinput.input("SNPs.txt"):
        if not fileinput.isfirstline():
            nSNPs=0
            SNP=shlex.shlex(line,posix=True)
            SNP.whitespace += '\t'
            SNP.whitespace_split = True
            SNP=list(SNP)
            SNPlocation=int(SNP[0])
            if SNPlocation < geneStart:
                continue
            if SNPlocation >= geneStart:
                if SNPlocation <= geneStop:
                    nSNPs=nSNPs+1
                    output.write(str(SNP))
                    output.write("\n")
            else: break
    nSNPsPerGene.write(("%s\t%s")%s(str(L[2]),nSNPs)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:10:52.960

只需使用迭代器（在循环之外的范围内）来跟踪您在第二个文件中的位置。它应该看起来像这样：

```
import shlex
geneCoordinates = open("Gene Coordinates.txt",'r')
geneCoordinates = list(geneCoordinates)
n = (len(geneCoordinates))
nSNPsPerGene=open("C:/Users/gwilymh/Desktop/Python/SNPsPerGene/nSNPs per gene.txt", 'a')

i=0

#NEW CODE - 2 lines added.  By opening a file iterator outside of the loop, we can remember our position in it
SNP_file = open("SNPs.txt")
SNP_file.readline() #chomp up the first line, so we don't have to constantly check we're not at the beginning
#end new code.

for i in range(i,n):

   x=i
   L=shlex.shlex(geneCoordinates[x],posix=True)
   L.whitespace += ','
   L.whitespace_split = True
   L=list(L)
   output=open((("C:/Users/gwilymh/Desktop/Python/SNPsPerGene/%s.txt")%(str(L[2]))), 'a')
   geneStart=int(L[2])
   geneStop=int(L[3])

   #NEW CODE - deleted 2 lines, added 4
   #loop until break
   While 1:
      line = SNP_file.readLine()
      if not line: #exit loop if end of file reached
         break
      #end new code - the rest of your loop should behave normally

      nSNPs=0
      SNP=shlex.shlex(line,posix=True)
      SNP.whitespace += '\t'
      SNP.whitespace_split = True
      SNP=list(SNP)
      SNPlocation=int(SNP[0])
      if SNPlocation < geneStart:
          continue
      #NEW CODE - 1 line changed
      else: #if SNPlocation >= geneStart: 
      #logic dictates that if SNPLocation is not < geneStart, then it MUST be >= genestart. so ELSE is sufficient
          if SNPlocation <= geneStop:
              nSNPs=nSNPs+1
              output.write(str(SNP))
              output.write("\n")
              #NEW CODE 1 line added- need to exit this loop once we have found a match.
              #NOTE - your old code would return the LAST match. new code returns the FIRST match.
              #assuming there is only 1 match this won't matter... but I'm not sure if that assumption is true.
              break
      #NEW CODE - 1 line deleted
      #else: break else nolonger required. there are only two possible options.

      j = j+1
   nSNPsPerGene.write(("%s\t%s")%s(str(L[2]),nSNPs)) 
```

# python - 如何在织物中做 sudo -E .....？

> ID：14802204
> 
> 赞同：1
> 
> 时间：2013-02-10T20:22:19.347
> 
> 标签：python, ubuntu, pip, fabric

我有一个当前使用以下命令的结构脚本：

```
sudo('pip install virtualenv --upgrade --use-mirrors') 
```

我想知道的是如何通过 sudo -E 选项来运行它？

```
sudo -E pip install virtualenv --upgrade --use-mirrors 
```

编辑：

试过这个：

```
sudo('pip install virtualenv --upgrade --use-mirrors, -E') 
```

但这似乎通过了 pip install 而不是 sudo 的选项

编辑2：

```
env.sudo_prefix = "sudo -E -S -p '%(sudo_prompt)s'" 
```

给我一个 TypreError: format requires a mapping

编辑 3：

```
env.sudo_prefix = "sudo -E -S -p '%(sudo_prompt)s'" % env 
```

给了我一个 TypreError: 在字符串格式化期间不是所有参数都转换了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:54:13.650

From the fabric source file . the sudo method signature is as follows :

```
def sudo(command, shell=True, pty=True, combine_stderr=None, user=None,
    quiet=False, warn_only=False, stdout=None, stderr=None, group=None,
    timeout=None): 
```

the examples provided do not show any such scenario (amazingly) i would have bet otherwise.

```
sudo("~/install_script.py")
        sudo("mkdir /var/www/new_docroot", user="www-data")
        sudo("ls /home/jdoe", user=1001)
        result = sudo("ls /tmp/")
        with settings(sudo_user='mysql'):
            sudo("whoami") # prints 'mysql' 
```

I would suggest you supply the user key.

Have a look at this open ticket :

[https://github.com/fabric/fabric/issues/503](https://github.com/fabric/fabric/issues/503)

Have your tried running ur command with run()

```
run('sudo -E pip install virtualenv --upgrade --use-mirrors') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:25:17.183

这是一个非常糟糕的主意，它会迫使您存储密码明文等。正确的™方法是运行

```
$ sudo visudo 
```

并配置 sudo 以允许您的用户在不提示输入密码的情况下运行 pip。

否则，您将产生许多安全问题。

# c++ - 以编程方式创建纹理 DirectX

> ID：14802205
> 
> 赞同：4
> 
> 时间：2013-02-10T20:22:21.173
> 
> 标签：c++, directx

我试图通过提供一个 rgba 值数组，使用该数组创建一个 ID3D11Texture2D 资源，然后将其映射到我的 20 x 20 正方形，在屏幕上创建一个白色的 20 x 20 像素正方形。

这是创建方形纹理和着色器资源视图的代码：

```
void Square::CreateSquareTexture(float *color)
{
    float *texArray = (float *)malloc(4 * 20 * 20 * sizeof(float));

    for (int i = 0; i < 20 * 20 * 4; i++)
        texArray[i] = 1.0f;

    ID3D11Texture2D *boxTex = 0;

    D3D11_TEXTURE2D_DESC boxTexDesc;
    ZeroMemory(&boxTexDesc, sizeof(D3D11_TEXTURE2D_DESC));
    boxTexDesc.ArraySize = 1;
    boxTexDesc.BindFlags = D3D11_BIND_SHADER_RESOURCE;
    boxTexDesc.CPUAccessFlags = 0;
    boxTexDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    boxTexDesc.Height = 20;
    boxTexDesc.MipLevels = 1;
    boxTexDesc.MiscFlags = 0;
    boxTexDesc.SampleDesc.Count = 4;
    boxTexDesc.SampleDesc.Quality = m_4xMsaaQuality - 1;
    boxTexDesc.Usage = D3D11_USAGE_DEFAULT;
    boxTexDesc.Width = 20;

    D3D11_SUBRESOURCE_DATA boxTexInitData;
    ZeroMemory(&boxTexInitData, sizeof(D3D11_SUBRESOURCE_DATA));
    boxTexInitData.pSysMem = texArray;

    m_d3dDevice->CreateTexture2D(&boxTexDesc, &boxTexInitData, &boxTex);
    m_d3dDevice->CreateShaderResourceView(boxTex, NULL, &m_d3dSquareSRV);
} 
```

这是我的像素着色器：

```
Texture2D squareMap : register(t0);
SamplerState samLinear : register(s0);

struct PixelIn
{
    float4 Pos : SV_POSITION;
    float2 Tex : TEXCOORD;
};

float4 main(PixelIn pin) : SV_TARGET
{
    float4 texColor = squareMap.Sample(samLinear, pin.Tex);

    return texColor;
} 
```

但是，我的方块看起来全黑。我已经尝试使用 File 中的普通 .dds 纹理进行此操作，并且它有效，但为什么我不能以编程方式创建自己的纹理？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:31:11.723

您的纹理数组与您指定的格式不匹配。

**DXGI_FORMAT_R8G8B8A8_UNORM** 一种四分量、32 位无符号归一化整数格式，每个通道支持 8 位，包括 alpha。

您正在为 texArray 的每个通道传递四个浮点数（尝试使用 unsigned char 代替）

# android - 自定义视图代替 MenuItem.Icon() ActionBarSherlock

> ID：14802208
> 
> 赞同：0
> 
> 时间：2013-02-10T20:22:21.760
> 
> 标签：android, view, actionbarsherlock, drawable, menuitem

尝试使用 Actionbar Sherlock 对我的 Actionbar 进行一些自定义。

我有一个现有的自定义视图，它覆盖 Draw，并根据精度使用 GPS 状态进行自我更新。

我希望它是用户可用的最正确的菜单选项。（所以我相信 customView 已经出局了）。

我试图通过扩展 Drawable 而不是扩展 View（或 ImageView）将其实现为操作栏上的 MenuItem，我能够成功地做到这一点。

我的问题似乎是 w/ 扩展可绘制，当 GPS 精度发生变化时，我不能使我的视图无效以刷新。我可以调用 invalidateSelf，并且我启用了回调侦听器，其中传入了 invalidate(Drawable who)，但是如果我尝试将 who 设置为更新的图像，则什么也不会发生。

如果我点击该图标，它会刷新和更新..

想知道是否有比扩展drawable更好的解决方案，或者如果我扩展drawable，我怎样才能让它在没有用户输入的情况下动态更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:06:17.523

如果只有几个不同的状态要显示（也许 4 或 5 个图标可以与您的应用程序捆绑在一起），我建议在 onPrepareOptionsMenu() 期间动态更新您的菜单选项。

```
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem gpsStatus = menu.findItem(R.id.menu_gps);

    // figure out which icon to show here
    // int drawableId = R.drawable.ic_gps_accurate

    gpsStatus.setIcon(drawableId);
} 
```

要触发此代码，只需调用 invalidateOptionsMenu(); 您可能希望保存状态，以便您的 onPrepareOptionsMenu() 更快、更轻松地找出正确的图标。

```
private void onGPSStatusUpdated(int newStatus) {
    mGPSStatus = newStatus;
    invalidateOptionsMenu();
} 
```

# memory-leaks - 最小 D 程序中的内存泄漏？

> ID：14802212
> 
> 赞同：4
> 
> 时间：2013-02-10T20:22:42.193
> 
> 标签：memory-leaks, valgrind, d

这个最小的程序：

```
int main()
{
  return 0;
} 
```

当使用 valgrind 编译`gcc`和运行时工作得很好。

编译为 D 程序时使用

```
dmd test_new.d && valgrind ./test_new 
```

我得到：

```
HEAP SUMMARY:
    in use at exit: 360 bytes in 4 blocks
  total heap usage: 22 allocs, 18 frees, 52,024 bytes allocated

LEAK SUMMARY:
   definitely lost: 288 bytes in 3 blocks
   indirectly lost: 0 bytes in 0 blocks
     possibly lost: 0 bytes in 0 blocks
   still reachable: 72 bytes in 1 blocks
        suppressed: 0 bytes in 0 blocks 
```

使用 gdc：

```
gdc -o test_new test_new.d && valgrind ./test_new 
```

我明白了

```
HEAP SUMMARY:
    in use at exit: 568 bytes in 4 blocks
  total heap usage: 23 allocs, 19 frees, 52,664 bytes allocated

LEAK SUMMARY:
   definitely lost: 496 bytes in 3 blocks
   indirectly lost: 0 bytes in 0 blocks
     possibly lost: 0 bytes in 0 blocks
   still reachable: 72 bytes in 1 blocks
        suppressed: 0 bytes in 0 blocks 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:45:37.430

如果您将 --leak-check=full 选项与 valgrind 一起使用，它会告诉您泄漏的位置。

我有

```
 ==32630== HEAP SUMMARY:
    ==32630==     in use at exit: 136 bytes in 4 blocks
    ==32630==   total heap usage: 16 allocs, 12 frees, 49,992 bytes allocated
    ==32630== 
    ==32630== 40 bytes in 1 blocks are definitely lost in loss record 4 of 4
    ==32630==    at 0x4026A68: calloc (vg_replace_malloc.c:566)
    ==32630==    by 0x8051C93: _d_monitor_create (in /home/dave/stack/test_new)
    ==32630==    by 0x8055B4F: thread_joinAll (in /home/dave/stack/test_new)
    ==32630==    by 0x804E47E: _D2rt6dmain24mainUiPPaZi6runAllMFZv (in /home/dave/stack/test_new)
    ==32630==    by 0x804E3F3: _D2rt6dmain24mainUiPPaZi7tryExecMFMDFZvZv (in /home/dave/stack/test_new)
    ==32630==    by 0x804EA29: main (in /home/dave/stack/test_new)
    ==32630== 
    ==32630== LEAK SUMMARY:
    ==32630==    definitely lost: 40 bytes in 1 blocks
    ==32630==    indirectly lost: 0 bytes in 0 blocks
    ==32630==      possibly lost: 0 bytes in 0 blocks
    ==32630==    still reachable: 96 bytes in 3 blocks
    ==32630==         suppressed: 0 bytes in 0 blocks 
```

它似乎与线程和监视器的创建有关，请参阅[mutex 文档](http://dlang.org/phobos/core_sync_mutex.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T20:35:48.477

我的猜测是 D 的运行时不会费心释放它的一些内存，但我不知道。glibc 特别不会在程序关闭时释放一些东西，因为理论上操作系统将在程序结束后立即回收它。D 的运行时可能会做同样的事情——尽管在 glibc 的情况下，它们有一个函数应该在你用 valgrind 运行程序时释放这些东西，以免 valgrind 报告错误。或者 D 的运行时可能只是发生了彻底的内存泄漏。必须追查才能确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T20:30:26.480

看起来 D 的运行时正在创建内存泄漏（在您`main`被调用之前/在`main`返回之后运行的东西）。您可以通过在下运行程序来查看正在进行的活动，`ltrace`并`strace`查看是否有任何`malloc`不是`free`'d 或者是否有任何`mmap`未映射的操作

# extjs - 在 extjs 中添加新节点视图后无需重新加载页面

> ID：14802213
> 
> 赞同：0
> 
> 时间：2013-02-10T20:22:49.833
> 
> 标签：extjs, extjs3, ext-designer

当我使用休闲功能创建子节点时，新创建的节点不在树节点中查看。但使用按 F5 键重新加载页面。在树节点中显示新创建的节点如何在不重新加载网页的情况下查看节点？

```
 createSubCategory: function() {
     dt    = new Date();
     id    = dt.format('U');
     name  = 'New Sub-Category'
     if(this.treepanelSkillCat.selModel.selNode == null) 
     {
        Ext.MessageBox.show({
           buttons: Ext.MessageBox.OK,
           icon:Ext.MessageBox.ERROR
        });
        return false;   
     }         
     var parent        = this.treepanelSkillCat.selModel.selNode.id;      

     var newNode       = new Ext.tree.AsyncTreeNode({id: id, text: name, leaf: false});
     form_data         = {'SKL_CAT_ID': id , 'SKL_CAT_NAME' : name, 'PARENT_SKL_CAT_ID' :parent }; 

     this.nodeAction   = 'addtotree';
     this.selNode      = newNode;   

     this.submitNode(form_data,'addtotree');
     this.treepanelSkillCat.selModel.selNode.appendChild(newNode);
  }, 
```

![重新加载之前](../Images/728d66032276371a9bd327b1e9621e06.png)![重新加载后可以查看在最后一个节点中新添加的子子节点如下](../Images/e4fe257036635c603f33d2108c412c0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:05:18.323

尝试在 submitNode 方法的回调中重新加载 treePanel 存储。

# ember.js - emberjs 车把模板中的不同渲染技术

> ID：14802223
> 
> 赞同：29
> 
> 时间：2013-02-10T20:23:39.427
> 
> 标签：ember.js

最近我读了很多关于 emberjs 的文章，但有些东西对我来说不是很清楚：我感觉有不同的渲染模板的方法。有人可以解释这些之间的区别：

```
{{render}}
{{partial}}
{{template}}
{{outlet}} 
```

我正在使用 pre4，所以如果其中一些关键字已过时，请通知。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-10T20:50:22.943

You can search the Ember.JS source for all of these by searching for: `Ember.Handlebars.registerHelper('?'`. For example, to find the part where `template` is defined, search for: **Ember.Handlebars.registerHelper('template'**

**{{template}}**

Is similar to the `{{partial}}`, but looks for templates that you define in the `Ember.TEMPLATES` hash. From the source code we can see an example: `Ember.TEMPLATES["my_cool_template"] = Ember.Handlebars.compile('<b>{{user}}</b>');` and then we can render it that way.

I heard a whisper that `{{template}}` is **@deprecated**, but I can't find where I found that information at the moment. However, it's worth mentioning that I've never found myself using this one. Instead I prefer `{{partial}}`.

**Edit:** It appears as though it isn't **@deprecated** as of `3df5ddfd4f`. My mistake!

**{{partial}}**

This is different to the `{{render}}` approach in that the `controller` and `view` are inherited from the context that called it. For example, if you're in the `UserRoute`, and you load in a partial in your user template, then the `UserView` and `UserController` will both be passed to your partial, so they can access exactly the same information as its current parent.

Partial names, when defined, start with an underscore. For instance, a `Profile` partial will have the `data-template-name` of: `data-template-name="_profile"` but is inserted into your view as `{{partial "profile"}}`.

**{{outlet}}**

You'll probably find yourself using this one a lot. It's predominantly used in cases where the `outlet` changes frequently, based on user interactions. By transitioning to (`this.transitionTo`/`{{#linkTo}}`) another page, Ember inserts the view into the `{{outlet}}` and attaches the relevant `controller` and `view`.

As an example, if you're transitioning into */#/pets* then, by default, Ember will load the `PetsView` into the `{{outlet}}`, and attach the `PetsController`, all of this after initialising the `PetsRoute` to take instructions before initialising the view and finding the controller.

**{{render}}**

This is a mixture of an `{{outlet}}` and a `{{partial}}`. It's used for static pages that don't switch out for other pages (as an `outlet` does), but it doesn't inherit the controller and view (as a `partial` does).

It's better with an example. Let's say you've got a navigation. Usually you'll only have one navigation, and it won't change for another one, but you want the navigation to have its own controller and view, and not to be inherited from the context (probably `ApplicationRoute`). Therefore when you insert the navigation (`{{render "navigation"}}`), Ember will attach `App.NavigationController` and `App.NavigationView`.

**Summary**

*   `template`: Consults a global hash and inserts the view when it finds it (possibly soon to be **@deprecated**);
*   `partial`: Used to split up complicated views, and inherits the controller/view from the parent (if you're in the `UserController`, then the partial will also have access to this, and its associated view).
*   `outlet`: Most widely used, and allows you to quickly switch out pages for other pages. Relevant controller/view attached.
*   `render`: Similar to an outlet, but is used for pages that are persistent across the entire application. Assumes the relevant controller/view, and **doesn't** inherit them.

Did I explain them well?

Just to clarify:

*   Partial: Inherited controller, inherited view, non-switchable;
*   Outlet: Relevant controller, relevant view, switchable;
*   Render: Relevant controller, relevant view, non-switchable;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T18:31:10.967

我想在这里发布另一个真正帮助我澄清何时使用各种`template`技术的答案 -

**路线**

使用路线是您需要完整路线的时候。“路由”具有唯一的 URL，由以下类型的生成或用户定义的类组成 -

1.  路线 (Ember.Route)
2.  控制器（Ember.Controller || Ember.ArrayController || Ember.ObjectController）
3.  查看 (Ember.View)
4.  模板（车把模板）

**{{使成为}}**

`{{render}}`当您需要视图但仍需要为控制器提供一些功能时， 请使用帮助程序。`{{render}}`没有唯一*的*URL，由以下内容组成 -

1.  控制器（Ember.Controller || Ember.ArrayController || Ember.ObjectController）
2.  查看 (Ember.View)
3.  模板（车把模板）

**{{零件}}**

`{{component}}`当您构建一个独立于其呈现的上下文而存在的常用重用模板时，请使用帮助程序。一个不错的例子可能是，如果您正在构建一个零售网站，并希望拥有一个与呈现位置无关的产品视图。 `{{component}}`没有唯一的 URL 也*没有*a `controller`，而是有一个`component`类，由以下内容组成 -

1.  组件（Ember.Component）
2.  模板（车把模板）

**{{部分的}}**

`{{partial}}`当您只是重新使用一些标记时， 请使用帮助程序。`{{partial}}`没有唯一的 URL，也*没有*像组件这样的特殊支持，由以下内容组成 -

1.  模板（车把模板）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-13T05:17:31.807

[该指南还在这里](http://emberjs.com/guides/templates/rendering-with-helpers/)提供了一些有用的信息！下面是一个快速的总结：

![在此处输入图像描述](../Images/615d98355b78f61f2da35e30d7c46794.png)

# python - 在进程运行时读取进程的输出

> ID：14802224
> 
> 赞同：1
> 
> 时间：2013-02-10T20:23:57.607
> 
> 标签：python, linux, python-3.x, subprocess, popen

我需要启动一个进程并在进程运行时读取该进程的输出。我希望能够打印输出（可选）并在过程完成后返回输出。这是我到目前为止所拥有的（从stackoverflow中的其他答案合并）：

```
def call(command, print_output):
    process = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    out = ""

    while True:
        line = process.stdout.readline().rstrip().decode("utf-8")
        if line == '':
            break

        if print_output:
            print(line)

        out += line + "\n"

    process.wait()

    return process.returncode, out 
```

此代码在 Windows 中运行良好（使用 Windows 7、python 3.3 测试）但在 linux（Ubuntu 12.04、python 3.2）中失败。在linux中，脚本挂在行

```
line = process.stdout.readline().rstrip().decode("utf-8") 
```

当该过程完成时。

代码有什么问题？我也尝试使用 process.poll() 检查进程是否已完成，但在 Linux 下总是返回 None 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:53:10.217

The docs say

```
Warning Use communicate() rather than 
.stdin.write, .stdout.read or .stderr.read to
avoid deadlocks due to any of the other OS pipe buffers filling 
up and blocking the child process. 
```

I know I had issues before on Windows.

I presume the command is running in unbuffered mode somehow.

The docs have recipes for using subprocess your sounds like [shell-backquote](http://docs.python.org/2/library/subprocess.html#replacing-bin-sh-shell-backquote) yet your use of `subprocess` is different.

# zend-framework - zend 框架：插件控制器不起作用

> ID：14802231
> 
> 赞同：0
> 
> 时间：2013-02-10T20:25:12.333
> 
> 标签：zend-framework, plugins, controller

我想在 Zend Framework 中使用控制器插件。我在应用程序文件夹中创建了一个文件夹“插件”，并在其中创建了一个文件 Test.php。它的内容：

```
<?php

class Plugin_Multilanguage extends Zend_Controller_Plugin_Abstract{
    public function preDispatch(){
        echo 'The plugin is working';
    }
} 
```

在 Bootstrap 文件中，我添加了功能：

```
protected function _initAutoload(){

        $fc = Zend_Controller_Front::getInstance();
        $fc->registerPlugin(new Plugin_Multilanguage());

    } 
```

它不起作用。我什至没有任何错误或磨损。只是一个空白页。我注意到有很多类似的主题，我已经阅读了所有这些主题，但我仍然对这个简单的问题感到困惑。我使用 Zend Framework 1.11。请帮忙。

我收到以下错误：

```
 Fatal error: Class 'Plugin_Multilanguage' not found in C:\zendSites\moduleDeveloper\application\Bootstrap.php on line 13 
```

我的 application.ini 文件内容：

```
[production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.view[] =
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules = ""
resources.frontController.params.displayExceptions = 0
resources.frontController.params.prefixDefaultModule = "1"
resources.router.routes.defaultmodule.type = Zend_Controller_Router_Route_Module
resources.router.routes.defaultmodule.abstract = On    
resources.router.routes.defaultmodule.defaults.module = "system"
resources.router.routes.language.type = Zend_Controller_Router_Route
resources.router.routes.language.route = ":language"
resources.router.routes.language.reqs.language = "^(fr|en)$"
resources.router.routes.language.defaults.language = "en"
resources.router.routes.default.type = Zend_Controller_Router_Route_Chain
resources.router.routes.default.chain = "language, defaultmodule"
[staging : production]
[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

我尝试一一添加以下资源：

```
pluginPaths.Plugins = APPLICATION_PATH "/plugins"
autoloaderNamespaces[] = "plugins"
resources.frontController.plugins[] = "Plugin_Multilanguage"
pluginPaths.Plugins = APPLICATION_PATH "/plugins"
autoloaderNamespaces[] = "plugins" 
```

只有错误消息在改变：

```
 Fatal error: Class 'Plugin_Multilanguage' not found in C:\zend\library\Zend\Application\Resource\Frontcontroller.php on line 117 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:22:42.273

应用程序可能无法读取您的插件路径：

```
APPLICATION_PATH "/plugins" 
```

默认情况下，这些路径对于 ZF 中的类代码是不可读的。

尝试将您的插件移动到应用程序库：

```
/library
  /Application
    /Plugin
      Multilanguage.php 
```

更新您的代码以反映这一点：

```
<?php

class Application_Plugin_Multilanguage extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(){
        echo 'The plugin is working';
    }
} 
```

并更新引导程序：

```
protected function _initAutoload()
{
    $fc = Zend_Controller_Front::getInstance();
    $fc->registerPlugin(new Application_Plugin_Multilanguage());
} 
```

# ios - iOS 访问 parentViewController 以更改 UIButton 的状态 setSelected:YES

> ID：14802232
> 
> 赞同：1
> 
> 时间：2013-02-10T20:25:22.587
> 
> 标签：ios, uibutton, parentviewcontroller, childviewcontroller

我在 MainViewController 中有一个 UIButton。
MainViewController 有一个 childViewContoller。

我需要从 childViewController 访问 MainViewController 中的 UIButton (tcButton) 属性，并在 viewDidLoad 中将其设置为 setSelected:YES。我的 ChildViewController.m 文件中有以下代码，但它不起作用。

```
#import "ChildViewController.h"
#import "MainViewController.h"
#import "CoreData.h"

@interface ChildViewContoller () 
@property (nonatomic, strong) CoreData *coreData;
@property (nonatomic, strong) MainViewController *mainViewController;
@end

@implementation ChildViewController
@synthesize coreData, mainViewController;

-(void)viewDidLoad 
{
    [super viewDidLoad];
    self.managedObjectContext = [(STAppDelegate *)[[UIApplication sharedApplication]  delegate] managedObjectContext];
    [[(mainViewController *)self.parentViewController tcButton] setSelected:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:18:07.413

你的代码有点乱。为什么要在 viewDidLoad 中创建自己的新实例？这是没有意义的。如果 ChildViewController 是真正的子视图控制器，那么您可以通过 self.parentViewController 访问父视图。viewDidLoad 中只需要一行：

```
-(void)viewDidLoad // Line 4
{

    [[(MainViewController *)self.parentViewController tcButton] setSelected:YES]; // Line 8
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:13:28.620

您的代码中有几个问题，但执行您想要的主要想法是获取指向 mainViewController 的指针。有很多方法可以做到这一点，但这里有一个简单的例子，你可以如何实现这样的事情。例如，在 ChildViewContoller 的初始化程序中，您可以将指针传递给 mainViewController：

```
@interface ChildViewContoller ()

@property (nonatomic, strong) MainViewController *mainViewController;

@end

@implementation ChildViewContoller

- (id)initWithMainViewController:(MainViewController *)mainViewController
{
    self = [super init];

    if (self)
    {
        _mainViewController = mainViewController;
    }

    return self;
}

- (void)viewDidLoad
{
    [_mainViewController.tcButton setSelected:YES];
}

@end 
```

请不要说我没有测试上面的代码，但你可以明白。

# c# - VS12 dotNet 4.5 上 MVC4 上的 Razor 不适用于 Intellisense

> ID：14802235
> 
> 赞同：1
> 
> 时间：2013-02-10T20:25:32.920
> 
> 标签：c#, .net, asp.net-mvc, razor, razor-2

这对这里的人来说也是个问题吗？我搜索了 SO，但找不到任何真正帮助我的帖子。

有些人告诉我在插入“点”后按 Ctrl+Space，这不是我想要的。在我使用 VS10 进行测试后，Razor 曾经可以正常工作。

[更新] Ctrl+Space

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:30:49.613

Intellisense 在 VS2012 中与 Razor 一起工作。我之前遇到过问题，Visual Studio 将停止执行 Intellisense。通常重新启动视觉工作室会为我修复它。

# wordpress - 挂钩到 WordPress 主题定制器保存操作

> ID：14802251
> 
> 赞同：7
> 
> 时间：2013-02-10T20:26:31.830
> 
> 标签：wordpress, themes

我面临以下问题：

我曾经将所有样式保留在主题选项页面中。当用户单击保存按钮时，我有一个后端脚本，它生成了一个带有更改的 css 文件，这样它们就不会在每个页面中内联输出。这有很多好处，其中包括缓存。

我已经切换到主题定制器，一切都很好，除了我找不到连接“保存”按钮的方法。我想触发一个函数，当在后端单击该按钮时更新css文件的内容。

这甚至可能吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-21T14:22:11.307

从 WordPress 3.6.0 开始，您现在可以调用`customize_save_after`.

```
<?php
function emailAdmin(){
    mail('your@email', 'Woza!', 'You won\'t believe this but someone has updated the theme customizations!!');
}
add_action( 'customize_save_after', 'emailAdmin' );
?> 
```

更多信息：http: [//developer.wordpress.org/reference/hooks/customize_save_after/](http://developer.wordpress.org/reference/hooks/customize_save_after/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-21T21:32:41.043

我面临同样的情况。custom_save 在保存选项之前有效，所以就这样了。我已经通过电子邮件向 Otto (ottodestruct.com) 发送了邮件。

我现在的解决方案如下：

```
add_action('customize_save', 'regenCSS', 100);
function regenCSS( $wp_customize ) {
    checkCSSRegen(); // Checks if I need to regen and does so
    set_theme_mod('regen-css', time()+3); // Waits 3 seconds until everything is saved
}
function checkCSSRegen() {
    if (get_theme_mod('regen-css') != "" && get_theme_mod('regen-css') < time()) {
        makecss();
        remove_theme_mod('regen-css');
    }
} 
```

我还添加了一个额外的 checkCSSRegen(); 到我的 customize_controls_init 函数。

同样，这有点像黑客攻击。不幸的是，这是我当时能找到的最好的。

另一种选择是使用仅 ping 一个 php 文件的 ajax 响应。这感觉比这更像是一种黑客行为。

另一个快速的技巧是执行一个 javascript 操作，当单击保存按钮时，它会设置一个计时器来延迟对运行编译的 PHP 文件的调用。这对我来说非常 hacky。

上述唯一的后备方案是，除非重新加载定制器或保存其他值，否则您可能无法获得所需的所有值。

还有人有更好的主意吗？

** 更新 ** 刚刚向 Wordpress 团队添加了以下请求。希望我们能把它挤进去。

[http://wordpress.org/ideas/topic/do-customize_save-action-hook-after-the-settings-are-saved?replies=3#post-24853](http://wordpress.org/ideas/topic/do-customize_save-action-hook-after-the-settings-are-saved?replies=3#post-24853)

*** 更新 2 *** 看起来它将在 3.6 版本中作为 customize_save_after。猜猜几条推文和示例代码甚至可以在 Wordpress 团队中实现。;)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-27T14:42:30.990

正如@Dovy 所描述的，你`customize_save_after`现在可以挂钩了：

```
do_action('customize_save_after', 'savesettings', 99); 
```

将`savesettings`设置保存到文件时，使用本机 php 文件函数（如 ）执行此操作将是不好的做法，`file_put_contents()`如下所述：[http](http://ottopress.com/2011/tutorial-using-the-wp_filesystem/) ://ottopress.com/2011/tutorial-using-the-wp_filesystem/ by @otto。

文件保存的解决方案是使用 wp_filesystem。要使用 wp_filesystem，您将需要用户的文件凭据 (ftp)。

`customize_save_after`将在 AJAX 请求中调用，结果将不可见。AJAX 句柄的原因，您不能向用户询问需要提交表单的文件凭据。

可以通过将文件凭据保存到 wp-config.php 并将它们（临时）添加到数据库来找到解决方案。这样做`savesettings`可以从数据库中读取凭据，并使用它们通过凭据来保存文件。（这里更详细地描述了这个解决方案：[https](https://wordpress.stackexchange.com/a/126631/31759) ://wordpress.stackexchange.com/a/126631/31759 ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T03:15:22.023

**`customize_save`**未测试，但[*`/wp-includes/class-wp-customize-manager.php`*](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/class-wp-customize-manager.php#L509).

它在`save()`函数内部：

```
/**
 * Switch the theme and trigger the save action of each setting.
 *
 * @since 3.4.0
 */ 
```

此文件中还有一些其他有趣的操作挂钩 ( `do_action`) 可能值得检查。

# javascript - 在 SPA 中使用backbone.js 在页面之间传递数据

> ID：14802255
> 
> 赞同：0
> 
> 时间：2013-02-10T20:26:53.913
> 
> 标签：javascript, backbone.js, knockout.js, single-page-application

如果这个问题听起来很模糊，请原谅我。我已经浏览了整个网络，但我找不到任何关于如何做到这一点的例子——这加上我对网络开发真的很陌生，这让我有点不知所措:)

我要做的是拥有一组“图库”对象（从本地 json 文件加载），将每个对象的第一张图像显示为单个页面上的网格。当用户单击图像时，会加载“画廊详情”页面并显示完整的画廊以及标题等。

我的问题是，您如何将所选项目“传递”到下一页以便可以注入和加载数据。

我一直在考虑创建一个带有骨干网或淘汰赛的 SPA，但现在只要一些可行且可扩展的东西将是一个很好的开始。

由于数据源很小，我不打算做任何服务器端的事情。只是客户端 JS/HTML/CSS。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:53:44.023

Perhaps the easiest would be to use localStorage. I'd strongly recommend using a library like [store.js](https://github.com/marcuswestin/store.js) to do this:

```
// before you leave the page
store.set("selected", selectedItem);

// on the new page
var selected = store.get("selected");
if (selected == null)
    selected = defaultValue; 
```

# ios - 尝试在 iOS 项目中做一些简单的计算？

> ID：14802257
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:27:03.053
> 
> 标签：ios, nsstring, calculator, nsnumber

我想知道如何在我的 iOS 应用程序中做一些简单的方程式，如果有人能指出我正确的方向，那就太好了！

我需要知道如何将表示分钟的 NSNumber 转换为表示小时和分钟的 NSString（例如：100 = 1 小时 40 分钟）

我还想知道是否可以将 2013-02-08T10:50:00.000 转换为 10:50AM

感谢你们可能有的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:38:13.507

对于转换：

```
NSNumber *yourNumber = [NSNumber numberWithInt100];

NSInteger hour    = [yourNumber intValue] / 60;
NSInteger minutes = [yourNumber intValue] % 60;
NSString *time_stamp = [NSString stringWithFormat:@"%d hour and %d minutes",hour,minutes]; 
```

正如评论所建议的，您可以使用 NSDateFormatter 来格式化您的 NSDate。

# javascript - 如何将 Mathematica 语法转换为乳胶？

> ID：14802260
> 
> 赞同：6
> 
> 时间：2013-02-10T20:27:17.427
> 
> 标签：javascript, html, latex, wolfram-mathematica

wolfram alpha 接受乳胶，但不导出到乳胶，

它导出纯文本、渲染图像和数学语法。

是否有任何将输出转换为乳胶的 javascript 库？

数学语法：

```
Cell[BoxData[FormBox[TagBox[RowBox[List[FractionBox["1", "2"], " ", RowBox[List["(", RowBox[List[RowBox[List["4", " ", SuperscriptBox["x", "2"]]], "+", "x", "+", "2"]], ")"]]]], Identity, Rule[TagBoxNote, List[Rule["Hyperlink", "1/2 (2+x+4 x^2)"]]]], TraditionalForm]], "Output", Rule[PageWidth, 500], Rule[Magnification, 1], Rule[CellMargins, List[List[0, 0], List[0, 0]]], Rule[ShowCellBracket, False], Rule[FontFamily, "Bitstream Charter"], Rule[FontSize, 14], Rule[NumberSeparator, "\[ThinSpace]"]] 
```

乳胶语法

```
2x^2+\frac{x}{2} +1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:42:20.077

I know that you can do it within Mathematica itself using [TeXForm](http://reference.wolfram.com/mathematica/tutorial/GeneratingAndImportingTeX.html)

So you would do something like `ToExpression["\\frac{a}{b}", TeXForm]`

# ios - 使用 API 1.1 版的 Twitter 授权

> ID：14802266
> 
> 赞同：4
> 
> 时间：2013-02-10T20:27:38.030
> 
> 标签：ios, objective-c, oauth, twitter, twitter-oauth

我在stackoverflow上进行了搜索，但无法找到我的问题的答案，所以我想我会问。

我目前正在开发一个 iOS 应用程序，我想在其中获取公共时间线的提要，而无需应用程序的用户拥有 Twitter 帐户。

我可以使用 API 的 twitters v1.0 成功地做到这一点，并且一切正常。[只需向http://api.twitter.com/1/statuses/user_timeline.json?screen_name=username](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=username)发出请求即可检索我需要的所有信息。

但是，由于 v1.0 已被弃用，并且 V1.1 要求对每个请求进行身份验证，因此使用此 API 时出现错误的授权错误。查看了 Twitter 文档以及如何生成 OAuth 请求标头后，我并不完全理解以下链接中文档的“获取签名密钥”部分。（这是我第一次使用 Twitter 的 API 和 OAuth，在我开始实施之前，我试图获得一个很好的理解）

[https://dev.twitter.com/docs/auth/creating-signature](https://dev.twitter.com/docs/auth/creating-signature)

据我了解，在登录 twitter.com/apps 时可以找到消费者密钥，但我不确定从哪里获取“OAuth 令牌密钥”以生成有效的签名密钥。

由于这是一个 iOS 应用程序，我知道我可以使用 TWRequest 类，但据我了解，这需要用户在他们的设备上设置 twitter。

我希望上述内容是有道理的，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:44:12.207

如果您访问您已设置的 Twitter 应用程序[https://dev.twitter.com/apps](https://dev.twitter.com/apps)

**您应该在Your access token**标题下看到您的 Access token secret 。如果你没有看到这个，那么你可能还没有生成访问令牌。

# mysql - 在mysql中插入带有简单撇号的字符串

> ID：14802274
> 
> 赞同：0
> 
> 时间：2013-02-10T20:28:55.180
> 
> 标签：mysql, comma

我试图将一些信息放入我的数据库中，我从文本文件中获取信息，但我有下一个问题，我想插入一些带有简单撇号 (') 的单词，所以你怎么知道你什么时候为字符串插入一个字符串，每个字符串都需要几个''，所以当一些带有简单撇号的单词出现时，我会遇到语法错误。例如：

在哪里`$player = N'Zogbia`

```
$resultado = mysql_query( "INSERT INTO equipo VALUES( '$nom_equipo', '$player' );" , $link ); 
```

我怎么能在不修改那个简单的撇号的情况下插入那种名字呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:36:24.677

我会使用像addslashes或real_escape_string这样的函数： [http ://php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php) [http://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

# java - 发出 HTTP POST 请求 Java

> ID：14802275
> 
> 赞同：0
> 
> 时间：2013-02-10T20:29:02.377
> 
> 标签：java, http, post, request

我正在尝试发布此帖子，但我无法实现。执行 HttpPost 时我的代码失败

这是帖子：

```
https://eu.api.mega.co.nz/cs?id=1746599986
POST /cs?id=1746599986 HTTP/1.1
Host: eu.api.mega.co.nz
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-ar,es;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Referer: https://mega.co.nz/
Content-Length: 67
Content-Type: text/plain; charset=UTF-8
Origin: https://mega.co.nz
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
[{"a":"us","user":"example@example.com","uh":"XXXXXXX"}]

HTTP/1.1 200 OK
Content-Type: application/json
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept
Content-Encoding: gzip
Content-Length: 1014
Connection: Keep-Alive 
```

这是我的代码：

```
String url = "https://eu.api.mega.co.nz/cs?id=";
Random random = new Random();

HttpClient mHttpClient = new DefaultHttpClient();

HttpPost mHttpPost = new HttpPost(mMegaUrl + random.nextInt(1999999999).toString());
mHttpPost.setHeader("Content-Type", "text/plain; charset=UTF-8");

String json = "[{'a':'us', 'user':'example@example.com', 'uh':'XXXXXXXX'}]";
mHttpPost.setEntity(new ByteArrayEntity(json.getBytes("UTF8")));

HttpResponse mHttpResponse = mHttpClient.execute(mHttpPost); 
```

提前致谢

# erlang - Erlang 监视器类型

> ID：14802277
> 
> 赞同：1
> 
> 时间：2013-02-10T20:29:27.867
> 
> 标签：erlang, monitor

完全披露：我才刚刚开始学习 erlang。所以，如果我是 nieve，请原谅我。在 erlang 手册中，monitor 函数的签名是：

```
monitor(Type, Item) -> MonitorRef 
```

根据文档的其余部分：

> 目前只能监控进程，即唯一允许的类型是进程，但将来可能会允许其他类型。

监视器语义似乎与进程有着内在的联系，即监视进程以外的东西是没有意义的。拥有这个额外的参数似乎近乎偏执，而不是试图为未来做计划。未来可能允许监控的这些其他事情是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:47:16.610

我不知道设计者可能会想到什么，但我猜是远程节点。

可以监视进程组（ [http://www.erlang.org/doc/man/pg2.html](http://www.erlang.org/doc/man/pg2.html) ）也可能有意义。

# wordpress - 导入 wp 制作的网站及其 mysql 数据库

> ID：14802279
> 
> 赞同：0
> 
> 时间：2013-02-10T20:30:13.333
> 
> 标签：wordpress

希望我不是在问重复的问题。我是wordpress的新手。我试图通过在我的本地主机中导入一个已经存在的电子商务 wp 网站（及其内容和我的 sql 数据库）来学习它，然后使用它。我找到的最接近的链接是这个[导入](http://wordpress.org/support/topic/importing-a-website-into-wordpress) 非常感谢任何有关如何创建任何 wp 电子商务网站以及如何将其导入本地主机的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:35:40.197

使用这个插件[http://wordpress.org/extend/plugins/wordpress-importer/](http://wordpress.org/extend/plugins/wordpress-importer/)，它提供了非常容易的数据导入

# ruby-on-rails - 在 Rails 中缓存 DOM 更改

> ID：14802282
> 
> 赞同：0
> 
> 时间：2013-02-10T20:30:26.203
> 
> 标签：ruby-on-rails, caching

我正在进行部分缓存，效果非常好。

但是，如果我更改缓存块内的 DOM，则不会缓存这些更改。有没有办法也包括这些变化？

这是我到目前为止所拥有的：

```
<%
cache(@contact.hash_key) do
    %><div id="<%=@contact.hash_key%>"></div><%
end
%>

<script>
    //use ajax to prepend new messages.
    $(document).ready(function(){
       $.get("/messages?cid=<%=@contact.hash_key%>", function(data) {
          $("#<%=@contact.hash_key%>").prepend(data);
       });
    });
</script> 
```

**更新**

好的，所以我试图在结果进入具有相同缓存键的 DOM 之前尝试缓存结果。这样，当呈现缓存块时，新数据将包含在该键中。

但我不确定构建它的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:47:54.327

完毕！

因此，对于任何想要做同样事情的人来说，这里有一个关于如何做的简要概述。您可能需要进行更改或调整此解决方案以适合您自己的解决方案。

这仅在您使用缓存键时才有效。在我的例子中，我有 2 种类型。一个`contact.hash_key`和一个`message.hash_key`

所有消息缓存都保存在父联系人缓存中。所以本质上：

```
<div id='contact-hash'>
    <div id='message-hash-1'>
    <div id='message-hash-2'>
    <div id='message-hash-3'> 
```

首先，我们需要遍历消息并查看它们是否被缓存。如果是，那么您可以只渲染缓存的副本。您可以使用以下`Rails.cache.read`方法执行此操作：

```
messages.each do |message|
   cache = Rails.cache.read 'views/'+message.hash_key
   if cache.nil? == false
       %><%= cache.html_safe %><%
   end
end 
```

所以现在我们有一个已经加载的缓存消息列表。那么新消息呢？让我们通过 ajax 加载这些，这样用户就不会等待无聊的页面加载。

您会在我上面的问题中注意到我`"/messages?cid=<%=@contact.hash_key%>"`在 AJAX 调用中进行了查询。这是调用`messages controller`并渲染`index view`.

在我们想要将渲染视图加载到 DOM 之前，我们想先将其写入缓存，令人惊讶的是，我们将使用相同的 message.hash_key 来读取它。

所以在你看来：

```
<%
cache(message[:hash_key]) do
%>
   <div class='message'>
        This is a new message from the server.
   </div>
<%
end
%> 
```

如果在某些情况下这不起作用（上帝知道那里有这么多应用程序排列），您也可以`Rails.cache.write 'foo', 'bar'`在控制器中使用，而不是在视图级别缓存它。

你有它。现在您可以将新的 hash_key 添加到列表中，然后将视图作为 AJAX 调用的结果呈现回 DOM。

现在使用列表中的新 hash_key，您可以对其进行循环，它将作为缓存副本出现。

这可能是也可能不是最优雅的解决方案。如果有人想对其进行简化或提供任何建议，以便我对其进行改进，将不胜感激。

# ruby-on-rails - Rails Form_For：如何在更新表单中显示数组中的选定值

> ID：14802283
> 
> 赞同：0
> 
> 时间：2013-02-10T20:30:28.837
> 
> 标签：ruby-on-rails, select, for-loop, options, form-for

我有另一个 form_for 选择问题。我正在为我的客户模型的新表单和编辑表单使用部分。:customer_type 可以是以下三个值之一：Contractor、Business、Homeowner。因此，我将这些值放入模型中的数组中。

```
def self.customer_types 
  customer_types = ['Contractor', 'Homeowner', 'Business']
end 
```

在我的表格中，我这样做：

```
<%= f.select(:customer_type, options_for_select(Customer.customer_types)) %> 
```

这在新表单中可以正常工作，但是在编辑表单上，如何获取要选择的 :customer_type 的选定值？我已经尝试了几件事，但对我没有任何作用。

感谢您的任何提示。-jc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:37:19.200

options_for_select 采用可选的第二个参数，即选定的选项 :)

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

您需要的第二件事是实际值，可以通过 f.object 访问。所以沿着这些思路

```
<%= f.select(:customer_type, options_for_select(Customer.customer_types, f.object.customer_type)) %> 
```

# angularjs - 可重用和可测试代码的代码结构 Angular JS

> ID：14802284
> 
> 赞同：0
> 
> 时间：2013-02-10T20:30:32.980
> 
> 标签：angularjs

我有一个与 REST API 通信的 Angular JS 应用程序。该应用程序有一个管理部分，允许用户创建、读取、更新和删除资源。

有几种不同的资源，每个资源一个部分，我将每个成员定义为某种输入字段。我创建了一个指令，该指令为模板的常见内容创建双向绑定。

我还为我的每个资源创建了一个 ngResource。

现在到我的问题。我有一个用于工作的资源的控制器，它主要包含直接从部分调用的函数（例如 submit() ），并与 ngResource 通信。

除了少数例外，代码本身可以复制到所有其他控制器，只需更改资源名称即可。这是我想要避免的。

我怎样才能创建一个抽象的 ParentCtrl 并以某种方式注入我当时需要的资源？这是可测试的吗？这是解决问题的坏方法吗？

通常我会尝试抽象一个模型而不是一个控制器，但在这种情况下我真的不知道如何。

**编辑：添加代码**

资源：

```
angular.module('experienceServices', ['ngResource'])
  .factory('Experience', function($resource){
    return $resource('/api/experience/:id',
      {'id': '@_id'}, {edit: { method: 'PUT' }});
  }); 
```

控制器：

```
App.controller('ExperienceCtrl', function( $scope, Experience ) {
  $scope.resources = [];
  $scope.currentItem = {};

  $scope.updateResources = function(){
    $scope.resources = Experience.query();
  };

  $scope.findById = function(id){
    for (var i = 0; i < $scope.resources.length; i++){
      if ($scope.resources[i]._id === id){
        return $scope.resources[i];
      }
    }
  };

  $scope.showItem = function(id){
    $scope.currentItem = findById(id);
  };

  $scope.create = function (experience){
    Experience.save(angular.copy(experience), function(){
      $scope.updateResources();
    });
  };

  $scope.editItem = function (experience){
    var item = angular.copy(experience);
    if (!item.hasOwnProperty('_id')){
      alert('Can not modify non existing item');
    }
    Experience.edit(item, function(res){
      $scope.updateResources();
    });
  };

  $scope.edit = function(id){
    $scope.experience = $scope.findById(id);
  };

  $scope.del = function(id){
    Experience.remove({ id: id }, function(){
      $scope.updateResources();
    });
  };
  $scope.updateResources();
}); 
```

指示：

```
App.directive('resources', function (){
    return {
      scope: {
        list: '=',
        display: '@',
        edit: '&',
        del: '&'
      },
      template: '<div ng-repeat="elem in list">Name: {{ elem[display] }}' +
                ' <button ng-click="edit({ item: elem._id })">Edit</button> ' +
                ' <button ng-click="del({ item: elem._id })">Delete</button> ' +
                '</div>'
    };
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:53:50.373

将整个 API 包装到服务并从控制器访问它怎么样？您可以将资源类型作为参数传递给函数

# java - MongoDB java组/计数功能

> ID：14802289
> 
> 赞同：6
> 
> 时间：2013-02-10T20:31:22.583
> 
> 标签：java, mongodb

我是 MongoDB 的新手，我必须使用 jsp/servlet 创建简单的站点。

我需要创建一个查询，该查询将返回访问某个站点的次数的计数。

我的数据库如下所示：

```
{ "_id" : { "$oid" : "5117fa92f1d3a4093d0d3902"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:50.051Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/" , "dolaznaStr" : "localhost:8080/mongoProjekat/treca"}<br>
{ "_id" : { "$oid" : "5117fa92f1d3a4093d0d3903"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:50.796Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/treca.jsp" , "dolaznaStr" : "localhost:8080/mongoProjekat/peta"}<br>
{ "_id" : { "$oid" : "5117fa93f1d3a4093d0d3904"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:51.141Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/peta.jsp" , "dolaznaStr" : "localhost:8080/mongoProjekat/treca"}<br>
{ "_id" : { "$oid" : "5117fa93f1d3a4093d0d3905"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:51.908Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/treca.jsp" , "dolaznaStr" : "localhost:8080/mongoProjekat/cetvrta"}<br>
{ "_id" : { "$oid" : "5117fa94f1d3a4093d0d3906"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:52.035Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/treca.jsp" , "dolaznaStr" : "localhost:8080/mongoProjekat/cetvrta"}<br>
{ "_id" : { "$oid" : "5117fa94f1d3a4093d0d3907"} , "ip" : "127.0.0.1" , "datum" : { "$date" : "2013-02-10T19:52:52.197Z"} , "odlaznaStr" : "localhost:8080/mongoProjekat/cetvrta.jsp" , "dolaznaStr" : "localhost:8080/mongoProjekat/treca"} 
```

我需要的是一个看起来像这样的结果：

```
page: localhost:8080/mongoProjekat/treca visited: n(times)<br>
page: localhost:8080/mongoProjekat/druga visited: n(times) 
```

...对于已访问的每个页面，依此类推。

顺便说一句，我正在使用 Java。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T15:43:10.367

您可能会发现此 SQL 到 MongoDB 图表[http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)很有帮助。

至于你的直接问题：

```
 // getCollection

    DBCollection myColl = db.getCollection("toskebre");

    // for the $group operator
    // note - the collection still has the field name "dolaznaStr"
    // but, to we access "dolaznaStr" in the aggregation command, 
    // we add a $ sign in the BasicDBObject 

    DBObject groupFields = new BasicDBObject( "_id", "$dolaznaStr");

    // we use the $sum operator to increment the "count" 
    // for each unique dolaznaStr 
    groupFields.put("count", new BasicDBObject( "$sum", 1));
    DBObject group = new BasicDBObject("$group", groupFields );

    // You can add a sort to order by count descending

    DBObject sortFields = new BasicDBObject("count", -1);
    DBObject sort = new BasicDBObject("$sort", sortFields );

    AggregationOutput output = myColl.aggregate(group, sort);

    System.out.println( output.getCommandResult() ); 
```

println 将打印：

```
{ "serverUsed" : "localhost/127.0.0.1:27017" , 
  "result" : [ { "_id" : "localhost:8080/mongoProjekat/treca" , "count" : 3} , 
               { "_id" : "localhost:8080/mongoProjekat/cetvrta" , "count" : 2} ,
               { "_id" : "localhost:8080/mongoProjekat/peta" , "count" : 1}] , 
  "ok" : 1.0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:26:21.007

Ty 回答 Kay。我已经找到了与您类似的解决方案。我是这样做的：

```
 DBObject match = new BasicDBObject("stranica","$dolaznaStr");
     DBObject project = new BasicDBObject("$project",match);

     DBObject id = new BasicDBObject("_id",new BasicDBObject("stranica","$stranica"));
     id.put("posete", new BasicDBObject("$sum", 1));
     DBObject group = new BasicDBObject("$group",id);

     DBObject srt = new BasicDBObject("posete",-1);
     DBObject sort = new BasicDBObject("$sort", srt);
     AggregationOutput ao = collection.aggregate(project, group, sort); 
```

# ruby-on-rails-3 - 将实例变量传递给表单 - rails

> ID：14802294
> 
> 赞同：3
> 
> 时间：2013-02-10T20:32:26.093
> 
> 标签：ruby-on-rails-3, forms, instance-variables

这可能是一个错误，因为我对 Rails 以及如何跨模型使用变量的了解很少，所以如果需要更多代码来回答它或者我的术语不正确，请告诉我，我会很乐意更新问题。

我有一个帖子提要，我希望用户能够“喜欢”。虽然下面的代码允许喜欢在单个帖子的页面上工作 - `site.com:3000/posts/*post.id*`- 传递表单数据`like[liked_post_id]:*post.id*`，当我尝试在`site.com:3000/users/*user.id*`包含帖子提要的配置文件上提交喜欢时 - 传递的表单数据是`like[liked_post_id]:`（空白价值）

如何将帖子提要中的帖子 ID 传递给`liked_post_id`变量 in `_like.html.erb`？

我注意到类似表格的动作是`/likes`全面的。这只会在您在页面上时起作用`site.com:3000/posts/*post.id*`吗？我很好奇我是否需要修改它以便表单的动作是`/posts/*post.id*/likes`当你在页面上时`site.com:3000/users/*user.id*`

从我的帖子来看：

```
#views/posts/_post.html.erb:
...
  <%= render 'posts/like_form' if signed_in? %>
... 
```

路线到正确的形式：

```
#views/posts/_like_form.html.erb:
  <div id="like_form">
  <% if current_user.likes_this?(@post) %>
    <%= render "posts/unlike" %>
  <% else %>
    <%= render "posts/like" %>
  <% end %>
  </div> 
```

喜欢来自：

```
#views/posts/_like.html.erb
  <%= form_for Like.new, :remote => true do |f| %>
    <%= f.hidden_field :liked_post_id, :value => @post.id %>
    <%= f.submit "Like" %>
  <% end %> 
```

从个人资料（帖子的提要）：

```
#views/users/show.html.erb
...
  <%= render @posts %>
... 
```

喜欢控制器：

```
#controllers/likes_controller.rb    
  class LikesController < ApplicationController
  before_filter :signed_in_user

  def create
    @post = Post.find(params[:like][:liked_post_id])
    current_user.like!(@post)
    respond_to do |format|
      format.html { redirect_to root_url }
      format.js
    end
  end
... 
```

用户型号：

```
#models/user.rb
...
  def like!(post)
    likes.create!(liked_post_id: post.id)
  end
... 
```

@frank-blizzard 指出我的表单标记是一个问题。在帖子页面上，生成的标记是：

```
<input id="like_liked_post_id" name="like[liked_post_id]" type="hidden" value="73" /> 
```

在提要页面上：

```
<input id="like_liked_post_id" name="like[liked_post_id]" type="hidden" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T13:47:27.147

你可以这样做：

```
<% form_for Like.new, :remote => true do |f| %>
<%= f.hidden_field :post_id, :value => @post.id %>
<%= f.submit %>
<% end %> 
```

该`current_user.likes.build(...)`部分应该离开您的视图并进入您的控制器。您正在使用一种`current_user.like!`方法，所以我猜您已经在用户模型中实现了一些方法来完成此操作。如果没有`create`在您可以访问的 LikesController 的操作中建立您的喜欢`params[:like]`。

```
 def create
    @post = Post.find(params[:like][:post_id])
    current_user.likes.build(@post)
    # ...
  end 
```

**编辑**

您可能需要将您的 @post 变量正确传递到您的 _like_form 部分，如下所示：

```
#views/posts/_post.html.erb:
...
<% if signed_in? %>
  <%= render 'posts/like_form', :post => @post %>
<% end %>
... 
```

这将使您可以访问`post`部分内部的变量，以便您可以使用其 id 预填充表单值。也看到这个问题[将变量传递到部分，rails 3？](https://stackoverflow.com/questions/4700617/pass-a-variable-into-a-partial-rails-3)并确保阅读如何正确地将变量传递给部分。您可以使用调试视图`<%= debug <variablename> %>`

# android - 如何从适配器android更改imageview中的图像

> ID：14802296
> 
> 赞同：1
> 
> 时间：2013-02-10T20:32:34.580
> 
> 标签：android, android-layout

如何从适配器更改图像。我创建了一个 ListView 并在这个 listview 中添加了具有名称和图片的动态项目。我想根据某些逻辑更改该项目的图片。

适配器由以下代码创建

```
SimpleAdapter adapter = new SimpleAdapter(this, menuItems , R.layout.list_item, new String[] { NAME, EMPID  }, new int[] { R.id.name, R.id.empid });
    setListAdapter(adapter);
    ListView lv = getListView(); 
```

如果在 OnItemClickListener 下，下面的代码可以正常工作。但我想在渲染第一个视图时输入图像。

```
lv.setOnItemClickListener( new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
if(XMLUtil.getNodeValue(group, "Gender").equalsIgnoreCase("male")){
                    view.findViewById(R.id.imageView).setBackgroundResource(R.drawable.male);
                }else{
                    view.findViewById(R.id.imageView).setBackgroundResource(R.drawable.female);
                }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:32:25.133

设置新图像`menuItems`并要求`adapter.notifyDataSetChanged()`更新您的`ListView`

# rhomobile - 在 Rhomobile 中执行左连接

> ID：14802297
> 
> 赞同：1
> 
> 时间：2013-02-10T20:32:59.320
> 
> 标签：rhomobile, rhodes

不能在 Rhomobile 中执行左连接吗？

我有模型 PriceGroups，PriceLookup，它们有一对多的关系（即每个 PriceGroup 并且有许多 PriceLookup 记录）。

我需要做一个简单的 SQL 左连接，所以我从 PriceGroups 表中获得了所需的信息

```
SELECT * FROM PriceLookup 
LEFT JOIN PriceGroups ON PriceLookup.price_group_code=PriceGroups.code 
```

我已将此添加到 price_lookup 模型中：

```
 belongs_to :price_group_code, 'PriceGroups' 
```

以下是我在 Rhomobile 中尝试过的

```
PriceLookup.find_by_sql("SELECT *
FROM PriceLookup
LEFT JOIN PriceGroups on PriceLookup.price_group_code=PriceGroups.code") 
```

但我得到错误：

```
Error: could not prepare statement: 1; Message: no such table: PriceGroups 
```

我知道我可以做两个选择并自己加入它们，但这是一种非常糟糕的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T14:11:44.463

您需要将 RhoMobile 模型创建为 FixedSchema，而不是使用默认的 PropertyBags。

否则，您在 SQLite 中没有真正的表，但您使用的是实现键值存储的特殊 objectValues 表：http: [//docs.rhomobile.com/rhodes/rhom#fixed-schema](http://docs.rhomobile.com/rhodes/rhom#fixed-schema)

例子：

```
dbPT = ::Rho::RHO.get_src_db('PriceLookup')
sql = "SELECT * FROM PriceLookup LEFT JOIN PriceGroups ON PriceLookup.price_group_code=PriceGroups.code"
lines = dbPT.execute_sql(sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:29:57.737

如果表 PriceGroups 尚未初始化（创建），则可能会发生这种情况。加载模型类时创建表（如果它们不存在）。对于您的情况，只需调用模型类，这将加载它并在必要时创建表。

```
PriceGroups; #Only for create the table

PriceLookup.find_by_sql("SELECT * FROM PriceLookup LEFT JOIN PriceGroups on PriceLookup.price_group_code=PriceGroups.code") 
```

# sqlite - 使用内连接 SQLITE 从两个表中删除行

> ID：14802301
> 
> 赞同：4
> 
> 时间：2013-02-10T20:33:27.120
> 
> 标签：sqlite, inner-join, delete-row

如何从两个单独的表中删除一行？我认为可以使用内部连接来做到这一点

`DELETE a.*, b.* FROM Holiday INNER JOIN Accommodation b on a.LocationID = b.LocationID`

在这里，我尝试通过将第一个表中的主键位置与第二个表中的位置 id 匹配来删除。我得到一个 SQL 异常“sqlException near a”

我在 SQLITE，java 中这样做

![在此处输入图像描述](../Images/d4162d2e1964d51c6446a7d6549eea5a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T22:04:12.687

在 SQLite 中，一个`DELETE`命令只从一张表中删除。

您的查询，如所写，实际上并没有限制要删除的记录，所以如果你真的想删除所有记录，你会使用这个：

```
DELETE FROM Holiday;
DELETE FROM Accommodation; 
```

如果要删除主表中的一条记录和子表中的所有对应记录，只需按该键值过滤：

```
DELETE FROM Holiday       WHERE LocationID = 1;
DELETE FROM Accommodation WHERE LocationID = 1; 
```

# c# - 设计对象之间的耦合

> ID：14802306
> 
> 赞同：2
> 
> 时间：2013-02-10T20:34:29.693
> 
> 标签：c#, design-patterns

我需要一些关于如何设计我的代码的建议。

![在此处输入图像描述](../Images/81679dda85cec6df479acd0880233b83.png)

我的系统有几个`HW`（硬件）包含大量数据供进程使用。`HW`反过来有几个`Channel`也有很多数据。

此外，每个`Plant`(`PlantHW`和`PlantChannel`) 都有一些独特的数据。这些在其中并没有太多的数据，而且它们的使用频率不如`HW`和`Channel`。流程中`Plant`使用的内容由用户在流程启动之前选择，在运行期间不会更改。但用户可以取消该过程，并选择另一个`Plant`.

我的问题是如何以一种好的方式绑定和`HW`绑定（`PlantHW`方向无关紧要）？我希望它是松耦合的，具有良好的性能，并且易于理解。`Channel``PlantChannel`

我也不确定是否最好迭代所有`HW`or `PlantHW`。两种方案的优缺点：

**迭代`PlantHW`**

*   优点：最合乎逻辑的过程是针对特定的`Plant`
*   缺点：它`HW`包含了所有有趣的数据，感觉像是在绕道而行`PlantHW`。

**迭代`HW`**

*   优点：`HW`包含所有有趣的数据
*   缺点：不合逻辑
*   缺点：进程必须知道选中`Plant`的才能获得相应的`PlantHW`/ `PlantChannel`。

我想要关于如何设计这个的建议。

**编辑**

这 6 个类包含过程使用的设置和过程数据。它们从文件中读取（通过二进制序列化），然后启动程序。

*   `System`- 常用系统设置
*   `Plant` - 该过程可以针对多个工厂运行。此类包含每个工厂唯一的数据。
*   `HW` - 包含硬件设备的设置和过程数据。
*   `PlantHW` - 包含特定工厂硬件设备的设置和过程数据。
*   `Channel` - 包含硬件设备中通道的设置和过程数据。
*   `PlantChannel` - 包含特定工厂硬件设备中通道的设置和过程数据。

例如，我希望能够做到这一点（如果我选择 iterate 的替代方案`HW`）：

```
void DoOperationsOnAChannel(HW hw, Plant selectedPlant)
{
   // plantHw data is not often used
   // var plantHw = GetPlantHW(hw, selectedPlant); 

   foreach(var channel in hw.Channels)
     //Do operations based on hw, plantHw and channel
} 
```

或者（如果选择迭代的替代方案`PlantHW`）

```
void DoOperationsOnAChannel(PlantHW plantHw)
{
   var hw = GetHW(plantHw);
   foreach(var channel in plantHw.Channels)
     //Do operations based on hw, plantHw and channel
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T17:22:29.987

嗯，对你的问题不太清楚，但根据我的理解，你需要有一个工厂和工厂通道，分别与硬件和通道相关联。在我看来，您应该有一个植物接口，并且您的硬件类应该通过接口将植物实例注入它。这使您即使在运行时也可以灵活地更改任何实现。同样适用于偶数通道类。

# python - OpenERP 6.1 日期时间格式

> ID：14802307
> 
> 赞同：1
> 
> 时间：2013-02-10T20:34:30.763
> 
> 标签：python, odoo, openerp-6

为什么

```
o.create_order.strftime("%d %B %Y") 
```

什么时候不返回

```
time.strftime("%d %B %Y") 
```

返回日期“2013 年 2 月 10 日”？？？

o.create_order 是根据 postgresql 的时间戳。它包含“30/11/2012 09:38:34”，如 openErp 销售订单 - 其他信息选项卡上所示。查询数据库时存储为“2012-11-30 08:38:34.272”。所以我希望看到“2012 年 11 月 30 日”，但什么也得不到。我误解了语法吗？

我从 python 3.3 测试了这个：

```
>>> d1=datetime.datetime.today()
>>> print(d1.strftime("%d %B %Y"))
10 february 2013 
```

如何让它在 OpenOffice Writer 中工作？

顺便说一句，我如何得到“二月”而不是“二月”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:56:22.540

因为`o.create_order`返回一个字符串而不是一个日期时间对象，即使在内部，数据库列是一个时间戳。OpenERP ORM 返回一个 ISO 8601 格式的字符串。

您需要使用 RML 报告中可用的方法或使用python 模块`formatLang`创建`datetime`对象。`datetime`

尝试这个：

```
datetime.strftime('%d %B %Y', o.create_order') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:31:41.277

这是因为`o.create_order`返回一个字符串。因此，首先您必须将字符串日期转换为**日期**时间格式，然后再将其转换为您想要的任何字符串格式。

尝试这个：

#将字符串转换为日期时间格式。 `dt1 = datetime.strptime(o.create_order,"%Y-%m-%d %H:%M:%S")`

#将日期时间转换为给定的格式并返回字符串。 `dt2 = datetime.strftime(dt,"%d %B %Y")`

希望这能解决您的问题。

# ruby-on-rails - 使用自定义/私有 gem 的 Heroku 推送超时

> ID：14802314
> 
> 赞同：2
> 
> 时间：2013-02-10T20:35:37.463
> 
> 标签：ruby-on-rails, heroku, timeout, bundler

我目前正在尝试在我的 Heroku 应用程序中使用托管在 GitHub 上的自定义/私有 gem，但是每当我尝试推送到 Heroku 时，它在捆绑 gem 时会挂起。

为了让私有 gem 工作，我一直在使用[这种方法](https://stackoverflow.com/a/13261333/1031875)并创建了一个用于访问存储库的令牌。

一切都在本地运行得非常好，我的`bundle`命令很有效，但是当我推送到 Heroku 时，它会在获取自定义 gem 时挂起。这是输出（针对敏感信息进行了审查）：

```
Counting objects: 26, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (19/19), done.
Writing objects: 100% (19/19), 2.49 KiB, done.
Total 19 (delta 13), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs     vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Fetching gem metadata from https://rubygems.org/..
       Updating git://github.com/rails/rails.git
       Fetching https://<token>@github.com/<username>/<repo>.git

       <hangs here with Heroku timeout error> 
```

似乎我对[这个问题](https://stackoverflow.com/questions/11560481/timeout-when-pushing-to-heroku)和[这个问题](https://stackoverflow.com/questions/8623042/heroku-push-failing-perhaps-timeout-from-rubygems)有类似的问题，但是我已经尝试了针对这些问题提出的两种解决方案，但均无济于事。

我正在使用`edge-rails`，所以我认为使用`bundler 1.3.0.pre.5`可能是我在本地使用的问题`1.2.3`。`bundler`在 Heroku 上强制一个版本可能有效吗？我也不确定为什么有两条`Fetching gem metadata from https://rubygems.org/..`线......

感谢一百万的帮助，一直在拉我的头发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:59:43.427

所以问题最终是`git`Heroku 使用的版本还不支持使用令牌！一旦我在我的 Gemfile 中包含了用户名/密码（对此我不满意，但我已经设置了一个特殊的合作者帐户，因此安全风险有所缩小......）它运行良好！

特别感谢[这个问题](https://stackoverflow.com/questions/12964196/pulling-in-authenticated-git-repos-on-heroku/13173442#13173442)，我发现它帮助了我:)

# opengl - 如何切片几何？

> ID：14802318
> 
> 赞同：0
> 
> 时间：2013-02-10T20:35:57.097
> 
> 标签：opengl

假设我有这个几何： `glutSolidTeapot(1);`

我想将它切成 8 个立方体，例如跨越 3 个平面 (xy)、(yz)、(xz)，以制作 3D 拼图。

如何剪裁几何图形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:00:00.733

有两种方法可以做到这一点。我将假设您想将几何体切成立方体，但其他形状也可以类似地完成。

### 1\. 切片你的三角形网格

在这里，您只需遍历所有三角形并检查三角形属于哪个立方体。如果三角形与多个立方体相交，则需要将其拆分为多个三角形。您需要对线平面相交进行一些数学运算才能正确分割，但这并不难。

### 2.使用opengl裁剪平面

您也可以多次渲染几何图形，但只剪裁要在屏幕上显示的部分。这可以使用 glClipPlane 来完成（参见[http://www.opengl.org/sdk/docs/man2/xhtml/glClipPlane.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glClipPlane.xml)）。对于每个立方体，您需要 6 个剪切平面。此方法将比第一种方法慢，因为 gpu 需要考虑每个立方体的每个三角形。

# alfresco - CMIS 与 BPM 的集成

> ID：14802320
> 
> 赞同：1
> 
> 时间：2013-02-10T20:36:09.897
> 
> 标签：alfresco, business-process-management, documentum, cmis, opencmis

能否请您告诉我，是否可以将 CMIS 与 BPM 系统集成？我知道 Pega BPM 系统可以与 CMIS 集成。但我想将 CMIS 与 Documentum 中的工作流或与 Alfresco 存储库集成。我没有找到任何与 CMIS 提供的 BMP 相关的对象类型。

友善的建议。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:14:06.710

CMIS 没有提供直接映射到工作流领域的 API：所有领域模型和 API 都用于文档管理。

也就是说，在 BPM 引擎和您的客户端应用程序之间建立一些契约并非不可能，以便将工作流相关信息（状态、属性、工作流定义等）映射到 CMIS 域级实体，即文档、属性、关系和政策。

这绝对不是理想的，但由于 CMIS 中没有直接的工作流 API，这是您获得的唯一选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T18:24:07.107

我看到这个问题相当古老，但实际答案可能仍然很有趣。我已经成功测试了为支持 CMIS的 K2 ( [http://www.k2.com/](http://www.k2.com/) )制作服务代理的概念。

K2 允许您在 .Net 中构建服务代理，所以这相当简单。您可以稍后生成连接到您的代理的 K2 SmartObjects，并在您的流程和 Web 表单中使用它们。

我实际上用 Alfresco 测试了这个来测试 CMIS。Alfresco 的支持很棒。

因此，要回答您的问题，是的，这绝对可以使用 K2 Blackpearl 和 K2 SmartForms。

# php - 用变音符号解析 Twitter Hashtags 并在点之前停止？

> ID：14802322
> 
> 赞同：0
> 
> 时间：2013-02-10T20:36:28.433
> 
> 标签：php, regex

我想对 Twitter Hashtags 进行正则表达式。使用此代码：

```
 $html = preg_replace("#(^|[\n ])\#([^ \"\t\n\r<]*)#ise", "'\\1<a    href=\"".$website_content_url."/search=%23\\2\" target=\"_self\">#\\2</a>'", $html); 
```

一切正常！但是当我使用这个词时：#Männer！该链接将包括！。但我希望链接在 ! 以及我可以输入的其他标志，例如？或点。但是！应该仍然显示;)

那可能吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:13:00.850

让我们关注有趣的部分：

```
\#([^ \"\t\n\r<]*) 
```

此模式的工作原理如下：

```
\#          // match #
(           // open a capture group
  [^...]    // a negated character class which matches any character 
            // that is **not** inside this class
  *         // match the previous group / class zero or more times
)           // close capture group 
```

在字符类中，您有`\"\t\n\r<`which 表示`[^ \"\t\n\r<]`匹配任何**不是**空格、引号、制表符、换行符、回车符或`<`. 您所要做的就是将标点符号添加到类中，例如：`[^ \"\t\n\r<!]`.

您不必为变音符号 afaik 做任何特别的事情。

* * *

学习正则表达式的良好起点：[http](http://regular-expression.info/) ://regular-expression.info/ 。

# ios - 链接 OpenCV 和 Tesseract 时出错

> ID：14802323
> 
> 赞同：2
> 
> 时间：2013-02-10T20:36:30.430
> 
> 标签：ios, objective-c, opencv, tesseract

我正在尝试在我的 iPhone 应用程序中同时使用 OpenCV 和 Tesseract。

我与其中任何一个一起工作都没有问题——所有这些都被完美地编译和链接。

但是当我尝试与他们一起工作时，它给了我链接错误：

```
Undefined symbols for architecture i386:
"cv::_OutputArray::_OutputArray(cv::Mat&)", referenced from:
  -[BTLOpenCVCameraViewController processImage:] in BTLOpenCVCameraViewController.o
"cv::_OutputArray::~_OutputArray()", referenced from:
  -[BTLOpenCVCameraViewController processImage:] in BTLOpenCVCameraViewController.o
"cv::Mat::deallocate()", referenced from:
  cv::Mat::release() in BTLOpenCVCameraViewController.o
"cv::Mat::Mat(cv::Mat const&, cv::Rect_<int> const&)", referenced from:
  -[BTLOpenCVCameraViewController processImage:] in BTLOpenCVCameraViewController.o
"cv::fastFree(void*)", referenced from:
  cv::Mat::~Mat() in BTLOpenCVCameraViewController.o
"cv::Mat::copyTo(cv::_OutputArray const&) const", referenced from:
  -[BTLOpenCVCameraViewController processImage:] in BTLOpenCVCameraViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在运行 iOS6.1，C++ 标准库设置为：“编译器默认”架构设置为：armv7。

有任何想法吗？？

# android - 如何取消 AsyncTask 或所有 AsyncTask，包括来自同一 Activity 的嵌套 AsyncTasks？

> ID：14802328
> 
> 赞同：0
> 
> 时间：2013-02-10T20:37:11.353
> 
> 标签：android, android-asynctask

我有**活动**使用**AsyncTask 打开光标**，而不是生成**子 AsyncTask 以呈现**使用光标读取的项目。

活动在**光标 AsyncTask**上执行，但看不到项目的**子 AsyncTask**。

如何取消指定 Activity 的所有正在运行的 AsyncTask 任务（包括嵌套）？

如何取消指定 AsyncTask 的所有正在运行的子 AsyncTask 任务（如果可能的话）？

我想停止从界面到不损坏视图的新命令上的所有任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:41:16.290

您执行的 AsyncTask 没有管理器。

您必须跟踪您创建的 AsyncTasks 的所有新实例，并使用`cancel(boolean mayInterruptIfRunning)`方法关闭它们。请注意，取消任务不会在中间停止它。你必须检查你的`doInBackground`-`isCanceled()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:41:23.880

如果您的 AsyncTask 正在运行循环，那么您可以检查一个公共标志（可能是某个单例的属性，例如 Application 类本身或您的活动）。一旦这个标志变为真，那么你的任务将退出循环

# scala - 如何在继承树中模式匹配抽象父类

> ID：14802330
> 
> 赞同：4
> 
> 时间：2013-02-10T20:37:35.650
> 
> 标签：scala, pattern-matching, case-class

我是具有java背景的scala新手。

有没有办法在类继承树中模式匹配超类（或特征），叶子作为案例类和节点抽象类或特征？据我所知，案例类继承是不允许的。

我认为大型继承树中的模式匹配抽象类会非常有帮助

在以下代码中，匹配语句中的最后一种情况在编译期间出错

```
sealed trait Person {
   def name: String
}

case class Customer(name: String, email: String) extends Person

sealed trait Employee extends Person {
   def id: Int
}

case class Worker(name: String, id: Int, skills: Array[String]) extends Employee

case class Manager(name: String, id: Int, title: String) extends Employee

def process(p: Person) = p match {
   case Customer(_, email) => email
   case Employee(name, _) => name + "@acme.com"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T10:46:07.980

您缺少以下伴随对象中的`name`字段`Employee`和方法：`unapply``Employee`

```
sealed trait Employee extends Person {
  def id: Int
  def name: String
}

object Employee {
  def unapply(e: Employee): Option[(String, Int)] =
    Option(e) map { e =>
      (e.name, e.id)
    }
} 
```

通过上述更改，处理方法没有问题：

```
def process(p: Person) = p match {
  case Customer(_, email) => email
  case Employee(name, _) => name + "@acme.com"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T20:42:16.720

它不是那么花哨（正如其他人可能对结构类型提出的建议），但它非常实用，我认为：

```
def process(p: Person) = p match {
   case Customer(_, email) => email
   case e: Employee => e.name + "@acme.com"
} 
```

如果你需要匹配一些特定的已知值，你可以使用警卫：

```
def process(p: Person) = p match {
   case Customer(_, email) => email
   case e: Employee if e.name == "Joe" => e.name + "@acme.com"
} 
```

# php - 这段代码是否仍然容易受到（无效文件上传攻击）的攻击，例如包含 PHP 代码的图像？

> ID：14802331
> 
> 赞同：0
> 
> 时间：2013-02-10T20:37:38.350
> 
> 标签：php, image-processing, imagemagick, code-injection

提供用户上传图片有广泛的用途，但是检查文件扩展名和 MIME 类型并不能保证正确的文件类型。

替代方案：我使用`imagejpeg()`和`imagecreatefromjpeg()`函数来创建图像`$_FILE['userfile']['tmp_name']`，然后将其保存在`images/`目录中。在这种情况下，我忽略了`move_uploaded_file()`函数。

## 这段代码仍然容易受到假图片上传攻击吗？

```
$filename = $_FILE['inputfile']['name'];
$upload_path = 'images/';
//extract extension
$ext = strtolower(substr($filename, strrpos($filename, '.') + 1));

// return mime type ala mimetype extension
$finfo = finfo_open(FILEINFO_MIME_TYPE);
//get MIME type of the given file
$mime = finfo_file($finfo, $filename);
//close finfo
finfo_close($finfo);

if (is_uploaded_file($_FILES['inputfile']['tmp_name'])) {
    //first check: file extension and mime type
    if(!in_array($ext, array('jpeg', 'jpg', 'gif', 'png')) && !in_array($mime, array('image/jpeg', 'image/gif', 'image/png')) ){
     die("Error1: Invalid Image type");
    }
    if($ext == 'jpeg' || $ext == 'jpg'){
       $im = @imagecreatefromjpeg($_FILE['inputfile']['tmp_name']);
       if($im){

        $createimage = imagejpeg($im, $upload_path.$_FILE['inputfile']['name']);
        if(!$createimage){
          die("Error3: Can't create image!");
        }
        //last check
        $filecontent = file_get_contents($upload_path.$_FILE['inputfile']['name']);

        //clean the file from any php code
        $filecontent = str_replace(array("<?php", "<?", "?>"), "", $filecontent);

        $handle = fopen($upload_path.$_FILE['inputfile']['name'], "wb");
        fwrite($handle, $filecontent);
        fclose($handle);
       }
       else{

        die("Error2: Invalid Image Detected");

       }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T20:55:47.857

始终可以将 PHP 代码安全地嵌入到完全有效的图像文件中。有太多方法可以做到这一点，甚至值得考虑避免它们。许多有效的图像格式，许多数据容器，例如 jpg 中的 EXIF，像素级和压缩操作等。

为了安全起见，应该保护服务器免受任意文件包含攻击并清理文件扩展名以逃避 apache 配置错误。

更疯狂的方法是创建一个稍微修改过的图像副本，更准确地说，从修改过的原始图像创建一个新图像，轻微调整大小或颜色操作将删除位图级别的 PHP 注入，而复制将使您免于大部分 PHP注入到图像内的其他数据容器中。

# apache - 如何否定 Apache RewriteCond 中的条件

> ID：14802334
> 
> 赞同：0
> 
> 时间：2013-02-10T20:38:07.563
> 
> 标签：apache, mod-rewrite

我想将 .xhtml 文件作为

*   `application/xhtml+xml`如果浏览器说它接受它。
*   `text/html`除此以外

然后，我有这个代码：

```
AddType text/html .xhtml
<Files "*.xhtml">
    RewriteEngine on
    RewriteCond "%{HTTP:Accept}" "application/xhtml\+xml\s*(?:,|$)"
    RewriteRule .* - [T=application/xhtml\+xml]
</Files> 
```

它有效。但我认为可以简化否定条件。就像是

```
<Files "*.xhtml">
    RewriteEngine on
    RewriteCond "%{HTTP:Accept}" !"application/xhtml\+xml\s*(?:,|$)"
    RewriteRule .* - [T=text/html]
</Files> 
```

但它不起作用：我总是得到一个`text/html`页面，即使支持 XHTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:16:02.463

我想第二个选项应该是这样的：

```
<Files "*.xhtml">
    RewriteEngine on
    RewriteCond %{HTTP:Accept} !application/xhtml\+xml 
    RewriteRule .* - [T=text/html]
</Files> 
```

这样，如果`HTTP:Accept`变量不包含 `application/xhtml+xml`MIME 类型设置为的字符串`text/html`。

## 回复 OP 评论：

**问题中的正则表达式：** `application/xhtml\+xml\s*(?:,|$)`

*   `application/xhtml`=从字面上匹配字符**application/xhtml 。**

*   `\+` = 匹配字符**+**字面意思。

*   `xml`=从字面上匹配字符**xml 。**

*   `\s*`= 匹配 之后的*空白字符*（空格、制表符、换行符等）`application/xhtml+xml`，介于零次和无限次之间，尽可能多次，根据需要返回（贪婪）。

*   `?:` = 问号 ( **?** ) 和冒号 ( **:)**表示该组（在圆括号内）不是反向引用。

*   `,|$``,`=从字面上匹配字符**或**断言字符串末尾的位置。

**此答案中的正则表达式：**

仅包括相关的字符串段：**application/xhtml+xml**以确保存在匹配，因此当此字符串存在时不应用规则。

# c++ - push_back 不向向量 c++ 添加数字

> ID：14802339
> 
> 赞同：0
> 
> 时间：2013-02-10T20:38:46.540
> 
> 标签：c++, vector, mergesort, push-back

我正在尝试调试我的mergesort程序，当我尝试使用“push_back”将向量“left”或“right”中的值添加到“mergedList”时，这似乎在“merge”函数内部的某个地方存在问题。以下是gdb调试会话的摘录（下面是我的完整程序代码）

这发生在第一次调用合并时；我能够使用“print left[0]”访问“vector left”的值，我得到了一个我期望的值（向量“left”中的所有数字都在 1-50000 之间），但是在执行行之后i = 0 时的代码：

“mergedList.push_back(left[i]);” 然后使用调试器打印mergedList[0]，似乎添加left[0]不成功。

我误解了 push_back 吗？还是向量？抱歉，如果我的问题不清楚 - 请让我知道如何改进它！

* * *

GDB 调试会话：

* * *

```
(gdb) print left[0]
$1 = (int &) @0x100104760: 14108
(gdb) print mergedList[0]
$2 = (int &) @0x7fff5fbfdbf0: 1066800
(gdb) 
(gdb) info locals
t = 0
i = 0
mergedList = {
  <std::_Vector_base<int,std::allocator<int> >> = {
    _M_impl = {
      <std::allocator<int>> = {
        <__gnu_cxx::new_allocator<int>> = {<No data fields>}, <No data fields>},
       members of std::_Vector_base<int,std::allocator<int> >::_Vector_impl:
      _M_start = 0x7fff5fbfdbf0,
      _M_finish = 0x7fff5fbfdc68,
      _M_end_of_storage = 0x7fff5fbfdb90
    }
  }, <No data fields>}
j = 0
sizeOfLeft = 1
sizeOfRight = 1
next = 1
(gdb) 
-uuu:**-F1  *gud-p1*       Bot L28    (Debugger:run)-------------------------------------- 

    ------------------------------------------------------------------------------------------------------------------
    while (iss >> n)
    {
            v.push_back(n);
    }

    }

    return v;
}

vector<int> merge(vector<int> left, vector<int> right){

    int i = 0;
    int j = 0;
    int sizeOfLeft = left.size();
    int sizeOfRight = right.size();
    vector<int> mergedList;

    while (i < sizeOfLeft || j < sizeOfRight){
    if (i < sizeOfLeft && j < sizeOfRight){
            if (left[i] < right[j]) {
        mergedList.push_back(left[i]);
=>          i++;
            }else{
                mergedList.push_back(right[j]);
        j++;
-uu-:---F1  main.cpp       21% L47    (C++/l Abbrev)--------------------------------------------------------------------------------------------------------------------------------------------------------

    #COMPLETE MERGESORT PROGRAM

    #include <iostream>
    #include <fstream>
    #include <sstream>
    #include <string>
    #include <vector>

    using namespace std;

vector<int> getNums(){

    ifstream infile("/Users/christinedeist/Documents/Algorithms/Practice/TestProject/IntegerArray.txt");
    string line;
    vector<int> v;

    while (getline(infile, line))
    {
        istringstream iss(line);
        int n;

        while (iss >> n)
        {
            v.push_back(n);
        }

    }

    return v;
}

vector<int> merge(vector<int> left, vector<int> right){

    int i = 0;
    int j = 0;
    int sizeOfLeft = left.size();
    int sizeOfRight = right.size();
    vector<int> mergedList;

    while (i < sizeOfLeft || j < sizeOfRight){
        if (i < sizeOfLeft && j < sizeOfRight){
            if (left[i] < right[j]) {
                mergedList.push_back(left[i]);
                i++;
            }else{
                mergedList.push_back(right[j]);
                j++;
            }

        }else if (i < sizeOfLeft){
            mergedList.push_back(left[i]);
            i++;
        }else if (j < sizeOfRight){
            mergedList.push_back(right[j]);
            j++;
        }
    }

    return mergedList;

}

vector<int> sortVector(vector<int> nums){

  int sizeOfNums = nums.size();

    if (sizeOfNums == 1){
        return nums;
    }
    vector<int> left;
    vector<int> right;
    int midpoint = sizeOfNums/2;
    for (int i = 0; i < midpoint; i++){
        left.push_back(nums[i]);

    }
    for (int j = midpoint; j < sizeOfNums; j++){
        right.push_back(nums[j]);
    }
    left = sortVector(left);
    right = sortVector(right);
    return merge(left, right);

}

int main (int argc, char *argv[]) {

    vector<int> nums = getNums();
    vector<int> sorted = sortVector(nums);

    for(int i = 0; i < nums.size(); i++){
      cout << nums[i] <<endl;

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:28:12.313

此代码缺少错误检查，但仍应有效。我认为这个逻辑应该可以正常工作。您是否尝试调试此代码，因为它没有产生排序输出。最后，当您对元素进行排序时，您不会打印已排序的元素，而是打印您阅读的元素。

因为您的 gdb 会话在向量中的指针具有非空值，即`_M_start = 0x7fff5fbfdbf0, _M_finish = 0x7fff5fbfdc68, _M_end_of_storage = 0x7fff5fbfdb90`有元素被推入向量中。因此，文件必须打开并成功读取。

# jquery - 如何使用 jquery 克隆 html 内容？

> ID：14802340
> 
> 赞同：0
> 
> 时间：2013-02-10T20:38:50.370
> 
> 标签：jquery

我有以下html内容：

```
<div data-test='sectionA'>
    <input type="text" />
    <strong>sfdsfds</strong>
    <p>dffdfdsf</p>
</div> 
```

我只需要从上面的 html 内容中克隆`strong`和元素。`p`这是我的尝试：

首先，我需要确定该部分：

```
if($("div").data("test") == "sectionA")
{
     $(this).children().not("input").each(function()
     {
           alert($(this).html().clone());
           /* firefox says clone is not a function 
              and I'm not getting <strong>dfadfa</strong>
              or the <p>sfdasdfsd</p> clone copy */

      });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:45:26.413

```
var $div =  $("div[data-test=sectionA]");
var $strong = $('strong', $div).clone();
var $p = $('p', $div).clone(); 
```

# wcf - 注册的基地址方案是 [https] 错误

> ID：14802341
> 
> 赞同：1
> 
> 时间：2013-02-10T20:39:00.890
> 
> 标签：wcf, web-services, iis-7.5

我正在尝试在 iis 服务器上发布 wcf Web 服务并让它使用 Windows 身份验证。当我什至尝试发布它时，我收到了一个错误，所以我还没有得到足够的提示输入用户名。我确实有 SSL 证书并想使用 ssl。

这是我的错误：

```
[InvalidOperationException: Could not find a base address that matches scheme http for the endpoint with binding BasicHttpBinding. Registered base address schemes are [https].]
   System.ServiceModel.ServiceHostBase.MakeAbsoluteUri(Uri relativeOrAbsoluteUri, Binding binding, UriSchemeKeyedCollection baseAddresses) +16604769
   System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress) +1082
   System.ServiceModel.ServiceHostBase.ApplyConfiguration() +156
   System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) +215
   System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses) +475
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) +43
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +530
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1413
   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +50
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +1172

[ServiceActivationException: The service '/subservice/ISubService.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not find a base address that matches scheme http for the endpoint with binding BasicHttpBinding. Registered base address schemes are [https]..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +901424
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178638
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +136 
```

我已经对此进行了一百次研究，但我对发布服务的经验很少。一旦它们建成，我就与他们合作过，只是从未发布过。

这是我从另一个发布良好的 web.config 修改的 web.config：

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpEndpointBinding">
          <security mode="Transport">
            <!-- Basic <security mode="Transport"> -->
            <!-- To use Basic auth, just comment Windows and use this, but you need to configure basic in IIS as well -->
            <!-- <transport clientCredentialType="Basic" /> -->
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>

      <webHttpBinding>
        <binding name="default">
          <security mode="Transport">
            <!-- Basic <security mode="Transport"> -->
            <!-- To use Basic auth, just comment Windows and use this -->
            <!-- <transport clientCredentialType="Basic" /> -->
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="restBehavior">          
          <webHttp />
        </behavior>
      </endpointBehaviors>      
    </behaviors>

    <services>
      <service name="subservice.ISubService">
        <endpoint binding="basicHttpBinding"  bindingConfiguration="BasicHttpEndpointBinding" contract="subservice.ISubService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint address="rest" binding="webHttpsBinding" bindingConfiguration="default" behaviorConfiguration="restBehavior" contract="subservice.ISubService">
          <identity>
            <dns value="localhost" />                       
          </identity>
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress = "https://[site]/subservice/" />
          </baseAddresses>
        </host>

      </service>

    </services>
  </system.serviceModel>
</configuration> 
```

有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:48:56.620

不使用 basicHttpBinding，而是使用 basicHttpsBinding

[http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpsbinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpsbinding.aspx)

# mysql - 如何创建一个新表，该表根据名称取其他表中列的平均值

> ID：14802343
> 
> 赞同：1
> 
> 时间：2013-02-10T20:39:17.130
> 
> 标签：mysql

```
CREATE TABLE Average_Professor

SELECT ie.Instructor
      ,SUM(ie.instreffective_avg + h.howmuchlearned_avg + ir.instrrespect_avg +
 iv.instroverall_avg + av.availability_avg)/5
FROM   instreffective_average ie
JOIN   howmuchlearned_average h  USING (Instructor)
JOIN   instrrespect_average   ir USING (Instructor)
JOIN   instructoroverall_average   iv USING (Instructor)
JOIN   availability_average   av USING (Instructor)
GROUP  BY Instructor 
```

它给了我错误代码 1166。如果我省略“CREATE TABLE Professor_average”然后脚本运行，但我没有创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:51:24.943

Try naming the calculation column:

```
CREATE TABLE Average_Professor
SELECT ie.Instructor
      ,SUM(ie.instreffective_avg + h.howmuchlearned_avg + ir.instrrespect_avg +
 iv.instroverall_avg + av.availability_avg)/5 as calculation_value
FROM   instreffective_average ie
JOIN   howmuchlearned_average h  USING (Instructor)
JOIN   instrrespect_average   ir USING (Instructor)
JOIN   instructoroverall_average   iv USING (Instructor)
JOIN   availability_average   av USING (Instructor)
GROUP  BY Instructor 
```

# ruby-on-rails - 在“显示”视图中使用 Rails 表单元素？

> ID：14802345
> 
> 赞同：0
> 
> 时间：2013-02-10T20:39:53.347
> 
> 标签：ruby-on-rails, ruby, forms, user-interface, state

我想在我的显示视图中有一个拆分下拉按钮（[twitter bootstrap 样式](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)），以便用户可以使用集合（出价、in_progress、完成、取消）更改他们的“工作”的当前“状态”。

这是我当前如何更改 _form 中的状态（工作正常）：

```
<%= f.input :state, :collection => %w(bids in_progress complete canceled), :checked => 'bids', :as => :radio_buttons %> 
```

但我宁愿用户不必通过整个表单来改变状态。如果您愿意，他们可以“即时”更改状态。

我应该如何将其转换为下拉列表并在我的表单之外使用它？注意 - 我仍然想在我的表单中保留比率集合。

我应该只用按钮创建一个部分并在“显示”视图中呈现它吗？我需要向我的控制器添加一些东西吗？也许使用javascript会更容易/更好？很多问题，不知道从哪里开始。谢谢。

**更新**

我用这个创建了一个部分：

```
<%= simple_form_for(@job, :remote => true) do |f| %>
    <%= f.input :state, collection: [ ['bids', 'Bid'], ['in_progress', 'In Progress'], ['complete', 'Complete'] ], label_method: :last, value_method: :first, :onchange => 'this.form.submit()' %>
<% end %> 
```

并添加了这段 javascript：

```
$(this.form).submit(); 
```

这不起作用 - 我在正确的轨道上吗？看来这应该提交表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:31:12.113

您可以直接在显示视图中创建一个仅包含状态字段的新表单（或在部分中，并不重要）。然后让一些 javascript 在下拉列表更改时提交表单。

如果您使用 rails form-helper，它们会将提交指向控制器的更新操作，并且由于仅存在 state 属性，因此该属性将被更新。

# sql - 哪些运算符对我的命令是正确的

> ID：14802352
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:40:34.757
> 
> 标签：sql, sql-server, sql-server-2008

我使用 sql server 2008 并使用了以下命令：

```
SELECT Min(id), 
       [idfromindex] 
FROM   ordersview 
WHERE  [idfromindex] IN(SELECT DISTINCT [idfromindex] 
                        FROM   ordersview 
                        WHERE  isobserve = 'True' 
                               AND ispay = 'True' 
                               AND orderdate >= '1390/09/01' 
                               AND orderdate <= '1391/09/27') 
GROUP  BY [idfromindex] 
```

但是，如果有一个确切`orderdate='1390/09/01'`或`orderdate='1391/09/27'`值的记录，它不会显示它们，它只会显示大于和小于它们的结果，但如果它存在，我也想显示相等的结果。

orderDate 类型为 Date

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:50:24.617

不会将条件更改为存在`>= '1390/09/01'`并且`< '1391/09/28'`更有意义吗？这样，如果日期注册为`1390/09/01 23:59'. Date conditions tend to assume the exact time is`00:00`，您将删除时间组件。当然，这取决于您的列数据类型是什么（日期时间与日期）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:56:49.153

**DATETIME 数据类型包含日期和时间信息**

如果只提供日期部分，SQL 将时间部分设置为一天的开始，即午夜...

因此**，在右侧添加 +1 或在左侧添加 -1**将解决您的问题..

```
SELECT DISTINCT [idfromindex] 
                        FROM   ordersview 
                        WHERE  isobserve = 'True' 
                               AND ispay = 'True' 
                               AND orderdate >= dateadd(day,1,'1390/09/01')
                               AND orderdate <= dateadd(day,1,'1391/09/27') 
```

# android - 在 Android 中声明一个实体

> ID：14802353
> 
> 赞同：1
> 
> 时间：2013-02-10T20:40:41.430
> 
> 标签：android, xml, entity, dtd

我想声明一个新实体。我希望实体成为一个符号。一些简单的事情，比如使用电话的小图像和实体是 &telephone;。我希望能够在文本行中使用此符号，就像添加版权符号或大于符号等一样。

这甚至可能吗？

我尝试在我的 1 个字符串文件的开头声明一个 DOCTYPE。

```
<!DOCTYPE entities SYSTEM "entities.dtd" [
<!ENTITY telephone SYSTEM "phone.png">
]> 
```

我也用 gif 试了一下。我将 dtd 文件添加到我最初放置实体声明的值文件夹中。我什至添加了但是，可惜，没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:11:35.947

由于您的 png 文件（或 gif 文件）不是 XML，因此您必须将其声明为符号数据 (NDATA)。如果尚未声明，您还必须声明该符号。

但是，我认为您不能只引用该实体。我想你会得到一个类似的错误`"The unparsed entity reference '&telephone;' is not permitted."`。我认为您必须将属性声明为`ENTITY`.

***这纯粹是一个 DTD 答案；***我不确定这是否仍然适用于您的情况。无论正在处理您的 XML，都需要知道如何处理该属性。

例子：

```
<!DOCTYPE test [
<!NOTATION png PUBLIC "-//W3C//NOTATION Portable Network Graphics//EN">
<!ENTITY test SYSTEM "test.png" NDATA png>
<!ELEMENT test (img)>
<!ELEMENT img EMPTY>
<!ATTLIST img
          ent ENTITY #REQUIRED>
]>
<test>
    <img ent="test"/>
</test> 
```

# android - 如何将按钮的背景颜色重置为默认值？

> ID：14802354
> 
> 赞同：53
> 
> 时间：2013-02-10T20:40:44.393
> 
> 标签：android

我读了几篇文章，但没有一个有有效的解决方案。

一旦你这样做

```
button.setBackgroundColor(0x00000000); 
```

如何将按钮的背景颜色恢复为默认颜色？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-10T20:43:16.513

采用：

```
btn.setBackgroundResource(android.R.drawable.btn_default); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-05-17T22:39:54.163

如果使用设置背景颜色

```
btn.getBackground().setColorFilter(Color.RED, PorterDuff.Mode.MULTIPLY); 
```

可以使用以下方法重置：

```
btn.getBackground().clearColorFilter(); 
```

与以这种方式设置颜色相反，`button.setBackgroundColor()`可以保留按钮的形状。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-21T05:49:01.977

没有人提到**TRANSPARENT** 像这样使用它

```
findViewById(R.id.button_id).setBackgroundColor(Color.TRANSPARENT); 
```

晚点再谢我

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-08T09:13:06.643

这对我来说效果更好：

```
Button defbtn=new Button(this);
btn.setBackground(defbtn.getBackground()); 
```

# c - 错误：KERN_INVALID_ADDRESS 地址：0x0000000000000000 0x00007fff99b359c4 in strstr ()

> ID：14802359
> 
> 赞同：2
> 
> 时间：2013-02-10T20:41:39.650
> 
> 标签：c

我在 Mac OS X 上编写了一个小程序，但在以下函数中出现以下错误：

> 程序收到信号 EXC_BAD_ACCESS，无法访问内存。原因：KERN_INVALID_ADDRESS 在地址：0x0000000000000000 0x00007fff99b359c4 in strstr()

```
/*
 * attrvalue(): parse an attribute value pair.
 *
 * takes a string of the form "ATTRIBUTE = VALUE" and returns the atrribute name
 * and value as seperate strings
 *
 */
  int
 attrvalue(char *entry, char **attr, char **value)
 {
    char           *copy;
    char           *p;

    if (!entry || *entry == '\0')
            return 1;

    copy = strdup(entry);

    *attr = strtok(copy, "=");
    *value = strtok(NULL, "\n");

    /* strip training whitespace from attr and value */
    p = strstr(*attr, "     ");
    if(p)
      *p = '\0';
    p = strstr(*value, "   ");
    if(p)
      *p = '\0';
    return (0);
} 
```

知道这个功能有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:53:57.627

Revised answer: If you assume that there is no whitespace at the beginning of either attr or value (i.e., there is no space between the start of the line and the attr string, or the equal sign and the value string), then your program can be made to work with only a slight adjustment: change the multiple spaces in the second arguments to strstr() to single spaces. The revised code with a main() to demonstrate follows. If you wish to strip non-trailing whitespace, then, well, it's likely back to the debugger as you expand the problem or borrowing from the link in my original answer below.

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

/*
 * attrvalue(): parse an attribute value pair.
 *
 * takes a string of the form "ATTRIBUTE = VALUE" and returns the atrribute name
 * and value as seperate strings
 *
 */
  int
 attrvalue(char *entry, char **attr, char **value)
 {
    char           *copy;
    char           *p;

    if (!entry || *entry == '\0')
            return 1;

    copy = strdup(entry);

    *attr = strtok(copy, "=");
    *value = strtok(NULL, "\n");

    /* strip trailing whitespace from attr and value */
    p = strstr(*attr, " ");
    if(p)
      *p = '\0';
    p = strstr(*value, " ");
    if(p)
      *p = '\0';
    return (0);
}

int main()
{
    char *input = "asdf    =blah ";  // this works
    //char *input = " asdf = blah";  // this would not
    char *attr;
    char *value;

    attrvalue(input, &attr, &value);

    printf("attr =\"%s\"", attr);
    printf("value=\"%s\"", value);

    return 0;
} 
```

Original answer: I'd use a different method of stripping out whitespace, as it's not even quite clear how strstr() would work as used in this situation. Here's the [strstr() documentation](http://pubs.opengroup.org/onlinepubs/009695399/functions/strstr.html), and here's a [SO topic discussing the removal of whitespace in C](https://stackoverflow.com/questions/122616/how-do-i-trim-leading-trailing-whitespace-in-a-standard-way).

Couple other thoughts:

*   `if(p)` should be `if(p != NULL)`, as a nit.
*   What if second argument to strstr() is longer than the first?

# c++ - 混合默认和非默认构造函数时 RAII 是如何工作的

> ID：14802368
> 
> 赞同：0
> 
> 时间：2013-02-10T20:42:43.443
> 
> 标签：c++

我想围绕使用 malloc/free 的 C 库编写一个库包装类 (LibWrap)。为此，我想使用 C++ 的 RAII 来分配和释放内存。我使用 lib_address 作为我将从库中收到的随机示例地址。然而，当定义我的成员变量时，被调用的析构函数有这个 lib_address。

我希望默认构造函数创建的成员变量的析构函数不知道我放入替换成员变量的构造函数中的新地址。

```
#include <stdlib.h>
#include <iostream>
using namespace std;

class LibWrap
{
    int j;
    int lib_address;
public:
    LibWrap(): //default LibWrap
    j(0),
    lib_address(0)
    {
        cout << "default LibWrap "<<j <<"\t\t"<<lib_address << "\t" << this<<endl;
    }

    LibWrap(int f_j): //special LibWrap
    j(0),
    lib_address(0)
    {
        j = f_j;
        lib_address = rand();
        cout << "special LibWrap " << j<<"\t"<< lib_address<< "\t" << this <<endl;
    }

    ~LibWrap()
    {
        cout << "killing LibWrap " << j<<"\t" <<lib_address <<"\t" << this<< endl;
    }

    int g()
    {
        return j;
    }
};

class A
{
    int i;
    LibWrap b;

public:
    A(): //default A
    i(0)
    {
        cout << "default A\t"<<i << endl;
    }

    A(int f_i)://special A
    i(0)
    {
        i = f_i;
        cout << "special A\t"<<i << endl;
        b = LibWrap(10);
    }
    ~A()
    {
        cout << "killing A\t"<<i << endl;
    }

    void p()
    {
        cout <<"Test values: "<< i<< "," << b.g() << endl;
    }
};

int f()
{
    //A a; a.p();
    cout << "variable\t\tlib_address\treal_address" << endl; 
    A a = A(1);
    cout << "End" << endl;
    //a.p();
}

int main()
{
    f();
} 
```

运行此代码，我希望得到以下结果：

```
variable        lib_address real_address
default LibWrap 0       0   0xbfef2e28
special A   1
special LibWrap 10  1804289383  0xbfef2df8 
killing LibWrap 10  1804289383  0xbfef2df8 --would expect kiling LibWrap 0  0 0xbfef2e28
End
killing A   1
killing LibWrap 10  1804289383  0xbfef2e28 --would expect killing LibWrap 10 1804289383 0xbfef2df8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:09:14.463

```
b = LibWrap(10); 
```

这不会*初始化* `b`。`b`已经作为构造的一部分被初始化`A`。您正在做的是创建一个临时文件`LibWrap`并将该临时*文件复制*到`b`. 然后，您正在销毁该临时`LibWrap`文件（这是带有 lib_address 的额外析构函数调用的来源）。

临时`LibWrap`是“0xbfef2df8”地址的来源。`b`变量是“0xbfef2e28”地址。这就是为什么您要按此顺序获取它们的原因。

# php - 使用 PHP 的 Kerberos 票证缓存

> ID：14802369
> 
> 赞同：0
> 
> 时间：2013-02-10T20:42:47.137
> 
> 标签：php, apache, single-sign-on, kerberos, webmail

我正在尝试配置一个完整的 Kerberized 域环境，其中一个障碍是 webmail。我在 Internet 上搜索了有关如何通过 webmail 使用 Kerberos 进行单点登录的信息，但没有明确的结果。所以现在我要尝试自己做。

关键是，虽然使用 Apache 的 mod_auth_kerb 对一项服务（在本例中为 webmail 前端）进行身份验证很容易，但将票证转发到 IMAP/SMTP 服务器被证明更加棘手。从我读过的关于 Kerberos 的文档来看，似乎可以做到这一点——客户端将向 webmail 应用程序发送一个可转发的票证，然后该服务器将使用委托对 IMAP/SMTP 进行身份验证（作为用户）。然而，寻找任何关于现有实现的实际信息似乎是徒劳的。

在尝试进行自己的实现时，我将面临的首要问题之一是获取用于 IMAP/SMTP 服务器的票证。我可以考虑以下两种方法之一 - 可转发的票证存储在网络邮件的身份验证点，或者每当用户尝试发送电子邮件/刷新他们的邮箱时再次发生身份验证，但这次没有数据存储因为这一切都发生在一个请求中（并且 mod_auth_kerb 支持在请求期间保存凭据）。

在向下存储凭证路径时，存在安全问题、可扩展性问题和实施问题。但是，身份验证只发生一次（无论会带来什么好处）。

刷新/发送时的重新身份验证会更加安全，因为由于 mod_auth_kerb，凭据仅在请求期间存储，并且应该存在更少的可扩展性问题，因为当很多人时不会有很多凭据缓存漂浮在这个地方已登录。但是，身份验证会更频繁地发生，可能由于更高的网络负载而导致问题，或者客户端在身份验证和尝试发送电子邮件之间发生错误的可能性。

我倾向于第二种方法，仅仅是因为安全问题看起来很严重，但是我想要更多的意见——也许有更好的方法吗？

编辑：我将面临的另一个挑战是让 GSSAPI 与 PHP IMAP 扩展一起工作。从我读过的材料来看，似乎可以通过以下两种方式之一来实现——要么使用 Cyrus IMAP，要么使用 PHP IMAP 中内置的 GSSAPI 机制。但是，几乎没有关于如何执行这两种方法的文档，因此将不胜感激。

# list - Prolog：列表递归和修改

> ID：14802370
> 
> 赞同：1
> 
> 时间：2013-02-10T20:42:50.103
> 
> 标签：list, recursion, prolog

我在理解 Prolog 中的列表递归和修改时遇到了一些麻烦。我正在尝试获取列表列表，然后在每个列表中，将列表中的每个元素乘以最后一个元素。

这是我的代码片段：

```
 /*Find the last element of a list*/
    lastelement(X,[X]).
    lastelement(X,[_|L]) :- lastelement(X,L).

    /*Multiply two lists together*/
    multiplication(M1,M2,M1*M2).

    /*Take a list, find the last element and multiply every part of that list by that  element*/
    /*Attach modified list to X*/
    modifyL([],X) :- X is [].
    modifyL([First|Tset],X) :- lastelement(Y,First),
    multiplication(Y,First,MFirst),
    modifyL([Tset],X),
    append(X,MFirst,X). 
```

但是，当我尝试任何列表时，我得到的都是错误的。有人可以给我任何关于列表递归的指示，以帮助进一步理解这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:34:30.373

```
modifyL([],X) :- X is []. 
```

这不是你想的那样，**是**用来得到算术评估的结果。

你可以写

```
 modifyL([],X) :- X = []. 
```

或者干脆

```
 modifyL([],[]). 
```

当您使用列表时，您对该列表的每个元素重复相同的过程，您可以使用专为此设计的 maplist。模板是 maplist(Goal, L1 L2)。

```
modify(L1, L2) :-
  maplist(multiply_one_list,L1, L2). 
```

multiply_one_list 与列表一起使用，您可以这样写：

```
multiply_one_list(L_in, L_out) :-
  % getting last argument
  reverse(L_in, [Last | _]),
  % multiply each element of the list by
  % the last element, one more maplist !
  maplist(multiply_one_element(Last), L_in, L_out).

multiply_one_element(Last, In, Out) :-
  Out is In * Last. 
```

# delphi - 组件编辑器可以在多个组件上执行吗？

> ID：14802371
> 
> 赞同：2
> 
> 时间：2013-02-10T20:42:56.110
> 
> 标签：delphi, custom-controls

**简洁版本**

我正在尝试为我制作的自定义按钮实现我的第一个组件编辑器。在一些在线文章的帮助下，我成功安装了编辑器，当我在表单设计器中右键单击我的按钮时可以看到菜单项。

But this component editor menu is not showing when selecting more than one of my button controls.

默认情况下，组件编辑器是否仅适用于单个选定的控件，或者它们是否可以与多个选定的控件一起使用，如果可以，如何？

**长版**

我正在为我自己的一个组件实现 TPropertyEditor，但现在决定使用 TComponentEditor 会更好，至少我是这么认为的。

基本上我有一个我拥有的 TCustomButton，这个按钮组件有几个已发布的属性用于更改外观，例如边框和填充颜色等。

我正在实现的组件编辑器在上下文菜单中显示一个新菜单项，以“从文件加载设置”。执行时会显示一个简单的 TOpenDialog，您可以在其中选择适当的文件，例如一个 Ini 文件，然后我会读取该文件并相应地设置文件中的值。

据我所见，一切都运行良好，但由于我还是个新手并且正在掌握 Delphi 的整个自定义控件方面，我注意到一些没有发生的事情 - 我不确定这是否是实际预期的行为或我是否可以改变它。

问题是在我的按钮控件的多个选定实例上使用组件编辑器菜单。如果只选择了一个按钮并且我在设计器中单击鼠标右键，我的菜单将显示在上下文菜单的顶部，但是多个选定的控件不会显示组件编辑器菜单。

**代码示例**

```
type
  TMyButtonEditor = class(TComponentEditor)
  public
    procedure ExecuteVerb(Index: Integer); override;
    function GetVerb(Index: Integer): string; override;
    function GetVerbCount: Integer; override;
  end;

implementation

{ TMyButtonEditor }

procedure TMyButtonEditor.ExecuteVerb(Index: Integer);
var
  OpenDialog: TOpenDialog;
begin
  case Index of
    0:
    begin
      OpenDialog := TOpenDialog.Create(nil);
      try
        OpenDialog.Filter := 'All Files (*.*)|*.*';

        if OpenDialog.Execute then
        begin
          // handle opened file..
        end;
      finally
        OpenDialog.Free;
      end;
    end;
  end;
end;

function TMyButtonEditor.GetVerb(Index: Integer): string;
begin
  case Index of
    0:
    begin
      Result := 'Load settings from File...';
    end;
  end;
end;

function TMyButtonEditor.GetVerbCount: Integer;
begin
  Result := 1;
end; 
```

在注册程序单元中：

```
RegisterComponentEditor(TMyButton, TMyButtonEditor); 
```

从我所见，只有单个组件可以在任何给定时间使用组件编辑器，还是我错了，它们可以用于多个控件？

我希望在表单设计器上选择我的 3 或 4 个按钮，并使用组件编辑器一次将导入的设置应用到这些按钮上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T20:46:27.760

组件编辑器只能对单个组件进行操作。

这是尽可能通过对象检查器而不是组件编辑器提供属性的一个很好的理由。因为 Object Inspector 可以一次对多个组件进行操作。

# c# - 在构建期间使用 NDepend 生成差异报告

> ID：14802373
> 
> 赞同：1
> 
> 时间：2013-02-10T20:43:00.267
> 
> 标签：c#, .net, build, continuous-integration, ndepend

我们使用 TeamCity 进行持续集成，我们的源代码控制是 Git，我们有 1 个包含多个 .sln 文件（大约 10 个）的主要存储库。

总而言之，这个存储库有大约**100 - 200 个 C# 项目**。

推送到主存储库后，TeamCity 会触发一个构建，该构建将编译**存储库中的所有项目**。

我希望能够知道**哪些项目实际上受到了特定 commit 的影响**，因此仅将这些项目的输出发布为当前构建的工件。

为此，我设计了一个解决方案，将 NDepend 集成到我们的构建过程中，并生成当前和最新构建输出之间的差异报告。更改/添加的输出将作为构建输出发布。

我对 NDepend 的经验很少；据我所知，它的所有真正力量都来自于它所包含的查询语言。

我想知道如何（如果可能的话）我可以实现以下目标：

1.  包含先前构建输出的文件夹与当前构建输出文件夹之间的差异。
2.  让 NDepend 生成消耗格式的报告，这样我就可以确定需要复制的文件。

这种情况可能吗？那会有多容易/难？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:46:14.690

因此，简单的答案是按照[本文档中的说明执行](http://www.ndepend.com/Doc_CI_Diff.aspx)**报告代码差异**方式。这个基本答案的问题在于，它预先假设两个 NDepend 项目总是引用两个相同的程序集。

* * *

当然，程序集的数量和名称在您的上下文中会有所不同，因此我们需要动态构建两个项目（旧/新）并通过[NDepend.API](http://www.ndepend.com/API/webframe.html?NDepend.API_gettingstarted.html)分析它们。

这是 NDepend.API 源代码。对于*It-Just-Works 体验*，在 PowerTools 源代码 (in `$NDependInstallDir$\NDepend.PowerTools.SourceCode\NDepend.PowerTools.sln`) 中只需 在注册调用`FoldersDiff.Main();`后调用方法， in 。`AssemblyResolve``Program.cs`

```
 ...
 AppDomain.CurrentDomain.AssemblyResolve += AssemblyResolverHelper.AssemblyResolveHandler;
 FoldersDiff.Main();
 ... 
```

这是利用 NDepend.API 的源代码。

`codeBase`请注意，通过两个对象和对象可以做更多事情`compareContext`。除了显示添加/删除/codeWasChanges 的 3 个程序集列表之外，您还可以显示 API 中断更改、添加的新方法和类型、修改的类和方法、代码质量回归……为此，只需查看有关 diff的[默认代码规则](http://www.ndepend.com/DefaultRules/webframe.html)，基于相同的[NDepend.CodeModel API](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel_namespace.html)。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using NDepend;
using NDepend.Analysis;
using NDepend.CodeModel;
using NDepend.Path;
using NDepend.Project;

class FoldersDiff {

   private static readonly NDependServicesProvider s_NDependServicesProvider = new NDependServicesProvider();

   internal static void Main() {
      var dirOld = @"C:\MyProduct\OldAssembliesDir".ToAbsoluteDirectoryPath();
      var dirNew = @"C:\MyProduct\NewAssembliesDir".ToAbsoluteDirectoryPath();

      Console.WriteLine("Analyzing assemblies in " + dirOld.ToString());
      var codeBaseOld = GetCodeBaseFromAsmInDir(dirOld, TemporaryProjectMode.TemporaryOlder);
      Console.WriteLine("Analyzing assemblies in " + dirNew.ToString());
      var codeBaseNew = GetCodeBaseFromAsmInDir(dirNew, TemporaryProjectMode.TemporaryNewer);

      var compareContext = codeBaseNew.CreateCompareContextWithOlder(codeBaseOld);

      // So much more can be done by exploring fine-grained diff in codeBases and compareContext
      Dump("Added assemblies", codeBaseNew.Assemblies.Where(compareContext.WasAdded));
      Dump("Removed assemblies", codeBaseOld.Assemblies.Where(compareContext.WasRemoved));
      Dump("Assemblies with modified code", codeBaseNew.Assemblies.Where(compareContext.CodeWasChanged));
      Console.Read();
   }

   internal static ICodeBase GetCodeBaseFromAsmInDir(IAbsoluteDirectoryPath dir, TemporaryProjectMode temporaryProjectMode) {
      Debug.Assert(dir.Exists);
      var dotNetManager = s_NDependServicesProvider.DotNetManager;
      var assembliesPath = dir.ChildrenFilesPath.Where(dotNetManager.IsAssembly).ToArray();
      Debug.Assert(assembliesPath.Length > 0); // Make sure we found assemblies
      var projectManager = s_NDependServicesProvider.ProjectManager;
      IProject project = projectManager.CreateTemporaryProject(assembliesPath, temporaryProjectMode);

      // In PowerTool context, better call:
      // var analysisResult = ProjectAnalysisUtils.RunAnalysisShowProgressOnConsole(project);
      var analysisResult = project.RunAnalysis();
      return analysisResult.CodeBase;
   }

   internal static void Dump(string title, IEnumerable<IAssembly> assemblies) {
      Debug.Assert(!string.IsNullOrEmpty(title));
      Debug.Assert(assemblies != null);
      Console.WriteLine(title);
      foreach (var @assembly in assemblies) {
         Console.WriteLine("   " + @assembly.Name);
      }
   }
} 
```

# image - JavaFX 中的有效图像裁剪

> ID：14802374
> 
> 赞同：6
> 
> 时间：2013-02-10T20:43:02.143
> 
> 标签：image, javafx

我正在尝试使用 JavaFX 编写拼图游戏，部分原因是有人问我，部分原因是我想尝试使用 JavaFX。但是，我在实际裁剪图像时遇到了困难。

这个想法是让用户提供图像和程序以将图像切割成更小的部分。很简单，对吧？我的问题是：我能找到剪切图像的唯一方法是制作图像对象的副本并更改副本的可见部分，这是一个示例：

```
ImageView imgageView = new ImageView(); // Creates a new ImageView; this will be a single puzzle piece.
imgageView.setImage(originalImage); // Use the original image as the "base."
Rectangle2D rectangle = new Rectangle2D(0, 0, 50, 50); // Crop the image from (0,0) to (50, 50). 
```

只是为了澄清最后一行，这里是[API 中的相关部分](http://docs.oracle.com/javafx/2/api/javafx/geometry/Rectangle2D.html)：

```
public Rectangle2D(double minX,
           double minY,
           double width,
           double height)
Creates a new instance of Rectangle2D.
Parameters:
minX - The x coordinate of the upper-left corner of the Rectangle2D
minY - The y coordinate of the upper-left corner of the Rectangle2D
width - The width of the Rectangle2D
height - The height of the Rectangle2D 
```

现在，如果我将图片切成四或九块（该游戏是为幼儿设计的），这很好，但如果我想将图片切成一个漂亮的 1200 块拼图怎么办？这不会导致极其昂贵的操作吗？不仅是裁剪本身，还要在内存中保留那么多图像副本。看，如果我正确理解这一点，每一块都将包含整个原始图像，其中很大一部分将保持“隐藏”。

我只是误解了这个功能吗？如果没有，那么一定有更好的方法来做到这一点，对吧？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-23T14:23:29.413

使用 PixelReader 和 WritableImage 应该会有所帮助。

以下从旧图像中切出新`position (x,y)`图像`size (width, height)`

```
PixelReader reader = oldImage.getPixelReader();
WritableImage newImage = new WritableImage(reader, x, y, width, height); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-20T00:02:31.500

多个 ImageView 对象可以引用同一个 Image。图像本身的数据存储在图像中。如果您有 1000 个 ImageView 对象，每个对象都引用同一个 Image，那么内存中只有 1 个像素副本。使用 WriteableImage 创建副本实际上比拥有多个 ImageView 对象更昂贵。

# c++ - Boost.Atomic 示例中的无等待队列崩溃

> ID：14802378
> 
> 赞同：2
> 
> 时间：2013-02-10T20:43:18.060
> 
> 标签：c++, boost, concurrency, c++11, atomic

我正在寻找使用原子的无等待队列的 C++ 实现，并找到了 Boost.Atomic 示例：

```
template<typename T>
class waitfree_queue {
public:
  struct node {
    T data;
    node * next;
  };
  void push(const T &data)
  {
    node * n = new node;
    n->data = data;
    node * stale_head = head_.load(boost::memory_order_relaxed);
    do {
      n->next = stale_head;
    } while (!head_.compare_exchange_weak(stale_head, n, boost::memory_order_release));
  }

  node * pop_all(void)
  {
    T * last = pop_all_reverse(), * first = 0;
    while(last) {
      T * tmp = last;
      last = last->next;
      tmp->next = first;
      first = tmp;
    }
    return first;
  }

  waitfree_queue() : head_(0) {}

  // alternative interface if ordering is of no importance
  node * pop_all_reverse(void)
  {
    return head_.exchange(0, boost::memory_order_consume);
  }
private:
  boost::atomic<node *> head_;
};

int main() {
// pop elements
waitfree_queue<int>::node * x = q.pop_all()
while(x) {
  X * tmp = x;
  x = x->next;
  // process tmp->data, probably delete it afterwards
  delete tmp;
}

} 
```

[boost官方网站上的示例](http://www.boost.org/doc/libs/1_53_0/doc/html/atomic/usage_examples.html#boost_atomic.usage_examples.mp_queue)

我已经用 std 替换了 boost 并用 MSVC 2012 编译。它崩溃并在控制台中显示下一条消息：

```
Assertion failed: _Order2 != memory_order_release, file c:\program files (x86)\m
icrosoft visual studio 11.0\vc\include\xxatomic, line 742 
```

当我编译原始 boost 它运行时会崩溃。

它是 Boost.Atomic 还是 MSVC 的原子实现中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:39:21.087

它看起来像 MSVC 实现中的错误。断言失败，因为`Order2`is `memory_order_release`。但是，如此处所述[（](http://www.stdthread.co.uk/doc/headers/atomic/atomic/compare_exchange_weak.html)与 C++ 标准相同）（强调我的）：

> 3 参数重载等价于带有 success_order==order 和 failure_order==order 的 4 参数重载，除了如果 order 是 std::memory_order_acq_rel，则 failure_order 是 std::memory_order_acquire，并且**如果 order 是 std:: memory_order_release 然后 failure_order 是 std::memory_order_relaxed**。

换句话说，在您的情况下`Order2` *必须是* `std::memory_order_relaxed`4 参数重载，因为您传递`memory_order_release`了`order`. 在 MSVC 的实现中不是这种情况，这是一个错误。如果可能，请将其报告为错误。

# .net - 在 .NET 的 Windows 安装项目中分发 MFC42.dll

> ID：14802380
> 
> 赞同：0
> 
> 时间：2013-02-10T20:43:38.277
> 
> 标签：.net, visual-c++, deployment, mfc, installation

我必须在我使用 .NET 制作的 Windows 安装项目中分发 MFC42.dll。我必须将此文件放在系统文件夹中，但出现 Windows 保护错误。

有人知道分发这个文件吗？我也可以重新分发 vc 6.0 可再分发包，但不知道如何？

我为此使用 .NET 2008 安装和部署项目。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:37:45.723

MFC42.dll 是许多 Windows 程序使用的旧版 DLL。它预装在 Windows 中，并*受到保护*，不会被安装程序替换。该功能称为 Windows 文件保护。这就是您收到错误的原因。

因此，您不应该**自己**安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:52:59.997

Probably this article will be helpful for you

[Walkthrough: Deploying a Visual C++ Application By Using the Visual C++ Redistributable Package](http://msdn.microsoft.com/en-us/library/dd293575.aspx)

You might be interested in ISLE [InstallShield Limited Edition (free for all Visual Studio Users)](http://msdn.microsoft.com/de-de/library/vstudio/2kt85ked.aspx)

# python - Python在没有“。”的字符串中转换十进制数

> ID：14802386
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:44:05.443
> 
> 标签：python, string, formatting, tuples

我有两个数字的元组，

例如：`data = (0.25, 0.25)`

我希望将其转换为这样的字符串：

```
025and025 
```

没有“。”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:47:00.290

```
In [55]: data = (0.25, 0.25)

In [56]: 'and'.join([str(item).replace('.','') for item in data])
Out[56]: '025and025' 
```

# sml - 如何评估测试？

> ID：14802387
> 
> 赞同：-1
> 
> 时间：2013-02-10T20:44:11.093
> 
> 标签：sml

如果我将此测试定义为：

```
val neg = Test (fn x => x < 0, "neg"); 
```

我该如何测试这个？我试过了

```
neg 3; 
```

但我得到一个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:05:23.290

从外观上看，它`Test`是一个值构造函数，因此您应该先“解包”它，然后才能访问其中的对。

像这样的东西应该可以完成这项工作

```
val Test (f, s) = Test (fn x => x < 0, "neg")
f 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T11:25:41.320

您可以通过一个解包测试并运行它的函数来做到这一点：

```
fun runtest Test(f,s) x = f x 
```

然后你会做

```
runtest neg 3 
```

# .net - Webclient 不使用代理设置

> ID：14802390
> 
> 赞同：1
> 
> 时间：2013-02-10T20:44:18.767
> 
> 标签：.net, proxy, webclient

我一直在使用 .NET WebClient 类，但是每当我尝试使用代理设置（仅在此处指定一个没有任何凭据的 IP 地址[http://hidemyass.com/proxy-list/](http://hidemyass.com/proxy-list/)）时，目标服务器仍然认为我在正常的IP地址上。

“正常”是指我们的 ISP 提供的静态 IP 地址，而不是代理 IP。

```
WebClient wc = new WebClient();
wc.Proxy = new WebProxy("122.72.11.200");
Console.Write(wc.DownloadString("hostip.info")); 
```

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T13:25:26.920

许多（非匿名）代理将在请求中发送包含原始 IP 地址的标头。请参阅[获取客户端 IP 地址：REMOTE_ADDR、HTTP_X_FORWARDED_FOR，还有什么有用的？](https://stackoverflow.com/questions/527638/getting-the-client-ip-address-remote-addr-http-x-forwarded-for-what-else-coul)

也许 hostip.info 正在使用这样的标头来找出您的 IP 地址。您可以通过向 HTTP 回显服务发出请求来检查代理发送了哪些标头，例如[http://scooterlabs.com/echo](http://scooterlabs.com/echo)而不是[http://hostip.info](http://hostip.info)。

顺便说一句：您如何从输出（html 页面？）中得出 hostip.info 正在返回您的“正常”IP 地址的结论。并且不应该将完整的 URI`http://www.hostip.info`作为参数传递给`DownloadString()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-29T13:44:29.350

您可能会看到自己的外部 IP，因为您没有提供端口。在内部`WebProxy(Address)`调用该`CreateProxyUri()`函数，将您的 Ip 转换为 uri。这意味着从这里开始端口 80 将用于执行请求，而您的代理很可能需要不同的端口（查看您提供的站点，情况似乎如此）

```
private static Uri CreateProxyUri(string address) {
    if (address == null) {
        return null;
    }
    if (address.IndexOf("://") == -1) {
        address = "http://" + address;
    }
    return new Uri(address);
} 
```

`WebProxy(address, port)`您可以通过调用构造函数而不是使用正确的端口来修复它。或者通过附加`:port`到地址字符串，其中端口描述端口号。

# c - 如何通过网络完全控制终端？

> ID：14802393
> 
> 赞同：1
> 
> 时间：2013-02-10T20:45:24.020
> 
> 标签：c, linux, terminal

有没有办法通过网络完全控制终端。例如，我有一个用 C 编写的服务器和客户端，我想向服务器（在这种情况下服务器是一台 linux 计算机）发送一个类似`rm file`或的命令并将终端输出返回给客户端。`cd directory`我目前正在使用`ls`using`popen()`但它无法更改目录或执行其他复杂命令。有没有更好的方法来做到这一点，也许使用`fork()` `pipe()`和其他功能来使用任何命令并从终端获取完整输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:52:36.317

What you ask for is done by SSH.

> For example, I have a server and client written in C, I want to send a command like rm file or cd directory to the server (server in this case is a linux computer) and get the terminal output back to the client.

I strongly discourage to implement such a functionality yourself. The odds are high, that your own approach will have several security issues.

SSH is the de-facto standard for remote terminals, has strong encryption, real world tested authentication and strong maintenance support. Also there are excellent open source implementations, like OpenSSH.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:53:52.393

Not sure what your exact set-up is, but why not just fork off a shell on the remote side? You can then do anything that can be done from the commandline.

If a real, interactive connection is an option, look into pty's ("pseudo-ttys"). It's how real terminal applications work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T20:57:56.243

如果您可以从中获得输出，`ls`那么您就走在了正确的道路上。

接下来是能够发送*输入*，与输出没有太大区别。您可以使用该命令`cat`同时检查输入和输出是否正确。

然后，只需运行您喜欢的 shell 命令，例如`bash`，您就可以将命令写入输入流并读取每个命令的输出。

请注意，这`cd`不是程序；它是一个 shell 命令，所以你必须运行一个 shell 才能让它有任何意义。重定向和您似乎想要做的其他复杂性也是如此。

PS：请注意，这可能是一个严重的安全问题，您应该认真考虑已经制作的替代方案，例如 ssh，正如其他人所说。

# c - 解析和嵌套指针

> ID：14802395
> 
> 赞同：0
> 
> 时间：2013-02-10T20:45:37.330
> 
> 标签：c, parsing, pointers, ascii, structure

我正在尝试编写一个程序来读取包含四面体格式的文件：

```
 T 109 20 10 19
   [T X1 X2 X3 X4 ]
    T 123 34 24 33
    T 182 83 82 92 
```

其中每行中的每个数字 X 表示数据文件第 X 行的三元组（x、y 和 z 坐标）：

```
line 1 x y z
line 2 x y z
  [.......]
line n x y z 
```

我在这里发布了一个类似（但更简单）的问题[Parsing data from ASCII formatted file in C](https://stackoverflow.com/questions/14729035/parsing-data-from-ascii-formated-file-in-c)。这一次我的想法是读取四面体文件，并将表示这些四面体顶点坐标的 4 行号存储在一个数组`vertid[]`（0 到 3）中，然后使用指向`Vertex`结构体。我将总结一下：在四面体结构中存储行 ID 编号，然后将指针设置为指向正确顶点的“点”。

请记住，我不是程序员（我需要这个来生成 Voronoi 图）。如果不是存储构成四面体的顶点，而是存储边，是否会更简单（因为我相信我实际上需要边数据而不是顶点数据来生成 Voronoi D）？我已经花了我的星期天在这方面工作，但它不起作用，我不知道为什么。谢谢你。

（不工作）示例：

```
#define FILEPATHtri "/pathto/grid1DT.txt"
#define FILEPATHorg "/pathto/grid1.txt"
#define MAX  10000

#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include "math.h"

typedef struct
{

    float x;
    float y;
    float z;
    char ID;
}Vertex;

/* NOT USED ATM
        typedef struct {
            edge_ref next[4]; // pointers to other edges (AQE data structure)
            void *data[4]; // pointers to endpoints of edge
            unsigned ID; // ID of edge
          }Edge;
 */
typedef struct
{
    Vertex *vert[4];
    int vertid[4];
    char t;
}Tetra;

void file_link (void)
{

    Vertex *vert_dt = malloc( MAX * sizeof (Vertex) ) ;

    Vertex *vert_std = malloc( MAX * sizeof (Vertex) ) ;

    Tetra *tetrahedron = malloc(MAX * sizeof (Tetra) );

    FILE *fp1,*fp2 ;
    fp1 = fopen( FILEPATHtri,"r");
    int i = 0;
    while(fscanf(fp1, "%c %i %i %i %i ", &tetrahedron[i].t, &tetrahedron[i].vertid[0], &tetrahedron[i].vertid[1], 
            &tetrahedron[i].vertid[2], &tetrahedron[i].vertid[3] ) == 5 ) // Saving the line numbers into vertid[0..3]
    {
        i++;
    }
    fclose(fp1);

    fp2 = fopen( FILEPATHorg,"r");
    int j = 0;
    while(fscanf(fp2, "%f %f %f ", &vert_std[j].x, &vert_std[j].y, &vert_std[j].z ) == 3 ) 
    {
        j++;
    }
    fclose(fp2);

    int n;

    for (n=0; n<i; n++) {

        tetrahedron[n]->vert[0]=vert_std[ tetrahedron[n].vertid[0] ]; // retriving coords from the standard file and storing
        tetrahedron[n]->vert[1]=vert_std[ tetrahedron[n].vertid[1] ]; // them in the vertex pointer array of tretrahedron
        tetrahedron[n]->vert[2]=vert_std[ tetrahedron[n].vertid[2] ];
        tetrahedron[n]->vert[3]=vert_std[ tetrahedron[n].vertid[3] ];
    }
        int m = 100; //used to retrieve m'th tetra, so that I can print the tetra that I want,just for checking purposes..   

        // printing 13 variables in total... 
        printf("These are the 4 coordinates of the vertices of the  %i th tetrahedron from the DT file %f %f %f\n%f %f %f\n%f %f %f\n%f %f %f\n", n, 
                tetrahedron[n]->vert[0]->x,tetrahedron[n]->vert[0]->y,tetrahedron[n]->vert[0]->z,
                tetrahedron[n]->vert[1]->x,tetrahedron[n]->vert[1]->y,tetrahedron[n]->vert[1]->z, 
                tetrahedron[n]->vert[2]->x,tetrahedron[n]->vert[2]->y,tetrahedron[n]->vert[2]->z, 
                tetrahedron[n]->vert[3]->x,tetrahedron[n]->vert[3]->y,tetrahedron[n]->vert[3]->z);

    free(vert_dt);
    free(vert_std);
    free(tetrahedron);
}

int main(void) {
    file_link();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:47:33.597

格式类似于 .obj 格式，解析起来并不难。你过得很好；在这一点上，您的错误大多只是拼写错误。

只需就地使用数据而不是指针：

```
Vertex *vert[4]; 
```

变成：

```
Vertex vert[4]; 
```

您还需要将所有 '->' 符号更改为点 (.) 符号，例如：

```
 tetrahedron[n].vert[0]=vert_std[ tetrahedron[n].vertid[0] ]; // retriving coords from the standard file and storing
    tetrahedron[n].vert[1]=vert_std[ tetrahedron[n].vertid[1] ]; // them in the vertex pointer array of tretrahedron
    tetrahedron[n].vert[2]=vert_std[ tetrahedron[n].vertid[2] ];
    tetrahedron[n].vert[3]=vert_std[ tetrahedron[n].vertid[3] ]; 
```

并且您的测试代码应该将 n 降低一个（当前是 lastLine+1）：

```
 // printing 13 variables in total... 
n--; // n must be last entry 
```

最后，我在你的分配上得到了一个编译错误，并且不得不对它们进行类型转换：

```
Vertex *vert_dt = (Vertex*) malloc( MAX * sizeof (Vertex) ) ;

Vertex *vert_std = (Vertex*) malloc( MAX * sizeof (Vertex) ) ;

Tetra *tetrahedron = (Tetra*) malloc(MAX * sizeof (Tetra) ); 
```

请注意， fscanf() 非常严格，因此带有额外前导空格的输入文件可能会使程序感到困惑。我在虚构文件上测试了这些更改，所以不能保证。

希望这可以帮助！这是我的完整文件：

```
#define FILEPATHtri "grid1DT.txt"
#define FILEPATHorg "grid1.txt"
#define MAX  10000

#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include "math.h"

typedef struct
{

    float x;
    float y;
    float z;
    char ID;
}Vertex;

/* NOT USED ATM
        typedef struct {
            edge_ref next[4]; // pointers to other edges (AQE data structure)
            void *data[4]; // pointers to endpoints of edge
            unsigned ID; // ID of edge
          }Edge;
 */
typedef struct
{
    Vertex vert[4];
    int vertid[4];
    char t;
}Tetra;

void file_link (void)
{

    Vertex *vert_dt = (Vertex*) malloc( MAX * sizeof (Vertex) ) ;

    Vertex *vert_std = (Vertex*) malloc( MAX * sizeof (Vertex) ) ;

    Tetra *tetrahedron = (Tetra*) malloc(MAX * sizeof (Tetra) );

    FILE *fp1,*fp2 ;
    fp1 = fopen( FILEPATHtri,"r");
    int i = 0;
    while(fscanf(fp1, "%c %i %i %i %i ", &tetrahedron[i].t, &tetrahedron[i].vertid[0], &tetrahedron[i].vertid[1], 
            &tetrahedron[i].vertid[2], &tetrahedron[i].vertid[3] ) == 5 ) // Saving the line numbers into vertid[0..3]
    {
        i++;
    }
    fclose(fp1);

    fp2 = fopen( FILEPATHorg,"r");
    int j = 0;
    while(fscanf(fp2, "%f %f %f ", &vert_std[j].x, &vert_std[j].y, &vert_std[j].z ) == 3 ) 
    {
        j++;
    }
    fclose(fp2);

    int n;

    for (n=0; n<i; n++) {

        tetrahedron[n].vert[0]=vert_std[ tetrahedron[n].vertid[0] ]; // retriving coords from the standard file and storing
        tetrahedron[n].vert[1]=vert_std[ tetrahedron[n].vertid[1] ]; // them in the vertex pointer array of tretrahedron
        tetrahedron[n].vert[2]=vert_std[ tetrahedron[n].vertid[2] ];
        tetrahedron[n].vert[3]=vert_std[ tetrahedron[n].vertid[3] ];
    }
        int m = 100; //used to retrieve m'th tetra, so that I can print the tetra that I want,just for checking purposes..   

        // printing 13 variables in total... 
        n--; // rewind to last tetrahedron
        printf("These are the 4 coordinates of the vertices of the  %i th tetrahedron from the DT file %f %f %f\n%f %f %f\n%f %f %f\n%f %f %f\n", n, 
                tetrahedron[n].vert[0].x,tetrahedron[n].vert[0].y,tetrahedron[n].vert[0].z,
                tetrahedron[n].vert[1].x,tetrahedron[n].vert[1].y,tetrahedron[n].vert[1].z, 
                tetrahedron[n].vert[2].x,tetrahedron[n].vert[2].y,tetrahedron[n].vert[2].z, 
                tetrahedron[n].vert[3].x,tetrahedron[n].vert[3].y,tetrahedron[n].vert[3].z);

    free(vert_dt);
    free(vert_std);
    free(tetrahedron);
}

int main(void) {
    file_link();

    return 0;
} 
```

# javascript - 停止事件并将变量设置为默认值

> ID：14802398
> 
> 赞同：0
> 
> 时间：2013-02-10T20:46:04.663
> 
> 标签：javascript, jquery, html

以下问题。我有一个长滚动页面，如果它在带有 inview.js 的视口中，它会向每个 div 添加类

```
var $div1 = $('#div1');
var $div2 = $('#div2');
//.....
var only_once = 0;

$('#div1, #div2, #div3, #div4, #div5').bind('inview', function (event, visible) 
{
    if (visible == true) {
        $(this).addClass("inview");
    } else {
        $(this).removeClass("inview");
    }
}); 
```

当它添加类时，我正在做一些事件和一个 if 条件，如果第一次触发 inview 然后停止，则应该发生某些事情。我尝试将 only_once 切换为 1。

```
if($div1.hasClass("inview")){   
    // here some functions...

    if (only_once == 0) {
        $('.float-second').css('left', 0);
        $('.float-second').css('top', 0);
        only_once = 1;
    } 

    if($div2.hasClass("inview")){   
        // here some functions...

        if (only_once == 1) {
            $('.float-third').css('left', 0);
            $('.float-third').css('top', 0);
            only_once = 2;
        } 
        // and this for the other divs too 
```

问题是，当我这样做时，当网站在中间或底部加载并且我向上或向下滚动时它不会触发，因为 if 条件需要第一个事件，因为它之前的值。希望你明白我的意思，我怎样才能做好这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:56:13.790

我想我理解你遇到的问题。您可以使用以下命令检查页面滚动了多少：

```
$(document).scrollTop(); 
```

如果它大于您决定的某个值，您可以调用您需要调用的函数，否则如果它在页面顶部加载，您的插件将为您执行此操作。

# android - 如何将Android动画移动到某个位置？

> ID：14802404
> 
> 赞同：1
> 
> 时间：2013-02-10T20:46:56.127
> 
> 标签：android, android-animation, android-imageview, android-relativelayout

我需要对卡片进行动画处理，从其原始位置移动并降落在另一个预定义的图像视图之上（表示卡片表中的卡片堆栈）

```
 public static ImageView REFERENCE_IMAGE_FOR_ANIMATION;
REFERENCE_IMAGE_FOR_ANIMATION = (ImageView) findViewById(R.id.cardpile);

    public void deckButtonOnClick(View v) {
    ImageView imageView = new ImageView(getApplicationContext());
    imageView.setImageResource(DECK.takeCard());
    imageView.setAdjustViewBounds(true);
    imageView.setLayoutParams(PARAMS);
    imageView.setTag("0");
    imageView.setOnClickListener(new MyOnClickListener());

    ((LinearLayout) findViewById(R.id.innerLinearLayout))
            .addView(imageView);

} 
```

我的代码`MyOnClickListener`如下：

```
public class MyOnClickListener{
Animation standardPosition = new TranslateAnimation(0, 0, 0, -25f);

@Override
public void onClick(View v) {
    Animation standardPosition;

    Animation risedPositionAndChosen;

    if (v.getTag().toString().equalsIgnoreCase("0")) {
        standardPosition = new TranslateAnimation(0, 0, 0, -25f);
        standardPosition.setDuration(400);
        standardPosition.setFillAfter(true);
        v.setTag("1");
        v.startAnimation(standardPosition);

    } else if (v.getTag().toString().equalsIgnoreCase("1")) {
        risedPositionAndChosen = new TranslateAnimation(
                Animation.RELATIVE_TO_SELF, 0,
                Animation.RELATIVE_TO_PARENT,    Game.REFERENCE_IMAGE_FOR_ANIMATION.getRight()
                - v.getRight(), Animation.RELATIVE_TO_SELF,
                0,Animation.RELATIVE_TO_PARENT, -Game.REFERENCE_IMAGE_FOR_ANIMATION.getTop());
        risedPositionAndChosen.setDuration(400);
        risedPositionAndChosen.setFillAfter(true);
        v.setTag("0");
        v.startAnimation(risedPositionAndChosen);

    } else if (v.getTag().toString().equalsIgnoreCase("2")) {

    }
    ((View) v.getParent()).invalidate();
}

} 
```

这是`OnClickListener`我需要更改的第一个“else if”语句。

这`REFERENCE_IMAGE_FOR_ANIMATION = (ImageView) findViewById(R.id.cardpile);`是我需要“登陆”的卡。

我的游戏屏幕布局包含一个嵌套`ScrollView`的`LinearLayout`内部。当动画开始时，卡片会“滑入”层次结构中较高的布局。我应该怎么做才能让它“浮在上面”？

# objective-c - MPMoviePlayerController 全屏添加子视图

> ID：14802408
> 
> 赞同：1
> 
> 时间：2013-02-10T20:47:07.383
> 
> 标签：objective-c, controls, mpmovieplayercontroller, add, subview

我已经尝试过了，但它不起作用，我在过去 7 个小时里一直在努力解决这个问题，请帮助我。我想将自定义按钮添加到 MPMoviePlayer 的全屏视图。

代码：

```
moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

        [self.view addSubview:moviePlayerController.view];
        moviePlayerController.fullscreen = YES;

        UIStoryboard *mainStoryBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];

        CustomControlsViewController *overlay = (CustomControlsViewController*)[mainStoryBoard instantiateViewControllerWithIdentifier:@"Custom Controls"];

        [moviePlayerController.view addSubview:overlay.view];

        [moviePlayerController play]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T10:51:44.050

首先，永远不要将任何子视图添加到`MPMoviePlayerController`视图本身。将它们作为同级添加到其背景视图或其父级。

这在`MPMoviePlayerController`文档中进行了讨论：

> 考虑一个电影播放器​​视图是一个不透明的结构。您可以将自己的自定义子视图添加到电影之上的分层内容，但您绝不能修改任何现有的子视图。除了在影片之上分层内容外，您还可以通过在 backgroundView 属性中向视图添加子视图来提供自定义背景内容。

2，当使用适当的全屏时，`MPMoviePlayerController`不会重用其正常视图，而是将其内容直接添加到`UIWindow`实例中。因此，在使用“正确”全屏模式时，您只有以下选项；切换到全屏模式后，找到当前的关键窗口并直接将控件添加到其中。

这样的事情应该做：

```
//are we in fullscreen-mode?
if (player.fullscreen)
{
    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    if (!window)
    {
         window = [[UIApplication sharedApplication].windows objectAtIndex:0];
    }
    //we now got a proper window for use of our controls ... 
    //add them to the window instance!
} 
```

作为替代方案，简单地不要使用“正确的”全屏，而是调整 MPMovieViewController 的视图以覆盖整个屏幕——我称之为“假”全屏。此选项的一大优势是您将能够使用/捕捉/覆盖正常的重新定向。

# java - 对LinkedList中具有相同值的项目进行排序？？？- 爪哇

> ID：14802419
> 
> 赞同：0
> 
> 时间：2013-02-10T20:50:03.447
> 
> 标签：java, sorting, linked-list

我在尝试对 LinkedList 进行排序时遇到问题。我使用了以下代码：

```
Collections.sort(mylist, new Comparator<String[]>() {
            public int compare(String[] o1, String[] o2) {
                int one= Integer.parseInt(o1[1]);
                int two = Integer.parseInt(o2[1]);
                return one-two;
            }
        }); 
```

在这里，我提出了一些价值观：

```
 thelist.testing("a",1);
    thelist.testing("b",5);
    thelist.testing("c",5);
    thelist.testing("d",5);
    thelist.testing("e",7);
    System.out.println(thelist); 
```

我有这些结果：a:1,b:5,c:5,d:5,e:7

当项目具有相同的数字时，我希望输出是这样的：a：1，d：5，c：5，b：5，e：7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:56:05.287

做就是了：

```
Collections.sort(mylist, new Comparator<String[]>() {  
            public int compare(String[] o1, String[] o2) {  
                if(o1[1].equals(o2[1]){  
                   return -(o1[0].compareTo(o2[0]));
                }  

                int one= Integer.parseInt(o1[1]);
                int two = Integer.parseInt(o2[1]);
                return one-two;
            }
        }); 
```

示例代码：

```
List<String[]> mylist = new ArrayList<String[]>();  
mylist.add(new String[]{"a","1"});  
mylist.add(new String[]{"b","5"});  
mylist.add(new String[]{"c","5"});  
mylist.add(new String[]{"d","5"});  
mylist.add(new String[]{"e","7"}); 
```

输出：

```
[a, 1]  
[d, 5]  
[c, 5]  
[b, 5]   
[e, 7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:54:00.547

如果您想首先添加最近添加的，请在排序之前反转列表。Java List 排序是稳定的，保持相等项的顺序。在排序之前，您的目标应该是在目标顺序中拥有等值的项目。

# java - 如何在不丢失对称属性的情况下使用休眠实现等于？

> ID：14802422
> 
> 赞同：12
> 
> 时间：2013-02-10T20:50:09.950
> 
> 标签：java, hibernate, java-7, hashcode, instanceof

在阅读（再次，很久以前应该这样做）正确实施equals和hashcode之后，我得出了这些结论，这对我有用：

**如果在 JDK 7 之前**：更喜欢使用 Apache commons equalsbuilder 和 hashcodebuilder。（或番石榴）。他们的 javadocs 包含如何以良好方式使用它们的示例。

**如果 JDK 7++**：使用新的 Objects 实用程序类

**但是，如果为 hibernate 编写**一些特殊要求，则会出现一些特殊要求（请参阅下面的源代码），其中推荐使用*instanceof*而不是*getClass*，因为 hibernate 创建了延迟加载的子类的代理。

但据我了解，如果这样做会出现另一个潜在问题：使用 getClass 的原因是为了确保 equals 合约的对称属性。JavaDocs：

```
*It is symmetric: for any non-null reference values x and y, x.equals(y) 
 should return true if and only if y.equals(x) returns true.* 
```

并且通过使用instanceof，可能不是对称的。示例：B 扩展 A。A 的 equals 对 A 进行 instanceof 检查。B 的 equals 对 B 进行 instanceof 检查。给 A a 和 B b：

a.equals(b) --> true b.equals(a) --> false

如何在不丢失对称属性的情况下使用休眠实现等于？使用getClass时我似乎不安全，使用instanceof时我不安全？

答案是永远不要向子类添加重要成员，然后安全地使用 instanceof（对于休眠）？

我阅读的资料来源：

[在 Java 中覆盖 equals 和 hashCode 时应该考虑哪些问题？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

Josh Blochs 优秀著作《Effective Java》中的第 7 项和第 8 项，[http: //web.archive.org/web/20110622072109/http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf](http://web.archive.org/web/20110622072109/http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf)

关于 Java 7：[http ://www.javacodegeeks.com/2012/11/guavas-objects-class-equals-hashcode-and-tostring.html](http://www.javacodegeeks.com/2012/11/guavas-objects-class-equals-hashcode-and-tostring.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-23T13:12:15.610

如果要在 equals 方法中比较两个对象的类，可以在比较它们之前对两个对象使用[Hibernate.getClass 。](http://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Hibernate.html#getClass%28java.lang.Object%29)然后你就不会遇到麻烦，例如在比较一个对象和一个对象的休眠代理时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T15:42:28.187

在评估了更多之后，我将这个问题总结为：

*   使用instanceof，你永远不能向子类添加重要成员。（没有办法扩展一个可实例化的类并添加一个值组件，同时保留equals合约（Bloch）
*   使用 getClass 会违反 Liskov 替换原则

朗格说[http://www.angelikalanger.com/Articles/JavaSolutions/SecretsOfEquals/Equals.html](http://www.angelikalanger.com/Articles/JavaSolutions/SecretsOfEquals/Equals.html)

> *   instanceof 测试仅适用于最终类，或者至少方法 equals() 在超类中是最终的。后者本质上意味着没有子类必须扩展超类的状态，而只能添加与对象的状态和行为无关的功能或字段，例如瞬态或静态字段。
> 
> 另一方面，使用 getClass() 测试的实现总是遵守 equals() 契约；它们是正确且稳健的。然而，它们在语义上与使用 instanceof 测试的实现非常不同。使用 getClass() 的实现不允许将子类与超类对象进行比较，即使子类不添加任何字段并且甚至不想覆盖 equals() 也是如此。例如，这种“微不足道”的类扩展将是在为这个“微不足道”目的而定义的子类中添加调试打印方法。如果超类通过 getClass() 检查禁止混合类型比较，那么微不足道的扩展将无法与其超类进行比较。

**总结 - 使用 instanceof 和 final for equals 避免破坏对称性，并避免休眠“代理”问题。**

链接

*   [Liskov 和休眠](http://cwmaier.blogspot.se/2007/07/liskov-substitution-principle-equals.html)
*   [GetClass vs instanceof in equals](https://stackoverflow.com/questions/596462/any-reason-to-prefer-getclass-over-instanceof-when-generating-equals)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T22:34:08.957

这是一个有趣的问题——`equals`当涉及到继承时，实现为等价关系并非易事。请参阅Martin Odersky 等人[的这篇深入文章](http://www.artima.com/lejava/articles/equality.html)。关于实现对象相等。

# javascript - jquery: scroll with specific DOM

> ID：14802427
> 
> 赞同：0
> 
> 时间：2013-02-10T20:50:36.833
> 
> 标签：javascript, scroll

Usually when I insert an element into DOM, the page will not automatically scroll. For example, at first there are divs `A` `B` `D` on page, and the browser view is on `D`.

```
A
B
D ] <= browser view 
```

Then I insert `C` between `B` and `D`. The browser view now is on `C`.

```
A
B
C ] <= browser view
D 
```

But I hope it on D. How could I make browser automatically scroll when inserting elements by javascript(but users can still scroll freely)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:57:00.293

如果您使用`jquery`then 在新 DOM 时触发特定 DOM 元素的[滚动；](http://api.jquery.com/scroll/)`C`添加。

# php - 为什么 get_object_vars 返回受保护的属性？

> ID：14802429
> 
> 赞同：3
> 
> 时间：2013-02-10T20:50:51.790
> 
> 标签：php

我已经使用`get_object_vars`了一段时间了..它总是只返回一个对象的公共属性，但突然它也返回受保护的变量？！？怎么可能？它以前从未这样做过

# 代码

```
print_r($row);
print_r(get_object_vars($row)); 
```

# 返回

```
Data_model_Accounting Object
(
    [get_external:protected] => 1
    [put_external:protected] => 1
    [delete_external:protected] => 1
    [post_class:protected] => 1
    [external_field_const:protected] => Array
        (
            [type] => Array
                (
                    [0] => LEDGER
                    [1] => DEBTOR_LEDGER
                    [2] => CREDITOR_LEDGER
                    [3] => DEBTOR_INVOICE
                    [4] => CREDITOR_INVOICE
                )

        )

    [external_field_condition_unset:protected] => Array
        (
            [invoice_id_] => Array
                (
                    [type] => Array
                        (
                            [mode] => not_in
                            [values] => Array
                                (
                                    [0] => DEBTOR_INVOICE
                                    [1] => CREDITOR_INVOICE
                                )

                        )

                )

            [invoice_time_due] => Array
                (
                    [type] => Array
                        (
                            [mode] => not_in
                            [values] => Array
                                (
                                    [0] => DEBTOR_INVOICE
                                    [1] => CREDITOR_INVOICE
                                )

                        )

                )

        )

    [table:protected] => 
    [predata:protected] => Array
        (
        )

    [data:protected] => Array
        (
        )

    [external:protected] => 1
    [put_error:protected] => 
    [action_mode:protected] => 
    [Shell:protected] => 
    [access_admin_primary:protected] => 1
    [get_admin_external:protected] => 
    [put_admin_external:protected] => 
    [delete_admin_external:protected] => 
    [id] => 19
    [time] => 1362787200
    [type] => DEBTOR_LEDGER
    [account_id_] => 16000
    [account_name] => Debitor
    [accountoff_id_] => 16000
    [accountoff_name] => Debitor
    [vatcode_name] => 
    [subaccount_id_] => 10
    [subaccount_type] => DEBTOR
    [subaccount_name] => hehe
    [subaccountoff_id_] => 101
    [subaccountoff_type] => DEBTOR
    [subaccountoff_name] => oskel
    [dimension_name] => 
    [dimensionoff_name] => 
    [currency_name] => 
    [invoice_id_] => 
    [invoice_time_due] => 0
    [amount] => -165
    [currency_amount] => -165
    [currency_rate] => 1
)
Array
(
    [table] => 
    [predata] => Array
        (
        )

    [data] => Array
        (
        )

    [external] => 1
    [put_error] => 
    [action_mode] => 
    [Shell] => 
    [access_admin_primary] => 1
    [get_admin_external] => 
    [put_admin_external] => 
    [delete_admin_external] => 
    [id] => 19
    [time] => 1362787200
    [type] => DEBTOR_LEDGER
    [account_id_] => 16000
    [account_name] => Debitor
    [accountoff_id_] => 16000
    [accountoff_name] => Debitor
    [vatcode_name] => 
    [subaccount_id_] => 10
    [subaccount_type] => DEBTOR
    [subaccount_name] => hehe
    [subaccountoff_id_] => 101
    [subaccountoff_type] => DEBTOR
    [subaccountoff_name] => oskel
    [dimension_name] => 
    [dimensionoff_name] => 
    [currency_name] => 
    [invoice_id_] => 
    [invoice_time_due] => 0
    [amount] => -165
    [currency_amount] => -165
    [currency_rate] => 1
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:04:19.353

不，这不是新行为，也不是一夜之间传入您的计算机的行为。

从[文档中](http://php.net/manual/en/function.get-object-vars.php)：

> 返回范围内指定对象的已定义对象可访问非静态属性的关联数组。

没有提及访问级别。

但是，有*一个*未记录的方面归结为可见性和范围，由在同一文档页面上留下以下评论的用户报告：

> 请注意这是范围敏感的事实。**如果您从对象自己的方法调用它，那么私有和受保护的变量也将被输出。从对象外部调用它，结果很可能就是您想要归档的内容。**

文档是你的朋友。*使用它*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:37:22.713

您使用的是什么版本的 PHP？

如果您在 Data_model_Accounting::method 中调用 get_object_vars，那么受保护的属性应该是可见的。

# python - 将相似条目分组python

> ID：14802433
> 
> 赞同：0
> 
> 时间：2013-02-10T20:51:22.817
> 
> 标签：python, numpy

我有一个 numpy 数组：

```
array([  2.86656000e+09,   2.86688000e+09,   2.86708000e+09,
     2.86860000e+09,   2.86884000e+09,   2.86908000e+09,
     2.86920000e+09,   2.87024000e+09,   2.87040000e+09,
     2.87056000e+09,   2.87076000e+09,   2.87108000e+09,
     2.87120000e+09,   2.87152000e+09,   2.87260000e+09,
     2.87272000e+09,   2.87280000e+09,   2.87448000e+09,
     2.87464000e+09,   2.87476000e+09,   2.87484000e+09]) 
```

对相似值进行分组的最佳方法是什么（例如，差异不大于 1000000）？谢谢解答！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:03:06.000

作为评论中链接的解决方案的替代方案，这样的事情应该可以工作：

```
In [1]: import numpy as np

In [2]: arr = np.array([  2.86656000e+09,   2.86688000e+09,   2.86708000e+09,
   ...:      2.86860000e+09,   2.86884000e+09,   2.86908000e+09,
   ...:      2.86920000e+09,   2.87024000e+09,   2.87040000e+09,
   ...:      2.87056000e+09,   2.87076000e+09,   2.87108000e+09,
   ...:      2.87120000e+09,   2.87152000e+09,   2.87260000e+09,
   ...:      2.87272000e+09,   2.87280000e+09,   2.87448000e+09,
   ...:      2.87464000e+09,   2.87476000e+09,   2.87484000e+09])

In [3]: np.split(arr, np.where(np.diff(arr) > 1000000)[0] + 1)
Out[3]: 
[array([  2.86656000e+09,   2.86688000e+09,   2.86708000e+09]),
 array([  2.86860000e+09,   2.86884000e+09,   2.86908000e+09,
         2.86920000e+09]),
 array([  2.87024000e+09,   2.87040000e+09,   2.87056000e+09,
         2.87076000e+09,   2.87108000e+09,   2.87120000e+09,
         2.87152000e+09]),
 array([  2.87260000e+09,   2.87272000e+09,   2.87280000e+09]),
 array([  2.87448000e+09,   2.87464000e+09,   2.87476000e+09,
         2.87484000e+09])] 
```

# laravel - Laravel/Eloquent 关系问题

> ID：14802438
> 
> 赞同：1
> 
> 时间：2013-02-10T20:52:08.247
> 
> 标签：laravel, eloquent

我有一个名为“用户”的模型，包含以下信息：

```
id
name
status_id 
```

我有一个名为“状态”的模型，包含以下信息：

```
id
description 
```

在执行原始查询时，自然会加入两个表，`users.status_id = status.id`但是我想使用 Laravel 的 Eloquent ORM 来获取用户的状态文本。

例如。`User::find(1)->status()->description`

提供了许多不同的功能，例如`has_one`、`has_many`和`belongs_to`，但这些都不起作用。有人对我如何做这样的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:23:56.630

按照您设置数据库的方式，您可以向 Status 模型添加一个只有一个用户的方法。

在您的 STATUS 模型中：

```
public function user()
{
    return $this->has_one('User');
} 
```

这将允许您按状态而不是按用户查询。要实现您想要的功能，即`User::find(1)->status()->description`您需要让您的数据库看起来像这样

```
Users

    id
    name

Status

    id
    description
    user_id 
```

现在您将在您的用户模型中实现以下内容

```
public function status()
{
    return $this->has_one('Status');
} 
```

允许您使用：

```
User::find(1)->status()->description; 
```

这将允许您在用户和状态之间建立一对一的关系。要实现一对多关系，即一个用户有多个状态（可能不是最好的示例），您可以使用与上述相同的数据库设置，但在用户模型中，您将`user()`返回函数：

```
$this->has_many('Status'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:10:12.753

我找到了答案。我可以通过运行 Fluent 查询而不是使用本机关系来完成上述操作：

```
 public function status() {

    return Status::where('id', '=', $this->status_id)->first();
 } 
```

# django - Django filter by conditional annotation

> ID：14802439
> 
> 赞同：3
> 
> 时间：2013-02-10T20:52:12.557
> 
> 标签：django, django-models, django-orm

Is it possible to have "conditional" annotation in Django? Let's say, there are following models

```
class Author(models.Model):
   name = models.CharField()

class Article(models.Model):
   title = models.CharField()
   published = models.BooleanField() 
```

now I'd like to select some limited (filtered) queryset of authors, and annotate them with both total books count and published books count, for later usage (like applying filters on the authors queryset, or ordering it). Something like

`Author.objects.filter(name__icontains = 'a').annotate(total_books = Count('books')).annotate(published_books = Count('books', <here published=true filter>))`

Is that possible anyhow?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:26:24.937

Django's ORM calls translate into SQL. If it can't be accomplished with an SQL query, it usually means you can't do it with the ORM as well. What you are requesting is a different `where` clause (unless I'm missing something or misunderstanding), requiring a different query. This leaves you with 2 options:

1.  Run 2 different queries (with different `filter()` arguments)
2.  If this is an "expensive" query that you don't want to run twice, you can just pull the data from the DB once and preform the aggregate in normal python code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T06:58:11.327

只是一个简单的想法，你可以尝试：

```
Author.objects.filter(name__icontains = 'a').\
    annotate(total_books = Count('books')).\
    annotate(published_books = Count('books__published')) 
```

由于`BooleanField`写为 0/1 整数，它可以完成这项工作。或者它可能不会:) 只需在您的代码中尝试。

# vb.net - .Net Silverlight WCF RIA 查询项目计数

> ID：14802440
> 
> 赞同：2
> 
> 时间：2013-02-10T20:52:15.613
> 
> 标签：vb.net, silverlight, wcf-ria-services

我在 Silverlight 应用程序中检索项目计数时遇到问题，要使用来自 sql 的项目填充组合框，我使用以下代码：

```
 objctx = New BanksDomain
        Dim itemType = NameComboBox.SelectedItem.[GetType]()
        Dim pi = itemType.GetProperty(NameComboBox.DisplayMemberPath)
        Dim cbi = pi.GetValue(NameComboBox.SelectedItem, Nothing).ToString()
        Dim BankName As String = cbi

        Dim query As EntityQuery(Of Branches) = objctx.GetBranchesByBankQuery(BankName)
        query.IncludeTotalCount = True
        Dim loadOp As LoadOperation(Of Branches) = Me.objctx.Load(query)

        Branch_NameComboBox.ItemsSource = loadOp.Entities 
```

我尝试从组合框项目计数中获取计数但无济于事，我尝试通过 textbox.text = loadop.entities.count 加载它，但它显示“0”

我不知道出了什么问题，我似乎无法做到，虽然它应该很简单，有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:50:05.483

不要忘记调用 RIA 服务是异步的。因此 load 函数返回一个异步结果。

```
Dim loadOp As LoadOperation(Of Branches) = Me.objctx.Load(query)
Branch_NameComboBox.ItemsSource = loadOp.Entities 
```

然后，如果你在 load 调用后检查你的 itemsSource.count()，它仍然是 0。但是如果你等待异步结果（可能在 load 函数的回调中处理它），你会看到真正的结果请求的值，如果您的请求正确，则不应为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T22:13:53.587

非常感谢哥们，你救了我的命，现在我可以得到计数，如果有一天有人需要，这里是代码：

```
Dim query As EntityQuery(Of Branches) = objctx.GetBranchesByBankQuery(BankName)
            query.IncludeTotalCount = True
            Dim loadOp As LoadOperation(Of Branches) = Me.objctx.Load(query, New Action(Of LoadOperation(Of Branches))(AddressOf GetBranchesCompleted), True)

Then

Private Sub GetBranchesCompleted(args As LoadOperation(Of Branches))

        Branch_NameComboBox.ItemsSource = args.Entities
        NoOfBTextBlock.Text = args.Entities.Count.ToString

    End Sub 
```

再次感谢...

# python - 如何在 python NLTK 中使用正则表达式退避标记器来覆盖 NN？

> ID：14802442
> 
> 赞同：0
> 
> 时间：2013-02-10T20:52:31.400
> 
> 标签：python, nlp, nltk, pos-tagger

我一直在使用经过定制训练的 nltk pos_tagger，有时我会得到明显的动词（以 ING 或 ED 结尾）以 NN 的形式出现。我如何让标记器通过额外的 regexpTagger 处理所有 NN，只是为了找到额外的动词？

我已经包含了一些辅助正则表达式标记器的示例代码。

```
from nltk.tag.sequential import RegexpTagger

rgt = RegexpTagger(
    (r'.*ing$', 'VBG'),                # gerunds
    (r'.*ed$', 'VBD'),                 # past tense verbs
]) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:17:10.023

这是由 bi-gram 支持的 tri_gram 标记器（由 uni-gram 支持），主要的回退跟踪器是正则表达式跟踪器。因此，如果任何其他标记器未能根据此处定义的规则对其进行标记，则此处的最后一个标记将留给正则表达式。希望这可以帮助您构建自己的规则正则表达式标记器。

```
 from nltk.corpus import brown
   import sys
   from nltk import pos_tag
   from nltk.tokenize import word_tokenize
   import nltk
   from nltk import ne_chunk
   def tri_gram():
   ##Trigram tagger done by training data from brown corpus 
    b_t_sents=brown.tagged_sents(categories='news')

   ##Making n-gram tagger using Turing backoff
   default_tagger = nltk.RegexpTagger(
            [(r'^-?[0-9]+(.[0-9]+)?$', 'CD'),   # cardinal numbers
         (r'(The|the|A|a|An|an)$', 'AT'),   # articles
         (r'.*able$', 'JJ'),                # adjectives
         (r'.*ness$', 'NN'),                # nouns formed from adjectives  
         (r'.*ly$', 'RB'),                  # adverbs
         (r'.*s$', 'NNS'),                  # plural nouns  
         (r'.*ing$', 'VBG'),                # gerunds   
         (r'.*ed$', 'VBD'),                 # past tense verbs
         (r'.*', 'NN')                      # nouns (default)
        ])
    u_gram_tag=nltk.UnigramTagger(b_t_sents,backoff=default_tagger) 
    b_gram_tag=nltk.BigramTagger(b_t_sents,backoff=u_gram_tag)
    t_gram_tag=nltk.TrigramTagger(b_t_sents,backoff=b_gram_tag)

    ##pos of given text
    f_read=open(sys.argv[1],'r')
    given_text=f_read.read();
    segmented_lines=nltk.sent_tokenize(given_text) 
    for text in segmented_lines:
        words=word_tokenize(text)
        sent = t_gram_tag.tag(words)
        print ne_chunk(sent)
tri_gram() 
```

# jquery - jQuery切换悬停检测

> ID：14802443
> 
> 赞同：0
> 
> 时间：2013-02-10T20:52:33.037
> 
> 标签：jquery

我的网站上有一个按钮，我想用它来打开和关闭描述框。因此，当单击按钮时，我希望它在您将鼠标悬停在页面上的某些元素上时显示图像预览，但是当取消选择按钮时，它不应该显示任何图像预览。

我创建了一个 jQuery 函数，并根据图像预览窗口是否应该显示给它传递一个布尔值。但是，无论布尔值如何，似乎都在调用悬停函数（ $(".node").hover(function(e)) 。我做错了什么？

```
$('.textIcon').click(function(){

        if(textCount %2 == 0){
                        // show preview images
            imagePreview("true");
            textCount++;
        }
        else{
            // hide preview images
            imagePreview("false");
            textCount++;
        }
    }); 
```

jQuery脚本：

```
<script> 
// create pop up preview box for each step when text labels are off
this.imagePreview = function(on){

    console.log("in imagePreview, on: " + on);  

    /* CONFIG */    
        xOffset = 50;
        yOffset = 140;

        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result

    /* END CONFIG */

    if(on=="true"){
        console.log("ON");
        $(".node").hover(function(e){
            console.log("node hover");
            // title of step
            this.t = $(this).data('title');
            this.title = "";
            // image url of step
            this.href = $(this).data('image');
            // show title + image for preview
            if(this.href != null){
                var c = (this.t != "") ? this.t + "<br>": "";
                $("body").append("<p id='preview'>" + c + "<img src='"+ this.href +"' alt='Image preview' style='margin-top:5px' />" +"</p>");  
            }
            // just show title for preview
            else{
                var c = (this.t != "") ? this.t : "";
                $("body").append("<p id='preview'>"+ c +"</p>");    
            }

            $("#preview")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px")
                .fadeIn("fast");                        

        },
        function(){
            this.title = this.t;    
            $("#preview").remove();
        }); 

        $(".node").mousemove(function(e){
            var dotPosition = $(this).position();
            $("#preview")
                .css("top",(dotPosition.top + xOffset) + "px")
                .css("left",(dotPosition.left + yOffset) + "px");
        }); 
        }
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:03:04.640

每次调用 imagepreview() 时，您都在为悬停事件分配一个函数，而不是尝试分配一次悬停事件并在内部检查它是否应该显示预览。

尝试类似：

```
var showOnHover = false; // determines behaviour

$('.textIcon').click(function(){ showOnHover = !showOnHover;  }); // change behaviour onclick

// we assign it once
$(".node").hover(function(e){
   // we look if we need to do something now
   if (showOnHover){
       // onHover activated
       // do your stuff
   }
   // else shouldn't show
}); 
```

# python - Flask-Security 无法正确初始化

> ID：14802445
> 
> 赞同：2
> 
> 时间：2013-02-10T20:52:54.567
> 
> 标签：python, flask, flask-security

在编写了自己的登录/注册系统后，我发现了[Flask-Security](https://github.com/mattupstate/flask-security/)并决定将其集成到我的应用程序中。我所有的身份验证和恢复代码都消失了，但我无法弄清楚为什么在启动我的应用程序时会出现简单的错误。

这是我能想到的最精简的例子：

```
from flask import Flask, render_template_string

from flask.ext.sqlalchemy import SQLAlchemy
from flask.ext.security import Security, SQLAlchemyUserDatastore, UserMixin, RoleMixin, current_user

app = Flask('test')
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/database.db'

db = SQLAlchemy(app)

roles_users = db.Table('roles_users',
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('role_id', db.Integer, db.ForeignKey('role.id'))
)

class Role(db.Model, RoleMixin):
    id = db.Column(db.Integer(), primary_key=True)
    name = db.Column(db.String(80), unique=True)
    description = db.Column(db.String(255))

class User(db.Model, UserMixin):
    id = db.Column(db.Integer, primary_key=True)

    username = db.Column(db.String(50), unique=True)
    email = db.Column(db.String(255), unique=True)
    password = db.Column(db.String(255))

    active = db.Column(db.Boolean)
    confirmed_at = db.Column(db.DateTime)
    roles = db.relationship('Role', secondary=roles_users, backref=db.backref('users', lazy='dynamic'))

    def is_authenticated(self):
        return True

    def is_active(self):
        return True

    def is_anonymous(self):
        return False

    def get_id(self):
        return unicode(self.id)

    def __repr__(self):
        return '<User {self.username}>'.format(self=self)

user_datastore = SQLAlchemyUserDatastore(db, User, Role)
security = Security(app)

@app.before_first_request
def create_db():
    db.create_all()

@app.route('/')
def index():
    return render_template_string('''
        {% if current_user.is_authenticated() %}
            You're logged in.
        {% else %}
            You're not logged in.
        {% endif %}
    ''')

if __name__ == '__main__':
    app.run(debug=True) 
```

访问`http://localhost:5000/`时，我收到此错误：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/tmp/app.py", line 62, in index
    ''')
  File "/usr/lib/python2.7/site-packages/flask/templating.py", line 140, in render_template_string
    context, ctx.app)
  File "/usr/lib/python2.7/site-packages/flask/templating.py", line 107, in _render
    rv = template.render(context)
  File "/usr/lib/python2.7/site-packages/jinja2/environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "<template>", line 2, in top-level template code

  File "/usr/lib/python2.7/site-packages/jinja2/environment.py", line 372, in getattr
    return getattr(obj, attribute)
UndefinedError: 'current_user' is undefined 
```

我查看了[Flask-Security-Example](https://github.com/mattupstate/flask-security-example)和[Flask-Social-Example](https://github.com/mattupstate/flask-social-example)的来源，但我不知道我在哪里出错了。

非常感谢所有帮助。

* * *

作为一个小问题，为什么这个表是这样创建的，（更重要的是）它是做什么用的？

```
roles_users = db.Table('roles_users',
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('role_id', db.Integer, db.ForeignKey('role.id'))
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:17:20.377

看起来我发现了我的问题*（facepalm）*：

```
security = Security(app) 
```

我应该将数据存储区作为第二个参数传递：

```
security = Security(app, user_datastore) 
```

# emacs - Emacs如何将lslisting逐字呈现

> ID：14802450
> 
> 赞同：5
> 
> 时间：2013-02-10T20:53:15.557
> 
> 标签：emacs

我`lstlisting`在 LaTeX 模式下使用包。有时我在代码中有一个 $ 符号。Emacs 将其视为公式的开始。文档的其余部分变得丑陋：

![在此处输入图像描述](../Images/eef29e849214278bab6ab9f2eb8ce599.png)

在逐字模式下，它会正确呈现特殊符号：

![在此处输入图像描述](../Images/a43e77eb218949335bb4355d38d095b5.png)

如何使其逐字呈现lslisting？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:14:29.707

添加`"lstlisting"`到`LaTeX-verbatim-environments`（使用`M-x customize-variable`）并*重新打开您的文件*。

```
LaTeX-verbatim-environments is a variable defined in `latex.el'.
Its value is ("verbatim" "verbatim*" "lstlisting")
Original value was ("verbatim" "verbatim*")

Documentation:
Verbatim environments. 
```

# ios - Adjust UICollectionView's Width

> ID：14802451
> 
> 赞同：3
> 
> 时间：2013-02-10T20:53:17.737
> 
> 标签：ios, uistoryboard, uicollectionview, viewdeck

I'm using ViewDeck to make a slide menu, and would like to shorten the width of my CollectionView, which functions as a menu. I can't seem to find any delegate methods to do so though.

I'm using Storyboards, and this is my issue:

![enter image description here](../Images/2c5f5f7e355b9207b7f4683789672c2b.png)

Perhaps some sort of setup using? :

> *   (UIEdgeInsets)collectionView: (UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:12:10.460

ViewDeck 中有一个`IISideController`。它了解 viewdeck，并且是专门为这种情况而设计的。它会将包含的 viewcontroller 视图的大小调整为 viewdeck 窗台的大小（或用户指定的大小）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T21:00:41.450

我会留下这个，因为我很难找到答案，但是把它扔到我的`UICollectionViewController`子类`viewDidLoad`中就可以了：

`self.collectionView.frame = CGRectMake(0, 0, 268, self.view.frame.size.height);`

其中 268 = 屏幕宽度 (320) - 我的菜单栏的宽度 (52)。

# php - Store CSV column and Rows as php variable

> ID：14802452
> 
> 赞同：1
> 
> 时间：2013-02-10T20:53:20.057
> 
> 标签：php, csv, generator

I have a semi-large CSV file with 2,000 rows and about 25 columns. I need to know how to convert the cells to a variable. If even possible. IE convert cell A3 to a php variable then which I can echo out when a user clicks a button. Sort of a Generator I'm making.

I could not find anything of real use on the internet.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:05:14.820

PHP 有一个功能：[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php). 您使用它返回文件资源中的下一行（然后推进指针）。它将返回一个数组，其中每个元素都是 CSV 中的一个字段。

你会像这样使用它：

```
$csv = array();

if (FALSE !== $handle = fopen("example.csv", "r"))
{

  while (FALSE !== $row = fgetcsv($handle))
  {
    $csv[] = $row;
  }

} 
```

然后，您可以执行以下操作，假设 CSV 中的第一行包含列标题，以将数值数组转换为关联数组：

```
$new_csv = array();

foreach ($csv as $row)
{

  $new_row = array();

  for ($i = 0, $n = count($csv[0]); $i < $n; ++$i)
  {
    $new_row[$csv[0][$i]] = $row[$i]; 
  }

  $new_csv[] = $new_row;

} 
```

然后，如果您想访问第一行的“名称”列（其中“第零”行是列标题），您可以调用`$new_csv[1]['name']`. 或者，如果没有标题行，并且您知道“名称”列是第一列，则可以调用`$csv[0][0]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:56:12.837

看一下[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)and[`str_getcsv`](http://www.php.net/manual/en/function.str-getcsv.php)方法（参见示例链接）。

# java - Mac OS X 中的 SIGAR For Java 似乎被锁定了

> ID：14802456
> 
> 赞同：0
> 
> 时间：2013-02-10T20:53:36.387
> 
> 标签：java, macos, compilation, freeze, sigar

我一直在尝试编写一个简单的 CPU 利用率监视器作为大型项目的概念证明。我正在用 Eclipse Juno 写作。当我按下“运行”时，我的应用程序按预期工作——CPU 利用率显示为每秒更新一次的百分比。但是，当我将它导出到可执行 jar 时，应用程序似乎被锁定了——它从不显示百分比，也从不更新。我已经确定 GUI 很好，但是由于某些莫名其妙的原因，我的 cpuUtilization 方法永远不会返回百分比而不会抛出异常。更奇怪的是，这个问题只发生在程序导出时。SIGAR 的文档非常糟糕，但我认为我正确使用了它。程序的所有其余部分似乎都可以工作，所以我只包含 CPUReader 类。它是在构造CPUMonitorGUI类时构造的，CPUMonitorGUI每秒调用一次cpuUtilization。一些附加说明：我导入了 sigar.jar 但没有导入 log4j.jar。这样做没有任何区别。此外，在 Eclipse 中，我在导出时选择了“将所需的库打包到生成的 JAR 中”。

```
package cpuperc;
import org.hyperic.sigar.CpuPerc;
import org.hyperic.sigar.SigarException;
import org.hyperic.sigar.Humidor;
import org.hyperic.sigar.SigarProxy;

public class CPUReader
{
    static Humidor h;
    public CPUReader()
    {
        h = Humidor.getInstance();
    }
    public double cpuUtilization() throws SigarException 
    {
        //Returns CPU utilization as truncated two-decimal percent  
        SigarProxy sp = h.getSigar(); 
        CpuPerc cp = sp.getCpuPerc(); 
        double combined; 
        double total; 
        double idle;  
        double percentUsed; 
        int truncate = 0;  
        //get CPU times
        combined = cp.getCombined(); 
        idle = cp.getIdle(); 
        total = idle + combined; 
        //determine percent and truncate
        percentUsed = ((double)combined/total)*100;  
        truncate = (int)(percentUsed*100.0);
        percentUsed = (double)truncate/100; 
        return(percentUsed);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:42:28.987

经过更多的实验，我发现该程序正在冻结，因为它正在寻找特定于操作系统和体系结构的 SIGAR 库。在这种情况下，它需要 64 位通用 Mac OS X 驱动程序。然而，SIGAR 将这些作为 .dylib 文件提供，Eclipse 拒绝加载这些文件。.dylib 文件必须打包在一个 .zip 存档中，然后将其添加到 Eclipse 构建路径中。

# php - 带有日期时间和组的php计数mysql

> ID：14802462
> 
> 赞同：0
> 
> 时间：2013-02-10T20:53:49.413
> 
> 标签：php, mysql, date, group-by

我有一个存储访问者的 mysql 数据库。

```
id        ip             date
--     -----------    ------------------   
1      192.168.0.1    2013-02-08 12:12:04
2      192.168.0.1    2013-02-08 14:30:00
3      192.168.0.1    2013-02-09 16:43:46
4      192.168.0.1    2013-02-10 08:35:02 
```

这是我正在使用的简化版本，但概念是相同的。我希望能够获取访问者的数量并按时间间隔在图表中显示它们。我使用以下数组设计来填充图表，其中 0、1、2、3 是 x 轴，24、74、26、51 是 y 轴。

```
 [[0, 24], [1, 74], [2, 26], [3, 52]] 
```

例如，我曾尝试使用来自堆栈问题的查询，[但](https://stackoverflow.com/questions/6529245/how-to-select-unique-visitors-per-date-interval)我无法让它与 Group by 一起使用。任何帮助将不胜感激。

```
 $query = "SELECT COUNT(id) FROM  `unique_visitors_user` WHERE DATE(date) BETWEEN '2013-02-08' AND '2013-02-10' "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:10:41.203

试试这个：

```
SELECT 
    DATE_FORMAT(date, '%Y-%m-%d') Date1, COUNT(*) AS Visitors
FROM
    unique_visitors_user
WHERE
    date BETWEEN STR_TO_DATE('%Y-%m-%d', '2013-02-08') AND STR_TO_DATE('%Y-%m-%d', '2013-02-10')
GROUP BY Date1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:37:30.440

这个应该按天计算所有访问

```
SELECT COUNT(id)
FROM `unique_visitors_user`
WHERE date >= "2013-01-01" 
AND date < DATE_ADD("2013-01-01", INTERVAL 1 DAY)
GROUP BY DAY(date) 
```

# c - 读取txt文件中的数字列表并存储到C中的数组

> ID：14802470
> 
> 赞同：4
> 
> 时间：2013-02-10T20:54:16.317
> 
> 标签：c, arrays

我有一个整数列表，每行一个数字，并希望将这些数字中的每一个存储在一个整数数组中，以便稍后在程序中使用。

例如在java中你会做这样的事情：

```
FileReader file = new FileReader("Integers.txt");
int[] integers = new int [100];
int i=0;
while(input.hasNext())
{
   integers[i] = input.nextInt();
   i++;
}
input.close(); 
```

这将如何在 C 中完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:04:08.983

试一试。如果您阅读这些函数（fopen()、scanf()、fclose()）中的每一个的手册页以及如何在 C 中分配数组，您会感觉更好。您还应该为此添加错误检查。例如，如果 Integers.txt 不存在或者您没有读取它的权限会怎样？如果文本文件包含超过 100 个数字怎么办？

```
 FILE *file = fopen("Integers.txt", "r");
    int integers[100];

    int i=0;
    int num;
    while(fscanf(file, "%d", &num) > 0) {
        integers[i] = num;
        i++;
    }
    fclose(file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:04:07.987

```
#include <stdio.h>

int main (int argc, char *argv[]) {
  FILE *fp;
  int integers[100];
  int value;
  int i = -1; /* EDIT have i start at -1 :) */

  if ((fp = fopen ("Integers.txt", "r")) == NULL)
    return 1;

  while (!feof (fp) && fscanf (fp, "%d", &value) && i++ < 100 )
    integers[i] = value;

  fclose (fp);

  return 0;
} 
```

# php - php str_replace 如果 filename.jpg 是随机文本

> ID：14802472
> 
> 赞同：0
> 
> 时间：2013-02-10T20:54:35.577
> 
> 标签：php, random, str-replace

我有图像搜索目录，我使用文件名作为标题。

例如，如果图像文件名是：foo-bar.jpg，那么标题是：“Foo Bar”。

现在，如果我得到像 xkd345724dADGgxSDgSdgadD.jpg 这样的随机文件名，那么标题将是“xkd345724dADGgxSDgSdgadD”，并将其替换为“Foo Bar”。

像这样的一些php代码？

```
$searchimg = "Foo Bar";
$filename = "xkd345724dADGgxSDgSdgadD.jpg";

if $filename == random {
$title = str_replace (randomtext, $searchimg, $filename);
}else{
$title = $filename;
} 
```

提前致谢。

# windows - 如何从 Delphi 中的已知文件夹 GUID 获取文件夹路径

> ID：14802473
> 
> 赞同：7
> 
> 时间：2013-02-10T20:54:39.717
> 
> 标签：windows, delphi, winapi, delphi-7, known-folders

我有一个`KNOWNFOLDERID`，我想知道相应的路径，如 C:....\folder。

`KNOWNFOLDERID`可以在这里找到。 [http://msdn.microsoft.com/en-us/library/bb762584%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb762584%28VS.85%29.aspx)

我想**使用 win api** （我不想构建一个包含所有 KNOWNFOLDERID 和路径的数组）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:30:10.760

只需调用[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/bb762188.aspx)API 函数。

由于这个函数是在 Vista 中添加的，它不会在 Delphi 7 附带的库单元中声明。所以你需要自己声明它。

```
type
  KNOWNFOLDERID = TGuid;

function SHGetKnownFolderPath(
  const rfid: KNOWNFOLDERID;
  dwFlags: DWORD; 
  hToken: THandle; 
  out ppszPath: PWideChar
): HResult; stdcall; external 'Shell32.dll'; 
```

现在，由于这个函数是在 Vista 中添加的，尝试在 XP 上调用它会导致失败。因此，我建议使用 CSIDL 函数而不是 Vista 已知文件夹 API 来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:24:11.920

您无法构建已知文件夹 ID 和路径的数组，因为无法保证每个系统中的路径都相同。已知文件夹有默认路径，但它们只是默认值，可以更改。许多公司环境这样做是为了，例如，将用户的文档文件夹移动到可以更轻松地备份的网络共享。

无论如何，您提供的链接中的链接包含您需要的所有信息：

[SHGetKnownFolderPath](http://msdn.microsoft.com/en-us/library/bb762188%28v=vs.85%29.aspx)是返回已知文件夹路径的 Win API 函数。请注意，您需要通过调用 CoTaskMemFree 释放自己返回的 unicode char 指针。

如果您更喜欢使用 COM 对象，则可以改用[IKNOWNFOLDER](http://msdn.microsoft.com/en-us/library/bb761768%28v=vs.85%29.aspx)。

# c# - c#公共字符串传递给函数

> ID：14802476
> 
> 赞同：2
> 
> 时间：2013-02-10T20:54:54.227
> 
> 标签：c#, asp.net

我有下面的代码，并试图访问 lnkSave_Click 函数中的“文本”字符串，但文本似乎无法从 lnkSave_Click 函数访问，它似乎总是空的。

```
private string _text = "";
    public string text
    {
        get { return _text; }
        set { _text = value; }
    }

protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
             text = "Hello World!";
            }
        }

protected void lnkSave_Click(object sender, EventArgs e)
        {
            if (text == "Hello World!")
            {
            ... do things..
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T20:59:17.810

当它为空时，它**是**可访问的。它总是为空的原因是它是一个字段。ASP.NET 页面中的每个对象都在生命周期结束时被释放。所以它会`""`在每次回发时被初始化。

您可以使用 ViewState 来保存值：

```
public string text
{
    get { if(ViewState["text"]==null)ViewState["text"]=""; return (String)ViewState["text"]; }
    set { ViewState["text"] = value; }
} 
```

[**在 ASP.NET 应用程序中管理持久用户状态的九个选项**](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

# ruby - 从 Web 请求读取的字符串中删除重音符号

> ID：14802477
> 
> 赞同：1
> 
> 时间：2013-02-10T20:54:58.477
> 
> 标签：ruby, encoding

我正在开发一个小型网络爬虫...我遇到了口音问题，例如，当我控制台（cmd.exe）向我显示 时，如果网页有一个`Apuntó`单词，我认为它与cmd 编码，但是当我将其打印到文件中时，我得到了确切的 单词...`puts``apunt├│``apunt├│`

如果我做一个`puts "apuntó"`输出是正确的，我得到`apuntó`

知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T23:06:17.877

# highcharts - Highcharts：保持饼图_排序_

> ID：14802479
> 
> 赞同：0
> 
> 时间：2013-02-10T20:55:15.957
> 
> 标签：highcharts

我试图保持饼图按其切片的递减值*排序。*

例如，如果我们从一个系列开始：`[['foo', 4], ['bar', 2], ['baz', 1]]`并且我们收到一个更新，告诉我们切片`bar`现在有 8 个单位大，我想按如下方式更新系列`[['bar', 8], ['foo', 4], ['baz', 1]]`：

在文档中，我发现了两种不同的方法来解决这个问题：`series.setData`和`Point.update()`. 前者的问题在于它不会触发任何动画：它只是用新的点集替换系列的内容。对于后者，我在尝试保持图例和图表同步时遇到了麻烦：http: [//jsfiddle.net/gnCSY/17/](http://jsfiddle.net/gnCSY/17/)

一旦图表的所有点都更新了，有没有办法更新图例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:30:42.410

我不确定这个动画应该是什么样子（如何使一个系列比另一个系列增长更多）。但是，您可以简单地重新创建图表，请参阅：http: [//jsfiddle.net/gnCSY/19/](http://jsfiddle.net/gnCSY/19/)

```
 if(chart)
        chart.destroy();
    options.series[0].data = new_data;
    chart = new Highcharts.Chart(options); 
```

# javascript - 获取带有索引的 JS 对象的元素

> ID：14802481
> 
> 赞同：53
> 
> 时间：2013-02-10T20:55:31.803
> 
> 标签：javascript, object

好的，假设我有我的对象

```
myobj = {"A":["Abe"], "B":["Bob"]} 
```

我想从中得到第一个元素。正如我希望它返回`Abe`索引为`A`. 我该如何做一些事情`myobj[0]`并摆脱“安倍”。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2014-07-17T08:26:49.130

我知道这是一个迟到的答案，但我认为这是 OP 所要求的。

```
myobj[Object.keys(myobj)[0]]; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-10T20:57:17.373

JS 对象没有定义的顺序，它们（根据定义）是一组*未排序*的键值对。

如果“第一个”是指“按字典顺序排列的第一个”，则可以使用：

```
var sortedKeys = Object.keys(myobj).sort(); 
```

然后使用：

```
var first = myobj[sortedKeys[0]]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-19T20:31:57.897

```
myobj = {"A":["Abe"], "B":["Bob"]}

Object.keys(myobj)[0];  //return the key name at index 0
Object.values(myobj)[0]  //return the key values at index 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-28T09:15:03.860

```
var myobj = {"A":["Abe"], "B":["Bob"]};

var keysArray = Object.keys(myobj);

var valuesArray = Object.keys(myobj).map(function(k) {

   return String(myobj[k]);

});

var mydata = valuesArray[keysArray.indexOf("A")]; // Abe 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T20:59:26.583

```
myobj.A 
```

- - - - 或者 - - - - -

```
myobj['A'] 
```

会给你'B'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-19T10:37:35.287

```
$.each(myobj, function(index, value) { 
    console.log(myobj[index]);
}); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-10T20:59:51.120

如果你想要一个特定的顺序，那么你必须使用一个数组，而不是一个对象。对象没有定义的顺序。

例如，使用数组，您可以这样做：

```
var myobj = [{"A":["B"]}, {"B": ["C"]}];
var firstItem = myobj[0]; 
```

然后，您可以使用 myobj[0] 获取数组中的第一个对象。

或者，取决于您要执行的操作：

```
var myobj = [{key: "A", val:["B"]}, {key: "B",  val:["C"]}];
var firstKey = myobj[0].key;   // "A"
var firstValue = myobj[0].val; // "["B"] 
```

# java - 在Java中生成GS1数据栏扩展条码？

> ID：14802482
> 
> 赞同：1
> 
> 时间：2013-02-10T20:55:39.787
> 
> 标签：java, rss, barcode, zxing

我不想生成扩展 GS1 数据栏类型的条形码。我在谷歌中搜索并没有找到真正有效的结果。我发现 ZXing 可以生成不同的条形码。我写了一个小代码，我可以为 ean128 生成条形码。

```
package de..barcodee128;
import java.io.File;
import java.io.FileOutputStream;
import com.google.zxing.BarcodeFormat;
import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageWriter;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.oned.Code128Writer;
import com.google.zxing.oned.Code39Writer;
import com.google.zxing.oned.OneDimensionalCodeWriter;
import com.google.zxing.oned.rss.expanded.decoders.AbstractExpandedDecoder;

public class barcode128 {
    public static void main(String[] args) {

           int width = 440; 
           int height = 48;

           BitMatrix bitMatrix;
        try {
            bitMatrix = new Code128Writer().encode("10400550006232515201231",BarcodeFormat.RSS_EXPANDED,width,height,null);
            MatrixToImageWriter.writeToStream(bitMatrix, "png", new FileOutputStream(new File("C:\\Users\\fecub\\Desktop\\zxing_barcode.png")));
        } catch (WriterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

    }

} 
```

但我的问题是如何修改此代码以使我能够创建 GS1 数据条扩展条码？任何想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:37:48.453

GS1 Databar Expanded 只是 RSS Expanded 格式子集的营销名称。这些由项目读取，但不写入，不。

# html - apache设置将web url重定向到本地主机进行测试

> ID：14802484
> 
> 赞同：0
> 
> 时间：2013-02-10T20:55:48.150
> 
> 标签：html, apache, localhost, http-redirect

我确定这是在外面，但对于我的生活，我找不到它。可能 b/c 它是如此简单和明显，我只是想念它。我的所有 css、includes 和 php 文件都由本地测试服务器上的相对路径和我的 Web 服务器上的相同文件结构引用，因此它们是同步的。但是我如何告诉我的本地服务器重定向我的 html 中的任何链接说“c:\wamp\test_server\”而不是像“www.example.com”这样的实际链接？这样，链接将在两种环境中都有效，我不必返回并更改所有链接。但是，当我想检查实时站点时，我必须关闭我的网络服务器，以免它重定向到我的本地机器？

有任何想法吗？每个人都使用的事实上的解决方案是什么？我保证我花了太多时间寻找这个问题的答案，所以我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:37:25.167

这里最常用的解决方案是在代码中只使用相对 URL，而不是绝对 URL。如果您未在代码中提及实时站点的域，则将无法访问它。

例如，而不是：

```
<link rel="stylesheet" href="http://www.example.com/blah/style.css"> 
```

利用：

```
<link rel="stylesheet" href="/blah/style.css"> 
```

# php - HTML 表单错误处理

> ID：14802485
> 
> 赞同：0
> 
> 时间：2013-02-10T20:55:49.967
> 
> 标签：php, html, forms

我在另一个问题（[在每个字段旁边显示表单验证错误](https://stackoverflow.com/questions/11237655/display-form-validation-errors-next-to-each-field)）发现了以下代码：

```
 <?php
        $error = array(
            "name" => "",
            "email" => "",
            "subject" => "",
            "message" => ""
        );
    ?>

    <?php
        if (empty($_POST["email"]))
            $error["email"] = "Email is required!";
        elseif (!isEmail($_POST["email"]))
            $error["email"] = "Not a Valid Email!";
    ?> 
```

如果没有错误，它将为空，并且用户不会看到错误消息。

在您的表单代码中，您只需以这种方式更新：

```
 <small class="errorText"><?php echo $error["name"]; ?></small>
    <small class="errorText"><?php echo $error["email"]; ?></small> 
```

在后端的位置，`$error["email"]`将有`"This field is required"`or `"Not a valid email address!"`。

我试图将此应用于我的代码：

所以我将上面的 php 部分粘贴到 email.php 中，并像这样更新了我的表单：

```
 <form id="contacts-form" method="post" action="email.php" target="myiframe" >
       <fieldset>
       <div class="field">
          <label>Your E-mail:</label>
          <input type="email" name="email" value=""/>
          <small class="errorText"><?php echo $error["email"]; ?></small>
       </div>
       ... 
```

现在我得到一个错误，说 $error 没有定义。请记住，我是 php/HTML 设计的新手，我正在尝试通过示例学习

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:06:58.403

首先你应该修复这条线，

```
if (empty()$_POST["email"]) 
```

它应该是

```
if (empty($_POST["email"])) 
```

其次，显示错误是因为您可能没有在表单中定义 $error。要检查是否已定义错误，您可以像这样使用它

```
<?php echo isset($error['name'])?$error['name']:""; ?> 
```

另外请注意，要显示此设置的错误，您应该将表单指向表单所在的同一文件。

[在此处](http://php.net/manual/en/function.isset.php)阅读有关 isset的信息

[在此处](http://www.php.net/ternary#language.operators.comparison.ternary)阅读语法

# vlc - 使用 VLC 播放 RTP

> ID：14802490
> 
> 赞同：6
> 
> 时间：2013-02-10T20:56:20.730
> 
> 标签：vlc, rtp, sdp

我目前有一个 Android 应用程序，它正在从相机捕获视频并通过 RTP 流式传输。我不使用 RTSP。

我创建了一个描述 RTP 提要的 SDP 文件。我可以在 Quicktime 7 中打开 SDP 文件并且可以看到流，尝试在 VLC 中打开 SDP 文件不起作用。我收到以下错误：

> live555 demux 错误：10 秒内没有收到数据，正在中止

我正在使用 Wireshark 监控 RTP 数据包，并且可以看到网络上的数据包（参见下面的示例）：

```
281956  2545.589171000  10.0.1.25   10.0.1.150  UDP 1442    Source port: 54405  Destination port: 51372 
```

Quicktime 7 似乎没有问题绑定到 SDP 中的目标端口并播放流，但我在尝试使用 VLC 时看到以下 ICMP 数据包：

```
286674  2925.162140000  10.0.1.150  10.0.1.25   ICMP    70  Destination unreachable (Port unreachable) 
```

我的 SDP 文件包含：

```
v=0
o=- 1360349812962 1360349812962 IN IP4 10.0.1.25
s=Unnamed
i=N/A
c=IN IP4 10.0.1.150
t=0 0
a=recvonly
m=video 51372 RTP/AVP 96
b=RR:0
a=rtpmap:96 H264/90000
a=fmtp:96 packetization-mode=1;profile-level-id=42c01e;sprop-parameter sets=Z0LAHukBQHsg,aM4G4g==; 
```

我需要做什么才能让流在 VLC 中播放？我尝试在启动 VLC 时使用参数“--rtp-client-port=51326”，但似乎没有什么不同。

**更新 1**

看起来 VLC（至少我使用它的方式）不使用您在 SDP 中指定的客户端端口，它总是分配它自己的端口，它期望 RTP 数据包在其上传递。我改变了我的方法，允许我从 VLC 捕获端口并使用该端口作为目标启动我的 RTP 提要，并且它有效。这不是一个理想的解决方案。

有谁知道如何让 VLC 使用 SDP 文件中的目标端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:07:01.347

VLC 将下面参数（51372）中提到的端口作为目标端口。

> m=视频 51372 RTP/AVP 96

我已经尝试使用音频捕获。

您应该只需要使用此 SDP 配置播放该 sdp 文件而无需任何参数。

# java - Java-使用 JSoup 抓取动态网站

> ID：14802493
> 
> 赞同：3
> 
> 时间：2013-02-10T20:56:22.420
> 
> 标签：java, applet, jsoup

我想用 JSoup 抓取一个网站。这个网站是动态的，大约每秒更新一次。我很确定它使用 JQuery，它会更新 HTML 中的一些标签。我正在使用 JSoup，但动态区域是空白的。JSoup 有什么特别的东西可以解决这个问题吗？或者这是一个限制？编辑：我打算把它放在我网站上的 Java 小程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:04:11.013

听起来您希望 JSoup 表现得像一个支持 JavaScript 的浏览器。恐怕这行不通。JSoup 是一个可以执行 HTTP 请求的工具，然后将响应体用于一些有用的事情。

这个“有用的东西”是从响应中的 (X)HTML 文本中提取信息。如果您想在加载注入 JavaScript 的 HTML 页面（=动态网页）之后获取后续 ajax-request 的内容，您需要自己建模这些后续请求并指示 JSoup 为您手动执行这些请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:27:14.097

1.  **Selenium WebDriver** 在真实浏览器中打开页面
2.  使用 Selenium WebDriver API 处理元素并获取其内容 - 您甚至可以在页面的上下文中调用 JS 代码
3.  用JSoup等解析

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T02:41:09.787

HTMLUnit 是一个基于 java 的无窗口浏览器，它支持我在一些报废项目中使用过的 javascript，它运行良好，有时在大型操作中有点慢。它还支持代理。 [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)

# validation - Android：Saripaar 验证库。需要从 strings.xml 设置错误信息

> ID：14802495
> 
> 赞同：6
> 
> 时间：2013-02-10T20:56:39.333
> 
> 标签：validation, user-interface, android-annotations, saripaar

我正在使用 Saripaar 验证库[https://github.com/ragunathjawahar/android-saripaar](https://github.com/ragunathjawahar/android-saripaar)来验证其中一种形式。该库非常有用，因为它避免了用于验证表单的大量样板代码。但是，该库在小部件上使用注释。下面是一个例子：

```
@Password(order = 1)
@TextRule(order = 2, minLength = 6, message = "Enter at least 6 characters.")
private EditText passwordEditText; 
```

order 属性是指定验证发生顺序的属性。这是我的问题：消息属性采用常量表达式。我需要从字符串资源文件中设置它。这样错误消息可以在以后国际化。我已经在下面尝试过：

```
message = getResources().getString(R.string.err_msg) 
```

但它似乎不起作用，因为它需要编译时间常数。

任何人都可以帮助我或指导我解决问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T19:03:39.760

使用此语法：

```
//private variable in the class declaration section
private EditText txtFirstName=null; 
@Required(order = 2,  messageResId  = R.string.err_required_field) 
```

它在 lib 的文档中（并且 lib 本身就是一个优秀的文档）。

# php - 如何显示 Wordpress 搜索结果？

> ID：14802498
> 
> 赞同：39
> 
> 时间：2013-02-10T20:56:50.613
> 
> 标签：php, wordpress, search

我花了很多时间弄清楚为什么我的搜索在我的自定义模板中不起作用。到目前为止，我能够弄清楚如何在我的标题中包含 searchform.php 文件，创建了当前为空的 search.php 文件（所以当我搜索某些内容时，我被重定向到一个空白页面，我想我肯定需要 search.php 文件中的某些内容才能使其正常工作），我正在阅读所有 Wordpress codex 但找不到解决方案，我发现的唯一有用信息就是这个。

[http://codex.wordpress.org/Creating_a_Search_Page](http://codex.wordpress.org/Creating_a_Search_Page)

你能建议为了显示搜索结果需要做什么吗？是否有特殊的查询、功能等？我真的在任何地方都找不到。

我的**searchform.php**文件以备不时之需。

```
<form action="<?php echo home_url(); ?>" id="search-form" method="get">
    <input type="text" name="s" id="s" value="type your search" onblur="if(this.value=='')this.value='type your search'"
    onfocus="if(this.value=='type your search')this.value=''" />
    <input type="hidden" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-05-06T11:56:28.983

您需要在 search.php 中包含 Wordpress 循环，这是示例

**search.php**模板文件：

```
<?php get_header(); ?>
<?php
$s=get_search_query();
$args = array(
                's' =>$s
            );
    // The Query
$the_query = new WP_Query( $args );
if ( $the_query->have_posts() ) {
        _e("<h2 style='font-weight:bold;color:#000'>Search Results for: ".get_query_var('s')."</h2>");
        while ( $the_query->have_posts() ) {
           $the_query->the_post();
                 ?>
                    <li>
                        <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                    </li>
                 <?php
        }
    }else{
?>
        <h2 style='font-weight:bold;color:#000'>Nothing Found</h2>
        <div class="alert alert-info">
          <p>Sorry, but nothing matched your search criteria. Please try again with some different keywords.</p>
        </div>
<?php } ?>

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-10T21:04:33.587

基本上，您需要在 search.php 模板中包含 Wordpress 循环来循环搜索结果并将它们显示为模板的一部分。

下面是来自ThemeShaper[的 WordPress 主题搜索模板和页面模板的一个非常基本的示例。](http://themeshaper.com/2012/11/06/the-wordpress-theme-search-template-and-page-template/)

```
<?php
/**
 * The template for displaying Search Results pages.
 *
 * @package Shape
 * @since Shape 1.0
 */

get_header(); ?>

        <section id="primary" class="content-area">
            <div id="content" class="site-content" role="main">

            <?php if ( have_posts() ) : ?>

                <header class="page-header">
                    <h1 class="page-title"><?php printf( __( 'Search Results for: %s', 'shape' ), '<span>' . get_search_query() . '</span>' ); ?></h1>
                </header><!-- .page-header -->

                <?php shape_content_nav( 'nav-above' ); ?>

                <?php /* Start the Loop */ ?>
                <?php while ( have_posts() ) : the_post(); ?>

                    <?php get_template_part( 'content', 'search' ); ?>

                <?php endwhile; ?>

                <?php shape_content_nav( 'nav-below' ); ?>

            <?php else : ?>

                <?php get_template_part( 'no-results', 'search' ); ?>

            <?php endif; ?>

            </div><!-- #content .site-content -->
        </section><!-- #primary .content-area -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-11T00:30:01.247

如前所述， 我正在使用`searchform.php`和文件，但在这里我提供了实际代码。`search.php`

[在此处创建搜索页面](http://codex.wordpress.org/Creating_a_Search_Page) `codex`页面会有所帮助并`#Creating_a_Search_Page_Template`显示搜索查询。

就我而言，我将`$search_query`参数传递给[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query) `Class`（它可以确定是否是搜索查询！）。然后我运行[循环](http://codex.wordpress.org/The_Loop)来显示我想要的帖子信息，在我的例子中是[the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)和`the_title`.

搜索框形式：

```
<form class="search" method="get" action="<?php echo home_url(); ?>" role="search">
  <input type="search" class="search-field" placeholder="<?php echo esc_attr_x( 'Search …', 'placeholder' ) ?>" value="<?php echo get_search_query() ?>" name="s" title="<?php echo esc_attr_x( 'Search for:', 'label' ) ?>" />
  <button type="submit" role="button" class="btn btn-default right"/><span class="glyphicon glyphicon-search white"></span></button>
</form> 
```

`search.php`模板文件：

```
<?php
    global $query_string;
    $query_args = explode("&", $query_string);
    $search_query = array();

    foreach($query_args as $key => $string) {
      $query_split = explode("=", $string);
      $search_query[$query_split[0]] = urldecode($query_split[1]);
    } // foreach

    $the_query = new WP_Query($search_query);
    if ( $the_query->have_posts() ) : 
    ?>
    <!-- the loop -->

    <ul>    
    <?php while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
        <li>
            <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
        </li>   
    <?php endwhile; ?>
    </ul>
    <!-- end of the loop -->

    <?php wp_reset_postdata(); ?>

<?php else : ?>
    <p><?php _e( 'Sorry, no posts matched your criteria.' ); ?></p>
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-10T21:23:05.957

`theme`检查文件夹中的模板是否包含`search.php`和`searchform.php`不包含。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-06T09:14:29.937

WordPress 在搜索结果中包含标签、类别和分类法

此代码取自[http://atiblog.com/custom-search-results/](http://atiblog.com/custom-search-results/)

这里的一些功能取自二十九主题。因为它是在这个主题上制作的。

此代码示例将帮助您在搜索中包含标签、类别或任何自定义分类。并显示包含这些标签或类别的帖子。

您需要修改您的主题的 search.php 才能这样做。

```
<?php
$search=get_search_query();
$all_categories = get_terms( array('taxonomy' => 'category','hide_empty' => true) ); 
$all_tags = get_terms( array('taxonomy' => 'post_tag','hide_empty' => true) );
//if you have any custom taxonomy
$all_custom_taxonomy = get_terms( array('taxonomy' => 'your-taxonomy-slug','hide_empty' => true) );

$mcat=array();
$mtag=array();
$mcustom_taxonomy=array();

foreach($all_categories as $all){
$par=$all->name;
if (strpos($par, $search) !== false) {
array_push($mcat,$all->term_id);
}
}

foreach($all_tags as $all){
$par=$all->name;
if (strpos($par, $search) !== false) {
array_push($mtag,$all->term_id);
}
}

foreach($all_custom_taxonomy as $all){
$par=$all->name;
if (strpos($par, $search) !== false) {
array_push($mcustom_taxonomy,$all->term_id);
}
}

$matched_posts=array();
$args1= array( 'post_status' => 'publish','posts_per_page' => -1,'tax_query' =>array('relation' => 'OR',array('taxonomy' => 'category','field' => 'term_id','terms' =>$mcat),array('taxonomy' => 'post_tag','field' => 'term_id','terms' =>$mtag),array('taxonomy' => 'custom_taxonomy','field' => 'term_id','terms' =>$mcustom_taxonomy)));

$the_query = new WP_Query( $args1 );
if ( $the_query->have_posts() ) {
while ( $the_query->have_posts() ) {
$the_query->the_post();
array_push($matched_posts,get_the_id());
//echo '<li>' . get_the_id() . '</li>';
}
wp_reset_postdata();
} else {

}

?>
<?php
// now we will do the normal wordpress search
$query2 = new WP_Query( array( 's' => $search,'posts_per_page' => -1 ) );
if ( $query2->have_posts() ) {
while ( $query2->have_posts() ) {
$query2->the_post();
array_push($matched_posts,get_the_id());
}
wp_reset_postdata();
} else {

}
$matched_posts= array_unique($matched_posts);
$matched_posts=array_values(array_filter($matched_posts));
//print_r($matched_posts);
?>

<?php
$paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
$query3 = new WP_Query( array( 'post_type'=>'any','post__in' => $matched_posts ,'paged' => $paged) );
if ( $query3->have_posts() ) {
while ( $query3->have_posts() ) {
$query3->the_post();
get_template_part( 'template-parts/content/content', 'excerpt' );
}
twentynineteen_the_posts_navigation();
wp_reset_postdata();
} else {

}
?> 
```

# sqlite - 从加入或组中查找第一行

> ID：14802507
> 
> 赞同：2
> 
> 时间：2013-02-10T20:57:29.073
> 
> 标签：sqlite, join, group-by, return

我有一个存储订单元数据的订单表，包括他们的日期，示例数据如下

```
date      |order-id
2010-12-16|106
2010-12-18|112
2009-03-05|115
2009-03-05|122 
```

现在我需要创建文件夹，将同一个月的所有订单分组，并选择当月的第一个订单作为展示，但它似乎总是在下面的查询中选择最后一行

```
SELECT orders.id, order.date from orders
GROUP BY strftime('%Y-%m', orders.date) 
```

它返回每个月的最后一行

```
2010-12-18|112
2009-03-05|122 
```

所以我希望它回来

```
2010-12-16|106   
2009-03-05|115 
```

（106：本月早些时候）
（115：与另一个日期相同，但如果我对该月进行排序查询，这将匹配第一个日期）

我尝试了 JOIN 查询，如果我在同一天没有多个订单，它可以工作，但在 2009-03 的情况下，它仍然返回最后一行，而不是第一行......

```
SELECT o.id, o.date
FROM orders o
JOIN 
   (SELECT MIN(date) as first_date FROM orders 
    GROUP BY strftime('%Y-%m', orders.date)
   ) as sorted_orders
ON o.creation_date=sorted_order.first_date
GROUP BY strftime('%Y-%m', orders.date) 
```

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T22:12:54.657

您的第二个查询不起作用，因为您实际上没有从`sorted_orders`子查询中选择任何列。

无论如何，如果您有 SQLite 3.7.11 或更高版本，`GROUP BY`则查询中的记录保证来自与该组匹配的组中的记录`MIN`或`MAX`该组：

```
SELECT id, MIN(date)
FROM orders
GROUP BY strftime('%Y-%m', date) 
```

# c# - 有没有更好的方法来使用 MVVM 模式更新 WPF 中 VisualCollection 主机中的 DrawingVisual？

> ID：14802509
> 
> 赞同：7
> 
> 时间：2013-02-10T20:57:53.397
> 
> 标签：c#, wpf, mvvm

我正在开发 WPF 中的一个项目，该项目每秒最多更新 30 次视图。据我所知，我正在使用 MVVM 模式，并且对目前的结果非常满意。但是我想知道是否没有更有效的方法来更新我的宿主容器的 VisualCollection 中的 DrawingVisuals。在我的视图模型中的每个属性更改时，我都会发现，删除然后为该视图模型重新添加一个新的 DrawingVisual。对于不断移动的对象，我觉得应该有更好的方法，例如将 DrawingVisuals 本身直接绑定到视图模型的属性，但那会是什么样子呢？随着模拟中模型数量的增加，我需要确保我有一个简化的更新工作流程。我开始遵循这里的示例：http: [//msdn.microsoft.com/en-us/library/ms742254。](http://msdn.microsoft.com/en-us/library/ms742254.aspx)

我故意避免 DependencyProperties 并将 UserControls 绑定到每个视图模型，因为我需要一个非常有效的绘图画布（因此下面的 QuickCanvas）。因此，除了设计主 UI 和连接按钮和命令外，我几乎不需要 XAML。请询问是否有一些不清楚的地方，或者我遗漏了一些重要的东西。谢谢！

可视主机容器（视图）：

```
public partial class QuickCanvas : FrameworkElement
{
    private readonly VisualCollection _visuals;
    private readonly Dictionary<Guid, DrawingVisual> _visualDictionary;

    public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register("ItemsSource", typeof(ObservableNotifiableCollection<IVisualModel>),
        typeof(QuickCanvas),
        new PropertyMetadata(OnItemsSourceChanged));

    public QuickCanvas()
    {
        InitializeComponent();
        _visuals = new VisualCollection(this);
        _visualDictionary = new Dictionary<Guid, DrawingVisual>();
    }

    public ObservableNotifiableCollection<IVisualModel> ItemsSource
    {
        set { SetValue(ItemsSourceProperty, value); }
        get { return (ObservableNotifiableCollection<IVisualModel>)GetValue(ItemsSourceProperty); }
    }

    protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        base.OnPropertyChanged(e);
        if (e.Property.Name == "Width" || e.Property.Name == "Height" || e.Property.Name == "Center")
        {
            UpdateVisualChildren();
        }
    }

    private void UpdateVisualChildren()
    {
        if (ItemsSource == null || _visuals.Count == 0) return;

        foreach (var model in ItemsSource)
        {
            var visual = FindVisualForModel(model);
            if (visual != null)
            {
                UpdateVisualFromModel(visual, model);
            }
        }
    }

    private void UpdateVisualPairFromModel(DrawingVisual visual, IVisualModel model)
    {
        visual.Transform = ApplyVisualTransform(visual.Transform, model);
    }

    private static void OnItemsSourceChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        (obj as QuickCanvas).OnItemsSourceChanged(args);
    }

    private void OnItemsSourceChanged(DependencyPropertyChangedEventArgs args)
    {
        _visuals.Clear();

        if (args.OldValue != null)
        {
            var models = args.OldValue as ObservableNotifiableCollection<IVisualModel>;
            models.CollectionCleared -= OnCollectionCleared;
            models.CollectionChanged -= OnCollectionChanged;
            models.ItemPropertyChanged -= OnItemPropertyChanged;
        }

        if (args.NewValue != null)
        {
            var models = args.NewValue as ObservableNotifiableCollection<IVisualModel>;
            models.CollectionCleared += OnCollectionCleared;
            models.CollectionChanged += OnCollectionChanged;
            models.ItemPropertyChanged += OnItemPropertyChanged;

            CreateVisualChildren(models);
        }
    }

    private void OnCollectionCleared(object sender, EventArgs args)
    {
        _visuals.Clear();
        _visualDictionary.Clear();
    }

    private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs args)
    {
        if (args.OldItems != null)
            RemoveVisualChildren(args.OldItems);

        if (args.NewItems != null)
            CreateVisualChildren(args.NewItems);
    }

    private void OnItemPropertyChanged(object sender, ItemPropertyChangedEventArgs args)
    {
        var model = args.Item as IVisualModel;
        if (model == null)
            throw new ArgumentException("args.Item was expected to be of type IVisualModel but was not.");
        //TODO is there a better way to update without having to add/remove visuals?
        var visual = FindVisualForModel(model);
        _visuals.Remove(visual);
        visual = CreateVisualFromModel(model);
        _visuals.Add(visual);
        _visualDictionary[model.Id] = visual;**
    }

    private DrawingVisual FindVisualForModel(IVisualModel model)
    {
        return _visualDictionary[model.Id];
    }

    private void CreateVisualChildren(IEnumerable models)
    {
        foreach (IVisualModel model in models)
        {
            var visual = CreateVisualFromModel(model);
            _visuals.Add(visual);
            _visuals.Add(visual);
            _visualDictionary.Add(model.Id, visual);
        }
    }

    private DrawingVisual CreateVisualFromModel(IVisualModel model)
    {
        var visual = model.GetVisual();
        UpdateVisualFromModel(visual, model);
        return visual;
    }

    private void RemoveVisualChildren(IEnumerable models)
    {
        foreach (IVisualModel model in models)
        {
            var visual = FindVisualForModel(model);
            if (visual != null)
            {
                _visuals.Remove(visual);
                _visualDictionary.Remove(model.Id);
            }
        }
    }

    protected override int VisualChildrenCount
    {
        get
        {
            return _visuals.Count;
        }
    }

    protected override Visual GetVisualChild(int index)
    {
        if (index < 0 || index >= _visuals.Count)
            throw new ArgumentOutOfRangeException("index");

        return _visuals[index];
    }
} 
```

一个 IVisuaModel 实现：

```
public class VehicleViewModel : IVisualModel
{
    private readonly Vehicle _vehicle;
    private readonly IVisualFactory<VehicleViewmodel> _visualFactory;
    private readonly IMessageBus _messageBus;

    public VehicleViewmodel(Vehicle vehicle, IVisualFactory<VehicleViewmodel> visualFactory, IMessageBus messageBus)
    {
        _vehicle = vehicle;
        _visualFactory = visualFactory;
        _messageBus = messageBus;
        _messageBus.Subscribe<VehicleMovedMessage>(VehicleMoveHandler, Dispatcher.CurrentDispatcher);
        Id = Guid.NewGuid();
    }

    public void Dispose()
    {
        _messageBus.Unsubscribe<VehicleMovedMessage>(VehicleMoveHandler);
    }

    private void VehicleMoveHandler(VehicleMovedMessage message)
    {
        if (message.Vehicle.Equals(_vehicle))
            OnPropertyChanged("");
    }

    public Guid Id { get; private set; }
    public Point Anchor { get { return _vehicle.Position; } }
    public double Rotation { get { return _vehicle.Orientation; } }

    public DrawingVisual GetVisual()
    {
        return _visualFactory.Create(this);
    }

    public double Width { get { return _vehicle.VehicleType.Width; } }
    public double Length { get { return _vehicle.VehicleType.Length; } }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

一个 IVisualFactory 实现：

```
public class VehicleVisualFactory : IVisualFactory<VehicleViewModel>
{
    private readonly IDictionary<string, Pen> _pens;
    private readonly IDictionary<string, Brush> _brushes;

    public VehicleVisualFactory(IDictionary<string, Pen> pens, IDictionary<string, Brush> brushes)
    {
        _pens = pens;
        _brushes = brushes;
    }

    public DrawingVisual Create(VehicleViewmodel viewModel)
    {
        var result = new DrawingVisual();
        using (var context = result.RenderOpen())
        {
            context.DrawRectangle(_brushes["VehicleGreen"], _pens["VehicleDarkGreen"],
                new Rect(-viewModel.Width / 2, -viewModel.Length / 2, viewModel.Width, viewModel.Length));
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T08:21:27.827

在阅读您的帖子时，我发现您的方法非常有趣且制作巧妙。我已经对 wpf 和“实时”问题进行了一些实验，以下是我可以从自己的经验中带来的一些东西：

*   我不会建议您对视图模型使用完整的绑定视图，特别是如果车辆数量变化，则车辆的属性。事实上，绑定机制非常非常快……只有在它被初始化后。初始化确实很慢。因此，如果您倾向于使用这种机制，我建议您使用池化来尽可能避免绑定分配。关于您对外观的问题...我想所有与绑定相关的事情都将在您的 c# 车辆工厂中执行（[http://msdn.microsoft.com/en-us/library/ms742863.aspx](http://msdn.microsoft.com/en-us/library/ms742863.aspx)）？

*   我的第二点是半线索半问题：您是否考虑过使用除 MVVM 之外的另一种架构模式？我可以在您的代码中看到您已经实现了很多与视图/视图模型同步相关的事情。MVVM 是一种结构，由于 ViewModel 原理，它可以轻松地将高度交互的视图与数据层进行接口和分离。与表单应用程序相比，游戏架构通常不会倾向于将相同的关注点分开，这主要是因为性能、可伸缩性和模块化关注点不是相同的挑战。这就是为什么我想知道代理模式、经典的 getInputs/think/draw 车辆对象是否不是一个好方法，如果您的目标是获得最高性能 -> 意味着一层应用程序和多层代理。

希望这有一点帮助。如果有一些您不理解或只是不同意的观点，请不要犹豫。通知我们，我对您将做出的选择非常感兴趣！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T13:11:38.800

就在最近，我还开始基于您[提到](http://msdn.microsoft.com/en-us/library/ms742254.aspx)的 MSDN 示例，并使用 VisualHost aka QuickCanvas 的结构，它是 FrameworkElement，其中包含 DrawingVisuals 的可视化集合。初始绘制时间比使用 UIElements 时快 3 倍。

然后，我注意到同样的事情：为了重新定位绘图视觉对象，我必须将它们移除然后重新绘制它们——这需要时间。观察是，甚至，删除成本最多的时间！

对于部分解决方案 - 您的中间答案可能是对于更简单的问题（当几何不存在重叠时），您可以删除然后绘制一个 SINGLE DrawingVisual。这将我在此类情况下的显示速度提高了 5 倍。

但是，如果一个人想要流畅的重绘，比如移动 VisualHosts（在你的情况下，你可以布置多个 QuickCanvas，如果 DrawingVisuals 也可以以某种与组相关的方式分组/刷新），我没有找到触发的方法OnRender、MeasureOverride 等既不使用 InvalidateVisual（在 Visual Host 容器上），也不影响 Canvas 或每个 RenderTransform（来自代码）上的定位。

我的需要是流畅地更新每只鼠标的 VisualHost（例如用拇指）的拉伸或移动。
似乎只有 OnPropertyChanged 会触发，就像您也发现的那样。

但到目前为止，还不行 - 使用 DrawingVisuals 的初始绘图非常快，但交互性没有触发。所有处理程序在本地触发增量事件，但我找不到直接从代码直接影响单个 DrawingVisual 或 VisualHost 容器的位置，例如

```
 Canvas.SetLeft(element, left + xD);
                Canvas.SetTop(element, top + yD); 
```

或者

```
 transform.X += currentPoint.X - anchorPoint.X;
            transform.Y += currentPoint.Y - anchorPoint.Y;
            this.RenderTransform = transform; 
```

（事情计算，但没有渲染发生）。InvalidateVisual、Update 或任何其他机制似乎都不会触发 VisualHost 容器（即 QuickCanvas）进行绘制。

# javascript - .bind() 和 .unbind() 不能正常工作

> ID：14802511
> 
> 赞同：1
> 
> 时间：2013-02-10T20:57:59.320
> 
> 标签：javascript, jquery, html, bind, unbind

我有两个链接，如果用户单击一个，与该链接相关的文章将显示在动画中。如果用户在单击第一个链接后和上一个动画完成之前单击另一个链接，则他们的动画将发生冲突.我想使用`.bind()`和`.unbind()`功能来防止用户在其他链接的事件正在工作时单击链接。但是当我取消绑定事件时，它不会在动画后绑定到元素。

**JS**代码：

```
$("a[href='#about-enamel']").click(function () {
        $("a[href!='#about-enamel']").unbind("click");
        if ($("article[id='about-enamel']").attr('class') === 'visible') {
            $("a[href!='#about-enamel']").bind("click");
            return 0;
        }
        else if ($("article[class='visible']").length) {
            $("article[class='visible']").hide('drop', { easing: 'easeOutBack', direction: 'down' }, 500, function () {
                $(this).attr('class', 'hidden');
                $("article[id='about-enamel']").show('drop', { easing: 'easeInBack', direction: 'up' }, 500, function () {
                    $(this).attr('class', 'visible');
                    $("a[href!='#about-enamel']").bind("click");
                });
            });
        }
        else {
            $("article[id='about-enamel']").show('drop', { easing: 'easeInBack', direction: 'up' }, 500, function () {
                $(this).attr('class', 'visible');
                $("a[href!='#about-enamel']").bind("click");
            });
        }
    });
    $("a[href='#order']").click(function () {
        $("a[href!='#order']").unbind("click");
        if ($("article[id='order']").attr('class') === 'visible') {
            $("a[href!='#order']").bind("click");
            return 0;
        }
        else if ($("article[class='visible']").length) {
            $("article[class='visible']").hide('drop', { easing: 'easeOutBack', direction: 'down' }, 500, function () {
                $(this).attr('class', 'hidden');
                $("article[id='order']").show('drop', { easing: 'easeInBack', direction: 'up' }, 500, function () {
                    $(this).attr('class', 'visible');
                    $("a[href!='#order']").bind("click");
                });
            });
        }
        else {

            $("article[id='order']").show('drop', { easing: 'easeInBack', direction: 'up' }, 500, function () {
                $(this).attr('class', 'visible');
                $("a[href!='#order']").bind("click");
            });
        }
    }); 
```

如果此问题有其他解决方案，请告知我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:28:46.697

这是我整理的一个基本示例，说明了如何使用`stop()`来终止任何正在进行的动画，因此您可以在不发生冲突的情况下启动另一个。

[http://jsfiddle.net/zFAY9/3/](http://jsfiddle.net/zFAY9/3/)

# iphone - 无法让 MKannotate 大头针显示在我的地图上

> ID：14802512
> 
> 赞同：0
> 
> 时间：2013-02-10T20:58:00.190
> 
> 标签：iphone, objective-c, mkannotation

现在，我正在尝试在完成其余作业之前测试在地图上注释图钉的概念。分配说明说不需要 CLLocationManager。到目前为止，我已经尝试在我的 MKannotate 类的特定实例上调用 mkAnnotate 引脚。我尝试调用委托方法，并且尝试手动输入坐标但没有成功。稍后在作业中，我想让程序根据分段按钮的选择将图钉拖放到某个位置，但现在我只想弄清楚如何拖放图钉。这是我的 ViewContoller.m 文件中的代码

```
#import "GoThereViewController.h"

@interface GoThereViewController ()

@end

@implementation GoThereViewController
//@synthesize segment;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [world setShowsUserLocation:YES]; 

    //Location array declarations
    //GoThereMapPoint *gtET = [[GoThereMapPoint alloc]initWithCoordinate:CLLocationCoordinate2DMake(39.774033,-86.172754) title:@"Engineering & Technology Building"];
    GoThereMapPoint *gtEmpireState = [[GoThereMapPoint alloc]initWithCoordinate:CLLocationCoordinate2DMake(40.7483786347046,-73.98555994033813) title:@"Empire State Building"];  
    GoThereMapPoint *gtTajMahal = [[GoThereMapPoint alloc]initWithCoordinate:CLLocationCoordinate2DMake(27.171171855453526,78.04248690605164) title:@"Taj Mahal"];

    //Put in array.
    //aryGoThere = [NSArray arrayWithObjects:gtET,gtEmpireState,gtTajMahal, nil];
    // Do any additional setup after loading the view from its nib.

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

//Somehow this method calls the annotate and zoom method
-(void)didUpdateToLocation:(CLLocation *)newLocation 
              fromLocation:(CLLocation *)oldLocation
{
    GoThereMapPoint *gtET = [[GoThereMapPoint alloc]initWithCoordinate:CLLocationCoordinate2DMake(39.774033,-86.172754) title:@"Engineering & Technology Building"];    
    [self foundLocation:newLocation];
}

//Create instance of location and zoom to it
-(void)foundLocation:(CLLocation *)loc
{
    //Create instance of location
    CLLocationCoordinate2D coord = [loc coordinate];
    //Add pin

    GoThereMapPoint *mp = [[GoThereMapPoint alloc]initWithCoordinate:coord title:@"test"]; 
     [world addAnnotation:mp];    //Zoom to location
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(coord,500,500);
    [world setRegion:region animated:YES];
} 
```

如果您还有什么需要帮助的，请务必告诉我。

编辑：忘记提及 MKAnnotate 类的名称是 GoThereViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:42:18.553

首先确保该`updateLocations`方法实际被调用。该方法现在已被弃用，取而代之的是：

`- (void) locationManager:(CLLocationManager *) manager didUpdateLocations:(NSArray *)locations { }`

您应该`foundLocation`从那里调用该方法。

# javascript - 使用 jQuery 更新表格单元格数据

> ID：14802514
> 
> 赞同：1
> 
> 时间：2013-02-10T20:58:10.003
> 
> 标签：javascript, jquery, html-table, cell, updates

这是我的表格格式。

```
<table id="table1">
 <tr id="row_1">
  <th>Some Heading</th>
  <td class="t1"></td>
  <td class="t2"></td>
  <td class="t3"></td>
  <td class="t4"></td>
 </tr>
 <tr id="row_2">
  <th>Some Heading</th>
  <td class="t1"></td>
  <td class="t2"></td>
  <td class="t3"></td>
  <td class="t4"></td>
 </tr>
 etc...
</table> 
```

如何使用 jQuery 更新单独的表格单元格 (td) 的内容？如果我想更新#row_1 cell 1 或#row_2 cel 4 等的内容，更好的表达方式是如何编写它？

我有另一个表，我可以毫无问题地更新数据，但它也简单得多。它每行只有一个表格单元格需要更新内容。我用这个做到了。

```
$('#val_' + i).html("stuff I put in it"); 
```

每个单元格都有一个唯一的 id - #val_ + 一些标识它的数字，因此我可以轻松地循环遍历它，但是稍微复杂的表格给我带来了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:10:13.830

```
$('#table1').children('tr').each(function() {

    // where 'x' is the index of the <td> to target
    var $requiredCell = $(this).children('td').eq(x);

    doStuff( $requiredCell );

}); 
```

或者，如果您只是针对单个单元格

```
$('#row_1 td.t1'); 
```

或者

```
$('#row_1 td').first(); // If you can't use the classes... 
```

或者

```
$('#row_1 td').eq(x); // for targeting a td at an arbitrary index 'x' 
```

例如（从你的问题）：

```
$('#row_1 td').eq(3); // target the fourth <td>. Note index is 0-based 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:02:25.873

要获得所有 tds，您可以使用类似这样的东西。

```
$("#row_1").find('td').each {function() {
  // do something
}); 
```

要获得特定的 td，您可以这样做：

```
$('#row_1 .t1').something(); 
```

# c# - DTOs in a three tier Entity Framework application

> ID：14802516
> 
> 赞同：1
> 
> 时间：2013-02-10T20:58:31.163
> 
> 标签：c#, entity-framework, architecture, dto

I am building two C# three-tier applications that get their data a very old database Customer table that has about 100 columns. They perform some logic in the business layer and a presentation layer displays the data.

The layout of the customer table is -

```
CustomerID
Firstname
Lastname
DateOfBirth
Othervalue1
Othervalue2
Othervalue3
.
.
Othervalue95
Creationdate
Updatedate 
```

For these two applications I only need the customer table, but I am building the a new data access layer with Entity Framework. Future projects will need access to other tables and will add to this access layer.

I will use the Unit of work and repository patters.

My problem is the following -

**Application A** needs one subset of the customer table columns

and

**Application B** needs a different subset of the customer table columns (there is some overlap with Application A's needs)

How do I perform mapping from the data layer to these two independent business layers? I know I can use automapper to perform mapping from an data entity class to a business layer class, but I will have two different business layer Customer classes.

I have been reading a bit about DTO's but I don't see where there should go in this n-tiered application.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:42:12.880

You can use any of these based on your application design
1 - Map customer table to two or more Entities
2 - Have a base entity like CustomerBase and 2 or more sub entities.
3 - DTOs are Data Transfer Objects and they are (normally) mutable. Changing them wont result a CRUD operation on the DB.
DTOs are used in scenarios like: Customer entity is a heavyweight object(say 100 columns) and you just need a subset of that data (say 20 columns). Conversion between the DTO object and the actual Entity could be implemented in many ways like auto-mapper, manually operator oveloading and more ...

Hope this helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:59:58.950

Heres what I would do:

In Application A - extract the data you need, and map them to a new class (a DTO) Do the same with Application B.

If the two applications have no other relation, than sharing af database, you should do nothing else. that is: keep Application A unawer of the existence og Application B, and vice versa.

The DTO is just a fancy name for the object you share across an n-tier application.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:20:13.630

You could use IOC and inject the relevant mapper into your data layer.

Do you need to use UoW and repository pattern? EF is a data access abstraction with unit of work in its own right. You could access DBContext in your business layer and use Linq to project data into DTOs.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T22:48:04.070

Do you need read only access on the legacy system?

In this case I suggest to use an [Anti Corruption Layer pattern](http://www.markhneedham.com/blog/2009/07/07/domain-driven-design-anti-corruption-layer/) on each applications and two distinct entity framework models where you can map only the required columns.

If you need also to write it is probably difficult, you must map all the columns.

If you want to use a single entity framework model then you can use dtos to map a subset of data. In this case auto mapper can be a good solution.

# scala - 有没有办法在不将代码包装到另一个对象中的情况下“丰富”一个 Scala 类？

> ID：14802517
> 
> 赞同：16
> 
> 时间：2013-02-10T20:58:42.053
> 
> 标签：scala, enrich-my-library

在 Scala 2.9 中，要向库类添加自定义方法（丰富或“pimp”它），我必须编写如下内容：

```
object StringPimper {
  implicit def pimpString(s: String) = new {
    def greet: String = "Hello " + s
  }
} 
```

随着 Scala 2.10 的发布，我读到它引入了隐式类定义，从理论上讲，它旨在通过消除返回匿名类对象的隐式方法的需要来简化上述任务。我以为它能让我写

```
implicit class PimpedString(s: String) {
  def greet: String = "Hello " + s
} 
```

这对我来说看起来更漂亮。但是，这样的定义会导致编译错误：

```
`implicit' modifier cannot be used for top-level objects 
```

这可以通过再次将代码包装在一个对象中来解决：

```
object StringPimper {
  implicit class PimpedString(s: String) {
    def greet: String = "Hello " + s
  }
} 
```

不用说，这几乎抵消了改进的感觉。

那么，有没有办法把它写得更短？摆脱包装对象？

我实际上有一个`MyApp.pimps`所有皮条客都去的包（我没有太多，如果有的话，我会使用一些单独的包）而且我厌倦了导入`MyApp.pimps.StringPimper._`而不是`MyApp.pimps.PimpedString`or `MyApp.pimps._`。当然，我可以将所有隐式类放在一个包装器对象中，但这意味着将它们全部放在一个文件中，这会很长 - 非常丑陋的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T21:27:47.477

现在的标准术语是*丰富*。我不确定为什么以前没有，因为使用它的库方法被命名为`RichString`not `PimpedString`。

无论如何，你不能把隐式类放在任何地方，但是为了使用隐式你需要方法，你不能把方法放在任何地方。但是您可以作弊以获取所有内容`pimps`。

```
// This can go in one file
trait ImplicitsStartingWithB {
  implicit class MyBoolean(val bool: Boolean) { def foo = !bool }
  implicit class MyByte(val byte: Byte) { def bar = byte*2 }
}

// This can go in another file
trait ImplicitsStartingWithS {
  implicit class MyShort(val short: Short) { def baz = -short }
  implicit class MyString(val st: String) { def bippy = st.reverse }
}

// This is a third file, if you want!
object AllImplicits extends ImplicitsStartingWithB with ImplicitsStartingWithS {}

scala> import AllImplicits._
import AllImplicits._

scala> true.foo
res0: Boolean = false 
```

您也可以使用`pimps`包对象执行此操作——通常您将在名为`package.scala`的目录中放置一个名为的文件`pimps`，然后

```
package object pimps extends /* blah blah ... */ {
  /* more stuff here, if you need it */
} 
```

需要注意的是，值类作为一项新功能，有相当多的限制。有些是不必要的，但是如果您想避免分配一个新`MyBoolean`类（JVM 通常可以对其进行极大优化，但通常不会达到裸方法调用的程度），您将不得不解决这些限制。在这种情况下，

```
// In some file, doesn't really matter where
class MyBoolean(val bool: Boolean) extends AnyVal { def foo = !bool }

package object pimps {
  def implicit EnrichWithMyBoolean(b: Boolean) = new MyBoolean(b)
} 
```

这不会节省您的工作（但运行速度更快）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T21:30:31.423

允许扩充类驻留在不同文件中的解决方法是将其包装在特征而不是对象中：

```
// file: package.scala
package object mypackage extends StringImplicits {
  def test { println("Scala".greet) }
}

// file: StringImplicits.scala
package mypackage

trait StringImplicits {
  implicit class RichString(s: String) {
    def greet: String = "Hello " + s
  }
} 
```

正如 Rex 指出的那样，您不能在其他类中使用值类。因此，如果您想从 Scala 2.10 的值类中受益，则不能使用嵌套的隐式类。**哦！**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T21:04:00.937

好吧，编译器错误说明了一切。您只是不能在顶层定义隐式类。这意味着您要么使用包装对象（也可以是包对象），要么直接在范围内定义要使用的类（在极少数情况下，它不必是可重用的）。

原因是如果没有包装器，您将无法导入隐式转换。您不能按自己的名称导入隐式类（准确地说：转换）。

除此之外，我建议使用稍微不同的签名（请参阅[Value Classes](http://docs.scala-lang.org/sips/pending/value-classes.html)）：

```
implicit class PimpedString(val self: String) extends AnyVal 
```

这具有对您的扩展方法的调用可以（并且将）内联的效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-07T17:51:19.640

另一个放置隐式声明的好地方是伴生对象。

对于从`Type1`到`Type2`Scala 的隐式转换，会查看这两种类型的所有祖先的伴随对象。因此，在不需要显式导入的地方放置隐式转换通常很容易。

```
case class Curie(curie:String)

object Curie {
  implicit def toCurie(s:String) = Curie(curie)
} 
```

无论您在何处调用需要`Curie`使用`String`转换方法的方法，都无需任何额外的导入即可调用。

# python - 在 Python 中连接 file.write() 中的字符串？

> ID：14802519
> 
> 赞同：2
> 
> 时间：2013-02-10T20:59:01.553
> 
> 标签：python, file, concatenation

我正在尝试在 Python 2.7.3 中编写一个脚本，该脚本可以从 Excel 电子表格中获取 .csv 文件并将其转换为适合 LaTeX 表的格式。所以我想读取一个文件，并将数据写入一个新的文本文件，但是用＆符号替换任何逗号，并在每行的末尾附加一个双反斜杠。

示例：
输入

```
A1,A2,A3  
B1,B2,B3  
C1,C2,C3 
```

期望的输出

```
A1 & A2 & A3 \\
B1 & B2 & B3 \\
C1 & C2 & C3 \\ 
```

这是我现在拥有的：

```
old_file = open(selected_file, "r")
new_file = open("texified_" + selected_file.replace("csv","txt"), "w")
#Creates new file with format texified_selected_file.txt

for line in old_file:
    new_file.write(line.replace(",", " & ") + r" \\")

new_file.close()
old_file.close() 
```

现在它正确地用＆符号替换逗号，但不添加双反斜杠。我认为这是因为反斜杠具有特殊含义，但即使将其设为原始字符串，它仍然不起作用。但是，它确实将其添加到最后一行的末尾。

实际输出

```
A1 & A2 & A3   
B1 & B2 & B3  
C1 & C2 & C3 \\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:07:40.497

发生这种情况可能是因为`newline`文件中每一行的末尾已经有一个，而不是在`last line`.

您可以在附加 之前尝试剥离它，`//`然后单独添加换行符：-

```
import os
ls = os.linesep

for line in old_file:
    new_file.write(line.replace(",", " & ").rstrip() + r' \\ ' + ls) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:41:52.430

我不确定您的代码（或您的输入数据）有什么问题，但我可能会这样做（可能不那么冗长）：

```
for line in old_file:
    line = line.strip()     # remove newline/whitespace from begin and end of line
    line = line.split(',')  # get comma-separated values
    line = " & ".join(line) # make it ampersand-separated values
    line += r" \\"          # add latex line break
    line += "\n"            # add file line break
    new_file.write(line) 
```

或者这样：

```
import jinja2

# define the latex template
template_str = r"""
\documentclass{article}
\begin{document}
\begin{table}
  \centering
  \begin{tabular}{ccc}
%{ for line in table %} %{{line[0]%}} & %{{line[1]%}} & %{{line[2]%}} \\ 
%{ endfor %}
  \end{tabular}
\end{table}
\end{document}

"""

# initialize the rendering engine
renderer = jinja2.Environment(
  block_start_string = '%{',
  block_end_string = '%}',
  variable_start_string = '%{{',
  variable_end_string = '%}}'
)
template = renderer.from_string(template_str)

# bring the data array into shape
lines = [line.strip().split(',') for line in old_file]

# generate the tex source code
with open("test.tex", 'w+') as f:
  f.write(template.render(table=lines)) 
```

也看看这些资源：

*   用于读取 csv 文件的Python [csv 模块](http://docs.python.org/2/library/csv.html)
*   [Jinja2](http://jinja.pocoo.org/docs/)用于模板渲染
*   [https://tex.stackexchange.com/a/40728/10704](https://tex.stackexchange.com/a/40728/10704)是一个很好的例子

# facebook - 从 Open Graph 自定义操作中剥离的链接

> ID：14802520
> 
> 赞同：0
> 
> 时间：2013-02-10T20:59:08.610
> 
> 标签：facebook, facebook-graph-api

最近，Facebook 开始在我的 Open Graph 操作中从“消息”属性中删除链接，因此当您在墙上分享操作时，链接不再显示。

我认为他们可能这样做是为了让“消息”属性与我的营销保持一致。是否有其他方法可以推广内容的真实 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:03:12.423

您可以使用Open Graph 操作的*链接操作属性：* [https ://developers.facebook.com/docs/technical-guides/opengraph/action-links/](https://developers.facebook.com/docs/technical-guides/opengraph/action-links/)

这将在用户在提要中看到的 OG 操作下添加一个链接，该链接指向您使用您定义的标签定义的 URL。例如“添加你​​的”、“保存这个食谱”等。

# php - Javascript离线工作，但上传到网站时不能

> ID：14802521
> 
> 赞同：1
> 
> 时间：2013-02-10T20:59:12.130
> 
> 标签：php, javascript, web

我通过建立一个网站来帮助他们的朋友来帮助他们的商店。当我在笔记本电脑的网络服务器上运行它时，它运行良好。它加载图像就好了。但是当我将它上传到网站时它不起作用

我已经去掉了很多他的代码，只包括重要的东西。

该网站是[http://www.adamwalker.net84.net/index.php](http://www.adamwalker.net84.net/index.php)

据我所知，它可能在这两个文件之一中......但我真的不确定......但这些是在控制台中给出错误的那些

自定义.js

```
 // Jquery with no conflict
   jQuery(document).ready(function($) {

//##########################################
// COLUMNIZR
//##########################################

$('.multicolumn').columnize({ 
    columns: 2
});

//##########################################
// CAROUSEL
//##########################################

$('#mycarousel').jcarousel({
    // Configuration goes here (http://sorgalla.com/projects/jcarousel/)
    vertical: false
});

$('#mycarousel-vertical').jcarousel({
    // Configuration goes here (http://sorgalla.com/projects/jcarousel/)
    vertical: true
});

//##########################################
// LOF SLIDER
//##########################################

var buttons = { previous:$('#home-slider .button-previous') ,
                    next:$('#home-slider .button-next') };  

$('#home-slider').lofJSidernews( {
    interval        : 4000,
    direction       : 'opacitys',   
    easing          : 'easeInOutExpo',
    duration        : 1200,
    auto            : true,
    maxItemDisplay  : 5,
    navPosition     : 'horizontal', // horizontal
    navigatorHeight : 73,
    navigatorWidth  : 188,
    mainWidth       : 940,
    buttons: buttons
});

//##########################################
// Superfish
//##########################################

$("ul.sf-menu").superfish({ 
    animation: {height:'show'},   // slide-down effect without fade-in 
    delay:     800 ,              // 1.2 second delay on mouseout 
    autoArrows:  false,
    speed: 100
});

//##########################################
// PROJECT SLIDER
//##########################################

$('.project-slider').flexslider({
    animation: "fade",
    controlNav: true,
    directionNav: false,
    keyboardNav: true
});

//##########################################
// Filter - Isotope 
//##########################################

var $container = $('#filter-container');

$container.imagesLoaded( function(){
    $container.isotope({
        itemSelector : 'figure',
        filter: '*',
        resizable: false,
        animationEngine: 'jquery'
    });
});

// filter buttons

$('#filter-buttons a').click(function(){

    // select current
    var $optionSet = $(this).parents('#filter-buttons');
    $optionSet.find('.selected').removeClass('selected');
    $(this).addClass('selected');

    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
});

//##########################################
// Tool tips
//##########################################

$('.poshytip').poshytip({
    className: 'tip-twitter',
    showTimeout: 1,
    alignTo: 'target',
    alignX: 'center',
    offsetY: 5,
    allowTipHover: false
});

$('.form-poshytip').poshytip({
    className: 'tip-twitter',
    showOn: 'focus',
    alignTo: 'target',
    alignX: 'right',
    alignY: 'center',
    offsetX: 5
});

//##########################################
// Tweet feed
//##########################################

$("#tweets").tweet({
    count: 3,
    username: "ansimuz"
});

//##########################################
// PrettyPhoto
//##########################################

$('a[data-rel]').each(function() {
    $(this).attr('rel', $(this).data('rel'));
});

$("a[rel^='prettyPhoto']").prettyPhoto();

//##########################################
// Accordion box
//##########################################

$('.accordion-container').hide(); 
$('.accordion-trigger:first').addClass('active').next().show();
$('.accordion-trigger').click(function(){
    if( $(this).next().is(':hidden') ) { 
        $('.accordion-trigger').removeClass('active').next().slideUp();
        $(this).toggleClass('active').next().slideDown();
    }
    return false;
});

//##########################################
// Toggle box
//##########################################

$('.toggle-trigger').click(function() {
    $(this).next().toggle('slow');
    $(this).toggleClass("active");
    return false;
}).next().hide();

//##########################################
// Tabs
//##########################################

$(".tabs").tabs("div.panes > div", {effect: 'fade'});

//##########################################
// Create Combo Navi
//##########################################    

// Create the dropdown base
$("<select id='comboNav' />").appendTo("#combo-holder");

// Create default option "Go to..."
$("<option />", {
    "selected": "selected",
    "value"   : "",
    "text"    : "Navigation"
}).appendTo("#combo-holder select");

// Populate dropdown with menu items
$("#nav a").each(function() {
    var el = $(this);       
    var label = $(this).parent().parent().attr('id');
    var sub = (label == 'nav') ? '' : '- ';

    $("<option />", {
     "value"   : el.attr("href"),
     "text"    :  sub + el.text()
    }).appendTo("#combo-holder select");
});

//##########################################
// Combo Navigation action
//##########################################

$("#comboNav").change(function() {
  location = this.options[this.selectedIndex].value;
});

//##########################################
// Resize event
//##########################################

$(window).resize(function() {

    var w = $(window).width();
    //console.log(w);

    $container.isotope('reLayout');

}).trigger("resize");

    });//close 
```

或 jQuery FlexSlider v1.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:20:18.060

我注意到您的网站存在一些问题。

首先，当出现 404 时，您的虚拟主机似乎会将其内容和 javascript 加载到您的页面中。（我看到从 error404.000webhost.com 请求了 javascript）。这是非常糟糕的做法。我会立即转移到一个新的虚拟主机（我知道，有时说起来容易做起来难，但不要与劫持你的错误页面的公司做生意......会导致奇怪的问题 - 也许这个？！）

其次，错误在于$('.multicolumn') 没有名为columnize() 的方法。我通过使用 chrome 中的网络工具检查器发现了这一点。

转到网络选项卡，我注意到似乎用于列构建工具的 javascript。 [http://www.adamwalker.net84.net/js/jquery.columnizer.min.js](http://www.adamwalker.net84.net/js/jquery.columnizer.min.js) - 这是一个 0 字节文件（不是 404），所以这是你的问题。此文件为空（或由于某种原因未提供服务），这会导致其余代码失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:25:14.283

您的几个 Javascript 文件不包含有效的 javascript 代码：

*   jquery.easing.js
*   jquery.flexslider.js

你有几个空文件：

*   jquery.columnizer.min.js
*   css3-mediaqueries.js

将正确的 javascript 文件上传到您的服务器。

# spring - 如何在 Google App Engine 中注入 Spring bean

> ID：14802523
> 
> 赞同：0
> 
> 时间：2013-02-10T20:59:24.787
> 
> 标签：spring, google-app-engine, inversion-of-control

我在 GAE 应用程序中注入 Spring bean 时遇到问题。

在 Servlet 中，我拥有由 IOC 竞争者控制的财产。我的**web.xml**：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<web-app
    version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>update</servlet-name>
        <servlet-class>com.servlet.MyServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>update</servlet-name>
        <url-pattern>/update</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

和**applicationContext.xml**：

```
<beans>

    <bean class="com.myapp.servlet.MyServlet">
        <property name="webServicePort" ref="webServicePort"/>
    </bean>

    <bean id="webServicePort" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" scope="singleton" >
        <property name="serviceInterface" value="com.ws.generated.WebServicePortType" />
        <property name="wsdlDocumentUrl" value="http://endpoint/doc.wsdl" />
        <property name="namespaceUri" value="namespace" />
        <property name="serviceName" value="WebService" />
        <property name="endpointAddress" value="http://endpoint/soap.php" />
    </bean>
</beans> 
```

在这种情况下，在上下文创建期间，`webServicePort`bean 被注入到 Servlet。但是当我发送第一个请求时，字段为空。

当我将 Spring 描述符更改为通过构造函数参数注入时：

```
<beans>

    <bean class="com.myapp.servlet.MyServlet">
        <constructor-arg index="0" ref="webServicePort"/>
    </bean>

    <bean id="webServicePort" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" scope="singleton" >
        <property name="serviceInterface" value="com.ws.generated.WebServicePortType" />
        <property name="wsdlDocumentUrl" value="http://endpoint/doc.wsdl" />
        <property name="namespaceUri" value="namespace" />
        <property name="serviceName" value="WebService" />
        <property name="endpointAddress" value="http://endpoint/soap.php" />
    </bean>
</beans> 
```

bean`MyServet`是`webServicePort`在构造函数中注入的。但是在将请求发送到 Servlet 之后，我得到了：

```
[INFO] java.lang.InstantiationException: com.myapp.servlet.MyServlet
[INFO]  at java.lang.Class.newInstance0(Class.java:357)
[INFO]  at java.lang.Class.newInstance(Class.java:325)
[INFO]  at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
[INFO]  at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
[INFO]  at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
(...) 
```

我在类的 setter 和构造函数中都添加了日志记录`Servlet`。我在服务器日志中只收到一次消息。我明白发生了什么，但我不知道为什么......

如我错了请纠正我。在启动应用程序上下文期间，`webServicePort`正在创建和注入`Servlet`. 但是第一个发送给它的请求是创建新的实例`Servlet`，没有注入bean，对吧？但为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:40:59.673

原因是你有一个不知道 http 请求的 spring 上下文，这意味着当请求到达时，servlet 容器使用它自己的 MyServlet 实例，而不是从 spring 上下文中获取一个实例。

要纠正这个问题，您需要使您的类实现[org.springframework.web.context.support.HttpRequestHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/HttpRequestHandler.html)而不是 HttpServlet，这在 spring 世界中是类似的。

就像是：

```
public class MyServlet implements HttpRequestHandler {

  private JaxWsPortProxyFactoryBean  webServicePort;

  public void setWebServicePort(JaxWsPortProxyFactoryBean  webServicePort){
      this.webServicePort=webServicePort
  }

  @override
  public void handleRequest(HttpServletRequest request, HttpServletResponse httpServletResponse) throws ServletException, IOException {
      //request management 
  }
} 
```

然后在部署描述符 web.xml 中添加 servlet 定义

```
<servlet>
   <servlet-name>update</servlet-name>
   <servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class>
</servlet>
<servlet-mapping>
   <servlet-name>update</servlet-name>
   <url-pattern>/update</url-pattern>
</servlet-mapping> 
```

并在 applicationContext.xml 中添加 servlet 名称作为 bean id，特别注意 bean id 与 web.xml 中定义的 servlet 名称匹配：

```
<bean id="update" class="com.myapp.servlet.MyServlet">
    <property name="webServicePort" ref="webServicePort"/>
</bean> 
```

这篇文章可以帮助你： [http ://andykayley.blogspot.com/2008/06/how-to-inject-spring-beans-into.html](http://andykayley.blogspot.com/2008/06/how-to-inject-spring-beans-into.html)

# c++ - 在向量中查找信息？

> ID：14802527
> 
> 赞同：-3
> 
> 时间：2013-02-10T18:31:23.823
> 
> 标签：c++

在 C++ 中，我知道为了创建动态数组，您需要使用向量。但是，当我需要查找放入向量中的信息时，我遇到了问题。

例如：假设我有一个简单的向量，它存储一个人的名字和一条写的小消息。在向量中，我如何找到比尔所在的位置。

[当我发布这个问题](https://stackoverflow.com/questions/13789364/search-a-column-using-an-input-and-get-a-row-when-the-input-matches)时，我还试图了解如何在 PHP 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:09:29.990

确实，你很困惑。让我试着帮助你。

一件事可能会让您感到困惑：std::vector 不是几何向量。它只是在内存中连续的相同类型的数据序列。所以它就像一个数组。

> a) 根据变量确定向量的大小。例如，如果我使用的是数组，它看起来像数组 [x][y] （我知道这是不可能的）。我将如何使用矢量来做到这一点

std::vector 基本上是一个自动管理的动态数组。

这意味着它是一个内部数组，但它由代码管理，当您尝试添加超过当前容量可以容纳的数据时，该代码将确保数组增长（变大）。

实际上，std::vector 是一个类模板。这意味着它不是一个真正的类，它是编译器用来为自己生成一个真正的类的代码。如果我说

```
std::vector<int> my_ints; // this is a vector of ints 
```

这个向量只能保存整数。进而：

```
std::vector<std::string> name_list; 
```

这个持有 std::string 对象。

正如我所说，在内部，它只是动态管理数组的代码。你可以认为前面的例子是这样的：

```
class
{
    unsigned long size; // count of elements contained in this container
    unsigned long capacity; // count of elements that the memory allocated by the array can hold
    int* array; // array containing the values, created using new, destroyed using delete
} 
my_ints; 
```

这是对其内部结构的过度简化的视图，因此不要假设它完全一样，但它可能有用。

现在，当您添加值时，该值将复制到数组的内存中，复制到尚未使用的元素中（例如通过 push_back()）或覆盖已经存在的元素（例如使用 insert()）。

如果您添加一个值并且向量的容量不足以容纳所有值，那么向量将自动增长：它将创建一个更大的数组，将其当前值复制到其中，也复制附加值，然后删除数组它以前有。理解这一点很重要：如果一个向量增长，那么你不能假设它的数据总是在内存中的同一个地址，所以指向它的数据的指针是不可信的。

> b）其次，我将如何使用 push back 命令将变量的值存储在特定位置。同样，如果我使用数组，它会像数组 [x] [y] += q。其中 x 和 y 是数组中的点，q 是值。

您不使用 push_back() 在两个值之间添加值，而是使用 insert()。

语法 array[x][y] += q 肯定不会像你描述的那样做。它会将 q 添加到位置数组 [x] [y] 处的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:59:59.500

数组不同，`std::vector`因为它们的大小是固定的。当数组存在时，数组的所有元素都存在。当您`std::vector`使用其默认构造函数创建 a 时，它是空的。它不包含任何元素，因此您不能索引任何元素。

但是，`std::vector`确实有一个采用初始大小的构造函数。如果您将单个`int`参数传递给`std::vector`构造函数，它将默认初始化那么多元素。例如：

```
std::vector<int> v(10); // Will have 10 ints 
```

如果你想要一个二维数组的等价物，那么你需要一个`std::vector<std::vector<T>>`. 如果你想用特定的大小构造它，你需要`std::vector`像上面一样指定外部的大小，并将`std::vector`每个元素初始化为的传递给它。例如，如果您想要一个 10x20 的矢量：

```
// This will have 10x20 ints
std::vector<std::vector<int>> v(10, std::vector<int>(20)); 
```

一旦这些元素存在，您就可以像使用数组一样对它们进行索引：

```
int value = v[x][y]; 
```

值得注意的是，C++11 引入`std::array`了编译时固定大小。你可以像这样使用它：

```
std::array<std::array<int, 20>, 10> arr; 
```

但是，如果您希望数组大小由变量确定，则不能使用它。维度必须是编译时常量。

# delphi - 如何在后台从磁盘加载图像（多线程）[AKA：TBitmap 不是线程安全的]

> ID：14802531
> 
> 赞同：4
> 
> 时间：2013-02-10T20:59:52.357
> 
> 标签：delphi

我想快速将一些图像（jpg、png 等）显示为缩略图。因为解码和调整大小的过程很慢，所以我在一个或多个线程中进行。

但是，[看起来](http://qc.embarcadero.com/wc/qcmain.aspx?d=55871)使用 TBitmap 和 TJpeg 的画布不是多线程安全的。

在这种情况下，我的问题是：
1\. 在不完全重写 GIF/PNG/BMP/JPG 库的情况下如何做到这一点？
2\. 有人知道 Embarcadero 的 Gif 和 Png 库是否也不安全吗？
3\. 如果我使用 Lock 来锁定画布，由于调整大小部分访问画布并且占用大部分 CPU 周期，它不会破坏性能吗？

* * *

我发现这让我很困扰：

> David HAROUCHE 写道: 这是不正确的。真正令人困惑的部分是，除非您锁定它们，否则即使是本地 TBitmap 也不是线程安全的。这是因为每个 TBitmap 都将自己注册到 graphics.pas 中的全局 BitmapCanvasList 列表中。而当 DC 垃圾回收 FreeMemoryContexts()

[http://www.codenewsfast.com/cnf/thread/0/permalink.thr-ng1908q2024](http://www.codenewsfast.com/cnf/thread/0/permalink.thr-ng1908q2024)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T00:39:04.807

将 GDI+ 与 CreateCompatibleDC 和 CreateBitmap 一起使用将涵盖许多图像格式并避免画布线程问题。
这只是一个示例实现，可能会被修改。GDI+ API 需要三个单元，无需安装，例如可以从[http://www.progdigy.com/获得](http://www.progdigy.com/)

```
unit ScaleImageThread;
// 2013 Thomas Wassermann
interface
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls
  ,GDIPAPI, GDIPOBJ, StdCtrls;
Type
  TScaleImageThread=Class(TThread)
    FBMP:TBitMap;
    FMemDC:HDC;
    FMemBMP:HBitmap;
    Procedure Execute;Override;
  private
    Ffn:String;
    FDestWidth,FDestHeight:Integer;
    procedure SyncFinished;
    Public
    Constructor Create(aBitMap:TBitmap;const fn:String);overload;
    property BMP:TBitmap read FBMP;
    Property FileName:String read Ffn;
  End;
implementation
{ TGDIThread }
Procedure ScaleOneImage(Const source:String;aHDC:HDC;DestWidth,DestHeight:Integer;Qual:Integer=92;WithOutMargins:Boolean=false;BgColor:TColor=ClWhite;DoNotUpScale:Boolean=false);
var
  graphics : TGPGraphics;
  image: TGPImage;
  width, height: UINT;
  faktor:Double;
  destx,desty:Double;
  rct:TGPRectF;
  Ext:String;
begin

  image:= TGPImage.Create(source);
  width  := image.GetWidth;
  height := image.GetHeight;

    if (DestWidth / width) < (DestHeight/Height) then faktor  := (DestWidth / width) else faktor:= (DestHeight/Height);
    destx :=  (DestWidth - faktor * width) / 2;
    desty :=  (DestHeight - faktor * Height) / 2;
    graphics := TGPGraphics.Create(aHDC);
    graphics.SetInterpolationMode(InterpolationModeHighQualityBicubic);

    graphics.DrawImage(
      image,
      MakeRect(destx,  desty , faktor * width, faktor * height),  // destination rectangle
      0, 0,        // upper-left corner of source rectangle
      width,       // width of source rectangle
      height,      // height of source rectangle
      UnitPixel);
    image.Free;
    graphics.Free;
end;

constructor TScaleImageThread.Create(aBitMap: TBitmap;const fn:String);
begin
  inherited create(False);
  Ffn :=fn;
  FreeOnTerminate := true;
  FBmp := aBitMap;
  FMemDC := CreateCompatibleDC(FBmp.Canvas.Handle);
  FMemBMP := CreateBitmap(FBmp.Width ,FBmp.Height ,1,GetDeviceCaps(FBmp.Canvas.Handle, BITSPIXEL),nil);
  SelectObject(FMemDC, FMemBMP);
  FDestWidth :=FBMP.Width;
  FDestHeight:=FBMP.Height;
end;

procedure TScaleImageThread.Execute;
begin
  inherited;
  ScaleOneImage(Ffn,FMemDC,FDestWidth,FDestHeight);
  Synchronize(SyncFinished);
end;

procedure TScaleImageThread.SyncFinished;
begin
 BitBlt(FBmp.Canvas.Handle, 0, 0, FBmp.Width, FBmp.Height, FMemDC, 0, 0, SRCCOPY);
 DeleteObject(FMemBMP);
 DeleteDC (FMemDC);
end;

end. 
```

实施测试

```
uses ScaleImageThread;
{$R *.dfm}

procedure TForm1.ThreadTerminate(Sender: TObject);
begin
  Canvas.Draw(FX, FY, TGDIThread(Sender).BMP);
  TGDIThread(Sender).BMP.Free;
  FX := FX + 70;
  if FX > 500 then
    begin
    FX := 0;
    FY := FY + 70;
    end;

end;

procedure TForm1.Button1Click(Sender: TObject);
const
  C_DIM = 64;
var
  i: Integer;
  Function GetNewBitMap: TBitMap;
  begin
    Result := TBitMap.Create;
    Result.Width := C_DIM;
    Result.Height := C_DIM;
  end;

begin
  ReportMemoryLeaksOnShutDown := true;
  for i := 1 to 10 do
    With TGDIThread.Create(GetNewBitMap,
      'C:\temp\bild ' + intToStr(i) + '.png') do
      OnTerminate := ThreadTerminate;

  for i := 1 to 10 do
    With TGDIThread.Create(GetNewBitMap,
      'C:\Bilder\Kids' + intToStr(i) + '.jpg') do
      OnTerminate := ThreadTerminate;

end; 
```

# python - 使用 pythonbrew 管理不同 virtualenv 中的 python 版本

> ID：14802536
> 
> 赞同：0
> 
> 时间：2013-02-10T21:00:40.363
> 
> 标签：python, virtualenv, virtualenvwrapper, pythonbrew

我的主系统python版本是2.7.3。我正在尝试创建一个`virtualenv`使用版本 3.3.0 的。我安装了 pythonbrew、virtualenv 和 virtualenvwrapper。

我遵循了本教程：[http ://technomilk.wordpress.com/2011/07/27/setting-up-our-django-site-environment-with-pythonbrew-and-virtualenv/](http://technomilk.wordpress.com/2011/07/27/setting-up-our-django-site-environment-with-pythonbrew-and-virtualenv/)

本质上运行`pythonbrew use 3.3.0`，然后创建一个virtualenv。该教程说 virtualenv 将使用 pythonbrew 使用的版本。但事实并非如此。virtualenv 在我启动时使用 2.7.3。当我这样做时`pythonbrew use 3.3.0`，它会离开 virtualenv 并应用于系统而不是环境。

显然，pythonbrew 有自己的 virtualenv 包装器，它有一个教程：[http ://suvashthapaliya.com/blog/2012/01/sandboxed-python-virtual-environments/](http://suvashthapaliya.com/blog/2012/01/sandboxed-python-virtual-environments/)

我讨厌那样做。是否可以将 virtualenvwrapper 与 pythonbrew（而不是 pythonbrew 的 venv 包装器）一起使用，以便能够为每个 venv 选择使用哪个 python 版本，并将它们与系统 python 版本分开？

另外，我不想使用`mkvirtualenv -p`标志，因为这意味着我需要手动安装 python3.3。我宁愿坚持使用包管理器来管理 python 版本。很难相信 python 中的任何内容都不等同于 ruby​​ 中的 RVM ......除非我弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:25:54.330

也许你应该看看[http://pypi.python.org/pypi/pythonbrew/](http://pypi.python.org/pypi/pythonbrew/)。当我这样做时，我使用 pythonbrew 创建了 venv

```
pythonbrew install 2.7.3
pythonbrew switch 2.7.3
pythonbrew venv create proj 
```

像冠军一样工作。

我已经开始在我的 git repo 下的 .folder 中创建我的虚拟环境，这样我就可以在不弄乱我的代码的情况下处理虚拟环境，如果我愿意的话，我可以重建它。我在使用 jenkins 为您执行 git clone 时遇到了这种技术，然后您必须弄清楚如何围绕它构建一个虚拟环境。

```
Python/proj
    .proj           <---- Virtual environment is in here!
        lib
        site-packages
    settings
    requirements
    apps 
```

我还有一个对我有用的 bash 函数。

```
function workon() {
     if [ -d ~/Python/$1 ]
     then
            cd ~/Python/$1
            if [ -d .$1 ]
            then
                . .${1}/bin/activate
            else
                . bin/activate
                cd $1
            fi
     fi
} 
```

这对于处理在虚拟环境中完成克隆的旧项目以及虚拟环境在项目中的新项目来说过于复杂。

# java - 直方图最大值javacv的变化值

> ID：14802538
> 
> 赞同：0
> 
> 时间：2013-02-10T21:00:58.107
> 
> 标签：java, image, opencv, image-processing, javacv

我试图从我在图片上运行的直方图中获取最大值。我的直方图代码如下所示：（感谢堆栈溢出用户）

```
 public static CvHistogram getHueHistogram(IplImage image){

    if(image==null || image.nChannels()<3) new Exception("Error!");

    // Split the 3 channels into 3 images
    IplImageArray hsvChannels = splitChannels(image);

    //bins and value-range
    int numberOfBins=255;
    float minRange= 0f;
    float maxRange= 180f;

    // Allocate histogram object
   int dims = 1;
   int[]sizes = new int[]{numberOfBins};
   int histType = CV_HIST_ARRAY;
   float[] minMax = new  float[]{minRange, maxRange};
   float[][] ranges = new float[][]{minMax};
   int uniform = 1;
   CvHistogram hist = cvCreateHist(dims, sizes, histType, ranges, uniform);

   // Compute histogram
   int accumulate = 1;

   @SuppressWarnings("unused")
   IplImage mask = null;
   cvCalcHist(hsvChannels.position(0),hist, accumulate, null);
   return hist;
}

private static IplImageArray splitChannels(IplImage hsvImage) {
    CvSize size = hsvImage.cvSize();
    int depth=hsvImage.depth();
    IplImage channel0 = cvCreateImage(size, depth, 1);
    IplImage channel1 = cvCreateImage(size, depth, 1);
    IplImage channel2 = cvCreateImage(size, depth, 1);
    cvSplit(hsvImage, channel0, channel1, channel2, null);
    return new IplImageArray(channel0, channel1, channel2);
} 
```

现在这是我的 get max 方法：

```
public static float getHistMaxValue (CvHistogram hist){

    float[] minValue = {0};// these exist from when I was testing the function, ignore them
    float[] maxValue = {0};
    int[] minId = {0}; // these exist from when I was testing the function, ignore them
    int[] maxId = {0};  
    cvGetMinMaxHistValue( hist, null, maxValue, null, maxId);

    System.out.printf("%2f", maxValue[0]);

    return maxValue[0];
} 
```

现在在大多数情况下这工作正常，我的问题是每次运行程序时我的最大值从 1532、298027 和 298038 变化，即使直方图的图像保持不变。在获得直方图之前，我确实对图像进行了大量处理，但这些功能似乎工作正常。关于为什么这些结果往往会改变的任何想法？

# google-apps-script - 在 Google 的“if”中使用它设置脚本属性

> ID：14802540
> 
> 赞同：0
> 
> 时间：2013-02-10T21:00:59.863
> 
> 标签：google-apps-script

我有一个脚本，当指标超出 X 范围并且仅当有人输入新指标时，它应该发送图表 URL。每次我运行脚本时它都会发送邮件，所以我知道 setProperty 不起作用并且“if”语句不起作用，因为它只应该在 X 为 TRUE 时发送邮件。

工作表... [https://docs.google.com/spreadsheet/ccc?key=0Ai_2YLvaQba0dHN1dWFpY0ZSbGpudWF4cTJYNlFwNHc&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0Ai_2YLvaQba0dHN1dWFpY0ZSbGpudWF4cTJYNlFwNHc&usp=sharing)

我的代码...

```
function myAverages() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var value = ss.getSheetByName("EmailServices").getRange("P2").getValue().toString();
  var outside = ss.getSheetByName("EmailServices").getRange("S2").getValue().toString;
  var mailed = ss.getSheetByName("EmailServices").getRange("T2").getValue().toString();
  var stemiAverage = ss.getSheetByName("EmailServices").getRange("R2").getValue().toString();
  var stemiChart = ss.getSheetByName("EmailServices").getRange("U2").getValue().toString();
  var last = ScriptProperties.getProperty('last');

  //if "value" is not equal to ScriptProperty "last" AND "outside" is TRUE, then mail   
  if(value =! last, outside = "TRUE")

  {
   MailApp.sendEmail("dave@mydomain.com", "Metric Warning",
    "Yearly STEMI Average has fallen below 65%, it is now: " + stemiAverage + "%" +
    "\n\nTo see the current trending chart " + stemiChart + "\n\n The sheet that    calculated this is here " + ss.getUrl());
   ScriptProperties.setProperty('last','value');
  }
} 
```

感谢您提供的任何帮助。我正在自学这些东西，感觉非常像新手。在发布到这里之前，我已经尝试了一百种或更多的脚本组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:26:01.737

作为对菲尔的回答和您的评论的补充，您的脚本中还有另一个错误：

```
 ScriptProperties.setProperty("last","value"); 
```

应该

```
 ScriptProperties.setProperty({'last':value},true); 
```

该`true`参数是可选的，请参阅ScriptProperties 上的[文档](https://developers.google.com/apps-script/class_scriptproperties?hl=en#setProperties)，它使您可以删除所有其他键。

因此，您的完整功能与更正将是：

```
function myAverages(){
      var ss = SpreadsheetApp.getActiveSpreadsheet();
      var value = ss.getSheetByName("EmailServices").getRange("P2").getValue().toString();
  Logger.log('value = '+value)    
      var outside = ss.getSheetByName("EmailServices").getRange("S2").getValue().toString();
  Logger.log('outside='+outside)
      var mailed = ss.getSheetByName("EmailServices").getRange("T2").getValue().toString();
  Logger.log('mailed = '+mailed)    
      var stemiAverage = ss.getSheetByName("EmailServices").getRange("R2").getValue().toString();
      var stemiChart = ss.getSheetByName("EmailServices").getRange("U2").getValue().toString();
      var last = ScriptProperties.getProperty('last');
  Logger.log('last='+last)    
       if(value != last && outside == "true"){
          MailApp.sendEmail("me@mydomain.com", "Metric Warning",
          "Yearly STEMI Average has fallen below 65%, it is now: " + stemiAverage + "%" +
          "\n\nTo see the current trending chart " + stemiChart + "\n\n The sheet that    calculated this is here " + ss.getUrl());
          ScriptProperties.setProperty({'last':value});
  Logger.log('mail sent')
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:29:36.340

您需要使用 AND 运算符：`&&`。

此外，检查相等性需要 2 个等号：`==`.

所以一定要试试这个：

```
if (value!=last && outside=="TRUE") { 
```

# html - 仅在文本处于活动状态时显示图像

> ID：14802541
> 
> 赞同：3
> 
> 时间：2013-02-10T21:01:09.283
> 
> 标签：html, css, forms, image

我正在制作一份 MSN.com 网页的副本，用于练习我的 HTML 和 CSS。我设法获得了标题，以及它上面的所有内容，除了搜索表单。现在我知道如何制作表格了，我只是不明白其中一个小部件是如何工作的

例如：

看下图： http: [//gyazo.com/497d24dde39c04d9956c2faec4eb556f](http://gyazo.com/497d24dde39c04d9956c2faec4eb556f)

您可以看到它显示 MSN（橙色部分）的位置，箭头/三角形位于其正下方。我假设这个箭头是图像，对吗？你不能只通过 CSS 实现它吗？

所以我想知道如何在第一个单词处设置一个默认箭头，然后重新定位到活动链接/文本。

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:41:36.237

像 MSN 这样的简单灰色箭头实际上可以使用 CSS 制作。要使其跟随所选链接，您需要使用 JavaScript。别担心，这很简单。

首先，这里有一个关于 jsfiddle 的活生生的例子：http: [//jsfiddle.net/EBhVu/23/](http://jsfiddle.net/EBhVu/23/)

**HTML：**

```
<a href="#" class="active">Web</a> 
<a href="#">MSN</a>
<a href="#">Images</a> 
```

**CSS：**

这将构建小灰色箭头并将其放置在选定的链接下

```
a  {
    position:relative;
}
a:active:after, a.active:after  {
    position:absolute;
    right:50%; /* Centers arrow */
    top:100%; /* Places arrow below link */
    content:" ";
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent; /* Builds the arrow */
    border-right: 5px solid transparent;
    border-bottom: 5px solid grey;
} 
```

**JavaScript：**

每次单击链接时，此 JavaScript 都会为单击的链接提供“活动”类

```
$('a').on('click',function(){
    $('a').removeClass('active'); 
    $(this).addClass('active'); 
}); 
```

# php - 使用php显示文件夹中的所有图像

> ID：14802543
> 
> 赞同：1
> 
> 时间：2013-02-10T21:01:12.280
> 
> 标签：php, image, directory

我在我的 html 中使用了这个 php 代码，以便在名为 uploads 的文件夹中显示所有图片。唯一的问题是图标图像是唯一显示的图像类型。我做错了什么？

```
<?php
$files = glob("uploads/*.*");

$colCnt=0;
echo '<table border="1" style="width:590px;">';

for ($i=1; $i<count($files); $i++)
{
$colCnt++;
if ($colCnt==1)
echo '<tr>';
echo '<td width="25%" style="font-size:8.5px; font-family:arial">';

$num = $files[$i];
echo '<img src="'.$num.'" align="absmiddle" /> ';
print substr(substr($num,6,100),0,-4);`

echo '</td>';

if ($colCnt==4)
{
echo '</tr>';
$colCnt=0;
  }
}

echo '</table>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:06:05.890

循环似乎没问题。

你必须专注于结果来自

```
$files = glob("uploads/*.*"); 
```

尝试`print_r($files)`获取列表，然后查看它是否正确选择了所有图像。

# javascript - 在 JQM 的页面底部生成“LOADING”消息

> ID：14802547
> 
> 赞同：0
> 
> 时间：2013-02-10T21:01:54.963
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在构建一个基本的 jqm 页面，在页面末尾我得到一个带有“正在加载”文本的大标签。我看过很多答案，但没有人为我工作。我有这个 html 代码：

```
<!DOCTYPE html>
<html>
<head>
<title>StackMob JS SDK Examples</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="cordova-1.9.0.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery_migrate.js"></script>
    <script type="text/javascript" src="js/jquery_mobile.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.7.0-bundled-min.js"></script>   
    <script type="text/javascript">
        $(window).load(function(){
        $.mobile.hidePageLoadingMsg();
        });
    </script>
</head>
<body>
  <div data-role="page"> 
    <div data-role="header">...</div> 
    <input type="button" value="bbbb" id="bb">
    <div data-role="content">...</div> 
  <div data-role="footer">...</div> 
</body>
</html> 
```

这在我的 main.js 文件中：

```
$(window).load(function(){
    $.mobile.hidePageLoadingMsg();
});

jQuery('document').ready(function() {
    $.mobile.hidePageLoadingMsg();
    jQuery('#bb').click(function(){
        $.mobile.hidePageLoadingMsg();  
    });
}); 
```

没有任何工作！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:18:57.660

您需要在 mobileinit 事件期间执行此操作，如下所示：

```
<script type="text/javascript">
    $(document).bind('mobileinit',function(){
        $.mobile.loadingMessage = false;
    })
</script> 
```

还有一件事，这必须在加载 jQuery Mobile 之前完成，如下所示：

```
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript">
        $(document).bind('mobileinit',function(){
            $.mobile.loadingMessage = false;
        })
    </script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head> 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/RwRx9/](http://jsfiddle.net/Gajotres/RwRx9/)

更多相关信息可以在这里找到：http: [//jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T06:44:36.983

如果要完全删除加载消息，可以设置一个全局属性

```
$.mobile.loadingMessage = false; 
```

如果您想在页面级别执行此操作。将其绑定在“mo​​bileinit”函数中。

```
$("your page").on("pageinit", function(){
   // hide here
}); 
```

# php - 将动态创建的表单元素保存到 xml

> ID：14802548
> 
> 赞同：0
> 
> 时间：2013-02-10T21:01:59.687
> 
> 标签：php, javascript, jquery, arrays

我正在为移动应用程序使用网络服务器。我想创建一个 php 页面，用户可以通过单击鼠标来添加新的表单元素，然后将这些表单的值保存到 xml 文件中。我使用这样的函数来添加表单：

```
 $('a#add').click(function() {
            $('<p><input type="text" name="items[]" id="' + i + '" value="' + i + '" /><select name="items[]"><option value="1">Light</option><option value="2">Shadow</option></select><a href="#" class="remove"> Remove</a></p>'); 
            i++;        
            return false;
    }); 
```

现在如何将所有表单的所有值保存到一个数组中？然后我必须使用 simplexml 将所有值复制到一个 xml 文件中。对不起，我是这门语言的新手。

谢谢。

编辑

使用此代码，它传递一个数组，然后在 php 页面上，我们可以将数组的值存储到一个变量中，如“$bits = $_POST['items'][0];”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:06:50.967

用标签包装你的代码`<form action="foo.php">`。action 值描述了表单值在提交后发送到哪个 php 页面。

在 php 页面中，这些值在`$_GET`.

（也适用于`method="POST"`和`$_POST`。）

# java - BitmapFactory.decodeByteArray 运行时异常

> ID：14802549
> 
> 赞同：0
> 
> 时间：2013-02-10T21:02:05.000
> 
> 标签：java, android

这段代码给出了运行时异常，我无法捕捉到它。BitmapFactory.decodeByteArray 不返回 null 或类似的东西。

```
Bitmap bitmap = BitmapFactory.decodeByteArray(imbBytes, 0, imbBytes.length); 
```

注意：当 imbBytes 是 .png 的 byte[] 时会出错，当 .JPG 没有时。我尝试将 png 图像保存在目录中以检查 byte[] 是否正确并且一切正常。

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:11:43.640

从[文档中](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int%29)：

> **返回**解码的位图，如果图像无法解码，则返回 null。

# android - 两个具有相同背景颜色的 LinearLayout 在父视图中显示不同

> ID：14802552
> 
> 赞同：0
> 
> 时间：2013-02-10T21:02:31.857
> 
> 标签：android

我有这个布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:background="@android:color/black"
             android:gravity="center_horizontal"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent">

    <com.digitaliridium.tides.NVLibrary.NVGlobeView
            android:id="@+id/globeView"
            android:src="@drawable/icon"
            android:background="@color/nvglobebackground"
            android:scaleType="matrix"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

    <LinearLayout
            android:background="@color/paneltransparenciesbackground"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

        <TextView
                android:id="@+id/globeViewPortName"
                android:textSize="22dp"
                android:textStyle="bold"
                android:background="@android:color/transparent"
                android:layout_marginTop="5dp"
                android:layout_marginLeft="5dp"
                android:layout_width="fill_parent"
                android:layout_height="26dp"/>

        <TextView
                android:id="@+id/globeViewLocation"
                android:textSize="12dp"
                android:layout_marginTop="3dp"
                android:layout_marginLeft="5dp"
                android:background="@android:color/transparent"
                android:layout_width="fill_parent"
                android:layout_height="18dp"/>

        <TextView
                android:id="@+id/globeViewPortType"
                android:textSize="12dp"
                android:background="@android:color/transparent"
                android:layout_marginLeft="5dp"
                android:layout_width="fill_parent"
                android:layout_height="18dp"/>

    </LinearLayout>

    <LinearLayout
            android:background="@color/paneltransparenciesbackground"
            android:orientation="vertical"
            android:layout_gravity="bottom"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

        <RelativeLayout
                android:background="@color/paneltransparenciesbackground"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

            <ImageButton
                    android:id="@+id/indicatorMode"
                    android:src="@drawable/nv_selector"
                    android:background="@android:color/transparent"
                    android:layout_marginLeft="10dp"
                    android:layout_width="50dp"
                    android:layout_height="50dp"/>

            <ImageButton
                    android:id="@+id/homePort"
                    android:src="@drawable/nv_home_port"
                    android:background="@android:color/transparent"
                    android:layout_toRightOf="@id/indicatorMode"
                    android:layout_marginLeft="20dp"
                    android:layout_width="50dp"
                    android:layout_height="50dp"/>

            <ImageButton
                    android:id="@+id/gps"
                    android:src="@drawable/nv_gpsarrow_white"
                    android:background="@android:color/transparent"
                    android:layout_centerInParent="true"
                    android:layout_width="50dp"
                    android:layout_height="50dp"/>

        </RelativeLayout>

        <RelativeLayout
                android:background="@color/paneltransparenciesbackground"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

            <TextView
                    android:id="@+id/viewPointLocation"
                    android:textSize="12dp"
                    android:background="@android:color/transparent"
                    android:gravity="center_vertical"
                    android:layout_marginLeft="5dp"
                    android:layout_width="wrap_content"
                    android:layout_height="30dp"/>

            <TextView
                    android:id="@+id/scale"
                    android:textSize="12dp"
                    android:layout_marginLeft="20dp"
                    android:gravity="center_vertical"
                    android:layout_toRightOf="@id/viewPointLocation"
                    android:background="@android:color/transparent"
                    android:layout_width="wrap_content"
                    android:layout_height="30dp"/>

            <TextView
                    android:id="@+id/distance"
                    android:textSize="12dp"
                    android:layout_marginRight="10dp"
                    android:layout_alignParentRight="true"
                    android:gravity="center_vertical"
                    android:background="@android:color/transparent"
                    android:layout_width="wrap_content"
                    android:layout_height="30dp"/>

        </RelativeLayout>

    </LinearLayout>

    <ImageButton
            android:id="@+id/flipView"
            android:layout_marginTop="300dp"
            android:layout_gravity="bottom"
            android:layout_marginBottom="100dp"
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:scaleType="center"
            android:src="@drawable/sc_flip"
            />

</FrameLayout> 
```

这是生成的屏幕截图

![这是生成的屏幕截图](../Images/cb03d5858b3ac709d61eb5a8f238fe12.png)

您可以看到半透明面板（LinearLayouts）似乎具有不同级别的不透明性，即使它们具有相同的背景颜色。

设备屏幕上的差异比屏幕帽上的差异要明显得多。

谁能发现为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:06:59.423

在底部的 LinearLayout 中，它与具有相同背景的 RelativeLayout 组成。当您将两个半透明层叠加在一起时，它们看起来会变得不那么透明（就像它们相互覆盖一样）

将背景放在RelativeLayout 中，它们看起来会一样。

# c++ - 为没有继承的模板参数类提供构造函数

> ID：14802554
> 
> 赞同：3
> 
> 时间：2013-02-10T21:02:57.560
> 
> 标签：c++, templates, c++11, constructor

我有一个 C++ 类模板。它接受模板参数类 T 并将类型 T 的对象存储为私有成员，可通过称为 data() 的方法访问。下面的代码演示了它。我希望我的类模板提供一个方便的构造函数，该构造函数考虑到类型 T。例如，一个构造函数将 T 的一些字段作为参数并用它们的值初始化封装的 T 对象。

做到这一点的一种方法是让用户从模板实例化中派生并在那里添加他们自己的构造函数，但我自然更希望有一种方法来提供 ctor 而无需让用户编写派生类。

```
template <class T>
class Templ
{
public:
     T& data();
     const T& data() const;
private:
     T obj;
}; 
```

现在，如果用户想要一个方便的构造函数，他们必须派生 Templ：

```
class MyClass : public Templ<MyData>
{
public:
     MyClass (int size, MyClass* parent, float temperature, std::string name);
}; 
```

我读了一些 C++11 的东西，并有关于像 STL 这样的构造函数模板有 std::list::emplace() 方法集的想法，但我不确定什么是常见的最佳实践解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:06:42.793

是的，C++11 可变参数完美转发是你想要的：

```
template <class T>
class Templ
{
public:
     template<typename... Args>
     explicit Templ(Args&&... args) : obj(std::forward<Args>(args)...) {}

     T& data();
     const T& data() const;
private:
     T obj;
}; 
```

这会将构造函数的任何参数转发`Templ`给`T`构造函数。

但我想知道，为什么还要有这门课呢？你想做什么？

# javascript - 每个会话向 IE6-8 用户显示一次警告

> ID：14802560
> 
> 赞同：0
> 
> 时间：2013-02-10T21:03:17.077
> 
> 标签：javascript, jquery, internet-explorer

我环顾四周，找不到确切的解决方案，但如果确实存在，我深表歉意。

现在，我遇到的问题是每个会话向旧版本 Internet Explorer 的用户显示一个 div，即 < IE9。

这是我快速整理的代码，但它似乎不起作用，有人可以告诉我它有什么问题吗？我做错了吗？

```
<!--[if lt IE 9]>
<script>
    /* Set initial cookie after entire page has loaded */
    document.cookie="messageseen=true";

    /*********** 
       This cookie won't exist initially, but when the if statement below checks
       for the message seen cookie, the clear message cookie will also be set,
       this is so on subsequent page-loads, it won't take 5 seconds for the the
       message to disappear. 
    ***********/
    if (document.cookie == "clearmessage") {
       $('.ie-message').hide(); // hide message without delate
    }

    /*********** 
       After 5 seconds, check for the messageseen cookie, if it exists, set the
       clearmessage cookie and hide .ie-message. On all subsequent page-loads,
       the message will be hidden immediately without the delay.
    ***********/
    setTimeout(function (){
       if (document.cookie == "messageseen") {
          document.cookie="clearmessage=true";
          $('.ie-message').hide(); // hide message if cookie is set
       }
    }, 5000); // delay the hiding of the message for 5 seconds
</script>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:15:02.107

使用

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
<!--[if lt IE 9]>
<script>
    /* Set initial cookie after entire page has loaded */
    $.cookie("messageseen",true);

    /*********** 
       This cookie won't exist initially, but when the if statement below checks
       for the message seen cookie, the clear message cookie will also be set,
       this is so on subsequent page-loads, it won't take 5 seconds for the the
       message to disappear. 
    ***********/
    $('.ie-message').toggle(!$.cookie("clearmessage")); // hide message without delate

    /*********** 
       After 5 seconds, check for the messageseen cookie, if it exists, set the
       clearmessage cookie and hide .ie-message. On all subsequent page-loads,
       the message will be hidden immediately without the delay.
    ***********/
    setTimeout(function (){
       if ($.cookie("messageseen")) {
          $.cookie("clearmessage",true);
          $('.ie-message').toggle(0); // hide message if cookie is set
       }
    }, 5000); // delay the hiding of the message for 5 seconds
</script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:19:54.217

如果您只拥有一个 cookie，您可以执行以下操作：（请注意，我隐藏了 div 内联以防止在缓慢的页面加载时闪烁）

```
<!--[if lt IE 9]>
<div class"ie-message" style="display:none;">IE MESSAGE</div>
<script>
(function($){
  if ( document.cookie == "" ) {
  // show message
  $('.ie-message').show();
  // add cookie;
  document.cookie = "seen=true";
}
</script>
<![endif]--> 
```

# javascript - Superscrollorama - 多个元素的补间

> ID：14802562
> 
> 赞同：1
> 
> 时间：2013-02-10T21:03:32.420
> 
> 标签：javascript, jquery, html, scroll

这不应该太复杂，虽然我已经挂断了。我正在使用[Superscrollorama](http://johnpolacek.github.com/superscrollorama/)，这是一个 jQuery 插件，用于在元素滚动到浏览器中心时发生动画。

如果我想让两个元素在页面的不同区域到达浏览器中间时都消失，我需要在 JavaScript 中创建两个单独的补间。我不能拥有一个共享脚本中引用的类的淡入淡出元素。这是因为一旦第一个淡入淡出元素被击中，它就会触发两个动画。这是一段无法按我希望的方式工作的代码片段：

```
<!--HTML-->
<h2 class="fade-it">Fade It</h2>
<h2 class="fade-it">Fade It again</h2>

<!--JavaScript-->
var controller = $.superscrollorama();
controller.addTween('.fade-it', TweenMax.from( $('.fade-it'), .5, {css:{opacity: 0}})); 
```

还有[jsFiddle](http://jsfiddle.net/RPRzW/143/)。抱歉，如果我没有正确解释，这有点难以用词。这样做的要点是减少代码。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:23:28.460

你的答案就在你的描述中。你是对的：你不能有一个共享一个类的淡入淡出元素而不被触发。给这两个元素单独的 id 并使用它们的 id 而不是共享类创建两个单独的补间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:25:18.423

使用两个单独的补间。这就是它的工作方式。

# qt - 如何在 QTextEdit 中禁用快捷方式

> ID：14802563
> 
> 赞同：2
> 
> 时间：2013-02-10T21:03:35.317
> 
> 标签：qt, qtextedit

我正在使用 Qt5 从事科学计算器项目，我使用 QTextEdit 作为计算器的显示。我想禁用显示中的（Ctrl + A 和 Ctrl + C）等快捷方式，我该怎么做呢？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:10:54.593

键过滤器方法，创建一个为热键返回 false 的事件过滤器。这有点乏味，但应该解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T19:13:15.657

LineEdit 上的事件过滤是正确的方法，然后您可以忽略不想要的事件或覆盖行为。

一个肮脏的快捷方式（没有双关语）尝试是创建一个 QShortcut 并将其分配给一个空插槽。Qt 可能会抱怨不明确的快捷方式，并且可能不会对它做任何事情。肮脏的我知道:)

```
QShortcut *shortcut = new QShortcut(QKeySequence("Ctrl+A"), parent);
QObject::connect(shortcut, SIGNAL(activated()), receiver, SLOT(emptySlot())); 
```

也许你甚至可以忽略连接部分......

# meteor - Meteor+Blade 模板变量 catch 22

> ID：14802564
> 
> 赞同：0
> 
> 时间：2013-02-10T21:03:37.253
> 
> 标签：meteor, node-blade

我试图在我的 Blade 模板中使用一个变量，但我总是得到

> ReferenceError：文件未定义

我的理解是，将变量传递给模板的正确方法是这样的（`client/ceres.js`）：

```
Meteor.startup(function() {
    Files = new Meteor.Collection('files');
    Template['files'].files = function() {
        return Files.find();
    }
}); 
```

（复制自“待办事项”示例）

然后我应该可以在我的模板中使用它，`views/files.blade`：

```
ul
    foreach files as file
        li= file.filename 
```

但我猜变量传递给模板太晚了？但是如果我把我的 JS 拿出来，`Meteor.js`那就`Template`没有定义了。

所以我不明白。我的模板不存在，或者变量不存在，它总是崩溃。如何传递一个简单的变量？

* * *

与此相同的错误：

```
ul
    - for(var i=0; i<files.length; ++i)
        li= files[i].filename 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:31:50.227

结果你也不能*包含*使用模板变量的文件。即，您不能`include`在 Blade 中使用该指令~~根本~~如果你想在你的模板中使用尚未被 Meteor 初始化的变量——你必须在 DOM 加载后通过 jQuery/JS 插入你的模板。例子：

**意见/body.blade：**

```
.container
    h1 Page Title
    #content 
```

**视图/文件.blade：**

```
ul
    foreach files as file
        - console.log(file);
        li= file.filename 
```

**客户端/main.js：**

```
Files = new Meteor.Collection('files');
Template.files.files = function() {
    return Files.find();
};

$(function() {
    $('#content').html(Meteor.render(Template.files));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:29:59.153

这是 Meteor 的一个已知问题，正在积极处理中。

问题是 Meteor 阻止智能包指定文件的加载顺序。 [请参阅此处的问题](https://github.com/meteor/meteor/issues/181)。

由于这个问题，您的客户端 JavaScript 可能会在模板加载之前运行。（Meteor 中有一个 hack 可以确保在您的自定义代码之前加载 Handlebars 模板）例如，如果尚未定义，`Template.foo.helperName = function() { ... }`则会失败。`Template.foo`

检查为初始页面加载生成的 HTML（查看源代码），以查看您的客户端 JavaScript 代码是否在定义模板之前加载。如果是这样，您可能会收到如下错误：

```
TypeError: Cannot set property 'helperName' of undefined` 
```

要解决此问题，请尝试将您的客户端代码放在具有不同名称的文件夹中。我相信 Meteor 目前在确定加载顺序时会按字母顺序对文件进行排序。有关详细信息，请参阅[此页面](https://github.com/bminer/node-blade/wiki/Using-Blade-with-Meteor#troubleshooting-and-known-issues)上的故障排除部分。

`Meteor.startup`在将视图助手添加到视图时使用类似的解决方法。也就是说，你可以将你的`Template.foo.helperName = ...`东西包装在一个`Meteor.startup`电话中。但是，如果您使用的是`body.blade`模板，您可能会遇到相反的问题（即“catch 22”），即您的`body.blade`模板在视图助手设置之前开始渲染。在这种情况下，您可能会收到错误，因为尚未定义这些帮助程序/变量。此处的解决方案是避免使用`body.blade`模板，并且仅在加载所有视图助手后（即在您的`Meteor.startup`例程结束时）呈现初始模板。

无论如何，所有这些变通方法都相当蹩脚。:( 但是，唉！这些问题应该很快得到解决。

一旦 Meteor 解决了上述问题，我将修改 Blade 智能包以强制编译模板的加载顺序。我为混乱道歉。

# c - 计算 n! 当 m 不是素数时 mod m

> ID：14802566
> 
> 赞同：1
> 
> 时间：2013-02-10T21:03:43.490
> 
> 标签：c, algorithm, math, modulus

我已经阅读了很多很好的算法来计算 n！mod m 但它们通常在 m 为 prime 时有效。我想知道当 m 不是素数时是否存在一些好的算法。如果有人也可以编写算法的基本功能，我会很有帮助。我一直在使用

```
long long factMOD(long long n,long long mod)
{
    long long res = 1; 
    while (n > 0)
    {
        for (long long i=2, m=n%mod; i<=m; i++)
        res = (res * i) % mod;
        if ((n/=mod)%2 > 0) 
        res = mod - res;
    }
    return res;
} 
```

但是当我尝试打印 factMOD(4,3) 时得到错误的答案。这个算法的来源是：
[http ://comeoncodeon.wordpress.com/category/algorithm/](http://comeoncodeon.wordpress.com/category/algorithm/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:08:47.320

基本算法对 的任何值都有效`m`：

```
product := 1
for i := 2 to n
    product := (product * i) mod m
return product 
```

一个简单的优化是您可以提前退出并在`product`变为 0 时返回 0。如果 n > m，您也可以在开头返回 0，因为这保证了 n！是 m 的倍数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T21:16:29.970

这就是我想出的：

```
#include <stdio.h>
#include <stdlib.h>

unsigned long long nfactmod(unsigned long long n, unsigned long long m)
{
    unsigned long long i, f;
    for (i = 1, f = 1; i <= n; i++) {
        f *= i;
        if (f > m) {
            f %= m;
        }
    }
    return f;
}

int main(int argc, char *argv[])
{
    unsigned long long n = strtoull(argv[1], NULL, 10);
    unsigned long long m = strtoull(argv[2], NULL, 10);

    printf("%llu\n", nfactmod(n, m));

    return 0;
} 
```

还有这个：

```
h2co3-macbook:~ h2co3$ ./mod 1000000 1001001779
744950559
h2co3-macbook:~ h2co3$ 
```

在几分之一秒内运行。

# node.js - 在 Node.js 中获取套接字描述符

> ID：14802573
> 
> 赞同：1
> 
> 时间：2013-02-10T21:04:12.567
> 
> 标签：node.js, sockets

我想在 Node.js 中打开一个套接字，然后使用继承套接字描述符的子进程启动一组子进程。

我创建了一个服务器，`new net.Server()`但结果对象没有公开套接字描述符。如果我能得到描述符，我可以将描述符转发给子进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:22:35.693

看起来你不能这样做，因为 Windows 不支持它，并且 Node 的目标是在所有平台上使用相同的界面。

请参阅以下问题：[https ://github.com/joyent/node/issues/3025](https://github.com/joyent/node/issues/3025)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T15:20:01.663

这绝对是可能的。看看 Node.js 集群模块的实现方式。文件描述符从父进程传递到集群中的所有工作进程。

[https://github.com/nodejs/node/blob/master/lib/internal/cluster/master.js](https://github.com/nodejs/node/blob/master/lib/internal/cluster/master.js)

# r - 插入符号和 GBM 错误

> ID：14802575
> 
> 赞同：4
> 
> 时间：2013-02-10T21:04:29.620
> 
> 标签：r, r-caret

我正在尝试将`caret`R 中的包用于具有用户定义的性能指标的几个嵌套交叉验证过程。我遇到了各种各样的问题，所以我回过头来看看是否存在更多开箱即用的问题`caret`，似乎我遇到了一个问题。

如果我运行以下命令：

```
install.packages("caret")
install.packages("gbm")
library(caret)
library(gbm)

data(GermanCredit)
GermanCredit$Class<-ifelse(GermanCredit$Class=='Bad',1,0)

gbmGrid <- expand.grid(.interaction.depth = 1,
                       .n.trees = 150,
                       .shrinkage = 0.1)

   gbmMOD <- train(Class~., data=GermanCredit
                ,method = "gbm",
             tuneGrid= gbmGrid,
                distribution="bernoulli",
                bag.fraction = 0.5, 
                train.fraction = 0.5, 
                n.minobsinnode = 10, 
                cv.folds = 1, 
                keep.data=TRUE,
                verbose=TRUE

) 
```

我收到错误（或类似错误）：

> { 中的错误：任务 1 失败 - “参数暗示不同的行数：619、381”

带有警告：

```
1: In eval(expr, envir, enclos) :
  model fit failed for Resample01: interaction.depth=1, n.trees=150, shrinkage=0.1 
```

但是，如果我只运行 gbm 例程，一切都会很好。

```
gbm1 <- gbm(Class~., data=GermanCredit,
            distribution="bernoulli",
            n.trees=150, # number of trees
            shrinkage=0.10, 
            interaction.depth=1, 
            bag.fraction = 0.5,
            train.fraction = 0.5, 
            n.minobsinnode = 10, 
            cv.folds = 1, 
            keep.data=TRUE, 
            verbose=TRUE
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T12:48:07.150

有两个问题：通过`cv.folds`导致问题。此外，您不需要将结果转换为二进制数；这导致`train`认为这是一个回归问题。该函数背后的想法`train`是消除与建模函数的不一致性，因此我们使用因子进行分类，使用数字进行回归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T21:37:11.387

请注意 - 尽管此问题是由答案中描述的原因引起的，但旧版本的插入符号和 gbm 也可能出现错误消息（如下所示）。我遇到了这个错误，在花了很多时间试图找出问题所在之后，我不得不升级到最新版本的 caret (5.17-7) 和 gbm (2.1-0.1)。这些是今天在 CRAN 上的最新版本。

```
Error in { : 
task 1 failed - "arguments imply differing number of rows: ... 
```

# galleriffic - Galleriffic - 如何在鼠标悬停时显示 div，在鼠标悬停时隐藏？

> ID：14802578
> 
> 赞同：0
> 
> 时间：2013-02-10T21:04:52.190
> 
> 标签：galleriffic

将鼠标悬停在图库中的 div 元素（图像或文件名）上时，我试图在 div 中显示 exif 信息。在画廊之外做这件事很容易，但是当我尝试用画廊的 div 元素来做这件事时，什么也没有发生，因为内容是通过 jquery.galleriffic.js 动态提供的。

当您将鼠标悬停在图像上时，您可以在这里看到效果： [http ://forums.dpreview.com/forums/post/50833256](http://forums.dpreview.com/forums/post/50833256)

我有要在数据库中显示的 exif 信息，所以我只需要知道在将鼠标悬停在图像上时如何显示/隐藏 div。反复试验需要我一段时间，所以如果你是专家，我会很感激一些关于在 jquery.galleriffic.js 中放置 .bind("mouseover")... 语句的建议

这是一个类似的问题，但问题没有解决： [jQuery Galleriffic issue with jQuery inline](https://stackoverflow.com/questions/3710357/jquery-galleriffic-issue-with-jquery-inline)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:14:36.073

将 exif 数据添加到“标题”区域（在galleriffic.captionContainerSel 中定义），并在悬停幻灯片图像时使用css 显示/隐藏。

# c# - 如何在 c# winforms 中设置标签的内容并在 5 秒后将其重置为 string.empty？

> ID：14802579
> 
> 赞同：0
> 
> 时间：2013-02-10T21:05:03.553
> 
> 标签：c#, winforms, timer

我真的不知道如何做到这一点，我试过弄乱一个计时器，但到目前为止无济于事。

那我想做什么？

我有一个空白的标签。当某个事件被触发时，我希望标签在 5 秒内显示“竞赛成功设置”，然后我希望它恢复为空白。

这确定可以吗？？它可以？我玩过一个计时器，但我似乎很不合时宜。

任何帮助都将受到欢迎。我的微弱尝试如下。

```
private void UpdateLabel(object sender, EventArgs e)
        {
            var timer = new Timer()
                {
                    Interval = 5000,
                };
            timer.Tick += (s, evt) =>
                  lblCompetitionSetupSuccess.Text = "Competition successfully setup";

            timer.Start();

            lblCompetitionSetupSuccess.Text = string.Empty;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T21:10:51.307

换一种方式试试：

```
 private void button1_Click(object sender, EventArgs e)
    {
        label1.Text = "I will vanish in 5 sec";

        var timer = new Timer();
        timer.Interval = 5000;
        timer.Tick += (o, args) => label1.Text = "";
        timer.Start();
    } 
```

首先将标签设置为您希望它显示 5 秒的任何文本

```
 label1.Text = "I will vanish in 5 sec"; 
```

然后设置您的计时器，以便在计时器经过时它将删除文本

```
 var timer = new Timer();
        timer.Interval = 5000;
        timer.Tick += (o, args) => label1.Text = "";
        timer.Start(); 
```

如果您希望计时器在第一个计时器过去后停止：

```
 timer.Tick += (o, args) =>
            {
                label1.Text = "";
                timer.Enabled = false;
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:09:13.183

确保您使用的是[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)在 UI 线程上调用 tick 事件的类。

# jquery - AngularJS 告密者服务

> ID：14802584
> 
> 赞同：5
> 
> 时间：2013-02-10T21:05:37.500
> 
> 标签：jquery, dom, angularjs, dom-manipulation, angularjs-service

我在我的 web 应用程序中使用 Twitter Bootstrap 的 UI。特别是它的[警报](http://twitter.github.com/bootstrap/javascript.html#alerts)组件。我想编写一个简单的角度服务来包装 Bootstrap 的警报，以便有可能通知用户任何角度代码的和平。像这样：

```
Informer.inform("message", "ERROR"); // will result in alerting with `alert-error` class
Informer.inform("message", "INFO"); // will result in alerting with `alert-info` class 
```

我的想法是将模板附加到`<body>`：

```
<div class="alert {{alertClass}} fade in informer" id="informer">
    <button type="button" class="close" data-dismiss="alert">×</button>
    <div class="valignCenterWrapper">
        <div class="valignCenter" id="informerMessage">
            {{message}}
        </div>
    </div>
</div> 
```

像这样的东西：

```
grfx.factory("Informer", function() {
    return {
        inform : function(message, type) {
            // Here be dragons. How can I compile/append the template.

            $("#inform").alert();
        }
    };
}); 
```

我唯一想知道的是：我如何用 Angular 而不是 jQuery 编写这个？上面的代码适合开始吗？互联网上的人说我应该**只**使用指令进行 DOM 操作。但我不明白：我没有任何现有的标记来应用指令。由于某些计算/用户交互，警报将附加到页面。我应该使用哪些服务（`$compile`, `$parse`, `$document`）来编译模板并将其附加到正文的某个位置？

**编辑**：是否也可以在控制器之外获得 angularjs 服务。只是在普通的 JS 代码中，所以我可以写`getServiece("Informer").inform("", "")`？

**编辑 2**：好的，我现在拥有的：

```
grfx.factory("Informer", function($compile, $rootScope) {
    return {
        inform : function(message, type) {
            var scope = $rootScope.$new();

            scope.message = message;
            scope.type = type;

            $(document.body).append($compile("<div class='alert {{type}} fade in informer' id='informer'><button type='button' class='close' data-dismiss='alert'>×</button><div class='valignCenterWrapper'><div class='valignCenter' id='informerMessage'>{{message}}</div></div></div>")(scope));
        }
    };
}); 
```

使用此代码，我可以使用来自控制器的注入服务。但是当我尝试在角度代码之外调用服务时出现问题：

```
angular.element(document).injector().get("Informer").inform("Message", "alert-error"); 
```

这显示弹出窗口，`{{message}}`例如它没有正确编译模板。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T10:16:00.080

在 AngularJS 中，我们应该专注于模型操作，您的`Informer`服务也不例外——它应该只保存模型，而不应该关注 DOM 操作。DOM操作=指令的经验法则是一个非常好的规则，如果你遵循它，它将为你省去很多麻烦。

回到您手头的问题，解决方案是提供专注于模型操作的服务和显示此模型的指令。让我们从服务开始：

```
app.factory('Informer', function(){

  var messages = [];  
  var Informer = {};

  Informer.inform = function(msg, type) {
    messages.push({
      msg: msg,
      type: type
    });
  };

  Informer.allInfos = function() {
    return messages;
  };

  Informer.remove = function(info) {
    messages.splice(messages.indexOf(info), 1);
  };  

  return Informer;
}); 
```

当此服务准备就绪时，您可以轻松地在控制器中使用它（甚至在其他服务中！）：

```
app.controller('MainCtrl', function($scope, Informer) {

  Informer.inform("error message", "error");
  Informer.inform("info message", "info");

  $scope.allInfos = Informer.allInfos;  
  $scope.remove = Informer.remove;
}); 
```

最后，要呈现警报，您可以直接使用引导程序的标记，或者编写一个非常简单的指令来封装它。[在这里，我使用来自http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)的警报指令

```
<body ng-controller="MainCtrl">
    <alert ng-repeat="alert in allInfos()" type="alert.type" close="remove(alert)">{{alert.msg}}</alert>
  </body> 
```

当然，您不需要使用此 repo 中的指令，如果需要，您可以创建自己的或使用原始标记。

这是一个演示工作示例的 plunker：[http ://plnkr.co/edit/VxAcjHFhxXODFB5iAfyX?p=preview](http://plnkr.co/edit/VxAcjHFhxXODFB5iAfyX?p=preview)

总结一下：

*   根据经验，不要在指令之外进行 DOM 操作
*   处理模型的服务应该与模型的表示分离

我还建议在*学习*AngularJS 时从项目中删除 jQuery。这样，您将更快地进入 AngularJS-zen 状态！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T09:31:30.823

我相信，角度方式是尽可能少地手动操作 dom。即使你必须操纵它——也只能在指令中进行。

因此，与 jQuery 不同，要走的路是拥有一个模型并使用绑定来更改您的 dom。

出于这个原因，我会选择的方式 - 它有一些 InformerController 绑定在您的布局模板中的某处，并迭代当前通知的数组，并直接*绘制*它们。

```
app.controller('InformersController', function($scope, InformerService) {
    $scope.informs = InformerService.get();
    $scope.close = function (index) {
          InformerService.close(index)
    }
}); 
```

在您的模板中：

```
<div ng-controller="InformersController">
     <div ng-repeat="inform in informs">
         <div class="alert {{inform.alertClass}} fade in informer">
            <button type="button" ng-click="close($index)" class="close">×</button>
            <div class="valignCenterWrapper">
                <div class="valignCenter">
                    {{inform.message}}
                </div>
            </div>
        </div>
     </div>
 </div> 
```

如果您需要从任何地方显示一些警报，请使用它注入`InformerService`您的控制器，并使用它添加数据。

```
app.service('InformerService', function () {

    var informs = [];
    this.get = function () {
        return informs;   
    };
    this.inform = function (message, type) {
        informs.push({
            alertClass: 'alert-' + type,
            message: message
        });
    }
    this.close = function (index) {
       informs.splice(index, 1);
    }

}); 
```

例如：

```
app.controller('SomeController', function($scope, InformerService) {
    $scope.doError = function (msg, type) {
        InformerService.inform(msg, type);
    };
}); 
```

在您的模板中：

```
<div class="well" ng-controller="SomeController">
    <button class="btn btn-danger" ng-click="doError('Hello', 'error')">Error</button>  
    <button class="btn btn-info" ng-click="doError('Hello', 'info')">Info</button>  
</div> 
```

你可以在这个小提琴上看到这一切：http: [//jsfiddle.net/zc3YH/6/](http://jsfiddle.net/zc3YH/6/)

# delphi - 从不同的类/作为属性访问类/组件过程

> ID：14802585
> 
> 赞同：-2
> 
> 时间：2013-02-10T21:05:57.230
> 
> 标签：delphi

我在调用不同形式的类的函数时遇到了麻烦，这个类作为第二类的属性在两个类之间共享

```
TMyClass = class
private

public
procedure onconnect (...);

end;

TFormA = class(TForm)

MYCLASS : TMyClass;

procedure StartFormB(...)

end;

TFormA.procedure StartFormB(...)
begin

  bForm.MYCLASS := MyClass;

  bForm.Show;

end; 

TFormB = class(TForm)
private
....
FMYCLASS : TMyClass;
public
......
.....
property MYCLASS : TMyClass  read FMYCLASS write FMYCLASS; 

end; 
```

假设 TMyClass 类似于 Indy TCP 服务器，如何在 bForm 中调用类事件过程 onconnect(..) 或 onexecute(..) 函数，只需通过属性访问共享类实例？

这很简单

```
 aForm : TMyForm;

 aForm.onconnect(...); 
```

此过程链接到类事件过程，但 bForm.FMyClass.onconnect(...)

不起作用，我无法建立到类事件过程的链接......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:39:24.923

如果问题是如何能够从另一个单元中的类的对象属性调用方法，那么答案是：

*   确保对象属性被声明为**public**或**published**，
*   确保该方法被声明为**public**。

然后通过以下方式调用该方法：

```
begin
  FormA.MyClass.OnConnect(); 
```

* * *

从您的编辑可以理解，您实际上并没有试图调用该**属性**，而是它背后的私有**字段。**故意的，这是行不通的。属性*旨在*保护它们背后的实际价值。在您的情况下，用于读取属性的访问说明符将编译器直接重定向到私有字段，但它也可能是一个函数。

因此：调用属性 ( `MyClass`)，而不是字段 ( `FMyClass`)。

# git - 使用 TortoiseGit 更新和提交单个文件，例如 TortoiseSVN

> ID：14802586
> 
> 赞同：0
> 
> 时间：2013-02-10T21:05:59.143
> 
> 标签：git, tortoisegit

我们的一个客户在 beanstalkapp.com 上设置了几个版本控制项目。

其中大部分带有颠覆性。我在 Windows 上安装并设置了 TortoiseSVN；这使我可以在我的计算机上拥有所有文件的副本。如果我想更改文件，我可以右键单击它并选择“更新”（以确保在编辑之前将其更新到最新版本），进行更改，然后右键单击它并选择“提交”。我还可以选择一些我已更改的文件，然后将它们全部提交。

最新的项目使用 git。我安装并设置了 TortoiseGit，在我的计算机上克隆了存储库，但发现界面更加混乱。

1）我似乎无法找到一种只更新单个文件的方法，而无需下载每个更改的文件。我相信这是通过右键单击文件夹（而不是文件）并选择 TortoiseGit -> Pull 来全局完成的。如果我尝试右键单击单个文件夹，则没有拉；有一个“检查修改”，但它似乎没有做它听起来的样子。

2）我同样对提交感到困惑。如果我右键单击并选择 Git commit -> master，它确实允许我检查/取消选中我想要更改的文件。但后来看来我也必须做一个“推动”，这似乎也是全球性的。当我尝试更新文件、提交并选择“推送”时，文件已正确更新，但 Beanstalk 还在其日志中列出了我进行了另一项更改：

xxx.beanstalkapp.com:/xxx 的'合并分支'master'

包括一个我根本没有接触过的文件。当我选择“推送”时，我看不到任何文件列表。

我一直在阅读有关 stackoverflow 的各种文章以解决类似的问题，但大多数似乎是为了解大量有关 git 技术信息的人准备的；使用命令行、分支等

是否有任何简单的方法来更新一个文件、编辑它并提交它，或者这对于 TortoiseGit 是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:42:31.443

**与 Subversion 不同， Git**不支持具有不同基本版本的*工作树*（svn：*工作副本）的部分；*总是有一个“HEAD”提交，它是整个树的基本修订。也无法*下载*某些更改而不是其他更改；预计您可以获得整个历史记录（直到您最后一次获取更改）并且您*在本地*导航该历史记录（一次仍然是整个提交）。

*您可以使用index*提交部分更改，但提交的签出/推送/拉取始终是对整个树的操作。

（我对 TortoiseGit 不熟悉，但是如果它添加了这些功能，那么由于需要扩展存储库格式，它必然与命令行 Git 不兼容。）

**如果需要构建混合修订状态**，那么首先，感兴趣的更改必须在单独的提交中（在 Git 中进行细粒度提交通常是个好主意；`git rebase -i`可用于在发布前拆分和合并提交他们）。创建从一个感兴趣的修订派生的临时分支；然后使用`git merge`或`git cherry-pick`添加来自其他分支的更改，或`git revert`撤消对该分支历史记录的过去更改。

# mysql - SQL 查询（或函数）查找总数。表中特定字符串的出现次数

> ID：14802589
> 
> 赞同：0
> 
> 时间：2013-02-10T21:06:20.723
> 
> 标签：mysql, sql, oracle, phpmyadmin

我有一张大桌子，其中一列有来自许多用户（数千行）的文本回复。我需要在该响应列中找到特定单词的出现总数。如果我使用

```
SELECT count(*) from Table where Response like '%wordtobefound%' 
```

它给出了包含“wordtobefound”的行数，但我需要在所有行中出现“wordtobefound”这个词的总数。

注意：我更喜欢用户定义的函数，我可以将它添加到数据库并一次又一次地使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:14:51.360

```
SELECT SUM(BINARY (LENGTH(field_name) - LENGTH(REPLACE(field_name, "your_word", "")))/LENGTH("your_word")) FROM table_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:17:11.217

尝试这个 ：

```
SELECT
    CAST((LENGTH(Response) - LENGTH(REPLACE(Response, 'wordtobefound', ""))) / LENGTH('wordtobefound') AS UNSIGNED) AS wordCount
FROM Table 
```

您可以使用 SUM 作为总数：

```
SELECT
    SUM(CAST((LENGTH(Response) - LENGTH(REPLACE(Response, 'wordtobefound', ""))) / LENGTH('wordtobefound') AS UNSIGNED)) AS wordCount
FROM Table 
```

# .htaccess - .htaccess 重定向是否会影响 Google Analytics

> ID：14802590
> 
> 赞同：3
> 
> 时间：2013-02-10T21:06:22.790
> 
> 标签：.htaccess, redirect, web, google-analytics, http-headers

我正在开发一个网站，它的根目录在 /home/ 文件夹中。

由于我将使用 htaccess 重定向，将访问者从根文件夹“驱动”到 /home 文件夹，我的问题是：

HTTP 引用标头是否会在重定向中丢失？我的意思是，如果访问者来自 www.onesite.com 并且链接重定向到 www.mysite.com，那么我会重定向到 www.mysite.com/home。谷歌分析代码，会赶上作为 www.onesite.com 或 www.mysite.com 的引用者吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:32:03.327

之前有人问过这个问题：

[302 重定向会维护引用字符串吗？](https://stackoverflow.com/questions/2158283/will-a-302-redirect-maintain-the-referer-string)

[301 重定向是否始终保留引荐来源网址？](https://stackoverflow.com/questions/1398277/does-301-redirect-always-preserve-referrer)

简短的回答。*也许*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:10:18.430

我希望这不会被标记为“不具建设性”，但我认为这将是您的原始网站 (www.mysite.com)，但是您可以在 www.mysite.com 页面而不是 /home 上分析引荐。

# javascript - 防止 D3 中的文本剪辑（Javascript 图表）

> ID：14802600
> 
> 赞同：4
> 
> 时间：2013-02-10T21:07:01.667
> 
> 标签：javascript, d3.js

我在 D3 中绘制饼图，但文​​本剪辑本身有问题：

![在此处输入图像描述](../Images/f0999743afe48db89265c1efa411ea88.png)

这是我的绘图功能：

```
 pie: function(config)
    {
        var width = config.width || 840,
            height = config.height || 520,
            radius = Math.min(width, height) / 2;

        var color = this._color = d3.scale.ordinal().range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);
        var arc = d3.svg.arc().outerRadius(radius - 10).innerRadius(0);
        var pie = d3.layout.pie().sort(null).value(function(d) { return d.value; });

        var svg = d3.select("body").append("svg").attr('id', config.id || 'chart').attr("width", width).attr("height", height)
                    .append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

          var g = svg.selectAll(".arc").data(pie(config.data)).enter().append("g").attr("class", "arc");
          g.append("path").attr("d", arc).style("fill", function(d) { return color(d.data.name); });

          g.append("text")
              .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
              .attr("dy", ".35em")
              .style("text-anchor", "middle")
              .text(function(d) { return d.data.name; });
        return $('#'+(config.id || 'chart'));
    }, 
```

有没有一种简单的方法可以防止这种文本剪辑？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T22:01:48.590

**更新**：如果有足够的空间来获得更全面的答案，请参阅[D3 的答案，将弧标签放入饼图中。](https://stackoverflow.com/questions/19792552/d3-put-arc-labels-in-a-pie-chart-if-there-is-enough-space/19801529#19801529)

* * *

如果通过*避免裁剪*意味着`<text>`元素不应被随后的*arc*遮挡，那么这可以通过使`<text>`元素出现在`.arc`DOM 中的元素之后来实现。一种方法如下所示：http: [//jsfiddle.net/tu3Pk/2/](http://jsfiddle.net/tu3Pk/2/)

在这里，我创建了一个新`g.arc-labels`元素，其中包含标签并出现在 DOM 之后`g.arcs`。

```
pie: function (config) {

    // ...

    var g = svg.selectAll(".arc")
            .data(pie(config.data))
          .enter()
            .append("g")
            .attr("class", "arc");

    g.append("path")
        .attr("d", arc)
        .style("fill", function(d) { 
            return color(d.data.name); 
        });

    // Creating a new g for labels
    var gLabel = svg.selectAll('.arc-label')
                  .data(pie(config.data))
                .enter()
                  .append('g')
                  .attr('class', 'arc-label');

    gLabel.append("text")
        .attr("transform", function(d) { 
              return "translate(" + arc.centroid(d) + ")"; 
        })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function(d) { return d.data.name; });

    // ...
} 
```

* * *

但是，这对易读性没有多大帮助。为了使标签更清晰，您可能想看看这个问题：[防止 D3 饼图中的文本重叠，](https://stackoverflow.com/questions/14534024/preventing-overlap-of-text-in-d3)在这种情况下，解决方案将在以下几行：http: [//jsfiddle.net/tu3Pk/3/](http://jsfiddle.net/tu3Pk/3/)

```
// Get the angle on the arc and then rotate by -90 degrees
function getAngle(d) {
    var ang = (180 / Math.PI * (d.startAngle + d.endAngle) / 2 - 90);
    return (ang > 180) ? 180 - ang : ang;
};

// ...

pie: function (config) {

    // ...

    gLabel.append("text")
        .attr("transform", function(d) { 
              return "translate(" + arc.centroid(d) + ") " +
                     "rotate(" + getAngle(d) + ")";
        })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function(d) { return d.data.name; });

    // ...
} 
```

# ios - loadView 和 viewDidLoad 之间的 SIGABRT

> ID：14802601
> 
> 赞同：0
> 
> 时间：2013-02-10T21:07:03.677
> 
> 标签：ios, objective-c, debugging, uiviewcontroller, sigabrt

我是 iOS 开发新手，无法识别`SIGABRT`. 我把它缩小到在`UIViewController`子类初始化期间发生的事情，特别是在它的`loadView`和`viewDidLoad`方法之间。

`NSLog`我通过调用子类中的每个方法重载来缩小范围`UIViewController`。但是，我无法从调试器中获得更多粒度；我无法进入该`[super loadView]`方法。除了 NSLogs 和单步调试器之外，还有什么技术可以调试 SIGABRT？有什么办法可以准确地看到异常是从哪里引发的？

**程序特定的详细信息**

该程序使用核心数据；我按照[本教程](http://timroadley.com/2012/02/19/core-data-basics-part-4-relationships/)创建了它。我相信 SIGABRT 是在我浏览完“Relationships In Action”部分之后开始发生的，而之前没有发生（我*认为*我在前一部分结束时已经成功构建）。具体来说，我可以成功添加一个人，但会在和`PersonDetailTableViewController`之间抛出一个 SIGABRT 。`loadView``viewDidLoad`

我尝试从 iPhone 模拟器中删除应用程序，并运行 Product > Clean；两者都没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:46:52.720

找到了罪魁祸首。我之前通过 ctrl+从 a 拖到我的子类中错误地创建`Table View Cell`了`Text Field`IBOutlet `UITableViewController`。我手动删除了此创建的代码，但连接检查器中仍保留一个连接。删除该连接解决了问题——不再需要 SIGABRT。

不幸的是，Xcode 看到了这个问题（见附图中的感叹号），但除了神秘的 SIGABRT 之外，没有以任何方式告诉我。

![连接检查器显示无效连接](../Images/b3ff1fb1413f3c11cb59e7aa8433c2dc.png)

# jsp - Spring MVC-如何解析视图？

> ID：14802602
> 
> 赞同：0
> 
> 时间：2013-02-10T21:07:08.323
> 
> 标签：jsp, spring-mvc

我是 Spring 新手，我正在开发一个虚拟银行交易项目。到目前为止，我已经创建了一个欢迎页面，将我链接到可以执行存款或取款交易的页面。数据库和一切工作正常。而且，我有一个表格，显示具有 4 个属性（id、name、acctNo、balance）的客户列表。该 ID 链接到下一页，我只想显示有关此客户的信息。我怎样才能做到这一点。

Dispatcher-Servlet.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd" 
    xmlns:p="http://www.springframework.org/schema/p">      
     <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">

        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>
    <bean id="urlMapping"
        class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="interceptors">
            <list>
                <ref local="localeChangeInterceptor"/>
            </list>
        </property>
        <property name="urlMap">
            <map>              
                <entry key="/login.html">
                    <ref bean="userloginController"/>
                </entry>
            </map>          
        </property>             
    </bean>

   <!-- I tried adding this bean but noe luck, not sure where to use this id to map this bean -->
     <bean id="showindividualCustomer" class="com.showCustomerController">s
        <property name="successView"> <value>ViewCustomer</value></property>
     </bean>

     <bean id="userloginController" class="com.UserLoginFormController">
        <property name="sessionForm"><value>false</value></property>
        <property name="commandName"><value>userLogin</value></property>
        <property name="commandClass"><value>com.UserLogin</value></property>
        <property name="formView"><value>userLogin</value></property>
        <property name="successView"><value>showCustomer</value></property>
    </bean>

    <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="hl"/>
    </bean> 
    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver"/>      
</beans> 
```

bean=showindividualcustomer 的控制器是：

```
public class showCustomerController extends SimpleFormController{

    protected ModelAndView onSubmit(Object obj) throws ServletException{

        return new ModelAndView("ViewCustomer");//name of the jsp page inside WEB-INF/jsp
    }
} 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:32:28.310

我实际上建议充分利用 spring 3，查看您的代码，我假设您正在查看 spring 2 教程。

使用 spring 2.5.6 或 spring 3.* 你可以这样做：

```
 @RequestMapping(value="/customer/{id}")
    public String showCustomerInformation(@PathVariable String id, HttpServletRequest request){
        //your logic to get the customer information and pass it on
        return "customerInformation";
    } 
```

一些参考资料： [http ://tech-read.com/2011/10/31/spring-3-mvc-annotations/](http://tech-read.com/2011/10/31/spring-3-mvc-annotations/) [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference /html/mvc.html#mvc-ann-requestparam](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestparam)

编辑：将您的方法签名更改为：

```
onSubmit(HttpServletRequest request, Object command) throws ServletException 
```

只需使用：

```
request.getParameter("id") 
```

# c++ - OpenCV createTrackbar

> ID：14802603
> 
> 赞同：0
> 
> 时间：2013-02-10T21:07:09.250
> 
> 标签：c++, opencv

我正在尝试使用 OpenCV 提供的 createTrackbar 函数在我的 OpenCV 应用程序上创建一个跟踪栏。

我想添加三个轨迹栏，实际上一个将在颜色范围内随机播放，第二个通过 Canny 过滤器值随机播放，第三个通过 medianBlur 值随机播放。

我正在努力添加指向整数变量的指针，其值将反映滑块的位置。

所以这是我的 inRange & Canny filter & medianNlur 函数：

```
 Mat range_out;
        inRange(blur_out, Scalar(100, 100, 100), Scalar(120, 255, 255), range_out); 

    Mat mBlur;
        medianBlur(erode,mBlur,7);

        Mat canny_out;
        Canny(mBlur, canny_out, 125,350);

        createTrackbar("Colour values: ", window_Output, &range_out, 255);
createTrackbar("Colour values: ", window_Output, &mBlur, 7);
createTrackbar("Colour values: ", window_Output, &canny_out, 350); 
```

从我读到的变量必须是整数（即 range_out 是 Matrix Mat 而不是 int）

有人可以指导我到一个体面的教程，在那里我可以找到我正在寻找的答案或解释如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:28:09.620

我通常以以下方式使用回调函数，这使得代码不那么繁琐。

```
const int median_blur_max = 5;
int median_blur;
Mat img;
Mat src, dst;

void callBackFunction( int, void* ) {
    medianBlur(src,dst,median_blur);
    imshow("Controls", img );
}

int main( int argc, char** argv ) {
     namedWindow("Controls", 1);
     createTrackbar("Median blur", "Controls", &median_blur, median_blur_max, callBackFunction );

     callBackFunction(median_blur, 3);

     waitKey(0);
     return 0;
} 
```

该示例不完整，但很好地概述了 callBackFunction 的元素和用法。

我似乎不清楚您是否希望更改`Mat`您的函数，但如果是这种情况，您可以简单地添加一个`switch-case`or`if-sentence`来`callBackFunction`更改给定函数调用的 Mat 。

# php - 邮件功能在本地主机服务器中不起作用

> ID：14802606
> 
> 赞同：7
> 
> 时间：2013-02-10T21:07:52.090
> 
> 标签：php, email, localhost

我在我的本地主机服务器上。我在下面使用此代码，但我从未收到过电子邮件。

```
<?php
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-07T12:05:45.580

我知道有点晚了...

检查您的本地主机是否配置为发送电子邮件

在 ubuntu 终端上尝试执行以下命令

```
# apt-get install sendmail 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T21:09:36.660

确保在 php.ini 文件中正确配置了邮件服务器。

在 php.ini 文件中像这样注释掉这些行并重新启动 Apache 服务器。

```
/*[mail function]
; XAMPP: Comment out this if you want to work with an SMTP Server like Mercury
; SMTP = localhost
; smtp_port = 25
*/

/*; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = postmaster@localhost
*/ 
```

# python - 在 Blender 中无线读取数据时运行游戏引擎

> ID：14802608
> 
> 赞同：1
> 
> 时间：2013-02-10T21:08:35.697
> 
> 标签：python, blender, data-transfer

我有一个 Blender 代码，它从 csv 文件中获取数据集，并使用它们在游戏引擎中旋转机器人手臂和人体模型。此代码工作正常，但现在我想通过无线连接将数据发送到 Blender。

我在 Blender 中设置了一个服务器代码（在 Python 3 上运行）

```
# Server Program
# Make sure the client is being run on the data generation computer

SERVER_LOOP = True

import socket
import sys
import json
import bge

cont = bge.logic.getCurrentController()
owner = cont.owner

print ('INFO: Starting up')

# Create a TCP/IP socket to listen on
print ('INFO: Creating TCP/IP Socket')
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Prevent from 'ADDRESS ALREADY IN USE' upon restart
print ('INFO: Housekeeping...')
server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

# Bind the socket to port 8081 on all interfaces
server_address = ('localhost', 8081)
print ('INFO: Binding and starting up on %s port %s' % server_address)
server.bind(server_address)
print ('INFO: Server bound')

def send_welcome(cont):
    cont.send('SERVER: Welcome'.encode('utf8'))

# Listen for connectons for 5 seconds
server.listen(5)

# Connection is the SOCKET OBJECT for the connection
# Client_address is the connected peer(the client)
connection, client_address = server.accept()
print ('INFO: Connection from', connection.getpeername())
print ('INFO: Sending welcome msg')
send_welcome(connection)
print ()

while SERVER_LOOP:

    # Receive data
    try:
        data = connection.recv(10000)

    # Unless there's an error
    except OSError:
        print (connection)

    # Decode the data into usable lists
    if type(data) != type(''): 
        data = data.decode()

    # If we want to end the client stream but keep the server running    
    if data=='end' or data=='End' or data=='END':
        print ('INFO: Closing connection with ',connection.getpeername())
        connection.shutdown(socket.SHUT_RD | socket.SHUT_WR)
        print ()
        connection.close()
        connection, client_address = server.accept()
        print ('INFO: Connection from', connection.getpeername())
        print ('INFO: Sending welcome msg')
        send_welcome(connection)
        print ()

    # If we want to stop running the server
    elif data=='end server' or data=='End server' or data=='End Server':
        print ()
        print ('SERVER SHUT DOWN')
        SERVER_LOOP = False

    # Display when data is loaded back on the client side
    else:
            # gives feedback in server command line
            data = json.loads(data)
            owner['test'] = data
            print ('CLIENT: %s' % data)
            message = 'ping'
            connection.send(('SERVER: %s' % message).encode('utf-8'))
            print ('SERVER: %s' % message) 
```

以及与它一起运行的客户端代码（这个在 Python 2.7 上运行）

```
# Client Program
# Make sure the server is being run in Blender

import socket
import time
import json

print 'INFO: Creating Socket'
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

ip_addr = raw_input('IP: ')
port_addr = raw_input('PORT: ')

# Type 'localhost' in the IP field
# Type '8081' in the PORT field

print 'INFO: Connecting to server'
s.settimeout(5) # Times out if 5 seconds without connecting to client
s.connect((ip_addr, int(port_addr)))

# Listen for welcome
data = s.recv(10000)
print data
print ''
while 1:
    message = raw_input('CLIENT: ')
    if message=='end' or message=='End' or message=='END':
            print ''
            print 'SHUTTING DOWN CLIENT, SERVER STILL RUNNING'
            s.send(message)
            break
    elif message=='end server' or message=='End server' or message=='End Server':
            print ''
            print 'SHUTTING DOWN SERVER'
            s.send(message)
            break
    else:
            s.send(message)
            data = s.recv(10000)
            print data

print 'INFO: Closing socket'
s.close()
print 'INFO: Quitting' 
```

现在，显然这不会进行旋转；这只是一个测试脚本，以确保两者之间的数据传输正常。确实如此——在 Blender 的系统控制台中，数据按我想要的方式显示。但是，我在 Blender 中有一个名为“test”的字符串调试属性，它应该显示刚刚在客户端输入的当前数字，直到我关闭整个程序。

例如：

*   我在 Blender 中运行服务器脚本
*   我在 IDLE 中运行客户端脚本
*   我在客户端输入数字
*   它们出现在服务器端的系统控制台中，但它们不会出现在游戏引擎中
*   我从客户端关闭服务器
*   现在，我输入的最后一个数字终于出现在服务器端了

所以问题是 Blender 运行我的脚本，然后在它完成后运行游戏引擎，但我希望它们同时运行。

如果我的解释没有意义，请告诉我；如果需要，我可以为我的东西提供下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T17:55:50.853

我不知道这是否仍然是一个问题 - 你在 2 月发布，现在是 8 月，但我只是在寻找类似问题的答案。您的问题是 Blender 在脚本完成运行之前不会更新其帧。您的游戏实际上卡在它播放的第一帧上，因为它在该帧命中时立即启动脚本，并且由于脚本的性质，永远不会结束。

目前，您使用 server.listen(5) 表示它侦听 5 秒，但该函数中的数字 5 指的是积压而不是时间长度[[source]](http://docs.python.org/2/library/socket.html#socket.socket.listen)。socket.listen() 将无限期地停止您的游戏（据我所知），就像无限循环一样。

这可能不是您正在寻找的答案，但它绝对是一个答案。

# angularjs - 指令内的角度 $http 请求

> ID：14802617
> 
> 赞同：3
> 
> 时间：2013-02-10T21:09:24.993
> 
> 标签：angularjs, angularjs-directive

我正在尝试在 Angularjs 中使用指令来检查用户是否是他们自己，以便相应地更改模板。

例如

```
 <li is-self >
        <a  ng-show="logged_in" ng-href="/users/{{user.public_id}}"> Settings </a>
    </li> 
```

诚然，这可能不是解决此问题的最佳方法，但是我目前想不出更好的方法。

然而，我遇到的问题是我不能在指令中执行 http 请求，因此我必须将它放在控制器中并将其作为范围函数引用，即

用户控制器

```
 $scope.isSelf = ->
        $http({method: 'GET', url: '/is_self/' + $routeParams.id}).
        success((data, status, headers, config) ->
            if data
                $scope.logged_in = true
        ).
        error((data, status, headers, config) ->
            console.log(data)
        ) 
```

用户模块

```
 userModule.directive('isSelf', () ->
      link: ($scope) ->
        $scope.isSelf() 
```

然而，这种技术带来了一个问题，因为该指令被跨多个文件和多个控制器使用。我认为最合适的解决方案只是在指令中执行请求，但这不起作用，因为您似乎无法将 $http 传递给它。

我理想的解决方案是结合我喜欢的

```
userModule.directive('isSelf', () ->
   link: ($scope, $http) ->
      $http({method: 'GET', url: '/is_self/' + "3f8686589ad"}).
          success((data, status, headers, config) ->
              if data
                  $scope.logged_in = true
          ).
          error((data, status, headers, config) ->
              console.log(data)
          )
) 
```

我显然对框架相当陌生，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T16:41:12.273

好的，伙计们，我找到了解决方案。这是为那些有同样问题的人准备的。

好吧，经过更多的修补后，我意识到我想我是以错误的方式去做。我改为根据下面的建议使用服务，如果有人遇到同样的问题并且想知道，这是最终代码。

模块

```
userModule = angular.module('users', ["ngResource"])

userModule.factory('User', ['$resource', '$http', ($resource, $http) ->
    User = $resource "/users/:id", id: "@id",
        update: method: "PUT"
        destroy: method: "DELETE"

    User::isSelf = (id, cb) ->
        $http.get('/is_self/' + id).success (data) ->
            if data
                cb true

    User
]) 
```

控制器

```
StatsShowCtrl = ($scope, $location, $routeParams, User) ->
    User.get id: $routeParams.id, (user) ->
        self.original = user
        $scope.user = new User(self.original)

        $scope.user.isSelf $routeParams.id, (self) ->
            if self
                $scope.logged_in = true 
```

HTML

```
<li ng-show="logged_in"> <a ng-href="/users/{{user.public_id}}"> Settings </a></li> 
```

# iphone - iOS JSON 数组和 MapKit

> ID：14802618
> 
> 赞同：2
> 
> 时间：2013-02-10T21:09:30.707
> 
> 标签：iphone, ios, objective-c, xcode, mapkit

我正在尝试使用 MapKit 映射 JSON 数组。我可以使用下面的代码在地图上获得一个点，但是我需要标记几十个图钉，并且我准备了一个 JSON 数组。我的单点代码如下。

**在我的 .h 文件中：**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController {

MKMapView *mapView;
NSData *data;

}

@property (nonatomic, retain) IBOutlet MKMapView *mapView;

@end 
```

**在我的 .m 文件中：**

```
NSData *data = @"[{"id":"1","name":"Jiffy Lube","lat":"21.306","lon":"-157.861"},    
{"id":"2","name":"Bills
Oil","lat":"21.301","lon":"-157.863"},{"id":"3","name":"Auto Zone","lat":"21.307","lon":"-
157.862"}]";

// parse the JSON into a NSArray

NSError *error;
NSArray *array = [NSJSONSerialization JSONObjectWithData:data
                                                 options:0
                                                   error:&error]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:48:14.800

您的 JSON 是一个字典项数组。因此，您可以通过 检索整个数组`NSJSONSerialization`，然后遍历结果数组中的字典条目。

首先，您最初说您有如下 JSON：

```
[{"id":"1","name":"Jiffy Lube","lat":"21.306","lon":"-157.861"},    
{"id":"2","name":"Bills Oil","lat":"21.301","lon":"-157.863"},
{"id":"3","name":"Auto Zone","lat":"21.307","lon":"-157.862"}] 
```

因此，如果它位于您的捆绑包中包含的文件“test.json”中，您可以这样加载它：

```
// load the data from local file

NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"json"];
NSData *data = [NSData dataWithContentsOfFile:path]; 
```

如果你在网络服务器上有这个，你会像这样检索它：

```
// load the data from web server

NSURL *url = [NSURL URLWithString:@"http://insert.your.server/and/url/here/test.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {
    // use NSData here
}]; 
```

假设您将 JSON 提要加载到`NSData`名为 的对象`data`中，您可以执行以下操作：

```
// parse the JSON into a NSArray

NSError *error;
NSArray *array = [NSJSONSerialization JSONObjectWithData:data 
                                                 options:0
                                                   error:&error];
if (error != nil)
{
    // handle the error as you want
}

// a few variables to be used as we iterate through the array of results

CLLocationCoordinate2D location;                         // coordinates of the annotation
NSMutableArray *newAnnotations = [NSMutableArray array]; // an array in which we'll save our annotations temporarily
MKPointAnnotation *newAnnotation;                        // the pointer to the annotation we're adding

// iterate through the array, adding an annotation to our our array of new annotations

for (NSDictionary *dictionary in array)
{
    // retrieve latitude and longitude from the dictionary entry

    location.latitude = [dictionary[@"lat"] doubleValue];
    location.longitude = [dictionary[@"lon"] doubleValue];

    // create the annotation

    newAnnotation = [[MKPointAnnotation alloc] init];
    newAnnotation.title = dictionary[@"name"];
    newAnnotation.coordinate = location;

    // add it to our array
    //
    // incidentally, generally I just add it to the mapview directly, but
    // given that you have a didAddAnnotationViews, we'll just build up 
    // an array and add them all to the map view in one step after we're 
    // done iterating through the JSON results

    [newAnnotations addObject:newAnnotation];

    // clean up

    [newAnnotation release];
}

// when done, add the annotations

[self.mapView addAnnotations:newAnnotations]; 
```

# eclipse - 使用 Eclipse 进行 GWT 开发

> ID：14802621
> 
> 赞同：1
> 
> 时间：2013-02-10T21:10:02.403
> 
> 标签：eclipse, gwt

我正在使用 eclipse 开发一个 GWT 应用程序，我想知道是否有一种方法可以热交换我所做的客户端代码更改，而无需每次都进行完整的 Google 编译。目前，当我修改代码时，我会进行 Google 编译，然后单击重新加载服务器按钮，然后刷新浏览器以获取更改。这开始变得有点痛苦，因为当我可能只修改了一个 UI 字符串时，需要 10 - 20 秒才能完成完整编译，所以想知道是否有更快的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T21:35:52.513

如果您想查看客户端代码中的更改，请点击浏览器中的刷新按钮。

如果您需要调试功能，请使用 Debug As => Web Application。根据浏览器的不同，启动速度可能会慢一点（或慢很多）。

如果您不需要调试功能，请使用 Run As => Web Application。它开始得更快。您仍然会在开发模式和控制台选项卡中看到所有错误。

如果对服务器端代码进行更改，则必须使用Eclipse中专用*开发模式视图的专用按钮重新加载 Web 服务器。*

除非插件告诉你这样做，否则你永远不需要重新编译。

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideDevMode](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideDevMode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:42:54.137

添加到安德烈的答案假设我们正在更改按钮单击时调用的功能。

1）我们通常在调用的函数中更改代码行，然后在 UI 中再次单击按钮。无需使用刷新按钮重新加载整个应用程序。

2）如果更改涉及无法热交换的代码 - 示例类更改，例如添加新的类变量，那么您需要刷新浏览器。您有时可以忽略 Eclipse 警告，抱怨它不能热插拔。

3）如果内存不足，则需要关闭并重新启动开发模式。

4）如果您的服务器端占用内存，那么使用外部服务器而不是码头可能会更好，以避免每次启动开发模式时服务器重新启动所消耗的时间。

# cgi - lighttpd：禁用 CGI 缓冲

> ID：14802622
> 
> 赞同：6
> 
> 时间：2013-02-10T21:10:07.353
> 
> 标签：cgi, lighttpd

有没有办法阻止 lighttpd 将 POST 缓冲到 CGI 可执行文件？

在我看来，所有请求在转发到 CGI 可执行文件之前都在磁盘上完全缓冲，这使我无法以基于流的方式处理输入。

澄清一下，我只讨论在标准输入上转发给 CGI 可执行文件的请求；我已经验证了响应没有像那样缓冲，并且流输出确实是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-20T20:47:28.940

*   `server.stream-request-body = 0 (default)`在连接到后端之前缓冲整个请求体

*   `server.stream-request-body = 1` 将请求正文流式传输到后端；临时文件的缓冲区

*   `server.stream-request-body = 2` 将请求正文流式传输到后端；最小缓冲可能会阻止上传

> 使用 HTTPS 时，建议额外设置 ssl.read-ahead = "disable"

[https://redmine.lighttpd.net/projects/lighttpd/wiki/Server_stream-request-bodyDetails](https://redmine.lighttpd.net/projects/lighttpd/wiki/Server_stream-request-bodyDetails)

# meteor - 无法在 Meteor 应用程序中访问其他用户的电子邮件地址

> ID：14802627
> 
> 赞同：2
> 
> 时间：2013-02-10T21:10:19.903
> 
> 标签：meteor

在开始之前，我已经按照以下步骤操作： [Meteor Querying other users by email](https://stackoverflow.com/questions/13563980/meteor-querying-other-users-by-email)

我已经阅读了有关发布用户以及如何添加比 id、用户名和配置文件更多的字段的 Meteor 文档。尽管有所有这些事情，我的情况仍然存在。

我正在尝试访问其他用户的电子邮件地址，而不仅仅是当前登录的用户。我有 2 个需要此访问权限的模板。第一个模板有效并且能够访问它。第二个模板不能。

这是我用于发布电子邮件字段和订阅的设置代码（我也尝试过不指定“地址”[例如字段：{电子邮件：1}]，但结果相同）

```
if (Meteor.isServer) {
    Meteor.publish("allUsers", function () {
        return Meteor.users.find({});
    });
    Meteor.publish("allUserData", function () {
        return Meteor.users.find({}, {fields: {"emails.address": 1}});
    });
};

if (Meteor.isClient) {
    Meteor.subscribe("allUsers");
    Meteor.subscribe("allUserData");
}; 
```

以下是有效的模板代码：

```
Template.createPartner.events({
    'click .setup-partner' : function(event, template) {
        var partner = Meteor.users.findOne({"emails.address": 'example@mail.com' }); <-- works
    }
}); 
```

这是模板中不起作用的代码：

```
Template.infoSelect.partnerEmail = function() {
    var partnerId = Meteor.user().profile.partnerId; <-- works
    var partner = Meteor.users.findOne({_id: partnerId}); <-- works but only _id and profile are returned
    return partner.emails[0].address; <-- throws exception because the 'emails' field doesn't exist
}; 
```

我也试过这个，但没有区别：

```
var partner = Meteor.users.find({_id: partnerId}, {fields: {"emails.address": 1}}); 
```

为什么我在第二个模板中看不到用户的电子邮件地址，但在第一个模板中可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:24:14.840

我认为这是因为您订阅了两套相同的收藏。Meteor 使用第一个订阅并忽略第二个。我不确定为什么它会在某个场合起作用。

如果您删除第一个订阅并使用第二个它应该可以工作，基本上删除该行：

```
Meteor.subscribe("allUsers"); 
```

还有一个提示。您可以将电子邮件功能更改为：

```
Template.infoSelect.partner = function() {
    var partnerId = Meteor.user().profile.partnerId; <-- works
    var partner = Meteor.users.findOne({_id: partnerId}); <-- works but only _id and profile are returned
    return partner;
}; 
```

您的车把将是：（它只是为您的合作伙伴变量打开了更多选项，因此您也可以通过名称引用他/她）

```
<template name="infoSelect">
{{partner.email.0.address}}
{{partner.profile.name}} <!--If you have configured profiles -->
</template> 
```

# c# - 将一组瓷砖拼接在一起

> ID：14802634
> 
> 赞同：2
> 
> 时间：2013-02-10T21:11:15.763
> 
> 标签：c#, xna

假设我有一个与纹理图集中的图块相对应的矩形数组。我想要做的是取出这些瓷砖并从中创建一个 Texture2D 对象。基本上，我想将每个图块的像素数据顺序放在一起以形成一个图像。我怎么能这样做呢？在这里有用吗`Texture2D.SetData()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:24:54.693

```
RenderTarget2D target = new RenderTarger2D(...); 
//I cant remeber the arguments off the top of my head.
//I think its GraphicsDevice, Width, Height, GenerateMipmap, SurfaceFormat, Depthformat

GraphicsDevice.SetRenderTarget(target);
GraphicsDevice.Clear(Color.Black); //any colour will do
using(SpriteBatch b = new SpriteBatch(GraphicsDevice))
{
   b.Begin();

   //Loop through all texture and draw them, so ...
   for(int y = 0; y < 10; i++)
     for(int y = 0; y < 10; i++)
       batch.Draw(Texture, new Rectangle(xPos, yPos, width, height), Color.White));

   b.End();
}

GraphicsDevice.SetRenderTarget(null);

//Then to access your new Texture, just do 
Texture newTexture = target; //Target inherits from Texture2D so no casting needed 
```

希望这可以帮助 ：）

# f# - 将第二个参数放在新的缩进行与同一行之间是否存在技术差异？

> ID：14802639
> 
> 赞同：1
> 
> 时间：2013-02-10T21:12:04.013
> 
> 标签：f#

考虑以下两个示例：

```
let myList = [0..10]
List.map (fun x -> x + 5)
    (List.filter (fun x -> x % 3 = 0) myList) 
```

和

```
let myList = [0..10]
List.map (fun x -> x + 5) (List.filter (fun x -> x % 3 = 0) myList) 
```

这两个示例产生相同的结果：

```
val myList : int list = [0; 1; 2; 3; 4; 5; 6; 7; 8; 9; 10]
val it : int list = [5; 8; 11; 14] 
```

F# 是一种对空格敏感的语言，这两个示例在技术上是否存在差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T21:26:56.007

我认为[F# Code Formatting Guidelines](http://msdn.microsoft.com/en-us/library/dd233191.aspx)对你很有帮助，尤其是第一节关于*缩进的一般规则*。

以下是该页面的相关摘录：

> 当你打断长行时，行的延续必须比封闭结构缩进更远。例如，函数参数的缩进必须比函数名的第一个字符更远，如下面的代码所示。

```
let someFunction param1 param2 =
    let result = myFunction1 param1
                     param2
    result * 100 
```

因此，第一个示例中的缩进有助于 F# 编译器正确解析您的示例。

> F# 是一种对空格敏感的语言，这两个示例在技术上是否存在差异？

*没有*。这里的两个代码片段含义相同；唯一的区别是*可读性*。我更喜欢第一个，因为我的眼睛不必走到最右边来阅读整个功能。

有时当一行太长时，您可以使用管道重新排序参数并将该行分成多个：

```
myList
|> List.filter (fun x -> x % 3 = 0)
|> List.map (fun x -> x + 5) 
```

**更新：**

我花了一些时间来汇总来自不同来源的信息，并编写了[F# 格式化约定的综合指南](https://github.com/dungpa/fantomas/blob/master/FormattingConventions.md)；你可能想调查一下。

# unit-testing - Haskell 异常和单元测试

> ID：14802640
> 
> 赞同：3
> 
> 时间：2013-02-10T21:12:06.277
> 
> 标签：unit-testing, exception, haskell

基于 SO 问题 13350164[如何测试 Haskell 中的错误？](https://stackoverflow.com/questions/13350164/)，我正在尝试编写一个单元测试，它断言给定无效输入，递归函数会引发异常。我采用的方法适用于非递归函数（或者当第一次调用引发异常时），但是一旦异常发生在调用链的更深处，断言就会失败。

[我已经阅读了问题 6537766 Haskell 错误处理方法](https://stackoverflow.com/questions/6537766/)的优秀答案，但不幸的是，对于我的学习曲线的这一点来说，这个建议有点太笼统了。我的猜测是这里的问题与惰性评估和非纯测试代码有关，但我希望能得到专家的解释。

`Maybe`在这种情况下（例如或），我是否应该采用不同的方法来处理错误`Either`，或者是否有合理的修复方法可以在使用这种风格时使测试用例正常工作？

这是我想出的代码。前两个测试用例成功，但第三个测试用例失败`"Received no exception, but was expecting exception: Negative item"`。

```
import Control.Exception (ErrorCall(ErrorCall), evaluate)
import Test.HUnit.Base  ((~?=), Test(TestCase, TestList))
import Test.HUnit.Text (runTestTT)
import Test.HUnit.Tools (assertRaises)

sumPositiveInts :: [Int] -> Int
sumPositiveInts [] = error "Empty list"
sumPositiveInts (x:[]) = x
sumPositiveInts (x:xs) | x >= 0 = x + sumPositiveInts xs
                       | otherwise = error "Negative item"

instance Eq ErrorCall where
    x == y = (show x) == (show y)

assertError msg ex f = 
    TestCase $ assertRaises msg (ErrorCall ex) $ evaluate f

tests = TestList [
  assertError "Empty" "Empty list" (sumPositiveInts ([]))
  , assertError "Negative head" "Negative item" (sumPositiveInts ([-1, -1]))
  , assertError "Negative second item" "Negative item" (sumPositiveInts ([1, -1]))
  ]   

main = runTestTT tests 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:30:43.410

这实际上只是一个错误`sumPositiveInts`。当唯一的负数是列表中的最后一个时，您的代码不会*进行负数检查——第二个分支不包括检查。*

值得注意的是，像你这样编写递归的规范方法会打破“空虚”测试以避免这个错误。通常，将您的解决方案分解为“总和”加上两个守卫将有助于避免错误。

* * *

[顺便说一句，我支持 Haskell 方法的错误处理](https://stackoverflow.com/questions/6537766/)建议。`Control.Exception`更难推理和学习，`error`只能用于标记无法实现的代码分支——我更喜欢一些建议，它应该被称为`impossible`.

为了使建议切实可行，我们可以使用`Maybe`. 首先，内置了 unguarded 函数：

```
sum :: Num a => [a] -> a 
```

然后我们需要构建两个守卫（1）空列表 give`Nothing`和（2）包含负数的列表 give `Nothing`。

```
emptyIsNothing :: [a] -> Maybe [a]
emptyIsNothing [] = Nothing
emptyIsNothing as = Just as

negativeGivesNothing :: [a] -> Maybe [a]
negativeGivesNothing xs | all (>= 0) xs = Just xs
                        | otherwise     = Nothing 
```

我们可以将它们组合成一个单子

```
sumPositiveInts :: [a] -> Maybe a
sumPositiveInts xs = do xs1 <- emptyIsNothing xs
                        xs2 <- negativeGivesNothing xs1
                        return (sum xs2) 
```

* * *

然后，我们可以使用许多习语和简化来使这段代码更容易阅读和编写（一旦你知道了约定！）。让我强调一下，**在这点之后，没有什么**是必要的，也不是非常容易理解的。学习它可以提高你分解函数和流畅思考 FP 的能力，但我只是跳到高级的东西。

例如，我们可以使用“Monadic `(.)`”（也称为 Kleisli 箭头组合）来编写`sumPositiveInts`

```
sumPositiveInts :: [a] -> Maybe a
sumPositiveInts = emptyIsNothing >=> negativeGivesNothing >=> (return . sum) 
```

我们可以简化两者`emptyIsNothing`并`negativeGivesNothing`使用组合器

```
elseNothing :: (a -> Bool) -> a -> Just a
pred `elseNothing` x | pred x    = Just x
                     | otherwise = Nothing

emptyIsNothing = elseNothing null

negativeGivesNothing = sequence . map (elseNothing (>= 0)) 
```

如果`sequence :: [Maybe a] -> Maybe [a]`任何包含的值是`Nothing`. 我们实际上可以更进一步，因为这`sequence . map f`是一个常见的成语

```
negativeGivesNothing = mapM (elseNothing (>= 0)) 
```

* * *

所以，最后

```
sumPositives :: [a] -> Maybe a
sumPositives = elseNothing null 
               >=> mapM (elseNothing (>= 0))
               >=> return . sum 
```

# python - 创建由另一个字典的不同副本组成的字典

> ID：14802641
> 
> 赞同：1
> 
> 时间：2013-02-10T21:12:35.493
> 
> 标签：python, dictionary

在 Python 中，有两个字典，简单地做

```
dict2 = dict1 
```

不会导致 dict2 成为 dict1 的不同副本。它们会指向同一个东西，所以修改 dict2 会对 dict1 产生同样的效果。

一种解决方法是

```
dict2 = dict(dict1) 
```

所以如果我要修改 dict2，它不会影响 dict1 的值。

在我的程序中，我目前正在制作一个由以前字典的多个副本组成的字典。让我们称上一个字典为 temp2，而当前字典为 temp3。我不知道我需要提前多少份，所以我想这样做：

```
temp3 = {}
for i in xrange(some_number):
    temp3[i] = dict(temp2) 
```

但是我的调试测试表明，如果我修改 temp3[0] 的字典（同样是 temp2 的副本），那么这也会修改 temp3[1] 的副本和 temp3[2] 等，所以结果是一个包含 n 个相同副本的字典，其中 n = some_number。有谁知道解决方法？谢谢。

编辑：作为对评论的回应， temp2 是一个由列表值组成的字典，因此 {a: [list1], b: [list2] 等}。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:18:21.323

尝试 copy.deepcopy 方法： [http ://docs.python.org/2/library/copy.html](http://docs.python.org/2/library/copy.html)

# c++ - C++ 模板：使用 MInGW 得到错误的结果（输出）

> ID：14802642
> 
> 赞同：0
> 
> 时间：2013-02-10T21:12:35.860
> 
> 标签：c++, visual-studio-2010, templates, mingw

我犹豫要问这个问题，因为我的 C++ 模板程序可能有问题，但这个问题在过去几个小时里一直困扰着我。我在 Visual C++ 和 Mingw-g++ 编译器上运行完全相同的程序，但只有 VC2010 给了我预期的结果。我无论如何都不是精通 C++ 程序员，所以没有从任何一个编译器收到任何错误消息更加令人沮丧。

编辑：我在未能解决错误后做了 mingw-get upgrade。我正在运行 g++ 4.5.2，现在我有 4.7.2 版本，但问题仍然存在。

后期更新 - 我完全卸载了 MinGW 平台，手动删除了每个文件夹，然后安装了 TDM-GCC，但问题仍然存在。可能与我的 Windows 安装存在一些冲突。我暂时已经安装了 Cygwin 和 g++ 4.5.3（它正在工作），因为现在重新安装操作系统并不是一个真正的选择。感谢所有的帮助。

这是我的代码。（头文件 itertest.h）

```
#ifndef ITERTEST_H
#define ITERTEST_H

#include <iostream>
#include <cmath>
#include <vector>
#include <string>
#include <algorithm>

using namespace std;

template <typename T>
class fft_data{
public: 
vector<T> re;
vector<T> im;

};

template <typename T>
void inline twiddle(fft_data<T> &vec,int N,int radix){
// Calculates twiddle factors for radix-2
T PI2 = (T) 6.28318530717958647692528676655900577;
T theta = (T) PI2/N;
vec.re.resize(N/radix,(T) 0.0);
vec.im.resize(N/radix,(T) 0.0);
vec.re[0] = (T) 1.0;

for (int K = 1; K < N/radix; K++) {
    vec.re[K] = (T) cos(theta * K);
    vec.im[K] = (T) sin(theta * K);
}

}

template <typename T>
void inline sh_radix5_dif(fft_data<T> &x,fft_data<T> &wl, int q, int sgn) {
int n = x.re.size();
int L = (int) pow(5.0, (double)q);
int Ls = L / 5;
int r = n / L;

T c1 = 0.30901699437;
T c2 = -0.80901699437;
T s1 = 0.95105651629;
T s2 = 0.58778525229;

T tau0r,tau0i,tau1r,tau1i,tau2r,tau2i,tau3r,tau3i;
T tau4r,tau4i,tau5r,tau5i;
T br,bi,cr,ci,dr,di,er,ei;

fft_data<T> y = x;
T wlr,wli,wl2r,wl2i,wl3r,wl3i,wl4r,wl4i;
int lsr = Ls*r;

for (int j = 0; j < Ls; j++) {
    int ind = j*r;
    wlr = wl.re[ind];
    wli = wl.im[ind];

    wl2r = wlr*wlr - wli*wli;
    wl2i = 2.0*wlr*wli;

    wl3r = wl2r*wlr - wli*wl2i;
    wl3i= wl2r*wli + wl2i*wlr;

    wl4r = wl2r*wl2r - wl2i*wl2i;
    wl4i = 2.0*wl2r*wl2i;

    for (int k =0; k < r; k++) {
        int index = k*L+j;
        int index1 = index+Ls;
        int index2 = index1+Ls;
        int index3 = index2+Ls;
        int index4 = index3+Ls;

        tau0r = y.re[index1] + y.re[index4];
        tau0i = y.im[index1] + y.im[index4];

        tau1r = y.re[index2] + y.re[index3];
        tau1i = y.im[index2] + y.im[index3];

        tau2r = y.re[index1] - y.re[index4];
        tau2i = y.im[index1] - y.im[index4];

        tau3r = y.re[index2] - y.re[index3];
        tau3i = y.im[index2] - y.im[index3];

        tau4r = c1 * tau0r + c2 * tau1r;
        tau4i = c1 * tau0i + c2 * tau1i;

        tau5r = sgn * ( s1 * tau2r + s2 * tau3r);
        tau5i = sgn * ( s1 * tau2i + s2 * tau3i);

        br = y.re[index] + tau4r + tau5i;
        bi = y.im[index] + tau4i - tau5r;

        er = y.re[index] + tau4r - tau5i;
        ei = y.im[index] + tau4i + tau5r;

        tau4r = c2 * tau0r + c1 * tau1r;
        tau4i = c2 * tau0i + c1 * tau1i;

        tau5r = sgn * ( s2 * tau2r - s1 * tau3r);
        tau5i = sgn * ( s2 * tau2i - s1 * tau3i);

        cr = y.re[index] + tau4r + tau5i;
        ci = y.im[index] + tau4i - tau5r;

        dr = y.re[index] + tau4r - tau5i;
        di = y.im[index] + tau4i + tau5r;

        int indexo = k*Ls+j;
        int indexo1 = indexo+lsr;
        int indexo2 = indexo1+lsr;
        int indexo3 = indexo2+lsr;
        int indexo4 = indexo3+lsr;

        x.re[indexo]= y.re[index] + tau0r + tau1r;
        x.im[indexo]= y.im[index] + tau0i + tau1i;

        x.re[indexo1] = wlr*br - wli*bi;
        x.im[indexo1] = wlr*bi + wli*br;

        x.re[indexo2] = wl2r*cr - wl2i*ci;
        x.im[indexo2] = wl2r*ci + wl2i*cr;

        x.re[indexo3] = wl3r*dr - wl3i*di;
        x.im[indexo3] = wl3r*di + wl3i*dr;

        x.re[indexo4] = wl4r*er - wl4i*ei;
        x.im[indexo4] = wl4r*ei + wl4i*er;

    }

}

}

template <typename T>
void inline fftsh_radix5_dif(fft_data<T> &data,int sgn, unsigned int N) {
//unsigned int len = data.re.size(); 

int num = (int) ceil(log10(static_cast<double>(N))/log10(5.0));

//indrev(data,index);
fft_data<T> twi;

twiddle(twi,N,5);
if (sgn == 1) {
    transform(twi.im.begin(), twi.im.end(),twi.im.begin(),bind1st(multiplies<T>(),(T) -1.0));
}

for (int i=num; i > 0; i--) {
sh_radix5_dif(data,twi,i,sgn);

}

}

#endif 
```

主文件

```
#include "itertest.h"

using namespace std;

int main(int argc, char **argv)
{
int N = 25;
//vector<complex<double> > sig1;
fft_data<double> sig1;
for (int i =0; i < N; i++){
//sig1.push_back(complex<double>((double)1.0, 0.0));
    //sig2.re.push_back((double) i);
    //sig2.im.push_back((double) i+2);
    sig1.re.push_back((double) 1);
    sig1.im.push_back((double) 0);
}

fftsh_radix5_dif(sig1,1,N);

for (int i =0; i < N; i++){
    cout << sig1.re[i] << " " << sig1.im[i] << endl;
}

cin.get();

return 0;

} 
```

预期的输出（我从 VC2010 得到）

```
25 0
4.56267e-016 -2.50835e-016
2.27501e-016 -3.58484e-016
1.80101e-017 -2.86262e-016
... rest 21 rows same as the last three rows ( < 1e-015) 
```

Mingw-g++ 的输出

```
20 0
4.94068e-016 -2.10581e-016
2.65385e-016 -3.91346e-016
-5.76751e-017 -2.93654e-016
5 0
-1.54508 -4.75528
-3.23032e-017 1.85061e-017
-4.68253e-017 -1.18421e-016
-6.32003e-017 -2.05833e-016
1.11022e-016 0
4.04508 -2.93893
8.17138e-017 6.82799e-018
3.5246e-017 9.06767e-017
-6.59101e-017 -1.62762e-016
1.11022e-016 0
4.04508 2.93893
-6.28467e-017 6.40636e-017
1.79807e-016 3.34411e-017
-6.94919e-017 -1.05831e-016
1.11022e-016 0
-1.54508 4.75528
5.70402e-017 -1.68674e-017
-1.36169e-016 -8.30473e-017
-9.75639e-017 3.40359e-016
1.11022e-016 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:36:10.873

您的 MinGW 安装一定有问题。你可能有一个过时的、有缺陷的 GCC 版本。非官方的 TDM-GCC 发行版通常有更新的版本：[http ://tdm-gcc.tdragon.net/](http://tdm-gcc.tdragon.net/)

当我在 Ubuntu 上使用 GCC 4.6.3 编译您的代码时，它会产生下面的输出，这似乎与 VC2010 输出完全匹配（但我无法验证这一点，因为您没有完整提供它）。添加选项`-O3 -ffast-math -march=native`似乎并没有改变任何东西。

请注意，我必须修正一个明显的错字`fftsh_radix5_dif`（在要相乘的模板参数列表中缺少右尖括号），但我假设您的代码中没有它，因为它根本无法编译。

```
25 0
4.56267e-16 -2.50835e-16
2.27501e-16 -3.58484e-16
1.80101e-17 -2.86262e-16
-5.76751e-17 -1.22566e-16
8.88178e-16 0
9.45774e-17 1.19479e-17
1.27413e-16 -5.04465e-17
7.97139e-17 -9.63575e-17
1.35142e-17 -7.08438e-17
8.88178e-16 0
4.84283e-17 4.54772e-17
1.02473e-16 2.63107e-17
1.02473e-16 -2.63107e-17
4.84283e-17 -4.54772e-17
8.88178e-16 0
1.35142e-17 7.08438e-17
7.97139e-17 9.63575e-17
1.27413e-16 5.04465e-17
9.45774e-17 -1.19479e-17
8.88178e-16 0
-5.76751e-17 1.22566e-16
1.80101e-17 2.86262e-16
2.27501e-16 3.58484e-16
4.56267e-16 2.50835e-16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:56:18.563

检查您正在运行的可执行文件的创建日期。

您可能正在运行程序的早期草稿。

# java - 用于 Web 服务的服务器

> ID：14802643
> 
> 赞同：-5
> 
> 时间：2013-02-10T21:12:48.237
> 
> 标签：java, web-services

我听说过一些服务器，例如 GlassFish，但我不确定哪种服务器最适合基于 Java 的 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:16:11.637

没有“最佳”网络服务器之类的东西，这完全取决于您的要求。

一些流行的AS：

*   码头
*   雄猫
*   老板
*   汤姆EE
*   网络逻辑
*   Websphere 应用服务器

根据您在做什么，AS 也可能会发生变化。对于本地开发 Jetty 可能没问题，但为了您的接受等，您可能需要 Tomcat。

# linux - SSH 连接被远程主机关闭

> ID：14802645
> 
> 赞同：4
> 
> 时间：2013-02-10T21:12:56.097
> 
> 标签：linux, ubuntu, ssh

我无法通过 SSH 连接到远程主机，但仅限于我的家庭网络（提供商）。如果我在另一个网络（我在同一个城市的朋友 - 不同的提供商），连接就完美了。Ping 到服务器（在我家）有效。我也只有这台服务器才有这个问题。如果我尝试从我的家庭网络连接到其他主机，它可以工作。我该怎么办？

```
nich@ubuntu:/etc$ ssh -vvv xxx@www.sci.muni.cz
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to www.sci.muni.cz [147.251.24.3] port 22.
debug1: Connection established.
debug1: identity file /home/nich/.ssh/id_rsa type -1
debug1: identity file /home/nich/.ssh/id_rsa-cert type -1
debug1: identity file /home/nich/.ssh/id_dsa type -1
debug1: identity file /home/nich/.ssh/id_dsa-cert type -1
debug1: identity file /home/nich/.ssh/id_ecdsa type -1
debug1: identity file /home/nich/.ssh/id_ecdsa-cert type -1
ssh_exchange_identification: Connection closed by remote host

nich@ubuntu:/etc$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.2 LTS
Release:        12.04
Codename:       precise 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T21:43:42.413

以下是尝试创建隧道的方法。

*   `intermediary`是您信任为您进行转发的机器
*   `remote`是您要访问的机器

    ```
    ssh -N -L 20000:remote:22 user@intermediary 
    ```

完成此操作后，您的本地计算机将侦听端口 20000。当您**使用 ssh 连接到此端口**时，在您的主机上，连接将通过隧道转发给将转发给的`intermediary`人`remote`。

# c++ - 在 C++ 中转换为大写和小写

> ID：14802647
> 
> 赞同：-3
> 
> 时间：2013-02-10T21:13:14.293
> 
> 标签：c++, visual-c++, c++11, c++builder

我用 C++ 写了这段代码

```
 #include <iostream>
   using namespace std;

    char convert1 (char x[])
    {
    for ( int i =0; i<5;i++)
    {
    if ( i/2 ==0 )
    x[i] =tolower(x[i]);
    else
    x[i] = toupper(x[i]);

    return x[i];

}
    }

   int main()
   {
      char z[] = "REDCA";
      cout<<convert1(z); 
      return 0;
   } 
```

它会工作，但它总是只打印第一个字母 R 的小写字母。但我想打印像这个 rEdCa 这样的完整单词

所以我该如何修改它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:14:01.470

你想要`if(i%2 == 0)`而不是`if(i/2 == 0)`（可能是错字）。

此外，您只是返回`x[i]`，这是一个单一的`char`. 更好的主意是使用`std::string`而不是`char *`，但您也可以使用它`char *`。（我不会提供完整的代码，正如我们在您之前的问题中确定的那样，这是您的任务，您应该这样做，而不是我们。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:15:56.167

`convert1`的返回值为`char`。所以，`cout << convert1(x)`看到 a `char`，因此你得到第一个`r`。

你可能想要这样的东西：

```
template<size_t S>
char const* convert1(char (&x)[S])
{
    for(int i = 0; i < S; ++i)
    {
        if(i%2 ==0) {
            x[i] = tolower(x[i]);
        } else {
            x[i] = toupper(x[i]);
        }
    }

    return x;
} 
```

想要更好，使用`std::string`.

# php - 在 MySQL 数据库中更新页面时，如何立即（或尽快）更新页面上的值？（不刷新）

> ID：14802653
> 
> 赞同：0
> 
> 时间：2013-02-10T21:13:54.753
> 
> 标签：php, mysql, ajax

有没有办法在更新时立即（或在一秒钟或更短的时间内）从 MySQL 数据库中提取一个值并将其显示在页面上而不刷新页面？

这个想法是两个人坐在他们的电脑前“竞相”更新价值，谁先做“赢”。如果用户 A 先点击一个链接，该值将更新，用户 B 将看到数字从 0 变为 1，并且他点击该链接的能力将消失。

我很擅长单击链接将值从 0 更改为 1，但我不确定如何在值已经更改后立即为其他人更改值。

我开始认为这对于网络应用程序来说只是一个坏主意。无论如何，如果可能的话，我想知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:21:35.390

mysql 可能无法做到这一点。由于 mysql 不支持实时通信，它需要类似 websockets 的东西。

# ruby-on-rails-3 - Rails 3 DRY 部分？

> ID：14802654
> 
> 赞同：0
> 
> 时间：2013-02-10T21:13:58.923
> 
> 标签：ruby-on-rails-3, controller, scope, partial

我有一个让我恼火的 Rails 3 应用程序。该视图本质上是四个选项卡。每个选项卡都显示过滤后的记录列表，如下所示：

**标签一**

```
<% @faults.each do |fault| %>
    <%= fault.name %>
<% end %> 
```

**标签二**

```
<% @faults_pending.each do |fault| %>
    <%= fault.name %>
<% end %> 
```

**标签三**

```
<% @faults_closed.each do |fault| %>
    <%= fault.name %>
<% end %> 
```

显然，我错过了更多代码。为了显着整理视图，我考虑为每个选项卡制作一个部分，但是，除了行之外，每个部分都是相同的`<% @faults.each do |fault| %>`。

有没有办法让一个部分在渲染部分时以某种方式设置范围（或方法，我永远不记得它叫什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:42:48.083

我认为您正在寻找渲染的 :locals 选项。

标签一

```
<%= render :partial => "faults", :locals => { :faults => @faults } %> 
```

标签二

```
<%= render :partial => "faults", :locals => { :faults => @faults_pending } %> 
```

标签三

```
<%= render :partial => "faults", :locals => { :faults => @faults_closed } %> 
```

部分的

```
<% faults.each do |fault| %>
  <%= fault.name %>
<% end %> 
```

# node.js - 使用 CQL 的 Cassandra 中的宽行 - 出现奇怪的错误

> ID：14802658
> 
> 赞同：2
> 
> 时间：2013-02-10T21:14:11.147
> 
> 标签：node.js, cassandra, cql

我正在尝试在 Cassandra 中存储博客的评论并提出了这个模式（从[这里](http://www.datastax.com/dev/blog/metric-collection-and-storage-with-cassandra)得到想法）：

```
create table comments ( slug varchar, ts timestamp, value text, primary key (slug,ts)); 
```

使用 CQL（我正在使用带有[Helenus](https://github.com/simplereach/helenus)驱动程序的 node.js）我正在尝试向其中添加一些数据，这是我到目前为止所得到的：

```
var helenus = require('helenus'),
    pool = new helenus.ConnectionPool({
        hosts: ['localhost:9160'],
        keyspace: 'blogks'
    });

pool.on('error', function(err) {
    console.error(err.name, err.message);
});

module.exports.addComment = function(slug, comment,callback){
    pool.connect(function(connErr,keyspace){
        if(connErr){
            callback(connErr);
            return;
        }

        var cql = "INSERT INTO comments (slug,ts,value) VALUES (?, ?, ?);";
        pool.cql(cql,[slug,serializeDate(new Date()),serializeJSON(comment)],function(err,results){
            callback(err,results);
        });
    });
}

function serializeDate(date){
    var dateSerializer = new helenus.Marshal('DateType');
    return dateSerializer.serialize(date).toString('hex');
}

function serializeJSON(data){
    var utf8Serializer = new helenus.Marshal('UTF8Type');
    return utf8Serializer.serialize(JSON.stringify(data)).toString("hex");
} 
```

想法是您可以将评论 json 对象传递给此方法，并将其推送到 cassandra。我这样称呼它来测试：

```
var comments = require('./comments.js');

comments.addComment("myslug",{id:2,name:"Alex",comment:"Hello!"},function(e,r){
    console.log(e);
    console.log(r);
}) 
```

但每当我这样做（我尝试了各种 CQL 驱动程序）时，我都会收到这个神秘的错误消息：

```
[HelenusInvalidRequestException: unable to coerce 'value' to a  formatted date (long)] name: 'HelenusInvalidRequestException' 
```

我尝试将时间戳更改为所有不同的数据类型，但没有运气。非常奇怪的是，起初，我的主键只是 slug 本身，然后它确实起作用了。但是，我想将所有注释存储在按时间戳排序的一行中，因此我不得不采用这种使用两列作为主键的方法。有任何想法吗？

**编辑**所以根据[rs_atl 的](https://stackoverflow.com/a/14813741/15861)建议，这是我尝试过的：

这一行：

```
dateSerializer.serialize(date).toString('hex') 
```

实际上确实返回了垃圾（0000013ccfacf5c4），我一定误解了如何使用API​​。所以这就是我尝试的方法：

我尝试`new Date().getTime()`了 JS 中的 which 实际上返回了 Unix 风格的纪元，但这没有用，我得到了同样的错误。然后我尝试使用[moment.js](http://momentjs.com/)来尝试格式化字符串：

```
moment().format("YYYY-MM-DD HH:mm:ss") 
```

这似乎返回了正确的格式，但又一次。同样的错误。然后我尝试了这个：

```
moment().format("YYYY-MM-DD HH:mm") + "Z" 
```

没运气。然后我尝试了这个：

```
moment().format("YYYY-MM-DD HH:mmZ") 
```

实际上，它确实在最后添加了时区信息，但仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:11:24.513

我不确定这条线的输出是什么：

`return dateSerializer.serialize(date).toString('hex');`

但这就是您的问题所在。您似乎没有输出 Cassandra 理解的有效日期。有效日期是：

1.  一个 Unix 风格的 epoch 作为 long 值。

2.  以下形式之一的字符串：

    yyyy-mm-dd HH:mm
    yyyy-mm-dd HH:mm:ss
    yyyy-mm-dd HH:mmZ
    yyyy-mm-dd HH:mm:ssZ
    yyyy-mm-dd'T'HH:mm
    yyyy-mm -dd'T'HH:mmZ
    yyyy-mm-dd'T'HH:mm:ss
    yyyy-mm-dd'T'HH:mm:ssZ
    yyyy-mm-dd
    yyyy-mm-ddZ

检查以确保您正在编写这些有效的时间戳类型之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:23:23.197

看来您使用了错误的 CQL 版本。您希望使用 CQL 3.0.0，但驱动程序默认为 CQL2。您需要在初始化时指定正确的 CQL 版本。

```
pool = new helenus.ConnectionPool({
    hosts: ['localhost:9160'],
    keyspace: 'blogks',
    cqlVersion: '3.0.0'
}); 
```

此外，请确保您使用的是 Helenus 的最新版本（截至目前为 0.6.2）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:51:22.190

对于时间戳，我一直使用 int 以毫秒为单位来表示时间。

尝试：

```
Date.now() 
```

代替：

```
serializeDate(new Date()) 
```

# php - 我怎样才能得到这个 MYSQL 查询的结果？

> ID：14802660
> 
> 赞同：-3
> 
> 时间：2013-02-10T21:14:25.733
> 
> 标签：php, mysql

我怎样才能得到结果？：

```
$check = mysql_query("select username, email, case
            when max(username = '$username') > 0 and max(email = '$email') > 0 then 'both'
            when max(username = '$username') > 0 then 'username'
            when max(email = '$email') > 0 then 'email'
            end
            from school_users
            WHERE username = '$username' or  email = '$email'") or die(mysql_error()); 
```

当它存在时，我需要“用户名”或“电子邮件”或“两者”。我如何接收这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:24:24.547

您应该使用 fetch 函数。mysql_query() 返回数据资源，要获取此数据，您需要使用 mysql-fetch_assoc 或 mysql_fetch_array。

如前所述， mysql_* 函数自 >PHP 5.5 起已弃用，它们是不好的使用习惯。您应该了解 mysqli 或 PDO。

资源： http: [//php.net/mysql_query](http://php.net/mysql_query)

[http://php.net/mysql_fetch_assoc](http://php.net/mysql_fetch_assoc)

[http://php.net/mysql_fetch_array](http://php.net/mysql_fetch_array)

[http://php.net/mysqli](http://php.net/mysqli)

[http://php.net/pdo](http://php.net/pdo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:10:03.463

好的，我想我了解您要做什么。你的工作比你想象的要多得多。您需要的是可以使用的模板，以便您可以制作自己的模板。下面的链接将允许您创建自己的 php API 以按照您所说的方式与 MySQL 数据库进行通信。这是一步一步的，他给了你所有的代码！

[使用 php mysql 和 sqlite 进行 android 登录和注册](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

我用过它，它很棒，如果您有任何问题，请随时给我留言。

把绿色检查一下这是否有帮助

# java - 启动画面进度条未绘制

> ID：14802662
> 
> 赞同：0
> 
> 时间：2013-02-10T21:14:32.483
> 
> 标签：java, screen, awt, splash-screen, event-dispatch-thread

我正在尝试在初始屏幕上制作自己的进度条。创建我的启动画面很简单：

> java -splash:EaseMailMain.jpg Main.class（来自 Eclipse）

我的 main 方法的第一行调用了这个：

```
new Thread(new Splash()).start(); 
```

这是启动类：

```
 public class Splash implements Runnable {
    public volatile static int percent = 0;
    @Override
    public void run() {
        System.out.println("Start");
        final SplashScreen splash = SplashScreen.getSplashScreen();
        if (splash == null) {
            System.out.println("SplashScreen.getSplashScreen() returned null");
            return;
        }
        Graphics2D g = splash.createGraphics();
        if (g == null) {
            System.out.println("g is null");
            return;
        }
        int height = splash.getSize().height;
        int width = splash.getSize().width;
        //g.drawOval(0, 0, 100, 100);
        g.setColor(Color.white);
        g.drawRect(0, height-50, width, 50);
        g.setColor(Color.BLACK);
        while(percent <= 100) {
            System.out.println((width*percent)/100);
            g.drawRect(0, height-50, (int)((width*percent)/100), 50);
            percent += 1;
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

我没有收到任何错误，但我确实在它下面有一个小盒子：

![下图带有一个矩形。](../Images/d95a9a7a29b80ba80147d728af8be286.png)

如果我将 drawRects 更改为 (0, 0, width, height) 它没有区别。

我试过在摇摆 EDT 上调用：

```
SwingUtilities.invokeAndWait((new Splash())); 
```

但什么也没有发生。

任何人都可以看到问题吗？或者知道如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:38:13.650

您应该在从不同线程更新 GUI 时使用[`SwingUtilities.invokeLater`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)or 。[`SwingUtilities.invokeAndWait`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)

请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)一章，其中解释了这背后的原因。

教程中的[SplashScreen 示例](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)`Thread.sleep`在 Swing 线程内部执行。如果在 SplashScreen 显示时不需要任何其他 GUI 刷新，这也很好。但是，您的加载代码应该发生在不同的线程中。

我建议向`setPercent`您的类添加一个设置器，该设置器创建一个`Runnable`以通过`SwingUtilities.invokeLater`. 这样，您甚至不需要轮询`percent`变量，并且`SwingThread`也可以自由呈现其他 UI 内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T23:35:57.610

Bikeshedder 是对的 (+1)，您正在阻止 EDT。

```
while(percent <= 100) {
    System.out.println((width*percent)/100);
    g.drawRect(0, height-50, (int)((width*percent)/100), 50);
    percent += 1;
    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

使用`SwingUtilities.invokeAndWait((new Splash()));`将 放置`Runnable`到事件队列中，这意味着当您进入`while`循环时`Thread.sleep`，您将阻止事件队列调度任何新事件，包括重绘请求

您应该使用类似的东西`SwingWorker`来执行您的实际加载（在后台线程中），发布进度结果，启动屏幕可以显示......

![在此处输入图像描述](../Images/d14e51b5a78a374136df589e40bd90be.png)

```
public class TestSplashScreen {

    public static void main(String[] args) {
        new TestSplashScreen();
    }

    public TestSplashScreen() {
        SplashScreenWorker worker = new SplashScreenWorker();
        worker.execute();
        try {
            worker.get();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        System.out.println("All Done...");
//        Launch main application...
//        SwingUtilities.invokeLater(...);
    }

    public class SplashScreenWorker extends SwingWorker<Void, Float> {

        private SplashScreen splash;

        public SplashScreenWorker() {
            splash = SplashScreen.getSplashScreen();
            if (splash == null) {
                System.out.println("SplashScreen.getSplashScreen() returned null");
                return;
            }
        }

        @Override
        protected void process(List<Float> chunks) {
            Graphics2D g = splash.createGraphics();
            if (g == null) {
                System.out.println("g is null");
                return;
            }
            float progress = chunks.get(chunks.size() - 1);
            int height = splash.getSize().height;
            int width = splash.getSize().width;
            g.setComposite(AlphaComposite.Clear);
            g.fillRect(0, 0, width, height);
            g.setPaintMode();
            g.setColor(Color.WHITE);
            g.drawRect(0, height - 50, width, 50);
            g.setColor(Color.RED);
            int y = height - 50;
            g.fillRect(0, y, (int) (width * progress), 50);
            FontMetrics fm = g.getFontMetrics();
            String text = "Loading Microsoft Windows..." + NumberFormat.getPercentInstance().format(progress);
            g.setColor(Color.WHITE);
            g.drawString(text, (width - fm.stringWidth(text)) / 2, y + ((50 - fm.getHeight()) / 2) + fm.getAscent());
            g.dispose();
            splash.update();
        }

        @Override
        protected Void doInBackground() throws Exception {
            for (int value = 0; value < 1000; value++) {

                float progress = value / 1000f;
                publish(progress);
                Thread.sleep(25);

            }
            return null;
        }
    }
} 
```

# python - 用方法装饰函数（带有任意参数）

> ID：14802663
> 
> 赞同：0
> 
> 时间：2013-02-10T21:14:37.570
> 
> 标签：python, function, methods, decorator, python-decorators

### 参考

在写这个问题之前，我已经参考了以下一些有趣的问题，并且觉得这个场景没有被解释/覆盖：

*   [如何制作功能装饰器链？](https://stackoverflow.com/questions/739654/understanding-python-decorators)（特别是答案＃2）
*   [如何在类中装饰方法？](https://stackoverflow.com/questions/1367514/how-to-decorate-a-method-inside-a-class)
*   [类中的 Python 装饰器](https://stackoverflow.com/questions/1263451/python-decorators-in-classes)
*   [基于 Python 类的装饰器，带有可以装饰方法或函数的参数](https://stackoverflow.com/questions/9416947/python-class-based-decorator-with-parameters-that-can-decorate-a-method-or-a-fun)（接近但不完全符合我的要求）

我有一个`function`如下：

```
def simple_function():
    print 'this is a simple_function' 
```

而且，我有以下`class`一些`methods`

```
class Test:

    def Test_method_1(self, func, args=None, kwargs=None):
        print 'this is Test::Test_method_1'
        <execute some instructions here>

    def Test_method_2(self):
        print 'this is Test::Test_method_2' 
```

我正在使用`Test_method_1`，`simple_function`如下：

```
t = Test()
t.Test_method_1(simple_function) 
```

假设如果`simple_function`接受任意参数，则`Test_method_1`调用如下：

```
def simple_function(a, b, c, d=f, g=h):
    print 'this is a simple_function'

t = Test()
t.Test_method_1(simple_function, args=[a, b, c], kwargs={d:f, g:h}) 
```

现在，我想`Test_method_2`用作`decorator version`. `Test_method_1`所以`simple_function`定义可以写成如下：

```
t = Test()

@t.Test_method_2
def simple_function():
    print 'this is a simple_function' 
```

注意：`Test_method_2`将`Test_method_1`使用适当的参数调用。

### 现在的问题：

*   1 - 这可能吗？
*   2 - 如果可能，如何将装饰函数的名称（此处`simple_function`）作为参数传递给`Test_method_2`（包括`self`）？
*   3 - [这是杀手问题，我相信] 我想将任意参数传递给`Test_method_2`（装饰器）和 `simple_function`（被装饰的函数） - `*args and **kwargs`- 应该如何`Test_method_2`定义接收参数（包括`self`）？

`Test_method_2`作为带有任意参数的装饰器的用法`simple_function`如下：

```
t = Test()
@t.Test_method_2(a, b, c, d, e=f, g=h)
def simple_function(x, y, z, n=m):
    print 'this is a simple_function' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:24:04.530

当然有可能。语法所做的`@decorator`只是定义后面的函数，然后调用装饰器，传入后面的函数并将对该函数的引用替换为返回的任何内容。

所以以下内容：

```
@foo
def bar():
    pass 
```

被翻译成：

```
def bar():
    pass
bar = foo(bar) 
```

这意味着您的`t.Test_method_2()`方法必须期待一个参数，即要装饰的函数，并返回可调用的内容：

```
import functools

def Test_method_2(self, func):
    @functools.wraps(func)
    def wrapper(self, *args, **kw):
        print 'Wrapped function name:', func.__name__
        return func(*args, **kw)
    return wrapper 
```

将是返回包装函数的最小装饰器，并在调用时打印包装函数的名称。*参数叫*什么并不重要；我`func`在这里使用过，但它可以是任何合法的 python 标识符。

这`self`是方法签名的标准部分。因为您引用`Test_method_2`的是一个实例`t`，所以 Python 会`self`像处理所有方法一样自动为您处理参数。

后面`@`的只是一个表达。因此，如果您使用以下语法：

```
@t.Test_method_2(a, b, c, d, e=f, g=h) 
```

然后`Test_method_2()`应该返回一个装饰器函数。一层额外的范围嵌套应该做到这一点：

```
def Test_method_2(self, *args, **kw):
    def decorator(func):
        @functools.wraps(func)
        def wrapper(*wrapperargs, **wrapperkw):
            fargs = args + wrapperargs
            fkw = dict(kw)
            fkw.update(wrapperkw)
            return func(*fargs, **fkw)
        return wrapper
    return decorator 
```

解构这个：

```
@t.Test_method_2(5, 6, 7, 8, baz='spam', ham='eggs')
def simple_function(x, y, z, n=m):
    print 'this is a simple_function' 
```

`@`, 之后的部分`t.Test_method_2(5, 6, 7, 8, baz='spam', ham='eggs')`返回嵌套函数`decorator`：

```
@decorator
def simple_function(x, y, z, n=m):
    print 'this is a simple_function' 
```

然后python变成：

```
simple_function = decorator(simple_function) 
```

并`decorator(func)`返回`wrapper(*wrapperargs, **wrapperkw)`。

`simple_function(1, 2, foo='bar')`然后调用会导致调用`wrapper(1, 2, foo='bar')`原始文件*并* `simple_function()`作为位置`fargs = [5, 6, 7, 8, 1, 2]`和`fkw = {'baz': 'spam', 'ham': 'eggs', 'foo': 'bar'}`关键字参数传入。

您在链接问题中看到的类装饰器模式以类似的方式工作；后面的表达式`@`返回被调用的东西；而不是一个嵌套函数，而是创建一个类实例。这只是两种不同的存储状态供装饰器使用的方法。

嵌套函数编写起来更紧凑，而使用类比嵌套作用域提供了更多的自省选项。

# linux - 如何在代理服务器上反向访问

> ID：14802664
> 
> 赞同：0
> 
> 时间：2013-02-10T21:14:42.607
> 
> 标签：linux, security, networking

我希望**避免直接访问**系统 A。但是，系统 A 上正在运行服务 C。

任何人都可以访问另一个系统 B。

我想以用户认为服务 C 在 B 上运行的方式将请求从 B“转发”到 A。

从技术上讲，我知道如何实现两个网络程序（D 和 E）来实现这个要求。D 在系统 A 上运行，连接到在系统 B 上运行的 E。

对服务 C 的任何请求都将从 E 转发到 D。D 将请求传递给“真正的”服务 C。当然，响应顺序相反。

```
Network Access Anyone -> B <- A
Programs  E <- D 

Service flow Anyone -> E -> D -> C 
```

对于还在我身边的人：

做这些程序时我会**重新发明轮子吗？**

换句话说，是否已经有一个开源/ linux 程序在做这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:09:33.933

这看起来像是 SSH 隧道的教科书用例。

在服务器 A 上，安装一个 SSH 服务器（例如，如果它是 Debian，则安装软件包 openssh-server）。在服务器 B 上，运行以下命令：

```
ssh -f SERVICEUSER@AHOST -L BPORT:AHOST:APORT -N 
```

其中 SERVICEUSER 是运行服务的用户的名称，A 是 A 的主机名或 IP，BPORT 是服务器 B 上服务应该可用的端口号，APORT 是服务所在的端口在服务器 A 上监听。更多信息：[http ://www.revsys.com/writings/quicktips/ssh-tunnel.html](http://www.revsys.com/writings/quicktips/ssh-tunnel.html)

您必须在每次重新启动后运行此命令，因此最好为其编写一个 init 脚本，以便可以像服务一样对其进行管理。从这里开始：[http ://www.thegeekstuff.com/2012/03/lsbinit-script/](http://www.thegeekstuff.com/2012/03/lsbinit-script/)

为了避免输入 SERVICEUSER 的密码，这在 init 脚本中是不可能的，您还需要在服务器 B 上生成一个私有 SSH 密钥并将其添加到 SERVICEUSER 的 authorized_keys 文件中，这可能涉及为 SERVICEUSER 创建一个主目录。使用`usermod -d`命令： http: [//linux.die.net/man/8/usermod](http://linux.die.net/man/8/usermod)然后按照[http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html](http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html)一个常见的陷阱要记住的是，authorized_keys 文件和 .ssh 目录都必须设置`chmod`为 600 并归 SERVICEUSER 所有，否则 SSH 服务器将忽略它们。

# asp.net-mvc-3 - 使用实体框架填充下拉列表并将新行添加到数据库

> ID：14802665
> 
> 赞同：0
> 
> 时间：2013-02-10T21:14:45.103
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我想添加一个带有类别的帖子，我的`Add`操作`BlogController`是这样的：

```
private readonly IBlogPostRepository _blogPostRepository;
private readonly ICategoryRepository _categoryRepository;

public BlogController()
        {
            _blogPostRepository = new BlogPostRepository(new SiteContext());
            _categoryRepository = new CategoryRepository(new SiteContext());
        }

        public BlogController(IBlogPostRepository blogPostRepository, ICategoryRepository      categoryRepository)
        {
            _blogPostRepository = blogPostRepository;
            _categoryRepository = categoryRepository;
        }

        public ActionResult Add()
        {
            ViewData["categoryList"] = _categoryRepository.GetAllCategory();
            return View("Add");
        }

        [HttpPost]
        public ActionResult Add(BlogPost blogPost)
        {
            if (ModelState.IsValid)
            {
                blogPost.PublishDate = DateTime.Now;

                _blogPostRepository.AddPost(blogPost);
                _blogPostRepository.Save();
                return RedirectToAction("Add");
            }
            return new HttpNotFoundResult("An Error Accoured while requesting your order!");
        } 
```

我的第一个问题是，为什么我不能将类别列表投射到`SelectList`剃刀中以通过 选择类别`DropDownList`？我的代码是这样的：

```
 <div>
        @Html.LabelFor(b => b.Category)
        @Html.DropDownList("Category", ViewData["categoryList"] as SelectList)
        @Html.ValidationMessageFor(b => b.Category)
    </div> 
```

我的第二个问题是：如何`Add`根据`POST`请求添加类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:47:39.887

要将集合用于下拉列表，它必须是 type `IEnumerable<SelectListItem>`，即`SelectList`。您不能获取任意对象集合并将其转换为`SelectList`.

我喜欢使用扩展方法来创建一个`IEnumerable<SelectListItem>`，看看这个：

```
public static class SelectListExtensions
{
    public static IEnumerable<SelectListItem> ToSelectList<T>(this IEnumerable<T> source)
    {
        return ToSelectList(source, null);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T>(this IEnumerable<T> source, string defaultOption)
    {
        return ToSelectList(source, value => value, value => value.ToString(), null);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T, TDataValue>(
        this IEnumerable<T> source,
        Func<T, TDataValue> dataValueSelector,
        Func<T, string> dataTextSelector)
    {
        return ToSelectList(source, (value, index) => dataValueSelector(value), dataTextSelector, null);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T, TDataValue>(
        this IEnumerable<T> source,
        Func<T, int, TDataValue> dataValueSelector,
        Func<T, string> dataTextSelector)
    {
        return ToSelectList(source, dataValueSelector, dataTextSelector, null);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T, TDataValue>(
        this IEnumerable<T> source,
        Func<T, TDataValue> dataValueSelector,
        Func<T, string> dataTextSelector,
        string defaultOption)
    {
        return ToSelectList(source, (value, index) => dataValueSelector(value), dataTextSelector, defaultOption);
    }

    public static IEnumerable<SelectListItem> ToSelectList<T, TDataValue>(
        this IEnumerable<T> source,
        Func<T, int, TDataValue> dataValueSelector,
        Func<T, string> dataTextSelector,
        string defaultOption)
    {
        var list = source.Select((item, index) => new SelectListItem
        {
            Value = dataValueSelector(item, index).ToString(),
            Text = dataTextSelector(item),
        }).ToList();

        if (defaultOption == null) return list;

        list.Insert(0, new SelectListItem { Text = defaultOption, Value = "-1" });

        return list;
    }
} 
```

然后，您可以在控制器中使用此扩展方法：

```
public ActionResult Add()
{
    ViewData["categoryList"] = _categoryRepository.GetAllCategory()
        .ToSelectList(c => c.Id, c => c.Name);

    return View("Add");
} 
```

假设您`Category`具有属性`Id`并且`Name`...

然后在您的视图中使用它：

```
@Html.DropDownList("Category", ViewData["categoryList"] as IEnumerable<SelectListItem>) 
```

在旁注中，我建议您使用模型传递给您的（强类型）视图，而不是使用`ViewData`/ `ViewBag`。它在你要重构某些东西的那一天为你省去了很多麻烦，它还为你提供了很好的工具帮助（智能感知）。

# c++ - 多维数组C++的最大值索引

> ID：14802667
> 
> 赞同：-3
> 
> 时间：2013-02-10T21:14:57.993
> 
> 标签：c++, arrays, max

我需要在 C++ 中找到一个多维数组的最大值和索引，例如，如果我有一个`arr`有 4 个维度的数组：其中 `int r[10][10][10][10]`包含随机值，我需要找到以下形式的解决方案：

> 最大值：104
> 
> max_valu_index : (3,4,8,2)

基本上我正在尝试构建一个 3D 霍夫变换累加器。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:19:38.070

```
int max = r [0][0][0][0];
int ma = 0, mb = 0, mc = 0, md = 0;

for (int a = 0; a < 10; a++)
    for (int b = 0; b < 10; b++)
        for (int c = 0; c < 10; c++)
            for (int d = 0; d < 10; d++)
            { 
                if (r [a][b][c][d] > max)
                {
                    max = r [a][b][c][d];
                    ma = a;
                    mb = b;
                    mc = c;
                    md = d;
                }
            }

printf ("max_value : %d max_value_index : (%d, %d, %d, %d)", max, ma, mb, mc, md); 
```

# javascript - 在 iframe 中嵌入 instagram/youtube 页面“拒绝显示文档，因为 X-Frame-Options 禁止显示。”

> ID：14802669
> 
> 赞同：0
> 
> 时间：2013-02-10T21:15:03.107
> 
> 标签：javascript, youtube, instagram, x-frame-options

我意识到有一些方法可以直接嵌入 youtube 视频，这不是我想做的。有没有办法在 iframe 中显示网站？还是Instagram？这对于我正在尝试做的事情至关重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:48:30.353

不，否则标题将毫无用处。当然，您可以使用无法识别标头的非常旧的浏览器，但是对于服务器端您无能为力。另请参阅：[https ://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

# c# - 序列化 NodaTime JSON

> ID：14802672
> 
> 赞同：5
> 
> 时间：2013-02-10T21:15:30.243
> 
> 标签：c#, datetime, nodatime

与 BCL 的 DateTime 相比，我正在制作 NodaTime 的原型项目，但执行此结果会给我 recursionLimit 超出错误。

![超出递归限制](../Images/f7f464b3d6dda8bc387508a5476fc7e0.png)

这是我用来 JSON 化我的视图模型的函数。此函数返回后发生错误。

```
 [HttpPost]
    public JsonResult GetDates(int numOfDatesToRetrieve)
    {
        List<DateTimeModel> dateTimeModelList = BuildDateTimeModelList(numOfDatesToRetrieve);

        JsonResult result = Json(dateTimeModelList, JsonRequestBehavior.AllowGet);
        return result;
    } 
```

当我检查它时，我的视图模型是正确构建的。这是我的视图模型的代码。

```
public class DateTimeModel
{
    public int ID;

    public LocalDateTime NodaLocalDateTimeUTC;
    public LocalDateTime NodaLocalDateTime
    {
        get
        {
            DateTimeZone dateTimeZone = DateTimeZoneProviders.Bcl.GetZoneOrNull(BCLTimezoneID);

            //ZonedDateTime zonedDateTime = NodaLocalDateTimeUTC.InUtc().WithZone(dateTimeZone);

            OffsetDateTime offsetDateTime = new OffsetDateTime(NodaLocalDateTimeUTC, Offset.Zero);
            ZonedDateTime zonedDateTime = new ZonedDateTime(offsetDateTime.ToInstant(), dateTimeZone);
            return zonedDateTime.LocalDateTime;
        }
    }

    public OffsetDateTime NodaOffsetDateTime;

    public DateTime BclDateTimeUTC;
    public DateTime BclLocalDateTime
    {
        get
        {
            DateTime utcDateTime = DateTime.SpecifyKind(BclDateTimeUTC, DateTimeKind.Utc);
            TimeZoneInfo nzTimeZone = TimeZoneInfo.FindSystemTimeZoneById(BCLTimezoneID);
            DateTime result = TimeZoneInfo.ConvertTimeFromUtc(utcDateTime, nzTimeZone);
            return result;
        }
    }

    public DateTimeOffset BclDateTimeOffset;
    //public int Offset;
    public string OriginalDateString;
    public string BCLTimezoneID;
} 
```

我确信 NodaTime 对象没有正确序列化，因为当我从 viewModel 注释代码时，JsonResult 能够执行。

我从这个页面上读到了这个[NodaTime API Reference](http://noda-time.googlecode.com/hg/docs/api/html/N_NodaTime_Serialization_JsonNet.htm)

> 此命名空间中的代码当前不包含在 Noda Time NuGet 包中；它仍然被认为是“实验性的”。要使用这些序列化程序，请从项目主页下载并构建 Noda Time 源代码。

所以我下载并构建了源代码并替换了我的项目引用的 dll，但我不知道如何实现 JsonSerialization 类。

有人可以向我解释如何使用 NodaTime.Serialization.JsonNet 类使我的 NodaTime 对象可序列化吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T10:30:40.057

我们目前不支持`JavaScriptSerializer`：我怀疑您必须使用[Json.NET](http://json.net)进行*所有*JSON 序列化。有关序列化的[用户指南页面](http://nodatime.org/1.2.x/userguide/serialization.html)提供了*更多*信息，但它主要假设您已经了解 Json.NET。

好消息是 Json.NET 非常易于使用 - 您可能会发现它很简单：

```
var settings = new JsonSerializerSettings();
settings.ConfigureForNodaTime();
string json = JsonConvert.SerializeObject(model, settings); 
```

（或使用`JsonSerializer`。）

顺便说一句，您使用 Noda Time 类型的方式至少可以说有点奇怪 - 可能值得问另一个问题，详细说明您想要实现的目标，我们可以制定一个更惯用的这样做的方式:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-27T19:27:25.690

[Noda Time 2.0+ 中的 JSON.NET 支持](https://nodatime.org/2.2.x/userguide/serialization)序列化。

您需要使用 NuGet 安装该软件包：

```
> Install-Package NodaTime.Serialization.JsonNet 
```

然后配置您的序列化程序设置以使用它。这**不适用于默认的序列化器/反序列化器**- 您需要明确配置一个。

我们选择静态使用一个。您的用法可能会有所不同。这是一个例子：

```
using Newtonsoft.Json;
using NodaTime;
using NodaTime.Serialization.JsonNet; // << Needed for the extension method to appear!
using System;

namespace MyProject
{
    public class MyClass
    {
        private static readonly JsonSerializerSettings _JsonSettings;

        static MyClass()
        {
            _JsonSettings = new JsonSerializerSettings
            {
                // To be honest, I am not sure these are needed for NodaTime,
                // but they are useful for `DateTime` objects in other cases.
                // Be careful copy/pasting these.
                DateFormatHandling = DateFormatHandling.IsoDateFormat,
                DateTimeZoneHandling = DateTimeZoneHandling.Utc,
            };

            // Enable NodaTime serialization
            // See: https://nodatime.org/2.2.x/userguide/serialization
            _JsonSettings.ConfigureForNodaTime(DateTimeZoneProviders.Tzdb);
        }

        // The rest of your code...
    }
} 
```

# ios6 - 我的设备未显示在计划中

> ID：14802675
> 
> 赞同：0
> 
> 时间：2013-02-10T21:15:58.633
> 
> 标签：ios6, xcode4.5, ios6.1

我的 iPod touch 运行 iOS 6.1，支持的 Xcode 4.5.2 部署目标是 iOS SDK 6.0。

这是我的 iPod touch 不在方案列表中的原因吗？我应该升级 Xcode 以支持 iOS 6.1 部署吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:03:35.227

是的，iOS 6.1 支持是 Xcode 4.6 的新特性，所以你必须升级。

如果您在 Xcode 4.5 中打开“管理器”窗口并转到“设备”选项卡，您应该会看到 iPod 设备和不支持 iOS 版本的消息。

# c# - 创建具有多个子级的对象。一个级别正确保存，但不是多个级别

> ID：14802677
> 
> 赞同：2
> 
> 时间：2013-02-10T21:16:01.483
> 
> 标签：c#, .net, nhibernate

我有一个 User 类，它与 PlaylistCollection 类具有一对多的关系。同样，PlaylistCollection 与 Playlist 类具有一对多的关系。

我想创建一个新的用户对象并将其保存到数据库中。作为副作用，我希望一个新的 PlaylistCollection 和一个新的 Playlist 也被写入数据库。当我调用 commit -- NHibernate 抛出异常：

```
exec sp_executesql N'INSERT INTO [Playlists] (CollectionId, Title, Position, Id) VALUES (@p0, @p1, @p2, @p3)',N'@p0 uniqueidentifier,@p1 nvarchar(4000),@p2 int,@p3 uniqueidentifier',@p0='00000000-0000-0000-0000-000000000000',@p1=N'New Playlist',@p2=0,@p3='CD593D78-5300-434E-B256-6271D4A60915'

The INSERT statement conflicted with the FOREIGN KEY constraint "FK66D0C3A319AEA85C". The conflict occurred in database "StreamusTest", table "dbo.PlaylistCollections", column 'Id'. 
```

如果我省略给我的 PlaylistCollection 一个初始的 Playlist 对象，则不会发生此错误。我可以将具有 PlaylistCollection 的用户写入数据库，但不是用户 - > PlaylistCollection - > 播放列表。

我的映射：

```
 <class name="User" table="[Users]" lazy="false">
    <id name="Id" unsaved-value="00000000-0000-0000-0000-000000000000">
      <generator class="guid" />
    </id>

    <property name="Name" />

    <bag name="PlaylistCollections" cascade="all-delete-orphan" >
      <key column="UserId" />
      <one-to-many class="PlaylistCollection" />
    </bag>
  </class>

  <class name="PlaylistCollection" table="[PlaylistCollections]" lazy="false" >
    <id name="Id" unsaved-value="00000000-0000-0000-0000-000000000000">
      <generator class="guid" />
    </id>

    <property name="Title" not-null="true" />

    <bag name="Playlists" cascade="all-delete-orphan" >
      <key column="CollectionId" />
      <one-to-many class="Playlist" />
    </bag>
  </class>

  <class name="Playlist" table="[Playlists]" lazy="false" >
    <id name="Id" unsaved-value="00000000-0000-0000-0000-000000000000">
      <generator class="guid" />
    </id>

    <property name="CollectionId" not-null="true" />
    <property name="Title" not-null="true" />
    <property name="Position" not-null="true" />

    <bag name="Items" cascade="all-delete-orphan" >
      <key column="PlaylistId" />
      <one-to-many class="PlaylistItem" />
    </bag>
  </class> 
```

和实体构造函数/辅助方法：

```
public User()
{
    Name = string.Empty;
    PlaylistCollections = new List<PlaylistCollection>
        {
            new PlaylistCollection("New Playlist Collection")
        };
}

public PlaylistCollection()
{
    Id = Guid.Empty;
    UserId = Guid.Empty;
    Title = string.Empty;
    Playlists = new List<Playlist>();

    //  A collection should always have at least one Playlist.
    CreatePlaylist();
}

public PlaylistCollection(string title) 
    : this()
{
    Title = title;
}

public Playlist()
{
    Id = Guid.Empty;
    CollectionId = Guid.Empty;
    Title = string.Empty;
    Position = -1;
    Items = new List<PlaylistItem>();
}
public Playlist CreatePlaylist()
{
    string playlistTitle = string.Format("New Playlist {0:D4}", Playlists.Count);
    var playlist = new Playlist(playlistTitle);
    return AddPlaylist(playlist);
}

public Playlist AddPlaylist(Playlist playlist)
{
    if (Id != Guid.Empty)
    {
        playlist.CollectionId = Id;
    }

    playlist.Position = Playlists.Count;

    Playlists.Add(playlist);
    return playlist;
} 
```

最后，这是失败的方法：

```
/// <summary>
///     Creates a new User and saves it to the DB. As a side effect, also creates a new, empty
///     PlaylistCollection (which has a new, empty Playlist) for the created User and saves it to the DB.
/// </summary>
/// <returns>The created user with a generated GUID</returns>
public User CreateUser()
{
    User user;
    try
    {
        NHibernateSessionManager.Instance.BeginTransaction();

        user = new User();
        user.ValidateAndThrow();
        UserDao.Save(user);

        NHibernateSessionManager.Instance.CommitTransaction();
    }
    catch (Exception exception)
    {
        Logger.Error(exception);
        NHibernateSessionManager.Instance.RollbackTransaction();
        throw;
    }

    return user;
} 
```

显然，问题在于 Playlist 对象正在尝试使用 Guid.Empty 的 CollectionId 来保存自己。它应该尝试使用在保存 PlaylistCollection 时生成的任何内容的 CollectionId 来保存自己。

**更新：**这可行，但显然是被迫的。我该如何改进它？

// 播放列表类内部：

```
[DataMember(Name = "collectionId")]
public Guid CollectionId
{
    get { return Collection.Id; }
    set { Collection.Id = value; }
}

public PlaylistCollection Collection { get; set; } 
```

这样做可以让我返回我的 collectionId 并且 NHibernate 现在已经正确地找出了映射......但对我来说似乎仍然有点强迫。

# javascript - 使用 JavaScript/jQuery，如何根据下拉列表中的选择过滤列表？

> ID：14802678
> 
> 赞同：1
> 
> 时间：2013-02-10T21:16:03.137
> 
> 标签：javascript, asp.net-mvc, jquery-mobile

这是我的应用程序的屏幕截图：

![在此处输入图像描述](../Images/c6466403d5f1228fa91c5321f7c7834e.png)

您看到的填充剂列表来自数据库，并且都与多个胶囊相关联。我不想展示所有的填充物。我只想根据所选胶囊显示填充剂。用户可以选择 4 个胶囊。例如，当用户选择 #0 Capsule 时，我希望 Filler 列表更改为仅显示与 #0 Capsule 相关的填充物。其他胶囊也一样。

动态修改填充物列表以仅显示基于所选胶囊的填充物的最佳方法是什么？我是否要调用我的 C# 方法来检索填充列表并传入选择的胶囊，这将涉及回发？还是有更好的方法通过客户端做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:43:05.487

1.  使用名为 GetFillersByCapsule(int capsuleTypeId) 的方法制作一个控制器。这应该返回 json 对象上的填充物。
2.  如果您在客户端使用 jQuery，您应该编写一个函数来调用此控制器方法的 ajax。将调用绑定到 document.ready 和下拉更改。像这样的东西：

    ```
    <script>
    var dropdown = $("#dropdownId"); //Declare this first so you don't have to search the DOM each time
    function getFillers(){
       $.ajax("yourControllerMethodUrlHere", {
        data: {id: dropdown.val()}, 
        type: "GET",
        contentType: "application/json",
        dataType: "json",
        success: function (result) {
           //Use the resulting JSON here to repopulate the list containing the fillers
        },
    }
    $(document).ready(function(){
         fill
    }); 
    ```

# php - Array_unique SORT_REGULAR 标志

> ID：14802680
> 
> 赞同：12
> 
> 时间：2013-02-10T21:16:08.973
> 
> 标签：php

```
$array = array(1, '1a', '1');
var_export(array_unique($array, SORT_REGULAR)); 
```

*   结果：数组 ( 0 => 1, 2 => '1')
*   在 PHP 手册中：SORT_REGULAR - 正常比较项目（不要更改类型）。

这背后的逻辑是什么？为什么或如何排除“1a”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T21:49:21.807

发生这种情况的原因`array_unique`是，*[首先将值排序为字符串](http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#2787)*，然后[遍历](http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#2815)排序后的数组，并为每个值从结果中排除与*它相比的所有连续值*。

上面“比较相等”的比较函数是根据第二个参数来选择的，它`SORT_REGULAR`与用 的相等性检查相同`==`。

这种行为会引起很多问题。由于排序是快速排序，因此不稳定。因此，对包含两者的数组进行排序，`1`并`'1'`不能保证哪一个最终会成为结果中的第一个。这意味着在某些情况下和其他情况下`array_unique`可能会出现任意“偏好” 。`1``'1'`

然而，疯狂仍在继续：考虑如果排序产生`[1, '1', '1a']`then`'1a'`将*不会*包含在结果中（它比较等于`1`），而如果排序产生`['1', 1, '1a']`则它将*被*包含（它不比较等于字符串`'1'`）！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T21:59:35.747

如果您想获得更多技术信息，可以查看源代码。

该`PHP_SORT_REGULAR`标志只是告诉`array_unique`回退到标准比较运算符 ( `==`)。

您可以在[`array_unique`](https://github.com/php/php-src/blob/master/ext/standard/array.c#L2777)使用的源代码中看到这一点[`php_set_compare_func`](https://github.com/php/php-src/blob/master/ext/standard/array.c#L144)：

```
static void php_set_compare_func(int sort_type TSRMLS_DC) /* {{{ */
{
switch (sort_type & ~PHP_SORT_FLAG_CASE) {
...
    case PHP_SORT_REGULAR:
    default:
        ARRAYG(compare_func) = compare_function;
        break;
} 
```

哪里`compare_func`只是[标准比较功能](https://github.com/php/php-src/blob/a744390c503645d0326a2aff26c986f85ffc3a01/Zend/zend_operators.c#L1457)。

这可能是一个文档错误，而不是其他任何东西。文档中的评论有点误导：

> ...当且仅当 (string) $elem1 === (string) $elem2

如果两个值都转换为字符串，则不需要，但它会导致进行类型比较`===`的假设。`SORT_REGULAR`

# c# - 如何使用 LINQ 使用不同的分隔符将字符串拆分两次？

> ID：14802681
> 
> 赞同：5
> 
> 时间：2013-02-10T21:16:09.897
> 
> 标签：c#, linq, split

我有类似的字符串`"1\t2\r\n3\t4"`，我想将它们拆分为：

`new string[][] { { 1, 2 }, { 3, 4 } }`

基本上，它应该被分成几行，每一行都应该被分成制表符。我尝试使用以下方法，但它不起作用：

```
string toParse = "1\t2\r\n3\t4";

string[][] parsed = toParse
    .Split(new string[] {@"\r\n"}, StringSplitOptions.None)
    .Select(s => s.Split('\t'))
    .ToArray(); 
```

1.  我的方法有什么问题？为什么我没有得到想要的结果？
2.  您将如何使用 LINQ 解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T21:19:51.730

去除 '@'：

```
string toParse = "1\t2\r\n3\t4";

string[][] parsed = toParse
    .Split(new string[] {"\r\n"}, StringSplitOptions.None)
    .Select(s => s.Split('\t'))
    .ToArray(); 
```

@ 使字符串包含反斜杠，而不是它们所代表的字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T21:23:06.080

```
string str = "1\t2\r\n3\t4";
Int32[][] result = str.Split(new[] { Environment.NewLine }, StringSplitOptions.None)
    .Select(s => s.Split('\t').Select(s2 => int.Parse(s2)).ToArray())
    .ToArray(); 
```

[**演示**](http://ideone.com/dJu0bL)

# ant - 通过 Ant 执行的 JUnit 不断失败

> ID：14802683
> 
> 赞同：0
> 
> 时间：2013-02-10T21:16:12.640
> 
> 标签：ant, junit

执行简单的 junit 测试类时，我不断收到 java.lang.ClassNotFoundException。我只是找不到问题所在。这是我的文件系统。主应用程序编译正常。这是我的蚂蚁文件：

```
<project name="MyProject" default="dist" basedir=".">
    <description>
       controller build
    </description>
  <!-- set global properties for this build -->
  <property name="src" location="src"/>
  <property name="build" location="build"/>
  <property name="dist"  location="dist"/>
  <property name="TALK" value="true" />

  <path id="class.path">
      <fileset dir="..\lib">
        <include name="**/*.jar" />
      </fileset>      
  </path>

  <path id="test.classpath">
    <pathelement location="${build}" />
    <pathelement location="..\lib\junit\junit.jar" />
      <fileset dir="..\lib">
        <include name="**/*.jar"/>
      </fileset>
  </path>

  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init"
        description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}" destdir="${build}" verbose="${TALK}">
        <classpath refid="class.path" />
    </javac>    
  </target>

  <target name="dist" depends="compile,test"
        description="generate the distribution" >
    <!-- Create the distribution directory -->
    <mkdir dir="${dist}/lib"/>

    <!-- Put everything in ${build} into the MyProject-${DSTAMP}.jar file -->
    <jar jarfile="${dist}/lib/controller.jar" basedir="${build}"/>
  </target>

  <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target>

  <target name="test" depends="compile">
    <junit printsummary="yes" showoutput="true">
      <classpath refid="test.classpath"/>      
      <formatter type="brief" usefile="false" />
      <test name="workflowShouldHaveValidXML" />
      <!--test name="environmentHasValidXml" /-->
      <!--test name="workflowHasValidXml" /-->
    </junit>
  </target>

</project> 
```

这是我得到的错误：

```
D:\svn\trunk\controller>ant  -f build_controller.xml
Buildfile: D:\svn\trunk\controller\build_controller.xml

init:

compile:
    [javac] D:\svn\trunk\controller\build_controller.xml:37: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false
 for repeatable builds

test:
    [junit] Running workflowShouldHaveValidXML
    [junit] Testsuite: workflowShouldHaveValidXML
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit]
    [junit] Null Test:  Caused an ERROR
    [junit] workflowShouldHaveValidXML
    [junit] java.lang.ClassNotFoundException: workflowShouldHaveValidXML
    [junit]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    [junit]     at java.lang.Class.forName0(Native Method)
    [junit]     at java.lang.Class.forName(Class.java:264)
    [junit]
    [junit]
    [junit] Test workflowShouldHaveValidXML FAILED

dist:

BUILD SUCCESSFUL
Total time: 0 seconds 
```

这是我的目录结构：

```
svn\trunk\controller\build_controller.xml    \\ Ant file
svn\trunk\controller\src\com\controller\core\*.java  \\ main app sources
svn\trunk\controller\dist\lib\controller.jar  \\ the main product 
svn\trunk\controller\build\com\controller\core\*.class   \\the main product *.class
svn\trunk\controller\test\com\controller\core\workflowShouldHaveValidXML.java  \\ the test case class
svn\trunk\lib\junit\junit.jar 
svn\trunk\lib\java\*.jar   \\ third party jars 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:32:52.697

您需要使用完全限定的类名（包括包），而不仅仅是类的简单名称：

在您的 junit 任务中，尝试：

```
<test name="com.controller.core.workflowShouldHaveValidXML" /> 
```

# tridion - Tridion 页面解析期间的内容不匹配

> ID：14802684
> 
> 赞同：0
> 
> 时间：2013-02-10T21:16:21.313
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们在一次发布多个页面时面临内容不匹配问题。

让我们取两个带有 xml 内容的页面（A 和 B）。当我将两个页面一起发布时，页面 A 的内容被页面 B 的内容替换，但页面 B 的内容是正确的。当我们分析运输包中的页面内容时，已经被Page B的内容覆盖了。

我们检查了 pages.xml 和 instructions.xml 文件，其中我们可以看到页面的正确 tcm id，这发生在部署者处理页面之后。

环境详细信息是 1 个 CME + 3 个发布者（在不同的服务器上）。我们坚信它一定是页面解析器。

一次发布单个页面时不会发生此问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:22:51.087

我最近遇到了一个问题，模板中的静态变量会产生垃圾结果，类似于您遇到的情况。根据您上面的最后一条评论，这似乎已经解决了您的问题。关于为什么不应该使用静态变量的详细信息在这里解释：http: [//tridiondeveloper.com/static-variables-in-tridion-templates](http://tridiondeveloper.com/static-variables-in-tridion-templates)

# php - Nginx/1.0.15 Centos 6 显示 500 内部服务器错误

> ID：14802686
> 
> 赞同：0
> 
> 时间：2013-02-10T21:16:37.840
> 
> 标签：php, nginx

我只是在我的 centos 6 VPS 上设置了 nginx/1.0.15，没有使用域，只使用 VPS IP 进行设置。我使用以下指南进行设置：

[https://www.digitalocean.com/community/articles/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-6](https://www.digitalocean.com/community/articles/how-to-install-linux-nginx-mysql-php-lemp-stack-on-centos-6)

我也安装了 phpMyAdmin。

我设置了一切，一切顺利，但现在我添加了一个域名并编辑 /etc/nginx/conf.d/default.conf 以允许新域：

```
#
server {
listen       80;
server_name  customads.net; 
```

我可以查看一些文件，例如：

[http://customads.net/test.html](http://customads.net/test.html)

这只是一个带有一些随机文本的 h1 以查看它是否会显示，

我还创建了一个测试 php 页面：

[http://customads.net/testphp.php](http://customads.net/testphp.php)

这只是：

```
<?php
echo "Testing PHP Echo";
?> 
```

此外，当我尝试在 phpMyAdmin 中执行任何 SQL 查询时，我总是会收到以下错误消息：

```
import.php: Missing parameter: import_type
import.php: Missing parameter: format 
```

但是，当我直接从 ssh 查询时它可以工作。

有人会知道怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:02:41.407

> mkdir /var/lib/php/session
> chmod 777 /var/lib/php/session

验证您的`/etc/php-fpm.d/www.conf`包含

> php_value[session.save_handler] = 文件
> php_value[session.save_path] = /var/lib/php/session

# vim - Macvim 默认不会加载特定的配色方案

> ID：14802689
> 
> 赞同：8
> 
> 时间：2013-02-10T21:17:08.347
> 
> 标签：vim, macvim

我有一个类似于[VIM 颜色方案的问题，默认情况下没有加载](https://stackoverflow.com/questions/2637929/vim-color-scheme-not-loading-by-default)

除了我在这里找到的 gentooish 主题有问题[http://www.vim.org/scripts/script.php?script_id=2474](http://www.vim.org/scripts/script.php?script_id=2474)

出于某种原因，macvim 默认拒绝加载此颜色方案。

我的 vimrc 文件如下，我没有 .gvimrc 文件。

```
:set term=xterm-256color
:set t_Co=256
set background=dark
colorscheme gentooish 
```

但是一旦我打开了macvim，如果我这样做 :colorscheme gentooish 它将加载正常。如果我在命令行上键入 vim，它也会默认加载。它只是不会在 macvim 中默认加载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-10T22:19:51.300

MacVim 加载自己的默认 gvimrc 文件，该文件应用默认颜色方案。由于 gvimrc 文件是在vimrc 文件*之后*`:colorscheme`处理的，因此您的指令的颜色会被默认 gvimrc 中的颜色覆盖。

有两种解决方案： 创建您自己的 gvimrc 文件并将 colorscheme 命令放在那里：

```
$ cd
$ echo "colorscheme gentooish" > .gvimrc 
```

或者，将以下行放入您的 vimrc 中，这会阻止 MacVim 应用它自己的颜色方案（请参阅 参考资料`:h macvim-colorscheme`）。

```
let macvim_skip_colorscheme = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T21:58:23.290

1.  `:`在您的`~/.vimrc`.

2.  `term`并且`t_Co`是特定于终端的选项。MacVim 作为 Vim 的 GUI 并不关心它们。如果您不在终端中使用 Vim，则不需要这两行。

3.  `set background=dark`让 Vim 做一些几乎不引人注意但很漂亮的事情：它由 Vim 自动设置，并且通常被你的颜色方案覆盖。您可以安全地将其从`~/.vimrc`.

为了确保我们在同一条船上，您能否确认一下：

*   你的`.vimrc`路径是`~/.vimrc`？
*   你的配色方案路径是`~/.vim/colors/gentooish.vim`？

# eclipse - 尝试在 Eclipse Juno 上安装 scalatest

> ID：14802692
> 
> 赞同：0
> 
> 时间：2013-02-10T21:17:30.807
> 
> 标签：eclipse, scala, scalatest

我正在尝试在 Eclipse Juno 上安装[scalatest 。](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)我已经安装了 Eclipse 版本 2.1.0nightly-xxx 的 Scala 插件（你必须为 Juno 使用这个插件）。我从：http: [//download.scala-ide.org/nightly-update-juno-master-29x/site.xml](http://download.scala-ide.org/nightly-update-juno-master-29x/site.xml)

我按照[Scala IDE 2.1 Milestone 2](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)的说明进行操作，得到：

```
Scala Plugin 2.1.0.m3-2_09-201212171812-eb61d7f (org.scala-ide.sdt.core 2.1.0.m3-2_09-201212171812-eb61d7f) requires 'bundle org.eclipse.jdt.core [3.6.0,3.7.10)' but it could not be found 
```

谷歌搜索这会给我类似的错误消息，用于在 Juno 上安装 Eclipse 的 Scala 插件，这些错误消息是通过从每晚构建中安装来修复的。但是，我没有为 Scalatest 解决这个问题。有小费吗？

注意：我已经安装了 eclipse JDT 3.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:25:27.470

是的 - 您应该下载 Java 版本的 Eclipse。JDT 只是“Java 开发工具”——没有 JDT，scala-ide 将无法运行。或者您可以稍后在帮助/安装新软件中安装 JDT。

我刚刚看到 - 您的 scala-ide 指的是较旧的 Eclipse 版本（3.7、3.6） Scala 2.10 有一个更新站点，但对于 Juno：Scala - [http://download.scala-ide.org/sdk/ e38/scala210/dev/site/](http://download.scala-ide.org/sdk/e38/scala210/dev/site/)

好的 - 以及 scalatest 的构建 - 你使用 `*To build for Scala IDE nightly for Scala 2.10 (Juno), use`过... -Drepo.eclipse= [http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/) -

# python - 在 OS X 上获取操作系统版本

> ID：14802694
> 
> 赞同：1
> 
> 时间：2013-02-10T21:17:55.117
> 
> 标签：python, linux, macos, unix, ubuntu

我有一个旧脚本，用于在 Ubuntu 中运行。现在，我有一台 Mac，想重用该脚本。

有谁知道 Mac OS 中的以下命令等效于什么？

```
def runCmd(cmd):
    p = subprocess.Popen(cmd,
                         shell=True, 
                         stdin=subprocess.PIPE, 
                         stdout=subprocess.PIPE, 
                         stderr=subprocess.PIPE, 
                         close_fds=True)
    result=p.stdout.readlines()
    s=result[0].split()[0]
    return s

def getKernelVer():
    cmd="uname -r| cut --delim=\'.\' -f1-2"
    return runCmd(cmd)

def getUbuntuVer():
    cmd="lsb_release  -a | grep Release | cut -f 2"
    return runCmd(cmd) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:22:52.277

`uname -r`在达尔文下同样工作。内核版本不是大多数人谈论或关心的东西，但它就在那里。唯一的问题是它`cut`不支持`--delim`长选项，所以，试试这个：

```
uname -r | cut -d. -f1-2 
```

不过，Darwin 的内核版本控制与 Linux 的完全不同，因此在`cut`这里运行的目的尚不清楚。（事实上​​，在 Linux 上也不是很清楚，因为版本控制方案在 3.0 版本中发生了显着变化。）

要获取当前版本的 Mac OS（大致相当于您为 Ubuntu 获取的“发行版”），您可以使用以下命令：

```
sw_vers -productVersion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-27T11:11:42.930

您可以使用 python“平台”模块（我无法访问 Ubuntu，请尝试发布您的发现：）

1.  使用 platform.system() 区分 Linux 或 Darwin
2.  调用 platform.release() 获取内核版本
3.  调用 platform.linux_distribution() 或 platform.mac_ver() 以获取供应商特定的版本号。

在 CentOS 上：

```
$ python
Python 2.7.5 (default, Jul 23 2013, 17:26:16) 
[GCC 4.7.2 20121015 (Red Hat 4.7.2-5)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import platform
>>> platform.system()
'Linux'
>>> platform.release()
'2.6.32-358.18.1.el6.x86_64'
>>> platform.linux_distribution()
('CentOS', '6.4', 'Final')
>>> 
```

在 OS X 上：

```
$ python
Python 2.7.5 (default, Aug 25 2013, 00:04:04) 
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import platform
>>> platform.system()
'Darwin'
>>> platform.release()
'13.0.0'
>>> platform.mac_ver()
('10.9', ('', '', ''), 'x86_64') 
```

# android - 通过 MoPub 的 AdMob - 没有足够的空间来展示广告

> ID：14802695
> 
> 赞同：2
> 
> 时间：2013-02-10T21:18:09.013
> 
> 标签：android, admob, mopub

我不知道为什么会这样，这让我很生气。长话短说，在我通过 MoPub 使用的所有广告网络中，AdMob 似乎是唯一一个不显示广告的广告网络，声称它没有足够的空间。在 MoPub 中，我有一个手机广告单元和一个平板电脑广告单元。这是具体的日志：

```
02-10 09:44:44.094: I/Ads(9363): Request scenario: Online server request.
02-10 09:44:50.114: D/webviewglue(9363): nativeDestroy view: 0x678b8418
02-10 09:44:50.124: I/Ads(9363): onReceiveAd()
02-10 09:44:50.124: D/MoPub(9363): Google AdMob load succeeded. Showing ad...
02-10 09:44:50.124: D/MoPub(9363): adLoaded
02-10 09:44:50.124: D/MoPub(9363): Tracking impression for native adapter.
02-10 09:44:50.144: W/Ads(9363): Not enough space to show ad! Wants: <969, 119>, Has: <800, 1073741823>
02-10 09:44:50.144: W/Ads(9363): Not enough space to show ad! Wants: <969, 119>, Has: <800, 1073741823> 
```

广告已加载但未显示，因为显然它需要更多空间。我只想显示横幅广告。我在 Nexus 7 上进行测试。

我使用的其他网络是 LeadBolt 和 Millennial。他们在同一个空间中很好地展示横幅广告。

我的 Java 代码用于选择要显示的广告单元（基于屏幕尺寸的手机或平板电脑）：

```
 //Advert if statement
    Configuration config = getResources().getConfiguration();

            if ((config.screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) ==
                            Configuration.SCREENLAYOUT_SIZE_LARGE) {
                    //Tablet
                    mAdViewTabletLarge = (MoPubView) findViewById(R.id.LargeAdvert);
                            mAdViewTabletLarge.setAdUnitId("id here");
                            mAdViewTabletLarge.setVisibility(Application.getAdVisibiltyForEdition(this.getApplicationContext()));
                            mAdViewTabletLarge.loadAd();
            }
            else if ((config.screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) ==
                                    Configuration.SCREENLAYOUT_SIZE_XLARGE) {
                    //Tablet
                    mAdViewTabletXLarge = (MoPubView) findViewById(R.id.LargeAdvert);
                            mAdViewTabletXLarge.setAdUnitId("id here");
                            mAdViewTabletXLarge.setVisibility(Application.getAdVisibiltyForEdition(this.getApplicationContext()));
                            mAdViewTabletXLarge.loadAd();
            }
            else {
                    //Phone
                    mAdViewPhone = (MoPubView) findViewById(R.id.LargeAdvert);
                            mAdViewPhone.setAdUnitId("id here");
                            mAdViewPhone.setVisibility(Application.getAdVisibiltyForEdition(this.getApplicationContext()));
                            mAdViewPhone.loadAd();
            } 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T00:14:16.167

我在 Nexus 7 上遇到了同样的问题。我目前正在使用 Eclipse Juno，Service Release 1。在这个版本中，@dimension/... 引用自动添加到 xml 布局文件中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   ...
   ...
   android:paddingBottom="@dimen/activity_vertical_margin"
   android:paddingLeft="@dimen/activity_horizontal_margin"
   android:paddingRight="@dimen/activity_horizontal_margin"
   android:paddingTop="@dimen/activity_vertical_margin"
   ...
   ... 
```

当我删除 @dimension/... 引用时，错误消失，广告显示。不确定是否有技巧可以覆盖错误，并允许广告在@dimension/...参数内展示。如果有人知道，请分享！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T23:26:56.500

您收到错误是因为 728x90 dp 的广告在纵向模式下的 Nexus 7 上太大，只有 600 dp 宽。我无法想象其他网络如何使 728x90 图像适合 600x90，除非他们缩小高度以保持纵横比。AdMob 不会像那样缩放广告，而是会引发此警告。

平板广告只能是一种尺寸，这听起来像是 Mopub 的限制。我不熟悉 Mopub 前端设置，但也许您可以为 7 英寸平板电脑创建第二个尺寸较小的广告，并在运行时检查您的屏幕宽度以确定要显示的广告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T05:19:19.217

这个错误的原因：

您尝试展示广告的视图将从父视图中删除。确保

```
 <LinearLayout
      android:id="@+id/layoutAdmobGame"
      android:layout_width="wrap_content"
      android:layout_height="52dp"
      android:layout_alignParentBottom="true"
      android:layout_alignParentLeft="true"
      android:layout_alignParentRight="true"
      android:background="@android:color/transparent"
      android:gravity="center_horizontal"
      android:orientation="vertical" >
</LinearLayout> 
```

这在它的父视图中并且没有被移除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:31:13.717

您应该在 MoPub 中创建一个 320x50 广告单元和一个 728x90 广告单元，检测设备的宽度，然后根据设备的宽度有条件地触发它们。

如果屏幕宽度小于 728 像素，请关闭 320x50 广告单元。

如果更大，请使用排行榜广告单元。

# symfony - 两个实体之间的教义关系

> ID：14802701
> 
> 赞同：-1
> 
> 时间：2013-02-10T21:18:51.150
> 
> 标签：symfony, orm, doctrine-orm

我正在尝试将我的网站重写为 symfony2/doctrine。这些表使用 MyISAM，因此没有外键。

我根本无法将以下查询转换为两个实体并建立一个有效的关系。是因为我使用 MyISAM 吗？

```
SELECT p.productid, p.price, d.description FROM product p INNER JOIN description d ON p.productid = d.productid; 
```

在`product`我尝试过的实体中，但仍然没有成功：

```
/**
 * @ORM\OneToOne(targetEntity="Description")
 * @ORM\JoinColumn(name="productid", referencedColumnName="productid")
 */
protected $description; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:04:21.290

这与 MyISAM 无关。即使没有外键，Doctrine 也可以工作（尽管模式工具通常会强制执行它们）。检查生成的 DQL，`$query->getSQL()`并根据查询结果验证您的预期结果

# jquery - jQuery - 分离的锚内容仍然专注于 IE

> ID：14802702
> 
> 赞同：0
> 
> 时间：2013-02-10T21:18:55.003
> 
> 标签：jquery, internet-explorer

我遇到了另一个与 Internet Explorer 相关的问题。这个浏览器真的是互联网用户和网页设计师的诅咒！

我现在遇到的问题是，当单击具有翻转效果的链接图像时，整个父容器正在分离到另一个位置，但看起来我仍然将鼠标悬停在它上面。

请点击[此链接](http://www.mediaheart.ro/)并单击左侧的任何按钮（即“Profil”、“Servicii”、“Portofoliu”或“Recomandari”），并注意分离后它的显示方式。

我应该怎么办？

*稍后编辑：我已经更新了链接*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T01:47:11.137

好吧，我设法自己找到了解决方案。我已经删除了`a.someclass:hover`属性并通过 jQuery 添加了它们`mouseover()`。`detach()`通过删除 css 属性解决了悬停状态始终处于激活状态的问题`click()`。

所以，现在一切都好。不管怎么说，还是要谢谢你。

# java - Wicket (Java) : 如何使用 wickettester 测试 404 是否重定向到正确页面

> ID：14802711
> 
> 赞同：3
> 
> 时间：2013-02-10T21:19:58.960
> 
> 标签：java, http-status-code-404, wicket, wicket-tester

使用 wicketframework，可以使用 wickettester 并查看 lastrenderedpage。我想测试我的 wicketapplication 是否在运行时异常和缺少资源 (404) 时将用户重定向到我的自定义 ErrorPage。

对于第一种情况，我将重定向设置为我的自定义错误页面并验证它是否有效。基本上，“ `settings.setInternalErrorPage(ErrorPage.class);`”并且有一个基本上是这样的单元测试：

```
 tester = new WicketTester(webApplication);
        APage aPage = new APage();
        tester.startPage(aPage);
        tester.assertRenderedPage(APage.class);
        tester.setExposeExceptions(false);

        //Page rendered ok, now throw an exception at a button submit
        when(aPage.getServiceFacade()).thenThrow(new RuntimeException("DummyException"));
        tester.submitForm("searchPanel:searchForm");
        tester.assertRenderedPage(ErrorPage.class);//YES, we got redirected to deploymode 
```

所以运行时执行的测试 - > errorpage 工作正常。现在来测试丢失的资源。基本上我用“

```
 <error-page> 
    <error-code>404</error-code>
    <location>/error404</location>
    </error-page> 
```

然后我也安装在检票口。这适用于实际使用。但是在测试时..我试过这个..

```
 MockHttpServletRequest request = tester.getRequest();
         String contextPath = request.getContextPath();
         String filterPrefix = request.getFilterPrefix();
         tester.setExposeExceptions(false);
         tester.executeUrl(contextPath + "/" + filterPrefix + "/"+ "startpage" + "/MyStrangeurlToNothing);
         tester.assertRenderedPage(ErrorPage.class); 
```

但是，在这种情况下，测试器对象上的 lastrenderedpage 不起作用并给我 null。例如，我猜 WicketTester 不会读取 web.xml，因此不知道如何映射此错误。关于如何测试的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-31T10:09:37.960

我知道这已经很老了，但以防万一有人有同样的问题（就像我一样）：

我在这里找到了解决方案：

[https://issues.apache.org/jira/browse/WICKET-4104](https://issues.apache.org/jira/browse/WICKET-4104)

在我的情况下翻译成：

```
WicketTester tester = ...; //  set up tester
tester.setFollowRedirects(false); // important
tester.startpage(...);
// or 
tester.executeUrl(...);

// then test to see if there was a redirect
assert tester.getLastResponse().getRedirectLocation() != null;
assert aTester.getLastResponse().getRedirectLocation().endsWith("....");

// then manually redirect to that page and test its the page you expected
Url url = Url.parse(aTester.getLastResponse().getRedirectLocation());
aTester.executeUrl(url.getPath().substring(1)); // the substring chops off and leading /
aTester.assertRenderedPage(YourRedirectPage.class); 
```

希望对某人有所帮助

# php - Base64 Over HTTP POST 丢失数据（Objective-C）

> ID：14802715
> 
> 赞同：18
> 
> 时间：2013-02-10T21:20:39.433
> 
> 标签：php, ios, objective-c, xcode, http

我目前有一个 HTTP POST 请求和一个 Base64 编码库，我将图像编码为 B64，然后通过 POST 方法通过 HTTP 发送它。

我将 Base64 输出到 XCodes 控制台，复制并粘贴它，它工作得很好。尽管我存储在数据库中的 Base64（MongoDB、纯文本文件等）总是在另一端损坏。

工作版本（从 XCode 复制和粘贴）：[http](http://dontpanicrabbit.com/api/working.php) ://dontpanicrabbit.com/api/working.php 损坏版本（来自 MongoDB 数据库）：[http ://dontpanicrabbit.com/api/grabimage.php](http://dontpanicrabbit.com/api/grabimage.php)

如果您查看源代码，您会发现它们是相同的，但在损坏的版本中添加了空格。

我正在使用的 Objective-C 代码是：

```
MyImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];

    NSData *imageData = UIImageJPEGRepresentation(MyImage.image, 0);

    [Base64 initialize];
    NSString *encoded = [Base64 encode:imageData];

    NSString *urlPOST = encoded;
    //NSLog(@"%@",encoded);

    NSString *varyingString1 = @"picture=";
    NSString *varyingString2 = urlPOST;
    NSString *post = [NSString stringWithFormat: @"%@%@", varyingString1, varyingString2];
    NSLog(@"%@", post);
    //NSString *post = @"image=%@",urlPOST;
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:@"url/api/insertimage.php"]];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:postData];
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil];
    NSString *strResult = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

PHP -> MongoDB 存储

```
<?php
    try {
      // open connection to MongoDB server
      $conn = new Mongo('localhost');

      // access database
      $db = $conn->dablia;

      // access collection
      $collection = $db->images;

      // insert a new document
      $item = array(
        'picture' => $_POST['picture']
      );
      $collection->insert($item);
      echo 'Inserted document with ID: ' . $item['_id'];

      // disconnect from server
      $conn->close();
    } catch (MongoConnectionException $e) {
      die('Error connecting to MongoDB server');
    } catch (MongoException $e) {
      die('Error: ' . $e->getMessage());
    }
?> 
```

输出代码：

```
<?php
try {
  // open connection to MongoDB server
  $conn = new Mongo('localhost');

  // access database
  $db = $conn->dablia;

  // access collection
  $collection = $db->images;

  // execute query
  // retrieve all documents
  $cursor = $collection->find();

  // iterate through the result set
  // print each document
  foreach ($cursor as $obj) {
    echo '<img src="data:image/jpeg;base64,'.trim($obj['picture']).'">';
  }

  // disconnect from server
  $conn->close();
} catch (MongoConnectionException $e) {
  die('Error connecting to MongoDB server');
} catch (MongoException $e) {
  die('Error: ' . $e->getMessage());
}
?> 
```

我不知道为什么我似乎在 POST 上被破坏了？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-10T22:23:31.787

问题正是我在第一条评论中建议的。也就是说，base64 编码的数据可以包含“+”字符。在 x-www-form-urlencoded 数据中，接收者知道“+”是空格字符的编码。因此，由于您没有对 base64 值进行 URL 编码，因此任何“+”实例都会导致数据在接收时损坏。

初始数据中的“+”字符在接收和存储时会变成“”。然后，当您输出该值时，它是无效的 base64 编码数据。

如果您检查工作示例与非工作示例的来源，您会发现空格完全存在于原始 Base64 编码值中存在“+”的位置。您看到的任何换行符都是因为您正在查看源代码的任何内容都是在 ' ' 字符处换行。

在您的 iOS 代码中，您需要正确编码 base64 编码值，在您的情况下，您真正​​需要做的就是对“+”字符进行百分比编码。

编辑添加，以回应评论：

```
post = [post stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]; 
```

# vim - vim：输入某个字符后如何格式化代码块？

> ID：14802717
> 
> 赞同：0
> 
> 时间：2013-02-10T21:20:57.730
> 
> 标签：vim, code-formatting

我想在输入特定字符后对某个代码块执行自动格式化，类似于 Visual Studio 的自动格式化。

例如，当键入了一个结束行字符时，可以格式化前一行，就像一个人正在点击`Vgq`该行一样。

实现这一目标的最简单和最有效的方法是什么？我已经考虑过使用该`InsertCharPre`事件，但实际上我需要一个`InsertCharPost`事件。不幸的是，这不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:28:16.620

如果 `format code block`您的意思是 is `gq`，您可以尝试：

```
inoremap <cr> <esc>Vgqo 
```

此映射确实：当您`Enter`在 INSERT 模式下键入时，它会自动`vgq`为您执行，并将光标放在下一行，保持 INSERT 模式。

希望这是您正在寻找的。

# java-me - Java ME - 如何获取一个月的天数

> ID：14802719
> 
> 赞同：5
> 
> 时间：2013-02-10T21:21:02.817
> 
> 标签：java-me, calendar

Java ME [java.util.Calendar](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/util/Calendar.html)类没有该`getActualMaximum()`方法：

> ...这个类是基于 JDK 1.3 Calendar 类的 J2ME 的子集。许多方法和变量已被修剪，并简化了其他方法，以减少此类的大小。

甚至可以得到一个月的天数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T23:02:25.393

在 J2ME 中，由于您没有`Calendar.getActualMaximum()`可用的，您可以尝试以下操作：使用[来自此答案的计算](https://stackoverflow.com/a/7708923/119114)，您可以计算您感兴趣的月份的第一天和第一天之间的天数下个月的。

```
 private int getDaysInMonth(int month, int year) {
      Calendar cal = Calendar.getInstance();  // or pick another time zone if necessary
      cal.set(Calendar.MONTH, month);
      cal.set(Calendar.DAY_OF_MONTH, 1);      // 1st day of month
      cal.set(Calendar.YEAR, year);
      cal.set(Calendar.HOUR, 0);
      cal.set(Calendar.MINUTE, 0);
      Date startDate = cal.getTime();

      int nextMonth = (month == Calendar.DECEMBER) ? Calendar.JANUARY : month + 1;
      cal.set(Calendar.MONTH, nextMonth);
      if (month == Calendar.DECEMBER) {
         cal.set(Calendar.YEAR, year + 1);
      }
      Date endDate = cal.getTime();

      // get the number of days by measuring the time between the first of this
      //   month, and the first of next month
      return (int)((endDate.getTime() - startDate.getTime()) / (24 * 60 * 60 * 1000));
   } 
```

请注意，此方法需要几个月作为`Calendar`常量，例如`Calendar.JANUARY`. 我认为这些的原始整数表示是 0-indexed，所以如果你通过`12`了 12 月，结果可能是错误的。我还没有测试过夏令时问题，因此您必须验证这是否足以满足您的应用程序的需求。

像这样使用上面的函数：

```
 int d = getDaysInMonth(Calendar.DECEMBER, 2012);
  d = getDaysInMonth(Calendar.FEBRUARY, 2012);
  d = getDaysInMonth(Calendar.FEBRUARY, 2013); 
```

这将产生 d =

```
31
29
28 
```

（对于美国时区）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:08:37.593

我使用下面的答案让它工作。但感谢 Nate 提供了一个工作示例。

```
public static int getMaxDaysInMonth(int month, int year){
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DATE, 1);
    cal.set(Calendar.MONTH, month+1);
    cal.set(Calendar.YEAR, year);
    cal.set(Calendar.DATE, cal.get(Calendar.DATE)-1);

    return cal.get(Calendar.DATE);
} 
```

它似乎是最短的，而且似乎工作正常。任何意见？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T21:28:21.347

使用[getActualMaximum](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getActualMaximum%28int%29)方法`Calendar`

> 在给定此日历的时间值的情况下，返回指定日历字段可以具有的最大值。例如，MONTH 字段的实际最大值在某些年份为 12，而在希伯来日历系统中其他年份为 13。

[来自 RoseIndia 的示例](http://www.roseindia.net/java/java-get-example/number-days-month.shtml)：

```
Calendar calendar = Calendar.getInstance();
int year = 2008;
int month = Calendar.FEBRUARY;
int date = 1;
calendar.set(year, month, date);
int days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
System.out.println("Number of Days: " + days); 
```

# ruby-on-rails-3 - SessionsController#create 中的 NoMethodError

> ID：14802723
> 
> 赞同：0
> 
> 时间：2013-02-10T21:21:26.747
> 
> 标签：ruby-on-rails-3, railstutorial.org, nomethoderror

我一直在关注 Michael Hartl 的教程，对于那些熟悉它的人，我正在学习第 10 课 - 更新用户。

到目前为止，我已经构建了一个允许用户注册、登录和退出的应用程序。我的应用程序允许用户注册，但在尝试登录时出现以下错误：

# SessionsController#create 中的 NoMethodError

```
undefined method `-' for nil:NilClass

Rails.root: /Users/user/Sites/rails_projects/sample_app1

app/controllers/sessions_controller.rb:11:in `create' 
```

# 要求

### 参数：

```
{"utf8"=>"✓&quot;,
"authenticity_token"=>"/SEaqnrMf5X0pd4FVWbu8uWVAjTNw4LPKiXg+8Hl0PQ=",
"session"=>{"email"=>"Anthonypane@example.com",
"password"=>"[FILTERED]"},
"commit"=>"Sign in"} 
```

这是我的 Session_Controller 内容：

```
class SessionsController < ApplicationController
def new
@title = "Sign in"
end

def create
user = User.authenticate(params[:session][:email],
                        params[:session][:password])
if user.nil?
flash.now[:error] = "Invalid email/password combination."
@title - "Sign In"
render 'new'
else
sign_in user
redirect_to user
end
end   

def destroy
 sign_out
 redirect_to root_path
end
end 
```

Users_Controller 内容

```
class UsersController < ApplicationController

def show
 @user = User.find(params[:id])
 @title = @user.name 
 end

def new
@user = User.new
@title = "Sign up"
end

def create
@user = User.new(params[:user])
if @user.save
sign_in @user
redirect_to @user, :flash =>  {:success => "Welcome to the Fun House!"}
else
@title = "Sign up"
 render 'new'
end
end
end 
```

Sessions_helper 内容

```
module SessionsHelper

 def sign_in(user)
cookies.permanent.signed[:remember_token] = [user.id, user.salt]
current_user = user
end

def current_user=(user)
@current_user = user
end

def current_user
 @current_user ||= user_from_remember_token
end

def signed_in?
 !current_user.nil? 
end

def sign_out
 cookies.delete(:remember_token)
 self.current_user = nil
end 

private

def user_from_remember_token
 User.authenticate_with_salt(*remember_token)
end

def remember_token
 cookies.signed[:remember_token] || [nil, nil]
end

end 
```

最后是 Users_helper 内容：

```
module UsersHelper
def gravatar_for(user, options = { :size => 50})
gravatar_image_tag(user.email.downcase, :alt => user.name, 
                                        :class => 'gravatar',
                                        :gravatar => options)
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:05:21.427

:-) 感谢 Taryn East 解决了问题。

```
def has_password?(submitted_password)
  encrypted_password == encrypted(submitted_password)
end 
```

应该

```
def has_password?(submitted_password)
  encrypted_password == encrypt(submitted_password)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:00:25.807

问题是，就像例外所说的那样，您的行`@title - "Sign In"`: 它应该是
`@title = "Sign In"`.

但是，我想说一个更大的问题是，为什么您现在使用 Rails 3.2[版本](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.0)的教程，而[Rails 3.2 版本](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)是最新的。绝对值得更换。

# winrt-xaml - WinRT 在页面之间传递 ViewModel

> ID：14802728
> 
> 赞同：0
> 
> 时间：2013-02-10T21:22:01.177
> 
> 标签：winrt-xaml

我有一个两页的 Windows 8 应用程序。一个视图页面和一个设置页面。两个页面使用相同的视图模型。我可以在页面之间传递视图模型以使用它，但是我无法保存状态，因为我在页面之间传递了一个复杂的类型（它与它们如何保持引用有关，并阻止你保存）。

所以我想我需要在每个页面上保存并重新加载我的视图模型？我找不到关于什么是最佳实践的良好参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:13:02.913

通常 WinRT 导航通过在 App.cs 中初始化的根框架。最好在 MainPage 中定义一个 Frame 对象并在该框架内导航所有页面。您的框架数据上下文可以绑定到 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:57:43.547

您可以使用[Frame](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame.aspx)在页面导航之间保存 ViewModel 状态。我正在编写的应用程序中有类似的情况（不同页面的视图模型相同），并且效果很好。它甚至会为您缓存页面。

我最近写了一篇关于将 Frame 与 ViewModels 结合使用的[博客](https://web.archive.org/web/20130309004944/http://thoughts.kaylynbogle.com/winrt-c-passing-parameters-to-a-viewmodel/)，但它更多的是关于设置框架交互而不是导航/缓存行为。

# regex - 寻找 DFA 的补码？

> ID：14802732
> 
> 赞同：16
> 
> 时间：2013-02-10T21:22:24.107
> 
> 标签：regex, regular-language, automata, dfa, nfa

我被要求展示 DFA 图和 RegEx 作为 RegEx 的补充`(00 + 1)*`。在上一个问题中，我必须证明 DFA 的补码是封闭的并且也是一个正则表达式，所以我知道要将 DFA M 转换为补码 M`，我只需要交换初始接受状态和最终接受状态。

但是，RegEx 的初始接受状态似乎是`{00, 1, ^}`，最终接受状态也是`{00, 1, ^}`如此。因此，交换它们只会导致完全相同的 RegEx 和 DFA，这似乎是矛盾的。

我做错了什么还是这个 RegEx 应该没有真正的补充？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-11T17:32:12.980

正如你所说：

> 我知道要将 DFA M 转换为补码 M`，我只需要交换初始接受状态和最终接受状态。

它*不是互补*的，但你正在做*类似语言的反转*，而[**常规语言在反转下是封闭的**。](http://web.cecs.pdx.edu/~hook/cs581sp11/reverse.pdf)

## DFA的逆转

**什么是反转语言？**

语言 L 的反转（表示为 L ^R）是由 L 中所有字符串的反转组成的语言。

假设 L 是某个 FA A 的 L(A)，我们可以为 L ^R构造一个自动机：

> *   反转转换图中的所有边（弧）
>     
>     
> *   L ^R自动机的接受状态是 A 的开始状态
>     
>     
> *   为新自动机创建一个新的开始状态，其中 epsilon 转换到 A 的每个接受状态

**注意**：通过反转所有箭头并交换 DFA 的初始状态和接受状态的角色，您可能会得到 NFA。
[这就是我写FA（不是DFA）的原因]

## 补充 DFA

> **寻找 DFA 的补码？**

**`Defination:`**语言的补语是根据与 Σ*（sigma 星）的集差来定义的。即 L ^(**'**) = Σ ^* - L。

L 的补语（L ^(**'**)）具有来自 Σ*（sigma 星）的所有字符串，除了 L 中的字符串。Σ* 是字母表 Σ 上的所有可能字符串。
[Σ = 语言符号集]

> 要构造接受 L 的补码的 DFA D，只需将 A 中的每个接受状态转换为 D 中的非接受状态，并将 A 中的每个非接受状态转换为 D 中的接受状态。
> （*警告！这不是真的对于 NFA 的*）

[A是L的DFA，D是补码]

**注意**：要构建补充 DFA，旧 DFA 必须是完整的，意味着每个状态都应该有所有可能的出边（或者换句话说[`δ`应该是完整的函数](https://stackoverflow.com/questions/14870130/how-does-qq-read-in-the-definition-of-a-dfa-deterministic-finite-accepto/14940382#14940382)）。

[**补充：举例参考**](http://www.cs.odu.edu/~toida/nerzic/390teched/regular/fa/complement.html)

> **正则表达式的补充 DFA`(00+1)*`**

下面是名为**A**的 DFA ：

> ![00+1](../Images/89cd43ac396662e3781c8fa2827d1b87.png)

但不是这个 DFA 不是完整的 DFA。转换函数`δ`是部分定义的，但不是针对整个域定义的`Q×Σ`（*从 q1 中丢失了 lable 的边缘`1`*）。

其完整的 DFA 可以如下（**A**）：

> ![完整的 DFA](../Images/790524a089a0bb152b850670ea742e8c.png)

在上面的 DFA 中，所有可能的交易都被定义（*for each pair of `Q,Σ`*）并且`δ`在这种情况下是一个完整的函数。

[*Reff：学习什么是偏函数。*](http://en.wikipedia.org/wiki/Partial_function)

可以通过将所有最终状态更改为非最终状态来构建新的补码 DFA **D**`q0`，反之亦然。

因此，补码`q0`成为非最终状态，并且`q1, q2`是最终状态。

> ![补充](../Images/01172fa8ec9197167aa70e182a6b378c.png)

现在您可以使用我给出 [**的 ARDEN 定理和 DFA**](http://books.google.co.in/books?id=fodwUrSC8e0C&pg=SA3-PA7&lpg=SA3-PA7&dq=arden%27s%20theorem%20for%20regular%20language&source=bl&ots=QTuxWbiATB&sig=Rf32daVHvstUV5JyExianv6A4Pw&hl=en&sa=X&ei=sSkZUb-9E8iUrgejlIEw&ved=0CCsQ6AEwBQ#v=onepage&q=arden%27s%20theorem%20for%20regular%20language&f=false)为补语编写正则表达式。

这里我直接为补码写正则表达式：

`(00 + 1)*` `0` `(^ + 1(1 + 0)*)`

哪里`^`是空符号。

*一些有用的链接*：
从[这里](http://ptucse.loremate.com/flat/node/5)和通过我的个人资料，您可以在 FA 上找到一些更有用的答案。此外，关于常规语言属性的两个很好的链接：[**一**](http://www.csee.umbc.edu/~squire/cs451_l9.html)，[**二**](http://www.stanford.edu/~stinson/paper_notes/fundamental/automata_4.txt)

# c# - Asp.Net 成员资格 CreateUser 控件中的 DuplicateEmailErrorMessage

> ID：14802736
> 
> 赞同：-1
> 
> 时间：2013-02-10T21:22:47.077
> 
> 标签：c#, asp.net, validation, asp.net-membership, createuserwizard

我想知道是否有办法在我页面上的验证摘要中显示我的 CreateUserControl.DuplicateEmailErrorMessage 文本。

我能够找到 CreateUserControl.ErrorMessageStyle 以将样式添加到我的错误消息中，但我宁愿在页面上已有的验证摘要控件中显示它。

让我知道这是否可能。

谢谢！

注意：我知道我可以对重复的电子邮件进行自己的验证，并在我的验证摘要控件中使用新的验证器显示它们，但我只是想知道是否可以执行上述操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:33:01.640

这个[链接](http://aspadvice.com/blogs/net_discoveries/archive/2011/04/13/Displaying-CreateUserWizard_1920_s-Provider-Errors-in-a-ValidationSummary.aspx?CommentPosted=true#commentmessage)帮助我解决了这个问题。

这可以通过处理 CreateUserError(object sender, CreateUserErrorEventArgs e) 事件来解决

# javascript - 调整 javascript 关闭窗口以在 3 秒后关闭？

> ID：14802738
> 
> 赞同：0
> 
> 时间：2013-02-10T21:23:04.793
> 
> 标签：javascript

有人可以帮帮我吗，我对 javascript 真的很陌生，我试图自动关闭一个 jquery 阴影框窗口。

这个脚本会关闭阴影框窗口，但它会立即关闭，有没有办法我可以通过使用超时来设置 3 秒的时间延迟？有人可以告诉我我将如何做到这一点。

谢谢

```
<script>
window.parent.Shadowbox.close();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:25:38.240

您可以通过使用来实现这一点[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

```
setTimeout(window.parent.Shadowbox.close, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:25:25.637

使用*setTimeout*函数。见：[http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:26:07.447

试试看：

```
<script>
setTimeout(function(){ window.parent.Shadowbox.close(); }, 3000);
</script> 
```

# php - 为 nginx 中的 RoR 重写 PHP 参数

> ID：14802742
> 
> 赞同：1
> 
> 时间：2013-02-10T21:23:23.477
> 
> 标签：php, ruby-on-rails, url-rewriting, nginx, routes

我有一个网站，它曾经是用 PHP 编写的，我用 Rails 重新编写了。它本质上是一个由帖子组成的博客平台。我仍然使用旧的 URL 方案收到来自 Google 的请求。他们正在呈现索引页面，但他们应该显示引用的特定帖子。例如：

[http://domain.com/posts?page=5&postID=6433](http://domain.com/posts?page=5&postID=6433)（渲染索引，第 5 页）

应该：

[http://domain.com/posts/6433](http://domain.com/posts/6433)（显示帖子 6433）

page 参数可以丢弃，它用于评论分页，不再需要。这两个参数都以 params[:page] 和 params[:postID] 的形式传递给 Rails，并转到 post 控制器中的 index 操作。我想可以在控制器中添加一些逻辑（如果 :postID 存在，则显示正确的帖子），但我认为正确的方法是使用 nginx 重写来修改 url，目前我正在使用：

```
rewrite "^/posts\?page=(.*)&postID=(.*)$" /posts/$2 break; 
```

它似乎对传递的 URL 没有任何影响。

我正在寻求帮助以制作正确的重写 URL 或 RoR 路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:28:08.743

正`?`则表达式中具有特殊含义——它指定它之前的表达式（在本例中为字母`s`）预计会出现 0 次或 1 次。

您需要`?`使用 a转义`\`：

```
rewrite "^/posts\?page=(.*)&postID=(.*)$" /posts/$2 break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T01:38:34.510

这是我解决这个问题的方法：

```
if ($arg_postID ~ "^([0-9]+)"){
  rewrite ^/(.*) /posts/$arg_postID? permanent;
} 
```

成功转身

[http://ihatethemarinecorps.com/posts?page=5&postID=8861](http://ihatethemarinecorps.com/posts?page=5&postID=8861)

进入

[http://ihatethemarinecorps.com/posts/8861](http://ihatethemarinecorps.com/posts/8861)

结果 nginx 处理参数（之后的任何内容？）与 URI 的其余部分略有不同。我也可以在重写中访问 $arg_page，但没有必要。如果您有更好的答案，请告诉我。

# .net - 为什么要从 WOW6432Node 读取值的单元测试（使用 Visual Studio 测试框架开发）？

> ID：14802744
> 
> 赞同：1
> 
> 时间：2013-02-10T21:23:33.807
> 
> 标签：.net, visual-studio, registry, mstest, wow64

我创建了基于 Visual Studio 测试框架的单元测试。

但是，它以某种方式从 WOW6432Node 读取注册表项？

我已经用“任何 CPU”平台构建了单元测试框架。

我的操作系统是 64 位的。

我以管理员身份运行 Visual Studio 2010。

我还尝试将构建配置更改为 x64，但现在测试用例无法运行（测试是否在 x64 加载我的框架正在寻找的正确注册表项时强制它）。

我收到 badimageformat 异常。

我观察到的唯一一件事是 - “警告 CS1607：程序集生成 - 引用的程序集 'mscorlib.dll' 针对不同的处理器”。

但是其他引用“system.dll - mscorlib.dll”的项目在使用 x64 conf 构建时不会发出此警告。

问候，梦想家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:41:48.860

请注意，Visual Studio 始终是 32 位进程。

此外，默认情况下，Test Runner 进程也是 32 位进程。但是，此选项是[可配置](http://msdn.microsoft.com/en-us/library/ee782531.aspx)的。

# c# - 如何在一台服务器上创建多个客户端？

> ID：14802745
> 
> 赞同：0
> 
> 时间：2013-02-10T21:23:43.063
> 
> 标签：c#, multithreading, synchronization, client-server

如何使用 is 代码创建多个客户端

程序.cs

```
class Program
{
    static void Main(string[] args)
    {
        Server.ServerCode(5656);
    } 
} 
```

客户端.cs

```
class Client
{
    public static void ClientCode()
    {
            //SOCKET CONNECTION

            //int Port = (int)port;
            Console.WriteLine("......................CLIENT.........................");

            TcpClient client = new TcpClient("127.0.01", 5656);
            NetworkStream clientStream = client.GetStream();
            StreamReader sr = new StreamReader(clientStream);
            StreamWriter sw = new StreamWriter(clientStream);
            sw.AutoFlush = true;
                //CLOSING SOCKET
                clientStream.Close();
                client.Close();
                Console.ReadLine();

    }
} 
```

我的服务器代码：

服务端.cs

```
class Server
{
    public static void ServerCode(object port)

    {

        //SOCKET CONNECTION

        int Port = (int)port;
        Console.WriteLine("................SERVER RUNNING......................");
        TcpListener listener = new TcpListener(IPAddress.Parse("127.0.0.1"), Port);
        listener.Start();
        while (true)
        {
            TcpClient serverSite = listener.AcceptTcpClient();
            if (serverSite.Connected)
            {
                Thread c = new Thread((fileTransfer));
                c.Start(serverSite);
            }
        }
    }

    public static void fileTransfer(object clients)
    {

            Console.WriteLine("new client");*/
            TcpClient server = listener.AcceptTcpClient();//(TcpClient)clients;
            NetworkStream serverStream = server.GetStream();
            StreamReader sr = new StreamReader(serverStream);
            StreamWriter sw = new StreamWriter(serverStream);
            sw.AutoFlush = true;

            //CHECKING USERNAME AND PASSWORD
            Console.WriteLine("Connecting to Client... ");
            string fromClient_u = sr.ReadLine();
            Console.WriteLine("\n  Username: " + fromClient_u);
            string fromClient_p = sr.ReadLine();
            Console.WriteLine("\n  Password: *******");
            if (fromClient_u == "Client1" && fromClient_p == "123456")
            {

                Console.WriteLine("\nClient has Successfully Loged In. ");
                sw.WriteLine("Connection Complete...  ");                       //msg1
                sw.WriteLine("Successfully Connected to the Server.");          //msg2
                sw.WriteLine("Enter Some Informations for File Transfer...");   //msg3

            }
            //CLOSING SOCKET
            serverStream.Close();
            server.Close();
            Console.ReadLine();

    }   

} 
```

它不工作。我希望第一个线程工作并结束，然后第二个线程开始。但是此代码会同时生成所有三个威胁。我的意思是，此代码将创建多个客户端，他们将等待。当第一个客户端完成与服务器的工作时，第二个客户端将获得服务器连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:31:58.357

如果不提供您的服务器代码，就很难知道那里是否也存在问题。如果有助于比较，请查看这篇关于如何[创建快速客户端和服务器应用程序的](http://www.networkcomms.net/how-to-create-a-client-server-application-in-minutes/)文章。该示例还允许任意数量的客户端，尽管它们必须作为独立进程而不是线程启动。

要一次只运行一个客户端，您可以尝试更改起始代码，如下所示：

```
 for (i = 0; i < 3; i++)
    {
        t[i].Start();
        t[i].Join();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:36:00.167

听起来很简单，如果您想锁定进程直到客户端结束然后启动下一个进程，只需循环并显式调用它：

```
for (i=0;i<3;i++)
{
    Client.ClientCode();
} 
```

# meteor - 为什么observe() 不能在服务器上同步执行？

> ID：14802746
> 
> 赞同：1
> 
> 时间：2013-02-10T21:23:55.883
> 
> 标签：meteor

当插入（更新，删除，...）到客户端上的集合时，本地观察者将同步触发，即同时在本地模拟插入的效果。这意味着后续代码可以依赖插入的所有副作用而无需竞争条件。

服务器上的行为似乎有所不同：观察者似乎是异步触发的，插入回调可能会在观察者执行之前返回。这使得正确同步代码变得更加困难：我找不到可靠的方法来判断插入的所有副作用何时发生。除了在客户端之外，当在插入操作之后直接依赖副作用时，这会产生竞争条件，并且在客户端和服务器之间共享代码变得更加困难。

这是预期的行为吗？服务器端是否有一个好的解决方法来判断所有观察者何时执行？

（我的用例：我有一个“命令”表，我需要它来撤消/重做。插入新命令将触发对本地非同步集合的更改，即命令正在从观察者内部执行。后续命令需要要完成对本地集合的更改，否则它们将失败。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:39:20.810

[我在流星谈话群](https://groups.google.com/d/msg/meteor-talk/MxrDzfi0sr8/7MMLalicCc4J)里找到了答案。相应的代码注释可以在[这里](https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/mongo_driver.js#L80)找到：

```
// After making a write (with insert, update, remove), observers are
// notified asynchronously. If you want to receive a callback once all
// of the observer notifications have landed for your write, do the
// writes inside a write fence (set Meteor._CurrentWriteFence to a new
// _WriteFence, and then set a callback on the write fence.) 
```

以防万一你想知道它在实践中的样子——这就是我所做的（在coffeescript中）：

```
Future = __meteor_bootstrap__.require('fibers/future')
...
future = new Future
fence = new Meteor._WriteFence
fence.onAllCommitted ->
  fence.retire()
  future.ret()
result = Meteor._CurrentWriteFence.withValue fence, ->
  # do something that triggers observers
  ...
  return result
fence.arm()
future.wait() # This will return only /after/ all observers fired.
... 
```

这是一个未记录的功能，不能保证长期有效。因此，如果核心团队想要描述一个正式的解决方法，我的问题仍然悬而未决。

# android - 如何在 Android 上以编程方式更改屏幕锁定声音设置

> ID：14802748
> 
> 赞同：2
> 
> 时间：2013-02-10T21:24:00.020
> 
> 标签：android, settings, screen-lock

如何在Android上以编程方式更改屏幕锁定声音设置（从设置->声音->屏幕锁定声音）复选框？

例如，如果我想更改触觉反馈设置，我会这样做：

```
Settings.System.putInt(m_context.getContentResolver(), Settings.System.HAPTIC_FEEDBACK_ENABLED, bEnable ? 1 : 0); 
```

屏幕锁定声音的定义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:45:34.577

根据Android Source code，它的常量是“LOCKSCREEN_SOUNDS_ENABLED”

[http://androidxref.com/4.2_r1/xref/packages/apps/Settings/src/com/android/settings/SoundSettings.java#301](http://androidxref.com/4.2_r1/xref/packages/apps/Settings/src/com/android/settings/SoundSettings.java#301)

# ajax - jQuery 函数停止使用 ajax 处理页面加载

> ID：14802765
> 
> 赞同：0
> 
> 时间：2013-02-10T21:25:56.660
> 
> 标签：ajax, jquery

这是我第一次尝试使用 ajax 加载页面。

这在几页上都可以正常工作，但是有些页面带有幻灯片或其他 jquery 函数，脚本停止工作，我看到一些关于我需要再次调用函数的内容，但我不知道我的代码在哪里是正确的地方，比如我需要在加载页面上调用。

有我的 javascript 代码

```
$(document).ready(function(){ 
preload([
'/img/bg_body_topo.jpg',
'/img/img_topo.png',
'/img/logo_topo.png'
]);  

 $("a[rel*=outside]").attr( "target", "_blank" );
 $('#scrollbar').tinyscrollbar({ sizethumb: 55 });
 $('#menu-topo ul li ul').hide();
 $('#menu-topo ul li').hover(function(e) {
 $(this).find('ul').stop().fadeToggle("fast");
 });

 $("#home-slide-destaques").scrollable({ circular: true }).autoscroll({ autoplay: true     }).navigator(".controles");         
  // DISCOGRAFIA
  $("ul#int-abas-discografia").tabs("div#int-conteudo-discografia > div", { effect: 'fade' });
  // INTEGRANTES
  $("ul#int-abas-integrantes").tabs("div#int-conteudo-integrantes > div", { effect: 'fade' });

 var content = $('#content');  
 //pre carregando o gif  
    loading = new Image(); loading.src = '/img/103.gif';  
    $('#menu-topo a, a#menu-ajax').live('click', function( e ){  
        e.preventDefault();  

                var tHeight = $('#wrapper').height();
                var tWidth = $('#wrapper').width();
                var posicao = $('#wrapper').position();

                $('#carregando').remove();
                $('#imgcarregando').remove();

                $('#wrapper').prepend('<div id="carregando"></div>   <div id="imgcarregando"> <img src="/img/103.gif" style="margin:280px 0 0 0;" alt="Carregando"/></div>');

                $('#carregando').css({
                    'position': 'absolute',
                    'width': tWidth,
                    'height': tHeight,
                    'top': posicao.top,
                    'left': posicao.left,
                    'background': '#000',
                    'opacity': '.60',
                    'z-index': '9900',
                    'text-align': 'center'
                });

                $('#imgcarregando').css({
                    'position': 'absolute',
                    'width': tWidth,
                    'height': tHeight,
                    'top': posicao.top,
                    'left': posicao.left,
                    'background': '#000 url(/img/logo_topo.png) center 200px no-repeat',
                    'padding': '30px 0 0 0 ',
                    'opacity': '.88',
                    'z-index': '9999',
                    'text-align': 'center'
                });

                    content.html( '' );  

        var href = $( this ).attr('href');  
        $.ajax({  
            url: href,  
            success: function( response ){  
                //forçando o parser  
             var data = $( '<div>'+response+'</div>' ).find('#content').html();  

                //apenas atrasando a troca, para mostrarmos o loading  
                window.setTimeout( function(){  
                    content.fadeOut('slow', function(){  

                         $('#carregando').fadeOut('slow');
                         $('#imgcarregando').fadeOut('slow');
                         $('#content').height('auto');
                            // DESTAQUES

                         content.html( data ).fadeIn(); 

                    });  
                }, 1000 );  
            }  
        });  

    });                        

});  

     function preload(arrayOfImages) {
     $(arrayOfImages).each(function(){
    $('<img/>')[0].src = this;
    // Alternatively you could use:
    // (new Image()).src = this;
     });
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:43:19.950

我认为您正在尝试在新的 ajax 页面中加载旧的常用 html 页面。当您加载新内容时，您不会像以前那样加载它的脚本，您也需要加载它们。您可以尝试自己执行此操作，通过 ajax 在新标签中插入适当的脚本，或者只是在开始时为所有内容加载所有适当的脚本，或者我建议您在需要时使用 require.js 之类的库加载它们，已经针对它进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:40:00.813

几天前有一个类似的问题并设法用[ajaxComplete](http://api.jquery.com/ajaxComplete/)解决它，每次ajax加载完成时都会执行

做了类似的事情：

```
var rebindButtons = function(){
   $(elements).unbind('click').click(function(){
       // rebinding of button functionality
   });
}
$(document).ready(function(){
  // we bind the buttons for the first time
  rebindButtons();
  // and when there's an ajax call completed we rebind the buttons
  $(document).ajaxComplete(function() {
    rebindButtons();
  });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:54:15.730

我不知道这是否是正确的方法，但我做了一些改变，现在 99% 的工作..

我有钱

```
$(document).ready(function(){  

// to

$(function(){ 
```

我也用javascript函数做了这个

```
function boxWallpapers(){

$("#home-slide-destaques").scrollable({ circular: true }).autoscroll({ autoplay: true }).navigator(".controles");          

     // DISCOGRAFIA
$("ul#int-abas-discografia").tabs("div#int-conteudo-discografia > div", { effect: 'fade' });

   // INTEGRANTES
$("ul#int-abas-integrantes").tabs("div#int-conteudo-integrantes > div", { effect: 'fade' });

$('#menu-topo ul li ul').hide();
$('#menu-topo ul li').hover(function(e) {
    $(this).find('ul').stop().fadeToggle("fast");
});

  } 
```

然后在ajax上

```
 $.ajax({  
            url: href,  
            success: function( response ){  
                //forçando o parser  

             var data = $('<div>'+response+'</div>').find('#content').html();  

                //apenas atrasando a troca, para mostrarmos o loading  
                window.setTimeout( function(){  
                    content.fadeOut('slow', function(){  

                         $('#carregando').fadeOut('slow');
                         $('#imgcarregando').fadeOut('slow');
                         $('#content').height('auto');

                         content.html( data ).fadeIn(); 
                         boxWallpapers();  // HERE HERE

                    });  
                }, 1000 ); 
```

# java - 通过 ByteBuffer 传输字符串

> ID：14802769
> 
> 赞同：1
> 
> 时间：2013-02-10T21:26:11.607
> 
> 标签：java, sockets, bytebuffer

我需要通过字节缓冲区传输 2 个整数和一个字符串。然后通过 bytebuffer 接收另一个字符串。

一定有这样的：从keyboard.Enter中读取x(int)。从键盘读取 y (int)。回车。从键盘读取字符串。进入。所有的值都在某个地方，正在处理中，我必须接收字符串。一切都是通过套接字通道完成的。

我做了这样的事情：发送

```
Scanner scanner=new Scanner(System.in);
int m,n;
String str,result;
System.out.println("x=");
m=scanner.nextInt();
System.out.println("y=");
n=scanner.nextInt();
System.out.println("String: ");
str=scanner.next();

ByteBuffer bb=ByteBuffer.allocate(100);

bb.putInt(0,m).putInt(8,n).put(str.getBytes()); // problem?

try{

  sc.write(bb);
  bb.clear();
  sc.read(bb);

  CharBuffer cbuf = bb.asCharBuffer();
  result=cbuf.toString();

  System.out.println("Result : "+result); 
```

收到：

```
 ByteBuffer bb = ByteBuffer.allocate(100);    
  socketChannel.read(bb);
  int m=bb.getInt(0);
  int n=bb.getInt(8);
  String str=bb.toString().substring(16);

  App app=new App();
  String result=app.longestRepeatingSubstring(str,m,n);
  bb.clear();

  bb.put(result.getBytes());

  socketChannel.write(bb);
  socketChannel.close(); 
```

但我收到一个空字符串...

或者，如果我直接输入 bb.toString()，我会收到如下信息： java.nio.HeapByteBuffer[pos=237 lim=258 cap=798]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:14:07.220

```
bb.putInt(0,m).putInt(8,n).put(str.getBytes()); // problem? 
```

是的，问题`put(str.getBytes())`取决于先前设置的缓冲区中的位置，但因为您使用的是 offset putInt 函数，所以它不会。

```
bb.putInt(0,m).putInt(8,n).position(16).put(str.getBytes()).position(0); 
```

此行不适用于您的客户端`ByteBuffer.toString()`返回缓冲区状态而不是内容，

代替

```
String str=bb.toString().substring(16); 
```

你要

```
byte[] b = new byte[length];
bb.position(16);
bb.get(b);
String str=new String(b); 
```

# javascript - 整个对象的自定义吸气剂，而不仅仅是属性？

> ID：14802773
> 
> 赞同：1
> 
> 时间：2013-02-10T21:27:28.397
> 
> 标签：javascript, oop, constructor, setter, getter

我可以`get`用于单个属性，如下所示：

```
function MyObjectConstructor() {
    this._internalValueOne = 'foo';
    this._internalValueTwo = 'bar';
}

MyObjectConstructor.prototype = {
    get usefulValueOne() {
        return this._internalValueOne + 'baz';
    },
    get usefulValueTwo() {
        return this._internalValueTwo + 'baz';
    }
}

var myObject = new MyObjectConstructor(); 
```

现在`myObject.usefulValueOne`给`'foobaz'`和`myObject.usefulValueTwo`给`'barbaz'`。我可以以某种方式`get`确保`myObject`（以及任何其他基于`MyObjectConstructor`的对象）也返回类似的对象`{usefulValueOne: 'foobaz', usefulValueTwo: 'barbaz'}`吗？还是有其他首选方法可以做到这一点？

当然，我也想知道同样的事情`set`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:37:43.183

你可以使用这个：

```
function MyObjectConstructor() {
    this._internalValueOne = 'foo';
    this._internalValueTwo = 'bar';
}

MyObjectConstructor.prototype = {
    get usefulValueOne() {
        return this._internalValueOne + 'baz';
    },
    get usefulValueTwo() {
        return this._internalValueTwo + 'baz';
    },
    get showProt(){
        var B = {};
        for (var i in this){
            if (i.hasOwnProperty && (i !== 'showProt')){
                B[i] = this[i];
           }
        }
        return B;
    }
}
var myObject = new MyObjectConstructor(); 
```

现在 myObject.showProp 将向您显示具有所有属性的对象（包括私有，您应该删除它们）

# javascript - 在javascript中选择控制选项变量替换

> ID：14802774
> 
> 赞同：-1
> 
> 时间：2013-02-10T21:27:28.100
> 
> 标签：javascript, html

如何用 javascript 中的变量替换以下 select 标记中的字符串。这就是我所拥有的。

```
<select id="requestItemStatus" name="select-choice-1" id="select-choice-custom" data-native-menu="false">
    <option value="Open">Open</option>                                      
</select>

javascript

'<option value='G_requestsStatus_returnset[0].ItemRequestedStatusID'>'G_requestsStatus_returnset[0].Name'</option>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:16:10.380

我想你的意思是这样的？

```
<select id="requestItemStatus" name="select-choice-1" id="select-choice-custom" data-native-menu="false">
    <option id="foo" value="Open">Open</option>                                      
</select>

<script type="text/javascript">

document.getElementById("foo").text = "Close";

</script> 
```

这会将您的选项更改为“关闭”或“”中的任何内容，因此您现在要做的就是将该行插入您希望调用它的位置

# javascript - 在javascript中创建简单的表

> ID：14802779
> 
> 赞同：1
> 
> 时间：2013-02-10T21:28:08.400
> 
> 标签：javascript

我只是想创建一个简单的 javascript 函数来输出一个小表，但似乎无法让它工作。

```
<html>
<head>
    <meta charset ="utf-8">
    <title>Test Table</title>
    <script type = text/javascript>

        function drawTable()
        {
            var tableDiv = document.getElementById( "numbersTable" );

            tableDiv.innerHTML = "<table>" + 
            "<caption>Numbers Table</caption>" +
            "<thead><th>Number</th><th>Square</th><th>Cube</th></thead>" +
            "<tbody><tr><td>1</td><td>2</td><td>3</td></tr>" +
            "</tbody></table>";
        }

    </script>
</head>
<body>
<div id = "numbersTable"></div>
</body> 
```

谁能看出问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:31:16.247

1.  你不打电话`drawTable()`
2.  记得在之后调用它`<div id="numbersTable"></div>`

# ruby-on-rails - 将 Axlsx 保存到 Dropbox

> ID：14802782
> 
> 赞同：0
> 
> 时间：2013-02-10T21:28:11.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, axlsx

我想使用 Rails 和 randym / axlsx 将 Excel 文件保存到保管箱。

我可以创建一个 Axlsx::Package 对象，我什至可以将它序列化，所以将它保存到我在开发环境中的磁盘中。

但我想使用 futuresimple/dropbox-api 将它上传到 Dropbox。

它能有多难？

```
 def save_in_dropbox(project)
    Dropbox::API::Config.app_key    = ENV['DROPBOX_APP_KEY']
    Dropbox::API::Config.app_secret = ENV['DROPBOX_APP_SECRET']
    Dropbox::API::Config.mode = ENV['DROPBOX_ACCESS_TYPE']

    dropbox_client = Dropbox::API::Client.new(:token  => ENV['DROPBOX_CLIENT_TOKEN'], :secret => ENV['DROPBOX_CLIENT_SECRET'])
    logger.info "#{dropbox_client.account}"

    # create Excel file
    p = Axlsx::Package.new
    p.workbook.add_worksheet(:name => "Basic Worksheet") do |sheet|
      sheet.add_row ["First Column", "Second", "Third"]
      sheet.add_row [1, 2, 3]
    end
    p.use_shared_strings = true

    # Next line causes Error: undefined method `length' for true:TrueClass
    # because  p.serialize('file.xlsx')) is true
    # but I don't want to save to my disk, on heroku I couldn't
    # I want to save to my dropbox
    dropbox_client.upload("#{ENV['DROPBOX_ROOT_PATH']}/file.xlsx", p.serialize('file.xlsx')) 

    #p.serialize('c:\file.xlsx') # that saves it to my development env disk :-(

    #uploaded_file = dropbox_client.upload "#{ENV['DROPBOX_ROOT_PATH']}/file.txt", "#{1.second.ago.to_s}\n\r#{project.title}" # Upload to Dropbox works fine

  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:24:08.250

在这种情况下，我建议您使用 Package#to_stream。它将为您提供 IO 对象，然后您可以将其读入上传调用。

另一种方法是使用 Package#serialize 将其写入磁盘，然后从文件系统中读取。

我不熟悉 dropbox_client，但如果它没有正确处理 IO 流，我会感到惊讶。

最好的

-随机的

# .net - 通过进程 ID 获取进程的 CPU 使用率

> ID：14802787
> 
> 赞同：2
> 
> 时间：2013-02-10T21:28:43.223
> 
> 标签：.net, vb.net, cpu, cpu-usage, pid

我有一个进程 ID，我需要获取进程的 CPU 使用率，即***% Processor Time***。

例如，这里有一个简单的函数来返回 AppName 的 CPU 使用情况：

```
Private Function Get_CPU_Usage(AppName as String)
   Dim AppCPU As New PerformanceCounter("Process", "% Processor Time", AppName, True)
   Return AppCPU.NextValue
End Function 
```

这可能是错误的，但这只是一个例子。

我需要做这样的事情：

```
Private Function Get_CPU_Usage(ProcessID as Integer)
   Dim AppCPU As New PerformanceCounter("Process", "% Processor Time", ProcessID, True)
   Return AppCPU.NextValue
End Function 
```

注意 ProcessID 与 AppName。我有多个使用相同名称运行的进程；每个应用程序的 PID 都存储在我的程序中。我知道我可以遍历...

```
PerformanceCounter("Process", "ID Process", AppName, True) 
```

查找进程名称，如app、app#1、app#2，但似乎效率低下且草率。

这里推荐的程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:08:50.723

感谢[Hans Passant以 C# 形式提供答案的链接，这是](https://stackoverflow.com/users/17034/hans-passant "汉斯·帕桑特")[由 Process I 而不是 name 从 Performance Counter](https://stackoverflow.com/questions/9115436/performance-counter-by-process-id-instead-of-name "按进程 ID 而不是名称的性能计数器")转换而来的 VB.net 函数：

```
Public Shared Function GetProcessInstanceName(ByVal PID As Integer) As String
    Dim cat As New PerformanceCounterCategory("Process")
    Dim instances() = cat.GetInstanceNames()
    For Each instance In instances
        Using cnt As PerformanceCounter = New PerformanceCounter("Process", "ID Process", instance, True)
            Dim val As Integer = CType(cnt.RawValue, Int32)
            If val = PID Then
                Return instance
            End If
        End Using
    Next
End Function 
```

# javascript - 在 IE 和 firefox 中运行 $.ajax 的问题

> ID：14802789
> 
> 赞同：0
> 
> 时间：2013-02-10T21:28:56.480
> 
> 标签：javascript, jquery, jquery-ui, internet-explorer, jquery-ui-dialog

嘿伙计们，我正在使用 chrome 并使用 JQuery UI 开发了一个开窗器，它运行良好。在 IE 和 Firefox 中，我注意到它不起作用，我在 IE 中进行了调试，它说

```
 `SCRIPT1028: Expected identifier, string or number`

function sendUserfNotes()
    {

        $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/popups/getNotes.php',
        data:
        {
            'nameNotes': notes_name.text(),

        },<!-- gave me the error right here?

        success: function(response) {
            $('#notes_msg').text(response.the_notes);
        }
    }); 
```

不知道为什么，但这是我的脚本：

```
$(document).ready(function () { // this right here will wait to see if the 'access notes is clicked, if so then it will get te value of username and send it to run()
    $(".NotesAccessor").click(function () {
        notes_name = $(this).parent().parent().find(".user_table");

      run();
    });

    });
function run(){ // defines the place to get the notes, goes to showURL...() to open the JQuery dialog and than senduse....() to display them in the dialog.  
    var url = '/pcg/popups/grabnotes.php';

    showUrlInDialog(url);
    sendUserfNotes();

}
    function showUrlInDialog(url)
    {
      var tag = $("#dialog-container");
      $.ajax({
        url: url,
        success: function(data) {
          tag.html(data).dialog
          ({
              width: '100%',
                modal: true
          }).dialog('open');
        }
      });
    }
    function sendUserfNotes()
    {

        $.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/popups/getNotes.php',
        data:
        {
            'nameNotes': notes_name.text(),

        },
        success: function(response) {
            $('#notes_msg').text(response.the_notes);
        }
    });

    }
    function getNewnotes(){
        new_notes = $('#notes_msg').val();
        update(new_notes);  
    }
    // if user updates notes
    function update(new_notes)
    {

            $.ajax({
        type: "POST",
        //dataType: "json",
        url: '/pcg/popups/updateNotes.php',
        data:
        {
            'nameNotes': notes_name.text(),
            'newNotes': new_notes,  
        },
        success: function(response) {
            alert("Notes Updated.");
            var i;
             $("#dialog-container").effect( 'fade', 500 );

            i = setInterval(function(){
             $("#dialog-container").dialog( 'close' );
            clearInterval(i);
            }, 500);

            }
    });

    }
    /******is user closes notes ******/
    function closeNotes()
    {
        var i;
         $("#dialog-container").effect( 'fade', 500 );

        i = setInterval(function(){
         $("#dialog-container").dialog( 'close' );
        clearInterval(i);
        }, 500);

    } 
```

如果您能帮帮我，我将不胜感激:) 不确定出了什么问题以及为什么它只能在 Chrome 中工作？如果你需要帮助，请告诉我。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:55:20.587

`data: { 'nameNotes': notes_name.text(), },`

这是一个奇怪的问题，但在`text()`. 那应该有帮助。

# cookies - 通过 Nginx 为响应设置 secure_cookie

> ID：14802793
> 
> 赞同：2
> 
> 时间：2013-02-10T21:30:09.117
> 
> 标签：cookies, nginx, tornado

我有一个在 Nginx 后面运行的 Tornado 实例，当 GET 请求首先命中 Nginx 时，它会使用以下命令将请求定向到 Tornado 中的处理程序：

```
proxy_pass              http://127.0.0.1:8080;
proxy_redirect          off; 
```

然后在 Tornado 的相应处理程序中：

```
class MyHandler(tornado.web.RequestHandler):

    def get(self, collection, item):
        tag = self.get_argument('tag')
        self.set_secure_cookie('tag', tag, expires_days=None, httponly=True, secure=True)
        self.set_header('X-Accel-Redirect', ''.join(('/blah/blah/', collection, '/', item, '/tag.html')))
        self.finish() 
```

这基本上将请求重定向回 Nginx 并要求它提供静态 html 页面。但是，如上所示，我想在重定向之前设置一个安全的cookie。这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:02:21.030

在 tornado.web 中设置安全 cookie 的方式不同。在内部，它只是`set_cookie`使用加密值调用。

```
def set_secure_cookie(self, name, value, expires_days=30, **kwargs):
    self.set_cookie(name, self.create_signed_value(name, value),
                    expires_days=expires_days, **kwargs) 
```

根据[nginx 文档](http://wiki.nginx.org/XSendfile)，当使用 XSendfile/X-Accel 时，nginx 只会将 Set-Cookie HTTP 标头转发到浏览器。

# javascript - 如何将所有脚本延迟指定的持续时间？

> ID：14802797
> 
> 赞同：0
> 
> 时间：2013-02-10T21:30:34.733
> 
> 标签：javascript, delay, wait

我正在开发一个严格基于 javascript 的游戏。我想要的是定期将某些信息位打印到屏幕上。够容易吗？是的......但问题是我只想延迟一些文本如何打印到屏幕上（将文本添加到 div 的 innherHTML）。

我知道 setInterval 和 setTimeout 方法，但这些方法的问题在于，它只会延迟调用某个函数所需的时间，而脚本的其余部分会继续运行。我想要的是让一切都暂停，直到经过一定的持续时间才允许 javascript 前进。

我可以想到一个解决方法——而不是直接写入 innerHTML 属性，而是写入字符串队列，然后如果队列中有任何内容等待，则使用 setInterval 方法显示一行文本。不难做到，但我想知道 Javascript 是否有任何类型的 pause-all 命令可以做同样的事情。现在我避免使用 jQuery。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:35:16.870

不，没有这样的事情。Javascript 是异步的，你不能停止其他“线程”。你可以做的是有一些全局变量或主程序类方法来停止游戏进程。
简单的可暂停游戏类：

```
function Game() {
    var run = true;
    this.pause = function() {
        run = false;
    }
    this.go = function() {
        if(run)
          return false;
        run = true;
        heartbeat();
    }
    function heartbeat() {
       /*Do game rendering or whatever you want to pause*/

       if(run)
         setTimeout(heartbeat, 100);  //tick
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:48:42.093

您可以使用以下内容“冻结”页面本身：

```
var start = new Date().getTime(), delay = 5000; // milliseconds
while(new Date().getTime() < start+delay) {} 
```

However this will freeze the entire browser too and usually results in a crashed browser, a "Not Responding" box from Windows, or a "this script is taking a long time to run, kill it?" question.

The "proper" way to do it would be to have a "isPaused" boolean that you can flip on or off, and if it's off then functions try to run themselves again. Something like this:

```
function pauseCheck(thisobj,argobj) {
    if( isPaused) {
        setTimeout(function() {argobj.callee.apply(thisobj,Array.prototype.slice(argobj,0));},250);
        return false;
    }
    return true;
} 
```

Then in your other functions:

```
function doSomething(x,y) {
    if( pauseCheck(this,arguments)) {
        // function body here
    }
} 
```

# html - 我可以在输入接受属性中安全地使用扩展名列表（不是 mimetypes）吗

> ID：14802801
> 
> 赞同：2
> 
> 时间：2013-02-10T21:30:53.567
> 
> 标签：html, file-upload

因此，我想将用户上传选项限制为特定文件扩展名列表。这纯粹是为了让用户更容易，我也已经限制了服务器上的文件类型上传。

我有一个扩展列表，但没有 mime 类型列表。由于接受的扩展可能会发生变化，而且我没有看到任何完全可靠的方法来动态计算它们的 mime 类型（并且宁愿避免这种情况）；我想只是将扩展提供给`<input type="file">`元素的“接受”属性。

我注意到这在 Chrome 上完全符合预期，但在 FF 或 IE10 中却没有（在这些浏览器中，它似乎只是回退到所有文件）。

我意识到这不是标准的一部分，但有什么方法可以在“接受”属性中接受扩展而不是 mimetypes，这是（现代浏览器）跨浏览器友好的。我的测试用例使用`<input type="file" accept=".doc,.docx,.bad" />`

如果这是不可能的，最好的方法是什么？注意：我没有保证我的服务器注册表将包含我使用的扩展的所有 mimetypes，并且由于此列表可能很长，因此手动更新 mimetypes 列表是相当不切实际的（并且将是我的最后手段） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T06:48:09.510

不，这不安全。[HTML 4.01`accept`](http://www.w3.org/TR/REC-html40/interact/forms.html#adef-accept)属性被定义为以逗号分隔的媒体类型列表。甚至这也是最近才实现的（例如，在 IE 9 中不支持）。

在 HTML5 草案中，该属性（最近）也被扩展为允许扩展，HTML5 CR 对[文件输入](http://www.w3.org/TR/html5/forms.html#file-upload-state-%28type=file%29)的描述甚至建议：“鼓励作者在查找数据时指定任何 MIME 类型和任何相应的扩展名具体格式。” 然而，这还没有被广泛实施。

它在概念上也很混乱。媒体类型的设计旨在成为指定文件和其他数据类型的标准化和互操作方式。文件扩展名只是在某些系统中以特殊方式处理的文件名的一部分，没有标准，超出了一些不太一致的常见做法。将两者混为一谈会带来麻烦，尽管这背后有一些务实的原因。

无论如何，在文件输入中，文件扩展名和媒体类型之间的映射是由*浏览器*连同*用户*计算机的底层操作系统和文件系统一起完成的；服务器不参与。

使用[File API](http://www.w3.org/TR/FileAPI/)，您可以在支持它的浏览器（例如 Firefox）上检查所选文件的文件名并获取文件扩展名并通知用户是否选择了文件) 将不被接受。但这会在选择*之后*发生，不会影响文件选择小部件，您只能要求用户更改选择。

# ios - 保存加载文本文件ios

> ID：14802806
> 
> 赞同：0
> 
> 时间：2013-02-10T21:31:22.020
> 
> 标签：ios, cocoa-touch

我想保存一些历史记录并将其加载到文本文件中

我使用此代码

```
 - (void) saveHistory {

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];

        [resultWindow.text writeToFile:filePath atomically:TRUE encoding:NSUTF8StringEncoding error:NULL];  

    }

    - (void) loadHistory {

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];
    if (resultWindow.text == nil) {

        resultText = @"";
        resultWindow.text = resultText;
    }
        resultWindow.text = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];

    } 
```

文件保存好！但是当我加载`resultWindow.text`为空时（0x00000000）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:19:44.720

这是其中一种情况，其中进行一些简单的错误检查可能会真正帮助您。我在这里展示的内容可能有点过多，但与此同时，错误检查几乎*总是*可以帮助程序员获得更好的性能。

```
- (void) saveHistory {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];

    if(resultWindow)
    {
        if(filePath)
        {
            NSError * error = NULL;
            BOOL success = [resultWindow.text writeToFile:filePath atomically:TRUE encoding:NSUTF8StringEncoding error:&error];
            if(success == NO)
            {
                // success would be NO if the file did *not* get successfully written out
                NSLog( @"error in writing file to %@ - %@", filePath, [error localizedDescription]);
            }
        } else {
            NSLog( @"filePath is mysteriously null");
        }
    } else {
        NSLog( @"why is resultWindow null during saveHistory??");
    }
}

- (void) loadHistory {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];

    if(resultWindow)
    {
        if(filePath)
        {
            NSError * error = NULL;
            resultWindow.text = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&error];
            if(resultWindow.text == NULL)
            {
                NSLog( @"error in reading file from %@ - %@", filePath, [error localizedDescription]);)
            }
        } else {
            NSLog( @"filePath is mysteriously null");
        }
    } else {
        NSLog( @"why is resultWindow null during loadHistory??");
    }
} 
```

# linux - 比较文件的日期 bash

> ID：14802807
> 
> 赞同：47
> 
> 时间：2013-02-10T21:31:27.137
> 
> 标签：linux, bash, centos

我正在开发一个类似 Dropbox 的小型 bash 脚本，如何在不使用**rsync** 的情况下比较 2 个文件的日期并用新文件替换旧文件有没有简单的方法来处理这个？**SHA1**可以帮助我了解更新吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-02-10T21:35:27.200

`test`您可以使用`-nt`(newer than) 和`-ot`(older than) 运算符比较文件修改时间：

```
if [ "$file1" -ot "$file2" ]; then
    cp -f "$file2" "$file1"
fi 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-29T20:16:25.207

这是一个POSIX解决方案：

```
find -name file2 -newer file1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-22T13:35:21.983

或者更短更好看，看看`man stat`：

```
stat -c %y file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T21:35:25.320

怎么样

```
 stat file|awk -F': ' '/Modify: /{print $2}' 
```

# visual-studio-2010 - 创建非托管 C++ 项目

> ID：14802809
> 
> 赞同：0
> 
> 时间：2013-02-10T21:31:52.147
> 
> 标签：visual-studio-2010, unmanaged

找不到如何在 MS Visual Studio 2010 中创建非托管 Visual C++ 项目的方法。我选择 Visual C++ -> CLR -> Windows Form Applications。如果它已经是非托管的，要访问文本框，我需要输入 textBox->Text，但这是托管的特性，未管理的使用 textBox.Text 代替

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:46:31.303

没有非托管的 Windows 窗体项目类型。Windows 窗体是 .NET 框架的一部分。

如果您想要使用非托管 C++ 创建 UI 的应用程序，请选择一种 MFC 项目类型。

# html - Twitter引导网格加起来> 100％？

> ID：14802810
> 
> 赞同：1
> 
> 时间：2013-02-10T21:31:52.997
> 
> 标签：html, css, twitter-bootstrap, grid-layout

我正在使用 twitter 引导网格。

我正在尝试使用：

```
<div id="footer-groups" class="row-fluid collapse in">
    <div class="span3">
        Users
    </div>
    <div class="span3">
        Clients
    </div>
    <div class="span3">
        Projects
    </div>
    <div class="span3">
        Tasks
    </div>
</div> 
```

但由于某种原因，宽度 + 左边距加起来`101.309328969%`

我使用的是较少版本的 bootstrap 2.2.2（因为 2.3 不能通过 lessphp 编译！）。

奇怪的是，这只发生在我有一个文件（custom.less）的情况下

其中包含：

```
@import "bootstrap.less"
@import "responsive.less" 
```

如果我分别包括这两个，那么它工作正常。

我正在使用很棒的字体。

我确实有一个 bootswatch 主题正在使用，但据我所知它并没有修改网格，它使用这两个文件

variables.less (diff) 差异变量.less variables.default.less

```
1c1
< // Cerulean 2.3.0
---
> //
6c6
< // GLOBAL VALUES
---
> // Global values
17c17
< @grayLighter:           #F5F5F5;
---
> @grayLighter:           #eee;
23,30c23,30
< @blue:                  #2FA4E7;
< @blueDark:              #033C73;
< @green:                 #73A839;
< @red:                   #C71C22;
< @yellow:                #F7B42C;
< @orange:                #DD5600;
< @pink:                  #F49AC1;
< @purple:                #9760B3;
---
> @blue:                  #049cdb;
> @blueDark:              #0064cd;
> @green:                 #46a546;
> @red:                   #9d261d;
> @yellow:                #ffc40d;
> @orange:                #f89406;
> @pink:                  #c3325f;
> @purple:                #7a43b6;
36c36
< @textColor:             @gray;
---
> @textColor:             @grayDark;
41c41
< @linkColor:             @blue;
---
> @linkColor:             #08c;
49c49
< @monoFontFamily:        Menlo, Monaco, Consolas, "Courier New", monospace;
---
> @monoFontFamily:        Monaco, Menlo, Consolas, "Courier New", monospace;
54c54
< @altFontFamily:         @monoFontFamily;
---
> @altFontFamily:         @serifFontFamily;
56c56
< @headingsFontFamily:    'Telex', sans-serif; // empty to use BS default, @baseFontFamily
---
> @headingsFontFamily:    inherit; // empty to use BS default, @baseFontFamily
58c58
< @headingsColor:         #317EAC; // empty to use BS default, @textColor
---
> @headingsColor:         inherit; // empty to use BS default, @textColor
71c71
< @paddingMini:           0px 6px;   // 22px
---
> @paddingMini:           0 6px;   // 22px
82c82
< @tableBackgroundHover:              #e6e6e6; // for hover
---
> @tableBackgroundHover:              #f5f5f5; // for hover
89c89
< @btnBorder:                         darken(@white, 20%);
---
> @btnBorder:                         #bbb;
92c92
< @btnPrimaryBackgroundHighlight:     spin(@btnPrimaryBackground, 15%);
---
> @btnPrimaryBackgroundHighlight:     spin(@btnPrimaryBackground, 20%);
94c94
< @btnInfoBackground:                 @purple;
---
> @btnInfoBackground:                 #5bc0de;
97c97
< @btnSuccessBackground:              @green;
---
> @btnSuccessBackground:              #62c462;
100c100
< @btnWarningBackground:              @orange;
---
> @btnWarningBackground:              lighten(@orange, 15%);
103c103
< @btnDangerBackground:               @red;
---
> @btnDangerBackground:               #ee5f5b;
106c106
< @btnInverseBackground:              @blueDark;
---
> @btnInverseBackground:              #444;
146c146
< @zindexTooltip:           1020;
---
> @zindexTooltip:           1030;
183,193c183,193
< @navbarHeight:                    50px;
< @navbarBackgroundHighlight:       lighten(@navbarBackground, 8%);
< @navbarBackground:                @blue;
< @navbarBorder:                    darken(@navbarBackground, 8%);
< 
< @navbarText:                      @grayLighter;
< @navbarLinkColor:                 @white;
< @navbarLinkColorHover:            @white;
< @navbarLinkColorActive:           @navbarLinkColorHover;
< @navbarLinkBackgroundHover:       darken(@navbarBackground, 12%);
< @navbarLinkBackgroundActive:      darken(@navbarBackground, 12%);
---
> @navbarHeight:                    40px;
> @navbarBackgroundHighlight:       #ffffff;
> @navbarBackground:                darken(@navbarBackgroundHighlight, 5%);
> @navbarBorder:                    darken(@navbarBackground, 12%);
> 
> @navbarText:                      #777;
> @navbarLinkColor:                 #777;
> @navbarLinkColorHover:            @grayDark;
> @navbarLinkColorActive:           @gray;
> @navbarLinkBackgroundHover:       transparent;
> @navbarLinkBackgroundActive:      darken(@navbarBackground, 5%);
198,200c198,200
< @navbarInverseBackground:                @blueDark;
< @navbarInverseBackgroundHighlight:       lighten(@navbarInverseBackground, 5%);
< @navbarInverseBorder:                    darken(@navbarInverseBackground, 3%);
---
> @navbarInverseBackground:                #111111;
> @navbarInverseBackgroundHighlight:       #222222;
> @navbarInverseBorder:                    #252525;
202,203c202,203
< @navbarInverseText:                      @white;
< @navbarInverseLinkColor:                 @white;
---
> @navbarInverseText:                      @grayLight;
> @navbarInverseLinkColor:                 @grayLight;
205,207c205,207
< @navbarInverseLinkColorActive:           @white;
< @navbarInverseLinkBackgroundHover:       darken(@navbarInverseBackground, 6%);
< @navbarInverseLinkBackgroundActive:      darken(@navbarInverseBackground, 6%);
---
> @navbarInverseLinkColorActive:           @navbarInverseLinkColorHover;
> @navbarInverseLinkBackgroundHover:       transparent;
> @navbarInverseLinkBackgroundActive:      @navbarInverseBackground;
209c209
< @navbarInverseSearchBackground:          @white;
---
> @navbarInverseSearchBackground:          lighten(@navbarInverseBackground, 25%);
212c212
< @navbarInverseSearchPlaceholderColor:    @grayLight;
---
> @navbarInverseSearchPlaceholderColor:    #ccc;
233,234c233,234
< @warningText:             @orange;
< @warningBackground:       #F1CEAB;
---
> @warningText:             #c09853;
> @warningBackground:       #fcf8e3;
237,238c237,238
< @errorText:               darken(#C45559, 5%);
< @errorBackground:         #F2BDB1;
---
> @errorText:               #b94a48;
> @errorBackground:         #f2dede;
241,242c241,242
< @successText:             darken(@green, 5%);
< @successBackground:       #D5ECBF;
---
> @successText:             #468847;
> @successBackground:       #dff0d8;
245,246c245,246
< @infoText:                darken(@blue, 10%);
< @infoBackground:          #A7DFF1;
---
> @infoText:                #3a87ad;
> @infoBackground:          #d9edf7; 
```

bootswatch.less

```
// Cerulean 2.3.0
// Bootswatch
// -----------------------------------------------------

// TYPOGRAPHY
// -----------------------------------------------------

@import url(//fonts.googleapis.com/css?family=Telex);

// SCAFFOLDING
// -----------------------------------------------------

// NAVBAR
// -----------------------------------------------------

.navbar {

    .brand {
        padding: 14px 20px 16px;
        font-family: @headingsFontFamily;
        text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);
    }

    li {
        line-height: 20px;
    }

    .nav > li > a {
        padding: 16px 10px 14px;
        font-family: @headingsFontFamily;
        text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);
    }

    .search-query {
        border: 1px solid darken(@linkColor, 10%);
        line-height: normal;
    }

    .navbar-text {
        padding: 19px 10px 18px;
        line-height: 13px;
        color: rgba(0, 0, 0, 0.5);
        text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.3);
    }

    &-inverse {

        .navbar-search .search-query {
            color: @textColor;
        }
    }
}

@media (max-width: @navbarCollapseWidth) {

    .navbar .nav-collapse {

        .nav li > a {

            font-family: @headingsFontFamily;
            font-weight: normal;
            color: @white;
            text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);

            &:hover {
                background-color: #2B7CAC;
            }
        }

        .nav .active > a {
            .box-shadow(none);
            background-color: #2B7CAC;
        }

        .dropdown-menu li > a:hover,
        .dropdown-menu li > a:focus,
        .dropdown-submenu:hover > a {
            background-image: none;
        }

        .navbar-form,
        .navbar-search {
            border: none;
        }

        .nav-header {
            color: #2B7CAC;
        }
    }

    .navbar-inverse .nav-collapse {

        .nav li > a {
            color: @navbarInverseLinkColor;

            &:hover {
                background-color: rgba(0, 0, 0, 0.1);
            }
        }

        .nav .active > a,
        .nav > li > a:hover,
        .dropdown-menu a:hover {
            background-color: rgba(0, 0, 0, 0.1) !important;
        }
    }
}

div.subnav {

    font-family: @headingsFontFamily;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.2);

    &-fixed {
        top: @navbarHeight + 1;
    }
}

// NAV
// -----------------------------------------------------

// BUTTONS
// -----------------------------------------------------

.btn {
  #gradient > .vertical-three-colors(@white, @white, 5%, darken(@white, 0%));
  @shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
  .box-shadow(@shadow);

  &:hover {
    background-position: 0 0;
  }
}

.btn-primary {
  .buttonBackground(lighten(@btnPrimaryBackground, 5%), @btnPrimaryBackground);
}

.btn-info {
  .buttonBackground(lighten(@btnInfoBackground, 5%), @btnInfoBackground);
}

.btn-success {
  .buttonBackground(lighten(@btnSuccessBackground, 5%), @btnSuccessBackground);
}

.btn-warning {
  .buttonBackground(lighten(@btnWarningBackground, 5%), @btnWarningBackground);
}

.btn-danger {
  .buttonBackground(lighten(@btnDangerBackground, 5%), @btnDangerBackground);
}

.btn-inverse {
  .buttonBackground(lighten(@btnInverseBackground, 5%), @btnInverseBackground);
}

// TABLES
// -----------------------------------------------------

// FORMS
// -----------------------------------------------------

// DROPDOWNS
// -----------------------------------------------------

// ALERTS, LABELS, BADGES
// -----------------------------------------------------

// MISC
// -----------------------------------------------------

i[class^="icon-"]{
    opacity: 0.8;
}

// MEDIA QUERIES
// ----------------------------------------------------- 
```

完整编译的 css 可以在这里查看[https://gist.github.com/hailwood/4751104](https://gist.github.com/hailwood/4751104)

# c++ - c++中的定时生成器

> ID：14802815
> 
> 赞同：0
> 
> 时间：2013-02-10T21:32:31.630
> 
> 标签：c++, generator, average, timing

我完成了一个素数生成程序。现在，我想测试所有素数所需的时间并将这些数字存储在一个数组中。我写了这段代码......

```
#include <iostream>
#include <ctime>
using namespace std;

int main ()
{

    int long MAX_NUM = 1000000;
    int long MAX_NUM_ARRAY = MAX_NUM+1;
    int long sieve_prime = 2;
    int long sieve_prime_constant = 0;
    int time_store = 0;
    int *Num_Array = new int[MAX_NUM_ARRAY];
    std::fill_n(Num_Array, MAX_NUM_ARRAY, 3);
    Num_Array [0] = 1;
    Num_Array [1] = 1;

while (time_store<=100)
{
    clock_t time1,time2;
    time1 = clock();
    while (sieve_prime_constant <= MAX_NUM_ARRAY)
    {
        if (Num_Array [sieve_prime_constant] == 1)  
        {

            sieve_prime_constant++;
        }
        else
        {
            Num_Array [sieve_prime_constant] = 0;  
            sieve_prime=sieve_prime_constant; 
             while (sieve_prime<=MAX_NUM_ARRAY - sieve_prime_constant)  
            {
                sieve_prime = sieve_prime + sieve_prime_constant;
                Num_Array [sieve_prime] = 1;
            }
            if (sieve_prime_constant <= MAX_NUM_ARRAY)
            {
                sieve_prime_constant++;
                sieve_prime = sieve_prime_constant;
            }
        }
    }
    time2 = clock();
    delete[] Num_Array;
    cout << "It took " << (float(time2 - time1)/(CLOCKS_PER_SEC)) << " seconds to    execute    this loop." << endl;
    cout << "This loop has already been executed " << time_store << " times." << endl;
    float Time_Array[100];
    Time_Array[time_store] = (float(time2 - time1)/(CLOCKS_PER_SEC));
    time_store++;
}

return 0;

} 
```

当我运行它时，程序似乎经历了一次长循环然后崩溃。出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:36:04.977

你`numArray`在第一个循环结束时删除你，所以当你再次四处走动时引用 NULL ......

不知道你打算用这个`delete[]`语句做什么......但无论你打算做什么 - 要么在其他地方做，要么做其他事情，或者重新初始化数组，或者......你无疑可以从这里。

# linux - 如何避免 Chili Editor 集成的安全问题？

> ID：14802818
> 
> 赞同：0
> 
> 时间：2013-02-10T21:32:40.057
> 
> 标签：linux

我正在将辣椒编辑器 ( [http://www.chili-publish.com/](http://www.chili-publish.com/) ) 与我的网站集成，当我尝试使用 iframe 指向托管在不同服务器上的辣椒编辑器页面时遇到了一些问题。基本上它不允许我跨域运行 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:18:25.823

如果您查看 CHILI 文档，您会发现一些非常有用的信息 *“通过反向代理设置跨域脚本”*

您应该自己登录文档门户，如果没有，请联系您当地的经销商，他们应该能够提供帮助。

供参考。未来还有一个为 CHILI Publisher 用户提供的强大支持门户。

问候艾伦

# c# - 使用实体框架数据库第一个数据库上下文和 mvvm 视图模型类

> ID：14802823
> 
> 赞同：4
> 
> 时间：2013-02-10T21:33:17.387
> 
> 标签：c#, wpf, mvvm, model, viewmodel

我对 MVVM 和 WPF 很陌生，我不完全确定我现在要问的内容是否正确。

我正在制作一个 MVVM WPF 应用程序。我有一个 SQL Server 数据库，我首先使用 Entity Framework 数据库为我生成模型类。我已经创建了视图模型类，从我今天阅读的几十个教程中了解到，我需要一个包含我的视图模型类的 ObservableCollection。那是对的吗？

问题是实体框架已经为我生成了一个包含集合的数据库上下文，但它们正在使用模型类，如果上面是正确的，那么我需要让实体框架数据库上下文使用我的视图模型类。问题是如何。

我是否需要创建一个适合我需要的新数据库上下文类并使用它来代替，或者是否有一种我缺少的更简单的方法？这是 Entity Framework 为我生成的模型类：

```
public partial class Parent
{
    public Parent()
    {
        this.Children = new HashSet<Child>();
    }

    public int ID { get; set; }
    public string Name { get; set; }
    public string PIN { get; set; }
    public string Account { get; set; }
    public string Identity_Card { get; set; }
    public string Address { get; set; }

    public virtual ICollection<Child> Children { get; set; }
} 
```

提前致谢。如果我错过了提及某些内容或添加了部分代码，请告诉我，我会这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:40:25.770

对于@bas 所提到的内容，这样的事情很可能就足够了，我同意这是理想的方式......你的视图模型不是你的模型。

```
public class MainViewModel : INotifyPropertyChanged
{
    public MainViewModel(IRepository<Parent> parentRepo, IViewModelFactory factory)
    {
        // you might want to set this up as a fancy async method
        // because.. it looks better and it's easier to read
        Task.Factory
            .StartNew(() => parentRepo.GetAll())
            .ContinueWith(t =>
            {
                // Do error checking and all that boring stuff
                ParentViewModels =
                    new ObservableCollection<ParentViewModel>(
                        t.Result.Select(p => factory.Create<ParentViewModel>(p)));
            }, TaskScheduler.FromCurrentSynchronizationContext());
    }

    private ObservableCollection<ParentViewModel> _parentViewModels;
    public ObservableCollection<ParentViewModel> ParentViewModels
    {
        get
        {
            return _parentViewModels;
        }
        set
        {
            _parentViewModels = value;
            RaisePropertyChanged("ParentViewModels");
        }
    }

    // INotifyPropertyChanged implementation goes here
}

// Super secret sauce viewmodelfactory and repository implementations go here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:28:32.217

> 问题是实体框架已经为我生成了一个包含集合的数据库上下文，但它们正在使用模型类，如果上面是正确的，那么我需要让实体框架数据库上下文使用我的视图模型类。问题是如何。

不确定我是否理解您在此处所说的内容，但生成的类是生成的类。你不应该把它们塑造成别的东西。

您的视图模型类可以读取您生成的类。现在我可以想象这感觉像是重复，但还有更多需要考虑。首先，您的数据库类可以包含比您希望在视图中显示的更多的数据。因此，仅隐藏数据以便您仅向视图提供他们需要的数据是一个完美的策略。我认为在安全方面，在您看来，您不想提供直接连接到数据库的实体也是安全的。但这可能是一个不同的讨论。

因此，创建您的视图模型并用您的实体提供的数据填充它们。

在任何情况下，都不要修改**生成**的类，以至于在再次生成它们时需要再次重做：)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:41:13.697

只需将当前 DataContext 中模型的引用替换为您要使用的模型的引用即可。

# jquery - getJson / parseJson

> ID：14802827
> 
> 赞同：0
> 
> 时间：2013-02-10T21:34:02.657
> 
> 标签：jquery, json, getjson

这个问题与[Symfony2 JSON 响应返回奇怪的 UTF 字符](https://stackoverflow.com/questions/14798532/symfony2-json-response-returns-weird-utf-characters)有关。我正在尝试使用 GETJSON 对 JSON 数据执行 Ajax 请求，使用 Symfony2 作为后端。

我应该使用 parsejson 还是 getjson 就足够了？

# php - 如何从mysql填充下拉列表值

> ID：14802834
> 
> 赞同：0
> 
> 时间：2013-02-10T21:34:50.270
> 
> 标签：php, mysql

我正在尝试将用户添加到我的用户表中，表单要求输入用户名并要求用户从下拉列表中选择经理。我想从管理器表中的 manager_id 列填充现有管理器。但是我不知道该怎么做。到目前为止，这是我的代码：

```
<?php

if (isset($_POST['add'])) {
require_once 'login.php'; 

  $OK = false;

  $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");

  $stmt = $conn->stmt_init();

  $sql = 'INSERT INTO users (user_name, user_manager, user_creation_date)
          VALUES(?, ?, NOW())';
  if ($stmt->prepare($sql)) {

    $stmt->bind_param('ss', $_POST['user_name'], $_POST['user_manager']);

    $stmt->execute();
    if ($stmt->affected_rows > 0) {
      $OK = true;
    }
  }

  if ($OK) {
    header('Location: add_user_confirm.php');
    exit;
  } else {
    $error = $stmt->error;
  }
}
?>
<!DOCTYPE HTML>
<html>
<head>

<title>Add new user</title>
</head>

<body>
<h1>Add new user</h1>
<?php if (isset($error)) {
  echo "<p>Error: $error</p>";
} ?>
<form id="form1" method="post" action="">
  <p>
    <label for="user_name">user name:</label>
    <input name="user_name" type="text" class="widebox" id="user_name">
  </p>
  <p>
    User manager: <select name="user_manager" size "1">

  </p>
  <p>
    <input type="submit" name="add" value="add_user" id="add">
  </p>
</form>
</body>
</html> 
```

我的“经理”表如下所示： manager_id | 经理姓名 | 经理部门

有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:52:02.783

像这样的东西应该工作

```
<p>
    User manager: <select name="user_manager" size "1">
    <?php $stmt->close();
    $stmt2 = $conn->stmt_init();
    $selectQ = 'select * from managers';
    $stmt2->prepare($selectQ);
    $stmt2->execute();
    $result = $stmt2->get_result();
    while($resultRow = $result->fetch_array(MYSQLI_ASSOC))
        echo '<option value="$resultRow[manager_id]">$resultRow[manager_name]</option>';
    $result->close();
    $stmt2->close();
    ?>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:17:07.537

下面是添加用户的示例。

```
 /**
 * Storing new user
 * returns user details
 */
public function storeUser($name, $email, $password) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())");
    // check for successful store
    if ($result) {
        // get user details
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

请记住，您不想以原始形式存储密码，因此使用`$salt`and`hashSSHA`功能。下面列出了这些。

```
 /**
 * Encrypting password
 * @param password
 * returns salt and encrypted password
 */
public function hashSSHA($password) {

    $salt = sha1(rand());
    $salt = substr($salt, 0, 10);
    $encrypted = base64_encode(sha1($password . $salt, true) . $salt);
    $hash = array("salt" => $salt, "encrypted" => $encrypted);
    return $hash;
}

/**
 * Decrypting password
 * @param salt, password
 * returns hash string
 */
public function checkhashSSHA($salt, $password) {

    $hash = base64_encode(sha1($password . $salt, true) . $salt);

    return $hash;
} 
```

这些功能将有助于确保安全。此外，如果您想了解更多相关信息或查看整个 API 及其所有代码，请访问[此处](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

# php - 如何处理对服务器的许多动态图像请求？

> ID：14802838
> 
> 赞同：1
> 
> 时间：2013-02-10T21:35:19.593
> 
> 标签：php, javascript, jquery, html, image

我正在使用 jquery 将 html 字符串动态附加到容器中。

```
$('#container').append(str);

str = '<div class="images"><img src = "http://imgs.com/x></div>
       <div class="images"><img src = "http://imgs.com/y></div>
       <div class="images"><img src = "http://imgs.com/z></div>
       <div class="images"><img src = "http://imgs.com/n></div>'; 
```

附加此 html 字符串后，它将向[http://imgs.com/](http://imgs.com/)发出四个请求以获取图像 x、y、z、b。

我试图在一个请求中获取所有四个图像。我想存储所有图像并稍后使用它们。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:37:25.653

要在一个请求中下载所有图像文件，您需要创建一个 sprite。一个 sprite 包含多个图像，这些图像连接在一起形成一个更大的图像。显示图像时，精灵用作元素的背景，然后将背景定位到精灵中所需图像的坐标。

除了使用 sprite 策略外，浏览器将始终通过每个图像一个请求来下载这些图像。

进一步阅读： [http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

# html - 图像边框在 chrome 和 firefox 中消失，但在 IE 中出现

> ID：14802841
> 
> 赞同：0
> 
> 时间：2013-02-10T21:35:25.153
> 
> 标签：html, css, jquery-ui, google-chrome, firefox

使用在图像周围添加边框

```
img
{
    border-color: #bbbbbb;
} 
```

图像在 html 中定义，例如

```
 `<img src="/Thumb?product=CPU-EP0520EL01">` 
```

根据浏览器图像属性，图像大小为 130x130 像素。在 Firefox 和 Chrome 中不出现边框。

Firebug 检查元素样式选项卡显示样式已正确应用：

```
img {
    border-color: #BBBBBB;
}
.category-list li a, ul#category-list li .button {
    font-size: 11px;
}
a:link, a:visited {
    color: #A80000;
    font-weight: bold;
}
.category-list li {
    text-align: center;
}
.category-list {
    list-style: none outside none;
}
body {
    font-family: Helvetica,Arial,sans-serif;
    font-size: 12px;
} 
```

在 Internet Explorer 9 中正确显示边框。使用 Jquery ui 默认样式。我将 ui-corner-all 类添加到 img 元素，但问题仍然存在：未显示边框。（在这种情况下，IE9 会正确显示圆角边框）。

如何在 Chrome 和 FireFox 中显示图像周围的圆形边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:39:25.757

正确的使用方法是

```
img{
border:1px solid #bbb;
} 
```

其中第一个参数定义边框的宽度，第二个参数定义边框的类型，第三个参数是边框的颜色。[您可以在此处](http://www.w3schools.com/css/css_border.asp)阅读有关边界的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:37:24.377

尝试：

```
display: block;
border: 1px solid #bbbbbb; 
```

# facebook - 我可以强制用户在 facebook 登录后完成注册，是否违反 TOS？

> ID：14802844
> 
> 赞同：0
> 
> 时间：2013-02-10T21:35:37.477
> 
> 标签：facebook, facebook-php-sdk, facebook-authorization

简单的问题，我有 facebook 应用程序，这基本上是我的网站 1:1，但在 facebook iframe 中。

我想在用户使用 facebook 登录后向他显示一个注册表单，其中包含最常见的字段 - 用户名、电子邮件、密码。注册后，我想保存 facebook ID 并为该用户创建个人资料。

用户通过 facebook 进入网站后询问用户名/密码/电子邮件不是违反 facebook TOS 吗？

萨克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:47:15.237

为什么要反对任何事情？他们不必填写此表格并继续在您的网站上进行注册，因此他们并没有真正被迫这样做。

在您的 FB 应用程序的设置中，在**应用程序详细信息**页面上有用于链接到您的应用程序的隐私政策和服务条款的文本框。我认为你必须在你自己的 PP 和 TOS 中写下你为什么要这些数据，以及隐私和所有这些东西。而且，当然，您应该在注册页面上链接到您的应用程序的 PP 和 TOS，甚至在页脚中的“任何地方”，以便用户能够轻松检查它们。

# c - 如何使用 C 在控制台上打印 UTF-8 字符

> ID：14802845
> 
> 赞同：5
> 
> 时间：2013-02-10T21:35:45.523
> 
> 标签：c, windows, encoding, utf-8, eclipse-cdt

我有一个 C 应用程序，在该应用程序中，我通过套接字接收 UTF-8 字符串作为 char*。现在我想使用 Eclipse CDT 在控制台上打印它。我怎样才能做到这一点？我得到的通常是“Günther”什么应该是“Günther”

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:16:49.800

上面给出的最佳答案是 Joachim Isaksson。谢谢，这个ideed似乎是问题所在。我通过将运行配置的“编码”设置设置为 UTF-8 在 Eclipse 中解决了这个问题。

![在此处输入图像描述](../Images/f5c2b8c2d26efa02292aaa1f508811d5.png) ![在此处输入图像描述](../Images/255ef32ac2db74b98998dd8afaa3a828.png)

# ruby-on-rails - 罗尔。第 8 章，第 8.2.4 节 - 未定义的登录方法

> ID：14802851
> 
> 赞同：0
> 
> 时间：2013-02-10T21:36:13.530
> 
> 标签：ruby-on-rails, railstutorial.org

我正在编写第 8 章的 RoR 教程。我正在尝试完成第 8.2.4 节 - 更改布局链接并运行`$ bundle exec rspec spec/`，但出现以下错误：

```
Failures:

  1) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     NoMethodError:
     undefined method `sign_in' for #<SessionsController:0x007fef66b85fd0>
     # ./app/controllers/sessions_controller.rb:9:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

  2) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     NoMethodError:
       undefined method `sign_in' for #<SessionsController:0x007fef66b33eb0>
     # ./app/controllers/sessions_controller.rb:9:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

  3) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     NoMethodError:
       undefined method `sign_in' for #<SessionsController:0x007fef6698bba8>
     # ./app/controllers/sessions_controller.rb:9:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

  4) Authentication signin with valid information 
     Failure/Error: click_button "Sign in"
     NoMethodError:
       undefined method `sign_in' for #<SessionsController:0x007fef68286130>
     # ./app/controllers/sessions_controller.rb:9:in `create'
     # (eval):2:in `click_button'
     # ./spec/requests/authentication_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

Finished in 1.34 seconds
44 examples, 4 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:39 # Authentication signin with valid information 
rspec ./spec/requests/authentication_pages_spec.rb:40 # Authentication signin with valid information 
rspec ./spec/requests/authentication_pages_spec.rb:38 # Authentication signin with valid information 
rspec ./spec/requests/authentication_pages_spec.rb:41 # Authentication signin with valid information 
```

根据输出，我检查了`spec/requests/authentication_pages_spec.rb`，但似乎找不到错误。这就是我所拥有的：

```
require 'spec_helper'

describe "Authentication" do

subject { page }

describe "signin page" do 
    before { visit signin_path } 

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
end

  describe "signin" do
before { visit signin_path }

describe "with invalid information" do
        before { click_button "Sign in" }

        it { should have_selector('title', text: 'Sign in') }
        it { should have_selector('div.alert.alert-error', text: 'Invalid') }

    describe "after visiting antoher page" do 
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') } 
    end
end

    describe "with valid information" do 
        let(:user) { FactoryGirl.create(:user) }
        before do
            fill_in "Email",    with: user.email
            fill_in "Password", with: user.password
            click_button "Sign in"
        end

        it { should have_selector('title', text: user.name) }
        it { should have_link('Profile', href: user_path(user)) }
        it { should have_link('Sign out', href: signout_path) }
        it { should_not have_link('Sign in', href: signin_path) }
    end
end
end 
```

我似乎找不到错误。根据错误输出，我应该在哪里查看任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:32:57.877

检查您的 config/routes.rb 文件以确保：

```
match '/signin', to: 'sessions#new' 
```

与您的会话控制器所看到的相匹配。“sessions_controller.rb”的创建方法应该有：

```
def create
  user = User.find_by_email(params[:session][:email].downcase)
  if user && user.authenticate(params[:session][:password])
    sign_in user
    redirect_back_or user
  else
    flash.now[:error] = 'Invalid email/password combination'
    render 'new'
  end
end 
```

只是我的猜测。在本教程中，我目前也在该区域附近。祝你好运，我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T23:39:11.237

可能有点晚了，但无论如何......

检查 app/controllers/application_controller.rb 中是否有“include SessionsHelper”

助手默认包含在视图中，但您必须明确地将它们包含在控制器中

# html - CSS 宽度 100% 在此页面上未激活？

> ID：14802852
> 
> 赞同：-1
> 
> 时间：2013-02-10T21:36:24.793
> 
> 标签：html, css

看看这个页面：[http ://rebar.ecn.purdue.edu/LTAPmobile%20-%20Copy/Helpers/News.aspx](http://rebar.ecn.purdue.edu/LTAPmobile%20-%20Copy/Helpers/News.aspx)

宽度：100%；在这里不工作？内容不会随窗口宽度缩小。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:50:33.330

对我来说很好......

然后我阅读了您对移动设备的评论......

不幸的是，当我尝试在手机上加载域时，域已关闭或找不到？

无论如何，也许这个页面可以帮助你？

[http://www.html5rocks.com/en/mobile/mobifying/](http://www.html5rocks.com/en/mobile/mobifying/)

META TAG有可能

```
<!-- mobile check -->
<meta name = "viewport" content = "width = device-width"> 
```

可能需要修改以确保它在移动设备上正常工作。也许上面的链接可以帮助您指出正确的方向。

# 更新

最初该页面根本无法在我的移动设备上加载，因此我复制了您的代码并将其更改为保存到一个临时文件并将其上传到我的服务器，最初它仍然给出 404 错误。

因此，我将上面提到的 META TAG 从原来的内容修改为与下面列出的相同：

```
<meta name = "viewport" content = "width = device-width, initial-scale=1.0, user-scalable=yes" /> 
```

我还将指向以 ../ 开头的其他资源文件的链接修改为完全限定的路径名​​，在这样做并将其重新上传到我的服务器之后，我终于能够在我的移动设备上查看该页面（华为 G300 ASCEND 使用Opera Mini 浏览器）

当我将手机从横向位置旋转到纵向位置时，文本被重新对齐并正确格式化，并在彼此下方（重新排列）的文本行完成。我查看了 Opera Mini 和手机内置的工厂浏览器 - 工厂浏览器支持 html5，但我不确定浏览器的品牌/品牌。

# opengl - glBindBuffer 中的 GL_ARRAY_BUFFER 目标是什么意思？

> ID：14802854
> 
> 赞同：25
> 
> 时间：2013-02-10T21:36:37.857
> 
> 标签：opengl, graphics, opengl-es, glsl, shader

我对VBO感到困惑，

```
glGenBuffers(1, &positionBufferObject);
glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject); 
```

除了 GL_ARRAY_BUFFER，还有其他目标类型：GL_ATOMIC_COUNTER_BUFFER、GL_COPY_READ_BUFFER...

但是，Opengl 手册没有提到这些目标的含义。我检查了glew.h：

```
#define GL_ARRAY_BUFFER 0x8892 
```

这是否意味着目标（如 GL_ARRAY_BUFFER）是地址？

glBindBuffer 中的 target--GL_ARRAY_BUFFER 是什么意思？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-10T22:39:24.137

### 一般来说

大多数[OpenGL 对象](http://www.opengl.org/wiki/OpenGL_Object)必须绑定到 OpenGL 上下文中称为“目标”的位置才能使用。目标只不过是绑定对象的上下文中的一个地方。

不同的对象类型（缓冲区、纹理等）具有不同的目标集。一般来说，每个目标都有特定的含义：将一个对象绑定到一个目标意味着您希望以目标使用绑定到它的对象的任何方式使用该对象。

将对象绑定到一个目标不会影响对象是否绑定到另一个目标（除非它是纹理对象；它们以不同方式对待目标）。

有一些函数可以修改对象或从绑定对象中查询数据。他们采用一个目标，他们正在修改/查询的对象已绑定到该目标。

### GL_ARRAY_BUFFER

The `GL_ARRAY_BUFFER` target for [buffer objects](http://www.opengl.org/wiki/Buffer_Object) represents the intent to [use that buffer object for vertex attribute data](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object). However, binding to this target alone doesn't do anything; it's only the call to [`glVertexAttribPointer` (or equivalent functions)](http://www.opengl.org/wiki/GLAPI/glVertexAttribPointer) that uses whatever buffer was bound to that target for the attribute data for that attribute.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T22:08:28.493

> 但是，Opengl 手册没有提到这些目标的含义。

[OpenGL 2.1 规范，第 38 页，第 2.9.1 节：“缓冲区对象中的顶点数组”](http://www.opengl.org/registry/doc/glspec21.20061201.pdf)

> 这是否意味着目标（如 GL_ARRAY_BUFFER）是地址？

不，它们只是`unsigned int`像`enum`s 一样使用。

# c++ - 显示变量消息的自定义异常，不同编译器中的不同行为

> ID：14802855
> 
> 赞同：1
> 
> 时间：2013-02-10T21:36:45.353
> 
> 标签：c++, windows, exception, winsock2

我最近在做一些套接字编程并开始用 C++ 编写代码。由于我正在尝试编写的程序将有几个组件必须通过套接字进行通信，所以我决定将套接字通信封装在一个类中。

由于可能会发生几个错误，因此我决定为套接字异常创建一个类，我将其定义如下：

```
class SocketException: public std::exception {
public:
  SocketException(const std::string &message);
  ~SocketException() throw();
  virtual const char * what() const throw();
private:
  std::string msg;
}; 
```

实现如下：

```
SocketException::SocketException(const std::string &message) : msg(message) {}
SocketException::~SocketException() throw() {}

const char * SocketException::what() const throw() {
  std::stringstream stream;
  stream << msg + " Error number: ";
  stream << WSAGetLastError();
  return stream.str().c_str();
} 
```

到目前为止，该`what()`方法的实现还不完整，因为我想通过显示错误代码的文本含义，`FormatMessage()`但我还没有写出来。

我在 Visual Studio 中尝试了这段代码，但没有像我预期的那样工作，该`what()`方法返回垃圾。在花了很长时间试图找出问题并尝试不同的事情之后，我最终尝试了不同的编译器。

使用 MinGW (GCC) 代码按预期编译和运行，消息显示为我认为的那样（如果有人感兴趣，我只是`connect()`在未连接到 Internet 时尝试执行）。

我只是在学习 C++，我想知道问题出在哪里，或者什么是合适的方法。

编辑：感谢您的评论和回答，起初我以为是这样，所以我曾经`new`分配流（即使知道它会泄漏，只是为了尝试`new`使用堆），结果是同样，这就是我所拥有的：

```
const char * SocketException::what() const throw() {
  std::stringstream *stream = new std::stringstream();
  *stream << msg + " Error: ";
  *stream << WSAGetLastError();
  return (*stream).str().c_str();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:41:53.413

您正在返回一个指向`what`函数本地变量的指针，从而为调用者留下一个悬空指针：

```
const char * SocketException::what() const throw() {
  std::stringstream stream;  // this stringstream will die on exiting this scope
  stream << msg + " Error number: ";
  stream << WSAGetLastError();
  return stream.str().c_str();
} 
```

那是**未定义的行为**。这意味着任何事情都可能发生。

安全返回的方法的示例`const char*`是这样的（显然它没有原始的预期功能，仅用于说明目的）：

```
const char * SocketException::what() const throw()
{
  return msg.c_str(); // msg lives as long as this SocketException instance 
} 
```

`SocketException`如果在对象死亡后指针没有被取消引用，这已经定义了行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T13:06:11.537

怎么样
`throw std::runtime_error("My very own message");`

# cron - CentOS 上的 crontab 配置

> ID：14802857
> 
> 赞同：0
> 
> 时间：2013-02-10T21:37:12.567
> 
> 标签：cron, centos, crontab

我有一个在 CentOS 上运行的 VPS 上运行的 Magento 安装。我一直在尝试使用此处找到的脚本实施备份解决方案：[https](https://github.com/zertrin) ://github.com/zertrin 。它工作得很好，我的下一步是自动化它。尽管我付出了所有努力，但 Cron 作业并没有运行。这是我在 /etc/crontab 中得到的：

```
* 20 * * * root echo "Cron Worked $(date)" >> /tmp/cronworked.txt
#
* 16 * * 1-6 root /root/duplicity-backup.sh -c /etc/duplicity-backup.conf -b
#
* 4 * * 7 root /root/duplicity-backup.sh -c /etc/duplicity-backup.conf -f
#
* 20 * * 7 root /root/duplicity-backup.sh -c /etc/duplicity-backup.conf -n
#
* 20 * * * root echo "Cron Worked $(date)" >> /tmp/cronworked3.txt 
```

我的两个测试 cron 作业（第一个和最后一个）都可以正常工作，但不是中间的那些命令。如果我将它们作为独立命令发出但由于某种原因不是作为 Cron 作业，它们可以正常工作。

任何人都可以指导我弄清楚这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:53:06.807

您可以检查几件事：

1.  确保`/root/duplicity-backup.sh`可执行

2.  如果您配置了本地邮件服务器，您应该会收到一封有关 cron 作业输出的电子邮件，这可能会告诉您出了什么问题

3.  如果您没有收到来自 cron 作业的电子邮件，则将 stdout 和 stderr 重定向到一个文件。这应该有助于找出问题所在

4.  在脚本名称前面添加`bash`以确保它正在运行`bash`而不是其他东西，不知何故，像这样：

    ```
    * 4 * * 7 root bash /root/duplicity-backup.sh -c /etc/duplicity-backup.conf -f 
    ```

拥有脚本输出和错误消息应该会有所帮助。如果他们不这样做，请将它们粘贴在这里。

# google-cloud-storage - gsutil setwebcfg -m index.html -e 404.html 不起作用

> ID：14802866
> 
> 赞同：0
> 
> 时间：2013-02-10T21:38:04.807
> 
> 标签：google-cloud-storage

我在谷歌云存储上向公众开放（作为静态网站）的存储桶时遇到了一个奇怪的问题。

我创建了一个名为 fixparser.targetcompid.com 的存储桶。我按照谷歌的程序向我现有的主机添加了一个识别 html 文件。

我可以复制我的 htmls/css/js/等。当我提供完整的网址时，甚至可以查看 index.html 页面：http: [//commondatastorage.googleapis.com/fixparser.targetcompid.com/index.html](http://commondatastorage.googleapis.com/fixparser.targetcompid.com/index.html)

但是，如果我只提供通用网站地址，我无法获取索引文件：http: [//commondatastorage.googleapis.com/fixparser.targetcompid.com](http://commondatastorage.googleapis.com/fixparser.targetcompid.com)

以下是我设置 MainPageSuffix 和 NotFoundPage 时看到的内容：

```
 $ ./gsutil setwebcfg -m index.html -e 404.html gs://fixparser.targetcompid.com
Setting website config on gs://fixparser.targetcompid.com/...

$ ./gsutil setwebcfg -m index.html -e 404.html gs://fixparser.targetcompidxxxx.com
Setting website config on gs://fixparser.targetcompidxxxx.com/...
GSResponseError: status=404, code=NoSuchBucket, reason=Not Found.

$ ./gsutil getwebcfg gs://fixparser.targetcompid.com
Getting website config on gs://fixparser.targetcompid.com/...

-WebsiteConfiguration>
        -MainPageSuffix>
                index.html
        -/MainPageSuffix>
        -NotFoundPage>
                404.html
        -/NotFoundPage>
-/WebsiteConfiguration>
(I don't know how else to format this xml snippet) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:10:17.833

Google Cloud Storage 网站配置只会影响定向到 c.storage.googleapis.com 的 CNAME 别名的请求。在此特定示例中，您可能希望为 fixparser.targetcompid.com 设置 CNAME 别名以指向 c.storage.googleapis.com。完成此操作后，打开[http://fixparser.targetcompid.com](http://fixparser.targetcompid.com)将加载您使用 gsutil setwebcfg 命令设置的 index.html 页面。

Mike Schwartz，谷歌云存储团队

# android - 为 NumberPicker 捕获键盘“完成”

> ID：14802869
> 
> 赞同：8
> 
> 时间：2013-02-10T21:38:13.783
> 
> 标签：android, numberpicker

我有一个`AlertDialog`只有一些文本、一个`NumberPicker`、一个确定和一个取消。

```
package org.dyndns.schep.example;
import android.os.Bundler;
import android.view.View;
import android.widget.NumberPicker;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.DialogInterface;

public class FooFragment extends DialogFragment {
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        mParent = (MainActivity) activity;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setPositiveButton(android.R.string.ok,
                new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int id) {
                mParent.setFoo(foo());
            }
        })
        .setNegativeButton(android.R.string.cancel, null);

        View view = getActivity().getLayoutInflater.inflate(
                R.layout.dialog_foo, null);
        mPicker = (NumberPicker) view.findViewById(R.id.numberPicker1);
        mPicker.setValue(mParent.getFoo());
        builder.setView(view);
        return builder.create();
    }

    public int foo() {
        return mPicker.getValue();
    }

    private MainActivity mParent;
    private NumberPicker mPicker;
} 
```

（我知道，这个对话框还没有做它应该保留暂停和恢复状态的事情。）

我希望软键盘或其他 IME 上的“完成”操作可以关闭对话框，就像按下“确定”一样，因为只有一个小部件要编辑。

看起来处理 IME “完成”的最佳方法通常是`setOnEditorActionListener`在`TextView`. 但我没有任何`TextView`变量，`NumberPicker`也没有明显公开任何`TextView`或类似的编辑器回调。（也许`NumberPicker`包含一个`TextView`我可以搜索使用的恒定 ID `findViewById`？）

`NumberPicker.setOnValueChangedListener`确实会在“完成”操作上触发，但在点击或轻弹数字列表时也会触发，这绝对不应该关闭对话框。

基于[这个](https://stackoverflow.com/questions/3031887/how-to-catch-a-done-key-press-from-the-soft-keyboard)问题，我尝试检查`setOnKeyListener`，但使用软键盘时该界面根本没有触发。并不完全令人惊讶，因为[`KeyEvent`](http://developer.android.com/reference/android/view/KeyEvent.html)文档表明它更多地用于硬件事件，并且在最近的 API 中，软键盘根本不会发送它们。

如何将 IME“完成”连接到对话框的“确定”操作？

编辑：从源代码的外观来看，`NumberPicker`布局确实包含 a `EditText`，但它的 id`id/numberpicker_input`在 package 中`com.android.internal`。使用它并不容易，显然是不鼓励的。但似乎可能只有破解方法来获得我想要的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T10:31:01.420

> 如何将 IME“完成”连接到对话框的“确定”操作？

问题是，如果您没有在`TextView`当前与 IME 一起使用的小部件上设置侦听器，则无法传递 IME 的事件。做你想做的事情的一种方法是将我们自己的逻辑连接到`NumberPicker`与 IME 一起工作的 ' 子级（就像你在问题的最后一部分中已经谈到的那样）。为避免使用某些 id 或其他布局技巧（可能有问题）来获取该小部件，您可以使用贪婪策略，将侦听器设置为任何`NumberPicker`可能触发所需事件的小部件（`TextViews`或任何子类`TextView`） . 像这样的东西：

```
 private AlertDialog mCurrentDialog;
    private List<TextView> mTargets = new ArrayList<TextView>();
    private OnEditorActionListener mListener = new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {
                // if a child of NumberPicker triggers the DONE editor event
                // get a reference to the positive button(which you use in your
                // code) and click it
               mCurrentDialog.getButton(Dialog.BUTTON_POSITIVE).performClick();
            }
            return false;
        }
    };

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
     // ...
     mPicker = (NumberPicker) view.findViewById(R.id.numberPicker1);
        mPicker.setValue(mParent.getFoo());
        // clear any previous targets
        mTargets.clear();
        // find possible targets in the NumberPicker 
        findTextViews(mPicker);
        // setup those possible targets with our own logic 
        setupEditorListener();          
        builder.setView(view);
        // get a reference to the current showed dialog 
        mCurrentDialog = builder.create();          
        return mCurrentDialog;
    } 
```

方法在哪里：

```
private void findTextViews(ViewGroup parent) {
        final int count = parent.getChildCount();
        for (int i = 0; i < count; i++) {
            final View child = parent.getChildAt(i);
            if (child instanceof ViewGroup) {
                findTextViews((ViewGroup) child);
            } else if (child instanceof TextView) {
                mTargets.add((TextView) child);
            }
        }
    }

    private void setupEditorListener() {
        final int count = mTargets.size();
        for (int i = 0; i < count; i++) {
            final TextView target = mTargets.get(i);
            target.setOnEditorActionListener(mListener);
        }
    } 
```

另一种可能（且合理）的解决方案（如 Naveen 在他的评论中已经提到的）是使用`NumberPicker`该类的一个端口（或从 SDK 修改一个）并插入您自己的小部件 ID（这将使参考小部件一个简单的任务）。这现在更容易实现，但从长远来看不方便维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:50:41.817

我的搜索和实验也结果是空手而归。也就是说，我不会鼓励这种行为，因为它没有多大意义。

如果您需要 NumberPicker，那是因为您想要滚动到所需值的功能，而不是输入它（尽管这是可能的）。如果您想输入值，您将使用 EditText 并且您将能够毫无问题地实现您需要的内容。

或者，您必须从源代码复制 NumberPicker 实现，然后根据您的需要进行更改（通过添加 ime 选项来实现）。

# c - 在多个文件中使用 typedef 结构

> ID：14802871
> 
> 赞同：0
> 
> 时间：2013-02-10T21:38:25.437
> 
> 标签：c, eclipse, struct, typedef

我在我的标题中声明了一个 typedef 结构。其关联的 C 文件可以找到 typedef，但其他头文件无法读取它。

```
 // In projectiles.h I have 
#ifndef PROJECTILES_H_
#define PROJECTILES_H_

struct TheProjectile { };         
typedef struct TheProjectile Projectile;

#endif /* PROJECTILES_H_ */ 
```

在physics.h中我想使用Projectile

```
#ifndef PHYSICS_H_
#define PHYSICS_H_

#include "projectiles.h"

struct TheProjectile;

void set_Current_Angle(Projectile* PI);

#endif /* PHYSICS_H_ */ 
```

但是，在 Eclipse 中，我不断收到“在 PI 之前”错误。没有`typedef`它确实可以正常工作。我究竟做错了什么？

# html - 快速查看 html 文件作为文本，而不是呈现 html？

> ID：14802873
> 
> 赞同：12
> 
> 时间：2013-02-10T21:38:32.830
> 
> 标签：html, macos, quicklook

OSX 的 Quicklook 呈现 HTML（使用插件 /System/Library/Quicklook/Web.qlgenerator）。我希望看到纯文本，就好像我已将 .html 重命名为 .txt （这不是解决方案，不仅因为它很尴尬：我希望如果关闭 HTML 渲染，代码着色 Quicklook我使用的插件会启动，Quicklook 会显示漂亮的 HTML 代码）。

我无法在不终止 Quicklook html 支持的情况下关闭 HTML，这就是我删除插件时发生的情况。我真的不知道我在 info.plist 中查看的内容，但删除 public.html 行同样糟糕。

提示？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T23:13:17.797

这个问题与：[https](https://apple.stackexchange.com/questions/51816/quicklook-html-plugin) ://apple.stackexchange.com/questions/51816/quicklook-html-plugin 有关。

这是一个有效的解决方案（在 Mac OS X 10.7.5 上测试）：

1.  /install [qlcolorcode](https://code.google.com/p/qlcolorcode/downloads/detail?name=QLColorCode-2.0.2.tgz&can=2&q=) (或[qlstephen](https://github.com/downloads/whomwah/qlstephen/QLStephen.qlgenerator.zip) )

2.  编辑`/System/Library/Quicklook/Web.qlgenerator/Contents/Info.plist`和注释这两行如下：

    ```
    <key>LSItemContentTypes</key>
    <array>
      <string>com.apple.webarchive</string>
      <!-- <string>public.html</string> -->
      <!-- <string>public.xhtml</string> -->
      <string>public.svg-image</string>
    </array> 
    ```

3.  将上面删除的两行添加`<key>LSItemContentTypes</key>`到`~/Library/QuickLook/QLColorCode.qlgenerator/Contents/Info.plist`（或`~/Library/QuickLook/QLStephen.qlgenerator/Contents/Info.plist`）中

4.  按 Command+Option+Esc 并重新启动 Finder。

现在 QuickLook 应该显示 HTML 文件的源代码（如果您使用 qlcolorcode，则会突出显示语法）而不是渲染它们。

# c# - 如何在最小化后提前暂停我的 Windows 8 Pro 应用程序？

> ID：14802875
> 
> 赞同：1
> 
> 时间：2013-02-10T21:39:08.800
> 
> 标签：c#, windows-8, windows-store-apps

我正在构建一个 Windows 8 Pro 应用程序，我希望应用程序在失去焦点（或被“最小化”）后立即进入“暂停”状态

这适用于信息亭应用程序（实际上不会在商店中），当用户尝试隐藏它时，我想在其中重新启动/重新聚焦应用程序。到目前为止，我只能在应用程序被终止后（即当 Process.GetProcessByName() 中不存在该进程时）使用本机 C# 应用程序“重新聚焦”它。这就是我想终止应用程序的原因——用户不应该最小化它，所以终止它是应用程序可以承受的成本。

如何让应用程序在最小化时终止？我想知道是否可以设置超时期限，或者在应用程序本身失去焦点时拦截 App.xaml.cs 中的一般事件（然后可能调用 App.Exit() 终止进程）。我已经尝试过 Application.Suspending 事件，但启动时间太长。使用 ALT+F4 杀死应用程序后，大约需要 10 秒才能启动。

# c# - 将控制台输出定向到 Windows 窗体中的文本框的好方法是什么？

> ID：14802876
> 
> 赞同：3
> 
> 时间：2013-02-10T21:39:10.907
> 
> 标签：c#, textbox

在 C# 中，将控制台输出定向到 Windows 窗体中的文本框的好方法是什么？

如果我有一个具有 console.WriteLine 的现有程序，我是否需要重载 Windows 窗体文本框中的函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T22:11:51.267

创建一个写入文本框的文本编写器：

```
 public class TextBoxWriter : TextWriter
    {
        TextBox _output = null;

        public TextBoxWriter (TextBox output)
        {
            _output = output;
        }

        public override void Write(char value)
        {
            base.Write(value);
            _output.AppendText(value.ToString());
        }

        public override Encoding Encoding
        {
            get { return System.Text.Encoding.UTF8; }
        }
    } 
```

并将控制台输出重定向到这个 writer：

```
 //...

        public Form()
        {
            InitializeComponent();
        }

        private void Form_Load(object sender, EventArgs e)
        {
            Console.SetOut(new TextBoxWriter(txtConsole));
            Console.WriteLine("Now redirecting output to the text box");
        } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-10T22:04:36.623

```
button_Click(object sender, EventArgs e)
{
   try
   {
      // Do stuff
   }
   catch(Exception exception)
   {
      // Couldn't do stuff. Log the exception.
      myTextBox.Text += "\n" + exception.Message;
   }
} 
```

那应该这样做。

# php - PHP提交后问题显示值

> ID：14802881
> 
> 赞同：0
> 
> 时间：2013-02-10T21:39:38.393
> 
> 标签：php, jquery, ajax, nan

我正在使用一个名为 Thumbs Up的 PHP 投票脚本[http://codecanyon.net/item/thumbsup/full_screen_preview/50411 。](http://codecanyon.net/item/thumbsup/full_screen_preview/50411)我对 PHP 很陌生，除了显示投票之外，一切都很好。

投票后，数据库会更新，并且有一个更新投票数的回发。我尝试了多种方法来显示结果，但它一直返回 NaN。如果我重新加载页面，则值会成功显示。

我在单击时加载结果表并尝试返回结果，但我没有运气。我循环遍历`<li>`并将结果存储在一个数组中。

这将返回 NaN 而不是值。如果我重新加载页面，则值在那里并更新。似乎导致此问题的 php 回发存在延迟。我确实尝试向 ajax 调用添加延迟，但它仍然返回 NaN。

代码：

我正在存储每个结果并将值存储在数组中

```
var resultVoteOne = voteOneDigit / total * 100;
var arrValues = [resultVoteOne] 
```

我在条形图中显示结果：

```
$('.extras_result p.vote1 span').append(arrValues[0] + '%');

$(".extras_result").each(function() {
    var length = $(this).find("span").html();
    $(this).find("p").animate({'width':length}, 1000, function() {
  $(this).find("span").fadeIn(800);
    });
}); 
```

如果我在投票后重新加载页面，则图表更新成功。

单击时，我尝试使用 ajax 更新值，但仍然没有运气:(

```
$('.containers input').on('click', function() { 
    $.ajax({
    url:'results.php',
    cache:false,
    success: function(response) {
    $('.voteResults').html(response);
    }
    });
}); 
```

感谢您对这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:52:12.067

首先在您的ajax方法中使用async：false这可以解决您的问题，只需在显示之前将voteRequest空白

```
$('.voteResults').html('');
$('.voteResults').html(response); 
```

无论通过 ajax 来的什么都被转换成字符串，所以你必须在 javascript 中进行类型转换，然后再将它用作数字计算，否则它会给你结果 NaN

# c++ - 类中动态分配的数组

> ID：14802882
> 
> 赞同：2
> 
> 时间：2013-02-10T21:39:49.810
> 
> 标签：c++, arrays, class, dynamic

这是一个类，它基本上是一个我想要对其执行一些操作的数字数组。

```
class MyClass {
public:
    MyClass() { //constructor
        int * array = new int[n];
        for(int i = 0; i < n; i++) {
            array[i] = i*i;
        }
    } //end constructor
    int displayIthElement(int i) {
        return array[i];
    }
} 
```

我得到：错误，标识符“数组”在 displayIthElement 函数中未定义。就好像数组数组停止存在于构造函数之外，这是没有意义的。问题是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T21:42:13.573

> 就好像数组数组停止存在于构造函数之外，这是没有意义的。

实际上，这是唯一有意义的行为……这就是语言的工作方式。

`array`是在构造函数中声明和定义的局部变量。当构造函数退出时，指针变量被破坏，并且您泄漏了它所引用的内存。分配的内存`new`或`new []` *总是*需要相应的`delete`或`delete []`在其所指对象超出范围之前。总是。

`array`应该是类的成员。您正在学习，因此了解动态内存处理的工作原理是个好主意，但在未来，更喜欢为您处理分配和释放的安全容器（即 、`std::unique_ptr`等`std::vector`）。

```
class foo {
public:
  foo() { 
    array = new int[length];
    for(int i = 0; i < length; i++) {
      array[i] = i*i;
    }       
  }
private:
  int *array;  // when does this get deallocated?  Look up RAII
}; 
```

# ios - Objective C - iOS - 验证浮点/双精度

> ID：14802883
> 
> 赞同：2
> 
> 时间：2013-02-10T21:39:50.803
> 
> 标签：ios, objective-c, floating-point

我正在做臭名昭著的斯坦福计算器作业。我需要验证输入的数字是否为有效浮点值，这样我们就可以处理像 102.3.79 这样的数字。

为了避免编写一个小循环来计算字符串中的句点，必须有一个内置函数是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T21:45:05.887

您可以使用 C 标准库函数`strtod()`。它在遇到错误的地方停止，并相应地设置其输出参数。你可以利用这个事实如下：

```
- (BOOL)isValidFloatString:(NSString *)str
{
    const char *s = str.UTF8String;
    char *end;
    strtod(s, &end);
    return !end[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:32:19.743

```
-(BOOL) isNumeric:(NSString*)string {    
    NSNumberFormatter *formatter = [NSNumberFormatter new];
    [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
    NSNumber *number = [formatter numberFromString:string];
    [formatter release]; // if using ARC remove this line
    return number!=nil;
}

-(BOOL) isFloat:(NSString*)string {
    NSScanner *scanner = [NSScanner scannerWithString:string];
    [scanner scanFloat:NULL];
    return [scanner isAtEnd];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T22:04:51.353

经历了 CS193P 之后，我认为这个想法是为了适应`NSString`和`UILabel`使用 C。我会考虑有一个简单的小数点`BOOL`标志，因为按下按钮并且你正在连接数字 1- 用于使用和 2- 用于显示。

当您进行其他检查（例如在数字末尾悬挂小数点或允许用户退格数字）时，这也会派上用场。

编辑例如：

创建一个连接到每个数字按钮的 IBAction：

```
- (IBAction)numberButtonPressed:(UIButton *)sender 
{  
  if([sender.titleLabel.text isEqualToString:@"."])
  {
    if (!self.inTheMiddleOfEnteringANumber)
        self.display.text=[NSString stringWithString:@"0."];

    else if (!self.decimalPointEntered)
      {
        self.display.text=[self.display.text stringByAppendingString:sender.titleLabel.text]; 
        self.decimalPointEntered=TRUE;
      }
   }   
self.inTheMiddleOfEnteringANumber=TRUE;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T22:20:03.893

`@"."`在字符串中计数至少有一个相当优雅的解决方案：

```
NSString *input = @"102.3.79";
if([[input componentsSeparatedByString:@"."] count] > 2) {
    NSLog(@"input has too many points!");
} 
```

再深入一点...如果您希望将整个字符串验证为数字，请尝试配置`NSNumberFormatter`并调用`numberFromString:`（[NSNumberFormatter 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)）。

# ruby-on-rails - 抱怨某条路线缺失而该路线不存在

> ID：14802887
> 
> 赞同：0
> 
> 时间：2013-02-10T21:40:11.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, controller, routes

我正在开发一个非常简单的项目管理网络应用程序。

我有两个不同的页面，您可以在其中查看项目。

```
1\. View all projects
2\. View only the projects where you are administrator (includes buttons for editing / deletion of the projects) 
```

因为我有两个不同的页面来显示项目，所以我决定创建一个自定义路由，将用户引导到项目控制器中的自定义操作。

但是，这（由于某种原因）不起作用，并且我收到以下错误消息：

```
No route matches {:action=>"edit", :controller=>"projects"} 
```

**风景：**

```
<%= link_to "Manage projects", users_projects_path %> 
```

**项目负责人：**

```
class ProjectsController < ApplicationController
    ...
    def users_projects
      @users_projects = Project.where(:user_id => current_user.id)
    end
...
end 
```

**项目型号：**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users, :class_name => 'User'

  belongs_to :user
  has_many :tickets, :dependent => :destroy

  //validation

  attr_accessible :user_id, :title, :description, :start_date, :end_date
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:52:24.483

问题是您没有为`id`路由提供参数，这是必需的。

在某处，您正在生成指向`edit_project_path`. 确保您为该 url 生成器提供了一个项目：`edit_project_path(project)`

# python - 在 Python 中结构化数据（列表中的列表？）

> ID：14802890
> 
> 赞同：0
> 
> 时间：2013-02-10T21:40:47.203
> 
> 标签：python, list, python-2.7

我目前正在 Python 2.7 中开发一个脚本，它从 URL 中提取大约 50 个字符串值并将这些值放在一个列表中。

对于这 50 个值中的每一个，它们每个都有另外 20 个相关的字符串值。

例如，我可以从 URL 中捕获两个初始值，它们是“Ford”和“BMW”。然后我将重新查询“福特”以找到相关的模型，例如“焦点”和“蒙迪欧”等......

最终我需要加入这些值以执行进一步的 URL 查询（即 www.ford.com/fiesta 和 www.ford.com/mondeo 和 www.bmw.com/xxxx）

我想知道最好的方法是构建我的数据吗？我正在考虑创建一个父值列表，然后为每个父值创建一个子列表，标题为父值及其在列表中的关联值。

有没有更好的方法来构建数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:48:50.203

一个友好的建议：保持简单。如有疑问，请参阅 Python 之禅：http: [//www.python.org/dev/peps/pep-0020/](http://www.python.org/dev/peps/pep-0020/)

“简单胜于复杂。”

我会选择列表的字典，甚至更好的是`defaultdict`（[http://docs.python.org/2/library/collections.html#collections.defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)）：

```
from collections import defaultdict

cars = defaultdict(list)

cars["Ford"].append("Mondeo")
cars["Ford"].append("Focus")
cars["BMW"].append("SuperCoolModel")

print cars 
```

给出：

```
defaultdict(<type 'list'>, {'BMW': ['SuperCoolModel'], 'Ford': ['Mondeo', 'Focus']}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:58:42.217

我认为 OOP 方法是组织此类数据的好方法，以便具有高凝聚力并更容易添加新功能。例如：

```
class CarBrand(object):
    def __init__(self, name):
        self.name = name
        self.domain = "http://www.%s.com/" % name.lower()

class CarModel(object):
    def __init__(self, name, brand):
        self.name = name
        self.brand = brand
    def url_query(self):
        return "%s%s" % (self.brand.domain, self.name.lower()) 
```

# php - PHP MongoDB 持久连接

> ID：14802895
> 
> 赞同：1
> 
> 时间：2013-02-10T21:41:17.940
> 
> 标签：php, mongodb

> 我希望在我的 Mongodb HTTPS 服务器上默认激活**持久连接。**

实现它的正确配置是什么？示例：最大连接寿命、最大持久连接数...

是否有机会优化这些设置或至少看到它们的值？

phpinfo() 什么也没告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T22:41:54.987

似乎无法以这种方式配置连接设置，只能为某些连接操作设置超时：[http ://www.php.net/manual/en/mongoclient.construct.php](http://www.php.net/manual/en/mongoclient.construct.php)

至于最大持久连接数（[http://www.php.net/manual/en/mongo.connecting.pools.php](http://www.php.net/manual/en/mongo.connecting.pools.php)），PHP MongoDB 驱动程序实际上非常严格地保存了它创建的连接数，如前所述：

> 最新版本的驱动程序不再有池的概念，并且对于每个连接类型（ReplicaSet/standalone/mongos），每个凭据组合，每个进程只维护一个连接。

所以很明显，连接的数量取决于您使用的连接类型的数量以及已启动的 PHP 进程的数量，而不是配置中的某些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:09:26.773

从 mongo 1.2.3 开始不推荐使用连接池，您无法再获取或设置池的大小（存储在其中的连接在有需求时被获取）。连接由 PHP 管理，这意味着它存储包含标识唯一连接的主机、端口、数据库名称、进程 ID 等信息的“哈希”。

如果您有权访问，则可以通过实际的**mongod**进程而不是通过 PHP来设置最大同时连接数（持久是您提到的新默认值） 。在服务器端，你可以运行一个带有参数的 mongod 实例`--maxConns = 5000`来控制它的最大连接数。

持久连接寿命目前还无法调整或查看。无论如何，您实际上并不需要它，因为新连接会覆盖旧连接。未使用的持久连接没有害处，新的连接被注册，旧的被推出。因此，生命周期取决于每次新连接的数量。

# javascript - 是否值得为本地应用程序连接 javascript 文件（iBooks epub）

> ID：14802896
> 
> 赞同：1
> 
> 时间：2013-02-10T21:41:26.963
> 
> 标签：javascript, performance, zepto, ibooks, epub3

我正在使用[zepto.js](http://zeptojs.com)为 iBooks 编写交互式 epub以及一些我自己的脚本。

据我了解，最佳做法是组合 javascript 文件以提高性能（因为您正在减少对服务器的 http 请求）。

如果您的文件是本地文件，是否有性能优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T09:44:55.517

You should be able to benchmark this quite easily using Readium in conjunction with the Chrome devtools network, profile and/or timeline views. I agree with @ben-manley that there is no meaningful benefit from combining or minifying or zipping JS files, or CSS files for that matter, other than the effect on the size of the EPUB file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:19:02.340

据我所知，没有办法对 iBooks 中的 javascript 性能进行基准测试。但是，在加载单独的 javascript 文件时，我无法检测到性能下降。而且，如果有的话，当我合并我的 javascript 文件时，性能似乎变得更糟。

因此，在 iBooks 中组合本地 javascript 文件似乎没有性能优势。

# javascript - 是否可以使用 Javascript 敲响系统铃声？

> ID：14802897
> 
> 赞同：3
> 
> 时间：2013-02-10T21:41:34.930
> 
> 标签：javascript

我找到了以下答案，但它似乎不适用于 HTML 页面：

```
console.log('\u0007'); 
```

[我如何在nodejs中触发“系统铃声”](https://stackoverflow.com/questions/8557624/how-i-trigger-the-system-bell-in-nodejs)

有没有办法从 Javascript 敲响系统铃声？

铬 OSX

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T21:51:48.847

您链接到的答案适用于 Node，因为 Node 会`console.log`写入进程的[标准输出](http://www.linfo.org/standard_output.html)。实际上是系统的终端模拟器看到了`BEL`角色并发出哔哔声。`BEL`（与将 a放入文件并在该文件上运行没有什么不同`cat`。）

由于浏览器脚本无法访问标准输出，因此您很不走运。

但是，您可以[使用`<audio>`标签播放](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video)您选择的声音。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T21:42:23.413

你不能。想象一下那会有多烦人......我可以这样做，例如：

```
console.log(new Array(100000).join('\x07')); 
```

你会得到 99999 次哔哔声。

# android - libgdx-android：拦截返回键并确认退出

> ID：14802909
> 
> 赞同：14
> 
> 时间：2013-02-10T21:42:26.173
> 
> 标签：android, libgdx

使用 libgdx，在实际执行退出游戏的命令之前，如何拦截 android BACK 键以进行一些预处理（例如，要求用户确认）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-10T21:42:26.173

**1.启用后键捕捉。**

在实现的类中`ApplicationListener`

```
 @Override
   public void create() {
        ...
        Gdx.input.setCatchBackKey(true);
        ...
   } 
```

**2.处理Back Key的捕捉。**

在实现的类中`InputProcessor`

```
 @Override
   public boolean keyDown(int keycode) {
        ...
        if(keycode == Keys.BACK){
           // Optional back button handling (e.g. ask for confirmation)
           ...
           if (shouldReallyQuit)
             Gdx.app.exit();
        }
        return false;
   } 
```

# database - WebSQL，插入两个或多个表

> ID：14802910
> 
> 赞同：0
> 
> 时间：2013-02-10T21:42:27.283
> 
> 标签：database, html, web-sql

我正在使用 webSql，除了这个小东西之外，我有点想通了：假设我们有两个表（A 和 B），首先，我想插入表 A 并获取最新的 ID，我将作为辅助键插入到表 B 中。在这两种情况下，表都有自动递增 ID。

当我从底部示例中“警报（TableAId）”时，我得到了正确的值。但是，当我将它插入 TableB 时，它是空的。我认为问题可能是函数（tx，结果）是异步的，因此我在实际获得 TableAId 之前将其插入 TableB。

这里合适的解决方案是什么？

```
var TableAId = "";
tx.executeSql('INSERT INTO TableA (value) VALUES (?)', [myValue], 
    function(tx, results) {
        TableAId = results.insertId;
    }, errorCB);

tx.executeSql('INSERT INTO TableB (key_from_TableA) VALUES (?)', [TableAId], 
    function(tx, results) {
        TableBId = results.insertId;
    }, errorCB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:31:13.467

由于它是异步的，因此您必须等待第一个操作完成才能调用第二个操作。

```
tx.executeSql('INSERT INTO TableA (value) VALUES (?)', [myValue], 
    function(tx, results) {
        var TableAId = results.insertId;
        tx.executeSql('INSERT INTO TableB (key_from_TableA) VALUES (?)', [TableAId], 
             function(tx, results) {
                TableBId = results.insertId;
             }, errorCB);
    }, errorCB); 
```

# c# - pictureBox.ImageLocation 无法检索 HTMLElement

> ID：14802914
> 
> 赞同：1
> 
> 时间：2013-02-10T21:42:55.270
> 
> 标签：c#, webbrowser-control, picturebox

我正在尝试从网站获取图片元素并将其显示在 PictureBox 中。代码不返回任何错误，但没有显示任何内容。

我正在使用 WebBrowser 类并尝试使用在网页完成加载后调用的事件来显示元素

```
 void wb_DocumentCompleted(object sender,       WebBrowserDocumentCompletedEventArgs e)
    {
        pictureBox1.ImageLocation = wb.Document.GetElementById("ctl00_mainContent_identityBar_emblemImg").InnerText; // does nothing       
        label1.Text = "Last Played: " + wb.Document.GetElementById("ctl00_mainContent_lastPlayedLabel").InnerText; // works fine
    } 
```

这是我试图从中提取图像的网页示例：[http](http://halo.bungie.net/Stats/Halo3/Default.aspx?player=SmitherdxA27) ://halo.bungie.net/Stats/Halo3/Default.aspx?player=SmitherdxA27 ^这是该示例中橙色背景的鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:51:18.533

挺容易：

```
private void Form1_Load(System.Object sender, System.EventArgs e)
{
    webBrowser1.Navigate("http://halo.bungie.net/Stats/Halo3/Default.aspx?player=SmitherdxA27");
}

private void WebBrowser1_DocumentCompleted(object sender, System.Windows.Forms.WebBrowserDocumentCompletedEventArgs e)
{
    if ((e.Url.ToString() == "http://halo.bungie.net/Stats/Halo3/Default.aspx?player=SmitherdxA27"))
    {
        HtmlElement elem = webBrowser1.Document.GetElementById("ctl00_mainContent_identityStrip_EmblemCtrl_imgEmblem");
        string src = elem.GetAttribute("src");
        this.pictureBox1.ImageLocation = src;
    }
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:57:20.830

它不返回任何内容，因为图像标签不包含内部文本。您需要使用该元素并生成位图。

```
public Bitmap GetImage(string id)
    {
        HtmlElement e = webBrowser1.Document.GetElementById(id);
        IHTMLImgElement img = (IHTMLImgElement)e.DomElement;
        IHTMLElementRenderFixed render = (IHTMLElementRenderFixed)img;

        Bitmap bmp = new Bitmap(e.OffsetRectangle.Width, e.OffsetRectangle.Height);
        Graphics g = Graphics.FromImage(bmp);
        IntPtr hdc = g.GetHdc();
        render.DrawToDC(hdc);
        g.ReleaseHdc(hdc);

        return bmp;
    } 
```

# html - 背景位置不起作用

> ID：14802920
> 
> 赞同：0
> 
> 时间：2013-02-10T21:43:32.093
> 
> 标签：html, css, background, background-position

我在使用`background-position`.. 时遇到了一个奇怪的问题。它根本不起作用！

这是我的代码：

```
<div id="follow-wrapper">
    <p>Follow Us</p>
    <ul>
        <li><a href="#" id="facebook-img"></a></li>
        <li><a href="#" id="twitter-img"></a></li>
        <li><a href="#" id="googlplus-img"></a></li>
        <li><a href="#" id="linkedin-img"></a></li>
        <li><a href="#" id="youtube-img"></a></li>
        <li><a href="#" id="rss-img"></a></li>
    </ul>
</div>

#follow-wrapper ul li {
    display: inline-block;    
    margin-left:8px;    
    width: 16px;
    height: 16px;
    background-image: url('../img/follow.png');
    background-repeat: no-repeat;
}

#facebook-img{
    background-position: 0px 0px;
}

#twitter-img {
    background-position: 0px -26px;
}

#googleplus-img{
    background-position: 0px -52px;
}

#linkedin-img{
    background-position: 0px -78px;
}

#youtube-img{
    background-position: 0px -104px;
}

#rss-img{
    background-position: 0px -130px;
} 
```

结果如下： ![在此处输入图像描述](../Images/375bc42c8f7501e0e7fd67405603512a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:46:21.790

将 id 放在`li`标签上而不是锚点上。目前，该`li`标签接收部分必要的样式，例如`width`,`background-image`等...而锚标签接收样式的另一部分，即背景定位。所有这些样式都应该应用于`li`.

```
<div id="follow-wrapper">
    <p>Follow Us</p>
    <ul>
        <li id="facebook-img"><a href="#" ></a></li>
        <li id="twitter-img"><a href="#" ></a></li>
        <li id="googlplus-img"><a href="#"></a></li>
        <li id="linkedin-img"><a href="#"></a></li>
        <li id="youtube-img"><a href="#"></a></li>
        <li id="rss-img"><a href="#"></a></li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:46:03.360

这些`<a>`链接没有背景。您需要将 ID 移动到`<li>`元素。您目前没有使用 CSS 定位正确的元素。

IE

```
<div id="follow-wrapper">
    <p>Follow Us</p>
    <ul>
        <li id="facebook-img"><a href="#"></a></li>
        <li id="twitter-img"><a href="#"></a></li>
        <li id="googlplus-img"><a href="#"></a></li>
        <li id="linkedin-img"><a href="#"></a></li>
        <li id="youtube-img"><a href="#"></a></li>
        <li id="rss-img"><a href="#"></a></li>
    </ul>
</div> 
```

# mysql - 多行文本字段以分隔 MySQL 中的字段

> ID：14802928
> 
> 赞同：1
> 
> 时间：2013-02-10T21:44:52.447
> 
> 标签：mysql

所以我有一个地址 TEXT 字段，我需要将其拆分为单独的字段，例如：“physical_address”字段，内容如下：

```
| physical_address |
+------------------+
| 123 Street Name  |
| Suburb           |
| City             |
+------------------+ 
```

会成为：

```
| physical_address_1 | physical_address_2 | physical_address_3 |
+--------------------+--------------------+--------------------+
| 123 Street Name    | Suburb             | City               |
+--------------------+--------------------+--------------------+ 
```

现在这只是暂时的，因为我需要以上述格式将其导入应用程序，因此选择语句将是最佳选择 - 尽管我想它不会那么简单。

这种作品，但不完全是：

```
SELECT
physical_address,
SUBSTRING_INDEX(physical_address, CHAR(10), -5) AS a,
SUBSTRING_INDEX(physical_address, CHAR(10), -4) AS b,
SUBSTRING_INDEX(physical_address, CHAR(10), -3) AS c,
SUBSTRING_INDEX(physical_address, CHAR(10), -2) AS d,
SUBSTRING_INDEX(physical_address, CHAR(10), -1) AS e
FROM clients LIMIT 5 
```

使用 5 行 TEXT 值，可以完美运行，少一点，您会看到前几个字段（取决于行）将重复值。无法为此设置 SQL Fiddle，因为它似乎正在清理我的返回提要，所以这里是示例架构：

```
CREATE TABLE clients (id int unsigned auto_increment primary key, physical_address text);

INSERT INTO clients (id,physical_address) VALUES (1,"123 Street,\r\n123 Suburb,\r\n123 City");
INSERT INTO clients (id,physical_address) VALUES (2,"456 Street,\r\n456 Suburb,\r\n456 City,\r\n456 Province");
INSERT INTO clients (id,physical_address) VALUES (3,"789 Street,\r\n789 Suburb,\r\n789 City,\r\n789 Province,\r\n789 Country"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:21:31.163

假设您有某种方法可以将每个地址标识给特定用户等。如果是这样，那么您可以使用用户定义的变量来分配行号，然后使用带有表达式的聚合函数来*旋转数据：*`CASE`

```
select id,
  max(case when rn=1 then physical_address end) Physical_address1,
  max(case when rn=2 then physical_address end) Physical_address2,
  max(case when rn=3 then physical_address end) Physical_address3
from
(
  select t.physical_address,
    id,
    @row:=case when @prev=id then @row else 0 end +1 rn,
    @prev:=id
  from yourtable t
  cross join (select @row:=0, @prev:=0)r
  order by t.id
) src
group by id
order by id 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/cd3be/3)。

如果地址数据在单行中，则需要先将数据拆分为多行，然后再将其旋转为列。

我创建了一个函数和一个用于拆分数据的过程。我的代码基于[@Johan 在此处的回答](https://stackoverflow.com/questions/6152137/mysql-string-split/6153288#6153288)。

首先，我创建了`clients`表格的另一个版本：

```
CREATE TABLE clients_new
    (id int,`physical_address` varchar(256))
; 
```

然后我创建了函数/程序：

```
CREATE FUNCTION strSplit(x VARCHAR(5000), delim VARCHAR(12), pos INTEGER) 
RETURNS VARCHAR(256)
BEGIN
  DECLARE output VARCHAR(256);
  SET output = REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos)
                 , LENGTH(SUBSTRING_INDEX(x, delim, pos - 1)) + 1)
                 , delim
                 , '');
  IF output = '' THEN SET output = null; END IF;
  RETURN output;
END //

CREATE PROCEDURE BadTableToGoodTable()
BEGIN
  DECLARE i INTEGER;

  SET i = 1;
  REPEAT
    INSERT INTO Clients_new (id, physical_address)
      SELECT id, strSplit(physical_address, '\r\n', i) 
      FROM Clients
      WHERE strSplit(physical_address, '\r\n', i) IS NOT NULL;
    SET i = i + 1;
    UNTIL ROW_COUNT() = 0
  END REPEAT;
END // 
```

要执行该过程，您将使用：

```
call BadTableToGoodTable; 
```

完成拆分数据的过程后，您可以使用我提供的原始查询进行一些小的编辑，以包含新表和其他列（如果需要）：

```
select id,
  max(case when rn=1 then physical_address end) Physical_address1,
  max(case when rn=2 then physical_address end) Physical_address2,
  max(case when rn=3 then physical_address end) Physical_address3,
  max(case when rn=4 then physical_address end) Physical_address4,
  max(case when rn=5 then physical_address end) Physical_address5
from
(
  select t.physical_address,
    id,
    @row:=case when @prev=id then @row else 0 end +1 rn,
    @prev:=id
  from clients_new t
  cross join (select @row:=0, @prev:=0)r
  order by t.id
) src
group by id
order by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:47:24.677

您可以选择所有内容，然后使用 php.ini 中的 explode("/n") 对其进行切片。接下来根据需要将其保存到数据库中。它不可能从 mySQL 级别做到这一点

# elasticsearch - 在同一索引中使用不同的词干分析器

> ID：14802930
> 
> 赞同：1
> 
> 时间：2013-02-10T21:45:06.597
> 
> 标签：elasticsearch, lexical-analysis

我正在构建字典并希望使用 elasticsearch 作为搜索引擎。它应该支持多种语言，所以我的数据库看起来像这样：

```
| left_lang | right_lang | left_word | right_word |
| de        | en         | Schuh     | shoe       |
| da        | de         | sko       | Schuh      | 
```

在哪个级别可以定义不同的分析器设置（如词干分析器等）？我可以为文档的每个字段设置不同的设置吗？例如，在第一个文档中，left_word 使用德语设置，right_words 使用英语设置，而在第二个文档中，left_words 使用丹麦语设置，right_words 使用德语设置？或者我可以在类型或索引级别上定义这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:58:26.037

是的，您可以为每个字段定义这些设置。[您甚至可以使用“多字段](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)”映射定义使用多种语言设置进行分析的字段。

```
{
  "settings":{
     "index":{
        "analysis":{
           "analyzer":{
              "analyzer_english":{
                 "tokenizer":[...],
                 "filter":[...]
              },
              "analyzer_german":{
                 "tokenizer":[...],
                 "filter":[...]
              }
           }
        }
     }
  },
  "mappings":{
     "test":{
        "properties":{
           "left_word":{
              "analyzer":"analyzer_german",
              "type":"string"
           },
           "right_word":{
              "analyzer":"analyzer_english",
              "type":"string"
           },
           "combo_word":{
              "type":"multi_field",
              "fields":{
                 "combo_word":{
                    "analyzer":"analyzer_german",
                    "type":"string"
                 },
                 "combo_english":{
                    "analyzer":"analyzer_english",
                    "type":"string"
                 }
              }
           }
        }
     }
  }
} 
```

# mysql - MySQL将int范围（7-9）更改为8并取平均值

> ID：14802931
> 
> 赞同：2
> 
> 时间：2013-02-10T21:45:08.557
> 
> 标签：mysql

```
CREATE TABLE HrsPerWk_avg
  SELECT CrsTitle, AVG(HoursPerWkincClass)
  FROM FCQ GROUP BY CrsTitle; 
```

> 错误代码：1292。截断不正确的 DOUBLE 值：“7-9”

所以我想平均每周的所有时间，但我的数据是 7-9、10-12 等形式。如何获得平均 7-9 作为 (8) 和 10-12 作为 (11) 的值？

以下是数据示例：

```
HoursPerWkInclClass
7-9
4-6
7-9
7-9
10-12
10-12
7-9
10-12
4-6
16+ 
```

添加时`(8+5+8+8+11+11+8+11+5+16)=91/10=9.1`

这正是我想要它做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:52:38.190

假设您所有的范围值都是单个范围，而不是逗号分隔的列表，例如，您需要执行一些[子字符串操作](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)来检索两侧的值`-`并使用算术手动平均它们。 `AVG()`是聚合函数，不能用于此目的。

```
CREATE TABLE HrsPerWk_avg
SELECT
  CrsTitle,
  /* Extract the min/max values with substring operations, add them, divide by 2 */
  /* SUBSTRING_INDEX() gets the first value before - */
  (SUBSTRING_INDEX(HoursPerWkincClass, '-', 1) +
  /* SUBSTR() and LOCATE() get the second value after - */
  /* Both are added and divided by 2 */
  SUBSTR(HoursPerWkincClass, LOCATE('-', HoursPerWkincClass)+1)) / 2
FROM FCQ 
GROUP BY CrsTitle 
```

这是一个示例：[http ://sqlfiddle.com/#!2/96510/2](http://sqlfiddle.com/#!2/96510/2)

### 更新

要支持`16+`您在上面发布的值，您需要有条件地匹配类似的值，并使用子字符串操作`LOCATE()`修剪掉。`+`

```
SELECT
  CrsTitle,
  CASE
    /* Remove + if present */
    WHEN LOCATE('+', HoursPerWkincClass) >= 1 THEN REPLACE(HoursPerWkincClass, '+', '')
    ELSE
      /* Otherwise use the range finding stuff from above... */
      (SUBSTRING_INDEX(HoursPerWkincClass, '-', 1) +
      SUBSTR(HoursPerWkincClass, LOCATE('-', HoursPerWkincClass)+1)) / 2
  END AS the_avg
FROM FCQ 
```

[http://sqlfiddle.com/#!2/bdd43/2](http://sqlfiddle.com/#!2/bdd43/2)

# javascript - 如何使用 JavaScript 或 CSS 更改页面上的字符串

> ID：14802935
> 
> 赞同：1
> 
> 时间：2013-02-10T21:45:29.930
> 
> 标签：javascript, jquery, html

如何使用 JavaScript 或 CSS 更改页面上的字符串。

我将有大约 50 个元素，其中包含用逗号分隔的标签，即

```
 <a name="tagslist">Skrillex, dubstep, dance</a> 
```

我想使用 JavaScript 获取这些单词中的每一个并以不同的方式设置它们，以便它们看起来不像是用逗号分隔而是在不同的行上。问题是页面上可能有数量可变的标签列表。

有什么办法可以轻松实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:52:41.933

首先，摆脱上个千年并使用以下 HTML：

```
<div id="tagslist">Skrillex, dubstep, dance</div> 
```

然后你可以这样做：

```
var elm = document.getElementById('tagslist');
elm.innerHTML = elm.innerHTML.replace(/, /g,'<br />'); 
```

你当然可以做一些更复杂的事情，像这样：

```
elm.innerHTML = "<div class='tag'>"+elm.innerHTML.replace(/, /g,"</div><div class='tag'>")+"</div>"; 
```

或者，您可以使用真正的 DOM 方法：

```
var elm = document.getElementById('tagslist'), tags = elm.firstChild.nodeValue.split(", "),
    l = tags.length, i, div;
elm.removeChild(elm.firstChild);
for( i=0; i<l; i++) {
    div = elm.appendChild(document.createElement('div'));
    div.appendChild(document.createTextNode(tags[i]));
    // apply styles, className, etc. to div
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:50:55.800

```
$('a[name="tagslist"]').html(function(_, html){
    var arr = [],
        tags = html.split(/\s*,\s*/);

    for (var i=0; i<tags.length; i++)
        arr.push('<div class="whatever">' + tags[i] + '</div>');

    return arr.join('');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:52:17.310

考虑使用现有的库，例如[http://ivaynberg.github.com/select2/#tags](http://ivaynberg.github.com/select2/#tags)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T21:54:40.807

您必须为每个锚标签分别设置不同的样式。对于它们之间的换行符，您可以在它们之间放置 br 标签。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-10T21:51:45.883

你想做的事情是不可能的。一个更理想的解决方案是让 html 像这样呈现：

```
<span class="tagslist">
    <a href="#">Skrillex</a>
    <a href="#">dubstep</a>
    <a href="#">dance</a>
</span> 
```

这样，您就可以使用 CSS 完全控制样式。

# android - 在 startIntentSenderForResult 处的 NullPointer，inappbilling V3

> ID：14802937
> 
> 赞同：7
> 
> 时间：2013-02-10T21:45:43.127
> 
> 标签：android, nullpointerexception, in-app-purchase, in-app-billing

我有以下方法（第一次效果很好）：

```
public void TipUs(){ 
    String sku="tip_us";

    try {
    Bundle buyIntentBundle = mService.getBuyIntent(3, getPackageName(),
                                                   sku, "inapp", "TIP_US");
    PendingIntent pendingIntent = buyIntentBundle.getParcelable("BUY_INTENT");
    startIntentSenderForResult(pendingIntent.getIntentSender(), 
                               1001, new Intent(), 
                               Integer.valueOf(0), Integer.valueOf(0),
                               Integer.valueOf(0));
    } catch (RemoteException e) {
        e.printStackTrace();
    } catch (SendIntentException e) {
        e.printStackTrace();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
        if (requestCode == 1001) 
        {       
            int responseCode = data.getIntExtra("RESPONSE_CODE", 0);
            String purchaseData = data.getStringExtra("INAPP_PURCHASE_DATA");
            String dataSignature = data.getStringExtra("INAPP_DATA_SIGNATURE");

            if (resultCode == RESULT_OK) {
                try {
                    JSONObject jo = new JSONObject(purchaseData);
                    String sku = jo.getString("productId");
                }
                catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }
} 
```

如果我再次尝试使用相同的方法（根据 Google Play 中的设置应该可以），我会收到以下错误：

```
java.lang.NullPointerException
at com.appiclife.tipcal.Tip_Calculator.TipUs(Tip_Calculator.java:521)
at com.appiclife.tipcal.Tip_Calculator.onClick(Tip_Calculator.java:350)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

有没有人有这个错误，因为我完全使用了谷歌的演示，我应该改变什么？

编辑：看起来 mService 是空的（虽然奇怪的是，它只工作了一次，所以如果你不止一次购买同一个项目，这看起来几乎是个问题）。我有以下内容：

这是我的代码：

```
OnCreate()

Intent("com.android.vending.billing.InAppBillingService.BIND"),
                    mServiceConn, Context.BIND_AUTO_CREATE); 
```

和：

```
IInAppBillingService mService;

ServiceConnection mServiceConn = new ServiceConnection() {

     public void onServiceConnected(ComponentName name, 
              IBinder service) {

                System.out.println("Test!");
               mService = IInAppBillingService.Stub.asInterface(service);
     }

     public void onServiceDisconnected(ComponentName name) {
       mService = null;
     }

}; 
```

onServiceConnected 永远不会被调用。我在手册中没有看到这个：http: [//developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)

但我尝试将以下服务添加到清单中，但没有结果（我再次删除它，我应该在那里声明服务吗？）：

```
<service android:name="com.android.vending.billing.IInAppBillingService" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-28T16:19:01.040

我遇到了同样的问题。您需要先消费已购买的商品，然后用户才能再次购买相同的 SKU 商品。

当您设置 buyIntentBundle 变量时，您可以检查 RESPONSE_CODE。如果 RESPONSE_CODE 为 7，那么用户之前的购买需要被应用消费。

RESPONSE_CODE ID 可在此处找到：http: [//developer.android.com/google/play/billing/billing_reference.html#billing-codes](http://developer.android.com/google/play/billing/billing_reference.html#billing-codes)

使用此示例代码查询购买的商品：http: [//developer.android.com/google/play/billing/billing_integrate.html#QueryPurchases](http://developer.android.com/google/play/billing/billing_integrate.html#QueryPurchases)

INAPP_PURCHASE_DATA_LIST 中的数据是带有“purchaseToken”的 JSON 字符串。将此令牌传递给 CONSUME 函数。

一旦您消费了购买，用户就可以再次购买。

# sql - 以邻接的方式加入递归

> ID：14802939
> 
> 赞同：0
> 
> 时间：2013-02-10T21:46:11.433
> 
> 标签：sql, postgresql, recursion, hierarchical-data, addition

我有这样的事情：

```
CREATE TABLE categories (
id varchar(250) PRIMARY KEY,
name varchar(250) NOT NULL,
parentid varchar(250)
);

CREATE TABLE products (
id varchar(250) PRIMARY KEY,
name varchar(250) NOT NULL,
price double precision,
category varchar(250) NOT NULL
);

INSERT INTO categories VALUES ('1', 'Rack', '');
INSERT INTO categories VALUES ('2', 'Women', '1');
INSERT INTO categories VALUES ('3', 'Shorts', '2');

INSERT INTO products VALUES ('1', 'Jean', 2.99, '3');
INSERT INTO products VALUES ('2', 'Inflatable Boat', 5.99, '1'); 
```

现在，如果我想查看每个类别的产品总价，我可以这样做：

```
SELECT
categories.name,
SUM(products.price) AS CATPRICE
FROM
categories,
products
WHERE products.category = categories.id
GROUP BY categories.name
; 
```

产生输出：

```
 name  | catprice
--------+----------
 Rack   |     5.99
 Shorts |     2.99
(2 rows) 
```

但请注意，“Shorts”是“Rack”的祖先。我想要一个会产生如下输出的查询：

```
 name  | catprice
--------+----------
 Rack   |     8.98
(1 row) 
```

以便将所有产品价格添加到根类别下。类别表中有多个根类别；为简单起见，只显示了一个。

这是我迄今为止所拥有的：

```
-- "nodes_cte" is the virtual table that is being created as the recursion continues
-- The contents of the ()s are the columns that are being built
WITH RECURSIVE nodes_cte(name, id, parentid, depth, path) AS (
-- Base case?
 SELECT tn.name, tn.id, tn.parentid, 1::INT AS depth, tn.id::TEXT AS path FROM categories AS tn, products AS tn2 
 LEFT OUTER JOIN categories ON tn2.CATEGORY = categories.ID
 WHERE tn.parentid IS NULL
UNION ALL
-- nth case
 SELECT c.name, c.id, c.parentid, p.depth + 1 AS depth, (p.path || '->' || c.id::TEXT) FROM nodes_cte AS p, categories AS c, products AS c2 
 LEFT OUTER JOIN categories ON c2.CATEGORY = categories.ID
 WHERE c.parentid = p.id
)
SELECT * FROM nodes_cte AS n ORDER BY n.id ASC; 
```

我不知道我做错了什么。上述查询返回零个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:07:56.673

您的递归查询稍微偏离了一点。试试这个：

编辑——要使用 SUM 进行这项工作，请使用以下命令：

```
WITH RECURSIVE nodes_cte(name, id, id2, parentid, price) AS (
-- Base case?
 SELECT c.name, 
  c.id, 
  c.id id2,
  c.parentid, 
  p.price
 FROM categories c
    LEFT JOIN products p on c.id = p.category
 WHERE c.parentid = ''
UNION ALL
-- nth case
 SELECT n.name, 
  n.id, 
  c.id id2,
  c.parentid, 
  p.price
 FROM nodes_cte n
  JOIN categories c on n.id2 = c.parentid
  LEFT JOIN products p on c.id = p.category
)
SELECT id, name, SUM(price) FROM nodes_cte GROUP BY id, name 
```

这是小提琴：[http ://sqlfiddle.com/#!1/7ac6d/19](http://sqlfiddle.com/#!1/7ac6d/19)

祝你好运。

# maps - GoogleMaps API v3 - 从信息窗口中的链接触发事件

> ID：14802940
> 
> 赞同：0
> 
> 时间：2013-02-10T21:46:20.430
> 
> 标签：maps

我有一个右键单击上下文菜单的侦听器，它允许我执行特定于该特定信息窗口的操作。例如，这是我打开并填充方向面板的代码：

```
google.maps.event.addListener(contextMenu, 'menu_item_selected', function(latLng, eventName){
                    switch(eventName){
                        case 'directions_from_click':
                            showDirections();
                            geocoder.geocode({latLng: latLng}, function(results, status) {
                              if (status == google.maps.GeocoderStatus.OK) {
                                if (results[0]) {
                                  fAddress = results[0].formatted_address;
                                  $('#start').val(fAddress);
                                  $('#panelWrapper').focus();
                                }
                              }
                            });
                            $('#panelWrapper').focus();
                            break;
                        case 'directions_to_click':
                            showDirections();
                            geocoder.geocode({latLng: latLng}, function(results, status) {
                                  if (status == google.maps.GeocoderStatus.OK) {
                                    if (results[0]) {
                                      fAddress = results[0].formatted_address;
                                      $('#end').val(fAddress);
                                      $('#panelWrapper').focus();
                                    }
                                  }
                                });
                            $('#panelWrapper').focus();
                            break;
                    }

                }); 
```

除了右键单击上下文菜单之外，我还希望在信息窗口中有一个链接，该链接执行相同的操作 onclick：

```
<a class="fromLink">Directions from here</a> 
```

如何为此链接添加一个侦听器以执行类似于我的上下文菜单的操作？我一直在试验 addDomListener 函数，但我不确定这是否正是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:04:18.143

我在 API 中找不到任何东西，所以我最终通过 onclick 事件将 LatLng 传递给一个函数来填充方向输入。相当丑陋，但有点像这样：

```
function addMessageMarker(marker, addlInfo){

    var position = String(marker.getPosition());
    var fromLink = '<a class="infoLink" onClick="getFrom(&quot;' + position +  '&quot;)">Directions from here</a> - '; 
    ... //bunch of other stuff
}
function getFrom(position) {
                    showDirections();
                    //Convert the string value into a latLng
                    var latLng = position.replace("(","");
                    latLng = latLng.replace(")","");
                    latLng = latLng.replace(" ","");
                    latLngArr = latLng.split(",");
                    lat = parseFloat(latLngArr[0]);
                    lng = parseFloat(latLngArr[1]);

                    latLng = new google.maps.LatLng(lat,lng);

                    geocoder.geocode({latLng: latLng}, function(results, status) {
                      if (status == google.maps.GeocoderStatus.OK) {
                        if (results[0]) {
                      fAddress = results[0].formatted_address;
                      $('#start').val(fAddress);

                        }
                      }
                    });
                    $('#panelWrapper').focus();
                } 
```

# python - 文件传输代码python

> ID：14802945
> 
> 赞同：2
> 
> 时间：2013-02-10T21:46:49.083
> 
> 标签：python

我在这里找到了代码：[Send a file through sockets in Python](https://stackoverflow.com/questions/9382045/send-a-file-through-sockets-in-python) (the selected answer)

但是我会再次在这里发布..

```
server.py
import socket
import sys
s = socket.socket()
s.bind(("localhost",9999))
s.listen(10) 
while True:
    sc, address = s.accept()

    print address
    i=1
    f = open('file_'+ str(i)+".txt",'wb') #open in binary
    i=i+1
    while (True):       
        l = sc.recv(1024)
        while (l):
            print l #<--- i can see the data here
            f.write(l) #<--- here is the issue.. the file is blank
            l = sc.recv(1024)
    f.close()

    sc.close()

s.close()

client.py

import socket
import sys

s = socket.socket()
s.connect(("localhost",9999))
f=open ("test.txt", "rb") 
l = f.read(1024)
while (l):
    print l
    s.send(l)
    l = f.read(1024)
s.close() 
```

在服务器代码上， print l 行打印文件内容..所以这意味着内容正在传输..但是文件是空的？？

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:51:26.117

您可能正试图在程序运行时检查文件。`f.close()`该文件正在被缓冲，因此在执行该行或写入大量数据之前，您可能看不到其中的任何输出。`f.flush()`在行后添加调用以`f.write(l)`实时查看输出。请注意，它会在一定程度上损害性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:36:31.493

好吧，服务器代码无论如何都不起作用，我已经对其进行了修改以使其正常工作。

该文件是空的，因为它卡在了文件中，`while True`并且从未关闭文件。

也在`i=1`循环内，所以它总是写入同一个文件。

```
import socket
import sys
s = socket.socket()
s.bind(("localhost",9999))
s.listen(10)
i=1
while True:
    print "WILL accept"
    sc, address = s.accept()
    print "DID  accept"

    print address
    f = open('file_'+ str(i)+".txt",'wb') #open in binary
    i += 1
    l = sc.recv(1024)
    while (l):
        f.write(l) #<--- here is the issue.. the file is blank
        l = sc.recv(1024)
    f.close()

    sc.close()

print "Server DONE"
s.close() 
```

# jquery - 使用多个对象 jquery 解析 json 时遇到问题

> ID：14802952
> 
> 赞同：0
> 
> 时间：2013-02-10T21:47:30.087
> 
> 标签：jquery, json

我正在尝试使用 getJSON 解析 JSON 响应，并且通过对象解析的成功有限。

这是我正在使用的 jquery，它返回 JSON 中第一个日期的适当值。我需要它来返回所有日期。下面的代码不会这样做有什么特别的原因吗？

```
$.getJSON('result.json', 

                   function(data) {

            var dest = [];

            for (var i = 0; i < data.length; ++i) {

                dates = data[i].dates[i];      
                visitors = data[i].dates[i].items[i];

                dest.push([dates.date,visitors.value]); 

            }
            alert(dest);

        }); 
```

这是JSON：

```
[
  {
"type": "visitors-unique",
"dates": [
  {
    "date": "2013-02-10",
    "items": [
      { "value":"117" }
    ]
  },
  {
    "date": "2013-02-09",
    "items": [
      { "value":"427" }
    ]
  },
  {
    "date": "2013-02-08",
    "items": [
      { "value":"403" }
    ]
  },
  {
    "date": "2013-02-07",
    "items": [
      { "value":"227" }
    ]
  },
  {
    "date": "2013-02-06",
    "items": [
      { "value":"289" }
    ]
  },
  {
    "date": "2013-02-05",
    "items": [
      { "value":"246" }
    ]
  },
  {
    "date": "2013-02-04",
    "items": [
      { "value":"236" }
    ]
  }
]
  }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:00:04.260

问题是当你有嵌套数组时你只有一个循环。您的代码将尝试获取第一个队列中的第一个日期，然后是第二个队列中的第二个日期，依此类推。要获取每个队列中的每个日期，您需要嵌套循环：

```
$.getJSON('result.json', 
  function(data) {
    var dest = [];
    for (var i = 0; i < data.length; ++i) {
      for (var j = 0; j < data[i].dates.length; j++) {
        dates = data[i].dates[j];      
        visitors = data[i].dates[j].items[0];
        dest.push([dates.date,visitors.value]); 
      }
    }
    alert(dest);
  }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:52:43.853

这条线是问题

```
visitors = data[i].dates[i].items[i]; 
```

`items`因此，在您尝试读取的第二次迭代中只有一个值`.items[1]`会失败。

将行更改为

```
visitors = data[i].dates[i].items[0]; 
```

# django - 如何在我的模型中设置单词同义词？

> ID：14802959
> 
> 赞同：1
> 
> 时间：2013-02-10T21:47:52.403
> 
> 标签：django, django-models

Django 菜鸟在这里。我正在构建字典/词典并希望将单词同义词相互链接。

**模型.py**

```
class Word(models.Model):
    word = models.Charfield()

class Synonym(models.Model):
    word_from = models.ForeignKey(Word, blank=True, null=True, related_name="word_from")
    word_to = models.ForeignKey(Word, blank=True, null=True, related_name="word_to") 
```

你如何获得相关的同义词？我正在使用generic.DetailView。这也是建立单词之间联系的正确方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:08:14.833

Assuming a word could have several synonyms and every synonym could also be synonymous to other words, you can use Django's [ManyToManyField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.symmetrical), referencing `self`.

Here's such an example:

```
class Word(models.Model):
    word = models.CharField(...)
    synonyms = models.ManyToManyField("self") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:22:23.940

我不明白`word_from`and的目的是什么`word_to`。但是最简单的单词和同义词模型可以通过一张表来实现：

```
class Word(models.Model):
    word = models.Charfield()
    synonym = models.ForeignKey(
        'self', null=True, blank=True,
        related_name='synonyms') 
```

# powershell - 将整数 x.xxxxx 格式化为 xx.xxx

> ID：14802963
> 
> 赞同：10
> 
> 时间：2013-02-10T21:48:20.697
> 
> 标签：powershell, formatting

我有一个号码`$int`，，

```
$int = 9.5587452369 
```

我希望这个数字采用我试过的 xx.xxx 格式：

```
$int = "{0:N3}" -f ($int)
$int = "{0:D2}" -f ($int) 
```

或者

```
$int = "{0:D2}" -f ("{0:N3}" -f ($int)) 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T21:51:56.357

使用`toString()`指定格式的方法。

```
PS > $int = 9.5587452369
PS > $int.ToString("00.000")
09,559 
```

或者

```
PS > "{0:00.000}" -f $int
09,559 
```

[在MSDN - 自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)中阅读更多信息

# playframework-2.1 - 如何在子文件夹中移动控制器

> ID：14802969
> 
> 赞同：1
> 
> 时间：2013-02-10T21:49:05.743
> 
> 标签：playframework-2.1

我正在使用 play framework 2.1，但出现了一个奇怪的错误。
我正在尝试将控制器移动到子文件夹中，例如：

> 控制器 ->
> - Application.java
> - 页面 ->
> - - - -Index.java
> - - - -Second.java

在路线中我有：

> GET / controllers.pages.Index.main();

错误：

> 值 main 不是对象 controllers.pages.Index 的成员

这是一个错误？关于尼古拉

**发现已解决** 的错误：您无法访问父类的方法，您必须覆盖它们：

```
public static Result main(String page, String method)
{
    return ParentClass.main(page,method);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:48:42.157

我认为它在最终 Play 2.1 中没有得到修复（或者我错过了一些东西）——在子类中没有“覆盖”的方法的路由仍然返回错误。

Java 中的 AFAIK 根本不可能真正覆盖静态方法。

无论如何......请记住，所有设计操作都是静态方法，因此，您不需要使用路由，`Child.methodOfParent()`而您可以使用`Parent.methodOfParent()`，您作为解决方案展示的东西应该被视为`overloading`而不是`overriding`.

另一方面，从我的角度来看，我宁愿建议根本不要使用这种模式。Play 的动作应该是独立于其他动作的独立方法，如果您需要在两个动作中使用（几乎）相同的功能，使用其他静态方法（不是动作）可能是更好的概念，即。在新`utils`包中使用参数处理两个动作的主体。恕我直言，这将是一种更安全的方法，正如您所看到的 - 仍然存在一些“未知数”。

# c - 具有十六进制负值的 sscanf

> ID：14802970
> 
> 赞同：0
> 
> 时间：2013-02-10T21:49:14.550
> 
> 标签：c, hex, scanf, negative-number

我需要将十六进制的 4 位值转换为十进制，所以我使用了 ssscanf，但它不适用于负数……例如， `int test;` `sscanf("0xfff6","%x",&test);` 返回 65526 而不是 -10。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:53:52.073

您必须手动完成。`x`转换说明符执行从 an 的转换`unsigned int`，它需要一个指向 的类型的参数`unsigned int`。例如使用演员表：

```
unsigned int test;
int result;

sscanf("0xfff6","%x", &test);
result = (int16_t) test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:54:15.570

的值`test`大于 32k 的事实表明它是一个“长”整数（32 位）......因此它看不到符号位。您必须将值读入无符号短整数，然后将其类型转换为有符号短整数，才能看到负值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:55:42.000

我认为核心问题是您假设 int 是 16 位，而在您的系统中它似乎比这更大。

Int 始终是有符号的，因此它报告结果为 65525 的事实证明 INT_MAX 大于 36727 的 16 位值。

尝试将您的代码从 int text 更改为 short test，我怀疑它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T21:57:08.770

这可能是因为您的整数超过 16 位宽，所以这`fff6`确实是正数 - 您可能需要`fffffff6`甚至更宽才能正确表示负数。

要解决此问题，只需将以下内容放在`scanf`：

```
if (val > 32767) val -= 65536; 
```

这将设置最高位（以 16 位计）的值调整为负数。

# iphone - 键盘出现时的UIScrollView

> ID：14802975
> 
> 赞同：0
> 
> 时间：2013-02-10T21:50:34.667
> 
> 标签：iphone, ios, uiview, uiscrollview, uinavigationcontroller

[ScrollView 阻塞 NavigationViewController](https://stackoverflow.com/questions/14819262/scrollview-blocking-navigationviewcontroller)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:06:27.030

也许您可以尝试设置当前视图的框架..例如：

```
CGRect r = self.view.frame;
self.view.frame = CGRectMake(r.origin.x, r.origin.y, r.size.width, r.size.height-100); 
```

并且当用户完成键盘操作后，添加 100 以将其恢复...（而不是 100，您应该从包含键盘高度、位置的通知对象中获取值）...

# c++ - 初始化列表不按顺序

> ID：14802976
> 
> 赞同：1
> 
> 时间：2013-02-10T21:50:38.990
> 
> 标签：c++, initialization, initializer-list

所以我创建了一个类`Dictionary`，它继承自一个基类`IEnumerable`并包含一个类型的成员`List`。`List`有一个`const unsigned int&`存储和公开其项目计数的成员。

这是`Dictionary`的构造函数。

```
Dictionary() : _list(), IEnumerable(_list.Count)
{ } 
```

我将`const unsigned int&`“初始化”列表中的`IEnumerable`. 问题是，在's （ type 的成员）`IEnumerable`之前调用了 's 的初始化程序，所以我传入了一个无效的引用。`_list``List`

有没有办法强制成员`_list`在基类之前初始化`IEnumerable`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:56:14.320

基类总是在直接成员之前初始化。（事实上​​，mem-initializer-list 中的基和成员的顺序没有任何作用——顺序总是由类定义确定。）

一种解决方法是将您的成员移动到另一个基类。

```
struct HasList {
    List _list;
    // Might want custom constructors here.
};

class Dictionary
    : private HasList,
      public IEnumerable
{
    // ... 
```

（这是`private`继承的少数有用用途之一。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:53:57.207

1.  在继承类的构造函数之前调用基类构造函数。
2.  成员按照**声明**的顺序进行初始化（通常在头文件中），初始化列表的顺序无关紧要。

# jsf - 如何在节点单击时打开新页面

> ID：14802979
> 
> 赞同：0
> 
> 时间：2013-02-10T21:51:04.017
> 
> 标签：jsf, jsf-2

我有一个简单的例子`p:tree`。

```
<p:tree id="tree" styleClass="treeskin" value="#{TreeViewController.root}" var="node" dynamic="true" animate="true"
        selectionMode="single" selection="#{TreeViewController.selectedNode}" highlight="true">

    <p:ajax event="select" listener="#{TreeViewController.onNodeSelect}" update=":treeform:outputComponent"/>
    <p:ajax event="expand" listener="#{TreeViewController.onNodeExpand}" />
    <p:ajax event="collapse" listener="#{TreeViewController.onNodeCollapse}" />

    <p:treeNode styleClass="treeskin">
        <h:outputText value="#{node}"/>
    </p:treeNode>
</p:tree> 
```

我很感兴趣当我点击一个节点打开一个新页面时是否有可能。我发现`onNodeClick`使用 JavaScript 可以打开一个新页面。但如果可能的话，我想发送隐藏值，稍后我将用作键。有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:26:44.930

您可以尝试`<h:link/>`在`<p:treeNode/>`. 使用以下构造

```
<h:link value="#{node}" outcome="destination?includeViewParams=true">
   <f:param name="theParam" value="#{node.property}"/>
</h:link> 
```

该`includeViewParams=true`位将确保您尝试传递的参数使其通过请求到达下一页

# ios - Objective-c RegEx 变量名（$1、$2 等）

> ID：14802981
> 
> 赞同：1
> 
> 时间：2013-02-10T21:51:09.783
> 
> 标签：ios, objective-c, regex, string, variables

我在 Objective-C 中有一个正则表达式，我需要知道如何获取某个变量...

我想找到一个字符串，其中某处有字母“a”，后面跟着任意数字（包括零）的 B、C 和 D，并且在第一个非 B、C、DI 想关闭我的搜索语句. 然后我想用 F 替换 A 并将 F 添加到我的搜索字符串的末尾。

例如：“ZYXABCBBDBCBDEJKS”将搜索并返回：“ZYX **ABCBBDBCBDE** JKS”......所以我现在使用的字符串是“ABCBBDBCBDE”，我希望这个字符串变成这个字符串“FBCBBDBCBDEF”然后放回原始字符串...所以最终返回的字符串将是“ZYX ***F*** BCBBDBCBDE ***F*** JKS”

我是 RegEx 的新手，但我用下面的 Objective-c 代码试了一下，但它没有用......我认为这是因为我在第二行代码（在“withTemplate”部分）上的变量是错了...我不应该使用“$2”或“$1”吗？

代码：

```
regex = [NSRegularExpression regularExpressionWithPattern:@"A(B|C|D)*([^B|C|D])"
                                                          options:0
                                                            error:nil];
modifiedString = [regex stringByReplacingMatchesInString:myString
                                                         options:0
                                                           range:NSMakeRange(0, [htmlstring length])
                                                    withTemplate:@"F$1$2F"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:54:57.353

在您的正则表达式中 -`(B|C|D)*`只会捕获最后一个匹配的字符`(B|C|D)`，因为`*`它不在捕获的组中。此外，在角色类中，您不需要`pipe`像在第 3 部分中那样使用 a 来交替。所以，要么你使用`character class`，要么你使用`pipe`分组交替。在这种特殊情况下，我建议在这两个地方都使用字符类。

因此，您可以尝试将您的正则表达式更改为：

```
"A([BCD]*)([^BCD])" 
```

# ruby-on-rails - Rspec 因嵌套奇异路由而失败

> ID：14802982
> 
> 赞同：2
> 
> 时间：2013-02-10T21:51:13.707
> 
> 标签：ruby-on-rails, rspec

我有以下 routes.rb 文件（部分）：

```
resource :user do
  resources :orders do
    post :verify, :on => :collection
  end
end 
```

我的控制器规格如下所示：

```
require 'spec_helper'

describe OrdersController do
  describe "#verify" do
    it "verifies a recipe" do
      post :verify
    end
  end
end 
```

规范失败，出现 ActionController::RoutingError No route matches {:controller=>"orders", :action=>"verify"} 即使路由存在并且在浏览器中正确响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:55:32.667

根据您的路线，描述应如下所示：

```
describe Users::OrdersController do
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:57:05.373

啊，我的坏！我完全忘记了我有 rails-translate-routes gem 并且我没有设置默认语言环境！

# javascript - 通过javascript动态设置css过滤器

> ID：14802986
> 
> 赞同：13
> 
> 时间：2013-02-10T21:51:43.277
> 
> 标签：javascript, css

我想应用这个过滤器：

```
-webkit-filter: blur(); 
```

通过 JavaScript 动态地。

我在网上到处找，几乎什么都找不到。

我想通过 DOM 通过 JavaScript 动态设置属性。

```
document.getElementById("element").style 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-10T21:53:13.820

很简单：

```
document.getElementById("element").style.webkitFilter = "blur(1px)"; 
```

# node.js - jquery ajax成功事件处理程序没有被调用

> ID：14802989
> 
> 赞同：0
> 
> 时间：2013-02-10T21:51:51.573
> 
> 标签：node.js, jquery, client-side

*   Node.js (express) 网络服务器
*   Web 服务器中的请求处理程序

> ```
> app.get('/documents/ajax/:id.:format?', function(req, res) {
>    console.log ('Request Received');
>    var body = 'hello world';
>    res.writeHead(200, {
>     'Content-Length': body.length,
>     'Content-Type': 'text/plain'
>    });
> 
> }) 
> ```

*   来自客户端javascript的ajax请求

> ```
>  $.ajax({
>     url : "/documents/ajax/" + item,
>     success : function(msg) {
>       alert ("success" + msg);
>     },
>     error : function(request, status, error) {
>       alert("Error, returned: " + request);
>       alert("Error, returned: " + status);
>       alert("Error, returned: " + error);
> 
>     }
>   }); 
> ```

*   我能够在服务器端接收请求并发送 4 个请求

但是我的成功事件没有在客户端 JS 中被调用。此外，当我停止我的网络服务器时，我看到我的错误处理程序被调用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:10:52.110

我不得不 res.end 在服务器请求处理程序中。之后，我能够在客户端 JS 中生成成功事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:08:52.027

主要问题是您没有结束响应，因此服务器实际上从未向客户端发送任何内容。服务器应该以文件、重定向、一些文本等内容进行响应。您需要使用`res.end`, `res.send`, `res.sendfile`, `res.redirect`, `res.render`... 完成回调。请参阅[文档](http://expressjs.com/api.html)。

此外，您想使用 express`res.set`来设置 http 标头：

```
app.get('/documents/ajax/:id.:format?', function(req, res) {
   console.log ('Request Received');
   var body = 'hello world';
   res.set({'Content-Type': 'text/plain'});
   res.send(body);
}); 
```

`200`是默认响应代码，因此您无需指定它，并且将为您计算长度。这些东西通常更容易通过以下方式从命令行调试`curl`：

```
curl http://localhost:3000/documents/ajax/1 
```

和

```
curl -I http://localhost:3000/documents/ajax/1 
```

# visual-studio-2010 - 通过单击一次发布时找不到文件 'obj\x86\Debug\Apteka.exe'

> ID：14802993
> 
> 赞同：0
> 
> 时间：2013-02-10T21:52:02.060
> 
> 标签：visual-studio-2010, clickonce

通过单击一次发布我的项目时，我遇到此错误找不到文件 'obj\x86\Debug\Apteka.exe'。当我重建它时，它工作正常。我仅在从 Click Once 发布时收到此错误。我正在使用 Windows Vista 和 Visual Studio Professional 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:33:39.570

尝试使用 Build 菜单上的 Publish 选项而不是 Publish 页面上的 Build 按钮进行发布。这使用不同的路径来进行构建。有时，当使用发布页面中的按钮时，会发生竞争情况，最终导致它在构建完成之前尝试构建部署包。

# java - 为什么这个 ActionListener 不起作用？

> ID：14802995
> 
> 赞同：0
> 
> 时间：2013-02-10T21:52:13.837
> 
> 标签：java, swing, actionlistener

我只是在学习使用`ActionListener`s 并使小部件工作。这是我的简单程序，我想打印我输入的任何内容`JTextField`.

**文本查看器1**

```
import javax.swing.JFrame;

public class TextViewer1 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        JFrame frame = new TextFrame1();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

    }

} 
```

**文本框1**

```
import java.awt.event.ActionListener;
import javax.swing.*;

public class TextFrame1 extends JFrame {
    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 200;

    public TextFrame1() {
        createComponents();
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
    }

    private void createComponents() {
        JPanel panel = new JPanel();
        add(panel);

        JTextField textbox = new JTextField(20);
        panel.add(textbox);

        String TYPED = textbox.getText();
        ActionListener sendsText = new TextListener();
        textbox.addActionListener(sendsText);

    }
} 
```

**文本监听器**

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class TextListener implements ActionListener {

    /**
     * @param args
     */

    public void actionPerformed(ActionEvent event) {

        System.out.println(TYPED);

    }

} 
```

所以问题是变量`TYPED`'TextListener'中的变量，它想要创建这个变量并初始化它。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:01:17.713

> 所以问题是'Text Listener'中的变量TYPED，它想要创建这个变量并初始化它。

这是因为该变量在您的`TextListener`. 您创建了一个名为`TYPED`in的局部变量，`TextFrame1#createComponents`但这`actionPerformed`在`TextListener`.

实际上，您正在将变量分配给 的初始文本，`JTextField`默认情况下为空`String`。如果要获取组件的当前文本，可以将其传递给构造函数：

```
class TextListener implements ActionListener {

   private final JTextField textField;
   public TextListener(JTextField textField) {
    this.textField = textField;
   }

   @Override
   public void actionPerformed(ActionEvent event) {

      System.out.println(textField.getText());
   }
} 
```

创建`TextListener`这样的：

```
ActionListener sendsText = new TextListener(textbox); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:01:31.970

TYPED 未声明为变量。所以要么声明它，要么用“”包围它。

编辑：是的，您确实声明了它，但是作为 TextFrame1 类中 createComponents 函数中的局部变量。

您需要传递如下值：

```
public class TextListener implements ActionListener {
    private String typed;

    public TextListener(String typed) {
        this.typed = typed;
    }

    /**
     * @param args
     */

    public void actionPerformed(ActionEvent event) {

        System.out.println(typed);

    }

} 
```

哦，变量不应该是大写的，而是小写的。大写用于常量。

编辑 2：我的错，那个监听器构造函数应该接受 String 类型，而不是 int 类型。我修复了代码。至于您的其他问题，那是因为您现在需要将输入结果传递给侦听器声明。

```
 ActionListener sendsText = new TextListener(TYPED); 
```

或者只是这样做：

```
 ActionListener sendsText = new TextListener(textbox.getText()); 
```

# php - 最接近给定整数的素数

> ID：14802996
> 
> 赞同：-4
> 
> 时间：2013-02-10T21:52:16.437
> 
> 标签：php

大家好，我正在尝试创建一个 PHP 函数来查找与给定整数最近的素数：例如，如果您将函数命名为“nearest_prime”，它将像这样使用：

```
 $a = 399823;
            $b = nearest_prime($a);
            echo $b; 
```

*请记住，整数可以是任意大小，最接近的素数可以高于或低于整数。如果两个整数与整数等距，则返回较小的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:14:06.530

我只是简单地测试了这个，但它似乎有效。肯定有更有效的方法。

```
function nearest_prime($num)
{
    $up = NULL;
    $down = NULL;
    $counter = 1;
    while($up === NULL && $down === NULL)
    {
        $going_up = $num + $counter;
        $prime_up = TRUE;
        for ($k = 2;$k < $going_up;$k++)
        {
            if (($going_up % $k) === 0)
            {
                $prime_up = FALSE;
            }
        }
        if ($prime_up === TRUE)
        {
            $up = $going_up;
        }

        $going_down = $num - $counter;
        $prime_down = TRUE;
        for ($k = 2;$k < $going_down;$k++)
        {
            if (($going_down % $k) === 0)
            {
                $prime_down = FALSE;
            }
        }
        if ($prime_down === TRUE)
        {
            $down = $going_down;
        }

        $counter++;
    }

    $return = array();
    if(!is_null($up))
    {
        $return[] = $up;
    }
    if(!is_null($down))
    {
        $return[] = $down;
    }
    return implode(',',$return);
} 
```

# ffmpeg - 如何在 FFmpeg 中为 MP4 设置缓冲区？

> ID：14802998
> 
> 赞同：1
> 
> 时间：2013-02-10T21:52:22.667
> 
> 标签：ffmpeg, buffer, mp4

我为我的网络播放器将视频转换为 MP4。我的问题是：我的视频没有缓冲。我必须等到整个视频下载完毕，然后才能播放视频。

这是我的`exec()`命令：

```
ffmpeg -i uploaded_files/'.$le["file"].' -vcodec libx264 -pix_fmt yuv420p flash/'.$le["file"].'.mp4 
```

是否有任何缓冲选项？我的 MP4 大小和质量都很好。但是如果没有缓冲，那就不好了。

这是`exec()`我使用的命令的错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:30:16.357

> 我的视频没有缓冲。我必须等到整个视频下载完毕，然后才能播放视频。

`-movflags faststart`在编码时使用该选项，例如

```
ffmpeg -i input.mp4 […] -movflags faststart output.mp4 
```

或者，或者，[`qt-faststart`](https://github.com/danielgtaylor/qtfaststart)在文件上运行。

文件没有立即流式传输的原因是它们的[MOOV atom](http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html)位于文件的末尾，为了播放它，客户端需要解析此信息。`qt-faststart`只会移动该原子，您的文件将立即开始播放。