# StackOverflow 问答 14992000-14992999

# ruby-on-rails - Rails：无法嵌套 content_tag

> ID：14992000
> 
> 赞同：3
> 
> 时间：2013-02-20T23:38:38.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我编写了一个 Rails 助手来创建一个嵌套的 HTML 列表。但是，这不能正确渲染。请问我做错了什么？

**帮手**

```
content_tag :ul do
  [1, 2].each do |x|
    content_tag(:li, x)
    content_tag :ul do
      ['a', 'b'].each do |y|
        content_tag(:li, y)
        content_tag :ul do
          ['i', 'ii'].each do |z|
            content_tag(:li, z)
          end
        end
      end
    end
  end
end 
```

**预期产出**

```
<ul>
  <li>1</li>
  <ul>
    <li>a</li>
    <ul>
      <li>i</li>
      <li>ii</li>
    </ul>
    <li>b</li>
    <ul>
      <li>i</li>
      <li>ii</li>
    </ul>
  <li>2</li>
  <ul>
    <li>a</li>
    <ul>
      <li>i</li>
      <li>ii</li>
    </ul>
    <li>b</li>
    <ul>
      <li>i</li>
      <li>ii</li>
    </ul>
  </ul>
</ul> 
```

**实际输出**

```
<ul></ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:43:10.017

这是解决方案：

```
content_tag(:ul) do
  [1, 2].map do |x|
    content_tag(:li, x) <<
    content_tag(:ul) do
      ['a', 'b'].map do |y|
        content_tag(:li, y) <<
        content_tag(:ul) do
          ['i', 'ii'].map do |z|
            content_tag(:li, z)
          end.join('').html_safe
        end
      end.join('').html_safe
    end
  end.join('').html_safe
end 
```

`content_tag`问题是您必须在每个块的末尾返回一个 HTML 安全字符串：

```
# returns <li>asd</li>
content_tag('li') { 'asd' }

# returns <ul><li>asd</li></ul>
content_tag('ul') { content_tag('li') { 'asd' } }

# returns [1, 2]
[1, 2].each{ |x| content_tag('li', x) }

# returns ["<li>1</li>", "<li>2</li>"]
[1, 2].map{ |x| content_tag('li', x) }

# returns "<li>1</li><li>2</li>" not marked as HTML safe, 
# because `join` generates a new string
[1, 2].map{ |x| content_tag('li', x) }.join('')

# returns "<li>1</li><li>2</li>" marked as HTML safe
[1, 2].map{ |x| content_tag('li', x) }.join('').html_safe

# returns "<ul><li>1</li><li>2</li></ul>"
content_tag('ul') do
  [1, 2].map{ |x| content_tag('li', x) }.join('').html_safe
end

# returns "<ul><li>1</li><li>2</li></ul>"
content_tag('ul') do
  content_tag('li') { 'asd' } # this is ignored, since it is not returned
  [1, 2].map{ |x| content_tag('li', x) }.join('').html_safe
end

# returns "<ul><li>asd</li><li>1</li><li>2</li></ul>"
content_tag('ul') do
  content_tag('li') { 'asd' } <<
    [1, 2].map{ |x| content_tag('li', x) }.join('').html_safe
end 
```

# asp.net-mvc - 没有Required 属性的bool 属性是必需的

> ID：14992010
> 
> 赞同：9
> 
> 时间：2013-02-20T23:39:11.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3

有一个简单的 ViewModel 具有三个属性，如下所示：

```
public bool RememberMe { get; set; } 
```

在我看来，我有一个简单的`@Html.CheckBoxFor(p => p.RememberMe)` 我正在使用启用的客户端验证`Html.EnableClientValidation();`

为什么将其设置为必填字段？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T00:38:27.820

尝试一个可为空的布尔值。

```
public bool? RememberMe { get; set; } 
```

对于引用类型，应用了许多默认验证规则。如果引用类型不可为空，则默认情况下它是必需的。最好的说明是，如果您使用文本框来显示一些属性（这不是您会在站点中执行的操作，但有利于测试目的）：

模型：

```
public bool? MyBool { get; set; }
public int MyInt { get; set; } 
```

看法：

```
 @Html.TextBoxFor(p => p.MyBool)
 @Html.TextBoxFor(p => p.MyInt) 
```

您可以从视图源中看到页面上发生的情况：

```
<input id="MyNullBool" name="MyNullBool" type="text" value="">
<input data-val="true" data-val-required="The MyBool field is required." id="MyBool" name="MyBool" type="text" value="False">
<input data-val="true" data-val-number="The field MyInt must be a number." data-val-required="The MyInt field is required." id="MyInt" name="MyInt" type="text" value="0"> 
```

可为空的 bool 没有验证属性，而 bool 有一个`data-val-required`标签。int 有一个`data-val-required`标签和一个`data-val-number`属性

当然，在复选框上，这都是多余的，因为它只能被选中（真）或不被选中（假），所以必需的标签没有多大用处。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-23T10:53:48.667

```
@Html.CheckBoxFor(c => c.TermsAndConditions, new { required = "required" })
@Html.ValidationMessageFor(c => c.TermsAndConditions, "you must agree to terms and conditions of Service.)" 
```

# java - 如何在类之间共享类常量？

> ID：14992012
> 
> 赞同：2
> 
> 时间：2013-02-20T23:39:16.430
> 
> 标签：java, class, constants, abstraction

我有 3 个不同的类，它们都使用一些常量值。目前，我正在为每个班级定义所有这些。我如何集中它们？

我试图用常量创建一个新的静态类，然后在我的类中使用静态导入，但这不起作用。无法成功导入该类。

PS：我不想使用枚举和接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:12:51.997

您不能从默认包（即 /src 目录）导入类。您需要在`import`子句中包含包名，即使两个类都在同一个包中。

例如：

*   `Main`/src 中的类
*   `Constants`/src/utils 中的类

在课堂上`Main`：

```
 import static utils.Constants.*;
 class Main {...} 
```

在班上`Constants`

```
 package utils.Constants;
 class Constants {...} 
```

# php - 使用 mysql in() 函数

> ID：14992013
> 
> 赞同：0
> 
> 时间：2013-02-20T23:39:17.580
> 
> 标签：php, codeigniter

我有一个值数组，我想使用 mysql IN() 函数进行检查，但是如何将它与 codeigniter 一起使用？

这就是我目前正在做的，显然行不通。

```
$p = array('page1', 'page2', 'page3','page4', 'page5');
$pages = implode(",", $p);

$sql = "select page from pages where domains_id = ? and page in(?) and is_deleted=0";
$fields = array($domains_id, $pages);

$this->db->query($sql, $fields)

the output of the pages variable comes out to  page1,page2,page3,... but the in function needs them seperated like this:
'page1','page2','page3'.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:44:55.893

```
<?php
function addQuotes($string)
{
    return "'{$string}'";
}
$p = array('page1', 'page2', 'page3','page4', 'page5');
$p2 = array_map("addQuotes", $p);

print_r($p2); 
```

[看到它在行动](http://codepad.viper-7.com/qLC6rT)

然后就可以`implode()`正常使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:45:08.470

从内爆的外部引号开始`','`

```
$pages = sprintf( "'%s'", implode( "','", $p ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:31:31.547

尝试这个：

```
$p = array('page1', 'page2', 'page3','page4', 'page5');
$this->db->select('page');
$this->db->from('pages');
$this->db->where('domains_id', $domains_id);
$this->db->where_in('page', $p);
//Note where_in function expects 2nd parameter as array
$this->db->where('is_deleted', '0');

$query = $this->db->get(); 
```

更多详情： [http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# html - 同一页面不同样式的输入框

> ID：14992015
> 
> 赞同：1
> 
> 时间：2013-02-20T23:39:18.137
> 
> 标签：html, css

我的输入框有以下样式

```
 input[type="text"] { 
        height:16px ; 
        font-size:14 ;
        border-radius: 5px ;    
     } 
```

我想要做的是在大多数输入上都有这种风格，但我想制作一类输入，这样我就可以添加背景颜色等。我怎样才能在样式表中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:41:50.820

使用类

定义一个不同风格的类

```
 input[type="text"].different { 
    background-color:red;    
 } 
```

并将其应用于 html 中的输入元素

```
<input type="text" class="different" /> 
```

* * *

此输入将具有通用规则的`input[type="text"]`所有属性，然后应用`input[type="text"].different`类的所有属性。

`input[type="text"].different`更重要的是，在重叠属性的情况下，`.different`类中的属性将占上风。

* * *

阅读[https://developer.mozilla.org/en-US/docs/CSS/Class_selectors](https://developer.mozilla.org/en-US/docs/CSS/Class_selectors)和[https://developer.mozilla.org/en-US/docs/CSS/Specificity](https://developer.mozilla.org/en-US/docs/CSS/Specificity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:41:15.627

```
input[type="text"].yellow {
    background-color: yellow;
} 
```

# jquery - 我可以从 WCF 服务返回多个列表吗？

> ID：14992017
> 
> 赞同：0
> 
> 时间：2013-02-20T23:39:20.413
> 
> 标签：jquery, json, wcf, list

我用 c# 编写了一个 wcf 服务。从 Jquery 我调用服务并返回一个列表。我现在想返回多个列表。这可能吗？

该列表正在作为 Json 传回。我可以以某种方式创建一个列表数组吗？抱歉，我是新手，所以这个问题可能太模糊了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:42:42.093

您可以退回任何您想要的东西。`List<List<T>>`如果需要，请返回 a 。返回一个包含成员的复杂类型`SomeCustomType`，每个成员都是 type `List<T>`。您的限制是函数只能返回**一个**值（C# 限制多于 WCF 限制，但仍然是有效限制）。除此之外，您可以自由地使该值变得尽可能复杂。

# vb.net - 禁用由轴标签长度引起的调整大小

> ID：14992018
> 
> 赞同：0
> 
> 时间：2013-02-20T23:39:21.480
> 
> 标签：vb.net, winforms, mschart

这是我的问题，我正在`windows.forms.datavisualisation.charting`使用 vb.net 程序中的库制作图表。

我希望我的图表*`X axis`*始终具有相同的长度*（像素方面）*，因为我将它们垂直排列。图表都具有相同的宽度，并且*`X axis`*值始终相同`(hours from 0 to 24)`。

问题是*`Y labels`*它们的格式并不相同。有些是代表质量的整数，有些是百分比......这使得每个*`Y axis`*标签中的字符串具有不同的长度

例如：

```
Chart1 Y axis labels: 0, 1 000 000, 2000 000, ..., 10 000 000...; 
Chart2 Y axis: 2.33%, 3.45%... 
```

它们都有相同的字体，如果可能的话，我想保持这样，但 X 轴的长度更重要。

有任何想法吗？下面的图表应该有助于解释：

第一张图表 [![第一张图表](../Images/a0785d4fa36a3df527b97fed737feb98.png)](https://i.stack.imgur.com/GP0jR.png)

第二张图表 [![第二张图表](../Images/6e5af4cd2c377efbe135a3f68ec495f9.png)](https://i.stack.imgur.com/nBj20.png)

# c++ - 一个空队列需要多少字节？

> ID：14992020
> 
> 赞同：1
> 
> 时间：2013-02-20T23:39:44.973
> 
> 标签：c++, memory, queue

一个空队列、一个空向量等占用多少字节？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T23:42:52.250

这是一个实现细节——标准并没有说太多。我们大概可以算出一个最小值：

A`vector`将（至少）具有指向数据本身的指针、实际大小和容量。所以至少是整数大小的 3 倍。显然，大小和指针可能是 64 位，在这种情况下，它是 3 乘以 64 位 = 24 字节。但是，如果不查看实际实现，就无法说大小是否为 64 位。

A`queue`可能是相似的。

你当然可以`sizeof(vector<int>)`自己做，看看。但不能保证在不同的架构上是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:42:12.083

这个问题没有一般的答案。这完全取决于实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:48:11.633

一般来说，常见的实现将基于数组或链表。在这种情况下，它需要一个指向队列开头的指针和长度（或指向结尾的指针）。这反过来意味着它将占用 sizeof(void*)*2 个字节。在 x86_64 上它将等于 16 个字节。链表也有两个指针。但是不同的实现可能需要更多或更少。例如，可以使用 24 位基地址和 8 位来存储大小，导致只使用 4 个字节来记账。

# java - Maven -> Update Project... 到底是什么？

> ID：14992022
> 
> 赞同：14
> 
> 时间：2013-02-20T23:40:00.293
> 
> 标签：java, eclipse, maven, command-line

我对此感到非常沮丧：

我正在使用一个 Maven 项目，将 jdbc 与*eclipselink*一起使用。`mvn install`按预期工作。直到我必须更改persistence.xml 中的密码。当我这样做时`mvn clean`，`mvn install`项目被破坏并且错误的（旧）persistence.xml 仍在使用中。在 Eclipse 中，我必须这样做`maven -> update project`（使用 m2e 插件）并`mvn install`再次突然工作。

**现在我的问题：**在部署服务器上，我正在使用命令行脚本，但我没有发现`mvn XYZ`m2e 功能的等效项......

有没有等价的？

**显式场景：**

我正在我的本地机器（osx/win7）上开发一个在 eclipse 中导入的 maven 项目。我有一个 JPA Persistence 接口，它封装了通过*eclipselink*实现的数据库连接。我可以在本地部署（`mvn install`），但是在我运行`mvn clean`并更改密码之后`persistence.xml` `mvn install`不再可能。我只是`classDefNotFound Persistor`参加测试，因为它静态初始化无法连接新原因的*EntityManager*`persistence.xml` - 或者至少这是我的观点，因为堆栈跟踪并没有真正的帮助。但是，在`maven -> update project...`项目上的 Eclipse 之后，`mvn install`再次工作并使用新密码（测试运行！）。

当我想在远程机器（debian，命令行）上部署项目时，我无法“mvn install”拉取的项目，因为在我更改了persistence.xml中的密码进行部署后，它又是错误的persistence.xml或在至少使用了一些缓存。我希望它更清楚一点。

**解决方案：** 确保将 persistence.xml 放在 src/main/resources/META-INF 而不是其他地方。m2e 从错误的地方（在我的例子中是 src/main/java/META-INF）捕获 persistence.xml。所以这基本上只是一个错误的项目结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:46:31.473

看起来您可以`mvn eclipse:clean eclipse:eclipse`用来重新[生成 Eclipse 项目文件](http://wiki.eclipse.org/M2E_FAQ)——希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T20:53:49.660

来自 eclipse 的 maven update 项目是不同的，因为它会生成一个 Maven Dependencies 类路径容器

mvn eclipse:eclipse 生成一个引用库容器。

# java - Android GPS 更新位置

> ID：14992023
> 
> 赞同：0
> 
> 时间：2013-02-20T23:39:59.997
> 
> 标签：java, android, gps, location

我正在制作基于手机位置的简单应用程序。我正在使用[此代码](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)进行 GPS 定位。在`main()`函数中，我请求 GPS 位置，然后我正在使用它。（我在计算日出日落）

我可以得到位置，但是当我启动应用程序时，我得到了`LastKnown`位置。所以，如果我想要真正的“新”位置，我必须等待 GPS 锁定，然后重新启动应用程序。

所以，我的问题是：我怎样才能得到一个“新鲜”的位置？

行。我有个主意。

我可以从另一个类调用 MainActivity 刷新吗？

在 GPS 课上我有这个

```
private final Context mContext;

@Override
public void onLocationChanged(Location location) {
    startActivity(new Intent(mContext, MainActivity.class));
} 
```

但这不起作用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:43:12.610

[这](http://developer.android.com/guide/topics/location/index.html)是Android中位置服务的概述。[这](http://developer.android.com/reference/android/location/LocationManager.html)是`LocationManager`Android 中定位服务的核心类。

[这](https://developer.android.com/guide/topics/location/strategies.html)是关于“位置策略”的 Android 开发者教程。[这](http://blogoscoped.com/archive/2008-12-15-n14.html)是另一个可能有用的教程。

此外，您不能只向 Android 询问您当前的位置，因为 GPS 可能需要相当长的时间才能得到修复。相反，您需要请求位置更新并使用您获得的第一个更新或类似模式。

# javascript - 带有变量的jQuery选择器，变量更改时不更新

> ID：14992025
> 
> 赞同：2
> 
> 时间：2013-02-20T23:40:15.337
> 
> 标签：javascript, jquery

'我正在尝试执行类似下面的操作，仅当父“框”ID 正确时单击“命中”类时才会运行一个函数。

```
var selected = 1;    

$('#box-' + selected + ' .hit').click(function(){

    selected = randomFromTo(1,5);

}); 
```

该`selected`变量会根据页面上的其他操作而变化，但在任何更改后我都无法使该功能正常工作 - 它保持固定为最初选择的“框”ID。我可以想象为什么会这样，因为 jQuery 已经拍摄了该字符串的快照，并且没有告诉它更新它，但我不知道如何解决这个问题。

**编辑：**添加所选变量的实例化及其设置位置。我省略了 UI 更改，这将使用户更容易理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:44:07.650

您可以只在类上设置点击处理程序`.hit`，然后在处理程序本身中检查父节点以获取正确的 ID。如果你这样做，请确保你正确地推迟了事件，否则你最终会为每个`.hit`元素使用一个处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:47:43.573

如果我正确理解您的问题，那么问题是`selected`在创建函数时对变量进行了评估。该函数绑定到当时`click`的一组 DOM 元素的事件。

绑定后，不能修改选择器，修改选择时使用的任何变量都没有效果。

我能想到的最好的解决方法是将点击事件附加到所有可能的匹配项，然后在`click`处理程序中进一步过滤它们......

```
$('.hit').click(function(){
    // check if the parent has the correct id
    if($(this).parent().attr('id') == 'box-' + selected){
        //function
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:49:24.980

可以做这样的事情：

```
var selected = null;
function setSelected(aSelected) {

    if (selected !== null) {
        // Remove existing selected click handler
        $('#box-' + selected + ' .hit').off('click.selected')
    }

    selected = aSelected;

    // Click handler for new selected el
    $('#box-' + selected + ' .hit').on('click.selected', function() { });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:46:07.407

我需要查看整个上下文才能理解，但乍一看，发布的代码似乎在您的页面上运行一次。

所以如果你这样做

```
var selected = something;

$('#box-' + selected + ' .hit').click(function(){

    //function

}); 
```

后来

```
selected = "newvalue"; 
```

这不会改变程序行为，已经为特定对象设置了点击事件。

在 .hit 上设置点击处理程序的另一个建议很有意义，然后在处理程序内部您可以检查是否

```
($(this).parent().attr('id')) == ("box-"+selected) 
```

然后才执行您的代码。

# java - 如何使用while循环填充列表而不每次都声明一个新对象？

> ID：14992028
> 
> 赞同：0
> 
> 时间：2013-02-20T23:40:38.317
> 
> 标签：java, arrays, list, while-loop

所以，我正在尝试包含一个术语的文档列表，然后将相应的 document_id 和术语频率输入到一个数组（大小为 2）中。然后我将此条目数组添加到列表中，以便最终列表包含所有条目。但是，由于该条目是通过引用传递到 List 中的，所以我不知道如何完成此操作，因为它每次都会自行重写。而且由于数据的大小，如果我尝试在 while 循环中声明一个新的 int[] 条目，我的程序就会耗尽内存。关于如何通过这个的任何想法？我对我的 Java 生疏了。谢谢。

```
List<int[]> occurenceIndex = new ArrayList<>();
int[] entry = new int[2];  

while (matchedDocs.next())
{
    entry[0] = (matchedDocs.doc());    // Adds document id 
    entry[1] = (matchedDocs.freq());   // Adds term weight
    occurenceIndex.add(entry);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:43:31.267

尝试在循环内创建 int 数组的新对象。

```
List<int[]> occurenceIndex = new ArrayList<>();
while (matchedDocs.next())
{
   int[] entry = new int[2];
   entry[0] = (matchedDocs.doc());    // Adds document id 
   entry[1] = (matchedDocs.freq());   // Adds term weight
   occurenceIndex.add(entry);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:43:31.530

你必须放入`int[] entry = new int[2];`while循环

它是否需要是一个int，字节或短呢？如果这是不可能的，那么程序需要重构，因为没有办法使用相同的数组实例来存储这样的数组。– Neil Locketz 1 分钟前 编辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:45:25.533

考虑使用`HashMap`来存储记录。

```
Map<Integer, Integer> occurenceIdx = new HashMap<Integer, Integer>();
while(matchedDocs.next())
    occurenceIdx.put(matchedDocs.doc(), matchedDocs.freq()); 
```

这就是创建地图所​​需的所有代码。根据文档 ID 检索值

```
docFreq = occurenceIdx.get(docId); 
```

请注意，这仅适用于您拥有唯一文档 ID 的情况。如果没有，您将不得不在此解决方案上即兴发挥。我可能会让我的地图`HashMap<Integer, List<Integer>>`支持多个 docID 实例

# batch-file - 批处理 - 我想在一个文件中搜索一个变量并将该变量结果替换为另一个文件

> ID：14992029
> 
> 赞同：0
> 
> 时间：2013-02-20T23:40:49.190
> 
> 标签：batch-file, batch-processing

我想在一个文件中使用变量进行搜索，然后获取该变量结果并替换另一个文件中的部分文本。

例如“1.txt”中的文本行：ClassName=X

X 根据您搜索的文本行在文件中更改 ClassName= 所以我必须使用 ClassName= 的变量进行搜索

然后我会在另一个文件中搜索“Class=”之后的 X，将其替换为“ShipDummy”这个词。我们将调用第二个文件“2.txt”。第二个文件中的 X 会像这样找到：Class=X。但是，我希望它是 Class=ShipDummy

我会搜索类似于 1.txt 中的布局，但没有“名称”部分，并且 1.txt 也不会得到 ShipDummy。

我还想在替换发生之前备份 2.txt。

此外，1.txt 中有许多 ClassName= 行，它们都具有不同的 x 值。我希望它为每个 x 值提供一个变量，然后在 2.txt 中替换该值。例如：1.txt 中的 ClassName=x（将 2.txt 中的 Class=x 替换为 Class=ShipDummy）

1.txt 中的 ClassName=y（将 2.txt 中的 Class=y 替换为 Class=ShipDummy）

1.txt 中的 ClassName=z（将 2.txt 中的 Class=z 替换为 Class=ShipDummy）

等等....

请记住，在上面我在这里使用 x、y 和 z 作为变量。

我将如何做这一切？我是编码新手，它非常复杂。我想在批处理文件中使用它。

我所拥有的是这样的，但我迷路了：

```
@echo off

SETLOCAL ENABLEDELAYEDEXPANSION

for /f "tokens=*" %%a in (1.txt) do 

SETLOCAL ENABLEDELAYEDEXPANSION

for /f "delims=" %%A in ("!var2!") do echo !var1:Name=%%A!

exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:35:24.960

解决这个问题的最简单方法可能是从相反的方向接近它。

阅读 2.txt 中的每一行。如果该行与 templpate 匹配`Class=X`，则解析出 X 并搜索以查看是否`ClassName=X`存在于 1.txt 中。如果确实存在，则写入替换行，否则写入原始行。

您可以使用 FINDSTR 在文件中搜索字符串。你不关心输出，所以输出被重定向到 null。如果先前的`&&`命令 (FINDSTR) 成功（匹配），则操作员有条件地执行代码。

```
@echo off
setlocal enableDelayedExpansion
>2.txt.new (
  for /f "delims=" %%A in (2.txt) do (
    set "ln=%%A"
    if "!ln:~0,6!" == "Class=" findstr /c:"ClassName=!ln:~6!" 1.txt >null && set "ln=Class=ShipDummy"
    echo !ln!
  )
)
move 2.txt.new 2.txt 
```

上面的脚本未经测试，但这个概念应该有效。有很多改进的空间。

# java - 当所有其他实例都正确时，为什么我会返回错误的布尔值？

> ID：14992035
> 
> 赞同：0
> 
> 时间：2013-02-20T23:41:17.663
> 
> 标签：java, oop, interface

这是我的`Rational`课：

```
package lab18f;

import static java.lang.System.*;

class Rational implements Comparable<Rational>
 {
//add two instance variables
private int num, den;

//write two constructors
public Rational ()
{
    num = 1;
    den = 1;
}

public Rational (int numer, int deno)
{
    num = numer;
    den = deno;
}

//write a setRational method
public void setRational(int numer, int deno)
{
    num = numer;
    den = deno;
}

//write  a set method for numerator and denominator
public void setNumerator(int numer)
{
    num = numer;

}

public void setDenominator(int deno)
{
    den = deno;
}
public void add(Rational  other)
{
    //num1/den1 + num2/den2 
    //new numerator = (num1 * den2 + num2 * den1)
    //new denominator = (den1 * den2)

    int newNumer = (this.getNumer()*other.getDeno() + other.getNumer()*this.getDeno());
    int newDeno = this.getDeno()*other.getDeno();
    this.setRational(newNumer, newDeno);

    reduce();
}

private void reduce()
{
    int gcd = 0;
    int numer = num;
    int deno = den;

    if(numer > deno)
        gcd = gcd(numer,deno);
    else if(numer < deno)
        gcd = gcd(deno, numer);
    else
        gcd = numer;

    this.setRational(num/gcd, den/gcd);

}

private int gcd(int numOne, int numTwo)
{

    int one = numOne;
    int two = numTwo;
    int gcd = two;

    if(two==0)
        return one;
    return gcd(two, one%two);
}

public Object clone ()
{
    return new Rational(num, den);
}

//ACCESSORS

//write get methods for numerator and denominator
public int getNumer()
{
    return num;
}

public int getDeno()
{
    return den;
}

public boolean equals( Object obj)
{
    Rational lhs = (Rational)obj;
    if((getNumer()/getNumer()== lhs.getNumer()/lhs.getNumer()) && getDeno()/getNumer() == lhs.getDeno()/lhs.getNumer())
        return true;
    return false;
}

public int compareTo(Rational other)
{

    return -1;
}

//write  toString() method
public String toString()
{
    return "" + getNumer() + "/" + getDeno();
}

} 
```

以及该课程的跑步者`Rational`课程：

```
import static java.lang.System.*;

public class Lab18f
 {
public static void main( String args[] )
{
    Rational test = new Rational();
    out.println("test = " + test);

    Rational newOne = new Rational(3,4);
    out.println("newOne = "+newOne);

    out.println("test.equals(newOne) = "+test.equals(newOne));

    newOne = (Rational)test.clone();
    out.println("\n\nnewOne after test.clone() = "+newOne);
    out.println("test.equals(newOne) = "+test.equals(newOne));

    Rational rOne = new Rational(1,2);
    Rational rTwo = new Rational(2,3);
    out.println("1/2.equals(2/3) = "+rOne.equals(rTwo));
    test.setRational(4,6);
    out.println("2/3.equals(4/6) = "+rTwo.equals(test));

    out.println("\n\nrOne = "+rOne);
    out.println("rTwo = "+rTwo);

    out.println("rOne.compareTo(rTwo) = "+rOne.compareTo(rTwo));
    out.println("rTwo.compareTo(rOne) = "+rTwo.compareTo(rOne));

    rOne.add(rTwo);
    out.println("\n\nrOne.add(rTwo) = "+ rOne);

    rOne.setRational(1,2);
    rTwo.setRational(1,3);
    rOne.add(rTwo);
    out.println("\n\n1/2.add(1/3) = "+ rOne);

    rOne.setRational(4,10);
    rTwo.setRational(3,5);
    rOne.add(rTwo);
    out.println("\n\n4/10.add(3/5) = "+ rOne);  

    rOne.setRational(2,10);
    rTwo.setRational(3,6);
    rOne.add(rTwo);
    out.println("\n\n2/10.add(3/6) = "+ rOne);      

    //1/4 + 2/8 = 1/2
    rOne.setRational(1,4);
    rTwo.setRational(2,8);
    out.println("\n\n1/4.equals(2/8) = "+rOne.equals(rTwo));        
    rOne.add(rTwo);
    out.println("\n\n1/4.add(2/8) = "+ rOne);   

    //1/6 + 2/8 = 5/12
    rOne.setRational(1,6);
    rTwo.setRational(2,8);
    out.println("\n\n1/6.equals(2/8) = "+rOne.equals(rTwo));                
    rOne.add(rTwo);
    out.println("\n\n1/6.add(2/8) = "+ rOne);           
}
} 
```

我手头的问题是，当我运行 runner 类（显然运行`Rational`该类）时，我的输出中有这样的语句：

> 测试 = 1/1
> 
> 新一 = 3/4
> 
> test.equals(newOne) = true

这显然分数 1/1 不等于 3/4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:47:06.863

您的 equals 方法似乎没有做它应该做的事情。一方面，您正在进行整数除法，并且您正在将分子除以自身。尝试将一个的分子与另一个的分母相乘，并将其与另一个的分子与第一个的分母的乘积进行比较。如果这[两个产品相等，则分数相等](http://www.augustatech.edu/math/molik/fractionequivnotes.pdf)。

```
public boolean equals(Object obj)
{
    Rational lhs = (Rational) obj;
    return ((getNumer() * lhs.getDeno()) == (getDeno() * lhs.getNumer()));
} 
```

# list - 在 Haskell 中即时减少列表

> ID：14992037
> 
> 赞同：8
> 
> 时间：2013-02-20T23:41:22.343
> 
> 标签：list, haskell, on-the-fly, reduction

假设我有一个`f`接受一些输入并产生一个数字的函数。在函数`f`中，根据输入创建一个列表，然后将其减少（例如使用`foldl' g`）以产生最终输出数。因为中间列表毕竟是要归约的，所以是否可以应用reduce函数`g` *而不表示中间列表*。这里的目标是限制用于存储（或表达，如果“存储”一个不太准确的词）列表的内存。

为了说明这一点，此函数为中间列表`foldPairProduct`占用`O(N1 * N2)`空间（由于表达式和惰性求值，消耗的空间可能更复杂，但我认为它是成比例的或更糟）。这`N1, N2`是两个输入列表的大小。

```
foldPairProduct :: (Num a, Ord a)  => (a -> a -> a) -> [a] -> [a] -> a
foldPairProduct f xs ys = foldl1 f [ x*y | x <- xs, y <- ys] 
```

该逻辑的另一种实现是 foldPairProduct'，它占用`O(2 * 2)`空间。

```
foldPairProduct' :: Num a => (Maybe a -> Maybe a -> Maybe a) -> [a] -> [a] -> Maybe a  
foldPairProduct' _ _ [] = Nothing
foldPairProduct' _ [] _ = Nothing
foldPairProduct' f (x:xs) (y:ys) = 
  foldl1 f [Just $ x*y, foldPairProduct' f [x] ys, foldPairProduct' f xs [y], 
            foldPairProduct' f xs ys] 
```

除了它接受多个列表作为输入之外，它`foldCrossProduct`的实现类似于它，这种情况更加严重。`foldPairProduct`中间列表的空间复杂度（仍然是命令式语言的意义上）是`O(N1 * N2 * ...* Nk)`，其中`k`是 的长度`[[a]]`。

```
foldCrossProduct :: Num a => (a -> a -> a) -> [[a]]  -> a
foldCrossProduct f xss = foldl1 f (crossProduct xss)

crossProduct :: Num a => [[a]] -> [a]
crossProduct [] = []
crossProduct (xs:[]) = xs
crossProduct (xs:xss) = [x * y | x <- xs, y <- crossProduct xss] 
```

如果我们遵循 的实现思路`foldPairProduct'`，空间复杂度将为`k^2`，空间效率更高。我的问题是：

1.  我实现`foldPairProduct'`了一对列表。但是，似乎为任意数量的列表实现它并不简单。

2.  我的意思不是将 Haskell 与命令式语言进行比较，但是是否有一个使用常量空间的实现（或者换句话说，不表达上述长度的中间列表）？也许 Monad 会有所帮助，但我对它很陌生。

3.  编译器真的发挥了它的魔力吗？也就是说，它注意到列表是中间的并且要减少，并且确实找到了一种节省空间的方法来评估它。毕竟，我认为惰性求值和编译器优化就是为此而设计的。

4.  欢迎任何评论。谢谢。

**更新 1**

性能测试证实了对 和 的“空间复杂度”的分析`foldPairProduct`，`foldCrossProduct`基于改变输入大小`N1, N2, N3`，并观察了 GC 复制的字节数。

性能测试证明了`foldPairProduct'`令人惊讶地显示`N1 * N2`甚至更差空间使用的分析。这可能是由于递归调用的评估效率低下。结果附在下面（ghc 设置与 Yuras 所做的相同）。

**更新 2**

当我从评论和答案中学习时，更新了一些进一步的实验。对于`foldPairProduct`，*使用的总内存*与 Daniel Fischer 解释的空间复杂度一致。

~~因为`foldCrossProduct`，尽管 Daniel 的复杂性分析对我来说很有意义，但结果并没有显示出线性的内存使用情况。~~按照丹尼尔的建议，交换了`x <- xs`and `y <- crossproduct ys`，它确实实现了线性空间复杂度。

对于`foldCrossProduct (max) [[1..100],[1..n], [1..1000]]`，当 n = 100、1000、10000、100000 时，使用的内存为 2、2、3、14 MB。

*foldPairProduct [1..n] [1..10000]*

```
n = 100
  120,883,320 bytes allocated in the heap 
   56,867,728 bytes copied during GC
      428,384 bytes maximum residency (50 sample(s)) 
       98,664 bytes maximum slop
            3 MB total memory in use (0 MB lost due to fragmentation)     

n = 1000
 1,200,999,280 bytes allocated in the heap 
   569,837,360 bytes copied during GC   
       428,384 bytes maximum residency (500 sample(s))
        99,744 bytes maximum slop 
             3 MB total memory in use (0 MB lost due to fragmentation) 
n = 10000

  12,002,152,040 bytes allocated in the heap
   5,699,468,024 bytes copied during GC 
         428,384 bytes maximum residency (5000 sample(s))
          99,928 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation)

n = 100000

 120,013,672,800 bytes allocated in the heap 
  56,997,625,608 bytes copied during GC 
         428,384 bytes maximum residency (50000 sample(s)) 
          99,984 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation) 
```

*foldPairProduct [1..10000] [1..n]*

```
n = 100

     121,438,536 bytes allocated in the heap 
          55,920 bytes copied during GC     
          32,408 bytes maximum residency (1 sample(s)) 
          19,856 bytes maximum slop  
               1 MB total memory in use (0 MB lost due to fragmentation)

n = 1000

   1,201,511,296 bytes allocated in the heap 
         491,864 bytes copied during GC     
          68,392 bytes maximum residency (1 sample(s)) 
          20,696 bytes maximum slop                   
               1 MB total memory in use (0 MB lost due to fragmentation)

n = 10000

  12,002,232,056 bytes allocated in the heap 
   5,712,004,584 bytes copied during GC     
         428,408 bytes maximum residency (5000 sample(s)) 
          98,688 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation)

n = 100000

 120,009,432,816 bytes allocated in the heap
  81,694,557,064 bytes copied during GC 
       4,028,408 bytes maximum residency (10002 sample(s))
         769,720 bytes maximum slop 
              14 MB total memory in use (0 MB lost due to fragmentation) 
```

*foldPairProduct [1..n] [1..n]*

```
n = 100
 1,284,024 bytes allocated in the heap
    15,440 bytes copied during GC
    32,336 bytes maximum residency (1 sample(s))
    19,920 bytes maximum slop                  
         1 MB total memory in use (0 MB lost due to fragmentation)  

n = 1000
 120,207,224 bytes allocated in the heap  
     114,848 bytes copied during GC 
      68,336 bytes maximum residency (1 sample(s)) 
      24,832 bytes maximum slop 
           1 MB total memory in use (0 MB lost due to fragmentation)  

n = 10000

  12,001,432,024 bytes allocated in the heap 
   5,708,472,592 bytes copied during GC 
         428,336 bytes maximum residency (5000 sample(s)) 
          99,960 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation) 

n = 100000
 1,200,013,672,824 bytes allocated in the heap 
   816,574,713,664 bytes copied during GC 
         4,028,336 bytes maximum residency (100002 sample(s)) 
           770,264 bytes maximum slop 
                14 MB total memory in use (0 MB lost due to fragmentation) 
```

*foldCrossProduct (max) [[1..n], [1..100], [1..1000]]*

```
n = 100
     105,131,320 bytes allocated in the heap 
      38,697,432 bytes copied during GC     
         427,832 bytes maximum residency (34 sample(s)) 
         209,312 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation)

n = 1000
   1,041,254,480 bytes allocated in the heap 
     374,148,224 bytes copied during GC 
         427,832 bytes maximum residency (334 sample(s))
         211,936 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation)

n = 10000
  10,402,479,240 bytes allocated in the heap 
   3,728,429,728 bytes copied during GC     
         427,832 bytes maximum residency (3334 sample(s))
         215,936 bytes maximum slop
               3 MB total memory in use (0 MB lost due to fragmentation) 
```

*foldCrossProduct (max) [[1..100], [1..n], [1..1000]]*

```
n = 100
     105,131,344 bytes allocated in the heap 
      38,686,648 bytes copied during GC  
         431,408 bytes maximum residency (34 sample(s)) 
         205,456 bytes maximum slop 
               3 MB total memory in use (0 MB lost due to fragmentation)

n = 1000
   1,050,614,504 bytes allocated in the heap
     412,084,688 bytes copied during GC 
       4,031,456 bytes maximum residency (53 sample(s)) 
       1,403,976 bytes maximum slop
              15 MB total memory in use (0 MB lost due to fragmentation)    
n = 10000
    quit after over 1362 MB total memory in use (0 MB lost due to fragmentation) 
```

*foldPairProduct' [1..n] [1..n]*

```
n = 100
 4,351,176 bytes allocated in the heap
    59,432 bytes copied during GC    
    74,296 bytes maximum residency (1 sample(s))
    21,320 bytes maximum slop                  
         1 MB total memory in use (0 MB lost due to fragmentation)

n = 1000
 527,009,960 bytes allocated in the heap 
  45,827,176 bytes copied during GC 
     211,680 bytes maximum residency (1 sample(s)) 
      25,760 bytes maximum slop 
           2 MB total memory in use (0 MB lost due to fragmentation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:35:03.887

列表的创建/修改/消耗有特定的优化，称为[循环融合](https://stackoverflow.com/questions/578063/what-is-haskells-stream-fusion)。因为 Haskell 是纯粹且非严格的，所以有很多规律，例如`map f . mag g == map (f . g)`.

如果编译器由于某种原因无法识别代码并生成次优代码（在传递`-O`标志之后），我会详细研究流融合，看看是什么阻止了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T00:13:50.947

（好吧，我错了，它不会在恒定空间中工作，因为其中一个列表被多次使用，所以它很可能具有线性空间复杂度）

您是否尝试编译启用优化的测试程序？你`foldPairProduct`看起来对我很好，我希望它能够在恒定的空间中工作。

添加：是的，它在恒定空间中工作（使用的总内存为 3 MB）：

```
shum@shum-laptop:/tmp/shum$ cat test.hs 

foldPairProduct f xs ys = foldl1 f [ x*y | x <- xs, y <- ys]

n :: Int
n = 10000

main = print $ foldPairProduct (+) [1..n] [1..n]
shum@shum-laptop:/tmp/shum$ ghc --make -fforce-recomp -O test.hs 
[1 of 1] Compiling Main             ( test.hs, test.o )
Linking test ...
shum@shum-laptop:/tmp/shum$ time ./test +RTS -s
2500500025000000
  10,401,332,232 bytes allocated in the heap
   3,717,333,376 bytes copied during GC
         428,280 bytes maximum residency (3335 sample(s))
         219,792 bytes maximum slop
               3 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     16699 colls,     0 par    4.27s    4.40s     0.0003s    0.0009s
  Gen  1      3335 colls,     0 par    1.52s    1.52s     0.0005s    0.0012s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    2.23s  (  2.17s elapsed)
  GC      time    5.79s  (  5.91s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    8.02s  (  8.08s elapsed)

  %GC     time      72.2%  (73.2% elapsed)

  Alloc rate    4,659,775,665 bytes per MUT second

  Productivity  27.8% of total user, 27.6% of total elapsed

real    0m8.085s
user    0m8.025s
sys 0m0.040s
shum@shum-laptop:/tmp/shum$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T12:44:58.270

```
foldPairProduct :: (Num a, Ord a)  => (a -> a -> a) -> [a] -> [a] -> a
foldPairProduct f xs ys = foldl1 f [ x*y | x <- xs, y <- ys] 
```

可以成为一个好的记忆公民。第二个参数`ys`重复使用，因此在计算过程中必须完全在内存中，但中间列表在消耗时会延迟生成，因此仅贡献恒定数量的内存，从而提供整体`O(length ys)`空间复杂度。当然，必须有`length xs * length ys`列表单元产生和消耗，所以总体分配是`O(length xs * length ys)`[假设每个`a`值使用有界空间]。通过提供更大的分配区域，可以大大减少在 GC 期间复制的字节数（以及因此 GC 所需的时间），其中`+RTS -A1M`，数量从

```
3,717,333,376 bytes copied during GC 
```

默认设置为

```
20,445,728 bytes copied during GC 
```

以及从`GC time 4.88s`到和`GC time 0.07s`的时间。`xs == ys = [1 .. 10000] :: [Int]``f = (+)`

但这取决于严格性分析器的工作——如果它使用的类型是例如`Int`并且在编译期间已知，并且已知组合函数是严格的，那么它会很好。如果代码不是专门的，或者如果组合函数不知道是严格的，则折叠将产生一个`O(length xs * length ys)`大小的 thunk。这个问题可以通过使用 stricter 来缓解`foldl1'`。

```
foldPairProduct' :: Num a => (Maybe a -> Maybe a -> Maybe a) -> [a] -> [a] -> Maybe a  
foldPairProduct' _ _ [] = Nothing
foldPairProduct' _ [] _ = Nothing
foldPairProduct' f (x:xs) (y:ys) = 
  foldl1 f [Just $ x*y, foldPairProduct' f [x] ys, foldPairProduct' f xs [y], 
            foldPairProduct' f xs ys] 
```

直接遇到了严格性不足的问题，`Just`这里编译器不能对构造函数包裹的值进行严格处理，因为整体结果可能不需要它，所以折叠经常会`O(length xs * length ys)`在`Just`-当然，对于某些`f`, like `const`，它会表现得很好。如果所有值都被使用，那么要成为一个良好的记忆公民，您必须使用足够严格的组合函数`f`，同时强制`Just`结果中的值（如果它是 a `Just`）；使用`foldl1'`也有帮助。这样，它可能具有`O(length ys + length xs)`空间复杂性（列表`xs`和`ys`被多次使用，因此被重用）。

```
foldCrossProduct :: Num a => (a -> a -> a) -> [[a]]  -> a
foldCrossProduct f xss = foldl1 f (crossProduct xss)

crossProduct :: Num a => [[a]] -> [a]
crossProduct [] = []
crossProduct (xs:[]) = xs
crossProduct (xs:xss) = [x * y | x <- xs, y <- crossProduct xss] 
```

尽管 GHC 几乎不做 CSE（公共子表达式消除），但该列表`crossProduct xss`将（可能）在此处在不同`x`的 s 之间共享，因此会产生`O(N2*...*Nk)`空间复杂度。如果列表中元素的顺序无关紧要，则重新排序为

```
crossProduct (xs:xss) = [x * y | y <- crossProduct xss, x <- xs] 
```

有帮助。然后`crossProduct xss`不需要一次在内存中，因此可以增量生产和消费，只`xs`需要记住，因为它被多次使用。对于递归调用，必须共享剩余列表中的第一个，这样会产生整体`O(N1+...+Nk-1)`空间复杂度。

# php - 如何以 2013-02-27 00:00:00 形式转换日期，以便我可以将其与 ORDER BY 一起使用？

> ID：14992038
> 
> 赞同：0
> 
> 时间：2013-02-20T23:41:25.123
> 
> 标签：php, mysql, sql-order-by

所以我想添加`ORDER BY`我的查询，但它不起作用，因为日期字段在表单中`2013-02-27 00:00:00`。如何即时转换它以便我可以使用它`ORDER BY`？这是我的查询：

```
 $sql = "SELECT * FROM $wpdb->posts"; 
    $sql .= " INNER JOIN $wpdb->postmeta ON $wpdb->posts.ID = $wpdb->postmeta.post_id";
    $sql .= " WHERE $wpdb->posts.post_type = 'task'";
    $sql .= " AND $wpdb->postmeta.post_id IN ( SELECT `post_id` FROM $wpdb->postmeta WHERE $wpdb->postmeta.meta_key = '_completed' AND $wpdb->postmeta.meta_value = '0' )";
    $sql .= " AND $wpdb->postmeta.post_id IN ( SELECT `post_id` FROM $wpdb->postmeta WHERE $wpdb->postmeta.meta_key = '_assigned' AND $wpdb->postmeta.meta_value = '%s' )";
    $sql .= " GROUP BY $wpdb->postmeta.post_id";
    $sql .= " ORDER BY $wpdb->postmeta._due ASC";

    $tasks = $wpdb->get_results( sprintf( $sql, $user_id ) ); 
```

有问题的字段在`_due`表中`wp_postmeta`。这是针对 Wordpress 的，但由于这是一个 MYSQL 问题，我想我会在这里问它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:45:57.143

那是因为您使用的是`GROUP BY`（错误地）并且 MySQL 不保证排序的顺序。如果您正确使用该功能，您将获得所需的结果。

请参阅[MySQL 扩展至`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html).

# concurrent-programming - Hazelcast MapLoader 如何处理同一个 key 的并发请求

> ID：14992041
> 
> 赞同：1
> 
> 时间：2013-02-20T23:41:30.463
> 
> 标签：concurrent-programming, hazelcast

假设我已经实现了存储和加载接口，并且并发请求到达了地图中不存在的键。

Hazelcast 是否确保对于同一个键上的这些并发请求只调用一次加载器，或者我是否必须在我的加载器实现中处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:10:44.703

无需外部锁。地图操作是原子的，包括地图存储操作。

# asp.net-mvc - 用淘汰赛js重新绑定json对象

> ID：14992046
> 
> 赞同：1
> 
> 时间：2013-02-20T23:42:08.037
> 
> 标签：asp.net-mvc, knockout.js, knockout-mapping-plugin

我正在使用 asplnet mvc 处理淘汰赛和 jquery。我使用从控制器中返回的 json 对象中剔除来应用绑定。这适用于我的标记。

如果用户单击屏幕上的按钮，我会调用控制器操作并再次从服务器检索数据。

此时，我是否需要重新绑定我的新 json 对象以淘汰或如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:05:02.540

我假设当用户单击按钮并调用控制器操作时，您这样做是作为 AJAX 回发而不是作为整页刷新。如果这是正确的，那么不，您不需要重新绑定新的 json 对象。你只需要使用你的新 json 对象来更新你的视图模型，然后敲除会处理剩下的事情。它的工作方式如下：

当您的页面最初加载时，您的页面会从您的控制器返回一个 javascript 对象。如果这个对象变成一个对应的对象，其中所有的属性都是knockout observables和observableArrays，你可以在应用knockout bindings后获得持久的双向数据绑定（即从模型到你的页面，从页面到你的模型） .

将您的 javascript 对象转换为所有属性都是可被淘汰的可观察对象的最简单方法是使用[淘汰映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。完成此操作后，您可以使用淘汰赛 applybindings 方法将其绑定到您的页面。

所以在初始页面加载时，可以这样设置：

```
//load your data
var data = ... some code to retrieve your data
//convert this into a viewmodel having knockout observables as properties
MyPage.ViewModel = ko.mapping.fromJS(data);
//bind this viewmodel to all knockout bindings
ko.applyBindings(MyPage.ViewModel); 
```

现在，当进行 AJAX 调用并检索到新数据时，当您更新 ViewModel 时，knockout 将自动更新 UI：

```
//AJAX call is made
var newdata = ... results from AJAX call
//Update viewmodel
MyPage.ViewModel.Property1(newdata.Property1);
MyPage.ViewModel.Property2(newdata.Property2);
...other properties...
...UI is automatically updated by knockout 
```

一旦 viewmodel 更新，UI 将自动刷新，这要归功于 knockout 的双向数据绑定。所以你只需要更新你的视图模型，knockout 会自动应用它的绑定并负责更新 UI。

# javascript - 有没有办法在不使用 javascript 子字符串函数或正则表达式的情况下生成这个字符串日期表示（带时区）？

> ID：14992051
> 
> 赞同：1
> 
> 时间：2013-02-20T23:42:35.373
> 
> 标签：javascript, date

从一个新的 Date 对象开始，有没有办法只使用 Date 对象的内置方法来生成以下字符串表示形式——即不允许使用正则表达式和/或子字符串操作？ `"2013-02-01T00:00:00-05:00"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:54:51.143

> 仅使用 Date 对象的内置方法

不可以。JavaScript 不会让您输出带有自定义时区值的 ISO 8601 字符串，[`.toISOSTring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)始终使用`Z`(UTC)。

您将需要使用各种 getter 方法并自己构造字符串。基于[如何在 JavaScript 中输出 ISO 8601 格式的字符串？](https://stackoverflow.com/q/2573521/1048572)以及[如何在 javascript 中将 ISOString 转换为本地 ISOString？](https://stackoverflow.com/q/14941615/1048572)：

```
function customISOstring(date, offset) {
    var date = new Date(date), // copy instance
        h = Math.floor(Math.abs(offset)/60),
        m = Math.abs(offset) % 60;
    date.setMinutes(date.getMinutes() - offset); // apply custom timezone
    function pad(n) { return n < 10 ? '0' + n : n }
    return    date.getUTCFullYear() + '-' // return custom format
        + pad(date.getUTCMonth() + 1) + '-'
        + pad(date.getUTCDate()) + 'T'
        + pad(date.getUTCHours()) + ':'
        + pad(date.getUTCMinutes()) + ':'
        + pad(date.getUTCSeconds())
        + (offset==0 ? "Z" : (offset<0 ? "+" : "-") + pad(h) + ":" + pad(m));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:47:01.530

它非常简单，尽管您需要一个辅助函数来避免重复：

```
var pad = function(n) {return n < 10 ? "0"+n : n;};
var output = date.getFullYear()+"-"+pad(date.getMonth()+1)+"-"+pad(date.getDate())
      +"T"+pad(date.getHours())+":"+pad(date.getMinutes())+":"+pad(date.getSeconds())
      +(date.getTimezoneOffset() > 0 ? "-" : "+")
          +pad(Math.floor(date.getTimezoneOffset()/60))
          +":"+pad(date.getTimezoneOffset()%60); 
```

# jquery - jQuery jsonp：跳过实际执行 jsonp？

> ID：14992052
> 
> 赞同：0
> 
> 时间：2013-02-20T23:42:39.707
> 
> 标签：jquery, jsonp

我正在尝试使用 jQuery 检查某个网站/端口是否被用户的计算机阻止/解除阻止。我可以让它正常工作，但有点恼火的是它会引发错误，例如“Uncaught SyntaxError: Unexpected token <”

有没有办法让jQuery在页面上做一个get请求来查看返回码，但实际上并没有把它作为javascript注入到网站中？如果没有，这段代码会有任何副作用吗？

注意：我不拥有要检查的站点，所以我不能让它们实现 jsonp。

```
var checkPorts = function() {
    var url = "__redacted__" ;
    $.ajax({
        url: url,
        type: "get",
        cache: false,
        dataType: 'jsonp', // it is for supporting crossdomain
        crossDomain : true,
        asynchronous : false,
        timeout : 5000, // set a timeout in milliseconds
        complete : function(xhr, responseText, thrownError) {
            if(xhr.status == "200") {
                //nothing
            }
            else {
                $("#ports-warning").slideDown();
            }
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:14:52.883

没有`asynchronous`属性`$.ajax`，你的意思是`async`？查看浏览器的调试器并查看请求是如何发出的，它必须是 XHR 才能让您的方法有任何工作机会。此外，如果您使用的是 jQuery 1.9.x，请尝试使用 jQuery Migrate 插件。

# dart - 如何在 Dart 中停止监听 HTML 事件？

> ID：14992065
> 
> 赞同：5
> 
> 时间：2013-02-20T23:43:36.187
> 
> 标签：dart

我正在监听这样的点击事件：

```
element.onClick.listen((e) => doCoolStuff()); 
```

我如何停止倾听？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T23:43:36.187

因为`onClick`返回一个[StreamSubscription](http://api.dartlang.org/docs/releases/latest/dart_async/StreamSubscription.html)，你可以`cancel()`停止接收事件。

这是一个例子：

```
import 'dart:async';

// ...

var subscription = element.onClick.listen((e) => doCoolStuff());
// later
subscription.cancel(); 
```

# ms-access - VBA - “编译错误：找不到方法或数据成员”

> ID：14992067
> 
> 赞同：4
> 
> 时间：2013-02-20T23:43:40.413
> 
> 标签：ms-access, compiler-errors, vba

我一直在开发一个 Access 表单来作为 SQL 数据库的前端。我一直在与开发人员合作，他们将以下 VBA 代码添加到我们的主窗体中：

```
Private Sub Form_Current()
    If Me.NewRecord = True Then
        Me.Client_Name.Enabled = True
        Me.SSN.Enabled = True
        Me.DOB.Enabled = True
        Me.Prob_Fee.Enabled = True
        Me.Settle_Atty_Amt.Enabled = True
        Me.Settle_Date.Enabled = True
        Me.Final_Date.Enabled = True
    Else
        Me.Client_Name.Locked = True
        Me.SSN.Locked = True
        Me.DOB.Locked = True
        Me.Prob_Fee.Locked = True
        Me.Settle_Atty_Amt.Locked = True
        Me.Settle_Date.Locked = True
        Me.Final_Date.Locked = True
    End If
End Sub 
```

当我尝试向该语句添加新变量时`Me.Case_ID.Locked = True`，返回以下错误：

> 编译错误：找不到方法或数据成员

我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:26:25.487

确保您指的是刚刚添加的控件的名称。它可能与包含的字段/列不同。在属性表的“其他”选项卡上，您会找到名称，即您需要的属性。它通常与包含的控件的名称不同。

![控件名称](../Images/30e5cf65c161f131568d12bbbecd9e33.png)

# objective-c - 测试使用大中央调度的 GUI 组件

> ID：14992068
> 
> 赞同：1
> 
> 时间：2013-02-20T23:43:43.333
> 
> 标签：objective-c, macos, cocoa, grand-central-dispatch, appkit

我正在尝试为一些使用大中央调度的 gui 组件编写单元测试。我想从测试中调用线程代码，等待它完成，然后检查 gui 对象上的结果。

```
dispatch_queue_t myQueue = dispatch_queue_create();

- (void)refreshGui {
    [self.button setEnabled:NO];
    dispatch_async(myQueue, ^{
        //operation of undetermined length
        sleep(1); 

        dispatch_sync(dispatch_get_main_queue(), ^{
            // GUI stuff that must be on the main thread,
            // I want this to be done before I check results in my tests.
            [self.button setEnabled:YES];
        });
    });
} 
```

在我的测试中，我想做这样的事情：

```
-(void)testRefreshGui {
    [object refreshGui];
    [object blockUntilThreadedOperationIsDone];
    STAssertTrue([object isRefreshedProperly], @"did not refresh");
} 
```

我的第一个想法是在相关队列上同步调用一些东西，就像这样。不幸的是，当从主队列调用时，这会导致死锁（因为 gui 代码中有一个 dispatch_sync() 到主队列，并且测试也在主线程上运行）：

```
-(void)blockOnQueue:(dispatch_queue_t)q {
    dispatch_sync(q, ^{});
} 
```

出于同样的原因，使用调度组`dispatch_group_wait(group, DISPATCH_TIME_FOREVER)`也会导致死锁。

我想出的一个黑客解决方案是这样的：

```
- (void)waitOnQueue:(dispatch_queue_t)q {
    __block BOOL blocking = YES;
    while (blocking) {
        [NSRunLoop.mainRunLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:.1]];
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
            dispatch_sync(q, ^{});
            blocking = NO;
        });
    }
} 
```

不幸的是，这个“解决方案”存在泵送主运行循环并导致其他测试运行的问题，这对我来说破坏了许多事情。

我也不想将 GUI 代码更改为`dispatch_sync()`，`dispatch_async()`因为这不是该队列的正确行为，并且在测试中，GUI 代码也不能保证在测试检查结果之前完成。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:20:20.203

您应该将等待 GUI 更新运行的测试需求与主代码路径的运行方式分离。在您发布的第一个代码块中，几乎`dispatch_sync`可以肯定是错误的方法（与在部署中）。我猜你这样做是为了尝试使用队列本身来联锁两个并行任务。如果您真的致力于使用这种不太理想的方法，您可以执行以下操作：`dispatch_async``dispatch_sync``dispatch_sync`

```
- (void)testOne
{
    SOAltUpdateView* view = [[SOAltUpdateView alloc] initWithFrame: NSMakeRect(0, 0, 100, 100)];

    STAssertNotNil(view, @"View was nil");
    STAssertEqualObjects(view.color, [NSColor redColor] , @"Initial color was wrong");

    dispatch_queue_t q = dispatch_queue_create("test", 0);
    dispatch_group_t group = dispatch_group_create();
    view.queue = q;

    // Run the operation
    [view update];

    // An operation we can wait on
    dispatch_group_async(group, q, ^{ });

    while (dispatch_group_wait(group, DISPATCH_TIME_NOW))
    {
        CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0, YES);
    }

    STAssertEqualObjects(view.color, [NSColor greenColor] , @"Updated color was wrong");

    view.queue = nil;
    [view release];
    dispatch_release(group);
    dispatch_release(q);
} 
```

那是似乎最接近你已经拥有的方法，但我想出了一些可能更好/更清洁的方法：信号量可以为你做这个联锁，只需一点点努力，你就可以侵入你的实际的 GUI 代码非常少。（注意：实际上根本不可能*没有*入侵，因为为了使两个并行任务互锁，它们必须共享一些要互锁*的*东西——共享的东西——在你现有的代码中它是队列，在这里我'正在使用信号量。）考虑这个人为的例子：我为测试工具添加了一个通用的方法来推入一个信号量，可以用来在后台操作完成时通知它。对要测试的代码的“入侵”仅限于两个宏。

NSObject+AsyncGUITestSupport.h：

```
@interface NSObject (AsyncGUITestSupport)

@property (nonatomic, readwrite, assign) dispatch_semaphore_t testCompletionSemaphore;

@end

#define OPERATION_BEGIN(...) do { dispatch_semaphore_t s = self.testCompletionSemaphore; if (s) dispatch_semaphore_wait(s, DISPATCH_TIME_NOW); } while(0)
#define OPERATION_END(...) do { dispatch_semaphore_t s = self.testCompletionSemaphore; if (s) dispatch_semaphore_signal(s); } while(0) 
```

NSObject+AsyncGUITestSupport.m：

```
#import "NSObject+AsyncGUITestSupport.h"
#import <objc/runtime.h>

@implementation NSObject (AsyncGUITestSupport)

static void * const kTestingSemaphoreAssociatedStorageKey = (void*)&kTestingSemaphoreAssociatedStorageKey;

- (void)setTestCompletionSemaphore:(dispatch_semaphore_t)myProperty
{
    objc_setAssociatedObject(self, kTestingSemaphoreAssociatedStorageKey, myProperty, OBJC_ASSOCIATION_ASSIGN);
}

- (dispatch_semaphore_t)testCompletionSemaphore
{
    return objc_getAssociatedObject(self, kTestingSemaphoreAssociatedStorageKey);
}

@end 
```

SOUpdateView.h

```
@interface SOUpdateView : NSView
@property (nonatomic, readonly, retain) NSColor* color;
- (void)update;
@end 
```

SOUpdateView.m

```
#import "SOUpdateView.h"
#import "NSObject+AsyncGUITestSupport.h"

@implementation SOUpdateView
{
    NSUInteger _count;
}

- (NSColor *)color
{
    NSArray* colors = @[ [NSColor redColor], [NSColor greenColor], [NSColor blueColor] ];
    @synchronized(self)
    {
        return colors[_count % colors.count];
    }
}

- (void)drawRect:(NSRect)dirtyRect
{
    [self.color set];
    NSRectFill(dirtyRect);
}

- (void)update
{
    OPERATION_BEGIN();
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        sleep(1);

        @synchronized(self)
        {
            _count++;
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [self setNeedsDisplay: YES];
            OPERATION_END();
        });
    });
}

@end 
```

然后是测试工具：

```
#import "TestSOTestGUI.h"
#import "SOUpdateView.h"
#import "NSObject+AsyncGUITestSupport.h"

@implementation TestSOTestGUI

- (void)testOne
{
    SOUpdateView* view = [[SOUpdateView alloc] initWithFrame: NSMakeRect(0, 0, 100, 100)];

    STAssertNotNil(view, @"View was nil");
    STAssertEqualObjects(view.color, [NSColor redColor] , @"Initial color was wrong");

    // Push in a semaphore...
    dispatch_semaphore_t sem = dispatch_semaphore_create(0);
    view.testCompletionSemaphore = sem;

    // Run the operation
    [view update];

    // Wait for the operation to finish.
    while (dispatch_semaphore_wait(sem, DISPATCH_TIME_NOW))
    {
        CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0, YES);
    }

    // Clear out the semaphore
    view.testCompletionSemaphore = nil;

    STAssertEqualObjects(view.color, [NSColor greenColor] , @"Updated color was wrong");    
}

@end 
```

希望这可以帮助。

# c# - 您如何按一个属性对 CollectionViewSource 进行排序，然后将另一个属性作为决胜局？

> ID：14992072
> 
> 赞同：17
> 
> 时间：2013-02-20T23:44:02.983
> 
> 标签：c#, wpf, xaml

目前，我的 CollectionViewSource 按描述对项目集合进行排序。如果描述相同，我想根据ID进行排序。如何指定先按描述排序，然后按 ID 排序？

我尝试使用 PropertyName="Id" 添加第二个 SortDescription，但没有奏效。

```
 <CollectionViewSource x:Key="Items" Source="{Binding Items}" >
 <CollectionViewSource.SortDescriptions>
 <scm:SortDescription PropertyName="Description"/>
 </CollectionViewSource.SortDescriptions>
 </CollectionViewSource> 
```

**编辑：** ID 属性在视图模型上是私有的。没有抛出错误。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-21T00:08:30.260

我不确定为什么添加`SortDescription`for`Id`不起作用，因为它应该可以正常工作。

像这样：

```
<CollectionViewSource x:Key="Items" Source="{Binding ElementName=UI, Path=Items}" >
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="Description" />
        <scm:SortDescription PropertyName="Id" />
    </CollectionViewSource.SortDescriptions>
 </CollectionViewSource> 
```

我根据您的需要整理了一个完整的示例：

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    Title="MainWindow" Height="124" Width="464" Name="UI" >
<Window.Resources>

   <CollectionViewSource x:Key="Items" Source="{Binding ElementName=UI, Path=Items}" >
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="Description" />
        <scm:SortDescription PropertyName="Id" />
    </CollectionViewSource.SortDescriptions>
   </CollectionViewSource>
</Window.Resources>

<Grid>
    <ListBox ItemsSource="{Binding Source={StaticResource Items}}" />
</Grid> 
```

代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyObject> myVar = new ObservableCollection<MyObject>();

    public MainWindow()
    { 
        InitializeComponent();
        Items.Add(new MyObject { Description = "Stack", Id = 5 });
        Items.Add(new MyObject { Description = "OverFlow", Id = 1 });
        Items.Add(new MyObject { Description = "StackOverFlow", Id = 2 });
        Items.Add(new MyObject { Description = "Stack", Id = 1 });
        Items.Add(new MyObject { Description = "Stack", Id = 0 });
        Items.Add(new MyObject { Description = "OverFlow", Id = 7 });  
    }

    public ObservableCollection<MyObject> Items
    {
        get { return myVar; }
        set { myVar = value; }
    }
}

public class MyObject
{
    public int Id { get; set; }
    public string Description { get; set; }

    public override string ToString()
    {
        return string.Format("Desc: {0}, Id: {1}", Description, Id);
    }
} 
```

结果：

![在此处输入图像描述](../Images/dcd3e6c5bc83e6df890572bc98cdb3b9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-04T00:04:03.620

@sa_ddam213 的答案应该有效，但您不需要额外的 ToString() 方法；您需要添加到 XAML 中的只是打开**IsLiveFilteringRequested**，至少在 .Net Framework 4.5.1 中是这样。

```
<CollectionViewSource IsLiveFilteringRequested="True" x:Key="Items" Source="{Binding ElementName=UI, Path=Items}">
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="Description" />
        <scm:SortDescription PropertyName="Id" />
    </CollectionViewSource.SortDescriptions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-29T08:05:44.830

就我而言，我有一个必须转换然后排序的枚举列表。在其他答案的帮助下，我的代码最终看起来像这样。

```
<CollectionViewSource x:Key="MyEnumList" Source="{Binding ListFromViewModel, Converter={StaticResource MyEnumConverter}}">
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="."/>
    </CollectionViewSource.SortDescriptions>                
</CollectionViewSource> 
```

# javascript - imacros javascript循环通过csv

> ID：14992074
> 
> 赞同：3
> 
> 时间：2013-02-20T23:44:03.347
> 
> 标签：javascript, imacros

我的 1first.iim 文件如下所示：

```
VERSION BUILD=7601105 RECORDER=FX
URL GOTO=https:...logout 'just in case 
URL GOTO=https:...login 'go to login
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:loginform ATTR=NAME:username CONTENT=user1
TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:loginform ATTR=NAME:passwd CONTENT=password1
TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:loginform ATTR=ID:loginform_submit

SET !DATASOURCE file1.csv
SET !DATASOURCE_COLUMNS 13
SET !DATASOURCE_LINE {{!LOOP}}

URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}} 
```

…………

它必须循环这个 csv 大约 50 次。

然后我需要加载另一个 iim：2second.iim

```
VERSION BUILD=7601105 RECORDER=FX
URL GOTO=https:...logout 'just in case 
URL GOTO=https:...login 'go to login
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:loginform ATTR=NAME:username CONTENT=user2
TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:loginform ATTR=NAME:passwd CONTENT=password2
TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:loginform ATTR=ID:loginform_submit

SET !DATASOURCE file2.csv
SET !DATASOURCE_COLUMNS 13
SET !DATASOURCE_LINE {{!LOOP}}

URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}} 
```

…………

而且我需要多次循环遍历 csv。等等大约80次。

是否可以指定每个 csv 文件要经过多少个 csv 行？或者也许可以说*循环遍历 100 行*，但如果遇到 EOF（错误代码 -951），则停止运行此宏并移至下一个

可以逐行设置数据源

```
SET !DATASOURCE file1.csv
SET !DATASOURCE_COLUMNS 13

SET !DATASOURCE_LINE 1

URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}}

SET !DATASOURCE_LINE 2

URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}}

SET !DATASOURCE_LINE 3

URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}} 
```

......... SET !DATASOURCE_LINE 30

```
URL GOTO={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field1 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form ATTR=NAME:field2 CONTENT={{!COL3}} 
```

但如果有另一种方式，我宁愿不逐行浏览文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:05:19.663

以防万一有人需要更详细的答案，这就是我发现的：

```
var unu;
var doi;
    unu =  "CODE:";
    unu  +=  "VERSION BUILD=7601105 RECORDER=FX" + "\n";
    unu  +=  "URL GOTO=...logout" + "\n";
    unu  +=  "URL GOTO=...login" + "\n";
    unu  +=  "TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:loginform ATTR=NAME:username CONTENT=user" + "\n";
    unu +=  "TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:loginform ATTR=NAME:passwd CONTENT=password" + "\n";
    unu +=  "TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:loginform ATTR=ID:loginform_submit" + "\n";

    doi =  "CODE:";
    doi +=  "SET !DATASOURCE file1.csv" + "\n";
    doi +=  "SET !DATASOURCE_COLUMNS 3" + "\n";

    doi +=  "SET !DATASOURCE_LINE {{i}}" + "\n";
    doi +=  "URL GOTO={{!COL2}}" + "\n";
    doi +=  "TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:formular ATTR=NAME:field1 CONTENT={{!COL1}}" + "\n";
    doi +=  "TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:formular ATTR=ID:field2 CONTENT={{!COL3}}" + "\n";
    doi +=  "WAIT SECONDS = 5" + "\n";

iimPlay(unu);
for(i=1;i<4;i++){
iimSet("i",i);
iimPlay(doi);
} 
```

这样，您只需执行一次登录部分，然后它会根据需要多次循环遍历 csv 文件。

WAIT SECONDS = 5 只是一个占位符，让我有时间暂停或停止宏运行。

如果有人可以改进我的解决方案，我将不胜感激。编辑：我忘了补充。将此保存为 yournewjsfile.js 并单击播放，就像对任何其他 iim 文件一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:14:52.747

所有这一切都只能使用 javascript 或类似工具来完成。您可以在循环中定义部分代码并运行不同的宏并跟踪错误。

运行不同的脚本；

```
iimPlay("Test.iim"); 
```

循环代码：

```
for(i=1;i<max_loop number){
your_code_here
} 
```

# java - 取消装箱的空对象会引发意外的 NullPointerException

> ID：14992077
> 
> 赞同：6
> 
> 时间：2013-02-20T23:44:22.910
> 
> 标签：java, eclipse, nullpointerexception, unboxing

如果您运行以下代码，

```
public class Foo{
    public static void main(String[] args){
        int id = new Bar().getId(); // throws unexpected NullPointerException
    }

    private static class Bar{
        private final Integer id;

        public Bar(){
            this(null);
        }

        public Bar(Integer id){
            this.id = id;
        }

        public Integer getId(){
            return id;
        }
    }
} 
```

您将获得以下堆栈跟踪，

```
Exception in thread "main" java.lang.NullPointerException
    at Foo.main(Foo.java:3) 
```

为什么没有编译器警告或任何东西？恕我直言，拆箱是一个非常令人讨厌的微妙之处，或者我可能只是天真。

* * *

[除了@Javier](https://stackoverflow.com/a/14992146/584862)提供的答案之外，如果您使用的是 Eclipse，则需要执行以下操作才能启用此功能：

1.  导航到`Window`> `Preferences`> `Java`> `Compiler`>`Errors/Warnings`
2.  展开**潜在的编程问题**
3.  **将装箱和拆箱转换**切换为“警告”或“错误”
4.  点击“确定”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:49:49.757

我不知道您使用的是什么 IDE，但 Eclipse 有一个选项可以启用对装箱和拆箱转换的警告。不可能将其检测为空指针访问，因为 null 不是立即拆箱的，而是通过`Bar.getId()`.

> Integer 类型的表达式被拆箱到 int
> Foo.java 第 3 行

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T23:54:12.463

如果您尝试在 a 上使用任何方法`null`或做任何对 a 没有意义的事情`null`，它会抛出 a `NullPointerException`。

自动拆箱是使用`[Integer object].intValue()`方法（或类似方法）实现的，因此它会抛出 a`NullPointerException`因为您不能`null`调用方法。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-24T03:53:20.857

[JDK™ 5.0 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)中似乎记录了此行为，

> `int`..您可以在很大程度上忽略and之间的区别`Integer`，但有一些警告。表达式可以有一个`Integer`空值。如果你的程序试图自动拆箱 null，它会抛出一个`NullPointerException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:58:20.790

`NullPointerException`是一个`RuntimeException`比IDE在编译代码时无法检测到的问题。

相反，一个好的做法是在取消装箱之前检查 null。

```
int getId(){
    if(id!=null){
        return id;
    }
    // return other or throw a checked exception.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T00:05:23.533

似乎是一个完全合理的运行时异常。如果您的主要代码是：

```
public static void main(String[] args){        
    Integer idObj = new Bar().getId();
    int id = idObj;   // throws NullPointerException
} 
```

没有人会对空指针异常感到惊讶。Bar 类返回一个空值，空对象指针不能转为简单值。Bar 类的实现可能会更改为将 id 初始化为非空值。这段代码可以独立于 Bar 类进行编译，因此关于 Bar 类的动态工作的假设当然不应该被编码到这段代码中。

这可能很明显，但真正的解决方案是使用`int`id 成员，而不是`Integer`. 那么，这没有问题：

```
private static class Bar{
    private final int id;

    public Bar(){
        this(0);
    }

    public Bar(int id){
        this.id = id;
    }

    public int getId(){
        return id;
    }
} 
```

（但我想你已经意识到了这一点:-)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T04:15:43.003

装箱只不过是将像 Integer 这样的对象转换为原生等效的“int”的语法糖。本机不能为空，但对象可以。在这些情况下，装箱机制不会阻止 NullPointerExceptions。

# asp.net - asp.net，打开并显示 .msg 文件

> ID：14992080
> 
> 赞同：0
> 
> 时间：2013-02-20T23:44:32.420
> 
> 标签：asp.net, parsing, msg

寻找解决方案或指导，以便我可以解析 .msg（outlook 电子邮件）文件并显示在 asp.net（vb.net）中。基本上，解析 .msg 文件是问题所在。我尝试使用outlook dll，但没有示例代码，如何加载和解析电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:11:34.707

您正在寻找的是**MIME 消息解析器**。

有一些免费的源代码可以为您完成这项工作：

[http://mailutilities.codeplex.com/](http://mailutilities.codeplex.com/)

[http://www.codeproject.com/Articles/11882/Advanced-MIME-Parser-Creator-Editor](http://www.codeproject.com/Articles/11882/Advanced-MIME-Parser-Creator-Editor)

[http://www.codeproject.com/Articles/19777/MIME-Compliant-Parser](http://www.codeproject.com/Articles/19777/MIME-Compliant-Parser)

和一个商业广告：[http ://www.aspnetmime.com/](http://www.aspnetmime.com/)

你所做的是，你给你的邮件，这实际上是一个文本文件，然后他们返回你的电子邮件部分，比如主题、标题、正文等......

# php - 尝试向 HTML 选择字段数组 Php/AJAX/jQuery 动态添加选项

> ID：14992081
> 
> 赞同：2
> 
> 时间：2013-02-20T23:44:43.067
> 
> 标签：php, jquery, ajax

我有一个包含 10 个选择字段的 HTML 数组，每次调用 div-popup 时都必须由 jQuery 填充。（每个人都有相同的选项）我们有数百名员工的定期需求，此表格旨在允许将人员配置请求转发给上级管理部门以批量方式批准。我将使用 .serialize 提交表单，但我不清楚如何使用正确的输入选择信息初始化此元素。我能找到的所有信息都是关于提交表单数组的，我已经知道该怎么做了。

这是HTML结构：

```
<select id="detJobsCR[]" name="detJobsCR[]"> </select> 
```

这是我填充选择字段的尝试：

```
$.post("events.php",{a: 'detadd-joblist', dept_id: deptID}, function(data) {
    for(var i=0;i<10;i++){
        $('#detJobsCR[i]').html(data);
    }   
}); 
```

（我尝试明确定义每个元素数组位置 [0],[1]..etc 并没有帮助。）

返回的数据是简单的 HTML，例如：

```
<option value='38'>Admin Support Assistant I</option>
<option value='39'>Admin Admin Support Assistant II</option>... 
```

感谢您提供的任何帮助！

仅供参考更新：穆萨的回答完美。事实证明，出于同样的原因，我也遇到了日期和时间选择器无法正常工作的问题。当我将它们转换为类时，我可以使用它（如下），并且现在都可以正常工作：

```
$(".detDateStart").datepicker(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:50:24.153

ID 应该是唯一的，因此每个选择都应该有自己的 ID。如果您希望有一个标识符来表示所有选择，您可以使用一个类，例如`<select class="detJobsCR" name="detJobsCR[]"> </select>`，然后选择它们`$('.detJobsCR')`并将它们的 html 设置为 .`html(data)`

```
$.post("events.php",{a: 'detadd-joblist', dept_id: deptID}, function(data) {
    $('.detJobsCR').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:56:07.720

你的问题有两个方面：

1.  你把`i`引号放在里面，所以它没有解释变量 i 的值
2.  即使`i`不在引号内，当 jquery 解析`[i]`表达式中的 时，它也在寻找具有 id`detJobsCR`和`i`定义了属性的元素。

由于您只有一个元素，因此您可以使用 ID`detJobsCR[]`来查询它： `$('#detJobsCR\\[\\]')` 您需要转义`[`and`]`字符，以便 jquery 知道它是 ID 的一部分而不是解析规则（用于解析/查找属性）。

正如 Musa 所建议的，您可以通过使用不需要转义值的简单类名来使您的生活更轻松。但是，如果您确实想通过 id 进行选择，上面的示例应该可以解决问题。

# .net - 用于单元测试的单个实现者接口是反模式吗？

> ID：14992084
> 
> 赞同：12
> 
> 时间：2013-02-20T23:45:04.037
> 
> 标签：.net, unit-testing, interface, mocking, anti-patterns

关于单元测试，我被告知生产代码中不应包含与测试相关的代码。

好吧，每次我尝试进行单元测试时，我都觉得自己违反了这条规则。

我的程序集内部有一个类，`Xyzzy`. 我想将它依赖注入另一个类，然后存根它，这样我就可以单独测试另一个类，所以我创建了一个接口，`IXyzzy`. 哎呀，现在我的生产中的代码实际上只用于测试。更糟糕的是，我有点反对接口是什么（描述实现者可以*做什么*，而不是它*是*什么）。Xyzzy 的公共接口和 IXyzzy 完全一样，没有其他人（除了存根）实现 IXyzzy。

这对我来说似乎是一件坏事。

我可以创建一个抽象基类或创建我想在 Xyzzy `Overridable`/上测试的所有公共方法`virtual`，但这也感觉不对，因为 Xyzzy 不是为继承而设计的，并且从 YAGNI 的角度来看，它永远不会被继承。

创建单实现者接口仅仅是为了测试反模式吗？有更好的选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:59:04.000

只为测试编写代码并没有错。这实际上是正常的，就像生产代码包含仅用于调试和生产监控的功能一样。没有明确的理由不允许这样做。代码应该支持应用程序生命周期的所有方面。测试只是生命周期的另一部分。

从这个意义上说，您使用接口的方法是正确的。如果您让生产应用程序的其余部分也使用接口（而不是具体类，尽管只有一个），那么它在架构上是合理的。

> 我有点反对接口是什么（描述实现者可以做什么，而不是它是什么）

我在这里没有明白你的意思，因为界面确实描述了对象可以做什么。只有一个具体（生产）实现不会破坏此属性。

如果你仔细想想，每个类都有一个广义上的“接口”：所有方法的公共签名都向外部公开了该类支持的接口。.NET 接口是否实现只是一个细节。班级仍然对外界做出同样的承诺。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T01:20:47.770

根据我的经验，这是非常典型的 .NET 开发，因为方法覆盖是基于选择加入的。如果你想模拟一个依赖，你需要一个接口或一个方法都是虚拟的对象。

在像 Java 这样的语言中，每个方法都是可覆盖的，单一实现接口确实是一种反模式，优秀的开发人员会指出这一点。

继续做你正在做的事情——在我看来，无论你犯了什么罪，都轻而易举地超过了单元测试的好处！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T12:22:01.767

是的，这是一种反模式。模式将是“在特定上下文中解决常见问题的方法”。但在这种情况下，我们所拥有的是一种*解决*方法，而不是解决方案。

有问题的问题是需要*将要测试的单元与其（某些）依赖项隔离开*来，以便在编写单元测试时不必考虑这些依赖项的实现。这个问题的通用和真正的解决方案称为“模拟”，测试编写者可以从模拟的依赖项中指定所需的任何行为。

相反，强制开发人员创建不必要的单独接口，或将方法声明为`virtual`，只是技术上无法将一个单元与其他单元完全隔离的一种解决方法。

对于 .NET，有几个模拟工具可以提供这种隔离能力，即 TypeMock Isolator、JustMock 和 MS Fakes。其他语言/平台（包括 Java、Ruby 和 Python）有自己的工具，具有类似的表达能力。

# android - Android以编程方式添加片段 - 在父级和布局中的位置

> ID：14992085
> 
> 赞同：4
> 
> 时间：2013-02-20T23:45:07.130
> 
> 标签：android, android-fragments

好的，我正在尝试创建一个通用应用程序，该应用程序在手机视图中显示 3 个选项卡，在平板电脑视图中显示 3 个列。因此，我使用线性布局创建了几个不同的 XML 布局。

但是，使用片段时，我遇到了一个问题 - 我想在该片段中进行选择时删除最左边的列。我相信我可以做到这一点，但事实证明我无法删除在 XML 中声明的片段。所以现在，我尝试在 XML 中创建中间列和右列：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/menu_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/classification_fragment"
        android:name="uk.colessoft.android.hilllist.fragments.MenuClassificationFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        tools:layout="@layout/list_classifications" >
    </fragment>

    <fragment
        android:id="@+id/map"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        class="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout> 
```

然后使用添加第一列

```
FragmentManager fragmentManager = getSupportFragmentManager();
        android.support.v4.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        MenuCountryFragment countryFragment=new MenuCountryFragment();
        fragmentTransaction.add(R.id.menu_layout, countryFragment, "country_menu").commit(); 
```

但我有两个问题：

a) 上面的代码只将片段放在线性布局的右侧，我无法指定位置。它必须在左边。

b) XML 让我可以自由地根据屏幕大小/方向为片段定义不同的权重。在 Fragments 中以编程方式设置布局参数似乎是一种倒退。我通过在 xml 中放置一个占位符视图来解决这个问题，我从中读取布局参数并将它们分配到 onCreateView 但它是一个hack。

我知道我可以通过将片段添加为 xml 中第一个元素的子元素来将片段放置在正确的位置，但是当我这样做并删除片段时，它会留下一个空白空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:50:39.720

为您要添加的新片段（在您的 XML 中）创建一个占位符，如下所示...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/menu_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

    <fragment
        android:id="@+id/classification_fragment"
        android:name="uk.colessoft.android.hilllist.fragments.MenuClassificationFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        tools:layout="@layout/list_classifications" >
    </fragment>

    <fragment
        android:id="@+id/map"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        class="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout> 
```

然后，不是在运行时添加新片段，而是替换空容器的内容......

```
FragmentManager fragmentManager = getSupportFragmentManager();
android.support.v4.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
MenuCountryFragment countryFragment=new MenuCountryFragment();
fragmentTransaction.replace(R.id.realtabcontent, newFrag).commit();
fragmentManager.executePendingTransactions(); 
```

希望这可以帮助。

# excel - 更改 VBA 宏代码以更改数字

> ID：14992093
> 
> 赞同：0
> 
> 时间：2013-02-20T23:45:30.780
> 
> 标签：excel, vba

我要做的是递增数字，然后循环减去第一个`2`数字`1` ，然后增加其余的数字，直到第一个`2`数字=`0`

所以我`M201001`会成为`m191002`，下一个将是`m181003`直到`m011020`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:20:19.417

您需要做的是使用`left`,`mid`和`right`函数将您的值分解为 3 个。

然后根据需要进行循环。我正在自己尝试，所以一旦我这样做了，我会更新我的答案。

**添加代码：**

```
Sub Testing()

    Dim myIn As String
    myIn = "M201001"

    Dim myLeft As String
    Dim myMid As Integer, myRight As Integer, i As Integer
    Dim myOut As String
    myLeft = Left(myIn, 1)
    myMid = CInt(Mid(myIn, 2, 2))
    myRight = CInt(Right(myIn, 4))
    myOut = myLeft & Format(myMid, "00") & Format(myRight, "0000")
    i = 0

    Debug.Print "IN:        " & myIn
    Debug.Print "BROKEN UP: " & myOut

    Do Until myMid = -1
        Debug.Print "ITERATION " & Format(i, "00") & ": " & myLeft & Format(myMid, "00") & Format(myRight, "0000")

        myMid = myMid - 1
        myRight = myRight + 1
        myOut = myLeft & Format(myMid, "00") & Format(myRight, "0000")
        i = i + 1
    Loop

End Sub 
```

如果您需要任何解释，请询问。我很乐意解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:54:25.510

试试这个

```
Function GetNextNumber(n As String) As Variant
    ' Validate input
    If Len(n) <> 7 Then
        GetNextNumber = xlErrNum
        Exit Function
    ElseIf Left$(n, 1) <> "M" Then
        GetNextNumber = CVErr(xlErrNum)
        Exit Function
    End If

    GetNextNumber = Left$(n, 1) & Format(val(Mid$(n, 2)) - 9999, "000000")

End Function 
```

使用这个进行测试

```
Sub demo()
    Dim n As Variant

    n = "M201001"
    Debug.Print n
    Do
        n = GetNextNumber(CStr(n))
        If IsError(n) Then Exit Sub
        Debug.Print n
    Loop Until val(Mid$(n, 2)) <= 19999
End Sub 
```

# android - 运行后未创建 Android 片段

> ID：14992097
> 
> 赞同：1
> 
> 时间：2013-02-20T23:45:56.340
> 
> 标签：android, user-interface, fragment

在设置活动中的内容视图后，我试图将片段添加到活动中。我没有使用兼容性包并将我的目标 API 设置为 16。我希望在主活动中的 setContentView 方法之后将活动设置为片段布局，但在运行时，永远不会添加片段并且屏幕在空白处。片段中生命周期事件的回调永远不会被调用，因此 System.outs 不会输出。Logcat 也不输出任何与片段相关的错误。如果在activity_main.xml 中创建了片段元素，则片段可以正常工作，但将其添加到类中的RelativeLayout 则不起作用。有人可以帮帮我吗？谢谢！编辑：尝试使用 FrameLayout 作为 fragment_container 但没有区别。

这是我的主要活动：

```
package com.example.derp;  

import android.os.Bundle;  
import android.app.Activity;  
import android.app.Fragment;  
import android.app.FragmentManager;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Fragment frag = new Fragment();
    FragmentManager fManager = getFragmentManager();
    fManager.beginTransaction().add(R.id.fragment_container, frag).commit();
}
} 
```

这是我的片段：

```
 package com.example.derp;
import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Frag extends Fragment{

public Frag(){

}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    System.out.println("onAttach");
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("onCreate");
}

@Override
public void onStart() {
    super.onStart();
    System.out.println("onStart");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
    System.out.println("onCreateView");
    return inflater.inflate(R.layout.fragment_frag, container, false);//
}
} 
```

这是 fragment_frag.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Button" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="64dp"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText>

</RelativeLayout> 
```

activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >    

<RelativeLayout 
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:53:54.400

您没有创建片段类的实例。相反，您正在创建基片段类的对象。

改变...

```
Fragment frag = new Fragment(); 
```

至...

```
Fragment frag = new Frag(); 
```

# java - Authorize.net 创建 ARB 并获取 Id

> ID：14992102
> 
> 赞同：1
> 
> 时间：2013-02-20T23:46:21.103
> 
> 标签：java, authorize.net, authorize.net-arb, silent-post

当我创建一个新的 ARB 订阅时，响应回来了，我保存了它给我们的 id。我试了一下，它给了我们“33”。

然后当静默 post 回调命中我们的方法时，响应具有不同的 id，15631016。

15631016 与我们在 authorize.net 在线门户中看到的匹配是正确的。

那么，什么是 33，为什么它不返回真正的 ARB ID？

下面是创建新 ARB 并获取 arbId 的代码：

```
net.authorize.arb.Transaction arbTransaction = createARBTransaction(startDate.getTime(), creditCard, member, splitOccurrences.intValue() - 1, splitUnit, useBillingAddress, billingAddress, recurringOrder.getTotalAmount().doubleValue(), recurringOrder);

net.authorize.arb.Result<?> arbResult = (net.authorize.arb.Result<?>) merchant.postTransaction(arbTransaction);

String arbId;
if (arbResult.isOk()) {
   arbId = arbResult.getResultSubscriptionId();
} 
```

如果`getResultSubscriptionId()`不是获取新 ARB 订阅 ID 的正确方法，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:15:13.967

根据源代码，您使用的是正确的方法。

如果您将调用追溯到代码中，您将看到订阅 ID 是由 net.authorize.arb.Result 的 importResponseMessages() 中的以下调用设置的

```
getElementText(txn.getCurrentResponse().getDocumentElement(),AuthNetField.ELEMENT_SUBSCRIPTION_ID.getFieldName()); 
```

所以如果你在你的`arbResult`变量上调用它，你可能会更接近。请注意，`txn`应替换为您的变量`arbTransaction`。

或者，您可以深入研究响应本身，了解 Authorize.net APK 未返回正确订阅 ID 的原因。

```
xml = arbTransaction.getCurrentResponse().dump(true); 
```

确定`true`是否折叠 XML 树。`xml`应该是一个字符串，其中包含来自 authorize.net 的 XML 响应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:01:02.967

我浏览了示例代码以及他们的社区，没有太多可做的。我唯一能想到的尝试就是改变：

```
arbResult.getResultSubscriptionId(); 
```

至：

```
arbTransaction.getResultSubscriptionId(); 
```

我知道这听起来不合逻辑，但这是我能做到的最好的。

# regex - R中的正则表达式查找

> ID：14992104
> 
> 赞同：2
> 
> 时间：2013-02-20T23:46:29.840
> 
> 标签：regex, r

我想从带有“ **M_South_Africa_5_14** ”和“ **P_Zimbabwe_Tot** ”等字符串的向量中提取国家/地区。我一直在尝试使用单个 grep 或 stringr::str.extract 语句来完成它，但没有成功。当然，我可以用 '_' 打破字符串，然后收集碎片，但是可以用正则表达式来做到这一点吗？

```
grep(value = TRUE, 
     x = 'M_South_Africa_5_14', 
     pattern = '(?!^[PMF]{1})(?![_])([A-Za-z]{2,20})[_][A-Za-z]{2,20}(?!$)|(?!^[PMF]{1})(?![_])([A-Za-z]{2,20})', 
     perl = TRUE) 
```

当然，简化这个正则表达式怪物会很棒，但我实际上想知道我是否可以在 R 上运行正则表达式查找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:02:19.900

这适用于您的示例：

```
> library(gsubfn)
> x <- c('M_South_Africa_5_14', 'P_Zimbabwe_Tot')
> pat <- "_(.*\\D)_"
> strapplyc(x, pat)
[[1]]
[1] "South_Africa"

[[2]]
[1] "Zimbabwe" 
```

# python - 关于运动的 2D Sprite 物理

> ID：14992108
> 
> 赞同：0
> 
> 时间：2013-02-20T23:46:36.227
> 
> 标签：python, pygame, sprite, game-physics

我正在尝试将 2D 物理实现到小行星类型的游戏中。我在窗口边界设置了碰撞边界。

但是，当我将我的船精灵碰撞到边界时（并反转 x 或 y 轴的适当速度），我在移动时偶尔会出现故障。船会暂时跳跃，但如果我按住移动键的时间足够长，它通常会自行修复。

问题是这个故障很明显。

相关代码部分：

```
#update velocity
def velocity(self, speed):
    self.vx += math.sin(math.radians(self.angle)) * speed
    self.vy += math.cos(math.radians(self.angle)) * speed

    magnitude = math.sqrt(self.vx*self.vx + self.vy*self.vy)
    if magnitude > self.maxvel:
        self.vx *= 4/magnitude
        self.vy *= 4/magnitude
    if self.speed >= self.maxvel:
        self.speed = self.maxvel
    if self.speed <= -self.maxvel:
        self.speed = -self.maxvel 
```

我的运动代码：

```
if (key[K_UP]):
    newShip.speed += 1
    newShip.moving = 1

if (key[K_DOWN]):
    newShip.speed -= 1
    newShip.moving = 1

if (key[K_LEFT]):
    newShip.angle += 4

if (key[K_RIGHT]):
    newShip.angle -= 4 
```

我的完整代码在这里：[http](http://pastebin.com/19rHq97R) ://pastebin.com/19rHq97R运行只需要 2 张图像，你可以使用我猜想的任何东西。

我认为这个问题与检测到碰撞时 x 或 y 速度的反转有关，但我无法确定确切的问题。任何见解都值得赞赏。

编辑：我做了更多调查。我想知道突然的跳跃是否是因为我没有编程任何类型的加速。[http://pastebin.com/vFy9tjyN](http://pastebin.com/vFy9tjyN)摘自我的终端日志。我从我的程序中打印出相关变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T00:58:36.797

尝试这个：

```
DirDict = {"left": (-speed, 0), "right": (speed, 0), "up": (0, -speed), "left": (0, speed)}

if w:
    Direction = DirDict["left"] 
```

我认为这会更稳定；它一直对我有用。

# java - Java - JDBC以批处理状态-2插入，但数据库中存在记录

> ID：14992109
> 
> 赞同：0
> 
> 时间：2013-02-20T23:46:37.117
> 
> 标签：java, database, jdbc

我正在尝试使用 JDBC 连接将记录插入到 Oracle 数据库中，但是当我查看状态时它显示为 -2，但所有这些记录都存在于数据库中：

```
int[] statuses = pstmt.executeBatch() 
```

因此，在上述包含所有 -2 值的状态列表中，但我认为根据 API，小于 0 表示无法正确执行......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:10:39.253

根据[`Statement`javadocs](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html)，该常量`SUCCESS_NO_INFO`定义为-2。这意味着“指示批处理语句成功执行但它影响的行数的计数不可用的常量。” 所以，它确实执行正确。

# java - JAR 中的游戏仅适用于 Eclipse

> ID：14992111
> 
> 赞同：0
> 
> 时间：2013-02-20T23:47:06.017
> 
> 标签：java, opengl, jar, jogl

我的游戏处于可以在 Eclipse 中运行的状态。我的项目目录看起来像左边的图像。

![](../Images/7aab0ae72142e491c37314b146191ad6.png)

导出似乎很顺利，我有一些尚未使用的未使用变量，但代码可以正常工作。但是当我双击时（是的 jar 文件与 jre 相关联，通过双击运行）没有任何反应。所以我从命令行尝试它并得到右侧显示的错误。

谁能帮帮我，我不知道发生了什么。

注意：当我导出时，我导出到一个可运行的 jar 并选择了将库提取到 jar 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:11:14.933

似乎eclipse只提取了纯java库。尝试将所有这些 jar 库复制到您的桌面或类路径中的其他目录。

# c++ - 如何从参数化基函数生成多个函数指针？

> ID：14992115
> 
> 赞同：1
> 
> 时间：2013-02-20T23:47:12.403
> 
> 标签：c++

我有一个基本功能

`int base(const int i, const double &x)`

在这个函数中，我认为`i`是一个“参数”（可以采用从 0 到 N-1 的预定义值），而`x`我认为是实际的“参数”（可以采用任意值）。

我需要的是创建一个函数指针数组`int (*pointers[N])(const double &x)`。数组的每个成员对应于参数的不同值，`i`因此每个调用`pointers[n](x)`都应该等同于一个调用`base(n, x)`。

有没有办法实现这个功能？

我一直在尝试对函子进行自我教育（这是一种方法吗？），最近也进行了研究，`std::bind`但我的理解是它仅适用于 C++11（我目前无法使用）。

任何建议或代码片段都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:55:24.210

您可以为此使用非捕获 lambda：

```
typedef int (*fp)(double);

fp p1 = [](double x) -> int { return base(1, x); };
fp p2 = [](double x) -> int { return base(2, x); };
fp p3 = [](double x) -> int { return base(3, x); }; 
```

这不适用于捕获 lambda，因此您无法以编程方式生成它们。这与为 C 中的每个值拼出一个函数之间基本上没有区别：

```
int f1(double x) { return base(1, x); }
fp p = f1; 
```

# c++ - C/C++ static const 局部变量的用途

> ID：14992116
> 
> 赞同：16
> 
> 时间：2013-02-20T23:47:17.310
> 
> 标签：c++, c, static

在 C 和 C++ 中，制作局部`const`变量有什么好处`static`？假设初始化不使用其他变量，在调用之间保留值和每次调用设置相同的常量值之间有什么区别吗？

一个有效的 C 编译器可以忽略`static`?

在 C++ 中，它避免了调用之间的构造/破坏，但还有其他好处吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T23:55:36.527

如果你有类似的东西，它不占用堆栈空间可能是一个好处：

```
static const double table[fairly_large_number] = { .... }; 
```

显然，构造成本也可能足够大，以至于如果函数被多次调用，那么只构造一次对象就很有价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T23:58:20.317

是的，这是巨大的：**语义上**的好处。

当你放 时`const`，你不仅仅意味着编译器不应该让你修改变量。您对以后阅读代码的人做出更大胆的声明：这永远不会改变。甚至没有副作用，您将此变量作为指向另一个函数的指针。

此外，编译器可以利用这些新信息并在某些情况下对其进行优化，具体取决于您正在处理的特定类型。

（要清楚，我在这里说的是`const`vs. `non-const`，而不是`static`vs. `non-static`。）

**编辑**：[这个 SO 答案](https://stackoverflow.com/questions/6381088/const-vs-static-const?rq=1)也非常有用。

# c++ - 如何从 dlopen'd 库 L 访问程序 P 中的静态变量？

> ID：14992118
> 
> 赞同：0
> 
> 时间：2013-02-20T23:47:21.487
> 
> 标签：c++, linux, gcc

我有一个使用 dlopen 由程序 (P) 动态加载的库 (L)。L 实现了一个插件接口，因此回调它的父级以获得一些功能。

P 内部是一个单例对象，它动态创建线程池对象 A。我需要从 L 访问 A。

但是，因为单例通过使用静态变量来工作，所以当 L 被加载时，它最终会创建它自己的实例，这在某些情况下会很好，但我想要在 P 中创建的实例。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:43:40.373

声明的文件范围名称`static`具有内部链接。内部链接意味着它们对其他翻译单元不可见，即使在没有任何动态库的“经典”链接模型中也是如此。鉴于静态甚至对同一可执行文件中的其他翻译单元不可见，因此期望它们从附加的动态库中可见是不合理的。

您必须想办法使用外部动态符号来实现必要的链接。也许单例根本不能有一个内部名称，但必须有一个外部名称。

L 创建自己的对象实例不仅因为对象是静态的，还因为您已将定义该单例和线程池函数的线程池模块链接到 L 中。即使对象具有外部名称，也可能发生这种情况，具体取决于库的链接方式。

您必须选择线程池服务将驻留的单个对象，然后确保它仅驻留在那里。你的项目没有一个实用程序库，你可以在其中坚持这种事情吗？

您*可以*坚持提供线程池 API 的程序可执行文件 P 的模型。这真的是一回事。程序 P 是另一个动态对象，有效地充当线程池模块的库，它提供给自己和其他共享对象。

无论该线程池模块位于何处，请确保您没有将该模块的副本静态链接到其他对象：它仅位于一个位置。

如果线程池单例的外部名称是该 API 的一部分（每个人都知道它的文档名称并直接使用它，将该全局池传递给 API 函数），那么该名称应该是外部的，并在头文件中声明。

如果单例是私有的，那么你必须想办法隐藏它，比如让它隐含在函数调用中（只有一个线程池，就是这样），或者在某种程度上抽象对它的访问（提供一个`ensure_thread_pool`) 函数，如果线程池不存在则创建一个线程池，否则以线程安全的方式返回先前创建的线程池。

想一想：为什么不，例如，`stdin`有`stdout`这个问题？为什么不是每个库都实例化自己的`stdout`流并在该流上调用自己的`fprintf`函数？为什么，很明显，因为这些东西都存在于一个地方：C 库。他们的副本不在其他地方；其他地方只是通过动态符号引用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:59:46.797

L 中不应该有`static`A。让 P 将 A 的地址传递给 L，即`L.init(&A)`。

# c++ - 如何删除不同 std::vector 中的相同指针？

> ID：14992119
> 
> 赞同：0
> 
> 时间：2013-02-20T23:47:27.103
> 
> 标签：c++, pointers, stdvector, game-loop

我的游戏的主循环如下所示：

```
std::vector<std::unique_ptr<State>> states;

for(size_t i = 0; i < states.size(); i++)
{
     states[i]->Update();
     states[i]->Draw();

} 
```

不过，他们是一个缺陷。我无法在迭代期间修改向量（删除状态），因为如果我删除了迭代正在进行的当前状态，那么它显然会中断，因为没有状态可以调用更新和绘制。所以我认为制作一个应该添加到`states`向量中的状态向量并制作一个应该删除到向量中的状态向量是一个好主意`states`。然后在循环结束后修改`states`向量并且在迭代中不会出现问题。

```
std::vector<std::unique_ptr<State>> states;
std::vector<std::unique_ptr<State>> statesToBeAdded;
std::vector<std::unique_ptr<State>> statesToBeRemoved;

for(size_t i = 0; i < states.size(); i++)
{
    states[i]->Update();
    states[i]->Draw();

}

for(size_t i = 0; i < statesToBeAdded.size(); i++)
{
    states.push_back(std::move(statesToBeAdded[i]));
}
statesToBeAdded.clear();

for(size_t i = 0; i < statesToBeRemoved.size(); i++)
{
    states.erase(std::remove(states.begin(), states.end(), statesToBeRemoved[i]), states.end());
}
statesToBeRemoved.clear(); //error is thrown here 
```

虽然我不能从`states`向量中删除状态，但在线上会抛出一个错误`statesToBeRemoved.clear()`，我认为这是因为当我调用该`states.erase(...)`行时，它会从向量中删除元素，`states`从而使向量中的相同元素无效，`statesToBeRemoved`因为该元素指向不再存在的对象。

您不能只删除 std::unique_ptr 而不破坏指针指向的内容，因此我认为没有办法从`states`向量中删除元素而不使向量中的元素无效`statesToBeRemoved`。那么如何解决这个问题呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:08:12.013

不同的指针类型满足不同的所有权语义：

*   `unique_ptr`s 代表唯一所有权，这就是您当前的代码不起作用的原因
*   `shared_ptr`s 用于共享所有权 - 当最后一个`shared_ptr`管理对象超出范围时，它会被销毁
*   原始指针 ( `*`) 并没有真正说明它们正在建模的语义，但是您必须手动强制执行所有约束——这就是使它们变得危险的原因。然而，对于从不拥有所指向对象所有权的指针，它们是安全的（并且在我看来是明智的选择）。

所以：`statesToBeAdded`只要你能保证你永远不会有任何不存在的东西，你就是安全的`states`。`statesToBeRemoved`不同的是：对象已经存在并且在 中`states`，并且拥有对象的所有权是有意义`states`的 - 因此原始指针将是`statesToBeRemoved`.

`State`请注意，所有这些都是基于您显示的几行代码，根据情况，将s 而不是`unique_ptr<State>`s 存储在您的 s 中可能是有意义的`states`，等等...

# java - JPanel 组件在没有鼠标单击的情况下不会更新

> ID：14992120
> 
> 赞同：0
> 
> 时间：2013-02-20T23:47:34.560
> 
> 标签：java, swing, jtabbedpane

我只是有这个问题：

```
public class Sales extends JPanel{
    ArrayList<JPanel> panes;
    ArrayList<String> tabs;
    JTabbedPane tp;
    public Sales(Dimension d){
        setSize(d);
        setLayout(null);
        tp = new JTabbedPane();
        Font f = new Font("Arial",Font.PLAIN,32);
        tp.setFont(f);
        for(Menu menu : FileManager.menus){
            JPanel tmp = new JPanel();
            /*int s = (int) Math.ceil(Math.sqrt(menu.products.size()));
            tmp.setLayout(new GridLayout(s,s));
            System.out.println("size" + s);
            for(Product p : menu.products){
                p.setFont(f);
                tmp.add(p);
            }*/
            tp.addTab(menu.name,null,tmp,"What is this?");
        }
        tp.setBounds(0,0,getWidth(),getHeight());
        add(tp);
    }
} 
```

其中 Sales 只是添加到一个简单的 JFrame 中：

```
public Main(){
        super("HoboGames Pos System");
        setUndecorated(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);
        sale = new Sales(getSize());
        add(sale);
    } 
```

一切正常，除了组件在由于单击或其他原因更新窗口之前不会绘制。所以它是一个空白屏幕，直到你点击东西。（对不起，我在让它全屏的事情上剪了一些角落......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:51:16.883

它们不会更新，因为您在完成向其添加组件之前已使窗口可见。

尝试类似...

```
GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);
sale = new Sales(getSize());
add(sale);
setVisible(true); 
```

或者，您可以在添加完组件后在框架上调用`revalidate`and `repaint`，但老实说，第一种方法更简单。

**边注**

强烈建议不要在组件上使用`setSize`，您应该依赖适当的布局来管理，例如`BorderLayout`决定组件的大小。

# node.js - 使用 Mongoose 通过 ObjectId 查找 MongoDB 文档

> ID：14992123
> 
> 赞同：8
> 
> 时间：2013-02-20T23:47:49.000
> 
> 标签：node.js, mongodb, express, mongoose, objectid

我正在尝试通过 ObjectId 查找来更新 MongoDB 中的文档。工作流程如下（这是一个博客）。

1.  通过传递标题和正文在 MongoDB 中创建一个新帖子。ObjectId 是自动创建的。
2.  去编辑帖子。它使用 URL 中的 ObjectId 从数据库中获取它，并将其显示在相同的新帖子表单中，只是使用预先存在的值。
3.  单击提交按钮时，我想通过 ObjectId 查找文档，并使用发布表单中的值更新数据库中的值。

第 1 步和第 2 步工作正常，但第 3 步似乎不起作用。它重定向到我需要它的页面。但是数据库还没有更新。它与以前的值相同。

这是更新帖子部分的相关代码：

**应用程序.js**

```
app.post "/office/post/:id/update", ensureAuthenticated, routes.updatePost 
```

**路线/index.js**

```
mongoose = require 'mongoose'
ObjectId = mongoose.Types.ObjectId

Post = require '../models/Post'

...

updatePost: function(req, res) {
  var o_id, the_id;

  the_id = req.params.id;
  console.log(the_id); // 510e05114e2fd6ce61000001

  o_id = ObjectId.fromString(the_id);
  console.log(o_id); // 510e05114e2fd6ce61000001

  return Post.update({
    "_id": ObjectId.fromString(the_id)
  }, {
    "title": "CHANGE"
  }, res.redirect("/office/edit/posts"));
} 
```

我正在使用 Express 和 Mongoose。

如果有帮助，这也是 post 模型：

```
(function() {
  var Post, Schema, mongoose;

  mongoose = require('mongoose');

  Schema = mongoose.Schema;

  Post = new Schema({
    title: String,
    subhead: String,
    body: String,
    publish_date: {
      type: Date,
      "default": Date.now
    },
    mod_date: {
      type: Date,
      "default": Date.now
    }
  });

  module.exports = mongoose.model('Post', Post);

}).call(this); 
```

这是编辑博客文章视图的代码：

**应用程序.js**

```
app.get("/office/post/:id/edit", ensureAuthenticated, routes.editPost); 
```

**路线/index.js**

```
editPost: function(req, res) {
  return Post.findById(req.params.id, function(err, post) {
    return res.render('edit-post', {
      post: post,
      title: post.title
    });
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:54:41.560

问题是你怎么打电话`update`

```
return Post.update({
    "_id": ObjectId.fromString(the_id)
}, {
    "title": "CHANGE"
}, res.redirect("/office/edit/posts")); 
```

最后一个参数实际上将重定向页面，而`update`期望在更新完成时调用一个函数

你应该通过

```
return Post.update({
    "_id": ObjectId.fromString(the_id)
}, {
    "title": "CHANGE"
}, function(err, model) {
    if (err) // handleerr

    res.redirect("/office/edit/posts"));
}); 
```

这样，我们只在模型成功更新后重定向

# asp.net - 如何在 ASP.NET 下拉列表的每个 ListItem 中保存第三个值？

> ID：14992128
> 
> 赞同：4
> 
> 时间：2013-02-20T23:48:19.270
> 
> 标签：asp.net

ASP.NET 中的每个 ListItem 都有一个 value 属性和一个 text 属性。我还需要保存第三个值。我的技巧是将特殊分隔符和第三个值连接到 Value 属性。但是使用 FindByValue 方法会很麻烦。

有没有更好的方法来保存第三个值或使用 FindByValue 的好方法。（我不能使用 FindByText）。我希望有一个标签属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:56:33.290

如果您使用的是用and属性`DropDownList`定义的 bind ，那么将第三个值保存在自身上并不是一个好方法。你可以单独保存它。`DataTextField``DataValueField``DropDownList`

如果您`DropDownList`通过标记定义您的，您可以尝试将其定义为自定义属性：

```
<asp:DropDownList ID="ddlDummy" runat="server">
    <asp:ListItem Text="x" Value="y" ThirdValue="z" />
</asp:DropDownList> 
```

为了检索它，您可以使用 FindByValue 并`ThirdValue`从 ListItem 中获取属性：

```
ListItem item = ddlDummy.Items.FindByValue("y");
string value = item.Attributes["ThirdValue"]; 
```

然而，奇怪的是，如果你动态生成项目，属性将不会被持久化：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        ListItem item = new ListItem("x", "y");
        item.Attributes.Add("ThirdValue", "z");
        ddlDummy.Items.Add(item);
    }
} 
```

如果这是你的情况，你可以看看这个问题，它可以解决问题：

[DropDownList 中的 ListItems 属性在回发时丢失？](https://stackoverflow.com/questions/1313447/listitems-attributes-in-a-dropdownlist-are-lost-on-postback)

# ios - 删除 MagicalRecord 中的实体不持久

> ID：14992129
> 
> 赞同：2
> 
> 时间：2013-02-20T23:48:20.427
> 
> 标签：ios, core-data, magicalrecord

我对 MagicalRecord 有一个奇怪的问题。删除不会持续存在。当我删除时， NSFetchedResultsControllerDelegate 正确地看到该对象已被删除。但是，如果我关闭并重新打开应用程序，实体会重新出现。

我用来删除实体的代码是：

```
ActivityType *activityType = [_fetchedResultsController objectAtIndexPath:indexPath];
[activityType deleteInContext:[NSManagedObjectContext MR_defaultContext]];
[[NSManagedObjectContext MR_defaultContext] MR_saveToPersistentStoreAndWait]; 
```

我用于设置 NSFetchedResultsController 的代码是：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"ActivityType" inManagedObjectContext:[NSManagedObjectContext defaultContext]];
[fetchRequest setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                          initWithKey:@"name" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:[NSManagedObjectContext defaultContext] sectionNameKeyPath:nil
                                               cacheName:@"activityTypes"];
_fetchedResultsController = theFetchedResultsController;
_fetchedResultsController.delegate = self; 
```

基于其他 SO 帖子，我也尝试`[NSManagedObjectContext rootSavingContext]`在设置和删除中使用（但无济于事）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T08:20:00.380

**我经历了地狱又回来了核心数据，我学到了一些东西。**我累了，所以我就写一个简短的总结。

1.  当您删除实体时，核心数据可能会因为您的删除规则而拒绝它。我的删除没有通过的原因是因为它需要级联但它被取消了。我认为这与以某种方式让实体被遗弃有关。我不知道为什么会阻止删除，但这就是在我的情况下修复它的原因。我发现它的方式是通过日志，我看到了一些关于引用的依赖实体的声明，我意识到删除规则将适用。

2.  当日志显示有关严重错误和侦听器的内容时​​，请检查 FRC 代码。由于这是侦听器，因此您的罪魁祸首代码将在某处。就我而言，我禁用了 [tableview beginUpdates] 和 [tableview endupdates]。FRC 实际上需要这个（我认为它是可选的）。否则，您会收到一些关于不一致和 managedobjectcontextlistener 以及如何添加或删除行等的错误。

3.  当您删除时，它实际上可能会保存到内存本地上下文中，但可能不会保存到持久存储中。这意味着 FRC 委托代码将看到更改，但可能无法保存。此外，内存存储可能不会在通过我的时进行删除规则检查。但持久存储会进行检查。得再看看这个。

# ios5 - 在 iOS 5 上扩展 UINavigationController 但在 iOS 6 上工作时，根控制器中的空白视图

> ID：14992130
> 
> 赞同：2
> 
> 时间：2013-02-20T23:48:22.240
> 
> 标签：ios5, ios6, xamarin.ios

我在扩展（继承自）时发现了一些非常奇怪的行为`UINavigationController`。考虑以下：

```
public class MyNavigationController : UINavigationController
{
    public MyNavigationController(UIViewController viewRootController) 
    : base(viewRootController)
    {
        AllNavigationControllers.Add(this);
    }
}
...
window.RootViewController = new MyNavigationController(new AnotherController()); 
```

这适用于 iOS 6，但在 iOS 5 中显示空白视图，而不是显示`AnotherController`的主视图（从 NIB 加载）。理论上，调用`base(viewRootController)`应该处理这个问题；它没有继承，这*很*奇怪。

这是我的解决方法...

```
public class MyNavigationController : UINavigationController
{
    public MyNavigationController(UIViewController viewRootController) : base()
    {
        AllNavigationControllers.Add(this);
        this.ViewControllers = new UIViewController[]{viewRootController};
    }
}
...
window.RootViewController = new MyNavigationController(new AnotherController()); 
```

**不漂亮，但现在它可以在 iOS 5 和 6 上运行**。

为什么在继承时调用`base(viewRootController)`不工作但当你不工作时调用？

（顺便说一句，我不确定这个问题是特定于 Monotouch（现在是 Xamarin.iOS），还是可以用等效的 Objective-C 代码重现）。

# django - 在 SimpleHTTPServer 中运行 Django 框架？

> ID：14992131
> 
> 赞同：2
> 
> 时间：2013-02-20T23:48:32.817
> 
> 标签：django, simplehttpserver

是否可以设置 Python`SimpleHTTPServer`来为 Django 应用程序提供服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:50:03.447

根据[Python 文档](http://docs.python.org/2/library/simplehttpserver.html)：

> 此类提供当前目录及以下目录中的文件，直接将目录结构映射到 HTTP 请求。

所以 SimpleHTTPServer 只提供目录中的静态文件，因此无法执行任意代码来提供响应。

为什么要这么做？

# asp.net-mvc - Html.Hidden 字段未设置

> ID：14992132
> 
> 赞同：4
> 
> 时间：2013-02-20T23:48:48.583
> 
> 标签：asp.net-mvc

我的视图中有一个隐藏字段，如下所示：

```
using (Html.BeginForm("Action", "Schedule"))
{
    @Html.Hidden("Id", Model.Schedule.Id)
    ...
} 
```

以及一个接收如下信息的操作方法：

```
public ActionResult AddEventToSchedule(Event NewEvent, Guid Id)
{
    // Do something
} 
```

即使 Model.Schedule.Id 不为空，我也会不断收到一个空的 Guid。我检查了 html 源代码，隐藏字段也是一个空的 Guid（使用断点来验证 Model.Schedule.Id 不为空）。

奇怪的是，当我尝试通过如下模型访问 Id 值时，html 隐藏字段已正确填充 guid，但传递给操作方法的模型为空。

```
public ActionResult AddEventToSchedule(Event NewEvent, ScheduleModel model)
{
    // model.Schedule is null!
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T00:24:57.680

在这个问题的帮助下解决了这个问题： [MVC3 Model Binding - List to Hidden fields](https://stackoverflow.com/questions/12009578/mvc3-model-binding-list-to-hidden-fields)

显然，HTML 助手在检查 Model 之前会检查 ModelState 的值。我只在将 Id 作为参数添加到操作方法时才看到这种行为的原因是，它调用了模型绑定器以使用 Id 填充 ModelState。Id 始终为空 Guid 的原因是因为这是第一次调用操作方法时的值。

我将此行添加到我的操作方法中，现在一切正常：

```
ModelState.Remove("Id") 
```

# javascript - JQuery 仅显示某些 id Div

> ID：14992133
> 
> 赞同：0
> 
> 时间：2013-02-20T23:48:50.953
> 
> 标签：javascript, jquery, html

我有一个显示 div 的 jquery 函数，当单击带有 id 切换_（某个唯一数字）的锚标记时。

```
 $("a[id ^= 'toggle']").click(function(event){
        event.preventDefault();
        $("div [id ^= 'replypost']").toggle();
    }); 
```

1.  每个 id`toggle`并`"replypost`以每个 id 的 `_(unique number) 结尾，因此我可以将所有切换和回复 div 分开。

2.  切换和回复帖子 div 通过 while() 循环显示。因此有 multipe`Toggle`和`replypost`div，但它们每个都有唯一的编号。

3.  所以有 a`toggle_1`和 a `ReplyPost_1`。

我需要一种仅在单击时才显示的方法，`ReplyPost_1`并且`Toggle_1`仅`ReplyPost_2`在单击时才显示`Toggle_2` ，这可能吗？如果您需要我澄清任何事情，请告诉我并感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:53:52.970

仅显示具有匹配数字的帖子并隐藏其他帖子。

```
$("a[id^='toggle']").click(function(event){
    event.preventDefault();
    $("[id^='replypost']").hide();
    $("#replypost_" + this.id.replace('toggle_', '') ).show();
}); 
```

但是，如果帖子是兄弟姐妹，那就少写了：

```
$("a[id^='toggle']").click(function(event){
    event.preventDefault();
    $("#replypost_" + this.id.replace('toggle_', '') ).show().siblings().hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:53:59.553

我认为这应该可以解决问题：

```
$("a[id ^= 'toggle']").click(function(event){
    event.preventDefault();
    $("div [id='replypost_"+$(this).attr('id').replace('toggle_','')+"']").show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:54:07.953

```
$("a[id^='toggle']").click(function(event){
  event.preventDefault();
  // grab the index of the clicked element from it's ID
  var index = $(this).attr('id').match(/\d+$/)[0]
  // identify the thing to toggle uniquely, based on the grabbed index
  $("div#replypost_"+index).toggle();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T00:04:03.597

您可以使用类来使这更清洁，并消除循环。

```
<a id="toggle_1" class="toggle" />
<div id="replyPost_1" class="reply-post" /> 
```

*现在，您可以在所有*切换锚点上收听点击事件，从 id 获取数字，隐藏所有回复 div 并仅显示匹配的回复帖子。

```
$(".toggle").click(function(e) {
  var num = $(this).attr("id").split("_")[1];
  $(".reply-post").hide();
  $("replyPost_"+num).show();
}); 
```

# perl - 逐行读取文件迭代问题

> ID：14992136
> 
> 赞同：0
> 
> 时间：2013-02-20T23:48:54.980
> 
> 标签：perl, file, for-loop

我有以下简单的代码段（标识为问题代码段并从更大的程序中提取）。

是我还是你能在这段代码中看到一个明显的错误，它阻止它在肯定应该做的时候匹配`$variable`和打印？`$found`

当我尝试打印时没有打印任何内容`$variable`，并且我正在使用的文件中肯定有匹配的行。

**编码：**

```
if (defined $var) {
    open (MESSAGES, "<$messages") or die $!;
    my $theText = $mech->content( format => 'text' );
    print "$theText\n";
    foreach  my $variable  (<MESSAGES>) {
        chomp ($variable);
        print "$variable\n";
        if ($theText =~ m/$variable/) {
            print "FOUND\n";
        }
    }
} 
```

我已将此定位为错误发生的点，但不明白为什么？可能有一些我完全忽略的东西，因为它很晚？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:25:46.270

**更新**我已经意识到我误读了你的问题，这可能不能解决问题。但是这些点是有效的，所以我把它们留在这里。

您可能在`$variable`. 线

```
if ($theText =~ m/$variable/) { ... } 
```

应该

```
if ($theText =~ m/\Q$variable/) { ... } 
```

逃避任何存在的东西。

但你确定你不只是想要`eq`吗？

此外，您应该使用从文件中读取

```
while (my $variable = <MESSAGES>) { ... } 
```

因为`for`循环会不必要地将整个文件读入内存。*请*使用比 . 更好的名称`$variable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:27:05.210

这对我有用..我错过了手头的问题吗？您只是想将“$theText”与文件中每一行的任何内容相匹配，对吗？

```
#!/usr/bin/perl

use warnings;
use strict;

my $fh;
my $filename = $ARGV[0] or die "$0 filename\n";

open $fh, "<", $filename;
my $match_text = "whatever";
my $matched = '';

# I would use a while loop, out of habit here
#while(my $line = <$fh>) {
foreach my $line (<$fh>) {
    $matched = 
        $line =~ m/$match_text/ ? "Matched" : "Not matched";

    print $matched . ": " . $line;
}

close $fh

./test.pl testfile
Not matched: this is some textfile
Matched: with a bunch of lines or whatever and
Not matched: whatnot.... 
```

编辑：啊，我明白了..你为什么不尝试在“chomp()”之前和之后打印，看看你得到了什么？这不应该是问题，但是测试每个案例并没有什么坏处。

# rally - App SDK2.0 中的联接（AND 和 OR）查询过滤器

> ID：14992137
> 
> 赞同：1
> 
> 时间：2013-02-20T23:49:00.753
> 
> 标签：rally

使用 2.0p4 JavaScript SDK，我正在尝试重新创建我之前使用 1.30 JavaScript SDK 创建的网格应用程序，并且在创建复杂过滤器（具有多个 AND 和 OR）时遇到问题。

以下是 1.30 版本的查询：

```
 function itemQuery() {
        var queryObject = {
        key: 'defect',
        type: 'defect',
         fetch: 'FormattedID,Name,State,ScheduleState,SupportNumber,OpenedDate,Priority,Rank,Severity,SubmittedBy,Owner,Iteration,Release,Project',
         query: '(((((SupportNumber contains "RNT") OR (SupportNumber contains "NS")) OR (SupportNumber contains ":")) OR (SupportNumber contains "CASE")) AND (State != Closed))',
         project: null
        }; 
```

所以我查询包含“RNT”、“：”、“NS”或“CASE”的项目并且没有关闭。（SupportNumber 是一个自定义字段，人们在不同的时间点输入了不同的数据）

这是我正在尝试创建的新版本的 App.js：

```
Ext.define('CustomApp', {
extend: 'Rally.app.App',
componentCls: 'app',

launch: function() {
    Rally.data.ModelFactory.getModel({
        type: 'Defect',
        context: {
            workspace: 'workspace/12345',
            project: null,
        },
        success: function(model) {
            this.grid = this.add({
                xtype: 'rallygrid',
                model: model,
                columnCfgs: [
                    'FormattedID',
                    'Name',
                    'SupportNumber',
                    'Priority',
                    'Severity',
                    'State',
                    'Iteration',
                    'Release',
                    'Project',
                    'Owner',
                    'SubmittedBy'
                ],
                storeConfig: {
                    filters: [
                        {
                            property: 'State',
                            operator: '!=',
                            value: 'Closed'
                        },
                        {   
                            property: 'SupportNumber',
                            operator: 'contains',
                            value: 'RNT'
                        }
                    ]
                }
            });
        },
        scope: this
    });
} 
```

});

我可以看到，只需在配置中添加过滤器，就可以创建 AND，但是我在文档中迷失了如何在同一配置中创建 AND 和 OR 过滤器.....

任何人都可以就如何为使用多个 AND 和 OR 的 App SDK 2.0 创建过滤器配置提供任何指导，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:02:30.600

查看：

[Rally.data.QueryFilter](http://developer.help.rallydev.com/apps/2.0p4/doc/#!/api/Rally.data.QueryFilter)

连同这个 Stackoverflow 答案：

[Rally App SDK 2.0：初始创建后无法修改 QueryFilter 对象](https://stackoverflow.com/questions/10804321/rally-app-sdk-2-0-cannot-modify-queryfilter-object-after-initial-creation)

这显示了一个使用 Rally.data.QueryFilter 准备表示多个条件的过滤器数组的好例子。

# java - JAVA递归程序逻辑

> ID：14992138
> 
> 赞同：0
> 
> 时间：2013-02-20T22:27:31.820
> 
> 标签：java, recursion

```
public class Prod {
    public static void main(String[] args) {
        System.out.println(prod(1, 4));
    }
    public static int prod(int m, int n) {
        if (m == n) {
            return n;
        } else {
            int recurse = prod(m, n-1);
            int result = n * recurse;
            return result;
        }
    }
} 
```

运行上面的代码，我得到 24 ? 我不太明白怎么做？

我的疑惑： 1\. 当 m =1 , n=4 时，我们调用 prod 直到 m 和 n 等于 1。那么输出应该是 n 并且不应该执行 else 块？

有人请帮助我理解逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:37:27.310

只需使用数字运行它，您需要将其写下来以准确查看行为（将来，我建议在您的代码中添加大量打印以检查变量以及它们在每次通过时如何变化）。

```
prod(1,4)
m=1,n=4
m != n so, recurse = prod(1, 3)

prod(1, 3)
m=1,n=3
m != n so, recurse = prod(1, 2)

prod(1, 2)
m=1,n=2
m != n so, recurse = prod(1, 1)

prod(1, 1)
m=1,n=1
m == n so,
return 1

returns to prod(1, 2)
recurse = 1
result = 2 * 1
return 2

returns to prod(1, 3)
recurse = 2
result = 3 * 2
return 6

returns to prod(1, 4)
recurse = 6
result = 4 * 6
return 24 
```

因此，您的程序打印 24。

有时，找出程序的最佳方法是机械地逐行执行这些步骤，在脑海中执行它们（或在纸上跟踪事物）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:49:01.733

要理解*任何*带有函数的程序，您假设被调用的函数正确地完成了它们的工作，并检查调用函数是否以正确的顺序使用正确的参数调用它们，并正确地组合结果。

对于递归函数，您需要检查每个递归调用是否让您更接近没有递归的情况。

这里没有人告诉我们结果应该是什么。递归在任何时候结束`m == n`，并且递归调用是 with `n = n - 1`，所以这仅在`m <= n`.

考虑一串调用，每个调用减少`n`1，同时`m`保持不变。说`n == m + 3`找出发生了什么：第一个调用gets `m + 2`，第二个`m + 1`，第三个`m`，然后returns `m`。第二个 take `n == m + 1`by`m`由第三个返回，第二个 take`n == m + 2`乘以前一个结果，最后结果是`(m + 3) * (m + 2) * (m + 1) * m`. 此函数计算`n! / (m - 1)!`，如果`n >= m`。知道这就是正在发生的事情，很容易检查我们的（到目前为止）预感是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:03:05.813

```
prod(1, 4);

public static int prod(int m, int n) {
    if (m == n) {
        return n;
    } else {
        int recurse = prod(m, n-1);
        int result = n * recurse;
        return result;
    }
} 
```

可以用 m == 1 转换为：

```
prodA(4);
public static int prodA(int n) {
    if (1 == n) {
        return n;
    } else {
        int recurse = prodA(n-1);
        int result = n * recurse;
        return result;
    }
} 
```

它有一个转换（头递归）：

```
public static int prodA(int n) {
    int result = 1;
    while (n > 1) { // Actually n != 1
        result *= n;
        --n;
    }
    return result;
} 
```

这是阶乘函数。

# ios - 有没有办法检查 UIImage 是否已解压缩？

> ID：14992141
> 
> 赞同：4
> 
> 时间：2013-02-20T23:49:05.620
> 
> 标签：ios, objective-c, uiimage, core-graphics

我相信你们中的大多数人都在后台线程上处理过强制解压以提高渲染性能。我的问题是是否有办法检查图像是否已解压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-21T14:24:01.647

*它帮助我通过以下技术检查图像是否已解压缩。这是易于理解的简单代码：-*

```
import UIKit
    class ViewController: UIViewController {
        var compressedImage:NSString?
        var decompressedImage:NSString?

        override func viewDidLoad() {
            super.viewDidLoad()

            let image = compressImage()
            var imageView = UIImageView(image: image)
            //self.view.addSubview(imageView)

          let decompressImage = deCompressImage(image: image)
            let imageData =  Data(UIImagePNGRepresentation(decompressImage)! )
            print("*****  Size after decompred \(imageData.description) **** ")
            imageView = UIImageView(image: decompressImage)
            decompressedImage = imageData.description as NSString?

            let decompressed = checkImageBeenDecompressed(decompressedImage: decompressedImage!, compressedImage: compressedImage!)
            print(decompressed)
                   //self.view.addSubview(imageView)

        }

        override func didReceiveMemoryWarning() {
            super.didReceiveMemoryWarning()
            // Dispose of any resources that can be recreated.
        }

        func checkImageBeenDecompressed(decompressedImage:NSString , compressedImage:NSString) -> Bool {
             let decompressedSize  = Int( decompressedImage.getNumFromString()! )
             let  compressedSize  =   Int (compressedImage.getNumFromString()! )
             if( decompressedSize!  >  compressedSize! ) {
                print("Image has been decompressed")
               return true
            }
            print("Image has not been decompressed")
            return false
        }

        func compressImage() -> UIImage {

            let oldImage = UIImage(named: "background.jpg")
            var imageData =  Data(UIImagePNGRepresentation(oldImage!)! )
            print("***** Original Uncompressed Size \(imageData.description) **** ")
            imageData = UIImageJPEGRepresentation(oldImage!, 0.025)!
            print("***** Compressed Size \(imageData.description) **** ")
            compressedImage = imageData.description as NSString?
            let image = UIImage(data: imageData)
            return image!
        }

        func deCompressImage(image:UIImage) -> UIImage {
            UIGraphicsBeginImageContextWithOptions(image.size, true, 0)
            image.draw(at: CGPoint.zero)
            let decompressedImage = UIGraphicsGetImageFromCurrentImageContext()
            UIGraphicsEndImageContext()
            return decompressedImage!
            }

    }

    extension NSString {
        func getNumFromString() -> String? {
            var numberString: NSString?
            let thisScanner = Scanner(string: self as String)
            let numbers = NSCharacterSet(charactersIn: "0123456789")
            thisScanner.scanUpToCharacters(from: numbers as CharacterSet, into: nil)
            thisScanner.scanCharacters(from: numbers as CharacterSet, into: &numberString)
            return numberString as? String;
        }
    } 
```

[演示参考](https://github.com/shrawan2015/Application-Demo-StackOverFlow/tree/master/CompressionAndDecompressionImage)

# split - RPM 构建限制

> ID：14992142
> 
> 赞同：4
> 
> 时间：2013-02-20T23:49:10.800
> 
> 标签：split, rpm, rpmbuild

我是 rpm 打包的初学者，据我了解，由于 cpio 限制，rpm-build 文件大小> 4GB 存在问题。所以我用 gnu 将包中的大文件拆分为 512MB 的文件 [这是作为 rpmbuild 的一部分完成的，因为大文件是在构建时间生成的]。我仍然看到错误：“错误：在文件 /io1/dm/build/BUILDROOT/pkg/installdir/lib/clfsplitab 上创建存档失败：cpio：Bad magic”其中 clfsplitab 是大文件的 512MB 拆分。关于如何追踪确切问题的任何建议？还是有更好的方法来处理/生成大型有效载荷包？
**更新：**如图所示，错误出现在 clfsplitab 上，即拆分的第二个文件（因为 gnu split 通常拆分后缀为 aa、ab、ac 等的文件。看起来 cpio 无法识别文件类型，第一个文件是 tar，第二个其余的是数据..gzip 压缩了拆分部分）。似乎只解决了一个错误来引发同样的坏魔法错误，但这次是在最后一部分。
**笔记：**我可以控制 rpm 中文件的输出大小。理想情况下，转储的完整文件大小约为 4g [分成 512mb 块]。但是为了测试包大小确实没有问题，我稳定地减小了生成的目标文件的大小，如果包低于 2G，它似乎可以正常工作，并且我得到了一个很好的 rpm。如果我没记错的话，尺寸问题自 rpm 4.4.x 起已修复。这看起来仍然像 cpio 问题，rpm 用于归档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:00:58.543

从旧的[RPM 4.6 文档](http://www.rpm.org/wiki/Releases/4.6.0)：

```
Large package support

Packages can now theoretically be up to 64bit sizes, and individual files within packages are limited to 4GB each due to cpio format limitation whereas they were previously limited to ~2GB. Large packages (over ~2GB in size) are incompatible and unreadable with previous versions of RPM due to requiring 64bit integer type support in headers, "normal" sized packages are fully compatible with older versions however.
Limitations on accepted header size can cause limit the practical package size when the number of files in a package is extremely high. 
```

所以是的，这很可能仍然是一个 CPIO 问题。您使用的是哪个版本的 RPM？我认为您应该重新评估您的 RPM，对于 RPM 来说 4GB 非常大，即使对于内部网络，我们仍在讨论很长一段时间来传输和安装它。如果这对您的系统很重要，您是否考虑在最初构建服务器时将其纳入 kickstart？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T04:42:02.307

虽然非常规，但我通过在 rpmrc 中指定 'cpiobin' 使用 'tar' 而不是 cpio 解决了这个问题。

# php - 来自外部文件的PHP变量？

> ID：14992143
> 
> 赞同：0
> 
> 时间：2013-02-20T23:49:18.597
> 
> 标签：php, facebook, variables, if-statement, joomla-k2

***编辑/完成的解决方案/工作代码**

所以，这是我的一个朋友帮助我想出的。

这是我在 K2“items.php”文件中使用的部分：

```
<div class="fb-comments" data-href="<?php echo JURI::current(); ?>" data-num-posts="8" notify="true" data-width="580"></div>

<input id="authname" style="display: none;" type="text" value="<?php echo $this->item->author->name; ?>" />
<input id="authmail" style="display: none;" type="text" value="<?php echo $this->item->author->email; ?>" />
<input id="link" style="display: none;" type="text" value="<?php echo JURI::current(); ?>" />

<script>
window.fbAsyncInit = function() {
FB.Event.subscribe('comment.create', function (response) {

    var commentQuery = FB.Data.query("SELECT text, fromid FROM comment WHERE post_fbid='" + response.commentID +
    "' AND object_id IN (SELECT comments_fbid FROM link_stat WHERE url='" + response.href + "')");
    var userQuery = FB.Data.query("SELECT name FROM user WHERE uid in (select fromid from {0})", commentQuery);

        FB.Data.waitOn([commentQuery, userQuery], function () {
            var commentRow = commentQuery.value[0];
            var userRow = userQuery.value[0];
            console.log(userRow.name + " (id: " + commentRow.fromid + ") posted the comment: " + commentRow.text);
            trackcomments(response['commentID'], response['href'], 'create', commentRow.text, userRow.name, commentRow.fromid);
        });
    });
};

function trackcomments(_commentid, _address, _action, _commentMessage, _userName, _userId) {
    var authname = document.getElementById('authname').value;
    var authmail = document.getElementById('authmail').value;
    var link = document.getElementById('link').value;

    $.ajax({
        type: 'POST',
        url: 'http://mydomain.com/dostuff.php', 
        data: {'commentMessage': _commentMessage, 'userName': _userName, 'authname': authname, 'authmail': authmail, 'link': link},
        cache: false
    });

};
</script> 
```

这是 do_stuff.php：

```
<?php

    //Handle some weird letters and stuff
    setlocale(LC_TIME, 'swedish'); 

    //creating an $author variable and populating it from $_POST
    $author = $_POST['authname'];
    $authoremail = $_POST['authmail'];
    $link = $_POST['link'];
    $commentMessage = $_POST['commentMessage'];
    $userName = $_POST['userName'];

    $date = strftime('%A %e %b %Y %H.%M', time());

    //getting author email
    $to = $authoremail;

    //subject of email      
    $subject = "New comment posted on mydmomain.com";

    //email content
    $message = "On $date $userName wrote\n\n$commentMessage\n\non your entry $link#comments\n\nUse the above link to answer on the comment.";

    //who the mail is from
    $from = "admin@mydomain.com";

    //header
    $headers = "From:" . $from;

    //send the email
    mail($to,$subject,$message,$headers);
?> 
```

事实证明，它不起作用有一个简单的原因...... JavaScript 似乎无法处理 PHP！

因此，“do_stuff.php”（以前称为 sendmail.php）从未使用 echo JURI::base(); 执行。

即便如此。var = $this->item... 还试图从不起作用的 PHP 变量中获取数据。因此，为了解决那些放在隐藏输入表单中的变量的值，以便通过 getObjectById 检索它们。

就像我的朋友所说的那样，不知道这是否是最优雅或最复杂的解决方案......但它确实起到了作用并达到了它的目的。

但是，如果有人有更好更“正确”的方法来实现这一点，我会全神贯注:)

感谢@jack 的帮助！以及将来为该主题做出贡献的任何其他人。

**- 原帖 -**

还在学习 PHP 和 Joomla 和 K2。已经坐了好几天了，试图弄清楚如何让特定作者在使用 fb:comments 发表评论时收到电子邮件。

到目前为止一切顺利...... [FB.event.subscribe comment.create 无需用户采取行动即可](https://stackoverflow.com/questions/14988508/fb-event-subscribe-comment-create-acting-without-action-from-user)

现在，唯一缺少的是对变量“$item->author->name”的引用。因为这在我调用 sendmail.php 的原始文件 (item.php) 中可用

```
<script>
window.fbAsyncInit = function() {

    /* All the events registered */
    FB.Event.subscribe('comment.create', function (response) {
        $.get('<?php echo JURI::base(); ?>sendmail.php');
    });
};
</script> 
```

这是“sendmail.php”文件

```
<?php
    if ($item->author->name == "Firstname1 Lastname1"){
        $to = "author1@mydomain.com";
    }else if ($item->author->name == "Firstname2 Lastname2"){
        $to = "author2@mydomain.com";
    };

    $subject = "New comment";
    $message = "A new comments has been made.";
    $from = "admin@mydomain.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
?> 
```

我不知道如何让 $item->author->name 工作。因为我需要确保它以某种方式检查名称是什么（因为它显示在生成的页面上，所以我必须能够以某种方式使用它）来指定要发送到的电子邮件。

我不知道这是否已经被问过，但我什至不知道要搜索什么才能让我从这里开始。我无法想象这将很难解决（如果你只知道你需要改变什么）。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:28:49.983

您可以尝试在 ajax 调用中将作者姓名作为参数传递。这些方面的东西：

```
FB.Event.subscribe('comment.create', function (response) {
     var name = $item->author->name;
        $.get('<?php echo JURI::base(); ?>sendmail.php'), new {'authorName': name};
    }); 
```

然后在您的 sendmail 脚本中，您应该能够访问传递的`authorName`参数...

```
if (authorName == "Firstname1 Lastname1"){... 
```

您还可以使用 $.post 将参数发送到 sendmail 脚本。

注意：这是未经测试和记忆的，但希望它会为您指明正确的方向。距离我上次使用 Joomla 也已经有一段时间了，并且可能有更好的 Joomla 特定的方法来实现这一点。

**编辑：**这是使用 POST 将变量传递给 sendmail 脚本的示例：

```
FB.Event.subscribe('comment.create', function (response) {
     var name = $item->author->name;
        $.ajax({
                type: "POST",
                url:'<?php echo JURI::base(); ?>sendmail.php'), 
                data: authorName,
                cache: false, 
             });
}); 
```

...在您的 sendmail.php 文件中：

```
<?php
    //creating an $author variable and populating it from $_POST
    $author = $_POST['authorName'];

    if ($author == "Firstname1 Lastname1"){
        $to = "author1@mydomain.com";
    }else if ($author == "Firstname2 Lastname2"){
        $to = "author2@mydomain.com";
    };

    $subject = "New comment";
    $message = "A new comments has been made.";
    $from = "admin@mydomain.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
?> 
```

同样，这是未经测试的，但应该给你一个想法。由于您使用的是 Joomla，您还应该查看 Joomla 的`com_mailto`组件，它可能会也可能不会更容易。您可以使用“通过 ajax 将参数传递给外部 PHP 脚本”或类似的内容来搜索更多信息。

另外，这里是[jQuery ajax的参考](http://api.jquery.com/jQuery.ajax/)

# string - firefox插件：将外部网址下载到字符串中

> ID：14992145
> 
> 赞同：1
> 
> 时间：2013-02-20T23:49:43.623
> 
> 标签：string, url, firefox, firefox-addon, add-on

我需要将一些外部网址下载到 Firefox 插件中的字符串。

如何访问外部 url 的内容进行解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T14:34:30.487

要在 Firefox 插件中找出当前选项卡的 url，您可以执行以下操作：

```
var localString = gBrowser.currentURI.spec; 
```

然后你可以按照你想要的方式解析 localString 。

# java - Solr 管理页面未加载

> ID：14992148
> 
> 赞同：1
> 
> 时间：2013-02-20T23:50:02.343
> 
> 标签：java, solr, admin

我正在使用 Solr，我尝试将 solr 挂载到我的 webapp 上，假设它是：MyApp。根据 solr web.xml：

我将其修改为：

```
<filter-name>SolrRequestFilter</filter-name>
<filter-class>org.apache.solr.servlet.SolrDispatchFilter</filter-class>

<init-param>
  <param-name>path-prefix</param-name>
  <param-value>/solr/</param-value>
</init-param> 
```

```
<filter-name>SolrRequestFilter</filter-name>
<url-pattern>/solr/*</url-pattern> 
```

我还修改了这部分映射：

```
<servlet-mapping>
<servlet-name>LoadAdminUI</servlet-name>
<url-pattern>/solr/admin.html</url-pattern> 
```

我还将整个 solr.war 复制到文件夹：MyApp/solr/

所以我不想去 /solr/admin.html 我想去我的网络应用程序，例如：/MyApp/solr/admin.html

当它运行时，我可以点击：/solr/admin.html，但页面不会完全加载。我想念什么？请帮忙。...非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:57:23.080

显然，这个功能从未进入 4.0，不幸的是，即使是现在，4.3 甚至都没有出现在雷达上。

[https://issues.apache.org/jira/browse/SOLR-3781](https://issues.apache.org/jira/browse/SOLR-3781)

# twitter-bootstrap - 在引导程序中使用 Font Awesome 而不覆盖字形

> ID：14992156
> 
> 赞同：4
> 
> 时间：2013-02-20T23:50:26.837
> 
> 标签：twitter-bootstrap, fonts, font-face, font-awesome

我想在我的引导应用程序中使用一些 Font Awesome 字体。这是一个遗留应用程序，客户不想要新图标。当前的图标是引导字形。Font Awesome 图标非常接近但不一样。没什么大不了的吧？我不应该能够使用字体系列来使用 Font Awesome 并为我想要的图标放入正确的字体。

我的项目中有 Font Awesome 'fonts' 目录。它包含4个文件：

```
fontawesome-webfont.eot
fontawesome-webfont.svg
fontawesome-webfont.tff
fontawesome-webfont.woff 
```

我需要添加什么 css 才能使其正常工作？

我的 html 标记应该是什么样子？我见过这样的例子：

```
<g><text x="0" y="0">&#xf040</text></g> 
```

但是，当我这样做时，它不起作用。我知道我错过了几个步骤。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-14T13:22:13.353

我将 font-awesome.css 文件中的所有“icon-”替换为“fw-icon-”。然后，所有的引导图标还是一样的，如果我需要使用 FontAwesome 图标或类，我只需要在前面使用“fw-”。

例子：

```
<i class="fw-icon-2x fw-icon-star" data-toggle="tooltip" title="Starred"></i> 
```

编辑：

今天，Font Awesome 4.0 发布了，所有的类都与 Bootstrap 的图标模式不同：

```
<i class="fa fa-camera-retro"></i> fa-camera-retro 
```

在这里你可以看到： http: [//fontawesome.io/examples/](http://fontawesome.io/examples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:38:23.097

我认为这在您重命名 Font Awesome 定义的任何 CSS 类之前是不可能的。Font Awesome 旨在替代 Bootstrap 的图标，因此重新定义了任何*icon-**类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T01:41:24.833

重要* 要同时使用 glyphicons 和 fontawesome，您必须禁用具有相同名称的图标。假设您想使用 Glyphicons`icon-screenshot`而不是在 fontawesome 中禁用它。
而那些你想在 fontawesome 中使用的图标会在 glyphicons 中禁用它们。第一步是在 bootstrap.css 文件之后的 head 部分中包含 fontawesome css 文件，例如：

如果你想 `icon-file`从 fontawesome 使用而不是在 bootstrap.css 中禁用它。像这样
/* icon-file { background-position: -24px -24px; } */

```
<head>
 <link rel="stylesheet" href="css/font-awesome.min.css">
<link rel="stylesheet" href="css/bootstrap.min.css">

</head> 
```

请参阅 Jsfiddle [Jsfiddle 字体真棒](http://jsfiddle.net/pPf7N/3/)

一个带有 fontawesome 图标的简单按钮：-

```
<a class="btn" href="#">
<i class="icon-repeat"></i> Repeat</a> 
```

Nav Pills 字体真棒：-

```
<ul class="nav nav-pills">
     <li class="active"><a href="#"><i class="icon-file"></i> New File</a></li>
     <li><a href="#"><i class="icon-cut"></i> Cut</a></li>
     <li><a href="#"><i class="icon-edit"></i> Edit</a></li>
     <li><a href="#"><i class="icon-paste"></i> Settings</a></li>
</ul> 
```

在结束 i 标记和您在其后键入的单词之间插入空格。

# google-visualization - Google Chart API - 阶梯线图

> ID：14992157
> 
> 赞同：7
> 
> 时间：2013-02-20T23:50:30.037
> 
> 标签：google-visualization

我正在尝试使用 Google Chart API 获得阶梯线图。我搜索了文档并没有找到任何东西。

这是我在 Flot 中看到的一个示例：

[http://www.flotcharts.org/flot/examples/threshold/index.html](http://www.flotcharts.org/flot/examples/threshold/index.html)

更多信息：

我正在尝试随着时间的推移绘制帐户余额。因此，如果 1 月 1 日余额为 1,000 美元，2 月 1 日余额为 2,000 美元，则谷歌折线图显示 1 月和 2 月之间的斜线，不能准确反映实际账户余额。我宁愿不绘制更多的值（即在 1 月 31 日添加 1,000 美元的余额），但如果这是唯一的方法，我可能不得不这样做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-17T08:59:24.417

在您的示例中，如果您在 2 月 1 日绘制 1,000 美元（即同一日期的前后值），您将获得一个不错的步骤。这是一种变通方法，必须有更好的解决方案，但它很容易实施，并且确实为您提供了您所追求的视觉效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:16:56.757

查看以下文章： [https](https://developers.google.com/chart/interactive/docs/gallery/steppedareachart?hl=ru)
://developers.google.com/chart/interactive/docs/gallery/steppedareachart?hl=ru和游乐场：
[https ://code.google.com/apis/ajax/playground/?type =可视化#stepped_area_chart](https://code.google.com/apis/ajax/playground/?type=visualization#stepped_area_chart)

# javascript - 骨干模态 - 正确的方法

> ID：14992161
> 
> 赞同：0
> 
> 时间：2013-02-20T23:50:55.727
> 
> 标签：javascript, backbone.js

我使用我的模型和所有模型通用的模态，我想知道处理删除模型的 id 的正确方法是什么，我的想法是：

在删除链接上触发模型中的功能：

```
modal : function(e) {
    var edu_id = $(e.currentTarget).data('id'),
        confirm = $(e.currentTarget).data('confirm');
        newModal = new Modal({ model: new Backbone.Model({header:"Potwierdź", content: confirm}) });

    // we are waiting for OK button in modal, when event occured FIRE!
    newModal.on('fire',this.fire,this);
    e.preventDefault();
} 
```

我正在监听用户单击“确定”按钮时触发的事件“fire”，主要问题是如何传递 edu_id 来删除元素？这通常是好的方法还是我应该以不同的方式来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:11:28.397

回答我自己；），我是怎么做的只是在带有附加参数的子事件中触发事件：

```
this.trigger('fire',model_id); 
```

它工作正常。

# objective-c - TableView 中控制什么？

> ID：14992164
> 
> 赞同：0
> 
> 时间：2013-02-20T23:51:12.007
> 
> 标签：objective-c, xcode, cocoa

我正在尝试创建包含基于**视图**的 TableViews 的视图，即：NSOutlineView，并希望更好地理解在 IB 中建立的正确连接。

目前，我创建了一个分配有 AppDelegate 的 MainWindow。

最重要的是，我介绍了一个 NSOutlineView，它最终有一个数组作为它的数据源。

我想有一个单独的控制器来照顾这个及其子视图。

NSOutlineView 由以下部分组成：

*   NSTableColumn
*   NSTableViewCell
*   NSTextField

在我的 NSTableCellView 中，我添加了两个 NSTextField，顶部的一个将用作标题，第二个是迷你型，用于显示描述。

我面临的问题是控件需要连接一个 IBOutlet。

我的逻辑是；唯一会发生变化的控件是 NSTableView，因为 TableColumn 中需要有一个单独的 TableView，这将是数组中 item.count 的结果。

其次，我假设 IBOutlet 需要指向 TableViewCell 中的每个 TextField，这将允许它们显示数组中每个 item.count 的正确信息。

所以，我需要做的就是设计一个具有**三个**IBOutlets 的控制器。

我的基础知识是否正确……还是我偏离了轨道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:15:34.343

我没有得到你所要求的一切，但首先你没有为你设置出口，`NSTableView`你需要使用 a `NSArrayController`、 KVC 和绑定。

`IBOutlet`1）在您的 AppDelegate.h 中为您创建一个`NSArrayController`：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
IBOutlet NSArrayController *yourArrayController;
} 
```

2）在 AppDelegate.m 中将您的输入或其他内容放入`NSArrayController`：

```
yourItem *newItem = [[yourItem alloc] init];
[newItem setValue:[_inputVar stringValue] forKey:@"name"]; //use Key Value Coding
...
[yourArrayController addObject:newItem]; 
```

3) 现在转到您的 .xib 并`NSArrayController`在 Dock（.xib 左侧的区域）中绘制一个对象（带有 3 个蓝色立方体的绿色气泡）。

4）在您的表格视图中，在每一行单击三下并打开`Bindings inspector`

5）转到“值”并激活“绑定到”，选择`yourArrayController`

6）设置`Controller Key`为“arrangedObjects”

7) 写入适当的密钥`Model Key Path`

对每个 tableview 列执行此操作，基本上你应该没问题。没有`IBOutlet`从控制器给你`NSTableView`！

`NSArrayController`正在处理用户在您的表格视图中来回输入的信息，这非常方便。我知道不能回答你所有的问题，但它可能会帮助你开始。祝你好运！

# c# - 根据登录条件停止？

> ID：14992166
> 
> 赞同：3
> 
> 时间：2013-02-20T23:51:17.977
> 
> 标签：c#, .net, winforms, if-statement

我是 C# 新手，所以我的问题出在登录表单上。

如果每次我点击提交按钮时我的用户类不是“admin”，它就会让我回到登录表单。所以当我猜的条件不正确时，我的陈述就会停止。这是我的代码。

--------编辑对不起，我的新手限制是我所拥有的：一个带有用户名和角色的 sql 表，具体取决于他们拥有的角色，用户将加载不同的表单

```
// Compare strings
 private bool CompareStrings(string string1, string string2)
    {
        return String.Compare(string1, string2, true, System.Globalization.CultureInfo.InvariantCulture) == 0 ? true : false;
    }

// button on Login form    
public void button1_Click(object sender, EventArgs e)
    {
        try
        {
            SqlConnection UGIcon = new SqlConnection();
            UGIcon.ConnectionString = "Data Source=BVSQL; Initial Catalog=BV1;user id=jose; password=jones6;";

            UGIcon.Open();
            SqlCommand cmd = new SqlCommand("SELECT ISNULL(bvuser, '') AS stUsername, ISNULL(bvpassword,'') AS stPassword, ISNULL(bvclass, '') AS stRole FROM BVusertable WHERE bvuser='" + textBox1.Text + "' and bvpassword='" + textBox2.Text + "'", UGIcon);
            SqlDataReader dr = cmd.ExecuteReader();

            string userText = textBox1.Text;
            string passText = textBox2.Text;
            //string stRole = "admin";

            dr.Read();
            {
                if
                   (this.CompareStrings(dr["stUsername"].ToString(), userText) &&
                    this.CompareStrings(dr["stPassword"].ToString(), passText)
                    )
                {
                    if (this.CompareStrings(dr["stRole"].ToString(), "admin"))
                    {
                        this.DialogResult = DialogResult.OK;
                    }
                    else if (this.CompareStrings(dr["stRole"].ToString(), "user"))
                    {
                        this.DialogResult = DialogResult.No;
                    }
                }
                else
                {
                    //MessageBox.Show("Error");
                }
            }
            dr.Close();
            UGIcon.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Login Falied");
        }
    } 
```

这是 Programs.cs

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace BV_SOFT
{
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Loginf fLogin = new Loginf();
        if (fLogin.ShowDialog() == DialogResult.OK)
        {
            Application.Run(new Home2());
        }
        else
        if (fLogin.ShowDialog() == DialogResult.No)
        {
            Application.Run(new Home3());
        }
        else
        {
            Application.Exit();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:40:16.683

您调用 ShowDialog 两次。尝试这个：

```
Loginf fLogin = new Loginf();
DialogResult result = fLogin.ShowDialog();
if (result == DialogResult.OK)
{
    Application.Run(new Home2());
}
else if (result == DialogResult.No)
{
    Application.Run(new Home3());
}
else
{
    Application.Exit();
} 
```

调用`ShowDialog`两次将显示表单两次。使用它只会显示一次。在您的代码中，如果角色不是“admin”，则执行 else 块，并`ShowDialog` *再次调用它会**再次*显示表单，这不是您想要的。显示一次表格，存储结果，然后检查存储的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:57:09.573

仅当用户具有“管理员”角色时才将其设置`DialogResult`为。`OK`

在所有其他情况下，除非角色是“用户”，否则您将保留未设置的结果。这将意味着表单不会被关闭。

在不知道你的逻辑是什么的情况下，我无法建议它应该是什么。

# javascript - 对话框中的按钮以及如何在表单提交时获取相应的按钮值

> ID：14992167
> 
> 赞同：2
> 
> 时间：2013-02-20T23:51:32.613
> 
> 标签：javascript, asp.net-mvc

我有一个具有形式的剃刀视图。在表单中有一个名为上传的按钮。上传按钮发布到一个运行良好的操作方法。

我想添加一个模式框确认，当他们点击上传按钮时会出现，现在在模式框中我想要两个按钮。一个会说“Normal Parsing”，另一个会说“Buffer Parsing”。一旦他们按下对话框中的任一按钮，表单将提交给操作方法，并且在操作方法中我想查看他们按下了哪个对话框按钮，“正常解析”或“缓冲区解析”。

这就是我目前所拥有的对话框，我只需要看看控制器将如何获得按下按钮的值。多谢你们！！

```
function getParsingRoute(){
  var buttonPressed;
    .dialog({
                modal: true,
                width: 600,
                title: 'Parsing Values Confirmation',
                buttons: {
                    "Normal Parsing": function () {
                        buttonPressed = "Normal";
                    },
                    "Buffer Parsing": function () {
                        buttonPressed = "Buffer
                    }
                }
            })
}

  @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {

    <button name="submit" class="art-button" type="submit" value="Upload" onclick="getParsingRoute()" style="width: 100px">Upload</button>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:13:05.613

受***@Barmar***评论启发的解决方案：

```
function getParsingRoute(e){
e.stopPropagation();
    .dialog({
        modal: true,
        width: 600,
        title: 'Parsing Values Confirmation',
        buttons: {
            "Normal Parsing": function () {
                $("#hiddenInput").val("Normal Parsing");
            },
            "Buffer Parsing": function () {
                $("#hiddenInput").val("Buffer Parsing");
            }
        }
    })
$("#form").submit();
}

 @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {
    <input name="inputName" type="hidden" id="hiddenInput" value="" />
    <button name="submit" class="art-button" type="submit" value="Upload"  onclick="getParsingRoute()" style="width: 100px">Upload</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:01:53.717

尝试以下方法：

```
function getParsingRoute(){
  var buttonPressed;
    .dialog({
        modal: true,
        width: 600,
        title: 'Parsing Values Confirmation',
        buttons: {
            "Normal Parsing": function () {
                 $.ajax({
                    url: "http://example.com",
                    type: "POST",
                    data: contactForm.serialize() + "&buttonPresed=Normal Parsing" 
                }).done(function (data) {
                    //done
                })
            },
            "Buffer Parsing": function () {
                $.ajax({
                    url: "http://example.com",
                    type: "POST",
                    data: contactForm.serialize() + "&buttonPresed=Buffer Parsing" 
                }).done(function (data) {
                    //done
                })
            }
        }
    })
} 
```

此代码仅向您展示如何做到这一点。

# java - Java 中的 JSON JAX-RS

> ID：14992172
> 
> 赞同：3
> 
> 时间：2013-02-20T23:51:51.327
> 
> 标签：java, json, jersey, jax-rs, httpful

我将 Jersey 用于 Java 中的 RESTful Web 服务。我正在从 PHP 客户端使用它们。我使用 JSON 可以正常工作，如下所示：

PHP：（使用httpful phar）

```
 $uri="http://localhost:8080/YYYYY/rest/common/json";
    $r = \Httpful\Request::post($uri)
    ->body({"name":"MyName"})->send();
    return $r; 
```

Java RESTful WS：

```
@POST
@Path(value="json")
@Produces(MediaType.TEXT_HTML)
@Consumes(MediaType.APPLICATION_JSON)
public String jsonTest(final JaxData data)
{
    System.out.println(data.toString());
    return "this is the name: "+data.name;
} 
```

Java绑定类：

```
@XmlRootElement
public class JaxData {
    @XmlElement public String name; 
} 
```

现在我要做的是发送以下 JSON 结构：

```
{
"title":"MyTitle",
"names":[
    {
        "name":"nameOne"
    },
    {
        "name":"nameTwo"
    }
],
"city":"MyCity",
"country": "MyCountry"
    } 
```

如您所见，我想在对象内部发送对象，而不是 Java 的原始类型。我如何从 Java 端做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:58:27.603

定义一个表示您要发送的数据的对象。您可以使对象任意深（JSON 中的每个级别都可以映射到一个子对象）。

这是一个帮助您入门的示例：

```
public class MyBean implements Serializable {
    private String title;
    private List<JaxData> names;
    private String city;
    private String country;

    // Constructors, getters/setters
}

@POST
@Path(value="json")
@Produces(MediaType.TEXT_HTML)
@Consumes(MediaType.APPLICATION_JSON)
public String jsonTest(final MyBean data) {
    return data.toString();
} 
```

# sharepoint - SharePoint 2010：从生产数据设置本地开发环境 - 由于 PublicKeyToken 无效，无法加载文件或程序集

> ID：14992173
> 
> 赞同：0
> 
> 时间：2013-02-20T23:52:00.360
> 
> 标签：sharepoint, sharepoint-2010, gac, strongname

我尝试了多种方法将生产 SharePoint 内容获取到我新安装的本地开发环境中，该开发环境在 VM Windows Server 2008 R2 上运行。在农场导出和恢复失败后，我看到了这篇博文并按照以下说明操作：[http ://richardstk.wordpress.com/2012/02/03/build-a-sharepoint-2010-development-test-environment /](http://richardstk.wordpress.com/2012/02/03/build-a-sharepoint-2010-development-test-environment/)。总而言之，它基本上是备份实时 SQL 内容数据库以及 Profile、Sync 和 Social 数据库，然后在开发机器上恢复它们​​并指示 SharePoint 使用这些新数据库而不是旧数据库。然后，我从 Visual Studio 中将自定义 Web 部件部署到开发服务器。

我已经这样做了，它似乎工作得很好。我可以访问 Central Administrator 以及在 Visual Studio 中设置 SharePoint 连接，并且能够查看所有页面、列表、文档等。所以它肯定指向新的内容数据库。我应该提到我还可以通过 SharePoint Designer 连接并访问所有正确的内容、母版页、列表等。

我遇到的问题是，当我在浏览器中访问该站点时出现“无法加载文件或程序集”错误，它会将我带到 /Pages/Home.aspx。该文件是我从 Visual Studio 中部署的自定义 Web 部件。当我在 GAC 中查看时，我看到列出的程序集，但 PublicKeyToken 与错误消息中显示的不同。

当我深入研究它时，我看到自定义用户控件已在我的母版页中注册，当我查看它所在的 _controltemplates 目录中的 ascx 文件时，有一个如下所示的程序集：

```
<%@ Assembly Name="BlogRoll, Version=1.0.0.0, Culture=neutral, PublicKeyToken=529e9730fe2a198d" %> 
```

当我在那里查看 GAC 时，PublicKeyToken 对于实时站点是正确的，但是当我将它部署到本地 GAC 时，它创建了一个新的 PblicKeyToken。对不起，如果我漫无目的，但我不确定什么是相关的，什么不是。

我想我的问题是如何处理这个？在本地更改所有 ascx 文件以匹配我在本地 GAC 中拥有的新 PublicKeyToken 似乎并不聪明，因为当我将这些更改部署到现场时，他们将找不到合适的程序集。处理这个问题的最佳方法是什么？

**更新**

有问题的代码有一个 key.snk 文件，用于对其进行强签名。我的理解是，这应该使它每次都使用特定的 PublicKeyToken 进行编译，因此使用特定的 PublicKeyToken 安装在 GAC 中。如果这是真的，那么我相信它在我的开发环境与生产环境中具有不同密钥令牌的唯一原因是提供的 key.snk 文件不正确。真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:19:51.693

您可以使用 WSP Builder 或 WinGac 将具有正确 PublicKeyToken 的程序集强制部署到本地 GAC。

# html - CSS动画不起作用？

> ID：14992174
> 
> 赞同：1
> 
> 时间：2013-02-20T23:52:10.020
> 
> 标签：html, css, animation

我正在尝试做一个简单的动画来改变盒子的颜色。但是，该框从未出现，并且显然没有动画发生。我有：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
<div>
width:100px;
height:100px;
background:red;
animation:myfirst 5s;
-moz-animation:myfirst 5s; /* Firefox */
-webkit-animation:myfirst 5s; /* Safari and Chrome */
-o-animation:myfirst 5s; /* Opera */
</div>

@keyframes myfirst
{
from {background:red;}
to {background:yellow;}
}

@-moz-keyframes myfirst /* Firefox */
{
from {background:red;}
to {background:yellow;}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
from {background:red;}
to {background:yellow;}
}

@-o-keyframes myfirst /* Opera */
{
from {background:red;}
to {background:yellow;}
}
</style>
</head>
<body>
 ....
</body>
</html> 
```

为什么什么都没有发生？我不是一个真正的网络开发人员，但我想我会试一试。我似乎正确地遵循了所有指示，但也许我错过了一些东西。

请注意，这里的所有内容都是在本地完成的，这只是在我桌面上的 .html 文件中。但它似乎仍然可以工作。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:55:18.547

我认为你只是度过了糟糕的一天，但你有

```
<style>
<div>
    VARIOUS CSS RULES 
```

你应该把它写成

```
<style>
div {
/* snip */
<body>
<div>....</div> 
```

似乎工作虽然：http: [//jsfiddle.net/CPL6P/](http://jsfiddle.net/CPL6P/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:54:35.100

```
<style>
<div>
width:100px;
height:100px;
background:red;
animation:myfirst 5s;
-moz-animation:myfirst 5s; /* Firefox */
-webkit-animation:myfirst 5s; /* Safari and Chrome */
-o-animation:myfirst 5s; /* Opera */
</div> 
```

应该

```
<style>
div {
width:100px;
height:100px;
background:red;
animation:myfirst 5s;
-moz-animation:myfirst 5s; /* Firefox */
-webkit-animation:myfirst 5s; /* Safari and Chrome */
-o-animation:myfirst 5s; /* Opera */
} 
```

# jquery - 数据标签的某些元素 - 可能是正则表达式？

> ID：14992178
> 
> 赞同：0
> 
> 时间：2013-02-20T23:52:36.157
> 
> 标签：jquery, regex, selector

现在我得到一个基于数据标签的元素，它必须取决于元素**文章**或**放在一边**，而不是所有其他元素。

```
 placeholder = $('article[data-tag="blah"]').length
      ? $('article[data-tag="blah"]')
      : $('aside[data-tag="blah"]'); 
```

我猜它可以更容易完成......我已经尝试过这个：

```
 placeholder = $('article[data-tag="blah"]') || $('aside[data-tag="blah"]'); 
```

当然没有成功，因为 jQuery 永远不会返回 undefined。有没有办法用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:57:36.220

您可以抓取所有文章和旁白，然后按属性过滤：

```
 $("article, aside").filter('[data-tag="blah"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:03:50.627

```
placeholder = $('article[data-tag="blah"]');
if (placeholder.length == 0) {
    placeholder = $('aside[data-tag="blah"]');
} 
```

# iphone - iOS6 iPhone App -- 如何只缩放到 userLocation 一次？

> ID：14992179
> 
> 赞同：0
> 
> 时间：2013-02-20T23:52:39.313
> 
> 标签：iphone, ios, xcode, mapkit

下面的代码是我一直用来放大用户位置的方法，但是一旦用户移动地图，它就会停止不断地重新缩放到它。这种方法的问题是，当它在应用程序中请求用户位置数据的权限时，我选择是，它什么也不做。我必须离开页面并在它正确缩放之前返回。

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
    if ([self.mapView showsUserLocation])
    {
        MKCoordinateRegion region;
        region.center = self.mapView.userLocation.coordinate;

        MKCoordinateSpan span;
        span.latitudeDelta  = .50; // Change these values to change the zoom
        span.longitudeDelta = .50;
        region.span = span;

        [self.mapView setRegion:region animated:YES];

        self.mapView.showsUserLocation = NO;}
} 
```

上面的方法应该是监控用户位置的变化，一旦找到就设置位置。然后，我在 if 语句中设置了一个条件以使其停止 -**否则当您移动地图时它会继续移动回用户位置。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:49:08.377

在我看来，它`self.mapView.showsUserLocation`设置为`FALSE`弹出窗口出现的时间，因为它还不知道用户的位置。为了解决这个问题，我建议只使用您自己的变量。在这个类中创建一个全局布尔值并使用它来代替 self.mapView.showsUserLocation。此外，请确保该函数实际上是在用户同意弹出窗口后调用的。你有 NSLogging 吗？

# c# - 使用 Microsoft Fake Framework MVC4 对 WebMatrix.WebData 进行单元测试

> ID：14992180
> 
> 赞同：2
> 
> 时间：2013-02-20T23:52:42.580
> 
> 标签：c#, unit-testing, asp.net-mvc-4, security, microsoft-fakes

如果没有以下错误消息，我无法使用新的 Microsoft Fake Framework 测试来自 AccountController 的任何注销、登录、注册操作：System.Security.VerificationException：操作可能会破坏运行时的稳定性。

单元测试非常简单：

```
 [TestMethod]
    public void LogOff()
    {
        var AccountController = new AccountController();
        RedirectToRouteResult RedirectToRouteResult;

        //Scope the detours we're creating
        using (ShimsContext.Create())
        {
            ShimWebSecurity.Logout = () => {  };
            var test = AccountController.LogOff();
            RedirectToRouteResult = AccountController.LogOff() as RedirectToRouteResult;
        }

        Assert.IsNotNull(RedirectToRouteResult);
        Assert.AreEqual("Index", RedirectToRouteResult.RouteValues["Action"]);
        Assert.AreEqual("Home", RedirectToRouteResult.RouteValues["controller"]);
    } 
```

还可以找到这个：[http](http://social.msdn.microsoft.com/Forums/en-US/vsunittest/thread/f84962ea-a9b2-4e0d-873b-e3cf8cfb37e2) ://social.msdn.microsoft.com/Forums/en-US/vsunittest/thread/f84962ea-a9b2-4e0d-873b-e3cf8cfb37e2谈论相同的错误但没有答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:08:25.377

我在 VS2012 Update 1 发布之前问了同样的问题（[在单元测试期间实例化 MVC 控制器时出现 VerificationException](https://stackoverflow.com/questions/13309278/verificationexception-when-instantiating-mvc-controller-during-unit-testing)），我得到了来自微软的一个人的回复，他说他们正在研究它，它应该在下一次更新中可用。好吧，从那以后什么都没有。

但是，为了获得结果并继续使用 Microsoft Fakes Framework 进行测试，我`UrlHelper`使用自己的私有方法包装了对 MVC 方法的调用，例如类中的那些方法，这些私有方法返回原始类型`string`，然后 Shim 单元测试给我一个想要的结果。这样我就不会调用底层的 MVC 基础设施，我得到了想要的结果。此外，您需要删除 System.Web.Mvc.Fakes 引用，否则 VerificationException 将不断弹出。

如果你觉得这很乏味，那么你应该切换到更成熟的单元测试框架，比如 Moq 或 Rhino。

# python - Numpy数组：使用同时分配交换列

> ID：14992182
> 
> 赞同：11
> 
> 时间：2013-02-20T23:53:12.343
> 
> 标签：python, arrays, numpy, swap

我正在尝试使用同时分配交换 Numpy 数组的列，但出现意外行为：

```
A = arange(12).reshape(3,4)
print(A)

# prints [[ 0  1  2  3]    Ok
#         [ 4  5  6  7]
#         [ 8  9 10 11]]

A[:,0], A[:,1] = A[:,1], A[:,0]
print(A)

# prints [[ 1  1  2  3]    Not what intended (swap)
#         [ 5  5  6  7]
#         [ 9  9 10 11]] 
```

预期行为：RHS 上数组的“视图”都被评估，然后由 LHS 上的目标对象执行分配，将 RHS 视图的内容“复制”到新位置。我声称副本是在切片到切片的分配中制作的，原因如下：

```
A = arange(12).reshape(3,4)
A[:,0] = A[:,1]
A[:,1] = array([99,99,99])
print A[:,0]

# prints: [1 5 9] 
```

实际发生的情况：似乎在同时分配切片时，ndarray 会“一次一个”地评估并分配 RHS 和 LHS 上的各种术语： first`A[:,0] = A[:,1]`和 then `A[:,1] = A[:,0]`。

这是由于 ndarray 类以不同于标准 python 方式的方式自定义同时分配吗？

# android - 降低速度值 LUA

> ID：14992184
> 
> 赞同：0
> 
> 时间：2013-02-20T23:53:36.547
> 
> 标签：android, ios, lua, coronasdk

如何通过每 10 秒`movementSpeed`减少-1 来增加。 `star1.movementSpeed = 10000;`

我已经尝试过了，但无法弄清楚我做错了什么

```
function initStar()
local star1 = {}
star1.imgpath = "Star1.png"; --Set Image Path for Star
star1.movementSpeed = 10000; --Determines the movement speed of star
table.insert(starTable, star1); --Insert Star into starTable
end --END initStar()    

 local function star1incr() -- increments Speed value every time it is called
 movementSpeed = movementSpeed - 1
 star1.movementSpeed = "movementSpeed: " .. movementSpeed 
 end

 timer.performWithDelay(10000, star1incr, 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:54:09.860

通过使用修复

```
 local function star1incr()
        starTable[1].movementSpeed = starTable[1].movementSpeed - 1
        print( "- 1" )
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:15:08.323

您需要有一个可以在`initStar()`和之间共享的变量`star1incr()`（顺便说一句，“`movementSpeed`通过减少增加`...movementSpeed`听起来不正确）；这样的事情可能会起作用：

```
local star1 = {}

function initStar()
  star1.imgpath = "Star1.png" --Set Image Path for Star
  star1.movementSpeed = 10000 --Determines the movement speed of star
end --END initStar()    

local function star1incr()
  star1.movementSpeed = star1.movementSpeed - 1
end

timer.performWithDelay(10000, star1incr, 0) 
```

`star1`变量将在`initStar`和`star1incr`函数之间共享（在 Lua 术语中，它被称为上值）。

# javascript - 淘汰赛 - JS 分裂

> ID：14992186
> 
> 赞同：-1
> 
> 时间：2013-02-20T23:53:51.733
> 
> 标签：javascript, knockout.js, pager

我们使用 Knock out 和 Pager JS 开发了一个基于 WEB 的应用程序。我们快要结束这个项目了。我们只有一个视图模型为 UI 屏幕上显示的所有数据元素提供数据绑定。我们正在寻找拆分 JS 文件的选项，以使其更高效和可读。由于我们只有一个视图模型服务于整个数据绑定，因此我们更容易使用 self.methodName(); 为不同的操作调用相同的方法。我的问题如下，

1）如果我们要将视图模型拆分为多个文件，我们如何从一个视图模型调用一个方法到另一个视图模型。

2）我正在检查名称空间以使用敲除拆分文件，但不确定它的工作原理？

3）一些使用require js的建议，我看到了一些例子..但不确定这是否能解决问题。

我们正在应用如下数据绑定，

```
window.VM = new viewModel();

    ko.applyBindings(window.VM); 
```

4）如果数据的内容与多个屏幕共享，我们如何为每个div绑定..例如，如果我想在联系人详细信息中显示联系人详细信息屏幕以及联系人详细信息信息的子集......如何我们实现了吗.. 根据我的理解，数据绑定适用于 div 元素.. 如果我想在两个不同的屏幕上显示相同的数据，我们将如何实现...

很抱歉在一个问题中问了所有问题..

谢谢，拉梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:31:07.487

当然，您必须阅读有关 PubSub 概念的信息，这很容易通过 KO 实现。例如[http://www.knockmeout.net/2012/05/using-ko-native-pubsub.html](http://www.knockmeout.net/2012/05/using-ko-native-pubsub.html)

# javascript - 在 Jvectormap 中切换地图？

> ID：14992196
> 
> 赞同：3
> 
> 时间：2013-02-20T23:54:53.853
> 
> 标签：javascript, jquery, html, jvectormap

我正在尝试使用 Jvectormap 在地图之间切换。

目前我有两个 div，一个“世界地图”和一个“美国地图”。美国地图已隐藏。当有人在世界地图上点击美国时，世界地图 div 关闭，美国地图打开，效果很好。

在显示美国地图时，我还显示了一个旨在将用户带回世界地图的按钮。但是，当单击它时，它会显示两个世界地图。我确定我在做一些根本错误的事情，但找不到任何关于此的文档。我原以为这是一件很平常的事情。

任何指针都会很棒。

**DIVS 和后退按钮图像：**

```
<table width="900" cellpadding="0" cellspacing="0" align="center">
<tr>
<td align="left"><img src="images/titletext.png"></td>
<td align="right"><img src="images/backtoworld.png" border="0" id="backtoworld" style="display:none;" onClick="showworldmap()"></td>
</tr>
</table>

</td>
</tr>
<Tr>
<Td align="center">

<div id="world-map" style="display:block;"></div>
<div id="us-map" style="display:none;"></div> 
```

**jQuery/JavaScript：**

```
 function showusmap() {
      document.getElementById("world-map").style.display = 'none';
      document.getElementById("us-map").style.display = 'block';
      document.getElementById("backtoworld").style.display = 'block';

      openusmap()
 }

     function openusmap() {

      $('#us-map').vectorMap({
    map: "us_aea_en",
    normalizeFunction: 'polynomial',
    backgroundColor: 'transparent',
    regionStyle: {
    initial: {
    fill: '#128da7',
    }},
    onRegionClick: function(event, code){
            //  if (code == "US") { showmap('us_aea_en') }
    },

    series: {

        regions: [{
            values: {
                "US-CA":'#006633',
                "US-IL":'#006633',
                "US-IN":'#006633',
                "US-DC":'#006633',
                "US-WA":'#006633',
                "US-FL":'#006633',
                "US-TX":'#006633',
                "US-OR":'#006633',
                "US-OH":'#006633',
                "US-MS":'#006633',
                "US-OK":'#006633',
                "US-MI":'#006633',
                "US-PA":'#006633',
                "US-NY":'#006633',
                "US-MN":'#006633',
                "US-NC":'#006633',
                "US-GA":'#006633',
                "US-AL":'#006633',
                "US-VA":'#006633',
                "US-VT":'#006633',
                "US-CT":'#006633',
                "US-MO":'#006633',
                "US-AZ":'#006633',
                "US-NJ":'#006633',

                }
        }]
    }
})

  }

function showworldmap() {

     document.getElementById("us-map").style.display = 'none';
      document.getElementById("world-map").style.display = 'block';
      document.getElementById("backtoworld").style.display = 'none';

      openworldmap()
}

function openworldmap() {

        $('#world-map').vectorMap({
            map: "world_mill_en",
            normalizeFunction: 'polynomial',
            backgroundColor: 'transparent',
            regionStyle: {
            initial: {
            fill: '#128da7'

            }},
            onRegionClick: function(event, code){
                        if (code == "US") { showusmap()  }
            },

            series: {
                regions: [{
                    values: {
                        CZ:'#006633',
                        FR:'#006633',
                        IT:'#006633',
                        NL:'#006633',
                        US:'#006633',
                        CH:'#006633',
                        NO:'#006633',
                        SE:'#006633',
                        FI:'#006633',
                        AT:'#006633',
                        GR:'#006633',
                        CY:'#006633',
                        AU:'#006633',
                        BE:'#006633',
                        HU:'#006633',
                        GB:'#006633',
                        ZA:'#006633',
                        BR:'#006633',
                        CA:'#006633',
                        MX:'#006633',
                        PR:'#006633',
                        IL:'#006633',
                        PK:'#006633',
                        MY:'#006633',
                        JP:'#006633',
                    }
                }]
            }
        });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T18:46:15.450

您可以按照 Alex Williams 的建议进行操作，并在显示 Map 容器后触发 resize()。然后它会在你看到它之前被缩放（至少如果你淡入的话）。

```
var $container = $('#yourHiddenMap');
map = new jvm.WorldMap({
    container: $container,
    map: ...
});
$('#yourSwitchButton').click(function() {
    $container.fadeIn().resize();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:35:21.630

我没有下载`vectorMap`库。但是，您似乎在`$('#world-map')`每次`openusmap()`调用时都在加载小部件。我只会在美国和世界地图上初始化一次小部件，并使用 JQuery 的[`toggle`](http://api.jquery.com/toggle-event/)函数来隐藏和显示地图。或者，您可以使用小部件的`destroy`方法或其他等效方法。

# r - R中的Shapefile到光栅转换？

> ID：14992197
> 
> 赞同：9
> 
> 时间：2013-02-20T23:54:53.790
> 
> 标签：r, raster, shapefile, data-conversion, rasterizing

我从 worldwildlife.org 下载了世界陆地生态区的 shapefile。该文件可以在这里加载：[http](http://worldwildlife.org/publications/terrestrial-ecoregions-of-the-world) ://worldwildlife.org/publications/terrestrial-ecoregions-of-the-world 。

它是一个标准的形状文件，我想用它做两件事。首先：从我的本地目录中获取 shapefile 并将其剪辑到北美东部的范围内（ext= extent (-95, -50, 24, 63)）

```
# Read shapefile using package "maptools"
eco_shp <- readShapeLines("F:/01_2013/Ecoregions/Global/wwf_terr_ecos.shp", 
                          proj4string=CRS("+proj=utm +zone=33 +datum=WGS84")) 

# Set the desired extent for the final raster using package "raster" 
ext <- extent(-95, -50, 24, 63) 
```

我确信我必须使用“raster”包中的 rasterize 函数，但我仍然无法让它正常工作。我将不胜感激有关如何执行此操作的任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T00:25:20.910

您认为应该将`raster`（而不是`sp`栅格空间类）用于空间栅格数据是正确的。您还应该使用`rgdal`（而不是`maptools`）来读取、写入和以其他方式操作空间矢量数据。

这应该让你开始：

```
library(rgdal)
library(raster)

## Read in the ecoregion shapefile (located in R's current working directory)
teow <- readOGR(dsn = "official_teow/official", layer = "wwf_terr_ecos")

## Set up a raster "template" to use in rasterize()
ext <-  extent (-95, -50, 24, 63)
xy <- abs(apply(as.matrix(bbox(ext)), 1, diff))
n <- 5
r <- raster(ext, ncol=xy[1]*n, nrow=xy[2]*n)

## Rasterize the shapefile
rr <-rasterize(teow, r)

## A couple of outputs
writeRaster(rr, "teow.asc")
plot(rr) 
```

![在此处输入图像描述](../Images/4ea1a0d1ba4ceeb813ad847d43144550.png)

# jquery - 单击时，更改不透明度并淡入隐藏的 div

> ID：14992199
> 
> 赞同：1
> 
> 时间：2013-02-20T23:54:58.923
> 
> 标签：jquery, html, show-hide

我想知道执行此操作的最有效方法是什么。我尝试了许多在此处发布但没有结果的方法。

我目前有一个表格行，当它被点击时，我希望它改变行的不透明度并淡入两个按钮。

```
<tr id="row1">
<td>Text</td>
<td>Text</td>
<td><div id="hidden">Text</div></td> 
```

我出于数据原因使用表格。本质上，我想知道如何制作它，所以当您单击#row1 时，它会淡化不透明度并淡化id #hidden。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:02:39.430

见fadeTo：[http ://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

```
$('#row1').click(function()
{
  $(this).fadeTo(500, 1); // 100% opacity.  change 1 to .9 or whatever other value between 0 and 1 you want
  $(this).find('#hidden').fadeIn(); // fade all the way in.  Could just do $('#hidden') but I assume your code will evolve to where it will be a div with a class of hidden instead of an ID, as an ID must be unique per HTML document
}); 
```

奖励积分，将一个类添加到您的行中，或者将一个类添加到您的表中，这样您就可以定位它而不是`row1`通过 ID，例如

```
<table class="my-table">
  <tr>...</tr>
  <tr>...</tr>
</table> 
```

然后

```
$('.my-table tr').click(function() { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:15:29.137

演示：http: [//jsfiddle.net/4utt9/](http://jsfiddle.net/4utt9/)

一种方法是使用`animte`and `fadeIn`。目前尚不清楚您是否希望先前隐藏的按钮在它们出现时具有与行相同的新不透明度。但是你可以在 CSS 中改变它。

```
$(document).ready(function() {
    $('tr').on('click', function(event) {
        var $row = $(this);
        $row.animate({ opacity: 0.5}, function() {
            $row.find('.hidden').fadeIn();
        });
    });
}); 
```

如果您希望隐藏的部分不是部分透明的，您可以这样做：

演示：http: [//jsfiddle.net/4utt9/6/](http://jsfiddle.net/4utt9/6/)

HTML：

```
<table>
    <tr id="row1">
        <td>Text 1</td>
        <td>Text 2</td>
        <td class="hidden">
            <div>Text Hidden</div>
        </td>
    </tr>
</table> 
```

JavaScript：

```
$(document).ready(function() {
    $('tr').on('click', function(event) {
        var $row = $(this);
        $row.find('td:not(.hidden)').animate({ opacity: 0.5}, function() {
            $row.find('.hidden').fadeIn();
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:36:30.953

其他答案没有考虑到改变 tr 的不透明度会影响其子项的不透明度

```
$('#row1').on('click', function(){
    $(this).find('td').animate({opacity:0.5}, 1000);
    $(this).find('#hidden').fadeIn().parent().stop().css({opacity:1});
}); 
```

# oop - OOP 在哪里放置孤儿方法

> ID：14992208
> 
> 赞同：1
> 
> 时间：2013-02-20T23:55:39.053
> 
> 标签：oop, design-patterns

抱歉，如果这已在其他地方得到解答，我的搜索并没有得到我正在寻找的答案。

假设地说，假设我正在为书店构建一个应用程序。

我有一个类可以处理我所有的数据库事务。我还有一个扩展 Database 类的“Book”类，从它自己的构造函数中调用 Database 构造函数，从而无需先实例化 Database 类：

```
class Book extends Database {
    __construct($book_id){
        parent::__construct();
        $this->databaseGet("SELECT * FROM..."); // method in Database class
        etc...
    }
} 
```

我可以将引用 id 传递给“Book”类构造函数，并创建一个对象，其中包含从数据库中提取的关于该书的信息以及与给定书相关的几种方法。

但我也想列出数据库中的所有书籍。我的问题是，我应该把这个方法和其他根本没有上下文的方法放在哪里，比如“书”？

我可以创建一个扩展 Database 类的“GetStuff”或“Bookshop”类，其中包含所有这些一次性方法。但这要求它一直被加载，因为这些孤立方法将在整个程序中使用。

我可以创建许多包含单个方法的类，但这需要将类实例化为一个对象才能调用该方法，这似乎有点矫枉过正。

它们不是通用公用事业，它们在商业模式中占有一席之地。我应该把这些孤儿方法放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:07:45.887

如果我理解它，您是在问与特定类型相关但不实现类型本身行为的代码应该去哪里。没有单一的答案。根据系统的整体设计，它可能是类型的一部分——Smalltalk 类有“类字段”和“实例字段”，这并没有错——或者它可以在任何有意义的地方结束。如果它与类型本身的外部事物相关——也就是说，它不仅仅是不是实例的行为，而是与外部事物交互的问题——把它放在外面可能是有意义的。例如，您可能有`Book`, `BookDatabase`, `BookForm`,`BookWebService`等。其中一些成员很少的类没有害处，您永远不知道什么时候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:10:14.300

书是书，书是书的集合。数据库是您可以用来保存大量书籍的一件事，因此您不必再次输入它们。

它可以是 xml 文件、excel 电子表格，甚至是 Web 服务。

所以写书和书，然后写类似的东西

BookDatabase 使用 Books GetBooks() 等方法扩展数据库；和 void SaveBook(Book argBook); 真正的诀窍是让 Book 和 Books 工作，无论它们是什么/如何存储的。

围绕这一点还有很多东西要学习，但首先要做的是重新开始，不要让你的数据对象依赖于特定的“数据库”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T18:13:30.127

看来您的设计存在严重缺陷。您必须分离三个问题：

1.  你的领域层（DM）：在这种情况下，书属于它。
2.  数据访问层 (DAL)：处理数据库存储。领域层根本不知道这一层。
3.  服务层（SL）：处理用例。一个用例可能涉及来自域的多个对象，以及对 DAL 的调用以保存或检索数据。服务层中的方法执行一个工作单元。

一个简化的例子：

```
// Model Object
        class Book {
           title;
           author:
           isbn;
           constructor(title, author, isbn) {// ...}
           // other methods ...
        }

// DAL class
class BookDataMapper {
         // constructors ...

         save(Book book) {}
         Book getById(id) {
           String query = get from book table where book_id = id;
           execute query;
           parse the result;
           Book book = new Book(parsed result);
           return book;
         }
         Book getByTitle(title) {}
         ...
         getAll(){} // returns all books

    }

//Service class 
class BookService {

     BookDataMapper bookMapper;

     buyBook(title) {
        // check user account

        // check if book is available
        Book book = bookMapper.getBytitle(title);

        if book available
        charge customer
        send the book to ship etc.

     }
} 
```

# mysql - MYSql - 在 Zend Db 中使用相关子查询

> ID：14992223
> 
> 赞同：3
> 
> 时间：2013-02-20T23:57:38.380
> 
> 标签：mysql, zend-framework, zend-db, correlated-subquery

我正在尝试使用 zend_db_select (ZF 1.12) 中的相关子查询构造一个有效的 MySql 查询，以在 Zend_Paginator_Adapter 中使用它。工作查询如下：

```
SELECT f.*, (SELECT (COUNT(p.post_id) - 1)
FROM `forum_topic_posts` AS p WHERE f.topic_id = p.topic_id) AS post_count
FROM `forum_topics` AS f WHERE f.forum_id = '2293'
ORDER BY post_count DESC, last_update DESC 
```

所以我制定了：

```
$subquery = $db->select()
->from(array('p' => 'forum_topic_posts'), 'COUNT(*)')
->where('p.topic_id = f.topic_id');

$this->sql = $db->select()
->from(array('f' => 'forum_topics'), array('*', $subquery . ' as post_count'))
->where('forum_id=?', $forumId, Zend_Db::PARAM_INT)
->order('post_count ' . $orderDirection); 
```

但是 Zend 在执行查询时停止并出现以下异常：

`Zend_Db_Statement_Mysqli_Exception: Mysqli prepare error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT COUNT(*) FROM forum_topic_posts AS p WHERE (p.topic_id = f.to' at line 1`

我怎样才能让子查询工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:36:56.867

这是使用`Zend_Db`OO 接口编写的查询。

`Zend_Db_Expr`关键主要是为子查询和`COUNT`函数使用一些对象。

```
$ss = $db->select()
         ->from(array('p' => 'forum_topic_posts'),
                new Zend_Db_Expr('COUNT(p.post_id) - 1'))
         ->where('f.topic_id = p.topic_id');

$s = $db->select()
        ->from(array('f' => 'forum_topics'),
               array('f.*', 'post_count' => new Zend_Db_Expr('(' . $ss . ')')))
        ->where('f.forum_id = ?', 2293)
        ->order('post_count DESC, last_update DESC');

echo $s;
// SELECT `f`.*, SELECT COUNT(p.post_id) - 1 FROM `forum_topic_posts` AS `p` WHERE (f.topic_id = p.topic_id) AS `post_count` FROM `forum_topics` AS `f` WHERE (f.forum_id = 2293) ORDER BY `post_count DESC, last_update` DESC 
```

# java - 在 Android 中处理暂停/恢复和使用通知（使用 AndEngine）

> ID：14992226
> 
> 赞同：0
> 
> 时间：2013-02-20T23:58:12.783
> 
> 标签：java, android, notifications, andengine, onpause

在我正在开发的 Android 游戏中，游戏在后台被 android 杀死。该游戏是使用 AndEngine 构建的，因此它发生在一个 OpenGL 活动中，该活动使用场景在菜单和游戏之间移动。如果在游戏场景处于活动状态（即用户实际玩游戏）时将游戏移至后台，我希望保持游戏的活力。

*   我读过一篇关于作为前台服务运行的文章，所以 android 不会杀死它，但是这可能是因为游戏只是一个单一的活动吗？

理想情况下，如果游戏在后台进行中，我希望显示一个正在进行的通知，用户可以单击以将游戏带回前台。（这种行为的一个例子是 GBA Emulator GameBoid）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:00:11.873

## 在 Android 中处理暂停/恢复状态

处理暂停和恢复状态通常在 Android 中很棘手，使用 AndEngine 甚至更棘手。您可能希望首先阅读有关使用 android 处理暂停和恢复的一般信息，以便了解 android 在例如来电或用户按下电源按钮时调用了哪些方法。看看这些问答：

*   [如何暂停和恢复surfaceview线程](https://stackoverflow.com/questions/3527621/how-to-pause-and-resume-a-surfaceview-thread)

*   [如何从android活动暂停surfaceview线程](https://stackoverflow.com/questions/12626112/how-to-pause-a-surfaceview-thread-from-an-android-activity?rq=1)

*   [surfacedestroyed什么时候发生](https://stackoverflow.com/questions/5606685/when-does-surfacedestroyed-occur)

*   [如何在android中暂停恢复线程](https://stackoverflow.com/questions/6776327/how-to-pause-resume-thread-in-android)

现在是 AndEngine 特定的东西。一种方法（我从[这里](https://stackoverflow.com/a/9073328/1971309)得到）是使用 JSON 序列化状态。@plastic-surgeon 是这样说的：

> 我找到的解决方案是将引擎的状态序列化为 JSON 并将其保存为共享存储。它的工作量很大，但它确实节省了它。由于andengine会在暂停后重新初始化你的引擎和纹理，所以我认为没有太多选择，除非你想为你的游戏重新编写一些andengine。（你可以）
> 
> 在我的 JSON 中，我记录了每个精灵的位置类型速度等。保存内容的复杂性取决于游戏的复杂性。然后我为每个类添加了一个反序列化方法，该方法接受 JSON 作为输入。

感谢@plastic-surgeon，我发现了[GSON](http://code.google.com/p/google-gson/)，正如他所说，它是完全无价的。

## 发布通知

现在，关于您问题的最后一部分，“如果游戏在后台进行中，我希望显示一个持续的通知，”我假设您正在谈论其中之一：

![通知](../Images/29b53de5b41fa6803d90908f0558dacd.png)

在您掌握了暂停和恢复状态的基本处理*后*，处理通知。要发出通知，您需要阅读有关在通知区域显示通知的内容。这是一些示例代码，可以让您了解一下：

```
NotificationCompat.Builder mBuilder =
        new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle("My notification")
        .setContentText("Hello World!");
// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, ResultActivity.class);

// The stack builder object will contain an artificial back stack for the
// started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(
            0,
            PendingIntent.FLAG_UPDATE_CURRENT
        );
mBuilder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
// mId allows you to update the notification later on.
mNotificationManager.notify(mId, mBuilder.build()); 
```

[您可以在Google 的开发者文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)中阅读有关创建和显示通知的更多信息。

# java - getWidth() 为面板返回 0

> ID：14992227
> 
> 赞同：1
> 
> 时间：2013-02-20T23:58:16.413
> 
> 标签：java, swing, jframe, jpanel

我希望使用 gamePanel 的 getWidth 方法来定位球拍，但它返回 0。它适用于框架，也适用于面板，但我决定重写很多代码，现在我不能让它工作。帮助表示赞赏:)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Oppgave1 extends JFrame {

    public static void main(String[] args) {
        JFrame frame = new Oppgave1();
        frame.setTitle("Oppgave 1");
        frame.setSize(600, 400);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    private JLabel jlbBallCount = new JLabel("Ballcount");
    private JLabel jlbTimer = new JLabel("Timer");
    private JButton jbtNewBall = new JButton("New Ball");

    private Racket racket;
    private Ball ball;

    public Oppgave1() {

        JPanel buttonPanel = new JPanel();
        buttonPanel.add(jlbBallCount);
        buttonPanel.add(jlbTimer);
        buttonPanel.add(jbtNewBall);

        JPanel gamePanel = new JPanel();    
        gamePanel.add(racket = new Racket (100, 60));
        gamePanel.add(ball = new Ball(10, 3, racket));

        this.add(gamePanel, BorderLayout.CENTER);
        this.add(buttonPanel, BorderLayout.SOUTH);
    }

    public void paint(Graphics g){
        racket.draw(g);
        ball.draw(g);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:34:29.150

1.  不要覆盖 JFrame 的 paint() 方法。

2.  您将球拍和球添加到游戏面板。游戏面板现在将自动绘制这些组件。

3.  如果您希望能够移动这些组件，则必须将布局设置为 null 并最初设置组件的边界。然后，当您想要移动组件时，您只需调用 setLocation() 方法，Swing 就会在其新位置绘制组件。

# java - Dart 游戏 Android 应用程序和 Java 服务器保持疼痛

> ID：14992228
> 
> 赞同：-1
> 
> 时间：2013-02-20T23:58:18.557
> 
> 标签：java, android, java-server

我的问题不一定是关于如何做到这一点 - 我真的很想知道从哪里开始。我用 Java 编写了一个跟踪飞镖游戏的程序。我有一个核心`DartGame`类和继承它的不同游戏的类。从那里它可以跟踪玩家，轮到谁，当前得分等。现在它工作得很好，我想做的是把它变成一个 Android 应用程序。我的计算机上有一个服务器程序，可以链接正在运行的应用程序。我不想要一个可以在任何地方访问的全局服务器，因为我不想把钱花在 VPN 服务器上，所以服务器程序只能在我的 PC 上运行。类似类型的服务器的一个示例就像用于 AndroMouse 的服务器，它允许您使用 Android 设备控制 PC 上的光标。

从设备连接到 PC 的最佳方式是什么？我不确定它是使用 MAC 地址还是路由器上的 WIFI，甚至蓝牙是一个选项。我对 Android 不是很熟悉，但我认为会有某种 Server/ServerSocket 连接，但这需要一个 IP 地址，我不确定要使用哪一个。是否像使用路由器的本地 IP 一样简单？就像我说的我会自己学习如何做，我只想知道在我花一大笔钱买 Android 书籍之前我需要学习什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:55:43.583

如果您的电脑和您的设备在同一个局域网中，只需创建套接字以通过 wifi 连接进行通信。否则，我认为您应该选择蓝牙。我觉得

如果他们不在同一个局域网中，那就有点困难了。MAC地址是没有意义的，除非在局域网中。

[AndroMouse](https://play.google.com/store/apps/details?id=com.iandrobot.andromouse.lite)也使用蓝牙连接。

# intellisense - 如果我以不同的方式定义对象，TypeScript Intellisense 的工作方式会有所不同

> ID：14992232
> 
> 赞同：1
> 
> 时间：2013-02-20T23:58:30.740
> 
> 标签：intellisense, typescript

我正在尝试使用 TypeScript 转换一些现有的 JavaScript 代码，我使用的一个示例是创建 Highcharts 类，Highcharts 定义来自[https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d .ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d.ts)

我们都知道 HighchartsOptions 有一个属性`title`。

如果我以这种方式定义对象，我就有智能感知

![在此处输入图像描述](../Images/79cf0e8462f825fcc3adc57dbee98917.png)

但是如果我这样定义对象

![在此处输入图像描述](../Images/29cbacc2d3f411ccd687acc12fac37a4.png) 我没有智能。

Visual Studio 行为不同的任何具体原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:33:10.987

这只是一个错误。在 CodePlex 上查看[此问题](http://typescript.codeplex.com/workitem/440)以跟踪它何时得到修复。

# css - 站点 CSS 文件应该有多大？

> ID：14992235
> 
> 赞同：0
> 
> 时间：2013-02-20T23:58:38.973
> 
> 标签：css, html, sass, compass-sass, codekit

我知道 CSS 和 HTML5 以及一点点 jQuery。

我正在使用 SASS 和 Compass 进行测试。除了 Sublime Text 2 和 Codekit 等工具。

但是，我的 CSS 文件（已缩小）总计 106KB。我已经包含了 Foundation 3 框架和我自己的 Typekit 字体。预编译的大小约为 35kb ..

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:01:15.593

您的 CSS 取决于您的站点要求。只要你做的事情是精简和高效的，就不可能有 CSS/HTML 或 JS 文件的固定大小！

谷歌有[一个很好的网站速度工具，](https://developers.google.com/speed/pagespeed/insights)它可以帮助你提高速度，因为我猜这就是目标？

# android - 如何更改选项菜单的文本颜色和 Theme.Sherlock.Light.DarkActionBar 的下拉导航？

> ID：14992240
> 
> 赞同：1
> 
> 时间：2013-02-20T23:59:05.650
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用带有父主题的 ActionBarSherlock 主题是 Theme.Sherlock.Light.DarkActionBar （使用[http://jgilfelt.github.com/android-actionbarstylegenerator](http://jgilfelt.github.com/android-actionbarstylegenerator)生成）。

问题是下拉导航列表项、操作栏中的下拉导航标题和选项菜单列表项（在具有菜单键的设备上）的文本是深色而不是白色。我在 4.2 设备和 2.3 模拟器上检查了它。

奇怪的是，在横向模式下自动更改为下拉菜单的选项卡导航在标题和列表项中都具有正确的文本颜色，但简单的下拉导航却没有..

我尝试覆盖操作栏样式中的一些颜色，但它没有改变任何东西。

我该如何解决 ？

顺便说一句 - 如果我将主题的父级更改为 Theme.Sherlock，这些颜色是正确的，但是活动背景是暗的..

# python - 具有大结构元素的图像特征检测

> ID：14992244
> 
> 赞同：2
> 
> 时间：2013-02-20T23:59:12.567
> 
> 标签：python, image-processing, numpy, python-3.x, scipy

我正在尝试从图像中提取一些特征，但每个提取的特征都非常小。提取更大特征的最简单方法似乎是使用更大的结构元素，但以下代码在`ITER > 1`.

```
from scipy import ndimage,misc
lena=misc.lena().astype(float64)
lena/=ndimage.maximum(lena)
lena=lena>0.54# convert to binary image
       #   =====================  
ITER=1 # || FAILS WHEN ITER > 1 ||
       #   =====================
struct=ndimage.generate_binary_structure(2,1)
struct=ndimage.iterate_structure(struct,ITER)
lena_label,n =ndimage.label(lena,struct)
slices=ndimage.find_objects(lena_label)
images=[lena[sl] for sl in slices]
imshow(images[0]) 
```

.

```
RuntimeError: structure dimensions must be equal to 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:45:04.730

该函数的参数`structure`用于`ndimage.label`确定输入的连通性。当您将输入表示为矩形矩阵时，这种连通性通常涉及一个点周围的 4 个或 8 个邻居`p`。Scipy 遵循此约定并将可接受的结构限制在这种情况下，因此当任何大于`3x3`的内容传递给函数时，它会引发错误。

如果你真的想做这样的事情，首先你需要非常清楚地定义你试图描述的连接性。然后你需要实现它。一种更简单的方法是首先扩大输入，然后对其进行标记。这将有效地给出将用更大`structure`参数标记的更大特征。

# sublimetext2 - Sublime text 2 复古模式禁用 ctrl+[

> ID：14992246
> 
> 赞同：0
> 
> 时间：2013-02-20T23:59:37.270
> 
> 标签：sublimetext2

我最近开始在 Sublime Text 2 中使用 Vintage 模式。我还通过在我的配置文件中添加 "vintage_ctrl_keys": true 来启用 Ctrl 键支持。

但是，这会影响我的工作流程，因为我使用`ctrl`+`[`和`ctrl`+`]`进行缩进。复古模式基本上将`ctrl`+重新映射`[`为转义。

有没有一种简单的方法可以在复古模式下禁用`ctrl`+`[`映射？我仍在使用`ctrl`+`f`和`ctrl`+`b`进行滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:26:42.990

您可以为页面滚动禁用`vintage_ctrl_keys`和设置`Ctrl`+`F`和`Ctrl`+的键绑定：`B`

```
{ "keys": ["ctrl+b"], "command": "move", "args": {"by": "pages", "forward": false} },
{ "keys": ["ctrl+f"], "command": "move", "args": {"by": "pages", "forward": true} } 
```

# python - 在python中读入一个大数据

> ID：14992248
> 
> 赞同：1
> 
> 时间：2013-02-20T23:59:41.837
> 
> 标签：python, input, bigdata

所以我试图在python中读取一个大数据文件。如果数据有一列和一百万行，我会这样做：

```
fp = open(ifile,'r');

for row in fp:  
    process row 
```

当我正在读取的数据有 100 万列而只有 1 行时，我的问题就出现了。我想要的是与`fscanf()`C 中的函数类似的功能。

即，

```
while not EOF:  
    part_row = read_next(%lf)  
    work on part_row 
```

`fp.read(%lf)`如果我知道格式是`long float`什么，我可以使用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:06:21.023

一百万个文本格式的浮点数真的不是那么大......所以除非它证明了某种瓶颈，否则我不会担心它，只是这样做：

```
with open('file') as fin:
    my_data = [process_line(word) for word in fin.read().split()] 
```

一个可能的替代方案（假设空格分隔的“单词”）是这样的：

```
import mmap, re

with open('whatever.txt') as fin:
    mf = mmap.mmap(fin.fileno(), 0, access=mmap.ACCESS_READ)
    for word in re.finditer(r'(.*?)\s', mf):
        print word.group(1) 
```

这将扫描整个文件并有效地提供大量的字流，无论行/列如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:14:23.210

有两种基本方法可以解决这个问题：

首先，您可以编写一个`read_column`带有自己显式缓冲区的函数，或者作为生成器函数：

```
def column_reader(fp):
    buf = ''
    while True:
        col_and_buf = self.buf.split(',', 1)
        while len(col_and_buf) == 1:
            buf += fp.read(4096)
            col_and_buf = buf.split(',', 1)
        col, buf = col_and_buf
        yield col 
```

……或作为一个班级：

```
class ColumnReader(object):
    def __init__(self, fp):
        self.fp, self.buf = fp, ''
    def next(self):
        col_and_buf = self.buf.split(',', 1)
        while len(col_and_buf) == 1:
            self.buf += self.fp.read(4096)
            col_and_buf = self.buf.split(',', 1)
        self.buf = buf
        return col 
```

* * *

但是，如果您编写一个`read_until`在内部处理缓冲的函数，那么您可以这样做：

```
next_col = read_until(fp, ',')[:-1] 
```

ActiveState 上有多个`read_until`配方。

或者，如果你`mmap`是文件，你实际上是免费获得的。您可以将文件视为一个巨大的字符串并在其上使用`find`（或正则表达式）。（这假设整个文件都适合您的虚拟地址空间——在 64 位 Python 构建中可能不是问题，但在 32 位构建中可能是。）

* * *

显然这些都是不完整的。他们不处理 EOF 或换行符（在现实生活中，您可能有*六*行一百万列，而不是一列，对吧？）等。但这应该足以说明这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:08:16.243

您可以使用`yield`.

```
def read_in_chunks(file_object, chunk_size=1024):
    while True:
        data = file_object.read(chunk_size)
        if not data:
            break
        yield data

f = open('your_file.txt')
for piece in read_in_chunks(f):
    process_data(piece) 
```

查看[这个问题](https://stackoverflow.com/questions/519633/lazy-method-for-reading-big-file-in-python)以获取更多示例。

# c - 选择排序在排序后将指针保持在正确位置的问题

> ID：14992252
> 
> 赞同：0
> 
> 时间：2013-02-20T23:59:54.417
> 
> 标签：c, string, sorting, pointers, selection

我正在尝试执行选择排序，我按得分最多的目标排序。我有3个类别；目标，助攻，名字。我可以按目标正确排序，并在排序后将球员的目标和助攻保持在正确的位置，但是当我尝试在排序后将名称移动到正确的位置时，它只会移动名称的第一个字母。这是我的代码。谢谢您的帮助！

```
void sortPlayersByGoals(int* goals, int* assists, char** names, int size)
{
    int lh, rh, i, tempG, tempA, tempN;
    for(lh = 0; lh < size; lh++)
    {
            rh = lh;
            for(i = lh; i < size; i++)
            {
                    if(goals[i] > goals[rh])
                    {
                            rh = i;
                    }
            tempG = goals[lh];
            tempA = assists[lh];
            tempN = *names[lh];
            goals[lh] = goals[rh];
            *names[lh] = *names[rh];
            assists[lh] = assists[rh];
            goals[rh] = tempG;
            *names[rh] = tempN;
            assists[rh] = tempA;
            }
    }

} 
```

如果这有助于显示我的问题，这是我的输出。

```
Pre-Sort
Name                       Goals                   Assists
Redden                         2                         0
Berglund                       5                         2
Jackman                        2                         0
Stewart                        4                         0
Oshie                          3                         5
McDonald                       2                         4
Pietrangelo                    2                         7
Perron                         2                         6
Tarasenko                      5                         5
Post-Sort
Name                       Goals                   Assists
Tedden                         5                         5
Berglund                       5                         2
Sackman                        4                         0
Otewart                        3                         5
Rshie                          2                         0
McDonald                       2                         4
Pietrangelo                    2                         7
Perron                         2                         6
Jarasenko                      2                         0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:49:08.443

查看您拥有的相关字符复制代码：

```
int tempN;
...
tempN = *names[lh];
*names[lh] = *names[rh];
*names[rh] = tempN; 
```

您的“名称”变量是一个`char**`（我假设它被实例化为一个数组，`char*`然后您将其作为指针传递），因此当您执行时`*names[lh]`，您首先索引到您`char**`以获取`char*`at index `lh`，然后取消引用它。这与索引到`char*`索引 lh 的第 0 个元素相同，它为您提供了第一个字符。由于您对所有与名称相关的操作都执行此操作，因此您只会在名称的第一个字符周围移动。此外，您的`tempN`变量被声明为 int，这可能不是您想要的。

您可以通过遍历要复制的名称的长度并逐个字符地分配它（而不是像现在这样只使用第一个字符）来修复它（对您的代码进行最小的修改）。或者您可以使用 strcpy （或其变体之一，请参阅[http://msdn.microsoft.com/en-us/library/kk6xf663%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/kk6xf663%28v=vs.110%29.aspx)以供参考）

附带说明一下，如果可能的话，我会提倡您只使用字符串。此外，您可能想要考虑让您的数据更紧密地耦合，即拥有一个包含玩家{名称、目标和助攻}的玩家结构列表，然后重新排列您的列表，但我想这是一个设计决策由你决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:54:01.740

```
void sortPlayersByGoals(int* goals, int* assists, char** names, int size)
{               /*  names is an array of pointers to char   */
    int lh, rh, i, tempG, tempA;
    char *tempN;     /* a pointer to one name */
    for(lh = 0; lh < size; lh++)
    {
            rh = lh;
            for(i = lh; i < size; i++)
            {
                    if(goals[i] > goals[rh])
                    {
                            rh = i;
                    }
            tempG = goals[lh];
            tempA = assists[lh];
            tempN = names[lh]; /* names[lh] is a pointer to the name in pos lh */
            goals[lh] = goals[rh];
            names[lh] = names[rh]; /* swap the pointers */
            assists[lh] = assists[rh];
            goals[rh] = tempG;
            names[rh] = tempN;  /* and not just the first letter */
            assists[rh] = tempA;
            }
    }

} 
```

# c#-4.0 - 是否有 Redis-rdb-tools 的 C# 实现？

> ID：14992253
> 
> 赞同：2
> 
> 时间：2013-02-20T23:59:55.043
> 
> 标签：c#-4.0, redis, servicestack, booksleeve

看看[Redis-RDB-Tools](https://github.com/sripathikrishnan/redis-rdb-tools)，看起来有一些有用的功能可以监控你的 Redis 服务器的健康状况。

[ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis/#new-iredisclient-lua-apis)似乎有一组很好的客户端功能（但我使用的是[BookSleeve](http://code.google.com/p/booksleeve/)）。

是否有任何 C# 实现可以为我提供一些基本的健康检查 - 消耗的内存、磁盘使用情况等？

**- 更新 -**

感谢 BookSleeve 的 GetInfo() 命令，返回以下内容......但是我应该更具体：有没有办法将服务器信息作为参数/对象属性或解析输出值的预打包方式取回？

下面是 GetInfo() 的输出：

```
"# Server\r\nredis_version:2.6.10\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_mode:standalone\r\nos:Linux 2.6.32-279.19.1.el6.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\ngcc_version:4.4.6\r\nprocess_id:2492\r\nrun_id:62402d583871f4b83f469917966aed8d163d02f3\r\ntcp_port:6379\r\nuptime_in_seconds:502354\r\nuptime_in_days:5\r\nlru_clock:1928056\r\n\r\n# Clients\r\nconnected_clients:7\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:175\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:1402576\r\nused_memory_human:1.34M\r\nused_memory_rss:9719808\r\nused_memory_peak:1675192\r\nused_memory_peak_human:1.60M\r\nused_memory_lua:31744\r\nmem_fragmentation_ratio:6.93\r\nmem_allocator:jemalloc-3.2.0\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:3035\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1360955487\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\n\r\n# Stats\r\ntotal_connections_received:18822\r\ntotal_commands_processed:12547\r\ninstantaneous_ops_per_sec:3\r\nrejected_connections:0\r\nexpired_keys:0\r\nevicted_keys:0\r\nkeyspace_hits:374\r\nkeyspace_misses:39\r\npubsub_channels:1\r\npubsub_patterns:0\r\nlatest_fork_usec:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\n\r\n# CPU\r\nused_cpu_sys:57.82\r\nused_cpu_user:208.63\r\nused_cpu_sys_children:0.00\r\nused_cpu_user_children:0.00\r\n\r\n# Keyspace\r\ndb0:keys=6,expires=0\r\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:11:59.640

调用[Redis 的 INFO 命令](http://redis.io/commands/info)，它会在 redis-server 中提供所有不同的服务器信息统计信息。

这是 2.5.12 版本的 redis-server 上[所有可用统计信息的页面转储。](http://www.servicestack.net/RedisAdminUI/AjaxClient/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:52:15.527

关于更新后的问题：那里的信息目前没有公开为“已解析”，但这听起来像是一个合理的补充；我怀疑我会隐藏该`GetInfo()`方法，将其移至`.Server.GetInfo()`，并以解析的形式公开它。但是，拆分它的代码已经存在-但作为私有方法`RedisConnectionBase.ParseInfo`：：

```
static Dictionary<string, string> ParseInfo(string result)
{
    string[] lines = result.Split(new[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
    var data = new Dictionary<string, string>();
    for (int i = 0; i < lines.Length; i++)
    {
        string line = lines[i];
        if (string.IsNullOrEmpty(line) || line[0] == '#') continue; // 2.6+ can have empty lines, and comment lines
        int idx = line.IndexOf(':');
        if (idx > 0) // double check this line looks about right
        {
            data.Add(line.Substring(0, idx), line.Substring(idx + 1));
        }
    }
    return data;
} 
```

# ant - 你能在 Apache Ivy 中指定依赖校验和吗？

> ID：14992254
> 
> 赞同：1
> 
> 时间：2013-02-20T23:59:55.477
> 
> 标签：ant, ivy, checksum

我很好奇是否有办法在 ivy.xml 文件中为依赖项指定校验和值。

例如，我有以下依赖项：

```
<dependency org="org.hibernate" name="hibernate-core" rev="3.5.6-Final"
    force="true"/> 
```

我有可能做这样的事情吗？

```
<dependency org="org.hibernate" name="hibernate-core" rev="3.5.6-Final"
    checksum="10249177261810a3ba8f3b9a468d06e0" force="true"/> 
```

我想这样做的主要原因是为了安全，以确保在我将来拉下远程存储库时不会更改对远程存储库的依赖。我想根据我自己的 ivy.xml 文件而不是远程主机上的校验和值来检查它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T04:31:05.407

看看[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Nexus](http://www.sonatype.org/nexus/)。这些是本地 Maven 存储库，可以从各种第三方存储库下载 jar。

两者都可以设置为在本地缓存远程工件，而不是在下载后重新下载它们。这将解决您更改远程存储库中的 jar 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:31:51.727

ivy（以及 Maven）中校验和的主要目的是确保下载正常工作并且文件在传输或存储过程中没有损坏。

*   [解析器上的“校验和”属性](http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)
*   [ivy 中校验和的描述](http://ant.apache.org/ivy/history/latest-milestone/concept.html#checksum)

使用校验和进行安全检查的唯一 ivy 功能​​是[packager resolver](http://ant.apache.org/ivy/history/latest-milestone/resolver/packager.html)。这是有道理的，因为打包程序存储库文件被设计为与源文件分开托管。

所以总而言之，最好的解决方案是听从 David 的建议并在您的网络中部署一个 Maven 存储库管理器。[Sonatype 最近提供了](http://www.sonatype.com/people/2013/01/secure-central-connectivity-artifactory-archiva-now-supported/)与 Maven Central 的 SSL 连接，这还可以保护您免受远程存储库欺骗。

# testing - 我应该如何在 mocha 中测试客户端/服务器 socket.io？

> ID：14992257
> 
> 赞同：2
> 
> 时间：2013-02-21T00:00:14.657
> 
> 标签：testing, coffeescript, socket.io, mocha.js

[如何正确关闭 socket.io / websocket-client？](https://stackoverflow.com/questions/5965733/how-does-one-properly-shutdown-socket-io-websocket-client)-- 相关，但已过时/不起作用

我正在编写一组测试来测试服务器端套接字。[从github 上](https://github.com/jamescarr/socket.io-test)的 jamescarr获得代码。Carr 的代码基于 Liam Kaufman 的[此处](http://liamkaufman.com/blog/2012/01/28/testing-socketio-with-mocha-should-and-socketio-client/)。 **文字墙传入**。

这是测试的一面。

```
ioServer = require("socket.io")
ioClient = require("socket.io-client")

chai.should()
chai.use(sinonChai)
expect = chai.expect

server = require('./testUtils/chat-server.coffee')

socketURL = 'http://localhost:5000'

options =
  transports: ['websockets']
  'force new connection':true

chatUser1 = name:'Tom'
chatUser2 = name:'Sally'
chatUser3 = name:'Dana'

describe "Chat Server", ->
  before (done) ->
    server.start 5000, done
  after (done) ->
    server.stop done

  it "Should broadcast new user to all users", (done) ->
    console.log "new user to all users"
    client1 = ioClient.connect(socketURL)
    client1.on "connect", (data) ->
      client1.emit "connection name", chatUser1
      client2 = ioClient.connect(socketURL, options)
      client2.on "connect", (data) ->
        client2.emit "connection name", chatUser2

      client2.on "new user", (usersName) ->
        usersName.should.equal chatUser2.name + " has joined."
        client2.disconnect()

    numUsers = 0
    client1.on "new user", (usersName) ->
      numUsers += 1
      if numUsers is 2
        usersName.should.equal chatUser2.name + " has joined."
        client1.disconnect()
        done() 
```

这是服务器端。

```
io = null
clients = {}

module.exports = 
  start: (port, cb) ->
    io = require("socket.io").listen port, cb
    io.sockets.on "connection", (socket) ->
      console.log "server on connection"
      userName = ''
      socket.on "connection name", (user) ->
        console.log "server on connection name"
        clients[user.name] = socket
        userName = user.name
        io.sockets.emit "new user", user.name + " has joined."

      socket.on 'message', (msg) ->
        console.log "server on message"
        io.sockets.emit 'message', msg

      socket.on 'private message', (msg) ->
        console.log "server on private message"
        fromMsg =
          from: userName
          txt: msg.txt
        clients[msg.to].emit 'private message', fromMsg
  stop: (cb) ->
    io.server.close()
    cb() 
```

出于某种原因，无论我做什么，我都会在连接上超时：

```
......   info  - socket.io started                                                                                           
new user to all users                                                                                                        
.15:55:06                                                                                                                    
.......................                                                                                                      

  × 1 of 45 tests failed:                                                                                                    

  1) Chat Server Should broadcast new user to all users:                                                                     
     Error: timeout of 2000ms exceeded                                                                                       
      at Object.<anonymous> (c:\Users\jcollum\AppData\Roaming\npm\node_modules\mocha\lib\runnable.js:167:14)                 
      at Timer.list.ontimeout (timers.js:101:19)                                                                             

  - watching   debug - emitting heartbeat for client 9VqXYQIv39VLoLVZB-Gw                                                    
   debug - websocket writing 2::                                                                                             
   debug - set heartbeat timeout for client 9VqXYQIv39VLoLVZB-Gw                                                             
  \ watching 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:02:45.557

五天，没有答案，所以：

这是我学到的。

1.  签名中带有 a 的任何测试`(done)`都必须调用`done`，否则它将失败（duh）。
2.  设置你的回调，把`done`调用放到最后一个。
3.  如果有两个连接并且它们交互，则将第二个连接的行为放在第一个的连接回调中。
4.  最后，在测试结束时启动“种子”连接。

# dll - 游戏引擎作为 EXE 和游戏作为 DLL？

> ID：14992258
> 
> 赞同：2
> 
> 时间：2013-02-21T00:00:29.663
> 
> 标签：dll, exe, game-engine

大家好，我开始设计一个新的小游戏引擎，我假设游戏引擎是一个 DLL，然后为游戏构建一个项目，该项目将使用这个 DLL 并输出一个 EXE 文件。

但后来我读到了最新的 ID Tech Game Engines 以及他们是如何反其道而行之的。( [http://fabiensanglard.net/doom3/index.php](http://fabiensanglard.net/doom3/index.php) )

但并没有真正解释为什么。我觉得它与修改有关，因为只有游戏（在这种情况下为 DLL）在相当长一段时间内向公众开放，而引擎 (EXE) 是封闭源代码。

但我想知道是否还有其他原因。

据我所知，DLL 项目应该包含所有可重用的代码。正常项目应该是引用可重用 DLL 的应用程序。通过这种方式，您可以在 DLL 项目中构建一个可用于任何其他未来项目的框架。

我能想到的另一个唯一原因是 AFAIK 仅将 DLL 的名称记录在程序文件中，没有文本或数据，因此如果游戏可能比引擎大，它可能会使可执行文件的大小更小。

[编辑]

我想到了另一个原因：引擎是一个 EXE，所以它可以在没有游戏 DLL 的情况下使用？喜欢 CAD 或脚本等工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:42:53.017

如果您在应用程序（例如游戏）中使用库，那么您的应用程序的 EXE 具有零个或多个自己的 DLL，消耗具有一个或多个 DLL 的库。

如果您有一个通用环境加载自定义其行为的元素，从而使其成为一个特定的游戏，那么您就有一个带有 EXE 和零个或多个 DLL 的环境，它使用配置来加载各种 DLL 和配置文件以确定其行为。

要么很简单，你的应用程序中可能应该有两个以上的程序集。

例如，一个（EXE）用于加载主配置和模块并将它们全部连接起来，一个用于主 UI，一个用于图形，一个用于物理，一个用于 AI 等等。

# mysql - mysql N行的移动平均值

> ID：14992259
> 
> 赞同：4
> 
> 时间：2013-02-21T00:00:35.250
> 
> 标签：mysql, select, moving-average

我有一个简单的 MySQL 表，如下所示，用于计算汽车的 MPG。

```
+-------------+-------+---------+
| DATE        | MILES | GALLONS |
+-------------+-------+---------+
| JAN 25 1993 |  20.0 |    3.00 |
| FEB 07 1993 |  55.2 |    7.22 |
| MAR 11 1993 |  44.1 |    6.28 |
+-------------+-------+---------+ 
```

我可以使用 select 语句轻松计算汽车的每加仑英里数 (MPG)，但由于 MPG 因加油而异（即您每次加油量不完全相同），我想计算“移动平均线”。因此，对于任何行，MPG 是该行的 MILES/GALLON，而 MOVINGMPG 是最后 N 行的 SUM(MILES)/SUM(GALLONS)。如果到该点存在少于 N 行，则仅 SUM(MILES)/SUM(GALLONS) 到该点。

是否有一个 SELECT 语句可以通过将 N 代入到 select 语句中来获取带有 MPG 和 MOVINGMPG 的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:24:49.897

是的，可以使用单个 SQL 语句返回指定的结果集。

不幸的是，MySQL 不支持分析函数，这将是一个相当简单的语句。即使 MySQL 没有支持它们的语法，也可以使用 MySQL 用户变量来模拟一些分析函数。

实现指定结果集（使用单个 SQL 语句）的方法之一是使用 JOIN 操作，对每一行使用唯一的升序整数值（rownum，由查询派生并在查询中分配）。

例如：

```
SELECT q.rownum          AS rownum
     , q.date            AS latest_date
     , q.miles/q.gallons AS latest_mpg
     , COUNT(1)               AS cnt_rows
     , MIN(r.date)            AS earliest_date
     , SUM(r.miles)                AS rtot_miles
     , SUM(r.gallons)              AS rtot_gallons
     , SUM(r.miles)/SUM(r.gallons) AS rtot_mpg
  FROM ( SELECT @s_rownum := @s_rownum + 1 AS rownum
              , s.date
              , s.miles
              , s.gallons
           FROM mytable s
           JOIN (SELECT @s_rownum := 0) c
          ORDER BY s.date
       ) q
  JOIN ( SELECT @t_rownum := @t_rownum + 1 AS rownum
              , t.date                  
              , t.miles
              , t.gallons
           FROM mytable t
           JOIN (SELECT @t_rownum := 0) d
          ORDER BY t.date
       ) r
    ON r.rownum <= q.rownum
   AND r.rownum > q.rownum - 2
 GROUP BY q.rownum 
```

`GROUP BY`在子句之前的谓词中指定了用于指定每个汇总行中包含多少行的所需“n”值。在此示例中，每个运行总计行中最多“2”行。

如果您指定值 1，您将（基本上）获得返回的原始表。

为了消除任何“不完整”的运行总行数（由少于“n”行组成），需要再次指定“n”的值，并添加：

```
HAVING COUNT(1) >= 2 
```

sqlfiddle 演示：[http ://sqlfiddle.com/#!2/52420/2](http://sqlfiddle.com/#!2/52420/2)

## 跟进：

**问：**我试图理解您的 SQL 语句。您的解决方案是否为数据库中的每一行选择二十行？换句话说，如果我有 1000 行，您的语句会执行 20000 次选择吗？（我担心性能）...

**A：**你关心性能是对的。

要回答您的问题，不，这不会对 1,000 行执行 20,000 次选择。

性能损失来自两个（本质上相同的）内联视图（别名为`q`和`r`）。MySQL 对这些（基本上）所做的是创建临时 MyISAM 表（MySQL 称它们为“派生表”），它们基本上是 的副本`mytable`，带有一个额外的列，每行分配一个从 1 到行数的唯一整数值​​。

一旦创建并填充了两个“派生”表，MySQL 就会运行外部查询，使用这两个“派生”表作为行源。, 中的每一行都与 r`q`中的最多行匹配`n`，以计算“运行总”英里数和加仑数。

为了获得更好的性能，您可以使用表中已有的列，而不是让查询分配唯一的整数值。例如，如果该`date`列是唯一的，那么您可以计算特定天数的“运行总计”。

```
SELECT q.date                      AS latest_date
     , SUM(q.miles)/SUM(q.gallons) AS latest_mpg
     , COUNT(1)                    AS cnt_rows
     , MIN(r.date)                 AS earliest_date
     , SUM(r.miles)                AS rtot_miles
     , SUM(r.gallons)              AS rtot_gallons
     , SUM(r.miles)/SUM(r.gallons) AS rtot_mpg
  FROM mytable q
  JOIN mytable r
    ON r.date <= q.date
   AND r.date > q.date + INTERVAL -30 DAY
 GROUP BY q.date 
```

（为了提高性能，您需要一个适当的索引定义`date`为索引中的前导列。）

* * *

对于第一个查询，包含的任何谓词（在内联视图定义查询中）以减少返回的行数（例如，仅返回过去一年的日期值）将减少要处理的行数，并且还可能提高性能。

* * *

同样，对于您关于为 1,000 行运行 20,000 次选择的问题......嵌套循环操作是获得相同结果集的另一种方法。对于大量行，这可能会表现出较慢的性能。（另一方面，当只返回几行时，这种方法可能相当有效：

```
SELECT q.date                 AS latest_date
     , q.miles/q.gallons      AS latest_mpg
     , ( SELECT SUM(r.miles)/SUM(r.gallons)
           FROM mytable r
          WHERE r.date <= q.date
            AND r.date >= q.date + INTERVAL -90 DAY
       ) AS rtot_mpg
  FROM mytable q
 ORDER BY q.date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:05:37.410

像这样的东西应该工作：

```
SELECT Date, Miles, Gallons, Miles/Gallons as MilesPerGallon,
  @Miles:=@Miles+Miles overallMiles,
  @Gallons:=@Gallons+Gallons overallGallons,
  @RunningTotal:=@Miles/@Gallons runningTotal
FROM YourTable
  JOIN (SELECT @Miles:= 0) t
  JOIN (SELECT @Gallons:= 0) s 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/0bc88/1)

产生以下内容：

```
DATE                MILES    GALLONS    MILESPERGALLON   RUNNINGTOTAL
January, 25 1993    20       3          6.666667         6.666666666667
February, 07 1993   55.2     7.22       7.645429         7.358121330724
March, 11 1993      44.1     6.28       7.022293         7.230303030303 
```

- 编辑 -

作为对评论的回应，您可以添加另一个行号以将结果限制为最后 N 行：

```
SELECT *
FROM (
  SELECT Date, Miles, Gallons, Miles/Gallons as MilesPerGallon,
    @Miles:=@Miles+Miles overallmiles,
    @Gallons:=@Gallons+Gallons overallGallons,
    @RunningTotal:=@Miles/@Gallons runningTotal,
    @RowNumber:=@RowNumber+1 rowNumber
  FROM (SELECT * FROM YourTable ORDER BY Date DESC) u
    JOIN (SELECT @Miles:= 0) t
    JOIN (SELECT @Gallons:= 0) s
    JOIN (SELECT @RowNumber:= 0) r
  ) t
WHERE rowNumber <= 3 
```

只需相应地更改您的 ORDER BY 子句。这是[更新的小提琴](http://sqlfiddle.com/#!2/0bc88/5)。

# ios - 完成编辑文本字段后如何关闭键盘

> ID：14992261
> 
> 赞同：0
> 
> 时间：2013-02-21T00:00:48.857
> 
> 标签：ios, objective-c

我有一个简单的程序，您可以在其中在文本字段中输入文本，点击确定按钮，标签会随着输入的文本更新。

当我按下 OK 按钮、按下覆盖整个视图的背景中的大按钮或按下键盘上的返回按钮时，我希望 iPhone 键盘消失。我一直在尝试使用

```
[textField resignFirstResponder] 
```

方法，但它不起作用。该程序编译得很好，但是当从这些事件中的任何一个调用此方法时，它就会停止，并且我收到一条消息：

> 线程 1：信号 SIGABRT"

我究竟做错了什么？

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    @synthesize txtName;
    @synthesize lblMessage;

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    - (IBAction)doSomething:(UIButton *)sender
    {
        [txtName resignFirstResponder];

        NSString *msg = [[NSString alloc] initWithFormat:@"Hello, %@", txtName.text];
        [lblMessage setText:msg];

        //[msg release];
    }

    - (IBAction)makeKeyboardGoAway:(UIButton *)sender
    {
        [txtName resignFirstResponder];
    }

    - (BOOL)textFieldShouldReturn:(UITextField *)textField
    {
        [textField resignFirstResponder];
        return YES;
    }

    @end 
```

这里也是头文件：

```
 #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController

    @property (weak, nonatomic) IBOutlet UITextField *txtName;
    @property (weak, nonatomic) IBOutlet UILabel *lblMessage;

    - (IBAction)doSomething:(UIButton *)sender;
    - (IBAction)makeKeyboardGoAway:(UIButton *)sender;
    @end 
```

好吧，我让它工作了，但我仍然不明白我收到的错误消息。这是对我有用的代码。

标题：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    IBOutlet UITextField *txtName;
    IBOutlet UILabel *lblMessage;
}
@property (nonatomic, retain) IBOutlet UITextField *txtName;
@property (nonatomic, retain) IBOutlet UILabel *lblMessage;

- (IBAction)doSomething;
- (IBAction)makeKeyboardGoAway;

@end 
```

执行：

```
#import "ViewController.h"

@implementation ViewController

@synthesize txtName;
@synthesize lblMessage;

- (IBAction)doSomething
{
    [txtName resignFirstResponder];

    NSString *msg = [[NSString alloc] initWithFormat:@"Hello, %@",
                     txtName.text];
    [lblMessage setText:msg];
    //[msg release];
}

- (IBAction) makeKeyboardGoAway
{
    [txtName resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:13:06.777

单击确定按钮时调用此方法。

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T00:24:23.563

这行得通....如果一切都与此一致，则可能是您的代码中的其他内容....

...还要确保正确链接所有对象（VC 到 TextField 和 Button....Button 回到 VC）...这也可能导致崩溃

。H

```
@interface ViewController : UIViewController {

   IBOutlet UIButton *button;
   IBOutlet UITextField *textfield;
   IBOutlet UILabel *label;
   NSString *string;
}

-(IBAction)dismiss:(id)sender;

@property (nonatomic, retain)UIButton *button;
@property (nonatomic, retain)UITextField *textfield;
@property (nonatomic, retain)UILabel *label; 
```

.m

```
@synthesize textfield, button, label;

-(IBAction)dismiss:(id)sender {
[textfield resignFirstResponder];
string = [NSString stringWithFormat:@"Hello %@", textfield.text];
[label setText:string];
} 
```

# php - DOMXPath->query(???) 搜索 HTML 文档中的每个节点以查找 JavaScript

> ID：14992269
> 
> 赞同：0
> 
> 时间：2013-02-21T00:01:31.427
> 
> 标签：php, javascript, html, xquery, domxpath

如何搜索 HTML 文档以找到其中的 JavaScript myfunc？也就是说，我想在可能包含以下节点的 HTML 大海捞针中找到上述针。

*   `<p onMouseOver="myfunc(a,b,c)">blah blah blah</p>`
*   `<a href="javascript:MyFunc(a, b, c)">blah blah blah</a>`
*   `<img onmouseover='myFunc(a,b, c )' src="someimage.gif">`

我目前使用的 PHP 代码是：

```
foreach($domxpath->query('[onmouseover^="myfunc"]') as $node) {
    $text = $node->nodeValue;
    echo "<br>text=".$text;  // just to see what i get
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:16:29.553

你想要一个像这样的模式`//*[contains(@onmouseover, 'myfunc')]`：

*   `//*`选择文档中的所有元素。
*   `[contains(@onmouseover, 'myfunc')]`然后选择 onmouseover 属性包含“myfunc”的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:23:38.773

您`onmouseover`似乎不只是在寻找它（查看`<a>`）。希望函数名是一致的，因为 PHP 只是 XPath 1.0

```
//*[@*[contains(.,"myfunc")]] 
```

这将选择具有包含“myfunc”（区分大小写）的任何属性的任何节点。

# oop - Matlab 2012a，静态方法调用，无法识别当前文件夹外的类

> ID：14992271
> 
> 赞同：2
> 
> 时间：2013-02-21T00:01:40.413
> 
> 标签：oop, matlab

我有一个类`Ellipse`（句柄，继承自其他类），它有一个名为`createFromGaussian`. 它位于我添加到 Matlab 路径的远程文件夹中。问题是，如果我尝试在创建任何 Ellipse 对象之前调用静态函数，它会失败：

```
>> Ellipse.createFromGaussian(arg1,arg2)
Undefined variable "Ellipse" or class "Ellipse.createFromGaussian". 
```

如果我尝试以下任何一种方法，它就会起作用：

*   我将当前目录更改为 Ellipse.m 文件所在的目录
*   从远程目录工作，我事先创建了一个 Ellipse 对象：

    ```
    >> Ellipse()
    [C=, axis=[0.0,0.0], angle=0.0]        
    >> Ellipse.createFromGaussian([],2) 
    ```

这应该是这样吗？错误消息对我来说听起来很奇怪：当然它找不到变量“Ellipse”或类“Ellipse.createFromGaussian”！它应该找到“椭圆”类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:21:34.437

那么 Ellipse classdef 文件和函数文件在同一个名为 的文件夹中`@Ellipse`，并且该文件夹的 PARENT`@Ellipse`在路径上？这就是 Matlab 系统工作所需要的。

来自[ML 帮助](http://www.mathworks.com/help/matlab/matlab_oop/organizing-classes-in-folders.html)：“如果要为类定义使用多个文件，则必须使用 @-folder。在单独文件中定义的方法将文件名与函数名匹配，并且必须在 classdef 文件中声明。 "

# angularjs - angularjs日期过滤器没有格式化我的json值

> ID：14992277
> 
> 赞同：8
> 
> 时间：2013-02-21T00:02:09.030
> 
> 标签：angularjs

我有一个返回 json 的服务，如下所示：

```
"Results":[{"Id":"1","SomeDate":"2/19/2013 10:34:04 PM"} 
```

当我尝试使用绑定进行格式化时，它不起作用 - 它只显示上面的字符串：

```
{{values.SomeDate| date:'mediumTime' }} 
```

但是，如果我只传递这种格式，它就可以工作：

```
{{ '1997-03-01T00:00:00+01:00' | date:'mediumTime'}} 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T01:00:34.420

正如 charlietfl 在评论中提到的，一个干净的选择是更新服务以返回已经与内置角度过滤器兼容的日期格式。

但是，如果这不可能，您可以设置一个自定义过滤器来解析您的日期。

我推荐的一个（非常小的）库是 Moment.js： [http ://momentjs.com/](http://momentjs.com/)

以下是关于如何将 Moment.js 包装在自定义角度过滤器中的示例博客文章： [http ://www.34m0.com/2012/07/angularjs-user-friendly-date-display.html](http://www.34m0.com/2012/07/angularjs-user-friendly-date-display.html)

```
angular.module('myModule').
    filter('fromNow', function() {
        return function(dateString) {
            return moment(new Date(dateString)).fromNow()
        };
    }); 
```

这将像这样使用：

```
{{ reply.createdDate | fromNow }} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-03T07:10:45.417

你可以把它放在你的控制器中：

```
 $scope.toJsDate = function(str){
    if(!str)return null;
    return new Date(str);
  } 
```

接着：

```
{{toJsDate(values.SomeDate)| date:'mediumTime' }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T11:52:39.547

我会支持@AlexOsborn 的建议，即使用[moment.js](http://momentjs.com/)创建自定义过滤器，因为 moment.js 可以解析包含日期的字符串。在我的过滤器实现中，我还将日期格式委托给了 moment.js，因为我觉得 moment.js 的日期格式功能比 angular.js[更全面：](http://momentjs.com/docs/#/displaying/format/)

```
angular
.module("YourModuleNameHere")
.filter("formatdate", [function () {
    var result = function (date, formatstring) {
        if(formatstring === null) {
            formatstring = "DD MMM YYYY";
        }
        return moment(date).format(formatstring);
    }
    return result;
}]); 
```

并且您使用它就像使用 angular.js 日期过滤器一样（但要格式化您将使用 moment.js 格式化代码的日期）：

```
<p>Today is {{moment() | formatdate}}</p>
<p>Another date: {{values.SomeDate | formatdate:"ddd D MMM YYYY"}}</p> 
```

# ipython-notebook - 禁止来自 ipython 笔记本引擎的消息

> ID：14992278
> 
> 赞同：0
> 
> 时间：2013-02-21T00:02:13.097
> 
> 标签：ipython-notebook

我通常启动 ipython notebook 引擎并将其放在后台。但是，每当用户打开/关闭笔记本或发生超时时，我都会看到后台从我启动它的终端上吐出消息——这有点烦人。

任何抑制这些并让引擎在后台静默的方法。我怀疑这可能是启动时的一个简单开关。我有点时间紧迫，所以没有通过 RTFM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:56:31.190

忘记了输出到 /dev/null 的简单管道，这可以解决问题：

```
 alias start_ipy='cd /path_notebook_folder; ipython notebook --profile=nbserver --no-browser --pylab inline --port=443 2>/dev/null >/dev/null &' 
```

# css - 创建css按钮的当前状态

> ID：14992284
> 
> 赞同：0
> 
> 时间：2013-02-21T00:02:28.323
> 
> 标签：css, button

伙计们，我正在尝试在我的 css 按钮上创建当前视图状态，但未能成功......精灵有两种状态，关闭和结束状态..我希望结束状态也成为页面上的当前状态正在查看....这里是按钮的 css 以及 html：

CSS：

```
.inbox {
    border: none;
    width: 88px;
    height: 26px;`enter code here`
    background: url(images/v2images/default_inbox_BTN.png) no-repeat top left;
    margin-left: 0px;
    margin-right: 20px;
    vertical-align: middle;
    cursor:pointer;
}

.inbox:hover {
        background-position: -88px 0;
} 
```

html:

```
<input type="submit" value="" class="inbox" /> 
```

我假设我将只创建一个当前状态（.inbox:current）并调整定位以匹配过度状态，这与悬停但没有负值不同，但它不起作用。

在此先感谢伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:05:38.913

你很近。你会有一堂课。 `:hover`是一个伪类。您不能真正“强制”悬停。但是，您可以做的是添加一个类，例如：

```
.inbox:hover
, .inbox.current
{
        background-position: -88px 0;
} 
```

和

```
<input type="submit" value="" class="inbox current"> 
```

所以现在你的 CSS*为类收件箱说，当悬停时，设置 bg 位置。但是，当类收件箱也在类当前的元素上找到时，应用相同的 bg 位置规则*

如果你想使用一个类，你可以做

```
<input type="submit" value="" class="inbox inbox-current"> 
```

然后你的CSS

```
.inbox:hover
, .inbox-current
{
        background-position: -88px 0;
} 
```

结果相同，但对旧浏览器的支持更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:06:24.160

CSS 中没有真正的当前状态，您必须使用 javascript (jquery) 手动设置它，或者在加载页面时设置它。IE。将类收件箱和当前类作为两个单独的类，并具有

```
.current { background-position: -88px 0 !important; } 
```

并检测点击收件箱，从所有其他按钮中删除当前，并将其添加到收件箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:05:29.630

我不确定你在问什么，但你总是可以扩展规则集：

```
.inbox:hover, .current {
    background-position: -88px 0;
} 
```

然后如果`.inbox`是被悬停*或*有`.current`类，它将出现在悬停状态。你也可以使用`:focus`和`:active`

# c++ - D3DXMatrixTransformation2D 行为怪异

> ID：14992285
> 
> 赞同：1
> 
> 时间：2013-02-21T00:02:29.970
> 
> 标签：c++, matrix, rotation, directx, sprite

我想在它们的位置而不是任何其他点旋转我的 2D 精灵，但我在使用该功能时遇到了问题。

我看到人们以这种方式使用 D3DXMatrixTransformation2D（不包括缩放）：

```
D3DXMATRIX mat;

D3DXVECTOR2 center(sprite.width / 2, sprite.height / 2);

D3DXVECTOR2 pos(sprite.x, sprite.y)

D3DXMatrixTransformation2D(
            &mat,
            NULL,
            NULL,
            NULL,
            &center,
            sprite.rotation,
            &pos); 
```

但是这样做我的精灵围绕一些奇怪的点旋转了一个laaaaarge圆圈。

我尝试并尝试了这个解决方案，但在我进一步操作实体坐标和其他东西时感觉它有一些副作用。

```
D3DXVECTOR2 pos(sprite.x + (sprite.width / 2), sprite.y + (sprite.height / 2))

D3DXMatrixTransformation2D(
            &mat,
            NULL,
            NULL,
            NULL,
            &pos,
            sprite.rotation,
            NULL); 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:56:51.260

如果您的图像文件的尺寸大于您尝试旋转的图像部分，则可能会让您摸不着头脑的一个小问题。我的意思是，如果你的图像文件是 512x512 之类的，并且左下角有一只小猫，它只有 64x64，其余部分为 0 alpha，它将占据图像文件的中心，不是猫。

如果这是发生在您身上的事情，您可以将猫或任何图像移动到图像文件的中心，或者在 DirectX 中进一步查看，您可以在其中定义一个矩形并将其用作剪切-out 从图像文件中绑定您的图像（猫）。

# javascript - 我可以制作一个 Javascript 按钮强制浏览器忽略缓存吗？

> ID：14992288
> 
> 赞同：0
> 
> 时间：2013-02-21T00:02:41.730
> 
> 标签：javascript, vb.net, caching, asp-classic

我知道这有很多，但我找不到适合我情况的解决方案。我正在关注别人的 asp.net 代码。我们的网站生成了大量用户可以看到的 html 和 xml 文件。在一个地方，为加载其中一个页面而动态生成的链接实际上是一种微型形式，使浏览器认为正在提交数据并寻找“新的”内容。但另一个是带有链接的按钮，链接在 vb 代码后面使用 javascript 函数在新窗口中打开页面。我试过用“？submit=.....”来模拟表单提交，但它没有用。

tl; dr 什么 javascript 函数可以打开页面并告诉浏览器获取最新版本，而忽略缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:15:24.630

在 JavaScript 中，我认为防止缓存的唯一方法是修改 url。一个技巧是使用当前日期作为时间戳：

```
url = url + "?_ts="+new Date().getTime(); 
```

（当然，如果您的 url 已经包含查询字符串，则将 ? 替换为 &）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:16:02.633

没有 JavaScript 可以满足您的需求。如果您需要新版本，最简单的方法是在 URL 的查询字符串中添加时间戳。

```
<script type="text/javascript" src="/js/file?cacheBuster=<?= DateTime.Now ?>" > </script> 
```

为了更好地控制，您可以使用构建版本作为 cacheBuster 参数，这样您就不必每次都请求新文件。

# javascript - 如何用多行解析 json

> ID：14992290
> 
> 赞同：-8
> 
> 时间：2013-02-21T00:02:59.913
> 
> 标签：javascript, json

我有以下 JSON：

```
[{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557705","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557706","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557707","mobile":"400089151"}] 
```

我需要使用 js 函数提取所有“phoneNumber”。我正在使用 html 进行测试，但我的功能不太好：

```
function getNumbers(strJSON)
{   
            strJSON = "[{\"errorMessage\":\"success\",\"mobile\":\"400089151\",\"phoneNumber\":\"400557704\",\"returnCode\":\"0\"},{\"errorMessage\":\"success\",\"mobile\":\"400089151\",\"phoneNumber\":\"400557705\",\"returnCode\":\"0\"},{\"errorMessage\":\"success\",\"mobile\":\"400089151\",\"phoneNumber\":\"400557706\",\"returnCode\":\"0\"}]";

        var len = strJSON.length;

        var begin_index = strJSON.indexOf("returnCode") - 2;
        var last_index = len - 1;
        var string_toSplit = strJSON.substring(begin_index, last_index);
        var string_splitted = string_toSplit.split("{");
        var out="";

        alert(strJSON);
        alert("string_splitted");
        alert(string_splitted);
        for ( var i = 0; i < string_splitted.length; i++) 
        {
            if (string_splitted[i].charAt(string_splitted[i].length - 1) === ",") 
            {
                string_splitted[i] = string_splitted[i].slice(0, -1);
            }
            var json = "{" + string_splitted[i];
            var obj = JSON.parse(json);
            if (i == string_splitted.length) 
            {
                out = out + obj.phoneNumber;
            } 
            else
            {
                out = out + obj.phoneNumber + ",";
            }
        }
        return out;     

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:06:45.107

对于现代浏览器，您可以使用该[`.map()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
var j = [{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557705","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557706","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557707","mobile":"400089151"}];

var phones = j.map(function(item){return item.phoneNumber}); 
```

* * *

**更新**

看到你的代码后（*不要尝试手动拆分/解析json字符串..使用`JSON.parse`方法*）你应该使用

```
function getNumbers(strJSON)
{   
    var myJson = JSON.parse( strJSON );
    return myJson.map(function( item ){ return item.phoneNumber}).join(',');   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:08:06.857

更新：更好的方法：

```
function getNumbers(strJSON)
{
    var obj = JSON.parse(strJSON);   

    return obj.map(x => x.phoneNumber).join(", ")
} 
```

原帖：

一个直接的方法是迭代数组中的每个对象并单独取出值。

```
var info = [{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557705","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557706","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557707","mobile":"400089151"}];

var phoneNumbers = [];

for (var i = 0; i < info.length; i++)
{
    phoneNumbers.push(info[i].phoneNumber);
}

console.log(phoneNumbers); 
```

[http://jsfiddle.net/hX69r/](http://jsfiddle.net/hX69r/)

更新：

[http://jsfiddle.net/hX69r/1/](http://jsfiddle.net/hX69r/1/)

```
var info = [{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557705","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557706","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557707","mobile":"400089151"}];

var infoString = JSON.stringify(info); //this just turns the object array 'info' into a string

var numbers = getNumbers(infoString);
console.log(numbers);

function getNumbers(strJSON)
{
    var obj = JSON.parse(strJSON);

    var phoneNumbers = [];

    for (var i = 0; i < obj.length; i++)
    {
        phoneNumbers.push(obj[i].phoneNumber);
    }

    return phoneNumbers.join(", ");
} 
```

附加更新：

```
var info = [{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557705","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557706","mobile":"400089151"},
{"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557707","mobile":"400089151"}];

var infoSingle = {"returnCode":"0","errorMessage":"success","Code":{},"phoneNumber":"400557704","mobile":"400089151"};

console.log(info.length); // prints 4; so you know it has the []
console.log(infoSingle.length); // prints undefined; so you know it doesn't have [] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:14:50.813

不要试图重新发明轮子。

解析 JSON 的方法有很多：

*   **使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。**
*   **使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)**

# php - 本地主机、Microsoft SQL 和 php

> ID：14992291
> 
> 赞同：0
> 
> 时间：2013-02-21T00:03:04.157
> 
> 标签：php, sql-server-express

我刚开始学习 PHP 和 MySQL，在尝试从 PHP 块连接到我的数据库时遇到了困难。我已经在我的机器上安装了 XAMPP 和 SQL Server Express 2012。我的服务器名称是 RAFAL-MAC，我选择了“Windows 身份验证”。

我在一个名为 search.php 的文件中有一个带有 PHP 代码的简单 HTML 页面

PHP代码是

```
<?php
    $con = mysql_connect('RAFAL-MAC','RAFAL-MAC\Rafal','');
    if (!$con)
    {
        die( 'Could not connect: ' . mysql_error() ) ;
    }
    mysql_select_db("one", $con) or die(mysql_error());
?> 
```

当我转到 localhost:8080/search.php 时，我收到以下警告：

**警告：** mysql_connect(): Host 'xxx.xxx.xxx.xxx' is not allowed to connect to this MySQL server in C:\xampp\htdocs\search_submit.php on line 11 Could not connect: Host 'xxx.xxx.xxx .xxx' 不允许连接到这个 MySQL 服务器

我尝试在网上搜索类似的问题，但所有线程都是关于远程连接的。我只是想连接到我的本地 SQL 服务器。

有什么提示吗？对于任何缺失的信息，我深表歉意。谢谢！:)

编辑：我将服务器名称更改为“localhost”

现在我得到了这个：

*用户 ''@'localhost' 拒绝访问数据库 'one'*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:12:43.990

由于您想连接到**SQL Server Express 2012**，所有以 mysql* 开头的函数都将失败 - 因为这些函数与**MySQL 服务器通信**。

请安装[此处](http://www.microsoft.com/en-us/download/details.aspx?id=20098)找到的 Microsoft 的[MS SQL Server 驱动程序包](http://www.microsoft.com/en-us/download/details.aspx?id=20098)。从这个页面：

> 执行以下步骤以下载和安装 Microsoft **Drivers for PHP for SQL Server**：
> 
> 1.  将 SQLSRV30.EXE 下载到临时目录
> 2.  运行 SQLSRV30.EXE
> 3.  出现提示时，输入 PHP 扩展目录的路径
> 4.  解压文件后，阅读 SQLSRV30_Readme.htm 文件的安装部分以了解后续步骤

[微软的 PHP 驱动论坛的](http://social.technet.microsoft.com/Forums/en-US/sqldriverforphp/threads)人应该很容易回答你的问题，以防你在安装驱动后仍然有问题。

此外，如果连接到本地机器，请尝试使用这些地址：

*   本地主机
*   127.0.0.1

这两个地址总是**引用本地机器**。

# api - 提供复杂的过滤 REST API

> ID：14992293
> 
> 赞同：0
> 
> 时间：2013-02-21T00:03:30.927
> 
> 标签：api, rest

所以我正在使用 Laravel 4 PHP 框架构建一个 RESTful（尽可能 RESTful）API。现在我有几十个 API 调用在工作，我有一个过程来做限制、排序和做简单的过滤。以下是其中一个调用的示例：

```
/api/v1/users?limit=10&offset=10&firstName=John&order[]=createdTimestamp desc 
```

这将返回第 11 到第 20 个用户，其名字为 John，按 createdTimestamp 降序排列。这里的简单过滤只能进行完全匹配（=）。现在，我还希望能够通过 REST API 提供更复杂的过滤系统，该系统支持指定相等匹配类型的能力，他们可以执行 != 或 > 或 LIKE 等...问题是我不知道我是否能够通过普通查询字符串提供这种类型的过滤。

通过 REST API 提供这种复杂过滤的最佳方式是什么？即使它不是“真正的” RESTful，通过 POST 仍然被认为是最好的方式（即使这可以防止用户尝试运行超过某些浏览器具有的 URI 字符长度限制的长查询的问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:25:34.163

@ryanzec

> 现在，我还希望能够通过 REST API 提供更复杂的过滤系统，该系统支持指定相等匹配类型的能力，他们可以执行 != 或 > 或 LIKE 等...问题是我不知道我是否能够通过普通查询字符串提供这种类型的过滤。

简单的查询字符串是不可能的（好吧，也许有可能，但很难在查询字符串中正确编码这样的逻辑）。您需要定义自定义查询格式并使用 POST 提交此类查询。服务器可能会回复：

*   “201 Created”状态和“Location”标头字段指示查询资源（如果之前没有此类查询）；或者
*   “303 See Other”和“Location”标头字段指示已经存在的查询资源。

> 通过 POST 进行仍然被认为是最好的方式，即使它不是“真正的”RESTful

我不知道这是谁说的，但这是错误的。将 POST 用于此类目的并没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:44:55.447

在您的集合资源响应中使用表单来告诉客户如何搜索集合。有关示例，请参阅[我对 REST 和复杂搜索查询的回答。](https://stackoverflow.com/questions/13110147/rest-and-complex-search-queries/13120708#13120708)

# c++ - Boost Spirit 把整场比赛当成一串

> ID：14992295
> 
> 赞同：6
> 
> 时间：2013-02-21T00:03:51.107
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试使用 boost Spirit 框架定义自己的语法，并且正在定义这样的匹配规则：

```
value = (
        char_('"') >>
        (*qi::lexeme[
                char_('\\') >> char_('\\') |
                char_('\\') >> char_('"')  |
                graph - char_('"') |
                char_(' ')
        ])[some_func] >>
        char_('"')
); 
```

我想将一个动作 - some_func - 分配给它的一部分，并将整个匹配字符串作为参数传递。但不幸的是，我会得到类似的东西`vector<boost::variant<boost::fusion::vector2 ..a lot of stuff...)...>`。我能以某种方式将整个数据获取为 char*、std::string 甚至 void* 的大小吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T01:27:29.563

看看[qi::as_string](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/qi/reference/directive/as.html)：

演示程序的输出：

```
DEBUG: 'some\\"quoted\\"string.'
parse success 
```

> *老实说，您似乎真的在尝试用可能的转义字符解析“逐字”字符串。在这方面，使用`lexeme`似乎是错误的（空间被吃掉了）。如果您想查看转义字符串解析的示例，请参见例如*
> 
> *   [Boost Spirit 在服务器应用程序上实现小型单行 DSL](https://stackoverflow.com/questions/14548592/boost-spirit-implement-small-one-line-dsl-on-a-server-application/14554966#14554966)（针对这种风格）
> *   [使用 Boost.Spirit 编译一个简单的解析器](https://stackoverflow.com/questions/9404558/compiling-a-simple-parser-with-boost-spirit/9405546#9405546)（用于通过重复转义）
> *   [用增强精神解析转义的字符串](https://stackoverflow.com/questions/4028169/parsing-escaped-strings-with-boost-spirit/4029386#4029386)
> *   [使用 boost::spirit 解析引用的字符串](https://stackoverflow.com/questions/10289985/parse-quoted-strings-with-boostspirit/10294577#10294577)
> 
> [我认为可以进行一个简单的重新排列，至少可能看起来像：]
> 
> ```
>  value = qi::lexeme [ 
>           char_('"') >>
>           qi::as_string [
>            *(
>                  string("\\\\") 
>                | string("\\\"") 
>                | (graph | ' ') - '"'
>             )
>           ] [some_func(_1)] >>
>           char_('"')
>       ]; 
> ```
> 
> 但是请注意，您可以简单地声明没有船长的规则并将所有内容放在一起：http `lexeme`: **[//liveworkspace.org/code/1oEhei$0](http://liveworkspace.org/code/1oEhei$0)**

代码（住在[liveworkspace](http://liveworkspace.org/code/xqZyB$0)上）

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi    = boost::spirit::qi;
namespace phx   = boost::phoenix;

struct some_func_t 
{
    template <typename> struct result { typedef void type; };
    template <typename T> 
        void operator()(T const& s) const
        {
            std::cout << "DEBUG: '" << s << "'\n";
        }
};

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, Skipper>
{
    parser() : parser::base_type(value)
    {
        using namespace qi;
        // using phx::bind; using phx::ref; using phx::val;

        value = (
                 char_('"') >>
                     qi::as_string
                     [
                         (*qi::lexeme[
                          char_('\\') >> char_('\\') |
                          char_('\\') >> char_('"')  |
                          graph - char_('"') |
                          char_(' ')
                          ])
                     ] [some_func(_1)] >>
                 char_('"')
            );
        BOOST_SPIRIT_DEBUG_NODE(value);
    }

  private:
    qi::rule<It, Skipper> value;
    phx::function<some_func_t> some_func;
};

bool doParse(const std::string& input)
{
    typedef std::string::const_iterator It;
    auto f(begin(input)), l(end(input));

    parser<It, qi::space_type> p;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,qi::space);
        if (ok)   
        {
            std::cout << "parse success\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<It>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    bool ok = doParse("\"some \\\"quoted\\\" string.\"");
    return ok? 0 : 255;
} 
```

# svn - 是否应该为不进入下一个版本的功能创建一个新分支？

> ID：14992306
> 
> 赞同：1
> 
> 时间：2013-02-21T00:05:04.110
> 
> 标签：svn, development-environment, branching-and-merging

我正在寻找有关新功能开发过程的建议，该功能不会成为下一个版本的一部分。

我们在 5 月和 12 月发布。目前我们的团队正在开发一个不会在 5 月发布但会在 12 月发布的大型功能。我们即将开始研究它，我想知道在分支方面最好的方法是什么，以及我们是否应该在主干上开发此功能。

当然，如果它不是下一个版本的一部分，我们应该创建一个分支并在 5 月版本之后合并更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:56:18.330

是的，您应该并且必须在自己的分支中单独开发。只是不要忘记**定期将此分支与主干同步**以避免以后合并地狱（理想情况下或每天一次主干提交 - 频率通常取决于主干修订的强度，并且可能因地而异）。

“功能切换”在 SCM 之前的时代就像猛犸象的废话技术一样古老，现在它可以让（并且*真的让*）生活变得更难，代码更难管理：分支与 CI 不矛盾，CI 不是教条，而是工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:27:17.607

通常人们在 SVN 中区分两种类型的分支：发布分支和特性分支。

发布分支由特定发布的需求和时间表定义。功能分支由特定功能的开发过程定义。

因此，如果您要开发单个功能，请为其创建一个分支并在功能完成时合并到主干，而不是在某个版本完成时。

如果您想开发某些功能，但不将它们包含在某个特定版本中，请为该版本创建一个分支并仅合并该版本范围内的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:59:35.407

是的，我相信这是最好的选择。至少我们会这样做。创建一个新分支。

# objective-c - 使用 STOMP 连接 RabbitMQ 时如何重播丢失的消息？

> ID：14992307
> 
> 赞同：7
> 
> 时间：2013-02-21T00:05:07.607
> 
> 标签：objective-c, rabbitmq, stomp

我有一个 iOS 应用程序，它使用[STOMP 客户端与](https://github.com/juretta/objc-stomp)[RabbitMQ](https://www.rabbitmq.com)交谈。应用程序在启动期间加载大量状态，然后通过接收在 STOMP 上发布的更新来保持该状态同步。当然，如果它失去连接，它就不能再确定它是同步的，因此必须重新加载那个大的初始 blob。任何类型的网络中断都会触发这种行为并使我的客户感到难过。

有很多大局的方法可以解决这个问题（我正在研究它们），但与此同时，我正在尝试使用持久队列来解决这个问题。这个想法是服务器将创建一个队列，将其绑定到适当的主题，然后开始构建大型启动包。完成后，它将把一切交给客户。客户端将使用启动包设置自己，打开队列订阅，然后处理服务器准备就绪时发生的任何更新。同样，如果客户端断开连接，它可以简单地重新连接并继续读取它在队列中找到的消息。

我的问题是，虽然客户端成功接收到连接后发送的消息，但如果在连接之前队列中有任何消息，则不会读取它们。同样，如果客户端断开连接，当它重新连接时，它不会看到任何在它离开时到达的消息。

谁能建议我如何让客户能够阅读那些丢失的消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T02:33:28.180

事实证明，STOMP 适配器正在使用消息但未能传递它们。因此，当客户端重新连接时，它不会有任何消息等待它。

为了解决这个问题，我将订阅请求上的“ack”设置更改为“client”，这意味着 STOMP 在客户端发回 ACK 帧之前不应该考虑消息已传递。通过适当地更改我的客户端，即使在客户端离开后，消息现在也可以传递。

# c# - 在后面的页面代码中单击 SVG 触发功能

> ID：14992312
> 
> 赞同：0
> 
> 时间：2013-02-21T00:05:29.067
> 
> 标签：c#, asp.net, svg, click, code-behind

这里有个简短的问题：我有一个带节点的 SVG 图表。有没有办法让点击 SVG 在后面的页面代码中触发一个函数？具体来说，让它能够判断图表中的哪个节点被单击。我注意到 asp 控件内置了这种类型的功能，但没有更通用的 html 组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:00:35.813

好吧，今天我有一个解决方案。我会在这里分享给其他想看的人。

我的点击事件触发器是一个使用 CSS z-index 放置在 SVG 上的 asp:ImageMap。

在显示 SVG 之前，Page_Load 函数中的代码隐藏获取 SVG 并将其解析为 XML，以便我可以像 XML 文档一样读取/修改它。首先，程序检查“g”元素是否有任何变换，并保存偏移量以在绘制坐标时使用。然后，程序查看 XML 中的每个形状（矩形、圆形等）元素，并从形状中提取 x、y 坐标并创建相应的 ImageMap HotSpot 并将其添加到 ImageMap。

哇！

# bash - 递归更改目录并在每个目录中执行一个命令

> ID：14992318
> 
> 赞同：3
> 
> 时间：2013-02-21T00:05:49.473
> 
> 标签：bash

我正在尝试编写一个 bash 脚本来递归地遍历一个目录并在每次登陆时执行一个命令。来自基础的每个文件夹都有前缀“lab”，我只想通过这些文件夹进行递归。没有递归遍历文件夹的示例是：

```
#!/bin/bash

cd $HOME/gpgn302/lab00
scons -c
cd $HOME/gpgn302/lab00/lena
scons -c
cd $HOME/gpgn302/lab01
scons -c
cd $HOME/gpgn302/lab01/cloudpeak
scons -c
cd $HOME/gpgn302/lab01/bear
scons -c 
```

虽然这可行，但如果我想在 lab01 中添加更多目录，我将不得不编辑脚本。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:27:41.890

这里有一些接近的建议，但这是一个真正有效的建议：

```
find "$HOME"/gpgn302/lab* -type d -exec bash -c 'cd "$1"; scons -c' -- {} \; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T00:14:04.723

用于`find`此类任务：

```
find "$HOME/gpgn302" -name 'lab*' -type d -execdir scons -c . \; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T00:15:57.860

它易于使用`find`来定位和运行命令。

这是一个在运行命令之前更改为正确目录的示例：

```
find -name 'lab*' -type d -execdir scons -c \; 
```

**更新：** 根据 thatotherguy 的评论，这不起作用。将`find -type d`只返回目录名称，但是`-execdir`命令对包含匹配文件的子目录进行操作，因此在此示例中，该`scons -c`命令将在找到的`lab*`目录的父目录中执行。

使用 thatotherguy 的方法或非常相似的方法：

```
find -name 'a*' -type d -print -exec bash -c 'cd "{}"; scons -c'  \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:27:13.340

如果你想用 bash 来做：

```
#!/bin/bash

# set default pattern to `lab` if no arguments
if [ $# -eq 0 ]; then
  pattern=lab
fi

# get the absolute path to this script
if [[ "$0" = /* ]]
then
  script_path=$0
else
  script_path=$(pwd)/$0
fi

for dir in $pattern*; do
  if [ -d $dir ] ; then
    echo "Entering $dir"
    cd $dir > /dev/null
    sh $script_path dummy
    cd - > /dev/null
  fi  
done 
```

# ruby-on-rails - 如何在 YAML 中声明带有单引号和双引号的字符串？

> ID：14992328
> 
> 赞同：37
> 
> 时间：2013-02-21T00:06:27.350
> 
> 标签：ruby-on-rails, ruby, yaml

我正在对应用程序进行国际化，但无法弄清楚如何声明包含单引号和双引号的翻译字符串。这是我正在尝试的 en.yml 字符串的示例

```
en:
  my_string: When you're using double quotes, they look like "this" 
```

使用上面的字符串，我收到以下错误：

```
can not load translations from /vagrant/config/locales/en.yml,
expected it to return a hash, but does not 
```

如果只有双引号，我会将其用单引号括起来，反之亦然。我如何处理双引号和单引号？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-21T00:18:02.363

转义应该这样做

```
"When you're using double quotes, they look like \"this\"" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T05:28:52.877

实际上我不明白为什么翻译字符串中需要过时的打字机引号。2013 年左右，我们不再拘泥于 ASCII-7。排版规则规定了他们使用[unicode 引号](http://en.wikipedia.org/wiki/Quotation_mark_glyphs#Quotation_marks_in_Unicode)的要求。

这是有史以来最好的做法：将它们映射到第三个键盘级别（或者，最终，`sed`你的`yml`）：

```
"When you’re using double quotes, they look like “this”" 
```

采用这种方法，您将永远不会遇到逃跑的麻烦，您的客户肯定会说“哦，太好了”。</p>

抱歉，如果这看起来有点离题，但由于问题是关于*翻译字符串*的，我仍然认为它是最好的解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-17T22:31:06.373

看看这是否适合你，它在我需要传递 JSON 值的 Spring Boot 应用程序中非常适合我：

使用 YAML 管道样式：

```
app.json:
  values: |
    {"key": "value"} 
```

你的情况是：

```
en:
  my_string: |
    When you're using double quotes, they look like "this" 
```

折叠样式也可以，但我没有尝试过。

在此处查看更多信息：http: [//symfony.com/doc/current/components/yaml/yaml_format.html#strings](http://symfony.com/doc/current/components/yaml/yaml_format.html#strings)

# c - 返回数组的函数（用 C 编写的 Win32 控制台应用程序，学习操作系统）

> ID：14992329
> 
> 赞同：0
> 
> 时间：2013-02-21T00:06:40.970
> 
> 标签：c, pointers

在 C 中，不能将返回类型设为数组吗？我开始在我的操作系统课程中学习指针，我需要创建一个函数，该函数将 2 个数组作为参数并返回一个仅包含两个参数数组中的元素的数组。

到目前为止，这就是我的 C 函数返回数组的内容：

```
#include <stdio.h>

main() 
{
    printf("Hello world");

    int array1[4] = {1, 2, 3, 4};
    int array2[4] = {3, 4, 5, 6};

    int* inter = intersection(array1, array2);

printf(inter); // <-- also, I don't know how I could get this to work for testing

    //freezes program so it doesn't terminate immediately upon running:
    getchar();
}

int* intersection(int array1[], int array2[])
{       
    int arrayReturn[sizeof(array1) + sizeof(array2)];
    int count = 0;

    for(int i = 0; i < 4; i++)
    {
        for(int j = 0; j < 4; j++)
        {
            if(array1[i]==array2[j])
            {

                arrayReturn[count] = array1[i];
                count = count + 1;

            }
        }
    }

    return arrayReturn;
} 
```

我的另一个问题是如何使用 printf() 语句在 main() 方法中测试此函数？

我需要这样做的原因是因为我们正在学习进程和内存分配，并且指针在操作系统开发中起着重要作用。我的教授告诉我，指针很难理解，以至于许多编程语言都没有使用指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:25:53.833

开始了

```
#include <stdio.h>

/* declare function, you need to capture array size as well, and also allow 
   to get result target pointer, result space info and pointer to place where the
   size of result will be captured */
int* intersection(int * array1, int a1len , int * array2, int a2len, int* result, int *resultsize, int resultspace);

main()
{
    printf("Hello world\n");

    int array1[4] = {1, 2, 3, 4};
    int array2[4] = {3, 4, 5, 6};
    int arrayr[32]; /*result will be in this table */
    int resultsize;
    int resultspace = 32;

    int i;
    /* here comes confusion - int resultsize means it will be read as integer,
       so we need to write &resultsize to get the pointer,
       array declaration like int arrayr[number] is actually understood by system
       as a pointer to an integer, pointing to first element of array,
       allowing you to use indexes 
       so arrayr[3] actually means *(arrayr + 3 * sizeof(int))
    */

    int* inter = intersection(array1, 4, array2, 4, arrayr, &resultsize, resultspace);
    /* inter is now a pointer to arrayr */
    for (i = 0; i<resultsize; i=i+1) {
                printf("%d\n", inter[i]);
        }

    //freezes program so it doesn't terminate immediately upon running:
    getchar();
}

int* intersection(int * array1, int a1len , int * array2, int a2len, int* result, int *resultsize, int resultspace)
{
    /* as we received a pointer to resultsize (*resultsize)
       we need to de-reference it using "*" to get or set the actual value */

    *resultsize = 0;

    int i, j;
    for(i = 0; i < a1len; i++)
    {
        for(j = 0; j < a2len; j++)
        {
            if(array1[i]==array2[j])
            {

                result[*resultsize] = array1[i];
                *resultsize = *resultsize + 1;
                if (resultspace == *resultsize)
                        return result;
            }
        }
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:01:30.277

> 在 C 中，不能将返回类型设为数组吗？

不。将数组与指针区分开来的一些特征是：

1.  `sizeof array`计算结果为`n * sizeof *array`，其中 n 是元素的数量，而不是指针的大小。
2.  `&array`计算为指向数组的指针，而不是指向指针的指针。
3.  您可以使用数组来初始化数组以初始化指针，例如。`int *ptr = (int[]){ 1, 2, 3, 4 };`，但您不能使用指针来初始化数组，例如。`int array[4] = ptr;`.
4.  您不能分配给数组，例如。`int array[4]; array = (int[]){ 1, 2, 3, 4 };`，但您可以分配给指针：`int *ptr; ptr = (int[]){ 1, 2, 3, 4 };`，除非指针被声明为指向 int 的 const 指针，例如。`int * const ptr = NULL; ptr = (int[]){ 1, 2, 3, 4 };`

> 我开始在我的操作系统课程中学习指针，我需要创建一个函数，该函数将 2 个数组作为参数并返回一个仅包含两个参数数组中的元素的数组。

这是不可能的。首先，您的*数组参数*实际上是指针参数。看`sizeof array1`和`sizeof array2`。尝试用它们初始化一个数组。尝试分配给他们。上面有多少测试似乎表明它们是指针？将数组传递给函数时，数组表达式的计算结果为指向数组第一个元素的指针。也许您想声明您的函数以接受指向数组的指针，例如：

```
int *intersection(size_t sz1, int (*array1)[sz1], // array1 is a pointer to int[sz1]
                  size_t sz2, int (*array2)[sz2]) // array2 is a pointer to int[sz2]
{ ... } 
```

其次，您的函数清楚地返回一个*指针值*，*而不是*一个数组。关于该返回值，arrayReturn 在交集内被声明为具有自动存储持续时间的数组，因此在交集返回时它将被销毁。当 main 尝试使用该值时，它将尝试使用已破坏的数组。无法使用自动存储持续时间返回数组。使用自动存储持续时间返回固定大小的结构是可能的，但这对您的问题没有帮助，因为您的返回值需要在大小上是动态的。

> 我的另一个问题是如何使用 printf() 语句在 main() 方法中测试此函数？

您不能对该函数的返回值做任何事情，因为使用已销毁的对象是未定义的行为。

> 我需要这样做的原因是因为我们正在学习进程和内存分配，并且指针在操作系统开发中起着重要作用。

C 编程语言独立于操作系统实现；操作系统是否会延迟销毁具有自动存储持续时间的对象并不重要。如果您使用被破坏的对象，您将调用未定义的行为。

> 我的教授告诉我，指针很难理解，以至于许多编程语言都没有使用指针。

他/她有没有写出他/她的教案？如果不是，那么他/她错过了一个可以确定改进的关键点。他/她的书面教案过去有多成功？如果它是 100% 成功的，那么使用像“困难”这样的词是没有意义的；为什么要不必要地引发学生的强烈情绪？如果部分太复杂，那么识别和澄清这些部分更有意义，而不是识别这些部分并将它们指定为“困难”。在有关 C 的课程中​​提及其他编程语言也是没有意义的。

当教授的课程计划相当成功时，将其作为一本书出版变得可行。一个例子是 K&R 的“The C Programming Language, Second Edition”。你有书吗？

# asp.net - 类变量不保持值

> ID：14992330
> 
> 赞同：0
> 
> 时间：2013-02-21T00:06:43.233
> 
> 标签：asp.net, vb.net

您好，我有一个名为 tableClass 的类，它存储一个名为 totalHours 的双变量。然后我想将此变量放在只读属性中。问题是 totalHours 的值不断重置为 0 。不确定我是否声明了变量错误，我也尝试将值存储在视图状态中，并且发生了同样的问题。有什么建议么？任何问题让我知道。谢谢！

表类

```
Public Class tableClass
    Inherits System.Web.UI.Page
    Private TotalHours As Double = 0

    Private Sub AddNewRow(ByVal hrsTextBox as TextBox)

        TotalHours = TotalHours + CDbl(hrsTextBox.Text)
    End Sub

    ReadOnly Property RegHours() As Double
        'Returns the total hours so far recorded
        Get
            Return TotalHours
        End Get
        End Property
   End Class 
```

默认

```
Protected Sub btnAddDate_Click(sender As Object, e As EventArgs)
        dim dateTable as New tableClass

        dateTable.AddNewRow(hrsTextbox)
End Sub

 Protected Sub HoursChange(sender As Object, e As EventArgs)
            LabelHoursTotal.Text = (dateTable.RegHours + CDbl(TextBoxHours.Text)).ToString
 End Sub 
```

aspx

```
<asp:TextBox ID="txtHours" runat="server" width ="90" Text = "0" AutoPostBack="True" OnTextChanged ="HoursChange"></asp:TextBox>

<asp:Label id="lblHoursTotal" runat="server" Text = "0"></asp:Label>

<asp:Button ID="btnAddHour" runat="server" Text="Add New Row" OnClick="btnAddHour_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:37:58.760

您需要以某种方式存储该值，当涉及到 Web 应用程序时，根据情况和您的需要，使用 ViewState 或 Session 是一个好主意。ViewState 特定于页面，Session 特定于用户。

# xcode - 分配分配

> ID：14992338
> 
> 赞同：0
> 
> 时间：2013-02-21T00:07:54.847
> 
> 标签：xcode, cocoa-touch, provisioning-profile, xcode4.6

我可以通过*开发*配置文件很好地运行应用程序，但我不能通过*分发*配置文件运行它。据我所知，我已经正确设置了所有内容。我在编译时从 xcode 得到的错误是：

```
Code Sign error: No unexpired provisioning profiles found that contain any of the keychain's signing certificates 
```

在`TARGETS`> `Release`>中`Any iOS SDK`，我查看了正确的行项目应该是什么，我看到以下内容：

```
Profile doesn't match any valid certificate/private key pair in your keychains 
```

所以听起来我当前的证书不允许我将我的应用程序作为发行版运行？我进入会员中心，弄脏了所有相关的个人资料，并在更新我的个人资料后重新启动了 xcode 4.6。似乎不起作用。

我还检查了我的 Info.plist 并且那里的包名称是正确的。在`TARGETS`> `Summary`>中也是正确的`Bundle Identifier`。

# 缺少私钥

我今天早上注意到我的 iPhone 分发证书下面没有私钥`Keychain Access`，我怀疑这是一个问题？我是开发人员门户中的管理员，所以我不确定为什么这不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:00:05.083

如果您在签名时不在**分发证书**上，那么您需要让在证书上的人为您导出他们的**证书 + 私钥**。如果有疑问，它可能是您需要的开发门户**代理。**详细信息可在以下问题的答案中找到：

[配置文件与默认钥匙串中的任何有效证书/私钥对不匹配](https://stackoverflow.com/questions/11122046/profile-doesnt-match-any-valid-certificate-private-key-pair-in-the-default-keyc)

# java - Mac OSX 上的 Java 错误？

> ID：14992339
> 
> 赞同：0
> 
> 时间：2013-02-21T00:08:00.303
> 
> 标签：java, macos, swing, timer, actionlistener

大家晚上好，我今天运行了这段简单的代码，在 Mac OSX 操作系统（Mountain Lion）上发现了一个奇怪的行为。这是代码：

```
import javax.swing.*;

public class Prog33_01
{
    public static void main(String [] args) throws InterruptedException
    {
        Timer t = new Timer(1000, new CurrentTime());
         t.start();

       //Exception safe code
        Thread.sleep(5000);

     }
} 
```

然后`CurrentTime()`上课。

```
class CurrentTime implements ActionListener
{

@Override
public void actionPerformed(ActionEvent e)
{
    System.out.println("Time is: " + new Date() );
}

} 
```

这是一个非常简单的程序，可以在 Windows 7 上按预期运行。但在 Mac OSX 上，使用 Netbeans 和最新的 Java 7 u15。时间一直在运行。这里有什么问题吗。

# .net - Win Form 应用程序向外部应用程序窗口发送文本

> ID：14992340
> 
> 赞同：1
> 
> 时间：2013-02-21T00:08:05.510
> 
> 标签：.net, winforms

我正在尝试自动化一些任务，并且想知道 Windows Form C# .NET 4 应用程序是否可以定位外部应用程序中的文本框并将文本粘贴到其中？

如果不是，如果有什么是一个好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:23:41.137

可以，但需要使用 FindWindow* 和 SendMessage Windows API 调用

[http://www.pinvoke.net/default.aspx/user32.findwindow](http://www.pinvoke.net/default.aspx/user32.findwindow)

我已经将它用于一个项目，以便我们可以从程序中收集序列号并将它们全部发送回我们的办公室，而不需要用户复制/粘贴它。

使用`FindWindow`查找您要查找的字段后，您可以使用`SendMessage`messageType`WM_GETTEXT`来获取文本并设置文本`WM_SETTEXT`

# silverlight - 如何防止 ScrollViewer 处理后代的 MouseMove 事件？（适用于 Windows Phone 的 Silverlight）

> ID：14992349
> 
> 赞同：0
> 
> 时间：2013-02-21T00:08:39.917
> 
> 标签：silverlight, scrollviewer, mousemove, event-bubbling

考虑一下：

```
<ScrollViewer>
  <!-- Several Controls /-->

  <MyControl MouseMove="myMouseMoveHandler" />

  <!-- Several Controls /-->
</ScrollViewer> 
```

MyControl 是一个 HSV 颜色选择控件，其色谱在一个可以旋转的圆圈上，而所选色调的细微差别在一个三角形上。它看起来很棒，但遗憾的是我还不能发布图片（代表）。它确实需要能够处理其表面上各个方向的鼠标移动。

现在，当我在 MyControl 上移动鼠标（并且它正确处理移动）时，ScrollViewer 仍然滚动！

即使它是 ScrollViewer 中的唯一控件，移动在我的控件内开始和结束，和/或我在 MouseLeftButtonDown / -Up 事件中都设置了 e.Handled = true ，也会发生这种情况。在 ..Down 中使用 CaptureMouse() 和在 ..Up 中使用 ReleaseMouseCapture() 也无济于事。

您会同意我不能更改 ScrollViewer 实现（或者我可以吗？），并且我不能保证我的控件永远不会托管在 ScrollViewer 中（例如，因为我想发布它）。

必须可以防止 ScrollViewer 获取 MouseMove。证明：只需将 MyControl 替换为包含超过其高度的项目的 ListBox，您可以在没有 ScrollViewer 反应的情况下滑动 ListBox 项目。

但是怎么做？它也是 ListBox 内的 ScrollViewer 吗，这就是它在那里工作的原因，或者它也可以为我的控件完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:27:29.463

好吧，我找到了一个很好的解决方案。

我的想法是如此固定在 e.Handled（在 MouseMove 中不可用）、IsHitTestVisible（也将所有孩子从触摸事件中隐藏）和诸如此类的东西上，我没有看到明显的东西。

如果有人有同样的问题，下面是代码：

```
struct ScrollVisibilities
{
    public ScrollBarVisibility Horizontal;
    public ScrollBarVisibility Vertical;
}

Dictionary<ScrollViewer, ScrollVisibilities> scrollersStates = new Dictionary<ScrollViewer, ScrollVisibilities>();

bool scrollersDisabled;

void disableScrollViewers(bool disable)
{
    if (scrollersDisabled == disable)   // can't disable if disabled or enable if enabled
        return;
    scrollersDisabled = disable;

    if (disable)
    {
        DependencyObject dpo = Parent;
        while (dpo is FrameworkElement)
        {
            if (dpo is ScrollViewer)
            {
                ScrollViewer s = dpo as ScrollViewer;
                ScrollVisibilities v = new ScrollVisibilities()
                {
                    Horizontal = s.HorizontalScrollBarVisibility,
                    Vertical = s.VerticalScrollBarVisibility
                };
                scrollersStates.Add(s, v);
                s.HorizontalScrollBarVisibility = ScrollBarVisibility.Disabled;
                s.VerticalScrollBarVisibility = ScrollBarVisibility.Disabled;
            }
            dpo = ((FrameworkElement)dpo).Parent;
        }
    }
    else // restore
    {
        foreach (ScrollViewer s in scrollersStates.Keys)
        {
            s.HorizontalScrollBarVisibility = scrollersStates[s].Horizontal;
            s.VerticalScrollBarVisibility = scrollersStates[s].Vertical;
        }
        scrollersStates.Clear();
    }
} 
```

在 MouseLeftButtonDown 中，我禁用 ScrollViewers(true)，并连接到 Touch.FrameReported。在 Touch_FrameReported 中，当所有接触点都具有 Action == Up 时，我禁用 ScrollViewers(false)。这样，即使它发生在 MyControl 之外，我也会收到 Up 事件。

这种方法有一些限制，因为禁用 ScrollViewer 会导致它们跳转到它们（和它们的子级）未滚动状态。所以我将 MyControl 放在顶部并相应地设置所有对齐方式。

# c++ - 有没有办法在 gcc/g++ 中强制函数解析优先级？

> ID：14992350
> 
> 赞同：0
> 
> 时间：2013-02-21T00:08:42.227
> 
> 标签：c++, templates, gcc, casting, operator-overloading

很容易理解为什么我们不能说：

```
template<class A> class foo 
{
     //stuff
     A& operator[](size_type n);
     operator A*();
     //more stuff
 };

somefooinstance[bar]; 
```

...我们回来了“ISO C++ 说这些是模棱两可的，即使第一个的最差转换比第二个的最差转换要好。”

当然，这意味着 gcc 不知道我们的意思是：

```
somefooinstance.operator[](bar); 
```

或者我们的意思是：

```
(static_cast<A*>(somefooinstance))[bar]; 
```

现在，ISO C++ 说必须考虑所有转换，是吗？但是有没有办法强制选择优先级？**属性**似乎没有提供任何帮助。

（请不要“你真正想做什么？”回答。是的，这是一个固定的例子。山姆大叔不想让我剪切和粘贴代码。）

编辑：

有人想查看确切的代码：

```
template<class T, unsigned S> class foo
    {
    private:
        T m_bar[S];

    public:
        inline T& operator[](unsigned s)
        {
            return m_bar[s];
        }

        inline operator T*()
        {
            return m_bar; 
        }

    };

    int main(int argc, char** argv)
    {
      foo<int, 100> test;
      test[31] = 6;
    } 
```

产量：

23：警告：ISO C++ 说这些是模棱两可的，即使第一个的最差转换比第二个的最差转换要好：

8 : 注意: 候选 1: T& foo::operator[](unsigned int) [with T = int, unsigned int S = 100u]

23 : 注意: 候选 2: operator[](int*, int)

... 不需要 -pedantic。

对罐头示例感到抱歉。我所说的没有剪切和粘贴的意思不仅是我实际上不能复制和粘贴，我无法解释我正在尝试做什么，因为规则和规定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:17:38.433

在 C++11 中，您可以使转换运算符显式：

```
explicit operator A*(); 
```

那么它只会在类似的情况下使用`static_cast<A*>(somefooinstance)`。

# mysql - 使用 MySQL 作为 ApacheDS 的后端

> ID：14992354
> 
> 赞同：1
> 
> 时间：2013-02-21T00:09:24.603
> 
> 标签：mysql, apacheds

是否可以使用 ApacheDS 将 MySQL 配置为后端数据存储？我在网上找不到任何东西。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:48:39.057

不，默认情况下不支持 SQL 后端。

# php - php 文件被下载而不是运行

> ID：14992355
> 
> 赞同：0
> 
> 时间：2013-02-21T00:09:42.233
> 
> 标签：php, html, apache, .htaccess, cpanel

当我使用 .htaccess 文件到一个目录试图让 php 在 html 文件中运行时，我的问题就开始了。我尝试了很多 AddTypes 和 AddHandlers 的组合。我把它们拿出来，现在我的 php 文件正在被浏览器下载而不是运行。这里还有一些其他问题我已经研究过，但它们并不完全是我的问题。

我现在很迷茫，我几乎尝试了 AddType 和 AddHandler 的每一种组合。从那以后，我决定使用 mod_rewrite 并且我的所有文件都以 .php 结尾，但我无法让它们运行。

这是我用来测试的：

```
 <!DOCTYPE html>

    <body>
    <?php
      echo("php working");  
    ?>
    </body>

    </html> 
```

我错过了什么吗？幸运的是，我在根目录之外的单独目录中进行了所有更改，以便该站点仍然运行，但该文件夹中的任何 php 文件都无法在 broswer 中查看。我能做些什么？任何帮助表示赞赏。

编辑：为了清楚起见，我最初试图能够将 php 放入我的 html 文件中，所以我在搞乱处理程序和 addtypes。我的服务器确实有 php。如果我从 .html 文件调用 php 脚本，它就会运行。我只是无法像上面包含的示例那样在浏览器中打开一个 php 文件，它曾经在浏览器中打开。我担心我通过尝试 .htaccess 中的所有不同处理程序搞砸了一些事情。从那以后，我已经清除了我的 .htaccess 文件，希望这至少能让我恢复正常，但事实并非如此。

第二次编辑：我去了根目录并创建了一个 php 文件，它运行得很好，所以它肯定是我在特定目录的 .htaccess 中更改的。无论如何我可以重置该目录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:13:37.737

你在你的 htaccess 文件中看到这样的行吗？php_flag 引擎关闭

如果是，请将其删除。还有一件事可以帮助你理解发生了什么下面的 htaccess 将使 Php 不被执行，而是作为文本文件下载

```
<VirtualHost *>
    ServerName sourcecode.testserver.me
    DocumentRoot /var/www/example
    AddType text/plain php
</VirtualHost> 
```

还有一件事我猜这个话题在这里解决过一次-> [htaccess 下载文件而不是加载](https://stackoverflow.com/questions/8296090/htaccess-downloading-file-instead-of-loading?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:17:30.243

您是否确保在 apache 中正确安装 php？

如果您使用 php 作为模块，则需要以下内容：

```
LoadModule php5_module "c:/php/php5apache2.dll"
AddType application/x-httpd-php .php

# configure the path to php.ini
PHPIniDir "C:/php" 
```

或作为 CGI 二进制文件

```
ScriptAlias /php/ "c:/php/"
AddType application/x-httpd-php .php

# For PHP 4
Action application/x-httpd-php "/php/php.exe"

# For PHP 5
Action application/x-httpd-php "/php/php-cgi.exe" 
```

其他要考虑的事情，php 二进制文件上的权限设置是否正确，php.ini 是否存在且正确，自从将 php 安装到 apache 后，你是否重新启动了 apache？

最后，php 不在 html 文件中运行，您需要将以下内容设置为 apache 配置中的最后一件事

```
AddType application/x-httpd-php .html .htm 
```

# php - mysqli_num_rows 以准备好的语句失败，程序样式

> ID：14992356
> 
> 赞同：1
> 
> 时间：2013-02-21T00:09:46.200
> 
> 标签：php, mysqli, prepared-statement

据我了解，使用准备好的语句的好处是可以防止 SQL 注入。

我设法使用 SELECT 和 INSERT 使用准备好的语句构建查询。

但是要达到`select count()`, 和我的头撞墙。
PHP手册给出：

```
if ($result = mysqli_query($link, "SELECT Code, Name FROM Country ORDER BY Name")) {

    /* determine number of rows result set */
    $row_cnt = mysqli_num_rows($result);

    printf("Result set has %d rows.\n", $row_cnt);

    /* close result set */
    mysqli_free_result($result);
} 
```

我也试图用准备好的声明来做到这一点。但也许我不应该？

这就是我正在尝试的：

```
$boy = 'yes';
$age   = 1;

$result = mysqli_prepare ($bdd, 'SELECT boy , age FROM photo WHERE  boy = ? AND age= ?' );

mysqli_stmt_bind_param( $result, "si", $boy , $age );
mysqli_stmt_execute( $result );

$row_cnt = mysqli_num_rows( $result );
printf( "Le jeu de résultats a %d lignes.\n", $row_cnt ); 
```

但是无论我尝试什么，我总是会遇到相同类型的错误

> 警告：mysqli_num_rows() 期望参数 1 为 mysqli_result，对象在第 36 行的 C:\wamp\www\page.com\pic.php 中给出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:19:15.250

我想你正在寻找`mysqli_stmt_num_rows`结合`mysqli_stmt_store_result`- [http://www.php.net/manual/en/mysqli-result.num-rows.php](http://www.php.net/manual/en/mysqli-result.num-rows.php)

```
<?php
$boy = 'yes';
$age   = 1;

$result = mysqli_prepare ($bdd, 'SELECT boy , age FROM photo WHERE  boy = ? AND age= ?' );

mysqli_stmt_bind_param( $result, "si", $boy , $age );
mysqli_stmt_execute( $result );

// You may need this too...
mysqli_stmt_store_result( $result );

$row_cnt = mysqli_stmt_num_rows( $result );
printf( "Le jeu de résultats a %d lignes.\n", $row_cnt );
?> 
```

# c# - 计算日期的逻辑正确但代码不正确

> ID：14992364
> 
> 赞同：0
> 
> 时间：2013-02-21T00:10:35.150
> 
> 标签：c#, datetime, timespan

我正在编写一个程序来计算时间跨度，但似乎无法正确计算。

我基本上要做的是计算特定日期范围是否介于到达日期和结束日期之间。

(----(--------------)------) 这一个代表到达日期和结束日期，输入的日期范围作为内括号。我基本上不关心内括号之外的日期，只是检查它们是否在外部范围内，如果这有意义的话。

但是另一个问题是，如果我们的到达日期和结束日期与输入的日期范围重叠，我们在那里做什么？

我们只关心与输入日期重叠的日期。所有这些对我来说都很有意义我只是不确定如何在代码中呈现它，下面的示例试图完成后者（尽管相当草率）是否有更有效的方法来执行此操作实际上会产生正确的结果?

```
 DateTime arrivalDate = new DateTime(2012,10,15);
        DateTime releaseDate = new DateTime(2013,01,20);
        DateTime enteredDate = new DateTime(2012,10,01);
        DateTime enteredEnd = new DateTime(2012,12,31);

        TimeSpan begin = TimeSpan.MinValue;
        TimeSpan end = TimeSpan.MinValue;

        if (arrivalDate <= enteredDate)
            begin = enteredDate - arrivalDate;

        else if (arrivalDate >= enteredDate)
            begin = arrivalDate - enteredDate;

        if (releaseDate <= enteredEnd)
            end = enteredEnd - releaseDate;

        else if (releaseDate >= enteredEnd)
            end = releaseDate - enteredEnd;

        TimeSpan total = begin + end;
        TimeSpan benchmark = releaseDate - arrivalDate;
        TimeSpan other = benchmark - total;

        Console.WriteLine("There are " + begin.Days + " days in begin.");
        Console.WriteLine("There are " + end.Days + " days in end.");

        Console.WriteLine("There are " + other.Days + " days in the range."); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:35:25.377

要确定重叠量：

```
DateTime arrivalDate = new DateTime(2012, 10, 15);
DateTime releaseDate = new DateTime(2013, 01, 20);
DateTime enteredDate = new DateTime(2012, 10, 01);
DateTime enteredEnd = new DateTime(2012, 12, 31);

// Whichever of { arrivalDate, enteredDate } is later
DateTime startOverlap = arrivalDate <= enteredDate ? enteredDate : arrivalDate;
// Whichever of { releaseDate, enteredEnd } is earlier
DateTime endOverlap = enteredEnd <= releaseDate ? enteredEnd : releaseDate;

TimeSpan totalOverlap = endOverlap - startOverlap;

Console.WriteLine("There are {0} days of overlap.", totalOverlap.Days); 
```

然后确定输入的范围是否在预期范围内：

```
TimeSpan enteredRange = enteredEnd - enteredDate;

bool isWithinRange = enteredRange == totalOverlap; 
```

# php - 使用 PHP 5.5 的 password_hash 和 password_verify 函数

> ID：14992367
> 
> 赞同：33
> 
> 时间：2013-02-21T00:11:00.480
> 
> 标签：php, mysql, hash, passwords, php-password-hash

假设我想为用户存储密码，这是否是使用 PHP 5.5 的`password_hash()`功能（或 PHP 5.3.7+ 的此版本：[https](https://github.com/ircmaxell/password_compat) ://github.com/ircmaxell/password_compat ）的正确方法？

```
$options = array("cost" => 10, "salt" => uniqid());
$hash = password_hash($password, PASSWORD_BCRYPT, $options); 
```

然后我会这样做：

```
mysql_query("INSERT INTO users(username,password, salt) VALUES($username, $hash, " . $options['salt']); 
```

插入数据库。

然后验证：

```
$row = mysql_fetch_assoc(mysql_query("SELECT salt FROM users WHERE id=$userid"));
$salt = $row["salt"];
$hash = password_hash($password, PASSWORD_BCRYPT, array("cost" => 10, "salt" => $salt));

if (password_verify($password, $hash) {
    // Verified
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-21T00:28:04.590

暂时忽略您的数据库语句的问题，我将回答有关`password_hash`.

简而言之，不，这不是你的做法。您不想单独存储盐，您应该同时存储哈希和盐，然后使用两者来验证密码。`password_hash`返回一个包含两者的字符串。

该`password_hash`函数返回一个包含哈希和盐的字符串。所以：

```
$hashAndSalt = password_hash($password, PASSWORD_BCRYPT);
// Insert $hashAndSalt into database against user 
```

然后验证：

```
// Fetch hash+salt from database, place in $hashAndSalt variable
// and then to verify $password:
if (password_verify($password, $hashAndSalt)) {
   // Verified
} 
```

此外，正如评论所暗示的，如果您对安全性感兴趣，您可能需要查看`mysqli`（`ext/mysql`在 PHP5.5 中已弃用），还有这篇关于 SQL 注入的文章：http: [//php.net/manual/en/security .database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-14T22:44:41.603

不推荐使用你自己的 salt，从 PHP 7 开始，[它的使用已被弃用](http://php.net/manual/en/function.password-hash.php)。为了理解原因，作者`password_hash`分享了这些想法（链接已失效）

> 我已经非常清楚一件事：盐的选择很危险。我还没有看到盐选项的单一用法甚至还不错。每种用法的范围从糟糕（传递 mt_rand() 输出）到危险（静态字符串）到疯狂（将密码作为自己的盐传递）。
> 
> 我得出的结论是，我认为我们不应该允许用户指定盐。

他甚至[在 SO 聊天中发表了这条评论，](https://chat.stackoverflow.com/transcript/11?m=25247190)指出通过自己的盐是多么糟糕

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-03T01:01:31.740

请注意 php.net

> **警告**
> 
> 自 PHP 7.0.0 起，盐选项已被弃用。现在首选简单地使用默认生成的盐。

结论？忘记盐的选择。

这已经足够了`password_hash('password', PASSWORD_DEFAULT)`*（或_BCRYPT）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-23T22:39:05.540

你不应该输入自己的盐，把盐留空，函数会生成好的随机盐。

将函数返回的整个字符串插入数据库（或文件或您使用的任何内容）。它包含：算法 ID、成本、盐（22 个字符）和哈希密码。

使用password_verify()需要整个字符串。盐是随机的，落入坏人之手（使用散列密码）不会造成伤害。这会阻止（或非常困难）使用现成的集合生成的密码和哈希列表 - 彩虹表。

您应该考虑添加成本参数。默认值（如果省略）**是 10** - 如果更高，则函数计算哈希更长。将成本增加 1，生成哈希所需的时间翻倍（从而延长破解密码所需的时间）

```
$hash = password_hash($password, PASSWORD_BCRYPT, array("cost" => 10)); 
```

您应该根据服务器上的速度检查设置此参数。建议该函数执行 100 毫秒以上（有些人更喜欢将其设为 250 毫秒）。通常成本 = 10 或 11 是一个不错的选择（2015 年）。

为了提高安全性，您可能希望在密码中添加一个长的（50-60 个字符是不错的选择）秘密字符串。在使用 password_hash() 或 password_verify() 之前。

```
$secret_string = 'asCaahC72D2bywdu@#$@#$234';
$password  = trim($_POST['user_password']) . $secret_string;
// here use password_* function 
```

> 警告 将 PASSWORD_BCRYPT 用于 algo 参数，将导致密码参数被截断为最大长度 72 个字符。

如果 $password 将超过 72 个字符并且您更改或添加 73 或 90 个字符，则哈希不会更改。可选，粘贴 $secret_string 应该在最后（在用户密码之后而不是之前）。

# php - 如何使用带有 ORDER BY 子句的查询结果？

> ID：14992373
> 
> 赞同：0
> 
> 时间：2013-02-21T00:11:21.157
> 
> 标签：php, mysql, sql-order-by

我想根据另一个查询订购结果。这是我的查询：

```
"SELECT * FROM red_table INNER JOIN blue_table ON red_table.ID = blue_table.ID"; 
```

我想`ORDER BY`使用另一个查询的结果添加：

```
"SELECT date FROM blue_table WHERE status = 'ready'"; 
```

所以决赛将是这样的：

```
"SELECT * FROM red_table INNER JOIN blue_table ON red_table.ID = blue_table.ID ORDERY BY ( SELECT date FROM blue_table WHERE status = 'ready' )"; 
```

我怎么做？或者有可能吗？

**更新：** 我知道我可以使用`ORDER BY blue_table.date`，但该`date`列包含**不是**日期的值。`blue_table`是一种元数据表。所以我需要将列中的值与`date`列匹配，`status`所以我只获取日期值并将其用于排序。也许我不应该称之为专栏`date`，但我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:18:19.807

也许你的意思是这样的？您必须在 select 中添加其他列名

```
SELECT status, date 
  FROM red_table INNER JOIN blue_table ON red_table.ID = blue_table.ID 
   GROUP BY 1, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:16:57.187

```
SELECT * 
FROM red_table 
INNER JOIN blue_table ON red_table.ID = blue_table.ID
WHERE blue_table.status = 'ready'
ORDER BY blue_table.date 
```

请注意，如果`blue_table`不包含连接条件的匹配项，则`red_table`不会显示任何内容。

# angularjs - angularJS orderBy 未反映在原始范围中

> ID：14992374
> 
> 赞同：1
> 
> 时间：2013-02-21T00:11:50.400
> 
> 标签：angularjs

所以我有一个带有我的对象数组的 scope.data 。该数组的数据正在表格中显示，并且是按 x 属性排序的。表格中的显示效果很好，但它本身的 scope.data 对象没有排序以反映表格显示的内容......有没有办法让该对象也作为排序选项进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:13:34.273

OrderBy 不对作用域的变量进行排序，而是对其显示方式进行排序。如果您希望它在 $scope.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T00:27:08.553

您可以在控制器中应用过滤器，而不是将过滤器应用于模板中的 scope.data：

**而不是**：

控制器：

```
$scope.data = [data array]; 
```

模板：

```
{{ data | orderBy:x }} 
```

**更改为**：

控制器：

```
// Inject $filter into controller
$scope.data = $filter('orderBy')('x'); 
```

模板：

```
{{ data }} 
```

**数据绑定**：

如果您的`data`数组被传入，您可以通过设置监视函数来处理更新，以检查原始数组是否更改，然后自动应用于当前的 $scope.data 属性。

# sql - 查看计划作业的文本 - Transact SQL 数据库

> ID：14992375
> 
> 赞同：0
> 
> 时间：2013-02-21T00:11:58.047
> 
> 标签：sql, sql-server

我只使用 VS2012 Ultimate Server Xplorer Pane 来编码和执行我的工作。我曾经添加一个作业调度来在特定时间执行某些任务。

现在我意识到我执行的命令是不正确的。我可以通过在数据库上进行另一个新查询来删除它，然后重新创建一个新的类似作业，但我不想这样做。

我不知道如何修复命令文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:13:34.347

获取 Management Studio，并停止尝试通过 Visual Studio 执行此操作。

[http://www.microsoft.com/en-us/download/details.aspx?id=43351](http://www.microsoft.com/en-us/download/details.aspx?id=43351)

下载 SQLManagementStudio_x64_ENU.exe（除非您出于某种原因使用 x86，在这种情况下选择另一个）。这是〜1GB，不知道为什么，对此感到抱歉。

从 2012 SP1 开始，Management Studio Express 功能齐全，无需许可证（这是第一次发生这种情况）。

连接到您的服务器，展开 SQL Server 代理 > 作业，然后双击您的作业。足够好的用户界面，它可以让你编辑步骤、时间表等，而无需做任何这种为工作生成一个完整的脚本的东西......

# c# - 为什么不是字符串 IReadOnlyList ?

> ID：14992377
> 
> 赞同：5
> 
> 时间：2013-02-21T00:12:05.023
> 
> 标签：c#

C#的字符串已经实现了IEnumerable，并且它有一个索引器和一个定义好的长度，那么为什么不支持新的接口呢？

是没有时间，还是因为其他原因做出的决定？

# c - 为可变高度的字体创建字节数组的任何简单方法？

> ID：14992378
> 
> 赞同：1
> 
> 时间：2013-02-21T00:12:06.163
> 
> 标签：c, arduino, processing

我正在做一个项目，需要我为字母表中的每个字符编写一个带有如下定义的小库。

```
byte _A[5] = {
0b00000001,
0b11101110,
0b11101110,
0b11101110,
0b00000001 }; 
```

我的“字体”将是 16 像素高，比方说 6 宽。有没有什么方法可以生成这个，比如一些甜蜜的网络应用程序，这样我就不必手动完成/编写自己的应用程序来完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:45:14.297

我创建了一个轻量级的网络应用程序来为我完成这个任务。我在 GitHub @ [https://github.com/prismspecs/uint-text-creator](https://github.com/prismspecs/uint-text-creator)上有它，也可以在线使用 @ [http://graysonearle.com/test/16_t.html](http://graysonearle.com/test/16_t.html) 希望有人能使用它.

# objective-c - 将 PURGE 集成到 Mac OS X 应用程序中

> ID：14992379
> 
> 赞同：0
> 
> 时间：2013-02-21T00:12:07.393
> 
> 标签：objective-c, xcode, macos

我想以编程方式运行命令行“purge”。我知道我可以执行 shell 执行并调用“purge”，但我的问题是 Mac OS 10.6 及更低版本中不包含 purge，如果您安装 Developer Tools，将安装它。想知道如何通过我的应用程序运送清除和/或安装它（如果不存在）。

更多信息：

```
平台：MAC OS X
 IDE：XCode 4.6
 朗：Obj-C

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:45:07.460

**不。**

手册中描述了的目的，`purge`因此：

> 清除可用于使用冷磁盘缓冲区缓存近似初始引导条件，以进行性能分析。

它对最终用户系统的唯一影响是在重新填充高速缓存时使系统性能变差。它**不**应该用作“内存清理器”工具的一部分，因为它的唯一影响是负面的。（实际上，不应使用这些工具。）如果系统确实需要内存，则将根据需要清除磁盘缓存。

# javascript - 使用 konacha 集成测试 ember.js

> ID：14992380
> 
> 赞同：2
> 
> 时间：2013-02-21T00:12:21.493
> 
> 标签：javascript, ruby-on-rails-3, ember.js, capybara, konacha

我正在尝试使用 Konacha 测试我的 ember.js 和 rails 应用程序。

我想加载我的 ember 应用程序并能够转换到 root.index 路由，并且应用程序应该加载到 iframe 中。

我已将其简化为这段代码，只是试图在 iframe 中显示应用程序模板。

```
window.App = Ember.Application.create(
  rootElement: 'body'
)

App.store = DS.Store.create(
  revision: 4
  adapter: DS.RESTAdapter.create(bulkCommit: false, namespace: "admin" )
)

App.ApplicationController = Em.Controller.extend()

App.ApplicationView = Em.View.extend
    template: Ember.Handlebars.compile('Hello Rick')

App.Router = Em.Router.extend
    location : Ember.Location.create(
        implementation : 'hash'
    )

    root: Ember.Route.extend
        index: Ember.Route.extend
            route: '/'

App.router = App.Router.create()
App.initialize(App.router)

describe "Testing Ember", ->
    it "Should show Hello Rick", ->
        Em.run ->
            App.router.transitionTo('index') 
```

测试转换到正确的路线，但不显示模板。

如果我在测试中像这样手动附加应用程序视图，我只能让它显示模板

```
App.view = App.ApplicationView.create()
App.view.append() 
```

任何人都可以帮助解决这个问题，因为我想将我的整个应用程序启动到 iframe 中，而不仅仅是其中的一部分。

谢谢瑞克

# meteor - 为什么要确保 Meteor 中的唯一时间戳？

> ID：14992381
> 
> 赞同：1
> 
> 时间：2013-02-21T00:12:28.563
> 
> 标签：meteor

我正在学习[流星](http://www.meteor.com)并阅读`todos`示例：

```
$ curl https://install.meteor.com | sh
$ meteor create --example todos 
```

在`todos/server/bootstrap.js`第 50 行附近，有如下几行。

```
var timestamp = (new Date()).getTime();
for (var i = 0; i < data.length; i++) {
  var list_id = Lists.insert({name: data[i].name});
  for (var j = 0; j < data[i].contents.length; j++) {
    var info = data[i].contents[j];
    Todos.insert({list_id: list_id,
                  text: info[0],
                  timestamp: timestamp,
                  tags: info.slice(1)});
    timestamp += 1; // ensure unique timestamp.
  }
} 
```

我想知道为什么我们需要确保时间戳是唯一的？流星/mongodb 需要它还是仅特定于应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:26:20.250

时间戳不是必需的或不必是唯一的，在这种情况下它的应用程序特定。

这里的用例只是让每个待办事项都有一个连续的时间戳，以便它以正确的顺序显示它，如在客户端 js 中可以看到的那样，最旧的在顶部，最新的在底部。

```
Template.todos.todos = function () {
  ...
  return Todos.find(sel, {sort: {timestamp: 1}});
}; 
```

服务器 js 使用为循环中的每个项目添加 1 微秒来模拟可能与实际用户一起放入的排序顺序。它只做一次来创建一个示例数据库。

如果没有排序顺序/顺序时间戳，待办事项将按记录排序`_id`，这将使它们的顺序充其量是随机的。原因是流星用于`Meteor.uuid()`生成`_id`随机且无顺序的字段。

# asp.net - 由于iis中的工作进程，如何防止100％的CPU使用率

> ID：14992383
> 
> 赞同：61
> 
> 时间：2013-02-21T00:12:48.033
> 
> 标签：asp.net, iis-7.5, windows-server-2008-r2, cpu-usage, worker-process

在使用我自己的 vps、vmware、四核和 4GB 内存的 Windows Server 2008-R2 中，我的 CPU 使用率大部分时间都是 100%。当我打开 Windows 任务管理器并转到资源监视器时，我看到 100% 的使用率是因为`workerprocess.exe`. 我的 IIS 中有 3 个网站。

*   我怎样才能确定哪个网站导致了这种使用
*   如何将其限制为 CPU 使用率的 80%？
*   会不会是 DDOS 攻击？
*   有什么方法可以防止 DDOS 吗？

我在我的 vps 上安装了 eset-nod32，但它没有在日志中显示任何攻击。我已经尝试搜索 IIS 并阻止 DDOS，并且刚刚找到了一个禁止 IP 地址的扩展，但我如何才能找到哪个 IP 地址正在产生流量？

该网站是用`ASP.NET`和编写的`C#`。如何确定该网站上发生了什么以及哪些代码行导致了 CPU 使用率？

另外，我的一个网站应该访问管理员的桌面并读写一些文件。因此，我将其应用程序池->身份（进程模型）更改为本地系统，我不知道它是否与CPU使用率有关。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2015-08-03T22:36:00.717

## 诊断

在诊断 App Pool 导致问题方面，您可以：

1.  选择服务器
2.  转到 IIS > 工作进程

![服务器设置](../Images/b94c91c95ec25582e74a09c63528bcbf.png)

这应该会弹出一个这样的菜单，以便您可以确定哪个 App Pool 正在运行异常。

![工作进程](../Images/7071037274e2fe402cd4687961e388e4.png)

从那里您可以简单地重新启动应用程序池，10 次中有 9 次将解决您遇到的任何直接问题。

## 治疗

除非您经营某种有争议的业务，否则这可能不是 DDOS 攻击。某些代码可能只是挂起，因为它无法通过另一台服务器或陷入循环或错误分配的资源，或者您的应用程序池有一段时间没有被回收。

您可以通过编程方式处理此问题，而无需手动识别、登录和回收应用程序池。只需在您的应用程序池上配置[CPU 属性。](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/cpu)您可以在达到 CPU 阈值一段时间后让它终止（并自动重新启动）您的进程。

在您的情况下，如果您希望它以 80% 的速度重新启动，您可以右键单击应用程序池并转到高级设置并应用以下配置：

![应用程序池高级设置](../Images/dcd81b46d7561172234205ce32cda30b.png)

**注意**：正如[kraken101 所](https://stackoverflow.com/users/1496138/)指出的，随着时间的推移，不同的 IIS GUI 对此的处理方式有所不同。虽然配置值始终为 1/1000 %，但有时 GUI 会占用整个百分比。

您可以将其添加到[您的配置](https://stackoverflow.com/a/8650721/1366033)部分，如下所示：

```
<applicationPools>
   <add name="DefaultAppPool">
     <cpu limit="80000" action="KillW3wp" resetInterval="00:01:00" />
   </add>
</applicationPools> 
```

或者，您可以使用 Powershell 的[WebAdministration 模块](https://technet.microsoft.com/en-us/library/Ee790599.aspx)编写脚本，如下所示：
^(（*[确保启用了 web-scripting-tools](https://stackoverflow.com/a/24393229/1366033)）)

```
Import-Module WebAdministration

$appPoolName = "DefaultAppPool"
$appPool = Get-Item "IIS:\AppPools\$appPoolName"
$appPool.cpu.limit = 80000
$appPool.cpu.action = "KillW3wp"
$appPool.cpu.resetInterval = "00:01:00"
$appPool | Set-Item 
```

## 预防

上述步骤将有助于修复一些问题，但不会真正解决您遇到的任何潜在问题。

以下是一些有关进行性能监控的资源：

*   [对 IIS 7.x 应用程序池中的高 CPU 进行故障排除](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool)
*   [MSDN - 性能调优和监控](https://msdn.microsoft.com/en-us/library/Bb727100.aspx)
*   [IIS 扩展 - Web 性能监视器](http://www.iis.net/downloads/community/2007/01/web-performance-monitor)
*   [使用跟踪对失败的请求进行故障排除](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis)
*   [性能监视器](http://bcl.codeplex.com/releases)
*   [日志解析器](http://www.microsoft.com/en-us/download/details.aspx?id=24659)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-25T20:28:44.840

好吧，这可能需要很长时间才能弄清楚。有几点可以缩小范围：

*   确定是什么杀死了 CPU。我推荐 Process Explorer [http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)
*   确定导致此问题的 AppPool
*   修复你的代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-14T19:44:15.313

您可以看到 w3wp.exe 高 CPU 使用率的原因有很多。我选择了六个常见的原因来涵盖。

1.  ASP.NET Web 应用程序中的高错误率
2.  网络流量增加导致 CPU 高
3.  应用程序依赖问题
4.  垃圾收集
5.  请求在 ASP.NET 管道中的某处被阻塞或挂起
6.  需要优化的低效 .NET 代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-27T21:27:05.330

使用 PerfMon 收集数据并使用 DebugDiag 进行分析。

在搜索类似问题时找到了此链接。

[http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-high-cpu-in-an-iis-7x-application-pool)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-29T17:17:25.303

我最近遇到了同样的问题，并找到了一个对我有用的解决方案，并在很大程度上降低了内存消耗水平。

**解决方案：**

首先找到导致大量内存使用的应用程序。

您可以在任务管理器的详细信息部分找到它。

下一个。

1.  打开**IIS 管理器**。
2.  单击**应用程序池**。您会发现您的系统正在使用许多应用程序池。
3.  现在，您可以从任务管理器中找到导致大量内存消耗的应用程序。将有多个选项，您需要**选择在您的 Web 应用程序的应用程序列中具有“1”的选项。**
4.  当您单击右侧的应用程序池时，您将在编辑应用程序池下看到一个选项**高级设置。**转到高级设置。5.现在在常规类别下将**启用 32 位应用程序**设置为**True**
5.  重新启动 IIS 服务器，或者您可以在任务管理器的性能部分看到消耗量下降。

如果此解决方案适合您，请添加评论以便我知道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T14:16:25.517

如果没有必要，请从您网站的相应应用程序池中关闭“启用 32 位应用程序”。

这在我的本地机器上对我有用

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-25T20:25:17.307

使用[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来定义您的问题。

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2014-03-25T19:37:04.317

我自己最近遇到了这个问题，一旦我确定是哪个 AppPool 导致了问题，解决问题的唯一方法是完全删除该应用程序池并创建一个新的应用程序池供站点使用。

# sql-server - 系统启动时的 Windows 服务行为不同

> ID：14992388
> 
> 赞同：0
> 
> 时间：2013-02-21T00:13:14.273
> 
> 标签：sql-server, windows-services

我有一个 Windows 服务，只要 OPC 服务器（KepServer）的数据发生变化，它就会插入数据库。当我从 Windows 7 的服务任务管理器手动启动服务时，服务插入正确。但服务在系统启动时仅插入一行数据，而所需的行数必须为 20。因为它是 Windows 服务，调试起来很困难，而且也没有给出任何错误。

贾格

操作系统：Windows 7；数据库：SQL Server Express；赢服务：在管理员下运行

我的代码：

```
Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. 
    'Create a new OPC Server object

    ConnectedOPCServer = New OPCServer
    ConnectedOPCServer.Connect("KEPware.KEPServerEx.V5")
    Try
        ' Add the group and set its update rate
        ConnectedServerGroups = ConnectedOPCServer.OPCGroups
        ConnectedGroup = ConnectedServerGroups.Add("Test1")
    Catch ex As Exception
        ' Error handling
    End Try

    ' Set the update rate for the group
    ConnectedGroup.UpdateRate = 400

    ' Subscribe the group so that you will be able to get the data change
    ' callbacks from the server
    ConnectedGroup.IsSubscribed = True

    ItemCount = 3
    OPCItemIDs(1) = "Channel2.Device1.EndDate"
    OPCItemIDs(2) = "Channel2.Device1.Material"
    OPCItemIDs(3) = "Channel2.Device1.BatchSchedule"
    ClientHandles(1) = 1
    ClientHandles(2) = 2
    ClientHandles(3) = 3
    Try
        ' Establish a connection to the OPC item interface of the connected group
        OPCItemCollection = ConnectedGroup.OPCItems
        OPCItemCollection.DefaultIsActive = True
        OPCItemCollection.AddItems(ItemCount, OPCItemIDs, ClientHandles, ItemServerHandles, ItemServerErrors)
    Catch ex As Exception
        ' Error handling
    End Try
    EventLog1.WriteEntry("In OnStart")
End Sub

Public Sub ConnectedGroup_DataChange(ByVal TransactionID As Integer, ByVal NumItems As Integer, ByRef ClientHandles As System.Array, ByRef ItemValues As System.Array, ByRef Qualities As System.Array, ByRef TimeStamps As System.Array) Handles ConnectedGroup.DataChange

    'This is my sub which inserts into database in the event of data change from OPC Server
    Const NoOfItems = 3

    Dim ObjOPCItem As OPCAutomation.OPCItem
    Dim Array_Values(NoOfItems) As Object

    For Each ObjOPCItem In OPCItemCollection
        Array_Values(ObjOPCItem.ClientHandle) = ObjOPCItem.Value
    Next
    ObjOPCItem = Nothing

    Dim sql As String

    sql = "INSERT INTO BatchReport (BatchCode,BatchNumber)VALUES(@AV,@AVa);"

    If Array_Values(3) < 20 Then
        Try
            connection.Open()
            dataadapter.InsertCommand = New SqlCommand(sql, connection)
            dataadapter.InsertCommand.Parameters.Add("@AV", SqlDbType.Int, 4).Value = Array_Values(1)
            dataadapter.InsertCommand.Parameters.Add("@AVa", SqlDbType.Int, 4).Value = Array_Values(3)
            dataadapter.InsertCommand.ExecuteNonQuery()
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
        connection.Close()
    End If
End Sub 
```

# ruby-on-rails - 用户首次登录时显示对话框

> ID：14992389
> 
> 赞同：3
> 
> 时间：2013-02-21T00:13:20.637
> 
> 标签：ruby-on-rails, ruby, devise

我目前正在向用户显示一个对话框，如果他们没有在我的应用程序中关注任何人，但我只想在用户第一次登录时显示这个？每当新用户第一次登录时，他们都没有关注任何人，因此他们的提要没有任何帖子，因此会显示对话框。我正在使用以下代码实现这一目标：

```
 <% if @posts.any? %> 
```

我想在用户第一次登录时显示一个对话框，然后它就再也不会出现了。我知道 Deivse 有一个 sign_in_count 选项，但对话框会一直留在那里，直到用户注销并重新登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:06:59.260

如果您将该[`:trackable`](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Trackable)模块添加到您的设计设置中，您将获得一个`last_sign_in_at`和`sign_in_count`. 其中任何一个都应该为您提供足够多的信息，以了解用户何时/是否之前登录。并且`posts.any?`可能应该消失。

例如：

```
display_dialog unless current_user.last_sign_in_at.present? 
```

或者

```
display_dialog unless current_user.sign_in_count > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:42:23.910

**在控制器中**

```
if @posts.blank? && user.sign_in_count == 1 # no posts and 1st time login
  session[:display_dialog] = true
ens 
```

**在视野中**

```
<%= display_dialog if session[:display_dialog] %> 
```

# iphone - STAssertEqualObjects 比较类

> ID：14992394
> 
> 赞同：0
> 
> 时间：2013-02-21T00:13:42.323
> 
> 标签：iphone, ocunit

我试图覆盖测试用例

返回类对象的方法。

```
-(ClassName *)returnClass{

return _class;
}

-(void)test_ReturnClass{

id returnObj;

returnObj = [aClassNameObj returnClass];
STAssertNotNil(returnObj, @"return Not NULL Value");
STAssertEqualObjects(returnObj, [isKindOfClass: ClassName],@"");

} 
```

我想比较一个节目`STAssertEqualObjects` `isKindOfClass:ClassName`是否有可能，如果是，请告诉我。

@All 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:45:16.217

不清楚你在问什么。

1.  如果要检查返回的对象的类是`ClassName`还是子类，可以使用以下内容：

    ```
    STAssertTrue([returnObj isKindOfClass:[ClassName class]], nil); 
    ```

2.  如果你想检查它是一个`ClassName` **而不是一个子类**（这在单元测试中似乎是允许的，但在普通代码中是不允许的），而是使用这样的东西：

    ```
    STAssertTrue([returnObj isMemberOfClass:[ClassName class]], nil); 
    ```

3.  如果你*真的*想使用 STAssertEqualObjects，你可以使用类似这样的东西（这也检查类是否*相等*；它不允许实例成为子类）：

    ```
    STAssertEqualObjects([returnObj class], [ClassName class], nil); 
    ```

就个人而言，我会坚持使用选项 1。选项 2 是我在生产代码中从未需要使用的东西，选项 3 更糟糕（有一些合法用途`[foo class]`，但将其与另一个类进行`-equals:`比较不是真的是其中之一）。

# lexer - 最简单的嵌套块解析器

> ID：14992395
> 
> 赞同：3
> 
> 时间：2013-02-21T00:13:47.660
> 
> 标签：lexer

我想为嵌套块语法编写一个**简单的解析器，只是分层纯文本。**例如：

```
Some regular text.
This is outputted as-is, foo{but THIS
is inside a foo block}.

bar{
  Blocks can be multi-line
  and baz{nested}
} 
```

最简单的方法是什么？我已经编写了 2 个工作实现，但它们过于复杂。我尝试了全文正则表达式匹配和逐个字符的流式分析。

我必须向人们传授它的工作原理，所以简单是最重要的。我不想引入对 Lex/Yacc Flex/Bison（或 PEGjs/Jison，实际上，这是 javascript）的依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:56:18.053

最近，我一直在为一些纯 Javascript 的项目使用解析器组合器。我将代码提取到一个单独的项目中；[你可以在这里找到它](https://github.com/mattfenwick/UnParse-js)。这种方法类似于@DigitalRoss 建议的递归下降解析器，但在特定于您的解析器的代码和一般的解析器簿记代码之间有更清晰的划分。

满足您需求的解析器​​（如果我正确理解了您的要求）将如下所示：

```
var open  = literal("{"),                 // matches only '{'
    close = literal("}"),                 // matches only '}'
    normalChar = not1(alt(open, close));  // matches any char but '{' and '}'

var form = new Parser(function() {}); // forward declaration for mutual recursion

var block = node('block',
                 ['open',  open       ],
                 ['body',  many0(form)],
                 ['close', close      ]);

form.parse = alt(normalChar, block).parse; // set 'form' to its actual value

var parser = many0(form); 
```

你会像这样使用它：

```
// assuming 'parser' is the parser
var parseResult = parser.parse("abc{def{ghi{}oop}javascript}is great"); 
```

解析结果是一个语法树。

除了回溯之外，该库还可以帮助您在解析器调用之间生成漂亮的错误消息和线程用户状态。我发现后两者对于生成大括号错误消息非常有用，在以下情况下报告问题和有问题的大括号标记的位置：1）有一个打开的大括号但没有关闭；2) 大括号类型不匹配——即`(...]`or `{...)`; 3) 没有匹配的开括号的闭括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:23:11.807

好的选择可能归结为如下：

*   鉴于您的约束，它将是递归下降的。即使没有限制，这也是一个很好的方法。
*   您可以逐个字符地解析（传统）或编写一个词法层，使用本地字符串库来扫描`{`和`}`。无论哪种方式，您都可能希望返回三个终端符号加上 EOF：BLOCK_OF_TEXT、LEFT_BRACE 和 RIGHT_BRACE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T03:44:54.290

```
 char c; 

   boolean ParseNestedBlocks(InputStream i)
      {  if ParseStreamContent(i)
         then {  if c=="}" then return false
                            else return true
              }
         else return false;

   boolean ParseSteamContent(InputStream i)
    {  loop:
         c = GetCharacter(i);
         if c =="}" then return true;
         if c== EOF then return true;
         if c=="{"
             {  if ParseStreamContent(i)
                  {  if c!="}" return false; }
                else return false;
             }
         goto loop
     } 
```

# sql - 更新一行中的所有列（将 xxx-xxx 添加到每一行的开头）

> ID：14992398
> 
> 赞同：0
> 
> 时间：2013-02-21T00:13:59.823
> 
> 标签：sql, sql-server

我必须`UserID`通过添加`DOMAIN-NAME\`到所有行中的每个用户来更新列。我看到了如何在一行中删除所有内容

```
UPDATE Employee
SET EMP_Name = REPLACE(Emp_name, 'xx\', '') 
```

但是我该如何反过来呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:15:33.087

```
UPDATE Employee
SET EMP_Name = 'xx\' + Emp_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:33:58.907

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/aa655/2)**

```
UPDATE Employee
SET UserID  = 'DOMAIN-NAME\' + UserID 
```

结果：

```
| ID |    TYPE |                          USERID |
--------------------------------------------------
|  1 |   Email | DOMAIN-NAME\admin@sqlfiddle.com |
|  2 | Twitter |          DOMAIN-NAME\@sqlfiddle | 
```

# node.js - Node.js Jsdom 返回 [Error: socket hang up] 代码：'ECONNRESET' }

> ID：14992403
> 
> 赞同：0
> 
> 时间：2013-02-21T00:14:30.637
> 
> 标签：node.js, jsdom

尝试在 nodejs 下使用 jsdom 并收到此错误：

[错误：套接字挂起]代码：'ECONNRESET'}

使用 NodeJs v0.8.20，Ubuntu 12.04

```
 var jsdom = require("jsdom");
    jsdom.env({
                    html: 'http://www.google.com',
                    scripts: ['http://code.jquery.com/jquery.js'],
                    done: function (errors, window) { console.log(errors); }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:19:25.040

[http://clock.co.uk/tech-blogs/preventing-http-raise-hangup-error-on-destroyed-socket-write-from-crashing-your-nodejs-server](http://clock.co.uk/tech-blogs/preventing-http-raise-hangup-error-on-destroyed-socket-write-from-crashing-your-nodejs-server)

基本上有一个错误，套接字挂起错误被抑制，但在节点 0.8.20 中它不再被抑制。但是，大多数模块还没有侦听该错误事件。

所以...降级你的 node.js 版本并等到 jsdom 修复它，或者使用域。很确定问题出在使用旧版本请求的 jsdom 上。或者你不能使用 JSDOM 的 HTTP 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:46:35.410

这意味着对方意外关闭了连接。

当我尝试运行您的脚本时，我得到了这个：

```
/Users/isaacs/dev/js/x/node_modules/jsdom/lib/jsdom.js:178
    features   = JSON.parse(JSON.stringify(window.document.implementation._fea
                                                          ^
TypeError: Cannot read property 'implementation' of undefined
    at exports.env.exports.jsdom.env.processHTML (/Users/isaacs/dev/js/x/node_modules/jsdom/lib/jsdom.js:178:59)
    at Request.exports.env.exports.jsdom.env [as _callback] (/Users/isaacs/dev/js/x/node_modules/jsdom/lib/jsdom.js:283:9)
    at Request.init.self.callback (/Users/isaacs/dev/js/x/node_modules/jsdom/node_modules/request/main.js:127:22)
    at Request.EventEmitter.emit (events.js:99:17)
    at Request.<anonymous> (/Users/isaacs/dev/js/x/node_modules/jsdom/node_modules/request/main.js:767:16)
    at Request.EventEmitter.emit (events.js:126:20)
    at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/Users/isaacs/dev/js/x/node_modules/jsdom/node_modules/request/main.js:729:14)
    at IncomingMessage.EventEmitter.emit (events.js:126:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23) 
```

# java - Java，DOM 节点上的 XPath

> ID：14992405
> 
> 赞同：1
> 
> 时间：2013-02-21T00:14:41.417
> 
> 标签：java, xml, dom, xpath

我想将一个非常大的 XML 文件加载到 DOM 树中（使用 JAXP），进行一些修改并在生成的 DOM 上运行 XPath 查询。

我们使用我们自己的 DOM 实现，它是使用延迟加载实现的（即一开始只从文件中加载 DOM 的前两层，如果调用 getChildNodes()/etc.，我们将返回文件并加载更多层）。这非常慢，但是，我们能够加载更大的文件，尤其是如果我们只使用文件的一部分。

我的问题：XPath 在 XML (afaik) 上使用了不同的视图。我很好奇默认的 Oracle JDK 实现现在是否正在将整个 DOM 文档转换为一些内部 XPath 文档（这真的很糟糕，因为它会急切地加载整个文档），或者 XPath 实现是否能够直接在我们的DOM 树（即，如果 XPath 可以在已加载的元素中进行评估，则无需进一步加载）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:20:23.847

这可以用几行代码进行测试，只需将您的 DOM 提供给 XPath 评估器，并在您的 DOM 方法中放置一些断点/调试打印。如果它们被调用以获取不应检索的元素，则它会构建自己的树。示例：尝试仅查询文档的第一个孩子并查看它将实际尝试检索的内容。

如果您的文件太大，您还可以检查完全不同的方法吗？称为[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:52:50.440

我们的 DOM 实现现在已经完成，因此我现在可以测试一下：

不幸的是，官方的 JDK 实现以及当前的 Xalan-J 实现都在评估路径之前将整个 DOM 树转换为内部数据结构。

即使您没有惰性 DOM 实现，这也应该非常糟糕，无论如何这真的很糟糕......

# c# - C# LINQ 方法链中分配的编译器警告？

> ID：14992407
> 
> 赞同：4
> 
> 时间：2013-02-21T00:14:44.167
> 
> 标签：c#, visual-studio, iterator, ienumerable

我刚刚被 LINQ 方法链中的一个意外赋值表达式所吸引。这导致在 foreach 循环中使用的枚举器 (IEnumerable) 永远不会进入循环块，而是遍历所需的集合项。这是用于创建迭代器的错误表达式的简化示例：

```
itemCollection.Where(theItem => theItem.status = false); 
```

显然，使用这样的简单 LINQ 方法链相对容易捕获，但在更复杂的情况下，尤其是那些涉及多个迭代器或由复杂类提供的迭代器的情况下，追踪错误可能会浪费时间。是否有在 LINQ 方法链中标记分配的 Visual Studio 设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:27:19.537

~~[ReSharper](http://www.jetbrains.com/resharper/)会将其标记为“未在任何表达式中使用分配的值”。~~正如 Virtlink 指出的那样，在对对象字段进行分配的情况下，Resharper 不会给出错误。我不认为有 VS 设置，但我很确定你可以为此编写一个插件。

# python - 理解变革算法

> ID：14992411
> 
> 赞同：18
> 
> 时间：2013-02-21T00:15:05.067
> 
> 标签：python, algorithm, dynamic-programming

我正在寻找一个很好的解决方案来解决[变革问题](http://en.wikipedia.org/wiki/Change-making_problem)，我发现了这段代码（Python）：

```
target = 200
coins = [1,2,5,10,20,50,100,200]
ways = [1]+[0]*target
for coin in coins:
    for i in range(coin,target+1):
        ways[i]+=ways[i-coin]
print(ways[target]) 
```

我理解代码的字面意思没有问题，但我不明白它为什么起作用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T01:19:24.470

要获得元素等于“a”或“b”或“c”（我们的硬币）且总和为“X”的所有可能集合，您可以：

*   取所有这样的集合，总和为 Xa，并为每个集合添加一个额外的“a”。
*   取所有这些总和为 Xb 的集合，并为每个集合添加一个额外的“b”。
*   取所有这些总和为 Xc 的集合，并为每个集合添加一个额外的“c”。

所以你能得到 X 的方法数是你能得到 Xa 和 Xb 和 Xc 的方法数之和。

```
ways[i]+=ways[i-coin] 
```

休息是简单的复发。

额外提示：一开始你可以用一种方式设置总和为零（空集）

```
ways = [1]+[0]*target 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T01:38:10.813

这是[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)的经典例子。它使用缓存来避免像 3+2 = 5 这样计算两次的陷阱（因为另一种可能的解决方案：2+3）。递归算法落入了这个陷阱。让我们关注一个简​​单的例子， where`target = 5`和`coins = [1,2,3]`. 您发布的代码很重要：

1.  3+2
2.  3+1+1
3.  2+2+1
4.  1+2+1+1
5.  1+1+1+1+1

而递归版本很重要：

1.  3+2
2.  2+3
3.  3+1+1
4.  1+3+1
5.  1+1+3
6.  2+1+2
7.  1+1+2
8.  2+2+1
9.  2+1+1+1
10.  1+2+1+1
11.  1+1+2+1
12.  1+1+1+2
13.  1+1+1+1+1

递归代码：

```
coinsOptions = [1, 2, 3]
def numberOfWays(target):
    if (target < 0):
        return 0
    elif(target == 0):
        return 1
    else:
        return sum([numberOfWays(target - coin) for coin in coinsOptions])
print numberOfWays(5) 
```

动态规划：

```
target = 5
coins = [1,2,3]
ways = [1]+[0]*target
for coin in coins:
    for i in range(coin, target+1):
        ways[i]+=ways[i-coin]
print ways[target] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T01:39:02.780

代码背后的主要思想如下：“在每一步都有`ways`办法改变`i`给定硬币的金额`[1,...coin]`”。

因此，在第一次迭代中，您只有一枚面额为 的硬币`1`。我相信很明显，只有一种方法可以让任何目标都只使用这些硬币。在这一步上，`ways`数组看起来像（从to`[1,...1]`的所有目标只有一种方式）。`0``target`

在下一步中，我们将面额为 的硬币添加`2`到前一组硬币中。`0`现在我们可以计算每个目标从到有多少​​变化组合`target`。显然，组合的数量只会增加目标>= `2`（或添加新硬币，一般情况下）。所以对于一个目标等于`2`组合的数量将是`ways[2](old)`+ `ways[0](new)`。通常，每次`i`引入新硬币时，我们都需要添加`1`先前的组合数量，其中新组合仅由一枚硬币组成。

对于`target`> `2`，答案将包括“所有硬币都小于的数量的所有组合”和“所有硬币都小于自身的数量的所有组合`target`”`coin`的`coin`总和`coin`。

这里我描述了两个基本步骤，但我希望它很容易概括。

让我向您展示一个计算树`target = 4`和`coins=[1,2]`：

> 给定硬币的方式[4] = [1,2] =
> 
> 方式[4] 给定硬币=[1] + 方式[2] 给定硬币=[1,2] =
> 
> 1 + 方式[2] 给定硬币=[1] + 方式[0] 给定硬币=[1,2] =
> 
> 1 + 1 + 1 = 3

因此，有三种方法可以进行更改：`[1,1,1,1], [1,1,2], [2,2]`。

上面给出的代码完全等同于递归解决方案。如果您了解[递归解决方案](http://www.algorithmist.com/index.php/Coin_Change#Recursive_Formulation)，我敢打赌您了解上面给出的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-12T22:12:48.003

您发布的解决方案是此代码的摘要版本。

```
 /// <summary>
    /// We are going to fill the biggest coins one by one.
    /// </summary>
    /// <param name="n"> the amount of money </param>
    public static void MakeChange (int n)
    {
        int n1, n2, n3; // residual of amount after each coin
        int quarter, dime, nickel; // These are number of 25c, 10c, 5c, 1c
        for (quarter = n/25; quarter >= 0; quarter--)
        {
            n1 = n - 25 * quarter;
            for (dime = n1/10; dime >= 0; dime--)
            {
                n2 = n1 - 10 * dime;
                for (nickel = n2/5; nickel >= 0 && (n2 - 5*nickel) >= 0; nickel--)
                {
                    n3 = n2 - 5 * nickel;
                    Console.WriteLine("{0},{1},{2},{3}", quarter, dime, nickel, n3); // n3 becomes the number of cent.
                }
            }
        }
    } 
```

# c# - 如何从 c# 中的 Shapefile 导出 WKT？

> ID：14992412
> 
> 赞同：6
> 
> 时间：2013-02-21T00:15:05.493
> 
> 标签：c#, geospatial, shapefile, wkt

我有一个包含数千个多边形的[Shapefile 。](http://en.wikipedia.org/wiki/Shapefile)

我需要用 C# 读取这个文件并输出[WKT 格式的](http://en.wikipedia.org/wiki/Well-known_text)字符串列表。

我查看了[DotSpatial](http://dotspatial.codeplex.com/)和["CatFood" ESRI Shapefile Reader](http://shapefile.codeplex.com/)。我可以很好地加载 shapefile，但我不知道如何导出为 WKT。

在 DotSpatial 中，我能找到的唯一示例使用 a `WktWriter`，它采用`Geometry`. 我不知道如何`Geometry`从`Shape`.

有没有更适合这个的图书馆？

**更新**

感谢 mdm20 的回答，我能够写出以下内容：

```
using (var fs = FeatureSet.Open(path))
{
    var writer = new WktWriter();
    var numRows = fs.NumRows();
    for (int i = 0; i < numRows; i++)
    {
        var shape = fs.GetShape(i, true);                    
        var geometry = shape.ToGeometry();
        var wkt = writer.Write((Geometry) geometry);
        Debug.WriteLine(wkt);
    }
} 
```

我最初错过它的原因是因为我正在关注[这个示例](http://dotspatial.codeplex.com/wikipage?title=CycleThroughVerticesCS&referringTitle=Desktop_SampleCode)，它使用`fs.ShapeIndices`而不是`fs.GetShape()`. 返回的不是 a `Shape`，而是 a `ShapeRange`，我无法将其转换为几何。

新问题

1.  我应该设置`fs.IndexMode = true`吗？为什么或者为什么不？它似乎对性能或结果没有任何影响。
2.  `fs.GetShape()`接受一个名为`getAttributes`. 我的形状确实有属性，无论设置为真还是假，它们似乎都是通过的。同样，无论哪种方式都没有明显的性能影响。这是预期的吗？
3.  通过这种方式获取它们，WKT 是否代表存储在 shapefile 中的实际值？或者他们是否以任何方式转变？它是否考虑了 dotSpatial 的任何默认设置，我是否应该担心更改它们？
4.  我要导入的 shapefile 是[世界时区地图](http://efele.net/maps/tz/world/)。它确实包含一个 .prj 文件。dotSpatial 是否考虑到这一点，如果没有 - 我是否需要做任何额外的事情？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:43:50.637

在 DotSpatial 中，Shape 类有一个 ToGeometry 方法。

```
/// <summary>
/// Converts this shape into a Geometry using the default factory.
/// </summary>
/// <returns>The geometry version of this shape.</returns>
public IGeometry ToGeometry()
{
    return ToGeometry(Geometry.DefaultFactory);
} 
```

**编辑**

我只使用点空间的东西进行投影，所以我真的帮不了你太多。

1-2：不确定。如果你想看看他们做了什么，代码是开源的

3：WKT 是几何图形的人类可读文本表示。我会假设它与文件的值相同，但我不知道。再次..查看点空间源代码

4: prj 文件告诉你几何体的投影。根据你想用它做什么，你可能需要重新投影它。例如，必应地图和谷歌地球之类的东西使用墨卡托投影。点空间投影库很好，可以轻松地将几何图形从一个投影转换到另一个投影。

我对 shapefile 做了很多工作。如果您有更多问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T08:42:32.380

尝试这个：

```
private void button1_Click(object sender, EventArgs e)
    {            
        String result = "";

        OpenFileDialog openfile = new OpenFileDialog();
        openfile.Filter = "Shapefile (*.shp)|*.shp|All files (*.*)|*.*";
        openfile.ShowDialog();
        String filePath = openfile.FileName.Replace(".shp", "").Replace(@"\", @"\\");
        String[] a = filePath.Split('\\');

        String shpName = a[a.Length-1];

        try
        {

            SQLiteConnection.CreateFile(openfile.FileName.Replace(".shp", "")+".sqlite");

            System.Data.SQLite.SQLiteConnection connection = new SQLiteConnection(@"Data Source=" + openfile.FileName.Replace(".shp", "") + ".sqlite");

            connection.Open();
            object returnvalue = new SQLiteCommand("SELECT load_extension('libspatialite-2.dll')", connection).ExecuteScalar();

            System.Data.SQLite.SQLiteCommand commande = new SQLiteCommand(connection);
            commande.CommandText = "CREATE virtual TABLE "+shpName+"VT USING VirtualShape('" + filePath + "', 'CP1252', 4326);";

            commande.ExecuteScalar();

            commande.CommandText = "CREATE TABLE geom AS SELECT * FROM " + shpName + "VT;";
            commande.ExecuteScalar();

            commande.CommandText = "drop table " + shpName + "VT";
            commande.ExecuteScalar();

            commande.CommandText = "ALTER TABLE geom ADD COLUMN WKT TEXT;";
            commande.ExecuteScalar();

            commande.CommandText = " UPDATE  geom set WKT= ST_AsText(Geometry);";
            commande.ExecuteScalar();

           // the test commande

            commande.CommandText = "SELECT WKT FROM geom;";

            result = (string)commande.ExecuteScalar();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);

        }
        MessageBox.Show(result);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-15T05:54:08.130

首先打开shapefile，然后得到它的特征基本几何......

```
 IFeatureSet fb = FeatureSet.Open("F:\\Test_value\\test.shp");
        List<string> str = new List<string>();
        foreach (IFeature ff in fb.Features)
        {
            Geometry geometry = ff.BasicGeometry as Geometry;
            WktWriter wktWriter = new WktWriter();
            str.Add(wktWriter.Write(geometry));          
        } 
```

# ios - 当地址栏中只有前缀时，使 iphone webview 转到不同的网址

> ID：14992415
> 
> 赞同：0
> 
> 时间：2013-02-21T00:15:11.720
> 
> 标签：ios, objective-c, iphone, xcode

我目前正在做一个学校项目，我的 iphone 应用程序被拒绝了两次，我知道为什么。我的问题的解决方案虽然很困难。在这里，我有来自我的项目的 .m 文件，并且我有一个基于 Web 的应用程序。现在，如果地址栏中只有 http://，它会显示一个错误，指出找不到 url 的主机，因为它只是 http://，我的应用程序因此被拒绝。我想要它做的是当地址栏中只有 http:// 时，让它转到不同的网站。请帮忙！！另外我在 iOS 6

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(void)bannerViewDidLoadAd:(ADBannerView *)banner{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:1];
    [UIView commitAnimations];
}
-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:0];
    [UIView commitAnimations];
}

-(IBAction)press {

    label.hidden = 0;
    addressBar.hidden = 0;
    browserPlace.hidden = 1;
    button.hidden = 1;
    button2.hidden = 0;

}
-(IBAction)press2
{
    label.hidden = 1;
    addressBar.hidden = 1;
    browserPlace.hidden = 0;
    button.hidden = 0;
    button2.hidden = 1;
}
- (void)viewDidLoad
{
    label.hidden = 1;
    addressBar.hidden = 1;
    browserPlace.hidden = 0;
    button.hidden = 0;
    button2.hidden = 1;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    addressBar.text = [defaults objectForKey:@"history"];

    [self searchBarSearchButtonClicked:addressBar];

}

-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
    [browserPlace loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[self parseUrl:addressBar.text]]]];

}

-(NSString*) parseUrl: (NSString*) url
{
    if ([url hasPrefix:@"http://"] || [url hasPrefix:@"https://"]) 
        return url;
    else
        return [NSString stringWithFormat:@"http://%@", url];

}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    return YES;
}

-(void)webViewDidStartLoad:(UIWebView *)webView
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:addressBar.text forKey:@"history"];

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
    label2.hidden = 0;

}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    label2.hidden = 1;
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"%@", [error description]);
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
    label2.hidden = 1;
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:[error description] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

}

-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:YES animated:YES];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES];
}

-(void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:NO animated:YES];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];
}

-(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:58:12.910

更新你的`parseUrl:`方法。检查 URL 是否只是“http://”：

```
- (NSString *)parseUrl:(NSString *)url {
    if (url.length == 0 || [url isEqualToString:@"http://"]) {
        return @"http://www.someplacecool.com"; // put your desired URL here
    } else if ([url hasPrefix:@"http://"] || [url hasPrefix:@"https://"]) {
        return url;
    } else {
        return [NSString stringWithFormat:@"http://%@", url];
    }
} 
```

如果用户输入任何其他无效 URL，您还应该添加其他错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:15:53.237

我认为你可以利用

*   (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType

您可以检查 [请求 URL] 及其方案。

尝试在此方法中将 URL 重定向到不同的 URL，并返回相应的 BOOL 值 (YES/NO)。

# actionscript-3 - 我可以覆盖用 AS3 编写的应用程序中的 HOME 键吗？

> ID：14992423
> 
> 赞同：1
> 
> 时间：2013-02-21T00:15:56.953
> 
> 标签：actionscript-3, air, home-button

嗨，我正在使用 AS3 做一个类似应用程序的“信息亭”。我想更改 android 手机 Home 键的行为。使公众用户无法访问安卓操作系统。所以已经看到这个问题已经被问了很多，但在 AS3 中没有找到答案。这个主题与我正在寻找的内容非常相似

[Android 平板电脑不会触发 KeyboardEvent.KEY_DOWN](https://stackoverflow.com/questions/9489958/android-tablet-doesnt-fire-keyboardevent-key-down/9491650#9491650)

但我真的没有看到可以解决我的问题的答案。

我看到的大多数答案都在 Java 中。

我已经为后退按钮完成了它，并且效果很好。

那么有没有办法在 AS3 应用程序中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:28:22.573

也许你可以沿着这些思路：

```
if (Capabilities.cpuArchitecture=="ARM") {
    NativeApplication.nativeApplication.addEventListener(KeyboardEvent.KE Y_DOWN, handleKeys, false, 0, true);
} 
```

您可以在此处查看详细信息：[http ://forums.adobe.com/message/4075374](http://forums.adobe.com/message/4075374)

# actionscript-3 - AS3 中的空格键字符问题

> ID：14992428
> 
> 赞同：0
> 
> 时间：2013-02-21T00:16:12.907
> 
> 标签：actionscript-3, virtual-keyboard

我正在使用虚拟键盘，但我的空格键给了我一些问题。当它被按下时，它创造了空间，但它没有物理显示。当我按下一个普通的字母或数字键时，空格现在是可见的，字母在它前面。键盘和空格代码几乎相同。

```
function _keys(event:MouseEvent):void
{
    textSelect.setSelection(textSelect.length, textSelect.length);

    if(electoff.currentFrame == 2)
    {
        ajWidth(event);
    }

    if(terminalinput.currentFrame == 2)
    {
        TrWidth(null);
    }

    if (control == "on" && menu.visible == false ) 
    {
        if (! shift)
        {
            textSelect.appendText(letterButtonSmall[event.target.name]);
        }
        else
        {
            textSelect.appendText(letterButtonCaps[event.target.name]);
            shift = false; 
        }

        savedTxt = textSelect.text;
        textSelect.setSelection(textSelect.length, textSelect.length);

        if(textSelect.width <= 134.05 && textSelect == inputClips.inputTxt )
        {
            textSelect.autoSize = TextFieldAutoSize.LEFT;
            textSelect.x = 1.2;
        }

        if (textSelect.width >= 134.05 && textSelect == inputClips.inputTxt)
        {
            textSelect.autoSize = TextFieldAutoSize.LEFT;
            textSelect.x = 1.2 - (textSelect.width-134.05);
        }
    }

    textSelect.setSelection(textSelect.length, textSelect.length);

    if(electoff.currentFrame == 2)
    {
        ajWidth(event);
    }

    if(terminalinput.currentFrame == 2)
    {
        TrWidth(null);
    }

    focuser();
    strehrows3();
    _fontSize();
}

//spaces
key_space.addEventListener(MouseEvent.CLICK, spaceClickListener);
function spaceClickListener(e:MouseEvent):void
{
    strehrows3();
    textSelect.setSelection(textSelect.length,textSelect.length);
    if (electoff.currentFrame == 2)
    {
        ajWidth(null);
    }
    if (terminalinput.currentFrame == 2)
    {
        TrWidth(null);
    }
    if (control == "on" && menu.visible == false )
    {
        if (! shift)
        {
            textSelect.appendText(" ");
        }
        else
        {
            textSelect.appendText(" ");

            shift = false;
        }
        savedTxt = textSelect.text;
        textSelect.setSelection(textSelect.length,textSelect.length);
        if (textSelect.width <= 134.05 && textSelect == inputClips.inputTxt )
        {
            textSelect.autoSize = TextFieldAutoSize.LEFT;
            textSelect.x = 1.2;
        }
        if (textSelect.width >= 134.05 && textSelect == inputClips.inputTxt)
        {
            textSelect.autoSize = TextFieldAutoSize.LEFT;
            textSelect.x =  1.2-(textSelect.width-134.05);
        }
    }
    textSelect.setSelection(textSelect.length,textSelect.length);
    if (electoff.currentFrame == 2)
    {
        ajWidth(null);
    }
    if (terminalinput.currentFrame == 2)
    {
        TrWidth(null);
    }

        focuser();
        strehrows3();
        _fontSize();
} 
```

现在我怀疑 autoSize 是造成我的问题的原因，但我不能确定。

想知道一些创造性的修复可能会起作用，我一直在考虑是否有这样的事情使用空白符号。

# javascript - 是否有类似于 sessionStorage 但具有多维键的东西？

> ID：14992429
> 
> 赞同：4
> 
> 时间：2013-02-21T00:16:14.373
> 
> 标签：javascript, html, session-variables, session-storage

我想在本地保存树状结构的值，然后根据用户交互检索它们。经过一些研究，我发现`sessionStorage`（或`localStorage`）可能是一个很好的方法来做到这一点。但我无法保存嵌套数据。

通常你有：

```
sessionStorage['key'] = 'someString'; 
```

我试图实现类似的东西：

```
sessionStorage['key1'] = [];
sessionStorage['key1']['key2'] = 'someString'; 
```

但我有一个`undefined`错误。

我检查了其他几个存储库，但它们只提供单个键值对选项。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T00:19:29.417

使用 JSON 将嵌套数据序列化为字符串，然后在需要将其作为对象访问时对其进行解码...

```
var nested = {some:{nested:'object'}}
var asJson = JSON.stringify(nested)
sessionStorage['data'] = asJson
var asObject = JSON.parse(sessionStorage['data']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:21:31.917

来自 developer.mozilla.com：

> DOM 存储机制是一种方法，通过它可以安全地存储字符串键/值对并在以后检索以供使用。

Hence I think you cannot store array/dictionary directly in session storage. I highly suggest you that check this link out: [https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

# cakephp - 为什么我的闪信不显示？CakePHP 2.2.5

> ID：14992436
> 
> 赞同：2
> 
> 时间：2013-02-21T00:17:09.700
> 
> 标签：cakephp, cakephp-2.2

为什么当我调用用户控制器时我的 flash 消息不显示？这是我的代码：

应用控制器.php

```
<?php
App::uses('Controller', 'Controller');
class AppController extends Controller {
    public $helpers=array('Session');
    public $components = array('Session');
    public function beforeFilter()
    {
        parent::beforeFilter();
        $this->Session->setFlash('This flash was set in AppController::beforeFilter.');
    }
} 
```

用户控制器.php

```
<?php
    class UsersController extends AppController {
        public function add() {
            $this->Session->setFlash('This flash was set in UsersController::add.');
        }
    } 
```

我的布局...default.ctp

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <?php echo $this->Html->charset(); ?>
    <title>My website.</title>
    <?php
        echo $this->Html->meta('icon');
        echo $this->Html->css('cake.generic');
        echo $this->fetch('meta');
        echo $this->fetch('css');
        echo $this->fetch('script');
    ?>
</head>
<body>
    <div id="container">
        <div id="header"></div>
        <div id="content">
            <?php echo $this->Session->flash(); ?>
            <?php echo $this->fetch('content'); ?>
        </div>
        <div id="footer"></div>
    </div>
</body>
</html> 
```

添加.ctp

```
<p>This is the add view</p> 
```

我正在为我的页面使用内置的页面控制器。每当我通过页面控制器访问页面时，它都会正确显示具有正确视图的 Flash 消息。但是当我转到 /users/add 时，它显示了正确的视图，但没有显示 flash 消息。有谁知道为什么？这几天我对此感到沮丧。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:58:24.943

在 中进行以下更改`usercontroller`。

```
<?php
class UsersController extends AppControlle
{

    function beforeFilter()
    {
        parent::beforeFilter();
    }

    public function add()
    {
        $this->Session->setFlash('This flash was set in UsersController::add.');
    }
}
```

# android - 在长期运行的 Android 服务中，成员变量有时会变为 null

> ID：14992437
> 
> 赞同：2
> 
> 时间：2013-02-21T00:17:16.527
> 
> 标签：android

我有一个 Android 服务，它在该服务的成员变量中收集一些数据，这些数据偶尔（远非总是）变为 null。无论此服务在一系列 Android 设备上运行多长时间，我自己都无法生成此服务，因此我想知道是否有人在以下操作中看到任何错误（请注意，这是一个仅说明问题的精简示例）：

```
public class CollectionService extends Service {
    private final CollectionServiceBinder binder = new CollectionServiceBinder();
    private PowerManager.WakeLock wakeLock;
    private UserData userData; // this is the object that sometimes becomes null

    @Override
    public IBinder onBind(Intent intent) {
        return binder;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        wakeLock = ((PowerManager) getSystemService(POWER_SERVICE)).newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "AppId");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        if (wakeLock != null && wakeLock.isHeld()) {
            wakeLock.release();
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    }

    public void startCollecting() {
        userData = new UserData();
        Notification notification = new Notification();
        // initializing notification variable

        startForeground(0xABCD, notification);

        // trigger logic that collects relevant data here, just imagine some Runnable that's triggered on a certain interval and adds data to the UserData value object.
    }

    public UserData finishCollecting() {
        try {
            userData.setFinishDate(new Date()); // throws NullPointerException every now and then.       return userData;
        } finally {
            if (wakeLock.isHeld()) {
                wakeLock.release();
            }
            stopForeground(true);
            userData = null;
        }
    }

    public boolean isCollecting() {
        return userData != null;
    }

    public class CollectionServiceBinder extends Binder {
        public CollectionService getService() {
            return CollectionService.this;
        }
    }
} 
```

该服务是在使用...的活动中启动的

```
Intent i = new Intent(this, CollectionService.class);
getApplicationContext().startService(i);
getApplicationContext().bindService(i, serviceConnection, BIND_AUTO_CREATE); // just so the activity has a handle and can call startCollecting()/finishCollecting() 
```

...并且在 onDestroy() 中使用 ...

```
getApplicationContext.unbindService(serviceConnection); 
```

ServiceConnection 类如下所示：

```
public class MyServiceConnection implements ServiceConnection {
    private CollectionService service;

    @Override
    public void onServiceConnected(ComponentName componentName, IBinder binder) {
        service = ((CollectionService.CollectionServiceBinder) binder).getService();
    }

    @Override
    public void onServiceDisconnected(ComponentName componentName) {
        service = null;
    }

    public CollectionService getCollectionService() {
        return service;
    }
} 
```

并且 startCollecting 在这样的 OnClickListener 中触发，以防止启动两次：

```
if (!serviceConnection.getCollectionService().isCollecting()) {
    serviceConnection.getCollectionService().startCollecting();
} 
```

我相信这一切都应该没问题，但有时 userData （如代码示例中所述）将为空。同样，这种情况很少发生（在 Google Play 上安装了 50.000 多个活动设备时，我在一年中刚刚收到 50 份报告，但我仍然希望每个人都能够享受该应用程序）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:30:54.977

我看不到你调用的地方`startCollecting`是相关的，因为那是你正在初始化的地方`userData`，但可能发生的是你的服务因任何原因被杀死然后重新启动。您需要做一些事情来根据需要或至少延迟加载来持久化/重新加载数据，`userData`以便它们重新开始。

您在这里没有所有代码，但还可能需要注意的是，您只在 onCreate 中获取了唤醒锁，但在`finishCollecting`. 如果您有可能调用`startCollecting`, `finishCollecting`，然后`startCollecting`再次调用相同的`Service`，您将在`Service`没有保持唤醒锁的情况下结束运行。

# python - 为什么我会收到 ELIF 无效语法？

> ID：14992447
> 
> 赞同：0
> 
> 时间：2013-02-21T00:19:10.060
> 
> 标签：python

我看不出以下代码有什么问题：

```
 elif choice == "2":
    while True:
        PhoneSearch = raw_input("What is their telephone number? : ")
        conn = sqlite3.connect('SADS.db')
        cur = conn.cursor()
        cur.execute("SELECT * FROM customers WHERE Telephone = (?)",(PhoneSearch,))
        row = cur.fetchone()
        if row:
            CustID = row[0]
            print "|------------------------------------------|"
            print "|Customer ID : " , row[0]
            print "|Forename : " , row[1]
            print "|Surname : " , row[2]
            print "|Address Line 1 : " , row[3]
            print "|Address Line 2 : " , row[4]
            print "|City : " , row[5]
            print "|Postcode : " , row[6]
            print "|Telephone number : " , row[7]
            print "|E-Mail : " , row[8]
            while True:
                print '|Do you want to see what seats', row[1]
                choice = raw_input("|Choice Y/N:")
                if choice == 'Y':
                    cur.execute("SELECT * FROM seats WHERE CustID = (?)", (CustID,))
                    rowseat = cur.fetchone()
                    if rowseat: # or if rowseat is not None, etc.
                        print "|Seats booked:" , rowseat[0]
                        print "|------------------------------------------|"
                        break
                    else:
                        print("database doesn't have correct info")
            else:
                print("Na") 
```

然而，我在顶部的 Elif 语句上遇到语法错误。请告诉我为什么会发生这种情况或错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:24:05.070

Python 期望语句后有一个缩进块`elif`，与`if`, `while`or`else`语句相同。在您的示例中，后面的所有内容都`elif`应该缩进。

# c - 访问字符串中的元素？

> ID：14992450
> 
> 赞同：2
> 
> 时间：2013-02-21T00:19:22.850
> 
> 标签：c

我必须将给定的二进制输入（例如 1101）转换为十进制，但输入不是字符串数组或整数（传递的参数是`const char *binstr`）。我应该如何访问二进制数的每个单独的数字，以便我可以对每个数字执行 pow(x,y) 并将它们加在一起以获得十进制数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:33:10.030

您可以尝试使用从二进制转换为十进制的程序

```
char *binstr = "1011011";
int   num = 0, sum = 0, ctr = 0;

ctr = strlen(binstr) - 1;
do{
    sum += ((binstr[ctr] & 0x1) << num);
    ctr--;
    num ++;
}while(ctr >= 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:27:28.457

您已经制作了一个`c string`，并且可以通过类似于数组的方式获取每个字符：

`input[i]`

这是将二进制字符串拆分为单个位（字符）并打印出来的示例： http: [//cfiddle.net/wYtKJv](http://cfiddle.net/wYtKJv)

您可以使用循环：

```
while(i<100){

if(binstr[i]== '\0'){
   break;
}

printf("First Bit:\n%c\n\n",binstr[i]);
i++;
} 
```

由于 C 字符串是空终止的，因此您可以检查如果我们命中的字符是否`'\0'`进入`break`循环。

在循环中，您还可以将它们转换`chars`为`ints`并将它们存储在某个地方（可能是数组），您可以在其中访问它们进行计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:20:47.580

```
binstr[0];
binstr[1];
binstr[2]; 
```

ETC

或者你可以通过指针来完成

```
char* s = binstr;
unsigned long x =0;
while(*s) { x = x << 1; x |= (*s == '1' ? 1:0); s++;} 
printf("the decimal of %s is %ul", binstr, x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:22:35.103

`const char *`通常指的是 C 字符串。您可以使用[`strtol(3)`](http://www.manpagez.com/man/3/strtol/)：

```
int x = strtol(binstr, NULL, 2); 
```

# c++ - 错误：在“A”之前需要“typename” ::obj' 因为'A ' 是一个依赖范围

> ID：14992454
> 
> 赞同：1
> 
> 时间：2013-02-21T00:19:59.233
> 
> 标签：c++, gcc

假设我有一个名为 A 的类

```
template<class T>
class A
{
protected:
    static T* obj;

    A() {}
    ~A() {}

public:
    // methods...
};

// Somewhere in my source file...
template <class T> A <T*> ::obj = NULL; 
```

由于各种原因，我需要声明一个静态成员 obj 并且 gcc 不喜欢它们在类的定义期间被初始化（显然你可以使用 Visual Studio 来做到这一点）

无论如何，我如何正确声明 obj？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:23:28.940

您不能像这样部分专门化对象。相反，只需这样做：

```
template <class T> T * A<T>::obj = NULL; 
```

确保这与类模板定义一起进入*头文件！*

# php - Fishpig 的 Magento-Wordpress 集成管理菜单不起作用

> ID：14992459
> 
> 赞同：1
> 
> 时间：2013-02-21T00:20:11.137
> 
> 标签：php, wordpress, magento, fishpig

我已将 Fishpig 的 Wordpress 集成模块 (v 2.4.93) 安装到 Magento 1.7.0.2 中。从那时起，我已经正确设置并发布了多个帖子。

但是，Magento 管理后端中集成的 Wordpress 菜单开始不再起作用。

我从 admin->Wordpress->Wordpress 菜单中选择的任何选项现在都会提示我下载 .php 文件而不是渲染它。

有谁知道为什么会这样？任何帮助将不胜感激。

真诚的，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T11:16:54.210

这是您服务器上的一个设置，它会导致 PHP 文件被下载而不是执行。联系您的房东，他们应该能够为您解决此问题。

# ios - 使用 RestKit 更新了 RKRelationship 映射

> ID：14992460
> 
> 赞同：1
> 
> 时间：2013-02-21T00:20:22.697
> 
> 标签：ios, objective-c, json, restkit

我最近一直在研究 RestKit，但自从最近发布了最新版本以来，我在他们的 github 和网络上找到的所有教程都是针对旧版本的。通常这不是问题，但是过去存在的许多类现在都没有，这当然使所有教程都没用。

为了使用它的每个人，对于最新版本的 RestKit，您将如何关系映射此示例 JSON？

```
{
"entities": {
    "message": [
        "dentist appointment"
    ],
    "dateRange": [
        {
            "start": "2012-11-15",
            "end": "2012-11-16"
        }
    ],
    "time": [
        "02:00:00PM"
    ]
},
"action": "REMINDER_SET",
"category": "REMINDER"
} 
```

如果您有同样的问题，请对此表示赞同。

# plugins - Team Foundation Explorer 插件

> ID：14992462
> 
> 赞同：1
> 
> 时间：2013-02-21T00:20:31.177
> 
> 标签：plugins, explorer, foundation

我在 OSX 上为 Eclipse 使用 Team Foundation Explorer 插件。有没有办法获得像 Visual Studio 在 Eclipse 中显示的那样的视图？

例如：

![在此处输入图像描述](../Images/cacde5cca229b1f3ffbfdbb783221c45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:14:19.443

在团队资源管理器视图中，您选择 Home-> Source control explorer

# c# - 如何通过 XML 传输 PHP 数组？

> ID：14992464
> 
> 赞同：0
> 
> 时间：2013-02-21T00:20:34.457
> 
> 标签：c#, php, file, serialization, urlencode

我有一个使用专有加密程序加密的 XML 文档，如下所示： `exec($programName, $outputArr, $returnVal);`

生成的数组 ( `$outputArr`) 被序列化并作为 blob 存储在 MySQL 中。我通过 Web 界面按需提供此加密阵列。基本上反序列化并即时写入文件。

现在要求发生了变化，我需要将此加密数组提供给使用**.net/c#**的另一台服务器，而该服务器又将托管 Web 界面。我们正在使用响应 GET 请求并发送 XML 响应的 REST API。

我尝试将数组写入一个临时文件，然后使用`file_get_contents($tempFile)`URL 对结果字符串进行编码并将其放入我发送的 XML 响应中来检索文件的内容。

当然，当新的 Web 界面将其写为文件（在 URL 解码之后）时，它与应有的完全不同。我的意思是，我们的专有程序在读取这个新生成的文件时会引发错误……在此过程中，发生了数据损坏。

我们还尝试了一个 C# 序列化库，该库将 PHP 数组反序列化为 ac# 原始类型，但这也不是一个好的解决方案，因为它不断抛出一堆错误。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:25:32.597

为什么不直接访问工作版本，然后在发送到新服务器之前重新操作它......

```
<!-- Some XML based wrapper or other logic/output -->
<?php
  echo file_get_contents($url_to_working_web_interface);
?> 
```

# c - C 编程：跟踪字长和计数的函数？

> ID：14992467
> 
> 赞同：0
> 
> 时间：2013-02-21T00:20:38.260
> 
> 标签：c, loops

我很难清楚地说明这个函数应该做什么，所以我想我会给你们举个例子。假设我的程序打开并扫描了一个文本文件，其中包含以下内容：

“猫追公鸡没有用。”

基本上我要写的函数应该打印出有多少个 1 字母单词（如果有的话），有多少 2 个字母单词，有多少 3 个字母单词，等等。

" 长度计数

```
 2    2
     3    3 
     5    2 
     6    1 
     7    1 
```

"

这是我的尝试：

```
int word_length(FILE *fp, char file[80], int count)//count is how many total words there are; I already found this in main()
{
  printf("Length\n");
  int i = 0, j = 0;
  while(j < count)
  {
    for(i = 0; i < count; i++)
    {
      if(strlen(file[i] = i)
        printf("%d\n", i);
    }//I intended for the for loop to print the lengths
  ++i;
  printf("Count\n");
  while()//How do you print the counts in this case? 
  }
} 
```

我认为我设置循环的方式会导致相同长度的单词被打印两次......所以它看起来像这样，这是错误的。那么我应该如何设置循环呢？

“长度计数

```
 2    1
     2    2 
```

"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:27:19.757

这听起来像是功课，所以我不会为你写代码，但会给你一些线索。

1.  要保存多个值，您将需要数组。*索引为i*的元素将包含长度为*i*的单词的计数器。
2.  找到一种方法来识别单词的边界（空格、句号、行首等）。然后计算边界之间的字符数。
3.  增加相关计数器（见技巧 1）。重复。

一些细节。您实际上想将一件事*映射*到另一件事：单词长度到此类单词的数量。对于映射，有特殊的数据类型，通常称为哈希（表）或字典。但是在您的情况下，数组可以完美地用作地图，因为您的键是统一的并且继续（1,2 ...到某个最大字长）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:23:02.657

您不能使用单个 int 来计算所有这些。您需要一个数组，然后在它的位置 0 处跟踪有多少 1 个字母的单词，在位置 1 处累积 2 个字母的单词，依此类推。

# ruby - 如何将 lambda 传递给 Hash.each？

> ID：14992471
> 
> 赞同：5
> 
> 时间：2013-02-21T00:20:49.390
> 
> 标签：ruby, lambda

如何将 lambda 传递给`hash.each`，以便我可以重用一些代码？

```
> h = { a: 'b' }
> h.each do |key, value| end
 => {:a=>"b"}
> test = lambda do |key, value| puts "#{key} = #{value}" end 
> test.call('a','b')
a = b
> h.each &test
ArgumentError: wrong number of arguments (1 for 2)
  from (irb):1:in `block in irb_binding'
  from (irb):5:in `each'
  from (irb):5
  from /Users/jstillwell/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>'
> h.each test
ArgumentError: wrong number of arguments(1 for 0)
  from (irb):8:in `each'
  from (irb):8
  from /Users/jstillwell/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T00:32:05.840

`each`将当前元素生成到块中，因此 lambda 需要一个参数，而不是两个。如果产生`Hash`的元素是双元素`Array`，第一个元素是键，第二个元素是值。

```
test = lambda do |el| puts "#{el.first} = #{el.last}" end
h.each &test
# a = b 
```

或者，您可以使用 Ruby 对参数列表中的解构绑定的支持：

```
test = lambda do |(k, v)| puts "#{k} = #{v}" end
h.each &test
# a = b 
```

或者，`lambda`您可以使用 a `Proc`，而不是使用与方法具有相同参数绑定语义的 a ，它与块具有相同的参数绑定语义，即它将单个`Array`参数解压缩为多个参数绑定：

```
test = proc do |k, v| puts "#{k} = #{v}" end
h.each &test
# a = b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:29:55.537

我仍然觉得这是语法不一致，我在另一个问题 [Inconsistency of Hash.each and lambdas中找到了答案（但没有道歉）](https://stackoverflow.com/questions/5262738/inconsistency-of-arity-between-hash-each-and-lambdas)

我把它切换到

```
lambda do |(key, value)| 
```

然后我可以通过

```
hash.each &test 
```

或者我可以直接调用它

```
test.call([key, value]) 
```

如果有人有更好的答案，或者至少有一个简洁的借口，为什么这是必要的。我很乐意给他们加分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-15T02:37:56.023

我遇到过类似的情况，我不想打印，而是在对值进行一些操作后返回一个键值对......上述解决方案适用于您只想打印但当您需要时可能会变得棘手返回这些键值对的哈希。所以我认为这可能会有所帮助

我用它来解决[凯撒密码](http://practicalcryptography.com/ciphers/caesar-cipher/)难题

```
hash1 = {"a" => 1, "b" => 2, "c" => 3}
test = lambda {|k,v| true ? {k => v+2} : {k => v+1} } 
```

将其映射到哈希后，它将返回一个哈希数组（这是有趣的地方）

```
hash2 = hash1.map(&test)   # [{"a"=>3}, {"b"=>4}, {"c"=>5}] 
```

我们可以将其转换为 ruby​​stically 哈希！

```
hash2.inject(:merge!)   # {"a" => 3, "b" => 4, "c" => 5} 
```

答对了！！！对？

# python - 对象的工厂方法 - 最佳实践？

> ID：14992474
> 
> 赞同：27
> 
> 时间：2013-02-21T00:21:35.163
> 
> 标签：python, coding-style, decorator, class-method, factory-method

这是一个关于使用 python 从相同数据的不同形式创建类或类型的实例的最佳实践的问题。使用类方法更好还是完全使用单独的函数更好？假设我有一个用于描述文档大小的类。（注意：这只是一个示例。我想知道创建类实例的最佳方式，**而不是**描述文档大小的最佳方式。）

```
class Size(object):
    """
    Utility object used to describe the size of a document.
    """

    BYTE = 8
    KILO = 1024

    def __init__(self, bits):
        self._bits = bits

    @property
    def bits(self):
        return float(self._bits)

    @property
    def bytes(self):
        return self.bits / self.BYTE

    @property
    def kilobits(self):
        return self.bits / self.KILO

    @property
    def kilobytes(self):
        return self.bytes / self.KILO

    @property
    def megabits(self):
        return self.kilobits / self.KILO

    @property
    def megabytes(self):
        return self.kilobytes / self.KILO 
```

我的`__init__`方法采用以位表示的大小值（位且只有位，我想保持这种方式），但可以说我有一个以字节为单位的大小值，我想创建我的类的一个实例。使用类方法更好还是完全使用单独的函数更好？

```
class Size(object):
    """
    Utility object used to describe the size of a document.
    """

    BYTE = 8
    KILO = 1024

    @classmethod
    def from_bytes(cls, bytes):
        bits = bytes * cls.BYTE
        return cls(bits) 
```

或者

```
def create_instance_from_bytes(bytes):
    bits = bytes * Size.BYTE
    return Size(bits) 
```

这似乎不是一个问题，也许这两个例子都是有效的，但我每次需要实现这样的东西时都会考虑它。很长一段时间以来，我都偏爱类方法方法，因为我喜欢将类和工厂方法捆绑在一起的组织优势。此外，使用类方法保留了创建任何子类的实例的能力，因此它更加面向对象。另一方面，一位朋友曾经说过“当有疑问时，做标准库所做的事情”，我还没有在标准库中找到这样的例子。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T00:28:16.487

首先，大多数时候你认为你需要这样的东西，你不需要；这表明您正在尝试将 Python 视为 Java，解决方案是退后一步，询问您为什么需要工厂。

通常，最简单的做法是使用带有默认/可选/关键字参数的构造函数。即使是在 Java 中你永远不会这样写的情况——即使是在 C++ 或 ObjC 中重载的构造函数会感觉不对的情况——在 Python 中也可能看起来非常自然。例如`size = Size(bytes=20)`，，或`size = Size(20, Size.BYTES)`看起来合理。就此而言，一个`Bytes(20)`继承自`Size`并仅添加`__init__`重载的类看起来是合理的。这些是微不足道的定义：

```
def __init__(self, *, bits=None, bytes=None, kilobits=None, kilobytes=None): 
```

或者：

```
BITS, BYTES, KILOBITS, KILOBYTES = 1, 8, 1024, 8192 # or object(), object(), object(), object()
def __init__(self, count, unit=Size.BITS): 
```

但是，有时您*确实*需要工厂功能。那么，你会怎么做呢？嗯，有两种东西经常被归为“工厂”。

A`@classmethod`是执行“替代构造函数”的惯用方式——stdlib 中到处都有示例——<code>itertools.chain.from_iterable`datetime.datetime.fromordinal`等。

函数是执行“我不在乎实际类是什么”工厂的惯用方式。例如，查看内置`open`函数。你知道它在 3.3 中返回什么吗？你关心？没有。这就是为什么它是一个函数，而不是`io.TextIOWrapper.open`什么。

您给定的示例似乎是一个完全合法的用例，并且非常适合“备用构造函数”bin（如果它不适合“带有额外参数的构造函数”bin）。

# c# - 如何将多个查询与 EntityFramework 相交以进行搜索？

> ID：14992475
> 
> 赞同：0
> 
> 时间：2013-02-21T00:21:57.573
> 
> 标签：c#, asp.net-mvc, linq, search, entity-framework-4

当人们搜索我的网站时，我不想只搜索值 (q)，我想用空格作为分隔符搜索每个单词。我已经编写了大部分代码，但有些部分我不知道该怎么做。

您可以检查下面代码中的“待办事项”并建议我一种方法吗？或者也许是一种完全不同的方法。顺便说一句，如果可能的话，我想保留 SQL 代码部分，因为这对我来说更自然，但所有 TODO 都可以在 LINQ 中完成。

谢谢

这是代码：

```
[HttpPost]
        public ActionResult Search(string q)
        {
            ViewBag.q = q;

            String[] strQueries = q.Split(' ');

            //TODO: Create an array of type var???

            foreach (string str in strQueries)
            {
                var recipesTemp = db.Recipes.SqlQuery(
                String.Format(
                "SELECT * FROM Recipe WHERE Name LIKE '%{0}%' " +
                "UNION ALL " +
                "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
                "    SELECT IDRecipe FROM Subtitle WHERE Name LIKE '%{0}%') " +
                "UNION ALL  " +
                "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
                "    SELECT IDRecipe FROM RecipeTag " +
                "        INNER JOIN Tag ON Tag.IDTag = RecipeTag.IDTag  " +
                "    WHERE Name LIKE '%{0}%') " +
                "UNION ALL   " +
                "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
                "    SELECT IDRecipe FROM Subtitle " +
                "        INNER JOIN Ingredient ON Ingredient.IDSubtitle = Subtitle.IDSubtitle  " +
                "    WHERE QuantityAndName LIKE '%{0}%')", str)).Distinct().OrderBy(r => r.Name).ToList();

                //TODO: Add recipesTemp to the array of var
            }

            var recipes = //TODO: INTERSECT the results from all the recipesTemp in the array of type var

            return View("Search", recipes);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:15:58.457

以下代码可以解决问题：

```
 var selectedRecipies = new List<IEnumerable<Recipy>>();

        foreach(...)
        {
            ...
            selectedRecipies.Add(recipesTemp);
        }

        var recipies = selectedRecipies.Aggregate((a, i) => a.Intersect(i)); 
```

此外，在你的地方，我也会考虑@KirkWoll 的评论并使用 FullTextSearch 而不是 LIKE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:27:47.220

对于其中的每一个`str`，`strQueries`您都在创建一个不同的格式化 SQL 查询，这些查询按名称排序并存储在`List<T>`where `T`is a `Recipe`(?) 中。尝试这样的事情：

```
var allRecipes = strQueries.Select(str => db.Recipes.SqlQuery(
    String.Format(
        "SELECT * FROM Recipe WHERE Name LIKE '%{0}%' " +
        "UNION ALL " +
        "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
        "    SELECT IDRecipe FROM Subtitle WHERE Name LIKE '%{0}%') " +
        "UNION ALL  " +
        "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
        "    SELECT IDRecipe FROM RecipeTag " +
        "        INNER JOIN Tag ON Tag.IDTag = RecipeTag.IDTag  " +
        "    WHERE Name LIKE '%{0}%') " +
        "UNION ALL   " +
        "SELECT * FROM Recipe WHERE IDRecipe IN ( " +
        "    SELECT IDRecipe FROM Subtitle " +
        "        INNER JOIN Ingredient ON Ingredient.IDSubtitle = Subtitle.IDSubtitle  " +
        "    WHERE QuantityAndName LIKE '%{0}%')", str)).Distinct().OrderBy(recipe => recipe.Name))
    .SelectMany(recipe => recipe); 
```

之后`allRecipes`应该是 type `IEnumerable<Recipe>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:32:44.283

试试这种方法，它会产生一条 SQL 语句：

```
var names = q.Split(' ');

if(names.Any())
{
    var firstName = names[0];

    var query = context.Recipes.Where (q => q.Name.Contains(firstName));
    // other unions ...
    // query = query.Union( context.Recipes.Where (...
    foreach (var name in names.Skip(1))
    {
        query = query.Union(context.Recipes.Where (q => q.Name.Contains(name)));
        // other unions ...
        // query = query.Union( context.Recipes.Where (...
    }

    // query evaluated now
    var recipes = query.ToList();
} 
```

# three.js - 使用 webgl-texture-utils 和 three.js 来支持 dds/crn

> ID：14992476
> 
> 赞同：2
> 
> 时间：2013-02-21T00:22:07.720
> 
> 标签：three.js

我正在尝试将 webgl-texture-utils ( [https://github.com/toji/webgl-texture-utils](https://github.com/toji/webgl-texture-utils) ) 与 Three.js (r56) 一起使用以利用 DDS 和 CRN ( [http://code.google .com/p/crunch/](http://code.google.com/p/crunch/) ) 纹理。

我无法弄清楚如何使用 in 返回的`textureLoader.load(src, callback);`纹理`THREE.Texture(image, mapping);`

THREE.Texture 需要 javascript Image() 对象，但 texture-utils 会返回 Firebug 报告的`XrayWrapper [Object WebGLTexture {}`内容，我认为它是一些原生 WebGL 纹理类型。

我可以以某种方式使用该纹理作为 THREE.Texture 的图像吗？

这是我尝试过的一些代码：

```
var mapping = new THREE.UVMapping();

var image = new Image();
var map = null;

var usetexturetools = true;

if (!usetexturetools) { 

  // normal way of loading

  map = new THREE.Texture( image, mapping );
  var loader = new THREE.ImageLoader();
  loader.addEventListener( 'load', function ( event ) {
    map.image = event.content;
    map.needsUpdate = true;
  });
  loader.addEventListener( 'error', function ( event ) {
    window.console.log("error loading " + texture);
  });
  loader.crossOrigin = 'anonymous';
  loader.load(texture, image);

} else {

 // using webgl-texture-tools - not working because i don't know how to use the object returned by textureLoader.load() with THREE.Texture..

 var textureLoader = new TextureUtil.TextureLoader(renderer.getContext());

 map = new THREE.Texture(textureLoader.load(texture, function(loaded) {
    window.console.log(loaded);
    map.needsUpdate = true;
 }), mapping );

}

map.sourceFile = texture;
map.wrapS = THREE.RepeatWrapping;
map.wrapT = THREE.RepeatWrapping;

map.offset.x = this.getParameter("texture_offset_x");
map.offset.y = this.getParameter("texture_offset_y");

map.repeat.x = this.getParameter("texture_scale_x");
map.repeat.y = this.getParameter("texture_scale_y"); 
```

编辑：我想我可以创建一个 webgl-texture-utils 的分支，而不是创建和返回 WebGLTexture，只会返回原始数据，因此，我可以在 THREE.DataTexture() 中使用该数据。当我开始时，我会尝试...查看源代码看起来可能需要做很多工作，但除非出现任何问题，否则我会尝试。

# ajax - jQuery ajax() 调用失败

> ID：14992480
> 
> 赞同：4
> 
> 时间：2013-02-21T00:22:31.573
> 
> 标签：ajax, jquery

我正在编写一个基于 Web 的应用程序，它调用服务器以从 REST-ful 应用程序更新服务器中的特定对象。

这是我编写的 javascript 代码。

```
var sendUrl = url + "v1/items/" + itmId;
$.ajax({
    "type": "PUT",
    "url": sendUrl,
    //"data": {"name": nameVal, "description": descVal},
    "success": function() {
        alert('hai');  //refreshItems();
    },
    "complete": function (jqXHR, textStatus) {
        alert (textStatus);
    }
}); 
```

执行此代码时，服务器没有收到任何请求。浏览器没有显示任何更新。

我使用谷歌浏览器作为我的浏览器。所以，我查看了 Chrome 的 Javascript 控制台，控制台显示了这个错误：

![来自 Chrome 控制台的错误](../Images/69fa44c3dc604bedce0057c8f9baffb8.png)

这个问题有什么可能的解决方案吗？

* * *

编辑：

正如其中一条评论所建议的那样，我尝试查看网络面板。似乎它没有调用服务器。

这是此特定请求的屏幕截图： ![在此处输入图像描述](../Images/6b7e6d01f74d99420bd4356bdd45b263.png)

图像非常小。状态为“（失败）”，类型为待处理

如果服务器没有配置 PUT，则会导致内部服务器错误。所以，这不会发生在这里。

* * *

编辑

在尝试了答案中给出的建议后，

这是代码：

```
var sendUrl = url + "v1/items/" + itmId;
$.ajax({
    "type": "PUT",
    "url": sendUrl,
    //"data": {"name": nameVal, "description": descVal},
    }).done(function ( ) {
        alert('OK');
    }).fail(function ( jqXHR, textStatus, errorThrown ) {
        console.log(jqXHR);
        console.log(textStatus);
        console.log(errorThrown);
    }); 
```

以下是已记录的对象：

![在此处输入图像描述](../Images/c30b7f3e41a8113cca219ffea22e911b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T00:39:22.660

[关于 http/1.1 状态代码的 jquery Ajax 函数](http://api.jquery.com/jQuery.ajax/) [W3 规范的文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

首先，如 jQuery 文档中所述

> 弃用通知：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调自 jQuery 1.8 起已弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

此外，fail 函数接受以下参数：

```
jqXHR, textStatus, errorThrown 
```

* * *

由于您遇到错误，请尝试以下代码：

```
var sendUrl = url + "v1/items/" + itmId;
$.ajax({
    "type": "PUT",
    "url": sendUrl,
    //"data": {"name": nameVal, "description": descVal},

}).done(function ( ) {
    alert('OK');

}).fail(function ( jqXHR, textStatus, errorThrown ) {
    console.log(jqXHR);
    console.log(textStatus);
    console.log(errorThrown);
}); 
```

这应该向控制台输出有关为什么 ajax 调用不起作用的有用信息。

如果您的网络服务正常工作，它应该返回一个 http 状态代码。以下是一些常见的响应代码：

```
200 OK -> Everything is ok (it worked)
201 Created -> Ok too

400 Bad Request
401 Unauthorized
404 Not found 
```

* * *

所以，基本上，你得到的回应应该反映它为什么不起作用

# yui - 获得一个简单的 YUI元素示例工作刚从 YUI 开始，我有点挣扎。我对这个例子很感兴趣：按钮控制：使用菜单按钮来替换这里的元素 http://developer.yahoo.com/yui/examples/button/button-menu-select_log.html 。这个例子似乎有很好的文档和解释，但我很难让它在 jsfiddle 或 codepen 中工作。我想我不确定如何启动 javascript。我一直在做的是将 HTML、CSS 和 Javascript 复制并粘贴到

> ID：14992489
> 
> 赞同：0
> 
> 时间：2013-02-21T00:23:39.550
> 
> 标签：yui, jsfiddle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:28:58.803

好吧，那个例子是 YUI2，而不是 YUI3，所以除非你将它包装在一个 yui 使用中并以这种方式将它们带入[YUI 2 中，否则它不会起作用 YUI 3](http://yuilibrary.com/yui/docs/yui/yui-yui2.html)

# javascript - 使用按钮更改 div 高度

> ID：14992492
> 
> 赞同：0
> 
> 时间：2013-02-21T00:23:51.607
> 
> 标签：javascript, jquery, html, button, height

我需要一些脚本，例如在此站点上运行的 TYPO3 扩展/模块：[http](http://nyati-safari.dk/index.php?id=125) ://nyati-safari.dk/index.php?id=125（滚动至：Detaljeret Dagsprogram (inkluderet)）。

![截屏](../Images/10f06b69d1046f902a8c3efefc12eef0.png)

div 以像素特定的高度显示，当单击箭头时，div 更改为 contentspecific 高度，当 div 切换时，箭头也会更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:59:55.440

做这个：

```
var div = $('#div');

$('#arrow').click(function () {
    if (div.height() == 100) {
        autoHeight = div.css('height', 'auto').height();
        div.height(100).animate({
            height: autoHeight
        }, 500);
    } else {
        $('#div').animate({
            height: '100'
        }, 500);
    }
}); 
```

JSFiddle：http: [//jsfiddle.net/ZG8ug/5/](http://jsfiddle.net/ZG8ug/5/)

甚至可以做这样的事情：http: [//jsfiddle.net/ZG8ug/6/](http://jsfiddle.net/ZG8ug/6/)其中“隐藏”的 div 在页面加载时很小，但在查看和返回时它更大。可能有助于帮助用户区分已查看的内容。甚至可以反过来做，这样 div 在查看时占用的空间更少。

# asp.net - 将 asp.net 应用程序转换为使用 asp.net 表单身份验证 - SQL Server 中的密码哈希

> ID：14992493
> 
> 赞同：3
> 
> 时间：2013-02-21T00:23:57.883
> 
> 标签：asp.net, forms, sql-server-2005, hash, passwords

设想：

*   使用 SQL Server 2005 的旧 ASP.NET 2.0 应用程序。
*   密码以纯文本形式存储在数据库中
*   我们想升级应用程序以使用表单身份验证
*   需要重新创建所有密码，就像表单身份验证一样

问题：

*   我们如何使用 T-SQL 生成哈希密码（带盐）以存储在数据库中，这与表单身份验证生成的密码相同：

那么如何创建这个：

DHSicgbY+Av0LyQpBZl2M5EuyOk=

哪个是散列密码（加盐），但使用 T-SQL 代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:28:21.733

在 SQL Server 2005 下，使用[HASHBYTES()](http://msdn.microsoft.com/en-US/library/ms174415%28v=SQL.90%29.aspx)最好使用 SHA1 哈希算法。（SQL Server 2012 现在支持 SHA-256 和 SHA-512）

您可以使用`NEWID()`为您的盐生成随机 GUID。

> 返回其输入的 MD2、MD4、MD5、SHA 或 SHA1 哈希。

正如@von v. 指出的那样：[T-SQL：加盐密码](https://stackoverflow.com/questions/5985708/t-sql-salted-passwords)

# ldap - 使用 Maven 构建和 Ellucian Luminis LDAP 的 CAS 服务器身份验证失败

> ID：14992494
> 
> 赞同：1
> 
> 时间：2013-02-21T00:24:01.357
> 
> 标签：ldap, war, cas

我按照（[https://wiki.jasig.org/display/CASUM/Best+Practice+-+Setting+Up+CAS+Locally+using+the+Maven2+WAR+Overlay+Method](https://wiki.jasig.org/display/CASUM/Best+Practice+-+Setting+Up+CAS+Locally+using+the+Maven2+WAR+Overlay+Method)）的说明构建了 CAS 服务器，然后是通过 LDAP 进行身份验证的说明 ( [https://wiki.jasig.org/display/CASUM/LDAP](https://wiki.jasig.org/display/CASUM/LDAP) )。但是，我在 Tomcat 日志中不断收到以下错误消息：

**[LDAP：错误代码 34 - 无效的 DN]；嵌套异常是 javax.naming.InvalidNameException: [LDAP: error code 34 - Invalid DN]**

我已经验证我的绑定用户凭据是正确的，因为我能够从命令行执行以下搜索： **ldapsearch -x -H ldaps://fuller.edu:636 -b "ou=People,o=fuller.edu ,o=cp" -D "cn=Directory Manager" -w "password" "(sn=Smith)" cn sn pdsLoginId**
该搜索的结果是正确的并且几乎是即时的。

在这一点上，我不完全确定我错过了什么。以下是我的 deployerConfigContext.xml 文件中的片段。

```
<bean class="org.jasig.cas.adaptors.ldap.BindLdapAuthenticationHandler"
                                    p:filter="pdsLoginId=%u"
                                    p:searchBase="ou=People,o=fuller.edu,o=cp"
                                    p:contextSource-ref="contextSource" />
<bean id="contextSource"
class="org.springframework.ldap.core.support.LdapContextSource">
       <property name="pooled" value="true"/>
        <property name="url" value="ldaps://fuller.edu:636" />
        <property name="userDn" value="cn=Directory Manager"/>
        <property name="password" value="our password"/>
        <property name="baseEnvironmentProperties">
              <map>
                    <entry key="com.sun.jndi.ldap.connect.timeout" value="3000" />
                    <entry key="com.sun.jndi.ldap.read.timeout" value="3000" />
                    <entry key="java.naming.security.authentication" value="simple" />
              </map>
        </property>
    </bean> 
```

我在 stackoverflow.com 上搜索了几篇文章，并尝试了大部分答案，但没有运气。我希望有人能发现我的配置中缺少的东西，并把我送到正确的方向。

我很高兴发布您可能需要查看的更多代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:32:46.820

您的命令行 LDAP 绑定测试使用 DN，`"ou=People,o=our.edu,o=cp"`但配置文件指定`ou=People,o=edu,o=cp`. 那些不一样。

`o=our.edu`或者`o=edu`

**评论解释，它是`ou=People,o=fuller.edu,o=cp`**

下一步是查看是否需要使用反斜杠转义句点，以便`ou=People,o=fuller.edu,o=cp`在命令行上工作的内容可能`ou=People,o=fuller\.edu,o=cp`位于配置文件中。

# asp.net-mvc - ASP.NET MVC 自定义视图引擎中的母版页神奇地变化

> ID：14992495
> 
> 赞同：1
> 
> 时间：2013-02-21T00:24:04.700
> 
> 标签：asp.net-mvc, master-pages, viewengine

好的，我已经使用自定义视图引擎继承了此代码。它所做的只是覆盖`FindView`，以便根据设备返回不同的视图。目前，iPad 被检测为移动设备，因此会显示移动视图。我的任务是将其更改为桌面视图。

有两个母版页`X.master`和`X.Mobile.master`. 从代码中，您可以看到它手动添加`.Mobile`到移动设备的母版页名称。我所做的只是`isMobile`为`false`iPad 设置。

问题是，即使它使用 is（而不是 ）进入 else 语句`masterName`，`X`当`X.Mobile`使用 iPad 查看时，返回的视图`X.Mobile.Master`作为其母版页。所以对于 iPad，它最终会显示带有移动母版页的桌面视图。桌面版和移动版都很好。这可能在哪里（以及如何）发生？

示例操作方法：

```
public ActionResult Index()
{
  return View("Index", "X");
} 
```

这是视图引擎的简化版本：

```
class MobileViewEngine : FixedWebFormViewEngine
{
  public override ViewEngineResult FindView(
    ControllerContext controllerContext,
    string viewName, 
    string masterName, 
    bool useCache
 )
  {
    ViewEngineResult result;
    bool isMobile =
        controllerContext.HttpContext.Request.Browser.IsMobileDevice;

    if (isiPad(controllerContext.HttpContext.Request))
    {
      isMobile = false;
    }

    if (isMobile)
    {
        masterName = masterName + ".Mobile";
        string viewPathAndName = "M/" + viewName;

        //Mobile view retrieved from cache
        result = base.FindView(
            controllerContext,
            viewPathAndName,
            masterName,
            true
        );

            if (result == null || result.View == null)
            {
                //Mobile view retrieved, no cache
                result = base.FindView(
                    controllerContext,
                    viewPathAndName,
                    masterName,
                    false
                );
            }
    }
    else
    {
            //desktop view retrieved
            result = base.FindView(
                controllerContext,
                viewName,
                masterName,
                false
            );
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T13:53:18.383

好的，所以在查看 ASP.NET MVC（感谢上帝的开源）之后，我可以看到当请求被标记为移动（`controllerContext.HttpContext.Request.Browser.IsMobileDevice == true`）时，MVC 在尝试视图名称之前默认尝试 viewname.mobile.cshtml（或 .aspx）。 .cshtml。母版页也是如此。

在我的例子中，因为确实有一个 masterpage.mobile，所以它正在被渲染。至于视图，因为移动版本在一个单独的文件夹中，所以它没有被拾取，它正在回退到正常的 viewname.cshtml。

整个调查花了我一点时间，这促使我在[我的博客](http://www.hossein.com.au)中更详细地分享我的发现。

# visual-studio - 无法从 Windows 机器连接到在 Mac 上运行的 Xamarin.iOS

> ID：14992500
> 
> 赞同：8
> 
> 时间：2013-02-21T00:24:39.603
> 
> 标签：visual-studio, xamarin.ios, xamarin

诊断视图在倒数第三个步骤中失败（共 11 个）：

**通过 HTTP 建立与 Mac 构建主机的有状态连接**。=>*失败*

详细*信息*部分显示：

**无法建立连接。无法获取信息记录。无法获取 SDK 状态。**

我已经仔细检查了“操作”部分中的所有建议：安装了最新版本的 Xamarin.iOS，没有连接其他 Visual Studio 实例，禁用了防火墙，激活了 Xamarin.iOS。

两台机器都有 Xamarin Studio 4.0。

以下是来自的最后几个条目`~/Library/logs/Xamarin/MonoTouchVS/mtbserver.log`：

```
[01-Mar-2013 17:52:24] Server IP Address : 10.1.0.199
[01-Mar-2013 17:54:44] mtbserver: No KEEPALIVE command, exiting...
[01-Mar-2013 17:54:48] Apple SDK developer root: /Applications/Xcode.app/Contents/Developer
[01-Mar-2013 17:54:48] Server IP Address : 10.1.0.199 
```

**编辑**

正如下面 Veux 所提到的，在 Windows 上使用代理可能会导致此问题。奇怪的是，如果禁用“捕获流量”，Fiddler2 仍然可以作为设备（iPhone 或模拟器）的反向代理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T16:02:12.553

我遇到了一些问题，一切都配置得很好，但得到了同样的错误。我的解决方案是禁用代理！在windows机器上

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:28:00.253

*   检查您是否在 /Applications/Xcode.app 上安装了 Xcode

*   检查是否安装了 Xcode 的文档。( [http://screencast.com/t/f3Kku2iggDeY](http://screencast.com/t/f3Kku2iggDeY) )

*   检查您的 Mac 上是否存在此路径。

    ```
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Documentation/ 
    ```

*   如果为空，则从 DocSets ( [http://screencast.com/t/dmN00AYw9k](http://screencast.com/t/dmN00AYw9k) )创建一个符号链接

    ```
    ~/Library/Developer/Shared/Documentation/ 
    ```

*   到

    ```
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Documentation/DocSets 
    ```

# video-streaming - 有没有办法从 Windows Phone 8 应用程序传送流内容？

> ID：14992506
> 
> 赞同：0
> 
> 时间：2013-02-21T00:25:05.573
> 
> 标签：video-streaming, windows-phone-8, smooth-streaming, azure-media-services

有没有一种方法可以使用 Windows Azure 媒体服务和平滑流从 Windows Phone 8 应用程序传送流内容。[这是一个 C# 应用程序的示例](http://www.windowsazure.com/en-us/develop/media-services/how-to-guides/media-services-dotnet/#header-12)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:49:33.717

是的，您可以使用适用于 Windows Phone 8 的媒体播放器框架：http: [//playerframework.codeplex.com/releases/view/97645](http://playerframework.codeplex.com/releases/view/97645)

它具有平滑流播放功能，并与 PlayReady 内容保护集成。

# php - 查询多个条件

> ID：14992513
> 
> 赞同：1
> 
> 时间：2013-02-21T00:25:36.883
> 
> 标签：php, mysql, sql, database

我正在跟踪我网站上的一些内容，并且我使用了很多查询，因为它们需要不同的条件

例如

```
$example = mysql_query("SELECT column FROM table WHERE column = 'Value1'");
$example_row = mysql_num_rows($example);

$example1 = mysql_query("SELECT column FROM table WHERE column = 'Value2'");
$example_row1 = mysql_num_rows($example1); 
```

依此类推，值总是不同的，所以我很难找到一种方法将其放入一个查询中，在该查询中我仍然可以获得不同值的不同行数，这可能吗？

我可以测试该行以查看它是否与该值匹配

```
if ($row == 'value'){

} 
```

多次但它仍然看起来很糟糕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:26:36.090

利用[`IN()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

```
SELECT column FROM table WHERE column IN('Value1', 'Value2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:11:53.040

我相信你想要每个值的计数：

```
$values = ["value1", "value2", ...];
$query = "SELECT ";

for($i = 0; $i < count($values); $i++)
{
    $query .= "SUM(IF(column = '$values[$i]')) AS v$i";

    if($i != count($values) - 1)
        $query .= ","; //Only add ',' if it's not the last value

    $query .= " "; //We need the spaces at the end of every line
}

$query .= "FROM table";

//Let mysql do its work, run the query etc., store the resultset in $row; 
```

现在您可以动态地遍历结果集：

```
$results = [];
for($i = 0; $i < count($values); $i++)
{
    $string = "v"+ $i;
    $results[] = $row[$string];
} 
```

# python - 如何在 python 列表解包中包含换行符？

> ID：14992519
> 
> 赞同：0
> 
> 时间：2013-02-21T00:26:14.823
> 
> 标签：python, list, newline, iterable-unpacking

```
for row in rows:
    a, b, c = row 
```

很好但是

```
for row in rows:
    alpha, beta, charlie, delta, echo, foxtrot, gamma, horseshoe, indigo, jimmy, killshot = row 
```

不是很好。Python 通常很好地支持逗号后的换行符，但我无法弄清楚这个的语法。像这样的东西会很好：

```
for row in rows:
    alpha, 
    beta, 
    charlie, 
    delta, 
    echo, 
    foxtrot, 
    gamma, 
    horseshoe, 
    indigo, 
    jimmy, 
    killshot = row 
```

PEP 8 处理这个问题的方法是什么，因为长线是反 PEP 8 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:41:03.563

使用括号：

```
for row in rows:
    (alpha, 
     beta, 
     charlie, 
     delta, 
     echo, 
     foxtrot, 
     gamma, 
     horseshoe, 
     indigo, 
     jimmy, 
     killshot) = row 
```

就个人而言，我可能每行使用多个项目（打破行变长的地方，或者项目的含义有逻辑变化的地方），但只要你保持一致，我认为上面的风格会是没关系。

# python - Python加权随机

> ID：14992521
> 
> 赞同：31
> 
> 时间：2013-02-21T00:26:34.983
> 
> 标签：python, algorithm, round-robin

我需要根据加权循环返回不同的值，这样 20 人中有 1 人获得 A，20 人中有 1 人获得 B，其余的人获得 C。

所以：

```
A => 5%
B => 5%
C => 90% 
```

这是一个似乎可以工作的基本版本：

```
import random

x = random.randint(1, 100)

if x <= 5:
    return 'A'
elif x > 5 and x <= 10:
    return 'B'
else:
    return 'C' 
```

这个算法正确吗？如果是这样，是否可以改进？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-21T00:42:37.123

你的算法是正确的，更优雅的东西怎么样：

```
import random
my_list = ['A'] * 5 + ['B'] * 5 + ['C'] * 90
random.choice(my_list) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-21T00:38:11.437

没关系。更一般地说，您可以定义如下内容：

```
from collections import Counter
from random import randint

def weighted_random(pairs):
    total = sum(pair[0] for pair in pairs)
    r = randint(1, total)
    for (weight, value) in pairs:
        r -= weight
        if r <= 0: return value

results = Counter(weighted_random([(1,'a'),(1,'b'),(18,'c')])
                  for _ in range(20000))
print(results) 
```

这使

```
Counter({'c': 17954, 'b': 1039, 'a': 1007}) 
```

与您预期的一样接近 18:1:1。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-21T02:35:31.297

如果您想使用加权随机而不是百分位随机，您可以创建自己的 Randomizer 类：

```
import random

class WeightedRandomizer:
    def __init__ (self, weights):
        self.__max = .0
        self.__weights = []
        for value, weight in weights.items ():
            self.__max += weight
            self.__weights.append ( (self.__max, value) )

    def random (self):
        r = random.random () * self.__max
        for ceil, value in self.__weights:
            if ceil > r: return value

w = {'A': 1.0, 'B': 1.0, 'C': 18.0}
#or w = {'A': 5, 'B': 5, 'C': 90}
#or w = {'A': 1.0/18, 'B': 1.0/18, 'C': 1.0}
#or or or

wr = WeightedRandomizer (w)

results = {'A': 0, 'B': 0, 'C': 0}
for i in range (10000):
    results [wr.random () ] += 1

print ('After 10000 rounds the distribution is:')
print (results) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:38:39.477

这似乎是正确的，因为您使用的是`uniform`具有独立抽签的随机变量，每个数字的概率将为`1/n` （n = 100）。

您可以通过运行 1000 次并查看每个字母的频率来轻松验证您的算法。

您可能考虑的另一种算法是在给定每个字母所需的频率的情况下生成一个包含字母的数组，并且只生成一个随机数，该随机数是数组中的索引

它在内存中的效率会降低，但性能应该会更好

**编辑：**

为了回应@Joel Cornett 的评论，一个示例将与@jurgenreza 非常相似，但内存效率更高

```
import random
data_list = ['A'] + ['B'] + ['C'] * 18
random.choice(data_list ) 
```

# c# - 如何使用信号机制在 C# 中通过线程和手动重置事件执行密集工作（不重叠）？

> ID：14992528
> 
> 赞同：0
> 
> 时间：2013-02-21T00:27:10.063
> 
> 标签：c#, multithreading

我有一个现有的应用程序，其中有 1 个线程在后台运行一些密集的工作，每个`numOfMinutesInterval`. 这以前是使用`Thread.Sleep`（在整个间隔期间睡觉）完成的，但我读过 Thread.Sleep 是邪恶的，而且它的设计草率，所以我想改变一个信号机制。下面是我刚刚编写的代码（使用 wpf 中的调度程序计时器，但我认为在这个小场景中，winforms 计时器也是如此）。

调度程序（在 UI 线程中运行）每秒滴答一次，并在滴答函数内部检查是否已通过间隔，如果已通过，它将发出 manualresetevent 信号`Set()`。我想知道如果密集的工作超过了间隔期，这是否是糟糕的设计？如果我设置了`numOfMinutesInterval = 1`，但工作耗时 1 分 1 秒，这是否意味着我们将跳过 1 个调用，因为在工作仍在完成且工作线程尚未阻塞时`set()`，滴答声正在尝试事件。`set()`

另请注意，我`lastWorkDoneTime = DateTime.Now;`在调用之后设置了`Set()`，我应该将其移至工作线程（`lastWorkDoneTime = DateTime.Now;`之前调用`manualResetEvent.WaitOne();`）吗？

如果这是糟糕的设计，我应该怎么做才能改变它？谢谢阅读！

```
//thread work done here
private void MyDoWork_ThreadStart() 
{
  while(FlagApplicationStillRunning == true)
  {
    //do the intensive work here
    manualResetEvent.WaitOne();
  }
}

// tick every second
private int numOfMinutesInterval = 1;
private DateTime lastWorkDoneTime = DateTime.Now;
private void DispatcherTimer_Tick(object sender, EventArgs e) 
{
  if((DateTime.Now - lastWorkDoneTime).Minutes > numOfMinutesInterval)
  {
    manualResetEvent.Set();
    lastWorkDoneTime = DateTime.Now;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:42:45.777

您可以只开始一项任务并让它执行密集的工作。

```
private void DispatcherTimer_Tick(object sender, EventArgs e) 
{
    if ((DateTime.Now - lastWorkDoneTime).Minutes > numOfMinutesInterval)
    {
        Task.Factory.StartNew(DoIntensiveWork());
        lastWorkDoneTime = DateTime.Now;
    }
} 
```

至于设置，`lastWorkDoneTime`这取决于你。如果您将其设置为触发任务的对象，则您有可能同时运行两个或多个任务来执行该工作。如果将其设置在执行工作的函数末尾，则会引入延迟，该延迟取决于完成工作所需的时间。

我实际上会考虑使用其中一个计时器对象，并让它为您处理时间而不是使用`DispatcherTimer_Tick`事件。有[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)、[`System.Threading.Timers`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)等。

帮助确定最适合您的计时器选项： [比较 .NET Framework 类库中的计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

# java - 从 GAE 应用程序内部写入 PDF

> ID：14992534
> 
> 赞同：2
> 
> 时间：2013-02-21T00:27:26.430
> 
> 标签：java, google-app-engine, pdf, file-io, google-cloud-datastore

我需要从我的 GAE 数据存储中读取几兆字节（原始文本字符串），然后将它们全部写入新的 PDF 文件，然后使 PDF 文件可供用户下载。

我很清楚阻止您写入文件系统的沙盒限制。我想知道是否有一种巧妙的方法可以在内存中创建 PDF（或内存和 blobstore 的组合），然后以某种方式存储它，以便客户端（浏览器）实际上可以将其作为文件拉下来并保存它在本地。

这可能是一个巨大的延伸，但我唯一的其他选择是将这个任务外包给非 GAE 服务器，我想不惜一切代价避免这种情况，即使这需要我进行大量额外的开发。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:01:24.070

您绝对可以使用 GAE 本身来实现您的用例。以下是您应该在高层次上遵循​​的步骤：

1.  下载优秀的[iText 库](http://itextpdf.com/)，这是一个用于处理 PDF 的 Java 库。首先构建您的 Java 代码以生成 PDF 内容。查看各种示例：http: [//itextpdf.com/book/toc.php](http://itextpdf.com/book/toc.php)

2.  由于您不能直接写入文件，因此您需要以字节为单位生成 PDF 内容，然后编写一个充当下载 Servlet 的 Servlet。Servlet 将使用 Response 对象打开流，操作 Mime 标头（文件名、文件类型）并将 PDF 内容写入流。执行此操作时，浏览器会自动显示下载选项。

3.  您的下载 Servlet 将具有如下所示的高级代码：

    ```
    public class DownloadPDF extends HttpServlet {

    public void doGet(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {

            //Extract some request parameters, fetch your data and generate your document

            String fileName = "<SomeFileName>.pdf";
            res.setContentType("application/pdf");
            res.setHeader("Content-Disposition", "attachment;filename=\"" + fileName + "\"");
            writePDF(<SomeObjectData>, res.getOutputStream());
        }
    } 
    ```

    }

4.  请记住，上面的 writePDF 方法是您自己的方法，您可以在其中使用 iText 库 Document 和其他类来生成数据并将其写入您在第二个参数中传递的输出流中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T08:57:54.200

虽然我不知道 Google App Engine 上的 PDF 生成，尤其是 Java 中的 PDF 生成，但是一旦你拥有它，你肯定可以存储它并稍后提供它。

我想 PDF 的生成将花费 30 多秒，因此您将不得不考虑为此过程使用[Task Queue Java API 。](https://developers.google.com/appengine/docs/java/taskqueue/overview)

将文件放入内存后，您可以简单地[将其写入 Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview#using-blobstore-with-gcs)，然后将其作为常规 Blob 提供。在[概述](https://developers.google.com/appengine/docs/java/blobstore/overview)中，您将找到一个关于如何在 Google App Engine 上上传、编写和提供二进制数据 (blob) 的功能齐全的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:11:50.383

我通过谷歌搜索找到了几个解决方案。请注意，我实际上并没有尝试过这些库，但希望它们会有所帮助。

*   [PDFJet](http://www.pdfjet.com/os/edition.html)（商业）
*   [编写 Google Drive 文档](https://developers.google.com/drive/?hl=de)并导出为 PDF

# c++ - (bool | bool) 安全吗？

> ID：14992547
> 
> 赞同：11
> 
> 时间：2013-02-21T00:28:34.167
> 
> 标签：c++, c

我正在编写一些 C++ 代码，我想调用两个函数（`checkXDirty`和`checkYDirty`），`true`如果其中一个返回则返回`true`。即使一个返回`true`，我也需要评估两者，所以我的第一个想法是使用

```
return checkXDirty() | checkYDirty(); 
```

这看起来有点奇怪（也许很脏）。这是否总是在 C++ 中产生正确的结果？C 的`_Bool`类型呢？（这段代码最终可能会适应任何一种语言，我不希望在移植代码时出现不愉快的意外）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-21T00:34:07.983

> 即使一个返回true，我也需要评估两者，所以我的第一个想法是使用...

然后停止试图变得棘手，让你的代码尽可能少的行。只需调用这两个函数并明确需要调用它们：

```
const bool x_dirty = is_x_dirty();
const bool y_dirty = is_y_dirty();
return x_dirty || y_dirty; 
```

接下来，重命名或拆分您的函数，因为它们`is_xxx_dirty`确实不应该产生副作用。因此，您的代码更难维护

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T00:34:27.083

只要值不是不确定的，使用位运算符在技术上是可以的。但是，由于作为*一般*的编码习惯，这充满了问题，所以我只需要编写一个小内联 OR 函数，然后让编译器进行优化。编译器擅长优化，所以，顺其自然吧。

```
return eitherOrBothTrue( checkXDirty(), checkYDirty() ); 
```

或者，如果你大胆并敢于接受挑战，向将要维护它的人解释代码，

```
return !bothFalse( checkXDirty(), checkYDirty() ); 
```

或者现在我阅读了@EdS 的答案，将值存储在变量中也许同样好，但是然后添加`const`，如下所示：

```
bool const xIsDirty = checkXDirty();
bool const yIsDirty = checkYDirty();
return xIsDirty || yIsDirty; 
```

# c++ - Boost Variant：我怎样才能做一个返回设置类型的访问者？

> ID：14992548
> 
> 赞同：0
> 
> 时间：2013-02-21T00:28:35.710
> 
> 标签：c++, boost, boost-variant

我正在尝试编写一个使用 boost:variant 作为值的通用映射。我一直在尝试编写将返回适当类型的 get(std::string key) 函数。

到目前为止，这是我想出的：

```
 class GenericHashMap {
private:
std::map< std::string, boost::variant<int, bool, double, std::string> > genericMap;

public:
  template<typename T>
  bool getValue(const std::string & key, T & value) {
     if ( _map.find(key) == _map.end() ) {
        return false;
     }
     T * valuePtr = boost::get<T>(_map[key]);
     if (valuePtr == NULL) {
        return false;
     }
     value = *valuePtr;
     return true;
  }
} 
```

我很好奇我应该如何处理迭代器？是否值得制作我自己的嵌套迭代器或只返回嵌套的 std::map。

**编辑**

我添加了我希望实现的类设计（即通用哈希图）。我遇到的问题是我想要一种方法让用户查询特定键是否存储为特定类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:46:50.543

如果您有这样的问题，这可能意味着您应该使用访问者，而不是希望从您的变体中获取价值。这通常是搭配的方式`boost::variant`。

如果您考虑一下：您不想为特定键值硬连接特定类型。否则，就意味着你失去了所有的力量`boost::variant`。这意味着您应该为每个键集使用不同的映射（因为您静态地知道它们，您不应该将所有内容放在同一个映射中）。

`boost::variant`真的在这里帮助您进行动态调度，而不是静态分支。

**注意**：在您的示例中，您在找到项目时查找了两次，您应该存储结果`find`而不是丢弃它，从而为您节省第二次查找。

# c++ - OpenGL 3.2 设置矩阵的麻烦

> ID：14992551
> 
> 赞同：-1
> 
> 时间：2013-02-21T00:29:00.220
> 
> 标签：c++, opengl, matrix, glsl, glm-math

我正在使用 GLM 来管理我的矩阵，但我遇到了一些对我来说毫无意义的问题。当我将投影矩阵设置为单位矩阵以外的任何东西时，我看不到我要绘制的正方形。如果它是一个身份，它将起作用。我的视图矩阵发生了类似的事情。如果我尝试翻译过去 -1 或 +1，方块就会消失，否则它似乎没有效果。

没有 OpenGL 错误、GLSL 链接器/编译器错误，并且 glGetUniformLocation 返回一个有效位置。着色器程序也被正确使用。

我还测试了着色器以查看它是否将正确的值传递给每个矩阵（如果值正确，则通过更改正方形的颜色）。

这是我设置投影矩阵的方法：

```
projectionMatrix = glm::perspective(60.0f, (float)windowWidth / (float)windowHeight, 0.1f, 100.0f); 
```

这是我的绘图功能：

```
void OpenGLContext::render(void) {  
glViewport(0, 0, windowWidth, windowHeight); // Set the viewport size to fill the window  
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); // Clear required buffers  

//Set up matrices
viewMatrix  = glm::translate(glm::mat4(1.0f), glm::vec3(0.0f, 0.0f, -5.0f));
modelMatrix = glm::scale(glm::mat4(1.0f), glm::vec3(.5f));  

shader->bind();

int projectionMatrixLocation = glGetUniformLocation(shader->id(), "projectionMatrix");
int viewMatrixLocation = glGetUniformLocation(shader->id(), "viewMatrix");
int modelMatrixLocation = glGetUniformLocation(shader->id(), "modelMatrix");

glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, &projectionMatrix[0][0]);
glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, &viewMatrix[0][0]);
glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, &modelMatrix[0][0]);

glBindVertexArray(vaoID[0]);
glDrawArrays(GL_TRIANGLES, 0, 6);   
glBindVertexArray(0);

shader->unbind();

SwapBuffers(hdc); 
```

}

这是shader.vert

```
#version 150 core

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;

in vec3 in_Position;
in vec3 in_Color;
out vec3 pass_Color;

void main(void)
{
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(in_Position, 1.0);
    pass_Color = in_Color;
} 
```

这是shader.frag

```
#version 150 core

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;

in vec3 pass_Color;
out vec4 out_Color;

void main(void)
{
    out_Color = vec4(pass_Color, 1.0);
} 
```

抱歉忘了我在画什么：

```
void OpenGLContext::createSquare(void)
{
float* vertices = new float[18];

vertices[0] = -0.5; vertices[1] = -0.5; vertices[2] = 0.0; // Bottom left corner  
vertices[3] = -0.5; vertices[4] = 0.5; vertices[5] = 0.0; // Top left corner  
vertices[6] = 0.5; vertices[7] = 0.5; vertices[8] = 0.0; // Top Right corner  

vertices[9] = 0.5; vertices[10] = -0.5; vertices[11] = 0.0; // Bottom right corner  
vertices[12] = -0.5; vertices[13] = -0.5; vertices[14] = 0.0; // Bottom left corner  
vertices[15] = 0.5; vertices[16] = 0.5; vertices[17] = 0.0; // Top Right corner  

glGenVertexArrays(1, &vaoID[0]);
glBindVertexArray(vaoID[0]);

glGenBuffers(1, vboID);
glBindBuffer(GL_ARRAY_BUFFER, vboID[0]);
glBufferData(GL_ARRAY_BUFFER, 18 * sizeof(GLfloat), vertices, GL_STATIC_DRAW);

glVertexAttribPointer((GLuint) 0, 3, GL_FLOAT, GL_FALSE, 0, 0);

glEnableVertexAttribArray(0); // Disable our Vertex Array Object  
glBindVertexArray(0);

delete [] vertices;
} 
```

像这样设置我的矩阵不会在屏幕上绘制任何内容。就像我说的，如果我将投影和视图矩阵设置为一个身份，它将起作用。modelMatrix 上的缩放似乎也总是有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-06T20:31:04.733

`in_Color`位置 1 ( )上没有属性。如果您只是将其排除在这个问题之外，那么问题在于您没有在着色器中定义的位置。我从来没有在没有位置部分的情况下实际测试过它，但我*认为*这是必要的，至少对于多个​​值：你应该使用 eg `layout(location = 0) in in_Position`。

# php - 我收到“致命错误：未捕获的 SoapFault 异常：[Client] SoapClient::SoapClient() 堆栈跟踪：#0 SoapClient->SoapClient(NULL, Array) #1”

> ID：14992552
> 
> 赞同：1
> 
> 时间：2013-02-21T00:29:00.390
> 
> 标签：php, soap

我正在与我的酒店供应商取得联系：

> 致命错误：未捕获的 SoapFault 异常：[Client] SoapClient::SoapClient() 堆栈跟踪：#0 SoapClient->SoapClient(NULL, Array) #1

我设法进行了一次预订，但随后开始收到此消息。

> 致命错误：未捕获的 SoapFault 异常：[Client] SoapClient::SoapClient() [soapclient.soapclient]：在 /home/fanzy44/public_html/FLuxuryWorld.com/HotelCollection/wp-content/themes 的非 WSDL 模式下需要“uri”选项/agility-child/single-bookhotel.php:1983
> 堆栈跟踪：
> #0 /home/fanzy44/public_html/FLuxuryWorld.com/HotelCollection/wp-content/themes/agility-child/single-bookhotel.php(1983)：SoapClient ->SoapClient(NULL, Array)
> #1 /home/fanzy44/public_html/FLuxuryWorld.com/HotelCollection/wp-includes/template-loader.php(47): include('/home/fanzy44/p...')
> #2 /home/fanzy44/public_html/FLuxuryWorld.com/HotelCollection/wp-blog-header.php(16): require_once('/home/fanzy44/p...')
> #3 /home/fanzy44/public_html/FLuxuryWorld.com/HotelCollection/index.php(17): require('/home/fanzy44/p...')
> #4 {main} 抛出 /home/fanzy44/public_html/ FLuxuryWorld.com/HotelCollection/wp-content/themes/agility-child/single-bookhotel.php 在线 1983

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:51:25.660

根据异常，

> 未捕获的 SoapFault 异常：...在非 WSDL 模式下需要“uri”选项

因此，参考[SoapClient](http://php.net/manual/en/soapclient.soapclient.php)文档：

> ### 选项
> 
> 一系列选项。如果工作在 WSDL 模式，这个参数是可选的。如果在非 WSDL 模式下工作，必须设置 location 和 uri 选项，其中 location 是要发送请求的 SOAP 服务器的 URL，uri 是 SOAP 服务的目标命名空间。

查看您的代码：

```
$client = new SoapClient($hotelProBookingURL, array('trace' => 1)); 
```

$hotelProBookingURL 的价值是多少？如果它为空，则您缺少必要的选项，从而导致错误。

# ruby-on-rails - 我在 9.3.1 结束时的测试显示 1 次失败。在“身份验证”页面中

> ID：14992553
> 
> 赞同：0
> 
> 时间：2013-02-21T00:29:02.370
> 
> 标签：ruby-on-rails, testing, ruby-on-rails-3.2, railstutorial.org

我在第 9.3.1 章的末尾并在 Hartl 教程中运行 exec 测试，并收到以下失败/错误：

```
Failures:

  1) Authentication authorization for non-signed-in users in the Users controller visiting the user index 
     Failure/Error: it { should have_selector('title', text: 'Sign in') }
       expected css "title" with text "Sign in" to return something
     # ./spec/requests/authentication_pages_spec.rb:68:in `block (6 levels) in <top (required)>'

Finished in 1.94 seconds
70 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:68 # Authentication authorization for non-signed-in users in the Users controller visiting the user index 
```

这是我的代码，我将不胜感激任何建议。

authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }

      it { should have_link('Users',    href: users_path) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }

      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end

        describe "visiting the user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end
      end

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def index
    @users = User.all
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

session_controller.rb

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_back_or user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

有什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:17:12.247

您需要更改 users_controller.rb 中的 before_filter 以包含索引：

```
 before_filter :signed_in_user, only: [:index, :edit, :update] 
```

使用您的代码，您无需登录即可查看索引页面，这就是您的测试在标题中看不到“登录”文本的原因。

# android - 颜色斑点检测 OpenCV-2.4.4-android-sdk

> ID：14992556
> 
> 赞同：0
> 
> 时间：2013-02-21T00:29:17.243
> 
> 标签：android, eclipse, opencv, sdk, android-camera

我已经下载、解压缩并导入了这个 openCV SDK 中的示例。到目前为止，我没有收到任何编译错误（我认为只需要使用 SDK 管理器安装 android 3.0，API 9），我在我的 android 设备中运行了生成的颜色 blob 检测 apk，我看到的只是黑屏。人脸检测示例也会发生这种情况，无论是在 eclipse 中生成的 apk 还是 openCV sdk zip 中包含的 apk。关于为什么会发生这种情况的任何想法？或如何解决？

# php - 组合多个 mySQL 行而不重复

> ID：14992566
> 
> 赞同：2
> 
> 时间：2013-02-21T00:30:15.007
> 
> 标签：php, mysql, sql, phpmyadmin

我在 MySQL 数据库中有 4 个表，`suppliers`, `categories`, `subcats`& `listings`。

Listings 是一个连接表，允许供应商、类别和子目录之间的多对多关系，每个的结构如下

**供应商**

```
sp_id      sp_name       sp_email
1          Apple         info@apple.co
2          Samsung       info@samsung.co 
```

**类别**

```
cat_id     cat_name
3          Electronics
4          Software 
```

**子猫**

```
subcat_id  subcat_name   cat_id
5          Mobiles       3
6          Computers     3 
```

**列表**

```
list_id    sp_id         subcat_id
1          1             5
2          1             6 
```

我正在尝试将数据组合并提取在一起，因此每个供应商只有一个条目，其中列出了多个子类别，例如：

**结果**

```
sp_id      sp_name       sp_email         cat_name / cats        subcat_name / subcats
1          Apple         info@apple.co    Electronics, Software  Mobiles, Computers
2          Samsung       info@samsung.co  Electronics            Mobiles 
```

目前我有以下查询

```
SELECT *
FROM suppliers as s
LEFT JOIN listings as l ON s.sp_id=l.sp_id
LEFT JOIN subcats as p ON p.subcat_id=l.subcat_id
LEFT JOIN categories as c ON c.cat_id=p.cat_id
ORDER BY s.sp_id 
```

但是，这会为每个供应商输出多个条目，每个类别或与其关联的子类别都有一个条目。有没有更简单的方法可以通过 SQL 或 PHP 中的多个查询来完成？

我目前对 mySQL 的了解有限，任何朝着正确方向提出的建议或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:36:47.823

采用`GROUP_CONCAT`

```
SELECT  s.*, 
        GROUP_CONCAT(c.cat_name) catName,
        GROUP_CONCAT(p.subcat_name) subcatName
FROM    suppliers as s
        LEFT JOIN listings as l ON s.sp_id=l.sp_id
        LEFT JOIN subcats as p ON p.subcat_id=l.subcat_id
        LEFT JOIN categories as c ON c.cat_id=p.cat_id
GROUP   BY s.sp_id, s.sp_name, s.sp_email
ORDER   BY s.sp_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:35:42.647

您可以`GROUP BY`结合使用`GROUP_CONCAT`以仅显示来自某个列的唯一值，其中一个以逗号分隔的列表作为值之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:42:02.150

您想将[`GROUP BY`](http://www.tutorialspoint.com/mysql/mysql-group-by-clause.htm)表达式与[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数一起使用。这将允许您将共享某些值的行合并在一起，同时连接它们不共享的行。例如，在您的情况下，这可能会是这样的：

`SELECT s.sp_id, s.sp_name, group_concat(', ', c.cat_name) FROM suppliers as s LEFT JOIN listings as l ON s.sp_id=l.sp_id LEFT JOIN subcats as p ON p.subcat_id=l.subcat_id LEFT JOIN categories as c ON c.cat_id=p.cat_id ORDER BY s.sp_id GROUP BY s.sp_id, s.sp_name;`

# jquery - 父菜单下的位置子菜单在 IE/FF 中不起作用

> ID：14992568
> 
> 赞同：0
> 
> 时间：2013-02-21T00:30:22.937
> 
> 标签：jquery, css, drop-down-menu, cross-browser, html-lists

我有两层菜单 - 一个带有另一个嵌套 ul 的 ul， - 一个带有下拉子菜单的菜单，例如：

```
 <div id="menu">
    <ul>
     <li>Menu item</li>
     <li>Menu item
      <ul>
        <li>Sub Menu item</li>
        <li>Sub Menu item</li>
      </li>
      </ul>
     <li>Menu item
       <ul>
        <li>Sub Menu item</li>
        <li>Sub Menu item</li>
      </li>
      </ul>
     </li>
    </ul>
</div> 
```

第一个 ul 显示为内联，而第二个 ul 显示为块，并使用 JQuery 隐藏和显示。

我有以下 CSS 将子菜单 ul 定位在它们各自的父 li 下：

```
#menu UL LI {
    list-style-type: none;
    display: inline;
    padding: 10px;
    position: relative;
}

#menu UL LI UL {
    display: none;
    z-index: 999;
    position: absolute;
}

#menu UL LI UL LI {
    display: block;
    width: 100px;
} 
```

我的问题是子菜单项没有出现在 FireFox 和 IE 中它们各自的父项下。然而，它在 Chrome 和 Safari 中运行良好。

我认为这是这样做的正确方法，但有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:39:50.210

要达到您想要的状态，需要进行一些小的更改：

```
 #menu ul li {
+  display: inline-block;
-  padding: 10px;
+  padding: 0 10px 0 10px;
 }

 #menu ul li ul li {
+  padding: 10px;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:43:52.313

无需重新发明轮子，更灵活： http: [//net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-菜单/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)

演示： http: [//nettuts.s3.amazonaws.com/819_megamenu/demo/index.html](http://nettuts.s3.amazonaws.com/819_megamenu/demo/index.html)

此外，如果您不打算使用灵活布局，请设置固定宽度。当浏览器缩小时，您的网站会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:45:06.940

让它坐在正确位置的最简单方法是将其定位到父 LI。

添加`left: 0`到您的`#menu UL LI UL`css 声明中，它应该开始按照您的意愿行事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:21:41.437

如果您从您的站点复制了您的标记，那么这可能是错误的。您的开始和结束标签不匹配。我在这里解决了这个问题：

```
<div id="menu">
<ul>
    <li>Menu item</li>
    <li>Menu item
        <ul>
        <li>Sub Menu item</li>
        <li>Sub Menu item</li>
        </ul>
    </li>
    <li>Menu item
        <ul>
        <li>Sub Menu item</li>
        <li>Sub Menu item</li>
        </ul>
    </li>     
</ul>
</div> 
```

我刚刚对你的 CSS 做了一些快速的修改，这可以帮助你。

```
#menu ul 
{
    background: blue;
}

#menu ul li 
{
    list-style-type: none;
    width: 100px;
}

#menu ul > li
{
    display: inline-block;
    position: relative;
    padding: 10px;
    height: 20px;
    background: red;
}

#menu li > ul
{
    display: none;
    position: absolute; left: 0px; top: 40px; z-index: 999;    
    background: yellow;
}

#menu li > ul > li
{
    display: block;
    background: green;
} 
```

# c# - 我可以仅使用 extensionAttribute1 创建 DirectorySearcher 过滤器吗？

> ID：14992575
> 
> 赞同：1
> 
> 时间：2013-02-21T00:30:58.617
> 
> 标签：c#, asp.net, active-directory, directoryservices

我有一个使用 DirectorySearcher 的类，它根据以下可选过滤器返回结果很好：

samAccountName 给定名称 sn

但是，我需要创建一个目录搜索器，它根据“extensionAttribute1”的值从基于 AD 的 soley 返回用户条目。

是否可以创建一个过滤器，仅使用 extensionAttribute1 来搜索 AD 中的用户帐户？

这是当前代码：

```
 public static DataTable tblUserSearchResults(string searchstring, string searchproperty)
    {
        using (DirectoryEntry de = new DirectoryEntry(ConfigurationManager.ConnectionStrings["ADConnectionString"].ToString()))
        {
            //create instance of the directory searcher
            using (DirectorySearcher deSearch = new DirectorySearcher())
            {
                //set the search filter
                deSearch.SearchRoot = de;
                deSearch.SearchScope = SearchScope.Subtree;
                switch (searchproperty)
                {
                    case "un":
                        deSearch.Filter = "(&(objectCategory=person)(objectClass=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*)(samAccountName=" + searchstring.Trim() + "*))";
                        break;
                    case "fn":
                        deSearch.Filter = "(&(objectCategory=person)(objectClass=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*)(givenname=" + searchstring.Trim() + "*))";
                        break;
                    case "ln":
                        deSearch.Filter = "(&(objectCategory=person)(objectClass=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*)(sn=" + searchstring.Trim() + "*))";
                        break;
                    default:
                        deSearch.Filter = "(&(objectCategory=person)(objectClass=user)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*)(sn=" + searchstring.Trim() + "*))";
                        break;
                }

                //get the search results
                using (SearchResultCollection results = deSearch.FindAll())
                {
                    //Create a new table object
                    using (DataTable tblResults = new DataTable())
                    {
                        tblResults.Columns.Add("UserID");
                        tblResults.Columns.Add("FirstName");
                        tblResults.Columns.Add("LastName");
                        tblResults.Columns.Add("Department");
                        foreach (SearchResult result in results)
                        {
                            using (DirectoryEntry de2 = result.GetDirectoryEntry())
                            {
                                if (de2.Properties["samAccountName"].Value != null)
                                {
                                    DataRow dr = tblResults.NewRow();
                                    dr["UserID"] = de2.Properties["samAccountName"].Value.ToString();
                                    dr["FirstName"] = de2.Properties["givenname"].Value.ToString();
                                    dr["LastName"] = de2.Properties["sn"].Value.ToString();
                                    if (de2.Properties["department"].Value != null)
                                    {
                                        dr["Department"] = de2.Properties["department"].Value.ToString();
                                    }
                                    tblResults.Rows.Add(dr);
                                }
                            }
                        }
                        tblResults.DefaultView.Sort = "LastName asc, FirstName asc";
                        return tblResults;
                    }
                }
            }
        }
    } 
```

# python - 为 JSON 格式化 Python 字典

> ID：14992577
> 
> 赞同：1
> 
> 时间：2013-02-21T00:31:03.827
> 
> 标签：python, json, dictionary, formatting

以下两个示例中的哪一个被认为是更好的 JSON 格式 - 就约定、标准和/或节省内存（或出于任何其他原因）而言？

先感谢您。

示例 1：

```
    {
    “项目”： [
        {
            “职位”：“程序员”，
            “年龄”：29，
            “fname”：“鲍勃”
        },
        {
            “职位”：“开发人员”，
            “年龄”：24，
            “fname”：“乔”
        },
        {
            “职位”：“DBA”，
            “年龄”：31，
            “fname”：“戴夫”
        },
        {
            “位置”：“系统”，
            “年龄”：40，
            “fname”：“辛迪”
        },
        {
            “职位”：“设计师”，
            “年龄”：32，
            “fname”：“艾琳”
        },
        {
            “位置”：“NWA”，
            “年龄”：45，
            “fname”：“山姆”
        },
        {
            “位置”：“处理器”，
            “年龄”：20，
            “fname”：“莱尼”
        },
        {
            “职位”：“网站管理员”，
            “年龄”：28，
            “fname”：“Ed”
        }
    ]
    }

```

示例 2：

```
    {
    “位置”： [
        “程序员”，
        “开发商”，
        “数据库管理员”，
        “系统”，
        “设计师”，
        “新华网”，
        “处理器”，
        “站长”
    ],
    “年龄”： [
        29,
        24,
        31,
        40,
        32,
        45,
        20,
        28
    ],
    “名字”：[
        “鲍勃”，
        “乔”，
        “戴夫”，
        “辛迪”，
        “艾琳”，
        “山姆”，
        “莱尼”，
        “埃德”
    ]
    }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:44:22.600

在我看来，第一个更干净。它将每个人的属性组合在一起，这很适合转换为 Person 对象。当只有一个列表时，迭代和排序也更容易，对于排序，Python 为简单的排序键提供了 attrgetter。从技术上讲，由于字典较少，第二个可能更有效，但清晰度胜过任何微小的收益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:48:17.673

肯定是1。

你可以用任何语言在逻辑上迭代它：

```
for person in json['items']:  #  'people'?
    print person['name'] 
```

如果要对其进行迭代，则必须将 2 转换为 1：

```
data = [{key: json[key][i] for key in json} for i in range(len(json.keys()[0]))] 
```

此外，GZip 压缩有助于减少重复键的开销（我去掉了空格）：

```
File | Size (b) | Gzipped Size (b)
----------------------------------
  1  |    191   |      176        
  2  |    386   |      196 
```

# c# - 冒泡排序和foreach索引

> ID：14992578
> 
> 赞同：0
> 
> 时间：2013-02-21T00:31:17.803
> 
> 标签：c#

我在下面有一些用于按钮单击事件的代码，它使用冒泡排序。我有点不清楚用途。尝试按升序对数组进行排序。此外，我必须使用 foreach 并且需要以某种方式从中获取索引。尝试 int z = a.GetEnumerator(); 不起作用。int k = 0;//作弊以使代码正常工作

```
 int k = 0;//Cheat to get code working
        foreach (BankAccount BankAccount in a)
        //for (int i = 0; i < a.Length; i++)
        {
            //int z = a.GetEnumerator();
            lstBefore.Items.Add(a[k].show());
            k += 1;//Cheat to get code working
        }
        //if (a[0] is IComparable)
        //{
            //Sort.BubbleSort(a);//Sort a
            k = 0;//Cheat to get code working
            for (int i = 0; i < a.Length; i++)
            {
                lstAfter.Items.Add(a[k].show());
                //else MessageBox.Show("unable to sort");
                k += 1;//Cheat to get code working
            }
        //}
        //else MessageBox.Show("unable to sort");

class Sort : IComparable
{
    public static void BubbleSort(IComparable[] arr)
    {
        bool swap = true;
        IComparable temp;
        for (int i = 0; swap; i++)
        {
            swap = false;
            for (int j = 0; j < (arr.Length - (i + 1)); j++)
            {
                //int test = arr[j].CompareTo(arr[j + 1]);                    
                if (arr[j].CompareTo(arr[j + 1]) > 0)
                //If this balance is < than next balance                    
                {
                    temp = (IComparable)arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = temp;
                    swap = true;
                }
            }
        }
    }
} 
```

我也有

```
public class BankAccount : IComparable, IComparable<BankAccount>//Class BackAccount -             //Icomarable    
{
    private decimal balance;
    private string FullName;
    //...

    public int CompareTo(BankAccount that)//Compare To        
    {
        if (this.balance > that.balance) return -1;//If this balance is > than next balance            
        if (this.balance == that.balance) return 0;//If this balance is = to next balance            
        return 1;//If this balance is < than next balance            
        //return this.balance.CompareTo(that.balance);        
    }
}
Thanks, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:34:48.700

看起来你只需要`CompareTo`在你的`Sort`类（不仅仅是`BankAccount`类）中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:51:29.830

首先， a`foreach`无论如何都没有索引。如果需要索引，请使用 for 循环。
其次，`Sort`该类没有实现`IComparable`（这会导致错误）。这是一个比较器，而不是比较。`IComparer`如果您愿意，它可以实现，或者是静态的。当您拥有实现 QuickSort 并且肯定更快更好的方法时
，为什么还要深入研究冒泡排序实现？我会避免这种情况。 `Array.Sort``List.Sort`

# php - 使用 php 包含时，活动菜单图像不会显示在单个页面上，尽管悬停确实有效

> ID：14992587
> 
> 赞同：0
> 
> 时间：2013-02-21T00:32:04.770
> 
> 标签：php, javascript, include, dreamweaver, server-side-includes

我的主导航菜单位于页面左侧的侧边栏中。菜单为每个链接使用两个不同的图像（常规图像和用作悬停图像和活动图像的图像。

我已将菜单保存为自己的 php 页面 (sidebar.php)，并将其作为包含在每个页面中。

一切都完美无缺，只是活动图像不会像以前那样为每个页面显示，因为页面都是单独的 html 页面。奇怪的是，悬停图像工作得很好，但是在每个 php 页面上，相同的图像应该为活动图像保持显示，但不会。

我正在使用 javascript 来更改菜单中的图像。

这是带有菜单的sidebar.php：

```
<ul class="nav_main">
  <li><a href="index.php" target="_top" onclick="MM_nbGroup('down','group1','home','images/home_hover.png',1)" onmouseover="MM_nbGroup('over','home','images/home_hover.png','images/home_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/home.png" alt="Home Page" name="home" border="0" id="home" /></a></li>
  <li><a href="about.php" target="_top" onclick="MM_nbGroup('down','group1','about','images/about_hover.png',1)" onmouseover="MM_nbGroup('over','about','images/about_hover.png','images/about_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/about.png" alt="About Us" name="about" width="254" height="43" border="0" id="about" /></a></li>
  <li><a href="services.php" target="_top" onclick="MM_nbGroup('down','group1','services','images/services_hover.png',1)" onmouseover="MM_nbGroup('over','services','images/services_hover.png','images/services_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/services.png" alt="Our Services" name="services" width="254" height="43" border="0" id="services"  /></a></li>
  <li><a href="portfolio.php" target="_top" onclick="MM_nbGroup('down','group1','portfolio','images/portfolio_hover.png',1)" onmouseover="MM_nbGroup('over','portfolio','images/portfolio_hover.png','images/portfolio_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/portfolio.png" alt="Portfolio" name="portfolio" width="254" height="43" border="0" id="portfolio" /></a></li>
  <li><a href="contact.php" target="_top" onclick="MM_nbGroup('down','group1','contact','images/contact_hover.png',1)" onmouseover="MM_nbGroup('over','contact','images/contact_hover.png','images/contact_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/contact.png" alt="Contact Us" name="contact" width="254" height="43" border="0" id="contact" /></a></li>
  <li><a href="resources.php" target="_top" onclick="MM_nbGroup('down','group1','resources','images/resources_hover.png',1)" onmouseover="MM_nbGroup('over','resources','images/resources_hover.png','images/resources_hover.png',1)" onmouseout="MM_nbGroup('out')"><img src="images/resources.png" alt="Resources" name="resources" width="254" height="43" border="0" id="resources"  /></a></li>
</ul> 
```

这个 ul 的 CSS：

```
ul.nav_main {
    text-align: left;
    padding: 0px;
    margin-top: 20px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 10px;
}
ul.nav_main li {
    text-align: left;
    padding-top: 5px;
    padding-bottom: 5px;
} 
```

这是包含控制菜单图像的 javascript 的 header.php 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" href="favicon.ico" />
    <title>Title goes here</title>
    <meta name="description" content="Description Here" />
    <meta name="keywords" content="various keywords yada yada" />
    <link href="styles.css" rel="stylesheet" type="text/css" />
    <!--[if IE]>
    <style type="text/css"> 
      #main_content, #sidebar { zoom: 1;} 
    </style> 
    <![endif]-->
    <script src="SpryAssets/SpryEffects.js" type="text/javascript"></script>
    <script type="text/javascript">
    <!--
    function MM_preloadImages() { //v3.0
      var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
      var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
      if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
    }

    function MM_findObj(n, d) { //v4.01
      var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
      d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
      if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
      for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
      if(!x && d.getElementById) x=d.getElementById(n); return x;
    }

function MM_nbGroup(event, grpName) { //v6.0
  var i,img,nbArr,args=MM_nbGroup.arguments;
  if (event == "init" && args.length > 2) {
    if ((img = MM_findObj(args[2])) != null && !img.MM_init) {
      img.MM_init = true; img.MM_up = args[3]; img.MM_dn = img.src;
      if ((nbArr = document[grpName]) == null) nbArr = document[grpName] = new Array();
      nbArr[nbArr.length] = img;
      for (i=4; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
        if (!img.MM_up) img.MM_up = img.src;
        img.src = img.MM_dn = args[i+1];
        nbArr[nbArr.length] = img;
    } }
  } else if (event == "over") {
    document.MM_nbOver = nbArr = new Array();
    for (i=1; i < args.length-1; i+=3) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = (img.MM_dn && args[i+2]) ? args[i+2] : ((args[i+1])? args[i+1] : img.MM_up);
      nbArr[nbArr.length] = img;
    }
  } else if (event == "out" ) {
    for (i=0; i < document.MM_nbOver.length; i++) {
      img = document.MM_nbOver[i]; img.src = (img.MM_dn) ? img.MM_dn : img.MM_up; }
  } else if (event == "down") {
    nbArr = document[grpName];
    if (nbArr)
      for (i=0; i < nbArr.length; i++) { img=nbArr[i]; img.src = img.MM_up; img.MM_dn = 0; }
    document[grpName] = nbArr = new Array();
    for (i=2; i < args.length-1; i+=2) if ((img = MM_findObj(args[i])) != null) {
      if (!img.MM_up) img.MM_up = img.src;
      img.src = img.MM_dn = (args[i+1])? args[i+1] : img.MM_up;
      nbArr[nbArr.length] = img;
  } }
}
function MM_effectAppearFade(targetElement, duration, from, to, toggle)
{
    Spry.Effect.DoFade(targetElement, {duration: duration, from: from, to: to, toggle: toggle});
}
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>
<meta name="google-site-verification" content="QCG0iVdbmkKMlncL_4ZfRnrR86PHEbplI5dVZhXVY8o" />
</head>

<body onload="MM_preloadImages('images/home_hover.png','images/about_hover.png','images/services_hover.png','images/portfolio_hover.png','images/contact_hover.png','images/resources_hover.png','images/web_icon_fade.png','images/logos_icon_fade.png','images/photo_icon_fade.png','images/cards_icon_fade.png','images/home.png')">
<div id="container">
<div id="header">
<a href="index.php"><img src="images/header_logo.png" width="960" height="250" alt="Todd Day Graphics Logo" border="0" /></a></div> 
```

即使我不熟悉使用包含，我觉得我错过了一些非常简单的东西，为什么活动图像不会显示在实际页面中（index.php、about.php 等）。

# c++ - 在屏幕上绘图

> ID：14992589
> 
> 赞同：4
> 
> 时间：2013-02-21T00:32:08.587
> 
> 标签：c++, windows, drawing

我目前正在使用 OpenCV 开发一个应用程序来对屏幕上的元素进行视觉识别。

虽然不需要过程的可视化表示，但如果我能找到一种方法在屏幕上直接绘制圆圈、线条和可能的文本，而无需应用程序窗口，这对于调试目的将非常有用。

例如，某些应用程序会在屏幕上绘制 HUD。他们怎么做呢？

我需要一种方法让我的绘画始终处于最前面。一般来说，我设法找到的所有方法都涉及在窗口上绘画（WinAPI、Direct2D、OpenGL）。是否有一种解决方法可以让它看起来只是桌面上的一个停留（包括所有打开的窗口）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:01:47.750

出于调试的目的，只需在屏幕上绘制即可。IIRC`GetDC(0)`将为您提供屏幕的设备上下文，但请查看整个功能系列。在 Windows 7 中，它甚至不会破坏其他应用程序的显示，据报道它在 mac 上同样“安全”。

* * *

例如，这会在屏幕的左上角绘制一个椭圆：

```
#include <windows.h>

int main()
{
    HDC const dc = GetDC( 0 );
    Ellipse( dc, 10, 10, 200, 200 );
} 
```

如果图形位于窗口顶部并且该窗口被移动，则图形会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:04:19.823

您可以实现屏幕的设备上下文 (DC)，并像往常一样在该 DC 中绘制。输出将被定向到屏幕。为此，请致电 WinApi `GetDC("DISPLAY")`，如果我没记错的话。

# ios - 如何修复 Xcode 4.6 LLVM 编译器错误？

> ID：14992591
> 
> 赞同：1
> 
> 时间：2013-02-21T00:32:14.230
> 
> 标签：ios, wordpress, clang, xcode4.6

我刚刚从 Subversion Repository 签出了一份适用于 iOS 的 WordPress：http: [//iphone.svn.wordpress.org/trunk/](http://iphone.svn.wordpress.org/trunk/)

然而，尝试在 5.1 或 6.1 模拟器上编译和运行它会给我一个我以前从未见过的奇怪错误：

*clang：错误：没有这样的文件或目录：'/private/tmp/WordPress.build/WordPressComApiCredentials.m' clang：错误：没有输入文件命令/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr /bin/clang 失败，退出代码为 1*

我已经厌倦了清理项目并重置模拟器，但这也无济于事。从其他帖子中，我了解到代码中设置了有关“clang”的内容-但我不知道它是什么。

有人能指出我正确的方向吗？

提前致谢！

# xml - 将同级列表转换为 1 个主列表（XML 到 XML）

> ID：14992596
> 
> 赞同：1
> 
> 时间：2013-02-21T00:32:53.557
> 
> 标签：xml, xslt

我要编写一个 XML 到 XML 的转换。我的输入 XML 文档包含许多同级列表（带有子列表），我想将它们转换为 1 个主列表（不删除子列表）。换句话说，我想在第一个兄弟列表之后抑制每个兄弟列表，但保留所有子列表。

这是一个示例输入 XML 文档：

```
<back>
<index id="subject">
    <title>Subject Index</title>
    <index id="section">
        <list id="index">
            <item>apple</item>
            <item>almond</item>
            <item>american cheese</item>
            <item>Avocado 
                <list id="index">
                    <item>Mexican</item>
                    <item>Chilian</item>
                </list>
            </item>
            <item>asparagus</item>
            <item>anchovie</item>
        </list>
    </index>
    <index id="section">
        <list id="index">
            <item>banana</item>
            <item>barley</item>
            <item>bagel 
                <list id="index">
                    <item>sesame</item>
                    <item>plain</item>
                    <item>everything</item>
                </list>
            </item>
            <list id="index">
                <item>bean 
                    <list id="index">
                        <item>green bean</item>
                        <item>navy bean</item>
                    </list>
                </item>
            </list>
        </list>
    </index>
</index> 
```

我想将上面的内容转换为下面的结构，其中一个主列表 id="index"。子列表应该保留，但兄弟列表应该被禁止。

```
<back>
<index id="subject">
    <title>Subject Index</title>
        <list id="index">
            <item>apple</item>
            <item>almond</item>
            <item>american cheese</item>
            <item>Avocado 
                <list id="index">
                    <item>Mexican</item>
                    <item>Chilian</item>
                </list>
            </item>
            <item>asparagus</item>
            <item>anchovie</item>
            <item>banana</item>
            <item>barley</item>
            <item>bagel
            <list id="index">
                <item>sesame</item>
                <item>plain</item>
                <item>everything</item>
            </list>
            </item>
            <list id="index">
                <item>bean 
                    <list id="index">
                        <item>green bean</item>
                        <item>navy bean</item>
                    </list>
                </item>
            </list>
         </list>
</index> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:57:53.920

**这种转变：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="index[1]/list[1]">
  <xsl:copy>
   <xsl:apply-templates select="@*| ../../index/list/node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="index/index"><xsl:apply-templates/></xsl:template>
 <xsl:template match="/*/*/index[position() >1]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<back>
    <index id="subject">
        <title>Subject Index</title>
        <index id="section">
            <list id="index">
                <item>apple</item>
                <item>almond</item>
                <item>american cheese</item>
                <item>Avocado
                    <list id="index">
                        <item>Mexican</item>
                        <item>Chilian</item>
                    </list></item>
                <item>asparagus</item>
                <item>anchovie</item>
            </list>
        </index>
        <index id="section">
            <list id="index">
                <item>banana</item>
                <item>barley</item>
                <item>bagel
                    <list id="index">
                        <item>sesame</item>
                        <item>plain</item>
                        <item>everything</item>
                    </list></item>
                <list id="index">
                    <item>bean
                        <list id="index">
                            <item>green bean</item>
                            <item>navy bean</item>
                        </list></item>
                </list>
            </list>
        </index>
    </index>
</back> 
```

**产生想要的正确结果：**

```
<back>
   <index id="subject">
      <title>Subject Index</title>
      <list id="index">
         <item>apple</item>
         <item>almond</item>
         <item>american cheese</item>
         <item>Avocado
                    <list id="index">
               <item>Mexican</item>
               <item>Chilian</item>
            </list>
         </item>
         <item>asparagus</item>
         <item>anchovie</item>
         <item>banana</item>
         <item>barley</item>
         <item>bagel
                    <list id="index">
               <item>sesame</item>
               <item>plain</item>
               <item>everything</item>
            </list>
         </item>
         <list id="index">
            <item>bean
                        <list id="index">
                  <item>green bean</item>
                  <item>navy bean</item>
               </list>
            </item>
         </list>
      </list>
   </index>
</back> 
```

# java - 如何在运行 Java Web 应用程序时调用函数？

> ID：14992602
> 
> 赞同：0
> 
> 时间：2013-02-21T00:33:18.880
> 
> 标签：java, web-applications

我有一个 Java (Netbeans) 中的 Web 应用程序。而且我有一个应该在运行 Web 应用程序时准确调用的函数，而不是将它放入静态方法**main**中。

我真的不知道该怎么做。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T10:40:25.810

创建一个实现 ServletConextListener 的类：

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class ListenToMeFirst implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {

    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
        // Run me First while deploying!!!

    }

} 
```

不要忘记把它放在你的 web.xml 文件中：

```
<listener>
  <listener-class>path.to.yourListenerClass.ListenToMeFirst</listener-class>
</listener> 
```

# silverstripe - Silverstripe 在新版本 (3.2) 中针对数据对象的版本化功能

> ID：14992605
> 
> 赞同：1
> 
> 时间：2013-02-21T00:33:45.800
> 
> 标签：silverstripe

我想审计跟踪对数据对象所做的所有更改。假设我有事件数据对象，我想知道谁更改了它，何时更改，更改了什么等（类似于页面）。Silverstripe 网站建议使用 Verioned，但我找不到任何实施示例。它说最好的例子是Pages，它已经实现了Versioned。基本规则是在你的装饰器上定义一个 augmentDatabase() 方法。因此，我想将 DataExtention 用于数据对象（扩展），然后将扩展的用于我的 Event 数据对象。但是有什么简单的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:49:49.093

假设您要管理和监视事件 DataObject 的多个版本，您只需声明要使用 thatDataObject 的版本化扩展

```
Class Event extends DataObject{
    static $extensions = array(
    "Versioned('Stage', 'Live')"
);
    ...
} 
```

然后运行 ​​dev/build 现在应该有一个 Event、Event_Live 和 Event_versions 表。然后，您可以查看 Versioned.php 中可用的方法，并将它们与 Event 一起使用，即 publish()。这应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:06:48.720

"Versioning in SilverStripe is handled through the Versioned class. It's a DataExtension, which allow it to be applied to any DataObject subclass."

"Similarly, any subclass you create on top of a versioned base will trigger the creation of additional tables, which are automatically joined as required."

Here is link to read further with examples [Versioning of Database Content](http://doc.silverstripe.org/framework/en/topics/versioning)

# java - 如何在休眠事件侦听器中获取当前登录用户

> ID：14992623
> 
> 赞同：0
> 
> 时间：2013-02-21T00:35:37.663
> 
> 标签：java, spring, hibernate, tomcat, servlets

我正在使用休眠事件侦听器来记录上次修改时间。我使用自定义集成器来注册事件侦听器。我通过在 META-INF 中创建一个具有特定名称的文件来注册我的集成器，如此[处](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html_single/#services-IntegratorService)所述。我还想记录当前登录用户的用户名。我假设信息将出现在 HttpSession 中。但是在[MergeEventListener](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/event/MergeEventListener.html)中我无权访问 HttpSession。我如何获取 HttpSession 或者有没有其他方法可以获取当前登录的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:48:40.247

我见过的最常见的解决方案是使用 servlet-filter`ThreadLocal`在请求进入时将信息放入 a 中，这样您就可以在堆栈下方的任意点从静态上下文中访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:34:40.610

您可以在单例类中创建一个实用程序方法并放入以下代码行，它随时返回登录的 Usrename

```
SecurityContextHolder.getContext().getAuthentication().getPrincipal() 
```

我在我的网络应用程序中使用 Spring + Hibernate 做了同样的事情。

希望这对您也有帮助。

# configuration - KeyValueTextInputFormat 逗号分隔符

> ID：14992627
> 
> 赞同：0
> 
> 时间：2013-02-21T00:35:56.673
> 
> 标签：configuration, hadoop

我正在使用 KeyValueTextInputFormat 读取/处理逗号分隔的文件：

> 100,56
> 89,586
> 123,68

但是我得到了键中的所有值，值字段为空，即使在将分隔符指定为逗号（，）之后也是如此。它没有选择分隔符，不确定是什么问题，这是我的驱动程序代码：

```
 Configuration conf = new Configuration();
    conf.set("key.value.separator.in.input.line", ",");
    Job job = new Job(conf, "citation data");
    job.setJarByClass(Citation.class);
    job.setJobName("citation data");
    job.setMapperClass(MapClass.class);
    job.setReducerClass(ReduceClass.class);
    job.setInputFormatClass(KeyValueTextInputFormat.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    KeyValueTextInputFormat.addInputPath(job, new Path("input/sample.txt"));
    FileOutputFormat.setOutputPath(job, new Path("output2"));

    System.exit(job.waitForCompletion(true)?0:1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:04:57.137

它对我来说非常好。在我的一个 mapred 代码中，我只是更改了以下内容并且它起作用了：

1.  将 InputFormatClass 更改为使用`KeyValueTextInputFormat`
2.  添加了配置 -`conf.set("key.value.separator.in.input.line", ",");`
3.  确保比在映射器中看起来像`Mapper<Text,Text,K,V>`，这将使 map() 方法的签名是这样的：

> 公共无效映射（**文本**键，**文本**值，OutputCollector 输出，Reporter 报告器）抛出 IOException {}

不需要其他更改，您必须将第一列的数据作为*key*并将第二列作为*value*。

我想你唯一可能错过的是第 3 点。

# silverlight - silverlight Web 服务调用和多线程

> ID：14992631
> 
> 赞同：0
> 
> 时间：2013-02-21T00:36:17.937
> 
> 标签：silverlight

Silverlight Web 服务调用是多线程的吗？

我觉得他们是。

其他人觉得他们不是。

它真的只是假装多线程还是真的多线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:49:38.293

不，他们不是。

不要混淆多线程和异步。是的，Silverlight 中对 Web 服务的调用是异步的，不，它们不是多线程的。

" *Silverlight 应用程序中的 WCF 代理使用启动 Web 服务调用的线程的 SynchronizationContext 来安排在收到响应时调用异步事件处理程序。当从 Silverlight 应用程序的 UI 线程启动 Web 服务调用时，异步事件处理程序代码也将在 UI 线程上执行。”* [http://tomasz.janczuk.org/2009/08/improving-performance-of-concurrent-wcf.html](http://tomasz.janczuk.org/2009/08/improving-performance-of-concurrent-wcf.html)

不过，您可以使用几行代码在多线程上运行它们，如本文所述：[线程化多个异步调用](https://stackoverflow.com/questions/811855/threading-multiple-async-calls-silverlight?rq=1)

# javascript - 使用 javascript 模块模式的 jQuery 变量范围

> ID：14992632
> 
> 赞同：1
> 
> 时间：2013-02-21T00:36:24.330
> 
> 标签：javascript, jquery, scope, module-pattern

在下面的代码中，我为 gobal 变量“myDiv”分配了一个 jQuery 元素。但是在“test()”函数内部，似乎 myDiv 变量已声明但未定义。在我可以对它做任何事情之前，我必须再次重新分配它 $('myDiv') 。

Bogus 变量 xyz 似乎可以正常访问...

```
<!DOCTYPE html>
<htm>
<head>
<title>Javascript Test Code</title>
<script src="js/jquery-1.9.0.min.js"></script>
<script>

var App = App || (function () {

  var myDiv = $('#myDiv'), // define a global jQuery element variable.  
        xyz = 'xyz';       // and a bogus variable as a test.  

  function test()
  {
    console.log('running test...','myDiv is', myDiv); // length is 0
    console.log('xyz is ', xyz); // says xyz

    myDiv = $('#myDiv'); // after selecting with jQuery...

    console.log('running test...','myDiv is', myDiv); //length is 1
    console.log('xyz is ', xyz); // still says xyz
  }

  return {test:test} 

}());

$(function(){

  App.test();

});

</script>
</head>
<body>
<div id="myDiv"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:44:00.643

由于没有渲染任何内容，因此无法访问文档头部的元素。这条线

```
var App = App || (function () { 
```

将执行自执行功能，因为此时 App 未定义。

一旦运行自执行函数，它会查找，`$('#myDiv')`但由于元素不存在，因此不会找到（这始终是为什么匹配选择器的元素数组的长度为 0）。

稍后，当您尝试访问时，`App`它将已经构建。

```
$(function(){
 App.test();
}); 
```

这意味着调用`App`返回已经从自执行函数构建`App`的值，其值已经存储在文档头部执行时。

当您调用该函数时`test`，将反映已加载的状态。但是，您发出的功能较低

```
myDiv = $('#myDiv'); // after selecting with jQuery... 
```

一旦页面已经加载（因为我们已经在 jquery 就绪回调中）。这将在页面上找到元素，因为 DOM 已经被渲染并更新了值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:45:21.267

在上面的特定示例代码中，初始 myDiv 为空，因为在声明 App 时，DOM 尚未完全加载，因此长度`#myDiv`正确为零。

您应该在 DOM 加载后移动要运行的模块，即。移动到脚本的底部。

请参阅示例 jsFiddle - 你的任务很好。[http://jsfiddle.net/yWhbL/](http://jsfiddle.net/yWhbL/)

# selected - 导轨：select_tag

> ID：14992634
> 
> 赞同：0
> 
> 时间：2013-02-21T00:36:29.300
> 
> 标签：selected

我在这里试过这个：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

正是这个：

```
<%= collection_select(:sportlers, :sportlers_id, Sportler.all, :id, :name) %> 
```

但是没有写，如何从 collection_select 中获取选定的值。

我很无奈，你有这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:59:33.327

我认为`collection_select`将采用前两个参数，对象和方法，并使用这些值进行哈希，因此在您的情况下，您可以访问控制器中的值，例如：

```
params[:sportlers][:sportlers_id] 
```

# ios - OCR Tesseract 只设置数字

> ID：14992637
> 
> 赞同：4
> 
> 时间：2013-02-21T00:36:42.763
> 
> 标签：ios, objective-c, xcode, ocr, tesseract

我一般是编程新手，最近进入了应用程序开发。我正在为 iOS 使用 tesseract，我似乎无法弄清楚如何让它只读取数字。

Alex G [Here](https://stackoverflow.com/questions/14001338/tesseract-ocr-only-numbers)发布了一个确切的问题，我和他有相同的文件/问题。答案显然是

> 转到 tessdata\configs\digits 文件。如果您使用 API，则调用 SetVariable("tessedit_char_whitelist", "0123456789-."); 例如，如果您想通过 Objective-C 以编程方式调用 Tesseract，则可以使用 SetVariable API。

除了我仍然不明白如何做到这一点。这个命令行在哪里？我从 Xcode 而不是命令行调用 Tesseract。我也不包含这个 tessdata\configs\digits 文件。

如果有人可以请帮助我，我将不胜感激。

谢谢！

泰德 ![在此处输入图像描述](../Images/bc3bb3ca819e5bc2c4d3629011f20885.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:56:49.307

如果您遵循[如何：在 iOS (SDK 5) 上编译和使用 Tesseract (3.01) 一](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)文，您将在 Init 调用之后放置 SetVariable 语句，如下所示：

```
tesseract->Init([dataPath cStringUsingEncoding:NSUTF8StringEncoding], "eng");
tesseract->SetVariable("tessedit_char_whitelist", "0123456789-."); 
```

# javascript - Python/CGI/Ajax：cgi.FieldStorage 不接收参数

> ID：14992640
> 
> 赞同：3
> 
> 时间：2013-02-21T00:36:49.730
> 
> 标签：javascript, python, ajax, cgi

我正在尝试让 Python、cgi 模块、ajax/javascript 组合工作。由于我的服务器访问的性质（基本上是租用的网络空间），我无法安装 django 或任何其他网络框架之类的东西。我现在被cgi困住了。我可以调用 python 文件来简单地打印出一些东西，但是一旦将参数传递给 python 文件，cgi.FieldStorage() 就不会收到任何输入。当我为 FieldStorage 添加打印语句时，输出如下：

```
FieldStorage(None, None, []) 
```

您可以在下面找到所有必要的代码。本质上，我要做的所有事情（出于测试目的）就是从文本输入中获取一个字符串，在它的末尾添加一个“1”并返回它。

有趣的是，当我使用一个简单的 php 文件来执行完全相同的操作并在其他完全相同的脚本中使用它时，该脚本可以正常工作。这是我尝试过的典型 php 脚本：

```
<?php
$user = urldecode(implode(file('php://input')));
$adj_user = $user . "1";
echo $adj_user;
?> 
```

（请注意，我想使用 python，因为我对它更舒服，而且我有点不喜欢 php。）

我有一种感觉，我只是有点密集，这是非常简单的事情。非常感谢您找到我做错了什么的任何帮助。提前非常感谢！

PS 在我在这里发帖之前，我已经搜索了 stackoverflow 和网络很长一段时间。有很多相关的主题，但没有什么比我所要求的（看似）简单的了。如果这个问题的答案有重复，那么我很抱歉，并感谢您提供链接。再次感谢。

回溯是：

```
Traceback (most recent call last):
  File "/home/www/xxxxx/html/cgi-bin/hello.py", line 14, in &lt;module&gt;
    adj_user = form['user'] +  "1"
  File "/usr/lib/python2.5/cgi.py", line 567, in __getitem__
    raise KeyError, key
KeyError: 'user' 
```

这是“index.html”

```
<!DOCTYPE html>
<html>
    <head>
    <title>Report</title>
    <script type='text/javascript' src='test.js'></script>
    </head>
    <body>
    <form method="post" action=""> 

    <p>Please enter your name here:
    <input type="text" name="user">

    <input type="submit" name="submit" value="Submit" onClick="return hello(this.form.user.value);">
    </p>

    </form>
    </body>
</html> 
```

这是“test.js”文件：

```
function hello(user) {
    // Mozilla version
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    }
// IE version
    else if (window.ActiveXObject) {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }
    //user=encodeURIComponent(user);
    xhr.open("POST", "../cgi-bin/hello.py");
    xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');
    xhr.send(user);

    xhr.onreadystatechange=function() {
        if (xhr.readyState===4) {
            adj_user = xhr.responseText;
            alert ("Hello " + adj_user);
        }
    }
    return false;
} 
```

最后是我服务器的 cgi-bin 中的“hello.py”

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import cgi
form = cgi.FieldStorage()

# enable debugging
import cgitb
cgitb.enable()

print "Content-Type: text/html;charset=utf-8"
print

adj_user = form['user'] +  "1"
print adj_user 
```

* * *

*编辑*

我取得了一些进展，但这仍然不是我所希望的。我将以下块更改如下：

```
 xhr.open("GET", "../cgi-bin/hello.py?user=" + user, true);
    xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');
    xhr.send(); 
```

请注意从 POST 到 GET 的更改和后缀 '"?user=" + user '，以及在 send() 方法中删除了 'user' 参数。

现在这确实是我想要的，但它不应该是那样的。必须有一种方法可以让它以经典的方式工作......

像往常一样，欢迎任何尝试或建议。我真的不知道还能尝试什么。谢谢各位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:46:27.693

数据格式`application/x-www-form-urlencoded`为：

```
key=value&key2=value2 
```

…其中键和值是 URL 编码的。

您只发布一个字段的值，没有键。

```
var postData = encodeURIComponent('user') + '=' + encodeURIComponent(user);
xhr.send(postData); 
```

PHP 代码工作的原因是因为您正在读取原始 POST 数据，而不是`$_POST['user']`（这是您的 Python 等价的）。

您还需要访问`form['user'].value`而不是`form['user']`. 这将返回 a `str`，因此您无法在`+ 1`不执行类型转换的情况下将其连接起来。

# python - 将字符串的 Pandas DataFrame 转换为直方图

> ID：14992644
> 
> 赞同：20
> 
> 时间：2013-02-21T00:37:38.323
> 
> 标签：python, pandas, matplotlib, dataframe

假设我有一个这样创建的 DataFrame：

```
import pandas as pd
s1 = pd.Series(['a', 'b', 'a', 'c', 'a', 'b'])
s2 = pd.Series(['a', 'f', 'a', 'd', 'a', 'f', 'f'])
d = pd.DataFrame({'s1': s1, 's2', s2}) 
```

真实数据中的字符串非常稀疏。我想创建字符串出现的直方图，看起来像 d.hist() （例如，带有子图）为 s1 和 s2 （每个子图一个）生成的字符串。

只是做 d.hist() 给出了这个错误：

```
/Library/Python/2.7/site-packages/pandas/tools/plotting.pyc in hist_frame(data, column, by, grid, xlabelsize, xrot, ylabelsize, yrot, ax, sharex, sharey, **kwds)
   1725         ax.xaxis.set_visible(True)
   1726         ax.yaxis.set_visible(True)
-> 1727         ax.hist(data[col].dropna().values, **kwds)
   1728         ax.set_title(col)
   1729         ax.grid(grid)

/Library/Python/2.7/site-packages/matplotlib/axes.pyc in hist(self, x, bins, range, normed, weights, cumulative, bottom, histtype, align, orientation, rwidth, log, color, label, stacked, **kwargs)
   8099             # this will automatically overwrite bins,
   8100             # so that each histogram uses the same bins
-> 8101             m, bins = np.histogram(x[i], bins, weights=w[i], **hist_kwargs)
   8102             if mlast is None:
   8103                 mlast = np.zeros(len(bins)-1, m.dtype)

/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/lib/function_base.pyc in histogram(a, bins, range, normed, weights, density)
    167             else:
    168                 range = (a.min(), a.max())
--> 169         mn, mx = [mi+0.0 for mi in range]
    170         if mn == mx:
    171             mn -= 0.5

TypeError: cannot concatenate 'str' and 'float' objects 
```

我想我可以手动浏览每个系列，执行 a `value_counts()`，然后将其绘制为条形图，然后手动创建子图。我想检查是否有更简单的方法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-26T21:35:32.600

重新创建数据框：

```
import pandas as pd
s1 = pd.Series(['a', 'b', 'a', 'c', 'a', 'b'])
s2 = pd.Series(['a', 'f', 'a', 'd', 'a', 'f', 'f'])
d = pd.DataFrame({'s1': s1, 's2': s2}) 
```

根据需要获取带有子图的直方图：

```
d.apply(pd.value_counts).plot(kind='bar', subplots=True) 
```

![在此处输入图像描述](../Images/6f071fbe2133b3796a7af49fd3049108.png)

问题中提到的OP `pd.value_counts`。我认为缺少的部分只是没有理由“手动”创建所需的条形图。

的输出`d.apply(pd.value_counts)`是一个熊猫数据框。我们可以像任何其他数据框一样绘制值，选择该选项可以`subplots=True`得到我们想要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T06:13:43.127

您可以使用`pd.value_counts`（value_counts 也是一个系列方法）：

```
In [20]: d.apply(pd.value_counts)
Out[20]: 
   s1  s2
a   3   3
b   2 NaN
c   1 NaN
d NaN   1
f NaN   3 
```

然后绘制生成的 DataFrame。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:50:21.410

我会将系列推入`collections.Counter`（[文档](http://docs.python.org/2/library/collections.html#collections.Counter)）（您可能需要先将其转换为列表）。我不是`pandas`专家，但我认为你应该能够将`Counter`对象折叠回 a `Series`，由字符串索引，并使用它来制作你的情节。

这是行不通的，因为当它试图猜测 bin 边缘应该在哪里时，它（正确地）引发了错误，这对于字符串来说毫无意义。

# mysql - phpmyadmin sql 转储到 XML

> ID：14992645
> 
> 赞同：0
> 
> 时间：2013-02-21T00:37:56.820
> 
> 标签：mysql, sql, xml

我希望通过 phpmyadmin 将特定的数据库表转换为 XML 文件。我已经选择了所需的数据并将其导出，但如果可能，我需要更改生成的 XML 文件的格式。

就目前而言，我在从 phpmyadmin 导出时得到以下信息：

```
<database name="awarddb">
    <table name="award">
        <column name="award_id">45</column>
        <column name="award_title">Name</column>
        <column name="award_description">Description here</column>
        <column name="award_img">image.jpg</column>
    </table>
</database> 
```

我要做的是导出为以下格式：

```
<awards>
    <award>
        <id>45</id>
        <name>Name</name>
        <description>Description here</description>
        <img>image.jpg</img>
    </award>
</awards> 
```

提前致谢

本

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T00:43:47.127

我不认为你在寻找什么可以被 mysql 覆盖。

您需要使用正则表达式。

# java - 查找 Java 函数的开始和结束

> ID：14992653
> 
> 赞同：1
> 
> 时间：2013-02-21T00:38:46.153
> 
> 标签：java, metaprogramming, syntax-highlighting

在 Java 中，是否可以为 Java 源代码示例生成相应的大括号，给定源代码作为字符串，以及大括号的开头？

```
public class FindFunctionStartAndEnd{
    public static Object findCorrespondingCurlyBrace(String sourceCode, string startingPosition){
        //return the string position that corresponds to the matching curly brace
        //the input string should be the source code of a Java class
        //if sourceCode is not valid Java code, return false
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:46:14.037

您需要遍历字符串并从起始位置开始计算开括号和右括号并将它们匹配起来。问题是，在某些情况下您需要忽略它们（这里只是几个示例）：

*   在行注释中（在 a`//`和*"new line"*之间）
*   在块注释中（在`/*`（不被行注释隐藏）和之间`*/`）
*   在`String`文字中（在两个匹配`"`的 's 之间（忽略转义 ( `\"`，但注意`\\"`or `\\\"`！)））
*   在`char`文字中（在两个匹配`'`的 's 之间）
*   可能更多

您可以在遍历字符串时保留所有这些计数器，或者您可以提出一个正则表达式来匹配整个函数体（包括列表中的所有这些情况），然后应用一次并查看匹配的位置索引在找到尸体后结束。

在所有情况下，任何一个都应该参与其中，所以我建议你去谷歌看看你是否能找到一些预制的正则表达式的例子，例如。

# javafx - Scene.cursorProperty() 如何绑定或添加监听器

> ID：14992654
> 
> 赞同：1
> 
> 时间：2013-02-21T00:38:51.437
> 
> 标签：javafx, scene

我想知道如何从 Scene 对象添加监听器或绑定 cursorProperty() 方法。我正在尝试检测当前光标类型正在调整场景的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T19:31:23.307

不是最干净的方法，但它帮助我找出发生了什么：

```
@Override
public void start(final Stage stage) {

    // .. initialize scene

    addCursorChangeListeners(mainPane);
    scene.cursorProperty().addListener(new ChangeListener<Cursor>() {
        @Override
        public void changed(final ObservableValue<? extends Cursor> observable, final Cursor oldValue, final Cursor newValue) {
            LOGGER.info("Cursor changed for " + scene + " from: " + oldValue + " to: " + newValue);
        }
    });
}

private void addCursorChangeListeners(final Parent parent) {
    for (final Node child : parent.getChildrenUnmodifiable()) {
        child.cursorProperty().addListener(new ChangeListener<Cursor>() {
            @Override
            public void changed(final ObservableValue<? extends Cursor> observable, final Cursor oldValue, final Cursor newValue) {
                LOGGER.info("Cursor changed for " + child + " from: " + oldValue + " to: " + newValue);
            }
        });
        if (child instanceof Parent) {
            addCursorChangeListeners((Parent) child);
        }
    }
} 
```

`Node`后面添加的s这里不考虑。

# php - 计算 2 个日期和另一个标准 PHP MYSQL 之间的天数

> ID：14992655
> 
> 赞同：0
> 
> 时间：2013-02-21T00:38:51.390
> 
> 标签：php, mysql

我是编程的新手，我遇到了一个错误，经过几个小时的搜索我无法解决。

我正在使用表单来执行搜索并在表格中显示数据，这部分相当容易......但我也想计算最终结果中有多少天，而不是我第一次使用的日期询问。

该查询在 2 个日期和指定公司之间的天数内搜索结果，问题出在最终结果中，它计算的是我的结果有多少天，而不是我搜索的天数。

示例：如果我在 2 月 11 日和 2 月 20 日之间搜索 2 个日期，其中公司 = 1

如果公司 1 只有 3 天的结果，我希望它只计算 3 天。

我知道我的代码在那部分是错误的，但我无法让它做我想做的事。

这是我的一小段代码来解释它：

```
if (isset($_POST['search'])) {

$date1 = mysql_prep($_POST['date1']);
$date2 = mysql_prep($_POST['date2']);
$latte = mysql_prep($_POST['latte']);

$query = "SELECT * FROM payroll WHERE (day BETWEEN '{$date1}' AND '{$date2}') AND (company = '{$latte}') ORDER BY day ASC ";

$result = mysql_query($query, $connection);     

$woof = "SELECT SUM(hours) FROM (SELECT * FROM payroll WHERE (day BETWEEN '{$date1}' AND '{$date2}') AND (company = '{$latte}') ORDER BY day ASC) AS subt ";
$raw = mysql_query($woof, $connection);
if(!$raw) { die(mysql_error());}
$meow = mysql_result($raw, 0, 0);

$diff = abs(strtotime($date2) - strtotime($date1));
$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24) +1);
if(!$result) {
    echo "FAIL"; 
    } else {
    echo "<table>
<tr>
<th> Date </th>
<th> Hours </th>    
<th> Job Title </th>
<th> Job Description </th>
<th> Paid </th>
<th> For </th>
</tr>"; 
while($row = mysql_fetch_array($result))
{   

$company = $row['company']; 

 if($company == 0) {
$company = "Wilson Electric";
} if($company == 1) {
    $company = "Wilson Rental";
    } if ($company == 2) {
        $company = "Church of Christ";
        }
echo "<tr>";
echo "<td class=\"center\">" . $row['day'] . "</td>";
echo "<td class=\"center\">" . $row['hours'] . "</td>";
echo "<td style=\"padding:5px;\">" . $row['job_title'] . "</td>";
echo "<td style=\"padding:5px;\">" . $row['job_description'] . "</td>";
echo "<td class=\"center\">" . $row['paid'] . "</td>";
echo "<td style=\"padding:5px;\">" . $company . "</td>"; 

echo "</tr>";
}
echo "<tr>";
echo "<td class=\"center\"> Total Days:  " . $days . "</td>";
echo "<td class=\"center\"> Total Hours: " . $meow . "</td>";
echo "</tr>";
}
} 
```

感谢您阅读它，我希望有人能给我一个解决方案，我知道一定很简单，但我就是想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:48:53.727

如果您想要一个`day`与规范匹配的不同值的计数，那么您可以将一个简单的表达式添加到“woof”SQL 语句的 SELECT 列表中：

```
SELECT SUM(hours), COUNT(DISTINCT `day`) AS cnt_days FROM ... 

$meow = mysql_result($raw, 0, 0);
$days = mysql_result($raw, 0, 1); 
```

请注意，如果不止一行具有相同的`day`值（满足所有谓词），则该`day`值仅计算一次。如果您想要计算具有非 NULL`day`值的行数，包括任何重复项，则省略 DISTINCT 关键字。）

* * *

请注意，SQL 语句可以更简单地编写；您可以省略（不必要的）内联视图（即派生表）和不必要的 ORDER BY ...

```
SELECT SUM(p.hours) AS sum_hours
     , COUNT(DISTINCT p.day) AS cnt_days
  FROM payroll p
 WHERE p.day BETWEEN '{$date1}' AND '{$date2}'
   AND p.company = '{$latte}' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T00:49:38.797

也许你可以使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)

# macos - Applescript将祖父文件夹+父文件夹前缀添加到文件名

> ID：14992656
> 
> 赞同：0
> 
> 时间：2013-02-21T00:38:56.920
> 
> 标签：macos, applescript, osx-mountain-lion, automator

我有多个带有子文件夹的文件夹，其中包含需要用父文件夹+祖父文件夹名称标记的文件。

即Folder 1>Folder 2>File.jpg 需要重命名为Folder_1_Folder_2_File.jpg

我能够找到一个可以做到这一点的脚本，并且一直在尝试对其进行逆向工程，但没有任何运气。下面的脚本提出了两个挑战，1）它包括从根目录开始的整个路径，第二，它删除了文件的名称，因此只允许在一个文件出现错误之前重命名。我知道问题在于脚本正在重命名整个文件，我只是不知道如何继续。

```
tell application "Finder"
set a to every folder of (choose folder)
repeat with aa in a
    set Base_Name to my MakeBase(aa as string)
    set all_files to (every file in aa)
    repeat with ff in all_files
        set ff's name to (Base_Name & "." & (ff's name extension))
    end repeat

end repeat
end tell

to MakeBase(txt)
    set astid to AppleScript's text item delimiters
    set AppleScript's text item delimiters to ":"
    set new_Name_Raw to every text item of txt
    set AppleScript's text item delimiters to "_"
    set final_Name to every text item of new_Name_Raw as text
    set AppleScript's text item delimiters to astid
    return final_Name
end MakeBase 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:12:57.393

```
tell application "Finder"
    repeat with theItem in (the selection as list)
        set theItem's name to (theItem's container's container's name) & "_" & (theItem's container's name) & "_" & (theItem's name)
    end repeat
end tell 
```

如果您想了解 AppleScript 如何与应用程序一起工作，请查看应用程序的 AppleScript 命令字典（AppleScript 编辑器 > 文件 > 打开字典...）。

*编辑 1*

这是一个版本，您可以在其中选择包含要重命名的项目的文件夹的“祖父文件夹”：

```
tell application "Finder"
    set itemsToRename to {}
    set selectedFolders to (the selection as list)
    repeat with selectedFolder in selectedFolders
        set childFolders to every item of selectedFolder
        repeat with childFolder in childFolders
            set grandchildItems to every item of childFolder
            set itemsToRename to itemsToRename & grandchildItems
        end repeat
    end repeat

    repeat with theItem in itemsToRename
        set theItem's name to (theItem's container's container's name) & "_" & (theItem's container's name) & "_" & (theItem's name)
    end repeat
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:58:33.170

尝试：

```
set myFolder to do shell script "sed 's/\\/$//' <<< " & quoted form of POSIX path of (choose folder)
set myFiles to paragraphs of (do shell script "find " & quoted form of myFolder & " \\! -name \".*\" -type f -maxdepth 2 -mindepth 2")
repeat with aFile in myFiles
    tell application "System Events" to set file aFile's name to (do shell script "sed 's/.*\\/\\([^/]*\\)\\/\\([^/]*\\)\\/\\([^/]*$\\)/\\1_\\2_\\3/' <<< " & quoted form of aFile)
end repeat 
```

# c# - 从组合框上的多项选择中获取值

> ID：14992657
> 
> 赞同：1
> 
> 时间：2013-02-21T00:39:02.450
> 
> 标签：c#, asp.net, combobox, telerik, telerik-combobox

我有一个 radcombobox，在项目名称前有一个复选框。

**这是我的代码。**

```
<telerik:RadComboBox ID="cbx1" runat="server" Skin="Default" CheckBoxes="true" EmptyMessage="Sample">
                                <Items>
                                    <telerik:RadComboBoxItem Text="sample1" Value="1" />
                                    <telerik:RadComboBoxItem Text="sample2" Value="2" />
                                    <telerik:RadComboBoxItem Text="sample3" Value="3" />
                                    <telerik:RadComboBoxItem Text="sample4" Value="4" />
                                    <telerik:RadComboBoxItem Text="sample5" Value="5" />

                                </Items>
                            </telerik:RadComboBox> 
```

我怎样才能获得组合框的多个值的值。

我尝试使用此代码，但它没有给我价值。

```
if (cbx1.CheckedItems.Count > 0)
                {
                    strcbx = string.Empty;
                    foreach (var item in cbx1.CheckedItems)
                    {
                        strcbx = "'" + item.value + "'";
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T06:58:13.733

尝试这个。

```
 string items = "";
    if (RadComboBox1.CheckedItems.Count>0)
    {
        foreach (RadComboBoxItem item in RadComboBox1.CheckedItems)
            items += item.Text+ ",";
    }
    Response.Write(items);`` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-03T06:32:13.437

```
 if (cbx1.CheckedItems.Count>0)
            {
               string strcbx = string.Empty;
                foreach (var item in cbx1.CheckedItems)
                {
                    strcbx += "'" + item.value + "'" +",";
                }
                string listvalue = strcbx.TrimEnd(',');
            } 
```

# bash - 如何在 Bash 中检索变量的前 n 个字符？

> ID：14992658
> 
> 赞同：66
> 
> 时间：2013-02-21T00:39:06.617
> 
> 标签：bash

如何使用 Bash 检索变量的前 10 个字符？

```
FOO="qwertzuiopasdfghjklyxcvbnm" 
```

我需要得到`qwertzuiop`.

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-21T00:43:27.313

如果变量是：`FOO="qwertzuiopasdfghjklyxcvbnm"`

然后

```
 echo ${FOO:0:10} 
```

将给出前 10 个字符。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-02-21T00:47:58.580

使用`head`命令。

```
echo $FOO | head -c 10
=> qwertzuiop 
```

# c - gethostbyaddr 和 netdb 实现文件

> ID：14992659
> 
> 赞同：0
> 
> 时间：2013-02-21T00:39:13.487
> 
> 标签：c, networking, dns, gethostbyaddr

gethostbyaddr 和 netdb.h 函数在哪里实现？我只能找到它被外部化的头文件（netdb.h）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:20:41.293

它在 glibc 中实现。

顺便说一句，使用 getnameinfo() 和 getaddrinfo()。gethostbyaddr() 已过时，主要是因为 IPv6。

# android - ViewPager.PageTransformer 无法解析为类型

> ID：14992661
> 
> 赞同：7
> 
> 时间：2013-02-21T00:39:26.073
> 
> 标签：android, android-support-library

我得到 ViewPager.PageTransformer 无法解析为我已将 sdk 更新为最新版本并在我的 libs 文件夹中有最新版本的 android-support-v4 的类型，我阅读了这篇文章[ViewPager.PageTransformer 显示错误 ViewPager cant rersolved to a键入我正在使用 androidsupportv4 jar 修订版 9](https://stackoverflow.com/questions/14772970/viewpager-pagetransformer-showing-error-viewpager-cant-rersolved-to-a-type-i-am)并执行了相同的步骤，但它没有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-21T14:42:45.457

你应该`ViewPager.`从要求声明中删除。

所以，这看起来**就像** `PageTransformer`

另外，进口`android.support.v4.view.ViewPager.PageTransformer;`

这对我来说很完美。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-19T09:02:51.790

好的，我找到了解决方案。您需要更新您的 Android 支持库包。但是，如果您现在拥有它，则需要先将其卸载，然后重新安装才能获得新的。

如果您有 IntellijIdea：

1.  从“工具/Android/SDK 管理器”打开 SDK 管理器窗口
2.  找到 Exteras 文件夹，然后检查 Android 支持库。如果其状态为已安装，请单击“删除 1 个包...”以将其删除。
3.  检查此软件包并单击安装按钮。
4.  导航到 \extras\android\support\v4 然后复制 android-support-v4.jar 并将其粘贴到您的 Libs 文件夹中。
5.  Idea 应该自动重新编译项目，但是如果它没有这样做，那么您应该通过单击“Build/Rebuild Project”手动重新编译它

而已 ;）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T17:14:27.880

意识到我从来没有回答过这个问题。为了解决这个问题，我从另一台计算机上抓取了 android-support-v4 并且它起作用了。这可能与卸载和重新安装具有相同的效果，但我没有尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T05:06:05.803

您将需要获取 Android 支持库的第 18 版。确保使用 SDK 管理器更新到该版本，然后将“android-support-v4.jar”和“android-support-v13.jar”复制到项目的“libs”文件夹中。

那应该解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T15:11:57.053

在某一时刻，我也发现自己遇到了同样的问题。显然这是因为每当我决定在 Eclipse 中启动 Android SDK 管理器时，我一直在排除更新过程中的一个重要步骤。

尝试更新时，我总是“取消选中”“已安装”选项。我一直认为，由于另一个标记为“新/更新”的复选标记将使更新对安装可见。但实际上并非如此。一旦我勾选了“已安装”，我就会看到以前安装的组件的更新。然后，我能够在我的计算机上安装我认为已经是最新的缺失功能。

希望您发现这有助于获取最新信息。这对我有误导。

--***编辑***--

然而，在获得最新信息后，您引用的帖子最终为我解决了这个问题。我没有找到与最新版本的兼容性库同步的快速有效方法。这可能是因为在创建应用程序时，它会将最新版本本地复制到项目中。因此，您必须手动复制最新的兼容性库。

请务必将最新的兼容性库复制到它也依赖的所有其他支持 Android 库。否则，您将在本地项目设置中使用新的兼容性库出现构建错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-17T05:39:49.010

1.  从 sdk 管理器更新您的 android 支持库。
2.  将`android-support-v4.jar`from复制`\sdk\extras\android\support\v4`到项目的`libs`文件夹中。
3.  进口`android.support.v4.view.ViewPager.PageTransformer`
4.  将 ZoomOutPageTransformer 实现更改`ViewPager.PageTransformer`为`ZoomOutPageTransformer implements PageTransformer`.

就是这样，所有错误都将消失，动画效果非常好。

# clearcase - 失去了视图和vob导航器

> ID：14992666
> 
> 赞同：1
> 
> 时间：2013-02-21T00:40:07.833
> 
> 标签：clearcase, remote-client

我创建了一个工作空间来包含我的一个文件夹，当我单击确定时，现在 ClearCase Navigator 仅显示该文件夹，并且我的 vobs 和视图从 GUI 中消失了。我怎样才能把它们带回来？我选择了 Window -> Show View -> clear Case navigator，但导航器现在只显示一个文件夹，我无法让它显示 vobs 和视图。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:04:53.980

First of all, by "working space" I meant "working set".

After some time trying to figure it out, I just went ahead and removed the "working set" I had created, and immediatelly my vobs and views came back to the ClearCase Navigator box.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:31:19.850

这似乎是工作集背后的意图：请参阅“[关于 Rational ClearCase Navigator 视图中的工作集](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.ccrc.help.doc/topics/c_filters.htm)”。

> 使用工作集来限制出现在 ClearCase Navigator 视图中的项目。
> 
> ClearCase Navigator 视图中可能存在大量节点。您可能一次只需要查看少量这些节点。

只要此工作集处于活动状态，您就无法看到其他 vobs/视图。

> 当工作集打开时，工作集图标过滤的 ClearCase 树图标出现在 ClearCase Navigator 选项卡的左角，工作集的名称出现在右侧的括号中：(working set_name)。

# java - 加权联合查找算法

> ID：14992667
> 
> 赞同：3
> 
> 时间：2013-02-21T00:40:08.383
> 
> 标签：java, eclipse, algorithm

我是 java 新手，我有一个加权联合查找算法。当我在剪贴簿页面上的 Eclipse 中运行此代码时，它会一直在评估。

爪哇代码

```
public class weightedUF {
    private int[] id;
    private int[] sz;

    public weightedUF(int N) {
        id = new int[N];
        sz = new int[N];
        for (int i = 0; i < N; i++) {
            id[i] = i;
        }
        for (int i = 0; i < N; i++) {
            sz[i] = 1;
        }
    }

    private int root(int i) {
        while (i != id[i]) {
            i = id[i];
        }
        return i;
    }

    public boolean connected(int p, int q) {
        return root(p) == root(q);
    }

    public void union(int p, int q) {
        int i = root(p);
        int j = root(q);
        if (sz[i] < sz[j]) {
            id[i] = j;
            sz[j] += sz[i];
        }
        else {
            id[j] = i;
            sz[i] += sz[j];
        }
        id[i] = j;
    }
} 
```

剪贴簿测试代码

```
weightedUF union = new weightedUF(10);
union.union(9, 2);
union.union(5, 2);
union.union(1, 8);
union.union(5, 7);
union.union(4, 3);
union.union(0, 7);
union.union(1, 3);
union.union(2, 4);
union.union(8, 6);
union 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:46:53.663

我认为您应该删除最后一行：

```
 id[i] = j; 
```

它正在破坏您的 id 数组。

# qt - 连接到 QNetworkReply::error 信号

> ID：14992668
> 
> 赞同：11
> 
> 时间：2013-02-21T00:40:10.480
> 
> 标签：qt, qt5

我正在使用 Qt5 的新连接语法。QNetworkReply 有一个称为 error 的信号[和一个称为](http://qt-project.org/doc/qt-5.0/qtnetwork/qnetworkreply.html#error-2)[error](http://qt-project.org/doc/qt-5.0/qtnetwork/qnetworkreply.html#error)的函数。这会在尝试连接到信号时导致问题：

```
connect(reply, &QNetworkReply::error, this, &MyClass::error); 
```

> 错误 C2664: 'QMetaObject::Connection QObject::connect(const QObject *,const char *,const QObject *,const char *,Qt::ConnectionType)' : 无法将参数 2 从 'overloaded-function' 转换为 'const char *' 上下文不允许消除重载函数的歧义

如何告诉编译器 (MSVC) 我想连接到信号而不是函数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-21T01:28:34.387

您需要手动转换函数指针以寻址正确的函数：

```
connect(reply, static_cast<void (QNetworkReply::*)(QNetworkReply::NetworkError)>(&QNetworkReply::error), this, &MyClass::error); 
```

这是对重载函数使用新语法的显[着结果：](http://qt-project.org/wiki/New_Signal_Slot_Syntax)

> 缺点：
> 
> 在重载的情况下非常复杂的语法？

PS您可以在上面的链接中找到类似的示例：

```
 QObject::connect(socket, static_cast<void (QTcpSocket::*)(QAbstractSocket::SocketError)>(&QAbstractSocket::error), [socket] (QAbstractSocket::SocketError) {
        qDebug()<< "ERROR " << socket->errorString();
        socket->deleteLater();
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-02T09:55:50.180

从**Qt 5.15** `QNetworkReply::error`开始不再是一个信号。幸运的是，您可以连接到[`&QNetworkReply::errorOccurred`](https://doc.qt.io/qt-5/qnetworkreply.html#errorOccurred)而不需要类型转换：

```
connect(reply, &QNetworkReply::errorOccurred, this,
            [reply](QNetworkReply::NetworkError) {
               qCDebug() << "Error " << reply->errorString(); 
            }); 
```

# linux - 从 C++ 应用程序代码调用 Linux 系统调用？

> ID：14992669
> 
> 赞同：2
> 
> 时间：2013-02-21T00:40:10.803
> 
> 标签：linux, memory, ubuntu, shared-memory

（放轻松——我不是 linux 专家）

有什么阻止我直接从 Linux 上运行的 C++ 应用程序调用系统调用？

我对以下两个有关在进程之间共享内存的“新”功能/特性感兴趣：

[http://lwn.net/Articles/405346/](http://lwn.net/Articles/405346/)

我会在 Windows 上遇到像用户/内核模式这样的安全权限吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:50:01.213

C++ 中没有什么可以从本质上阻止您“直接调用系统调用”。当您调用 , 和其他系统调用时，您已经在这样`read()`做了`write()`。`open()`

与往常一样，您必须了解权限。从您自己的链接：

> 当前实现不使用 flags 参数。正如所料，copy_to_process() 将数据写入目标进程的地址空间。要么两个进程必须具有相同的所有权，要么复制进程必须具有 CAP_SYS_PTRACE 能力；否则不允许复制。

因此，您当然可以调用这些函数，但请注意它们可能会返回错误代码，因此请确保您有适当的错误处理。当然，这假设您的内核版本实际上支持这些系统调用。如果您是 Linux 新手，您可能无法将文章中提到的补丁应用到您的内核。

# windows - 如何配置窗口以在 UPnP 图标列表中显示自定义图标

> ID：14992672
> 
> 赞同：2
> 
> 时间：2013-02-21T00:40:27.290
> 
> 标签：windows, windows-7, upnp

Wen Upnp 设备配置有：

```
<iconList><icon>
     <mimetype>image/png</mimetype>
     <width>93</width>
     <height>45</height>
     <depth>32</depth>
     <url>/img/icon.png</url>
  </icon></iconList> 
```

当 Windows 7 在 Windows Explorer 网络窗口中显示设备时，它不使用 icon.png，而是使用通用图标。是否有可能改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T13:55:32.107

即使您使自定义图标可用，Windows 也将始终显示其自己的图标。资料来源： http: [//www.codeproject.com/Articles/153509/Advertise-your-Applications-Webinterface-on-the-Lo](http://www.codeproject.com/Articles/153509/Advertise-your-Applications-Webinterface-on-the-Lo)

# http - Firefox 控制台中的时间测量具体测量什么？

> ID：14992673
> 
> 赞同：0
> 
> 时间：2013-02-21T00:40:28.003
> 
> 标签：http, firefox, networking

如果你去脸书。

```
[19:35:16.999] GET https://www.facebook.com/ [HTTP/1.1 200 OK 257ms] 
```

如果你去推特，

```
[19:36:42.307] GET https://twitter.com/ [HTTP/1.1 200 OK 240ms] 
```

如果您访问我的入门级托管站点（godaddy 等）

```
[19:37:12.443] GET http://boomaamama.com/dev/ [HTTP/1.1 200 OK 150ms] 
```

这是这样的：

```
[19:42:19.759] GET http://stackoverflow.com/ [HTTP/1.1 200 OK 117ms] 
```

bit.ly

```
[20:13:46.851] GET https://bitly.com/ [HTTP/1.1 200 OK 88ms] 
```

我发现我的网站速度更快很奇怪，并认为这可能是因为我不明白这个初始获取请求测量的是什么。

它是在测量初始 html/css blob...即 index.htm...或 rout_to_here.php 的下载时间吗？

还是在测量其他东西？

它主要是基于位置而不是基于服务水平吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:58:38.603

它测量单个请求所需的总时间，即页面本身的 HTML 文档。

时间可能包括：

*   DNS 查询
*   连接
*   发送
*   等待
*   接收

如果您获得 FireBug 插件，您可以使用 Net 选项卡查看每个请求的详细信息，包括每个步骤的时间。

# python - 以类似文件的方式读取 HTTP 响应的库？

> ID：14992675
> 
> 赞同：1
> 
> 时间：2013-02-21T00:41:09.390
> 
> 标签：python, http

我需要使用 Python 发出 HTTP 请求来下载一个大文件，但我需要能够使用类似文件的指针读回响应的块，有点像这个伪代码：

```
request = HTTPRequest(GET, "http://localhost/bigfile.bin")
request.send()

response = request.get_response()
print "File is {} bytes long.".format(response.content_length)

while True:
    chunk = response.read(1024)
    print "Chunk Length: {}".format(len(chunk)) 
```

有这样的API吗？我只想在`read`调用该方法时从源代码读取，而不是将响应中的任何内容（标题除外）带入内存，直到我想要它为止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:42:58.730

是的。检查[`Requests`包裹](http://python-requests.org/)。

您可以使用该[`stream`选项](http://docs.python-requests.org/en/latest/user/advanced/#body-content-workflow)来避免获取响应正文，直到您访问它：

```
req = requests.get('http://localhost/bigfile.bin', stream=True)
print "File is {} bytes long.".format(req.headers['Content-Length'])

while True:
    chunk = req.raw.read(1024)
    print "Chunk Length: {}".format(len(chunk)) 
```

# iis - 如何在 % { dir IIS:\AppPools\$_.Name } 中创建一个 For..Each 值不是文字

> ID：14992678
> 
> 赞同：2
> 
> 时间：2013-02-21T00:41:23.103
> 
> 标签：iis, wmi, powershell-2.0, application-pool, worker-process

**这是行不通的**

`>dir IIS:\AppPools\ | % { dir IIS:\AppPools\$_.Name\WorkerProcesses }`

**更多信息**

我想使用 Powershell 来获取每个应用程序池的 PID。我知道我可以使用 WMI 来获取类似以下命令的信息，但我正在尝试使用 Powershell 的 WebAdministration 模块。

**WMI 方法（工作示例）**

`Get-WmiObject -NameSpace 'root\WebAdministration' -class 'WorkerProcess' -ComputerName 'host' | select AppPoolName, ProcessId | ft -a`

```
AppPoolName                   ProcessId
-----------                   ---------
MSExchangePowerShellAppPool        5432
MSExchangeServicesAppPool          3604
MSExchangeOWAAppPool               7056
MSExchangeAutodiscoverAppPool      6012
DefaultAppPool                     3288
MSExchangeSyncAppPool              2944 
```

**Powershell 方法（不工作示例.. 帮助！）**

如何结合两个命令的输出（可能作为单行）来为我提供每个应用程序池的 PID？

```
[PS] C:\Windows\system32>import-module WebAdministration
[PS] C:\Windows\system32>dir IIS:\AppPools

Name                     State        Applications
----                     -----        ------------
Classic .NET AppPool     Started
DefaultAppPool           Started      Default Web Site
                                      /Rpc
                                      /RpcWithCert
                                      /ArchiveProxy
MSExchangeAutodiscoverAp Started      /Autodiscover
pPool                                 /Autodiscover/bin
                                      /Autodiscover/help
MSExchangeECPAppPool     Started      /ecp
MSExchangeOWAAppPool     Started      /owa
                                      /owa/oma
                                      /ArchiveProxyOwa
MSExchangeOWACalendarApp Started      /owa/Calendar
Pool
MSExchangePowerShellAppP Started      /PowerShell
ool
MSExchangeServicesAppPoo Started      /EWS
l                                     /EWS/bin
MSExchangeSyncAppPool    Stopped      /Microsoft-Server-ActiveSync 
```

我要组合的第二个查询是：

```
[PS] C:\Windows\system32>dir IIS:\AppPools\DefaultAppPool\WorkerProcesses  | fl

processId : 3904
Handles   : 89516
state     : Running
StartTime : 2/19/2013 10:34:57 PM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:07:16.073

你只需要扩展你需要的属性：

```
dir IIS:\AppPools\ |select -expand name| % { dir IIS:\AppPools\$_\WorkerProcesses } 
```

# java - Jackson 1.9 中的@JsonSerialize 发生了什么？

> ID：14992680
> 
> 赞同：0
> 
> 时间：2013-02-21T00:41:42.330
> 
> 标签：java, scala, jackson

看起来`@JsonSerialize`在较新版本的 Jackson 中缺少注释。找不到他们发生了什么。想要在 Scala 中执行以下操作：

```
@JsonSerialize(using=classOf[YourSerializer])
@JsonDeSerialize(using=classOf[YourDeserializer]) 
```

我进口了`import org.codehaus.jackson.annotate._`. 当我去编译时，我得到以下`not found: type JsonSerialize`.

这一切都去哪儿了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:43:39.647

看起来它被捆绑在一个新的包中。

`import org.codehaus.jackson.map.annotate._`

# python - Python中的递归函数提出：“TypeError：'int'对象不可迭代”

> ID：14992683
> 
> 赞同：0
> 
> 时间：2013-02-21T00:41:55.480
> 
> 标签：python, recursion, sum

我从[这个问题](https://stackoverflow.com/questions/14991348/how-to-write-this-sum-of-a-sum-recursively-in-python)中得到的这个功能如下：

```
def f(n, p, k, t):
    return sum(sum(1 if n == 3 else
                   (0 if k == 1 else
                    (1/36) * f(n-1, p, k-1, t-(max(p,i)))
                    for i in xrange(1, 7)))
                   for p in xrange(1, 7))

print sum(f(5,j,3,15) for j in xrange(1, 7)) 
```

当我运行它时，我得到这个以以下结尾的长回溯错误序列：

```
File "C:/Users/r/Documents/school/IB/Computer Science HL/Other Languages/Problem240/Problem240 - recursive2.py", line 6, in <genexpr>
for p in xrange(1, 7))
TypeError: 'int' object is not iterable 
```

有人可以告诉我发生了什么吗？我的代码有什么问题，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:48:54.350

我想你的意思是

```
def f(n, p, k, t):
    return sum(sum(1 if n == 3 else
                   (0 if k == 1 else
                    (1/36) * f(n-1, p, k-1, t-(max(p,i)))) # <- more here
                   for i in range(1, 7)) # <- less here
               for p in range(1, 7))

print(sum(f(5,j,3,15) for j in range(1, 7))) 
```

（我使用的是python 3，但基本相同）。

您有一些括号错误，因此内部总和不是您期望的生成器表达式。

**由于您使用的是 python 2，因此还请参阅下面 gnibbler 的观点**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:57:29.960

如果您无法理解自己的代码，请将其分解为更小的部分

```
def f(n, p, k, t):
    ternary = (1 if n == 3 else 0 if k == 1 else 
        f(n-1, p, k-1, t-max(p,i))/36.0 for i in range(1, 7))

    inner_sum = sum(ternary)
    return sum(inner_sum for p in range(1, 7)) 
```

# matlab - 如何在matlab中绘制直线的垂直平分线？

> ID：14992684
> 
> 赞同：0
> 
> 时间：2013-02-21T00:41:56.520
> 
> 标签：matlab

我正在尝试制作一个最小距离分类器，我需要绘制一条线的垂直平分线来绘制决策边界。我有一个点，甚至平分线的斜率。如何在图表上绘制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:08:57.453

以下函数将在给定中心点和斜率的情况下绘制一条线：

```
function drawLine(point,slope)
% point - vector [x,y]
% slope - slope of the line

x = point(1);
y = point(2);

lengthLine = 5;

xLine = x-lengthLine:x+lengthLine;
yLine = slope*(xLine-x) + y;

plot(x,y,'ro')
plot(xLine,yLine,'b') 
```

# django - 多个模型 - 一个公共主键 (Django)

> ID：14992693
> 
> 赞同：6
> 
> 时间：2013-02-21T00:43:26.817
> 
> 标签：django, inheritance, model, primary-key, parent-child

我祝大家有个美好的一天。正如我在标题中提到的，我想加入多个模型并使用一个全局 ID 标识其中一个，因此 ID 将确定它是哪个模型，并且我将访问它的所有字段。

目前我正在与多表继承作斗争，我遇到了问题。我想要一个父模型和几个子模型，它们会继承父的一些字段。

```
class Parent(models.Model):
    pass

class Child1(Parent):
    fieldX = models.CharField()

class Child2(Parent):
    fieldY = models.CharField() 
```

但是我想使用主键通过父模型访问孩子。所以...

```
Parent.objects.all() 
```

也应该返回 Child1 和 Child2 对象及其字段（fieldX，fieldY）。

*（假设 pk=1 的父记录是 Child1 模型）*

虽然当我尝试通过父模型访问子字段时

```
child = Parent.objects.get(pk=1)
child.fieldX 
```

django 返回一个**AttributeError: 'Parent' 对象没有属性 'fieldX'**

我的目标是**为所有子模型创建一个主键**。这在 Django 中可能吗？分别有没有类似的解决方案或建议？我一直在搜索相关主题，如*contenttype*或*GUID, UUID*，但我想这不是我要找的。感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:22:47.863

当你让`Parent.objects.get(pk=1)`你得到`Child1`和`Child2`行没问题时，但 django ORM 正在返回你`Parent`的实例，因为它**只是检索存储在 parent table 上的数据**。

要获取子模型的实例，您必须执行`parent_instance.childmodelname`.

This can get messy real quick if you have multiple child classes, since you have to know exactly to which child model the parent instance belongs to, to be able to access it (if you try, for example, to access `parent.child1` being a `Child2` instance, it will raise an exception).

I recommend you use the [django-model-utils](https://github.com/carljm/django-model-utils) app, which defines a custom manager called [InheritanceManager](https://github.com/carljm/django-model-utils/blob/master/model_utils/managers.py) which you can use on your model and will take care of retrieving and returning the corresponding child model instance, making the whole process a lot easier.

# google-maps - 将标记添加到自定义 Google 地图

> ID：14992695
> 
> 赞同：-1
> 
> 时间：2013-02-21T00:43:30.613
> 
> 标签：google-maps, google-maps-markers

我只是想知道，如何在坐标（38.0，-98.0）上添加一个标记，在坐标（45.0，-100.0）上添加另一个标记到我正在制作的自定义谷歌地图？到目前为止，这是我拥有的代码：

```
<script type="text/javascript">

  var map;
  var grayStyles = [
    {
      featureType: "all",
      stylers: [
        { saturation: -100 },
      ]
    },
  ];
  var mapOptions = {
    center: new google.maps.LatLng(38, -98),
    zoom: 5,
    styles: grayStyles,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:01:47.723

简单的标记：

```
var marker1 = new google.maps.Marker({
      position: new google.maps.LatLng(38.0, -98.0),
      map: map,
  });

var marker2 = new google.maps.Marker({
      position: new google.maps.LatLng(45.0, -100.0),
      map: map,
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:57:16.870

这是我使用的代码，放在该行之后

```
map = new google.maps.Map(documen...... 
```

您可以多次重复此代码以获得更多标记

```
 var ncenter = new google.maps.LatLng(parseFloat('52.43598') , parseFloat('16.94412'));  /* this is the position */ 
  var image = {
    url: '/img/xspot.png',
    // This marker is 20 pixels wide by 32 pixels tall.
    size: new google.maps.Size(115, 86),
    // The origin for this image is 0,0.
    origin: new google.maps.Point(0,0),
    // The anchor for this image is the base of the flagpole at 0,32.
    anchor: new google.maps.Point(57, 71)
  }; /* You can ignore the image mark */ 
  var beachMarker = new google.maps.Marker({
      position: ncenter,
      map: map,
      icon: image // if you ignore image related code above, also remove this line
  }); 
```

# pdf - 原始的空白 PDF（不带 Acrobat）

> ID：14992697
> 
> 赞同：5
> 
> 时间：2013-02-21T00:43:38.517
> 
> 标签：pdf, document, utility

我需要找到或创建一个 8.5x11 英寸的空白 PDF 文件，该文件尽可能小，嵌入的信息最少，但仍然是有效且稳定的 PDF 文档。如果可能的话，我想在没有 Acrobat 的情况下执行此操作。

制作此类文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T01:04:44.957

我会试试这个

*   创建空的html文档
*   用谷歌浏览器打开它
*   去“打印”
*   选择“另存为PDF”作为打印机和“打印”

：） 祝你好运

我想到的另一件事是使用 fpdf 库运行一个简单的 PHP 程序，它只会创建和输出 pdf

# javascript - 这个 Javascript JSON 解析我哪里出错了

> ID：14992705
> 
> 赞同：-5
> 
> 时间：2013-02-21T00:43:54.560
> 
> 标签：javascript, jquery, json, parsing

我正在尝试使用 javascript 解析 JSON 文件并仅显示数组中的图像。我在这里做错了什么，我将如何解决它？**执行代码时屏幕上没有输出。我以为这会输出图像，但没有发生任何事情。**

HTML：

```
<!DOCTYPE html>
<html>

<script 'type=text/javascript' 'src=js.js'></script>
<script  type="text/javascript" src="ajax link was here"></script>
  <head lang="en">
    <meta charset="utf-8">
    <title>images</title>
  </head>

  <body>

    <div class = "movie">

    </div>

  </body>

</html> 
```

Javascript 文件

```
$(document).ready(function () {

    $.get('http://54.243.128.130/search/movies_list/?q=inception', function (data, image) {

        var movie = JSON.parse(data);

        for (var x = 0; x < movie.length; x++) {
            var mov = movie[x];
            //var elm = '<div class = "movie"><img src = "'+mov.img+'"></div>';
            var elm = mov.img;
            $('.movie').prepend(elm);

        }

    }, 'text');

}); 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:48:20.453

对于初学者，您可能想要更改

```
<script 'type=text/javascript' 'src=js.js'></script> 
```

至

```
<script type="text/javascript" src="js.js"></script> 
```

您能描述一下您遇到的错误/问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:46:13.097

无需解析自己，只需使用即可`$.getJSON`。

```
$.getJSON('http://54.243.128.130/search/movies_list/?q=inception', function (data, image) {

    for (var x = 0; x < data.length; x++) {
        var mov = data[x];
        //var elm = '<div class = "movie"><img src = "'+mov.img+'"></div>';
        var elm = mov.img;
        $('.movie').prepend(elm);

    }

} 
```

此外，您的结构错误。该页面返回如下内容：

```
{
   "query": "the value of your q parameter"
   "results": []
} 
```

因此，您还需要修改循环和数据访问。所以把它放在一起：

```
$.getJSON('http://54.243.128.130/search/movies_list/?q=inception', function (data, image) {

        var movies = data.results;

        for (var x = 0; x < movies.length; x++) {
            var mov = movies[x];
            //var elm = '<div class = "movie"><img src = "'+mov.img+'"></div>';
            var elm = mov.img;
            $('.movie').prepend(elm);

        }

    } 
```

最后，如果这与您的代码不在同一台服务器上，您将需要使用`jsonp`或创建本地代理来发出外部请求。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-21T00:51:48.337

JSON.parse 函数返回字典而不是数组。所以假设我们有一个字典作为 JSON.parse 的输出：
var movie={a:1,b:2,c:3};
然后你应该像这样迭代它：

```
for(var i=0;i<Object.keys(movie).length;i++){
    var mov = movie[Object.keys(movie)[i]];
    var elm = mov.img;
    $('.movie').prepend(elm
} 
```

# android - RejectedExecutionException 使用 ThreadPoolExecutor 和 AndroidHttpClient

> ID：14992714
> 
> 赞同：0
> 
> 时间：2013-02-21T00:44:59.923
> 
> 标签：android, android-asynctask, threadpoolexecutor

我正在使用自己的 ThreadPoolExecutor 来了解我的所有任务何时完成。我有一个方法是 client.get() 调用，如果成功，它会做更多的 client.get() 调用。但是，`java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@414ca470 rejected from java.util.concurrent.ThreadPoolExecutor@414ab1a0[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 1]`当我从我的第一次成功中调用 client.get() 时，我得到了。我该如何解决这个错误？

```
AsyncHttpClient client = new AsyncHttpClient();
int limit = 20;
BlockingQueue<Runnable> q = new ArrayBlockingQueue<Runnable>(limit);
ThreadPoolExecutor executor = 
                        new ThreadPoolExecutor(limit, limit, 20, TimeUnit.SECONDS, q);

client.setThreadPool(executor);

parseSilo(url, context); // this fires client.get() ... as it encounters urls in JSON feed
executor.shutdown();

while (!executor.awaitTermination(10, TimeUnit.SECONDS)) {
    Log.e(TAG, executor.getTaskCount() + " tasks left");
}
if (executor.isShutdown()) {
     Log.e(TAG, "done");
} 
```

parseSilo 方法

```
public static void parseSilo(String url, final Context context) {
        client.get(url, new AsyncHttpResponseHandler() {
            @Override
            public void onSuccess(String content) {
                Log.i(TAG, "Parsing Silo");
                JsonNode rootNode;

                //json parsing

                // parse collections
                for (Show show : listOfShows) {
                    parseCollections(show.getCollectionUrl()); // another client.get()
                }

            }

        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:53:28.480

似乎您正在`client.get()`拨打电话， 所以要么在您完成所有电话后`executor.shutdown()` 延迟，要么在关闭您的电话后不拨打新电话`shutdown``get``executor`

# paypal - 在单个 Paypal 付款交易中预付和后付

> ID：14992727
> 
> 赞同：-1
> 
> 时间：2013-02-21T00:46:35.180
> 
> 标签：paypal, payment-gateway, payment

我需要将两种类型的付款集成到与贝宝的单笔交易中。

谁能给我一个关于如何克服这个问题的想法？我真的陷入了这样一种情况，即我的客户想要购买我的一些服务，并通过贝宝信用卡购物车付款，然后想要添加一些后付费的项目？

这可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:57:31.710

通过 Express Checkout 的 PayPal 订单将是您在下订单后向订单添加附加项目的最佳选择。

订单支付行动表示同意在最多 29 天内支付一个或多个授权金额，最多不超过指定的总额。要设置订单，请在您的 SetExpressCheckout 和 DoExpressCheckoutPayment 请求中指定以下付款操作：

PAYMENTREQUEST_n_PAYMENTACTION=订单

一个订单可以让您在 29 天内创建多个授权；您创建的每项授权都会将买方的资金暂停最多三天。您可以为每次授权获取多笔付款，最多为您在 DoExpressCheckoutPayment 请求中指定的金额的 115% 或 75 美元。

此付款操作提供了最大的灵活性，应在销售不满足或一授权加一再授权不满足您的需求时使用。

此处提供更多信息：[https ://www.x.com/sites/default/files/pp_expresscheckout_integrationguide.pdf](https://www.x.com/sites/default/files/pp_expresscheckout_integrationguide.pdf)

# git - 即使在删除子模块后，Git 也会记住子模块的远程和历史记录

> ID：14992732
> 
> 赞同：1
> 
> 时间：2013-02-21T00:47:28.830
> 
> 标签：git, git-submodules

我按照[如何删除 git 子模块](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)来删除特定的子模块。但是，如果我尝试在同一路径中添加具有不同遥控器的子模块，git 最终会使用前一个遥控器检出子模块。

例如，

1.  git 子模块添加[https://github.com/auto-complete/auto-complete](https://github.com/auto-complete/auto-complete)路径/auto-complete
2.  从 .gitconfig 中删除自动完成的三行
3.  从 .git/config 中删除两行用于自动完成
4.  git rm --缓存路径/自动完成
5.  git 提交 -a
6.  git 子模块添加[https://github.com/Sarcasm/auto-complete](https://github.com/Sarcasm/auto-complete) path/auto-complete

此时，我没有从 remote2.git 获取，而是在路径/自动完成中得到 remote1.git 的结帐。

git remote -v in path/auto-complete 仍然显示[https://github.com/auto-complete/auto-complete](https://github.com/auto-complete/auto-complete)的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:19:19.620

请注意，您现在可以使用（git 1.8.3，2013 年 4 月 22 日）简化该过程：

```
git submodule deinit 
```

（请参阅“[如何删除 Git 子模块？](https://stackoverflow.com/a/16162000/6309) ”）尽管如此
，您仍然需要删除`.git/modules/yourSubmodule`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:55:18.310

抱歉，我在原始问题的其他答案之一中发现了这一点：

> 除了建议之外，我还必须 rm -Rf .git/modules/path/to/submodule 才能添加具有相同名称的新子模块（在我的情况下，我用原来的叉子替换了叉子）

[https://stackoverflow.com/a/9536504/288634](https://stackoverflow.com/a/9536504/288634)

# python - 设置属性和调用就地变异方法之间的区别？

> ID：14992733
> 
> 赞同：4
> 
> 时间：2013-02-21T00:47:33.507
> 
> 标签：python, class, numpy, oop, attributes

我主要用numpy做数据分析，对底层程序不太了解，所以这可能很明显。

我不明白通过简单地分配属性来设置属性与调用就地更改该属性的方法之间的区别。你可以同时做的例子是：

```
In [1]: import numpy as np

In [2]: a = np.array([[1, 2, 3],
   ...:               [4, 5, 6]])

In [3]: a.shape
Out[3]: (2, 3)

In [4]: a.reshape(3,2)
Out[4]: 
array([[1, 2],
       [3, 4],
       [5, 6]])

In [5]: a
Out[5]: 
array([[1, 2, 3],
       [4, 5, 6]])

In [6]: a.resize(3,2)

In [7]: a
Out[7]: 
array([[1, 2],
       [3, 4],
       [5, 6]])

In [8]: a.shape = (6,)

In [9]: a
Out[9]: array([1, 2, 3, 4, 5, 6])

In [10]: a.__setattr__('shape',(3,2))

In [11]: a
Out[11]: 
array([[1, 2],
       [3, 4],
       [5, 6]]) 
```

我不明白 input`6`和`8`. 显然，两者都更改了`a.shape`适当的属性，而不是像在`4`. 他们都只打电话`a.__setattr__()`吗`10`？如果是这样，为什么它们都存在？

（我知道`a.resize()`有额外的容量来增加或减少分配的内存，但我在这里没有使用它——这种重复性是否只存在于该方法增加了一些其他容量？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:34:03.237

8 中的示例实际上称为[property](http://docs.python.org/2/library/functions.html#property)，python 允许您在 2.1+ 版本中访问它。

例如

```
@property
def shape(self):
    """I'm the 'shape' property."""
    return self._shape

@shape.setter
def shape(self, value):
    self._shape = value 
```

`__setattr__`调用一个`setter`：

```
x.__setattr__('shape', value) 
```

相当于（查看上面的属性设置器）。

```
x.shape = value 
```

底层逻辑总是调用一个修饰函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:54:03.487

我已经多次阅读您的问题，并认为我可以解决所有问题：

```
a.reshape(3,2)
# returns a new array

a.resize(3,2)
# returns None, operates on the same array
# (equivalent to modifying ndarray.shape here since no. of elements is unchanged)

a.shape = (6,)
# operates on the same array, uses property trick to hide detailed 
# setter logic behind normal attribute access.  
# note the parens are unnecessary here - equivalent is a.shape = 6,
# NOT equivalent to a = a.reshape(6,), which would change the id(a)

a.__setattr__('shape',(3,2))
# just an ugly way of doing a.shape = 3,2 
```

您的主要问题似乎是关于改变数组形状的方法的非唯一性。

> 显然，两者都更改了 a.shape 属性，而不是像 4 中那样返回重塑的对象

是的。或者更准确地说，两者都更改了数组（并且`shape`“属性”返回的值因此被修改）。

> 他们都只`a.__setattr__()`像10那样打电话吗？

他们并不一定要调用`a.__setattr__(...)`。他们可以改为更改一些内部`self._shape`变量，它仍然可以更改`a.shape`.

`__setattr__`您可以通过创建自己的类来查看实际使用的人，例如：

```
class my_ndarray(np.ndarray):
    def __setattr__(self, name, value):
        print '__setattr__ called with name={}, value={}'.format(name, value)
        super(my_ndarray, self).__setattr__(name, value)

a_ = my_ndarray(a.shape)
a_[:] = a 
```

在这种情况下，答案是既不`a_.resize`也不`a_.reshape`使用`__setattr__`。

> **如果是这样，为什么它们都存在？**

当元素的数量不同时，它`resize`可以做的不仅仅是重塑，这对我来说是足够的理由。当您需要做的就是使用 reshape 时，使用 resize 会很奇怪，但是当您“可能”使用 reshape 时，为什么 numpy（它应该是高性能的）会费心警告您或人为地限制您使用 resize反而？

如果您担心明显违反*python #13 的 zen*，`numpy`这不是寻找一致性的最佳位置。只需比较`np.eye`和`np.identity`，例如！什么是 numpythonic 并不总是 pythonic。

# java - 添加自定义字体需要太多时间

> ID：14992734
> 
> 赞同：0
> 
> 时间：2013-02-21T00:47:34.133
> 
> 标签：java, performance, fonts, awt, java-7

我的 Java 应用程序需要一些自定义字体来创建它的 GUI（看起来*特别*好）。它们正在通过以下方式从“源文件夹”（资源）中读取：

```
try(InputStream resourceStream = getClass().getResourceAsStream(path)) {

    ge.registerFont(
       Font.createFont(Font.TRUETYPE_FONT, resourceStream)
    );

} catch(IOException | FontFormatException e) {
    // ...
} 
```

这个过程每个字体大约需要 5 秒，这是相当多的。当您进行开发时，它会变得特别烦人，需要经常启动程序的新实例。

**有什么方法可以减少添加自定义字体所需的时间？**

# opencv - 如何从轮廓中取回图像？

> ID：14992736
> 
> 赞同：0
> 
> 时间：2013-02-21T00:47:38.080
> 
> 标签：opencv, image-processing, computer-vision, hough-transform, eye-tracking

我正在做一个项目，我将图像缩小到一个物体的轮廓（实际上是眼睛的瞳孔）。现在我想对包含瞳孔轮廓的图像应用霍夫变换。但是没有任何反应。我的猜测是您只能对灰度图像应用霍夫变换，

所以我想知道如何取回我已经检测到的瞳孔轮廓的灰度部分，以便我可以对其应用霍夫变换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:06:45.483

假设您的视频源是普通的网络摄像头。我不确定霍夫是否可以工作。我试过了，但它没有用，如果我花更多的时间它可能会起作用。但这是一种对我有用的基于颜色的方法。结果：[https ://s3-ap-southeast-1.amazonaws.com/kzl/eye.png](https://s3-ap-southeast-1.amazonaws.com/kzl/eye.png)

```
#include "stdafx.h"
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <time.h>
#include "opencv2/objdetect/objdetect.hpp"
using namespace cv;
using namespace std;

int s0=31,s1=96,s2=189, thresh=9;
String face_cascade_name = "lbpcascade_frontalface.xml";
String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade,eyes_cascade;

void proc( Mat frame )
{
    double time = (double)getTickCount();
    std::vector<Rect> faces;
    Mat frame_gray;
    Mat eyeMask=Mat::zeros(frame.rows, frame.cols, CV_8UC1);;
    cvtColor( frame, frame_gray, CV_BGR2GRAY );
    equalizeHist( frame_gray, frame_gray );

    face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2,0, Size(50, 50));

    for( int i = 0; i < faces.size(); i++ )
    {
        Mat faceROI = frame_gray( faces[i] );
        std::vector<Rect> eyes;

        eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );
        if( eyes.size() == 2)
        {
            Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
            ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 0 ), 2, 8, 0 );

            for( int j = 0; j < eyes.size(); j++ )
            {
                Rect roi =  Rect(faces[i].x+eyes[j].x,faces[i].y+eyes[j].y+(eyes[j].height*.25),eyes[j].width,eyes[j].height*.75);
                Mat eye(frame,roi);
                Mat eyeYuv;
                vector<Mat> eyechs;
                cvtColor(eye,eyeYuv,CV_BGR2YUV);
                split(eyeYuv,eyechs);
                Mat mask= eyechs[0];
                equalizeHist(mask,mask);
                threshold(mask,mask,thresh,255,CV_THRESH_BINARY_INV);
                mask.copyTo(eyeMask(roi));
            }
            imshow("mask",eyeMask);
        }

    }

    cvtColor( frame, frame, CV_BGR2YUV );
    for(int i=0;i<eyeMask.rows;i++)
    {
        for(int j=0;j<eyeMask.cols;j++)
        {
            if(eyeMask.at<uchar>(i,j)>0)
            {
                frame.at<Vec3b>(i,j)[0]=(frame.at<Vec3b>(i,j)[0]+s0)%255;
                frame.at<Vec3b>(i,j)[1]=(frame.at<Vec3b>(i,j)[1]+s1)%255;
                frame.at<Vec3b>(i,j)[2]=(frame.at<Vec3b>(i,j)[2]+s2)%255;
            }
        }
    }
    cvtColor( frame, frame, CV_YUV2BGR );

    time = ((double)getTickCount() - time)/getTickFrequency();
    std::ostringstream strs;
    strs << time;
    std::string text = strs.str();

    putText(frame, text, Point(30,30), FONT_HERSHEY_SCRIPT_SIMPLEX, .7, Scalar::all(255), 2,8);
    imshow( "cam", frame );
}

void run()
{
    namedWindow("cam", CV_WINDOW_KEEPRATIO);
    namedWindow("ctrl", CV_WINDOW_KEEPRATIO);
    namedWindow("mask", CV_WINDOW_KEEPRATIO);

    createTrackbar( "s0", "ctrl", &s0, 255, NULL );
    createTrackbar( "s1", "ctrl", &s1, 255, NULL );
    createTrackbar( "s2", "ctrl", &s2, 255, NULL );
    createTrackbar( "irisThresh", "ctrl", &thresh, 255, NULL );

    VideoCapture cap;
    cap.open(0);
    if( !cap.isOpened() )
    {
        cout << "cap error\n";
    }

    if( !face_cascade.load( face_cascade_name ) ){ cout << "face cascade error\n"; return ; };
    if( !eyes_cascade.load( eyes_cascade_name ) ){ cout << "eye cascade error\n"; return ; };
    Mat frame;
    cap >> frame;

    for(;;)
    {
        cap >> frame;
        resize(frame,frame,Size(320,240));
        proc(frame);
        char c = (char)waitKey(10);
        if( c == 27 )
            break;
    }
}

int main(int argc, char ** argv)
{
    run(); 
    cin.ignore(1);
    return 0;
} 
```

# java - java7中的javax.swing.text.View.createFragment奇怪行为

> ID：14992738
> 
> 赞同：1
> 
> 时间：2013-02-21T00:47:53.073
> 
> 标签：java, xml, swing, java-7, jtextcomponent

我遇到了上述方法的奇怪行为。有一个用于显示 xml 文件内容的遗留组件，它在 java6 中工作，但是当我切换到 1.7_10 时它会失败，因为结束偏移超出了视图的范围。

我对这个问题进行了一些研究，发现了以下方法 javax.swing.text.ParagraphView.findEdgeSpan(View, int, int, int, int)

这是方法的代码：

```
/**
 * Binary search for the longest non-breakable fragment at the view edge.
 */
private float findEdgeSpan(View v, int axis, int fp, int p0, int p1) {
    int len = p1 - p0;
    if (len <= 1) {
        // further fragmentation is not possible
        return v.getMinimumSpan(axis);
    } else {
        int mid = p0 + len / 2;
        boolean startEdge = mid > fp;
        // initial view is breakable hence must support fragmentation
        View f = startEdge ?
            v.createFragment(fp, mid) : v.createFragment(mid, fp);
        boolean breakable = f.getBreakWeight(
                axis, 0, f.getMaximumSpan(axis)) > View.BadBreakWeight;
        if (breakable == startEdge) {
            p1 = mid;
        } else {
            p0 = mid;
        }
        return findEdgeSpan(f, axis, fp, p0, p1);
    }
} 
```

它创建视图的片段，然后在该片段上运行，但偏移边界取自外部视图。并且可能会发生传递给`createFragment`的束缚超出视野`f`边界的情况。

有人可以解释这是否是正确的行为吗？

在 javadoc 中`javax.swing.text.View.createFragment`：

```
Parameters:
    p0 the starting offset >= 0\. This should be a value greater or equal to the element starting offset and less than the element ending offset.
    p1 the ending offset > p0\. This should be a value less than or equal to the elements end offset and greater than the elements starting offset. 
```

据我了解，p1 不应大于视图的 endOffset，不是吗？

# c - confusing error with qsort method

> ID：14992746
> 
> 赞同：2
> 
> 时间：2013-02-21T00:48:32.543
> 
> 标签：c

So, I have an array of string (name input), and I want to sort that array. I use something like this

```
int stringLen = sizeof(input)/sizeof(char *);
qsort(input, stringLen, sizeof(char *), myCompare); 
```

However I get this confusing error:

> ```
> error: invalid conversion from 'int (*)(const char*, const char*)' to '__compar_fn_t {aka int (*)(const void*, const void*)}' [-fpermissive] 
> ```
> 
> In file included from srot13u.c:5:0: /usr/include/stdlib.h:761:13: error: initializing argument 4 of 'void qsort(void*, size_t, size_t, __compar_fn_t)' [-fpermissive]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:51:41.793

Your myCompare function has the signature:

```
int myCompare(const char*, const char*) 
```

but

```
int myCompare(const void*, const void*) 
```

is expected.

Just use

```
int myCompare(const void *a_, const void *b_) {
    const char *a = a_;
    const char *b = b_;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:51:54.413

You're passing an function taking two `char` pointers, but `qsort` wants one that takes `void` pointers. These two function pointer types are *not* compatible in C.

Change your comparison routine; the common setup is something like

```
static int strcmp_void(const void *a, const void *b)
{
    return strcmp(a, b);  // the types *are* compatible in this expression
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:52:05.317

Change your `myCompare` like this:

```
int myCompare(const void* pa, const void* pb) {
   const char *a = (const char*)pa;
   const char *b = (const char*)pb;

   /* ... */
} 
```

# php - 如何在 php 或 ajax 或 javascript 中绘制实时图表？

> ID：14992747
> 
> 赞同：-5
> 
> 时间：2013-02-21T00:48:33.257
> 
> 标签：php, javascript, html, mysql, ajax

我需要一种绘制实时图表的方法，该图表将使用数据库中的数据并每秒更新一次绘图。有没有办法做到这一点以及如何做到这一点？我尝试使用 javascript，但出现内存错误（RAM 不断构建）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:34:52.397

试试[Highcharts](http://www.highcharts.com/demo/dynamic-update)，他们有一个动态更新图表。

# android - Android 热门关键词（趋势）？

> ID：14992749
> 
> 赞同：-2
> 
> 时间：2013-02-21T00:48:43.040
> 
> 标签：android, iphone, search, search-engine, google-play

有没有办法找出在 Android 市场上搜索的内容？例如，如果我想了解每天有多少人搜索特定关键字。如果那里有工具，那么找出人们搜索的内容并相应地制作应用程序会很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:59:49.960

Google 不提供此信息。

但这可能会有所帮助:)

[http://www.appbrain.com/stats/top-android-search-terms](http://www.appbrain.com/stats/top-android-search-terms)

# responsive-design - 为什么调整窗口大小时我的徽标不会调整？

> ID：14992756
> 
> 赞同：0
> 
> 时间：2013-02-21T00:49:14.373
> 
> 标签：responsive-design

我使用了[http://www.Sg-layout.com](http://www.Sg-layout.com)提供的免费响应模板。它看起来很棒，我正在完成但是我注意到当我调整页面大小超过 776x796 时，徽标不会调整中心。它留在左边我尝试将宽度更改为 100%，但这不是我想要完成的。我想保持当前位置只是在调整页面大小时调整徽标。这是我的网站[http://www.newmeccarecords.com](http://www.newmeccarecords.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:12:20.243

只需在您的媒体查询中定义

```
@media screen (min-width:320px) and (max-width:776px){
  width:100%;
  margin:0 auto;
} 
```

它假定它会跟随窗口调整自动边距`margin-left:auto;`并`margin-right:auto;`始终位于页面中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:57:06.177

虽然这不适用于较旧的浏览器，但可以解决问题：

```
@media (max-width: 720px) { 
  #logo {
    width: 100%;
  }
} 
```

这将仅在浏览器较小时强制宽度。

有关哪些浏览器支持它的详细信息：[http://www.browsersupport.net/CSS/@media_(max-width)](http://www.browsersupport.net/CSS/@media_(max-width))

对于那些它不支持的人，它只是停留在左边，老实说这看起来并没有那么糟糕。（而且他们无论如何都应该升级。）

# postgresql - 2 个 Postgres 实例的不同结果

> ID：14992757
> 
> 赞同：3
> 
> 时间：2013-02-21T00:49:17.947
> 
> 标签：postgresql, heroku, go

我使用[带有](http://postgresapp.com). `ssmode=disable`所有表都按应有的方式创建，`SELECT`查询按预期工作。

[当我在Heroku](https://postgres.heroku.com)上创建 Postgres 实例时（根据 , ，服务器是 9.1.6 `psql`）`ssmode=require`，一切正常，除了查询不返回任何结果，而本地 postgres 实例则返回。

具体查询是

```
SELECT * FROM "captcha" WHERE "cid" = $1 LIMIT $2 
```

和`cid`/`$1`是类型`character varying(20)`。

通过`psql`手动连接到远程实例并执行查询时，行按预期返回。我只是不明白是什么可能导致这种不同的行为。

主要嫌疑人是我使用[bmizerany/pq](https://github.com/bmizerany/pq)的驱动程序，但是这种行为是否还有其他错误来源？

更新：

我用普通查询尝试过，结果相同：结果集中没有行

```
SELECT * FROM "captcha" WHERE "cid" = 'JQRPm6qRpYukXCiPUpHZ' LIMIT 1 
```

更新 2：

它与该`bytea`领域有关，以下片段说明了在这 2 个 PG 版本上执行时的问题[https://gist.github.com/eaigner/5004468](https://gist.github.com/eaigner/5004468)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:00:08.847

问题是，Heroku 使用了非默认的`bytea_output`. 所以解决这个问题的方法是

```
SET bytea_output = 'hex'; 
```

在运行查询之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:03:06.623

尝试使用`PREPARE`/ `EXECUTE`。`pq`使用使用绑定的“扩展”查询协议，而不是只是文本的“简单”协议，这样可以更好地模拟交互。

请提交一个错误。

# javascript - 使用敲除绑定在 IE 8 及以下版本中单击时未选中复选框

> ID：14992766
> 
> 赞同：3
> 
> 时间：2013-02-21T00:50:10.093
> 
> 标签：javascript, html, knockout.js

我在 IE 8 及以下未选中以下复选框时遇到问题：

```
<input type="checkbox" data-bind="event: { change: $parent.addOtherAddresses }, attr: { value: $index() + 1 }"  /> 
```

我正在尝试将整个对象传递给“addOtherAddresses”，它实际上确实可以正常工作，但是浏览器并未将复选框显示为实际被选中。

我尝试了其他在复选框中显示检查但仅返回复选框的 id 或值的解决方案，我需要返回整个父数据对象，以便我可以根据检查的内容执行其他逻辑。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T00:55:28.730

问题是`change`事件处理程序阻止了浏览器的默认操作，因为这是 Knockout 默认执行的操作。如果要允许浏览器的默认操作，则必须`true`从处理程序返回：

```
event: { change: function() { $parent.addOtherAddress($data); return true; } } 
```

# linux - Debian bash 脚本在命令行中运行良好；在 crontab 中失败

> ID：14992769
> 
> 赞同：1
> 
> 时间：2013-02-21T00:50:37.143
> 
> 标签：linux, bash, scripting, io-redirection, piping

我正在尝试使用 DreamHost API（请参阅[此处](http://wiki.dreamhost.com/API "DreamHost API")）使用 crontab 更新 DNS 条目。我编写了以下 bash 脚本：

```
#!/bin/bash
dh_api_key=<my api key>
dh_domain=<my fq subdomain>

dh_url="https://api.dreamhost.com/?key=$dh_api_key&record=$dh_domain&type=A"

ip_addr=`ifconfig eth0 | grep "inet addr" | 
    grep -o "\([0-9]\{1,3\}\.\?\)\{4\}" | head -n 1`

old_ip_addr=`wget -q -O - ""$dh_url&cmd=dns-list_records"" | 
    grep $dh_domain | grep -o "\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}"`

dh_url="https://api.dreamhost.com/?key=$dh_api_key&record=$dh_domain&type=A"
dh_url_add="$dh_url&cmd=dns-add_record&value=$ip_addr"
dh_url_del="$dh_url&cmd=dns-remove_record&value=$old_ip_addr"

echo $ip_addr
echo $old_ip_addr

if [ "$ip_addr" == "$old_ip_addr" ]
then
    echo SAME
else
    echo DIFFERENT; UPDATING
    wget -q -O - "$dh_url_del"
    wget -q -O - "$dh_url_add"
fi 
```

我的 crontab 条目如下所示：

```
0,15,30,45 * * * * /home/<username>/dreamhost_api/dns_update_script > /home/<username>/dreamhost_api/dns_update_script.out # <-- note the redirection 
```

如果我手动运行脚本，我会得到以下输出：

```
<old ip address>
<new ip address>
DIFFERENT; UPDATING 
```

...并且一切都按应有的方式更新。如果我让 crontab 运行该作业，则更新永远不会发生。当我查看 dns_update_script.out 文件时，我看到：

```
<blank line>
<blank line>
SAME 
```

因此，当脚本由 crontab 运行时，脚本似乎没有 ip_addr 和 old_ip_addr 变量（这当然意味着更新永远不会发生）。知道为什么吗？在 crontab 中使用时，管道是否不起作用（或有一些警告？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:14:31.357

当`crond`代表用户运行脚本时，该脚本将不会具有用户从命令行获得的相同环境变量。脚本经常会失败。这些是变量，如`PATH`和`LD_LIBRARY_PATH`，等等。

将脚本文件中的行添加到脚本中，以使其获取您的登录脚本：`/etc/profile`，以及任何其他脚本。

创建此条`crontab`目：

```
* * * * *  set > /tmp/mycronenv.txt 
```

将更改保存到`crontab`. 等一两分钟。返回并摆脱该条目。最后：

```
set > myenv.txt
diff myenv.txt /tmp/mycronenv.txt 
```

这会告诉你我的意思。如何纠正它取决于你。两个输出必须相同，您的脚本才能运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T03:23:03.133

因为 $ip_addr 和 $old_ip_addr 在从 cron 运行时最终都是空白的，所以也许打开 xtrace 然后检查 cron 调用的结果输出可以为您提供有关什么不工作的线索。

推杆

```
set -x 
```

在 ip_addr= 行之前应该可以解决问题。然后让 cron 运行，你应该在生成的电子邮件中得到一堆输出（或者你可以像另一个用户提到的那样重定向输出。记住 xtrace 会发送到 stderr，所以使用类似的东西

```
* * * * * script >/tmp/outputfile 2>&1 
```

# java - 带有java源代码的存储库

> ID：14992771
> 
> 赞同：1
> 
> 时间：2013-02-21T00:50:43.087
> 
> 标签：java, open-source

是否有任何带有 java 源代码的存储库（git、svn、csv 等）？我知道 jdk 发行版中有 zip 存档，但我更喜欢单个存储库，因为历史是可跟踪的，并且很容易切换到历史中的任何时间点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:25:07.650

您可以下载[OpenJDK](http://openjdk.java.net/)以及带有 Mercurial的[Lambda 。](http://hg.openjdk.java.net/lambda/lambda)

对于这两种情况，您都必须下载然后使其可用，这可能是您所追求的，也可能不是。

如果您追求的是“官方”甲骨文提供的 JDK，那么我知道的唯一方法是通过甲骨文本身的认可下载（或大多数 JDK 下载也包含）

# c - 修改作为函数传入的字符串文字

> ID：14992772
> 
> 赞同：4
> 
> 时间：2013-02-21T00:50:42.913
> 
> 标签：c, pointers, pass-by-reference, pass-by-value, string-literals

如果我在程序中有一个函数

```
int main(){
   char *name = "New Holland";
   modify(name);
   printf("%s\n",name);
} 
```

调用这个函数

```
void modify(char *s){
   char new_name[10] = "Australia";
   s = new_name;         /* How do I correct this? */
} 
```

如何使用澳大利亚更新字符串文字名称（现在等于新荷兰）的值。

我认为我面临的问题是 new_name 是本地存储，所以函数返回后，变量没有存储

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T01:00:41.173

尝试这个：

```
#include <stdio.h>

void modify(char **s){
  char *new_name = "Australia";
  *s = new_name;
}

int main(){
  char *name = "New Holland";
  modify(&name);
  printf("%s\n", name);
  return 0;
} 
```

如果您定义`new_name`为数组，那么它将成为局部变量，而不是上面定义的指针，指向字符串文字。此外，在 C 中，参数是按值传递的，因此您需要将指针传递给要修改的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:12:59.547

尝试这个：

```
#include <stdio.h>
#include <string.h>

#define MAX_NAME_LEN  50

void modify(char *mdf){
  char *new_name = "Australia";
  strcpy(mdf,new_name);
}

int main(){
  char name[MAX_NAME_LEN] = "New Holland";
  modify(name);
  printf("%s\n", name);
  return 0;
} 
```

使用**strcpy/memcpy**将本地数组变量绑定到外部字符串文字。

# c - 致命错误：i2c/smbus.h：没有这样的文件或目录？

> ID：14992774
> 
> 赞同：2
> 
> 时间：2013-02-21T00:50:53.147
> 
> 标签：c, include, raspberry-pi

我尝试编译一些代码，并在尝试编译时收到此响应：

> ./smbus.c:26:23：致命错误：i2c/smbus.h：没有这样的文件或目录
> 
> 编译终止。./altitude_ai.c: 在函数中
> 
> 'bmp085_Altitude'：./altitude_ai.c:207:4：警告：隐式
> 
> 函数'pow'的声明[-Wimplicit-function-declaration]
> 
> ./altitude_ai.c:207:14：警告：不兼容的隐式声明
> 
> 内置函数 'pow' [默认启用]

这是我试图编译的所有代码：

**smbus.c**

```
/*
    smbus.c - SMBus level access helper functions

    Copyright (C) 1995-97 Simon G. Vogl
    Copyright (C) 1998-99 Frodo Looijaard <frodol@dds.nl>
    Copyright (C) 2012    Jean Delvare <khali@linux-fr.org>
    Copyright (C) 2012-2013 Donovan Roudabush <sharksfan98@gmail.com>

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
    MA 02110-1301 USA.
*/

#include <errno.h>
#include <i2c/smbus.h>
#include <sys/ioctl.h>
#include <linux/types.h>
#include <linux/i2c.h>
#include <linux/i2c-dev.h>
#include "smbus.h"
#define NULL 0

/* Compatibility defines */
#ifndef I2C_SMBUS_I2C_BLOCK_BROKEN
#define I2C_SMBUS_I2C_BLOCK_BROKEN I2C_SMBUS_I2C_BLOCK_DATA
#endif
#ifndef I2C_FUNC_SMBUS_PEC
#define I2C_FUNC_SMBUS_PEC I2C_FUNC_SMBUS_HWPEC_CALC
#endif

__s32 i2c_smbus_access(int file, char read_write, __u8 command,
           int size, union i2c_smbus_data *data)
{
    struct i2c_smbus_ioctl_data args;
    __s32 err;

    args.read_write = read_write;
    args.command = command;
    args.size = size;
    args.data = data;

    err = ioctl(file, I2C_SMBUS, &args);
    if (err == -1)
        err = -errno;
    return err;
}

__s32 i2c_smbus_write_quick(int file, __u8 value)
{
    return i2c_smbus_access(file, value, 0, I2C_SMBUS_QUICK, NULL);
}

__s32 i2c_smbus_read_byte(int file)
{
    union i2c_smbus_data data;
    int err;

    err = i2c_smbus_access(file, I2C_SMBUS_READ, 0, I2C_SMBUS_BYTE, &data);
    if (err < 0)
        return err;

    return 0x0FF & data.byte;
}

__s32 i2c_smbus_write_byte(int file, __u8 value)
{
    return i2c_smbus_access(file, I2C_SMBUS_WRITE, value,
                I2C_SMBUS_BYTE, NULL);
}

__s32 i2c_smbus_read_byte_data(int file, __u8 command)
{
    union i2c_smbus_data data;
    int err;

    err = i2c_smbus_access(file, I2C_SMBUS_READ, command,
                   I2C_SMBUS_BYTE_DATA, &data);
    if (err < 0)
        return err;

    return 0x0FF & data.byte;
}

__s32 i2c_smbus_write_byte_data(int file, __u8 command, __u8 value)
{
    union i2c_smbus_data data;
    data.byte = value;
    return i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                I2C_SMBUS_BYTE_DATA, &data);
}

__s32 i2c_smbus_read_word_data(int file, __u8 command)
{
    union i2c_smbus_data data;
    int err;

    err = i2c_smbus_access(file, I2C_SMBUS_READ, command,
                   I2C_SMBUS_WORD_DATA, &data);
    if (err < 0)
        return err;

    return 0x0FFFF & data.word;
}

__s32 i2c_smbus_write_word_data(int file, __u8 command, __u16 value)
{
    union i2c_smbus_data data;
    data.word = value;
    return i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                I2C_SMBUS_WORD_DATA, &data);
}

__s32 i2c_smbus_process_call(int file, __u8 command, __u16 value)
{
    union i2c_smbus_data data;
    data.word = value;
    if (i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                 I2C_SMBUS_PROC_CALL, &data))
        return -1;
    else
        return 0x0FFFF & data.word;
}

/* Returns the number of read bytes */
__s32 i2c_smbus_read_block_data(int file, __u8 command, __u8 *values)
{
    union i2c_smbus_data data;
    int i, err;

    err = i2c_smbus_access(file, I2C_SMBUS_READ, command,
                   I2C_SMBUS_BLOCK_DATA, &data);
    if (err < 0)
        return err;

    for (i = 1; i <= data.block[0]; i++)
        values[i-1] = data.block[i];
    return data.block[0];
}

__s32 i2c_smbus_write_block_data(int file, __u8 command, __u8 length,
                 const __u8 *values)
{
    union i2c_smbus_data data;
    int i;
    if (length > I2C_SMBUS_BLOCK_MAX)
        length = I2C_SMBUS_BLOCK_MAX;
    for (i = 1; i <= length; i++)
        data.block[i] = values[i-1];
    data.block[0] = length;
    return i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                I2C_SMBUS_BLOCK_DATA, &data);
}

/* Returns the number of read bytes */
/* Until kernel 2.6.22, the length is hardcoded to 32 bytes. If you
   ask for less than 32 bytes, your code will only work with kernels
   2.6.23 and later. */
__s32 i2c_smbus_read_i2c_block_data(int file, __u8 command, __u8 length,
                    __u8 *values)
{
    union i2c_smbus_data data;
    int i, err;

    if (length > I2C_SMBUS_BLOCK_MAX)
        length = I2C_SMBUS_BLOCK_MAX;
    data.block[0] = length;

    err = i2c_smbus_access(file, I2C_SMBUS_READ, command,
                   length == 32 ? I2C_SMBUS_I2C_BLOCK_BROKEN :
                I2C_SMBUS_I2C_BLOCK_DATA, &data);
    if (err < 0)
        return err;

    for (i = 1; i <= data.block[0]; i++)
        values[i-1] = data.block[i];
    return data.block[0];
}

__s32 i2c_smbus_write_i2c_block_data(int file, __u8 command, __u8 length,
                     const __u8 *values)
{
    union i2c_smbus_data data;
    int i;
    if (length > I2C_SMBUS_BLOCK_MAX)
        length = I2C_SMBUS_BLOCK_MAX;
    for (i = 1; i <= length; i++)
        data.block[i] = values[i-1];
    data.block[0] = length;
    return i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                I2C_SMBUS_I2C_BLOCK_BROKEN, &data);
}

/* Returns the number of read bytes */
__s32 i2c_smbus_block_process_call(int file, __u8 command, __u8 length,
                   __u8 *values)
{
    union i2c_smbus_data data;
    int i, err;

    if (length > I2C_SMBUS_BLOCK_MAX)
        length = I2C_SMBUS_BLOCK_MAX;
    for (i = 1; i <= length; i++)
        data.block[i] = values[i-1];
    data.block[0] = length;

    err = i2c_smbus_access(file, I2C_SMBUS_WRITE, command,
                   I2C_SMBUS_BLOCK_PROC_CALL, &data);
    if (err < 0)
        return err;

    for (i = 1; i <= data.block[0]; i++)
        values[i-1] = data.block[i];
    return data.block[0];
} 
```

**smbus.h**

```
/*
    smbus.h - SMBus level access helper functions

    Copyright (C) 1995-97 Simon G. Vogl
    Copyright (C) 1998-99 Frodo Looijaard <frodol@dds.nl>
    Copyright (C) 2012-2013 Donovan Roudabush <sharksfan98@gmail.com>

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    This software has been distrobuted for the Gryphon 7i series,
    maintained Jan 2013 by Donovan Roudabush at The Ballon Project
    This falls under GPL and Copyleft, but is intended for
    Research use.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
    MA 02110-1301 USA.

*/

#ifndef LIB_I2C_SMBUS_H
#define LIB_I2C_SMBUS_H

#include <linux/types.h>
#include <linux/i2c.h>

extern __s32 i2c_smbus_access(int file, char read_write, __u8 command,
              int size, union i2c_smbus_data *data);

extern __s32 i2c_smbus_write_quick(int file, __u8 value);
extern __s32 i2c_smbus_read_byte(int file);
extern __s32 i2c_smbus_write_byte(int file, __u8 value);
extern __s32 i2c_smbus_read_byte_data(int file, __u8 command);
extern __s32 i2c_smbus_write_byte_data(int file, __u8 command, __u8 value);
extern __s32 i2c_smbus_read_word_data(int file, __u8 command);
extern __s32 i2c_smbus_write_word_data(int file, __u8 command, __u16 value);
extern __s32 i2c_smbus_process_call(int file, __u8 command, __u16 value);

/* Returns the number of read bytes */
extern __s32 i2c_smbus_read_block_data(int file, __u8 command, __u8 *values);
extern __s32 i2c_smbus_write_block_data(int file, __u8 command, __u8 length,
                    const __u8 *values);

/* Returns the number of read bytes */
/* Until kernel 2.6.22, the length is hardcoded to 32 bytes. If you
   ask for less than 32 bytes, your code will only work with kernels
   2.6.23 and later. */
extern __s32 i2c_smbus_read_i2c_block_data(int file, __u8 command, __u8 length,
                       __u8 *values);
extern __s32 i2c_smbus_write_i2c_block_data(int file, __u8 command, __u8 length,
                        const __u8 *values);

/* Returns the number of read bytes */
extern __s32 i2c_smbus_block_process_call(int file, __u8 command, __u8 length,
                      __u8 *values);

#endif /* LIB_I2C_SMBUS_H */ 
```

**高度_ai.c**

```
#include <stdio.h>
#include <stdint.h>
#include <fcntl.h>
#include <stdlib.h>

#include <unistd.h>
#include <linux/i2c-dev.h>
#include <linux/i2c.h>
#include <sys/ioctl.h>
#include "smbus.h" 

#define BMP085_I2C_ADDRESS 0x77

const unsigned char BMP085_OVERSAMPLING_SETTING = 3;

// Calibration values - These are stored in the BMP085
short int ac1;
short int ac2; 
short int ac3; 
unsigned short int ac4;
unsigned short int ac5;
unsigned short int ac6;
short int b1; 
short int b2;
short int mb;
short int mc;
short int md;

int b5; 

unsigned int temperature, pressure, altitude;

// Open a connection to the bmp085
// Returns a file id
int bmp085_i2c_Begin()
{
   int fd;
   char *fileName = "/dev/i2c-0";

   // Open port for reading and writing
   if ((fd = open(fileName, O_RDWR)) < 0)
      exit(1);

   // Set the port options and set the address of the device
   if (ioctl(fd, I2C_SLAVE, BMP085_I2C_ADDRESS) < 0) {               
      close(fd);
      exit(1);
   }

   return fd;
}

// Read two words from the BMP085 and supply it as a 16 bit integer
__s32 bmp085_i2c_Read_Int(int fd, __u8 address)
{
   __s32 res = i2c_smbus_read_word_data(fd, address);
   if (res < 0) {
      close(fd);
      exit(1);
   }

   // Convert result to 16 bits and swap bytes
   res = ((res<<8) & 0xFF00) | ((res>>8) & 0xFF);

   return res;
}

//Write a byte to the BMP085
void bmp085_i2c_Write_Byte(int fd, __u8 address, __u8 value)
{
   if (i2c_smbus_write_byte_data(fd, address, value) < 0) {
      close(fd);
      exit(1);
   }
}

// Read a block of data BMP085
void bmp085_i2c_Read_Block(int fd, __u8 address, __u8 length, __u8 *values)
{
   if(i2c_smbus_read_i2c_block_data(fd, address,length,values)<0) {
      close(fd);
      exit(1);
   }
}

void bmp085_Calibration()
{
   int fd = bmp085_i2c_Begin();
   ac1 = bmp085_i2c_Read_Int(fd,0xAA);
   ac2 = bmp085_i2c_Read_Int(fd,0xAC);
   ac3 = bmp085_i2c_Read_Int(fd,0xAE);
   ac4 = bmp085_i2c_Read_Int(fd,0xB0);
   ac5 = bmp085_i2c_Read_Int(fd,0xB2);
   ac6 = bmp085_i2c_Read_Int(fd,0xB4);
   b1 = bmp085_i2c_Read_Int(fd,0xB6);
   b2 = bmp085_i2c_Read_Int(fd,0xB8);
   mb = bmp085_i2c_Read_Int(fd,0xBA);
   mc = bmp085_i2c_Read_Int(fd,0xBC);
   md = bmp085_i2c_Read_Int(fd,0xBE);
   close(fd);
}

// Read the uncompensated temperature value
unsigned int bmp085_ReadUT()
{
   unsigned int ut = 0;
   int fd = bmp085_i2c_Begin();

   // Write 0x2E into Register 0xF4
   // This requests a temperature reading
   bmp085_i2c_Write_Byte(fd,0xF4,0x2E);

   // Wait at least 4.5ms
   usleep(5000);

   // Read the two byte result from address 0xF6
   ut = bmp085_i2c_Read_Int(fd,0xF6);

   // Close the i2c file
   close (fd);

   return ut;
}

// Read the uncompensated pressure value
unsigned int bmp085_ReadUP()
{
   unsigned int up = 0;
   int fd = bmp085_i2c_Begin();

   // Write 0x34+(BMP085_OVERSAMPLING_SETTING<<6) into register 0xF4
   // Request a pressure reading w/ oversampling setting
   bmp085_i2c_Write_Byte(fd,0xF4,0x34 + (BMP085_OVERSAMPLING_SETTING<<6));

   // Wait for conversion, delay time dependent on oversampling setting
   usleep((2 + (3<<BMP085_OVERSAMPLING_SETTING)) * 1000);

   // Read the three byte result from 0xF6
   // 0xF6 = MSB, 0xF7 = LSB and 0xF8 = XLSB
   __u8 values[3];
   bmp085_i2c_Read_Block(fd, 0xF6, 3, values);

   up = (((unsigned int) values[0] << 16) | ((unsigned int) values[1] << 8) | (unsigned int) values[2]) >> (8-BMP085_OVERSAMPLING_SETTING);

   return up;
}

// Calculate pressure given uncalibrated pressure
// Value returned will be in units of XXXXX
unsigned int bmp085_GetPressure(unsigned int up)
{
   int x1, x2, x3, b3, b6, p;
   unsigned int b4, b7;

   b6 = b5 - 4000;
   // Calculate B3
   x1 = (b2 * (b6 * b6)>>12)>>11;
   x2 = (ac2 * b6)>>11;
   x3 = x1 + x2;
   b3 = (((((int)ac1)*4 + x3)<<BMP085_OVERSAMPLING_SETTING) + 2)>>2;

   // Calculate B4
   x1 = (ac3 * b6)>>13;
   x2 = (b1 * ((b6 * b6)>>12))>>16;
   x3 = ((x1 + x2) + 2)>>2;
   b4 = (ac4 * (unsigned int)(x3 + 32768))>>15;

   b7 = ((unsigned int)(up - b3) * (50000>>BMP085_OVERSAMPLING_SETTING));
   if (b7 < 0x80000000)
      p = (b7<<1)/b4;
   else
      p = (b7/b4)<<1;

   x1 = (p>>8) * (p>>8);
   x1 = (x1 * 3038)>>16;
   x2 = (-7357 * p)>>16;
   p += (x1 + x2 + 3791)>>4;

   return p;
}

// Calculate temperature given uncalibrated temperature
// Value returned will be in units of 0.1 deg C
unsigned int bmp085_GetTemperature(unsigned int ut)
{
   int x1, x2;

   x1 = (((int)ut - (int)ac6)*(int)ac5) >> 15;
   x2 = ((int)mc << 11)/(x1 + md);
   b5 = x1 + x2;

   unsigned int result = ((b5 + 8)>>4);  

   return result;
}

// This Altitude part is stolen from some some unknown
// Arduino library.  The number divided into pressure for
// float A is derived from the local pressure as explained
// at http://learn.adafruit.com/bmp085/using-the-bmp085.
unsigned int bmp085_Altitude(float pressure)
{
   float A = pressure/101794.58;
   float B = 1/5.25588;
   float C = pow(A,B);
   C = 1 - C;
   C = C / 0.0000225577;

   return C;
}

int main(int argc, char **argv)

{

   bmp085_Calibration();

   temperature = bmp085_GetTemperature(bmp085_ReadUT());
   pressure = bmp085_GetPressure(bmp085_ReadUP());
        altitude = bmp085_Altitude(pressure);

   printf("Temperature\t%0.1f *F\n", ((double)temperature)/10 * 1.8 + 32);
   printf("Pressure\t%0.2f hPa\n", ((double)pressure)/100);
        printf("Altitude\t%0.1f Feet\n\n", ((double)altitude)*3.280839895);

   return 0;
} 
```

你们能帮我修复错误信息吗？先谢谢啦~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:49:00.487

我认为代码需要两个名为 smbus.h 的文件。一个在本地目录，一个在系统包含目录，在子目录 i2c 中。您应该能够使用 find / -name "smbus.h" 2>/dev/null 之类的命令搜索 smbus.h 的所有实例

可能需要一些时间，但如果它解决了问题，则值得等待。

我怀疑您缺少系统文件，并且您只有一份 smbus.h 副本。如果您确实发现另一个 smbus.h 是一个名为 i2c 的目录，您需要将包含 i2c 目录的目录添加到您的系统包含路径中。我不确定这是怎么做到的。我认为它是一个环境变量。

是否有任何关于获取 i2c 支持包的代码说明？

```
sudo apt-get install <something> 
```

编辑：实际上，如果您确实找到了其他文件，您可能会作弊。更改

```
<i2c/smbus.h> 
```

到一个

```
"i2c/smbus.h" 
```

并添加到make文件中的编译行

```
-I/where/ever/the/file/was 
```

假设您在

```
/where/ever/the/file/was/i2c/smbus.h 
```

# ruby - 字符串中的重复字符

> ID：14992775
> 
> 赞同：1
> 
> 时间：2013-02-21T00:50:56.580
> 
> 标签：ruby, string

我知道这是一个简单的问题，但由于某种原因它不会点击。我想以固定数量重复字符串中的字符。例如：

```
str = 'abcde'
temp = ''
x = 8
for i in 0..x
    if str[i].nil?
        temp << ''
    else
        temp << str[i]
    end
end 
```

除了我没有得到任何输入。我需要的是：

> abcdeabc

请，任何帮助将不胜感激。如果有更好的工作方式来代替我不工作的幼稚方法，我想知道

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:06:50.217

Using `ljust` should do it:

```
str = 'abcde'

str.ljust(8, str)
# => "abcdeabc" 

str.ljust(12, str)
# => "abcdeabcdeab" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T01:01:51.580

If you want to repeat a string a few times, use `*`. We can combine that with slicing to get this solution:

```
def repfill(str, n)
    nrep = (Float(n) / str.length).ceil
    return (str * nrep)[0...n]
end 
```

Example:

```
irb(main):030:0> repfill('abcde', 8)
=> "abcdeabc" 
```

* * *

As for your solution, what you are missing is a *modulo* to repeat the string from the beginning:

```
str = 'abcde'
temp = ''
x = 8
for i in 0...x # note ... to exclude last element of range
    temp << str[i % str.length]
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:59:58.137

[您可以使用切片](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice)轻松地做到这一点

```
def repeat_x_chars(str, x)
  # special cases
  return str if x == 0
  return ""  if str.length == 0

  return str + str[0..(str.length % x)] # slicing
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:04:02.510

Try this one-liner:

```
res = (str * (x / str.length)) + str[0...(x%str.length)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T07:24:17.887

模拟 str_repeat

```
"abcde" * 3   
#-> "abcdeabcdeabcde" 
```

# git - Git-flow：为什么使用“git flow release finish”“无法推送到不合格的目的地”？

> ID：14992778
> 
> 赞同：0
> 
> 时间：2013-02-21T00:51:18.237
> 
> 标签：git, git-flow

为什么我在以下内容中收到关于推送到不合格目的地的错误？

```
$ git flow release start v1.03
Switched to a new branch 'release/v1.03' 
```

（其次是一堆其他正常的东西。）

然后：

```
git flow release finish -Fp v1.03
Switched to branch 'master'
Merge made by the 'recursive' strategy.
 .gitignore |    1 +
 1 file changed, 1 insertion(+)
Deleted branch release/v1.03 (was c08e706).
Everything up-to-date
Counting objects: 1, done.
Writing objects: 100% (1/1), 228 bytes, done.
Total 1 (delta 0), reused 0 (delta 0)
To git@github.com:petertheyeti/myprivaterepo.git
   e0ef1dd..29a2667  master -> master
Counting objects: 1, done.
Writing objects: 100% (1/1), 159 bytes, done.
Total 1 (delta 0), reused 0 (delta 0)
To git@github.com:petertheyeti/myprivaterepo.git
 * [new tag]         v1.03 -> v1.03 
```

然后是错误：

```
error: unable to push to unqualified destination: release/v1.03
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref.
error: failed to push some refs to 'git@github.com:petertheyeti/myprivaterepo.git'
Could not delete the remote release/v1.03 in origin. 
```

查看 github 时，一切似乎都很好……也就是说，master 有了新的位。但是为什么会出现这个错误？

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:44:43.747

我假设您使用的是 nvie 版本的 gitflow。

当您执行推送 (-p) 时，软件会尝试删除远程上的发布分支。看来你没有发布分支，所以它失败了。这是软件中的一个错误。

# ios - 我可以修改默认 iOS 控件的子视图吗？

> ID：14992779
> 
> 赞同：0
> 
> 时间：2013-02-21T00:51:19.700
> 
> 标签：ios, objective-c, xcode

我们是否允许修改默认 iOS 控件的子视图，例如 UIDatePicker？我的应用程序有一个极简/扁平的 UI，默认的日期选择器与该样式不匹配。我能找到修改它的唯一方法是遍历其子视图并隐藏添加阴影等的子视图，如下所示：

```
UIView *background = (UIView *)[[self pickerViews].subviews objectAtIndex:0];
background.hidden = YES; 
```

这是允许的还是会让我的应用程序被拒绝？我实际上并没有弄乱控件或其功能，只是弄乱了它的外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:55:33.083

虽然您可能不会立即被拒绝，但将来当控件的子视图更改时，您可能会看到意外的行为。建立您自己的自定义控件或在公共 API 中找到接近您想要的外观的方法可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:04:08.807

它并不是真正的“私有 API”——它完全记录在 SDK 中。但是，您依赖于*未*记录的行为（即子视图 0 是您要隐藏的行为），因此您需要小心。

您的代码有两个潜在问题：

*   如果订单发生变化，它将隐藏错误的视图（检查视图类通常用于防止这种情况发生）
*   如果选择器没有子视图，它将崩溃（这似乎不太可能发生；当您访问例如索引 6 处的视图时，这会成为一个更大的问题）。

您还需要做两件事：

*   保留一份清单，列出您所做的任何事情，这些事情可能会在未来的操作系统版本中被破坏。
*   检查 iOS 测试版中的东西是否仍然有效，并*尽早*这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:08:14.100

不建议更改未通过 API 公开的内容。将来苹果可能会删除该特定索引处的子视图。最好避免这种方法。尝试在 UI 或实现方面寻找其他选项。

# python - Python：正则表达式 findall 返回一个列表，为什么尝试访问列表元素 [0] 会返回错误？

> ID：14992787
> 
> 赞同：10
> 
> 时间：2013-02-21T00:52:09.777
> 
> 标签：python, regex

摘自文档，以下是显示正则表达式方法 findall 如何工作的片段，并确认它确实返回了一个列表。

```
re.findall(r"\w+ly", text)
['carefully', 'quickly'] 
```

`IndexError: list index out of range`但是，以下代码片段在尝试访问 findall 返回的列表的第零个元素时会生成越界错误 ( )。

相关代码片段：

```
population = re.findall(",([0-9]*),",line)
x = population[0]
thelist.append([city,x]) 
```

为什么会这样？

对于更多背景知识，以下是该片段如何适合我的整个脚本：

```
import re

thelist = list()
with open('Raw.txt','r') as f:
    for line in f:
        if line[1].isdigit():
            city = re.findall("\"(.*?)\s*\(",line)
            population = re.findall(",([0-9]*),",line)
            x = population[0]
            thelist.append([city,x])

with open('Sorted.txt','w') as g:
    for item in thelist:
        string = item[0], ', '.join(map(str, item[1:]))
        print string 
```

编辑：阅读下面的评论，了解为什么会发生这种情况的一些背景。我的快速修复是：

```
if population: 
        x = population[0]
        thelist.append([city,x]) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T00:55:24.330

`re.findall`如果没有匹配项，将返回一个空列表：

```
>>> re.findall(r'\w+ly', 'this does not work')
[] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T00:58:34.467

`re.findall`在没有匹配的情况下可以返回一个空列表。如果您尝试访问`[][0]`，您将看到`IndexError`.

考虑到没有匹配，您应该使用以下内容：

```
match = re.findall(...)
if match:
  # potato potato 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T15:30:22.750

我有同样的问题。解决方案似乎很简单，我不知道为什么我没有考虑它。

```
if match: 
```

代替

```
if match[0]: 
```

# html - Internet Explorer 8 中的图像长度和宽度

> ID：14992790
> 
> 赞同：0
> 
> 时间：2013-02-21T00:52:27.187
> 
> 标签：html, image, css

我有`img`以下css规则的元素：

```
max-width: 100%;
height: auto; 
```

原始图像是一个正方形 ( `250px`X `250px`)。问题是我在Internet Explorer 8中测试的时候，没有保留图片长宽比。它适用于其他浏览器和 IE9。尚未在 IE6 和 IE7 中测试。

如何解决？

# meteor - 如何在 Meteor 模板中的动态字段上使用 X-editable？

> ID：14992791
> 
> 赞同：5
> 
> 时间：2013-02-21T00:52:28.217
> 
> 标签：meteor

我想在表格中显示整个集合，并使用[X-editable使每一行中的“名称”字段就地可编辑](http://vitalets.github.com/x-editable/)

editable 可以使用最近添加的“选择器”选项附加到表中的每个名称：

```
$('#collectionTable').editable({
  selector: '.editable-click',
});

// I also need to setup a 'save' callback to update the collection...

$('a.editable-click').on('save', function(e, params) {
  console.log('Saved value: ' + params.newValue);
  // TBD: update the collection 
}); 
```

但在模板完成渲染并且 DOM 节点可用之前，我无法运行其中任何一个，所以我将它放在模板的“渲染”回调中。

问题在于，每次集合更改时，都会调用 render ，然后将一个新的可编辑项附加到每个 DOM 节点以及另一个回调。这意味着只要保存“名称”，就会发生内存泄漏和多次回调。

显然我做错了，但我不确定调用 editable 和 on('save', function()) 的正确位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:09:28.693

在每次渲染后调用 editable 似乎是可靠的（尽管我想可能会导致内存泄漏）。但是，如果您希望绑定到“保存”之类的事件，则应确保取消绑定所有现有事件，否则您将在每次渲染时继续绑定新的保存事件：

```
Template.editableTable.rendered = function() {

    $('#myParentTable').editable({
      selector: '.editable-click'
    });

    $('a.editable-click').unbind('save').on('save', function(e, params) {
      // Make changes to your collection here.
    });

  }; 
```

我尝试只在模板的第一次渲染时调用 editable 。只要您确保在模板被销毁时再次调用它（例如，使用动态创建和销毁模板的路由器），这主要是有效的。但是在某些极端情况下它似乎不起作用，所以我恢复到在每次渲染后只调用 editable 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T15:53:49.780

如果可以的话，我会发表评论，但我现在只有 29 个代表。这样的痛苦。无论如何。

我在 Meteor 0.7.2 中有 x-editable 工作，但自从升级到 0.8.0 后，它不再正确渲染。我倾向于以一堆空标签结束。这是令人沮丧的，因为数据就在那里，只是在渲染函数被触发时还没有。

现在使用 x-editable 的最佳方法是什么，它只触发一次并且不能确保数据在那里。

我正在使用 Iron Router 并且我的模板没有嵌入到 {{#each}} 块中，这似乎是新渲染模型的基本解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:14:19.717

难道你不记得你是否已经设置了可编辑和事件侦听器，如果你已经设置了就不要这样做吗？

```
if (editable) {
 // enable editable and add the save listener
 // ...
 editable = true;
} 
```

# apache-camel - Camel stopRoute startRoute 泄漏线程

> ID：14992793
> 
> 赞同：1
> 
> 时间：2013-02-21T00:52:55.893
> 
> 标签：apache-camel

我需要能够在 RouteBuilder 之外启动和停止路由......所以我有一个类来监视外部服务并打开和关闭路由。基本上我希望路由停止消费新请求并处理当前飞行中的请求。

所以我有一个计划任务，每 x 秒运行一次，它会打开和关闭服务。但我发现停止和启动路线会导致它泄漏线程。

基本代码：

```
 for(int iCount=0;iCount<10;iCount++) {
   camelContext.stopRoute(TEST_ROUTE);
   camelContext.startRoute(TEST_ROUTE);
 } 
```

这似乎创建了 10 个额外的线程。有没有人遇到过这个？

注意：我考虑过使用挂起/恢复以及使用 RoutePolicy。但是我想知道为什么 Camel 在使用 Start/Stop 路由时会泄漏线程。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T03:32:15.283

[这个 Camel JIRA](https://issues.apache.org/jira/browse/CAMEL-5677)描述了您报告的问题。最好咨询 JIRA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:55:22.787

[当 Camel 停止路由时，它使用后台线程来控制正常关闭，您可以在 Camel 网站http://camel.apache.org/graceful-shutdown.html](http://camel.apache.org/graceful-shutdown.html)上阅读相关内容

当您提出关于 SO 的问题时，请提供更多详细信息，例如您看到的 10 个线程是什么？还有你使用什么版本的骆驼等等。还有你开始/停止的路线的代码等等。

# android - Eclipse 停止编译 RenderScript 文件

> ID：14992795
> 
> 赞同：4
> 
> 时间：2013-02-21T00:53:00.790
> 
> 标签：android, eclipse, ant, renderscript

我的 Android 项目中有一个 RenderScript (.rs) 文件：SomeScript.rs

在我开发它的过程中一直运行良好。但是后来我在 Eclipse 中做了一个工作区清理，现在它似乎没有将文件识别为 RenderScript 文件。

以前，如果我有语法错误，它会通知我有问题的行。但是现在，无论我对文件做什么，它都不会感到不安。它也不会为 /gen 中的脚本生成 CScript Java 包装器。这条神秘的消息只是出错了：

```
Error executing Renderscript: Return code 1          line 1 Android AIDL Problem 
```

一些简短的谷歌搜索并没有为这个错误返回太多。以前有人见过这样的事情吗？我的目标是 API 级别 17。我的 SDK 和 ADT 插件是最新的。

此外，如果我创建一个全新的 .rs 文件，一切正常。直到我清理......也在两台不同的机器上试过这个。但是，对项目进行 ANT 构建工作得非常好，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:00:27.237

Found the problem. Our version control software locks every file after you do a check in. The build process within Eclipse requires that the **/res/raw/somescript.bc** file it generates be writable (*even if no changes are being made to the script*).

If it is not writable, it errors out in that very unhelpful way. So if anyone else finds this problem, just don't check the ***.bc** files into your source control!

# java - Spring 3 中的自定义 Autowire 候选 bean

> ID：14992796
> 
> 赞同：10
> 
> 时间：2013-02-21T00:53:21.587
> 
> 标签：java, spring, dependency-injection, annotations

假设我有以下结构，其中有一个服务接口`ServiceInterface`和几个实现它的组件：我还有一个`ProductAService`bean ，它有一个限定属性，表示我们说当前正在处理 ProductA 或 ProductB。然后如何使用自动装配或其他注释将正确的实现（ProductAService 或 ProductBService）自动注入到需要它的某些服务中（如下）。`ProductBService``RequestContext``ServiceThatNeedsServiceInterface`

```
public interface ServiceInterface {
  void someMethod();
}

@Component(name="ProductAService")
public class ProductAService implements ServiceInterface {
  @Override public void someMethod() { 
    System.out.println("Hello, A Service"); 
  }
}

@Component(name="ProductBService")
public class ProductBService implements ServiceInterface {
  @Override public void someMethod() { 
    System.out.println("Hello, B Service"); 
  }
}

@Component
public class ServiceThatNeedsServiceInterface {

  // What to do here???
  @Autowired
  ServiceInterface service;

  public void useService() {
    service.someMethod();
  }
}

@Component
@Scope( value = WebApplicationContext.SCOPE_REQUEST )
public class RequestContext {
  String getSomeQualifierProperty();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T14:17:48.050

Spring Source在版本 1.1.4 中创建[ServiceLocatorFactoryBean](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/ServiceLocatorFactoryBean.html)时指的是您的问题。为了使用它，您需要添加一个类似于下面的接口：

```
public interface ServiceLocator {
    //ServiceInterface service name is the one 
      //set by @Component
    public ServiceInterface lookup(String serviceName);
} 
```

您需要将以下代码段添加到您的 applicationContext.xml

```
<bean id="serviceLocatorFactoryBean"
    class="org.springframework.beans.factory.config.ServiceLocatorFactoryBean">
    <property name="serviceLocatorInterface"
              value="org.haim.springframwork.stackoverflow.ServiceLocator" />
</bean> 
```

现在您的 ServiceThatNeedsServiceInterface 将类似于以下内容：

```
@Component
public class ServiceThatNeedsServiceInterface {
    // What to do here???
    //  @Autowired
    //  ServiceInterface service;

    /*
     * ServiceLocator lookup returns the desired implementation
     * (ProductAService or ProductBService) 
     */ 
 @Autowired
     private ServiceLocator serviceLocatorFactoryBean;

     //Let’s assume we got this from the web request 
     public RequestContext context;

     public void useService() {
        ServiceInterface service =  
        serviceLocatorFactoryBean.lookup(context.getQualifier());
        service.someMethod();         
      }
} 
```

ServiceLocatorFactoryBean 将根据 RequestContext 限定符返回所需的服务。除了 spring 注释之外，您的代码不依赖于 Spring。我对上述内容执行了以下单元测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:META-INF/spring/applicationContext.xml" })
public class ServiceThatNeedsServiceInterfaceTest {

    @Autowired
    ServiceThatNeedsServiceInterface serviceThatNeedsServiceInterface;

    @Test
    public void testUseService() {
    //As we are not running from a web container
    //so we set the context directly to the service 
        RequestContext context = new RequestContext();
        context.setQualifier("ProductAService");
        serviceThatNeedsServiceInterface.context = context;
        serviceThatNeedsServiceInterface.useService();

        context.setQualifier("ProductBService");
        serviceThatNeedsServiceInterface.context = context;
        serviceThatNeedsServiceInterface.useService();
    }

} 
```

控制台会显示
Hello, A Service
Hello, B Service

一句警告。API 文档指出，
“这样的服务定位器……通常用于原型 bean，即用于每次调用都应该返回一个新实例的工厂方法……对于单例 bean，直接注入目标 bean 的 setter 或构造函数是更可取的。 ”</p>

我不明白为什么这可能会导致问题。在我的代码中，它在对 serviceThatNeedsServiceInterface.useService() 的两次序列调用中返回相同的服务；

[您可以在GitHub](https://github.com/haimra/ServiceLocatorExample)中找到我的示例的源代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T05:32:36.830

我能想到做类似你正在寻找的事情的唯一方法是创建类似 FactoryBean 的东西，它根据 RequestContext 属性返回适当的实现。这是我拍打在一起的东西，具有您想要的行为：

```
import org.springframework.beans.factory.FactoryBean;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.context.WebApplicationContext;

import javax.servlet.http.HttpServletRequest;

public class InjectionQualifiedByProperty {

    @Controller
    @Scope(WebApplicationContext.SCOPE_REQUEST)
    public static class DynamicallyInjectedController {
        @Autowired
        @Qualifier("picker")
        Dependency dependency;

        @RequestMapping(value = "/sayHi", method = RequestMethod.GET)
        @ResponseBody
        public String sayHi() {
            return dependency.sayHi();
        }
    }

    public interface Dependency {
        String sayHi();
    }

    @Configuration
    public static class Beans {
        @Bean
        @Scope(WebApplicationContext.SCOPE_REQUEST)
        @Qualifier("picker")
        FactoryBean<Dependency> dependencyPicker(final RequestContext requestContext,
                                                 final BobDependency bob, final FredDependency fred) {
            return new FactoryBean<Dependency>() {
                @Override
                public Dependency getObject() throws Exception {
                    if ("bob".equals(requestContext.getQualifierProperty())) {
                        return bob;
                    } else {
                        return fred;
                    }
                }

                @Override
                public Class<?> getObjectType() {
                    return Dependency.class;
                }

                @Override
                public boolean isSingleton() {
                    return false;
                }
            };
        }
    }

    @Component
    public static class BobDependency implements Dependency {
        @Override
        public String sayHi() {
            return "Hi, I'm Bob";
        }
    }

    @Component
    public static class FredDependency implements Dependency {
        @Override
        public String sayHi() {
            return "I'm not Bob";
        }
    }

    @Component
    @Scope(WebApplicationContext.SCOPE_REQUEST)
    public static class RequestContext {
        @Autowired HttpServletRequest request;

        String getQualifierProperty() {
            return request.getParameter("which");
        }
    }
} 
```

我[在 Github 上](https://github.com/zzantozz/testbed/blob/master/spring-mvc/src/main/java/rds/springmvc/mvc/InjectionQualifiedByProperty.java)使用此代码放置了一个工作示例。您可以使用以下命令克隆并运行它：

```
git clone git://github.com/zzantozz/testbed tmp
cd tmp/spring-mvc
mvn jetty:run 
```

然后访问`http://localhost:8080/dynamicallyInjected`查看一个依赖项的结果，并`http://localhost:8080/dynamicallyInjected?which=bob`查看另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T01:11:37.127

我想，你错过了告诉 spring 的注释，你有一个自定义服务。所以你的解决方案是在类名之前添加这个注释：

```
@Service("ProductAService")
public class ProductAService implements ServiceInterface {
  @Override public void someMethod() { 
    System.out.println("Hello, A Service"); 
  }
}

@Service("ProductBService")
public class ProductBService implements ServiceInterface {
  @Override public void someMethod() { 
    System.out.println("Hello, B Service"); 
  }
} 
```

然后你可以自动连接它，但是为了使用特定的服务，你必须像这样添加注释 Qualifier() ：

```
 @Autowired
  @Qualifier("ProductBService") // or ProductAService
  ServiceInterface service; 
```

或者您可能只需要添加一个注释 Qualifier("name of your bean") :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T10:07:10.983

这可能会帮助您：

采用

```
AutowireCapeableBeanFactory.autowireBean(Object existingBean) 
```

或者

```
AutowireCapeableBeanFactory.autowireBeanProperties(Object existingBean, int autowireMode, boolean dependencyCheck) 
```

[AutowireCapeableBeanFactory.autowireBean(Object existingBean)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html#autowireBean%28java.lang.Object%29) [AutowireCapeableBeanFactory.autowireBeanProperties(Object existingBean, int autowireMode, boolean dependencyCheck)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/AutowireCapableBeanFactory.html#autowireBeanProperties%28java.lang.Object,%20int,%20boolean%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T00:28:30.757

我不认为你可以用注释来做到这一点，原因是你需要一个在运行时动态的 bean（可能是 A 服务或 B 服务），所以 @Autowire 将在 bean 在任何地方使用之前连接。一种解决方案是在需要时从上下文中获取 bean。

```
 @Component
public class ServiceThatNeedsServiceInterface {

  ServiceInterface service;

  public void useService() {
     if(something is something){
        service = applicationContext.getBean("Abean", ServiceInterface.class);
     }else{
        service = applicationContext.getBean("Bbean", ServiceInterface.class);
     }
    service.someMethod();
  }
} 
```

您可以将其他逻辑作为单独的函数放在类中的某个位置：

```
public void useService() {
        service = findService();
        service.someMethod();
      }

public ServiceInterface findService() {
         if(something is something){
            return applicationContext.getBean("Abean", ServiceInterface.class);
         }else{
            return applicationContext.getBean("Bbean", ServiceInterface.class);
         }

      } 
```

这是动态的，这可能是您想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T11:59:31.430

您可以将 @Qualifier 注释与别名结合使用。[在此处](https://stackoverflow.com/questions/7812745/spring-qualifier-and-property-placeholder.)查看如何使用它基于属性加载 bean 的示例。您可以修改此方法并更改请求上下文中的属性/别名...

# java - OpenGL 图像绘图

> ID：14992798
> 
> 赞同：1
> 
> 时间：2013-02-21T00:53:24.270
> 
> 标签：java, image, opengl, lwjgl

我已经以正确的尺寸加载了我的游戏，显示了背景并播放了一些背景音乐，这应该是一个登录屏幕，我以前从未弄乱过图形，尽管我知道如何编写大部分服务器/客户端通信，所以这不会是一个问题。

如何绘制多个图像，以及如何将它们放在我想要的位置？

更重要的是，OpenGL 是否支持 PNG 图像的“透明”功能？因为这就是我通过半透明登录框、半透明按钮等开发开始屏幕的方式。

我知道如何加载图像，尽管绘制它们是另一回事..

```
public void drawStartScreen() {
        Color.white.bind();
        c.getAssets().backgroundImage.bind(); // or GL11.glBind(c.getAssets().backgroundImage.getTextureID());
        GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(0, 0);
        GL11.glVertex2f(0, 0);
        GL11.glTexCoord2f(1, 0);
        GL11.glVertex2f(c.getAssets().backgroundImage.getTextureWidth(), 0);
        GL11.glTexCoord2f(1, 1);
        GL11.glVertex2f(c.getAssets().backgroundImage.getTextureWidth(),
                c.getAssets().backgroundImage.getTextureHeight());
        GL11.glTexCoord2f(0, 1);
        GL11.glVertex2f(0, c.getAssets().backgroundImage.getTextureHeight());
        GL11.glEnd();

        if(playMusic == true) {
            c.getAssets().backgroundMusic.playAsMusic(1.0f, 1.0f, true);
            playMusic=false;
        }
    } 
```

我不知道如何使用上面的代码移动图像，所以我无法编写自己的方法来用“参数”“填充”上面的代码。

我试图让我的次要图像绘制到客户端中间，我知道人们可能会因此而看不起我，尽管这是我正在谈论的内容的一个小例子，也是我在编程方面的一些经验的来源多年来一直为 Runescape 创建基于服务器的模拟器，所以下面我将在背景上留下一个显示“登录框”的图像。按钮是透明的，带有黑色边缘，可以让你看到它下面的登录框，除了绘制黑色边框的位置。

这就是我所说的“透明”支持：

[![图像](../Images/514b12c4dc0ee73f5163a4b6896c4303.png)](https://i.stack.imgur.com/zbv5G.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:36:37.310

> 我已经以正确的尺寸加载了我的游戏，并显示了背景

如果您遵循散布在互联网上的众多糟糕教程之一，那么您可能做错了。OpenGL 是一个状态机，这意味着您可以在需要时更改任何您想要的内容。

大多数教程将 glViewport 和投影矩阵设置放在窗口调整大小处理程序中。如果您仅显示没有其他元素的场景，则此方法有效。但是在像你这样的情况下，这种设置相当不方便。

只需做简单的事情：您可以在需要时将视口和投影更改为最适合您需要的任何内容。您想在屏幕中央绘制图像吗？只需根据需要设置视口和投影：

```
glViewport(0, 0, win_width, win_height);
aspect = win_width/win_height;
projection_ortho(-aspect, aspect, -1, 1); 
```

> 更重要的是，OpenGL 是否支持 PNG 图像的“透明”功能？

是的，这叫做混合。

# c# - WPF动态添加控件和绑定问题

> ID：14992801
> 
> 赞同：1
> 
> 时间：2013-02-21T00:53:30.353
> 
> 标签：c#, wpf, binding, telerik

我有两个问题：

1.  为什么`Color`绑定不起作用。您能否提供设置绑定以动态管理颜色的正确方法？

2.  现在我`SplineAreaSeries`是静态的并在 XAML 中初始化。如果我想再添加 10 个系列，那么最好、更优雅的方法是什么？

XAML：

```
 <telerik:RadCartesianChart x:Name="xRevChart">
        <telerik:RadCartesianChart.Grid>
            <telerik:CartesianChartGrid MajorLinesVisibility="XY" MajorXLineDashArray="10.5"
                                        MajorXLinesRenderMode="All"/>
        </telerik:RadCartesianChart.Grid>
        <telerik:RadCartesianChart.VerticalAxis>
            <telerik:LinearAxis></telerik:LinearAxis>
        </telerik:RadCartesianChart.VerticalAxis>
        <telerik:RadCartesianChart.HorizontalAxis>
            <telerik:CategoricalAxis></telerik:CategoricalAxis>
        </telerik:RadCartesianChart.HorizontalAxis>
        <telerik:SplineAreaSeries Name="xSplineArea1" CategoryBinding="XValue" ValueBinding="YValue">
            <telerik:SplineAreaSeries.Fill>
                <SolidColorBrush Color="{Binding Color}"/>
            </telerik:SplineAreaSeries.Fill>
        </telerik:SplineAreaSeries>
        <telerik:SplineAreaSeries Name="xSplineArea2" CategoryBinding="XValue" ValueBinding="YValue">
            <telerik:SplineAreaSeries.Fill>
                <SolidColorBrush Color="{Binding Color}"/>
            </telerik:SplineAreaSeries.Fill>
        </telerik:SplineAreaSeries>
    </telerik:RadCartesianChart> 
```

代码：

```
public class ChartDataClass
{
    public double XValue { get; set; }
    public double YValue { get; set; }
    public Color Color { get; set; }  
}

        List<ChartDataClass> list1 = new List<ChartDataClass>();

        for (int i = 0; i < 20; i++)
        {
            ChartDataClass c = new ChartDataClass();
            c.XValue = i;
            c.YValue = rand.NextDouble() * 100;
            c.Color = Colors.Blue;
            list1.Add(c);
        }

        xRevChart.Series[1].ItemsSource = list1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:24:39.613

使用转换器返回绑定所需的内容。

我认为这是一个愚蠢的问题：[如何在 XAML 中将颜色转换为画笔？](https://stackoverflow.com/questions/3309709/how-do-i-convert-a-color-to-a-brush-in-xaml)

# php - 无法访问复制到 /var/www/ 或其他文件夹中的 php 文件

> ID：14992802
> 
> 赞同：5
> 
> 时间：2013-02-21T00:53:35.207
> 
> 标签：php, apache, ubuntu, htdocs

我在带有 LAMP 设置的 Ubuntu 12.10 上。我将一个包含项目文件（php、html、css）的子目录从我的 Windows PC 上的 xampp/htdocs 复制到我的 ubuntu 的 /var/www/ 中。但是，当我从浏览器访问这些文件时（我可以看到目录列表），我在该目录中的所有文件上得到 403 Forbidden。因此，我在该目录中创建了新的虚拟 php 文件，只是为了查看是否可以访问，并且它可以工作。知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T01:14:41.220

可能是所有权问题。尝试做 `chmod -R 775 /var/www/folder` 和/或 `chown -R domain:www-data /var/www/folder`- 域是该特定虚拟主机或 www-data 的用户

对于目录列表，您可能需要在 /etc/apache2/sites-available/default 中进行修改

+索引

见[http://www.cyberciti.biz/faq/enabling-apache-file-directory-indexing/](http://www.cyberciti.biz/faq/enabling-apache-file-directory-indexing/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-03T16:37:08.410

这就是我解决问题的方法：

```
sudo su
chmod a+rwx /var/www/html/ 
```

# android - onCreateView() 等待 AsyncTask 执行？

> ID：14992806
> 
> 赞同：13
> 
> 时间：2013-02-21T00:53:41.757
> 
> 标签：android, android-asynctask

这是我的情况：

在`onCreate()`我`AsyncTask`的`ArrayList`.

然后在我的`onCreateView()`，我想把这些数据放在 a 中`ListView`，设置一个`onItemClickListener`等......

问题是我正在创建`AsyncTask`和 UI 线程之间的竞赛。如果在完成检索`onCreateView()`之前调用了`AsyncTask`，那么我没有正确设置适配器，也没有设置`onItemClickListener`，等等......

我想要一些方法来确保在启动函数`AsyncTask`之前等待完成执行。`onCreateView()`这可能吗？我阅读了有关`get()`在任务上使用的信息，但在执行它时遇到了一些麻烦。它似乎没有做任何事情。

我想检索数据`onCreate()`并在其中设置适配器`onCreateView()`（而不是在 中设置适配器）`onPostExecute()`的`AsyncTask`原因是，我想检索一次数据，并且能够在用户旋转屏幕或导航回到那个`Fragment`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T01:22:18.667

这是一个更好的方法。初始化您的`ListView`并开始您`AsyncTask`的`onCreate()`. 一旦数据从服务器可用，您将其添加到提供给您的适配器和调用`notifyDatasetChanged()`您的适配器的同一数组中，该数组负责填充您的列表视图。如果您的列表为空，您也可以在此处`ListFragment`调用`setEmptyText()`添加显示的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:44:51.667

您应该遵循@sujith 的回答并更改您的实施，但这里是您具体问题的答案：

> 我想要一些方法来确保在启动 onCreateView() 函数之前等待 AsyncTask 完成执行。这可能吗？

是的，这是可能的，但它会阻止您的 UI 在等待任务完成时显示。

创建并执行`AsyncTask`对它的引用：

```
MyAsyncTask mTask;

...
...onCreate()
mTask = new MyAsyncTask();
mTask.execute();
...
...onCreateView()
myInfo = mTask.get();
super.onCreateView(). 
```

在您的情况下，这是一个坏主意，但是，有时您可能需要做这样的事情。

编辑：`mTask.get()`将返回由`doInBackground()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:58:25.840

无论你在做什么`onCreateView()`，把它移到`onViewCreated()`

`onViewCreated`在视图准备好后调用，所以你不会有问题

# jquery - 页面加载时出现 Wordpress 下拉菜单

> ID：14992807
> 
> 赞同：0
> 
> 时间：2013-02-21T00:53:51.133
> 
> 标签：jquery, css, wordpress, drop-down-menu, navigation

我的网站[Campfire Inc](http://mycustomdevelopment.com/campfire/)在页面加载时显示下拉导航。悬停时它会缩回。我想知道这是否是[主题](http://320press.com/wp-foundation/)或某些 jquery 的问题。如果错误在jquery中，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:30:11.913

您的 css 文件出现 404 错误（未找到文件）：

```
http://mycustomdevelopment.com/campfire/wp-content/themes/campfire/stylesheets/app.css?ver=3.0 
```

.flyout 元素应该有一个 CSS 属性，例如：

```
display: none 
```

那可能在那个文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:27:23.333

是的。在第 221 行的 style.css 中添加：

```
display:none; 
```

# php - 如何在 PHP 中随机生成图像尺寸？

> ID：14992809
> 
> 赞同：1
> 
> 时间：2013-02-21T00:54:11.540
> 
> 标签：php, math, aspect-ratio

我想生成一些随机的 placekitten url，如下所示：

[http://placekitten.com/200/300](http://placekitten.com/200/300)

在我目前正在开发的网站上用作领跑者。图片宽度不得小于 100 像素且不得大于 250 像素。我正在生成这样的宽度：

```
$width = mt_rand(100, 250); 
```

但我不确定如何生成高度。根据生成的随机宽度，高度应具有适当的纵横比。怎么做？

最终目标是：

```
$thumb = "http://placekitten.com/$width/$height"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:59:45.340

应该很简单：

```
$ratio = 200/300;
$width = mt_rand(100, 250);
$height = round($width / $ratio); 
```

* * *

看一些例子：

```
$ratio = 200/300;
echo "base aspect ratio: ", round($ratio, 2), "\n\n";

foreach(range(1,10) as $_) {
  $width = mt_rand(100, 250);
  $height = round($width / $ratio);
  echo "http://placekitten.com/{$width}/{$height}\n";
  echo "aspect ratio: ", round($width / $height, 2), "\n\n";
} 
```

输出

```
base aspect ratio: 0.67

http://placekitten.com/229/344
aspect ratio: 0.67

http://placekitten.com/112/168
aspect ratio: 0.67

http://placekitten.com/241/362
aspect ratio: 0.67

http://placekitten.com/223/335
aspect ratio: 0.67

http://placekitten.com/196/294
aspect ratio: 0.67

http://placekitten.com/234/351
aspect ratio: 0.67

http://placekitten.com/116/174
aspect ratio: 0.67

http://placekitten.com/157/236
aspect ratio: 0.67

http://placekitten.com/165/248
aspect ratio: 0.67

http://placekitten.com/114/171
aspect ratio: 0.67 
```

# c# - 有没有时候我应该将 ViewModel 传递给我的控制器的一个操作方法？

> ID：14992813
> 
> 赞同：3
> 
> 时间：2013-02-21T00:55:27.460
> 
> 标签：c#, asp.net-mvc, controller, viewmodel

我有一个包含表单的页面（如下）：

```
@using (Html.BeginForm("GetResults", "Process"))
{
@Html.ValidationSummary(true)
{
<div data-role="fieldcontain">
    <label for="name">API #1:</label><br />
    @Html.EditorFor(model => model.Active1.mg)
    @Html.ValidationMessageFor(model => model.Active1.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">API #2:</label><br />
    @Html.EditorFor(model => model.Active2.mg)
    @Html.ValidationMessageFor(model => model.Active2.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">API #3:</label><br />
    @Html.EditorFor(model => model.Active3.mg)
    @Html.ValidationMessageFor(model => model.Active3.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">API #4:</label><br />
    @Html.EditorFor(model => model.Active4.mg)
    @Html.ValidationMessageFor(model => model.Active4.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">API #5:</label><br />
    @Html.EditorFor(model => model.Active5.mg)
    @Html.ValidationMessageFor(model => model.Active5.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">Key Active:</label><br />
    @Html.EditorFor(model => model.KeyActive.mg)
    @Html.ValidationMessageFor(model => model.KeyActive.mg)
</div>
<div data-role="fieldcontain">
    <label for="name">Key Active Pack Stat:</label><br />
    @Html.EditorFor(model => model.KeyActive.key_active_pack_stat)
    @Html.ValidationMessageFor(model => model.KeyActive.key_active_pack_stat)
</div>
<div data-role="fieldcontain">
    <label for="lble4m">E4M: </label>
    <br />
    @Html.DropDownList("ddle4m", new[] { new SelectListItem() { Text = "Off", Value = "False" }, new SelectListItem() { Text = "On", Value = "True" } }, new { data_role = "slider" })
</div>
<div data-role="fieldcontain">
    <label for="lblk100m">K100M: </label>
    <br />
    @Html.DropDownList("ddlk100m", new[] { new SelectListItem() { Text = "Off", Value = "False" }, new SelectListItem() { Text = "On", Value = "True" } }, new { data_role = "slider" })
</div>
<div data-role="fieldcontain">
    <label>Choose Filler:</label><br />
    <fieldset data-role="controlgroup">
        @foreach (var i in Model.Fillers)
        {
            <input type="radio" name="radio-choice" id="@i.pk" />
            <label for="@i.pk">@i.name</label>
        }
    </fieldset>
</div>

<p>
    <input type="submit" value="Create" />
</p>
}
} 
```

如您所见，此表单与“Process”控制器内的“GetResults”操作方法相关联。因此，当用户单击“提交”时，传递的对象应该是表单中定义的对象，对吧？

这是我的“GetResults”操作方法：

```
public ActionResult GetResults(ProcessViewModel vm)
    {
        vm.NumberOfCapsules = 100;

        List<Results> results = context.GetResults();
        return View(results);
    } 
```

将我的 ViewModel 传递给我的控制器是一个好习惯，如果不是，我将如何从表单中捕获所有数据？

谢谢..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:00:00.070

你肯定在那里发布了很多代码。然后你问一个问题。这个问题的答案是：是的。

# asp.net - 从 asp.net 网站启动一个进程并执行它

> ID：14992816
> 
> 赞同：1
> 
> 时间：2013-02-21T00:56:00.930
> 
> 标签：asp.net

从服务器上的网页我想：

访问网页。输入我的凭据。

单击 go 并在服务器上执行程序 .exe。该程序运行反映我的 dll 的 robocopy .bat 文件。

这可能吗？

我正在使用 Process.Start 与 .exe 作为文件名。我可以获得正确的凭据，但它永远不会真正执行。这可能是因为它是一次点击应用程序。

有人对这个有经验么？我是不是走错路了？

# svn - 用 Subversion 检查每个版本？

> ID：14992821
> 
> 赞同：1
> 
> 时间：2013-02-21T00:57:02.580
> 
> 标签：svn, version-control, tortoisesvn, google-code

有没有一种简单的方法可以检查 Subversion 中的每个修订版？目前，如果我想这样做，我将不得不单独检查每个修订版。

为了回答不可避免的“你为什么需要这个？”，我将使用离线计算机并希望能够在不连接到互联网的情况下测试旧代码状态。我可能不需要一路回去，但我仍然希望有所有的修订，以防万一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T01:29:35.960

您可以使用 svnsync 在本地克隆存储库。svnsync 不需要任何额外的访问级别，而不是您已经拥有的，您最终将获得存储库的完整副本。请注意，如果存储库很大，这可能需要一些时间。

svnsync 记录在 svnbook 中：http: [//svnbook.red-bean.com/en/1.7/svn.ref.svnsync.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svnsync.html)

一般流程会。

创建一个新的存储库：

```
svnadmin create mirror 
```

初始化同步（其中 URL 是您的 Google 代码存储库根）：

```
svnsync initialize file://`pwd`/mirror $URL --source-username user --source-password pass 
```

然后，您可以更新同步以匹配当前存储库：

```
svnsync synchronize file://`pwd`/mirror 
```

请注意，我`pwd`在 URL 中使用命令的文件，如果需要，您可以使用完整路径，因此您不必保留在同一目录中。

然后，您可以重新定位现有的工作副本以使用您的本地镜像（其中 WC 是您的工作副本路径，URL 是 Google 代码仓库的 URL）：

```
 svn switch --relocate $URL file://`pwd`/mirror $WC 
```

然后返回到 Google 代码存储库就像（其中 URL 是您的 Google 代码存储库的 URL）一样简单：

```
svn switch --relocate file://`pwd`/mirror $URL $WC 
```

如果您想继续从 Google 代码仓库同步，​​我不会提交。但是，如果您不打算更新，您可以提交并`svnadmin dump`限制您在本地存储库中更改的版本，并用于`svnrdump load`将它们发送到 Google 代码服务器。

git-svn 是另一种选择。但是以上应该可以通过现有的 SVN 安装来完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T01:08:54.553

我强烈建议您使用 GIT。

通过使用 git-svn，您将能够克隆 svn 存储库，获取每个修订版并创建相应的 GIT 存储库。

使用包含所有版本的 GIT 存储库，您可以在那台离线计算机上做任何您想做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T01:30:07.203

不如 Adrian Shum 的解决方案好，但如果你真的更喜欢坚持使用 SVN，你也可以使用[svnsync](http://svnbook.red-bean.com/en/1.4/svn.ref.svnsync.html)。来自[Stefan](https://stackoverflow.com/a/2303862/1344273)对 stackoverflow 的回答：

首先，在您的家用机器上创建一个新的存储库。

```
svnadmin create c:\backuprepo 
```

接下来，创建一个名为 pre-revprop-change.bat 的文件：

```
echo exit 0 > c:\backuprepo\hooks\pre-revprop-change.bat 
```

然后，初始化同步：

```
svnsync init file:///c:/backuprepo https://url/of/your/repository 
```

之后，您可以简单地运行

```
svnsync sync file:///c:/backuprepo 
```

一天左右一次，您将只获得那些尚未在备份存储库中的更改。第一次需要一段时间，但是在您将备份存储库与真实存储库同步后，同步它只需几秒钟，因为只有那些新的修订需要同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T07:22:54.103

**回答提出的问题**

您可以`svn export`在 oder 中使用 1-st 形式在任何修订版中导出到 repo 的未版本化树状态。从`svn help export`

```
export [-r REV] URL[@PEGREV] [PATH]
...
Exports a clean directory tree from the repository specified by
URL, at revision REV if it is given, otherwise at HEAD, into
PATH. 
```

您可以轻松编写最简单的脚本，该脚本在 repo 中的所有修订版中运行并执行导出以更改更改的目标路径

**回答未提出的问题“如何克隆任何远程仓库”**

在 Subversion 1.7.* 中添加了新的管理工具：`svnrdump`，允许执行`svnadmin dump|load`，但用于**远程存储库**。

在您的情况下，您：

*   在 TortoiseSVN 中创建本地仓库
*   CG-repo 的负载转储（可能只有主干部分的完整转储）
*   `svnadmin load`转储到回购
*   将您当前的 WC 切换到新的仓库或从本地结帐到新的 WC（并且在任何情况下都以传统方式拥有完整的历史记录）

**关于 svnrdump 的最后说明**

Svnrdump 是 Subversion 1.7.X 中客户端工具的一部分。任何**1.7 客户端都可以与****1.6 服务器**自由通信而不会出现问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T02:20:09.287

工具[rsvndump](http://rsvndump.sourceforge.net/#content)正是实现了这个目的。

# asp.net - 未声明用户控制变量

> ID：14992824
> 
> 赞同：1
> 
> 时间：2013-02-21T00:57:21.130
> 
> 标签：asp.net, .net, vb.net, user-controls

我有一个在用户控件中声明的变量。它是用户控件中下拉列表的值。当我尝试在 aspx 页面上的 If 语句中使用它时，它说未声明该变量。有没有办法在 aspx 页面上声明变量或让它识别它是在用户控制页面上声明的？
谢谢

我正在调用 aspx 页面顶部的代码

```
<%@ Register src="pType.ascx" tagname="pType" tagprefix="uc2" %> 
```

我正在使用 if 语句

```
<%If pt.SelectedValue = "1" Then%>
    \\do things 
    <%End If%> 
```

在控制 pt 中定义为

```
<asp:DropDownList ID="pt" runat="server"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:15:13.160

我认为您无法访问 aspx 页面中用户控件的属性。

我知道您可以做的是在后面的代码中声明用户控件并将其动态添加到您的页面中。

```
protected void Page_Init(object sender, EventArgs e)
{

      //MyControl is the Custom User Control with a code behind file
      MyControl myControl = (MyControl)Page.LoadControl("~/MyControl.ascx");

      if (myControl.SelectedValue == 1) {
         //do work
      }
      // User Control is a placeholder in your aspx page
      UserControlHolder.Controls.Add(myControl);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:59:39.600

我可能需要查看代码，但您尝试过吗

```
var v = pt.SelectedItem;

if (v == "1")
{
// do things
} 
```

请注意，此代码需要在代码后面（.cs）文件中运行，而不是在 ascx 或 aspx 文件中运行 :)

# jquery - 根据状态更改 jQuery 自动完成项的背景颜色（使用 CSS）

> ID：14992827
> 
> 赞同：13
> 
> 时间：2013-02-21T00:57:31.913
> 
> 标签：jquery, css, background, jquery-autocomplete

目标是创建一个 JQuery 自动完成元素，其列表项在通过键盘悬停或聚焦时具有蓝色背景。Facebook 搜索框很好地实现了这一点。

每个`<li>`元素都包含用`<a>`. 这些`<a>`标签中的每一个都属于 class `sbiAnchor`。可以使用以下 CSS 成功生成悬停时的蓝色背景：

```
.ui-autocomplete a.ui-corner-all.sbiAnchor:hover{
    background: blue;
} 
```

但是当用户向上/向下键自动完成列表时，如何应用相同的蓝色背景。将 CSS 代码更改为以下内容不起作用：

```
.ui-autocomplete a.ui-corner-all.sbiAnchor:hover, .ui-autocomplete .ui-state-focus a.ui-corner-all.sbiAnchor{
    background: blue;
} 
```

这里的正确方法是什么？请记住，这种蓝色背景效果应仅适用于我页面上的一个特定自动完成功能（其中有几个）。这就是为什么我使用 sbiAnchor 将其项目与其他自动完成元素的项目区分开来。其他自动完成应保留其默认行为，因此 CSS 选择器不应过于宽泛。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-31T21:06:27.337

This work quite easy

```
body .ui-autocomplete {
  /* font-family to all */
}

body .ui-autocomplete .ui-menu-item .ui-corner-all {
   /* all <a> */
}

body .ui-autocomplete .ui-menu-item .ui-state-focus {
   /* selected <a> */
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-17T19:16:46.413

悬停的 css 变成了这个 css 类 ![在此处输入图像描述](../Images/ba608b210732e13ed322c0d6511b37f3.png)

你可以覆盖它。例如：

```
.ui-state-focus {
background: none !important;
background-color: blue !important;
border: none !important;} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-02-25T22:28:18.467

我通过以下方式更改了颜色：

```
.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active,
a.ui-button:active,
.ui-button:active,
.ui-button.ui-state-active:hover {
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-27T02:35:54.430

这改变了我的悬停颜色。

```
.ui-menu-item .ui-menu-item-wrapper:hover
{
    border: none !important;
    background-color: #your-color;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-21T15:51:04.770

我使用了上面的答案并稍作调整以适用于我的场景（JQuery 自动完成项的悬停样式）。希望这可以帮助某人。

```
.ui-menu-item .ui-menu-item-wrapper.ui-state-active {
    background: #6693bc !important;
    font-weight: bold !important;
    color: #ffffff !important;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T01:23:38.823

输入字段而不是锚标记保持焦点。这应该有效。

```
.ui-autocomplete-input:focus, .ui-autocomplete a.ui-corner-all.sbiAnchor:hover {
    background: blue;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T20:32:43.147

花了一段时间才弄明白，但正确的 CSS 代码是：

```
.ui-menu .ui-menu-item a.sbiAnchor.ui-state-hover{
    background: blue;
} 
```

这会用一块石头杀死两只鸟，为悬停**和**通过上/下键击选择提供蓝色背景。jQuery 自动完成元素显然将向上/向下击键视为“悬停”动作，而不是选择或焦点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-16T00:33:08.473

使用`.ui-menu-item`和`ui-menu-item-wrapper.ui-state-active`：

```
.ui-menu-item .ui-menu-item-wrapper.ui-state-active {
  background: #f5f5f5 !important; 
  border: solid 1px transparent; 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-21T14:42:47.820

这是正确的答案：只需将“灰色”更改为您想要的颜色

```
.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active,
a.ui-button:active,
.ui-button:active,
.ui-button.ui-state-active:hover {
	border: none!important;
	background: grey;
	font-weight: normal;
	color: #ffffff;
}
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-02T14:44:34.397

这么老的话题，但上面的解决方案对我不起作用。如果我直接前进，我会更快地找到解决方案：

在您的自定义样式表中覆盖以下样式的 jquery-ui.css

```
.ui-autocomplete {
            border-radius: 0.25rem;
            background-color: #eceff1;
            padding: 0 0.6rem;
            font-family: 'ptmono';
        .ui-menu-item {
            border: 1px solid #eceff1;
            border-radius: 0.25rem;
            .ui-state-active,
    .ui-widget-content .ui-state-active,
    .ui-widget-header .ui-state-active,
    a.ui-button:active,
    .ui-button:active,
    .ui-button.ui-state-active:hover {
            background-color: #eceff1;
            border-color: #eceff1;
            color: #0d47a1;
            }
        }
    } 
```

除了 background: none !important，您可以在 .ui-menu-item 和活动类中设置背景。另外，不要写边框：无！重要的是，您在两个类中都用背景颜色覆盖边框颜色，这是防止高度变化和摆动效果的原因。

# android - 无法在 android 中使用 init shell 脚本执行 chroot

> ID：14992828
> 
> 赞同：1
> 
> 时间：2013-02-21T00:57:35.217
> 
> 标签：android, android-emulator, chroot, android-build, prebuild

我想在 Android ICS Emulator 中运行 glibc，为此我将 glibc 捆绑为 AOSP 根文件夹中的一个单独文件夹，其中包含 Android.mk，内容如下：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
$(shell mkdir -p $(TARGET_OUT)/glibc/)
$(shell cp -rf $(LOCAL_PATH)/* `pwd`/$(TARGET_OUT)/glibc/) 
```

它将整个 glibc 文件夹复制到 out/target/product/generic/system/ 文件夹。并使snod包含在system.img中

带有 glibc 文件夹的 startglibc.sh 和 init.sh 脚本分别被复制到 /system/glibc 和 /system/glibc/root/ 文件夹。

我已经编译了busybox并将其复制到/system/bin/文件夹中。

/system/glibc/startglibc.sh 的内容如下：

```
BUSYBOX=/system/bin/busybox
mnt=/system/glibc

export PATH=/usr/bin:/usr/sbin:/bin:$PATH
export ROOT=/root

${BUSYBOX} chroot $mnt /root/init.sh 
```

startglibc.sh 从 init.goldfish.rc 调用如下：

```
service myscript /system/bin/busybox ash /system/glibc/startglibc.sh
    class main
    oneshot 
```

我已使用 system/core/include/private/android_filesystem_config.h 将 777 和 root:root 作为 init.sh 的文件权限，如下所示：

```
{ 00777, AID_ROOT,      AID_ROOT,     "system/glibc/root/init.sh" }, 
```

在启动期间，会调用 startglibc.sh 脚本，但在执行 chroot 时会出现权限被拒绝错误。

我是否错过了使用 init.sh 进行 chroot 的任何内容？还是我在 Android AOSP 构建期间错误地复制了 glibc 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:47:49.283

我能够成功地执行 chroot。以下是我所做的：

chroot 不仅需要具有执行权限的初始化脚本或 /bin/sh，还需要大多数文件系统文件夹，如 bin。等变种。等用于创建新根。

因此，我在下面给出了 system/core/include/private/android_filesystem_config.h

```
{ 00755, AID_ROOT,      AID_ROOT,     "system/glibc/" },
{ 00755, AID_ROOT,      AID_ROOT,     "system/glibc/*" }, 
```

因为当我在 AOSP 构建期间复制整个文件夹时，默认情况下，复制文件夹中所有文件和文件夹的权限为 644，因此 chroot 所需的必要文件夹没有执行权限。

此外，如果复制中的任何文件夹需要额外的权限，那么我们可以在上面的代码中指定相同的内容。

我真的很喜欢 android 授予文件系统权限的方式。它是非常可配置的。

我希望这对其他人也有帮助。

# c - 编译错误：“RtlCaptureStackBackTrace”未定义

> ID：14992829
> 
> 赞同：2
> 
> 时间：2013-02-21T00:57:36.507
> 
> 标签：c, visual-studio-2012, backtrace

我正在尝试向使用 Visual Studio 2012 构建的 C 项目添加一个简单的回溯函数，并且由于某种原因，它在调用时给了我这个编译错误`CaptureStackBackTrace()`：

```
10>c:\...\stacktrace.h(112): warning C4013: 'RtlCaptureStackBackTrace' undefined; assuming extern returning int 
```

该构建是使用 cmake 配置的。根据 MSN 文档，`RtlCaptureStackBackTrace`是 的支持实现`CaptureStackBackTrace`，但我不明白为什么找到它会有任何问题。我的包括：

```
#include <windows.h>
#include <winbase.h>
#include <dbghelp.h> 
```

一般来说，我对 C 项目不是很熟悉，这是我 15 年来在 Windows 上的第一个项目，所以我真的不知道可能出了什么问题。该项目非常大，其他一切都很好。

# php - 从各种在线商店抓取数据

> ID：14992830
> 
> 赞同：0
> 
> 时间：2013-02-21T00:57:39.677
> 
> 标签：php, jquery, ajax, web-scraping, screen-scraping

首先，应该提到我已经获得商店的许可来抓取这些数据，所以合法性在这里不是问题！

我正在尝试从各种在线商店中抓取信息，并每小时将它们存储在数据库中。

示例网站：[http ://www.uptherestore.com/department/accessories](http://www.uptherestore.com/department/accessories)

我试过这样的[PHP 抓取](http://www.devblog.co/php-web-page-scraping-tutorial/)：

```
<?php
$file_string = file_get_contents('http://www.uptherestore.com/department/accessories');
preg_match('/<div class="view view-uc-products view-id-uc_products view-display-id-page_3 storeview view-dom-id-1">
(.*)<\/div>/i', $file_string, $title);
$title_out = $title[1];?>
<p><strong>Accessories:</strong> <?php echo $title_out; ?></p> 
```

但它给了我类似的错误：

```
 [14-Feb-2013 07:39:49 UTC] PHP Warning:  DOMDocument::loadHTML() [<a href='domdocument.loadhtml'>domdocument.loadhtml</a>]: htmlCheckEncoding: encoder error in Entity, line: 7 in scraping.php on line 5 
```

日志文件中的完整错误在这里： http: [//pastebin.com/W2Bhkc0s](http://pastebin.com/W2Bhkc0s)

即使我**确实**设法从该站点抓取，它也只会返回结果的第一页（当我需要所有页面时）。我目前对此的解决方案是：

*   使用 jQuery 检查页面底部的分页器中有多少元素
*   运行一个循环来抓取这些页面中的每一个

但这并不理想 - 正如您所看到的，在页面底部有第 1...9 页，但如果您单击“最后”，则实际上有 11 页内容。简而言之，从这样的网站上抓取数据的最佳方法是什么？如前所述，店主都允许我使用他们的内容，但他们并不是特别注重技术，不能让我访问他们的服务器/在他们的服务器的 .htaccess 中放置任何代码以允许来自我的网站的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:48:38.570

分页很简单，您只需找到显示“下一步”的链接并跟随它，直到它不再存在。除非您对 xpath 感到满意，否则需要一个好的 html 解析器库（phpquery、simple-html-dom）。准备好花大量时间找出正确的方法，最重要的是，不要听任何人告诉你使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:39:40.723

首先，您的错误消息似乎不适合您的 php 代码： php 正在尝试使用正则表达式解析 html（错误！）并且错误消息表明您正在使用 html 解析器（DOMDocument）来解析 html （正确的方式）。

您需要做的是：

1.  从产品页面获取 html（就像您现在正在做的那样......）；
2.  检查该页面是否已在您的数据库中解析（请参阅下一点）；
3.  使用 html 解析器从该页面获取您需要的信息并将所有内容存储在数据库中 - 包括指向产品页面的链接或该页面的其他标识属性以及某种时间戳，以便您知道自己做了什么已经;
4.  使用 html 解析器获取 html 中的所有产品链接；
5.  转到 1\. 对于您找到的每个产品链接。

您可能需要构建一些逻辑以确保您的脚本不会进入永无止境的循环或运行时间过长，但基本上就是这样；在您真正想在浏览器中查看操作结果之前，不需要浏览器/javascript/ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:17:01.043

使用 cURL 和正则表达式过滤您需要的内容。Google cURL php.net 网站将为您提供所需的所有信息

# javascript - 替换iFrame加载外部页面+信息栏

> ID：14992832
> 
> 赞同：3
> 
> 时间：2013-02-21T00:57:41.627
> 
> 标签：javascript, html, css, ajax, iframe

我正在开发一个应用程序，该应用程序需要将人们带到外部站点，同时向他们提供一些可供使用的选项/信息。信息也必须在页面之间保持不变。

事实证明，弹出窗口让人们感到困惑，所以到目前为止我想出的解决方案是在动态页面上创建一个类似社交分享栏的东西，然后通过 iFrame 加载到购物网站中[参见下面的模型]。

这完成了工作，除了：

1.  一些网站 [明智地] 打破框架。
2.  一些像亚马逊这样的网站根本不加载框架[附属欺诈]。
3.  它使 ssl / 安全问题 / 网络钓鱼难以检测。
4.  用户屏蔽 url 是不礼貌的。
5.  *这是一个 iFrame*

我意识到跨域 AJAX 不好，但肯定必须有一个可**编码的解决方案**来提供更好的体验？

![使用随机 rei 产品的示例页面](../Images/4801d798dd61ba8caead2a9837cbda1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:48:30.370

我不知道你想要多复杂，或者你有什么选项，但你可以设置一个代理来加载页面并伪造用户代理来获取加载到 iFrame 中的请求，如下所示： [http： //www.electrictoolbox.com/php-change-user-agent-string/](http://www.electrictoolbox.com/php-change-user-agent-string/)

# iphone - iOS 文件路径上的 /private 前缀表示什么？

> ID：14992834
> 
> 赞同：34
> 
> 时间：2013-02-21T00:57:52.207
> 
> 标签：iphone, ios, filepath

我的应用程序在 iPhone 上运行时出现错误，但在模拟器上运行时没有。我使用主目录路径的长度来提取 /Documents 中文件的相对路径。不幸的是，这并不总是在 iPhone 上正常工作，因为前缀“/private”被添加到主路径中。但是，无论有无前缀，都可以引用同一个文件。下面的代码演示了这种不一致。“/private”的目的是什么，iOS 何时提供？

```
- (IBAction)testHomepath:(id)sender {
    NSFileManager *fmgr = [NSFileManager defaultManager];
    NSString  *homePath = [NSString stringWithFormat:@"%@/Documents",NSHomeDirectory()];
    NSString  *dirPath  = [homePath stringByAppendingPathComponent:@"TempDir"];
    NSURL     *dirURL   = [NSURL fileURLWithPath:dirPath];
    NSString  *filePath = [dirPath  stringByAppendingPathComponent:@"test.jpg"];
    [fmgr createDirectoryAtPath:dirPath withIntermediateDirectories:NO attributes:nil error:nil];
    [fmgr createFileAtPath:filePath contents:nil attributes:nil];
    NSArray *keys  = [[NSArray alloc] initWithObjects:NSURLNameKey,nil];
    NSArray *files = [fmgr contentsOfDirectoryAtURL:dirURL includingPropertiesForKeys:keys options:0 error:nil];
    NSURL *f1 = (files.count>0)? [files objectAtIndex:0] : 0;
    NSURL *f2 = (files.count>1)? [files objectAtIndex:1] : 0;
    bool   b0 = [fmgr fileExistsAtPath:filePath];
    bool   b1 = [fmgr fileExistsAtPath:f1.path];
    bool   b2 = [fmgr fileExistsAtPath:f2.path];

    NSLog(@"File exists=%d at path:%@",b0,filePath);
    NSLog(@"File exists=%d at path:%@",b1,f1.path);
    NSLog(@"File exists=%d at path:%@",b2,f2.path);
} 
```

在 iPhone 上运行时将以下内容写入日志。我手动间隔输出以显示第 1 行和第 2 行之间的差异。

```
2013-02-20 16:31:26.615 Test1[4059:907] File exists=1 at path:        /var/mobile/Applications/558B5D82-ACEB-457D-8A70-E6E00DB3A484/Documents/TempDir/test.jpg
2013-02-20 16:31:26.622 Test1[4059:907] File exists=1 at path:/private/var/mobile/Applications/558B5D82-ACEB-457D-8A70-E6E00DB3A484/Documents/TempDir/test.jpg
2013-02-20 16:31:26.628 Test1[4059:907] File exists=0 at path:(null) 
```

在模拟器上运行时将以下内容写入日志（没有“/private”）：

```
2013-02-20 16:50:38.730 Test1[7224:c07] File exists=1 at path:/Users/kenm/Library/Application Support/iPhone Simulator/6.1/Applications/C6FDE177-958C-4BF5-8770-A4D3FBD281F1/Documents/TempDir/test.jpg
2013-02-20 16:50:38.732 Test1[7224:c07] File exists=1 at path:/Users/kenm/Library/Application Support/iPhone Simulator/6.1/Applications/C6FDE177-958C-4BF5-8770-A4D3FBD281F1/Documents/TempDir/.DS_Store
2013-02-20 16:50:38.733 Test1[7224:c07] File exists=1 at path:/Users/kenm/Library/Application Support/iPhone Simulator/6.1/Applications/C6FDE177-958C-4BF5-8770-A4D3FBD281F1/Documents/TempDir/test.jpg 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T23:39:43.130

我从调试器中尝试了这个，发现`URLByResolvingSymlinksInPath`“修复”了`/private/`添加。

```
(lldb) p (NSURL *)[NSURL fileURLWithPath:@"/private/var" isDirectory:YES]
(NSURL *) $1 = 0x1fd9fc20 @"file://localhost/private/var/"
(lldb) po [$1 URLByResolvingSymlinksInPath]
$2 = 0x1fda0190 file://localhost/var/

(lldb) p (NSURL *)[NSURL fileURLWithPath:@"/var" isDirectory:YES]
(NSURL *) $7 = 0x1fd9fee0 @"file://localhost/var/"
(lldb) po [$7 URLByResolvingSymlinksInPath]
$8 = 0x1fda2f50 file://localhost/var/ 
```

如您所见，`file://localhost/var`这是我们真正想要的。

正因为如此，这似乎`/private/var`是一个符号链接到`/var`. 然而，@Kevin-Ballard 指出这不是真的。我确认他是正确的，并且`/var`是`/private/var`（叹气）的符号链接

```
(lldb) p (NSDictionary *)[[NSFileManager defaultManager] attributesOfItemAtPath:@"/var" error:nil]
(NSDictionary *) $3 = 0x1fda11b0 13 key/value pairs
(lldb) po $3
$3 = 0x1fda11b0 {
    ...
    NSFileType = NSFileTypeSymbolicLink;
}

(lldb) p (NSDictionary *)[[NSFileManager defaultManager]   attributesOfItemAtPath:@"/private/var" error:nil]
(NSDictionary *) $5 = 0x1fda4820 14 key/value pairs
(lldb) po $5
$5 = 0x1fda4820 {
    ...
    NSFileType = NSFileTypeDirectory;
} 
```

`URLByResolvingSymlinksInPath`在这里做一些有趣的事情也是如此，但现在我们知道了。对于这个特定问题，`URLByResolvingSymlinksInPath`听起来仍然是一个很好的解决方案，适用于模拟器和设备，并且如果发生变化，将来应该可以继续工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-26T16:28:27.740

在**Swift** 3 中， `URL`具有`standardizedFileUrl`属性，它将删除任何符号链接并解析路径中的相关部分，例如`./`.

在撰写文档时，该[文档](https://developer.apple.com/reference/foundation/url/2293229-standardizedfileurl)非常无用，但看起来它与[`NSURL`'s`standardized`](https://developer.apple.com/reference/foundation/nsurl/1411073-standardized)属性等效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T02:12:52.697

要实际回答您的问题：

我相信`/private`是他们发布 OS X 时添加的前缀（我认为 NeXTStep 中没有，但已经有*几十年*了）。它似乎存在于`etc`、`var`和`tmp`（而且，奇怪的是，`tftpboot`我不知道我的 PBG4 可以做到这一点），也许用户不会想知道这个愚蠢的文件夹叫什么`etc`，并尝试删除它。

在设备上，Apple 决定将用户数据存储在`/private/var/mobile`（用户名是“mobile”）中。我不确定他们为什么不选择`/Users/mobile`或只是`/mobile`，但它没有比`/var/mobile`“普通” Unix 更重要的意义。

在模拟器上，您的用户帐户无法写入`/var`（有充分的理由）。用户数据存储在`~/Library/Application Support/iPhone Simulator`. 有一次，他们开始为不同的模拟器版本使用不同的目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T01:02:08.497

`/var` is just a symlink to `/private/var`. So the first path is the logical path that you tried to access. The second is that same path with symlinks expanded.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-18T10:04:36.733

1.  在我的情况下，使用 FileManager.default.fileExists 检查文件是否已经存在，但我使用的是 .absoluteString/ **"()"**。而不是 .path 将 URL 作为字符串传递。
2.  当我使用打印文档目录中文件的路径时

> 让 fileURLs = 试试 fileManager.contentsOfDirectory(at:

它打印为`/private/var`

> 让 DocumentDirURL = 试试！FileManager.default.url(for: .documentDirectory, in: .userDomainMask, properFor: nil, create: true)

它打印为`/var`

3.  这种路径上的差异使我感到困惑。
4.  如上所述，它只是**symlink**。即两条路径是相同的。

**:)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-21T17:36:52.943

一个从缓存中删除文件的函数（Swift 5）。我遇到了很多问题，使用 URL 解决了 /private 问题。

```
class func removeFileFromCache( filePattern: String ) -> Bool {
    // find filename with pattern

    do {
        let cachePath = FileManager.default.urls(for: .cachesDirectory, in: .userDomainMask).first!
        let filePathUrl = URL( fileURLWithPath: filePattern )
        let originalFilename = filePathUrl.lastPathComponent
        let newFilePath = cachePath.appendingPathComponent( originalFilename ).path

        try FileManager.default.removeItem(atPath: newFilePath )
        print("file \( filePattern ) succesfull removed.",classname:URL(fileURLWithPath: #file).lastPathComponent )

    } catch let error as NSError {
        print("Error \(error)",classname:URL(fileURLWithPath: #file).lastPathComponent )
        return false // all is not well
    }

    return true
} 
```

# android - 单击 ListView 项目时启动应用程序

> ID：14992835
> 
> 赞同：2
> 
> 时间：2013-02-21T00:58:05.123
> 
> 标签：android, android-intent, onitemclicklistener, activity-manager

我正在开发一个显示当前在 ListView 中运行的图标的应用程序。我已经编写了在 ListView 中显示正在运行的应用程序图标的代码，并且运行良好。

但是，我不知道将单击事件（单击以切换到相应的应用程序）附加到 ListView 项目。单击 ListView 上的项目时如何启动相应的应用程序？我正在尝试，但切换效果不佳。我怎样才能做到这一点？到目前为止，这是我的代码：

[左侧面板.java]

```
package kr.hybdms.sidepanel;

import java.util.ArrayList;
import java.util.List;
import kr.hybdms.sidepanel.PanelArrayAdapter;
import kr.hybdms.sidepanel.R;
import kr.hybdms.sidepanel.util.SystemUiHider;

import android.app.Activity;
import android.app.ActivityManager;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

/**
 * An example full-screen activity that shows and hides the system UI (i.e.
 * status bar and navigation/system bar) with user interaction.
 * 
 * @see SystemUiHider
  */

public class LeftSidePanel extends Activity implements OnItemClickListener {
    ListView listView;
    List<PanelItemDetail> rowItems;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_left_side_panel);
        listView = (ListView) findViewById(R.id.panelcontents);
        ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
        List<ActivityManager.RunningTaskInfo> tasks = am.getRunningTasks(30);
        rowItems = new ArrayList<PanelItemDetail>();
        PackageManager pacMgr = getPackageManager();
        for (ActivityManager.RunningTaskInfo runningTask: tasks) {
            try {
                rowItems.add(new PanelItemDetail(pacMgr.getApplicationIcon(
                        runningTask.topActivity.getPackageName())));
            } catch (NameNotFoundException e) {
                e.printStackTrace();
            }
        }
        listView = (ListView) findViewById(R.id.panelcontents);
        PanelArrayAdapter adapter = new PanelArrayAdapter(this,
        R.layout.panelrow, rowItems);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(this);
    }
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
        String packageName = am.getRunningTasks(30).get(0).topActivity.getPackageName();
        String className = am.getRunningTasks(30).get(0).topActivity.getClassName();
        startActivity(new Intent().setClassName(packageName,
                className).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
    }
} 
```

* * *

[面板阵列适配器.java]

```
package kr.hybdms.sidepanel;

import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;

public class PanelArrayAdapter extends ArrayAdapter<PanelItemDetail> {
    Context context;

    public PanelArrayAdapter(Context context, int resourceId, List<PanelItemDetail> items) {
        super(context, resourceId, items);
        this.context = context;
   }

   /*private view holder class*/
   private class ViewHolder {
       ImageView imageView;
   }

   public View getView(int position, View convertView, ViewGroup parent) {
       ViewHolder holder = null;
       PanelItemDetail rowItem = getItem(position);
       LayoutInflater mInflater = (LayoutInflater)
               context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
       if (convertView == null) {
           convertView = mInflater.inflate(R.layout.panelrow, null);
           holder = new ViewHolder();
           holder.imageView = (ImageView) convertView.findViewById(R.id.appicon);
           convertView.setTag(holder);
       } else
           holder = (ViewHolder) convertView.getTag();
       holder.imageView.setImageDrawable(rowItem.getImageId());
       return convertView;
   } 
```

}

* * *

[PanelItemDetail.java]

```
package kr.hybdms.sidepanel;

import android.graphics.drawable.Drawable;

public class PanelItemDetail {
    private Drawable imageId;

    public PanelItemDetail(Drawable images) {
        this.imageId = images;
    }

    public Drawable getImageId() {
        return imageId;
    }

    public void setImageId(Drawable imageId) {
        this.imageId = imageId;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:34:39.057

尝试

```
Intent LaunchIntent = getPackageManager().
getLaunchIntentForPackage("com.package.address");

startActivity(LaunchIntent); 
```

但请确保`<category android:name="android.intent.category.LAUNCHER" />` 在启动新应用程序的活动中在清单中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:36:40.830

在您`onItemClick`使用您的适配器来获取列表视图中通过使用单击的项目，`adapter.get(position)`或者您可以使用`getListView().getItem(position)`它将返回您的自定义类型，以便您可以获取选择了哪个活动的信息，然后按照@user1762507 的说明启动该意图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T14:44:48.387

```
 private ArrayList results = new ArrayList();

PackageManager pm = this.getPackageManager();

    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    final List<ResolveInfo> list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list) {
     results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
     Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
    } 

   final ArrayAdapter<String> adapter1;
    adapter1 =new ArrayAdapter(this, android.R.layout.simple_list_item_1, results);

    lView.setAdapter(adapter1);

    lView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            final String packageName = list.get(position).activityInfo.packageName;

            Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage(packageName);
            startActivity( LaunchIntent );

            Toast.makeText(getApplicationContext(), packageName, Toast.LENGTH_LONG).show();
        }
    }); 
```

# .net - Unity 2.0 通过配置注册泛型

> ID：14992842
> 
> 赞同：1
> 
> 时间：2013-02-21T00:58:57.617
> 
> 标签：.net, generics, dependency-injection, unity-container, config

[即使在参考以下](https://stackoverflow.com/questions/3486837/unity-2-0-registering-generic-types-via-xml)帖子后，我仍然难以统一注册我的通用依赖项。

我的代码更简单，因为它没有实现`GenericRepository<T>`并且如下：

```
public interface ISerializer<T> where T : class
{
    ...
}

public class WorkflowSerializer : ISerializer<XmlFormWorkflow>
{
...
}

public class WorkflowManager
{
    private readonly ISerializer<XMLFormWorkflow> _serializer;

    public WorkflowManager(ISerializer<XmlFormWorkflow> serializer)
    {
         _serializer = serializer;
    }
} 
```

我使用的 conig 文件如下所示：

```
<unity>
  <alias alias="ISerializer" type="Common.ISerializer`1, Common" />
  <alias alias="WorkflowSerializer" type="Common.WorkflowSerializer, Common" />
  <alias alias="XMLFormWorkflow" type="Common.XMLFormWorkflow, Common" />
  <container>
    <register type="ISerializer[XMLFormWorkflow]" mapTo="WorkflowSerializer" />
  </container>
</unity> 
```

我得到的错误如下：

```
Resolution of the dependency failed, type = "Business.WorkflowManager", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type,     Common.ISerializer`1[Common.XMLFormWorkflow], is an interface and cannot be constructed.     Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:
  Resolving parameter "serializer" of constructor Business.WorkflowManager(Common.ISerializer`1[[Common.XMLFormWorkflow, Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] serializer)
  Resolving Common.ISerializer`1[Common.XMLFormWorkflow],(none) 
```

我试过在别名中包含类型

```
<alias alias="ISerializer" type="Common.ISerializer`1[[Common.XMLFormWorkflow, Common]], Common" /> 
```

但这似乎也不起作用。我可以`WorkflowSerializer`在里面用力输入，`WorkflowManager`但这是我想避免的。

我只是希望我没有忽略一些简单的事情。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:37:21.013

看来我忽略了检查我的`WorkflowManager`班级所在的命名空间。ReSharper 喜欢将文件的命名空间与文件所在的相应文件夹相关联。就我而言，问题是：

```
namespace Common.Implementations
{
    public class WorkflowSerializer : ISerializer<XMLFormWorkflow>
    {
      ...
    }
} 
```

一旦我`.Implementations`从命名空间中删除了，unity 就能够成功地构建依赖关系。

从长远来看，希望我的大脑放屁能帮助你们中的一个人。

# java - 如何强制 CLOSE_WAIT 停止

> ID：14992843
> 
> 赞同：0
> 
> 时间：2013-02-21T00:59:00.057
> 
> 标签：java, linux, tomcat

我无法关闭并重新打开服务器。我试过用大量命令杀死它，但我似乎仍然有大量的 CLOSE_WAITS ：

```
 netstat -a | grep 8043
tcp        1      0 localhost:60667         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60830         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60828         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60820         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60821         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60818         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60802         localhost:8043          CLOSE_WAIT
tcp        1      0 localhost:60819         localhost:8043          CLOSE_WAIT 
```

我知道原因是什么，因为我正在开发它的一些代码崩溃。有什么办法杀死它？它的 GNU/Linux 服务器。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-05-24T08:04:48.263

虽然现在解决您的问题为时已晚，但我正在为将来回答这个问题。

**注意这是用于 apache 服务器的。这同样适用于 tomcat 或其他。我没有试穿别人。**

我遇到了同样的问题。我在一个端口关闭了服务器，但它处于挂起 `CLOSE_WAIT`状态。以下命令为我解决了。

```
sudo /etc/init.d/apache2 restart 
```

这只不过是重新启动apache。

# ruby-on-rails-3 - simple_form 日期在每个月的 12 日之后不起作用

> ID：14992845
> 
> 赞同：3
> 
> 时间：2013-02-21T00:59:31.143
> 
> 标签：ruby-on-rails-3, simple-form

有没有人遇到过这个问题？我有一个用户对象和一个询问用户生日的 simple_form。

```
 <%= f.input :birthday, as: :date, start_year: Date.today.year - 70,
                      end_year: Date.today.year, order: [:month, :day, :year], label: false %> 
```

我选择的任何日期都只能选择到每个月的 12 日。如果我选择第 13 个或更高的 simple_form 表示“请输入有效日期”。很奇怪。

我从[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)获得了这段代码，关于这段代码的所有内容都是“SimpleForm 接受与 Rails 中相应的输入类型帮助程序相同的选项”。有谁知道 Rails 中相应的输入类型助手记录在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:00:48.257

I would guess that you've confused `:day` and `:month` somewhere.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:44:50.003

或者，换一种说法，您想使用美国格式，而不是使用欧洲格式（或相反）。不确定它是否会有所帮助，但请参阅此链接： [如何使用 Ruby 1.9 在 Rails 中使用美国风格的日期？](https://stackoverflow.com/questions/7286467/how-can-i-use-us-style-dates-in-rails-using-ruby-1-9)

# python - python：实例化一个类与引用有什么缺点，如果它只有常量？

> ID：14992849
> 
> 赞同：2
> 
> 时间：2013-02-21T00:59:46.670
> 
> 标签：python

我对python很陌生，所以如果这个问题听起来很傻，我很抱歉。这不仅仅是单纯的好奇，我必须使用具有类似类的代码。

考虑以下 python 代码片段：

```
class _Base(object):
  constant1 = 1
  constant2 = 2
  constant3 = 3

def main():
  a = _Base    # Referencing a class
  b = _Base()  # Instantiating

if __name__ == '__main__':
  main() 
```

在这个特定示例中，当 _Base 类没有方法时，与使用方法相比`__init__()`，在性能方面或其他方面是否有任何缺点？`b``a`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T01:02:39.323

You'd normally put constants inside a module instead of a class. If you need to use them for subclasses then inherit from the Base and use them, otherwise, don't instantiate the `class` as you're just using it as a kind of "namespace".

Name it something better than `_Base` and access the variables as (for eg:) `MyConstants.constant1` instead...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T01:17:30.293

Jon Clements 给出了你应该如何做的答案。

但是要回答您的实际问题：

> 与 a 相比，使用 b 方法在性能方面或其他方面有什么缺点吗？

比性能更重要的是可读性。如果您实例化一个对象，读者会认为您出于某种原因这样做了，并在试图弄清楚`b`正在使用什么以及`_Base`实例在您的对象模型中代表什么等等时被绕开。很快就会发现它没用，但是“显而易见”总是比“不会花费太长时间才能弄清楚”要好。

但也有性能下降。在您编写的任何程序中，它很可能永远不会以任何可衡量的方式产生影响，但它就在那里。

首先，`b`是一个新分配的对象，它占用几个字节（可能几十个），而`a`只是一个已经存在的对象（类本身）的新名称。因此，它会浪费内存。

其次，构建`b`需要一些时间。除了分配内存之外，您还必须调用`__new__`和`__init__`插槽`object`。

您可以使用 自己测试性能差异`timeit`，但我不会打扰。你很可能会发现它比它`b`慢 20 倍`a`或类似的东西，但是你每次运行一次需要不到一微秒的时间进行 20:1 的改进仍然没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:26:43.930

我说要注意未来的维护，并将类设置为具有所有`@property`方法，因为它们与典型的常量无法区分，并允许您的代码增长，因为所有内容都将是 的实例`_Base`，并包装在方便的`property`装饰器中。

```
class Base(object):
    """for now, just holds constants"""
    def __init__(self):
        pass

    @property
    def constant1(self):
        return 1

    @property
    def constant2(self):
        return 2

    @property
    def constant3(self):
        return 3 
```

当然，我的下一个问题是……为什么需要实例化一个*类*来做到这一点？为什么不在方法中定义一个常量？

```
#! /usr/bin/env python
"""this module does stuff"""

CONSTANT_1 = 1
CONSTANT_2 = 2
CONSTANT_3 = 3 
```

您可以在方法和类中引用它们，而无需将它们作为参数提供。它们作为普遍的数据源工作，就像常量一样。这通常是避免[幻数](http://www.catb.org/jargon/html/M/magic-number.html)的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:09:43.677

@Jon Clements 的回答非常好，但如果你愿意，你可以留在课堂上，但将所有常量转换为静态方法。

```
class MyConstants(object):

    @staticmethod
    def constant1():
        return 1 
```

然后你可以调用它：

```
some_variable = MyConstants.constant1() 
```

我觉得处理这样的事情在可维护性方面更好——如果你想做除了返回常量之外的任何事情，Jon 的解决方案将不起作用，你将不得不重构你的代码。例如，您可能希望`constant1`在某些时候更改 的定义：

```
def constant1():
    import time
    import math

    current_time = time.time()        
    return math.ceil(current_time) 
```

它将当前时间返回到最接近的秒数。

无论如何，对不起这篇文章:)

* * *

因此，鉴于此处的评论，我想我会看到以我的方式（使用工厂）与声明静态常量与在类中使用属​​性相比，实际开销是多少。

`time_test.py`：

```
import time

CONSTANT_1 = 1000
CONSTANT_2 = 54
CONSTANT_3 = 42
CONSTANT_4 = 3.14

class Constants(object):
    constant_1 = 1000
    constant_2 = 54
    constant_3 = 42
    constant_4 = 3.14

class Factory(object):

    @staticmethod
    def constant_1():
        return 1000

    @staticmethod
    def constant_2():
        return 54

    @staticmethod
    def constant_3():
        return 42

    @staticmethod
    def constant_4():
        return 3.14

if __name__ == '__main__':

    loops = 10000000

    # static const                                                                                                                                                                                                                                                              
    start = time.time()
    for i in range(loops):
        sum = CONSTANT_1
        sum += CONSTANT_2
        sum += CONSTANT_3
        sum += CONSTANT_4

    static_const_time = time.time() - start

    # as attributes                                                                                                                                                                                                                                                             
    start = time.time()
    for i in range(loops):
        sum = Constants.constant_1
        sum += Constants.constant_2
        sum += Constants.constant_3
        sum += Constants.constant_4

    attributes_time = time.time() - start

    # Factory                                                                                                                                                                                                                                                                   
    start = time.time()
    for i in range(loops):
        sum = Factory.constant_1()
        sum += Factory.constant_2()
        sum += Factory.constant_3()
        sum += Factory.constant_4()

    factory_time = time.time() - start

    print static_const_time / loops
    print attributes_time / loops
    print factory_time / loops

    import pdb
    pdb.set_trace() 
```

结果：

```
Bens-MacBook-Pro:~ ben$ python time_test.py
4.64897489548e-07
7.57454514503e-07
1.09821901321e-06
--Return--
> /Users/ben/time_test.py(71)<module>()->None
-> pdb.set_trace()
(Pdb) 
```

所以你得到了它：效率的边际收益（每千万次循环几秒钟）可能被代码中其他地方的东西所淹没。因此，我们已经确定所有三种解决方案都具有相似的性能，除非您关心这样的微优化。（如果是这种情况，您可能最好使用 C。）所有三个解决方案都是可读、可维护的，并且可能可以在任何使用 Python 的软件公司的版本控制中找到。所以区别在于美学。

无论如何，我曾经在高中的一篇研究论文中失去了 15% 的分数，因为我的参考书目格式不正确。内容完美无缺，对我的老师来说还不够漂亮。我发现人们可以花时间学习规则或解决问题。我更喜欢解决问题。

# python - python和语句

> ID：14992850
> 
> 赞同：0
> 
> 时间：2013-02-21T00:59:46.590
> 
> 标签：python

```
import random

def main():
    number = random.randint(0,100)
    print(number)
    guess = int(input("Enter your guess: "))

    if guess == number :
        print("You win $10,000!")

    elif guess // 10 == number // 10 or guess % 10 == number % 10 :
        print("You win 1,000$!")

    elif guess // 10 == number // 10 and guess % 10 == number % 10 :
        print("You win $3,000!")

    else :
        print("You win $0.")

main() 
```

`and`该程序的工作原理是语句除外。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:59:34.337

原因是`or`封面`and`。使用`!=`给出异或，又名异或。

```
import random
def main():
    number = random.randint(0,100)
    print(number)
    guess = int(input("Enter your guess: "))

    if guess == number :
        print("You win $10,000!")

    elif (guess // 10 == number // 10) != (guess % 10 == number % 10) :
        print("You win 1,000$!")

    elif guess // 10 == number // 10 and guess % 10 == number % 10 :
        print("You win $3,000!")

    else :
        print("You win $0.")

main() 
```

# javascript - 在 FireFox 之外进行 Javascript 调试

> ID：14992852
> 
> 赞同：2
> 
> 时间：2013-02-21T00:59:50.567
> 
> 标签：javascript, debugging, firefox, greasemonkey, javascript-debugger

我有一个在 Firefox 上运行的greasemonkey 脚本，它处于无限循环中。我无法弄清楚循环在哪里，因为我无法拥有一个不绑定到 FireFox 的调试窗口。

如何设置 firefox，以便即使 firefox 死在我身上，我也可以监视控制台日志。目前我正在使用萤火虫，它会在 FireFox 瞬间消失。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:06:31.617

Maybe using ConsoleExport Firebug extension can solve your problem. It has autoexport feature and maybe before crash it can dump console logs to a file. For more information:
[http://www.softwareishard.com/blog/consoleexport/](http://www.softwareishard.com/blog/consoleexport/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:25:58.403

上面由 bfavaretto 和 Brock Adams 回答:)

看来您可以使用 Firebug 在 GM 脚本中设置断点。我不知道这个。

# ruby-on-rails - nginx 和公共子目录

> ID：14992854
> 
> 赞同：0
> 
> 时间：2013-02-21T00:59:54.077
> 
> 标签：ruby-on-rails, nginx

我是 nginx 服务器配置的新手。我在公共目录的子目录下提供文件时遇到问题。

例如，下的文件；rails_app/public/uploads/client/2/image/7/ 目录或 rails_app/public/picture/ 目录没有提供，但我没有问题：rails_app/public/webcam.swf

就像不提供子目录一样。

我的 production.rb 文件

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false 
```

只有当我将 serve_static_assets 设置为 true 我没有问题

我的 nginx 配置：

```
upstream thin {
  server '127.0.0.1:3000';
  server '127.0.0.1:3001';
  server '127.0.0.1:3002';
  server '127.0.0.1:3003';
  server '127.0.0.1:3004';
}

server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/user/appname/public;

  location ^~ /assets/ {
    root /home/user/appname/public;
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  location / {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://thin;
  }
  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

你能帮我做这个配置吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:20:05.677

我认为问题在于您的`location /`块正在捕获您的动态请求以及您的非资产静态请求。试试这个配置（注意 try_files 行）：

```
server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/user/appname/public;
  try_files $uri @app;

  location ^~ /assets/ {
    root /home/user/appname/public;
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  location @app {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://thin;
  }
  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

# html - 如何在asp经典中缓存AJAX调用显示的内容

> ID：14992859
> 
> 赞同：1
> 
> 时间：2013-02-21T01:00:28.677
> 
> 标签：html, ajax, email, asp-classic, vbscript

如果用户按下浏览器上的后退按钮，我如何缓存显示的网站内容而无需对函数进行另一个 ajax 调用？

我认为我的问题没有多大意义，所以这里有更详细的信息：在我们的网络邮件服务器中，每当用户点击收件箱按钮时，它会将他们带到另一个页面，显示新收到的邮件的主题和以前存储的邮件。（RetrieveNewMessages 和 ReadMailFolderContents）。当用户收到大量邮件或以前存储的邮件时，这些操作可能需要很长时间才能处理，所以我希望这些功能仅在用户第一次进入收件箱页面时运行。当用户点击某个主题显示邮件内容并按返回返回收件箱页面时，这些函数又被运行，导致查看邮件有很大的延迟。

该页面最初加载一个加载屏幕，对服务器进行 ajax 调用，当服务器处理完这两个函数后，它会显示存储在字符串数组中的内容。

这里或多或少是它目前看起来的骨架代码：

## 主副

```
<%sub main()%>
    <div id="loading" align="center">
        <img src="mail_loading.gif" style="vertical-align:middle;"/>
        Retrieving your mails...
    </div> 
    <script language="javascript">
        window.onload = function() {
            ajaxed.callback('do', 'mail_listing', null,
            function(t) {
                $('loading').hide();
            });
        };
    </script>
    <div id="mail_listing"></div>
<%end sub> 
```

## 子页面Part_do()（Ajax调用）

```
<%
Sub pagePart_do()

'Gets new mails from pop3 server
Call RetrieveNewMessages(mailbox,uniqueIDTxtFilePath)

retrievedMailContentArray = ReadMailFolderContents(mailDirName,uniqueIDTxtFilePath,flag)

...Run the for loop on retrievedMailContentArray and format it in HTML
%> 
```

所以本质上，我希望在用户按下返回按钮返回收件箱页面时缓存 pagePart_do() 显示的 html 内容。

服务器在 ASP Classic 上运行并使用[ajaxed](http://www.ajaxed.org/)插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:24:44.167

可能有很多选择可以解决这个问题。一种选择是使用 HTML5 和 Web 存储。几乎所有当前的浏览器都支持 Web 存储，并允许保存多达 5MB 的数据。Web 浏览器通过 JavaScript 中的 localStorage 对象公开 Web Storage。确定 Web 浏览器是否支持 Web 存储的一种简单方法是执行以下 JavaScript 代码：

```
var webStorageSupported = ('localStorage' in window) && window['localStorage'] !== null; 
```

填充网络存储：

```
localStorage.setItem('name', 'arman'); 
```

要获取值：

```
var value = localStorage.getItem('name'); 
```

# xslt - 在 xslt 的 for-each 循环中使用 position() 选择特定节点不返回预期结果

> ID：14992865
> 
> 赞同：2
> 
> 时间：2013-02-21T01:01:17.820
> 
> 标签：xslt, xslt-1.0

我意识到这段代码不是最干净的，但不幸的是，正确地重构它不是一种选择。

问题是我希望`position()`在第二次迭代中返回一个真值。但是当使用`position()`它时，它永远不会返回 true，正如第二次迭代所预期的那样。

但是如果我对选择值进行硬编码，它会返回预期的结果。这是一个例子：

```
<root>
  <MainProducts>
    <MainProduct>
      <Published>0</Published>
    </MainProduct>
    <MainProduct>
      <Published>1</Published>
    </MainProduct>
  </MainProducts>
  <SubProducts>
    <SubProduct>
      <IsDefault>1</IsDefault>
    </SubProduct>
    <SubProduct>
      <IsDefault>0</IsDefault>
    </SubProduct>
  </SubProducts>
</root> 
```

XML 内容：

```
<xsl:for-each select="/root/SubProducts/SubProduct">
  <script type="text/javascript">
    // Always returns false
    console.log("Dynamic position " + <xsl:value-of select="position()" /> + " IsDefault: " + ( <xsl:value-of select="/root/MainProducts/MainProduct[position()]/Published" /> == 1 ? "true" : "false" ));
  </script>
</xsl:for-each>

<script type="text/javascript">
  // Returns false, but expected to return true on second iteration.
  console.log("Hard coded position 1 IsDefault: " + ( <xsl:value-of select="/root/MainProducts/MainProduct[1]/Published" /> == 1 ? "true" : "false" ));

  // Returns true
  console.log("Hard coded position 2 IsDefault: " + ( <xsl:value-of select="/root/MainProducts/MainProduct[2]/Published" /> == 1 ? "true" : "false" ));
</script> 
```

这是确切的控制台输出：

```
Dynamic position 1 IsDefault: false
Dynamic position 2 IsDefault: false
Hard coded position 1 IsDefault: false
Hard coded position 2 IsDefault: true 
```

我在这里缺少什么`position()`没有正确选择节点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T04:11:34.003

```
 <script type="text/javascript">
    // Always returns false
    console.log("Dynamic position " + 
   <xsl:value-of select="position()" /> + 
    " IsDefault: " + 
      ( <xsl:value-of select="/root/MainProducts/MainProduct[position()]/Published" /> 
        == 1 ? "true" : "false" ));
  </script> 
```

在上面的代码`MainProduct[position()]`中等价于`MainProduct[true()]`）别忘了`position()`是上下文相关的！

因此，您实际上是在评估：

```
<xsl:value-of select="/root/MainProducts/MainProduct/Published" /> 
```

这总是输出 XPath 表达式选择的第一个元素的字符串值`Published`——它恰好是`0`。

**正确的代码**：

```
<xsl:variable name="vPos" select="position()"/>

  <script type="text/javascript">
    // Always returns false
    console.log("Dynamic position " + 
   <xsl:value-of select="position()" /> + 
    " IsDefault: " + 
      ( <xsl:value-of select=
             "/root/MainProducts/MainProduct[position()=$vPos]/Published" /> 
        == 1 ? "true" : "false" ));
  </script> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
   <xsl:for-each select="/*/SubProducts/SubProduct">
    <xsl:variable name="vPos" select="position()"/>

      <script type="text/javascript">
        console.log("Dynamic position " +
       <xsl:value-of select="position()" /> +
        " IsDefault: " +
          ( <xsl:value-of select=
             "/*/MainProducts/MainProduct
                         [position()=$vPos]/Published" />
            == 1 ? "true" : "false" ));
      </script>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <MainProducts>
        <MainProduct>
            <Published>0</Published>
        </MainProduct>
        <MainProduct>
            <Published>1</Published>
        </MainProduct>
    </MainProducts>
    <SubProducts>
        <SubProduct>
            <IsDefault>1</IsDefault>
        </SubProduct>
        <SubProduct>
            <IsDefault>0</IsDefault>
        </SubProduct>
    </SubProducts>
</root> 
```

**产生了想要的正确结果：**

```
<script type="text/javascript">
        console.log("Dynamic position " +
       1 +
        " IsDefault: " +
          ( 0
            == 1 ? "true" : "false" ));
      </script>
<script type="text/javascript">
        console.log("Dynamic position " +
       2 +
        " IsDefault: " +
          ( 1
            == 1 ? "true" : "false" ));
      </script> 
```

# java - 未找到宁静的 Web 服务公共构造函数

> ID：14992866
> 
> 赞同：2
> 
> 时间：2013-02-21T01:01:19.427
> 
> 标签：java, web-services, rest

我正在尝试使用客户端 Web 应用程序（来自 JSF MB 的简单客户端请求）调用 RESTful Web 服务。我需要为 web 服务创建一个接口，然后调用其中的方法。但是如果我在接口上使用@Path，它会给出一个错误——在 Jboss 部署期间找不到公共构造函数。但是如果我在实现类给@Path。它调用服务很好并且工作正常。我需要在 Rest 客户端和 Restful webservice impl 类之间有一个 Java 接口。任何人都可以帮忙吗？我们可以有 Rest 接口吗？

客户端：

```
ClientRequest request = new ClientRequest("localhost:8080/RESTfulExample/json/...../"); 
ClientResponse<String> response = request.get(String.class); 
```

休息接口：

```
package com.nee.interfaces; 
import javax.ws.rs.Path; 
import javax.ws.rs.GET; 

@Path("/OrderManagementService") 
public interface OrderManagementServiceInterface { 
    @GET
    @Path("/GetListOfOrders") 
    void getListOfOrders(); 
} 
```

实施：

```
package com.nee.implementations;
import com.nee.interfaces.OrderManagementServiceInterface;

public class OrderManagementServiceImpl implements OrderManagementServiceInterface {
    public void getListOfOrders() {
        System.out.println("am here");
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<context-param>
    <param-name>resteasy.resources</param-name>
    <param-value>
        com.nee.interfaces.OrderManagementServiceInterface
    </param-value>
</context-param>

<!-- this has to match with resteasy-servlet url-pattern -->

<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/rest</param-value>
</context-param>

<!-- to return data according to extension -->

<context-param>
    <param-name>resteasy.media.type.mappings</param-name>
    <param-value>json : application/json, xml : application/xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
    </listener-class>
</listener>

<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
</web-app> 
```

日志：

```
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/web]]
(MSC service thread 1-2) Exception sending context initialized event to listener instance of class
org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap: java.lang.RuntimeException: Unable to find a public constructor for class com.seagate.interfaces.OrderManagementServiceInterface
at org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory.registered(POJOResourceFactory.java:35) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:120) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:106) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.core.ResourceMethodRegistry.addResourceFactory(ResourceMethodRegistry.java:83) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.core.ResourceMethodRegistry.addPerRequestResource(ResourceMethodRegistry.java:72) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.spi.ResteasyDeployment.registration(ResteasyDeployment.java:383) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.spi.ResteasyDeployment.start(ResteasyDeployment.java:225) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap.contextInitialized(ResteasyBootstrap.java:28) [resteasy-jaxrs-2.3.3.Final-redhat-1.jar:2.3.3.Final-redhat-1]
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.16.Final-redhat-1.jar:]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.16.Final-redhat-1.jar:]
at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)[rt.jar:1.7.0_09]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_09]
at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_09] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:24:23.563

我猜您的错误是您为 RestEasy 提供了一个**接口**，而框架正试图通过反射创建它的一个实例。这样的事情永远不会奏效。而不是接口，您应该只指定实现类作为参数的值`resteasy.resources`。如果您想更动态地尝试 OSGi 和 REST 的组合。我没有为自己尝试[这个](http://sarbarian.wordpress.com/2010/03/07/resteasy-and-osgi-perfect-match/)博客中的例子，但你可以看看。

**更新**

由于您还想从第三方类中使用您的服务，为什么不使用您的 REST Web 服务包装另一个接口，并且该包装的接口可以在您的第三方类中使用。然后，Web 服务仅用于将请求委托给该接口的特定实现。您可以通过 Spring、Google Juice 等依赖注入框架注入实现。这就是我的意思：

您的接口作为实现的抽象：

```
interface IExecutionService {
   void executeStuff();
} 
```

然后你的 REST 服务：

```
@Path("/OrderManagementService")
class ExectionServiceDelegator {

   private IExecutionService wrappedServiceInterface;

   /**
    * play around with some DI frameworks for injecting your implementation
    */
   public void setIExecutionService(IExecutionService service) {
      wrappedServiceInterface = service;    
   }

   @GET
   @Path("/GetListOfOrders") 
   public void doingSomething() {
      service.executeStuff();
   }
} 
```

您也可以`IExecutionService`在第三方接口中将该接口与特定的 DI 框架结合使用。希望很清楚我想用上面的代码做什么？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:02:01.443

上面的问题有一个简单的答案。在 web.xml 中，而不是接口，我只需要配置 IMPL 类而不是接口并继续在接口处设置 @Path

```
<context-param>
    <param-name>resteasy.resources</param-name>
    <param-value>
        com.seagate.implementations.OrderManagementServiceImpl
    </param-value>
</context-param> 
```

它起作用了:)...

# c# - 多线程：在另一个进程继续运行时启动一个线程来执行查询

> ID：14992867
> 
> 赞同：1
> 
> 时间：2013-02-21T01:01:38.467
> 
> 标签：c#

我有一个看起来像这样的方法：

```
public void SomeMethod()
{
    foreach (SomeModel x in TheListOfSomeModel)
    {
        do some work
        ....
        if (SomeCondition)
        {
             x.ExecuteQuery();
        }
    }
} 
```

基本上，`SomeModel`有一种方法可以运行更新查询，该查询将对象的属性存储到数据库中的字段中。由于当前编写的代码，如果查询需要运行，则整个循环将暂停，直到查询完成。如果 if 有任何用处， . 中只有 5 个元素`TheListOfSomeModel`。

除了 using 之外`Parrallel ForEach`，我该如何更改它以便`x.ExecuteQuery()`在单独的线程上运行？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:11:39.083

您可以将其作为这样的任务运行...

```
Task.Factory.StartNew(() => x.ExecuteQuery()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:16:05.817

请注意不要在生成任务/线程时关闭循环变量（除非您使用 C# 5），还要确保为每个线程使用单独的连接/上下文。

```
public void SomeMethod()
{
    foreach (SomeModel x in TheListOfSomeModel)
    {
        var model = x;
        //do some work
        ....
        if (SomeCondition)
        {
             Task.Factory.StartNew(() => model.ExecuteQuery());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:17:11.363

为简洁起见，省略了异常处理：

```
using System.Threading.Tasks;    
....

public void SomeMethod()
{
    Task.Factory.StartNew(()=>
    {
        foreach (SomeModel x in TheListOfSomeModel)
        {
            //do some work
            ....
            if (SomeCondition)
            {
                 x.ExecuteQuery();
            }
         }
     });
} 
```

这将在一个新线程中运行它。如果使用 UI 执行此操作并且您得到 CrossThreadExceptions，那么您需要通过`Invoke`或访问 UI 控件`BeginInvoke`。

# php - Jquery/PHP + 创建 MySQL 日期类型

> ID：14992873
> 
> 赞同：0
> 
> 时间：2013-02-21T01:02:33.463
> 
> 标签：php, jquery, mysql, date

我有一个网站，人们加入并输入他们的生日，我想将其作为日期类型存储在 MySQL 中。

我拥有的数据是

```
Day - eg: 1 or 11, 23 etc
Month - eg: March or April or December
Year - eg: 1975 or 1964 or 1944 etc

thus eg: 3 March 1966 
```

如何将其转换为可以保存为 MySQL 日期类型的格式？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:04:29.847

```
$datetime = DateTime::createFromFormat('j F Y', '3 March 1966');
echo $datetime->format('Y-m-d'); 
```

[看到它在行动](http://codepad.viper-7.com/CJuTb7)

参考：

*   [日期时间::createFromFormat()](http://us3.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:37:51.517

它可以使用 date() 和 strtotime() 函数创建

```
 $mysql_date= date("Y-m-d",strtotime("3 March 1996")); 
```

[工作演示](http://codepad.viper-7.com/k0myqm)

# delphi - Delphi 泛型 TObjectList 遗产

> ID：14992875
> 
> 赞同：5
> 
> 时间：2013-02-21T01:02:38.397
> 
> 标签：delphi, generics, delphi-2010

我想创建一个`TObjectList<T>`后代来处理我的应用程序中对象列表之间的通用功能。然后我想从那个新类中进一步下降，以便在需要时引入额外的功能。我似乎无法使用超过 1 级的继承来使其工作。我可能需要更多地了解泛型，但我已经到处寻找正确的方法来做到这一点，但没有成功。到目前为止，这是我的代码：

```
unit edGenerics;

interface

uses
  Generics.Collections;

type

  TObjectBase = class
  public
    procedure SomeBaseFunction;
  end;

  TObjectBaseList<T: TObjectBase> = class(TObjectList<T>)
  public
    procedure SomeOtherBaseFunction;
  end;

  TIndexedObject = class(TObjectBase)
  protected
    FIndex: Integer;
  public
    property Index: Integer read FIndex write FIndex;
  end;

  TIndexedObjectList<T: TIndexedObject> = class(TObjectBaseList<T>)
  private
    function GetNextAutoIndex: Integer;
  public
    function Add(AObject: T): Integer;
    function ItemByIndex(AIndex: Integer): T;
    procedure Insert(AIndex: Integer; AObject: T);
  end;

  TCatalogueItem = class(TIndexedObject)
  private
    FID: integer;
  public
    property ID: integer read FId write FId;
  end;

  TCatalogueItemList = class(TIndexedObjectList<TCatalogueItem>)
  public
    function GetRowById(AId: Integer): Integer;
  end;

implementation

uses
  Math;

{ TObjectBase }

procedure TObjectBase.SomeBaseFunction;
begin
end;

{ TObjectBaseList<T> }

procedure TObjectBaseList<T>.SomeOtherBaseFunction;
begin
end;

{ TIndexedObjectList }

function TIndexedObjectList<T>.Add(AObject: T): Integer;
begin
  AObject.Index := GetNextAutoIndex;
  Result := inherited Add(AObject);
end;

procedure TIndexedObjectList<T>.Insert(AIndex: Integer; AObject: T);
begin
  AObject.Index := GetNextAutoIndex;
  inherited Insert(AIndex, AObject);
end;

function TIndexedObjectList<T>.ItemByIndex(AIndex: Integer): T;
var
  I: Integer;
begin
  Result := Default(T);
  while (Count > 0) and (I < Count) and (Result = Default(T)) do
    if Items[I].Index = AIndex then
      Result := Items[I]
    else
      Inc(I);
end;

function TIndexedObjectList<T>.GetNextAutoIndex: Integer;
var
  I: Integer;
begin
  Result := 0;
  for I := 0 to Count - 1 do
    Result := Max(Result, Items[I].Index);
  Inc(Result);
end;

{ TCatalogueItemList }

function TCatalogueItemList.GetRowById(AId: Integer): Integer;
var
  I: Integer;
begin
  Result := -1;
  for I := 0 to Pred(Self.Count) do
    if Self.Items[I].Id = AId then
    begin
      Result := I;
      Break;
    end;
end;

end.
/////// ERROR HAPPENS HERE ////// ???? why is beyond me 
```

似乎以下声明：

```
>>> TCatalogueItemList = class(TIndexedObjectList<TCatalogueItem>) <<<< 
```

导致以下编译器错误：

> [DCC 错误] edGenerics.pas(106)：E2010 不兼容的类型：“TCatalogueItem”和“TIndexedObject”

**然而**，编译器在编译单元的末尾（第 106 行）显示错误，而不是在声明本身上，这对我来说没有任何意义......

基本上我的想法是我有一个从 TObjectList 下降的通用列表，我可以根据需要扩展新功能。对此的任何帮助都会很棒！！！

我应该使用 Delphi 2010 添加。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T02:38:48.610

您的错误在于类型转换，并且编译器错误正常（但它无法在我的 Delphi XE3 中找到正确的文件）。

您的 ItemByIndex 方法已声明：

```
TIndexedObjectList<T>.ItemByIndex(AIndex: Integer): T; 
```

但是你有这行：

```
Result := TIndexedObject(nil); 
```

这对于函数的结果是类型的父类很好，但对于函数的结果是类型*的*后代类**就**不行了。`TIndexedObjectList``TIndexedObject` **`TCatalogueItemList``TCatalogueItem`**

 **您可能知道，`TCatalogueItem`实例是与变量兼容的`TIndexedObject`赋值，但反之则不然。它翻译成这样的：

```
function TCatalogueItemList.ItemByIndex(AIndex: Integer): TCatalogueItem;
begin
  Result := TIndexedObject(nil);  //did you see the problem now? 
```

要将结果初始化为 nil 值，可以调用 Default() 伪函数，如下所示：

```
Result := Default(T); 
```

在 Delphi XE 或更高版本中，该解决方案也是通用的。不是将结果类型转换为固定`TIndexedObjectList`类，而是使用 T 类型应用泛型类型转换

```
Result := T(nil);
//or 
Result := T(SomeOtherValue); 
```

但是，在这种特定情况下，**不需要****对常量进行类型转换`nil`**，因为`nil`它是一个与任何引用都兼容的特殊值，因此您只需将该行替换为：

```
Result := nil; 
```

它将编译，并希望按您的预期工作。**

# php - 在特定目录中重置 .htaccess

> ID：14992877
> 
> 赞同：0
> 
> 时间：2013-02-21T01:03:01.200
> 
> 标签：php, apache, .htaccess

这个问题与我之前的问题直接相关：

[php 文件被下载而不是运行](https://stackoverflow.com/questions/14992355/php-files-are-downloaded-instead-of-ran)

但是我已经缩小了问题的范围，以便从技术上回答一个问题可以同时回答这两个问题。

我在根目录上方的某个目录中对 .htaccess 进行了许多更改。我们就叫它/dir。一路走来，我做了一个改变，打破了 php 运行文件的方式。我的总体目标是让 php 再次运行 .php 文件；但是我的问题是关于重置 /dir 的 .htaccess。我在 /dir（previous/dir）之前的目录中创建了 php 文件，它们运行良好，所以我只需要重置为该目录保留的任何更改。

如何清除该目录的所有 .htaccess。

请记住，我已经清除了 .htaccess 文件。无论发生什么变化，都存储在我无法访问的 apache 中。我只想重置它们并返回到 php 在该目录中工作的位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:06:37.817

问题是原始 .htaccess 由于密码保护而更改了对该目录的权限。在我删除 .htaccess 文件和 pwd 后，权限仍然被更改。修复权限后，我很容易就能修复所有问题。

# mysql - Node.js mysql query syntax issues UPDATE WHERE

> ID：14992879
> 
> 赞同：26
> 
> 时间：2013-02-21T01:03:32.587
> 
> 标签：mysql, node.js

I trying to update some info in MYSQL DB, but I'm not sure of how to do it with in node.js. This is the mysql driver I'm using [https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

What I have so far

```
connection.query('SELECT * FROM users WHERE UserID = ?', [userId], function(err, results) {
if (results[0]) {
if (results[0].Name!=name) {
console.log(results[0].Name);
connection.query('UPDATE users SET ? WHERE UserID = ?', [userId], {Name: name});
}
console.log(results[0].UserID);
}
}); 
```

Everything works except...

```
connection.query('UPDATE users SET ? WHERE UserID = ?', [userId], {Name: name}); 
```

In PHP I would have this...

```
mysql_query("UPDATE users SET Name='".$_GET["name"]."' WHERE UserID='".$row['UserID']."'"); 
```

I'm not sure what I'm doing wrong, But I'm positive that the issue is here

```
connection.query('UPDATE users SET ? WHERE UserID = ?', [userId], {Name: name}); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-10-14T10:57:39.133

答案`ruakh`并不完全正确，您可以将该`SET ?`功能与另一个`?`.

语法是：

```
connection.query('UPDATE users SET ? WHERE UserID = ?', [{ Name: name }, userId]) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-21T01:33:37.433

[**注（2016-04-29添加）：**这个答案被接受了，但事实证明有*一种*合理的使用方式`SET ?`。有关详细信息，请参阅同一页面上的 Bala Clark 的回答。*——鲁阿赫*]

* * *

从[and](https://github.com/felixge/node-mysql/blob/master/lib/Connection.js)[的代码中`Connection.prototype.query()``Connection.createQuery()`](https://github.com/felixge/node-mysql/blob/master/lib/Connection.js)，很明显您只能传入*单个*值对象。我没有看到特殊`SET ?`行为的代码是在哪里定义的——它显然不在[`SqlString.formatQuery()`](https://github.com/felixge/node-mysql/blob/master/lib/protocol/SqlString.js#L61)——但如果它使用[`SqlString.objectToValues()`](https://github.com/felixge/node-mysql/blob/master/lib/protocol/SqlString.js#L110)，那么我想没有办法将它与另一个一起使用`?`。

我认为最好的方法是放弃整洁的`SET ?`功能，并编写以下任何一个：

```
connection.query('UPDATE users SET Name = ? WHERE UserID = ?', [name, userId]) 
```

```
connection.query('UPDATE users SET Name = :Name WHERE UserID = :UserID',
                     {UserID: userId, Name: name}) 
```

但如果你真的想使用`SET ?`，我想你可以这样写：

```
connection.query('UPDATE users SET ? WHERE UserID = :UserID',
                     {UserID: userId, Name: name}) 
```

这将同时更新`UserID`和`Name`；除非您有触发器，否则*应该*没问题，因为它无论如何都会更新`UserID`到它已经拥有的值。但这有点令人不安，我不推荐它。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-04-02T08:57:59.543

您可以使用对象数组：

```
connection.query('UPDATE user SET ? WHERE ?', [{ Name: name }, { UserId: userId }]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-22T07:18:17.527

这对我有用

```
 var records = 
 [name,email,adhar,ROLE,NOTES,REQUESTFORSUPPLIER,PASSWORD,LOCATION,CREATEDBY,CREATEDON,MODIFIEDBY,MODIFIEDON,mobile];

    var sql="UPDATE flavica_user SET Name=?,EMAIL=?,AADHAR=?,ROLE=?,NOTES=?,REQUESTFORSUPPLIER=?,PASSWORD=?,LOCATION=?,CREATEDBY=?,CREATEDON=?,MODIFIEDBY=?,MODIFIEDON=? WHERE USER_MOBILE=?"
    //var sql="UPDATE `flavica_user` SET ? WHERE ?";
    //this sql updates flavica_user
    con.query(sql,records,(err,result)=>{

      if(err){
        res.json({
          status:400,
          message:err
        })
      }

      else{
        res.json({
          status:200,
          message:result
        })
      }

    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-16T02:59:44.173

[![在此处输入图像描述](../Images/78009a14e4a83d8be3df4921501a6aa7.png)](https://i.stack.imgur.com/qWIZY.png)

```
let query_1 =  `UPDATE reindexing_status SET success="Failure" where status="In Progress"`;
await updateValues(db_connection,query_1);

if(lambdaInvokeStatusCode === 200)

{
   let query_1 =  `UPDATE reindexing_status SET success="Success" where status="In Progress"`;
   await updateValues(db_connection,query_1);

   let query_2 =  `UPDATE reindexing_status SET end_time='${indexedAt}' where status="In Progress"`;
   await updateValues(db_connection,query_2);

   let query_3 =  `UPDATE reindexing_status SET status="Complete" where status="In Progress"`;
   await updateValues(db_connection,query_3);

}

async function updateValues(db_connection,sql) {
await new Promise((resolve, reject) => {
    db_connection.query(sql, function (err, result) {
        if (err) {
            console.log(err);
            reject(err);
        }
        else {

            console.log("RDS Updated Successfully",result );
            resolve("RDS URL Column: " + JSON.stringify(result));
        }
    });

});
} 
```

# backbone.js - How to use EJS templates in a Backbone project generated by Yeoman?

> ID：14992880
> 
> 赞同：2
> 
> 时间：2013-02-21T01:03:36.133
> 
> 标签：backbone.js, ejs, yeoman

Using `yeoman init backbone:all` generates the required files for a sample Backbone.JS app. Along with the MVC files for a sample application object, it also creates a folder at bbapp/app/scripts/templates with a sample ejs file called application.ejs. The Backbone View file for the sample application has a line (which is commented out):

```
//template: application 
```

Uncommenting this does not work. It tries to look for an object with the name 'application' and throws an error: Uncaught ReferenceError: application is not defined. Using `yeoman init bbb` creates the Backbone Layout Manager which probably does the trick. Any ideas how I can use EJS files for templating in a project generated with `yeoman init backbone:all` ?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:30:47.243

到目前为止，yeoman 1.0 的[generator-backbone](https://github.com/yeoman/generator-backbone)还没有正式发布，但是你可以这样[尝试](https://github.com/yeoman/generator-backbone/issues/9#issuecomment-14836816)。

今天我提出了一个[预编译 ejs 模板](https://github.com/yeoman/generator-backbone/pull/20)的修复方法。

该修复程序会将**app/templates中的所有*****.ejs**文件预编译为**app/scripts/templates.js**。一旦修复合并到主服务器并且生成器正式发布，将更新。

 ******PS：**在 yeoman 1.0beta 中使用**`yo backbone:all`**而不是`yeoman init backbone:all`****

# html - 嵌套div的流体高度

> ID：14992887
> 
> 赞同：0
> 
> 时间：2013-02-21T01:04:52.717
> 
> 标签：html, css

在蓝色 div 中添加内容时，我试图使绿色 div 的高度变得流畅，红色 div 可以正常工作，但绿色 div 不能。

所以我希望在向蓝色 div 添加内容时，绿色 div 与红色 div 一样流畅。这是代码[http://jsbin.com/ivobav/1/edit](http://jsbin.com/ivobav/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:14:57.357

好吧，您在这里有很多事情要做。首先，如果您想要绿色 div 上的流体高度，您需要`height: 90%`从 CSS 中删除。你会注意到这会使你的绿色 div 消失（因为它没有相对定位的内容）。

如果你在绿色的 div 中输入一些东西，你会注意到它在增长。现在，我假设您希望红色 div 嵌套在绿色 div 内。为此，您需要删除红色 div 上的绝对定位。

如果你这样做，红色的 div 现在就会消失。那是因为蓝色 div 漂浮在其中，这意味着它不会增长到容纳蓝色 div。所以只需添加`overflow: auto;`到红色的 div 中，你就应该得到你想要的。

在此处查看结果：

[http://jsbin.com/ivobav/5/edit](http://jsbin.com/ivobav/5/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:17:05.403

发生这种情况是因为父母不会伸展以适应他们的浮动孩子。要解决此问题，您可以：

*   不使用花车
*   在父容器中插入等价的`<div style="clear:both"></div>`作为最后一个元素
*   在父级内部有其他非浮动内容

**编辑**：有关更详尽的解释，请查看[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)。迈克的回答是最好的方法，但不幸的是，它并非在所有情况下都有效。请注意，虽然这似乎是人们试图提出解决方案的问题，但它实际上并不是一个错误，而是规范 - 提示有人引入一些新的标准 CSS 属性以使元素拉伸以适应其浮动。 .

# jquery - 为什么ajax请求没有完成，但是当我添加警报时它通过了？

> ID：14992894
> 
> 赞同：0
> 
> 时间：2013-02-21T01:05:47.987
> 
> 标签：jquery, ajax, alert

我一直对这个有奇怪的想法。每当我提交表单并向最后一个警报部分添加评论时，ajax 永远不会执行，但是当我再次评论它时，它会继续执行。这是为什么？

```
$(document).ready(function () {
    $('.finalize').live('click', function () {
        $('#prodTbl tbody tr').each(function () {
            var epx = $(this).attr('id');
            var qty = $(this).find('.qty').val();
            arr.push({
                'idprod': epx,
                'qty': qty
            });
        });

        $.each(arr, function (index, value) {
            newArr.push([value.idprod, value.qty]);
        });

        var c = JSON.stringify(newArr);
        var dataString = 'arr=' + c;

        $.ajax({
            type: "POST",
            url: "/recordTrans",
            data: dataString,
            cache: false,
            success: function (data) {
                alert(data);
            }
        });

        alert("1");
    });

}); 
```

如果这个被评论了，ajax 永远不会执行。真的很奇怪，还是因为没有发现错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:13:57.143

假设这`.finalize`是一个提交按钮，则每当您单击该页面时都会提交该页面，因为您不会通过从单击事件处理程序返回 false 来阻止页面提交。因此，ajax 调用甚至在完成请求之前就被中止了。

当您收到警报时，浏览器有足够的时间发出 ajax 请求并完成它。

试试这个。

```
$('.finalize').live('click', function() {

    //Your code without alert

    return false;
}); 
```

# java - Saving Records Using Java

> ID：14992895
> 
> 赞同：0
> 
> 时间：2013-02-21T01:05:51.963
> 
> 标签：java, mysql, date

I am saving date logs every time a user logs in. Date logs will save a date in the record, but what I want is for there to be no duplicates. It will check if the record is already existing, and if yes it will not save the date. If the record does not yet exist it will save the date.

Here is my code:

```
 SimpleDateFormat dnow2 = new SimpleDateFormat("MMMMM dd, yyyy");

 ResultSet ds = MyDB.rsFetch("SELECT * FROM `date-logs` WHERE `Date` = '"+dnow.format(new java.util.Date())+"'");

 try {
   ds.next() ; 

   if (ds.getMetaData().getColumnCount() == 0) {
     MyDB.exSQL(  "INSERT INTO `date-logs` (`Date Code`, `Date`) " 
                + "VALUES ('"+dnow.format(new java.util.Date())+ "',"
                + "'"+dnow2.format(new java.util.Date())+"')");   
   }
 } catch (SQLException ex) {
   Logger.getLogger(FrmLogIn.class.getName()).log(Level.SEVERE, null, ex);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:37:35.250

最后我得到了它 ！！！

```
 SimpleDateFormat dnow2 = new SimpleDateFormat("MMMMM dd, yyyy");

    ResultSet ds = MyDB.rsFetch("SELECT * FROM `date-logs` WHERE `Date Code` = '"+dnow.format(new java.util.Date())+"'");

  int resultsCounter = 0;  
    try {
        while(ds.next())  
        {  
        //procedure when results were returned  
        resultsCounter++;  
        }

        if (resultsCounter ==0)  
        {  

      MyDB.exSQL("INSERT INTO `date-logs` (`Date Code`, `Date`) VALUES ('"+dnow.format(new java.util.Date())+ "',"
                     + "'"+dnow2.format(new java.util.Date())+"')");
        }  
    } catch (SQLException ex) {
        Logger.getLogger(FrmLogIn.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:46:07.137

您应该做的是将用户的另一个外键（也将其设为主键）添加到`date-logs`表中。即使您两次插入相同的数据，它也会忽略查询，因为主键已经存在于数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:12:20.400

我不知道您使用的是哪种数据库抽象，但您应该更新它以使用[准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

接下来，您应该使用 MySQL 特定查询，例如：

```
insert into date logs ... on duplicate key ignore 
```

确保 Date 是主键。如果该键已存在于数据库中，这种查询将忽略插入。

# knockout.js - 可观察对象不显示某些属性

> ID：14992898
> 
> 赞同：0
> 
> 时间：2013-02-21T01:06:06.973
> 
> 标签：knockout.js

我有一个像这样的视图模型，

```
 function viewModel() {
            this.Items = ko.observable({ A : 1, B: 2 });
            this.Items.X = 4;
            this.Items.Y = 5;
        }

        ko.applyBindings(new viewModel()); 
```

我正在打印出这样的值，

```
 <span data-bind="text: $root.Items['A']"></span>
        <span data-bind="text: $root.Items['B']"></span>
        <span data-bind="text: $root.Items['X']"></span>
        <span data-bind="text: $root.Items['Y']"></span> 
```

X 和 Y 值显示，但 A 和 B 值是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:43:02.027

您将 X 和 Y 设置为 observable 函数的一部分，而不是被观察的对象。

```
function viewModel() {
   this.Items = ko.observable({ A : 1, B: 2 });
   this.Items().X = 4;
   this.Items().Y = 5;
}

ko.applyBindings(new viewModel()); 
```

this.Items() 将提供对对象的访问。

```
<span data-bind="text: $root.Items()['A']"></span>
<span data-bind="text: $root.Items()['B']"></span>
<span data-bind="text: $root.Items()['X']"></span>
<span data-bind="text: $root.Items()['Y']"></span> 
```

# service - 为什么“vmc services”命令只返回一个表？

> ID：14992899
> 
> 赞同：0
> 
> 时间：2013-02-21T01:06:27.347
> 
> 标签：service, command, cloud-foundry, vmc

在 cloudfoundry 的 vmc 文档中，它说“vmc services”命令将返回两个表，第一个表包含可用的服务类型，第二个表返回配置的服务实例。但是我发现使用最新版本的 vmc，“vmc services”命令只返回一个包含“provisioned services”的表。这很不方便，因为我看不到系统可以支持什么样的服务。

注意：我发现非常旧版本的 vmc 可以列出两个表。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:08:30.510

对于最新版本的 vmc，请使用

```
vmc info --services 
```

获得所有可用的服务。采用

```
vmc help COMMAND 
```

获取每个命令的用法。

我相信 CF 团队正在努力完善所有这些东西的文档。他们应该很快让它变得更好。

# sql-server - 与 sql 数据库的 Windows Azure 云服务连接

> ID：14992911
> 
> 赞同：0
> 
> 时间：2013-02-21T01:08:00.903
> 
> 标签：sql-server, entity-framework, azure, cloud

在过去的两周里，我一直在向我的云 REST 服务发出请求。直到昨天一切都很好。

在过去的几天里，我不断地将我的服务重新发布到云中，以测试它与客户的一些操作。我**没有**更改 web.config 中的任何内容，只是更改了一些方法体。

昨天，通过我的浏览器或 Advanced Rest Client 向我的服务发出最简单的 GET 请求，我开始收到以下错误：

服务器在处理请求时遇到错误。请参阅服务帮助页面以构建对服务的有效请求。异常消息是“底层提供程序在打开时失败。”。等等

我怀疑在进行研究之后，这意味着我的数据库显然存在连接错误，因为到目前为止它工作正常，所以我没有得到。

我还尝试在 Azure 生产环境中停止和启动我的服务，但没有任何运气。服务器防火墙也按应有的方式配置。

任何答案将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:38:36.800

以我的经验，这些通常往往是天蓝色的服务中断。目前所有数据库实例都在进行“计划维护”，这可能会影响您。

![在此处输入图像描述](../Images/534d19dd1553ce70dc7a5e6095deea32.png)

[http://www.windowsazure.com/en-us/support/service-dashboard/](http://www.windowsazure.com/en-us/support/service-dashboard/)

# css - Issue using as vertical spacer in Hotmail HTML email

> ID：14992912
> 
> 赞同：0
> 
> 时间：2013-02-21T01:08:03.580
> 
> 标签：css, html-email, hotmail

We're using the following code as a vertical spacer in an HTML email:

```
<div style="height:14px; font-size:14px; line-height:14px;">&#160;</div> 
```

This works well everywhere -- except Hotmail where it creates a very large space. We've researched this a bit and it seems Hotmail embeds CSS by default that causes a lot of issues.

We've included the following code to try to address the issue, to no avail:

```
.ExternalClass, .ExternalClass p, .ExternalClass span,
.ExternalClass font, .ExternalClass td, .ExternalClass div {
line-height: 100%; margin: 0; padding: 0;} 
```

Hoping that someone else here might have a solution or even a workaround.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:22:39.563

如果它只是一个间隔，那么为什么不使用带有间隔图像的表格。大多数电子邮件客户端更喜欢表格而不是具有内联样式的 div，并且会正确呈现它。像这样的东西：

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
    <td height="10">
      <img src="http://media.instantcustomer.com/22033/0/5_spacer.png" alt="" width="1" height="10" border="0" style="border:0" />
    </td>
  </tr>
</table> 
```

将高度从 10 更改为您需要的任何高度。您必须在 td 和 img 元素中指定高度。如果您愿意，请替换间隔图像。您甚至可以完全不使用间隔图像而侥幸逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:47:05.587

你可以使用这个：`<br>&nbsp<br>`或者你可以将它包装在一个字体标签中来设置高度。您还可以在您的`<td>`, 或 saganbyte 建议的表格中使用填充。

请注意，Outlook 将`<p>`标签包裹在表格周围，如果有人转发您的电子邮件，这会增加大约 15-20 像素的垂直间距。相反，使用表格行只会增加几个像素。考虑到这一点，请始终保持背景颜色相同，以免出现不需要的线条。

# python - Pythonic 构建组合字符串的方法

> ID：14992914
> 
> 赞同：3
> 
> 时间：2013-02-21T01:08:33.457
> 
> 标签：python, list-comprehension

我有一份清单，就像这样，

```
a = ['dog','cat','mouse'] 
```

我想构建一个列表，它是所有列表元素的组合，看起来像，

```
ans = ['cat-dog', 'cat-mouse','dog-mouse'] 
```

这是我想出的，

```
a = ['dog','cat','mouse']
ans = []
for l in (a):
    t= [sorted([l,x]) for x in a if x != l]
    ans.extend([x[0]+'-'+x[1] for x in t])
print list(set(sorted(ans))) 
```

有没有更简单，更蟒蛇的方式！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T01:13:18.000

下单有多重要？

```
>>> a = ['dog','cat','mouse']
>>> from itertools import combinations
>>> ['-'.join(el) for el in combinations(a, 2)]
['dog-cat', 'dog-mouse', 'cat-mouse'] 
```

或者，为了匹配您的示例：

```
>>> ['-'.join(el) for el in combinations(sorted(a), 2)]
['cat-dog', 'cat-mouse', 'dog-mouse'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T01:12:09.437

[迭代工具](http://docs.python.org/3/library/itertools.html)模块：

```
>>> import itertools
>>> map('-'.join, itertools.combinations(a, 2))
['dog-cat', 'dog-mouse', 'cat-mouse'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T02:17:43.807

`itertools`肯定是去这里的方式。如果您只想使用内置插件执行此操作，请使用：

```
a = ['dog','cat','mouse']
ans = [x + '-' + y for x in a for y in a if x < y] 
```

# android - 在登录 Android 时检查用户详细信息

> ID：14992919
> 
> 赞同：1
> 
> 时间：2013-02-21T01:09:06.200
> 
> 标签：android, http, login, android-asynctask, httprequest

我正在尝试为我的应用程序创建一个登录系统。目前，用户可以在线创建帐户并下载应用程序。然后提示他们输入用户名和密码。

当他们按下登录按钮时，我想向服务器上的 php 脚本发出请求以检查结果，如果用户确实存在则返回 true，如果用户不存在则返回 false。

我对如何实现这一点有点困惑？

我正在尝试创建一个扩展的单独类`AsyncTask`。

这是我的主要活动

```
EditText username;
EditText password;
Button loginBtn;
LinearLayout loginform;
String passwordDetail;
String usernameDetail;
String url = "http://www.jdiadt.com/example/checklogindetails.php";

HttpTask httptask;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Hide the Action Bar
    ActionBar ab;
    ab = this.getActionBar();
    ab.hide();

    //Get references to XML
    username = (EditText)findViewById(R.id.username);
    password = (EditText)findViewById(R.id.password);
    loginBtn = (Button)findViewById(R.id.loginBtn);
    loginform = (LinearLayout)findViewById(R.id.loginform);

    //Animation
    final AlphaAnimation fadeIn = new AlphaAnimation(0.0f , 1.0f ); 
    AlphaAnimation fadeOut = new AlphaAnimation( 1.0f , 0.0f ) ; 
    fadeIn.setDuration(1200);
    fadeIn.setFillAfter(true);
    fadeOut.setDuration(1200);
    fadeOut.setFillAfter(true);
    fadeOut.setStartOffset(4200+fadeIn.getStartOffset());

    //Run thread after 2 seconds to start Animation
    Handler handler = new Handler();
    handler.postDelayed(new Runnable(){

        public void run() {
            //display login form
            loginform.startAnimation(fadeIn);
            loginBtn.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    //display();
                    Toast.makeText(getApplicationContext(), "Checking login details...", Toast.LENGTH_SHORT).show();
                    if(checkLoginDetails()){
                        //OPENS NEW ACTIVITY
                        //Close splash screen
                        finish();
                        //start home screen 
                        Intent intent = new Intent(v.getContext(), SectionsActivity.class);
                        startActivity(intent);
                        //creates fade in animation between two activities
                        overridePendingTransition(R.anim.fade_in, R.anim.splash_fade_out);
                    }
                    else{
                    }
                }
            });

        }

    }, 2000);

}

//Check the login details before proceeding.
public boolean checkLoginDetails(){
    usernameDetail = username.getText().toString();
    passwordDetail = password.getText().toString();
    httptask = new HttpTask();
    httptask.execute(url, usernameDetail, passwordDetail);
    //if exists return true
    //else return false
    return false;
} 
```

}

这是我的 HttpTask

```
public class HttpTask extends AsyncTask<String, Void, Boolean> {

@Override
protected Boolean doInBackground(String... params) {

    String url = params[0];
    String username = params[1];
    String password = params[2];

    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url);

    List <NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("username", username));
    nameValuePairs.add(new BasicNameValuePair("password", password));

    try {
        httpClient.execute(httpPost);
        return true;
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

}

这是我的网络服务器上的 php 脚本`checklogindetails.php`

```
 require_once 'db_connect.php';

    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);

    $pwdMD5 = md5($password);

    $sql = "SELECT * FROM users WHERE username = '$username' AND password='$pwdMD5'";
    $result = mysql_query($sql);

    $count = mysql_num_rows($result);

    if($count == 1){
        echo "Log in successful";
//RETURN TRUE
    }
    else{
        echo "Wrong username or password";
//RETURN FALSE
    } 
```

我想我最困惑的地方是如何构造 php 脚本来检查登录详细信息，以及如何根据它返回 true 或 false 来决定做什么。

我将不胜感激有关此主题的任何建议或帮助！非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:13:50.407

上面的代码看起来不错，只是缺少最后一步。从 PHP 返回一些东西，然后在应用程序中读取它。

我建议将 PHP 的输出更改为更易于解析/维护的内容，例如“OK”和“ERROR”

然后将以下代码添加到 HttpTask。

```
final HttpResponse response = httpClient.execute(httpPost, localContext);
if (response != null)
{
    // parse response
    final HttpEntity entity = response.getEntity();
    if (entity == null)
    {
        // response is empty, this seems an error in your use case
        if (BuildConfig.DEBUG)
        {
            Log.d(HttpClient.TAG, "Response has no body"); //$NON-NLS-1$
        }
    }
    else
    {
        try
        {
            // convert response to string
            this.mResponseAsString = EntityUtils.toString(entity);
            if (BuildConfig.DEBUG)
            {
                Log.d(HttpClient.TAG, "Response: " + this.mResponseAsString); //$NON-NLS-1$
            }

            // parse the string (assuming OK and ERROR as possible responses)
            if (this.mResponseAsString != null && this.mResponseAsString.equals("OK")
            {
                // add happy path code here
            }
            else
            {
                // add sad path here
            }
        }
        catch (final ParseException e)
        {
            Log.e(HttpClient.TAG, e.getMessage(), e);
        }
        catch (final IOException e)
        {
            Log.e(HttpClient.TAG, e.getMessage(), e);
        }
    }
    this.mResponseCode = response.getStatusLine().getStatusCode();
} 
```

就个人而言，我还将 HttpTask 中的“OK”重构为一个常量（以便于阅读和维护），并将大多数基于 HTTP 的代码重构为某种基类或实用程序类，以便您可以重用它。

# vb.net - 用换行符 VB.NET 分割字符串

> ID：14992920
> 
> 赞同：3
> 
> 时间：2013-02-21T01:09:22.280
> 
> 标签：vb.net

我正在编写一个程序，该程序需要将 RichTextBox 中的文本换行。我试过了

`For Each Line As String In RichTextBox1.Text.Split(vbNewLine)`

我试过了

`For Each Line As String In RichTextBox1.Text.Split(System.Enviroment.NewLine)`

两者都没有工作。如果只有一行文本但在那之后就不行了。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T01:22:49.263

我想最简单的方法是像这样使用 RichTextBox.Lines

```
For Each Line As String In RichTextBox1.Lines
    ' Do whatever
Next 
```

不知道为什么按 Environment.NewLine 拆分对你不起作用，当我刚测试时它对我来说很好。

编辑：刚刚注意到对这个问题的评论，哎呀。这会教我发帖速度慢。

# macvim - 无法在 OSX 10.7.5 上使用 filedrawer 编译 MacVim

> ID：14992921
> 
> 赞同：0
> 
> 时间：2013-02-21T01:09:24.317
> 
> 标签：macvim

我无法在 OS X 10.7.5 上编译[Alloy 的 MacVim 分支。](https://github.com/alloy/macvim)我安装了 Xcode 4.6，带有最新的命令行工具。（我知道这个版本的 Macvim 有一个 Homebrew 公式，但我是 MacPorts 用户，我宁愿不切换到 Homebrew 来解决这个问题。）我还尝试运行“CC=clang LDFLAGS=-L/ usr/lib ./configure ...." 但仍然遇到错误。任何帮助表示赞赏！

我听说 MacVim 在使用 Ruby 1.9 编译时出现问题，所以我使用了我的系统 ruby​​（在多次尝试使用 1.9.3 和 1.9.2 之后）：

```
$ rvm system
$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]
$ ./configure --with-features=huge --enable-rubyinterp

$ cd src && make first
xcodebuild -project MacVim/MacVim.xcodeproj 
=== BUILD NATIVE TARGET PSMTabBarControlFramework OF PROJECT PSMTabBarControl WITH THE DEFAULT CONFIGURATION (Release) ===
Check dependencies

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMOverflowPopUpButton.o source/PSMOverflowPopUpButton.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMOverflowPopUpButton.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMOverflowPopUpButton.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMOverflowPopUpButton.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMOverflowPopUpButton.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMMetalTabStyle.o source/PSMMetalTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMMetalTabStyle.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMMetalTabStyle.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMMetalTabStyle.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMMetalTabStyle.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMRolloverButton.o source/PSMRolloverButton.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMRolloverButton.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMRolloverButton.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMRolloverButton.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMRolloverButton.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabBarCell.o source/PSMTabBarCell.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabBarCell.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabBarCell.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMTabBarCell.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabBarCell.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMProgressIndicator.o source/PSMProgressIndicator.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMProgressIndicator.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMProgressIndicator.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMProgressIndicator.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMProgressIndicator.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMAquaTabStyle.o source/PSMAquaTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMAquaTabStyle.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMAquaTabStyle.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMAquaTabStyle.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMAquaTabStyle.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.o source/PSMTabDragAssistant.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMTabDragAssistant.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.o source/PSMUnifiedTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-enum-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -fasm-blocks -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/PSMTabBarControl.hmap -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources/x86_64 -I/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/DerivedSources -F/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/Release -include /var/folders/2x/_8nyw24s4bv5ccy2z6gf9hd80000gp/C/com.apple.Xcode.502/SharedPrecompiledHeaders/AppKit-dznbmxptlydmqxbpwpoxawqdnnsw/AppKit.h -MMD -MT dependencies -MF /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.d --serialize-diagnostics /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.dia -c /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/source/PSMUnifiedTabStyle.m -o /Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.o
fatal error: file '/usr/include/sys/types.h' has been modified since the precompiled header was built
1 error generated.

2013-02-20 17:00:21.728 xcodebuild[72127:4f03]  DVTAssertions: Warning in /SourceCache/IDEXcode3ProjectSupport/IDEXcode3ProjectSupport-2108/Xcode3Sources/XcodeIDE/Frameworks/DevToolsBase/pbxcore/SpecificationTypes/XCGccMakefileDependencies.m:87
Details:  Failed to load dependencies output contents from ``/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.d''. Error: Error Domain=NSCocoaErrorDomain Code=260 "The file “PSMTabDragAssistant.d” couldn’t be opened because there is no such file." UserInfo=0x40175cf20 {NSFilePath=/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.d, NSUnderlyingError=0x40175caa0 "The operation couldn’t be completed. No such file or directory"}. User info: {
    NSFilePath = "/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.d";
    NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=2 \"The operation couldn\U2019t be completed. No such file or directory\"";
}.
Function: void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *))
Thread:   <NSThread: 0x40175bc20>{name = (null), num = 4}
Please file a bug at http://bugreport.apple.com with this warning message and any useful information you can provide.
2013-02-20 17:00:21.734 xcodebuild[72127:4f03]  DVTAssertions: Warning in /SourceCache/IDEXcode3ProjectSupport/IDEXcode3ProjectSupport-2108/Xcode3Sources/XcodeIDE/Frameworks/DevToolsBase/pbxcore/SpecificationTypes/XCGccMakefileDependencies.m:87
Details:  Failed to load dependencies output contents from ``/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.d''. Error: Error Domain=NSCocoaErrorDomain Code=260 "The file “PSMUnifiedTabStyle.d” couldn’t be opened because there is no such file." UserInfo=0x400127680 {NSFilePath=/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.d, NSUnderlyingError=0x40172c800 "The operation couldn’t be completed. No such file or directory"}. User info: {
    NSFilePath = "/Users/mxxx/src/macvim/src/MacVim/PSMTabBarControl/../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.d";
    NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=2 \"The operation couldn\U2019t be completed. No such file or directory\"";
}.
Function: void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *))
Thread:   <NSThread: 0x40175bc20>{name = (null), num = 4}
Please file a bug at http://bugreport.apple.com with this warning message and any useful information you can provide.

** BUILD FAILED **

The following build commands failed:
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMOverflowPopUpButton.o source/PSMOverflowPopUpButton.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMMetalTabStyle.o source/PSMMetalTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMRolloverButton.o source/PSMRolloverButton.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabBarCell.o source/PSMTabBarCell.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMProgressIndicator.o source/PSMProgressIndicator.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMAquaTabStyle.o source/PSMAquaTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMTabDragAssistant.o source/PSMTabDragAssistant.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    CompileC ../build/PSMTabBarControl.build/Release/PSMTabBarControlFramework.build/Objects-normal/x86_64/PSMUnifiedTabStyle.o source/PSMUnifiedTabStyle.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
(8 failures)
make: *** [macvim] Error 65 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:42:03.007

我终于意识到Alloy的Github repo中有一组预编译版本：

[https://github.com/alloy/macvim/downloads](https://github.com/alloy/macvim/downloads)

我下载了 build 021120112044，现在一切正常。

# ruby-on-rails - 用户登录后页面重定向

> ID：14992923
> 
> 赞同：0
> 
> 时间：2013-02-21T01:09:33.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望能够在用户登录后立即将用户重定向到不同的主页（这部分正在工作），但我仍然希望登录用户能够在需要时访问索引提要。目前他们只能看到 favourites_show_path 而不是 @guidelines = Guideline.order(:title).all。有没有办法（无需构建第二个索引操作和视图）在登录后获取主页以定向到 favourites_show_path 但仍然能够看到@guidelines = Guideline.order(:title).all？

```
 def index
    if params[:search].present?
    @search = Sunspot.search(Guideline) do  
      fulltext params[:search]
    end
    @guidelines = @search.results
  else
    redirect_to favourites_show_path, :action => 'index' and return if current_user
    @guidelines = Guideline.order(:title).all
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:40:38.587

谢谢，我已经解决了这个问题。我应该按照建议将重定向添加到登录操作中。所以我删除了

```
redirect_to favourites_show_path, :action => 'index' and return if current_user 
```

从我的索引操作，而是添加到我的 application_controller.rb

```
def after_sign_in_path_for(resource)
favourites_show_path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:15:33.457

只需将`@guidelines...`条件移出并重命名搜索结果的符号：

```
def index
  @guidelines = Guideline.order(:title).all
  if params[:search].present?
    @search = Sunspot.search(Guideline) do  
      fulltext params[:search]
    end
    @results = @search.results
  else
    redirect_to favourites_show_path, :action => 'index' and return if current_user
  end
end 
```

# java - 创建一个返回不同数量字符的“for”循环

> ID：14992924
> 
> 赞同：-1
> 
> 时间：2013-02-21T01:09:40.163
> 
> 标签：java

我有一个名为 的类`SnowFallReport`，当从它创建一个对象时，它会随机分配一个从 1-20 的数字到一个名为 的字段`snowFall`。目的是生成具有随机降雪量的虚构降雪报告。然后我尝试创建一种方法，可以根据字段中的数字显示一定数量的星号`snowFall`。给了我一个提示，我应该使用`for`循环来这样做，我只是不知道如何正确地用词。代码如下：

```
import java.util.Random;

public class SnowFallReport
{   

    // Random amount of snow
    private double snowAmount;

    // Default constructor creates random amount and assigns to snowAmount
    public SnowFallReport()
    {
        Random snowFall = new Random();
        snowAmount = (snowFall.nextDouble() * 20);
    }

    public double getSnow()
    {
        return snowAmount;
    }

    public String getStars()
    {
        for (int starCount = 0; starCount >= snowAmount; starCount++)
            return "*";
         /* This is what I thought it should be^ but it turns out I need a return
 statement outside of the for loop. I've tried a couple of different ways with no luck */

    }

    public static void main(String[] args)
    {
        SnowFallReport day1 = new SnowFallReport();
        String lol = day1.getStars();
        System.out.print(lol);
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:12:39.783

在您的`getStars`方法中，初始化一个`StringBuffer`（比如说，`sb`），然后在您的 for 循环中，为每个雪量附加一个“*”字符。然后，返回`sb.toString()`。

此外，您的 for 循环中的循环条件是错误的。如果语句为真而不是假，则循环将继续。

以下方法应该有效：

```
public String getStars()
{
    StringBuilder sb = new StringBuilder();
    for (int starCount = 0; starCount < snowAmount; starCount++)
        sb.append("*");
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:16:23.680

你也可以像这样初始化字符串

```
char[] c = new char[snowFall];
Arrays.fill(c, '*');
System.out.println(new String(c)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:17:09.773

您可能想使用 QuickCheck 库中的生成器，就预先存在的[PrimitiveGenerators而言，它真的很酷](http://quickcheck.java.net/nonav/javadoc/net/java/quickcheck/generator/PrimitiveGenerators.html)

这很容易

```
Generator<String> generator = PrimitiveGenerators.strings(5,20);
for (int i=0;i<10;i++) {
  String randomString = generator.next();
  ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T01:13:16.717

这是一个简单的 for 循环，它将返回星数。

```
 StringBuilder sb = new StringBuilder();
    for (int starCount = 0; starCount <= snowAmount; starCount++)
        sb.Append("* ");
    return sb; 
```

您也可以尝试 yield return ，它会返回一个星号，然后继续循环。

```
 for (int starCount = 0; starCount <= snowAmount; starCount++)
        yield return "*"; 
```

此外，您的更大符号应该是小于符号:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T01:14:27.453

```
StringBuilder sb = new StringBuilder();
for (int starCount = 0; starCount < snowAmount; starCount++) {
    sb.append('*');
}
return sb.toString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T01:12:10.930

```
for (int starCount = 0; starCount >= snowAmount; starCount++) 
```

说 startCount = 0。当 startCount >= snowAmount 执行循环然后增加 startCount。

```
for (int starCount = 0; starCount <= snowAmount; starCount++) 
```

另外：在 for 循环之后直接返回将打破循环 - 您需要将 * 添加到缓冲区，然后在完成循环后返回缓冲区。

# ruby-on-rails - Rails - Citier - 两级继承，子类不继承中间类属性

> ID：14992926
> 
> 赞同：2
> 
> 时间：2013-02-21T01:09:44.637
> 
> 标签：ruby-on-rails, citier, multi-table-inheritance

我正在尝试实现如下结构：GrandFather <- Father <- Son Using rails 和 gem citier。这个例子应该创建 2 个表来表示 3 个类：一个用于 Root 类（GrandFather）及其属性，另一个用于表示父类和子类（因为 Son 没有额外的属性）和父类的属性。

```
class GrandFather < ActiveRecord::Base
    acts_as_citier
    attr_accessible :grand_father_attr, :type
end

class Father < GrandFather
    acts_as_citier
    attr_accessible :father_attr
end

class Son < Father

end

class CreateGrandFathers < ActiveRecord::Migration
    def change
        create_table :grand_fathers do |t|
            t.string :type
            t.string :grand_father_attr
            t.timestamps
        end
    end
end

class CreateFathers < ActiveRecord::Migration
    def up
        create_table :fathers do |t|
            t.string :father_attr
        end
        create_citier_view(Father)
    end

    def down
        drop_citier_view(Father)
        drop_table :fathers
    end
end 
```

但是，如果我打开 rails 控制台并键入“Son.new”，则来自 GrandFather 的属性就在那里，但缺少来自父亲类的属性：

```
1.9.3-p362 :001 > Son.new
citier -> Root Class
citier -> table_name -> grand_fathers
citier -> Non Root Class
citier -> table_name -> fathers
citier -> tablename (view) -> view_fathers
   (1.1ms)   SELECT COUNT(*)
 FROM pg_tables
 WHERE tablename = 'grand_fathers'

   (0.5ms)   SELECT COUNT(*)
 FROM pg_views
 WHERE viewname = 'grand_fathers'

 => #<Son id: nil, type: "Son", grand_father_attr: nil, created_at: nil, updated_at: nil> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:37:21.357

我最终得到了一个非常简单的解决方法，在我的示例中，唯一的修改是：

```
class Son < Father 
   acts_as_citier :table_name => 'fathers'
end 
```

# cvs - 项目管理器文件图标中的 C++ Builder 2009 文件有 2 个检查

> ID：14992927
> 
> 赞同：0
> 
> 时间：2013-02-21T01:09:45.977
> 
> 标签：cvs, c++builder

我将 CVS 与 C++ Builder 2009 一起使用。

我的一个文件在项目管理器面板中的小图标上有 2 个复选标记。我的其他文件没有这些复选标记。

该文件已签入，我有来自代码存储库的最新源。有人可以让我知道这些复选标记的含义。

![2 个复选标记的图像](../Images/2ab9b1f449db5ca2344ec9f93fd34b6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:26:43.063

这表明您已经为此编译单元设置了本地选项。右键单击项目管理器中的文件并选择`Edit Local Options`. 然后，您应该能够看到该文件的哪些选项与项目的默认设置不同。

# c - 如何从一个单词中提取 2 个字节，以及如何从 2 个字节中生成一个单词（在 C 中）？

> ID：14992933
> 
> 赞同：2
> 
> 时间：2013-02-21T01:10:35.113
> 
> 标签：c, byte, word

我试图从一个 16 位字中提取两个字节，并从两个字节中生成一个 16 位字。这是我尝试过的（*byte = unsigned char, word = unsigned short*）：

**将 grpix 字拆分为 2 个字节：**

```
word grpix; // Assume that the value has been initialized

byte grpixl = grpix & 0x00FF;
byte grpixh = grpix & 0xFF00; 
```

**从 2 个字节制作 grpix 字**

```
byte grpixh; // Assume that the value has been initialized
byte grpixl; // Assume that the value has been initialized

word grpix = grpixh;
grpix <<= 8;
grpix += grpixl; 
```

出于某种原因，我的代码没有按预期工作，现在我不确定单词的“拆分”是否错误，单词的“制作”是否错误，或两者兼而有之......你能给我有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T01:15:35.553

当您拆分单词时，您并没有转移。因此，如果`grpix`是`0x1234`，则`grpixl`得到预期`0x34`但`grpixh`最终为`0x1200`。你应该说

```
byte grpixh = grpix >> 8; 
```

当然，您也忽略了可能存在的任何字节顺序问题。`htons()`您可能应该在尝试拆分之前将您的单词转换为已知的字节序（使用类似的东西）（并在加入时进行反向转换）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T01:21:18.833

了解：[http](http://graphics.stanford.edu/~seander/bithacks.html) ://graphics.stanford.edu/~seander/bithacks.html进行各种操作。

```
right_byte = short_val & 0xFF;
left_byte = (short_val >> 8) & 0xFF

short_val = ( (left_byte & 0xFF) << 8) | (right_byte & 0xFF);

```

我总是做一个 &0xFF 掩码以确保我没有符号问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:16:25.873

当你屏蔽高字节时，你还需要向下移动 8 位，否则你只会得到一个 16 位的数字，而后八位被清除。

字节 grpixh = (grpix & 0xFF00) >> 8

此外，通过使用 or-equals 而不是 plus-equals，您的作文可以更有效：

grpix |= grpixh << 8

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-10T07:56:43.043

我用来解决这个问题的简单代码是：

```
word=(msb<<8)+lsb; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-24T09:21:21.717

以下例程对我来说非常可靠：-

```
unsigned short get16int(a) char *a;{
   unsigned short hi,lo;
   hi = *a++ << 8;
   lo = *a  & 0x00ff; /* Needed to cater for sign extending when msb bit is set */
   return (hi | lo);
}
put16int(a,i) char *a; int i;{
 *a++ = i >> 8;
 *a = i;
} 
```

# html - Firefox 上网站导航栏的 CSS 转换的特殊情况

> ID：14992938
> 
> 赞同：2
> 
> 时间：2013-02-21T01:11:39.563
> 
> 标签：html, css, navbar

我的网站地址是[http://applocity.blogspot.com/](http://applocity.blogspot.com/)

我有一个导航栏（#cssmenu，如果你想在源代码中找到它）并且出于某种奇怪的原因发生这种情况：我这样做是为了让链接在悬停时改变颜色并且效果很好。但我想添加一个过渡，以便背景颜色通过淡入和淡出来改变颜色。这在 Chrome 上运行良好，但仅适用于 Firefox 上的子链接（例如，在设备和类别下）。我一直无法弄清楚为什么会发生这种情况。

```
#cssmenu a {

background: #999999;
color: #FFF;
-webkit-transition: background 1s ease;
-moz-transition: background 1s ease;
-ms-transition: background 1s ease;
-o-transition: background 1s ease;
transition: background 1s ease;
padding: 0px 25px; 

//border-radius: 5px; (NOT ACTIVE)
}

    #cssmenu ul li:hover > a { 

background: #66FF99;
  color: #000000;
-webkit-transition: background-color 0.3s ease;
-moz-transition: background-color 0.3s ease;
-ms-transition:background 0.3s ease;
-o-transition: background-color 0.3s ease;
transition: background-color 0.3s ease;
} 
```

（本站源码还有更多内容--CTRL+F #cssmenu）

到目前为止我已经尝试过：

1.  放置背景颜色而不是背景
2.  使用-moz-transition ...当然
3.  重新排序并放置我在 CSS 代码中放置过渡属性的位置（例如，在 #cssmenu 和 #cssmenu:hover 下）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:28:16.470

我想到了。这是我的解决方案的链接。[http://jsfiddle.net/mrytF/2/](http://jsfiddle.net/mrytF/2/)

问题来自第 59-61 行。你有这个代码：

```
.cssmenu a {
  -moz-transition: background 1s ease;
} 
```

什么`.cssmenu`时候不存在。所以我把这段代码注释掉了，它现在在 Firefox 中运行良好。我还注释掉了一些我认为多余的 CSS

希望这可以帮助

**编辑**

修复了没有子菜单显示的问题。这里的主要问题是您在`#cssmenu ul li.hover`需要时将第 22 行设置为`#cssmenu ul li:hover`。这是小提琴

[http://jsfiddle.net/mrytF/3/](http://jsfiddle.net/mrytF/3/)

# wordpress - woocommerce_cart 短代码不起作用

> ID：14992944
> 
> 赞同：2
> 
> 时间：2013-02-21T01:12:01.703
> 
> 标签：wordpress, cart, shortcode, woocommerce

我正在设置 Woocommerce，但是当我单击转到我的购物车页面时，它显示...

购物车 [woocommerce_cart] 编辑

我对此进行了研究，但一无所获。我可以确认我没有安装其他电子商务插件。

我的主题是 Toolbox 子主题。如果我切换到 TwentyTwelve 主题，则购物车显示正常。可能是什么问题呢？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:14:05.363

这通常由忘记切换到 HTML 编辑器视图的人完成。有两种模式，Visual 和 HTML。所有短代码都必须放在 HTML 编辑器中。

# svn - 乌龟svn中的混乱 - 切换

> ID：14992952
> 
> 赞同：3
> 
> 时间：2013-02-21T01:12:36.900
> 
> 标签：svn, tortoisesvn

我对切换的概念感到困惑（使用乌龟 svn）。我们是一个由 3 名开发人员组成的团队，我在这里是 Dev2。

首先，我尝试使用以下步骤进行切换（比如说，目前正在使用主干并希望在分支 v1.0 中开始工作）

1.  右键单击 /branches/v1.0
2.  选择tortoisesvn - 切换
3.  到路径：/branches/v1.0
    *   头部修订（选中）
    *   切换深度：工作副本

**如果我在上面做错了什么，请告诉我？**

但是，在那之后我跳过了切换，然后我们的工作给了我们以下输出：

1.  所有开发人员都在主干工作，然后开发结束
2.  使用 v1.0 创建了一个标签
3.  在标签 v1.0 中发现错误，因此从标签 v1.0 创建了一个分支 v1.0
4.  还需要新功能，因此 Dev1（开发人员 1）继续在 Dev2 和 Dev3 正在分支 v1.0 上工作的主干中工作
5.  Dev2 在分支 v1.0 中编写代码并提交
6.  Dev3 在分支中获取更新（获得 Dev1 的更新），然后在分支 v1.0 中编写代码并提交
7.  Dev1 在分支中获取更新（获取 Dev2 和 Dev3 的更新）
8.  Dev2 和 Dev3 在主干中获取更新（从 Dev1 获取更新）

**一切都可以正常工作而无需切换，那么切换的概念是什么？**

**另外，如果我在切换时在trunk中有未提交的文件会怎样？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T04:15:30.553

想象一下，如果您在主干上工作，突然意识到您应该在分支 2.3 上工作。您可以签出分支 2.3，但您将丢失所有工作。您可以尝试复制它，但这可能需要很长时间。

切换允许您*切换*本地副本的基础，而不会丢失任何工作。您修改的文件仍将包含您的修改。您添加的文件仍将被添加。您删除的文件仍将被删除。

```
$ svn co $REPO/trunk/proj1
[...work...work...work...]   #Whoops! Should have been on Release 2.3 branch!
# svn switch $REPO/branches/2.3/proj1
[...work...work...work...]   #Everything is fine and dandy! 
```

有些人使用 switch 来切换他们的工作副本，而无需再次结帐。例如，我完成了我的工作`proj1`，现在我在 Release 2.3 分支上做了一些工作。我只需切换到该分支并节省时间，因为我不必重新下载所有内容。另外，我节省空间！

我强烈反对这种想法，因为您很容易混淆您的工作目录所代表的内容。我见过一些复杂的提示来提取分支信息并将其显示在提示中。但是，我以我的项目和分支（或主干）命名我的结帐，并为每个项目使用单独的工作目录。

速度应该不是问题。完成一个非常大的 Subversion 项目需要 5 到 10 分钟的检查时间——刚好够喝杯咖啡。在这个千兆字节磁盘大小的时代，空间也不应该是一种溢价。使用`svn switch`不应该是普遍现象。

有一次，如果托管您的存储库的服务器发生更改，您有时会切换。但是，现在有一个专门`svn relocate`用于此目的的特殊命令：

```
$ svn co svn://repo/proj1   # We were using svnserve
$ svn relocate svn://repo http://repo/svn  #Now we're using Apache https
$ svn relocate http://repo/svn/proj1       #Alternative to the above. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:16:23.673

svn 开关应该只更新您的本地结帐以指向服务器上的新位置。例如，如果有人在存储库中移动了文件夹。

任何未提交的文件都应该没问题——**切换只是对本地文件系统的更改**。当您查看差异或类似内容时切换后，它将指向新的存储库。

# mongodb - 是否可以在 I5/OS 或 IBMi 服务器上安装 MongoDB？

> ID：14992958
> 
> 赞同：3
> 
> 时间：2013-02-21T01:13:25.140
> 
> 标签：mongodb, zend-framework, ibm-midrange, nosql

我做了一些研究，这似乎暗示至少在 2011 年，大端/小端问题阻止了这一点，因为 PPC 内核与 MongoDB 服务器不兼容。

这有改变吗？还是仍然无法让它在 IBMi 上运行？

我很困惑，因为 Zend 现在似乎支持 MongoDB，并且是 IBMi 服务器上 Web 框架的主要部分。

似乎完全在 IBMi 上使用 mongodb 是不可能的，是否有可靠的 NoSQL 替代方案可以使用集合？也许一个带有 SAVF 或 RPM 的设备可以开箱即用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:03:57.323

MongoDB 核心服务器是小端的。

您可以做的是在 IBMi 上安装驱动程序，因为它们中的大多数都是大端，而 Mongo DB 核心服务器在小端机器（AMD64 或 Intel x86_64）上

# c++ - 如何将 Child 类的向量传递给期望 Parent 类向量的函数？

> ID：14992961
> 
> 赞同：2
> 
> 时间：2013-02-21T01:14:01.210
> 
> 标签：c++, vector, parent-child

我可以将 Child 传递给期望 Parent 的成员函数，但是在使用向量时出现编译错误，提示没有匹配的声明。请参阅底部对 getUniqueLabels() 的 CorrelationEngineManager.cpp 调用

服务器事件.h

```
#ifndef SERVEREVENT_H
#define SERVEREVENT_H

#define SERVEREVENT_COLS 3

#include "Event.h"
#include <vector>

class ServerEvent: public Event {
private:

public: 
    ServerEvent(std::vector<std::string> tokens);
    void print();
};

#endif 
```

事件.h

```
#ifndef EVENT_H
#define EVENT_H

#include <string>

#define EVENT_STOP 0
#define EVENT_START 1

class Event {
private:

protected:
    double time;
    std::string label;
    int type; // EVENT_START OR EVENT_STOP

public:

};

#endif 
```

相关引擎管理器.h

```
class CorrelationEngineManager {
private:
    std::vector<ServerEvent> s_events;
    std::vector<UPSEvent> u_events;
    std::vector<TimeRecord> s_timeRecords;
    std::vector<TimeRecord> u_timeRecords;
    // typeOfEvent gets type of event, 0 for error, look at #defines for codes
    int typeOfEvent(std::vector<std::string>);
    int createTimeRecords();
    std::vector<std::string> getUniqueLabels(std::vector<Event> events);

public:
    CorrelationEngineManager();
    //~CorrelationEngineManager();
    int addEvent(std::vector<std::string> tokens); //add event given tokens
    void print_events();
}; 
```

相关引擎管理器.cpp

```
int CorrelationEngineManager::createTimeRecords() {
    std::vector<std::string> u_sLabels; // unique server labels
    std::vector<std::string> u_uLabels; // unique UPS labels
    u_sLabels = getUniqueLabels(s_events);
//  u_uLabels = getUniqueLabels(u_events);
    return 1;
}
// returns a vector of unique labels, input a vector of events
std::vector<std::string> CorrelationEngineManager::getUniqueLabels(std::vector<Event> events) {

    std::vector<std::string> temp;
    return temp;
} 
```

编译错误

```
 CorrelationEngineManager.cpp: In member function ‘int CorrelationEngineManager::createTimeRecords()’:
 CorrelationEngineManager.cpp:60: error: no matching function for call
 to ‘CorrelationEngineManager::getUniqueLabels(std::vector<ServerEvent,
 std::allocator<ServerEvent> >&)’ CorrelationEngineManager.h:23: note:
 candidates are: std::vector<std::basic_string<char,
 std::char_traits<char>, std::allocator<char> >,
 std::allocator<std::basic_string<char, std::char_traits<char>,
 std::allocator<char> > > >
 CorrelationEngineManager::getUniqueLabels(std::vector<Event,
 std::allocator<Event> >) make: *** [CorrelationEngineManager.o] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:16:18.993

这在 C++ 中是不可能的，这需要一个称为**协方差**的特性。

即使 type`A`是 type 的子类`B`，**type`X<A>`也与 type 完全无关`X<B>`**

因此，您不能传递`std::vector<UPSEvent>`给期望的函数`std::vector<Event>`，因为**它们是不相关的类型**。即使通过引用/指针传递也行不通。

有两种方法可以解决这个问题。

一种方法是让两个向量都**保存指向 的指针`Event`**，然后它们将具有相同的类型。

另一种方法是使函数成为**模板函数**，正如丹尼尔所建议的那样。

正如 billz 指出的那样，您还需要**修复签名。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T01:17:46.680

该函数可以更改为模板函数：

```
template< typename T >
std::vector<std::string> getUniqueLabels(std::vector<T> events); 
```

# loops - AutoHotKey 循环增量

> ID：14992973
> 
> 赞同：2
> 
> 时间：2013-02-21T01:15:27.480
> 
> 标签：loops, converter, autohotkey

我正在开发 AutoHotKey 中的一个程序，该程序可以自动将 .FTM (FamiTracker) 文件大量转换为 .WAV 的过程。问题是我希望它在每个循环中增加“send {down}”语句的值+1（选择文件夹中的下一首歌曲）。

**编辑**我已经更新了代码。增量语句有效，我只需要找到一种方法使整个程序循环根据需要多次转换文件夹中的所有文件（添加 +1 以发送 {down} 每个循环）。*现在的问题是它没有循环整个程序。* 任何帮助表示赞赏！

以下是启动 FamiTracker 音乐应用程序后程序外观的摘录：

```
 Sleep, 800 ; I want the program to loop back to here when it reaches the last line
click 20,30 ; clicks "file"
  Sleep, 500
Send {down 2} ; clicks "open"
send {enter}
  Sleep, 1200
click 211,128 ; clicks first filename in folder
  Sleep, 1200
send {enter}
  Sleep, 1000
click 20,30 ; clicks "file"
send {down 6}
send {enter} ; clicks "create wav"
  Sleep, 1000
click 157,57 ; increase playcount to 2
  Sleep, 500
send {enter}
  Sleep, 1000
send {enter}
  Sleep, 2500
send {enter}
click 20,30 ; clicks "file"
  Sleep, 500
Send {down 2} ; clicks "open"
send {enter}
  Sleep, 1200
click 211,128 ; clicks first filename in folder
  Sleep, 1000
Jmp:=1
Loop
{
    Send, {Down %Jmp%}
    Jmp+=1
return
}
sleep, 100
send {enter}
  Sleep, 1000
click 20,30 ; clicks "file"
send {down 6}
send {enter} ; clicks "create wav"
  Sleep, 1000
click 157,57 ; increase playcount to 2
  Sleep, 500
send {enter}
  Sleep, 1000
send {enter}
  Sleep, 2500
send {enter}
  Sleep, 1000 ; final line of code, want it to loop back to line 1 to repeat process till all files in folder are converted 
```

我被困了很长时间，有什么想法吗？我本质上希望光标在程序的每个循环之后移动到下一首歌曲。程序第一次运行时，它会加载歌曲 1，然后一旦歌曲 1 完成，它将重复该过程，但继续单击歌曲 2，依此类推。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:14:01.543

如果您想在循环中再跳过一个文件，则可以使用类似的东西。您应该添加一个测试以将最后一个文件名与当前文件名进行比较，以在列表末尾退出此循环。

```
Jmp:=1
Loop
{
    Send, {Down %Jmp%}
    Jmp+=1
}
Return 
```

我已更新您的代码以展示如何使用循环。花括号定义了将在循环内执行的内容。

```
InputBox, Jmp , Start, Enter Start number,,,,,,,,1
Loop
{
Sleep, 800
click 20,30 ; clicks "file"
  Sleep, 500
Send {down 2} ; clicks "open"
; Copy the file name somewhere here
; Send, ^c ; Copy highlighted text to ClipBoard
; ClipWait
; If (ClipBoard = PreviousName)
; {
;    Break
;    MsgBox, Next filenumber = %Jmp%
; }
; PreviousName = %ClipBoard%
send {enter}
  Sleep, 1200
click 211,128 ; clicks first filename in folder
  Sleep, 1200
send {enter}
  Sleep, 1000
click 20,30 ; clicks "file"
send {down 6}
send {enter} ; clicks "create wav"
  Sleep, 1000
click 157,57 ; increase playcount to 2
  Sleep, 500
send {enter}
  Sleep, 1000
send {enter}
  Sleep, 2500
send {enter}
click 20,30 ; clicks "file"
  Sleep, 500
Send {down 2} ; clicks "open"
send {enter}
  Sleep, 1200
click 211,128 ; clicks first filename in folder
  Sleep, 1000
Send, {Down %Jmp%}
Jmp+=1
sleep, 100
send {enter}
  Sleep, 1000
click 20,30 ; clicks "file"
send {down 6}
send {enter} ; clicks "create wav"
  Sleep, 1000
click 157,57 ; increase playcount to 2
  Sleep, 500
send {enter}
  Sleep, 1000
send {enter}
  Sleep, 2500
send {enter}
  Sleep, 1000
;    If (Jmp > "1000")
;        Break
}
Return 
```

您的原始代码将一直运行到文件列表的末尾，然后一遍又一遍地对最后一个文件执行相同的操作。因此，我在代码中添加了文件名比较。在文件打开时，您可能有文本形式的文件名，这是您复制到剪贴板并将剪贴板与以前的文件名进行比较的内容。通过添加起始​​编号，您可以在某个文件处重新开始。

我看到您的代码使用了很多鼠标点击。如果你只运行一次，这没有问题，但如果你想可靠地运行它，还有其他方法。

整体检查：检查在此过程中打开的每个窗口，并验证正确的窗口是否打开。在此示例中，我检查标题为“文件打开”的窗口是否确实已打开并处于活动状态（其他进程或程序 [聊天、更新等] 可以接管焦点，您的脚本将执行其中的代码其他程序...）。

```
SetTitleMatchMode = 2
WinWaitActive, File Open, , 5 ; Wait up to five seconds for the screen
  if ErrorLevel ; Execute this when the window is not activated within 5 seconds
  { 
    SoundBeep 1000 , 1000 ; Warn the user
    Break
  } 
```

尽可能尝试使用键盘快捷键或（更高级）使用`AutoHotKey Windows Spy`并检查 ClassNN：在“现在在鼠标光标下”部分，然后使用它直接激活这些按钮，而不是通过鼠标坐标。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:02:57.133

尝试使用，`Window Spy`这样您将获得某个窗口的控件的类名。如果该窗口上有进度条，则更容易收听进程完成的事件。

基本上，使用`ControlGet`命令来获取转换的进度并使用`ControlSend`命令在控件上发送事件（例如`ControlSend, Button1, {Click}, ahk_class AWindow`）。

# iphone - Uitableview 数字排序

> ID：14992974
> 
> 赞同：0
> 
> 时间：2013-02-21T01:15:28.057
> 
> 标签：iphone, ios, sorting, numerical

长话短说，不久前我开始使用 uitableview。我终于把所有东西都搞定了，除了正确的排序。

我可以按升序和降序排序，但不能按数字排序

有人告诉我，我需要使用 nsdictionary 或 nsnumber 并比较结果以正确排序

换句话说，我有 nsmutablearray numberArray... 它以字符串格式添加数字，因此数字 25、32、15 和 3 将在视图中显示为 32、3、25 和 15。

我已经看了几个小时，用不同的代码进行了几个小时的测试，这样的尼克斯得到了任何结果......有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:20:25.850

您需要对字符串的“intValue”进行排序：

```
NSMutableArray *toBeSorted = [NSMutableArray array];
...add stuff to the array...
NSSortDescriptor *mySorter = [[[NSSortDescriptor alloc] initWithKey:@"intValue" ascending:YES] autorelease];
[toBeSorted sortUsingDescriptors:[NSArray arrayWithObject:mySorter]]; 
```

因此，虽然上述方法可行，但 tc 建议使用：

```
toBeSorted = [toBeSorted sortedArrayUsingSelector:@selector(localizedStandardCompare:)]; 
```

是一个更优雅的解决方案。

# javascript - 如何防止原型显示在数组上

> ID：14992977
> 
> 赞同：0
> 
> 时间：2013-02-21T01:15:35.437
> 
> 标签：javascript, arrays, prototype

我想用我自己的一些功能来扩展 Array 的功能。这工作正常。但是，我注意到在控制台中，函数被“附加”到数组中，就好像它们是数据一样。

小提琴：http: [//jsfiddle.net/BxfCy/1/](http://jsfiddle.net/BxfCy/1/)

这是代码，因为 stackoverflow 迫使我发布（只需单击小提琴）：

```
a = [1,2,3];

Array.prototype.doMagic = function(){
    var returnvar = this;
    returnvar.push(42);
    return returnvar;
}

console.log(a);

for (var n in a){
    console.log(a[n]);
} 
```

我的想法是数组中没有显示其他数组函数（你知道，比如 push）。有没有办法不在数组中显示原型函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T01:18:35.267

一种方法是使用[`Object.hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)：

```
for (var n in a){
    if (a.hasOwnProperty(n)) {
        console.log(a[n]);
    }
} 
```

更好的方法是[对数组使用正确的迭代习语](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in#Description)：

```
for (var i=0; i<a.length; i++){
    console.log(a[i]);
} 
```

或用于[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)使`doMagic`属性[不可枚举](https://developer.mozilla.org/en-US/docs/ECMAScript_DontEnum_attribute)：

```
Object.defineProperty(Array.prototype, 'doMagic', {
    enumerable: false,
    configurable: false,
    writable: false,
    value: function(){
        var returnvar = this;
        returnvar.push(42);
        return returnvar;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T01:18:13.810

问题是您正在使用`for..in`循环，而您应该使用常规`for`循环。

```
for (var i=0; i<a.length; i++){
  console.log(a[i]);
} 
```

`for..in`用于对象*而不是*数组。

**编辑：**在现代浏览器中，您也可以使用`forEach`：

```
a.forEach(function(val, i) {
  ...
}); 
```

# wcf - 通过电子邮件将 WCF 跟踪信息发送给我

> ID：14992978
> 
> 赞同：0
> 
> 时间：2013-02-21T01:15:37.137
> 
> 标签：wcf, trace

所以我最近想出了如何打开在我的服务器上创建一个 svclog 文件的 WCF 跟踪，这太棒了。但我遇到的问题是我无法直接访问我正在处理我的 Web 服务的服务器，所以每次我需要查看跟踪文件时，我必须让办公室的其他人登录服务器对我来说，我必须将跟踪文件上传到云服务器，因为它通常太大而无法通过电子邮件发送，然后经过数周的请求才能找到我想要分析的内容。

长话短说，我想知道是否有一种方法可以让我通过跟踪记录向自己发送一封电子邮件，记录每条存储的跟踪信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T21:54:12.857

答案似乎是“否”，无法使用 svclog 发送电子邮件跟踪。还有其他方法可以实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:25:39.117

您可以设置自定义跟踪侦听器以记录到数据库或电子邮件。 [Log4Net](http://logging.apache.org/log4net/release/config-examples.html)或[Nlog](http://nlog-project.org/wiki/Mail_target)已经内置了一些。由于 Nlog 具有新的功能支持，我已经使用了两者并且更喜欢 NLog 而不是 Log4net。

如果你想从头开始创建自己的。看看[这个](http://www.barebonescoder.com/2010/04/writing-an-email-custom-trace-listener-for-a-wcf-service/)家伙的解决方案，看看如何做的例子。

# mongodb - SQL 到 MapReduce：带有 select 语句的 where 子句

> ID：14992984
> 
> 赞同：0
> 
> 时间：2013-02-21T01:16:12.643
> 
> 标签：mongodb, mapreduce

***当where***子句包含 select 语句时，我如何将 sql 查询转换为 mongodb map reduce ？

**例如**

```
select
    sum(l_extendedprice) / 7.0 as avg_yearly
from 
    lineitem, 
    part
where 
    p_partkey = l_partkey
    and p_brand = 'Brand#23'
    and p_container = 'MED BOX'
    and l_quantity < (
        select
            0.2 * avg(l_quantity)
        from 
            lineitem
        where 
            l_partkey = p_partkey
    ); 
```

我试过这个mapreduce，但似乎没有用。

```
db.runCommand({
    mapreduce: "lineitem",
    query: {
        "partsupp.ps_partkey.p_brand": "Brand#23",
        "partsupp.ps_partkey.p_container": "MED BOX"
    },
    map: function() {
        var data = {l_extendedprice: 0, l_quantity:0, total_l_quantity: 0 };

        data.l_extendedprice = this.l_extendedprice;
        data.l_quantity = this.l_quantity;
        data.total_l_quantity = 1;

        emit("avg_yearly", data);
    },
    reduce: function(key, values) {
        var data = {l_extendedprice: 0, l_quantity:0, total_l_quantity: 0 };
        var sum_l_quantity = 0;

                /*sum the l_quantity and total_l_quantity*/
        for (var i = 0; i < values.length; i++) {
            sum_l_quantity += values[i].l_quantity;
            data.total_l_quantity += values[i].total_l_quantity;
        }

                /*calculate the average l_quantity and multiply*/
        var avg_l_quantity = 0.2 * (sum_l_quantity / data.total_l_quantity);

                /*sum l_extendedprice and divide */     
        for (var i = 0; i < values.length; i++) {
            if( values[i].l_quantity < avg_l_quantity ) {
                data.l_extendedprice += values[i].l_extendedprice;
            }
        }
        data.l_extendedprice = data.l_extendedprice / 7.0;

        return data;
    },
    out: 'query017'
}); 
```

有另一种方法吗？是否可以在mapreduce的查询子句中做到这一点？或者我只是在我的代码中弄错了？

**架构**

```
{
    "_id" : ObjectId("511b7d1b3daee1b1446ecdfe"),
    "l_quantity" : 17,
    "l_extendedprice" : 21168.23,
    "l_discount" : 0.04,
    "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
    "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
    "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
    "l_shipmode" : "TRUCK",
    "l_comment" : "blithely regular ideas caj",
    "partsupp" : {
            "ps_availqty" : 6157,
            "ps_supplycost" : 719.17,
            "ps_partkey" : {
                    "p_partkey" : NumberLong(155190),
                    "p_name" : "slate lavender tan lime lawn",
                    "p_mfgr" : "Manufacturer#4",
                    "p_brand" : "Brand#44",
                    "p_type" : "PROMO BRUSHED NICKEL",
                    "p_size" : 9,
                    "p_container" : "JUMBO JAR",
                    "p_retailprice" : 1245.19,
                    "p_comment" : "regular, final dol"
            }
    }
} 
```

# android - 如何从 android 发布 http 到 google 应用引擎服务器？

> ID：14992991
> 
> 赞同：5
> 
> 时间：2013-02-21T01:16:58.407
> 
> 标签：android, google-app-engine, http

我正在尝试从我的 android 向 GAE 上的服务器发出 http 发布请求。

在 android 端，帖子似乎运行良好，但在服务器端，doPost(...) 永远不会被调用。谁能告诉我为什么？

这是我的相关android代码：

```
protected Integer doInBackground(View... arg0)
{
    try
    {
        HttpClient httpClient = new DefaultHttpClient();
//      HttpPost httpPost = new HttpPost("http://elf-security.appspot.com");
        HttpPost httpPost = new HttpPost("http://elf-security.appspot.com/gae_hellowordl");
//      HttpPost httpPost = new HttpPost("http://localhost:8888/gae_hellowordl");
        httpPost.addHeader("test", "Success!");

        Log.i(TAG, "Just about to send http request to " + httpPost.getURI());
        HttpResponse httpResponse = httpClient.execute(httpPost);
        Log.i(TAG, "Received http response..");

        Log.i(TAG, httpResponse.toString());
    } catch (ClientProtocolException e) 
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
    }

    return null;
} 
```

这是我的相关服务器代码：

```
public class GAE_HelloWordlServlet extends HttpServlet
{
    private Logger LOG;

    public GAE_HelloWordlServlet()
    {
        LOG = Logger.getLogger("GAE_HelloWordlServlet");
        LOG.info("GAE_HelloWordlServlet()");
    }

    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException
    {
        LOG.info("doGet():  request test header:  " + req.getHeader("test"));
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException
    {
        LOG.info("doPost():  request test header:  " + req.getHeader("test"));
    }
} 
```

提前致谢！

* * *

**编辑**

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>GAE_HelloWordl</servlet-name>
        <servlet-class>gae.helloworld.GAE_HelloWordlServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GAE_HelloWordl</servlet-name>
        <url-pattern>/*</url-pattern>
<!--        <url-pattern>/gae_hellowordl</url-pattern> -->
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>SystemServiceServlet</servlet-name>
        <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
        <init-param>
            <param-name>services</param-name>
            <param-value/>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>SystemServiceServlet</servlet-name>
        <url-pattern>/_ah/spi/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T02:36:07.753

仔细检查您的 web.xml 并确保 URL 路径正确映射到处理它的 servlet：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">
    <servlet>
        <servlet-name>helloworld</servlet-name>
        <servlet-class>com.mysite.GAE_HelloWordlServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>helloworld</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

[在此处](https://developers.google.com/appengine/docs/java/config/webxml#About_Deployment_Descriptors)查看开发指南以获取更多详细信息：

> ## Servlet 和 URL 路径
> 
> web.xml 定义了 URL 路径和使用这些路径处理请求的 servlet 之间的映射。Web 服务器使用此配置来识别处理给定请求的 servlet 并调用与请求方法对应的类方法（例如，用于 HTTP GET 请求的 doGet() 方法）。
> 
> ……

## 更新：

*   案例 1：Android 模拟器 -> Appengine dev_server（都在同一台机器上运行）：

    请参阅此问答：[Android 应用程序 doPost](https://stackoverflow.com/questions/11508488/android-application-dopost)

*   案例2：Android真机->Appengine dev_server（都在同一个网络）：

    首先确保 Appengine dev_appserver 可以在网络上访问（通过使用参数 --address=0.0.0.0 启动 dev_appserver，请参阅[此处](https://developers.google.com/appengine/docs/java/tools/devserver#Command_Line_Arguments)了解更多详细信息）。其次，在您的 android 应用程序中，更改您的代码以指向正确的 IP 地址，例如，如果您的桌面 IP 是 192.168.1.6，请使用`HttpPost httpPost = new HttpPost("http://192.168.1.6:8888/gae_hellowordl");`