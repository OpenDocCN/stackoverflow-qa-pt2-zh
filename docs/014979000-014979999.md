# StackOverflow 问答 14979000-14979999

# android - 在导航中表示分层数据的最佳做法是什么？

> ID：14979001
> 
> 赞同：1
> 
> 时间：2013-02-20T11:43:05.417
> 
> 标签：android, navigation

例如我有类**Category**：

```
class Category {
    private String name;
    private ArrayList<Category> childCategories;
} 
```

我想显示这个对象的列表，用户可以遍历子类别并再次返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:49:06.073

Android 有一个内置的[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)，它是两级的。您可以在其中显示您的类别和您的子类别。当用户单击子类别时，您可以启动另一个活动，显示子类别内容。

也许您不想使用 ExpandableListView 而只想使用列表视图，因此您在单个屏幕中显示单个级别。

Android 没有 ExpandableListView 片段，因此正确的方法可能是在单独的屏幕中显示每个类别。不过，您可能可以对所有类别使用相同的活动。

Android 绝对没有任何类似 TreeView 的控件。这可能是因为设备屏幕可能非常小。一次显示一个级别可能会很好。

# java - Geronimo 的 PID

> ID：14979003
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:43:08.853
> 
> 标签：java, geronimo

我们试图找出运行应用程序的 Geronimo 实例的 CPU 利用率。

我可以在哪个文件中跟踪以获取 geronimo 实例的 PID。

我正在使用 Geronimo 2.17 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:49:09.310

在终端中执行此操作

```
$ ps aux | grep geronimo 
```

# php - PHP 会话变量不会取消设置

> ID：14979006
> 
> 赞同：3
> 
> 时间：2013-02-20T11:43:10.350
> 
> 标签：php, drupal, module, session-variables

我在 Drupal 模块中有几行代码，如下所示：

```
if ($arg == 'true' && isset($_SESSION['xyz']['noredirect'])) {
    unset($_SESSION['xyz']['noredirect']);
} 
```

执行第二行时，出现错误：

```
Error messageNotice: Undefined variable: _SESSION in blah() (line 122 of /home/xxxxxxx/public_html/sites/all/modules/blah/blah.module). 
```

我根本无法理解为什么如果设置了会话，我就不能取消它。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:46:11.903

您似乎尚未运行[session_start()](http://php.net/manual/en/function.session-start.php)。这将创建`$_SESSION`超全球。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:58:26.950

该模块现在完全按照我的意愿工作。我通过使用 session_destroy(); 解决了它 而不是未设置。这可能不是修复它的最优雅的方法，但它有效，我找不到任何其他方法。

```
if ($arg == 'true' && isset($_SESSION['xyz']['noredirect'])) {
session_destroy(); 
```

}

# mongodb - 如何将大列表存储在数据库中

> ID：14979010
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:43:23.013
> 
> 标签：mongodb, database, nosql

我想在数据库中存储一个大的 url 列表，每个列表都有一个 Id，并且两个不同列表中的 url 很可能不一样，这意味着不同的 url 列表之间的交集非常小。列表的大小是未知的，并且从一个列表到另一个列表有所不同。

目前，我将列表作为字符串存储在 PostgreSQL 数据库的字段中，我知道这不是一个好的解决方案，所以我正在寻找一个更好的解决方案。

我想出的事情是：

*   将每个 url 存储在一个单独的表中，并以一对多的关系将它们链接起来。我认为这个解决方案不是很好，因为正如我所说，url 可能只会出现在一个列表中。
*   寻求一些 NoSQL 解决方案（mongoDB），但由于我从未尝试过，所以我想看看你们是否有更好的解决方案。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:56:16.340

您应该在两个表“lists”和“urls”之间建立多对多关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:52:58.033

我可以帮你用 mysql。
在 mysql 中，你可以使用 1 个表。
通过使用 3 列：ID、URL1、URL2

# qt - 如何使用 QTest 验证是否引发了异常？

> ID：14979011
> 
> 赞同：10
> 
> 时间：2013-02-20T11:43:25.467
> 
> 标签：qt, qtestlib

我在 QT C++ 世界中陈述。我正在使用 QTest 类进行 TDD。我想验证在某些情况下，我的测试类是否引发了异常。使用谷歌测试，我会使用类似的东西：

```
EXPECT_THROW(A(NULL), nullPointerException); 
```

QTest 中是否存在类似此功能的功能？至少有一种方法可以做到吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-30T12:17:39.333

由于 Qt5.3 QTest 提供了一个宏[QVERIFY_EXCEPTION_THROWN](http://doc.qt.io/qt-5/qtest.html#QVERIFY_EXCEPTION_THROWN)来提供缺失的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T13:58:57.057

这个宏演示了这个原理。

比较`typeid`是一个特殊的用例，所以可能会或可能不想使用它 - 它允许宏“失败”测试，即使抛出的异常来自您正在测试的异常。通常你不会想要这个，但我还是把它扔了！

```
#define EXPECT_THROW( func, exceptionClass ) \
{ \
    bool caught = false; \
    try { \
        (func); \
    } catch ( exceptionClass& e ) { \
        if ( typeid( e ) == typeid( exceptionClass ) ) { \
            cout << "Caught" << endl; \
        } else { \
            cout << "Derived exception caught" << endl; \
        } \
        caught = true; \
    } catch ( ... ) {} \
    if ( !caught ) { cout << "Nothing thrown" << endl; } \
};

void throwBad()
{
    throw std::bad_exception();
}

void throwNothing()
{
}

int main() {
    EXPECT_THROW( throwBad(), std::bad_exception )
    EXPECT_THROW( throwBad(), std::exception )
    EXPECT_THROW( throwNothing(), std::exception )

    return EXIT_SUCCESS;
} 
```

回报：

> ```
> Caught
> Derived exception caught
> Nothing thrown 
> ```

为了适应它，`QTest`你需要用`QFAIL`.

# ruby-on-rails - Rails 活动记录查询和 JSON

> ID：14979013
> 
> 赞同：0
> 
> 时间：2013-02-20T11:43:27.287
> 
> 标签：ruby-on-rails, json, rails-activerecord

我的 Rails 应用程序中有以下模型：

```
class Transaction 
  belongs_to :category
  has_one :group, :through => :category

class Category
  belongs_to :group
  has_many :transactions

class Group
  has_many :categories
  has_many :transactions, :through => :category 
```

在我的控制器中如下：

```
 @transactions = Transaction.includes(:category, :group).group("groups.id").sum("amount")
 respond_to do |format|
  format.json{
    render :json => JSON.generate(@transactions.as_json(:include => [:category, :group]))
  }
 end 
```

这将产生以下 json ( **A** )：

```
 {"1":2000,"3":5000,"2":1000} 
```

但是，我的目标是产生这样的东西（**B**）：

```
 [{"group_id":1,"amount":2000},{"group_id":3,"amount":5000},{"group_id":2,"amount":1000}] 
```

任何有关我如何从**A**到**B**的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:02:25.347

尝试：

```
def user_transactions
  @transactions = Transaction.includes(:category, :group).group("groups.id").sum("amount")
  respond_to do |format|
    format.html
    format.json do
      render :json => custom_json_for(@transactions)
    end
  end
end

private
def custom_json_for(value)
  list = value.map do |k,v|
    { :group_id => k,
      :amount=> v    
    }
  end
  list.to_json
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:51:38.260

如果你做了很多 JSON 序列化，我建议你看看 ActiveModelSerializers： [https ://github.com/rails-api/active_model_serializers](https://github.com/rails-api/active_model_serializers)

# wordpress - qTranslate 忽略 url 中的语言

> ID：14979014
> 
> 赞同：1
> 
> 时间：2013-02-20T11:43:29.643
> 
> 标签：wordpress, qtranslate

我想创建一个用两种语言编写的网站。我使用了 qTranslate，它似乎工作正常。但是，我的主题中有几个条件元素，例如：

```
<li><a href="/<?php if(qtrans_getLanguage()=='en') { ?>en<?php } else { ?>pl<?php } ?>></li> 
```

它检测任何一种语言是否是`pl`或`en`并据此创建链接。但是，例如，当我单击链接时`http://localhost/en/something`，它会忽略并使用默认语言`en`加载。`http://localhost/something`我能做些什么来改变它？

编辑：这只发生在自定义帖子类型上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:14:57.933

我解决了这个问题。`/`在链接末尾添加有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T21:48:21.867

也遇到过这个问题。添加`/`没有任何区别。

改用`?setlang=no`解决了我的问题。

资料来源：[qTranslate-X 常见问题解答](https://qtranslatexteam.wordpress.com/faq/#CustomMenuConvertURL)

# java - 在整个递归调用中保持引用

> ID：14979016
> 
> 赞同：0
> 
> 时间：2013-02-20T11:43:33.933
> 
> 标签：java, recursion, static

我有一个自定义对象，其中包含一些“计数器”字段。这个对象在将被递归调用的函数中获取那些递增的字段。所以我需要在每次调用函数时重新创建对象，以便重置计数器字段，但如果函数处于递归调用中，则不重新创建。有道理？

目前，我通过重载方法来做到这一点，这样它就不是*真正*的递归，而是我传递了带有计数器的同一个对象，以便我的计数得以保留。

基本上，下面是我现在正在做的事情：

```
static Counter count(Object parent) 
{
    Counter newCounter = new Counter();
    newCounter = count(parent, newCounter);

    return newCounter;
}

static Counter count(Object parent, Counter currentCounter) 
{
    Object cur = new Object(parent);

    if(cur.isChild())
        Counter.child++;
    else if(cur.isParent())
    {
        Counter.parent++;
        count(cur, currentCounter);
    }

    return currentCounter;
} 
```

有一个更好的方法吗？或者我不需要重载的方式？哦，我*确实*需要保持静态的主要方法，由于限制，我无法轻易更改系统内的其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:49:04.173

**使用静态变量：（**假设只有一个线程）

```
static Counter counter;

public static Counter count(Object parent) 
{
    counter = new Counter();
    count2(parent);
    return counter;
}

private static void count2(Object parent) 
{
    Object cur = new Object(parent);

    if(cur.isChild())
        Counter.child++;
    else if(cur.isParent())
    {
        counter.parent++;
        count2(cur);
    }
} 
```

**或者对于多线程：**

```
class ThisClass
{
  private Counter counter;

  private ThisClass() { counter = new Counter(); }

  public static Counter count(Object parent) 
  {
    ThisClass thisClass = new ThisClass();
    thisClass.count2(parent);
    return thisClass.counter;
  }

  private void count2(Object parent)
    ...
} 
```

# sql - 根据星期几将表值设置为另一个表的值

> ID：14979020
> 
> 赞同：0
> 
> 时间：2013-02-20T11:43:48.410
> 
> 标签：sql, sql-server-2008

我有两个表，`table1`包含“用户名”和另外 7 个包含一周中每一天的值的列。`table2`包含三列，“用户名”、“日期”和第三列，我希望将其设置`table1`为与插入行的日期对应的“星期几”列。第二个表每天为每个用户更新一个新行。

*[我希望这是有道理的！]*

最初，我正在研究使用计算列的可能性，该列调用一个返回等于星期几的值的函数：

```
[dbo].[functionName]
(
    @colUsername varchar(25),
    @colDate date
)
RETURNS numeric(18, 0)
AS
BEGIN
    DECLARE @result numeric(18, 0)

    SELECT @result = CASE DATEPART(dw, @colDate)
        WHEN 1 THEN (SELECT SUNDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 2 THEN (SELECT MONDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 3 THEN (SELECT TUESDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 4 THEN (SELECT WEDNESDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 5 THEN (SELECT THURSDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 6 THEN (SELECT FRIDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
        WHEN 7 THEN (SELECT WORKINGSATURDAY FROM dbo.table1 WHERE USERNAME = @colUsername)
    END

    RETURN @result
END 
```

并被设置为计算列，如下所示：

```
ALTER TABLE dbo.table2 ADD
    COLNAME AS dbo.functionName(USERNAME, DATE)
GO 
```

这可以正常工作并且正如预期的那样，但是，因为它是一个计算列，当值发生`table1`变化时，所有值也会更新，`table2`而我需要旧值保持静态，并且`table1`只将更新后的值添加到的新行`table2`。

我正在寻找有关如何实现这一目标的建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:00:33.450

完成此操作的最简单方法可能是仅使用您编写的相同函数，但在您的插入中调用它`table2`并且不计算列。

如果您有一个带有计算列的有效插入，并且确实无法让插入与作为插入的一部分完成的计算一起工作，那么解决它的一种相当老套的方法可能是在插入时触发`table2`将计算值复制到另一列。然后，您将在同一张表中获得变化的值和稳定的值。

或者在`table2`调用您的函数时使用插入触发器来填充值，您应该能够返回到只有一列具有稳定值的列。

# linux - 强制调度程序将线程分配给特定的处理器

> ID：14979031
> 
> 赞同：2
> 
> 时间：2013-02-20T11:44:25.773
> 
> 标签：linux, multithreading, multiprocessing, scheduling, multicore

考虑我们有多个处理器/内核和两个线程的情况。是否可以强制 linux 调度程序在其执行的每个实例中始终将特定线程（两者）调度到特定处理器。是否在创建时为线程设置处理器亲和性，足以达到此目的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:49:28.613

如果您查看手册页，[`taskset`](http://linux.die.net/man/1/taskset)您可以看到以下语句：

> Linux 调度程序将遵循给定的 CPU 亲和性，并且该进程不会在任何其他 CPU 上运行。

这意味着为特定进程设置 CPU 亲和性将确保它始终在该 CPU 上运行。

存在允许您为特定线程设置线程亲和性的 API，我想 OS 调度程序也会尊重这一点。

如果你看一下，[`sched_setaffinity`](http://linux.die.net/man/2/sched_setaffinity)你会看到一行写着：

> 这些对进程将在其上运行的实际 CPU 集的限制是由内核静默施加的。

这意味着这将确保您的线程仅在此函数设置的 CPU 上运行。

# sql - 从Oracle中的内部连接右表返回一行

> ID：14979037
> 
> 赞同：1
> 
> 时间：2013-02-20T11:44:39.643
> 
> 标签：sql, oracle, inner-join

我有三个表（TABLE_A、TABLE_B、TABLE_C），我在 C_MAIN_REF 上加入它们。TABLE_B 有多个条目，我只需要返回一个，不管哪个？

有任何想法吗？

编辑：

```
SELECT C.C_UNIT_CODE as BU,'EPLC' as PRODUCT, A.BENE_NM as CUSTOMER, A.C_MAIN_REF,
        A.C_TRX_REF, A.PRES_CCY, TO_CHAR(A.PRES_AMT) AS PRES_AMT, A.PRES_DT AS PRES_DATE,
        A.DOC_STAT, '' AS APPL_RESPONSE, A.SETTLE_STATUS as SETTLE_STATUS 
    FROM EPLC_EM_NEGO A
    INNER JOIN CPYT_SCHEDULE B
           ON a.C_MAIN_REF = b.C_MAIN_REF AND ROWNUM =1
    INNER JOIN EPLC_MASTER C
            ON a.C_MAIN_REF = c.C_MAIN_REF
    WHERE a.CLS_DRWG_FLG = 'NO' AND b.CPYT_UNPAID_FLAG = 'T' 
```

以上是我正在使用的当前查询，但问题是我不想要的 CPYT_SCHEDULE 中有多个条目，因此连接应该只包含 CPYT_SCHEDULE 表中的一行；

目前以上回报

```
BU   PRODUCT CUSTOMER               C_MAIN_REF   C_TRX_REF        PRES_CCY PRES_AMT  PRES_DATE DOC_STAT     SETTLE_STATUS
------------ ---------------------------------------------------- -------- --------- --------- ------------ -------------
GB01 EPLC    Finance Customer No. 5 XL000053GB01 XL000053GB01-01  USD      90000     24-AUG-12 COMPLIANT    Settle      
GB01 EPLC    Finance Customer No. 5 XL000053GB01 XL000053GB01-01  USD      90000     24-AUG-12 COMPLIANT    Settle       
GB01 EPLC    Finance Customer No. 5 XL000053GB01 XL000053GB01-01  USD      90000     24-AUG-12 COMPLIANT    Settle       
GB01 EPLC    Finance Customer No. 5 XL000053GB01 XL000053GB01-01  USD      90000     24-AUG-12 COMPLIANT    Settle 
```

但所需的输出是

```
BU   PRODUCT CUSTOMER               C_MAIN_REF   C_TRX_REF        PRES_CCY PRES_AMT  PRES_DATE DOC_STAT     SETTLE_STATUS
------------ ---------------------------------------------------- -------- --------- --------- ------------ -------------
GB01 EPLC    Finance Customer No. 5 XL000053GB01 XL000053GB01-01  USD      90000     24-AUG-12 COMPLIANT    Settle 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:50:16.790

像这样的东西：

```
SELECT C.C_UNIT_CODE as BU,
       'EPLC' as PRODUCT, 
       A.BENE_NM as CUSTOMER, 
       A.C_MAIN_REF,
       A.C_TRX_REF, 
       A.PRES_CCY, 
       TO_CHAR(A.PRES_AMT) AS PRES_AMT, 
       A.PRES_DT AS PRES_DATE,
       A.DOC_STAT, 
       '' AS APPL_RESPONSE, 
       A.SETTLE_STATUS as SETTLE_STATUS 
FROM EPLC_EM_NEGO A
INNER JOIN (select cs.*, 
                   row_number() over (partition by C_MAIN_REF) as rn
            from CPYT_SCHEDULE cs) b 
       ON a.C_MAIN_REF = b.C_MAIN_REF AND b.rn = 1
INNER JOIN EPLC_MASTER C
        ON a.C_MAIN_REF = c.C_MAIN_REF
WHERE a.CLS_DRWG_FLG = 'NO' 
  AND b.CPYT_UNPAID_FLAG = 'T' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:17:11.000

以下子选择对我有用，感谢所有答案和输入。

```
SELECT C.C_UNIT_CODE as BU,'EPLC' as PRODUCT, A.BENE_NM as CUSTOMER, A.C_MAIN_REF, A.C_TRX_REF, A.PRES_CCY, TO_CHAR(A.PRES_AMT) AS PRES_AMT, A.PRES_DT AS PRES_DATE, A.DOC_STAT, '' AS APPL_RESPONSE, A.SETTLE_STATUS as SETTLE_STATUS
FROM E_EM_NEGO A, EPLC_MASTER C
WHERE a.CLS_DRWG_FLG = 'NO' AND a.C_MAIN_REF = c.C_MAIN_REF
     AND a.C_MAIN_REF = (
     SELECT C_MAIN_REF FROM CPYT_SCHEDULE B
     WHERE B.CPYT_UNPAID_FLAG = 'T' AND b.C_MAIN_REF = a.C_MAIN_REF AND rownum=1) 
```

# objective-c - 从 C 转换为 Objective-c

> ID：14979040
> 
> 赞同：2
> 
> 时间：2013-02-20T11:44:46.743
> 
> 标签：objective-c, xcode

我应该如何在objective-c中编写这段代码：

```
kr = IOServiceAddMatchingNotification(gNotifyPort, 
       kIOFirstMatchNotification, matchingDict, RawDeviceAdded, NULL, &gRawAddedIter); 
```

我试过这个：

```
kr = IOServiceAddMatchingNotification(gNotifyPort, kIOFirstMatchNotification,
 matchingDict, @selector(RawDeviceAdded), NULL, &gRawAddedIter); 
```

函数看起来像：

```
(void)RawDeviceAdded:(void *)refCon iterator:(io_iterator_t)iterator
{
  .....
} 
```

我不确定它是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:56:25.367

简短的回答是：你不能直接这样做。

这是因为 IOKit 是一个 C-API，所以它需要的任何回调函数都必须是 C，而不是 Objective-C。

这并不是说你不能混合使用 C 和 Objective-C，并使用 C 回调函数来*蹦床*到你的 Objective-C 方法。这只是将类的引用获取到 C 回调函数的问题；在这种特殊情况下使用`refCon`.

SomeObjcClass.m：

```
// Objective-C method (note that refCon is not a parameter as that
// has no meaning in the Objective-C method)
-(void)RawDeviceAdded:(io_iterator_t)iterator
{
    // Do something
}

// C callback "trampoline" function
static void DeviceAdded(void *refCon, io_iterator_t iterator)
{
    SomeObjcClass *obj = (SomeObjcClass *)refCon;
    [obj RawDeviceAdded:iterator];
}

- (void)someMethod
{
    // Call C-API, using a C callback function as a trampoline
    kr = IOServiceAddMatchingNotification(gNotifyPort,
                                          kIOFirstMatchNotification,
                                          matchingDict,
                                          DeviceAdded,    // trampoline function
                                          self,           // refCon to trampoline
                                          &gAddedIter
                                          );        

} 
```

# c# - EPPlus 多次保存

> ID：14979041
> 
> 赞同：6
> 
> 时间：2013-02-20T11:44:48.147
> 
> 标签：c#, .net, export-to-excel, epplus

我正在使用 EPPlus 库`asp.net + C#`来创建`.xlsx`文件。我的文件可能包含几百万条记录，我`ExcelWorksheet`每 10 万条记录创建一个。问题是`40Mb`包含几乎`1.5M`记录了我占用多个 Gbs 主内存的 xlsx，然后我得到一个`OutOfMemoryException`，问题是：如何减少占用的内存`X Gb for 40M?`：-| 或`ExcelPackage`逐渐保存并释放内存，（似乎我不能保存超过一次，并且在整个包被处理之后）。

如果没有解决方案，任何人都可以介绍 EPPlus 的替代方案（具有几乎所有功能，如样式、工作表等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-30T08:42:25.600

这个问题似乎在最新版本的 EPPlus (4.0.x) 中得到解决

* * *

编辑：在 EPPlus 4.0.4 中添加指向改进内存管理的页面的参考链接。

[https://epplus.codeplex.com/releases/view/118053#ReviewsAnchor](https://epplus.codeplex.com/releases/view/118053#ReviewsAnchor) **用户对 4.x 版本与 3.x 版本相比内存性能改进的评论**。

[https://epplus.codeplex.com/wikipage?title=](https://epplus.codeplex.com/wikipage?title=Roadmap) 路线图 4.0 版：新的 cellstore 以提高插入、删除性能**和内存消耗**

此链接说明了如何确保优化加载大量单元格。

[http://epplus.codeplex.com/wikipage?title=FAQ&referringTitle=Documentation](http://epplus.codeplex.com/wikipage?title=FAQ&referringTitle=Documentation) 参考部分“我有很多数据要加载。我应该如何考虑才能获得最佳性能？”

另外，我今天亲自测试了 EPPlus 4.0.4，一次写出 150 万条记录，5 个数字行和 1 个 DateTime 行，Windows 任务管理器报告的峰值内存工作集仅为 711 MB。Windows 任务管理器显示的非分页池只有 75K 左右！当然，我不确定这些数字是否反映了内存占用的全部影响，但这些都是指示性的。输出的 Excel 文件大约 59MB（可能是我的列比您在原始帖子中提到的示例数据更多。）

**注意：当我尝试一次写入 7 列的 450 万条记录时，我确实收到了“OutOfMemoryException”！**

我的测试够严格吗？也许不是……不过对我来说效果很好。

* * *

但是，为了克服早期版本中的大内存需求，我可以想到的一种解决方法是为每 100K 记录拆分并保存一个 xlsx 文件。保存后，开始为接下来的 100K 记录使用新文件（具有适当的文件名计数器增量）。

在您的操作结束时，您最终将拥有 10 个包含 100K 记录的文件，例如总共 100 万条记录。

可能看起来有点 hack，但是，嘿，可能比重写代码库以使用其他库（免费或商业）更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-23T03:43:57.787

**多次保存将无济于事。**如果您尝试在导出过程中保存并关闭文件，然后调用垃圾回收，您将看到，消耗的内存将被释放。但是，如果您随后尝试再次打开文件，则该进程将消耗相同数量的内存。如果您尝试继续您的出口处理，您将再次陷入同样的​​问题。

**AFAIK 所有基于 Open XML SDK 的现代 .NET 库都在内存中执行处理**。EpPlus 也是如此。**唯一的方法是在硬盘上执行处理而不加载到内存中。**

# javascript - 循环相同的关键 JSON 节点

> ID：14979042
> 
> 赞同：0
> 
> 时间：2013-02-20T11:44:50.423
> 
> 标签：javascript, jsonp

我试图在 JSON 块中从用户那里吐出所有场景，但我错过了一些东西......

你想看看吗？

我也把它放在这里：http: [//jsfiddle.net/RBergante/2HwEH/](http://jsfiddle.net/RBergante/2HwEH/)

这是我所拥有的：

```
function scenes(){
    var allscenes = new Array();
    for (var i in data.users){
        allscenes = data.users[i].scenes.scene;
        document.write(allscenes[i] + "</br>");
    }
}

var data={"users":[
    {
        "firstName":"Rick",
        "lastName":"Villalobos",
        "pic":"http://ia.media-imdb.com/images/M/MV5BMTg2NTEyNTE3NF5BMl5BanBnXkFtZTcwNjY3NzM0OA@@._V1._SY209_CR1,0,140,209_.jpg",
        "scenes": {
            "scene": "In the Woods",
            "scene": "City lights",
            "scene": "Marnon Willis"                        
        },
        "joined": {
            "month":"January",
            "day":12,
            "year":2012
        }
    },
    {
        "firstName":"John",
        "lastName":"Jones",
        "pic":"http://ia.media-imdb.com/images/M/MV5BMTU4MDA1NDU1NV5BMl5BanBnXkFtZTcwMjYzNTYxOA@@._V1._SY209_CR0,0,140,209_.jpg",
        "joined": {
            "month":"April",
            "day":28,
            "year":2010
        }
    }   
]}

scenes(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:50:08.817

因为一个对象不能有多个相同键的属性。场景应该是一个数组：

```
"scenes": ["In the Woods", "City lights", "Marnon Willis"] 
```

[http://jsfiddle.net/2HwEH/1/](http://jsfiddle.net/2HwEH/1/)

*   此外，在遍历数组时，不要使用它，`for-in`因为它还会遍历数组属性，而不仅仅是索引内容。使用`for`或`while`代替。

*   此外，您不应该使用`document.write()`，尤其是在页面完成加载之后（例如，稍后在函数中调用）。

# c# - 从批处理文件安装 IIS - 获取错误 Windows 包管理器

> ID：14979048
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:08.690
> 
> 标签：c#, windows, iis, batch-file, package-managers

我尝试从批处理文件安装 IIS 角色。

如果我通过单击它或从命令行直接调用我的批处理文件，**一切正常**。

但是**如果我从我的程序“C#”中调用，我会看到一个错误窗口**（见下文）。

![在此处输入图像描述](../Images/ac7df135d46d71012e658058adafde4e.png)

这是我从“C#”程序中调用“批处理”文件的代码。

```
string path = myPathWork.FullName + "\\install\\installIIS.bat";
System.Diagnostics.Process.Start(path); 
```

有人你有想法吗？我觉得这是由于权限，但我执行程序以及管理员。非常感谢

在这里我的安装 iis 的批处理文件（如果我从命令行执行它一切正常）：

```
start /w pkgmgr /l:log.etw /iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;
IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;IIS-ASP;IIS-CGI;IIS-ISAPIExtensions;IIS-ISAPIFilter;IIS-ServerSideIncludes;IIS-HealthAndDiagnostics;IIS-HttpLogging;IIS-LoggingLibraries;
IIS-RequestMonitor;IIS-HttpTracing;IIS-CustomLogging;IIS-Security;IIS-BasicAuthentication;IIS-URLAuthorization;IIS-RequestFiltering;IIS-IPSecurity;IIS-Performance;IIS-HttpCompressionStatic;
IIS-HttpCompressionDynamic;IIS-WebServerManagementTools;IIS-ManagementConsole;IIS-ManagementScriptingTools;IIS-ManagementService;IIS-IIS6ManagementCompatibility;
IIS-Metabase;IIS-WMICompatibility;IIS-LegacyScripts;IIS-LegacySnapIn;WAS-WindowsActivationService;WAS-ProcessModel;WAS-NetFxEnvironment;WAS-ConfigurationAPI 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:19:06.187

我不明白为什么，但我只从我的批处理文件中删除了这一行，一切正常

```
/l:log.etw 
```

# c#-4.0 - 解决多重继承（对于预煮类）

> ID：14979051
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:18.633
> 
> 标签：c#-4.0, multiple-inheritance, proxy-classes, context-bound

**我需要**的是：一个有两个父母的班级，他们是`ContextBoundObject`另一个班级。
**为什么**：我需要访问`ContextBoundOject`来记录方法调用。
**作曲有效吗？**截至目前，否（除其他外，无法识别类型）。
**还有其他方法可以做到这一点吗？**是的，但不是那么自动化并且没有第三方组件（也许 T4 可以做到，但我不是专家）。

## 更详细的解释。

我需要扩展 System 类（其中一些已经`MarshalByRefObject`（它是 的父级`ContextBoundObject`）作为父级，例如`ServiceBase`and `FileSystemWatcher`，而有些没有，例如`Exception`and `Timer`）来访问框架的一些内部工作，所以我可以记录方法调用（现在；将来可能会改变）。

如果我使用这种方式，我只需向要记录的对象添加一个类名，而不是向每个方法添加记录调用，但显然我不能这样做：

```
public class MyService:ServiceBase,ContextBoundObject,IDisposable{
    public MyService(){}
    public Dispose(){}
} 
```

所以可以尝试通常的解决方案，接口，但是如果我调用 Run 如下：

```
ServiceBase.Run(new MyService()); 
```

使用假设的接口 IServiceBase 它不起作用，因为类型 ServiceBase 不能转换为 IServiceBase - 它不继承任何接口。除了例外，问题更严重：`throw`只接受从`Exception`.
反过来，产生一个 IContextBoundObject 接口，似乎也不起作用：日志记录机制不能通过方法工作，所以我不需要实现任何，只需要一个属性和一些小的内部类（并且继承自`ContextBoundObject`，而不是甚至从`MarshalByRefObject`，元数据实际上是相同的）。

从我所看到的，扩展 from`ContextBoundObject`将扩展类放在一个`Proxy`（可能是因为在这种方式中方法调用使用 SyncProcessMessage(IMessage) 并且因此可以被拦截和记录），也许有一种方法可以在没有继承的情况下做到这一点，或者可能有是可用于带有日志调用的周围方法（如 T4 文本模板）的预编译技术或后编译技术，我不知道。

如果有人想看看这个，我在我的程序中使用了自定义版本的 MSTestExtentions 来记录（方法调用的）。任何想法表示赞赏。可能需要更多解释，请问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:45:52.433

通过代理进行试验，我发现了一种明显记录显式调用的方法。
本质上，我`RealProxy`在 msdn 中创建了一个类似的示例，然后获取`TransparentProxy`并将其用作普通对象。
日志记录是在自定义类`Invoke`中覆盖的方法中完成的。`RealProxy`

```
static void Main(){
...
    var ServiceClassProxy=new ServiceRealProxy(typeof(AServiceBaseClass),new object[]{/*args*/});
    aServiceInstance=(AServiceBaseClass)ServiceClassProxy.GetTransparentProxy();
    ServiceBase.Run(aServiceInstance);
...
} 
```

在代理类中，`Invoke`将这样做：

```
class ServiceRealProxy:RealProxy{
...
    [SecurityPermissionAttribute(SecurityAction.LinkDemand, Flags=SecurityPermissionFlag.Infrastructure)]
    public override IMessage Invoke(IMessage myIMessage){
        // remember to set the "__Uri" property you get in the constructor
    ...
        /* logging before */
        myReturnMessage = ChannelServices.SyncDispatchMessage(myIMessage);
        /* logging after */
    ...
        return myReturnMessage;

        // it could be useful making a switch for all the derived types from IMessage; I see 18 of them, from
        // System.Runtime.Remoting.Messaging.ConstructionCall
        // ... to
        // System.Runtime.Remoting.Messaging.TransitionCall
    }
...
} 
```

我仍然需要进行广泛的调查，但是发生了日志记录。这不是我最初问题的答案，因为我仍然需要在不继承自`MarshalByRefObject`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:49:11.357

记录方法调用通常使用属性来注释要启用记录的类或方法。这称为[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。

为此，您需要一个软件来理解这些属性并通过将必要的代码添加到已注释的方法/类来对您的程序集进行后处理。

对于 C#，存在[PostSharp](http://www.sharpcrafters.com/postsharp/features)。请参阅[此处](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)了解介绍。

# java - java运行环境存档

> ID：14979052
> 
> 赞同：1
> 
> 时间：2013-02-20T11:45:18.957
> 
> 标签：java

我在哪里可以获取以前的 jre 发行版？

我找到了这个地方：[http ://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html](http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html)

但它似乎错过了几个发行版：更新 8、更新 12。

我还检查了[http://java.com/ru/download/windows_xpi.jsp](http://java.com/ru/download/windows_xpi.jsp)并且最新更新是 15，那么为什么存档不包含更新 14？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:08:36.097

因为他们从未被释放。[在此处](http://www.oracle.com/technetwork/java/javase/7u-relnotes-515228.html)或[此处](http://en.wikipedia.org/wiki/Java_version_history#Java_7_updates)查看发布历史。

# python - 字典理解中的动态 if 语句

> ID：14979057
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:29.080
> 
> 标签：python, if-statement, dictionary-comprehension

我正在使用字典理解来获取键值对的字典，其中键是 mp3 文件的名称，值是文件的路径。

我愿意：

```
for root, dirs, files in os.walk(rootDir, topdown='true'):
    source_files = {filename:root for filename in files if os.path.splitext(filename)[1].lower() == '.mp3'}
    # more code
    # ...
    # ... 
```

我对部件中的源文件做了更多的逻辑`more code`。现在，我想对任何图片（即 .gif、.jpeg 等）重复此逻辑

所以我可以这样做：

```
for root, dirs, files in os.walk(rootDir, topdown='true'):
    source_files = {filename:root for filename in files if os.path.splitext(filename)[1].lower() == '.jpeg' or os.path.splitext(filename)[1].lower() == '.gif'} 
```

然后将该`more code`部分包装成一个函数并为图片文件调用它。但是，我想知道我是否可以在字典理解中使 if 表达式动态化，然后只传递一个 if 表达式用于音乐文件，另一个 if 表达式用于图片文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:46:54.730

我认为您正在寻找该[`fnmatch.fnmatch`](http://docs.python.org/2/library/fnmatch.html#fnmatch.fnmatch)功能，甚至[`fnmatch.filter()`](http://docs.python.org/2/library/fnmatch.html#fnmatch.filter)

```
from fnmatch import filter

for root, dirs, files in os.walk(rootDir):
    source_files = {filename: root for filename in filter(files, '*.jpg')} 
```

但是如果您需要匹配多个扩展名，使用起来会容易得多[`str.endswith()`](http://docs.python.org/2/library/stdtypes.html#str.endswith)：

```
for root, dirs, files in os.walk(rootDir):
    source_files = {filename: root for filename in files if filename.endswith(('.jpg', '.png', '.gif'))} 
```

`.endswith()`然后，您可以使用任何字符串或扩展元组：

```
mp3s = '.mp3'
images = ('.jpg', '.png', '.gif') 
```

然后使用：

```
extensions = images

for root, dirs, files in os.walk(rootDir):
    source_files = {filename: root for filename in files if filename.endswith(extensions)} 
```

我不确定你为什么在这里使用字典理解；循环的每次迭代，`root`将是恒定的。你也可以这样做：

```
for root, dirs, files in os.walk(rootDir):
    source_files = dict.fromkeys(filter(files, '*.jpg'), root) 
```

或使用

```
for root, dirs, files in os.walk(rootDir):
    source_files = dict.fromkeys([f for f in files if f.endswith(extensions)], root) 
```

如果您想在嵌套目录结构中创建*所有*文件的字典，则需要将 dict 理解*移出*并将`os.walk()`调用集成到 dict 理解中：

```
source_files = {filename: root 
    for root, dirs, files in os.walk(rootDir)
    for filename in files if f.endswith(extensions)} 
```

我删除了所有的`topdown='true'`行；默认值是`topdown=True`无论如何（注意：python 布尔值是`True`and `False`，而不是字符串。它恰好起作用，因为`'true'`作为字符串是“真实的”，它在布尔上下文中被认为是 True，因为它是非空的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:48:17.580

做这个：

```
def a_func(extension):
    # some code
    for root, dirs, files in os.walk(rootDir, topdown='true'):
        source_files = {filename:root for filename in files if os.path.splitext(filename)[1].lower() == extension}
        # more code
        # ...
        # ... 
```

满足您的需求？

# listview - yii 中的 Clistview 未定义变量 dataProvider

> ID：14979058
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:28.973
> 
> 标签：listview, yii, dataprovider

我的**index.php**需要一个列表视图。这没有任何模型，因此我使用**CSqlDataProvider**来声明数据提供者并将其从控制器呈现给索引。这是我的控制器动作...

```
public function actionIndex()
{
        $sql="select * from Ads";
        $totalItemCount=20;
        $dataProvider = new CSqlDataProvider($sql, array(
                'totalItemCount' => $totalItemCount,
                                )); 

        $this->render('index',array('dataProvider'=>$dataProvider));
} 
```

这是我的 index.php 代码....

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'index',
    'id'=>'list',
    )); 
```

我收到一个错误

> “未定义的变量：dataProvider”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:51:01.947

你`itemView`不能`index`。它必须是一个局部视图，它将呈现列表中的项目。`$dataProvider`在呈现列表时可用，但在呈现项目时不可用，因此出现错误。更多信息[http://www.yiiframework.com/doc/api/1.1/CListView#itemView-detail](http://www.yiiframework.com/doc/api/1.1/CListView#itemView-detail)

# html - th 没有缩进一个单元格

> ID：14979061
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:32.480
> 
> 标签：html, css

是否可以不缩进 th 中的单元格？
[http://jsfiddle.net/kWTte/1/](http://jsfiddle.net/kWTte/1/)

HTML

```
<table>
    <th>
        <td></td>
        <td></td>
    </th>
    <tr>
        <td></td>
        <td></td>
    </tr>   
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:49:08.750

您可以将其`th`视为 , 的等价物`td`，但用于表的标题。所以`th`s 应该包含在一个`tr`元素中。

正确的形式是：

```
<table>
    <tr>
        <th>Header one</th>
        <th>Header two</th>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>   
</table> 
```

如果您需要包装表头，您可以使用`thead`. 同样，您可以将`tbody`其用于表的主体（请注意，同一个表中可以有多个 tbody）。

# javascript - 从jquery中的父母列表中交换孩子的订单

> ID：14979067
> 
> 赞同：2
> 
> 时间：2013-02-20T11:45:55.430
> 
> 标签：javascript, jquery

```
 <div class="parent">
      <div class="child1"></div>
      <div class="child2"></div>
    </div>
    <div class="parent">
      <div class="child1"></div>
      <div class="child2"></div>
    </div>
    <div class="parent">
      <div class="child1"></div>
      <div class="child2"></div>
    </div>
    <div class="parent">
      <div class="child1"></div>
      <div class="child2"></div>
    </div> 
```

交换child1和child2的顺序的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:02:51.980

试试这个：- [http://jsfiddle.net/adiioo7/Wyceb/](http://jsfiddle.net/adiioo7/Wyceb/)

```
$(function(){
    $(".parent .child1").each(function(){
        $(this).parent().append($(this).clone());
        $(this).remove();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:57:29.683

```
<script type="text/javascript">

$(document).ready(function(){
    $('.parent').each(function(index,parentElement){
        $($(parentElement).children()[1]).insertBefore($($(parentElement).children()[0]));
    });
});
</script> 
```

# iphone - iTunes 11.0.1 中没有应用程序文件夹

> ID：14979068
> 
> 赞同：0
> 
> 时间：2013-02-20T11:45:57.583
> 
> 标签：iphone, itunes

我开发了 ipad 应用程序。现在我想在我的 ipad 中测试它。我已经越狱了ipad。现在我必须将该应用程序拖到应用程序文件夹内的 iTunes 中。但不幸的是，我的 iTunes 中没有应用程序文件夹。如何将其移动到我的 ipad 以测试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:47:37.243

我找到了它的解决方案。我需要转到 iTunes 首选项。确保“应用程序”被选中”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:53:53.547

iTunes 11.0.1 中有应用程序部分。检查下图：

![在此处输入图像描述](../Images/5359d218026b70ecc059ca2341397ea9.png)

这就是它的外观。

![在此处输入图像描述](../Images/ec52c9f0e13a01307346b8f49e901ba5.png)

# php - 表达式引擎 PHP 调用

> ID：14979072
> 
> 赞同：0
> 
> 时间：2013-02-20T11:46:02.030
> 
> 标签：php, tags, categories, expressionengine

我编写了以下 PHP 函数来根据段 3 URL 返回当前类别。

```
<?php
 $this->EE =& get_instance();
 $seg3 = $this->EE->uri->segment(3);
 $categoriess = getCategory($seg3);

function getCategory($string)
   {
     switch ($string)
       {
         case "test1": return '16';
         case "test2": return '52';
         case "test3": return '18';
         case "test4": return '29';
         case "test5": return '37';
       }
     return '11';
   }
 ?>
 <?php echo $categoriess; ?> 
```

好吧，该函数完成了这项工作并返回了正确的数字。问题在于调用类别标签中返回的数字。

```
{exp:channel:entries channel=“news” dynamic=“no” category=”&lt;?php echo $categoriess; ?>” orderby=“entry_date” disable=“member_data|trackbacks” sort=“desc” limit=“5”} 
```

一切对我来说看起来都是正确的，但它只是不起作用......我非常感谢你的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T15:02:35.330

**检查您的解析顺序：**在模板首选项中将“PHP Parsing Stage”设置为“Input”。

默认设置为“输出”，如果您想*从*EE 短代码中获取值并将其作为变量可用于 PHP，则该设置非常有效。

但在这种情况下，您想在 PHP 中运行一个函数，然后将返回“馈送”*给*EE。

因此，在这种情况下，EE 将从 PHP 获取“输入”，这意味着该**特定模板（不是一般首选项或其他任何地方）的****Preferences**下的**PHP Parsing Stage**必须设置为**Input**。

 ******我现在看到这是一个老问题，但我希望无论如何有人会使用这个答案。如果我想先检查解析顺序，我只是浪费了一整天的时间来做一些不到 5 分钟的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:56:09.647

```
<?php
    function getCategory($string)
    {
         $data = array(
           "test1" => 16,
           "test2" => 52,
           "test3" => 18,
           "test4" => 29,
           "test5" => 37
         ) ;
         return (isset($data[$string])) ? $data[$string] : 11 ;
     }
   $this->EE =& get_instance();
   $seg3 = $this->EE->uri->segment(3);
   $categoriess = getCategory($seg3);
?> 
```******

# html - 网址是什么意思

> ID：14979078
> 
> 赞同：1
> 
> 时间：2013-02-20T11:46:26.523
> 
> 标签：html, url, web-applications

以下 URL 的路径中有一个 *。它有特殊用途吗？

```
<a href="news/a/h1/t/*http://tw.news.yahoo.com/%E6%B2%B9%E5%83%B9%E9%AB%98-%E7%B6%93%E6%BF%9F%E9%83%A8%E6%93%AC%E6%94%B9-%E5%85%AC%E5%BC%8F-%E5%8D%BB%E6%9C%AA%E5%BF%85%E4%BE%BF%E5%AE%9C-062658903.html" title="..." hp="news_a_1_1t">...</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:51:19.607

最可能的解释是使用 javascript 进行了某种解析。你是在哪里找到那个东西的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:55:05.197

如果我是正确的，它被称为 URLmapping，它使用某种框架来动态填充星号

# objective-c - Objective-C 上的 Web 正则表达式验证

> ID：14979079
> 
> 赞同：0
> 
> 时间：2013-02-20T11:46:30.937
> 
> 标签：objective-c, regex

我有一些用于表单字段验证的正则表达式。

我有一个单元测试来定义预期的结果

```
NSArray *suiteWebs = [NSArray arrayWithObjects:
                      @"http://webapp.stackoverflow.net",
                      @"http://webapp.stackoverflow.net/info.php",
                      @"http://www.stackoverflow.net",
                      @"http://www.stackoverflow.net/",
                      @"https://webapp.stackoverflow.net",
                      @"https://webapp.stackoverflow.net/info.php",
                      @"https://www.stackoverflow.net",
                      @"https://www.stackoverflow.net/"
                      @"webapp.stackoverflow.net",
                      @"webapp.stackoverflow.net/info.php",
                      @"www.stackoverflow.net",
                      @"www.stackoverflow.net/",
                      @"www.stack-overflow.com",
                      @"www.stackoverflow_.com",
                      @"www.stackover_flow.com",
                      nil];

NSArray *falseSuiteWebs = [NSArray arrayWithObjects:
                           @"ftp://webapp.stackoverflow.net",
                           @"http:/www.stackoverflow.net",
                           @"ftps://webapp.stackoverflow.net",
                           @"https:/www.stackoverflow.net",
                           nil];

for (NSString *web in suiteWebs) {
    NSLog(@"Validating web %@", web);
    STAssertTrue([TSAddEntityForm validateWeb:web withPatter:currentRegex], [NSString stringWithFormat:@"currentRegex web %@", web]);
}

for (NSString *web in falseSuiteWebs) {
    NSLog(@"Validating web %@", web);
    STAssertFalse([TSAddEntityForm validateWeb:web withPatter:currentRegex], [NSString stringWithFormat:@"currentRegex web %@", web]);
} 
```

我的实际正则表达式是下一个：

```
NSString *webRegex4 = @"((http|https)://){0,1}((\\w)*|([0-9]*)|([\\-|_])*)+([\\.|/]((\\w)*|([0-9]*)|([\\-|_])*))+"; 
```

我的问题与域有关 - 我的正则表达式不验证它。例如 url www.stack-overflow.com 被拒绝

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:01:18.713

在你的情况下，这个正则表达式可能会更好（它并不理想，但适用于上述合适和坏的样本）：

```
(http(s)?://)?[\w-]+(\.[\w-]+)*\.\w{2,6}[/\w.-]* 
```

它可以从 http:// 或 https:// 开始，

`[\w-]+(\.[\w-]+)*\.\w{2,6}`- 描述域

`[/\w.-]*`- 文件夹和文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:37:17.247

一般来说，复杂的正则表达式是傻瓜的黄金。对多个正则表达式使用多次传递。独立验证 URL 的组件。

复杂的正则表达式可能非常强大，但也可以将您描绘成一个脆弱的角落，其中包含一些像 URL 一样开放式的东西。

此外，如果您使用的是 Objective-C，很容易使用 NSURL 提供的一些工具来分解事物。NSURL 也会让你很好地了解应该查看 URL 的哪些组件。通过使用 NSURL 方法来提取 URL 的组件，您可以更仔细地将正则表达式应用于每个组件。

CFURL 同样强大。

# c# - 如何使用 Windows 服务 C# 向 Excel 单元格插入值

> ID：14979080
> 
> 赞同：0
> 
> 时间：2013-02-20T11:46:41.983
> 
> 标签：c#, windows, windows-services, excel-2007

我试图将 8 个字符串值传递到已经存在的 excel 电子表格中的一行，然后能够使用 C# 以编程方式选择该行。我正在使用带有文件系统观察程序的 Windows 服务，该文件系统观察程序在添加文件后不断监视要添加的文件的目录，它需要将文件内容提取到对象属性中，然后将它们写入 Excel 工作表。有没有人知道如何做到这一点而无需支付任何额外的 Excel 扩展？我正在使用 excel 2007 和 Visual Studio 2012。任何帮助将不胜感激。

谢谢

伯纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:21:26.517

嗨，我实际上在那里工作。我使用以下代码写入现有 Excel 工作表中的特定单元格：

```
 string path = @"C:\ProjectTesting\TwsDde.xlsm";

        oXL = new Microsoft.Office.Interop.Excel.Application();

        oXL.Visible = true;

        oXL.DisplayAlerts = false;

        mWorkBook = oXL.Workbooks.Open(path, 0, false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);

        //Get all the sheets in the workbook

        mWorkSheets = mWorkBook.Worksheets;

        //Get the allready exists sheet

        mWSheet1 = (Microsoft.Office.Interop.Excel.Worksheet)mWorkSheets.get_Item("Basic Orders");

        Microsoft.Office.Interop.Excel.Range range= mWSheet1.UsedRange;

        mWSheet1.Cells[12, 1] = "bla bla bla"; 
```

此代码取自这篇文章，该文章还继续保存 excel 表：

[http://rmanimaran.wordpress.com/2011/02/15/programmatically-insert-to-existing-excel-file-using-c/](http://rmanimaran.wordpress.com/2011/02/15/programmatically-insert-to-existing-excel-file-using-c/)

我希望这对其他人有帮助。

谢谢

伯纳德

# android - Android - 如何在 asyncTask 中使用 JSON 解析器设置 gridview[Detail Fragment] 的首次显示

> ID：14979086
> 
> 赞同：0
> 
> 时间：2013-02-20T11:47:01.717
> 
> 标签：android, json, arraylist, android-asynctask

如何将 JSON 数据从 AsyncTask 解析到 Detail Fragment 中的自定义 Gridview？
我有`**Integer[]** picture`， 在 GridView 我有 1`**String[]** menu`和2`**String[]** price`
`ImageView` `TextView`

 `````
 protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(mContext);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Menu: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);
            System.out.println(success);
            if (success == 1) {
                // products found
                // Getting Array of Products
                menuresto = json.getJSONArray(TAG_MENU);

                // looping through All Products
                for (int i = 0; i < menuresto.length(); i++) {
                    JSONObject c = menuresto.getJSONObject(i);

                    // Storing each json item in variable
                    String name = c.getString(TAG_NAME);
                    String price = c.getString(TAG_PRICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_NAME, name);
                    map.put(TAG_PRICE, price);

                    // adding HashList to ArrayList
                    menuList.add(map);
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * How to parsed JSON data into GridView
                 * */

            }
        });

    } 
````  `我应该工作`**GetView**`吗？

**编辑**
适配器的代码完成
`public class MyAdapter extends BaseAdapter {`

 ````
Context mContext;
private ProgressDialog pDialog;
// creating json parser object
JSONParser jParser = new JSONParser();
ArrayList<HashMap<String, String>> menuList;

static final String TAG_SUCCESS = "success";
static final String TAG_MENU = "menu";
static final String TAG_MID = "mid";
static final String TAG_NAME = "name";
static final String TAG_PICT = "picture";
static final String TAG_PRICE = "price";

// url to get all menu list
private static String url = "http://10.0.2.2/menu/food/get_all_products.php";

// menu JSONArray
JSONArray menuresto = null;

public Integer[] menupict = { R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher };

private LayoutInflater mInflater;

public MyAdapter(Context c) {

    mContext = c;
    mInflater = LayoutInflater.from(c);
    // array menu
    menuList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return menuList.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return menuList.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    // Building Parameters
    // System.out.println("MyAdapter.getView()");
    ViewHolder holder = null;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.gviewfill, parent, false);
        holder = new ViewHolder();
        /*
         * holder.ImgView = new ImageView(mContext);
         * holder.ImgView.setScaleType(ImageView.ScaleType.CENTER_CROP);
         * 
         * holder.ImgView = (ImageView) convertView
         * .findViewById(R.id.iv_menu_image);
         */
        holder.txtName = (TextView) convertView
                .findViewById(R.id.tv_menu_name);
        holder.price = (TextView) convertView
                .findViewById(R.id.tv_menu_price);

        if (position == 0) {
            convertView.setTag(holder);
        }
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    // holder.ImgView.setImageResource(menupict[position]);
    holder.price.setText("Rp. " + menuList.get(position).get(TAG_PRICE));
    holder.txtName.setText(menuList.get(position).get(TAG_NAME));

    return convertView;
}

static class ViewHolder {
    ImageView ImgView;
    TextView txtName;
    TextView price;
}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(mContext);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Menu: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);
            System.out.println(success);
            if (success == 1) {
                // products found
                // Getting Array of Products
                menuresto = json.getJSONArray(TAG_MENU);

                // looping through All Products
                for (int i = 0; i < menuresto.length(); i++) {
                    JSONObject c = menuresto.getJSONObject(i);

                    // Storing each json item in variable
                    String name = c.getString(TAG_NAME);
                    String price = c.getString(TAG_PRICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_NAME, name);
                    map.put(TAG_PRICE, price);

                    // adding HashList to ArrayList
                    menuList.add(map);
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */

            }
        });

    }

} 
```` 

`}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:50:06.330

> 如何将 JSON 数据解析为 GridView

=> 你只需要创建一个适配器来在 GridView 中显示数据。因为您已经在`doInBackground()`AsyncTask 中准备好了 ArrayList（就 menuList 而言）。

现在，这取决于您希望如何在 GridView 中显示数据，我的意思是您希望在 GridView 中显示的项目布局类型。``

# iphone - CLLocationManager 始终定位伦敦

> ID：14979087
> 
> 赞同：1
> 
> 时间：2013-02-20T11:47:02.357
> 
> 标签：iphone, ios, objective-c

我有以下代码行来定位我的位置，但无论我在哪里，我总是得到相同的位置：

```
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
[locationManager startUpdatingLocation];

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray    *)locations {
    CLLocation *location = [locations lastObject];
    self.lati = [NSString stringWithFormat:@"%f",location.coordinate.latitude];
    self.longi = [NSString stringWithFormat:@"%f",location.coordinate.longitude];

    [locationManager stopUpdatingLocation];
    locationManager.delegate = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:53:58.123

使用此委托方法代替您的委托方法。它会为你工作。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    myLatitude = newLocation.coordinate.latitude;
    myLongitude = newLocation.coordinate.longitude;

    NSLog(@"LAT AND LON IS %f %f",myLatitude,myLongitude);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:54:34.257

```
in .h write

<CLLocationManagerDelegate>

then this also

CLGeocoder *geocoder;
CLLocationManager *locationManager;        

then in .m

locationManager = [[CLLocationManager alloc] init] ;

locationManager.delegate = self;
[CLLocationManager locationServicesEnabled];
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.distanceFilter = kCLHeadingFilterNone;
[locationManager startUpdatingLocation];

and then implement its delegates

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation(CLLocation*)newLocation fromLocation:(CLLocation *)oldLocation
{
[manager stopUpdatingLocation];

userCoordinate=newLocation.coordinate;

[[NSUserDefaults standardUserDefaults] setFloat:userCoordinate.latitude
                                         forKey:@"userLat"];
[[NSUserDefaults standardUserDefaults] setFloat:userCoordinate.longitude
                                         forKey:@"userLong"];

CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
[geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
    for (CLPlacemark * placemark in placemarks)
    {
        NSString *cityName = @"";
        NSString *countryName = @"";
        cityName = [placemark.addressDictionary valueForKey:@"City"];
        countryName = [placemark.addressDictionary valueForKey:@"Country"];

        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        [prefs setObject:cityName forKey:@"CityName"];
        [prefs setObject:countryName forKey:@"CountryName"];
    }
}];

[manager stopUpdatingLocation];
}

-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
[manager stopUpdatingLocation];

if(error.code == kCLErrorDenied)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" message:@"You          have to select \"Allow\" for current location." delegate:self cancelButtonTitle:@"Ok"
                                          otherButtonTitles: nil];
    alert.tag = 888;
    [alert show];
}

[[NSUserDefaults standardUserDefaults] setFloat:0.0
                                         forKey:@"userLat"];
[[NSUserDefaults standardUserDefaults] setFloat:0.0
                                         forKey:@"userLong"];

[manager stopUpdatingLocation];
} 
```

# c# - asp.net 单元测试：将测试标记为不完整

> ID：14979093
> 
> 赞同：2
> 
> 时间：2013-02-20T11:47:14.213
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, visual-studio, unit-testing

我想对一个 asp.net MVC web 应用程序进行单元测试。我们没有使用 TDD（嗯，还没有）。

在触及一种方法后，我想将相应的单元测试标记为不完整或其他东西，以便其他团队成员知道他们必须完成它。

有没有可能这样做？

我们在 Visual Studio 2010 中使用内置的单元测试可能性。

提前致谢。迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:54:45.260

您是否希望在进一步处理测试之前不实际运行测试？如果是这样，`[Ignore]`您可以将一个属性添加到每个测试中，如（对于 MSTest）：

```
[TestMethod, Ignore]
public void TestThatNeedsToBeCompleted()
{
} 
```

如果您使用的是 NUnit，您可以在 Ignore 属性中添加一个原因参数来解释为什么忽略测试。我认为这在 MSTest 中不可用，但不要引用我的话:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:58:08.023

您可以简单地使用 assertion 或 throw 使测试失败`NotImplementedException`。你会发现这些测试都不行。

或者最终在需要时使用IgnoreAttribute[启用](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.ignoreattribute%28v=vs.80%29.aspx)[/禁用](http://msdn.microsoft.com/en-us/library/ms182457%28v=vs.80%29.aspx#UsingIgnoreAttribute)测试。

```
[Ignore]
[TestMethod]
public void TestMethod { } 
```

# php - 由链接单击控制的 php 会话变量

> ID：14979095
> 
> 赞同：0
> 
> 时间：2013-02-20T11:47:16.037
> 
> 标签：php, jquery, session-variables

```
while ($row = mysql_fetch_array($result)) 
{
echo '<a href="/somepage.php">'.$row['somevalue'].'</a>';
} 
```

现在，我需要`$_SESSION['somevalue']`根据单击的链接打开一个。

怎么可能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:51:21.550

首先，将所需的值传递给页面。

```
while ($row = mysql_fetch_array($result)) 
{
<a href="/somepage.php?v=' . $row['somevalue'] . '">'.$row['somevalue'].'</a>';
} 
```

在`sompage.php`

```
$val = $_GET['v'];
// now, open $_SESSION[$val]; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:51:50.263

您可以使用链接发送 get 参数：

```
while ($row = mysql_fetch_array($result)) 
{
    echo '<a href="/somepage.php?sessvalue='.$row['someothervalue'].'">'.$row['somevalue'].'</a>';
} 
```

在 somepage.php 你可以检查变量

```
if ($_GET['sessvalue'] == 'somevalue') {
    // do something
}
else {
    // do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:57:30.727

然后尝试会话变量的动态名称，即

```
<?php
session_start();
$i=0;
while ($row = mysql_fetch_array($result)) 
{
echo '<a href="/somepage.php">'.$row['somevalue'].'</a>';
$i++;
$_SESSION[$i]=$row['somevalue'];

}
?> 
```

希望能帮助到你

# jquery-ui - 通过 jQuery 中的代码更新复选框状态的视觉提示

> ID：14979102
> 
> 赞同：0
> 
> 时间：2013-02-20T11:47:23.963
> 
> 标签：jquery-ui

我的页面上有以下 HTML：

```
 <input id="chkIncludeCA3" type="checkbox" /><label for="chkIncludeCA3">Category 3:</label> 
```

在我的代码页上，有以下脚本：

```
$('#chkIncludeCA3').prop('checked', true); 
```

有人可以向我解释我如何更新标签的视觉状态以显示复选框确实被选中吗？

*编辑*

感谢 Christophe Roussy 的正确指点，发现以下作品完美：

```
$('#chkIncludeCA3').prop('checked', true); $("label[for='chkIncludeCA3']").addClass('ui-state-active'); 
```

如果有人知道是否有更官方的方式，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:04:45.210

你的意思是这样的事情来获得标签？！

```
$("label[for='chkIncludeCA3']") 
```

# c# - 在单独的应用程序中针对接口进行编码

> ID：14979103
> 
> 赞同：0
> 
> 时间：2013-02-20T11:47:27.700
> 
> 标签：c#

我编写了一个类库，其中包含一个类和该类的接口。

目前类是私有的，接口是公共的。

如果我将类库的 dll 导入控制台应用程序，我知道我需要像这样实例化接口：

```
IInterface iinterface = new Class(); 
```

但要实现这一点，该类也必须是可公开访问的。我理解您为什么要针对接口而不是类进行编码，但是我应该让第三方访问类和接口吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:49:21.573

您的界面实际上提供了一个合同，对于第三方库，您希望用户**针对您的界面进行编码**而不使用您的类。如果您希望第三方用户可以访问您的课程，那么您应该将其公开。

# css - CSS过渡不平滑

> ID：14979109
> 
> 赞同：4
> 
> 时间：2013-02-20T11:47:48.143
> 
> 标签：css

再会

我在悬停选择器上使用 CSS 过渡效果，但过渡的第二部分不平滑 - 当我将鼠标悬停在元素上时，它会平滑移动。当我退出悬停时，元素不优雅地回落（不平滑/定时）。我如何解决它？

```
#login{
    margin-top: -10px;
    margin-left: 10px;
    display: inline-block;
}

#login:hover {
     margin-top: 0px;
     -webkit-transition: margin-top 0.2s ease-out;
     -moz-transition: margin-top 0.2s ease-out;
     -o-transition: margin-top 0.2s ease-out;
     -ms-transition: margin-top 0.2s ease-out;
 }
#login a{
    background: #003399;
    font-size: 38px;
    color: #fff;
}
```

```
<div id="login" class="span1"> 
  <a href="#">login</a>
</div>
```

注意：查看我的[JSFIDDLE](http://jsfiddle.net/pgdhM/7/)以了解我的意思

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:55:13.643

一旦你离开 div， :hover 伪类就不再满足。因此 div 失去了过渡属性。

只需将转换块从 #login:hover 移动到 #login 即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:51:38.607

您还必须定义过渡到**正常状态**。

**编辑：**就像拉斐尔所说的，只需要在**正常状态下定义过渡效果**

```
#login{
    margin-top: -10px;
    margin-left: 10px;
    display: inline-block;
    -webkit-transition: margin-top 0.2s ease-out;
       -moz-transition: margin-top 0.2s ease-out;
         -o-transition: margin-top 0.2s ease-out;
        -ms-transition: margin-top 0.2s ease-out;
}

#login:hover {
     margin-top: 0px;
}

#login a{
    background: #003399;
    font-size: 38px;
    color: #fff;
}
```

```
<div id="login" class="span1"> 
  <a href="#">login</a>
</div>
```

[演示](http://jsfiddle.net/pgdhM/11/)

# php - php中的异步套接字连接

> ID：14979111
> 
> 赞同：0
> 
> 时间：2013-02-20T11:47:59.097
> 
> 标签：php, sockets, asynchronous, while-loop

我正在尝试在 php 中编写异步套接字侦听器代码。但是侦听器响应仅针对第一个请求和其他请求的响应，它只能接收没有响应的数据包（我正在使用嗅探器检查）而且我正在计算有多少时间循环处于活动状态，并且循环仅对第一个请求处于活动状态...... ..我会展示我的代码：

```
addr = '192.168.0.117';
$port = 7878;
$sock = socket_create(AF_INET, SOCK_STREAM, 0);
socket_bind($sock, $addr, $port) or die('Could not bind to address');
socket_listen($sock);

$null = NULL;
$clients = Array();
$cc = 0; // loop counter

while(true){

    echo $cc."<br>";
    $cc = $cc +1;

    $read[0] = $sock;

    $ready = socket_select($read,$null,$null,$null);    
    $client = socket_accept($sock);
    $input = socket_read($client, 312); 

    echo $input;

    if($input == "exit"){
        socket_close($client);
        socket_close($sock);
        return false;
    }

    $output = 0x11;
    socket_write($client,$output);
    $input = "";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:05:41.353

可能是您在第一个客户端发送`exit`命令后立即关闭侦听套接字。`client`当客户端发送`exit`命令时，您应该只关闭套接字。而你`return false`来自`while`循环。这显然意味着它将只处理一个客户端。

```
if($input == "exit"){
   socket_close($client);
   socket_close($sock);  // Think about this Line.
   return false; // Think about this Line.
} 
```

# php - 不断收到“无效电子邮件”

> ID：14979113
> 
> 赞同：1
> 
> 时间：2013-02-20T11:48:04.153
> 
> 标签：php, jquery, validation

我不断收到无效的电子邮件。请帮忙！我是新来的形式。我在 html 中有一个表单，将信息发送到这个 php。不知道问题是什么，但是否有两个电子邮件验证有关系吗？我有这个 php 页面和一个 jQuery，都验证了电子邮件。不确定这是否会影响这一点。

```
<?php 
$errors = '';
$myemail = 'something@something.com';
if(empty($_POST['contact_name'])  || 
   empty($_POST['contact_email']) || 
   empty($_POST['contactcomment']))
{
    $errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if(filter_var($email_address,FILTER_VALIDATE_EMAIL) === false)
{
    echo 'Email is not valid';
}
else
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:51:33.033

您正在检查是否`$_POST['contact_email']`为空但传递`$_POST['email']`to的值`$email_address`，我假设这`contact_email`是您想要的，因为这是您要检查的是否为空。因此，电子邮件要么是有效的电子邮件，`empty`要么`something@something`都不是有效的电子邮件。

所以简单地改变：

```
$email_address = $_POST['email']; 
```

到：

```
$email_address = $_POST['contact_email']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:50:37.783

你不见了`.com`

```
$myemail = 'something@something.com'; 
```

并检查您的

`echo $email_address = $_POST['email'];`您在函数中使用此值。

在`if`您使用的情况下`$_POST['contact_email']`，请注意：一个是`email`，另一个是`contact_email`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:50:26.207

`something@something`不是有效的电子邮件。该功能正常工作，您输入的电子邮件无效。

除非你在`$_POST['email_address']`;中提供不同的东西

# python - 在 GAE 中将 Blobstore 中的数据作为电子邮件附件发送

> ID：14979119
> 
> 赞同：4
> 
> 时间：2013-02-20T11:48:32.010
> 
> 标签：python, google-app-engine, blobstore

为什么下面的代码不起作用？收到电子邮件，并且文件带有正确的文件名（它是一个 .png 文件）。但是当我尝试打开文件时，它没有正确打开（Win​​dows Gallery 报告它`can't open this photo or video`和那个`the file may be unsupported, damaged or corrupted`）。

当我使用`blobstore_handlers.BlobstoreDownloadHandler`（基本上是 GAE 文档中的确切处理程序）的子类和相同的 blob 键下载文件时，一切正常，Windows 读取图像。

还有一点信息 - 下载的二进制文件和电子邮件看起来非常相似，但长度略有不同。

有人对我如何获取从 GAE blobstore 发送的电子邮件附件有任何想法吗？在 S/O 上也有类似的问题，表明其他人也有这个问题，但似乎没有任何结论。

```
from google.appengine.api import mail
from google.appengine.ext import blobstore

def send_forum_post_notification():
blob_reader = blobstore.BlobReader('my_blobstore_key')
blob_info = blobstore.BlobInfo.get('my_blobstore_key')
value = blob_reader.read()
mail.send_mail(
    sender='my.email@address.com',
    to='my.email@address.com',
    subject='this is the subject',
    body='hi',
    reply_to='my.email@address.com',
    attachments=[(blob_info.filename, value)]
)

send_forum_post_notification() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T22:15:44.890

我在 Python Google App Engine 应用程序上使用 blobstore 时遇到了类似的问题。我的应用程序处理 PDF 文件而不是图像，但我还看到使用类似于上面显示的代码的代码出现“文件可能不受支持、损坏或损坏”错误。

尝试以这种方式解决问题：在读取二进制流之前对 BlobInfo 对象调用 open()。替换这一行：

```
value = blob_reader.read() 
```

...用这两行：

```
bstream = blob_info.open()
value = bstream.read() 
```

然后你也可以删除这一行：

```
blob_reader = blobstore.BlobReader('my_blobstore_key') 
```

...因为上面的 bstream 将是 BlobReader 类型。

Google 的相关文档位于此处： [https ://cloud.google.com/appengine/docs/python/blobstore/blobinfoclass#BlobInfo_filename](https://cloud.google.com/appengine/docs/python/blobstore/blobinfoclass#BlobInfo_filename)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:20:29.217

我不明白你为什么使用元组作为附件。我用 ：

```
message = mail.EmailMessage(sender = ......
message.attachments = [blob_info.filename,blob_reader.read()] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T07:56:31.487

我发现这段代码在 dev_appserver 上不起作用，但在推送到生产环境时起作用。

# symfony - Symfony ManyToOne 关系 getter 返回空对象

> ID：14979123
> 
> 赞同：6
> 
> 时间：2013-02-20T11:48:47.687
> 
> 标签：symfony, null, doctrine, getter, many-to-one

我将简化我的代码，接下来我有：

医生单位：

```
 use ...\...\Entity\Paciente;

    class Doctor extends Usuario {

        public function __construct() {
            ...
            $this->pacientes = new ArrayCollection();
            ...

        }

        /**
         * Número de colegiado - numColegiado
         * 
         * @var string
         *
         * @ORM\Column(name="numColegiado", type="string", length=255, unique=true)
         */
        protected $numColegiado;

        /**
         * @ORM\OneToMany(targetEntity="Paciente", mappedBy="doctor")
         * @var \Doctrine\Common\Collections\ArrayCollection
         */
        private $pacientes;

       ...

    } 
```

患者实体：

```
use \...\...\Entity\Doctor;

...

class Paciente extends Usuario {

    }

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Doctor", inversedBy="pacientes")
     * @ORM\JoinColumn(name="doctorNum", referencedColumnName="numColegiado", nullable=TRUE)
     * 
     * @var type 
     */
    protected $doctor;

    ...

    /**
     * Set doctor
     *
     * @param Doctor $doctor
     * @return Paciente
     */
    public function setDoctor(Doctor $doctor = null)
    {
        $this->doctor = $doctor;

        return $this;
    }

    /**
     * Get doctor
     *
     * @return Doctor 
     */
    public function getDoctor()
    {
        return $this->doctor;
    }
} 
```

好的，问题是，当我执行该代码时（当然创建了一个关系并且该对象存在于数据库中）：

```
\Doctrine\Common\Util\Debug::dump($paciente->getDoctor()); 
```

它打印如下：

```
object(stdClass)#804 (28) { ["__CLASS__"]=> string(34) "Knoid\CorcheckBundle\Entity\Doctor" ["__IS_PROXY__"]=> bool(true) ["__PROXY_INITIALIZED__"]=> bool(false) ["id"]=> NULL ["numColegiado"]=> NULL ["pacientes"]=> NULL ["nombre"]=> NULL ["apellidos"]=> NULL ["dni"]=> NULL ["tipo"]=> NULL ["username"]=> NULL ["usernameCanonical"]=> NULL ["email"]=> NULL ["emailCanonical"]=> NULL ["enabled"]=> NULL ["salt"]=> NULL ["password"]=> NULL ["plainPassword"]=> NULL ["lastLogin"]=> NULL ["confirmationToken"]=> NULL ["passwordRequestedAt"]=> NULL ["groups"]=> NULL ["locked"]=> NULL ["expired"]=> NULL ["expiresAt"]=> NULL ["roles"]=> NULL ["credentialsExpired"]=> NULL ["credentialsExpireAt"]=> NULL } 
```

正如你所看到的，“医生”对象的所有属性都是空的，对象存在但它是空的，在我的数据库中这个对象存在并且它不是空的。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:53:13.010

这是因为代理对象尚未初始化。初始化它的一种方法是查询对象，例如`$doctor->getId()`. 如果在那之后转储对象，您会看到所有属性都是“可见的”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T09:08:09.030

Thomas K 的答案在我自己的 Bundle 中对我有用。如果我翻译我所做的：

```
$myPaciente = $em->getRepository('MyBundle:Paciente')->findOneBy(array('numColegiado' => $value)); 
```

我加`$myPaciente->getDoctor()->getName();`

然后初始化完成，我可以转储 $myPaciente 以及与它相关的医生的所有信息。

# javascript - 从 Dropbox 提供的浏览器缓存图像

> ID：14979125
> 
> 赞同：5
> 
> 时间：2013-02-20T11:48:52.743
> 
> 标签：javascript, caching, dropbox

我正在编写一个应用程序，它使用 Dropbox 作为图像文件的来源，通过分配 img.src =“[Dropbox 下载链接]”通过 javascript 加载这些文件。这很好用，但我经常一次获取许多文件，并且在重新加载一组图像时（例如，在页面重新加载时），浏览器为每个图像重新发送一个请求（返回 304 未修改）。我想让浏览器在初始加载时缓存图像，这样我就可以完全避免重新请求，但不知道如何启用这些图像的浏览器缓存。在这种情况下我可以设置缓存头吗？来自 Dropbox 的响应标头将“缓存控制”设置为“无缓存”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T15:50:53.383

您也许可以使用 HTML5 的[应用程序缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。但我很确定您也无法从 Dropbox 提供清单文件。

# iphone - 如何在 appdelegate 方法中删除视图？

> ID：14979131
> 
> 赞同：1
> 
> 时间：2013-02-20T11:49:06.807
> 
> 标签：iphone, ios, facebook, view, appdelegate

我想在 appdelegate.m 中删除一个视图控制器的视图，在这个方法内 - (void) GetUserCompleted 我想删除一个视图..请帮帮我

下面是FB委托方法，在dis方法中我想删除包含loginwithFB按钮的视图，

appdelegate.m

```
- (void) GetUserCompleted
{
    NSLog(@"  %@",fbUserName);
    NSLog(@"  %@",fbmailId);
    NSLog(@"  %@",fblocation);
    NSLog(@"  %@",fbhomeTown);
    NSLog(@"   %@",fbgender);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:36:49.847

你应该使用类似的东西：

```
 NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray: self.navigationController.viewControllers];
    for (id object in allViewControllers) {
        if ([object isKindOfClass:[FacebookClassNameToremove class]]) {
            [allViewControllers removeObject:object];
        }
    }
    self.navigationController.viewControllers = allViewControllers; 
```

# asp.net - 服务器拒绝了一个或多个收件人地址。服务器响应为 550 5.7.1 无法中继

> ID：14979135
> 
> 赞同：0
> 
> 时间：2013-02-20T11:49:08.417
> 
> 标签：asp.net, iis, smtpclient

我正在使用我们公司的 SMTP 服务器发送邮件。当我将邮件发送到其他邮件（公司域之外）时出现问题，返回错误：

> “服务器拒绝了一个或多个收件人地址。服务器响应为 550 5.7.1 无法中继”。

如果邮件在公司内部，则没有错误，邮件发送成功。我的 Web 应用程序托管在 IIS 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:59:58.903

我假设您的代码没有任何问题。我想这是一个配置问题，即 SMTP 服务器配置为不向不属于您公司域的地址发送电子邮件。如果是这样，您需要与您的 Windows/网络团队核实，以确认在 SMTP 服务器级别应用的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T02:55:37.560

我已经解决了这个问题。要使用此代码，您需要添加命名空间**Using System.Web.Mail;**

*源代码：*

```
MailMessage mail = new MailMessage();

mail.To = "yourfromemail@domain.com";

mail.From = "yourtodomain@domain.com";

mail.Subject = "Email test.";

mail.Body = "Your body text here";

mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate", "1");   //basic authentication

mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendusername", "my_username_here"); //set your username here

mail.Fields.Add("http://schemas.microsoft.com/cdo/configuration/sendpassword", "super_secret");       //set your password here

SmtpMail.SmtpServer = "127.0.0.1";  

SmtpMail.Send( mail ); 
```

//您需要将本地主机地址添加到 IIS 管理器。转到 IIS 管理器 -> 默认 SMTP 服务器 -> 属性 -> 访问 -> 中继 -> 仅从下面的列表中允许 -> 添加 -> 127.0.0.1 -> 单击确定

# c++ - c++ typedef泛型

> ID：14979137
> 
> 赞同：0
> 
> 时间：2013-02-20T11:49:10.200
> 
> 标签：c++, generics, typedef

我在 Ogre3D 中有这个 typedef：

```
namespace Ogre {
    typedef vector<String>::type StringVector;
    ...
} 
```

“::”运算符有什么用？它有什么作用吗？事实上，我认为这是一个字符串向量 - 一个 StringVector。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:54:17.340

定义一个类型`StringVector`是`vector<String>::type`.

似乎`type`是一种类型，在内部定义`vector`（即`template class`）

`::`被称为“范围解析算子”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:53:13.770

`type`是在类中声明的某个实体（显然是一种类型）`vector`。`::`运算符用于引用`type`命名`vector`空间中的元素。

PS 通过说“命名空间”，我不仅仅指实际的 C++`namespace`功能，因为类也类似于命名空间，因为它们可以具有嵌套定义。

# java - 如何在 Web 浏览器上部署 Swing 应用程序？

> ID：14979140
> 
> 赞同：5
> 
> 时间：2013-02-20T11:49:12.110
> 
> 标签：java, swing, browser, jframe, webswing

我有一个我开发的大摇摆应用程序。有几个类在关闭前一个调用这个类的同时创建自己的**JFrame 。**

我希望将其部署到 Web 浏览器中，并了解我需要将其转换为小程序。我是否必须在每个类中添加用于创建小程序的代码？还是有其他方法。

在我目前的情况下，每个类都创建一个**JFrame**，其中有一些按钮，单击这些按钮将关闭当前**JFrame并实例化一个创建另一个****JFrame**的新类。

你能帮助我并建议我如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-17T09:02:32.607

我刚刚使用了以下步骤：

1.  从[http://webswing.org/](http://webswing.org/)下载**Webswing**
2.  上传你的jar文件
3.  将您的应用程序添加到`webswing.config`并使用 Java 8+
4.  启动 Webswing 服务器，添加的应用程序 Swing 窗口将默认出现在您的浏览器中[http://localhost:8080/](http://localhost:8080/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T15:46:41.977

查看[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)。这使您能够从 Web 启动 Swing 应用程序而无需更改任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T06:52:51.770

1.  下载 creamtec.com-->AjaxSwing 应用程序
2.  在您的系统中安装此应用程序
3.  在 SetEnv.sh 文件中配置 java 并配置 Ajaxswing 应用程序路径
4.  目前 ajaxswing 应用程序启动。
5.  AjaxSwing > webapps > lib > 粘贴你的 jar 文件和相关图像
6.  要在 Ajaxswing > config > 中创建配置文件，此配置文件名应与您的包名相同
7.  运行 ajaxswing 应用程序
8.  选择新的
9.  输入项目名称
10.  添加相关的 lib 文件（所有相关的 jar 连接器和 jar 文件）
11.  键入 packagename.mainclass
12.  运行服务器
13.  系统显示 url 并在 ie 中启动

# javascript - 失去焦点时关闭即时验证

> ID：14979144
> 
> 赞同：3
> 
> 时间：2013-02-20T11:49:24.697
> 
> 标签：javascript, dojo

我使用 dojo 作为客户端框架。我有一个如下屏幕的`ValidationTextBox`电话：`txtName`

![在此处输入图像描述](../Images/184378c8fbd0a3e9e65e3851f8f39f4f.png)

在`txtName`,`required`中设置：

```
 required="true" 
```

如果我失去焦点并`txtName`留空（选项卡或单击另一个文本框），则通过红色突出显示立即执行验证。

我的问题：无论如何我们是否会关闭它，并且仅在我单击`Save`按钮时才进行验证。我试过设置：

```
 intermediateChanges="false" 
```

但没有运气。`StartDate`与和相同的情况`EndDate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:31:41.300

没有可以设置的设置。但是你可以猴子补丁`ValidationTextBox`来获得你需要的东西。

```
ValidationTextBox.prototype._setValueAttr = function() {
  //this.inherited(arguments);
  //this.validate(this.focused); Do not validate
  TextBox.prototype._setValueAttr.apply(this, arguments);
};

ValidationTextBox.prototype._refreshState = function(){
  TextBox.prototype._refreshState.apply(this, arguments);
}; 
```

完整的工作示例：http: [//jsfiddle.net/cswing/Y7Eqn/](http://jsfiddle.net/cswing/Y7Eqn/)

# iphone - 动画图像与幻灯片过渡重叠在其他视图iOS

> ID：14979150
> 
> 赞同：1
> 
> 时间：2013-02-20T11:49:47.207
> 
> 标签：iphone, ios, animation, slide, catransition

我并排有2个imageView，如图：![在此处输入图像描述](../Images/6342b2dac18a7129746efe53e6eb6260.png)

我需要通过重复动画作为滑动视图来更改这些图像。我通过使用 NSTimer 来做到这一点。

以下是我用于创建动画的代码：

```
CATransition *animation = [CATransition animation];
[animation setDuration:1];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromRight];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]] ;

[[imgVwTry layer] addAnimation:animation forKey:@"@asdf"]; 
```

但是，Left ImageView 中的动画是从图像视图的边界开始的。如下图所示：

![在此处输入图像描述](../Images/4c71cd7e5468ba785b36415d3c827ba1.png)

让我更清楚地解释一下：

正在发生的动画与 Right ImageView 重叠。但是，我希望动画只发生在为 LeftImageView 指定的区域中。像这样的东西： ![在此处输入图像描述](../Images/e2c4fec97d851c0efd9b36352fbdc107.png)

我应该在动画代码中进行哪些更改，以便我可以删除重叠。或者有没有其他方法可以为图像设置动画？

还有一个小问题，如果我使用 UIImageView 的 startAnimation 方法，我可以将动画更改为幻灯片动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:16:05.977

您应该在包含您正在谈论的图像的超级视图上将 clipsToBounds 设置为 YES。这将阻止子视图显示，直到它在您的框架范围内。

# javascript - 如何使用单个函数在 javascript 中使用 jQuery 使用异步 ajax 调用？

> ID：14979151
> 
> 赞同：0
> 
> 时间：2013-02-20T11:49:47.940
> 
> 标签：javascript, jquery

我在我的 javascript 代码中多次调用 javascript 函数。在我的 javascript 中有一个 jQuery Ajax 调用。现在发生的事情是，当一个函数调用正在进行时，另一个函数开始命中该函数，我得到了一些错误。当我尝试使 Ajax 调用同步时，它对我来说很好。

任何人都知道如何使用 Ajax 异步调用相同的函数，并在其中进行 Ajax 调用。可以同时调用相同的函数。

# jboss - ClientSession 被 HornetQ 关闭

> ID：14979153
> 
> 赞同：4
> 
> 时间：2013-02-20T11:49:48.907
> 
> 标签：jboss, jms, hornetq

我们在 HornetQ 中遇到了以下异常（HornetQ 2.2.5 GA 和 JBoss 4.3.3，带有 InVM 连接器。客户端和服务器都在同一台机器上）：

*hornetq-failure-check-thread，检测到连接失败：没有从invm：0接收数据。* 错误代码为 3（即 HornetQException.CONNECTION_TIMEDOUT）。

这会导致 RemotingServiceImpl.FailureCheckAndFlushThread 运行，它会多次写入以下日志：

*客户端连接失败，正在清理会话 95406085-7b3a-11e2-86d3-005056b14e26 的资源*

请注意，在我们的应用程序中，我们重用了 ClientSessions。我们每个连接都有一个 ClientSession 实例（我们打开多个连接，每个客户端一个），上述问题导致其中一个会话被关闭。

阅读这篇文章后：[连接超时问题 - 检测到连接失败](https://community.jboss.org/thread/160367)

我知道我们需要在我们的 ServerLocator 实例上配置以下内容（用于创建创建 ClientSessions 的 ClientSessionFactory）：

```
ServerLocator locator = HornetQClient.createServerLocatorWithoutHA(connectorConfig);
locator.setClientFailureCheckPeriod(Long.MAX_VALUE);
locator.setConnectionTTL(-1); 
```

这个配置解决了问题，上面的错误没有重现。

我们的问题如下——如果会话将因其他原因被 HornetQ 再次关闭，**我们如何创建新会话而不是关闭的会话？**

我问这个是因为在我们发现会话关闭之后（并且在我们设置 clientFailure 和 clientTTL 值之前），我们尝试通过调用*ClientSessionFactory*实例上的*createSession(false, true, true)*方法来创建一个新会话（我们仅在系统启动时创建该实例一次并从那时起重新启动它）并且失败并出现以下错误：

 **HornetQException[errorCode=0 message=创建会话失败]*

所以我们没有成功创建新会话，唯一的解决方案是重新启动 JBoss。

请注意，我们无法在客户端站点上重新启动我们的应用程序，因此我们需要找到一种方法来创建新会话，以防旧会话因某种原因而关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:45:16.783

而不是这样做，您可能应该配置重试并使用适当的值，这样您的连接将被重新连接。

但是由于您使用的是 inVM，并且只要您不停止服务器，您就可以使用该配置。但是，如果您打算仅重新启动服务器，则可以使用 reconnectionRetry (-1) 并且会话将被重新连接或重新创建给您。

无论如何，我建议您使用 2.2.5 之后的更新版本。*

# css - 将两个元素从 CSS 中分离出来，而无需进入专有代码

> ID：14979154
> 
> 赞同：0
> 
> 时间：2013-02-20T11:49:49.483
> 
> 标签：css

我想在[http://www.puzzles-et-jeux.com](http://www.puzzles-et-jeux.com)的“nouveaux puzzles”框中将“件数”与“文章价格”分开，它们之间有空格或换行符。生成目录列表的专有代码 [##box_complement?champ=NOUVEAUTES&nb_products_affiche=4&nb_products=4&dimension=200x200&fields=designation;famille;prix] 我不认为它可以修改，但可能有办法在CSS。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:59:06.730

之间的空间：

```
span.famille { margin-right:5px; } 
```

越线：

```
span.famille { display:block; } 
```

# php - 如何更改json向android返回值的形式？

> ID：14979164
> 
> 赞同：1
> 
> 时间：2013-02-20T11:50:16.503
> 
> 标签：php, android, json

嗨，我编写了一个使用 mysql db 的 android 应用程序，我的问题是 php 文件以以下格式返回 json 对象。

```
[
    [
        {
            "0": "1",
            "outlet_id": "1",
            "1": "Big Bazaar",
            "outlet_name": "Big Bazaar",
            "2": "12.9285690",
            "lat": "12.9285690",
            "3": "77.5831100",
            "lng": "77.5831100",
            "4": "images/BigBazaar.png",
            "outlet_image": "images/BigBazaar.png",
            "5": "Jayanagar 4th Block",
            "outlet_location": "Jayanagar 4th Block"
        }
    ]
] 
```

但我需要它以以下格式传递它。

```
[
    [
        {

            "outlet_id": "1",
            "outlet_name": "Big Bazaar",
            "lat": "12.9285690",
            "lng": "77.5831100",
            "outlet_image": "images/BigBazaar.png",
            "outlet_location": "Jayanagar 4th Block"
        }
    ]
] 
```

这是我的 php 代码。

```
<?php
error_reporting(0);

//$url = $_GET['url'];
//$mR = $_GET['mRequest'];
//$mOid = $_GET['mOutletId'];
//$mloc = $_GET['mLocation'];
//connect to the db
$user = "root";
$pswd = "";
$db = "recommendations_db";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
//if($mR == 'outlets' && $mloc = 'all'){
$query = "SELECT * FROM outlets";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

while($row = mysql_fetch_array($result))
  {
  $output[] = array($row); 
  }
print( json_encode($output) );
?> 
```

如何获得此输出。请帮助，因为我在 php 方面很差。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:55:15.713

用这个

```
while($row = mysql_fetch_assoc($result))
{
  $output[] = array($row); 
} 
```

`mysql_fetch_assoc — Fetch a result row as an associative array`

# javascript - 如何修改此 e.preventDefault 以在除主页之外的所有页面上工作？

> ID：14979173
> 
> 赞同：1
> 
> 时间：2013-02-20T11:50:38.593
> 
> 标签：javascript, jquery, wordpress, colorbox

我在让 ColorBox 在我的网站上工作时遇到了一些脚本问题。

最初它被编码为覆盖默认链接跟随'launch（this）;' 每当在链接上找到类 .boxElement 时。

我试图修改它，以便仅在它不是主页时才会发生覆盖，但它似乎没有触发。相反，它只是防止所有页面上的覆盖。

```
$('.' + boxElement, document).live('click', function (e) {
   if ( !is_home() ) {
       e.preventDefault();
       launch(this);
   } else { return true; }
}); 
```

谁能提供一些帮助？我确信这是一个简单的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:55:31.097

此函数应为您的主页返回 true

```
 var is_home = function(){
      return window.location.href.indexOf("some_part_of_home_url") > -1;
   } 
```

# c# - 在 C# Windows 窗体中获取 PDF 格式的 Gridview 数据？

> ID：14979174
> 
> 赞同：1
> 
> 时间：2013-02-20T11:50:39.253
> 
> 标签：c#

我想将 datagridview 的数据转换成 PDF 文件。例如，如果我按下 button1，我应该将 datagridview 数据获取为 pdf。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:56:24.593

有不同的库来完成这个

1.iTextSharp [_](http://sourceforge.net/projects/itextsharp/)

2.PDFSharp [_](http://www.pdfsharp.com/PDFsharp/)

3.[夏普PDF](http://sharppdf.sourceforge.net/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:02:18.460

如何将数据导出为 PDF 格式？下面的代码用于将网格视图数据导出为 PDF 格式

```
public void ExportToPdf(DataTable ExDataTable) //Datatable 
  {
    //Here set page size as A4

    Document pdfDoc = new Document(PageSize.A4, 10, 10, 10, 10);

    try
    {
        PdfWriter.GetInstance(pdfDoc, System.Web.HttpContext.Current.Response.OutputStream);
        pdfDoc.Open();

         //Set Font Properties for PDF File
        Font fnt = FontFactory.GetFont("Times New Roman", 12);
        DataTable dt = ExDataTable;

        if (dt != null)
        {

            PdfPTable PdfTable = new PdfPTable(dt.Columns.Count);
            PdfPCell PdfPCell = null;

            //Here we create PDF file tables

            for (int rows = 0; rows < dt.Rows.Count; rows++)
            {
                if (rows == 0)
                {
                    for (int column = 0; column < dt.Columns.Count; column++)
                    {
                        PdfPCell = new PdfPCell(new Phrase(new Chunk(dt.Columns[column].ColumnName.ToString(), fnt)));
                        PdfTable.AddCell(PdfPCell);
                    }
                }
                for (int column = 0; column < dt.Columns.Count; column++)
                {
                    PdfPCell = new PdfPCell(new Phrase(new Chunk(dt.Rows[rows][column].ToString(), fnt)));
                    PdfTable.AddCell(PdfPCell);
                }
            }

            // Finally Add pdf table to the document 
            pdfDoc.Add(PdfTable);
        }

        pdfDoc.Close();

        Response.ContentType = "application/pdf";

        //Set default file Name as current datetime
        Response.AddHeader("content-disposition", "attachment; filename=" + DateTime.Now.ToString("yyyyMMdd") + ".pdf");

        System.Web.HttpContext.Current.Response.Write(pdfDoc);

        Response.Flush();
        Response.End();

    }
    catch (Exception ex)
    {
        Response.Write(ex.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T14:00:02.167

请为此使用 iTextSharp。

# javascript - 使用 java 脚本将 HTML 输入标记转换为 Dojo TextBox

> ID：14979178
> 
> 赞同：1
> 
> 时间：2013-02-20T11:50:46.847
> 
> 标签：javascript, html, dojo

我正在从我的 Java 脚本中生成 4 个输入字段。但现在我想使用 dojo TextBox dijit 来接受输入。如何将我的输入标签转换为 dojo 文本框？

这是当前的代码...

```
var container = document.createElement("span");
domClass.add(container, "Class name");
var input = document.createElement("input");
input.type = "text";
input.name = "textinput";
domClass.add(input, "Some Class name");
container.appendChild(input); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:54:31.893

我可以看到您需要*“dojo/dom-class”*才能使用它将类添加到您的 DOM 节点。现在您还需要*“dijit/form/TextBox”*。您将需要一些 DOM 节点来放置新的 TextBox 小部件，例如`<div id="input_container"></div>`. 当你拥有它时，创建它们并插入它们就像这样简单：

```
new TextBox({
   name: "textinput",
   // Additional properties...
}, "input_container"); 
```

这将创建一个新的*dijit/form/TextBox*小部件并将其放置在`div`以“input_container”作为其 id 的位置。您不必像我展示的那样立即将您的小部件放置在 DOM 结构中，正如您[在这个小提琴](http://jsfiddle.net/H7Zh8/28/)中看到的那样，您还可以将新的 TextBox 小部件分配给一个变量，您可以稍后将其放置在您想要的位置。

在旁注中，我看到您正在使用`document.createElement()`本机`appendChild()`方法。这些不是每个浏览器的标准，因此您可能最终会通过依赖这些方法在浏览器之间遇到一些奇怪的问题。Dojo 提供了一个不错的[dojo/dom-construct](http://dojotoolkit.org/reference-guide/1.8/dojo/dom-construct.html#dojo-dom-construct)模块，它为您提供了类似的方法，并自行处理不同的浏览器实现（因此您不必担心）。

# javascript - Jquery Dialog 中的动态 Div 内容

> ID：14979179
> 
> 赞同：2
> 
> 时间：2013-02-20T11:50:47.767
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在尝试显示具有动态 div 内容的对话框，在 div 内我尝试添加跨度、文本框和按钮，但未显示 Jquery 对话框。请帮助我解决这个问题

提前感谢您的回答

```
 <!DOCTYPE html>

        <html lang="en">
            <head>
                <meta charset="utf-8" />
                <title>Jquery Dynamic Div</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
                <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
                <script src="JQUERY/jquery-ui.js"></script>
                <style type="text/css">
                .ui-datepicker
                { 
                    width: 17.5em;
                    height: 16.6em;
                    font-size:12.5px;
                    margin-left: 120px;
                    z-index: 1000;
                }    
                </style>
                <script type="text/javascript">
                    $(document).ready(function ()
                    {
                        $("#btnSubmit").click(function ()
                        {
                            alert("inside");
                            var DynamicDiv = $('<div id="ExpiryDatePopup" style="display:block;width:680px;height:327px;background-color:#FFFFFF;></div>');
                            alert("Div Created");
                            var breakTag1 = $('</br>');
                            alert("Div Created");
                            var breakTag2 = $('</br>');
                            var ExpDateText = $('<span style="color: steelblue;margin-left: 55px;">Please enter the Expiration Date </span>');
                            var EndDateText = $('<span style="margin-left: 56px;position: relative;">End Date</span><span style="color: #f00">*</span>');
                            var DatePickerText = $('<input type="text" id="datepicker" readonly="true"  style="margin-left:32px" style="margin-left: 59px;margin-top: 29px;position: static;top: 85px;"/>');
                            var SubMitButton = $('<input type="button" id="popUpSubmit" value="Submit" style="margin-left: 128px;margin-top: 78px;height: 28px;width: 82px;" />');
                            alert("Div Created");
                            $('body').append(DynamicDiv);
                            $('#ExpiryDatePopup').append(breakTag1);
                            $('#ExpiryDatePopup').append(breakTag2);
                            $('#ExpiryDatePopup').append(breakTag1);
                            $('#ExpiryDatePopup').append(ExpDateText);
                            $('#ExpiryDatePopup').append(DatePickerText);
                            $('#ExpiryDatePopup').append(SubMitButton);
                            alert("hi sam");
                            $('#ExpiryDatePopup').dialog(
                            {
                                height: 400,
                                width: 600,
                                title: 'Expiration Date',
                                position: 'center',
                                background: 'red',
                                opacity: '0.3',
                                modal: true,
                                open: function ()
                                {
                                    $("#datepicker").datepicker({ dateFormat: 'yy-mm-dd',
                                        minDate: dateToday,
                                        showOn: 'button',
                                        buttonText: 'Show Date',
                                        buttonImageOnly: true,
                                        buttonImage: 'Images_/icon_calendar.jpg'
                                    });
                                }
                            });
                        });
                    });

                </script>
            </head>
            <body>
                <input type="button" id="btnSubmit" value="Submit"/>
            </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:55:47.220

```
$('#ExpiryDatePopup').live('click',function(){
  //write append code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:59:13.960

好吧，我已经尝试了您的代码，并且它对我来说工作正常。

唯一的问题是创造`<div id="ExpiryDatePopup"></div>`

您忘记关闭`ExpiryDatePopup`div 样式属性。

**测试代码**

```
<!DOCTYPE html>

        <html lang="en">
            <head>
                <meta charset="utf-8" />
                <title>Jquery Dynamic Div</title>
                 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
                <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
                <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
                <style type="text/css">
                .ui-datepicker
                { 
                    width: 17.5em;
                    height: 16.6em;
                    font-size:12.5px;
                    margin-left: 120px;
                    z-index: 1000;
                }    
                </style>
                <script type="text/javascript">
                    $(document).ready(function ()
                    {
                        $("#btnSubmit").click(function ()
                        {
                            var DynamicDiv = $('<div id="ExpiryDatePopup" style="display:block;width:680px;height:327px;background-color:#FFFFFF;" /></div>');
                            var breakTag1 = $('</br>');
                            var breakTag2 = $('</br>');
                            var ExpDateText = $('<span style="color: steelblue;margin-left: 55px;">Please enter the Expiration Date </span>');
                            var EndDateText = $('<span style="margin-left: 56px;position: relative;">End Date</span><span style="color: #f00">*</span>');
                            var DatePickerText = $('<input type="text" id="datepicker" readonly="true"  style="margin-left:32px" style="margin-left: 59px;margin-top: 29px;position: static;top: 85px;"/>');
                            var SubMitButton = $('<input type="button" id="popUpSubmit" value="Submit" style="margin-left: 128px;margin-top: 78px;height: 28px;width: 82px;" />');

                            $('body').append(DynamicDiv);
                            $('#ExpiryDatePopup').append(breakTag1);
                            $('#ExpiryDatePopup').append(breakTag2);
                            $('#ExpiryDatePopup').append(breakTag1);
                            $('#ExpiryDatePopup').append(ExpDateText);
                            $('#ExpiryDatePopup').append(DatePickerText);
                            $('#ExpiryDatePopup').append(SubMitButton);

                            $('#ExpiryDatePopup').dialog(
                            {
                                height: 400,
                                width: 600,
                                title: 'Expiration Date',
                                position: 'center',
                                background: 'red',
                                opacity: '0.3',
                                modal: true,
                                open: function ()
                                {
                                    $("#datepicker").datepicker({ dateFormat: 'yy-mm-dd',
                                        minDate: dateToday,
                                        showOn: 'button',
                                        buttonText: 'Show Date',
                                        buttonImageOnly: true,
                                        buttonImage: 'Images_/icon_calendar.jpg'
                                    });
                                }
                            });
                        });
                    });

                </script>
            </head>
            <body>
                <input type="button" id="btnSubmit" value="Submit"/>
            </body>
        </html>
```

您在创建 div 时也有错误，您忘记关闭样式属性。

# jms - qpid/amqp jms 客户端的客户端故障转移？

> ID：14979184
> 
> 赞同：0
> 
> 时间：2013-02-20T11:51:03.803
> 
> 标签：jms, activemq, amqp, qpid

按照 wiki 页面[https://cwiki.apache.org/qpid/amqp-java-jms-messaging-client.html](https://cwiki.apache.org/qpid/amqp-java-jms-messaging-client.html)到[https://cwiki.apache.org/qpid/connection-url-format.html](https://cwiki.apache.org/qpid/connection-url-format.html)。

简单我期望 qpid-amqp-1-0-client-jms-0.20-sources.jar 接受 URI 格式，但它似乎忽略了所有内容 - 特别是“brokerlist”选项？

例如：

```
amqp://guest:guest@nowhere?brokerlist='tcp://localhost:5672;tcp://localhost:15672'&failover='roundrobin' 
```

但是 ConnectionFactory 坚持使用`<clientid>`代理主机，并为其添加默认端口。

我确定我在这里遗漏了一些非常明显的东西......

经纪人是 ActiveMQ 5.8.0，顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:40:59.257

您的网址中缺少虚拟主机：amqp://guest:guest@clientid/host?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T21:03:20.010

您使用的连接字符串是 AMQP 1.0 之前的版本，新的连接字符串应为以下格式，无需 brokerlist

amqp://guest:guest@nowhere?remote-host=default

# c# - 无法连接到远程服务器

> ID：14979192
> 
> 赞同：1
> 
> 时间：2013-02-20T11:51:24.473
> 
> 标签：c#

以下 C# 代码从 url 站点返回 xml 结果并加载到数据集

```
 string a="http://trackandtrace.champ.aero/CargoTrackE/trackHandler?awbNumber=07121988842&forCarrier=ET-V2";
   DataSet ds = new DataSet();
   XmlTextReader r = new XmlTextReader(a);
   ds.ReadXml(r); 
```

但它显示错误“无法连接到远程服务器”但是当我直接在浏览器上使用 url 时它可以工作。我在网上浏览过类似的问题，但没有一个能解决我的问题。

你能帮我么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:49:50.150

我遇到了这个问题，终于找到了解决方案。我必须在 web.config 中添加一个配置来告诉它在哪里可以找到默认代理。这是因为我的应用程序池使用的客户端 ID 没有安全权限，无法在其运行的系统上找到它。因此，它试图直接访问 url，而不是通过代理路由，从而阻止它连接。在我的情况下，我们的 IIS 服务器为其代理使用脚本，但如果您有代理服务器，这也是所需的解决方案。

**对于脚本代理：**

```
<configuration>
  <system.net>
    <defaultProxy>
      <proxy scriptLocation="http://pac.MyDomain.com/" />
    </defaultProxy>
  </system.net>
</configuration> 
```

**对于代理服务器：**

```
<configuration>
  <system.net>
    <defaultProxy>
      <proxy proxyaddress ="http://contoso:8080" />
    </defaultProxy>
  </system.net>
</configuration> 
```

代理元素还有其他选项也可能对您有所帮助，包括：bypasslocal 和 usesystemdefault，但我不完全确定它们的作用。

# c# - PictureBox onPaint 清除所有控件

> ID：14979197
> 
> 赞同：2
> 
> 时间：2013-02-20T11:51:40.990
> 
> 标签：c#, .net, paint, picturebox, invalidation

我一直在使用图片框的 onPaint 事件处理程序时遇到问题。我已经简化了代码，所以现在我正在尝试实现这一点：将位图从路径加载到 pictureBox1 并在鼠标光标移动到 pictureBox1 时在鼠标光标周围绘制一个小矩形。

```
 private int mouseX;
    private int mouseY;
    private String path;

    public Form1()
    {
        InitializeComponent();
        path = "images\\image.jpg";
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        pictureBox1.Image = new Bitmap(path);
    }

    private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        mouseX = e.X;
        mouseY = e.Y;
    }

    private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawRectangle(Pens.Black, mouseX - 10, mouseY - 10, 20, 20);
        pictureBox1.Invalidate();
    } 
```

当我运行该应用程序时，位图已成功加载，并且无论我拖动鼠标，矩形都被很好地绘制。总之有两个问题：

1）当表单被加载时，一切都是白色的，但 pictureBox 直到我将窗口移动到某处。这意味着menuStrip，toolStrip 例如被清除为白色。当我添加 pictureBox.Invalidate(); 进入 Form1_Load 它似乎解决了这个问题（一切都已加载并可见），但在 toolStrip 上有一些按钮和组合框正在交互，改变其可见性，这仍然会导致问题。我想减少仅在图片框上绘制的功能。

2）尽管鼠标光标没有进入pictureBox，但在加载Form时绘制矩形。此外，当光标离开图片框时，最后绘制的矩形会停留在那里。我试图删除它，但我无法弄清楚。

感谢您的任何建议，在我看来，那里缺少一些基本的东西，但不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:58:09.480

2)`MouseMove`仅当光标在图片框上时有效。尝试使用`MouseEnter`and`MouseLeave`来处理何时开始绘制矩形以及何时停止绘制。

# oracle - 命令行上的sqlloader语法错误

> ID：14979200
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:51:56.667
> 
> 标签：oracle, sql-loader

我无法弄清楚在这种情况下试图通过命令行执行 sqlloader 的语法错误在哪里。好像没问题。

命令：

```
sqlldr myuser/mypass@myhost:1521/orcl CONTROL=tbx.ctl LOG=C:\path\to\tbx.log BAD=C:\path\to\tbx.bad skip=0 
```

CTL 文件：

```
load data 
infile 'C:\path\to\tbx.csv'
into table TBX
fields terminated by ';'
optionally enclosed by '"' AND '"'
( x,
  xx,
  xxx,
  xxxx,
  xxxxx,
  xxxxxx,
  xxxxxxx,
  xxxxxxxx,
  xxxxxxxxx
) 
```

CSV 文件：

```
"724098100357859";"";"";"";"";"";"";""
"724098100358417";"";"";"";"";"";"";""
... 
```

错误：

> SQL*Loader-100：命令行语法错误

表结构：

```
CREATE TABLE TBX
(
"x" VARCHAR2(20 BYTE), 
"xx" VARCHAR2(80 BYTE), 
"xxx" VARCHAR2(80 BYTE), 
"xxxx" VARCHAR2(80 BYTE), 
 "xxxxx" VARCHAR2(60 BYTE), 
 "xxxxxx" VARCHAR2(60 BYTE), 
 "xxxxxxx" VARCHAR2(60 BYTE), 
 "xxxxxxxx" VARCHAR2(60 BYTE), 
 "xxxxxxxxx" VARCHAR2(80 BYTE)
 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:10:20.263

如果您的路径中有空格，那么 SQL*Loader 会将路径视为多个参数，通常会生成 LRM-00112 错误。您没有证明这一点，但从似乎确实是问题的评论中。您需要将路径括在引号中：

```
sqlldr myuser/mypass@myhost:1521/orcl CONTROL='tbx.ctl' LOG='C:\path\with spaces\tbx.log' BAD='C:\path\with spaces\tbx.bad' skip=0 
```

* * *

偏离原始问题的主题，但从评论中选择......当您`@myhost:1521/orcl`用作连接字符串时，您使用的是[简单的连接标识符](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_three.htm#autoId7)（链接适用于 SQL*Plus，但此处同样适用）。最后一个元素是数据库的**服务名称**，它可能与 SID 不同 -`orcl.example.com`例如，它可能是 。您可以在数据库服务器上运行`lsnrctl status`或`lsnrctl services`查看哪些服务名称有效。`tnsnames.ora`但是，如果您已经有一个工作的`sqlldr myusr/mypass@orcl`.

# linux - Bash 自动退出/注销 SSH 会话

> ID：14979207
> 
> 赞同：2
> 
> 时间：2013-02-20T11:52:28.000
> 
> 标签：linux, bash

我有一个脚本，我想在成功后启动`SSH session`.

到目前为止，我通过将脚本的路径和脚本名称放在`.bash_profile`文件中来完成这项工作。

我编写的脚本是文本菜单，为用户提供多种选择。

其中一个选项是`quit/exit`，我需要（一旦选择）退出脚本并从 SSH 会话中注销用户。

这可能吗？

到目前为止，我还无法实现这一目标。退出脚本很容易，但无论我尝试什么，我总是以命令行提示结束，在这种情况下，我们试图避免。

提前致谢，

担。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T09:16:27.640

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

将 ssh-keys 与强制命令一起使用，或调查 sshd_config 文件中的 ForceCommand 选项（尽管这将适用于所有用户）。——卡洛斯·坎德罗斯

# c# - 从gridview导出后打开excel文件时出现警告消息

> ID：14979215
> 
> 赞同：0
> 
> 时间：2013-02-20T11:52:51.947
> 
> 标签：c#, asp.net

我已经编写了导出数据的代码，但是在打开 excel 文件时我遇到了警告消息，默认情况下文件保存为 .html 扩展名

警告 - “您以不同于文件扩展名指定的格式打开的文件”

我需要保存 .xls 扩展名请帮助我

```
 private void ExportToExcel(DataTable dt)
  {
 string fileName = "FileName" + DateTime.Now.ToString("MMddyyyy_HHmmss") + ".xls";

        Response.AddHeader("content-disposition", "attachment;filename=" + fileName);

        //Response.AddHeader("content-disposition", "attachment;filename=Filename .xls");
        Response.ContentType = "application/vnd.ms-excel";

        StringWriter stringWriter = new StringWriter();
        HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
        DataGrid dataExportExcel = new DataGrid();
        dataExportExcel.ItemDataBound += new DataGridItemEventHandler(dataExportExcel_ItemDataBound);
        dataExportExcel.DataSource = dt;
        dataExportExcel.DataBind();
        dataExportExcel.RenderControl(htmlWrite);
        System.Text.StringBuilder sbResponseString = new System.Text.StringBuilder();
        sbResponseString.Append("<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:xlExcel8\" xmlns=\"http://www.w3.org/TR/REC-html40\"> <head></head> <body>");
        sbResponseString.Append(stringWriter + "</body></html>");
        Response.Write(sbResponseString.ToString());
        Response.End();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:04:54.137

使用这个 - [http://www.gemboxsoftware.com/spreadsheet/overview](http://www.gemboxsoftware.com/spreadsheet/overview)

使用中看起来像这样：

```
// Create new Excel file.
var excelFile = new ExcelFile();

excelFile.Worksheets.Add(dt.TableName).InsertDataTable(dt, 0, 0, true);

// Save Excel file to XLS format.
excelFile.SaveXls(dataSet.DataSetName + ".xls"); 
```

# java - java远程函数需要调用两次

> ID：14979217
> 
> 赞同：0
> 
> 时间：2013-02-20T11:52:54.357
> 
> 标签：java, swing, jframe, remoteobject

我创建了一个 java 代码（swing GUI JFrame 表单），它在按下按钮时调用另一个类函数（在另一个项目中），但它需要我单击按钮两次才能成功返回被调用的值功能。有什么解决办法吗？

这是我的代码，

图形用户界面

```
package aarib;

import java.awt.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import AlKhalil.ui.Aarib;

public class GUI extends javax.swing.JFrame {

    public String Input;
    public String Lexems;
    public Aarib A;

public GUI() {
        initComponents();
        A = new Aarib();
        jTextField1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        jLabel2.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);

    }
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:

        if(jTextField1.getText().isEmpty())
        {
            jLabel2.setText("No input");
        }
        else{
            Input = jTextField1.getText().toString();
            A.inputText= Input;
            try { 

                Lexems = A.LexicalAnalysis();
                jLabel2.setText(Lexems);

            } catch (Exception ex) {
                jLabel2.setText("Error");
                Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    }
} 
```

和远程功能

```
package AlKhalil.ui;
import java.util.*;
import java.util.List;
import AlKhalil.token.*;
import AlKhalil.analyse.*;
import AlKhalil.*;
import AlKhalil.result.*;

public class Aarib {

    public Analyzer analyzer;
    public String myResult="";
    public String inputText="";

    public Aarib() {
        Settings settings = new Settings();
        analyzer = new Analyzer();

    }

    public String LexicalAnalysis() throws Exception {

        Thread t = new Thread() 
        {
            public void run() 
            {
            //some code
                    ...
                    ...
                    ...
            }
        };

       t.start();
       return myResult;
    }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:04:42.443

解决方法是等待Thread t中产生的结果。使用您当前的代码，您可以启动一个并发线程并立即返回属性*myResult*。第二次单击按钮时，*myResult*（大多数情况下）由线程填充并在启动另一个并发线程进行计算后返回。

我建议为您的程序考虑某种观察者模式。然后，您的 GUI 应该观察计算线程并获得有关结果的通知，然后将处理该结果。

但是由于我们都看不到线程中执行的代码，并且当您等待线程完成时，为什么不干脆不使用线程。

# php - 在 PHP 中禁用 include_path

> ID：14979218
> 
> 赞同：2
> 
> 时间：2013-02-20T11:53:02.023
> 
> 标签：php, include-path

我正在寻找一种方法来禁用 PHP`include_path`在项目中的使用。

## 背景

也许你会惊讶：我为什么要阻止使用这样一个有用的功能？

不幸的是，虽然我认为答案很简单，但要准确描述并不容易：

简而言之，`include_path`是（显然）package-/library-blind。

更具体地说，可以将库的两个不同版本放入两个文件夹中，这两个文件夹都在 中`include_path`，并且最终执行的代码是两者的*混合*。考虑以下设置：

```
include_path=/some/server/path/lib:
    /var/www/apache/htdocs/yourApplication/library 
```

现在想象一下您要使用的库的规范位置在其中，`/some/server/path/lib`并且您的构建过程将其放置在那里，但是开发人员正在尝试修补其中的一部分并将库错误地同步到`/var/www/apache/htdocs/yourApplication/library`. 现在想象会发生这种情况：

```
/some/server/path/lib/moduleYouWant
    '--> A.php (old version)
/var/www/apache/htdocs/yourApplication/
    '--> SomeFile.php (uses B.php from module; previously used A.php)
/var/www/apache/htdocs/yourApplication/library/moduleYouWant
    '--> A.php (new version)
    '--> B.php (new file; uses A.php from module) 
```

突然，您的应用程序将神秘地使用或自动加载（如果您的自动加载器投入`include_path`使用，据我所知，大多数框架提供的自动加载器都会这样做）只有您所做的更改的*一半*`B.php`- 新的但旧的`A.php`.

当然，您可能会反对我所描述的设置，理由是它不应该因为其他原因而发生。这还算公平。我可能会同意，甚至。例如，上述场景是一个向后不兼容的更改，这不是很好。

尽管如此，到目前为止，我已经看到它在野外发生了两次（在一个足够复杂的项目中，`chroot`把水弄得一团糟）并且它已经消耗了*无数*令人困惑的调试时间......我不想再遇到这个问题了。不在这种星座 - 或任何其他星座。

我不希望 PHP 神奇地试图找到我的文件。我希望 PHP 要求我*具体说明*要加载哪些文件。

## 为什么我不需要 include_path

使用`__DIR__`（或`dirname(__FILE__)`在较旧的 PHP 版本中），*语义上*的“相对”路径很容易构建。如果我需要区分实时服务器和测试服务器，那么定义绝对位置的常量是我的朋友。

`include()`所以...我希望提供给（和相关函数）的非绝对路径失败。

**[这个 2011 年的 stackoverflow 问题](https://stackoverflow.com/questions/5753746/phps-include-path-set-it-to-an-empty-string-doesnt-work)告诉我，我不能留空`include_path`。是否有其他方法可以禁用该功能？**我的 Googlefu 很弱，但我仍然怀疑答案是否定的（除非你修补 PHP 本身）。

*如果有人知道我可以通过代码约定协议（或相关的“请不要使用`include()`但我编写的这个自定义函数*”）以外的方式阻止这种情况，我很想知道。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:56:45.830

只需使用以下内容：

```
set_include_path("./"); 
```

那么当您需要在当前文件夹之外包含文件时，您必须指定完全限定的相对或绝对路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:25:21.043

您指出问题的根源是您让开发人员编写了错误的相对包含，他们应该使用绝对包含或自动加载。

解决这个问题的方法不是技术上的，而是文化上的。您可以通过向版本控制系统添加一个预提交挂钩来强制执行正确的行为，该挂钩试图检测错误的包含（相对包含或仅包含所有包含）并阻止提交。

# sql - 分别计算列中的值

> ID：14979220
> 
> 赞同：3
> 
> 时间：2013-02-20T11:53:12.343
> 
> 标签：sql, sql-server, tsql, pivot

我的数据库中有一个具有以下结构的表。

```
ID   COMPANY_ID  Status
-----------------------
1       10         1 
2       10         2
3       12         2 
4       12         2 
5       12         1 
6       13         3 
7       14         3 
8       14         3 
9       10         1
10      10         2 
```

我想将我的结果按公司 ID 分组并计算每个状态并将它们列为单独的列。

IE

```
COMPANY_ID   Status 1   Status 2   Status 3
-------------------------------------------
10             2           2           0
12             1           2           0
13             0           0           1
14             0           0           2 
```

我的问题是如何从我的表格中获得上述结果？并可能加入公司表。

尝试了几种可能，但没有得到结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T11:54:30.380

```
select  company_id
,       count(case when status = 1 then 1 end) as [Status 1]
,       count(case when status = 2 then 1 end) as [Status 2]
,       count(case when status = 3 then 1 end) as [Status 3]
from    YourTable
group by
        company_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T11:56:35.140

这种类型的数据转换称为`PIVOT`. 有几种方法可以透视数据。

您可以将聚合函数与`CASE`表达式一起使用：

```
select company_id,
  sum(case when status = 1 then 1 else 0 end) status1,
  sum(case when status = 2 then 1 else 0 end) status2,
  sum(case when status = 3 then 1 else 0 end) status3
from yourtable
group by company_id; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f6c26/1)

从 SQL Server 2005+ 开始，您可以使用以下[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select company_id,
  [1] as Status1,
  [2] as Status2,
  [3] as Status3
from
(
  select company_id, status
  from yourtable
)src
pivot
(
  count(status)
  for status in ([1], [2], [3])
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/43cdb/5)。

如果您有已知数量的值要转换为列，则上述两个版本运行良好。但是如果是未知的，那么你可以使用动态 SQL 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Status'+cast(status as varchar(10))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT company_id,' + @cols + ' from 
             (
                select company_id, ''Status''+cast(status as varchar(10)) Status
                from yourtable
            ) x
            pivot 
            (
                count(Status)
                for Status in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/43cdb/8)。

都给出结果：

```
| COMPANY_ID | STATUS1 | STATUS2 | STATUS3 |
--------------------------------------------
|         10 |       2 |       2 |       0 |
|         12 |       1 |       2 |       0 |
|         13 |       0 |       0 |       1 |
|         14 |       0 |       0 |       2 | 
```

# c++ - 从链表中删除节点而不会出错？

> ID：14979223
> 
> 赞同：0
> 
> 时间：2013-02-20T11:53:14.377
> 
> 标签：c++, list, linked-list

简单地说，这个程序是从一个字符串创建一个字符的链表。（比如从“HELLO”到 head->h->e->l->l->o->NULL）每当我尝试使用擦除功能删除头部时，程序将停止工作，给出“application.exe已停止工作... Windows 正在检查解决方案..."。我想我的内存分配可能有问题，但我不能说清楚。建议非常感谢。

这行得通

```
void StringADT::append(string s)
{ 
for (int i = 0; i < s.length(); i++)
{
    Node* NodePtr;
    Node* newNode;
    newNode = new Node;
    newNode->data = s.at(i);
    newNode->next = NULL;
    if (!head)
    {
        head = newNode;
    } else
    {
        NodePtr = head;
        while (NodePtr->next)
        {
            NodePtr = NodePtr->next;
        }
        NodePtr->next = newNode;
    }
}
}

void StringADT::erase(int pos) //pos = position to erase

{
if (!head || pos < 0 || pos > length() - 1)
    return;
else {
    Node* NodePtr;  
    NodePtr = head;
    if (pos == 0)
    {   
        NodePtr = head->next;

        delete head; //PROBLEM COMES AFTER EXECUTION OF THIS LINE!!

    }
} 
```

}

这是我的课

```
class StringADT{

private:
    struct Node {
        char data;
        Node* next;
    };
    Node* head; 
```

这是我的附加函数，由于内存分配，它可能是问题的根源。

```
void StringADT::append(string s) (appending string s to the linked list)
{ 
Node* NodePtr;

int slength = s.length();

Node *NodeArray;
NodeArray = new Node[slength];
if(!NodeArray)
    return;
for (unsigned i = 0; i < s.length(); i++)
{
    NodeArray[i].data = s.at(i);
    NodeArray[i].next = NULL;
}

if (!head)
{
    head = NodeArray;
    NodePtr = head;
    for(unsigned count = 1; count < slength; count ++)
    {
        NodePtr->next = (NodeArray + count);
        NodePtr = NodePtr->next;
        //cout << "number of count " << count << endl;
    }
} else {
    NodePtr = head;
    while (NodePtr->next)
    {
        NodePtr = NodePtr->next;
    }
    for(unsigned count = 0; count < slength; count ++)
    {
        NodePtr->next = (NodeArray + count);
        NodePtr = NodePtr->next;
        //cout << "number of count " << count << endl;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:37:26.080

1.  问题显然是您分配对象数组而不是想要删除其中一个。您必须`Node`独立分配 s 。即这是`append`您需要修复的功能。

2.  append 应该写为`append(char)`，它只附加一个字符，而不是`append(string const &)`（字符串可能复制起来很昂贵，所以总是通过引用，通常是常量！）应该只是在循环中调用它。并且`append(char const *)`，因此您也可以附加字符串文字！

3.  不要对没有随机访问的事物使用索引。这样您就不必考虑直接访问的内容，只需学习更喜欢通过迭代器/指针进行迭代而不是使用索引进行迭代！

我不会给出示例，因为对于分配，最好自己提出实际代码，即使您必须反复要求澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:56:40.913

擦除函数应该是这样的：

```
if (pos == 0)
{   
    NodePtr = head;
    head = head->next;

    delete NodePtr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:33:30.430

您按如下方式分配了 Node 对象：

```
NodeArray = new Node[slength]; 
```

您*在一个分配中拥有一**组*Node 对象。稍后，当您*处理完该数组中的特定元素*时，您正在调用

 **```
 delete head; //PROBLEM COMES AFTER EXECUTION OF THIS LINE!! 
```

删除*数组的特定元素*。

这在 C++ 内存分配中是不允许的。

如果分配了数组，则只能删除整个数组，不能删除特定元素。此外，您需要使用数组 delete[] 运算符，如下所示：

```
delete[] someArray; 
```

但这会导致您的设计出现根本问题。您正在实现一个链表，但您正在分配一个数组。现在，理论上你可以像你所做的那样继续分配一个链表元素数组，但这样做没有意义。为特定数量的元素分配一个数组；当您需要任意数量的元素并且不知道该数字是多少时，通常会使用链表。

链表通常一次分配和删除一个元素，而不是放在一个预定义的数组中。当您获得新数据时，您分配一个新节点，然后将其添加到列表中。

（上面的代码味道是，如果你有一个数组，为什么需要链接元素？你可以只迭代到下一个元素而不是跟随指针。数组和链表不能组合使用；它们有不同的目的。对于您的链表，您应该摆脱数组并分配单个节点，然后您也可以单独删除它们。您根本不应该拥有该数组。）**

# python - Python中的缩进错误

> ID：14979224
> 
> 赞同：12
> 
> 时间：2013-02-20T11:53:17.373
> 
> 标签：python, compiler-errors, indentation

由于代码中的这一部分，我无法编译：

```
if command == 'HOWMANY':
    opcodegroupr = "A0"
    opcoder = "85"
elif command == 'IDENTIFY':
    opcodegroupr = "A0"
    opcoder = "81" 
```

我有这个错误：

> 抱歉：IndentationError: ('unndent does not match any external indentation level', ('wsn.py', 1016, 30, "\t\telif command == 'IDENTIFY':\n"))

但我没有看到任何缩进错误。可能是什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T11:54:56.650

您正在混合制表符和空格。

使用以下命令查找确切位置：

```
python -tt yourscript.py 
```

并用空格替换*所有制*表符。您确实希望将文本编辑器也配置为只为制表符插入空格。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-20T11:55:36.183

如有疑问，请更改您的编辑器以使制表符和空格可见。让编辑器将所有制表符解析为 4 个空格也是一个非常好的主意。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-25T14:40:16.460

对于崇高的文本编辑器

当代码包含用于缩进的制表符和空格的混合时，通常会发生缩进错误。我有一个非常好的解决方案来纠正它，只需在 sublime 文本编辑器中打开您的代码，然后`'Tab Size'`在 Sublime 文本编辑器的右下角找到并单击它。现在选择

```
'Convert Indentation to Spaces' 
```

或者

```
'Convert Indentation to Tabs' 
```

您的代码在任何一种情况下都可以使用。

此外，如果您希望 Sublime 文本为您自动为每个代码执行此操作，您可以更新首选项设置，如下所示：-

**Sublime Text 菜单 > 首选项 > 设置 - 特定语法：**

Python.sublime-settings

```
{
    "tab_size": 4,
    "translate_tabs_to_spaces": true
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-07T10:32:40.583

在记事本++

查看 ---> 显示符号 ---> 显示空格和制表符（选择）

用空格替换所有制表符。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-01T15:04:19.470

它也发生在我身上，但我解决了问题。我使用了 5 个空格的缩进，但是当我按下制表符时，它曾经放置了 4 个空格的缩进。所以我认为你应该只使用一件事；即添加缩进或空格的选项卡按钮。理想的缩进是 4 个空格之一。我发现 IntelliJ 对于这类事情非常有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T11:55:40.243

您是否使用了一些`<tab>`而不是空格？

尝试删除代码前的所有空格并使用`<space>`字符读取它们，以确保它不是`<tab>`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-21T12:43:25.280

这也发生在我身上，python对空间敏感，所以在“ **:** ”（冒号）之后你可能会留下一个空格，
例如：[空格由“ **.** ”表示]

```
`if command == 'HOWMANY':.
     opcodegroupr = "A0"
     opcoder = "85"
 elif command == 'IDENTIFY':.
     opcodegroupr = "A0"
     opcoder = "81"` 
```

因此，请尝试删除不必要的空格，如果您在 IDE 中打开它，您的光标将显示在远离“：”的位置，例如 :-" **if command == 'HOWMANY': |** "
....而应该是：- " **if命令 == 'HOWMANY':|** "

# c++ - 将 C++ 绑定与 GObject Introspection 结合使用

> ID：14979225
> 
> 赞同：1
> 
> 时间：2013-02-20T11:53:27.010
> 
> 标签：c++, linux, gnome, gobject, gobject-introspection

我决定在我的项目中使用[Goffice](http://developer.gnome.org/goffice/unstable/goffice-0.10-Gettings-Started-with-GOffice.html)库。但是我是用 C++ 写的，所以我更喜欢有一个 C++ 类接口，就像我使用 gtkmm 而不是直接使用 GTK+ 一样。

文档（见上面的链接）说我可以使用 GObject Introspection。所以我开始阅读它。我读了又读，我就是不明白如何使用 GOffice 的任何绑定。我在我的系统上以及 PackageKit 安装的文件列表中查找了 goffice gi-repository/typelib 文件。什么也没找到。如果 goffice 或 goffice-devel 包依赖于 gobject introspection 包，我检查了 PackageKit。也许他们间接依赖，但他们不直接依赖它（否则我会在列表中看到它）。

我试了又试，但找不到可以简单地解释如何使用 GObject 编写的库（例如 GOffice）并将其用于另一种语言（例如 Python）或在我的情况下为 C++ 的资源。当然，我可以直接使用C函数，但重点是我想要一个类似于gtkmm的界面。

（我使用 GNU/Linux，用 gtkmm 和 GNU 构建系统编写桌面应用程序，goffice 版本 0.10）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:32:24.570

目前没有用于 C++ 的 GObject Introspection 工具。您可以在[https://live.gnome.org/GObjectIntrospection/Users](https://live.gnome.org/GObjectIntrospection/Users)查看用户列表。

基于[GOffice 的 automake 文件之一](http://git.gnome.org/browse/goffice/tree/goffice/Makefile.am#n608)，GIR 名称 GOffice 是 GOffice-0.10，因此您应该期望`$(pkg-config --variable=girdir gobject-introspection-1.0)/GOffice-0.10.gir`和`$(pkg-config --variable=typelibdir gobject-introspection-1.0)/GOffice-0.10.typelib`，但是您的发行版的软件包可能不包含这些文件，在这种情况下，您可能需要考虑提交错误。

至于如何使用 GObject Introspection for Python 的文档，您应该查看[PyGObject 站点](https://live.gnome.org/PyGObject)。它们链接到[Python GTK+ 3 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/)，它应该可以帮助您了解如何使用 PyGObject。至于其他语言，文档将根据语言和实现而有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T14:14:11.803

gtkmm、glibmm 和其他 -mm 库目前仍在使用 gmmproc 工具为基于 GObject 的库生成绑定。该工具比 GObject Introspection 更早（从 GTK+ 3 开始，GI 被认为是稳定的），并且需要手动编写带有特殊宏的标头，该工具将使用这些宏来生成 C++ 源代码。有关更多详细信息和操作方法，请参阅[使用 gmmproc 包装 C 库](https://developer.gnome.org/gtkmm-tutorial/stable/chapter-wrapping-c-libraries.html.en)。

至于使用 GObject Introspection 自动生成 C++ 绑定，我发现只有一个[WIP](https://mail.gnome.org/archives/gtkmm-list/2013-November/msg00015.html)：[gi-mm](https://github.com/juanrgar/gi-mm)。

另外还有[GObject Consume](https://wiki.gnome.org/Projects/GObjectIntrospection/GObjectConsume)和[Smoke-GObject](https://launchpad.net/smoke-gobject)，它们都可以用来通过 Qt 框架将 GObjects 与 C++ 集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-12T09:36:43.660

[cppgir](https://gitlab.com/mnauw/cppgir)是 GObject-Introspection C++ 绑定包装生成器（也在[此处](https://gi.readthedocs.io/en/latest/users.html)列出）。

它是轻量级的（直接绑定），可以选择内联使用（仅标题），因此程序可以直接链接到任何基于 GObject 的库（GTK、GStreamer 等）。

[您可以从README](https://gitlab.com/mnauw/cppgir/blob/master/README.md)和[文档](https://gitlab.com/mnauw/cppgir/blob/master/docs/cppgir.md)中阅读更多信息。

# javascript - 如何在 Ember JS 中正确重新加载路由

> ID：14979227
> 
> 赞同：0
> 
> 时间：2013-02-20T11:53:29.740
> 
> 标签：javascript, ember.js

我正在使用最新版本的 Ember JS (RC1)，但我遇到了架构问题：

我有一个非常简单的用例：用户列表和添加用户的表单。我的路由器：

```
App.Router.map(function () {   
   this.resource('users', function () {
      this.route('new');
   });
}); 
```

我的路线：

```
App.UsersRoute = Em.Route.extend({
    model:function () {
        return App.User.findAll();
    }
}); 
```

我的控制器：

```
App.UsersNewController = Em.ObjectController.extend({
    saveUser:function () {
        //'content' contains the user
        App.User.save(this.content);    

        // here i want to reload the list of users, but it doesn't work
        // The application goes correctly to the url /users
        // But doesn't call the 'model' function
        this.transitionToRoute('users');
    }
}); 
```

正如我在上面的评论中所说，当我创建一个新用户时，我想重定向到用户列表（该部分有效）并通过调用路由的“模型”方法重新加载用户列表（该部分不't）。

我可以在 UsersController 中编写一个方法来重新加载列表，但是我会在 UsersRoute 和 UsersController 之间产生重复。

有人可以帮我解决这个问题吗？

谢谢

PS：这里有一个小提琴[http://jsfiddle.net/vsxXj/](http://jsfiddle.net/vsxXj/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:14:47.017

模型挂钩上的 Ember 文档：

> “你可以实现一个钩子，将 URL 转换为这条路由的模型。”

所以我认为这个钩子不适合这种情况。我认为您应该在这种情况下使用 setupController 挂钩。尝试这个：

```
App.UsersRoute = Em.Route.extend({
    setupController(controller){
        controller.set("content", App.User.findAll());
    }
}); 
```

# asp.net-mvc - MVC4 - 如何重新排列脚手架创建的生成字段

> ID：14979228
> 
> 赞同：0
> 
> 时间：2013-02-20T11:53:29.850
> 
> 标签：asp.net-mvc, html, scaffolding, asp.net-mvc-scaffolding

我有一个由 MVC4 脚手架创建的 .cshtml 文件，看起来像这样：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>BicycleSellerListing</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.BicycleManfacturer)
        </div>
        <div class="editor-field">
            @Html.DropDownList("ManufacturerList")
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.BicycleType)
        </div>
        <div class="editor-field">
            @Html.DropDownList("TypeList")
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ListingPrice)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ListingPrice)
            @Html.ValidationMessageFor(model => model.ListingPrice)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Comments)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Comments)
            @Html.ValidationMessageFor(model => model.Comments)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset> 
```

而不是在单个垂直列中生成标签和列，我想重新排列它，以便我在一列中有标签，在第二列中有编辑器字段（更多的是传统的数据输入表单）。我对 MVC 4 和 HTML5 非常陌生，并且真的不知道如何去做。如果有人可以帮助我重新排列此 .cshtml 代码来完成此操作，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:23:54.023

这是使用`float:left`和的一种方法`:before`

[http://jsfiddle.net/fdLca/](http://jsfiddle.net/fdLca/)

```
.editor-label {
    float:left;
    width:20%;
}

.editor-label:before {
    clear:left;
}

.editor-field {
    float:left;
    width:80%;
} 
```

要绕过使用 :before 如果您需要支持[较旧的 IE](http://css-tricks.com/browser-support-pseudo-elements/) (< 9)，那么您可以添加一个纯粹用于在每个字段和标签之间清除的元素。

[http://jsfiddle.net/fdLca/1/](http://jsfiddle.net/fdLca/1/)

HTML

```
<div class="editor-label">
    label1
</div>
<div class="editor-field">
    @Html.DropDownList("ManufacturerList")
</div>

<div class="clear"></div> 
```

CSS

```
.clear {
    clear:left;
} 
```

# racket - Racket：for 内部的词法范围

> ID：14979231
> 
> 赞同：3
> 
> 时间：2013-02-20T11:53:49.807
> 
> 标签：racket, list-comprehension, lexical-scope

在 Haskell 中，在列表推导中，我可以将表达式绑定到每次迭代的变量：

```
[a | x <- xs, let a = x ^ 2, a >= 25] 
```

如何在 Racket 的`for`理解中绑定词法变量？

目前我有这个代码：

```
(define (euler4)
  (apply max
         (for*/list ([i (in-range 100 1000)]
                     [j (in-range i 1000)]
                     #:when (string=? (number->string (* i j))
                                      (string-reverse (number->string (* i j)))))
           (* i j)))) 
```

我想绑定`(* i j)`到一个变量并将表达式替换为函数中的任何地方。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T12:32:37.790

使用该[`in-value`](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-value%29%29)表单具有绑定到单个值的循环变量。

在您的示例中：

```
(define (euler4)
  (apply max
         (for*/list ([i (in-range 100 1000)]
                     [j (in-range i 1000)]
                     [ij (in-value (* i j))]
                     #:when (string=? (number->string ij)
                                      (string-reverse (number->string ij))))
           (* i j)))) 
```

# maven - 如何丑化代码仅用于在 Maven 中部署

> ID：14979235
> 
> 赞同：1
> 
> 时间：2013-02-20T11:53:58.593
> 
> 标签：maven, uglifyjs

我想在 aws 上部署之前对我的 javascript 代码进行 uglify。我不想在开发过程中丑化代码。我需要两个单独的 pom 文件还是有一个聪明的方法来告诉 maven？我正在为 maven 使用 uglifyjs 插件。

任

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:58:42.990

感谢@Michael回答这个问题，我仍然会正式回答以关闭这个线程。

这是我的 maven 配置文件的样子，注意顶部的激活块，这是为了指定如何在默认配置文件上使用此配置文件，在这种情况下，我需要提供额外的参数：

> $ mvn -D部署

```
<profiles>
  <profile>
     <activation>
        <property>
           <name>deployment</name>
        </property>
     </activation>

     <pluginRepositories>
        <pluginRepository>
           <id>uglifyjs-maven-plugin</id>
           <url>https://raw.github.com/tqh/uglifyjs-maven-plugin/master/repo</url>
        </pluginRepository>
     </pluginRepositories>

     <build>
        <plugins>
           <plugin>
              <groupId>net.tqh.plugins</groupId>
              <artifactId>uglifyjs-maven-plugin</artifactId>
              <version>1.0</version>
              <configuration>
                 <sourceDirectory>target/snapshot/javascript</sourceDirectory>
                 <outputDirectory>target/snapshot/javascript</outputDirectory>
              </configuration>
              <executions>
                 <execution>
                    <phase>prepare-package</phase>
                    <goals>
                       <goal>uglify</goal>
                    </goals>
                 </execution>
              </executions>
           </plugin>

           <plugin>
              ... other plugins here ...
           </plugin>
        </plugins>
     </build>
  </profile>
</profiles> 
```

# atom-feed - 为什么 Atom 使用了这么多不同的链接关系？

> ID：14979236
> 
> 赞同：2
> 
> 时间：2013-02-20T11:53:58.730
> 
> 标签：atom-feed

我和我的同事正在构建一个 Atom 提要。我们在许多单独的 Atom 文档上对提要进行分页，并为每个文档添加链接以允许消费者遍历整个提要。

我们想知道应该选择哪些[链接关系](http://www.iana.org/assignments/link-relations/link-relations.xml)来指示指向提要中下一个和上一个文档的链接。[实践中的 REST](http://restinpractice.com/book/)使用“下一个存档”和“上一个存档”。[AtomPub](http://atompub.org/)使用“下一个”和“上一个”。“prev”是“previous”的公认别名。

```
<?xml version="1.0">
    <feed xmlns="http://www.w3.org/2005/Atom">
        <id>urn:uuid:ff31a040-75bc-11e2-bcfd-0800200c9a66</id>
        <link rel="next" href="http://example.com/documents/4" />
        <link rel="prev" href="http://example.com/documents/2" />
        <entry>..</entry>
        <entry>..</entry>
        <entry>..</entry>
    </feed> 
```

有什么理由选择一组关系而不是其他关系？这将被消费者最广泛地理解。为什么会有这样的多样性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T19:16:08.727

以下是众多链接关系的原因：

> 为了方便和/或促进其他应用程序的重用，可以将明确定义的关系类型注册为标记。本规范建立了此类关系类型的 IANA 注册；见第 6.2 节。

机器使用它们作为断言 URL 之间关系的一种方式。

以下是不同的用例：

*   `next-archive`并且`previous-archive`特定于提要 URL
*   `next`并且`previous`对所有 URL 都是通用的

**参考**

*   [链接关系](http://www.iana.org/assignments/link-relations/link-relations.xhtml)

*   [RFC5988：网络链接](https://www.rfc-editor.org/rfc/rfc5988)

*   [RFC5005：提要分页和归档](http://www.ietf.org/rfc/rfc5005.txt)

*   [Atom 发布格式和协议](http://xml.coverpages.org/atom.html)

# iphone - 将方法与按钮“内部修饰”操作集成

> ID：14979246
> 
> 赞同：1
> 
> 时间：2013-02-20T11:54:40.470
> 
> 标签：iphone, ios, objective-c

我有一个正在运行的项目，现在它几乎完成了，但现在我在应用程序委托类中有一个方法，我希望应该在项目中的所有按钮上调用这个方法。一种简单的方法是我应该在每个按钮侦听器代码中添加对方法的调用。但是有没有一种方法可以让它与按钮动作“内部修饰”连接起来

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:25:32.197

通过继承 UIButton 类来覆盖 sendActionsForControlEvents。

```
- (void)sendActionsForControlEvents:(UIControlEvents)controlEvents {
   if(controlEvents == UIControlEventTouchUpInside) {
      //call your method.  
   }
   [super sendActionsForControlEvents:controlEvents];
} 
```

您可能必须遍历所有 UIButton 并将其类更改为您的子类。我还没有尝试过，但我认为你可以试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-23T07:48:11.633

您可以为此使用***扩展名***

```
extension UIButton
{
    override open func sendActions(for controlEvents:UIControlEvents) 
    {
        if controlEvents == .touchUpInside
        {
           // Type your custom execution here
        }
    }
} 
```

这将为按钮上的每个事件调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-29T15:58:47.830

> **迅速 5**

```
extension UIButton {
     open override func sendAction(_ action: Selector, to target: Any?, for event: UIEvent?) {
        //your code
        super.sendAction(action, to: target, for: event)
    }  
} 
```

我发现这是为每个按钮单击实现通用操作的最简单方法。这比对应用程序中的每个按钮进行子类化要简单得多。

# jquery - 加载html时加载图像不显示

> ID：14979247
> 
> 赞同：1
> 
> 时间：2013-02-20T11:54:44.187
> 
> 标签：jquery, ajax, loader

我试图在 HTML 内容加载之前显示加载图像，但由于某种原因它没有出现在 HTML 加载之前：

你可以在这里看到它的作用：http: [//www.machinas.com/wip/esprit/games/2013_Spring_game/html/](http://www.machinas.com/wip/esprit/games/2013_Spring_game/html/)

单击播放 >>> 开始游戏...然后加载到 HTML 中。

HTML

```
<div id="loading-image"></div> 
```

CSS

```
#loading-image{
    background:url(../img/ajax-loader.gif) no-repeat 0 0;
    position:absolute;
    top:50%;
    left:50%;
    width:16px;
    height:16px;    
    margin-left:-8px;
    display:none;
} 
```

查询：

```
$('body').on('click', '.mch-ajax', function(e){
        e.preventDefault();
        $('#mch-overlay').fadeOut(300);
        $( ".content" ).load("game.html", function() {
            $("#loading-image").show();
                var myBackgroundImage = new Image();
                myBackgroundImage.src = "http://www.machinas.com/wip/esprit/games/2013_Spring_game/html/img/bg-map.png";        
                myBackgroundImage.onload = function () {
                    $("#loading-image").hide();
                    $( ".map" ).fadeIn(300);
                    $( ".note" ).delay(400).fadeIn(700);
                    $( ".route" ).delay(800).fadeIn(700);
                    $( ".start-btn" ).delay(1200).fadeIn(700);
                };

        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:58:18.150

您发布的第二个参数`.load()`是*回调*，它在内容加载*后执行。*您只需在调用之前移动加载图像逻辑`.load()`。

```
$('body').on('click', '.mch-ajax', function(e){
        e.preventDefault();
        $('#mch-overlay').fadeOut(300);
        $("#loading-image").show();
        $( ".content" ).load("game.html", function() {
                var myBackgroundImage = new Image();
                myBackgroundImage.src = "http://www.machinas.com/wip/esprit/games/2013_Spring_game/html/img/bg-map.png";        
                myBackgroundImage.onload = function () {
                    $("#loading-image").hide();
                    $( ".map" ).fadeIn(300);
                    $( ".note" ).delay(400).fadeIn(700);
                    $( ".route" ).delay(800).fadeIn(700);
                    $( ".start-btn" ).delay(1200).fadeIn(700);
                };

        }); 
    }); 
```

# javascript - 将对象列表转换为嵌套 UL 不起作用

> ID：14979250
> 
> 赞同：2
> 
> 时间：2013-02-20T11:54:46.213
> 
> 标签：javascript, recursion

我正在尝试将通过 ajax 获得的对象列表转换为类别菜单的嵌套 ul。看了这个网站后，我找到了一个 PHP 函数并将其转换为 javascript。

不幸的是，它不起作用：

```
function has_children(data, id) {
    for(a=0; a<data.length; a++) {
        if (data[a].ParentID == id) return true;
    }
    return false;
}

function renderCategoryTree(data, parent) {
    result = "<ul>";
    for(index=0; index<data.length; index++) {
        if (data[index].ParentID == parent) {
            result = result + "<li>" + data[index].Name;
            if (has_children(data, data[index].ID)) 
                result = result + renderCategoryTree(data, data[index].ID);
            result = result + "</li>";
        }
    }
    result = result + "</ul>";

    return result;
}

var stuff= [ { ID: 1, ParentID: 0, Name: 'Development' },
{ ID: 2, ParentID: 0, Name: 'Databases' },
{ ID: 3, ParentID: 0, Name: 'Systems' },
{ ID: 4, ParentID: 1, Name: 'java' },
{ ID: 5, ParentID: 1, Name: 'c++' },
{ ID: 6, ParentID: 1, Name: 'python' },
{ ID: 7, ParentID: 1, Name: 'ruby' },
{ ID: 8, ParentID: 2, Name: 'mysql' },
{ ID: 9, ParentID: 2, Name: 'oracle' },
{ ID: 10, ParentID: 2, Name: 'sqlite' },
{ ID: 11, ParentID: 3, Name: 'linux' },
{ ID: 12, ParentID: 3, Name: 'windows' } ];

  alert(renderCategoryTree(stuff, 0)); 
```

渲染在“ruby”处停止。我认为问题在于 javascript 输入的工作方式，但我不确定。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:10:17.997

我不是 100% 确定，但我认为你的循环计数器是全球性的。所以如果你写

```
for(var a=0; a<data.length; a++) { 
```

代替

```
for(a=0; a<data.length; a++) { 
```

和

```
for(var index=0; index<data.length; index++) { 
```

代替

```
for(index=0; index<data.length; index++) { 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:10:33.223

我发现了问题：因为 javascript 变量在嵌套函数调用中仍然存在，所以您必须使用 var 将它们设为本地。

只需将 var 添加到索引声明即可！

# ruby-on-rails - 使用 Devise、Rails 3.2.12 进行 LDAP 身份验证

> ID：14979253
> 
> 赞同：1
> 
> 时间：2013-02-20T11:54:53.840
> 
> 标签：ruby-on-rails, devise, ldap

我正在尝试使用 LDAP 和 Devise 登录，但由于某种原因它不起作用。

在我的 LDAP 文件中，我只有：

```
host: xxxxxxxx
port: 389
attribute: uid
base: ou=Students, dc=xxx, dc=xx, dc=xx
ssl: false 
```

我的模型被称为用户。

Devise 自己提出的查询是...是否正常？

```
SELECT "users".* FROM "users" WHERE "users"."username" = 'xxxx' LIMIT 1 
```

我真的找不到这方面的文档。能否请你帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:59:44.523

对于像我一样对 LDAP 感到困惑的人，答案是：**是的，这很正常**。

也许我应该提到我在原始问题中谈论的是[devise_ldap_authenticable](https://github.com/cschiewek/devise_ldap_authenticatable) gem。我的错。

在该`config/initializers/devise.rb`文件中，您将找到 and 的配置文件`devise`，`devise_ldap_authenticatable`其中将有一行类似于：

```
config.ldap_create_user = false (by default) 
```

如果将其更改为 true，那么只要成功登录，它将在本地数据库中创建一个用户。这就是为什么第一篇文章中的 SQL 语句存在的原因，它只是查看用户是否已保存。奇怪的是，即使`ldap_create_user`选项为假，它也会执行并显示语句。

# encryption - 运行时解密（PE 文件打包器）

> ID：14979258
> 
> 赞同：1
> 
> 时间：2013-02-20T11:55:06.213
> 
> 标签：encryption, runtime, portable-executable, packer

我一直在编写自己的 PE 文件打包器，但我一直在解密代码部分。到目前为止，我已经设法添加了一个新部分，对代码部分进行加密，更改入口点以便它首先运行我的解密例程，当然还编写了解密例程。解密例程类似于[编写文件感染器/加密器：编写编译存根（3/4）](http://www.codereversing.com/blog/?p=94)，但它只有一个简单的 xor 7 解密（大部分是相同的，我刚刚更改了解密例程） . 据我在调试器中看到的，.text（代码）部分可以解密，但有时它会卡在：

```
call    probni-o.__security_init_cookie 
```

（olly dbg say EIP = 0 ），当我说有时我是认真的，因为有时它运行良好，我的程序运行良好，但有时不是（它只在调试器中运行正常，当我正常启动它时它不会）

还有一个问题我忽略了，但不知道这两个问题是否有联系（可能没有）；当我添加我自己的部分时，我已经`SizeOfRawData`将部分对齐与我在几个地方读过的部分对齐，但是我的 PE 文件不是有效的 Win32 应用程序，但是当我编写它而不对齐它时，它运行好的，所以我忽略了它...

提前致谢！

# api - Wp8手机信号塔信息

> ID：14979269
> 
> 赞同：2
> 
> 时间：2013-02-20T11:55:35.970
> 
> 标签：api, windows-phone-8, cellid

在 windows phone 8 上，是否有任何 api 来获取最近的手机信号塔信息？像小区ID，位置区号等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T18:43:33.853

当前的 Windows Phone 8 API 不提供这些详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T20:59:00.043

WP 8.1 有更新吗？

到目前为止我发现的最好的：

```
NetworkInterfaceList networkInterfaceList = new NetworkInterfaceList();
foreach (NetworkInterfaceInfo networkInterfaceInfo in networkInterfaceList)
{
    if (networkInterfaceInfo.InterfaceSubtype == NetworkInterfaceSubType.Cellular_HSPA)
    {...}
} 
```

但它不是 MCC、MNC、LAC、CellID 级别的数据。

# java - 将时间戳 EEE、d MMM yyyy HH:mm:ss GMT 格式转换为 yyyy-MM-dd'T'HH:mm:ss'Z' 格式？

> ID：14979270
> 
> 赞同：2
> 
> 时间：2013-02-20T11:55:37.173
> 
> 标签：java, date

我想将时间戳转换`Wed, 20 Feb 2013 11:41:23 GMT`为`2013-02-20T11:41:23Z`. 我怎样才能做到这一点？我想要 UTC 格式的 ISO-8601 (2013-20-02T04:51:03Z)。

我的代码如下

```
Date date=new Date();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
String strDate = date.toString();
Date dt = formatter.parse(strDate );
System.out.println("Date " +dt); 
```

输出是：

```
Exception in thread "main" java.text.ParseException: Unparseable date: "Wed Feb 20 03:50:03 PST 2013" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:21:19.063

您的格式有什么问题，请使用： **“EEE MMM dd HH:mm:ss Z yyyy”**，这就是异常出现的原因，在问题中您有**“EEE，dd MMM yyyy HH:mm:ss Z** ”格林威治标准时间 2013 年 2 月 20 日星期三 11:41:23

尝试：

```
 Date date = new Date();
        SimpleDateFormat formatter = new SimpleDateFormat(
                "EEE MMM dd HH:mm:ss Z yyyy");
        String strDate = date.toString();
        Date dt = null;
        try {
            dt = formatter.parse("Wed Feb 20 03:50:03 PST 2013");
        } catch (ParseException e) {
            e.printStackTrace();
        }
        System.out.println("Date " + dt);
        System.out.println(new Timestamp(new Date().getTime())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:00:24.170

考虑使用[Joda Time](http://joda-time.sourceforge.net/)，它内置了对解析和输出 ISO 格式日期字符串的支持。

```
new DateTime(DateTimeZone.UTC).toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:57:27.010

您需要 2 个 DateFormatter，一个用于解析，一个用于输出。你有一个输出。

编辑：输出是这样的：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
String output = formatter.format(new Date());
System.out.println("Date " + output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:02:43.017

```
DateFormat format = new SimpleDateFormat ("yyyy-MM-dd'T'HH:mm:ss'Z'");
format.setTimeZone (TimeZone.getTimeZone ("UTC"));
Date date = new Date ();
System.out.println ("Date is: " + format.format (date)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:02:58.900

你已经有了一个`Date`对象。你只需要[`format`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)它`String`。

`formatter.format(date)``SimpleDateFormat`如果构造函数中的模式有效，应该会给你想要的结果。

通过上述实现，您的代码如下所示：

```
Date date = new Date();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
String dt = formatter.format(date);
System.out.println("Date " + dt); 
```

这会产生类似 - 的输出`Date 2013-02-20T17:39:45Z`。

# google-analytics - 如何在 Google Analytics 中获得更多访问者国家/地区？

> ID：14979279
> 
> 赞同：1
> 
> 时间：2013-02-20T11:56:18.020
> 
> 标签：google-analytics, google-analytics-api

过去一周，我一直在我的移动网站上运行服务器端 (WAP) GA，排名第一的访问者国家/地区大约是“（无）”。37%。有没有办法获得更多的访问者位置而不是“（无）”？绝大多数流量来自不支持 JS 的移动浏览器（这就是我使用服务器端实现的原因）。

我听说这可能与 Opera 浏览器有关，但我不确定该信息的准确性如何。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:36:09.410

Opera Mini 浏览器在位置统计数据上给人留下了深刻的印象，所以经过更多研究后，我从这个链接中找到了以下信息：

[http://my.opera.com/community/openweb/idopera/](http://my.opera.com/community/openweb/idopera/)

> Opera Mini 通过在我们位于挪威、冰岛、美国、中国或月球的数据中心之一进行渲染来实现其速度和压缩。因此，使用 REMOTE_ADDR 粗略检查 IP 地址将为您提供其中一个数据中心的地址，而不是用户的地址。
> 
> 开发人员应改为检查 X-Forwarded-For (XFF) HTTP 标头字段，这是一个事实上的标准，用于识别通过 HTTP 代理或负载平衡器连接到 Web 服务器的客户端的原始 IP 地址。

在对 ga.php 脚本进行此更改后，访问国家/地区“无”已从 37% 变为大约 16.5%。结果不言自明。希望这可以帮助某人。

# java - ListView 上的 Android java.lang.IllegalStateException

> ID：14979284
> 
> 赞同：1
> 
> 时间：2013-02-20T11:56:26.777
> 
> 标签：java, android

我用`ListActivity`那个`SpecialAdapter`显示一些日志信息。我不使用后台线程，但滚动列表时出现错误：

```
java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class ru.FoxGSM.ui.DebugActivity$SpecialAdapter)] 
```

请帮我。

（`FoxLog`是获取日志信息的静态类，可能来自另一个线程。但在列表中需要显示`FoxLog`快照）

```
public class DebugActivity extends ListActivity {

private class SpecialAdapter extends BaseAdapter    {
    private LayoutInflater mInflater;

    public SpecialAdapter(Context context)  { 
        super();
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);
    }

    public int getCount()   {
        return  FoxLog.count();
    }

    public long getItemId(int index)    {
        return index;
    }

    public Object getItem(int index)    {
        return  FoxLog.get(FoxLog.count()-index-1);
    }

    // Get the type of View
    public View getView(int position, View convertView, ViewGroup parent)   {
        TextView text;

        if (convertView == null)    {
            convertView = mInflater.inflate(R.layout.debug_list, null);
            text = (TextView)convertView.findViewById(R.id.text);
            convertView.setTag(text);
        }   else
            text = (TextView) convertView.getTag();

        String s = (String) getItem(position);
        if (s==null)
            return convertView; 

        text.setText(s);

        boolean isError = false;
        if (s!=null && s.length()>0)    {
            String prefix = s.substring(0, 1);
            if (prefix.equals("E") || prefix.equals("W"))
                isError = true;
        }
        if (isError)
            text.setBackgroundResource(R.color.red);
        else
            text.setBackgroundDrawable(null);
        return convertView;    

    }
}

private void RefreshData()  {
    FoxLog.ReInit(this);        
    SpecialAdapter adapter = (SpecialAdapter)this.getListAdapter();
    adapter.notifyDataSetChanged();
}

@Override
public void onCreate(Bundle savedInstanceState) {           
    super.onCreate(savedInstanceState);
    setContentView(R.layout.debug);

    FoxLog.ReInit(this);        
    SpecialAdapter adapter = new SpecialAdapter(this);                
    setListAdapter(adapter);        

    Button mExit = (Button)findViewById(R.id.exit);
    mExit.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            finish();
        }          
    });

  }

} 
```

# html - 移除光标后保持Transition效果

> ID：14979285
> 
> 赞同：2
> 
> 时间：2013-02-20T11:56:28.200
> 
> 标签：html, css, animation, css-transitions

我需要将`background-color`from更改`red`为`transparent`.

当我将鼠标悬停在 div 上时，应该会发生这种变化。

原因是我需要它`transparent`，以便我可以在主 div 下显示一个绝对定位的 div，换句话说，当我将鼠标悬停在父 div 上时，我需要显示子 div。

当我将光标从该 div 移开时，我不想要 a `reverse-transition`，我希望背景保持透明，我希望蓝色 div 在我移开光标后始终存在。

因为我需要一个纯 CSS 解决方案（没有 JS/JQuery），所以我进入了 CSS3 过渡。

```
<div id="parent">
     <div id="child">
     </div>
</div> 
```

这是一个[小提琴](http://jsfiddle.net/TCjBv/)（Firefox）。

```
#parent
{
     background:red;
     -moz-transition:background 1s;
}
#parent:hover
{
     background:transparent;
} 
```

我考虑过用 来做这件事`animation`，因为我可以`fake`通过给它一个**临时**的持续时间来保持透明，例如。

```
0% {background:red;}
1% {background:transparent;}
100% {background:transparent;} 
```

但是，当我将光标移开时，动画将停止。

注意：这听起来可能很荒谬或愚蠢，但我的意图远不止于此，这只是一个小例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:13:48.187

看看[`transition-delay`](https://developer.mozilla.org/en-US/docs/CSS/transition-delay)物业。

```
#parent { transition-delay:999999s; }
#parent:hover { transition-delay:0s; } 
```

[**小提琴**](http://jsfiddle.net/TCjBv/2/)

这样，悬停动画将立即发生 ( `0s`)，而到初始状态的转换只会在 277 小时后发生而不离开页面。如有必要，您可以进一步增加该值，尽管我相信这个值对于真实世界的页面来说已经足够了。`=]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:11:04.997

我认为纯 CSS 不可能。作为一种折衷方案，您可以使用 JavaScript 向元素添加一个类，然后使用 CSS 处理所有视觉效果。

[http://jsfiddle.net/ZvcgP/1/](http://jsfiddle.net/ZvcgP/1/)

HTML

```
<div class="effect">Hover me</div> 
```

CSS

```
.effect {
    background-color: red;

    -webkit-transition:background 1s;
    transition:background 1s;
}

.effect.anim-done {
    background-color: transparent;
} 
```

JS

```
$('.effect').mouseenter(function () {
    $(this).addClass('anim-done');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:50:17.043

使用下面的代码从红色过渡到透明。并将“对象”更改为您的对象的类

```
.object {

background-color: red;

-webkit-transition:background-color 1s linear;  /*   for webkit supported browsers   */
-moz-transition:background-color 1s linear;  /*   for old mozilla browsers   */
-o-transition:background-color 1s linear;  /*   for opera browsers   */
transition:background-color 1s linear;  /*   for css3 supported browsers   */
}

.object:hover {
background-color: transparent; 
```

}

# java - 如何使用 URLConnection 添加会话 ID

> ID：14979288
> 
> 赞同：2
> 
> 时间：2013-02-20T11:56:40.893
> 
> 标签：java, httpsession

我正在尝试使用服务器 url 将图像上传到服务器。为此，我正在使用`java.net`api。发送请求后，它返回一个显示会话无效的响应。我正在从该服务器获取会话 ID，但无法添加它。如何`HttpURLConnection`在向服务器发送请求时添加会话 ID。他们有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T07:56:30.953

会话 ID 存储在一个 cookie 中，在 JavaEE 中它的名称是`jsessionid`，你可以这样添加它：

```
httpURLConnection.setRequestProperty(
    "Cookie","JSESSIONID=" + your_session_id); 
```

# r - 在加权直方图上绘制正态曲线

> ID：14979290
> 
> 赞同：1
> 
> 时间：2013-02-20T11:56:42.130
> 
> 标签：r, normal-distribution, weighted

我有一个数据集，因为数据需要我绘制**加权**直方图

```
gridcellname  value  avg.temp
Y55X21          4,84    4,09
Y56X17          0       5,34
Y44X44          2,75    1,8
Y46X38          3,68    3,4
Y58X19          4,32    5,08
Y59X17          0       4,8
Y60X20          5,29    5,27
Y61X18          0       5,15
Y62X21          5,59    5,09
Y63X19          3,05    5,47
Y64X22          2,75    5,04
Y65X25          4,82    4,54
Y66X22          0       4,54 
```

我使用加权直方图并从

```
H <- weighted.hist(df$avg.temp, df$value, ylim=c(0,120), breaks=c(seq(-1.5,8.5, by=0.5))) 
```

或者

```
ggplot(df, aes(y=value, x=temp_category)) + stat_summary(fun.y="sum", geom="bar") 
```

这给了我一个很好的图表，但我无法在它上面绘制一条正常曲线。正如您从 2 个图中看到的那样，我可能没有 (-1.5,-1) 类别中的数据，但我仍然想绘制它并保持我的 y 轴范围 (0,120) 尽管我的最大值约为 40 .

我已经尝试了这两个代码来添加曲线，但它并不完全正确

```
xfit<-seq(min(df$value),max(df$value)) 
yfit<-dnorm(xfit,mean=mean(df$value),sd=sd(df$value)) 
yfit <- yfit*diff(H$mids[1:2])*length(df$value) 
lines(xfit, yfit, col="blue", lwd=2) 
```

这条曲线似乎在我的情节的左侧。

```
ggplot(df, aes(y=value, x=temp_category)) + stat_summary(fun.y="sum", geom="bar") + stat_function(fun=dnorm, args=list(mean=mean(df$value), sd=sd(df$value))) 
```

这给了我一条到 x 轴的几乎平坦的水平线。

谢谢！

# php - 如何从单个查询将数据从 mysql 调用到 php/html 表单

> ID：14979295
> 
> 赞同：0
> 
> 时间：2013-02-20T11:56:56.450
> 
> 标签：php, html, mysql

我得到了结果。但我为每个人创建了 2 个不同的配置文件。但我得到了这两个人的相同个人资料详细信息。例如：sam 和 john 有不同的个人资料详细信息。但是当我打开 sam 的个人资料详细信息时，它会显示 john 的个人资料详细信息。实际上，它在每个不同的配置文件中都显示了一个细节。帮我。

**“这是我的问题”**

```
if(isset($_GET["employeecode"])){
$employeecode=$_GET["employeecode"];

require_once("dbconfig.php");

        $query = ("select t1.employeecode,t1.panno,t1.employeename,t1.esino,t1.designation,t1.paiddays,t1.department,t1.lopdays,t1.bank,t1.bankname,t1.pfno,t1.location,
                t2.v, t2.w,t2.x,t2.a,t2.b,t2.c,t2.d,t2.e,t2.f,t2.g,t2.h,t2.i,t2.j,t2.k,t2.l,t2.m,t2.n,t2.o,t2.p,t2.q,t2.r,t2.s,t2.t,t2.u,
                t3.total, t3.totals,t3.totalss,t3.netsalary,t3.amount,t3.mode
                FROM invoice t1,salaries t2,total1 t3
                WHERE t1.employeecode = t2.employeecode AND t2.employeecode = t3.employeecode");                

$result = mysql_query($query,$con) or die(mysql_error());
if(mysql_num_rows($result)>0){
    $row = mysql_fetch_array($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:00:01.917

使用此查询，使用忘记包含`$employeecode`在您的查询中。正因为如此，它显示了所有员工的结果。

```
$query = ("select t1.employeecode,t1.panno,t1.employeename,t1.esino,t1.designation,t1.paiddays,t1.department,t1.lopdays,t1.bank,t1.bankname,t1.pfno,t1.location,
 t2.v, t2.w,t2.x,t2.a,t2.b,t2.c,t2.d,t2.e,t2.f,t2.g,t2.h,t2.i,t2.j,t2.k,t2.l,t2.m,t2.n,t2.o,t2.p,t2.q,t2.r,t2.s,t2.t,t2.u,
 t3.total, t3.totals,t3.totalss,t3.netsalary,t3.amount,t3.mode
 FROM invoice t1,salaries t2,total1 t3
 WHERE t1.employeecode = t2.employeecode AND t2.employeecode = t3.employeecode AND t1.employeecode = '$employeecode'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:01:53.357

您似乎没有指定要搜索的特定员工，只有“t1.employeecode = t2.employeecode”。

试试这个：

```
if(isset($_GET["employeecode"])){
    $employeecode=$_GET["employeecode"];

require_once("dbconfig.php");

$query = ("select t1.employeecode,t1.panno,t1.employeename,t1.esino,t1.designation,t1.paiddays,t1.department,t1.lopdays,t1.bank,t1.bankname,t1.pfno,t1.location, t2.v, t2.w,t2.x,t2.a,t2.b,t2.c,t2.d,t2.e,t2.f,t2.g,t2.h,t2.i,t2.j,t2.k,t2.l,t2.m,t2.n,t2.o,t2.p,t2.q,t2.r,t2.s,t2.t,t2.u, t3.total, t3.totals,t3.totalss,t3.netsalary,t3.amount,t3.mode FROM invoice t1,salaries t2,total1 t3 WHERE t1.employeecode = " . $employeecode . " AND t2\. employeecode = " . $employeecode . " AND t3..employeecode = " . $employeecode . "");             

$result = mysql_query($query,$con) or die(mysql_error());
if(mysql_num_rows($result)>0)
{
    $row = mysql_fetch_array($result); 
```

正如您在 WHERE 查询末尾看到的那样，我将 $employeecode 值嵌入到字符串中，以便查询将搜索特定用户。

# java - 如何使用 Crieteria 基于一个属性获取唯一记录

> ID：14979303
> 
> 赞同：0
> 
> 时间：2013-02-20T11:57:24.503
> 
> 标签：java, hibernate

我想要使​​用 Crieteria 基于单个属性值的唯一记录，请告诉我这样做的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:01:09.583

用这个：

```
 criteria.setProjection(Projections.distinct(Projections.property("yourProperty")));
            List result = criteria.list(); 
```

或者，如果您想要整行，您可以使用 detachedCriteria：

```
 DetachedCriteria dt = DetachedCriteria.forClass(yourClass.class);
            dt.setProjection(Projections.distinct(Projections.property("yourProperty")));

            criteria.add(Subqueries.propertyIn("yourProperty", dt));
            criteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:26:31.933

```
Criteria c = session.createCriteria(Pojo.class);
criteria.setProjection(Projections.distinct(Projections.property("property")));
List list = criteria.list(); 
```

# ios - 不能使用其他类的 reloadData

> ID：14979308
> 
> 赞同：2
> 
> 时间：2013-02-20T11:57:33.937
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我有 2 个类，classA 和 classB 在 classA 中，我有一个可以按需工作和刷新的表格视图。所有的代表和数据源都很好，还有一个属性`@property (nonatomic, retain) UITableView *myTableView;`

我不想放入`reloadData`classA 的 viewDidAppear 或 viewWillAppear。我想`[myTable reloadData]`从 B 级开火。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T12:02:38.153

使用委托重新加载您的表格视图。

在tableview所在的类中，在viewDidLoad中这样写：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"updateLeftTable"
                                              object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(checkRes:) name:@"updateLeftTable" object:nil]; 
```

然后在同一个类中实现它的功能，如下所示：

```
-(void)checkRes:(NSNotification *)notification
{
   if ([[notification name] isEqualToString:@"updateLeftTable"])
   {
      [_rearTableView reloadData];
   }
} 
```

最后，在要重新加载 tableview 的类中粘贴以下行（重要的是，此行进入要重新加载 tableview 的方法中）：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateLeftTable" object:self]; 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:08:07.783

当你调用 classA *test = [[classA alloc]init]; ，它会为您的 A 类创建一个新对象，并且对于您在此类中声明的每个变量，它的值都为零。这就是为什么不调用您的 reloaddata 的原因，因为您的数组对于您用于重新加载表的该对象具有 nil 值。

您必须使用委托将 A 类的对象传递给 B 类。然后尝试从此委托对象重新加载表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:14:03.717

```
 ClassB.h

    @protocol ClassBDelegate <NSObject>

    -(void)reloadTableView;

    @end

    @property (nonatomic,weak)id<ClassBDelegate>delegate;

    ClassB.m

    -(void)methodForReloadingTableViewInClassA
    {

    [self.delegate reloadTableView];

    }

Class A.h
#import ClassB.h
@interface ClassA : UITableViewController<UITableViewDelegate,UITableViewDatasource,ClassBDelegate>
{
}

ClassA.m   
-(void)createClassB
{
    ClassB *obj = [[ClassB alloc]init];
    obj.delegate = self;
}

    //delagte method of class B
    -(void)reloadTableView
    {

    [self.tableView reloadData];

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:00:38.853

我认为你应该由代表重新加载它。

在这里你的 ClassB.h 在这里你需要添加你的代表

```
@property (nonatomic, strong) id myDelegate; 
```

在这里你的 ClassA.m 当你要去 ClassB 时显示他的代表 t ClassA

```
ClassB *goNext = [[ClassB alloc] initWithNibName:@"ClassB" bundle:nil];
goNext.myDelegate = self; // ALL YOUR BASE ARE BELONG TO US!
[self.navigationController pushViewController:goNext animated:YES]; 
```

下一个。当你想重新加载你的 classA tableView 时，使用如下代码：

```
if (myDelegate && [myDelegate respondsToSelector:@selector(reloadMyTV)]){
        [myDelegate performSelector:@selector(reloadMyTV) withObject:nil];
    } 
```

其中“reloadMyTV”是 ClassA 的方法：

```
-(void) reloadMyTV {
[myTableView reloadData];
} 
```

希望我记得代表足够好）我是凭记忆写的））希望它会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:01:09.163

从[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadData)：

> 为了提高效率，表格视图只重新显示那些可见的行。

因此，如果您`tableView`不可见，则不会更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T12:17:24.603

调用 reloadData 方法会在调用该方法后立即刷新数据。确保在调用 reloadData 之前更改了数据源（数组或字典或保存值的位置）。

您应该尝试在主线程上重新加载数据： [tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T12:34:38.020

检查您的`UITableView`财产在您致电时是否有效`reloadData`。`UIViewController`是通过调用创建的`alloc init`，但您的视图当前处于无效状态。在 reloadData 代码行中设置断点并检查您是 .tableView == nil 吗？

# sql - 将数据从生产数据库移动到数据仓库 (SQL Server)

> ID：14979309
> 
> 赞同：2
> 
> 时间：2013-02-20T11:57:33.890
> 
> 标签：sql, sql-server, tsql, ssis

我们正在为我们的软件开发一个报告模块，因此我们需要将一些数据从系统的生产数据库移动到一个数据仓库数据库中，该数据库将用作报告的数据源（SQL Server 报告）。

生产数据库中的模式已经很老了，所以一旦我们在 DW 数据库中有数据，我们将需要一些额外的字段（例如，从 prod 数据库的“日期”和“时间”整数列中计算出正确的日期时间列。 （别问了，老了。）

我们正在内部讨论如何以有效的方式做到这一点。现在，它是在一个丑陋的 SSIS 作业中实现的，基本上每晚都会拆除整个 DW DB，然后从 prod db 重新构建它，同时进行数据转换。这不能很好地扩展。

我一直在研究使用“更新”的技术，例如 SQL Server 复制以更精细的方式移动数据。

我对此的问题是： - 通过复制，“移动数据”部分显然得到了解决，但数据转换部分没有得到解决。我知道我可以在 DW DB 上创建更新触发器，但是每当我对订阅进行重新初始化时，所有与表相关的触发器似乎都会被擦除，这使得设置变得困难。

我不是在这里寻找一个确切的答案，更多的是关于采取这个方向的提示。对不起，如果问题有点模糊。

**更新：** 感谢下面的好点。这是我们向客户销售的软件，因此我非常喜欢为客户设置和维护尽可能少的“配置项”。今天的 SSIS 包是客户需要密切关注的另一个“项目”，以及它的时间表。

复制让我很感兴趣，因为它在移动数据时完全抽象了整个 CRUD “困境”，但你可能是对的 - SSIS 仍然会更好，只要 SSIS 逻辑的创建比现在更智能一点。

数据可能非常大，因此像我们今天所做的那样擦除和重新导入所有内容绝对是一个需要解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:07:22.260

我不认为复制是一个好主意。如果源模式和目标模式完全相同，但正如您所指出的那样，它们不是。而且，你提到的 SSIS 正在做的所有计算，你仍然必须这样做，因为复制不会。

我认为 SSIS 是要走的路，我的意思是，这正是它存在的原因。

由于您在每次加载时都重新创建数据库，并且如果计算和更改的数量不大并且您不需要进行查找以从自然键中获取代理键，您可以在主数据库上创建视图以尝试模仿目标数据库的结构，以便您可以直接插入（几乎是映射到目标组件的源组件）

也许如果您指定要解决的 SSIS 的真正问题是什么，那么提供帮助会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:36:09.740

只是对此的快速更新：SQL Server 的 CDC 功能似乎是我们需要研究的，该功能与 SSIS 很好地集成。感谢关于慢慢变化的维度和 SSIS 的提示！

# java - java时区和夏季-冬季

> ID：14979310
> 
> 赞同：3
> 
> 时间：2013-02-20T11:57:38.883
> 
> 标签：java, timezone

我们有一个 java 程序，它在启动时使用 -Duser.timezone 参数：

-Duser.timezone="CET"

这是必要的，因为我们不能依赖服务器的内部时钟（管理员玩弄，设置错误的时区等等，不要问 :-( ) 并且前端的时区与后端匹配很重要。

由于该程序没有定期重新启动（它是一个服务器），我想知道当我们从冬季切换到夏季时会发生什么？它会自动切换还是我们必须重新启动服务器？

谢谢和问候， 亚历克斯

编辑：java可能会通过每次调用使用日期的函数来确定正确的时区。但是java也有可能在启动时确定正确的时区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:00:08.043

Java 中的时间只是一个简单的 long 值（自 1970 年以来的毫秒数），没有任何有关时区的信息。并且还在内部将日期/时间存储为自 1970 年以来的毫秒数`java.util.Date`，`java.sql.Date`但使用 UTC 时区。

当您格式化输出的日期/时间或从字符串解析日期/时间时，时区就会发挥作用。`-Duser.timezone`届时将使用您设置的时区信息。

所以它应该可以工作，并且一个小测试也显示了它：

```
public static void main(String[] args) {
    Calendar c = Calendar.getInstance();
    c.set(2013, 2, 30, 23, 0, 0);
    long start = c.getTimeInMillis();
    long oneHour = 1000 * 60 * 60;
    long t = start;
    for (long i = 0; i < 5; i++) {
        System.out.println(new Date(t));            
        t = t + oneHour;
    }
} 
```

使用`-Duser.timezone=GMT`它将打印：（无开关）

```
Sat Mar 30 23:00:00 GMT 2013
Sun Mar 31 00:00:00 GMT 2013
Sun Mar 31 01:00:00 GMT 2013
Sun Mar 31 02:00:00 GMT 2013
Sun Mar 31 03:00:00 GMT 2013 
```

使用`-Duser.timezone=CET`它将打印：（凌晨 2 点切换）

```
Sat Mar 30 23:00:00 CET 2013
Sun Mar 31 00:00:00 CET 2013
Sun Mar 31 01:00:00 CET 2013
Sun Mar 31 03:00:00 CEST 2013
Sun Mar 31 04:00:00 CEST 2013 
```

使用`-Duser.timezone=EET`它将打印：（东欧时间，CET 后一小时）

```
Sat Mar 30 23:00:00 EET 2013
Sun Mar 31 00:00:00 EET 2013
Sun Mar 31 01:00:00 EET 2013
Sun Mar 31 02:00:00 EET 2013
Sun Mar 31 04:00:00 EEST 2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:57:50.707

我很确定设置会`user.timezone`设置默认时区，就像`TimeZone.setDefault()`. 因此，它不会针对夏令时或其他更改进行更新。

如果您真的必须这样做，我的建议是向您的服务器创建一个自定义请求，该请求可以通过调用来更改时区`TimeZone.setDefault()`。这样，您可以在需要时更改它，而无需重新启动服务器。显然，这个请求需要得到保护，以便只有管理员才能执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T03:53:41.040

# `CET`是一个伪区

永远不要使用 2-4 个字母的缩写，例如`EST`或`IST`因为它们*不是*真正的时区，不是标准化的，甚至不是唯一的（！）。

# `Continent/Region`

以、或等格式指定[适当的时区名称](https://en.wikipedia.org/wiki/List_of_tz_zones_by_name)。`Continent/Region``America/Montreal``Africa/Casablanca``Pacific/Auckland`

也许`CET`您实际上是指时区，例如`Europe/Luxembourg`or `Europe/Gibraltar`。

```
ZoneId zoneId = ZoneId.of( "Europe/Gibralter" ) ; 
```

该类`TimeZone`现在是遗留的，是与 Java 的最早版本捆绑在一起的可怕日期时间类的一部分。只使用现代的*java.time*类。

# 为 DST 调整专有名称

> 由于该程序没有定期重新启动（它是一个服务器），我想知道当我们从冬季切换到夏季时会发生什么？

如果您使用如上所示的正确名称，并且在您的 JVM 安装中保持*tzdata*数据文件是最新的，那么在使用[`ZonedDateTime`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZonedDateTime.html).

```
ZonedDateTime zdt = ZonedDateTime.now() ;  // Omitting the optional `ZoneId` argument means the JVM’s current default time zone is implicitly applied, looking up the current offset in use at this moment for the JVM's current default time zone. 
```

让我们看看在 2020 年春季（即 3 月 29 日凌晨 2 点）夏令时切换期间会发生什么。我们得到的时间是凌晨 2 点前的一分钟。然后我们加一分钟。请注意，由于挂钟时间的 DST“提前”调整，**一天中的时间如何从凌晨 1:59 跳转到凌晨 3 点而不是凌晨 2 点。**

```
ZoneId z = ZoneId.of( "Europe/Gibraltar" ) ;
ZonedDateTime zdt = ZonedDateTime.of( 2020 , 3 , 29 , 1 , 59 , 0 , 0 , z ) ;
ZonedDateTime zdtMinuteLater = zdt.plusMinutes( 1 ) ;  // Notice how the time-of-day jumps to 3 AM rather than 2 AM. 
```

转储到控制台。

```
System.out.println( "zdt.toString(): " + zdt ) ;
System.out.println( "zdtMinuteLater.toString(): " + zdtMinuteLater ) ; 
```

请参阅[在 IdeOne.com 上实时运行的代码](https://ideone.com/pPms6H)。

> zdt.toString(): 2020-03-29T01:59+01:00[欧洲/直布罗陀]
> 
> zdtMinuteLater.toString(): 2020-03-29T03:00+02:00[欧洲/直布罗陀]

# 不要依赖默认值

您可以编写代码以不依赖 JVM 当前的默认时区。

前面显示的代码行 ( `ZonedDateTime.now()`)*不是*我推荐的。该行省略了可选`ZoneId`参数。相反，我建议始终通过您想要/预期的时区。

```
ZoneId zoneId = ZoneId.of( "Europe/Gibralter" ) ;
ZonedDateTime zdtGibralter = ZonedDateTime.now( zoneId ) ; 
```

# javascript - linkedin javascript api域仅限于本地主机

> ID：14979311
> 
> 赞同：5
> 
> 时间：2013-02-20T11:57:41.760
> 
> 标签：javascript, linkedin

我正在尝试使用linkedin javascript api，但是当我运行脚本时出现错误'javascript api domain is limited to localhost'。有谁知道那是什么？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T11:50:52.277

1.  转到[https://www.linkedin.com/secure/developer](https://www.linkedin.com/secure/developer)
2.  单击您正在使用的应用程序名称。
3.  将您的域添加到*JavaScript API 域：*
4.  保存更改。

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T03:38:49.560

1在LinkedIn devloper上创建一个新应用程序2.在URL中你应该写这样的路径 [http://localhost/linkdin/index.php/](http://localhost/linkdin/index.php/) 然后保存你的问题将得到解决

# javascript - 设置 Access-Control-Allow-Origin 可能存在的安全问题

> ID：14979313
> 
> 赞同：6
> 
> 时间：2013-02-20T11:57:45.973
> 
> 标签：javascript, ajax, apache, iis, xmlhttprequest

我看到设置“*”通配符是安全风险，即

```
Access-Control-Allow-Origin: "*" 
```

我想知道在设置具体域时是否存在任何安全风险，即

```
Access-Control-Allow-Origin: http://www.example.com 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T12:03:39.643

CORS 标头通常用于 JavaScript AJAX 请求。浏览器有一个内置的安全机制，它不允许您查询其他域，除非它们通过设置这些 CORS 标头明确允许它。

确实没有太大的安全风险。无论如何，您始终可以发送恶意请求。浏览器只是集体决定玩得好。

需要注意的一件事是，您不一定总是想发送

```
Access-Control-Allow-Origin: http://www.example.com 
```

标题。这可能会将人们引导到使用您的 API 的所有域。我的建议是您只在必要时才发出标头，即。您收到`OPTIONS`来自白名单域的请求。

我最近写了一篇关于这个的博客文章：http: [//fritsvancampen.wordpress.com/2013/02/03/cross-site-origin-requests-aka-cross-origin-resource-sharing/](http://fritsvancampen.wordpress.com/2013/02/03/cross-site-origin-requests-aka-cross-origin-resource-sharing/)

# java - 如何使用java在oracle中创建用户定义的表（表名在字符串中）

> ID：14979316
> 
> 赞同：1
> 
> 时间：2013-02-20T11:57:52.383
> 
> 标签：java, oracle, jdbc, ddl

如何使用java创建用户定义的表（表名在字符串中）oracle

```
String Tablename="student";
stmt=con.prepareStatement("create table"+Tablename+"(name varchar(12),class varchar(12))");
stmt.executeUpdate(); 
```

没有字符串即用户定义的表名它工作正常：

```
stmt=con.prepareStatement("create table student (name varchar(12),class varchar(12))"); 
```

但上面列出的以字符串为用户名的版本显示以下错误

```
java.sql.SQLException: ORA-00901: invalid CREATE command 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:00:06.100

请在表名前后留空格。

您的原始代码导致执行此 SQL 命令：

```
create tableMyTablename(name varchar(12),class varchar(12)) 
```

在那，`tableMyTablename`对于数据库来说是无法理解的......

正确：

```
stmt=con.prepareStatement("create table "+Tablename+" (name varchar(12),class varchar(12))"); 
```

另外，一些注意事项：

*   Java命名：变量名以*小写*字母开头
*   这（准备声明）并没有真正的意义。只能为表创建相同结构的语句是不可重用的。
*   避免使用 + 连接字符串和其他对象的字符串表示形式是明智的……它可能会产生非常意外的结果，甚至编译错误……
*   记录：在这种情况下，记录创建的 SQL 命令总是明智的。即使是*（糟糕！）* `System.out.println();`总比没有好......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:00:54.290

在“创建表”之后放置一个空格，即

```
"create table " 
```

您的陈述被评估为 create tablestudent...

# python - 如何以线程安全的方式在python中使用全局变量

> ID：14979319
> 
> 赞同：9
> 
> 时间：2013-02-20T11:57:59.537
> 
> 标签：python, thread-safety, global-variables

我想使用一个全局变量，初始化一次。具有线程安全访问。

有人可以分享一个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:06:04.337

如果您需要只读访问权限并且在产生线程之前初始化值，则无需担心线程安全。

如果不是这种情况，Python[线程](http://docs.python.org/2/library/threading.html)库可能是您需要的，更准确地说是锁定。关于这个主题的一个非常好的阅读 - [http://effbot.org/zone/thread-synchronization.htm](http://effbot.org/zone/thread-synchronization.htm)有很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:25:37.423

如果您使用 multiprocessing.Processes，您确实会遇到问题。在这种情况下，您应该查看多处理模块中的管理器和队列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-15T10:33:18.360

[线程](https://docs.python.org/3/library/threading.html)库是您想要的：

```
import threading
mydata = threading.local()
mydata.x = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:45:24.547

如果你初始化它一次，并且如果你在加载模块时初始化它（这意味着：在它可以从其他线程访问之前），你根本不会遇到线程安全问题。不需要同步。

但是如果你的意思是一个更复杂的场景，你必须进一步解释它以获得一个合理的代码示例。

# sccm - SCCM：通过检查 keypress mousemove 来检测用户是否存在，这可能吗？

> ID：14979325
> 
> 赞同：0
> 
> 时间：2013-02-20T11:58:20.310
> 
> 标签：sccm

我对 SCCM 了解不多，但我想知道是否可以通过监视最后一次按键或鼠标移动的日期时间来猜测用户是否在他的电脑前。这不需要非常准确（比如 5 分钟精度）。

SCCM 可以本地执行此操作吗？

如果是，我应该在客户端上安装什么（或者我应该改变什么设置）？

如果不是，我可以创建自己的代理并与 SCCM 集成吗？ [C# - 检测最后一次用户与操作系统交互的时间](https://stackoverflow.com/questions/1037595/c-sharp-detect-time-of-last-user-interaction-with-the-os)

如果仍然没有，那么我认为 SCCM 不是执行此操作的正确工具。那我该怎么办？创建我自己的代理。在每台 PC 上启动时运行它（作为服务？）。定期探测将其记录在数据库中的侦听器（asp.net 页面）？

我需要检查 2000 个用户的可用性。

Skype Enterprise 如何检查用户状态？我可以查询某种 Windows 服务以获取相同的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:37:04.823

`Could SCCM do this natively ?`

不。

`if no, could I create my own agent and integrate with SCCM ?`

是的，我不知道您使用的是哪个版本的 sccm，但您可以使用他们的[SDK](http://goo.gl/ZTmVq)与 sccm 紧密集成。它大部分都可以使用托管代码，尽管如果你想使用非托管的 dll，你可以尝试 Visual Studio 附带的类型库转换器，我已经成功地将他们的 TSEnvironment.dll 非托管库转换为托管库。创建您自己的代理可能需要完成很多工作，您可能只需在需要时与客户端或服务器进行通信即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T02:24:33.853

您可以使用自定义“硬件”库存 (MOF)，填充空闲信息并将其报告回 SCCM。来自自定义库存检索的信息最终存储在 SCCM 数据库中，因此您可以根据需要进行报告。

您可以像这样让用户输入空闲： [如何检测非活动用户](https://stackoverflow.com/questions/2212823/how-to-detect-inactive-user/2212854#2212854) - 这是一个 Windows API，因此您应该能够找到您选择的托管/脚本语言的代码示例。

然后，将该信息写入 WMI。

创建一个 SCCM 包以按计划运行（每 5 分钟一次？），它运行此脚本，然后运行 ​​SendSchedule.exe。

这可能不是最有效的方法，但这是利用 SCCM 传输数据的潜在解决方案。您也可以使用 Web 服务，然后创建一个将数据写入数据库的方法——它可能会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-29T02:43:57.980

SCCM 可以根据用户是否登录来部署应用程序。对于许多拥有 SCCM 检查的用户来说，这种检查经常不是很有效。SCCM 不是实时信息的最佳选择。

Tanium 可能是值得研究的产品。SCCM 的功能较少，但能够“基本上”实时监控。

# android - 堆叠的 ActionBar 选项卡栏未填充父级

> ID：14979327
> 
> 赞同：25
> 
> 时间：2013-02-20T11:58:32.893
> 
> 标签：android, android-actionbar

我正在创建操作栏导航选项卡，但是当操作栏堆叠时，选项卡没有获得整个宽度空间。我有一张照片来说明它。

![在此处输入图像描述](../Images/a2c503d63cd9fec57bea74c29c7c9a56.png)

在这种情况下，是否可以为每个选项卡提供 50% 的屏幕宽度？

谢谢

我正在编辑说它不是 Sherlock 动作栏。我正在使用三星 Galaxy Note 10.1 和 Nexus 7。现在，在 Nexus 中对其进行测试，我注意到它的行为有所不同。另一个截图：

![在此处输入图像描述](../Images/11fb388781221ef8663eb345838990f8.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T19:46:56.203

我认为目前这是不可行的。在过去的几天里，我一直在尝试做同样的事情，这就是我到目前为止所发现的。

Android 框架使用一个名为 ActionBarPolicy 的类来设置有关 ActionBar 行为的一些规则。在这个文件中（可以在这里找到：[https](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/view/ActionBarPolicy.java) ://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/view/ActionBarPolicy.java ），你会发现一个名为getStackedTabMaxWidth() 返回一个维度值（当前在资源中设置为 160dip）。

该值使用的是放置在 ScrollingTabContainerView 中的内部类 TabView ( [https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/ScrollingTabContainerView.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/ScrollingTabContainerView.java) )。TabView 是 ActionBar 的 TabBar 的私有实现。

现在我认为这个值和这个行为都不能被修改，除非可能使用反射。我对此知之甚少，所以如果有人能做到这一点，请不要犹豫，这样说，因为这确实是一种不好的行为，在某些平板电脑上看起来并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T17:26:11.393

Android 堆叠的操作栏标签没有可调整的宽度。

> “堆叠的操作栏选项卡现在有宽度限制。这可以防止可以跨越整个屏幕的超宽选项卡。如果选项卡集群不跨越整个宽度，则它会居中。” [https://android.googlesource.com/平台/框架/基础/+/b8139af3dcae80c0030afd0354dc424a7c72c3d9](https://android.googlesource.com/platform/frameworks/base/+/b8139af3dcae80c0030afd0354dc424a7c72c3d9)

解决方案是使用随 Android 5.0 发布的 Android 设计支持库中的**[TabLayout](https://developer.android.com/reference/android/support/design/widget/TabLayout.html)** API。Android 支持库需要 appcompat 库，但如果您使用 gradle 构建，则该依赖项会为您解决。

对于大多数开发人员来说，这不是问题，但 TabLayout 设置至少需要 SDK API 级别 22，因为 appcompat 依赖项是针对 22 编译的。但是，**TabLayout**对 22没有运行时依赖项，这意味着您可以在API 7 级以下的设备。

tl;r - 使用 Android 设计库中的 Tablayout。开发人员需要 API 级别 22，但可以在最高 v7 的旧手机上运行。

# java - 为什么我的类路径最后只能使用冒号？

> ID：14979328
> 
> 赞同：3
> 
> 时间：2013-02-20T11:58:36.543
> 
> 标签：java, log4j, classpath

如果我将 : 放在类路径的末尾，我的应用程序只会开始记录到 log4j。我已经在类路径中有属性文件和 jar，所以我不确定发生了什么。用冒号结束类路径有什么作用？启动命令因此变成这样：

```
java -cp path-to-log4j.properties:bunch:of:other:stuff: app 
```

如果我去掉最后一个冒号，它就会停止记录，就好像它找不到 log4j。我的问题是，最后一个冒号实际上在做什么，就像它添加到类路径中的哪个目录一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:05:31.910

通常你应该把类路径放在引号中 -cp "path:path2"。

编辑：冒号可能会添加当前目录。

EDIT2：不能将文件（jar 文件除外）直接添加到类路径中。只有目录。今天读完^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T12:36:49.873

对类似情况感到惊讶：

不工作：

```
java -classpath swt.jar org.ivan.swt.SWTHelloWorld 
```

在职的：

```
java -classpath swt.jar: org.ivan.swt.SWTHelloWorld 
```

也在工作：

```
java -classpath :swt.jar org.ivan.swt.SWTHelloWorld 
```

（注意 swt.jar 开头和结尾的冒号）

Linux 上的 Java(TM) SE 运行时环境（内部版本 1.8.0_51-b16）

# android - 手动执行意图并获得结果

> ID：14979330
> 
> 赞同：1
> 
> 时间：2013-02-20T11:58:39.740
> 
> 标签：android

我对 Android 编程很陌生，我希望我能做到这一点：

1）创建一个新的意图

2) 执行 Intent 并以字符串形式获取其结果。

就像是：

```
Instrumentation.ActivityResult ar = new Instrumentation.ActivityResult(1, new Intent(Intent.ACTION_CALL,Uri.parse("tel:" + ussd))); 
```

我希望的意图：

```
new Intent(Intent.ACTION_CALL,Uri.parse("tel:" + ussd)) 
```

需要被执行并得到它的结果。

我尝试使用`getResultData`which 只是给出：

```
Intent { act=android.intent.action.CALL dat=tel:xxx-xxx-xxxx } 
```

但我想从中获取*数据*。数据我的意思是这个ussd正常执行时会显示的数据。

有可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:48:38.187

> 我希望意图 new Intent(Intent.ACTION_CALL,Uri.parse("tel:" + ussd)) 需要被执行并得到它的结果。

`Intent`对于您的术语“执行”的任何可能定义，“执行”没有“结果” 。

> 数据我的意思是这个ussd正常执行时会显示的数据。

该“数据”被显示给用户。它对开发人员不可用。

# vba - VBA 将字符串“12.00”转换为 1200 而不是 12.00。这只发生在欧盟区域设置而不是美国设置

> ID：14979333
> 
> 赞同：3
> 
> 时间：2013-02-20T11:59:00.800
> 
> 标签：vba, regional-settings

我不知道为什么，但 vba 中的字符串是“12.00”，当我转换为双精度时

```
myDouble= CDbl(stringDouble) 
```

或者

```
myDouble = stringDouble 
```

我无能为力..有什么帮助吗？（我无法在所有电脑上将区域设置更改为 US ..）

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T12:25:01.607

正如您在评论中已经指出的那样，这是一个区域设置 - 当您的系统`,`用作小数分隔符时，字符串将转换为`1200`. 这种情况下的解决方案是将其转换为`Val`：

```
Sub Sample()
    Dim myDouble As Double
    Dim stringDouble As String
    stringDouble = "12.00"
    myDouble = Val(stringDouble)
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:24:14.857

这很可能是由于区域设置 - 小数分隔符不同。例如，在我的语言环境中它是`,`- 这就是为什么对于字符串到数字的转换我使用这样的语法：

```
x = "12.00"
DBLnum = CDbl(Replace(x, ".", ",")) 
```

# java - Java 泛型方法声明

> ID：14979342
> 
> 赞同：35
> 
> 时间：2013-02-20T11:59:23.480
> 
> 标签：java, generics

我正在学习 Java 泛型，我问自己这个问题。

这两个方法声明有什么区别？

```
public static void someMethod(List<? extends Number> numberList); 
```

和

```
public static <E extends Number> void someMethod(List<E> numberList); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T12:02:23.537

在后者中，您可以引用 范围内的类型`someMethod`，即`E`. 在前者你没有。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T12:19:08.093

主要区别在于后者是**通用方法**，而前者不是。

因此，例如在后一种方法中，您可以执行以下操作：

```
public static <E extends MyObject> void someMethod(List<E> someList) {
    E myObject = someList.iterator().next(); // this can actually lead to errors
    myObject.doSomething();                  // so treat it as an example
} 
```

这意味着您可以替换`E`符合泛型方法声明中规则的任意类型，并能够在您的方法中使用该类型。

请注意，您应该使用如下类型参数调用泛型方法：

```
someClass.<MyArbitraryType>someMethod(someList); 
```

[**你可以在这里**](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)找到泛型方法的一个很好的概述。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T12:09:15.820

使用第二个版本，您可以执行以下操作：

```
public static <E extends Number> void someMethod(List<E> numberList) {
  E number = numberList.get(0); 
  numberList.add(number);
} 
```

这在第一个版本中是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:06:30.513

使用第一个方法声明将不允许您向列表中添加任何新内容。例如，这将无法编译。

```
public static void someMethod(List<? extends Number> numberList, Number number) {
    numberList.add(number);
} 
```

而第二个允许您这样做：

```
public static <T extends Number> void someMethod(List<T> numberList, T number) {
    numberList.add(number);
} 
```

# c++ - “BUGCHECK_STR：APPLICATION_FAULT_NULL_CLASS_PTR_READ_AFTER_CALL”在windbg中是什么意思！分析-v输出

> ID：14979343
> 
> 赞同：1
> 
> 时间：2013-02-20T11:59:24.597
> 
> 标签：c++, debugging, windbg, crash-dumps

我尝试使用windbg分析故障转储文件，并键入扩展命令以获取一些基本分析结果“！分析-v”，得到的结果如下：-（我在这里只粘贴了部分信息）

```
....
  ExceptionCode: c0000005 (Access violation)
  ExceptionFlags: 00000000
NumberParameters: 2
   Parameter[0]: 00000000
   Parameter[1]: 00000004
Attempt to read from address 00000004

PROCESS_NAME:  tscommand.exe

...

LAST_CONTROL_TRANSFER:  from 010444c2 to 010181e6

FAULTING_THREAD:  00002270

BUGCHECK_STR:  APPLICATION_FAULT_NULL_CLASS_PTR_READ_AFTER_CALL

PRIMARY_PROBLEM_CLASS:  NULL_CLASS_PTR_READ_AFTER_CALL

DEFAULT_BUCKET_ID:  NULL_CLASS_PTR_READ_AFTER_CALL

STACK_TEXT:  

... 
```

“BUGCHECK_STR：APPLICATION_FAULT_NULL_CLASS_PTR_READ_AFTER_CALL”在这里是什么意思？这是否意味着应用程序在调用函数后由于 NULL 类指针而出错？我在网上搜索，找不到任何关于 APPLICATION_FAULT_NULL_CLASS_PTR_READ_AFTER_CALL 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:39:23.067

“BUGCHECK_STR”是微软用来“分类”错误的一种分类，这个分类似乎表明你有一个 NULL 类指针 - 这对我来说似乎是正确的，因为内存读取来自地址 4，这是一个离 NULL 指针基数的小偏移量。

基本上，您遇到的情况是您正在使用指向某物的指针（我不是 100% 确定它是这样的类），并且当您取消引用它时指针为 NULL。这完全有可能是由对成员函数的调用引起的，调试器可以[通过查看调用堆栈、符号和寄存器值的组合]来解决这个问题，但 WinDBG 获得这些东西并不是未知的有时会出错——这是启发式的，所以它类似于“如果我们这里有这个值，那里有那个值，还有其他东西与这个范围相匹配，那么就是这组错误”。

如果您在崩溃时发布了更多的堆栈/寄存器值，则可能会更多地找出问题所在。

从错误代码和带有错误的额外数据的组合可以确定的是，您的代码正在读取内存中的地址 4。这通常意味着尝试在“NULL”指向的类/结构中使用第二个整数或浮点数。当我在我的代码中忘记了“if (ptr != NULL) ...”时，我已经看到了很多次。不时发生在我们大多数人身上...

# sql - 如何将大容量值插入到 sql 表中？

> ID：14979346
> 
> 赞同：-1
> 
> 时间：2013-02-20T11:59:35.910
> 
> 标签：sql, sql-server, tsql

我想从下面的另一个数据中添加大量数据。但我不能这样做：返回错误。但区域与另一个区域相同。

```
declare @hrmtable1 table(musterino int, ekno smallint)

insert into @hrmtable1 (musterino , ekno)
    select distinct musterino, ekno
    from hareketmuhasebe (nolock) 
    where islemtarihi >= '20120101'
      and isnull(musterino, 0) <> 0 
      and isnull(musterino, 0) > 9000000 
      and isnull(ekno,0) <> 0 

insert into table1(A,B,C,D,E,. . . . .N) 
   SELECT DISTINCT 
      case when ((select count(*) from table1 where musterino=e.musterino) > 0)
           then (select top 1 *
                 from dbo.table1 
                 where musterino = e.musterino  
                 order by ekno desc)
           else 
                (select 100, e.musterino, e.ekno, 0, K, L, M)
                 from @hrmtable1 e )
      end 
```

错误：

> *消息 120，级别 15，状态 1，第 10 行
> INSERT 语句的选择列表包含的项目少于插入列表。
> SELECT 值的数量必须与 INSERT 列的数量相匹配。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:01:17.763

**编辑：**由于您编辑了问题，答案仍然保持不变。Select 语句中的列数与代码第二部分中的插入语句列不匹配。

在您的第一个语句中，您正在指定`2`列，并且在 select 中您有`5`列，它们应该匹配，这就是错误准确告诉您的内容。

```
insert into @hrmtable1 (musterino , ekno)
                         ^^^^^^^    ^^^^
select distinct musterino,ekno,defterid,dovizcinsi, subekodu
                ^^^^^^^    ^^^   ^^^^     ^^^^^      ^^^^^ 
```

从您的`insert`陈述看来，您不需要`Select`陈述中的最后三列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:02:59.860

如错误中所述，插入中的列数与您提供的值的数量不匹配

```
insert into @hrmtable1 (musterino , ekno)
select distinct musterino,ekno
from hareketmuhasebe (nolock) 
where islemtarihi >= '20120101'
and isnull(musterino,0) <> 0 and isnull(musterino,0) < 9000000 and isnull(ekno,0) <> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:03:19.720

尝试这个：

```
insert into @hrmtable1 (musterino , ekno)
select distinct musterino,ekno
from hareketmuhasebe (nolock) 
where islemtarihi >= '20120101'
and isnull(musterino,0) <> 0 and isnull(musterino,0) < 9000000 and isnull(ekno,0) <> 0 
```

您在插入中有 2 列，在 select 子句中有 5 列，这是错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:03:53.253

> INSERT 语句的选择列表包含的项目少于插入列表。SELECT 值的数量必须与 INSERT 列的数量相匹配。

*错误本身告诉你你做错了什么*。您在 insert 语句中的列数少于在 select 语句中的列数。

来自**MSDN**

> 子查询的选择列表必须与 INSERT 语句的列列表匹配。如果未指定列列表，则选择列表必须与要插入的表或视图中的列匹配。

阅读更多关于[惰性的信息](http://blog.sqlauthority.com/2011/08/10/sql-server-use-insert-into-select-instead-of-cursor/)

# ruby-on-rails - Ruby on Rails 成员与篮子的关系

> ID：14979347
> 
> 赞同：0
> 
> 时间：2013-02-20T11:59:42.463
> 
> 标签：ruby-on-rails

我创建了一个成员脚手架并用成员填充了数据库。后来我决定添加一个篮子脚手架（也许有更简单的方法，但这只是一个例子），以便会员可以将东西添加到他们的购物篮中进行购物。

模型非常明显：

```
class Basket < ActiveRecord::Base
  attr_accessible :member_id
  belogs_to :member
end 
```

和

```
class Member < ActiveRecord::Base
  attr_accessible :name
  has_one :basket
end 
```

但现在我不想手动创建一百万个篮子并为每个人提供一个会员 ID。我需要为每个成员创建一个购物篮（动态 - 新成员自动获得一个购物篮），以便当他们访问网站时，他们可以将项目添加到购物篮中。

我遵循了一些 Rails 教程，但我遇到的所有事情都涉及冗长的手动过程，这些过程不适用于我正在做的任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:15:44.837

对于新成员，您可以使用[回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html)，例如`after_create`创建购物篮。

例如：

```
class Member < ActiveRecord::Base
  attr_accessible :name
  has_one :basket
  after_create :create_basket

  private
  def create_basket
    Basket.create(member: self)
  end
end 
```

对于现有会员，您可以使用`rails console`

```
~/Rails/myapp [master] $ rails console
Loading development environment (Rails 3.2.11)
1.9.3p286 :001 > Member.where(basket: nil).each {|m| Basket.create(member: m)} 
```

# html - 使用 css 更改嵌套跨度样式具有样式标记

> ID：14979351
> 
> 赞同：1
> 
> 时间：2013-02-20T11:59:56.970
> 
> 标签：html, css, wordpress, themes, wordpress-theming

我在 wordpress 框架中使用了一个主题，并且我制作了一些带有嵌套标题的文章，例如 ..

```
* 富富标题  
```

```
    文章的其余部分 
```

我将标题（FooFoo Title）的颜色设为黑色，然后用深色样式更新了主题，因此黑色标题不再可见，所以我尝试更改它看起来像这样的颜色..

```
<h5> <span style="color: red">FooFoo Title</span> </h5> 
```

所以我去了主题设置并在Custom-CSS中创建了一个新属性，除非我在浏览器中使用（开发人员工具）禁用（跨度样式标签）中的颜色，否则它不起作用。

我无法编辑我所有的 1000 篇文章标题 .. 所以请帮助我 .. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:07:01.227

您是否尝试过添加`!important`样式？

例子：

```
h5 span {color: blue !important;} 
```

编辑：**仅在绝对需要时****使用！`!important`**

理想情况下，您应该从 css**中删除**内**联样式**和**!important ！**

# javascript - 在 Javascript 中构建动态链接

> ID：14979358
> 
> 赞同：0
> 
> 时间：2013-02-20T12:00:27.433
> 
> 标签：javascript, dynamic, paragraph, new-window

我在下面有这段代码：

```
for (var index in mv.exifImages) {
        var p = document.createElement("p");
        var oText = document.createTextNode("link" + index);
        p.appendChild(oText);
        var info = mv.exifImages[index];
        p.onclick = function() {
            mv.openNewWindow(info);
        };
        ele.appendChild(p);
} 
```

我想创建段落元素，当我单击它们时，会打开一个包含正确数组内容的新窗口。但我能够建立不同的链接。我所有的段落都会打开一个新窗口，其中包含最后一个索引处的数组内容。这有什么诀窍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:10:49.137

我认为这应该有效：

```
for (var index in mv.exifImages) {
        var p = document.createElement("p");
        var oText = document.createTextNode("link" + index);
        p.setAttribute("indexAttr",index);
        p.appendChild(oText);
        p.onclick = function() {
            mv.openNewWindow(mv.exifImages[this.getAttribute("indexAttr")]);
        };
        ele.appendChild(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:15:20.560

以下作品...

```
for (var index in mv.exifImages) {
        var p = document.createElement("p");
        var oText = document.createTextNode("link" + index);
        p.appendChild(oText);
        var info = mv.exifImages[index];
        p.onclick = openNew(info);
        ele.appendChild(p);
}

function openNew(a) {
    return function() {
        mv.openNewWindow(a);
    }
} 
```

# scala - sbt-idea 1.2.0 未解决 SBT 0.12.0 和 Scala 2.10.0？

> ID：14979361
> 
> 赞同：3
> 
> 时间：2013-02-20T12:00:38.153
> 
> 标签：scala, intellij-idea, sbt, sbt-idea

我正在创建一个新的 SBT 项目，这里是我的 SBT 文件的内容：

**build.properties**

```
sbt.version=0.12.0 
```

**插件.sbt**

```
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0") 
```

**构建.sbt**

```
name := "peroo"

version := "0.1-SNAPSHOT"

scalaVersion := "2.10.0"

resolvers ++= Seq(
  Classpaths.typesafeResolver,
  "Sonatype snapshots" at "http://oss.sonatype.org/content/repositories/snapshots/",
  "Sonatype releases"  at "https://oss.sonatype.org/content/repositories/releases/"
)

libraryDependencies ++= Seq(
  compilerPlugin("org.scala-lang.plugins" % "continuations" % "2.10.0"),
  "com.google.guava" % "guava" % "13.0"
)

scalacOptions ++= Seq("-P:continuations:enable", "-deprecation", "-unchecked", "-feature")

autoCompilerPlugins := true 
```

这是我尝试`sbt`在项目目录根目录中启动时遇到的错误：

```
➜  peroo  sbt 
[info] Loading project definition from /Users/rahulphulore/projects/rahul/peroo/project
[info] Updating {file:/Users/rahulphulore/projects/rahul/peroo/project/}default-941135...
[info] Resolving com.google.guava#guava;13.0 ...
[info] Resolving com.github.mpeltonen#sbt-idea;1.2.0 ...
[warn]  module not found: com.github.mpeltonen#sbt-idea;1.2.0
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/com.github.mpeltonen/sbt-idea/scala_2.10/sbt_0.12/1.2.0/ivys/ivy.xml
[warn] ==== sbt-plugin-releases: tried
[warn]   http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/com.github.mpeltonen/sbt-idea/scala_2.10/sbt_0.12/1.2.0/ivys/ivy.xml
[warn] ==== local: tried
[warn]   /Users/rahulphulore/.ivy2/local/com.github.mpeltonen/sbt-idea/scala_2.10/sbt_0.12/1.2.0/ivys/ivy.xml
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/com.github.mpeltonen/sbt-idea/scala_2.10/sbt_0.12/1.2.0/ivys/ivy.xml
[warn] ==== Sonatype snapshots: tried
[warn]   http://oss.sonatype.org/content/repositories/snapshots/com/github/mpeltonen/sbt-idea_2.10_0.12/1.2.0/sbt-idea-1.2.0.pom
[warn] ==== Sonatype releases: tried
[warn]   https://oss.sonatype.org/content/repositories/releases/com/github/mpeltonen/sbt-idea_2.10_0.12/1.2.0/sbt-idea-1.2.0.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/github/mpeltonen/sbt-idea_2.10_0.12/1.2.0/sbt-idea-1.2.0.pom
[info] Resolving org.scala-sbt#sbt;0.12.0 ...
[info] Resolving org.scala-sbt#main;0.12.0 ...
[info] Resolving org.scala-sbt#actions;0.12.0 ...
[info] Resolving org.scala-sbt#classpath;0.12.0 ...
[info] Resolving org.scala-sbt#launcher-interface;0.12.0 ...
[info] Resolving org.scala-lang#scala-library;2.10.0 ...
[info] Resolving org.scala-sbt#interface;0.12.0 ...
[info] Resolving org.scala-sbt#io;0.12.0 ...
[info] Resolving org.scala-sbt#control;0.12.0 ...
[info] Resolving org.scala-lang#scala-compiler;2.10.0 ...
[info] Resolving org.scala-lang#scala-reflect;2.10.0 ...
[info] Resolving org.scala-sbt#completion;0.12.0 ...
[info] Resolving org.scala-sbt#collections;0.12.0 ...
[info] Resolving jline#jline;1.0 ...
[info] Resolving org.scala-sbt#api;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-integration;0.12.0 ...
[info] Resolving org.scala-sbt#incremental-compiler;0.12.0 ...
[info] Resolving org.scala-sbt#logging;0.12.0 ...
[info] Resolving org.scala-sbt#process;0.12.0 ...
[info] Resolving org.scala-sbt#compile;0.12.0 ...
[info] Resolving org.scala-sbt#persist;0.12.0 ...
[info] Resolving org.scala-tools.sbinary#sbinary_2.9.0;0.4.0 ...
[info] Resolving org.scala-sbt#classfile;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-ivy-integration;0.12.0 ...
[info] Resolving org.scala-sbt#ivy;0.12.0 ...
[info] Resolving org.apache.ivy#ivy;2.3.0-rc1 ...
[info] Resolving com.jcraft#jsch;0.1.46 ...
[info] Resolving commons-httpclient#commons-httpclient;3.1 ...
[info] Resolving commons-logging#commons-logging;1.0.4 ...
[info] Resolving commons-codec#commons-codec;1.2 ...
[info] Resolving org.scala-sbt#run;0.12.0 ...
[info] Resolving org.scala-sbt#task-system;0.12.0 ...
[info] Resolving org.scala-sbt#tasks;0.12.0 ...
[info] Resolving org.scala-sbt#tracking;0.12.0 ...
[info] Resolving org.scala-sbt#cache;0.12.0 ...
[info] Resolving org.scala-sbt#testing;0.12.0 ...
[info] Resolving org.scala-sbt#test-agent;0.12.0 ...
[info] Resolving org.scala-tools.testing#test-interface;0.5 ...
[info] Resolving org.scala-sbt#command;0.12.0 ...
[info] Resolving org.scala-sbt#compiler-interface;0.12.0 ...
[info] Resolving org.scala-sbt#precompiled-2_8_2;0.12.0 ...
[info] Resolving org.scala-sbt#precompiled-2_10_0-m4;0.12.0 ...
[info] Resolving org.scala-lang.plugins#continuations;2.10.0 ...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.github.mpeltonen#sbt-idea;1.2.0: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn] 
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]      com.github.mpeltonen:sbt-idea:1.2.0 (sbtVersion=0.12, scalaVersion=2.10)
[warn] 
sbt.ResolveException: unresolved dependency: com.github.mpeltonen#sbt-idea;1.2.0: not found
    at sbt.IvyActions$.sbt$IvyActions$$resolve(IvyActions.scala:211)
    at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:122)
    at sbt.IvyActions$$anonfun$update$1.apply(IvyActions.scala:121)
    at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:114)
    at sbt.IvySbt$Module$$anonfun$withModule$1.apply(Ivy.scala:114)
    at sbt.IvySbt$$anonfun$withIvy$1.apply(Ivy.scala:102)
    at sbt.IvySbt.liftedTree1$1(Ivy.scala:49)
    at sbt.IvySbt.action$1(Ivy.scala:49)
    at sbt.IvySbt$$anon$3.call(Ivy.scala:58)
    at xsbt.boot.Locks$GlobalLock.withChannel$1(Locks.scala:75)
    at xsbt.boot.Locks$GlobalLock.withChannelRetries$1(Locks.scala:58)
    at xsbt.boot.Locks$GlobalLock$$anonfun$withFileLock$1.apply(Locks.scala:79)
    at xsbt.boot.Using$.withResource(Using.scala:11)
    at xsbt.boot.Using$.apply(Using.scala:10)
    at xsbt.boot.Locks$GlobalLock.liftedTree1$1(Locks.scala:51)
    at xsbt.boot.Locks$GlobalLock.withLock(Locks.scala:51)
    at xsbt.boot.Locks$.apply0(Locks.scala:30)
    at xsbt.boot.Locks$.apply(Locks.scala:27)
    at sbt.IvySbt.withDefaultLogger(Ivy.scala:58)
    at sbt.IvySbt.withIvy(Ivy.scala:99)
    at sbt.IvySbt.withIvy(Ivy.scala:95)
    at sbt.IvySbt$Module.withModule(Ivy.scala:114)
    at sbt.IvyActions$.update(IvyActions.scala:121)
    at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:949)
    at sbt.Classpaths$$anonfun$work$1$1.apply(Defaults.scala:947)
    at sbt.Classpaths$$anonfun$doWork$1$1$$anonfun$54.apply(Defaults.scala:970)
    at sbt.Classpaths$$anonfun$doWork$1$1$$anonfun$54.apply(Defaults.scala:968)
    at sbt.Tracked$$anonfun$lastOutput$1.apply(Tracked.scala:35)
    at sbt.Classpaths$$anonfun$doWork$1$1.apply(Defaults.scala:972)
    at sbt.Classpaths$$anonfun$doWork$1$1.apply(Defaults.scala:967)
    at sbt.Tracked$$anonfun$inputChanged$1.apply(Tracked.scala:45)
    at sbt.Classpaths$.cachedUpdate(Defaults.scala:975)
    at sbt.Classpaths$$anonfun$45.apply(Defaults.scala:855)
    at sbt.Classpaths$$anonfun$45.apply(Defaults.scala:852)
    at sbt.Scoped$$anonfun$hf10$1.apply(Structure.scala:586)
    at sbt.Scoped$$anonfun$hf10$1.apply(Structure.scala:586)
    at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
    at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:40)
    at sbt.std.Transform$$anon$5.work(System.scala:71)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232)
    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
    at sbt.Execute.work(Execute.scala:238)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:232)
    at sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)
    at sbt.CompletionService$$anon$2.call(CompletionService.scala:30)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
[error] (*:update) sbt.ResolveException: unresolved dependency: com.github.mpeltonen#sbt-idea;1.2.0: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? q
➜  peroo 
```

可能是什么问题？

**编辑：**

这是我的项目目录结构的样子：

![在此处输入图像描述](../Images/cb0f1e2d4c93c185e2a79a30fb33ba54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:37:39.193

我在 Mac Mountain Lion 上添加了`~/.sbt/plugins/plugins.sbt`. 它可以工作并且依赖项不再失败。我认为您需要在 scala 版本之外使用它，并`cala-reflect.jar`在 IDE 内手动将 s 添加到您的路径中以使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-29T14:51:47.007

根据[项目发布页面](https://github.com/mpeltonen/sbt-idea/releases)，sbt-idea 的最新版本是 1.5.1，它是为sbt`0.11`和.`0.12``0.13`

[然而，在http://repo1.maven.org/maven2/com/github/mpeltonen/](http://repo1.maven.org/maven2/com/github/mpeltonen/)中有更新版本的插件可用`1.5.2`。

您应该能够在以下行中使用该插件`project/sbt-idea.sbt`：

```
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.5.2") 
```

有[一种更简单但更慢的方法](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html#revision)来指定正确的版本号 -`latest.integration`用于版本部分。

```
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "latest.integration") 
```

[来自Ivy 文档的](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html#revision)`latest.integration`关于's 性能的摘录：

> 请注意，为了找到具有适当状态的最新修订版，Ivy 必须从最后一个解析存储库中的所有 ivy 文件，直到找到这样的修订版。因此，如果分辨率变慢，请不要感到惊讶。

请注意，自从您提出问题以来，IntelliJ IDEA 和 sbt 都得到了改进，并且目前对插件的需求较少，如 IDEA [“新版本的 Scala 插件内置对 SBT 的支持，具有代码完成和依赖项导入。”](http://www.jetbrains.com/idea/whatsnew/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:49:00.887

您的`plugins.sbt`文件必须是全局的，如@alex23 所示，或者位于项目的`project/`子目录中。这样，它适用于 SBT，而不适用于您自己的代码，可能不需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T08:16:41.387

我显然遇到了同样的问题，但是我“修复”了一个更新的版本（1.5.X），只是降级到 gen-idea 插件的 1.4.0 版本。

```
cat ~/.sbt/plugins/build.sbt
addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.4.0") 
```

# javascript - 当表格在IE中获得焦点时表格滚动条跳起来

> ID：14979365
> 
> 赞同：7
> 
> 时间：2013-02-20T12:00:43.487
> 
> 标签：javascript, html, internet-explorer, html-table, internet-explorer-9

**问题**：我有`table`一个包装`div`，`overflow-y : auto`一旦`table`获得焦点，滚动条就会跳起来。我怎样才能防止这种情况？

**我在IE9**中遇到这种行为，而不是在 Chrome 中。

请注意：我已添加`tabindex`到表格中，以便它可以接收焦点。点击它后，我会务实地专注于桌子。

**jsFiddle：http:** [//jsfiddle.net/msdevs/r6TzS/4/](http://jsfiddle.net/msdevs/r6TzS/4/)

1.  向下滚动表格
2.  单击页面上的其他元素，使表格失去焦点
3.  单击表格以专注于它
4.  滚动条跳起来

**HTML：**

```
 <div>
        <table id="tabl" tabindex="1">
            <thead>
                <tr>
                    <th style="font-weight: bold">head</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>first</td>
                </tr>
                <tr>
                    <td>SEC</td>
                </tr>
                <tr>
                    <td>dsadfawdfadfa</td>
                </tr>
                <tr>
                    <td>dsadfawdfadfa</td>
                </tr>
.
.
.
                 <tr>
                    <td>dsadfawdfadfa</td>
                </tr>
            </tbody>
        </table>
    </div> 
```

**CSS：**

```
table {
    table-layout: fixed;
    font-family: arial;
    font-size: 11px;
    text-align: left;
    outline: none;
    width: 625px;
}
div {
    overflow-y: auto;
    overflow-x: hidden;
    height: 150px;
    width: 300px
} 
```

**JS：**

```
$('table').focusin(function (e) {
    console.log("table got focus - scroller jumps up");
}).click(function () {
    $('table').focus();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:05:41.700

这为我修复了它 - 记录包装器上的当前滚动位置，并在模糊时重新安装它。

[http://jsfiddle.net/r6TzS/10/](http://jsfiddle.net/r6TzS/10/)

```
$('#wrapper').scroll(function(){
    $(this).data( {posY: $(this).scrollTop()} )
})
.blur(function(){
    $(this).scrollTop( $(this).data("posY") );
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-12T20:30:02.717

这个问题的公认答案实际上并不准确。主要问题是 Internet Explorer 的 focus() 实现。在接受的 JSFiddle 中，它从不调用 focus()，因此原始问题永远不会发生。如果您从该示例中取出所有 javascript，滚动问题仍然不会发生。您应该调用 setActive() 而不是 focus() ，它将元素设置为活动状态，但不会尝试将其滚动到视图中。此处描述了 setActive() 方法 - [http://help.dottoro.com/ljqmdirr.php](http://help.dottoro.com/ljqmdirr.php)。请注意，它仅受 ie 支持。

这是一个工作示例 - [http://jsfiddle.net/r6TzS/100/](http://jsfiddle.net/r6TzS/100/)

```
$('table').focusin(function (e) {
    console.log("table got focus - scroller jumps up");
}).click(function () {
    $('table').setActive();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T15:20:26.137

**更新：**通过添加`mouseleave`，`mouseenter`我能够让滚动条在 IE9 和 Chrome v24.0.1312.57 上正常工作。

**工作示例：http:** [//jsfiddle.net/r6TzS/9/](http://jsfiddle.net/r6TzS/9/)

```
var scrollPos = 0;
var ignoreScrollPos = 0;

$('div').mouseleave(function() {
    scrollPos = $('div').scrollTop(); 
    console.log("Scroll position set: " + scrollPos);        
    ignoreScrollPos = 0;
}).mouseenter(function() {
    ignoreScrollPos = 1;
});

$('table').focusin(function (e) {
    console.log("table got focus - scroller jumps up: " 
                + $('div').scrollTop()); 
}).click(function () {    
    if (!ignoreScrollPos) {
        console.log("Set position to: " + scrollPos);
        $('div').scrollTop(scrollPos);  
    }
}); 
```

此解决方案可防止滚动条在 IE9 中跳起。~~但是，现在我发现它在 Chrome 中无法正常工作。~~无论如何，我认为分享这个解决方案会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:54:46.503

在 IE 中，通过将焦点`<table/>`设置到标签中的第一个元素，将焦点设置在标签上会在视觉上重置表格。

这可以通过将焦点显式设置到of中的最后一个元素来轻松[演示](http://jsfiddle.net/pratik136/r6TzS/8/)。如果您仔细观察，点击时，表格实际上会很快滚动到顶部，然后快速滚动到底部。`click event``<table/>`

这是因为，仅单击第`table`一个行为就会`focus`将`table`，`td:nth-last-child(1)`即最后一个`td`被设置的焦点，从而将表格滚动到底部。

如果您添加一个`button`设置焦点的，您会注意到差异。

现在这只是`why`你问题的一部分！`how to fix`如果我知道您的实际要求，我将能够提供更合适的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T03:59:53.843

您是否尝试在表格而不是 DIV 上应用滚动 Y 选项。或者您可以尝试“tbody”标签并将您的所有 TR 放入其中。并在 this 上应用 scroll-y 。我希望这将在我的知识范围内起作用。让我知道它是否有效，否则我将为您提供其他解决方案:)

# android - 如何与 Android 中包含的布局中存在的视图元素对齐

> ID：14979366
> 
> 赞同：0
> 
> 时间：2013-02-20T12:00:44.540
> 
> 标签：android, android-layout, android-ui

我想将当前布局中的视图元素与我通过 Android 中的标签包含的视图元素对齐。

布局1：（布局1.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/click_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/desc"
        android:padding="4dp"
        android:src="@drawable/icon_click" />

    <RelativeLayout
                    android:id="@+id/relativeLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:gravity="bottom"
            android:paddingLeft="8dp"
            android:paddingTop="6dp"
            android:text="@string/textview1"
        />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:text="@string/textView2"
        />
    </RelativeLayout>

</LinearLayout> 
```

布局2：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/includedLayout"
        layout="@layout/Layout1" />

    <View
        android:id="@+id/seperator"
        android:layout_width="wrap_content"
        android:layout_height="1dp"
        android:alpha="0.3"
        android:background="#FFFFFF" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <!-- I want to align this layout with relative layout present in the 
        Layout1.xml file which is included above -->

    </LinearLayout>

</LinearLayout> 
```

我想将 Layout2.xml 中的第二个 LinearLayout 与 Layout2.xml 文件中包含的 Layout1.xml 文件中的 RelativeLayout 对齐。

如果有人知道解决方案，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:03:09.840

为什么不尝试将要对齐的布局部分放入另一个文件中，并且仅将该文件包含在您的 layout2.xml 中，并在 layout2.xml 中手动编码 remining 部分。我的意思是采取`

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="bottom"
        android:paddingLeft="8dp"
        android:paddingTop="6dp"
        android:text="@string/textview1"
    />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:text="@string/textView2"
    />
</RelativeLayout>` 
```

这部分到另一个单独的文件中，并手动将 imageview 添加到 layout2.xml

# python - 获取要从用户那里选择的表名

> ID：14979376
> 
> 赞同：0
> 
> 时间：2013-02-20T12:01:11.833
> 
> 标签：python, sql, postgresql

我的问题是我有一个 SELECT 查询，但是要从中选择数据的表需要由用户从 HTML 文件中指定。谁能建议一种方法来做到这一点？

我正在查询一个 postgres 数据库，并且 SQL 查询在一个 python 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:04:41.077

创建一个变量`table_name`并**验证它只包含表名中允许的字符**。然后放到SQL查询中：

```
sql = "SELECT ... FROM {} WHERE ...".format(table_name) # replace ... with real sql 
```

如果你不验证它并且用户发送了一些讨厌的东西，[你就会遇到风险](http://xkcd.com/327/)。

# windows-runtime - 指定 HeaderTemplate 时隐藏的 GridView 项目

> ID：14979377
> 
> 赞同：0
> 
> 时间：2013-02-20T12:01:12.727
> 
> 标签：windows-runtime, winrt-xaml

我有一个像这样的网格视图：

```
<GridView ItemsSource="{Binding Source={StaticResource GroupedMatches}}" 
              SelectionMode="None"
              ItemClick="OnItemClicked"
              IsItemClickEnabled="True"
              Grid.Row="4"
              Grid.Column="1">
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}" />
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

`GroupedMatches`是页面中的一个 CollectionViewSource：

```
<CollectionViewSource x:Name="GroupedMatches" 
                      Source="{Binding Matches}" 
                      IsSourceGrouped="True" 
                      ItemsPath="Matches" /> 
```

它的后备视图模型是一个具有 Name 和 Matches 属性的类，其中 Matches 是一个 IEnumerable。

当上面使用跨越两个组的三个项目渲染时，只有两个项目被渲染。如果我删除 GridView.GroupStyle 则所有三个项目都按预期呈现。有谁知道当标题存在时可能导致项目被剔除的原因是什么？

编辑：跟进我发现第二组（其中项目未按预期显示）似乎其大小与第一组匹配。因此，如果第一组中有两个项目，那么第二组将显示两个项目。如果第一组有三个项目，则第一组将显示三个，依此类推。目前，我选择更改布局以更准确地反映 Filip 提到的默认网格布局，但无法确定为什么这两个组的大小是相关联的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:57:29.627

嗨，亚历克斯（我相信我们以前见过）。除了 Jim 所说的（你的每个 Matches 是否代表一个具有 Name 和另一个嵌套 Matches 属性的对象？）你可能会遇到一个问题，如果你不指定`GroupStyle.Panel`- 你会得到一个默认值`StackPanel`，它可能会得到一些项目在您的分组收藏夹中。当您创建默认的“网格应用程序 (XAML)”-基于模板的应用程序时，您将获得以下组面板的定义：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <VariableSizedWrapGrid
            Orientation="Vertical"
            Margin="0,0,80,0" />
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

现在，如果您将其注释掉-您的组将从此更改

![定义了 GroupStyle 的 GridView](../Images/fa72dfc79fd89504c09964bf3815dc90.png)

对此

![未定义 GroupStyle 的 GridView](../Images/825e48cf7dd981ef2f4190d731f9c21b.png)

# java - 如何在java中将字节转换为long

> ID：14979380
> 
> 赞同：1
> 
> 时间：2013-02-20T12:01:21.247
> 
> 标签：java, bytearray, endianness

在这里，我有一个字符串，我将此字符串转换为 long，然后将此 long 值转换为字节。该字节数组长度为 6。

```
 final byte[] tagBytes = ByteBuffer.allocate(8).order(ByteOrder.LITTLE_ENDIAN)
            .putLong(Long.parseLong("02201156116")).array();
    System.arraycopy(tagBytes, 0, tag, 0, 6);
    Log.d("TAG", "TAG in bytes "+Arrays.toString(tag)); 
```

在这里我得到这样的输出`[52, 84, 49, -125, 0, 0]`

现在我想像以前一样在 String 中转换这个输出字节`"02201156116"`

所以在这里我必须首先在 BIG_ENDIAN 中排序字节，然后包装字节并从中获取长值。但是在这里我很惊讶为什么它不适合

```
ByteBuffer.wrap(tempDateBytes).order(ByteOrder.BIG_ENDIAN).getLong() 
```

这和它的工作

`ByteBuffer.wrap(tempDateBytes).order(ByteOrder.LITTLE_ENDIAN).getLong()`这个，顺便说一句，我们必须应用 BIG_ENDIAN，因为当我们将 long 转换为字节时，我们使用了 LITTLE_ENDIAN。所以我认为我们必须在这里使用 BIG_ENDIAN。但它不适用于 BIG_ENDIAN，它适用于 LITTLE_ENDIAN。

我用来转换`[52, 84, 49, -125, 0, 0]`的这段代码`02201156116`

```
 long time,time1;
    final byte[] tempDateBytes = new byte[8];
    System.arraycopy(tagBytes, 0, tempDateBytes, 0, 6);
    time1 = ByteBuffer.wrap(tempDateBytes).order(ByteOrder.BIG_ENDIAN).getLong();
    time = ByteBuffer.wrap(tempDateBytes).order(ByteOrder.LITTLE_ENDIAN).getLong();
    Log.d("TAG", "Orignal TAG "+time);
    Log.d("TAG", "BAD TAG  "+time1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:50:57.610

考虑一下 `short`。假设我们对值 258 进行编码：

```
258 = 256 + 2 = 0x0102 
```

现在，如果我们把它放在一个数组中，我们必须决定将哪个字节放在索引 0 处。我们可以这样做

```
{ 0x01, 0x02 } 
```

或者

```
{ 0x02, 0x01 } 
```

没有顺序本身比其他顺序更好，但关键是要记住我们使用的顺序，当我们想要解码数组并想要返回值 258 时。

这就是 LITTLE_ENDIAN 和 BIG_ENDIAN 的目的。在编码时，它告诉要使用的字节顺序。在解码时，它告诉我们编码时使用的字节顺序。

因此，为了不搞砸，一定要在编码和解码时使用*相同的字节顺序。*

# php - ZF2 + 没有作曲家的学说

> ID：14979381
> 
> 赞同：2
> 
> 时间：2013-02-20T12:01:27.263
> 
> 标签：php, doctrine-orm, zend-framework2

我有一个有效的 ZF2（骨架）应用程序，并且想要集成 Doctrine。

我已经从 github 下载了 2 个模块（DoctrineModule 和 DoctrineORMModule），因为我无法使用 composer（所以请不要回答；“get composer”）。

经过数小时试图找到问题后，我不断收到以下错误：

致命错误：在第 54 行的教义/DoctrineModule/src/DoctrineModule/Module.php 中找不到类 'Doctrine\Common\Annotations\AnnotationRegistry'。

我花了数小时搜索和尝试调试，但我找不到修复它的方法。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T13:23:32.917

`DoctrineORMModule`不明确支持没有作曲家的自动加载（因为它是一团糟）。

在当前 ( `0.7.*`) 版本中`DoctrineORMModule`，所需的软件包如下：

*   [学说/共同](https://github.com/doctrine/common/tree/2.3.0)（2.3.0）
*   [学说/dbal](https://github.com/doctrine/dbal/tree/2.3.2) (2.3.2)
*   [symfony/控制台](https://github.com/symfony/Console/tree/v2.1.7)(v2.1.7)
*   [教义/orm](https://github.com/doctrine/doctrine2/tree/2.3.2) (2.3.2)
*   [教义/教义模块](https://github.com/doctrine/DoctrineModule/tree/0.7.1)（0.7.*）
*   [教义/教义-orm-模块](https://github.com/doctrine/DoctrineORMModule/tree/0.7.0)（0.7.0）

您可以做的是[`init_autoloader.php`](https://github.com/zendframework/ZendSkeletonApplication/blob/master/init_autoloader.php)在您的骨架应用程序中定义所有自动加载名称空间（解释混乱）。要替换的代码是关于自动加载器工厂的部分：

```
Zend\Loader\AutoloaderFactory::factory(array(
    'Zend\Loader\StandardAutoloader' => array(
        'autoregister_zf' => true,
        'namespaces' => array(
            'Doctrine\Common'   => __DIR__ . '/vendor/doctrine/common',
            'Doctrine\DBAL'     => __DIR__ . '/vendor/doctrine/dbal',
            'Symfony\Console'   => __DIR__ . '/vendor/symfony/console',
            'DoctrineModule'    => __DIR__ . '/vendor/doctrine/doctrine-module',
            'DoctrineORMModule' => __DIR__ . '/vendor/doctrine/doctrine-orm-module',
        ),
    ),
)); 
```

您必须自己配置各种 git 子模块

作为`0.8.*`模块的版本，由于最近的拆分方式，依赖关系会增加很多`doctrine/common`，所以考虑找到一个解决方案来开始使用composer，否则你只会延迟未来的巨大问题。

这个解决方案现在应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T12:47:41.227

表单注解需要Doctrine\Common，它包含一个注解解析引擎。安装 Doctrine\Common 的最简单方法是使用 Composer；只需更新您的 composer.json 并将以下行添加到 require 部分：

"doctrine/common": ">=2.1", 然后运行 ​​php composer.phar update 安装依赖。

如果您不使用 Composer，请访问 Doctrine 项目网站以获取有关安装的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:09:40.157

尝试在Application模块的Module.php中编辑如下方法：

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                'Doctrine' => //Path where your doctrine dist resides
            ),
        ),
    );
} 
```

无需为 and 定义自动加载配置`DoctrineModule`，`DoctrineORMModule`因为这是 ZF2 模块并且已经提供了自动加载配置。

# performance - 每个桶的最大沙发底视图数

> ID：14979382
> 
> 赞同：9
> 
> 时间：2013-02-20T12:01:30.487
> 
> 标签：performance, couchbase, couchbase-view

假设桶中有大量数据（>100GB、>100M 文档、>12 种文档类型），并且假设每个视图只适用于一种文档类型，那么每个桶有多少视图太多了？或者换一种方式问，什么时候应该将某些文档类型拆分为单独的存储桶，以节省处理所有文档类型的所有视图的开销？

我很难决定如何将我的数据拆分为 couchbase 存储桶，以及数据所需视图的性能影响。我的数据由十几个关系数据库组成，其中至少有一半在多个表中包含数亿行。

[http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-bestpractice.html)文档部分“使用文档类型”似乎暗示在同一个存储桶中有多个文档类型并不理想，因为针对所有文档更新特定文档类型的视图，即使是那些永远不会匹配视图的文档。实际上，它建议将数据分成桶以避免这种开销。

然而，出于性能原因，每个集群有 10 个桶的限制。因此，我唯一的结论是每个集群最多可以有效地处理 10 个大型文档集合。这是准确的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T15:35:25.783

Tug 的建议是正确的，也允许我添加一些观点。

可以认为存储桶与 RDMS 世界中的“数据库实例化”最密切相关（尽管不完全相关）。该“数据库”中将有多个表/模式，并且这些表/模式都可以在一个存储桶中组合。

将存储桶视为共享一些通用配置参数（RAM 配额、副本计数等）的数据的逻辑分组，当您需要单独控制某些数据集时，您只需要将数据拆分为多个存储桶。其他原因与不同数据集的工作负载非常不同或希望能够分别跟踪这些数据集的工作负载有关。

一些例子：

-我想控制一组数据的缓存行为与另一组不同。例如，许多客户有一个他们希望始终在 RAM 中的“会话”存储桶，而他们可能有一个更大的“用户配置文件”存储桶，不需要缓存在 RAM 中的所有数据。从技术上讲，这两个数据集可以驻留在一个存储桶中，并允许 Couchbase 智能地知道哪些数据要保存在 RAM 中，但是您没有太多保证或控制会话数据不会被推出......所以把它在自己的存储桶中允许您强制执行。它还为您提供了能够单独监控该流量的额外好处。

-我希望一些数据比其他数据被复制更多次。虽然我们通常在大多数集群中只推荐一个副本，但有时我们的用户会选择他们希望额外复制时间的某些数据集。这可以通过单独的存储桶进行控制。

- 同样，我只希望将一些数据复制到另一个集群/数据中心。这也是按桶控制的，因此可以将数据拆分到单独的桶中。

- 当您对给定数据集的工作负载（尤其是写入量）存在相当大的差异时，从视图/索引的角度来看，将数据分离到单独的存储桶中确实开始有意义。我提到这一点是因为这是真的，但我也想明确一点，这不是常见的情况。您应该在发现问题后使用此方法，而不是在您认为可能之前使用此方法。

关于最后一点，是的，对存储桶的每次写入都会被索引引擎拾取，但是通过使用 JSON 中的文档类型，您可以非常快速地中止对给定文档的处理，并且它确实不应该对有大量数据不适用于某些视图。如果您不介意，我特别好奇文档的哪些部分暗示了其他内容，因为这当然不是我们的意图。

所以一般来说，我们看到大多数部署的桶数（2-3）很少，只有少数超过 5 个。我们 10 的限制来自我们内部跟踪统计信息的一些已知 CPU 和磁盘 IO 开销（负载或桶上缺少它在这里无关紧要）。我们当然计划在未来的版本中减少这种开销，但这仍然不会改变我们只使用几个存储桶的建议。无论如何，能够将多个“模式”组合成一个逻辑分组并在其中应用视图/索引的优势仍然存在。

我们现在正在提出更具体的指导方针和规模建议（我写前两个博客作为权宜之计，直到我们这样做）。

作为初始方法，您希望尝试将设计文档的数量保持在 4 左右，因为默认情况下我们最多并行处理 4 个。您可以增加这个数字，但这应该与增加的 CPU 和磁盘 IO 容量相匹配。然后，您需要将每个文档中的视图数量保持在相对较低的水平，可能远低于 10，因为它们都是按顺序处理的。

我最近与一位拥有大量视图的用户合作（大约 8 个设计文档和一些具有近 20 个视图的 dd），我们能够通过将多个视图合并为一个来大幅降低这一点。显然它非常依赖于应用程序，但您应该尝试从一个索引生成多个不同的“查询”。使用归约、键前缀（在视图内）和排序规则，所有这些都与不同的范围和分组查询相结合，可以使单个索引起初看起来很拥挤，但实际上非常灵活。

您拥有的设计文档和视图越少，您需要的磁盘空间、IO 和 CPU 资源就越少。不幸的是，永远不会有灵丹妙药或硬性准则。最后，YMMV 和在您自己的数据集上进行的测试比我能写的任何多页响应都要好；-)

希望对您有所帮助，如果您对不想发布的特定用例有具体问题，请随时直接与我们联系。

佩里

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T13:22:57.633

正如您从 Couchbase 文档中看到的那样，实际上不可能提供“通用”规则来为您提供确切的成员。

但是根据您使用的最佳实践文档和一些讨论（此处），您应该能够正确设计您的数据库/视图。

让我们从最后一个问题开始：

是的，Couchbase 建议使用少量存储桶的原因是为了性能 - 更重要的是资源消耗 - 原因。我邀请您阅读这些有助于了解“内部”Couchbase 的博客文章：

*   尺寸 1： http: [//blog.couchbase.com/how-many-nodes-part-1-introduction-sizing-couchbase-server-20-cluster](http://blog.couchbase.com/how-many-nodes-part-1-introduction-sizing-couchbase-server-20-cluster)
*   大小 2： http: [//blog.couchbase.com/how-many-nodes-part-2-sizing-couchbase-server-20-cluster](http://blog.couchbase.com/how-many-nodes-part-2-sizing-couchbase-server-20-cluster)
*   压缩： http: [//blog.couchbase.com/compaction-magic-couchbase-server-20](http://blog.couchbase.com/compaction-magic-couchbase-server-20)

所以你会看到大部分的“操作”都是通过bucket来完成的。

那么现在让我们看看原来的问题：

*   是的，大多数时候您将按文档类型组织设计文档/和视图。
*   将所有文档“类型”放在一个（少数）存储桶中不是问题，这实际上是您使用 Couchbase 的方式
*   要查看的最重要部分是文档的大小（查看 JSON 解析的“长度”）以及文档创建/更新和删除的频率，因为视图的 JS 代码仅在您创建/更改文档时执行。

所以你应该怎么做：

*   1个单桶
*   多少设计文件？（你有多少种？）
*   您对每份文件有何看法？

事实上，最昂贵的部分不是在索引或查询期间，而是在您必须重新平衡节点之间的数据和索引时（添加、删除、节点故障）

最后，但看起来你已经知道了，这一章很好理解视图是如何工作的（索引是如何创建和使用的）： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase -views-operation.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-operation.html)

如果需要，请随时添加更多信息。

# android - Listview特殊适配器更改列背景方向更改

> ID：14979386
> 
> 赞同：0
> 
> 时间：2013-02-20T12:01:42.030
> 
> 标签：android, listview, adapter

我有以下问题。该列表在纵向模式下显示良好。但是当我切换到横向时，项目的背景会被打乱/倒序。

例如：

```
column 1  Column2(a)    Column 3(b) Column 4(c)
1         2(red)        3           4
12        36(orange)    87(red)     32
94        55            44          23(orange) 
```

现在我转向横向，我的列表如下所示：

```
column 1  Column2(a)    Column 3(b) Column 4(c)
1         2             3           4(orange)
12        36(orange)    87(red)     32
94        55(red)       44          23 
```

数据保持不变，背景颜色被切换。

在我的特殊适配器中，我有一个这样的 getView：SpecAdapter_list.java

```
 public class SpecAdapter_list extends SimpleAdapter {

        public SpecAdapter_list(Context context, List<HashMap<String, String>> items, int resource, String[] from, int[] to) {
            super(context, items, resource, from, to);
        }
    @Override
        public View getView(int position, View convertView, ViewGroup parent) {
          View view = super.getView(position, convertView, parent);
           if (convertView == null)
           {

            // i have a listitem.xml wich lays-out each row in the list.
            // several textviews are hidden.
            // i check these hidden textviews on specific text.
            // if it has the text, we change the background of a specific column item.

              TextView c1 = (TextView) view.findViewById(R.id.c1);
              String c1_text=(String)a.getText();
              TextView Columnitema = (TextView) view.findViewById(R.id.Columnitema);          
              if(c1_text.equals("YES"))
              {
                  Columnitema.setBackgroundColor(0xFFe10000);
                  Columnitema.setTextColor(0xFFFFFFFF);
              }
              else if(c1_text.equals("NO"))
              {
                  Columnitema.setBackgroundColor(0xFFff9600);
                  Columnitema.setTextColor(0xFFFFFFFF);   
              } 

              TextView c2 = (TextView) view.findViewById(R.id.c2);
              String c2_text=(String)c2.getText();
              TextView Columnitemb = (TextView) view.findViewById(R.id.Columnitemb);          
              if(c2_text.equals("PERHAPS"))
              {
                  Columnitemb.setBackgroundColor(0xFFe10000);
                  Columnitemb.setTextColor(0xFFFFFFFF);
              }
              else if(c2_text.equals("ABSOLUTELY"))
              {
                  Columnitemb.setBackgroundColor(0xFFff9600);
                  Columnitemb.setTextColor(0xFFFFFFFF);   
              }
              TextView c3 = (TextView) view.findViewById(R.id.c3);
              String c3_text=(String)c3.getText();
              TextView Columnitemc = (TextView) view.findViewById(R.id.Columnitemc);          
              if(c3_text.equals("PERHAPS"))
              {
                  Columnitemc.setBackgroundColor(0xFFe10000);
                  Columnitemc.setTextColor(0xFFFFFFFF);
              }
              else if(c3_text.equals("ABSOLUTELY"))
              {
                  Columnitemc.setBackgroundColor(0xFFff9600);
                  Columnitemc.setTextColor(0xFFFFFFFF);   
              }                   
          }
          return view;
        }
    } 
```

MainActivity.java

```
package com.z_list_columnitembackground;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import com.z_list_columnitembackground.R;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            ListView lv= (ListView)findViewById(R.id.listview);

            // create the grid item mapping
            String[] from = new String[] {"rowid", "col_1", "col_2", "col_3", "c1_status","c2_status","c3_status"};
            int[] to = new int[] { R.id.LI_Number, R.id.Columnitema, R.id.Columnitemb, R.id.Columnitemc, R.id.c1, R.id.c2, R.id.c3 };

            // prepare the list of all records
            List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
           // for(int i = 0; i < 10; i++){
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("rowid", "1");
                map.put("col_1", "2");
                map.put("col_2", "3");
                map.put("col_3", "4");
                map.put("c1_status", "YES");
                map.put("c2_status", "");
                map.put("c3_status", "");
                fillMaps.add(map);

                HashMap<String, String> map2 = new HashMap<String, String>();
                map2.put("rowid", "12");
                map2.put("col_1", "36");
                map2.put("col_2", "87");
                map2.put("col_3", "32");
                map2.put("c1_status", "NO");
                map2.put("c2_status", "PERHAPS");
                map2.put("c3_status", "");
                fillMaps.add(map2);

                HashMap<String, String> map3 = new HashMap<String, String>();
                map3.put("rowid", "94");
                map3.put("col_1", "55");
                map3.put("col_2", "44");
                map3.put("col_3", "23");
                map3.put("c1_status", "");
                map3.put("c2_status", "");
                map3.put("c3_status", "ABSOLUTELY");
                fillMaps.add(map3);
           // }

            // fill in the grid_item layout
            SpecAdapter_list adapter = new SpecAdapter_list(this, fillMaps, R.layout.list_item, from, to);
            lv.setAdapter(adapter);     
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

字符串.xml

```
 <string name="app_name">Z_list_alternatingcolors</string>
    <string name="menu_settings">Settings</string>

    <string name="LI_Number">1</string>
    <string name="Columnitema">dummya</string>
    <string name="Columnitemb">dummyb</string>
    <string name="Columnitemc">dummyc</string>
</resources> 
```

AndroidManifest

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.z_list_columnitembackground"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.z_list_columnitembackground.MainActivity"
            android:label="@string/app_name" 
            android:windowSoftInputMode="stateHidden|adjustResize"
            android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:12:20.020

尝试

```
View view = convertView; 
```

代替：

```
View view = super.getView(position, convertView, parent); 
```

**编辑：**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
     View view = convertView;
     if(view == null){
         LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         view = inflater.inflate(R.layout.your_layout, null);
      }
 // i have a listitem.xml wich lays-out each row in the list.
    // several textviews are hidden.
    // i check these hidden textviews on specific text.
    // if it has the text, we change the background of a specific column item.

      TextView c1 = (TextView) view.findViewById(R.id.c1);
      String c1_text=(String)a.getText();
      TextView Columnitema = (TextView) view.findViewById(R.id.Columnitema);          
      if(c1_text.equals("YES"))
      {
          Columnitema.setBackgroundColor(0xFFe10000);
          Columnitema.setTextColor(0xFFFFFFFF);
      }
      else if(c1_text.equals("NO"))
      {
          Columnitema.setBackgroundColor(0xFFff9600);
          Columnitema.setTextColor(0xFFFFFFFF);   
      } 

      TextView c2 = (TextView) view.findViewById(R.id.c2);
      String c2_text=(String)c2.getText();
      TextView Columnitemb = (TextView) view.findViewById(R.id.Columnitemb);          
      if(c2_text.equals("PERHAPS"))
      {
          Columnitemb.setBackgroundColor(0xFFe10000);
          Columnitemb.setTextColor(0xFFFFFFFF);
      }
      else if(c2_text.equals("ABSOLUTELY"))
      {
          Columnitemb.setBackgroundColor(0xFFff9600);
          Columnitemb.setTextColor(0xFFFFFFFF);   
      }
      TextView c3 = (TextView) view.findViewById(R.id.c3);
      String c3_text=(String)c3.getText();
      TextView Columnitemc = (TextView) view.findViewById(R.id.Columnitemc);          
      if(c3_text.equals("PERHAPS"))
      {
          Columnitemc.setBackgroundColor(0xFFe10000);
          Columnitemc.setTextColor(0xFFFFFFFF);
      }
      else if(c3_text.equals("ABSOLUTELY"))
      {
          Columnitemc.setBackgroundColor(0xFFff9600);
          Columnitemc.setTextColor(0xFFFFFFFF);   
      }                   
  }
  return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:08:43.673

好吧，我找到了答案。这里是 SpecAdapter_list.java 的正确代码

```
package com.z_list_columnitembackground;

import java.util.HashMap;
import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class SpecAdapter_list extends SimpleAdapter {
private int[] colors = new int[] { 0x30FF0000, 0x300000FF };

    private LayoutInflater mInflater;
     private final List<HashMap<String, String>> names;
     private int id;

      public SpecAdapter_list(Context context, List<HashMap<String, String>> items, int resource, String[] from, int[] to) {
            super(context, items, resource, from, to);
            mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            this.names = items;
            this.id=resource;
          } 
      @Override
     public View getView(int position, View convertView, ViewGroup parent) 
      {
          ViewHolder holder = null;
         if (convertView == null) 
          {
              holder = new ViewHolder();
              convertView = mInflater.inflate(id, null);
              holder.c1 = (TextView)convertView.findViewById(R.id.c1);
              holder.c2 = (TextView)convertView.findViewById(R.id.c2);
              holder.c3 = (TextView)convertView.findViewById(R.id.c3);
              holder.LI_Number = (TextView)convertView.findViewById(R.id.LI_Number);
              holder.Columnitema = (TextView)convertView.findViewById(R.id.Columnitema);
              holder.Columnitemb = (TextView)convertView.findViewById(R.id.Columnitemb);
              holder.Columnitemc = (TextView)convertView.findViewById(R.id.Columnitemc);
              convertView.setTag(holder);
          } 
          else 
          {
              holder = (ViewHolder)convertView.getTag();
          }

          //set background color of the whole listitem. 
          View view = super.getView(position, convertView, parent);
          int colorPos = position % colors.length;
          view.setBackgroundColor(colors[colorPos]);

          //set data in correct fields
          final HashMap<String, String> o = names.get(position);
          holder.c1.setText(o.get("c1_status"));
          holder.c2.setText(o.get("c2_status"));
          holder.c3.setText(o.get("c3_status"));
          holder.LI_Number.setText(o.get("rowid"));
          holder.Columnitema.setText(o.get("col_1"));
          holder.Columnitemb.setText(o.get("col_2"));
          holder.Columnitemc.setText(o.get("col_3"));

          //get hidden field, check for value and give that field a backgroundcolor
          TextView c1 = (TextView) convertView.findViewById(R.id.c1);
          String c1_text=(String)c1.getText();
          TextView Columnitema = (TextView) convertView.findViewById(R.id.Columnitema);          
          if(c1_text.equals("YES"))
          {
              Columnitema.setBackgroundColor(0xFFe10000);
              Columnitema.setTextColor(0xFFFFFFFF);
          }
          else if(c1_text.equals("NO"))
          {
              Columnitema.setBackgroundColor(0xFFff9600);
              Columnitema.setTextColor(0xFFFFFFFF);   
          }
          else
          {
              Columnitema.setBackgroundColor(0x00000000);
              Columnitema.setTextColor(0xFF000000);               
          }
          TextView c2 = (TextView) convertView.findViewById(R.id.c2);
          String c2_text=(String)c2.getText();
          TextView Columnitemb = (TextView) convertView.findViewById(R.id.Columnitemb);          
          if(c2_text.equals("PERHAPS"))
          {
              Columnitemb.setBackgroundColor(0xFFe10000);
              Columnitemb.setTextColor(0xFFFFFFFF);
          }
          else if(c2_text.equals("ABSOLUTELY"))
          {
              Columnitemb.setBackgroundColor(0xFFff9600);
              Columnitemb.setTextColor(0xFFFFFFFF);   
          }
          else
          {
              Columnitemb.setBackgroundColor(0x00000000);
              Columnitemb.setTextColor(0xFF000000);               
          }          
          TextView c3 = (TextView) convertView.findViewById(R.id.c3);
          String c3_text=(String)c3.getText();
          TextView Columnitemc = (TextView) convertView.findViewById(R.id.Columnitemc);          
          if(c3_text.equals("PERHAPS"))
          {
              Columnitemc.setBackgroundColor(0xFFe10000);
              Columnitemc.setTextColor(0xFFFFFFFF);
          }
          else if(c3_text.equals("ABSOLUTELY"))
          {
              Columnitemc.setBackgroundColor(0xFFff9600);
              Columnitemc.setTextColor(0xFFFFFFFF);   
          } 
          else
          {
              Columnitemc.setBackgroundColor(0x00000000);
              Columnitemc.setTextColor(0xFF000000);               
          }          

          return convertView;
      }

     //a viewholder class for each field inside list_item.xml
     public static class ViewHolder {
            public TextView c1;     
            public TextView c2;         
            public TextView c3;     
            public TextView LI_Number;      
            public TextView Columnitema;        
            public TextView Columnitemb;    
            public TextView Columnitemc;                        
          } 
} 
```

# sql - 根据字段值设置用户状态

> ID：14979392
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:02:00.903
> 
> 标签：sql, sql-server, tsql

我有一个由其他视图组成的数据库视图，它有一个用户和他们当前的认证级别。

诀窍是用户可以从旧系统中携带较旧的认证，并且在几个月后到期之前，我必须考虑到这一点。

3级认证分别为“初学者”、“专家”和“大师”

在大多数情况下，用户要么拥有旧系统的认证，要么已获得新系统的某种级别的认证，在这种情况下，我有他们的认证级别，没有问题。然而，有极少数情况会导致用户从遗留系统中获得了“专家”，但在新系统中已经完成了“大师”。在这种情况下，我希望将他们的认证级别设置为“大师”，因为这是两者中较高的。

任何想法如何从视图中实现这一目标？

列是“UserId”、“UserFirstName”、“UserLastName”和“CertificationLevel”

我尝试过 case 语句、临时表和 if 语句，但似乎无法得到我需要的东西。

逻辑很简单：如果一个用户的行数超过 1 行，则取最高级别​​的认证并丢弃另一行。

非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:12:06.477

这是一种方法：

您给每个级别一个数字并获得最大数字并从那里再次解码。

```
select userid, case when max_lvl = 1 then 'beginner'
                    when max_lvl = 2 then 'expert'
                    when max_lvl = 3 then 'master' end as certificationlevel
from
  (select userid, MAX(case when certificationlevel = 'beginner' then 1
                      when certificationlevel = 'expert' then 2
                      when certificationlevel = 'master' then 3 end) as max_lvl
  from test
  group by userid) test; 
```

这符合您的需要吗？

[http://www.sqlfiddle.com/#!6/277e6/5](http://www.sqlfiddle.com/#!6/277e6/5)

# html - 如何在我的主页上执行 HTML 文件？

> ID：14979393
> 
> 赞同：0
> 
> 时间：2013-02-20T12:02:06.240
> 
> 标签：html

我刚刚创建了一个基本的 html 文件，并想将该文件上传到我的网站。

所以我所做的是，转到 cpanel->file manager->/htdocs 并上传文件（**sandy.html**）。

但问题是它没有在我的主页上执行（即sandeep.0fees.net）。它只是显示我上传的文件。

我想当你看到[我的网站时你会更好地理解。](http://sandeep.0fees.net/)

我哪里错了？我应该怎么做才能使该文件在*sandeep.0fees.net*而不是*sandeep.0fees.net/sandy.html*上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:03:36.010

将您的文件重命名为`index.html`

或者直接调用[http://sandeep.0fees.net/sandy.html](http://sandeep.0fees.net/sandy.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:04:05.710

尝试将其重命名为 index.html。有一个称为默认文档的设置，它是在您结束没有文件名的 url 时加载的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T12:04:04.720

如果您希望它成为默认登录页面，请将其命名为*index.html*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:18:27.267

您还可以将此行添加到**public_html文件夹中的****.htaccess**文件中：

 **```
DirectoryIndex sandy.html index.php index.html 
```

如果它不存在，请创建它！:)**

# android - 如何将画廊粘贴在所有设备中心的左侧？

> ID：14979402
> 
> 赞同：1
> 
> 时间：2013-02-20T12:02:34.777
> 
> 标签：android

当画廊第一次显示时，它会自动将第一个项目居中。我想要的行为是左对齐父布局中的第一项而不是居中。我怎样才能在所有设备中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T09:50:37.323

这很难在画廊视图中实现。因此，您必须使用其他更好的方法来使用 Horizo​​ntalListview。

参考这个[Horizo​​ntalVariableListView](https://github.com/sephiroth74/HorizontalVariableListView)

祝你好运.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:06:22.550

将重力属性设置为左侧： http: [//developer.android.com/reference/android/widget/Gallery.html#setGravity(int)](http://developer.android.com/reference/android/widget/Gallery.html#setGravity(int))

一些常量值： http: [//developer.android.com/reference/android/widget/Gallery.html#attr_android :gravity](http://developer.android.com/reference/android/widget/Gallery.html#attr_android:gravity)

# javascript - 无法通过 id 或 className 获取元素

> ID：14979403
> 
> 赞同：0
> 
> 时间：2013-02-20T12:02:37.327
> 
> 标签：javascript, jquery, dom, iframe, getelementsbyclassname

我有一个包含几个 div 和其他元素的 iframe。我想将焦点设置到几个文本框中的一个文本框。

我用了：

```
 a = iFrameObj.contentWindow.document.getElementById('myTxtBox');

   But here, a is null; 
```

我可以使用以下代码访问文本框对象；

```
var myTextBox = iFrameObj.contentWindow.document.getElementsByTagName('input')[52]; 
```

但我想使用更通用的方法来获取对象而不是硬编码索引。

由于此文本框具有唯一的类名，因此我尝试了以下代码：

```
var myTextBox = iFrameObj.contentWindow.document.getElementsByClassName('rgtxt')[0]; 
```

但我错误：

```
"Object does not support this property or method" 
```

我的文本框的 HTML 是：

```
<input name="myTxtBox" type="text" class="rgtxt" id="myTxtBox" value="hello" style="display:block;color:Black;background-color:rgb(240, 241, 241);" readonly="readonly" /> 
```

有人可以帮助 iFrame 这两种方法有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:06:06.880

检查这个

```
$("input[id$='myTxtBox']").val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:13:17.937

试试这个

```
 $("#youriFrameID").contents().find("input.rgtxt").focus(); 
```

使用 jquery...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:24:20.227

getElementsByClassName 方法只在 IE9+ 上可用，所以错误信息是正确的（虽然不是很清楚），在 IE8 上没有这种方法。

您可以在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ie/ff975198 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ff975198%28v=vs.85%29.aspx)

# sitecore - Sitecore - 如何生成站点地图 xml

> ID：14979405
> 
> 赞同：-2
> 
> 时间：2013-02-20T12:02:38.760
> 
> 标签：sitecore

我需要为我们的站点核心项目生成站点地图 xml。我已经看到它是通过 Nicam 示例完成的。我怎样才能做到这一点？

（我在之前的帖子中问过同样的问题，抱歉重复的问题，我已经删除了。那是一个错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:27:57.737

这是一个重复的问题。昨天也问了同样的问题；）

如果您想要一个站点地图页面来列出您网站上的页面，您应该尝试共享源模块“站点地图”。 [http://marketplace.sitecore.net/en/Modules/Sitemap.aspx](http://marketplace.sitecore.net/en/Modules/Sitemap.aspx)

但是，如果您正在使用站点地图进行搜索引擎优化，请使用站点地图 XML。 [http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx](http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx)

请参阅[原始帖子/答案](https://stackoverflow.com/questions/14956383/how-to-build-a-sitemap-using-sitecore/14956563#14956563)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:14:57.157

Sitecore Marketplace 中有一个名为 SitemapXML 的模块。它可以从[http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx](http://marketplace.sitecore.net/en/Modules/Sitemap_XML.aspx)下载。您还可以编写自己的自定义逻辑来创建由客户需求定义的站点地图 xml。

# javascript - html 样式在 Docbook 和 TEI 文档中是否有效？

> ID：14979408
> 
> 赞同：0
> 
> 时间：2013-02-20T12:02:50.543
> 
> 标签：javascript, xml, web-applications, wysiwyg, docbook

我正在开发一个 Web 应用程序，您可以在其中制作 docbook 和 TEI 文档，我知道 docbook 和 TEI 有自己的粗体、斜体等标签。文本，但我想使用一些所见即所得的编辑器来制作这些文本样式。目前我正在使用 NicEdit，这很好，但我不知道它是否对 docbook 和 TEI 有效，以在其节点内包含像 <b> text </b> 或 < font color="red"> text </font> 这样的 html 代码，即由 NiceEdit 制作 既然我找不到答案，你能告诉我这样做是有效的还是我的想法是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T21:52:34.033

你的想法是错误的。

DocBook 是逻辑标记。表示事项在样式表中定义。

# sql - text、ntext 和 image 数据 > 类型不能进行比较或排序，除非使用 IS NULL 或 LIKE > 运算符

> ID：14979413
> 
> 赞同：40
> 
> 时间：2013-02-20T12:02:56.190
> 
> 标签：sql, sql-server

电子邮件属于餐桌预订，在我们的 Microsoft sql server 中定义为“文本”类型

```
SELECT email, 
 COUNT(email) AS NumOccurrences
FROM Booking
GROUP BY email
HAVING ( COUNT(email) > 1 ) 
```

运行上述查询（尝试在预订中查找重复的电子邮件）后，我收到如下错误消息：

> text、ntext 和 image 数据类型不能进行比较或排序，除非使用 IS NULL 或 LIKE 运算符。

我正在使用 Microsoft Sql

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-20T12:05:36.843

既然你在用`SQL Server`，为什么不把数据类型改成`VARCHAR(100)`呢？

要在不更改数据类型的情况下解决此错误，`TEXT or NTEXT`需要将列转换为`VARCHAR or NVARCHAR`在语句的`ORDER BY`子句或`GROUP BY`子句中使用时`SELECT`。例如，*有点乱*

```
SELECT  CAST(email AS NVARCHAR(100)) email, 
        COUNT(CAST(email AS NVARCHAR(100))) AS NumOccurrences
FROM    Booking
GROUP   BY CAST(email AS NVARCHAR(100))
HAVING  COUNT(CAST(email AS NVARCHAR(100))) > 1 
```

*   [SQL Server 错误消息 - 消息 306](http://www.sql-server-helper.com/error-messages/msg-306.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T16:37:07.717

由于我的 ORM 存在问题，我对接受的答案有疑问。此答案只是在接受的答案不起作用时的解决方法，并且仅当您只有 group by 中的列时才有效，因为它是必需的，因此您可以在选择中包含该列。

它在聚合函数内部强制转换列，因此在group by中不需要它，并且不会发生错误并且返回的数据应该仍然是正确的。

```
MIN(CAST(email AS NVARCHAR(4000))) as email 
```

理想情况下，您会找到一种方法来避免这种黑客攻击，但这在某些情况下可能很有用。

# jquery - 如何在 JQuery 中使用 .load() 加载页面并在同一页面上刷新？

> ID：14979414
> 
> 赞同：0
> 
> 时间：2013-02-20T12:02:57.857
> 
> 标签：jquery, ajax

我想创建一个站点，如果您单击导航按钮，它会加载页面并在 JQuery 中显示 .load() （无需从 index.html 转到 about.html，而仅从 about.html 加载内容）。这确实有效，但是当页面出现并刷新时，它会重新加载索引页面，而不是当前页面。有没有办法刷新当前页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:05:56.590

在 HTML 5 中，您可以使用如下内容：

window.history.pushState(“字符串”, “标题”, “newUrl”);

将某些内容添加到历史记录中，这也将更新当前页面的 URL。这将更新地址栏中的页面，而无需重新加载页面。

这是一个类似的问题：

[如何在不重新加载页面的情况下更改浏览器地址栏 - HTML/Javascript](https://stackoverflow.com/questions/5607902/how-to-change-browser-address-bar-without-reloading-page-html-javascript)

# acs - 检测原始中继方应用程序

> ID：14979419
> 
> 赞同：0
> 
> 时间：2013-02-20T12:03:12.083
> 
> 标签：acs

我想针对 ACS 和我的自定义 STS 提供程序对来自 RP1 和 RP2 应用程序的用户进行身份验证。我需要知道用户来自哪个应用程序 RP1 或 RP2。有可能吗？怎么做？

我认为不使用 ACS 是微不足道的，但如何使用 ACS 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:31:31.550

在联邦链中，STS 理论上只知道它的邻居（在这种情况下，您的 IdP 只知道 ACS），因此您不能这样做。能够做到这一点的唯一官方支持的方法是将相同的物理 STS 注册为 ACS 中的两个不同的逻辑身份提供者（例如[http://myidp.com/rp1](http://myidp.com/rp1)和[http://myidp.com/rp2](http://myidp.com/rp2)）。

但是，在实践中，您可以通过其他方式执行此操作，尽管官方不支持这种方式。以下假设您将 WS-Federation 用于您的自定义 IdP，尽管您也可以对其他协议执行类似的操作。ACS 对来自原始请求的所有数据进行编码，包括领域和回复地址，这些数据在 WS-Federation 响应的参数中使用[Base64UrlEncoding进行编码。](http://msdn.microsoft.com/en-us/library/vstudio/system.web.httpserverutility.urltokenencode.aspx)`wctx`您可以通过以下方式解码上下文：

```
SignInRequestMessage message = WSFederationMessage.CreateFromUri(Request.Url); 

byte[] bytes = HttpServerUtility.UrlTokenDecode(message.Context);

string decodedContext = UTF8Encoding.UTF8.GetString(bytes); 
```

这将为您提供一组名称/值对，其中两个将是`rm=<realm>&ry=<reply>`，它们将是您原始 RP 的领域和回复地址。

但是，正如我上面提到的，请注意，这不受官方支持，并且此上下文字符串的格式将来可能会发生变化。

# asp.net - 来自远程计算机的 IIS6 管理器未显示 ASP.Net 配置

> ID：14979420
> 
> 赞同：1
> 
> 时间：2013-02-20T12:03:15.140
> 
> 标签：asp.net, configuration, iis-6

我正在使用 IIS6 管理器控制台从我的 Windows 7 机器远程访问 Windows Server 2003 的 IIS6 管理器，但是 ASP.NET 版本下拉列表既没有显示任何版本，也无法编辑网站的配置。但是在服务器本身上它显示了所有版本的 ASP.NET，我可以编辑网站的配置。

![在此处输入图像描述](../Images/3965c9534f5ca25434b210541fa5ef9d.png)

以前有人经历过吗？我错过了什么吗？

谢谢 ：）

# jquery - 将外部类添加到不在域或子域上的链接

> ID：14979421
> 
> 赞同：0
> 
> 时间：2013-02-20T12:03:18.253
> 
> 标签：jquery

我想为不在我们域中的链接添加一个外部类……很容易找到解决方案，但它不捕获子域。

那么，如何仅在 href 主机位置不包含“hw.ac.uk”的标签上使用 addClass("external")？

以下很流行，但不捕获子域（我们的子域可以是一到两个深度，例如，子域。，www.subdomain。等）

```
$("a").filter(function() {
return this.hostname && this.hostname !== location.hostname;
}).addClass('external'); 
```

我想我想要[将类添加到所有使用js（jquery）链接到某个域的链接的反面](https://stackoverflow.com/questions/1713222/add-class-to-all-links-that-link-to-a-certain-domain-with-js-jquery)

谢谢

尼尔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T12:06:40.910

```
// Creating custom :external selector
$.expr[':'].external = function(obj){
    return !obj.href.match(/^mailto\:/)
            && (obj.hostname != location.hostname);
};

// Add 'external' CSS class to all external links
$('a:external').addClass('external'); 
```

**编辑** 没有发现子域问题。上面的代码只考虑顶级域

# import - Java 导入目录

> ID：14979428
> 
> 赞同：0
> 
> 时间：2013-02-20T12:03:52.923
> 
> 标签：import, java, .class-file

我想问一些关于 Java VM 的小问题以及关于它的事情。

如果我正确理解了导入过程，那么当我`import`在 Java 中通过关键字请求包的内容时，将从指定的导入目录导入包。然后，当我从计算机中的目录运行 Java 应用程序并且在 JVM 导入目录中找不到某些导入的包时，JVM 正在当前目录中查找它们。但在这种情况下，一定有问题，因为当我从 Eclipse 运行我的项目并从项目中请求一些包时，它被找到了。我认为 Eclipse 正在更改正在搜索包的目录。我对吗？这是在Java中导入的所有方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:15:32.587

import 语句只是语法糖，因此您不必在类中的任何地方指定完全限定名称。它实际上并没有在代码方面导入任何东西。

[在classpath](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)中查找类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:16:53.957

在eclipse中你可以配置构建路径（对于每个项目）选项项目-->构建路径。在那里您可以添加目录、jar 文件、外部 jar 文件等。您还可以检查已经定义的内容。

# java - 在其父 shell 的中心生成 swt shell

> ID：14979431
> 
> 赞同：8
> 
> 时间：2013-02-20T12:03:59.913
> 
> 标签：java, swt

我有 SWT 向导页面作为我的父 shell，为了在单击按钮时创建另一个 shell，我正在编写以下代码

```
Shell permissionSetShell = new Shell(Display.getCurrent().getActiveShell(), SWT.CENTER|SWT.DIALOG_TRIM|SWT.APPLICATION_MODAL);
permissionSetShell.setText(PropertyClass.getPropertyLabel(QTLConstants.PERMISSION_SET_COLUMN_LABEL));

// Add shell to the center of parent wizard
permissionSetShell.setLayout(componentsRenderer.createGridLayout(1, false, 0, 5, 0, 0));    
Monitor primary = Display.getCurrent().getPrimaryMonitor ();
Rectangle bounds = primary.getBounds ();
Rectangle rect = Display.getCurrent().getActiveShell().getBounds ();
int x = bounds.x + (bounds.width - rect.width) / 2;
int y = bounds.y + (bounds.height - rect.height)/2;              
permissionSetShell.setLocation (x, y); 
```

但是作为子外壳意味着这个外壳没有放置在作为父外壳的 SWT 向导的中心，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-18T05:59:41.067

```
Rectangle screenSize = display.getPrimaryMonitor().getBounds();
shell.setLocation((screenSize.width - shell.getBounds().width) / 2, (screenSize.height - shell.getBounds().height) / 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-03T21:14:24.807

如果您正在编写对话框或子组件，您可能希望使用 getParent 而不是询问主监视器的显示，以便窗口位于当前屏幕的中心以进行多个监视器设置。

```
Rectangle parentSize = getParent().getBounds();
Rectangle shellSize = shell.getBounds();
int locationX = (parentSize.width - shellSize.width)/2+parentSize.x;
int locationY = (parentSize.height - shellSize.height)/2+parentSize.y;
shell.setLocation(new Point(locationX, locationY)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T10:12:13.527

我刚刚遇到了同样的问题。我得到的解决方案有点不同。这可能会帮助其他人解决同样的问题。上下文是一个外壳 (hoverShell)，它在父外壳 (shell) 上悬停几秒钟，显示一条消息。

```
 private void displayMessage(Shell shell, String message) {
      Shell hoverShell = new Shell(shell, SWT.ON_TOP);
      hoverShell.setLayout(new FillLayout());
      Label messageLabel = new Label(hoverShell, SWT.NONE);
      messageLabel.setText(message);
      Point shellLocation = shell.getLocation();
      hoverShell.pack();
      hoverShell.setLocation(shellLocation.x + (shell.getSize().x / 2) - (hoverShell.getSize().x / 2), shellLocation.y + 40);
      hoverShell.open();
      Display.getDefault().timerExec(2000, new Runnable() {

        @Override
        public void run() {
            hoverShell.dispose();
        }
    });
} 
```

简而言之，这是以下公式：

> child_location.x = parent_location.x + .5*(parent_width.x) - .5*(child_width.x)

如果你想要 y 那么我相信它是完全相同的。可能取决于是否计算了窗口的上边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T08:48:13.543

我认为最好的方法是对此类对话框使用样式 SWT.SHEET。

# php - 为什么我在 MySQL 数据库中得到“Null”？Flash pro cs6

> ID：14979435
> 
> 赞同：0
> 
> 时间：2013-02-20T12:04:11.400
> 
> 标签：php, flash, flash-cs6

我正在尝试更新一个记录姓名和问题答案的 Flash 电影测验 - 我没有编写原始应用程序。测验有效，只是它在记录数据时将名称替换为 null。所有其他记录工作正常。我已经删除了`res2 - res12`只是为了缩短它，它们都运行良好。

*   我正在使用 Flash Pro CS6
*   代码在 AS3 中

提前感谢您对此有所了解。

* * *

从测验的名称输入页面。`participname`是文本字段输入：

```
stop();

btn1.addEventListener(MouseEvent.MOUSE_UP,function():void {
    var Name:String=participname.text.toString();
    gotoAndPlay(3);
}); 
```

从测验的最后一页

发送数据（）；function sendData(){ var messages:URLRequest = new URLRequest("./insertresult.php") messages.method = URLRequestMethod.POST

```
var posts:URLVariables = new URLVariables()
posts.Name = Name
posts.DateCurrent = dtFormatted
posts.Res01 = res01

messages.data = posts
trace(posts);

var loader:URLLoader = new URLLoader()
loader.dataFormat = URLLoaderDataFormat.TEXT
// loader.addEventListener(Event.COMPLETE, dataOnLoad)
loader.load(messages)

trace(messages); 
```

从 insertresult.php：

```
<?php
    //Capture data from $_POST array
    $name = $_POST['Name'];
    $date = $_POST['DateCurrent'];
    $res1 = $_POST['Res01'];

    /* if(!$name ) {
        echo "no input using default values <br>";
        $name = 'deleteme';
    }*/

    $connect = mysql_connect("mydatabase");
    mysql_select_db ("PAlogindatabase", $connect);
    $result = mysql_query("INSERT into rhymeoddity1 (name,date,res1) values ('$name','$date','$res1')");

    if($result) echo "writing=Ok&";
    else echo "writing=Error";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:16:59.527

在发布数据之前，您能否检查操作脚本是否正在正确读取和设置名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:30:12.410

我解决了问题，我相信这段代码隐藏了 var myname

停止（）;

btn1.addEventListener(MouseEvent.MOUSE_UP,function():void {

var myname:String=participname.text.toString();

gotoAndPlay(3);

}

);

我已经用这个替换了它，它现在工作正常。

停止（）;

var myname:String = "";

btn1.addEventListener(MouseEvent.MOUSE_UP,function():void {

我的名字=参与者名称.文本；

gotoAndPlay(3);

}

);

如果有人可以解释有什么区别，那么我可以理解

# r - 重新排列数据框 - R

> ID：14979436
> 
> 赞同：4
> 
> 时间：2013-02-20T12:04:12.843
> 
> 标签：r, dataframe, melt

我有一个看起来像这样的数据框：

```
 a        b       c         d
ab    0        0        1         0
cd   -0.415    1.415    0         0
ef    0        0        0.0811    0.918 
```

有没有一种简单的方法可以将此表转换为：

```
 a        b       c         d
ab    0        0        1         0
cd   -0.415    0        0         0
cd    0    1.415        0         0
ef    0        0        0.0811    0
ef    0        0        0         0.918 
```

如果原始表中有两个或多个数字，我想将其转换为相应的行数。我不知道该怎么做，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:36:28.380

这是一种方法，使用矩阵索引。（数据被转换成一个矩阵，所以如果你的数据是一种类型会更好，就像你的例子中的情况一样。）

```
reformat.dat <- function(dat) {
  tdat <- t(dat)
  nz <- tdat != 0
  i <- col(tdat)[nz]
  j <- row(tdat)[nz]
  out <- matrix(0, sum(nz), ncol(dat))
  out[cbind(seq_len(sum(nz)), j)] <- tdat[nz]
  rownames(out) <- rownames(dat)[i]
  colnames(out) <- colnames(dat)
  out
}

reformat.dat(dat)
#         a     b      c     d
# ab  0.000 0.000 1.0000 0.000
# cd -0.415 0.000 0.0000 0.000
# cd  0.000 1.415 0.0000 0.000
# ef  0.000 0.000 0.0811 0.000
# ef  0.000 0.000 0.0000 0.918 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T19:19:51.407

从@AnandaMahto 借一些并根据您的要求融化。请考虑：您希望检查的任何独特组合都在左侧~变量的值在右侧。在这种情况下，变量名变成了值。

```
library(reshape2)
mydf <- structure(list(a = c(0, -0.415, 0), b = c(0, 1.415, 0), 
                       c = c(1, 0, 0.0811), d = c(0, 0, 0.918)), 
                  .Names = c("a", "b", "c", "d"), 
                  class = "data.frame", row.names = c("ab", "cd", "ef"))
mydf$rows<- rownames(mydf)
m1<- melt(mydf, id="rows", measured= names(mydf))
m2<- dcast(m1, rows+value~..., fill=0)
m2<- m2[m2$value!=0, ]
m2$value <- NULL    

#rows      a     b      c     d
#2   ab  0.000 0.000 1.0000 0.000
#3   cd -0.415 0.000 0.0000 0.000
#5   cd  0.000 1.415 0.0000 0.000
#7   ef  0.000 0.000 0.0811 0.000
#8   ef  0.000 0.000 0.0000 0.918 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:20:17.350

这是一个简单的解决方案，使用`diag`：

```
o <- apply(df, 1, function(x) {
    t <- diag(x)
    colnames(t) <- names(x)
    t <- t[rowSums(t == 0) != length(x), ,drop = FALSE]
    t
})
ids <- rep(names(o), sapply(o, nrow))
o <- do.call(rbind, o)
row.names(o) <- ids

#         a     b      c     d
# ab  0.000 0.000 1.0000 0.000
# cd -0.415 0.000 0.0000 0.000
# cd  0.000 1.415 0.0000 0.000
# ef  0.000 0.000 0.0811 0.000
# ef  0.000 0.000 0.0000 0.918 
```

这是一个`matrix`. 如果`as.data.frame(.)`您需要`data.frame`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:43:25.330

这是一种方法，但您需要跟进一些外观更改以修复行名称。

您的数据以可重现的形式：

```
mydf <- structure(list(a = c(0, -0.415, 0), b = c(0, 1.415, 0), 
                       c = c(1, 0, 0.0811), d = c(0, 0, 0.918)), 
                  .Names = c("a", "b", "c", "d"), 
                  class = "data.frame", row.names = c("ab", "cd", "ef")) 
```

用 s 替换零`NA`：

```
mydf[mydf == 0] <- NA 
```

`stack`你`data.frame`让它成为一个“长” `data.frame`：

```
mydf1 <- data.frame(Rows = rownames(mydf), stack(mydf)) 
```

为“行”生成唯一值

```
mydf1$Rows <- make.unique(as.character(mydf1$Rows))
# Let's see what we have so far....
mydf1
#    Rows  values ind
# 1    ab      NA   a
# 2    cd -0.4150   a
# 3    ef      NA   a
# 4  ab.1      NA   b
# 5  cd.1  1.4150   b
# 6  ef.1      NA   b
# 7  ab.2  1.0000   c
# 8  cd.2      NA   c
# 9  ef.2  0.0811   c
# 10 ab.3      NA   d
# 11 cd.3      NA   d
# 12 ef.3  0.9180   d 
```

现在，只需使用`xtabs`来获取您正在寻找的输出。`as.data.frame.matrix`如果需要，将其包装起来`data.frame`，并在需要时清理行名。

```
as.data.frame.matrix(xtabs(values ~ Rows + ind, mydf1))
#           a     b      c     d
# ab.2  0.000 0.000 1.0000 0.000
# cd   -0.415 0.000 0.0000 0.000
# cd.1  0.000 1.415 0.0000 0.000
# ef.2  0.000 0.000 0.0811 0.000
# ef.3  0.000 0.000 0.0000 0.918 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T12:10:56.853

我认为您所要求的内容没有一个优雅的版本，但也许您可以使用`melt`from`reshape2`代替？它会给你每行/列对一行：

```
> library(reshape2) 
> # add row names as column
> df <- cbind(df, names=rownames(df))
> df <- melt(df,id.var="names")
Using  as id variables
> df[df$value != 0,]
   names variable   value
2     cd        a -0.4150
5     cd        b  1.4150
7     ab        c  1.0000
9     ef        c  0.0811
12    ef        d  0.9180 
```

# xml - 使用 XSLT v1 对 XML 元素进行分组

> ID：14979439
> 
> 赞同：0
> 
> 时间：2013-02-20T12:04:36.663
> 
> 标签：xml, xslt-1.0

对某些人来说，这似乎是一个简单的问题，但对我来说，这已经过了几天了。

我想更改此 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<questionnaire>
  <Id>questionnaireId</Id>
  <Desc>questionnnaireDesc here</Desc>
  <QuestParts>
    <part>
      <partNumber>1</partNumber>
      <questItems>
         <item>
              <itemId>1</itemId>
              <itemText>The first item</itemText>
         </item>
      </questItems>
    </part>
    <part>
      <partNumber>1</partNumber>
      <questItems>
         <item>
              <itemId>2</itemId>
              <itemText>The second item</itemText>
         </item>
      </questItems>
    </part>
    <part>
      <partNumber>2</partNumber>
      <questItems>
         <item>
              <itemId>3</itemId>
              <itemText>A third item, but inside part 2</itemText>
         </item>
      </questItems>
    </part>
    <part>
      <partNumber>2</partNumber>
      <questItems>
         <item>
              <itemId>4</itemId>
              <itemText>A fourth item, but inside part 2</itemText>
         </item>
      </questItems>
    </part>
  </QuestParts>
</questionnaire> 
```

对此：

```
<questionnaire>
  <Id>questionnaireId</Id>
  <Desc>questionnnaireDesc here</Desc>
  <QuestParts>
    <part>
      <partNumber>1</partNumber>
      <questItems>
         <item>
              <itemId>1</itemId>
              <itemText>The first item</itemText>
         </item>
         <item>
              <itemId>2</itemId>
              <itemText>The second item</itemText>
         </item>
      </questItems>
    </part>
    <part>
      <partNumber>2</partNumber>
      <questItems>
         <item>
              <itemId>3</itemId>
              <itemText>A third item, but inside part 2</itemText>
         </item>
         <item>
              <itemId>4</itemId>
              <itemText>A fourth item, but inside part 2</itemText>
         </item>
      </questItems>
    </part>
  </QuestParts>
</questionnaire> 
```

换句话说，我只是想删除重复的元素并将属于该部分的所有项目分组到该部分的元素中。

我已经尝试了很多方法，虽然有很多例子，但我找不到任何真正适合我的东西，我想避免再花 2 天时间来解决别人会在 5 分钟内解决的问题。

非常感谢您的帮助。

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:31:30.540

格雷格，

通过示例提供的链接，我设法使其与以下 XSLT 一起工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:key name="partnr" match="part" use="partNumber" />

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="QuestParts">
        <QuestParts>
            <xsl:for-each select="part[generate-id(.)=generate-id(key('partnr',partNumber))]">
                <xsl:variable name="curpartnr" select="partNumber" />
                <partNumber><xsl:value-of select="$curpartnr" /></partNumber>

                <questItems>
                    <xsl:for-each select="../part[generate-id(.)=generate-id(key('partnr',partNumber))]/questItems/item">
                         <item>
                              <itemId><xsl:value-of select="itemId" /></itemId>
                              <itemText><xsl:value-of select="itemText" /></itemText>
                         </item>
                    </xsl:for-each>
                </questItems>
            </xsl:for-each>
        </QuestParts>
    </xsl:template>
</xsl:stylesheet> 
```

希望能帮助到你。

# css - 图像相互重叠的导航

> ID：14979440
> 
> 赞同：0
> 
> 时间：2013-02-20T12:04:39.143
> 
> 标签：css, wordpress, navigation, html-lists, overlap

我必须制作一个导航，其元素相互重叠。详情请看图片。

[https://dl.dropbox.com/u/7551300/mock.png](https://dl.dropbox.com/u/7551300/mock.png)

我尝试将 ul li 与 display:table-row 和 display table-cell 一起使用，以确保所有元素在 ul 所在的 div 中获得相等的宽度。这很重要，因为其中会有几个具有 3 个或 4 个元素的导航而且我不想每次都硬编码它们的宽度。

我一直在寻找具有重叠背景图像属性的解决方案，但我失败了。

如何解决这个问题？我被困住了...

编辑：这是我的代码的jsfiddle

```
<li class="first-menu-item menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-9 current_page_item menu-item-18" id="menu-item-18">
        <a href="http://rmbp.home/wordpress/?page_id=9">Psychologie</a>
 </li> 
```

[http://jsfiddle.net/yA4zK/](http://jsfiddle.net/yA4zK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:13:47.083

您可以使用 z-index 和一些定位来实现您正在寻找的内容。

```
<ul>
    <li class="first">uno</li>
    <li class="second">dos</li>
    <li class="third">tres</li>
    <li class="fourth">quatro</li>
</ul> 
```

和CSS：

```
li{display:inline-block;border:1px solid red; padding: 10px;float:left; position:relative; min-width:100px}
li.first{background: green; z-index: 100; left: 0}
li.second{background:yellow; z-index: 99;left: -10px;}
li.third{background:purple; z-index: 98;left: -20px;}
li.fourth{background:brown; z-index: 97;left: -30px;} 
```

你明白了。

看看这个例子：http: [//jsfiddle.net/JKmEQ/](http://jsfiddle.net/JKmEQ/)

这是一个仅 css 的选项：

```
<ul>
    <li>uno</li>
    <li>dos</li>
    <li>tres</li>
    <li>quatro</li>
</ul>

li{display:inline-block;border:1px solid red; padding: 10px;float:left; position:relative; min-width:100px}
li:first-child{background: green; z-index: 100; left: 0}
li:nth-child(2){background:yellow; z-index: 99;left: -10px;}
li:nth-child(3){background:purple; z-index: 98;left: -20px;}
li:last-child{background:brown; z-index: 97;left: -30px;} 
```

[http://jsfiddle.net/TkyKj/](http://jsfiddle.net/TkyKj/)

如果您关心旧的 IE 支持，可能无法正常工作。在这种情况下，您可能需要一些 js 来为您添加类。

[http://caniuse.com/#search=nth](http://caniuse.com/#search=nth)

# xml - 使用 XSLT 合并两个具有公共子节点的节点

> ID：14979443
> 
> 赞同：1
> 
> 时间：2013-02-20T12:04:42.683
> 
> 标签：xml, xslt

我对 XSLT 一无所知，我需要快速了解一下这个问题：

我有一个这样的xml结构：

```
<node>
    <sub_node_1> value_1 </sub_node_1>
    ...
    <sub_node_n> value_n </sub_node_n>
    <repeatable_node> another_value_1 </repeatable_node>
</node>
...
<node>
    <sub_node_1> value_1 </sub_node_1>
    ...
    <sub_node_n> value_n </sub_node_n>
    <repeatable_node> another_value_m </repeatable_node>
</node> 
```

我想要在同一元素下聚合具有不同值的可重复节点的东西，即类似这样的东西

```
<node>
    <sub_node_1> value_1 </sub_node_1>
    ...
    <sub_node_n> value_n </sub_node_n>
    <repeatable_node> another_value_1 </repeatable_node>
    ...
    <repeatable_node> another_value_m </repeatable_node>
</node> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:42:40.033

这是一个简单的 XSLT 1.0 兼容解决方案：

### 样式表

```
<?xml version="1.0" encoding="iso-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- Keep only the first <node> element -->
  <xsl:template match="node[1]">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
      <!-- Apply all repeatable_node children of following <node> siblings. -->
      <xsl:apply-templates select="following-sibling::node/repeatable_node"/>
    </xsl:copy>
  </xsl:template>

  <!-- Drop all <node> elements following the first <node> element -->
  <xsl:template match="node[position() &gt; 1]"/>

</xsl:stylesheet> 
```

### 输入

```
<nodes>
  <node>
      <sub_node_1> value_1 </sub_node_1>
      <sub_node_n> value_n </sub_node_n>
      <repeatable_node> another_value_1 </repeatable_node>
  </node>
  <node>
      <sub_node_1> value_1 </sub_node_1>
      <sub_node_n> value_n </sub_node_n>
      <repeatable_node> another_value_m </repeatable_node>
  </node>
</nodes> 
```

### 输出

```
<?xml version="1.0"?>
<nodes>
  <node>
    <sub_node_1> value_1 </sub_node_1>
    <sub_node_n> value_n </sub_node_n>
    <repeatable_node> another_value_1 </repeatable_node>
    <repeatable_node> another_value_m </repeatable_node>
  </node>
</nodes> 
```

# cocos2d-iphone - Cocos2d 和 SpriteBatchNode：无法识别是哪个精灵帧导致 Assertion 失败

> ID：14979451
> 
> 赞同：1
> 
> 时间：2013-02-20T12:05:22.270
> 
> 标签：cocos2d-iphone, frame, sprite, assertions, spritebatch

我已经问过类似的问题，但我不知道如何正确调试它。这就是[问题](https://stackoverflow.com/questions/14769979/cocos2d-ios-and-xcode-how-can-i-debug-understand-this-stacktrace/14792101#14792101)。

我添加了一些异常处理程序（捕获所有 Objective-C）异常，这就是我所看到的结果：

![调用堆栈跟踪](../Images/08701d3bcc64a7f4ded9d03bf245d719.png)

![控制台输出](../Images/56ffbb3e4cf99185b605124b8043de3a.png)

**问题在于 setTexture 方法，它在断言验证需要显示的纹理名称是否与当前精灵批处理节点中的相同时失败。**

当试图用另一个场景替换一个场景时会发生这种情况，但并非总是发生。它与新场景有关，因为我试图通过从游戏的不同部分调用替换来“隔离”问题，但它仍然会带来麻烦。

在游戏场景中，我有几个精灵表和精灵批处理节点，但由于我无法隔离精灵表 ID，我无法理解哪个精灵帧给我带来了问题，我也不明白为什么会这样只是偶尔发生。

我想：

*   了解哪个精灵帧名称给了我 AssertionFailure
*   了解它属于哪个精灵表

这应该有助于我了解这是命名问题还是与其他问题有关。

希望不要对这个问题太蹩脚..

编辑：我尝试了答案，但我无法读取“文件名”信息，这是调试器所说的“摘要不可用”：

![摘要不可用](../Images/28b8d26c7391edc00f54f8440e475ad5.png)

这就是我创建文件名属性的方式：

```
/** TMP: Bug solving filename */
@property (copy) NSString *fileName;

-(id) initWithTexture:(CCTexture2D*)texture rectInPixels:(CGRect)rect rotated:(BOOL)rotated offset:(CGPoint)offset originalSize:(CGSize)originalSize
{
    if( (self=[super init]) )
    {
        self.fileName = [NSString stringWithFormat:@"GLUINT texture name: %i", texture.name];
        self.texture = texture;
        rectInPixels_ = rect;
        rect_ = CC_RECT_PIXELS_TO_POINTS( rect );
        offsetInPixels_ = offset;
        offset_ = CC_POINT_PIXELS_TO_POINTS( offsetInPixels_ );
        originalSizeInPixels_ = originalSize;
        originalSize_ = CC_SIZE_PIXELS_TO_POINTS( originalSizeInPixels_ );
        rotated_ = rotated;
    }
    return self;
}

-(id) initWithTextureFilename:(NSString *)filename rectInPixels:(CGRect)rect rotated:(BOOL)rotated offset:(CGPoint)offset originalSize:(CGSize)originalSize
{
    if( (self=[super init]) )
    {
        self.fileName = fileName; //TMP
        texture_ = nil;
        textureFilename_ = [filename copy];
        rectInPixels_ = rect;
        rect_ = CC_RECT_PIXELS_TO_POINTS( rect );
        offsetInPixels_ = offset;
        offset_ = CC_POINT_PIXELS_TO_POINTS( offsetInPixels_ );
        originalSizeInPixels_ = originalSize;
        originalSize_ = CC_SIZE_PIXELS_TO_POINTS( originalSizeInPixels_ );
        rotated_ = rotated;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:13:45.230

在这种情况下，日志记录是您的朋友。每次创建 CCAnimate 动作（或 CCAnimation）时，都应该记录如下内容：

```
// during 'create sprite frames from sprite frame names' loop
NSLog(@"adding sprite frame name for CCAnimate: %@", spriteFrameName);

// after CCAnimate was created
NSLog(@"creating CCAnimate %@ with sprite frames: %@, animate, arrayOfSpriteFrames); 
```

您可能想要添加更多细节，例如向 CCAnimate 添加了哪些精灵帧名称。如果您缓存 CCAnimation 并稍后重用它们（重用时记录每个 CCAnimation），您可能还必须添加额外的日志记录。

现在，当您收到该错误时，您应该选择`[CCSprite setDisplayFrame:]`调用堆栈中的方法。然后调试器将显示它想要设置的 CCSpriteFrame 的值。查找指针值，它会读取类似`0x254fb22e`.

在您的日志中搜索该值，这将带您回到“正在创建 CCAnimate..”日志之一。从上面的日志行中，您可以看到它包含的精灵帧名称。由于您还记录了“arrayOfSpriteFrames”，您可以获得它们的指针值，将其与导致断言的 CCSpriteFrame 的指针值进行比较。

当您有匹配项时，它是精灵帧数组中的第四项，只需查找添加到 CCAnimate 中的第四个精灵帧名称的名称。

根据调试器中可用的信息（以及您对调试的精通程度），可能有更快的方法来执行此操作，但这是一种方法，肯定会在相对较短的时间内让您找到有问题的精灵帧名称。

请注意，指针值不是唯一的 - 可能使用相同的指针值创建了不同的 CCAnimate。特别是如果 CCAnimate 播放和停止的频率很高，则可能会发生另一个 CCAnimate 分配在与前一个完全相同的内存位置的情况。因此，如果结果似乎不匹配，请小心。快速找出答案的方法是在不同的设备或模拟器与设备上进行测试，因为指针值和分配策略会有所不同。

您不需要记录哪个精灵帧名称属于哪个纹理图集。只需打开每个图集的 plist 并搜索精灵帧名称。plist 是一个 XML 文件。

**提示：**此问题的常见原因可能是在两个不同的纹理图集中具有相同的精灵帧名称 - 当您请求具有重复名称的精灵帧时，cocos2d 可能会使用任一纹理。

**另一个提示：**如果日志记录看起来令人生畏，我只需执行以下操作：

*   CCSpriteFrame 类的开源代码
*   添加带有“复制”属性的 NSString* 属性“文件名”
*   每次创建 CCSpriteFrame 对象时，将文件名分配给 CCSpriteFrame

现在，每当您在调试器中看到 CCSpriteFrame 时，它​​都会在调试器视图中向您显示关联的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:19:11.600

好的，看起来你以前去过那里...评论第一个 NSAssert，取消注释 if 块。然后在新的未注释的 NSAssert 上放置一个断点。执行将在异常之前暂停，您应该检查调用堆栈中每个类实例的 iVar（至少我可以使用 AppCode，希望 xCode 允许这样做）。也许你会得到足够的提示来弄清楚哪个纹理/动画/批处理节点给你带来了困难。

还有……仅供参考。每当我使用 cocos2d（任何版本）开始一个项目时，我都会对其应用一些“标准”修复，以便我的生活更容易调试。一个标准的“补丁”是为 CCNode 添加一个名称，我将其设置为一些有意义的值：总是。我也重写了描述方法以返回我的名字。分配有意义的名称对我有很多帮助，尤其是在向下（或向上）遍历节点层次结构以找出错误时。我还对许多 NSAsserts 进行了核对，并尽可能（尤其是在 ctors 中）返回 nil 并记录错误消息。根据 Stefen 的建议，如果 cocos2d ctor 返回 nil，我会吐出一条错误日志消息。然后我可以打破该日志语句并深入研究问题。

# ios - ios web view - 点击后，如何在网络浏览器中打开页面而不是嵌入到应用程序中

> ID：14979457
> 
> 赞同：1
> 
> 时间：2013-02-20T12:05:37.533
> 
> 标签：ios, uiwebview

我有一个 UIWebView 屏幕，其中有一个链接，我想转到另一个网页。

现在我有这个：

```
if ([request.URL.scheme isEqualToString:@"something"])
{
    NSURL *url = [NSURL URLWithString:@"stackoverflow.com];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:request];
} 
```

但它只是在应用程序本身中打开链接。但是如何让它加载网络浏览器并在网络浏览器中打开网址？

同样，如果我想链接到应用商店中的其他应用，那么正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:08:48.457

首先你必须在你的控制器的头文件中实现 UIWebViewDelegate，然后实现 shouldStartLoadWithRequest 来捕获 NSURLrequest 并在系统浏览器中启动它：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *url = request.URL.absoluteString;
    NSLog(@"%@",url);

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
    return NO;
} 
```

编辑（为您的代码）：

```
if ([request.URL.scheme isEqualToString:@"something"])
{
    NSURL *url = [NSURL URLWithString:@"stackoverflow.com];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]];
} 
```

# css - @Html.TextAreaFor 如何只显示 2 行并禁用滚动条

> ID：14979463
> 
> 赞同：0
> 
> 时间：2013-02-20T12:05:52.820
> 
> 标签：css, asp.net-mvc, textarea

有谁知道如何设置 TextAreaFor 的样式以仅显示 2 行文本而不是显示默认的 4 或 5，即使我定义为无论哪种方式都只显示 2？如果有人告诉我如何隐藏滚动条，我也将不胜感激。

```
@Html.TextAreaFor(model => model.AdkOgAvstandCom,new { cols = 10, rows = 2 }) 
```

如果您想增加行数，此代码可以正常工作，但是如果您想缩小行数，它只会忽略新值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:12:12.050

试试这个：

```
@Html.TextAreaFor(model => model.AdkOgAvstandCom, new { style = "height: 2em; overflow: hidden;" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:04:20.173

@BG100 正在做某事。假设您的原始代码生成了`<textarea>`一个将 rows 属性设置为“2”的 html，那么您只需要禁用滚动条即可；

**css**

```
textarea {
    overflow: hidden;
} 
```

演示在[http://jsfiddle.net/rpnmm/](http://jsfiddle.net/rpnmm/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-17T06:51:07.317

如上面的答案所述，滚动条可以被删除，`overflow:hidden`但如果你想限制用户只停留在你想要的行数内，那么你可以试试这个[DEMO](https://jsfiddle.net/tusharshuklaa/qL7ec058/)。

# linux - 如何在 Linux 上禁止用户更改操作系统窗口焦点/键入键几秒钟

> ID：14979465
> 
> 赞同：2
> 
> 时间：2013-02-20T12:05:53.863
> 
> 标签：linux, ubuntu, focus, x11, xdotool

我为网站编写自动化测试。其中一项测试需要按`Ctrl`+`S`并键入一些字母来保存包含 CSS/JS 的网页。测试应该要求 Firefox 在这几秒钟内具有窗口焦点，以便能够键入文件名并单击“保存”（当前 XDoTool 用于按键和单击鼠标）。

有时我在我的电脑上运行测试。我不想在保存页面时偶尔键入某些内容或更改窗口焦点，因此我想在这些鼠标单击/按键运行时禁止更改焦点几秒钟。

在 Webdriver 级别（我用来控制浏览器的工具）不可能做到这一点，所以我认为我应该在操作系统级别做到这一点。我可以在一段时间内禁止用户更改窗口焦点或输入任何内容吗？它可能看起来像：

```
prohibit user from typing keys/change window focus
save page
allow user to type/change window focus 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:33:44.003

我猜想达到预期效果的另一种方法是在嵌套的 X 服务器 (xf86-video-nested/Xephyr/Xnest) 上运行 Firefox 和您的自动化测试。

```
$ Xnest :1
$ export DISPLAY=:1.0
$ firefox http://something/to/test &
$ your-test-script 
```

由于嵌套的 X 服务器对焦点窗口有自己的想法，因此将焦点移到桌面上应该不会影响它。

（如果您实际上不需要查看测试进度，可以使用虚拟 X 服务器 (xf86-video-dummy/Xvfb/Xfake) 代替）

# c# - 将所有请求重定向到另一个 url

> ID：14979467
> 
> 赞同：0
> 
> 时间：2013-02-20T12:06:00.687
> 
> 标签：c#, asp.net, .net, request, webrequest

我的 iPhone 上有 sip 应用程序。它使用 sip.server.com url 发送请求并获得响应。

如何将我的 domen 中的所有请求（**不仅是 http**）重定向到 sip.server.com，然后 sip.server.com 的所有响应都重定向到 iPhone 上的应用程序。

所以我想在 iPhone 应用程序中编写自己的 domen 而不是 sip.server.com。

用asp.net可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:08:48.243

您需要为指向 sip.server.com 的域编写 cname 记录，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:08:49.600

您可以使用[重写](http://weblogs.asp.net/owscott/archive/2009/11/30/iis-url-rewrite-redirect-multiple-domain-names-to-one.aspx)

```
<rewrite>
    <rules>
        <rule name="Redirects to www.my-domain.com" patternSyntax="ECMAScript" stopProcessing="true">
            <match url=".*" />
            <conditions logicalGrouping="MatchAny">
                <add input="{HTTP_HOST}" pattern="^www.mydomain.com$" negate="true" />
            </conditions>
            <action type="Redirect" url="http://www.my-domain.com/{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:09:37.057

您可以使用[IIS 重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)将所有请求从您的域重定向到所需的 url。

**[示例]** [为 URL 重写模块创建重写规则](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

对于非 HTTP 请求，您可以使用[DNS Simple](https://dnsimple.com/)进行所有需要的重定向

# node.js - 如何在node.js的另一个回调函数中调用回调函数

> ID：14979469
> 
> 赞同：1
> 
> 时间：2013-02-20T12:06:02.597
> 
> 标签：node.js

如何在node.js的回调函数中调用回调函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:48:42.283

node js 中的回调函数与 javascript 中的回调函数没有什么不同。这是您可以调用它的一种方式。

```
 function someFunction(callback){

     callback(params);
 } 
```

回调函数可以定义为任何普通函数。例如

```
function random(number){ 
        return Math.random()}; 
```

函数 someFunction 现在可以调用为

```
 someFunction(random); 
```

就是这样。这里要理解的重要一点是node js仍然是javascript。所以在javascript中工作的所有技巧都将在node js中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:10:20.690

## 回调只是 JS 中的参数，就像其他的一样

只需将其传递给其他函数

还要注意 JS 是词法作用域

所以确保你的回调参数在作用域或外部作用域——>[什么是词法作用域？](https://stackoverflow.com/q/1047454/1191953)

# ios - 在 Xcode iOS 中获取相机的像素颜色

> ID：14979472
> 
> 赞同：1
> 
> 时间：2013-02-20T12:06:03.977
> 
> 标签：ios, xcode, avfoundation, avcapturesession, avcapturedevice

我正在尝试开发一个应用程序来帮助患有视力疾病的人，其中一个功能是识别用户指向的对象的颜色。

我读过这篇关于如何从 UIImage 中获取像素颜色的文章

[获取 UIImage 的像素颜色](https://stackoverflow.com/questions/3284185/get-pixel-color-of-uiimage)

有人知道我如何从相机中获得这种像素颜色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:41:35.850

Marcelo，有很多设置可以从相机中获取像素颜色。您需要在以下位置快速了解 AVFoundation：

[http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)

完成后，您应该提取示例代码 Rosy Writer：http: [//developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html)

此代码旨在获取实时相机图像并更改其中一种像素颜色。

我建议您花时间在这 2 个问题上，然后在开始构建应用程序时提出更具体的问题。

希望这可以帮助。

# sql-server - 如何在 SQL Server 中使用 IF 语句来显示或隐藏某些特定列

> ID：14979475
> 
> 赞同：1
> 
> 时间：2013-02-20T12:06:08.250
> 
> 标签：sql-server, if-statement

假设我有一张像这样的桌子：

（*0表示现金，任何其他值表示`check serial number`*）

```
ID    NAME     PaymentMethod       Amount          Bank
------------------------------------------------------------
1     Alex          0               20             ''
2     Sara       123456789         5000      Bank of America
3     Mina          0               15             ''
4     Scott      987456321        10000         Citibank 
```

如何使用`IF`语句，以便如果该`PaymentMethod`列包含`0`我隐藏该列，而是显示一个值为 of 的列`Incash`并隐藏银行列。

当`PaymentMethod`还有其他内容时，我只需将列标题重命名为`CheckSerial`.

为了更清楚，我希望表格看起来像这样；对于那些已经付款的人`InCash`，它显示为：

```
ID    NAME       PaymentMethod       Amount  
-------------------------------------------
1     Alex          InCash            20  
3     Mina          InCash            15 
```

对于那些通过支票支付的人，它显示为：

```
ID    NAME   PaymentMethod  Serial Number     Amount          Bank
-------------------------------------------------------------------
2     Sara      Check        123456789        5000      Bank of America
4     Scott     Check        987456321        10000         Citibank 
```

我尝试了这样的事情，根据给定的 ID，只有一个 select 语句执行：

```
 ALTER FUNCTION dbo.Function1(@IDTag bigint)
    RETURNS TABLE
    AS 
    if PaymentMethod = 0
    BEGIN  
    RETURN SELECT         ID, Name , PaymentMethod = InCash , Amount 
           FROM            tblTest
           WHERE        (ID = @IDTag)
           END
    ELSE 
           BEGIN 
           RETURN   SELECT        ID, Name , PaymentMethod ='By Check', PaymentMethod As [Serial number], Amount, Bank 
           FROM            tblTest
           WHERE        (ID = @IDTag)

           END 
```

这甚至正确吗？如果这不可行或不合逻辑，您对此有何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:08:58.120

您可以使用 CASE 语句显示“现金”或“支票”，如下所示。

```
select ID, NAME, 
    CASE PaymentMethod WHEN 0 THEN 'In cash' ELSE 'Check' END as PaymentMethod,
    Amount, Bank
from
    [mytable] 
```

但是您不能隐藏单个结果集中的列，您需要运行两个查询

```
select ID, NAME, 'In cash' PaymentMethod, Amount
from [mytable] where PaymentMethod = 0 
```

和

```
select ID, NAME, 'Check' PaymentMethod, SerialNumber, Amount, Bank
from [mytable] where PaymentMethod <> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:14:45.943

你的代码不是一个好计划。调用程序无法知道数据会是什么样子。最好做一些像 Phil 展示的事情，你总是返回同一张表，但有时有些列没有被使用。

此外，您显示的 SQL 有许多拼写错误——您在 InCash 周围没有引号，并且在第二个查询中您有两次相同的列名 (PaymentMethod)。

这可能是您想要的查询：

```
SELECT ID, Name, 
    CASE WHEN PaymentMethod = 0 THEN 'In cash' ELSE 'Check' END as PayBy,
    -- NB we could just select PaymentMethod as SerialNumber here, but this is clearer.
    CASE WHEN PaymentMethod != 0 THEN PaymentMethod ELSE 0  END as SerialNumber,
    Amount, Bank
FROM [mytable] 
```

# django - django 的注销（请求）也注销 django 管理员，反之亦然？

> ID：14979485
> 
> 赞同：0
> 
> 时间：2013-02-20T12:07:02.020
> 
> 标签：django, authentication

我正在使用 django 的身份验证模块在我的网站上登录和注销用户。但是当我将某个用户登录到我的网站并转到 django 管理页面时，它也会自动登录该用户。这是自然的吗？

```
from django.contrib.auth import authenticate, login, logout

def login_request(request):
    user = authenticate(username=username, password=password)
    login(request, user)

def logout_request(request):
    logout(request) 
```

编辑：我认为这与我的问题相同。 [登录-当超级用户登录django admin时，应用用户已注销](https://stackoverflow.com/questions/12138450/logged-in-the-app-user-is-logged-out-when-superuser-logs-in-django-admin)请确认答案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:17:05.543

是的，因为它们使用相同的身份验证后端。

# python - 为什么python允许覆盖内置常量？

> ID：14979488
> 
> 赞同：1
> 
> 时间：2013-02-20T12:07:21.800
> 
> 标签：python, constants, built-in

虽然`True`,`False`是[内置常量](http://docs.python.org/2/library/constants.html)，但 Python 中允许以下内容。

```
>>> True = False
>>> a = True
>>> b = False
>>> print a,b
False False 
```

为什么允许这样做的任何参考？

**编辑：**这只发生在 Python 2.x 中（正如所有指出的那样）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T12:13:02.833

我认为[“我们在这里都是成年人”](http://mail.python.org/pipermail/tutor/2003-October/025932.html)的蟒蛇意识形态也适用于此。Python 没有私有类成员，因为没有真正好的理由来阻止用户弄乱某些东西……如果他们到处乱搞他们不理解的东西，那么当代码中断时，他们将得到应得的东西. 重新分配内置函数的能力也是如此……

```
list = tuple 
```

请注意，您询问的情况在 python 3.x 中被明确禁止，但您仍然可以分配给 builtins ...

```
>>> True = False
  File "<stdin>", line 1
SyntaxError: assignment to keyword
>>> list = tuple 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T12:19:58.533

请记住，这只发生在 Python 3 之前的 Python 版本中。这是 Python 哲学的一部分，即一切都应该是动态的。

事实上在 Python 2`True`中不是关键字。它是**绑定**到`bool` **对象**的引用。您可以在您的 python 2.x vm 中尝试它：

```
>>> type(True)
<type 'bool'> 
```

在 python 3 中，它被更改为关键字，并且尝试重新绑定引用会导致异常：

```
>>> True = []
  File "<stdin>", line 1
SyntaxError: assignment to keyword 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:16:35.850

传统上，Python 在设计时使用了语法所需的尽可能少的关键字；在 py3K 之前，True 和 False 不被认为是必要的关键字。除非 Guido 在关闭之前遇到这个问题，否则您可能不会得到很好的答案。（但[这个线程](http://mail.python.org/pipermail/python-dev/2004-July/046294.html)说明了为什么它没有更早地改变）

# c# - 使用 Regex.Replace 替换字符串

> ID：14979495
> 
> 赞同：0
> 
> 时间：2013-02-20T12:07:43.517
> 
> 标签：c#

我有一个字符串

```
string findText = "Paid part-time job (under 8 hours per week)"; 
```

我想用其他字符串（`replaceText = "Paid for job"`）替换这个字符串，`Regex.Replace()`如下所示：

```
Regex r = new Regex(findText, RegexOptions.IgnoreCase);
findText = r.Replace(findText, replaceText); 
```

但问题是这个字符串没有被替换，可能是由于文本中存在大括号。

谁能建议如何使用 替换整个字符串`Regex.Replace()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:10:20.293

*这里根本*不需要使用正则表达式。
只需使用[`string.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)：

```
var result = original.Replace(findText, replaceText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:10:28.490

对于您的示例，使用字符串替换更容易：

```
string result = yourString.Replace(findText, replaceText); 
```

但是如果你仍然想使用正则表达式，你应该转义大括号，例如这样：

```
string findText = "Paid part-time job [(]under 8 hours per week[)]"; 
```

并将其称为**模式**而不是 findText :)

# scala - 使用 SBT（Scala 构建工具）将项目打包到 WAR

> ID：14979500
> 
> 赞同：2
> 
> 时间：2013-02-20T12:08:10.490
> 
> 标签：scala, maven, war, sbt

我有一个 Maven 多项目，我想将其转换为 SBT：它看起来像这样：

父项目：
+ module_1 --> jar
+ module_2 --> jar
+ module_3.dependsOn(module_1,module_2) --> jar
+ **module_4** .dependsOn(module_3) ***--> war***

**module_4**配置为在 pom.xml 中构建为**WAR**，`<packaging>war</packaging>` 因此可以稍后将其部署到 Web 应用程序服务器。

我已经在单个（project/build.scala）scala 文件中配置了这个项目。我不想将**module_4**部署到 Web 服务器（但）我只需要它作为**WAR**文件的工件。也许我不理解[文档](http://www.scala-sbt.org/release/docs/Detailed-Topics/Artifacts.html)（很可能），但是当我尝试在 scala 配置中编写它时，SBT 无法编译：

```
lazy val snowRest = Project(id = "sc-ws",
           base = file("sc-ws"),
           settings = buildSettings ++ Seq (libraryDependencies ++= snowCannonRest) ++ Seq(artifact in (Compile, packageWar) ~= { (art: Artifact) => art.copy(`type` = "war", extension = "war")})
           ) dependsOn(snowCannonBase) 
```

并失败并显示此消息：

```
[error] Error occurred in an application involving default arguments.
[error]                               artifact in (Compile, packageWar) ~= { (art: Artifact) => art.copy(`type` = "war", extension = "war")})
[error]                                                     ^ 
```

有什么建议么 ？

# asp.net - 内容模板控件不触发

> ID：14979502
> 
> 赞同：0
> 
> 时间：2013-02-20T12:08:23.407
> 
> 标签：asp.net, controls

我怎样才能使内容模板中的控制事件起作用？我无法直接访问控件，这很烦人，但现在这些事件甚至不会因为某种原因而触发？我开始讨厌网络编程...

正面：

```
<act:TabContainer ID="tcTabellen" runat="server" TabIndex="0" AutoPostBack="true">
        <act:TabPanel ID="tpBeitragssaetze" HeaderText="Beitragss&auml;tze" runat="server">
            <ContentTemplate>
                <p>
                    <asp:Label ID="lbKasse" runat="server">Kasse</asp:Label> 
                    <asp:DropDownList runat="server" ID="ddlKasse" AutoPostBack="true"></asp:DropDownList>
                    <asp:Label ID="lbJahr" runat="server">Jahr</asp:Label>
                    <asp:DropDownList runat="server" ID="ddlJahr" AutoPostBack="true"></asp:DropDownList>
                </p>
            </ContentTemplate>
        </act:TabPanel>
</act:TabContainer> 
```

在后面：

```
WithEvents ddlKasse As DropDownList
WithEvents ddlJahr As DropDownList

Private Sub ddlKasse_DataBind()
        ddlKasse = CType(Me.tcTabellen.FindControl("tpBeitragssaetze").FindControl("ddlKasse"), DropDownList)
        ddlKasse.AutoPostBack = True

        ddlKasse.Items.Clear()

        ddlKasse.Items.Insert(0, New ListItem With {.Text = "Bitte auswählen ...", .Value = "0"})
        ddlKasse.Items.Insert(1, New ListItem With {.Text = "01 - BKK Höchst (W)", .Value = "01"})
        ddlKasse.Items.Insert(2, New ListItem With {.Text = "02 - BKK Höchst (O)", .Value = "02"})
        ddlKasse.Items.Insert(3, New ListItem With {.Text = "10 - BKK Gesundheit (Alt) (W)", .Value = "10"})
        ddlKasse.Items.Insert(4, New ListItem With {.Text = "13 - Sancura BKK (W)", .Value = "13"})
        ddlKasse.Items.Insert(5, New ListItem With {.Text = "21 - DKV (W)", .Value = "21"})
        ddlKasse.Items.Insert(6, New ListItem With {.Text = "22 - DKV (O)", .Value = "22"})
        ddlKasse.Items.Insert(7, New ListItem With {.Text = "32 - BKK Vita-Dyckerhoff (W)", .Value = "32"})
        ddlKasse.Items.Insert(8, New ListItem With {.Text = "34 - BKK Gesundheit (W)", .Value = "34"})
        ddlKasse.Items.Insert(9, New ListItem With {.Text = "35 - BKK Gesundheit (O)", .Value = "35"})
        ddlKasse.Items.Insert(10, New ListItem With {.Text = "56 - STJB (W)", .Value = "56"})
        ddlKasse.Items.Insert(11, New ListItem With {.Text = "69 - BKK Bodensee + Südwest (W)", .Value = "69"})
        ddlKasse.Items.Insert(12, New ListItem With {.Text = "71 - STJB (O)", .Value = "71"})
        ddlKasse.Items.Insert(13, New ListItem With {.Text = "82 - BKK Vita Dyckerhoff (O)", .Value = "82"})
        ddlKasse.Items.Insert(14, New ListItem With {.Text = "83 - BKK Gesundheit (Alt) (O)", .Value = "83"})
        ddlKasse.Items.Insert(15, New ListItem With {.Text = "84 - Sankura BKK (O)", .Value = "84"})
        ddlKasse.Items.Insert(16, New ListItem With {.Text = "93 - BKK FPB Holding (W)", .Value = "93"})
    End Sub

Private Sub ddlKasse_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlKasse.SelectedIndexChanged
        ddlJahr_DataBind()
End Sub 
```

如果另一个 ddl 的 selectedindex 发生更改，我只想填充一个 ddl，但正如我之前提到的 .. 事件不会触发。有没有人知道它是什么样的以及我该如何解决它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:53:22.763

您的 ddl 需要其标签上的 onselectedindexchanged ：

```
<asp:DropDownList runat="server" ID="ddlKasse" onselectedindexchanged="ddlKasse_SelectedIndexChanged" AutoPostBack="true"></asp:DropDownList> 
```

# selenium-webdriver - Chrome 驱动程序代码编译时出错

> ID：14979504
> 
> 赞同：0
> 
> 时间：2013-02-20T12:08:28.803
> 
> 标签：selenium-webdriver

我在 MyEclipse 中为 Chrome 驱动程序使用了这段代码。

```
System.setProperty("webdriver.chrome.driver","D:\selenium\chromedriver_win_26.0.1383.0.zip\chromedriver.exe"); 
```

但发现编译时错误：

`'Invalid escape sequence (valid ones are \b \t \n \f \r \" \' \\ )`

但是我给出的路径是正确的。

我该如何排序这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:11:17.250

尝试这个：

```
D:\\selenium\\chromedriver_win_26.0.1383.0.zip\\chromedriver.exe 
```

代替

```
D:\selenium\chromedriver_win_26.0.1383.0.zip\chromedriver.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:23:15.953

您可以设置 PATH 环境变量指向 Chrome 驱动程序的目录，而不是设置此属性，这样您在将代码移动到其他机器后就不需要更改代码

# android - 按下后退键时从最近的应用程序中删除应用程序android

> ID：14979509
> 
> 赞同：1
> 
> 时间：2013-02-20T12:08:35.827
> 
> 标签：android, android-activity

当我按下返回键时，我想从最近的应用程序中删除我的应用程序，但如果我按下 Home 键，它仍保留在最近的应用程序中。我试过设置

```
<activity
       android:name=".MyActivity"
       android:launchMode="singleInstance"
       android:excludeFromRecents="true" >
</activity> 
```

但是当我按 HOME 键时它也会删除。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:13:48.997

**在活动定义清单文件中添加 android:excludeFromRecents="true"**

同问： [如何从最近申请列表中删除申请？](https://stackoverflow.com/questions/3762763/how-to-remove-application-from-recent-application-list)

或者

```
protected void onPause() {
  finish();
} 
```

或者

```
android:noHistory= "true"; 
```

# mysql - 在 sql 中选择字符串的一部分并使用它来更新列

> ID：14979516
> 
> 赞同：0
> 
> 时间：2013-02-20T12:08:57.500
> 
> 标签：mysql

我有三张桌子

```
products->(id, number, public, custom, etc)
references->(id,ref,product_id,price_id)
product_descriptions->(id,product_id,description,summary) 
```

我需要使用表 product_descriptions 中的部分字符串描述从表引用中填充列 ref 的值，这是一个 int ，这可能吗？

如何从表的一列中选择字符串的特定部分并转换为 int 并存储在不同表的列中？

我正在使用 MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:32:11.693

对于 Transact-SQL（SQL Server、SYBASE ASE、ASA、IQ），您可以试试这个。

假设 product_description 的前 4 个字符（从位置 0 开始，长度为 4 个字符）是您希望存储在列 references.ref 中的 INTEGER 值。在 T-SQL 中尝试这样的事情

```
UPDATE references SET ref = CAST(SUBSTRING(t2.description,0,4) AS INTEGER)
FROM references AS t1 
INNER JOIN product_descriptions AS t2 
ON t1.product_id = t2.product_id 
```

# eclipse - Log4j servlet 文件位置

> ID：14979518
> 
> 赞同：0
> 
> 时间：2013-02-20T12:08:59.433
> 
> 标签：eclipse, servlets, logging, log4j

我正在使用 Eclispe 在 localhost 上运行一个 servlet，并记录到文件。我似乎找不到日志文件。我搜索了`.metadata`, `Servers`, tomcat 和 servlet 目录，那里什么都没有。

我的内容`log4j.properties`如下：

```
log4j.rootLogger=warn,stdout
log4j.logger.package=debug,stdout
log4j.logger.package=error,servletAppender

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.servletAppender=org.apache.log4j.RollingFileAppender
log4j.appender.servletAppender.File=log${file.separator}servlet.log
log4j.appender.servletAppender.MaxFileSize=5120KB
log4j.appender.servletAppender.MaxBackupIndex=5
log4j.appender.servletAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.servletAppender.layout.ConversionPattern=%d{ISO8601} %5p %c{3}:%L - %m%n 
```

日志行是：

```
logger.fatal("fatal"); 
```

我还可以看到日志记录到控制台，这应该意味着属性文件已加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T07:54:05.793

您可能想尝试从 eclipse.exe 所在的目录中找到您的 servlet.log。

我也在做这种形式的日志记录，最终在目录中找到了文件日志。

# sql - 比较 SQL 中的 int 和 varchar 列

> ID：14979525
> 
> 赞同：2
> 
> 时间：2013-02-20T12:09:20.963
> 
> 标签：sql, sql-server, database, compare

我的表中有两列，一列包含数字，另一列应该有一些从这些数字生成的字符串，例如：

```
ID     Serial
1      SN00001
2      SN00002
127    SN00127 
```

但是我不能确定每个序列号是否正确。所以我想搜索任何可能的错误，例如：

```
SELECT * FROM MyTable WHERE ID <> Serial 
```

当然我不能只写`ID <> Serial`，我想我应该使用一些子字符串选择，类型转换等等，但这对我来说都是新的，我可以使用一些帮助。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T12:11:10.103

尝试：

```
SELECT * from MyTable WHERE ID <> RIGHT(Serial, LEN(ID)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:10:47.103

```
SELECT * 
from   MyTable 
WHERE  ID <> CAST(REPLACE(Serial, 'SN','') AS INT) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/831a7/2)

# iphone - 我可以用苹果可达性课程制作“付费应用”吗？

> ID：14979527
> 
> 赞同：1
> 
> 时间：2013-02-20T12:09:25.013
> 
> 标签：iphone, ios

我在我的 iPhone 应用程序中使用`Reachability.h`并`Reachability.m`归档以检查网络状态。但 Apple 没有为该软件提供任何适当的许可。由于我打算将我的应用程序制作为付费版本，这样做会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:20:41.187

实际上 Reachability.h 和 Reachability.m 包含免责声明，其中指出

> 考虑到您同意遵守以下条款，并在遵守这些条款的前提下，Apple 授予您个人的、非排他性的许可，在 Apple 的原始 Apple 软件（“Apple 软件”）的版权下，您可以使用、复制、以源代码和/或二进制形式修改和重新分发 Apple 软件，无论是否经过修改；前提是如果您在不修改的情况下完整地重新分发 Apple 软件，您必须在 Apple 软件的所有此类重新分发中保留本通知以及以下文本和免责声明。

所以不，不会有任何问题，您可以使用该课程制作付费应用程序。但是，如果您不修改课程，则不得删除免责声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:14:39.413

不会有问题。您可以为您的应用付费。Apple 不会拒绝这一点。

# sql - 跨多个表和列的 Oracle 文本搜索

> ID：14979529
> 
> 赞同：1
> 
> 时间：2013-02-20T12:09:28.170
> 
> 标签：sql, oracle, plsql, oracle10g, oracle11g

在我的 Java Web 应用程序中，想要放置“全局搜索”文本框，该文本框将使用“Oracle Text”搜索多个表（不同的列）？

例如

表学生 {name}

表老师 {name}

表部门{名称，描述}

表主题{名称，标题}

现在我想做的是，如果用户输入“Chem”，则应针对 Student：name、Teacher：name、Department：name、Department：description、Subject：name、Subject：title 列搜索这个词，然后它会排序根据其 Oracle Text Score 的结果？

谁能建议实现这一目标的最佳方法是什么？不确定如何使用“包含”oracle 文本函数通过单个查询在多个表中搜索所有这些列？

另外，请假设表之间没有关系。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:00:44.770

从您的表中创建一个视图，然后从中选择：

```
 SELECT * FROM your_view WHERE UPPER(name) Like Upper('Chem%'); -- or '%Chem%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T11:47:01.523

用户数据存储允许您将多个表粘合到一个虚拟文档中，Oracle Text 使用该文档进行索引和搜索。这将允许您有一个包含搜索多个表的子句。当您创建用户数据存储时，您定义了您希望索引的每个表中的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:17:16.393

你可以这样做：

```
with search_fields as (
    select 'student' as table,
           'name' as field,
           name as text
       from student
    union all 
    select 'teacher' as table,
           'name'    as field,
           name as text
       from student 
    union all
    ...
)
select * from search_fields where text contains ... 
```

如果您需要以某种方式链接回原始表，则可能需要添加此内容。

# java - 为什么 Maven 命令“mvn sonar:sonar”在我的“pom.xml”中没有任何插件配置就可以工作？

> ID：14979530
> 
> 赞同：65
> 
> 时间：2013-02-20T12:09:29.583
> 
> 标签：java, maven, sonarqube, maven-plugin

我的仓库中有一个 Maven Web 项目。

我是一个 Maven 菜鸟，但我仍然理解这样一个事实，即我们需要配置一些插件，然后我们才能运行插件特定的命令。

**事实：**

我有一个声纳服务器在我的本地机器上运行，端口为 9000。

我没有在我的 POM.xml 中添加任何声纳特定插件

**参考：**

[http://www.sonarsource.org/we-had-a-dream-mvn-sonarsonar/](http://www.sonarsource.org/we-had-a-dream-mvn-sonarsonar/)

**观察：**

但是当我从命令行运行`mvn sonar:sonar`我的项目时，它仍然可以正常工作。

事实上，**我还没有在我的 POM.xml 中配置声纳插件，即使如此，Maven 正在从哪里获取并理解“声纳：声纳”目标/命令？**

**问题/好奇心：**

我不想要声纳本身的工作知识。我想知道为什么`mvn sonar:sonar`不用在我的 pom.xml 中配置声纳插件就可以工作

为什么以及如何？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-05T21:52:50.760

原因是 Sonar Maven 插件托管在[Codehaus Mojo 项目](http://mojo.codehaus.org/)中，并受益于 groupId“org.codehaus.mojo”。这允许使用快捷方式“sonar:sonar”而不是“org.codehaus.mojo:sonar-maven-plugin::sonar”（参见[Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)的“配置 Maven 以搜索插件”部分）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T12:16:37.690

Sonar 有自己的一组插件（例如 maven-checkstyle-plugin），它在被调用时运行。这些插件会根据您配置的 Sonar 服务器中的项目设置自动配置。

这背后的原因是在您的声纳实例中具有受控配置。

它自动为您工作的原因是您正在使用声纳服务器安装的默认值 (localhost:9000)。

这种“零配置”方法在此处进一步详细说明：[我们有一个梦想：mvn sonar:sonar](http://www.sonarsource.org/we-had-a-dream-mvn-sonarsonar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T11:42:02.453

我可能是错的，但我的假设是此功能通常来自您的`settings.xml`而不是我们`pom.xml`的 Maven 文件。我假设该`<id>sonar</id>`部分指定运行时调用的配置文件的名称`mvn`。

这只是一个猜测，而不是此时的确定答案，因为其他答案似乎没有标记，我目前没有时间自己深入研究真正的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T11:46:28.207

我可能是错的，但我的假设是此功能通常来自您的`settings.xml`而不是我们`pom.xml`的 Maven 文件。我假设该`<id>sonar</id>`部分指定运行时调用的配置文件的名称`mvn`。

这只是一个猜测，而不是此时的确定答案，因为其他答案似乎没有标记，我目前没有时间自己深入研究真正的答案。

参考：

*   [https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-maven/](https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-maven/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-17T11:20:19.023

根据此页面 - [https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-maven/](https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-maven/)

Maven 项目扫描器默认使用 SonarScanner。所以它无需任何设置即可工作。

# jquery - 如何在jquery中选择一个孩子？

> ID：14979531
> 
> 赞同：1
> 
> 时间：2013-02-20T12:09:32.227
> 
> 标签：jquery

这是样本结构！

```
<div id ="div1">
    <div class="div1-child">
        <div class="div1-sub-child">
        </div>
    </div>
 </div> 
```

当我悬停 div1 时，谁能帮助我如何在 div1-sub-child 上应用 jquery 效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:12:40.940

你不需要 jquery 来做到这一点。只使用 css 就可以了。如下 -

```
#div1:hover .div1-sub-child {
   background-color:yellow
} 
```

使用 jQuery -

```
$('#div1').hover({function(){  //this is called whn mouse enters the div
    $(this).find('.div1-sub-child').css('background-color','red'); //your effect here
},function(){   //this is called whn mouse leaves the div
    $(this).find('.div1-sub-child').css('background-color','green'); //your effect here
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:16:11.357

尝试

```
$("#div1").hover(
function()
{
    $(this).find('div.div1-sub-child').filter(':not(:animated)').animate(
    {
        marginLeft:'9px'
    },'slow');
},
function()
{
    $(this).find('div.div1-sub-child').animate(
    {
        marginLeft:'0px'
    },'slow');
}); 
```

Hover 有两种`callbacks`，一种是你时会开火，另一种是当你`hover`开火时`hoverOut`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:27:35.420

当您使用 jquery 和 php 时，这很常见。并且有很多方法可以做到这一点，我将添加其中一种。希望这可以帮助您。

$('#div1 .div1-child').children().addClass('addclass');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:13:47.927

也许像

```
$(".div1-child").hover(
  function () {
    $(this).find('.div1-sub-child').css(*** your new css ***);
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:16:20.667

使用 jQuery

```
 $('#div1').hover({function(){  //this is called whn mouse enters the div
        $(this).find('.div1-sub-child').css('background-color','red'); //your effect here
    },function(){   //this is called whn mouse leaves the div
        $(this).find('.div1-sub-child').css('background-color','green'); //your effect here
  }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T12:26:59.220

要为 div 添加特殊样式，请尝试：

```
$("#div1").hover(
  function () {
    $(this).find('div.div1-sub-child').addClass("hover");
  },
  function () {
    $(this).find('div.div1-sub-child').removeClass("hover");
  }
); 
```

# ios - 应用商店应用拒绝在 iOS 6 中不支持方向

> ID：14979533
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:09:37.633
> 
> 标签：ios, app-store, appstore-approval

我开发了一个 iPhone 应用程序，它支持 OS 版本高达 5.1 的方向。但我的应用程序不支持 iOS 6 的方向。所以在 iOS 6 中，我的应用程序似乎有问题，Apple 会拒绝该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:13:28.710

从他们的指导方针：

> 出现错误的应用程序将被拒绝

如果您的应用程序似乎有问题，他们可能会拒绝它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:25:03.837

好吧，如果你的应用程序通过了“检查”，你不应该对此感到高兴。

如果您的应用程序已经等待审核，您至少应该将发布时间更改为“开发人员决定”，并且请不要发布它。

为 iOS 6 实现方向支持并不难。

可以在此处找到 Mike Foster 撰写的关于此主题的精彩博客：[iOS 6 Orientation Handling](http://fostah.com/ios/2012/09/27/ios6-orientation-handling.html)

修复错误并重新提交您的应用程序。

Buggy 应用程序使用起来很烦人——而且您肯定不会从您的应用程序将获得的所有疯狂评论中获利。而且会有很多——很多用户都在使用 iOS 6.x。

**编辑：**

根据您上面的评论：*“......这个应用程序早在 iOS 6 发布之前就已经开发了”*引发了一些问题：你问的是

**a)**很久以前开发但从未发布的应用程序

**b)**现有应用程序的新构建（更新）

**c)**在 App Store 上准备好几个月的旧版本？

* * *

**c)** *不用担心*：由于 iOS6.x 相关的错误，应用商店中已准备就绪的应用不太可能被禁止：但您仍应尽快修复它们。像昨天。

**b)**为什么现在有人会尝试发布与 iOS6.x 不兼容的构建（请参阅下面的“a”点）

**a)**如果这个应用程序是在一年前开发的并且尚未发布，那么您真的应该多花 2 天（1 天用于编码，1 天用于调试）以使其与 iOS6.x 兼容。

如果这听起来很苛刻，我很抱歉，但你的问题真的没有多大意义。如果有错误并且您知道：消灭它们....

# c# - 解码 UTF8 文本

> ID：14979534
> 
> 赞同：0
> 
> 时间：2013-02-20T12:09:39.287
> 
> 标签：c#, utf-8, decode

我有像“ `CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:=58=2D=54=65=73=74`”这样的字符串。**`(58=2D=54=65=73=74)`**我需要解码使用 c#的最后一部分 。此字符串来自存储在 amazon s3 中的联系人文件。我尝试使用以下代码，但它检索到相同的文本

```
buffer = Encoding.UTF8.GetBytes(encodedText);
                                buffer = Encoding.Convert(Encoding.UTF8, Encoding.GetEncoding("windows-1252"), buffer);
                                text = Deco.ASCII.GetString(buffer); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:11:05.327

> 我已将字符串编码为 UTF8

不，您不可能将字符串编码为 UTF8。在 .NET 中，所有字符串都是 Unicode (UTF16) 编码的。

您在代码示例中所做的是将字符串（不要忘记始终是 Unicode）转换为 UTF-8 编码的字节数组，然后将其转换为`Windows-1252`字节数组，最后您尝试将此字节数组转换为使用 ASCII 编码的字符串。

真的不清楚你在这里要做什么，但很有可能，如果你经历了从 UTF-8 到 Windows-1252 最后到 ASCII 的所有这些转换，你可能会丢失一些目标编码不支持的字符。

但是你要记住的最重要的事情是，编码只有在你来回转换字节数组时才有意义。字节数组被编码。

如果您正在尝试修复您得到的一些损坏的字符串（`encodedText`变量），那么您应该修复正在检索该字符串的代码。之后您无法使用某些编码修复损坏的字符串。

* * *

更新：

`=58=2D=54=65=73=74`假设这是 UTF-8 字节数组的十六进制表示，您似乎正在尝试解析为相应的字符串值。

您可以这样做：

```
string encodedText = "=58=2D=54=65=73=74";
encodedText = encodedText.Replace("=", string.Empty);
byte[] buffer = HexToByte(encodedText);
string text = Encoding.UTF8.GetString(buffer); 
```

`HexToByte`函数可能如下所示：

```
private static byte[] HexToByte(string hexString)
{
    byte[] returnBytes = new byte[hexString.Length / 2];
    for (int i = 0; i < returnBytes.Length; i++)
    {
        returnBytes[i] = Convert.ToByte(hexString.Substring(i * 2, 2), 16);
    }
    return returnBytes;
} 
```

# twitter-bootstrap - Yii 和自定义文件上传（使用 jasny 引导程序）

> ID：14979536
> 
> 赞同：0
> 
> 时间：2013-02-20T12:09:41.957
> 
> 标签：twitter-bootstrap, file-upload, yii, jasny-bootstrap

由于各种原因，我不能使用正常的方式来构建表单，所以我稍微改变了一些。对于正常的发布操作，这很好用，但是当我尝试上传文件时，一切都出错了。

我得到了这个表格，上传了 Jasny 文件。

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'plan_style_form_'.$data->id,
    'enableAjaxValidation'=>false,
    'htmlOptions' => array(
        'enctype' => 'multipart/form-data',
    ),

)); ?>

........
                        <div class="fileupload fileupload-exists" data-provides="fileupload" data-name="RssPlanStyle[tab_icon]">
                            <div class="fileupload-new thumbnail" style="width: 111px; height: 74px;"><img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image" /></div>
                            <div class="fileupload-preview fileupload-exists thumbnail" style="width: 111px; height: 74px;"><img src="../images/tab_images/<?php echo $data->RssPlanStyle->tab_icon ?>"></div>
                                <div class="plan_tab_custom_title plan_tab_example_title_<?php echo Chtml::encode($data->RssPlanStyle->id); ?>">
                                    <?php echo Chtml::encode($data->RssPlanStyle->titel_tab); ?>
                                </div><!-- .plan_tab_custom_title -->
                        <div>
                        <div class="span6">
                        <label>Tab icoon</label>
                        <span class="btn btn-file"><span class="fileupload-new">Selecteer Afbeelding</span><span class="fileupload-exists">Verander Afbeelding</span><input type="file" /></span>
                        <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Verwijder Afbeelding</a>
                        </div></div>
.......
                <?php echo CHtml::ajaxSubmitButton(
                    'Opslaan',
                    array('rssPlanStyle/updateStyle'),
                    array('update'=>'#result-style-'.$data['id']),
                    array('class'=>'btn btn-success', 'style'=>'float:right; margin-bottom:20px;')
                ); ?>
.........
<?php $this->endWidget(); ?> 
```

如前所述，所有发布数据都可以正常工作，但是当我进入这个文件输入时，我确实得到了`$_POST['RssPlanStyle']['tab_icon']`但它`$_FILES['RssPlanStyle']['tab_icon']`是空的。这是我的上传功能atm。

公共函数 actionUpdateStyle(){

```
// tab_icon
if(isset($_POST['RssPlanStyle']['tab_icon'])) {
// Als afbeelding is veranderd
    if ($_POST['RssPlanStyle']['tab_icon'] == '') {
    // Als afbeelding is verwijderd
        echo 'image verwijderd';
    } else {
    // Als er een nieuwe afbeelding is
        if(empty($_FILES['RssPlanStyle']['tab_icon'])){
            echo 'leeg';
        }

        echo 'new image';

    }
} else {
// Als afbeelding niet is veranderd
    echo "niks veranderd";
} 
```

}

所以我要进入部分`echo 'new image'`，但也`echo 'leeg'`显示了。我究竟做错了什么？

以及处理上传的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:50:58.570

```
 if (yii::app()->request->isPostRequest) {

            $model = new ModelForm;
            $model->file=CUploadedFile::getInstance($model,'RssPlanStyle');

            if ($model->file != NULL){
                echo 'new image';
            }else{
                echo 'no image';
            }
    } 
```

您可以使用 getInstances() 来处理多上传。请参阅[http://www.yiiframework.com/doc/api/1.1/CUploadedFile#getInstance-detail](http://www.yiiframework.com/doc/api/1.1/CUploadedFile#getInstance-detail)

# ruby-on-rails - 如何在路由中制作“资源”以在命名空间外使用控制器

> ID：14979541
> 
> 赞同：2
> 
> 时间：2013-02-20T12:09:58.117
> 
> 标签：ruby-on-rails, routes

我有多态的联系模型。我有一个在 :admin 命名空间之外的控制器，用于处理不同类型的 CRUD。如何使这个 :contacts 资源指向 :admin 命名空间之外的控制器？

```
namespace :admin do
  resources :schools do
    resources :campuses, :controller => 'schools/campuses' do
      resources :contacts # problem controller
    end
  end
end 
```

最好的问候， 乔治·塔帕利洛夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:43:41.000

尝试：

```
resources :campuses

namespace :admin do
  resources :schools do
    resources :campuses, :controller => 'schools/campuses' do
      resources :contacts
    end
  end
end 
```

# sql - 如何更改列的格式以允许报表服务中的 excel 函数

> ID：14979543
> 
> 赞同：2
> 
> 时间：2013-02-20T12:10:05.547
> 
> 标签：sql, excel, reporting-services

我在报告服务中创建了一个报告。当我以 excel 格式下载报告时，我无法对列执行 SUM 函数。我首先需要手动将列转换为数字。有什么办法让我做这在报告服务上，这样当我下载报告时，我只需对值求和而不更改列格式。

到目前为止，我已经尝试了以下方法：

. 单击单元格，打开属性窗口并将 Format 属性更新为 #,##0.00

请有人帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:07:59.820

我不太确定我是否正确理解了您的要求。

您可以对 SSRS 中的字段进行一长串转换。

假设你的领域是`Fields!Number1.Value`

您可以将其转换为数字：

```
CLng(Fields!Number1.Value ) 
```

[http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:17:54.587

您需要将字段转换为整数或任何其他数字格式。

从您的数据库返回的值是以字符串而不是整数形式返回的。

因此，当您将其导出到 excel 时，他将其呈现为“常规”字段，而不是数字格式。

您需要指定您希望字段为“数字”

按照这个例子：

我创建了一个基于具有以下字段的数据集的报告：

*   关键绩效指标
*   姓名
*   年级

现在指定该`Grade`字段需要是整数：

```
=CInt(Fields!KPI_Grade.Value) 
```

现在看到在excel中我对该字段做了一个求和函数：

![在此处输入图像描述](../Images/3bcb6790fa4e6d1886ecd2cd87a7f096.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:50:51.397

您是否尝试在 tablix 中设置单元格编号格式？

![在此处输入图像描述](../Images/17492f7dfbc2d047d4a42c1bb2d4c792.png)

# java - 在Java中将时间元素存储在结构中

> ID：14979544
> 
> 赞同：3
> 
> 时间：2013-02-20T12:10:06.777
> 
> 标签：java, date, time

我经常需要操纵时间。Calendar 类非常适合处理日期和时间，但我似乎找不到一种简单的方法来将小时、分钟和秒等元素存储到某种结构中。从字符串到实际整数似乎需要进行大量转换。我总是可以创建自己的类并将元素存储到字段中，但如果存在提供更多功能（添加时间等）但保持存储和访问简单的类会更好。我正在寻找这样的东西：

```
Time time = new Time();
time.parse("13:30:15");
t.Hour = 13;
t.Minute = 30;
t.Second = 15; 
```

是否存在任何 Java 类可以做这样简单的事情。这就是我现在的做法。多么可怕的代码量只是为了解析小时和分钟：

```
String time = "17:30";

TimeInfo timeInfo = new TimeInfo();
SimpleDateFormat df = new SimpleDateFormat("HH:mm");
Date d = df.parse(time);

Calendar calendar = Calendar.getInstance();
calendar.setTime(d);

timeInfo.Hours = calendar.get(Calendar.HOUR_OF_DAY);
timeInfo.Minutes = calendar.get(Calendar.MINUTE);
timeInfo.Seconds = calendar.get(Calendar.SECOND);

class TimeInfo
{
  public int Hours;
  public int Minutes;
  public int Seconds;
  public boolean Is24HourFormat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:18:22.617

[JodaTime](http://joda-time.sourceforge.net/)是帮助轻松操纵时间的外部库之一。您可以添加时间。还要找出时间之间的差异。

您可能还想检查jodatime lib 中的概念`interval`和概念之间的区别。`duration`[[所以帖子](https://stackoverflow.com/questions/2653567/joda-whats-the-difference-between-period-interval-and-duration)]

[有关更多信息，请参阅其 javadoc](http://joda-time.sourceforge.net/api-release/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:22:21.120

试试这个方法

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY,17);
cal.set(Calendar.MINUTE,30);
cal.set(Calendar.SECOND,0);
cal.set(Calendar.MILLISECOND,0);

Date d = cal.getTime();
SimpleDateFormat f =new SimpleDateFormat("hh:mm:ss aa");
System.out.println(f.format(d)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:14:24.923

我认为它`java.util.Calendar`可以为您提供所需的一切。看看[Calendar#set()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int,%20int%29)。

> public final void set(int year, int month, int date, int hourOfDay, int minute, int second)
> 
> 设置字段 YEAR、MONTH、DAY_OF_MONTH、HOUR、MINUTE 和 SECOND 的值。保留其他字段的先前值。如果不需要，请先调用 clear()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:45:40.473

我更喜欢使用 Commons Lang 的 DateUtils。这与 Calendar 和 DateFormat(SimpleDateFormat) 一起应该足以满足 Java 中的所有日期要求

# c# - 访问 DataSet 的 Rows 属性时出错

> ID：14979545
> 
> 赞同：0
> 
> 时间：2013-02-20T12:10:06.220
> 
> 标签：c#, datatable, dataset

我需要创建一个简单的登录页面并在 Rows 上收到错误...

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("server=AMR\\DEV1;UID=po;PWD=12W; database=POM;");
    con.Open();
    SqlCommand cmd = new SqlCommand("select * from budget where id='" + TextBox1.Text + "' and amount='" + TextBox2.Text + "'", con);
    DataSet ds = new DataSet();
    ds.Clear();
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(ds);

    if (ds.Rows.Count > 0) {
        Session["user"] = TextBox1.Text;
        Response.Redirect("Default2.aspx");
    } else {
        TextBox1.Text = "";
        TextBox2.Text = "";
        Label1.Text = "Invalid Login Details!";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:12:47.850

[DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)没有[Rows](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)属性。[数据表](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)可以。在您的代码中替换`ds.Rows`为。`ds.Tables[0].Rows`

还有一点：使用[参数化 SqlComamnd](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。您的代码易受 SQL 注入攻击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:29:57.550

你的代码有很多问题。我在需要的地方改了

```
protected void Button1_Click(object sender, EventArgs e)
{
 SqlConnection con = new SqlConnection("server=AMR\\DEV1;UID=po;PWD=12W; database=POM;");
 con.Open();
 SqlCommand cmd = new SqlCommand("select * from budget where id=@id and amount=amount", con);
 cmd.Parameters.AddWithValue("@id",TextBox1.Text);
 cmd.Parameters.AddWithValue("@amount",TextBox2.Text);
 DataSet ds = new DataSet();
 ds.Clear();
 SqlDataAdapter da = new SqlDataAdapter(cmd);
 da.Fill(ds);

 if (ds.Tables[0].Rows.Count > 0) 
 {
    Session["user"] = ds.Tables[0].Rows[0][0].ToString();
    Response.Redirect("Default2.aspx");
 }
  else {
    TextBox1.Text = "";
    TextBox2.Text = "";
    Label1.Text = "Invalid Login Details!";
 }
} 
```

学习Andrey Gordeev 所说的[DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)、[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)和[参数化 SqlComamnd](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

# java - 可定制的网络服务

> ID：14979546
> 
> 赞同：1
> 
> 时间：2013-02-20T12:10:10.133
> 
> 标签：java, .net, web-services, soap

我想实现一个能够动态生成 W​​eb 服务的应用程序。这意味着用户可以只选择 ws 在掩码上应该做什么（只需将数据返回给给定参数就足够了），并且 ws 应该在没有重新部署的情况下动态生成。

Web 服务的类型并不重要。我想将 java ee 与 jboss 一起使用，但如果 .NET 能带来任何优势，我也会使用它。

这可能吗？研究生

# javascript - 使用 Jquery、Ajax 和 JSON 选择相应复选框时在数据库中插入数据

> ID：14979548
> 
> 赞同：1
> 
> 时间：2013-02-20T12:10:11.237
> 
> 标签：javascript, ajax, json, checkbox

我的表单很小，有几个复选框和一个隐藏的 div，当用户选中相应的框时会打开。我想在检查特定日期时使用 ajax 和 json 在数据库中插入数据，并在从隐藏 div 插入的数据库中插入时间。是否可以？这是我的表格： [ON jsFiddle](http://jsfiddle.net/oksidans/csSNY/4/)

```
<div>
<input type="checkbox" name="monday" id="mon" class="toggler"  /> Monday
<input type="checkbox" name="tuesday" id="tue" class="toggler"  />Tuesday
<input type="checkbox" name="wendsday" id="wen" class="toggler"/> Wendsday
<input type="checkbox" name="thursday" id="thu" class="toggler"  /> Thursday
<input type="checkbox" name="friday" id="fri" class="toggler" /> Friday
<input type="checkbox" name="saturday" id="sat" class="toggler" /> Saturday
<input type="checkbox" name="sunday" id="sun" class="toggler" /> Sunday
</div>
    <div id="name" class="hidden" style="display: none">
    Time From::<input type="text" id="place" placeholder=""></input> Time To::<input type="text" id="place_one" placeholder=""></input>
    <input type="button" onclick="save_time();" value="Save" />
    </div> 
```

这是我的javascript：

```
$(function(){
   $('.toggler').click(function(id){
       if (this.checked) {
           $('#name').slideDown();
       } else {
           $('#name').slideUp();
       }
   });

   save_time = function(days){
       $.ajax({
          type: "post",
          url: "",
          data: "days="+days,
          success: function(data){

          }
       });
       $('#name').slideUp();

   };

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:28:32.460

我在您的小提琴中更改了一些内容以正确传递“day”+将“from”和“to”值添加到发布数据中。此外，目前一次只能选择一天，因为我猜这是您的逻辑所要求的。

[更新了小提琴](http://jsfiddle.net/csSNY/10/)。

```
$(function(){
   $('.toggler').click(function(id){
       $('.toggler').not('#' + $(this).attr('id')).attr('checked', false);
       if (this.checked) {
           $('#name').slideDown();
       } else {
           $('#name').slideUp();
       }
   });

   save_time = function(){
       var id = $('.toggler:checked').attr('id');
       $.ajax({
          type: "post",
          url: "url",
           data: {day: id, from: $('#place').val(), to: $('#place_one').val()},
          success: function(data){

          }
       });
       $('#name').slideUp();

   };

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:20:07.520

您错过了 ajax 调用的 contentType 和 dataType 属性。

```
save_time = function(days){
           $.ajax({
              type: "post",
              url: "",
              data: "days="+days,
              contentType: "application/json",
              dataType: "json",
              success: function(data){

              }
           }); 
```

并且在您的服务器端方法中应该具有这样的属性

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string MethodName(string days)
    {
        // your code
    } 
```

# c# - T[] 不比 IEnumerable 好 作为参数类型？（考虑线程挑战）

> ID：14979551
> 
> 赞同：9
> 
> 时间：2013-02-20T12:10:18.477
> 
> 标签：c#, multithreading, collections, thread-safety, ienumerable

一些程序员认为传递`IEnumerable<T>`参数比传递实现更好`List<T>`，`IEnumerable<T>`例如`List<T>`.

我越是深入研究多线程开发场景，我就越开始认为这`IEnumerable<T>`也不是正确的类型，我将在下面尝试解释原因。

您在枚举集合时是否收到过以下异常？

**收藏已修改；枚举操作可能无法执行。**（无效操作异常）

![集合被修改异常](../Images/f050ff7d3fd2a4a26a8f77cc5dd5211f.png)

基本上造成这种情况的原因是，您在一个线程上获得了集合，而其他人在另一个线程上修改了集合。

为了规避这个问题，我养成了一个习惯，在枚举之前拍摄集合的快照，方法是将集合转换为方法内的数组，如下所示：

```
static void LookAtCollection(IEnumerable<int> collection)
{   
    foreach (int Value in collection.ToArray() /* take a snapshot by converting to an array */)
    {
        Thread.Sleep(ITEM_DELAY_MS);
    }
} 
```

我的问题是这个。**将数组编码而不是可枚举作为一般规则不是更好吗**，即使这意味着调用者现在在使用您的 API 时被迫将其集合转换为数组？

这不是更清洁，更防弹吗？（参数类型改为数组）

```
static void LookAtCollection(int[] collection)
{   
    foreach (int Value in collection)
    {
        Thread.Sleep(ITEM_DELAY_MS);
    }
} 
```

该数组满足可枚举和固定长度的所有要求，并且调用者知道您将在该时间点对集合的快照进行操作，这可以节省更多错误。

我现在能找到的唯一更好的选择是 IReadOnlyCollection ，它将更加防弹，因为该集合在项目内容方面也是只读的。

**编辑：**

@DanielPryden 提供了一个非常好的文章[“数组被认为有些有害”](http://blogs.msdn.com/b/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx)的链接。作者的评论*“我很少需要一个集合，它具有完全可变的相当矛盾的特性，同时大小固定”*和*“几乎在每种情况下，都有一个比大批。”* 有点说服我，阵列并不像我希望的那样接近银弹，我同意风险和漏洞。我认为现在`IReadOnlyCollection<T>`接口比数组`IEnumerable<T>`和`IReadOnlyCollection<T>`方法声明中的参数类型？还是应该允许调用者决定`IEnumerable<T>`他将什么实现传递给查看集合的方法？

感谢所有的答案。我从这些回复中学到了很多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:57:56.270

除非另有明确说明，否则大多数方法都不是线程安全的。

在这种情况下，我会说由调用者负责线程安全。如果调用者将`IEnumerable<T>`参数传递给方法，那么如果方法枚举了它，他应该不会感到惊讶！如果枚举不是线程安全的，调用者需要以线程安全的方式创建快照，并传入快照。

被调用者不能通过调用`ToArray()`or来做到这一点`ToList()`——这些方法还将枚举集合，并且被调用者不知道需要什么（例如锁）以线程安全的方式制作快照。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T21:48:32.293

这里真正的“问题”是，虽然`T[]`可能是一个比理想参数类型更具体的参数类型，并且允许接收者自由访问写入任何元素（这可能是可取的，也可能不是可取的），但`IEnumerable<T>`过于笼统。从类型安全的角度来看，调用者可以提供对任何实现`IEnumerable<T>`.

if`T`是一个引用类型，a`T[]`本质上对于读、写和枚举都是线程安全的，受某些条件的限制（例如，访问不同元素的线程根本不会干扰；如果一个线程在另一个线程读取或枚举它，后一个线程将看到旧数据或新数据。微软的集合接口都没有提供任何此类保证，也没有提供任何方法来指示集合可以或不能做出什么保证。

我的倾向是要么使用`T[]`，要么定义一个`IThreadSafeList<T> where T:class`包含`CompareExchangeItem`允许在项目上的成员的成员，`Interlocked.CompareExchange`但不包括不能以线程安全方式完成的事情。`Insert``Remove`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T12:13:18.617

此问题并非特定于线程。尝试在显式或隐式调用的循环中修改集合`GetEnumerator`。结果是一样的。这是非法操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:22:06.317

绝不应允许线程访问与其他线程相同的对象。您应该始终复制变量/对象/数组并在线程空闲时解析它们。

完成后，它应该回调主线程，以便线程可以更新当前值/合并值。

如果两个物体可以同时到达同一个物体，你会得到或拔河，或异常或奇怪的行为。

想象一下这样的线程：你有老板和两名员工。老板将手中的信复印成复印件，交给员工。每个员工都有自己的任务，一个是收集清单上的所有东西，另一个是检查清单上的物品是否需要从供应商那里订购。他们每个人都进入自己的私人房间，老板只是把纸放在桌子上，他有时会检查它，告诉别人此刻有多少。

一名员工将订购的物品返回并交给主管，主管将其传递给后勤部门。一小时后，两名员工带着一份更新的库存清单返回。导演扔掉旧名单，用新名单代替。

现在是一个列表的场景。

老板给出了同样的指示。员工一拿到清单并开始致电第一个供应商。员工 2 拿到清单并开始挑选物品。主管想查看清单，但清单不见了，整个销售漏斗陷入停顿，因为没有准确的信息，因为清单已被占用。第一位员工已打完电话并想要更新他的列表。他不能，因为列表被占用了，他不能继续下一个项目，因为列表已经消失了，所以他一直在玩弄他的拇指或大发雷霆。当员工 2 准备好他的清单时，员工拿起清单并试图完成呼叫订单状态，但主管冲进来并拿走清单并将信息传递给销售团队。

这就是为什么您总是需要在线程中使用独立副本，除非您只知道该线程专门需要访问该资源，因为您永远不知道该特定线程何时对该资源执行某些操作，因为您不控制 CPU 计时.

我希望这个能有一点帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:24:04.740

背后的想法之一`IEnumerable`是它是`LINQ`查询的结果。由于查询而不是声明而不是执行代码，因此`IEnumerable`仅在迭代`foreach`或将项目复制到一个`Array`或其他结构时调用结果。现在，如果我们想将结果存储在像 an 这样的静态结构中`Array`，我们必须在迭代之前对其进行更新，`IEnumerable`否则我们将收到过期数据。`IEnumerable.ToArray`意思是：*更新集合并制作它的静态副本*。所以我的回答是，如果我们必须在对集合进行操作之前进行更新，那就`IEnumerable`更简洁了。在其他场景中我们可以使用`Array`以简化代码。

# wso2 - WSO2 数据服务服务器 - 备份所有部署的数据服务

> ID：14979557
> 
> 赞同：0
> 
> 时间：2013-02-20T12:10:37.140
> 
> 标签：wso2, wso2dss

我有兴趣对部署在 WSO2 DSS 上的所有服务进行备份，以便在服务器崩溃、被擦除等情况下，我可以安装一个新服务并从备份中恢复所有服务。

有人可以解释一下如何实现吗？（当然，我不想 tar.gz 整个服务器安装，只是重要的文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:20:09.327

通常数据服务文件 (.dbs) 包含数据服务配置。如果您备份 (DSS_HOME/repository/deployment/server/dataservices) 中的所有 .dbs 文件，您可以通过将它们复制到同一位置来重新部署它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T02:48:27.103

如果您在数据服务配置中使用碳数据源，则仅复制位于“$DSS_HOME/repository/deployment/server/dataservices”目录中的 .dbs 文件将不起作用。（但如果您的数据服务中只有 INLINE 数据源配置，上述选项确实有效）。如果是这种情况，您还必须迁移几个其他配置文件，具体取决于您创建碳数据源的方式。

为了解释更多，有两种方法可以在任何 Carbon 服务器中配置数据源。您可以使用“#DSS_HOME/repository/conf/datasource/*-datasources.xml”或管理控制台本身来创建数据源。但是，如果您遵循后者，则数据源配置将保存在注册表中。因此，要迁移这些配置，您也必须进行注册表数据迁移。但是，就迁移而言，最简单的方法是我提到的第一个选项。在那里，您可以在配置文件中定义您的数据源配置，将其备份并将其复制回您新安装的 DSS，以便也能够成功迁移数据源配置。这种方法的唯一问题是，如果您需要对配置文件中定义的数据源配置进行任何更改，则需要重新启动服务器。但是，我相信这在生产系统中通常不会成为问题，因为我们很少在这样的系统中修改数据源配置等。

为了进一步研究这一点，处理服务器崩溃等问题，我认为仅迁移数据服务和数据源配置是不够的，因为其他配置也可能会发生一些变化。此外，注册表中可能还存储了某些运行时/开发时间数据。在这种情况下，您至少必须在迁移配置方面备份“$DSS_HOME/repository/conf”和“$DSS_HOME/repository/deployment”目录。除此之外，要进行完整迁移，您必须考虑备份“$DSS_HOME/repository/components/lib”、“$DSS_HOME/repository/resources”（特别是如果您在上述文件结构下安装了密钥库) 等以及注册表。

希望这可以帮助。

干杯，普拉巴斯

# android - 通过自定义适配器在 listView 的每一行中加载不同的图像时遇到问题

> ID：14979559
> 
> 赞同：0
> 
> 时间：2013-02-20T12:10:42.477
> 
> 标签：android, android-listview, listadapter

我使用本[教程](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/ "教程") 来学习如何设置我自己的适配器并使用自定义行填充 listView。

现在我尝试使用适配器在每一行中获取不同的图像（image1、image2 等）。谁能给我一个提示，我必须在哪里实现图像的获取！？

来自 main.java 的片段：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_menu);
    m_orders = new ArrayList<Order>();
    int r = 0;
    this.m_adapter = new OrderAdapter(this, R.layout.row, m_orders);
    setListAdapter(this.m_adapter);
    viewOrders = new Runnable(){
        @Override
        public void run() {
            getOrders();
        }
    };
    Thread thread =  new Thread(null, viewOrders, "MagentoBackground");
    thread.start();     
    private Runnable returnRes = new Runnable() {

    @Override
    public void run() {
        if(m_orders != null && m_orders.size() > 0){
            m_adapter.notifyDataSetChanged();
            for(int i=0;i<m_orders.size();i++)
            m_adapter.add(m_orders.get(i));
        }
        m_ProgressDialog.dismiss();
        m_adapter.notifyDataSetChanged();
    }
};
private void getOrders(){
      try{
          m_orders = new ArrayList<Order>();
          Order o1 = new Order();
          o1.setOrderName("SF services");
          Order o2 = new Order();
          o2.setOrderName("SF Advertisement");
          m_orders.add(o1);
          m_orders.add(o2);
          Thread.sleep(2000);
          Log.i("ARRAY", ""+ m_orders.size());
        } catch (Exception e) { 
          Log.e("BACKGROUND_PROC", e.getMessage());
        }
        runOnUiThread(returnRes);
    }

private class OrderAdapter extends ArrayAdapter<Order> {

    private ArrayList<Order> items;

    public OrderAdapter(Context context, int textViewResourceId, ArrayList<Order> items) {
            super(context, textViewResourceId, items);
            this.items = items;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);
            }
            Order o = items.get(position);
            if (o != null) {
                    TextView tt = (TextView) v.findViewById(R.id.toptext);
                    if (tt != null) {
                          tt.setText("Name: "+o.getOrderName());                            }
            }
            return v;
    } 
```

和row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip">
<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_marginRight="6dip" />  
<LinearLayout
    android:orientation="vertical"
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/toptext"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center_vertical"
    />
</LinearLayout> 
```

提前谢谢。我认为找到答案并不难。但我是个菜鸟，有点迷路了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:20:13.233

我假设您正在询问有关通过网络加载图像的问题。

```
Get them in 

     @Override
        public View getView(int position, View convertView, ViewGroup parent) {
           ...
        } 
```

使用延迟加载图像以获取有关延迟加载的更多信息......只需谷歌它......

# javascript - 使 Google 地图内容相对于右侧而不是左侧

> ID：14979560
> 
> 赞同：0
> 
> 时间：2013-02-20T12:10:45.987
> 
> 标签：javascript, html, google-maps, google-maps-api-3

我在网站上使用谷歌地图，当我增加地图 div 的大小时，内容不会相对于顶部和左侧移动（这在大多数情况下是完全合理的）并且新内容显示在右侧和底部。我想水平翻转这种行为，这样当我调整它的大小时，内容不会相对于顶部和右侧移动，而是在左侧显示新内容。这可能吗？

地图 div 的大小将通过动画调整大小，并且当窗口调整大小时，它必须是一个平滑的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:24:57.927

`setCenter()`您可以随时尝试使用on resize重新居中地图。不过，您可能希望消除居中的功能。

## 编辑

这是 API 文档上的一个实际示例。[事件监听器](https://developers.google.com/maps/documentation/javascript/events#EventListeners)

# c - 宏作为 C char 数组中的值

> ID：14979572
> 
> 赞同：0
> 
> 时间：2013-02-20T12:11:45.300
> 
> 标签：c, macros

我需要用宏初始化一个 char 数组作为它的值。我试过这样做：

```
 char    text[][255] = {
     "",
    /*  1 */        MACRO_("Foobar","Some text to translate"),
    /*  2 */        MACRO_("Foobar","Some more text to translate"),
//...
}; 
```

但我得到这个错误：

> 错误：初始化元素不是常量

我认为编译器无法解析宏。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:14:10.393

它更有可能`MACRO()`扩展到一些非常量的东西，例如用于查找翻译的函数调用。至少在这种情况下通常会这样做。

使用[GNU gettext](http://www.gnu.org/software/gettext/)，它也使用宏来标记和查找要翻译的字符串，您可以在此类情况下使用单独的仅标记宏（通常称为），然后在使用之前`N_()`将字符串传递给运行时宏。`_()`

您不能使用需要函数调用才能计算的数据来初始化数组，它必须是常量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:35:33.870

`> MACRO_ calls a function which translates the text. It's not my solution but I have to work with it`

事实是你不能在*编译时*用来自的数据初始化你的数组，`MACRO_`因为它调用了一个函数。然而，一切都没有丢失。您可以在*运行时简单地执行此操作*

前任：

```
#define MACRO_ ...//whatever it does

int main()
{
   char    text[10][255] = {0}; // you'll have to set that first value

   strcpy(text[0],  MACRO_("Foobar","Some text to translate"));
   strcpy(text[1],  MACRO_("Foobar","Some more text to translate"));
   ... 
```

根据您的代码、`MACRO_`执行的操作以及传入的内容，您可能可以在循环中执行此操作，这将节省您的一些写作时间，但这将解决您的问题。

# c# - 复选框 - 如何实现？

> ID：14979573
> 
> 赞同：1
> 
> 时间：2013-02-20T12:11:55.673
> 
> 标签：c#, asp.net-mvc, razor

我有一个视图模型，其中包含一个情节和一个布尔值“已观看”：

```
public class WatchedEpisodeViewModel
{
    public Episode Episode { get; set; }
    public bool Watched { get; set; }
} 
```

我有一个绑定到我的视图的列表：

```
@model IEnumerable<Seriebeheer.Web.Models.WatchedEpisodeViewModel> 
```

我列出了这些信息：

```
 @foreach (var episode in Model)
         {
             <tr>
                 <td>@episode.Episode.ID</td>
                 <td>@episode.Episode.Name</td>
                 <td>@episode.Episode.Date.Value.ToString("dd/MM/yyyy")</td>
                 <td><input type="checkbox" value="@episode.Episode.ID" checked="@episode.Watched"/></td>
             </tr>
         } 
```

用户可以标记复选框并按下按钮来提交信息。我想在我的控制器中查看标记了哪些复选框，哪些没有。

实现这一目标的最佳方法是什么？

编辑：

```
[HttpPost]
public ActionResult Checkin(IEnumerable<WatchedEpisodeViewModel> episodes)
{
    foreach (WatchedEpisodeViewModel episode in episodes) <-- nullreference exception
    {
        if (episode.Watched)
        {
            // test
        }
    }
    return RedirectToAction("Index", "Home");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:22:02.347

问题是您使用的是循环`foreach`而**不是**`for`循环。您需要使用`for`循环，因为这将为每个字段提供正确的索引，以允许模型绑定器完成它的工作。

您的另一个问题是您需要对模型`CheckBoxFor`中的`Watched`布尔值进行处理。

您的最后一个问题是您的 Episode 字段没有任何`HiddenFor`s，因此当您发布时，您将不知道模型中每个项目上的 Episode 将被观看什么`null`

试试这个：

```
@for (int i = 0; i < Model.Count(); i++)
{
    <tr>
        <td>
            @Html.HiddenFor(m => m[i].Episode.ID)
            @Model[i].Episode.ID
        </td>
        <td>
            @Html.HiddenFor(m => m[i].Episode.Name)
            @Model[i].Episode.Name
        </td>
        <td>
            @Html.HiddenFor(m => m[i].Episode.Date)
            @Model[i].Episode.Date.Value.ToString("dd/MM/yyyy")
        </td>
        <td>
            @Html.CheckBoxFor(m => m[i].Watched)
        </td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:14:57.317

这是 MVC 中的一个常见问题，因为在发回模型时很难绑定复选框列表。现在您可以查看 FormCollection ，但这确实效率不高。

我之前使用过这个扩展，它使场景变得更加简单。[CheckBoxList(For)](http://mvccbl.com/)说明非常简单，包在 Nuget 上可用。

# mysql - MySQL上的计算列创建表查询字符串

> ID：14979578
> 
> 赞同：-2
> 
> 时间：2013-02-20T12:12:10.337
> 
> 标签：mysql, calculated-columns

我对mysql有点陌生。我试图在 set 命令的帮助下计算列以计算新列，但它没有执行（1064 错误）。

所以我的问题是：-

> *是否可以使用创建表*查询字符串添加用于创建计算列的查询？如果是，那怎么办？如果没有，那为什么。什么应该是最好的选择。

我认为，我也可以使用它来实现这一点，`TRIGGER`但我试图避免这种情况。[这](https://stackoverflow.com/questions/441869/create-a-computed-column-on-a-datetime)是一个很好的例子，但这不适用于将要插入的数据。

我试过这个如下

```
create table `call_detail` (`service_key` integer not null,
`called` datetime not null,
`called_stamp` integer not null 
        SET  (1 if HOUR(`called`)<10 else 2 if HOUR(`called`)<16 else 3 if HOUR(`called`)<24
            else -1),
PRIMARY KEY (`service_key`) 
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:27:48.063

MySQL 没有这样的计算列，您链接到的线程是用于 MSSQL 的。

正如我所见，你有几个选择

*   使用触发器更新列
*   创建视图
*   设置 cron 作业以定期更新表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:33:55.453

这是

1.  不可能
2.  你的语法完全错误
3.  从哪里来`_date`？

我建议您为此使用视图。这样，您就不会丢失以后可能需要的信息，但仍能得到您想要的信息。

```
CREATE VIEW v_call_detail AS
SELECT 
c.*,
CASE WHEN HOUR(created_modified) < 10 THEN 1
     WHEN HOUR(created_modified) BETWEEN 10 AND 15 THEN 2 
     WHEN HOUR(created_modified) BETWEEN 16 AND 23 THEN 3
     ELSE -1
END AS called_stamp
FROM
call_detail c 
```

这假设您的表中有一个 created_modified 列，它指示插入或修改行的时间。像这样创建表：

```
create table `call_detail` (`service_key` integer not null,
`called` datetime not null,
created_modified timestamp default CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (`service_key`) /*changed primary key, since you don't have a column `_ID`*/
); 
```

# c++ - 如何在 Windows Qt 应用程序中嵌入 Qt 库？

> ID：14979581
> 
> 赞同：1
> 
> 时间：2013-02-20T12:12:12.550
> 
> 标签：c++, windows, qt, dll, build

我的 Qt 应用程序将安装在 Windows 计算机上，但没有安装 Qt。

我怎么能解决这个问题？我有义务构建一个巨大的静态 exe 吗？

是否可以将 Qt DLL 与我的应用程序放在同一个文件夹中并将其链接到它们？我在 Qt 网站上找到了这个解释“[创建应用程序包](http://doc.qt.digia.com/stable/deployment-windows.html#creating-the-application-package)”，但它是面向插件的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:16:04.387

您只需将 DLL 与可执行文件放在同一目录中，然后创建一个包含以下内容的 qt.conf：

```
[Paths]
Prefix=.\
Plugins=.\ 
```

这样，您可以确保 Qt 系统会从正确的目录（例如`sqldrivers`SQL 插件的目录）中选择您可能使用的插件。当然，你可以根据自己的需要自定义这些路径，这是最简单的解决方案……

确保从应用程序链接到的 Qt 目录中选择正确的 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:15:22.637

> 是否可以将 Qt DLL 与我的应用程序放在同一个文件夹中并将其链接到它们？

是的，Windows 将在可执行文件所在的文件夹（以及其他[地方](http://msdn.microsoft.com/en-us/library/7d83bc18%28v=vs.80%29.aspx)）中查找 DLL。

# php - 防止暴力攻击的登录解决方案

> ID：14979583
> 
> 赞同：0
> 
> 时间：2013-02-20T12:12:22.037
> 
> 标签：php

获得这种解决方案的利弊是件好事。并获得意见，该解决方案在防止攻击方面有多大用处（它有多大帮助）。

每个用户名（用户）都有唯一的登录网址。这是示例[https://secure.freshbooks.com/loginSearch.php](https://secure.freshbooks.com/loginSearch.php)

我看到这样的优点：

1.  多个用户可以使用相同的用户名
2.  对于每个用户名，hacker 必须使用不同的 url（这里的问题是：对于黑客来说，难度有多大？可能编写特殊程序很容易）
3.  获取 url 登录需要很长时间（与单一 login.php 相比）
4.  ....可能有更多的优点

我认为的缺点是为每个用户名创建单独的子域。使用 like 可能会更好`www.page.com/user/`。此外，如果例如 100000 个用户想要相同的用户名。命名 url 的更好解决方案是`..../username`什么？

问题是如何编码？来自mysql的用户名；将用户名添加到 url... 然后呢？

很高兴知道你的意见。

希望这不会被视为题外话或重新发布问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-14T22:10:58.387

我在 PHP 中创建了一个负责暴力攻击保护的类。

[https://github.com/ejfrancis/BruteForceBlocker](https://github.com/ejfrancis/BruteForceBlocker)

它将站点范围内的所有失败登录记录在数据库表中，如果过去 10 分钟（或您选择的任何时间范围）内的失败登录次数超过设定的限制，它会强制执行时间延迟和/或验证码要求在再次登录之前。

例子：

> //建立油门设置数组。（# 最近失败的登录 => 响应）。
> 
> $throttle_settings = [
> 
> ```
>  50 => 2,            //delay in seconds
>     150 => 4,           //delay in seconds
>     300 => 'captcha'    //captcha 
> ```
> 
> ];
> 
> $BFBresponse = BruteForceBlocker::getLoginStatus($throttle_settings);
> 
> //$throttle_settings 是一个可选参数。如果不包含，将使用 BruteForceBlocker.php 中的默认设置数组
> 
> 开关（$BFBresponse['status']）{
> 
> ```
> case 'safe':
>     //safe to login
>     break;
> case 'error':
>     //error occured. get message
>     $error_message = $BFBresponse['message'];
>     break;
> case 'delay':
>     //time delay required before next login
>     $remaining_delay_in_seconds = $BFBresponse['message'];
>     break;
> case 'captcha':
>     //captcha required
>     break; 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:18:44.383

使用蛮力攻击的黑客已经知道他们试图入侵的用户名。他们只会暴力破解密码，所以这并不是一个真正有效的防御措施。

更好的方法可能是对登录尝试进行限制，但将其设置为普通用户不应该看到的非常高的值，例如 100。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T18:36:07.483

像这样的伪代码呢？

```
 $searchresult = mysql_query($searchquery) or die(mysql_error());
    if (mysql_num_rows($searchresult) == 0) {
       echo "no rows found";  (DIE)
    }

    else {
    $attemptTime = "SELECT TimeStamp FROM UserLogTable WHERE `UserName` LIKE '%{$userName}%'";
    $attempts = "SELECT attempts FROM UserLogTable WHERE `UserName` LIKE '%{$userName}%'";

    if ( $attemptTime < time()-10 ){  // Reset attempt after 10 min
attempts = 0;
   "INSERT "$attempts" INTO attempts / UserLogTable WHERE `UserName` LIKE '%{$userName}%'";
}

     if (attempts > 3) { 
     echo "Too many attempts you must wait 5 minutes")

      else { 
       Run database check on password 
          if ( password failed ) {
          $attempts++
          "INSERT "$attempts" INTO attempts / UserLogTable WHERE `UserName` LIKE '%{$userName}%'";
          DIE("Bad Login")
          else { 
           $attempts = 0
          "INSERT "$attempts" INTO attempts / UserLogTable WHERE `UserName` LIKE '%{$userName}%'"; // reset attempts
           login user 
           } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T13:58:23.537

只是一个想法......为什么不禁止在x次攻击失败后攻击IP？或者（可能更容易），需要人工验证（例如验证码）来破坏脚本攻击。我在实际编码方面并不聪明（尽管我使用新的 HTML5 拖放作为验证码的替代方法），但总体思路应该可行，是吗？

# jquery - jQuery垂直动画条教程

> ID：14979586
> 
> 赞同：1
> 
> 时间：2013-02-20T12:12:45.653
> 
> 标签：jquery, svg, jquery-animate

我不确定我是否可以在这里问这个问题 - 但我一直在尝试寻找一个在 jquery/svg 中完成的**单个**动画栏的教程（我认为可能使用 .animate）。

我不是想找到一个加载栏，我只是想要一个实际显示的栏 - 例如 - 0 摄氏度到 24 摄氏度的可视化。

我无法想象如何实际做到这一点，我实际上也找不到关于它的教程。谁能给我一个教程（或明确的提示，我知道你们在这里强调个人的努力，我也想学习）我实际上可以理解如何做到这一点？

这是一个粗略的可视化：

```
0 Deg                          24 Deg
******                          ____
******                          |  |
******                          |  |
******                          |  |
______      animates to        _|__|_ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:19:43.260

是 html/css 问题还是 javascript/jquery？小样本演示了一种可能的方法：

```
<button id="start">start animation</button>
<div id="foo"></div>

#foo {
    background-color: rgb(235,235,235);
    box-shadow: 0 0 1px 1px rgb(130,130,130);
    width: 20px;
    height: 0px;
    margin: 50px;
    position: relative;
    top: 200px;
}

$(function() {
    $('#start').click(function() {
        $('#foo').animate({
            height: 200,
            top: 0
        });
    });
}); 
```

[jsfiddle](http://jsfiddle.net/TfX8R/)

# php - 使用 SimpleXML 基于另一个属性值选择属性值

> ID：14979588
> 
> 赞同：2
> 
> 时间：2013-02-20T12:12:46.977
> 
> 标签：php, xml, xpath, simplexml

我正在尝试使用 xml 文件和 SimpleXML 显示图像

XML 代码是

```
<icons>
  <icon size="tiny"    href="/FF02-tiny.jpg"    />
  <icon size="sidebar" href="/FF02-sidebar.jpg" />
  <icon size="full"    href="/FF02-full.jpg"    />
</icons> 
```

我想获取该行的`href`属性`size="full"`。

我试过了

```
icons->icon->attributes()->href 
```

但这只是给了我第一个`'tiny'`尺寸。我知道我应该使用 xpath，但我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:24:46.287

是的，您可以使用 xpath 表达式选择属性节点：

```
list($iconHref) = $xml->xpath("//icon[@size='full']/@href");
echo $iconHref; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:23:47.517

`$icons->icon`将为您提供一个`SimpleXMLElement`对象，该对象可以访问`icon`该对象的所有子元素`$icons`。

从那里您需要选择要为其获取属性的图标。这适用于类似[数组](http://php.net/arrays#example-87)的访问以及零索引子元素的数值和属性的字符串值：

```
// specify what icon you want (third)
// and the attribute (href)
$icons->icon[2]['href']; 
```

您可以在 PHP 手册中找到包含[SimpleXML 基本示例](http://php.net/simplexml.examples-basic)（*示例 #3*和*示例 #5*）的文档。

但是，如果您要查找的元素的位置发生变化，这将不起作用。所以建议你改用[更具体的 xpath-expression](https://stackoverflow.com/a/14979814/367456)。

# findbugs - FindBugs 在将两个 BigInteger 与 == 进行比较时无法标记 RC_REF_COMPARISON

> ID：14979594
> 
> 赞同：2
> 
> 时间：2013-02-20T12:12:55.667
> 
> 标签：findbugs

在我的代码中，我有这样的东西：

```
if (a.foo() == b.foo()){ ... something ... } 
```

哪里`foo()`返回`BigInteger`。我认为 FindBugs 应该将此标记为错误

```
RC: Suspicious reference comparison (RC_REF_COMPARISON) 
```

但事实并非如此。我试图将代码重新键入如下：

```
BigInteger c = a.foo();
BigInteger d = b.foo();
if(c == d){ ... something ...} 
```

但这没有任何效果。我已经尝试了几种配置设置，在哪些错误上可以找到相同的假阴性结果。我有很多代码要验证，我需要找到所有这些错误。我缺少什么设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:19:49.027

可能 FindBugs 有一个它知道不应将其作为引用进行比较的类列表，而 BigInteger 不在该列表中。

您是正确的，它们不应作为参考进行比较，因此 BigInteger 应该在列表中。一般来说，FindBugs 无法知道对于任意类是否可以。

# objective-c - Google Drive 上传 API 错误

> ID：14979599
> 
> 赞同：5
> 
> 时间：2013-02-20T12:13:22.100
> 
> 标签：objective-c, google-drive-api, google-api-objc-client

我正在通过 Objective-C SDK 将图像上传到谷歌驱动器，今天早上上传完成后我不断收到此错误：

2013-02-20 13:07:30.565 Transfer[1774:907] <0x1fab2b40 GDriveDataSource.m:(165)> 发生错误：Error Domain=com.google.GTLJSONRPCErrorDomain Code=400“操作无法完成。 （**不支持的内容类型：application/json-rpc;** charset=utf-8）" UserInfo=0x1fcc0690 {error=不支持的内容类型：application/json-rpc; charset=utf-8, GTLStructuredError=GTLErrorObject 0x1fcbfcc0: {message:"Unsupported content with type: application/json-rpc; charset=utf-8" code:400 data:[1]}, NSLocalizedFailureReason=(Unsupported content with type:应用程序/json-rpc；字符集=utf-8)}

我的代码已经工作了很多天，而且我最近没有改变。我肯定在上传参数参数上设置了正确的 mime 类型。这是代码的相关部分：

```
GTLDriveFile *file = [GTLDriveFile object];
file.title = asset.fileName;
file.mimeType = @"image/jpeg";

NSData *imageData = [asset getImageDataForResolutionType:resType];

GTLUploadParameters *uploadParameters = [GTLUploadParameters uploadParametersWithData:imageData
                                                                             MIMEType:file.mimeType];
GTLQueryDrive *query = [GTLQueryDrive queryForFilesInsertWithObject:file
                                                   uploadParameters:uploadParameters]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:43:23.087

似乎这只是 Google Drive 后端的一个临时问题，现在问题已解决，通过 Objective-c sdk 上传到 GDrive 的功能再次起作用。

# c# - 带有可为空的日期时间列的 Linq 插入

> ID：14979600
> 
> 赞同：1
> 
> 时间：2013-02-20T12:13:23.863
> 
> 标签：c#, asp.net, linq

我正在尝试使用 Linq 进行插入并不断收到 sqlDateTime 溢出错误。

我在数据库中有一个可为空的 DateTime 字段。

我正在使用 linq to sql，我的 dateTime 类是：

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_concern_DateTo", DbType="DateTime")]
public System.Nullable<System.DateTime> concern_DateTo {
    get { return this._concern_DateTo; }
    set {
        if ((this._concern_DateTo != value)) {
            this.Onconcern_DateToChanging(value);
            this.SendPropertyChanging();
            this._concern_DateTo = value;
            this.SendPropertyChanged("concern_DateTo");
            this.Onconcern_DateToChanged();
        }
    }
} 
```

我有一个选择日期的 JQuery datepicker，我正在检查它是否是 dateTime：

```
DateTime PartC_DateTo = new DateTime();

//'Date To' Part C
//================
if (txt_PartC_DateTo.Text != string.Empty) {
    DateTime.TryParse(txt_PartC_DateTo.Text, out PartC_DateTo);
} 
```

然后，当我分配时，我正在使用此代码：

```
if (txt_PartC_DateTo.Text != string.Empty) {
    concern.concern_DateTo = PartC_DateTo;
} 
```

然后，当我`submitChanges()`将异常写入屏幕进行测试时，会出现 SQLDateTime 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:16:18.860

您不检查是否`DateTime.TryParse`成功（通过返回值），因此对于数据库`PartC_DateTo`来说仍然很可能是无效的（默认）`DateTime`。

相反，保持你的`DateTime`价值为`null`, 和...

```
DateTime parseableDate;
DateTime? someNullableDate;
if (DateTime.TryParse(txt_PartC_DateTo.Text, out parseableDate)) {
   someNullableDate = parseableDate;
} 
```

您可以在此处使用 someNullableDate 并假设它是 A) 有效日期或 B) null；但是，请注意 0001 年 1 月 1 日是一个有效日期，可以解析但可能不会被您的数据库引擎接受，因此请检查数据库中可能的最低日期值，并进一步适应此类差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:52:30.637

你应该尝试声明一个`DateTime?`

```
 DateTime? PartC_DateTo = null;
        DateTime dateOut = new DateTime();
        if (txt_PartC_DateTo.Text != string.Empty)
        {
            DateTime.TryParse(txt_PartC_DateTo.Text, out dateOut);
            PartC_DateTo = dateOut;
        } 
```

这个答案是为了接受，`null`因为你`concern_DateTo`是可以为空的。

让我们考虑一下有关您的代码的这种情况。您正在声明 a`new DateTime()`并且给定的值为`1/1/0001 12:00:00 AM`，MS SQL SERVER[无法接受](http://jerrytech.blogspot.com/2005/03/earliest-date-held-by-sql-server.html)。

试试这个方法：

```
 DateTime? PartA_Date;
        DateTime dateOut2;
        if (!DateTime.TryParse(txt_PartA_Date.Text, out dateOut2))
        {
            lbl_message.Text += " * 'Date' is not a valid date!<br/>"; txt_PartA_Date.BackColor =
                Color.FromName(ConfigurationManager.AppSettings["ErrorColour"]);
        }
        else
        {
            PartA_Date = dateOut2;
        } 
```

**提示**：开发程序最简单的方法是，数据库中表的字段必须`nullable`不包括`Primary Key`. 如果您不想接受`null`您的数据库，只需让您的程序进行管理。

```
 if (IsNull) return; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:17:21.410

`new DateTime();`不为空，它是`DateTime.MinValue`（0001 年 1 月 1 日）。这是 sql`datetime`最小值（1753 年 1 月 1 日）之前的日期。

要么使用`null`要么使用sql类型`datetime2`

# android - 在Android中以小数设置dp

> ID：14979601
> 
> 赞同：9
> 
> 时间：2013-02-20T12:13:24.017
> 
> 标签：android

我正在尝试设置 Android 中 2 个元素之间的距离。我设置的边距是 1dp，我认为距离超出了我的预期。我认为0.5dp就可以了。是否可以在我尝试时以小数设置边距？如果是这样，支持的最小 dp 是多少？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T12:33:10.287

是的，您可以使用 0.5dp 或您想要的任何十进制数，但要小心。当您的 dp 转换为像素时，它们乘以显示逻辑密度并四舍五入。

如果你的 dp = 0.1 比 hdpi 显示你得到 (int)(0.1 * 1.5 + 0.5) = 1px。（1.5 是 hdpi 显示的逻辑密度）

如果您的 dp = 0.5，对于 mdpi 显示，您将得到 (int)(0.5 * 1 + 0.5) = 1px（1 是 mdpi 显示的逻辑密度）

# javascript - 更改 HTML 中的文本 标记取决于用户单击的画布图像

> ID：14979606
> 
> 赞同：0
> 
> 时间：2013-02-20T12:13:43.470
> 
> 标签：javascript, html5-canvas, mousedown

我有一个 HTML5 画布，它显示了许多图像。我使用 KineticJS 库来绘制图像并使它们可拖动，但是，我使用的是该库的本地副本，因为我想对其功能进行一两个更改。

我现在想为库中的函数添加更多功能`mousedown`，但我不确定如何做我想做的事，我只是想知道是否有人能指出我正确的方向？

我目前在画布上显示了大约 30 张图像 - 这些图像都存储在 HTML 的隐藏部分中，并已从那里添加到 JS 数组中。我还有另一个 JS 数组，在一个单独的 JS 文件中，其中包含有关图像数组中每个图像的文本描述数组。

文本数组中位置 0 的文本是对图像数组中位置 0 的图像的描述，位置 1 的文本是对位置 1 的图像的描述，等等...

我在画布下方的页面上有 HTML`<p></p>`标签。

我现在要做的是添加一个函数，该函数将`<p></p>`根据在画布上单击的图像更改该标记中显示的文本......即向`mousedown`函数添加一些代码，即

“当`mousedown`在图像上检测到a时，找出该图像存储在图像数组中的哪个位置，并更新`<p></p>`标签中的文本以显示存储在文本数组中相应位置的文本。

从理论上讲，我会认为这应该是相当简单的，但我只是不知道该怎么做......大概我需要写一个新的JS函数，即

```
function displayTip(){
    document.getElementById('tipsParagraph').innerHTML= tips[0];
} 
```

然后从`mousedown`库中的函数中调用该函数。

我不确定的是如何找出被点击的图像在图像数组中的位置，以便我可以将它存储在一个变量中，然后将`tips[]`值设置为该变量的值，给出我在tips数组中的位置相同。

我假设我需要`mousedown`稍微编辑库中的函数，告诉它找出被点击的图像所在的数组位置，但我不知道该怎么做......有任何想法吗？

该`mousedown`函数当前如下所示：

```
_mousedown: function(evt) {
    this._setUserPosition(evt);
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        this.clickStart = true;
        shape._handleEvent('mousedown', evt);

    }

    //init stage drag and drop
    if(Kinetic.DD && this.attrs.draggable) {
        this._initDrag();
    }
} 
```

另外，我假设一旦我找到了图像在数组中的存储位置，然后我会想要在函数中添加对我`displayTip`的函数的`mousedown`调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:06:42.933

我设法通过添加以下函数来解决这个问题：

```
function displayTip(index){

    document.getElementById('tipsParagraph').innerHTML = tips[index];
    console.log("displayTip being called");
} 
```

到我的 JavaScript，并使用以下行从`mousedown`函数中调用它：

```
displayTip(obj.shape.index); 
```

# r - 如何在 makeCluster 中指定并行或雪中的选项

> ID：14979611
> 
> 赞同：1
> 
> 时间：2013-02-20T12:13:52.040
> 
> 标签：r, parallel-processing, snow

我在 Windows 上使用`parallel`or包，该函数可以带一个参数来指定它在工作人员上执行的位置。如果我希望它被执行为什么选项？`snow``makeCluster``rscript``Rscript``--vanilla`

编辑：运行`makeCluster(2, rscript='pathToMyRScript --vanilla')`不适用于我的盒子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:43:33.060

我不相信这些软件包提供了一种简单、直接的方法。我将创建一个包装器并使用“rscript”选项指定该包装器的完整路径。理论上这很容易，但实际上在编写包装器时必须小心，以避免由于重新解析参数而导致错误，以防它们包含空格。例如，我怀疑以下 BAT 脚本会出现问题：

```
"C:\Program Files\R\R-2.15.2\bin\Rscript" --vanilla %* 
```

我可能会使用使用 subprocess 模块的 Python 脚本，但有很多可能性可供选择，您可能有自己喜欢的。

**更新**

从 R 版本 3.1.2 开始，该`rscript_args`选项被添加到`makeCluster`函数中。您可以使用此选项来指定`--vanilla`选项：

```
makeCluster(2, rscript_args="--vanilla") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:40:50.840

我认为您最好的选择是将其作为功能请求提交给包作者，或者深入研究函数定义并定义您自己的调用以尝试使用名为 as 的 Rscript 生成 PSOCK 节点`--vanilla`。查看`parallel:::newPSOCKnode`并检查它如何定义对`Rscript`. 感兴趣的线路是：

```
rscript <- if (getClusterOption("homogeneous", options)) {
    shQuote(getClusterOption("rscript", options))
}
else "Rscript"
cmd <- paste(rscript, "-e", shQuote(arg), env) 
```

如果您可以修改要调用的函数`Rscript --vanilla`，它可能会正常工作。我很惊讶写作`rscript=<rscript_path> --vanilla`不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:27:46.357

从`An Introduction to R`R 手册页的 B.4 节：

`If you just want to run a file foo.R of R commands, the recommended way is to use R CMD BATCH foo.R. If you want to run this in the background or as a batch job use OS-specific facilities to do so: for example in most shells on Unix-alike OSes R CMD BATCH foo.R & runs a background job.`

所以在你的情况下，所有命令都必须进入脚本，然后你想要

```
R --vanilla CMD BATCH your_script.R 
```

从命令行，而不是 GUI。

# java - 在 Java 中扩大后缩小

> ID：14979621
> 
> 赞同：3
> 
> 时间：2013-02-20T12:14:44.520
> 
> 标签：java

假设我有一个`String`对象引用并将其分配给一个`Object`引用。这将隐式执行`widening`。

```
Object o = "Hello World" 
```

现在我们不能`String`在`o`. 我的问题是，由于这种类型转换，是否会丢失任何数据，就像在 C++ 中，如果我们将 a`float`转换为`int`.

如果我明确地`o`回退，`String`我将能够访问实际的`String`.

Java中有很多方法都有`Object`类型变量作为参数。所以我可以将任何类型的对象引用传递给这个参数。我可以通过显式缩小它来将此对象转换回原始对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:15:54.260

对于对象，您只是在转换*引用*。对象 ( `String`) 仍然完好无损。

当您将 a 传递`String`给方法调用时，您只是将引用传递给它（当您遇到返回值时会发生这种情况）。您可以使用

```
if (o instanceof String) {
   String s = (String)o;
} 
```

并安全地使用该字符串（请注意，如果您经常这样做，它可能指向不正确的对象建模，但这是另一个问题）

请注意，您还讨论了浮点数/整数，它们与上述不同，因为它们是 Java*原语*，而不是引用。有关转换原语的讨论，请参见[此处](https://stackoverflow.com/questions/6777905/what-does-this-mean-narrowing-a-primitive-truncates-the-high-order-bits)。简而言之，您将在此处丢失数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:24:09.173

如果你有一个返回 Object 类对象的方法，你可以返回字符串，事实上，你可以返回任何 Java 对象。没有任何目的，简单的强制转换会影响性能（更多是由于字符串的不变性）。事实上，无需转换为 Object，您也可以使用 Object 类的方法。如果您想了解更多关于不变性的影响，可以参考[Introduction – Immutable Nature – Comparison](http://way2java.com/string-and-stringbuffer/introduction-immutable-nature-comparison/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:20:53.120

如果你确定你有一个`String`对象，你可以。但你甚至可以在运行时测试它：

```
Object o = "Hello there!";
if (o instanceof String) {
    String s = (String) o;
    System.out.println("String length: " + s.length());
} else {
    System.out.println("Something else: " + o.getClass().getName());
} 
```

实际上，如果您不想要意外`ClassCastException`的 s，测试是一种很好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:23:32.803

> 假设我有一个 String 对象引用并将其分配给一个 Object 引用。这将隐式执行加宽

不，这不执行加宽，它执行*铸造*

> 由于这种类型转换，是否会丢失任何数据

不。不管向上转换，对象仍然是一个字符串。它可以在任何时候*向下转换*回字符串。

Narrowing 和 Widening 是针对原始和参考转换定义的。
Upcasting 和 Downcasting（正如你所使用的那样）是根据识别转换来定义的。

# ios - 使用 tabris iOS 客户端更改服务器 URL？

> ID：14979622
> 
> 赞同：0
> 
> 时间：2013-02-20T12:14:47.213
> 
> 标签：ios, eclipse, tabris

是否可以以其他方式更改 Tabris iOS 客户端的服务器 URL，例如在 AppDelegate.m 文件中的 XCode 中硬编码它？

Tabris Android 客户端允许直接更改应用程序中的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:02:41.217

好吧，从技术上讲，这是可能的。您需要将该功能添加到您的本机 iOS 客户端（例如，使用 iOS 设置）。

我们没有在 Xcode 的最小 iOS 客户端项目模板中包含此功能，原因有两个：

1.  让用户更改“本机”应用程序中的 URL 以访问不同的功能并不是一个好的用户体验。因此，我建议创建多个应用程序 - 每个服务器/URL/用例一个。

2.  如果您想在 Apple AppStore 中提供您的应用程序，Apple 不允许完全更改所描述的应用程序行为 - 这可以通过更改 URL 来实现。

如果您打算为您的企业发布应用程序（而不是在 App Store 中），您可以集成此功能。（我们已经为我们的内部开发客户端做到了这一点——这简化了只用一个应用程序针对不同服务器的开发）

# javascript - 变化事件

> ID：14979629
> 
> 赞同：0
> 
> 时间：2013-02-20T12:15:06.127
> 
> 标签：javascript

我有这样的事情：我希望当我在下拉列表中选择任何东西时，我的提交按钮应该被触发......我已经添加了 onchange 事件，即 onchange 转到我使用调用我的表单的函数 `document.getElementById("frmReport").submit();`

```
<script type = "text/javascript">
function go() {
document.getElementById("frmReport").submit();
}
</script>enter code here
</head>
<body id="homepage">
    <!-- Right Side/Main Content Start -->
    <div id="rightside">
         <!-- Graphs Box Start -->
        <div class="contentcontainer" id="graphs">
                       <div class="contentbox" id="graphs-1">
                       <form name="frmReport" id="frmReport" method="post">  
                    <table style="display: none;" class="area">
                        <caption>VOICE-SMS SENT</caption>
                        <thead>
                            <tr>
                                <td></td>
                                <th scope="col">1</th>
                                <th scope="col">2</th>
                                <th scope="col">3</th>
                                <th scope="col">4</th>
                                <th scope="col">5</th>
                                <th scope="col">6</th>
                                <th scope="col">7</th>
                                <th scope="col">8</th>
                                <th scope="col">9</th>
                                <th scope="col">10</th>
                                <th scope="col">11</th>
                                <th scope="col">12</th>
                                <th scope="col">13</th>
                                <th scope="col">14</th>
                                <th scope="col">15</th>
                                <th scope="col">16</th>
                                <th scope="col">17</th>
                                <th scope="col">18</th>
                                <th scope="col">19</th>
                                <th scope="col">20</th>
                                <th scope="col">21</th>
                                <th scope="col">22</th>
                                <th scope="col">23</th>
                                <th scope="col">24</th>
                                <th scope="col">25</th>
                                <th scope="col">26</th>
                                <th scope="col">27</th>
                                <th scope="col">28</th>
                                <th scope="col">29</th>
                                <th scope="col">30</th>
                            </tr>
                        </thead>
                        <tbody>
                         <tr>
                                <th scope="row">TOATAL CALLS</th>
                            <?php
                            if (isset($_POST['submit']))
                    {
                            $answer = array();
                            for($i=1;$i<=31;$i++) {
                                $answer[$i]=0;
                            }
                            $connect = new Connection();
                            if ($connect->openConnection()) {
                                $connect->beginTransaction();
                                $filecount = $connect->fetchRows("CALL spTotalVoiceMonthGraphStatus('shreeweb','".date("Y")."-".$_REQUEST['cmbToYear']."-01')");
                                //$rowcount=count($filecount);
                                //echo $rowcount;
                                if ($filecount) 
                                {
                                    foreach($filecount as $row) {
                                        //$abc=$row['count'];
                                        //echo '<td>'.$row['count'].'</td>';
                                        $answer[$row['ActualDate']]=$row['count'];
                                    }                
                                }
                            }
                            for($i=1;$i<=31;$i++) {
                                echo '<td>'.$answer[$i].'</td>';

                            }
                            }
                            ?>

                            </tr>
                            <tr>
                                <th scope="row">ANSWERED CALLS</th>
                            <?php
                            if (isset($_POST['submit']))
                    {
                            $answer = array();
                            for($i=1;$i<=31;$i++) {
                                $answer[$i]=0;
                            }
                            $connect = new Connection();
                            if ($connect->openConnection()) {
                                $connect->beginTransaction();
                                $filecount = $connect->fetchRows("CALL spMonthlyGraphStatus('shreeweb','".date("Y")."-".$_REQUEST['cmbToYear']."-01')");
                                //$rowcount=count($filecount);
                                //echo $rowcount;
                                if ($filecount) 
                                {
                                    foreach($filecount as $row) {
                                        //$abc=$row['count'];
                                        //echo '<td>'.$row['count'].'</td>';
                                        $answer[$row['ActualDate']]=$row['count'];
                                    }                
                                }
                            }
                            for($i=1;$i<=31;$i++) {
                                echo '<td>'.$answer[$i].'</td>';

                            }
                            }
                            ?>

                            </tr>
                            <tr>
                                <th scope="row">Other Calls</th>
                                <?php
                                if (isset($_POST['submit']))
                    {
                                $answer = array();
                                for($i=1;$i<=31;$i++) {
                                    $answer[$i]=0;
                                }
                                $connect = new Connection();
                                if ($connect->openConnection()) {
                                    $connect->beginTransaction();
                                    $filecount = $connect->fetchRows("CALL spMonthlyGraphStatusOthers('shreeweb','".date("Y")."-".$_REQUEST['cmbToYear']."-01')");
                                    if ($filecount) {
                                        foreach($filecount as $row) {
                                            $answer[$row['ActualDate']]=$row['count'];
                                        }                
                                    }
                                }
                                for($i=1;$i<=31;$i++) {
                                    echo '<td>'.$answer[$i].'</td>';
                                }
                                }   
                                ?>
                            </tr>   

                        </tbody>
                        <center> 
                    <select size="1" name="cmbToYear" id="cmbToYear" title="Click here to select year" onchange = "go()">
                    <option>SELECT MONTH</option>
                        <option value="01">JAN </option>
                       <option value="02"> FEB</option>
                       <option value="03"> MAR</option>
                       <option value="04"> APR</option>
                       <option value="05"> MAY</option>
                       <option value="06"> JUN</option>
                       <option value="07"> JULY</option>
                       <option value="08"> AUG</option>
                       <option value="09"> SEP</option>
                       <option value="10"> OCT</option>
                       <option value="11"> NOV</option>
                       <option value="12 "> DEC</option>
                       </select>
                        <input type="submit" class="btn" value="Submit" name="submit"  title="Click here to view the reports for sent Voice sms">
                    </center>
                    </table>
                    </form>
            </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:17:37.110

按钮的命名干扰了脚本

`onchange="this.form.submit()"`如果您将提交按钮重命名为 mySubmit。

而且根本没有涉及 jQuery，所以我删除了标签。

如果你想要 jQuery，做

```
$(function() {
  $("#cmbToYear").on("change",function() {
    this.form.submit();
    // or $("#frmReport").submit();
  });
}); 
```

但是按钮的重命名是最重要的，所以你还需要

```
if (isset($_POST['mySubmit'])) 
```

# jquery - flot x2axes 日期布局与 x1axis 不对齐

> ID：14979631
> 
> 赞同：0
> 
> 时间：2013-02-20T12:15:11.840
> 
> 标签：jquery, flot

x2axis 日期与 x1axis 时间不一致。x2axis 标签是 MM-dd 格式的日期，这应该与 x1axis 中设置的时间一致，即一个小时。但是这个显示在 8:00，这应该是 00:00

```
var plot = $.plot('#divPlaceholder', [
    { label: itemKey[0], data: itemValue[0], color: '#4bb2c5' },
    { label: itemKey[1], data: itemValue[1], color: '#c5b47f' }
], {
    series: {
        lines: { show: true },
        points: { show: true }
    },
    xaxis: {
        mode: "time",
        position: "top",
        min: minVal,  // this is current day - 24 hours
        max: maxVal,   // this is current date + 1 hours
        timeformat: tickFormat,
        tickSize: interval,
        twelveHourClock: true,
        zoomRange: [0.1, 10]
    },
    x2axis:{
        show:true,
        mode:'time',
        position:'top',
        timeformat:'%b-%d',
        tickSize: [1, 'day'],
        axisLabel: 'Lab Results',
        axisLabelUseCanvas: true,
        axisLabelFontSizePixels: 16,
        axisLabelFontFamily: "Verdana, Arial, Helvetica, Tahoma, sans-serif",
        axisLabelPadding: 0
    },
    yaxis: {
        min: 0,
        panRange:[-10, 100]
    },
    grid: {
        hoverable: true,
        clickable: true,
        backgroundColor: 'gray'
    },
    zoom: {
        interactive: false
    }
}); 
```

![x2axis 日期与 x1axis 时间不一致](../Images/3192f5482cf2d2e01f61c6d3608f798d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:30:43.687

如果您在添加 %H 时看到 8:00，那么它们排列正确；只是你在制作标签时缩短了时间。如果您希望它们准确地排列在日期上，那么您需要确保时间戳都在 00:00。

查看文档中对[时间序列数据](https://github.com/flot/flot/blob/master/API.md#time-series-data)的讨论，并搜索有关 Flot 中时间和时区的其他 StackOverflow 问题。

# javascript - Twitter 搜索 api 总是返回 15 条推文

> ID：14979633
> 
> 赞同：0
> 
> 时间：2013-02-20T12:15:20.137
> 
> 标签：javascript, ajax, twitter

当我调用 twitter 搜索 API 来搜索带有特定主题标签的推文时，它总是返回 15 条推文，即使我将计数设置为 5。

```
 $.ajax({
        url:'http://search.twitter.com/search.json',
            type: 'GET',
        dataType: 'jsonp',
        data: {
            q: %23twitter,
            count: 5    
        }, 
          success: function(data, textStatus, xhr) {
                         //some code
        } 
```

有谁知道可能是什么问题？

编辑： include_entities 等其他参数也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:29:48.197

尝试

```
data: {
    q: %23twitter,
    page : 1,
    rpp :  4
}, 
```

如果您只想获得 X 条推文，请将 rpp 设置为 X-1

# c# - 在没有 TouchInput 的计算机上调试 TouchInput WPF 应用程序

> ID：14979644
> 
> 赞同：0
> 
> 时间：2013-02-20T12:15:53.640
> 
> 标签：c#, wpf, input, touch, emulation

我需要在我的应用程序中添加对 TouchInput 的支持。（例如，缩放图像或滚动ScrollViewer） 但测试不是在任何东西上。有任何想法如何模拟 TouchInput 吗？也许将其用作连接的 Android 平板电脑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:14:28.630

假设通用 WPF 触摸而不是 Surface SDK 使用 Multitouch Vista：

[在我以前的答案中查看如何](https://stackoverflow.com/a/12852184/537198)

# java - 背景图像隐藏了所有 GUI 设计组件

> ID：14979647
> 
> 赞同：1
> 
> 时间：2013-02-20T12:16:03.470
> 
> 标签：java, image, swing, background

我正在开发 GUI 应用程序，我使用 Swing 组件来设计 GUI。我想为我的表单设置背景图像，但是当我设置图像时，它会覆盖用于设计 GUI 的所有组件。

首先我的没有背景图片的表格如下图所示，

![在此处输入图像描述](../Images/9bd0aed13de251512a7a952867a00f55.png)

我的代码是，

## 登录.java

```
public class Login extends JFrame{
    public static JFrame myFrame;
    public LoginPanel loginPanel;

    public Login() throws IOException
    {
        initilize();
    }

    public void initilize()throws IOException {

        myFrame = new JFrame("Message"){ 
            private Image backgroundImage = ImageIO.read(new File("D:/Sky.jpg"));
            public void paint( Graphics g ) { 
                super.paint(g);
                g.drawImage(backgroundImage, 0, 0, null);
            }
        };
        myFrame.setLayout(new BorderLayout());

        loginPanel = new LoginPanel();

        //Panel
        Container c = myFrame.getContentPane();

        c.add(loginPanel, BorderLayout.WEST);
        myFrame.setSize(300, 150);
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.setVisible(true);
        myFrame.setLocationRelativeTo(null);

    } 

    public static void main(String[] arg) {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                try {
                    new Login();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

## 登录面板.java

```
public class LoginPanel extends JPanel implements ActionListener {
    public JLabel user_no=null;
    public JLabel password=null;
    public JButton btn_login = null;
    public JButton btn_newUser = null;
    public JTextField usernameField=null;
    public JPasswordField passwordField=null;
    public static String userNo;
    public ArrayList msgList = new ArrayList();

    public LoginPanel()
    {
        initilize();
        initConnection();
    }

    private void initilize() {

        Dimension size = getPreferredSize();
        size.width = 285;
        size.height = 150;
        setPreferredSize(size);

        setBorder(BorderFactory.createTitledBorder(null, "Login Details", TitledBorder.CENTER, TitledBorder.TOP));

        user_no = new JLabel("User No : ");

        password = new JLabel("Password : ");

        usernameField = new JTextField(14);

        passwordField = new JPasswordField(14);

        btn_login = new JButton("Login");

        btn_newUser = new JButton("New User");

        setLayout(new GridBagLayout());

        GridBagConstraints gc = new GridBagConstraints();

        //// First column /////////////////////////

        gc.anchor = GridBagConstraints.LINE_START;

        gc.gridx = 0;
        gc.gridy = 0;
        add(user_no, gc);

        gc.gridx = 0;
        gc.gridy = 1;
        add(password, gc);

        //// Second column
        gc.anchor = GridBagConstraints.LINE_START;

        gc.gridx = 1;
        gc.gridy = 0;
        add(usernameField, gc);

        gc.gridx = 1;
        gc.gridy = 1;
        add(passwordField, gc);

        // Final row
        gc.anchor = GridBagConstraints.FIRST_LINE_START;
        gc.gridx = 1;
        gc.gridy = 2;
        add(btn_login, gc);

        gc.anchor = GridBagConstraints.FIRST_LINE_END;
        gc.gridx = 1;
        gc.gridy = 2;
        add(btn_newUser, gc);

    }

    private void initConnection() {
        btn_login.addActionListener(this);
        btn_newUser.addActionListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if(e.getSource().equals(btn_login))
        {
            userNo = usernameField.getText();
            String userPwd = passwordField.getText();
            System.out.println(userNo+" "+userPwd);
            Connection con = ConnectionImpl.getConnection();

            try
            {
                PreparedStatement pstmt;

                String sql = "SELECT sender_no,pwd FROM tb_login where sender_no ='"+userNo+"'"; 

                pstmt= con.prepareStatement(sql);

                ResultSet rs = pstmt.executeQuery();

                if(rs.next())
                {
                    if(userNo.equalsIgnoreCase(rs.getString(1))&&userPwd.equalsIgnoreCase(rs.getString(2)))
                    {
                        System.out.println("Successfull login");

                        String sql2 = "Select msg from tb_msg where sender_no='"+userNo+"'";

                        pstmt= con.prepareStatement(sql2);

                        ResultSet rs2 = pstmt.executeQuery();

                        while(rs2.next())
                        {
                            msgList.add(rs2.getString(1));
                        }
                        System.out.println("msgList = "+msgList.size());

                        Login.myFrame.dispose();
                        new AddMessage(userNo,msgList);
                    }
                }
            }
            catch (Exception exp) {
                exp.printStackTrace();
            }
        }

        if(e.getSource().equals(btn_newUser))
        {
            Login.myFrame.dispose();
            new NewUser();
        }
    }

} 
```

设置背景图像后，它看起来像这样，

![在此处输入图像描述](../Images/d0b8e66d25d0d7e4e50a97f403ab1f55.png)

它隐藏了`JButton`,的组件`JLabel`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:45:24.857

代码需要更接近于此：

![登录面板](../Images/ba5d73e65756cefb31a1cbc2b6382766.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import javax.swing.*;
import java.io.*;
import java.sql.*;
import java.util.ArrayList;
import javax.swing.border.TitledBorder;

public class Login extends JFrame{
    public static JFrame myFrame;
    public LoginPanel loginPanel;

    public Login() throws IOException
    {
        initilize();
    }

    public void initilize()throws IOException {
        BufferedImage backgroundImage = new BufferedImage(400,200,BufferedImage.TYPE_INT_RGB);
        myFrame = new JFrame("Message");
        myFrame.setLayout(new BorderLayout());

        loginPanel = new LoginPanel(backgroundImage);

        //Panel
        Container c = myFrame.getContentPane();

        c.add(loginPanel, BorderLayout.WEST);
        //myFrame.setSize(300, 150);
        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myFrame.pack();
        myFrame.setVisible(true);
        myFrame.setLocationRelativeTo(null);

    } 

    public static void main(String[] arg) {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                try {
                    new Login();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
}

class LoginPanel extends JPanel implements ActionListener {
    public JLabel user_no=null;
    public JLabel password=null;
    public JButton btn_login = null;
    public JButton btn_newUser = null;
    public JTextField usernameField=null;
    public JPasswordField passwordField=null;
    public static String userNo;
    public ArrayList msgList = new ArrayList();

    private BufferedImage backgroundImage;

    public LoginPanel(BufferedImage backgroundImage)
    {
        this.backgroundImage = backgroundImage;
        initilize();
        initConnection();
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(backgroundImage, 0, 0, getWidth(), getHeight(), this);
    }

    private void initilize() {

        Dimension size = getPreferredSize();
        size.width = 285;
        size.height = 150;
        setPreferredSize(size);

        setBorder(BorderFactory.createTitledBorder(null, "Login Details", TitledBorder.CENTER, TitledBorder.TOP));

        user_no = new JLabel("User No : ");
        password = new JLabel("Password : ");
        usernameField = new JTextField(14);
        passwordField = new JPasswordField(14);
        btn_login = new JButton("Login");
        btn_newUser = new JButton("New User");
        setLayout(new GridBagLayout());

        GridBagConstraints gc = new GridBagConstraints();

        //// First column /////////////////////////

        gc.anchor = GridBagConstraints.LINE_START;

        gc.gridx = 0;
        gc.gridy = 0;
        add(user_no, gc);

        gc.gridx = 0;
        gc.gridy = 1;
        add(password, gc);

        //// Second column
        gc.anchor = GridBagConstraints.LINE_START;

        gc.gridx = 1;
        gc.gridy = 0;
        add(usernameField, gc);

        gc.gridx = 1;
        gc.gridy = 1;
        add(passwordField, gc);

        // Final row
        gc.anchor = GridBagConstraints.FIRST_LINE_START;
        gc.gridx = 1;
        gc.gridy = 2;
        add(btn_login, gc);

        gc.anchor = GridBagConstraints.FIRST_LINE_END;
        gc.gridx = 1;
        gc.gridy = 2;
        add(btn_newUser, gc);

    }

    private void initConnection() {
        btn_login.addActionListener(this);
        btn_newUser.addActionListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if(e.getSource().equals(btn_login))
        {
            userNo = usernameField.getText();
            String userPwd = passwordField.getText();
            System.out.println(userNo+" "+userPwd);
            Connection con = null;

            try
            {
                PreparedStatement pstmt;
                String sql = "SELECT sender_no,pwd FROM tb_login where sender_no ='"+userNo+"'"; 
                pstmt= con.prepareStatement(sql);
                ResultSet rs = pstmt.executeQuery();
                if(rs.next())
                {
                    if(userNo.equalsIgnoreCase(rs.getString(1))&&userPwd.equalsIgnoreCase(rs.getString(2)))
                    {
                        System.out.println("Successfull login");
                        String sql2 = "Select msg from tb_msg where sender_no='"+userNo+"'";
                        pstmt= con.prepareStatement(sql2);
                        ResultSet rs2 = pstmt.executeQuery();

                        while(rs2.next())
                        {
                            msgList.add(rs2.getString(1));
                        }
                        System.out.println("msgList = "+msgList.size());

                        Login.myFrame.dispose();
                        //new AddMessage(userNo,msgList);
                    }
                }
            }
            catch (Exception exp) {
                exp.printStackTrace();
            }
        }

        if(e.getSource().equals(btn_newUser))
        {
            Login.myFrame.dispose();
            //new NewUser();
        }
    }
} 
```

## 更多提示

1.  为了尽快获得更好的帮助，请发布[SSCCE](http://sscce.org/)。
2.  不要扩展框架，只使用一个实例，但是..
3.  在这种情况下，根本不使用框架，而是在 a`JDialog`或 a中显示登录`JOptionPane`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:26:06.050

1.  画`Image`到`LoginPanel (JPanel)`而不是`ContentPane`（不建议直接画到`JFrame`）

2.  用于`JPanel`使用`paintComponent(`) 而不是`paint(for JFrame`)

# r - 如何在计算之前用 NA 替换几个栅格中的某些值？

> ID：14979649
> 
> 赞同：1
> 
> 时间：2013-02-20T12:16:07.100
> 
> 标签：r, raster

我正在用光栅文件进行一些计算。我特别在计算移动平均值。我想知道在任何计算之前为 NA 赋值。

```
Here is the code :
 files   <- list.files("C:final-2010", "*.envi", full.names = TRUE)
 files[round(files,3) ==  -339999995214436420000000000000000000000.000 ] <- NA
d1 <-  overlay(stack(files ),fun=function(x) movingFun(x, fun=mean, n=3, na.rm=TRUE)) 
```

但我得到一个错误：

```
 Error in round(files, 3) : Non-numeric argument to mathematical function 
```

我也试过这个：

```
 f=stack(files)
  f[round(f,3) ==  -339999995214436420000000000000000000000.000 ] <- NA
   movi <-  overlay(stack(f),fun=function(x) movingFun(x, fun=mean, n=3, na.rm=TRUE)) 
```

没有错误，但是当我查看结果时发现没有任何改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:43:34.243

这就是您将 NA 设置为单个栅格图层中的值的方式。一旦你这样做，你可以随意堆叠。

```
library(raster)
r1 <- raster(nrows=108, ncols=21, xmn=0, xmx=10)
r1[] <- runif(ncell(r1))
par(mfrow = c(1, 2))
plot(r1)
r1[500:1000] <- NA
plot(r1) 
```

![在此处输入图像描述](../Images/7843930ea57ccf4278a4fdeb264645a8.png)

```
r <- stack(r1, r1, r1)
x <- list(c(100, 300), c(400, 600), c(800, 1000))
s <- mapply(FUN = function(x, y) {
  y[x[1]:x[2]] <- NA
  y
}, x = x, y = r)

plot(stack(s)) # not shown here 
```

# mysql - sql if 在没有选择的插入语句中

> ID：14979653
> 
> 赞同：1
> 
> 时间：2013-02-20T12:16:18.947
> 
> 标签：mysql, sql, if-statement

昨天我问了这个问题：[如果在 mysql insert 语句](https://stackoverflow.com/questions/14960022/if-in-mysql-insert-statement)中，答案非常好。问题是如果值不存在，我需要在表中插入一行。铁

```
 If('x' NOT EXIXTS in (select campoX from table) then
 insert into table (...) values (...) etc. 
```

我能怎么做？在互联网上我找不到答案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:18:28.467

我假设您的表名为 tbl。

```
INSERT INTO tbl (campoX ) 
    SELECT 'X' FROM DUAL 
    WHERE NOT EXISTS( 
                      SELECT campoX from tbl 
                      WHERE campoX ='X'
                     ); 
```

`DUAL`纯粹是为了方便那些要求所有 SELECT 语句都应该有 FROM 和可能的其他子句的人。MySQL 可能会忽略这些子句。如果没有引用表，MySQL 不需要 FROM DUAL。

正如其他一些提到的，`INSERT IGNORE`如果您的 campoX 是唯一或主键字段，您可以在此处使用语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:41:55.507

使用双表：

```
INSERT INTO campoX (col1, col2, col3)
SELECT value1, value2, value3
FROM dual
WHERE NOT EXISTS(SELECT * 
                 FROM campoX 
                 WHERE col1=value1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:21:18.770

关于什么：

```
CASE 
    WHEN 'X' NOT EXIST IN (SELECT campoX FROM yourTable) THEN 
    INSERT INTO yourTable (...) VALUES (...) 
END CASE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:32:24.853

发明你的编程语言并不是描述你的问题的最合适的方式。

你的意思是你只想添加一个数据在数据库中不存在的行吗？如果是这样，请确保您已在表上定义了主键或唯一键并无论如何都执行 INSERT - 但忽略重复键错误。实际上，使用 MySQL，您可以使用“INSERT IGNORE....”完全抑制重复键的错误生成。

# lisp - 通过 CFFI 传递指针以获取结果

> ID：14979656
> 
> 赞同：1
> 
> 时间：2013-02-20T12:16:20.157
> 
> 标签：lisp, common-lisp, cffi

这是C中的一个函数：

```
union Example {
    int number;
    void *pointer;
};
void return_a_value (union Example *ptr) {
    (*ptr).number = 1;
} 
```

现在我想通过 CFFI 在 Common Lisp 中调用它，我该怎么做呢？

```
(defcunion Example 
  (number :int)
  (ptr :pointer))

(defcfun "return_a_value" :void
  (retval :pointer)) ; I'm not very sure here.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:21:31.237

到目前为止一切都很好，包括您对 `return_a_value`. 这就是你可以调用函数的方式：

```
(with-foreign-object (arg 'example)
  (setf (foreign-slot-value arg 'example 'number) 123)
  (return-a-value arg)
  (foreign-slot-value arg 'example 'number)) 
```

# java - 将图例添加到 jFreechart

> ID：14979659
> 
> 赞同：1
> 
> 时间：2013-02-20T12:16:26.560
> 
> 标签：java, jfreechart

我想出了我的最终滞后图，如下所示：

![在此处输入图像描述](../Images/ade6730fcdffc4f14891e787677b36b7.png)

我之前的帖子： [使用 jFreeChart 绘制滞后循环](https://stackoverflow.com/questions/14952712/plotting-a-hysteresis-loop-with-jfreechart)

我的第一个磁滞回线使用了 4 个 XYSeries，第二个磁滞回线使用了另外四个。

如果我打开传奇

```
 JFreeChart chart = ChartFactory.createXYLineChart(
"Hysteresis Plot", // chart title
"Pounds(lb)", // domain axis label
"Movement(inch)", // range axis label
dataset, // data
PlotOrientation.VERTICAL, // orientation
true, // include legend
true, // tooltips
false // urls
); 
```

它看起来像这样：

![在此处输入图像描述](../Images/fa331d41c990b14eda0f6e6852364905.png)

我只想显示蓝色是我的第一个磁滞回线，红色是我的第二个磁滞回线，我在第一张图片中将其添加为副标题作为解决方法。有人可以指导我如何添加手动图例，将蓝色作为第一个循环，将红色作为第二个循环。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:33:09.497

因为`ChartFactory.createXYLineChart()`创建了一个`XYPlot`，你可以试试，[这里](https://stackoverflow.com/a/5431509/230513)和[这里](http://www.jfree.org/forum/search.php?keywords=setFixedLegendItems)[`setFixedLegendItems()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html#setFixedLegendItems%28org.jfree.chart.LegendItemCollection%29)提到的。

一个更雄心勃勃的方案是抑制原生图例并将图例项呈现在单独的组件中，如此[处所示](https://stackoverflow.com/a/13309587/230513)。

# typescript - TypeScript：将接口转换为类

> ID：14979660
> 
> 赞同：6
> 
> 时间：2013-02-20T12:16:29.777
> 
> 标签：typescript

我有以下代码：

```
interface X {
    type : string;
    val : number;
}

class X1 implements X {
    type : string;
    val : number;
}

var p1 : X[] = [{type:'a', val:8}];

for (var n in p1) {
    var p2 : X1 = p1[n];
}
var p3 : X1 = p1[0]; 
```

p2 和 p3 都被声明为 X1 类型，并使用 X 类型的值进行初始化。

编译器很高兴地接受了 p2 的声明，但它抱怨 p3 说“无法将 'X' 转换为 'X1'”。

为什么会有这种差异？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T13:25:37.373

实现的所有东西都`X`应该可以转换为`X`，但不一定可以转换为`X1`。

这里有更多细节。下面的代码显示了一个简单的示例。本质上，如果你有某种类型`X`（接口），它可以由`X1`（类）或`X2`（类）实现。

虽然您可以降级一个类型（从实现降级到接口），但您不能升级一个类型（从接口到特定实现），因为您不能保证您所拥有的是兼容的。

另一种看待这个问题的方法是，你可以做一些比它*更*具体的东西，但你不能做一些比它*更*具体的东西。

```
interface X {
    type : string;
    val : number;
}

class X1 implements X {
    type : string;
    val : number;
}

class X2 implements X {
    type: string;
    val: number;
    myMethod() {

    }
}

var x1 = new X1();
var x2 = new X2();

var exampleA: X = x1; // happy
var exampleB: X = x2; // happy

var exampleC: X1 = exampleA; // Not happy... 
```

所有这一切的结果是你需要强制转换它：

```
var exampleC: X1 = <X1>exampleA; // happy... 
```

但要小心，因为你可以这样做，这实际上是行不通的：

```
var exampleC: X2 = <X2>exampleA; // seems happy...
exampleC.myMethod(); // oh dear! 
```

**更新**

关于这段代码...

```
for (var n in p1) {
    var p2 : X1 = p1[n];
} 
```

在 JavaScript 中，这不等同于`foreach`循环。这通常用于迭代对象中的属性，[当您在数组上使用它时，它只会显示显式设置的索引（不是所有项目）](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。要遍历数组，您应该使用：

```
for (var i = 0; i < p1.length; i++) {
    var p2 : X1 = p1[i]; // same warning as before
} 
```

那么 TypeScript 是如何允许`p1[n]`分配给`X1`变量的呢？有趣的问题和答案就在这里...

如果您将鼠标悬停在上方，`p1[n]`您会看到一个类型`X[]`- 这是 的类型`p1`，而不是 的类型`p1[n]`。如果你检查这个例子，你会发现它`p1[n]`的类型是`any`：

```
var example = p1['test']; // I used 'test' because n is a string. 
```

因为它是类型`any`，所以编译器允许你告诉它把它当作一个`X1`. 因此，您正在从转换`any`为`X1`不`X`转换`X1`为您可能认为的转换。

# google-maps-api-3 - 使用 SVG 路径创建加号 (+)

> ID：14979662
> 
> 赞同：4
> 
> 时间：2013-02-20T12:16:35.320
> 
> 标签：google-maps-api-3, svg, google-polyline

我试图创建一个 + 符号作为谷歌地图项目的 SVG 路径。加号将使用图标路径属性沿折线绘制。到目前为止，我已经设法接近，我的加号目前看起来像一条水平线，垂直设置在一端“-|”。我需要它出现在水平线的中间，使它看起来像一个加号。

我的当前路径是使用以下路径命令设置的：

```
path: 'M 0,-1 0,1 H -1,1 0,1' 
```

我应该如何改变它以实现我的加号？我可以找到很多更复杂的形状、曲线、渐变填充等的例子，但我的知识有限，我很难找到正确的坐标来表达我的形状！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T15:16:26.840

我想你想要的是：

`path: 'M0,-1 V1 M-1,0 H1'`

翻译为从 (0, -1) 开始，垂直绘制 1 个单位，然后移动到 (-1, 0) 并水平绘制 1 个单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:33:48.727

虽然我相当肯定这不是描述这条路径的最简洁的方式，但我设法使用以下路径语句构建了一个加号 [更多通过反复试验和一些非常模糊的 Turtle 记忆]：

```
path: 'M 0,0 H 0.5,0.5 1,1 M 0,0 V 0.5,0.5 1,1 M 0,0 H -0.5,-0.5 -1,-1 M 0,0 V -0.5,-0.5 -1,-1', 
```

# javascript - Backbone.js 事件触发器

> ID：14979665
> 
> 赞同：2
> 
> 时间：2013-02-20T12:16:39.497
> 
> 标签：javascript, backbone.js, eventtrigger

如何将更改事件绑定到模型从视图更改名称并在视图块中显示更改的名称。

```
Student = Backbone.Model.extend({
    initialize: function(){
        this.on("change:name", function(model){
            var name = model.get("name");
            alert("Changed my name to " + name );
        });
    }
});

var pe = new Student({ name: "sinduja", age: 20});
pe.set({name: 'shalini'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:01:23.107

[主干不会在model.set](http://backbonejs.org/#Model-set)上自动触发更改事件吗？

您只需要将您的视图注册到更改事件。

```
Student = Backbone.Model.extend({
    initialize: function(){
        //initialize variables
    }
});

StudentView = Backbone.View.extend({
    initialize: function(model) {
        _.bindAll(this);
        model.on("change:name",this.nameChanged)
    },
    nameChanged: function(evt) {
        console.log("name changed", evt)
    }

}) 
```

用法：

```
var pe = new Student({ name: "sinduja", age: 20});
var sv = new StudentView(pe);
pe.set({name: 'shalini'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:33:26.053

我曾经编写自己的自定义内容来响应双向模型/视图更改，这有点维护痛苦。然后我找到了插件[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)。

它使您想要实现的目标变得非常容易。我将您链接到的 github 自述文件页面上有一些很好的示例，因此我没有任何意义！如果一开始看起来有点混乱，我会说尽力让它工作，因为从长远来看，这个插件会为你节省无数小时，就像它对我一样。

# php - header() 无法重定向

> ID：14979669
> 
> 赞同：0
> 
> 时间：2013-02-20T12:16:56.890
> 
> 标签：php, redirect, header, mysqli

我不知道为什么我的代码无法重定向......我犯了什么错误......它显示一个警告是（（（警告：无法修改标题信息 - 标题已经发送）））......请任何人告诉我需要更改什么才能成功重定向...我的代码是::

```
<?php
include_once $_SERVER['DOCUMENT_ROOT'].'/include/db.inc.php' ;
$email = $_POST['email'];
$password1 = $_POST['password1'];
$password2 = $_POST['password2'];
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
if($password1 != $password2)
{
    header('Location: http://localhost/home/');
    echo "<script language=javascript> alert(\"RE-ENTERED PASSWORD DOESN'T MATCH           WITH THE ORIGINAL ONE\");</script>"; 
    exit();
}
if($firstname == "" or $firstname == "First Name")
{
    header('Location: http://localhost/home/');
    echo "<script language=javascript> alert(\"INVALID FIRST NAME\");</script>"; 
    exit();
}
if($lastname == "" or $lastname == "Last Name")
{
    header('Location: http://localhost/home/');
    echo "<script language=javascript> alert(\"INVALID LAST NAME\");</script>"; 
    exit();
 }
//INSERTION INTO THE DATABASE STARTS FROM HERE.........
$email = mysqli_real_escape_string($link,$_POST['email']);
$password1= mysqli_real_escape_string($link,$_POST['password1']); 
$firstname= mysqli_real_escape_string($link,$_POST['firstname']);
$lastname= mysqli_real_escape_string($link,$_POST['lastname']);
$password=md5($password1);
$sql = "INSERT INTO users SET 
    email = '$email',
    password = '$password',
    firstname = '$firstname',
    lastname = '$lastname'";
if (!mysqli_query($link, $sql))
{
    header('Location: http://localhost/home/');
    echo "<script language=javascript> alert(\"THIS E-MAIL ID HAS ALREADY USED BEFORE !!!\");</script>"; 
    exit();
}
else
{
    header('Location: http://localhost/home/');
    echo "<script language=javascript> alert(\"REGISTRATION SUCCESSFULLY COMPLETED !!!             \");</script>"; 
    exit();
}        
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:18:45.283

检查中的任何输出（回声）或空格`db.inc.php`。

在调用之前你不能输出任何东西`header()`

此外，将您的文件编码为`UTF-8 without BOM`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:21:26.067

如果您找不到空格或脚本输出的位置，请将此行放在脚本顶部：

```
ob_start() 
```

然后，在任何 exit(); 之前也需要这个函数。

```
ob_end_flush(); 
```

# c# - 使用C#获取datagridview的Word Excel和PDF格式的数据

> ID：14979671
> 
> 赞同：3
> 
> 时间：2013-02-20T12:17:00.560
> 
> 标签：c#

我有一个 windows 窗体和 datagridview，我想以 Word、Excel 或 PDF 格式获取 datagridview 的数据 请问我在 Visual Studio 中使用 C# 是什么代码？

# hadoop - 运行 oozie fork 时出现 LeaseExpiredException

> ID：14979677
> 
> 赞同：3
> 
> 时间：2013-02-20T12:17:17.227
> 
> 标签：hadoop, apache-pig, hdfs, oozie

我们正在尝试`Oozie`使用 3 个子工作流并行运行一个工作流`fork`。子工作流包含一个运行本机 map reduce 作业的节点，以及运行一些复杂`PIG`作业的后续两个节点。最后，三个子工作流连接到一个`end`节点。

当我们运行这个工作流时，我们得到`LeaseExpiredException`. 运行`PIG`作业时会随机发生异常。它发生的时间没有确定的位置，但每次我们运行WF时都会发生。

此外，如果我们删除`fork`并按顺序运行子工作流程，它工作正常。但是，我们的期望是让它们在某些执行时间并行运行并且相同。

您能否帮助我理解这个问题以及一些关于我们可能出错的地方的指示。我们是从`hadoop`开发开始的，之前还没有遇到过这样的问题。

看起来由于多个任务并行运行，其中一个线程关闭了一个零件文件，当另一个线程试图关闭该文件时，它会引发错误。

以下是 hadoop 日志中异常的堆栈跟踪。

```
2013-02-19 10:23:54,815 INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher: 57% complete 
2013-02-19 10:26:55,361 INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher: 59% complete
2013-02-19 10:27:59,666 ERROR org.apache.hadoop.hdfs.DFSClient: Exception closing file <hdfspath>/oozie-oozi/0000105-130218000850190-oozie-oozi-W/aggregateData--pig/output/_temporary/_attempt_201302180007_0380_m_000000_0/part-00000 : org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on <hdfspath>/oozie-oozi/0000105-130218000850190-oozie-oozi-W/aggregateData--pig/output/_temporary/_attempt_201302180007_0380_m_000000_0/part-00000 File does not exist. Holder DFSClient_attempt_201302180007_0380_m_000000_0 does not have any open files.
                at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1664)
                at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1655)
                at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFileInternal(FSNamesystem.java:1710)
                at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.completeFile(FSNamesystem.java:1698)
                at org.apache.hadoop.hdfs.server.namenode.NameNode.complete(NameNode.java:793)
                at sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
                at java.lang.reflect.Method.invoke(Method.java:597)
                at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:557)
                at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1439)
                at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1435)
                at java.security.AccessController.doPrivileged(Native Method)
                at javax.security.auth.Subject.doAs(Subject.java:396)
                at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1278)
                at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1433) 
```

以下是主要工作流程和一个子工作流程的示例。

主要工作流程：

```
<workflow-app xmlns="uri:oozie:workflow:0.2" name="MainProcess">
<start to="forkProcessMain"/>
<fork name="forkProcessMain">
    <path start="Proc1"/>
    <path start="Proc2"/>
    <path start="Proc3"/>
</fork>
<join name="joinProcessMain" to="end"/>
<action name="Proc1">
    <sub-workflow>
        <app-path>${nameNode}${wfPath}/proc1_workflow.xml</app-path>
        <propagate-configuration/>
    </sub-workflow>
    <ok to="joinProcessMain"/>
    <error to="fail"/>
</action>   
<action name="Proc2">
    <sub-workflow>
        <app-path>${nameNode}${wfPath}/proc2_workflow.xml</app-path>
        <propagate-configuration/>
    </sub-workflow>
    <ok to="joinProcessMain"/>
    <error to="fail"/>
</action>   
<action name="Proc3">
    <sub-workflow>
        <app-path>${nameNode}${wfPath}/proc3_workflow.xml</app-path>
        <propagate-configuration/>
    </sub-workflow>
    <ok to="joinProcessMain"/>
    <error to="fail"/>
</action>   
<kill name="fail">
    <message>WF Failure, 'wf:lastErrorNode()' failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
</kill>
<end name="end"/> 
```

子工作流程：

```
<workflow-app xmlns="uri:oozie:workflow:0.2" name="Sub Process">
<start to="Step1"/>
<action name="Step1">
    <java>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
           <delete path="${step1JoinOutputPath}"/>
        </prepare>
        <configuration>
            <property>
                <name>mapred.queue.name</name>
                <value>${queueName}</value>
            </property>
        </configuration>
        <main-class>com.absd.mr.step1</main-class>
        <arg>${wf:name()}</arg>
        <arg>${wf:id()}</arg>
        <arg>${tbMasterDataOutputPath}</arg>
        <arg>${step1JoinOutputPath}</arg>
        <arg>${tbQueryKeyPath}</arg>
        <capture-output/>
    </java>
    <ok to="generateValidQueryKeys"/>
    <error to="fail"/>
</action>
<action name="generateValidQueryKeys">
    <pig>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
           <delete path="${tbValidQuerysOutputPath}"/>
        </prepare>
        <configuration>
            <property>
                <name>pig.tmpfilecompression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.tmpfilecompression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>pig.output.map.compression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.output.map.compression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>pig.output.compression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.output.compression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>mapred.compress.map.output</name>
                <value>true</value>
            </property>
        </configuration>
        <script>${pigDir}/tb_calc_valid_accounts.pig</script>
        <param>csvFilesDir=${csvFilesDir}</param>
        <param>step1JoinOutputPath=${step1JoinOutputPath}</param>
        <param>tbValidQuerysOutputPath=${tbValidQuerysOutputPath}</param>
        <param>piMinFAs=${piMinFAs}</param>
        <param>piMinAccounts=${piMinAccounts}</param>
        <param>parallel=80</param>
    </pig>
    <ok to="aggregateAumData"/>
    <error to="fail"/>
</action>
<action name="aggregateAumData">
    <pig>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
           <delete path="${tbCacheDataPath}"/>
        </prepare>
        <configuration>
            <property>
                <name>pig.tmpfilecompression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.tmpfilecompression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>pig.output.map.compression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.output.map.compression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>pig.output.compression</name>
                <value>true</value>
            </property>
            <property>
                <name>pig.output.compression.codec</name>
                <value>lzo</value>
            </property>
            <property>
                <name>mapred.compress.map.output</name>
                <value>true</value>
            </property>
        </configuration>
        <script>${pigDir}/aggregationLogic.pig</script>
        <param>csvFilesDir=${csvFilesDir}</param>
        <param>tbValidQuerysOutputPath=${tbValidQuerysOutputPath}</param>
        <param>tbCacheDataPath=${tbCacheDataPath}</param>
        <param>currDate=${date}</param>
        <param>udfJarPath=${nameNode}${wfPath}/lib</param>
        <param>parallel=150</param>
      </pig>
    <ok to="loadDataToDB"/>
    <error to="fail"/>
</action>   
<kill name="fail">
    <message>WF Failure, 'wf:lastErrorNode()' failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
</kill>
<end name="end"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T19:44:47.650

当我们**并行运行三个 pig 操作并且其中一个失败**时，我们遇到了同样的错误。该消息错误是工作流意外停止的结果，因为一个操作失败，工作流已停止，而其他操作正在尝试继续。**您必须查看状态为*ERROR***的失败操作以了解发生了什么，不要查看状态为 KILLED 的操作

# sql - 创建脚本通过sql中的多个表查找cateID

> ID：14979679
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:22.773
> 
> 标签：sql, sql-server, tsql, loops

我有 3 张桌子。我正在尝试找出`category ID`产品的位置，以便它位于我们的网站上。有2个级别的类别。

第一个表是`products`并且它`ID`与产品相关联。

第一张表：`Product`

```
Product     PrimaryCateID
Tennis Ball         6 
```

第二张表：`Group`

```
GroupID     Group       CateID      
1       Football        8   
2           Basketball      9   
3       Snooker         10
4       Tennis          11 
```

第三张表：`SubGroup`

```
GroupID     Subgroup        CateID
4       Equipment       6
4       Area            7 
```

我正在尝试创建一个脚本来查找`Category`网球将出现在网站上的内容。

所以看看桌子，网球有一个`PrimaryCateID`6 应该出现在`Equipment`小组级别下的网站上。

如何创建脚本以遍历所有表（2 个组表）以查找`primaryCateID`分配给产品的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:42:00.667

```
SELECT
    [Group].[GroupID],
    [Group].[Group]
FROM
    Product
    INNER JOIN SubGroup ON Product.PrimaryCateID = SubGroup.CateID
    INNER JOIN [Group] ON SubGroup.GroupID = [Group].GroupID
WHERE
    Product.Product = 'Tennis Ball' 
```

# javascript - Jquery：未捕获 RangeError：超出最大调用堆栈大小

> ID：14979682
> 
> 赞同：1
> 
> 时间：2013-02-20T12:17:28.553
> 
> 标签：javascript, jquery

这是我的javascript。在我的合作伙伴执行 Git Pull 之前，它运行良好。单击提示会加载精美的框。负载现在不起作用。

```
Game = {

loadLevel: function(levelNum) {
    $("#level").load("/level/" + levelNum + "/", function() {

        // disable all hints except the first
        $("#level .hint:not(:first)").prop('disabled', true);

        // clicking a hint displays the hint
        $("#level .hint").each(function(index, el) {
            $(el).fancybox({
                href : $(el).attr("data-url"),
                type : 'ajax',
            });
        });

        // enable next hint when clicking on a hint
        $("#level .hint").on("click", function() {
            $(this).next().prop('disabled', false);
        });

        // if answer is correct load next level
        $("#answer").on("click", function() {
            $.get("/answer/" + levelNum + "/", {
                guess : $('.guess').val()
            }, function(answer) {
                console.log(answer);
                if (answer) {
                    Game.loadLevel(levelNum+1);
                }
            });
        });
    });
},

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:43:13.723

从错误消息中，听起来您的合作伙伴的代码在某处有一个无限循环的递归调用，或者调用了太多深入的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:06:06.460

试试这个：

```
 loadLevel: function(levelNum) {
   if (levelNum > 5) return;
   $("#level").load("/level/" + levelNum + "/", function() { 
```

我认为问题可能出在此处-但可能出在您未显示的代码中：

```
 Game.loadLevel(levelNum+1); 
```

这将递归，但没有办法阻止它。

# php - 我可以在 Facebook 应用程序身份验证后将变量传递给回调 url

> ID：14979683
> 
> 赞同：3
> 
> 时间：2013-02-20T12:17:28.953
> 
> 标签：php, facebook, hybridauth

我正在使用[hybridauth](http://hybridauth.sourceforge.net/)通过 facebook 将用户登录到我的 php 站点。

```
$hybridauth = new Hybrid_Auth( $config );
$facebook = $hybridauth->authenticate( "Facebook" );

$facebook_user_profile = $facebook->getUserProfile(); 
```

（`$config`包含我的应用程序的 id 和密钥）

这一切都很好，但是我想在返回到回调 url 时根据他们登录的页面重定向用户，以便我可以在登录后将他们返回到这个位置。

有没有办法发送带有身份验证的自定义变量（例如 url 甚至是简单的 id），以便我可以在流程的另一端读取它们并知道身份验证请求的发起位置。

这是可能的，还是我叫错了树？

如果有人知道如何使用混合来做到这一点，那么额外的荣誉，但任何让我走上正轨的建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T07:59:53.123

每当使用服务器端或客户端登录时，最终登陆将发生在 FB 登录对话框 URL 上。

[请参阅FB 登录架构](http://developers.facebook.com/docs/concepts/login/login-architecture/)中的服务器端登录以了解流程。

登录网址看起来像

```
https://www.facebook.com/dialog/oauth?
client_id=YOUR_APP_ID&
redirect_uri=YOUR_REDIRECT_URI&
state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

在这里，您可以为参数提及任何 url，`redirect_url`在登录流程之后，Facebook 将尝试重定向到指定的 URL。您指定的 URL 必须是与您的应用程序设置中指定的具有相同基本域的 URL。

此外，如果您需要保留登录后可以使用的任何额外数据，您可以使用`state`参数。您为此参数提供的值将不作任何更改地返回。

我希望如果您搜索 HybridAuth 代码，您可以找到需要传递这些详细信息的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:04:06.750

我可以想到两个简单的选择：

**GET 参数：** 将自定义变量作为 GET 参数嵌入到回调 URL 中。（不要忘记对数据进行 URL 编码）

**会话：** 在启动认证方法之前，在用户的会话中设置自定义变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T18:31:28.657

确保您已`redirect_url`通过`$config`.

或者您可以在设置会话和 cookie 后`header()`在您的函数中使用 php 。`login()`例如：

```
header("Location: http://www.example.com/some/where/else"); /* Redirect */ 
```

希望它会帮助你。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-07T07:18:12.683

Facebook 建议开发者使用会话变量。该`state`参数为 CSRF 保留/专用

[https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/#token](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/#token)

# maven-2 - Maven 2 将 jar 导出到单独的目录

> ID：14979688
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:39.637
> 
> 标签：maven-2

我需要将所有编译的类文件作为 jar 导出到本地测试服务器的目录中。我想让 Maven 自动执行此操作。

```
<!-- Build instructions -->
<build>
    <finalName>${project.artifactId}</finalName>
    <defaultGoal>compile package</defaultGoal>
    <sourceDirectory>${basedir}/src/</sourceDirectory>
    <outputDirectory>/home/...</outputDirectory> <!--only class files go here, not the jar-->
    <resources>
        <resource>
            <includes>
                <include>plugin.yml</include>
            </includes>
            <directory>${basedir}</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <executions>
                <execution>
                    <id>attach-javadocs</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

为了构建，我首先清理然后通过 IntelliJ 的 Maven 插件打包。当我打包时，我希望它将 jarfile 打包到我的测试服务器，这样我就不必在每次构建后手动移动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:38:52.027

您需要配置 maven-jar-plugin 并根据您的要求配置其 outputDirectory，您可以在此链接上查看详细信息。 [http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:33:58.533

用于`Maven Ant plugin`在特定目标之后自定义代码：

*   [在 Maven 中使用 Ant](http://maven.apache.org/guides/mini/guide-using-ant.html)

*   [蚂蚁科普特任务](http://ant.apache.org/manual/Tasks/copy.html)

# javascript - 如何使用javascript检查是否有任何div具有特定类的内部div说'xyz'？

> ID：14979690
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:46.853
> 
> 标签：javascript, html

```
<div class="abc">
  <a><img></a>
  <h4></h4>
  <div class="xyz">
    <a href="google.com">Hello</a>
  </div>
</div> 
```

在上面的 html 代码中，我如何检查`div`有类`abc`是否`div`有类`xyz`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:21:29.090

你可以简单地这样做：

```
var list = document.querySelectorAll('div.abc div.xyz');
if (1 == list.length) {
    alert("found");
} 
```

这是一个演示：http: [//jsfiddle.net/3xQ5X/](http://jsfiddle.net/3xQ5X/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:25:42.147

使用 JQuery：

```
$("div.abc").has("div.xyz"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:26:43.837

尝试这样的事情：让你的父 div 像 abc 这样的 id。

```
var v =  document.getElementById('abc');
for(var i in v.children)
{
 if( v.children[i].nodeName == 'DIV')//this will tell if the parent div has children divs
 {
  console.log(v.children[i].className == 'xyz');//this will be true if the child div has a class named xyz.
 }
} 
```

还记得根据您的要求修改此脚本。我的意思是你可以给你想要遍历的 div 一个特定的类来代替 id 。要选择包含某个特定类的所有 div，请使用此[链接](https://stackoverflow.com/questions/5149522/selecting-a-div-by-classname)的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:44:02.800

这个脚本将做必要的事情。

```
<script type="text/javascript">
$(document).ready(function(){

    if($("div.abc").children('div').hasClass("xyz"))
    {
        alert("found");
    }

});
</script> 
```

# c# - 以最小的努力将用户控件绑定到对象比例

> ID：14979691
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:46.597
> 
> 标签：c#, wpf, xaml, binding, user-controls

我有用户控制：

```
<UserControl>
    <TextBox Name="TB1"/>
    <TextBox Name="TB2"/>
</UserControl> 
```

后面的代码：

```
public partial class MyControl : UserControl
{
  public TwoStrings TsObj { get; set; }
  public MyControl()
  {
      InitializeComponent();
  }
} 
```

在哪里

```
public class TwoStrings
{
    string S1 { get; set; }
    string S2 { get; set; }
} 
```

如何以最少的代码更改将 TsObj.S1 绑定到 TB1.Text 和 TsObj.S2 到 TB2.Text？不应更改 TwoStrings。对象的更新应该反映在控制上。请提供代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:25:36.990

互联网上有很多关于 wpf/silverlight 数据绑定的资源，即使在 stackoverflow 中也是如此。但长话短说，你可以简单地这样做：

```
<UserControl>
  <TextBox Name="TB1" Text="{Binding S1}" />
  <TextBox Name="TB2" Text="{Binding S2}"/>
</UserControl> 
```

```
public partial class MyControl : UserControl
{
    public TwoStrings TsObj { get; set; }
    public MyControl()
    {
      InitializeComponent();

      this.DataContext = TsObj = new TwoStrings();
    }
} 
```

**编辑：**请注意，如果您通过 TwoStrings 实例中的代码更改属性，这将不会反映在文本框中，因为您需要`INotifyPropertyChanged`在 TwoStrings （这是 MVVM 模式中的 ViewModel - VM）中实现接口以获得两种方式数据绑定。否则，您只能从文本框中获得一种方式数据绑定到 datacontext (TwoString) 上的属性

# terminal - 如何删除 Mac 终端中的每个 N:th 文件？

> ID：14979692
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:46.737
> 
> 标签：terminal

如果已经回答了这个问题，我真的很抱歉 - 我找不到它。

我有一个大约有一个目录。35000 个文件。每个文件有两个副本。它们都是按顺序命名的，如下所示：

0000001、0000002 等

在上面的示例中，原始文件将命名为 1、4、7、10 等。

如何删除除原件以外的所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:47:14.240

据我了解，Mac 终端使用 bash 作为外壳。以下 shell 命令将删除您想要的文件（除 1、4、7、10 等之外的所有文件）：我假设文件编号为 000number.ext

```
shopt -s extglob; for file in [0-9]*; do number=${file%%.ext}; number=${number##+(0)}; if ((number%3 != 1)); then rm $file; fi; done 
```

一些评论：`${file%%.ext}`使用特殊的 bash 语法从文件中删除扩展名以从字符串中删除后缀。如果您的文件没有扩展名，则应删除此命令。

`${number##+(0)}`从数字中删除前导零（否则数字将被外壳视为八进制）。这需要设置 extglob 选项（因为`shopt -s extglob`在主脚本之前）。

`((number%3 != 1))`仅对数字 1、4、7、10 为真（除以 3 时余数为 1）。

我建议您先检查 using`echo`而不是`rm`在使用 rm 运行它之前检查以确保一切都按预期进行。

# javascript - 将表单转换为大写的 JavaScript 函数

> ID：14979693
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:48.810
> 
> 标签：javascript, addeventlistener, getelementsbytagname

我有大约 20 页的表格，我需要将每页上的所有输入转换为大写。我想知道是否有可能构建一个 JavaScript 函数，我可以将它复制/粘贴到每个页面上，而不必在每个页面上的每个输入上单独进行。

也许使用 getElementsByTagName() 和 addEventLister() 和 toUpperCase()。

像这样的东西会起作用吗？

PS。仅在浏览器将信息发送回服务器之前，使用 CSS 才有效，所以就不行了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:32:16.257

这样的事情应该让你开始：

```
var inputElements = document.querySelectorAll('input, select, textarea');

for (var i = 0, l = inputElements.length; i < l; i++) {
    if (inputElements[i].tagName == 'SELECT') {
        inputElements[i].options[inputElements[i].selectedIndex].value = inputElements[i].options[inputElements[i].selectedIndex].value.toUpperCase();
    } else {
        inputElements[i].value = inputElements[i].value.toUpperCase();
    }
} 
```

尽管您应该**真正**重新考虑这一点，并在服务器端进行。

演示：http: [//jsfiddle.net/ZgrqA/](http://jsfiddle.net/ZgrqA/)

# jekyll - 在 jekyll 中显示值的集合

> ID：14979694
> 
> 赞同：0
> 
> 时间：2013-02-20T12:17:50.607
> 
> 标签：jekyll, liquid

是否可以在 jekyll 中有一组值，然后将它们格式化为表格？

我在我的 .md 文件中尝试了这样的事情：

```
---
layout: tutorial
title: Jekyll
reqs:
 - name: names here
   desc: description here
   value: value
 - name: names here
   desc: description here
   value: value
--- 
```

在我的教程布局中，我有这个：

```
---
layout: home
---

{% for item in page.reqs %}
  {{ item.name }}
  {{ item.desc }}
  {{ item.value }}
{% endfor %} 
```

该表的 html 代码已被删除。问题是我的 for 循环什么也没打印。除了从其他布局继承的内容外，该页面为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:52:42.867

看起来像一个 YAML 问题。您正在混淆数组和字典语法。尝试这样的事情：

```
---
layout: tutorial
title: Jekyll
reqs:
 - item1:
     name: names here
     desc: description here
     value: value
 - item2:
     name: names here
     desc: description here
     value: value
--- 
```

现在，您的 for 循环正在遍历一个字典数组 ( `item1, item2...`)，您可以在输出中使用其值。

# c# - Rhino-etl/C# 数据映射问题

> ID：14979695
> 
> 赞同：2
> 
> 时间：2013-02-20T12:17:53.607
> 
> 标签：c#, sql, rhino-etl

我正在尝试从一个数据库中检索数据并将其插入另一个数据库，我正在使用 Rhino-etl 在 C# 应用程序中执行数据映射。目标数据库位于服务器上，源数据库位于我的本地计算机上。每次我运行程序时，它都会返回以下错误...

“执行操作失败...” “将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。”

这个问题显然与日期字段有关。

如果我从另一台机器上运行这段代码，我不会遇到这个问题。我检查了本地和数据库服务器（以及数据库）的语言，查看了区域设置，甚至在插入日期字段值之前将它们转换为“dd-MMM-yyyy”到目标数据库。有什么建议么？

# php - PHP多线程/多http请求

> ID：14979697
> 
> 赞同：0
> 
> 时间：2013-02-20T12:18:19.217
> 
> 标签：php, multithreading, apache, http, shell

我需要创建一个脚本，通过几千个网站获取数据，例如标题、ips、响应代码以及其他一些用于指纹识别的数据（大学作业）。

如果脚本需要通过所有数千个网站，多线程或多个 http 请求如何工作，这将需要很长时间。

任何人都可以分享他们的知识吗？

谢谢

# java - Java Swing 错误

> ID：14979700
> 
> 赞同：3
> 
> 时间：2013-02-20T12:18:22.867
> 
> 标签：java, swing

我得到了一个实用的任务，它带有一个 ImageEditor 文件，如果需要我可以显示它，但是它很长，所以我没有在这里发布它。

我必须实现一个保存链接，并获得了我存储在单独的类文件中的代码：

```
public class SaveAction extends AbstractAction{
    public SaveAction(String text, ImageIcon icon, String desc, Integer mnemonic){
        super(text, icon);
        putValue(SHORT_DESCRIPTION, desc);
        putValue(MNEMONIC_KEY, mnemonic);
    }

    public void actionPerformed(ActionEvent e){
       // Just print out a message for now.
       System.out.println("Save");
   }
} 
```

然后在主类中创建一个实例：

```
Action saveAction = new SaveAction(
    "Save", new ImageIcon("img/save.png"), "Save the image", KeyEvent.VK_S); 
```

但是它出现了错误：

> 构造函数 SaveAction(String, ImageIcon, String, int) 未定义。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:21:48.697

您的构造函数为：

```
public SaveAction(String text, ImageIcon icon, String desc, Integer mnemonic) 
```

你打电话给：

```
new SaveAction("Save", new ImageIcon("img/save.png"), "Save the image",KeyEvent.VK_S); 
```

错误是由于这个：

`KeyEvent.VK_S`必须是一个`int`而不是`Integer`，你有`Integer`作为最后一个论点。因此，请尝试更改它或将其转换为`new Integer(KeyEvent.VK_S)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:35:32.980

您的构造函数需要一个 Integer 对象，而不是 int 原语。与其他解决方案相比，我建议您使用`Integer.valueOf`而不是`new Integer`，尤其是因为 KeyEvent.VK_S 将始终表示相同的 int 值：

```
Action saveAction = new SaveAction("Save", new ImageIcon("img/save.png"), "Save the image", Integer.valueOf(KeyEvent.VK_S))); 
```

有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/2974561/new-integer-vs-valueof)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:27:20.187

```
Action saveAction = new SaveAction("Save", new ImageIcon("img/save.png"), "Save the image",
KeyEvent.VK_S); 
```

是您调用该方法的形式，但是，请注意您的构造函数：

```
public SaveAction(String text, ImageIcon icon, String desc, Integer mnemonic) 
```

KeyEvent.VK_S 返回一个原始类型的 int。您的构造函数需要一个类似于 int 的类 Integer，但正如您所见，它不是原始类型，它是一个具有方法和属性的类。那么你可以像这样调用你的构造函数：

```
Action saveAction = new SaveAction("Save", new ImageIcon("img/save.png"), "Save the image",
    new Integer(KeyEvent.VK_S))); 
```

# java - java - 没有端点异常

> ID：14979707
> 
> 赞同：1
> 
> 时间：2013-02-20T12:18:42.033
> 
> 标签：java, web-services, apache, axis, endpoint

我正在从 java eclipse 调用来自 asp.net 的 Web 服务。

我呼叫的地址以 asmx 结尾：

```
http://mgn111:8011/MDP_InsuredDetails_WS/InsuredDetails.asmx 
```

当我将请求发送到此服务中的方法时，我的日志中出现此错误：

```
19/02/13 12:13:05 ERROR [xxxService]: ServiceProxy Update exception: 'No endpoint'
19/02/13 12:13:05 ERROR [xxxrvice]: ServiceProxy Update exception (toString): 'No 
```

这是代码：

```
InsuredDetailsLocator locator_MDP =new InsuredDetailsLocator();
locator_MDP.setInsuredDetailsSoapEndpointAddress("http: //mgnt184:8056/MDP_InsuredDetails_WS/InsuredDetails.asmx");
InsuredDetailsSoapStub service = new InsuredDetailsSoapStub(); 
UpdateInsuredDetails_Input request_MDP =new UpdateInsuredDetails_Input();
request_MDP.setSystemName(urlProps.getProperty(MDP_USERNAME));
request_MDP.setSystemPassword(urlProps.getProperty(MDP_PASSWORD));
request_MDP.setMS_ZIHUY(insuree.getMsZihuy());
request_MDP.setKOD_CHEVRA(insuree.getKodChevra());
request_MDP.setFAMILY_NAME(insuree.getFamilyName());
request_MDP.setFIRST_NAME(insuree.getFirstName());
request_MDP.setKOD_MIN(insuree.getKodMin());
request_MDP.setSMOKING(insuree.getSmoking());
request_MDP.setCURRENT_OCCUPATION(insuree.getCurrOcupation());
request_MDP.setINTERNET_INDICATOR(insuree.getInternetInd());
request_MDP.setMS_SOCHEN_MEVUTACH_VIP(0);
if(insuree.getSemelYeshuv()!=null)
  request_MDP.setSEMEL_YESHUV(insuree.getSemelYeshuv().toString()); 
if(insuree.getShemYeshuv()!=null)
  request_MDP.setSHEM_YESHUV(insuree.getShemYeshuv().toString());
request_MDP.setSEMEL_RECHOV(insuree.getSemelRechov());
request_MDP.setSHEM_RECHOV(insuree.getShemRechov());

//I get here the exception :No endpoint 
//calling the method:
UpdateInsuredDetails_Output response_MDP= service.recieveMDMDataInsuredDetails (request_MDP); 
```

# php - 从 strtotime() 获取错误的周数

> ID：14979713
> 
> 赞同：-3
> 
> 时间：2013-02-20T12:19:02.027
> 
> 标签：php, date, strtotime

你好我的极客伙伴！

我有这个日期列表：

```
20-02-2013
19-02-2013
18-02-2013
17-02-2013
16-02-2013
15-02-2013
14-02-2013
13-02-2013 
```

当我对这些日期使用 strtotime() 时，我得到

```
Thursday
Wednesday
Tuesday
Monday
Saturday
Friday
Thursday 
```

出于某种原因，我今天的日期是星期四。此外，星期六和星期一之间缺少星期日。

我这样做

`$weekday = date('D', strtotime("20-02-2013"));`

```
echo $weekday; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:29:33.457

检查您的时区是否正确，这是在 php.ini 中设置的，或者可以使用函数声明：

date_default_timezone_set()

请参阅[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)。

此外，这里是从 PHP 的 strtotime() 文档中获取的注释。

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

确保为正确的格式使用正确的分隔符。

见[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:41:05.450

所以，我发现前几天我发布了错误的代码。对此感到抱歉。

我使用的代码是这个

`$weekDay = date("l", strtotime("20-02-13"));`

```
echo $weekDay; 
```

这在星期四返回。我不高兴，因为那个日期是星期三。我发现，我必须将 20-02-2013 作为参数放入`strtotime()`，而不是 20-02-13。

这解决了一切！

# php - 在列表产品 magento 上获取颜色

> ID：14979714
> 
> 赞同：0
> 
> 时间：2013-02-20T12:19:04.967
> 
> 标签：php, magento

我需要少量帮助才能开始开发脚本以获取 Magento 中列表产品的颜色标签。我不想在点击时切换图片，我只是想表明该特定产品有不止一种颜色可供选择。

好的，我得到了最终的脚本，但我无法得到下面图片的结果

```
<a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image">
    <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(155); ?>" width="155" height="155" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
</a> 
```

获取列表中相关图像的脚本。

```
<?php $_images = Mage::getModel('catalog/product')->load($_product->getId())->getMediaGalleryImages();?> 
<?php if($_images){?> 
<?php     $i=0; foreach($_images as $_image){ $i++;?> 
<a href="#"> 
    <img src="<?=$this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(200, 130); ?>” width="200" height="130" alt="<?=$this->htmlEscape($_image->getLabel());?>" title="<?=$this->htmlEscape($_image->getLabel());?>" /> 
</a>
<?php     }?>
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:55:03.340

问题中的脚本运行良好，只是不是爆炸它的正确位置。

# php - PHP & MySQL 中的每用户标签云

> ID：14979715
> 
> 赞同：1
> 
> 时间：2013-02-20T12:19:04.913
> 
> 标签：php, mysql

我希望在我正在制作的网站上实现每用户标签/兴趣云功能。

每个用户都有一个个人资料页面，并且在该页面上将显示他们预先选择的兴趣的标签云。每个用户都可以键入他们的兴趣以逗号分隔，如果之前使用过此类标签，则提供建议，如果不存在则创建。兴趣将是诸如音乐流派，爱好等之类的东西。

我还想添加基本功能，例如比较用户标签云（共享标签）以根据他们的云找到“兼容”的用户。

我可以使用数据库后勤方面的帮助来实现这一点。我了解简单的数据库设计，但我无法理解上述设计。

目前数据库是一个单一的表，带有 ID/用户名/密码/验证（最后一个用于电子邮件验证的密钥）。

我为标签云数据库提出的唯一想法是两个表 - 一个称为带有 tagid 和 tagname 字段的标签，另一个是带有 tagid 和 userid 字段的 users_tags，以及用户拥有的每个标签的条目。但是我不确定这是否是最佳做法。

希望有人能给我一些指导 - 在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:48:16.233

拥有一张带有 userid 和 tagid 的表听起来只是最好的途径。

要找到您提到的“兼容”用户，您可以运行类似于

```
SELECT 
   ut.userid, COUNT(*) ct 
FROM 
   user_tags ut 
WHERE 
   ut.tagid IN (SELECT uta.tagid FROM user_tags uta WHERE uta.userid=24 ) 
GROUP BY ut.userid ORDER BY ct DESC; 
```

请注意，上面的查询也将返回原始用户，但它比从查询中删除他要高效得多。

# java - JComponent 未注册

> ID：14979722
> 
> 赞同：0
> 
> 时间：2013-02-20T12:19:22.680
> 
> 标签：java, swing, mouseevent, jcomponent

所以我有以下课程。我过度简化了代码，因为放置 500 多行代码不是一种选择。它基本上是一个非常花哨的正方形：

```
public class ModuleGui extends JComponent implements ElementInterface {

private String name;

private Rectangle2D s = new Rectangle2D.Double();
private Rectangle2D[] points;
private int resizeSize = 10;

private final ShapeResizeHandler shapeResizeHandler = new ShapeResizeHandler();

public ModuleGui(int x, int y){

    this.addMouseListener(shapeResizeHandler);
    this.addMouseMotionListener(shapeResizeHandler);

    this.x = x;
    this.x = y;

    points = new Rectangle2D[2];
    points[0] = new Rectangle2D.Double(x,y,1,1);
    points[1] = new Rectangle2D.Double(x + width, y + height, resizeSize, resizeSize);

    this.name = new String("Gate" + Integer.toString(namingCounter++));
}

public void paintComponent(Graphics g){
    super.paintComponent(g);

    Graphics2D g2d = (Graphics2D) g;

    g2d.fill(points[1]);

    //Set the main rectangle, fill it and draw it
    s.setRect(points[0].getX(), points[0].getY(),
            Math.abs(points[1].getCenterX() - points[0].getCenterX()),
            Math.abs(points[1].getCenterY() - points[0].getCenterY()));
    g2d.setColor(Color.WHITE);
    g2d.fill(s);
    g2d.setColor(Color.BLACK);
    g2d.draw(s);
    //Main rectangle draw end

    //Add the name and the & symbol
    g2d.drawString(this.name, (int) (s.getCenterX()), (int) (s.getY() + this.height/10));
}

private class ShapeResizeHandler extends MouseAdapter{
    public void mousePressed(MouseEvent e){
        System.out.println("Funny");
    }

    public void mouseReleased(){
        //Do more stuff
    }

    public void mouseDragged(MouseEvent e){
        //Do Stuff
        repaint();
    }
}
    } 
```

现在我在 JPanel 中有这个 JComponent ..但我似乎没有捕捉到任何鼠标事件。鼠标事件显示在 JPanel 中，但不在 JComponent 中。我试图制作一个简单的鼠标监听器来打印一些东西，但同样的事情发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:44:37.737

确保您的组件可见并且具有非零尺寸。这是对我有用的代码：

```
public class MouseTest extends JComponent {
    public MouseTest () {
        addMouseListener (new MouseAdapter () {
            @Override
            public void mousePressed (MouseEvent e) {
                System.out.println ("Mouse pressed");
                e.consume();
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension (320, 240);
    }

    @Override
    public void paint(Graphics g) {
        g.setColor (Color.cyan);
        g.fillRect (getX (), getY (), getWidth (), getHeight ());
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame ("Mouse Test");
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.getContentPane ().setLayout (new BorderLayout ());
        frame.getContentPane ().add (new MouseTest (), BorderLayout.CENTER);
        frame.pack ();
        frame.setVisible (true);
    }
} 
```

# android - 使用 SharedPreferences 存储用户密码

> ID：14979725
> 
> 赞同：0
> 
> 时间：2013-02-20T12:19:37.170
> 
> 标签：android, passwords, sharedpreferences

所以我需要我的简单应用程序来设置密码。默认密码为“admin”，用户可以根据需要更改。但我在更换部分有问题。我不知道为什么，但我为此所做的活动总是强制关闭。这是我第一次使用 SharedPreferences。我不知道我是否正确使用了它。请帮我。这是我的代码：

```
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class ChangePass extends Activity {

    @SuppressLint("CommitPrefEdits")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.change_pass);

        final SharedPreferences settings = ChangePass.this.getSharedPreferences("pass", 0);
        final SharedPreferences.Editor editor = settings.edit();

        final EditText CurPass;
        final EditText NewPass1;
        final EditText NewPass2;
        Button BtnSubmit;
        final TextView errorMsg;

        CurPass = (EditText)this.findViewById(R.id.curPW);
        NewPass1 = (EditText)this.findViewById(R.id.newPW1);
        NewPass2 = (EditText)this.findViewById(R.id.newPW2);
        BtnSubmit = (Button)this.findViewById(R.id.btnSubmit);
        errorMsg = (Button)this.findViewById(R.id.errorTxt);

        BtnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                String current = CurPass.getText().toString().trim();
                String new1 = NewPass1.getText().toString().trim();
                String new2 = NewPass2.getText().toString().trim();

                String CurrentPW = settings.getString("Password", "admin");

                if (CurrentPW.equals(current)) {
                    if (new1.equals(new2)) {

                          editor.putString("Password", new1).apply();

                            Toast.makeText(getApplicationContext(), "Password successfully changed!",
                            Toast.LENGTH_LONG).show();
                            CurPass.setText("");
                            NewPass1.setText("");
                            NewPass2.setText("");
                    }
                    else {
                        errorMsg.setText("ERROR: Passwords did not match.");
                    }
                }
                else {
                    errorMsg.setText("ERROR: Wrong password.");
                }    
            }
        });
    } 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/new_bg_pass" >

    <EditText
        android:id="@+id/curPW"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="144dp"
        android:ems="10"
        android:inputType="textPassword" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/newPW1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/curPW"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="57dp"
        android:ems="10"
        android:inputType="textPassword" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/newPW1"
        android:layout_alignLeft="@+id/textView1"
        android:text="New Password:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/newPW2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/newPW1"
        android:layout_below="@+id/newPW1"
        android:layout_marginTop="35dp"
        android:ems="10"
        android:inputType="textPassword" />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/newPW2"
        android:layout_alignLeft="@+id/TextView01"
        android:text="Retype New Password:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/newPW1"
        android:layout_marginRight="57dp"
        android:layout_toLeftOf="@+id/curPW"
        android:text="Current Password:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/btnSubmit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/newPW2"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:text="Submit" />

    <TextView
        android:id="@+id/errorTxt"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="34dp"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#FF0000" />

</RelativeLayout> 
```

这是来自 LogCat 的：

```
02-20 12:28:58.156: E/AndroidRuntime(338): FATAL EXCEPTION: main
02-20 12:28:58.156: E/AndroidRuntime(338): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.login/com.login.ChangePass}: java.lang.ClassCastException: android.widget.TextView
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.os.Looper.loop(Looper.java:123)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-20 12:28:58.156: E/AndroidRuntime(338):  at java.lang.reflect.Method.invokeNative(Native Method)
02-20 12:28:58.156: E/AndroidRuntime(338):  at java.lang.reflect.Method.invoke(Method.java:507)
02-20 12:28:58.156: E/AndroidRuntime(338):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-20 12:28:58.156: E/AndroidRuntime(338):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-20 12:28:58.156: E/AndroidRuntime(338):  at dalvik.system.NativeStart.main(Native Method)
02-20 12:28:58.156: E/AndroidRuntime(338): Caused by: java.lang.ClassCastException: android.widget.TextView
02-20 12:28:58.156: E/AndroidRuntime(338):  at com.login.ChangePass.onCreate(ChangePass.java:35)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-20 12:28:58.156: E/AndroidRuntime(338):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-20 12:28:58.156: E/AndroidRuntime(338):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:39:56.850

您已将 TextView 定义为

```
 final TextView errorMsg; 
```

而您正试图将其投射到按钮中：

```
 errorMsg = (Button)this.findViewById(R.id.errorTxt); 
```

此外，您应该将其转换如下：

```
 errorMsg = (TextView)this.findViewById(R.id.errorTxt); 
```

**编辑：**

创建共享首选项：

```
 SharedPreferences sp=getSharedPreferences("Login", 0);
     SharedPreferences.Editor Ed=sp.edit();
     Ed.putString("Psw",Value);   
     Ed.commit(); 
```

从共享偏好中获取价值：

```
 SharedPreferences sp1=this.getSharedPreferences("Login",null);
     String pass = sp1.getString("Psw", null); 
```

更新共享偏好值：

```
 if (pass.equals(current)) {
          Ed.putString("Psw", new1);
          Ed.commit();     
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:37:49.633

清单可能有一些问题，它应该看起来更像：

```
<activity android:name=".start" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name= ".Main">
</activity> 
```

# jquery - CSS颜色可见性问题

> ID：14979727
> 
> 赞同：2
> 
> 时间：2013-02-20T12:19:46.753
> 
> 标签：jquery, css, visibility, rgba

这似乎是一个非常奇怪的问题，但我有以下问题：

![在此处输入图像描述](../Images/c31345fc072a02efcb7f30064ceac43a.png)

如您所见，当图像颜色较深时，分页显示不清晰。

我想根据下面的图像颜色更改分页颜色。

这可能与 rgb/css 吗？交替使用Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:23:19.670

例如，您可以使用 50% 的 rgba：

```
element {
color: rgba(255,255,255,0.5);
} 
```

这将使字体变白并将不透明度设置为 50%。您可以通过以下方式获得相同的效果：

```
element {
opacity: 0.5;
color: rgb(255,255,255);
} 
```

请注意，并非所有浏览器都支持第一种方法。

为了防止分页隐藏在白色背景上，您可以使用文本阴影：

```
element {
text-shadow: 0px 1px 3px #000;
} 
```

（见[这里](http://www.w3schools.com/cssref/css3_pr_text-shadow.asp)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:34:42.137

如果您可以使用图像存储值，则可以使用`data-*`-attribute：

```
// images that are dark gets the new attribute
<img src="" alt="">
<img src="" alt="" data-invert="true">

// let's say this is you pagination
<nav id="pagination">
    // your pagination elements
</nav> 
```

比你可以更新你的幻灯片功能（这只是伪代码）：

```
function slide() {
    // lets say you know the current image and there's an array of images
    var current = 1;
    if ('true' == images.eq(current).attr('data-invert') {
        $('pagination').addClass('invert');
    } else {
        $('pagination').removeClass('invert');
    }
} 
```

而且该课程`invert`具有更亮的配色方案，在较暗的图像上看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:00:52.920

我建议您采用不同的设计方法，而不是使用 JS。尝试添加`border`适用于所有背景的浅灰色阴影。看这个演示：

[http://jsfiddle.net/fqZf4/3/](http://jsfiddle.net/fqZf4/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:44:35.443

为您的文本添加灰色文本阴影。它将完美地工作。

# android - 如何为 Gingerbread 中的 Spinner 提供与 ICS 中相同的 UI

> ID：14979731
> 
> 赞同：0
> 
> 时间：2013-02-20T12:20:00.817
> 
> 标签：android, actionbarsherlock, android-spinner

我有一个新闻应用程序，它实现

1.  动作条夏洛克
2.  ViewPagerTabIndicator
3.  拉取刷新

我想使用Action Bard Sherlock中的Navigation Mode List来切换新闻源，但是带有view pager指示器的ViewPager似乎与ActionBarSherlock中的导航模式冲突；所以我在 ActionBarSherlock 中添加了我自己的微调器（自定义视图），但问题是它在**Gingerbread**中的 UI 看起来与 ActionBarSherlock 中内置导航的 UI 不同。

我的问题只是如何将 ABS 中的导航 UI 应用到 Spinner ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:28:49.447

我认为 ViewPagerIndicator 和 ActionBarSherlock 没有冲突，所以你应该再看看你的项目，看看是什么问题。

回答这个问题：虽然不推荐，但您可以使用 ActionBarSherlock`IcsSpinner`代替`Spinner`在 Gingerbread 设备上获得相同的外观。

# xaml - 应用程序在 Winrt 中启动屏幕后显示一段时间的灰屏

> ID：14979734
> 
> 赞同：0
> 
> 时间：2013-02-20T12:20:15.253
> 
> 标签：xaml, windows-runtime, winrt-xaml

我正在开发 winRT XAML 应用程序，在我的主页中我有一些大图像。当我启动应用程序时，它会在启动屏幕和主屏幕之间显示一段时间的空白屏幕。有什么解决办法吗？[我认为与Phonegap在启动画面后显示白屏的](https://stackoverflow.com/questions/13990396/phonegap-showing-white-screen-after-the-splash-screen-ios)问题相同- IOS ，但在我的情况下它在winRT中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:38:11.393

查找“扩展启动画面”。该技术基本上是让您的应用程序在纯色背景上显示初始屏幕图像，该图像看起来与 Windows shell 在启动应用程序时显示的相同。初始屏幕图像足够小，以至于当您的应用开始仅显示初始屏幕时 - 它会无缝显示，然后您可以在后台加载您的第一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:36:04.833

这听起来像是我过去将页面背景设置为图像时所经历的。图片加载并显示在页面上可能需要一些时间，因此您最终会得到几分之一秒的无样式页面。这就是这里发生的事情吗？如果是这样，请尝试减小图像的大小/质量，看看它是否有所作为。如果是这样，您的工作才刚刚开始，因为您试图在图像质量和文件大小之间找到一个可接受的折衷方案。

# javascript - Firebug Lite 无法在装有 iOS 6.1 的 iPhone 上的 Safari 中打开

> ID：14979735
> 
> 赞同：0
> 
> 时间：2013-02-20T12:20:17.623
> 
> 标签：javascript, debugging, firebug, firebug-lite

我没有运行 Firebug Lite。书签和脚本的包含都没有在装有 iOS 6 的 iPhone 上的 Safari 中打开 Firebug Lite。没有任何反应。

我如何让它运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:44:00.470

我已经尝试过了，它对我有用。

[http://osxdaily.com/2011/12/02/run-firebug-on-ipad-or-iphone/](http://osxdaily.com/2011/12/02/run-firebug-on-ipad-or-iphone/)

1.  在 iOS 中为 Safari 中的网页添加书签并将书签重命名为“Firebug”</p>

2.  选择并复制下面的 JavaScript 文本块

    javascript:(函数(F,i,r,e,b,u,g,L,I,T,E){if(F.getElementById(b))return;E=F[i+'NS']&&F. documentElement.namespaceURI;E=E?Fi+'S':Fi;Er;Er;Er;(Fe[0]||Fe[0]).appendChild(E);E=new%20Image;Er;})(document, 'createElement','setAttribute','getElementsByTagName','FirebugLite','4','firebug-lite.js','releases/lite/latest/skin/xp/sprite.png',' [http://web .archive.org/web/20171023043748/https://getfirebug.com/','#startOpened](http://web.archive.org/web/20171023043748/https://getfirebug.com/) ');

3.  现在编辑您创建的 Firebug 书签，并删除 URL，将其替换为您刚刚复制的 javascript

4.  点击“完成”，然后点击小书签在 iPad 上激活 Firebug Lite

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-28T03:30:48.193

这个 ine 在 6.1.2 的 Safari 上运行良好[http://thesimplesynthesis.com/post/firebug-on-iphone-ipad-android-and-other-devices/](http://thesimplesynthesis.com/post/firebug-on-iphone-ipad-android-and-other-devices/)

# mysql - 如何从由外键链接的两个不同表中查询

> ID：14979737
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:20:24.830
> 
> 标签：mysql, sql, select, join

![这是一个诊断表，我想查询诊断并计算它诊断的患者 ID 的数量。 所以它必须是一个诊断患者人数但下一张图片出现在投诉表部分中，其中查询必须仅针对某个月份](../Images/09b9a917c5f61458d270c52ae779703d.png)

![在此处输入图像描述](../Images/25b80eaca42c0ec8dd429f45a716f765.png)

这是一个诊断表，我想查询诊断并计算它诊断的患者 ID 的数量。所以它必须是一个诊断患者人数但下一张图片出现在投诉表部分中，其中查询必须仅针对某个月份

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:23:56.063

*我想*你需要通过两列连接两个表：`complaint_ID`和`patient_ID`

```
SELECT  a.diagnosis, COUNT(a.patient_ID) totalAmidtted
FROM    diagnosis a
        LEFT JOIN admitted b
            ON  a.complaint_ID = b.complaint_ID AND
                a.patient_ID = b.patient_ID
WHERE   b.date_time BETWEEN 'fromDate' AND 'toDate'
GROUP   BY a.diagnosis 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

*题外话：你是菲律宾人吧？特别是比萨亚`:D`*

# ruby - 记录上的 Rspec 存根方法调用

> ID：14979739
> 
> 赞同：1
> 
> 时间：2013-02-20T12:20:29.143
> 
> 标签：ruby, unit-testing, testing, rspec, tdd

我的测试用例如下：

```
 petition1 = Petition.create
    petition2 = Petition.create

    petition1.should_receive(:test_method).with(7).and_return(50.0)
    petition2.should_receive(:test_method).with(7).and_return(25.0)

    petition1.test_method(7) # => 50.0
    Petition.first.test_method(7) # => 0.0

    petition2.test_method(7) # => 25.0
    Petition.last.test_method(7) # => 0.0 
```

如何为直接从数据库检索的记录存根方法调用？

我在我的单元测试中迭代记录，我需要对某些记录进行方法调用以返回特定的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:54:14.260

这里的问题是（正如您所发现的）调用 find 方法将创建`Petition`. 为了解决这个问题，您可以自己存根 find 方法并返回您想要的对象：

```
let(:petition1) { Petition.create }
let(:petition2) { Petition.create }

it "does what I want" do
  Petition.stub(:first) { petition1 }
  Petition.stub(:last) { petition2 }
  petition1.should_receive(:test_method).with(7).and_return(50.0)
  petition2.should_receive(:test_method).with(7).and_return(25.0)
  # test code
end 
```

不幸的是，这将规范与您正在测试的任何方法的实现结合在一起。如果您使用其他方式获取请愿书，这可能会中断。一种更具弹性的方法可能会改用工厂，并创建具有适当属性的请愿书。

# ios - 在 arc 下释放 iOS 5 中的内存

> ID：14979742
> 
> 赞同：0
> 
> 时间：2013-02-20T12:20:43.620
> 
> 标签：ios, xcode, memory-leaks

我知道这个问题问了很多次，但我还没有找到解决方案。我的应用程序按照 a->b->c->d->b 的顺序在视图之间移动。这意味着从视图“d”我并不总是返回，并且需要跳转到视图“b”。问题是视图“c”和“d”的内存没有释放，并且在一些循环（b->c->d->b->c....）之后应用程序崩溃了。操作的顺序非常重要。我不得不提到，我使用模态 segue 在视图之间导航。我尝试过以多种方式释放内存：

1.  放入 DidRecieveMemoryWarning: _myProperty = nil;
2.  放入 ViewDidUnload: _myProperty = nil;
3.  将所有属性更改为弱。
4.  使用@autoreleasepool 包装代码。

没有任何帮助，应用程序在一段时间后崩溃，如何通过“强制”释放视图和内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T04:03:09.157

Objective-C（主要）使用引用计数内存模型。有手动引用计数和自动引用计数（ARC）。

**ARC 的工作原理**

如果您曾经使用过手动引用计数并运行过 clang 静态分析器工具，您会发现它在查找内存泄漏方面做得非常出色。这就是 ARC 背后的想法——如果分析器能够很好地发现泄漏，那么为什么不让它执行内存管理呢？

因此，分析是在编译时完成的，并且生成的代码使用保留和释放调用进行检测。这是 ARC 的基础及其出色的内存模型，在性能和易用性之间取得了良好的平衡。它在移动计算中特别有用，因为与垃圾收集不同，它不需要任何额外的 CPU 周期或电池消耗。

（注意：ARC 还引入了弱引用，这是一种在运行时将*悬空指针*归零的方法）。

使用 ARC 并不像垃圾收集那么简单——你仍然需要知道引用计数内存模型是如何工作的。可能会出现以下问题。

**保留周期**

内存泄漏的主要原因是保留周期。这就是对象 A 对对象 B 的引用，而对象 B 对对象 A 的引用的地方。例如，AirlineFlight 包含一名乘客，而乘客有一个 AirlineFlight -> 内存泄漏。

这在 Cocoa 中很常见。另一个例子是一个 ViewController 拥有一个视图，而这个 View 有一个委托，也就是 ViewController。听起来有点熟？

为了避免保留循环，其中一个对象必须不保留另一个。最常见的方法是将一个指定为父级，另一个指定为子级。父母保留孩子，但孩子不保留父母。例子：

**视图控制器**

```
@interface MyViewController

@property (nonatomic, strong) MyView* view

@end 
```

**看法**

```
@interface MyView

@property (nonatomic, assign) MyViewController* controller

@end 
```

保留周期现在被打破，内存泄漏将不再发生。

**悬空指针**

上面的例子不再有内存泄漏，但会导致另一个问题——悬空指针。视图控制器可能会消失，而视图仍然具有对控制器的引用。现在对控制器的任何调用都会导致崩溃。

有两种方法可以解决这个问题：

1.  在 dealloc 方法中消除对控制器的引用。. . 但可能只是

2.  使用弱引用，如下：

    ```
    @property (nonatomic, weak) MyViewController* controller 
    ```

iOS 5 及更高版本（或 OSX 10.7）有一个小的运行时实用程序，可以跟踪悬空指针并为您消除它们 - 这些被称为弱引用。

**寻找内存泄漏**

有几种方法。

*   使用 clang 静态分析器来检测保留周期。
*   使用仪器工具
*   我喜欢将日志语句放在我的控制器和其他关键类的 dealloc 方法中，以确保它们被释放。

**寻找悬空指针**

*   使用环境变量 NS_ZOMBIES_ENABLED 进行编译（或在 Xcode 中编辑 Scheme 并单击复选框，它将为您设置此参数）。

**自动释放池**

另一个可能发生的问题是在运行循环中分配了太多对象。. 要更正此问题，您可以在主池中创建另一个自动释放池。

```
@autoreleasepool
{

} 
```

*（在你的情况下，我认为这不是问题）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:27:36.703

**ARC**是为了不强制释放而让操作系统处理所有版本。您应该使用**xcode 工具**来了解您的应用程序正在使用多少内存。在我看来，你的内存膨胀了，所以最好检查一下正在使用多少内存，以及你可以做些什么来优化它，这样分配容量就会保持在可接受的范围内。（例如，在每个图像大小为 1Mb 的视图中加载 1000 张图像完全是浪费，并且可能会导致这种崩溃。这个例子是故意夸大的，所以你会明白的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T02:03:22.713

我也遇到过这个问题，但我正在为 OSX10.8 而不是 iOS 编写可可应用程序。我发现当我执行诸如显示新窗口然后一次又一次关闭之类的操作时，应用程序的内存使用量会一直增加。我每次看到的窗口似乎都是一个新窗口。10MB->20MB->30MB……最后直接双击.app文件，再次查看活动监视器。事实是它真的变得很正常。以发布模式运行的应用程序是相同的情况。所以我想如果你通过 Xcode Run 运行应用程序，ARC 不会在调试模式下立即释放内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T10:54:30.573

您是否使用过重的 png 图片？不久前我遇到了同样的问题，高度 x 宽度图像使用 RAM 的高度 x 宽度 x 4（因为它与 GPU 共享）。只有我的背景浪费了大约 120MB。如果是这种情况，请尝试重新调整图像尺寸。

# javascript - 拖动时沿固定点旋转

> ID：14979746
> 
> 赞同：0
> 
> 时间：2013-02-20T12:21:06.827
> 
> 标签：javascript, html, drag, kineticjs

是否可以使用 javascript 和 kinecticjs 库在 html5 中使用鼠标拖动沿固定点旋转特定形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:41:44.493

您可以使对象可拖动，并设置一个 dragBoundFunc。即[http://jsfiddle.net/bighostkim/7Q5Hd/](http://jsfiddle.net/bighostkim/7Q5Hd/)

```
dragBoundFunc: function (pos) {
    var pos = stage.getMousePosition();
    var xd = this.getX() - pos.x ; 
    var yd = this.getY() - pos.y ; 
    var radian = Math.atan2(yd, xd);
    this.setRotation(degree);

    return {
        x: this.getX(),
        y: this.getY()
    }
} 
```

# c# - 如何在 C# 中使用 SQL Server Compact 将数据库架构复制到另一个数据库？

> ID：14979750
> 
> 赞同：0
> 
> 时间：2013-02-20T12:21:10.637
> 
> 标签：c#, copy, schema, sql-server-ce

我想使用 C# 以编程方式将 SQL Server Compact 数据库（.sdf 文件）复制到另一个数据库（.sdf 文件）中。

只是没有数据的架构（我的意思是创建具有相同架构的空数据库）

可能吗？如果可能的话，请帮助我如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:00:45.283

准备一个空的（模板）数据库文件，并在需要时复制它。

# c# - 如何将单选按钮添加到菜单项？

> ID：14979753
> 
> 赞同：15
> 
> 时间：2013-02-20T12:21:18.957
> 
> 标签：c#, wpf, radio-button, menuitem

我想在我的菜单项中添加单选按钮。

我已经看到了一些人们将单选按钮作为菜单项的答案。但我希望我的菜单项有适当的单选按钮，可以在`Winforms`.

为了确保我不会得到与其他人相同的答案，这里是菜单项的单选按钮应该是什么样子的图片：

![在此处输入图像描述](../Images/f723d22acf476f19d84a077578b27879.png)

顺便说一句，我使用的是 C#，WPF。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-09T14:03:30.663

**编辑模板**

```
 <Window.Resources>        
    <Style x:Key="{x:Type MenuItem}" TargetType="MenuItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate  TargetType="{x:Type MenuItem}">
                    <Border x:Name="templateRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                        <Grid VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ContentPresenter x:Name="Icon" Content="{TemplateBinding Icon}" ContentSource="Icon" HorizontalAlignment="Center" Height="16" Margin="3" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center" Width="16"/>
                            <RadioButton Margin="3" IsChecked="{TemplateBinding IsChecked}" VerticalAlignment="Center" x:Name="GlyphPanel" Visibility="Collapsed"/>
                            <ContentPresenter ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.Column="1" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            <Popup x:Name="PART_Popup" AllowsTransparency="True" Focusable="False" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" Placement="Bottom">
                                <Border x:Name="SubMenuBorder" BorderBrush="#FF999999" BorderThickness="1" Background="#FFF0F0F0" Padding="2">
                                    <ScrollViewer x:Name="SubMenuScrollViewer" Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=SubMenuBorder}" Height="{Binding ActualHeight, ElementName=SubMenuBorder}" Width="{Binding ActualWidth, ElementName=SubMenuBorder}"/>
                                            </Canvas>
                                            <Rectangle Fill="#FFD7D7D7" HorizontalAlignment="Left" Margin="29,2,0,2" Width="1"/>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Cycle" Grid.IsSharedSizeScope="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSuspendingPopupAnimation" Value="True">
                            <Setter Property="PopupAnimation" TargetName="PART_Popup" Value="None"/>
                        </Trigger>
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                            <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter Property="Background" TargetName="templateRoot" Value="#3D26A0DA"/>
                            <Setter Property="BorderBrush" TargetName="templateRoot" Value="#FF26A0DA"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="TextElement.Foreground" TargetName="templateRoot" Value="#FF707070"/>
                            <Setter Property="Visibility" TargetName="GlyphPanel" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="CanContentScroll" SourceName="SubMenuScrollViewer" Value="False">
                            <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=SubMenuScrollViewer}"/>
                            <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=SubMenuScrollViewer}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>

            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="ItemcontainerStyle" TargetType="MenuItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate  TargetType="{x:Type MenuItem}">
                    <Border x:Name="templateRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                        <Grid Margin="-1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="22" SharedSizeGroup="MenuItemIconColumnGroup" Width="Auto"/>
                                <ColumnDefinition Width="13"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition SharedSizeGroup="MenuItemIGTColumnGroup" Width="Auto"/>
                                <ColumnDefinition Width="20"/>
                            </Grid.ColumnDefinitions>
                            <ContentPresenter x:Name="Icon" Content="{TemplateBinding Icon}" ContentSource="Icon" HorizontalAlignment="Center" Height="16" Margin="3" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center" Width="16"/>
                            <Border x:Name="GlyphPanel" BorderBrush="#FF26A0DA" BorderThickness="1" Background="#3D26A0DA" ClipToBounds="False" HorizontalAlignment="Center" Height="22" Margin="-1,0,0,0" Visibility="Hidden" VerticalAlignment="Center" Width="22">
                                <RadioButton x:Name="Glyph" IsChecked="{TemplateBinding IsChecked}" GroupName="a"  VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Border>
                            <ContentPresenter x:Name="menuHeaderContainer" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.Column="2" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" HorizontalAlignment="Left" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                            <TextBlock x:Name="menuGestureText" Grid.Column="4" Margin="{TemplateBinding Padding}" Opacity="0.7" Text="{TemplateBinding InputGestureText}" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                        </Trigger>
                        <Trigger  Property="IsChecked" Value="True">
                            <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                            <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                        </Trigger>
                        <Trigger SourceName="Glyph"  Property="IsChecked" Value="False">
                            <Setter Property="Visibility" TargetName="GlyphPanel" Value="Hidden"/>
                            <Setter Property="Visibility" TargetName="Glyph" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter Property="Background" TargetName="templateRoot" Value="#3D26A0DA"/>
                            <Setter Property="BorderBrush" TargetName="templateRoot" Value="#FF26A0DA"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="TextElement.Foreground" TargetName="templateRoot" Value="#FF707070"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsHighlighted" Value="True"/>
                                <Condition Property="IsEnabled" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="templateRoot" Value="#0A000000"/>
                            <Setter Property="BorderBrush" TargetName="templateRoot" Value="#21000000"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

**MainWindow.xaml：**

```
 <Menu>
        <MenuItem Header="File" ItemContainerStyle="{StaticResource ItemcontainerStyle}">
            <MenuItem IsCheckable="True" Header="Example Menu Item"/>
            <MenuItem IsCheckable="True" Header="Example Menu Item"/>
        </MenuItem>
    </Menu> 
```

**应用程序.xaml**

```
<Application x:Class="MenuItemTemplate.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
<Application.Resources>        
    <!--Luna-->
    <ResourceDictionary Source="/PresentationFramework.Luna, Version=3.0.0.0,
    Culture=neutral, PublicKeyToken=31bf3856ad364e35,
    ProcessorArchitecture=MSIL;component/themes/luna.normalcolor.xaml" />

    <!--Aero-->
    <!--<ResourceDictionary Source="/PresentationFramework.Aero, Version=3.0.0.0,
        Culture=neutral, PublicKeyToken=31bf3856ad364e35,
        ProcessorArchitecture=MSIL;component/themes/aero.normalcolor.xaml"/>-->

    <!--Classic-->
    <!--<ResourceDictionary Source="/PresentationFramework.Classic, Version=3.0.0.0,
        Culture=neutral, PublicKeyToken=31bf3856ad364e35,
        ProcessorArchitecture=MSIL;component/themes/classic.xaml" />-->
</Application.Resources> 
```

**输出**

![在此处输入图像描述](../Images/2792bc076598913dd0d44b8844a45505.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:37:53.263

您可以通过更改其模板属性来更改控件的外观：

```
 <MenuItem>
                <MenuItem.Template>
                    <ControlTemplate>
                        <RadioButton>Radio</RadioButton>
                    </ControlTemplate>
                </MenuItem.Template>
            </MenuItem> 
```

编辑：使用 RadioButton 作为 MenuItem-Icon，以获得图片中显示的外观：

```
 <MenuItem Header="Hallo">
                    <MenuItem.Icon>
                        <RadioButton/>
                    </MenuItem.Icon>
                </MenuItem> 
```

# css - “未捕获的语法错误：与 Joomla 捆绑在一起的 Bootstrap 2.1.0 中的意外令牌 {”！3.0

> ID：14979755
> 
> 赞同：69
> 
> 时间：2013-02-20T12:21:19.950
> 
> 标签：css, joomla, twitter-bootstrap

我正在使用 Joomla！3.0，其中包含 Twitter Bootstrap 2.1.0。我想做我自己的Joomla！模板，我需要使用下拉菜单。当我包含以下 CSS/JS 时：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>    
<script type="text/javascript" src="<?php echo $this->baseurl ?>/media/jui/js/bootstrap.min.js"></script>
<script type="text/javascript" src="<?php echo $this->baseurl ?>/media/jui/css/bootstrap.css"></script>
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template; ?>/css/Site.css" rel="stylesheet" type="text/css">
<link rel="shotcut icon" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template; ?>/css/images/favicon.ico" type="image/x-icon"> 
```

我收到以下 CSS 错误：

```
Uncaught SyntaxError: Unexpected token { 
```

在`/media/jui/css/bootstrap.css`，第 19 行

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-02-20T14:00:56.030

你有语法错误，因为你试图包含 CSS 文件，因为它是 JavaScript，所以改变

```
<script type="text/javascript" src="<?php echo $this->baseurl ?>/media/jui/css/bootstrap.css"></script> 
```

至

```
<link href="<?php echo $this->baseurl ?>/media/jui/css/bootstrap.css" rel="stylesheet" type="text/css" /> 
```

也可以正确关闭其他链接标签`/>`，而不仅仅是`>`

# javascript - javascript语句语法

> ID：14979760
> 
> 赞同：0
> 
> 时间：2013-02-20T12:21:40.790
> 
> 标签：javascript, syntax

我的脚本中有这样的声明：

```
if(some condition)
{
 false;
 //rest of code
} 
```

我没有将声明的含义`false;`理解为独立声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:23:11.480

这种说法根本毫无用处。

如果`some condition`没有副作用，您显示的整个代码什么都不做。

很可能有人忘记了某些东西，例如`return`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:23:56.347

您需要从函数返回值，或将其分配给变量。

例如：

```
function myFunction()
{
    if(some_condition)
    {
        return false;
    }
} 
```

或者

```
var my_var;
if(some_condition)
{
    my_var = false;
} 
```

# c# - 清空数据到 jqgrid 以显示网格中没有数据

> ID：14979761
> 
> 赞同：0
> 
> 时间：2013-02-20T12:21:41.760
> 
> 标签：c#, asp.net-mvc, jqgrid

我有一个 JQGrid，并且正在通过 Ajax 调用加载数据到 MVC 控制器。在控制器中，它是一个 DataTable，它正在转换为类和运行时并返回 JSON。

```
if (data.Rows.Count > 0)
 {
 List<Classs> item = new List<Classs>();
 var result = new
 {
 total = (int)Math.Ceiling((double)count / grid.PageSize),
  page = grid.PageIndex,
 records = count,
  rows = (from i in data.AsEnumerable()
  select new Classs
  {
                       xx= i.Field<string>("x"),
                       yy= i.Field<string>("y"),

    }).ToArray()
        };
 return Json(result, JsonRequestBehavior.AllowGet);

  } 
```

在其他部分，如果表格为空，我如何返回数据以便网格显示“未找到记录”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:29:13.080

即使结果为空，您也可以传递 JSON 结果。如果要显示的数据通过`userdata`参数为 0，您可以传递一个布尔值，或者如果没有要显示的结果（也可以通过过滤触发），您可以在客户端进行测试，例如：

```
 loadComplete: function () {
        if ($(this).jqGrid('getGridParam', 'reccount') == 0) {
           //display message if empty jqGrid, etc        
        } 
```

# mysql - 如果找到日期差异，则将列单元格与其他单元格匹配

> ID：14979770
> 
> 赞同：0
> 
> 时间：2013-02-20T12:22:08.103
> 
> 标签：mysql, sql, sql-server, query-builder

今天早上我参与了这个查询。我浪费了我的 2 天。但没有得到好的解决方案。我有一个mysql查询

```
SELECT l.date_entered, n.date_entered, n.date_modified, n.name, n.parent_id
FROM  `notes` AS n, leads AS l
WHERE n.parent_type =  "Leads" && MONTH( l.date_entered ) =1 && YEAR( l.date_entered ) =2013 &&  
n.parent_id = l.id
ORDER BY n.date_modified ASC 
```

这给了我这个输出： -

```
date_entered date_entered date_modified         name    parent_id
2013-01-07  2013-01-07    2013-01-07 20:17:44   rahul   100   
2013-01-07  2013-01-07    2013-01-07 22:27:38   rawat   101
2013-01-03  2013-01-07    2013-01-07 23:29:02   rohit   102
2013-01-03  2013-01-07    2013-01-07 23:33:55   mamta   100
2013-01-04  2013-01-08    2013-01-08 06:16:11   kiran   101
2013-01-07  2013-01-08    2013-01-08 07:10:10   ajay    100 
```

现在，我试图`date-modified`通过匹配`parent_id`例如

1.  从 100 开始，搜索在第 4 行返回另一个 100。此日期在同一天修改，因此结果 = 0
2.  下一个搜索是在第 5 行找到的 101。这个修改日期是前一个 101 之后的 1 天，所以结果 = 1
3.  下一个搜索是102，没有找到，所以跳过
4.  下一个搜索是100，但是这个已经找到了，所以跳过它
5.  下一个搜索是101，但是这个已经找到了，所以跳过
6.  下一个搜索是100，但是这个已经找到了，所以跳过它

我的输出将是： -

```
date_entered date_entered date_modified         name    parent_id   datediff
2013-01-07  2013-01-07    2013-01-07 20:17:44   rahul   100         0
2013-01-07  2013-01-07    2013-01-07 22:27:38   rawat   101         1
2013-01-03  2013-01-07    2013-01-07 23:29:02   rohit   102         not found
2013-01-03  2013-01-07    2013-01-07 23:33:55   mamta   100         skip due to previous match
2013-01-04  2013-01-08    2013-01-08 06:16:11   kiran   101         skip due to previous match 
2013-01-07  2013-01-08    2013-01-08 07:10:10   ajay    100         skip due to previous match 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:48:59.407

试试这个 ：

```
CREATE  TABLE test as 
(SELECT l.date_entered date1, n.date_entered date2, n.date_modified mod_date, n.name name, n.parent_id parentid
FROM  `notes` AS n, leads AS l
WHERE n.parent_type =  "Leads" && MONTH( l.date_entered ) =1 && YEAR( l.date_entered ) =2013 &&  
n.parent_id = l.id);

select *,
case 
when mod_date=b.min_date and count_parent_id>1 then cast( datediff(next_date,b.min_date) as char)

when count_parent_id=1 then 'not found'
else 'skip due to previous match'
end datediff

 from  
(SELECT Date1, Date2, mod_date, name, parentid
FROM  test) as a
left join 

(select min_date,next_date, count_parent_id, q1.parentid
  from
    (SELECT min(mod_date) min_date, count(parentid) count_parent_id, parentid
    FROM  test 
    group by parentid) q1
   join
    (SELECT min(mod_date) next_date, parentid
    FROM  test 
    where  mod_date not in 
      (SELECT min(mod_date) min_date FROM  test 
      group by parentid)
    group by parentid
    )q2
   on q1.parentid=q2.parentid

) as b

on a.parentid=b.parentid
ORDER BY mod_date ASC ;

drop table test; 
```

这行得通。检查[SQL 小提琴](http://sqlfiddle.com/#!2/21f59/1)

# c# - 资源文件使用

> ID：14979776
> 
> 赞同：0
> 
> 时间：2013-02-20T12:22:50.173
> 
> 标签：c#, winforms, resources

总而言之，这个问题是一个基本问题。我一直在加载我在复杂 UI 中使用的所有 .png 图标作为资源。这意味着“资源”文件夹包含大约。100-150 个小 .png。这行得通，但我应该这样做吗？如果不是，我应该怎么做？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:50:58.540

基本上，如果您认为图像会更改，则将它们存储在资源文件之外。如果它们在应用程序（或其版本）的生命周期内是静态的，那么资源文件就可以了

# git - 包含 2 个修订版之间的 git diff

> ID：14979785
> 
> 赞同：1
> 
> 时间：2013-02-20T12:23:12.083
> 
> 标签：git, commit, revision, git-diff

我正在做一个：

```
git diff --diff-filter=AM --name-only 59ade6e..c1fc4d8 
```

59ade6e 哈希是我添加所有文件的提交（我的第一次提交）。

但是当我执行我的命令时，它似乎不包含这些添加的文件。如何真正将我的哈希修订包含到这个差异中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:26:28.920

使用`~1`符号：

```
git diff --diff-filter=AM --name-only 59ade6e~1..c1fc4d8 
```

`59ade6e`这将在之前的提交和之前的提交之间产生差异`c1fc4d8`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:50:52.830

如果`59ade6e`是你的根提交，你可能正在寻找这个命令：

```
git ls-tree --name-only -r 59ade6e 
```

# android - 活动启动模式

> ID：14979787
> 
> 赞同：0
> 
> 时间：2013-02-20T12:23:16.610
> 
> 标签：android, android-intent, back-stack

这是我在清单中的活动标签：

```
<activity
    android:name=".Activity_B"
    android:label="@string/app_name"
    android:launchMode="singleTop"/> 
```

我想要完成的是：

> 活动_A ---> 活动_B ---> 活动_C ---> 活动_B

当我从 Activity_B 转到 Activity_C 时，我不想完成 Activity_B。

但是当我单击 Activity_C 中的一个按钮时，我想启动 Activity_B，它必须重新创建（由于 Activity_C 中的某些操作而更改了数据），并且必须完成 backstack 中的前一个 Activity_B 实例。

`android:launchMode="singleTask"`它几乎按要求工作，但没有重新创建 Activity_B。

`android:launchMode="singleTop"`重新创建 Activity_B 但不会从后台堆栈中删除其先前的实例

`android:launchMode="singleInstance"`这与`singleTask`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:40:29.790

*将评论转化为答案*

您描述的工作流程非常适合使用`startActivityForResult()`. 您应该使用它从 Activity-B 调用 Activity-C，当数据更改时，将结果设置为`RESULT_OK`，如果用户返回，您可以修改/更新 Activity-B。

这就是它应该完成的方式。

# search - Sitecore 快速查询不返回值

> ID：14979789
> 
> 赞同：1
> 
> 时间：2013-02-20T12:23:20.047
> 
> 标签：search, sitecore, sitecore6

我在我的 C# 代码中使用了 Sitecore 快速查询来获取与条件匹配的项目和子项目。但是快速查询不会返回任何项目，尽管有。

我的快速查询如下所示； `fast:/sitecore/content/...//*[@__Workflow state='{item id}']`

这将不返回任何项目，但从`fast:`查询中删除将花费更多时间返回项目。

我尝试在查询路径中转义空格，如下所示，但它不起作用； `fast:/sitecore/content/...//*[@#__Workflow state#='{item id}']`

有什么方法可以使用快速查询过滤子项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:52:26.060

我注意到您在查询中使用了您的点，这是不正确的。您可以使用 2 个点来选择父项，但在您的查询中选择父项`/sitecore/content`似乎有点奇怪。

看来您可以使用此查询：

```
fast:/sitecore/content//*[@__Workflow state='{item id}'] 
```

另请参阅[本文档](http://sdn.sitecore.net/upload/sdn5/developer/using%20sitecore%20fast%20query/using%20sitecore%20fast%20query001.pdf)以了解语法和示例以及使用快速查询而不是普通查询的限制

编辑：

Sitecore 快速查询不考虑上下文语言（结果包括版本与任何语言的查询匹配的项目）。我刚刚在 Sitecore 的开发人员中心进行了快速测试，在我的情况下，它只产生了一个工作流状态设置为英语的项目，而不是我当前的上下文语言。这可能是您在您的情况下所经历的。

# javascript - AngularJS - 将字节数组内容显示为图像

> ID：14979791
> 
> 赞同：19
> 
> 时间：2013-02-20T12:23:41.997
> 
> 标签：javascript, angularjs

我正在我的数据库中搜索图像作为字节数组。我想使用标记*图像*将此内容显示为文件，但在这里不起作用。

```
// Controller which get my image and put into $scope.
function MyController($scope, $http, $location) {  

    var url = '/json/FindImage?id=1';  
    $http.get(url).success(function(result) {  
        $scope.image = result.Image;  
    }  
}  

// HTML
<!-- It doesn't work -->  
<img src="{{image}}" />  
<!-- It doesn't work also -->  
<img ng-src="{{image}}" /> 
```

任何的想法？谢谢你们！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-07-02T08:59:18.567

`ng-src`按以下格式使用

```
<img ng-src="data:image/JPEG;base64,{{image}}"> 
```

不要忘记添加一个清理过滤器`data`以不被`unsafe`角度标记：

```
$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|file|ftp|blob):|data:image\//); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:16:08.840

如果您可以让服务器以 base64 编码字符串返回图像，则可以使用[数据 url](http://www.websiteoptimization.com/speed/tweak/inline-images/)作为 src 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-13T13:42:06.897

确保您返回以显示为图像的数据已转换为 ToBase64String

在您的 C# 代码中，使用 Convert.ToBase64String(imageBytes) 并在视图中使用此

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T12:30:17.633

的`src`属性`img`指向图像的源文件，它不包含实际的源数据。你不能以这种方式做你想做的事；相反，您必须用 JavaScript 编写一个图像解码器（例如[https://github.com/devongovett/png.js](https://github.com/devongovett/png.js)），它会输出到一个`canvas`元素中。

# c# - 如何将应用程序添加到特定文件夹的桌面上下文菜单？

> ID：14979794
> 
> 赞同：2
> 
> 时间：2013-02-20T12:23:55.677
> 
> 标签：c#, registry, contextmenu

我正在尝试将自己的菜单放在 Windows 桌面上下文菜单中。类似于 Dropbox 制作的东西。在 Dropbox 文件夹中，会显示一个名为 Dropbox 的菜单，让您可以对给定文件执行任务。

我知道对于我需要使用此注册表项的所有文件夹：

```
HKEY_CLASSES_ROOT\Directory\Background\shell 
```

有人知道如何将我自己的菜单**放在特定文件夹中**吗？

问候！

# c# - 如何从文本区域 mvc4 显示新行？

> ID：14979801
> 
> 赞同：4
> 
> 时间：2013-02-20T12:24:12.307
> 
> 标签：c#, html, asp.net-mvc

我使用 mvc4 并在视图中使用阿拉伯语言（lang="ar"），流动的代码将文本存储在 sql 表中，例如：مرحبامرحبا 存储在 sql 表中，但是从 sql 表中读取输出时
：

```
 مرحبا <\br> مرحبا 
```

我希望输出是这样的：

喜欢

喜欢

```
modelcar.CarDescription = modelcar.CarDescription
                         .Replace(System.Environment.NewLine, "<br />");
AdvertFunObj.Add(modelcar); 
```

风景

```
<br />
<hr /><br />
الاضافات<span class="blue"><%:Model.CarDescription   %></span><br /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:35:22.273

您需要用于`Html.Raw`在视图中输出 HTML，否则它只会被视为字符串。尝试这个：

```
الاضافات<span class="blue"><%:Html.Raw(Model.CarDescription)   %></span><br /> 
```

**编辑：**尽管正如评论者所说，请确保您没有关闭，`RequestValidation`否则它很容易受到 XSS 攻击（如果您实际上允许人们添加汽车）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:37:06.890

如果您使用的是 razor 视图引擎，则不编码 HTML 的方法是编写：

```
<hr /><br />
الاضافات<span class="blue">@Html.Raw(Model.CarDescription)</span><br /> 
```

也许试试

```
<hr /><br />
الاضافات<span class="blue"><%: Html.Raw(Model.CarDescription %></span><br /> 
```

# msbuild - MSBuild，条件 NET 运行时

> ID：14979802
> 
> 赞同：1
> 
> 时间：2013-02-20T12:24:14.453
> 
> 标签：msbuild

我有一组工具需要根据 MsBuild 条件部署在 NET 3.5 或 NET 4.0 上。目前我们想更改这些实用程序的项目文件来处理这个问题。我们知道我们可以做这样的事情：

```
<TargetFrameworkVersion Condition="">v3.5</TargetFrameworkVersion> 
```

我们不清楚的是如何根据条件指定不同版本的 NET。condition 属性是一个 int，它返回一个介于 1 和 4 之间的数字，根据该值，我们应该针对不同的 NET 框架，当然还要在 app.config 中更改此属性

```
<startup>
   <supportedRuntime version="v2.0.50727"/>
</startup> 
```

我想知道处理此类问题的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:39:53.600

您可以在 MSBuild 文件中一个接一个地给出这样的条件。

```
<TargetFrameworkVersion Condition="$(ConditionProperty) == '1'">v1.1.xxxx</TargetFrameworkVersion>
<TargetFrameworkVersion Condition="$(ConditionProperty) == '2'">v2.0.xxxx</TargetFrameworkVersion>
<TargetFrameworkVersion Condition="$(ConditionProperty) == '3'">v3.5.xxxx</TargetFrameworkVersion>
<TargetFrameworkVersion Condition="$(ConditionProperty) == '4'">v4.0.xxxx</TargetFrameworkVersion> 
```

因此，您可以编写代码来更改

```
<startup>
   <supportedRuntime version="v2.0.50727"/>
</startup> 
```

在您的 app.cofig 文件中，以及`$(TargetFrameworkVersion)`使用以下代码使用变量的值：

```
<XmlUpdate XmlFileName="app.config"
           XPath="//startup/supprtedRuntime[@version]"
           Value="$(TargetFrameworkVersion)" /> 
```

# c# - 如何在命令行程序中使用 51Degreees 数据来解析 UserAgent 字段？

> ID：14979804
> 
> 赞同：0
> 
> 时间：2013-02-20T12:24:14.537
> 
> 标签：c#, user-agent, httpmodule, 51degrees, iis-logs

我正在解析一些 IIS 事件日志，需要分析 UserAgent 字段。我认为 51Degrees 有我需要的数据，但这是作为 HTTP 模块实现的。

*   如何使用 C# 命令行应用程序与 51Degrees 移动设备数据库交互？

我确实记得以前看到过一个类似的问题，将其列为最爱，知道我将来会需要这个。我怀疑问题已被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:20:35.667

您可以相当简单地使用 Reader 创建一个 Provider 对象，然后将用户代理从命令行输入到 Provider 中，从而生成可用于查询属性的 BaseDeviceInfo 对象。更详细的解释可以在以下位置找到：

[http://51degrees.mobi/Support/Blogs/tabid/212/EntryId/20/51Degrees-mobi-Mobile-Detection-Outside-of-IIS.aspx](http://51degrees.mobi/Support/Blogs/tabid/212/EntryId/20/51Degrees-mobi-Mobile-Detection-Outside-of-IIS.aspx)

# html - Wordpress 自定义帖子类型和 Google 地图 API

> ID：14979806
> 
> 赞同：1
> 
> 时间：2013-02-20T12:24:22.323
> 
> 标签：html, wordpress, google-maps

我在 Wordpress 中编写了自定义帖子类型，并使用它在系统内提交属性。

我想添加谷歌地图功能，根据某人输入的地址，他会自动在地图上找到一个位置，所有这些都在谷歌地图上。

那可能吗？如何基于 html 表单 inut 在谷歌地图上呈现正确的位置？我只是在寻找一个想法，如果有人能给我一个提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:28:10.307

您很可能需要实现一个定义谷歌地图简码的小插件，并将位置字段作为参数。

原因是您需要包含所有其他页面不需要的库等，并且能够将地图放在所述帖子中您需要的任何位置。

# cocos2d-iphone - cocos2d CCDirectorMac - self.view.openGLContext flushBuffer 上的 SIGABRT

> ID：14979809
> 
> 赞同：0
> 
> 时间：2013-02-20T12:24:24.460
> 
> 标签：cocos2d-iphone, nsopengl

我有一个 cocos2d Mac 应用程序。创建和添加 Sprite 时出现随机崩溃。

基本上我得到了 SIGABRT

```
// flush buffer
[self.view.openGLContext flushBuffer]; 
```

在 CCDirectorMac 中。

截图在这里： [http ://www.zentralnorden.com/temp/crash0220.png](http://www.zentralnorden.com/temp/crash0220.png)

关于如何解决这个问题的任何建议都是有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:03:27.550

The reason was..

I am building a Level-Editor and the Sprites were created in a different Thread as the CCDirectorMac runs on. I now add notifications into a queue and then on the CCLayer i check if somethings is in this queue and if yes, create the needed Sprites from there. Since i do this i have no more problems.

# listener - 在所有 `FutureTask` 完成计算后，我如何调用另一个方法？

> ID：14979810
> 
> 赞同：0
> 
> 时间：2013-02-20T12:24:23.433
> 
> 标签：listener, futuretask

我有以下方法可以在不同的 PaaS 中创建和部署应用程序：

```
private void deployModulesInPaaS() {

        ExecutorService executor = Executors.newFixedThreadPool(listModules
                .size());

        ModuleParsed mod;

        for (Iterator<ModuleParsed> iterator = listModules.iterator(); iterator
                .hasNext();) {
            mod = (ModuleParsed) iterator.next();
            try {
                switch (mod.getId_paas()) {
                case 1:                     
                    GAEDeployer gaeDeployer = new GAEDeployer(mod.getId_paas(),
                            mod.getId_component(), "//whatever/path");
                    FutureTask<URI> gaeFuture = new FutureTask<URI>(gaeDeployer);
                    executor.execute(gaeFuture);
                    mod.setDeployedURI(gaeFuture.get());
                    break;
                case 2:
                    AzureDeployer azureDeployer = new AzureDeployer(
                            "subscription", "path_certificate", "password",
                            "storageAccountName", "storageAccountKey");
                    FutureTask<URI> azureFuture = new FutureTask<URI>(
                            azureDeployer);
                    executor.execute(azureFuture);
                    mod.setDeployedURI(azureFuture.get());
                    break;                  
                default:
                    System.out.println("The PaaS identifier of module "
                            + mod.getId_component() + " is unknown.");
                    break;
                }

            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            }
        }

    } 
```

`FutureTask`一旦所有人都完成了计算，我该如何调用另一个方法？我已经阅读了关于`Command`模式和关于`Listener`但我不确定这些是否是正确的，也不确定在这种情况下如何实现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T13:05:37.883

您确实需要[ListenableFuture](https://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)，请在本页搜索关键词“fan-in”。

不推荐使用`CountDownLatch`和覆盖的另一种方法：`FutureTask.done()`

```
private void deployModulesInPaaS() {

    CountDownLatch countDownLatch = new CountDownLatch(listModules.size());

    ExecutorService executor = Executors.newFixedThreadPool(listModules
            .size());

    ModuleParsed mod;

    for (Iterator<ModuleParsed> iterator = listModules.iterator(); iterator
            .hasNext();) {
        mod = (ModuleParsed) iterator.next();
        try {
            switch (mod.getId_paas()) {
            case 1:
                GAEDeployer gaeDeployer = new GAEDeployer(mod.getId_paas(),
                        mod.getId_component(), "//whatever/path");
                FutureTask<URI> gaeFuture = new FutureTask<URI>(gaeDeployer) {
                    @Override
                    protected void done() {

                        super.done();
                        countDownLatch.countDown();
                    }
                };
                executor.execute(gaeFuture);
                mod.setDeployedURI(gaeFuture.get());
                break;
            case 2:
                AzureDeployer azureDeployer = new AzureDeployer(
                        "subscription", "path_certificate", "password",
                        "storageAccountName", "storageAccountKey");
                FutureTask<URI> azureFuture = new FutureTask<URI>(
                        azureDeployer) {
                    @Override
                    protected void done() {

                        super.done();
                        countDownLatch.countDown();
                    }
                };
                executor.execute(azureFuture);
                mod.setDeployedURI(azureFuture.get());
                break;
            default:
                System.out.println("The PaaS identifier of module "
                        + mod.getId_component() + " is unknown.");
                break;
            }

        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }
    countDownLatch.await();
    // do finally
} 
```

# jsf-2 - 我如何从 ah:commandButton 导航到绝对路径

> ID：14979811
> 
> 赞同：0
> 
> 时间：2013-02-20T12:24:36.600
> 
> 标签：jsf-2, richfaces, commandbutton

我有这样的事情：

```
<h:commandButton value="test" action="#{bean.action}"/> 
```

一旦评估了操作方法，我想（仅在某些情况下）导航到绝对 URL。

我知道如果“bean.action”返回一个与上下文中有效路径相对应的相对路径，它将去那里，但我不希望那样。

我想评估操作返回，如果一切正常，请导航到像“www.anypage.com”这样的绝对 URL，比如

```
<a href="www.anypage.com">test</a> 
```

但取决于动作回报并保持 jsf2 的优势。

有任何想法吗？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:18:47.907

简单，只需`ExternalContext.redirect()`在您的操作方法中使用：

```
public String action() {
    doYourProcessing();
    if(/*some condition*/) {
        FacesContext.getCurrentInstance().getExternalContext().redirect(/*absolute path*/);
    } else {
        //return a navigation case outcome or null for a postback
    }
} 
```

# scala - 为什么scala try 块允许重新定义封闭范围内的变量？

> ID：14979813
> 
> 赞同：1
> 
> 时间：2013-02-20T12:24:44.850
> 
> 标签：scala, scope

使用 Scala 2.10，以下编译没有错误。

```
val test = 1
try {
  val test = 2
} 
```

查看生成的字节码，我看到：

```
int test = 1;
int test = 2; 
```

这不是很奇怪吗？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:27:11.993

局部变量总是可以与范围更广的变量同名。通过在大括号内声明它，您可以有效地保护自己免于意外使用/覆盖在别处使用的变量。并不奇怪 - 但很有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:31:26.433

也许您尝试这样做是为了清楚地了解正在发生的事情

```
val test = 1
println(test)
try{
  val test = 2
  println(test)
}
println(test) 
```

范围很重要。我希望你得到`1` `2` `1` 第二个`test`只存在于 try 范围内

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:37:49.907

这与`try`. 变量可以在*任何*块中相互影响，并且您基本上可以将块放在任何地方：

```
val x = 0
if ({val x = 1; x*3}==0) {
  val x = 2; x + x + x
}
else x 
```

这使代码更便携：您可以自由移动块，而不必担心外部的某些内容可能会发生冲突。（嗯，不完全正确：哪些隐式在范围内仍然会导致问题，但这比重复变量更不可能让你绊倒。）

这是与 Java 不同的选择；Java 的态度是您更容易忘记变量名并需要被提醒，而 Scala 的态度是即使外部上下文发生变化，您也可能是认真的。考虑到 Java 专注于可变操作（隐藏可变变量确实会导致问题！）和 Scala 的默认不可变（隐藏外部不可变变量甚至可能是可取的，因为您可以重用像 i 和 x 这样的短变量，这种做法是有道理的随心所欲）。

# php - 带有jQuery的json中的意外令牌<

> ID：14979827
> 
> 赞同：-1
> 
> 时间：2013-02-20T12:25:24.087
> 
> 标签：php, jquery, ajax, json

我正在使用 json 和 jquery 在 php 应用程序中接收异步数据。但我发现了以下语法错误：

> 未捕获的语法错误：意外的令牌 <

请给我建议。我在另一个执行良好的程序中使用了相同的代码，但下面的代码显示错误

HTML 代码/jQuery 代码：

```
$('#cmb_package').bind('change', function () {
    var value = $(this).val();
    var destination = $("#destination").val();
    var service_val = $("#serviceid").val();
    var newdiv = $('#divserviceprovider');
    if (value == "NoPackage") {
        $.ajax({
            type: 'POST',
            url: '../costsheets/getpricebyajax',
            dataType: 'json',
            content: 'application/json',
            data: {
                service: service_val,
                destno: destination
            },
            success: function (data) {
                alert("success");
                newdiv.text('');
                newdiv.append(data.msg);
                newdiv.show(500);
                if (data.error === true) newdiv.show(500);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("fail " + errorThrown);
                newdiv.removeClass().addClass('error')
                    .text('There was an error.').show(500);
                newdiv.show(500);
            }
        });
        return false;
    } else {
        $('#div-packagetype').show();
    }
}); 
```

PHP代码：

```
function getpricebyajax()
{

            $str="";$substr="";
            header("Content-type: application/json");

            $return['error'] = true;
            $return['msg'] = "Success";

            echo json_encode($return);

            exit;
     } 
```

我正在使用 cakephp 1.3 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:40:45.527

当您使用框架（蛋糕 PHP）时，您的代码可能被嵌入到另一个进程中，该进程将打印 HTML 页面的经典开头（如`<html>`...等）

以这个页面为例：[json output with CakePHP](http://nuts-and-bolts-of-cakephp.com/2008/05/07/json-output-with-cakephp/)用户设置了一个特定的布局，让结果页面（骨架）为空白：

```
$this->layout = 'ajax'; 
```

# regex - 正则表达式包括新的邮政编码

> ID：14979829
> 
> 赞同：0
> 
> 时间：2013-02-20T12:25:31.947
> 
> 标签：regex

我们有一个正则表达式可以处理和验证
丹麦邮政编码：xxxx
挪威邮政编码：Nxxxx（内部自定义模式）
瑞典邮政编码：Sxxxxx（内部自定义模式）
格陵兰邮政编码：Gxxxx（内部自定义模式）
冰岛邮政编码：xxx

反正你懂这个意思。

现在我需要在 FO-xxx 的图案上包含法罗岛邮政编码

我到目前为止所拥有的。

```
^(\D[0-9]{2,6}\s\D{3,})|([0-9]{3,6}\s\D{3,})$
```

我编辑了 {2,5} 中的 {2,6} 和 {2,} 中的 {3,}。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:58:31.983

我想 `^[NG]?\d{4}|S\d{5}|(FO-)?\d{3}$`就够了。

这允许以下任何一项：

*   可选的 N 或 G，后跟 4 位强制性数字（匹配丹麦语、挪威语和格陵兰语）
*   一个 S 后跟 5 位数字（匹配瑞典语）
*   FO- 的可选部分，后跟 3 个强制数字（匹配冰岛和法罗群岛）

您的正则表达式`^(\D[0-9]{2,6}\s\D{3,})|([0-9]{3,6}\s\D{3,})$`匹配这样的模式：**一个非数字后跟 2-6 位数字后跟一个空格，后跟 3 个或更多非数字**或**3-6 位数字后跟一个空格，后跟 3 个或更多非数字**。这似乎不能满足您的要求（如上所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:54:09.587

我建议您为每个邮政编码制作一个简单的正则表达式，然后以编程方式将它们组合成一个正则表达式。这将比您现有的正则表达式执行更准确的检查。它也更不容易出错并且更容易维护。此外，如果您将来需要，它还使您能够执行额外的操作，例如匹配特定国家/地区的邮政编码。这是我如何在 Perl 中编写代码的示例：

```
use warnings;
use strict;

my %codes = (
    'Danish' => '\d{4}',
    'Norwegian' => 'N\d{4}',
    'Faroese' => 'FO-\d{3}'
);

my $zip_regex = '^' . join('|', values %codes) . '$';

if ($some_var =~ /$zip_regex/)
{
    print "$some_var is a zip code";
} 
```

该方法应该可以在任何语言中使用。

# html - HTML5 + Java JAX-RS + Neo4J：每个用户都有自己的数据库

> ID：14979831
> 
> 赞同：0
> 
> 时间：2013-02-20T12:25:32.927
> 
> 标签：html, jax-rs, neo4j

我在端口 80 上的 IIS Web 服务器上运行了一个前端。它是使用 angular.js 框架用 HTML5 编写的。

我有一个 RESTful 后端在端口 8084 上的 GlassFish 应用程序服务器上运行。它是使用 Jersey JAX-RS 实现编写的。

后端使用在 Singleton 类的构造函数中创建的 Neo4J 数据库。因此，当不存在所述类的实例时，将创建数据库。如果实例确实存在，它会使用存储为属性的相同 GraphDatabaseService。我这样做是为了防止 Lock Store 错误。如果该类不是单例，它每次都会尝试为相同的数据库路径创建一个新的 GraphDatabaseService，并且一次只能有一个。

然而，我的应用程序的需求发生了变化。需要登录，每个用户都将获得自己的数据库。用户名将在数据库路径中使用，并且必须传递给（现在仍然是）单例类。

如何更改我的设置，以便每个用户都有自己的数据库，并且该用户进行的每个 REST 调用都在该数据库上执行。用户应该能够同时使用 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:35:08.340

看来这是不可能的。我尝试通过映射多个实例中的多个实例。不幸的是，当请求在另一个数据库中做某事时，似乎一个数据库中的操作被中止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:12:11.083

您必须从 httpRequest 中检索用户信息。
[如何访问 HTTP 请求？](https://stackoverflow.com/questions/5118752/how-do-i-access-the-http-request)
无论如何，将类实例绑定到 http 会话的最佳方法是使用有状态的 ejb，但 restful 架构并非设计为有状态的，实际上每个 rest 请求都将发生在他自己的 http 会话中。
阅读[https://community.jboss.org/thread/179777](https://community.jboss.org/thread/179777)了解更多信息

# c++ - 添加另一个 VC++ 对话框会导致第二个对话框在控件周围有焦点虚线矩形？

> ID：14979835
> 
> 赞同：0
> 
> 时间：2013-02-20T12:25:42.103
> 
> 标签：c++, visual-studio, visual-c++, mfc, dialog

我制作了一个行为异常的 Visual Studio 2012 (Professional) 项目。当我只有一个对话框时，当我使用它们时，控件上不会出现焦点矩形（虚线边框），除非在我第一次按 TAB 或 ALT 之后。当我尝试在主对话框（作为启动屏幕）之前加载另一个对话框时，焦点虚线边框**确实**出现在主（第二个）对话框上，当窗口加载时它们已经显示在第一个项目上。为什么会这样，我该如何防止这种情况发生？

![在此处输入图像描述](../Images/04a3176be95af33782f655126c8cb03c.png)

我唯一的猜测是按 ENTER 或 ESC 会导致与按 TAB 或 ALT 相同的行为，我总是看到效果，因为用户必须按 ENTER 或 ESC 才能关闭启动屏幕。有人会认为有一种方法可以从控件中移除焦点，但这似乎并不容易。我可以轻松地将焦点设置为控件，但通常不只是将其删除。

对于那些对示例代码感兴趣的人：

* * *

我可以展示我整个项目的代码，但诚实地自己测试会更容易。创建一个新的 VC++ 项目 > MFC 应用程序，设置为“基于对话框”，完成。在资源视图中，右键单击对话框和“插入对话框”。使其与主窗口明显不同，并添加至少一个可以获取焦点的控件。最后，在您的主 .cpp 文件的顶部附近，您会发现文本“// The one and only”...在其下方是声明主应用程序对象的行。*在该*行下方创建一个新的对话框类（对于“启动屏幕”，您可以在下面看到我的*），然后在您的主应用程序中`InitInstance()`，插入代码以在看起来像这样的部分上方加载启动屏幕：

```
CDlg dlg;
m_pMainWnd = &dlg;
INT_PTR nResponse = dlg.DoModal(); 
```

我用来显示启动画面的代码是：

```
CSplashDlg dlgSplash;
dlgSplash.DoModal(); 
```

*我的启动对话框代码：

**更新：**我更改了我的代码以允许首先单击对话框而不是按回车键（事实上，我将在某些时候覆盖 pretranslatemsg() 并捕获 ESC 和 ENTER。这是我最新的代码：

```
class CSplashDlg : public CDialogEx
{
public:
    CSplashDlg();
    enum { IDD = IDD_SPLASH };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support

protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnLButtonUp(UINT nFlags, CPoint point);
};

CSplashDlg::CSplashDlg() : CDialogEx(CSplashDlg::IDD) {}

void CSplashDlg::DoDataExchange(CDataExchange* pDX) { CDialogEx::DoDataExchange(pDX); }

BEGIN_MESSAGE_MAP(CSplashDlg, CDialogEx)
    ON_WM_LBUTTONUP()
END_MESSAGE_MAP()

void CSplashDlg::OnLButtonUp(UINT nFlags, CPoint point)
{
    EndDialog(1);
    CDialogEx::OnLButtonUp(nFlags, point);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:51:30.967

似乎按 ESC 或 ENTER 在编程上与按 TAB 或 ALT 类似，因此按下这些键中的任何一个都会触发控件上的焦点边框。我的解决方案是手动关闭对话框，而不是使用默认的“OK”和“CANCEL”选项，这些选项由于某种原因触发了未来对话框中甚至尚未创建的焦点边框。

我在上面粘贴的最新代码是解决方案，作为最后一点，我应该指出，防止用户在对话框中按 ENTER 或 ESC 也很重要（即使现在允许他们点击它，他们也可能会这样做），所以我使用`PreTranslateMessage`. 您可以完全阻止原始问题的发生，同时仍然允许在使用此方法时使用 ESCAPE 和 ENTER，但它并不像包含`CSplashDlg::EndDialog(1);`在 PreTranslateMessage 调用中那么简单（我尝试过，但失败了）。

在我的 CSplashDlg 类定义中：

```
virtual BOOL PreTranslateMessage(MSG* pMsg); 
```

我的功能如下所示：

```
BOOL CSplashDlg::PreTranslateMessage(MSG* pMsg) {
    if ( pMsg->message == WM_KEYDOWN ) {
        if ( pMsg->wParam == VK_ESCAPE || pMsg->wParam == VK_RETURN ) {
            pMsg->wParam = NULL;
            //return MAKELONG(0,DC_HASDEFID);
        }
    }
    return CDialog::PreTranslateMessage(pMsg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:18:29.527

在 OnInitDialog() 中的主对话框（不是飞溅）中，`return FALSE;`作为最后一条语句

# php - WordPress 通过 slug 查询单个帖子

> ID：14979837
> 
> 赞同：93
> 
> 时间：2013-02-20T12:26:03.410
> 
> 标签：php, wordpress

目前，当我想在不使用循环的情况下显示单个帖子时，我使用这个：

```
<?php
$post_id = 54;
$queried_post = get_post($post_id);
echo $queried_post->post_title; ?> 
```

问题是当我移动网站时，id 通常会改变。有没有办法通过slug查询这篇文章？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-02-20T12:59:40.603

来自 WordPress 法典：

```
<?php
$the_slug = 'my_slug';
$args = array(
  'name'        => $the_slug,
  'post_type'   => 'post',
  'post_status' => 'publish',
  'numberposts' => 1
);
$my_posts = get_posts($args);
if( $my_posts ) :
  echo 'ID on the first post found ' . $my_posts[0]->ID;
endif;
?> 
```

[WordPress Codex 获取帖子](https://codex.wordpress.org/Template_Tags/get_posts#Get_a_post_by_its_slug)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2015-04-21T10:58:23.653

怎么样？

```
<?php
   $queried_post = get_page_by_path('my_slug',OBJECT,'post');
?> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-03T09:39:29.337

一种更便宜且可重复使用的方法

```
function get_post_id_by_name( $post_name, $post_type = 'post' )
{
    $post_ids = get_posts(array
    (
        'post_name'   => $post_name,
        'post_type'   => $post_type,
        'numberposts' => 1,
        'fields' => 'ids'
    ));

    return array_shift( $post_ids );
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-30T10:26:38.643

由于 wordpress api 已更改，您不能将 get_posts 与参数“post_name”一起使用。我稍微修改了 Maartens 函数：

```
function get_post_id_by_slug( $slug, $post_type = "post" ) {
    $query = new WP_Query(
        array(
            'name'   => $slug,
            'post_type'   => $post_type,
            'numberposts' => 1,
            'fields'      => 'ids',
        ) );
    $posts = $query->get_posts();
    return array_shift( $posts );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-09T12:58:40.117

```
<?php    
$page = get_page_by_path('slug', ARRAY_N);
echo $page->post_content

function get_id_by_slug($page_slug) {
      $page = get_page_by_path($page_slug, ARRAY_N);
      if ($page[0] > 0) {
        return $page[0];
      }else{
        return null;
      }
} 
```

# windows-8 - 英特尔媒体软件编码器

> ID：14979839
> 
> 赞同：0
> 
> 时间：2013-02-20T12:26:11.497
> 
> 标签：windows-8, intel, video-encoding, intel-media-sdk

我正在使用**图形编辑**，并尝试使用带有 windows-8（32 位，处理器 Intel-core i5）的**英特尔媒体软件编码器并出现配置错误**

但它适用于以下情况：

*   Windows-8（64 位，处理器 intel-core i3），
*   Windows-7（32 位，处理器 intel-core i3），
*   Windows-7（64 位，处理器 intel-core i3）。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:19:59.623

尝试在兼容模式下运行它并确保安装的版本是 32 位并在管理员模式下运行它，如果它没有帮助。发布一些屏幕截图以供人们理解问题。

# c# - C# 将图像转换为文件流

> ID：14979841
> 
> 赞同：1
> 
> 时间：2013-02-20T12:26:24.840
> 
> 标签：c#

到目前为止，我的应用程序允许用户通过文件选择器选择图像并通过 FTP 通过文件流上传：

```
 Stream ftpStream = request.GetRequestStream();
        FileStream file = File.OpenRead(fileToUpload);
        length = 1024;

        buffer = new byte[length];
           do
            {
                bytesRead = file.Read(buffer, 0, length);
                ftpStream.Write(buffer, 0, bytesRead);
                totalReadBytesCount += bytesRead;
                var progress = totalReadBytesCount * 100.0 / totalToUpload;
                backgroundWorker1.ReportProgress((int)progress);
            }
            while (bytesRead != 0); 
```

这工作正常。选择的图像保存为文件，然后上传。

但是，现在，我希望将其保存为“图像”，以便我可以调整它的大小等。这样代码将是：

```
 if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            image = Image.FromFile(openFileDialog1.FileName);
        } 
```

相对于：

```
 if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        file = openFileDialog1.FileName;
    } 
```

因此，我的问题是：

现在我选择的文件是一个图像文件。如何将其转换为文件流？如果这不能轻松完成，那么我将如何通过 ftp 上传图像？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:34:55.920

要将图像写入文件流，我建议使用 Image 类的 Save 函数。IE

```
image = Image.FromFile(openFileDialog1.FileName);
image.Save(ftpStream, System.Drawing.Imaging.ImageFormat.Png); 
```

显然，您需要检查错误并可能使用不同的图像格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:31:18.140

您可以使用[Image.FromStream 方法](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromstream.aspx)。

像这样的东西：

```
image = Image.FromStream(new MemoryStream(buffer)); 
```

要保存到 FileStream，请使用以下内容：

```
var stream = File.OpenWrite(openFileDialog1.FileName);
image.Save(stream, ImageFormat.Jpeg); 
```

# iphone - 这个崩溃报告是什么意思？

> ID：14979847
> 
> 赞同：1
> 
> 时间：2013-02-20T12:26:46.117
> 
> 标签：iphone, ios, xcode, debugging, crash-log

我从我的发布版本中得到了这个崩溃日志，但很难弄清楚这意味着什么。

这个 UIKit 是否因为在动画制作时标签从超级视图中删除而崩溃？

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000001, 0x000000000000defe
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   UIKit                           0x36011c7e -[UIView release] + 54
1   UIKit                           0x3603d12c -[UIView dealloc] + 292
2   TestApp                         0x0011fb0e -[ValueLabel .cxx_destruct] (ValueLabel.m:47)
3   libobjc.A.dylib                 0x3beeff26 object_cxxDestructFromClass(objc_object*, objc_class*) + 54
4   libobjc.A.dylib                 0x3beed0de objc_destructInstance + 30
5   libobjc.A.dylib                 0x3beed3ae object_dispose + 10
6   UIKit                           0x3603d2e2 -[UIView dealloc] + 730
7   TestApp                         0x0011fa48 -[ValueLabel dealloc] (ValueLabel.m:306)
8   libsystem_blocks.dylib          0x3c32bab0 _Block_release + 220
9   UIKit                           0x360255e0 -[UIViewAnimationBlockDelegate dealloc] + 56
10  CoreFoundation                  0x341406da CFRelease + 98
11  CoreFoundation                  0x34161d78 -[__NSDictionaryI dealloc] + 128
12  libobjc.A.dylib                 0x3beed490 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 164
13  CoreFoundation                  0x3414282c _CFAutoreleasePoolPop + 12
14  CoreFoundation                  0x341d31b2 __CFRunLoopRun + 1290
15  CoreFoundation                  0x34146238 CFRunLoopRunSpecific + 352
16  CoreFoundation                  0x341460c4 CFRunLoopRunInMode + 100
17  GraphicsServices                0x37d24336 GSEventRunModal + 70
18  UIKit                           0x360622b4 UIApplicationMain + 1116
19  TestApp                         0x000e6cae main (main.m:16)
20  TestApp                         0x000e6c64 start + 36 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:59:30.243

如果要删除在 Storyboard 或 NIB 中实例化的视图，请确保 IBOutlet 属性是**strong**或**retain**而不是**weak**或**assign**，否则一旦从父视图中删除它们就会被释放。

这是

```
@property (nonatomic, strong) IBOutlet UILabel* labelToRemove; 
```

而不是

```
@property (nonatomic, weak) IBOutlet UILabel* labelToRemove; 
```

# c# - C# Datagridview 不对复选框列进行排序

> ID：14979848
> 
> 赞同：13
> 
> 时间：2013-02-20T12:26:47.350
> 
> 标签：c#, sorting, datagridview, checkbox

当我将 Linq-to-sql 查询绑定到 datagridview（在两者之间使用 BindingSource）时，默认情况下这些列是可排序的。但是，布尔类型似乎并非如此。对于这些，datagridview 使用复选框列，但是当我单击标题时没有任何反应。解决方案有人吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-20T02:52:17.270

在 VS2012 的设计器中还可以设置 SortMode。

右键单击 DataGridView 并转到“编辑列”。

SortMode 有一个下拉菜单，可以选择 NotSortable、Automatic 和 Programmatic。

大多数列的默认值似乎是自动，但对于复选框（布尔）列，默认值是 NotSortable。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T19:20:32.330

这会有帮助吗？

```
dgv1.Columns["Colname"].SortMode = DataGridViewColumnSortMode.Automatic; 
```

# ruby - Nokogiri：查找没有类属性的节点的第一次出现

> ID：14979849
> 
> 赞同：1
> 
> 时间：2013-02-20T12:26:46.777
> 
> 标签：ruby, nokogiri

在下面的代码片段中，我想在没有类属性的情况下获得 <b> 标记的第一次出现。

```
<html>
<body>
     <p>This is the <b class="abc">text in bold with a class attribute</b> and the following is <b> text in bold without a class attribute</b>
</body>
</html> 
```

任何指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:06:07.647

That would be:

```
doc.at('b:not([class])') 
```

# javascript - 在谷歌地图 api 中关闭出口

> ID：14979850
> 
> 赞同：3
> 
> 时间：2013-02-20T12:26:47.550
> 
> 标签：javascript, google-maps-api-3

所以我把地图看得很像我想要的样子，除了爱立信上面的 4 个出口。我无法在 googles api 网站上找到正确的参考资料来解决这个问题。我想要么完全摆脱它们，要么将它们转回正常的绿色阴影，出口编号（1,2,3 ..）为白色。 [http://jsfiddle.net/DKEhf/1/](http://jsfiddle.net/DKEhf/1/)

```
styles:[
    { featureType: "road", elementType: "labels",  stylers: [ { color: "#FD5E0F" } ] },
    { featureType: "road", elementType: "labels", stylers: [ { weight: "0.5" }, { lightness: "20" } ] },
    { featureType: "landscape", elementType: "geometry.fill", stylers: [ { color: "#FF7F50" }, { lightness: "70" } ] },
    { featureType: "road.highway", elementType: "labels", stylers: [ { visibility: "off" } ] },
    { featureType: "administrative.land_parcel",  stylers: [ { visibility: "off" } ] }, 
```

有任何想法吗？谢谢！

# php - MySQL 在一个查询中将 2 个表连接在一起

> ID：14979852
> 
> 赞同：0
> 
> 时间：2013-02-20T12:27:04.460
> 
> 标签：php, mysql

我有 2 个要加入的查询，但我以前从未真正做过。希望你们中的一个明亮的火花可以提供帮助。

它正在显示待售企业。第一个查询很好。

```
SELECT DISTINCT * FROM businesses WHERE business_asking_price > 1 AND business_location = 11 ORDER BY business_id DESC 
```

以上搜索特定价格内的所有企业，以及查找伦敦的所有企业。

到现在为止还挺好。

但令我头疼的是业务类型。一个企业（比方说美发师）可以有多种业务类型类别。在这种情况下，它是健康/美容和美发沙龙。

因此，这些类别位于名为 bus_parents 的不同表中：

```
bus_parent_id  |   bus_parent_parent | bus_parent_child

176            |          56         |         42
177            |          56         |         43
181            |          56         |         46
202            |          56         |         57 
```

bus_parent_id 显然是唯一的 id

bus_parent_parent 是业务类型 ID

bus_parent_child 是企业 ID

所以我真的想把这两个查询包装在一起，这样它就可以找到第一个查询的所有业务，然后进一步缩小它们的范围，这样它也只显示 bus_parent_parent 内的业务。

希望我已经清楚地表明我正在尝试做什么。

是我追求的 JOIN 还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:34:24.400

使用 JOIN 尝试以下 SQL：

```
SELECT DISTINCT businesses.* 
FROM businesses 
INNER JOIN bus_parents ON businesses.business_id = bus_parents.bus_parent_child 
WHERE businesses.business_asking_price > 1 
AND businesses.business_location = 11 
AND bus_parents.bus_parent_parent = 56 
ORDER BY businesses.business_id DESC 
```

它将检索所有类型id = 56的业务，您可以根据需要更改此参数。

根据您对 bus_parents 中每个字段的描述，我用来`JOIN`检索所需的结果。（缩小业务类型 ID）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:36:03.743

如果我对您的理解正确，我认为您想要这样的东西：

```
SELECT DISTINCT * FROM businesses 
LEFT JOIN business_type ON business_type.bus_parent_child = business.id 
WHERE business_asking_price > 1 AND business_location = 11 
AND business_type.bus_parent_parent = <Your desired parent> 
ORDER BY business_id DESC 
```

这是加入 business 到 business_type on`business_type.bus_parent_child = business.id`

带有附加的 WHERE 子句`type.bus_parent_parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:39:20.500

```
SELECT DISTINCT businesses.* 
FROM businesses a
INNER JOIN bus_parents b ON a.business_id = b.bus_parent_parent 
WHERE a.business_asking_price > 1 
AND a.business_location = 11 
ORDER BY a.business_id DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:43:16.093

```
SELECT * FROM businesses b WHERE business_asking_price > 1 AND business_location = 11 

and (select bus_parent_id from bus_parents where bus_parent_child=b.bussiness_id and bus_parent_parent=in(56,57,58) limit 1) != NULL

ORDER BY business_id DESC 
```

这里我假设 business_id 是业务表的主键列。

您应该避免在大型查询上使用 distinct，因为它在大型表上可能会非常费力（缓慢）。特别是如果您请求许多列。

# gradle - Gradle 依赖版本 '+' 符号

> ID：14979856
> 
> 赞同：29
> 
> 时间：2013-02-20T12:27:13.040
> 
> 标签：gradle

我试图了解 Gradle 如何使用“+”号处理依赖版本，如示例 8.1 所示：http: [//www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html](http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html)

```
testCompile group: 'junit', name: 'junit', version: '4.+ 
```

文档说明这将获得一个 junit >= 4.0 的版本。如何获得大于（或等于）5.10 的依赖版本？会是`5.10+`还是`5.1+`？前者似乎无法正常工作，但后者可以。如何获得大于或等于 1.22 的依赖项？`1.2+`? 在这种情况下，如果版本 1.21 存在并且是最新版本，我想失败，因为我想要大于或等于 1.22，但`1.2+`会寻找 >= 1.20。我该如何指定？这可能吗？我似乎找不到更多关于它的文档。

编辑：我倾向于认为它`1.2+`等同于`1.2([0-9]+)`. 这是正确的思维方式吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T18:29:24.157

> 在这种情况下，如果版本 1.21 存在并且是最新版本，我想失败，因为我想要大于或等于 1.22，但 1.2+ 将寻找 >= 1.20。我该如何指定？这可能吗？

我认为没有关于此的任何文档，但由于 Gradle 最初使用 Ivy 来实现其所有依赖项管理功能，因此我查看了有关动态版本的 Ivy 文档：

[http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html)

它只比 Gradle 文档多一点。我尝试在 Gradle 中使用 Ivy 风格的版本范围进行试验：

```
compile group: 'log4j', name: 'log4j', version: '[1.2.12,1.2.17]' 
```

令人惊讶的是，它似乎*有时会*根据版本范围起作用。在上面的示例中，它解析为`1.2.17`.

我知道这并不能完全解决您的问题（我也很好奇），但希望它可以为您提供一些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-19T21:31:40.210

我认为问题在于您在正则表达式方面错误地考虑了“+”。它并不意味着被解读为正则表达式元素（“一个或多个数字字符”），而是“每个领先的 SEMVER 组件都与提供的模式匹配的最新可用版本”。关于为什么不推荐使用这种表示法的参考资料可以在以下位置找到：[http ://central.sonatype.org/articles/2014/Oct/28/enforcing-valid-dependency-versions/](http://central.sonatype.org/articles/2014/Oct/28/enforcing-valid-dependency-versions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T22:29:39.623

Gradle 文档[声明版本和范围](https://docs.gradle.org/current/userguide/single_versions.html)

> 如何获得大于（或等于）5.10 的依赖版本？

根据

> 前缀版本范围：例如 1.+、1.3.+
> 
> *   仅包含与 + 之前部分完全匹配的版本。
> *   范围 + 本身将包括任何版本。

`+`使用符号无法实现。

它可以表示为`[5.10,)`

# c# - Unity3d OnTriggerEnter c#

> ID：14979857
> 
> 赞同：0
> 
> 时间：2013-02-20T12:27:16.437
> 
> 标签：c#, unity3d

您好，当一个物体穿过一个空物体时，我正试图让一个计分器运行。下面是我正在使用的代码。

```
private void OnTriggerEnter(Collider other){
     var collider = projectile.gameObject;
     score = score+1;
    // Debug.Log(collider);
    Debug.Log(score);
} 
```

当弹丸穿过物体时分数会增加，但如果我射击第二个，分数不会再次增加，直到第一个弹丸回滚并变为两个。

我想知道的是如何在通过空对象一秒钟后销毁对象，在存储该分数的同时将分数增加一，还允许另一个对象通过并重复前面的步骤但将分数增加到 2等等。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:09:58.680

> 当弹丸穿过物体时分数会增加，但如果我射击第二个，分数不会再次增加，直到第一个弹丸回滚并变为两个。

我猜你的分数变量是在你的射弹脚本实例中定义的，所以不同的射弹有不同的分数变量实例。我建议您将您的分数存储在弹丸脚本之外的其他地方。

使用一个类（es.Score Manager）来存储分数并在你的射弹脚本中添加对它的引用。

> 我想知道的是如何在通过空对象一秒钟后销毁对象，在存储该分数的同时将分数增加一，还允许另一个对象通过并重复前面的步骤但将分数增加到 2等等。

这不会解决你的问题。顺便说一句，您可以使用[Object.Destroy](http://docs.unity3d.com/Documentation/ScriptReference/Object.Destroy.html?from=GameObject)方法销毁对象：

```
GameObject aGameObject;
...
GameObject.Destroy(aGameObject); //this will destroy the object referenced by aGameObject 
```

# r - 如何从字符串变量创建文本连接？

> ID：14979858
> 
> 赞同：7
> 
> 时间：2013-02-20T11:29:00.513
> 
> 标签：r

这应该很快就能回答：

我想使用 jags 包的`jags.model`功能。在许多论点中，它需要论点`file`：

> `file`- 包含以 BUGS 语言的 JAGS 方言描述的模型的文件名。
> 
> 或者，文件可以是可读的文本模式连接，或完整的 URL。

我想将字符串传递给这个参数。解决此问题的一种方法是将字符串写入临时文件并传递文件名。但我希望有一种直接的方法可以将字符串转换为连接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T12:40:43.317

您可以`textConnection`像这样使用（这里使用`read.csv`函数，但我想`jags.model` 应该以相同的方式工作）：

```
mytext <- "x,y\n1,2\n3,4"
read.csv(textConnection(mytext))
#   x y
# 1 1 2
# 2 3 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T08:26:28.257

我只想补充一点关于`textConnection`. `jags.model(textConnection(x)...)`当我在大型 for 循环中使用时（即超过 125 次左右的迭代），我偶尔会遇到问题。从本质上讲，似乎 textConnections 正在打开，但没有关闭，然后我最终会收到一个错误，在 textConnections 也已打开说明`all connections are in use`.

我不完全确定最佳解决方案，但我认为您可以执行以下操作：

```
zz <- textConnection(x)
jags.model(zz, ...)
close(zz) 
```

# java - 通过调用 JFrame 来验证控件

> ID：14979861
> 
> 赞同：0
> 
> 时间：2013-02-20T12:27:29.130
> 
> 标签：java, swing, validation, jframe, cardlayout

有一个 JFrame，我在其中放置了 2 个面板，并且两个面板都提供了卡片布局

通过图像 JFrame 有 2 个面板之一是

面板窗格 >> 我将在哪里调用 panel1、panel2、panel3，其中所有 3 个面板都有一些控件，如 JtextField、jComboBox 等。

按钮窗格>>在此面板中，当按下下一个按钮时，面板具有下一步和返回按钮（如果面板窗格显示面板 1 则）面板 1 控件得到验证

之类的

![在此处输入图像描述](../Images/023a2e9337b843ac5478c0b8557345a5.png)

```
 `package Code;

/**
 * 
 * @author Rohini
 */

import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class InvoicePage extends JFrame implements ActionListener{

    JLabel newInvoic, invoiceNol, invoiceNo;
    JButton clinfoNext, payentryNext, termentryNext;
    JButton clinfoBack, payentryBack, termentryBack;

    JPanel buttonPane, clinfoBPane, payentryBPane, termentryBPane;
    JPanel panelpane, client_info, invoice_entry, term_entry;

    Container c = this.getContentPane();

    CardLayout cardmain, cardbutton;

    Font head = new Font("Times New Roman",Font.BOLD,20);
    Font subheadb = new Font("Times New Roman",Font.BOLD,14);
    Font subheadp = new Font("Times New Roman",Font.PLAIN,14);

    public InvoicePage() throws HeadlessException {

        super("Thane Bharat Sahakari Bank : New Invoice");

    //  initialization of variables
        cardmain  = new CardLayout();
        cardbutton = new CardLayout();        

        newInvoic = new JLabel("New Invoice");
        invoiceNol = new JLabel("Invoice No");
        invoiceNo = new JLabel("DB Value of id");

        clinfoNext = new JButton(" Next > > ");
        payentryNext = new JButton(" Next > > ");
        termentryNext = new JButton(" Next > > ");
        clinfoBack = new JButton(" < < Back ");
        payentryBack = new JButton(" < < Back ");
        termentryBack = new JButton(" < < Back ");

        buttonPane = new JPanel(cardbutton);
        clinfoBPane = new JPanel(null);
        payentryBPane = new JPanel(null);
        termentryBPane = new JPanel(null);

        panelpane = new JPanel(cardmain);
        client_info = new clientInfo();
        invoice_entry = new discription();
        term_entry = new termentry();

    //  setting properties of variabels

        panelpane.add(client_info,"Client_info");
        panelpane.add(invoice_entry,"invoice_entry");
        panelpane.add(term_entry,"term_entry");

        buttonPane.add(clinfoBPane,"clinfoBpane");
        buttonPane.add(payentryBPane,"payentryBPane");
        buttonPane.add(termentryBPane,"termentryBPane");

        clinfoBPane.add(clinfoBack);
        clinfoBPane.add(clinfoNext);
        payentryBPane.add(payentryBack);
        payentryBPane.add(payentryNext);
        termentryBPane.add(termentryBack);
        termentryBPane.add(termentryNext);

        newInvoic.setFont(head);
        invoiceNol.setFont(subheadb);
        invoiceNo.setFont(subheadp);

        clinfoNext.addActionListener(this);
        payentryNext.addActionListener(this);
        termentryNext.addActionListener(this);
        clinfoBack.addActionListener(this);
        payentryBack.addActionListener(this);
        termentryBack.addActionListener(this);

    //  setting Bounds
        Bounds(0,0);

    //  Adding Components
        c.add(newInvoic);
        c.add(invoiceNol);
        c.add(invoiceNo);
        c.add(buttonPane);
        c.add(panelpane);

    //  Form properties
        cardbutton.show(buttonPane,"clinfoBpane");
        cardmain.show(panelpane,"Client_info") ;        
        c.setLayout(null);
        c.setBackground(Color.WHITE);
        //clinfoBPane.setBackground(Color.WHITE);

        this.setResizable(true);
        this.setVisible(true);
        setDefaultCloseOperation(3);
        System.out.println("");
    }
    public void Bounds( int i, int j ){
        if(i == 0){
            newInvoic.setBounds(250,0,150,30);
            invoiceNol.setBounds(400,30,100,25);
            invoiceNo.setBounds(500,30,100,25);

            buttonPane.setBounds(0,410,610,50);
            panelpane.setBounds(0,50,610,350);
            clinfoNext.setBounds(430,5,150,30);
            clinfoBack.setBounds(25,5,150,30); 
            this.setSize(625,505);
            this.setLocation(300,150);
        }
        else if(i == 1){
            newInvoic.setBounds(350,0,150,30);
            invoiceNol.setBounds(600,30,100,25);
            invoiceNo.setBounds(700,30,100,25);

            buttonPane.setBounds(0,440,830,50);
            panelpane.setBounds(0,50,815,390);
            if(j == 0){
                payentryNext.setBounds(640,5,150,30);
                payentryBack.setBounds(30,5,150,30);
            }
            else if(j == 1){
                termentryNext.setBounds(640,5,150,30);
                termentryBack.setBounds(30,5,150,30);
            }           
            this.setSize(830,525);
            this.setLocation(200,100);
        }
        else{

        }
    }
        public void actionPerformed(ActionEvent ae){

            if(ae.getSource() == clinfoNext){
                cardbutton.show(buttonPane,"payentryBPane");
                cardmain.show(panelpane,"invoice_entry") ;
                Bounds(1,0);

            }
            else if(ae.getSource() == clinfoBack){
                this.dispose();
                Mainfrm mf = new Mainfrm();
                mf.setVisible(true);
            }
            else if((ae.getSource() == payentryNext)){
                Bounds(1,1);
                cardbutton.show(buttonPane,"termentryBPane");
                cardmain.show(panelpane,"term_entry") ;
            }
            else if(ae.getSource() == payentryBack){
                Bounds(0,0);
                cardbutton.show(buttonPane,"clinfoBpane");
                cardmain.show(panelpane,"Client_info") ;
            }
            else if(ae.getSource() == termentryBack){
                cardbutton.show(buttonPane,"payentryBPane");
                cardmain.show(panelpane,"invoice_entry") ;
                Bounds(1,0);
            }
            else if(ae.getSource() == termentryNext){
                JOptionPane.showConfirmDialog(this,"Are you sure that the invoice is over","Confirmation", JOptionPane.YES_NO_CANCEL_OPTION, 0);

            }
            else{

            }
        }
    public static void main(String []avi){

         new InvoicePage();
    } 
}` 

```

# c# - 在winform c#中动态添加Checkbox检查事件

> ID：14979864
> 
> 赞同：0
> 
> 时间：2013-02-20T12:27:36.443
> 
> 标签：c#, checkbox

我在表单上动态添加了 checkboxex。在选中复选框时，我想执行一些操作。下面是我正在使用的代码

```
 private void GenerateSidePanelControls()
    {
        try
        {
            int topPosition = 15;
            foreach (SideMenuItem sItem in _sideMenuItemList)
            {
                CheckBox objLabel = new CheckBox();
                objLabel.Name = sItem.TagName;
                objLabel.Text = sItem.TagName;
                objLabel.Left = 15;
                objLabel.Top = topPosition;
                objLabel.Font = _normalFont;
                sidePanel.Controls.Add(objLabel);
                topPosition += 35;

                objLabel.CheckedChanged += new System.EventHandler(this.SideLabel_Click);
                               }
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

      private void SideLabel_Click(object sender, EventArgs e)
    {
        int topPosition = 20;
        try
        {
            Cursor = Cursors.Default;
            CheckBox objLabel = (CheckBox)sender;

            objLabel.Name = objLabel.ToString();
            objLabel.Font = _boldFont;
               foreach (Control ctrl in sidePanel.Controls)
            {
                if (ctrl is CheckBox)
                {
                    if (((CheckBox)objLabel).Checked == true)
                    {

                        TextBox txt = new TextBox();
                        txt.Text = "Checked";
                        sidePanel.Controls.Add(objLabel);
                        topPosition += 25;
                    }

                }
            }
                       }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);

        }
    } 
```

在我在运行时检查复选框之前得到结果。我需要在运行时选中复选框后执行该操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:47:43.340

您需要添加新创建的 TextBox ：

```
 TextBox txt = new TextBox();
 txt.Text = "Checked";
 //sidePanel.Controls.Add(objLabel);
 sidePanel.Controls.Add(txt);
 topPosition += 25; 
```

我根据你的评论回答`When i check the checkbox at runtime, nothing happens.`

要考虑的其他*注意事项：*

*   您正在循环`foreach ctrl`而不是使用`ctrl`. 所以循环是没用的。
*   你可以改变这一行

    ```
    if (((CheckBox)objLabel).Checked == true) 
    ```

    简单地

    ```
    if (objLabel.Checked) 
    ```

# scala - Scala和泛型的陌生感

> ID：14979866
> 
> 赞同：1
> 
> 时间：2013-02-20T12:27:39.320
> 
> 标签：scala, generics

我遇到了这种我不明白的类型不匹配：

```
error: type mismatch;
found   : org.fluentlenium.core.domain.FluentList[_<:org.fluentlenium.core.domain.FluentWebElement]
required: org.fluentlenium.core.domain.FluentList[?0(in value $anonfun)] where type ?0(in value $anonfun) <: org.fluentlenium.core.domain.FluentWebElement
Note: org.fluentlenium.core.domain.FluentWebElement >: ?0, but Java-defined class FluentList is invariant in type E.
You may wish to investigate a wildcard type such as `_ >: ?0`. (SLS 3.2.10) 
```

事实上，精确的“找到”值是以下类型：

`org.fluentlenium.core.domain.FluentList[_<:org.fluentlenium.core.domain.FluentWebElement]`=> 变体类型参数

我无法代表这样的情况，其中“找到”值是变体类型参数。我尝试了这个简单的代码段：

```
public class CarList<E extends Car> implements Collection<E> { // written in Java
   //overriden methods from Collection here
}

public class Car{} // written in Java

public Ferrari extends Car{} //written in Java

object Main extends App {  

   val carList: CarList[Car] = new CarList[Car]

   val l: CarList[Ferrari] = carList

} 
```

发生的编译错误非常相似：

```
error: type mismatch;
found   : app.CarList[app.Car]     //but in this case, logically it's an invariant type: Car
required: app.CarList[app.Ferrari]
Note: app.Car >: app.Ferrari, but Java-defined class CarList is invariant in type E.
You may wish to investigate a wildcard type such as `_ >: app.Ferrari`. (SLS 3.2.10)
val l: CarList[Ferrari] = carList
                                     ^ 
```

如何修改我的代码片段以完全结束：

*   与 ' 的错误相同类型的错误`FluentList`（在“找到”值中精确变体类型参数）：
    `found : app.CarList[_ :> app.Car]`
*   来自编译器的相同建议：
    `You may wish to investigate a wildcard type such as _ >:`

这样我就可以弄清楚问题的根源是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:52:50.340

在您的 java 示例中，您似乎已经颠倒了两件事。您不能将汽车列表分配给法拉利列表。

考虑到这一点，我将片段解释如下：

```
class CarList[E <: Car]

class Car
class Ferrari extends Car

object Main extends App {

  val carList = new CarList[Ferrari]

  // this now throws a compiler error
  val l: CarList[Car] = carList
} 
```

编译器错误如下：

```
type mismatch;
found: CarList[Ferrari] required: CarList[Car]
Note: Ferrari <: Car, but class CarList is invariant in type E.
You may wish to define E as +E instead. 
```

所以编译器实际上帮助了我们。这个定义：

```
class CarList[E <: Car] 
```

告诉编译器我们有一个扩展列表`Car`。

但是，这并没有告诉编译器`CarList[Ferrari]`也扩展了`CarList[Car]`. 为了告诉编译器是这种情况，我们需要`E`与`+`.

因此，为了解决这个错误，我们可以做两件事：

1.  定义`CarList`为`CarList[+E]`，表示您不在乎其中的内容，但如果`A`extends`B`则`CarList[A]`可以考虑扩展`CarList[B]`
2.  定义`CarList`为`CarList[+E <: Car]`，表示与 1 相同。但对 的类型有额外的限制，`E`因为它必须是`Car`。

[这个关于方差的问题](https://stackoverflow.com/questions/663254/scala-covariance-contravariance-question)可能会提供额外的信息。

# ios - ios - 链接到应用商店中另一个应用的正确方法是什么？

> ID：14979867
> 
> 赞同：2
> 
> 时间：2013-02-20T12:27:39.217
> 
> 标签：ios, ios6

如果我创建一个 UIWebView，我可以直接访问网络上应用程序的 url，但这似乎并不完全有意义，因为可以在设备上访问应用程序商店。

人们从应用程序内链接到其他应用程序是否存在“首选”或常见方式？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:38:20.850

您必须使用其他应用程序的 AppStore 条目的 URL 启动系统浏览器（Safari），然后用户会看到 Safari 是如何打开的，然后 AppStore 突然在其前面启动并显示所选的应用程序信息...

```
NSString *url = @"http://AppStore.com/<app_id_here>";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

希望这是您正在寻找的...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T12:55:15.580

我在 App Store 上将我所有的应用程序链接到自己，以便用户可以“在 App Store 上评分”。

这就是我的做法（使用`itms-apps:`前缀）：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:
                                                @"itms-apps://itunes.apple.com/app/gift-idea+/id561981438?mt=8"]]; 
```

确保用您自己的方式修改链接。您可以通过选择价格旁边的箭头从 iTunes 获取链接，然后选择`Copy Link`。

您可以将此代码放在您想在 App Store 中打开应用程序的任何位置。如果您将链接放在一个`HTML`文件中（我不能 100% 确定是否可以）在 webView 中使用，我强烈建议您为不使用 iOS 设备的用户提供后备（也就是说，如果您的网站文件是在互联网上，而不是应用程序的本地）。

您可能会发现[此文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007891-SW1)对 URL 方案参考很有帮助。

# c# - 使用默认参数调用重载方法

> ID：14979868
> 
> 赞同：1
> 
> 时间：2013-02-20T12:27:39.107
> 
> 标签：c#, call, parameter-passing

假设我们有两种方法

```
public void foo(int a, int b, bool c = false)
{
    //some code
}

public void foo(int a, int b, bool d, bool c = false)
{
    //some other code
} 
```

当我调用`foo(1,2,true)`它时，它指的是第一种方法。有没有办法通过只传递 3 个参数来调用第二种方法？

我在生产代码中发现了类似的东西：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:29:18.857

```
foo(1,2,d:true); //will call the second method. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:32:42.847

命名参数只是一个参数，具有*默认*值。

在*您*提供的代码中，您只需`overload`. 注意参数（未命名）的数量是不同的。

其他问题可能是：

我可以做这样的事情吗？

```
public void foo(int a, int b, bool c)
{
    //some code
}

public void foo(int a, int b, bool c = false)
{
    //some other code
} 
```

答：不，你不能。因为，正如我所说，命名参数只是一个具有默认值的普通参数，所以这不会编译，因为已经有一个签名*完全相同的方法。*

# regex - 如何排除边界之间的文本？

> ID：14979870
> 
> 赞同：1
> 
> 时间：2013-02-20T12:27:44.700
> 
> 标签：regex

我试图理解为什么我的示例正则表达式不能按我想要的方式工作：

```
test-text: Filename: test myFile 123 .txt
pattern: (?<=Filename:.*?myFile)(.*?)(?=.txt)
Expected Result: 123 
```

我知道向前/向后在这里并不理想，但这只是为了学习目的，试图理解。

那么为什么不起作用`.*?myFile`呢？如果我删除它，模式匹配`test myFile 123`. 但我想查找`Filename:`，然后排除所有内容，并在最后一个语句`myFile`之后和之后获取所有内容。`.txt`我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:36:14.760

由于正则表达式匹配的复杂性，不支持可变长度的lookbehind 模式。您应该会收到一条错误消息。这只是 Perl 正则表达式引擎的一个限制。

有一个类似的功能允许这样做：`\K`丢弃最后匹配左侧的所有内容。所以这个模式可能会像你期望的那样工作：

```
/Filename:.*?myFile\K(.*?)(?=.txt)/ 
```

然而，它与真正的lookbehind 不同，因为它不允许重叠匹配。

顺便说一句，这是您发布的第三个类似问题。根据您提供的信息，正确答案仍然是“不要为此使用环视”。如果您有理由要使用它们，您应该解释一下，以便我们可以提供更好的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:30:59.700

Lookbehind 断言必须具有**固定长度**。但你`.*?myFile`不是。

取决于您使用的语言，您可以：

`"(?<=Filename:)(.*?myFile\s*)([^\s]*?)(?=\s*.txt)"``group(2)`如果你喜欢向后看和向前看，那就得到吧。

或者

`"Filename:.*?myFile\s*([^\s]*)\s*\.txt"`并得到`group(1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:32:11.857

为什么这么复杂？

```
/myFile(.*?)\.txt$/ 
```

如果这就是您感兴趣的全部，只需捕获该组即可。无需环顾 IMO。

编辑：至于你的问题：可能你的正则表达式引擎不支持可变长度环视。

# c++ - 从整个项目访问通用类

> ID：14979874
> 
> 赞同：5
> 
> 时间：2013-02-20T12:27:59.740
> 
> 标签：c++

在我们的应用程序中有通用类（例如，保存项目配置参数的类），如下所示。

```
class DB{   
public:
int projectVersion
int somethingSoMuchImportantAllOverTheProject
};
extern DB* pDB; 
```

因为所有其他类都将使用这个类，所以它们都需要以某种方式访问​​它。我们的解决方案是放置“extern DB* pDB;” 在其头文件下，因此任何需要它的人都可以在包含头文件后访问它。我在想也许有更好的解决方案，并希望获得您对这种一般情况的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:41:10.337

这是一个单例。你可以找到很多关于它的讨论，但重要的是，隐藏类的构造函数，以便类的用户被迫使用一个对象。

# spring - 使用@transactional 进行集中回滚

> ID：14979875
> 
> 赞同：3
> 
> 时间：2013-02-20T12:28:01.197
> 
> 标签：spring, rollback, transactional

是否可以在使用时告诉 Spring 回滚异常`MyException`以及`RuntimeException`XML 配置`@transactional`？

我知道可以在注释中设置回滚，但如果我有很多服务都会设置相同的异常，这似乎是多余的。

我看到人们建议创建自定义事务注释，但我不想使用自定义注释并坚持使用 Spring 注释。

我知道可以使用建议，但从未见过可以同时使用注释的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:39:14.563

您可以通过使用 spring 事务建议标签来简单地实现这一点：

```
<tx:advice id="txAdvice">
      <tx:attributes>
      <tx:method name="*" rollback-for="MyException" no-rollback-for="OtherException"/>
      </tx:attributes>
    </tx:advice> 
```

检查 Spring doc 事务管理部分以获取更多详细信息： [http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)

# iphone - MapView 未显示蓝点当前位置

> ID：14979879
> 
> 赞同：2
> 
> 时间：2013-02-20T12:28:12.237
> 
> 标签：iphone, mkmapview, mapkit

在我的 iphone 应用程序中，我使用 MKMapview 来显示位置，这是第一次用蓝点显示当前位置。但是如果在地图中拖动并单击当前位置按钮，它不会显示蓝点（但我能够返回当前位置区域）

```
-(IBAction)currntLctnClick:(id)sender{
  [map setCenterCoordinate:map.userLocation.location.coordinate animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T09:04:49.960

考虑到您说您可以在首次加载时看到用户位置，因此可以安全地假设您已`setShowsUserLocation:`设置为 YES。

你`- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation`在你的视图控制器中实现了吗？

如果是这样，请务必避免为内置的用户位置标记提供注释视图。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    //check annotation is not user location
    if([annotation isEqual:[mapView userLocation]])
    {
        //bail
        return nil;
    }

    static NSString *annotationViewReuseIdentifer = @"map_view_annotation";

    //dequeue annotation view
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:annotationViewReuseIdentifer];

    if(!annotationView)
    {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationViewReuseIdentifer];
    }

    //set annotation view properties
    [annotationView setAnnotation:annotation];

    return annotationView;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:24:10.320

你实现了这个`viewForAnnotation`功能吗？您是否正在检查您没有为 MKUserLocation 绘制（或未能绘制）不同类型的引脚？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T14:12:56.133

用蓝点显示您的当前位置

```
- (void)viewDidLoad
{
    yourMapView.showsUserLocation=YES;
} 
```

单击按钮导航到您当前的位置

```
-(IBAction)currntLctnClick:(id)sender
{
    MKCoordinateRegion location = MKCoordinateRegionMakeWithDistance(yourMapView.userLocation.coordinate, 10000.0, 10000.0);

    [yourMapView setRegion:location animated:YES];
} 
```

**编辑**
或者，如果您的蓝点仍然不可见，那么只需`MapView`从 xib 中删除并再次拖放它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-13T12:47:54.580

对于所有通过搜索 GoogleMaps 解决方案来到这里的人 - 这是您需要设置为 true 的属性。

**斯威夫特 3.0**

```
self.mapView.isMyLocationEnabled=true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:35:05.893

```
 [map setShowsUserLocation:YES]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-06T12:37:18.997

**只需在 viewForAnnotation 方法中迭代时检查注释是否为*MKUserLocation*，如果为真则返回 nil。**

它是这样工作的，因为 MKUserLocation 也是 mapView.annotations 数组的一部分，您只需要通过它而不做任何修改。

```
func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {

guard !(annotation is MKUserLocation)  else { return nil }

// your viewForAnnotation code...                                              
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-06T13:52:28.037

只需添加，如果您使用的是 Interface Builder，请选择 Map View 并在 Attributes 部分中，确保`User Location`选中：

[地图视图属性](https://i.stack.imgur.com/FMFPy.png)

# spring - 客户端发送的请求语法不正确？

> ID：14979880
> 
> 赞同：1
> 
> 时间：2013-02-20T12:28:17.123
> 
> 标签：spring, jquery, spring-mvc

我有一个如下控制器

```
@Controller
public class SettingsController {
   @RequestMapping(value="/editname",method=RequestMethod.POST)
   public void editName(@RequestParam(value="firstname") String firstname,
                        @RequestParam(value="lastname") String lastname) {
      final Object principal = 
         SecurityContextHolder.getContext().getAuthentication().getPrincipal();
      try {
         jdbcPersonRepository.updateName(principal.toString(), firstname, lastname);
      } catch (SignInNotFoundException e) {
      }
    }
 } 
```

我有我的 ajax 表单提交。

```
 $(function() {
  //twitter bootstrap script
    $("button#submit").click(function(){
    var $form = $(this).closest("form");
    var type = $form.attr('method');
    $.ajax({
      type: $form.attr('method'),
      url: $form.attr('action'),
      data: $form.serialize(),
      dataType : "json",
        success: function(msg){
                $("#thanks").html(msg)
               $("#form-content").modal('hide');    
        },
        error: function(){
           //alert("failure");
        }
      });
});
}); 
```

我的 twitter bootstrap 模型具有触发 ajax 的形式如下

```
 <!-- Name Edit div -->
<div id="form-content" class="modal hide fade in" tabindex="-1">
  <form name="edit-form" action="<c:url value="/editname" />" method="post">
    <div class="modal-header">
      <h4>Edit Name</h4>
    </div>
    <div class="modal-body">
     <div class="control-group">
        <div class="controls">
          <ul class="nav nav-list">
            <li class="nav-header">First Name</li>
            <li><input type="text" placeholder="First Name" name="firstName" id="firstName" class="input-xlarge help-inline"></li>
            <li class="nav-header">Last Name</li>
            <li><input type="text" placeholder="Last Name" name="lastName" id="lastName" class="input-xlarge help-inline"></li>
         </ul>
        </div>
      </div>
    </div>
    <div class="modal-footer">
       <button id="submit"  class="btn btn-success">Update</button>
       <button class="btn" data-dismiss="modal" >Close</button>
    </div>
  </form>
</div> 
```

有没有人知道这个错误。?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:46:16.390

在方法声明中，`@RequestMapping`注释将参数名称指定为`firstname`和`lastname`。在 HTML 格式中，它们是`firstName`和`lastName`.

请求参数名称区分大小写......因此，它们不匹配，Spring 告诉您这是一个无效请求，因为缺少强制参数。

# php - 如何通过在php中使用锚将数组传递到另一个页面

> ID：14979882
> 
> 赞同：4
> 
> 时间：2013-02-20T12:28:19.030
> 
> 标签：php

我必须使用...将数组值从一个 php 页面传递到另一个 php 页面`<a href>`...这是我的编码

`$cluster`是一个数组

```
echo "<td><a href=myebon.php&cluster[]=".$cluster.">Click here to OFF</a></td>"; 
```

在*myebon.php*

```
$n=count($_GET[cluster]);
for($i=0;$i<=$n;$i++)
{
    echo $cluster[$i]=$_GET['cluster'][$i];
} 
```

在第二页中无法访问该值，它显示为数组而不是值。我也尝试过序列化概念......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:03:03.777

这是清晰的示例代码

第一个.php

```
<?php
$Mixed = array("1","2","3");
$Text = json_encode($Mixed);
$RequestText = urlencode($Text);
?>
<a href="second.php?cluster=<?php echo $RequestText; ?>">Click</a> 
```

第二个.php

```
<?php
$Text = urldecode($_REQUEST['cluster']);
$Mixed = json_decode($Text);
print_r( $Mixed);
?> 
```

我已经检查过了，它工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T12:38:27.380

使用[http_build_query](http://de3.php.net/manual/en/function.http-build-query.php)

```
$data = array('foo', 'bar', 'lol');

echo '<a href="myebon.php?' . http_build_query(array('cluster' => $data)) . '">link</a>'; 
```

输出

```
<a href="myebon.php?cluster%5B0%5D=foo&cluster%5B1%5D=bar&cluster%5B2%5D=lol">link</a> 
```

它可以用 检索`$_GET['cluster']`，例如：

```
foreach ($_GET['cluster'] as $val) { 
    // my work here, example:
    echo $val , "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T12:30:28.290

```
$string = serialize($array); 
```

然后传递字符串，在其他页面使用

```
$array = unserialize($string); 
```

试试这个 ：

```
echo "<td><a href=myebon.php&cluster=".serialize($cluster).">Click here to OFF</a></td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:40:30.543

我建议你像下面这样传递数组：

```
//QueryString Variable
$qs = '';
foreach($cluster as $cl)
    $qs .= "&cluster[] =".$cl; 
```

然后在链接构建中使用以下变量：

```
echo "<td><a href=myebon.php?a=1".$qs.">Click here to OFF</a></td>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T12:46:41.130

将 JSON_ENCODE 与 URLENCODE 一起使用

第一的

```
$Text = json_encode(array('foo', 'bar', 'lol'));
$RequestText =urlencode($Text); 
```

然后

```
echo "<td><a href=myebon.php&cluster=".$RequestText.">Click here to OFF</a></td>"; 
```

二：myebon.php

```
$Text = urldecode($_REQUEST['cluster']);
$Mixed = json_decode($Text); 
```

这将正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T09:45:35.460

我的第一页的编码

```
$Text = json_encode($cluster);
$RequestText =urlencode($Text);
echo '<table>';
for($i=0;$i<$n;$i++)
{
 for($x=0;$x<=$c1;$x++)
 {
     if($cluster[$i]==$ebclus[$x])
     {    

         echo "<tr><td>".$cname[$i]."</td><td>".$cluster[$i]."</td><td>".$statusid[$x]."</td>";
         if($statusid[$x]==ON)
         {
             echo "<td><a href=myebon.php?&dept=".$dept."&branch=".$branch."&end=".$c1."&start=".$i."&cluster=".$RequestText.">Click here to OFF</a></td>";
         }  
         elseif($statusid[$x]==OFF)
         {
             echo "<td><a href=myebon.php?&dept=".$dept."&branch=".$branch."&end=".$c1."&start=".$i."&cluster=".$RequestText.">Click here to ON</a></td>";
         }
     }
 }   
} 
```

myebon.php

```
$dept=$_GET[dept];

$branch=$_GET[branch];
$end=$_GET[end];
$start=$_GET[start];
$Text = urldecode($_REQUEST['cluster']);
$Mixed = json_decode($Text);
echo $Mixed;
for($i=0;$i<=$end;$i++)
{
    echo $Mixed[$i];
} 
```

答案显示为 [\"73\",\"71\",\"73\"]

# drupal - 如何在drupal 7中显示标题字段之前的字段

> ID：14979884
> 
> 赞同：1
> 
> 时间：2013-02-20T12:28:30.550
> 
> 标签：drupal

如何在节点视图中的标题字段之前显示字段值，特别是 drupal 7 中的 cck

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:11:52.433

据我了解，这不是他想要更改的字段的顺序，而是在其名称/标题之前显示字段的值，这无法通过 admin/structure/types/manage/article/display 直接实现。那里的可能值是隐藏的、内联的和上面的。我不是主题，只是做了搜索，发现了这个： [https](https://drupal.stackexchange.com/questions/1553/displaying-a-field-before-node-title-in-drupal-7) : //drupal.stackexchange.com/questions/1553/displaying-a-field-before-node-title-in-drupal-7 从那个开始回答它很容易达到你的目标。如果您安装了 devel 模块，请启用 display $page 数组设置，然后找到您要显示的标题并将其定位在您的渲染表达式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:38:16.197

例如，在文章中，您希望在标题之前显示任何进入管理-> 结构-> 内容类型的字段。在那里您可以找到内容类型列表。在那里你可以找到文章内容类型的管理字段。只需单击它，您就可以在文章内容类型中找到字段列表。

只需拖放到任何字段上方并将其放在标题字段上方即可。

希望能帮助到你。

# java - 通过 Javamail 发送电子邮件

> ID：14979886
> 
> 赞同：0
> 
> 时间：2013-02-20T12:28:32.040
> 
> 标签：java, jakarta-mail

我一直在尝试使用 javamail api 发送电子邮件。来自 smtp 服务器 (smtp.live.com) 的调试显示 550 5.3.4 未采取请求的操作；要继续发送消息，请登录您的帐户。

它似乎可以很好地创建消息，但不允许它发送。任何想法为什么？

```
 try
     {
     // Setup properties for e-mail server
     Properties props = System.getProperties();
     props.put("mail.smtp.host", mConfig.getEmailHost());
     props.put("mail.smtp.starttls.enable", "true");
     props.put("mail.smtp.auth", "true");
     props.put("mail.smtp.port", "587");

     // Get a Session object
     Session session = Session.getInstance(props, new MyAuthenticator());
     session.setDebug(true);
     Transport transport = session.getTransport("smtp");

     // Create message
     MimeMessage message = new MimeMessage(session);

     // Add the to/from fields
     message.setFrom(new InternetAddress(mFromAddr, mFromName));
     message.addRecipient(Message.RecipientType.TO, new InternetAddress(mToAddr));
     if (mCCAddrs != null)
        {
        for (int i=0; i<mCCAddrs.length; i++)
           message.addRecipient(Message.RecipientType.CC, new InternetAddress(mCCAddrs[i]));
        }
     // Add Subject
     message.setSubject(mEmailSubject);

     // Setup multipart message for including the attachment
     Multipart multipart = new MimeMultipart();

     // Create message body
     BodyPart messageBodyPart = new MimeBodyPart();
     messageBodyPart.setText(mEmailBody);
     multipart.addBodyPart(messageBodyPart);

     if (mAttachmentName != null)
        {
        // Create message attachment
        BodyPart messageAttachmentPart = new MimeBodyPart();
        messageAttachmentPart.setDataHandler(new DataHandler(new ByteArrayDatasource(data)));
        messageAttachmentPart.setFileName(mAttachmentName);
        multipart.addBodyPart(messageAttachmentPart);
        }

     // Send message
     message.setContent(multipart);
     transport.connect(mConfig.getEmailHost(), mConfig.getEmailUser(), mConfig.getEmailPassword());
     transport.sendMessage(message, message.getAllRecipients());
     transport.close();
     }
  catch (Exception ex)
     {
     ex.printStackTrace();
     throw new Exception("Failed to send e-mail: " + ex.getMessage());
     }
  ` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:33:15.390

您实际上需要在身份验证器中包含一些凭据信息。服务器向您指示它不允许匿名发送电子邮件。

```
new MyAuthenticator()

       ^-------- fill this with some credentials 
```

请注意，除非您的邮件服务器有一些特殊要求，否则通常使用[标准密码验证](http://docs.oracle.com/javaee/6/api/javax/mail/PasswordAuthentication.html)器就足够了：

* * *

**编辑/更新**

根据您的反馈，我仔细查看了您的错误消息。在我看来，Hotmail 要求您在使用它发送电子邮件之前登录到您设置的帐户并进行验证。在使用帐户之前，您可能需要使用网络浏览器登录并检查他们的激活链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:39:45.903

试试下面的代码。

```
 import java.util.Date;
    import java.util.Properties;
    import javax.mail.Address;
    import javax.mail.Message;
    import javax.mail.PasswordAuthentication;
    import javax.mail.Session;
    import javax.mail.Transport;
    import javax.mail.internet.AddressException;
    import javax.mail.internet.InternetAddress;
    import javax.mail.internet.MimeMessage;

    public class TestJavaMail {
    private String SMTP_PORT = "465";
    private String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";
    private String SMTP_HOST_NAME = "smtp.gmail.com";
    private String contentType = "text/html";
    private Properties smtpProperties;
    public TestJavaMail(){
    initProperties();
    }

    private void initProperties(){
    smtpProperties = new Properties();
    smtpProperties.put("mail.smtp.host", SMTP_HOST_NAME);
    smtpProperties.put("mail.smtp.auth", "true");
    smtpProperties.put("mail.debug", "true");
    smtpProperties.put("mail.smtp.port", SMTP_PORT);
    smtpProperties.put("mail.smtp.socketFactory.port",
    SMTP_PORT);
    smtpProperties.put ("mail.smtp.socketFactory.class",
    SSL_FACTORY);
    smtpProperties.put("mail.smtp.socketFactory.fallback",
    "false");
    }
    public static void main(String args[]) {
    String to= "sendToMailAddress";
    String from ="sender email_id";
    String pwd = "Sender password";
    String subject= "Java Mail";
    String body= "Testing to write Doc on java mail.";
    send(to, from, pwd , subject, body);
    }
    TestJavaMail.java Continued…
    public static void send(String to, final String from
    , final String pwd, String subject,String body){
    TestJavaMail tjm = new TestJavaMail();
    try
    {
    Properties props = tjm.getSmtpProperties() ;
    // -- Attaching to default Session, or we could start
    a new one --
    Session session = Session.getDefaultInstance(props,
    new javax.mail.Authenticator() {
    protected PasswordAuthentication
    getPasswordAuthentication() {
    return new PasswordAuthentication(from, pwd);
    }
    });
    // -- Create a new message --
    Message msg = new MimeMessage(session);
    // -- Set the FROM and TO fields --
    msg.setFrom(new InternetAddress(from));
    msg.setRecipients(Message.RecipientType.TO,
    InternetAddress.parse(to, false));
    // -- Set the subject and body text --
    msg.setSubject(subject);
    msg.setText(body);
    msg.setSentDate(new Date());
    // -- Send the message –
    Transport.send(msg);
    System.out.println("Message sent OK.");
    }
    catch (Exception ex)
    {
    ex.printStackTrace();
    }
    }
    public Properties getSmtpProperties() {
    return smtpProperties;
    }
    public void setSmtpProperties(Properties smtpProperties) {
    this.smtpProperties = smtpProperties;
    }
    }
    } 
```

希望它会帮助你。

# jquery - 在将标签附加到 DOM 之前设置标签 css 属性

> ID：14979888
> 
> 赞同：1
> 
> 时间：2013-02-20T12:28:33.227
> 
> 标签：jquery, html, css

`append()`我使用 jquery方法放入 DOM div 标签

我想要*在*放置之前，设置 div 标签一些 css 属性，例如`visibility: "hidden"`

这不起作用：

```
$(document).ready( function () {

     $(".child").css({
         visibility: "hidden"   
      });

      $("body").append('<div class="child"></div>');

}); 
```

[http://jsfiddle.net/SBAFk/](http://jsfiddle.net/SBAFk/)

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:32:27.410

您的代码无法工作，因为它没有创建新的 CSS 规则，而只是搜索匹配的元素 - 并且还找不到新元素。最简单的方法是创建元素，设置其 CSS 属性，然后将其添加到 DOM：

```
var div = $('<div class="child"></div>').css('visibility', 'hidden');
$('body').append(div); 
```

另一种选择是创建一个与选择器匹配的新 CSS 规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:33:19.923

您的代码中的问题是，jquery`child`在将其添加到 DOM 之前正在搜索类......因为它没有插入到 DOMtree 中，所以它将无法找到......`.css()`在附加 div 之后放置您的代码

```
$(document).ready( function () { 
  $("body").append('<div class="child"></div>');

  $(".child").css({
     visibility: "hidden"   
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/SBAFk/3/)

# multithreading - 线程总是在同一个核心上运行吗？

> ID：14979890
> 
> 赞同：1
> 
> 时间：2013-02-20T12:28:42.273
> 
> 标签：multithreading

线程一旦启动，是否总是在同一个 CPU 上运行，直到它终止？还是依赖于操作系统/实现？

我是出于好奇而问这个的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:42:12.070

一般来说，在多核盒子上，没有。如果可以使用相同的内核，则可以通过使用仍在 L1 缓存中的数据来获得优势，正如其他人所发布的那样，但是显式强制内核亲和性的缺点是不好的：

线程 X 被创建并绑定到核心 0。线程 X 运行。线程 X 在系统调用上阻塞，可能用于 I/O 或线程间通信。操作系统在核心 0 上运行线程 Y。线程 X 准备就绪，而核心 1、2 和 3 空闲。

怎么办？

不必要地抢占线程 Y？移动 Y 的开销，加上如果 Y 也绑定到核心 0 怎么办？再次阻止 X 直到 Y 阻止？阻止 X 在可能的情况下取得进展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:40:45.833

它取决于操作系统，但是通常操作系统会尝试使线程在相同的内核上运行，因为线程使用的数据更有可能仍被缓存在该内核中，从而提高了性能。

这一切都基于线程调度机制。

# android - Android - 多种屏幕尺寸的正确图像尺寸

> ID：14979894
> 
> 赞同：0
> 
> 时间：2013-02-20T12:28:59.777
> 
> 标签：android, android-layout, android-resources, android-resolution

尽管阅读了有关该主题的许多 Android 开发人员文档，但我仍在努力支持多种屏幕尺寸/密度。我的一个问题是我的图像应该是什么尺寸。我读过最好先为 hdpi 设计图像，然后使用大小比为 ldpi、mdpi 和 xhdpi 复制和调整图像大小。所以我有一个 400x83 的图像，它在 Nexus One/S 型设备 (480x800) 上看起来很棒，我已经为其他分辨率文件夹调整了它的大小。它在 5.4 英寸以下的设备上看起来不错，但超过该尺寸（Nexus 7、Galaxy Tab 等），图像看起来太小了。我的问题是，我实际上是否应该为我支持的最大物理屏幕设计图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:48:14.337

// 如果你是图形设计师，你需要先为 XHDPI 设计，然后你需要减少

```
75% for HDPI 
50% for MDPI 
```

只有你需要担心背景

你需要为不同的尺寸提供不同的背景

```
1280 x 800 
480 x 320
480 x 800
1280 x 720 
1024 x 600
... 
```

为此，您需要放置不同的文件夹，例如

```
drawable-hdpi
drawable-land-hdpi
drawable-land-ldpi
drawable-land-mdpi
drawable-land-xhdpi
drawable-ldpi
drawable-mdpi
drawable-nodpi
drawable-sw600dp-hdpi
drawable-sw600dp-mdpi
drawable-sw600dp-nodpi
drawable-sw600dp-xhdpi
drawable-sw720dp-nodpi 
```

[通过这个链接：](http://mobile.smashingmagazine.com/2011/06/30/designing-for-android/)

# mysql - 表 '/tmp/#sql_165_0.MYI' 的密钥文件不正确；尝试修复它

> ID：14979907
> 
> 赞同：2
> 
> 时间：2013-02-20T12:29:49.710
> 
> 标签：mysql

我只是检查我的 whm 它在服务器上显示重负载我单击负载然后我发现 mysql 在服务器上造成重负载。我刚刚检查了 mysql 错误日志，它多次显示此错误，我检查了我的 tmp 文件夹，它有 4 GB 的内存，但我发现错误大小大于 4 GB，但是 tmp 将显示它只使用了 12% 的可用内存内存中的任何人都可以告诉如何从这段代码中知道导致服务器负载过重的查询

这是错误

```
 130210  0:02:12 [ERROR] /usr/sbin/mysqld: Incorrect key file for table '/tmp/#sql_165_0.MYI'; try to repair it 
```

想知道查询以及它消耗了多少内存

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T13:41:55.410

这意味着临时表溢出了分配的文件系统空间。

```
ubuntu@server:/vol/mysql$ df
Filesystem     1K-blocks    Used Available Use% Mounted on
/dev/xvda1       8256952 7837084       440 100% / 
```

# sql - 带有数字和 % 字符的 SQL 正则表达式

> ID：14979910
> 
> 赞同：1
> 
> 时间：2013-02-20T12:29:51.540
> 
> 标签：sql, database, oracle

我需要在 Oracle db 中匹配以下字符串“50% off”。我创建了一个 SQL 查询。

```
 select *
     from table1
     where column1 like '%[0-9]+\% off%' ESCAPE '\'; 
```

但是，此查询不提供任何结果。此外，如何将“50% 折扣”和“50 美元折扣”与一个查询匹配？

```
'%[0-9]+\%? off%' ESCAPE '\' 
```

上面的一个也不起作用:(

我得到的唯一查询如下：

```
select *
         from table1
         where column1 like '%\% off%' ESCAPE '\'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T12:37:55.150

Oracle 中的[`LIKE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#i1034153)运算符只接受单字符 ( `_`) 和多字符 ( `%`) 通配符，不接受正则表达式。

而是使用以下[`REGEXP_LIKE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#i1048942)条件：

```
SQL>  WITH DATA AS (
  2   SELECT '50% off' txt FROM dual
  3   UNION ALL SELECT '$50 off' txt FROM dual)
  4   SELECT *
  5     FROM DATA
  6    WHERE regexp_like(txt, '([[:digit:]]+%)|(\$[[:digit:]]+) off');

TXT
-------
50% off
$50 off 
```

# sql - 修改sql表中已经包含数据的列的后续值

> ID：14979913
> 
> 赞同：0
> 
> 时间：2013-02-20T12:30:04.220
> 
> 标签：sql, sql-server, sql-server-2008

您好，我正在开展一个项目，我必须通过单击按钮将一些值存储在数据库中。这是创建表的代码：

```
create table dbo.Cpecial_Partner_Info_tbl
( 
[S.No] int identity(1,1),
[Partner ID] varchar(20),
[Partner Code] varchar(20),
[Partner Name] varchar(100),
[Partner Type] varchar(15),
[User ID] varchar(50) primary key,
[Password] varchar(50),
) 
```

在这张表中，我添加了一些值。现在我的要求是**合作伙伴 id**和**合作伙伴代码**值应该来自 s.no 值。例如，如果我的**s.no**值为“ **1** ”，则**partnerid**和**parnter code**值应分别为“ **part01** ”和“ **pc01** ”。我知道创建新表并使用我的条件的代码。这是我可以使用的代码：

```
create table dbo.Cpecial_Partner_Info_tbl
( 
[S.No] int identity(1,1),
[Partner ID] as 'PART' + right('0' + Convert(VarChar(10), [S.No]), 1) persisted,
[Partner Code] as 'PC' + right('0' + Convert(VarChar(10), [S.No]), 1) persisted,
[Partner Name] varchar(100),
[Partner Type] varchar(15),
[User ID] varchar(50) primary key,
[Password] varchar(50),
) 
```

但使用上面的代码意味着我必须重新创建表。所以我的问题是我可以在不重新创建表的情况下将上述条件应用于**合作伙伴 ID**和**合作伙伴代码（因为我已经在表中有一些重要的数据）？**提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:17:24.653

您可以执行以下操作来更新表并保留数据： 1\. 创建具有相同结构的新表 2\. 将数据从旧表复制到新表 3\. 禁用旧表中的所有外键 4\. 更新旧表 5.再次启用外键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:46:24.663

在将值插入表之前，将 slno 的最大值设置为变量并将变量设置为所有 3 列。

# java - 未指定时使用的默认“org.quartz.threadPool.threadCount”是什么？

> ID：14979917
> 
> 赞同：5
> 
> 时间：2013-02-20T12:30:25.730
> 
> 标签：java, spring, scheduled-tasks, quartz-scheduler

我在 Spring 应用程序中有一些计划任务，它们的配置如下：

```
<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <!-- Here the list of tasks -->             
        </list>
    </property>     
</bean> 
```

我遇到了一些问题（有些任务在应该运行的时候没有运行，但并不总是在很长一段时间后或在某些时候运行），我认为这可能是因为有很多任务（到目前为止 11 个）并且系统可以' t 同时运行它们。我曾想过`org.quartz.threadPool.threadCount`像这样设置来增加并行线程的数量：

```
<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <!-- Here the list of tasks -->             
        </list>
    </property>
    <property name="quartzProperties">
        <props>
            <prop key="org.quartz.threadPool.threadCount">15</prop>
        </props>
    </property>     
</bean> 
```

`org.quartz.threadPool.threadCount`但我想知道，当我不设置属性时，系统使用了多少线程？默认行为是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T13:03:38.170

当用我打开的源代码搜索“SchedulerFactoryBean.java”第一个链接（[SchedulerFactoryBean.java ）时：](http://www.docjar.com/html/api/org/springframework/scheduling/quartz/SchedulerFactoryBean.java.html)

```
public static final int DEFAULT_THREAD_COUNT = 10; 
```

该值稍后用于在*initSchedulerFactory*方法中设置*org.quartz.threadPool.threadCount ：*

 *```
mergedProps.setProperty(PROP_THREAD_COUNT, Integer.toString(DEFAULT_THREAD_COUNT)); 
```*

# c++ - 传递多维数组时的链接错误

> ID：14979919
> 
> 赞同：0
> 
> 时间：2013-02-20T12:30:29.537
> 
> 标签：c++, c, arrays, function, pointers

```
const int v1=16;
const int v2=16;
const int u1=4;
const int u2=4;

void display(int a[u1][u2],int u1,int u2);
void calculate(int a[v1][v2],int v1,int v2,int,int,int,int);
int main()
{
    int a[16][16];
    clrscr();
    for(int i=0;i<16;i++)
    for(int j=0;j<16;j++)
    {
      cout<<"enter element at position"<<i<<j<<":";
      cin>>a[i][j];
    }
    cout<<"\n";
    calculate(a,16,16,0,3,0,3);
    calculate(a,16,16,0,3,4,7);
    calculate(a,16,16,0,3,8,11);
    calculate(a,16,16,0,3,12,15);
    calculate(a,16,16,4,7,0,3);
    calculate(a,16,16,4,7,4,7);
    calculate(a,16,16,4,7,8,11);
    calculate(a,16,16,4,7,12,15);
    calculate(a,16,16,8,11,0,3);
    calculate(a,16,16,8,11,4,7);
    calculate(a,16,16,8,11,8,11);
    calculate(a,16,16,8,11,12,15);
    calculate(a,16,16,12,15,0,3);
    calculate(a,16,16,12,15,4,7);
    calculate(a,16,16,12,15,8,11);
    calculate(a,16,16,12,15,12,15);
    getch();
    return 0;
}

void calculate(int **a,int n,int m,int il,int iu,int jl,int ju)
{
    int q[4][4],i0=0,j0=0;
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<m;j++)
        {
            if(i>=il && i<=iu && j<=ju && j>=jl)
            {
                q[i0][j0]=a[i][j];
                if(j==ju)
                {
                    i0++;
                    j0=0;
                }
                else
                {
                    j0++;
                }
            }
        }
    }
    display(q,u1,u2);
} 
```

每当我在turbo C++中运行它时，代码的remaning都会在下面的注释中给出（即显示函数）

> 链接错误：未定义符号显示(int a[4]near*,int,int) 链接错误：未定义符号计算(int a[16]near*,int,int,int,int,int,int)

请告诉我为什么以及解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:14:32.850

这将编译。

```
const int v1=16;
const int v2=16;
const int u1=4;
const int u2=4;

void display(int a[u1][u2],int u1,int u2);
void calculate(int a[v1][v2],int v1,int v2,int,int,int,int);
int main()
{
    int a[16][16];
    clrscr();
    for(int i=0;i<16;i++)
    for(int j=0;j<16;j++)
    {
      cout<<"enter element at position"<<i<<j<<":";
      cin>>a[i][j];
    }
    cout<<"\n";
    calculate(a,16,16,0,3,0,3);
    calculate(a,16,16,0,3,4,7);
    calculate(a,16,16,0,3,8,11);
    calculate(a,16,16,0,3,12,15);
    calculate(a,16,16,4,7,0,3);
    calculate(a,16,16,4,7,4,7);
    calculate(a,16,16,4,7,8,11);
    calculate(a,16,16,4,7,12,15);
    calculate(a,16,16,8,11,0,3);
    calculate(a,16,16,8,11,4,7);
    calculate(a,16,16,8,11,8,11);
    calculate(a,16,16,8,11,12,15);
    calculate(a,16,16,12,15,0,3);
    calculate(a,16,16,12,15,4,7);
    calculate(a,16,16,12,15,8,11);
    calculate(a,16,16,12,15,12,15);
    getch();
    return 0;
}

void calculate(int a[v1][v2],int n,int m,int il,int iu,int jl,int ju)
{
    int q[4][4],i0=0,j0=0;
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<m;j++)
        {
            if(i>=il && i<=iu && j<=ju && j>=jl)
            {
                q[i0][j0]=a[i][j];
                if(j==ju)
                {
                    i0++;
                    j0=0;
                }
                else
                {
                    j0++;
                }
            }
        }
    }
    display(q,u1,u2);
}

void display(int a[u1][u2],int n,int m)
{
     for(int i=0;i<n;i++)
     {
           for(int j=0;j<m;j++)
                 cout<<a[i][j]<<setw(6);
           cout<<"\n"; 
     }
} 
```

祝你好运。

# c - 用源代码中的值替换变量的 C 编程工具

> ID：14979920
> 
> 赞同：1
> 
> 时间：2013-02-20T12:30:37.763
> 
> 标签：c, perl, gdb

我经常在 C 中调试数值例程。这意味着我使用 gdb 运行程序并单步执行要调试的函数。然后我通过使用 gdb 打印变量来将数值与我的期望进行比较。显然，这个过程对于较长的例程来说是乏味的。特别是，如果我更改例程并想与以前的结果进行比较，我需要记住后续运行之间不同变量的值。在某些情况下，如果我有一个工具可以自动将变量替换为执行期间遇到的数值，这将有很大帮助（特别是如果例程或多或少是线性的）。例如一个简短的（琐碎的）示例例程

```
myfunc(double a, double b)
{
  double tmp_a, tmp_b, c;

  tmp_a = a*a;
  tmp_b = b*b;

  c = sqrt(tmp_a+tmp_b);

  return c;
} 
```

可以转换为

```
myfunc(double a<1.0>, double b<2.0>)
{
  double tmp_a, tmp_b, c;

  tmp_a = a<1.0>*a<1.0>;
  tmp_b = b<2.0>*b<2.0>;

  c = sqrt(tmp_a<1.0>+tmp_b<4.0>);

  return c<2.236067977499789696e+00>;
} 
```

我可以使用 diff 工具轻松比较后续运行的输出。我还可以通过将输出粘贴到计算机代数系统中来将中间数值结果与任意精度结果进行比较。粗略的想法是，gdb驱动程序执行二进制文件直到指定的例程，逐步执行它（每次将一步中的所有变量替换为当时各自的值）并最终退出。非常欢迎对现有软件或实现想法的提示。也许有一个基于 perl 的解决方案，使用现有的 gdb 接口，例如`Devel::GDB`（不确定这个是否足够成熟）。

* * *

似乎从版本 7 开始 gdb 支持 python 脚本。一个加载单线程可执行文件、设置断点、运行可执行文件并在达到断点后打印变量值的最小示例对我来说真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:54:47.433

您可以采用不同的方式：
创建一个日志文件（可以通过 printf 完成并在运行时重定向标准输出）。您可以打印感兴趣的值和`diff`来自不同运行的两个日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:47:13.163

如果您在示例中打开优化并且参数是代码中的常量，我希望编译器会这样做，并简化整个事情以返回预先计算的 5 平方根。

市场上有一些产品可以进行“代码流分析”并且理解边界条件和“如果使用负值调用 sqrt 是错误的”等等。Coverity 是一个（不是免费的）工具，它在 C/C++ 上执行此操作，并吐出“你在这里试图做一些愚蠢的事情，你确定这是对的吗？” 为您的代码键入消息。

Valgrind 也可以做类似的事情。

但是这些工具都不能为一组代码运行注释变量的当前值。这是可能的，但与全速运行代码相比，它会相当耗时，而且如果代码超过几百行运行几次迭代，它可能会花费几乎永远并产生一个非常大的日志文件，记录了在哪里发生的事情。完全不相信它是实用的。

# javascript - easeljs - 容器 mouseEnabled 不起作用

> ID：14979923
> 
> 赞同：1
> 
> 时间：2013-02-20T12:30:47.690
> 
> 标签：javascript, easeljs

调用时我在获取容器时遇到问题`getObjectsUnderPoint`。根据文档`easeljs`，当`mouseEnabled`属性设置为`true`容器时，调用`getObjectsUnderPoint`它时应该返回容器对象而不是其子对象。

在示例代码中，我有两个容器，每个容器都有两个孩子（形状和图像）。它的拖放示例。在 mouseup 事件中，我正在检查两个容器是否重叠。但是当我打电话时`stage.getObjectsUnderPoint`，它返回的数组是`[Shape, Image, Shape, Image]`. 我所期待的是两个容器。

我可能缺少设置舞台的其他一些属性或其他东西。

试图通过网络找到，没有运气。

```
 var canvas = null;
    var stage = null;
    var update = false;

    function tick(){
          if(update){
                stage.update();
                update = false;
          }
    }

function init(){
    canvas = document.getElementById("mycanvas");
    stage = new createjs.Stage(canvas);
          createjs.Ticker.setFPS(60);
          createjs.Ticker.addListener(window);
          stage.enableMouseOver(36);

          var getContainer = function(cname, x, y, imageName){

                var container= new createjs.Container();
                container.mouseEnabled = true;
                container.onPress= function(event){
                      var target= event.target;

                      stage.addChild(target);

                      var offset = {
                            x: target.x - stage.mouseX,
                            y: target.y - stage.mouseY
                      };

                      event.onMouseMove = function (ev) {
                            target.x = ev.stageX + offset.x;
                            target.y = ev.stageY + offset.y;
                            update = true;
                      }

                      event.onMouseUp = function(ev){
                            var objects = stage.getObjectsUnderPoint(ev.stageX, ev.stageY);
                            event.stageX, event.stageY
                            objects.forEach(function(object){
                                  console.log('name: ' + object.name);
                            });
                      }
                };

                container.name = cname;

                var shape = new createjs.Shape();
                shape.graphics
                      .setStrokeStyle(10)
                      .beginFill('#f0f0f0')
                      .beginStroke("#000")
                      .drawCircle(x, y, 100);
                shape.name = cname + ' - shape';

                container.addChild(shape);

                var image = new Image();
                image.onload = function(event){
                      var bitmap = new createjs.Bitmap(image);
                      bitmap.regX = image.width/2;
                      bitmap.regY = image.height/2;
                      bitmap.x = x, bitmap.y = y;
                      bitmap.scaleX = bitmap.scaleY = 0.8;

                      bitmap.name = cname + ' - image';

                      container.addChild(bitmap);
                      update = true;
                };
                image.src = imageName;

                return container;

          };

          var container= getContainer("Original Container", 200, 300, 'cat1.png');

          var diffContainer = getContainer("Different Container", 600, 300, 'cat2.png');

          stage.addChild(container);
          stage.addChild(diffContainer);

          update = true;
} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:27:43.957

[我建议在社区论坛http://community.createjs.com](http://community.createjs.com)中发布 CreateJS 问题

您的样本按预期工作。您在释放鼠标时正在检查鼠标下方的对象。getObjectsUnderPoint 只会告诉您哪些对象将在单个 x/y 坐标处填充像素。

如果你想确定整个容器是否重叠，你需要做更多的事情，比如检查边界框（或者更复杂的东西来做圆->框碰撞）。

干杯。

# netty - Netty 4 io.netty.channel.PartialFlushException 写入后

> ID：14979926
> 
> 赞同：0
> 
> 时间：2013-02-20T12:30:56.483
> 
> 标签：netty

在我的代码中的新通道上的第二个 .write ，`ChannelFuture.isSuccess`因为写入操作是错误的，并且`ChannelFuture.cause`是`io.netty.channel.PartialFlushException: 0 out of 1 message(s) flushed`. 我不知道应该做些什么来避免这种情况，以及在哪里寻找更深层次的根本原因。

ChannelFuture.cause.getStackTraceString 是：

> io.netty.channel.ChannelOutboundMessageHandlerAdapter.flush(ChannelOutboundMessageHandlerAdapter.java:118) io.netty.channel.CombinedChannelDuplexHandler.flush(CombinedChannelDuplexHandler.java:237) io.netty.channel.DefaultChannelHandlerContext.invokeFlush0(DefaultChannelHandlerContext.java:1308) io. netty.channel.DefaultChannelHandlerContext.write0(DefaultChannelHandlerContext.java:1445) io.netty.channel.DefaultChannelHandlerContext.write(DefaultChannelHandlerContext.java:1412) io.netty.channel.DefaultChannelHandlerContext.write(DefaultChannelHandlerContext.java:1034) io.netty。 channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:959) io.netty.channel.AbstractChannel.write(AbstractChannel.java:246) pipe.Broker$writer$.write(Broker.scala:72) pipe.Broker$httpClientHandler.messageReceived (Broker.scala:57) 管道。Broker$httpClientHandler.messageReceived(Broker.scala:52) io.netty.channel.ChannelInboundMessageHandlerAdapter.inboundBufferUpdated(ChannelInboundMessageHandlerAdapter.java:104) io.netty.channel.DefaultChannelHandlerContext.invokeInboundBufferUpdated(DefaultChannelHandlerContext.java:951) io.netty.channel。 DefaultChannelHandlerContext.fireInboundBufferUpdated0(DefaultChannelHandlerContext.java:926) io.netty.channel.DefaultChannelHandlerContext.fireInboundBufferUpdated(DefaultChannelHandlerContext.java:904) io.netty.handler.codec.ReplayingDecoder.callDecode(ReplayingDecoder.java:466) io.netty.handler。 codec.ByteToMessageDecoder.inboundBufferUpdated(ByteToMessageDecoder.java:69) io.netty.channel.ChannelInboundByteHandlerAdapter.inboundBufferUpdated(ChannelInboundByteHandlerAdapter.java:51) io.netty.channel.CombinedChannelDuplexHandler。inboundBufferUpdated(CombinedChannelDuplexHandler.java:194) io.netty.channel.DefaultChannelHandlerContext.invokeInboundBufferUpdated(DefaultChannelHandlerContext.java:951) io.netty.channel.DefaultChannelHandlerContext.fireInboundBufferUpdated0(DefaultChannelHandlerContext.java:926) io.netty.channel.DefaultChannelHandlerContext.fireInboundBufferUpdated( DefaultChannelHandlerContext.java:904) io.netty.channel.DefaultChannelPipeline.fireInboundBufferUpdated(DefaultChannelPipeline.java:909) io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:115) io.netty.channel.nio。 NioEventLoop.processSelectedKey(NioEventLoop.java:401) io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:365) io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:302) io.netty。渠道。SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:110) java.lang.Thread.run(未知来源)

通道上的第一个 .write 运行良好（isSuccess 为真，并且确实写入的消息完美地到达并在其目的地解析）。但是第二个 .write 始终如所描述的那样失败。

第二个 .write 是从我重写的 ChannelInboundMessageHandlerAdapter 中发出的。[messageReceived](http://netty.io/4.0/api/io/netty/channel/ChannelInboundMessageHandlerAdapter.html#messageReceived%28io.netty.channel.ChannelHandlerContext,%20I%29)方法，一旦它接收到远程对等方收到第一个 .write 的确认。

我执行实际写入的代码（这是 Scala）是：

```
 request = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.GET, "/"+msg)
              var writeFuture = channel.write(request).addListener(new ChannelFutureListener(){
                  def operationComplete(channelFuture: ChannelFuture){
                    if (channelFuture.isSuccess)
                        println("write finished successfully")
                    else 
                        println ("write failed: " + channelFuture.cause + "\n" + channelFuture.cause.getStackTraceString)
                  }
              }) 
```

可能是什么问题，应该如何追踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:41:45.650

A`PartialFlushException`包含刷新失败的实际原因。您可以使用`Exception.getCause()`Java 提供的方法获取它：

```
PartialFlushException e = ...;
e.getCause(); // This will return the exception you raised. 
```

要获取异常的完整信息，而不是打印异常，您必须调用`printStackTrace()`.

```
future.cause.printStackTrace() 
```

有关链式异常的更多信息，请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/chained.html)。

# django - 带有空表单和模型值的 Django 多对多查询

> ID：14979929
> 
> 赞同：0
> 
> 时间：2013-02-20T12:31:01.723
> 
> 标签：django, django-forms, many-to-many, django-queryset

我有以下模型结构，其中每个 Tradesman 具有具有两个属性的多对多关系；语言和纪律。在表单中，用户可以通过过滤这些属性来选择 Tradesman 的子集。

我想要发生的是：

1.  如果用户只过滤一个属性，表单会选择所有未过滤的属性。例如。如果选择 a 选择语言但将学科留空，则不会过滤学科。
2.  如果用户过滤一个商人没有一组的语言（即它为空），它会排除该商人。

我想我可以通过从查询中提取主键并使用它们的巴洛克式非 pythonesque 非 django 方法来解决这个问题，但宁愿使用更清洁的方法。

我认为可以解决的问题是：

1.  一个动态的 django 过滤器，它会根据 if-else 逻辑删除或包含条件
2.  一个与我可以存储在变量中的所有内容（包括空值）匹配的参数，例如。

    ```
     return_everything=**everything()!** 
     Q(discipline__id__in=return_everything) 
    ```

我一直在查看 django 文档和 stackoverflow，但也找不到方法。谢谢你的帮助。

模型.py：

```
class Discipline(models.Model):  
    discipline=models.CharField(max_length=200, unique=True)

class Language(models.Model):  
    language=models.CharField(max_length=200, unique=True)

class Tradesman(models.Model):  
    discipline=models.ManyToManyField(Discipline, blank=True, null=True)
    language=models.ManyToManyField(Language, blank=True, null=True) 
```

表格.py

```
class TradesmanForm(forms.Form):
    #select all values to output in the form
    discipline_all=.Discipline.objects.all() 
    language_all=Language.objects.all() 

    #declare form variables
    discipline=forms.ModelMultipleChoiceField(queryset=discipline_all,required=False)  
    language=forms.ModelMultipleChoiceField(queryset=language_all,required=False) 

    #clean data
    def clean(self) 
        cleaned_data=super(TradesmanForm, self).clean()
        return cleaned_data 
```

视图.py

```
def TrademanLookup(request)
    if request.method == 'POST':      
        if form.is_valid()
            discipline=form.cleaned_data['discipline']
            language=form.cleaned_data['language']
            #################################################
            #  how can I make the below query dynamic,      # 
            #  or else pass a variable into it that selects # 
            #  everything, including nulls?                 #
            #################################################
            tradesman_return=Tradesman.objects.filter(
                Q(discipline__id__in=discipline),
                Q(language__id__in=language)
                )
            ...work with returned data...
        else:
            ...something else...
    else:
            ...something else...

    return render_to_response('some.html','somevar':somevar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:47:02.257

```
def TrademanLookup(request)
    if request.method == 'POST':      
        if form.is_valid()
            discipline=form.cleaned_data['discipline']
            language=form.cleaned_data['language']
            query = []
            if disciplines:
                query.append(Q(discipline__in=discipline))
            if language:
                query.append(Q(language__in=language))

            if query:    
                tradesman_return=Tradesman.objects.filter(*query)
            else:
                tradesman_return=Tradesman.objects.all()

            #...work with returned data... 
```

注意：GoodPractice(TM) 认为集合使用复数形式（在 Trademan 模型和形式中都应该是“学科”和“语言”。

NB2：惯例是使用 all_lower_with_underscore 名称作为函数，因此您的视图应命名为“trademan_lookup”

# spring - 使用jquery ajax在spring的responsebody中返回HashMap时出现HTTP 406异常

> ID：14979930
> 
> 赞同：0
> 
> 时间：2013-02-20T12:31:05.137
> 
> 标签：spring, jquery, spring-mvc, callback

我在spring控制器中有这个方法，它返回哈希图。

```
@RequestMapping(value = "/CIMtrek_Project_Information", method = RequestMethod.POST)
    public @ResponseBody Map<String,String> getProjectInfotmation(@RequestParam("cerNo") String cerNo,HttpServletRequest request,HttpServletResponse response) throws Exception {
        DataService ds = new DataService();
        Map<String,String> projectInforamtionMap = new HashMap<String,String>();
        projectInforamtionMap = ds.getProjectInformation(cerNo);
        System.out.println("projectInforamtion : "+projectInforamtionMap);
        return projectInforamtionMap;
    } 
```

这是我使用的jquery ajax方法：

```
function getProjectInformation(){
    var cerNo = document.getElementById('CIMtrek_CI_CER').value;
     $.ajax({
         type: "POST",
         url: "CIMtrek_Project_Information",
         data: {
             cerNo: cerNo
         },
         success: function (projectInforamtionMap) {
             if(projectInforamtionMap.norecord !="yes"){
                 document.getElementById('projectNo').innerHTML=projectInforamtionMap.CI_Used_By_ProjNo;
                 document.getElementById('CIMtrek_CI_Used_By_ProjNo').value=projectInforamtionMap.CI_Used_By_ProjNo;

                 document.getElementById('projectName').innerHTML=projectInforamtionMap.CI_Used_By_ProjName;
                 document.getElementById('CIMtrek_CI_Used_By_ProjName').value=projectInforamtionMap.CI_Used_By_ProjName;

                 document.getElementById('projectManager').innerHTML=projectInforamtionMap.CI_Used_By_ProjMgr;
                 document.getElementById('CIMtrek_CI_Used_By_ProjMgr').value=projectInforamtionMap.CI_Used_By_ProjMgr;

                 document.getElementById('projectStatus').innerHTML=projectInforamtionMap.CI_Used_By_Status;
                 document.getElementById('CIMtrek_CI_Used_By_Status').value=projectInforamtionMap.CI_Used_By_Status;

                 document.getElementById('projectBDM').innerHTML=projectInforamtionMap.CI_Used_By_BDM;
                 document.getElementById('CIMtrek_CI_Used_By_BDM').value=projectInforamtionMap.CI_Used_By_BDM;

                 document.getElementById('projectITPlan').innerHTML=projectInforamtionMap.CI_Used_By_IT_Plan;
                 document.getElementById('CIMtrek_CI_Used_By_IT_Plan').value=projectInforamtionMap.CI_Used_By_IT_Plan;

                 document.getElementById('projectBucket').innerHTML=projectInforamtionMap.CI_Used_By_IT_Bucket;
                 document.getElementById('CIMtrek_CI_Used_By_IT_Bucket').value=projectInforamtionMap.CI_Used_By_IT_Bucket;
             }

         }
     });
} 
```

但我在回调期间收到此响应；

```
The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request "accept" headers. 
```

请帮我解决这个问题。

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:54:41.927

尝试这个

改变

```
 projectInforamtionMap = ds.getProjectInformation(cerNo); 
```

至

```
projectInforamtionMap.put("projectInforamtionMap", ds.getProjectInformation(cerNo)); 
```

在您的 ajax 调用中添加

```
contentType: 'application/json', 
```

和

```
dataType : 'json', 
```

# c++ - 游戏中的多线程共享资源，需要一些想法的反馈

> ID：14979931
> 
> 赞同：3
> 
> 时间：2013-02-20T12:31:05.277
> 
> 标签：c++, multithreading, locking, mutex, game-engine

我最近开始了一个制作游戏的项目（我有点新），我开始思考如何实现多线程来提高性能。

假设你在游戏中有一个单位，它有一个位置`x`和`y`。这个位置是从互联网上更新的，另一个线程正在使用另一个线程`x,y`来渲染单元的图形（它必须知道它在哪里）。

现在假设您在这些变量上放置了一个互斥锁或 sephamore（有点不确定哪个最好用）。问题当然出在渲染线程上。你不能停下来等待，游戏会变得滞后。不过，这对于互联网线程来说不是问题。除非出现问题，否则再多几毫秒就可以更新游戏了。

所以我在想如何解决这个问题，我有了一个想法。假设您创建了 2 套`x,y`（从现在开始，我们只使用`x`它来使其更简单，但您明白了）。所以你有`x1`和`x2`。

*   现在互联网线程只更新了 x1。
*   图形线程使用 x1，然后将 x2 更新为其当前值。

现在这里的想法。如果`x1`被互联网线程锁定，图形线程只会说

> “嘿，我等不及了。我会继续使用`x2`，因为那是一个很好的近似位置。”

它会一直这样做，直到`x1`再次免费。它看起来像这样。

```
//Thread Graphics:
if (x1 is not locked){
    lock x1:
        use x1
    unlock x1:
    x2=x1
}else{
    use x2
}

//Thread Internet:

wait until x1 is unlocked:
lock x1:
    save data to x1
unlock x1: 
```

现在我意识到这会占用一些额外的内存，但我认为这是值得的，至少如果你将这种技术的使用限制在关键数据片段上。

所以我的问题是：你们如何看待这个想法？也许它已经是一种常见的技术，只是我不知道它的名字。如果您对如何解决此类问题有任何其他反馈，我将不胜感激。我认为这是大多数程序员的常见问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:36:59.837

我喜欢这个想法，但我担心在游戏中预测动作的后果。在我看来，您最好集中精力确保您的互斥保护（共享）数据在尽可能小的部分中受到保护。例如，不要在绘图期间锁定整个对象，而是锁定，复制您需要的内容，然后解锁然后绘制。互联网方面也是如此……等待更新，获取它们，锁定，更新，解锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:56:07.093

使用额外的内存不是一个坏主意。

如果在处理数据时不保持 x1 锁定，则可以改进算法。

而不是这个

```
//Thread Graphics:
if (x1 is not locked){
    lock x1:
        use x1
    unlock x1:
    x2=x1
}else{
    use x2
} 
```

使用这样的东西

```
//Thread Graphics:
if (x1 is not locked)
    lock x1:
        x2=x1
    unlock x1:

use x2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:42:56.327

实际上，复制数据几乎正是我在某个时候（在遥远的未来）想要尝试的。一个在 C++ 中也很容易实现的想法。

如果您实现值的基本类型（DualInt、DualFloat 等）并提供所有标准运算符，则可以在内部将数据存储在二元素数组中。您的 getter 获取元素 0，而您的 setter 修改元素 1。

诀窍在于切换它们。您需要做的就是拥有一个读取器/写入器锁，您的 getter 和 setter 使用读取器部分，而您的切换器使用写入器部分。您可以让多个读者阅读（实际上是变老并设置新值），直到您想要切换。然后你获取锁的写者部分（它阻止新的读者并等待所有读者完成），并切换一个全局变量，该变量指示正在读取哪个元素以及正在写入哪个元素。

没有大惊小怪，没有麻烦，也没有复制大量的价值观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:39:38.993

在我的游戏中，我会在每一帧的末尾运行一个函数列表。

线程 1：调用服务器获取位置

线程 2：在 X,Y 处为对象渲染帧

线程 2：检查线程 1 的工作。

线程2：没有工作，继续。

线程 1：收到 X,Y！

线程 1：创建将设置最终 X,Y 的工作对象

线程 1：锁定线程 2 工作队列。

线程 1：将工作对象推送到工作队列

线程 1：解锁线程 2 工作队列。

线程 2：在 X,Y 处为对象渲染帧

线程 2：检查线程 1 的工作。

线程 2：找到工作！锁定工作队列...

线程 2：使用线程 1 工作设置对象 X、Y。

线程 2：删除工作对象

线程2：解锁工作队列

线程 2：继续渲染循环

或者，您可以等到帧渲染完成，暂停片刻，更新值，然后取消暂停渲染线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T03:45:30.100

这是维护线程安全的好方法，如果您考虑双缓冲，可以对其进行扩展。在我从事的项目中，我们有一个线程安全数据库，其工作原理类似：

*   数据有两个副本，写缓冲区和读缓冲区。
*   每当写入数据库时​​，它都会使用写入缓冲区。
*   当它被读取时，它使用读取缓冲区。
*   在每一帧结束时，缓冲区被交换，因此读缓冲区现在是写缓冲区，反之亦然。

您应该能够在渲染线程中看到与双缓冲的相似之处。这使我们能够在整个项目中保持线程安全。当然，权衡是您将数据库中任何内容的内存使用量增加了一倍，因此它不适合存储大量数据。我们最大的成功通常是渲染数据和 AI 数据，它们只在一个线程中使用，所以这对我们来说不是什么大问题。

编辑：我忘了提到第二个权衡：当我们更改数据库中的值时，它直到下一帧才会生效。这对我们来说不是什么大问题，我们只需要确保在编写系统时牢记这一点。

# c# - 字符串加倍问题，点被删除

> ID：14979934
> 
> 赞同：2
> 
> 时间：2013-02-20T12:31:09.497
> 
> 标签：c#, typeconverter

我有一个字符串值，包含经度或纬度值。

但是，当我尝试将其转换为双精度时，我最终得到一个数字，其中点被删除并放在末尾。

这不是我想要的。我错过了什么？

这是我得到的值：`200,5,1.4928184,0.1609203`这是我用来获取值的方法：

```
 var responseBytes = ms.ToArray();
                var encoding = new System.Text.ASCIIEncoding();
                var coords = encoding.GetString(responseBytes);
                var parts = coords.Split(new char[] { ',' });

//this piece of code returns me wrong values! When I debug this piece parts[2] is exactly 1.4928184
                return new Coordinaat(Double.Parse(parts[2]),
                    Double.Parse(parts[3])); 
```

有关构造函数，请参见下面的代码示例：

```
 public Coordinaat(double lat, double lon)
        {
            this.Latitude = lat;
            this.Longitude = lon;
        } 
```

输出： `lat 114928184 lon 01609203`--> 我的点去哪儿了？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T12:32:27.250

您可能处于导致这种影响的文化（例如德国）之下。`CultureInfo.InvariantCultre`解析时使用。

```
Double.Parse("123.22",CultureInfo.InvariantCulture) 
```

# matlab - 查找满足特定标准的像素

> ID：14979935
> 
> 赞同：0
> 
> 时间：2013-02-20T12:31:14.687
> 
> 标签：matlab, for-loop, matrix, pixel, fuzzy-c-means

附件是matlab附带的图像，`cameraman.tif`但在应用`[fuzzy c-means]` [1之后](https://i.stack.imgur.com/l6XsC.jpg)

![在此处输入图像描述](../Images/29dd597f5fee551b8d495a361be4a8bf.png)

此外，算法的输出是`u2`（像素的隶属度）。有关此数据，请参见[matlab.mat](https://www.dropbox.com/l/XUEyZHZhZmHXqqxX)。

我想要做的是从附加的图像中选择像素，其`u2`值为`equal to 1`.

关于如何做到这一点的任何想法`matlab`？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:13:17.660

获取适当像素的索引：

```
ind = find( u2 == 1 ); % return indices of all pixels with u2 eq to 1 
```

自己获取像素

```
pixels = img( ind ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:24:35.797

Alternatively, you can avoid using find and go straight into [logical indexing](http://blogs.mathworks.com/steve/2008/01/28/logical-indexing/).

Given an image as:

```
>> image = [1 3 5; 2 3 1; 3 2 2]

image =

     1     3     5
     2     3     1
     3     2     2 
```

you can find the pixels with value 2 using the condition iamge == 2:

```
K>> image == 2

ans =

     0     0     0
     1     0     0
     0     1     1 
```

If for instance you want to manipulate these pixels by setting them to 7 you can easily do that with a single line:

```
image(image == 2) = 7

image =

     1     3     5
     7     3     1
     3     7     7 
```

# javascript - 如何在 JSP 中包含 JS/CSS 文件（TOMCAT 项目）

> ID：14979939
> 
> 赞同：1
> 
> 时间：2013-02-20T12:31:26.880
> 
> 标签：javascript, css, jsp

我有一个外部 javascript 和 css 文件，我想将它包含到我的 JSP 文件中，所以我尝试测试此代码但不工作：

我不想使用“include file='file.css'”

```
<html>
   <head>
      <link href="css/bootstrap.min.css" rel="stylesheet"/>
      <script src="js/jquery-latest.js"></script>
      <script src="js/bootstrap.min.js"></script>
   </head>
   <body>
      <form class="form-horizontal well">
        login  : <input type="text">
        <br/>
        passw  : <input type="password">
        </form>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T15:20:17.370

利用

```
<link href="${pageContext.request.contextPath}/css/bootstrap.min.css" rel="stylesheet"/> 
```

请参阅[http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)

# mysql - Codeigniter 中的会话（显示活跃用户）

> ID：14979942
> 
> 赞同：2
> 
> 时间：2013-02-20T12:31:29.293
> 
> 标签：mysql, codeigniter

我有 ci_sessions 表，当我运行此查询时，它为活动用户提供 m 0 计数，但我使用不同浏览器使用 2 个不同的帐户登录我的查询是我在 phpmyadmin 中运行

```
SELECT COUNT(`session_id`) AS `active_user_count` 
FROM `ci_session` 
WHERE `last_activity` >= DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 2 MINUTE) 
    AND `user_data` 
LIKE '%s:9:"logged_in";b:1;%' 
```

我想计算所有活跃用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:24:13.923

尝试这个：

```
SELECT COUNT(`session_id`) AS `active_user_count` 
FROM `ci_session` 
WHERE `last_activity` >= UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 2 MINUTE)) 
    AND `user_data` 
LIKE '%s:9:"logged_in";b:1;%' 
```

# java - 将地图键与某个元素进行比较，并根据结果显示其值

> ID：14979944
> 
> 赞同：1
> 
> 时间：2013-02-20T12:31:53.577
> 
> 标签：java, jsp, map, key

我需要`Map <String, String>`根据条件从 jsp 中的类型映射中检索值。条件是将映射键与变量进行比较，如果键等于变量，则显示与该键有关的值。这就是我正在做的事情：

```
<c:if test="${ myMap.key eq myVariable }">
<jsp:getvalueof var="testVariable" value = "${ myMap.value }" />
</c:if> 
```

我期望得到的是，如果 myMap.key 等于 myVariable，我应该在“test”变量中获得与该键有关的值。

但这东西行不通。请问有人知道吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:43:57.293

您可以直接访问地图并将值放入“测试”变量中：

```
<c:set var="test" value="${myMap[myVariable]}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:37:58.453

```
//use like this in jsp
<%
String val;
for(String key : myMap.keyset()){
    if(key.equals(myVariable )){
        val = myMap.get(key);
    }
}
%>
//on js use like this
var test = '<%=val%>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:00:33.727

由于您想根据条件从地图中检索值，因此可以改用三元运算符。试试这个 ：

```
<c:set var="testVariable" value='${ myMap.key eq myVariable ? myMap[myVariable] : "defaultValue" }'/> 
```

# iphone - 滑动手势和导航控制器

> ID：14979946
> 
> 赞同：0
> 
> 时间：2013-02-20T12:31:58.923
> 
> 标签：iphone, ios, uinavigationcontroller, uigesturerecognizer

我目前有一个应用程序，它在滚动视图中包含 50 个左右的自定义按钮。这些都通过导航控制器连接到各个视图控制器，以显示带有标题的按钮的全屏图片。我希望能够在视图控制器之间滑动，但是当我这样做时，后退按钮将带我返回所有滑动而不是返回原始菜单。有没有更整洁的方式来做这一切，因为这么多的观点也在扼杀我的 Mac？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:02:37.793

首先，我认为使用 UICollection 而不是按钮会更好，但无论如何......

**这是您要阅读的答案：**

您可以设置自己的“返回按钮”并在按下时执行返回到第一个 UIViewController 的任务

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Atrás", nil) style:UIBarButtonItemStylePlain target:self action:@selector(backPressed:)];
     self.navigationItem.leftBarButtonItem = btn;
}

-(void)backPressed: (id)sender
{  
    // Go back to your first view
} 
```

**这是您应该遵循的答案：**

浏览将呈现相同内容（图像+文本）的不同 UIView 并不是一个好主意：首先，因为您浪费了大量内存，其次，因为如果必须进行任何更改，那将是乏味的......

因此，您应该只使用一个 UIView，当您检测到滑动手势时，您只需更改视图中呈现的内容，这样您的后退按钮将始终正确返回。

# javascript - 测试驱动的 JavaScript、Jasmine 和生产代码

> ID：14979947
> 
> 赞同：1
> 
> 时间：2013-02-20T12:32:09.850
> 
> 标签：javascript, jquery, unit-testing, testing, jasmine

我正在尝试掌握 Jasmine 的基础知识（我猜是 BDD/TDD）。我看到的示例与 Web 应用程序的任何现实场景都不相似，并且很难与之相关。

Jasmine 测试是否（单独）在将要部署的 JavaScript 工作之外完成？手动复制经过测试/验证的代码。或者 Jasmine 是否编译为用于生产的标准 JS？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:33:11.637

[Jasmine](http://pivotal.github.com/jasmine/)是一个用于测试 JavaScript 代码的框架。就像测试 Ruby on Rails 代码一样，测试不会成为生产代码的一部分。它们在同一个 repo 中并且正在运行，但它们不会被缩小到 project.js 或任何你的构建过程中。作为测试运行过程的一部分，您可以使用[PhantomJS（无头 webkit）](http://phantomjs.org/)进行无头测试，并让它在您的 CI 服务器上运行，等等，就像任何其他测试一样。

我以这种方式从事过很多项目。有一种趋势是看到 JavaScript 有一个不需要测试的增强层，但今天 JavaScript 更多。如果您的应用程序需要工作，测试它是至关重要的。

# web-applications - 说明 Web 应用程序软件架构（使用 Angular）的最佳方式是什么？

> ID：14979965
> 
> 赞同：3
> 
> 时间：2013-02-20T12:32:40.427
> 
> 标签：web-applications, architecture, angularjs

我们正在开发一个 Web 应用程序（使用 Angular 和 .net Web API），我们需要一种很好的方法来说明我们的系统架构。

我很难掌握如何说明它。

很容易发现，我在建模和系统架构方面的经验水平很低，需要一些指针来说明要包含和排除什么，以及如何说明它。

如何最好地说明包含角度、指令、服务和外部库等的系统架构？

到目前为止我最好的方法： ![到目前为止，我展示架构的最佳方法](../Images/c9ad67e379671bcba321214fd841c1bb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:58:17.540

我忘记了我最初在哪里看到/找到这个（我很确定它在/曾经在某个地方的 Angular 网站上），但它可能会给你一些想法。外部库可以是另一个矩形，或者您可以选择将每个库包装在一个服务中。

![在此处输入图像描述](../Images/ffd023012cdc9aa2e8e7da2ffa4804a5.png)

# delphi - 从指向记录类型 rtti 字段的指针中获取值

> ID：14979967
> 
> 赞同：2
> 
> 时间：2013-02-20T12:32:42.940
> 
> 标签：delphi, delphi-xe2, rtti, delphi-xe3

我在尝试使用 Delphi 的 RTTI 访问我的记录数据中的记录类型的指针时遇到了麻烦。

请检查我一直在处理的示例代码。

```
 // Dummy Header
  typDummyHeader = ^tysDummyHeader;
  tysDummyHeader = record
    MessageCode : Integer;
    MessageLength : Integer;
  end;

  // Dummy record having header and trailer
  tysDummyRecord = record
    Header : tysDummyHeader;
    BotAmount : Double;
    SoldAmount : Double;
    SoldQty : Int64;
    BotQty : Int64;
    Tailer : typDummyHeader; // pointer to Dummy Header
  end;

  TclDummy = class
    class function GetFieldValue<T>(const pipInstance : Pointer;
                                const piclField : TRttiField) : string;

    class function ParseAndReturnString<T>(piclObject : T) : string;
  end;

  var
    frmRTTITest: TfrmRTTITest;

  implementation

  {$R *.dfm}

  procedure TfrmRTTITest.FormCreate(Sender: TObject);
  var
    losDummyRecord : tysDummyRecord;
  begin
    FillChar(losDummyRecord, SizeOf(tysDummyRecord), #0);
    losDummyRecord.Header.MessageCode := 5000;
    losDummyRecord.Header.MessageLength := 54433;
    losDummyRecord.BotAmount := 19.45;
    losDummyRecord.SoldAmount := 34.22;
    losDummyRecord.SoldQty := 102;
    losDummyRecord.BotQty := 334;
    losDummyRecord.Tailer := @losDummyRecord.Header;

    ShowMessage(TclDummy.ParseAndReturnString<tysDummyRecord>(losDummyRecord));
  end;

  class function TclDummy.GetFieldValue<T>(const pipInstance : Pointer;
                               const piclField : TRttiField) : string;
  begin
    case piclField.FieldType.TypeKind of
      tkFloat: Result := FloatToStr(piclField.GetValue(pipInstance).AsExtended);
      tkInt64: Result := IntToStr(piclField.GetValue(pipInstance).AsInt64);
      tkInteger: Result := IntToStr(piclField.GetValue(pipInstance).AsInteger);
      tkString: Result := Trim(piclField.GetValue(pipInstance).AsString);
    end;
  end;

  class function TclDummy.ParseAndReturnString<T>(piclObject : T) : string;
  var
    losContext : TRttiContext;
    losContextType : TRttiType;
    loclField : TRttiField;
    losRecordRTTI : TRttiRecordType;
    loclRecordField : TRttiField;
    losPointerType : TRttiPointerType;
    losValue : TValue;
  begin
    Result := EmptyStr;
    losContext := TRttiContext.Create;
    losContextType := losContext.GetType(TypeInfo(T));

    if losContextType.TypeKind = tkRecord then
    begin
      for loclField in losContextType.GetFields do
      begin
        case loclField.FieldType.TypeKind of
          tkRecord:
          begin
            losRecordRTTI := loclField.FieldType.AsRecord;
            for loclRecordField in losRecordRTTI.GetFields do
            begin
              Result := Result + '|' + GetFieldValue<T>(Addr(piclObject), loclRecordField);
            end;
          end; // tkRecord
          tkPointer:
          begin
            losPointerType := loclField.FieldType as TRttiPointerType;

            // Check only record type pointers.
            if losPointerType.ReferredType.TypeKind = tkRecord then
            begin
              losValue := loclField.GetValue(Addr(piclObject));
              if (not losValue.IsEmpty) then
              begin
                for loclRecordField in losPointerType.ReferredType.GetFields do
                begin
                  // Result := Result + '|' + ???????????
                end;
              end;
            end;
          end; // tkPointer
          else
            Result := Result + '|' + GetFieldValue<T>(Addr(piclObject), loclField);
        end;
      end;
    end;
    losContext.Free;
  end; 
```

在上面的示例中，当字段`tkPointer`指向记录类型时，我如何从中读取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:33:56.743

```
Result := Result + '|' + GetFieldValue<T>(Addr(piclObject),loclRecordField); 
```

应该做的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:22:17.180

对不起我的英语不好。

@bummi 的答案有效，但不正确。

这取决于使用情况。

如果您使用下一个代码一切正常：

```
var
  losDummyRecord : tysDummyRecord;
begin
  FillChar(losDummyRecord, SizeOf(tysDummyRecord), #0);
  losDummyRecord.Header.MessageCode := 5000;
  losDummyRecord.Header.MessageLength := 54433;
  losDummyRecord.BotAmount := 19.45;
  losDummyRecord.SoldAmount := 34.22;
  losDummyRecord.SoldQty := 102;
  losDummyRecord.BotQty := 334;
  losDummyRecord.Tailer := @losDummyRecord.Header;

  ShowMessage(TclDummy.ParseAndReturnString<tysDummyRecord>(losDummyRecord)); 
```

但是，如果您使用例如此代码，解析将无法正常工作：

```
var
  losDummyRecord : tysDummyRecord;
  ExternalHeaderVar: tysDummyHeader;
begin
  ExternalHeaderVar.MessageCode := 23;
  ExternalHeaderVar.MessageLength := 25;

  FillChar(losDummyRecord, SizeOf(tysDummyRecord), #0);
  losDummyRecord.Header.MessageCode := 5000;
  losDummyRecord.Header.MessageLength := 54433;
  losDummyRecord.BotAmount := 19.45;
  losDummyRecord.SoldAmount := 34.22;
  losDummyRecord.SoldQty := 102;
  losDummyRecord.BotQty := 334;
  losDummyRecord.Tailer := @ExternalHeaderVar;

  ShowMessage(TclDummy.ParseAndReturnString<tysDummyRecord>(losDummyRecord)); 
```

解决方案很简单，在这两种情况下都可以很好地工作，并且可以防止将来使用时出现意外错误：

```
 tkPointer:
      begin
        losPointerType := loclField.FieldType as TRttiPointerType;

        // Check only record type pointers.
        if losPointerType.ReferredType.TypeKind = tkRecord then
        begin
          losValue := loclField.GetValue(Addr(piclObject));
          if (not losValue.IsEmpty) then
          begin
            losValue.ExtractRawDataNoCopy(@NativeIntVar);
            for loclRecordField in losPointerType.ReferredType.GetFields do
            begin
              Result := Result + '|' + GetFieldValue<T>(Pointer(NativeIntVar),loclRecordField);
            end;
          end;
        end;
      end; // tkPointer 
```

# android - webview loadUrl 在浏览器中打开url

> ID：14979968
> 
> 赞同：1
> 
> 时间：2013-02-20T12:32:44.090
> 
> 标签：android, https, android-webview

我正在尝试在 webview 中打开 url，但它正在外部浏览器中打开 url。

我的代码是

```
public class MainActivity extends Activity
{

    private WebView webView;

    String URL = "https://login.salesforce.com/services/oauth2/authorize?response_type=token&display=touch&client_id=3MVG9Y6d_Btp4xp7w.6oGLerlRztTTUKMEL8QWHvuB5miUgdJzQ0HgnMB7dhm1mTiluRv4ud9cZYeFcAz7hXP&redirect_uri=https%3A%2F%2Flogin.salesforce.com%2Fservices%2Foauth2%2Fsuccess";
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);

        webView.getSettings().setDomStorageEnabled(true);
        webView.loadUrl(URL);
        //webView.loadUrl("https://www.google.co.in/");
        webView.setWebViewClient(new MyWebViewClient());
    }

    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals(url)) {
                // This is your web site, so do not override; let the WebView to load the page
                return false;
            }
            // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
        }

        @Override
        public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {
            super.onReceivedSslError(view, handler, error);

            // this will ignore the Ssl error and will go forward to your site
            handler.proceed();
        }
    }

} 
```

如果 url 是 https:www.google.com 则 url 仅在 webview 中打开。我用谷歌搜索很难找到解决方案，但我找不到它。如何解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:40:12.247

问题出在你的

```
 public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals(url)) {
            // This is your web site, so do not override; let the WebView to load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
        return true;
    } 
```

它试图将 URL 作为不同的意图加载，因此您的默认浏览器会启动。您真正想检查什么

> Uri.parse(url).getHost().equals(url)

尝试放置日志进行检查，您将找出问题所在。

# arrays - 8086 程序集 - 如何访问循环内的数组元素

> ID：14979969
> 
> 赞同：0
> 
> 时间：2013-02-20T12:32:47.760
> 
> 标签：arrays, memory, assembly, x86, x86-16

好的，为了使事情尽可能简单，假设我有一个基本循环，我想使用它来修改标记为 a 的数组的一些元素。在下面的示例代码中，我尝试将 a 的所有元素替换为 1，但这并没有真正起作用。

```
assume cs:code ,ds:data
data segment
  a db 1,2,3,4
  i db 0
data ends

code segment
start:
  mov ax,data
  mov ds,ax

  lea si,a

  the_loop:
    mov cl,i
    cmp cl,4
    jae the_end

    mov ds:si[i],1      ; this is the part that i don't really understand since
    inc i               ; i'm expecting i=0 and ds:si[i] equiv to ds:si[0] which
  loop the_loop         ; is apparently not the case here since i actually receives the
                        ; the value 1
  the_end:
    mov ax,4c00h
    int 21h
code ends
end start 
```

我知道我可以通过修改指令`al`后存储的元素来简单地做到这一点，然后存储它。`lodsb`但我想知道是否有可能做我上面尝试过的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T12:55:18.073

在 x86 汇编中，您不能使用存储到内存中的值来间接寻址内存。

您需要读`i`入一些可用于内存寻址的寄存器，然后改用它。您可能需要查看[Wikipedia 以了解 8086 内存寻址模式](http://en.wikipedia.org/wiki/X86_architecture#Addressing_modes)。

所以，更换

```
mov ds:si[i],1 
```

with (`ds`这里不需要段，因为它也是 , 的默认值`si`) :`bx``bx+si`

```
xor bx,bx
mov bl,[i]
mov [bx+si],byte 1 ; some other assemblers want byte ptr 
```

您的代码也存在其他问题。整个循环可以通过这种方式变得更容易和修复：

```
 lea  si,a

    xor  cx,cx
    mov  cl,[i]

@fill_loop:
    mov  [si], byte 1
    inc  si
    dec  cx
    jnz  @fill_loop 
```

或者，如果您想保存 1 个字节并使用`loop`指令。

```
 @fill_loop:
    mov  [si], byte 1
    inc  si
    loop @fill_loop 
```

请注意，在 16 位模式下，`loop`指令递减并在递减后如果不为零`cx`则跳转到标签。`cx`但是，在 32 位模式下会`loop`递减`ecx`，而在 64 位模式 (x86-64) 下会递减`rcx`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T12:55:36.217

我想您的代码甚至没有通过汇编程序运行，因为

```
mov ds:si[i],1 
```

不是有效的地址模式。

使用类似的东西

```
mov byte ptr [si],1  ; store value 1 at [SI]
inc si               ; point to next array element 
```

而是（使用 MASM 来验证语法）。

`DS:`前缀是不必要的，因为`[si]`这是默认设置。

另请参阅[80x86 寻址模式](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH04/CH04-2.html)。

# stream - SRFI/41 和 Racket/stream 不同吗？

> ID：14979972
> 
> 赞同：3
> 
> 时间：2013-02-20T12:32:51.800
> 
> 标签：stream, racket

`in-range`在 Racket 中返回一个流。库中的流上定义了很多函数`racket/stream`。但是我不能使用它们的`stream-take`功能`srfi/41`。我想执行

```
(stream-take 5 (in-range 10)) 
```

它抱怨说`stream-take: non-stream argument`。

```
(stream->list (stream-cons 10 (in-range 10))) 
```

上面抛出以下错误：

```
stream-promise: contract violation;
 given value instantiates a different structure type with the same name
  expected: stream?
  given: #<stream> 
```

然而：

```
(stream->list (stream-cons 10 stream-null)) ;; works
(stream->list (stream-cons 10 empty-stream)) ;; works 
```

两者都工作正常。

以上是否意味着来自`racket/stream`和的流`srfi/41`不兼容？如何在`racket/stream`不重新发明轮子的情况下从流中获取 10 个项目？

球拍 5.3.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:23:00.257

是的，`(in-range 10)`产生的流与流不同`srfi/41`。通常，您不能期望`srfi/41`函数对 Racket 中的所有流都有效，因为 Racket“流”实际上是一种通用数据类型，它分派给不同的方法实现（请参阅 参考资料[`gen:stream`](http://docs.racket-lang.org/reference/streams.html?q=gen%3Astream#%28def._%28%28lib._racket%2Fstream..rkt%29._gen~3astream%29%29)）。相反，`srfi/41`只需要它自己的数据类型。

（`stream-take`可能应该添加到`racket/stream`）

如果您想从 中取出 10 个项目`racket/stream`，请使用`(for/list ([x some-stream] [e 10]) x)`。

# php - APC 缓存 SimpleXMLElement 对象的数组

> ID：14979976
> 
> 赞同：0
> 
> 时间：2013-02-20T12:33:07.340
> 
> 标签：php, arrays, simplexml, apc

我在缓存 SimpleXMLElement 对象数组时遇到了困难。失败的是 apc_store 行，我不知道为什么。

程序在这一行终止，这很奇怪，因为我在其他地方使用过——将数组包装在 ArrayObject 中并将其存储在缓存中。

我的代码摘录如下：

```
 $feed = /* some url */
    $xml = simplexml_load_file($feed);
    $items = $xml -> xpath('/rss//item');

    foreach($items as $item){
        $item -> addChild('myTag1', "My Tag 1");
        $item -> addChild('myTag2', "My Tag 2");
    }

    apc_store($feed, new ArrayObject($items), 60); 
```

我不认为我的日志文件工作正常，这是最后一个条目，以防万一它有帮助，但我认为这与 SSL 有关，在这里没有帮助：

```
[Wed Feb 20 12:21:51 2013] [notice] caught SIGTERM, shutting down
Attempt to free unreferenced scalar: SV 0x7fe7805e2130, Perl interpreter: 0x7fe7805ea4f0 during global destruction.
[Wed Feb 20 12:21:54 2013] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Wed Feb 20 12:21:54 2013] [notice] SSL FIPS mode disabled
Attempt to free unreferenced scalar: SV 0x7f94bfa75ec0, Perl interpreter: 0x7f94bfa56550 during global destruction.
[Wed Feb 20 12:21:57 2013] [notice] Digest: generating secret for digest authentication ...
[Wed Feb 20 12:21:57 2013] [notice] Digest: done
[Wed Feb 20 12:21:59 2013] [notice] mod_python: Creating 4 session mutexes based on 256 max processes and 0 max threads.
[Wed Feb 20 12:21:59 2013] [notice] mod_python: using mutex_directory /tmp 
[Wed Feb 20 12:21:59 2013] [notice] SSL FIPS mode disabled
[Wed Feb 20 12:21:59 2013] [notice] Apache/2.2.22 (Unix) DAV/2 PHP/5.4.10 mod_python/3.3.1    Python/2.7.3 mod_ssl/2.2.22 OpenSSL/1.0.0j-fips mod_perl/2.0.5 Perl/v5.14.3 configured -- resuming   normal operations 
```

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:41:07.120

在上面的示例中，$feed 不是 url 的字符串表示形式；它是一个数组，其第一个元素是 url 的字符串表示形式。另外，我使用命名空间，所以 ArrayObject 需要一个斜杠前缀。

# string - ActionScript3 - 增加 String 的原型

> ID：14979977
> 
> 赞同：1
> 
> 时间：2013-02-20T12:33:07.420
> 
> 标签：string, actionscript-3, prototype

在 AS2 中，我可以执行以下操作：

```
String.prototype.startsWith = function(s){
     return this.indexOf(s) == 1
} 
```

因此，`startsWith`可用于每个 String 对象

```
var s = "some string to test with";
s.startsWith("some") // returns true 
```

并使用很棒的酷工具库做到了：

```
var s = "some @VAR string";
s.startsWith("some");//returns true
s.endsWith("ing");//returns true
s.contains("@");//returns true
s.dataBind({VAR: "awsome"})// returns 'some awsome string'
s = "b";
s.isAnyOf("a","b","c"); //true, because "b" is one of the options
s.isInArr(["a","b","c"]); //true, because "b" is in the passed array
var o = { foo: function(i) { return "wind " + i } }
s = "foo";
f.call(o,3) //returns "wind 3" because method foo is ivoked on o with 3
f.apply(o,[3]) //returns "wind 3" because method foo is ivoked on o with 3
var a1 = [], a2 = []
s.push(a1,a2) // pushes s into a1 and a2 
```

等等，还有很多很酷的东西，让编码变得更有趣（并且巧妙地使用时速度极快）

这不仅仅是关于字符串，我还有用于数字、日期、布尔值等的实用程序。

这是我尝试过的：

```
[Test]
public function test_stringPrototype()
{
    String.prototype.startsWith = function(s):Boolean
    {
        return return this.indexOf(s) == 1;
    }

    assertTrue( !!String.prototype.startsWith ) //and so far - so good ! this line passes

    var s:String = "some str";
    assertTrue(!!o.startsWith ) //and this won't even compile... :(
} 
```

这甚至不会编译，更不用说通过或失败测试......错误：`Access of possibly undefined property startsWith through a reference with static type String.`

在 AS3 中的实现方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:03:11.753

您总是可以拥有将收集所有这些方法并处理字符串的实用程序类，例如

```
package utils
{
    public class StringUtils
    {
        public static function startsWith(input:String, test:String):Boolean
        {
            return input.indexOf(test) == 0;
        }
    }
} 
```

用法：

```
trace(StringUtils.startWith("My string", "My")); 
```

或作为“全局”函数：

```
package utils
{
    public function startsWith(input:String, test:String):Boolean
    {
        return input.indexOf(test) == 0;
    }
} 
```

用法：

```
trace(startWith("My string", "My")); 
```

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:51:45.770

是的，当然，使用变量名的字符串表示：“startsWith”；下例

```
 String.prototype.traceME = function():void
        {
            trace(this);
        }

        var s:String = "some str";
        s["traceME"](); 
```

其他方法：

```
 var s:Object = new String("some str");
            s.traceME(); 
```

# batch-file - 批处理 - IF 语句

> ID：14979982
> 
> 赞同：0
> 
> 时间：2013-02-20T12:33:24.710
> 
> 标签：batch-file

我需要如果键入“c”的人应该运行 C++ 中的示例，如果键入“j”的人应该运行 Java 示例。

但：

1-当我输入“c”或“j”时不识别，如果我输入“j”，他会执行executeC，如果我选择“c”也会让executeC不进入这个executeJava。然后改成一个数值，如果我输入3-executeC，如果我输入4-executeJava。因此，如果我键入 3，它将访问目录 C:\Portico\portico-1.0.2\examples\cpp\cpp13 并处理 executeC，2- 如果我键入 4，它将访问目录 C:\Portico\portico-1.0.2\ examples\java\hla13，但没有运行，只是结束。

**看看我在命令提示符下做了什么**

```
C:\Portico\portico-1.0.2\exec>executePortico.bat main
Choose (J)ava or (C)++: 3
C:\Portico\portico-1.0.2\examples\cpp\cpp13\main.exe
Pressione qualquer tecla para continuar. . .
Created Federation
Joined Federation as exampleFederate
Successfully registered sync point: ReadyToRun

C:\Portico\portico-1.0.2\exec>executePortico.bat java-hla13
Choose (J)ava or (C)++: 4
C:\Portico\portico-1.0.2\examples\java\hla13\java-hla13.jar
Pressione qualquer tecla para continuar. . .
Terminated - Normal
C:\Portico\portico-1.0.2\exec> 
```

请看我的代码：

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

rem ################################
rem # check command line arguments #
rem ################################
:checkargs

if "%0"=="" goto usage
if "%1"=="" goto usage

set /p language=Por favor escolha a linguagem (J)ava or (C)++: 

if %language%==3 goto execC
if %language%==4 goto execJ

rem #######################
rem # test for JAVA_HOME  #
rem #######################
set JAVA=java
set JAVAC=javac
set JAR=jar
if "%JAVA_HOME%"=="" goto nojava

set JAVA="%JAVA_HOME%\bin\java"
set JAVAC="%JAVA_HOME%\bin\javac"
set JAR="%JAVA_HOME%\bin\jar"
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!

goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest

:execC
call C:\Portico\portico-1.0.2\etc\confvarsC.bat
if "%RTI_HOME%"=="" goto nortihome 
if not "%RTI_HOME%"=="" goto executeC

goto End

:execJ
call C:\Portico\portico-1.0.2\etc\confvarsJ.bat
if "%RTI_HOME%"=="" goto nortihome 
if not "%RTI_HOME%"=="" goto executeJava

goto End

:nortihome
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

############################################
### (target) execute #######################
############################################
:executeC

set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR=C:\Portico\portico-1.0.2\examples\cpp\cpp13
set EXEC=C:\Portico\portico-1.0.2\examples\cpp\cpp13\

echo %EXEC%%1.exe
pause
"%EXEC%%1.exe"

goto finish

:executeJava

set PATH=PATH=%RTI_HOME%\include\ng6;%RTI_HOME%\lib;%RTI_HOME%\bin;%JAVA_HOME%\bin;%PATH%
set ClassPath=%RTI_HOME%\lib\portico.jar
set RTI_FEDDIR=C:\Portico\portico-1.0.2\examples\java\hla13
set EXECUTA=C:\Portico\portico-1.0.2\examples\java\hla13\

echo %EXECUTA%%java-hla13.jar
pause
"%EXECUTA%%java-hla13.jar"

goto finish

:usage

echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T13:14:24.513

似乎您想要进入`J`或`C`分支，但您正在测试 3 和 4。它们都会失败并且代码会愉快地继续前进，因为没有其他逻辑可以处理错误输入。试试这个片段：

```
if "%~0"=="" goto usage
if "%~1"=="" goto usage

set /p "language=Por favor escolha a linguagem (J)ava or (C)++: "

if /i "%language%"=="C" goto execC
if /i "%language%"=="J" goto execJ
echo incorrect input - quitting
goto :EOF 
```

# c++ - 如何用 dlopen() 替换 LD_PRELOAD 的用法？

> ID：14979984
> 
> 赞同：3
> 
> 时间：2013-02-20T12:33:26.247
> 
> 标签：c++, linux, shared-libraries

我正在使用共享库使用 C++。

目前我正在使用“LD_PRELOAD”并使用 setenv() 调用设置此环境变量。
但我想使用 dlopen() API 来加载共享库。这应该与使用 setenv() 设置环境变量（即 LD_PRELOAD）一样。

我可以使用 dlopen() 来获得上述要求吗？或者使用 LD_PRELOAD 和 dlopen() 加载库有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:37:37.613

我对此不是 100% 确定，但据我了解，它使用`LD_PRELOAD`使程序加载器首先加载所有库，然后是应用程序指定的库`LD_PRELOAD`，最后是应用程序。这使得用您自己的系统库覆盖系统库成为可能。

using`dlopen`在程序加载后加载共享对象，因此不能用于覆盖系统对象。

如果必须设置环境变量以使程序正常工作，则必须在加载程序之前设置它，无论是在 shell 中还是通过您的`LD_PRELOAD`文件。如果程序不需要立即使用环境变量，那么您可以在程序中设置它，也可以在由`dlopen`.

# php - 谷歌图表 API 数据

> ID：14979987
> 
> 赞同：0
> 
> 时间：2013-02-20T12:33:32.847
> 
> 标签：php, mysql, api, google-visualization

如何使用我自己的服务器端数据（即 PHPMySQL）填充 Google Chart API。

目前我有以下数据：

```
function drawChart()
{
 // Create the data table.
 var data = new google.visualization.DataTable();
 data.addColumn('string', 'City');
 data.addColumn('number', 'Number of Crimes');
 data.addRows([
             ['Cardiff', 300],
             ['London', 900],
             ['Manchester', 500],
             ['Dublin', 400],
             ['Liverpool', 600]
             ]);

// Set Chart Options
var options = {
    'legend': 'left',
    'title': 'Crimes (per day)',
    'is3D': 'True',
    'width':400,
    'height':300
};

// Instantiate and Draw Chart.
var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(data, options);
} 
```

但是如何从我的 mySQL 数据库中的表中提供数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:47:16.313

在 Charts API 的 JavaScript 代码之前，您必须从数据库中获取数据：

```
//Your database query goes here
$list = mysql_query("SELECT city,crimes FROM TABLE");
while($row = mysql_fetch_assoc($list)){
  $data[] = "['".$row['city']."', ".$row['crimes']."]";
}
$data_for_chart = implode(",\n"$data); 
```

现在替换您的 JS 代码：

```
data.addRows([
         ['Cardiff', 300],
         ['London', 900],
         ['Manchester', 500],
         ['Dublin', 400],
         ['Liverpool', 600]
         ]); 
```

和：

```
data.addRows([
         <?php echo $data_for_chart; ?>
         ]); 
```

# r - 使用聚合遍历 data.table

> ID：14979989
> 
> 赞同：3
> 
> 时间：2013-02-20T12:33:44.657
> 
> 标签：r, data.table

我`data.table`的就像：

```
AccountNo    SubscriptionStart     SubscriptionEnd
11111        2010-10-12            2011-10-11
11112        2009-03-08            2010-03-08
11112        2010-03-08            2011-03-08
11112        2012-03-08            2013-03-08
11113        2011-08-21            2012-08-21 
```

我想要实现的只是添加一个新列来标记稍后更新的帐户。

换句话说：如果 SubscriptionEnd <= max(SubscitionStart) 在 AccountNo 定义的子集中，GotRenewed 为 TRUE。在此示例中，它将类似于：

```
AccountNo    SubscriptionStart     SubscriptionEnd    GotRenewed
11111        2010-10-12            2011-10-11         0
11112        2009-03-08            2010-03-07         1
11112        2010-03-08            2011-03-07         1
11112        2012-03-08            2013-03-07         0
11113        2011-08-21            2012-08-21         0 
```

我怎么能做到这一点？我感谢您的帮助！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:44:09.727

```
dt[,GotRenewed := SubscriptionEnd <= max(SubscriptionStart), by=AccountNo]

   AccountNo SubscriptionStart SubscriptionEnd GotRenewed
1:     11111        2010-10-12      2011-10-11      FALSE
2:     11112        2009-03-08      2010-03-08       TRUE
3:     11112        2010-03-08      2011-03-08       TRUE
4:     11112        2012-03-08      2013-03-08      FALSE
5:     11113        2011-08-21      2012-08-21      FALSE 
```

`as.numeric`如果您确实需要 0/1，请使用。

# php - Facebook api 不像不工作

> ID：14979990
> 
> 赞同：2
> 
> 时间：2013-02-20T12:33:52.573
> 
> 标签：php, facebook-graph-api

当我发出 /1602545584_166697970146120/likes DELETE 命令时，我得到以下响应。未捕获的 OAuthException: (#200) 此应用程序禁用向其他用户发布动态消息

即使使用图形 api 资源管理器：

> { "error": { "message": "(#200) 此应用程序禁止向其他用户发布动态消息", "type": "OAuthException", "code": 200 } }

这会被修复还是无法通过 api 删除你的喜欢（我觉得这很荒谬）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:51:19.507

我观察到它可以与 DELETE 方法一起使用*** 条件是对正确的 post_id* 进行不同的操作**。

我的观察：

1) 我对 PAGE 发布的格式为 XXXXX_YYYYY 的 post_id 做了一个不同的处理：**它起作用**了。

2) 我对用户发布的格式为 XXXXX_YYYYY 的 post_id 做了一个不同的处理：**它不起作用**。

3）我从用户发布的格式为 XXXXX_YYYYY 的 post_id 中删除了 XXXXX：**它有效**。[ XXXXX 简单地表示用户 id ]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:45:05.800

奇怪的是，您仍然可以使用图表发布类似的内容，但您无法删除它。因此，您最好将喜欢的内容排除在外，因为您无法删除喜欢的内容，并且它会使您的应用程序处于半功能状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:33:48.013

更新：突然它通过原始方法再次起作用。奇怪的...

我使用的方法：

```
$facebook = new Facebook(array(
  'appId'  => FB_appid,
  'secret' => FB_secret,
  'cookie' => false,
));
$facebook->setAccessToken($fbtoken);
$like = $facebook->api('/'.$postid.'/likes/','DELETE'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:48:39.147

此功能已删除。

[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅[此博客文章](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)。

# ruby-on-rails - 如何使用自签名证书链创建链式证书

> ID：14979997
> 
> 赞同：2
> 
> 时间：2013-02-20T12:34:27.473
> 
> 标签：ruby-on-rails, ssl, openssl, ca

我正在尝试将我的 rails 应用程序转换为 https://。出于测试目的，我使用 openssl 创建了一个自签名证书。我正在使用 nginx 作为网络服务器。然后我使用这个证书配置了 nginx。

但是，在使用该应用程序时，它在地址前显示 https:// 但显示结果，因为 **此网页有一个重定向循环，此网页[https://myapp.com](https://myapp.com)在 chrome中导致了太多重定向**，并且其他浏览器也显示重定向问题.

经过太多研究，我发现了一个线索，比如需要使用链式证书来解决这个问题。然后我尝试创建证书链。我使用的方式在下面解释。

```
openssl req -new -newkey rsa:1024 -nodes -out ca.csr -keyout ca.key
openssl x509 -trustout -signkey ca.key -days 365 -req -in ca.csr -out ca.pem 
```

我将 cap.pem 复制到

```
/etc/ssl/certs 
```

和 ca.key 到

```
/etc/ssl/private 
```

然后根据需要编辑**openssl.conf**并在**/etc/ssl**中创建两个新目录**CA 和 newcerts**。

 **并通过运行以下命令提供新的串行和数据库文件。

```
sudo sh -c "echo '01' > /etc/ssl/CA/serial"
sudo touch /etc/ssl/CA/index.txt 
```

然后我通过运行以下命令创建了一个客户端证书。

```
openssl genrsa -out client.key 1024
openssl req -new -key client.key -out client.csr
openssl ca -in client.csr -out client.cer 
```

该证书取决于**ca.pem**

然后我从第二个证书创建了第三个证书，这意味着**client.cer**并且不依赖于**ca.pem**使用以下命令。

```
 # Create a certificate request
 openssl req -new -keyout client1.key -out client1.request -days 365

 # Create and sign the certificate
 openssl ca -policy policy_anything -keyfile client.key -cert client.pem -out client1.pem -infiles client1.request 
```

并更改了 openssl.conf 选项

```
[ usr_cert ]
basicConstraints=CA:TRUE # prev value was FALSE 
```

现在我有一个证书链

ca.pem -> client.pem -> client1.pem

如何捆绑这三个证书以正确创建链式证书。我以自己的方式尝试过，但它显示了同样的错误。

谁能帮忙解决这个问题，过去一周我正在解决这个问题。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T10:22:17.403

重定向循环与证书链或证书格式无关。您在 Web 服务器配置或应用程序逻辑中出现错误。我猜您正在尝试从 http 重定向到 https，但重定向也是从 https 提供的，因此这会导致循环。

Google Chrome（和其他浏览器在某种程度上）缓存重定向，因此可能很难正确调试和修复循环问题（即使您在服务器/应用程序端修复问题，它仍可能重定向）。确保您的请求到达后端，清除浏览器缓存或 curl 等工具以正确调试问题。**

# php - 提高 MySQL 查询的速度

> ID：14979998
> 
> 赞同：0
> 
> 时间：2013-02-20T12:34:32.467
> 
> 标签：php, mysql

编辑：

我对查询进行了如下修改：

```
SELECT
  a.title, count(*),at.search_code
FROM 
  `qitz3_attributes_type` at
left join
  qitz3_attributes a
on 
  a.attribute_type_id = at.id
left join
  qitz3_attributes_property ap
on
  ap.attribute_id = a.id
left join
  qitz3_helloworld h
on
  h.id = ap.property_id
where 
  at.id in (1,2,8,9,11)
and 
  a.search_filter = 1
and
  h.area=506
and 
  h.expiry_date >= '2013-02-20 13:28:04' 
group by 
  a.title
order by search_code 
```

这似乎要快得多，但我仍然在解释中使用临时和使用文件排序...

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  at  range   PRIMARY PRIMARY 4   NULL    5   Using where; Using temporary; Using filesort
1   SIMPLE  a   ref PRIMARY,Attribute type ID,Search filter,Attribute ...   Attribute type ID   4   password.at.id  6   Using where
1   SIMPLE  ap  ref Property ID,Attribute ID,Attribute Property Attribute Property  4   password.a.id   142 Using where; Using index
1   SIMPLE  h   eq_ref  PRIMARY,Area indexes,Expiry date    PRIMARY 4   password.ap.property_id 1   Using where 
```

结束编辑

我正在为我正在开发的网站开发一个搜索组件，虽然它都在工作，但我希望看到一些查询运行得更快。

为了填充一组搜索过滤器（显示具有每个设施或属于特定类型的属性的数量），我使用以下两个查询。第一个将获得一个 ID 列表，然后我将其插入到第二个查询中，如下所示：

根据以下信息，任何人都可以建议一种更有效的方法吗？我真的很想加快第一个查询的速度，因为与其他查询相比，它似乎有点慢。

150ms真的那么慢吗？15ms会更好...

谢谢，

亚当

查询 1（大约需要 150 毫秒）：

```
 SELECT h.id, h.parent_id, h.level, h.title as property_title, h.area, h.region, h.department, h.city, 
  LEFT(h.description, 250) as description, h.thumbnail, h.occupancy, h.swimming, g.path, (single_bedrooms + double_bedrooms + triple_bedrooms + quad_bedrooms + twin_bedrooms) as bedrooms, c.title as location_title, ( select min(tariff) 
  from qitz3_tariffs 
  where id = h.id ) as price, e.title as tariff_based_on, f.title as base_currency, a.title as property_type, a2.title as accommodation_type, ( select count(*) 
  from qitz3_reviews 
  where property_id = h.id 
  group by h.id ) as reviews 
  FROM qitz3_classifications c 
  LEFT JOIN qitz3_helloworld h 
  on c.id = h.area 
  LEFT JOIN qitz3_attributes_property ap 
  ON ap.property_id = h.id 
  LEFT JOIN qitz3_attributes_type at 
  ON at.id = ap.attribute_id 
  LEFT JOIN qitz3_attributes a 
  ON a.id = ap.attribute_id 
  LEFT JOIN qitz3_attributes_property ap2 
  ON ap2.property_id = h.id 
  LEFT JOIN qitz3_attributes_type at2 
  ON at2.id = ap2.attribute_id 
  LEFT JOIN qitz3_attributes a2 
  ON a2.id = ap2.attribute_id 
  LEFT JOIN qitz3_attributes e 
  ON e.id = h.tariff_based_on 
  LEFT JOIN qitz3_attributes f 
  ON f.id = h.base_currency 
  LEFT JOIN qitz3_classifications g 
  ON g.id = h.city 
  WHERE a.attribute_type_id = 1 
  AND a2.attribute_type_id = 2 
  AND c.id = 506 
  AND h.expiry_date >= '2013-02-20 12:05:13' 
  AND h.id > 1 
```

解释：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY c   const   PRIMARY PRIMARY 4   const   1   
1   PRIMARY h   ref PRIMARY,Area indexes,Expiry date    Area indexes    4   const   615 Using where
1   PRIMARY ap  ref Property ID,Attribute ID    Property ID 4   password.h.id   21  Using where
1   PRIMARY at  eq_ref  PRIMARY PRIMARY 4   password.ap.attribute_id    1   Using index
1   PRIMARY a   eq_ref  PRIMARY,Attribute type ID   PRIMARY 4   password.ap.attribute_id    1   Using where
1   PRIMARY ap2 ref Property ID,Attribute ID    Property ID 4   password.ap.property_id 21  Using where
1   PRIMARY at2 eq_ref  PRIMARY PRIMARY 4   password.ap2.attribute_id   1   Using index
1   PRIMARY a2  eq_ref  PRIMARY,Attribute type ID   PRIMARY 4   password.ap2.attribute_id   1   Using where
1   PRIMARY e   eq_ref  PRIMARY PRIMARY 4   password.h.tariff_based_on  1   
1   PRIMARY f   eq_ref  PRIMARY PRIMARY 4   password.h.base_currency    1   
1   PRIMARY g   eq_ref  PRIMARY PRIMARY 4   password.h.city 1   
3   DEPENDENT SUBQUERY  qitz3_reviews   ref Property ID Property ID 4   password.h.id   1   Using index; Using temporary; Using filesort
2   DEPENDENT SUBQUERY  qitz3_tariffs   ref Property ID Property ID 4   password.h.id   2 
```

查询 2（大约需要 30 毫秒）：

```
SELECT a.id,count(attribute_id) as count, a.title AS attribute, a.published, at.title as facility_type, at.search_code 
FROM qitz3_attributes AS a 
LEFT JOIN qitz3_attributes_type at 
on at.id = a.attribute_type_id 
LEFT JOIN qitz3_attributes_property ap 
on ap.attribute_id = a.id 
WHERE search_filter = 1 
AND a.published = 1 
AND property_id in (152843,103180,152845,4628,5653,3865,107553,155945,106029,107575,149052,837,104264,98635,98636,98637,98638,3667,106838,3672,157278,155743,157791,157792,151153,151155,100725,106109,157569,157576,107145,150666,103310,5780,3480,102041,154016,3490,154018,932,153518,151991,154041,154042,4288,5832,149451,157646,102094,148444,153822,157407,153839,151536,157393,157395,157428,157429,102236,104770,157378,157380,157381,157382,157383,157654,104768,103746,153683,150175,4618,101050,104942,157229,157230,98515,104771,104944,3612,148721,104212,5307,3432,156676,102706,404,5518,156359,5252,102697,5271,98979,101827,149524,102676,107551,5685,101736,156538,152703,4730,151881,95838,3759,149769,5269,98429,153729,5233,703,5579,98943,157433,3157,155661,107347,147545,147547,5216,106345,156533,93833,158091,96403,3491,968,158195,158196,157580,104148,3030,94686,154725,150582,103027,99062,102462,4384,5634,153874,157974,101669,47,105285,102481,102234,5749,156793,153748,96404,151467,154292,147645,97471,100551,102090,4841,3563,155643,4656,98424,157243,150601,157415,4701,102283,100719,100738,5643,98425,98972,103261,531,3105,98108,150592,5719,150616,157532,3974,3212,157581,97469,97470,149183,157638,149730,102114,156395,153621,102560,102913,94684,5609,157578,98423,98971,102151,146734,150585,104287,155296,104956,94592,102433,147575,156325,106344,101766,107058,106560,103026,157848,98973,4303,5620,149767,150563,4407,104268,97876,156784,156786,149922,701,154317,153821,102480,348,102778,102779,102780,102781,102479,352,103025,98677,5254,98697,3995,156322,100305,98532,3833,5374,150172,151435,102368,102380,157228,103171,147740,152870,103579,3870,104037,103016,4995,105104,157605,5811,955,147643,156648,107802,101502,94685,3569,148755,150293,4122,157013,157297,98676,156794,102848,157635,157640,95717,98980,102764,102777,102782,36,101765,154373,149829,154955,107683,158176,102557,157552,103163,5760,104627,153561,266,151335,151176,147620,147379,3085,155760,106339,151424,106759,5145,104990,97877,155495,5241,156407,156625,3236,152782,96066,147617,3860,4614,3497,147883,158207,102985,104622,101816,157275,149037,4792,149226,3496,101825,102538,150571,105015,97874,157391,158192,102562,155032,5383,102558,104194,156740,101446,147615,5815,107081,155992,97473,148817,945,101751,158074,4249,101792,4532,152828,104316,157319,156071,157508,157510,148836,4745,153823,157942,3859,157442,100017,102555,147629,149272,157845,151256,101481,154735,154737,157652,106232,97991,4660,3309,157597,407,157658,154152,157374,153385,148037,158214,100452)
GROUP BY a.id 
```

这个查询给出了每个属性的属性数量（例如高尔夫、空调、属性类型等）。这样做的好处是只显示具有属性的属性。因此，当用户向下钻取没有属性的属性时，不会显示。这基本上归结为第一个查询，在该查询中我得到了与一组特定属性匹配的属性列表。

表格如下：

--

## -- 表的表结构`qitz3_attributes`

```
CREATE TABLE IF NOT EXISTS `qitz3_attributes` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`attribute_type_id` int(11) NOT NULL,
`title` varchar(75) NOT NULL,
`ordering` int(11) NOT NULL,
`state` tinyint(4) NOT NULL DEFAULT '1',
`published` int(11) NOT NULL,
`search_filter` bit(1) NOT NULL,
`language_code` varchar(6) NOT NULL DEFAULT 'en-GB',
PRIMARY KEY (`id`),
KEY `Attribute type ID` (`attribute_type_id`),
KEY `Search filter` (`search_filter`),
KEY `Published` (`published`)
) ENGINE=InnoDB    DEFAULT CHARSET=latin1 AUTO_INCREMENT=1522 ; 
```

--

## -- 表的表结构`qitz3_attributes_property`

```
CREATE TABLE IF NOT EXISTS `qitz3_attributes_property` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`property_id` int(11) NOT NULL,
`attribute_id` int(11) NOT NULL,
PRIMARY KEY (`id`),
KEY `Property ID` (`property_id`),
KEY `Attribute ID` (`attribute_id`)
) ENGINE=InnoDB    DEFAULT CHARSET=latin1 AUTO_INCREMENT=66261 ; 
```

--

## -- 表的表结构`qitz3_attributes_type`

```
CREATE TABLE IF NOT EXISTS `qitz3_attributes_type` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`title` varchar(75) NOT NULL,
`language_code` varchar(6) NOT NULL,
`field_name` varchar(25) NOT NULL,
`search_code` varchar(25) NOT NULL,
`state` int(11) NOT NULL DEFAULT '1',
`published` int(11) NOT NULL DEFAULT '1',
PRIMARY KEY (`id`)
) ENGINE=InnoDB    DEFAULT CHARSET=latin1 AUTO_INCREMENT=34 ; 
```

--

## -- 表的表结构`qitz3_classifications`

```
CREATE TABLE IF NOT EXISTS `qitz3_classifications` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`parent_id` int(10) unsigned NOT NULL DEFAULT '0',
`lft` int(11) NOT NULL DEFAULT '0',
`rgt` int(11) NOT NULL DEFAULT '0',
`level` int(10) unsigned NOT NULL DEFAULT '0',
`title` varchar(255) NOT NULL,
`description` text NOT NULL,
`path` varchar(255) NOT NULL DEFAULT '',
`alias` varchar(255) NOT NULL,
`access` tinyint(3) unsigned NOT NULL DEFAULT '0',
`published` int(11) NOT NULL,
`longitude` float(10,6) NOT NULL,
`latitude` float(10,6) NOT NULL,
PRIMARY KEY (`id`),
KEY `idx_left_right` (`lft`,`rgt`),
KEY `Alias index` (`alias`)
) ENGINE=MyISAM    DEFAULT CHARSET=utf8 AUTO_INCREMENT=158052 ; 
```

--

## -- 表的表结构`qitz3_helloworld`（属性表）

```
CREATE TABLE IF NOT EXISTS `qitz3_helloworld` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`parent_id` int(10) NOT NULL DEFAULT '0',
`lft` int(11) NOT NULL DEFAULT '0',
`rgt` int(11) NOT NULL DEFAULT '0',
`level` int(10) unsigned NOT NULL,
`alias` varchar(250) NOT NULL DEFAULT '',
`access` tinyint(3) unsigned NOT NULL DEFAULT '0',
`path` varchar(255) NOT NULL DEFAULT '',
`title` varchar(120) NOT NULL,
`area` int(11) NOT NULL DEFAULT '0',
`region` int(11) NOT NULL DEFAULT '0',
`department` int(11) NOT NULL DEFAULT '0',
`city` int(11) NOT NULL DEFAULT '0',
`params` text NOT NULL,
`created_by` int(10) NOT NULL DEFAULT '0',
`created_on` datetime NOT NULL,
`modified` datetime DEFAULT NULL,
`expiry_date` date DEFAULT NULL,
`availability_last_updated_on` datetime DEFAULT NULL,
`modified_by` int(11) DEFAULT NULL,
`lang` varchar(5) NOT NULL DEFAULT 'en-GB',
`description` mediumtext NOT NULL COMMENT 'The summary and description for this accommodation',
`internal_facilities_other` varchar(1000) NOT NULL,
`external_facilities_other` varchar(1000) NOT NULL,
`activities_other` varchar(5000) NOT NULL,
`location_details` varchar(5000) NOT NULL,
`getting_there` varchar(5000) NOT NULL,
`thumbnail` varchar(150) NOT NULL,
`occupancy` int(11) DEFAULT NULL,
`single_bedrooms` int(11) NOT NULL,
`double_bedrooms` int(11) NOT NULL,
`triple_bedrooms` int(11) DEFAULT NULL,
`quad_bedrooms` int(11) DEFAULT NULL,
`twin_bedrooms` int(11) DEFAULT NULL,
`childrens_beds` int(11) DEFAULT NULL,
`cots` int(11) DEFAULT NULL,
`extra_beds` int(11) DEFAULT NULL,
`bathrooms` int(11) NOT NULL,
`toilets` int(11) DEFAULT NULL,
`swimming` int(11) NOT NULL,
`latitude` decimal(10,7) DEFAULT NULL,
`longitude` decimal(10,7) DEFAULT NULL,
`nearest_town` varchar(50) DEFAULT NULL,
`distance_to_coast` int(11) DEFAULT NULL,
`additional_price_notes` varchar(3000) DEFAULT NULL,
`base_currency` int(11) DEFAULT NULL,
`tariff_based_on` int(11) DEFAULT NULL,
`linen_costs` varchar(250) DEFAULT NULL,
`changeover_day` int(11) DEFAULT NULL,
`published` tinyint(4) NOT NULL DEFAULT '0',
`video` tinyint(4) NOT NULL DEFAULT '0',
PRIMARY KEY (`id`),
KEY `idx_left_right` (`lft`,`rgt`),
KEY `Area indexes` (`area`,`region`,`department`),
KEY `Expiry date` (`expiry_date`)
) ENGINE=InnoDB    DEFAULT CHARSET=utf8 AUTO_INCREMENT=158249 ; 
```

--

## -- 表的表结构`qitz3_reviews`

```
CREATE TABLE IF NOT EXISTS `qitz3_reviews` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`property_id` int(11) NOT NULL,
`title` varchar(150) NOT NULL,
`review_text` varchar(4000) NOT NULL,
`date` date NOT NULL,
`rating` int(11) NOT NULL,
`guest_name` varchar(75) NOT NULL,
`guest_email` varchar(150) NOT NULL,
`state` tinyint(3) NOT NULL DEFAULT '0',
`published` tinyint(1) NOT NULL DEFAULT '0',
`created` datetime NOT NULL,
`created_by` int(11) NOT NULL,
PRIMARY KEY (`id`),
KEY `Property ID` (`property_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=921 ; 
```

--

## -- 表的表结构`qitz3_tariffs`

```
CREATE TABLE IF NOT EXISTS `qitz3_tariffs` (
`tariff_id` int(11) NOT NULL AUTO_INCREMENT,
`id` int(11) NOT NULL COMMENT 'Denotes the property listing ID',
`start_date` date NOT NULL,
`end_date` date NOT NULL,
`tariff` int(11) NOT NULL COMMENT 'Price per booking period between the dates specified. dated spec',
PRIMARY KEY (`tariff_id`),
KEY `Property ID` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9267 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:17:28.580

快速播放，但试图将子选择从字段列表中移出。

```
SELECT h.id, h.parent_id, h.level, h.title as property_title, h.area, h.region, h.department, h.city, LEFT(h.description, 250) as description, h.thumbnail, h.occupancy, h.swimming, g.path, (single_bedrooms + double_bedrooms + triple_bedrooms + quad_bedrooms + twin_bedrooms) as bedrooms, c.title as location_title, 
Sub1.price, 
e.title as tariff_based_on, f.title as base_currency, a.title as property_type, a2.title as accommodation_type, 
Sub2.reviews 
FROM qitz3_classifications c 
LEFT JOIN qitz3_helloworld h on c.id = h.area 
LEFT JOIN qitz3_attributes_property ap ON ap.property_id = h.id 
LEFT JOIN qitz3_attributes_type at ON at.id = ap.attribute_id 
LEFT JOIN qitz3_attributes a ON a.id = ap.attribute_id 
LEFT JOIN qitz3_attributes_property ap2 ON ap2.property_id = h.id 
LEFT JOIN qitz3_attributes_type at2 ON at2.id = ap2.attribute_id 
LEFT JOIN qitz3_attributes a2 ON a2.id = ap2.attribute_id 
LEFT JOIN qitz3_attributes e ON e.id = h.tariff_based_on 
LEFT JOIN qitz3_attributes f ON f.id = h.base_currency 
LEFT JOIN qitz3_classifications g ON g.id = h.city 
LEFT JOIN ( SELECT id, MIN(tariff) AS price FROM qitz3_tariffs GROUP BY id) Sub1 ON Sub1.Id = h.id 
LEFT JOIN ( SELECT property_id, COUNT(*) AS reviews FROM qitz3_reviews GROUP BY property_id ) as Sub2 ON Sub2.property_id = h.id 
WHERE a.attribute_type_id = 1 
AND a2.attribute_type_id = 2 
AND c.id = 506 
AND h.expiry_date >= '2013-02-20 12:05:13' 
AND h.id > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:12:35.090

当您需要更快地搜索数据时，您应该看看[Solr](http://lucene.apache.org/solr/)或[Sphinx](http://sphinxsearch.com/)。使用此索引服务器，您可以索引您的 MySQL 数据并查询它们。

它比 MySQL 快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:28:02.153

您的第一个查询有很多错误：

前 7 个 LEFT JOIN 应该是 INNER JOIN。对于 qitz3_attributes，您应该考虑不那么激进地规范化数据（使用多列而不是多行来描述数据。

# iphone - 将 sigUp 表单（包括几个 textField ）放入滚动查看器模板（iphone）

> ID：14979999
> 
> 赞同：0
> 
> 时间：2013-02-20T12:34:34.843
> 
> 标签：iphone, uiscrollview, viewdidload

我设计了一个像下面这样的注册表单，其中包含几个文本字段，每次用户点击一个文本字段时，键盘都会出现或 datePicker 用于生日日期。使用点击出现注册表单。

但是表格本身会跳起来覆盖整个屏幕，

如何将 viewDidLoad 以及我的代码设计更改为 1) 将注册表单设置为滚动视图格式，以避免表单在屏幕上跳起？

```
- (UIView *)signUpForm
{

if      (!_signUpForm) {
        CGRect frame = CGRectMake(0.0, kSignUpViewVisibleHeight, kDeviceWidth, 310.0);
        UIView *container = [[UIView alloc] initWithFrame:frame];

        CGFloat y = 15.0;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        UITextField *field = [[UITextField alloc] initWithFrame:frame];
        field.placeholder = @"Email*";
        field.keyboardType = UIKeyboardTypeEmailAddress;
        [container addSubview:field];
        self.Email = field;
        self. Email.delegate = self;
            self.Email.clearButtonMode = UITextFieldViewModeWhileEditing;

        CGFloat spacing = 8.0;
        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Password*";
        field.secureTextEntry = YES;
        [container addSubview:field];
        self.password = field;
        self.password.delegate = self;
        self. password.autocapitalizationType = UITextAutocapitalizationTypeNone;
        self. password.clearButtonMode = UITextFieldViewModeWhileEditing;

        frame.size.height = 200.0;

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, kDeviceWidth - 2*15.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"Confirm Password*";
        field.secureTextEntry = YES;
        [container addSubview:field];
        self.ConfirmPassword = field;
        self. ConfirmPassword.delegate = self;
        self. ConfirmPassword.autocapitalizationType = UITextAutocapitalizationTypeNone;
        self.registrationFormConfirmPassword.clearButtonMode = UITextFieldViewModeWhileEditing;

        y = frame.origin.y + kDefaultTextFieldHeight + 16.0;
        CGFloat w = (kDeviceWidth - 2 * 15.0) / 2;
        frame = CGRectMake(15.0, y, w - 2.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];

        field.placeholder = @"First Name*";
        [container addSubview:field];
        self.firstName = field;
        self. firstName.delegate = self;
        self. firstName.clearButtonMode = UITextFieldViewModeWhileEditing;

        frame = CGRectMake(15.0 + w + 2.0, y, w - 2.0, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
field.placeholder = @"Last Name*";
        [container addSubview:field];
        self.lastName = field;
        self.lastName.delegate = self;
        self.lastName.clearButtonMode = UITextFieldViewModeWhileEditing;

        y = frame.origin.y + kDefaultTextFieldHeight + spacing;
        frame = CGRectMake(15.0, y, w, kDefaultTextFieldHeight);
        field = [[UITextField alloc] initWithFrame:frame];
        [self.appDel.styleManager decorateTextField:field];
        field.placeholder = @"Birthday";
        [container addSubview:field];
        self.Birthday = field;
        self.Birthday.delegate = self;

UIButton *signUpButton = [UIButton buttonWithType:UIButtonTypeCustom];
        signUpButton.frame = frame;
        [signUpButton setTitle:@"Sign Up" forState:UIControlStateNormal];
         [signUpButton addTarget:self action:@selector(signUp:) forControlEvents:UIControlEventTouchUpInside]; [container addSubview:signUpButton];

        y = frame.origin.y + kDefaultTextFieldHeight + 8.0;
        frame = CGRectMake((container.frame.size.width - 192.0) / 2, y, 192.0, 34.0);
        UIButton *cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];
        cancelButton.frame = frame;
        [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
        [self.appDel.styleManager decorateButton:cancelButton];
        [cancelButton addTarget:self action:@selector(cancelRegistration:) forControlEvents:UIControlEventTouchUpInside];
        [container addSubview:cancelButton];

        _signUpForm = container;
    }
    return _ signUpForm;
}

    - (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:YES];
    self.view.backgroundColor = [self.appDel.styleManager appBackgroundGradientWithFrame:self.view.bounds];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(endPageEdit:)];
    tap.delegate = self;
    [self.view addGestureRecognizer:tap];
    [self.appDel.styleManager decorateButton:self.loginWithEmailButton];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardDidShow:)
                                                 name:UIKeyboardDidShowNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardDidHide:)
                                                 name:UIKeyboardDidHideNotification
                                               object:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:47:55.480

这是这个问题的解决方案，它肯定会工作 [http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/](http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/)