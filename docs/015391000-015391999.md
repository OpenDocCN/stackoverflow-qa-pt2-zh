# StackOverflow 问答 15391000-15391999

# .net - 批量更新：StatementType 枚举值，4 无效/无效操作。连接已关闭

> ID：15391000
> 
> 赞同：0
> 
> 时间：2013-03-13T16:28:14.640
> 
> 标签：.net, enterprise-library, batch-updates

我正在使用企业库的数据访问块。

我的代码正在进行大批量更新，但对于我们的一位客户来说，它总是以下列异常之一告终：

```
System.ArgumentOutOfRangeException: The StatementType enumeration value, 4, is invalid.
Parameter name: StatementType
at System.Data.Common.DbDataAdapter.UpdatedRowStatusErrors(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount)
at System.Data.Common.DbDataAdapter.UpdatedRowStatus(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount)
at System.Data.Common.DbDataAdapter.Update(DataRow[] dataRows, DataTableMapping tableMapping)
at System.Data.Common.DbDataAdapter.UpdateFromDataTable(DataTable dataTable, DataTableMapping tableMapping)
at System.Data.Common.DbDataAdapter.Update(DataSet dataSet, String srcTable) 
```

和

```
System.InvalidOperationException: Invalid operation. The connection is closed. at
System.Data.Common.DbDataAdapter.UpdatedRowStatusErrors(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount) at
System.Data.Common.DbDataAdapter.UpdatedRowStatus(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount) at
System.Data.Common.DbDataAdapter.Update(DataRow[] dataRows, DataTableMapping tableMapping) at
System.Data.Common.DbDataAdapter.UpdateFromDataTable(DataTable dataTable, DataTableMapping tableMapping) at
System.Data.Common.DbDataAdapter.Update(DataTable dataTable) at
Microsoft.Practices.EnterpriseLibrary.Data.Database.DoUpdateDataSet(UpdateBehavior behavior, DataSet dataSet, String tableName, IDbCommand insertCommand, IDbCommand updateCommand, IDbCommand deleteCommand, Nullable`1 updateBatchSize) at
Microsoft.Practices.EnterpriseLibrary.Data.Database.UpdateDataSet(DataSet dataSet, String tableName, DbCommand insertCommand, DbCommand updateCommand, DbCommand deleteCommand, UpdateBehavior updateBehavior, Nullable`1 updateBatchSize) at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:28:14.640

我已经在互联网上搜索了一段时间，但无法找到这些错误的含义或如何修复它们。现在终于找到答案了，分享一下。

错误总是在 10 分钟后发生。这实际上是一个**超时**。

提高 my 的价值`transactionScope.TransactionOptions.Timeout`没有帮助；检查是否正确配置了 MSDTC 也无济于事。

我通过插入以下内容使其工作：

```
<system.transactions>
    <machineSettings maxTimeout="20:00:00"/>
</system.transactions> 
```

进入可以在这里找到的**machine.config文件：**

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config 
```

希望这对某人有所帮助，有一天......

# jquery - 引导移动过渡

> ID：15391004
> 
> 赞同：2
> 
> 时间：2013-03-13T16:28:18.837
> 
> 标签：jquery, twitter-bootstrap

我正在寻找一种使用 Bootstrap 进行页面转换的方法。我一直在使用 jQuery mobile，它确实允许页面转换，但我发现不喜欢它并更改为 Bootstrap。

所以我的问题是：

有没有办法使用 jQuery mobile 但使用引导程序进行页面转换？或任何类型的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:20:26.117

我也一直在寻找与 jQuery Mobile 转换等效的特定引导程序，但没有找到太多。

不过，如果有帮助的话，这个非常简单有趣：[http ://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T13:04:15.533

[https://github.com/kevinknelson/bootstrap-mobile](https://github.com/kevinknelson/bootstrap-mobile)

你应该看看这个

# java - BST 仅保留最后插入的值并使其成为根

> ID：15391008
> 
> 赞同：0
> 
> 时间：2013-03-13T16:28:20.613
> 
> 标签：java, binary-search-tree

我正在尝试使用 insert() 填充二叉搜索树，但是当我每次“打印”我的 BST 的内容时，我只会得到插入到 BST 中的最后一项。我需要解决什么问题才能确保我的所有价值都保留在 BST 中？

从调试中，我认为我的问题是我的 public void insert() 每次调用它时都会将新值设置为 root。我不知道如何解决它？

这是我的 BST 课程：

```
public class BinarySearchTree<T extends Comparable<T>> {

private class BinarySearchTreeNode<E>{
    public BinarySearchTreeNode<E> left, right;
    private E data;

    private BinarySearchTreeNode (E data) {
        this.data = data;
    }
}

private BinarySearchTreeNode<T> root;

public boolean isEmpty() {
    return root == null;
} 
private BinarySearchTreeNode<T> insert(T value, BinarySearchTreeNode<T> ptr) {
            if (ptr == null){ 
        ptr = new BinarySearchTreeNode<>(value); 
        return ptr; 
    }
    int compare = value.compareTo(ptr.data); //when ptr != null, this line and below should execute for each bstStrings.inster(x)
    /* pass the value (s1...sN) when compared to (ptr.data) to compare
     * when value and ptr.data == 0 re
     */
    if (compare == 0) {
        return ptr;
    }
    if (compare < 0) {
        while (ptr.left != null){
            ptr = ptr.left;
            if (ptr.left == null) {//found insertion point
                BinarySearchTreeNode<T> node = new BinarySearchTreeNode<>(value);
                ptr = ptr.left;
                ptr = node;
                return ptr;
            }
        }
    }
    else {
        return insert(value, ptr.left);
    }
    if (compare > 0) {              
        if (ptr.right == null) {
            BinarySearchTreeNode<T> node = new BinarySearchTreeNode<>(value);
            ptr = ptr.right;
            ptr = node;
            return ptr;
        } 
    }
    else {
        return insert(value, ptr.right);                    
    }
    return ptr;
}
public void insert(T value) {
    root = insert(value, root);  //****Where I believe the problem is******
} 
private void printTree(BinarySearchTreeNode<T>node){
    if(node != null){
        printTree(node.left);
        System.out.println(" " + node.data);
        printTree(node.right);
    }
}
public void printTree(){
    printTree(root);
    System.out.println();
}    
} 
```

对于添加上下文，这里是我的 Main()，我在其中调用 insert() 并尝试将字符串插入 BST：

```
public class Main {

public static void main(String[] args) {

    BinarySearchTree<String> bstStrings = new BinarySearchTree<String>();

    String s = "Hello";
    String s1 = "World";
    String s2 = "This Morning";
    String s3 = "It's";

    bstStrings.insert(s);
    bstStrings.insert(s1);
    bstStrings.insert(s2);
    bstStrings.insert(s3);   //the only inserted value that is printed below

    bstStrings.printTree();

        System.out.println();
        System.out.println("You should have values above this line!");
}
} 
```

最后我的控制台输出：

```
It's

You should have values above this line! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:34:56.447

一些提示：

*   我在里面看不到任何递归调用`insert`。如果没有适当的递归调用（根据值进入当前节点的左子树或右子树），您将如何遍历 BST？我确实看到了一些看起来像是会执行这些调用的注释掉的代码。为什么他们被注释掉了？
*   您将返回新插入的节点，然后将其设置为`root`. 这将*每次*`root`设置指向新节点。我不认为那是你想要的。
**   如果您尝试处理树为空的特殊情况，您需要做的就是检查 if `root`is `null`，然后将新节点设置为该节点。*   实在是没必要回去了`ptr`。由于您的 BST 维护对 的引用`root`，因此您始终拥有对树根的引用。每次插入时，从 开始，`root`然后递归遍历树，直到找到合适的位置插入新节点。如果你真的必须返回引用，那么你肯定不应该设置`root`到那个新节点！*

 *这里有一些伪代码可以帮助你：

```
// Recursive function that inserts a value into a BST
function insert(node, value):

    //Handles the case where you have no nodes in the tree, so root is null
    if node is null:
        node = new Node(value)

    // If the value is lesser than the current node's value, we need to insert it
    // somewhere in the right subtree
    else if value < node.value:
        if node.right is null:
           // This node doesn't have a right child, so let's insert the new node here
           node.right = new Node(value)
        else:
           // This node has a right child, so let's go further into this subtree to
           // find the right place to insert the new node
           insert(node.right, value)

    // If the value is greater than the current node's value, we need to insert it
    // somewhere in the left subtree
    else if value > node.value:
        if node.left is null:
           // This node doesn't have a left child, so let's insert the new node here
           node.left = new Node(value)
        else:
           // This node has a left child, so let's go further into this subtree to 
           // find the right place to insert the new node
           insert(node.left, value)
    else:
        // A node with this value already exists so let's print out an erro
        error("Node with that value already exists")

end function 
```*

# javascript - 检测显卡性能 - JS

> ID：15391009
> 
> 赞同：36
> 
> 时间：2013-03-13T16:28:21.340
> 
> 标签：javascript, jquery

这是一个远景 - 无论如何可以通过 JS 插件来检测较差的和强大的显卡性能？

我们为客户建立了一个视差站点，它在性能较低的机器上卡顿 - 我们可以调整性能以使其更好地全面工作 - 但这当然会降低使用高性能机器的用户的体验。

我们也可以检测浏览器版本——但相同的浏览器可以在低性能和高性能机器上运行——所以对我们的情况没有帮助

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-22T20:20:35.997

requestAnimationFrame (rAF) 可以帮助解决这个问题。

您可以使用 rAF 计算帧速率。此处的详细信息：[使用 requestAnimationFrame 在 Canvas 中计算 FPS](https://stackoverflow.com/questions/8279729/calculate-fps-in-canvas-using-requestanimationframe)。简而言之，您计算出帧之间的时间差，然后除以 1（例如 1/.0159s ~= 62fps ）。

注意：使用您选择的任何方法，性能将任意决定。也许每秒超过 24 帧的任何东西都可以被认为是“高性能”。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-13T20:49:18.687

为什么不让用户决定呢？Youtube（和许多其他视频共享网站）实现了播放质量选择器，现在是一个齿轮图标，其中包含您可以选择的分辨率列表。会这样吗`HD`？`SD`或`Hi-Fi`| `Lo-Fi`选择器在您的应用程序上下文中工作（甚至有意义）？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T18:04:10.213

这就是“老派”加载屏幕派上用场的地方，您可以在前景（或隐藏）中渲染一些复杂的东西，不管它看起来奇怪还是古怪——当你加载资源时，你可以决定启用或禁用哪些效果。

基本上你会使用 jcage 为此提到的，测试帧率（即结合使用 a`setInterval`和计时器）。然而，这并不总是 100% 可靠，因为如果他们的机器在这种情况下决定进行三螺旋向后翻筋斗（或更可能的事情），你会得到一个狡猾的读数。根据所涉及的动画，可以实时升级和降级效果 - 但这总是更难以编码，加上您自己对情况的分析有时会导致性能下降。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:34:59.077

Firefox 有一个内置的不支持的显卡列表：[https](https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers) ://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers相关[帮助文章](https://support.mozilla.org/en-US/kb/upgrade-graphics-drivers-use-hardware-acceleration?redirectlocale=en-US&redirectslug=how-do-i-upgrade-my-graphics-drivers)。

但是您只能在访问 WebGL 功能时间接测试它们......

[当出现问题时，http: //get.webgl.org/troubleshooting/](http://get.webgl.org/troubleshooting/)会引导您找到相应的浏览器提供商。检查 JS 代码时，您会看到它们通过

```
if (window.WebGLRenderingContext) {
    alert('Your browser does not support WebGL');
} 
```

如果您有最新的图形卡。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T17:52:31.247

您可能会考虑检查浏览器是否支持[window.requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)，这表明您正在运行较新的浏览器。或者考虑检查[jQuery.fx.interval](http://api.jquery.com/jQuery.fx.interval/)。

然后，您可以实现一个自定义函数来衡量可用的处理能力。您可以尝试使用自定义缓动函数，然后可以通过[.slideDown()](http://api.jquery.com/slideDown/)之类的函数运行该函数，以了解可用的计算能力。

有关如何检查 javascript 性能的更多想法，请参阅另一个问题的[答案。](https://stackoverflow.com/a/2550811/731479)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T05:31:24.060

*如果*浏览器是超现代的并且支持 requestAnimationFrame，您可以实时计算动画帧速率，并为较慢的机器放弃您的动画设置。那是 IE 10、Firefox 4、Chrome 10 和 Safari 6。

您实际上将创建一个在 requestAnimationFrame() 回调上运行的“tick”函数，并跟踪每个滴答之间经过的毫秒数。在记录了这么多滴答声后，您可以对其进行平均以确定您的整体帧速率。但这有两个警告：

1.  When the tab is in the background requestAnimationFrame callbacks will be suspended -- so a single, sudden delay between frames of several seconds to many minutes does not mean it's a slow animation. 和：

2.  简单地在每个动画帧上运行一个 JavaScript 仪表会导致整个动画变慢一点；没有办法在不对它产生负面影响的情况下测量类似的东西。记住，海森堡是个混蛋。

对于较旧的浏览器，我不知道有什么方法可以可靠地测量帧速率。您可能可以使用 setTimeout() 对其进行模拟，但它不会那么准确 - 并且可能对性能产生更大的负面影响。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-24T20:19:08.833

这可能是基于风险/收益的决策。我认为你必须在这里做出重要但艰难的决定。

1) 如果您决定拥有两个版本，您将不得不花一些时间：

*   找出快速、非侵入性的测试
*   花时间实施
*   将其投入生产

你很可能会以不正确的实现告终，例如我的电脑正在运行 70 个 chrome 标签、带有 1080p 动画的 VLC 和 IntellijIDEA

我的 MBP，2012 型号被检测为“慢”计算机的可能性很高，至少现在是这样。

误报真的很难弄清楚。

2）如果您选择一个版本，您将不得不在 HD 和 Lo-Fi 之间进行选择，正如@Patrick 所提到的，我认为这又是一个错误。

我建议你去谷歌分析，找出浏览器分布（是的，我知道它可能会误导，但任何其他测试也可以）并基于此（如果大多数用户是 Chrome + 现代 IE/FF选择高清版，但要花一些时间弄清楚优化策略。

总有一些事情可以做得更好更快。购买一台较旧的笔记本电脑，并进行优化，直到获得不错的 FPS 速率。就是这样，作为开发人员，你需要做出决定，这是你的职责。

3) 如果从浏览器发行版中您发现您绝对必须使用 Lo-Fi 版本，那么请尝试认为“降级”是否值得，并且只有在您不得已时才实施它。

# transactions - 交易属性类型支持 | 不支持

> ID：15391011
> 
> 赞同：4
> 
> 时间：2013-03-13T16:28:29.910
> 
> 标签：transactions, ejb

最近我偶然发现了将 NOT_SUPPORTED 声明为事务属性类型的代码。我开始想知道实际的语义/好处/含义是什么。

我找到了这篇文章，我在上面评论了我的想法，但我完全不确定我是否正确理解了所有内容。

[http://www.developerscrappad.com/709/java/java-ee/making-sense-of-ejb3-x-transaction-attributes-part-3-difference-between-supports-and-not_supported/](http://www.developerscrappad.com/709/java/java-ee/making-sense-of-ejb3-x-transaction-attributes-part-3-difference-between-supports-and-not_supported/)

我还发现这篇文章非常有趣，因为它表明主要区别之一是未提交数据的隔离。

[http://www.ibm.com/developerworks/java/library/j-ts2/index.html](http://www.ibm.com/developerworks/java/library/j-ts2/index.html)

我仍然不清楚的一点是暂停和恢复现有交易的成本（这隐含地发生在 NOT_SUPPORTED 中）。我想知道这些成本是否可以忽略或可能很大。任何人都可以对此有所了解吗？

# mysql - VBA 连接到 MySQL 数据库

> ID：15391014
> 
> 赞同：3
> 
> 时间：2013-03-13T16:28:35.513
> 
> 标签：mysql, vba, wamp

我暂时尝试将我的 Excel 电子表格连接到本地托管的 MySQL 数据库。我正在使用 WAMPSERVER。

这是我的 VBA 代码：

```
Dim oConn As ADODB.Connection
Private Sub ConnectDB()
    Set oConn = New ADODB.Connection
    oConn.Open "DRIVER={MySQL ODBC 5.1 Driver};" & _
        "SERVER=localhost;" & _
        "DATABASE=test;" & _
        "USER=root;" & _
        "PASSWORD=;" & _
        "Option=3"
End Sub 
```

我通过 phpMyadmin 创建了我的数据库“测试”...运行代码时出现错误。你有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:57:46.190

问题是由于定义了错误的引用。在 VBE 中，我必须点击 Tools>References 并检查“Microsoft ActiveX Data Objects 6.1 Library”，只有这个。

宏现在在 Windows 7 上的 WAMP（默认参数 Username = root 和 Pwd = ""）下正确运行，代码如下：

```
Dim oConn As ADODB.Connection
Private Sub ConnectDB()
    Set oConn = New ADODB.Connection
    oConn.Open "DRIVER={MySQL ODBC 3.51 Driver};" & _
        "SERVER=localhost;" & _
        "DATABASE=excel;" & _
        "USER=root;" & _
        "PASSWORD=;" & _
        "Option=3"
End Sub 
```

# sql - 如果 Foo.Column1 = x 和 Bar.Columns1 = y 的值加入 2 个表

> ID：15391015
> 
> 赞同：0
> 
> 时间：2013-03-13T16:28:35.660
> 
> 标签：sql, select, join

如何对永远不会具有相等值的列进行连接？

有没有办法让我在 [Foo.Column1 = x,y, or z] AND [Bar.Column1 = Q] 上加入 2 个表

我想要来自 2 个不具有相等值的表的查询中的数据，但我知道如果第一个表中的值是它实际上等于的 3 个不同值中的任何一个。

那么我可以加入 2 个表，如果 Foo.Column1 包含一个指定的值并且 Bar.Column1 包含一个单独的特殊值，然后告诉语句要链接 2 行 =？

两个表中没有相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:33:17.710

定义两个表中的值之间的映射关系，如下所示：

```
select *
from Foo
join ( 
  select * from ( values 
    ('A', 'Z'),
    ('B', 'Z'),
    ('C', 'Z'),
  ) MapTable(FooColumn,BarColumn)
) MapTable on MapTable.FooColumn = Foo.Column1
join Bar on Bar.Column1 = MapTable.BarColumn 
```

如果 MapTable 中的行数很小且是静态的，您甚至可以通过使 MapTable 成为子查询来对它们进行硬编码。

# html - HTML - 可以修复表格宽度吗？

> ID：15391020
> 
> 赞同：1
> 
> 时间：2013-03-13T16:28:48.943
> 
> 标签：html, html-table, width

是否可以制作一个表格，让我们说 4 列，1 行，宽度为 100px，然后必须在下面的单元格中创建一个 200px 的单元格，而无需创建新表格？

因为如果我这样做，那么当我在新单元格中设置 200px 的宽度时，另一个单元格也会改变宽度。我希望新单元格扩展以填充剩余的宽度。

这里举个例子..

```
<table border="1" width="100%">
<tr>
<td width="100px">1</td>
<td width="100px">2</td>
<td width="100px">3</td>
<td width="100px">4</td>
</tr>
<tr>
<td width="200px">5</td>
<td width="200px">6</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:30:43.057

# [JsFiddle 演示](http://jsfiddle.net/YehtH/)

您实际上需要使用`colspan`，因此您的代码将如下所示，这将完成您想要的工作

```
<table border="1" width="100%">
<tr>
<td width="100px">1</td>
<td width="100px">2</td>
<td width="100px">3</td>
<td width="100px">4</td>
</tr>
<tr>
<td  colspan="2">5</td>
<td colspan="2">6</td>
</tr>
</table> 
```

`<td colspan="number">`-number 指定单元格应跨越的列数。注意：colspan="0" 告诉浏览器将单元格跨越到列组（colgroup）的最后一列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:32:52.733

尝试从第二行删除单元格宽度，但为每个单元格添加一个附加属性，因此它看起来像：

```
<td colspan="2"></td>
<td colspan="2"></td> 
```

这应该使这两个单元格占 2 个单元格宽度，而无需重新定义它们的宽度。

[MDN TD - 属性 Colspan](https://developer.mozilla.org/en-US/docs/HTML/Element/td#attr-colspan)

# c# - 在 ASP.NET 中的 Gridview 上显示数据时出现问题

> ID：15391031
> 
> 赞同：0
> 
> 时间：2013-03-13T16:29:11.913
> 
> 标签：c#, asp.net, data-binding, gridview, datatable

我在 ASP.NET 上的 gridview 上显示数据时遇到问题。

这是我的网格视图

```
<asp:GridView ID="grvConsumptions" runat="server" AllowSorting="true" 
    AllowPaging="true" AutoGenerateColumns="false" RowStyle-CssClass="txtB" 
    DataKeyNames="idConsumption" PageSize="30" Width="100%" CssClass="borders"
    HeaderStyle-CssClass="subT" AlternatingRowStyle-CssClass="txtA" 
    onpageindexchanging="grvConsumptions_PageIndexChanging" 
    onsorting="grvConsumptions_Sorting">
    <PagerStyle HorizontalAlign="Right" CssClass="subT" />

    <EmptyDataTemplate>
        <asp:Literal runat="server" ID="ltNoInformationFound">
            No Data Found
        </asp:Literal>
    </EmptyDataTemplate>

    <Columns>
        <asp:BoundField HeaderText="ID" ReadOnly="true" DataField="idConsumption" SortExpression="idConsumption" HtmlEncode="False" />
        <asp:BoundField HeaderText="No. Venta" ReadOnly="true" DataField="stationSaleNumber" SortExpression="stationSaleNumber" HtmlEncode="False" />

        <asp:TemplateField HeaderText="Trans">
            <ItemStyle HorizontalAlign="Center">
            </ItemStyle>

            <ItemTemplate>
                <asp:Image ID="imgPayment" runat="server" ImageUrl="images/icons/aro.gif">
                </asp:Image>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:BoundField HeaderText="Tarjeta" ReadOnly="true" DataField="cardCode" SortExpression="cardCode" HtmlEncode="False" />
        <asp:BoundField HeaderText="Fecha" ReadOnly="true" DataField="dateCreated" SortExpression="dateCreated" HtmlEncode="False" />
        <asp:BoundField HeaderText="Litros" ReadOnly="true" DataField="quantity" SortExpression="quantity" DataFormatString="{0:0.000}" HtmlEncode="False" />
        <asp:BoundField HeaderText="Descripción" ReadOnly="true" ItemStyle-Width="5%" DataField="description" SortExpression="description" />
        <asp:BoundField HeaderText="Precio Unitario" ReadOnly="true" DataField="price" SortExpression="price" HtmlEncode="False"/>
        <asp:BoundField HeaderText="Importe" ReadOnly="true" DataField="total" SortExpression="total" HtmlEncode="False"/>
        <asp:BoundField HeaderText="Kms" ReadOnly="true" DataField="mileage" SortExpression="mileage" HtmlEncode="False"/>
    </Columns>

    <HeaderStyle HorizontalAlign="Left" />
    <PagerStyle HorizontalAlign="Center" VerticalAlign="Middle" />
    <RowStyle HorizontalAlign="Center" VerticalAlign="Middle" />
    <EditRowStyle CssClass="txtB" />
    <EmptyDataRowStyle HorizontalAlign="Center" CssClass="tboxCombo" ForeColor="DarkGoldenrod" BorderWidth="0px" />
    <RowStyle CssClass="txtB" />
    <HeaderStyle CssClass="subT" />
    <AlternatingRowStyle CssClass="txtA" />
</asp:GridView> 
```

这是我使用的一种简单方法。

```
DataTable dtConsumptions = GetData();
grvConsumptions.DataSource = dtConsumptions;
grvConsumptions.DataBind(); 
```

据我所知，我找不到调试方法并找出为什么在 gridview 上没有显示数据（它总是显示标签 No Data Found）。

我已经仔细检查了 DataTable 确实有数据，并且 gridview 请求的所有列都存在于数据表的列中。

如何解决此问题或找到为什么不显示数据的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:47:07.120

您可以使用`RowDataBound event`代码 c# 在服务器端使用和绑定您的数据；

循环你的行和调试。

链接：http : [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:17:04.463

等等，我想通了（虽然我还需要一点研究）摆脱了更新面板，它起作用了，重新加载了gridview

# wordpress - 在wordpress中，如何显示上一个和下一个类别名称？

> ID：15391032
> 
> 赞同：0
> 
> 时间：2013-03-13T16:29:16.507
> 
> 标签：wordpress, categories

假设有第 1 类、第 2 类、第 3 类……等等。我在类别 2 的帖子页面上。我想在内容区域显示上一个和下一个类别名称，即“类别 1”和“类别 3”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:55:28.017

能够想办法。

```
<?php
            $categories = get_the_category();
            $separator = ' ';
            $output = '';
            if($categories){
                foreach($categories as $category) {
                    $prev_step .= '<a href="'.get_category_link( $category->term_id-1 ).'" title="' . esc_attr( sprintf( __( "View all posts in %s" ), $category->name ) ) . '" class="previous-step">'.get_cat_name( $category->term_id-1 ).'</a>'.$separator;
                    $next_step .= '<a href="'.get_category_link( $category->term_id+1 ).'" title="' . esc_attr( sprintf( __( "View all posts in %s" ), $category->name ) ) . '" class="next-step">'.get_cat_name( $category->term_id+1 ).'</a>'.$separator;
                }
            }
            ?>
        <?php echo trim($prev_step, $separator);?>
        <?php echo trim($next_step, $separator);?> 
```

# sql-server-2008r2-express - 从 SQL Server 2008 R2 Management Studio 中删除插件

> ID：15391045
> 
> 赞同：0
> 
> 时间：2013-03-13T16:29:41.393
> 
> 标签：sql-server-2008r2-express

最近我在我的 SQL Server 2008 R2 Management Studio 中安装了一个插件（全文管理器）。但它与此版本不兼容。这是我收到的信息

![在此处输入图像描述](../Images/55168a630baf73d33a9bbeca4ccb9d94.png)

单击“是”按钮后它不会删除。当我打开 SSMS 2008 R2 时，它总是显示此消息。

到目前为止，我在 SSMS 2008 R2 中找不到任何插件管理器。有任何选项可以删除它。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:32:31.037

通常，这些加载项会在`Control Panel > Programs and Features`（或者，取决于您的操作系统的旧版本）中安装一个组件`Control Panel > Add or Remove Programs`。我非常有信心您会在此处找到该加载项，您可以在其中执行正确的卸载。

# google-chrome - Google 日历未正确显示同事日历事件

> ID：15391057
> 
> 赞同：0
> 
> 时间：2013-03-13T16:30:30.410
> 
> 标签：google-chrome, events, time, google-calendar-api

我有一位同事突然发现她的 Google 日历出现问题。似乎这将她的时间段推高了一个，但她的时区是正确的，而且我们在萨斯喀彻温省，我们不改变我们的时钟！

例如：她本应在中午举行的会议出现在上午 11 点的时段。

这是最近的发现。有没有可能她做了什么，一切都变了？这也不仅仅是一天，而是她所有的事件。如果这有帮助的话，她已经将它与她的黑莓同步了。

欢迎任何想法，提示等！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:44:31.207

我怀疑与黑莓的同步可能是罪魁祸首。例如，如果它是与 BB 设备创建/同步的，则它可能在日历事件上放置了不正确的时区。

一种检查方法是转到 Google 日历并查看为活动设置的时区（应该是 GMT - 6 Regina）。

# javascript - 沿着它所面对的方向向前移动一个精灵

> ID：15391060
> 
> 赞同：0
> 
> 时间：2013-03-13T16:30:34.160
> 
> 标签：javascript, html, math

我试图让敌舰不断向玩家移动。给定玩家 X 和 Y 坐标，以及船 X 和 Y 坐标，我目前正在这样做以使船向玩家移动：

```
Enemy.prototype.update = function(playerX, playerY) {
    // Rotate the enemy to face the player
    this.rotation = Math.atan2(this.y - playerY, this.x - playerX) - 2.35;

    // Move in the direction we're facing
    this.x += Math.sin(this.rotation) * this.speed;
    this.y -= Math.cos(this.rotation) * this.speed;
} 
```

这很有效，但是敌人似乎在玩家周围盘旋，直到最终与他们发生碰撞。我只想让敌人不断向玩家直线移动。

我怎样才能做到这一点？

# c# - xml读取节点和子节点

> ID：15391062
> 
> 赞同：0
> 
> 时间：2013-03-13T16:30:38.377
> 
> 标签：c#, xml, nodes

我有这个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Dictionary>
<Object name="Ship">
    <Struct_Name>tb_Ship</Struct_Name>
        <Owner> ..... </Owner>
           <Parameters>
        <Parameter>
        <Eng_Name>.....</Eng_Name>
        <Discr>.....</Discr>
        <Type>.....</Type>
        </Parameter>

        <Parameter>
        <Eng_Name>......</Eng_Name>
        <Discr>.........</Discr>
        <Type>.................</Type>
        </Parameter>
</Object>

        <Object name="Car">
        <Struct_Name>tb_Car</Struct_Name>
        <Owner> ..... </Owner>
           <Parameters>
        <Parameter>
        <Eng_Name>.....</Eng_Name>
        <Discr>.....</Discr>
        <Type>.....</Type>
        </Parameter>

        <Parameter>
        <Eng_Name>......</Eng_Name>
        <Discr>.........</Discr>
        <Type>.................</Type>
        </Parameter>
   </Object>
</Dictionary> 
```

我尝试像这样阅读这个xml：

```
foreach(var Object in Objects)
print the whole elements values
   foreach(var Parameter in Parameters Of Current Object)
      print the whole elements of current parameter 
```

我尝试使用 2 foreach 并且它不工作总是得到异常对象未设置为类似这样的对象实例。有没有办法像我想要的那样读取这个 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:40:45.927

你可以使用[xpath](http://www.w3schools.com/xpath/default.asp)来获取你想要的，例如你想要获取所有参数：

```
XmlDocument doc = new XmlDocument();
doc.Load("file.xml");
XmlNodeList parameters = doc.SelectNodes("Dictionary/Object/Parameters/Parameter"); 
// or doc.SelectNodes("//Parameter"); 
foreach(XmlNode parameter in parameters)
{
    // print the whole element
} 
```

希望它会有所帮助。
顺便说一句，在你的 xml 中，“参数”标签没有关闭。

# android - 如何在我的 Android 程序的 SQLite Manager 应用程序中使用我创建的 SQLite DB

> ID：15391066
> 
> 赞同：0
> 
> 时间：2013-03-13T16:30:46.740
> 
> 标签：android, sqlite, navicat, sql-manager

当我在我的 Android 应用程序中处理许多表时，我决定在 SQLite 管理器（例如 firefox 插件或用于 sqlite 的 navicat）中创建数据库（DB）。我完成了它们的创建并导出了 .sql 文件！但我不知道如何使用这个文件！当然，我发现一些关于此的帖子将 DB（在有根电话上）放入 ...data/data/{your package name}/ ..etc 但我不明白这一步之后该怎么做！（我只知道将 db 引入 android 应用程序的代码！！）

*   谁能一步一步告诉我如何在我的应用程序中使用我创建的数据库和这些方法？ -

*   这是使用这些 SQLite 管理器的好方法，还是尽管用代码在 android 中创建多表很复杂，但你更喜欢它？？？

*   sqlite 2和3之间的主要区别是什么？它们是由不同的 Android 版本支持还是仅针对 Sqlite 的更新？

编辑：将 dB 复制到 assest 文件夹并使用代码进行复制后：

```
03-16 11:32:20.370: I/SqliteDatabaseCpp(3999): sqlite 返回：错误代码 = 14，msg = 无法在 [8609a15dfa] 的第 27712 行打开文件，db=/data/data/com.androidhive.xmlparsing/数据库/surveydb.sqlite
03-16 11:32:20.370: I/SqliteDatabaseCpp(3999): sqlite 返回: 错误代码 = 14, msg = os_unix.c: open() at line 27712 - "" errno=2 path=/data/data/com .androidhive.xmlparsing/databases/surveydb.sqlite，db=/data/data/com.androidhive.xmlparsing/databases/surveydb.sqlite
03-16 11:32:20.370: E/SqliteDatabaseCpp(3999): sqlite3_open_v2("/data/data/com.androidhive.xmlparsing/databases/surveydb.sqlite", &handle, 1, NULL) 失败
03-16 11:32:20.380: E/SQLiteDatabase(3999): 无法打开数据库。关闭它。
03-16 11:32:20.380: E/SQLiteDatabase(3999): android.database.sqlite.SQLiteCantOpenDatabaseException: 无法打开数据库文件
03-16 11:32:20.380：E/SQLiteDatabase（3999）：在 android.database.sqlite.SQLiteDatabase.dbopen（本机方法）
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:932)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 database.AssetDatabaseHelper.checkExist(AssetDatabaseHelper.java:55)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 database.AssetDatabaseHelper.importIfNotExist(AssetDatabaseHelper.java:81)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 com.androidhive.xmlparsing.AndroidXMLParsingActivity.onCreate(AndroidXMLParsingActivity.java:78)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.ActivityThread.access$500(ActivityThread.java:122)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.os.Handler.dispatchMessage(Handler.java:99)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.os.Looper.loop(Looper.java:132)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 android.app.ActivityThread.main(ActivityThread.java:4126)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 java.lang.reflect.Method.invokeNative(Native Method)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 java.lang.reflect.Method.invoke(Method.java:491)
03-16 11:32:20.380: E/SQLiteDatabase(3999): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
03-16 11:32:20.380: E/SQLiteDatabase(3999): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
03-16 11:32:20.380: E/SQLiteDatabase(3999): at dalvik.system.NativeStart.main(Native Method)
03-16 11:32:20.380: W/System.err(3999): android.database.sqlite.SQLiteCantOpenDatabaseException: 无法打开数据库文件
03-16 11:32:20.380：W/System.err（3999）：在 android.database.sqlite.SQLiteDatabase.dbopen（本机方法）
03-16 11:32:20.380: W/System.err(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
03-16 11:32:20.380: W/System.err(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
03-16 11:32:20.380: W/System.err(3999): 在 android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:932)
03-16 11:32:20.380: W/System.err(3999): 在 database.AssetDatabaseHelper.checkExist(AssetDatabaseHelper.java:55)
03-16 11:32:20.380: W/System.err(3999): 在 database.AssetDatabaseHelper.importIfNotExist(AssetDatabaseHelper.java:81)
03-16 11:32:20.380: W/System.err(3999): 在 com.androidhive.xmlparsing.AndroidXMLParsingActivity.onCreate(AndroidXMLParsingActivity.java:78)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1782)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.ActivityThread.access$500(ActivityThread.java:122)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
03-16 11:32:20.380: W/System.err(3999): 在 android.os.Handler.dispatchMessage(Handler.java:99)
03-16 11:32:20.380: W/System.err(3999): 在 android.os.Looper.loop(Looper.java:132)
03-16 11:32:20.380: W/System.err(3999): 在 android.app.ActivityThread.main(ActivityThread.java:4126)
03-16 11:32:20.380: W/System.err(3999): 在 java.lang.reflect.Method.invokeNative(Native Method)
03-16 11:32:20.380: W/System.err(3999): 在 java.lang.reflect.Method.invoke(Method.java:491)
03-16 11:32:20.380: W/System.err(3999): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
03-16 11:32:20.380: W/System.err(3999): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
03-16 11:32:20.380: W/System.err(3999): 在 dalvik.system.NativeStart.main(Native Method)

```

我使用了这段代码：

```
public class AssetDatabaseHelper extends SQLiteOpenHelper{

 private String dbName;
    private String db_path;
    private Context context;

    /**
     * A helpe r class to import db files.
     * 
     * @param context
     *  base/app context
     * @param dbName
     *            The name of the db in asset folder .
     */
    public AssetDatabaseHelper(Context context, String dbName) {
        super(context, dbName, null, 1);
        this.dbName = dbName;
        this.context = context;
        db_path = "/data/data/" + context.getPackageName() + "/databases/";
    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    public boolean checkExist() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = db_path + dbName;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            e.printStackTrace();

        } catch (Exception ep) {
            ep.printStackTrace();
        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void importIfNotExist() throws IOException {

        boolean dbExist = checkExist();

        if (dbExist) {
            // do nothing - database already exist
        } else {
            this.getReadableDatabase();

            try {

                copyDatabase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }
    /**
     * Creates copies the database from asset to the new database location.
     * */
    private void copyDatabase() throws IOException {
        InputStream is = context.getAssets().open(dbName);

        OutputStream os = new FileOutputStream(db_path + dbName);

        byte[] buffer = new byte[4096];
        int length;
        while ((length = is.read(buffer)) > 0) {
            os.write(buffer, 0, length);
        }
        os.flush();
        os.close();
        is.close();
        this.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

} 
```

更新 2：数据库脚本：

```
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "**" TEXT, "****" INTEGER);
CREATE TABLE "***" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "***" INTEGER UNIQUE , "***" TEXT);
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "***" INTEGER UNIQUE , "**" INTEGER, "**" INTEGER, "**" TEXT, "impGender" TEXT, "* *" TEXT, "***" INTEGER, "***" DATETIME DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "**" TEXT);
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "***" INTEGER UNIQUE , "***" TEXT, "srQType" INTEGER, "***" INTEGER, "**" BOOL, "**" FLOAT, "**" FLOAT, "**" INTEGER, "**" UNIQUE );
CREATE TABLE "*" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "**" INTEGER NOT NULL UNIQUE , "***" INTEGER, "**" INTEGER, "**" INTEGER, "**" INTEGER, “**”文本，“**”文本）；
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY, "***" TEXT);
CREATE TABLE "**" ("_id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL , "**" TEXT, "srDesc" TEXT, "***" INTEGER, "**" DATETIME, "**" DATETIME, "** **" 整数, "srCode" 整数);
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US');

```

最后：

```
new AssetDatabaseHelper(this , "surveydb.sqlite").importIfNotExist(); 
```

问题是什么？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:51:49.273

*   Android 支持 Sqlite 3。
*   您不需要有根电话即可使用导入的数据库

使用导入数据库的步骤：

1.  将您的数据库转储到 /assets 文件夹中。
2.  在此处添加来自[git hub的代码](https://github.com/wtsang02/DbAssetHelper)
3.  通过执行以下代码导入您的数据库。

    ```
     AssetDatabaseHelper dbHelper = new AssetDatabaseHelper(
            getBaseContext(), YOUR_DATABASE_NAME);
    try {
        dbHelper.importIfNotExist();
    } catch (IOException e) {
        e.printStackTrace();
    } 
    ```

# c# - 为双精度数组赋值

> ID：15391067
> 
> 赞同：0
> 
> 时间：2013-03-13T16:30:52.700
> 
> 标签：c#, asp.net

我无法将动态值分配给双精度数组。如果我保持静态，我就能做到。帮帮我。

我已将数组定义为 double，其大小可以是动态的。然后我计算了一些值并想将该值分配给这个双数组。
我做了..

```
double[] entropy_db_col; 
```

但我收到一个错误。数组超出索引。
如果我计算， `(double)entropy_db - (double)a`我得到一个静态值。即使我这样做`entropy_db_col[0] = (double)entropy_db - (double)a;`了，我也会收到错误吗？我应该怎么办 ？

然后我想从这个数组中找到最大值？这段代码对吗？

```
 largest = Convert.ToInt32(entropy_db_col[0].ToString()); 
```

请帮帮我。
那会很好。

我解决了这个问题，但现在我遇到的问题是：

我得到 entropy_db_col[0] 值，然后..当我迭代并得到 entropy_db_col[1] 值时，entropy_db_col[0] 的值变为 0。同样，当我得到 entropy_db_col[2] 时，entropy_db_col[1] 和 entropy_db_col 的值[0] 变为 0..我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:34:28.753

使用 data.count 创建内存

在使用之前

```
entropy_db_col=new double[data.count] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:10:23.803

### 动态数组

A`double[]`与其说是一个动态数组，不如说是一个未定义大小的数组。它必须首先定义一个具体的大小，例如`new double[data.Count]`在它可以使用之前，但这会导致它的大小是固定的。

如果您想要一个可以随时更改大小的数组，请使用`List<double>`命名`System.Collections.Generic`空间中的 a 。

```
using System.Collections.Generic;

...

List<double> entropy_db_col = new List<double>();

for (int i = 0; i < data.Count; i++)
{
    \\some calculation
    entropy_db_col.Add((double)entropy_db - (double)a);
} 
```

### 最大值

要在 .Net 3.5 或更高版本中查找最大值，您可以使用：

```
using System.Linq;

...

double largest = entropy_db_col.Max(); 
```

或者，如果您使用的 .Net 版本早于 3.5，您可以使用：

```
double largest = entropy_db_col[0];
for (int j = 1; j < entropy_db_col.Length; j++)
{
    if (largest < entropy_db_col[j])
    {
        largest = entropy_db_col[j];
    }
} 
```

# web-services - 是否存在用于获取板球比赛统计数据的 API

> ID：15391071
> 
> 赞同：1
> 
> 时间：2013-03-13T16:30:59.363
> 
> 标签：web-services, api, web-applications, statistics

由于 espn cricinfo 是用世界各地的大量统计数据构建的，据我所知，它是获取统计数据以查询并根据统计数据提出解决方案的最佳来源。但是 espn 不提供获取数据集的 API。有没有其他方法可以获取一个国家等所需的比赛数据集[。http://developer.espn.com/](http://developer.espn.com/)遗憾的是没有板球 API 调用:(请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:50:37.317

我认为 ESPN 仍然没有为板球提供 api。运动员 API 尚不包含板球。无论如何，它显示为即将推出。

[运动员 API 支持页面](http://espn.huntandgather.com/devcenter/detail-athletes.html#using-the-api)

# javascript - JavaScript Raphael，通过不同的函数在矩形顶部添加文本

> ID：15391072
> 
> 赞同：3
> 
> 时间：2013-03-13T16:31:02.877
> 
> 标签：javascript, raphael

我想让函数 B 工作，而无需将指令代码设置为函数 A。在实用术语中，在矩形顶部显示文本。

在这个问题中，按钮 A 用于创建“纸”和一个矩形（使用 Raphael 库）。按钮 B 用于在矩形顶部添加文本。HTML 代码如下所示：

```
<button onClick="func.A()">Func A</button>
<button onClick="func.B()">Func B</button> 
```

JavaScript 代码如下所示：

```
var func = (function functie($) {
    return { 
        A: function() {
            // Creates canvas 320 × 200 at 10, 50
            var paper = Raphael(10, 50, 320, 200);
            // Creates rectangle
            var bg = paper.rect(0, 0, 320, 200);
            // Sets the fill attribute of the circle to red (#f00)
            bg.attr("fill", "#f00");
            // Sets the stroke attribute of the circle to white
            bg.attr("stroke", "#fff");
        },
        B: function() {
            var t = paper.text(40, 15, "");
            t.attr('text',"new text here");
            t.attr();
        };
 })(); 
```

问题是当函数 B 的指令代码（var t = paper.text(40, 15, ""); 等等）放在函数 B 中时，我尝试添加的文本不会被添加到矩形。

如果函数 B 的指令代码放在函数 A 中，那么它会起作用，但这不是我想要的。我想让功能 B 工作而无需将指令代码设置为功能 A。

我希望这个问题足够清楚，可以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:33:23.960

当您在函数 A 中声明“var paper”时，该变量是函数 A 的本地变量。如果要在函数调用之间共享状态信息，则必须将状态信息存储在对象的属性中，而不是本地变量中：

```
var func = (function functie($) {
return { 
    paper: null,
    A: function() {
        // Creates canvas 320 × 200 at 10, 50
        this.paper = Raphael(10, 50, 320, 200);
        // Creates rectangle
        var bg = paper.rect(0, 0, 320, 200);
        // Sets the fill attribute of the circle to red (#f00)
        bg.attr("fill", "#f00");
        // Sets the stroke attribute of the circle to white
        bg.attr("stroke", "#fff");
    },
    B: function() {
        var t = this.paper.text(40, 15, "");
        t.attr('text',"new text here");
        t.attr();
    };
})(); 
```

# url-rewriting - Nginx 传输守护进程 URL 重写

> ID：15391073
> 
> 赞同：0
> 
> 时间：2013-03-13T16:31:05.200
> 
> 标签：url-rewriting, nginx, transmission

我一直在解决这个配置，但无济于事。我想要实现的是将我的网址从[http://subdomain.domain.com:9091/transmission/web/](http://subdomain.domain.com:9091/transmission/web/)屏蔽到[http://subdomain.domain.com/tr/](http://subdomain.domain.com/tr/)

这就是我到目前为止所做的

nginx default.conf

```
location /tr/ {
proxy_read_timeout 300;
proxy_pass_header X-Forwarded-Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-Server $host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_pass http://localhost:9091/transmission/web/;
proxy_redirect off;
} 
```

传输网络界面确实出现了，但css、jss和img都是404。有什么解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T20:01:04.093

可能有点晚了……

```
upstream transmissionweb {
    server localhost:9091;
}

server {

    server_name     www.example.com;
    root            /var/www/www.example.com;

    access_log  /var/log/nginx/www.example.com.access.log;
    error_log   /var/log/nginx/www.example.com.error.log;

    location /transmission {
        proxy_pass          http://transmissionweb;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        proxy_redirect      off;
        proxy_buffering     off;
        proxy_set_header    Host            $host;
        proxy_set_header    X-Real-IP       $remote_addr;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:52:42.593

我使用以下配置代理传输。请注意“位置/torrent/” - 我将传输中的默认“rpc-url”设置从“/transmission/”更改为“/torrent/”。

这适用于 Ubuntu 12.04.2 LTS 下的 nginx/1.2.7 和传输 2.51。

```
upstream transmission {
    server 127.0.0.1:9091;
    keepalive 4;
}

server {
    listen 80;

    server_name localhost;

    location /torrent/ {
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_pass_header X-Transmission-Session-Id;

        location /torrent/rpc {
            proxy_pass http://transmission;
        }

        location /torrent/web/ {
            proxy_pass http://transmission;
        }

        location /torrent/upload {
            proxy_pass http://transmission;
        }

        location /torrent/web/style/ {
            alias /usr/share/transmission/web/style/;
        }

        location /torrent/web/javascript/ {
            alias /usr/share/transmission/web/javascript/;
        }

        location /torrent/web/images/ {
            alias /usr/share/transmission/web/images/;
        }
    }
} 
```

# java - 将嵌套的 xml 元素映射到单个 Java 对象

> ID：15391077
> 
> 赞同：3
> 
> 时间：2013-03-13T16:31:14.857
> 
> 标签：java, xml, jaxb, unmarshalling

我将如何映射这个

```
 <urn:envelope xmlns:urn="urn:com.twinstrata.webservice:2.1">
<urn:encoded>
    <urn:response>
        <urn:license>
            <urn:licenseTag>WHATEVER934</urn:licenseTag>
            <urn:accountNumber>2016763117</urn:accountNumber>
            <urn:licenseType>TRIAL</urn:licenseType>
            <urn:licenseClass>Credentialed</urn:licenseClass>
            <urn:volumeAllowed>Unlimited</urn:volumeAllowed>
            <urn:volumeProvisioned>0</urn:volumeProvisioned>
            <urn:snapshotLimit>Unlimited</urn:snapshotLimit>
            <urn:snapshotLimitPerVolume>10</urn:snapshotLimitPerVolume>
            <urn:status>Active</urn:status>
            <urn:usedSpace>0</urn:usedSpace>
            <urn:expirtationDate>2013-03-27 14:48:47.0</urn:expirtationDate>
            <urn:storageLimit>Unlimited</urn:storageLimit>
        </urn:license>
    </urn:response>
</urn:encoded>
<urn:signature>Hl8rk2aTEsOkkq5e383LH0BqdFfmVcKIg9FuFEnnrlFk9fwYVEQwkrm/7MPM2Zmli2Um00L2Ab25tZg2w8pEzXyDsd+vwCAH0ypQwhIVPayDjgYKlYXbnkqG5S+7qiVbqD2qZDektuPoEWvaSdxO3ZgUibT+nnrO0kl6E7i4lB0=
</urn:signature> 
```

对此

```
 package com.folio3.bean;

    import javax.xml.bind.annotation.XmlElement;
    import javax.xml.bind.annotation.XmlRootElement;

    @XmlRootElement(name = "envelope" , namespace = "urn:com.twinstrata.webservice:2.1")
    public class ResponseXML {

        private String userName;
        private String license;
        private String signature;
        private String licenseTag;
        private String accountNumber;
        private String licenseType;
        private String licenseClass;
        private String volumeAllowed;
        private String volumeProvisioned;
        private String publicKey;

        @XmlElement(name = "userName" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getUserName() {
            return userName;
        }
        public void setUserName(String userName) {
            this.userName = userName;
        }

        @XmlElement(name = "license" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getLicense() {
            return license;
        }
        public void setLicense(String license) {
            this.license = license;
        }

        @XmlElement(name = "signature" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getSignature() {
            return signature;
        }
        public void setSignature(String signature) {
            this.signature = signature;
        }

        @XmlElement(name = "licenseTag" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getLicenseTag() {
            return licenseTag;
        }
        public void setLicenseTag(String licenseTag) {
            this.licenseTag = licenseTag;
        }

        @XmlElement(name = "accountNumber" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getAccountNumber() {
            return accountNumber;
        }
        public void setAccountNumber(String accountNumber) {
            this.accountNumber = accountNumber;
        }

        @XmlElement(name = "licenseType" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getLicenseType() {
            return licenseType;
        }
        public void setLicenseType(String licenseType) {
            this.licenseType = licenseType;
        }

        @XmlElement(name = "licenseClass" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getLicenseClass() {
            return licenseClass;
        }
        public void setLicenseClass(String licenseClass) {
            this.licenseClass = licenseClass;
        }

        @XmlElement(name = "volumeAllowed" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getVolumeAllowed() {
            return volumeAllowed;
        }
        public void setVolumeAllowed(String volumeAllowed) {
            this.volumeAllowed = volumeAllowed;
        }

        @XmlElement(name = "volumeProvisioned" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getVolumeProvisioned() {
            return volumeProvisioned;
        }
        public void setVolumeProvisioned(String volumeProvisioned) {
            this.volumeProvisioned = volumeProvisioned;
        }

        @XmlElement(name = "publicKey" , namespace = "urn:com.twinstrata.webservice:2.1")
        public String getPublicKey() {
            return publicKey;
        }
        public void setPublicKey(String publicKey) {
            this.publicKey = publicKey;
        }

        @Override
        public String toString() {
            StringBuilder builder = new StringBuilder();
            builder.append("ResponseXML [userName=");
            builder.append(userName);
            builder.append(", license=");
            builder.append(license);
            builder.append(", signature=");
            builder.append(signature);
            builder.append(", licenseTag=");
            builder.append(licenseTag);
            builder.append(", accountNumber=");
            builder.append(accountNumber);
            builder.append(", licenseType=");
            builder.append(licenseType);
            builder.append(", licenseClass=");
            builder.append(licenseClass);
            builder.append(", volumeAllowed=");
            builder.append(volumeAllowed);
            builder.append(", volumeProvisioned=");
            builder.append(volumeProvisioned);
            builder.append(", publicKey=");
            builder.append(publicKey);
            builder.append("]");
            return builder.toString();
        }
    } 
```

目前，它只映射 XML 的一个属性，即“签名”。为了简单起见，我不想创建其他类并将对象嵌套在其中。我只想解析单个 Java 类中的嵌套 xml 标签。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:04:10.050

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**响应XML**

您可以使用 MOXy 的`@XmlPath`扩展来映射您的用例（请参阅： [http](http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html) ://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html ）。下面是您的用例的部分映射。

```
package forum15391077;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name = "envelope")
@XmlType(propOrder={"licenseTag", "accountNumber", "licenseType", "licenseClass", "volumeAllowed", "volumeProvisioned", "signature", "license", "publicKey", "userName"})
@XmlAccessorType(XmlAccessType.FIELD)
public class ResponseXML {

    private String userName;
    private String license;
    private String signature;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:licenseTag/text()")
    private String licenseTag;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:accountNumber/text()")
    private String accountNumber;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:licenseType/text()")
    private String licenseType;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:licenseClass/text()")
    private String licenseClass;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:volumeAllowed/text()")
    private String volumeAllowed;

    @XmlPath("urn:encoded/urn:response/urn:license/urn:volumeProvisioned/text()")
    private String volumeProvisioned;

    private String publicKey;

} 
```

**包信息**

我们将使用包级`@XmlSchema`注解来指定命名空间限定（参见： [http](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html) ://blog.bdoughan.com/2010/08/jaxb-namespaces.html ）。我们还将使用它来定义我们在注释`urn`中利用的前缀。`@XmlPath`

```
@XmlSchema(
    namespace="urn:com.twinstrata.webservice:2.1",
    elementFormDefault=XmlNsForm.QUALIFIED,
    xmlns={
        @XmlNs(namespaceURI = "urn:com.twinstrata.webservice:2.1", prefix = "urn")
    }
)
package forum15391077;

import javax.xml.bind.annotation.*; 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

由于 MOXy 是标准 JAXB 实现，因此使用标准 JAXB 运行时 API。

```
package forum15391077;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(ResponseXML.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15391077/input.xml");
        ResponseXML response = (ResponseXML) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(response, System.out);
    }

} 
```

**输入.xml/输出**

下面是一个基于我映射的用例部分的示例 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<urn:envelope xmlns:urn="urn:com.twinstrata.webservice:2.1">
   <urn:encoded>
      <urn:response>
         <urn:license>
            <urn:licenseTag>WHATEVER934</urn:licenseTag>
            <urn:accountNumber>2016763117</urn:accountNumber>
            <urn:licenseType>TRIAL</urn:licenseType>
            <urn:licenseClass>Credentialed</urn:licenseClass>
            <urn:volumeAllowed>Unlimited</urn:volumeAllowed>
            <urn:volumeProvisioned>0</urn:volumeProvisioned>
         </urn:license>
      </urn:response>
   </urn:encoded>
   <urn:signature>Hl8rk2aTEsOkkq5e383LH0BqdFfmVcKIg9FuFEnnrlFk9fwYVEQwkrm/7MPM2Zmli2Um00L2Ab25tZg2w8pEzXyDsd+vwCAH0ypQwhIVPayDjgYKlYXbnkqG5S+7qiVbqD2qZDektuPoEWvaSdxO3ZgUibT+nnrO0kl6E7i4lB0=
    </urn:signature>
</urn:envelope> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-16T05:44:47.647

我通过创建嵌套类和使用正确的 JAXB 注释使其工作。

# java - 带字符串的猪代数

> ID：15391084
> 
> 赞同：0
> 
> 时间：2013-03-13T16:31:41.610
> 
> 标签：java, user-defined-functions, apache-pig, bag

我需要编写一个接口，将包中的单个项目折叠成一个字符串。示例：{(a),(b)} 转换为 ab。

首先，可以使用代数接口返回字符串还是仅限于整数（Long）。

其次，是否有一个地方可以让我访问一些使用代数的示例（除了我随处可见的 COUNT 示例）。

只要回答是否可以使用代数来处理字符串，并让我知道是否有一个好地方可以让我看到一些现有的 UDF 代码（不是那些完全解决我的问题的代码）。

这些是我尝试过的事情：

1.  谷歌搜索*任何*适用于包的 UDF 代码。除了随处发布的 COUNT 示例之外，没有得到任何东西
2.  在 Pig 中尝试不同的选项。显然你不能取消引用一个包里的个别物品，这很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:07:18.283

最后这是我想出来的：

1.  如果您的问题可以通过 JOIN 像 GROUP 一样有效地解决，那么您应该这样做。GROUP 制造的袋子更难处理。

2.  您没有义务使用 ALGEBRAIC 来处理行李。相反，您可以只编写一个 EVAL UDF。但是，如果您的包尺寸很大，它会慢得多。

# ios - 当使用不同的视图控制器（纵向和横向）来处理方向变化时，segue 是最合适的处理方式吗？

> ID：15391088
> 
> 赞同：2
> 
> 时间：2013-03-13T16:31:59.957
> 
> 标签：ios, segue, screen-orientation

我一直在研究设置单独的横向和纵向视图控制器以处理不断变化的方向的方法。下面发布的代码来自 Apple，说明了如何执行此操作。我注意到他们使用 performSegueWithIdentifier。使用 segue 似乎很奇怪。

为了在情节提要上创建一个转场，我假设我必须创建一个隐藏按钮并将连接从纵向拖到横向视图控制器。然后我可以将 segue 标识符设置为“DisplayAlternateView”。什么是默认的转场动画？还是默认关闭动画？

另外为什么这个代码在 awakeFromNib 方法中？不应该在 viewDidLoad 中吗？是否在 viewDidLoad 之前调用了 awakeFromNib？

此外，我假设我的故事板的每个场景都必须有不同的目标动作。如果我有纵向视图 A、B 和 C 以及相应的横向视图 A、B 和 C，我是否应该对 Apple 代码进行以下更改

在我看来：

```
 selector:@selector(orientationChangedA:) 
```

然后在我的 B

```
 selector:@selector(orientationChangedB:) 
```

然后在我的 C

```
 selector:@selector(orientationChangedC:) 
```

这样每个方法都可以执行它自己的 segue。

我觉得我可能在这里把事情复杂化了。是单独的 segues 导致我做额外的工作，还是这通常是如何处理方向切换到单独的视图控制器的？

这是来自 Apple 的代码，说明如何使用不同的视图控制器处理方向更改：

```
@implementation PortraitViewController

- (void)awakeFromNib

{

isShowingLandscapeView = NO;

[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

[[NSNotificationCenter defaultCenter] addObserver:self

                             selector:@selector(orientationChanged:)

                             name:UIDeviceOrientationDidChangeNotification

                             object:nil];

}

- (void)orientationChanged:(NSNotification *)notification

{

UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;

if (UIDeviceOrientationIsLandscape(deviceOrientation) &&

    !isShowingLandscapeView)

{

    [self performSegueWithIdentifier:@"DisplayAlternateView" sender:self];

    isShowingLandscapeView = YES;

}

else if (UIDeviceOrientationIsPortrait(deviceOrientation) &&

         isShowingLandscapeView)

{

    [self dismissViewControllerAnimated:YES completion:nil];

    isShowingLandscapeView = NO;

}

} 
```

# python - 如何使用 optparse 模块解析没有任何参数的选项

> ID：15391089
> 
> 赞同：11
> 
> 时间：2013-03-13T16:32:01.923
> 
> 标签：python

如何在不传递任何参数且不传递任何默认参数的情况下传递选项？

例如：

```
./log.py --ipv4 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T16:36:15.137

```
parser.add_option("--ipv4", action="store_true", dest="ipv4") 
```

请参阅[http://docs.python.org/2/library/optparse.html#handling-boolean-flag-options](http://docs.python.org/2/library/optparse.html#handling-boolean-flag-options)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T16:48:38.663

虽然 lajarre 的答案是正确的，但重要的是要注意 outparse 被认为已弃用。

我建议改用较新的[argparse 模块](http://docs.python.org/2.7/library/argparse.html)。

所以你的代码看起来像：

```
import argparse
parser = argparse.ArgumentParser(description='This is my description')
parser.add_argument('--ipv4', action='store_true', dest='ipv4') 
```

使用 -foo 或 --foo 标志使争论成为可选的。[有关可选参数的更多信息，请参阅此文档](http://docs.python.org/2.7/library/argparse.html#required)。

***编辑：***[这是add_argument 方法](http://docs.python.org/2.7/library/argparse.html#argparse.ArgumentParser.add_argument)的具体文档。

***编辑 2：***此外，如果您想接受 -foo 或 --foo 您可以这样做

```
parser.add_argument('-ipv4', '--ipv4', action='store_true', dest='ipv4') 
```

# redirect - Heroku：当我添加我的域时“当前正在被另一个应用程序使用”

> ID：15391091
> 
> 赞同：10
> 
> 时间：2013-03-13T16:32:05.900
> 
> 标签：redirect, heroku

我想将我的域“cultiva.bilsa.com”重定向到 Heroku 应用程序“cultiva.herokuapp.com”。出于某种原因，当我想添加此域时，Heroku 对我说“cultiva.bilsa.com 目前正在被另一个应用程序使用”。到目前为止，我从未被添加。我关注[这个](https://devcenter.heroku.com/articles/custom-domains)页面，我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-04T05:04:33.800

您可以使用以下 bash one liner 确定您在帐户中使用的所有域：

```
heroku apps > heroku_apps_list; for i in `cat heroku_apps_list`; do heroku domains --app $i ; done 
```

如果您在 Heroku 上有许多应用程序和许多不同的域，这将非常有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-22T18:14:16.087

就像 Eric 说的那样，该域名已经注册，并且从未发布过。您必须使用发布工具来发布您的域，然后将应用程序关联到您的域：

[https://tools.heroku.support/domain-release](https://tools.heroku.support/domain-release)

您需要能够通过添加 TXT 记录来验证您对该域的所有权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:22:30.490

该域已经合法地注册了 Heroku 应用程序。您可以通过调用来确定这一点`heroku domains`。

# php - 在 PHP 中隐藏表单

> ID：15391093
> 
> 赞同：0
> 
> 时间：2013-03-13T16:32:08.447
> 
> 标签：php, tabs, hide

我需要在这段代码中隐藏以下内容，而不是删除它的功能，而只是让它对客人不可见：

```
<style>.NoScript { display: none; }</style>
<noscript>
   <style>.NoScript { display: block; } .YesScript { display: none; }</style>
</noscript>
            <div class="P NoScript">
       <?php echo $Form->RadioList('Type', array('Question' => 'Ask a Question', 'Discussion' => 'Start a New Discussion')); ?>
    </div>
    <div class="YesScript">
       <div class="Tabs">
          <ul>
             <li class="<?php echo $Form->GetValue('Type') == 'Question' ? 'Active' : '' ?>"><a id="QnA_Question" class="QnAButton TabLink" rel="Question" href="#"><?php echo T('Ask a Question'); ?></a></li>
             <li class="<?php echo $Form->GetValue('Type') == 'Discussion' ? 'Active' : '' ?>"><a id="QnA_Discussion" class="QnAButton TabLink" rel="Discussion" href="#"><?php echo T('Start a New Discussion'); ?></a></li>
          </ul>
       </div>
    </div> 
```

因为现在显示了两个选项卡：一个用于“提出问题”，一个用于“开始新讨论”。我怎样才能通过修改上面的代码来隐藏这些出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:34:31.520

我不完全确定您要隐藏哪个，但这很简单

```
<?php if (/* user is not guest */) : ?>
  <div class="Tabs">
      <ul>
         <li class="<?php echo $Form->GetValue('Type') == 'Question' ? 'Active' : '' ?>"><a id="QnA_Question" class="QnAButton TabLink" rel="Question" href="#"><?php echo T('Ask a Question'); ?></a></li>
         <li class="<?php echo $Form->GetValue('Type') == 'Discussion' ? 'Active' : '' ?>"><a id="QnA_Discussion" class="QnAButton TabLink" rel="Discussion" href="#"><?php echo T('Start a New Discussion'); ?></a></li>
      </ul>
   </div>
<?php endif; ?> 
```

如果这还不够，您可以使用以下内容将可见性设置为隐藏：

```
<li class="alldatphpcode" <?php if (/*is a guest*/) echo "style='visibility: hidden;'"?>/> 
```

我认为第一个有效地删除了该功能，因为如果他们是客人，用户不可能做到这一点，第二个只是停止它的显示，但仍会显示在源中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:39:01.680

您需要修改`visibility`属性

```
<style>.NoScript { visibility: hidden; }</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:38:25.577

您应该使用 JS 来执行隐藏/显示逻辑，而不是依赖隐藏在 noscript 块中的 css。默认 noscript 表单为可见，依赖脚本的表单为隐藏，然后是一大块 JS 来翻转这些状态：

```
<style>
    .hiddenform { display: none }
</style>

<div id="nocript">.... form for the JS-deprived</div>
<div id="withscript" class="hiddenform">... form for JS-enabled users</div>

<script type="text/javascript">
   document.getElementById('withscript').setAttribute('class', ''); // remove hiddenform
   document.getElementById('noscript').setAttribute('class', 'hiddenform');
</script> 
```

# multithreading - 杀死 Spring 预定线程

> ID：15391094
> 
> 赞同：1
> 
> 时间：2013-03-13T16:32:11.640
> 
> 标签：multithreading, spring, scheduling, kill

如果由于远程资源不可用而导致任务花费很长时间甚至挂起，是否有超时任务（杀死线程）？

就我而言，任务可能需要太长时间甚至挂起，因为它们基于 HtmlUnitDriver (Selenium) 步骤序列，但有时它会挂起，我希望能够设置线程执行的时间限制. 最多1分钟左右。

我设置了 5 分钟的固定速率执行，初始延迟为 1 分钟。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:11:55.943

前段时间我按照这个例子做了同样的事情：[example](http://blog.smartkey.co.uk/2011/09/adding-a-thread-timeout-to-methods-in-java/)

基本思想是将代码放在实现 Callable 或 Runnable 的类中，然后在要调用线程的任何地方创建一个 FutureTask，并将 Callable 或 Runnable 类作为参数。定义一个 executor ，将你的 futureTask 提交给 executor，现在你可以在 try catch 块内执行线程 x 时间，如果你的线程以 timeoutException 结束，你就会知道它花费了太长时间。

这是我的代码：

```
CallableServiceExecutor callableServiceExecutor = new CallableServiceExecutor();
        FutureTask<> task = new FutureTask<>(callableServiceExecutor);

        ExecutorService executor =  Executors.newSingleThreadExecutor();
        executor.submit(task);

        Boolean exito = true;

        try {

            result = task.get(getTimeoutValidacion() , TimeUnit.SECONDS);

        } catch (InterruptedException e) {
            exito = false;
        } catch (ExecutionException e) {
            exito = false;
        } catch (TimeoutException e) {
            exito = false;
        }

        task.cancel(true);
        executor.shutdown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:58:43.953

请参阅：[如何使线程超时](https://stackoverflow.com/questions/2275443/how-to-timeout-a-thread)

简短的回答是，由于 Java 线程实现的限制，没有简单或可靠的方法来杀死线程。这`ExecutorService#shutdown()`是一种黑客和沉重的。最好在任务本身中处理这个问题，例如在网络请求级别，如果您发出 REST 请求以在套接字上超时。

[或者更好的是，如果您通过 ala Actor 模型（请参阅Akka](http://akka.io/) ）进行某种消息传递，您可以从“主管”发送消息让 Actor 死亡。通过使用像 Netty 这样的东西来避免阻塞也会有所帮助。

# c# - 基于存储过程返回值的错误

> ID：15391095
> 
> 赞同：-2
> 
> 时间：2013-03-13T16:32:12.420
> 
> 标签：c#, javascript, asp.net, sql-server

我有一个 ASP.NET C# 网页，它在更新模式下有一个 DetailsView。用户输入一些内容并按下按钮来更新数据库中的该记录。

我想添加一个运行快速存储过程并获取返回值的 JavaScript。如果该返回值小于 1，那么我希望继续更新 DetailsView。如果该值大于 1，那么我想停止更新并显示错误消息：'ERROR:Greater than 1'。

一如既往，我感谢任何帮助。

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:37:16.363

您可以调用 Web 服务或页面方法来执行数据库查询，并借助`Ajax`.

在这里，您将找到与您想要的实现相同的答案：[Run Stored Procedure with ajax](https://stackoverflow.com/a/599008/1042848)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:38:56.483

您可以使用`Ajax and Jquery`来实现这一点。基本上你会在代码后面调用一个方法，你将在其中运行存储的过程并返回成功或错误消息

Jquery是：

```
$("input[id$='ButtonName']").click(function (e) {

                    $.ajax({
                        type: "POST",
                        url: "PageName.aspx/FunctionName",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",

                        success: function (msg) {
                            if (msg.d == 'Success') {
                                //do something
                            }
                            else if (msg.d == 'ERROR') {
                               //do something
                            }
                        }

                    });

                e.preventDefault();
            }); 
```

方法后面的代码是：

```
[System.Web.Services.WebMethod]
public static string FunctionName()
{
  //run store proc and return success or error 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:46:47.500

我最终以迂回的方式解决了这个问题。这不是我理想的解决方案，但它的工作原理是一样的。

我最终把这段代码放在了我的 Page_Load 中。它从 QueryString 中获取用户代码，然后使用该用户代码运行 SQL 查询以获取单个值。如果该值大于 1，则页面重定向到错误页面。

同样，并不理想，但它可以达到目的。

```
protected void Page_Load(object sender, EventArgs e)
    {
        //Runs query to determine if returnValue is greater then 1 then redirects if true 
        SqlConnection sqlConnection1 = new SqlConnection("ConnectionString");
        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "SELECT COUNT(UID) FROM Table WHERE (USER = @USER)";
        cmd.CommandType = CommandType.Text;
        SqlParameter UserID = new SqlParameter("@USER", Request.QueryString["usr"]);
        UserID.Direction = ParameterDirection.Input;
        cmd.Parameters.Add(UserID);
        cmd.Connection = sqlConnection1;

        sqlConnection1.Open();
        int returnValue;
        returnValue = Convert.ToInt32(cmd.ExecuteScalar());
        sqlConnection1.Close();

        if (returnValue > 0)
        {
            Response.Redirect("morethanone?usr=" + Request.QueryString["usr"]);
        }
    } 
```

# html - 将 CSS 应用于空值

> ID：15391098
> 
> 赞同：0
> 
> 时间：2013-03-13T16:32:24.247
> 
> 标签：html, css

我有以下CSS：

```
.ReadOnlySettingsListField {
    width:150px;
    float: left;
    padding: 2px;
    background-color: #eeeeee;
} 
```

我的html如下：

```
<table>
     <tr>
         <td>
             <div id="value1" class="ReadOnlySettingsListField ">{{ value1 }}</div>
             <div id="value2" class="ReadOnlySettingsListField ">&nbsp;</div>
             <div id="value3" class="ReadOnlySettingsListField ">{{ value3 }}</div>          
         </td>
     </tr>
 </table> 
```

我的问题是每当值：value1 或 value3 为空时，div 看起来不像它应该的那样，即背景颜色仅在顶部显示为一条细细的条带。如果 value1 或 value3 有任何文本，那么它看起来像预期的那样（150 宽，背景颜色=eeeeee）

如何使 css 也适用于“空”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:33:47.557

尝试像这样在你的css类中使用`min-width`和属性`min-height`

```
.ReadOnlySettingsListField 
{
 width:150px; 
 float: left; 
 padding: 2px; 
 background-color: #eeeeee;
 min-width:150px;
 min-height:100px;

} 
```

# ajax - 在页面加载时加载带有 ajax 的随机 html

> ID：15391100
> 
> 赞同：1
> 
> 时间：2013-03-13T16:32:25.197
> 
> 标签：ajax, random, load

我正在寻找一种方法来在页面刷新时将 3 个带有 ajax 的 html 文件中的随机 html 文件加载到主 html 页面中。有没有一种简单的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:39:44.580

```
var urls = ['url1', 'url2', 'url3'];

var randomUrl = urls[Math.floor(Math.random() * urls.length )];

$('body').load(randomUrl); 
```

请记住，您可能会遇到跨域请求策略问题。这意味着您无法使用来自其他域的 ajax 页面加载，除非从外部主机发送了一个特殊的标头。

或者，您可以将页面重定向到新页面：

```
window.location = randomUrl; 
```

# html - 带有两个 # 的 CSS 文件

> ID：15391106
> 
> 赞同：0
> 
> 时间：2013-03-13T16:32:52.320
> 
> 标签：html, css, nav

我读了一篇带有一些css文件的文章

```
#mainNav #toTop a {
    float: right;
    margin: 0 8px 0 0;
    font-size: 40px;
} 
```

有人可以解释为什么他们`#`在一个 css id 类型中有两个东西吗？我该如何使用它？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:44:49.550

我不知道您所说的“CSS id 类型”是什么意思。所以我只是一般地解释一下 CSS，我们会看看这个代码段的作用是否变得清晰。

在 CSS 中，您有选择器和属性块。您的问题是关于选择器的：

```
#mainNav #toTop a 
```

选择器用于定位（以及在某些其他平台上查询）HTML（有时是 XML）元素。此特定规则使用三个简单的选择器——两个 id 选择器和一个标签名称选择器——与两个后代组合器放在一起。

这意味着选择器将定位（并且伴随它的规则块将影响）任何锚元素（`<a>`），该元素是任何元素的后代，而该元素`id=toTop`又是任何元素的后代`id=mainNav`。

由于 id 元素应该是唯一的，因此将其中两个元素放在一个选择器中似乎很愚蠢。如果你愿意，你可以这样做，有时你需要这样做：我们还没有谈到选择器的特异性。

特异性定义了哪些规则优先于其他规则。例如，如果两个元素似乎都针对同一个元素：

```
form .label { color: blue; }
#contact-us .label { color: green; }
/* what color is the label? */ 
```

...那么哪个规则优先？为了弄清楚这一点，我们计算了特异性。我不会解释数学。

因此，假设您的项目中有一个无法更改的 CSS 样式表 - 它来自 3rd 方供应商之类的，它看起来像这样：

```
#toTop a { /*...*/ } 
```

如果您需要更改受该规则影响的元素的样式，您会怎么做？

您可以（并且可能会）定义一个更具体的新规则。一种方法是在规则中添加另一个 id 选择器：

```
#mainNav #toTop a { /*...*/ } 
```

但实际上，您可以轻松添加任何其他选择器：

```
div#toTop a { /*...*/ } 
```

实际上，是否有必要取决于您要执行的操作、与之交互的其他规则以及您正在处理的 HTML 类型。

* * *

这里还有一点需要考虑：CSS 样式表是用来重复使用的。如果该元素在文档中的不同位置应该表现不同怎么办？如果`id="toTop"`有时`id="mainNav"`在某些页面的元素内部，而在其他页面的不同位置（比如说在`id="footer"`元素中）怎么办？如果它根据客户端 JavaScript 移动会怎样？然后你可能想像这样定义 CSS：

```
#mainNav #toTop a { /*...*/ }
#footer #toTop a { /*...*/ } 
```

... 最终，为什么开发人员会选择这样做实际上取决于他们正在使用的 CSS、JavaScript 和 HTML。这绝对是不寻常的，但这不是不必要的，也不是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:38:08.833

ID 必须始终是唯一的。但是，使用多个 id 来使样式更具体是有效的。

在您的示例中，您正在 #mainNav 中查找 ID 为 #toTop 的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:38:33.567

这是一个完全有效的 CSS 规则。这是非常具体的。这种使用的动机可能与页面布局的设计方式和/或 JavaScript 处理程序如何与 DOM 交互有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:40:06.770

这是一个糟糕的 CSS 示例。您示例中的选择器层次结构是多余且不必要的。它说选择`a`作为 ID 为的元素的后代的所有元素，该元素是 ID 为`toTop`的元素的后代`mainNav`。所以它假设一个基本的结构是这样的：

```
<div id="mainNav">
    <div id="toTop">
        <a href="#">link</a>
    </div>
</div> 
```

但是，由于**ID 必须是唯一的**，因此针对相同的元素只需要这样做：

```
#toTop a 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T17:37:56.230

`#mainNav #toTop a`使用[Descendant Combinator](http://www.w3.org/TR/selectors/#descendant-combinators)指定 id 元素`a`的后代元素 id元素的`toTop`后代元素`mainNav`。

正如其他答案所说，这条规则似乎过于具体，因为`ID`s 必须是唯一的，然后`#toTop a`应该可以解决问题。

选择声明此规则的真正原因是：

> 假设在一个网站中你有一个或多个*共享*CSS（阅读：你没有为每个页面使用不同的 CSS），这条规则意味着：
> 
> *   在`a`是 的后代`#toTop`但`#toTop`也是`#mainNav`元素的后代的页面中，则应用此规则；
> *   在`a`是 的后代`#toTop`但`#toTop`不是`#mainNav`元素的后代的页面中，则不要应用此规则；

因为`#toTop`可能是一个可重用的元素，可以在不同的地方（当然是每页一个）声明，例如在`#mainNav`页面内部和`#sideNav`另一个页面内部，具有所需的潜在不同行为和外观感觉。

# java - 在 weblogic 12C 上部署 webapp 共享库

> ID：15391109
> 
> 赞同：2
> 
> 时间：2013-03-13T16:32:53.160
> 
> 标签：java, weblogic, weblogic12c

我正在尝试将针对 weblogic 10.3.x 构建的共享库迁移到 weblogic 12C。我成功部署了ear共享库。不幸的是，webapp 共享库的部署总是失败并出现以下错误：

```
Erreur Impossible d'accéder à l'application sélectionnée.
Erreur Exception in AppMerge flows' progression
Erreur Exception in AppMerge flows' progression
Erreur Unable to transform version 2.4 web application namespace to version 2.5 
```

我的典型 webapp 共享库有以下内容

```
/WEB-INF/
---------web.xml
---------lib
------------ my libraries 
```

我的 web.xml 的内容

```
<?xml version='1.0' encoding='UTF-8'?>
<web-app 
        xmlns="http://java.sun.com/xml/ns/j2ee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        version="2.5">

</web-app> 
```

我应该改变什么？

在此先感谢您的帮助

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:54:16.320

我之前没有注意您的命名空间定义。试试这个`web.xml`

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

# jquery - Hottowel SPA 视图模型和 jquery

> ID：15391111
> 
> 赞同：2
> 
> 时间：2013-03-13T16:32:55.650
> 
> 标签：jquery, viewmodel, hottowel

下面是一个热毛巾视图模型。我试图弄清楚在哪里以及如何进行 jquery 调用

```
define(['services/logger'], function (logger) {
    var vm = {
        activate: activate,
        title: 'Applications'
    };

    return vm;

    //#region Internal Methods
    function activate() {
        logger.log('Applications', null, 'applications', true);
        return true;
    }
    //#endregion
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:36:10.540

我想知道的是“为什么要在 ViewModel 中使用 jQuery？” jQuery 用于 DOM 操作。好吧，我们已经通过绑定为我们解决了这个问题。我们不应该需要 jQuery。在 ViewModel 中使用 jQuery 通常（并不总是）是一种代码异味。我的经验法则是“如果我使用 jQuery，我做错了”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:45:46.580

取决于你希望它在哪里运行。如果您希望 jquery 代码在 viewmodel 激活时执行，则将其放在 activate 方法中。如果您希望它运行一次，则在创建视图模型时，将其放在 return 语句之前。

# c# - 是什么原因导致“扩展方法无法动态调度”？

> ID：15391115
> 
> 赞同：33
> 
> 时间：2013-03-13T16:33:02.537
> 
> 标签：c#, .net, compiler-errors, extension-methods, dapper

# 编译错误

> “System.Data.SqlClient.SqlConnection”没有名为“Query”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法。

现在，我知道如何解决这个问题，但我正试图更好地理解错误本身。我正在构建利用 Dapper 的课程。最后，我将提供更多自定义功能，以使我们的数据访问类型更加精简。特别是在跟踪和东西方面的​​建设。但是，现在它就像这样简单：

```
public class Connection : IDisposable
{
    private SqlConnection _connection;

    public Connection()
    {
        var connectionString = Convert.ToString(ConfigurationManager.ConnectionStrings["ConnectionString"]);
        _connection = new SqlConnection(connectionString);
        _connection.Open();
    }

    public void Dispose()
    {
        _connection.Close();
        _connection.Dispose();
    }

    public IEnumerable<dynamic> Query(string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        // this one works fine, without compile error, so I understand how to
        // workaround the error
        return Dapper.SqlMapper.Query(_connection, sql, param, transaction, buffered, commandTimeout, commandType);
    }

    public IEnumerable<T> Query<T>(string sql, dynamic param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null)
    {
        // this one is failing with the error
        return (IEnumerable<T>)_connection.Query(sql, param, transaction, buffered, commandTimeout, commandType);
    }
} 
```

但有趣的是，如果我只是发表这样的声明：

```
_connection.Query("SELECT * FROM SomeTable"); 
```

它编译得很好。

那么，有人可以帮我理解为什么在其他方法中利用相同的重载会因该错误而失败吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-13T16:40:36.637

> 那么，有人可以帮我理解为什么在其他方法中利用相同的重载会因该错误而失败吗？

正是因为您使用动态值 ( `param`) 作为参数之一。这意味着它将使用动态调度......但扩展方法不支持动态调度。

解决方案很简单：直接调用静态方法：

```
return SqlMapper.Query(_connection, sql, param, transaction,
                       buffered, commandTimeout, commandType); 
```

（这是假设您确实需要`param`type `dynamic`，当然...如评论中所述，您可能只需将其更改为`object`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T16:03:47.257

同一问题的另一个解决方案是将类型转换应用于动态值。

我遇到了同样的编译错误：

```
Url.Asset( "path/" + article.logo ); 
```

通过这样做解决了：

```
Url.Asset( "path/" + (string) article.logo ); 
```

注意：动态值是众所周知的字符串，在这种情况下；存在的字符串连接强化了一个事实。

# jquery - 根据浏览器宽度显示图像

> ID：15391116
> 
> 赞同：0
> 
> 时间：2013-03-13T16:33:03.387
> 
> 标签：jquery, html, css

我有一堆想使用 jquery 显示的图像。我有 div，我使用 jquery 根据一些 node_id 标准填充 div。例如，如果 node_id 是 teamA，我会显示在图像名称中包含 teamA 文本的图像。

它的工作原理发现，问题是当将图像放在 html 的主体上时，图像会垂直显示，直到主页上没有空间。

我想根据浏览器窗口的大小执行此操作，根据浏览器窗口的大小显示图像。例如，如果图像大小为 500x500，浏览器窗口宽度为 700，我应该能够每行显示一张图像。如果浏览器的宽度是 1200，我的浏览器窗口中每行应该有 2 张图像。

为了给你一个想法，我放了 html 和 jquery 代码来向你展示我在做什么：

```
<div class="tab-content" id="tabs1">
    <div id="team_A" class="team"></div>
    <div id="team_B" class="team"></div>
    <div id="team_C" class="team"></div>
    <div id="team_D" class="team"></div>
</div> 
```

这是基于 jstree node_id 显示图像的 jquery 代码：

```
var team_A_Img = "http://test.net" + node_id + "-team_A.png";
            $(function () {

                var myImage = new Image();
                $(myImage).load(function () {

                    $("#team_A").html(myImage);

                }).error(function () {

                    $('#team_A').hide();
                }).attr('src', Img_A_Img)

            }); 
```

这很有效，但是我需要根据浏览器上的空间大小，垂直或水平地显示基于浏览器窗口大小的图像。有人可以给我一些想法，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:54:59.803

如果您可以指定图像的宽度，则可以将它们浮动在块级元素中。例如：

```
<div class="tab-content" id="tabs1">
    <div id="team_A" class="team"><img src="http://placehold.it/350x150"></div>
    <div id="team_B" class="team"><img src="http://placehold.it/350x150"></div>
    <div id="team_C" class="team"><img src="http://placehold.it/350x150"></div>
    <div id="team_D" class="team"><img src="http://placehold.it/350x150"></div>
</div> 
```

并使用以下 CSS：

```
.tab-content {
    padding: 0px;
    background-color: yellow;
    overflow: auto;
}
.team {
    float: left;
    margin: 0 5px 5px 0;
}
.team img {
    display: block;
} 
```

要使其工作，`overflow: auto`请在父容器中设置，特别是如果您想使用背景颜色或图像。

您可以调整浮动元素的边距或填充，以在图像之间创建和设置装订线样式。

最后，我`display: block`在图像上使用来处理可能由内联元素产生的任何空白。

如需参考，请参阅：http: [//jsfiddle.net/audetwebdesign/8FEeM/](http://jsfiddle.net/audetwebdesign/8FEeM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:54:36.153

```
<div class="tab-content" id="tabs1">
<div id="team_A" class="team">
    <img src="http://placehold.it/500x500" />
    <img src="http://placehold.it/500x500" />
    <img src="http://placehold.it/500x500" />
</div> 
```

CSS

```
.team img{float: left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:04:33.693

在我的脚本中可以这样做：

$('.team').css({ "width": $(window).width(), "height": "auto" });

# codeigniter - sublime text 2 自动完成代码点火器项目

> ID：15391118
> 
> 赞同：3
> 
> 时间：2013-03-13T16:33:15.883
> 
> 标签：codeigniter, autocomplete, syntax-highlighting, sublimetext2

沮丧和绝望的问题。

所以我第一次下载了 sublime text 2，我安装了 packagemanager 和一个 autocomplete.php 文件

> [https://github.com/martinredola/sublimetext2-codeigniter-completions](https://github.com/martinredola/sublimetext2-codeigniter-completions)

现在的问题是，我如何为 codeigniter+html+css 设置语法自动完成并禁用所有其他不相关的奇怪自动完成列表弹出！

我正在寻找有人告诉我他使用 sublime text 2 为 codeigniter 开发制作完美工作流程的步骤。

非常感谢提前

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-26T16:22:02.000

有。

安装[Sublime 包控制](http://wbond.net/sublime_packages/package_control)

然后打开“包控制”，选择“包控制：安装包”。输入“CodeIgniter”并安装包“CodeIgniter Snippets”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T01:47:24.980

codeigniter 片段不能与 sublime text 2 一起正常工作。我将这个包与 sublime text 3 一起使用，我没有问题，如果你添加 sublimelinter 包，你可以做非常好的事情。

您必须先安装包控件，说明在页面中

[https://packagecontrol.io/installation](https://packagecontrol.io/installation)

然后点击`ctrl`++并写“安装包”，将显示一个完整的应用程序列表然后搜索`shift`Codeigniter `p`Snippet并点击回车，重复sublime linter的过程就完成了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:02:56.813

相信我，我已经走这条路很多次了。最后，根本不值得。Codeigniter 只是没有设置简单的自动完成项目。

我使用 PHPStorm 以及 sublime text 2 来处理 codeigniter，甚至 phpstorm 这个商业产品也不支持 codeigniter。在 php 的开发环境中设置更多有价值的东西，例如你有调试器吗？那是另一件真正有助于我的 codeigniter 开发的事情。

我并不总是使用它，通常我喜欢使用像 sublime text 2 这样的轻量级解决方案，但是当您处理纯 php 代码并且不能总是在任何地方设置 var_dump 和 print_r 语句时 - 调试器真的很有帮助。

# android - 如何从后台服务android更新谷歌地图v2位置

> ID：15391121
> 
> 赞同：6
> 
> 时间：2013-03-13T16:33:18.923
> 
> 标签：android, service, maps, location

我有一个实现 LocationListener 的后台服务，并将定期提供位置更新。然后我想使用这些位置更新来更新主要活动中地图上的用户位置。我可以通过意图将纬度经度数据传递给主要活动，但我不知道如何使用该数据来显示用户的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T17:38:19.890

看看这个链接：

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

特别是这些行

```
LatLng sydney = new LatLng(-33.867, 151.206);

map.setMyLocationEnabled(true);
map.moveCamera(CameraUpdateFactory.newLatLngZoom(sydney, 13)); 
```

# python - 使用字典解析json

> ID：15391122
> 
> 赞同：0
> 
> 时间：2013-03-13T16:33:22.240
> 
> 标签：python

我有一个看起来像这样的 json 文件：我将不得不提取事件，例如。'APP_STARTED' '方向' 等

```
{u'ParamElement_ReceivedTime': u'2012-11-02-00-05-31-748', 
 u'ParamElement_Name': u'LOG_CONTENT', 
 u'ParamElement_Info_0': 
                 {u'dict': 
                      {u'Events_list': [
                          {
                           u'Event': u'APP_STARTED', 
                           u'time': u'2012-11-01 20:00:59.565 -0400'}, 
                          {
                            u'time': u'2012-11-01 20:01:01.168 -0400', 
                            u'Event': u'ORIENTATION', 
                            u'Orientation': u'Portrait'}, 

                          {u'Event': u'CLIENT_RESULT_RECEIVED', 
                           u'time': u'2012-11-01 20:01:15.927 -0400'}, 

                          {u'Prev_SessionID': u'802911CC329E47139B61B58E21BF2FFF', 
                           u'Prev_TransactionID': u'2', 
                           u'Tab_Index': u'5', 
                           u'time': u'2012-11-01 20:01:15.941 -0400', 
                           u'Event': u'RESOLVED_TAB', 
                           u'Accuracy': u'5.000000'}, 

                          {u'Prev_TransactionID': u'2', 
                           u'Prev_SessionID': u'802911CC329E47139B61B58E21BF2FFF', 
                           u'Event': u'CLIENT_RESULT_RECEIVED', 
                           u'time': u'2012-11-01 20:01:16.568 -0400'}
                    } 
```

整个事情都存储在一个名为 event_dict 的变量中。我有一个看起来像这样的代码：

```
if event_dict:
      if 'dict' in event_dict['ParamElement_Info_0']:
          if 'el' in event_dict['ParamElement_Info_0']['dict']:
           if 'e' in event_dict['ParamElement_Info_0']['dict']['el']:
             print e['Event'] 
```

可能是什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:44:50.407

Python 方法是***请求宽恕，而不是许可***`try-catch`，并且使用块而不是`condition checks`必须`condition fail`单独处理更容易更好。

```
try:
    event = event_dict['ParamElement_Info_0']['dict']['Events_list']
except Exception, e:
    log('Opsss, incorrect data format: %s' % e.message) 
```

这样，您可以轻松查看错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:35:11.603

你永远不会定义变量`e`：你的最后一行应该是一个循环，*而不是*像前面几行那样的条件：

```
for e in event_dict['ParamElement_Info_0']['dict']['el']:
    print e 
```

另外，我想你说什么`"el"`时候需要说`"Events_list"`，使你的代码更正：

```
if event_dict:
      if 'dict' in event_dict['ParamElement_Info_0']:
          if 'Events_list' in event_dict['ParamElement_Info_0']['dict']:
              for e in event_dict['ParamElement_Info_0']['dict']['Events_list']:
                  print e 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:47:28.420

您的字典中没有“el”元素。当您编写 a 时，`for A in B`您正在创建一个变量 A 来保存可迭代 B 的内容。您正在做的是说，如果键 'el' 在我的字典中......它不是。但是 Events_list 正如@David 指出的那样。

这可能是一种更简单的方法。

```
def item_getter(struct, key):
    parts = key.split('.', 1)
    if len(parts) > 1:
        key_part, rest_part = parts
        return item_getter(struct.get(key_part, {}), rest_part)
    return struct.get(key, None)

items = item_getter(event_dict, "ParamElement_Info_0.dict.Events_list")
events = [item.get('Event', 'No Event') for item in items]
print events 
```

**输出**

```
[u'APP_STARTED', u'ORIENTATION', u'CLIENT_RESULT_RECEIVED', u'RESOLVED_TAB', u'CLIENT_RESULT_RECEIVED'] 
```

# wpf - 带有标签的垂直滑块

> ID：15391127
> 
> 赞同：3
> 
> 时间：2013-03-13T16:33:24.753
> 
> 标签：wpf, slider

我目前正在尝试获取带有代码的自定义垂直滑块以及这些代码中具有相应值的标签。我已经在网上找到了一些有趣的水平滑块代码，我现在在我的解决方案中使用这些代码，如下所示：

XAML：

```
<ControlTemplate x:Key="HorizontalSlider" TargetType="{x:Type Slider}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" MinHeight="{TemplateBinding Slider.MinHeight}"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <local:MyTickBar Margin="5,0,10,0" x:Name="TopTick" SnapsToDevicePixels="True" Placement="Top" Fill="{StaticResource GlyphDarkBrush}" Height="5"  />
            <Border Name="TrackBackground" Margin="0" CornerRadius="2" Height="4" Grid.Row="1" Background="{StaticResource GlyphLightBrush}" BorderBrush="{StaticResource ButtonNormal}" BorderThickness="1" />
            <Track Grid.Row="1" Name="PART_Track">
                <Track.DecreaseRepeatButton>
                    <RepeatButton Style="{StaticResource SliderButtonStyle}" Command="Slider.DecreaseLarge" />
                </Track.DecreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource SliderThumbStyle}" />
                </Track.Thumb>
                <Track.IncreaseRepeatButton>
                    <RepeatButton Style="{StaticResource SliderButtonStyle}" Command="Slider.IncreaseLarge" /> 
                </Track.IncreaseRepeatButton>
            </Track>
            <TickBar Name="BottomTick" SnapsToDevicePixels="True" Grid.Row="2" Fill="Black" Placement="Bottom" Height="10" Visibility="Collapsed" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="TickPlacement" Value="TopLeft">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="TickPlacement" Value="BottomRight">
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="TickPlacement" Value="Both">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

MyTickBar 是一个定义为的类：

```
public class MyTickBar : TickBar
{
    protected override void OnRender(DrawingContext dc)
    {
        Size size = new Size(base.ActualWidth, base.ActualHeight);
        int tickCount = (int)((this.Maximum - this.Minimum) / this.TickFrequency) + 1;
        if ((this.Maximum - this.Minimum) % this.TickFrequency == 0)
            tickCount -= 1;
        Double tickFrequencySize;
        // Calculate tick's setting
        tickFrequencySize = (size.Width * this.TickFrequency / (this.Maximum - this.Minimum));
        string text = "";
        FormattedText formattedText = null;
        double num = this.Maximum - this.Minimum;
        int i = 0;
        // Draw each tick text
        for (i = 0; i <= tickCount; i++)
        {
            text = Convert.ToString(Convert.ToInt32(this.Minimum + this.TickFrequency * i), 10);
            formattedText = new FormattedText(text, CultureInfo.GetCultureInfo("en-us"), FlowDirection.LeftToRight, new Typeface("Verdana"), 16, Brushes.Black);
            dc.DrawText(formattedText, new Point((tickFrequencySize * i), 30));
        }
    }
} 
```

这适用于水平滑块，但当我假装垂直滑块时，我尝试了 2 种不同的解决方案，但均未成功。首先，是为垂直滑块制作一个类似的 XAML，但由于我对 WPF 很陌生，我无法实现预期的解决方案（我基本上将行和高度属性更改为列和 with，但可能有点比这更复杂）。我的第二次尝试是使用

```
<Slider.LayoutTransform>
            <RotateTransform Angle="270"/>
        </Slider.LayoutTransform> 
```

在假装的滑块上，得到一个标签位置不正确的滑块，如下图所示：[http ://s22.postimage.org/sohl10wh/Incorrect.jpg](http://s22.postimage.org/sophl10wh/Incorrect.jpg)

我试图对 MyTicker 的 DrawingContext 应用旋转，但这会旋转整个股票行情，而不是带有值的标签。所以，我的问题是如何获得假装解决方案？通过对自定义垂直滑块的新 XAML 进行必要的更改，或者只是在第二个解决方案中旋转标签。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:14:53.047

所以，我现在可以回答我自己的问题，也许可以帮助将来尝试完成同样问题的人。就像我在自己的问题的评论中所说的那样，后来我意识到我可以去 msdn 并获得正确的垂直滑块模板，而不是尝试调整水平滑块。

我当前的 XAML 现在是：

```
<ControlTemplate x:Key="VerticalSlider" TargetType="{x:Type Slider}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto" MinWidth="{TemplateBinding Slider.MinWidth}"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <local:MyTickBarVertical Margin="0,0,0,10" x:Name="TopTick" SnapsToDevicePixels="True" Placement="Left" Fill="{StaticResource GlyphDarkBrush}" Width="4" />
            <Track Grid.Column="1" Name="PART_Track">
                <Track.DecreaseRepeatButton>
                    <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.DecreaseLarge" />
                </Track.DecreaseRepeatButton>
                <Track.Thumb>
                    <Thumb Style="{StaticResource SliderThumbStyle}" />
                </Track.Thumb>
                <Track.IncreaseRepeatButton>
                    <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.IncreaseLarge" />
                </Track.IncreaseRepeatButton>
            </Track>
            <TickBar 
  Name="BottomTick"
  SnapsToDevicePixels="True" 
  Grid.Column="2"
  Fill="Black"
  Placement="Right"
  Width="4"
  Visibility="Collapsed" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="TickPlacement" Value="TopLeft">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="TickPlacement" Value="BottomRight">
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="TickPlacement" Value="Both">
                <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
                <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

我确实对我的班级做了一些小改动，因为现在我使用了一个合适的垂直滑块：

```
public class MyTickBarVertical : TickBar
{
    protected override void OnRender(DrawingContext dc)
    {
        Size size = new Size(base.ActualWidth, base.ActualHeight);
        int tickCount = (int)((this.Maximum - this.Minimum) / this.TickFrequency) + 1;
        if ((this.Maximum - this.Minimum) % this.TickFrequency == 0)
            tickCount -= 1;
        Double tickFrequencySize;
        // Calculate tick's setting
        //width to height
        tickFrequencySize = (size.Height * this.TickFrequency / (this.Maximum - this.Minimum));
        string text = "";
        FormattedText formattedText = null;
        double num = this.Maximum - this.Minimum;
        int i = 0;
        // Draw each tick text
        for (i = 0; i <= tickCount; i++)
        {
            text = Convert.ToString(Convert.ToInt32(this.Maximum) - Convert.ToInt32(this.Minimum + this.TickFrequency * i), 10);
            formattedText = new FormattedText(text, CultureInfo.GetCultureInfo("en-us"), FlowDirection.RightToLeft, new Typeface("Verdana"), 16, Brushes.Black);
            dc.DrawText(formattedText, new Point(0, (tickFrequencySize * i)));
        }
    }
} 
```

现在得到以下内容：[http ://s4.postimage.org/d0q6dpxvx/Correct.jpg](http://s4.postimage.org/d0q6dpxvx/Correct.jpg)

干杯!

# android - 使用 commitAllowingStateLoss 解决“onSaveInstanceState 后无法执行此操作”的任何副作用

> ID：15391129
> 
> 赞同：3
> 
> 时间：2013-03-13T16:33:36.553
> 
> 标签：android

以前，我们显示以下内容没有问题`DialogFragment`

![在此处输入图像描述](../Images/c27e46e0452d15e2aa9d96612790585d.png)

```
// Triggered by button click.
private void openFromCloud() {      
    LoadFromCloudTaskFragment loadFromCloudTaskFragment = new LoadFromCloudTaskFragment();
    FragmentManager fm = this.getSupportFragmentManager();
    fm.beginTransaction().add(loadFromCloudTaskFragment, "loadFromCloudTaskFragment").commit(); 
} 
```

`DialogFragment`但是，如果我们在下面按 OK 按钮后倾向于显示相同的内容`Intent`，则会出现错误。

![在此处输入图像描述](../Images/d706306cd96e9754c21a8ef573448b54.png)

```
private void openFromCloud() {      
    startActivityForResult(Utils.getGoogleAccountCredential().newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
}

@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    switch (requestCode) {
    case REQUEST_ACCOUNT_PICKER:
        if (resultCode == RESULT_OK && data != null && data.getExtras() != null) {
            String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            if (accountName != null) {
                Utils.getGoogleAccountCredential().setSelectedAccountName(accountName);
                LoadFromCloudTaskFragment loadFromCloudTaskFragment = new LoadFromCloudTaskFragment();
                FragmentManager fm = getSupportFragmentManager();
                fm.beginTransaction().add(loadFromCloudTaskFragment, "loadFromCloudTaskFragment").commit();
            }
        }
    break;
    }
} 
```

* * *

这是详细的错误日志

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { (has extras) }} to activity {org.yccheok.xxx.gui/org.yccheok.xxx.gui.XXXFragmentActivity}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.app.ActivityThread.deliverResults(ActivityThread.java:3141)
    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
    at android.app.ActivityThread.access$1100(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1310)
    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:525)
    at org.yccheok.xxx.gui.XXXFragmentActivity$1.run(XXXFragmentActivity.java:107)
    at android.app.Activity.runOnUiThread(Activity.java:4591)
    at org.yccheok.xxx.gui.XXXFragmentActivity.onActivityResult(XXXFragmentActivity.java:102)
    at android.app.Activity.dispatchActivityResult(Activity.java:5192)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:3137)
    ... 11 more 
```

`commitAllowingStateLoss`我可以通过使用而不是简单地“解决”问题`commit`。

```
fm.beginTransaction().add(loadFromCloudTaskFragment, "loadFromCloudTaskFragment").commitAllowingStateLoss(); 
```

我不太了解有关`commitAllowingStateLoss`.

> 与 commit() 类似，但允许在保存活动状态后执行提交。这是危险的，因为如果活动需要稍后从其状态恢复，提交可能会丢失，因此这应该只用于 UI 状态可以在用户上意外更改的情况。

这是基于[获取异常“IllegalStateException：onSaveInstanceState 后无法执行此操作”的建议](https://stackoverflow.com/questions/7469082/getting-exception-illegalstateexception-can-not-perform-this-action-after-onsa)

我真的不明白**UI 状态在用户身上意外改变是可以的。**? 我可以知道使用可能的副作用是`commitAllowingStateLoss`什么吗？我可以产生这种副作用的任何步骤吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:30:11.493

我唯一能想到的就是一种“比赛条件”事件。

`commitAllowingStateLoss()`想象一种情况，当设备在您通话之前旋转。AFAIK，发生以下情况：

*   `onSaveInstanceState()`回调（活动存储它的状态**，目前没有片段存在**（因为你还没有提交任何东西）
*   `commitAllowingStateLoss`执行向活动**添加片段**
*   `Activity`**重新创建，将其状态恢复到没有添加片段**的那一刻

 **在我看来，它会导致难以预测的情况，例如：

*   `java.lang.IllegalStateException: Failure saving state: FragmentB has target not in fragment manager: FragmentA`如果您`Fragment.setTargetFragment()`出于任何原因使用
*   您的片段可能只是从视图中丢失

无论如何，我对此不是 100% 确定的，但是我的`java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState`应用程序中有很多意外的异常，并且也试图找到解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T21:01:03.853

可能你已经没有这个问题了。我遇到了类似的问题。我解决了将片段转换代码放在 onResume 函数中的问题。我放了一个标志来表明结果是否正常。如果这是真的，那么在 onResume 方法中我确实过渡到了其他片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T08:39:57.503

可以在Activity.java中看到如下代码

```
 protected void onSaveInstanceState(Bundle outState) {
    outState.putBundle(WINDOW_HIERARCHY_TAG, mWindow.saveHierarchyState());
    Parcelable p = mFragments.saveAllState();
    if (p != null) {
        outState.putParcelable(FRAGMENTS_TAG, p);
    }
    getApplication().dispatchActivitySaveInstanceState(this, outState);
} 
```

关键代码 ===>mFragments.saveAllState()

如果你在 onSaveInstanceState 之后提交，那么片段的状态将不会被保存**

# c++ - 我的函数应该接受指针还是智能指针？

> ID：15391131
> 
> 赞同：3
> 
> 时间：2013-03-13T16:33:41.173
> 
> 标签：c++, function, unique-ptr

我已经开始使用`std::unique_ptr`例如：

```
unique_ptr<TFile> myfile( TFile::Open("myfile.root") ); 
```

代替

```
TFile * myoldfile = TFile::Open("myoldfile.root") ; 
```

现在我不确定我的功能应该是什么样子。我认为问题的一部分可能是我的代码还不够复杂，还不足以让任何问题变得明显，但我想现在就得到它，这样当事情变得更复杂时，我就不会陷入混乱。

我曾经有：

```
double interestingResult( TFile * input )
{...} 
```

（它实际上并没有修改 TFile 但不能是 const，因为它调用了 TFile 的一些非常量函数）。

我仍然可以这样做：

```
myResult  = interestingResult( myfile.get() ); 
```

这似乎不是很用户友好。（我认为这里建议：[https](https://stackoverflow.com/a/5325560/1527126) ://stackoverflow.com/a/5325560/1527126 。）

或者我可以修改我的函数看起来像：

```
double interestingResult( unique_ptr<TFile>& input )
{...} 
```

这会强制用户始终使用 unique_ptr。

或者我可以通过以下方式支持两者：

```
double interestingResult( unique_ptr<TFile>& input )
{ return interestingResult( intput.get() ); } 
```

但我在其他人的代码中看不到这一点。

这种情况的标准方法是什么？

我认为这个答案（[https://stackoverflow.com/a/9700189/1527126](https://stackoverflow.com/a/9700189/1527126)）暗示我应该接受引用，因为我不希望`myfile`为空。但是库函数`TFile::Open`总是返回一个指针，因此能够将它直接传递给函数而不需要额外的解引用似乎很自然。

抱歉 ps 我放弃了尝试确定是否应该在 StackOverflow 或 CodeReview 上询问，但如果不是，请指出适当的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:43:01.517

您所指的答案是正确的。

如果您有一个应该在任何现有`TFile`实例上工作的函数并且没有理由接受 NULL 指针作为有效参数并且函数参数不携带所有权，则应该使用`TFile&`作为参数类型（`TFile const&`如果可能）。传入的对象由调用者通过指针（有或没有所有权）持有，这不会对该函数产生影响。

您可以选择使用`TFile *`参数，但这至少会在传递 NULL 的有效性方面产生歧义，因此可能会在未来引起问题。

如果使用`unique_ptr<TFile>`参数，则将对象的所有权永久传递给函数。`unique_ptr`当调用返回时，调用者将留下一个 NULL 。

如果使用`unique_ptr<TFile>&`参数，这表明函数可以选择接管对象的所有权或将其留给调用者。比较不寻常。

`unique_ptr<TFile> const&`参数可以像 a 一样使用，`TFile *`但会强制调用者拥有对象并使用 a 来管理它`unique_ptr`。为什么要对调用者提出这样的要求？当然，这（以及 的其他用途`unique_ptr`）也都必须处理 NULL 情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:39:35.337

在参数列表中接受智能指针的问题是您指定调用者可以使用哪种智能指针。例如，通过使用 unique_ptr 可以防止调用者改用 shared_ptr。

在你的情况下，我建议一个参考参数。我也看到经常使用的常规指针。主要的是，您的函数在函数返回后不会尝试持有引用/获取对象的所有权 - 即它以后不负责释放内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:53:38.400

引用`TFile &`或指针`TFile *`都可以。

有些人会告诉你，当空指针是函数的无效输入时，你“应该”使用引用。这些人在尝试使用继承自 C 的标准函数（如 等）时变得困惑和愤怒`std::strlen`。`std::memcpy`我的感觉是，虽然使用对需要引用的自文档的引用非常好，但拥有您的 API 也非常好要么与引用一致，要么与指针一致。

有些人会告诉你“不应该”使用非常量引用参数，而更喜欢指针。当他们尝试使用标准函数`std::swap`（如

只要您不与这些人中的任何一个合作，您就可以做出自己的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:41:03.750

这取决于，但在首选函数中使用原始指针（或对对象的引用），因为函数不获取指针的所有权。

而且，如果有一天你决定使用`shared_ptr`'s...

# javascript - 将 div 相对于另一个 div 定位：SVG 问题

> ID：15391142
> 
> 赞同：2
> 
> 时间：2013-03-13T16:34:15.613
> 
> 标签：javascript, jquery

我有一个 id="div_Diagram" 的 div，其中包含另外两个 div，div_CanvasHeader 和 div_Canvas，如图所示。div_Canvas 还包含一个 SVG，它又包含几个矩形。每个矩形的构造方式是，它有一个附加到其鼠标悬停事件的 javascript 脚本，其中 x 和 y 位置值传递到脚本中。 ![在此处输入图像描述](../Images/a85679d7fc2d0e7b28aa01e9d4fb4a72.png)

根据 svgs 的性质，我无法正确定位相对于矩形的工具提示分区。我希望能够使用矩形坐标 (x&y) 相对于 div_CanvasHeader 或 div_Diagram 定位工具提示。除了 x 和 y，所有其他尺寸都是固定的。

这是javascript。（请注意，工具提示是一个 Telerik 控件。Show() 方法确实显示了具有所有正确内容的工具提示，但位于页面的左下方）。

```
function showSVGTtip(elt, x, y) {

        if (elt.hasAttribute("name")) {

            var ttipText = elt.getAttribute("ttipText ");

            var ttip = $find("<%=myToolTipDiv.ClientID %>");

            document.getElementById("ttipLabel").innerHTML = ttipText ;
            ttip.show();

            // Need to set position of ttip relative to other element such as pnlCanvasHeader
        }
    } 
```

如何定位工具提示 div 相对于其他 div 之一？例如，如果我有工具提示 div 的 id，我可以在客户端上相对于 div_CanvasHeader 移动它吗？工具提示是否需要包含在另一个 div 中？

# php - 如何在 DotCloud 上启用 short_open_tags？

> ID：15391148
> 
> 赞同：0
> 
> 时间：2013-03-13T16:34:29.843
> 
> 标签：php, dotcloud, php-shorttags

我正在将我的代码从另一个 PaaS 提供商迁移到 DotCloud，但我有点头疼：我没有在文档中找到可以更改 php.ini 设置以启用短打开标签的地方，这是我的整个代码库所依赖的。

我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:20:21.920

您是否尝试过添加自己的 php.ini 文件？ [http://docs.dotcloud.com/services/php/#configuring-php](http://docs.dotcloud.com/services/php/#configuring-php)

# vba - 无法通过 VBA DOM 控件选择“选择”元素

> ID：15391154
> 
> 赞同：0
> 
> 时间：2013-03-13T16:34:34.630
> 
> 标签：vba, dom, excel, web-scraping

我正在尝试通过 Excel VBA 自动处理表单。在我目前正在使用的网站上，我可以单击按钮并填写文本字段，而不会出现任何问题。但是，有一个我无法使用的“选择”框：1stNav。通常，我会做类似的事情`Document.getElementById("1stNav").Options(1).Selected = True`，但我无法得到对象。

我试过使用`.getElementById("1stNav"), .getElementsByName("1stNav"), .all.Item("1stNav").`Nothing 似乎工作。我可以使用这些函数来选择其他 DOM 对象。是什么赋予了？谁能指出我正确的方向？

这是源代码（屏幕截图，因此更容易阅读）：

![HTML 源代码](../Images/194091ba9201554338bce46338bdbe26.png)

完整的标签是：`&lt;select name="lstNav" class="ListNav" id="lstNav" style="background-color: whitesmoke;" onmouseover="this.className='ListNavExpand';" onmouseout="this.className='ListNav';" onchange="javascript:setTimeout('__doPostBack(\'lstNav\',\'\')', 0)" size="4"&gt;`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:48:25.020

因为我很少看评论来寻找答案，所以我也会在这里添加它：

看起来 HTML 代码具有“lstNav”（带有小写“L”），而 VBA 代码具有“1stNav”（带有数字 1）。

# ms-access - Access accdb 文件可以用作已部署的后端吗？

> ID：15391155
> 
> 赞同：0
> 
> 时间：2013-03-13T16:34:38.330
> 
> 标签：ms-access, vb6

最近有人向我介绍了一个为使用 MDB 文件作为后端的律师维护“事务”的程序。我发现这令人惊讶，甚至更令人惊讶的是，无需在机器上安装 Access 副本即可使用该程序（顺便说一句，该程序已有 15 年历史）。

然后它让我想知道。ACCDB 文件可以用作已部署应用程序的后端，然后，最好的前端是什么？

这里的重点是，如果有人要创建与上述应用程序类似的应用程序（甚至不需要 1GB 的存储空间），请创建一个安装程序包并通过 CD 或 DVD 分发，这将是前端和后端？

我必须（为大学）编写一个使用纯文本文件作为存储介质的 java 程序。文本文件常用吗？或者是否有我不知道的标准部署后端？

至于前端，最相关的一点肯定是可以与应用程序一起部署什么引擎来运行前端，记住整个事情需要一起分发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:12:26.800

使用 MDB 文件作为桌面程序的后备存储是很常见的。这就是微软决定将相关的运行时文件（“ [Jet 数据库引擎](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine)”）以“ [Windows 数据访问组件](http://en.wikipedia.org/wiki/Microsoft_Data_Access_Components)”的名称包含在 Windows 中。它仍然存在于 Windows 8 中，尽管它在“功能上已被弃用”，AFAIK 表示将对其进行维护，但不会添加任何新功能。

微软[建议](http://msdn.microsoft.com/en-us/library/ms810810.aspx)：

> 在开发需要关系数据存储的新的非 Microsoft Access 应用程序时，使用[Microsoft SQL Server Express Edition](http://www.microsoft.com/sqlserver/2008/en/us/express.aspx)或[Microsoft SQL Server Compact Edition ...](http://www.microsoft.com/sqlserver/2008/en/us/compact.aspx)
> 
> 应用程序可以继续使用 Jet，以使用 Microsoft Office 2003 和更早版本的文件（.mdb 和 .xls）进行非主要数据存储。但是，对于这些应用程序，您应该计划从 Jet 迁移到 2007 Office System Driver。您可以 [下载 2007 Office System 驱动程序](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=7554f536-8c28-4598-9b72-ef94e038c891)，它允许您读取和写入 Office 2003（.mdb 和 .xls）或 Office 2007（*.accdb、*.xlsm、*.xlsx 和*.xlsb) 文件格式。

**重要免责声明**：存储数据的方式有**很多**：其他关系数据库引擎、“无 SQL”数据库、对象序列化等。在不了解特定项目和从事它的特定开发人员的特定技能。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-13T17:37:26.277

我绝对不推荐使用 ACCDB 作为后端。ACCDB 和 MDB 文件往往会在没有警告的情况下崩溃；例如，当网络连接中断或客户端机器崩溃时。然后，您需要修复可能遭受数据丢失的数据库后端文件。

我宁愿推荐为此使用 SQL Server 数据库。对我来说，MySQL 经常做到这一点。它也可以轻松备份，使用起来非常安全。MS SQL Server Express 或 compact（如上所述）也是非常不错的选择。

# routing - 如何从 Web API 操作中找出部分 url？

> ID：15391157
> 
> 赞同：0
> 
> 时间：2013-03-13T16:34:42.020
> 
> 标签：routing, controller, asp.net-web-api

在 Web API 中，我有一个 UserController 里面有一个动作如下：

```
[HttpGet]
public string SearchByEmail(string email)
{
    // how to get the sitename?
    return email;
} 
```

我已经向 WebApiConfig 添加了一个路由，如下所示：

```
 config.Routes.MapHttpRoute(
               name: "SearchUserByEmail",
               routeTemplate: "{sitename}/User/SearchByEmail",
               defaults: new
               {
                   controller = "User",
                   action = "SearchByEmail"
               }); 
```

基本上，用户可以使用以下路径调用操作：

```
/mysitename1/user/searchbyemail?email=lala@lala.com 
```

如何从操作中找出站点名称？

我编写了以下方法来从我的请求中检索它：

```
private string GetSiteName()
        {
            return this.Request.RequestUri.Segments[1].Replace("/", String.Empty);
        } 
```

但是在 MVC 中没有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:36:06.890

在您的 UserController 中使用以下操作：

```
[HttpGet]
public string SearchByEmail([FromUri]string sitename, string email)
{
   //Do stuff with sitename
   return email;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:18:52.997

您可以从当前请求中的路由数据中获取详细信息。

Request.GetRouteData().Values["sitename"].ToString()

# php - PHP中的wsdl连接

> ID：15391162
> 
> 赞同：0
> 
> 时间：2013-03-13T16:34:47.837
> 
> 标签：php, wsdl

我有一个奇怪的情况，我可以通过普通的 Web 浏览器 URL 获取 URL $wsdl = ' [https://www.connectwebservice.com/sandbox1_test/services/IR?wsdl](https://www.connectwebservice.com/sandbox1_test/services/IR?wsdl)购买将路径放入 URL 栏中，但我不能似乎通过连接也`file_get_contents()`不会返回任何内容，尽管相同的代码在其他连接上也可以正常工作。

如果这对将来的任何人有帮助，我已经建立了一些错误诊断代码......

```
<?php
ini_set('display_errors', 'On');
ini_set('memory_limit','1000M');
ini_set("soap.wsdl_cache_enabled", "0"); 
ini_set("default_socket_timeout", 120);  
ini_set("track_errors","On");
error_reporting(E_ALL);

$days = 7;  
$date = date('d/m/Y 00:00', (time() - ($days * 24 * 60 * 60))); 

$soap_args = array(
    'exceptions'=>true,
    'cache_wsdl'=>WSDL_CACHE_NONE,
    'trace'=>true,
    'connection_timeout'=>120,
    );

$wsdl = 'https://www.connectwebservice.com/sandbox1_test/services/IR?wsdl'; 

if(file_get_contents($wsdl)){

    try {

        $client = new SoapClient($wsdl,$soap_args);

        $product = $client->getProductIdsChangedSinceDateStrForType(array("lastRequestDateStr" => $date, "leafOnly" => true))->getProductIdsChangedSinceDateStrForTypeReturn;       

    } catch (SoapFault $fault) {
        var_dump(libxml_get_last_error());
        ?><br/><br/><pre><?php var_dump($fault); ?></pre><?php
        echo "<br/><br/>----------------------<br/><br/>";
        echo "Reason:   ";
        trigger_error("SOAP Fault: (faultcode: {$fault->faultcode}, faultstring: {$fault->faultstring})", E_USER_ERROR);

    }

    //show results if posible

    if($client){

        if ($product != '') { 
            $product = split(',', $product); 
            ?>Products:<br/><br/><pre><?php print_r($productIds); ?></pre><?php
            echo "<br/><br/>----------------------<br/><br/>";
        }

    } else {
        echo "$client only?";           
    }

    ?><br/><br/>Client:<br/><br/><pre><?php print_r($client); ?></pre>

    <?php

} else {
    echo "<br/>no connection or bad url";
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:39:24.793

检查是否`allow-url-fopen`设置`true`为`php.ini`

[http://es2.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://es2.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

# ios - 从给定索引处的 NSString 中提取单词子字符串

> ID：15391171
> 
> 赞同：5
> 
> 时间：2013-03-13T16:35:11.213
> 
> 标签：ios, cocoa, nsstring, substring

我想从给定索引处的 NSString 中提取一个子字符串。例子：

```
NSString = @"Hello, welcome to the jungle";
int index = 9; 
```

索引点“9”位于“欢迎”这个词的中间，我希望能够将“欢迎”这个词提取为子字符串。谁能告诉我如何实现这一目标？用正则表达式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T17:01:27.283

这是 NSString 上的一个类别的解决方案：

```
- (NSString *) wordAtIndex:(NSInteger) index {
    __block NSString *result = nil;
    [self enumerateSubstringsInRange:NSMakeRange(0, self.length)
                             options:NSStringEnumerationByWords
                          usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
                              if (NSLocationInRange(index, enclosingRange)) {
                                  result = substring;
                                  *stop = YES;
                              }
                          }];
    return result;
} 
```

另一个更复杂，但可以让您准确指定所需的单词字符：

```
- (NSString *) wordAtIndex:(NSInteger) index {
    if (index < 0 || index >= self.length)
        [NSException raise:NSInvalidArgumentException
                    format:@"Index out of range"];

    // This definition considers all punctuation as word characters, but you
    // can define the set exactly how you like
    NSCharacterSet *wordCharacterSet =
    [[NSCharacterSet whitespaceAndNewlineCharacterSet] invertedSet];

    // 1\. If [self characterAtIndex:index] is not a word character, find
    // the previous word. If there is no previous word, find the next word.
    // If there are no words at all, return nil.
    NSInteger adjustedIndex = index;
    while (adjustedIndex < self.length &&
           ![wordCharacterSet characterIsMember:
            [self characterAtIndex:adjustedIndex]])
        ++adjustedIndex;
    if (adjustedIndex == self.length) {
        do
            --adjustedIndex;
        while (adjustedIndex >= 0 &&
               ![wordCharacterSet characterIsMember:
                [self characterAtIndex:adjustedIndex]]);
        if (adjustedIndex == -1)
            return nil;
    }

    // 2\. Starting at adjustedIndex which is a word character, find the
    // beginning and end of the word
    NSInteger beforeBeginning = adjustedIndex;
    while (beforeBeginning >= 0 &&
           [wordCharacterSet characterIsMember:
            [self characterAtIndex:beforeBeginning]])
        --beforeBeginning;

    NSInteger afterEnd = adjustedIndex;
    while (afterEnd < self.length &&
           [wordCharacterSet characterIsMember:
            [self characterAtIndex:afterEnd]])
        ++afterEnd;

    NSRange range = NSMakeRange(beforeBeginning + 1,
                                afterEnd - beforeBeginning - 1);
    return [self substringWithRange:range];
} 
```

假设单词很短，第二个版本对于长字符串也更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:59:27.440

这是一种相当老套的方法，但它会起作用：

NSString 有一个方法：

```
- (NSArray *)componentsSeparatedByString:(NSString *)separator; 
```

所以你可以这样做：

```
NSString *myString = @"Blah blah blah";
NSString *output = @"";
int index = 9;
NSArray* myArray = [myString componentsSeparatedByString:@" "]; // <-- note the space in the parenthesis

for(NSString *str in myArray) {
    if(index > [str length]) index -= [str length] + 1; // don't forget the space that *was* there
    else output = str;
} 
```

# android - 如何与spring服务器通信android应用程序

> ID：15391173
> 
> 赞同：0
> 
> 时间：2013-03-13T16:35:12.790
> 
> 标签：android, mysql, web-services, spring, rest

我有一个在 Apache Tomcat v7.0 服务器上运行的网页，它与 MySQL 数据库通信。这与 Spring MVC 3.0.5 完美运行。现在我正在开发一个 Android 应用程序，我希望它与创建的 MySQL 数据库进行通信。我知道我不能直接这样做，所以我想通过我的 Tomcat 服务器来做。但是最好的方法是什么？你能给我任何指导或教程吗？我已经阅读了一些关于 RESTful 的文章。但是如何将它与 Spring 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:53:58.923

您的问题范围太大，无法详细回答，但这里有一些有用的提示：

*   杰克逊映射器（映射 Java --> JSON --> JAVA）
*   android-async-http （一个很好的在 android 上做请求的库）
*   在 Spring 中配置 Jackson Mapper 并编写一个控制器方法`@RequestBody` `@ResponseBody`

或者，如果您不需要将 SQLite 存储在服务器上，则可以使用它。

# java - Spring Data Gemfire 配置未连接到定位器？

> ID：15391177
> 
> 赞同：2
> 
> 时间：2013-03-13T16:35:15.803
> 
> 标签：java, spring, spring-data, gemfire, spring-data-gemfire

假设我的目标部署环境中已经运行了 Gemfire 定位器和缓存服务器进程。目标部署环境使用[客户端-服务器拓扑](http://community.gemstone.com/display/gemfire60/Deployment+topologies)。

我有一个 Spring 3.1 MVC 应用程序，它想要使用 Gemfire 缓存。我正在使用 Spring Data Gemfire 1.2.2 和 Gemfire 6.6.1

所以我在我的`spring.xml`

```
<util:properties id="gemfire-props">
    <prop key="log-level">${gemfire.log-level}</prop>
    <prop key="mcast-port">${gemfire.mcast-port}</prop>
    <prop key="locators">${gemfire.locators}</prop>
</util:properties>

<gfe:cache id="gemfireCache" properties-ref="gemfire-props"/>
<gfe:replicated-region id="myCacheRegion" cache-ref="gemfireCache">
    <gfe:cache-listener>
        <ref bean="gemfireCacheLogListener"/>
    </gfe:cache-listener>
    <gfe:entry-ttl timeout="${gemfire.myCacheRegion.ttl}" action="DESTROY"/>
</gfe:replicated-region>

<bean id="gemfireCacheLogListener" class="org.awong.GemfireCacheLogListener"></bean>

<bean id="cacheManager" class="org.springframework.data.gemfire.support.GemfireCacheManager"
    p:cache-ref="gemfireCache">
    <property name="regions">
        <set>
            <ref bean="myCacheRegion"/>
        </set>
    </property>
</bean> 
```

假设外部 JAR 依赖项都已在 Maven 中正确定义。还假设我加载了一个属性文件，该文件定义了上面引用的属性值。该`locators`属性定义为使用已启动的 Gemfire 定位器的 IP 和端口。

我相信这应该足够好，这样我就可以在我的 MVC 应用程序中使用`@Cacheable`. 我希望这些配置在应用程序服务器中启动一个定位器以连接到 Gemfire 网格，添加`myCacheRegion`到 Gemfire 缓存服务器，然后`cacheManager`应该能够使用新的缓存区域。

我得到`BeanCreationException`s 这是由于 Spring 启动时无法连接到定位器引起的：

```
4-Mar-2013 16:02:08.750 SEVERE org.apache.catalina.core.ApplicationContext.log StandardWrapper.Throwable
 org.springframework.beans.factory.BeanCreationException:
 [rest of stack trace snipped out]
 nested exception is com.gemstone.gemfire.GemFireConfigException: Unable to contact a Locator service.  Operation either timed out or Locator does not exist.
Configured list of locators is "[hostnameOfLocator<v0>:portOfLocator]". 
```

但是当我部署到目标环境时，无法创建 Gemfire bean，因为定位器进程无法连接。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:59:11.533

不看日志很难说。您的配置看起来不错。您在这些进程和 locator.log 中看到了哪些错误？

> > 我希望这些配置能够在应用程序服务器中启动定位器。

这些配置不会启动定位器，只会连接到配置的定位器。但是您之前声明定位器已经启动。使用定位器时，mcast-port 也应始终为 0。

一个常见的问题是 gemfire.jars 必须都是相同的版本。SDGF 1.2.2 依赖于 gemfire 7.0。如果您使用的是 gemfire 6.6.1，则需要从 pom 中的 spring-data-gemfire 中排除 gemfire 依赖项。

> > 目标部署使用客户端服务器拓扑。

此配置用于点对点。它应该仍然可以工作，但是如果您有现有的缓存服务器，您可能希望将其配置为客户端。该区域是服务器上 on 的副本还是仅是本地数据？请注意，如果您只需要@Cacheable，则不需要连接到网格。独立的嵌入式缓存可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T11:10:32.333

您可以尝试配置定位器池，例如：

```
<gfe:pool id="locatorPool">
    <gfe:locator host="host1" port="port1"/>
    <gfe:locator host="host2" port="port2"/>
</gfe:pool> 
```

然后将您的缓存链接到此池：

```
<gfe:cache id="gemfireCache" pool-name="locatorPool"/> 
```

# c - 使用 int 数组作为 switch case

> ID：15391182
> 
> 赞同：-3
> 
> 时间：2013-03-13T16:35:21.980
> 
> 标签：c, arrays, switch-statement

我对 C 相当陌生，我正在尝试使用 int 数组作为这样的开关的选项编号

```
void totalEntered(float * total, float * inputFigure)
{
    *total = *total + *inputFigure;
}

int main()
{
    float amountEntered = 0.00;
    float tot = 0.00;
    int option_numbers[3] = {1,2,3,4};
    float a_food = 0.00;
    float a_tab = 0.00;
    float a_trav = 0.00;
    float a_bill = 0.00;

    totalEntered(&tot, &amountEntered);

    printf("Please enter option number from below \n1.food\n2.tabacco\n3.travel\n4.bills\n");
    scanf("%i", option_numbers);
    switch(option_numbers)
    {
    case 1:
        printf("Please Enter an amount: ");
        scanf("%f", amountEntered);
        a_food = a_food + amountEntered;
        totalEntered(&tot, &amountEntered);
        printf("You have spent %f on food", a_food);
        break;
    case 2: /*ignore below haven't finish that*/
        a_tab = a_tab + amountEntered;
        printf("You have spent %.2f on tabacco", a_tab);
        break;
    case 3:
        a_trav = a_trav + amountEntered;
        printf("You have spent %.2f on travel", a_trav);
        break;
    case 4:
        a_bill = a_bill + amountEntered;
        printf("You have spent %.2f on travel", a_bill);
        break;
    default:
        printf("You have not input a category!");
        break;
    }
    return 0;

} 
```

任何人都可以建议如何解决这个问题......我有点卡住了！:DI 试图让用户选择一个 == 的数字，如果用户想在食物下输入一个金额，他/她必须选择选项 1，然后选择一个金额。希望这比以前更有意义！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:37:00.943

您不能将数组传递给`switch()`您需要传递数组中的元素之一：

```
int item = 2; // or whatever

switch(option_numbers[item])
{ 
```

* * *

编辑：
根据您的评论，如果您想接受用户输入并让他们选择 4 个选项之一，这非常简单，完全不需要数组。

```
int selection = -1;
printf("Which option do you want? (1-4): ");
scanf("%d", &selection);

switch(selection)
{ 
```

* * *

边注：

```
int option_numbers[3] = {1,2,3,4}; // that's not size 3, it's got 4 elements should 
                                   // have been:
                                   // int option_numbers[4] = {1,2,3,4}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:51:03.787

你的问题不清楚，所以我会回答我认为你想问的问题。首先，使用 switch 语句的更好方法是使用枚举。我很讨厌解释，所以这是一个代码示例：（这是一个链接：[如何在 C 中定义枚举类型（枚举）？](https://stackoverflow.com/questions/1102542/how-to-define-an-enumerated-type-enum-in-c)）

```
typedef enum { Food, Tobacco, Travel, Bills } Options; 
```

大致（非常，非常大致）相当于：

```
int Food = 0;
int Tobacco = 1;
int Travel = 3;
int Bills = 4; 
```

所以在 switch 语句中使用它的一个非常简单的方法是：

在你的 main() 之前的某个地方：

```
typedef enum { Food, Tobacco, Travel, Bills } Options; 
```

然后在你的 main() 中：

```
Options myOption; // just as an example
printf("Pick your expense thingy (0, 1, 2, 3): ");
scanf("%d", &myOption);

switch (myOption) { // Now remember that Food = 0, Tobacco = 1 ...
    case Food: // food == 0
        // do food stuff
        break;

    case Tobacco:
        // do Tobacco stuff
        break;

    case Travel:
        // do Travel stuff
        break;

    case Bills:
        // do Bills stuff
        break;
} 
```

--- 编辑 --- （2013 年 3 月 14 日......哦，哇，今天是圆周率日！）

好吧，当我今天早上打开电脑时，我突然想到了另一种方法可以做到这一点......你可以利用字符只是伪装的 1 字节数字这一事实；）......它更好，因为它没有t 依赖 scanf （我不太喜欢 scanf 哈哈）：

```
char input;

printf("Pick your expense thingy (_f_ood, _t_obacco, t_r_avel, _b_ills): ");
input = getchar(); // this function just gets a char off of stdin and returns it

switch(input) {
    case 'f': case 'F': // note the single quotes, this tells the compiler that it is a single character and not a null terminated string
        // do food stuff
        break;

    case 't': case 'T': // we use both letters so that our comparisons are case-insensitive
        // do tobacco stuff
        break;

    case 'r': case 'R': // use r for travel because its the easiest way to differentiate the input
        // do travel stuff
        break;

    case 'b': case 'B': // so yeah...
        // do bills stuff
        break;

    default:
        printf("That was not a valid option :(");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:37:10.303

您正在尝试打开一个包含所有数字的数字数组。您应该对 int 变量进行切换，并分配一个特定的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:44:40.047

```
int option_numbers[] = {1,2,3,4};
int i;

for (i = 0; i < sizeof(option_numbers)/sizeof(int); ++i)
{
    switch(option_numbers[i])
    {
        ....
    }
} 
```

您可以根据需要更改上索引边界。

# ios - 将 JSON 响应与字符串进行比较

> ID：15391183
> 
> 赞同：2
> 
> 时间：2013-03-13T16:35:31.780
> 
> 标签：ios, objective-c, json

所以我的 iOS 应用程序将数据（json）发送到服务器，如果一切顺利，服务器会发回一个 json 响应`{"status":"ok"}`。我在想我不需要真正解析这个响应，因为它只是一个确认，所以我可以将我得到的响应与一个静态比较，`NSString`这将是`"status":"ok"`.

我想要的字符串有一个引号这一事实使我很难将我的响应数据与这个字符串进行比较。

我确信有一种方法可以做我想做的事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:42:36.183

可能不是你想要的答案。在某些时候，您会想要执行以下操作之一：

*   在响应中添加一个新字段以支持新的应用程序版本（可能是 pid 或 nonce）
*   更改服务器端代码以使用新的 JSON 编码器（可能具有不同的空白行为）
*   状态不正常时添加错误消息

发生这种情况时，您的应用程序的所有旧版本都会阻止您这样做。取而代之的是，今天正确地进行解析，以在将来为自己买平安。NSJSONSerialization 易于使用，并且会快速解析处理上述每种情况的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:39:59.837

我想您是在问如何在字符串中包含双引号？

[如何转义字符串中的双引号？](https://stackoverflow.com/questions/1352323/how-to-escape-double-quotes-in-string)

在类 C 语言中转义字符的标准方法是使用反斜杠，因此您需要将结果与 string 进行比较`"{\"status\":\"ok\"}"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:41:19.633

您只是在问如何在 Objective-C 字符串中包含文字引号？

```
if ([returnedText isEqualToString:@"{\"status\":\"ok\"}"]) {
    // success!
} else {
    // failure :-(
} 
```

当然，你应该*非常*确定你只会得到这个*确切的*字符串......特别是，你能确保你返回的 JSON 不会包含任何你不期望的空格吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-25T17:26:54.967

正如@DrC 在他/她的[回答](https://stackoverflow.com/a/15391333/1071320)中提到的，在比较两个 JSON 字符串时，正确的做法是将 JSON 字符串解析为具有[JSONSerialization](https://developer.apple.com/documentation/foundation/jsonserialization)类的 Foundation 对象，然后比较生成的 Foundation 对象。这种方法解决了两个 JSON 字符串格式略有不同或字段顺序不同的问题。因此，例如，重要的是`"{\"a\":1,\"b\":2}"`和`"{\"b\":2,\"a\":1}"`被认为是相等的，因为它们在逻辑上是相等的。

这是我整理的一个 Swift 函数，有助于进行比较：

```
class JSONAssert {

    class func assertEquals(expected: String, actual: String) {

        let expectedData = Data(expected.utf8)
        let actualData = Data(actual.utf8)

        let expectedObject: Any
        let actualObject: Any

        do {
            expectedObject = try JSONSerialization.jsonObject(with: expectedData, options: [])
        } catch {
            XCTFail("Failed constructing a Foundation object from `expected` (i.e. \(expected)): \(error)")
            return
        }

        do {
            actualObject = try JSONSerialization.jsonObject(with: actualData, options: [])
        } catch {
            XCTFail("Failed constructing a Foundation object from `actual` (i.e. \(actual)): \(error)")
            return
        }

        guard let expectedDictionary = expectedObject as? NSDictionary else {
            XCTFail("Failed casting expected object (i.e. \(expectedObject)) to an NSDictionary")
            return
        }

        guard let actualDictionary = actualObject as? NSDictionary else {
            XCTFail("Failed casting actual object (i.e. \(actualObject)) to an NSDictionary")
            return
        }

        XCTAssertEqual(expectedDictionary, actualDictionary)
    }
} 
```

# ios - 收费桥过度释放

> ID：15391184
> 
> 赞同：0
> 
> 时间：2013-03-13T16:35:32.530
> 
> 标签：ios, automatic-ref-counting, core-foundation

我最近将一个庞大的库迁移到 ARC，无工具部分令人头疼。这是代码：

```
+ (NSString *)getKeychainItem:(NSString *)identifier
{
    NSString *fullIdentifier = [NSString stringWithFormat:@"%@%@", kIdentifierPrefix, identifier];

    NSMutableDictionary *queryKeychain;
    OSStatus status = noErr;

    queryKeychain = [NSMutableDictionary dictionary];

    // Set the public key query dictionary.
    [queryKeychain setObject:(__bridge id)kSecClassGenericPassword
                      forKey:(__bridge id)kSecClass];

    // Get the key.
    CFDataRef data;
    CFDictionaryRef queryKeychainCF = (__bridge CFDictionaryRef)queryKeychain;
    status = SecItemCopyMatching(queryKeychainCF, (CFTypeRef *)&data);

    NSData *passwordData = (__bridge_transfer NSData *)data;

    NSString *password;

    if (status == noErr)
    {
        password = [[NSString alloc] initWithBytes:[passwordData bytes]
                                            length:[passwordData length]
                                          encoding:NSUTF8StringEncoding];

    }
    else if (status != errSecItemNotFound)
    {
        NSLog(@"Error getting keychain item %@ -- OSStatus: %lu", identifier, status);
    }

    return password;
} 
```

这应该很简单，但是，passwordData 对象被过度释放，我不知道为什么，堆栈跟踪是[this](http://i.imgur.com/ejabeVJ.png)。如果我只是设置`passwordData`并且`nil`不执行`__bridge__transfer`，它不会崩溃。关于为什么的任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:43:43.167

我自己没用过`__bridge_transfer`，但是如果你把“passwordData”改成这样：

```
NSData *passwordData = (NSData *)data; 
```

XCode 给你两个建议。

不要转让所有权（核心基金会必须释放它）：

```
NSData *passwordData = (__bridge NSData *)data; 
```

转让所有权（ARC 接管）：

```
NSData *passwordData = (NSData *)CFBridgingRelease(data); 
```

`__bridge_transfer`可能是同一件事，但我在使用该`CFBridgingRelease`调用时没有遇到任何问题，这是 XCode 推荐的。

将任何内容设置为 nil 实际上不会释放任何内容，除非 ARC 正在管理内存。你永远不想将一个 Core Foundation 对象设置为 nil，除非你已经用 Core Foundation 明确地释放了它，或者将所有权转移给了 ARC。

您可以选择的另一个选择是`CFRelease(data)`在您返回之前使用普通的`__bridge`.

这一切都是基于这样的假设，`SecItemCopyMatching`即为您提供数据的副本并排除您发布它的情况。`New`并且`Copy`是通常表明这一点的关键字。您可以通过`CFGetRetainCount(data)`在不同点使用来验证计数来进一步调试。

我还注意到 fullIdentifier 没有被使用。这是整个功能吗？

您也可以使用`initWithData:encoding:`代替`initWithBytes:length:encoding`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:43:50.050

您需要强制`CFDataRef` 转换才能`NSData`尝试使用

```
 NSData *passwordData = (NSData *)data; 
```

或者只是使用桥而不转移所有权

```
NSData* passwordData = (__bridge NSData*) data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:29:10.397

原来问题完全出在另一个对象上，附上正确的代码：

```
CFDictionaryRef queryKeychainCF = (__bridge_retained CFDictionaryRef)queryKeychain;
status = SecItemCopyMatching(queryKeychainCF, (CFTypeRef *)&data);   
NSData *passwordData = (__bridge_transfer NSData *)data; 
```

在尝试了所有解决方案后，开始阅读`SecItemCopyMatching`ARC 下方法的错误并得到这个[答案](https://stackoverflow.com/questions/7663443/sfhfkeychainutils-ios-keychain-arc-compatible)。

# iphone - 如何更改或禁用 AudioSessionInterruptionListener

> ID：15391188
> 
> 赞同：1
> 
> 时间：2013-03-13T16:35:52.520
> 
> 标签：iphone, cocoa-touch, core-audio, interrupt, audiosession

我需要一种在 AudioSession 初始化后更改或禁用 AudioSessionInterruptionListener 的方法。

原因如下：在某些用例中，我的应用程序必须在后台运行并进行录音，因此设置了音频背景模式 - 这很有效。当发生呼叫或其他中断时，我必须通知其他一些对象干净地停止录制 - 这很有效。然后，当应用程序使用我调用的 AudioSession 完成时`AudioSessionSetActive(false);`- 这有效（如果应用程序在会话处于活动状态的情况下发送到后台，我会在顶部看到红色条，如果会话处于非活动状态，则不会出现红色条。虽然，我猜，从技术上讲，该应用程序仍处于“活动”后台模式）。

然而！如果我完成了录制，并且应用程序已经发送到后台并且音频会话已经被停用，如果有来电，或者如果 Siri 被激活，那么我的应用程序仍然会收到 AudioSessionInterruptionListener 回调。是的，我可以添加代码来测试我的应用程序当前是否应该响应中断。但是，我认为这是一个错误。如果我已停用 AudioSession，则应停止调用中断，实际上应停止调用所有音频会话/属性侦听器。

如何更改或禁用 AudioSessionInterruptionListener？或者用另一种方式来问这个问题，我怎样才能防止我的应用在不需要时“使用”后台模式？

**附加信息**

好的，似乎在 iOS 6 中现在有 NSNotifications for AudioSession interrupts:`AVAudioSessionDidBeginInterruptionNotification`和`AVAudioSessionDidEndInterruptionNotification`. 但是，我支持 iOS 5.1 及更高版本，所以这无济于事。我发现新通知的同一个文档说，Obj-C 接口 AVAudioSession 的委托属性已被贬低（在 IOS 6 中），所以我可能不应该使用它来设置/更改委托（并获取 Obj -C 中断回调）。

我想一个可能的解决方法是测试 iOS 版本并在 <6.0 中设置和取消设置委托，然后在 6.0+ 中侦听 NSNotifications（不会出现在 <6.0 中，因此不应该中断）。然而，这似乎是一个杂牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T02:34:39.687

完成后，您是否尝试过调用 AudioSessionInitialize 并将 NULL 传递给 AudioSessionInterruptionListener（即将处理中断的函数）？

界面如下：

```
 OSStatus AudioSessionInitialize (
       CFRunLoopRef                      inRunLoop,
       CFStringRef                       inRunLoopMode,
       AudioSessionInterruptionListener  inInterruptionListener,
       void                              *inClientData
); 
```

该文档明确指出：

> 在进行任何其他音频会话服务调用之前，您的应用程序必须调用此函数。您可以根据需要激活和停用音频会话（请参阅 AudioSessionSetActive），但应该只初始化一次。

# jsf - PrimeFaces Socket 是如何工作的？

> ID：15391190
> 
> 赞同：0
> 
> 时间：2013-03-13T16:35:57.903
> 
> 标签：jsf, web-applications, jsf-2, primefaces

我的代码：

```
<p:socket channel="/allposts/#{uview.user.uid}">
 <p:ajax event="message" async="true" listener="#{uview.go}" update="xout"/>
</p:socket> 
```

#1。uview 指的是视图范围的 bean。一切，包括更新，除了侦听器方法外都有效。永远不会调用侦听器方法。即使我将侦听器的值更改为不存在的方法，它也不会报告任何错误。知道为什么它不起作用吗？

我在以下代码片段中注意到的另一件事[涉及动态 id]：

```
<p:socket channel="/allposts/#{uview.user.uid}">
<p:ajax event="message" async="true" listener="#{uview.go}" update="#{uview.user.uid}"/>
</p:socket> 
```

在这里，它报告错误，指出找不到具有指定 id 的 id [显示错误消息中的 id]。即使有一个具有该 id 的元素，它也无法找到它。这当然不是命名容器引用的问题。

发生这种情况是因为 Primeface 套接字甚至在 JSF 呈现页面 [动态部分] 之前就已初始化，这就是它找不到动态 id 的原因？？？

#2。正如我从 Pimeface Demo page 中了解到的，在 JSF 中实现聊天应用程序需要使用动态 id 更新元素。我在实现primeface套接字时会出错吗？还有其他方法可以更优雅地实现它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-16T21:18:11.750

> uview 指的是视图范围的 bean。一切，包括更新，除了侦听器方法外都有效。永远不会调用侦听器方法。即使我将侦听器的值更改为不存在的方法，它也不会报告任何错误。知道为什么它不起作用吗？

这是一个错误。我找到了以下解决方法：像这样的代码

```
<p:socket channel="/channel">
    <p:ajax event="message"
            listener="#{controller.yourListenerMethod}"
            update=":form:table" />
</p:socket> 
```

用。。。来代替：

```
<p:socket onMessage="handleMessage" channel="/channel" />
<script type="text/javascript">
    function handleMessage(data) {
        updateWidgets();
    }
</script>

<p:remoteCommand name="updateWidgets"
                 actionListener="#{controller.yourListenerMethod}"
                 update=":form:table" /> 
```

# javascript - HTML 5 的 data 属性未定义

> ID：15391194
> 
> 赞同：2
> 
> 时间：2013-03-13T16:36:05.987
> 
> 标签：javascript, jquery, html

在我的 JSP 中，在头部，我有这个：

```
<script type="text/javascript">
    $(document).ready(function() {
        var labelfooter = jQuery("#myId").data("mylabel");
        var htmlContent = labelfooter +" society ";
        var divContent = jQuery("#myId");
        divContent.text(htmlContent);
    });
</script> 
```

然后，在身体部分，我有：

```
<div id="myId" data-mylabel="Hello" ></div> 
```

结果，在浏览器中，我得到“未定义的社会”而不是“你好社会”

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:07:03.470

这里的问题是您的名字中有一个大写字母。这在 jQuery 选择器中意味着不同的东西。修复它的两种方法。

**HTML**

```
<div id="d1" data-fooBar="asdf1"></div>
<div id="d2" data-foo-bar="asdf2"></div> 
```

**JavaScript**

```
var x1 = $("#d1").data("foobar"); //selects the camel case one
var x2 = $("#d2").data("fooBar"); //looks for the dash 
```

**例子**

[JSFiddle 示例](http://jsfiddle.net/FjVXW/)

# oracle - 关于优化在大量数据上执行的 Oracle SQL 查询的建议/技巧

> ID：15391195
> 
> 赞同：0
> 
> 时间：2013-03-13T16:36:10.183
> 
> 标签：oracle, oracle11g, query-optimization, sql-optimization

不要在看到下面的 Oracle SQL 查询后立即运行！:)

我把完整的查询放在 orderrer 中询问一些关于优化的建议。我使用 Oracle 解释计划工具来帮助我确定一些优化方法，但我非常坚持。你能给我一些关于这个查询的潜在优化的建议/提示/良好做法/吗？

事实：

*   PERSONNE 和 AFFAIRE 表包含大约 100 万行
*   表 EVENEMENT 包含大约 3000 万行

提前致谢 ！

```
SELECT COUNT(*) 
FROM(
    (SELECT DISTINCT PER_ID 
        FROM (
            SELECT evt.PER_ID, MAX(evt.EVT_DATE_UPDATE) DMAX 
            FROM EVENEMENT evt, PERSONNE per
            WHERE per.PER_ID = evt.PER_ID 
                    AND (per.PER_SI_DECES <> 1) 
            GROUP BY evt.PER_ID) dos
        WHERE NOT EXISTS (
                    SELECT 1 
                    FROM AFFAIRE aff, PRISE_EN_CHARGE pec
                    WHERE dos.PER_ID = aff.PER_ID 
                            AND aff.AFF_ID = pec.AFF_ID 
                            AND pec.PEC_ETAT = 'A')
            AND DMAX < ADD_MONTHS(SYSDATE,-60)
    )
    UNION
    (SELECT per.PER_ID 
        FROM PERSONNE per 
        WHERE per.PER_SI_DECES = 1
            AND NOT EXISTS (
                        SELECT 1 
                        FROM AFFAIRE aff, PRISE_EN_CHARGE pec
                        WHERE per.PER_ID = aff.PER_ID 
                                AND aff.AFF_ID = pec.AFF_ID 
                                AND pec.PEC_ETAT = 'A') 
                                AND EXISTS (
                                        SELECT 1 
                                        FROM AFFAIRE aff 
                                        WHERE per.PER_ID = aff.PER_ID)
    )
)
WHERE PER_ID NOT IN (
                    (SELECT pdo.PER_ID
                        FROM PERSONNE_DOSSIER pdo, EVENEMENT evt 
                        WHERE pdo.ROP_ID = 1
                            AND evt.PDO_ID = pdo.PDO_ID 
                            AND evt.PER_ID <> pdo.PER_ID
                    )
                    UNION
                    (SELECT pdo.PER_ID
                        FROM PERSONNE_DOSSIER pdo, DESTINATAIRE_EVENEMENT des, EVENEMENT evt 
                        WHERE pdo.ROP_ID = 1
                            AND des.PDO_ID = pdo.PDO_ID 
                            AND des.EVT_ID = evt.EVT_ID
                            AND evt.PER_ID <> pdo.PER_ID)
                    UNION
                    (SELECT dgi.PER_ID
                        FROM DEMANDE_GIDE dgi, AFFAIRE aff 
                        where aff.AFF_ID = dgi.AFF_ID 
                                and aff.PER_ID <> dgi.PER_ID)
); 
```

这是相应的解释计划：

```
----------------------------------------------------------------------------------------------------------
| Id  | Operation                          | Name                   | Rows  | Bytes |TempSpc| Cost (%CPU)|
----------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                   |                        |     1 |    13 |       |   194K  (1)|
|   1 |  SORT AGGREGATE                    |                        |     1 |    13 |       |            |
|*  2 |   FILTER                           |                        |       |       |       |            |
|   3 |    VIEW                            |                        |  1309 | 17017 |       |   192K  (1)|
|   4 |     SORT UNIQUE                    |                        |  1309 | 35344 |       |   192K (24)|
|   5 |      UNION-ALL                     |                        |       |       |       |            |
|*  6 |       FILTER                       |                        |       |       |       |            |
|   7 |        HASH GROUP BY               |                        |     1 |    28 |       |   149K  (1)|
|*  8 |         HASH JOIN RIGHT ANTI       |                        |  1021K|    27M|    12M|   149K  (1)|
|   9 |          VIEW                      | VW_SQ_1                |   756K|  4433K|       | 26286   (1)|
|* 10 |           HASH JOIN                |                        |   756K|    14M|    14M| 26286   (1)|
|* 11 |            INDEX FAST FULL SCAN    | IDX_PEC_AFF_SER_ETAT   |   756K|  5910K|       |  4080   (3)|
|  12 |            TABLE ACCESS FULL       | AFFAIRE                |  3146K|    36M|       | 17884   (1)|
|* 13 |          HASH JOIN                 |                        |  3648K|    76M|  2560K|   115K  (1)|
|* 14 |           TABLE ACCESS FULL        | PERSONNE               |   130K|  1021K|       | 14179   (2)|
|  15 |           TABLE ACCESS FULL        | EVENEMENT              |    29M|   391M|       | 65035   (2)|
|* 16 |       HASH JOIN SEMI               |                        |  1308 | 35316 |       | 43080   (1)|
|* 17 |        HASH JOIN ANTI              |                        |  1308 | 27468 |  2560K| 41493   (1)|
|* 18 |         TABLE ACCESS FULL          | PERSONNE               |   130K|  1021K|       | 14179   (2)|
|  19 |         VIEW                       | VW_SQ_2                |   756K|  9605K|       | 26286   (1)|
|* 20 |          HASH JOIN                 |                        |   756K|    14M|    14M| 26286   (1)|
|* 21 |           INDEX FAST FULL SCAN     | IDX_PEC_AFF_SER_ETAT   |   756K|  5910K|       |  4080   (3)|
|  22 |           TABLE ACCESS FULL        | AFFAIRE                |  3146K|    36M|       | 17884   (1)|
|  23 |        INDEX FAST FULL SCAN        | FK_PER_AFF             |  3146K|    18M|       |  1572   (2)|
|  24 |    SORT UNIQUE                     |                        |     6 |   171 |       |  1757 (100)|
|  25 |     UNION-ALL                      |                        |       |       |       |            |
|  26 |      NESTED LOOPS                  |                        |       |       |       |            |
|  27 |       NESTED LOOPS                 |                        |     2 |    46 |       |     8   (0)|
|* 28 |        TABLE ACCESS BY INDEX ROWID | PERSONNE_DOSSIER       |     1 |    15 |       |     4   (0)|
|* 29 |         INDEX RANGE SCAN           | FK_PER_PDO             |     1 |       |       |     3   (0)|
|* 30 |        INDEX RANGE SCAN            | FK_EVT_PDO             |     2 |       |       |     2   (0)|
|* 31 |       TABLE ACCESS BY INDEX ROWID  | EVENEMENT              |     2 |    16 |       |     4   (0)|
|  32 |      NESTED LOOPS                  |                        |       |       |       |            |
|  33 |       NESTED LOOPS                 |                        |     3 |   108 |       |    16   (0)|
|  34 |        NESTED LOOPS                |                        |     3 |    72 |       |    10   (0)|
|* 35 |         TABLE ACCESS BY INDEX ROWID| PERSONNE_DOSSIER       |     1 |    15 |       |     4   (0)|
|* 36 |          INDEX RANGE SCAN          | FK_PER_PDO             |     1 |       |       |     3   (0)|
|  37 |         TABLE ACCESS BY INDEX ROWID| DESTINATAIRE_EVENEMENT |     3 |    27 |       |     6   (0)|
|* 38 |          INDEX RANGE SCAN          | FK_DVT_PDO             |     3 |       |       |     2   (0)|
|* 39 |        INDEX UNIQUE SCAN           | PK_EVENEMENT           |     1 |       |       |     1   (0)|
|* 40 |       TABLE ACCESS BY INDEX ROWID  | EVENEMENT              |     1 |    12 |       |     2   (0)|
|  41 |      NESTED LOOPS                  |                        |       |       |       |            |
|  42 |       NESTED LOOPS                 |                        |     1 |    17 |       |  1730   (2)|
|* 43 |        TABLE ACCESS FULL           | DEMANDE_GIDE           |     1 |     5 |       |  1728   (2)|
|* 44 |        INDEX UNIQUE SCAN           | PK_AFFAIRE             |     1 |       |       |     1   (0)|
|* 45 |       TABLE ACCESS BY INDEX ROWID  | AFFAIRE                |     1 |    12 |       |     2   (0)|
----------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter( NOT EXISTS ( (SELECT "PDO"."PER_ID" FROM "EVENEMENT" "EVT","PERSONNE_DOSSIER" 
              "PDO" WHERE "PDO"."PER_ID"=:B1 AND "PDO"."ROP_ID"=1 AND "EVT"."PDO_ID"="PDO"."PDO_ID" AND 
              "EVT"."PER_ID"<>:B2 AND "EVT"."PER_ID"<>"PDO"."PER_ID" AND "EVT"."PDO_ID" IS NOT NULL)UNION 
              (SELECT "PDO"."PER_ID" FROM "EVENEMENT" "EVT","DESTINATAIRE_EVENEMENT" "DES","PERSONNE_DOSSIER" 
              "PDO" WHERE "PDO"."PER_ID"=:B3 AND "PDO"."ROP_ID"=1 AND "DES"."PDO_ID"="PDO"."PDO_ID" AND 
              "DES"."PDO_ID" IS NOT NULL AND "DES"."EVT_ID"="EVT"."EVT_ID" AND "EVT"."PER_ID"<>:B4 AND 
              "EVT"."PER_ID"<>"PDO"."PER_ID")UNION (SELECT "DGI"."PER_ID" FROM "AFFAIRE" "AFF","DEMANDE_GIDE" 
              "DGI" WHERE "DGI"."AFF_ID" IS NOT NULL AND "DGI"."PER_ID"=:B5 AND "AFF"."AFF_ID"="DGI"."AFF_ID" 
              AND "AFF"."PER_ID"<>:B6 AND "AFF"."PER_ID"<>"DGI"."PER_ID")))
   6 - filter(MAX("EVT"."EVT_DATE_UPDATE")<ADD_MONTHS(SYSDATE@!,-60))
   8 - access("EVT"."PER_ID"="ITEM_1")
  10 - access("AFF"."AFF_ID"="PEC"."AFF_ID")
  11 - filter("PEC"."PEC_ETAT"='A')
  13 - access("PER"."PER_ID"="EVT"."PER_ID")
  14 - filter("PER"."PER_SI_DECES"<>1)
  16 - access("PER"."PER_ID"="AFF"."PER_ID")
  17 - access("PER"."PER_ID"="ITEM_2")
  18 - filter("PER"."PER_SI_DECES"=1)
  20 - access("AFF"."AFF_ID"="PEC"."AFF_ID")
  21 - filter("PEC"."PEC_ETAT"='A')
  28 - filter("PDO"."ROP_ID"=1)
  29 - access("PDO"."PER_ID"=:B1)
  30 - access("EVT"."PDO_ID"="PDO"."PDO_ID")
       filter("EVT"."PDO_ID" IS NOT NULL)
  31 - filter("EVT"."PER_ID"<>:B1 AND "EVT"."PER_ID"<>"PDO"."PER_ID")
  35 - filter("PDO"."ROP_ID"=1)
  36 - access("PDO"."PER_ID"=:B1)
  38 - access("DES"."PDO_ID"="PDO"."PDO_ID")
       filter("DES"."PDO_ID" IS NOT NULL)
  39 - access("DES"."EVT_ID"="EVT"."EVT_ID")
  40 - filter("EVT"."PER_ID"<>:B1 AND "EVT"."PER_ID"<>"PDO"."PER_ID")
  43 - filter("DGI"."AFF_ID" IS NOT NULL AND "DGI"."PER_ID"=:B1)
  44 - access("AFF"."AFF_ID"="DGI"."AFF_ID")
  45 - filter("AFF"."PER_ID"<>:B1 AND "AFF"."PER_ID"<>"DGI"."PER_ID") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:13:02.553

这里有很多可以说和问的事情。当 IS_DECES = 0 vs =1 等条件互斥时，请使用 UNION ALL 而不是 UNION。NOT IN 确保您没有使用 NULLable 列。尝试在 NOT IN 中检查 UNION 中的分隔部分，以便为索引访问提供更好的机会。并行查询应该在这里帮助你......

# c# - 编译时 SQL 语句语法检查？

> ID：15391196
> 
> 赞同：0
> 
> 时间：2013-03-13T16:36:12.470
> 
> 标签：c#, .net, sql, vb.net, orm

问题：

目前 C#/VB.NET 中编译时 SQL 语句语法检查的最佳轻量级选项是什么？

基本上，我想要的是在代码中创建一个 select/update/insert/delete 语句，这样我就可以进行编译时检查（所有列是否存在并且是否具有正确的名称等）。

**注意：**
它应该是轻量级的。我真的不想要像 nHibernate 或 EF 这样的完全成熟的 ORM，也不想要像 LINQ to SQL 这样的已弃用框架，而且它也不能在多个数据库上工作（并不是说它会成为劣势）。

我想要的是让一个程序在我的数据库上运行，它为所有表和视图创建一个类（比如一些用于 nhibernate 的工具），然后访问类字段而不是编写字符串，以便在编译时捕获错误而不是运行时。

我不想要的是必须在 XML 中手动映射事物，或者像 nHibernate 这样很慢的重量级事物，因为它做了很多我并不真正需要的额外事情。

到目前为止，我发现的唯一东西是本文中的 Indy.Data 和 C-Omega：http:
[//www.codeproject.com/Articles/10665/Extending-C-to-Support-SQL-Syntax-at-Compile-时间](http://www.codeproject.com/Articles/10665/Extending-C-to-Support-SQL-Syntax-at-Compile-Time)

# javascript - 如何测试触摸屏（不是“触摸能力”）？

> ID：15391202
> 
> 赞同：5
> 
> 时间：2013-03-13T16:36:27.383
> 
> 标签：javascript, google-chrome, modernizr, touchscreen, wacom

我正在开发一个为支持触摸的设备实现特定功能的网站。我的目标是针对智能手机、平板电脑以及实际上所有使用触摸屏作为主要输入的东西。

为了实现这一点，我正在使用 Modernizr 的`Modernizr.touch`

但是，这在装有 Wacom 数位板的计算机上的 chrome 上返回 true。（通过 Wacom Intuos 5 确认）。显然，这些计算机上的主要输入设备是键盘和鼠标，而不是触摸屏。这会产生误报，因为我想为这些计算机提供桌面 UX，而不是触摸屏 UX。

有没有办法检查“触摸屏功能”，而不是“触摸功能”？或者任何其他创造性的方法来解决这个问题并避免误报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:56:41.283

“单击或点击此框”的简单用户测试应该能够告诉您他们是否使用鼠标或某些触摸设备来完成操作。由于您可以获得设备的用户代理，对于平板电脑和手机，很容易通过这两个数据假设它们具有触摸功能......因此，如果您检测到也测试为阳性的桌面用户，您只能呈现“测试”对于触摸设备（应该比测试每个人的样本更小，这可能会让用户感到烦恼）。当然，我也会以某种方式记住用户的选择/测试结果，这样您就不必再次对它们进行错误处理。

# ios - 当我滑动删除时，表格单元格崩溃。获取错误的访问错误

> ID：15391203
> 
> 赞同：0
> 
> 时间：2013-03-13T16:36:31.390
> 
> 标签：ios, objective-c, crash, tableview

当我滑动删除时，我的表格视图上不断出现此错误，通用编辑按钮将其置于编辑模式，我可以用它很好地删除它，但如果我滑动一个单元格，它会崩溃并返回错误的访问错误。我假设某处存在一些数据对话错误，但我不明白。我可以使用编辑并点击单元格将其删除，但滑动会使它崩溃。我有这个创建表视图的视图控制器。继承人的代码：

在我的视图控制器中，我有以下代码：

```
-(void)viewWillAppear:(BOOL)animated
{
    [self controllerSetup];

}

-(void)controllerSetup
{

        firstController = [[TeacherSplitTableController alloc] initWithStyle:UITableViewStyleGrouped];
        [firstTable setDataSource:firstController];
        [firstTable setDelegate:firstController];
        firstController.view = firstController.tableView;
        [firstController setDelegate:self];
        [self tableSetUp];

}

-(IBAction)edit:(id)sender
{
    if (!editting) {
            editting = YES;
            self.navigationItem.hidesBackButton = YES;
        self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(Add:)];
        //Displays add button over the back button
            [self.firstTable setEditing:YES animated:YES];
    } else {
            editting = NO;
            self.navigationItem.hidesBackButton = NO;
        self.navigationItem.leftBarButtonItem = NO;
            [self.firstTable setEditing:NO animated:YES];
    }

} 
```

Teachersplittablecontroller 代码在这里：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source

        [self openDB];
        NSString *sql = [NSString stringWithFormat:@"DELETE FROM Children WHERE Name = '%@' ",[listofnames objectAtIndex:indexPath.row]]; //Queries table for the childs name and returns more data.
        sqlite3_stmt *statement;
        if (sqlite3_prepare_v2(Childdb, [sql UTF8String], -1, &statement, nil)==SQLITE_OK){
                    while (sqlite3_step(statement)==SQLITE_ROW) {
                    }
        }

        [listofnames removeObjectAtIndex:indexPath.row];
        [listoftickets removeObjectAtIndex:indexPath.row];
        //[theDataObject.names removeObjectAtIndex:indexPath.row];
        //[theDataObject.totaltickets removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [self setEditing:editing animated:YES];

} 
```

试图使代码保持苗条并与问题相关。如果您需要更多代码，请询问。但我看不到问题:(感谢所有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:40:53.733

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [self setEditing:editing animated:YES];
} 
```

在我看来，这是一个不错的无限循环。

在应用程序崩溃之前是否有一些计算时间？如果没有 - 你是否启用了僵尸？

# android - 为什么启动器显示应用程序 icos 比本机启动器大（基于 android 4.2.2 源构建）

> ID：15391204
> 
> 赞同：0
> 
> 时间：2013-03-13T16:36:33.850
> 
> 标签：android, launcher

我在 android 4.2.2 源代码上编译并构建了启动器。

我将它安装在我的 Nexus 4 上，我发现它们之间存在一些差异。

我看到了*Launcher*的代码，发现它覆盖了*onCreateOptionsMenu()*，但是本机启动器在启动器中没有菜单。

我在我构建的启动器上添加了一个快捷方式。 ico 比本机大。

并且本机应用程序比我构建的效率更高。

所以我有一些问题。

*   开源代码与原生应用构建源代码相同吗？

*   为什么“我的启动器”中的快捷方式图标更大？

*   原生启动器效率更高，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:39:30.100

添加：

```
<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="17" /> 
```

到您的清单文件。默认情况下缺少它，并导致启动器以某种兼容模式运行，从而使图标放大。

# c++ - 具有已知键数的字符串的完美哈希

> ID：15391205
> 
> 赞同：4
> 
> 时间：2013-03-13T16:36:38.033
> 
> 标签：c++, hash, perfect-hash

当要散列的元素数量已知时，是否有可能拥有从字符串到整数的完美散列函数？通过完美的哈希函数，我的意思是没有碰撞的机会。

基本上我正在从一个文件中读取多个表的签名（例如，id、name、address）。不同的表可能有共同的属性（例如名称），但在*不同的*位置（例如列）。我希望能够问这样的问题：table1 [“name”] 是什么？或表 2 [“名称”]。

更新：我更愿意自己学习而不是使用已经存在的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:39:43.720

请参阅[GNU gperf](http://www.gnu.org/software/gperf/)。

GNU gperf 是一个完美的散列函数生成器。对于给定的字符串列表，它以 C 或 C++ 代码的形式生成哈希函数和哈希表，用于根据输入字符串查找值。哈希函数是完美的，这意味着哈希表没有冲突，哈希表查找只需要单个字符串比较。

# html - 贝宝航运下拉默认方法

> ID：15391215
> 
> 赞同：1
> 
> 时间：2013-03-13T16:37:12.357
> 
> 标签：html, button, paypal, default, shipping

我在我的 PayPal 配置文件运输计算器中设置了 2 个运输选项，标准运输和取件。我希望 Standard 成为我的“立即购买”按钮的默认设置。在买家结账时的下拉菜单中，默认值为 Pickup（我有一个 $0 选项）。我找不到如何更改它，以便将 Standard 设置为默认值。（“取货”将是一个例外，应该有意选择。）是否有 HTML 行我可以放入按钮代码，或者我可以使用按钮“变量”来更改默认运输方式，这样它就不仅仅是跳上最便宜的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:12:07.897

如果您使用的是网站支付标准“立即购买”和“添加到购物车”按钮，则无法执行此操作。它默认为最便宜的可用选项。您可以设置默认运输的唯一方法是使用即时更新回调 API。这适用于使用购物车上传方法或使用 Express Checkout 设置默认运输。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/api/callback-api-operation-nvp)以及第 55 页的开发人员指南中[查看](https://www.x.com/sites/default/files/pp_nvpapi_developerguide.pdf)有关 API 的信息。以下是我有时用于测试的 PHP 回调脚本的简单示例，如果它有助于您更好地理解它。我不确定您将使用哪种语言编写脚本。

```
<?php

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req = "&$key=$value";
}

// Populate variables into local variables
$method = $_POST['METHOD'];
$version = $_POST['CALLBACKVERSION'];
$token = $_POST['TOKEN'];
$currencycode = $_POST['CURRENCYCODE'];
$localecode = $_POST['LOCALECODE'];
$street = $_POST['SHIPTOSTREET'];
$street2 = $_POST['SHIPTOSTREET2'];
$city = $_POST['SHIPTOCITY'];
$state = $_POST['SHIPTOSTATE'];
$country = $_POST['SHIPTOCOUNTRY'];
$zip = $_POST['SHIPTOZIP'];

// Setting shipping based on country first
// Then setting shipping based on state if the country is U.S.
// Echo response back to PayPal
if ($country == "US"){
    if ($state == "NE"){
    echo "METHOD=CallbackResponse&OFFERINSURANCEOPTION=true&L_SHIPPINGOPTIONNAME0=UPS&L_SHIPPINGOPTIONLABEL0=Ground&L_SHIPPINGOPTIONAMOUNT0=3.00&L_TAXAMT0=1.00&L_INSURANCEAMOUNT0=9.00&L_SHIPPINGOPTIONISDEFAULT0=true";
    }elseif ($state == "KS"){ 
    echo "METHOD=CallbackResponse&OFFERINSURANCEOPTION=true&L_SHIPPINGOPTIONNAME0=UPS&L_SHIPPINGOPTIONLABEL0=Ground&L_SHIPPINGOPTIONAMOUNT0=6.00&L_TAXAMT0=12.00&L_INSURANCEAMOUNT0=81.00&L_SHIPPINGOPTIONISDEFAULT0=true";
    }else{
    echo "METHOD=CallbackResponse&NO_SHIPPING_OPTION_DETAILS=1&CALLBACKVERSION=61";
    }
}elseif ($country == "CA"){
    echo "METHOD=CallbackResponse&NO_SHIPPING_OPTION_DETAILS=1&CALLBACKVERSION=61";
}else{
    echo "METHOD=CallbackResponse&OFFERINSURANCEOPTION=true&L_SHIPPINGOPTIONNAME0=UPS&L_SHIPPINGOPTIONLABEL0=Ground&L_SHIPPINGOPTIONAMOUNT0=10.00&L_TAXAMT0=2.00&L_INSURANCEAMOUNT0=2.00&L_SHIPPINGOPTIONISDEFAULT0=true";
}

?> 
```

# join - 连接三张表创建父子

> ID：15391219
> 
> 赞同：0
> 
> 时间：2013-03-13T16:37:18.633
> 
> 标签：join, parent-child, guid

本周我的任务是将数据库中的摘录转换为可在 sharepoint 中使用的内容（我的实际专长）

为此，我需要将 GUID (NEWID()) 分配给地址字段的 unqiue 元素。

我已将 RAW_CSV 表“分解”为 trans_area 和 trans_subarea，并且需要将 trans_area.area_guid 复制到 trans_subarea.subarea_pguid 它说明了子区域的父级。

在我写到这一点上使用了令人惊叹的大脑资源：

`SELECT DISTINCT area_guid FROM trans_area JOIN IBS_RAW_CSV ON trans_area.area_id = IBS_RAW_CSV.Area_id JOIN trans_subarea ON IBS_RAW_CSV.SubArea_Name = trans_subarea.subarea_name`

这给了我我正在寻找的 GUID，但我不相信我会沿着正确的道路前进。我真的很感激一个正确方向的指针。

我以前的数据库知识很多个月前在 LAMP 环境中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:29:57.130

好的，经过更多查看，我整理并调整为：

```
 UPDATE sa
SET sa.subarea_pguid = ta.[area_guid] 
FROM trans_area as ta
JOIN IBS_RAW_CSV AS ibs
ON ta.area_id = ibs.Area_id
JOIN trans_subarea AS sa 
ON ibs.SubArea_Name = sa.subarea_name 
```

哪个做的工作！

# ruby - 如何在 Ruby 中控制子进程标准输入、标准输出等？

> ID：15391222
> 
> 赞同：1
> 
> 时间：2013-03-13T16:37:42.547
> 
> 标签：ruby, process, fork, stdout, stdin

我正在构建一个小脚本，我想在其中启动用户的 shell，但将其重定向为标准输入和标准输出，以便我可以在代码上控制它们。这可能吗？我已经尝试过使用这段代码（虽然这可能是错误的）：

```
new_stdout, new_stdin = IO.pipe
pid = fork {
    $stdout.reopen new_stdin
    exec(ENV['SHELL'])
}

new_stdin.puts "Test"
Process.wait(pid) 
```

这只不过是启动一个新的 shell 实例。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:06:19.310

大概是这样的吧？

```
IO.popen 'sh', 'r+' do |io|
  io.puts 'echo how now brown cow | tr a-z A-Z'
  result = io.gets
  p [:result, result.size, result]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:03:02.007

如果您的程序需要简单性，您可以只使用[IO.pipe](http://www.ruby-doc.org/core-2.0/IO.html#method-c-pipe)或[Open3.popen3方法。](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3)对于高级用法，我在您可以参考的部分中的[认知项目中执行此操作，它妖魔化进程并使用 Ruby 1.9 的](https://github.com/Gurpartap/cognizant)[::Process::spawn在](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-spawn)[https](https://github.com/Gurpartap/cognizant/blob/master/lib/cognizant/process/execution.rb)手动收集其标准输入/输出/错误流： [//github.com/Gurpartap/cognizant/blob/master/lib/cognizant/process/execution.rb](https://github.com/Gurpartap/cognizant/blob/master/lib/cognizant/process/execution.rb)

# php - jQuery - 将变量传递给 PHP

> ID：15391223
> 
> 赞同：0
> 
> 时间：2013-03-13T16:37:52.287
> 
> 标签：php, jquery, ajax

我正在尝试使用 AJAX 将 jQuery 变量传递给 PHP，但它似乎没有传递。出于测试目的，我有以下内容：

查询：

```
 var runin_pickup = 1200;

            // Send to our checkRuninTariff function
            checkRuninTariff(runin_pickup); 
```

`

```
function checkRuninTariff(runin_pickup) {

$.ajax({

         // Request sent from control panel, so send to cp.request.php (which is the handler)
        url: 'scripts/php/bootstrp/all.request.php',
        type: 'POST',

        // Build data array - look at the '$_REQUEST' parameters in the 'insert' function
        data: 'fnme=runIn&field_runin_p='+runin_pickup,
        dataType: 'text',
        timeout: 20000,
        error: function(){
                alert("There was a problem...")
        },
        success: function(){
                alert(runin_pickup+' passed successfully')
        }
    });

} 
```

这被传递给 all.request.php：

```
<?php

include('../../../deployment.php');
require_once('controllers/xml.controller.php');
require_once('controllers/tariff.fare.controller.php');
require_once('controllers/datagrid.controller.php');
require_once('controllers/get.bookings.php');

// Switch to determine method to call
switch ($_REQUEST['fnme']) {

case 'runIn':
header('Content-type: text/html');
echo TariffFareController::getFare($_REQUEST['field_runin_p']);
break;

case 'g_fare':

header('Content-type: text/html');

echo TariffFareController::fareRequestHandler($_REQUEST['v_sys'],$_REQUEST['j_dis'],$_REQUEST['pc_arr'],
    $_REQUEST['leg_arr'],$_REQUEST['return_j'],$_REQUEST['j_date'],$_REQUEST['j_time'],
    $_REQUEST['r_date'],$_REQUEST['r_time'],$_REQUEST['wait_return_j']);

break;
} 
```

最后是关税.fare.controller.php：

```
public static function getFare($int_terminate,$fieldPickup) {

        if($fieldPickup > 1100) {

            $fare = 222.00;
        }
        else {
        $fare = 111.00;
        }

} 
```

在萤火虫控制台中，我可以看到`field_runin_p = 1200`

但是，如果我执行 var_dump($fieldPickup); 当它应该是 NULL 时，它是 NULL `1200`。任何想法为什么这不起作用？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:42:08.443

您的函数需要两个参数：

`getFare($int_terminate, $fieldPickup)`

但是，您的代码仅通过一个（并且它与您期望的 var 不匹配）：

`echo TariffFareController::getFare($_REQUEST['field_runin_p']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:47:55.740

您正在尝试从您的 PHP 发送 html -`header('Content-type: text/html');`但您告诉您的 javascript 期待纯文本 -`dataType: 'text',`

改为使用`header('Content-type: text/plain');`。

其他海报指出了您的脚本的其他问题。

我还建议不要使用`$_REQUEST`您的数据，因为您的数据可能来自 GET 或 POST 参数，而您不知道是哪个。

# java - 具有特定开始时间的 Quartz 单个作业多个触发器不起作用

> ID：15391224
> 
> 赞同：1
> 
> 时间：2013-03-13T16:37:55.143
> 
> 标签：java, quartz-scheduler

我正在尝试编写一个简单的程序，它在特定日期时间运行相同的作业，输入文件中的日期时间列表，这是我的代码：

```
SchedulerFactory schedFact = new org.quartz.impl.StdSchedulerFactory();
Scheduler sched = schedFact.getScheduler();

sched.start();

Map<JobDetail, List<Trigger>> jobAndTriggers = new HashMap<JobDetail, List<Trigger>> ();
List<Trigger> triggers = new ArrayList<Trigger> ();
JobDetail jobDetail = newJob (TestJob.class)
    .withIdentity(Constants.TEST_JOB_PREFIX, onstants.TEST_JOB_GRUOP_PREFIX)
    .build();

Trigger trigger = null;
int triggerIndex = 1;

for (Date date : dates) {
    trigger = newTrigger ()
       .withIdentity(Constants.SIMPLE_TRIGGER_PREFIX + triggerIndex, Constants.SIMPLE_TRIGGER_GROUP_PREFIX)
       .startAt(date)
       .withSchedule(simpleSchedule().withRepeatCount(0))
       .build();

   triggers.add(trigger);
}
jobAndTriggers.put(jobDetail, triggers);

sched.scheduleJobs (jobAndTriggers, true); 
```

现在，当程序运行时，假设我传递了一个日期时间列表，例如：2013-03-13 12:21:33 | 2013-03-13 12:21:37 | 2013-03-13 12:22:41 | 2013-03-13 12:22:45 | 2013-03-13 12:23:49 |

这项工作只会被解雇一次，这是最后一个时间戳，我不确定我做错了什么，感谢任何帮助。以下是部分程序日志：

```
12:19:33.265 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
12:19:33.265 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.1.7
12:19:33.265 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
12:19:33.265 [DefaultQuartzScheduler_QuartzSchedulerThread] DEBUG o.quartz.core.QuartzSchedulerThread - batch acquisition of 0 triggers
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - Triggers created:
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - SIMPLE_TRIGGER_GROUP.SIMPLE_TRIGGER1 which will fire job at 2013-03-13 12:21:33
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - SIMPLE_TRIGGER_GROUP.SIMPLE_TRIGGER1 which will fire job at 2013-03-13 12:21:37
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - SIMPLE_TRIGGER_GROUP.SIMPLE_TRIGGER1 which will fire job at 2013-03-13 12:22:41
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - SIMPLE_TRIGGER_GROUP.SIMPLE_TRIGGER1 which will fire job at 2013-03-13 12:22:45
12:19:33.265 [main] DEBUG c.s.r.s.s.TriggerAndJobBuilder - SIMPLE_TRIGGER_GROUP.SIMPLE_TRIGGER1 which will fire job at 2013-03-13 12:23:49
12:19:33.265 [DefaultQuartzScheduler_QuartzSchedulerThread] DEBUG o.quartz.core.QuartzSchedulerThread - batch acquisition of 1 triggers
12:19:34.109 [Timer-0] DEBUG org.quartz.utils.UpdateChecker - Checking for available updated version of Quartz...
12:19:34.265 [Timer-1] DEBUG org.quartz.utils.UpdateChecker - Checking for available updated version of Quartz...
12:19:49.265 [DefaultQuartzScheduler_QuartzSchedulerThread] DEBUG o.q.simpl.PropertySettingJobFactory - Producing instance of Job 'TEST_GROUP.TEST_PING_JOB', class=com.test.TestJob
12:19:49.265 [DefaultQuartzScheduler_QuartzSchedulerThread] DEBUG o.quartz.core.QuartzSchedulerThread - batch acquisition of 0 triggers
12:23:49.265 [DefaultQuartzScheduler_Worker-1] DEBUG org.quartz.core.JobRunShell - Calling execute on job TEST_GROUP.TEST_PING_JOB
12:23:49.265 [DefaultQuartzScheduler_Worker-1] INFO  c.s.r.s.s.TestJob - Entered TestJob execute method at 2013-03-13 12:23:49 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T19:41:16.597

也许您一直在为所有触发器分配相同的标识符，因此它是实际考虑的最后一个。

```
triggerIndex = 1;
`Constants.SIMPLE_TRIGGER_PREFIX + triggerIndex` 
```

将此更改为独特的内容，您在列表中发送的每个日期都会有不同的触发器。

# ios - UISearchBar 在重新加载 UICollectionView 的数据后失去第一响应者

> ID：15391226
> 
> 赞同：4
> 
> 时间：2013-03-13T16:37:59.170
> 
> 标签：ios, uisearchbar, uicollectionview

我在 iPad 应用程序中有一个集合视图，并想添加搜索功能。集合视图的数据源由 nsfetchedresult 控制器提供。

我将 UISearchBar 放在位于窗口下部的 UIToolBar 中。当用户点击搜索栏时，我动画整个工具栏的移动以及键盘的外观，以保持工具栏（以及因此，搜索栏）可见。当用户在搜索栏中输入时，我实现了以下方法：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    if (searchText && searchText.length){
        NSPredicate *searchPredicate = [NSPredicate predicateWithFormat:@"name contains[cd] %@", searchText];
        [NSFetchedResultsController deleteCacheWithName:nil];
        [self.fetchedResultsController.fetchRequest setPredicate:searchPredicate];
    }else{
        [NSFetchedResultsController deleteCacheWithName:nil];
        [self.fetchedResultsController.fetchRequest setPredicate:nil];
    }
    [self performFetch];
} 
```

我的问题是，当谓词真正过滤数据集时，放置在键盘上方的工具栏又回到了原来的位置。例如，如果用户键入的内容没有更改数据集，则工具栏将保留在原处。

当用户键入并最终更改集合视图时，如何将工具栏保持在原位？

# ios - 为设置结构创建函数或宏

> ID：15391230
> 
> 赞同：0
> 
> 时间：2013-03-13T16:38:09.100
> 
> 标签：ios

我有结构

```
struct CounterRange {
    NSInteger min;
    NSInteger max;
}; 
```

我想为 NSMakeRange 中的结构设置参数：

```
NSMakeRange(unsigned int loc, unsigned int len) 
```

所以代码行将如下所示

```
obj.counterRange = MakeCounterRange(10, 20); 
```

正如我认为的那样，例如 MakeCounterRange 将是一个将为我设置结构的宏。但我从来没有做过同样的事情，我只能假设它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:41:24.633

我只会使用一个函数。如果你愿意，你可以让它内联。您可以从 NSRange.h 调整 NSMakeRange 的定义：

```
NS_INLINE NSRange NSMakeRange(NSUInteger loc, NSUInteger len) {
    NSRange r;
    r.location = loc;
    r.length = len;
    return r;
} 
```

您的结构看起来很像 NSRange。你为什么不直接使用它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:43:16.263

简单地：

```
#define MakeCounterRange(a, b) { a, b }

```

注意：宏通常使事情变得更容易，允许用更少的字符来实现。这里不是这种情况，所以我什至不会费心使用它。

# c++ - 使用另一个类的静态成员函数时，构造函数中未解析的静态符号。

> ID：15391235
> 
> 赞同：0
> 
> 时间：2013-03-13T16:38:23.787
> 
> 标签：c++, class, constructor, static-members

我有两个班，`Foo`和`Bar`。

Foo.h

```
class Foo
{
public:
    static void Setm(int i) { m = i; }
private:
    static int m;
}; 
```

酒吧.h

```
class Foo;
class Bar
{
 public:
     Bar(int m) {Foo::Setm(m);}
}; 
```

主文件

```
#include "Foo.h"
#include "Bar.h"
void main() {
   Bar bar(5);
} 
```

编译时出现以下错误： 1>Foo.obj : error LNK2001: unresolved external symbol "private: static int Foo::m" (?m@Foo@@0HA) 1>Bar.obj : error LNK2001: unresolved external符号“私有：静态 int Foo::m”(?m@Fool@@0HA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:40:38.463

任何非整数/枚举类型的静态类成员变量必须在其声明/定义之外进行初始化。

一个这样的地方可以是 main 的全局范围。

即在main.cpp中：

```
 int Foo::m = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:40:33.403

放

```
int FOO::m = 0; 
```

在实现文件中的类定义之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:56:21.367

你必须初始化静态变量：

```
class Foo
{
public:
    static int m;
static void Setm(int i) { m = i; }
private:
};
int Foo::m=2;

class Foo;
class Bar
{
 public:
 Bar(int m) {Foo::Setm(m);}
};

int main(int argc, char** argv) {
    Foo::Setm(5);
    Bar b(5);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:44:02.087

几件事。

*   您应该包括标头守卫：

例子：

```
//Foo.H
#ifndef __FOO_H__
#define __FOO_H__
...
...
#endif 
```

*   如果 Bar.H 实现了一个需要了解 Foo 实现的构造函数，则它应该包括 Foo.H。（**你是**）
    *   这是您以后可能会遇到的另一个问题。
*   静态成员不必**在**全局范围内初始化，它必须定义一次且仅一次。
    *   请参阅下面的进一步说明。这个答案是[http://www.parashift.com/c++-faq/link-errs-static-data-mems.html](http://www.parashift.com/c++-faq/link-errs-static-data-mems.html)的缩写，你的确切问题在这里被粗略地描述了。并查看[http://www.parashift.com/c++-faq/static-const-with-initializers.html](http://www.parashift.com/c++-faq/static-const-with-initializers.html)了解更多信息。

尽管其他答案说明了什么，但 main 是一个可怕的地方。这样做需要每个使用过这个类的人都知道在他们的主要工作中这样做。当我想使用您的标头（甚至您团队中的另一个开发人员或另一个代码块）时，我怎么知道在我的 main 中定义静态常量？答案是我不会。这是一种懒惰的做法，会形成一个坏习惯。甚至不要让我开始学习静态初始化/破坏的乐趣。

您不能将其放在 Foo.H 中，因为这样做会导致包含您的标头的每个编译单元重新定义时出现链接器错误。

一个更好的地方是在新创建的 Foo.[c|.cxx|.cpp|.cc] （无论你使用什么后缀）。主要工作吗？是的，它适用于你……现在。以后会不会出问题？大概。它是一种好的形式和一个值得记住的解决方案吗？绝对不。

**最佳答案**：

```
//Foo.C (NOT MAIN)  
#include<Foo.h>  
int Foo::m = 0; 
```

您还应该注意的是，我的答案与在其构造函数中使用它的第二个类没有任何关系。如果我有要点，我会编辑您的问题的标题，因为它与构造函数或类成员函数无关。您在谈论静态类方法/函数而不是成员函数/方法。

# javascript - 具有特定类的 div 中的元素计数？

> ID：15391240
> 
> 赞同：1
> 
> 时间：2013-03-13T16:38:49.073
> 
> 标签：javascript, jquery

我有这个：

```
$('.project-header').html('Projects (' + numProjects + ')');
$('.task-header').html('Tasks (' + numTasks + ')');
$('.case-header').html('Cases (' + numCases + ')'); 
```

例如，numProjects 应该在哪里：

```
$('.project-header').numElementsWith('.external-element'); 
```

有没有办法像这样获得与类匹配的元素数量？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:39:54.690

使用[长度](http://api.jquery.com/length/)！

```
var count = $('.project-header').find('.external-element').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:39:52.627

```
$('.project-header .external-element').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:39:57.637

```
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>

$("ul").children().length // 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:40:19.953

只是：

```
$('.project-header .external-element').length; 
```

# cookies - 跨多个 TLD 的 Cookie？

> ID：15391241
> 
> 赞同：0
> 
> 时间：2013-03-13T16:38:54.153
> 
> 标签：cookies

我知道如何使 cookie 跨子域（设置`.example.com`为域）工作，但在我的最新项目中，我有多个域，如下所示：

```
example.co.uk
example.net
example.biz
... 
```

是否可以使 cookie 跨这些域工作？半相关的，我也可以`localStorage`跨这些领域工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:59:41.843

Cookie 不是这样工作的。您需要至少有两个级别的域相同才能使用 cookie，例如 xyz.example.com 和 abc.example.com 在 2 个级别上很常见。

# excel - 一个 Excel 工作簿中可以创建多少个工作表用于自动化测试？

> ID：15391247
> 
> 赞同：3
> 
> 时间：2013-03-13T16:39:09.800
> 
> 标签：excel, selenium, junit, apache-poi, data-driven-tests

我正在研究用于自动化测试用例的数据驱动框架。我使用 Selenium 和 Java、Junit、Apachi-Poi 等来创建和运行我的测试用例。

每张表都包含我将用于一个类（或一个测试用例）的数据。所以现在，如果我创建 N 个测试用例，那么工作簿中应该有 N 个工作表。但我需要知道在 Excel 工作簿中可以创建多少张工作表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-03T09:59:50.837

工作表（标签）的数量仅受可用内存的限制。要查看有关此（以及各种其他 Excel 限制）的信息，请执行以下五个步骤：

1.  确保您处于 Excel 的激活会话中，然后按 F1
2.  在“键入帮助问题”文本框中输入“Excel 限制”，然后按 Enter
3.  在“搜索结果”窗口中，单击 Excel 规范和限制超链接
4.  显示（展开）工作表和工作簿标题
5.  在功能字段下，请参阅工作簿中的工作表标题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:46:26.537

...这取决于Excel版本，但2007 +，除了可用内存量之外没有限制：

[http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx#BMworksheetworkbook](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx#BMworksheetworkbook)

# validation - 网格中的 Kendo UI 详细信息模板验证失败

> ID：15391249
> 
> 赞同：0
> 
> 时间：2013-03-13T16:39:11.553
> 
> 标签：validation, kendo-ui, kendo-grid, kendo-asp.net-mvc

我`Kendo UI`在我的 ASP.NET MVC 4.0 应用程序中使用。

我的详细信息模板中有一个带有详细模板的网格我有一个表格

```
 @(Html.Kendo().TabStrip()
            .Name("TabStrip_#=UserID#")
            .SelectedIndex(0)
            .Events(e => e.ContentLoad("UserDetailsEditable"))
            .Items(tab =>
            {
                tab.Add().Text("User Details")
                    .LoadContentFrom("UserDetails", "User", new { UserID = "#= UserID #"});
            })
            .ToClientTemplate() 
```

)

此表单不会触发从模型数据注释派生的验证。

那是因为它无法识别我的验证脚本

```
 @Scripts.Render("~/bundles/jqueryval")
  bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                        "~/Scripts/jquery.unobtrusive*",
                        "~/Scripts/jquery.validate*")); 
```

如果我将此引用 @Scripts.Render("~/bundles/jqueryval") 从**layout.cshtml**移动到**表单视图**验证将起作用，但我的表单发布将多次完成。因为我的脚本参考将为每个详细信息模板多次加载。

我怎样才能解决这个问题？

**解决方案**：

我已经拆分了 jQuery Val 包

```
 //bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            //           "~/Scripts/jquery.unobtrusive*",
            //           "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                        "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/unobtrusive").Include(
                       "~/Scripts/jquery.unobtrusive*")); 
```

在我的布局中，我只给出了 `@Scripts.Render("~/bundles/unobtrusive")`

在我给出的所有表单视图中 `@Scripts.Render("~/bundles/jqueryval")`

解决了这个问题。希望这可以帮助其他人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:15:21.147

我已经拆分了 jQuery Val 包

```
 //bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            //           "~/Scripts/jquery.unobtrusive*",
            //           "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                        "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/unobtrusive").Include(
                       "~/Scripts/jquery.unobtrusive*")); 
```

在我的布局中，我只给出了`@Scripts.Render("~/bundles/unobtrusive")`

在我给出的所有表单视图中`@Scripts.Render("~/bundles/jqueryval")`

解决了这个问题。希望这可以帮助其他人

# python - 我是否以正确的方式使用 cython？

> ID：15391250
> 
> 赞同：3
> 
> 时间：2013-03-13T16:39:11.720
> 
> 标签：python, cython

在我正在开发的项目中，我一直在将一些 python 函数和类转换为 cython。所以现在我有各种 .pyx 文件和相应的 .py 文件，它们包含基本相同的代码，cython 包括变量类型。但是，有时，cython 会包含对 python 代码的一些小的修改——（1）因为修改后的代码比保持相同的 python 形式更快（但等效）。

一开始我并不认为这种重复的代码会成为问题。此外，我计划定期比较 python 和 cython 实现的输出，以便我可以更快地发现对其中一个或另一个的任何意外修改。问题是我有更多的工作来保持两个实现同步，因为我发现了错误、进行改进等。这让我想知道这是否是使用 cython 的正确方法。

我知道理想情况下你会在 python 中完成你的所有项目，然后如果它很慢，找到热点并对它们进行 cythonize。但是，在我的项目中，我使用 python 作为 matlab 替代品来替代我正在开发的增强现实系统中的交互式原型算法。该系统是实时工作的，所以我经常在早期使用 cython 新算法以获得更高的 fps 并查看它的实时行为。

所以我的问题：

涉及大量 cython 代码的项目是否有重复代码？.pyx 文件和相应的 .py 文件？并让它们保持同步？还是他们只使用 cython 并直接在 cython 中开发新算法？那么就不会有重复的代码。但是，我无法在我最喜欢的 python IDE (wingIDE) 中调试 cython 代码。就此而言，我从来没有设法让 cygdb 在 Windows 7 中工作（在尝试了很长时间之后，我认为它只在 linux 中工作）所以我坚持使用 print 语句调试 cython 代码，这并不理想，而且基本上我放弃了我可以使用 python 和wingIDE 进行的所有交互式开发（类似matlab）。

然后是纯 python 模式[http://docs.cython.org/src/tutorial/pure.html](http://docs.cython.org/src/tutorial/pure.html)我喜欢使用 .pxd 文件来扩充我的 python 代码的想法，这样我就不会有重复代码的问题。我还没有尝试过，但我已经了解了一些限制，所以我不确定它是否足够好。另外，我不知道是否可以使用纯 python 模式从我在上面 (1) 中讨论的 python 代码中集成这些小的修改。这些可以放在 pxd 文件中吗？或者我是否必须有一个 pxy 文件才能进行修改？或者最好忘记修改任何内容。有没有人对纯python模式有很好的经验？

我不知道是否有另一种更好的使用 cython 的方法，所以如果你知道更好的方法，请告诉我们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:03:16.013

简短的回答是：不，python 项目不会同时保留 cython 和 python 代码。两者兼顾，负担太大。

以下是我使用 cython 的方式：我首先在 Python 中实现代码。通常，我在小型数据集上进行测试，因此速度不是问题。如果我发现代码太慢，我会尝试在 Python 中寻找优化。如果找不到，我会尝试对代码进行cythonizing。完成此操作后，我将比较 python 实现和 cython 的加速（使用 ipython 的 %timeit 魔术函数）。

事实上，cython 代码比 python 代码调试起来更复杂。但通常，我开始编写 cython 代码，我有一个无错误的算法。此外，回溯包含引发异常的 cython 代码的行号。如果您的代码段错误，您可以尝试使用 gdb 对其进行调试 [1]_

我还没有使用 pxd 文件。

[1]_ [http://scipy-lectures.github.com/advanced/debugging/index.html#debugging-segmentation-faults-using-gdb](http://scipy-lectures.github.com/advanced/debugging/index.html#debugging-segmentation-faults-using-gdb)

# ios - 在 Mac 应用和 iOS 应用之间共享文件夹

> ID：15391253
> 
> 赞同：1
> 
> 时间：2013-03-13T16:39:12.630
> 
> 标签：ios, macos, cocoahttpserver

如何在 Mac 应用程序（发送方）和 iOS 应用程序（接收方）之间共享文件夹？

是否有任何高级 API 可以做到这一点？或者我应该使用[CocoaHTTPServer 之](https://github.com/robbiehanson/CocoaHTTPServer)类的东西吗？

# bash - 将结果保存到变量

> ID：15391254
> 
> 赞同：6
> 
> 时间：2013-03-13T16:39:13.333
> 
> 标签：bash, netcat

如何将结果从 nc 保存到变量中？

我想：

> nc：连接到 localhost 端口 1 (tcp) 失败：连接被拒绝

在我的变量上。我试过了：

```
a="$(nc -z -v localhost 1)"
echo $a 
```

但输出为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T16:40:38.840

只需使用`$()`获取命令的结果：

```
your_var=$(nc -z -v localhost 1) 
```

如果您还希望存储错误，则将`2`（错误）重定向到`1`（正常输出）：

```
your_var=$(nc -z -v localhost 1 2>&1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T16:40:39.287

只需重定向`stderr`到`stdout`，表示为`2>&1`：

```
a="$(nc -z -v localhost 1 2>&1)"
echo $a
nc: connect to localhost port 1 (tcp) failed: Connection refused 
```

文件描述符`2`附加（除非重定向）到`stderr`，`fd 1`并附加到`stdout`。`bash`语法仅`$( ... )`捕获. `stdout`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-23T14:28:13.920

`-w`在这种情况下是你的朋友吗

> -w timeout 超时秒后无法建立或空闲超时的连接。-w 标志对 -l 选项没有影响，即 nc 将永远监听连接，无论有无 -w 标志。默认为无超时。

```
nc -z -w 3 $serverName $serverPort 
```

现在你可以使用 $? 变量以在您的脚本中使用它。

`if [ $? == 0 ]`可用于在脚本中使用上述命令的输出。如果无法建立，上述命令将在 3 秒后超时连接。

# ios - 当我将 CALayer 添加到自定义 UIView 时，我隐藏了一个子 UIImageView

> ID：15391255
> 
> 赞同：0
> 
> 时间：2013-03-13T16:39:18.100
> 
> 标签：ios, objective-c, quartz-core

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我有`UIView`一个`UIImage`内部的习惯。对于该自定义，`UIView`我将添加一个渐变层：

```
- (void)changeBackgroundWithLayer:(CALayer*)newLayer
{
    if (_gradientBackground != nil)
        [_gradientBackground removeFromSuperlayer];

    _gradientBackground = newLayer;
    [self.layer addSublayer:_gradientBackground];
} 
```

但是，当我这样做时，我看不到`UIImage`.

**我怎样才能将其添加`CALayer`到`UIView`并查看`UIImageView`？**

层次结构是：

```
UIView
  |
  ---- UIImageView 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:58:43.253

您的视图层次结构实际上是什么令人困惑。

你说 a `UIImage`in a `UIView`，你的意思是你有一个`UIImageView`inside a`UIView`吗？或者你是否覆盖 drawRect 来手动绘制图像？

我会看着`insertLayer:atIndex:`你需要确保你的渐变在图像层后面。如果您手动绘制它，我可能会切换到`UIImageView`将其作为子视图添加到您的`UIView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:01:23.537

我的解决方案：

```
- (void)changeBackgroundWithLayer:(CALayer*)newLayer
{
    if (_gradientBackground != nil)
        [_gradientBackground removeFromSuperlayer];

    _gradientBackground = newLayer;
    [self.layer insertSublayer:newLayer atIndex:0];
} 
```

# variables - 在 vbs WMI 方法中使用变量

> ID：15391257
> 
> 赞同：1
> 
> 时间：2013-03-13T16:39:18.393
> 
> 标签：variables, vbscript, wmi

我有以下脚本，它使用硬编码值来检查 SQL 性能计数器

```
    暗淡 objWMIService
    暗淡 colItems
    暗淡 objItem
    暗淡 objProperty

    strComputer =“。”

    设置 objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")

    设置 colItems = objWMIService.ExecQuery("SELECT * FROM Win32_PerfFormattedData_MSSQLSERVER_SQLServerBufferManager", "WQL", wbemFlagReturnImmediately + wbemFlagForwardOnly)

    对于 colItems 中的每个 objItem

    如果 objItem.FreeliststallsPersec > 0 那么
        Wscript.Echo“服务状态：严重”
        Wscript.Quit(2)
    别的
        Wscript.Echo "服务状态：OK"
        Wscript.Quit(0)
    万一

    下一个

```

但是如果我尝试将一些值作为变量传递以使脚本更加灵活/有用，如下所示

```
    暗淡 objWMIService
    暗淡 colItems
    暗淡 objItem
    暗淡 objProperty
    暗淡 strPerfCounterQuery
    暗淡 strPerfCounter
    暗淡intWarnValue
    暗淡intCritValue
    暗淡 strWMIQuery

    strComputer =“。”

    strPerfCounterQuery = Wscript.Arguments.Item(0)
    strPerfCounter = Wscript.Arguments.Item(1)
    intCritValue = Wscript.Arguments.Item(2)

    设置 objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")

    strWMIQuery = """SELECT * FROM " & strPerfCounterQuery & """" & ", " & """WQL""" & ", " & "wbemFlagReturnImmediately + wbemFlagForwardOnly"

    设置 colItems = objWMIService.ExecQuery(strWMIQuery)

    对于 colItems 中的每个 objItem

    如果 objItem.& strPerfCounter > & intCritValue Then
        Wscript.Echo“服务状态：严重”
        Wscript.Quit(2)
    别的
        Wscript.Echo "服务状态：OK"
        Wscript.Quit(0)
    万一
    下一个

```

objWMIService.ExecQuery(strWMIQuery) 返回一个空值（尽管如果我回显查询，它似乎与硬编码的版本字符串匹配）

和 objItem。似乎也不喜欢被赋予一个变量来使用

我使用以下命令从命令行调用脚本：

```
cscript perfmon-greater Win32_PerfFormattedData_MSSQLSERVER_SQLServerBufferManager FreeliststallsPersec 0

```

我正在尝试的可能吗？有人有我可以参考的例子吗？

非常感谢任何信息

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:42:37.747

您的问题是`objWMIService.ExecQuery`将字符串视为一个参数。

你可以这样做：

```
strWMIQuery = "SELECT * FROM " & strPerfCounterQuery
strWMILang = "WQL"
strWMIFlags = wbemFlagReturnImmediately + wbemFlagForwardOnly

Set colItems = objWMIService.ExecQuery(strWMIQuery, strWMILang, strWMIFlags) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T10:14:47.743

您将变量放在三引号中，例如 `Execquery ("select * from cim_datafile where drive="""&driveletter&"""")`

`driveletter`是变量

# jquery - 为警报和确认（DRY）组合 jQuery UI 对话框代码？

> ID：15391259
> 
> 赞同：0
> 
> 时间：2013-03-13T16:39:20.743
> 
> 标签：jquery, jquery-ui, button, jquery-ui-dialog, dry

我有下面的代码来显示一个只有“确定”按钮的警报对话框和一个带有“取消”和“确定（提交）”按钮的确认对话框。

正如您所看到的，有很多重复的代码，我想知道是否有办法编写这样的代码，以便尽可能少地重复代码（多次编写）？

我正在快速学习 jQuery，但不知道如何更好地编写它？任何帮助或示例将不胜感激？非常感谢

外部 JS：

```
function alert() {
    var id = $('#dialog-alert');
    id.dialog({
        autoOpen: false,
        dialogClass: 'ui-alert',
        resizable: false,
        modal: true,
        width: 450,
        buttons: [{
            'text': 'OK',
            'class': 'btn btn-green',
            'click': function () { $(this).dialog('close'); }
        }]
    }).dialog('open');
    $('.ui-dialog :button').blur();
};

function confirm() {
    var id = $('#dialog-confirm');
    id.dialog({
        autoOpen: false,
        dialogClass: 'ui-alert',
        resizable: false,
        modal: true,
        width: 450,
        buttons: [{
            'text': 'Cancel',
            'class': 'btn btn-red',
            'click': function () { $(this).dialog('close'); }
        },
        {
            'text': 'OK',
            'class': 'btn btn-green',
            'click': function () { $('#completeform').submit(); }
        }]
    }).dialog('open');
    $('.ui-dialog :button').blur();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:52:52.730

感谢@Alnitak 的帮助，我得到了我想要的东西。我想要一个可以调用对话框的功能，无论是警报还是确认，都显示一两个按钮。对于正在寻找类似东西的人，我的解决方案如下。参数和条件语句的组合。

```
function dialog(id, btns) {
    var buttons = [{
        'text': 'OK',
        'class': 'btn btn-green',
        'click': function () { $(this).dialog('close'); }
    }]

    if (btns === confirm) {
        buttons = [{
            'text': 'Cancel',
            'class': 'btn btn-red',
            'click': function () { $(this).dialog('close'); }
        }, {
            'text': 'OK',
            'class': 'btn btn-green',
            'click': function () { $('#completeform').submit(); }
        }]
    };
    $('#dialog-' + id).dialog({
        autoOpen: false,
        dialogClass: 'ui-alert',
        resizable: false,
        modal: true,
        width: 450,
        buttons: buttons
    }).dialog('open');
    $('.ui-dialog :button').blur();
}; 
```

在 HTML 页面中：

```
$(function() { dialog('alert', alert); }); 
// or
$(function() { dialog('confirm', confirm); }); 
```

# android - 从 Android 应用的一张图片开始介绍

> ID：15391268
> 
> 赞同：0
> 
> 时间：2013-03-13T16:39:37.847
> 
> 标签：android, android-layout, android-imageview

我想为我的 android 应用程序做一个介绍，所以我想这样做：

这是我的**intro.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

    <ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/logo_inesc" />

  </LinearLayout> 
```

想象一下带有一些菜单和图像的**main.xml 。**

当用户启动应用程序时，我想向他展示第一个演示图像，然后是应用程序本身以及选项等。

我在我的活动中这样做了：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intro);

    try {
        Thread.sleep(6000); //Intro image will be shown for 6 seconds
        setContentView(R.layout.home);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我不知道这是否是正确的程序，布局正在正确更改，但没有显示图像。有人知道为什么吗？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:47:31.887

虽然此解决方案可能有效或类似的方法可能更好：

```
public class SplashActivity extends Activity {
    protected boolean active = true;
    protected int splashTime = 1000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_screen);
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(active && (waited < splashTime)) {
                        sleep(100);
                        if(active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    // Start your Activity here
               }
           }
       };
       splashTread.start();    
   }
} 
```

但是如果用户在启动延迟结束之前按下后退键（并关闭您的应用程序）会怎样。该应用程序可能仍会打开下一个活动，这不是真正的用户友好。

在你的 GUI 中睡觉也是不好的做法。

创建一个 AsyncTask 或另一个单独的线程。

[这家伙有一个很好的解决方案，启动画面实际上会消失。](https://stackoverflow.com/questions/5025734/how-to-implement-splash-screen-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:43:56.920

1.  如果 LinearLayout 只包含一个孩子，则不需要它。
2.  为 Thread.sleep() 使用 AsyncTask，否则您将暂停 UI 线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:41:36.193

您正在使当前线程（UI 线程）休眠，为了使屏幕暂停 6 秒，您需要创建一个单独的线程。

```
Thread t=new Thread(
new Runnable()
{
public void run()
{
sleep(6000);
}
}
);
t.start(); 
```

...........

```
 setContentView(R.layout.intro);

    try {
        Thread t=new Thread(
    new Runnable()
    {
    public void run()
    {
    Thread.sleep(6000);
    }
    }
    );
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
finally
{
// start new activity with intent if you have a new activity or if you want to change the //contentView change here
setContentView(R.layout.home);
}
  t.start(); 
```

# c++ - C++ 作业怎么做

> ID：15391271
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:39:43.743
> 
> 标签：c++, void

您好，我需要有关程序的帮助，

> 数据：a = 8,5,0，f=4,0,8，m=0,2,4

哪里是 0 我需要用一个公式来计算：a = f/m 所以这是我的代码：

```
//Antrasis Niutono desnis
 #include <fstream>
 #include <iostream>
 using namespace std;
  //---------------------
void Odpowiedzi(int & a,int & f,int & m);
//---------------------
const char read[] = "duomenys1.txt";
const char result[] = "rezultatai1.txt";
//---------------------
int main() {
    ifstream rd(read);
    ofstream rs(result);
    int n,a,f,m;
    rd >> n;
    for(int i = 1; i <= n;i++) {
        rd >> a >> f >> m;
        Odpowiedzi(a,f,m);
        rs << a << "  " << f << "  " << m << endl;
    }
    rd.close();
    rs.close();
    return 0;
}
void Odpowiedzi(int & a,int & f,int & m)
{
    if(a=0 && f>0 && m>0)
        a=f/m;
    else if(f=0 && a>0 && m>0)
        f=m*a;
    else if(m=0 && a>0 && m>0)
        m=f/a;
} 
```

结果必须是 a = 8,5,2 f=4,10,8 m= 0,2,4 但我的结果是 a=0,0,0 f=0,0,0 m=0,0,0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:41:44.717

在 C++ 中，以下是赋​​值：

```
if(a=0 && f>0 && m>0)
    ^ THIS 
```

它设置为零，然后在计算表达式的其余部分时`a`将该零视为布尔值 ( )。`false`

你的意思是写：

```
if(a==0 && f>0 && m>0)
    ^^ 
```

这个错误在几个地方重复出现，并解释了为什么你得到零。

在构建代码时启用编译器警告是个好主意。这是一个好的编译器会发现并警告您的错误之一。

# jquery - 显示/隐藏内容在 JQuery/CSS 中不起作用

> ID：15391272
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:39:44.343
> 
> 标签：jquery, html, css

我的 JQuery 脚本：

```
$(document).ready(function(){

    $('.both').click(function (event){
        $("#cl").fadeOut().removeClass("showTemp").addClass("showTempH");
        $("#nc").fadeOut().removeClass("showTemp").addClass("showTempH");
        $("#bth").fadeIn().removeClass("showTempH").addClass("showTemp");
        $(".both").removeClass("demo").addClass("active");
        $(".clinical").removeClass("active").addClass("demo");
        $(".nonclinical").removeClass("active").addClass("demo");
    });
    $('.clinical').click(function (event){
        $("#cl").fadeIn().removeClass("showTempH").addClass("showTemp");
        $("#nc").fadeOut().removeClass("showTemp").addClass("showTempH");
        $("#bth").fadeOut().removeClass("showTemp").addClass("showTempH");
        $(".both").removeClass("active").addClass("demo");
        $(".clinical").removeClass("demo").addClass("active");
        $(".nonclinical").removeClass("active").addClass("demo");
    });
    $('.nonclinical').click(function (event){
        $("#cl").fadeOut().removeClass("showTemp").addClass("showTempH");
        $("#nc").fadeIn().removeClass("showTempH").addClass("showTemp");
        $("#bth").fadeOut().removeClass("showTemp").addClass("showTempH");
        $(".both").removeClass("active").addClass("demo");
        $(".clinical").removeClass("active").addClass("demo");
        $(".nonclinical").removeClass("demo").addClass("active");
    });

}); 
```

我的 CSS 代码：

```
.demo {
    margin: 0px auto;
    display: block; /* Change anchor to block element */
    width: 195px; height: 37px; /* Specify width and height of the image. Height is value of each individual button graphic */
    background-image: url(theImages/inactive.png); /* Add the image as a background */
    background-position: top; /* Set the position to the top */
    text-align: center;
    vertical-align: middle;
    line-height: 37px;       /* the same as your div height */
    font-size: 13px;
    font-weight: bold;
    color: #FCFCFC;
}
.demo:hover {
    cursor: pointer;
}
.active {
    margin: 0px auto;
    display: block; /* Change anchor to block element */
    width: 195px; height: 37px; /* Specify width and height of the image. Height is value of each individual button graphic */
    background-image: url(theImages/active.png); /* Add the image as a background */
    background-position: top; /* Set the position to the top */
    text-align: center;
    vertical-align: middle;
    line-height: 37px;       /* the same as your div height */
    font-size: 13px;
    font-weight: bold;
    color: #FFFFFF;
}
.active:hover {
    cursor: pointer;
}
.showTemp {
    color: #1D2F9F;
    padding: 30px;
    text-align: left;
    font-size: 13px;
    font-family: Verdana, 'Source Sans Pro';
    font-weight: plain;
}
.showTempH {
    color: #1D2F9F;
    padding: 30px;
    text-align: left;
    font-size: 13px;
    font-family: Verdana, 'Source Sans Pro';
    font-weight: plain;
    display: none;
} 
```

我的 HTML 代码：

```
 <table border=1 cellPadding=0 cellSpacing=0 width=100%>
                    <tr>
                        <td width=33%><div class="active both">BOTH</div></td>
                        <td width=33%><div class="demo clinical">CLINICAL</div></td>
                        <td width=33%><div class="demo nonclinical">NON-CLINICAL</div></td>
                    </tr>
                    <tr>
                        <td>
                            <ul id="bth" class=showTemp>
                                <li>Mission Statement - Interfaith Medical Center</li>
                                <li>About Employee Health Services</li>
                                <li>National Patient Safety Goals</li>
                            </ul>
                        </td>
                        <td>
                            <ul id="cl" class=showTempH>
                                <li>Pain Assessment and Management</li>
                                <li>Medication Errors</li>
                                <li>Bioethic Consultation Process</li>
                            </ul>
                        </td>
                        <td>
                            <ul id="nc" class=showTempH>
                                <li>Emergency Management</li>
                                <li>Infection Control</li>
                                <li>The Environment of Care Program</li>
                            </ul>
                        </td>
                    </tr>
                </table> 
```

我要做的是取决于用户单击的按钮，该按钮具有 ACTIVE 类，其余两个将具有 DEMO 类。如何修改我现有的 jquery 脚本？

电流输出：[电流输出部位](http://www.interfaithmedical.com/checksite/test.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:49:05.740

ID 必须是唯一的。你不能有两个元素`id="demo"`。改用类。

改变：

```
<tr>
    <td width=33%><div id="active" class=both>BOTH</div></td>
    <td width=33%><div id="demo" class=clinical>CLINICAL</div></td>
    <td width=33%><div id="demo" class=nonclinical>NON-CLINICAL</div></td>
</tr> 
```

至：

```
<tr>
    <td width=33%><div class="active, both">BOTH</div></td>
    <td width=33%><div class="demo, clinical">CLINICAL</div></td>
    <td width=33%><div class="demo, nonclinical">NON-CLINICAL</div></td>
</tr> 
```

然后将您的`#demo`and`#active`引用更改为`.demo`and `.active`。

至于手头的问题：

> 我要做的是取决于用户单击的按钮，该按钮具有 ACTIVE 类，其余两个将具有 DEMO 类。如何修改我现有的 jquery 脚本？

您当前没有设置这些类，您将使用：

```
$('.active').click(function() {
    $('.active').removeClass('active').addClass('demo');
    $(this).addClass('active');
}) 
```

> 我如何将淡入和淡出与您的 Jquery 代码合并？

您可以使用现有的`showTemp`和`showTempH`类：

```
$('.active').click(function() {
    var $current = $('.showTempH');

    $('.showTemp').fadeOut().removeClass('showTemp').addClass('showTempH');
    $current.fadeIn().removeClass('showTempH').addClass('showTemp');

    $('.active').removeClass('active').addClass('demo');
    $(this).addClass('active');
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:01:16.830

首先 id 属性必须是唯一的。您不能有多个具有相同 ID 的元素。

```
<td width=33%>
    <div class="active both">BOTH</div>
</td>
<td width=33%>
    <div class="demo clinical">CLINICAL</div>
</td>
<td width=33%>
    <div class="demo nonclinical">NON-CLINICAL</div>
</td> 
```

你需要一个事件监听器来处理所有三个按钮的点击，

```
$(".demo").live("click", function() {
       $(".active").removeClass("active").addClass("demo");
       $(this).removeClass("demo").addClass("active");
 }); 
```

这是一个演示页面。

[http://jsfiddle.net/JRcyd/2](http://jsfiddle.net/JRcyd/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:43:14.387

你需要在淡出/淡入之后更改类，所以你需要做这样的事情

```
$("#cl").fadeOut('slow', function() {
    $(this).removeClass("showTemp").addClass("showTempH");
}); 
```

要将活动类添加到单击的按钮，首先为所有按钮添加一个公共类，然后您需要在 css （`.active`而不是）中将 active 和 demo 更改为类（id 应该是唯一的`#active`），然后在您的按钮单击您可以添加

```
$('.commonButtonClass').removeClass('active').addClass('demo');
$(this).addClass('active').removeClass('demo'); 
```

# javascript - 在 phonegap 中将 lat & long 转换为 javascript 变量

> ID：15391275
> 
> 赞同：1
> 
> 时间：2013-03-13T16:39:47.590
> 
> 标签：javascript, cordova, asynchronous

我有一个我似乎无法弄清楚的问题。我正在使用 phonegap 尝试获取当前的纬度和经度并将值分配给变量。

我将在应用程序中的多个位置使用纬度和经度，因此我需要将其分配给我可以在其他地方使用的变量。

在此设置中，html 输出为“未定义”。

我确定这与我缺少的 javascript 和异步有关……有什么帮助吗？

```
/******************** Life Cycle ************************/

function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

/******************** Device is Ready ************************/

function onDeviceReady() {

/******************** Geo Info ************************/

    // Variables
    var currentLat;
    var currentLon;
    var geoWatchID = 0;

    // get current geo location
    if (geoWatchID == 0) {
        var geoOptions = {maximumAge: 3000, enableHighAccuracy: true};
        geoWatchID = navigator.geolocation.watchPosition(onSuccess, onError, geoOptions);

        function onSuccess(position) {
            currentLat = position.coords.latitude;
            currentLon = position.coords.longitude;
        }

        function onError(error) {
            alert('code: ' + error.code + '\n' +
                  'message: ' + error.message + '\n');
        }

    } else {
        navigator.geolocation.clearWatch(geoWatchID);
        geoWatchID = 0;
    }

    // display the current latitude and longitude w/ jquery
    $('#currLat').html(currentLat);
    $('#currLon').html(currentLon);

} // END device is ready 
```

以前有人用过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:48:17.453

这是因为`onSuccess`只有在 jQuery 语句之后才被调用，所以尝试

```
 function onSuccess(position) {
        currentLat = position.coords.latitude;
        currentLon = position.coords.longitude;

        // display the current latitude and longitude w/ jquery
        $('#currLat').html(currentLat);
        $('#currLon').html(currentLon);
    } 
```

编辑：

```
 function onSuccess(position) {
        currentLat = position.coords.latitude;
        currentLon = position.coords.longitude;
        update();    
    }

    function update(){
        // display the current latitude and longitude w/ jquery
        $('#currLat').html(currentLat);
        $('#currLon').html(currentLon);
    } 
```

# ios - 检查设备的 Objective-C 宏

> ID：15391279
> 
> 赞同：0
> 
> 时间：2013-03-13T16:39:56.990
> 
> 标签：ios, objective-c, macros, c-preprocessor

我需要一个宏来确定设备是 iPhone 4 还是 iPhone 5。有人告诉我有一个宏可以做到这一点。有谁知道它是什么或我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:15:26.147

我找到了一个可以解决问题的

```
#define IS_IPHONE_5 (fabs((double)[[UIScreen mainScreen] bounds].size.height - (double) 568) < DBL_EPSILON) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:20:57.553

不幸的是，不仅没有宏，甚至没有返回设备类型的公共 API 调用，它可以区分不同版本的 iPhone（例如 iPhone 4 和 iPhone5）。

### 设备检测

您可以使用 [UI_USER_INTERFACE_IDIOM](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/macro/UI_USER_INTERFACE_IDIOM)宏来确定用户是在 iPhone/iPod 还是 iPad 上运行：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
     // The device is an iPad running iOS 3.2 or later.
}
else {
     // The device is an iPhone or iPod touch.
} 
```

摘自[iOS App Programming Guide的“](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007072-CH1-SW1) [Advanced App Tricks](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW23) ”部分。

### 屏幕尺寸检测

关于普遍支持多种屏幕尺寸和 iPhone 4 和 iPhone 5，iOS App Programming Guide 指出：

> > 要在您的代码中正确支持更大的屏幕，切勿对当前设备的屏幕尺寸做出假设。相反，始终动态检索屏幕、窗口或视图的大小，并使用该大小信息来配置您的界面。您还应该使用基于视图的约束来构建用户界面，这使得在运行时管理对视图层次结构的更改变得更加容易。

### iOS版本检测

如果不是您想要检测的屏幕尺寸，而是用户正在运行的 iOS 版本，Apple 建议检查特定功能并在不可用时使用回退。同样，取自 iOS App Programming Guide：

> > *   要确定现有类上的方法是否可用，请使用 instancesRespondToSelector: 类方法或 respondsToSelector: 实例方法。
> >     
> >     
> > *   链接到 iOS SDK 4.2 及更高版本的应用程序可以使用该版本 SDK 中引入的弱链接支持。此支持允许您检查给定 Class 对象的存在以确定您是否可以使用该类。
> >     
> >     
> > *   链接到 iOS SDK 4.1 和更早版本的应用程序必须使用 NSClassFromString 函数来查看是否定义了一个类。如果函数返回 nil 以外的值，则可以使用该类。
> >     
> >     
> > *   要确定基于 C 的函数是否可用，请执行函数名称与 NULL 的布尔比较。如果符号不为 NULL，则可以使用该函数。

[最后，yasirmturk在这里](https://stackoverflow.com/questions/3339722/check-iphone-ios-version)提供了一系列方便的宏，用于检查用户正在运行的 iOS 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:16:25.770

这就是我所做的：

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    // iPad
} else {
    if (CGRectGetHeight([UIScreen mainScreen].bounds) >= 568.0) {
        // 4 inch - iPhone 5 or the new iPod touch
    }
    else {
        // 3,5 inch - iPhone 4S and older
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:31:30.907

我在 UIDevice 上创建了一个类别来实现这一点。非常简单的实现，但代码是

.h

```
#import <UIKit/UIKit.h>

@interface UIDevice (Recognition)

- (BOOL)isDeviceiPhone5;

@end 
```

.m #import "UIDevice+Recognition.h"

```
@implementation UIDevice (Recognition)

- (BOOL)isDeviceiPhone5
{
    return ([UIScreen mainScreen].bounds.size.height == 568.0f);
}

@end 
```

然后从任何你可以做的地方`[[UIDevice currentDevice] isDeviceiPhone5]`

# spring - JSF2 + Spring：查看范围内的bean未在后退按钮上恢复？

> ID：15391286
> 
> 赞同：0
> 
> 时间：2013-03-13T16:40:08.563
> 
> 标签：spring, jsf-2, primefaces, back-button, managed-bean

我有一个显示目录中文件夹的页面。它就像 Windows 资源管理器一样工作，但我的页面使用数据表显示文件夹。当用户通过单击文件夹名称深入到文件夹时，我将重新显示同一页面，但会显示一个带有新数据的支持 bean 的新实例。back bean 是一个 View 作用域的 bean。它是使用 Spring 的自定义 View 范围的 Spring 托管 bean，而不是 JSF 托管 Bean。当我使用浏览器返回按钮返回此页面时，浏览器发出 GET 请求以重新呈现页面。

问题是在浏览器后面，我希望页面呈现与我所在的最后一个文件夹有关的数据，而不是当前文件夹。目前，当我点击浏览器后退按钮时，会创建一个新的 bean 实例，并使用当前文件夹（保存在 Session 中）对其进行初始化。我希望我的 View 范围 bean 可以在后退按钮提交时恢复（即不是新的实例创建），但我意识到这可能是不可能的，因为它是 Spring 托管的 bean。关于如何将 bean 与页面上的 viewId 一起缓存，或者切换到使用 JSF 托管 bean 有什么想法吗？如果可能的话，我更喜欢前一种方法，但我很想知道后一种方法是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:45:19.423

这完全按设计工作。

如果要处理基于请求的参数，则应在 URL 中提供请求参数。例如`page.xhtml?folder=foo`。您可以使用`<h:link><f:param>`参数创建链接，也可以将`<f:viewParam>`其设置为 bean 属性。

### 也可以看看：

*   [JSF 2.0 View Scope 后退按钮安全吗？](https://stackoverflow.com/questions/9930900/is-jsf-2-0-view-scope-back-button-safe)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

# javascript - 在不同的div中显示内容

> ID：15391289
> 
> 赞同：0
> 
> 时间：2013-03-13T16:40:27.480
> 
> 标签：javascript, jquery

如何在不同的 div 中显示来自外部 .html 文件的内容。例如，如果 'li' 的 id = 1，则将其显示在 'id=content1' 中。如果 id=2，则显示在 'id=content2' 中。现在外部 .html 文件中的所有内容都显示在 id='content' 中

这是我的js

```
var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #content_from_external';
    $('#content').slideUp('normal',loadContent).delay(200);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,showNewContent)
    }
    function showNewContent() {
        $('#content').slideDown(1000);

    }
    return false;

}); 
```

这是我的html

```
 <ul id="nav" class="products">
                        <li id="1">
                          <a href="products/1.php"><img src="1.jpg"/></a>
                        </li>
                        <li class="under" id="2">
                         <a href="products/2.php"><img src="2.jpg"/></a>
                        </li>
                        <li id="3">                            
                         <a href="products/3.php"><img src="3.jpg"/></a>
                        </li>

                        </li>
  </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:42:59.100

```
$('#nav li a').click(function(){
    var toLoad = $(this).attr('href')+' #content_from_external';
    var divId = '#content' + $(this).parents('li').attr('id');

    $(divId).slideUp('normal',loadContent).delay(200);
    ... 
```

# python - 在文件中的空行之后重复循环（Python）

> ID：15391297
> 
> 赞同：0
> 
> 时间：2013-03-13T16:40:47.507
> 
> 标签：python, python-2.7, newline

所以基本上我有这个代码，它获取一个充满节的文本文档，并使用每个节的第一行中的指令对其进行解码，并使用它来解码每个后续行中的密码。我们的示例如下所示：

> -25+122-76
> ?ST^jT^jLj_P^_jZQj_SPjTY[`_jQTWPx ?ST^jT^j_SPj^PNZYOjWTYPx
> 
> +123+12+1234
> 0A:MXPBEEXA:II>GXGHPw

这是通过将第一行中的整数相加并将每个 ASCII 字符移动这么多来破译的。到目前为止，我的代码如下所示：

```
#Here I define the Shift function that will take a character, convert it to its ASCII numeric value, add N to it and return the ASCII character.

def Shift(char, N):
    A = ord(char)
    A += N
    A = chr(A)
    return A

#Here's the code I have that opens and reads a file's first line as instructions, evaluates the numeric value of that first line, throws rest into a list and runs the Shift helper function to eval the ASCII characters.
def driver(filename):
    file = open(filename)
    line = file.readline()
    file = file.readlines()
    N = eval(line)
    codeList = list(file)  
    for char in codeList:  
        newChar = Shift(char, N)  
        codeList[char] = codeList[newChar]  
    print str(codeList) 
```

现在我的问题是如何在节中的每个空白行之后重复我的代码？另外，如何让字符仅在 ASCII 范围 32（空格）和 126（~）内移动？这也是使用 Python 2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:00:02.227

为了将其保持在范围内，您可以使用 a `deque`，我也会`eval`先手动将数字转换为整数，然后使用转换表来解码数据，例如：

```
data = """-25+122-76
?ST^jT^jLj_P^_jZQj_SPjTY[`_jQTWPx ?ST^jT^j_SPj^PNZYOjWTYPx"""

lines = data.splitlines()

import re
from collections import deque
from string import maketrans

# Insted of using `eval` - find number with signs and sum
shift = sum(int(i) for i in re.findall('[-+]\d+', lines[0]))
# Explicit range of characters
base_set = map(chr, range(32, 127))
# Create a new deque which can be rotated and rotate by shift
d = deque(base_set)
d.rotate(-shift)
# Make translation table and translate
t = maketrans(''.join(base_set), ''.join(d))
print lines[1].translate(t)
# This is a test of the input file.5This is the second line. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:44:08.713

```
file = open(filename)
while True:
    line = file.readline()
    if not line:      # if end of file, exit
        print "Reached end of file"
        break
    if line == "\n":  # if new line, or empty line, continue
        continue
    else:
        your function 
```

至于将所有内容保持在 ASCII 范围内，我将不得不回复您，如果不是快速回答，请尝试另一种控制结构以将所有内容保持在正确的范围内，简单的数学应该做。

你也可以参考这个： [链接](https://stackoverflow.com/questions/227459/ascii-value-of-a-character-in-python)

# c# - 基于表单中的复选框在视图中显示

> ID：15391298
> 
> 赞同：0
> 
> 时间：2013-03-13T16:40:51.047
> 
> 标签：c#, html, asp.net-mvc

我在从表单中获取复选框的值时遇到了一些问题。我可能做错了什么，但我一生都无法弄清楚。

我认为的代码如下所示：

```
@using (Html.BeginForm("DisplayEmpPhotos", "Home", null, FormMethod.Post, new { id = "GetEmpNumbers" }))
{

<div id = "empForm">
    <br/>
    Event Name:<input type ="text" name="EventName"/>
    <br/>
    Event Dates:<input type ="text" name="EventDates"/>
    <br/>
    <br/>
    <br/>
    Enter Employee IDs:
    <br/>
    Consultant: <input type="checkbox" name="consultant" value="include" checked="checked" />
    <br/>
} 
```

该复选框下方有几个文本框输入，但它们工作正常。

我的控制器中的代码如下所示：

```
public ActionResult DisplayEmpPhotos(string EventName, string EventDates, string consultant)
{
    ViewData["EventName"] = EventName;
    ViewData["EventDates"] = EventDates;
    if(consultant == "include")
    {
        ViewData["Image"] = "<img src ='imgsrc' alt='First&nbsp;Last' class='nopad'/>";
        ViewData["Name"] = "First&nbsp;Last";
        ViewData["Deparment"] = "C";
        ViewData["Title"] = "Consultant";
    } 
```

该视图中包含以下内容：

```
<td class="smalltext">
        @ViewData["Image"]
        <p>
        @ViewData["Name"]
        </p>
        @ViewData["Department"]
        <br/>
        @ViewData["Title"]
</td> 
```

我的想法是，如果选中该框，则传递它的值，我应该能够将 Viewdata 分配给该信息并将其显示在视图中。我知道这样的硬编码值是不好的做法，但对于我正在做的事情是可以接受的。感谢您对我做错的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:47:28.843

你的控制器方法中有一个名为“checkbox”的变量，当它应该是“consultant”时，你真的应该使用 Html`CheckBox`帮助器。

所以在视图中：

```
Consultant: @Html.Checkbox("consultant", true) 
```

在控制器中，将值更改为布尔值：

```
public ActionResult DisplayEmpPhotos(string EventName, string EventDates, bool consultant)
{
   ViewData["EventName"] = EventName;
   ViewData["EventDates"] = EventDates;

   if(consultant)
   {
       ViewData["Image"] = "<img src ='imgsrc' alt='First&nbsp;Last' class='nopad'/>";
       ViewData["Name"] = "First&nbsp;Last";
       ViewData["Deparment"] = "C";
       ViewData["Title"] = "Consultant";
   }
} 
```

如果这对你不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:47:39.380

如果在您的*ActionResult*中您从 更改`string checkbox`为`string consultant`?

有时 MVC 对我这样做，当我将输入的名称更改为我在 actionResult 中声明它们的确切方式时，它们就起作用了。

# php - 带有可选参数的类似 Sprintf 的格式

> ID：15391305
> 
> 赞同：0
> 
> 时间：2013-03-13T16:41:07.077
> 
> 标签：php, printf

我正在显示从客户提供的记录中提取的地址数据，并尝试对其进行正确格式化。每个客户端都可以指定他们希望他们的客户数据如何显示，因此我为每个使用 php 的[sprintf()](http://php.net/manual/en/function.sprintf.php)及其格式化功能的客户端使用了一个可编辑的基于 JSON 的模板。

所以客户 A，希望他们的地址看起来像：

```
Bill Smith
123 Fake St
Whoville, OH 
```

将保存格式为`%s<br>%s<br>%s, %s`.

客户 B 想要：

```
Bill Smith
123 Fake St, Whoville, OH 94301 
```

保存格式为`%s<br>%s, %s, %s %s`

然后，我将这些格式存储在特定于客户端的模板中，该模板告诉我要从哪些字段中提取以及格式，即：

```
{
    "fields": [
        "full_name",
        "street",
        "city",
        "state",
        "zip"
    ],
    "format": "%s<br>%s, %s, %s %s"
} 
```

解码 JSON、提取数据并使用[`sprintf()`](http://php.net/manual/en/function.sprintf.php)提供的格式写入数据效果很好，并且不需要我创建自定义格式化函数来处理各种地址格式。**问题是如果一条数据是空的，它会被显示**，即如果街道地址丢失，我们有：

```
Bill Smith
, Whoville, OH 94301 
```

我正在尝试提出一个不需要重新发明轮子的解决方案，但我对其他架构持开放态度，这将使我能够灵活地处理具有相应灵活格式的“可选”数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:20:28.417

[基于这个答案](https://stackoverflow.com/a/9924340/357801)，我找到并实施了一个效果很好的解决方案。

本质上，我正在分解格式化组件并将它们与数据组件匹配，这样我就有了类似的东西：

```
{
  "data": "Bill Smith",
  "format": "%s"
},
{
  "data": "123 Fake St",
  "format": "<br>%s,"
},
{
  "data": "Whoville",
  "format": " %s,"
},
{
  "data": "OH",
  "format": " %s"
} 
```

当我运行上述组件时，我会检查 .data 中的值，如果找到，将格式组件连接到格式变量。最后，我通过[`vsprintf()`](http://php.net/manual/en/function.vsprintf.php). 不完美，但比以前工作得更好并且相当灵活。

# c++ - Boost #include 在 XCode 上失败，即使 boost 在标头搜索路径上

> ID：15391307
> 
> 赞同：1
> 
> 时间：2013-03-13T16:41:15.170
> 
> 标签：c++, xcode, boost

我在以下位置安装了 boost 的副本`/usr/local/ogre/ogre1.8/iOSDependencies/include`：

![在此处输入图像描述](../Images/8d32df3cae497926c2a3b5d188e8bee1.png)

...

![在此处输入图像描述](../Images/ab52f27c55677db3d17eb565c1813447.png)

在 XCode 中，cpp 文件无法编译，因为它包含的文件有一行：

`#include <boost/thread/tss.hpp>`

XCode compile cmdline to CompileC 包括

`-I/usr/local/ogre/ogre1.8/iOSDependencies/include`

对我来说，一切看起来都很好......`<boost/...>`是`/usr/local/ogre/ogre1.8/iOSDependencies/include`thread/tss.hpp 的孩子，显然存在。为什么 XCode 会有不同的想法？我尝试了一个干净的构建但没有任何成功。

XCode 项目设置如下所示：

![在此处输入图像描述](../Images/efe6669e5a11e9c240d97e388c900d33.png)

> `fatal error: 'boost/thread/tss.hpp' file not found` `#include <boost/thread/tss.hpp>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:56:36.187

" 首先，您必须使用 boostoniphone 项目中的代码和指令在 iPhone 上编译 boost。

在“boostoniphone”文件夹中导航到“framework”文件夹。单击该位置的“boost.framework”文件夹，并将其拖到主 xcode 窗口的左侧列中，进入“框架”组（以及所有其他框架，即 Foundation.framework、UIKit。框架等）

而已。如果您在尝试使其正常工作时添加了任何构建设置，请删除它们。”

以上是我经过一番研究后找到的答案。如果它确实帮助您解决问题，请评论我的回答。

# webrtc - 如何在 Chrome 中控制 webrtc 的相机分辨率？

> ID：15391309
> 
> 赞同：9
> 
> 时间：2013-03-13T16:41:16.530
> 
> 标签：webrtc

我们在 chrome 中使用 webrtc 进行视频会议。

这行得通，但它使用我们的网络摄像头，分辨率很差，纵横比为 4:3。然而，该摄像头可以提供 16:9 格式的高清视频。

我该如何控制这个？通过更改 Windows 设置、chrome 配置或 html 代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T17:13:49.013

您可以在传递给 getUserMedia 的约束对象中包含对特定分辨率的请求。例如：

```
window.navigator.webkitGetUserMedia({
  audio: true,
  video: {optional:[ {minHeight:720}, {minWidth:960} ]}
}, onSuccess, onError); 
```

# xcode - Xcode 未显示不兼容的指针类型

> ID：15391317
> 
> 赞同：0
> 
> 时间：2013-03-13T16:41:37.180
> 
> 标签：xcode, warnings

我可以使用任何参数调用任何方法而不会收到警告。例如：

```
[view addSubview:1]
[view addSubview:[UIImage imageNamed:@""]]; 
```

其他类型的警告都可以并显示为什么 Xcode 不抛出警告？

注意：它应该是一个项目设置或一种，因为警告存在于其他项目中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:37:30.013

这是这个问题的解决方案：

**构建设置 -> 隐式整数到指针转换**

将那个设置设为 NO 确实可以恢复警告

# jstl - jstl 变量作为关联数组的索引

> ID：15391319
> 
> 赞同：0
> 
> 时间：2013-03-13T16:41:41.550
> 
> 标签：jstl

我将属性文件的值加载到对象（数组？）中。例如在我的 application.properties 文件中

```
confirm.email.msg=A confirmation email has been sent. 
```

在我的 jsp 文件中，我可以按如下方式访问它

```
<c:out value="${pageScope.properties['confirm.email.msg']}"></c:out> 
```

在这一点上一切正常。但是，我不想对键名进行硬编码，而是使用请求对象中的值。例如，字符串（键）“confirm.email.msg”是“message”的值。我可以这样打印

```
<c:out value="${requestScope.message}"></c:out> 
```

现在如果我像这样结合起来

```
<c:out value="${pageScope.properties['${requestScope.message}']}"></c:out> 
```

它不起作用。我想我需要一对额外的报价单。不知道该怎么做。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:09:22.827

请尝试使用

```
 <c:out value="${pageScope.properties[requestScope.message]}" /> 
```

或者干脆

```
${pageScope.properties[requestScope.message]} 
```

# java - 在java中存储一组数据，比如python的dict

> ID：15391321
> 
> 赞同：1
> 
> 时间：2013-03-13T16:41:47.423
> 
> 标签：java, android, multidimensional-array

我有一组数据要存储在一个简单的变量中。基本上是带有位置坐标的十五个名称的列表。在 Python 中，我会创建一个字典，例如：

`locations = {'Location1': [lat1, lon1], 'Location2': [lat2, lon2], ...}`

这样我以后可以通过使用位置名称作为键来调用坐标：

`coords = locations['Location1']`

有什么等价于在 Java 中执行此操作？我基本上想在我的代码中将这些位置定义为常量。

在收到第一个非常快速的回复后进行编辑：

我现在添加了这个：

```
private class coordinates {
    private Long lat;
    private Long lon;
    public Long getLat() {
        return lat;
    }
    public void setLat(Long lat) {
        this.lat = lat;
    }
    public Long getLon() {
        return lon;
    }
    public void setLon(Long lon) {
        this.lon = lon;
    }
}

private final static Map<String, coordinates> LOCATIONS; 
```

最后一行当然是不完整的；我不知道如何填充这个东西，而不使用额外的临时变量来访问两个设置器，导致每组值都有几行代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:43:33.587

您可以在 java 中使用[**Map**](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)：

像： `Map<LocationObject, CoordinateObject>`

在哪里`CoordinateObject has latitude and longitude as attributes`

```
class CoordinateObject {
   //longitude;
   //latitude;
} 
```

*   [**相关帖子**](https://stackoverflow.com/questions/1540673/java-equivalent-to-python-dictionaries)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:43:39.743

在 Java 中，正确的数据结构是[Map](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:25:32.070

我想我通过在 StackOverflow 上调整其他一些答案找到了一个更方便的解决方案，而不必创建一个单独的对象（并意识到我使用了错误的类型）：

```
private final static Map<String, Double[]> LOCATIONS;
static
{
    LOCATIONS = new Map<String, Double[]>();
    LOCATIONS.put("Central_Western", new Double[] {22.288262, 114.140138});
    LOCATIONS.put("Eastern", new Double[] {22.286078, 114.216957});
} 
```

现在我应该能够调用`Double[] loc = LOCATIONS["Central_Western"]`并拥有一个包含两个数字的数组。

好的，还没有测试过……在 Java/Android 中尝试这么小的事情太难了……我非常想念 Python 的控制台……

# asp.net-mvc - 带有 asp.net mvc 4 和 EntityFramework 的 ViewModel 有什么意义

> ID：15391322
> 
> 赞同：5
> 
> 时间：2013-03-13T16:41:49.737
> 
> 标签：asp.net-mvc, entity-framework, design-patterns, automapper, asp.net-mvc-viewmodel

我正在和自己争论在使用实体框架的项目中创建 ViewModel 类有什么意义？

我目前有一个使用 EntityFramework 的项目。我的解决方案的结构基本上是这样的：

*   UI 项目（包含控制器和视图）
*   模型项目（包含 EntityFramework 模型）
*   服务项目（包含与模型项目对话以将模型项目中的实体提供给 UI 项目的服务类）

我的控制器将 Entity Framework 创建的实体直接传递给视图。

它既好又简单。

在过去，我会创建单独的视图模型类并从 EntityFramework 创建的实体映射到这些视图模型。但现在我很难明白这一点。

我目前正在帮助一个项目，该项目从实体框架生成的实体映射到视图模型。它实际上使用[AutoMapper](http://automapper.org/)来执行此操作。

现在，这一切似乎都是付出了很多努力和代码，却收获甚微。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T17:17:39.407

我可以想到一些单独的视图模型类层是一种好方法的情况，我将尝试用通用 ORM 工具和通用 MVC 框架来解释它们 - 请注意，这两者都不是案例特定于带有实体框架的 ASP.NET MVC 框架（甚至也不适用于 .NET 中的编程......）。

*另外：请注意，在以下几段中，我**仅**专门指视图模型。我将在本文末尾解决诸如批量分配漏洞之类的问题。*

### 原因 1：只给 View 层所需的数据，仅此而已

这是一个有点“纯粹”的目标——在真正的 MVC 应用程序中，视图层只能访问它目前需要的数据，而没有其他权限。视图模型对象现在成为从视图层到控制器的*规范：* *“这是我需要显示您请求的视图的数据。”* 为了遵守基本的 MVC 原则，您需要确保所有关于显示哪些数据的决定都由控制器做出。

换句话说，如果你想显示一个用户的名字和姓氏、用户名和图片，你不需要（或不想）给视图层一个对象，它也有关于用户密码、角色的信息（或者，取一些可能不那么敏感的属性，高度或中间名）。相反，您给视图一个对象，该对象具有名字、姓氏、用户名和图片的属性，而视图只决定如何呈现数据。这样，您就可以确定呈现*什么*数据的决定留在控制器层中。

### 原因 2：避免 ORM 工具的跟踪能力出现问题

一些 ORM 工具 - 甚至一些返回常规对象的工具¹ - 使用非常复杂的方法来跟踪您从数据层获得的对象的更改，以便更轻松地更改记录。例如，您可能会从数据存储中获取一个对象，更改该实例的一些属性，然后调用`save()`方法在其他地方，并且对象在数据库中更新。根据 ORM 工具，将您的 ORM 实体转发到视图层可能会产生任何范围的后果，从性能问题（最坏的情况：数据库连接保持打开）到不必要的影响（例如，视图层中的错误会更改数据存储）。为了避免这些，在将实体发送到应用程序管道太远之前，将您的实体重新映射到与您的 ORM 工具无关的“真正的常规对象”。视图模型是实现这一目标的一种（多种方式）。

请注意，这是否必要完全取决于您的 ORM 工具。我不太了解 Entity Framework 的内部工作原理，无法知道您是否需要关心 - 但在 EF 的（非常）早期版本中，这是一个问题，至少在不使用 Code-First 方法时是这样。

### 结论：你必须关心吗？

**不，不一定。**如果没有视图模型，您可能会做得很好，在这种情况下，它们只是另一层抽象，除了复杂性之外并没有真正为您的应用程序增加任何东西。这一切都归结为您的 ORM 工具是否对您的代码提出任何要求，以及您是否是“MVC 纯粹主义者”。

### 旁注：但是批量分配漏洞呢？

[Queti-Mporta](https://stackoverflow.com/users/84395/queti-mporta)已经[指出](https://stackoverflow.com/a/15391469/38055)批量分配漏洞可能是一个问题。我同意这是一个严重的问题，但我不同意通过使用*视图模型*来解决它。

对我来说，*视图模型是**从控制器到视图*的数据传输对象，帮助控制器整理和汇总应该*显示*的数据。为了避免诸如批量分配漏洞之类的问题，我通常使用*编辑模型*，它与视图模型非常相似，但*方向相反——*即*控制器*。不是每个人都做出这种区分——我不太在乎你是否这样做。但是使用这个词汇表，我建议在您让用户更改您的数据时*始终*使用*编辑*模型，并且仅在对您有帮助时才使用*视图模型。*

* * *

¹在 .NET 中，通常称为“POCO”或普通旧 CLR 对象。Java 在 POJO（Plain Old Java Objects）中有它的等价物，如果你能想到一种可以在面向对象编程中使用的语言，那么该语言也有它的等价物。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T16:48:29.467

我个人喜欢使用 ViewModel，因为它们可以包含特定于视图的信息。但主要是为了防止将我的实体直接暴露在视图上。

另一个好处是避免[批量分配漏洞](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)。这些也[存在于 Ruby 中](http://www.pcworld.com/article/251259/user_hacks_github_to_showcase_vulnerability_after_rails_developers_dismiss_his_report.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:46:27.450

我会看一下这个问题 What is [ViewModel in MVC](https://stackoverflow.com/questions/11064316/what-is-viewmodel-in-mvc)，它解释了 ViewModel 的用途。

将模型直接从您的实体传递到视图中没有任何问题，但是当您的模型与您需要的数据不完全匹配时，可以使用 ViewModel。

# c - 确定结构中的无符号整数值是否已设置

> ID：15391324
> 
> 赞同：0
> 
> 时间：2013-03-13T16:42:02.140
> 
> 标签：c, struct

想象一下你有：

我的文件.h

```
typedef struct _myStruct myStruct;

struct _myStruct
{
    uint32_t uData1;
    uint32_t uData2;
    uint32_t uData3;
    /* More data members */
}

void myStructSetData(myStruct * const pMyStruct, const uint32_t uData1, const uint32_t uData2, const uint32_t uData3)
{
    if (!pMyStruct)
        return

    pMyStruct->uData1 = uData1;
    pMyStruct->uData2 = uData2;
    pMyStruct->uData3 = uData3;
} 
```

主程序

```
int main(void)
{
    ...
    /* myStructSetData(pMyStruct, 1, 2, 3); */
    ...
    myStructBuild(pMyStruct);
    ...
} 
```

我提供了 myStructSetData()，但用户可能不一定使用此函数来设置 uData1、2 和 3。在 myStructBuild() 中，我想知道是否设置了 uData1、2 和 3，除非我在创建 pMyStruct 或使用 bIsData1Set 等布尔值时初始化了它们（我想避免）。

那么将uData1、uData2和uData3初始化为-1有意义吗？

因此，在 myStructBuild() 中，我会进行如下检查：

```
if (pMyStruct->uData1 != -1)
{
    /* Include uData1 when building */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:52:18.230

您可以在帖子中使用**魔法/无效**值，例如**-1**，或者更好的是，使用特殊的标志字段：

```
struct _my_struct
{
    int32_t field1;
    int16_t field2;
    int64_t field3;

    bool    field1_valid;
    bool    field2_valid;
    bool    field2_valid;
}; 
```

这将简化编码，尤其是在以下示例中：

```
struct _my_struct x;
memset(&x, x, sizeof(x)); 
```

即，当将所有值重置为零时，它会使所有值**unset**。

当然，用户必须设置“有效”标志：

```
x.field1_valid = 1;
x.field1 = 444; 
```

您可以稍后在您的代码中使用检查。

根据您的需要和偏好，有效性字段可以单独或组合成一个位字段：

```
struct _my_struct
{
    int32_t field1;
    int16_t field2;
    int64_t field3;

    int    field1_valid:1;
    int    field2_valid:1;
    int    field2_valid:1;
}; 
```

它的用法与上面相同，但存储大小更小（如果重要的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:53:20.303

如果`uData`变量可以具有任何有效的 unsigned int 值，则否。您不能使用`-1`，因为它只会存储`UINT_MAX`在变量中（假设 int 是 32 位）。

If you'll never need to store more than `UINT_MAX`, and you can change your structure variables type, you could define a larger type if available (e.g. `uint64_t`), in which case you'd be able to store a value higher than the allowed range (such as `-1` converted) to mark as uninitialised. This is the same approach as a file stream returning `-1` at EOF, thus requiring an `int` rather than a `char`.

# javascript - 如何使用 bootstrap/jquery 折叠/展开列表

> ID：15391325
> 
> 赞同：4
> 
> 时间：2013-03-13T16:42:03.383
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我刚开始使用 twitter-bootstrap

在我的网站中，我想像这样切换包含文件夹内容的列表：单击`<i class="icon-folder-open">`它时应该切换到`<i class="icon-folder-close">`并且它应该**隐藏**项目 1 和项目 2

这是我的初始代码，它显示文件夹打开图标和该文件夹中的所有项目。

```
<a href="#"><i class="icon-folder-open"></i></a>&nbsp;Item in folder</li>
<ul>item 1</ul>
<ul>item 2</ul> 
```

为了更清晰，我想添加屏幕截图，但找不到将其放在这里的方法。如果问题不清楚，请告诉我，我会尝试解释更多。

我知道可能有数百万种方法可以做到这一点。我正在寻找一些小而高效的东西，并且在 bootstrap/jQuery 领域内。

这是打开时的截图

[http://i47.tinypic.com/2dj5ok6.png](http://i47.tinypic.com/2dj5ok6.png)

当它关闭时

[http://i49.tinypic.com/1dzlna.png](http://i49.tinypic.com/1dzlna.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T17:17:17.193

-编辑-

更新了 plunk 以反映 OP 提供的屏幕截图 -> [plunk](http://plnkr.co/edit/2PUiNqdQKLsBVhyeKLtm?p=preview)

* * *

操作，

[http://plnkr.co/edit/2PUiNqdQKLsBVhyeKLtm?p=preview](http://plnkr.co/edit/2PUiNqdQKLsBVhyeKLtm?p=preview)你想做什么？

用户单击按钮 -> 切换其他元素的开/关 -> 切换按钮的图标`icon-folder-open`/ `icon-folder-close`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T19:12:04.360

为了避免这个问题，我在 li 中使用了 p 元素的 line-height。所以带有自动高度的 li 给了我我需要的尺寸。

# android - 如何从 Android 中的自定义 CameraView 捕获图像？

> ID：15391329
> 
> 赞同：36
> 
> 时间：2013-03-13T16:42:19.113
> 
> 标签：android, android-camera, surfaceview, image-capture, camera-view

我需要*从**屏幕*的**所需部分****捕获图像** 。

 *****从**相机***捕捉图像*。*

 *当时*其他画面内容不变*。

![在此处输入图像描述](../Images/bee6927b49c843a8942e720d446f9e8a.png)

这怎么**可能**？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T17:22:45.367

尝试使用**Surface View**创建*动态* **相机**视图并设置在您需要的部分。

以下代码尝试

**变量设置类级别（全局）**

```
Button btn_capture;
Camera camera1;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
public static boolean previewing = false; 
```

**onCreate()**方法中的以下代码

```
getWindow().setFormat(PixelFormat.UNKNOWN);
    surfaceView = new SurfaceView(this);
    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
btn_capture = (Button) findViewById(R.id.button1);

surfaceView.setBackgroundResource(R.drawable.your_background_image);

if(!previewing){

        camera1 = Camera.open();
        if (camera1 != null){
            try {
                camera1.setDisplayOrientation(90);
                camera1.setPreviewDisplay(surfaceHolder);
                camera1.startPreview();
                previewing = true;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

btn_capture.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(camera != null)
            {
                camera1.takePicture(myShutterCallback, myPictureCallback_RAW, myPictureCallback_JPG);

            }
        }
    }); 
```

以下代码放在您*的类中的***onCreate() 之后**。

 *```
ShutterCallback myShutterCallback = new ShutterCallback(){

    public void onShutter() {
        // TODO Auto-generated method stub
    }};

PictureCallback myPictureCallback_RAW = new PictureCallback(){

    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub
    }};

PictureCallback myPictureCallback_JPG = new PictureCallback(){

    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub
        Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);

        Bitmap correctBmp = Bitmap.createBitmap(bitmapPicture, 0, 0, bitmapPicture.getWidth(), bitmapPicture.getHeight(), null, true);

    }};

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub
    if(previewing){
        camera1.stopPreview();
        previewing = false;
    }

    if (camera1 != null){
        try {
            camera1.setPreviewDisplay(surfaceHolder);
            camera1.startPreview();
            previewing = true;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

        camera1.stopPreview();
        camera1.release();
        camera1 = null;
        previewing = false;

} 
```

在**AndroidManifest.xml**中给予**user-permissions**。

```
<uses-permission android:name="android.permission.CAMERA"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.camera.front" android:required="false"/> 
```

并且也不要忘记**（实现 SurfaceHolder.Callback ）**类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T03:16:57.093

我已经创造了那种相机。我所做的是，我用图像覆盖了相机的其他区域，并将图像的中心部分剪切并保存为 png 文件，以使中心透明。

您将使用该图像设置框架的背景图像（相机预览）。这样它看起来就像相机只是透明或圆形的那部分。

[我使用本教程从相机设备http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)打开、创建预览和拍照

在这部分（你可以在我上面提供的链接中看到这个）

```
 private PictureCallback mPicture = new PictureCallback() {

 @Override
 public void onPictureTaken(byte[] data, Camera camera) {
   //this is where you crop your image
    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inMutable = true;
    Bitmap bitmap = BitmapFactory
            .decodeByteArray(data, 0, data.length, opt);

    bitmap=Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
    Canvas mcanvas=new Canvas(bitmap);
    //do the cropping here, bitmap is the image you will use to crop

  }

 } 
```

按照本教程了解如何将图像裁剪为 [圆形 从 Android 中的位图中裁剪圆形区域](https://stackoverflow.com/questions/11932805/cropping-circular-area-from-bitmap-in-android)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T17:40:15.393

您可以使用表面视图。捕获图像后，您也可以进入位图并绘制画布

[http://developer.android.com/reference/android/view/View.html#onDraw(android.graphics.Canvas)](http://developer.android.com/reference/android/view/View.html#onDraw(android.graphics.Canvas))

[http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderMediaOverlay(boolean)](http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderMediaOverlay(boolean))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:51:16.163

如果屏幕的一部分实际上是一个视图，您可以只捕获这个视图。像这样：

```
Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),view.getHeight(),Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
view.draw(canvas); 
```

如果您只想捕获视图的一小部分，则必须计算此边的矩形。然后：

```
Bitmap bitmap = Bitmap.createBitmap(rect.width(),rect.height(),Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
canvas.save();
canvas.translate(-rect.left,-rect.top);
view.draw(canvas);
canvas.restore(); 
```

这只是一个伪代码，但我希望你能明白。只需翻译并仅绘制您需要的部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T10:29:53.083

我在 ApiDemos 应用程序中使用 CameraPreview 并根据您的要求对其进行编辑。

首先，将 Preview 类的代码复制到同一个包中的一个新的类文件中，这样就可以公开了，你可以在 xml 布局文件中声明它。请记住再添加一个构造函数，如下所示：

```
public Preview(Context context, AttributeSet attrs) {
    super(context, attrs);
    mSurfaceView = new SurfaceView(context);
    addView(mSurfaceView);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
} 
```

具有样本宽度和高度的样本布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Abow"/>

   <com.example.android.apis.graphics.Preview
       android:id="@+id/camera_view"
       android:layout_width="240dp"
       android:layout_height="180dp">
   </com.example.android.apis.graphics.Preview>     

   <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Below"/>

</LinearLayout> 
```

在 CameraPreview 活动的 onCreate() 方法中，更改 setContentView 部分，如下所示：

```
setContentView(R.layout.camera_layout);
mPreview = (Preview) findViewById(R.id.camera_view); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T15:29:31.717

使用 TextureView 进行预览，根据需要设置 layout_width 和 layout_height。这是代码：

```
public class MainActivity extends Activity implements TextureView.SurfaceTextureListener {
    private Camera mCamera;
    private TextureView mTextureView;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mTextureView = (TextureView) findViewById(R.id.textureView);
        mTextureView.setSurfaceTextureListener(this);
    }

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int i, int i2) {
        mCamera = Camera.open();

        try {
            mCamera.setPreviewTexture(surfaceTexture);
            mCamera.setDisplayOrientation(90);
            mCamera.startPreview();
        } catch (IOException exception) {

        }
    }

    @Override
    public void onSurfaceTextureSizeChanged(SurfaceTexture surfaceTexture, int i, int i2) {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
        mCamera.startPreview();
        mCamera.release();
        return true;
    }

    @Override
    public void onSurfaceTextureUpdated(SurfaceTexture surfaceTexture) {
        //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

和 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <TextureView
        android:layout_gravity="center"
        android:id="@+id/textureView"
        android:layout_width="200dp"
        android:layout_height="300dp"/>
</LinearLayout> 
```******

# android - 以编程方式更改小部件更新间隔android

> ID：15391334
> 
> 赞同：1
> 
> 时间：2013-03-13T16:42:38.117
> 
> 标签：android, android-widget

我正在我的应用程序中处理 Android 小部件。我有一个设置屏幕，用户可以从中选择小部件的内容和小部件的更新间隔。有 AppWidgetProviderInfo API 但不知道如何使用它或者有没有其他方法可以更改小部件更新间隔？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:39:33.100

> 还有其他方法可以更改小部件更新间隔吗？

而不是使用`android:updatePeriodMillis`，您将需要使用`AlarmManager`来安排来控制和更新您的应用程序小部件。您不能`android:updatePeriodMillis`在运行时进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-27T16:00:57.253

在 onUpdate void 中的 AppWidgetProvider 类中添加以下代码。

```
int updateTime = 1800000; //30 min
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                               System.currentTimeMillis(),
                                updateTime,
                                pendingIntentAlarm); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T18:13:45.017

您可以查看 malubu 这个[博客上](http://malubu.wordpress.com/2012/06/05/take-your-time-widgets-and-alarmmanager/)提供的解决方案， 并查看[malubu 的 github 上的源代码](https://github.com/manhluong/Various/tree/master/MaLuBuTestWidget)

# actionscript-3 - 来自 XML 的 AS3 随机图像 - 永不重复

> ID：15391335
> 
> 赞同：1
> 
> 时间：2013-03-13T16:42:40.630
> 
> 标签：actionscript-3, flash, flash-cs5, flash-cs4, banner

我正在 Flash 中创建一个横幅广告，一旦页面加载，它会显示来自 XML 文件的 3 个随机图像。我的问题是它偶尔会重复。我已经包含了我的代码，有什么建议吗？

* * *

```
var pHeight:Number = 84;
var pWidth:Number = 120;

var listLoader:URLLoader = new URLLoader( new URLRequest("www.example.com/example.xml") );
var picLoader:Loader = new Loader();

listLoader.addEventListener(Event.COMPLETE, gotList);

function gotList(evt:Event):void {
    var xmlData:XML = XML(listLoader.data);
    var numImages:Number = xmlData.picture.length();
    var stImage:String = xmlData.picture[Math.floor(numImages*Math.random())].toString();

    picLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, gotPic);
    picLoader.load( new URLRequest(stImage) );

    listLoader.removeEventListener(Event.COMPLETE, gotList);
}

function gotPic(evt:Event):void {
    var thisBmp:Bitmap = Bitmap(evt.target.content);
    thisBmp.x = 0;
    thisBmp.y = 0;
    var thisWidth:Number = thisBmp.width;
    var thisHeight:Number = thisBmp.height;

    thisBmp.scaleX = pWidth/thisWidth;
    thisBmp.scaleY = pHeight/thisHeight;
    addChild(thisBmp);

    picLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, gotPic);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:00:34.137

正如评论中提到的，您需要将 XML 的加载移出`MovieClip`您的主/文档类（或者如果您正在处理时间线，您可以将它放在那里......我不宽恕这种行为，我只想不管你用什么方法都能回答你的问题）。

一次加载 XML 后，您可以从那里抓取图像，将它们放入 中`Array`，然后对其进行随机排序：

```
var images:Array = [];
for each(var imgObj:XML in xml.img){
    images.push(imgObj.toString());
}
images.sort(function(a:Object,b:Object):int{return Math.random() > .5 ? -1 : 1}) 
```

您可能需要修改上面的代码以适应 XML 的格式。

您要做的下一件事是在您的上创建一个公共方法，该方法`MovieClip`将允许您为该剪辑设置图像：

```
function setPic(stImage:String):void {
    picLoader = new Loader();
    picLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, gotPic);
    picLoader.load( new URLRequest(stImage) );
    addChild(picLoader);
} 
```

最后，您可以使用此`setPic`方法在您的每个实例上设置图像`MovieCilp`：

```
for(var i:int = 0; i < images.length; i++)
{
    this["mc"+(i+1)].setPic(images[i]); 
} 
```

`MovieClip`这是假设您的实例有一定的命名约定（ `mc1`，`mc2`等）

# php - 用白色背景扩展额外的图像大小（不调整大小）？

> ID：15391337
> 
> 赞同：0
> 
> 时间：2013-03-13T16:42:45.567
> 
> 标签：php, image-processing

让我们说用户将图像上传到我的网站到任何大小......现在我想扩展图像（而不是调整大小）。这样我就可以在该扩展空间上放置一些标题/水印。

我怎样才能实现这一点或向我指出一些特定的功能也会很有用。

只是一个例子。像这张图片一样，他在底部放了水印和其他细节。 [http://taklong.com/landscape/A/237492DSCN0029.JPG](http://taklong.com/landscape/A/237492DSCN0029.JPG)

谢谢你和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:53:55.243

您可以使用[PHP 的 GD 库来完成](http://php.net/manual/en/book.image.php)。

可以使用`imagecreatetruecolor`, `imagecreatefrompng`（或 JPG 或您用于水印的任何格式）和`imagecopyresized`.

例如： http: [//php.net/manual/en/image.examples-watermark.php](http://php.net/manual/en/image.examples-watermark.php)

# android - 使用 Maven 从 github 导入 apklib

> ID：15391342
> 
> 赞同：6
> 
> 时间：2013-03-13T16:42:58.757
> 
> 标签：android, facebook, maven, github, repository

我正在尝试在我的 Maven Android 应用程序中使用 Facebook Android SDK。为此，我使用了自定义 maven 存储库（[https://github.com/avianey/facebook-api-android-maven](https://github.com/avianey/facebook-api-android-maven)）。我注意到 Android 支持包已经过时，并创建了我自己的 github 存储库（它是完全相同的项目，除了 pom）。这工作了一段时间。但是，当我的团队成员想要导入 maven 依赖项时，它抛出了一些异常。

```
Error when importing module '~apklib-com.github.bertdecock_facebook-android-ahoy-api_3.0.0': Cannot find file C:\Users\Bert\.m2\repository\com\github\bertdecock\facebook-android-ahoy-api\3.0.0\facebook-android-ahoy-api-3.0.0.apklib
17:19:50 Error when importing module '~apklib-com.github.bertdecock_facebook-android-ahoy-api_3.0.0': Cannot find file C:\Users\Bert\.m2\repository\com\github\bertdecock\facebook-android-ahoy-api\3.0.0\facebook-android-ahoy-api-3.0.0.apklib
17:19:50 Error when importing module '~apklib-com.github.bertdecock_facebook-android-ahoy-api_3.0.0': Cannot find src directory in C:/Users/Bert/Development/IntelliJ Projects/SDProject/AndroidApp/gen-external-apklibs/com.github.bertdecock_facebook-android-ahoy-api_3.0.0 
```

我从本地存储库中删除了 apklib，并注意到它不再导入。我不知道为什么它第一次起作用。

这是我在我的 pom 中用来导入原始项目的：

```
<repositories>  
  ...  
  <repository>  
    <id>The mavenized Facebook Android API</id>  
    <url>http://avianey.github.com/facebook-api-android-maven/</url>  
  </repository>  
</repositories>

...

<dependencies>
  ...
  <dependency>
    <groupId>com.github.avianey</groupId>
    <artifactId>facebook-android-api</artifactId>
    <version>3.0.0</version>
    <type>apklib</type>
  </dependency>
</dependencies> 
```

这就是我导入自己的自定义项目的方式（[https://github.com/bertdecock/facebook-android-ahoy-api](https://github.com/bertdecock/facebook-android-ahoy-api)）：

```
<repository>
    <id>The mavenized Facebook Android API</id>
    <url>https://github.com/bertdecock/facebook-android-ahoy-api/</url>
</repository>

<dependency>
    <groupId>com.github.bertdecock</groupId>
    <artifactId>facebook-android-ahoy-api</artifactId>
    <version>3.0.0</version>
    <type>apklib</type>
</dependency> 
```

当我在本地存储库中恢复旧的 apklib 时，它工作得很好。删除它，它停止工作。

但是，当我尝试更新我的依赖项时，maven 确实找到了 facebook 项目 pom 并将其放入我的本地存储库中。

任何关于为什么会发生这种情况（以及如何解决它）的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:07:34.413

尝试`_maven.repositories`从本地 Maven 存储库中删除所有文件。他们掌握有关文物来源的信息。

Maven 尝试从旧位置（保存在 _maven.repositories 中）更新您的 jar，但失败了。这里的假设是在不同的远程存储库上的相同的 ftifact 可能是不同的。

要删除所有`_maven.repositories`内容，您可以使用以下命令：

```
find ~/.m2/ -name _maven.repositories | xargs rm 
```

# ios - 如何在 UIAlertView 的中心添加 UIActivityIndi catorView？

> ID：15391344
> 
> 赞同：1
> 
> 时间：2013-03-13T16:42:58.733
> 
> 标签：ios, uiactivityindicatorview, alertview

作为标题，我想在 UIAlertView 实例的中心添加一个 UIActivityIndi​​catorView 实例。这是我的代码：

```
 alertView  = [[UIAlertView alloc]initWithTitle:@"Processing" message:@"" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil, nil];

    CGRect screenRect = [[UIScreen mainScreen] bounds];
indicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(screenRect.size.width/2, screenRect.size.height/2,50,50)];
[alertView addSubview: indicator];
[indicator startAnimating];
[alertView show]; 
```

我看到的只是警报视图。我犯了什么错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T16:46:42.730

在设置警报视图框架中的 x 和 y 位置时，您忘记考虑指示器的宽度和高度。

```
indicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(roundf((screenRect.size.width - 50) / 2), roundf((screenRect.size.height - 50) / 2),50,50)]; 
```

编辑：这正是我通常使用的那个：（不要忘记释放东西等）

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Loading..." message: nil delegate:self cancelButtonTitle: nil otherButtonTitles: nil];
UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(125, 50, 30, 30)];
    progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
[alert addSubview: progress];
[progress startAnimating];
[alert show]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T02:56:28.090

IOS 7+

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Loading data" message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles: nil];

UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[indicator startAnimating];

[alertView setValue:indicator forKey:@"accessoryView"];
[alertView show]; 
```

并**解雇**它

```
[alertView dismissWithClickedButtonIndex:0 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T12:38:17.243

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Loading..." message: nil delegate:self cancelButtonTitle: nil otherButtonTitles: nil];
UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame: CGRectMake(125, 50, 30, 30)];
    progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
[alert addSubview: progress];
[progress startAnimating];
[alert show]; 
```

# excel - 带有 if 函数的 VBA 代码（取自单元格的值）

> ID：15391351
> 
> 赞同：1
> 
> 时间：2013-03-13T16:43:08.387
> 
> 标签：excel, vba

我有 VBA 代码，它使用 countif 函数并检查值“United States”是否填充在测试列中*（参见下面的代码）*。

我想让它更灵活，我希望它从特定列（例如 A2）而不是静态值“美国”中获取数据。

我知道应该修改这段代码

```
Debug.Print "=IF(RC[" & CStr(FormulaCol - LookupCol - 1) & "]=""United States"",1,0)"
ActiveCell.Offset(0, FormulaCol - 1).FormulaR1C1 = "=IF(RC[" & CStr(LookupCol -     FormulaCol) & "]=""United States"",1,0)" 
```

我尝试使用简单的函数代码 =IF(B2=A2,1,0) 并将 A2 放入代码中。我所有的尝试都返回了语法错误。

**我的宏**

```
Sub bbb()
Dim FormulaCol As Long
Dim LookupCol As Long
Dim TotalRows As Long
Dim TotalCols As Long
Dim i As Long

Sheets("Sheet1").Select
TotalRows = ActiveSheet.UsedRange.Rows.Count
TotalCols = ActiveSheet.UsedRange.Columns.Count

For i = 1 To TotalCols
If Cells(1, i).Value = "Test" Then
    LookupCol = i
    Exit For
End If
Next

For i = 1 To TotalCols
If Cells(1, i).Value = "Values" Then
    FormulaCol = i
    Range("A2").Activate
    Debug.Print "=IF(RC[" & CStr(FormulaCol - LookupCol - 1) & "]=""United States"",1,0)"
    ActiveCell.Offset(0, FormulaCol - 1).FormulaR1C1 = "=IF(RC[" & CStr(LookupCol - FormulaCol) & "]=""United States"",1,0)"
    Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    .Value = .Value
    End With
End If
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:03:14.407

尝试在函数中使用`R2C1`而不是。`A2`这样做的原因是您正在使用`Range.FormulaR1C1`，它只接受 RC 样式的引用。

将公式分配给单元格的 VBA 行将如下所示：

```
ActiveCell.Offset(0, FormulaCol - 1).FormulaR1C1 = _
    "=IF(RC[" & CStr(LookupCol - FormulaCol) & "]=R2C1,1,0)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:03:45.677

...替换`"]=""United States"",1,0)"`为`"]=" & Range("A2").Value & ",1,0)"`

这应该够了吧...

# mysql - 用 PHP 清理撇号

> ID：15391352
> 
> 赞同：0
> 
> 时间：2013-03-13T16:43:12.797
> 
> 标签：mysql, php, str-replace, apostrophe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:54:28.727

不要担心自己尝试清理数据（即，此时您正尝试删除撇号...）以进行数据库插入。这是一个已解决的问题。

最好的解决方案是使用[PDO](http://php.net/manual/en/book.pdo.php)数据库连接器通过准备好的查询插入数据。

根本不需要对插入进行验证/清理 - 当您允许时，您的数据库将正确存储所有数据。

如果你还在使用`mysql_*`函数，**请不要**。它们非常陈旧，很快就会被弃用，如果不小心使用，应用程序中会出现许多编程错误和漏洞利用。

[这](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)是一个关于如何使用 PDO 的不错的教程。请记住，如果您正确地使用准备好的语句，您将无需担心消毒！您无需担心任何形式的撇号！PDO 连接器将为您完成！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:28:15.433

如果您想阻止 XSS 攻击，请尝试[filter_var 。](http://php.net/manual/en/function.filter-var.php)

```
$essay=filter_var($essay, FILTER_SANITIZE_STRING); 
```

如果您试图防止 sql 注入，请查找参数化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:58:11.983

虽然我不同意你对正确排版的危险仇杀，但我可以告诉你，你需要`str_replace()`为每一种不同类型的撇号式字符提供一个。`str_replace()`只需用你想要删除的每种撇号做一堆s 。

我仍然认为您试图通过避免而不是解决问题来解决问题。撇号完全可以放入 mysql 数据库中，它可能只需要具有不同的字符集或排序规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:50:08.253

你消毒它干什么？

提交到数据库？ [real_escape_string()](http://www.php.net/manual/en/mysqli.real-escape-string.php)

将其返回到获取请求的 URL？ [htmlspecialchars()](http://www.php.net/manual/en/function.htmlspecialchars.php)

您对其进行消毒的具体原因有助于我们找出最好的方法！

# java - 对 LayoutManager 的推荐

> ID：15391359
> 
> 赞同：0
> 
> 时间：2013-03-13T16:43:28.307
> 
> 标签：java, swing, layout-manager

我有三个组件需要垂直布局，以便顶部组件占据窗口可用高度的 30%，中间一个占 20%，底部一个占其余部分。

随着窗口大小的调整，它们也会改变，但它们相对于窗口的高度应该保持不变。

我应该使用哪个布局管理器来实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:48:36.160

如果您想使用标准布局管理器，请参阅[视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。`GridBagLayout`是你最好的选择，我想。

我自己可能会使用[miglayout](http://www.miglayout.com)来提高可维护性。

这两个都将您的面板划分为网格。然后，您可以为列和行分配调整大小的权重。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:51:07.030

查看[Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)并找到最适合您要求的（或多个 - 您可以使用多个布局管理器）。

我会推荐`GridBagLayout`。它有很多“微调”。`weigthy`是`GridBagConstraints`您感兴趣的领域 - 它管理调整大小时空间将如何分配给垂直元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:56:40.020

`Box layout`设置为 Y 轴 OR `Grid bag layout`。

在网格包布局中，您无论如何都可以设置“权重”。那就是将帮助您30％的那个。10%的东西

# google-apps-script - 自动更新公式

> ID：15391367
> 
> 赞同：1
> 
> 时间：2013-03-13T16:43:44.137
> 
> 标签：google-apps-script, google-sheets

因此，我有一个人员列表以及根据其他页面的内容自动更新的分数。我编写了一个脚本来自动更改最高值绿色的背景颜色。不幸的是，这似乎在手动激活时生效。

我的问题是：有没有办法让函数在不直接在单元格中时自动刷新或运行？

对于可能提出的问题，我深表歉意 - 让我尝试澄清一下：

我有下面的代码

```
 function HighestScore(){

  var range = SpreadsheetApp.getActiveSpreadsheet().getRangeByName("Total_Points");
  var data = range.getValues();
  var high = 0;
  var loc = 0;

  //set all backgrounds to white
  range.setBackgroundColor("#FFFFFF"); 

  for (var i = 0; i<7;i++){
    if (data[i] > high){
      high = data[i];
      loc = i
    }
    else{
      high = high;
    }
  }

//set the background color of the highest value green
      var lead = SpreadsheetApp.getActiveSpreadsheet().getRange("Totals!B"+(2+loc)).setBackgroundRGB(00,255,0)
    } 
```

从脚本窗口手动运行时，效果很好。从单元格运行时，我收到权限错误。有什么办法可以让我更新文档上的分数时，这个函数会自动更新最高分数的背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:32:10.697

onEdit：使用 onEdit 触发器，请参阅：[https](https://developers.google.com/apps-script/understanding_triggers) ://developers.google.com/apps-script/understanding_triggers 然后每次用户更改电子表格时代码都应该运行。

# ffmpeg - 如何将多个 ffmpeg 流组合成一个 4x4 拼贴画？

> ID：15391368
> 
> 赞同：8
> 
> 时间：2013-03-13T16:43:45.713
> 
> 标签：ffmpeg, ffserver

我有一台服务器，其中有 16 个视频采集卡通道，并想用 ffmpeg 流式传输它们，是否可以有另一个流输出，它是 16 个独特通道的 4x4 拼贴画？

编辑：添加赏金，因为尚未提交工作答案 - 将奖励给第一个可以显示代码以生成 16 个直播频道的 4x4 网格（输入设备为 http://localhost:8090/x.mpg其中 x= 数字 0-15，MPEG1VIDEO 格式的 352x288 视频，YUV420P 颜色为 24-30FPS） - 或引导我找到该解决方案的代码 - 输出将位于 http://localhost:8090/all.mpg 和将是 1408x1152 mpg 直播。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T17:19:42.623

我认为您正在寻找 ffmpeg 覆盖过滤器，这是带有一些示例的[文档。](http://ffmpeg.org/ffmpeg-filters.html#overlay-1)下面是 2x1 示例的副本，但您必须对流格式、帧大小和更多面板进行调整。

```
ffmpeg -i left.avi -i right.avi -filter_complex " 
nullsrc=size=200x100 [background]; 
[0:v] setpts=PTS-STARTPTS, scale=100x100 [left]; 
[1:v] setpts=PTS-STARTPTS, scale=100x100 [right]; 
[background][left]       overlay=shortest=1       [background+left];
[background+left][right] overlay=shortest=1:x=100 [left+right]
" 
```

或者，还有一种方法可以使用[VLC](http://wiki.videolan.org/Mosaic)生成马赛克。

# vbscript - VBScript：如何检查打印机是否连接？

> ID：15391372
> 
> 赞同：0
> 
> 时间：2013-03-13T16:43:51.283
> 
> 标签：vbscript, printers, network-printers, printer-properties

我对 VBScript 很陌生，所以请原谅我的任何愚蠢代码。

我正在尝试检查打印机是否已连接。

我正在使用以下代码：

```
usb1 = "Dell 2230d Laser Printer XL"
Set objWMIService = GetObject("winmgmts:\\.\root\CIMV2")
Set colItems = objWMIService.ExecQuery("SELECT * FROM Win32_Printer WHERE name='"&usb1&"'")

For Each objItem In colItems
    WScript.Echo "Printer Status: " & objItem.PrinterStatus
Next 
```

即使我删除了 USB 连接，状态也显示为 3（我读过的意思是在线）。怎么了？

# ajax - 第二个 jquery ajax 调用不起作用？

> ID：15391373
> 
> 赞同：0
> 
> 时间：2013-03-13T16:43:51.333
> 
> 标签：ajax, jquery

我不明白我做错了什么。第二个ajax调用不起作用，就像第一个一样

```
 $(".payment").click(function(){
     visitorID = $(this).attr('id');
     alert("Modal says "+visitorID);
     $.ajax({ url: 'update.php',
         data: {action: visitorID},
         type: 'post',
         success: function(output) {
                      alert(output);
                      window.location.reload(); //reload so we see the updated values

                  },
        });     
});//#end click
$(".generateInvoice").click(function(){
     barcode = $(this).attr('barcode');
    alert("Modal says "+barcode);
     //console.log('hello');
     $.ajax({ url: 'generateInvoice.php',
         data: {action: barcode},
         type: 'post',
         success: function(output) {
                      alert('hi '+output);
                     //console.log('hie');
                      //window.location.reload(); //reload so we see the updated values

                  },
        });     
});//#end click 
```

付款时我看到两个警报框，但使用 generateInvoice 我只看到第一个警报框。出于测试目的，我制作了 generateInvoice.php 只是阅读

```
echo ' there does it work';
die(); 
```

但是使用 .generateInvoice 时 $.ajax 中的警报不会显示

有什么资料吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:34:27.543

tx 一起思考，但我发现了我的愚蠢错误。

结果在 HTML 中按钮标签没有声明类型，所以我添加了

```
type="button" 
```

现在正在触发/调用ajax部分:)

因为第一个警报显示它并没有引起我的注意

问候

# mysql - 仅使用 mysql 查询语言的 while 循环

> ID：15391377
> 
> 赞同：0
> 
> 时间：2013-03-13T16:43:57.057
> 
> 标签：mysql, function, triggers, while-loop

我有一些触发器可以将通话记录作为 blob 保存到数据库中。我想添加一些额外的函数，每次都会使用触发器执行，并有助于将数据库保持在一定的大小限制内：函数必须执行以下操作：

必须计算 blob 文件的总和。当它大于给定值时，从表中删除最旧的记录。

我不知道我做错了什么。请看一下

```
WHILE ((select sum(OCTET_LENGTH(recordfile))/1000000 from callrecords)>0,1) 
DO
BEGIN
DELETE FROM callrecords ORDER BY id ASC LIMIT 1;
END;  
END WHILE; 
```

这是数据库的样子

```
-- ----------------------------
-- Table structure for `callrecords`
-- ----------------------------
CREATE TABLE `callrecords` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `uid` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  `callerid` int(11) NOT NULL,
  `extension` int(11) NOT NULL,
  `calldate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `recordfile` longblob,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=350 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:54:38.850

您应该将 blob 文件大小选择到循环外的变量中，然后通过在每次删除后重新运行 select 来更新变量。

基于您最初尝试的代码示例：

```
declare v_size int;
...
-- initialize the variable
select sum(OCTET_LENGTH(recordfile)) 
into v_size
from callrecords;

while (v_size > 1000000)
do
  DELETE FROM callrecords ORDER BY id ASC LIMIT 1;

  -- update the variable
  select sum(OCTET_LENGTH(recordfile))
  into v_size
  from callrecords;

end while; 
```

# winforms - Infragistics 功能区越过最大化的 MDI 子项

> ID：15391381
> 
> 赞同：0
> 
> 时间：2013-03-13T16:44:01.933
> 
> 标签：winforms, layout, ribbon, infragistics, mdi

我正在使用 Infragistics NetAdvantage WinForms bundle (v 2012 2) 中的 UltraToolbarsManager 在**现有**WinForm 应用程序中引入功能区工具栏。

我在主 MDI 容器窗体中设置了主功能区，然后在子窗体内的管理器中设置了一个附加功能区。
MdiMergeable 属性在两种形式中都设置为 true。

子窗体设置为填充 MDI 父级中的所有可用区域：
- `FormBorderStyle = FormBorderStyle.None`
- `Dock = DockStyle.Fill`
- 无控制框

问题是，当我显示（）我的子表单时，它占据了所有区域，工具栏正确合并，但我看到了表单边框。当我双击窗体的顶部边框时，边框消失并且 MDI 子项正确显示（或者，更好，如我所愿）。

如果我以这种方式更改表单样式：
`Dock = DockStyle.Fill` =>`WindowState = FormWindowState.Maximized`

表格顶部位于功能区下方，部分被它隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:19:10.320

如果您不将 Dock 设置为 DockStyle.Fill，则不会出现表单边框显示的问题，并且窗口在最大化时仍将占据 MDI 父级的整个区域。

除非您有设置 DockStyle.Fill 的特定原因，否则我建议您将其保留为 DockStyle.None。

请注意，如果您删除功能区并在其位置使用 Microsoft MenuStrip，您将看到类似的行为，因此功能区似乎不会影响此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:01:36.737

设置以下属性：

*   `FormBorderStyle = FormBorderStyle.None`
*   `Dock = DockStyle.None`

在表单对象构造期间并推迟到显示（`Layout`事件）之前此设置：

*   `WindowState = FormWindowState.Maximized`

并且表格正确显示。

我认为，当我在表单对象的构造过程中设置此值时，MDI 子可用区域没有考虑功能区占用的空间（可能在功能区占用部分空间之前评估可用区域）。
当我将设置推迟`WindowState = FormWindowState.Maximized`到 Layout 事件时，MDI 子可用区域会考虑到功能区占用的空间。

# regex - RewriteRule- 用于选择字符串的正则表达式

> ID：15391383
> 
> 赞同：1
> 
> 时间：2013-03-13T16:44:06.260
> 
> 标签：regex, apache, mod-rewrite, url-rewriting, httpd.conf

很抱歉这个问题的标题不好。

我的问题是我只想对以下 3 个 url 模式执行内部重写

```
localhost/abc
localhost/def
localhost/xyz 
```

替换为：

```
localhost/stackoverflow/abc
localhost/stackoverflow/def
localhost/stackoverflow/xyz 
```

我试图为任何字符串写一个正则表达式——^(.*)$。重写规则如下

```
RewriteRule  ^(.*)$ /stackoverflow/$1 
```

但它在无限循环中运行并搜索url

```
localhost/stackoverflow/abc/abc/abc/abc... 
```

我想要一个正则表达式，它只检测 3 个字符串中的任何一个 --> “abc”、“def”、“xyz”，然后将其附加到最终 url

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:46:12.387

仅检测这些字符串的正确方法是将它们包含在一个`OR`组中`(abc|def|xyz)`：

```
RewriteEngine On
RewriteRule ^(abc|def|xyz)$ stackoverflow/$1 [L] 
```

您的尝试被扔进了重写循环，因为`(.*)`匹配*所有内容*，包括`stackoverlfow`. `OR`在组前面加上`^`确保它只在 URI 的开头匹配。

# neo4j - 错误指示“执行必要的操作（tx 恢复/重新启动）”。这是怎么做到的？

> ID：15391384
> 
> 赞同：1
> 
> 时间：2013-03-13T16:44:09.680
> 
> 标签：neo4j

# 基础安装

我在 Amazon EC2 上有一个 m1.large Neo4j 服务器实例，我根据此处的说明进行设置：http: [//www.neo4j.org/develop/ec2](http://www.neo4j.org/develop/ec2)

我没有以任何方式改变该设置。

它已经工作了几个星期，几乎完美无瑕，偶尔会重新启动。但是，今天早上（2013 年 3 月 13 日）我无法从我的网络应用程序连接到它。

# 尝试#1：重新启动

从 EC2 管理控制台通过 Neo4j 服务器实例重新启动。重新启动后，我的网络应用程序似乎能够建立初始连接（通过 Neoid & Neography），因此我的网络应用程序至少可以启动。

然而，所有交易都失败了。我尝试在 webadmin/ 的端口 7474 上访问 Neo4j 的管理控制台，这是我看到的错误，特别是：

```
javax.transaction.SystemException: TM has encountered some problem, please perform neccesary action (tx recovery/restart) 
```

重启不是解决办法。

**访问 Web 面板时**尝试 #1 的完整错误跟踪：** [GIST #1](https://gist.github.com/pboling/5154753)。**

 **# 尝试#2：恢复

我发现一个[线程](https://groups.google.com/forum/#!msg/neo4j/CBvuMybTRFw/NMIOpBjrIYIJ)引用了一个看似相关的问题，这表明在控制台模式下启动 neo4j 将允许完全恢复而不会超时，所以我尝试了它，`SEVERE`结果更加清楚我的问题：

看起来这是根本原因：

```
Caused by: java.io.IOException: Unknown xid for identifier 8964 
```

**尝试 #2运行**的完整错误跟踪**`sudo /var/lib/neo4j/bin/neo4j console`：[GIST #2](https://gist.github.com/pboling/5154765)**

 **# 尝试#3：删除并重新开始

这是生产前的数据，所以我可以采取严厉的措施。我删除了数据库并重新开始。

```
sudo rm -rf /var/lib/neo4j/data/graph.db/
sudo sudo /var/lib/neo4j/bin/neo4j start 
```

我能够创建大约 50k rels 和 50k 节点，然后最多几个小时后错误又回来了。

# 尝试#4：再次恢复

我停止了 Neo4j 服务器，并将其加载为控制台 - 进行恢复。

**尝试 #4 恢复的完整跟踪**：运行`sudo /var/lib/neo4j/bin/neo4j console`：[GIST #3](https://gist.github.com/pboling/5157244)

恢复工作，所以我重新启动服务器作为守护进程。

**尝试 #4 启动守护进程的完整跟踪**：正在运行`sudo /var/lib/neo4j/bin/neo4j start`：[GIST #4](https://gist.github.com/pboling/5157255)

它工作了几分钟。然后再次回到这个错误：

```
TM has encountered some problem, please perform neccesary action (tx recovery/restart) 
```

从 Neography 执行脚本的尝试中可以看出新错误的完整跟踪：[GIST #5](https://gist.github.com/pboling/5157290)

# 调试

我现在认为，尽管已使用作为[m1.large 服务器遵循本指南的](http://www.neo4j.org/develop/ec2)一部分安装的 vanilla Neo4j ，但此配置存在一些问题。当我[在控制台模式下启动服务器时，](https://gist.github.com/pboling/5157244)这些是我看到的烦人的事情：

1.  `INFO ... Could NOT find resource [logback.groovy]`
2.  `INFO ... Could NOT find resource [logback-test.xml]`
3.  `ERROR ... Could not find resource corresponding to [custom-logback.xml]`
4.  和这个

    ```
    WARNING! Deprecated configuration options used. See manual for details
    cannot configure writers and searchers individually since they go together 
    ```

*更新*：我已经为这些默认配置问题提交了一个[单独的问题。](https://github.com/neo4j/neo4j/issues/625)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-27T08:22:05.580

问题是根设备空间不足。

我已经解决了我的问题，所以这里是修复的完整历史和解释：http: [//github.com/neo4j-contrib/neo4j-puppet/issues/3](http://github.com/neo4j-contrib/neo4j-puppet/issues/3)****

# algorithm - 打印平衡分区

> ID：15391385
> 
> 赞同：1
> 
> 时间：2013-03-13T16:44:12.413
> 
> 标签：algorithm, dynamic-programming

有两个数组，比如 A 和 B。每个数组中有 n 个条目，现在我们希望获得最小差异，如果我们为第 i 个条目选择每个 A 和 B 中的任何一个。确切的问题[在这里](http://opc.iarcs.org.in/index.php/problems/EQGIFTS)。

我已经解决了这个问题，现在如果我们添加打印分布，那么如何进行？根据我们选择的 A 或 B 中的哪一个，我们需要在每一行打印 A 或 B。例如：n=4 A:3,7 ,8,3 B:5,11,8,9

然后我们需要打印 AAAB ，我们得到 diff。作为1。

# oracle - 包装在分页选择语句和 ROWNUM 中的子查询的行为

> ID：15391392
> 
> 赞同：0
> 
> 时间：2013-03-13T16:44:41.123
> 
> 标签：oracle, pagination, rownum

我在少数情况下使用了以下“wapper”来实现分页，并且通常将其称为“标准分页选择”。因此，要对任何 select 语句的结果进行分页，只需将 select 语句包装在“标准分页选择”中即可。

```
 SELECT * FROM (SELECT a.*, ROWNUM rnum FROM ((

    ( subquery:  put your select * from .......  here ..)

)) a WHERE ROWNUM  <=  ${resultEnd} ) 
WHERE rnum  >=  ${resultStart} 
```

我的问题是关于分页位的行为和 ROWNUM 周围的魔法。据我了解，子查询不会***每次***都选择完整的结果集，而是在寻找确认或其他方式？

以下是对上面显示的分页行为的正确描述，例如，如果页面大小为 50：

选择：

*   第 1 页（例如 0-50）子查询选择 0-50 行
*   第 2 页（例如 51-100）子查询选择 0-100 行（外部查询然后将其限制为 50-100）
*   第 3 页（例如 101-150）子查询选择 0-150 行（外部查询将其限制为 101-150）
*   第 4 页（例如 151-200）子查询选择 0-200 行（外部查询然后将其限制为 151-200）
*   第 5 页（例如 201-250）子查询选择 0-250 行（外部查询然后将其限制为 201-250）

...等等，你可以看到模式。

您进入“页面”越远，子查询要做的工作就越多。这个对吗？如果是这样，ROWNUM 如何做到这一点？

提前致谢。并反馈赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:50:59.797

您的理解通常是正确的。`rownum <= end`一旦产生行，内部将“中断”内部查询`end`，而外部`rownum >= start`丢弃第一行。

`rownum`动态生成，优化器知道`rownum <`过滤器，因此它可以影响行源并停止它（`COUNT STOPKEY`在解释计划中查找行，如果它有效，你会看到）。

但是不能保证内部选择会停止。特别是，其中的一个`order by`子句可能会强制生成整个结果集，然后`rownum`过滤器会简单地丢弃该间隔之外的生成行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:25:23.800

If the query is well indexed and performs well, why not try using a materialized view? You can define rownum as a column and refresh the view on demand. Also just a heads up.. Oracle 12C is coming with an excellent support for pagination type query.

# django - django查看完整性错误

> ID：15391393
> 
> 赞同：0
> 
> 时间：2013-03-13T16:44:43.410
> 
> 标签：django, django-views

我需要以下代码的帮助。我想我快到了。我正在尝试创建一个用于编辑和添加新对象的视图。但是，在保存时，我收到下面列出的错误。

我想知道是否有人可以告诉我我哪里出错了？

谢谢你。

**视图.py**

```
def group(request, id=None):

    if id:
        group = get_object_or_404(Groups, pk=id)

    else:
        group = Groups()

        # If we had a POST then get the request post values.
    if request.method == 'POST':
        form = GroupFrom(request.POST)
        # Check we have valid data
        if form.is_valid():
            group = Groups(
                name=form.cleaned_data['name'],
                description=form.cleaned_data['description'],
                active=form.cleaned_data['active'],
                user=request.user
            )

            group.save()

    else:
        form = GroupFrom(instance=group)

    context = {'form': form}
    return render_to_response('contacts/group.html', context, context_instance=RequestContext(request)) 
```

**网址.py**

```
 (r'^group/new/$', 'contacts.views.group', {}, 'group_new'),
     (r'^group/edit/(?P<id>\d+)/$', 'contacts.views.group', {}, 'group_edit'), 
```

**模型.py**

```
class Groups(models.Model):
    """
     Stores all groups.
    """
    name = models.CharField(max_length=60)
    description = models.TextField(max_length=250)
    active = models.BooleanField()
    modified = models.DateTimeField(null=True, auto_now=True, help_text="Shows when object was modified.")
    created = models.DateTimeField(auto_now_add=True, help_text="Shows when object was created.")

    #FK
    user = models.ForeignKey(User, unique=True, related_name="user")

    def __unicode__(self):
        return self.name 
```

**错误**

**/contacts/group/edit/1/ 处的 IntegrityError（1062，“密钥 'user_id' 的重复条目 '1'”）**

**更新：所以这就是我现在所拥有的，它可以工作，但只能在编辑时不添加。添加时我仍然遇到相同的错误：**

```
def group(request, id=None):

    if id:
        # If we have an id try and get it and populate instance.
        group = get_object_or_404(Groups, pk=id)
        # If we have an instance check that it belongs to the login.
        if group.user != request.user:
            return HttpResponseForbidden()
    else:
        # If we don't have an id get the instance (which is blank here) and populate it with the user.
        group = Groups(user=request.user)

    # If we had a POST then get the request post values.
    if request.method == 'POST':
    # Populate the form with the instance.
        form = GroupFrom(request.POST, instance=group)
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            group.save()
            messages.add_message(request, messages.SUCCESS, 'Successfully Created/Updated Group')

    else:
        # Populate from at this point group with either be blank or have values.
        form = GroupFrom(instance=group)

    context = {'form': form}
    return render_to_response('contacts/group.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:18:32.377

您可以大大缩短您的代码：

```
class GroupForm(forms.ModelForm):
    class Meta:
        model = Group

    def __init__(self, *args, **kwargs)
        user = kwargs.pop('user')
        super(GroupForm, self).__init__(*args, **kwargs)
        self.user = user

def group(request, id=None):
    if id:
        instance = get_object_or_404(Groups, pk=id)
    else:
        instance = None

    form = GroupFrom(request.POST or None, instance=instance, user=request.user)

    if request.method == 'POST':
        if form.is_valid():
            group = form.save()
    return render_to_response('contacts/group.html', {'form': form},
        context_instance=RequestContext(request)) 
```

GroupForm 的简单覆盖`__init__`允许您从请求中提交用户，从而使您不必手动分配视图中的值。表单初始化中的`or`语句允许您在一个地方进行实例化，而不是在它是 GET 请求时使用单独的方法。

您拥有`unique=True`用户外键属性。在视图中手动分配它不会捕获任何验证。在实例化表单时分配属性应该在提交表单之前触发验证错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:15:33.653

尝试更换

```
 group = Groups(
            name=form.cleaned_data['name'],
            description=form.cleaned_data['description'],
            active=form.cleaned_data['active'],
            user=request.user
        ) 
```

经过 ：

```
 group.name=form.cleaned_data['name']
        group.description=form.cleaned_data['description']
        group.active=form.cleaned_data['active']
        group.user=request.user 
```

您`group = Groups(`只是删除了*group*变量的先前值。

# cuda - cudaMemcpyToSymbol 与 cudaMemcpy

> ID：15391394
> 
> 赞同：0
> 
> 时间：2013-03-13T16:44:47.087
> 
> 标签：cuda

我试图弄清楚为什么**cudaMemcpyToSymbol**对我不起作用。（但**cudaMemcpy**可以。）

```
// symbols:
__constant__ float flt[480];   // 1920 bytes
__constant__ int   ints[160];  // 640 bytes

// func code follows:
float* pFlts;
cudaMalloc((void**)&pFlts, 1920+640);  // chunk of gpu mem  (floats & ints)

// This does NOT work properly:
cudaMemcpyToSymbol(flt,pFlts,1920,0,cudaMemcpyDeviceToDevice);  // first copy
cudaMemcpyToSymbol(ints,pFlts,640,1920,cudaMemcpyDeviceToDevice);  // second copy 
```

第二个副本正在丢弃第一个副本 (flt) 的内容，第二个副本不会发生。（如果我删除第二个副本，第一个副本可以正常工作。）

结果：

```
GpuDumpFloatMemory<<<1,1>>>(0x500500000, 13, 320)  TotThrds=1   ** Source of 1st copy
  0x500500500: float[320]= 1.000
  0x500500504: float[321]= 0.866
  0x500500508: float[322]= 0.500
  0x50050050c: float[323]= -0.000
  0x500500510: float[324]= -0.500
  0x500500514: float[325]= -0.866
  0x500500518: float[326]= -1.000
  0x50050051c: float[327]= -0.866
  0x500500520: float[328]= -0.500
  0x500500524: float[329]= 0.000
  0x500500528: float[330]= 0.500
  0x50050052c: float[331]= 0.866
  0x500500530: float[332]= 1.000
  GpuDumpFloatMemory<<<1,1>>>(0x500100a98, 13, 320)  TotThrds=1     ** Dest of 1st copy
  0x500100f98: float[320]= 0.000
  0x500100f9c: float[321]= 0.500
  0x500100fa0: float[322]= 0.866
  0x500100fa4: float[323]= 1.000
  0x500100fa8: float[324]= 0.866
  0x500100fac: float[325]= 0.500
  0x500100fb0: float[326]= -0.000
  0x500100fb4: float[327]= -0.500
  0x500100fb8: float[328]= -0.866
  0x500100fbc: float[329]= -1.000
  0x500100fc0: float[330]= -0.866
  0x500100fc4: float[331]= -0.500
  0x500100fc8: float[332]= 0.000
  GpuDumpIntMemory<<<1,1>>>(0x500500780, 13, 0)  TotThrds=1      ** Source of 2nd copy
  0x500500780: int[0]= 1
  0x500500784: int[1]= 1
  0x500500788: int[2]= 1
  0x50050078c: int[3]= 1
  0x500500790: int[4]= 1
  0x500500794: int[5]= 1
  0x500500798: int[6]= 1
  0x50050079c: int[7]= 1
  0x5005007a0: int[8]= 1
  0x5005007a4: int[9]= 1
  0x5005007a8: int[10]= 1
  0x5005007ac: int[11]= 1
  0x5005007b0: int[12]= 0
  GpuDumpIntMemory<<<1,1>>>(0x500100818, 13, 0)  TotThrds=1      ** Dest of 2nd copy
  0x500100818: int[0]= 0
  0x50010081c: int[1]= 0
  0x500100820: int[2]= 0
  0x500100824: int[3]= 0
  0x500100828: int[4]= 0
  0x50010082c: int[5]= 0
  0x500100830: int[6]= 0
  0x500100834: int[7]= 0
  0x500100838: int[8]= 0
  0x50010083c: int[9]= 0
  0x500100840: int[10]= 0
  0x500100844: int[11]= 0
  0x500100848: int[12]= 0 
```

以下工作正常：

```
cudaMemcpyToSymbol(flt,pFlts,1920,0,cudaMemcpyDeviceToDevice);  // first copy
int* pTemp;
cudaGetSymbolAddress((void**) &pTemp, ints);
cudaMemcpy(ints,pFlts+480,640,cudaMemcpyDeviceToDevice);  // second copy 
```

结果：

```
 GpuDumpFloatMemory<<<1,1>>>(0x500500000, 13, 320)  TotThrds=1   ** Source of first copy
  0x500500500: float[320]= 1.000
  0x500500504: float[321]= 0.866
  0x500500508: float[322]= 0.500
  0x50050050c: float[323]= -0.000
  0x500500510: float[324]= -0.500
  0x500500514: float[325]= -0.866
  0x500500518: float[326]= -1.000
  0x50050051c: float[327]= -0.866
  0x500500520: float[328]= -0.500
  0x500500524: float[329]= 0.000
  0x500500528: float[330]= 0.500
  0x50050052c: float[331]= 0.866
  0x500500530: float[332]= 1.000
  GpuDumpFloatMemory<<<1,1>>>(0x500100a98, 13, 320)  TotThrds=1    ** Dest of first copy
  0x500100f98: float[320]= 1.000
  0x500100f9c: float[321]= 0.866
  0x500100fa0: float[322]= 0.500
  0x500100fa4: float[323]= -0.000
  0x500100fa8: float[324]= -0.500
  0x500100fac: float[325]= -0.866
  0x500100fb0: float[326]= -1.000
  0x500100fb4: float[327]= -0.866
  0x500100fb8: float[328]= -0.500
  0x500100fbc: float[329]= 0.000
  0x500100fc0: float[330]= 0.500
  0x500100fc4: float[331]= 0.866
  0x500100fc8: float[332]= 1.000
  GpuDumpIntMemory<<<1,1>>>(0x500500780, 13, 0)  TotThrds=1    ** Source of 2nd copy
  0x500500780: int[0]= 1
  0x500500784: int[1]= 1
  0x500500788: int[2]= 1
  0x50050078c: int[3]= 1
  0x500500790: int[4]= 1
  0x500500794: int[5]= 1
  0x500500798: int[6]= 1
  0x50050079c: int[7]= 1
  0x5005007a0: int[8]= 1
  0x5005007a4: int[9]= 1
  0x5005007a8: int[10]= 1
  0x5005007ac: int[11]= 1
  0x5005007b0: int[12]= 0
  GpuDumpIntMemory<<<1,1>>>(0x500100818, 13, 0)  TotThrds=1    ** Destination of 2nd copy
  0x500100818: int[0]= 1
  0x50010081c: int[1]= 1
  0x500100820: int[2]= 1
  0x500100824: int[3]= 1
  0x500100828: int[4]= 1
  0x50010082c: int[5]= 1
  0x500100830: int[6]= 1
  0x500100834: int[7]= 1
  0x500100838: int[8]= 1
  0x50010083c: int[9]= 1
  0x500100840: int[10]= 1
  0x500100844: int[11]= 1
  0x500100848: int[12]= 0 
```

当我查看坏情况时，似乎符号表发生了一些事情。如中，第一个复制目的地的数据非常熟悉。不像它已被覆盖，只是被移动了。就像指针是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:24:38.313

第二个副本对我来说看起来很糟糕。您已经定义了这个数组：

```
__constant__ int   ints[160];  // 640 bytes 
```

正如正确指出的那样，它是 640 字节长。

你的第二个副本是这样的：

```
cudaMemcpyToSymbol(ints,pFlts,640,1920,cudaMemcpyDeviceToDevice);  // second copy 
```

`pFlts`其中说，“从一个数组到另一个数组复制总共 640 个字节，数组`ints`中的存储位置从`ints`数组开头的 1920 个字节开始。”

这行不通。该`ints`数组只有 640 字节长。您不能选择一个包含 1920 字节的位置作为您的目的地。

从[cudaMemcpyToSymbol](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g2a229a704ade54887f7784e2e2dbd895)的文档中：

> offset- 从符号开始的偏移量（以字节为单位）

在这种情况下，符号是`ints`

可能你想要的是：

```
cudaMemcpyToSymbol(ints,pFlts+480,640,0,cudaMemcpyDeviceToDevice);  // second copy 
```

**编辑：** 为了回答关于错误检查的评论中的问题，我制作了这个简单的测试程序：

```
#include <stdio.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__constant__ int ints[160];

int main(){

  int *d_ints;
  cudaError_t mystatus;

  cudaMalloc((void **)&d_ints, sizeof(int)*160);
  cudaCheckErrors("cudamalloc fail");
  mystatus = cudaMemcpyToSymbol(ints, d_ints, 160*sizeof(int), 1920, cudaMemcpyDeviceToDevice);
  if (mystatus != cudaSuccess) printf("returned value was not cudaSuccess\n");
  cudaCheckErrors("cudamemcpytosymbol fail");

  printf("OK!\n");
  return 0;
} 
```

当我编译并运行它时，我得到以下输出：

```
returned value was not cudaSuccess
Fatal error: cudamemcpytosymbol fail (invalid argument at t94.cu:26)
*** FAILED - ABORTING 
```

这表明*在*这种情况下，来自 cudaMemcpyToSymbol 函数调用的错误返回值和*方法*`cudaGetLastError()`都返回错误。如果我在这个测试用例中将 1920 参数更改为零，错误就会消失。

# php - PHP：查找字符串中不同字母的数量

> ID：15391395
> 
> 赞同：7
> 
> 时间：2013-03-13T16:44:48.693
> 
> 标签：php

我想找出一个字符串包含多少个唯一字符。例子：

```
"66615888"    contains 4 digits (6 1 5 8).
"12333333345" contains 5 digits (1 2 3 4 5). 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T16:45:21.210

```
echo count( array_unique( str_split( '66615888'))); 
```

[演示](http://viper-7.com/DWMBje)

文件：

1.  [`count()`](http://php.net/count)- 计算数组中元素的数量
2.  [`array_unique()`](http://php.net/array_unique)- 查找数组中的唯一元素
3.  [`str_split()`](http://php.net/str_split)- 将字符串拆分为数组

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T16:47:48.037

[`count_chars`](http://php.net/count_chars)为您提供 的地图`char => frequency`，您可以将其总结为[`array_sum`](http://php.net/array_sum)：

```
$count = array_sum(count_chars($str)); 
```

或者，您可以使用将为您提供包含所有唯一字符的字符串的`3`模式：`count_chars`

```
$count = strlen(count_chars($str, 3)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T16:49:17.063

PHP 有一个计算字符的函数。

```
$data = "foobar";
$uniqued = count_chars($data, 3);// return string(5) "abfor"
$count = strlen($uniqued); 
```

请在[此处](http://php.net/manual/en/function.count-chars.php)查看文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-01T21:06:46.960

您可以使用以下脚本：

```
<?php
  $str1='66615888';
  $str2='12333333345';
  echo 'The number of unique characters in "'.$str1.'" is: '.strlen(count_chars($str1,3)).' ('.count_chars($str1,3).')'.'<br><br>';
  echo 'The number of unique characters in "'.$str2.'" is: '.strlen(count_chars($str2,3)).' ('.count_chars($str2,3).')'.'<br><br>';
?> 
```

输出：

“66615888”中的唯一字符数为：4（1568）

“12333333345”中的唯一字符数为：5（12345）

* * *

`count_chars()`这里模式下的PHP 字符串函数`3`生成一个包含所有唯一字符的数组。

PHP 字符串函数`strlen()`产生存在的唯一字符的总数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-17T16:09:17.113

这是另一个也适用于多字节字符串的版本：

```
echo count(array_keys(array_flip(preg_split('//u', $str, null, PREG_SPLIT_NO_EMPTY)))); 
```

# sql - EF 5.0 Code First dbContext Remove Child

> ID：15391400
> 
> 赞同：0
> 
> 时间：2013-03-13T16:44:58.307
> 
> 标签：sql, entity-framework, ef-code-first, dbcontext

我们正在使用一个简单的类别、产品示例进行测试。当我们使用整数作为键时，一切正常。但是，我们需要使用 GUID 键。在我们尝试删除子项（产品）之前，这也可以正常工作。我们得到一个异常，指出外键不能为空。在查看表格设计时，整数键显示为 Identity Yes，而 GUID 键显示为 Identity No。这是一个显示停止器，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:54:29.973

您应该`DatabaseGenerated`在这些 GUID 上设置属性，如[本 SO question](https://stackoverflow.com/questions/5270721/using-guid-as-pk-with-ef4-code-first)的答案所示。

# javascript - 通过 .txt 文件将 JSON 化的 HTTP 响应标头导入 Mongo 数据库

> ID：15391403
> 
> 赞同：0
> 
> 时间：2013-03-13T16:45:14.120
> 
> 标签：javascript, node.js, http, mongodb, header

JSON 化的 HTTP 响应标头的格式如下：

```
{
  "url": "aalfs.com",
  "statusCode": 301,
  "headers": {
    "date": "Tue, 12 Mar 2013 19:36:28 GMT",
    "server": "Strategi HTTPD V2R5M1",
    "connection": "Keep-Alive",
    "content-length": "0",
    "location": "/index.htm"
  }
} 
```

使用 MongoJS，我编写了 Mongo 来解释数据，其中包含三个主要变量 - `url`, `statusCode`, `headers`：

```
function site(url, statusCode, headers){
    this.url = url;
    this.statusCode = statusCode;
    this.headers = headers;
} 
```

与：`url`_`__id`

```
db.scrape.ensureIndex({url:1},{unique:true}); 
```

在我的代码中，我可以通过这个对象将 HTTP 响应头导入我的数据库：

```
var site1 = new site("www.thing.com", "300", {"header information"});

db.scrape.save(site1, function(err, savedUser){
    if(err||!savedUser) console.log("URL " + site.url + " not saved because of error " + err);
    else console.log("URL " + savedUser.url +" saved");
}); 
```

我的问题是 - 我正在寻找一种更方便/有效的方式将数百个 HTTP 响应标头重要到我的 Mongo 数据库中。我有数百个采用上述格式的 JSON 化 HTTP 响应标头，保存在 .txt 文件中。Mongo 是否可以简单地读取我的 .txt 文件并解释并导入到 Mongo 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:01:00.227

您可以使用 mongoimport。看看[这里的各种选项](http://docs.mongodb.org/manual/reference/mongoimport/)

您必须将 'url' 文字替换为 '_id'

# ruby-on-rails - 为什么rails创建和未定义的选择选项？

> ID：15391412
> 
> 赞同：0
> 
> 时间：2013-03-13T16:45:32.210
> 
> 标签：ruby-on-rails, ruby, select, angularjs

查看.erb

```
<select ng-model="integration.connector_one">
  <%=options_for_select(connectors, connectors[0])%>
</select> 
```

产生：

```
<select ng-model="integration.connector_one" class="ng-pristine ng-valid">
  <option value="? undefined:undefined ?"></option>
  <option value="1" selected="selected">Shopify</option>
  <option value="8">Spreadsheet</option>
  <option value="9">Pardot</option>
  <option value="10">Spreadsheet</option>
  <option value="11">Spreadsheet</option>
  <option value="12">Pardot</option>
</select> 
```

连接器是：

```
[["Shopify", 1], ["Spreadsheet", 8], ["Pardot", 9], ["Spreadsheet ", 10], ["Spreadsheet ", 11], ["Pardot", 12]] 
```

如何防止创建未定义的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:57:24.620

第二个参数`options_for_select`是可选`selected`参数，它可以是单个值，或者在多个选择元素的情况下，以及要选择的值数组。在这种情况下，它正在寻找具有值的选项`Shopify`并`1`标记那些被选中的选项。因为它没有找到`Shopify`（作为一个值），所以你得到了未定义的元素。

更改`connectors[0]`为`connectors[0][1]`仅传递第一个选项的值。

# vba - VBA MsgBox 在不到一秒的时间内关闭

> ID：15391414
> 
> 赞同：0
> 
> 时间：2013-03-13T16:45:35.253
> 
> 标签：vba, ms-word

我有一个`MsgBox`在给定秒数后自动关闭的脚本：

```
Sub Test1()
Dim AckTime As Integer, InfoBox As Object
Set InfoBox = CreateObject("WScript.Shell")
AckTime = 3
Select Case InfoBox.Popup("Click OK or do nothing within 3 seconds.", _
AckTime, "This is your Message Box", 0)
Case 1, -1
Exit Sub
End Select
End Sub 
```

问题是，我希望盒子在不到一秒的时间内关闭，也许是半秒，但是将其更改为`.5`，例如，不会做任何事情。事实上，我认为它根本不会关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:30:55.027

抱歉，Windows Script Host 方法 Popup 仅将整数作为延迟参数[source](http://msdn.microsoft.com/en-us/library/x83z1d9f%28v=vs.84%29.aspx)。

# dynamics-crm-2011 - 解决方案导入并不总是更新显示更改

> ID：15391415
> 
> 赞同：1
> 
> 时间：2013-03-13T16:45:37.210
> 
> 标签：dynamics-crm-2011

我有一个托管解决方案，作为对先前解决方案的更新，我将其导入组织。在此更新中，我将更改一些显示元素，例如子网格在表单上的位置。

导入解决方案后，我转到表单，网格已移动到新位置，但它仍然存在于旧位置，有效地复制了表单上的子网格。

发生这种情况是否有特殊原因？我尝试过不同的组织，它也在那里做同样的事情。看起来它正在将新旧解决方案合并在一起，而不是采用最新的更改，但我想不出它为什么会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:03:02.243

*   确保将旧的和新的都分配为非托管。
*   确保新版本的版本号高于旧版本。
*   确保组件的架构名称在两个版本中相同。
*   确保发布所有更改（请参阅[此可能的问题](http://konradviltersten.wordpress.com/2013/01/26/publishing-customizations-doesnt-take-effect-in-crm-on-line/)）。

# r - R中的if else语句

> ID：15391418
> 
> 赞同：2
> 
> 时间：2013-03-13T16:45:49.500
> 
> 标签：r, if-statement

所以我试图创建一个 if 语句，如果列数大于 1，那么它将对该矩阵进行多种形式的操作，如果矩阵的列数少于或等于 1，则不会进行分析。这是一些代码：

M <- NxN 矩阵

```
 if (ncol(M) > 1) {
      function1
      function2
      function3
      ...
 }
 else {} 
```

但是，当我这样做时，我不断收到以下错误：

```
 Error in if (ncol(M) > 1) { : argument is of length zero 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:53:06.330

您的`M`对象可能不是矩阵。我们将创建一个矩阵并查看您的代码输出什么，然后我们将探索一种您可能不小心将其更改为向量的方法，然后我们将了解如何对矩阵进行子集化，而不会错误地以向量结束。

```
N <- 10
M <- matrix(sample(1:100, N*N, replace=TRUE), N, N)

colTest <- function(M) {
    if (ncol(M) > 1) {
        print("More than one column.")
    } else {
        print("One or fewer columns.")
    }
}
colTest(M)
M.vector <- M[, 2]
colTest(M.vector)
class(M.vector)
M.submatrix <- M[, 2, drop=FALSE]
colTest(M.submatrix)
class(M.submatrix) 
```

输出：

```
[1] "More than one column."
Error in if (ncol(M) > 1) { : argument is of length zero
[1] "integer"
[1] "One or fewer columns."
[1] "matrix" 
```

将来，当您遇到此类问题时，请尝试使用`str`and`class`函数：它们将向您显示任何对象的结构和类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T18:54:36.477

在 R 中尝试`ifelse`条件：

```
ifelse(nrow(df) >0, df[nrow(df),4]<- "ok",df[1,1]<- "No record found") 
```

# linux - awk：合并文件中的列

> ID：15391422
> 
> 赞同：2
> 
> 时间：2013-03-13T16:45:58.593
> 
> 标签：linux, bash, scripting, awk, text-parsing

我有两个文件，我必须从两个文件中提取我需要的列并将它们合并在一起。我想使用 awk 来做到这一点。

所以从 FileB 我需要 9->12 美元。如果 FileA 的 4 美元与 FileB 的 12 美元匹配，我需要 FileA 的 1 美元、2 美元、3 美元、5 美元和 6 美元。

这是我到目前为止所拥有的：

脚本.awk：

```
FNR==NR {
    blah = $12
    gsub(/"/,"",blah); gsub(/;/,"",blah);
    array[blah]=$9,$10,$11,$12  ## This breaks here
    next
}

{
    if ($4 in array) {
        print $1,"TransMap","Tcon",$2,$3,$5,$6,".",array[$4]
    }
} 
```

我会这样运行： awk -f script.awk fileB fileA 所以请注意 FileB 的 $12 不是完全匹配的——任何与 $4 的匹配都将采用以下格式："$4"; （因此是 gsubs）。我需要这种格式，而不是最终输出中的 $4 格式，这就是我这样做的原因。

数组[blah]=$9,$10... 换行 awk （显然）。但是我需要 FileB 中的所有 4 个字段——我将如何解决这个问题？awk 的在线说明不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:49:41.897

尝试

```
 array[blah]=$9","$10","$11","$12 
```

我只能在没有看到数据的情况下**猜测问题。**我猜你想用逗号连接 9-12 美元。

# java - 即使手机被锁定，也强制 Activity 启动 BroadcastReceiver

> ID：15391427
> 
> 赞同：1
> 
> 时间：2013-03-13T16:46:18.713
> 
> 标签：java, android, android-intent, android-activity, broadcastreceiver

早上 7 点 51 分，我的手机执行此代码以启动 Skype（我将 Skype 设置为自动登录，所以它实际上是在早上 7 点 51 分让我登录到 Skype）：

```
public class MorningReceiver extends BroadcastReceiver { 
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("MorningReceiver", "Entered");

        PackageManager packageManager = context.getPackageManager();
        Intent skype = packageManager.getLaunchIntentForPackage("com.skype.raider");
        context.startActivity(skype);
    }
} 
```

这曾经在 100% 的时间内有效。我会睡觉，我的手机会在每天早上 7:51 将我登录到 Skype。然而，几个月来，我必须更改手机中的设置或其他内容，现在它似乎冻结在“context.startActivity(skype);”上 并等待我向下滑动锁定屏幕，因为现在如果我在上午 10:00 醒来，拿起我的手机并向下滑动锁定屏幕，Skype 会立即启动并让我登录——它还没有启动和登录如我所愿，早上 7 点 51 分进入。

我想知道是否有一种方法可以强制启动活动，这样它就不必等待任何用户交互，并在我睡觉时手机锁定在我身边时启动应用程序。

仅供参考：我的手机上没有密码。

此外，如果需要，这就是我发送广播的方式（MorningReceiver 扩展了 BroadcastReceiver）

```
//set a Calendar object to 7:51 AM (not shown here)
//use an alarm manager to trigger the 7:51 AM event
AlarmManager am = (AlarmManager) this.getApplicationContext().getSystemService(Context.ALARM_SERVICE);

//send the broadcast
PendingIntent pi = PendingIntent.getBroadcast(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT);

//repeat this every day
am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi); 
```

谢谢你的帮助！

# css - 文本对齐和溢出

> ID：15391429
> 
> 赞同：1
> 
> 时间：2013-03-13T16:46:21.673
> 
> 标签：css

我在对齐一些文本和溢出问题时遇到了很多麻烦。我最初将列表项浮动到左侧，但这给我带来了文本垂直对齐的问题。所以我切换到显示为内联块。我现在遇到的问题是我根本无法让我的第二个标签与第一个标签对齐（有点像第二列）。我意识到这可能是因为我将其设置为内联块，但我本质上是在寻找两件事；1）我希望第二个标签在第一个标签旁边对齐并且不会溢出，并且 2）确保第二个标签文本的垂直对齐在底部。

HTML：

```
<fieldset>
<ol>
<li>
<label class="lbl">What market changes are you trying to capture?</label>
<label class="val">test 123 test 123test 3test 123 test 123test 3test 123 test 123test 3test 123 test 123test 3test 123 test 123test 3test 123 test 123test 3</label>
</li>
</ol>
</fieldset> 
```

CSS：

```
body 
{
    background-color: #FCFCFC;
    font:11px verdana,arial,sans-serif;
}

fieldset 
{
    border:1px solid #ccc;
    margin:1em;
    padding:1em;  
    width: 75%;
    float: none;
    clear: both;
}

fieldset ol
{
    list-style:none;
}

fieldset li
{

    display:inline-block;    
    margin-bottom:1em;
    width:100%;
}

fieldset label.lbl
{   
    display:inline-block; 
    width:26%;
    margin-right:1em;
    text-align:justify;
    font-weight: bold;
    vertical-align:bottom;
}

fieldset label.val
{
    display:inline-block;
    vertical-align:middle;
    overflow: hidden;
} 
```

小提琴：http: [//jsfiddle.net/CDsLr/2/](http://jsfiddle.net/CDsLr/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:06:41.397

稍微不同的观点：由于您没有使用输入，我将假设正在发生的事情是这是一个“确认”或其他类型的视觉反馈页面。用户提供了一个答案，现在您正在回显他们的答案。

如果这是一个错误的假设，那么了解总体目标可能（但不一定！）会有所帮助。

将标签换成普通的旧列表项，这就是我想出的[编辑：摆脱了一些笨拙的 CSS]：

[http://jsfiddle.net/CDsLr/6/](http://jsfiddle.net/CDsLr/6/)

HTML：

```
<fieldset>
    <ol>
        <li class="lbl">What market changes are you trying to capture?</li>
        <li class="val">test 123 test 123test 3test 123 test 123test 3test 123 test 123test 3test
            123 test 123test 3test 123 test 123test 3test 123 test 123test 3</li>
    </ol>
</fieldset> 
```

CSS：

```
body 
{
    background-color: #FCFCFC;
    font:11px verdana,arial,sans-serif;
}

fieldset 
{
    border:1px solid #ccc;
    margin:1em;
    padding:1em;  
    width: 75%;
}

fieldset ol
{
    list-style:none;
}

fieldset li
{
    display:inline-block;    
    margin-bottom:1em;
    width:50%;
    vertical-align:bottom;
}

fieldset .lbl
{   
    width:26%;
    margin-right:1em;
    font-weight: bold;
} 
```

这是在正确的轨道上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:55:12.287

不完全确定你的目标是什么，但在黑暗中猛烈抨击（我可能会如何布局）

```
label{
    float: left;
    width: 50%;
    text-align: justify;
} 
```

***NB 关键是要让所有元素都向左浮动，而不仅仅是一个，还要明确指定一个宽度，它们可以并排放置而不是堆叠。***

## [http://jsfiddle.net/CDsLr/3/](http://jsfiddle.net/CDsLr/3/)

# java - Java 检查大量字符串上的 .equals

> ID：15391430
> 
> 赞同：-5
> 
> 时间：2013-03-13T16:46:22.030
> 
> 标签：java, string, list

我试图检查一个字符串是否存在于一个相对较大（比如 8000 个项目）的字符串列表中。

这就是我所做的：

```
 for ( int i = 0; i < listOfStrings.size(); i++){
        String trim = listOfStrings.get(i).getString().trim();
        if (trim.equals(testString)){
            check = true;
            break;
        } else {
            check = false;
        }
    } 
```

但是，尽管我确定字符串在列表中，但我得到了错误的回报。对于大型列表，这是一种错误的方法吗？

**编辑：**

抱歉，代码在没有上下文的情况下被剪断。是的，休息；不见了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T16:48:38.873

您可能会获得匹配并设置`check`为`true`，但您并没有终止循环。然后下一个循环不匹配并设置`check`为`false`. `break`用语句找到循环后终止循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T16:48:32.097

找到匹配项后，您需要返回。否则下一个不匹配将重置 check = false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T16:48:41.653

**除非您的字符串是列表中的最后一个**字符串，否则您编写该循环的方式将是错误的。您需要返回 true，或者在此处设置中断。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T16:48:51.307

除非列表中的最后一个字符串是匹配项，否则这将始终返回 false，因为一旦遇到不匹配项，检查的值将设置为 false（替换任何真实值）。`break`在发现匹配值后使用 a 。

另外，为什么需要 getString() 调用？如果列表中充满了字符串，那不是必需的吗？

我认为这是一个适当的解决方法（假设您有充分的理由在比较之前修剪每个字符串）：

```
for ( int i = 0; i < listOfStrings.size(); i++){
    String trim = listOfStrings.get(i).trim();
    if (trim.equals(testString)){
        check = true;
        break;
    } else {
        check = false;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T16:50:35.387

我认为你得到了错误的回报，因为你在找到字符串时没有打破 for 循环。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T16:51:39.870

最好将`String`s 存储为 a `HashSet`，它使用哈希搜索，它应该更有效。

# jquery - 仅显示/隐藏最近的元素

> ID：15391432
> 
> 赞同：1
> 
> 时间：2013-03-13T16:46:23.380
> 
> 标签：jquery

我对 javascript/jQuery 很陌生，我正在尝试构建一个在单击元素时显示/隐藏不同元素的菜单。单击 div A 时，它会隐藏 div A，在其位置显示 div B，并显示一个无序列表。单击 div B 时，它会隐藏 div B，显示 div A，并隐藏 ul。

我已经完成了大约 90% 的路程，但我需要一点帮助。我试图只影响最近的 div 和 uls，但似乎一切都受到了影响。从我阅读的信息来看，似乎我应该使用`.siblings`并且`.closest`我是哪个，但显然我做错了什么。

JS 小提琴链接：http: [//jsfiddle.net/w5VXr/6/](http://jsfiddle.net/w5VXr/6/)

HTML：

```
<div class="essFeatureHeader">Appointment Scheduling</div>
<div class="essFeatureHeader hidefeature">Appointment Scheduling</div>
     <ul class="featureList">
         <li class="alternate">Unlimited Online Scheduling</li>
     </ul> 
```

jQuery：

```
$(document).ready(function($) {
    jQuery(".featureList").hide();
    jQuery(".hidefeature").hide();

    jQuery(".essFeatureHeader").click(function() {
            $(this).closest('.essFeatureHeader').siblings(".featureList").show("slow");
                            $(this).closest('.essFeatureHeader').hide();
                            $(this).closest('.essFeatureHeader').siblings('.hidefeature').show(); 
        });
    jQuery(".hidefeature").click(function() {
                            $(this).closest('.hidefeature').siblings('.essFeatureHeader').show();
                            $(this).closest('.hidefeature').siblings('.featureList').hide();
                            $(this).closest('.hidefeature').siblings('.hidefeature').show();
        });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:07:17.573

看看[更新的小提琴](http://jsfiddle.net/w5VXr/9/)。

您对“隐藏”标题有过多的标记。这是不必要的，因为您可以只更改现有标题上的类名。

新标记如下所示：

```
<div class="essFeatureHeader">
    <i class="icon-plus" style="margin-right: 5px"></i>
    Outbound/Outcall Services
</div>
<ul class="featureList">
    <li class="alternate">Collect Client Addresses</li>
    <li>Map Integration</li>
    <li class="alternate">Travel Time</li>
</ul> 
```

对于每个项目

javascript代码更改如下：

```
$(function($) {
    $("ul.featureList").hide();
    $("div.essFeatureHeader").click(function() {
        var $this = $(this),
            header = $this.find('i'),
            target = $this.next(".featureList"),
            showing = target.is(':visible');

        if(showing){ // hide
            target.hide('slow');
            header.removeClass('icon-minus').addClass('icon-plus');
        }
        else {
            target.show('slow');
            header.removeClass('icon-plus').addClass('icon-minus');
        }   
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:50:45.980

我想这应该这样做：

```
$(document).ready(function($) {
jQuery(".featureList").hide();
jQuery(".hidefeature").hide();

jQuery(".essFeatureHeader.hidefeature").click(function() {
            $(this).next(".featureList").hide("slow");
            $(this).prev('.essFeatureHeader').show();
            $(this).hide();
        });
jQuery(".essFeatureHeader:not(.hidefeature)").click(function() {
            $(this).next('.essFeatureHeader').show();
            $(this).next('.essFeatureHeader').next(".featureList").show("slow");
            $(this).hide();
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:06:48.417

我不确定这是否是您正在寻找的，但这对我来说最有意义。

[http://jsfiddle.net/39vYR/1/](http://jsfiddle.net/39vYR/1/)

```
$(document).ready(function($) {
    jQuery(".featureList").hide();
    jQuery(".hidefeature").hide();

    jQuery(".essFeatureHeader").click(function() {
        $(this).hide().next('.hidefeature').show();
        $(this).nextAll('ul.featureList:first').show("slow"); 
    });

    jQuery(".hidefeature").click(function() {
        $(this).hide().prev('.essFeatureHeader').show();
        $(this).nextAll('ul.featureList:first').hide("slow");
    });
}); 
```

我使用`next`,`nextAll`和`prev`选择器而不是`closest`and `siblings`。

选择`closest`器不会环顾元素，它向上看，类似于`parent`选择器（如[文档](http://api.jquery.com/closest/)中所述），所以我认为这不是要走的路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T17:07:01.037

看到这个：http: [//jsfiddle.net/w5VXr/10/](http://jsfiddle.net/w5VXr/10/)

```
$(document).ready(function ($) {
    jQuery(".featureList").hide();
    jQuery(".hidefeature").hide();

    jQuery(".essFeatureHeader").click(function () {
       $(this).nextAll('.featureList:first').show("slow");    
       $(this).nextAll('.essFeatureHeader:first').show();
       $(this).hide();

    });
    jQuery(".hidefeature").click(function () {
       $(this).prev('.essFeatureHeader').show();
       $(this).nextAll('.featureList:first').hide("slow");
       $(this).hide();
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T17:07:03.560

你真的只需要一个 div - 而不是两个 - 并且只需在元素上切换类

你正在使用兄弟姐妹 - 所以它会影响所有匹配的兄弟姐妹..你真正想要的是 .next()

```
jQuery("div.essFeatureHeader").click(function () {
    var $el = $(this);
    $el.find('i').toggleClass('icon-plus icon-minus');
    if($el.is('.hidefeature')){
        $el.next('.featureList').toggle();   
    }else{            
        $el.next().next('.featureList').toggle();  
    }          
}); 
```

您也不需要使用 .closest() 因为 $(this) 是指同一个元素

您没有以下元素，因为您可以切换类

```
<div class="essFeatureHeader hidefeature" style="display: none;"><i class="icon-minus" style="margin-right: 5px"></i>Outbound/Outcall Services</div> 
```

如果您确实删除了这些 div .. 您不再需要上面代码中的 else 语句

[小提琴](http://jsfiddle.net/cs7hy/)

# crystal-reports - 使用 CrystalDecisions.ReportAppServer.Utilities.Conversion 的 COM 错误

> ID：15391433
> 
> 赞同：1
> 
> 时间：2013-03-13T16:46:24.633
> 
> 标签：crystal-reports, crystal-reports-server

我的代码：

```
var utility = new CrystalDecisions.ReportAppServer.Utilities.Conversion();
var ortpstring = utility.ToString(orpt); 
```

我收到以下错误：

```
{System.Runtime.InteropServices.COMException (0x80040154): Retrieving the COM class factory for component with CLSID {08497EE6-2ABB-4E1A-A41E-37D2C26E72B6} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
   at CrystalDecisions.ReportAppServer.Utilities.Conversion.ToString(ISCDReportClientDocument m_rptClientDoc)
   at eSiteWeb.frmViewer2.InitializeCrystalReportRAS() in c:\Users\rarch\Development\Amsi-v7.5.2\Product\Production\eSiteWeb\frmviewer2.aspx.cs:line 203} 
```

我正在使用非托管 RAS 2012 Embedded。文档似乎表明这是支持的。

有谁知道我为什么会得到这个，而不是显而易见的。我缺少什么 .dll/功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:47:54.997

在黑暗中拍摄，但是，如果服务器是 64 位的，那么在服务器上的 IIS 管理器中，确保为您的 Web 应用程序设置应用程序池以允许 32 位程序集。尽管它已部署到 64 位系统，但这并不意味着所有引用的程序集都是 64 位 Crystal Reports 程序集，因为它们主要是旧 DLL 集合的包装器，其中一些是 32 位的。

为此，您还需要将 32 位可再发行组件部署到 64 位服务器（因此您需要同时安装 64 位和 32 位）。

# c#-4.0 - C# .net 相关图片

> ID：15391434
> 
> 赞同：1
> 
> 时间：2013-03-13T16:46:24.943
> 
> 标签：c#-4.0

我有以下代码，其中我没有理解：

```
double savesize = (8.0 * ((height * (width / 3) * 3) / 3 - 1)) / 1024; 
```

所以请帮助我。

**代码：**

```
 private void ImageBrowseButton_Click(object sender, EventArgs e)
    {
        DialogResult dr = openFileDialog1.ShowDialog();
        if (dr == DialogResult.OK)
        {
            loadedImagePath = openFileDialog1.FileName;
            imageTextBox.Text= loadedImagePath;
            loadedImage = Image.FromFile(loadedImagePath);
            height = loadedImage.Height;
            width = loadedImage.Width;
            loadedBitmap = new Bitmap(loadedImage);

            FileInfo imginf = new FileInfo(loadedImagePath);
            float size = (float)imginf.Length / 1024;
            SizeLabel.Text = size.ToString() + " KB";
            HeightLabel.Text = loadedImage.Height.ToString() + " Pixel";
            WidthLabel.Text = loadedImage.Width.ToString() + " Pixel";
            double savesize = (8.0 * ((height * (width / 3) * 3) / 3 - 1)) / 1024;
            SaveSizeLabel.Text = savesize.ToString() + " KB";
        }

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:49:00.120

它是保存图像所需的千字节数的估计值。要保存为位图（无损），公式将是（来自[Zicara](http://www.zicara.com/techbytes/web-design/file-size-bitmap-image)）

> 以千字节为单位的文件大小 = 分辨率 2 x 宽度 x 高度 x 每个样本的位数 ÷ 8,192

在您的示例中，我假设图像没有被保存为位图，而是以一种有损格式，在给定这些尺寸的图像的情况下生成该大小的文件 - 查看您实际保存文件的方式可能会使您更加轻松脱落。

# php - Wordpress 在任何不属于它的页面上给出 404

> ID：15391435
> 
> 赞同：2
> 
> 时间：2013-03-13T16:46:25.097
> 
> 标签：php, wordpress

我正在一个安装了 wordpress 的网站上工作，但我无法创建普通的 php 文件。他们都给我404。

Wordpress 工作正常，一切正常。htaccess 看起来也不错，但是当我尝试创建一个 php 文件时，例如 /example-dir/simple-file.php，并尝试访问它，而不是显示我的页面（里面只有一个回显），它显示一个404。

任何提示如何停用这种特殊行为？我尝试禁用所有插件，但没有帮助。

htaccess 看起来像这样：

> `RewriteEngine On
> RewriteBase /
> RewriteRule ^index\.php$ - [L]
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteRule . /index.php [L]`

编辑：它的行为就像`RewriteCond %{REQUEST_FILENAME} !-f`不存在一样。
另一个有趣的观察是它只对 php 文件执行此操作。如果我创建 test.txt，它工作正常。

# jsf - 输入字段上的 RichFaces LiveSearch

> ID：15391437
> 
> 赞同：0
> 
> 时间：2013-03-13T16:46:26.923
> 
> 标签：jsf, process, richfaces, ajax4jsf

我正在使用 RichFaces 并希望在我的网站上实现实时搜索。我有一个输入字段和一个在我的支持 bean 中动态构建的 div。实际上，方法 bean.getResultsDiv() 调用 setResultsDiv() 并考虑到 searchString 创建 MyFaces Div 对象。不幸的是，如果我在输入字段中键入一个字符，结果 div 的重新呈现发生得太早，并且搜索字符串将不会更新。如何确保首先处理 char，然后触发创建新结果 div 的 bean 方法？提前致谢。

```
<t:inputText id="mysearchString"
    value="#{bean.searchString}"
    onkeydown="jQuery('form_processSearchString').click();"
/>
<4j:commandButton id="processSearchString" 
    process="mysearchString"
    reRender="results"
/>
<t:div id="results" binding="#{bean.resultsDiv}" /> 
```

UPDATE-1：我进行了调试，现在我可以看到 bean.searchString 已正确更新。不幸的是，getResultsDiv() 的 getter 方法在 setSearchString(newStringToSeach) 之前调用。如何确保先进行处理，然后再进行重新渲染。

我正在玩的另一个代码片段（相同的行为，在 setSearchString() 之前触发了 rerendering-getter-call）：

```
<t:inputText id="searchString"
    value="#{beans.searchString}"
    onkeydown="if (event.keyCode == 13) { return false; }">
    <a4j:support event="onkeyup" requestDelay="200" ajaxSingle="true"
        reRender="resultsDiv" eventsQueue="quicksearchqueue"
        ignoreDupResponses="true"
        process="searchString" 
    />
</t:inputText> 
```

感谢帮助！

UPDATE-2：我发现相应绑定的 getter 根本没有被触发，因此 div 没有机会更新。这似乎是个问题！

```
<t:div id="results" binding="#{bean.resultsDiv}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:03:24.793

看来你很顺利。`listener`请注意绑定到方法的属性`process`，这是此示例中的技巧。应跟踪搜索字符串中的每个*按键*并调用方法。这将更新输入控件下方的*Ajax 实时搜索面板。*`txtSearchString``process`

 *小面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>TODO supply a title</title>
</h:head>
<body>
    <h:form>
        <h:inputText id="txtSearchString" value="#{lively.seStr}">
            <f:ajax event="keypress" render=":result" execute="@form" listener="#{lively.process()}"/>                
        </h:inputText>
    </h:form>
    <h:outputFormat id="result" value="#{lively.liveMsg}"/>
</body>
</html> 
```

托管豆：

```
import javax.inject.Named;

import javax.enterprise.context.SessionScoped;

import java.io.Serializable;

 @Named(value = "lively")
 @SessionScoped
 public class lively implements Serializable {

private String seStr = "";
private String liveMsg = "....";
private int livelyID = 0;

public String getLiveMsg() {
    return liveMsg;
}

//public void setLiveMsg(String liveMsg) {
//   this.liveMsg = liveMsg;
//}

public String getSeStr() {
    return seStr;
}

public void setSeStr(String seStr) {        
    this.seStr = seStr;
}

public lively() {

}

public void process() {
    //initialize
    if (seStr.length() == 0) 
        livelyID = 0;

    //access the search string        
    liveMsg = seStr + " - ";

    //do some work
    livelyID++;
    if (livelyID <= 10) {
        liveMsg = "less than 10";
    } else if (livelyID > 10 && livelyID <= 20) {
        liveMsg = "more than 10";
    } else {
        liveMsg = "more than 20";
    }
 }
} 
```

只需将 bean 和 facelet 添加到 JSF 项目并运行 facelet。

抱歉，我没有从事纯 Glassfish 实现的*主要面孔*，但您可能会发现此示例很有趣，它与您的要求相似。*

# plugins - Sublime -- 如何为自定义插件创建我自己的子文件夹？

> ID：15391440
> 
> 赞同：2
> 
> 时间：2013-03-13T16:46:44.030
> 
> 标签：plugins, sublimetext2, sublimetext

我的自定义插件弄乱了我的`/Packages/User`目录，我想通过为每个插件创建不同的子文件夹来整理一下——例如，`/Packages/User/0.custom_plugin_one`. 自定义插件的包罗万象的目录是`/Packages/User`. 我无法找到任何文档来告诉我如何创建对我自己的自定义子文件夹的引用，以便自动加载插件。谁能引导我朝着正确的方向前进？

除了用户定义目录中的自定义插件之外，我还想包括所有相关的`.sublime-build`和`.sublime-keymap`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:58:39.513

插件通常位于`Packages`目录的专用子文件夹中。如果您已经开发了自己的目录，则始终可以创建 , 等目录`Packages/0MyFirstPlugin`，`Packages/1MySecondPlugin`以将它们保持在目录层次结构的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T20:47:54.110

对于 MacOS Sublime 3 用户，如下：

```
/Users/yuchen21/Library/Application Support/Sublime Text/Packages/User/ 
```

替换`yuchen21`为您的用户名。

# c - C中使用线程的电梯模拟

> ID：15391443
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:47:09.250
> 
> 标签：c, multithreading, mutex

您好，我是 C 语言的新手，想模拟电梯并将线程用作乘客。到目前为止，我能够正常运行电梯，但这是乘客的问题。目的是让所有乘客（线程）选择一个随机的目的地楼层（使用随机数生成器），电梯停在目的地，选择该楼层的相应乘客将走出电梯这是代码。请帮忙！

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<time.h>
    #include<pthread.h>
    #include<unistd.h>

    #define NUM_THREAD 2
    #define flr 7

    int current_floor;
    int dest_floor;
    int t,i;
    int df[flr];
    void *user();
    void elevator();
    void Thread_creats();
    pthread_mutex_t mymutex = PTHREAD_MUTEX_INITIALIZER; /*Mutex Initializer*/

    int main()
    {
        /*int el;   
        pthread_t elev1;
        //printf("Creating Elevator\n");
        el=pthread_create(&elev1,NULL, elevator, NULL);
        if(el)
        {
            printf("ERROR Creating Thread\n");
            exit(-1);
        }*/
        Thread_creats(); /*Calls the function that creates all the threads*/

        return 0;
    }
    /*Elevator Operation*/

    void elevator()
    {
        if(df[i]>current_floor)
        {
            printf("Direction ^\n");
            printf("   Up     |\n");
            while(current_floor!=df[i])
            {
                sleep(2);
                current_floor++;
                printf(" floor --> %d\n",current_floor);
            }
                printf("\n\n Door Open <--[ || ]-->\n\n");
                sleep(1);
                printf(" Passenger %d  Walks out....\n",t);
                sleep(1);
                printf("\n\n Door Close --> [|] <--\n\n");
        }
        else if(df[i]<current_floor)
        {
            printf(" Direction |\n");
            printf("   Down    V\n");

            while (df[i]!=current_floor)
            {
                sleep(1);
                current_floor--;
                printf(" floor --> %d\n", current_floor);
            }
            printf("\n\n Door Open <--[ || ]-->\n\n");
            sleep(1);
            printf(" Passenger %d Walks out....\n",t);
            sleep(1);
            printf("\n\n Door Close --> [|] <--\n\n");
        }
        else
        {
            sleep(1);
            printf(" You are at your destination floor...Please step out of the elevator\n\n");
            sleep(1);
            printf("\n\n Door Open <--[ || ]-->\n\n");
            sleep(1);
            printf(" Passenger %d Walks out....\n",t);
            sleep(1);
            printf("\n\n Door Close --> [|] <--\n\n");
        }   
    }

    void Thread_creats()
    {
        pthread_t thread[NUM_THREAD];
        int th;
            sleep(1);
            //printf("Creating Passenger %d \n",t);
            for(t=0;t<NUM_THREAD;t++)
            {
                th=pthread_create(&thread[NUM_THREAD],NULL,user,NULL);
                if(th)
                {
                    printf("ERROR Creating Thread\n");
                    exit(-1);
                }
            }
    }

    void *user()
    {

        for (i=0;i<flr;i++)
        {   
            pthread_mutex_lock(&mymutex);
            /*Initialize Seed Time*/
            srand(time(NULL));
            dest_floor=rand()%flr; /*Generates a random Floor number*/
            sleep(1);
            df[i]=dest_floor;
            printf("Passenger %d Selects floor: %d\n",t,df[i]);
            pthread_mutex_unlock(&mymutex);
        }

            pthread_exit(NULL);
            return NULL;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:57:34.993

我前段时间写了一个电梯模拟器，也遇到了同样的问题。

对我来说最好的方法是：

1 电梯线程：

```
callElevator(int level);
calcMovement();
openDoors(int level); 
```

1个将所有乘客（服务员和乘客）保存在结构中的线程：

```
createNew(int orig, int dest);
exchange(int level); // called from elevator thread 
```

但最大的问题不是总体组织。运动算法将是最难的事情。

# c# - 与通用列表比较

> ID：15391446
> 
> 赞同：0
> 
> 时间：2013-03-13T16:47:21.533
> 
> 标签：c#, .net, compare, equality

我需要比较 2 个通用列表是否相等。IEquatable< T> 接口是一个好方法，但我不能使用它，因为 myObject 有 15 个属性，而某些属性又是通用列表。 [http://msdn.microsoft.com/en-us/library/bb348567.aspx](http://msdn.microsoft.com/en-us/library/bb348567.aspx)

什么是最好的方法？

# ruby - 使用 Selenium webdriver 和 Ruby 检查 href 以获取超链接

> ID：15391451
> 
> 赞同：0
> 
> 时间：2013-03-13T16:47:34.483
> 
> 标签：ruby, selenium-webdriver

我想在不单击超链接的情况下检查超链接的 url 是否正确。

假设，我遵循 html 代码 -

```
<a target="_blank" href="http://www.google.com">Google</a> 
```

我想检查“谷歌”超链接的预期网页是[http://www.google.com](http://www.google.com)而不点击它。如何使用带有 Ruby 的 Selenium webdriver 来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:01:09.510

您可以使用以下方法获取元素的属性值[`Element#attribute`](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#attribute-instance_method)：

```
link = driver.find_element(:css, 'a')
link.attribute("href")
#=> "http://www.google.com" 
```

# javascript - 更改脚本中的变量以在 pageinit 上执行

> ID：15391454
> 
> 赞同：0
> 
> 时间：2013-03-13T16:47:48.413
> 
> 标签：javascript, ajax, soundmanager2

我有一些想要在 pageinit 事件期间执行的 JavaScript，但是我将从之前发生的 ajax 调用中获取该脚本的变量/值。如何执行此脚本？举个很好的例子，假设我正在使用 soundmanger2.js 使用 JavaScript 自动播放曲目，但是只有在从 ajax 调用返回结果后才能获取曲目的 url。那么，当页面加载后，如何才能真正播放曲目呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:59:10.343

```
$().ready(function() {
    /* things to do outside ajax */
    $(document).ajaxStop(function () {
        /* things to do after ajax load */
    });
}); 
```

# android - 无法在 Android 的 Gridview 中显示数据！请帮帮我

> ID：15391459
> 
> 赞同：0
> 
> 时间：2013-03-13T16:47:57.970
> 
> 标签：android, database, gridview, cursor

我在我的 SQLlite 数据库中输入一些值，然后在 gridview 中检索它们。我收到错误“column'_id'”不存在。但我没有在数据库中使用任何 _id 命名列。我怎样才能让它工作？我认为 SimpleCursor Adapter 有一些问题。

```
 GridView gv = (GridView)findViewById(R.id.gridView1);

    try
    {
        db1 = openOrCreateDatabase("record.db", Context.MODE_PRIVATE,null);
          db1.execSQL("CREATE TABLE IF NOT EXISTS stu(ID INTEGER primary Key,NAME VARCHAR foriegn key,age VARCHAR);");
         db1.execSQL("INSERT INTO stu VALUES (1,'mona','123');");

    Cursor c = db1.rawQuery("SELECT * FROM stu", null);
    if(c!= null){
     if (c.moveToFirst()) {
            do {
                String[] cols = new String[]{c.getString(c.getColumnIndex("ID")),c.getString(c.getColumnIndex("NAME"))};
            int[]   views = new int[]   {R.id.textView1,R.id.textView2};

                 SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                        android.R.layout.simple_list_item_1,
                        c, cols, views);
                    gv.setAdapter(adapter);

               }while(c.moveToNext());}

    }} catch(Exception e){
        Toast.makeText(getBaseContext(),"errord"+ e.getMessage(), Toast.LENGTH_LONG).show();
                    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:02:25.350

[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)（SimpleCursorAdapter 扩展）的文档指出：

```
The Cursor must include a column named "_id" or this class will not work. 
```

# php - 使用输入按钮删除行

> ID：15391460
> 
> 赞同：0
> 
> 时间：2013-03-13T16:48:03.630
> 
> 标签：php, mysql

我正在尝试创建一个表格，允许我通过单击删除按钮来删除一行。我确实在以下链接上找到了一篇文章，它确实提供了一些帮助，但我仍然无法让它工作：[显示 mysql 表中的所有行，然后提供删除特定行的选项](https://stackoverflow.com/questions/7302554/show-all-rows-in-mysql-table-then-give-option-to-delete-specific-ones)。我已经编写了大部分代码，但我delete.php 页面上的第 10 行有问题。想法？

**主文件**

```
$result = mysqli_query($con,"SELECT * FROM cs_general_info");

echo "<table><tr><td>Delete</td><td>First Name</td><td>Last Name</td><td>Address</td>td>Phone</td><td>E-Mail Address</td></tr>";

while($row = mysqli_fetch_array($result)) {

?>

<tr>
<td>
<form action="delete.php" method="POST">
<input type="hidden" name="delete_id" value="<?php echo $row['id']; ?>">
<input type="Submit" value="Delete"></form>
</td>

<?php

  echo "<td>" . $row['id'] ."</td>";
  echo "<td>" . $row['first_name'] . "</td>";
  echo "<td>" . $row['last_name'] . "</td>";
  echo "<td>" . $row['address'] . "</td>";
  echo "<td>" . $row['phone'] . "</td>";
  echo "<td>" . $row['email'] . "</td></tr>";

}

echo "</table>"; 
```

**删除.php**

```
"DELETE FROM cs_general_info WHERE id=".mysql_real_escape_string($delete_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:50:22.243

希望`delete.php`不仅仅是那条线。在`delete.php`您将要捕获`POST`方法和`$row[id]`; 绑定它，然后删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:51:49.407

要获取要在`delete.php`文件中删除的行的 id，您需要获取变量，如下所示：

```
$delete_id = $_POST['delete']; 
```

警告：这是使它工作所需的非常基本的功能。但是，在将其用于任何生产代码之前，您将需要实现许多其他级别的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:52:04.067

如果那是你的`delete.php`，那么你错过了很多。您需要数据库连接，并且需要对`SQL`数据库执行命令。但在您通过`$_POST`.

[这是`PDO`数据库连接和`SQL`执行的手册。](http://php.net/manual/en/book.pdo.php)

[这是`$_POST`.](http://php.net/manual/en/reserved.variables.post.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:54:55.110

您想在表格的每一行中放置一个链接或内联表单，然后有一个脚本删除指定的行并将用户返回到您的页面。

```
<table>
  <tbody>
<?php foreach ($results as $result): ?>
    <tr>
      <td><?php echo $result->title; ?></td>
      <td>
        <form action="delete.php" method="post">
          <input type="hidden" name="id" value="<?php echo $result->id; ?>" />
          <input type="submit" value="Delete" />
        </form>
      </td>
    </tr>
<?php endforeach; ?>
  </tbody>
</table> 
```

然后**delete.php**：

```
<?php

if (isset($_POST['id']) && intval($_POST['id']) > 0) {
    // create PDO instance; assign it to $db variable
    $sql = "DELETE FROM `table` WHERE `id` = :id LIMIT 1";
    $smt = $db->prepare($sql);
    $smt->bindParam(':id', $_POST['id'], PDO::PARAM_INT);
    $smt->execute();
}

header('Location: index.php'); 
```

# sqlite - 如何防止 SQLite 将字符串视为数字？

> ID：15391461
> 
> 赞同：7
> 
> 时间：2013-03-13T16:48:03.697
> 
> 标签：sqlite

我想查询一个包含目录路径的 SQLite 表，以查找某个层次结构下的所有路径。以下是列内容的示例：

```
/alpha/papa/
/alpha/papa/tango/
/alpha/quebec/
/bravo/papa/
/bravo/papa/uniform/
/charlie/quebec/tango/ 
```

如果我搜索下的所有内容`/bravo/papa/`，我想得到：

```
/bravo/papa/
/bravo/papa/uniform/ 
```

我目前正在尝试这样做（请参阅下文，了解为什么我不能使用更简单的方法）：

```
SELECT * FROM Files WHERE Path >= '/bravo/papa/' AND Path < '/bravo/papa0'; 
```

这行得通。它看起来有点奇怪，但它适用于这个例子。'0' 是大于 '/' 的 unicode 代码点 1。当按字典顺序排序时，所有以 '/bravo/papa/' 开头的路径都比较大于它和小于 'bravo/papa0'。但是，在我的测试中，我发现当我们尝试这样做时会出现这种情况：

```
SELECT * FROM Files WHERE Path >= '/' AND Path < '0'; 
```

这不返回任何结果，但它应该返回每一行。据我所知，问题在于 SQLite 将 '0' 视为数字，而不是字符串。例如，如果我使用“0Z”而不是“0”，我确实得到了结果，但我引入了获得误报的风险。（例如，如果实际上有一个条目“0”。）

我的问题的简单版本是：是否有某种方法可以让 SQLite 在这样的查询中将 '0' 视为包含 unicode 字符 '0' 的长度为 1 的字符串（它应该对字符串进行排序，例如 '!'、'* ' 和 '/'，但在 '1'、'=' 和 'A' 之前）而不是整数 0（SQLite 在所有字符串之前排序）？

我认为在这种情况下，我实际上可以通过特殊情况搜索“/”下的所有内容，因为我的所有条目都将始终以“/”开头，但我真的很想知道如何避免这种事情一般来说，因为它与 Javascript 的 "==" 运算符一样令人不快。

## 第一种方法

更自然的方法是使用 LIKE 或 GLOB 运算符。例如：

```
SELECT * FROM Files WHERE Path LIKE @prefix || '%'; 
```

但我想支持所有有效的路径字符，所以我需要对 '_' 和 '%' 符号使用 ESCAPE。显然这会阻止 SQLite 在 Path 上使用索引。（请参阅[http://www.sqlite.org/optoverview.html#like_opt](http://www.sqlite.org/optoverview.html#like_opt)）我真的希望能够从这里的索引中受益，这听起来像使用 LIKE 或 GLOB 是不可能的，除非我可以保证他们的任何一个目录名称中会出现特殊字符，POSIX 允许除 NUL 和 '/' 以外的任何字符，甚至 GLOB 的 '*' 和 '?' 人物。

我提供这个作为上下文。我对解决潜在问题的其他方法感兴趣，但我更愿意接受一个直接解决 SQLite 中看起来像数字的字符串的歧义的答案。

## 类似问题

[如何防止 sqlite 将字符串评估为数学表达式？](https://stackoverflow.com/questions/12377992/how-do-i-prevent-sqlite-from-evaluating-a-string-as-a-math-expression)

在那个问题中，没有引用这些值。即使值被引用或作为参数传递，我也会得到这些结果。

* * *

*编辑*- 请参阅下面的答案。该列是使用无效类型“STRING”创建的，SQLite 将其视为 NUMERIC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:14:15.023

**呻吟**。该列具有 NUMERIC 相关性，因为它被意外指定为“STRING”而不是“TEXT”。由于 SQLite 无法识别类型名称，因此将其设为 NUMERIC，并且由于 SQLite 不强制列类型，所以其他一切都按预期工作，除了任何时候将类似数字的字符串插入该列时，它都会转换为数字类型。

# cordova - 包括cordova.2.4.0.js对我的index.html的引用

> ID：15391464
> 
> 赞同：0
> 
> 时间：2013-03-13T16:48:13.867
> 
> 标签：cordova, jquery-mobile

你好 evryone 我在使用 phonegap/cordova 时遇到了一个奇怪的问题。好吧，我正在尝试使用 html 和 jquery mobile 构建应用程序。当我运行我的应用程序的测试模拟器时，它无法正常工作，并且出现了著名的错误：与服务器的连接不成功。（file:///androif_asset/www/index.html）

好的，我了解了有关设置 phonegap 的所有文档，我在这里尝试了有关同一问题的所有答案，但没有解决。

奇怪的是，当我忘记在我的 index.html 的 head 标记中包含对 cordova.2.4.0.js 的引用链接并且我的应用程序现在正在模拟器上运行时......所以我试图包含链接到cordova.2.4.0.js并在模拟器上重新测试我的应用程序我得到了与以前相同的错误......所以我决定制作两个具有相同html内容的应用程序，第一个引用cordova.2.4。 0.js 和没有引用cordova.2.4.0.js 的第二个，结果是：引用cordova.2.4.0.js 的应用程序不起作用，而没有引用cordova 的应用程序正在工作！！！！！！

有人可以解释一下吗？？111

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:19:08.953

如果您可以发布源代码，这将有很大帮助。

出现上述错误是由于应用程序加载缓慢导致 Android 超时。

要解决此问题，您必须配置 super.setIntegerProperty 定义的 loadUrlTimeoutValue。此属性必须在活动 java 文件中设置。

前任：`super.setIntegerProperty("loadUrlTimeoutValue", 160000);`

有关此问题的更多信息，您可以查看与您的问题相关的[GitHub问题。](https://github.com/phonegap/build/issues/16)

我希望这有帮助。

# python - Python 进度条 - 在这里线程化答案吗？

> ID：15391467
> 
> 赞同：3
> 
> 时间：2013-03-13T16:48:23.697
> 
> 标签：python, multithreading

我对 Python 中的进度条进行了一些研究，许多解决方案似乎都是基于将工作划分为已知的离散块。即，迭代已知次数并在`stdout`每次接近迭代结束的进度的一个百分点时更新进度条。

我的问题不太离散。它涉及遍历包含数百个子目录的用户目录、收集 MP3 信息并将其输入数据库。我可能会在迭代之前计算目录中 MP3 文件的数量，并将其用作离散块的指南，但是许多 mp3 可能已经在数据库中，有些文件的读取时间比其他文件要长，错误会在某些情况下发生并且必须处理等等。此外，我想知道如何使用非离散块来解决这个问题，以供将来参考。如果您有兴趣，这是我的 directory-walk/database-update 的代码：

```
import mutagen
import sys
import os
import sqlite3 as lite
for root, dirs, files in os.walk(startDir):

    for file in files:
        if isMP3(file):
            fullPath = os.path.join(root, file)

            # Check if path already exists in DB, skip iteration if so
            if unicode(fullPath, errors="replace") in pathDict:
                continue

            try:
                audio = MP3(fullPath)
            except mutagen.mp3.HeaderNotFoundError: # Invalid file/ID3 info
                #TODO: log for user to look up what files were not visitable
                continue
            # Do database operations and error handling therein. 
```

线程是处理此类事情的最佳方法吗？如果是这样，是否有任何关于线程如何实现这一点的好例子？我不想要一个模块，因为（a）这似乎是我应该知道如何做的事情，并且（b）我正在为依赖精简的情况进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:56:26.203

如果你不知道你面前有多少步，那你怎么能取得进步呢？这是第一件事。在开始工作之前，您必须计算所有这些。

现在，即使任务在完成所需时间方面有所不同，您也不应该担心这一点。想想游戏。有时，当您看到进度条时，它们似乎停在某一点，然后跳得非常快。这正是幕后发生的事情：有些任务比其他任务花费的时间更长。但这没什么大不了的（除非任务*真的很*长，比如几分钟？）。

当然你可以使用线程。实际上使用 Queue 和 ThreadPool 可能非常简单。例如运行 20 个线程并构建一个作业队列。然后，您的进度将是队列中的项目数，队列的初始长度作为限制。这似乎是一个很好的设计。

# html - IE 渲染额外的表格行

> ID：15391475
> 
> 赞同：0
> 
> 时间：2013-03-13T16:48:40.870
> 
> 标签：html, asp.net-mvc

使用 ASP MVC Web 应用程序。我有一个动态填充的表格来显示搜索结果。结果在 Chrome 和 FF 中看起来不错，但在 IE7 中，它在标题行上方添加了行。我在呈现的“页面源代码”中没有看到任何添加的源代码。

如下图所示，添加了一堆行（没有内容）。编写的 html（在 MVC 中）是：

```
<div class="detailSection">

<h2>Search Results</h2>
<p style="font-size:1.2em; font-weight: bold;">Applicant: <%: Html.DisplayFor(m => m.NewPersonModel.FirstName) %>
        <%: Html.DisplayFor(m => m.NewPersonModel.LastName) %></p>

<p>Your search has returned the following results.  If the current applicant has an existing record, 
        select the record and click the 'Compare' button at the end of the list.</p>

    <% Html.BeginForm("Compare", "NewApplicant"); %>

        <table id="s_ResultsTable" class="grid-striped">
            <tr>
                <th>Select</th>
                <th>First Name</th>
                <th>Middle Name</th>
                <th>Last Name</th>
                <th>Date of Birth</th>
                <th>Alias?</th>
            </tr>
                <% if (Model.PersonSearchModel.Count == 0)
                { %>
                <tr>
                    <td colspan="6">There are no matching volunteer records.  <%: Html.ActionLink("Return to Detail page", "Detail", "NewApplicant", new { id = Model.NewPersonModel.ApplicantID }, null)%> to verify and save the application.</td>
                </tr>

                <%}%>

                <% var rowCount = 0;

                    foreach (var item in Model.PersonSearchModel)
                   { %>
                    <tr class="row<%: rowCount++%2 +1 %>">
                        <%: Html.HiddenFor(m => item.PersonID) %>
                        <%: Html.HiddenFor(m => m.NewPersonModel.ApplicantID) %>
                        <td class="resultsRadio"><%: Html.RadioButton("SelectedResult", item.PersonID) %></td>
                        <td><%: Html.DisplayFor(m => item.FirstName)%></td>                        
                        <td><%: Html.DisplayFor(m => item.MiddleName)%></td>                        
                        <td><%: Html.DisplayFor(m => item.LastName)%></td>                        
                        <td><%: Html.DisplayFor(m => item.DOB)%></td>                                                    
                        <td><%: Html.DisplayFor(m => item.IsAlias)%></td>                                                    
                    </tr>
                <%}%>
        </table>
        <div id="searchButtonDiv">
            <input type="hidden" id="SelectedPerson" name="SelectedPerson" value="" />
            <input type="submit" id="submit" class="SKButton" value="Compare" />
  <input type="button" class="SKButton" value="Back to Detail" title="Return to detail page" onclick="location.href='<%:@Url.Action("Detail", "NewApplicant", new { id = Model.NewPersonModel.ApplicantID }) %>'" />

        </div>
<% Html.EndForm(); %>
</div> 
```

这在浏览器中呈现为：

```
<p>Your search has returned the following results.  If the current applicant has an existing record, 
        select the record and click the 'Compare' button at the end of the list.</p>

    <form action="/webapps/Eligibility/NewApplicant/Compare" method="post">

        <table id="s_ResultsTable" class="grid-striped">
            <tr>
                <th>Select</th>
                <th>First Name</th>
                <th>Middle Name</th>
                <th>Last Name</th>
                <th>Date of Birth</th>
                <th>Alias?</th>
            </tr>
                    <tr class="row1">
                        <input id="item_PersonID" name="item.PersonID" type="hidden" value="41838" />
                        <input id="NewPersonModel_ApplicantID" name="NewPersonModel.ApplicantID" type="hidden" value="718" />
                        <td class="resultsRadio"><input id="SelectedResult" name="SelectedResult" type="radio" value="41838" /></td>
                        <td>Steven</td>                        
                        <td></td>                        
                        <td>Amos</td>                        
                        <td>11/22/1977</td>                                                    
                        <td>No</td>                                                    
                    </tr>

                    <tr class="row2">
                        <input id="item_PersonID" name="item.PersonID" type="hidden" value="54477" />
                        <input id="NewPersonModel_ApplicantID" name="NewPersonModel.ApplicantID" type="hidden" value="718" />
                        <td class="resultsRadio"><input id="SelectedResult" name="SelectedResult" type="radio" value="54477" /></td>
                        <td>Steven</td>                        
                        <td></td>                        
                        <td>Atkinson</td>                        
                        <td>09/23/1963</td>                                                    
                        <td>No</td>                                                    
                    </tr>
        </table>
        <div id="searchButtonDiv">
            <input type="hidden" id="SelectedPerson" name="SelectedPerson" value="" />
            <input type="submit" id="submit" class="SKButton" value="Compare" />
  <input type="button" class="SKButton" value="Back to Detail" title="Return to detail page" onclick="location.href='/webapps/Eligibility/NewApplicant/Detail/718'" />

        </div>
</form>
</div> 
```

![渲染页面示例](../Images/54e9c6d7e6d4b53f28b3d70a99dd3492.png)

以下是同一页面在任何其他浏览器中的呈现方式：

![应呈现的页面：](../Images/2cb9a885e94cb420a67ab28d1ccca44f.png)

知道为什么会这样做吗？

编辑添加更多代码。我在渲染源代码中注意到的一件事是重复使用 ID，这显然应该是类。使用 MVC Html 助手设置 ID，所以我正在研究如何阻止它这样做并更改为一个类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:52:18.900

那里一定有一些有趣的 HTML。也许是一个未封闭的标签，或者类似的东西，大多数浏览器都会原谅它。

我会说尽可能多地删除页面上的 HTML，一次一点，直到它看起来正常 - 这会找到你的罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:04:39.967

发现了问题，它不喜欢标签内的 2 个输入，但不喜欢任何类型的 , 等。我把它们放在第一个里面，一切都很好。

违规部分：

```
<tr class="row2">
                        <input id="item_PersonID" name="item.PersonID" type="hidden" value="163" />
                        <input id="NewPersonModel_ApplicantID" name="NewPersonModel.ApplicantID" type="hidden" value="718" />
                        <td class="resultsRadio"><input id="SelectedResult" name="SelectedResult" type="radio" value="163" /></td>
                        <td>steven</td>                        
                        <td></td>                        
                        <td>Terpin</td>                        
                        <td>04/14/1956</td>                                                    
                        <td>Yes</td>                                                    
                    </tr> 
```

现在更正为：

```
 <tr class="row2">
                        <td class="resultsRadio"><input id="SelectedResult" name="SelectedResult" type="radio" value="54477" /><input id="item_PersonID" name="item.PersonID" type="hidden" value="54477" /><input id="NewPersonModel_ApplicantID" name="NewPersonModel.ApplicantID" type="hidden" value="718" /></td>
                        <td>Steven</td>                        
                        <td></td>                        
                        <td>Atkinson</td>                        
                        <td>09/23/1963</td>                                                    
                        <td>No</td>                                                    
                    </tr> 
```

谢谢大家的建议。

# authentication - 是否有可以使用 WL.Server.SetActiveUser 的特定范围？

> ID：15391476
> 
> 赞同：0
> 
> 时间：2013-03-13T16:48:41.893
> 
> 标签：authentication, ibm-mobilefirst

我正在尝试在 Worklight 中创建基于适配器的身份验证。我已将我的领域、安全测试和登录模块添加到 authenticationConfig 文件中。我试图跟随 IBM 提供的模块。我已经复制了 WL.Server.setActiveUser 方法的确切语法甚至硬编码值。但我继续收到错误消息。我可以在一定范围内使用此方法吗？有谁看到或知道我的错误在哪里？

我继续收到以下错误：

```
LOG: Request [login] 
LOG: Request [/apps/services/api/GPC2/android/query] 
LOG: response [/apps/services/api/GPC2/android/query] success: /*-secure-
{"responseID":"1","isSuccessful":true,"resultSet REMOVED LINE THAT CONTAINED DB RESULTS FOR     SECURITY
[/apps/services/api/GPC2/android/query] exception. 
SCRIPT5007: Unable to get value of the property 'setActiveUser': object is null or undefined 

var lname= responseData.invocationResult.resultSet[0].somelastname;
var gpcid = responseData.invocationResult.resultSet[0].someid;
var fname = responseData.invocationResult.resultSet[0].somefname;
WL.Logger.debug("Login :: SUCCESS" + lname + " " + gpcid + " " + fname);  //this line does write the values to the log

//WL.Client.login("NotificationsRealm");
WL.Server.setActiveUser ("NotificationsRealm", {
userId: gpcid,
displayName: fname,
attributes: {
firstName: fname,
lastName : lname,
isUserAuthenticated: 1,
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:14:33.257

[查看 WL.Server.setActiveUser](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=/com.ibm.worklight.help.doc/apiref/r_method_wl_server_setactiveuser.html)的API 文档，应该是这样的：

```
WL.Server.setActiveUser ("ACMERealm", {
    userId: "38017840288",
    displayName: "John Doe",
    attributes: {
        "firstName": "John",
        "lastName": "Doe",
        "lastLogin": "2010-07-13 19:25:08.0 GMT",
    }
}) 
```

看起来您缺少属性的双引号？

# javascript - 在 jquery mobile 中更改页面后，谷歌地图仅部分加载

> ID：15391478
> 
> 赞同：1
> 
> 时间：2013-03-13T16:48:42.930
> 
> 标签：javascript, jquery-mobile, google-maps-api-3

我在 jquery mobile 中有主页，该主页链接到另一个页面，其中地图遍布屏幕，顶部有标题。当我使用地图转到该链接时，地图只加载了一部分（如您在屏幕截图中看到的那样），当我尝试移动它时，它会跳回来。

![地图截图](../Images/43ab5bb1aac4bbaf8c05b935b79a7ed4.png)

如您所见，画布已正确加载，因为下方有谷歌地图徽标和使用条款。那有什么问题？

一个事实：当我刷新地图页面（不是从主页开始）或当我在地图页面上调整浏览器窗口大小时，它显示得非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:34:03.233

触发地图刷新。当地图容器更改大小或最初隐藏然后显示时，可能会发生这种情况。例如，当使用 jQuery UI 选项卡并在隐藏选项卡上初始化地图时，也会发生同样的事情。

```
google.maps.event.trigger(map, 'resize') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:37:45.497

地图已加载到 DOM 中`pageinit`，因此它现在无法获得正确的屏幕/窗口尺寸。因此，您必须绑定初始化地图，`pagebeforeshow`因为它允许地图获取屏幕大小。

这是它的工作原理。

```
$(document).on('pagebeforeshow', '[data-role="page"]#map' , function() 
```

代替

```
$(document).bind('pageinit', function() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T02:40:19.467

我有同样的问题，最后通过触发“调整大小”两次来解决它。像这样：

```
$("#mapelement").height(10);
$("#mapelement").width(10);
google.maps.event.trigger(googlemap, 'resize');
setTimeout(function() {
    adjustMapSize();  // set the correct size of #mapelement
    google.maps.event.trigger(googlemap, 'resize');
    updateMap();     // center the map and display markers
}, 500); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-28T10:32:34.030

```
$(document).on('pageshow', "#name-page", function() {
    initialize();
}); 
```

试试这个，

# xslt-2.0 - 需要组相邻语法建议

> ID：15391481
> 
> 赞同：1
> 
> 时间：2013-03-13T16:48:47.683
> 
> 标签：xslt-2.0

我有以下 xml （为此目的进行了简化）

```
<content>
<p1>blabla</p1>
<p2>blabla</p2>
<p2>blabla</p2>
<p1>blabla</p1>
<p3>blabla</p3>
<p1>blabla</p1>
<p2>blabla</p2>
<p2>blabla</p2>
<p1>blabla</p1>
<p3>blabla</p3>
<p2>blabla</p2>
</content> 
```

我想对所有 p1 元素和 p2 元素进行分组，但只有在前一个兄弟元素是 p1 元素的情况下才会对后者进行分组。

我使用了以下 xslt ：

```
<xsl:for-each-group select="*" group-adjacent="self::p1 or (self::p2 and preceding-sibling::p1[1])">
                    <xsl:choose>
                        <xsl:when test="current-grouping-key()">
                            <ol_coll>
                                <xsl:apply-templates select="current-group()"/>

                            </ol_coll>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="current-group()"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each-group> 
```

但是我忽略了语法中的某些内容，因为它不查看前一个元素，而是查看整个树。所以我得到以下回报

```
<content>
<ol_coll>
    <p1>blabla</p1>
    <p2>blabla</p2>
    <p2>blabla</p2>
    <p1>blabla</p1>
</ol_coll>
<p3>blabla</p3>
<ol_coll>
    <p1>blabla</p1>
    <p2>blabla</p2>
    <p2>blabla</p2>
    <p1>blabla</p1>
</ol_coll>
<p3>blabla</p3>
<ol_coll>
    <p2>blabla</p2>
</ol_coll>
  </content> 
```

但我希望的是以下内容：

```
<content>
<ol_coll>
    <p1>blabla</p1>
    <p2>blabla</p2>
</ol_coll>
<p2>blabla</p2>
<p1>blabla</p1>
<p3>blabla</p3>
<ol_coll>
    <p1>blabla</p1>
    <p2>blabla</p2>
</ol_coll>
<p2>blabla</p2>
<p1>blabla</p1>
<p3>blabla</p3>
<p2>blabla</p2>
 </content> 
```

谁能指出我的错误？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:02:31.420

我认为您需要将条件更改为`preceding-sibling::*[1][self::p1]`，然后您需要确保不包装单个元素。所以随着

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="content">
  <xsl:copy>
             <xsl:for-each-group select="*" group-adjacent="self::p1 or (self::p2 and preceding-sibling::*[1][self::p1])">
                    <xsl:choose>
                        <xsl:when test="current-grouping-key() and current-group()[2]">
                            <ol_coll>
                                <xsl:apply-templates select="current-group()"/>

                            </ol_coll>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:apply-templates select="current-group()"/>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each-group>  
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

我得到了你发布的结果（运行 Saxon 9.4）。

# r - 获取所有结果后，RMySQL 结果集不是“完整的”

> ID：15391483
> 
> 赞同：5
> 
> 时间：2013-03-13T16:48:50.013
> 
> 标签：r, rmysql

在一个处理 MySQL 服务器中大量行的脚本中，我使用`dbSendQuery`and`fetch`来限制结果的获取和处理。

当我的`fetch`命令准确检索结果集中可用（或剩余）的行数时，留下 0 行要获取，`dbHasCompleted`返回`FALSE`而我期望它返回`TRUE`。

```
query <- "select record_id, name 
          from big_table left join another_table using (record_id) 
          limit 500"

resultset <- dbSendQuery(con, query)   # con: DB connection

while(!dbHasCompleted(resultset)) {
  input <- fetch(resultset, n = 500)
  print(paste("Rows fetched:", nrow(input)))
  # process input ...
} 
```

我希望这个循环运行一次，但是在处理之后有一个额外的运行，`print`再次被调用：

```
Rows fetched: 500
...
Rows fetched: 0 
```

显然，`dbHasCompleted(resultset)`当获取可用行的确切数量时是错误的（对于 n = 1000、2000、3000 观察到相同的行为）。在此脚本中 n = 501 时，没有第二个循环。

这是可以预料的吗？难道我做错了什么？

# parallel-processing - 使用 ParallelTable 时如何防止出现这些警告

> ID：15391487
> 
> 赞同：0
> 
> 时间：2013-03-13T16:49:00.080
> 
> 标签：parallel-processing, wolfram-mathematica

我有这个代码来查找形成合法单词的一组字母的所有排列。

```
>>Combinatorica`
Module[{str = "abc", chars, len, r, check},
 chars = Characters[str];
 len = StringLength[str];
 r = Range[len];
 check[n_Integer] := 
  DictionaryLookup[{"BritishEnglish", 
    StringJoin[chars[[UnrankPermutation[n, r]]]]}, 1];
 DistributeDefinitions[check, chars, r];
 ParallelTable[check[i], {i, 1, len!}]] 
```

我已经验证，如果我用 Table 替换 ParallelTable，我会得到：

```
{{}, {}, {}, {"cab"}, {}, {}} 
```

但是，使用 ParallelTable，除了该结果之外，我还会收到如下警告：

```
Part::pspec: Part specification Combinatorica`UnrankPermutation[1,{1,2,3}] is neither a machine-sized integer nor a list of machine-sized integers.

Part::pspec: Part specification Combinatorica`UnrankPermutation[2,{1,2,3}] is neither a machine-sized integer nor a list of machine-sized integers.

StringJoin::string: String expected at position 1 in StringJoin[{a,b,c}[[Combinatorica`UnrankPermutation[1,{1,2,3}]]]].

StringJoin::string: String expected at position 1 in StringJoin[{a,b,c}[[Combinatorica`UnrankPermutation[2,{1,2,3}]]]]. 
```

这些警告似乎来自内核 7 及更高版本。我的猜测是计算到达那些内核并且没有任何数据留下，因为只有 6 个排列，并导致它们吐出这些警告。

我的理解正确吗？如何防止这些警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:35:27.347

我不认为是这样 - 如果是这样的话，这个简单的测试也会失败：

```
ParallelTable[k^2,{k,3}] (* Assuming more than 3 kernels *) 
```

...运行得很好。

相反，在我看来，函数 UnrankPermutations[] 在 ParallelTable 下表现不佳，正如您从运行简化版本中看到的那样（这也失败了）：

```
ParallelTable[Part[chars, UnrankPermutation[n, r]], {n, len!}] 
```

我不确定您采用的蛮力方法是否是一个好的方法（考虑当单词长度超过 10 个字符时会发生什么），但遵循该想法的解决方法是：

```
list = LexicographicPermutations[chars]
ParallelMap[DictionaryLookup[{"BritishEnglish", #}] &, 
 Map[StringJoin[#] &, list]] 
```

祝你好运！

# c - 如何在不创建临时文件的情况下从 char * 创建 FILE*

> ID：15391496
> 
> 赞同：0
> 
> 时间：2013-03-13T16:49:21.260
> 
> 标签：c, file, stream, yacc, lex

我正在使用 lex 和 yacc 创建一个程序来解析文本，但我需要创建一个各种内容的解析器。我不希望使用标准输入，如果我使用 FILE *yyin 来指定输入，我可以更改源。我需要可以从库解析（使用 lex 文件和 yacc 文件创建）中调用函数来解析此内容并接收结果。

```
/**
* This i don't know is possible, receive a char * and return a FILE*
*/
FILE *function_parse_to_file(char* text){
    FILE *fp = NULL;
    /**
    * is really necessary create a temporary file with content text?
    */

    return fp
}
/**
* I need call from other library or application
*/
char *function_parse_from_lex(char* text){
    yyin = function_parse_to_file(text);
    init(); 
    yyparse(); 
    fclose(yyin); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:53:19.577

在符合 POSIX-2008 的系统（和 Linux）上，您可以使用它[`fmemopen`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)来获取`FILE*`内存缓冲区的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:58:48.597

您可以使用三个参数定义`YY_INPUT`宏：buffer、result、max_size，其中：

*   缓冲区 - 带有缓冲区的输入，用于读取数据，
*   结果 - 输出以存储读取的字节数
*   max_size - 缓冲区大小的输入

只需使用 header 或 inline 在 Lex 文件中包含宏定义，它将被使用而不是 fread(...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:00:01.293

您确实没有清楚地说明您的问题，但是我假设您要创建一个 FILE * ，当从中读取数据时，它将返回 char * 指向的字符串的内容。您可以简单地创建一个管道，然后`fdopen`在读取端调用。仅将数据写入写入端有点危险，因为写入可能会阻塞并导致死锁，但您当然可以分叉一个孩子并让孩子将数据写入管道。

另一方面，没有真正的理由不创建临时文件。假设您要在读取文件后取消链接，则数据进入磁盘的可能性很小（操作系统会将其保存在内存中）如果您真的担心可以使用 ram 磁盘上的路径。

# mysql - MySQL(?) 到 SQLite

> ID：15391497
> 
> 赞同：0
> 
> 时间：2013-03-13T16:49:23.520
> 
> 标签：mysql, sql, sqlite

我想将它添加到 SQLite 中，但我无法让 alter table 与添加外键一起工作。它看起来像这样：

`create table Medlem
(Mnr integer not null,
Namn varchar(6),
Telefon varchar(10),
primary key (Mnr));` 

 `create table Sektion
(Skod char(1) not null,
Namn varchar(14),
Ledare integer,
primary key (Skod));

create table Deltar
(Medlem integer not null,
Sektion char(1) not null,
primary key (Medlem, Sektion));` 

`alter table Sektion
add foreign key (Ledare) references Medlem (Mnr);
alter table Deltar
add foreign key (Medlem) references Medlem (Mnr);
alter table Deltar
add foreign key (Sektion) references Sektion (Skod);` 

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:11:58.503

在 SQL Lite 中实现外键约束的唯一方法是`CREATE TABLE`：

```
CREATE TABLE track(
  trackid     INTEGER, 
  trackname   TEXT, 
  trackartist INTEGER,
  FOREIGN KEY(trackartist) REFERENCES artist(artistid)
); 
```

> 不能使用`ALTER TABLE ... ADD COLUMN`语法来添加包含`REFERENCES`子句的列，除非新列的默认值为`NULL`. 尝试这样做会返回错误。

[文档](http://www.sqlite.org/foreignkeys.html#fk_schemacommands)

# android - iText for Android - 来自 PdfReader 和 org.bouncycastle 的错误

> ID：15391501
> 
> 赞同：0
> 
> 时间：2013-03-13T16:49:39.717
> 
> 标签：android, itext

我正在编写一个需要从 sdcard 读取 pdf 文件的 Android 应用程序。我正在尝试使用 iText 读取图像。

```
public class ExtractImages {

/** The new document to which we've added a border rectangle. */
public static final String RESULT = "results/part4/chapter15/Img%s.%s";

/**
 * Parses a PDF and extracts all the images.
 * @param src the source PDF
 * @param dest the resulting PDF
 */
public void extractImages(String filename)
    throws IOException, DocumentException {
    PdfReader reader = new PdfReader(filename);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    MyImageRenderListener listener = new MyImageRenderListener(RESULT);
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        parser.processContent(9, listener);
    }
    reader.close();
} 
```

我正在使用模拟器在 Eclipse 中工作，当我单步执行代码并触发 PdfReader = new PdfReader 行时，我在 logcat 中收到以下错误：-

找不到从方法 com.itextpdf.text.pdf.PdfReader.readDecryptedDocObj 引用的类 'org.bouncycastle.cert.X509CertificateHolder'

我安装了 itext jar 并找到了导入，所以我想知道是否需要其他一些库。我正在使用 JavaSDK 1.6。这是我第一次尝试使用 iText，它是社区下载。这个一定有答案，希望有人能回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:48:41.017

在大多数情况下，iText 不能直接在 Android 上使用。我们对 Android 和 App Engine 进行了特定更改。其中一项更改是使用 SpongyCastle 代替 BouncyCastle。

您可以在此处下载试用版：http: [//demo.itextsupport.com/newslicense/](http://demo.itextsupport.com/newslicense/)

# c# - 如何仅使用存根类对 C# 中的 if-else 语句进行单元测试？

> ID：15391504
> 
> 赞同：1
> 
> 时间：2013-03-13T16:49:49.060
> 
> 标签：c#, unit-testing, design-patterns

我想测试 if-else 语句是否被执行，“if”块从字典/缓存中返回项目并返回输出，而“else”块在缓存中添加输入并返回输出

带有方法 Apply 的 IModifyBehavior 接口

我能够使用最小起订量正确实现它，但现在我想尝试的是只使用存根类（无框架）进行单元测试，我也想在不使用假货的情况下实现它。

我有这个课程：

```
namespace Decorator
{
    using System;

    /// <summary>
    /// Reverse Behavior
    /// </summary>
    public class ReverseBehavior : IModifyBehavior
    {
        /// <summary>
        /// Applies the specified value.
        /// </summary>
        /// <param name="value">The value.</param>
        /// <returns>result</returns>
        public string Apply(string value)
        {
            var result = string.Empty;
            if (value != null)
            {
                char[] letters = value.ToCharArray();
                Array.Reverse(letters);
                result = new string(letters); 
            }

            return result; 
        }
    }
}

using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    /// <summary>
    /// Caching Decorator
    /// </summary>
    public class CachingDecorator : IModifyBehavior
    {

        /// <summary>
        /// The behavior
        /// </summary>
        private IModifyBehavior behavior;

        public CachingDecorator(IModifyBehavior behavior)
        {
            if (behavior == null)
            {
                throw new ArgumentNullException("behavior");
            }

            this.behavior = behavior;
        }

        private static Dictionary<string, string> cache = new Dictionary<string, string>();

        /// <summary>
        /// Applies the specified value.
        /// </summary>
        /// <param name="value">The value.</param>
        /// <returns>
        /// value
        /// </returns>
        public string Apply(string value)
        {
            ////Key = original value, Value = Reversed
            var result = string.Empty;

            //cache.Add("randel", "lednar");
            if(cache.ContainsKey(value))
            {
                result = cache[value];
            }
            else
            {
                result = this.behavior.Apply(value);// = "reversed";
                ////Note:Add(key,value)
                cache.Add(value, result); 
            }
            return result;
        }
    }
} 
```

这是我当前的测试代码，这些代码能够通过测试，但我不确定我的实现是否正确：

```
[TestClass]
    public class CachingDecoratorTest
    {
        private IModifyBehavior behavior;

        [TestInitialize]
        public void Setup()
        {
            this.behavior = new CachingDecorator(new ReverseBehavior());
        }

        [TestCleanup]
        public void Teardown()
        {
            this.behavior = null;
        }

        [TestMethod]
        public void Apply_Cached_ReturnsReversedCachedValue()
        {
            string actual = "randel";           
            ////store it inside the cache
            string cached = this.behavior.Apply(actual);

            ////call the function again, to test the else block statement
            ////Implement DRY principle next time
            string expected = this.behavior.Apply(actual);
            Assert.IsTrue(cached.Equals(expected));

        }

        [TestMethod]
        public void Apply_NotCached_ReturnsReversed()
        {
            string actual = "randel";
            string expected = "lednar";
            Assert.AreEqual(expected, this.behavior.Apply(actual));
        }

    } 
```

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:26:42.457

我认为您会想要一个真正执行类*合同*的单元测试，而不必过多担心内部结构。例如，您可以通过反射做某事，或者公开一些新方法，让您的测试询问缓存它在做什么，但您的测试无论如何都不应该关心这些。如果我查看缓存装饰器，您所暗示的合同类似于：

一旦`apply`使用参数`x`和返回值`v`调用，任何随后对`apply`参数的调用`x`也将返回`v`。

因此，正如您已经拥有的那样，调用该方法两次的测试`x`可以表明我们两次都`v`返回。但是我们不能说这是因为缓存装饰器正在做我们想要的，或者是因为底层的反转修饰符只是遵循合同。

那么，如果我们有一个不符合这些规则的潜在修饰符呢？

假设，使用一个模拟，你设置了一个`IModifyBehavior`返回它被调用次数的实现？现在我们有了不同的行为——如果我用相同的参数在这个实现上调用 apply 3 次`x`，我会得到 3 个不同的答案（可以通过单元测试来验证）。如果我随后将该模拟包装在您的 CachingDecorator 中，我可以看到 CachingDecorator 挂在它看到的第一个调用上，并遵守原始合同。这向我“证明”了 CachingDecorator 的内部结构遵循合同，而不是仅仅将调用传递给恰好也遵循合同的其他对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:43:41.980

我的第一个问题是你为什么反对使用模拟框架？

但是在这种情况下，为什么不直接滚动你自己的模拟，请参阅[滚动你自己的模拟对象](http://bobthejanitor.org/2009/04/rolling-your-own-mock-objects.html)，这可以在不使用外部库的情况下解决你的问题。

# c# - Linq-to-SQL DataContext.GetTable 问题（序列包含多个元素）

> ID：15391505
> 
> 赞同：0
> 
> 时间：2013-03-13T16:49:51.300
> 
> 标签：c#, winforms, linq-to-sql

我将 Linq-to-SQL 与持久层的存储库模式一起使用。我的应用程序遇到以下错误：当代码在数据上下文上调用 GetTable.ToList() 方法时，“序列包含多个元素”。我知道为什么如果我使用 SingleOrDefault、FirstOrDefault 等方法会引发此异常...但是，我无法理解为什么当应用程序仅获取表并将其转换为列表时会引发此异常. 有人可以分享他们的想法吗？

```
// Causes "Sequence contains more than one element" error
dao.All().ToList();

// Below is the implementation for the All method used in the statement above
// that resides in my Repository class that all DAOs extend
public IEnumerable<T> All()
{
    return GetTable;
}

// Implementation of GetTable property in Repoistory class where db is datacontext
public System.Data.Linq.Table<T> GetTable
{
    get { return db.GetTable<T>(); }
} 
```

# ruby-on-rails - Namecheap 服务器上的 Rails 问题

> ID：15391507
> 
> 赞同：2
> 
> 时间：2013-03-13T16:50:03.420
> 
> 标签：ruby-on-rails, environment

O. 社区，提前感谢您的支持！

我最近参加了 Mattan Griffel 关于 Skillshare 的一个月 Rails 课程，以便能够编写 Rails Web 应用程序。Railsinstaller.org 包括 rails 3.2.1 和 ruby​​ 1.9.3，并且开箱即用。我的应用程序运行良好，是时候将它放到网上了，所以我购买了一个 namecheap 域名和网络服务器，上传了我的应用程序，然后......什么也没有！问题是 namecheap 服务器仅支持 rails 2.3.17 和 ruby​​ 1.8.7 - 使用 v 3.x 创建或依赖于 ruby​​ 1.9.x 的任何内容都不会在 2.x / 1.8.x 环境中运行。有没有其他人遇到过这个问题？这似乎是一个标准用例，我不敢相信它没有在 namecheap 网站上得到更好的记录。我已经完成了我的 Google-Fu 并了解到，一旦我安装了它，我可以使用创建一个旧的 rails 应用程序

```
rails _2.3.17_ AppName 
```

是否有类似的方法可以强制 rails 也使用旧版本的 ruby​​？我厌恶地几乎完全取消了我的 namecheap 帐户，所以如果有人知道有一个更好的地方来托管我的 rails 3.x Web 应用程序，我很想听听！（让我们暂时假设 VPS 非常昂贵，并且远远超出了我对资源的需要）。

再次感谢，一位沮丧的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:58:08.090

您可以使用 heroku 免费帐户开始。不要浪费时间解决共享主机上的问题，它们只是玩具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:35:06.933

Rails 3.x 本机 cPanel 支持仍未发布，功能请求案例仍在打开 [http://forums.cpanel.net/f145/mod_rails-passenger-instead-mongrel-rails-3-support-case-44197-a-152577 .html](http://forums.cpanel.net/f145/mod_rails-passenger-instead-mongrel-rails-3-support-case-44197-a-152577.html)

这很棘手，但可以运行 Ruby 3 应用程序 - 在这种情况下需要额外的软件安装和全局服务器重新配置，但在每个用户的常规共享服务器上几乎不可能。我们可以提供将您的主机帐户升级到 VPS。您现有的所有帐户内容，包括数据库、其他域、电子邮件帐户和设置，都将透明地传输到 VPS。要使用 cPanel 优化您的 VPS 并使您能够开发和运行 Ruby 3 应用程序，您可以要求我们的技术支持团队根据您的所有要求调整系统。Full Management VPS 选项包括操作系统调整和自定义软件安装。您可以请求兼职技术支持作为替代方案。

问候，

## 迪玛·S。

技术支持, Namecheap Hosting

# javascript - 匹配至少一个字母、一个数字和一个非字母数字

> ID：15391509
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:50:07.473
> 
> 标签：javascript, regex

我一直在尝试制作密码验证器。它只允许使用至少一个字母、至少一个数字和至少一个非字母数字字符的密码。

我有以下工作：

```
function passwordValidate(password, password_c, msg)
{
    if (notEmpty(password, "Enter a password"))
    {
        if (password.value === password_c.value)
        {
            if(/\W/.test(password.value))
            {
                if (/\d/.test(password.value) && /[a-zA-Z]/.test(password.value))
                {
                    return true;
                } else {
                    alert(msg);
                }
            } else {
                alert("Must have a special character in your password");
            }
        } else {
            alert("Passwords don't match");
        }
    }
    return false;
} 
```

我最初有“ `password.value.match("\W|_")`”，这导致了问题，因此将其更改为“ `/\W/.test(password.value)`”。有谁知道我如何将它组合成一个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:55:10.723

你可以使用断言。
断言子模式以常规方式匹配，只是它不会导致当前匹配位置发生变化。

尝试：

```
var rgx=/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^0-9a-zA-Z])/

//my test
var theTest=['azert7ui@i4','uiou5','4761238|z','jhkj','8989go','457@457'];
for (i=0;i<theTest.length;i++) alert(theTest[i]+' '+rgx.test(theTest[i])); 
```

所以最初我们测试 1 digit ( `?=.*\d`) 。它可以以某事开头，也可以不以某事开头。
接下来是字母字符和非字母字符。使用`\w`重复数字错误的（“单词”字符是任何字母或数字）是错误的（仅使用数字和特殊字符测试为真）。
这`\`是字符串中的特殊含义，因此测试是错误的。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:58:48.110

此外，不要让这些嵌套的`if`语句阶梯式出现，而是尽早突破。它更清洁：

```
function passwordValidate(password, password_c, msg) {
    if (!notEmpty(password, "Enter a password")) {
        return false;
    }

    if (password.value !== password_c.value) {
        alert("Passwords don't match");
        return false;
    }

    if(!/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^\da-zA-Z])/.test(password.value)) {
        alert("Must have a special character in your password");
        return false;
    }

    alert(msg);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:32:59.040

// 做单独的测试可能更容易-

```
function testPassword(pw){
    pw= pw.replace(/\s+/, ''); //remove spaces
    var msg= [' non-alphanumerical', ' alphabetical', ' digit'],
    rx= [/\W/,/[a-zA-Z]/,/\d/];
    for(var i= 0;i<3;i++){
        if(!rx[i].test(pw)) throw Error('At least one'+
        msg[i]+' character is required');
    }
    return pw;
} 
```

# javascript - 简单的 JavaScript Magento

> ID：15391514
> 
> 赞同：0
> 
> 时间：2013-03-13T16:50:12.050
> 
> 标签：javascript, magento, onclick

嗨，我有一个简单的 JavaScript 问题，我有一段时间没有使用 JavaScript，所以想知道您是否可以提供帮助。

```
<?php
$sizeChartIcon= Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA)."size-charts/size-icon.gif"; ?>

<a onclick="$('size-chart').show();"><?php echo '<img src="'.$sizeChartIcon.'" alt="size chart">' ; ?></a> 

<div id="size-chart" style="display:none;"> <?php echo  Mage::app() ->getLayout() ->createBlock('cms/block') ->setBlockId($_product->getAttributeText('size_chart_template')) ->toHtml(); ?>
</div> 
```

如果您单击 sizeChartIcon，这将显示静态块，但它保持打开状态，如果客户再次单击该图标，我将如何再次隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:53:21.193

调用它而不是 show()

```
<script type="text/javascript">
<!--
    function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }
//-->
</script> 
```

来源：[http ://blog.movalog.com/a/javascript-toggle-visibility/](http://blog.movalog.com/a/javascript-toggle-visibility/)

# cakephp - cakePHP中的多级排序

> ID：15391523
> 
> 赞同：0
> 
> 时间：2013-03-13T16:50:44.753
> 
> 标签：cakephp

为什么 cakePHP 不将我所有的关联都包含在一个 SQL 查询中？我能够做到这一点的唯一方法是使用“加入”，但我希望 belongsTo 和 Containable 行为就足够了。

这是一个示例： Post->belongsTo->Category->belongsTo->category_type （所有模型均已正确设置并且可以正常工作。

在索引中列出带有分页的帖子，我试试这个：

```
public function index() {   
    $this->paginate = array( 'contain' => array('Category' => array('CategoryType')));
    $this->set('posts', $this->paginate());
} 
```

这会正确获取数组，但它在许多 SQL 中都是这样的：

```
SELECT `Post`.`id`, `Post`.`name`, `Post`.`content`, `Post`.`category_id`, `Category`.`id`, `Category`.`name`, `Category`.`category_type_id` FROM `unit_app`.`post` AS `Post` LEFT JOIN `unit_app`.`categories` AS `Category` ON (`Post`.`category_id` = `Category`.`id`) WHERE 1 = 1 LIMIT 20
SELECT `CategoryType`.`id`, `CategoryType`.`name` FROM `unit_app`.`category_types` AS `CategoryType` WHERE `CategoryType`.`id` = 1
SELECT `CategoryType`.`id`, `CategoryType`.`name` FROM `unit_app`.`category_types` AS `CategoryType` WHERE `CategoryType`.`id` = 2
SELECT `CategoryType`.`id`, `CategoryType`.`name` FROM `unit_app`.`category_types` AS `CategoryType` WHERE `CategoryType`.`id` = 2 
```

这使得很难在 CategoryType.name ASC 上对该查询进行排序。有什么建议么？

如果连接是唯一的选择，我是否必须在查询之前取消绑定模型？分页可以与连接一起正常工作吗？

笔记！这只是所有模型的一小部分，生成的 post->index 还需要通过类似的关联获取许多其他模型。

（在 cake 2.2.0 和 v2.4.0-dev、php v5.4.11 上测试）

更新！---------

我只是想展示我的发现。我现在已经在没有连接的情况下解决了这个问题，但我必须在模型中重新绑定才能让它工作。

这基本上是我为使其工作所做的（也包括分页和排序）： 在 Post 模型中：添加了一个绑定函数：

```
 $this->unbindModel(array(
    'belongsTo' => array('Category')
  ));

  $this->bindModel(array(
    'hasOne' => array(
      'Category' => array(
        'foreignKey' => false,
        'conditions' => array('Category.id = Post.category_id')
    ),
    'CategoryType' => array(
      'foreignKey' => false,
      'conditions' => array('CategoryType.id = Category.category_type_id')
    )))); 
```

然后我将它添加到 Post 控制器中的索引中：

```
 $this->Post->bindCategory();
  $this->paginate = array('contain' => array('Category' ,'CategoryType'));
  $this->set('posts', $this->paginate()); 
```

我包括表头也只是为了文档：

```
<th><?php echo $this->Paginator->sort('CategoryType.name', 'Type'); ?></th>
<th><?php echo $this->Paginator->sort('Category.name', 'Category'); ?></th> 
```

我希望这篇文章也可以帮助其他人:)

我还将测试此行为，看看我是否也可以省略所有绑定函数：[https ://github.com/siran/linkable/](https://github.com/siran/linkable/)

蛋糕有很多插件，但蛋糕应该有插件的“认证”。在 github 上很难找到完全正常工作和测试过的 :)

我也想念一个像 railscasts.com 这样的网站，只是为了蛋糕：D

/玛顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:48:45.857

是的，您必须使用 JOIN 才能根据关联的模型结果进行排序。

是的，您可以使用 JOIN 进行分页。只需在实际调用`$this->paginate();`. （网上有很多关于如何使用 JOIN 进行分页的资源）

# arrays - 数组内拼接数组

> ID：15391537
> 
> 赞同：0
> 
> 时间：2013-03-13T16:51:28.960
> 
> 标签：arrays, actionscript-3

如何在另一个数组中拼接一个数组？

我正在尝试为我班上的孩子们创建一个游戏。某种琐事历史问题的创建者。如何拼接 MasterArray 以便我摆脱 allEnglandArray 中的子数组（Hard-England 和 Medium-England）。因为“MasterArray.splice()”似乎正在影响 - 仅拼接 allEngland 数组或 allFrance 数组。但我需要摆脱那些子阵列......

我的代码：

```
var Easy-England:Array = ["item1","item2","item3","item4","item5"];
var Medium-England:Array = ["item6","item7","item8"];
var Hard-England:Array = ["item9","item10"];
var allEngland:Array = [Easy-England,Medium-England,Hard-England];

var Easy-France:Array = ["item11","item12","item13","item14","item15"];
var Medium-France:Array = ["item16","item17","item18"];
var Hard-France:Array = ["item19","item20"];
var allFrance:Array = [Easy-France,Medium-France,Hard-France];

// the list of countries goes on and on and on... (Italy, Hungary, etc.)

var allStuff:Array = [allEngland, allFrance, etc.];
var MasterArray:Array;

// FUNCTIONS

// clear MasterArray - first I clear out completely the MasterArray

function clearMasterArray():void
{
    MasterArray.splice(0);
}

// update MasterArray - than I fill the MasterArray with data according to checkBoxes

function updateMasterArray():void
{
    for (var i:int = 0; i<checkBoxBlock.myCheckBoxes.length; i++)
    {
        if (checkBoxBlock.myCheckBoxes[i].selected)
        {
            MasterArray.push(allStuff[i]);
        }
    }
}    

// splice MasterArray - last thing I do is splice the items according to student's proficiency level, referred to as "studentPL".

function spliceMasterArray():void
{
    if (studentPL == 1)
    {
        for (var i:int = 0; i<allStuff.length; i++)
        {
            allStuff[i].splice(5,5);
        }

    }

    if (studentPL == 2)
    {
         for (var i:int = 0; i<allStuff.length; i++)
         {
            allStuff[i].splice(8,2);
         }

    }

    if (studentPL == 3)
    {
        for (var i:int = 0; i<allStuff.length; i++)
        {
            trace("no need to splice");
        }
    }
 } 
```

在此之后，我按此顺序在另一个函数中调用这些函数......

```
function creatorFunction():void
{
    clearMasterArray();
    updateMasterArray();
    spliceMasterArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:05:19.307

代替：

```
var allEngland:Array = [Easy-England,Medium-England,Hard-England]; 
```

试试这个：

```
var allEngland:Array = Easy-England.concat(Medium-England, Hard-England); 
```

这样您将拥有一个“平面”数组（没有子数组），因此更容易处理。

# c# - 输入字符串的格式不正确

> ID：15391538
> 
> 赞同：0
> 
> 时间：2013-03-13T16:51:37.407
> 
> 标签：c#

我对 c# 真的很差我只有 c# 的基本知识我有这段代码但我不能让它工作 probelly 调试器说问题在这里[http://puu.sh/2h2wV](http://puu.sh/2h2wV)代码在这里这是我抱歉，这可能是一个如此简单的错误，我有其他代码是真的，是我的旧程序 :(

```
 Console.WriteLine("Sisesta esimene arv vahemikus 10-20");
            vastus1 = int.Parse(Console.ReadLine());
            Console.WriteLine("sisesta teine arv vahemikus 20-32");
            vastus2 = int.Parse(Console.ReadLine());
            Console.WriteLine("Vastus {0}", vastus2 - vastus1);

            string tekst1 = Console.ReadLine();
            vastus3 = int.Parse(tekst1);   <------ debugger says problem is here
        }
        while ((vastus1 < 1 || vastus2 < 12));

        if (vastus3 >= 3 && vastus3 >= 5) 
        {
            Console.WriteLine("On Kevad");

                {
                    if (vastus3 >= 6 && vastus3 >= 8) 
                    {
                        Console.WriteLine("on suvi");
                    }
                }
                if (vastus3 >= 9 && vastus3 >= 11) 
                {
                    Console.WriteLine("on sügis");
               }
                if (vastus3 >= 11 && vastus3 >= 2) 
                {
                    Console.WriteLine("on talv");
                }
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:53:23.547

好吧，错误说明了一切

```
The input string was not in the right format 
```

在您正在做的事情的上下文中，这意味着您在控制台中输入的任何内容`int.Parse`都不能被解析为 int。

如果您希望有时输入到控制台的内容不是数字，您可以使用`int.TryParse`它来确定它是否有效。

```
int vastus3 = 0;
while(!int.TryParse(Console.ReadLine(),out vastus3 ))
{
    Console.WriteLine("Invalid number, try again!");
}
// here "vastus3" will have your integer 
```

这可以准确地进入您的代码中您当前失败的行所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:03:33.400

Jamiec 的解释是正确的。如果您要查找的整数总是以相同的格式出现在字符串的末尾，您可以使用 Substring 来获取特定字符，然后进行比较检查。

这是一个关于如何使用 Substring 从字符串末尾删除字符的示例。

[从字符串的末尾子串一个字符串](https://stackoverflow.com/questions/6467711/substring-a-string-from-the-end-of-the-string)

还有msdn

[http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)

# class - 如何以跨浏览器的方式使用 ExtJS 4.1.1 获取元素类属性？

> ID：15391546
> 
> 赞同：2
> 
> 时间：2013-03-13T16:51:49.827
> 
> 标签：class, internet-explorer-8, extjs4.1, getattribute

我只是注意到这`Ext.get('myElement').getAttribute('class')`不适用于 IE8-。有没有人有一个优雅的选择（ExtJS 4.1.1 本机或补丁首选）？也许这个功能隐藏在框架的某个地方？

* * *

## 编辑

这是上下文。我暂时解决了这样的问题：

```
action.getAttribute('class') || action.dom.className 
```

查看（网格）：

```
{
    xtype: 'actioncolumn',
    items: [{
        icon: '/images/edit.png',
        iconCls: 'action-edit'
    }, {
        icon: '/images/delete.png',
        iconCls: 'action-delete'
    }]
} 
```

控制器 ：

```
init: function () {
    this.control({
        'grid actioncolumn': {
            click: function (a, b, c, d, ev, record) {
                var action = Ext.get(ev.target);
                if (action.is('img')) {
                    action = action.getAttribute('class') || action.dom.className;
                    action = action.match(/action-(.+)/)[1];
                    this[action + 'Action'](record);
                }
            }
        }
    });
},

editAction: function (record) { 
    // ... 
},

deleteAction: function (record) { 
    // ... 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:22:58.547

从节点 ID 中删除 # ，它可能会起作用。

*更新*：我仍然不确定你到底想做什么。`Ext.get`返回`Ext.dom.Element`对象，它包装原生元素并提供一定程度的 DOM 抽象，但仍然是非常低级的工具。由于较旧的 IE 不支持“类”属性，您必须调用`getAttribute('className')`才能获得结果。

或者，您可以诉诸于使用标准的便捷方法`hasCls`，例如`getStyle`检查元素上的特定类和样式。要查找具有特定类的元素，有`query`方法。总而言之，我不明白为什么您需要获取在元素上定义的所有类的列表。

*更新2*：好的，现在我得到了你需要的东西。您的代码太复杂了，可以这样简化：

CSS：

```
.action-edit, .action-delete {
    width: 16px; /* Or whatever fits your bill */
    height: 16px;
}

.action-edit {
    background-image: url('/images/edit.png');
}

.action-delete {
    background-image: url('/images/delete.png');
} 
```

看法：

```
{
    xtype: 'actioncolumn',
    items: [{
        iconCls: 'action-edit',
        action: 'edit'
    }, {
        iconCls: 'action-delete',
        action: 'delete'
    }]
} 
```

控制器：

```
init: function() {
    this.control({
        'grid actioncolumn': {
            click: function(a, b, c, d, ev, record) {
                var target = Ext.get(ev.target);
                if (target && target.action) {
                    this[target.action + 'Action'].call(this, record);
                }
            }
        }
    });
} 
```

或者可以以更官方支持的方式完成：

看法：

```
{
    xtype: 'actioncolumn',
    items: [{
        iconCls: 'action-edit',
        handler: function(grid, rowIndex) {
            this.fireEvent('editAction', grid.getStore().getAt(rowIndex));
        }
    }, {
        iconCls: 'action-delete',
        handler: function(grid, rowIndex) {
            this.fireEvent('deleteAction', grid.getStore().getAt(rowIndex));
        }
    }];
} 
```

控制器：

```
init: function() {
    this.control({
        'grid actioncolumn': {
            editAction: this.editAction,
            deleteAction: this.deleteAction
        }
    });
} 
```

显然视图事件处理代码可以进一步抽象，但这里的主要思想是你不应该害怕隐藏控制器不需要知道的视图复杂性。

# html - title="" 未显示在 html 电子邮件中

> ID：15391549
> 
> 赞同：3
> 
> 时间：2013-03-13T16:51:53.117
> 
> 标签：html, email, outlook, html-email

```
<a href="http://link" target="_blank" title="Check out our NEW E-Catalogue" alt="Check out our NEW E-Catalogue" name="Check out our NEW E-Catalogue"><img alt="Check out our NEW E-Catalogue" title="Check out our NEW E-Catalogue" src="http:/image" border="0px"></a> 
```

上面的代码是我在 HTML 电子邮件中使用的，通过电子邮件营销平台发送。

在 Outlook 2010 和其他电子邮件客户端中将鼠标悬停在此图像上时，将显示链接而不是标题文本。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:54:34.787

这是避免隐藏预期链接目标的[典型行为。](http://blog.mailchimp.com/html-email-for-the-visually-impaired/)引用链接的片段：

> **如果您编写的图像还链接到网页，某些电子邮件应用程序（Outlook2000 和 Apple Mail）会同时覆盖 ALT 和 TITLE，并显示链接的 URL。**他们这样做是为了安全，因此您可以在单击之前查看链接将您带到的位置。

FWIW，[作为最终用户] 我宁愿查看链接的去向，而不是作者认为比链接本身更合适的链接。一个例子：

```
<a href="http://facebouk.com/login.php" title="http://facebook.com/login.php">
  Login to facebook
</a> 
```

# javascript - 从ajax调用javascript内部添加到数组 - 未定义

> ID：15391550
> 
> 赞同：1
> 
> 时间：2013-03-13T16:51:58.240
> 
> 标签：javascript, jquery, ajax, arrays

我声明了一个数组，然后进行了一个 ajax 调用，它返回多行值。我正在尝试将这些行的 id 添加到我之前声明的那个数组中，但它一直返回未定义。

```
 var recipeIds = Array();
    $.ajax({
        url: url,
        type: 'POST',
        contentType: "application/json",
        dataType: 'jsonp',
        crossDomain: true,
        jsonp: 'jsoncallback',
        cache:true,
        success: function(data, status){
            $.each(data, function(i,item){
                             recipeIds.push(item.id);
         });
        },
        error: function(){
            console.log("Ajax not working - recipies in cat");
        }
    });
    alert("array0 = " + recipeIds[0]); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:53:02.943

当您发出警报时，ajax 调用尚未返回。它是异步的，这意味着 ajax 调用将在警报*之后发生。*

您必须使用`success`您提供给 ajax 函数的回调内部的结果。

# ajax - DOM 更改后，我的 SVG 没有更改

> ID：15391552
> 
> 赞同：0
> 
> 时间：2013-03-13T16:52:10.267
> 
> 标签：ajax, svg, refresh, stroke

我正在尝试更改 SVGPathElement 的颜色，但它不会刷新。我检查它是否获得了显示警报的新颜色，但我没有看到任何区别。是因为我的 SVG 被 AJAX 检索了吗？

```
var element = document.getElementById(id);
alert(element.getAttribute("stroke"));
element.setAttributeNS(null, "stroke", "#000000"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:06:51.323

您可以尝试使用样式设置笔画：

```
element.style.stroke='#0000'; 
```

# c# - 解决网站创建中的异常细节

> ID：15391553
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:52:11.633
> 
> 标签：c#

我正在创建一个网站，但每当我运行此代码时，都会引发异常：

```
#Exception Details: System.IndexOutOfRangeException: There is no row at position 0. 
```

我该如何解决这个问题？

```
public partial class Employee_frmSearchClaims : System.Web.UI.Page
{
    int empno;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["empno"] != null)
            empno = int.Parse(Session["empno"].ToString());

        if (!IsPostBack)
        {
         DataRow r = AddPoliciesOnEmployees.GetPolicyOnEmployee(empno).Tables[0].Rows[0];
                Label7.Text = r["policyname"].ToString();
                Label8.Text = r["policyid"].ToString();
                Label9.Text = r["policyamount"].ToString();
                Label10.Text = r["TotalAmount"].ToString();
                Label11.Text = r["pstartdate"].ToString();
            }
        }

    protected void btnapplicy_Click(object sender, EventArgs e)
    {
        if (ddlReason.SelectedItem.ToString() != "--Select--")
        {
            if (ddlReason.SelectedItem.Text == "Death")
            {
                Session["Reason"] = ddlReason.SelectedItem.Text;
                Response.Redirect("frmDeathCliam.aspx");
            }
            else if (ddlReason.SelectedItem.Text == "Accident")
            {
                Session["Reason"] = ddlReason.SelectedItem.Text;
                Response.Redirect("frmAccidentClaim.aspx");
            }
            else
            {
                Session["Reason"] = ddlReason.SelectedItem.Text;
                Response.Redirect("frmCompleteClaim.aspx");
            }

        }
      else
            lblmsg.Text = "You have to select the reason";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:03:25.517

您需要确保您的表首先包含行：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["empno"] != null)
        empno = int.Parse(Session["empno"].ToString());

    if (!IsPostBack)
    {
        var ds = AddPoliciesOnEmployees.GetPolicyOnEmployee(empno);
        if (ds.Tables[0].Rows.Count > 0)
        {
            DataRow r = ds.Tables[0].Rows[0];
            Label7.Text = r["policyname"].ToString();
            Label8.Text = r["policyid"].ToString();
            Label9.Text = r["policyamount"].ToString();
            Label10.Text = r["TotalAmount"].ToString();
            Label11.Text = r["pstartdate"].ToString();
        }
    }
} 
```

# database - 如何通过 Hibernate 即时获取更新的对象？

> ID：15391557
> 
> 赞同：0
> 
> 时间：2013-03-13T16:52:26.420
> 
> 标签：database, hibernate, orm, object-relational-model

我没有得到休眠会话检索到的更新对象。例如，如果我通过 Session B 更新一个对象 [该对象已被 Session A 早先获取]，那么我不会立即获得 Session B 所做的更新。

然后我必须使用下面的代码来强制 Hibernate 获取更新的值。

```
session.evict(user); 
```

但这涉及到数据库的往返。我怎样才能避免这种情况？是否有更合适的方式来即时获取更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:24:25.380

通过设计休眠会话（持久性上下文）彼此隔离，并保证可重复读取。

处理问题的更好方法是在会话 A 上调用 session.refresh() 如果您怀疑您的对象已过时，而不是调用 evict() 和 get()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T11:59:42.877

尝试使用刷新对象，

```
session.refresh(object, LockOptions.NONE) 
```

它将从 DB 获取最新信息。

# less - 我可以在 LESS 中输出原始字符串吗？

> ID：15391559
> 
> 赞同：1
> 
> 时间：2013-03-13T16:52:34.920
> 
> 标签：less

我有兴趣让我的 LESS 文件的一小部分出现在我处理过的 CSS 文件中，而不必被识别为有效的 LESS。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:58:40.087

LESS 有一个[转义语法](http://lesscss.org/#-escaping)，它使用带有前缀的双引号字符串`~`，这行得通吗？

在文档示例中：

```
.class {
  filter: ~"ms:alwaysHasItsOwnSyntax.For.Stuff()";
} 
```

输出为

```
.class {
  filter: ms:alwaysHasItsOwnSyntax.For.Stuff();
} 
```

# java - WebSphere + RAD + Taglib

> ID：15391560
> 
> 赞同：4
> 
> 时间：2013-03-13T16:52:44.797
> 
> 标签：java, jakarta-ee, websphere, ibm-rad, ibm-rad-7.5

我在为 WebSphere 7 开发应用程序时遇到问题。设置如下。我有一个基于 maven 的项目，由 RAD 7.5.5.2 中开发的多个模块组成

其中一个模块是使用 JSP 并依赖于 taglib 的普通 Web 应用程序（war）。

Taglib 本身是另一个模块 - 纯 java 项目，只有两个文件，taglib 描述符和 META-INF/tags 下的标记文件。

当我构建 taglib jar 并手动将其复制到 Web 应用程序的 WEB-INF/lib 时，标签被正确挑选并呈现在页面上。

当我通过 RAD 部署项目时 - 没有拾取 taglib。错误说：

```
```
com.ibm.ws.jsp.JspCoreException: JSPG0047E: Unable to locate tag library for uri http://juriy.com/myproject/jsp/my-taglib 
``` 
```

打包为 JAR 并添加到 WEB-INF/lib 的相同标签库可以完美运行。

当我打开 WebSphere 管理控制台时，我看到 taglib 项目已被 WebSphere 识别。但是它没有打包为 JAR，而是将项目的路径添加到 webapp 类路径中。在

```
```
Troublehooting -> Class Loader Viewer -> Module - com.ibm.ws.classloader.CompoundClassLoader
``` 
```

我看到我的 taglib 的条目：

```
```
file:/D:/Data/MyProject/UIComponents/target/classes
``` 
```

换句话说，看起来 WS 并不关心在开发周期中将项目打包为 JAR，然后它就不会作为 taglib 被拾取。

有没有办法告诉 RAD（或 WebSphere）“请先将此项目打包为 JAR，然后再将其添加到类路径中”？任何使此设置工作的替代方法也值得赞赏。我不能在开发过程中一直手动复制 jar - 我们都希望事情能够自动运行。

免责声明：我不是 WebSphere 专家（仅与这个野兽打交道一周），我可能错过了一些明显的设置。请提出任何可能解决此问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:52:55.947

据我所知，RAD 是在 Eclipse 平台上制作的。我知道使用 maven，您可以创建构建 jar 文件并放入本地存储库的工件。`M2_REPO`其他模块可以通过变量引用该 jar 。然后你坚持使用 maven 并且必须使用 maven 插件来帮助将 maven 集成到 eclipse 中。但请考虑使用[project builder 和 ant](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)配置项目的选项。然后，您可以在构建时轻松运行 ant 目标，以便在部署之前制作您的 jar。这种技术不仅用于 Eclipse IDE，还用于其他 IDE。在项目构建之前或之后运行 ant 目标是非常宝贵的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:39:54.823

您是否尝试将[清单](http://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html)添加到您的 WAR？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:59:04.920

将您的 taglib 打包为 maven jar 并将其安装到本地 .m2 存储库。然后为您的主项目引用 pom 中的依赖项。它将被拉入包装。如果它正在为本地开发解决问题，则可能是因为打开了工作区解析。

此外，在基于 Maven 的项目中将 jars 添加到 WEB-INF/lib 并不是最佳实践，因为您绕过了 maven 的主要目的，即控制构建项目所需的依赖项。

# ios - 崩溃：*** -[__NSArrayM objectAtIndex:]：索引 4294967295 超出范围 [0 .. 9]

> ID：15391561
> 
> 赞同：2
> 
> 时间：2013-03-13T16:52:45.373
> 
> 标签：ios, xcode, exception

我在这个荒谬的索引处遇到了一个数组越界错误，根据我的研究表明，可能有一些代码调用了一些负面的东西，例如`[array objectAtIndex: -1]` 问题是这不是我的代码，我在任何地方都找不到它。我到处都设置了断点无济于事。我认为它可能在 UITableView Delegate 方法中，但不能确定。无论如何可以访问日志中所有我的 int 变量的值。我不能 NSLog 他们，因为我不知道崩溃发生在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T16:58:00.680

尝试添加异常断点以查看是否捕获它：

1) 单击断点选项卡

2）单击所述选项卡屏幕左下方的“+”按钮

3）选择“添加异常断点”

4）（可选）将 Exception:All 更改为 Exception:Objective-C

5）点击完成

这通常会在导致崩溃的行上/之前中断。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:09:12.487

1.  添加异常断点
2.  检查堆栈跟踪 ![在此处输入图像描述](../Images/26ddf741bcaea50fffbf6f3d7c935652.png)
3.  找到最后执行的方法
4.  记录用于获取数组值的值

# jquery - 为什么在使用 jqmData 添加属性时无法触发 jquery 移动小部件的增强功能？

> ID：15391562
> 
> 赞同：0
> 
> 时间：2013-03-13T16:52:45.737
> 
> 标签：jquery, events, jquery-mobile, dynamic, delegates

我正在尝试创建一个完全动态的“jquery mobile”“表格小部件”。

问题是，JQM 正在使用它来创建不同的“表格模式”：

```
$.mobile.document.delegate( ":jqmData(role='table')", "tablecreate", function(e) {
    // some magic happens here
}); 
```

为了防止表的自动增强，我排除了触发属性`":jqmData(role='table')"`，直到我的源代码准备好。然后我添加属性并调用它：

```
// tbody
target                   
    .empty()
    .append(allRows)
    // this enhances elements inside table rows
    .trigger("create")   
    .closest('table')
    // add triggering attribute
    .jqmData('role', 'table')
    // enhance the table (step 1 of 2)
    .table({
       create: function( event, ui ) {}
    }) 
```

这只是让我半途而废，因为现在我的表具有必要的属性`":jqmData(role='table')"`，但我似乎无法触发`tablecreate`它。

我试过了

```
 .trigger('tablecreate')
    .table({
       tablecreate: function( event, ui ) {}
    }) 
```

但他们什么都不做，所以我假设我的元素没有被委托事件绑定捕获（也可能是错误的）。

**问题**：
在纯 jquery 中，当我在时间 X 动态添加触发属性时，是否可以在委托处理程序中包含一个元素？

感谢您的投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:00:50.727

好的。自己找到的：

问题是：

```
 .jqmData('role', 'table') 
```

似乎并不总是有效，因为`data-role="table"`调用它时不会设置。

我尝试了以下方法：

```
 .attr('data-role', 'table') 
```

并且设置了属性并且表格增强正常工作。

也许也能帮助别人！

# database - Oracle：我应该使用复制吗？

> ID：15391571
> 
> 赞同：0
> 
> 时间：2013-03-13T16:53:18.607
> 
> 标签：database, oracle, oracle10g, oracle11g, database-replication

我正在开发一个部署为两个独立站点的 ASP.NET Web 应用程序。每个站点都由它自己的相同（相同模式）ORACLE 数据库 (10g) 的实例支持，但每个数据库都包含“单独的”数据。一个站点仅包含“安全数据”，而另一个站点仅包含“开放数据”。只有少数用户可以看到安全站点和安全数据，而大多数公司都可以使用开放站点。

安全站点用户现在希望能够查看来自安全站点的安全数据和开放数据。此外，他们希望能够修改开放数据，并且从安全站点对开放数据的更改需要传播到开放站点，并且需要相应地处理冲突。

我希望有一个仅数据库的解决方案，因为我们有与存储过程相关的报告，现在需要为安全用户显示安全和开放的数据。

我们可以假设数据被相应地标记为安全 (Y/N)。

我们目前的道路似乎不太理想。它涉及修改安全数据库以包含指向开放数据库的数据库链接。我们还向安全数据库添加了额外的视图，以通过数据库链接“联合”安全和开放数据。同时，我们正在对安全站点上的原始存储过程进行大修以处理 CRUD 操作，例如

```
if (someRecord.IsSecure = 'Y')
update secure data;
else
update open data; 
```

在我们继续进行之前，我想联系一下，看看是否有更好的方法来解决这个问题，比如通过复制。

我一直在研究[多主复制](http://www.stanford.edu/dept/itss/docs/oracle/10g/server.101/b10732/repoverv.htm)。这似乎是正确的道路吗？有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:22:17.607

在我正在进行的项目中，我们使用`Oracle Streams`支持多主复制（我们在全球纽约、伦敦和新加坡运营 3 个站点，都需要能够读取和更新相同的数据）。

Streams 支持我们根据监管要求使用的条件复制（例如，在新加坡，私人银行客户数据不能离开该国）。

例如，使用 Streams，您可以复制整个架构（DML 和/或 DDL）或仅复制表列表。在事务中，您可以控制流，以便复制对象上的各个行操作不会复制..例如：

```
if (is_secure)
then
  dbms_streams.set_tag('01'); -- set a non null tag to prevent replication.
end if;

insert into your_table ()..values ();

if (is_secure)
then
  dbms_streams.set_tag(''); -- set a the null tag back 
end if;

insert into your_table ()..values (); 
```

对于`is_secure`为真的场景，只有第二条规则会复制（如果存在非空流标签，您可以将复制规则设置为不复制）。因此，如果数据安全，您只需在您的代码中设置此标签。这样流就不会将此事务应用于远程站点。

对于多主复制，您应该预先考虑“冲突”的可能性，即两个以上站点并行修改相同数据的情况。您应该处理此问题（您可以为复杂场景设置应用处理程序）以解决冲突而不会导致应用错误。例如，对于复制对象，这将是一个糟糕的设计：

```
create table foo
(
  id number primary key,
  data
);
create sequence foo_seq start with 1 increment by 1; 
```

如果这是在两个站点上创建的，并且有人在站点 1 上并行发布：

```
insert into foo (id, data) values (foo_seq.nextval, 'a'); 
```

和站点 2：

```
insert into foo (id, data) values (foo_seq.nextval, 'b'); 
```

两个站点都尝试将“1”插入主键。这将在复制时失败，您最终会遇到应用错误来解决。

您可以在每个 env 上设置不同的序列，例如`start with 100 increment by 100`在一个 env 和`start with 101 increment by 100`另一个 ext 上，这将消除此问题，或/并为每个站点添加一个`location_id`设置为`1`or等​​的列。`2`

此外，通过更新，您需要处理两个以上站点同时更新同一行（因为站点之间总是存在一些延迟......延迟越多，进入需要冲突处理的场景的变化就越多）。

Streams 的设置和理解有点复杂，因此您需要仔细阅读该主题。它非常成熟并且仍然受支持，但在增强方面，从现在开始它不会得到太多，因为 Oracle 专注于 Goldengate（GG 是许可产品，因此会产生额外成本，而 Streams 是企业许可的一部分）。

# javascript - 在 Javascript 中格式化 Razor ViewData

> ID：15391575
> 
> 赞同：1
> 
> 时间：2013-03-13T16:53:22.907
> 
> 标签：javascript, razor, viewdata

因此，我一直在查看相关问题，但无法弄清楚我的脚本标签格式错误的确切原因。

```
<script language="javascript" type="text/javascript">
    var showME = false;
    var showSuffix = "";

    @if (ViewData["showME"] != null && ViewData["showSuffix"] != null)
    {
        <text>
        showME = @(Convert.ToBoolean(ViewData["showME"]) ? "true" : "false");
        showSuffix = '@Html.Raw(Json.Encode(ViewData["showSuffix "]))';
        </text>
    }
</script> 
```

编辑！下面的答案是正确的，但我将格式错误的部分追踪到了这一行。

```
var videoHelpUrl = @(Url.Action("Index", "Help", new { Id = 46 })); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:00:58.693

如果您尝试使用 double {{ }} ；

```
@{

    if (ViewData["showME"] != null && ViewData["showSuffix"] != null)
    {
        <text>
        showME = @(Convert.ToBoolean(ViewData["showME"]) ? "true" : "false");
        showSuffix = '@Html.Raw(Json.Encode(ViewData["showSuffix "]))';        
        </text>
    }

} 
```

看看这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:07:21.807

试试这个：

```
<script language="javascript" type="text/javascript">
    var videoHelpUrl = '@Url.Action("Index", "Help", new { Id = 46 })';
    console.log(videoHelpUrl);
</script> 
```

console.log 将输出 URL。

注意：请始终记住，Razor 视图中 @ 后面的所有内容都将由 Razor 引擎处理。这就是为什么您可以用引号将 @Url.Action(...) 括起来。它将首先由 Razor 引擎处理，然后在执行时由 Javascript 处理。

# c++ - 将对象通过服务器传递给客户端

> ID：15391582
> 
> 赞同：0
> 
> 时间：2013-03-13T16:53:34.150
> 
> 标签：c++, linux, segmentation-fault, client-server, coredump

我正在尝试在 linux 中创建客户端服务器应用程序。服务器应该向所有连接的客户端发送一个对象。这是它的代码。在此当服务器发送对象时，服务器端一切正常，但客户端服务器立即收到分段错误。

服务器：

```
#include "Question.h"
#include <iostream>
#include <string.h>
using namespace std;

#include<sys/socket.h>
#include<sys/types.h>
#include<stdio.h>
#include<arpa/inet.h>
#include<time.h>

#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <netinet/in.h>

int main() {
    Question q1("Capital Of Pakistan?", "Lahore", "Karachi", "Quetaa", "Islamabad");

    int socketID = 0, clientID[10] = {0}, totalClients = 3;
    char sendBuffer[1024];
    memset(sendBuffer, '0', sizeof(sendBuffer));

    time_t time;
    struct sockaddr_in servAddr;

    cout << "Question is: \n" << q1.getQuestion()<<endl;
    cout << q1.getOpt1() << endl << q1.getOpt2() << endl << q1.getOpt3() << endl << q1.getCorrect()<<endl;

    cout << "\n\n --- Server starting up --- \n\n";

    /*
     * Creating Socket
     */
    socketID = socket(AF_INET, SOCK_STREAM, 0);
    if (socketID == -1) {
        cerr << " Can't create Socket";
    }

    servAddr.sin_family = AF_INET;
    servAddr.sin_port = htons(5000);
    servAddr.sin_addr.s_addr = htonl(INADDR_ANY);

    /*
     * Binding IP
     */
    int bindID;
    bindID = bind(socketID, (struct sockaddr *) &servAddr, sizeof(servAddr)); // Casting sockaddr_in on sockaddr and binding it with socket id
    if (bindID != -1) {
        cout << " Bind SucessFull";

        listen(socketID, 5);
        cout << " Server Waiting for connections" << endl;
        int i = 0;
        while (1) {
            clientID[i] = accept(socketID, (struct sockaddr *) NULL, NULL);
            cout << "Got Client: " << i+1 << ","<<totalClients-(i+1)<<" to go" << endl;
            cout << "ID: " << clientID[i]<<endl;
            cout.flush();
            snprintf(sendBuffer, sizeof(sendBuffer), "%.24s\n", ctime(&time));
            write(clientID[i], sendBuffer, strlen(sendBuffer));

            i++;
            if (i >= totalClients)
                break;
            sleep(1);
        }
        cout << "Sending Question to All Clients...." << endl;
        for(int j=0; j<totalClients; j++) {
            cout << "Sending to ID " << clientID[j]<<endl;
            write(clientID[j], &q1 , sizeof(q1));
            cout << "Sent " << j << "...." << endl;
        }
        /*
         * Closing all clients
         */
        for (int k = 0; k < totalClients; k++) {
            close(clientID[k]);
        }
    } else {
        cerr << " Unable to Bind";
    }
    return 0;
} 
```

客户：

```
#include "Question.h"
#include <iostream>
#include <string.h>
using namespace std;

#include<sys/socket.h>
#include<sys/types.h>
#include<stdio.h>
#include<arpa/inet.h>
#include<time.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

int main(int argc, char *argv[])
{
    int socketID = 0 /*Socket Descriptor*/, n = 0;
    char recvBuffer[1024];

    memset(recvBuffer, '0',sizeof(recvBuffer));

    struct sockaddr_in servAddr;

    if(argc!=2){
        cout << "\n Usage: %s <ip of server> \n",argv[0];
        return 1;
    }

    socketID = socket(AF_INET, SOCK_STREAM, 0);
    if(socketID == -1){
        cerr << "\n Can't create socket \n";
        return 1;
    }

    servAddr.sin_family = AF_INET;
    servAddr.sin_port = htons(5000);

    if(inet_pton(AF_INET, argv[1], &servAddr.sin_addr)==-1){
        cerr << "\n Unable to convert given IP to Network Form \n inet_pton Error";
        return 1;
    }

    int connectFlag;
    connectFlag = connect(socketID, (struct sockaddr *)&servAddr, sizeof(servAddr));
    if(connectFlag == -1){
       cout << " Connection Failed" << endl;
       return 1;
    }
    n = read(socketID, recvBuffer, sizeof(recvBuffer)-1);
    recvBuffer[n] = 0;
    cout << recvBuffer << endl;

    if(n < 0){
       cerr << "Buffer Read error\n";
    }
    Question q1;
    cout << "Gonna Receive Connections"<<endl;
    q1.setAll("0","0","0","0","0");
    cout.flush();
    n = read(socketID, &q1, sizeof(q1));
    cout << n << endl;
    cout << "Received Question " << endl;
    cout << "Question is: \n" << q1.getQuestion()<<endl;
    cout << q1.getOpt1() << endl << q1.getOpt2() << endl << q1.getOpt3() << endl << q1.getCorrect()<<endl;
    cout.flush();

    return 0;
} 
```

问题.h

```
#ifndef QUESTION_H_
#define QUESTION_H_

#include <iostream>
using namespace std;

class Question {
private:
    string question;
    string opt1;
    string opt2;
    string opt3;
    string correct;
public:
    /*
     * Constructors
     */
    Question();
    Question(string, string, string, string, string);

    void setAll(string, string, string, string, string);
    string getCorrect() const;
    void setCorrect(string correct);
    string getOpt1() const;
    void setOpt1(string opt1);
    string getOpt2() const;
    void setOpt2(string opt2);
    string getOpt3() const;
    void setOpt3(string opt3);
    void setQuestion(string question);
    string getQuestion() const;

};

#endif /* QUESTION_H_ */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:57:24.307

您将需要“序列化”您的对象。这通常涉及将其制成一个字符串，该字符串可以在您发送对象的任何东西的另一“侧”读取。

这与将数据写入文件是完全相同的问题，您不想存储 OBJECT，而是想将其“有效负载”或“内容”存储在类中。

您可以使用`stringstream`形成一长串数据，并传递由此形成的字符串。

就像是：

```
class A 
{
   int x;
   string s;
};

...
class A a;

stringstream ss;

ss << a.x << ", " << a.s << endl;

.... 
write(clientID[j], ss.str.c_str(), ss.str.length()); 
```

您显然需要在另一端解析生成的字符串 - 并且`,`可能不是理想的分隔符。随意使用其他东西...

# azure - 从 azure 云服务（web-role）访问 VM 或本地计算机中存在的共享文件夹

> ID：15391583
> 
> 赞同：1
> 
> 时间：2013-03-13T16:53:34.913
> 
> 标签：azure, cloud, azure-virtual-machine, webrole

我有一个在 Azure 云服务中运行的 Asp.Net Web 角色。现在我已经在 Azure 数据中心创建了一个虚拟机。而且我还创建了一个共享文件夹来存储我的文件（.xls、.csv .. 文件）。如何从我的网络角色访问 VM 中存在的共享文件夹文件？

谢谢

阿伦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:46:13.567

Shared folders are mainly for on-premise environment and in cloud you would have to think quite different. In cloud environment, a machine is placed behind a very tightly closed network system and any port you will open in your VM will be configured for external user through firewall. Accessing a shared folder would require you to enable file sharing in your machine first and the configuring proper ports. Similar configuration is needed on other Cloud Service VM as well which is more complex. **The fact is when you are in cloud you should think beyond shared folder approach.**

What you really need is to use cloud storage i.e. Windows Azure Blob Storage to share content between multiple machines. Price wise it is about ~10 cents/GB/Month and if you keep your VM and Azure Storage in same datacenter there is no bandwidth cost. Once configured your Azure VM and Azure Cloud service can access the Azure Blob storage very easily over HTTP/HTTPS. Learn more about Azure Storage [here](http://www.windowsazure.com/en-us/manage/services/storage/).

# ruby-on-rails - Phusion Passenger 单机错误 pid 锁

> ID：15391584
> 
> 赞同：1
> 
> 时间：2013-03-13T16:53:36.357
> 
> 标签：ruby-on-rails, passenger

我正在尝试调试 Bitnami Rails 堆栈。我想如果我单独运行Passenger，我可以判断这是否是Apache问题。

我运行了这个 SSH 命令：

```
$ passenger start 
```

这是控制台的一部分：

```
Installing Phusion Passenger Standalone...
[*********************************************] Copying files...
All done!

Stopping web server.../opt/bitnami/ruby/lib/ruby/gems/1.9.1/gems/daemon_controller-1.0.0/lib/daemon_controller/lock_file.rb:63:in `initialize': Permission denied - /opt/bitnami/passenger.3000.pid.lock (Errno::EACCES) 
```

我该如何解决？

谢谢！

# java - 使用客户端/服务器的聊天程序

> ID：15391586
> 
> 赞同：0
> 
> 时间：2013-03-13T16:53:47.270
> 
> 标签：java, client-server

我想在 java 上创建一个客户端/服务器应用程序，服务器的 IP 地址为 192.168.1.100，等待端口 4500 上的客户端请求。

客户端从键盘读取字符串，向服务器发送连接请求。建立连接后，它将字符串发送到服务器。

这是我尝试过的代码：

对于服务器：

```
import java.net.*;
import java.io.*;

public class Serveur {

    public Serveur() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        try
        {
            ServerSocket ecoute;
            ecoute = new ServerSocket(1111);
            Socket service = null;
            System.out.println("Serveur en attente d'un client !");
            while(true)
            {

                service = ecoute.accept();
                System.out.println("Client connécté !");
                DataInputStream is = new DataInputStream(service.getInputStream());
                System.out.println("Client dit : " + is.readUTF().toUpperCase());
                service.close();
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();

        }
    }

} 
```

对于客户：

```
import java.net.*;
import java.io.*;
import java.util.Scanner;

public class Client {

    public Client() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println("Connexion en cours ...");
        try {
            Socket s = new Socket("localhost", 1111);
            DataOutputStream os = new DataOutputStream(s.getOutputStream());
            Scanner sn = new Scanner(System.in);
            os.writeUTF(sn.nextLine());
        } catch ( IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("Connécté au serveur !");

    }

} 
```

但我对这段代码有疑问：

> java.net.ConnectException：连接超时：在 java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source) 在 java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) 在 java.net.DualStackPlainSocketImpl.connect0(Native Method) 处连接。 net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) at java.net.AbstractPlainSocketImpl.connect(Unknown Source) at java.net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl.connect(Unknown Source) at java.net。 Socket.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net.Socket.(Unknown Source) at java.net.Socket.(Unknown Source) at Client.main(Client.java: 18)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:02:35.827

您的代码在我的机器上正确运行。

看来这里的问题不在于您的代码，而在于您的网络设置。

你应该：

1.  确保您的 IP 地址和端口设置正确
2.  检查两台计算机上的防火墙设置，确保它们没有阻止流量
3.  确保您的主机文件正确（Windows 上为 C:\Windows\system32\drivers\etc\hosts） localhost 条目可能设置不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:04:15.427

如果没有有关您的环境的更多信息，将很难给您一个明确的答案。

但是，最常见的原因是您没有正确转发路由器上的端口。这样做会因路由器的制造商而异，但一般来说，您需要将端口转发`1111`到本地 IP 地址`192.168.1.100`（或您正在运行的机器的本地 IP `Serveur`）。

（*旁注：当您的代码说一切都设置为 1111 时，我不确定您为什么说您的服务器正在侦听端口 4500 上的请求。*）

# recursion - Prolog 和谓词，什么时候实例化临时变量？

> ID：15391598
> 
> 赞同：1
> 
> 时间：2013-03-13T16:54:35.193
> 
> 标签：recursion, prolog, sum

我试图理解这个总和谓词

```
 sum([], 0).
 sum([H|T], Sum) :-
    sum(T, Temp), 
    Sum is Temp + H. 
```

它有效，但我不明白为什么。根据我对 sum([1,2,3], Sum) 之类的查询的理解，它将匹配第二个子句，将 H 实例化为 1，将 T 实例化为 [2,3]，并且 Sum 仍然是 Sum。然后它将尝试再次满足第一个调用 sum 的子目标，但在第二个目标中 Sum 为 Temp + H 时，何时给定 Temp 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:56:56.530

`Temp`在基本情况下首先给定一个值，`sum([],0)`. 这导致`Temp=0`上面的递归调用。上面添加`H`到 give`0+H`等的调用。

要说服自己相信这一点，请跟踪查询的执行：

```
?- trace.
true.

[trace]  ?- sum([1,2,3], Sum).
   Call: (6) sum([1, 2, 3], _G376) ? creep
   Call: (7) sum([2, 3], _G455) ? creep
   Call: (8) sum([3], _G455) ? creep
   Call: (9) sum([], _G455) ? creep
   Exit: (9) sum([], 0) ? creep
^  Call: (9) _G460 is 0+3 ? creep
^  Exit: (9) 3 is 0+3 ? creep
   Exit: (8) sum([3], 3) ? creep
^  Call: (8) _G463 is 3+2 ? creep
^  Exit: (8) 5 is 3+2 ? creep
   Exit: (7) sum([2, 3], 5) ? creep
^  Call: (7) _G376 is 5+1 ? creep
^  Exit: (7) 6 is 5+1 ? creep
   Exit: (6) sum([1, 2, 3], 6) ? creep
Sum = 6. 
```

（这`creep`是我打的`Enter`；这是 SWI-Prolog。）

# mysql - mysql concat并插入不起作用

> ID：15391600
> 
> 赞同：0
> 
> 时间：2013-03-13T16:54:37.963
> 
> 标签：mysql, sql, stored-procedures

我在存储过程中有一个代码，它将“PID-”添加到 id 号，所以如果 id 号是 1，结果应该是 PID-1。但它不起作用。

这是代码：

```
DROP PROCEDURE `inserproducts`//
CREATE DEFINER=`root`@`localhost` PROCEDURE `inserproducts`(pid int,pname varchar(50),pdesc varchar(50),psupp varchar(50),pdate date,pquant int)
begin
insert into products(productid,productname,proddescription,supplier,lastpurchasedate,quantityleft)
        values(select concat('PID',pid,pname),pdesc,psupp,pdate,pquant));

select pid=last_insert_id();
end 
```

我怎样才能加入插入和连接在一起？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:56:22.693

采用`INSERT INTO...SELECT`

```
insert into products(productname,proddescription,supplier,lastpurchasedate,quantityleft)
select concat('PID',pid,pname),pdesc,psupp,pdate,pquant 
```

`productid`如果它是一列，则可以省略该`AUTO_INCREMENT`列。

*我想知道为什么你需要执行`select pid=last_insert_id();`when `pid`is a `IN`parameter*。

**更新 1**

```
DROP PROCEDURE `inserproducts`;
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `inserproducts`
(
   pid int,
   pname varchar(50),
   pdesc varchar(50),
   psupp varchar(50),
   pdate date,
   pquant int
)
begin

    insert into products
          (productname,
           proddescription,
           supplier,
           lastpurchasedate,
           quantityleft)
    select concat('PID',pid,pname), pdesc, psupp, pdate, pquant;

    select last_insert_id();
end$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T02:55:38.770

只是跟进......如果您指定不需要选择的值 - 仅使用值可能会略微提高性能：

```
DROP PROCEDURE `inserproducts`;
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `inserproducts`
(
    in pid int,
    in pname varchar(50),
    in pdesc varchar(50),
    in psupp varchar(50),
    in pdate date,
    in pquant int
)
begin
    insert into products
        (productname, proddescription, supplier, lastpurchasedate, quantityleft)
    values
        (concat('PID',pid,pname), pdesc, psupp, pdate, pquant );

    select last_insert_id();
end$$
DELIMITER ; 
```

除非您确实需要另一个表中的数据，否则我将不理会 select ...

# php - php、mysql、javascript 下拉列表

> ID：15391603
> 
> 赞同：0
> 
> 时间：2013-03-13T16:54:41.713
> 
> 标签：php, javascript, jquery, mysql, ajax

我是编码新手，不知道。我设法从这个网站[http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/ 获取了这个脚本](http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/)

我修改了标题和字段输入以匹配我的项目要求，而不是演示中使用的那些。参考下拉列表，我设法让这个在我的项目上工作。

我现在遇到的问题是，在客户选择下拉列表并单击提交按钮后，如何使脚本接受值并将其输入数据库。

如果有更好的方法来重写这些代码？请我需要帮助。谢谢！

这是我在“get_child_categories.php”文件中得到的代码：

```
<?php

include('cn.php');

if($_REQUEST)
{
$id = $_REQUEST['parent_id'];

$query = "select * from tour where pid = ".$id;
$results = @mysql_query( $query);
$num_rows = @mysql_num_rows($results);
if($num_rows > 0)
{?>
    <select name="sub_category" class="parent">
    <option value="" selected="selected">-- Sub Category --</option>
    <?php
    while ($rows = mysql_fetch_assoc(@$results))
    {?>
        <option value="<?php echo $rows['tour_id'];?>"><?php echo $rows    
      ['category'];?></option>
    <?php
    }?>
    </select>   
<?php   
}
else{echo '<label style="padding:7px;float:left; font-size:12px;">No Record Found 
!</label>';}
}
?> 
```

另请注意，在最后选择所有下拉列表后，始终显示“未找到记录”。我如何解决这个问题以显示在提交之前满足每个标准？

这是“booking.php”表格：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<link href="style.css" rel="stylesheet" />

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Jurassic Tours/booking form</title>

<script type="text/javascript" src="jquery-1.3.2.js"></script>
<script type="text/javascript" src="jquery.livequery.js"></script>
<script type="text/javascript">

$(document).ready(function() {

//$('#loader').hide();

$('.parent').livequery('change', function() {

    $(this).nextAll('.parent').remove();
    $(this).nextAll('label').remove();

    $('#show_sub_categories').append('<img src="loader.gif" style="float:left;  
    margin-top:7px;" id="loader" alt="" />');

    $.post("get_chid_categories.php", {
        parent_id: $(this).val(),
    }, function(response){

    setTimeout("finishAjax('show_sub_categories', '"+escape(response
                 )+"')", 400);

           });

    return false;
});
 });

 function finishAjax(id, response){
 $('#loader').remove();

 $('#'+id).append(unescape(response));
 } 

</script>
<style>
.both h4{ font-family:Arial, Helvetica, sans-serif; margin:0px; font-size:14px;}
#search_category_id{ padding:3px; width:200px;}

.parent{ padding:3px; width:150px; float:left; margin-right:12px;}
.both{ float:left; margin:0 0px 0 0; padding:0px;}
</style>
</head>
<?php
include('cn.php');?>
<body>

<div id="main">

     <div id="header">
        <img src="images/banner.jpg" alt="Banner" style="padding:10px"/>
     </div>

     <div id="mylinks">
        <div id="navcontainer">
           <ul>
           <li><a href="index.html">Home</a></li>
     <li><a href="login.php">Login</a></li>
           <li><a href="register.php">Register</a></li>
           <li><a href="confirmation.php">Booking</a></li>
           <li><a href="aboutus.php">About Us</a></li>
           <li><a href="services.php">Services</a></li>
           <li><a href="feedback.php">Feedback</a></li>
           <li><a href="agency_login.php">Agency Login</a></li>
     <li><a href="logout.php">Logout</a></li>
        </div> 
     </div>

     <div id="content">

        <h2><center>PLEASE PLACE YOUR BOOKING</center></h2>

     <div style="padding-left:30px; height:710px;">

<br clear="all" /><br clear="all" />

<form action="booking.php" method="post">
<div id="show_sub_categories">
    <select name="search_category" class="parent">
    <option value="" selected="selected">-- Categories --</option>
    <?php
    $query = "select * from tour where pid = 0";
    $results = mysql_query($query);

    while ($rows = mysql_fetch_assoc(@$results))
    {?>
    <option value="<?php echo $rows['tour_id'];?>"><?php echo $rows
                ['category'];?></option>
    <?php
    }?>
    </select>       

</div>

<br clear="all" /><br clear="all" />
<input type="submit" name="submit" value="submit">
</form>
<br clear="all" /><br clear="all" />

</div>

</body>
</html> 
```

预订表格从数据库中的旅游表中获取数据，其中旅游、目的地和持续时间都取决于所选的下拉列表。这是处理部分，按下提交按钮后我不知道该怎么做，所以我将其留空！我可以恢复的唯一数据是客户表中的主键，如下所示。

```
 <?php
//When submit button is pressed.
if (isset($_POST['submit'])) {

//Include the server and database connection. 
include('cn.php');

session_start();

$userUsername = $_SESSION['loggedInUser'];

// Build the SQL query to retreive the variables ($) and input the data into the database.
$sql = "INSERT INTO booking   
      (user_id) 
    VALUES ((SELECT user_id FROM user WHERE user_username =  
                         '" . $userUsername . "'))";

// test the sql statement.
if(!mysql_query($sql,$cn)) {
die(mysql_error($cn));

}
// direct to this page when booking is successful.
header('Location: booking_success.php');
}

?> 
```

我忘了包含 update.php 文件

```
<?php
if (!empty($_GET['tour_id']) && !empty($_GET['value'])) {

$id = $_GET['tour_id'];
$value = $_GET['value'];

try {

$objDb = new PDO('mysql:host=localhost;dbname=jurassicbase', 'root', '');
$objDb->exec('SET CHARACTER SET utf8');

$sql = "SELECT * 
FROM `categories`
WHERE `master` = ?";

$statement = $objDb->prepare($sql);
$statement->execute(array($value));
$list = $statement->fetchAll(PDO::FETCH_ASSOC);

if (!empty($list)) {

$out = array('<option value="">Select one</option>');

foreach($list as $row) {
$out[] = '<option value="'.$row['tour_id'].'">'.$row    
['name'].'</option>';
}

echo json_encode(array('error' => false, 'list' => implode('', $out)));

} else {
echo json_encode(array('error' => true));
}

} catch(PDOException $e) {
echo json_encode(array('error' => true));
}

} else {
echo json_encode(array('error' => true));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:05:09.717

我猜您永远不会到达表单处理器，因为您的表单页面中没有任何`<form>`标签。

你需要：

```
<form action="your_form_processor.php" method="post">
  // your form fields
</form> 
```

让它发挥作用。

除此之外，您需要切换到 PDO（或 mysqli）和准备好的语句，因为您的代码容易受到 sql 注入的影响。

在开发代码时，您还应该删除所有`@`错误抑制运算符。

# html - 查看源代码和调试器之间的代码差异

> ID：15391604
> 
> 赞同：1
> 
> 时间：2013-03-13T16:54:42.363
> 
> 标签：html, debugging

我的网站上有一个错误，只有在我的 404 页面上，我的页脚中的第一个标题才会在不应该呈现为链接时呈现。进一步调查，我注意到当我通过“查看源代码”和浏览器“调试器”查看代码时存在细微的代码差异（Chrome 和 Firefox 都产生了相同的代码结果）。我想知道是什么导致这些代码差异。“查看源代码”和“调试器”不应该输出相同的代码吗？

请注意，调试器会`a`在`li.header`.

查看源代码的输出：

```
<div class="footer">
  <ul>
    <li class="header">Header Title</li>
    <li>Value01</li>
    <li>Value02</li>
  </ul>
</div> 
```

调试器的输出：

```
<div class="footer">
  <ul>
    <li class="header"><a href="#">Header Title</a></li>
    <li>Value01</li>
    <li>Value02</li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:02:25.003

如果链接不在源中，则意味着它们必须在页面加载期间或之后被其他东西添加。这很可能通过 JavaScript 完成（这可能是页面中包含的脚本*或*浏览器插件和扩展使用的脚本），因此如果您禁用 JavaScript，这个*问题*很可能不会重演。

View Source 的输出将是页面的默认内容 - 没有任何后期修改。

调试器的输出将是页面的当前内容 - 带有任何后期修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:29:14.103

原来问题出在我的 CMS 中，因为我没有正确关闭 CMS`a`中的一个文本字段中的标签，这导致了这个问题。做进一步的研究，似乎 View Source 应该显示页面上代码的当前状态。然而，浏览器调试器将尝试填充缺失的标签以使其更美观（即 - 在我的情况下添加额外的`a`标签）。

# ember.js - propertyBinding 控制器 - 查看

> ID：15391610
> 
> 赞同：0
> 
> 时间：2013-03-13T16:55:00.507
> 
> 标签：ember.js

所以，我试图让一个简单的 propertyBinding 与 emberjs 一起工作。具体来说，我有一个带有内容属性的控制器，它在某些情况下会更新，还有一个视图，它需要该内容数组来绘制一些图表。

我做了最基本的例子，它似乎不起作用。我的简单示例如下：

```
Appname.IndexController = Ember.Controller.extend({
    value: 'bla'
});

Appname.IndexView = Ember.View.extend({
    templateName: 'Index',
    propertyBinding: 'Appname.IndexController.value',
    didInsertElement: function() {
        console.log('Indexview');
        console.log(this.get('property'));
    }
 }); 
```

就这么简单，它就是行不通。真正奇怪的是，如果我创建另一个测试控制器（而不是扩展它），例如

```
Appname.TestController = Ember.Controller.create({
    value: 'jpopo'
}); 
```

属性绑定突然起作用了。但我就是无法让它与 IndexController 一起工作（如果需要信息，在 Applicaton.hbs 我有一个出口）感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:06:34.327

绑定适用于实例化的对象，而不适用于对象定义。

`Appname.IndexController`是控制器定义，而不是实例。这不是您要绑定的内容。Ember.js 应用程序将创建一个 的实例`IndexController`，它是您要绑定到的已创建实例：

要从视图访问实际的控制器实例，请使用`controller`.

```
Appname.IndexView = Ember.View.extend({
  templateName: 'index',
  propertyBinding: 'controller.value',
  didInsertElement: function() {
    console.log(this.get('property'));
  }
}); 
```

当然，前提是您遵循[Ember.js 约定](http://emberjs.com/guides/concepts/naming-conventions/)。

# javascript - 互联网应用调用内网页面

> ID：15391618
> 
> 赞同：0
> 
> 时间：2013-03-13T16:55:23.047
> 
> 标签：javascript, jquery, python, html, intranet

这不是一个具体的问题，而是一个普遍的问题。我正在重做我的一个旧项目并使其更加用户友好，我想要以下内容：

该项目将在我的家庭服务器上运行，带有烧瓶/python 后端。使用我的网站的用户将来自我公司的 Intranet。是否可以在我的网站上的 iframe 中加载 Intranet 页面。

简而言之，是否可以从无法访问所述 Intranet 的 Internet 页面加载 Intranet 页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:58:13.730

当然，您可以将它加载到 iframe 中，您不需要为此从 Internet 访问页面 -*客户端*需要它。然而，Intranet 应用程序可能会请求不在框架中查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:58:06.163

是的。用户可以正常浏览的任何页面都可以加载到 iframe 中。

# android - 如何在Android ListView中从顶部的特定偏移处获取项目的索引

> ID：15391621
> 
> 赞同：1
> 
> 时间：2013-03-13T16:55:38.460
> 
> 标签：android, android-widget, android-listview, android-ui

有没有一种简单的方法来获取距顶部特定偏移量的列表项的索引？例如，获取距顶部 150 像素的项目的索引。

![](../Images/357902b6426d0e29f62d75152f322b85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:15:48.043

由于您的目标是找到位于屏幕中央的列表项，因此您可以尝试以下操作：

（制作一个扩展ListView的自定义类，如MyListView.java）

```
public class MyListView extends ListView implements OnScrollListener {

public MyListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setOnScrollListener(this);
    }

@Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        // Center the child currently closest to the center of the ListView when
        // the ListView stops scrolling.
        if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) { 

            int listViewCenterX = getWidth() / 2;
            int listViewCenterY = getHeight() / 2;

            Rect rect = new Rect();

            // Iterate the children and find which one is currently the most
            // centered.
            for (int i = 0; i < getChildCount(); ++i) {
                View child = getChildAt(i);
                child.getHitRect(rect);
                if (rect.contains(listViewCenterX, listViewCenterY)) {
                    // this listitem is in the "center" of the listview
                    // do what you want with it.
                    final int position = getPositionForView(child);
                    final int offset = listViewCenterY - (child.getHeight() / 2);
                    break;
                }
            }
        }
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:04:35.180

您可以遍历孩子并检查每个孩子是否与您所拥有的点相匹配。

# java - 仅覆盖 Android 库中类的 onCreate() 方法

> ID：15391623
> 
> 赞同：0
> 
> 时间：2013-03-13T16:55:46.423
> 
> 标签：java, android, overriding, android-library, multiple-apk

我有3个项目：

1.  安卓库
2.  精简版应用程序
3.  专业版应用

我只想覆盖`onCreate()`Android 库中类的方法。有没有办法做到这一点？我已经能够成功地覆盖整个类，但我知道如果我能够覆盖类中的单个方法而不是覆盖整个类并复制 99% 的代码只是为了改变几个，它会节省更多的代码重复的行。

希望这是有道理的，但如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:59:44.820

你可以为你的 Android 库创建一个 Super 类。

然后为您的 Lite App 和 Pro App 创建两个类，扩展上面创建的 Android 库类。

然后在这两个子类中重写该`onCreate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:58:00.463

您可以**创建一个主 Activity**，所有其他活动都从该主 Activity 派生（而不是标准`Activity`.

然后您就有机会在`onCreate()`您喜欢的方法中添加所有代码。为此，您应该创建一个包含所有帮助程序类和文件的单独项目，然后将它们[包含在两个项目](https://stackoverflow.com/questions/9283040/eclipse-android-project-how-to-reference-library-within-workspace/9283084#9283084)中。

# ios - 视网膜显示屏上的标签栏图标

> ID：15391624
> 
> 赞同：8
> 
> 时间：2013-03-13T16:55:47.380
> 
> 标签：ios, xcode, icons, uitabbar, retina-display

我正在制作一个 iPhone 应用程序，但我不明白为什么我的自定义标签栏图标是像素化的。它们是 30x30。例如，如果我将分辨率更改为 60x60，图标仍然是像素化的，但它们也不完整。

你能帮我解决这个问题吗？非常感谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T17:07:16.250

您不需要将非视网膜图像的大小加倍。
您需要创建两个单独的图标`icon.png`(30x30) 和`icon@2x.png`(60x60)。
iOS 会根据屏幕比例自动加载正确的文件。
您可以在以下网址找到有关利用视网膜显示的更多信息：[https ://developer.apple.com/resources/high-resolution/](https://developer.apple.com/resources/high-resolution/)

# jquery - 如何有效地添加在页面 init 上可能可见或不可见的输入值？

> ID：15391639
> 
> 赞同：0
> 
> 时间：2013-03-13T16:56:30.073
> 
> 标签：jquery, input, add

我对 JS 和 jQuery 很陌生，所以这可能是一个菜鸟问题。我正在构建一个 WordPress 主题，选项页面让用户选择他们想要多少页脚小部件插槽，我们将其称为 X，X 的可能值为 1-6。如果 X=4，那么我会显示 4 个输入，然后它们可以指定每个插槽的宽度。

我还显示了所有插槽的运行总数，以便用户始终知道它们是否处于 100%。我这样做的程序很简单，但可能效率不高。我知道我可以通过循环来做到这一点，但现在我只了解如何添加文字输入：input_1 + input_2 + input_3 等。

这在 onChange 和 keuyup 事件中运行良好，但问题是在页面加载时，我的例程不知道有多少输入可见，如果所有 6 个输入都不存在，则它没有正确添加值。我需要更改此例程，以便在不使用输入时假定值为 0，即如果 X=4，则隐藏 input_5 和 input_6。

```
function displaytotal() {
    var num = 0;
    num = parseFloat($('#wa1').val(),10) + 
        parseFloat($('#wa2').val(),10) + 
        parseFloat($('#wa3').val(),10) + 
        parseFloat($('#wa4').val(),10) + 
        parseFloat($('#wa5').val(),10) + 
        parseFloat($('#wa6').val(),10);
    num = Math.round(num);
    if( isNaN(num) ) {
        $('#total100').val('???');
    } else {
        $('#total100').val(num);
        if( $('#total100').val() == 100 ) {
            $('#total100').css({"color":"green"});
        } else {
            $('#total100').css({"color":"red"});
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:05:39.980

当元素重复时，它是使用类名而不是 ID 的指示符。这样，任何具有匹配类选择器的元素都可以在循环中使用，无论有多少。

`.filter(":visible")`将只选择那些可见的。

```
var num = 0
$('.myClass').filter(":visible").each(function() {
    num = num +  parseFloat($(this).val(),10)        
}) 
```

# php - 从选定的数据库中选择选项值

> ID：15391646
> 
> 赞同：3
> 
> 时间：2013-03-13T16:56:41.437
> 
> 标签：php, mysql, forms, combobox

我有一个小问题。我有一个edit.php 页面。此页面列出了可以编辑的产品信息。

我运行一个查询

```
while($rows=mysql_fetch_assoc($query)){

echo"<form method=\"POST\" action=\"edit.php\">";
echo "<input type ='hidden' name='ID' value = '{$rows['ID']}'>"; 
echo "Product:&nbsp <input type='text' name='product' value = '{$rows['ProductName']}'>"; 
```

在 while 循环之前，我将详细信息存储在变量中，如下所示：

```
$hiddenid = $_POST['ID'];   
$productName = $_POST['product']; 
```

这有效。当我加载 php 表单时，它会显示从数据库中检索到的产品名称（在文本字段中）。但是问题是我想将产品名称存储为用户已经选择的下拉列表框，然后选择它。

因此，基本上我希望做的不是在文本框中显示数据库检索到的选项，而是希望用户选择的选项显示在下拉列表框中。

我希望这是有道理的？为什么我的选项值根本没有显示，其次它们也没有显示 SELECTED 选项（从数据库中检索）。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:25:45.290

专注于这一领域，你应该得到一个 PHP 错误，除非它是一个复制错误。请注意以下更改：

```
while($rows=mysql_fetch_assoc($query)){
?>
    <form method=\"POST\" action=\"edit.php\">
    <input type ='hidden' name='ID' value = '<?php echo $rows['ID'];?>'>
    <select name ="pnames">
        <?php foreach ($arrayproducts as $key => $value) {
        ?>  
            <option value = "<?php echo $key; ?>" 
            <?php
                if ($key == $productName){
                    echo 'selected="selected"';
                } 
            ?> >
            <?php echo $value; ?> 
            </option>
     <?php } //end foreach ?>   
   </select>
<?php }//end while ?> 
```

一开始的 PHP 段中有纯 HTML 代码。

另外，我相信你想要

```
if ($value == $productName){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:29:32.467

这可能不是一个很好的地方，但是因为我每天都会看到大量可怕的代码，所以我想我会插话的。

首先，检查您的输入。您永远不应该相信来自用户 $_GET、$_POST 等的任何变量。原始代码的松散只是在寻找 SQL 注入攻击。

```
<?php 
```

这件事看起来像是在期待某种传递的 ID，然后会从数据库中提取 productName ......这真的不清楚。所以我们假设已经定义了变量。需要使用这样的代码：

```
if(!empty($_GET['id'])&&is_numeric($_GET['id'])){
   $id=$_GET['id'];
} else {
   $id='';
}

//Declare your array
$arrayproducts = array();

while($rows=mysql_fetch_array($query)){ 
```

你需要在这里为返回的数组调用一些东西......没有看到 SQL 很难说出你的期望，但你的标注应该看起来像这样......

```
//Whatever the name from SQL is for the column
$temp_ID = $rows['id'];

//Whatever the name for the product column is
$temp_Prod = $rows['prod'];

//Load the array
$arrayproducts[$temp_ID]=$temp_Prod;
} 
```

最好为所有内容加载一个 var，然后一次性发布，而不是进出 PHP。代码将更快，您将能够跟踪代码。

```
$page = "<form method=\"POST\" action=\"edit.php\">"; 
```

检查该 ID 是否有效。正则表达式是最好的，但这里一次只做一件事。

```
if(!empty($id)){
    $page .= "<input type =\"hidden\" name=\"ID\" value = \"$id\">";
} 
$page .= "<select name =\"pnames\">\n";

foreach ($arrayproducts as $key => $value) {

   $page .= "<option value = \"$key\""; 
```

最好使用 mysql 的自动增量字段和内置 ID，这样就不会有重复 ID 接管现有记录的机会。

```
 if ($id == $key){
        $page .= ' selected="selected"';
      }
   $page .= ">$value</option>\n";

//close the foreach
}

$page .= "</select>\n"; 

print $page;
?> 
```

# css - 页脚菜单栏的代码

> ID：15391648
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:56:46.240
> 
> 标签：css, html, footer

我在使页脚工作时遇到了一个小问题，因为 div 并没有去我希望它们去的地方。

想象一下[http://imgur.com/jlaNRhj](http://imgur.com/jlaNRhj)上的图片位于页面底部的页脚处，您如何获得那里的链接？它将分布在页面的整个底部，我想知道你们是否可以帮助我，因为我正在制作的这个网站必须看起来很棒。[http://jsfiddle.net/cYMCc/1/](http://jsfiddle.net/cYMCc/1/)链接到网站编辑。

```
Thanks for looking! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:04:19.803

您需要一个容器 div，然后是五个 div（每个链接）并将它们向左浮动。给它们 20% 的宽度以获得相同的宽度，并设置一个高度以保持它们一致。在每个 div 中创建一个带有向上、向下、向上、向下、向上等类的锚标记。然后像这样的css：`.down {padding-top:10px;}`例如。祝你好运，一旦你完成了结构设置，请告诉我它是如何进行的。

# c++ - 在 Native C++ 的托管 dll 中使用对象

> ID：15391651
> 
> 赞同：0
> 
> 时间：2013-03-13T16:56:54.923
> 
> 标签：c++, visual-studio-2010, dll

我刚开始从 C# 编写托管 dll。我正在从 msdn尝试这个[示例。](http://support.microsoft.com/kb/828736)该示例演示了我们如何通过本机 C++ 调用简单方法。然而，我扩展了示例并添加了一个名为 CheckCar 的简单方法。我的问题是如何在 C++ 中使用 CheckCar 方法

**这是我的 C# 代码**

```
public class car
{
    public string CarMake { get; set; }
    public int CarModel { get; set; }
}

public interface ICalculator
{
    int Add(int Number1, int Number2);
    int Multiply(int a, int b);
    car CheckCar(car c);
};

public class ManagedClass : ICalculator
{
    public int Add(int Number1, int Number2)
    {
        return Number1 + Number2;
    }

    public int Multiply(int a, int b)
    {
        return a * b;
    }
    public car CheckCar(car c)
    {
        if(c.CarMake.Equals("honda"))
        {
            car _c = new car();
            _c.CarMake = "Honda";
            _c.CarModel = 1232121;
            return _c;
        }
        else
        {
            return null;
        }
    }
} 
```

**这是 C++ 代码**

```
 // Initialize COM.
    HRESULT hr = CoInitialize(NULL);

    // Create the interface pointer.
    ICalculatorPtr pICalc(__uuidof(ManagedClass));

    long lResult = 0;

    // Call the Add method.
    pICalc->Add(5, 10, &lResult);
    wprintf(L"The result is %d", lResult);

    // Uninitialize COM.
    CoUninitialize(); 
```

这就是我的 AssemblyInfo 的样子

```
// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("sManagedDLL")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("sManagedDLL")]
[assembly: AssemblyCopyright("Copyright ©  2013")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
//[assembly: ComVisible(false)]
[assembly: ComVisible(true)] 
[assembly: AssemblyDelaySign(false)] 
[assembly: AssemblyKeyFile("..\\..\\..\\MyKeyFile.SNK")]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("41fc209d-a359-45d7-bf05-b1d93690824d")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

我的问题是如何`car CheckCar(car c);`在 C++ 中调用该方法。如何在 C++ 中访问对象汽车及其属性？

**更新：**

更新代码后，我无法在 C++ 中访问 IcarPtr

这是我更新的 C# 代码

```
namespace sManagedDLL
{
   [ComVisible(true), InterfaceType(ComInterfaceType.InterfaceIsDual), Guid("13FE32AD-4BF8-495f-AB4D-6C61BD463EA4")]
    public interface Icar
    {
        string GetCarMake(); 
        void SetCarMake(string rx);

        int GetCarModel();
        void SetCarModel(int rx);
    }

    [ComVisible(true), ClassInterface(ClassInterfaceType.None), Guid("13FE32AD-4BF8-495f-AB4D-6C61BD463EA5")]
    public class CarImpl : Icar
    {
        private string carmake;
        private int carmodel;

        public string GetCarMake(){return carmake;}
        public void SetCarMake(string rx) { this.carmake = rx;}

        public int GetCarModel() {return carmodel ;}
        public void SetCarModel(int rx){this.carmodel = rx;}
    }

    public interface ICalculator
    {
        int Add(int Number1, int Number2);
        int Multiply(int a, int b);
        Icar CheckCar(CarImpl c);
    }

    public class ManagedClass : ICalculator
    {
        public int Add(int Number1, int Number2)
        {
            return Number1 + Number2;
        }

        public int Multiply(int a, int b)
        {
            return a * b;
        }

        public Icar CheckCar(CarImpl c)
        {
            if (c.GetCarModel().Equals("honda"))
            {
                CarImpl _c = new CarImpl();
                _c.SetCarMake("Honda");
                _c.SetCarModel(1212132);
                return _c;
            }
            else
            {
                return null;
            }
        }//end method
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:12:01.233

您必须公开为 COM 对象（与对and`Car`所做的方式相同），然后实例化它并将其发送到方法。`ManagedClass``ICalculator``CheckCar`

[这里](https://stackoverflow.com/questions/12412533/convert-cast-safearray-of-iunknowns-to-an-iterable-array-of-interface-pointers/12420569#12420569)有一个类似的示例，您可以将其用作指导（嗯，它比您需要的更复杂，但服务器作为说明）。

# javascript - 如何仅在画布边界中实现拖放图像

> ID：15391653
> 
> 赞同：0
> 
> 时间：2013-03-13T16:57:04.040
> 
> 标签：javascript, jquery, html, canvas

我已经实现了拖放功能，但我现在需要的是一个可以禁用从 Canvas 上拖动的功能。

当我在左上角的图片有坐标 x: 0, y: 0，但如果移动到坐标的左侧则变为负数（例如 X: -1, -2 ... -100）。

我想要做的是不允许图像在画布之外移动。

欢迎任何想法甚至更好的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:49:01.620

你回答得差不多了。如果图片 x 位置是 -2，只需将其恢复为 0。

```
// Checks if the picture is beyond the x boundary's...
if (picture.x < 0) { 
    picture.x = 0; 
} else if ((picture.x + picture.width > canvas.width) {
    picture.x = canvas.width - picture.width;
} 
```

同样适用于 y 轴。

# java - FindBugs Dead Store Warning - Should I restructure code or Ignore Warning

> ID：15391654
> 
> 赞同：3
> 
> 时间：2013-03-13T16:57:05.827
> 
> 标签：java, findbugs

I am getting a DeadStore warning with **Findbugs** on **int i** below. I prefer not to write one-liners due to readability. Is there a better way to write this so that there is not DeadStore to **i**, but as readable?

```
 if (aqForm.getId() != null) {
        try {
            int i = Integer.parseInt(aqForm.getId());
            aqForm.setId(aqForm.getId().trim());
        } catch (NumberFormatException nfe) {
            result.rejectValue("id", "error.id", "Please enter an integer.");
            foundError = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:59:10.673

Just call the method and ignore the result, ideally with a comment to explain why:

```
// Just validate
Integer.parseInt(aqForm.getId()); 
```

It's not clear why you're trimming the version you *haven't* validated rather than the version you *have*, mind you. I'd prefer:

```
String id = aqForm.getId();
if (id != null) {
    try {
        id = id.trim();
        // Validate the ID
        Integer.parseInt(id);
        // Store the "known good" value, post-trimming
        aqForm.setId(id);
    } catch (NumberFormatException nfe) {
        result.rejectValue("id", "error.id", "Please enter an integer.");
        foundError = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T16:59:23.473

You don't have to assign to `i`. You could just call `parseInt()` and ignore the result:

```
 if (aqForm.getId() != null) {
        try {
            Integer.parseInt(aqForm.getId()); // validate by trying to parse
            aqForm.setId(aqForm.getId().trim());
        } catch (NumberFormatException nfe) {
            result.rejectValue("id", "error.id", "Please enter an integer.");
            foundError = true;
        }
    } 
```

That said, I would create a helper function:

```
 public static boolean isValidInteger(String str) {
      ...
   } 
```

and rewrite your snippet like so:

```
 String id = aqForm.getId();
   if (id != null) {
      if (isValidInteger(id)) {
         aqForm.setId(id.trim());
      } else {
         result.rejectValue("id", "error.id", "Please enter an integer.");
         foundError = true;
      }
   } 
```

# django - 如何在 Django 模板中翻译消息/变量？

> ID：15391660
> 
> 赞同：3
> 
> 时间：2013-03-13T16:57:26.920
> 
> 标签：django, internationalization, django-templates, translation

我`messages.success(request, 'sign-up-success')`认为（我写了一个通用名称，因为我稍后会翻译它），并在我的模板中使用 {{ message }} 显示它。我希望能够翻译，所以我尝试了`{% blocktrans %}{{ message }}{% endblocktrans %}`，但这会将*任何*消息（无论是“注册失败”还是其他任何消息）翻译成我在 django.po 文件中定义的 msgstr。

如何翻译消息，它是一个变量？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:02:21.630

您指出了：您不能翻译变量。

您必须翻译定义它的文本：

```
from django.utils.translation import ugettext as _
messages.success(request, _('sign-up-success')) 
```

然后按照标准翻译流程：[https ://docs.djangoproject.com/en/dev/topics/i18n/translation/](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T14:54:47.737

重要的是在 settings.py 中的中间件中有正确的顺序

```
 MIDDLEWARE_CLASSES = (
   'django.contrib.sessions.middleware.SessionMiddleware',
   'django.middleware.locale.LocaleMiddleware',
   'django.middleware.common.CommonMiddleware',
    ) 
```

# r - R error.bars 获取所有x轴标签

> ID：15391661
> 
> 赞同：1
> 
> 时间：2013-03-13T16:57:28.997
> 
> 标签：r

我正在尝试使用 error.bars 绘制具有标准偏差的均值，并且效果很好。我知道我也可以使用 ggplot 方法，但我无法为我的数据实现它......

到目前为止一切顺利，我现在遇到的问题是，并非 x 轴上的所有变量都被打印出来，实际上只是每秒左右打印一次。

在箱线图中，我可以使用命令`names, las=2`. error.bars 函数有类似的东西吗？我在手册中找不到任何内容。

这是我正在使用的代码：

```
psych:::error.bars(orderedcols,sd=TRUE,add=TRUE,arrow.len=0.05,bars=TRUE, xlab="Adjectives", ylab="Mean Intensity", main="Mean Intensities and Standard Deviations") 
```

**编辑：**

> dput(orderedcols) 结构(list(brilliant = c(50, 82, 80, 12, 80, 80, 85, 72, 80, 85, 65, 100, 90, 97, 85, 95, 100, 100), 巧妙= c(75, 70, 50, 79, 85, 80, 100, 50, 95, 90, 50, 100, 100, 1, 80, 83, 83, 100), 智能 = c(40, 70, 45, 87, 75, 60, 80, 42, 86, 80, 29, 100, 50, 45, 61, 77, 40, 90), 亮 = c(20, 60, 40, 58, 65, 50, 75, 40 , 77, 55, 50, 58, 50, 56, 76, 83, 30, 75), 智能 = c(30, 62, 25, 47, 45, 50, 50, 32, 54, 75, 27, 81, 70, 69, 40, 85, 29, 80), 聪明 = c(60, 66, 20, 52, 70, 60, 50, 20, 66, 35, 31, -9, -10, 44, 78, 91 , 50, 70), 愚蠢 = c(-15, -35, -20, -44, -30, -10, -20, -10, -32, -25, -27, -23, -10, - 15, -25, 43, -36, -10), daft = c(-10, -60, -30, -14, -20, -10, -77, 0, -90, -20, -36, -61, 10, 0, -33, -100, -21, -50 ), 暗淡 = c(-35, -62, -20, 8, -80, -30, -35,-24, -60, -35, -34, -9, -100, -34, -83, -71, -27, -20), 哑巴 = c(-25, -50, -60, -37, -40, -30, -25, -29, -76, -75, -78, -37, 0, -30, -39, -91, -38, -10)，无意识 = c(-50, - 55, -60, -12, -30, -50, -25, 0, -62, -50, -100, -100, 0, -6, -39, -52, -59, -25)，空= c(-20, -80, -30, -6, -35, -30, -90, -25, -50, -50, -38, -100, -75, -25, -12, -100 , -22, -10), 愚蠢 = c(-25, -80, -30, -75, -50, -40, -80, -28, -37, -75, -41, -50, -11 , -100, -51, -91, -36, -15)，dimwitted = c(-50, -77, -20, -59, -40, -60, -66, -77, -45, -25 , -32, -77, -100, -46, -74, -89, -39, -30)，白痴 = c(-60, -91, -50, -26, -60, -50, -83 , -41, -58, -80, 30, -86, -100, -46, -91, -89, -60, -40), moronic = c(-90, -87, -40, -19, -65、-60、-90、-85、-78、-75、-59、-100、-80、-22、-71、-95、-65、-15), 无脑 = c(-75, -85, -80, -55, -20, -100, -90, -35, -85, -90, -31, -100, -90, -73, -31, -63, -100, -95)，白痴 = c(-100, -95, -75, 31, -50, -75, -90, -100, -72, -85, -63, - 98, -100, -33, -92, -90, -74, -100)), .Names = c("brilliant", "ingenious", "intelligent", "bright", "smart", "brainy" ，“愚蠢”，“愚蠢”，“昏暗”，“愚蠢”，“没有头脑”，“愚蠢”，“愚蠢”，“愚蠢”，“白痴”，“白痴”，“无脑”，“愚蠢”），类 = “data.frame”, row.names = c(2L, 4L, 5L, 6L, 7L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L,21L)) 11 72 50 42 40 32 20 -10 0 -24 -29 0 -25 -28 -77 -41 -85 -35 -100 12 80 95 86 77 54 66 -32 -90 -60 -76 -62 - 50 -37 -45 -58 -78 -85 -72 13 85 90 80 55 75 35 -25 -20 -35 -75 -50 -50 -75 -25 -80 -75 -90 -85 14 65 50 29 50 27 31 -27 -36 -34 -78 -100 -38 -41 -32 30 -59 -31 -63 15 100 100 100 58 81 -9 -23 -61 -9 -37 -100 -100 -50 -77 -86 -100 -100 -98 16 90 100 50 50 70 -10 -10 10 -100 0 0-75 -11 -100 -100 -80 -90 -100 17 97 1 45 56 69 44 -15 0 -34 -30 -6 -25 -100 -46 -46 -22 -73 -33 18 85 80 61 76 40 78 -25 -33 -83 -39 -39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 - 95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 -59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 - 10 -25 -10 -15 -30 -40 -15 -95 -100-90 -100 17 97 1 45 56 69 44 -15 0 -34 -30 -6 -25 -100 -46 -46 -22 -73 -33 18 85 80 61 76 40 78 -25 -33 -83 -39 - 39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 -59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 - 40 -15 -95 -100-90 -100 17 97 1 45 56 69 44 -15 0 -34 -30 -6 -25 -100 -46 -46 -22 -73 -33 18 85 80 61 76 40 78 -25 -33 -83 -39 - 39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 -59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 - 40 -15 -95 -100-15 0 -34 -30 -6 -25 -100 -46 -46 -22 -73 -33 18 85 80 61 76 40 78 -25 -33 -83 -39 -39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 - 59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100-15 0 -34 -30 -6 -25 -100 -46 -46 -22 -73 -33 18 85 80 61 76 40 78 -25 -33 -83 -39 -39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 - 59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100-39 -39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 -59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100-39 -39 -12 -51 -74 -91 -71 -31 -92 19 95 83 77 83 85 91 43 -100 -71 -91 -52 -100 -91 -89 -89 -95 -63 -90 20 100 83 40 30 29 50 -36 -21 -27 -38 -59 -22 -36 -39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100-39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100-39 -60 -65 -100 -74 21 100 100 90 75 80 70 -10 -50 -20 -10 -25 -10 -15 -30 -40 -15 -95 -100

PS 不能加照片，名气太小了。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:15:21.147

我认为这实际上很简单：您所要做的就是在运行命令`las`之前设置图形参数：`error.bars`

```
par(las=2)
error.bars(orderedcols,sd=TRUE,add=TRUE,arrow.len=0.05,bars=TRUE,
           xlab="Adjectives", ylab="Mean Intensity",
           main="Mean Intensities and Standard Deviations") 
```

一个`ggplot2`解决方案（你也可以旋转这个标签——在 StackOverflow 上搜索如何做——但我选择旋转整个图）

```
library("reshape2")
library("ggplot2")
theme_set(theme_bw())
ggplot(melt(orderedcols),aes(x=variable,y=value))+
    stat_summary(geom="bar",fun.y=mean,position="identity",fill="gray")+
    stat_summary(geom="errorbar",width=0.2,
                 fun.data=function(x) { data.frame(y=mean(x), 
                     ymin=mean(x)-sd(x),ymax=mean(x)+sd(x)) })+
    coord_flip() 
```

# xcode - Xcode Instruments 中是否有应用程序性能的绝对指标？

> ID：15391662
> 
> 赞同：1
> 
> 时间：2013-03-13T16:57:31.780
> 
> 标签：xcode, performance, core-animation, core-graphics, xcode-instruments

我已经使用 xcode 工具分析了我的应用程序。现在我有一个 FPS 日志（见图）。我想将所有 FPS 统计信息放在单独的文件（即 excel 表）中，以分析平均 fps 或更多内容。我可以这样做吗？有没有其他方法可以获得我的应用程序的平均 fps 或其他绝对性能指标？谢谢。

![在此处输入图像描述](../Images/bc2c92cf1ac9f4238b3afd972c7be1d7.png)

# android - 在地图标记上设置 LongClickListener

> ID：15391665
> 
> 赞同：16
> 
> 时间：2013-03-13T16:57:39.207
> 
> 标签：android, google-maps, google-maps-android-api-2

有没有办法`longClickListsner`在谷歌地图 v2 上的标记上设置一个？我想让用户长按标记并显示一个对话框，其中包含删除或查看信息的选项。这可以做到吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T02:53:52.667

我还有一个提议。

首先，我使标记可拖动：

```
mapa.addMarker(new MarkerOptions()  ...     
      .setDraggable(true); 
```

在您可以像这样设置监听器 setOnMarkerDragListener 之后：

```
mapa.setOnMarkerDragListener(new OnMarkerDragListener() {

            @Override
            public void onMarkerDragStart(Marker marker) {
                // TODO Auto-generated method stub
                //Here your code
            }

            @Override
            public void onMarkerDragEnd(Marker marker) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onMarkerDrag(Marker marker) {
                // TODO Auto-generated method stub

            }
        }); 
```

然后你可以覆盖你想要的（通常是 onMarkerDragStart 来模拟长按）

希望能帮助到你

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T17:43:07.573

标记类没有 LongClickListener。尽管这种方法远非完美，但这里有一个关于您可以做什么的想法。

为您的 GoogleMap 对象设置长点击侦听器。长按时，检查单击的位置是否足够靠近您的任何标记。要确定此接近度阈值，您可以使用地图缩放级别。

这是不太好的示例代码。我还没有尝试过，但它可能适合您的需求。

```
 map.setOnMapLongClickListener(new OnMapLongClickListener() {

            @Override
            public void onMapLongClick(LatLng latLng) {
                for(Marker marker : yourMarkerList) {
                    if(Math.abs(marker.getPosition().latitude - latLng.latitude) < 0.05 && Math.abs(marker.getPosition().longitude - latLng.longitude) < 0.05) {
                        Toast.makeText(MapActivity.this, "got clicked", Toast.LENGTH_SHORT).show(); //do some stuff
                        break;
                    }
                }

            }
        }); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-29T22:11:22.543

正如 ARP 建议的那样，您可以使用 OnMarkerDragListener 来模拟长按。就我而言，当 onMapLongClick() 发生时，我正在创建新标记，所以我想做一些类似（但不等于）的事情

```
@Override
public void onMarkerDragStart(Marker marker) {
    marker.remove();
    MarkerOptions options = createBasedOnMarker(marker);
    this.googleMap.addMarker(options);
} 
```

这样，您将删除以前在地图中的标记，并在相同位置创建另一个具有相同内容的标记（您必须有一个 Map 或 Pair 以保留您创建的标记中的信息）。

希望我的解决方法有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-07T15:38:40.127

ARP 的答案很好，但它有一个丑陋的效果：当您开始拖动时，标记会向上移动，当您完成时，标记仍处于比您用手指指向的位置更高的位置。

看看[http://www.youtube.com/watch?v=RxAHHJD4nU8](http://www.youtube.com/watch?v=RxAHHJD4nU8)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-10T08:44:16.840

[akaya 的回答](https://stackoverflow.com/a/15392604/3022387)不是一个坏方法，但如果您的项目中包含**com.google.maps.android:android-maps-utils:0.3+** [库](https://stackoverflow.com/a/30396796/3022387)，您可以准确了解距离：

```
double distance = SphericalUtil.computeDistanceBetween( 
    marker.getPosition(), 
    latLng 
);
if( distance < 50 ) { // closer than 50 meters?
    //..do stuff..
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-19T10:37:39.660

嘿，看看这段代码，我刚刚阻止了标记被拖动并使用了`onMarkerDragStart`的长按检测。

```
public abstract class LinkMarkerLongClickListener implements GoogleMap.OnMarkerDragListener {

    private int previousIndex = -1;

    private Marker cachedMarker = null;
    private LatLng cachedDefaultPostion = null;

    private List<Marker> markerList;
    private List<LatLng> defaultPostions;

    public LinkMarkerLongClickListener(List<Marker> markerList){
        this.markerList = new ArrayList<>(markerList);
        defaultPostions = new ArrayList<>(markerList.size());
        for (Marker marker : markerList) {
            defaultPostions.add(marker.getPosition());
            marker.setDraggable(true);
        }
    }

    public abstract void onLongClickListener(Marker marker);

    @Override
    public void onMarkerDragStart(Marker marker) {
        onLongClickListener(marker);
        setDefaultPostion(markerList.indexOf(marker));
    }

    @Override
    public void onMarkerDrag(Marker marker) {
        setDefaultPostion(markerList.indexOf(marker));
    }

    @Override
    public void onMarkerDragEnd(Marker marker) {
        setDefaultPostion(markerList.indexOf(marker));
    }

    private void setDefaultPostion(int markerIndex) {
        if(previousIndex == -1 || previousIndex != markerIndex){
            cachedMarker = markerList.get(markerIndex);
            cachedDefaultPostion = defaultPostions.get(markerIndex);
            previousIndex = markerIndex;
        }
        cachedMarker.setPosition(cachedDefaultPostion);
    }
} 
```

你可以这样称呼听众！

```
map.setOnMarkerDragListener(new LinkMarkerLongClickListener(markers) {
            @Override
            public void onLongClickListener(Marker marker) {
                ToastUtils.showToast(Mission1Activity.this, marker.getTitle());
            }
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-24T16:39:30.993

这是一个简单的工作解决方案。我们需要使用屏幕 xy 来检查距离。

```
googleMap.setOnMapLongClickListener{ loc ->
                var distance = 10000
                var nearestMarker: Marker? = null
                allBcmMarkers.forEach { mrkr ->
                    googleMap?.projection?.let { prj ->
                        val tapXY = prj.toScreenLocation(loc)
                        val mrkrXY = prj.toScreenLocation(mrkr.position)
                        val THRESH = 50
                        val xDiff = abs(tapXY.x - mrkrXY.x)
                        val yDiff = abs(tapXY.y - mrkrXY.y)
                        if (xDiff < THRESH && yDiff < THRESH) {
                            val mrkrDist =
                                sqrt((xDiff * xDiff + yDiff * yDiff + xDiff * yDiff).toDouble())
                            if (mrkrDist < distance) {
                                distance = mrkrDist.toInt()
                                nearestMarker = mrkr
                            }
                        }
                    }
                }

                // you have nearestMarker
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-01T12:20:56.687

以防万一有人需要它，我调整了一个对数函数来计算@akaya 提到的接近度阈值，它适用于 5.0 到 18 之间的缩放。这是函数：

```
float zoom = mMap.getCameraPosition().zoom;
double maxDistance = 2000000 * Math.exp(-0.644*zoom); 
```

# jenkins - 如何在 CollabNet 文件发布名称中使用 Hudson / Jenkins 参数化值

> ID：15391671
> 
> 赞同：1
> 
> 时间：2013-03-13T16:57:51.647
> 
> 标签：jenkins, hudson, collabnet

我的版本名称有一个参数化值。当我尝试在 CollabNet File Release 加载项中使用该值作为 Release 值时，它给了我以下错误：

CollabNet FileRelease：严重错误：找不到 ${RELEASE} 的 releaseId。将构建状态设置为 UNSTABLE（或更糟）。

我尝试了许多排列来引用该变量。我还验证了它是否通过将变量值放置在构建的另一个区域中来正确解析变量值。看起来 CollabNet 插件无法解析该值。有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:14:14.637

未经检查：该插件可能不会扩展配置字段值。在这种情况下，唯一的解决方案是修复插件（如果它是开源插件则不难）。

但首先你应该检查参数是否真的设置好了。未定义的参数保持原样，不替换为空字符串，因此在这种情况下您也会收到该错误。参数也设置为环境变量，所以最简单的方法是通过添加构建步骤来检查：

*   在 windows 上：使用命令“执行 windows 批处理命令”`echo RELEASE is %RELEASE%`
*   在 unix 上：使用命令“执行 shell 命令”`echo RELEASE is $RELEASE`

# jquery - 我可以在打字稿中覆盖 document.ready

> ID：15391681
> 
> 赞同：3
> 
> 时间：2013-03-13T16:58:14.917
> 
> 标签：jquery, onload, typescript, document-ready, onload-event

我有一个具有不同页面的应用程序，并且大致每个页面都有它自己的 js（由 typescript 编译器生成）。每个页面的 document.ready 方法都有一些共享属性，我希望将共享函数/属性放入一个基本的打字稿类。

所以它应该看起来像

```
 class PageX extends BasePage
    {
        onLoad => which should act like document.ready
    } 
```

可以这样做吗？我不确定这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:34:35.333

如果您希望在每个页面中都包含基本功能，那么您需要在每个页面中包含基本脚本。派生类不会将父功能复制到子功能中。

您可以在包含常见行为和属性的 .ts 文件中拥有一个 PageBase 类，然后从该类派生每个页面特定行为的类。如下所示：

```
// Base.ts
class PageBase {
  commonProperty: any;

  constructor(doc:HTMLDocument){
    doc.onload = function(){
      alert('Common code here');
    }
  }
} 
```

上面的编译输出（base.js）将通过每个页面上的脚本标记包含，然后是每个页面生成的脚本，例如...

```
// pageX.ts

/// <reference path="Base.ts"/>
class PageX extends PageBase {
  constructor(){
    super(window.document);
    // Rest of my code here...
  }
} 
```

这听起来像是你所追求的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:56:18.910

我认为逻辑不属于一个类。

但是如果你在 .ts 文件的顶部声明一个函数 var 并从你的外部 doc.ready 中调用它，你可以在类实例中监听该函数的变化。

看

[javascript 和/或 jQuery 中的函数监听器](https://stackoverflow.com/questions/8073403/function-listener-in-javascript-and-or-jquery)

并 [监听状态和函数调用](https://stackoverflow.com/questions/6443108/listen-to-state-and-function-invocations)

# powershell - 无法使用 Get-ADGroupMember 加载成员，但可以使用 Get-ADGroup... 为什么？

> ID：15391682
> 
> 赞同：0
> 
> 时间：2013-03-13T16:58:17.933
> 
> 标签：powershell, active-directory

我正在为 PowerShell 使用 ActiveDirectory 模块，并且喜欢它让我的生活变得多么简单。

不过，我正在与一组人作斗争。

如果我使用下面的代码，我会得到组中所有成员的一个很好的数组（我认为这一切......看起来像它。）

```
(get-adgroup "VMRCopy" -Properties members).members 
```

但是，如果我使用为此目的设计的 cmdlet，它会失败：

```
PS>GET-ADGroupMember "VMRCopy"
Get-ADGroupMember : The specified directory service attribute or value does not exist
At line:1 char:18
+ GET-ADGroupMember <<<<  "VMRCopy"
    + CategoryInfo          : NotSpecified: (VMRCopy:ADGroup) [Get-ADGroupMember], ADException
    + FullyQualifiedErrorId : The specified directory service attribute or value does not exist,Microsoft.ActiveDirect
   ory.Management.Commands.GetADGroupMember 
```

我试图通过使用第一种方法来查看哪个对象失败，然后遍历成员并尝试“获取”每个对象，但我没有看到任何错误。

```
$Mem = (get-adgroup "VMRCopy" -Properties members).members
$Mem | % { Write-Host $_; $t = Get-ADObject $_ } 
```

我查看了 ADSIEdit 并查看了 Active Directory 管理中心，但我找不到任何看起来很奇怪的东西。

任何人有任何关于免费工具或 PoSh 代码的想法，可以告诉我这个小组的成员有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-09T10:31:31.417

我遇到了同样的问题。当查看使用“Active Directory 用户和计算机”实用程序失败的组成员时，我得到以下信息；

![AD 组成员友好名称警告](../Images/3423c07e8529328d793a56fd7d605c55.png)

阅读[Get-ADGroupMember](https://technet.microsoft.com/en-gb/library/ee617193.aspx)的 TechNet 文档时，我注意到以下内容；

> 当组的成员位于不同的林中，并且该林没有运行 Active Directory Web 服务时，此 cmdlet 不起作用。

就我而言，我有外国安全主体指向已删除的用户。删除这些成员解决了我的问题。

似乎没有任何方法可以告诉 cmdlet 只返回成员，无论是否有其他详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:53:11.723

此时您遇到的错误表明底层对象使用的方法（GetADGroupMember）不存在。对我来说，问题不在于您的目录数据，而在于您调用它时 ActiveDirectory 模块的状态。

你系统地复制它吗？

您可以尝试打开一个新的 Powershell 解释器，导入 activedirectory 模块并再次测试吗？

# unit-testing - 我如何测试 AngularJS 提供者？

> ID：15391683
> 
> 赞同：10
> 
> 时间：2013-03-13T16:58:19.487
> 
> 标签：unit-testing, angularjs, jasmine

我需要测试我自己的角度提供程序，并且需要在配置和运行阶段对其进行测试，以检查配置方法是否有效，以及实例化的提供程序是否确实配置了正确的参数。

当我询问提供程序的依赖注入时，它找不到 APIResourceFactoryProvider，只有 APIResourceFactory，而且我在迄今为止查看的存储库中没有找到任何这样的示例。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T07:38:44.930

它实际上比最初在 AngularJS 中测试提供者要简单得多：

```
describe('Testing a provider', function() {
  var provider;

  beforeEach(module('plunker', function( myServiceProvider ) {
      provider = myServiceProvider;
  }));

  it('should return true on method call', inject(function () {
    expect( provider.method() ).toBeTruthy();
  }));
}); 
```

```

证明在 Plunker：[http ://plnkr.co/edit/UkltiSG8sW7ICb9YBZSH](http://plnkr.co/edit/UkltiSG8sW7ICb9YBZSH)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T16:44:15.580

以防万一您想要提供程序的缩小版本，事情会变得稍微复杂一些。

这是提供程序代码：

```
angular
    .module('core.services')
    .provider('storageService', [function () {
        function isLocalStorageEnabled(window) {
            return true;
        }

        this.$get = ['$window', 'chromeStorageService', 'html5StorageService',
            function($window, chromeStorageService, html5StorageService) {
            return isLocalStorageEnabled($window) ? html5StorageService : chromeStorageService;
        }];
    }]); 
```

测试用例：

```
describe('Storage.Provider', function() {
    var chrome = {engine: 'chrome'};
    var html5 = {engine: 'html5'};
    var storageService, provider;

    beforeEach(module('core.services'));
    beforeEach(function () {
        module(function (storageServiceProvider) {
            provider = storageServiceProvider;
        });
    });
    beforeEach(angular.mock.module(function($provide) {
        $provide.value('html5StorageService', html5);
        $provide.value('chromeStorageService', chrome);
    }));

    // the trick is here
    beforeEach(inject(function($injector) {
        storageService = $injector.invoke(provider.$get);
    }));

    it('should return Html5 storage service being run in a usual browser', function () {
        expect(storageService).toBe(html5);
    });
}); 
```

在这种情况下，$get 是一个数组，您不能将它作为提供依赖项作为参数的常用函数来调用。解决方案是使用**$injector.invoke()**。

奇怪的是，大多数教程和示例都忽略了这个细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T22:19:06.313

这是一个小助手，它正确封装了获取提供程序，从而确保各个测试之间的隔离：

```
 /**
   * @description request a provider by name.
   *   IMPORTANT NOTE: 
   *   1) this function must be called before any calls to 'inject',
   *   because it itself calls 'module'.
   *   2) the returned function must be called after any calls to 'module',
   *   because it itself calls 'inject'.
   * @param {string} moduleName
   * @param {string} providerName
   * @returns {function} that returns the requested provider by calling 'inject'
   * usage examples:
    it('fetches a Provider in a "module" step and an "inject" step', 
        function() {
      // 'module' step, no calls to 'inject' before this
      var getProvider = 
        providerGetter('module.containing.provider', 'RequestedProvider');
      // 'inject' step, no calls to 'module' after this
      var requestedProvider = getProvider();
      // done!
      expect(requestedProvider.$get).toBeDefined();
    });
   * 
    it('also fetches a Provider in a single step', function() {
      var requestedProvider = 
        providerGetter('module.containing.provider', 'RequestedProvider')();

      expect(requestedProvider.$get).toBeDefined();
    });
   */
  function providerGetter(moduleName, providerName) {
    var provider;
    module(moduleName, 
           [providerName, function(Provider) { provider = Provider; }]);
    return function() { inject(); return provider; }; // inject calls the above
  } 
```

*   获取提供者的过程是完全封装的：不需要影响测试之间隔离的闭包变量。
*   该过程可以分为两个步骤，一个“模块”步骤和一个“注入”步骤，它们可以与单元测试中对“模块”和“注入”的其他调用适当地分组。
*   如果不需要拆分，则可以在单个命令中简单地检索提供者！

# javascript - JQuery UI 对话框：动态 OnClick 侦听器

> ID：15391684
> 
> 赞同：2
> 
> 时间：2013-03-13T16:58:21.593
> 
> 标签：javascript, jquery, dynamic, modal-dialog, onclicklistener

如何在 JQuery 中动态启动 UI 对话框的 OnClick 事件？

每个 SVG-rect 元素 (1,2,...,1000) 都应该能够打开此对话框，同时还应提交参数或 ID 以识别单击了哪个 svg。

相关的 JS 代码如下所示：

```
$(function() {
    $( "#request_1" )
        .click(function() {
            createForm();
            $( "#dialog-form" ).dialog( "open" );       
    });
/*....*/
}; 
```

相关的 HTML 代码如下所示：

```
<svg version="1.1" width="720" height="125">
    <rect id="request_1" x="180.5" y="15" width="39" height="15">
    </rect>
</svg>

<svg version="1.1" width="720" height="125">
    <rect id="request_2" x="180.5" y="15" width="39" height="15">
    </rect>
</svg>

/*[...]*/

<svg version="1.1" width="720" height="125">
    <rect id="request_1000" x="180.5" y="15" width="39" height="15">
    </rect>
</svg> 
```

问题来自此示例，您可以在其中找到完整的源代码：http: [//jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

想象一下，您将有 1000 个不同的按钮。

任何想法？我想使用简单的 onClick 将是一个解决方案，但是如何启动 .click(function()) 呢？

感谢你们对我的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:08:15.447

绑定或添加一个类并将事件绑定`click`到该类。`rect``rect``click`

```
$( "rect" ).click(function() {
  $( "#dialog" ).dialog( "open" );
}); 
```

如果是动态添加的元素，请使用[`.on()`](http://api.jquery.com/on/)：

```
$(document).on('click', 'rect', function() {
  $( "#dialog" ).dialog( "open" );
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/Fdc6b/1/](http://jsfiddle.net/dirtyd77/Fdc6b/1/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-13T17:05:28.493

如果要添加动态元素，请使用 live 函数为新元素附加事件，如下所示：

```
$(function() {
    $( "#request_1" ).live('click',function() {
            createForm();
            $( "#dialog-form" ).dialog( "open" );       
    });
/*....*/
}; 
```

# maven - 有没有办法调用特定版本的 Maven 插件的目标？

> ID：15391686
> 
> 赞同：2
> 
> 时间：2013-03-13T16:58:28.387
> 
> 标签：maven

我想从命令行调用 Maven 插件中特定版本的目标。

如何做到这一点？

我正在寻找类似的东西：

```
mvn org.foo:my-plugin:1.2.3-SNAPSHOT:do-something 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:13:06.377

你的第一个猜测是正确的。这种命令的方案是

```
mvn groupid:artifactid:version:goal 
```

例子：

```
mvn org.apache.maven.plugins:maven-compiler-plugin:3.0:compile 
```

# jquery - Fancybox 定位 - 可以相对于父 div 定位吗？

> ID：15391693
> 
> 赞同：2
> 
> 时间：2013-03-13T16:58:48.800
> 
> 标签：jquery, fancybox

我正在开发一个具有复杂元素的项目，我认为我可以使用 Fancybox 作为解决方案，但我需要使用它与预期的稍有不同。

通常，fancybox 会在屏幕上自动居中。我需要完成的是将fancybox覆盖在一个非常特定的位置，并且无论屏幕有多宽，它都保持在那里。

有没有办法重写 jquery 以将其设置为页面上的固定坐标？

编辑

好的，所以我做了以下

```
#fancybox-wrap {
display: none;
left: 40% !important;
outline: medium none;
padding: 20px;
position: absolute;
top: 100px !important;
z-index: 1101;
right: 61% !important; 
```

}

动作几乎是完美的，但是当您调整屏幕大小时会有一些轻微的移动。

有什么想法可以让它真正锁定在那里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T19:29:53.090

您可以通过在 jquery.fancybox.js 中找到这一行并将 appendTo 更改为您选择的 div 将其放在特定的 div 中，如果需要，您还需要将 .fancybox-overlay 定位从 CSS 中的固定更改为绝对将其定位在该 div 中。

```
this.overlay = $('<div class="fancybox-overlay"></div>').appendTo( ".yourdiv" ); 
```

# c# - C# 表单立即关闭

> ID：15391698
> 
> 赞同：-2
> 
> 时间：2013-03-13T16:59:08.737
> 
> 标签：c#

应用程序启动后，我的表单窗口突然开始关闭。输出窗口中没有任何内容可以提示可能导致它的原因，也没有向我抛出任何错误。有人有什么想法吗？

我已经提供给form的班级。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ProjectBoardManagement {
  public partial class CreateBoard : Form {

    Functions funcs = new Functions();

    public CreateBoard() {
      InitializeComponent();
    }

    private void CreateBoardButton_Click(object sender, EventArgs e) {
      String BoardName = BoardNameText.Text;
      String Pages = "";
      String Labels = "";
      foreach (ListViewItem i in PageNameList.Items) {
        Pages = (Pages + i.Name.ToString() + ",");
      }

      foreach (ListViewItem i in LabelNameList.Items) {
        Labels = (Labels + i.Name.ToString() + ",");
      }

      String BoardFile = ("board_" + BoardName + ".txt");
      funcs.SaveSetting(BoardFile, "name", BoardName);
      funcs.SaveSetting(BoardFile, "pages", Pages);
      funcs.SaveSetting(BoardFile, "labels", Labels);

      FormManagement.CreateBoard.Hide();
      FormManagement.BoardList.LoadBoardList();
    }

    private void PageNameButtonAdd_Click(object sender, EventArgs e) {
      String pagename = PageNameText.Text;
      if (pagename != "") {
        PageNameList.Items.Add(pagename);
      }
      PageNameText.Text = "";
    }

    private void LabelNameButtonAdd_Click(object sender, EventArgs e) {
      String labelname = LabelNameText.Text;
      if (labelname != "") {
        LabelNameList.Items.Add(labelname);
      }
      LabelNameText.Text = "";
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:03:57.490

显而易见的第一件事 - 在调试模式下运行它并停止所有异常的执行。这应该为您提供有关如何从那里开始的足够信息。

否则 `Functions funcs = new Functions();`看起来很可疑。

# android - 检索 android 解析列并将其设置为数组

> ID：15391702
> 
> 赞同：0
> 
> 时间：2013-03-13T16:59:11.803
> 
> 标签：android, parsing, textview

我在 Parse 中有一个名为 Customer_Information 的表。并且有一个名为用户名的列。我想检索用户名列中的所有值并将其存储到数组中。存储后，我想将其设置为单个文本视图。这可能吗？我试过这段代码，但它有一个错误 ArrayIndexOutOfBounds。

```
public class Users extends Activity{

    private static final String tbname = "Customer_Information";
    private static final String uname = "username";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.users);

    TextView text = (TextView)findViewById(R.id.text);

    ParseQuery query = new ParseQuery(tbname);{

    try{
            List<ParseObject> test = query.find();
            for(int x=0;x<test.size();x++){
            String[] str = {test.get(x).getString(uname)};
            text.setText("Username: "+str[x]+"\n");
            }
    }
    catch (com.parse.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:02:14.090

问题很可能与这条线有关：

```
text.setText("Username: "+str[x]+"\n"); 
```

您正在尝试访问索引，但您正在使用`x`. 如果所有s 返回一个*相同*长度`ParseObject`的数组，一段时间后，随着增加，它将变得大于该数组的最大索引，从而产生一个.*`x``IndexOutOfBoundsException`*

 *我建议你先做一些测试：打印出 的值`str`，找出你需要的索引，然后更改该行，使其使用*常量*索引。基于您在数组中只有 1 个元素的事实，因为您这样做了

```
String[] str = {test.get(x).getString(uname)};//one element array 
```

该指数最有可能`0`：

```
text.setText("Username: "+str[0]+"\n"); 
```

如果您不打算制作`str`任何大于 1 的元素，请将其丢弃并仅使用单个`String`.*

# php - 通过 URL $_GET 参数发送 Passkey

> ID：15391709
> 
> 赞同：1
> 
> 时间：2013-03-13T16:59:23.633
> 
> 标签：php, encryption

我有一个 API 可以将 url 吐出到我网络上的重定向页面。网址看起来像这样：

```
http://mydomain.com/offers.php?country=US&offerID=5555 
```

还有一些其他参数，但这就是它的要点。问题是用户滥用它并使用机器人创建自己的点击。我想创建一个密码系统，强制用户使用 API 中的链接，以免被滥用。

像这样的东西：

api.php

```
<?php
$random_number=mt_rand(1,100);
$url="http://mydomain.com/offers.php?country=US&offerID=5555&key=".$random_number;
echo $url;
?> 
```

报价.php

```
<?php
$key=$_GET['key'];
if($key<1 || $key>100)
die("Invalid key!");
?> 
```

这显然是一个非常愚蠢的解决方案，因为它只使用一个随机数......但希望你能看到我想要完成的事情。

我的想法是按小时加密日期字符串并使用静态隐藏密钥对其进行加密。这将使密钥每小时更改一次，并且对于欺诈者来说将更加困难。唯一的问题是如果有人在 9:59 从 API 获取 url，它将在 10:00 过期，这太短了。

做这个的最好方式是什么？（理想的）关键应该是......

*   动态的 - 它应该经常变化。
*   轻量级 - 不能仅仅检查密钥就花费大量资源。
*   很难破解/模拟。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:35:41.120

存储当前用户会话的 1 次使用哈希怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-06T19:29:36.827

这是我如何做到的。我不建议将此作为安全或有效的解决方案，只是简单地防止用户篡改我的网址。

```
public static function hashArray($arr, $timestamp)
    {
        $salt = "my-salt-here";
        $md5 = md5(http_build_query($arr) . $salt . $timestamp);
        return $md5;
    }

 //build the url
$timestamp = date("Y-m-d H"); //links will last for about two hours
//if you want single-use links, you can add a random number to params

$params = ['offer'=>10, 'country'=>'US'];
$params['hash']=hashArray($params, $timestamp); //build hash and add it
$url = 'http://my-domain.com/click.php?'.http_build_query($params);

//check the hash
public static function checkHash($params, $hash)
    {
       //allow current or previous hour
        return $hash === hashArray($params, date('Y-m-d H')) 
               || $hash === hashArray($params, date('Y-m-d H', time()-3600)) 
    }

$params=$_GET;
$hash = isset($params['hash']) ? $params['hash'] : '';
unset($params['hash']);
checkHash($params, $hash); 
```

# iphone - 委托方法内部的选择器触发两次

> ID：15391712
> 
> 赞同：1
> 
> 时间：2013-03-13T16:59:33.080
> 
> 标签：iphone, objective-c, static-libraries

触发我的静态库的委托方法后会出现一个奇怪的问题。首先，该项目有一个子项目，它是一个静态库（xcode 4.6 ios 6.x）。静态库根据事件触发自己的委托。App 实现了静态库的委托方法。在实现中，我使用以下内容访问 UI 元素并触发其他事件。Didgetnotified 是 lib 的委托方法。

```
- (void)didGetNotified 
  {
   dispatch_async(dispatch_get_main_queue(), ^{
     [self parseData];

     NSNotificationCenter *notifyCenter = [NSNotificationCenter defaultCenter];

     [notifyCenter addObserver:self
                      selector:@selector(updateUI)
                          name:@"updateUIN"
                        object:nil];
   });
  }

  -(void) parseData {

   //parse data and its ready now and send notification

    [[NSNotificationCenter defaultCenter] postNotificationName:@"updateUIN" object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"updateUIN" object:nil];
    }

    -(void) updateUI {
     //this method gets fired twice mostly
     } 
```

问题是`updateUI`被调用了两次。我看不出我做错了什么。与线程有关吗？静态库委托不在主线程上。但我在主线程上使用调度。有人可以解释一下吗？预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:14:42.990

经过大量调试后，我发现添加 oberserver 实际上发生了两次。解决方案是在添加 oberserver 之前删除它，以防 WIFI 断开连接并且日期流通过 3G，在这种情况下，我的代表被解雇了两次并注册了 oberver 2 次。

```
 [[NSNotificationCenter defaultCenter] removeObserver:self name:@"updateUIN" object:self];

 NSNotificationCenter *notifyCenter = [NSNotificationCenter defaultCenter];
 [notifyCenter addObserver:self
                  selector:@selector(updateUI)
                      name:@"updateUIN"
                    object:self]; 
```

# php - 连接不同服务器上的两个表

> ID：15391714
> 
> 赞同：0
> 
> 时间：2013-03-13T16:59:39.687
> 
> 标签：php, database, join, windows-server-2003

我们在两台不同的服务器上有两个数据库（都是 Server 2003）——我将它们称为 A 服务器和 B 服务器。我们在这里需要做的是将 A 服务器上的一个表和 B 上的另一个表连接在一起。使用 php，我们可以成功地从 A 服务器上的表中提取数据......但是在将其与 B 服务器上的另一个表连接时遇到了麻烦（反之亦然）。

我们将主要使用的服务器是A服务器。这种加入只能使用 php 函数和查询来完成吗？还是我们必须在 A 服务器上做些什么才能连接到 B 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:17:00.840

您最好的选择可能是从服务器 B 中提取过滤数据，将其保存在某种列表变量中，然后构建 SQL 查询以从服务器 A 中提取数据以及`where COLUMN_X in ( FILTER_FROM_B )`.

如果不了解您的表结构以及您如何尝试加入它们，我真的无法给您更具体的答案。

# amazon-web-services - aws CloudFormation AWS::EC2::Instance BlockDeviceMappings 和 Volumes

> ID：15391718
> 
> 赞同：16
> 
> 时间：2013-03-13T16:59:58.783
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudformation

我对两个 AWS::EC2::Instance 属性： `BlockDeviceMappings`和`Volumes`.

我已经阅读了很多次文档，但仍然没有真正理解其中的区别。

这是我的模板：

```
 {
 "AWSTemplateFormatVersion" : "2010-09-09",

 "Description" : "kappoowTest",

 "Mappings" : {
     "AmazonLinuxAMI" : {
         "eu-west-1" :
             { "AMI" : "ami-d8f9f1ac" },
         "us-west-1" :
             { "AMI" : "ami-b63210f3" }
     }
 },

 "Resources" : {
     "SomeInstance" :{
         "Type" : "AWS::EC2::Instance",
         "Properties" : {
             "AvailabilityZone" : "eu-west-1a",
             "BlockDeviceMappings" : [
                 {
                     "DeviceName" : "/dev/sdc",
                     "Ebs" : { "VolumeSize" : "50" }
                 },
                 {
                     "DeviceName" : "/dev/sdd",
                     "Ebs" : { "VolumeSize" : "100" }
                 }
             ],
             "DisableApiTermination" : "true",
             "EbsOptimized" : "true",
             "ImageId" : { "Fn::FindInMap" : [ "AmazonLinuxAMI", { "Ref" : "AWS::Region" }, "AMI" ]},
             "InstanceType" : "m1.large",
             "KeyName" : "mongo_test",
             "Monitoring" : "true",
             "SecurityGroups" : [ "default" ],
             "Volumes" : [
                 { "VolumeId" : { "Ref" : "NewVolume" }, "Device" : "/dev/sdk" }
             ]
         }
     },

     "NewVolume" : {
         "Type" : "AWS::EC2::Volume",
         "Properties" : {
             "Size" : "100",
             "AvailabilityZone" : "eu-west-1a"
         }
     }
 }} 
```

在这里，我创建了 3 卷。2 与

```
 "BlockDeviceMappings" : [
                 {
                     "DeviceName" : "/dev/sdc",
                     "Ebs" : { "VolumeSize" : "50" }
                 },
                 {
                     "DeviceName" : "/dev/sdd",
                     "Ebs" : { "VolumeSize" : "100" }
                 }
             ] 
```

另一个有：

```
"Volumes" : [
    { "VolumeId" : 
          { "Ref" : "NewVolume" }, "Device" : "/dev/sdk" }
 ] 
```

CloudFormation 运行良好，但我看不出有什么不同。

有人能告诉我哪种方法更好地将 EBS 卷添加到 EC2 实例，这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T21:19:13.457

使用 BlockDeviceMappings，您不仅可以挂载 ebs，还可以挂载临时存储。Volumes 只是 ebs 卷，并且提供了更好的选项（例如选择 AZ，或者如果您想使用 PIOP，则指定 IOP）。如果您想要的只是简单的 ebs 卷，那么没有区别。

# asp.net - 在c#中使用word模板创建word文档

> ID：15391719
> 
> 赞同：0
> 
> 时间：2013-03-13T16:59:59.537
> 
> 标签：asp.net, sql-server, ms-word, mailmerge, word-template

我正在.net平台上工作。我创建了一个单词模板（.dotx）并在其中添加了合并字段。我正在从数据库列值替换合并字段。现在我想在合并字段上循环。例如：- 我有名为 <DepartmentID> 和 <DepartmentName> 的合并字段。我正在从名为“tblDepartment”的数据库表中获取数据，该表有两列“DepID”和“DepName”。该表有 5 行。我想循环这些合并字段。

我想显示这样的文件。在执行 docx 文件之前是：- < DepartmentID > < DepartmentName >

代码执行后：- DepID DepName

```
 1                 DotNet

                               2                 Java

                               3                 PHP 
```

这是我的代码：

```
 foreach (Word.Field myMergeField in wordDoc.Fields)
        {
            Word.Range rngFieldCode = myMergeField.Code;
            String fieldText = rngFieldCode.Text;
            // ONLY GETTING THE MAILMERGE FIELDS
            if (fieldText.StartsWith(" MERGEFIELD"))
            {
                Int32 endMerge = fieldText.IndexOf("\\");
                Int32 fieldNameLength = fieldText.Length - endMerge;
                String fieldName = fieldText.Substring(11, endMerge - 11);
                fieldName = fieldName.Trim().Replace("\"", "");
                if (fieldName == "DepartmentID")
                {
                    myMergeField.Select();
                    wordApp.Selection.TypeText("DepartmentID");
                }
                if (fieldName == "DepartmentName")
                {
                    EAccreditationEntities dbModel = new EAccreditationEntities();
                    var q = (from p in dbModel.Departments select p).ToList();
                    //here q has all data from database , have columns (ID and Name of Department)
                     myMergeField.Select();
                    wordApp.Selection.TypeText("DEPNAME");
                }
            } 
```

问题是，我的文档有五页，第 5 页的合并字段和 sql 查询返回 5 行。当我执行我的代码时，它在第 5 页显示第一条记录，然后使用 1、2、3、4 页内容创建 6、7、8、9 页，在第 10 页显示第二条记录，依此类推....过程创建 25 页的文档文件。

但我只想在第 5 页显示所有数据。并且不想创建额外的页面。

# java - 简单的颜色识别程序

> ID：15391720
> 
> 赞同：-4
> 
> 时间：2013-03-13T17:00:00.390
> 
> 标签：java, swing, colors, click, pattern-matching

我想用Java编写一个简单的颜色识别程序。我希望这将在后台运行，这样我就可以更改窗口。然后，当屏幕上出现某种用户指定的颜色时，我希望光标导航到，然后单击该颜色出现的位置。

问题是我不知道从哪里开始这种性质的项目。我这样做纯粹是为了我自己的享受/面试准备，并且不希望使用任何外部 API。

任何人都可以就我如何开始这样的项目提供任何指导吗？然后我可以着手充实它并提出更具体的问题。我可以在这里使用哪些导入，我怎样才能最好地识别屏幕上的颜色？如何以编程方式移动并导致光标单击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:02:54.600

这是一个非常大的问题，但是[Sikuli](http://www.sikuli.org/)可以做到这一点，而且它是用 Java 和 Python 编写的，你可以看看它的代码。

# ruby - 使用正则表达式解析字符串

> ID：15391724
> 
> 赞同：0
> 
> 时间：2013-03-13T17:00:21.630
> 
> 标签：ruby, regex

我有一个字符串，它是一个函数调用。我想解析它并获取参数：

```
"add_location('http://abc.com/page/1/','This is the title, it is long',39.677765,-45.4343,34454,'http://abc.com/images/image_1.jpg')" 
```

它共有6个参数，是url、整数和小数的混合体。我无法弄清楚我将使用的 split 方法的正则表达式。请帮忙！这就是我想出的——这是错误的。

```
/('(.*\/[0-9]*)',)|([0-9]*,)/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:52:23.370

像 CSV 一样处理字符串可能会起作用：

```
require 'csv'
str = "add_location('http://abc.com/page/1/','This is the title, it is long',39.677765,-45.4343,34454,'http://abc.com/images/image_1.jpg')"
p CSV.parse(str[13..-2], :quote_char => "'").first
# => ["http://abc.com/page/1/", "This is the title, it is long", "39.677765", "-45.4343", "34454", "http://abc.com/images/image_1.jpg"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:18:33.253

假设所有非数字参数都用单引号引起来，如您的示例

```
string.scan( /'.+?'|[-0-9.]+/ ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:11:36.527

你真的不想用正则表达式解析这么复杂的东西；从长远来看，它只是行不通。我不确定您是否只想解析这个字符串，或者这种形式的字符串是否有很多确切内容不同的字符串。如果您提供有关最终目标的更多信息，您可能可以获得更详细的帮助。

对于在一般情况下解析这种复杂的事物，您确实希望对字符串执行适当的标记化（即词法分析）。在过去使用 Ruby 时，我在使用 Citrus 时有过很好的经验。它是解析复杂标记/语言的好工具，就像您尝试做的那样。你可以在这里找到更多关于它的信息：

[https://github.com/mjijackson/citrus](https://github.com/mjijackson/citrus)

# css - 如何让一个单词在一定宽度的 Span 中换行？

> ID：15391725
> 
> 赞同：1
> 
> 时间：2013-03-13T17:00:23.790
> 
> 标签：css, html

如何让一个单词在一定宽度的 Span 中换行？

这是我当前的代码，但是我尝试了很多东西......但是文本不断溢出跨度而不是

```
<span style="display:inline-block;width: 70px;word-wrap: break-word;">My Dashboard</span> 
```

有任何想法吗？

谢谢

# web-applications - IE 8：仅显示安全内容

> ID：15391728
> 
> 赞同：0
> 
> 时间：2013-03-13T17:00:28.583
> 
> 标签：web-applications, ssl, apache-shindig

我手动修改了一个 Shindig App 的 XML 文件，以便它可以从而`https://<my url>`不是`http://<my url>`.

当我通过 SSL 导航到 Shindig 应用程序所在的页面时，我得到了`"Do you want to view only the webpage content that was delivered securely?"`

当我单击`No`时，我看到 App 呈现为`"The webpage cannot be found."`

但是，我可以导航到 Shindig App 的 XML 文件。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:51:21.733

打开一个提琴手，并观察所有的请求。文件：js、css、html、图像，所有这些都必须通过 https 提供，这样警告才会消失。我想现在 html 正在为 https 提供服务，但其他所有内容仍作为常规 http 包含在内。

# node.js - 如何在 express/mongoose 应用程序中正确构造数据库调用？

> ID：15391734
> 
> 赞同：1
> 
> 时间：2013-03-13T17:00:49.797
> 
> 标签：node.js, mongodb, express

从 Express 访问 mongodb 数据库的正确方法是什么？

现在，我包括我的数据库处理程序`db.js`，它包含`mongoose.connect( 'mongodb://localhost/db' );`每次我需要进行数据库调用的时间。

我应该使用相同的连接并通过回调传递我的 db 对象，还是每次都可以包含我的 db 文件？

换句话说，是否`mongoose.connect`总是重复使用相同的连接？

**编辑**：我的源代码[在这里](https://github.com/pobourgeois/Notes)是公开的，我对 nodejs/express 应用程序相当陌生，我不确定我的应用程序结构是否正确......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:12:27.470

您只需要连接到您的数据库一次。在您的其他文件中，您需要包含您的模型并使用它们来读取/写入您的数据库集合。

编辑：查看您的代码——为什么不将连接移动到初始化脚本中，然后包含 db.js 以访问您的模型？

# css - 在 CSS @import 指令中包含 LESS 变量

> ID：15391736
> 
> 赞同：4
> 
> 时间：2013-03-13T17:00:53.757
> 
> 标签：css, less

我想在我的 @import 语句的字符串内容中包含一个 LESS 变量。. .

```
@my-font-name: Georgia;
@import "http://fonts.googleapis.com/css?family=Open+Sans:400,300,600|@{my-font-name}:400,300,700"; 
```

但是，在处理后的 CSS 中，没有任何转换，只是看起来一样：

```
@import "http://fonts.googleapis.com/css?family=Open+Sans:400,300,600|@{my-font-name}:400,300,700"; 
```

我希望它像这样处理：

```
@import "http://fonts.googleapis.com/css?family=Open+Sans:400,300,600|Georgia:400,300,700"; 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T18:34:15.800

我是 less.js 的核心团队，`@import`语句中的变量是在 . [Less.js v1.4.0-b1](https://github.com/cloudhead/less.js/blob/master/dist/less-1.4.0-beta.js)

这应该可以让您完成您想要做的事情：

```
@my-font-name: Georgia;
@import "http://fonts.googleapis.com/css?family=Open+Sans:400,300,600|@{my-font-name}:400,300,700"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:54:56.517

您目前无法在 Less 中执行此操作，但看起来该功能可能即将推出。

更准确地说，它在 less.js 1.4 alpha 中。

[https://github.com/cloudhead/less.js/issues/410](https://github.com/cloudhead/less.js/issues/410)

# visual-studio-2010 - 解决方案中多个项目的通用设置文件

> ID：15391739
> 
> 赞同：0
> 
> 时间：2013-03-13T17:00:59.687
> 
> 标签：visual-studio-2010, load-testing

Visual Studio 项目结构 - [https://www.box.com/s/np59x20f939n3z1g5dvc](https://www.box.com/s/np59x20f939n3z1g5dvc)

我有多个项目 A、B 等，它们具有负载测试（依次调用相应的 Web 测试）和每个单独的设置文件。我正在使用这些设置文件来存储有关 Web 服务器的信息。

[设置.xml]

```
<?xml version="1.0" encoding="utf-8" ?>
<AppSettings>
  <WebServer>www.abc.com</WebServer>
  <Proxy></Proxy>
</AppSettings> 
```

我将此 xml 文件添加为 Web 测试中的数据源，如下所示[https://www.box.com/s/53vy0ryvye53m76abuun](https://www.box.com/s/53vy0ryvye53m76abuun)

项目 C 有一个负载测试，它调用其他项目的 Web 测试（我这里只指项目 A、B 等）。项目 C 的设置文件如下所示。

```
<?xml version="1.0" encoding="utf-8" ?>
<AppSettings>
  <WebServer>www.SomeOtherWebsite.com</WebServer>
  <Proxy></Proxy>
</AppSettings> 
```

我希望此设置文件用于运行 Loadtest-C，即此设置文件必须覆盖每个项目中的各个设置文件。

我有时想运行 LoadTest-C，有时运行 LoadTest-A 或 LoadTest-B。因此，我不想每次都更改单个设置文件。

有没有办法可以做到这一点？

我发现使用 xml 文件是更简单的方法。但是，如果有更好的方法，请建议我。

我在网上搜索过，我发现唯一相关的是 [整个解决方案的通用 Settings.settings 文件](https://stackoverflow.com/questions/5792997/common-settings-settings-file-for-entire-solution)。我有很多类似于 A、B 等的项目，我不想按照那里的答案中的建议更改每个项目中的链接。

[我从未尝试过编码的网络测试。所以我不确定这种方法是否有效。] [而且我对性能测试比较陌生]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:31:10.673

我已经找到了解决方案。我没有使用 Settings.xml 文件，而是将该 xml 文件中的条目作为上下文参数添加到负载测试中，并消除了在单个 Web 测试中使用数据源。因此，当我运行 web 测试时，它所具有的 web 服务器名称参数由负载测试中的 context 参数提供。

这可能不是最好的解决方案，但这似乎对我有用。

# recursion - Erlang：使用递归从列表中选择唯一项目

> ID：15391740
> 
> 赞同：6
> 
> 时间：2013-03-13T17:01:00.883
> 
> 标签：recursion, erlang

给定 Erlang 中的任何列表，例如：

```
L = [foo, bar, foo, buzz, foo]. 
```

如何使用递归函数仅显示该列表的唯一项目？我不想使用内置函数，例如列表函数之一（如果存在）。

在我的示例中，我想去的地方将是一个新列表，例如

```
SL = [bar, buzz]. 
```

我的猜测是，在应用过滤器之前，我会先使用快速排序功能对列表进行排序？

任何的意见都将会有帮助。该示例是 Cesarini 和 Thompson 的优秀“Erlang Programming”一书第 3 章中练习的变体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:56:34.247

我建议这个：

```
unique(L) ->
    unique([],L).
unique(R,[]) -> R; 
unique(R,[H|T]) ->
    case member_remove(H,T,[],true) of
        {false,Nt} -> unique(R,Nt);
        {true,Nt} -> unique([H|R],Nt)
    end.

member_remove(_,[],Res,Bool) -> {Bool,Res};
member_remove(H,[H|T],Res,_) -> member_remove(H,T,Res,false);
member_remove(H,[V|T],Res,Bool) -> member_remove(H,T,[V|Res],Bool). 
```

member_remove 函数一次性返回剩余的尾部，而不会检查所有出现的元素是否重复和测试结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T09:40:32.257

我可以这样做:)

```
get_unique(L) ->
    SortedL = lists:sort(L),
    get_unique(SortedL, []).

get_unique([H | T], [H | Acc]) ->
    get_unique(T, [{dup, H} | Acc]);
get_unique([H | T], [{dup, H} | Acc]) ->
    get_unique(T, [{dup, H} | Acc]);
get_unique([H | T], [{dup, _} | Acc]) ->
    get_unique(T, [H | Acc]);
get_unique([H | T], Acc) ->
    get_unique(T, [H | Acc]);
get_unique([], [{dup, _} | Acc]) ->
    Acc;
get_unique([], Acc) ->
    Acc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:24:25.307

我认为想法可能是：检查您是否已经看到列表的头部。如果是这样，跳过它并递归检查尾部。如果不是 - 将当前头部添加到结果中，以“看到”并递归检查尾部。检查您是否已经看到该项目的最合适的结构已设置。

所以，我建议如下：

```
 remove_duplicates(L) -> remove_duplicates(L,[], sets:new()). 

  remove_duplicates([],Result,_) -> Result;
  remove_duplicates([Head|Tail],Result, Seen) ->
    case sets:is_element(Head,Seen) of
      true -> remove_duplicates(Tail,Result,Seen);
      false -> remove_duplicates(Tail,[Head|Result], sets:add_element(Head,Seen))
    end. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:24:12.547

使用两个蓄能器。一个保留您目前看到的元素，一个保留实际结果。如果您是第一次看到该项目（不在“已见列表”中），请将该项目添加到两个列表并递归。如果您以前看过该项目，请在递归之前将其从结果列表 (Acc) 中删除。

```
-module(test).

-export([uniques/1]).

uniques(L) ->
    uniques(L, [], []).

uniques([], _, Acc) ->
    lists:reverse(Acc);
uniques([X | Rest], Seen, Acc) ->
    case lists:member(X, Seen) of
        true -> uniques(Rest, Seen, lists:delete(X, Acc));
        false -> uniques(Rest, [X | Seen], [X | Acc])
    end. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-03T10:49:08.850

```
unique(List) ->
    Set = sets:from_list(List),
    sets:to_list(Set). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T00:31:32.077

试试下面的代码

```
-module(util).

-export([unique_list/1]).

unique_list([]) -> [];
unique_list(L)  -> unique_list(L, []).

% Base Case
unique_list([], Acc) -> 
    lists:reverse(Acc);

% Recursive Part 
unique_list([H|T], Acc) ->
    case lists:any(fun(X) -> X == H end, T) of
        true  -> 
            unique_list(lists:delete(H,T), Acc);
        false -> 
            unique_list(T, [H|Acc])
end. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T20:13:52.427

此解决方案仅过滤掉列表中的重复项。可能需要建立在它做你想做的事。

```
删除重复项（列表）->
    列表：反向（删除（列表，[]））。

删除（[]，这个）->这个；
移除（[A|Tail]，Acc）->
    删除（删除全部（A，尾巴），[A|Acc]）。

delete_all(Item, [Item | Rest_of_list]) ->
    delete_all(Item, Rest_of_list);
delete_all(Item, [Another_item| Rest_of_list]) ->
    [另一个项目 | delete_all(Item, Rest_of_list)];
删除全部（_，[]）-> []。

```

**编辑**

* * *

```
Microsoft Windows [版本 6.1.7601]
版权所有 (c) 2009 Microsoft Corporation。版权所有。

C:\Windows\System32>erl
Eshell V5.9（使用 ^G 中止）
1> 列表 = [1,2,3,4,a,b,e,r,a,b,v,3,2,1,g,{红,绿},d,2,5,6,1 ,4,6,5,{红,绿}]。
[1,2,3,4,a,b,e,r,a,b,v,3,2,1,g,
 {红，绿}，
 d,2,5,6,1,4,6,5,
 {红，绿}]
2> 删除重复项（列表）。
[1,2,3,4,a,b,e,r,v,g,{红,绿},d,5,6]
3>

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-02T14:30:13.807

唯一（L）-> 集：to_list（集：from_list（L））。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-13T18:55:15.210

最简单的方法是使用带有“累加器”的函数来跟踪您已经拥有的元素。所以你会写一个像

% unique_acc（累加器，List_to_take_from）。

通过不导出累加器版本，而是导出其调用者，您仍然可以拥有一个干净的功能：

```
-module(uniqueness).
-export([unique/1]).

unique(List) ->
    unique_acc([], List). 
```

如果要从中获取的列表为空，则您已完成：

```
unique_acc(Accumulator, []) ->
    Accumulator; 
```

如果不是：

```
unique_acc(Accumulator, [X|Xs]) ->
   case lists:member(X, Accumulator) of
       true  -> unique_acc(Accumulator, Xs);
       false -> unique_acc([X|Accumulator], Xs)
   end. 
```

需要注意的两件事：
-- 这*确实*使用了一个列表 BIF -- `lists:member/2`。不过，您可以轻松地自己编写。
-- 元素的顺序是颠倒的，从原始列表到结果。如果你不喜欢这样，你可以定义`unique/1`为`lists:reverse(unique_acc([], List))`. 或者更好的是，自己编写一个反向函数！（这很简单）。

# ios - Cocos2D：如何只用一个精灵调整 CCMenuItem？

> ID：15391741
> 
> 赞同：0
> 
> 时间：2013-03-13T17:01:01.213
> 
> 标签：ios, cocos2d-iphone, sprite, ccmenuitem

我如何调整 CCMenuItemSprite 以仅支持一个精灵？

目前我有：

```
[CCMenuItemSprite itemWithNormalSprite:one selectedSprite:selectedOne] 
```

但想拥有：

```
[CCMenuItemSprite itemWithNormalSprite:one] 
```

**编辑：我想修改 CCMenuItem 以仅使用一个 CCSprite 而不是两个。所以我还需要改变内部方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:02:49.233

您可以使用与所选精灵相同的（正常）精灵。单击后，该按钮将不执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:03:11.820

你可以使用

```
[CCMenuItemSprite itemWithNormalSprite:one selectedSprite:one] 
```

这样，当您选择精灵时，什么都不会发生

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:44:47.430

试试这个，只是改变选定精灵的颜色。

```
CCSprite *sprite1   = [CCSprite spriteWithFile:@"Button.png"];
CCSprite * sprite2  = [CCSprite spriteWithFile:@"Button.png"];
sprite2.color = ccc3(128, 128, 128);

CCMenuItemImage *itemEasyLevelImage = [CCMenuItemImage  itemWithNormalSprite:sprite1
                                                              selectedSprite:sprite2
                                                                       block:^(id sender){}]; 
```

# python - python搜索hd上的文件并复制到usb

> ID：15391742
> 
> 赞同：1
> 
> 时间：2013-03-13T17:01:07.390
> 
> 标签：python, windows

我正在寻找一种在 python 中搜索 %systemdrive% 以获取 pdf 文件并将它们复制到我的 USB 驱动器的方法

xcopy 批量用于工作

xcopy “$systemdrive%*.jpg” %~d0\%computername% /s/c/q/r/h

但是windows7中的通配符将不再起作用，因此在python中寻找替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:17:51.387

试试这个，可以帮助你：

```
import os
import shutil
for dirname, dirnames, filenames in os.walk(r'C:\znc\resp\A'):
    for filename in filenames:
        if os.path.splitext(filename)[-1] == '.pdf':
            shutil.copy2(r'%s\%s' %(dirname,filename), r'D:\resp\B') 
```

这行得通，但我不知道它是否是最好的

# python - python中的平方根

> ID：15391748
> 
> 赞同：3
> 
> 时间：2013-03-13T17:01:17.293
> 
> 标签：python

```
>>> import math
>>> math.sqrt(4)
2.0 
```

为什么 Python 不给出负平方根（因为 -2 也是 4 的平方根）？
我怎样才能让 Python 给出负平方根？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T17:18:53.260

如果你需要一个数字的所有根，你可以使用[numpy.root](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roots.html)

```
>>> import numpy
>>> def root(n, r):
    p = [1] + [0] * (r - 1) + [-n]
    return numpy.roots(p)

>>> root(4, 2)
array([ 2., -2.])
>>> root(-4, 2)
array([ 0.+2.j,  0.-2.j])
>>> root(1, 3)
array([-0.5+0.8660254j, -0.5-0.8660254j,  1.0+0.j       ]) 
```

另一种选择是使用[Sympy 多项式模块](http://docs.sympy.org/0.6.7/modules/polynomials.html)

```
>>> from sympy import symbols, solve
>>> solve(x**2 - 4)
[-2, 2]
>>> from sympy import symbols, solve
>>> solve(x**2 - 4)
[-2, 2]
>>> solve(x**3 - 1)
[1, -1/2 - sqrt(3)*I/2, -1/2 + sqrt(3)*I/2]
>>> solve(x**2 + 4)
[-2*I, 2*I] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T17:04:13.770

怎么样：

```
def my_sqrt(x):
    root1 = math.sqrt(x)
    root2 = -root1
    return root1,root2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T17:31:34.220

这不是 Python 或平方根函数所独有的。每当我们处理非“内射”函数的逆时，就会出现这个问题。见[http://en.wikipedia.org/wiki/Injective_function](http://en.wikipedia.org/wiki/Injective_function)

即，任何函数的逆函数，其中 x 的多个值映射到 y 的相同值，y=x**2 只是一个示例。

您可以对许多其他函数提出同样的抱怨，例如逆正弦 (arcsin)。使 sin(x)=0.5 的“x”的值是多少？即使我们只考虑 +/- 180 度 (+/- pi) 的跨度，也有两种解决方案，x=30 度和 x=150 度。但是逆正弦的实现总是只返回 30 度 (pi/6)。如果我们想要“其他逆”，那么我们通常只使用我们对特定函数的了解来获得它。

对于反平方（sqrt），它就像在它前面拍一个一元减号一样简单。对于逆sin，取补角，例如pi-arcsin(0.5)。

# scala - Scala 集合中的结构类型参数

> ID：15391750
> 
> 赞同：1
> 
> 时间：2013-03-13T17:01:23.537
> 
> 标签：scala, scala-collections, structural-typing

***免责声明：*** *这是一个关于什么是**可能**的问题，而不是在实践中推荐什么。*

假设您有以下课程：

```
case class point1(x: Int, y:Int)
case class point2(x: Int, y:Int)
case class point3(x: Int, y:Int) 
```

并且您有包含每个类的一些数量的列表

```
val points1 = List[point1](/*Can be empty for this example*/)
val points2 = List[point2]()
val points3 = List[point3]() 
```

是否可以使用常用技术（如`++`, `:::`）或`.union(..)`不定义所有类扩展的共同特征来创建可以包含所有三种点类型的结构类型列表，即

```
var points: List[{def x: Int; def y: Int}] = 
    points1 ::: points2 ::: points3 
```

我知道如上所述，`:::`运算符返回一个`List[Product]`. 我认为这是向 Scala 编译器提供正确提示的问题，因为以下代码确实会生成正确类型的列表：

```
var points: ListBuffer[{def x: Int; def y: Int}] = List[{def x: Int; def y: Int}]()
points1.foreach( e => {
    val p: {def x: Int; def y: Int} = e;
    points.append(p);
})
points2.foreach( e => {
    val p: {def x: Int; def y: Int} = e;
    points.append(p);
}) 
```

是否有任何提示可以帮助 Scala 编译器选择正确的类型`:::`并生成指定结构类型的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:18:38.167

```
(points1 : List[{val x : Int; val y : Int}]) ::: points2 ::: points3 
```

应该管用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:24:51.740

如果要编写以下代码：

```
var points: List[{def x: Int; def y: Int}] = 
points1 ::: points2 ::: points3 
```

有用：

```
implicit def typer[B >: A, A <: { def x: Int; def y: Int }](t: List[B]): List[A] = t

var points: List[{def x: Int; def y: Int}] = 
points1 ::: points2 ::: points3 
```

# entity-framework - 将代码第一个应用程序部署到 AppHarbor

> ID：15391751
> 
> 赞同：1
> 
> 时间：2013-03-13T17:01:27.257
> 
> 标签：entity-framework, appharbor

我已经将一个应用程序部署到 appharbor，启用了包恢复，我可以看到包正在恢复，但构建仍然找不到 EntityFramework dll 和其他一些。这是日志的一部分：

成功安装“DataAnnotationsExtensions 1.1.0.0”。成功安装“DotNetOpenAuth.AspNet 4.0.3.12153”。成功安装“DotNetOpenAuth.OAuth.Consumer 4.0.3.12153”。成功安装“DotNetOpenAuth.Core 4.0.3.12153”。成功安装“DotNetOpenAuth.OAuth.Core 4.0.3.12153”。成功安装“DotNetOpenAuth.OpenId.Core 4.0.3.12153”。成功安装“DotNetOpenAuth.OpenId.RelyingParty 4.0.3.12153”。成功安装“EntityFramework 5.0.0”。

主要参考“EntityFramework”。2>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5)：警告 MSB3245：无法解析此引用。找不到程序集“EntityFramework”

有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:37:14.913

我不得不手动更改引用，现在它可以工作了。它正在寻找 ..\packages 它应该是“packages”。看起来 appharbor 的 EntityFramework 5 有一些问题，我必须更改为 4.3.1 才能使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:12:09.870

似乎应用程序在错误的位置寻找 dll。您能否验证对 EntityFramework 的项目引用是否指向“包”目录中的 dll（而不是 GAC 的程序集）？

另一位开发人员[遇到了类似的问题](http://support.appharbor.com/discussions/problems/6250-build-error-could-not-resolve-this-reference-could-not-locate-the-assembly-entityframework)，并通过修复参考路径解决了这个问题。

# html - 使用 HTML 控制电话功能

> ID：15391757
> 
> 赞同：0
> 
> 时间：2013-03-13T15:24:22.003
> 
> 标签：html

我可以用 HTML 控制我的手机功能吗？

例如：

```
<a href="tel:+1800229933">Some Service</a> 
```

会拨打那个号码。现在我想知道是否可以将此号码添加到我的通讯录中，并将名称字段填充为“某些服务”。我在哪里可以获得 TEL: 和类似的可点击链接方法？

**注意：** 问题的原始来源在[这里](http://androidforums.com/android-applications/291675-controlling-phone-functions-html-contacts-list.html)。

# json - 使用 asp Xtreme 进行简单的 json 解析

> ID：15391761
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:07.377
> 
> 标签：json, asp-classic

只是被一件小事弄糊涂了。

我目前正在`{ "data": [ { "response": "true" } ] }`使用以下代码。

但我简单的想得到`{ "response": "true" }`。

我尽我所能尝试了一切，但我一直失败。

如果您能帮助我，我将不胜感激。

```
 Set Dataset = JSON.parse("{ ""data"": [] }")        
            Set Record = JSON.parse("{}")
                Record.set "response", "true"
                Dataset.data.push(Record)
            Set Record = nothing

            Data = JSON.stringify(Dataset, null, 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:09:41.610

```
 Set Record = JSON.parse("{}")
            Record.set "response", "true"
 Data = JSON.stringify(Record, null, 2) 
```

我假设 JSONObject.data.push 将记录添加到未命名的数组中。

# c# - ASP.NET 动态数据站点：强制第一列按字母顺序排列

> ID：15391762
> 
> 赞同：1
> 
> 时间：2013-03-13T17:02:08.940
> 
> 标签：c#, asp.net, asp.net-dynamic-data

我在这里部署了一个 ASP.NET 动态数据站点：[https ://ess.orthman.com/PhoneListWeb/](https://ess.orthman.com/PhoneListWeb/)

列可以通过单击列名称按字母顺序排列，但是如何设置站点以自动按字母顺序排列第一列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:01:55.387

您有许多可用的选项，具体取决于您想要订购的机器。

**1.**您可以在数据库服务器上创建一个存储过程，该存储过程将`SELECT * FROM ... ORDER BY ...`在您的 .dbml 中使用

**2.**您提到您正在使用从 .dbml 生成的 Linq to SQL 类，所以我假设您`LinqDataSource`在 .aspx 页面中使用。

在您的设计器中，您可以选择配置数据源`LinqDataSource`：

![配置 LinqDataSource](../Images/809c58d7b6f009a203b432361f830a0b.png)

然后从 .dbml 中选择上下文，在下一个屏幕上，您可以选择 Order By：

![LinqDataSource 的 Order By 选项](../Images/160472347ab45aeac6215455552dcfd7.png)

**3.**使用[动态数据网站](http://msdn.microsoft.com/en-us/library/cc488469.aspx)，您在设计时没有特定表结构的优势。因此，您需要创建一个将在运行时发生的排序。您可以编辑您的`DynamicData\PageTemplates\List.aspx.cs`以包括以下内容：

```
protected void Page_Load(object sender, EventArgs e)
{
    Title = table.DisplayName;

    // Disable various options if the table is readonly
    if (table.IsReadOnly)
    {
        GridView1.Columns[0].Visible = false;
        InsertHyperLink.Visible = false;
        GridView1.EnablePersistedSelection = false;
    }

    // Add our sort to the first data column.
    if (!Page.IsPostBack)
    {
        GridView1.Sort(table.Columns[0].Name, SortDirection.Ascending);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T19:26:51.580

第一个也是简单的答案是
在获取数据（表单数据库）之前使用 order by 对数据源进行排序，或者在获取对象之后使用 linq 排序对象......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:03:56.830

从 dbml 绑定数据之后 您可能有一个 linq 语句来将数据绑定到 Grid 或 List。

编写类似于 Same 的代码。

在下面的示例代码中，我刚刚添加了绑定数据的排序

按公司名称升序排序

```
var Company = from Company in _c.Company_Name
             orderby _c.Company_Name 
             select Company; 
```

按公司名称降序排序

```
var Company = from Company in _c.Company_Name
             orderby _c.Company_Name descending
             select Company; 
```

试试这个希望它会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:54:26.553

您可以使用 DisplayColumnAttribute 来指定应该用于排序的列。有一种简单易行的排序方法，还有一种更复杂、更强大的方法。我会给你两个。

首先是简单的方法，展示如何对实体进行排序的示例。在此示例中，地址表（父表）中的 PostalCode 列用于对地址进行排序。

```
using System;
using System.Web.DynamicData;
using System.ComponentModel.DataAnnotations;
using System.Globalization;

[DisplayColumn("City", "PostalCode", false)]
public partial class Address
{

} 
```

如果您的排序需求更复杂，请尝试 C# Bits 博客中的这种更强大的方法：[设置初始排序顺序](http://csharpbits.notaclue.net/2011/01/setting-initial-sort-order-dynamic-data.html)

此链接记录了[DisplayColumnAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displaycolumnattribute.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T13:56:05.730

如果您正在使用`ASP.NET 4.0`，您可以考虑`AllowSorting = true`带有新的排序相关样式属性`SortedAscendingHeaderStyle`和其他的 GridView。

示例`.ASPX`：

```
<asp:GridView 
    ID="gvOffices" 
    runat="server" 
    DataSourceID="GridDataSource"
    AllowPaging="true" 
    AllowSorting="true" 
    PageSize="10" 
    CssClass="listtable" 
    AutoGenerateColumns="false"
    EnablePersistedSelection="true"
    OnSelectedIndexChanged="OnFilterSelectedIndexChanged"
    SortedAscendingHeaderStyle-CssClass="sortasc-header" 
    SortedDescendingHeaderStyle-CssClass="sortdesc-header">
</asp:GridView> 
```

示例`.CSS`：

```
/*#region Table Header Sort Image */
.sortasc-header a {
    background: url(Images/arrowup.gif) right center no-repeat;
}

.sortdesc-header a {
    background: url(Images/arrowdown.gif) right center no-repeat;
}
/*#endregion Table Header Sort Image */ 
```

`AllowSorting`提示 GridView 使用`LinkButton`控件呈现其标题行，当单击这些控件时，会导致回发并启动排序过程。新属性允许根据当前顺序定义列标题的视觉外观。

您可以在[MSDN](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.gridview.sortedascendingheaderstyle.aspx)上找到更多信息。

**编辑：**

如果只想按第一列排序，则应将其他列`SortExpression`的控制属性设置为空白。`DynamicField`

```
<asp:DynamicField DataField="ListCity" HeaderText="City" SortExpression="" /> 
```

# api - 下载总目录时截断结果

> ID：15391767
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:22.763
> 
> 标签：api

我继承了另一个开发人员构建的项目，该项目尝试从 Netflix API 下载和处理通用目录（REST 端点：catalog/titles/full?v=2.0）。我的客户抱怨结果被截断（甚至可能被截断 50%）。我在下载过程中没有收到任何错误消息。为什么响应会包含部分数据集，我该如何修复它？

旁注：我找不到 NETFLIXAPI 标记，也没有足够的声望点来添加它。也许其他人可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:40:35.380

2 分： 1\. 直到昨天，我每天都下载目录并且从未见过它被截断 2\. 更重要的是，Netflix 已弃用完整目录，因此您需要获取目录/dvd 和/或目录/流媒体

# iphone - 通过 segue 从 UITableViewCell 填充 DetailController

> ID：15391773
> 
> 赞同：2
> 
> 时间：2013-03-13T17:02:35.270
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, nsmanagedobject

我正在填充单元格，`UITableView`我`CoreData`有一个关于如何最好地将我需要的数据传输到我的问题`DetailController`（即`viewController`当单元格被点击时显示的）。

目前，在填充`UITableViewCell`s 时，我使用`indexPath`传递给单元格的内容`managedObject`从 Core Data 中检索适当的内容。在这个阶段，我只使用来自托管对象的一些信息（即姓名、年龄、性别）来更新单元格。

`UITableView`完全填充后，我希望允许用户选择一个`UITableViewCell`并显示一个`DetailController`显示更深入的信息（即姓名、年龄、性别、职业、体重、身高等）。当点击单元格时，我正在使用`-prepareForSegue`过渡到新提出的`DetailController`。

### 我的问题：

segue 的“发送者”是`UITableViewCell`（子类），但我只用我最初需要在较小的单元格中显示的信息填充了它。我是不是该

1.  向子类添加更多 iVar`UITableViewCell`并存储我需要的所有数据，
2.  在单元格上保留指向模型的指针 iVar`managedObject`
3.  还有什么我可能错过的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:13:51.920

使用我们在 Objective-c 中使用的[模型视图控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式，您的视图永远不应该知道您的数据模型。这意味着您`UITableViewCell`的 s 不应具有任何存储数据模型中对象的属性。`-tableView:cellForRowAtIndexPath`单元格应仅具有标签和视图作为属性，视图控制器在其方法或类似方法中使用模型中的数据填充这些属性

您将`UITableViewCell`对象作为发送者准备进行转场。您可以使用以下方法找出单元格的索引路径：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    NSIndexPath * selectedIndexPath = [self.tableView indexPathForCell:sender];
    ... 
```

然后，您可以使用此索引路径再次将您的模型对象从核心数据中拉出，并将其设置为下一个视图控制器上的属性，或者您需要做的任何事情来向前传递模型对象

# sql - 如何从子查询中为每一行选择最大日期

> ID：15391777
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:52.723
> 
> 标签：sql, tsql

假设我想选择超市中的 3 个畅销书。为此，我必须将每笔销售相加，以获得每种产品的总数：

```
SELECT TOP(3) *
FROM
(
   SELECT
   SUM(s.individual_sale) AS totalsales,
   p.productID AS ID,
   p.productName AS Name

   FROM
   sales s,
   products p

   WHERE
   1=1
   AND p.productID = s.productID

   GROUP BY
   p.productID,
   p.productName
   ) AS top_sellers

ORDER BY
top_sellers.totalsales DESC 
```

然后它返回给我这样的东西：

**ID..|.姓名。|.totalsales**

55.|.牛奶....|.1000

24.|.糖果。|.800

67.|.果汁...|.500

现在我想从这些项目中检索包含最后一次销售的第 4 列，例如查询每个项目的“MAX saledate”。我该如何做到这一点？

编辑：添加 MAX(s.saledate) 没有帮助。它会在所有行中检索像 2012 年 1 月 1 日这样的日期，但是如果我为上表的每个条目单独查询 MAX(s.saledate)，它会返回正确的日期...我的问题是，如何添加 MAX 列(s.saledate)，使用显示 3 个畅销书的相同查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:05:00.710

您可以添加`max(s.saledate)`到您的查询。不需要子查询。该语法`t1 join t2 on <predicate>`被认为比`from t1, t2 where <predicate>`.

```
select  top 3 sum(s.individual_sale) as totalsales
,       p.productID as ID,
,       p.productName as Name
,       max(s.saledate) as MaxSaleDate
from    sales s
join    products p
on      p.productID = s.productID
group by
        p.productID
,       p.productName
order by
        sum(s.individual_sale) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:07:01.003

```
SELECT TOP(3) *
FROM
(
   SELECT
   SUM(s.individual_sale) AS totalsales,
   p.productID AS ID,
   p.productName AS Name, 
   MAX(s.saledate) as MaxSaleDate

   FROM
   sales s,
   products p

   WHERE
   1=1
   AND p.productID = s.productID

   GROUP BY
   p.productID,
   p.productName
   ) AS top_sellers

ORDER BY
top_sellers.totalsales DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:07:41.667

> 添加`MAX(saledate)`到您现有的查询。

```
SELECT TOP(3) *
FROM
(
   SELECT
   SUM(s.individual_sale) AS totalsales,
   p.productID AS ID,
   p.productName AS Name,
   MAX(saleDate)

   FROM
   sales s,
   products p

   WHERE
   1=1
   AND p.productID = s.productID

   GROUP BY
   p.productID,
   p.productName
) AS top_sellers

ORDER BY
top_sellers.totalsales DESC 
```

# ruby-on-rails - Rspec - 如何通过调用它并检查对象的变化来测试方法

> ID：15391778
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:52.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd

我正在学习如何编写测试，所以我正在为我编写的一个小方法编写一个。我想调用这个方法，`update_user_region_id`我应该期待`user`对象发生变化。

```
def update_user_region_id(user_id, region_id)
  user = User.where(id: user_id).first
  region = Region.where(id: region_id).first
  return if user.nil?
  user.region_id = region_id
  user.region = region.name
  user.save!
end 
```

`update_user_region_id`是从另一个方法调用的方法（不确定这是否相关）。

对于我的测试，我写了：

```
it 'should update user region id' do
  user = Factory :user
  city = Factory :city
  expect{
    update_user_region_id(user.id, city.id)
  }.to change(user, :region_id)
end 
```

我不断收到以下错误：

```
undefined method `update_user_region_id' for #<RSpec::Core::ExampleGroup::Nested_1:0x007f9e0a57f490> 
```

**1\. 这是一个很好的测试吗？**

**2\. 我该如何解决这个测试？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:16:15.937

问题在于，在您调用它的上下文中，它`self`指的是 class 的对象`RSpec::Core::ExampleGroup::Nested_1`，并且由于您没有提供显式接收器，因此`self`接收消息的是该对象。

正如@pjam 所指出的，如果没有更多信息，就不可能解释如何准确地修复您的测试。但总体而言，`update_user_region_id`消息需要合适的接收者。例如，如果这是类的类方法`Foo`，您可以调用`Foo.update_user_region_id`. 或者，如果它是一个实例方法，您可能需要先实例化一个对象（例如，`Foo.new.update_user_region_id`）。

# ruby-on-rails - 瘦缺的css

> ID：15391779
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:54.400
> 
> 标签：ruby-on-rails, thin

我正在调试一个 Bitnami Rails 实现。我想运行 Thin 而不是 Apache，看看我的错误是否仍然出现。

我使用 SSH 转到 Rails 应用程序目录并运行以下命令：

```
$ thin -e production start 
```

Thin 在 3000 上启动。但是，当我使用浏览器访问时，似乎没有任何 CSS 被使用。

有什么想法可以解决吗？

谢谢！

这是它的样子：

![在此处输入图像描述](../Images/9225d792df565e023f41922915dd31a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:43:16.530

默认情况下，Rails 不会在生产环境中提供静态资源。

通常有一条线

```
config.serve_static_assets = false 
```

在`config/production.rb`.

将其设置为`true`将覆盖默认值。如果没有该行，则应添加

如果问题仍然存在，请提供您的 rails 版本，以及您是否使用资产管道。

# actionscript-3 - 通过 Flash 流式传输 Icecast

> ID：15391782
> 
> 赞同：0
> 
> 时间：2013-03-13T17:02:59.810
> 
> 标签：actionscript-3, flash, icecast

嗨，我的名字是 Tamer，据我所知，这是 stackoverflow 中的第一篇文章。:)

我一直在寻找我的一个问题，但还没有找到任何解决方案。一旦按下播放按钮，我想将我的无线电广播从它的原始主机转发到我的嵌入式 Flash 播放器。是否可以通过动作脚本（flash - as3）？我的广播是 Icecast 格式，我正在播放 mp3，但我的挂载点不完全是 /listen.mp3。它有更多的扩展，比如 ?auth 和一些随机的固定内容（我的意思是，在 auth 部分的末尾还有一些其他的东西，但它一直都是一样的，就像一个固定的链接）。

感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T05:00:14.847

当使用上述答案时，高内存使用可能对您的观众来说是一个问题，因为“声音”变量会在播放时下载数据。

使用渐进式播放/下载会更好，但必须从 mp3 更改流格式，因为它只允许 M4A 流（MP4 容器中的 AAC 音频数据）。

```
var netConnection:NetConnection = new NetConnection();
netConnection.connect(null);
var netStream:NetStream = new NetStream(netConnection);
netStream.play(“http://your.stream.url/stream.m4a”); 
```

只是我的 2 美分 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:44:36.370

是的，您可以使用 Flash 播放流。你的挂载点是什么并不重要。只需插入流的真实 URL。文件扩展名和什么无关紧要。

# java - 将事件添加到动作侦听器而不删除默认动作？

> ID：15391788
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:03:18.013
> 
> 标签：java

我想这样做，这样当我关闭我的 GUI 时，它会在我的主类中运行一个方法，但之后也会关闭？

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:08:04.250

假设您使用的是 Java Swing：

```
 JFrame frame = new JFrame();
    frame.setTitle("Project Planner");
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent event) {
            exitProcedure();
        }
    }); 
```

.

```
public void exitProcedure() {
    frame.dispose();
    System.exit(0);
} 
```

只需在 dispose 方法之前添加您想要执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:17:05.303

为此，您需要注册`WindowListener`到相关的`JFrame`. 并覆盖该`windowClosing()`方法。

**编辑**
从字符串数组中随机选择一个字符串，您可以使用[java.util.Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html) API。例如，这里是一个数组，`String`每次`JFrame`关闭时，`String`都会从该数组中随机挑选出 a 并在方法中打印`callMeBeforeExit`。

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import java.awt.event.WindowEvent;
import java.awt.event.WindowAdapter;
import java.awt.BorderLayout;
import java.util.Random;
class WorkBeforeClose extends  JFrame
{
    String[] strings = {
                            "Hello",
                            "World",
                            "Java",
                            "OOPs"
                        };
    public void showGUI()
    {
        setTitle("Close me");
        getContentPane().add(new JLabel("Close me"),BorderLayout.NORTH);
        addWindowListener(new WindowAdapter()
        {
            @Override
            public void windowClosing(WindowEvent evt)
            {
                callMeBeforeExit();
                System.exit(0);//Don't write this line if you don't want your program to exit
            }
        });
        setSize(200,200);
        setVisible(true);
    }
    private void callMeBeforeExit()
    {
        Random random = new Random();
        int i = random.nextInt(strings.length - 1);//Defines the Range of numbers to be chosen randomly.
        System.out.println(strings[i]);
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                WorkBeforeClose wbc = new WorkBeforeClose();
                wbc.showGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:09:29.160

尝试`WindowAdapter`在 GUI 的`addWindowListener()`方法中实现。

# java - 在查询时为过滤器中的术语添加提升

> ID：15391793
> 
> 赞同：0
> 
> 时间：2013-03-13T17:03:26.110
> 
> 标签：java, solr, lucene, filtering

我正在为 Lucene/Solr 开发一个 SynonymFilter，它只在查询时运行以使用同义词库扩展查询。我遇到的问题是我添加到查询中的同义词与原始术语具有相同的“权重”或“提升”，所以我最终会在结果中得到很多噪音。

有没有办法从过滤器中设置单个术语的“权重”或“提升”？

如果没有，我还能怎么做？

（类似于[http://search-lucene.com/jd/lucene/analyzers-common/org/apache/lucene/analysis/synonym/SynonymFilter.html](http://search-lucene.com/jd/lucene/analyzers-common/org/apache/lucene/analysis/synonym/SynonymFilter.html "同义词过滤器")，但同义词的权重较小。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:22:54.447

是的，您可以在过滤器中或作为查询的一部分设置单个术语的权重。使用[eDisMax](http://wiki.apache.org/solr/ExtendedDisMax#qf_.28Query_Fields.29)解析器，您可以执行以下操作：

`&defType=edismax&q=<your query terms>&qf=title:superman^2`

这将增加标题字段中出现的所有超人。如果我明白你在问什么，这应该做你需要的。如果您有大量这些，您可以在[您的 requestHandler 的默认设置中](http://docs.lucidworks.com/display/solr/RequestHandlers+and+SearchComponents+in+SolrConfig)`qf`指定提升。

# javascript - Facebook Like 按钮未发布以供非 FB 应用程序开发人员使用

> ID：15391801
> 
> 赞同：1
> 
> 时间：2013-03-13T17:03:55.520
> 
> 标签：javascript, facebook, facebook-like

我正在尝试获得一个简单的 facebook 等设置以及视频的动态链接。下面的视频功能（publishVidToFB()）效果很好！但是，除了我之外，我无法让这种地狱般的“喜欢”为任何人工作。

该应用程序未处于沙盒模式。喜欢对我来说很好，但我的评论没有通过。对于此处未在应用程序上设置为“Facebook 开发人员”的其他开发人员 - 在他们的新闻源中根本不会出现喜欢的内容。

FB 调试器只抱怨 og:image 标记中的图像大小。

请参阅下面的代码，请提供帮助！

*!DOCTYPE html*

*html*

```
*head*

    *meta property="fb:app_id" content="app id is here" *
    *meta property="og:url" content="link back to the originating page is here... "*
    *meta property="og:site_name" content="site name code is here like 'INTERNALCODE'"*
    *meta property="og:image" content="web linkable image is here"*
    *meta property="og:description" content="description blah blah."*
    *meta property="og:type" content="company"*
    *meta property="og:title" content="blah blah blah"*
*/head*
*body*
    *div id="fb-root"**/div*
    *input type="button" value="Publish" onclick="publishVidToFB(); return false;" *
    *script*

    window.fbAsyncInit = function() {
            FB.init({
              appId      : 'my appid is here', // App ID
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              oauth      : true, // enable OAuth 2.0
              xfbml      : true  // parse XFBML
            });
        };

        (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id; js.async = true;
          js.src = document.location.protocol + "//connect.facebook.net/en_US/all.js";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        function publishVidToFB(){
            FB.ui({
               method: "stream.publish",
               user_message_prompt: "",
               message: "message",
               attachment: {
                  name: "Check out this cool video",
                  caption: "Video caption goes here etc etc etc",
                  href: "my href is here",
                  media:[{
                      "type": "image", 
                      "src": "image source is here",
                      "href": "myhref is here"
                    }]
                }
            });
        };

    */script*
    *div class="fb-like" data-href="href is here" data-send="false" data-width="450" data-show-faces="false"**/div*
*/body* 
```

*/html*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:15:25.757

解决了。Facebook 已将该应用程序列入我所有测试的黑名单。等了几天，解决了其他问题，我们开始运行了。

# parallel-processing - 长时间运行的 goroutine

> ID：15391804
> 
> 赞同：3
> 
> 时间：2013-03-13T17:04:03.573
> 
> 标签：parallel-processing, go, cpu-usage

我的应用程序中有 12 到 13 个长期运行的 goroutines，它们负责数千个短暂的 goroutines 来来去去。

除了定期调用 runtime.Gosched() 之外，我还需要考虑在长期运行的情况下做其他事情吗？

注意：目前那些长时间运行的那些每隔 15 到 30 秒（有时每隔几分钟）对资源集合执行一些监督，然后它们会休眠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:10:37.150

不，goroutine 不需要持续维护。它们由 go 运行时管理，并将继续运行直到它们返回或主 goroutine 退出。您甚至不应该调用 runtime.Gosched() 因为它仅在例程不会自行产生时才需要，但您的大部分时间都在睡觉。

# excel - VBA 从网站插入 .csv，.csv 不在 url

> ID：15391806
> 
> 赞同：1
> 
> 时间：2013-03-13T17:04:06.310
> 
> 标签：excel, vba, csv

我试图弄清楚 VBA 是否有办法在此链接上下载名为“Download”的屏幕左下方的 .csv 文件：

[http://www.redfin.com/homes-for-sale#!excl_ss=true&market=socal&max_price=300000&min_price=50000&num_baths=1.0&num_beds=1®ion_id=11203®ion_type=6&time_on_market_range=30-&uipt=2&v=8](http://www.redfin.com/homes-for-sale#!excl_ss=true&market=socal&max_price=300000&min_price=50000&num_baths=1.0&num_beds=1&region_id=11203&region_type=6&time_on_market_range=30-&uipt=2&v=8)

.csv 似乎没有附加到我知道如何导入的 URL，但我无法弄清楚。任何帮助，将不胜感激。

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:17:32.403

当然可以：

> [http://www.redfin.com/stingray/do/gis-search?market=socal®ion_id=11203®ion_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=500000&min_price=500000&min. =1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=1&render=csv](http://www.redfin.com/stingray/do/gis-search?market=socal&region_id=11203&region_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=50000&min_year_built=&num_baths=1.0&num_beds=1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=1&render=csv)

您可以使用`Developer Tools`of找到 URL `IE`，如下所示：

*   打开网站并按`F12`
*   在出现的窗口（开发者工具）中，选择`Pointer Icon`
*   选择后`Pointer Icon`，点击`Download Link`网站上的
*   在`Developer Tools`窗口中，您会注意到许多 HTML 出现并选择了一行；此行包含指向 CSV 的链接。
*   `downloadCsv`在该行中选择函数中的文本：`list.downloadCsv('...text to select...')`
*   `http://www.redfin.com`在 URL之后添加复制的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:14:18.613

试试这个网址：

[http://www.redfin.com/stingray/do/gis-search?market=socal®ion_id=11203®ion_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=500000&min_price=500000&min. =1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=1&render=csv](http://www.redfin.com/stingray/do/gis-search?market=socal&region_id=11203&region_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=50000&min_year_built=&num_baths=1.0&num_beds=1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=1&render=csv)

实际上有一个 URL，它只是被隐藏了，可以通过一些 JavaScript 代码访问。

一般来说，如果您想知道正在使用哪个 URL，请尝试以下操作：

*   在 Chrome 中：

    *   按Ctrl-Shift-J；这应该会调出调试控制台。
    *   为方便起见，单击左下角的按钮可取消停靠调试控制台；它现在应该在一个单独的窗口中。
    *   转到“网络”选项卡。
    *   在网站上，单击链接以下载 CSV 文件。
    *   注意出现在“网络”标签中的新项目。其中之一可能是下载 CSV 文件的请求。尝试右键单击它，然后选择“在新选项卡中打开”。如果您最终看到 CSV 文件下载对话框，那么这就是您要查找的 URL。
*   在火狐中：

    *   安装 FireBug 插件，做类似 Chrome 的事情。

# c++ - 解释 ARM Neon 图像采样

> ID：15391807
> 
> 赞同：0
> 
> 时间：2013-03-13T17:04:08.513
> 
> 标签：c++, opencv, arm, computer-vision, neon

我正在尝试编写 OpenCV 的 cv::resize() 的更好版本，我遇到了一个交叉代码：[https ://github.com/rmaz/NEON-Image-Downscaling/blob/master /ImageResize/BDPViewController.m](https://github.com/rmaz/NEON-Image-Downscaling/blob/master/ImageResize/BDPViewController.m) 该代码用于将图像下采样 2，但我无法获得算法。我想首先将该算法转换为 C 然后尝试修改它以用于学习目的。将其转换为任何大小的下采样是否也很容易？

功能是：

```
static void inline resizeRow(uint32_t *dst, uint32_t *src, uint32_t pixelsPerRow)
{
    const uint32_t * rowB = src + pixelsPerRow;

    // force the number of pixels per row to a multiple of 8
    pixelsPerRow = 8 * (pixelsPerRow / 8);

    __asm__ volatile("Lresizeloop: \n" // start loop
                     "vld1.32 {d0-d3}, [%1]! \n" // load 8 pixels from the top row
                     "vld1.32 {d4-d7}, [%2]! \n" // load 8 pixels from the bottom row
                     "vhadd.u8 q0, q0, q2 \n" // average the pixels vertically
                     "vhadd.u8 q1, q1, q3 \n"
                     "vtrn.32 q0, q2 \n" // transpose to put the horizontally adjacent pixels in different registers
                     "vtrn.32 q1, q3 \n"
                     "vhadd.u8 q0, q0, q2 \n" // average the pixels horizontally
                     "vhadd.u8 q1, q1, q3 \n"
                     "vtrn.32 d0, d1 \n" // fill the registers with pixels
                     "vtrn.32 d2, d3 \n"
                     "vswp d1, d2 \n"
                     "vst1.64 {d0-d1}, [%0]! \n" // store the result
                     "subs %3, %3, #8 \n" // subtract 8 from the pixel count
                     "bne Lresizeloop \n" // repeat until the row is complete
: "=r"(dst), "=r"(src), "=r"(rowB), "=r"(pixelsPerRow)
: "0"(dst), "1"(src), "2"(rowB), "3"(pixelsPerRow)
: "q0", "q1", "q2", "q3", "cc"
);
}

To call it:

 // downscale the image in place
    for (size_t rowIndex = 0; rowIndex < height; rowIndex+=2)
    {
        void *sourceRow = (uint8_t *)buffer + rowIndex * bytesPerRow;
        void *destRow = (uint8_t *)buffer + (rowIndex / 2) * bytesPerRow;
        resizeRow(destRow, sourceRow, width);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:56:49.390

该算法非常简单。它从当前行读取 8 个像素，从下一行读取 8 个像素。然后它使用 vhadd（减半相加）指令垂直平均 8 个像素。然后它转置像素的位置，以便水平相邻的像素对现在位于单独的寄存器中（垂直排列）。然后它执行另一组减半加法以将它们平均在一起。然后将结果再次转换以将它们放在原始位置并写入目的地。可以重写此算法以处理不同整数大小的缩放，但正如所写的那样，它只能通过平均进行 2x2 到 1 的缩减。这是等效的 C 代码：

```
static void inline resizeRow(uint32_t *dst, uint32_t *src, uint32_t pixelsPerRow)
{
    uint8_t * pSrc8 = (uint8_t *)src;
    uint8_t * pDest8 = (uint8_t *)dst;
    int stride = pixelsPerRow * sizeof(uint32_t);
    int x;
    int r, g, b, a;

    for (x=0; x<pixelsPerRow; x++)
    {
       r = pSrc8[0] + pSrc8[4] + pSrc8[stride+0] + pSrc8[stride+4];
       g = pSrc8[1] + pSrc8[5] + pSrc8[stride+1] + pSrc8[stride+5];
       b = pSrc8[2] + pSrc8[6] + pSrc8[stride+2] + pSrc8[stride+6];
       a = pSrc8[3] + pSrc8[7] + pSrc8[stride+3] + pSrc8[stride+7];
       pDest8[0] = (uint8_t)((r + 2)/4); // average with rounding
       pDest8[1] = (uint8_t)((g + 2)/4);
       pDest8[2] = (uint8_t)((b + 2)/4);
       pDest8[3] = (uint8_t)((a + 2)/4);
       pSrc8 += 8; // skip forward 2 source pixels
       pDest8 += 4; // skip forward 1 destination pixel
    } 
```

# jquery - 偏移然后添加类到 div

> ID：15391808
> 
> 赞同：2
> 
> 时间：2013-03-13T17:04:08.703
> 
> 标签：jquery, class, action, offset

我的问题是关于使用 .offset() 查找浏览器的 y 位置，并且在某一时刻我想向我的 div 添加类我想创建类似[yourkarma.com](http://yourkarma.com)的东西（查看 WHAT IS POWERING IT 部分）

```
$(document).ready(function() {
    $(window).scroll(function (event) {
    // what the y position of the scroll is
    var z = '150';
    var x = $('#thisdiv').offset().top - z;
    var y = $(this).scrollTop();

    // whether that's below the form
    if (y >= x) {
      // if so, ad the fixed class
      $('#thisdiv').addClass('red');
    }
  });
}) 
```

我走对了吗？我觉得使用 z=150 并将其减去 X 是一种便宜的方式。无论如何，有没有做一个更好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:35:02.270

这并不便宜，但也许更清晰有效的方法是：

```
var $thisdiv = $('#thisdiv');
var thisdiv_top = $thisdiv.offset().top - 150;
var thisdiv_flag = false;

$(window).scroll(function (event) {
    if(thisdiv_flag) return;

    // what the y position of the scroll is
    var y = $(window).scrollTop();

    // whether that's below the form
    if (y >= thisdiv_top) {
        // if so, ad the fixed class
        $thisdiv.addClass('red');
        thisdiv_flag = true;
    }
}); 
```

我不确定为什么是-150。我想所以它会在元素出现之前触发一点。但是这段代码效率更高一些。它为 div 缓存 jQuery 对象并设置一个标志，这样事件就不会再次触发。它还避免了每次用户滚动时都必须进行相同的偏移计算。

希望这可以帮助。

# node.js - 使用下载管理器取消下载时Nodejs内存泄漏

> ID：15391815
> 
> 赞同：2
> 
> 时间：2013-03-13T17:04:19.243
> 
> 标签：node.js, memory-leaks, express, download, listener

我使用 Expressjs 3 和 Nodejs 0.10 创建了一个简单的文件下载器

```
function download(req, res, filepath, filename){
    res.header('Content-Type', 'application/force-download');
    res.header('Content-Type', 'application/octet-stream');
    res.attachment(filename);
    res.download(filepath, filename);
} 
```

一切正常，但是当我使用下载管理器（例如 Internet 下载管理器）测试应用程序时，当我中止或取消下载（下载之前或下载期间）时，它会引发警告：

```
Trace
    at Socket.EventEmitter.addListener (events.js:160:15)
    at Socket.Readable.on (_stream_readable.js:653:33)
    at Socket.EventEmitter.once (events.js:179:8)
    at TCP.onread (net.js:512:26)

(node) warning: <b>possible EventEmitter memory leak detected. 11 listeners added. Use
emitter.setMaxListeners() to increase limit.</b> 
```

中止文件下载后如何删除侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:56:39.997

问题解决在Expressjs定义后
添加**setMaxListeners(0) ：**

```
var express = require('express');

//expressjs 2.x
//var app = module.exports = express.createServer();

//expressjs 3.x
var app = module.exports = express();

//ADD BELOW CODE
app.setMaxListeners(0); 
```

感谢@robertklep

# asp.net - 在线更新当前 web.config

> ID：15391820
> 
> 赞同：0
> 
> 时间：2013-03-13T17:04:37.227
> 
> 标签：asp.net, asp.net-mvc-3, web-config, appsettings, webconfigurationmanager

我在我的 Web 应用程序上创建了一个屏幕，允许超级管理员更改 Web.Config 上的参数值。

**问题**

有一次我们使用连接到应用程序的用户必须刷新它的代码更改参数值！我想知道这是否是个好主意>

**编码：**

```
public void SetAppSettings(string key, string value)
    {
        Configuration objConfig = WebConfigurationManager.OpenWebConfiguration("~");
        objConfig.AppSettings.Settings[key].Value = value;
        objConfig.Save(ConfigurationSaveMode.Full )
    } 
```

为什么应用程序是 KO 更改 web.config。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:09:03.110

通常，当 web.config 更改时，它会强制应用程序回收。这将重置会话和缓存对象。如果用户正在处理某事，那么它可能会丢失。

# c# - Windows 命名管道和多线程

> ID：15391821
> 
> 赞同：1
> 
> 时间：2013-03-13T17:04:39.670
> 
> 标签：c#, winapi, named-pipes

我有两个进程通过单个命名管道以双工和二进制模式（不是消息）进行通信。每个进程都有两个线程，一个写入管道，一个从管道读取。管道两端的读写是不同步的，所以我读写是真正并行的。每个发件人为其邮件编号。所有代码都是用 C# 编写的。我使用 interop 和 Win32 来创建和连接管道。

我在 MSTest 中有一个单元测试，它启动服务器和客户端并产生两个线程，一个发送消息服务器-> 客户端，一个从客户端-> 服务器发送。

问题：很少，一些真正独特的消息被两次或更频繁地接收。

问题：Windows 上的双工管道可以像上面描述的那样处理多线程吗？还是我需要在管道的一端同步读/写？

**更新** 与同步 IO 一起使用的全双工管道在两个方向上工作，但不能同时工作。管道一端的并发读/写肯定会产生错误的结果。似乎对 WriteFile 的调用唤醒了阻塞的 ReadFile 线程。我的解决方法是使用两个单向管道。这也被推荐在其他地方。也许它适用于重叠的 IO，我没有尝试。

# windows-phone-8 - WP7.1 和 WP8.0 之间未调用 OnApplyTemplate()

> ID：15391825
> 
> 赞同：1
> 
> 时间：2013-03-13T17:05:06.687
> 
> 标签：windows-phone-8, windows-phone-7.1, windows-phone

有一个在我刚刚升级到 Windows Phone 8.0 的 Windows Phone 7.0 和 7.1 中运行良好的自定义控件。但是，不再调用 OnApplyTemplate() 覆盖。有没有人经历过类似的事情？

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:45:55.767

一天半之后……

...在 AssemblyInfo.cs 我改变了：

[程序集：NeutralResourcesLanguage("en", UltimateResourceFallbackLocation.Satellite)]

至

[程序集：NeutralResourcesLanguageAttribute("en")]

现在它可以工作了。我不知道为什么。

# .net - 强制 WCF 关注类库中的 app.config 设置

> ID：15391826
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:05:08.807
> 
> 标签：.net, wcf, web-config, app-config, class-library

首先让我说我知道类库应该获取其配置的方式是来自*引用*项目的配置。在我的例子中，引用项目是一个 MVC Web 应用程序。

虽然这通常是有道理的，但我认为当您的类库只是为了提供对 Web 服务的访问时，它不会这样做。当您右键单击“更新服务引用”的服务引用时，Visual Studio 有一个功能。这将更新`app.config`类库中的文件，而不是引用项目中的配置文件。`app.config`如果文件将被忽略，则不是很有用。

当然，您可以继续将`app.config`文件的新版本复制到（在这种情况下）您`web.config`在不同项目中的文件中，但这很痛苦，您必须记住这样做。更重要的是，我认为将配置设置保留在 Web 服务项目中在语义上会更好。如果该 Web 服务更改了 URL，我希望所有引用该项目的东西都能获取新的 URL。如果引用类库的东西想要使用不同的 URL，它的配置可以*覆盖*类库的，但我仍然希望类库有一组默认设置。我不想更改每个引用项目的配置。

考虑到所有这些，有没有办法强制/破解/任何 .NET 将类库中的配置用于 WCF 端点等，而不是查看引用项目配置中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:08:43.830

抱歉，这不是它的工作方式。

您的服务的位置和其他参数可以从一种环境更改为另一种环境。这些更改必须反映在环境的 web.config 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:01:26.023

基本上，可以通过做很多工作来为类库创建一个 app.config，比如在构建后事件中手动将 app.config 文件复制到 bin 目录，并手动读取值从它并将它们插入到您的 Web 服务绑定中。但是我决定放弃并将它们复制到我的 web.config 文件中（在这种情况下，因为我正在编写一个 Web 应用程序），然后每次我从 Visual Studio 刷新 Web 服务时手动更新它们。如果您实际上有几个不同的应用程序访问共享库，我仍然认为这样做是合法的，因为您可能希望该库仅引用一个 Web 服务，如果它发生更改，您只需更改该库的`.config`文件即可所有不同的应用程序'`.config`文件。

为什么 VS 创建一个名为 app.config 的文件对我来说是个谜，因为我认为它具有高度误导性；它使它看起来像这个文件的配置设置将被读取，而实际上它们将被忽略。更合适的文件名更像是“shouldBeCopiedIntoYourActualAppOrWeb.config”。

# git - 分部分下载大型 git 存储库

> ID：15391829
> 
> 赞同：0
> 
> 时间：2013-03-13T17:05:17.230
> 
> 标签：git, git-svn

我正在尝试下载[GCC Git 存储库](http://gcc.gnu.org/wiki/GitMirror)，由于可用速度有限，下载需要花费太多时间。我只想知道是否可以部分下载 repo。

我已经阅读了许多与下载单个文件夹或部分 repo 相关的文章和问题。但是没有找到任何关于部分下载 repo 的文章或问题。因此，我可以同时拥有所有可用的提交，并且 Git 可以更新未来的提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:23:21.713

您可以尝试使用 --depth 选项下载截断的历史记录：

```
--depth <depth>
       Create a shallow clone with a history truncated to the specified number of
       revisions. A shallow repository has a number of limitations (you cannot clone or
       fetch from it, nor push from nor into it), but is adequate if you are only
       interested in the recent history of a large project with a long history, and
       would want to send in fixes as patches. 
```

如果您只想要文件，请执行以下操作：

```
git clone --depth 1 <repo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T04:49:29.927

如果您阅读[了如何在连接不稳定的情况下为大型项目完成 git clone？](https://stackoverflow.com/questions/3954852/how-to-complete-a-git-clone-for-a-big-project-on-an-unstable-connection)你会发现现在真的不可能。他们提出[了一些解决方法](https://stackoverflow.com/a/3957733/641451)，但没有保证。

但是，如果 GCC 有一个[SVN 存储库](http://gcc.gnu.org/wiki/SvnSetup)，您可以按照此处的说明使用`git-svn`通过[提交](http://blog.endpoint.com/2010/05/continuing-interrupted-git-svn-clone.html)获取 SVN 的内容提交：

```
$ git svn -s clone svn://gcc.gnu.org/svn/gcc
Initialized empty Git repository in /home/desert69/gcc/.git/
r1 = b0439281e5f21d7567489ac582f45adfb813d332 (refs/remotes/trunk)
    A   gcc/config/m68k/xm-3b1.h
r2 = b24dd970fa8d03c1df555c4d771fa3dee00918de (refs/remotes/trunk)
    A   gcc/typeclass.h
r3 = 81e937b24b79225c9a61890f72737eba914dde22 (refs/remotes/trunk)
    A   gcc/config/m68k/x-apollo68
r4 = 0d9f9c476899983566408ee3698f097fa9d4ef5a (refs/remotes/trunk)
^C
$ cd gcc/
$ git svn fetch
    A   gcc/config/pyr/x-pyr
r5 = ff3c8016a7b2261c8df6c2564e76ad164b5a1a4a (refs/remotes/trunk)
    A   gcc/config/m68k/xm-crds.h
r6 = ff54129791033b73ffa49d12ec7802ca9b3010ea (refs/remotes/trunk)
(... goes on ...) 
```

遗憾的是`svn`，它比 更容易`git`，但是，就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:23:46.967

最简单的可能是启动一个 ec2 实例，在那里克隆 repo 并使用 rsync 提供它。即使您已使用免费微实例年，需求微实例为 0.05 美元/小时，其基准 8GB 磁盘为 0.88 美元/月，并且流量可能适合免费 GB（之后为 0.12 美元/GB 出站）。即使你花了一个星期去取，那加起来也不到十块钱。

# jquery - jquery自定义手风琴评论部分

> ID：15391837
> 
> 赞同：0
> 
> 时间：2013-03-13T17:05:36.110
> 
> 标签：jquery

我正在建立一个网站的评论部分，并且在自定义手风琴效果方面遇到了麻烦。

我知道这很简单，但是很难让它工作。

这是代码：

```
<li class="main">
      <span class="expand-collapse"></span>

       <ul class="responses">
           <li>
              <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
            </li>
         </ul>
</li>

<li class="main">
      <span class="expand-collapse" href="#"></span>

       <ul class="responses">
           <li>
              <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
            </li>
         </ul>
</li>

$('.expand-collapse').click(function(){
        $(this).toggleClass('minus');
        if( $(this).hasClass('minus') ){
            $(this).find('ul.responses').slideDown(500);
        }else{
            $(this).find('ul.responses').slideUp(500);
        }
    }); 
```

**更新代码：**

```
$('.expand-collapse').click(function(){
        $(this).toggleClass('minus');

        $(this).parent().children('ul.responses').slideToggle(500);
]); 
```

任何想法如何使它工作。我需要确保手风琴被包含在内，所以如果我点击展开按钮，只有最近的线程会展开..不是所有的..

看起来我也可以使用 slideToggle。

我玩过最接近（），查找（），下一个（）都没有成功..有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:12:36.167

```
 $('.expand-collapse').click(function(){
        $(this).toggleClass('minus');
        if( $(this).hasClass('minus') ){
            $(this).parent().children('ul.responses').slideDown(500);
        }else{
            $(this).parent().children('ul.responses').slideUp(500);
        }
    }); 
```

试试这个。我将通过响应类将 $(this) 发送给父级并返回给子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:34:52.640

这是对此的工作演绎。链接:: [http://jsfiddle.net/mlgmainstream/DTnem/12/](http://jsfiddle.net/mlgmainstream/DTnem/12/)

你的 Jquery 是在正确的轨道上。评论在 JSFiddle 上。

这是你要做的::

```
$(".expand-collapse a").click(function(e) {
e.preventDefault();

//add a open class so user knows which one is opened.
$(this).toggleClass("minus");

//go up a parent dir, then target the "next" element
// which is "ul .responses"
//** this should already be hidden in CSS
$(this).parent().next().slideToggle(500); 
```

});

# python - Python，套接字错误：[Errno 111] 尝试在同一文件中创建 2 个服务器时

> ID：15391841
> 
> 赞同：0
> 
> 时间：2013-03-13T17:05:52.153
> 
> 标签：python, network-programming

我必须使用 python 套接字在 2 个组之间设置组通信。每个组都有一个组长，作为组内其他成员的服务器，在组内传输消息。2个组长也需要通信才能传递组间消息。

我的程序正在传输组内消息。但是，为了传输组间消息，我在每个领导者（服务器）上创建了一个新线程，并将其中一个领导者作为客户端，另一个作为客户端。

问题：我的问题是在服务器 2 尝试连接到服务器 1 时出现“[Errno 111] Connection denied”错误。

代码（服务器 1）interGroupMsgSender 函数：

```
interGrpSock = socket.socket()        
interGrpSock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
host = socket.gethostname() 
port = 12349 
interGrpSock.bind((host, port))     
s.listen(1)  
clientSock, addr = s.accept()
# The other server has connected, handle sending messages
while(len(interGroupMsgs) > 0):
    msg = interGroupMsgs.pop(0)
    clientSock.send(msg); 
```

代码（服务器 2）interGroupMsgSender 函数：

```
ss = socket.socket()      
host = socket.gethostname() 
port = 12349 
try:
    ss.connect((host, port)) 
```

创建新线程的代码（两台服务器相同）：

```
thr2 = threading.Thread(target = interGroupMsgSender);
thr2.daemon=True  # Causes the thread to terminate when main process ends
thr2.start(); 
```

注意：这两个服务器都已充当其他组成员的服务器。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:41:42.560

JayP 在上面的评论中给出的答案是代码中的一个简单问题。由于我复制代码并且没有正确审查它:(。

服务器 1 代码应为：

```
interGrpSock.bind((host, port))     
interGrpSock.listen(1)          /* Instead of s.listen(1) here */ 
```

再次感谢Jay P

# java - 具有多个退出点的代码段中的圈复杂度

> ID：15391845
> 
> 赞同：6
> 
> 时间：2013-03-13T17:06:02.677
> 
> 标签：java, return, complexity-theory, cyclomatic-complexity

我有这个验证密码的方法：

```
/**
 * Checks if the given password is valid.
 * 
 * @param password The password to validate.
 * @return {@code true} if the password is valid, {@code false} otherwise.
 */
public static boolean validatePassword(String password) {
    int len = password.length();
    if (len < 8 || len > 20)
        return false;
    boolean hasLetters = false;
    boolean hasDigits = false;
    for (int i=0; i<len; i++) {
        if (!Character.isLetterOrDigit(password.charAt(i)))
            return false;
        hasDigits = hasDigits || Character.isDigit(password.charAt(i));
        hasLetters = hasLetters || Character.isLetter(password.charAt(i));
    }
    return hasDigits && hasLetters;
} 
```

让我们关注圈复杂度数：它的价值是什么？

[Metrics 1.3.6](http://metrics.sourceforge.net/)说是 7，但我真的找不到 7 条独立路径：我只找到 5 条！[维基百科](http://en.wikipedia.org/wiki/Cyclomatic_complexity)也帮不上什么忙——我想怎么用这个公式`π - s + 2`？

我有 2 个`if`、1 个`for`和 3 个出口点，但我被卡住了：我必须计算入口点吗？我应该先计算两次，`if`因为它有两个条件吗？

**编辑：**

好的，现在我发现圈数是 7。这意味着有 7 个独立的路径，所以如果我想覆盖 100% 的代码，我应该能够找到 7 个不同的测试用例，对吗？

好吧，我仍然找不到最后一个！我发现了这些：

1.  有效：asdf1234
2.  太短：asdf123
3.  太长：asdfsgihzasweruihioruldhgobaihgfuiosbhrbgtadfhsdrhuorhguozr
4.  无效字符：asdf*123
5.  全数字：12345678
6.  无数字：asdfghjk
7.  呜呜呜？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:26:07.893

我认为诀窍是计算逻辑运算符。

根据McCabe Cyclomatic Complexity 部分下的Metrics 链接 ( [http://metrics.sourceforge.net/ )：](http://metrics.sourceforge.net/)

1 初始流程

3 个决策点（如果、为、如果）

3 个条件逻辑运算符 (||,||,||)

总数：7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:41:47.213

我认为这里主要是条件句做短路，这是控制流的一种形式。有帮助的是重新编写代码以使其明确。在进行程序分析时，这种归一化很常见。一些特别的规范化（不是正式的，机器不会生成这个，但它明白了这一点）将使您的代码如下所示：

```
public static boolean validatePassword(String password) {
    int len = password.length();

    //evaluate 'len < 8 || len > 20'
    bool cond1 = len < 8;
    if (!cond1) cond1 = len > 20;
    //do the if test
    if (cond1)
        return false;

    boolean hasLetters = false;
    boolean hasDigits = false;
    //for loops are equivalent to while loops
    int i = 0;
    while(i < len) {
        if (!Character.isLetterOrDigit(password.charAt(i)))
            return false;

        //evaluate 'hasDigits || Character.isDigit(password.charAt(i))'
        bool hasDigitsVal = hasDigits;
        if (!hasDigitsVal) hasDigitsVal = Character.isDigit(password.charAt(i));
        //hasDigits = ...
        hasDigits = hasDigitsVal

        //evaluate 'hasLetters || Character.isLetter(password.charAt(i))'
        bool hasLettersVal = hasLetters;
        if (!hasLettersVal) hasLettersVal = Character.isLetter(password.charAt(i));
        //hasLetters = ...
        hasLetters = hasLettersVal;

        i++;
    }

    //evaluate 'hasDigits && hasLetters'
    bool cond2 = hasDigits;
    if (cond2) cond2 = hasLetters;
    //return ...
    return cond2;
} 
```

请注意`||`and`&&`运算符本质上只是将`if`语句添加到代码中。另请注意，您现在有 6 个`if`语句和 1 个`while`循环！也许这就是你要找的7？

* * *

关于多个出口点，这是一个红鲱鱼。将每个函数视为具有一个退出节点，即函数的结尾。如果您有多个`return`语句，则每个`return`语句都会在该退出节点上绘制一条边。

```
void foo() {
    if (cond1) return a;
    if (cond2) return b;
    return c;
} 
```

该图看起来像这样，其中`-----val----> EXIT`意味着以 的值退出函数`val`：

```
START -> cond1 ------------------------a------------> EXIT
           |                                            |
         cond2 ------------------------b----------------+
           |                                            |
         return -----------------------c----------------| 
```

如果您重新编写代码，那么您基本上只需添加另一个“预返回”节点，然后转到退出节点：

```
void foo() {
    int val;
    if (cond1) {
        val= a;
    }
    else {
        if (cond2) {
            val= b;
        }
        else {
            val= c;
        }
    }
    return val;
} 
```

现在看起来像这样：

```
START -> cond1 ---> val=a --------------------------> return ----val----> EXIT
           |                                            |
         cond2 ---> val=b ------------------------------+
           |                                            |
           + -----> val=c ------------------------------+ 
```

它仍然很复杂，而且代码更丑陋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T16:59:30.767

正如[这里](http://www.klocwork.com/products/documentation/current/McCabe_Cyclomatic_Complexity)很好解释的那样：

> 圈复杂度 = ( 2 + ifs + loops +cases - return ) 其中：
> 
> ```
> * ifs is the number of IF operators in the function,
> * loops is the number of loops in the function,
> * cases is the number of switch branches in the function (without default), and
> * return is the number of return operators in the function. 
> ```

如前所述，还计算了逻辑条件。

例如`if (len < 8 || len > 20)`算作 3 个条件：

1.  `if`
2.  `len<8`
3.  `len > 20`

这意味着，您的代码具有 的复杂性`2 + 8 - 3 = 7`，其中：

*   2 - 它总是在那里（见那里的公式）
*   8 - 分支数
*   3 - 退货数量

# ios - CAEmitterLayer - 禁用触摸动画

> ID：15391849
> 
> 赞同：2
> 
> 时间：2013-03-13T17:06:21.553
> 
> 标签：ios, objective-c, calayer

我正在尝试将 CAEmitterLayer 动画添加到我的应用程序中。在模拟器上测试时一切正常，但是如果我在设备上运行代码，并且我开始触摸屏幕，额外的单元格会完全脱离我设置的出生率。有没有办法禁用/概述这个触摸事件？我尝试添加：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
或者
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event

```

但这无济于事。似乎触摸来自不同的“层”。

# php - Laravel 4：如何使用迁移创建非主自动递增列？

> ID：15391850
> 
> 赞同：8
> 
> 时间：2013-03-13T17:06:23.223
> 
> 标签：php, mysql, database-design, laravel, laravel-4

我目前正在开发一个由主服务器和许多客户端组成的 Laravel 4 项目。客户端创建数据并将其发送到主服务器。为了避免冲突，我使用 UUID v4 作为主键。

但是，一旦在服务器上创建了数据，我想分配一个唯一的自动递增整数，以便用户更容易识别数据。例如：代替谈论`item 5a8e896d-3ab4-48d2-9d39-faeb5227f012`用户可以谈论`item #24567`

为了让我的应用程序易于管理，我正在使用迁移，我当前对该表的迁移如下所示：

```
public function up()
{
    Schema::table('items', function($table)
    {
        $table->create();
        $table->string('id')->primary(); //'id' For the purpose of keeping the ORM working, this field stores the UUID.
        $table->integer('number', true); //The human readable item number, the second parameter is true for auto-increment
        $table->text('otherdata');
        $table->timestamps();
    });
} 
```

问题是 Laravel 在定义自动增量时会自动创建一个主键，因此迁移最终会失败，因为有两个主键。

```
[Exception] SQLSTATE[42000]: Syntax error or access violation: 1068 Multiple primary key defined
  (SQL: alter table `items` add primary key items_id_primary(`id`)) (Bindings: array ()) 
```

有没有办法使用 Laravel 4 迁移来获得具有主键和单独的自动递增字段的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:31:02.577

我发现了问题，Laravel 似乎正在为每个 auto_increment 字段创建一个主键。当我删除`primary key`它要求我提供索引的部分时，我呼吁`->unique()`迁移，但这也不起作用。更改`return ' auto_increment primary key';`为`return ' auto_increment unique'`; 解决了我的问题，尽管它现在在核心中被黑了，这当然是不好的做法。

```
/**
 * Get the SQL for an auto-increment column modifier.
 *
 * @param  Illuminate\Database\Schema\Blueprint  $blueprint
 * @param  Illuminate\Support\Fluent  $column
 * @return string|null
 */
protected function modifyIncrement(Blueprint $blueprint, Fluent $column)
{
    if ($column->type == 'integer' and $column->autoIncrement)
    {
        return ' auto_increment unique'; //return ' auto_increment primary key';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-14T01:36:56.880

诀窍是像这样将它添加到 Schema::create 之外

```
Schema::create('payments', function(Blueprint $table)
{
   $table->string('primaryKey', 30);
   $table->primary('primaryKey');
   //...
});
DB::statement('ALTER Table tableName add id INTEGER NOT NULL UNIQUE AUTO_INCREMENT;'); 
```

然后重做迁移，密钥将在表 tableName 中创建名称 id 然后您可以像访问任何其他密钥一样访问它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-18T09:38:29.780

我认为如果不修改核心文件就无法完成，因为创建 auto_increment 会自动使其成为主键。

如果您可以在 Larvel 框架开发中将其报告为错误，那就更好了。团队。

[这里](https://github.com/laravel/framework/issues) 谢谢:)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-23T17:32:19.843

是的，您可以在 Items 类的模型声明中执行此操作

```
class Items extends Eloquent {
   /**
 * Indicates if the IDs are auto-incrementing.
 *
 * @var bool
 */
public $incrementing = false;

} 
```

现在您的主键不再是自动递增字段。

# python - 星号python agi问题

> ID：15391851
> 
> 赞同：1
> 
> 时间：2013-03-13T17:06:29.850
> 
> 标签：python, asterisk, agi

我有带有pyst lib的基本python agi代码：

extensions.conf

```
[from-internal]
exten => _.,1,answer()
exten => _.,2,AGI(test.py) 
```

我在 /var/lib/asterisk/agi-bin 中有 test.py 作为

```
#!/usr/bin/python
import sys
import os
from agi import AGI
def test_call(agi = None,text = ""):
    agi.say_alpha(text, "#")
    agi.hangup()
if __name__ == "__main__":
    text = 'abcdefr'
    agi = AGI()
    test_call(agi,text) 
```

我有一个来自 pyst lib 的文件 agi.py。

当我尝试调用这个 agi 时，我遇到了这个问题

```
Executing [123@from-internal:1] Answer("SIP/12345-00000016", "") in new stack
[Mar 14 00:01:29] NOTICE[2790]: res_rtp_asterisk.c:2358 ast_rtp_read: Unknown RTP codec 126 received from '169.254.38.82:20338'
    -- Executing [123@from-internal:2] AGI("SIP/12345-00000016", "test.py") in new stack
    -- Launched AGI Script /var/lib/asterisk/agi-bin/test.py
 test.py: Failed to execute '/var/lib/asterisk/agi-bin/test.py': No such file or directory
    -- Auto fallthrough, channel 'SIP/12345-00000016' status is 'UNKNOWN'
    -- Executing [h@from-internal:1] Hangup("SIP/12345-00000016", "") in new stack
  == Spawn extension (from-internal, h, 1) exited non-zero on 'SIP/12345-00000016' 
```

我看到我在 /var/lib/asterisk/agi-bin 中有这个文件，其中 777 权限。

请建议让这个基本脚本工作。

提前谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T03:40:16.930

这种错误可能有两个原因：

1.  在该位置没有文件 /var/lib/asterisk/agi-bin/test.py 或由于某种原因无法被星号访问 - linux 一般权限问题。
2.  文件 /var/lib/asterisk/agi-bin/test.py，但没有一些库（python 给出相同的错误）。这个更有可能。尝试从星号用户执行脚本手册，看看它说了什么。

推荐：使用 FastAGI 代替 AGI。

# php - 从while sql查询中获取唯一数据（多行）

> ID：15391852
> 
> 赞同：0
> 
> 时间：2013-03-13T17:06:31.610
> 
> 标签：php, sql, tags, cloud, smarty

如何从此代码中仅获得唯一结果？我只是尝试使用 SQL SELECT DISTINCT 语句进行查询并且不工作:(

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

include_once ('/var/www/video/configs/db.php'); 

$query = @mysql_query("SELECT * FROM videos ORDER BY VIDEOID ASC LIMIT 0,10");
while($row = @mysql_fetch_array($query)){ $tags = $row['tags']; }

$rand = rand(5, 55);
$list  = explode(',', $tags);
foreach ($list as $link) { 
$tags = array( array('tag' => "$link", 'num' =>  $rand, 'link' => "$link"), ); 

$array = array_unique($tags); print_r($array);

}
?> 
```

只需要在我的网站上实现它

[http://www.xarg.org/2008/08/tag-cloud-plugin-for-smarty/](http://www.xarg.org/2008/08/tag-cloud-plugin-for-smarty/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:19:01.397

要从数据库中获得唯一`tags`性，您必须正确构建查询。建议：

```
SELECT DISTINCT tags FROM videos ORDER BY videoid ASC LIMIT 0, 10 
```

这应该返回 unique `tags`。

此外，了解您的代码在做什么是编程时的关键。以下不是您想要执行的操作：

```
while($row = @mysql_fetch_array($query)){ $tags = $row['tags']; } 
```

这是抓取每一行并覆盖`$tags`每次，这意味着您只会抓取最后一个标签。你想构建一个标签数组：

```
while($row = @mysql_fetch_array($query)){ $tags[] = $row['tags']; } 
```

这就是说每次都添加一个新的数组项。`foreach`你通过覆盖在你的声明中做同样的事情`$tags`。

然后你可以通过删除不需要的引号来使你的代码更整洁

```
$tags = array( array('tag' => "$link", 'num' =>  $rand, 'link' => "$link"), );
                              ^     ^                             ^     ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:10:07.360

如果您想获得 unique `tags`，请尝试此查询...

```
SELECT DISTINCT tags FROM videos ORDER BY VIDEOID ASC LIMIT 0, 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:10:09.007

你需要指定你需要什么是 DISTINCT

```
SELECT DISTINCT MyColumnName FROM videos ORDER BY VIDEOID ASC LIMIT 0,10 
```

# android - 使用 HttpURLConnection 跟随 HTTPS 重定向

> ID：15391853
> 
> 赞同：0
> 
> 时间：2013-03-13T17:06:32.923
> 
> 标签：android, http, https, httpurlconnection

当我的应用程序发出重定向到另一个 HTTPS url 的 HTTPS 请求时，我遇到了问题。

使用 HTTP 到 HTTP 重定向我没有问题。

在此之前，我曾使用 HttpPost 和 HttpGet 请求解决任何重定向问题，但在这样做的过程中，我没有上传大于 2 MB 的文件。

我写的代码：

```
 public Bundle getResponseFromHttpRequest(Bundle requestBundle) {
    /*
     * TO DO:
    httpRequest (bundle):
     headers: bundle
     params: bundle
     url: String
     method: {GET, POST}
    */

    String urlString = requestBundle.getString("url");
    String method = requestBundle.getString("method");
    Bundle headersBundle = requestBundle.getBundle("headers");
    Bundle paramsBundle = requestBundle.getBundle("params");
    Bundle responseBundle = new Bundle();

    try {
        URL url = new URL(urlString);
        HttpURLConnection connection = (HttpURLConnection)url.openConnection();
        if (headersBundle != null) {
            Set<String> nameHeaders = headersBundle.keySet();
            for (String nameHeader : nameHeaders) {
                String valueHeader = headersBundle.getString(nameHeader);
                connection.setRequestProperty(nameHeader, valueHeader);
            }
            //selectRequestFromMethod(method, getRequest, postRequest).setParams(params);
        }
        HttpsURLConnection.setFollowRedirects(true);
        HttpURLConnection.setFollowRedirects(true);
        connection.setInstanceFollowRedirects(true);
        if (paramsBundle != null) {
            Set<String> nameParams = paramsBundle.keySet();
            ByteArrayOutputStream baosParams = new ByteArrayOutputStream();
            for (String nameParam : nameParams) {
                baosParams.write(URLEncoder.encode("&",HTTP.UTF_8).getBytes(HTTP.UTF_8));
                baosParams.write(URLEncoder.encode(nameParam,HTTP.UTF_8).getBytes(HTTP.UTF_8));
                baosParams.write(URLEncoder.encode("=",HTTP.UTF_8).getBytes(HTTP.UTF_8));
                baosParams.write(URLEncoder.encode(paramsBundle.getString(nameParam),HTTP.UTF_8).getBytes(HTTP.UTF_8));
            }
            if (method.equals("POST")) {
                //HttpEntity byteArrayEntity = new ByteArrayEntity(baosParams.toByteArray());
                //postRequest.setEntity(byteArrayEntity);
                connection.setRequestMethod("POST");
                connection.setDoOutput(true); //pra poder enviar datos: petición POST.
                connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
                connection.setRequestProperty("Content-Length",""+baosParams.size());
                connection.setRequestProperty("Accept-Encoding", "identity");
                connection.setFixedLengthStreamingMode(baosParams.size());
                OutputStream outputStream = connection.getOutputStream();

                outputStream.write(baosParams.toByteArray());
                outputStream.close();

                connection.disconnect();

                Map<String, List<String>> headers = connection.getHeaderFields();

                Set<String> headerNames = headers.keySet();

                Bundle responseHeadersBundle = new Bundle();

                for (String headerName : headerNames) {
                    List<String> headerValues = headers.get(headerName);
                    String [] headerValuesStr = new String[headerValues.size()];
                    headerValues.toArray(headerValuesStr);
                    responseHeadersBundle.putStringArray(headerName, headerValuesStr);
                }
                responseBundle.putBundle("headers", responseHeadersBundle);

                Log.v("HTTP UTIL CONNECTION","RESPONSE CODE: " + connection.getResponseCode());

                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));

                String line;
                StringBuilder content = new StringBuilder();
                while ((line = bufferedReader.readLine()) != null) {
                    content.append(line + "\n");
                }
                bufferedReader.close();

                String contentString = content.toString();

                responseBundle.putString("content", contentString);

                if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    Log.v("HTTP UTIL CONNECTION","response code 200");

                }
            }
            else if (method.equals("GET")) {
                connection.setRequestMethod("GET");
                connection.setDoOutput(false);

                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                String line;
                StringBuilder content = new StringBuilder();
                while ((line = bufferedReader.readLine()) != null) {
                    content.append(line + "\n");
                }
                bufferedReader.close();

                String contentString = content.toString();

                responseBundle.putString("content", contentString);
            }
            else {
                Log.v("INVALID METHOD",method);
                return null;
            }
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return responseBundle;
} 
```

# javascript - Javascript原型范围和递归问题

> ID：15391855
> 
> 赞同：1
> 
> 时间：2013-03-13T17:06:34.623
> 
> 标签：javascript, recursion, prototype, concat

所以我认为我在 javascipt 范围界定和原型领域掉下了悬崖。我正在尝试用对象构建一个简单的树结构。构建树没有问题，但是当我尝试让所有孩子一起时，我似乎无法将它们连接在一起。我已经浏览了代码，似乎正在发生一些奇怪的范围界定问题，我无法弄清楚。这是我的代码：

```
var Foo = function (value) {
    this.value = value;
    this.children = [];
}

Foo.prototype.getAllChildren = function () {
    var childs = [];
    for (var i = 0; i < this.children.length; i++) {
        childs.push(this.children[i]);
        childs.concat(this.children[i].getAllChildren());
    }
    return childs;
};

var foo1 = new Foo(1),
    foo2 = new Foo(2),
    foo3 = new Foo(3);

foo1.children.push(foo2);
foo2.children.push(foo3);

var children = foo1.getAllChildren(),
    expected = foo1.children.concat(foo2.children); 
```

我在这里创建了一个小提琴，显示了上面[http://jsfiddle.net/e2zf8/1/代码的结果](http://jsfiddle.net/e2zf8/1/)

当 getAllChildren 函数应该返回一个包含两个 Foo 的列表时，它只为 foo1 返回一个包含一个 Foo 的列表。（是的，Foo 是 Foo 的复数形式）。它似乎与递归、作用域和原型作用域有关。我似乎无法确定我的错误，任何帮助（或我的问题）都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:11:06.523

不，范围界定和原型都没有问题。

只有[数组`concat`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)不会修改它所应用的数组，而是返回连接的新数组。您的代码`childs`保持不变。两种可能：

*   用于每次用新数组`childs = childs.concat(…)`覆盖`childs`
*   通过使用循环或.将每个推`getAllChildren`送到您的数组中。`childs``[].push.apply(childs, this.children[i].getAllChildren())`

# c# - 如何根据图片框的大小生成图片

> ID：15391856
> 
> 赞同：0
> 
> 时间：2013-03-13T17:06:36.377
> 
> 标签：c#

我根据图片框的大小生成图片，并将图片设置为大小模式正常但完整图像不显示的图片框，图片的一小部分区域被切断。我想以这样的方式生成图片，因此当我将图片设置在图片框上时，应该显示完整的图像。这是我生成图片的代码

```
 new Bitmap _lastSnapshot = new Bitmap(261, 204);
    this.DrawToBitmap((Bitmap)_lastSnapshot, new Rectangle(Point.Empty, ((Bitmap)_lastSnapshot).Size)); 
```

**261, 204是图片框大小，**图片大小模式正常。我在生成后将lastSnapshot分配给图片框，但未显示完整图片。

我有一个根据图片框大小调整图像大小的例程。它运作良好，但图像看起来变得模糊或不清晰。我必须设置图片框大小模式拉伸以将图像填充到图片框中。

## 这是我用来根据图片框大小调整图片大小的例程。

```
public static Image ResizeImage(Image image, Size size, 
    bool preserveAspectRatio = true)
{
    int newWidth;
    int newHeight;
    if (preserveAspectRatio)
    {
        int originalWidth = image.Width;
        int originalHeight = image.Height;
        float percentWidth = (float)size.Width / (float)originalWidth;
        float percentHeight = (float)size.Height / (float)originalHeight;
        float percent = percentHeight < percentWidth ? percentHeight : percentWidth;
        newWidth = (int)(originalWidth * percent);
        newHeight = (int)(originalHeight * percent);
    }
    else
    {
        newWidth = size.Width;
        newHeight = size.Height;
    }
    Image newImage = new Bitmap(newWidth, newHeight);
    using (Graphics graphicsHandle = Graphics.FromImage(newImage))
    {
        graphicsHandle.InterpolationMode = InterpolationMode.HighQualityBicubic;
        graphicsHandle.DrawImage(image, 0, 0, newWidth, newHeight);
    }
    return newImage;
} 
```

调用例程

```
ResizeImage(value,pictureBox1.Size,true); 
```

任何人都可以给出一些建议来生成和调整图片大小以适应具有良好清晰图像的图片框。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T08:32:57.270

If you want to preview of image in picturebox according to picturebox size then: Change PictureBox property SizeMode to Zoom.

```
pictureBox1.SizeMode = PictureBoxSizeMode.Zoom; 
```

# javascript - JavaScript - 通过在 HTML5 画布上单击存储在对象内数组中的图像来获取对象的属性

> ID：15391857
> 
> 赞同：0
> 
> 时间：2013-03-13T17:06:36.920
> 
> 标签：javascript, html5-canvas, kineticjs

我有以下 JS 对象：

```
var sources = {
        assets: [],
        liabilities: [],
        income: [],
        expenditure: []
    } 
```

如您所见，这个对象包含许多 JS 数组。我使用以下行将 HTML 中隐藏部分中的一些图像添加到这些数组中：

```
sources.assets[0] = document.getElementById("building").src,
sources.assets[1] = document.getElementById("chair").src,
sources.liabilities[0] = document.getElementById("burger").src,
sources.liabilities[1] = document.getElementById("chips").src, 
```

我现在想要做的是：当`mousedown`在画布上的这些图像之一上检测到单击（或）时，我想找出该图像属于对象内的哪个数组，并保存该数组的值（即数组名称-资产/负债等）到一个变量。

但是我不确定如何找到它...当检测到单击时，我尝试使用以下行打印图像属性的内容：

```
console.log("value of variable obj:" + output + ". Shape is " + obj.shape + ". index is " + obj.shape.index); 
```

但这只是在控制台中给了我以下打印输出

```
value of variable obj:shape: [object Object]; pixel: [object Uint8ClampedArray]; . Shape is [object Object]. index is 7 
```

在控制台中。

我正在使用 KineticJS 库的本地副本将图像绘制到画布上，并且我知道该变量`obj`是`mousedown`在 kineticJS 库中的函数中使用的变量。

用户需要将每个“可拖动”图像拖到其对应的描述框（位于画布上）。

我想知道的是如何找出被点击的图像属于哪个数组，以便我可以将该数组的名称与用户拖动“点击”的图像的名称进行比较图像到：如果它们相同，则用户已将图像拖到正确的描述框，否则，则他们做出了错误的选择。

有谁知道我如何找出点击的图像属于哪个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:56:16.607

当您创建 kineticJS 图像时，将每个图像的“名称”属性设置为图像类型，如下所示：

```
var chair = new Kinetic.Image({
      x: 140,
      y: 20,
      name: chair,
      ...more... 
```

Then when an image is selected you use the selected object's .getName() to retrieve "chair".

从那里你做你的数组查找，一切都很好......

因此，您正在使用类似于 CSS 类名的“名称”属性。

# django - 如何让 Django 1.5 自定义用户模型和社交身份验证工作？

> ID：15391868
> 
> 赞同：7
> 
> 时间：2013-03-13T17:06:51.930
> 
> 标签：django, django-socialauth, django-1.5

据报道 Django Social Auth (0.7.22) 支持自定义用户模型，但我无法让它工作。

就我而言，我使用的是 Google 的 Oauth2，我使用的是非自定义用户模型。

使用自定义用户模型，我可以正确重定向到 Google 帐户页面，选择一个帐户进行登录，然后重定向到 LOGIN_ERROR_URL，没有消息或调试信息。

[为了简化调试，我在https://github.com/jonathanendersby/SocialAuthCustomUserModel](https://github.com/jonathanendersby/SocialAuthCustomUserModel)创建了一个简单的示例项目，其中包含最少的点点滴滴

有没有人让这个工作，他们能指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:10:53.300

这个问题现在在[https://github.com/jonathanendersby/SocialAuthCustomUserModel的 repo 中得到解决](https://github.com/jonathanendersby/SocialAuthCustomUserModel)

引用[https://github.com/omab](https://github.com/omab)：

> 问题是 create_user() 获得的参数，并非所有这些参数都在所有后端可用。
> 
> 通过用 django manager 中的方法签名替换方法签名，并将一些默认值设置为模型中的 first_name 和 last_name 字段，它可以正常工作。

# c# - 单击对象名称时弹出对象的信息

> ID：15391869
> 
> 赞同：1
> 
> 时间：2013-03-13T17:06:57.407
> 
> 标签：c#, asp.net-mvc, razor, popup

好的，所以，我在这里有这个美丽的景色：

```
<p>
    @using (Html.BeginForm("ConfirmSendItems", "Inventory"))
    {
        <table>
            <tr>
                <th>Item Name</th>
                <th>Other Actions</th>
            </tr>
            @for (int i = 0; i < Model.ListItems.Count; i++)
            {
                <tr>
                    <td>@Ajax.ActionLink(@Model.ListItems[i].m_OtrObj.m_ObjName.ToString(), "GetObjProperties", new {id = @Model.ListItems[i].m_ItemID}, new AjaxOptions{ HttpMethod = "GET", UpdateTargetId = "result", InsertionMode = InsertionMode.Replace, OnSuccess = "openPopup"})</td>
                </tr>
            }
        </table>
    }
</p> 
```

这些可爱的脚本在这里：

```
<script src="/Scripts/jquery-1.7.1.min.js"
        type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.js")" type="text/javascript"></script>
<script type="text/javascript">
    function openPopup() {
        alert("We have a new Pope-Up!");
        $("#result").dialog("open");
    }

</script> 
```

一旦我点击链接，它就会显示想要的消息

我想打开一个弹出窗口，在此处显示“/GetObjProperties/ 方法：

```
 public PartialViewResult GetObjProperties(int? id)
    {
        ObjInfo objToDisplay = m_ObjManager.GetObjByID(id);

        return PartialView(objToDisplay );
    } 
```

*** 编辑 ***

这是我的问题的简历：

我想在项目名称上创建一个链接，该链接将使用局部视图打开一个弹出窗口。

*** 编辑 2 ***

截至目前，当我点击时，什么也没做。但是，如果我右键单击链接并单击“在新窗口中打开”，我会得到确切的良好行为。问题仍然是弹出窗口没有打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:13:59.907

如果你需要一个弹出窗口，你需要这样做 -->

```
 <a href="#" onclick="Popup=window.open('testpage1.htm','Popup','toolbar=no,
  location=no,status=no,menubar=no,scrollbars=yes,resizable=no,
  width=420,height=400,left=430,top=23'); return false;">
  Test Window</a> 
```

一个基本的 html 示例；）

我希望这能回答您的问题，我发现很难理解您想要实现的目标。

检查这个

```
$(".objDialog").click(function() {
        alert("Card Name has been clicked!");
        window.open('/Inventory/GetCardProperties/', 'ObjProperties',
       'heigth=' + (window.screen.height - 100) + ', width=200, left=' +
       (window.screen.width - 250) + ',top=10,status=no,toolbar=no,resizable=yes,
        scrollbars=yes,location=no,menubar=no');
    }); 
```

# ios - 创建（彩虹）调色板

> ID：15391875
> 
> 赞同：1
> 
> 时间：2013-03-13T17:07:13.847
> 
> 标签：ios, colors

我想通过使用 UIColor (iOS) 类动态地创建一个调色板（在图像中看到下面的颜色）。 [调色板](http://i.stack.imgur.com/Na27o.png)

不幸的是，我没有太多使用色彩空间的经验。有人知道我该怎么做吗？

谢谢和欢呼，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:44:27.493

我做过非常相似的事情。我有我的彩虹图像，然后检测触摸事件并找到人触摸点的颜色。

并且因为懒惰，我使用了别人的代码！

Mark Johnson 编写了这个[`UIImageView`子类](https://github.com/IceMupppet/iOS-SAMPLE-colorpicker_from_image_pixel/blob/master/Classes/ColorPickerImageView.m)，它可以为触摸事件捕获图像的颜色。只需将其粘贴到您的视图层次结构中并设置图像。然后用类似的东西设置一个回调

```
[self.colorMapImageView addSelectedColorChangedListener:@selector(handleColorSelectionAction:) inObject:self];

// and then capture the data
- (void)handleColorSelectionAction:(UIColor *)color {
    NSLog(@"new color picked");
    self.selectedColor = color;
} 
```

# javascript - 在联系表单上使用 HTML5 localStorage，表单元素中的值不正确

> ID：15391883
> 
> 赞同：0
> 
> 时间：2013-03-13T17:07:27.450
> 
> 标签：javascript, local-storage

我正在创建一个非常基本的表单，我需要在输入/文本区域上使用 HTML5 localStorage。

这是HTML：

```
<div id="local-storage">
    <input name="name" type="text" placeholder="Name:">
    <input name="website" type="url" placeholder="Website:">
    <textarea name="message" placeholder="Message:"></textarea>
</div> 
```

到目前为止我的脚本：

```
(function () {
        var localStorageID = document.getElementById('local-storage');
        var inputTags = ['input', 'textarea', 'select', 'button'];

        for (var i = 0; i < inputTags.length; i++) {

            var localStorageTag = localStorageID.getElementsByTagName(inputTags[i]);
            var formData = {};
            for (var z = 0; z < localStorageTag.length; z++) {
                formData[localStorageTag[z].name] = localStorageTag[z].value;
            }
            localStorage.setItem('formData', formData);
            if (localStorage.getItem('formData')) {

            }

            for (var z = 0; z < localStorageTag.length; z++) {
                var currentLocalTag = localStorageTag[z];
                currentLocalTag.className += 'test';
                setInterval(function () {
                    localStorage.setItem('autosave', currentLocalTag.value);
                }, 1000);

                if (localStorage.getItem('autosave')) {
                    for (var i = 0; i < localStorageTag.length; i++) {
                        var currentLocalTags = localStorageTag[i];
                        currentLocalTags.value = localStorage.getItem('autosave');
                    }
                }
            }
        }
    })(); 
```

到目前为止我所做的是捕获数据，但我认为我在某个地方出错了，因为输入元素正在写入不正确的值。我对 JavaScript 相当陌生，所以这对我来说是一个巨大的学习曲线，并且非常感谢任何帮助。

到目前为止，这是表单的 JSFiddle，输入一些内容并等待几秒钟并刷新：http: [//jsfiddle.net/ZJZNf](http://jsfiddle.net/ZJZNf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:09:13.697

`localStorage`只存储字符串。如果要存储（不太重）对象，则必须对它们进行序列化。

例如，您可以使用 JSON：

```
// store
localStorage.setItem('formData', JSON.stringify(formData));

// read
var str = localStorage.getItem('formData');
if (str) formData = JSON.parse(str); 
```

# powershell - 需要复制扩展名为 .3GP 的文件

> ID：15391885
> 
> 赞同：0
> 
> 时间：2013-03-13T17:07:41.177
> 
> 标签：powershell, windows-7

我不确定为什么这个问题已经关闭并得到了分数，但如果没有人能回答它，那么有人可以指出我可以得到答案的方向吗？谢谢。这里又是：

该文件不会用`Get-ChildItem`或复制过来`Copy-Item`。这是未运行脚本的实际 powershell 窗口的输出：

```
PS C:\> Open-Device 10.42.233.237
Connecting to device '10.42.233.237' ...

Device Name : 10.42.233.237
Device IP   : 10.42.233.237
Device Host :

Run 'Get-Variable Device*' to see variables set for the connected session.

DEVICE C:\
PS C:\> Get-ChildItem -Path "V:\WP\QM\Audio\Decode\Automated" -Filter *.3g2 | Copy-Item -Destination C:\test\MinTE
DEVICE C:\
PS C:\> putd -Path "V:\WP\QM\Audio\Decode\Automated" -Filter "*.3g2" -Destination "C:\test\MinTE"
Put-Device : A parameter cannot be found that matches parameter name 'Path'.
At line:1 char:6
+ putd -Path "V:\WP\QM\Audio\Decode\Automated" -Filter "*.3g2" -Destination "C:\te ...
+      ~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Put-Device], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.Texus.Shells.PowerShell.PutFileDeviceCmdlet

DEVICE C:\
PS C:\> 
```

putd 是 Put-Device 的缩写。Get-ChildItem 和 Copy-Item 在连接到设备时不起作用。它们无法识别为 cmdlet 函数。这是获取想法的完整脚本：

```
param(
$SourcePath, $DestinationPath
)

# Display something just as a sanity check
Write-Output "Starting Setup";

# Waits to gather input
Start-Sleep -m 1000

# Connect to device
Open-Device $env:IP_Address | out-null

# Waits to establish a connection to the device
Start-Sleep -m 2000

# Copy a files to the device
Write-Output "Copying testcases and support files..."
putd $env:source\*.mp4 C:\test\MinTE | out-null
putd $env:source\*.mp3 C:\test\MinTE | out-null
putd $env:source\*.wma C:\test\MinTE | out-null
putd $env:source\*.m4a C:\test\MinTE | out-null
putd $env:source\*.amr C:\test\MinTE | out-null
putd $env:source\*.wav C:\test\MinTE | out-null
putd $env:source\*.3g2 C:\test\MinTE | out-null
putd $env:source\*.3gp C:\test\MinTE | out-null
putd $env:source\*.xml C:\test\MinTE | out-null

# Closes Connection to device
Close-Device

# Allows space for easy reading for the user
Write-Output " "
Write-Output " "
Write-Output " "
Write-Output " "

# Tells the user the script ran successfully
Write-Output "... Setup Successful (NO REBOOT REQUIRED)"

exit; 
```

执行批处理文件命令时，使用带有用户输入的两个变量的批处理文件调用此脚本。它已经过测试并适用于除“.3gp”和“.3g2”之外的所有其他文件类型。我注意到在 .ps1 脚本（使用 notpad++）的任何位置添加“3”时，颜色变为橙色，而在 .ps1 脚本（使用 notpad++）的任何位置添加“gp”时，颜色变为浅蓝色。这告诉我这两个可能是开关，但我不确定是什么。

此外，如果需要重现错误，这里是用于执行此脚本的批处理文件：

```
@echo off
::Conditions leading to errors if the batch script is not executed correctly
if "%1"=="" goto error1
if "%2"=="" goto error2

::Allows user to set the "Source Path" to copy the testcase files from
set source=%1
::Allows user to set the "Destination Path" to copy the testcase files from
set IP_Address=%2

:: Does a health check to ensure source path is valid
IF NOT EXIST "%source%" goto error3
:: Does a health check to ensure Device IP Address is valid
ping -n 1 -w 100 %IP_Address% 1>nul
if "%errorlevel%"=="1" goto error4

::Tells the user what the "Source" and "Destination" Paths are
echo Source Path = %1
echo Destination Path = %2
echo.
powershell.exe -File "BVT_AudioDecode_Automated.ps1" %1 %2 -NoProfile -NoExit

goto end
:error1
echo.
echo Error Syntax: BVT_AudioDecode_Setup.bat "Source_Path\AudioDecode_Testcase_Folder" "Device IP Address"
echo.
echo For example: BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237
echo              -or-
echo              BVT_AudioDecode_Setup.bat C:\WP\BVT\Audio\Decode 10.42.233.237
echo.
echo.
goto end
:error2
echo.
echo Error Syntax: BVT_AudioDecode_Setup.bat "Source_Path\AudioDecode_Testcase_Folder"     "Device IP Address"
echo.
echo For example: BVT_AudioDecode_Setup.bat V:\WP\BVT\Audio\Decode 10.42.233.237
echo              -or-
echo              BVT_AudioDecode_Setup.bat C:\WP\BVT\Audio\Decode 10.42.233.237
echo.
echo.
goto end
:error3
echo.
echo Error: Invalid Path
echo %source%
goto end
:error4
echo.
echo Error: Invalid IP Address
echo %IP_Address%
goto end
:end 
```

当我`Open-Device`运行. 如果没有人认出这个列表，那么也许我来错地方了：`Putd``get-command`

```
Cmdlet          Add-FederatedDeviceHost                            TexusCmdlets
Cmdlet          Add-FederatedEnvironment                           TexusCmdlets
Cmdlet          Add-VirtualMachine                                 TexusCmdlets
Cmdlet          CD-Device                                          TexusCmdlets
Cmdlet          Close-Device                                       TexusCmdlets
Cmdlet          Cmd-Device                                         TexusCmdlets
Cmdlet          Copy-Device                                        TexusCmdlets
Cmdlet          Create-FederatedVirtualDeviceHost                  TexusCmdlets
Cmdlet          Create-Federation                                  TexusCmdlets
Cmdlet          Debug-Device                                       TexusCmdlets
Cmdlet          Del-Device                                         TexusCmdlets
Cmdlet          Deploy-Device                                      TexusCmdlets
Cmdlet          Dir-Device                                         TexusCmdlets
Cmdlet          Exec-Device                                        TexusCmdlets
Cmdlet          Filter-Result                                      TexusCmdlets
Cmdlet          Get-ChildPrimitive                                 TexusCmdlets
Cmdlet          Get-Device                                         TexusCmdlets
Cmdlet          Get-ResultSummary                                  TexusCmdlets
Cmdlet          Get-SuiteName                                      TexusCmdlets
Cmdlet          Get-TaskOutputPath                                 TexusCmdlets
Cmdlet          Get-VirtualMachineNames                            TexusCmdlets
Cmdlet          Kill-Device                                        TexusCmdlets
Cmdlet          Merge-Reports                                      TexusCmdlets
Cmdlet          MkDir-Device                                       TexusCmdlets
Cmdlet          Mount-VirtualDisk                                  TexusCmdlets
Cmdlet          Move-Device                                        TexusCmdlets
Cmdlet          Open-Device                                        TexusCmdlets
Cmdlet          Put-Device                                         TexusCmdlets
Cmdlet          Reg-Device                                         TexusCmdlets
Cmdlet          Remove-FederatedDeviceHost                         TexusCmdlets
Cmdlet          Remove-VirtualMachine                              TexusCmdlets
Cmdlet          RmDir-Device                                       TexusCmdlets
Cmdlet          Set-VirtualMachine                                 TexusCmdlets
Cmdlet          Show-Result                                        TexusCmdlets
Cmdlet          Start-VirtualMachine                               TexusCmdlets
Cmdlet          Stop-VirtualMachine                                TexusCmdlets
Cmdlet          Test-Device                                        TexusCmdlets
Cmdlet          TList-Device                                       TexusCmdlets
Cmdlet          Type-Device                                        TexusCmdlets
Cmdlet          Unmount-VirtualDisk                                TexusCmdlets
Cmdlet          Validate-FederatedDeviceHost                       TexusCmdlets 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:09:35.877

我终于找到了答案！

```
PS U:\> get-help put-device -full

Do you want to run Update-Help?
The Update-Help cmdlet downloads the newest Help files for Windows PowerShell modules and installs them on your
computer. For more details, see the help topic at http://go.microsoft.com/fwlink ?LinkId=210614.
[Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"): y

NAME
    Put-Device

SYNOPSIS
    Copies one or more files from the host machine to the connected device.

SYNTAX
    Put-Device [-Source] [<string>] [[-Destination] [<string>]] [<CommonParameters>]

DESCRIPTION
    The Put-Device cmdlet copies one or more files from the host machine to the connected device.
    Absolute paths are used as-is and relative paths are treated relative to the
    current working directory, either on the device or the host.

PARAMETERS
    -Source [<string>]
        The path of the source file(s) on the host ('*' and '?' wildcards are supported).

        Required?                    true
        Position?                    0
        Default value
        Accept pipeline input?
        Accept wildcard characters?

    -Destination [<string>]
        The path of the destination file or directory on the device.
        If omitted, the current working directory on the device will be used.

        Required?                    false
        Position?                    1
        Default value
        Accept pipeline input?
        Accept wildcard characters?

    <CommonParameters>
        This cmdlet supports the common parameters: Verbose, Debug,
        ErrorAction, ErrorVariable, WarningAction, WarningVariable,
        OutBuffer and OutVariable. For more information, see
        about_CommonParameters (http://go.microsoft.com/fwlink/?LinkID=113216).

INPUTS

OUTPUTS

RELATED LINKS 
```

获得此信息后，这是解决问题的正确命令：

```
putd -Source "$env:source\*.3gp" -Destination "C:\test\MinTE" | out-null 
```

我会留下这个，以防有人可以从中吸取教训。

# java - 排除 JPQL“不在”的项目

> ID：15391891
> 
> 赞同：0
> 
> 时间：2013-03-13T17:07:56.933
> 
> 标签：java, hibernate, jpa, jpql

我想使用以下 JPQL 查询排除带有某些标签的项目：

```
select distinct i from Item i join i.tags t where t not in (:excludedTags) 
```

如果 an`item`只有一个`tag`并且它`tag`在`excludedTags`列表中，则它可以工作。但是，如果还有其他`tag`内容`item`，它仍然会被选中！

模型的相关部分：

```
@Entity
class Tag {
  @ManyToMany(mappedBy="tags")
  var items
}

@Entity
class Item {
  @ManyToMany
  var tags
} 
```

如何使用 JPQL 排除具有任何已排除标签的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:10:13.490

查询应该是这样的：

```
select distinct i from Item i where not exists (
    select t from Item i2 
    join i2.tags tag
    where i2.id = i.id
    and tag.id in :excludedTags) 
```

# c++ - 在 MFC 中委派来自 CMainFrame 的 OnUpdate... 消息

> ID：15391892
> 
> 赞同：0
> 
> 时间：2013-03-13T17:07:59.933
> 
> 标签：c++, winapi, mfc

我正在使用 MFC 并且有一个主框架，它从工具栏接收 WM_PASTE、WM_COPY 消息等。我想要做的是将此消息传递给具有焦点的 CPaneDialog，因为这是我希望粘贴文本的位置。

我已经弄清楚了如何使用以下方法将消息发送到正确的视图：

```
void CMainFrame::OnEditPaste()
{
  GetFocus()->SendMessage(WM_PASTE, 0);
} 
```

我现在要做的是询问表单是否可以接收粘贴消息。我想我可以通过传递命令 ui 消息来做到这一点......但我该怎么做呢？

```
void CMainFrame::OnUpdateEditPaste(CCmdUI *pCmdUI)
{
  if(GetFocus())
  {
    GetFocus()->???
  }
} 
```

如果有更好的方法来做到这一点，那么也请告诉我。

我努力了

```
ON_UPDATE_COMMAND_UI(ID_EDIT_PASTE, &CDerivedPaneDialog::OnUpdateEditPaste) 
```

在我派生的 CPaneDialog 中，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:21:54.157

MFC 使用*命令路由*来获取命令（和 UI 更新）到可以处理它们的代码。如果你修复了路由，这应该处理粘贴命令和它的 UI 更新。

本文介绍[默认路由](http://msdn.microsoft.com/en-US/library/shfzay75%28v=vs.80%29.aspx)。

本文介绍[如何更改路由](http://msdn.microsoft.com/en-US/library/ytfexb5k%28v=vs.80%29.aspx)。

基本上，您[`OnCmdMsg`](http://msdn.microsoft.com/en-US/library/k63bsef7%28v=vs.80%29.aspx)在框架中覆盖并`OnCmdMsg`在窗格中调用 以查看它是否要处理消息。如果没有，则调用基类进行标准处理。

# android - Android强制在imageview上关闭

> ID：15391896
> 
> 赞同：0
> 
> 时间：2013-03-13T17:08:24.800
> 
> 标签：android

在文件夹 res/drawable/ 我已经存储了我的图像 pic.jpg，但是当我在我的设备上运行它时，应用程序强制关闭。android项目是自动生成的，除了我将包含所有内容的RelativeLayout更改为LinearLayout。在此 LinearLayout 中，我只编写了一个 ImageView。应用程序力关闭而不显示任何内容。请问，我做错了什么？

相关的 XML：

```
<ImageView
    android:layout_width="85dp"
    android:layout_height="85dp"
    android:src="@+drawable/pic"
    android:contentDescription="@string/none" 
/> 
```

这是日志猫：

```
03-13 12:56:54.920: E/AndroidRuntime(21033): FATAL EXCEPTION: main
03-13 12:56:54.920: E/AndroidRuntime(21033): java.lang.RuntimeException: Unable to     start activity ComponentInfo{com.example.imageshow/com.example.imageshow.MainActivity}: android.view.InflateException: Binary XML file line #17: Error inflating class   android.widget.ImageView
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.os.Looper.loop(Looper.java:130)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread.main(ActivityThread.java:3691)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at java.lang.reflect.Method.invokeNative(Native Method)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at java.lang.reflect.Method.invoke(Method.java:507)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at dalvik.system.NativeStart.main(Native Method)
03-13 12:56:54.920: E/AndroidRuntime(21033): Caused by: android.view.InflateException: Binary XML file line #17: Error inflating class android.widget.ImageView
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:215)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.Activity.setContentView(Activity.java:1679)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at com.example.imageshow.MainActivity.onCreate(MainActivity.java:12)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-13 12:56:54.920: E/AndroidRuntime(21033):    ... 11 more
03-13 12:56:54.920: E/AndroidRuntime(21033): Caused by: java.lang.reflect.InvocationTargetException
03-13 12:56:54.920: E/AndroidRuntime(21033):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
03-13 12:56:54.920: E/AndroidRuntime(21033):    ... 22 more
03-13 12:56:54.920: E/AndroidRuntime(21033): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x12/d=0x0 a=3 r=0x7f020001}
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.content.res.Resources.loadDrawable(Resources.java:1907)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.content.res.TypedArray.getDrawable(TypedArray.java:653)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.widget.ImageView.<init>(ImageView.java:118)
03-13 12:56:54.920: E/AndroidRuntime(21033):    at android.widget.ImageView.<init>(ImageView.java:108)
03-13 12:56:54.920: E/AndroidRuntime(21033):    ... 25 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:10:03.000

```
android:src="@+drawable/pic" 
```

应该没有`+`标志。访问`/res/drawable`资源是不变的——它们不能动态生成，所以`+`不应该工作。

```
android:src="@drawable/pic" 
```

还要确保将您的`pic`图片文件*复制* **到**可绘制文件夹中。从文件系统链接是不一样的，因为文件*实际上*不在文件夹中。链接会导致*`no resource found that matches the given name`*错误。

# .net - 当一个刻度溢出时会发生什么？

> ID：15391897
> 
> 赞同：1
> 
> 时间：2013-03-13T17:08:26.170
> 
> 标签：.net, datetime, overflow, clock

这个问题的主题是日期和时间计算。

.NET 与许多其他平台一样，严重依赖于某种形式的最小离散时间表示，例如[`DateTime.Ticks`](http://msdn.microsoft.com/en-gb/library/system.datetime.ticks.aspx). 刻度是一种[`Int64`](http://msdn.microsoft.com/en-gb/library/system.int64.aspx)最大值约为 9 * 10 ^(18)的类型。

假设 .NET 时钟从 1-JAN-0001 开始滴答作响，按照我的粗略计算，滴答声需要大约 30 000 年才能达到`Int64.MaxValue`.

**问题是**：如果明年发生这种溢出，处理这种溢出的一般方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:13:42.650

我认为，就像许多 COBOL 程序中存在的 Y2K 错误一样，您将不得不移动根或扩展值。现在，为了使该陈述不那么抽象，假设他们移动了根 - 所以它不再是`1-JAN-0001`，它可能是`1-JAN-1001`。

那会引起一些问题。这就是在 COBOL 中必须解决 Y2K 错误的方式，所以当`2040`很多商店滚动时，他们将不得不再次更改滚动日期，或者延长价值。

在他们的例子中，扩展值仅仅意味着使用 4 位数的年份，但在那些 MF 程序中并不总是那么简单，因为数据并不总是存储在数据库中，很多时候它是在 VSAM 文件或其他东西上。

所以，这就是我认为会发生的事情，随着计算继续变得更大更快（但更小......嗯），你会发现他们只会将值从 say `Int64`to扩展到`Int128`并将根留在它所在的位置。这将产生我能想到的零负面影响，因此这将是最安全的方法。

# javascript - 在 Ember 中观察 ChildView 的正确方法？

> ID：15391898
> 
> 赞同：1
> 
> 时间：2013-03-13T17:08:31.753
> 
> 标签：javascript, model-view-controller, ember.js, javascript-framework

这是这个问题的一个[小提琴](http://jsfiddle.net/EsF4R/174/)（确保你的控制台打开）：

基本上，我有一个车把块视图作为父级，然后循环遍历一组项目并为每个项目创建子块视图。后来，那些孩子以某种方式被修改了，我想检测并处理那个事件。

摘要代码：

```
{{#view App.outerView}}
    {{#each item in items}}
        <h6>Person:</h6>
        {{#view App.innerView}}
            <dl>
                <dt>First Name</dt><dd>{{item.first}}</dd>
                <dt>Last Name</dt><dd>{{item.last}}</dd>
            </dl>
        {{/view}}
    {{/each}}
{{/view}} 
```

在稍后的某个时间点：

```
controller.get( 'items' ).pushObject( 'new item' ); 
```

在 jsFiddle 中，我试图保持最后一个子对象始终突出显示（活动 = true）。当最初插入 outerView 时，我们将高亮应用到最后一项，它按预期工作。稍后，当我们添加一个新项目时，我们的 highlight 方法会触发，但它看不到新项目。

2关于此的问题：

*   **主要问题**：为什么最后一项（马特）没有突出显示？换句话说，为什么在添加了新项目后，`childViews.length`仍然报告旧值？有没有更好的方法来做到这一点？

*   **次要问题**：为什么`childViews`添加新项目时观察者会着火两次？（总共 3 次：初始插入 1 次，添加 1 个新子项时 2 次）

* * *

**编辑**：我已经稍微调整了小提琴以更好地说明我的需求。注意outerView（HTML + innerViews）的混合内容。基本上，我的 outerView 需要接受任何内容作为子项，而不仅仅是视图/数据的数组/集合。

**编辑2**：进一步澄清：事后操作这些子视图是一个不同的故事，可以通过使用`childViews`（ember视图）的内容或使用jQuery来操作可能不是正式的ember视图对象的HTML元素来完成，或者任何其他方式。*这里的真正目标只是在任何 outerView 内容发生变化时捕获事件（使用 childViews 的当前副本）。*

**编辑 3**：这是[Github 上的一个问题](https://github.com/emberjs/ember.js/issues/2355)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:32:32.480

您的初始代码看起来有点复杂。这是实现相同结果的更好方法：

[http://jsfiddle.net/XaN8T/1/](http://jsfiddle.net/XaN8T/1/)

您应该将每个项目包装在一个控制器中，这很容易使用`{{each}}`助手完成：

```
<script data-template-name="application" type="text/x-handlebars">
    This is a list:
    <ul>
        {{each controller itemController="item" itemViewClass="App.ItemView"}}
    </ul>
</script> 
```

并为您的项目创建一个单独的模板：

```
<script data-template-name="item" type="text/x-handlebars">
    <h6>Person:</h6>
    <div {{bindAttr class=":content active"}}>
        <dl>
            <dt>First Name</dt><dd>{{first}}</dd>
            <dt>Last Name</dt><dd>{{last}}</dd>
        </dl>
    </div>
</script> 
```

然后你可以利用[`needs`](http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/)Ember 中的计算属性和`active`属性：

```
App.ItemController = Ember.ObjectController.extend({
    needs: ['application'], //This way each ItemController can access the ApplicationController's content (i.e. the list of all items)
    active: function() {
        return this.get('controllers.application.lastObject') === this.get('content');
    }.property('controllers.application.lastObject')
}); 
```

然后`App.ItemView`将其 css 类绑定到控制器的`active`属性：

```
App.ItemView = Ember.View.extend({
    tagName: 'li',
    templateName: 'item',
    classNameBindings: ['controller.active']
}); 
```

瞧！有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:35:44.487

完成您在小提琴中完成的工作的更好方法是使用[Ember.CollectionView](http://emberjs.com/api/classes/Ember.CollectionView.html)

然后添加一个计算属性，该属性确定孩子是否是班级的`itemViewClass`最后`active`一个

```
active: function () {
  return this.get("elementId") === this.get("parentView.childViews.lastObject.elementId");
}.property('parentView.childViews.length'), 
```

这是一个 [工作小提琴](http://jsfiddle.net/EsF4R/172/)

**注意**每当需要根据您的要求处理使用`CollectionView`或[Ember.ContainerView](http://emberjs.com/api/classes/Ember.ContainerView.html)的视图集合（这可以更好地控制子视图操作）时，但对于大多数情况`Ember.CollectionView`就足够了

# asp.net-mvc-3 - Session / TempData 的长期使用和冲突

> ID：15391899
> 
> 赞同：0
> 
> 时间：2013-03-13T17:08:36.137
> 
> 标签：asp.net-mvc-3, session, session-timeout, tempdata

我有一个 MVC3 Web 应用程序，它使用默认的“进程中”会话。我有 PRG 模式 - 如果我的模型状态无效，则在回发时，我将模型存储在 TempData 中并重定向到原始 get 操作。在获取操作中，我获取模型数据（如果存在）并发送到视图。我相信这是 MVC 的基本方面之一。

> 我了解到后台的 TempData 是一个会话变量，用于 PRG 转换。我需要知道的是是否有可能发生冲突或交叉引用 - 如果我在两个页面中使用 TempData["model"] 之类的东西并同时访问这些页面。是否会覆盖 TempData["model"] 中的公共数据，或者如果我在两个不同的页面中使用相同的临时数据名称是否安全。

它是否与 Session["model"] 类型的数据冲突？我正面临一些意外的会话数据损坏 - 可能是由于我的内部代码重置了会话数据或其他原因。会话数据是否有可能部分损坏？我的意思是 Session["data1"] 没问题，但 Session["data2"] 不见了？

*我的用户经常长时间使用网络应用程序导致会话超时。*我为会话尝试了 ASP.Net 会话状态服务，但这导致了性能问题，因为我在会话中存储了一些重对象（通过序列化）。所以最后我回到了进程模式下的原始默认值。

如果您有任何类似的经历，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:34:32.570

TempData 默认使用 SessionState，对 SessionState 的访问默认是独占的。所以，如果你做两个并发请求，一个必须等​​待另一个释放 SessionState 锁。TempData 不会直接干扰使用 SessionState。由于 SessionState 默认使用 in-proc，它几乎可以随时失效。

您可能想看看[http://brockallen.com/2012/06/11/cookie-based-tempdata-provider/](http://brockallen.com/2012/06/11/cookie-based-tempdata-provider/)

# java - 使用 jaxb2 的多个相关模式

> ID：15391900
> 
> 赞同：0
> 
> 时间：2013-03-13T17:08:38.677
> 
> 标签：java, jaxb2, maven-jaxb2-plugin

我将 jaxb2 用于休息网络服务。

我需要使用两个模式。一个是我自己的架构，存储在 src/main/resources/schema 文件夹中，另一个架构是在线架构[http://mypage.com/1/meta/schema.xsd](http://mypage.com/1/meta/schema.xsd)。问题是两个模式都有重复的导入，所以当我尝试构建包时，它给我一个关于两个执行的问题，说某些类之前已经定义过。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:11:24.617

您可以为此使用单独的模式编译，即在每个模式文件中创建一个 JAR。

# c# - 我在哪里放置代码来记录成功的文件创建？

> ID：15391902
> 
> 赞同：0
> 
> 时间：2013-03-13T17:08:47.743
> 
> 标签：c#, logging

在下面的代码中， .GenerateFile() 返回一个流。这是 WCF 服务，它在给定用户参数的情况下将文件流式传输回用户的浏览器。Webforms 应用程序在浏览器中运行，WCF 服务称为服务器端。

问题是，我在哪里放置代码来记录生成文件的成功尝试？如果我将日志记录代码放在对 .GenerateFile() 的调用之上，则无法保证成功。如果成功，则完成此方法（返回关键字）。我该怎么办？

```
 // Other stuff in method
    .
    .
    .
    try
    {
        return this.GenerateFile(xyz1, xyz2);
    }
    catch (Exception ex)
    {
        Msg.SendException(ex);

        Logger.LogException(ex);

        return null;
    }
} // End of Method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:12:53.290

只需将 GenerateFile 的结果存储在一个变量中，记录成功然后返回存储的结果。

```
try
{
    var result = this.GenerateFile(xyz1, xyz2);
    Log("success");
    return result;
} 
```

# git - 我的提交是如何在交互式变基期间丢失的？

> ID：15391904
> 
> 赞同：2
> 
> 时间：2013-03-13T17:08:49.680
> 
> 标签：git

我在一个分支上有四个线性提交，我使用`git rebase --interactive`. 他们是：

```
small fixes to irrelevant files
FeedbackViewController tests
live feedback tests
poke build bot 
```

我设法丢失了名为“FeedbackViewController”的提交。现在我只有：

```
small fixes to irrelevant files
live feedback tests
poke build bot 
```

我在哪里丢失了这个提交，我怎样才能在第三旧的提交处找回它？这是输出`git reflog --date=relative`：

```
b2681e4 HEAD@{21 seconds ago}: rebase -i (finish): returning to refs/heads/end
b2681e4 HEAD@{24 seconds ago}: checkout: moving from end to b2681e4
b2681e4 HEAD@{31 minutes ago}: rebase finished: returning to refs/heads/end
b2681e4 HEAD@{31 minutes ago}: rebase: small fixes to irrelevant files
6f80728 HEAD@{31 minutes ago}: rebase: live feedback tests
56b5212 HEAD@{31 minutes ago}: rebase: poke build bot
10bc997 HEAD@{33 minutes ago}: checkout: moving from end to 10bc997faa7d5cad52c5b3f1dc25816c13220187^0
422f15a HEAD@{25 hours ago}: rebase finished: returning to refs/heads/end
422f15a HEAD@{25 hours ago}: rebase: small fixes to irrelevant files
79d7596 HEAD@{25 hours ago}: pull --rebase: live feedback tests
52072ec HEAD@{25 hours ago}: pull --rebase: poke build bot
62c8870 HEAD@{25 hours ago}: checkout: moving from end to 62c887017d969d98ec5874698c82f94523fe5ac6^0
ca2f134 HEAD@{25 hours ago}: rebase finished: returning to refs/heads/end
ca2f134 HEAD@{25 hours ago}: rebase: small fixes to irrelevant files
8bce052 HEAD@{25 hours ago}: rebase: FeedbackViewController tests
d581615 HEAD@{25 hours ago}: rebase: live feedback tests
c9adb82 HEAD@{25 hours ago}: rebase: poke build bot
e556052 HEAD@{26 hours ago}: checkout: moving from end to e556052f0db5c674e4145e56001df08cb809f936^0
399758d HEAD@{26 hours ago}: rebase finished: returning to refs/heads/end
399758d HEAD@{26 hours ago}: rebase: small fixes to irrelevant files
3f6385d HEAD@{26 hours ago}: rebase: FeedbackViewController tests
ba01791 HEAD@{26 hours ago}: rebase: live feedback tests
e9159db HEAD@{26 hours ago}: rebase: poke build bot 
```

**附加问题**：

我对这些行特别好奇：

```
422f15a HEAD@{25 hours ago}: rebase finished: returning to refs/heads/end
422f15a HEAD@{25 hours ago}: rebase: small fixes to irrelevant files
79d7596 HEAD@{25 hours ago}: pull --rebase: live feedback tests
52072ec HEAD@{25 hours ago}: pull --rebase: poke build bot 
```

我是如何做到`pull --rebase`和`rebase`在同一条线上的？通常，当我执行 a 时`pull --rebase`，它会同时更新所有四个，如下所示：

```
18cb678 HEAD@{2 days ago}: rebase finished: returning to refs/heads/end
18cb678 HEAD@{2 days ago}: pull --rebase: small fixes to irrelevant files
744ce78 HEAD@{2 days ago}: pull --rebase: FBFeedbackViewController tests
7fd9af4 HEAD@{2 days ago}: pull --rebase: live feedback tests
1b7aa06 HEAD@{2 days ago}: pull --rebase: update feedback when MQTT message is received 
```

**解决方案**：

通过使用`git reflog branch-name`而不是`git reflog`，我可以看到整个变基操作的一个条目，因此我可以在我的项目中回到那个状态。

的输出`git reflog branch-name --date=relative`如下所示：

```
b2681e4 end@{71 minutes ago}: rebase finished: refs/heads/end onto 10bc997faa7d5cad52c5b3f1dc25816c13220187
422f15a end@{26 hours ago}: rebase finished: refs/heads/end onto 62c887017d969d98ec5874698c82f94523fe5ac6
ca2f134 end@{26 hours ago}: rebase finished: refs/heads/end onto e556052f0db5c674e4145e56001df08cb809f936
399758d end@{26 hours ago}: rebase finished: refs/heads/end onto 9276926e7fe7417db622e42da44e54eac4db1f85
a8ca29d end@{2 days ago}: rebase -i (finish): refs/heads/end onto bfe8d25
18cb678 end@{2 days ago}: rebase finished: refs/heads/end onto 967a525790be38e06b42ff314f47821ec867403f
21c2da4 end@{2 days ago}: rebase finished: refs/heads/end onto f94d81aa5c3ecf6445db06692dee4f6c40d96c0b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:17:22.707

要么你不小心从交互式 rebase 配方列表中删除了它，要么它最终与你在 rebase 之上的提交相同，因此被跳过。

# wolfram-mathematica - Mathematica - 我想近似这个方程的根

> ID：15391905
> 
> 赞同：0
> 
> 时间：2013-03-13T17:08:51.893
> 
> 标签：wolfram-mathematica, root, approximate

我有

```
f[x__]:=(Sqrt[2] Sqrt[-E^(-2 p x) g R (-2-14 p^2-E^(2 p x) Cos[x]+
         2 E^(2 p x) p^2 Cos[x]+3 E^(2 p x) p Sin[x])])/Sqrt[1+4 p^2]

g = 10
R = 2
p = 0.3 
```

我想找到一个根源：

```
f[x]^2 == - g R Cos[x] 
```

当我尝试 Solve 时，我得到：“这个函数不能用 Solve 可用的方法求解”，Reduce 也是如此，当我尝试 Root 时：“......不是单变量多项式”

我怎样才能近似上面方程的根？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T00:27:19.347

```
Plot[f[x]^2 + g R Cos[x], {x, 0, 20}, 
 Epilog -> {PointSize[Large], Red, Point[{x, 0} /. 
           Table[FindRoot[f[x]^2 + g R Cos[x] == 0, {x, i}], {i, 2, 20, 3}]]}] 
```

![数学图形](../Images/f1febd3ed85a1c1c4cc1f89d01ac24f2.png)

# java - 当用户在我的 JTree 中编辑节点并单击远离节点时获取新的用户对象字符串

> ID：15391906
> 
> 赞同：1
> 
> 时间：2013-03-13T17:08:59.313
> 
> 标签：java, swing, jtree

我通过扩展 DefaultTreeModel 创建了一个自定义 TreeModel，因此用户可以重命名我的 JTree 中的节点。如果我的用户输入一个新名称然后按回车，这很好用。如果用户没有按回车键，而是单击远离节点，那么我的 valueForPathChanged 方法不会触发，并且我无法获取新的字符串。如何在用户不按 Enter 键而不是单击树/面板/框架中的其他位置的情况下获取新用户字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:43:09.757

为了稍微改善这种情况，您可以设置 JTree 的 invokesStopCellEditing 属性：如果为 true，则 ui 将提交对某些内部更改（例如扩展或选择更改）的挂起编辑。

```
 final JTree tree = new JTree();
    tree.setEditable(true);
    // this will often help (see its api doc), but no guarantee
    tree.setInvokesStopCellEditing(true);
    // a focusListener is **not** helping
    FocusListener l = new FocusListener() {

        @Override
        public void focusGained(FocusEvent e) {
        }

        @Override
        public void focusLost(FocusEvent e) {
            // this would prevent editing at all
           // tree.stopEditing();
        }

    };
    tree.addFocusListener(l);
    JComponent panel = new JPanel(new BorderLayout());
    panel.add(new JScrollPane(tree));
    panel.add(new JButton("just something to focus"), BorderLayout.SOUTH); 
```

该片段（用于播放）还表明 focusListener 不起作用。

CellEditorRemover 及其在 JXTree 中的用法（如您所见，要添加的内容比裸移除器（它基本上是 KeyboardFocusManager 的 focusOwner 属性的侦听器）稍微多一点）：

```
/**
 * {@inheritDoc} <p>
 * Overridden to fix focus issues with editors. 
 * This method installs and updates the internal CellEditorRemover which
 * terminates ongoing edits if appropriate. Additionally, it
 * registers a CellEditorListener with the cell editor to grab the 
 * focus back to tree, if appropriate.
 * 
 * @see #updateEditorRemover()
 */
@Override
public void startEditingAtPath(TreePath path) {
    super.startEditingAtPath(path);
    if (isEditing()) {
        updateEditorListener();
        updateEditorRemover();
    }
}

/**
 * Hack to grab focus after editing.
 */
private void updateEditorListener() {
    if (editorListener == null) {
        editorListener = new CellEditorListener() {

            @Override
            public void editingCanceled(ChangeEvent e) {
                terminated(e);
            }

            /**
             * @param e
             */
            private void terminated(ChangeEvent e) {
                analyseFocus();
                ((CellEditor) e.getSource()).removeCellEditorListener(editorListener);
            }

            @Override
            public void editingStopped(ChangeEvent e) {
                terminated(e);
            }

        };
    }
    getCellEditor().addCellEditorListener(editorListener);

}

/**
 * This is called from cell editor listener if edit terminated.
 * Trying to analyse if we should grab the focus back to the
 * tree after. Brittle ... we assume we are the first to 
 * get the event, so we can analyse the hierarchy before the
 * editing component is removed.
 */
protected void analyseFocus() {
    if (isFocusOwnerDescending()) {
        requestFocusInWindow();
    }
}

/**
 * Returns a boolean to indicate if the current focus owner 
 * is descending from this table. 
 * Returns false if not editing, otherwise walks the focusOwner
 * hierarchy, taking popups into account. <p>
 * 
 * PENDING: copied from JXTable ... should be somewhere in a utility
 * class?
 * 
 * @return a boolean to indicate if the current focus
 *   owner is contained.
 */
private boolean isFocusOwnerDescending() {
    if (!isEditing()) return false;
    Component focusOwner = 
        KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
    // PENDING JW: special casing to not fall through ... really wanted?
    if (focusOwner == null) return false;
    if (SwingXUtilities.isDescendingFrom(focusOwner, this)) return true;
    // same with permanent focus owner
    Component permanent = 
        KeyboardFocusManager.getCurrentKeyboardFocusManager().getPermanentFocusOwner();
    return SwingXUtilities.isDescendingFrom(permanent, this);
}

/**
 * Overridden to release the CellEditorRemover, if any.
 */
@Override
public void removeNotify() {
    if (editorRemover != null) {
        editorRemover.release();
        editorRemover = null;
    }
    super.removeNotify();
}

/**
 * Lazily creates and updates the internal CellEditorRemover.
 * 
 *
 */
private void updateEditorRemover() {
    if (editorRemover == null) {
        editorRemover = new CellEditorRemover();
    }
    editorRemover.updateKeyboardFocusManager();
}

/** This class tracks changes in the keyboard focus state. It is used
 * when the JXTree is editing to determine when to terminate the edit.
 * If focus switches to a component outside of the JXTree, but in the
 * same window, this will terminate editing. The exact terminate 
 * behaviour is controlled by the invokeStopEditing property.
 * 
 * @see javax.swing.JTree#setInvokesStopCellEditing(boolean)
 * 
 */
public class CellEditorRemover implements PropertyChangeListener {
    /** the focusManager this is listening to. */
    KeyboardFocusManager focusManager;

    public CellEditorRemover() {
        updateKeyboardFocusManager();
    }

    /**
     * Updates itself to listen to the current KeyboardFocusManager. 
     *
     */
    public void updateKeyboardFocusManager() {
        KeyboardFocusManager current = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        setKeyboardFocusManager(current);
    }

    /**
     * stops listening.
     *
     */
    public void release() {
        setKeyboardFocusManager(null);
    }

    /**
     * Sets the focusManager this is listening to. 
     * Unregisters/registers itself from/to the old/new manager, 
     * respectively. 
     * 
     * @param current the KeyboardFocusManager to listen too.
     */
    private void setKeyboardFocusManager(KeyboardFocusManager current) {
        if (focusManager == current)
            return;
        KeyboardFocusManager old = focusManager;
        if (old != null) {
            old.removePropertyChangeListener("permanentFocusOwner", this);
        }
        focusManager = current;
        if (focusManager != null) {
            focusManager.addPropertyChangeListener("permanentFocusOwner",
                    this);
        }

    }
    @Override
    public void propertyChange(PropertyChangeEvent ev) {
        if (!isEditing()) {
            return;
        }

        Component c = focusManager.getPermanentFocusOwner();
        JXTree tree = JXTree.this;
        while (c != null) {
            if (c instanceof JPopupMenu) {
                c = ((JPopupMenu) c).getInvoker();
            } else {

                if (c == tree) {
                    // focus remains inside the table
                    return;
                } else if ((c instanceof Window) ||
                        (c instanceof Applet && c.getParent() == null)) {
                    if (c == SwingUtilities.getRoot(tree)) {
                        if (tree.getInvokesStopCellEditing()) {
                            tree.stopEditing();
                        }
                        if (tree.isEditing()) {
                            tree.cancelEditing();
                        }
                    }
                    break;
                }
                c = c.getParent();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:21:57.773

您可以添加 FocusListener 的匿名实例并实现

```
void    focusLost(FocusEvent e) 
```

这会在保存值之前触发，因此不会帮助您获取最后一个值。相反，您应该设置

```
myTree.setInvokesStopCellEditing(true); 
```

触发 INVOKES_STOP_CELL_EDITING_PROPERTY 的属性更改，这

意味着你需要在你的树模型中有类似的东西

```
public void valueForPathChanged(TreePath path, Object newValue)
{
AdapterNode node = (AdapterNode)
path.getLastPathComponent();
node.getDomNode().setNodeValue((String)newValue);
fireTreeNodesChanged(new TreeModelEvent(this,
path));
} 
```

问候

# r - 在 MASS 库中使用 fitdistr

> ID：15391912
> 
> 赞同：1
> 
> 时间：2013-03-13T17:09:16.773
> 
> 标签：r

我正在尝试使用 fitdistr 函数，并且一直在阅读演练“使用 R 拟合分布”。我可以使用“虚拟数据”按照概述的示例进行操作，但是当我尝试使用此函数运行实际数据时会出现问题。我相信问题是由于我的数据中存在标题，因为我经常遇到同样的错误。例如，如果我运行我的数据（带标题的 2 列），通过第 2 列：

```
fitdistr(data$col2,"gamma")   
'x' must be a non-empty numeric vector' 
```

我尝试从我的文件中删除标题并尝试对我的所有数据（未分箱）使用该函数，这也导致了同样的错误。

接下来，我尝试删除标题，并且只在数据文件中包含我想要运行该函数的数据列。这确实运行正常。

请注意，对于我的数据，第二列是我有兴趣运行的。但是我已经使用第一列数据将第二列分为 20 个不同的组，所以我确实需要数据集中的第一列。我可以轻松地删除标题并在单独的代码中运行 fitdistr() （因为到目前为止我一直在使用标题来调用列），但我看不到如何只用一列数据运行这个函数，并且仍然有该数据正确分类。我的第一直觉是在 excel 中对数据进行分类，然后有 20 个不同的 1 列数据集来运行该函数。这似乎很乏味，因此非常感谢有关如何在数据集完好无损的情况下执行此功能的任何提示。

根据要求，这里是我的数据样本：

```
> dput(head(Diam_Str))
structure(list(Diameter = c(0.03, 0.05, 0.05, 0.05, 0.05, 0.05
), Strength = c(0.2, 0.2, 1.5, 0.5, 0.6, 0.3)), .Names = c("Diameter", 
"Strength"), row.names = c(NA, 6L), class = "data.frame") 
```

所以我有20组，根据直径大小。对于每个组，我正在查看所看到的优势分布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:52:48.387

看起来您的数据集的第一行是作为数据而不是标题读入的，当您尝试在整个列上运行 fitdistr 时，它会将其视为字符向量而不是数字。

如果您正在使用 read.csv 或类似文件读取数据，请尝试添加选项 header=T。

```
data = read.csv("file.txt", header=T) 
```

您可以验证一列是一个数字向量

```
class(data$col2) 
```

如果这是类型字符，那么您的输入文件中的某处可能存在错误值。

如果你觉得你的数据没问题，你可以试试

```
fitdistr(as.numeric(data$col2),"gamma") 
```

并且任何不好的值都将被替换为 NA

# hbase - 手动删除 HBase 数据

> ID：15391917
> 
> 赞同：1
> 
> 时间：2013-03-13T17:09:30.253
> 
> 标签：hbase, hdfs

我有一个安装了 HBase 的小型开发集群。我的集群的磁盘使用量已满，所以我需要删除一些数据，但我无法启动区域服务器。他们失败并在日志中显示消息：

```
File /hbase/.logs/<some file> could only be replicated to 0 nodes, instead of 1 
```

我想是因为集群中没有空间了。

我想知道，我可以从 HBase 安全地手动删除（通过 hdfs）什么，而不会导致任何类型的元数据损坏？

hdfs中占用空间最多的区域是

```
/hbase/.logs
/hbase/mytable 
```

如果我不再关心 中的数据`mytable`，我可以手动删除它吗？

```
hadoop fs -rmr /hbase/mytable 
```

或者 HBase 下次启动时会抱怨吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T18:35:01.060

不建议直接通过 HDFS 删除表。请注意，HBase 将有关表的数据存储在各个位置（.META. 表、zookeeper、.logs 可以包含对表的未提交更改），因此如果您手动删除文件，请确保运行 hbase hbck 以检查并修复 HBase 的表.

更好的方法是找出集群的问题，添加节点等，而不是手动删除

# jquery - 滑动切换和多个元素

> ID：15391919
> 
> 赞同：0
> 
> 时间：2013-03-13T17:09:38.330
> 
> 标签：jquery, html-lists, slidetoggle

我在使用简单的滑动切换时遇到了一些问题，我必须将其应用于多个`<li>`元素。

例子：

```
<ul id="serv">
    <li id="01">Assistenza</li>
    <li id="02">Riparazione</li>
    <li id="03">Manutenzione</li>
    <li id="04">Rifacimento Macchina</li>
</ul>

<div id="box01"></div>
<div id="box02"></div>
<div id="box03"></div>
<div id="box04"></div> 
```

现在我只是想当我点击 01 box01 显示，02 box02 显示..等等所以..

```
 <script>
  $('#01').click(function() {
    $('#box01').slideToggle()
  })
</script> 
```

在这种情况下，我应该对每个 id 重复此操作。如果我有很多元素？有没有办法简化这个过程，让我“少写多做”？

非常感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:12:27.600

尝试这个：

```
$('li').click(function() {
    $('#box'+$(this).attr('id')).slideToggle()
}) 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/vwDn6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:13:06.347

```
<ul id="serv">
    <li class="toggler" id="01">Assistenza</li>
    <li class="toggler" id="02">Riparazione</li>
    <li class="toggler" id="03">Manutenzione</li>
    <li class="toggler" id="04">Rifacimento Macchina</li>
</ul>

$('.toggler').click(function() {
    $('#box' + $(this).attr('id')).slideToggle()
} 
```

添加手风琴功能：

```
$('.toggler').click(function() {
    $('li').slideUp();
    $('#box' + $(this).attr('id')).slideToggle()
} 
```

# php - 访问存储在数组中的每个对象

> ID：15391921
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:09:42.800
> 
> 标签：php, laravel

我只是想弄清楚如何使用存储在数组中的对象？在 Laravel 中，我触发了一个查询。

```
$accounts = Account::where('customer_no', '=', $customer->customer_no)->get(); 
```

这将返回数组中的两个对象，这是一个死和转储：

```
array(2) {
  [0]=>
   object(Account)#40 (5) {
 ["attributes"]=>
 array(11) {
  ["acc_no"]=>
  int(5)
  ["acc_type"]=>
  string(7) "CURRENT"
  ["start_date"]=>
  string(19) "2012-09-05 00:00:00"
  ["status"]=>
  int(1)
  ["balance"]=>
  string(5) "57.67"
  ["end_date"]=>
  NULL
  ["interest_rate"]=>
  string(4) "0.60"
  ["pin"]=>
  string(4) "1112"
  ["attempts"]=>
  int(2)
  ["bank_code"]=>
  int(1)
  ["customer_no"]=>
  int(10000003)
}
[1]=>
  object(Account)#43 (5) {
  ["attributes"]=>
  array(11) {
  ["acc_no"]=>
  int(6)
  ["acc_type"]=>
  string(7) "SAVINGS"
  ["start_date"]=>
  string(19) "2007-01-01 00:00:00"
  ["status"]=>
  int(1)
  ["balance"]=>
  string(7) "1002.01"
  ["end_date"]=>
  NULL
  ["interest_rate"]=>
  string(4) "0.80"
  ["pin"]=>
  string(4) "3427"
  ["attempts"]=>
  int(2)
  ["bank_code"]=>
  int(1)
  ["customer_no"]=>
  int(10000003)
} 
```

所以我想单独访问这些对象，这样我就可以使用它们，而不必做一个 foreach 来单独访问它们。

如何在 PHP 中独立存储这些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:12:36.060

您可以从数组索引中获取对象。

```
$account_one = $accounts[0];
$account_two = $accounts[1]; 
```

你有什么不想使用的原因`foreach`吗？您还可以使用常规`for`循环并使用`$accounts[i]`来引用特定帐户。

# sql - 如何通过 T-SQL 在 SQL Server 2008 中创建计划作业？

> ID：15391936
> 
> 赞同：11
> 
> 时间：2013-03-13T17:10:27.757
> 
> 标签：sql, tsql, jobs, schedule

我想创建一个作业，在经过一段时间后从数据库中删除记录。例如，我在 news 表中有一个字段，`Time Stamp`每个月都有一个 SQL 查询像计划作业一样针对我的数据库运行，并删除时间戳为两个月的新闻。一般来说，我想删除 2 个月前或更早的新闻，以免我的桌子变成一张大桌子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T17:51:29.870

您应该在 SQL 中[创建作业](http://msdn.microsoft.com/en-us/library/ms190268.aspx)下面是通过 SQL 代理创建作业的示例 T-SQL

```
USE msdb ;
GO
EXEC dbo.sp_add_job
    @job_name = N'Weekly Sales Data Backup' ;
GO
EXEC sp_add_jobstep
    @job_name = N'Weekly Sales Data Backup',
    @step_name = N'Set database to read only',
    @subsystem = N'TSQL',
    @command = N'ALTER DATABASE SALES SET READ_ONLY', 
    @retry_attempts = 5,
    @retry_interval = 5 ;
GO
EXEC dbo.sp_add_schedule
    @schedule_name = N'RunOnce',
    @freq_type = 1,
    @active_start_time = 233000 ;
USE msdb ;
GO
EXEC sp_attach_schedule
   @job_name = N'Weekly Sales Data Backup',
   @schedule_name = N'RunOnce';
GO
EXEC dbo.sp_add_jobserver
    @job_name = N'Weekly Sales Data Backup';
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:14:30.730

您将需要创建一个[SQL 代理作业](http://msdn.microsoft.com/en-us/library/ms135739%28v=sql.105%29.aspx)来安排定期运行的作业。如果要使用 T-SQL 创建作业，请参阅[如何：创建 SQL Server 代理作业 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms181153%28v=sql.105%29.aspx)。

# javascript - 在点击链接之前隐藏 iframe，然后在点击链接后隐藏链接

> ID：15391937
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:10:31.200
> 
> 标签：javascript, jquery, iframe

我有这段代码可以在 iframe 中打开链接

```
<a href="http://www.example.com/" target="iframe1">link</a>

</br></br>

<iframe id="iframe1" name="iframe1" src="#"></iframe> 
```

我想在点击链接之前隐藏 iframe，然后在点击链接后隐藏链接

我需要用 javascript / jQuery 来做到这一点

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:14:15.087

将链接放在 Span 标签中并执行以下操作：

```
$("#link").click(function(e) {
    e.preventDefault();

    //Assuming you're assigning the source dynamically, if not, comment out below line.
    $("#iframe1").attr("src", $("link").attr("value");
    $("#iframe1").show();

    $("#linkBeGone").hide();
}); 
```

制作链接“#”的 href 属性，并将值设为您希望 iFrame 成为的 src。

```
<span id="linkBeGone"><a id="link" value="http://www.example.com/" href="#" target="iframe1">link</a></span>

</br></br>

<iframe id="iframe1" name="iframe1" src="#"></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:14:48.463

我会做以下事情：

```
<div id="linkDiv">
    <a href="#" id="theLink">Link</a>
</div>
<br/><br/>
<iframe id="iframe1" name="iframe1" src="#"></iframe>

$(document).ready(function(){
    $("#iframe1").hide();
    $("#theLink").click(function(){
        $("#iframe1").show();
        $("#linkDiv").hide();
        return false;
    });
}); 
```

# php - 为什么静态调用此方法有效？

> ID：15391938
> 
> 赞同：2
> 
> 时间：2013-03-13T17:10:40.287
> 
> 标签：php, oop, class, methods

```
class Duck {
  public function quack() {
    $this­->swim();
  }
  public function swim() {
    echo 'I\'m swimming!';
  }
}
class Plane {
  public function fly() {
    Duck::quack(); 
  }
  public function swim()
  {
  echo 'I can\'t swim! People are DROWNING!';
  } 
}
$plane = new Plane(); 
$plane-­>fly(); 
```

我被问到上述问题并给出了输出是非法调用静态方法的错误的答案。
但它实际上打印“我在游泳！”。
有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:12:12.420

它默认工作，但如果你打开`E_STRICT`你会得到

```
PHP Strict Standards: Non-static method Duck::quack() should not be called statically in... 
```

PHP 看到你想要`swim()`真正的静态，所以它让你简单地调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:20:10.783

**PHP 5.3**（和公共方法）的注意事项：

**可以从INSIDE**对象上下文中的任何位置静态调用公共方法（仅当在实例化对象内部时）...即使未声明为静态的

```
Duck::quack(); 
```

**不能在同一场景**中调用受保护的方法。

```
Duck::quack(); //error
protected function quack() { } 
```

**不能从对象上下文中的任何地方静态**调用公共属性（实例变量），除非声明为静态...

```
class Duck {
 public $hello = 'hello there';   
}
class Plane {
 Duck::$hello; //error
} 
```

**不能从外部对象上下文静态**调用公共方法（或属性）。除非声明为静态

```
Duck::quack(); //error 
```

其他语言使用这种类型的引擎灵活性，只要从对象上下文中静态调用任何公共方法。
如前所述（@poitroae）默认情况下它是这样工作的，但如果你打开`E_STRICT`你会得到一个错误。

***另外：***
PHP 的一个已知特性是您不应该被允许`$this`在此上下文中调用。此时程序应该在类上下文下（被静态调用），但`$this`它的工作方式类似于对象上下文。
如果这是一个静态声明的方法，那么调用`$this`将导致即时致命错误。

希望有帮助

# ajax - 使用外部 .json 文件作为数据源的主干.js

> ID：15391939
> 
> 赞同：0
> 
> 时间：2013-03-13T17:10:40.907
> 
> 标签：ajax, json, backbone.js

我有一个基本的应用程序[http://jsfiddle.net/p3hpZ/](http://jsfiddle.net/p3hpZ/)它使用在 script.js 文件中硬编码的数据，如下所示：

```
//model data 
var things = [   
{ title: "Macbook Air", price: 799, id: 1 },   
{ title: "Macbook Pro", price: 999, id: 2 },   
{ title: "The new iPad", price: 399, id: 3 },   
{ title: "Magic Mouse", price: 50, id: 4 },   
{ title: "Cinema Display", price: 799, id: 5 } 
]; 
```

我正在尝试研究如何将数据移动到单独的 .json 文件中。这是我到目前为止所拥有的[http://jsfiddle.net/wVsZh/](http://jsfiddle.net/wVsZh/)

# java - Java MSI 的静默安装

> ID：15391941
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:10:50.343
> 
> 标签：java, powershell, windows-installer, silent

有人可以解释为什么这样做：

```
$cred = Get-Credential
Start-Process -FilePath "msiexec.exe" -ArgumentList "/i `"C:\temp\jre1.7.0_17.msi`"" -Credential $cred -wait 
```

但这不是：

```
$cred = Get-Credential
Start-Process -FilePath "msiexec.exe" -ArgumentList "/i `"C:\temp\jre1.7.0_17.msi`" ""`/qn REBOOT=ReallySuppress JAVAUPDATE=0 WEBSTARTICON=0 SYSTRAY=0`" ""/log c:\temp\javainst.log" -Credential $cred -wait 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:14:25.117

我要担心的第一件事是您逃避每个特殊字符的方式。如果做得好，它会正常工作，但在这里似乎没有必要。如果您需要在字符串中包含双引号，则将参数包含在单引号中。

您可以尝试以下方法，看看是否有帮助？

```
$cred = Get-Credential
Start-Process -FilePath "msiexec.exe" -ArgumentList '/i "C:\temp\jre1.7.0_17.msi" /qn REBOOT=ReallySuppress JAVAUPDATE=0 WEBSTARTICON=0 SYSTRAY=0 /log c:\temp\javainst.log' -Credential $cred -wait 
```

另外，正如我在你之前非常相似的帖子中评论的那样，你能解释一下为什么你需要使用`msiexec`而不是 java 自己的 exe 设置吗？

**编辑**试试这个：

```
$cred = Get-Credential
Start-Process -FilePath "c:\temp\jre-7u17-windows-i586.exe" -ArgumentList '/S /L c:\temp\javainst.log REBOOT=ReallySuppress JAVAUPDATE=0 WEBSTARTICON=0 SYSTRAY=0' -Credential $cred -wait 
```

# php - PHP - 时间减去时间到分钟

> ID：15391942
> 
> 赞同：5
> 
> 时间：2013-03-13T17:10:51.503
> 
> 标签：php

在 php 中，我有两次 - 11:00:00 和 12:45:00。我想在几分钟内得到它们之间的差异，在这种情况下是 105 分钟。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T17:13:46.953

干得好：

```
( strtotime('12:45:00') - strtotime('11:00:00') ) / 60 
```

[`strtotime()`](http://php.net/manual/en/function.strtotime.php)是一个非常有用的功能。它返回各种时间和日期的[Unix 时间戳。](http://en.wikipedia.org/wiki/Unix_time)所以，如果你取两个时间戳，然后减去它们，那么你就会得到以秒为单位的差异。除以 60 得到分钟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T17:15:28.590

```
 $time_diff = strtotime('2013-03-13 12:45:00') - strtotime('2013-03-13 11:00:00');
    echo $time_diff/60; 
```

我只是保留日期，因为不确定我是否只保留时间部分，它是否会返回正确的差异。

编辑

我刚刚测试过它也可以在没有日期的情况下工作......

```
 $time_diff = strtotime('12:45:00') - strtotime('11:00:00');
    echo $time_diff/60; 
```

因此，回答您的问题 - strtotime() 返回一个时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），因此您只需将其除以 60 即可将其结果转换为分钟。

# r - R：有没有办法捕获所有函数参数值

> ID：15391943
> 
> 赞同：16
> 
> 时间：2013-03-13T17:11:03.633
> 
> 标签：r, function, arguments

我写了一个制作绘图的函数。我遇到的问题之一是需要生成可重现的图表。当然，一种解决方案是保存我生成的每个绘图的代码（即保存我为函数参数设置的确切值）。但是，我想知道是否有一种方法可以捕获所有输入值，包括数据对象等，并将它们保存在列表中并将其作为输出返回。我想一个简单的方法如下：

```
plot.foo <- function(x, main=NULL){
    plot(x, main=main)
    list(data=x, main=main)
} 
```

但是，我编写的函数除了省略号参数之外还有一堆参数（见下文），所以我想知道是否有更快的方法来保存所有输入参数值。谢谢！

```
plot.foo <- function(x1, x2, x3, x4, x5, x6, x7, x8, x9, x10,...){
     ...
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T17:19:32.510

有多种可能有用的函数：`match.call`，`match.arg`然后是提取`...`参数的特定方法。

```
plot.foo <- 
   function(x, main=NULL){ 
     cl <- match.call()
     print(cl)
     plot(x, main=main)
     list(data=x, main=main)
   }

plot.foo(1)
## plot.foo(x = 1)
## $data
## [1] 1
## 
## $main
## NULL

plot.foo <- 
  function(x, main=NULL, ...){ 
    extras=list(...)
    print(extras)

    cl <- match.call()   
    print(cl)

    plot(x, main=main)  # this would actually produce the grapjic
    list(data=x, main=main, extras=extras) # this returns the arguments as a list
   }

plot.foo(1, sthg="z")
## $sthg
## [1] "z"

# You could assign the returned list to a name or you could `save` to a file
plot.foo(x = 1, sthg = "z")
## $data
## [1] 1
## 
## $main
## NULL 
```

还有一个`sys.call`函数，其结果可以作为文本返回`deparse`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T17:18:49.773

从一开始，为所有绘图参数创建一个命名列表

```
L <- list(x=data, main="string", ylim=c(0,10)) 
```

然后使用该对象作为参数集进行绘图

```
do.call("plot", L) 
```

确保保存 L 以备后用。

工作示例：

```
L<-list(x=1:10, y=(1:10)^2, main="Y by X",type="l",xlab="X",ylab="Y")
do.call("plot",L) 
```

# javascript - 画布添加事件监听器点击图片

> ID：15391949
> 
> 赞同：0
> 
> 时间：2013-03-13T17:11:14.833
> 
> 标签：javascript, html, canvas, addeventlistener

我正在尝试将事件侦听器添加到图片中，因此一旦单击它就会将我带到另一个页面，此时我将它带到下一页但不是当我单击图片时，而是当我单击画布上的任意位置时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:16:15.420

**响应画布点击事件**

**糟糕**，您的问题似乎被切断了！在您的下一个问题上，请确保不要按“Enter”键——而不是在您的问题中开始一个新行，您将立即发布您部分写好的问题（别担心……我们都已经完成了）。

还有尼克，“欢迎来到 stackoverflow”——它真的充满了答案！

Norguard 关于画布无法跟踪您单击的图像是正确的。将画布想象成艺术家的画架，您正在画架上绘画图像。是的，画架包含图像，但画架无法知道您在哪里绘制了任何图像。

为了让您在学习时保持简单的生活，请尝试从每个画布仅使用 1 张图像开始（是的，您可以拥有与图像一样多的画布元素）。

如果你想从每个画布 1 个图像开始，这里是代码和一个小提琴：http: [//jsfiddle.net/m1erickson/KGKYg/](http://jsfiddle.net/m1erickson/KGKYg/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var img=new Image();
    img.onload=function(){
      canvas.width=img.width;
      canvas.height=img.height;
      ctx.drawImage(img,0,0);
    }
    img.src="http://dl.dropbox.com/u/139992952/coffee.png";

    canvas.addEventListener("click", function (e) { alert("use your linke totake me away...!"); }); 

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

**[编辑：响应键盘事件]**

以下是监听用户按键并做出响应的方法：

```
// listen for keyboard events
window.addEventListener('keydown',keyIsDown,true);

// process the keystrokes
function keyIsDown(event){

    switch (event.keyCode) {
        case 38:
            // "UP" was pressed, do UP stuff
            break;
        case 40:
            // "DOWN" was pressed, do DOWN stuff
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:17:44.210

您不能简单地做到这一点，并且没有事件侦听器可以让您这样做。

1) 监听画布上的点击
2) 保留对您绘制的图像对象的引用... ...如，通过将引用保存在单独的对象中来了解其画布坐标：

```
var canvas_img = {
    x : 250,
    y : 300,
    data   : my_img, 
    width  : my_img.width,
    height : my_img.height
}; 
```

3）点击画布时，手动计算在画布上单击的位置与图像在画布上的位置之间是否发生碰撞。

# python - Eclipse 中的 Python 控制台

> ID：15391955
> 
> 赞同：0
> 
> 时间：2013-03-13T17:11:30.050
> 
> 标签：python, eclipse, console, interpreter

我无法在 Eclipse 中运行 python 控制台。我已经下载了 Pydev，设置了解释器和 PYTHONPATH 并导入了一个项目，一个 Django 项目。我将项目设置为 Django 项目，然后尝试右键单击项目--> Django--> 带有 Django 环境的 shell。

我在控制台中收到以下错误：

```
Error starting server with host: 127.0.0.1, port: 1349, client_port: 1350
ERROR - failed to write data to stream: <pyreadline.console.console.Console object at 0x026EA210>
ERROR - failed to write data to stream: <pyreadline.console.console.Console object at 0x026EA210> 
```

如果我尝试打开 Windows shell 并执行通常的 python manage.py shell 一切顺利，那么我想我的 Eclipse 配置有一些问题，但我不知道。

谢谢你的帮助

我想出了问题，但我仍然没有解决方案。如果我卸载 IPython，则 Eclipse 中的 shell 可以正常工作，当然我不再拥有 IPython。如果我重新安装 IPython，我的 Eclipse Python shell 中的所有功能都会丢失，而 Python 在 Windows 终端中可以完美运行。Eclipse 在做什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:07:09.033

我找到了！！您不需要卸载 Python 或任何其他东西，这完全是 Eclipse 的问题。到这里：

```
C:\ProgramData\Microsoft\Windows\Start Menu\Programs\eclipse\plugins\org.python.pydev_2.5.0.2012040618\PySrc 
```

或者如果您在其他位置有 PyDev，只需搜索该文件

```
pydev_ipython_console 
```

在该文件夹中，确保您只有一个这样的文件。例如，在我的情况下，我有：

```
pydev_ipython_console (py)
pydev_ipython_console (pyc)
pydev_ipython_console_010 (py)
pydev_ipython_console_010 (pyc) 
```

只需删除前 2 个即可使控制台正常工作，甚至将 IPython 安装到 Windows 终端上也不会导致 Eclipse 控制台出现任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:49:19.977

我有同样的问题，这篇文章帮助了我： [用两个版本的 Python (Windows) 安装 IPython](https://stackoverflow.com/questions/10787084/installing-ipython-with-two-versions-of-python-windows) 我有 win7。我认为这个问题是 pyreadline 库。如果我更新到 pyreadline-2.0-dev1.win32.exe 就可以了。可以从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyreadline下载](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyreadline)

# javascript - Mootools 选择过滤

> ID：15391966
> 
> 赞同：0
> 
> 时间：2013-03-13T17:12:04.693
> 
> 标签：javascript, filter, mootools

`<li>`当我单击以下选项之一时，我想显示特定元素`<select>`：

```
<select>
    <option value="f_chzn_g_0">Group One</option>
    <option value="f_chzn_g_4">Group Two</option>
</select> 
```

这是我`<li>`的，将被过滤以仅显示选定的组。

```
<ul>
    <li id="f_chzn_g_0" class="group-result">Group One</li>
    <li id="f_chzn_o_1" class="active-result group-option" style="">one</li>
    <li id="f_chzn_o_2" class="active-result group-option" style="">two</li>
    <li id="f_chzn_o_3" class="active-result group-option" style="">three</li>
    <li id="f_chzn_g_4" class="group-result">Group Two</li>
    <li id="f_chzn_o_5" class="active-result group-option" style="">one</li>
    <li id="f_chzn_o_6" class="active-result group-option" style="">two</li>
    <li id="f_chzn_o_7" class="active-result group-option" style="">three</li>
</ul> 
```

有人可以帮我解决这个问题吗？这一切都必须在 Mootools 中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:04:51.940

您只需要一个状态变量来跟踪您在迭代`li`元素时是否在所选组中。假设您`li`通过添加类来显示元素`active-result`，类似以下的内容应该可以工作：

```
function showSelectedListItems(ulElem, selectedId) {
    var inSelectedGroup = false;

    ulElem.getElements('li').each(function(liElem) {
        if (!inSelectedGroup) {
            if (liElem.id == selectedId) inSelectedGroup = true;
        }
        else {
            if (liElem.hasClass('group-result') inSelectedGroup = false;
            else liElem.addClass('active-result');
        }
    });
}); 
```

# php - id问题上的PHP内部连接

> ID：15391974
> 
> 赞同：0
> 
> 时间：2013-03-13T17:12:17.540
> 
> 标签：php, mysql, sql

我这里有这个脚本

```
select distinct 
FirstName, 
LastName, 
table_2.status, 
'Shop' as receiver
from table_1
inner join table_2 on table_1.key_2 = table_2.'SHOP-'id
order by FirstName, LastName 
```

key_2 字段的 id 类似于 SHOP-121，表 2 中的 id 就是数字 121。

如何从 key_2 中删除 SHOP- 或将 SHOP- 添加到 id？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:13:30.133

采用`CONCAT`

```
table_1.key_2 = CONCAT('SHOP-', table_2.id) 
```

请记住，这将执行全表扫描，导致它在大型数据库上运行缓慢。

# html - Using page anchors in html 中的下拉列表 我有一个包含很多表格的静态 HTML 页面。我想使用 html 标签 <select>创建一个简单的下拉菜单，该菜单会跳转到页面下方的特定表格。什么命令将用户选择设置为向下跳转页面，以及为该选择提供目标需要什么锚代码。试试这个： $('li').click(function() { $('#box'+$(this).attr('id')).slideToggle() }) jsFiddle 示例使用 < ID：15391978 赞同：2 时间：2013-03-13T17:12:27.173 标签：html, select 回答 #1 赞同：7 时间：2013-03-13T17:21:01.377 我相信您只需要使用 JavaScript 来制作它，因此当您单击/更改选择框上的值时，它会将您带到该选择选项的值中指定的链接。 <select name="dropdpown" size="1" id="select-anchor"> <option value="#link">foo</option> <option value="#link">bar</option> </select> 并且为 JavaScript 功能使用 jQuery 库可以简化事情（以及您的 Web 项目的其他与 JS 相关的功能） $(document).ready(function () { $('#select-anchor').change( function () { var targetPosition = $($(this).val()).offset().top; $('html,body').animate({ scrollTop: targetPosition}, 'slow'); }); }); 这是它的一个jsFiddle。 回答 #2 赞同：1 时间：2013-03-13T17:21:19.603 如果没有 JavaScript，您将无法做到这一点。你也不应该。 作为用户，我希望从下拉列表中选择一个值。在其他项目之间选择一项。不作为导航。 有人可能会争辩说，如果为移动浏览器完成它是可以的，但这仍然是糟糕的用户体验。</select>

# ios - 获取表格左侧的宽度？

> ID：15391981
> 
> 赞同：0
> 
> 时间：2013-03-13T17:12:28.470
> 
> 标签：ios, uitableview, uikit

我想获得 UITableView 的左右“装订线”宽度。有什么方法可以访问它们吗？

![分组的 UITableView](../Images/ea089f680cb8106054200433b67fbc42.png)

我正在寻找一种编程方式来做到这一点，特别是因为它在 iPhone 和 iPad 上是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:49:52.050

不应该出现需要使用这样一个值的情况，但是如果您想知道，可以检查`[UITableViewCell contentView]`. 整个单元格的宽度等于表格的宽度，它`contentView`限制了您可以使用的区域。

```
- (void)layoutSubviews {
    [super layoutSubviews];

    NSLog(@"Cell bounds: %@", NSStringFromCGRect(self.bounds));
    NSLog(@"Cell content view frame: %@", NSStringFromCGRect(self.contentView.frame));
}
```

输出（在全屏分组表上，iPhone）：

> 单元格边界：{{0, 0}, {320, 67}}
> 单元格内容视图框架：{{10, 1}, {300, 65}}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:15:16.773

使用分组表

10 左和 10 右

# java - 修改后无法回写 XML

> ID：15391982
> 
> 赞同：0
> 
> 时间：2013-03-13T17:12:33.553
> 
> 标签：java, xml, xml-parsing

我正在阅读 XML 并更改一些属性。然后我将它作为 XML 写回文件，它返回一个空白文件。如果我不修改节点，它可以正常工作。我做错了什么，请指教。

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                        .newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(origDrXML);
doc.getDocumentElement().normalize();
NodeList nodes = doc.getElementsByTagName("log");
for (int i = 0; i < nodes.getLength(); i++) {
    NodeList children = nodes.item(i).getChildNodes();
int len = children.getLength();
for (int j = 0; j <= children.getLength(); j++) {
    if (children.item(j).getNodeName().equalsIgnoreCase("directory"))
        children.item(j).setTextContent("D:\\Logs");
    }
 } // End of Childrens of <log>
} // End of <log> Tag */
Transformer transformer = TransformerFactory.newInstance().newTransformer();
StreamResult result = new StreamResult(new StringWriter());
DOMSource source = new DOMSource(doc);
transformer.transform(source, result);
String xmlString = result.getWriter().toString();
System.out.println(xmlString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:47:02.733

您可以尝试使用空检查吗？

```
for (int j = 0; j <= children.getLength(); j++) {
    if(children.item(j) != null ) {
            if (children.item(j).getNodeName().equalsIgnoreCase("directory"))
                    children.item(j).setTextContent("D:\\Logs");
    }
} 
```

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:25:09.450

你有没有试过打电话`writer.flush()`前打电话`writer.toString()`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:38:22.363

您可以尝试使用 DOM`LSSerializer`机制而不是`Transformer`. 替换所有这些：

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
StreamResult result = new StreamResult(new StringWriter());
DOMSource source = new DOMSource(doc);
transformer.transform(source, result);
String xmlString = result.getWriter().toString(); 
```

有了这个

```
LSSerializer ser =
    ((DOMImplementationLS)doc.getImplementation()).createLSSerializer();
String xmlString = ser.writeToString(doc); 
```

# javascript - window.open a silverlight 从 CRM 2011

> ID：15391984
> 
> 赞同：2
> 
> 时间：2013-03-13T17:12:36.370
> 
> 标签：javascript, html, silverlight, dynamics-crm-2011

我在 CRM 2011 中有一个按钮。如果我单击它，将打开一个 .html 网络资源。这个 .html 页面托管了一个 silverlight 应用程序。

如果我从我的服务器打开该网站，所有的东西都会很好地工作。但如果我从客户端打开网站，.html 网站不会出现。

我打开.html窗口

```
window.open("hereIsMyUrl"); 
```

现在它应该打开 .html 站点，但它不显示。我捕获了网络，我的 silverlight 有一些请求。 ![在此处输入图像描述](../Images/3dd0e6e329a7f7c3830913018579f27a.png)

因此.html 站点已加载并且我的silverlight 代码正在运行，但现在弹出了一个窗口。

有时我可以看到窗口，我想每次我关闭 IE 并再次打开它。

感谢您的帮助亚历克斯

编辑：我忘了告诉你，我的 CRM 系统受到基于声明的身份验证 (https) 的保护

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:59:36.443

我不知道您有哪个汇总，但 xrm.utility 出现在汇总 8 中，但我有两个选项我不知道是否能解决您的问题，但这是打开 WebResource 的更好支持方式：

*   [Xrm.Utility.openWebResource](http://msdn.microsoft.com/en-us/library/72a66f93-92df-42b9-a8fd-b6125c7fe83b#BKMK_OpenWebResource)
*   在[功能区按钮](https://stackoverflow.com/questions/14380281/how-to-open-html-web-resource-in-modal-dialog)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:52:37.417

这不是编程问题。在后台打开了一些 IE 实例。我杀死了这些进程，现在我在客户端没有任何问题。

# wpf - 淡出动画不断重复，可能会触发自己？

> ID：15391988
> 
> 赞同：0
> 
> 时间：2013-03-13T17:12:58.297
> 
> 标签：wpf, xaml, storyboard

我正在尝试创建一个非常简单的淡出效果，只要用户控件的可见性变为隐藏，就会发生这种效果。

为此，我创建了一个情节提要，只要用户控件的可见性更改为隐藏，就会触发该情节提要。然后它首先将可见性再次更改为可见，以便我可以对其进行动画处理。然后它会随着时间的推移改变不透明度，最后将可见性更改为隐藏。然而，这会导致动画永远重复。

在最后一帧中将控件从可见更改为折叠时，它确实工作了一次，但是用户控件将永远不会再次可见（我监听该`IsVisibleChanged`事件并且它在折叠一次后永远不会被触发，即使我确实有`control.Visibility = Visibility.Visible;`该事件处理程序末尾的代码。

那么如何确保动画只触发一次，最好没有代码，这样我就可以在一个不错的资源字典中添加这个淡出控件，它总是可以工作的。我在 SO 上看到了一些与此相关的问题，尤其是[这个](https://stackoverflow.com/questions/4317875/wpf-fade-out-on-a-control)问题，但我无法让它发挥作用。

我到目前为止的代码：

```
<UserControl.Style>
        <Style TargetType="{x:Type UserControl}">
            <Style.Triggers>
                <Trigger Property="Visibility" Value="Hidden">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1.0" To="0.0" Duration="0:0:3" FillBehavior="Stop"/>
                                <ObjectAnimationUsingKeyFrames BeginTime="0:0:3.5" Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Hidden</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>                                
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:17:34.827

如果您只是删除了`ObjectAnimation`将可见性设置为隐藏的设置，它会正常工作吗？所以控件在技术上是可见的，但不透明度为 0？

# java - 用于拖放和图表绘制支持的 Java 库

> ID：15391990
> 
> 赞同：1
> 
> 时间：2013-03-13T17:13:04.213
> 
> 标签：java, drag-and-drop, desktop-application, diagram

我正在开发一个软件，我需要在其中定义要拖放到空白屏幕上的项目。项目属性在屏幕内设置，也可以删除。

它类似于 UML 绘图应用程序所做的事情。但是，我希望这个项目用于控制设备图标位于屏幕一侧的设备，并且用户将能够将这些图标拖放到屏幕上，将它们连接在一起，配置它们......等等。

是否有任何特定的 Java 库可以实现这一点？如果没有，您是否建议其他具有可以帮助该特定实现的良好库的编程语言？

**注意：**这是当前的桌面应用程序。但是，欢迎仅针对在线申请提出建议。谢谢你，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:30:33.877

Swing 已经带有拖放支持，但是，没有链接/等。

您可以在[http://www.eclipse.org/gef/](http://www.eclipse.org/gef/)上查看 Eclipse GEF 项目- 一个为创建图形编辑器而构建的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:38:03.547

您可以尝试检查 Eclipse 的 GMF 框架。我知道它已用于一些商业线框图产品[http://www.eclipse.org/modeling/gmp/](http://www.eclipse.org/modeling/gmp/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:44:21.427

google 的 Window builder 看起来是一个更容易使用的工具。[https://developers.google.com/java-dev-tools/wbpro/](https://developers.google.com/java-dev-tools/wbpro/)

# networking - 找到校验和

> ID：15391991
> 
> 赞同：3
> 
> 时间：2013-03-13T17:13:04.743
> 
> 标签：networking, network-programming, binary, udp, checksum

我们有三个 16 位字：

```
0110011001100000
0101010101010101
1000111100001100 
```

前两个的总和

```
0110011001100000
0101010101010101
-----------------
1011101110110101 
```

将总和添加到第三个

```
1000111100001100
1011101110110101
-------------------
10100101011000001 
```

但是这本书说那部分是：

```
0100101011000010 
```

它说最后一个添加有溢出，但我不明白。

之后，它获得第一个补码：

```
1011010100111101 
```

这成为校验和。

我不明白将总和添加到第三部分。谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:26:19.573

这是将总和添加到第三个值。

注意缩进。溢出位是*最左边*的位。

```
 1000111100001100
 1011101110110101
-----------------
10100101011000001
^ 
```

将溢出添加到截断的结果中：

```
 0100101011000001
 0000000000000001
-----------------
 0100101011000010 
```

这是该步骤所需的结果。

# c - MpLab 链接错误：无法分配节（C30 编译器）

> ID：15391996
> 
> 赞同：0
> 
> 时间：2013-03-13T17:13:27.957
> 
> 标签：c, compiler-errors, linker-errors, pic, mplab

我将这两段代码放在一起（最初在[This Question Here](https://stackoverflow.com/questions/15367538/mplab-asm-c-building-to-accomodate-both)中描述）。

我现在刚刚从 MpLab (Microchip MPLAB C30) 遇到了这个错误

```
 Link Error: Could not allocate section .nbss, size = 20004 bytes, attributes = bss near 
```

最奇怪的是，我在编译器手册（Microchip 出版物 DS51284F）中查找了该消息，甚至该消息的子字符串，但一无所获。

我什至查找了**allocate**一词，只找到了三四次，从未出现错误消息。

*在将这两段代码放在一起之前，我在 0x8000 处定义了一个段，用于将数据从Thing-X*移动到*Thing-Y*的“大块”内存

 *我将在 0x8000 定义的数据区域缩小到 1 个单独的字节，但我仍然收到此错误。

我没有在 Microchip 的编译器手册 DS51284F 中看到此消息。以前有没有人解决过这个问题？

链接器有不同的手册吗？

有没有办法让我获得一个内存映射来查看我的内存区域在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-19T18:11:06.630

该错误表示near 数据空间中没有足够的内存用于未初始化的变量（bss 附近或简称nbss）。

您可以使用这些建议来减少数据内存使用： 1) 使用编译器优化，-O3 或 -Os。

2) 在 Compiler build options 下选择 Large Data Model： - default -msmall-data - large (>8KB) -mlarge-data - small (<=8KB) -msmall-data 默认数据模型是 small。

3）在遥远的空间中声明一些变量。这将释放近内存空间中的空间。

4）减少函数参数的大小或数量，例如，而不是按值传递结构，而是将指针传递给相同的。

5）将一些局部变量的存储类更改为静态或全局。

6) 尽可能重用局部变量和参数。

7) 使用不大于所需的类型，例如 for 循环中超过 100 个对象的计数器变量只需要与 char 一样大。

8）将一些初始化的数据/数组放入代码空间。-mconst-in-code*