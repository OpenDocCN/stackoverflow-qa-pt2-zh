# StackOverflow 问答 13539000-13539999

# php - 从数据库中仅选择字符串的主题标签部分

> ID：13539001
> 
> 赞同：5
> 
> 时间：2012-11-24T06:41:17.640
> 
> 标签：php, mysql, hashtag

我有一个 PHP 函数来显示带有标签的消息。

像这样的PHP代码：

```
include 'includes/_db_.php';

$sql_t = "SELECT message FROM t_haps_wall WHERE message LIKE '%#%'";
$hasil_t = mysql_query($sql_t) or die(mysql_error());

while($data_t = mysql_fetch_array($hasil_t))
{
$message_t = $data_t['message'];
} 
```

这段代码运行正常，但现在如何设置 hashtag show ？如果在这样的例子中：

消息=我喜欢你#loveyou

在我当前，它会显示所有消息，我只想显示#loveyou。可能吗 ？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T06:46:53.520

```
SELECT SUBSTR(message, LOCATE('#', message)) hashtag
FROM t_haps_wall
WHERE message like '%#%' 
```

# spring-security - 具有两个领域的 Spring 安全性，从不调用第一个 default-target-url

> ID：13539011
> 
> 赞同：4
> 
> 时间：2012-11-24T06:42:34.450
> 
> 标签：spring-security

我正在使用 Spring Security 3.1 并配置了两个领域，一个用于管理员用户，另一个用于其他用户，如下所示：

```
<!-- Configure realm for administration users -->
<http pattern="/admin/**" >
    <intercept-url pattern="/admin*" access="ROLE_ADMIN,ROLE_USER" />
    <form-login login-page="/adminLogin" default-target-url="/adminWelcome"
        authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http>

<!--  Configure realm for normal users -->
<http>
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http> 
```

一切正常，除了在所有成功登录时 - 用户和管理员 - 都会调用“欢迎”网址。“adminWelcome” url 永远不会在管理员登录时调用。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:32:54.667

元素中的`pattern`属性`<http>`意味着*只有*与该模式匹配的请求才会通过该过滤器链。

特别是登录页面的提交（通常是`/j_spring_security_check`通过第二个链，它处理所有其他请求。所以它会被第二个元素创建的登录过滤器处理，并且用户在登录`form-login`后将被重定向到`/welcome`在。

听起来您最好使用单个过滤器链来处理所有请求，并使用[AuthenticationSuccessHandler](https://stackoverflow.com/a/10608414/241990)选择用户登录后应重定向到的位置。

### 更新

如果要配置提交管理员登录页面的 URL 以使登录请求通过第一个过滤器链，请使用`login-processing-url`：

```
<http pattern="/admin/**" >
  <intercept-url pattern="/admin*" access="ROLE_ADMIN,ROLE_USER" />
  <form-login login-page="/adminLogin" login-processing-url="/admin/login.do" default-target-url="/adminWelcome"
    authentication-failure-url="/loginfailed" />
  <logout logout-success-url="/logout" />
</http> 
```

然后修改您的管理员登录表单以提交到该 URL。

# mongodb - MongoDB 类似于 SQL “AS”

> ID：13539014
> 
> 赞同：0
> 
> 时间：2012-11-24T06:43:15.693
> 
> 标签：mongodb

如何将查询中的列重命名为 mongodb？

这不应永久更改将来查询或数据库中的列（非持久性），而应仅更改查询

我正在寻找的功能类似于 SQL 中使用的“AS”`SELECT col1 AS a, col2 as b, col1 as c FROM table`

我知道这可以由应用程序进行相当简单的处理，但只是好奇这是如何在 mongodb 中实现的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:31:51.753

[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)可以实现类似的功能：

```
db.table.aggregate({ $project: { a: '$col1', b: '$col2', c: '$col3' }}) 
```

也可以通过在管道中添加 $match 来过滤特定条件：

```
db.table.aggregate(
  { $match: {'col1': 'value'} },
  { $project: { a: '$col1', b: '$col2', c: '$col3' }}
) 
```

也就是说，由于聚合框架有一些[限制](http://docs.mongodb.org/manual/applications/aggregation/#limitations)，在应用程序中处理它应该是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:47:38.177

我认为这是不可能的，因为在检索结果时，mongo 驱动程序会将它们映射到现有类。如果您更改字段的名称，则无法进行映射

# html - CSS：为什么样式按钮元素与其他 CSS 不同？

> ID：13539016
> 
> 赞同：0
> 
> 时间：2012-11-24T06:43:42.003
> 
> 标签：html, css, button

[http://jsfiddle.net/q6dgv/](http://jsfiddle.net/q6dgv/)

```
<button type="submit" style="padding: 10px;">Button</button> 
```

没有填充，但是：

```
<button type="submit" style="padding: 10px; background: #ff0000;">Button</button> 
```

确实有填充。

这可能是一个FF错误吗？我已经在其他浏览器中测试过，它按预期工作。我也尝试过其他css，它们没有效果，只是背景。

好的。所以既然没有人回答......按钮的重置是什么？如何摆脱默认边框、框阴影等。将背景与无边框、轮廓等结合使用不会重置按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:50:41.917

操作系统/浏览器默认样式的执行方式与 CSS 的工作方式和 CSS 本身支持的方式不同。一旦您更改了按钮的背景，可能很难甚至不可能保留应用默认样式的其他方面。

要删除默认边框和填充，通常使用以下代码：

```
BUTTON,
BUTTON::-moz-focus-inner {
    border: 0;
    padding: 0;
} 
```

[`::-moz-focus-inner`](https://bugzilla.mozilla.org/show_bug.cgi?id=140562#c8)需要伪元素来摆脱 Firefox 中的隐式额外填充。

# validation - YII - 将行为附加到验证器

> ID：13539019
> 
> 赞同：0
> 
> 时间：2012-11-24T06:44:27.240
> 
> 标签：validation, yii, yii-behaviour

我想将行为附加到表单的 rules() 函数中定义的验证器。我不知道怎么做。如果我做这样的事情

```
array('page',  'numerical', 'integerOnly' => true, 'min' => 1, 'message' => '{attribute} is invalid'
    , 'behaviors' => array( 
        'error' => array( 'class' => 'CErrorBehavior'),
        ),
    ), 
```

我得到以下异常

```
Property "CNumberValidator.behaviors" is not defined. 
```

有任何想法吗？

# c# - IOCP线程处理

> ID：13539021
> 
> 赞同：0
> 
> 时间：2012-11-24T06:45:12.340
> 
> 标签：c#, iocp

我正在用 C# 制作一个 IOCP 服务器，调用 win api。我有 1 个接受线程连接和工作线程，具体取决于 CPU 内核。

我的问题是，我有 2 个线程试图同时处理相同的数据，根据以下代码段，你能告诉我解决方案是什么，还是这是一个设计问题？

```
public class WorkerThread
    {
        public void Worker(NetSharedData data)
        {
            IntPtr bytestransfer = Marshal.AllocHGlobal(sizeof(UInt32));
            IntPtr clientid = Marshal.AllocHGlobal(sizeof(UInt32));
            IntPtr poverlapped = Marshal.AllocHGlobal(sizeof(UInt32));
            Console.WriteLine("Worker thread running");
            while (true)
            {
                Marshal.WriteInt32(clientid, 0);
                Marshal.WriteInt32(bytestransfer, 0);
                if (SocketInvoke.GetQueuedCompletionStatus(data.completionport, bytestransfer, clientid, poverlapped, SocketInvoke.INFINITE) == true)
                {
                        if (Marshal.ReadInt32(poverlapped) == 0)
                        {
                            //thread shutdown
                            Console.WriteLine("Worker thread shutdown");
                            break;
                        }
                        Client client = data.Clients[Marshal.ReadInt32(clientid)];
                        if (Marshal.ReadInt32(bytestransfer) != 0)
                        {
                            if (client.operationtype == SocketInvoke.FD_WRITE)
                            {
                                if (client.send_data.ispending_operation == true)
                                {
                                    client.SendLeft((uint)Marshal.ReadInt32(bytestransfer));
                                    break;
                                }
                            }
                            if (client.operationtype == SocketInvoke.FD_READ)
                            {
                                if (!client.Recv((uint)Marshal.ReadInt32(bytestransfer)))
                                {
                                    client.Close();
                                    break;
                                }
                                if (data.OnRecv(client) == true)
                                {
                                    //SendLeft test
                                }
                            }
                        }
                }
            }
        }
    }

/*
//THIS IS A CODE SNIPPET THAT BELONGS TO THE ACCEPT THREAD CLASS
*/

public virtual bool Recv(uint expected_data_transfer)
        {
            IntPtr pwsabuf;
            IntPtr wsaoverlapped;
            IntPtr bytes_recv = Marshal.AllocHGlobal(sizeof(int));
            IntPtr flags = Marshal.AllocHGlobal(sizeof(int));
            Marshal.WriteInt32(flags, 0);
            set_total_transfer(SocketInvoke.FD_READ, expected_data_transfer);
            pwsabuf = recv_data.rtn_wsabuffarray(recv_data.buffer, (uint)recv_data.bufflen);
            wsaoverlapped = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(SocketInvoke.WSAOVERLAPPED)));
            Marshal.StructureToPtr(overlapped, wsaoverlapped, false);
            SocketInvoke.FillMemory(wsaoverlapped, (uint)Marshal.SizeOf(typeof(SocketInvoke.WSAOVERLAPPED)), 0);
            unsafe
            {
                setoptype(SocketInvoke.FD_READ);
                if (SocketInvoke.WSARecv(Convert.ToUInt32(sock.Handle.ToInt32()), pwsabuf,
                    (uint)1, bytes_recv, flags, wsaoverlapped, (IntPtr)null) == SocketInvoke.SOCKET_ERROR)
                {
                    if (Marshal.GetLastWin32Error() != SocketInvoke.WSA_IO_PENDING)
                    {
                        return false;
                    }
                    return true;
                }
            }
            return true;
        } 
```

也可以使用 WSASend 和 WSARecv 获得部分发送或部分接收数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:39:43.337

1）你为什么要这样做？要么使用托管异步套接字方法，要么使用 C 或 C++ 编写整个套接字代码，并通过漂亮干净的接口将其公开给托管代码。

2）我在这里猜测是因为代码不清楚，但是......每次读取或写入操作都需要一个独特的重叠结构。

3) 是的，WSASend 可能会失败并已发送部分数据，通常仅当您的数据缓冲区大于操作系统页面大小并且您达到锁定页面限制时 - 或者如果您用完了非分页池。如果发生这种情况，那么您可能无法从中恢复 - 首先通过限制您可以处理的连接数量来尽量不要陷入这种情况。期望能够处理 100,000 次连接，但要注意有多少重叠操作等待处理。

4) WSARecv 与所有 TCP 读取操作一样，可以返回 1 字节和所提供缓冲区大小之间的任何位置。如果它返回 0，则对等方已关闭连接的发送端。

5）使用 AcceptEx 并摆脱那个 Accept 线程。如果您支持从一个程序中侦听多个端口，则拥有一个专用的 Accept 线程会导致另一个线程上下文切换并且无法扩展。

# android - 如何在android视图中动态设置图像

> ID：13539024
> 
> 赞同：0
> 
> 时间：2012-11-24T06:45:30.843
> 
> 标签：android

我有大约 50 张图像，我想通过从可绘制文件夹中选择图像来动态显示它们。我应该如何在不使用开关盒的情况下使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:58:20.090

您可以从您的子类中动态获取捆绑的可绘制对象的资源 ID，`Activity`如下所示：

```
int id = getResources().getIdentifier("my_image", "drawable", getPackageName()); 
```

假设您有一个**名为**`my_image.png`.

然后，只需执行以下操作：

```
myImageView.setImageResource(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:03:23.690

如果您有兴趣将图像作为显示所有图像的幻灯片放映，那么您可以简单地使用所有图像的整数数组，然后使用数组索引简单地获取图像。您可以使用链接[单击此处](http://codinglookseasy.blogspot.in/2012/08/image-slide-show.html)，您可以将图像显示为幻灯片（也许您需要对此进行一些修改）

```
private void setImagesToFlipper(ViewFlipper flipper) {

  for (int count = 0; count < imageCountArray - 1; count++) {
   ImageView imageView = new ImageView(this);
   Bitmap  bmp = BitmapFactory.decodeResource(getResources(), imageCountArray[count]);
   imageView.setImageBitmap(bmp);
   flipper.addView(imageView);

  } 
```

其中 imageCountArray 是这样的：

```
 int imageCountArray[] = {R.drawable.image0,R.drawable.image1,R.drawable.image2,R.drawable.image3,R.drawable.image4,}; 
```

并确保您的资源 drawables 文件夹中有图像

编辑 ：

甚至你可以使用类似的东西

```
String mDrawableName = "image1";
int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName()); 
```

并使用此 id 而不是数组

希望这有帮助。快乐编码

# java - 如何在 java 或 JODA 中获取另一个时区的时间戳

> ID：13539028
> 
> 赞同：0
> 
> 时间：2012-11-24T06:46:18.107
> 
> 标签：java, jodatime

我想从不同的时区获取当前时间（现在）。

例如使用 joda 日期时间库，

我可以像使用 JODA 日期时间一样获得澳大利亚时区

```
DateTime zoned = new DateTime(DateTimeZone.forID("Australia/Melbourne")); 
```

及其当前时间

```
DateTime.now(DateTimeZone.forID("Australia/Melbourne")); 
```

如果我想将此 DateTime 对象转换为 java.sql.Timestamp 对象

，我必须得到它的毫秒使用

DateTime 类的 getMillis 方法以实例化新的时间戳对象

```
Timestamp zonedStamp = new TimeStamp(zoned.getMillis()); 
```

因此，每次自纪元时间以来经过的毫秒数在逻辑上对于每个时区都是相同的。

**我的问题是如何获取澳大利亚时区的当前时间来获取分区时间戳对象。**

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:57:42.927

如果您想要一个具有**澳大利亚时区等效时间值**`Timestamp`的对象，请尝试以下操作：

 **```
 Date currentTime = new Date();
    DateFormat ausFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss");
    ausFormat.setTimeZone(TimeZone.getTimeZone("Australia/Melbourne"));

    //get the time string in australian timezone
    String ausTime  = ausFormat.format(currentTime);

    //Convert the above time string in local date object
    DateFormat currentFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss");
    //optional: set the timezone as Asia/Calcutta
    currentFormat.setTimeZone(TimeZone.getTimeZone("Asia/Calcutta"));
    Date ausTimeInLocal = currentFormat.parse(ausTime);

    //get the time stamp object using above date object
    Timestamp ausTimeStampInLocal = new Timestamp(ausTimeInLocal.getTime()); 
```**

# php - php/ajax 中的表单验证

> ID：13539033
> 
> 赞同：1
> 
> 时间：2012-11-24T06:47:09.627
> 
> 标签：php, ajax

我试图添加一个异常，例如如果用户不输入任何内容或输入错误的“联系人 ID”并按 Enter，则会出现错误消息并通知用户未找到 ID。有什么帮助吗？在此先感谢:) 这是我的 index.html 文件。

```
<html> 
    <body> 
        <script language="javascript" type="text/javascript">

    function ajaxFunction(e){
    var e=e || window.event;
    var keycode=e.which || e.keyCode;
    if(keycode==13 || (e.target||e.srcElement).value==''){ 
    var http;  // The variable that makes Ajax possible! 

    try{ 
        // Opera 8.0+, Firefox, Safari 
        http = new XMLHttpRequest(); 
    } catch (e){ 
        // Internet Explorer Browsers 
        try{ 
            http = new ActiveXObject("Msxml2.XMLHTTP"); 
        } catch (e) { 
            try{ 
                http = new ActiveXObject("Microsoft.XMLHTTP"); 
            } catch (e){ 
                // Something went wrong 
                alert("Your browser broke!"); 
                return false; 
            } 
        }
    }

    var url = "getagentids.php?param=";
                var idValue = document.getElementById("agid").value;
                var myRandom = parseInt(Math.random()*99999999);  // cache buster
                http.open("GET", "getagentids.php?param=" + escape(idValue) + "&rand=" + myRandom, true);
                http.onreadystatechange = handleHttpResponse;
                http.send(null);
         function handleHttpResponse() {
                    if (http.readyState == 4) {
                        results = http.responseText.split(",");
                        document.getElementById('agfn').value = results[0];
                        document.getElementById('agsal').value = results[1];
                        document.getElementById('agtel').value = results[2];
                        document.getElementById('agid').value = results[3];
                    }
                } 
    }
}

</script> 

       <form>
            <table>
                <tr>
                    <td>Contact ID:</td>
                    <td><input id="agid" type="text"
                               name="contactid" onkeyup="ajaxFunction(event)"></td>
                </tr>
                <tr>
                    <td>Tel Number:</td>
                    <td><input id="agtel" type="text"
                               name="contacttel"></td>
                </tr>
                <tr>
                    <td>Name:</td>
                    <td><input id="agfn" type="text"
                               name="contactfullname"></td>
                </tr>
                <tr>
                    <td>Salutation:</td>
                    <td><input id="agsal" type="text"
                               name="contactsalutation"></td>
                </tr>
                <tr>
                    <td><input type="reset" value="Clear"></td>
                    <td></td>
                </tr>
            </table>
        </form>

    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:27:10.910

以下是我将如何使用[jQuery](http://jquery.com/)进行基本验证。

```
$(document).ready(function(){
    $('#contact').keypress(function(e){ //when user presses a key in that Input Box
      var code = (e.keyCode ? e.keyCode : e.which);
      if(code == 13) // check if it is Enter Key
      {
        if($(this).val().trim().length == 0) // check if it is empty
            alert("Error: Shouldn't be empty !");
        else
        {
            // You are good to go here
        }
      }
    });
});​ 
```

HTML：

```
<input id="contact" name="contact" value="" />​ 
```

如果您想现场测试，请转到：http: [//jsfiddle.net/NFSTL/](http://jsfiddle.net/NFSTL/)

我将[KeyPress](http://api.jquery.com/keypress/)事件绑定到该 InputBox。

希望能帮助到你。:)

* * *

**编辑**

不使用 jQuery：

```
function ajaxFunction(e){
    var code;
    if (!e) var e = window.event;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;

    if (e.target) targ = e.target;
    else if (e.srcElement) targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;

    if(code==13)
    {
        if(targ.value.trim().length == 0)
            alert("Error: This shouldn't be empty!");
        else
        {
            //do the sending and receiving of data here...
        }
    }
}​ 
```

HTML：

```
<input id="agid" type="text" name="contactid" onkeyup="ajaxFunction(event)" />​ 
```

对于现场测试：http: [//jsfiddle.net/SYf4C/](http://jsfiddle.net/SYf4C/)

这是我使用的一个很好的教程：[quirksmode.org/js/events_properties](http://www.quirksmode.org/js/events_properties.html)

我会说，jQuery 让生活更轻松。:) 因为它是一个 JavaScript 库，几乎可以在所有浏览器中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:04:48.627

主页编码：

```
 $('.vote').click(function() {
        var valueid=$(this).attr("alt");
        $.ajax({
            type: "POST",
            url: "voteajax.php",
            data: "votebtn="+valueid+""
        }).done(function( msg ) {
            var received_data=msg.trim();
            if(received_data=='0')
            {
                alert('Please sign in to vote!');
            }
            else
            {
                alert('received data'+received_data);
                gg2=received_data.split("/");
                var x=gg2[0];
                var no_of_vote=gg2[1];
                $('#totalnoofvotespan').html(no_of_vote);
                window.location='<?php echo $_SERVER['REQUEST_URI']; ?>';
            }
        });

//Ajax Page Coding

    $poll_choice = $_POST['votebtn'];
    $userid=$_SESSION['userid'];
    $date=date('Y-m-d h:i:s');
    $ex=explode(",",$poll_choice);
    $pollid=$ex[0];
    $choiceid=$ex[1];
    if($userid=="")
    {   
        echo "0";   
    }
    else
    {
        ..// Your coding 
        echo $choiceid."/".$numofvote;   // Echo the identifier and access this identifier in main page for message notification
    } 
```

第一个是主页面编码 在上面的编码中，我将参数传递给 ajax 页面。在 ajax 页面中，它从主页获取值，如果它无效，它会回显标识代码。使用该代码，我们可以说“它不是有效的”。像这样你必须尝试。我认为这可能会帮助你

# jqgrid - jqgrid col模型键

> ID：13539039
> 
> 赞同：2
> 
> 时间：2012-11-24T06:48:08.093
> 
> 标签：jqgrid

我正在尝试根据具有 key: true 设置的列的值更新行，但该列是字母数字，这里是网格：

```
jQuery("#list2").jqGrid({
datatype: "local",
colNames:['Col1','Col2', 'Col3'],
colModel:[
    {name:'Col1', width:200, key:true},
    {name:'Col2', width:90},
    {name:'Col3', width:100}
],
rowNum:20,
caption:"Output"
}); 
```

下面是我正在做的测试，我是否可以根据 Col1 的值访问行数据，Col1 是数字和字母的混合，介于 20 到 32 个字符之间。

```
var blah = jQuery("#list2").getRowData( '23feba2f5258b2bffe0454' );
$("#error").text(JSON.stringify(blah)); 
```

以上只会将 '{}' 打印到 id 错误的 div 中。但如果你尝试：

```
var blah = jQuery("#list2").getRowData( '1' );
$("#error").text(JSON.stringify(blah)); 
```

该对象将被打印。

非常感谢任何帮助。

# jquery - jQuery HTML 选择绑定到点击只工作一次

> ID：13539040
> 
> 赞同：0
> 
> 时间：2012-11-24T06:48:14.053
> 
> 标签：jquery, html

`.on`我有下面给出的代码。我试图使用 jQuery 的函数使它工作。但这似乎不起作用。我要做的基本上是在所需元素上按 onclick，每次我在 HTML 选择中选择一个选项。它只在第一次工作

```
$('#orderby').on('change',function() {
    var orderbyOption = $('#orderby option:selected').val()

    if (orderbyOption == "proyecto"){
        $('#proyectoOrder').click();
    }

    if (orderbyOption == "ano"){
        $('#anoOrder').click();
    }

    if (orderbyOption == "tipo"){
        $('#tipoOrder').click();
    }
}); 
```

元素`orderby`的`id`在哪里`select`

```
<select id="orderby" style="float: left; left: 360px; padding-top: 2px; position: absolute; text-align: left; top: 6px;">
    <option value="projecto">projecto</option>
    <option value="ano">ano</option>
    <option value="tipo">tipo</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:00:50.410

Code can be simplified to :

```
$('#orderby').on('change', function() {
    $('#' + $(this).val() + 'Order').click();
}); 
```

If you still have the same problem, then it is likely that one or more of the click actions affects/replaces the select element or its change handler.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:55:15.510

以下是简化代码的方法：

```
$('#orderby').on('change',function() {
    var orderbyOption = $(this).val()
    $('#'+orderbyOption+'Order').trigger('click');
    console.log('#'+orderbyOption+'Order'); // To check the id
});​ 
```

您可以在这里尝试一个可行的解决方案：http: [//jsfiddle.net/uy4rx/](http://jsfiddle.net/uy4rx/)

# javascript - 为 onunload 事件检测传入的 window.location

> ID：13539043
> 
> 赞同：3
> 
> 时间：2012-11-24T06:49:03.010
> 
> 标签：javascript, events, dom, navigation

> **可能重复：**
> [如何在 javascript onbeforeunload 事件中获取目标 URL？](https://stackoverflow.com/questions/1686687/how-can-i-get-the-destination-url-in-javascript-onbeforeunload-event)

有没有办法从 onunload 事件中识别待处理的导航 uri？我想根据用户在页面上导航的位置（特定链接、后退导航、刷新等）采取特定操作。是否有更好的方法来处理任务？

为了做到包罗万象，我避免向链接添加侦听器，同样不想使用 popstate、hashchange 等。onunload 似乎是捕捉几乎任何场景的最简单方法，但我没有能够找到一种方法来查看在此范围内将加载新页面的位置。可以做到吗？

* * *

正如评论中提到的，我不完全同意这是上面帖子的副本。我绝对不认为它应该被关闭，因为现在没有人能提供任何答案，包括我自己。无论如何，这是我使用的解决方案：

```
$(document).ready(function() {
    var newUri;
    $(document).on("click", "*", function(e) {
        var thisElement = $(this)[0];
        if (thisElement.onclick) {
            // Handle special case situations.
        }
        if (thisElement.href) {
            newUri = thisElement.href;
            console.log(thisElement);
        }
    });
    window.onbeforeunload = function(e) {
        console.log("Client navigating to "+newUri);
        // Perform final handling steps.
    };
}); 
```

# http-get - WCF 休息服务被称为两次

> ID：13539048
> 
> 赞同：0
> 
> 时间：2012-11-24T06:50:09.030
> 
> 标签：http-get, wcf-rest

我的 WCF 休息服务调用了两次我不知道确切的原因。当使用客户端应用程序进行调试时，它会被调用两次。谁能指出我出了什么问题...

服务声明：

```
 [ServiceContract]
        public interface IVoteCountService
        {
               [OperationContract]
            [WebGet(RequestFormat = WebMessageFormat.Json, ResponseFormat =                 WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,
                UriTemplate = "/GetCandidate")]
            CandisteListResponse CandidateList();
}

[DataContract]
    public class CandisteListResponse
    {
        public CandidateList CandidateList { get;set;}
    } 
```

服务定义：

```
public CandisteListResponse CandidateList()
        {
            CandidateList objVoterList = new CandidateList();
            objVoterList = CandidateListDataService.GetCandidateList();

            if (objVoterList.Count > 0)
            {

                return new CandisteListResponse {  CandidateList = objVoterList };
            }
            else
            {

                return new CandisteListResponse { CandidateList = objVoterList };
            }
        } 
```

候选列表数据服务.cs：

```
public class CandidateListDataService
    {
        public static CandidateList GetCandidateList()
        {
            CandidateList obj = new CandidateList();
            using (SqlConnection MyConnection = new SqlConnection(SqlServerDataSource.GetConnectionString()))
                try
                {
                    if (ConfigurationManager.AppSettings["SelectDB"] == "SQLServer")
                    {
                        {
                            SqlCommand MyCommand = new SqlCommand("usp_service_get_candidate", MyConnection);
                            MyCommand.CommandType = CommandType.StoredProcedure;
                            MyCommand.CommandTimeout = 56000;

                            MyConnection.Open();

                            using (SqlDataReader MyReader = MyCommand.ExecuteReader())
                            {

                                while (MyReader.Read())
                                {
                                    obj.Add(FillVoterInformation(MyReader));

                                }

                                MyReader.Close();
                                MyReader.Dispose();
                            }

                        }
                    }

                }
                catch (Exception ex)
                {
                    MyConnection.Dispose();

                }
                finally
                {
                    MyConnection.Dispose();

                }
            return obj;

        }

        private static Candidate FillVoterInformation(SqlDataReader MyDataRecord)
        {
            Candidate MyVoterlist = new Candidate();

            try
            {
                MyVoterlist.CODE = Convert.ToString(MyDataRecord["CODE"]);
                MyVoterlist.CNAME = Convert.ToString(MyDataRecord["CNAME"]);
                MyVoterlist.SH_NAM = Convert.ToString(MyDataRecord["SH_NAM"]);

                MyVoterlist.TV = (MyDataRecord["TV"] == DBNull.Value ? Convert.ToInt32(0) : Convert.ToInt32(MyDataRecord["TV"]));

                MyVoterlist.TVCNT = (MyDataRecord["TVCNT"] == DBNull.Value ? Convert.ToInt32(0) : Convert.ToInt32(MyDataRecord["TVCNT"]));
                MyVoterlist.ROW_NO = (MyDataRecord["ROW_NO"] == DBNull.Value ? Convert.ToInt32(0) : Convert.ToInt32(MyDataRecord["ROW_NO"]));

            }
            catch (Exception ex)
            {
                throw ex;

            }
            return MyVoterlist;

        }

    } 
```

网络配置：

```
<system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="streamWebHttpbinding" transferMode="Streamed"  maxReceivedMessageSize="1000000000000" receiveTimeout="01:00:00" sendTimeout="01:00:00" />
      </webHttpBinding>

    </bindings>
    <services>
      <service name="VoteCountService.VoteCountWCFService" behaviorConfiguration="ServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding"  contract="VoteCountService.IVoteCountService" behaviorConfiguration="web" bindingConfiguration="streamWebHttpbinding" >
        </endpoint>
      </service>
      </services>
    <behaviors>
      <serviceBehaviors>
         <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
          <dataContractSerializer maxItemsInObjectGraph="10000000"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

提前致谢

维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:48:29.890

在我的应用程序中，我使用了 Dataetime 转换如下

```
 private static Voter FillVoterInformation(SqlDataReader MyDataRecord)
            {
                Voter MyVoterlist = new Voter();

                try
                {
                  MyVoterlist.VOTERDOB = (MyDataRecord["VOTERDOB"] == DBNull.Value? Convert.ToDateTime(null): Convert.ToDateTime(MyDataRecord["VOTERDOB"]));
    }
    catch (Exception ex)
                {
                    throw ex;

                }
                return MyVoterlist;

            }

When I had analyzed TraceListner I Found that the DateTime Conversion Throws the following  following Exception.

"DateTime values that are greater than DateTime.MaxValue or smaller than DateTime.MinValue when converted to UTC cannot be serialized to JSON." 

I have Solved this issue by converting DateTime to UTC Time Following is the Code  

item.VOTERDOB = DateTime.SpecifyKind(item.VOTERDOB, DateTimeKind.Utc); 
```

谢谢

维杰

# c# - Mono 项目中缺少 Sqlite 程序集

> ID：13539049
> 
> 赞同：0
> 
> 时间：2012-11-24T06:50:12.430
> 
> 标签：c#, sqlite, mono

我正在尝试使用 Mono 将开源 .Net 项目移植到 OSX（Mountain Lion）。我的第一步是尝试构建项目并查看我遇到的错误。

该代码使用出现在“参考”下的 System.Data.Sqlite。我在 OSX 上安装了 Sqlite，但显然缺少 Mono 等价物。如何将其包含在项目中？最终我想我将不得不进行条件编译，但现在，我只想让事情正常进行。

这是错误：

```
Assembly 'System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=x86' not found. Make sure that the assembly exists in disk. If the reference is required to build the project you may get compilation errors. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:19:37.313

您需要包含 SQLite 的 ADO.NET 提供程序的托管程序集。

[System.Data.SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

Mono 还提供 Mono.Data.Sqlite 程序集，它与 API 兼容，尽管您需要更改“使用”语句以使用正确的命名空间。更多关于这里：

[MonoDevelop“编辑参考”中缺少 Mono.Data.SQLite 参考](https://stackoverflow.com/questions/3649025/mono-data-sqlite-reference-missing-in-monodevelop-edit-references)

由于您是在 Mac 上构建的，我很想只引用 Mono.Data.Sqlite 并使用条件编译调整您的“使用”语句。

# spring - Hibernate多对一映射中的EntityNotFoundException但是数据存在

> ID：13539050
> 
> 赞同：58
> 
> 时间：2012-11-24T06:50:15.397
> 
> 标签：spring, hibernate, jpa, spring-data-jpa

当我尝试通过 Invoice 对象获取用户时出现 javax.persistence.EntityNotFoundException 错误

invoice.getUser().getId()

## 错误如下

```
javax.persistence.EntityNotFoundException: Unable to find com.indianretailshop.domain.User with id 5
    at org.hibernate.ejb.Ejb3Configuration$Ejb3EntityNotFoundDelegate.handleEntityNotFound(Ejb3Configuration.java:137)
    at org.hibernate.proxy.AbstractLazyInitializer.checkTargetState(AbstractLazyInitializer.java:189)
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:178)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215) 
```

## 实体类如下（不包括getter和setter）

```
@Entity
@Table(name="users")
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(unique=true, nullable=false)
    private int id;

    .
        .
        .

    //bi-directional many-to-one association to Invoice
    @OneToMany(mappedBy="user")
    private List<Invoice> invoices;
}

@Entity
@Table(name="invoice")
public class Invoice implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(unique=true, nullable=false)
    private int id;
        .
        .
        .

    //bi-directional many-to-one association to User
    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="Users_id")
    private User user;
} 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2015-08-03T12:38:16.833

我有同样的问题，并且

```
@NotFound(action = NotFoundAction.IGNORE) 
```

解决了我的问题。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-02-25T04:28:15.383

如果您使用@ManyToOne，则引用的实体必须存在。唯一的其他选项是将该字段指定为 long 并通过单独的查询检索引用的实体。

如果找不到请求的实体，则抛出异常 (javax.persistence.EntityNotFoundException) 而不是返回 null。

如果您是延迟加载且未手动处理此异常，请使用 @NotFound 注释来解决此异常。

```
 @ManyToOne(
        fetch = FetchType.LAZY)
    @NotFound(
        action = NotFoundAction.IGNORE)
    @JoinColumn(
        name = COLUMN,
        referencedColumnName = COLUMN,
        insertable = false,
        updatable = false)
    private Table table; 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-11-26T04:45:36.010

问题可能是直接实体不存在，但也可能是来自该实体的引用实体，通常是 EAGER 提取类型，或者 optional=false。

试试这个：

```
 //bi-directional many-to-one association to User
     @ManyToOne(fetch=FetchType.LAZY)
     @JoinColumn(name="Users_id")
     private User user = new User(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-03-02T00:45:11.957

不确定这是否适用于您的情况。

但是我有一个类似的问题，我直接在数据库表 X 中更新并将字段设置为 null，但在 java 类中，该字段是@NotNull。

所以当另一个类 Y 有一个带有 ManyToOne 的 X 对象时，由于实体中的 null 值，它无法加载实体。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-08-04T09:46:52.257

请尝试以下

`@OneToMany(mappedBy="yourMappingattributeName",cascade=CascadeType.ALL)`或者

```
@OneToMany(mappedBy="yourMappingattributeName",cascade=CascadeType.MERGE) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-07T06:42:25.683

我最近遇到了类似的问题，但问题是数据库中始终存在记录。所以我做了一些调查，发现在从数据库重新加载之前缓存实体被标记为删除和重新加载失败。它发生在我的`Hibernate 4.3.5`Final 然后我升级到`Hibernate 4.3.11`Final 似乎解决了这个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-25T21:33:25.547

使用 @NotFound(action = NotFoundAction.IGNORE) 以防它的父级不存在

通过使用 cascade=CascadeType.ALL 它将删除它的父实体

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-01T07:39:46.640

也许有人来到这个答案并发现它很有用：就我而言，我已将我的实体标记为已删除，与该实体有关系的实体找不到它。因此，将 deleted 更改为 false 对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-15T13:54:48.347

当您添加注释`referencedColumnName = COLUMN`时它应该可以`@JoinColumns`工作`@ManyToOne`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-30T05:36:35.673

您必须为所有实体实现 hashCode 和 equals 方法。例子：

```
@Override
public int hashCode() {
    return Objects.hash(getId());
} 
```

# c# - 如何获得单选按钮的价值？

> ID：13539051
> 
> 赞同：14
> 
> 时间：2012-11-24T06:51:05.807
> 
> 标签：c#, radio-button

我有一个包含单选按钮的组框，例如。

> **o**男性
> 
> **o**女性

我希望我的代码获取单选按钮的选定值并将其复制到字符串类型变量请使用简单的代码，因为我不是很专业

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-24T06:59:00.973

**对于获胜表格：**

要从单选按钮中获取值（假设您想要该值，而不是文本），您将获得 Checked 属性：

```
string value = "";
bool isChecked = radioButton1.Checked;
if(isChecked )
  value=radioButton1.Text;
else
  value=radioButton2.Text; 
```

**对于网络表单：**

```
<asp:RadioButtonList ID="rdoPriceRange" runat="server" RepeatLayout="Flow">
    <asp:ListItem Value="Male">Male</asp:ListItem>
    <asp:ListItem Value="Female">Female</asp:ListItem>
</asp:RadioButtonList> 
```

和 CS-in 一些按钮点击

```
string value=rdoPriceRange.SelectedItem.Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T06:53:52.777

如果你有两个，你需要检查一个

```
if(rbMale.Checked)
{

}
else
{

} 
```

如果超过两个，您需要检查所有复选框

```
if(rb1.Checked)
{

}
else if(rb2.Checked)
{

}
else if(rb3.Checked)
{

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T07:03:05.000

您还可以为 RadioButtons 使用 Common Event，并且可以使用该[`Tag`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)属性将信息传递给您的字符串，或者如果您希望您的字符串与 RadioButton 的 Text 保持相同的值，则可以使用 Text 属性。

像这样的东西。

```
private void radioButton_CheckedChanged(object sender, EventArgs e)
{
    if (((RadioButton)sender).Checked == true)
        sex = ((RadioButton)sender).Tag.ToString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-07T23:49:51.583

我发现使用上述通用事件效果很好，您可以像这样设置通用事件：

```
private void checkChanged(object sender, EventArgs e)
    {
        foreach (RadioButton r in yourPanel.Controls)
        {
            if (r.Checked)
                textBox.Text = r.Text;
        }
    } 
```

当然，您不能在面板中使用其他控件，但如果您的所有单选按钮只有一个单独的面板（例如在组框内使用子面板或您更喜欢组织你的控制）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-24T11:23:59.680

另一种方法是使用枚举和扩展标准 RadioButton 的组件类。

```
public enum Genders
{
    Male,
    Female
}

[ToolboxBitmap(typeof(RadioButton))]
public partial class GenderRadioButton : RadioButton
{
    public GenderRadioButton()
    {
        InitializeComponent();
    }

    public GenderRadioButton (IContainer container)
    {
        container.Add(this);

        InitializeComponent();
    }

    public Genders gender{ get; set; }
} 
```

为 GenderRadioButtons 使用通用事件处理程序

```
private void Gender_CheckedChanged(Object sender, EventArgs e)
{
    if (((RadioButton)sender).Checked)
    {
        //get selected value
        Genders myGender = ((GenderRadioButton)sender).Gender;
        //get the name of the enum value
        string GenderName = Enum.GetName(typeof(Genders ), myGender);
        //do any work required when you change gender
        switch (myGender)
        {
            case Genders.Male:
                break;
            case Genders.Female:
                break;
            default:
                break;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-19T09:50:30.050

**选中单选按钮时获取值**

```
if (rdbtnSN06.IsChecked == true)
{
string RadiobuttonContent =Convert.ToString(rdbtnSN06.Content.ToString());
}
else
{
string RadiobuttonContent =Convert.ToString(rdbtnSN07.Content.ToString());
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-20T14:24:41.583

**Windows 窗体**

对于有多个单选按钮要检查的情况，这个函数非常紧凑：

```
/// <summary>
/// Get the value of the radio button that is checked.
/// </summary>
/// <param name="buttons">The radio buttons to look through</param>
/// <returns>The name of the radio button that is checked</returns>
public static string GetCheckedRadioButton(params RadioButton[] radioButtons)
{
    // Look at each button, returning the text of the one that is checked.
    foreach (RadioButton button in radioButtons)
    {
        if (button.Checked)
            return button.Text;
    }
    return null;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-03T07:51:02.790

你可以像下面这样轻松地做，

```
_employee.Gender = rbtnMale.Checked?rbtnMale.Text:_employee.Gender;
_employee.Gender = rbtnFemale.Checked?rbtnFemale.Text:_employee.Gender; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-27T15:15:00.010

**C# WinForm**

```
public string GetCheckedRadioButtonTextByParent(Control parent)
{
    RadioButton checkedRadioButton = parent.Controls.OfType<RadioButton>.FirstOrDefault(r => r.Checked);
    if (checkedRadioButton is object)
    {
        return checkedRadioButton.Text;
    }

    return "";
} 
```

**用法** 您可以将 RadioButtons 添加到 GroupBox、Panel 或 Form 中，然后通过以下方式获取选中的文本

```
string selectedText1 = GetCheckedRadioButtonTextByParent(GroupBox1);
string selectedText2 = GetCheckedRadioButtonTextByParent(Panel1);
string selectedText3 = GetCheckedRadioButtonTextByParent(Form1); 
```

**VB.NET WinForm**

```
Public Function GetCheckedRadioButtonTextByParent(Byval parent As Control) As String
   Dim checkedRadioButton As RadioButton = parent.Controls.OfType(Of RadioButton).FirstOrDefault(Function(r) r.Checked)
   If checkedRadioButton IsNot Nothing Then
      Return checkedRadioButton.Text
   End If
   Return ""
End Function 
```

**用法** 您可以将 RadioButtons 添加到 GroupBox、Panel 或 Form 中，然后通过以下方式获取选中的文本

```
Dim selectedText1 As String = GetCheckedRadioButtonTextByParent(GroupBox1)
Dim selectedText2 As String = GetCheckedRadioButtonTextByParent(Panel1)
Dim selectedText3 As String = GetCheckedRadioButtonTextByParent(Form1) 
```

# ruby-on-rails - Rails 在更新时使用 respond_with 处理 json 请求的异常

> ID：13539052
> 
> 赞同：0
> 
> 时间：2012-11-24T06:51:07.237
> 
> 标签：ruby-on-rails, json, respond-with

我有一个一般性的 rails 问题，尽管进行了大量搜索，但我没有找到答案。**为 json rest apis 处理运行时出现的异常（意外错误）的推荐方法是什么**？我在更新操作上使用 respond_with 时遇到了一些问题。我不得不回退到respond_to。例如，这是一个好的模式吗？有更好的选择吗？此外，**其他应用程序采取什么方法来覆盖所有操作，以便以正确的格式（html 用于 html 请求，json 用于 application/json 请求）将响应发送回客户端**？

```
def update
  begin
     User.update_attributes(params[:user]))
     #assume some other logic here raises an exception (a runtime unexpected error)
  rescue => ex
      errors = {}
      errors['errors'] = [] << ex.message
     #not having this rescue here will cause rails to respond with a html error page 
     #which is not what the client is looking for (client expects json responses)
     #however, if I rescue any runtime errors, I have a chance to respond 
     #in the way the client expects. Also, respond_with here won't work 
     #because I am getting a 204 response back. So I am forced to use respond_to in the ugly way
    respond_to do |format|
        format.html # some.html.erb
        format.json  { render :json => errors.to_json, :status=>400 }
      end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:55:49.757

尝试这个

```
respond_to do |format|
  ...
  format.json { render :json => ex.message, :status => 400 }
end 
```

# javascript - Javascript 禁用 asp.net 按钮

> ID：13539056
> 
> 赞同：1
> 
> 时间：2012-11-24T06:51:41.247
> 
> 标签：javascript, asp.net

单击后，我使用以下 Javascript 禁用按钮：

```
var c = 0;
function DisableClick(target) {
    var objName = target;
    document.getElementById(objName).disabled = true;
    c = c + 1;
    msg = 'Please Wait...(' + c + ')!';
    document.getElementById(objName).value = msg;
    var t = setTimeout('DisableClick()', 1000);
}

<asp:Button ID="btnLogin" runat="server" CssClass="cssLoginButton blue"  Text="Log in" ToolTip="Log in" ValidationGroup="UserLogin" onclick="btnLogin_Click" OnClientClick="DisableClick('btnLogin')" /> 
```

我的 Javascript 给出了这个错误：

> Microsoft JScript 运行时错误：无法设置属性“已禁用”的值：对象为空或未定义

![脚本给出的错误](../Images/21c1f3549983711fb02a3bcfea374d47.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:58:06.263

您可以在 javascript 函数中传递单击的按钮对象。如果不需要回发，则返回 false。

改变

```
OnClientClick="DisableClick('btnLogin')" 
```

到

```
// the DisableClick make a loop, so make the return here.
OnClientClick="DisableClick(this);return false;" 

function DisableClick(target) {   
    target.disabled = true;
    c = c + 1;
    msg = 'Please Wait...(' + c + ')!';
    target.value = msg;

    // The DisableClick needs the target parametre, so send it again
    //  but need to keep it here for work.
    var me = target;
    var t = setTimeout(function(){DisableClick(me);}, 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:54:10.177

你可以做

```
OnClientClick = "JavaScript: return false; " 
```

还

```
document.getElementbyid (objectName) 
```

返回空

你确定你传递的是正确的 id 吗？按钮？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:56:45.107

你可以做的是调用身体负载的函数，它应该可以正常工作。所以代码将是

```
<script type="text/javascript">
function disableBtn()
{
var btn= document.getElementById("<%=Button1.ClientID%>");
btn.disabled=true;
}
</script> 
```

html

```
<body onload="javascript:disableBtn();">

 <asp:Button ID="Button1" runat="server" Text="Button" />
 ...
 </body> 
```

希望对你有帮助 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T07:24:05.523

**详细信息：**这应该可以解决您的禁用按钮的解决方案以及在该过程完成之前显示一条消息

**标记**

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
     <ContentTemplate>

      .... Your other code

        <asp:Button ID="btnLogin" runat="server" CssClass="cssLoginButton blue"  Text="Log in" ToolTip="Log in"
           OnClientClick="this.disabled=true;" ValidationGroup="UserLogin" onclick="btnLogin_Click"  />

     </ContentTemplate>
</asp:UpdatePanel>

<asp:UpdateProgress ID="UpdateProgress1" runat="server">
        <ProgressTemplate>
            Please Wait...
        </ProgressTemplate>
    </asp:UpdateProgress> 
```

测试它

**背后的代码**

```
protected void btnLogin_Click(object sender, EventArgs e)
{
   // Introducing delay for demonstration.
   System.Threading.Thread.Sleep(3000);      
} 
```

# web-services - mule 中“模式：web-service-proxy”的安全性

> ID：13539058
> 
> 赞同：0
> 
> 时间：2012-11-24T06:52:14.083
> 
> 标签：web-services, security, mule

我在 mule 中使用“模式：web-service-proxy”，并在 mule 服务器中的新闻地址 wsdl 上重定向另一个版本的旧 wsdl。

我将在我的 Web 服务中使用 wsdl 的新地址。我想在 mule 服务器中的新地址上设置安全性，例如：我限制了我的 wsdl，每个人都不允许使用我的 wsdl。（具有特定 IP 的用户允许使用它）我设置了用户名和密码以使用 wsdl，...

请告诉我如何在 mule config 中设置此安全性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:59:30.430

尽管该链接描述的功能在 mule 中不可用，但基本原理仍然有效。

您可以通过执行以下操作来利用表达式过滤器：

```
<expression-filter expression="#[groovy:'${allowed}'.contains(message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').substring(message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').indexOf('/')+1, message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS').indexOf(':')))]" doc:name="Expression"/> 
```

允许一个属性占位符，在运行时将被允许的 IP 列表（即逗号分隔）替换。

# c# - 如何在 C# 中创建通用列表并使用 Select SQL Query 填充

> ID：13539059
> 
> 赞同：5
> 
> 时间：2012-11-24T06:52:17.180
> 
> 标签：c#, list

我在 Visual Studio Express 2012 中使用 C#。我专门使用桌面应用程序。作为数据库，我使用 MySQL

  数据库和 MySQL 之间的连接工作正常。

  我的疑问是关于进行搜索并返回结果。

  在我见过的所有示例中，最常见的是在我的 MySQL`enter code here`连接类中创建一个方法，该方法将返回一个包含搜索结果的列表。我真的不知道这在概念上是否更正确，但它似乎非常可以接受。

  我设法进行搜索，从我的桌子上返回所有客户。但我的大问题是：如何制作这种通用方法？

  例如

  我的表单有一个触发点击事件的按钮：

```
dbConnect = new DBConnect();
dbConnect.OpenConnection();
private List<Clients> listSQLQuery; 
listSQLQuery = dbConnect.Select("select * from  clients");
datagridview.DataSource = listSQLQuery; 
```

我上面使用的方法 dboConnect.Select() ：

```
public List<Clients> Select(string query)
{        

    //Create a list to store the result
    List<Clients> list = new List<Clients>();
   Clients clients = new Clients();

    //Open connection
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            clients.Id = dataReader["Id"].ToString();
            clients.Name = dataReader["Name"].ToString();
            list.Add(cliente);
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return list;
    }
    else
    {
        return list;
    }
} 
```

最后，我的班级客户

```
public class Clients
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

这一切都有效，但非常特定于与客户端的查询。

  如果现在我打电话**listSQLQuery=dbConnect.Select("select * from products")**这个方法将不起作用，因为它是使用作为返回客户端列​​表而不是产品列表构建的。

  我不知道我的问题是否清楚，但我希望我可以打电话而不用担心它是客户、产品还是房间。

像这样的东西：

```
listSQLQuery.dbConnect.Select("select * from clients");
listSQLQuery.dbConnect.Select("select * from products");
listSQLQuery.dbConnect.Select("select * from rooms"); 
```

   有没有什么方法可以得到一个通用的列表返回，而不用担心 listQuerySQL 的类型？我只想将此列表绑定到数据网格视图。

我是 C# 的新手，所以我对 LINQ、实体框架一无所知...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:08:40.753

您可以更改您的 Select 方法，如下所示，并提供单独的方法来从数据读取器解析和创建实体的实例。

```
public List<T> Select(string query)
{
...
while(dataReader.Read())
{
     list.Add(CreateInstance<T>(dataReader)):
}
...
}

private T CreateInstance<T>(DataReader dataReader)
[
     if(T is Client)
          return CreateClient(dataReader);
     else if(T is Manager)
          return CreateManager(dataReader);
...
}

private Client CreateClient(DataReader dataReader)
{
     return new Client(dataReader["id"], dataReader["name"]);
} 
```

编辑：我不同意 EF 的建议。由于您是 C# 新手，因此玩一些基本的东西会让您更容易理解 EF 和一些 DAL 模式。当您在项目中遇到困难并且需要更深入地了解内部工作时，对系统的较低级别部分充满信心非常重要。

如果您已经对 DAL 技术感到满意，您可以轻松跳到 EF 或 NHibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:04:26.953

我同意其他评论员的观点，如果你学习 EF 和 LINQ，它会让你的生活更轻松。

[实体框架视频](http://msdn.microsoft.com/en-us/data/jj200620)

[LINQ 简介视频](http://channel9.msdn.com/Shows/Devs4Devs/Introduction-to-LINQ)
[LINQ 查询简介网页](http://msdn.microsoft.com/en-us/library/bb397906.aspx)
[大量 LINQ 示例 C#](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

就您的解决方案而言，也许您可​​以创建 3 种不同的选择方法：SelectClients、SelectProduct 和 SelectRooms。您将需要更改一些代码，以便它只打开和关闭一次连接。

# c - 当 select 报告为可写时，write() 到非阻塞 fd 是否可以返回 EAGAIN？

> ID：13539066
> 
> 赞同：3
> 
> 时间：2012-11-24T06:53:55.443
> 
> 标签：c, ruby, macos, nonblocking

我正在尝试追踪 OS X (10.8.2) 中的一些奇怪行为。基本上，我正在打开一个管道，并用数据填充它，直到它不可写为止。然而，我发现，根据我尝试写入的块的大小，有时我会从 write() 调用中获得 EAGAIN，即使 select 声称管道仍然是可写的。这是一些测试代码：

```
#include <unistd.h>
#include <errno.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/select.h>

#define START 1
#define END 16

int is_writeable(int fd) {
    struct timeval timeout;
    timeout.tv_sec = 0;
    timeout.tv_usec = 0;

    fd_set ws;

    FD_ZERO(&ws);
    FD_SET(fd, &ws);

    if(select(fd+1, NULL, &ws, NULL, &timeout) < 0) {
        return -1;
    }

    if(FD_ISSET(fd, &ws))
        return 1;
    else
        return 0;
}

int main(int argc, char *argv[]) {

    int pipes[2];
    int rp, wp, i, errval, fails, tmp;

    char testbuf[END];
    char destbuf[128000];

    for(i = START; i < END; i++) {
        int byte_count = 0;
        printf("%i: ", i);
        fails = 0;

        pipes[0] = 0;
        pipes[1] = 0;

        if(pipe(pipes) < 0) {
            printf("PIPE FAIL\n");
            break;
        }
        rp = pipes[0];
        wp = pipes[1];

        int flags = fcntl(wp, F_GETFL, 0);
        if(fcntl(wp, F_SETFL, flags | O_NONBLOCK) == -1) {
            fails = 4;
        }

        if(is_writeable(wp) != 1) {
            fails = 1;
        }

        while(!fails) {
            // printf(".");
            if(is_writeable(wp) < 1) {
                break;
            }

            tmp = write(wp, testbuf, i);
            //No bytes written, fail
            if(tmp < 0) {
                if(errno == EAGAIN) {
                    if(is_writeable(wp) == 1) {
                        fails = 3;
                        break;
                    }
                } else {
                    fails = 2;
                    perror("During write");

                    break;
                }

            } else {
                byte_count += tmp;
            }
            //Errno is eagain, fail
        }
        printf("byte count %i, ", byte_count);

        if(fails)
            printf("FAIL, %i\n", fails);
        else
            printf("PASS\n");

        if(close(wp) != 0)
            printf("WP CLOSE FAIL\n");
        if(close(rp) != 0)
            printf("RP CLOSE FAIL\n");
    }

} 
```

这是输出：

```
1: byte count 16384, PASS
2: byte count 16384, PASS
3: byte count 65535, FAIL 3
4: byte count 16384, PASS
5: byte count 65535, FAIL 3
6: byte count 65532, FAIL 3
7: byte count 65534, FAIL 3
8: byte count 16384, PASS
9: byte count 65529, FAIL 3
10: byte count 65530, FAIL 3
11: byte count 65527, FAIL 3
12: byte count 65532, FAIL 3
13: byte count 65533, FAIL 3
14: byte count 65534, FAIL 3
15: byte count 65535, FAIL 3 
```

请注意，失败案例 3 是 write() 调用返回 -1，但 select 仍然报告文件句柄是可写的。

这是 Ruby 中的一个较短示例，它显示了相同的失败：

```
(1..10).each do |i|
  passes = true
  begin
    (rp, wp) = IO.pipe
    wp.write_nonblock ("F" * i) while(select [], [wp], [], 0)
  rescue Errno::EAGAIN
    puts "#{i}: FAIL"
    passes = false
  ensure
    rp.close
    wp.close
  end
  puts "#{i}: PASS" if passes
end 
```

我无法确定这是错误还是对规范的误解。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:50:29.667

你在这里使用管道。管道有一个有趣的原子写入属性 --- 小于 PIPE_BUF（此处为 4096）字节的写入保证是原子的。因此，即使可以向管道写入较少数量的字节，对管道的写入也会因 EAGAIN 失败。

我不确定这是否是您在这里遇到的（我没有仔细观察），但是这种行为记录在 man 7 pipe 中。

# c++ - Winsock滞后，测试连接速度

> ID：13539067
> 
> 赞同：1
> 
> 时间：2012-11-24T06:53:59.753
> 
> 标签：c++, winapi, winsock

我正在使用 Winsock、C++ 和 Win32 制作一个两人回合制游戏。问题是，我需要一种方法来确定每个玩家的当前连接速度（或延迟时间）。

如果玩家的连接速度太慢，我不希望他（或她）的对手每次移动都需要额外等待 20 秒（由于滞后）。

***为了防止这种不必要的等待，延迟太高（或当前***连接速度太慢）的玩家将不允许在游戏的某些区域进行游戏。

有谁知道确定客户端连接速度或当前延迟的方法？

我什至不知道从哪里开始，所以任何帮助将不胜感激。

我阅读了一些关于 ping 的东西，我很想知道是否有一种方法（或一些 winsock 函数）可以让我从服务器 ping 客户端计算机，或从客户端 ping 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:03:09.937

好吧，您可以很容易地发现连接的“ping”时间......

一个程序使用原始消息的时间戳发送包含时间戳的特殊消息，另一个程序回复该消息。然后当第一个程序收到回复时，它可以将发送消息中的时间戳与当前时间进行比较，从而获得“ping”时间。

# c# - 如何发送多个产品详细信息以进行销售 internetsecure API

> ID：13539071
> 
> 赞同：0
> 
> 时间：2012-11-24T06:54:33.903
> 
> 标签：c#, .net, api

我从 internetsecure 帮助库中获得，必须遵循要提交处理的交易详细信息。一个简单的 XML 事务请求示例，如下所示：

```
<FORM name=isecure action=https://secure.internetsecure.com/process.cgi method=post> 
<INPUT type=hidden value=X name=xxxRequestMode> 
<TEXTAREA name=xxxRequestData rows=37 cols=99> 
<?xml version="1.0" encoding="UTF-8"?> <TranxRequest>
<GatewayID>00004</GatewayID> 
<Products>1.01::1::001::Test Product 1::{TEST}</Products> 
<xxxName>John Smith</xxxName> 
....
....
....
</TEXTAREA> 
<BR> 
<INPUT type=submit value="SUBMIT PAYMENT"> 
</FORM > 
```

问题就在这里，我无法发送一个以上的产品进行销售

```
<Products>1.01::1::001::Test Product 1::{TEST}</Products> 
```

帮助库：[https ://www.internetsecure.com/Elavon/ShowPage.asp?page=XML5&q=2](https://www.internetsecure.com/Elavon/ShowPage.asp?page=XML5&q=2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:27:56.880

它应该看起来像这样***1.01::1::001::Test Product 1::{TEST}|2.00::1::002::Test Product 2::{TEST}*** 你用管道分隔每个产品 | 我在下面的帮助页面上找到了此信息是链接。 [https://www.internetsecure.com/Elavon/ShowPage.asp?page=APSM&q=1](https://www.internetsecure.com/Elavon/ShowPage.asp?page=APSM&q=1)

他们展示了一个带有基本 HTML 的 Merchant Link 示例，但产品的传递方式与 Merchant DIRECT Method XML 相同。

# asp.net - 带有配置文件的 Web 应用程序项目

> ID：13539076
> 
> 赞同：0
> 
> 时间：2012-11-24T06:54:49.920
> 
> 标签：asp.net, asp.net-membership, asp.net-profiles

我创建了一个用户如下：

```
MembershipCreateStatus status = MembershipCreateStatus.InvalidPassword;
MembershipUser newUser = Membership.CreateUser(userNameTxt.Text.Trim(),
    passwordTxt.Text, emailTxt.Text, "N//A", "N//A", true, out status);
Roles.AddUserToRole(userNameTxt.Text.Trim(), "Member");

// Gather and save Profile info
CustomProfile profile =  CustomProfile.GetProfile(userNameTxt.Text.Trim());

profile.Personal.Email = emailTxt.Text.Trim();
profile.Personal.FirstName = firstNameTxt.Text.Trim();
profile.Personal.LastName = lastNameTxt.Text.Trim();
profile.Personal.Street = streetTxt.Text.Trim();
profile.Personal.City = cityTxt.Text.Trim();
profile.Personal.State = stateDDL.SelectedValue;
profile.Personal.Zip = zipTxt.Text.Trim();
profile.Save(); 
```

我在 DB Profile 表中看到了数据，但在 Users 表中没有看到 - 这是设计使然吗？使用 PasswordRecovery 控件时，它似乎无法识别以这种方式创建的用户。有人可以解释以这种方式创建配置文件时使用哪些表以及如何重置密码？

**更新：**

测试我的 PasswordRecovery 控件时，用户名为空：

```
MembershipUser user = Membership.GetUser(User.Identity.Name);
if (Page.IsPostBack)
{
    Response.Write(user.UserName);
} 

<add 
    name="DefaultMembershipProvider" 
    type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers,
        Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    connectionStringName="LocalSqlServer" 
    enablePasswordRetrieval="false" 
    enablePasswordReset="true" 
    requiresQuestionAndAnswer="true" 
    requiresUniqueEmail="false" 
    minRequiredPasswordLength="6" 
    minRequiredNonalphanumericCharacters="0" 
    passwordAttemptWindow="1000" 
    applicationName="/" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:13:04.723

配置文件数据保存在表中，其中每个属性都是动态的，并`aspnet_Profile`放置在它的值上。`PropertyNames``PropertyValuesString`

每个属性都使用`UserId`. 从 asp.net 让您设计自定义配置文件参数的那一刻起，这种设计是合乎逻辑的。另一方面，如果您有数据库，您可以创建您的个人表格，以根据您的设计保留您喜欢的信息。

要重置密码，您可以使用MSDN 上完整说明的[ResetPassword方法。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.resetpassword(VS.100).aspx)

我更喜欢的另一种方法，但您需要编写更多代码，向用户发送一封电子邮件，从您发送给他们的电子邮件中，您可以在实际上可以编写新密码的页面上，然后您在后面的代码中您将其重置为：

```
MembershipUser mu = Membership.GetUser(UserIdToChangePass);

if (mu != null)
{
    string sTemporaryPassword = mu.ResetPassword();
    mu.ChangePassword(sTemporaryPassword, txtNewPassword.Text);
} 
```

`txtNewPassword`用户输入新密码的文本框在哪里。

# model-view-controller - 骨干：一个模型两个视图？

> ID：13539078
> 
> 赞同：2
> 
> 时间：2012-11-24T06:55:31.537
> 
> 标签：model-view-controller, backbone.js

我正在学习如何使用 Backbone 和 Parse 创建一个调查网站。我在 Stack Overflow 上看到过类似的问题。但是我的问题有点不同。在这个网站上，用户可以进行自己的调查。假设现在用户可以发布两种类型的问题：多项选择和自由回答。我创建了一个名为 Question 的主干模型，如下所示。

//问题模型

```
//----------------------
var Question = Parse.Object.extend(
"Question", {
//Default attributes for the todo
defaults: {
    content: "What's your name",
    type: "free_response",
    choices: []
},
initialize: function() {
      if (!this.get("content")) {
              this.set({"content": this.defaults.content});
     }
      if (!this.get("type")) {
              this.set({"type": this.defaults.type});
     }
      if (!this.get("choices")) {
              this.set({"choices": this.defaults.choices});
     }
}

}); 
```

所以我还想创建一个可以显示问题的 QuestionView。但它应该以不同的方式显示多种选择和自由响应。那么根据问题类型以不同方式显示问题的最佳方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:48:38.813

在您的 questionView 模板中添加一条`if`语句：

```
<script type="template/underscore" id="QuestionView">
<%- content %>
<% if (type === 'free_response') { %>
<textarea name="answer<%- id %>"></textarea>
<% } else { _(choices).each(function (choice) { %>
<input type="radio" name="answer<%- id %>" value="<%- choice %>"> <%- choice %>
<% });} %>
</script> 
```

有关如何使用下划线模板的更多信息，请参阅： [http ://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

# knockout.js - 为什么我的 ko 计算的 observable 没有更新

> ID：13539081
> 
> 赞同：2
> 
> 时间：2012-11-24T06:55:51.337
> 
> 标签：knockout.js, visible, observable

我正在尝试在 foreach 中使用可见的敲除绑定和索引来实现逐行编辑。这是通过为每一行创建一个显示和修改 div 并使用可见绑定在它们之间进行选择来完成的。问题是 observable 不会在修改和显示 div 之间进行跟踪。

我创建了这个小提琴[http://jsfiddle.net/rscidmore/YrsCj/57/](http://jsfiddle.net/rscidmore/YrsCj/57/)

要查看问题，请单击一行上的修改，编辑值并单击保存。你可以看到你现在对同一个 observable 有两个值。

```
Javascript:
var myViewModel = {
    vals: ko.observableArray([
        {label: 'first',  item: 'one'},
        {label: 'second', item: 'two'},
        {label: 'third',  item: 'three'}
    ]),
    idx: ko.observable(-1)
};

ko.applyBindings(myViewModel);

HTML:
<body class='ui-widget'>
<div class='container'>
   <!-- ko foreach: vals -->
     <div class='label' data-bind="visible: $root.idx() == $index()">
       <span class='lbl' data-bind="text: label"></span>:
       <input type='text' data-bind="value: item">
       <input type='button' value="save" data-bind="click: function()
         { $root.idx(-1);}" />
     </div>
     <div class='label' data-bind="visible: $root.idx() != $index()">
       <span class='lbl' data-bind="text: label"></span>:
       <span data-bind="text: item"></span>
       <input type='button' value="modify" data-bind="click: function()
         { $root.idx($index());}" />
     </div>
   <!-- /ko -->
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:29:40.407

唯一会跟踪项目的`ko.observableArray`添加和删除，并且不会跟踪其项目是否已更改。

形成[文件](http://knockoutjs.com/documentation/observableArrays.html)：

> 关键点：一个 observableArray 跟踪数组中有哪些对象，而不是那些对象的状态

因此，您需要在项目上具有[可观察的属性](http://knockoutjs.com/documentation/observables.html)才能跟踪它们的更改：

```
vals: ko.observableArray([
        {label: 'first',  item: ko.observable('one')}, 
        {label: 'second', item: ko.observable('two')}, 
        {label: 'third',  item: ko.observable('three')}
    ]), 
```

[演示小提琴。](http://jsfiddle.net/YSk8E/)

# json - Flask 中的 RESTful 接口和序列化问题

> ID：13539082
> 
> 赞同：5
> 
> 时间：2012-11-24T06:55:52.257
> 
> 标签：json, rest, serialization, flask, flask-sqlalchemy

我正在学习 Backbone.js 和 Flask（以及 Flask-sqlalchemy）。我之所以选择 Flask，是因为我读到它与实现 RESTful 接口的 Backbone 配合得很好。我目前正在[学习](http://net.tutsplus.com/tutorials/javascript-ajax/get-connected-to-the-backbone-new-course/)使用（或多或少）这种模型的课程：

```
class Tasks(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(80), unique=True)
    completed = db.Column(db.Boolean, unique=False, default=False)

    def __init__(self, title, completed):
        self.title = title
        self.completed = completed

    def json_dump(self):
        return dict(title=self.title, completed=self.completed)

    def __repr__(self):
        return '<Task %r>' % self.title 
```

我必须添加一个`json_dump`方法才能将 JSON 发送到浏览器。否则，我会收到类似的错误`object is not JSON serializable`，所以我的第一个问题是：

有没有更好的方法在 Flask 中进行序列化？似乎有些对象是可序列化的，而另一些则不是，但总的来说，它并不像我预期的那么容易。

一段时间后，我最终得到了以下视图来处理每种类型的请求：

```
@app.route('/tasks')
def tasks():
    tasks = Tasks.query.all()
    serialized = json.dumps([c.json_dump() for c in tasks])
    return serialized

@app.route('/tasks/<id>', methods=['GET'])
def get_task(id):
    tasks = Tasks.query.get(int(id))
    serialized = json.dumps(tasks.json_dump())
    return serialized

@app.route('/tasks/<id>', methods=['PUT'])
def put_task(id):
    task = Tasks.query.get(int(id))
    task.title = request.json['title']
    task.completed = request.json['completed']
    db.session.add(task)
    db.session.commit()
    serialized = json.dumps(task.json_dump())
    return serialized

@app.route('/tasks/<id>', methods=['DELETE'])
def delete_task(id):
    task = Tasks.query.get(int(id))
    db.session.delete(task)
    db.session.commit()
    serialized = json.dumps(task.json_dump())
    return serialized

@app.route('/tasks', methods=['POST'])
def post_task():
    task = Tasks(request.json['title'], request.json['completed'])
    db.session.add(task)
    db.session.commit()
    serialized = json.dumps(task.json_dump())
    return serialized 
```

在我看来，这似乎有点冗长。同样，实施它们的正确方法是什么？我在 Flask 中看到了一些提供 RESTful 接口的[扩展，但这些对我来说看起来相当复杂。](http://flask-restful.readthedocs.org/en/latest/quickstart.html#a-minimal-api)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T19:56:28.410

老实说，我会使用一个模块来做到这一点。我们已经为一些 API 使用了 Flask-Restless，你可以看看：

[https://flask-restless.readthedocs.org/en/latest/](https://flask-restless.readthedocs.org/en/latest/)

但是，如果您想构建自己的，您可以使用 SQLAlchemy 的自省将您的对象输出为键/值对。

[http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-reflection](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#metadata-reflection)

像这样的东西，虽然我总是要反复检查我的语法是否正确，所以把它作为指导而不是工作代码。

```
@app.route('/tasks')
def tasks():
    tasks = Tasks.query.all()

    output = []
    for task in tasks:
      row = {}

      for field in Tasks.__table__.c:
        row[str(field)] = getattr(task, field, None)

      output.append(row)

    return jsonify(data=output) 
```

我发现这个问题可能对你有更多帮助。我熟悉 SQLAlchemy 0.7，看起来 0.8 添加了一些更好的内省技术：

[SQLAlchemy 内省](https://stackoverflow.com/questions/11330013/sqlalchemy-introspection)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T19:49:45.900

Flask 提供`jsonify`了执行此操作的功能。[在这里](http://flask.pocoo.org/docs/api/#returning-json)查看它的工作。

您的 json_dump 方法是正确的，尽管代码可以简洁。请参阅此代码段

```
@app.route('/tasks')
def tasks():
    tasks = Tasks.query.all()
    return jsonify(data=[c.json_dump() for c in tasks]) 
```

# python - 无法通过 pyBottle 加载静态文件 CSS 和 JS？

> ID：13539084
> 
> 赞同：1
> 
> 时间：2012-11-24T06:56:15.047
> 
> 标签：python, bottle

尝试使用 Bottle 加载静态文件时总是得到 404。我已经提到了堆栈溢出问题和谷歌群聊，但没有什么能帮助我纠正我的问题。请帮助我..花了很多时间在这...

```
Tuts
   main.py
   static/
     bootstarp.css
   views/
     index.tpl 
```

**main.py 代码**

```
import bottle
from bottle import Bottle
from os.path import basename,abspath, dirname, join

app = bottle.default_app()

appPath = dirname(abspath(''))
print appPath

@bottle.route('/')
def index():
    return bottle.template('index', dict(title=appPath,get_url=app.get_url))

@bottle.route('/static/:filename#.*#', name='css')
def server_static(filename):
    return bottle.static_file(filename, root=join(appPath,'static'))

bottle.debug(True)
bottle.run(host='localhost', port=8082,reloader=True)

**Template:**

<link href="{{ get_url('css', filename='bootstrap.css') }}" rel="stylesheet" media="screen"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:58:37.320

添加

```
from bottle import static_file 
```

在顶部。然后只需使用`static_file(..., ...)`就可以了：

```
@bottle.route('/static/:filename#.*#', name='css')
def server_static(filename):
    return static_file(filename, root=join(appPath,'static')) 
```

# asp.net - IValidatableObject 的验证功能不起作用

> ID：13539087
> 
> 赞同：0
> 
> 时间：2012-11-24T06:57:12.460
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我有一个“评论”课程：

```
public class Review : IValidatableObject
{
    public int ReviewId { get; set; }

    [DisplayName("Digning Date")]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [DataType(DataType.Date)]
    public DateTime Created { get; set; }

    [Range(1, 10)]
    public int Rating { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    public string Body { get; set; }
    public int RestaurantId { get; set; }
    public virtual Restaurant Resturant { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var fields = new[]{ "Created"};

        if(Created > DateTime.Now)
        {
            yield return new ValidationResult("Created date cannot be in the future.", fields);
        }

        if (Created < DateTime.Now.AddYears(-1))
        {
            yield return new ValidationResult("Created date cannot be to far in the past.", fields);
        }
    }
} 
```

它使用 IValidatableObject 的 Validate 方法来验证 Create 属性。这也是我的cshtml代码：

```
@model OdeToFood.Models.Review

@{
ViewBag.Title = "Create";
}

<h2>Create</h2>

@section scripts
 {
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">      </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"    type="text/javascript"></script>
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Review</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Created)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Created)
        @Html.ValidationMessageFor(model => model.Created)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Rating)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Rating)
        @Html.ValidationMessageFor(model => model.Rating)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Body)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Body)
        @Html.ValidationMessageFor(model => model.Body)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div> 
```

Validate 方法只是检查创建日期的年份是在今年（2012 年）还是去年（2011 年）。因此，如果用户输入 2000 作为年份，他应该得到错误：“创建日期不能在未来。”。但我不工作！

这也是我在 web.config 中的配置：

```
<appSettings>
  <add key="webpages:Version" value="1.0.0.0" />
  <add key="ClientValidationEnabled" value="true" />
  <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

这也是我的控制器代码：

```
 public ActionResult Create()
    {
        return View(new Review());
    } 

    //
    // POST: /Reviews/Create

    [HttpPost]
    public ActionResult Create(int restaurantId, Review newReview)
    {
        try
        {
            //_db is my DBContext
            var restaurant = _db.Restaurants.Single(r => r.RestaurantId == restaurantId);
            newReview.Created = DateTime.Now;

            restaurant.Reviews.Add(newReview);
            _db.SaveChanges();

            return RedirectToAction("Index");
        }
        catch(System.Data.Entity.Validation.DbEntityValidationException ex)
        {
            return View();
        }
    } 
```

我必须做什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:31:58.517

它被调用了两次，因为一次是在您发布并且模型绑定器绑定到 newReview 时，一次是在您调用 SaveChanges 时。

你应该做的是当你发布时检查 ModelState.IsValid=false，如果是，则返回 View(newReview);

此外，您的 DbEntityValidationException 应该返回 View(newReview);

最后看看我在这里写的动作过滤器——你不需要尝试捕捉——只需使用控制器方法上的属性或在应用程序启动时注册它，就像使用 HandleError 一样

[MapEntityExceptionsToModelErrorsAttribute](https://github.com/adamtuliper/EF5-for-Real-Web-Applications/blob/master/Gecko.Framework.Mvc/ActionFilters/MapEntityExceptionsToModelErrorsAttribute.cs)

# iphone - 无法在 mac lion os 中运行 .app 但没有源代码

> ID：13539089
> 
> 赞同：-3
> 
> 时间：2012-11-24T06:57:54.487
> 
> 标签：iphone, ios

> **可能重复：**
> [无法运行 ipad 应用程序](https://stackoverflow.com/questions/13535283/unable-to-run-an-ipad-application)

我有一个为 ipad 构建的 .app 文件。我可以在 mac lion os 中运行它吗？我试图在 mac 上运行它，但我收到一个带有以下错误的消息框。

**“您无法打开应用程序 appname.app，因为这种类型的 mac 不支持它”**

请指导我如何在 mac lion os、xcode 和 mac os 的模拟器中运行 .app 文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:03:35.063

不，你不能运行它。iOS 和 OSX 应用程序是完全不同类型的应用程序，为一个应用程序指定的应用程序不能在另一个上运行。它们是不同的架构，需要重写应用程序才能在另一个上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:03:49.057

伙计，那是一个 iPad 应用程序。你需要在 iPad 上运行它。

# mysql - 将两个表合并为一个输出 SQL

> ID：13539091
> 
> 赞同：1
> 
> 时间：2012-11-24T06:58:11.730
> 
> 标签：mysql, sql

我有两张表，销售和费用

例如

销售量：

```
sales_date       Amount
2012-11-01      12000.55
2012-11-03       2650.00
2012-11-03       2650.00
2012-11-03       2650.00
2012-11-07      12900.00
2012-11-07       2900.00 
```

花费：

```
Expense Date     Amount
2012-11-03         40.00
2012-11-10        100.00
2012-11-10       1000.00
2012-11-11         10.00
2012-11-17        100.00 
```

我需要 SQL 查询输出为

```
Date              Sales        Expense
2012-11-01      12000.55
2012-11-03       7950.00          40.00
2012-11-07      15800.00
2012-11-10                      1100.00
2012-11-11                        10.00
2012-11-17                       100.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:19:59.293

带有 a 的嵌套查询`UNION ALL`将为您提供所需的内容；首先分别获取所有销售行和所有费用行，然后将`GROUP`它们分成每个日期的公共行；

```
SELECT date, FLOOR(SUM(s)) AS sales, FLOOR(SUM(e)) AS expense
FROM
(
  SELECT sales_date  AS date, amount AS s, 0 AS e FROM sales
  UNION ALL     
  SELECT expensedate AS date, 0 AS s, amount AS e FROM expense
) AS individual_rows
GROUP BY date
ORDER BY date; 
```

如果`FLOOR`您不想四舍五入，可以省略 's （您的结果似乎表明您愿意）

[SQLfiddle 演示](http://sqlfiddle.com/#!2/fcbdb/14)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:03:26.113

您需要的是 FULL OUTER JOIN：

```
SELECT COALESCE(E.Date, S.Date) AS Date,
       SUM(S.Amount) AS Sales,
       SUM(E.Amount) AS Expenses
  FROM Expenses AS E
  FULL OUTER JOIN Sales AS S
    ON E.Date = S.Date
 GROUP BY COALESCE(E.Date, S.Date); 
```

那是标准 SQL；我们现在必须找出 MySQL 是否支持它。不幸的是，正如评论者所指出的，[MySQL](http://dev.mysql.com/doc/refman/5.6/en/join.html)不支持 FULL OUTER JOIN。

在这种情况下，您必须使用 LEFT OUTER JOIN 和 RIGHT OUTER JOIN 的 UNION 来模拟 FULL OUTER JOIN：

```
SELECT E.Date AS Date, SUM(S.Amount) AS Sales, SUM(E.Amount) AS Expenses
  FROM Expenses AS E
  LEFT OUTER JOIN Sales AS S
    ON E.Date = S.Date
 GROUP BY E.Date
UNION
SELECT S.Date AS Date, SUM(S.Amount) AS Sales, SUM(E.Amount) AS Expenses
  FROM Expenses AS E
 RIGHT OUTER JOIN Sales AS S
    ON E.Date = S.Date
 GROUP BY S.Date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:04:47.897

您需要一个完整的外部连接。如果 mysql 不支持它，请[在此处](http://www.xaprb.com/blog/2006/05/26/how-to-write-full-outer-join-in-mysql/)查找可能的解决方法

# c# - 带有 Select 或 Where 的 C# 谓词不起作用

> ID：13539095
> 
> 赞同：2
> 
> 时间：2012-11-24T06:59:34.143
> 
> 标签：c#, for-loop, where-clause, predicate

C# 中的谓词有一些问题。我有两组代码（我认为这两组代码都应该完成相同的结果），但其中一组永远不会起作用。我问的原因是我需要这个谓词与不同的元素一起出现几次，所以我想尽可能地减少它（非工作的一个非常简单，而另一个包含很多行）。

# 1 不工作：

```
ItemViewModel item = (App.ViewModel.All_Items.Where(x => (x as ItemViewModel).Name == my_list_of_strings.ElementAt(2)) as ItemViewModel); 
```

也使用“选择”而不是 Where 不起作用。

# 2 工作：

```
foreach (ItemViewModel it in App.ViewModel.All_Items)
{
  if (item.Name == my_list_of_strings.ElementAt(2))
  {
    MessageBox.Show("Success!!");
    item = it;
    continue; // Leave loop
  }
} 
```

我可能忽略了一些愚蠢的事情，但如果有人知道解决方案，那就太好了！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:04:46.520

`IEnumerable<T>.Where(Func<T, bool>)`返回一个集合，但是看起来您想要的是单个元素。有几个选项：

```
IEnumerable<T>.FirstOrDefault(Func<T, bool>) // returns null if no element found
IEnumerable<T>.First(Func<T, bool>) // throws if no element is found

// These throw an error if more than one element exists that matches the query
IEnumerable<T>.SingleOrDefault(Func<T, bool>) // returns null if no element found
IEnumerable<T>.Single(Func<T, bool>) // throws if no element is found 
```

在您的示例中，它将是：

```
// Just replace "Where" with "FirstOrDefault"
ItemViewModel item = (App.ViewModel.All_Items.FirstOrDefault(x => (x as ItemViewModel).Name == my_list_of_strings.ElementAt(2)) as ItemViewModel); 
```

# ember.js - 在ember.js中，mixin和extend有什么区别？

> ID：13539102
> 
> 赞同：25
> 
> 时间：2012-11-24T07:01:15.803
> 
> 标签：ember.js

mixin和extend有什么区别，什么时候使用？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-24T13:55:45.577

我写[了这篇关于 Ember.Object](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)的文章，详细解释了这些差异。本质上，用于`extend`从基类创建一个新类，并使用 mixins 来分离您可能希望包含在任意数量的类/对象中的横向关注点。Mixins 可以通过 包含在类`extend`或对象中`create`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T12:55:39.447

mixin 是一种特殊的多重继承。使用mixin主要有两种情况：

1.  你想为一个类提供很多可选特性。
2.  你想在很多不同的类中使用一个特定的特性。

# android - 如何通过降序使图像按钮不可见？

> ID：13539106
> 
> 赞同：1
> 
> 时间：2012-11-24T07:02:06.590
> 
> 标签：android

我有 5 个图像按钮，我想按降序使它们可见和不可见。就像 5,4,3,2,1 这样就完成了。但是当我来到 ImageButton1 时，我无法再次使其不可见。因为该按钮上同时运行了两个条件。一个使 2,3,4,5 按钮不可见，另一个使 Imagebutton1 不可见。那我该怎么办？

```
 imgmilku1.setOnClickListener(new OnClickListener() {

      public void onClick(View v) {
            // TODO Auto-generated method stub
            imgmilks1.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.INVISIBLE);
            imgmilks3.setVisibility(View.INVISIBLE);
            imgmilks4.setVisibility(View.INVISIBLE);
            imgmilks5.setVisibility(View.INVISIBLE);
            imgmilks3.setVisibility(View.INVISIBLE);
            imgmilku1.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.VISIBLE);
            imgmilku3.setVisibility(View.VISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilku5.setVisibility(View.VISIBLE);

            firstglass = 1 * 300;

        }
    });
    imgmilks1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // imgmilks1.setVisibility(View.VISIBLE);
            // imgmilku1.setVisibility(View.INVISIBLE);
            imgmilks4.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilks5.setVisibility(View.INVISIBLE);
            imgmilku5.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.VISIBLE);

            firstglass = 1 * 300;
        }
    });

imgmilku2.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            imgmilks1.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilku1.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.VISIBLE);

            secondglass = 2 * 300;

        }
    });
    imgmilks2.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            imgmilks4.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilks5.setVisibility(View.INVISIBLE);
            imgmilku5.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.VISIBLE);
            secondglass = 2 * 300;

        }
    }); 
```

imgmilku3.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            imgmilks1.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.VISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilku1.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.INVISIBLE);

            thirdglass = 3 * 300;

        }
    });
    imgmilks3.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            imgmilks4.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.VISIBLE);
            imgmilks5.setVisibility(View.INVISIBLE);
            imgmilku5.setVisibility(View.VISIBLE);
            fourtglass = 0;
            thirdglass = 3 * 300;

        }
    }); 
```

imgmilku4.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            imgmilks1.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.VISIBLE);
            imgmilks4.setVisibility(View.VISIBLE);
            imgmilku1.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.INVISIBLE);
            fourtglass = 4 * 300;

        }
    });
    imgmilks4.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            imgmilks5.setVisibility(View.INVISIBLE);
            imgmilku5.setVisibility(View.VISIBLE);
            fifthglass = 0;
            fourtglass = 4 * 300;

        }
    });

    imgmilku5.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            imgmilks5.setVisibility(View.VISIBLE);
            imgmilks4.setVisibility(View.VISIBLE);
            imgmilks3.setVisibility(View.VISIBLE);
            imgmilks2.setVisibility(View.VISIBLE);
            imgmilks1.setVisibility(View.VISIBLE);

            imgmilku5.setVisibility(View.INVISIBLE);
            imgmilku4.setVisibility(View.INVISIBLE);
            imgmilku3.setVisibility(View.INVISIBLE);
            imgmilku2.setVisibility(View.INVISIBLE);
            imgmilku1.setVisibility(View.INVISIBLE);
            firstglass = 0;
            secondglass = 0;
            thirdglass = 0;
            fourtglass = 0;

            fifthglass = 5 * 300;

        }
    }); 
```

# php - Symfony2 FOSUserBundle 与 Facebook 帐户配对

> ID：13539107
> 
> 赞同：2
> 
> 时间：2012-11-24T07:02:24.483
> 
> 标签：php, facebook, symfony

我一直试图弄清楚这一点。我已经让 FOSUserBundle 和 FOSFacebookBundle 一起工作，但我没有意识到我正在从事的项目需要 Facebook 没有登录按钮，用户必须注册一个帐户，然后他们才能与 Facebook 连接以获取个人资料信息、朋友等

现在我只是好奇我是否还应该为此使用 FOSFacebookBundle？如果是这样，我将如何去做？我一直在尝试修改 FacebookProvider 以通过传入当前登录的用户来更新帐户，但由于下面的代码失败，它似乎没有工作。

```
$user = $this->container->get('security.context')->getToken()->getUser(); 
```

它因 getUser() 不存在而失败。从 getToken() 转储数据时，它只是空值。

正确方向的一点将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:11:07.880

您应该通过将用户提供商设为 Facebook 来恢复您的更改，使用 BaseUser 作为示例创建您自己的普通用户提供商和用户实体，然后在经过身份验证时使用 FOSFacebookBundle 来更新您的帐户信息。

# javascript - 为不同的浏览器包含不同的类

> ID：13539110
> 
> 赞同：0
> 
> 时间：2012-11-24T07:02:58.947
> 
> 标签：javascript, html, css

> **可能重复：**
> [跨浏览器 CSS](https://stackoverflow.com/questions/1455913/cross-browser-css)

是否可以为不同的浏览器包含不同的 css 类以实现跨浏览器兼容性？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:05:28.760

可能的。

多亏了 Microsoft 和 Internet Explorer，每个前端开发人员面临的更大问题肯定是跨浏览器兼容性。即使 Internet Explorer 引入了条件标签以仅包含 IE 的样式，也可以处理其他浏览器。

此代码适用于 JQuery 框架，因此当然要确保已将其安装在您的网站上。

将以下代码粘贴到 html 文档的头部或单独的 .js 文件中：

```
$(document).ready(function(){ 
    $('html').addClass($.browser); 
}); 
```

现在，您可以根据目标浏览器使用 .msie、.mozilla、.opera、.safari 或 .other 预置您的样式。

[参考](http://www.catswhocode.com/blog/8-javascript-solutions-to-common-css-problems)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:19:48.090

**我不推荐这个。**

您可以根据 User-Agent 字符串提供不同的 CSS 文件。如果你真的很绝望，你可能只应该这样做（比如你只支持较新的浏览器，但你想向旧浏览器显示一些东西以提示它们切换）。

这实际上取决于您的网络服务器，但这通常很容易。

通常最好将其解决并找到一个跨浏览器的解决方案。这通常发生在您使用实验性功能或试图变得聪明时。简化 CSS 通常会产生更好的跨浏览器支持，尽管有时旧浏览器无法正确呈现某些内容。

如果您需要支持较旧的浏览器，请简化您的设计，而不是尝试走浏览器嗅探路线。

# python - 将代码转换为 exe 或 GUI 应用程序

> ID：13539112
> 
> 赞同：3
> 
> 时间：2012-11-24T07:03:05.197
> 
> 标签：python, user-interface

我是编程初学者，我已经开始学习 Python。我正在尝试创建一个搜索和替换应用程序，它允许我们选择多个文件，然后替换我们想要的单词或短语。

我已经编写了那个脚本，但我想做一些可以在 Windows XP 中运行的东西。实际上我希望它是一个在 Windows 中工作的 GUI 应用程序。那我该怎么办？这是我编写的代码：

```
#replace.py
import string
def main():
    filez = raw_input("which files do you want processed?")
    f=open(filez,"r")
    data=f.read()
    w1=raw_input("what do you want to replace?")
    w2= raw_input("what do you want to replace with?")
    print data
    data=data.replace(w1,w2)
    print data
    f=open(filez,"w")
    f.write(data)
    f.close()
main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T07:35:22.333

Python 有很多 gui 选项，在我看来这些是最多产的。

*   [特金特](http://wiki.python.org/moin/TkInter)
*   [wxPython](http://www.wxpython.org/)
*   [pygtk](http://www.pygtk.org/)
*   [pyqt](http://www.riverbankcomputing.com/software/pyqt/intro)

既然您说您是初学者，我建议您使用 Tkinter，因为它内置于 python 中。[这](http://www.pythonware.com/library/tkinter/introduction/)是一个帮助您入门的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:26:29.460

我最近参与了一个 GUI 项目并开始使用[wxPython](http://www.wxpython.org/)，并且肯定会向初学者推荐它。
您可以使用[wxGlade](http://wxglade.sourceforge.net/)开发 GUI ，它将对学习 wxPython 本身有很大帮助。（花点时间确保您理解 Sizer 的概念，因为它们是 GUI 开发的一个基本且强大的概念）
然后您可以使用[PyInstaller](http://www.pyinstaller.org/)将您的 python 脚本转换为可以在 Windows 上运行的可执行文件。
关于您的脚本，涉及的行`raw_input(something)`应替换为文本框或提示。要显示文本，您也可以使用文本框。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T07:35:37.963

您可以使用例如[py2exe](http://www.py2exe.org/)创建 Windows 可执行文件。如果你真的需要 GUI，我推荐[wxpython 项目](http://www.wxpython.org/)。

另外，我建议为此任务使用一些专门的实用程序，例如[fart-it](http://fart-it.sourceforge.net/)。这是一个命令行实用程序，因此您可以简单地在 python 上编写 GUI 包装器并运行它。该实用程序已经过测试并且比您的脚本更复杂，因此它可以运行得更快且使用起来更安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:47:49.313

你想制作一个 Python GUI 应用程序，它可以在 windows xp 中运行而无需在机器上安装 python，对吧？如果是，那么要创建 GUI 应用程序，请使用 pyQT 工具包，这很容易，并使用 pyinstaller 制作脚本的 .exe 文件。两者都易于使用且易于学习。

# c++ - 为 Symbian 编译 Qt Creator 项目时出现错误：“未定义对 `__cxa_get_exception_ptr' 的引用”

> ID：13539117
> 
> 赞同：2
> 
> 时间：2012-11-24T07:03:42.310
> 
> 标签：c++, qt-creator, symbian, linker-errors

当我为 Windows 编译项目时，它构建并运行良好，但是当我尝试为 Symbian S60 编译它时，我收到此错误：

```
undefined reference to `__cxa_get_exception_ptr' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:08:16.510

[在这里](http://qt.gitorious.org/+qt-s60-developers/qt/qt-s60/commit/23b0026a0c9cf5f195bcf3b14fcc408ccd91f762)找到答案：

> 通过引用而不是按值捕获
> 
> 按值捕获会导致 GCC 使用编译器支持函数 __cxa_get_exception_ptr。这在 Symbian^3 之前的 Symbian OS 上的编译器支持库中不可用。通过引用捕获可以避免这个问题。

所以更换

```
catch (QString error) 
```

和

```
catch (QString &error) 
```

修复它。

# ios - 视图底部的 UITextView

> ID：13539120
> 
> 赞同：1
> 
> 时间：2012-11-24T07:03:50.533
> 
> 标签：ios, xamarin.ios, monotouch.dialog

作为一个新的 MonoToucher，我有一个问题困扰了我一段时间：在某些情况下，在我的应用程序中，我需要`UITextView`在屏幕底部的右侧显示一个带有按钮的按钮。

基本上，我想管理某种讨论提要，当用户导航到特定讨论时，他会以列表的形式获取相关帖子，并在列表底部使用“发布”按钮输入多行文本向右。触摸`textView`应该会显示键盘进行输入，并且`textView`应该与输入的数据相关。这与我们想在 iPhone 中编写新文本消息或在 Facebook 中发帖时的行为相同。

另一个要求是，当用户滚动帖子列表时，该输入（使用按钮）不应移动。

我尝试创建 a `UIToolBar`with`UITextView`和 a `UIButton`，但无法使其按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:07:19.317

查看 BubbleCell 示例，它完全符合您在 C# 中的要求：

[https://github.com/xamarin/monotouch-samples/tree/master/BubbleCell](https://github.com/xamarin/monotouch-samples/tree/master/BubbleCell)

# mysql - SQL Join 并在 join false 时显示结果

> ID：13539127
> 
> 赞同：5
> 
> 时间：2012-11-24T07:05:22.917
> 
> 标签：mysql, sql

我有一张桌子 - 评论。如果不是站点成员，用户可以发布，但如果是，则希望显示他们的详细信息。

因此，如果用户评论不是会员，我会显示他们的帖子但不链接到他们的个人资料，因为他们没有。

因此，在以下查询中，即使没有连接，我也想返回行：

```
select wc.comment, wc.comment_by_name, wc.user_id, u.url from comments wc
join users u on wc.wag_uid = u.user_id
where id = '1237' group by wc.comment order by wc.dateadded desc 
```

我想返回：

```
comment    comment_by_name    user_id    url
-------    ---------------    -------    ----
hello      dan                12         /dan
hey        jane                          /jane
world      jack               10         /jack 
```

但是上面没有返回 jane 的数据，因为她没有 user_id

即使连接为空，有没有办法返回所有数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T07:07:10.800

`LEFT JOIN`改为使用

```
SELECT  wc.comment, wc.comment_by_name, wc.user_id, u.url 
FROM    comments wc
        LEFT JOIN users u 
           on wc.wag_uid = u.user_id
WHERE id = '1237' 
GROUP BY wc.comment 
ORDER BY wc.dateadded DESC 
```

基本上`INNER JOIN`只选择一个表中的记录在另一个表上至少有一个匹配的记录，同时从*左侧*`LEFT JOIN`表中选择所有行（*在你的情况下，它是*）它是否在另一个表上没有匹配。**`comments`**

# php - 使用PHP检查逗号分隔字符串中是否存在值

> ID：13539131
> 
> 赞同：12
> 
> 时间：2012-11-24T07:06:02.853
> 
> 标签：php

我需要检查我的 id 是否存在于逗号分隔的字符串中。

我的字符串保存`"1,2,3,4,10"`在数据库中。

我努力了

```
$HiddenProducts = array($sqlvalue);

if (in_array(2, $HiddenProducts)) {
  echo "Available";
} else {
  echo "Not available";
} 
```

它不工作。请问有什么解决办法...

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-24T07:08:07.337

用于[`explode()`](http://php.net/manual/en/function.explode.php)从字符串创建字符串部分的数组，方法是用特定的分隔符（在本例中为逗号）分割它。

```
$HiddenProducts = explode(',',$sqlvalue);
if (in_array(2, $HiddenProducts)) {
  echo "Available";
} else {
  echo "Not available";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T07:08:27.540

`in_array()`实际上是您想要的，但是您错误地创建了数组。

假设`$sqlvalue = '1,2,3,4,10'`...

```
$hiddenProducts = explode(',', $sqlvalue); 
```

然后你可以使用`in_array()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T12:30:02.423

让我提供一种不同的方法，而不是仅仅治愈症状。

您可能*不*应该像那样将您的信息存储在表中。如果某些产品是否隐藏，应该可以让数据库弄清楚。为此，您需要正确规范化您的数据。

显然，您在某处有一张产品表，有些应该隐藏起来。如果这是一个属性`true`或`false`属于每个产品，您可以将其作为新列添加到您的产品表中。

```
SELECT id FROM products WHERE id = 2 AND hidden = 1 
```

如果`hidden`不是产品的固有属性，您还可以创建一个简单的产品 ID 列表的帮助表。

一个条目只是说该产品是隐藏的。如果表中没有 ID，则*不会*隐藏它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T08:25:20.803

首先使用explode函数将逗号分隔的字符串转换为数组

```
$HiddenProducts = explode(',',$sqlvalue); 
```

然后使用 in_array 函数检查

```
 if (in_array(2, $HiddenProducts))
   echo "Available";
else
   echo "Not available"; 
```

# java - 为什么每个应用程序有一个 JVM？

> ID：13539132
> 
> 赞同：11
> 
> 时间：2012-11-24T07:06:07.463
> 
> 标签：java, jvm

我读到每个应用程序都在自己的 JVM 中运行。为什么会这样？他们为什么不让一个 JVM 运行 2 个或更多应用程序？

我读了一个 SO 帖子，但无法在那里得到答案。 [每个 Java 应用程序是否有一个 JVM？](https://stackoverflow.com/questions/5947207/one-jvm-per-java-application)

我说的是通过公共静态 void main(String[]) 方法启动的应用程序...）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-24T07:18:39.557

（我假设您正在谈论通过`public static void main(String[])`方法启动的应用程序......）

理论上，您可以在 JVM 中运行多个应用程序。在实践中，它们可以通过各种方式相互干扰。例如：

*   JVM 具有一组`System.in/out/err`、一种默认编码、一种默认语言环境、一组系统属性等。如果一个应用程序更改了这些，它会影响所有应用程序。
*   任何调用的应用程序`System.exit()`都会有效地杀死所有应用程序。
*   如果一个应用程序失控，并消耗过多的 CPU 或内存，它也会影响其他应用程序。

简而言之，有很多问题。人们一直在努力完成这项工作，但他们从未真正成功过。一个例子是[Echidna](http://sourceforge.net/projects/echidna/)图书馆，尽管该项目已经沉寂了大约 10 年。 [JNode](http://jnode.org)是另一个例子，尽管他们（实际上是我们）通过入侵核心 Java 类（如`java.lang.System`）“欺骗”，以便每个应用程序获得看似独立版本的`System.in/out/err`、系统属性等¹。

^(1 - 这（“proclets”）应该是临时黑客，等待使用真正的“隔离”的适当解决方案。但是隔离支持停滞不前，主要是因为 JNode 架构使用单个地址空间，没有明显的方法来分离“系统”和“用户”的东西。因此，虽然我们可以创建与隔离 API 相匹配的 API，但关键的隔离功能（如彻底杀死隔离）实际上是不可能实现的。或者至少，那是/是我的观点。)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T07:32:22.937

有一个 JVM 预应用程序的原因，基本上每个应用程序都有操作系统进程。以下是为什么每个应用程序都有一个流程的几个原因。

*   应用程序错误不会降低/损坏共享同一进程的其他应用程序中的数据。
*   系统资源按进程计算，因此按应用程序计算。
*   终止进程会自动释放所有关联的资源（应用程序可能不会自己清理，因此共享进程可能会产生资源泄漏）。

好吧，Chrome 等一些应用程序甚至会进一步创建多个进程来隔离不同的选项卡和插件。

说到 Java，没有更多理由不共享 JVM。

*   堆空间大的堆空间维护代价更高。多个较小的独立堆更易于管理。
*   在 JVM 中卸载“应用程序”是相当困难的（即使它没有运行，也有许多微妙的原因让它留在内存中）。
*   JVM 有很多调整选项，您可能希望针对应用程序进行调整。

尽管有几种情况，JVM实际上是在应用程序之间共享的：

*   应用服务器和 servlet 容器（例如 Tomcat）。服务器端 Java 规范在设计时考虑了共享服务器 JVM 和动态加载/卸载应用程序。
*   很少有人尝试为 CLI 应用程序创建共享 JVM 实用程序（例如[nailgun](http://www.martiansoftware.com/nailgun/)）

但实际上，即使在服务器端 java 中，由于上述原因，通常最好为每个应用程序使用 JVM（或多个）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T07:18:22.210

用于隔离执行上下文。

如果其中一个进程挂起或失败，或者它的安全性受到损害，其他进程不会受到影响。

我认为拥有单独的运行时也有助于 GC，因为它处理的引用比完全的要少。

此外，为什么要在一个 JVM 中运行它们？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:20:13.863

Java 应用服务器，如 JBoss，旨在在一个 JVM 中运行许多应用程序

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T07:36:20.340

这取决于您的应用程序。

Waratek 提供[在单个 JVM 中托管多个 Java 应用程序](http://www.waratek.com/resources/whitepapers/java-problems-in-the-cloud)只需检查一下。

# java - 使用 SWT/Jface 填充组合框选择表

> ID：13539133
> 
> 赞同：0
> 
> 时间：2012-11-24T07:06:14.787
> 
> 标签：java, data-binding, swt, jface, tableviewer

有没有办法使用 SWT/Jface 数据绑定在组合框值选择上填充表查看器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:42:31.347

您不会在此解决方案中使用 JFace 数据绑定，但我希望您能找到您想要的：

`ComboViewer`与您一起使用 a`TableViewer`并执行以下操作：

```
comboViewer.addSelectionChangedListener(new ISelectionChangedListener() {

    @Override
    public void selectionChanged(SelectionChangedEvent event) {
         tableViewer.setInput(event.getSelection());
         tableViewer.refresh();
    }
}); 
```

# android - 如何在特定的屏幕尺寸和特定的操作系统上运行 Android 应用程序..？

> ID：13539134
> 
> 赞同：1
> 
> 时间：2012-11-24T07:06:39.670
> 
> 标签：android, screen-size, android-screen, android-screen-support

就像我正在制作一个必须针对特定屏幕尺寸和特定操作系统的应用程序，我希望如果设备没有特定的屏幕尺寸和操作系统，那么这个应用程序甚至不应该启动......？

怎么做...？

任何帮助将是非常可观的..

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:11:56.207

根据屏幕尺寸和操作系统版本从市场中过滤您的应用程序的方法是

```
<supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="false" />

<uses-sdk android:minSdkVersion="4" /> 
```

当我将小屏设为假，并在市场上发布时，该应用程序甚至不会在小屏设备市场中显示。

# objective-c - 更改 UITableView 单元格上的标签？

> ID：13539135
> 
> 赞同：0
> 
> 时间：2012-11-24T07:07:06.840
> 
> 标签：objective-c, ios, uitableview

我在`UITableView`像这张图片的单元格上添加了 3 个标签和一个按钮![截屏](../Images/2321a0c08512f61e99376dc2cc1939e2.png)

当我单击复选框时，我会在其他一些内容中更改标签“0 天后到期”。这段代码没问题

```
[statusText setTextColor:[UIColor colorWithRed:0.0/255.0 green:51.0/255.0 blue:102.0/255.0 alpha:1.0]];
[statusText  setFont:[UIFont boldSystemFontOfSize:16.0]];
statusText.tag = 100;
[statusText setBackgroundColor:[UIColor clearColor]];
[checkBoxBtn setBackgroundImage:[UIImage imageNamed:@"check_normal.png"] forState:UIControlStateNormal];
[checkBoxBtn addTarget:self action:@selector(showAlert:) forControlEvents:UIControlEventTouchUpInside];
checkBoxBtn.tag = indexPath.row;
[cell.contentView addSubview:checkBoxBtn]; 
```

这是我的 checkBoxAction 和 showAlert 方法

```
-(void) checkBoxAction: (UIButton *)sender 
{

    NSInteger i =sender.tag + 1;
    float perc = (i*100/18.0);
    //NSLog(@"%.2f",perc);
    NSString* percentageStr = [[NSString alloc] initWithFormat:@"%3.2f%%(%d out of 18)",perc, i];
    barTitle.text = percentageStr;
    barFGImage.hidden = NO;
    if (perc == 100.00) {
             [barFGImage setFrame:CGRectMake(barFGImage.frame.origin.x, barFGImage.frame.origin.y, 276.0, barFGImage.frame.size.height)];
        }
        else
            [barFGImage setFrame:CGRectMake(barFGImage.frame.origin.x, barFGImage.frame.origin.y, 280*perc/100, barFGImage.frame.size.height)];

        [sender setBackgroundImage:[UIImage imageNamed:@"check_select.png"] forState:UIControlStateNormal];

    sender.userInteractionEnabled = NO;

    NSString *currentDate = [formatter stringFromDate:[NSDate date]];
    NSString* statusStr = [[NSString alloc] initWithFormat:@"Completed on %@",currentDate];
    UILabel *tempLabel = (UILabel *)[[button superview] viewWithTag:100];
    tempLabel.textColor = [UIColor colorWithRed:243.0/255.0 green:134.0/255.0 blue:48.0/255.0 alpha:1.0];
    tempLabel.text = statusStr;

}

- (void) showAlert:(id)sender
{
    button = (UIButton *)sender;
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"" message:@"Do you really want to complete this training?" delegate:self cancelButtonTitle:@"Yes, I've completed it" otherButtonTitles: @"No", nil];
    [alert show];
} 
```

现在我希望，如果我在第 3 行（例如）按复选框，那么第 3、第 4 行等的“0 天到期”标签应更改。任何建议或示例代码将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:16:45.567

恐怕我的建议不会是一个简单的建议或代码示例，而是我会邀请您花一些时间阅读 MVC（模型视图控制器）。

从我从您的代码中可以看出，您的数据似乎“存储”在您的视图对象中。一般来说，这是一个非常糟糕的主意，这对于表格视图来说是一个糟糕的主意，因为单元格正在被重用，并且当您滚动浏览大表格时，您的数据就会消失。

您需要做的是定义模型类来保存您的数据，然后控制器对象将访问这些模型对象并在它们控制的各种视图中显示它们的数据。

一旦你实现了这种模式，检查一个单元格中的内容将更新你的模型对象。然后你需要做的就是打一个简单的`[tableView reloadData];`电话来一次更新你所有的细胞。

# php - 我创建了一个查询以从症状表中选择症状，但出现语义错误

> ID：13539137
> 
> 赞同：-1
> 
> 时间：2012-11-24T07:07:47.937
> 
> 标签：php, symfony, doctrine

这是我的查询：

```
$symptoms = $em->createQuery("SELECT p FROM QuestionnaireSigninBundle:TblSymptoms p where p.IsDeleted=0 ")->getArrayResult(); 
```

这是错误消息

```
[Semantical Error] line 0, col 62 near 'IsDeleted=0 ': Error: Class  
Questionnaire\SigninBundle\Entity\TblSymptoms has no field or association 
named IsDeleted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:15:21.127

消息说您的实体`TblSymptoms`没有字段`IsDeleted`。

可能是一种类型。在骆驼情况下，该字段应命名为`isDeleted`.

顺便说一句，在查询中直接设置值是一种不好的做法。

```
$query = $em->createQuery('SELECT p FROM QuestionnaireSigninBundle:TblSymptoms p where p.isDeleted = ?1');
$query->setParameter(0); 
```

# android - 将页面转换为印度文字

> ID：13539138
> 
> 赞同：4
> 
> 时间：2012-11-24T07:07:51.740
> 
> 标签：android, localization, custom-font, indic

我刚刚在我的应用程序中创建了一个文本页面，现在我想将此页面的语言动态更改为印度语言，如泰卢固语、泰米尔语、孟加拉语、古吉拉特语和旁遮普语。

我研究了很多，发现只有两种方法可以实现这一点（如果我错了，请纠正我）：-

1）使用字符串本地化[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)。但问题在于，如果 android 手机支持这些语言，那么它可以工作，否则它会显示框代替字体。

2）使用自定义字体更改语言，如

```
 TextView tv=(TextView)findViewById(R.id.custom);
 Typeface face=Typeface.createFromAsset(getAssets(),"fonts/Verdana.ttf");
 tv.setTypeface(face); 
```

但这里的问题是渲染。字体未正确呈现。

请建议我，我应该选择哪个选项以及如何克服它的限制。

我还想提一下，我想在 Android 2.3 及更高版本上支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:30:11.247

在 Android 3 之前，您需要使用适当的字体和本地化来显示来自特殊脚本的字符。

对于 Android 3+，大多数时候使用本地化就足够了。阿拉伯语、希伯来语、印度语脚本和其他一些例外情况除外，在这些脚本中，除了本地化之外，您可能还需要适当的字体才能在您的 Android 应用程序中正确显示这些特殊字符。

AFAIK，**Verdana**仅支持**欧洲文字**，例如**Latin-1**、**Latin Extended-A**、**Latin Extended-B**、**Latin Extended Additional**、**Basic Greek**和**Cyrillic**。而泰卢固语、泰米尔语、孟加拉语、古吉拉特语是**南亚文字**的一部分- 不确定旁遮普语（有关 Unicode 脚本的更多信息，请参阅[Unicode Consortium](http://www.unicode.org/charts/)。）我想你需要找到一种开源字体（所以你没有使用专有字体时支付忠诚度）支持您要在应用程序中实现的脚本。

# python - Python - Map / Reduce - 如何在使用 DISCO 计数单词示例中读取 JSON 特定字段

> ID：13539141
> 
> 赞同：3
> 
> 时间：2012-11-24T07:08:13.940
> 
> 标签：python, json, unicode, mapreduce, disco

我正在使用 DISCO 示例来计算文件中的单词：

[将单词计数为 map/reduce 作业](http://discoproject.org/doc/disco/start/tutorial.html)

我没有问题让它工作，但是我想尝试从包含 JSON 字符串的文本文件中读取特定字段。

该文件的行如下：

```
{"favorited": false, "in_reply_to_user_id": 306846931, "contributors": null, "truncated": false, "text": "@CataDuarte8 No! av\u00edseme cuando vaya ah salir para yo salir igual!", "created_at": "Wed Apr 04 20:25:37 +0000 2012", "retweeted": false, "in_reply_to_status_id": 187636960632901632, "coordinates": null, "id": 187637067415683073, "entities": {"user_mentions": [{"indices": [0, 12], "id_str": "306846931", "id": 306846931, "name": "Catalina Ria\u00f1o!\u2661", "screen_name": "CataDuarte8"}], "hashtags": [], "urls": []}, "in_reply_to_status_id_str": "187636960632901632", "id_str": "187637067415683073", "in_reply_to_screen_name": "CataDuarte8", "user": {"follow_request_sent": null, "profile_use_background_image": true, "id": 286402064, "description": "Cada quien RECOJE lo que SIEMBRA (:\r\n\u2551\u258c\u2502\u2551\u2502\u2551\u258c\u2502\u2588\u2551\u2502\u2551\u258c\u2502\u2551\u258c\u2551 ", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1858805061/ginri_normal.jpg", "profile_sidebar_fill_color": "525252", "is_translator": false, "geo_enabled": false, "profile_text_color": "ffffff", "followers_count": 620, "protected": false, "location": "", "default_profile_image": false, "id_str": "286402064", "utc_offset": -21600, "statuses_count": 16395, "profile_background_color": "000000", "friends_count": 537, "profile_link_color": "ff0000", "profile_image_url": "http://a0.twimg.com/profile_images/1858805061/ginri_normal.jpg", "notifications": null, "show_all_inline_media": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/419254765/Scan0004.jpg", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/419254765/Scan0004.jpg", "screen_name": "LadyRomeroo", "lang": "es", "profile_background_tile": true, "favourites_count": 136, "name": "Lady Romero \u2605", "url": "http://www.facebook.com/profile.php?id=1640385164", "created_at": "Fri Apr 22 23:04:41 +0000 2011", "contributors_enabled": false, "time_zone": "Central Time (US & Canada)", "profile_sidebar_border_color": "0a5b80", "default_profile": false, "following": null, "listed_count": 0}, "place": null, "retweet_count": 0, "geo": null, "in_reply_to_user_id_str": "306846931", "source": "web"} 
```

我只对“文本”键、值字段感兴趣。在python中我可以这样做：

```
import simplejson
f = open("file.json", "r")
for line in f:
    r = simplejson.loads(line).get('text')
    print r 
```

它返回所有文本字段值，例如：

```
@_MuitoMais_  ´vcs são d  msm amei o pode ou ão pode e a entrevist com a @claudialeitte =) 
```

这很好用，但是当我尝试将相同的方法应用于迪斯科附带的示例 count_words.py 示例时，如下所示：

```
from disco.core import Job, result_iterator
import simplejson

def map(line, params):
    r = simplejson.loads(line).get('text')
    for word in r.split():
        yield word, 1

def reduce(iter, params):
    from disco.util import kvgroup
    for word, counts in kvgroup(sorted(iter)):
        yield word, sum(counts)

if __name__ == '__main__':
    job = Job().run(input=["/tmp/file.json"],
                    map=map,
                    reduce=reduce)
    for word, count in result_iterator(job.wait(show=True)):
        print word, count 
```

我收到以下错误：

```
# python test.py 
Job@549:b4c76:9cbb1:
Status: [map] 0 waiting, 1 running, 0 done, 0 failed
2012/11/24 02:01:10  master     New job initialized!
2012/11/24 02:01:10  master     Starting job
2012/11/24 02:01:10  master     Starting map phase
2012/11/24 02:01:10  master     map:0 assigned to comp1
2012/11/24 02:01:11  master     ERROR: Job failed: Worker at 'comp1' died: Traceback (most recent call last):
  File "/home/DISCO/data/comp1/46/Job@549:b4c76:9cbb1/usr/local/lib/python2.7/site-packages/disco/worker/__init__.py", line 329, in main                               
    job.worker.start(task, job, **jobargs)                                                                                                                              
  File "/home/DISCO/data/comp1/46/Job@549:b4c76:9cbb1/usr/local/lib/python2.7/site-packages/disco/worker/__init__.py", line 290, in start                              
    self.run(task, job, **jobargs)                                                                                                                                      
  File "/home/DISCO/data/comp1/46/Job@549:b4c76:9cbb1/usr/local/lib/python2.7/site-packages/disco/worker/classic/worker.py", line 286, in run                          
    getattr(self, task.mode)(task, params)                                                                                                                              
  File "/home/DISCO/data/comp1/46/Job@549:b4c76:9cbb1/usr/local/lib/python2.7/site-packages/disco/worker/classic/worker.py", line 302, in map                          
    part = str(self['partition'](key, self['partitions'], params))                                                                                                      
  File "/home/DISCO/data/comp1/46/Job@549:b4c76:9cbb1/usr/local/lib/python2.7/site-packages/disco/worker/classic/func.py", line 341, in default_partition              
    return hash(str(key)) % nr_partitions                                                                                                                               
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb4' in position 0: ordinal not in range(128)                                                               

2012/11/24 02:01:11  master     WARN: Job killed
Status: [map] 1 waiting, 0 running, 0 done, 1 failed
Traceback (most recent call last):
  File "test.py", line 18, in <module>
    for word, count in result_iterator(job.wait(show=True)):
  File "/usr/local/lib/python2.7/site-packages/disco/core.py", line 348, in wait
    timeout, poll_interval * 1000)
  File "/usr/local/lib/python2.7/site-packages/disco/core.py", line 309, in check_results
    raise JobError(Job(name=jobname, master=self), "Status %s" % status)
disco.error.JobError: Job Job@549:b4c76:9cbb1 failed: Status dead 
```

看起来这应该是直截了当的，但我显然错过了一些东西。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:56:11.153

您的问题出在[`disco/worker/classic/func.py`](https://github.com/discoproject/disco/blob/master/lib/disco/worker/classic/func.py)...`str()`不会接受 unicode 字符...

```
>>> str(u'\xb4')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb4' in position 0: ordinal not in range(128)
>>> 
```

由于您只计算单词，因此您可以使用[`unicodedata`](http://docs.python.org/2/library/unicodedata.html)模块将 unicode 数据转换为字符串...

```
import json
import unicodedata
f = open('file.json')
for line in f:
    r = json.loads(line).get('text')
    s = unicodedata.normalize('NFD', r).encode('ascii', 'ignore')
    print r
    print s 
```

输出：

```
@CataDuarte8 No! avÃ­seme cuando vaya ah salir para yo salir igual!
@CataDuarte8 No! aviseme cuando vaya ah salir para yo salir igual! 
```

将此应用于您的问题...将您的`map()`功能重写为...

```
def map(line, params):
    r = simplejson.loads(line).get('text')
    s = unicodedata.normalize('NFD', r).encode('ascii', 'ignore')
    for word in s.split():
        yield word, 1 
```

# php - 是否可以在 URI 上对文件进行 base64 编码？

> ID：13539145
> 
> 赞同：0
> 
> 时间：2012-11-24T07:08:21.910
> 
> 标签：php, url, io, base64

我一直在摆弄 PHP，我想知道是否有可能做这样的事情。

如果是这样，您能否提供示例代码？

更新：我的意思是，我想对 URI 中可能存在的任何文件进行编码，而不是 URI 本身。对不起，如果我不清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:11:28.510

我不明白为什么不...

```
<?php $file = file_get_contents("http://example.com/myfile.txt");
      $encoded = base64_encode($file); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T07:11:53.643

你可以放：

```
base64_encode(file_get_contents('http://www.google.com')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T07:15:08.567

[**file_get_contents**](http://php.net/manual/en/function.file-get-contents.php)函数将获取给定 URL 的 HTML， [**base64_encode**](http://php.net/manual/en/function.base64-encode.php)函数将对其进行编码。

```
<?php 
    $content = file_get_contents("http://google.com");
    $encodedContent = base64_encode($content);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:10:33.983

您想对 URL 进行 base64 编码吗？简单的...

```
base64_encode($uri) 
```

# java - 全屏显示选定的网格图像，此代码需要在 MainActivity 类中，如下所示

> ID：13539149
> 
> 赞同：1
> 
> 时间：2012-11-24T07:09:22.610
> 
> 标签：java, android, android-layout, android-intent, android-widget

```
public class MainActivity extends Activity {

GridView gridView;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gridView = (GridView) findViewById(R.id.grid_view);
    adapter=new LazyAdapter(this, mStrings);
    gridView.setAdapter(adapter);

    Button b=(Button)findViewById(R.id.button2);
    b.setOnClickListener(listener);
}

@Override
public void onDestroy()
{
    adapter.imageLoader.stopThread();
    gridView.setAdapter(null);
    super.onDestroy();
}

public OnClickListener listener=new OnClickListener(){
    public void onClick(View arg0) {
        adapter.imageLoader.clearCache();
        adapter.notifyDataSetChanged();
    }
};

private String[] mStrings={
        "http://www.globaltvbc.com/uploadedImages/Global_News/Content/Wallpaper.jpeg",
        "http://cdn.windows7themes.net/themes/halo-3-hd-wallpaper.jpg",
   };
} 
```

问题是我想在gridview上显示项目并全屏显示项目。我想包含任何代码以全屏显示gridview项目与MainActivity在同一类中。我不希望我的代码是在一个新的班级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:15:54.187

我给你我的代码根据你的需要编辑这个|主要活动

```
package com.mypack;

import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.GridView;
import android.widget.RelativeLayout;

public class GridViewActivity extends Activity implements OnItemClickListener {

    List<RowItem4> rowItems;

    private GridView gridView;

    private Button galleryButton;

    private Button shareButton;
    private String[] mStringArray;
    public static final Integer[] partyid = { 1, 2, 3, 4, 18, 19, 20 };
    int i = 1;
    private String xml;
    String output = "";

    /*private static final String NAMESPACE = "";
    private static final String URL = "";
    private static final String SOAP_ACTION = "";
    private static final String METHOD_NAME = "";*/

    private int pos;
    private ProgressDialog progressDialog;
    private int galleryId;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.grid_view);

        Intent i = getIntent();
        pos = i.getIntExtra("position", 0);
        galleryId = i.getIntExtra("galleryId", 0);

        progressDialog = ProgressDialog.show(GridViewActivity.this, "",
                "Loading...");
        Thread myThread = new Thread() {

            private GridViewAdapter adapter;

            public void run() {
                getImages();

                rowItems = new ArrayList<RowItem4>();
                for (int i = 0; i < mStringArray.length; i++) {
                    RowItem4 item = new RowItem4(mStringArray[i]);
                    rowItems.add(item);
                }
                // LoadImageFromURL(""
                // + output);
                adapter = new GridViewAdapter(GridViewActivity.this, rowItems);

                runOnUiThread(new Runnable() {
                    public void run() {

                        try {

                            gridView.setAdapter(adapter);
                            gridView.setOnItemClickListener(GridViewActivity.this);

                            progressDialog.dismiss();
                        } catch (final Exception ex) {
                            Log.i("---", "Exception in thread");
                        }
                    }
                });

            }
        };
        myThread.start();

        setUpView();

    }

    private void getImages() {
        final String envelope = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                + "<SOAP-ENV:Envelope SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" "
                + "xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" "
                + "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" "
                + "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\""
                + " xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" "
                + "xmlns:tns=\"urn:registerwsdl\">" + "<SOAP-ENV:Body>"
                + "<tns:register " + "xmlns:tns=\"urn:registerwsdl\">"
                + "<galleryid xsi:type=\"xsd:integer\">" + galleryId
                + "</galleryid>" + "<partyid xsi:type=\"xsd:integer\">"
                + partyid[pos] + "</partyid>" + "</tns:register>" +

                // "</SOAP-ENV:Body></SOAP-ENV:Envelope>",Name,Email,Password,Status,Type,Date];
                "</SOAP-ENV:Body></SOAP-ENV:Envelope>";

        System.out.println("------------" + envelope);

        CallWebService(URL, SOAP_ACTION, envelope);

        org.w3c.dom.Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            ArrayList<String> myList = new ArrayList<String>();
            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

            NodeList nl1 = doc.getElementsByTagName("response");
            for (int j = 0; j < nl1.getLength(); j++) {

                NodeList nl = doc.getElementsByTagName("url");

                for (int i = 0; i < nl.getLength(); i++) {

                    Node node = nl.item(i);

                    myList.add(node.getFirstChild().getNodeValue());

                }
            }
            mStringArray = new String[myList.size()];
            mStringArray = myList.toArray(mStringArray);

            for (int i = 0; i < mStringArray.length; i++) {
                Log.d("string is", (mStringArray[i]));
            }

        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

    }

    String CallWebService(String url, String soapAction, String envelope) {
        final DefaultHttpClient httpClient = new DefaultHttpClient();
        // request parameters

        HttpParams params = httpClient.getParams();
        HttpConnectionParams.setConnectionTimeout(params, 20000);
        HttpConnectionParams.setSoTimeout(params, 25000);
        // set parameter
        HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), true);

        // POST the envelope
        HttpPost httppost = new HttpPost(url);
        // add headers
        httppost.setHeader("soapaction", soapAction);
        httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

        String responseString = "";
        try {

            // the entity holds the request
            HttpEntity entity = new StringEntity(envelope);
            httppost.setEntity(entity);

            // Response handler

            ResponseHandler<String> rh = new ResponseHandler<String>() {
                // invoked when client receives response

                public String handleResponse(HttpResponse response)
                        throws ClientProtocolException, IOException {

                    // get response entity
                    HttpEntity entity = response.getEntity();

                    // read the response as byte array
                    StringBuffer out = new StringBuffer();
                    byte[] b = EntityUtils.toByteArray(entity);

                    // write the response byte array to a string buffer
                    out.append(new String(b, 0, b.length));

                    return out.toString();
                }
            };

            responseString = httpClient.execute(httppost, rh);

        } catch (Exception e) {
            Log.v("exception", e.toString());
        }

        xml = responseString.toString();
        // close the connection
        System.out.println("xml file ------" + xml);
        httpClient.getConnectionManager().shutdown();
        return responseString;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {

        if (i == 2) {

            if (galleryButton.getVisibility() == View.VISIBLE) {
                galleryButton.setVisibility(View.INVISIBLE);

                shareButton.setVisibility(View.INVISIBLE);

            } else {
                galleryButton.setVisibility(View.VISIBLE);

                shareButton.setVisibility(View.VISIBLE);

            }

            i = 0;
        }
        i++;
        super.dispatchTouchEvent(ev);
        return false;

    }

    /*
     * public OnTouchListener touch = new View.OnTouchListener() {
     * 
     * public boolean onTouch(View v, MotionEvent event) {
     * //System.out.println("onTouch       =============-----------"); if
     * (galleryButton.getVisibility() == v.VISIBLE) {
     * galleryButton.setVisibility(v.INVISIBLE);
     * 
     * shareButton.setVisibility(v.INVISIBLE);
     * 
     * } else { galleryButton.setVisibility(v.VISIBLE);
     * 
     * shareButton.setVisibility(v.VISIBLE);
     * 
     * } return false; } };
     */
    private void setUpView() {

        gridView = (GridView) findViewById(R.id.gridView1);

        galleryButton = (Button) findViewById(R.id.gallery_button);

        shareButton = (Button) findViewById(R.id.share_button);

        // relativeLayout1.setOnTouchListener(touch);

    }

    public void onItemClick(AdapterView<?> adapterView, View view,
            int position, long id) {

        Intent i = new Intent(getApplicationContext(), ShowImageActivity.class);
        i.putExtra("image", mStringArray[position]);
        i.putExtra("galleryId", galleryId);
        startActivity(i);

    }

} 
```

RowItem4 对象类

```
package com.mypack;

public class RowItem4 {
    private String imageId;

    public String getImageId() {
        return imageId;
    }

    public void setImageId(String imageId) {
        this.imageId = imageId;
    }

    public RowItem4(String mStringArray) {
        this.imageId = mStringArray;

    }

} 
```

GridViewAdapter 扩展 BaseAdapter

```
package com.mypack;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;

public class GridViewAdapter extends BaseAdapter {

    Context context;
    List<RowItem4> rowItems;
    private ViewHolder holder;
    private Drawable d;

    public GridViewAdapter(Context context, List<RowItem4> rowItems) {
        super();
        this.context = context;
        this.rowItems = rowItems;
    }

    private class ViewHolder {
        ImageView imageView;
        public int position;

    }

    public int getCount() {
        // TODO Auto-generated method stub
        return rowItems.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return rowItems.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return rowItems.indexOf(getItem(position));
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        holder = null;

        LayoutInflater mInflater = (LayoutInflater)
            context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.grid_image_view, null);
            holder = new ViewHolder();

            holder.imageView = (ImageView) convertView.findViewById(R.id.grid_item_image);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }

        RowItem4 rowItem = (RowItem4) getItem(position);

        holder.position = position;
        GetXMLTask task = new GetXMLTask(position,holder);

        task.execute(new String[] { ""+rowItem.getImageId() });

        //holder.imageView.setImageDrawable(d);
        return convertView;
    }

    /*private Drawable LoadImageFromURL(String url)
    {
    try
    {
    InputStream is = (InputStream) new URL(url).getContent();
    d = Drawable.createFromStream(is, "src");
    return d;
    }catch (Exception e) {
    System.out.println(e);
    return null;
    }
    }*/

    private class GetXMLTask extends AsyncTask<String, Void, Bitmap> {
        private int mPosition;
        private ViewHolder mHolder;
        public GetXMLTask(int position, ViewHolder holder) {
            mPosition = position;
            mHolder = holder;
        }

        protected Bitmap doInBackground(String... urls) {
            Bitmap map = null;
            for (String url : urls) {
                map = downloadImage(url);
            }
            return map;
        }

        // Sets the Bitmap returned by doInBackground
        protected void onPostExecute(Bitmap result) {
            if (mHolder.position == mPosition)
            {
            mHolder.imageView.setImageBitmap(result);
        }
        }

        // Creates Bitmap from InputStream and returns it
        private Bitmap downloadImage(String url) {
            Bitmap bitmap = null;
            InputStream stream = null;
            BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 1;

            try {
                stream = getHttpConnection(url);
                bitmap = BitmapFactory.
                        decodeStream(stream, null, bmOptions);
                stream.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            return bitmap;
        }

        // Makes HttpURLConnection and returns InputStream
        private InputStream getHttpConnection(String urlString)
                throws IOException {
            InputStream stream = null;
            URL url = new URL(urlString);
            URLConnection connection = url.openConnection();

            try {
                HttpURLConnection httpConnection = (HttpURLConnection) connection;
                httpConnection.setRequestMethod("GET");
                httpConnection.connect();

                if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    stream = httpConnection.getInputStream();
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            }
            return stream;
        }
    }
} 
```

这段代码是如果你想在第二个活动上加载图像，如果你想在同一个活动上加载图像，只需在主活动中添加用于添加弹出窗口的代码。我想现在很清楚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:34:38.880

如果你想在同一个活动上加载全屏，那么你应该使用弹出窗口来显示图像。

或者最好的解决方案是在您的主要活动上实施 onItemClickListener 并单击按位置获取项目并将图像 url 传递给下一个活动以将其加载到那里。

# jquery - jqGrid tableToGrid 插件相同的 HTML 代码但 TD 高度问题

> ID：13539151
> 
> 赞同：0
> 
> 时间：2012-11-24T07:09:47.480
> 
> 标签：jquery, html, css, jquery-ui, jqgrid

我喜欢在我的应用程序中使用 jqGrid 在页面加载时显示表格数据。我第一次想从服务器构建我的 HTML 并使用[tableToGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:table_to_jqgrid)插件将其转换为 jqGrid。

但我在这里面临一个奇怪的问题。如果我在同一行中给出表格 html（[**此处为 JS BIN 演示**](http://jsbin.com/ageyuz/1/edit)），tableToGrid 会格式化我的表格。但是如果我对齐，相同的 HTML 代码将不起作用（**[此处为 JS BIN 演示](http://jsbin.com/ewujob/1/edit)**）。**但两者都是相同的 HTML**

任何人都可以帮助我解决上述奇怪的问题吗？

**编辑**：使用 Visual Studio 并使用 Ctrl+K+D 对齐代码

**问题是 TD 的高度**

看到这张图片，它在 css 中显示 22px 高度，但占用 39px。它只发生在对齐的代码中。 ![在此处输入图像描述](../Images/6d00ccade773d9858e2e9fcd6e248425.png)

我只需要在页面加载时构建一个 jqGrid（不在 document.ready 中使用 ajax 调用）并进一步使用 Ajax。也许我可以第一次使用本地数据和 json 进行进一步的 ajax 调用。但我没有看到任何这样的例子。让我知道是否有人有一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:13:49.983

接缝的使用`tableToGrid`仅在第一眼看上去就很好。你会尝试的越多，你就越会发现它会以**错误的方式**引导你。jqGrid 旨在将数据与其可视化表示区分开来 - 格式化。只有输入数据才能正确排序和过滤网格中的数据。

[这](http://jsfiddle.net/PNu69/9/)是一个小演示，演示了我的意思：

![在此处输入图像描述](../Images/37e86bfb83f351f7719e8c9249e49ef0.png)

由于数据的分离和数据的可视化，可以得到正确的排序和搜索/过滤：

![在此处输入图像描述](../Images/471362cf6aaf6fdeaebec3868a0b762b.png)

对应的 JavaScript 代码很简单：

```
$(function () {
    var d = [
        {id: "r1", name: "Bob", age: 10, married: false },
        {id: "r2", name: "Jim", age: 5, married: false },
        {id: "r3", name: "Marry", age: 29, married: true }
    ];
    $("#grid").jqGrid({
        datatype: "local",
        data: d,
        colNames: ["Name", "Age", "Married"],
        colModel: [
            {name: "name", width: 220},
            {name: "age", formatter: "integer", align: "right", sorttype: "integer", width: 90,
                searchoptions: {sopt: ['eq','ne','lt','le','gt','ge'] }}, 
            {name: "married", formatter: "checkbox", align: "center", width: 80,
              stype: "select", searchoptions: { sopt: ['eq', 'ne'], value: ":Any;true:Yes;false:No" }}
        ],
        sortname: "age",
        sortorder: "desc",
        ignoreCase: true,
        height: "auto",
        rowNum: 10000 // no paging of data
    });
    $("#grid").jqGrid("filterToolbar", {defaultSearch: "cn", searchOnEnter: false, stringResult: "true"});
}); 
```

**更新**：从服务器加载的 JSON 的使用也非常简单。[演示](http://www.ok-soft-gmbh.com/jqGrid/Murali.htm)演示了这一点。

![在此处输入图像描述](../Images/46b491d430d8f54098f8ff45a16f4488.png)

代码是

```
$(function () {
    $("#grid").jqGrid({
        url: "Murali.json",
        datatype: "json",
        colNames: ["Name", "Age", "Married"],
        colModel: [
            {name: "name", width: 220},
            {name: "age", formatter: "integer", align: "right", 
                sorttype: "integer", width: 50,
                searchoptions: {sopt: ['eq','ne','lt','le','gt','ge'] }},
            {name: "married", formatter: "checkbox", align: "center",
                width: 80, stype: "select",
                searchoptions: { sopt: ['eq', 'ne'], value: ":Any;true:Yes;false:No" }}
        ],
        ignoreCase: true,
        height: "auto",
        rowNum: 10,
        sortname: "name",
        pager: "#pager",
        loadonce: true,
        jsonReader: {
            repeatitems: false,
            root: function (obj) { return obj; }
        }
    });
    $("#grid").jqGrid("navGrid", "#pager", {add: false, edit: false, del: false});
    $("#grid").jqGrid("filterToolbar",
        {defaultSearch: "cn", searchOnEnter: false, stringResult: "true"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:26:22.450

我复制了您的代码并在我系统的 html 页面中尝试了它。有效。此外，当标签在一行中给出时，它似乎在 jsbin 中工作。它可能是与 jsbin 相关的问题。否则当我尝试将它作为 html 文件运行时它不应该工作。

# java - 从 nextLine 读取的输入不等于字符串值

> ID：13539152
> 
> 赞同：1
> 
> 时间：2012-11-24T07:10:02.020
> 
> 标签：java, string

我得到了这个代码：

```
 System.out.println("Enter the brand and cash value");

    String brand = keyboard.nextLine();

    long cash = keyboard.nextDouble();
    String buffer = keyboard.nextLine(); 
```

但即使我输入了我要比较的确切字符串值，它也无法识别它们是相同的。奇怪的是，当我输入这个时：

`compare[0] = new Car ("BMW", 12.00);`

而不是这个：

`compare[0] = new Car (brand, 12.00);`

有用

我也使用等于：

```
public boolean equals(Car other)
{
    if (other == null)
    {
        return false;
    }

    if(this.brand == other.brand && this.cash == other.cash)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:19:05.253

您正在使用`==`测试字符串相等性，并且`"BMW"`是一个字符串文字，它被实习在一个池中，而`brand`不是。换句话说，如果您有：

```
String s1 = "BMW";
String s2 = "BMW";
String s3 = getString(); //receives "BMW" from the scanner 
```

`s1 == s2`是真的
`s1 == s3`是假
`s2 == s3`是假
`s1.equals(s2)`是真的
`s1.equals(s3)`是真的
`s2.equals(s3)`是真的

底线：你应该`equals`用来比较字符串。

您可以在[这篇文章](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)中阅读更多相关信息。

**编辑**

在您的`equals`方法的代码中，您需要更改

```
if(this.brand == other.brand && this.cash == other.cash) 
```

对此：

```
if(this.brand.equals(other.brand) && this.cash == other.cash) 
```

另请注意，您的还有一些其他问题`equals`- 特别是，它不会覆盖 equals：它应该是`public boolean equals(Object o)`

**编辑 2**

例如，您可以像这样实现您的 equals 方法（它假设品牌不能为空 - 如果不是这种情况，您也需要处理该特定情况）

```
@Override
public boolean equals(Object obj) {
    if (obj == null || getClass() != obj.getClass()) {
        return false;
    }

    final Car other = (Car) obj;
    return (this.cash == other.cash && this.brand.equals(other.brand));
} 
```

请注意，您还应该覆盖该`hashcode`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:57:02.087

你需要使用

`this.brand.equals(other.brand)`

在您的`if`条款中，而不是

```
this.brand == other.brand 
```

用于检查 String的`==`引用及其值..

在这种情况下，您的值是相同的，但不是参考值。

因此，您需要使用`equals`因为它仅用于检查值。
我猜这就是你想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:56:10.870

使用`java.lang.Object`如下所示的相等方法

```
public boolean equals(Car other)
{
    if (other == null)
    {
        return false;
    }

    if(this.brand.equals(other.brand) && this.cash.equals(other.cash))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

# gcc - “js 2f\n\t”中的 f 是什么意思？

> ID：13539154
> 
> 赞同：3
> 
> 时间：2012-11-24T07:10:11.563
> 
> 标签：gcc, assembly, linux-kernel, inline-assembly

代码：

```
extern inline int strncmp(const char * cs, const char * ct, int count)
{
register int __res;
__asm__("cld\n"
"1:\tdecl %3\n\t"
"js 2f\n\t"
"lodsb\n\t"
"scasb\n\t"
"jne 3f\n\t"
"testb %%al, %%al\n\t"
"jne 1b\n"
"2:\txorl %%eax,%%eax\n\t"
"jmp 4f\n"
"3:\tmovl $1,%%eax\n\t"
"j1 4f\n\t"
"negl %%eax\n"
"4:"
:"=a" (__res):"D" (cs), "S" (ct), "c" (count):"si","di","cx");
return __res;
} 
```

我不明白“ **js 2f\n\t** ”中的**f**和“ **jne 1b\n ”中的****b**，如何理解？我应该看哪本书？谢谢你。

 ******* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T07:19:24.563

在这种情况下`f`，意味着向前和`b`向后。So`js 2f`表示*向前跳转到标签 2，如果 sign set*。

你会想要调查的`gcc inline assembly`。我似乎在网上找不到任何参考来包含这一点，但我知道你可以在[Professional Assembly Language](https://rads.stackoverflow.com/amzn/click/com/0764579010)中找到它。

为什么我们不能使用命名标签？引用书中的一段话：

> If you have another asm section in your C code, you cannot use the same labels again, or an error message will result due to duplicate use of labels.

So what can we do ?

> The solution is to **use local labels**. Both conditional and unconditional branches allow you to specify a number as a label, along with a directional flag to indicate which way the processor should look for the numerical label. The first occurrence of the label found will be taken.

About modifiers:

> Use the f modifier to indicate the label is forward from the jump instruction. To move backward, you must use the b modifier.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T12:31:13.943

This is documented in the [manual](http://sourceware.org/binutils/docs-2.23.1/as/Symbol-Names.html) for the assembler.******

# playframework - 播放框架specs2 url测试

> ID：13539157
> 
> 赞同：1
> 
> 时间：2012-11-24T07:10:26.887
> 
> 标签：playframework, specs2

我试图弄清楚如何使用 specs2 在 Play 框架中测试多个 URL，但如果不启动多个服务器，我似乎无法找出正确的方法。

```
import org.specs2.mutable._

import play.api.test._
import play.api.test.Helpers._
import play.api.libs.ws.WS

class testServer extends Specification {

  running(TestServer(9000)) {
    "Server starts" in {
      await(WS.url("http://localhost:9000").get).status must equalTo(OK)
    }
    "Who" in {
      await(WS.url("http://localhost:9000/url1").get).status must equalTo(OK)
    }
    "How" in {
      await(WS.url("http://localhost:9000/url2").get).status must equalTo(OK)
    }
    "Why" in {
      await(WS.url("http://localhost:9000/url3").get).status must equalTo(OK)
    }
    "Test4" in {
      await(WS.url("http://localhost:9000/url4").get).status must equalTo(OK)
    }
    "Test" in {
      await(WS.url("http://localhost:9000/url5").get).status must equalTo(OK)
    }
    "Help" in {
      await(WS.url("http://localhost:9000/url6").get).status must equalTo(OK)
    }
    "Bogus" in {
      await(WS.url("http://localhost:9000/url7").get).status must equalTo(OK)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:55:46.133

[请参阅此问题](https://stackoverflow.com/questions/13489818/specs-test-with-fakeapplication-fails-with-access-to-play-cache-no-applicatio)的答案。您需要为每个示例创建一个新的上下文。例如你可以写：

```
import org.specs2._
import execute._
import specification.AroundExample

class testServer extends Specification with AroundExample {
  def around[R <% Result](r: =>R) = 
    running(TestServer(9000))(r)

   "Server starts" in {
     await(WS.url("http://localhost:9000").get).status must equalTo(OK)
   }
   ...
} 
```

# windows-8 - Windows 8 Ad sdk 隐藏魅力栏窗口（关于我们）

> ID：13539163
> 
> 赞同：1
> 
> 时间：2012-11-24T07:11:42.363
> 
> 标签：windows-8, charms-bar

在我的 Windows 8 应用程序中，我在窗口右侧有一个广告。当我从魅力栏设置窗格中选择“关于”页面时，广告 sdk 控件仍保留在“关于”页面的顶部.. 如下所示......

![](../Images/3e0df772b6fe73d45cc4de351bfd0b19.png)

MainPage.xaml,

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ads:AdControl Width="160" Height="600" IsEnabled="False" HorizontalAlignment="Right" AdUnitId="10043134" ApplicationId="d25517cb-12d4-4699-8bdc-52040c712cab"></ads:AdControl>
</Grid> 
```

About.xaml（用户控制），

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="100"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid Background="#000000">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="butAboutus" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource SnappedBackButtonStyle}" />
        <TextBlock x:Name="pageTitle" Grid.Column="1" Foreground="White" Text="About" Style="{StaticResource PageHeaderTextStyle}" FontSize="30" Margin="0,0,27,39"/>
    </Grid>
    <Grid Grid.Row="1" Background="White">
        <StackPanel Orientation="Vertical" Margin="20,20,0,0">
            <TextBlock Text="Sample about" FontSize="15" Foreground="Black" TextWrapping="Wrap" Margin="0,0,0,15"/>
        </StackPanel>
    </Grid>
</Grid> 
```

我究竟做错了什么？我怎么解决这个问题...？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:48:16.800

正如 Wilbur 建议的那样，adcontrol 当前使用 webview（浏览器控件）并且总是出现在顶部，因此您需要在显示弹出控件或弹出控件之前切换它的可见性。此控件的另一个令人讨厌的问题是，每当刷新广告时，它也会将焦点从应用程序中移开（您可能希望将 IsEnabled 属性设置为 false 以解决该问题）。

我个人认为 webview 和 adcontrol 是需要重写的两个控件:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:37:29.557

当您想在其上显示某些内容时，您将不得不隐藏广告控件。广告控件使用 WebBrowser，它具有（烦人的）始终位于顶部的属性。

# c# - 如何解决 GetEnumerator 延迟调用？

> ID：13539167
> 
> 赞同：3
> 
> 时间：2012-11-24T07:12:56.503
> 
> 标签：c#, .net, collections

如果文件不存在或其中的数据版本已过时，我有简单的代码旨在通过文件或数据库返回枚举器。简单的。但是，我正在努力解决该方法的工作原理。原因如下：

```
public override IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
{
    try
    {
        return GetFromFiles(); // returns instantly here
    }
    catch (ArgumentOutOfRangeException)
    {
        return GetFromBackingStore();
    }
    catch (FileNotFoundException)
    {
        return GetFromBackingStore();
    }
} 
```

`GetFromFiles`看起来像这样：

```
private IEnumerator<KeyValuePair<TKey, TValue>> GetFromFiles()
{
    foreach (var path in _paths)
    {
        using (var fs = _versioner.TryOpen(path))
        {
            var reader = _serializerFactory.CreateSerializer(fs, FileAccess.Read);

            KeyValuePair<TKey, TValue> pair;
            while (reader.Read(out pair))
            {
                yield return pair;
            }
        }
    }
} 
```

现在的问题是，当`GetEnumerator`使用 foreach 调用时，它会立即返回而无需`GetFromFiles`先执行调用，但随后会返回到`GetFromFiles`方法，但现在`try-catch`已经不在播放中，因此如果`TryOpen`抛出异常，则不会处理异常。我试图了解为什么以及如何解决它。它必须与`yield return`我认为有关，如果是这种情况，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:21:50.053

迭代器块已延迟执行。在某些情况下，您可以重构（“提取方法”）迭代器块的中心部分，因此您可以立即进行核心测试并且只推迟迭代，但这在这里是不可能的，因为您正在执行外部`foreach`（特别是，您只能先发制人地检查第一个文件，除非您将它们全部打开）。

如果尺寸适中，也许最简单的事情`.ToList()`就是现在添加做整个事情：

```
return GetFromFiles().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T07:22:11.567

您拥有的第一个方法（包括 try/catch）返回对第二个方法的引用，因此它只被调用一次。每次外层代码枚举通过时，不会再调用第一个方法，因为它已经引用了枚举器，因此直接调用它。您需要将 try/catch 移动到第二种方法，或者使用一个标准集合来初始化一次，而不是一次读取一个元素。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T07:23:22.693

答案在`yeild`操作符中，而 try catch 内部的枚举器未执行。这部分：

尝试 { 返回 GetFromFiles(); // 只是一个承诺 }

将 Enumerator 作为**promise**返回。还没有执行显式迭代`IEnumerable<>`。收益率充当*未来*。稍后将在调用 .ToList() 或 .Count() .. 时执行...

# asp.net-mvc - 用户使用 IE 时重定向

> ID：13539171
> 
> 赞同：1
> 
> 时间：2012-11-24T07:13:54.423
> 
> 标签：asp.net-mvc, routing

我在 ASP.NET MVC 中创建了这个自定义路由类：

```
public class UserAgentConstraint:IRouteConstraint {
  private string RequiredUserAgent;
  public UserAgentConstraint(string agentParam) {
    RequiredUserAgent = agentParam;
  }
  public bool Match(HttpContextBase httpContext, Route route, string parameterName,
    RouteValueDictionary values, RouteDirection routeDirection) {
    return httpContext.Request.UserAgent != null && !httpContext.Request.UserAgent.Contains(RequiredUserAgent);
  }
} 
```

在 Global.asax.cs 中：

```
public static void RegisterRoutes(RouteCollection routes) {
  routes.MapRoute("myRoute2", "{controller}/{action}/{Id}",
    new { controller = "home", action = "index", Id = UrlParameter.Optional }, new {
      customConstriant=new UserAgentConstraint("IE")
    }
  } 
```

上面的代码运行良好，但是当用户使用 IE 时，我得到一个 404 错误。我想重定向到自定义页面。我不想在`Web.Config`文件中使用自定义错误，因为我的错误仅适用于 IE。怎么能做到这一点？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:29:23.957

一个更好的方法是使用 ActionFilter。

```
 public class BrowserFilterAttribute : ActionFilterAttribute 
    {
        public string [] _browserNames { get; set; }
        public AssetIdFilterAttribute(params string [] browserNames)
        {
            _browserNames= browserNames;
        }

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {            
            //get browser name from somewhere
            string currentBrowser  = filterContext.HttpContext.Request.Browser.Browser;
            if(_browserNames.Contains(currentBrowser))
                filterContext.Result = new RedirectResult("your URL");
        }

    } 
```

你可以像这样在控制器级别应用它：

```
 [BrowserFilter("IE","Opera","SomeOtherBrowser")]
  public class BrowserAwareController() : Controller
  {

  } 
```

希望这有帮助。祝你好运。

# java - 更新 CardLayout 的子（面板）

> ID：13539174
> 
> 赞同：0
> 
> 时间：2012-11-24T07:14:09.830
> 
> 标签：java, swing, layout-manager, cardlayout

我的主要`JFrame`内容面板是卡片布局，我添加了许多（比如`panel1`，`panel2`）面板作为卡片。我想`panel1`在`panel2`.

如何更新`CardLayout`Swing 中的子（面板）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T13:55:58.433

[这里](https://stackoverflow.com/a/3072979/230513)讨论的[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)是实现这一点的关键。特别是，两个面板都可以监听一个通用模型，该模型将触发事件以更新每个监听面板。可以在[此处](https://stackoverflow.com/a/10523401/230513)和[此处](https://stackoverflow.com/a/11832979/230513)找到使用示例。`PropertyChangeListener`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:18:16.917

保持对要更改的目标的引用，并使用某种回调函数来检测更改。在回调函数中使用存储的引用。您如何具体实现这一点应该是对您的代码最有意义的……但是您要做的是一项简单的任务。

# capybara - Capybara 在单独的 ruby 文件中

> ID：13539183
> 
> 赞同：0
> 
> 时间：2012-11-24T07:16:16.943
> 
> 标签：capybara

在`some.rb`文件中我把代码：

```
require 'rubygems'
require 'capybara'
require 'capybara/dsl'

Capybara.run_server = false
Capybara.current_driver = :selenium

module MyTest
  class Test
    include Capybara::DSL
    def first
      visit('http://www.google.com')

      save_and_open_page

      # fill_in('?',:with => term)
      # page.should have_css('div#res li')
    end
  end
end

t = MyTest::Test.new
t.first 
```

并尝试运行此文件：`ruby some.rb`

并在保存的页面中 - 我得到谷歌页面，但在其他编码中......

我怎样才能解决这个问题 ？（我想在谷歌搜索一些查询 - 但在这个编码中我不知道在 fill_in 中放了什么）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:10:33.423

检查以下链接 [http://blog.dharanasoft.com/2012/03/19/a-search-spider-in-ruby-using-capybara-webkit/](http://blog.dharanasoft.com/2012/03/19/a-search-spider-in-ruby-using-capybara-webkit/)

这个例子很有帮助。如果您需要更详细的解释，请在评论中告诉我。

```
fill_in "q", :with => ARGV[0] || "I love Ruby!" 
```

在上面的语句中，q 是 google 搜索框 id（您可以通过 firefox 中的 firebug add on 获取），最后一条语句“I Love Ruby”是执行代码后将粘贴到搜索框中的查询。

# asp.net - 带有和不带 GUI 的 ASP.net 中的数据控件

> ID：13539184
> 
> 赞同：1
> 
> 时间：2012-11-24T07:16:20.703
> 
> 标签：asp.net

使用带有 Gui 和没有 Gui 的 gridview 或任何其他控件有什么区别

# php - CSS：边距问题

> ID：13539192
> 
> 赞同：0
> 
> 时间：2012-11-24T07:17:14.383
> 
> 标签：php, html, css, layout

我试图在一个类中输出多个元素，但我无法将页面顶部与实际元素分开。

我尝试将每个图像分开`div.element img:not(:nth-of-type(1)){`，`div.element img:nth-of-type(1){`但没有奏效。我将如何操纵第一个元素之间的空间，而不是其他元素之间的空间？

```
<div class="element">
<a href="http://website.com" target="_blank" border="0"><img src="http://website.com"></a>
</div>

<div class="element">
<div id="Projecttitle" class="Projecttitle">Test Title</div>
</div>

<div class="element">
<div id="Projectdescription" class="Projectdescription">Test description</div>
</div>
<div class="element">
<a href="http://website.com" target="_blank" border="0"><img src="http://website.com"></a>
</div>

<div class="element">
<div id="Projecttitle" class="Projecttitle">Test Title</div>
</div>

<div class="element">
<div id="Projectdescription" class="Projectdescription">Test description</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:42:05.120

```
div.element:first-child {
  padding-top: 0;
}

div.element {
  padding-top: 10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:18:38.837

您的 HTML 没有意义。如果你保持逻辑上属于一起的元素，你会得到更容易设计样式的语义代码，如下所示：

```
<div class="project">
    <div class="image">
        <img src="#" alt="image">
    </div>

    <div class="text">
        <h1>Test Title</h1>  
        <p>Test description</p>
    </div>
</div> 
```

还有一些 CSS：

```
.image {
    float: left;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    width: 50%;
    padding: 10px 20px 10px 0;
}

.text {
    float: left;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    width: 50%;
    padding: 10px 0 10px 20px;
    border-left: 1px solid black;
}

.project:first-child .image,
.project:first-child .text {
    padding-top: 0;
}

.project:last-child .image,
.project:last-child .text {
    padding-bottom: 0;
} 
```

[JSFiddle](http://jsfiddle.net/bygz6/7/)

那应该让你开始！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T07:24:43.853

试试这个：

```
div.element:nth-of-type(1) img {
  padding-top: /* some value */;
} 
```

和类似的`:nth-of-type()`伪类作用于其父上下文中的元素。换句话说，它只评估直接兄弟姐妹。您的各个`<img>`元素*不是*彼此的兄弟姐妹，因为它们有不同的父母。

# php - 链接各种浏览器的单独/条件/唯一样式表

> ID：13539193
> 
> 赞同：0
> 
> 时间：2012-11-24T07:17:45.773
> 
> 标签：php, jquery, css

将 gecko、opera、msie、webkit 等指向他们自己的附加样式表的当前最佳实践是什么？

浏览器嗅探已经结束？我在网上找到的大部分内容都是 2008 年的旧帖子，或者关于正确与错误的理论争论，或者如何使用等等。

必须有更复杂的东西我们可以使用。一些 jquery 或 php 说，（伪代码），“IF moz，@import url（moz.css）”或其他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:23:13.510

从用户代理中检测浏览器并为该浏览器包含适当的 css。

```
$browser = get_browser($_SERVER['HTTP_USER_AGENT'], true);

switch ($browser['browser']) {
    case "IE": //load ie specific css
                break;
    case "Firefox":
    case "Mozilla":   //load gecko specific css
        break;

    case "Safari":  //load safari css
           break;
    case "Opera": //load opera css
          break;

    default:
        echo '<link href="default.css" rel="stylesheet" type="text/css" />';
} 
```

这是关于 get_browser() 函数的[详细文章。](http://www.koodoz.com.au/klog/development/getting-phps-get_browser-function-to-work-on-your-site/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:23:39.043

检测特定的浏览器是一个坏主意，因为不同的版本可能具有您可能不知道的不同功能。更好的解决方案是使用[Modernizr](http://www.modernizr.com)之类的东西来检测*特征*，并相应地进行样式设置。

如果您出于某种原因*必须*检测不同的渲染引擎，在 PHP 中使用该[`browser_info()`](http://www.php.net/manual/en/function.get-browser.php)方法相对简单：

```
<head>
    ...
    <!-- Stylesheets for all browsers -->
    <link rel="stylesheet" href="style.css" />

    <?php
    $browser    = get_browser(null, true);

    switch($browser['browser']){
        case 'Firefox':
            // User is using Firefox
            $style  = 'firefox.css';
            break;

        case 'Safari':
            // User is using Safari
            $style  = 'safari.css';
            break;
    }

    if(isset($style)){
        // Specific browser stylesheet set - add to page
        ?>
        <link rel="stylesheet" href="<?php echo $style;?>" />
    <?php } ?>
</head> 
```

# ruby-on-rails - 使用 ActiveRecord 的 to_xml 方法，但首字母为小写字母

> ID：13539198
> 
> 赞同：0
> 
> 时间：2012-11-24T07:18:23.713
> 
> 标签：ruby-on-rails, ruby

使用活动记录的 to_xml 方法时，有没有办法将第一个字母变为小写字母？我知道您可以通过调用对字符串执行此操作`"hello_world".camelize(:lower)`，但该`to_xml`方法提供的唯一选项是`:camelize => true`

有没有办法使用提供的选项来做到这一点？我一直在阅读您可以创建自己的 xml 构建器，但我不确定从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:22:47.220

只需替换`true`为`:lower`：

```
{ "hello_world" => 1 }.to_xml(:camelize => :lower)
#=> "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<hash>\n  <helloWorld type=\"integer\">1</helloWorld>\n</hash>\n" 
```

# list - Clojure 瞬态 - assoc！导致异常

> ID：13539204
> 
> 赞同：2
> 
> 时间：2012-11-24T07:19:30.443
> 
> 标签：list, clojure, shuffle

这是我要运行的功能...

```
(defn mongean [cards times]
  (let [_cards (transient cards)]
    (loop [i 0 c (get cards i) _count (count cards) _current (/ _count 2)]
      (assoc! _cards _current c)
      (if ((rem i 2) = 0)
        (def _newcur (- _current (inc i)))
        (def _newcur (+ _current (inc i))))
      (if (<= i _count)
        (recur (inc i) (get cards i) _count _newcur )))
    (persistent! _cards))) 
```

它导致了这个异常......

```
Exception in thread "main" java.lang.ClassCastException: clojure.lang.PersistentHashSet$TransientHashSet cannot be cast to clojure.lang.ITransientAssociative 
```

作为clojure的新手，我也很感激对我上面的方法的任何建设性的批评。目标是获取一个列表，并返回一个重新排序的列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T09:57:57.250

我假设您正在尝试实现[Mongean](http://en.wikipedia.org/wiki/Shuffling#Mongean_shuffle) shuffle。您的方法非常必要，您应该尝试使用更实用的方法。

这将是一个可能的实现，如果我们计算卡片的最终顺序（根据 Wikipedia 公式），然后我们使用内置`replace`函数进行映射：

```
 (defn mongean [cards]
   (let [num-cards (count cards)
         final-order (concat (reverse (range 1 num-cards 2)) (range 0 num-cards 2))]
      (replace cards final-order)))

  user> (mongean [1 2 3 4 5 6 7 8])
  (8 6 4 2 1 3 5 7) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T10:17:54.013

你怎么称呼那个函数？看起来您正在传递一个集合，因此它的瞬态版本也将是一个集合，因此不能与任何`assoc`函数一起使用，因为它们适用于关联数据结构和向量：

```
user=> (assoc #{} :a 1)
ClassCastException clojure.lang.PersistentHashSet cannot be cast to clojure.lang.Associative  clojure.lang.RT.assoc (RT.java:691)

user=> (assoc! (transient #{}) :a 1)
ClassCastException clojure.lang.PersistentHashSet$TransientHashSet cannot be cast to clojure.lang.ITransientAssociative  clojure.core/assoc! (core.clj:2959)

; the following works as it uses maps and vectors
user=> (assoc {} :a 1)
{:a 1}
user=> (assoc! (transient {}) :a 1)
#<TransientArrayMap clojure.lang.PersistentArrayMap$TransientArrayMap@65cd1dff>
user=> (assoc [] 0 :a)
[:a] 
```

现在，让我们尝试讨论代码本身。遵循您的代码并尝试理解目标的真正含义有点困难，而无需对您想要实现的目标提供更多提示，但作为一般性评论：

*   您有一个`times`根本不使用的输入参数

*   你应该使用瞬态突变的结果，而不是假设瞬态会原地突变

*   如果可以，请避免瞬变，它们仅用于性能优化

*   绑定`_current (/ _count 2)`可能不是您想要的，因为`(/ 5 2)`确实返回`5/2`了，并且您似乎想将其用作结果中的位置

*   常量`_count`不需要成为`loop`绑定的一部分，您可以使用外部`let`，这样您就不必在每次迭代时都传递它们

*   使用`let`而不是`def`在函数中命名事物

*   `(if ((rem 1 2) = 0))`绝对不是你想要的

现在，抛开洗牌算法，如果你需要重新排列一个序列，你可能只需要产生一个新位置序列，`map`它们与原始卡片产生对，`[position card]`最后`reduce`通过将卡片放置在新位置，使用原始序列来产生对作为种子：

```
(defn generate [coll] ; counts down from (count coll) to 0, change to
                      ; implement your shuffling algorithm
  (range (dec (count coll)) -1 -1))

(defn mongean [cards times]
  (let [positions (generate cards) ; get the new positions
        assemble (fn [dest [pos card]] ; assoc the card at the wanted position
                   (assoc dest pos card))]
    (reduce assemble cards (map vector positions cards)))) 
```

如果你只是想洗牌：

```
(defn mongean [cards times] (shuffle cards)) 
```

# java - 为什么我需要在 Hibernate 中进行事务以进行只读操作？

> ID：13539213
> 
> 赞同：121
> 
> 时间：2012-11-24T07:20:44.843
> 
> 标签：java, database, hibernate, transactions, database-connection

为什么我需要在 Hibernate 中进行事务以进行只读操作？

以下事务是否在数据库中加了锁？

从数据库中获取的示例代码：

```
Transaction tx = HibernateUtil.getCurrentSession().beginTransaction(); // why begin transaction?
//readonly operation here

tx.commit() // why tx.commit? I don't want to write anything 
```

我可以用`session.close()` 代替`tx.commit()`吗？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-24T10:50:42.157

用于读取的事务可能看起来确实很奇怪，并且在这种情况下人们通常不会标记事务的方法。`autocommit=true`但是 JDBC 无论如何都会创建事务，如果没有明确设置不同的选项，它将起作用。但是将事务标记为只读是有实际原因的：

### 对数据库的影响

1.  只读标志可以让 DBMS 优化此类事务或并行运行的事务。
2.  拥有跨越多个 SELECT 语句的事务可以保证从可重复读取或快照开始的级别的适当隔离（例如，请参阅[PostgreSQL 的可重复读取](https://www.postgresql.org/docs/current/transaction-iso.html#XACT-REPEATABLE-READ)）。否则，如果另一个事务并行提交，则 2 个 SELECT 语句可能会看到不一致的画面。使用已提交读时，这无关紧要。

### 对 ORM 的影响

1.  如果您没有明确地开始/结束事务，ORM 可能会导致不可预知的结果。例如，Hibernate 将在第一条语句之前打开事务，但它不会完成它。因此，连接将返回到连接池，并带有未完成的事务。那会发生什么？JDBC 保持沉默，因此这是特定于实现的：MySQL、PostgreSQL 驱动程序回滚此类事务，Oracle 提交它。请注意，这也可以在连接池级别进行配置，例如 C3P0 为您提供了这样一个选项，默认情况下回滚。
2.  Spring 在只读事务的情况下设置 FlushMode=MANUAL，这会导致其他优化，例如不需要脏检查。这可能会导致巨大的性能提升，具体取决于您加载的对象数量。

### 对架构和干净代码的影响

不能保证您的方法不会写入数据库。如果您将方法标记为`@Transactional(readonly=true)`，您将决定是否可以*在*此事务的范围内写入数据库。如果您的架构很繁琐，并且某些团队成员可能会选择将修改查询放在不期望的地方，则此标志会将您指向有问题的地方。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-10-26T18:00:51.060

所有数据库语句都在物理事务的上下文中执行，即使我们没有明确声明事务边界（例如，BEGIN、COMMIT、ROLLBACK）。

如果您没有明确声明事务边界，那么每个语句都必须在单独的事务（`autocommit`模式）中执行。这甚至可能导致每个语句打开和关闭一个连接，除非您的环境可以处理每个线程的连接绑定。

将服务声明为`@Transactional`将在整个事务期间为您提供一个连接，并且所有语句都将使用该单个隔离连接。这比首先不使用显式事务要好得多。

在大型应用程序上，您可能有很多并发请求，降低数据库连接获取请求率肯定会提高您的整体应用程序性能。

JPA 不对读取操作强制执行事务。`TransactionRequiredException`只有在您忘记启动事务上下文的情况下才会写入最终抛出。尽管如此，即使对于只读事务也最好声明事务边界（在 Spring 中`@Transactional`，您可以标记只读事务，这具有很大的性能优势）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-24T11:39:14.347

事务确实在数据库上加了锁——好的数据库引擎以合理的方式处理并发锁——并且对于只读使用很有用，以确保没有*其他*事务添加使您的视图不一致的数据。你总是想要一个事务（虽然有时调整隔离级别是合理的，但最好不要一开始就这样做）；如果您在事务期间从不写入数据库，那么提交和回滚事务的结果是相同的（而且非常便宜）。

现在，如果你很幸运，并且你对 DB 的查询使得 ORM 总是将它们映射到单个 SQL 查询，那么你可以在没有*显式*事务的情况下逃脱，依赖于 DB 的内置自动提交行为，但 ORM 是相对复杂的系统因此，除非您进行更多工作来检查实现的实际作用，否则依赖这种行为是不安全的。在其中编写显式事务边界要容易得多（特别是如果您可以使用 AOP 或一些类似的 ORM 驱动技术来做到这一点；我想从 Java 7 开始也可以使用 try-with-resources）。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-11-15T21:56:11.993

是否只读取并不重要 - 数据库仍必须跟踪您的结果集，因为其他数据库客户端可能想要写入会更改您的结果集的数据。

我见过杀死大型数据库系统的错误程序，因为它们只是读取数据，但从不提交，从而迫使事务日志增长，因为数据库无法在 COMMIT 或 ROLLBACK 之前释放事务数据，即使客户端什么也没做用了几个小时。

# php - 如何使用 cURL 将图像资源从 URL 加载到 PHP 脚本中？

> ID：13539214
> 
> 赞同：3
> 
> 时间：2012-11-24T07:20:43.930
> 
> 标签：php, curl, php-gd

我正在使用 Google Charts 服务生成一些二维码，之后我需要在 PHP 脚本中操作（例如旋转、缩放）并与其他图像合并以生成最终图像。

如何正确地将这样的资源（从 URL）加载到 PHP 脚本中，以允许我操作它的方式？

示例 URL 为：[https ://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=xghsdfgsdfg&choe=UTF-8&chld=L|0](https://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=xghsdfgsdfg&choe=UTF-8&chld=L%7C0)

我目前有以下代码来使用 cURL 检索图像：

```
function getImage($url){
        $ch = curl_init ($url);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
        $resource = curl_exec($ch);
        curl_close ($ch);

        return $resource;
} 
```

但是当我这样使用它时：

```
$image = imagecreatefrompng(getImage("https://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=xghsdfgsdfg&choe=UTF-8&chld=L|0")); 
```

返回以下错误：

```
Warning: imagecreatefrompng(‰PNG  ) [function.imagecreatefrompng]: failed to open stream: No such file or directory in /home/picselbc/public_html/projects/cakemyface/preview.php on line 383
https://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=xghsdfgsdfg&choe=UTF-8&chld=L|0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:23:45.330

您需要的不是`imagecreatefrompng()`is [`imagecreatefromstring()`](http://www.php.net/manual/en/function.imagecreatefromstring.php)，因为前者需要文件名而不是文件内容本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:28:54.563

这对我有用

```
$image = imagecreatefromstring(file_get_contents('http://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=xghsdfgsdfg&choe=UTF-8&chld=L|0'));
header('Content-Type: image/png');
imagepng($image); 
```

注意：我必须使用 http 而不是 https，因为我没有在本地服务器上设置 ssl。

# c# - 实体框架按日期分组并返回新类

> ID：13539224
> 
> 赞同：10
> 
> 时间：2012-11-24T07:22:30.803
> 
> 标签：c#, .net, entity-framework

我正在使用 .NET 和实体框架。我想按没有时间部分的日期对表格进行分组。

我有课：

```
public sealed class QueryItem {
    public int Year { get; set; }
    public int Month { get; set; }
    public int Day { get; set; }
} 
```

以及方法（我使用的是 BLToolkit，如果你想知道什么是 DbManager）：

```
protected override IQueryable<QueryItem> InitiateQuery() {
    return
        from query in DbManager.GetTable<SomeTableModel>()
        group query by new { Year = query.CreationDate.Year, Month = query.CreationDate.Month, Day = query.CreationDate.Day }
        into list1
        select new QueryItem {Year = list1.Key.Year, Month = list1.Key.Month, Day = list1.Key.Day};
} 
```

在这个方法中 linq 翻译成这个 SQL 查询：

```
SELECT
    [query].[CreationDate]
FROM
    [SomeDatabase.SomeTable] [query]
GROUP BY
    DatePart(Year, [query].[CreationDate]),
    DatePart(Month, [query].[CreationDate]),
    DatePart(Day, [query].[CreationDate]),
    [query].[CreationDate] 
```

这是错误的查询，因为它不仅仅按日期分组。

但是如果我使用这段代码（它不可用，我需要返回一个类对象）：

```
var result =
    from query in DbManager.GetTable<SomeTableModel>()
    group query by new { Year = query.CreationDate.Year, Month = query.CreationDate.Month, Day = query.CreationDate.Day }
    into list1
    select list1; 
```

会被翻译成这样：

```
SELECT
    [t1].[c1] as [c11],
    [t1].[c2] as [c21],
    [t1].[c3] as [c31]
FROM
    (
        SELECT
            DatePart(Year, [selectParam].[CreationDate]) as [c1],
            DatePart(Month, [selectParam].[CreationDate]) as [c2],
            DatePart(Day, [selectParam].[CreationDate]) as [c3]
        FROM
            [SomeDatabase.SomeTable] [selectParam]
    ) [t1]
GROUP BY
    [t1].[c1],
    [t1].[c2],
    [t1].[c3] 
```

这是正确的查询。

我想实体框架试图优化我的查询或类似的东西，这就是我得到错误查询的原因。

我对吗？我是否以正确的方式做这件事？我应该怎么做（可能使用直接 SQL 查询或其他方法）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T10:12:36.777

在这里使用[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx) * 要简单得多：

```
var result =
    from query in DbManager.GetTable<SomeTableModel>()
    group query by EntityFunctions.TruncateTime(query.CreationDate)
    into list1
    select list1; 
```

^(* Entity Framework 6 中的[DbFunctions](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions.aspx)。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-31T10:34:30.470

**更新答案：** `EntityFunctions`已弃用。

> 警告 1“System.Data.Entity.Core.Objects.EntityFunctions”已过时：“此类已被 System.Data.Entity.DbFunctions 替换。” c:\users\liufa\documents\visual studio 2013\Projects\MatasMrLenderTest\Mvc5MobileApplication1\Controllers\CreditScoreController.cs 32 103 Mvc5MobileApplication1

现在是`DbFunctions`。

```
using System.Data.Entity;

var result = DbManager.GetTable<SomeTableModel>()
.GroupBy(o => DbFunctions.TruncateTime(o.CreationDate)) 
```

# ios - 转到当前视图 UItableView

> ID：13539227
> 
> 赞同：2
> 
> 时间：2012-11-24T07:22:54.023
> 
> 标签：ios, uitableview, segue

我的表格视图中有一个未定义的级别（深度），所以我希望能够在视图和自身之间创建一个 segue，这样只要我有子级别要发现，我就可以调用它。我怎样才能做到这一点 ？

我曾想过在需要时直接使用 [self.navigationView pushViewController]，但我希望新控制器在我的 SB 中使用定义的视图。

谢谢，

编辑：目前我发现的唯一解决方案是复制 VC，在 VC1 和 VC2 之间设置一个名为“showNext”的 segue，在 VC1 和 VC2 之间设置一个名为“showNext”的 segue。没有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T16:37:27.037

如果您使用的是动态单元格原型，您显然可以毫无问题地从表格视图单元格转到控制器。

![从单元到控制器进行segue](../Images/ecfa7721d5a346df993a17334f7c4dca.png)

当您进行转场时，您最终会得到：

![循环转场](../Images/aee44afcf05d7d62346a0500e652fe08.png)

但是让我们想象一下，有些原因对您不起作用，例如，您无法从单元格中获得 segue（例如，您需要调用 segue from `didSelectRowAtIndexPath`，而不是在选择单元格时）。在这种情况下，您不能使用以前的技术。

在这种情况下有几个选项：

1.  正如[Chris 所指出的](https://stackoverflow.com/a/16247976/222458)，如果只支持iOS 6 及更高版本，请`didSelectRowAtIndexPath`使用上述技术，但是 (a) 确保您`self`对被取消）；`sender``shouldPerformSegueWithIdentifier``sender == self``sender`

2.  也许更简单，只是根本不定义 segue 并`didSelectRowAtIndexPath`手动[`instantiateViewControllerWithIdentifier`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/instm/UIStoryboard/instantiateViewControllerWithIdentifier:)进行，然后酌情推送/呈现该视图控制器；或者

3.  您可以使用以下笨拙的解决方法：简而言之，将一个按钮添加到您的视图控制器（将其向下拖动到底部的栏），它不会显示在视图上，但您可以使用它的 segues . 所以首先，将圆形按钮拖到场景底部的控制器栏：

    ![拖动按钮](../Images/e758eae525b56edd4373c1f9421008a3.png)

    现在您可以从该按钮到您的视图控制器进行转场：

    ![从隐藏按钮进行segue](../Images/061ade4d9c9aa8fb78366c39a3ac59a1.png)

    因此，您最终会再次出现自引用序列：

    ![最终按钮转场](../Images/5f10902699672eaeabf54810dffa3f8a.png)

    您必须为该 segue 提供一个标识符，以便您可以通过 以编程方式调用它`performSegueWithIdentifier`，但它可以工作。不是最优雅的解决方案，但我认为这比在故事板上添加一个额外的场景要好。

这些都不是理想的，但你有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T17:59:25.663

这个过程让我做同样的事情......

像往常一样在情节提要中设置您的表格视图。不要给你的原型细胞一个细胞标识符。通过从单元格拖动到控制器，像上面一样设置你的 segue。

在您的 viewDidLoad 中注册单元格类

```
//register the cell identifier as we are not loading form a storybard
[_aTableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"CellID"]; 
```

在您的 cellForRowAtIndexPath 中设置您的单元格

```
static NSString *CellIdentifier = @"CellID";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

现在您可以使用 didSelectRowAtIndexPath 并调用 performSegueWithIdentifier。prepareForSegue 只会被调用一次。

# php - PHP 中的类和函数

> ID：13539240
> 
> 赞同：0
> 
> 时间：2012-11-24T07:24:09.487
> 
> 标签：php

```
<script language="javascript" type="text/javascript">
function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=350');
    if (window.focus) {newwindow.focus()}
    return false;
}
</script>

<a href="popupex.php" onclick="return popitup('popupex.php')">Link to popup</a> 
```

顶部代码是我的索引，在其中您可以看到**指向弹出**链接的链接，当您单击一个简单的表单时，该表单将出现，该表单有 2 个文本框和一个提交按钮，这是表单**popupex.php的代码**

```
<html>
<head>
<title>Form</title>
</head>
<body>
<?php
print"<form action='func.php?add/inside_add' method='post'>";
?>
<input type='text' name='ok'><br>
<input type='text' name='notok'><br>
<input type='submit'>
</form>
</body>
</html> 
```

**问题：**为什么我的 func.php 中的代码没有运行？仅仅因为错误？并且可以解释错误并给出解决方案吗？

这是我的**func.php**

```
<?php
function goback()
{
window.history.go(-1);
}

class add{
    function inside_add(){

    goback();
    }
}
?> 
```

我希望在这个函数中，当我单击**popupex.php**中的按钮时，它会以**popupex.php**的形式返回。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:27:19.733

您提供的代码是一个 javascript 函数`window.history.go(-1)`

用于`header('Location:' . $_SERVER['HTTP_REFERER']);`PHP 返回上一页。

# python - 在 python 中 b=a[:] 会发生什么？

> ID：13539242
> 
> 赞同：7
> 
> 时间：2012-11-24T07:24:36.280
> 
> 标签：python, python-3.x, python-2.7

```
 >>>a=[999999,2,3]
    >>>b=[999999,2,3]
    >>>print(a[0] is b[0])
    False#because it works for numbers -5 through 256
    >>>a=[1,2,3]
    >>>b=a[:]
    >>>print(a[0] is b[0])
    True#because it works for numbers -5 through 256
    >>>a=[999999,2,3]
    >>>b=a[:]
    >>>print(a[0] is b[0])
    True#why not False ??? 
```

发生了什么 b=a[:] （为什么不适用于数字 -5 到 256 ）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T07:27:46.940

-5 到 256 范围与[以下内容](http://docs.python.org/2/c-api/int.html)有关：

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您`int`在该范围内创建一个整数对象时，您实际上只是获取对现有对象的引用。

为了证明这一点，请注意如何`id(123)`保持返回相同的值，而`id(9999)`可以返回不同的值：

```
In [18]: id(123)
Out[18]: 9421736

In [19]: id(123)
Out[19]: 9421736

In [20]: id(9999)
Out[20]: 9708228

In [21]: id(9999)
Out[21]: 10706060 
```

这当然是当前实现的产物。不同的 Python 实现可能不会这样做，或者可能使用不同的范围。

至于你的最后一个例子：

```
In [14]: a=[999999, 2, 3]

In [15]: b=a[:]

In [16]: map(id, a)
Out[16]: [10908252, 9421180, 9421168]

In [17]: map(id, b)
Out[17]: [10908252, 9421180, 9421168] 
```

如您所见，`[:]`只需复制引用即可。这解释了为什么对all`a[i] is b[i]`求值。`True``i`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T07:29:40.883

```
a = [1,2,3]
b = a 
```

在这里，`b=a`使 b 成为 a 的别名。这意味着，对 b 的所有更改都将在 a 中看到。

`b=a[:]`意思是复制a并将其分配给b。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T07:30:12.490

```
 >>>b=a[:] 
```

对列表 a 中的项目和复制 b 的名称进行浅拷贝。新列表中包含的所有项目都将具有与原始列表中的项目相同的对象 ID（思考指针）。这是预期的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T07:51:13.373

添加到[@NPE 的答案](https://stackoverflow.com/a/13539266/915501)，这里有一个很好的说明：

```
a = range(-7, 259)
b = range(-7, 259)
for x, y in zip(a,b): 
    print x, x is y 
```

印刷：

```
-7 False
-6 False
-5 True
-4 True
...
255 True
256 True
257 False
258 False 
```

# url-rewriting - 使用代理通行证的 Nginx 重写规则

> ID：13539246
> 
> 赞同：32
> 
> 时间：2012-11-24T07:25:03.023
> 
> 标签：url-rewriting, nginx

我正在尝试针对以下情况实施 nginx 重写规则

要求：

```
http://192.168.64.76/Shep.ElicenseWeb/Public/OutputDocuments.ashx?uinz=12009718&iinbin=860610350635 
```

应该重定向到：

```
http://localhost:82/Public/OutputDocuments.ashx?uinz=12009718&iinbin=860610350635 
```

我试过这个没有运气：

```
location /Shep.ElicenseWeb/ {
    rewrite ^/Shep.ElicenseWeb/ /$1 last;
    proxy_pass http://localhost:82;
} 
```

为 nginx 执行这种重写的正确方法是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-24T07:50:39.557

您的重写语句是错误的。

右边的 $1 指的是匹配部分中的一个组（用括号表示）。

尝试：

```
rewrite  ^/Shep.ElicenseWeb/(.*)  /$1 break; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-22T23:05:37.193

您缺少尾部斜杠：

```
location /Shep.ElicenseWeb/ {
    proxy_pass http://localhost:82/;
} 
```

这将在没有重写的情况下工作。

# jquery - 从 div 中选择指定的内容

> ID：13539247
> 
> 赞同：0
> 
> 时间：2012-11-24T07:25:09.153
> 
> 标签：jquery, html, css

我想在 jquery 中构建一个小的“列表框”选择。

```
<div id="first">
<ul>
    <li><a href="#">abc</a></li>
    <li><a href="#" class="active">abc1</a></li>
    <li><a href="#">abc2</a></li>
</ul> 
```

我想首先创建一个函数，如果我单击href，则应添加“活动”类，如果已添加，我想删除它。

```
$('#first').click( function(e)
                 {
                     $('a[href=#]').click( function(e)
                                           {
                                              alert('bla');   
                                           })

                 }) 
```

但他警告了 3 次：-/

看看[jsfiddle](http://jsfiddle.net/9MATW/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:30:35.890

jQuery 有一个有用的方法[`toggleClass()`](http://api.jquery.com/toggleClass/)来帮助解决这个问题：

```
$('#first').click( function(){
    $('a[href=#]').click(function(){
        $(this).toggleClass('active');

        // Disable native click
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:38:18.113

如果您的想法是将活动类添加或删除到相应的锚标记，我认为您不需要在包含列表的 div 上具有单击功能..您需要做的就是

```
 $('#first a').click(function(){ 
    $(this).toggleClass('active');
  }); 
```

# objective-c - 对我的故事板中的一堆控件执行相同的操作，而无需重复代码

> ID：13539250
> 
> 赞同：0
> 
> 时间：2012-11-24T07:25:49.593
> 
> 标签：objective-c, ios, xcode, interface-builder

我在情节提要上有 3 种控件类型（bigButton0....bigButton11、btnSmall0...btnSmall11 和 lbl0...lbl11）。

我想将相同的图像分配给所有 btnBig0 到 btnBig11。我目前正在使用冗长的冗余代码来执行此操作，因为我没有找到任何更智能的解决方案，但我需要在运行时执行此操作。

有人可以告诉我如何缩短我的代码吗？非常感谢你。

```
NSString * sImageName = [NSString stringWithFormat:@"button_bg_%.0f_%.0f_normal.png", L_CELL_W, L_CELL_H];

[bigButton0 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton1 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton2 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton3 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton4 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton5 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton6 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton7 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton8 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton9 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton10 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];
[bigButton11 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateNormal];

sImageName = [NSString stringWithFormat:@"button_bg_%.0f_%.0f_down.png", L_CELL_W, L_CELL_H];

[bigButton0 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton1 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton2 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton3 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton4 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton5 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton6 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton7 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton8 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton9 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton10 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted];
[bigButton11 setImage:[UIImage imageNamed:sImageName] forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:31:22.300

有多种方法可以缩短此代码。一种是使用`IBOutletCollection`. 给你的视图控制器一个实例变量，它是一个集合类型，如`NSArray`，并将其注释为`IBOutletCollection`of `UIButton`：

```
@implementation MyViewController {
    IBOutletCollection(UIButton) NSArray *bigButtons;
}
... 
```

如果您愿意，可以在公共接口或`.m`文件的类扩展中将其设为属性：

```
#import "MyViewController.h"

// Class extension at the top of MyViewController.m
@interface MyViewController ()
@property (nonatomic, strong) IBOutletCollection(UIButton) NSArray *bigButtons;
@end

// Normal class @implementation comes after the class extension
@implementation MyViewController
... 
```

现在，在 Interface Builder 中，您可以将此插座集合连接到所有大按钮。然后你可以在你的代码中迭代集合：

```
NSString * sImageName = [NSString stringWithFormat:@"button_bg_%.0f_%.0f_normal.png", L_CELL_W, L_CELL_H];
UIImage *normalImage = [UIImage imageNamed:sImageName];
sImageName = [NSString stringWithFormat:@"button_bg_%.0f_%.0f_down.png", L_CELL_W, L_CELL_H];
UIImage *highlightedImage = [UIImage imageNamed:sImageName];

for (UIButton *button in bigButtons) {
    [button setImage:normalImage forState:UIControlStateNormal];
    [button setImage:highlightedImage forState:UIControlStateHighlighted];
} 
```

对每种类型的按钮重复（使用单独的集合 ivar）。

# jquery - .load 和 .post 的组合？

> ID：13539251
> 
> 赞同：1
> 
> 时间：2012-11-24T07:25:49.623
> 
> 标签：jquery, jquery-load, jquery-post

基本上，我想加载页面的内容，同时还传递一些 POST 参数。

现在，您可能会说，我使用`.post`，然后只使用类似的东西`$("#div").html(data)`，但问题是我想要`.load`. `.post`也许可以以某种方式使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T07:35:39.670

您可以使用`.load()`这种方式传递`POST`数据：

```
var data = {
    a: '123'
}

$('#element').load(url, data); 
```

如果只使用了两个参数，而第二个参数是一个对象，它将使用`POST`并将内容传递给要加载的页面。

另请参阅：[`.load()`文档](http://api.jquery.com/load/#request-method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:31:05.543

~~不，没有使用 POST 请求加载内容的方法。~~

您可以发出 POST 请求并将结果放在页面中。例子：

```
$.post(
  'page.html',
  { post: 'data' },
  function(data){
    $('#someElement').html(data);
  },
  'html'
); 
```

### 编辑：

要使用返回代码的部分结果，您可以像`load`方法一样解析结果：

```
 function(data){
    var c = $(data);
    $('#someElement').append(c.find('#somePart'));
  }, 
```

### 编辑2：

正如 Jack 所展示的，实际上有一种方法可以使该`load`方法发出 POST 请求。（由于误导性文档，我错过了它。）

部分使用结果的示例，将数据作为对象发送会触发 POST 请求方法：

```
$('"someElement #somePart').load('page.html', { post: 'data' }); 
```

# javascript - 在网络服务器中发送实时语音或声音

> ID：13539252
> 
> 赞同：0
> 
> 时间：2012-11-24T07:26:05.353
> 
> 标签：javascript, audio, chat

> **可能重复：**
> [任何人都可以建议如何使用 html5 和 javascript 在网站上录制来自麦克风的音频](https://stackoverflow.com/questions/6058242/can-anyone-suggest-how-to-record-audio-from-microphone-on-a-website-using-html5)

我想知道语音聊天是如何工作的？如何在我的 PC 中使用麦克风通过 javascript 录制语音以及如何将其发送到服务器？我想逐步了解这些是如何发生的。请帮助我，我应该如何学习以及从哪里学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:12:37.377

在这一点上它不能完成，至少不能单独通过 javascript。

它可以在 JAVA、Silverlight 或 Flash 帮助下完成。

看看[这个](https://stackoverflow.com/questions/2065797/how-to-record-voice-files-using-php-flash)链接。

或者直接[在这里](http://www.sajithmr.me/jrecorder-jquery)。

# html - 如果没有互联网连接，浏览器如何工作和理解 xmlns 属性？

> ID：13539253
> 
> 赞同：8
> 
> 时间：2012-11-24T07:26:07.843
> 
> 标签：html, xhtml, xml-namespaces, internet-connection

一个简单的 XHTML 文档，具有最少的必需标记：并且**xmlns**属性具有一个 http 链接。

如果我在 localhost 上工作并且没有 Internet 连接，我不能在 XHTML 上工作吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Title of the document</title>
    </head>

    <body>
        The content of the document......
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T07:28:05.700

XML 命名空间只是用来根据命名空间来识别元素，而命名空间*恰好是*URI 格式。请参阅[XML 命名空间规范](http://www.w3.org/TR/xml-names)。在本例中，`http://www.w3.org/1999/xhtml`是 XHTML 的名称空间；XML 处理器将能够使用此信息来识别 XHTML 名称空间中的哪些元素（由该 URL 识别）。

浏览器不会尝试请求`xmlns`属性中列出的 URL。即使有，它也不会收到任何有用的东西；在浏览器中访问[http://www.w3.org/1999/xhtml并亲自查看。](http://www.w3.org/1999/xhtml)

因此，即使您在没有 Internet 连接的开发机器上工作，也无需担心。您仍然可以编写有效的 XHTML。

# javascript - 如何使用jqPlot？

> ID：13539258
> 
> 赞同：0
> 
> 时间：2012-11-24T07:27:01.963
> 
> 标签：javascript, jquery, jqplot

我在我的项目中导入 jqPlot 如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
    <script language="javascript" type="text/javascript" src="../js/jqplot/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="../js/jqplot/jquery.jqplot.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../js/jqplot/jquery.jqplot.css" />
    <script type="text/javascript">
      $.jqplot('chartdiv', [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);
    </script>
  </head>
  <body>
    <div id="chartdiv" style="height:400px;width:300px; "></div>
  </body>
</html> 
```

我在 Chrome 中打开了这个 html 页面，但是有一个错误信息：

> $.jqplot('chartdiv', [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);
> 未捕获的类型错误：无法调用未定义的方法“jqplot”

我不完全知道原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:47:41.853

jqplot 抛出异常：

```
Uncaught No plot target specified 
```

这意味着它无法找到您想要放置图表的位置，因为 DOM 尚未准备好。您可以通过在 jQuery 函数中包装对 jqplot 的调用来修复它

```
$(function(){
    $.jqplot('chartdiv', [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);
}); 
```

示例： http: [//jsfiddle.net/jaimem/6ds84/](http://jsfiddle.net/jaimem/6ds84/) ​</p>

# c++ - 仅为 Qt Creator 中的发布版本添加预处理器定义

> ID：13539267
> 
> 赞同：8
> 
> 时间：2012-11-24T07:27:47.863
> 
> 标签：c++, c-preprocessor, qt-creator, qmake

我想为 Release 构建定义 QT_NO_DEBUG_OUTPUT，但我找不到在哪里添加它。

我需要预处理器定义是特定于版本的，即它应该影响 Release 构建，**而不是 Debug 构建**。

我正在寻找与此等效的东西（在 Visual Studio 中）：

![在此处输入图像描述](../Images/487b4625a929b37bf5513ebd6b0fea40.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T08:00:13.513

在您的项目文件中：

```
CONFIG(release, debug|release) {
    #This is a release build
    DEFINES += QT_NO_DEBUG_OUTPUT
} else {
    #This is a debug build
} 
```

请注意，CONFIG 可以同时包含“发布”和“调试”。只有最后一个有效，这就是上面的检查所做的。这在这里解释：

[http://doc.qt.digia.com/qt/qmake-function-reference.html#config-config](http://doc.qt.digia.com/qt/qmake-function-reference.html#config-config)

# symfony - ErrorException：警告：ini_set()：会话处于活动状态。此时您无法在 /../../ 中更改会话模块的 ini 设置

> ID：13539269
> 
> 赞同：2
> 
> 时间：2012-11-24T07:28:09.170
> 
> 标签：symfony

我正在尝试创建自己的身份验证提供程序，例如[http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)。

但是，它一直在说：

ErrorException：警告：ini_set()：会话处于活动状态。此时您无法在 /../../vendor/symfony/symfony/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/NativeFileSessionHandler.php 第 56 行更改会话模块的 ini 设置

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:19:33.337

Symfony2 会话在启用“会话自动启动”的情况下无法正常工作。因此，请确保已禁用。

确保您的 php 配置`php.ini`已配置：`session.auto_start = 0`.

或者，如果您无法编辑 php.ini 文件，您可以添加`php_flag session.auto_start 0`到您的文件中。`.htaccess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T17:20:12.547

此外，还有一种可能会出现此错误，正如我在经过长时间的挣扎后发现的那样：

无论出于何种原因，这个关键部分在 my 中被注释掉了`config_test.yml`，给了我完全相同的错误：

```
framework:
    session:
        storage_id: session.storage.mock_file 
```

`storage_id`设置必须到位以避免出现问题。

# windows-8 - 向 Windows 8 屏幕键盘添加按钮

> ID：13539277
> 
> 赞同：0
> 
> 时间：2012-11-24T07:30:26.283
> 
> 标签：windows-8, microsoft-metro, on-screen-keyboard

Microsoft 的“股票”应用程序有一行按钮，当您搜索股票时，这些按钮会显示在键盘顶部：

![在此处输入图像描述](../Images/940b094040120ad503d0b87e8cf54191.png)

（见键盘上方的按钮）

有没有办法在我自己的应用程序中添加这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:11:50.033

[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/e665e515-406a-4b2c-be09-6e4a384fc570/)有完全相同的问题，来自微软的人回答：

> 键盘不可扩展。在这种情况下，您看到的是键盘顶部的底部 AppBar。

我认为您应该订阅`Windows.UI.ViewManagement.InputPane.GetForCurrentView().Showing`事件，以在显示屏幕键盘时显示带有建议的应用程序栏。

# eclipse - 从 git 存储库进行拉取后，代码中的更改不会出现

> ID：13539285
> 
> 赞同：0
> 
> 时间：2012-11-24T07:31:16.087
> 
> 标签：eclipse, git, pull

我在 Eclipse 中使用 Git，所以每次我尝试提取存储库时，我上次提交的更改都不会出现在项目代码中。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:49:17.457

好的，我通过合并远程和本地分支并减少远程冲突来解决它。

# c# - 错误脱水类的属性值

> ID：13539293
> 
> 赞同：2
> 
> 时间：2012-11-24T07:32:24.343
> 
> 标签：c#, nhibernate

我正在尝试插入一个对象，但它抛出了我`Error: dehydrating property value for FrancosPoS.DBMapping.order.obs`

我在这里寻找

[NHibernate：错误脱水属性 - 这是什么鬼？](https://stackoverflow.com/questions/10867390/nhibernate-error-dehydrating-property-what-the-heck-is-this),

[NHibernate - 错误脱水属性值](https://stackoverflow.com/questions/11482106/nhibernate-error-dehydrating-property-value)和

[使用 NHibernate 接收超出范围的索引](https://stackoverflow.com/questions/1902219/receiving-index-out-of-range-with-nhibernate)，但它们都不起作用。

我已经检查并重新检查了我对多列声明的映射，但没有发现任何问题。

我的线索是问题与 MySQL 数据库上的 bigint 和`identity generator`. 当我将其更改为`increment`脱水错误消失并`Index out of range`出现异常。

此外，这发生在`Session Save`通话中。使用`increment`生成器，错误有时会发生`commit`。

这是我的订单 xml 映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
<class name="order" table="`order`" lazy="true" >
<id name="idOrder">
  <generator class="identity" />
</id>
<many-to-one lazy="false" name="employee">
  <column name="idEmployee" sql-type="bigint(20)" not-null="false" />
</many-to-one>
<many-to-one lazy="false" name="customer">
  <column name="idCustomer" sql-type="bigint(20)" not-null="false" />
</many-to-one>
<many-to-one lazy="false" name="address">
  <column name="idAddress" sql-type="bigint(20)" not-null="false" />
</many-to-one>
<property name="date">
  <column name="date" sql-type="datetime" not-null="true" />
</property>
<property name="bakingTime">
  <column name="date" sql-type="datetime" not-null="false" />
</property>
<property name="price">
  <column name="price" sql-type="decimal(8,4)" not-null="true" />
</property>
<property name="cash">
  <column name="cash" sql-type="tinyint(1)" not-null="false" />
</property>
<property name="credit">
  <column name="credit" sql-type="tinyint(1)" not-null="false" />
</property>
<property name="houseNumber">
  <column name="houseNumber" sql-type="bigint(20)" not-null="false" />
</property>
<property name="complement">
  <column name="complement" sql-type="bigint(20)" not-null="false" />
</property>
<property name="obs">
  <column name="obs" sql-type="varchar(350)" not-null="false" />
</property>

<bag name="orderPsi" table="ordPsi" cascade="all" inverse="true">
      <key column="idOrdPastaI" />
      <one-to-many class="ordPsi" />
</bag>
</class>
</hibernate-mapping> 
```

还有cs类：

```
public partial class order {
    public order() { }
    public virtual long idOrder { get; set; }
    public virtual employee employee { get; set; }
    public virtual customer customer { get; set; }
    public virtual address address { get; set; }
    public virtual System.DateTime date { get; set; }
    public virtual System.Nullable<System.DateTime> bakingTime { get; set; }
    public virtual string price { get; set; }
    public virtual System.Nullable<int> cash { get; set; }
    public virtual System.Nullable<int> credit { get; set; }
    public virtual System.Nullable<long> houseNumber { get; set; }
    public virtual System.Nullable<long> complement { get; set; }
    public virtual string obs { get; set; }
    public virtual IList<ordPsi> orderPsi { get; set; }
} 
```

这是堆栈跟踪后跟的内部异常：

```
"Parameter index is out of range."
at MySql.Data.MySqlClient.MySqlParameterCollection.CheckIndex(Int32 index)
at MySql.Data.MySqlClient.MySqlParameterCollection.GetParameter(Int32 index)
at System.Data.Common.DbParameterCollection.System.Collections.IList.get_Item(Int32 index)
at NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index)
at NHibernate.Type.NullableType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor session)
at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T21:44:28.403

我通过反复试验找到了解决方案，评论了数据库中可能为空的 xml 文件上的所有映射，并且我陷入了该`bakingTime`属性：

```
<property name="bakingTime">
  <column name="date" sql-type="datetime" not-null="false" />
</property> 
```

正如我所猜测的（以及其他帖子中的其他人所建议的），映射是错误的。通过复制粘贴问题 [:P] 的列名`bakingTime`指的是该`date`列，而不是它本身！！！

所以，这应该是：

```
<property name="bakingTime">
  <column name="bakingTime" sql-type="datetime" not-null="false" />
</property> 
```

此外，这篇文章仍然很有价值，即使不是那么新：

[“NHibernate Nullable DateTime 问题 - Ayende”](http://ayende.com/blog/2255/nhibernate-nullable-datetime-issues)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:34:22.067

.Net 代码的有趣命名方案，但对于 idOrder，您不应该同时需要 <id> 和 <property>。

# c# - 仅允许 RadGridView 中特定列中的特定字母

> ID：13539294
> 
> 赞同：1
> 
> 时间：2012-11-24T07:33:03.323
> 
> 标签：c#, .net, winforms, telerik, keypress

我有一个 RadGridView，我想防止用户在**第五**列中写入除“c”或“d”之外的任何字符、数字或字母。我已经尝试了下面的代码，但它没有工作......

```
private void radGridView1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (radGridView1.CurrentColumn.Index == 4)
    {
        if (e.KeyChar != 'c' || e.KeyChar != 'd' )
             e.Handled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:09:46.143

使用下面的代码片段，如果你想做更多的事情，比如提醒用户，或者添加一个验证错误，这取决于你：

```
 private void radGridView1_CellValidating(object sender, CellValidatingEventArgs e)
     {
        String[] Acceptable = new string[] {"c", "d"};

        if (e.Value != null && e.ColumnIndex == 4)
        {
            if(e.Value != e.OldValue)
            {
                if (!Acceptable.Contains(e.Value))
                {
                    e.Cancel = true;
                }
            }
        }
    } 
```

# jquery - 如何使用 jQuery 隐藏带有 Class/id 的 div

> ID：13539295
> 
> 赞同：0
> 
> 时间：2012-11-24T07:33:10.817
> 
> 标签：jquery, asp.net

我有一个函数 openbag(); 用于打开 div。此 div 在单击和 addClass“活动”时也打开。但我从服务器端打开这个 div，调用函数 openbag();。但问题是每次刷新其他页面时这个div都是打开的。我已经删除了“活动”课程并检查课程是否没有，但这总是显示。这是我正在使用的代码。

```
function openBag() {
   $("#bag").addClass("active");
   $("#expanding-bag").slideDown("fast");
  }

$(document).ready(function () {
    if ($("div#bag").hasClass("active")) {
        $("#expanding-bag").show();
        $("#bag").removeClass("active");
    }

    else {
        $("#expanding-bag").hide();
    } 
```

在 c# 中：

```
Page.ClientScript.RegisterStartupScript(typeof(Page), "alert", "<script language='javascript'>openBag();</script>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:39:21.883

您可以避免打开和关闭它以及所有这些，并直接从后面的代码中操作 javascript。一个技巧是使用 Literal 并显示或不显示，并将代码放入其中：

```
<asp:Literal runat="server" id="ShowIt" Visible="false" EnableViewState="false">
$(document).ready(function () {
    $("#expanding-bag").show();    
}
</asp:Literal>

<asp:Literal runat="server" id="HideIt" Visible="false" EnableViewState="false">
$(document).ready(function () {
    $("#expanding-bag").hide();
}
</asp:Literal> 
```

和你背后的代码`ShowIt.Visible=true`；在你想运行的那个。

另一种方法是从后面的代码直接在页面上呈现此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:16:56.973

你也可以试试这种方式把你的

> `expandingbag to runat="server"`

在服务器端访问您的扩展包，当您必须隐藏控件时使用以下代码

> expandbag.Style.add("display","none");

或者当你必须显示然后使用

> expandbag.Style.add("display","inherit");

# foursquare - Foursquare 探索 API 端点似乎已损坏

> ID：13539297
> 
> 赞同：0
> 
> 时间：2012-11-24T07:33:18.633
> 
> 标签：foursquare

自从我开始开发应用程序以来，我一直在使用 Foursquare Explore API 端点。不过最近好像坏了。它不断给我以下回应

**警告：{ 文本：“您附近没有很多结果。尝试更通用的方法，重置过滤器或扩大搜索区域。” }**

我正在尝试从以下 HTTP URL 获取响应 - **https://api.foursquare.com/v2/venues/explore?ll=40.7,-74&v=20121124**

（将我的凭据添加到上述 URL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:10:32.070

几天前在此页面上已注意到该问题
[Foursquare 场地/探索返回空数据集](https://stackoverflow.com/questions/13488905/foursquare-venues-explore-returning-empty-data-set)

我真的很希望foursquare让我们了解情况，因为如果没有提供有关正在发生的事情的信息，我们就不能依赖他们的API :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:50:00.833

此错误已修复，所有查询现在应该可以正常工作。感谢您提请我们注意这个问题。

# objective-c - NSDate 问题.. 时间不正确？

> ID：13539299
> 
> 赞同：-1
> 
> 时间：2012-11-24T07:33:58.567
> 
> 标签：objective-c, ios, xcode, nsdate

> **可能重复：**
> [NSDate 没有返回正确的日期](https://stackoverflow.com/questions/6554999/nsdate-not-returning-correct-date)

当我尝试像这样显示当前时间时： NSDate *mydate = [NSDate date];

我得到这个结果：

```
2012-11-24 09:27:13.194 myApp[5284:c07] mydate = 2012-11-24 07:27:13 +0000 
```

尽管模拟器时间和 OS X 时间不同，但时间减少了两个小时。我该如何解决？先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T07:43:51.163

您需要使用 NSDateFormatter 打印出日期。NSDate 没有附加任何时区信息。确保将时区附加到您的日期格式化程序。

```
NSDate* now = [NSDate date];

// GET A DATE FORMATTER AND SET THE TIMEZONE
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.timeZone = [NSTimeZone systemTimeZone];

// CHANGE FORMAT TO SUIT YOUR NEEDS
[df setDateStyle: NSDateFormatterFullStyle]; 
[df setTimeStyle: NSDateFormatterFullStyle];

// GET YOUR FORMATTED DATE STRING
NSString *dateString = [df stringFromDate: now]; 
```

# c# - c# 中的新 Int32() 用法？

> ID：13539300
> 
> 赞同：6
> 
> 时间：2012-11-24T07:34:03.700
> 
> 标签：c#, .net, .net-4.0, int

C# 编译器允许我编写：

```
int k=new Int32(); 
```

但是，我不能为它分配任何价值。

2个问题

1）不`new`创建堆分配，如果是这样，堆栈<->值呢？

2）我无能为力`int k=new Int32();`。我会在什么场景下使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T07:45:30.383

所有结构（并且 int/Int32 是一个结构）都允许使用 new()，这只是意味着：将结构初始化为默认值，即结构中的所有字段为零。大多数结构是不可变的——原语当然也是。基本上，您所写的内容与以下内容相同：

```
int k=0; 
```

你可以用它做很多事情......但是你不能改变零的任何属性。零就是零就是零。

`new`并不总是意味着“在堆上分配”。

# iphone - 在 ipad 中禁用选择小部件轮并使用正常选择

> ID：13539301
> 
> 赞同：1
> 
> 时间：2012-11-24T07:34:30.067
> 
> 标签：iphone, ios, ipad

在 ipad 中，选择标签显示在小部件轮中的弹出窗口中。我想在 ios 中使用普通的选择标签 abd 禁用该功能。检查此链接以更好地理解我的意思：[http](http://alvinalexander.com/iphone/iphone-ipad-html-select-widget-wheel) ://alvinalexander.com/iphone/iphone-ipad-html-select-widget-wheel 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:03:41.880

看到下面的代码希望它会帮助你...享受代码

```
 -(void)showPicker{

    UIToolbar *toolPicker = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    toolPicker.barStyle = UIBarStyleDefault;

    UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(hidePicker)];

    [toolPicker setItems:[NSArray arrayWithObjects:cancelButton,  nil]];

    pickerCategory = [[UIPickerView alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];
    pickerCategory.delegate=self;
    pickerCategory.dataSource=self;
    pickerCategory.showsSelectionIndicator = YES;
    txtCategory.inputView=pickerCategory;
    [pickerCategory addSubview:toolPicker];

    CGRect thePickerFrame = pickerCategory.frame;
    thePickerFrame.origin.y = toolPicker.frame.size.height;
    [pickerCategory setFrame:thePickerFrame];

    UIView *view = [[UIView alloc] init];
    [view addSubview:pickerCategory];
     [view addSubview:toolPicker];

    UIViewController *vc = [[UIViewController alloc] init];
    [vc setView:view];
    [vc setContentSizeForViewInPopover:CGSizeMake(320, 260)];

    popover = [[UIPopoverController alloc] initWithContentViewController:vc];

    [popover presentPopoverFromRect:txtCategory.bounds inView:txtCategory permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}
-(IBAction)hidePicker{
    [popover dismissPopoverAnimated:YES];
} 
```

# joomla - joomla中的相关产品

> ID：13539309
> 
> 赞同：0
> 
> 时间：2012-11-24T07:35:40.217
> 
> 标签：joomla, joomla2.5

如何仅显示相关产品区域中产品的缩略图，我当前的代码也显示链接，即`image`带有产品名称的 href 标题的标签。我只想显示缩略图

```
<?php
    foreach($this->product->customfieldsRelatedProducts as $field) {
        echo $field->display;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:05:45.737

我认为代码会帮助你。

```
<?php
    $image_dir = JURI::root()."images/";

    foreach($this->product->customfieldsRelatedProducts as $field) {
        echo $field->display; 
        ?>
            <img src="<?php echo $image_dir.$field->image; ?>" alt="<?php echo $field->title ?>" />
        <?php
    }
?> 
```

# linux - 如何收集所有 README 文件并在文件夹中重命名它们？

> ID：13539311
> 
> 赞同：0
> 
> 时间：2012-11-24T07:35:56.200
> 
> 标签：linux, shell, unix, find, xargs

例如，我有这些文件：

```
/Applications/Emacs.app/Contents/Resources/etc/images/custom/README
/Applications/Emacs.app/Contents/Resources/etc/images/ezimage/README
/Applications/Emacs.app/Contents/Resources/etc/images/gnus/README
/Applications/Emacs.app/Contents/Resources/etc/images/gud/README
/Applications/Emacs.app/Contents/Resources/etc/images/icons/README 
```

我想把它们全部收集起来，用不同的名字保存在一个目录中，所以它们变成了这样：

```
/dest/custom_README
/dest/ezimage_README
/dest/gnus_README
/dest/gud_README
/dest/icons_README 
```

我知道`find`并且`xargs`可能对完成这项工作有用，但不知道如何`rename`根据其目录名称执行该步骤。

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T07:40:08.093

这个怎么样：

```
[cnicutar@fresh ~]$ sed -r <file 's|.*images/(.*)/(.*)|\1_\2|g'
custom_README
ezimage_README
gnus_README
gud_README
icons_README 
```

或使用`awk`：

```
awk < file -F'/' '{print $(NF-1)"_"$NF}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:15:25.653

```
find /Applications/Emacs.app/Contents/Resources/etc/images -name README |
while IFS= read -r filename; do
    cp -v "$filename" /dest/"$(basename "$(dirname "$filename")")_README"
done 
```

# 3d - 表示更高维度的凸包 (3+)

> ID：13539314
> 
> 赞同：1
> 
> 时间：2012-11-24T07:37:16.923
> 
> 标签：3d, convex-hull, convex-polygon

在 2d 中，凸包基本上表示为点之旅。似乎这种表示可能会超出二维。因为，我将很快与他们合作，我想提前知道这样做的“标准”是什么，如果有这样做的话，因为船体可能会被其他人使用。

澄清：我所指的标准是关于输出格式的，这样程序就可以从该输出中利用外壳来做其他事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T11:34:09.047

点的集合总是足以完全指定任何船体，但在实践中计算点的连通性通常需要再次运行船体算法。

**编辑：**如果您需要边缘或面部数据，您可以在 quickhull 等算法中免费获得。我将假设 N 维。基本上，人们不断地寻找由 N 个点定义的平面，以及相关的法向量。如果法向量给定的平面一侧仍有点，则创建由最远点定义的新平面，并删除新平面集错误一侧的任何点。这些平面定义了 (N-1) 个单元（在 3D 中这些是面，在 2D 中这些是边）并在算法中的这一点上给出船体的最高维度表示。该算法继续进行，直到没有平面的点位于错误的一侧。最后的平面给出了最终船体的 (N-1) 个单元，它们的定义点是顶点。[http://www.qhull.org/](http://www.qhull.org/)使用了许多策略，其中最明显的是使用 Delaunay 三角剖分（一旦你有了凸包算法，你就有了代码）。

在二维中，您有一个点列表和一些边。如果你愿意，你可以命令他们参观。您需要任何船体的边缘和点。

在 3D 中，您需要点和边，或面和边，或点和面作为最小表示。但有时同时拥有这三个可能是有效的。也许你想用它们构成的边缘来表示面部，也许是点，也许两者兼而有之。这是内存和时间或可访问性之间的权衡。

在更高维度上你也有同样的东西，但有单元格（3D+ 面）以及面、边和点。随着维度的增加，存储单元数据所需的空间可能会变得非常大，因此点和边的集合可能变得可取，您可以在这里看到这种模式的证据：[http ://en.wikipedia.org/wiki/Hypercube#元素](http://en.wikipedia.org/wiki/Hypercube#Elements)。

然后，您可以选择如何表示高维单元格，它们参考点、边缘、面、低维单元格、高维单元格。问题是：你跟踪不同维度细胞之间的每一个关系（比如面和边缘之间的关系，但更高维度）？或者这些关系的类型数量将超线性增加，这是一个额外的组合，每种类型的数量关系也将被表示。因此，您是否将其全部扔掉并即时计算。即使是中等规模的问题，对空间和时间的要求也会变得很重要——所以表示的选择实际上取决于你在做什么。

就个人而言，我通常使用一组带有引用它们的边的点。

ND 几何：[http ://en.wikipedia.org/wiki/Polytope](http://en.wikipedia.org/wiki/Polytope)

# php - 创建扩展名为 .php 的 javascript 文件

> ID：13539323
> 
> 赞同：5
> 
> 时间：2012-11-24T07:39:52.013
> 
> 标签：php, javascript

我一直在单独的 .js 文件中编写 javascript 函数。在我的上一个项目中，javascript 文件的数量更多，因此页面加载速度较慢，因为请求数量更多。因此，出于实验目的，我转换了几个带有 .php 扩展名的 .js 文件，并在它们中添加了包含语句。这样加载时间性能更好。在 .php 文件中编写 javascript 有很多优点。我可以访问 php 变量并轻松地将它们传递给 javascript。

我的疑问是，在 .php 文件中编写 javascript 然后包含它们有什么缺点吗？

我的理解是，当页面加载时，它会调用 javascript 文件并并行执行 php 部分。所以我们写了onload函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T07:46:40.577

如果您想在服务器端使用 PHP 将多个 Javascript 文件编译为一个，您可以执行以下操作：

```
<?php
// script.js
header('Content-Type: text/javascript'); // Tell browser to treat file as Javascript

$files  = array(
    'script-1.js',
    'script-2.js',
    'script-3.js'
);

foreach($files as $file){
    // Import each file
    echo file_get_contents($file).PHP_EOL;
} 
```

然后，在您的页面中，只需引用该文件，就好像它是一个 Javascript 文件一样：

```
...
<script src="script.php"></script>
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T07:43:06.197

大多数浏览器可以使用 2 个或更多同时连接来加载资源。因此，将 javascript 保存在单独的文件中可能允许浏览器充分利用所有连接。您应该`<script>`在 HTML 中尽可能晚地包含这些标签，以便在任何 JS 开始加载之前编写页面的内容。

使用 PHP 的一个优点是压缩 JS 文件以减小它们的大小。

如果 javascript 文件的大小很小，比如 < 100 KB，那么在一个 PHP 脚本中包含多个文件可能会更快。但是如果 javascript 文件更大，比如 500 KB，将它们分开可能会更快。

实验和调整将帮助您找到答案。这里没有普遍的真理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T08:10:40.097

从 php 加载 js 文件的问题是您正在增加响应的大小，因为您的页面将在浏览器上缓慢呈现。另一方面，如果浏览器加载您的 js 文件，浏览器会发送不同的 js 文件请求，因此如果您不希望初始页面加载缓慢，请不要将 js 放入 php.ini 中。

如果您想加快 js 文件的加载速度，请执行以下操作

1.  [使用javascriptCompressor](http://javascriptcompressor.com/)或[jsmini](http://www.jsmini.com/)等工具缩小所有 js 文件
2.  将这些压缩文件放在其他支持cdn的服务器上，您可以在一些免费的cdn上免费托管您的文件，从cdn加载总是更快，浏览器可以一次下载多个文件

3.  从 google cdn url 加载 jquery 或其他库之类的文件，或者各个站点使用过期标头让浏览器长时间保留您的 js 文件，这样它就不会在非常请求时加载

如果您遵循这些技术，您的页面将加载得更快

# c# - CLR 如何确定对象等效性？

> ID：13539327
> 
> 赞同：0
> 
> 时间：2012-11-24T07:40:13.317
> 
> 标签：c#, oop, object, clr

在 C# 等面向对象的语言中，CLR 如何区分具有相同值的相同类型的对象？

例如：

```
class Foo 
{
    public string name {get; set;}

    public foo(string name)
    { 
        this.Name = name;
    }
}

class Bar
{
    public void Main()
    {
        Foo foo1 = new Foo("Jim"); //This foo is named "Jim."
        Foo foo2 = new Foo("Jim"); //So is this one.

        bool areEqual = (foo1 == foo2); //How is the CLR determining equivalence?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:43:00.627

在许多 OO 语言（包括 C#，尽管行为可以重载*）中，`==`运算符检查对每个对象的引用是否相等，而不是对象的内容。

因此，例如，会发生这种事情：

```
Foo foo1 = new Foo("Jim");
// The Foo pointed to by foo1 is stored at memory location 0x47008
Foo foo2 = new Foo("Jim");
// The Foo pointed to by foo2 is stored at memory location 0x57008

bool areEqual = (foo1 == foo2);
// areEqual is false, as the comparison being made is 0x47008 == 0x57008 
```

除非显式重载，否则这是 C# 中所有对象的行为。一个值得注意的例外是`string`类型，它重载了*`==`以实际比较字符串的内容。一个反例是 Java，它*不允许*运算符重载。在 Java 中比较`String`s 的正确方法实际上是使用`string1.equals(string2)`.

*：*重载*，而不是*覆盖*（重要）。请参阅 Jon Skeet 的评论。

# ruby-on-rails - SOAPAction 为空

> ID：13539331
> 
> 赞同：0
> 
> 时间：2012-11-24T07:40:27.767
> 
> 标签：ruby-on-rails, soap

我在 Mac 和 Linux 上运行相同的 Web 应用程序。

在 Mac 上，我使用的是 Savon 0.7.6，并且网络应用程序运行良好；应用程序发起一个 SOAP 请求，如下所示：

```
client = Savon::Client.new("http://pvwatts.nrel.gov/PVWATTS.asmx?WSDL")

req = prep_request(@locationId, @dc_rating, @tilt, @azimuth, @derate, @array_type, @cost)

response = client.get_pvwatts{|soap| soap.input = "GetPVWATTS"; soap.body = req }
rdata = response.to_hash 
```

这导致以下请求：

```
Retrieving WSDL from: http://pvwatts.nrel.gov/PVWATTS.asmx?WSDL
SOAP request: http://pvwatts.nrel.gov/PVWATTS.asmx
SOAPAction: http://pvwatts.nrel.gov/GetPVWATTS, Content-Type: text/xml;charset=UTF-8
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:wsdl="http://pvwatts.nrel.gov" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Body><wsdl:GetPVWATTS><wsdl:derate>0.8</wsdl:derate><wsdl:latitude>-99.0</wsdl:latitude><wsdl:pwrdgr>-0.005</wsdl:pwrdgr><wsdl:cost>0.1</wsdl:cost><wsdl:locationID>23234</wsdl:locationID><wsdl:inoct>45.0</wsdl:inoct><wsdl:mode>0</wsdl:mode><wsdl:key><key></wsdl:key><wsdl:azimuth>230</wsdl:azimuth><wsdl:tilt>20</wsdl:tilt><wsdl:DCrating>1</wsdl:DCrating><wsdl:longitude>0.0</wsdl:longitude></wsdl:GetPVWATTS></env:Body></env:Envelope> 
```

请注意，SOAPAction 字段已填充

在 Linux 上，我使用 savon 版本 1.2.0，语法如下：

```
client = Savon::Client.new do
    wsdl.document = "http://pvwatts.nrel.gov/PVWATTS.asmx?WSDL"
end

req = prep_request(@locationId, @dc_rating, @tilt, @azimuth, @derate, @array_type, @cost)

response = client.request :wsdl, "GetPVWATTS" do
    soap.body = req
end

rdata response.to_hash 
```

这会导致以下错误：

```
SOAP request: http://pvwatts.nrel.gov/PVWATTS.asmx
Content-Length: 750, Content-Type: text/xml;charset=UTF-8, SOAPAction: ""
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ins0="http://pvwatts.nrel.gov" xmlns:wsdl="http://pvwatts.nrel.gov"><env:Body><ins0:GetPVWATTS><wsdl:inoct>45.0</wsdl:inoct><wsdl:tilt>20</wsdl:tilt><wsdl:cost>0.1</wsdl:cost><wsdl:locationID>23234</wsdl:locationID><wsdl:mode>0</wsdl:mode><wsdl:DCrating>1</wsdl:DCrating><wsdl:key><key></wsdl:key><wsdl:pwrdgr>-0.005</wsdl:pwrdgr><wsdl:latitude>-99.0</wsdl:latitude><wsdl:azimuth>180</wsdl:azimuth><wsdl:longitude>0.0</wsdl:longitude><wsdl:derate>0.8</wsdl:derate></ins0:GetPVWATTS></env:Body></env:Envelope>
SOAP response (status 500):
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><faultcode>soap:Client</faultcode><faultstring>Server did not recognize the value of HTTP Header SOAPAction: .</faultstring><detail /></soap:Fault></soap:Body></soap:Envelope>
Completed 500 Internal Server Error in 1065ms

Savon::SOAP::Fault ((soap:Client) Server did not recognize the value of HTTP Header SOAPAction: .): 
```

请注意，未填充 SOAPAction 字段。

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:19:47.097

我想出了解决方案；我的工作代码如下：

```
response = client.request :wsdl, "get_pvwatts" do
  soap.body = req
end

rdata = response.to_hash 
```

# sql - ORACLE：一次更新多个列

> ID：13539334
> 
> 赞同：14
> 
> 时间：2012-11-24T07:40:52.623
> 
> 标签：sql, oracle

我正在尝试使用相同的更新语句更新两列可以完成吗？

```
IF V_COUNT = 9 THEN
        UPDATE INVOICE
        SET INV_DISCOUNT = DISC3 * INV_SUBTOTAL
                , INV_TOTAL = INV_SUBTOTAL - INV_DISCOUNT       
        WHERE INV_ID = I_INV_ID;
        DBMS_OUTPUT.PUT_LINE ('YOU QUALIFY FOR A DISCOUNT OF 30%'); 
```

问题是`INV_TOTAL`没有更新，只有**inv_discount**

**DISC3 = 0.3** IE 30% 折扣，所以 sub_total 将乘以 0.3，这就是 INV_discount 的值

INV_TOTAL = sub_total - 折扣

```
 INV_ID|INV_DATETIME                  |INV_SUBTOTAL|INV_DISCOUNT|  INV_TOTAL
----------|------------------------------|------------|------------|-----------
       100|14-NOV-12 09.40.06.918000     |        $.00|        $.00|       $.00
       101|18-MAR-12 10.03.00.000000     |        $.00|        $.00|       $.00
       102|18-MAR-12 10.15.00.000000     |        $.00|        $.00|       $.00
       103|18-MAR-12 10.55.00.000000     |      $80.00|       $8.00|     $72.00
       104|18-MAR-12 10.38.00.000000     |        $.00|        $.00|       $.00
       105|12-JUN-12 15.15.00.000000     |        $.00|        $.00|       $.00
       106|06-AUG-12 12.13.00.000000     |        $.00|        $.00|       $.00
       107|04-MAY-12 09.15.00.000000     |        $.00|        $.00|       $.00
       108|29-NOV-12 13.16.00.000000     |      $25.00|       $5.00|     $22.50
       109|18-MAR-12 10.37.00.000000     |      $50.00|      $15.00|     $45.00 
```

**108**假设是 25 的 20%，折扣金额正确但 inv_total 不正确，应该是 $20，而不是 $22.50

**109**假设是 50 的 30% 折扣金额是正确的，但 inv_total 应该是 $35

**103**计算罚款，即10%折扣

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-24T10:11:45.863

在同一个语句中更新多个列是完全可能的，实际上您的代码正在这样做。那么为什么看起来“INV_TOTAL 没有更新，只有 inv_discount”？

因为您正在使用 INV_DISCOUNT 更新 INV_TOTAL，并且数据库将使用 INV_DISCOUNT 的*现有*值，而不是您将其更改为的值。所以恐怕你需要做的是：

```
UPDATE INVOICE
   SET INV_DISCOUNT = DISC1 * INV_SUBTOTAL
     , INV_TOTAL    = INV_SUBTOTAL - (DISC1 * INV_SUBTOTAL)     
WHERE INV_ID = I_INV_ID; 
```

Perhaps that seems a bit clunky to you. It is, but the problem lies in your data model. Storing derivable values in the table, rather than deriving when needed, rarely leads to elegant SQL.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:08:07.677

我想这里的问题是您正在更新 INV_DISCOUNT 并且 INV_TOTAL 使用 INV_DISCOUNT。这就是这里的问题。您可以使用更新语句的返回子句来使用新的 INV_DISCOUNT 并使用它来更新 INV_TOTAL。

这是一个通用示例，如果这解释了我提到的观点，请告诉我

```
CREATE OR REPLACE PROCEDURE SingleRowUpdateReturn
IS
    empName VARCHAR2(50);
    empSalary NUMBER(7,2);      
BEGIN
    UPDATE emp
    SET sal = sal + 1000
    WHERE empno = 7499
    RETURNING ename, sal
    INTO empName, empSalary;

    DBMS_OUTPUT.put_line('Name of Employee: ' || empName);
    DBMS_OUTPUT.put_line('New Salary: ' || empSalary);
END; 
```

# haskell - 第一个函子定律是否遵循第二个？

> ID：13539335
> 
> 赞同：8
> 
> 时间：2012-11-24T07:40:55.800
> 
> 标签：haskell, functor

根据[这个问题](https://stackoverflow.com/q/8305949/977128)，Haskell 中的第 1 条暗示了第 2 函子定律：

```
1st Law: fmap id = id
2nd Law : fmap (g . h) = (fmap g) . (fmap h) 
```

反过来是真的吗？从第二定律开始，设置`g`等于`id`，我可以推理以下并得到第一定律吗？

```
fmap (id . h) x = (fmap id) . (fmap h) x
fmap h x = (fmap id) . (fmap h) x
x' = (fmap id) x'
fmap id = id 
```

在哪里`x' = fmap h x`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T07:59:29.700

不

```
data Break a = Yes | No

instance Functor Break where
   fmap f _ = No 
```

显然第二定律成立

```
 fmap (f . g) = const No = const No . fmap g = fmap f . fmap g 
```

但是，第一定律没有。您的论点的问题并非都是`x'`形式`fmap f x`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-24T07:59:36.540

不，它只在一个方向上起作用。

考虑这个`Functor`例子：

```
data Foo a = Foo Int a

instance Functor Foo where
    fmap f (Foo _ x) = Foo 5 (f x) 
```

它满足第二定律，但不满足第一定律。

证明中的最后一步是无效的——你证明了`fmap id x'`= `x'`，但这仅限于首先`x'`返回的 s ，而`fmap`不是任意值。

# java - 将对象转换为`Java`中的字典

> ID：13539338
> 
> 赞同：0
> 
> 时间：2012-11-24T07:41:12.030
> 
> 标签：java, collections

将对象转换`XMLRPC`为字典`Java`

我有一个对象`obj={6=Coffee, 2=[Cocoa,icecream], 1=Chocolate}`，我想将其转换为字典，以便我可以将键作为 6、2、1 和值“咖啡”、“可可”和“巧克力”。我怎样才能做到这一点 ？任何指针将不胜感激。

对象 obj 由 XMLRPC execute("execute", params) 的方法返回；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:50:40.970

在 Java 中，“字典”被称为`Map`s。请参阅 中的各种接口和实现[`java.util`](http://docs.oracle.com/javase/7/docs/api/java/util/package-summary.html)。您可能想要的主界面是[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html). 您想要哪种实现（[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)等）将取决于您如何使用它。你如何将你开始的东西转换成一个`Map`完全取决于你必须开始的东西。

# python - Python 正则表达式：如何指定可选匹配（对于可能为空的子表达式）？

> ID：13539339
> 
> 赞同：1
> 
> 时间：2012-11-24T07:41:47.217
> 
> 标签：python, regex, string

我需要匹配以下输入集：

```
foo_abc_bar  
foo_bar 
```

并得到“abc”或空字符串作为结果。

所以这是我写的正则表达式：

`r'foo_(abc|)[_|]bar'`

但由于某种原因，这与我给出的第二个字符串不匹配。

经过进一步检查，我发现它`[_|]`与空字符串不匹配。

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:45:16.470

要使其成为`abc_`可选，您可以使用[问号运算符](http://docs.python.org/2/library/re.html#regular-expression-syntax)：

```
(abc_)? 
```

因此，整个正则表达式变为：

```
r'foo_(abc_)?bar' 
```

使用此正则表达式，第二个下划线（如果存在）将成为捕获组的一部分。如果您不希望这样，您可以在匹配后删除它`.rstrip('_')`或使用稍微复杂的正则表达式：

```
r'foo_(?:(abc)_)?bar' 
```

> 我发现它`[_|]`与空字符串不匹配。

这是正确的。方括号表示一个字符组。将`[_|]`完全匹配一个下划线或一个垂直条，仅此而已。换句话说，当竖线出现在字符组中时，它就失去了它的特殊含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:44:55.027

如果你想要这样的字符串模式

```
xxx_xxx_xxx
xxx_xxx 
```

那么你需要

```
([A-Za-z]{3})((_[A-Za-z]{3})+)? 
```

但这也可以

```
r'foo(_abc)?_bar' 
```

`?`表示可选（*可能匹配也可能不匹配*）。

# php - 已存在记录检查的逻辑，但仅在更新表单值的情况下

> ID：13539345
> 
> 赞同：2
> 
> 时间：2012-11-24T07:43:00.193
> 
> 标签：php, mysql, sql

我正在开发一个名为county manager的模块，我在检查counties mysql表中已经存在的县及其国家时遇到了问题。

数据库表 ![县表](../Images/4b06cca43b5f844b57939fb0baaa786a.png)

让我解释

***添加页面*** 在添加页面中，我有 2 个字段（检查屏幕截图） ![添加页面](../Images/86c420c02adb76705f29af851c69d3be.png)

这是我在表格中保存县的代码

```
$country = stripslashes($_POST["country"]);
$county_name = stripslashes($_POST["county_name"]);

// County Already Exist Check
$sql = "SELECT county_id FROM counties WHERE country='$country' AND county_name='$county_name' LIMIT 1";
$query = $mysql->query($sql);

if($mysql->rowCount($query) > 0)
{
    header("location:counties_add.php?type=warning&msg=" .urlencode("County With This Country Already Exist"));
    exit();
}

$sql = "INSERT INTO ". TABLE_COUNTIES ."";
$sql .= "(country, county_name, datecreated, datemodified) VALUES";
$sql .= "('$country', '$county_name', now(), now())";
$query = $mysql->query($sql);

$msg = "County Added Successfully";
header("location:counties_view.php?type=success&msg=" .urlencode($msg));
exit(); 
```

在添加页面中，它在插入记录之前成功检查（与国家一起添加的县是否已经存在于表中）

但它在我的编辑页面中不起作用，或者您可以说我无法找到如何检查它的逻辑。

***编辑页面***

在下面查看我的编辑页面 ![编辑页面](../Images/888d5fe38ea6f8e5944d8dfab8380b39.png)

这是编辑页面的代码

```
<!-- Form Starts -->
<form id="myform" name="myform" method="post" action="counties_edit_process.php" accept-charset="utf-8">

<!-- Widget Starts -->
<div class="widget">
    <div class="title js_opened">
        <div class="icon"><img src="themes/<?php echo ADMIN_PANEL_THEME; ?>/images/icons/navigation/counties<?php echo $retina_suffix; ?>.png" width="24" height="24" alt="" /></div>
        <span>Fill The Fields Marked With *</span>
    </div>
    <div class="content">
        <div class="form_row first">
            <label>Country</label>
            <div class="form_right">
                <select name="country">
                    <option value="">Please Choose An Option</option>
                    <option value="England" <?php if ($dbData["country"]=="England") echo "selected=\"selected\""; ?> >England</option>
                    <option value="Scotland" <?php if ($dbData["country"]=="Scotland") echo "selected=\"selected\""; ?> >Scotland</option>
                    <option value="Wales" <?php if ($dbData["country"]=="Wales") echo "selected=\"selected\""; ?> >Wales</option>
                </select>
            </div>
            <div class="clear"></div>
        </div>
        <div class="form_row last">
            <label>Country Name</label>
            <div class="form_right"><input type="text" name="county_name" maxlength="25" value="<?php echo $dbData["county_name"]; ?>" /></div>
            <div class="clear"></div>
        </div>
    </div>
</div>
<!-- Widget Ends -->

<div class="form_buttons">
    <input type="submit" name="submit" value="Update" />&nbsp;&nbsp;<a href="counties_view.php">Back To View</a>
    <input type="hidden" name="country_existing" value="<?php echo $dbData["country"]; ?>" />
    <input type="hidden" name="county_name_existing" value="<?php echo $dbData["county_name"]; ?>" />
    <?php $form->passValuesToNextPage("GET"); ?>
</div>
</form>
<!-- Form Ends --> 
```

这是我在编辑页面中保存/更新记录的代码

```
$id = stripslashes($_POST["id"]);

// For Already Exist Checks
$country = stripslashes($_POST["country"]);
$country_existing = stripslashes($_POST["country_existing"]);
$county_name = stripslashes($_POST["county_name"];
$county_name_existing = stripslashes($_POST["county_name_existing"]);

// County Already Exist Check

    <--- Issue is here in the sql to check for already exist. Please read the end of the post to understand my question  --->

$sql = "SELECT county_id FROM ". TABLE_COUNTIES ." WHERE (county_name='$county_name' AND county_name!='$county_name_existing') AND (country='$country' AND country!='$country_existing') LIMIT 1";
$query = $mysql->query($sql);

if($mysql->rowCount($query) > 0)
{
    header("location:counties_edit.php?id=$id&case=edit&type=warning&msg=" .urlencode("County With This Country Already Exist"));
    exit();
}

$sql = "UPDATE ". TABLE_COUNTIES ." SET";
$sql .= " country='". $country ."',";
$sql .= " county_name='". $county_name ."',";
$sql .= " datemodified=now()";
$sql .= " WHERE county_id=$id";
$query = $mysql->query($sql);

header("location:counties_view.php?type=success&msg=" .urlencode("County Updated Successfully"));
exit(); 
```

我无法编写将在编辑/更新记录的情况下检查现有记录的 sql 逻辑，尽管我已经尝试在包含旧国家名称的表单中传递 2 个隐藏变量（检查上面的编辑页面代码）和县名，以便我可以在 sql 中检查比较它们以检查记录是否已经存在

我也可以在这里使用相同的添加页面逻辑，即

```
$sql = "SELECT county_id FROM counties WHERE country='$country' AND county_name='$county_name' LIMIT 1"; 
```

但问题是，如果我不更新 2 个值，即编辑页面中的国家和县，它仍然认为该记录已经存在于表中。我需要处理只有当其中一个或两个表单字段值都更新时它才应该检查已经存在的记录的方面。

请帮助我如何实现仅当表单中的值之一或两者都更新时才检查现有记录的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:01:45.513

**在编辑部分：**
尝试比较已编辑记录的 ID，而不是比较旧/新名称，例如

```
$sql = "SELECT county_id FROM counties WHERE country='$country' AND county_name='$county_name' AND country_id !='$id' LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:10:51.910

我个人会在国家和县名上添加一个复合唯一索引

```
ALTER TABLE `your_table_name` ADD UNIQUE (
`country` ,
`county_name`
); 
```

# javascript - div中的自动滚动文本

> ID：13539351
> 
> 赞同：1
> 
> 时间：2012-11-24T07:43:49.677
> 
> 标签：javascript, jquery, css, scroll, jsfiddle

我看到已经发布了一个堆栈问题：

[问题]：< [div 中的文本 - 使用 jQuery 自动滚动 - 里面的 jsFiddle](https://stackoverflow.com/questions/11590333/text-in-div-automated-scrolling-with-jquery-jsfiddle-inside) >

我补充的问题是，是否可以在每个段落中的文本或分隔的 div 突出显示（粗体、背景颜色等）一旦它们在主视图中，而 p 或 div 离开/进入滑块框是褪色的?

因此，就像引用的 jsfiddle 一样，您有一个 div 容器，其中包含 4、5、6、... div 或 p，一个 div 或 p 可见，而其上方和下方的 div 或 p 则只有一半可见（褪色），而剩余的溢出被隐藏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:49:35.573

如果我理解正确，您正在寻找这样的效果：

[http://jsfiddle.net/2RRWS/](http://jsfiddle.net/2RRWS/)

我的代码采用 html 结构，如：

```
<div id="scrollContainer">
   <p>Some text</p>
   <p>More text</p>
   ...
</div> 
```

和一些 CSS 来适当地设置包含 div 的宽度/高度。它还为“变暗”和“突出显示”段落假设了一些类。

可能有一种更清洁的方法可以做到这一点，但这只是我拼凑起来的，它似乎有效，所以......

```
var $container = $("#scrollContainer"),
    $ps = $container.find("p"),
    containerHeight = $container.height(),
    contentHeight = 0,
    scrollTop = 0;

// figure out the height of the content
$ps.each(function() {
    contentHeight += $(this).outerHeight();
});

// add some blank space at the beginning and end of the content so that it can
// scroll in from the bottom
$("<div></div>").css("height", 400).appendTo($container).clone().prependTo($container);

setInterval(function() {
    if (paused)
        return;
    // if we've gone off the end start again
    if (scrollTop > contentHeight + containerHeight)
        scrollTop = 0;
    // scroll up slightly
    $container.scrollTop(scrollTop++);

    $ps.removeClass("highlighted")   // for each paragraph...
       .addClass("dimmed")           // dim it
       .each(function() {            // unless it is in view
           var $this = $(this),
               top = $this.position().top,
               height = $this.height();
           if (top > 0 && top + height < containerHeight)
                    $(this).addClass("highlighted").removeClass("dimmed");
    });
}, 20);

$container.hover(function() {
    paused = true;
}, function() {
    paused = false;
}); 
```

编辑：更新以根据评论实现“暂停”功能。[http://jsfiddle.net/2RRWS/8/](http://jsfiddle.net/2RRWS/8/)

# django - django 模型表单过滤器查询集

> ID：13539358
> 
> 赞同：3
> 
> 时间：2012-11-24T07:44:56.757
> 
> 标签：django, django-models, django-forms

我有以下模型：

```
class Article(models.Model):

   title = models.CharField()
   description = models.TextField()
   author = models.ForeignKey(User)

class Rating(models.Model):

    value = models.IntegerField(choices=RATING_CHOICES)
    additional_note = models.TextField(null=True, blank=True)
    from_user = models.ForeignKey(User, related_name='from_user')
    to_user = models.ForeignKey(User, related_name='to_user')
    rated_article = models.ForeignKey(Article, null=True, blank=True)
    dtobject = models.DateTimeField(auto_now_add=True) 
```

基于上述模型，我创建了一个模型表单，如下：

模型形式：

```
class RatingForm(ModelForm):

     class Meta:
          model = Rating
          exclude = ('from_user', 'dtobject') 
```

不包括`from_user`，因为`request.user`是`from_user`.

表单呈现良好，但在`to_user`下拉字段中，作者也可以评价自己。所以我希望 current_user 的名称填充在下拉字段中。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T08:06:55.367

覆盖`__init__`以从`to_user`选择中删除当前用户。

更新：更多解释

ForeignKey 使用`ModelChoiceField`其选择是查询集。因此，`__init__`您必须从`to_user`的查询集中删除当前用户。

更新 2：示例

```
class RatingForm(ModelForm):
    def __init__(self, current_user, *args, **kwargs):
        super(RatingForm, self).__init__(*args, **kwargs)
        self.fields['to_user'].queryset = self.fields['to_user'].queryset.exclude(id=current_user.id)

    class Meta:
        model = Rating
        exclude = ('from_user', 'dtobject') 
```

现在在您创建对象的视图中，像这样作为关键字参数`RatingForm`传递。`request.user``current_user`

```
form = RatingForm(current_user=request.user) 
```

# android - ActionBarSherlock 中刷新菜单项动画

> ID：13539359
> 
> 赞同：10
> 
> 时间：2012-11-24T07:45:10.837
> 
> 标签：android, animation, actionbarsherlock

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case android.R.id.home:
        return true;

    case R.id.searchIcon:
        return true;

    case R.id.startRefresh:
        refreshItem = item;
        refresh();
        return true;
    case R.id.stopRefresh:

        if (refreshItem != null && refreshItem.getActionView() != null) {
            refreshItem.getActionView().clearAnimation();
            refreshItem.setActionView(null);
        }
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void refresh() {
    if (FeedActivity.this != null) {
        /*
         * Attach a rotating ImageView to the refresh item as an ActionView
         */
        LayoutInflater inflater = (LayoutInflater) FeedActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        ImageView iv = (ImageView) inflater.inflate(
                R.layout.refresh_action_view, null);
        Animation rotation = AnimationUtils.loadAnimation(
                FeedActivity.this, R.anim.clockwise_refresh);
        rotation.setRepeatCount(Animation.INFINITE);
        iv.startAnimation(rotation);
        refreshItem.setActionView(iv);
    }
} 
```

**点击前：**

![在此处输入图像描述](../Images/3f89775d741ebba441a0fffce71db643.png)

**点击后：**

![在此处输入图像描述](../Images/094292513e5f2d20cb9fc833a5c9f782.png)

这里图标正在动画（旋转）。

**问题：**

为什么它向左移动？

一旦它向左移动，图标变得不可点击，奇怪的是设备后退按钮也不起作用

**编辑：**

在此答案下方的评论中：

[ActionItem 的动画图标](https://stackoverflow.com/questions/9731602/animated-icon-for-actionitem#answers-header)

Jake Warton 说，如果您为菜单项使用大小正确的方形图标，对于遇到同样问题的人来说，您不会遇到这种奇怪的行为。

但我在使用 mdpi drawables 的设备上使用 32x32 图像。如前所述，它必须起作用:(

谢谢你

**编辑：**

**refresh_action_view.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/Widget.Sherlock.ActionButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_refresh" /> 
```

**我在我的应用程序中使用的自定义样式**

```
<style name="My_solid_ActionBar" parent="@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/ab_solid_My</item>
    <item name="backgroundStacked">@drawable/ab_stacked_solid_My</item>
    <item name="backgroundSplit">@drawable/ab_bottom_solid_My</item>
    <item name="progressBarStyle">@style/My_ProgressBar</item>
    <item name="android:background">@drawable/ab_solid_My</item>
    <item name="android:backgroundStacked">@drawable/ab_stacked_solid_My</item>
    <item name="android:backgroundSplit">@drawable/ab_bottom_solid_My</item>
    <item name="android:progressBarStyle">@style/My_ProgressBar</item>
</style> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T00:43:20.563

问题是您没有处理`onCreateOptionsMenu()`. `ActionBar`我在开源应用程序中看到的刷新动画的基本逻辑，例如[Andlytics](https://github.com/AndlyticsProject/andlytics)（我自己也在项目中使用过），是实现一个`boolean`标志`onCreateOptionsMenu()`来决定是否显示刷新动画。

您可以像这样实现它：当您的`refresh()`方法被调用时，它将`boolean` `isRefreshing`标志设置为 true 并调用`inValidateOptionsMenu()`“幕后”调用`onCreateOptionsMenu()`来启动动画：

膨胀菜单`onCreateOptionsMenu(...)`：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    menu.clear();
    super.onCreateOptionsMenu(menu, inflater);
    //inflate a menu which shows the non-animated refresh icon
    inflater.inflate(R.menu.my_ab_menu, menu);

    if (isRefreshing) {
        //if we're refreshing, show the animation
        MenuItem item = menu.findItem(R.id.refreshMenuItem);
        item.setActionView(R.layout.action_bar_indeterminate_progress);
        ImageView iv = (ImageView) item.getActionView().findViewById(R.id.loadingImageView);
        ((AnimationDrawable) iv.getDrawable()).start();
    }
} 
```

像这样开始动画：

```
 public void refresh(){
        isRefreshing = true;
        inValidateOptionsMenu();
    } 
```

如果您希望用户在点击刷新图标时启动动画，请执行以下操作`onOptionsItemSelected()`：

```
case R.id.refreshMenuItem:
    isRefreshing = true;
    item.setActionView(R.layout.action_bar_indeterminate_progress);
    ImageView iv = (ImageView) item.getActionView().findViewById(R.id.loadingImageView);
    ((AnimationDrawable) iv.getDrawable()).start();
    //... 
```

停止动画调用：

```
isRefreshing = false;
invalidateOptionsMenu(); 
```

这段代码来自 a`Fragment`所以你可能需要调整 if for an `Activity`，但我认为它传达了基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:11:48.767

我尝试了您使用的完全相同的代码，它对我来说很好。唯一可能不同的是两件事：

1） refresh_action_view 布局（这是我的比较）：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    style="?attr/actionButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_menu_refresh" /> 
```

2）您的操作栏的显示选项（这是我的styles.xml用于比较）。

```
<resources>

<style name="AppTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/Widget.ActionBar</item>
    <item name="actionBarStyle">@style/Widget.ActionBar</item>
</style>

<style name="Widget.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="android:displayOptions">showHome|useLogo|showCustom</item>
    <item name="displayOptions">showHome|useLogo|showCustom</item>
</style>

</resources> 
```

你也可以分享你的吗？

# asp.net - 如何在 asp.net 中根据日期阻止 Web 应用程序？

> ID：13539364
> 
> 赞同：0
> 
> 时间：2012-11-24T07:47:02.977
> 
> 标签：asp.net

我在 asp.net 中为我的客户开发了一个 Web 应用程序。该应用程序已托管在 Web 服务器中。如果我的客户端不满足我的要求，我想根据日期阻止从服务器运行的 Web 应用程序。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:06:28.050

您可以使用`Application_BeginRequest`来进行测试：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
   string cTheFile = HttpContext.Current.Request.Path;
   string sExtentionOfThisFile = System.IO.Path.GetExtension(cTheFile);
   // here you can check what file you wish to cut, ether by file, ether by extention
   if (sExtentionOfThisFile.Equals(".aspx", StringComparison.InvariantCultureIgnoreCase))
   {
     // and here is the time limit.
     if(DateTime.UtcNow > MaxDateToUse)
     {
        HttpContext.Current.Response.TrySkipIisCustomErrors = true;
        HttpContext.Current.Response.StatusCode = 403;
        HttpContext.Current.Response.End();
        return ;    
    }    
  }
} 
```

以太在 BasePage 中添加相同的测试，为所有页面使用该 BasePage，并按照我在此答案中描述的那样进行测试：[Make an asp .net web app offline](https://stackoverflow.com/questions/13064360/make-an-asp-net-web-app-offline/13064591#13064591)

相对：
[使网站仅在指定时间内可用](https://stackoverflow.com/questions/9870829/making-a-web-site-available-only-for-a-specified-time/9870918#9870918)
[关闭 .net 服务中的所有功能](https://stackoverflow.com/questions/12777762/switch-off-the-all-functions-in-net-service/12777952#12777952)
[使 asp .net Web 应用程序脱机](https://stackoverflow.com/questions/13064360/make-an-asp-net-web-app-offline/13064591#13064591)

# sql - SQL DML 查询 AVG 和 COUNT

> ID：13539369
> 
> 赞同：-1
> 
> 时间：2012-11-24T07:47:42.710
> 
> 标签：sql

我是 SQL 的初学者，我正在尝试创建一个查询。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
 ); 
```

查询是：每个国家在该国医院工作的医生人数的平均值是多少（第 1 列：每个国家，第 2 列：平均值）？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:00:59.547

您首先需要编写一个查询每个医院的医生数

```
select w.hid, count(w.ic)
from work w
group by w.hid; 
```

根据该查询，您可以检索每个国家/地区的平均医生人数：

```
with doctor_count as (
  select w.hid, count(w.ic) as cnt
  from work w
  group by w.hid
)
select h.country, avg(dc.cnt)
from hospital h
  join doctor_count dc on h.hid = dc.hid
group by h.country; 
```

如果您有一个不支持公用表表达式的旧 DBMS，则可以将上述内容重写为：

```
select h.country, avg(dc.cnt)
from hospital h
  join (
    select w.hid, count(w.ic) as cnt
    from work 
    group by w.hid
  ) dc on h.hid = dc.hid; 
```

这是一个 SQLFiddle 演示：[http ://sqlfiddle.com/#!12/9ff79/1](http://sqlfiddle.com/#!12/9ff79/1)

顺便说一句：存储`date_of_birth`为整数是一个糟糕的选择。您应该使用真实的`DATE`列。

and`work`是 SQL 中的保留字。您不应该将其用作表名。

# mysql - 我可以在任何数据库中导入 .DMP 文件吗？没有供应商依赖？

> ID：13539371
> 
> 赞同：0
> 
> 时间：2012-11-24T07:48:21.277
> 
> 标签：mysql, database, oracle

我有数据库 .DMP 文件。

如何找到其各自的数据库以及是否可以使用任何数据库导入它，无论是 MySQL 还是 Oracle

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:42:52.127

如果 .DMP 文件是指由 Oracle`exp`实用程序生成的 Oracle 导出，则不能将其与任何其他 DBMS 一起使用。它是 Oracle 专有格式。

但是重新阅读您的问题后，我发现您甚至不知道是哪个数据库生成了您的文件。在这种情况下，我认为你可能不走运。你看，.DMP 只是一个约定，它不是一个命名标准。您可以尝试`strings`反对它：这可能会为您提供足够的信息来判断它来自哪个数据库，但您可能只能将它导入到同一个数据库中。

一个例外是它是 MySQL 转储，因为它会生成 SQL 语句的文本文件。所以你可以将它导入到另一种风格的数据库中，尽管你可能需要将 SQL 命令翻译成不同的方言，

# cassandra - 如何在 PHPcassa 中生成 UUID

> ID：13539373
> 
> 赞同：1
> 
> 时间：2012-11-24T07:49:11.077
> 
> 标签：cassandra, uuid, phpcassa

我一直在 google 和 stackoverflow 搜索有关使用 PHPcassa 生成 UUID 的教程。我是一个菜鸟，我似乎无法弄清楚这一点。我正在使用最新的 PHPcassa 版本，即这个 URL [http://thobbs.github.com/phpcassa/](http://thobbs.github.com/phpcassa/)

谁能给我一个关于如何生成的逐步示例？

非常感谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:20:13.917

您可以使用 phpcassa 库中的 UUID 类。例如：

```
use phpcassa\UUID;
...
$my_uuid = UUID::uuid1(); 
```

如果您有 UUID 比较器，您可能还想查看[这些示例。](https://github.com/thobbs/phpcassa/blob/master/examples/alternate_formats.php)

# java - 如何在命令行中使用一组“名称”运行我的 Java 程序？

> ID：13539376
> 
> 赞同：1
> 
> 时间：2012-11-24T07:49:43.650
> 
> 标签：java, cmd

我对所有与 Java 相关的编程都很陌生。对于学校作业，我使用 BlueJ 创建了我的 Java 应用程序。显然，应用程序应该能够使用以下行从命令提示符运行：

```
myapp -compress fileName 
```

老实说，我对如何设置这样的东西一无所知：

*   我的应用程序有一个`Main`类。我应该将其更改为被调用`myapp`吗？
*   我一直在运行我的应用程序`java Main compress filename`。我看到现在我不应该使用`java`密钥。但是，当然，就像现在一样，如果我将其删除，它将无法正常工作。没有它我如何运行应用程序？
*   `compress`我一直使用的论点和`-compress`他们告诉我的论点有区别吗？破折号（**-**）有什么特别之处吗？

查看此页面：[http](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html) ://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html ，似乎坚持要运行我的程序，我确实需要使用`java`密钥。破折号似乎用于称为**选项**的东西- 有标准和非标准。但是，似乎没有办法制作“自定义”（**-compress**）。

所以我的问题是，我怎样才能以上述格式运行我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:52:14.883

创建单行[shell 脚本](http://en.wikipedia.org/wiki/Shell_script)（如果您使用 Unix）或单行[批处理文件](http://en.wikipedia.org/wiki/Batch_file)（如果您使用 Windows）的最简单方法。调用它`myapp`（或`myapp.bat`）并使其启动 Java，并传递适当的参数。

至于`-compress`论点，你`main()`需要一个`argv`. 您需要检查它以确定哪些参数已传递给您的程序。您可以自己编写所有代码（在您的情况下非常容易），也可以使用现有框架： [How to parse command line arguments in Java?](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)

# cocoa - 将 NSPopupButton 的大小调整为其选定的标题

> ID：13539378
> 
> 赞同：3
> 
> 时间：2012-11-24T07:49:58.330
> 
> 标签：cocoa, nspopupbutton, nspopupbuttoncell

我有一个 NSPopupButton，我希望它调整自身大小以适应所选标题。

[NSPopupButton sizeToFit] 不符合我的需要，因为弹出窗口的大小被调整为最大的标题项目而不是当前选定的项目

我已经尝试了多种方法但没有成功，越接近

```
#define ARROW_WIDTH 20
NSDictionary *displayAttributes = [NSDictionary dictionaryWithObjectsAndKeys:[popup font], NSFontAttributeName, nil];
NSSize titleSize = [popup.titleOfSelectedItem sizeWithAttributes:displayAttributes] + ARROW_WIDTH; 
```

但是常量值 ARROW_WIDTH 是一个非常肮脏且容易出错的解决方案。

状态栏上的 TextWrangler 编码组合就像我需要的那样工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T09:47:47.927

我用文本字段处理这些问题的方法是尝试使用您从未添加到视图层次结构中的文本字段调整大小。你在一个你不想重用的对象上调用 sizeToFit，然后用它来确定你的实际控制需要多宽才能适应你需要做的事情。

所以，在伪代码中，你会这样做（假设你使用 ARC，YMMV 用于非 ARC 项目，因为这会泄漏）：

```
NSArray *popupTitle = [NSArray arrayWithObject: title];
NSPopUpButton *invisiblePopup = [[NSPopUpButton alloc] initWithFrame: CGRectZero pullsDown: YES];
// Note that you may have to set the pullsDown bool to whatever it is with your actual popup button.
[invisiblePopup addItemWithTitle: @"selected title here"];
[invisiblePopup sizeToFit];
CGRect requiredFrame = [invisiblePopup frame];
self.actualPopup.frame = requiredFrame; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-16T06:45:20.733

`intrinsicContentSize`对于在子类中具有自动布局覆盖方法的项目`NSPopUpButton`

```
class NNPopUpButton: NSPopUpButton {
    override var intrinsicContentSize: NSSize {
        let fakePopUpButton = NSPopUpButton(frame: NSZeroRect, pullsDown: false)
        fakePopUpButton.addItem(withTitle: title)
        fakePopUpButton.sizeToFit()
        var requiredFrame = fakePopUpButton.frame
        requiredFrame.size.width -= 35 // reserved space for key equivalent
        return requiredFrame.size
    }
} 
```

# jakarta-ee - java.lang.NoSuchMethodException：org.apache.catalina.deploy.WebXml addFilter

> ID：13539380
> 
> 赞同：6
> 
> 时间：2012-11-24T07:50:13.347
> 
> 标签：jakarta-ee, maven, tomcat7

我已经在 tomcat 7.0 中部署了 web 项目（maven）。它曾经部署运行良好。但不知何故，它从昨天开始一直给出错误**java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addFilter**。我试图找到网上的解决方案。但没有一个项目名称成功。甚至重新签出，重新构建，再次删除/配置tomcat。不知道突然出了什么问题，因为相同的配置运行了6个多月。请帮助我找到这个错误的根本原因。完整的堆栈跟踪如下。

```
SEVERE: Parse error in application web.xml file at jndi:/localhost/project-name/WEB-INF/web.xml
java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addFilter
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2681)
    at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2707)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1774)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2930)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1759)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1266)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5103)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1055)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:978)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1329)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:389)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:334)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addFilter
    at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:803)
    at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
    at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-13T07:12:26.080

转到您的`WEB-INf/lib`并删除`catalina.*.jar`，然后重新启动您的 tomcat。

# objective-c - 使用设置为相同宽度的核心图形绘制的线条有时在绘制时大小会有所不同

> ID：13539382
> 
> 赞同：0
> 
> 时间：2012-11-24T07:50:28.020
> 
> 标签：objective-c, ios, drawing, core-graphics

这是在具有相同功能、相同宽度和颜色的 UITableViewCell 中绘制的两条线的图片 ![在此处输入图像描述](../Images/2da3d25fccade76b7e3341b091ddc777.png)

如您所见，底线比另一条线厚很多。

我用于绘图的代码：

```
 [CSDrawing drawLineWithColor:[UIColor blackColor] width:1.0 yPosition:1.0 rect:rect];
    [CSDrawing drawLineWithColor:[UIColor blackColor] width:1.0 yPosition:CGRectGetMaxY(rect) - 3.0 rect:rect]; // draw a line on top and bottom

    +(void)drawLineWithColor:(UIColor *)color width:(CGFloat)width yPosition:(CGFloat)yPosition rect:(CGRect)rect {

          CGContextRef context = UIGraphicsGetCurrentContext();
          CGContextSaveGState(context);

          CGContextMoveToPoint(context, 0.0, yPosition);
          CGContextAddLineToPoint(context, CGRectGetMaxX(rect), yPosition);

          CGContextSetStrokeColorWithColor(context, color.CGColor);
          CGContextSetLineWidth(context, width);

          CGContextStrokePath(context);

          CGContextRestoreGState(context);
     } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T07:59:02.080

问题在于当单元格被重用时，backgroundView 被拉伸以适应单元格的内容。当单元格较大时，像素会被拉伸。这解决了将`contentMode`属性设置为`UIViewContentModeRedraw`

# sublimetext2 - Sublime Text 2 中的键映射 sublimeREPL 命令

> ID：13539387
> 
> 赞同：4
> 
> 时间：2012-11-24T07:51:18.287
> 
> 标签：sublimetext2, keymapping, sublimerepl

我正在尝试为 SublimeREPL 插件命令映射键盘快捷键。查看 SublimeREPL 看起来菜单项命令定义为：

[Default.sublime-commands](https://github.com/wuub/SublimeREPL/blob/master/config/Scala/Default.sublime-commands) { "caption": "SublimeREPL: SBT for open folder", "command": "run_existing_window_command", "args": { "id": "repl_sbt", "file": "config/Scala/Main .sublime-menu" } }

或在

[Main.sublime-menu](https://github.com/wuub/SublimeREPL/blob/master/config/Scala/Main.sublime-menu)

```
 {"command": "repl_open",
                 "caption": "SBT for opened folder",
                 "id": "repl_sbt",
                 "mnemonic": "b",
                 "args": {
                    "type": "subprocess",
                    "encoding": "utf8",
                    "external_id": "scala",
                    "cmd": {"linux": ["sbt"],
                            "osx": ["sbt"],
                            "windows": ["sbt"]},
                    "soft_quit": "\nexit\n",
                    "cwd": "$folder",
                    "cmd_postfix": "\n", 
                    "extend_env": {"osx": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
                                   "linux": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
                                   "windows": {"EMACS": "1"}},
                    "suppress_echo": false, 
                    "syntax": "Packages/Scala/Scala.tmLanguage"
                    }
                } 
```

我尝试在我的 SublimeREPL.sublime-settings 中进行键绑定：

```
[{ "keys": ["super+shift+k"], "command": "run_existing_window_command", "args":
        {
            "id": "repl_sbt",
            "file": "config/Scala/Main.sublime-menu"
        }
}] 
```

但是当我尝试使用它时，Sublime 控制台只会说：

> 选择器没有命令：noop：

如果我将其映射到：

```
[{ "keys": ["super+shift+k"],  "command": "repl_open",
                 "args": {
                    "type": "subprocess",
                    "encoding": "utf8",
                    "external_id": "scala",
                    "cmd": {"linux": ["sbt"],
                            "osx": ["sbt"],
                            "windows": ["sbt"]},
                    "soft_quit": "\nexit\n",
                    "cwd": "$folder",
                    "cmd_postfix": "\n", 
                    "extend_env": {"osx": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
                                   "linux": {"EMACS": "1", "PATH": "{PATH}:/usr/local/bin"},
                                   "windows": {"EMACS": "1"}},
                    "suppress_echo": false, 
                    "syntax": "Packages/Scala/Scala.tmLanguage"
                    }

}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T09:51:17.640

您的第一个键绑定是正确的，应该可以按预期工作。位置在**Preferences -> Key Bindings - User** file。

```
[{ "keys": ["super+shift+k"], "command": "run_existing_window_command", "args":
        {
            "id": "repl_sbt",
            "file": "config/Scala/Main.sublime-menu"
        }
}] 
```

根据您的描述，我怀疑其他一些命令正在劫持 super+shift+k。

```
>>> sublime.log_commands(True) 
```

会让你看到什么时候被调用。

# ruby-on-rails - Ruby On Rails 集成 Apache Solr 来搜索文件

> ID：13539388
> 
> 赞同：1
> 
> 时间：2012-11-24T07:51:33.480
> 
> 标签：ruby-on-rails, apache, sunspot-rails

我需要我的 ROR 应用程序来搜索 pdf、xml、doc、xls 等文件...

我正在使用 apache solr 来执行此操作。我正在向 solr url 发送查询字符串，并能够以 json 格式检索详细信息并在我的应用程序视图中显示文件名。

我需要使文件名可单击以打开这些文件。我不知道如何做到这一点。任何帮助都会很棒。apache solr 中是否有任何选项可以打开这些文件，或者任何 gem 都支持这一点。

在 apache solr 应用程序屏幕中，我也无法打开文件。我不知道 apache solr 中是否有任何选项。这听起来可能很愚蠢，但我是 Apache solr 的新手，不太了解关于so​​lr的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:06:55.930

我对文档搜索知之甚少。如果您使用 sunspot solr gem，则有一个用于文档搜索的附加组件。看看这个：[sunspot_cell](https://github.com/chebyte/sunspot_cell)

# wpf - 如何在 Windows RT 中向 ListView 添加动画？

> ID：13539389
> 
> 赞同：1
> 
> 时间：2012-11-24T07:51:33.167
> 
> 标签：wpf, xaml, windows-runtime

我在 xaml 中定义了以下 ListView：

```
<ListView Grid.Row="1"
                Grid.Column="0"
                Margin="20,0"
                ItemsSource="{Binding UIModel.CommandHistory}" 
                SelectionMode="None" 
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch" >
            </ListView> 
```

当我将多个项目添加到绑定的 ObservableCollection 时，这些项目会一次全部加载。有没有办法让它们加载级联？

# iphone - 通过键值对读取 JSON 对象请求

> ID：13539391
> 
> 赞同：0
> 
> 时间：2012-11-24T07:51:44.353
> 
> 标签：iphone, objective-c, ios, json

我正在尝试以`jSON`键值对的形式读取响应。

当我**通过浏览器手动点击 URL**`jSON`时，我通过对象获取所需的状态代码/响应

`{"status":"0","responseCode":"1021","response":{"message":"Please check your Settings ","data":"2012-11-24, 7:28 am"}}`

当我尝试通过我的应用程序执行此操作时未获得相同的预期响应。当我通过应用程序发送数据时我的代码

```
[dictionnary setObject:@"admin"  forKey:@"username"];
[dictionnary setObject:@"123123" forKey:@"password"];

NSError *error = nil;

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
                                                   options:kNilOptions
                                                     error:&error];

NSString *urlString = @"MY CALL URL";

NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];

[request setHTTPBody:jsonData];
NSURLResponse *response = NULL;
NSError *requestError = NULL;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
NSLog(@"response is obtained");

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] ;
NSLog(@"%@", responseString); 
```

我通过代码得到的响应

```
<!DOCTYPE html PUBLIC
    "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>PHP notice</title>

<style type="text/css">
/*<![CDATA[*/
    html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent;margin:0;padding:0;}
    body{line-height:1;}
    ol,ul{list-style:none;}
    blockquote,q{quotes:none;}
    blockquote:before,blockquote:after,q:before,q:after{content:none;}
    :focus{outline:0;}
    ins{text-decoration:none;}
    del{text-decoration:line-through;}
    table{border-collapse:collapse;border-spacing:0;}

    body {
        font: normal 9pt "Verdana";
        color: #000;
        background: #fff;
    }

    h1 {
        font: normal 18pt "Verdana";
        color: #f00;
        margin-bottom: .5em;
    }

    h2 {
        font: normal 14pt "Verdana";
        color: #800000;
        margin-bottom: .5em;
    }

    h3 {
        font: bold 11pt "Verdana";
    }

    pre {
        font: normal 11pt Menlo, Consolas, "Lucida Console", Monospace;
    }

    pre span.error {
        display: block;
        background: #fce3e3;
    }

    pre span.ln {
        color: #999;
        padding-right: 0.5em;
        border-right: 1px solid #ccc;
    }

    pre span.error-ln {
        font-weight: bold;
    }

    .container {
        margin: 1em 4em;
    }

    .version {
        color: gray;
        font-size: 8pt;
        border-top: 1px solid #aaa;
        padding-top: 1em;
        margin-bottom: 1em;
    }

    .message {
        color: #000;
        padding: 1em;
        font-size: 11pt;
        background: #f3f3f3;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
        margin-bottom: 1em;
        line-height: 160%;
    }

    .source {
        margin-bottom: 1em;
    }

    .code pre {
        background-color: #ffe;
        margin: 0.5em 0;
        padding: 0.5em;
        line-height: 125%;
        border: 1px solid #eee;
    }

    .source .file {
        margin-bottom: 1em;
        font-weight: bold;
    }

    .traces {
        margin: 2em 0;
    }

    .trace {
        margin: 0.5em 0;
        padding: 0.5em;
    }

    .trace.app {
        border: 1px dashed #c00;
    }

    .trace .number {
        text-align: right;
        width: 2em;
        padding: 0.5em;
    }

    .trace .content {
        padding: 0.5em;
    }

    .trace .plus,
    .trace .minus {
        display:inline;
        vertical-align:middle;
        text-align:center;
        border:1px solid #000;
        color:#000;
        font-size:10px;
        line-height:10px;
        margin:0;
        padding:0 1px;
        width:10px;
        height:10px;
    }

    .trace.collapsed .minus,
    .trace.expanded .plus,
    .trace.collapsed pre {
        display: none;
    }

    .trace-file {
        cursor: pointer;
        padding: 0.2em;
    }

    .trace-file:hover {
        background: #f0ffff;
    }
    /*]]>*/
    </style>
    </head>

    <body>
    <div class="container">
        <h1>PHP notice</h1>

        <p class="message">
            Undefined index: signature  </p>

        <div class="source">
            <p class="file">/var/www/protected/controllers/Authenticate.php(955)</p>
            <div class="code"><pre><span class="ln">943</span>   

            <td class="number">
                #7          </td>
            <td class="content">
                <div class="trace-file">
                                            <div class="plus">+</div>
                        <div class="minus">–&lt;/div>
                                        &nbsp;/var/yii-1.1.10.r3566/framework/base/CApplication.php(162): <strong>CWebApplication</strong>-><strong>processRequest</strong>()               </div>

                <div class="code"><pre><span class="ln">157</span>      */
<span class="ln">158</span>     public function run()
<span class="ln">159</span>     {
<span class="ln">160</span>         if($this-&gt;hasEventHandler(&#039;onBeginRequest&#039;))
<span class="ln">161</span>             $this-&gt;onBeginRequest(new CEvent($this));
<span class="error"><span class="ln error-ln">162</span>         $this-&gt;processRequest();
</span><span class="ln">163</span>         if($this-&gt;hasEventHandler(&#039;onEndRequest&#039;))
<span class="ln">164</span>             $this-&gt;onEndRequest(new CEvent($this));
<span class="ln">165</span>     }
<span class="ln">166</span> 
<span class="ln">167</span>     /**
</pre></div>            </td>
        </tr>
                        <tr class="trace app expanded">
            <td class="number">
                #8          </td>
            <td class="content">
                <div class="trace-file">
                                            <div class="plus">+</div>
                        <div class="minus">–&lt;/div>
                                        &nbsp;/var/www/index.php(13): <strong>CApplication</strong>-><strong>run</strong>()             </div>

                <div class="code"><pre><span class="ln">08</span> defined(&#039;YII_DEBUG&#039;) or define(&#039;YII_DEBUG&#039;,true);
<span class="ln">09</span> // specify how many levels of call stack should be shown in each log message
<span class="ln">10</span> defined(&#039;YII_TRACE_LEVEL&#039;) or define(&#039;YII_TRACE_LEVEL&#039;,3);
<span class="ln">11</span> 
<span class="ln">12</span> require_once($yii);
<span class="error"><span class="ln error-ln">13</span> Yii::createWebApplication($config)-&gt;run();
</span></pre></div>         </td>
        </tr>
                </table>
    </div>

    <div class="version">
        2012-11-24 07:38:18 Apache/2.2.22 (Ubuntu) <a href="http://www.yiiframework.com/">Yii Framework</a>/1.1.10  </div>
</div>

<script type="text/javascript">
/*<![CDATA[*/
var traceReg = new RegExp("(^|\\s)trace-file(\\s|$)");
var collapsedReg = new RegExp("(^|\\s)collapsed(\\s|$)");

var e = document.getElementsByTagName("div");
for(var j=0,len=e.length;j<len;j++){
    if(traceReg.test(e[j].className)){
        e[j].onclick = function(){
            var trace = this.parentNode.parentNode;
            if(collapsedReg.test(trace.className))
                trace.className = trace.className.replace("collapsed", "expanded");
            else
                trace.className = trace.className.replace("expanded", "collapsed");
        }
    }
}
/*]]>*/
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:24:27.627

您可以尝试以下代码可能对您有所帮助。

```
NSString *username = emailField.text;
        NSString *password = passwordField.text;
        NSMutableDictionary *dictionnary = [NSMutableDictionary dictionary];
        [dictionnary setObject:@"admin"  forKey:@"username"];
        [dictionnary setObject:@"123456" forKey:@"password"];

        NSError *error = nil;
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionnary
                                                           options:kNilOptions
                                                             error:&error];   

        NSString *urlString = @"Sample URL";

        NSURL *url = [NSURL URLWithString:urlString];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        [request setHTTPMethod:@"POST"];

        [request setHTTPBody:jsonData];
        NSURLResponse *response = NULL;
        NSError *requestError = NULL;
        NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];
        NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] ;
         NSLog(@"%@", responseString); 
```

如果是 GET 请求，您可以尝试链接：**/index.php/api/transaction/model/transactionsuccess?username=admin&password=1212‌​3**

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"/index.php/api/transaction/model/transactionsuccess?username=adm‌​in&password=1212‌​3"]];

 // Perform request and get JSON as a NSData object

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
 NSLog(@"response=%@",response ); 
```

并使用此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:34:35.403

在您的 URLRequest 中指定您不想要 html 但您想要原始 json

```
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"]; 
```

至：

```
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];//!!! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-24T10:31:09.337

此问题与服务器端有关；所以你必须咨询服务的后端开发人员，更有可能的是，在服务端检查使用 POST 或 GET 命中的数据，如果后端是 php，所以暂时建议他使用 $request 而不是 $ get 或 $post，只是为了测试。此外，正如您提到的那样，这一事实很明显，当您从浏览器尝试 url 时，您会获得所需的 json，但在 POST 的情况下，您永远无法做到这一点。

我 100% 确定这是来自服务器端。如果可能的话，请向我提供带有测试身份验证变量的所需服务器 url。（通过断点或日志提供的参数交叉检查您的完整网址。）

# gwt - 在 GWT 中获取 window.devicePixelRatio？

> ID：13539392
> 
> 赞同：0
> 
> 时间：2012-11-24T07:51:54.247
> 
> 标签：gwt

我正在用画布做一些有价值的事情，我需要获得以下值：

```
// This one:
window.devicePixelRatio

// and any one of:
Context2d.webkitBackingStorePixelRatio ||
Context2d.mozBackingStorePixelRatio ||
Context2d.msBackingStorePixelRatio ||
Context2d.oBackingStorePixelRatio ||
Context2d.backingStorePixelRatio 
```

这些似乎在 GWT 等效类中不可用（我认为） - 我必须创建一个本地方法来获取它们还是有更好的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:21:44.607

你是对的，它们在核心 gwt 类中不可用，所以你必须使用 jsni 来实现它们。

另一种选择是使用gwt-2.5.0 中包含的[elemental](https://developers.google.com/web-toolkit/articles/elemental)并具有这些方法，但 elemental 仅针对 webkit 实现。

[编辑]

您可以使用所需的 jsni 方法创建自己的 context2 类，并使用覆盖转换将 gwt context2 转换为您的类：

```
 public class MyContext2 extends Context2d {
    public final native float webkitBackingStorePixelRatio() /*-{
      return this.webkitBackingStorePixelRatio;
    }-*/;    
  }

  Context2d ctx = ...;

  // call your method through the cast()
  float ratio = ctx.<MyContext2>cast().webkitBackingStorePixelRatio();

  // or convert the context to your class
  MyContext2 mctx = ctx.cast();
  float ratio = mctx.webkitBackingStorePixelRatio(); 
```

# java - 是否有任何基于“描述逻辑”或基于 FOL 的推理引擎 java 库可用？

> ID：13539396
> 
> 赞同：2
> 
> 时间：2012-11-24T07:52:56.340
> 
> 标签：java, artificial-intelligence, semantic-web, first-order-logic, description-logic

我最近在一门 AI 课程中学习了 KRL（知识表​​示语言），发现描述逻辑是语义 Web 的正式知识表示语言家族，这很有趣。此外，在描述逻辑中，表示知识比在一阶谓词逻辑中更简单易懂。

有谁知道可用于处理描述逻辑或一阶逻辑的 Java 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:29:03.197

至少两个[OWL 推理器](http://en.wikipedia.org/wiki/Semantic_reasoner) [Pellet](http://clarkparsia.com/pellet)和[HermiT](http://hermit-reasoner.com/)是用 Java 编写的。

## 咆哮

您只能用 DL 或一般逻辑来表示某种特定类型的知识——主要是定义和术语知识。

但是你不能合理地代表现实世界的*状态*。逻辑无法应对不确定性**，**如果你只在模型中引入一个缺陷，它们就会彻底失败，这对于更大的模型来说是不可避免的。

当我了解一阶逻辑时，我还发现它们很有趣。但现实世界不能用逻辑建模，除非在最基本的层面（自然法则）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T16:07:26.410

你可以在这里找到一个专门为此而构建的库：

[LogicJava.wordpress.com](http://logicjava.wordpress.com)

该代码在 github 上是开源的，并且该库没有任何依赖 - 只需导入其 Jar

# android - 通知按钮操作

> ID：13539399
> 
> 赞同：3
> 
> 时间：2012-11-24T07:53:37.213
> 
> 标签：android, android-intent, notifications, android-pendingintent

我正在尝试将按钮添加到我自己的自定义通知中。

但是，RemoteViews`setOnClickPendingIntent()`不起作用。

我看到PowerAMP有类似的功能，这正是我想要的。

![在此处输入图像描述](../Images/13a49e9d339f61aed8d44a2788e9f6bf.png)

有人知道 PowerAMP 是如何做到这一点的吗？

# ios - iOS，在InterfaceBuilder中使用AppDelegate，创建了两个实例

> ID：13539402
> 
> 赞同：0
> 
> 时间：2012-11-24T07:54:06.103
> 
> 标签：ios, interface-builder, appdelegate

在一个 iOS 应用程序中，我在`AppDelegate`.

几个视图控制器等需要调用`AppDelegate`，所以我将 放在`AppDelegate`Interface Builder 中并给出了`ViewControllers`an`IBOutlet AppDelegate*`并绘制了一个链接。

在应用程序中，我现在看到似乎有两个已`AppDelegate`创建实例，一个被调用并获取所有通知，另一个被链接到`ViewControllers`.

所以我改变了我的应用程序以使用`ViewControllers`：

`app_del = (AppDelegate*)[[UIApplication sharedApplication] delegate]`.

然后我打电话给这个`appDelegate`。但这也是与获取通知的实例不同的实例。谁能解释为什么？

谁能告诉我出了什么问题？我对谷歌搜索的怀疑是 iOS 创建了`AppDelegate`实例，而 Interface Builder 不知道那个实例并创建了另一个实例？那是对的吗？

任何人都可以给我一些关于如何在 Interface Builder 中最好地创建/计划实例的提示，以及它们在启动时在应用程序中创建的顺序以及我可以依靠什么通知来证明它们都已创建？

感谢您的任何提示，托斯滕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:10:10.080

你的怀疑是正确的。iOS 在启动您的应用程序时创建您的应用程序委托的一个实例，该实例是注册以接收所有委托事件等的实例。见[这里](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW7)。

您添加到 xib 或情节提要中的任何内容都将是一个新实例，并且将不起作用。

要获取指向应用程序委托的指针，*请*使用以下方法：

```
[[UIApplication sharedApplication] delegate]; 
```

有一种观点认为您不应该过度使用应用程序委托作为方便可用的全局数据或方法存储，但这超出了此答案的范围。

# objective-c - 用于 Cocoa 应用程序的 USB 信用卡读卡器

> ID：13539407
> 
> 赞同：2
> 
> 时间：2012-11-24T07:54:25.343
> 
> 标签：objective-c, xcode, cocoa, credit-card

我正在创建一个需要信用卡读卡器的应用程序，但我不知道在哪里可以找到一个可以使用目标 c 或任何其他与可可应用程序兼容的语言的应用程序。它适用于桌面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T17:26:03.257

我知道这是一个老问题，但这里有。我会推荐 MagTek 或 IDTECH HID MSR（磁性刷卡阅读器）。MagTek 的输出是 ASCII 而 IDTECH 是 Hex，所以你可以决定哪个最简单。

如果您无法与 HID 设备交互，您可以使用模拟键盘 (KBE)，但这些安全性较低，因为任何人都可以随时刷入它并读取刷卡数据，因此我不建议您将其作为首选。

您将使用什么网关进行支付处理？那里有很多，而且很多都可以选择加密。Axia Payments 是其中之一，但有几十个可供选择。

您需要记住的最后一件事是在美国添加 EMV 或芯片和 PIN 或 Sig。如果您的应用程序将进行持卡交易，则您的用户将被要求将他们的输入保持在 75% 左右，以免在事件发生后承担责任。

# javascript - 计时器功能的匿名功能协助错误

> ID：13539409
> 
> 赞同：-2
> 
> 时间：2012-11-24T07:55:19.833
> 
> 标签：javascript, html, timer, getelementbyid

我正在尝试在 div 中设置背景图像，以使用 setTimer() 每隔一两秒更改一次；我设置了它，它说我有

```
 'Invalid left-hand side in assignment' 
```

不知道我在做什么这是错误的。有人可以帮忙吗？

```
 <html><body>
  <div class="box">
   <div id="b1"></div>
  </div>
  <input id = 'spin' type="button" value="Spin" onclick='changeIcons()' />
  <script>
  var arr = new Array();
  arr[0] = '1.png';
  arr[1] = '2.png';
  arr[2] = '3.png';
  var first = document.getElementById('b1');

  function changeIcons(){
   for(var spinIcons= 0; spinIcons < 10; spinIcons++){
   arr.sort(function() {return 0.5 - Math.random()});
   var v1 = setTimeout(function(){first.style.background-image= 'url(arr[0])'},   1000);
}
  }
 </script> 
 </body>
 </html> 
```

这终于工作了，它有时间问题，我需要为背景图片制作一个带框的占位符，但它工作正常：

```
 <div class="first"></div>
     <script>
     for(var i=0; i<11; i++){
        $("div.first").slideUp(300).delay(100).fadeIn(400);
     }
     </script> 
```

感谢 TJCROWDER 让我直截了当！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T07:57:06.153

有两个问题。

导致您提到的错误的原因在这里：

```
//                                        here ------v
var v1 = setTimeout(function(){first.style.background-image= 'url(arr[0])'},   1000); 
```

这使引擎认为您正在尝试分配表达式 ( `background - image`) 的结果，这在分配的左侧是无效的。在 JavaScript 中，属性名称中不能有破折号。您可以改用 camelCase 版本`backgroundImage`。

另外，您始终将背景图像设置为 string `'url(arr[0])'`，而不是将值 from`arr[0]`放入字符串中。您需要调整引号：

所以：

```
var v1 = setTimeout(function(){first.style.backgroundImage= "url(" + arr[0] + ")"},   1000); 
```

其他一些注意事项：

*   您正在`setTimeout`循环设置，因此您安排此发生 10 次。但是这 10 次都会一个接一个地发生，一秒钟后，它们都会做完全相同的事情：将背景图像设置为`arr[0]` *当时*的任何内容。您之前更改了 10 次数组的顺序这一事实没有任何区别，因为该函数`arr[0]`在您*安排*它时没有收到 的值的副本，它会收到对它使用的数组的持久引用当它*运行*时。更多：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

*   对数组进行排序并使用索引 0 似乎是一种从数组中随机选择的相当低效的方法。

# ruby - 如何为 Ruby 设置系统路径？

> ID：13539411
> 
> 赞同：0
> 
> 时间：2012-11-24T07:55:27.443
> 
> 标签：ruby, irb

我正在为应用学院做准备工作。在我完成准备工作之前的最后一个阶段是完成名为“Test First Ruby”的 Ruby 入门课程。

安装 Rspec 后的第一行是进入课程目录。在终端中它是“cd learn_ruby”，很简单，只是它返回一条消息“系统找不到指定的路径”。到目前为止，我一直在我所有的 ruby​​ 学习的某些命令上注意到这条消息，我只是想知道这意味着什么？我该如何解决这个问题？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:13:19.683

`cd`意思是“改变目录”。您得到的错误是该目录在您的命令行所在的位置不存在。

这看起来像是对 UNIX 文件系统的合理介绍：http: [//www.doc.ic.ac.uk/~wjk/UnixIntro/Lecture2.html](http://www.doc.ic.ac.uk/~wjk/UnixIntro/Lecture2.html)

UNIX 参考：[http ://sunsite.utk.edu/UNIX-help/quickref.html](http://sunsite.utk.edu/UNIX-help/quickref.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:15:24.947

在 cd 进入之前创建目录：

**mkdir learn_ruby**

**cd learn_ruby**

请查看 AJcodez 的链接以熟悉 Unix 文件系统命令。

# jquery - Magento：参考错误：Sizzle 未定义prototype.js

> ID：13539412
> 
> 赞同：2
> 
> 时间：2012-11-24T07:55:33.450
> 
> 标签：jquery, magento, prototypejs

我正在使用火狐。

在工作期间，我可以看到我的 magento 网站正在引发 javascript 错误：

```
Reference Error: Sizzle is not defined prototype.js

})(Sizzle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:55:33.450

只需使用最新版本更新原型即可。

它解决了。

我有 1.7；我用 1.7.1 替换了它

# php - php从数组中获取值时显示错误

> ID：13539414
> 
> 赞同：1
> 
> 时间：2012-11-24T07:55:38.827
> 
> 标签：php, arrays, arraylist

在php中我的代码是这样的

```
 $discounts =  $this->model_catalog_product->getProductDiscounts($product_id);
      $product_discounts[] = array();
      foreach($discounts as $discount) {
        $product_discounts[] = array(
          'quantity' => $discount['quantity'],
          'price'    => $this->currency->format($this->tax->calculate($discount['price'], $product_info['tax_class_id'], $this->config->get('config_tax')))
        );
      } 
```

现在，当我让它显示我的数组时

```
Array ( [0] => Array ( [product_discount_id] => 483 [product_id] => 43 [customer_group_id] => 8 [quantity] => 2 [priority] => 1 [price] => 345.0000 [date_start] => 0000-00-00 [date_end] => 0000-00-00 ) [1] => Array ( [product_discount_id] => 484 [product_id] => 43 [customer_group_id] => 8 [quantity] => 4 [priority] => 2 [price] => 784.0000 [date_start] => 0000-00-00 [date_end] => 0000-00-00 ) [2] => Array ( [product_discount_id] => 485 [product_id] => 43 [customer_group_id] => 8 [quantity] => 5 [priority] => 3 [price] => 786.0000 [date_start] => 0000-00-00 [date_end] => 0000-00-00 ) ) 
```

但是当我编写代码以从数组中获取折扣数量和折扣价格的值时

```
 <?php foreach ($discounts as $discount) {
    echo sprintf($text_discount, $discount['quantity'], $discount['price']); ?>
    } ?> 
```

我得到了这样的错误`Undefined variable: discounts`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:59:26.707

替换这个

```
$product_discounts[] = array(); 
```

和

```
$product_discounts = array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:18:46.700

尝试这个

```
$discounts =  $this->model_catalog_product->getProductDiscounts($product_id);
  $product_discounts = array();
  foreach($discounts as $discount) {
    $product_discounts = array(
      'quantity' => $discount['quantity'],
      'price'    => $this->currency->format($this->tax->calculate($discount['price'], $product_info['tax_class_id'], $this->config->get('config_tax')))
    );
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:02:12.310

`$discounts`从未被定义。应该是`$product_discounts`。这就是为什么你得到`undefined variable discounts`.

```
<?php
foreach ($product_discounts as $discount) {
    echo sprintf($text_discount, $discount['quantity'], $discount['price']); ?>
}?> 
```

# alloy - 了解合金中的输出

> ID：13539416
> 
> 赞同：-2
> 
> 时间：2012-11-24T07:55:48.920
> 
> 标签：alloy

无法理解合金代码的输出：

```
abstract sig Name{}
one sig N0, N1, N2 extends Name{}
abstract sig Book{}
one sig b0 extends Book { addr : Name -> Name}
abstract sig E{}
one sig e0 extends E{}
pred show(){
  some *(b0.addr)

}

run show 
```

我很好奇输出是否包含（e0，e0）和（b0，b0）。我附上了分析仪的输出，但不知道如何解释它。这是否意味着 (e0,e0) 在解决方案中？

![在此处输入图像描述](../Images/d78c2c91dea4c16982ca15758579ca8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:10:20.850

`(e0, e0)`“在解决方案中”是什么意思？我建议您阅读 Alloy 书（Software Abstractions，麻省理工学院出版社，2012 年）以了解所有基本概念。

# php - php中如何访问html选择值，php中嵌入html

> ID：13539417
> 
> 赞同：-1
> 
> 时间：2012-11-24T07:55:49.720
> 
> 标签：php

我已经编写了一个需要 html 选择的 php 代码。

```
function x()
$sqlqry="select distinct(field_place_of_project_value) as Location from field_revision_field_place_of_project ";
  $htmlStr= '<select name="country" id="countrySelection" onclick="getCategoriesList()">  <option>All</option>';
$result = db_query($sqlqry);        
foreach ($result as $row_table) {
    $htmlStr .= '<option>' . t($row_table->Location) . '</option>';
} //for loop end
$htmlStr .= '</select>';

return $htmlStr; 
```

从插入的选择标签中，我需要获取选定的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:16:30.403

您的脚本中存在**问题**，您没有向选项标签添加 value 属性，现在当您提交此表单时，您将在 $_POST/$_GET 数组中获得选定的值。

```
$sqlqry="select distinct(field_place_of_project_value) as Location from field_revision_field_place_of_project ";

$htmlStr= '<select name="country" id="countrySelection" onclick="getCategoriesList()">  <option>All</option>';

$result = db_query($sqlqry);        
foreach ($result as $row_table) {
    $htmlStr .= '<option value=". $row_table->Location .'">' . t($row_table->Location) . '</option>';
} //for loop end

$htmlStr .= '</select>';

return $htmlStr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:59:42.293

当您发布表单时，您将在 php.ini 中获得 $_POST['country'] 中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:05:37.320

而不是这个`return $htmlStr;`写`echo $htmlStr;`，因为它没有功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T08:06:47.647

     当您在 PHP 中提交表单时，所有提交的数据都可以通过超全局变量**$_POST**访问；每个输入值都由 $_POST["input_name_attribute"] 访问。
     因此，要访问该特定数据，您可以使用 $_POST["country"]。

     希望这可以帮助。

# colors - 在 RGB 模型中有多少种不同的色调可用？

> ID：13539420
> 
> 赞同：11
> 
> 时间：2012-11-24T07:56:51.790
> 
> 标签：colors, rgb, hsb

在 RGB 模型中，每个像素由 3 个字节定义，分别用于 R、G 和 B。这给出了总共 2 ^(24)种颜色，包括 256*色调*的灰色。

`float`用s（不是`byte`s）来表示 HSV/HSB/HSL 模型是很常见的。大多数描述将色调描述为圆锥中的“角度”，因此将其视为实数是明智的。

但这与 2 ^(24)种总颜色的实际限制有什么关系……？有多少种不同的色调可供选择？此外，在我看来，这个数字应该取决于其他参数——例如饱和度。

* * *

有趣的阅​​读：[http ://www.dig.cs.gc.cuny.edu/manuals/Gimp2/Grokking-the-GIMP-v1.0/node52.html](http://www.dig.cs.gc.cuny.edu/manuals/Gimp2/Grokking-the-GIMP-v1.0/node52.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T09:11:36.977

在 HSV 中，色调定义为

```
H = atan2( sqrt(3)*(G-B), 2R-G-B ) 
```

（[链接](http://en.wikipedia.org/wiki/HSL_and_HSV#Hue_and_chroma)）。在六个扇区（RY、YG ...）中的每一个中，都有同样多的色调。此外，区域之间的边界有六种色调。所以，`6 + 6 * huesRY`。

在红黄色区域，R > G > B，所以 atan2 的两个参数都是正数。

```
 count sqrt(3) * (G-B) / (2R-G-B)
=count (G-B) / (2R-G-B)
=count (G-B) / ((G-B) + (2R-2G)) 
```

因为我们可以对 [x,y] 的集合应用任何线性变换而不改变其比率的计数，`x / (x+2y) == x / y`

```
=count (G-B) / (R-G) 
```

如果我们从所有 R,G,B 中减去相同的值，则比率不会改变，因此假设 B=0

```
=count G / (R-G)
=count G / R 
```

因此，色调是两个小于 2^8（假设每个通道 8 位）的正整数之间的比率的六倍，还有六个。有多少对互质的正整数就有多少比率。下面`n`与互质的正整数的个数`n`称为欧拉函数。[OEIS](http://oeis.org) [列出](http://oeis.org/A002088/b002088.txt) [了它的](http://oeis.org/A000010) [部分金额](http://oeis.org/A002088)。正好有 19948 对互质的小于 256 的正整数。

6 * 19948 + 6 = 119 694

**HSV 模型中有 119 694 种不同的色调对应于 8 位 RGB 模型中的一种颜色。**请注意，它们的间距不均匀。

如果在 HSV 模型中使用每通道 8 位，那么与每通道 8 位的 RGB 模型相比，颜色会更少，因为一些 HSV 三元组映射到相同的颜色，而每个 RGB 三元组定义不同的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T19:14:25.447

在 RGB 颜色中，可以从 (2^3*depth-2^depth/Luminance)/3= 计算色调，因此 15 位颜色具有 341 种不同的色调

24 位颜色有 21845 种不同的色调

如果有 119000 种色调剩余的颜色所有色调 - 红色色调的红色色调将是 256,X,Y 大约 2^16，这意味着绿色和蓝色色调比红色少？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-12-16T20:48:21.480

'RGB 中有 1,530 种色调（256,256,256），这真的很简单。'这有效地揭示了 RGB 的“分辨率”，因为要成为一种独特的色调，一个 rgb 必须是 255，另一个必须是 0，第三个有 256 个值要递增，在极端情况下重复更少。其他一切都是色调、色调或阴影。所以，让我们把它们加到 0 和 255 的六种组合中，然后把它们也算作我，边走边说：

```
Dim I As Integer
Dim R, G, B As Byte
Dim Spectrum(0 to 1529) as Long
I = -1       'Incremented before each use
R = 255: B = 0   'G inc  RED
For G = 0 To 255         '256
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
G = 255: B = 0   'R dec  YELLOW
For R = 254 To 0 Step -1 '255
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
R = 0: G = 255   'B inc  GREEN
For B = 1 To 255         '255
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
R = 0: B = 255   'G dec  CYAN
For G = 254 To 0 Step -1 '255
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
G = 0: B = 255   'R inc  BLUE
For R = 1 To 255         '255
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
R = 255: G = 0   'B dec  MAGENTA
For B = 254 To 1 Step -1 '254
    I = I + 1: Spectrum(I) = RGB(R, G, B)
Next
'I = 1,529 = 256+255+255+255+255+254 No duplicates
'Hue = I * 0.23529411764705882353°
'0° is Red at I = 0, so I=0 counts as 1 so, 1 + 1,529 = 1530 
```

# java - JBoss 服务器启动问题

> ID：13539425
> 
> 赞同：2
> 
> 时间：2012-11-24T07:58:06.580
> 
> 标签：java, eclipse, jboss

我从以下链接下载了 JBoss 7.0.2 Final（zip 格式）：

[http://www.jboss.org/jbossas/downloads/](http://www.jboss.org/jbossas/downloads/)

我不确定如何为我新下载的 Eclipse Juno 配置它。

我所做的是：

1) 将提取的 zip 内容复制到我的 C:\Program 文件中

2）在Eclipse IDE中，添加=>服务器=>JBoss AS 7.0=>完成。

然后我尝试启动服务器并得到这个异常：

**编辑**

```
13:57:53,217 INFO  [org.jboss.modules] JBoss Modules version 1.0.2.GA
13:57:54,106 INFO  [org.jboss.msc] JBoss MSC version 1.0.1.GA
13:57:54,185 INFO  [org.jboss.as] JBoss AS 7.0.2.Final "Arc" starting
13:57:54,201 ERROR [org.jboss.msc.service.fail] MSC00001: Failed to start service     jboss.as: org.jboss.msc.service.StartException in service jboss.as: Failed to start service
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1780) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [:1.6.0_31]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [:1.6.0_31]
at java.lang.Thread.run(Unknown Source) [:1.6.0_31]
Caused by: java.lang.IllegalStateException: Failed to create a directory at C:\Program Files\jboss-as-web-7.0.2.Final\standalone\data\content
at org.jboss.as.server.deployment.repository.impl.ContentRepositoryImpl.<init>(ContentRepositoryImpl.java:77)
at org.jboss.as.server.deployment.repository.impl.ContentRepositoryImpl.addService(ContentRepositoryImpl.java:60)
at org.jboss.as.server.ApplicationServerService.start(ApplicationServerService.java:118) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
... 3 more

13:57:54,201 ERROR [stderr] java.util.concurrent.ExecutionException: Operation failed

13:57:54,201 ERROR [stderr]     at org.jboss.threads.AsyncFutureTask.operationFailed(AsyncFutureTask.java:74)

13:57:54,201 ERROR [stderr]     at org.jboss.threads.AsyncFutureTask.get(AsyncFutureTask.java:268)

13:57:54,201 ERROR [stderr]     at org.jboss.as.server.Main.main(Main.java:106)

13:57:54,201 ERROR [stderr]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

13:57:54,201 ERROR [stderr]     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

13:57:54,217 ERROR [stderr]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

13:57:54,217 ERROR [stderr]     at java.lang.reflect.Method.invoke(Unknown Source)

13:57:54,217 ERROR [stderr]     at org.jboss.modules.Module.run(Module.java:272)

13:57:54,217 ERROR [stderr]     at org.jboss.modules.Main.main(Main.java:313)

13:57:54,217 ERROR [stderr] Caused by: org.jboss.msc.service.StartException in service jboss.as: Failed to start service

13:57:54,217 ERROR [stderr]     at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1780)

13:57:54,217 ERROR [stderr]     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) 
```

请让我知道如何通过简单的步骤在 Eclipse IDE 中配置 JBoss……在尝试挖掘不同的链接时我真的很困惑 :(

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:23:12.140

`c:\Program Files\`是win7上受保护的文件夹之一

因此，当您尝试在那里创建任何文件夹/文件时（即使您是管理员），它会发出警告，并且当某些程序（在您的情况下为 jboss）在 Eclipse 之上尝试修改这些区域时，访问被拒绝

建议：

1.  将您的 jboss 根目录移动到 c:\ 或更好地移动到其他驱动器

2.  关闭eclipse，右键eclipse.exe，选择以管理员身份运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:38:54.267

该问题可能与 'C:\Program Files \' 路径中的空间有关，尝试将 JBoss 安装在根文件夹中，然后更改 Eclipse 中的服务器配置。

# autocomplete - 如何在记事本++中自动完成双引号

> ID：13539438
> 
> 赞同：1
> 
> 时间：2012-11-24T08:00:37.383
> 
> 标签：autocomplete, notepad++

我在 Notepad++ 中使用 TextFX 插件，并且所有 xhtml 和 html 自动完成值都已打开。Html 标签完成没有问题，但我想在一个按钮按下时插入双“”（引号），但只出现一个“标记。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-25T10:23:41.927

记事本 V6.5.5：

在“设置”菜单>“首选项”>“自动结束”中。

然后，您可以选择键入时重复的内容。示例：{ [ "" ] } 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:48:12.580

您可以使用一个名为`XBrackets Lite`

[http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/](http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/)

# mongodb - Symfony2 中 mongodb 批量插入的最佳实践

> ID：13539439
> 
> 赞同：0
> 
> 时间：2012-11-24T08:00:43.357
> 
> 标签：mongodb, symfony, doctrine, doctrine-orm, symfony-2.1

在我的 symfony2 命令中，我正在运行一个将数十万个 url（作为字符串）插入到文档中的脚本。

这是我正在使用的 2 个文档的基本结构。在程序运行之前，mongodb中已经有数千个ParentDocuments，但ChildDocuments为零：

```
ParentDocument:
    $id:id
    $subDocument:OneToManyReference(ChildDocument)
    $etc:everythingelse

ChildDocument:
    $id:id
    $url:string
    $parentDocument:ManyToOneReference(ParentDocument) 
```

还有我的命令代码：

```
$dm = $this->getContainer()->get('doctrine_mongodb.odm.document_manager');
$parentDocuments = $dm->repository('My:Bundle:ParentDocument')->findAll();
while ($parentDocument = $parentDocuments->getNext()) {
    //Returns an array of hundreds of thousands urls
    $urls = $this->somehowFetchUrlsRelatedToTheParentDocument($parentDocument);
    foreach ($urls as $url) {
        $subDocument = new SubDocument();
        $subDocument->setUrl($url);
        $subDocument->setParentDocument($parentDocument);
        $dm->persist($subDocument);
    }
    $dm->flush();
} 
```

当我运行这个简单的命令时，一开始的写入速度非常快。但是，在插入数百万行的情况下，写入速度会明显变慢。命令运行 10 分钟后，速度慢到每秒 1 次写入，使代码极其无效。

我解决此问题的第一次尝试是在文档管理器刷新后立即清除它，`$dm->clear();` 但这意味着文档管理器将失去对当前 ParentDocument 的跟踪。所以我的解决方案是这样的：

```
$dm = $this->getContainer()->get('doctrine_mongodb.odm.document_manager');
$parentDocumentCursors = $dm->repository('My:Bundle:ParentDocument')->findAll();
$parentDocuments = array();
while ($parentDocument = $parentDocumentCursors->getNext()) {
    array_push($parentDocuments, $parentDocument);
}
$dm->clear();
unset($dm);
$dm = $this->getContainer()->get('doctrine_mongodb.odm.document_manager');
foreach ($parentDocuments as $parentDocument) {
    $urls = $this->somehowFetchUrlsRelatedToTheParentDocument($parentDocument);
    foreach ($urls as $url) {
        $subDocument = new SubDocument();
        $subDocument->setUrl($url);
        $subDocument->setParentDocument($parentDocument);
        $dm->persist($subDocument);
    }
    $dm->flush();
    $dm->clear();
} 
```

这解决了问题。在整个程序执行过程中，写入速度始终保持快速，并且能够在没有逐渐延迟的情况下插入数百万行。

但是，这感觉像是一种不好的做法和快速修复黑客。使用文档管理器在 Symfony2 中插入数百万行而不会使读/写速度变慢的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:06:43.767

我会避免使用 Symfony 的文档管理器并直接使用 batchInsert() 函数。这在[http://php.net/manual/en/mongocollection.batchinsert.php](http://php.net/manual/en/mongocollection.batchinsert.php)的文档中有所描述。在我看来，Doctrine 的 ODM 实际上在这里伤害了你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T11:31:26.860

为了在学说中进行批量插入，您需要将刷新移出循环。考虑下面的场景，您将坚持在 foreach 中，然后在 foreach 完成时刷新。您唯一的问题是，在刷新之前，您将无法查询批处理中插入的任何数据。

```
$dm = $this->getContainer()->get('doctrine_mongodb.odm.document_manager');
foreach ($parentDocuments as $parentDocument) {
    $urls = $this->somehowFetchUrlsRelatedToTheParentDocument($parentDocument);
    foreach ($urls as $url) {
        $subDocument = new SubDocument();
        $subDocument->setUrl($url);
        $subDocument->setParentDocument($parentDocument);
        $dm->persist($subDocument);
    }    
 }
$dm->flush();
$dm->clear(); 
```

另一种选择是进行推送、推送或添加设置。要考虑的一个问题是您需要在 php 中使用 stdClass 才能添加对象。我发现这是更新子文档的最快方法。例如：

```
$dm->createQueryBuilder('My:Bundle:ParentDocument')
    ->update()
    ->field('subDocument')->push( (object) array('url'=> $url) )
    ->field('id')->equals( $parentDocumentId )
    ->getQuery()
    ->execute(); 
```

# java - XSSF 工作簿排序

> ID：13539441
> 
> 赞同：3
> 
> 时间：2012-11-24T08:01:16.173
> 
> 标签：java, xssf

目标：按字母顺序对现有 Excel 工作表的 A 到 Z 的选定列进行排序

在 XSSF POI API 中是否有用于对列 A 到 Z（字符串类型列）进行排序的内置函数？
我试过搜索，但没有找到任何有用的链接。

如果没有那么我是否必须编写一个排序函数来实现排序？例如冒泡排序？

# java - 同时来自多台计算机/用户的 Eclipse？

> ID：13539442
> 
> 赞同：3
> 
> 时间：2012-11-24T08:01:25.553
> 
> 标签：java, eclipse, networking, collaboration

我想在网络驱动器上设置 eclipse 并拥有它，这样我和我的朋友就可以在同一个项目上同时编码，并且两台计算机上的代码都会自动更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T08:10:46.653

执行此类操作的标准方法是使用[版本控制](http://en.wikipedia.org/wiki/Revision_control)。这需要一定的纪律性，但会带来很多好处。

您当然不想同时处理同一个代码副本。想象一下你的朋友开始改变一个重要的课程；突然之间，您无法进行任何工作，因为该项目将无法构建或在您的朋友完成之前不会运行。

相反，你们每个人都在自己的项目副本上工作，并定期将稳定版本的代码*提交*到共享存储库中，供合作者查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:47:36.180

我正在做和你一样的事情。我和我的朋友正在一起做同一个项目。我们使用保管箱共享文件夹来共享代码，一次只能编辑一个。它对我们有用，因为我们正在编码项目的不相关部分。

# rest - Azure 获取 SQL DB 服务器 REST 请求返回“HTTP 错误 500：内部服务器错误”

> ID：13539443
> 
> 赞同：0
> 
> 时间：2012-11-24T08:01:35.607
> 
> 标签：rest, azure, azure-sql-database, azure-storage

我尝试在 REST API 中使用“枚举服务器”获取服务器选项。

我收到响应“HTTP 错误 500：内部服务器错误”。

[https://management.database.windows.net:8443/<'SunscriptionID'>/servers](https://management.database.windows.net:8443/) _

x-ms-版本=1.0。

请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:08:35.337

这是由于 azure DB 门户本身的问题。请找到 azure 支持团队的回复。

“所有数据中心的 SQL azure 管理 REST API 都存在问题。此问题现已解决。

Azure 服务仪表板已更新： http: [//www.windowsazure.com/en-us/support/service-dashboard/](http://www.windowsazure.com/en-us/support/service-dashboard/)

支持的回应。”。

# ruby - .each 正在空数组上执行块

> ID：13539445
> 
> 赞同：0
> 
> 时间：2012-11-24T08:02:05.330
> 
> 标签：ruby

我一直都知道：

```
a = []

a.each do |x|
  puts "I'm still being executed"
end 
```

在数组为空数组之前不会输出任何内容。它在控制台中也是如此。但是在我的应用程序中，我的代码仍在一个空数组上执行该块，我一直无法调试它。有什么我想念的吗？

**编辑：** 这是原始代码：

```
<% @idea.comments.each do |c| %>
  <div class="left_box gray">
    <%= c.body %>
  </div>
<% end %> 
```

而@idea`has_many`评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:14:31.583

是不可能的。你的代码有问题。仔细查看您的代码。

# git - 无法选择 Cherry Pick (FETCH)，但能够在 Gerrit Git 中拉取和推入

> ID：13539446
> 
> 赞同：3
> 
> 时间：2012-11-24T08:02:07.530
> 
> 标签：git, gerrit

正如我在标题中所说，我可以推到 gerrit，从 gerrit 中拉出，但我不能樱桃采摘。当我问管理员时，他说我拥有挑选樱桃的所有权利，但我得到的错误是：

### 错误信息

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

### 当我尝试拉动和变基时

```
praveen@praveen-vbox:~/work/myapp$ git pull --rebase
remote: Counting objects: 8888, done
remote: Finding sources: 100% (615/615)
remote: Total 615 (delta 416), reused 536 (delta 416)
Receiving objects: 100% (615/615), 267.47 KiB, done.
Resolving deltas: 100% (416/416), completed with 163 local objects.
From gerrit:myapp
   b7b8734..f5a782b  master     -> origin/master
First, rewinding head to replay your work on top of it...
Fast-forwarded master to f5a782b97079491e25638c9a752794e3af0a7543. 
```

### 当我尝试检查状态时

```
praveen@praveen-vbox:~/work/myapp$ git status
# On branch master
nothing to commit (working directory clean) 
```

### 当我尝试提交时

```
praveen@praveen-vbox:~/work/myapp$ git commit
[master 4c41a43] Minor fixes
 2 files changed, 2 insertions(+), 2 deletions(-) 
```

### 当我尝试推送时

```
praveen@praveen-vbox:~/work/myapp$ git push gerrit:myapp HEAD:refs/for/master
Counting objects: 20, done.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (10/10), 896 bytes, done.
Total 10 (delta 9), reused 0 (delta 0)
remote: Resolving deltas: 100% (9/9)
remote: Processing changes: updated: 1, done
To gerrit:myapp
 * [new branch]      HEAD -> refs/for/master 
```

### 当我尝试樱桃采摘

```
praveen@praveen-vbox:~/work/myapp$ git fetch ssh://praveen@my.appdomain.com:29418/myapp refs/changes/24/5324/2 && git cherry-pick FETCH_HEAD
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

### 概括

我的应用程序在**VirtualBox**实例上的**Ubuntu 12.04**上运行。我所有的同龄人都能够，而且我发现问题只出在我的机器上，而且by也是如此。可能是什么问题？你们有什么建议？除了这些，你还需要什么信息？**`cherry-pick``cherry-pick`**`FETCH`****

 *** * *

### 更新#1

### 配置

```
praveen@praveen-vbox:~/work/myapp$ git config --list
alias.s=status
alias.c=commit
alias.ca=commit --amend
alias.co=checkout
alias.dc=diff --color
alias.l=log --oneline
alias.pr=pull --rebase
alias.aa=add .
user.email=[removed] /* Removed before posting to SO. Email matches. */
core.editor=vim
color.ui=always
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=gerrit:myapp.git
branch.master.remote=origin
branch.master.merge=refs/heads/master 
```

### 对于[Titas](https://stackoverflow.com/users/750495/titas)的查询，结果是：

```
praveen@praveen-vbox:~/work/myapp$ git fetch gerrit refs/changes/96/5396/3
fatal: 'gerrit' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

### 另外，当我正常执行时，结果如下：

```
praveen@praveen-vbox:~/work/myapp$ git fetch ssh://praveen@my.appdomain.com:29418/myapp refs/changes/96/5396/3 && git cherry-pick FETCH_HEAD
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

* * *

### 更新 #2：SSH 配置

根据[RasmusØstergaardKjærVoss](https://stackoverflow.com/users/1847483/rasmus-ostergaard-kjaer-voss)的要求，我已将 SSH 配置文件包含在下面。让我知道是否有什么要改变的。

```
praveen@praveen-vbox:~/work/myapp$ cat ~/.ssh/config
Host gerrit
HostName my.appdomain.com
Port 29418
User praveen
IdentityFile ~/.ssh/praveen_private 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:30:26.873

,据`~/.ssh/`我了解`git fetch ssh://praveen@my.appdomain.com:29418/`将使用`id_rsa`密钥而不是`~/.ssh/praveen_private`.

备份你的`~/.ssh`文件夹然后尝试创建一个`~/.ssh/praveen_private`名为的副本`~/.ssh/id_rsa`如果它是一个`rsa`密钥，否则将它复制到`~/.ssh/id_dsa`

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:22:05.297

您在 git 或 gerrit 中的设置或 gerrit 部署的整体设置有问题。您可以运行 a `git pull`，它基本上`git fetch && git merge`在幕后运行。但是您无法运行`git fetch`从 gerrit 复制粘贴的命令。查看输出`git remote -v`并将其与`git fetch`您尝试运行的cherry-pick 命令的部分进行比较。你打的是完全相同的服务器 URL 和端口吗？作为同一个用户？

最后，作为 Gerrit 的连接测试，尝试运行类似`ssh username@gerrit_host -p 29418 gerrit ls-projects`. 这应该会返回 Gerrit 服务器上的项目列表，并且是解决任何设置问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T08:14:44.420

这给了我同样的错误：

```
ssh firstname.lastname@my.appdomain.com 
```

更改为：

```
ssh firstname.lastname@gerrit.appdomain.co 
```

为我解决了这个问题。**

# mysql - 如何将多个表（具有相同的列名）复制到一个新表 .?

> ID：13539448
> 
> 赞同：4
> 
> 时间：2012-11-24T08:02:11.607
> 
> 标签：mysql, copy

如何将多个表（具有相同的列名）复制到一个新表`<SQL>`？

喜欢：

```
CREATE TABLE t1
(
   p1 longtext,
   p2 longtext,
   op1 varchar
   op2 varchar,
);

CREATE TABLE t2
(
   p1 longtext,
   p2 longtext,
   op1 varchar
   op2 varchar,
);

CREATE TABLE t3
(
   p1 longtext,
   p2 longtext,
   op1 varchar
   op2 varchar,
); 
```

我希望实现的是尝试将上述所有表 t1、t2、t3 复制到一个新表 new_table 中。类似的东西：（sql是错误的）

```
CREATE TABLE new_table
  AS (SELECT p1,p2,op1,op2)
      FROM t1,t2,t3); 
```

另外，如果我创建了新表，我希望每次更新表 t1,t2,t3 时同时更新 new_table 。- 我需要为此使用触发器吗？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T08:05:35.307

我猜你想用`VIEW`

```
CREATE VIEW new_Table
AS
SELECT  p1, p2, op1, op2 FROM t1
UNION ALL
SELECT  p1, p2, op1, op2 FROM t2
UNION ALL
SELECT  p1, p2, op1, op2 FROM t3; 
```

如果任何一个表被更新，它会自动反映在视图上。

*   [看法](http://dev.mysql.com/doc/refman/5.0/en/views.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T05:49:57.663

您可以使用此查询：

```
INSERT INTO dbo.NewTable (Column1,Column2,Column3,Column4,Column5)
  SELECT * FROM table1
 UNION ALL
  SELECT * FROM table2
 UNION ALL
  SELECT * FROM table3
UNION ALL
  Select * from table4
 UNION ALL
  Select * from table5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:31:06.487

如果你真的想创建一个表，那么语法是特定于 RDBMS 的。

例如 MSSQL 使用语法

```
SELECT  p1, p2, op1, op2 into MyNewTable FROM t1
UNION ALL
SELECT  p1, p2, op1, op2 FROM t2
UNION ALL
SELECT  p1, p2, op1, op2 FROM t3; 
```

这将创建一个表，然后填充它。要将数据插入现有表，MSSQL 使用语法

```
INSERT INTO MyNewTable
  SELECT  p1, p2, op1, op2 FROM t1
  UNION ALL
  SELECT  p1, p2, op1, op2 FROM t2
  UNION ALL
  SELECT  p1, p2, op1, op2 FROM t3 
```

这也取决于您使用的 RDBMS

# c - 处理指向结构的指针数组的动态增长

> ID：13539449
> 
> 赞同：0
> 
> 时间：2012-11-24T08:02:17.510
> 
> 标签：c

我对结构指针数组的增长有疑问。

指向结构存储内存位置的指针数组。

但我不确定我要存储多少。

我想要数组的动态增长。

我还可能需要删除其中一个元素。

代码如下：</p>

```
#include <stdio.h>
#include <stdlib.h>

struct dominate * realloct(int* dim_1, struct dominate *dominateList)
{
    int i;
    struct dominate *dominateList_temp = (struct dominate *)malloc(sizeof(struct dominate *)*(*dim_1+10));

    for(i = 0; i < *dim_1+10;i++)
    {
        if(i<*dim_1)
        {
            dominateList_temp[i] = dominateList[i];
            //memcpy(b[i], a[i], (long)(sizeof(int)*(*dim_1)));
        }
        else
            dominateList_temp[i] = (struct dominate *)malloc(sizeof(struct dominate *)*dim_1);
    }
    (*dim_1) = (*dim_1)+10;

    return dominateList_temp;
}

struct dominate
{
    double ID;
};

struct dominate *head;

int main()
{
    int i;
    struct dominate *dominateList;
    struct dominate *dominateList_temp;
    int dim_1 = 10;

    struct dominate *z[100];

    for(i = 0; i < 100; i++){
        head = (struct dominate *) malloc(sizeof(struct dominate *));
        head->ID = i;
        z[i] = head;
    }

    dominateList = (struct dominate *)malloc(sizeof(struct dominate *)*dim_1);

    for(i = 0; i < 100; i++){
        if(i == dim_1 )
        {
            dominateList_temp = realloct(&dim_1, dominateList);
            free(dominateList);
            dominateList = dominateList_temp;
        }
    }

    printf("%d \n\n", dim_1);

    for(i = 0; i < 100; i++){
        printf("%.2lf ", dominateList[i].ID);
        printf("\n");
    }   
    return 0;
} 
```

我不知道如何修改这个问题

```
if(i<*dim_1){
    dominateList_temp[i] = dominateList[i];
    //memcpy(dominateList_temp[i], dominateList[i], (long)(sizeof(struct dominate *)*dim_1);
}
else
    dominateList_temp[i] = (struct dominate *)malloc(sizeof(struct dominate *)*dim_1); 
```

另外，如果我想删除数组的一个元素，该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:11:23.050

在 C++ 中，只需使用`std::vector<dominate>`:

```
std::vector<dominate> d1;
d1.push_back(dominate()); // add a default constructed dominate object

std::vector<dominate> d2(100); // construct a vector with 100 default constructed dominate objects
dominate dom = ..... ;
d2[45] = dom; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:13:05.970

由于您将其标记为 C 和 C++，我将只回答其中一个问题：如果您希望在 C++ 中实现这种行为，则不应自己实现它。所有这些都已经在标准模板库中完成了。只需使用 std::list （如果您要从中间进行大量插入或删除，并接受更长的项目查找时间）或 std::vector （如果您想要快速的项目查找，但接受更长的时间来插入或删除列表中间的项目）。

查看您的代码：

*   你使用 C，所以你可能把它弄错了。
*   你要`std::list <dominate>`

# c# - 在 C# 中制作计时器 - 秒到分钟到小时等

> ID：13539450
> 
> 赞同：1
> 
> 时间：2012-11-24T08:02:18.803
> 
> 标签：c#, math, timer

我正在尝试在 C# 中制作一个计时器。我通过计算帧数然后创建一个等于帧数除以 60 的变量（秒）来做到这一点。我还通过另一个等于秒除以 60 的变量（分钟）来计算分钟数。

***问题*** 当分钟增加一时，秒数不断计数，我不知道如何解决这个问题。当秒数达到 60 时，我想在分钟上加一，然后又回到零而不将分钟设置为零。

这是我尝试过的：

```
 int frames = 0;
    int seconds = 0;
    int minutes = 0; 
```

***这是更新中：***

```
 protected override void Update(GameTime gameTime)
    {

        minutes = seconds / 60;

        seconds = frames / 60;

        frames += 1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T08:06:04.853

我建议您*只*计算帧数，并在需要时从中得出秒和分钟。因此，如果您确实需要更新每次`Update`调用中的所有变量，您将拥有：

```
frames++;
seconds = (frames / 60) % 60;
minutes = frames / (60 * 60); 
```

或者更清楚地说，定义一些常量：

常量 int FramesPerSecond = 60; 常量 int SecondsPerMinute = 60; const int FramesPerMinute = FramesPerSecond * SecondsPerMinute;

...

```
frames++;
seconds = (frames / FramesPerSecond) % SecondsPerMinute;
minutes = frames / FramesPerMinute; 
```

（如果您需要在一小时后将分钟重置为 0，则需要进一步扩展。）

目前尚不清楚您要尝试做什么-很可能有更好的方法来实现它。如果您确实要计算帧数，那很好……但是如果您要计算经过的时间，则应记住基本时间，然后从当前时间中减去该时间，而不是依赖于*精确*触发的计时器每秒一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T08:07:16.303

注意：如果您从 0 数到 60（分和秒），则您数 61 秒。所以在你的条件下从 0 到 59。

例如，一只手有 5 个手指，但如果我们从 0 开始数，我们有 6 个手指。（我们是变种人吗？）

:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T08:08:21.063

因此，如果您不需要 System.Threading.Timer 或 System.Threading.DispatcherTimer，您可以只使用标准 TimeSpan 并为其添加毫秒。或者使用自动递增的属性创建您自己的类似 TimeSpan 的类。

# c# - 加载某些控件时如何显示进度条？

> ID：13539455
> 
> 赞同：4
> 
> 时间：2012-11-24T08:03:39.657
> 
> 标签：c#, javascript, asp.net, ajax, progress-bar

当用户更改下拉列表时，我的控件是动态生成的。它们的值是从数据库中加载的。控件生成过程中如何显示进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:23:22.357

if(combobox.text=="type selected value") { 在此处加载进度条.. }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:08:04.163

您可以在表单上添加下载图像。当用户将更改下拉列表中的项目时，使用 javascript 调用事件 onchange。有添加处理程序的示例：

```
protected void Page_Load(object sender, EventArgs e)
        {
           dropdownlist1.Attributes.Add("onchange", "document.getElementById(\"loading_image\").style.visibility = \"visible\";");
        } 
```

在此之前，您必须在表单上添加图像：

```
<img style="visibility:hidden;" src="imageurl" runat="server" id="loading_image" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:06:26.893

用户做出选择后，插入一个`<img>`带有动画 .gif 进度条的标签。当控件返回加载到页面上时，使用 javascript 删除`<img>`标记并插入控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T08:16:55.583

为了显示实际进度，您需要一个上下文相关的进度条。[这](http://msdn.microsoft.com/en-us/magazine/hh580729.aspx)是展示如何通过服务器端操作的 ajax 显示实际进度的文章。

# ruby-on-rails - 使用 .rhtml 文件创建 Rails 应用程序作为启动页面

> ID：13539457
> 
> 赞同：1
> 
> 时间：2012-11-24T08:04:05.080
> 
> 标签：ruby-on-rails

我有一个应用程序，他们在主文件夹中使用**index.rhtml**作为启动页面。

那么我如何使用 Ruby on rails 自己做到这一点，即如何使用 rhtml 页面作为启动文件创建 rails 应用程序。

如有链接请发链接以供参考。

谢谢，库马尔·拉贾·唐萨姆塞蒂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:21:20.293

1.  删除 public.html
2.  将 'map.root :controller => "foo"' 添加到 routes.rb
3.  然后当然创建带有动作索引的控制器 foo。

# ruby-on-rails-3 - 将 cancan 应用于自定义操作

> ID：13539458
> 
> 赞同：2
> 
> 时间：2012-11-24T08:04:12.007
> 
> 标签：ruby-on-rails-3, cancan

我正在开发一个投票应用程序，并使用 Devise 和 Cancan 进行身份验证和授权。我有一个由 Devise 生成的用户模型和一个投票模型。投票属于用户。我的问题是我的 Polls 控制器中有一个自定义操作，我无法让 Cancan 使用该自定义操作。这是我试图在我的代码中做的：

配置/路由.rb：

```
match 'users/:user_id/polls' => 'polls#show_user' 
```

能力.rb：

```
def initialize(user)
  user ||= User.new

  if user.is? :admin
    can :manage, :all
  else # default
    can :read, :all
    can :manage, Poll, :user_id => user.id
    can :show_user, Poll, :user_id => user.id
  end # if else admin
end 
```

polls_controller.rb：

```
class PollsController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource :except => :show_user

  def show_user
    authorize! :show_user, user
    @polls = Poll.find_all_by_user_id(params[:user_id])
    render "index"
  end
  <...>
end 
```

这个想法是，只有在投票的所有者登录时才能查看用户的投票。但是，使用此代码，当投票的所有者登录时，该用户将被踢出该页面，并显示授权失败的消息. 如果我删除该行`authorize! :show_user, user`，则已登录的用户可以查看所有其他用户的投票（授权根本不起作用）。

谁能看到我可能缺少的东西？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:29:52.623

在`abiltity.rb`, 你的动词/名词组合是`:show_user`and `Poll`，但是在你的控制器中你使用`:show_user`and `user`--你需要使用 a`Poll`来代替。

相反，如果您希望允许用户查看他们自己的所有`Poll`s，您可能会使用以下内容：

`ability.rb`：

```
can :show_polls_for, User, :id => user.id 
```

`polls_controller.rb`：

```
def show_user
  authorize! :show_polls_for, user
  ...
end 
```

# jquery - 覆盖元素的灰显效果

> ID：13539460
> 
> 赞同：3
> 
> 时间：2012-11-24T08:04:16.777
> 
> 标签：jquery

我有这行 jQuery，一旦触发事件，它就会禁用所有按钮。

```
$("button").attr("disabled", "disabled"); 
```

默认情况下禁用的按钮是灰色的，但我想知道是否有办法覆盖这种行为，使按钮被禁用，但没有向用户提示？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T08:22:07.810

### 通过 CSS：

`button[disabled]`一种解决方案是使用css 选择器为禁用和启用按钮设置相同的样式，如下所示：

```
button[disabled], button{
        color:#fff;
        border: none;
        background-color: grey;
    } 
```

问题是浏览器默认有不同的按钮样式，所以你需要为你的按钮设置样式。

### 通过jQuery：

另一种解决方案是删除按钮的单击事件处理程序，因此替换此行：

```
$("button").attr("disabled", "disabled"); 
```

对于这个：

```
$('button').off('click'); 
```

要再次启用点击事件，请使用：

```
$('button').on('click'); 
```

更多关于添加/删除事件处理程序的信息，关于这个很好的[答案](https://stackoverflow.com/a/210345/670377)

**注意：**您应该为按钮添加 id（如果您使用多个按钮），因为上面的代码将删除对所有按钮的点击。

# image-processing - 在 WinRT 上通过 DirectX 处理图像

> ID：13539461
> 
> 赞同：0
> 
> 时间：2012-11-24T08:04:23.677
> 
> 标签：image-processing, directx, windows-runtime, shader

我的朋友试图找到在 WinRT 上进行图像处理（旋转、翻转、缩放、裁剪）的最佳方法，但 WriteableBitmapEx 太慢（在 Surface 和 WP8 上测试）。我认为，他必须使用 WinRT C++ DirectX 编写库，该库将通过着色器处理图像并将其链接到主 C# 项目，但我们没有任何示例，也不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:17:06.127

如果您想将其保留在 C# 中，您可以使用[SharpDX 。](http://sharpdx.org)

如果您不打算使用 windows phone，Direct2D 将适合图像处理。否则你必须使用 Direct3D。

# javascript - 使用什么框架/工具来构建支持向设备推送通知的基于 Web 的移动应用程序？

> ID：13539462
> 
> 赞同：0
> 
> 时间：2012-11-24T08:04:31.750
> 
> 标签：javascript, html, node.js, mobile, meteor

我最近一直在玩 Meteor.js，它看起来是一个非常棒的工具，可以用 javascript 构建以客户端为中心的实时 Web 应用程序。有人可以建议一些我可以用来创建基于 Web 的移动应用程序的好的框架/工具，这些框架/工具可以支持向设备推送通知之类的东西吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:46:12.537

在这种情况下，您需要一个具有此功能的包装器框架。使用任何框架，如 jQuery mobile、Sencha touch ... 并用 Phonegap/Cordova 框架包装它。

Phonegap（取决于移动平台）有一个与推送通知交互的插件。

这是[一个](https://github.com/shaders/phonegap-cordova-push-notifications)插件。

如果您需要更多信息，请使用 Google Phonegap。很高兴知道，phonegap 是框架的旧名称，新名称是 Cordova。您可以在任何移动平台上使用它。

# php - 上一级目录中选择性文件的访问权限

> ID：13539463
> 
> 赞同：1
> 
> 时间：2012-11-24T08:04:41.510
> 
> 标签：php, apache, security, permissions, restrictions

我有一个网站，里面有很多我定制的机密数据和代码。我聘请了一名开发人员为我进行设计和一些简单的 PHP 集成。

为了防止他看到所有文件，我在 mywebsite.com/testfolder 等子文件夹之一中创建了一个测试环境

现在我希望他访问位于根文件夹中的 db_test.php、function.php 和 parameter.php 文件，这样他就可以在执行脚本时包含它们（例如 mywebsite.com/testfolder/mainfile.php）和不要下载它们（使用 php 脚本或任何其他方式）。这个想法是为了防止他看到代码并按原样使用这些东西。

这也意味着除了上述文件之外，他对根文件夹的访问也应该受到完全限制。

我为他创建了一个测试数据库和一个单独的用户，因此数据库位是安全的。我还创建了一个 ftp 用户，它可以通过 ftp 访问 testfolder

我担心的是他可能会运行一个 php 脚本，该脚本将提供根文件夹中的所有秘密。

我自己已经能够通过从 testfolder 运行一个简单的 php 脚本来列出和下载文件。

请建议如何完成这项工作，因为我计划组建一个虚拟团队，他们将在网站上工作，该网站将限制对各种不同资源的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:15:11.703

**规则一**：永远不要在实时项目上开发。

您可以在其他地方创建一个开发环境（=网站），将一些无意义的文件和/或数据库放在那里，并允许您的开发人员完全访问。然后，不时地，您从存储库更新您的工作副本（您已经设置了 hg/git 存储库，不是吗），查看并测试更改，然后才将文件上传到您的主网站。

# indexing - mnesia match_object vs 复杂索引

> ID：13539466
> 
> 赞同：2
> 
> 时间：2012-11-24T08:04:48.950
> 
> 标签：indexing, erlang, mnesia

建表后`mnesia`，增加了更多的查询需求。有些需求需要表格记录的多个元素。

从文档中可知，第二个索引只能在一个元素上建立。

```
add_table_index(Tab, AttrName) -> {aborted, R} | {atomic, ok} 
```

`match_object`如果没有索引，当记录数量大幅增加时，我担心操作速度。

这种问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:01:52.777

诀窍是让 mnesia 使用您新形成的索引。通过手动调用索引查找然后在对象键上进行匹配，或者使用 QLC 查询。我不记得`match_object`默认使用索引。你必须对此进行测试。

# ruby - 对象（某个类的实例）的方法是否与 Ruby 中其类的实例方法相同？

> ID：13539467
> 
> 赞同：-2
> 
> 时间：2012-11-24T08:04:53.133
> 
> 标签：ruby, metaprogramming

在完成元编程 Ruby 中的“对象模型”一章后，我感到很困惑。对象（某个类的实例）的方法是否与 Ruby 中其类的实例方法相同？听起来是真的。因为我们知道对象的方法存储在它的类中。

```
class W;end

W.methods == Class.instance_methods # => true

# Also

String.instance_methods == "abc".methods # => true 
```

`W`是 的一个实例`Class`。但如果我重新打开`W`并为它定义一个新方法，那就是混淆了。

```
class W
  def self.foo
     "bar"
  end
end

W.methods == Class.instance_methods  # => false 
```

`W`是 的实例`Class`，`W`的方法是`Class`的实例方法。但如果`:foo`没有存储在 中`Class`，那么它存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:43:55.917

该方法`wtf`存储在`W`类中，而不是 Ruby 的`Class`类中。

将其视为继承，当您在继承类中定义方法时，它在继承类中不可用。同样，当您在类中定义方法时，该方法在`W`类中不可用`Class`。在继承类中添加方法时不会影响继承类。

虽然我不建议弄乱 Ruby 的内部 Class 类，但您可以通过猴子修补它来添加方法：

```
class Class
  def self.wtf
     "wtf"
  end
end 
```

现在`Class.methods.grep /wtf/`将返回您添加的方法。

# ruby-on-rails - 与（用户）个人资料相关的电子邮件通知

> ID：13539471
> 
> 赞同：0
> 
> 时间：2012-11-24T08:06:00.703
> 
> 标签：ruby-on-rails, notifications

现在我有一个名为 Profile 的模型，它与用户相关联（基本上在 Profile 中我保存与用户相关的所有信息，在 User 中我存储密码、last_sign_in 等内容）。我希望能够向用户发送一些（每周）电子邮件，我想知道是否只是在 Profile 表中添加一个新列。

但是，我认为我也想每天发送，所以我正在考虑创建一个与 Profile 关联的名为“Notifications”的新表。但是，我看不到我应该做哪种关联。

一个配置文件可以有多个通知，但一种通知可以在多个配置文件中。你们会怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:14:06.910

我认为这完全取决于您要完成的工作，听起来您有通知类型以及针对配置文件的通知实例。

如果是这种情况，那么您通常会有一对多的关系，一个配置文件可以有很多通知；在您的个人资料模型中包括 has_many => 通知。并且每个通知都有一个类型引用；在你的通知模型中包括belongs_to => profile 和has_many => notification_types。这意味着 notification_type 属于许多通知；在您的 NotificationType 模型中包含 belongs_to => 通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:30:27.627

我认为您不需要通知和配置文件/用户之间的任何关联。您可以只创建另一个名为 Notification 的模型，并使用名为 send_notification 的类级别方法。然后，您可以随时发送通知。

如果您想跟踪是否发送通知。您可以只拥有一个状态/标志列配置文件。每当您发送通知更新该列。

这只是我的看法。

# css - CSS如何处理特异性关系？

> ID：13539477
> 
> 赞同：2
> 
> 时间：2012-11-24T08:06:32.153
> 
> 标签：css, css-specificity

考虑来自 twitter bootstrap [https://github.com/twitter/bootstrap/blob/master/less/wells.less](https://github.com/twitter/bootstrap/blob/master/less/wells.less)`<div class="well well-large well-small" />`的以下样式

```
 // Base class
.well {
  min-height: 20px;
  padding: 19px;
  margin-bottom: 20px;
  background-color: @wellBackground;
  border: 1px solid darken(@wellBackground, 7%);
  .border-radius(@baseBorderRadius);
  .box-shadow(inset 0 1px 1px rgba(0,0,0,.05));
  blockquote {
    border-color: #ddd;
    border-color: rgba(0,0,0,.15);
  }
}

// Sizes
.well-large {
  padding: 24px;
  .border-radius(@borderRadiusLarge);
}
.well-small {
  padding: 9px;
  .border-radius(@borderRadiusSmall);
} 
```

CSS 如何决定在这种情况下应用哪个填充？会是 19px、24px、9px 还是未定义的值？我对特异性的理解是初步的，在这种情况下，似乎存在特异性联系`.well .well-large and .well-small`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T08:11:08.557

如果特异性相同，则按定义顺序应用它们。

例子：

```
.a {
    color: red;
}
.b {
    color: blue;
} 
```

* * *

```
<span class="a b">this is blue</span>
<span class="b a">this is blue</span> 
```

* * *

如果你很好奇，[这里](http://www.w3.org/TR/CSS21/cascade.html#cascade)是样式级联的规则。

# jquery - 检查分页中的所有复选框

> ID：13539481
> 
> 赞同：0
> 
> 时间：2012-11-24T08:07:01.203
> 
> 标签：jquery

我有一个页面，其中包含用户列表和每个之前的复选框，并且有一个 SELECT ALL 按钮。代码工作正常。但问题是，由于分页，只有当前页面中的复选框被选中，当我通过分页 NEXT 和 PREVIOUS 链接导航到其他页面时，复选框保持未选中状态。我找不到与这些相关的任何东西，或者我可能是在搜索错误的东西。请帮忙。

我正在使用此代码：

```
$('#selectAll').click(function(e) {
e.preventDefault();
var checkbox = $(":checkbox");
checkbox.attr('checked', !checkbox.attr('checked'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:50:17.910

抱歉，我发现正在使用 datatables.js 并且选择所有复选框的正确方法是使用这段代码：

```
$('#selectAll').click(function()({
  $('input', oTable.fnGetNodes()).each( function() {
    $('input', oTable.fnGetNodes()).attr('checked','checked');
  } );
}); 
```

它有效，现在所有复选框都被选中，即使移动到其他分页页面也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:51:35.887

```
$('#selectAll').click(function(e) {
{
     var elements = ['#chk1' ,'#chk2','#chk3','#chk4','#chk5','#chk6'];
     jQuery.each(elements, function(element) {
          var checked = $(elements[element]).is(':checked');
         $(elements[element]).attr('checked', true);
     });
}); 
```

# matlab - 查找具有多个属性的行

> ID：13539482
> 
> 赞同：3
> 
> 时间：2012-11-24T08:07:03.887
> 
> 标签：matlab

我有一个`10000x5`带有格式的大小矩阵`[id, year, month, day, value]`

例如：

```
[ 1 2004 1 1 100;
  1 2004 1 2 201;
  2 2004 1 1  30;
  2 2004 1 2 123;
  2 2005 1 1 300;
  2 2005 1 2 103;
  ...] 
```

给定搜索条件，我想过滤并复制这个矩阵的一个子集到另一个矩阵中`year==2004 && month==1 && day==1`。所以我的想法是首先找出与给定标准匹配的向量的行索引是什么。

首先我尝试过，

```
[row] = find((data(:,2) == 2004 && data(:,3) == 1 && data(:,4) == 1)); 
```

但它似乎不适用于多个标准，我得到了错误

```
Operands to the || and && operators must be convertible to logical scalar values. 
```

接下来我尝试了

```
key = [2004 1 1];
[~,index] = ismember(data,key,'rows') 
```

但它说

```
Error using ismember. A and S must have the same number of columns. 
```

有什么方法可以优化语法，或者使用其他 API 来搜索多个条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T19:10:19.903

[在此处](https://stackoverflow.com/questions/20293118/find-corresponding-rows-if-it-has-some-missing-elements)查看建议的答案。它提出了一种替代方法。在您的情况下，您将拥有：

```
key = [NaN 2004 1 1 NaN]; 
```

# relational-database - 关系表规范化

> ID：13539489
> 
> 赞同：0
> 
> 时间：2012-11-24T08:08:14.383
> 
> 标签：relational-database, database-normalization

我想知道BCNF中的关系表是否

学生（学生编号、身份证、出生日期、书名）

• 学生编号 (StudentNum) 唯一标识国民登记身份证 (NRIC) 和学生的出生日期 (DateOfBirth)。• NRIC 确定学生的出生日期 (DateOfBirth)。

根据我的分析，关系是2NF。更改为 BCNF 后，它看起来像这样

```
Student(StudentNum, NRIC, BookTitle)
StudentDetails(NRIC, DateOfBirth) 
```

我的查询；

1.  变更前 2NF
2.  更改后的 BCNF

我对么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:18:39.070

不，学生在 1NF，而不是 2NF。

你从

```
Student(StudentNum, NRIC, DateOfBirth, BookTitle) 
```

以及这些依赖项。

```
StudentNum->NRIC
StudentNum->DateOfBirth
NRIC->DateOfBirth 
```

一个关系在 2NF 中当且仅当

*   它在 1NF 中，并且
*   每个非主属性都依赖于*每个候选键的**整体*，而不仅仅是*任何*候选键的一部分。

 **因此，您的第一项工作是确定 Student 关系的候选键。Student 关系只有一个候选键，即 {StudentNum, BookTitle}。

你的教科书应该至少有一种算法来确定关系的所有候选键。

由于 NRIC 依赖于 StudentNum，并且 StudentNum 不是候选键（它只是候选键的*一部分*），因此关系 Student 不在 2NF 中。通过改变来解决这个问题

```
Student(StudentNum, NRIC, DateOfBirth, BookTitle) 
```

为此，通过消除对 StudentNum 的部分密钥依赖。¹

*   学生（**StudentNum**、NRIC、DateOfBirth）
*   StudentBooks ( **StudentNum, BookTitle** )

StudentBooks 根本没有非主要属性；现在是6NF。学生处于 2NF，但尚未处于 3NF 或 BCNF。你知道为什么吗？

看来你*确实*知道为什么。确实存在传递依赖：StudentNum->NRIC 和 NRIC->DateOfBirth。像这样修复传递依赖。

*   学生 ( **StudentNum** , NRIC)
*   身份证（**身份证**，出生日期）
*   StudentBooks ( **StudentNum, BookTitle** )

所有这三个关系都在 6NF 中。

* * *

1.  这种分解可能*看起来*有点奇怪。这是因为教科书示例通常不会为关系或属性使用有意义的名称。关系通常命名为R{ABCD}、R [1] {ABC}、R [2] {AD}等。上面涉及到的分解

    *   投影一个新的关系 { **StudentNum** , NRIC, DateOfBirth} 以消除部分键依赖，
    *   观察到名称“Student”不再标识由 { **StudentNum, BookTitle** } 组成的关系，
    *   将名称“学生”从原始关系移动到新的投影关系，以及
    *   为原始关系想出一个新名称 StudentBooks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:22:55.657

规范化背后的想法是通过为那些可能会在表上造成任何冗余的列创建额外的表来尽可能地消除行的冗余。

例如，如果我们从下表开始： Student(StudentNum, NRIC, DateOfBirth, BookTitle) 在这种情况下唯一的列是 StudentNum 和 NRIC，其他 2 个字段不是因为其他学生可能有相同的出生日期和其他可能是借了同名的书。从那里我们看到了标准化的必要性，这样我们就不会陷入数据冗余中，例如，如果同一个学生借了 100 本不同的书怎么办？

如果一切都在一个表中，我们最终可能会得到大量冗余（重复）数据。

我建议您查看 5 种范式[http://www.bkent.net/Doc/simple5.htm的本指南](http://www.bkent.net/Doc/simple5.htm)

更新：

鉴于一切都在一个表中，我认为开始关系最好被视为第一范式。我猜你得到的关系是 2NF，因为如果不同的学生借了同一本书怎么办？这可能会导致学生表中的重复。

我认为您必须提供有关构成您的关系的场景的更多信息，以便我们可以更好地对此进行分析。这在很大程度上取决于业务规则。**

# android - XmlPullParser 是否需要对 2.3.3 及更早的 Android 版本进行特殊处理？

> ID：13539491
> 
> 赞同：0
> 
> 时间：2012-11-24T08:08:25.057
> 
> 标签：android, xml-parsing, android-2.2-froyo, android-2.3-gingerbread, xmlpullparser

我通过`XmlPullParser`使用如下代码从远程 XML 文件中提取内容：

```
 factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    parser = factory.newPullParser();
    parser.setInput(xml, "UTF-8");

    eventType = parser.getEventType();

    // process tag while not reaching the end of document
    while (eventType != XmlPullParser.END_DOCUMENT) {
        switch (eventType) {
            // at start of document: START_DOCUMENT
            case XmlPullParser.START_DOCUMENT:
                break;
            // at start of a tag: START_TAG
            case XmlPullParser.START_TAG:
                //get tag name
                String tagName = parser.getName();
                if (tagName.equalsIgnoreCase("item")) {
                    listObject = new MyClass();
                } else if (tagName.equalsIgnoreCase("yy")) {
                    listObject.setYY(parser.nextText());
                } else if (tagName.equalsIgnoreCase("zz")) {
                    listObject.setZZ(parser.nextText());
                } 
                break;
        }
        // jump to next event
        eventType = parser.next(); 
```

如您所见，此代码中没有新的或奇怪的地方。

现在，在 Android 3.0 和更新的系统上，当获取的 XML 内容进入这个解析器时，它们看起来“正常”，如下图所示：

![](../Images/322552fead81ccdebf1c13c43028938c.png)

您可以看到 XML 文件的内容已被正确获取。

**但是当我将同一个项目连接到 Android 2.3.3 或更早的设备**时，我得到了**不同**的结果！查看在 Android 2.2 设备上拍摄的相同图像。

![](../Images/c39492c646d71e462b3ed8db07bd525e.png)

你看到这些奇怪的字符`\uoooo`！项目也`buffer`已更改为`txtBuf`！

这是什么意思呢？为什么在 Android 2.3.3 以下会发生这种情况以及如何解决此问题？这会破坏我的解析器并杀死我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:21:29.250

修改你的解析：

```
XmlPullParser xpp = XmlPullParserFactory.newInstance().newPullParser();
xpp.setInput(xml, "UTF-8");

while (xpp.getEventType() != XmlPullParser.END_DOCUMENT)
{
    if (xpp.getEventType() == XmlPullParser.START_TAG)
    {
        if (xpp.getName().equalsIgnoreCase("item"))
        {
            listObject = new MyClass();
        }
        else if (xpp.getName().equalsIgnoreCase("yy"))
        {
            listObject.setYY(parser.nextText());
        }
        else if (xpp.getName().equalsIgnoreCase("zz"))
        {
            listObject.setZZ(parser.nextText());
        }
    }
    else if(xpp.getEventType() == XmlPullParser.END_TAG)
    {
        listObject = null;
    }
    xpp.next();
} 
```

# javascript - 如何通过 JavaScript 检测键盘修饰符（Ctrl 或 Shift）

> ID：13539493
> 
> 赞同：18
> 
> 时间：2012-11-24T08:08:45.400
> 
> 标签：javascript

**我有一个检测最大长度的功能。但问题是当最大长度达到 Ctrl+A 组合不起作用。如何通过 javascript 检测 Ctrl+A 组合。**

这是我的最大长度代码。

```
if (event.keyCode==8 || event.keyCode==9 || event.keyCode==37 || event.keyCode==39 ){
        return true;
} else {            
        if((t.length)>=50) {    
            return false;
        }   
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-24T09:11:10.807

检查`event.ctrlKey`：

```
function keyHandler(event) {
    event = event || window.event;
    if(event.keyCode==65 && event.ctrlKey) {
        // ctrl+a was typed.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T08:56:00.387

关键代码：

```
shift   16
ctrl    17
alt     18 
```

你的jQuery：

```
$(document).keydown(function (e) {
    if (e.keyCode == 18) {
        alert("ALT was pressed");
    }
}); 
```

[JavaScript 疯狂：键盘事件](http://unixpapa.com/js/key.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T10:44:40.037

您可以使用以下内容：

```
document.onkeypress = function(evt) {
  evt = evt || window.event;
  etv = evt;
  switch (etv.keyCode) {
    case 16:
      // Code to do when Shift presed
      console.log('Pressed [SHIFT]');
      break;
    case 17:
      // Code to do when CTRL presed
      console.log('Pressed [CTRL]');
      break;
    case 32:
      // Code to do when ALT presed
      console.log('Pressed [ALT]');
      break;
  }
};
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T18:47:52.217

我也需要一个解决方案，所以找到了一些有用的东西，将其清理为更少的代码，以及 ES6 ... [JSFiddle 链接](https://jsfiddle.net/jstgermain/88k3a1vv/ "JSFiddle 链接")

```
function isCapsLock(event=window.event) {
  const code = event.charCode || event.keyCode;

  if (code > 64 && code < 91 && !event.shiftKey) {
    return true;
  }

  return false;
}

document.getElementById("text").addEventListener("keypress", event => {
  const status = document.getElementById("status");
  if (isCapsLock(event)) {
    status.innerHTML = "CapsLocks enabled";
    status.style.color = "red";
  } else {
    status.innerHTML = "CapsLocks disabled";
    status.style.color = "blue";
  }
}, false);
```

```
<input type="text" id="text" /><br>
<span id="status"></span>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-15T16:26:28.183

这是一个非常古老的问题。gilly3 的答案只有在我们手头有一个 KeyboardEvent 类型的事件对象作为函数参数传递时才有效。如果我们没有可用的**事件**对象（例如此函数），如何检测当前的控制键状态？

```
function testModifierKey() {
  // have I some modifier key hold down at this running time?
} 
```

在从spikebrehm的[https://gist.github.com/spikebrehm/3747378](https://gist.github.com/spikebrehm/3747378)进行长时间搜索后，我找到了解决方案。他的解决方案是使用带有全局变量的 jQuery 随时跟踪修饰键状态。

全局变量**window.modifierKey**可以在任何情况下使用，而不需要**事件**对象。

```
function testModifierKey() {
  // have I have some modifier key hold down at this executing time?
  if(window.modifierKey) {
    console.log("Some modifier key among shift, ctrl, alt key is currently down.");
    // do something at this condition... for example, delete item without confirmation.
  } else {
    console.log("No modifier key is currently down.");
    // do something at other condition... for example, delete this item from shopping cart with confirmation.
  }
} 
```

这是他要加载到您的 HTML 文档中的脚本：

```
// source: https://gist.github.com/spikebrehm/3747378
// modifierKey used to check if cmd+click, shift+click, etc. 
!function($, global){
  var $doc = $(document);
  var keys;

  global.modifierKey = false;

   global.keys = keys = {
      'UP': 38,
      'DOWN': 40,
      'LEFT': 37,
      'RIGHT': 39,
      'RETURN': 13,
      'ESCAPE': 27,
      'BACKSPACE': 8,
      'SPACE': 32
  };

  // borrowed from Galleria.js
  var keyboard = {
    map: {},
    bound: false,

    press: function(e) {
      var key = e.keyCode || e.which;
      if ( key in keyboard.map && typeof keyboard.map[key] === 'function' ) {
        keyboard.map[key].call(self, e);
      }
    },

    attach: function(map){
      var key, up;

      for(key in map) {
        if (map.hasOwnProperty(key)) {
          up = key.toUpperCase();
          if (up in keyboard.keys) {
            keyboard.map[keyboard.keys[up]] = map[key];
          } else {
            keyboard.map[up] = map[key];
          }
        }
      }
      if (!keyboard.bound) {
        keyboard.bound = true;
        $doc.bind('keydown', keyboard.press);
      }
    },

    detach: function() {
      keyboard.bound = false;
      keyboard.map = {};
      $doc.unbind('keydown', keyboard.press);
    }
  };

  $doc.keydown(function(e) {
    var key = e.keyCode || e.which;
    if (key === 16 || key === 91 || key === 18 || key === 17) {
      modifierKey = true;
    } else {
      modifierKey = false;
    }
  });

  $doc.keyup(function(e) {
    modifierKey = false;
  });
}(jQuery, window); 
```

# asp.net-mvc-4 - ASP.NET MVC4 如何在一个规则中创建包含 js 和 css 的捆绑包？

> ID：13539494
> 
> 赞同：8
> 
> 时间：2012-11-24T08:08:45.917
> 
> 标签：asp.net-mvc-4, bundle, web-optimization

我有一个 superfish jquery 插件，它有 4 个 js 和 1 个 css：

```
<script src="~/Scripts/JQ_Addons/SuperFish/jquery.bgiframe.min.js"></script>
<script src="~/Scripts/JQ_Addons/SuperFish/hoverIntent.js"></script>
<script src="~/Scripts/JQ_Addons/SuperFish/supersubs.js"></script>
<script src="~/Scripts/JQ_Addons/SuperFish/superfish.js"></script>
<link href="~/Scripts/JQ_Addons/SuperFish/superfish.css" rel="stylesheet" /> 
```

我想为所有这些创建一个包，但是当我调用 bundles.Add() 时，它只能添加一种类型的包，`ScriptBundle`或者`StyleBundle`.

```
bundles.Add(new ScriptBundle("~/bundles/superfish").Include(
            "~/Scripts/JQ_Addons/SuperFish/jquery.bgiframe.min.js",
            "~/Scripts/JQ_Addons/SuperFish/hoverIntent.js",
            "~/Scripts/JQ_Addons/SuperFish/supersubs.js",
            "~/Scripts/JQ_Addons/SuperFish/superfish.js")); // I can not add css here 
```

在视图中，我只能选择渲染一种类型的包：

```
@Styles.Render or @Script.Render 
```

所以，我的问题是：是否可以只创建一个包含 js 和 css 的捆绑规则？在我看来，我想要类似的东西：

```
@Bundles.Render("~/bundles/superfish") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T13:04:18.973

您不能与浏览器如何处理这些文件有关的主要原因。

*   要检索样式表，html 标签是`<link>`
*   要检索脚本，html 标记是`<script>`

html 标签告诉浏览器文件的内容是什么。

在 MVC 服务器端代码上，使用捆绑的主要原因是将脚本和链接文件合并到一个文件中。然后将它们最小化。捆绑使用基于文件类型的不同最小化函数。如果将脚本和 css 组合到一个文件中，捆绑代码将无法正确最小化生成的文件。

# javascript - 每个提交按钮调用相同的函数

> ID：13539497
> 
> 赞同：1
> 
> 时间：2012-11-24T08:09:20.263
> 
> 标签：javascript, jquery, jsf

我正在调用页面刷新后选择组件 ID 的函数：

```
$(document).ready(
  function() {
    document.getElementById('form:#{myBDE.componentId}').focus();
    document.getElementById('form:#{myBDE.componentId}').select();
  }
) 
```

我的提交按钮示例：

```
<h:form id="form">
  <h:commandButton id="btnSubmit" action="#{myBDE.save}" type="submit" >
    <f:ajax execute="@form" render="@form"/>
  </h:commandButton>
  ...
</form> 
```

每次单击任何提交按钮时，如何创建要调用的相同函数（我使用的是 ajax，所以我在不重新加载页面的情况下工作，document.ready 对我来说还不够）。可能吗？

**更新**（部分功能解决方案）：

```
var myFunc = function() {
  document.getElementById('form:#{myBDE.componentId}').focus();
  document.getElementById('form:#{myBDE.componentId}').select();
};

$(document).ready(function() {
  myFunc();
  $('input[type=submit]').click(myFunc);    
}); 
```

我可以调用添加`onclick="return myFunc();"`到的函数`h:commandButton`，问题是，`<f:ajax>`在调用函数后呈现表单，因此选择和焦点被清除:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:20:35.703

为函数命名（目前，它是一个匿名函数），然后在需要时调用该函数。

```
$(document).ready(
  onPageLoad(); // call it when page loads    
  $('form').submit(onPageLoad); // also call whenever a form is submitted
)

function onPageLoad() {
    document.getElementById('form:#{myBDE.componentId}').focus();
    document.getElementById('form:#{myBDE.componentId}').select();
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:16:35.990

您应该将处理程序委托给更高级别的 dom 元素：

```
$(document).ready(function() {
  $('h:body').on('click', 'input[type=submit]', function() {
    document.getElementById('form:#{myBDE.componentId}').focus();
    document.getElementById('form:#{myBDE.componentId}').select();
  });    
}); 
```

请参阅[jQuery.on()](http://api.jquery.com/on/)。

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。

然后后来：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

因此，该事件将针对该类型的所有元素进行处理，即使它们稍后通过 ajax 添加。请注意，我`h:body`在这里用作委托给的元素，但您可以使用在 document.ready 时存在的任何元素，并保证是所有提交输入的祖先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T08:34:54.457

这应该工作

```
$('input[type="submit"]').click(function(){ 
  document.getElementById('form:#{myBDE.componentId}').focus(); 
  document.getElementById('form:#{myBDE.componentId}').select();
 }); 
```

事实上，您可以将函数绑定到任何事件。在这种情况下，它是属性 type=submit 的输入标签的点击事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T08:19:55.577

如果您有不同的 ID 或姓名，那只是做类似的事情

```
$(document).ready(function(){
    $('#btn1, #btn2, #btn3').on('click', function(evt){
        evt.preventDefault();
        //your code
        $(this).submit(); // or not submit, your choice
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T08:37:28.913

试试这个东西

```
 $(document).ready( function (){

           $('input[type=submit]').click( function (){
                  // Whatever you want on submit button click option.
           }
 }); 
```

这将抓取页面上的每个提交按钮并将点击事件绑定到它，并且此代码将在任何提交按钮点击时调用。

# python - 无法从网站中提取 HTML

> ID：13539502
> 
> 赞同：3
> 
> 时间：2012-11-24T08:10:16.207
> 
> 标签：python, html, web, urllib

我从网站中提取 HTML，通过发送标头使网站认为我只是浏览网站的用户，如下所示：

```
def page(goo):
    import fileinput
    import sys, heapq, array, urllib
    import BeautifulSoup
    from BeautifulSoup import BeautifulSoup
    import re
    from urllib import FancyURLopener
    class MyOpener(FancyURLopener):
        version = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11'
    myopener = MyOpener()
    filehandle = myopener.open(goo)
    return filehandle.read()
page=page(WebSite) 
```

这适用于大多数网站，甚至是 Google 和 Wikipedia，但不适用于[Tmart.com](http://www.tmart.com/)。不知怎的，Tmart 可以看到它不是网络浏览器，并返回错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T08:23:16.263

他们可能会检测到您没有 JavaScript 解释器？如果没有看到您收到的错误消息，很难说。有一种方法可以保证有效。那就是使用 Selenium Webdriver 直接驱动浏览器。

Selenium 通常用于功能测试网站。但对于抓取使用 JavaScript 的网站也非常有效。

```
from selenium import webdriver

browser = webdriver.Chrome()
browser.get('http://www.someurl.com')

html = browser.page_source 
```

在此处查看浏览器上可用的所有方法：[http](http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webdriver.py) ://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webdriver.py 为此，您还需要拥有可用的 chromedriver 可执行文件：[http ://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

# haxe - 如何在haxe中生成php+html

> ID：13539503
> 
> 赞同：0
> 
> 时间：2012-11-24T08:10:16.073
> 
> 标签：haxe

我想用 heXa 在 HTML 中生成 php 代码。例如：

```
<?php
$temp = 'Hello';
?>
<html>
<body>
<?php echo $temp?>
</body>
</html> 
```

我将如何使用 haxe 编写上述内容？haxe 站点向您展示了如何生成 PHP 代码，但没有提及如何使用 HTML 生成 PHP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T09:21:32.177

Haxe 不是一种可以以这种方式从 html 文件中调用的脚本语言。您必须调整一个工作流程，将您的 html 模板和数据准备为单独的单元，并让编译的应用程序根据您的意愿将它们组合起来。

这是一个可以在任何 Haxe 服务器目标语言（php、neko、cpp）中工作的快速示例。（也许还有 java 和 c# - 不确定模板实现是否准备好）：

```
package ;

import haxe.Template;
import neko.Lib;

class Main 
{
    static function main() 
    {
        var data = { greeting: 'Hello' };       
        var template = new Template('<html><body>::greeting::</body></html>');      

        var output = template.execute(data);
        Sys.print(output);      
    }   
} 
```

有一堆 Haxe 模板引擎，例如 .NET Razor 克隆 [Erazor](https://github.com/ciscoheat/erazor)

# javascript - node.js 或 casper.js 中的变量范围

> ID：13539510
> 
> 赞同：1
> 
> 时间：2012-11-24T08:10:51.453
> 
> 标签：javascript, node.js, scope, phantomjs, casperjs

我觉得问这个问题很愚蠢。但是我对下面的变量范围有一个烦人的问题`aaa`。最后不应该输出`test`吗？但事实并非如此。`aaa`在函数中使用我做错了什么？

```
var casper = require('casper').create();

var aaa = 'test';
casper.start('http://google.com/', function() {
    this.echo("I'm in");
});

casper.run(function(aaa) {
  this.echo(aaa);
  this.exit();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T08:15:14.523

当您 echo out 时`aaa`，它使用`aaa`函数的第一个参数中定义的 。如果您的第一个参数被调用`bbb`或其他什么，那么您将看到您期望的输出，因为它将使用`aaa`外部闭包中定义的输出。

# ruby-on-rails - rails form_for mongoid 错误

> ID：13539520
> 
> 赞同：1
> 
> 时间：2012-11-24T08:12:25.650
> 
> 标签：ruby-on-rails, mongoid, form-for

嗨，我有一个用于更新用户帐户的简单表格，这是我的控制器

```
def edit
  @users = User.find(params[:id])
end 
```

这是我的看法

```
<%= form_for :user do |f| %>

<%= f.label :first_name %> <br />
<%= f.text_field :name  ,:value => @users.name%><br />

<%= f.label :last_name %> <br />
<%= f.text_field :lname  ,:value => @users.lname%><br />

<%= f.label :email %> <br />
<%= f.email_field :email  ,:value => @users.email%><br />

<%= f.label :id %> <br />
<%= f.text_field :id  ,:value => @users.id%><br />

<br />
<%= f.submit ({:confirm => "Are you sure?"}) %>
<% end %> 
```

当我单击提交时，我收到以下 mongoid 错误

```
Mongoid::Errors::InvalidFind in UsersController#edit 
```

问题：使用 nil 调用 Document.find 无效。

总结： Document.find 期望参数为 1 个或多个 id，如果提供 1 个 id，将返回单个文档，如果提供多个​​ id，则返回文档数组。

解决方法：这很可能是由于将参数直接传递给 find 造成的，而参数要么不存在，要么访问它的键不正确。

我对 Rails 相当陌生，这是我第一次使用 mongoDB。任何输入都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:33:46.680

尝试使用此表格

```
<%= form_for(@users) do |f| %>
   ...
   ...
<% end %> 
```

错误的出现是因为您在您`:user`的`invalid find``user controller`

# xcode - 如何约束子视图，使其不能被拖到其父视图的范围之外。(iOS)

> ID：13539521
> 
> 赞同：0
> 
> 时间：2012-11-24T08:12:41.030
> 
> 标签：xcode, uiview, uigesturerecognizer, subview

如何约束子视图在其父视图中的位置。我在 UIView 中有一个子视图。可以通过手势识别器拖动子视图。如何约束子视图，使其不能被拖出父视图的边界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:42:21.760

要约束可拖动视图，您需要在移动它时检查它的位置，然后在超出边界时将其强制到受约束的位置。所以假设你使用`touchesMoved`：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    ...

    CGRect frame = mySubview.frame; 
    if (frame.origin.x < boundaryX) { //frame exceeds the horizontal boundary
        frame.origin.x = boundaryX;
        mySubview.frame = frame;
    }
} 
```

所以假设boundaryX是父视图的原点，那么这样子视图将永远不会超过该边界。您需要对原点执行相同的操作，并`y`从各个方面进行约束。`x + width``y + height`

希望这可以帮助。

# erlang - 给出本地 pid 和节点名称，如何转换为远程 pid？

> ID：13539527
> 
> 赞同：0
> 
> 时间：2012-11-24T08:13:34.490
> 
> 标签：erlang

一个远程 pid 注册了它的名字`"local pid"`，并且`"its node"`名字已经注册到了`mnesia`表中。如果另一个节点的 pid 获取上述`"local pid<0.xxx.xxx>"`和节点名称，如何转换为`remote pid<xxx.xxx.xxx>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:04:17.060

我真的不明白**为什么**你必须做任何特别的事情。在这里，我将创建一个 mnesia 表，在各个节点上运行`l@renat`并`r@renat`写入和读取 pid，并表明它们不需要“转换”pid，因为 Erlang 的分发机制会**自动**处理它。让这一切正常工作会有点长。

首先在`l@renat`我们连接的节点或其他节点上创建我们的 mnesia 模式：

```
Eshell V5.9.1  (abort with ^G)
(l@renat)1> net_adm:ping(r@renat). 
pong
(l@renat)3> mnesia:create_schema([node()|nodes()]).
ok
(l@renat)5> mnesia:start().
ok 
```

在节点上`r@renat`，我们刚刚启动了 mnesia：

```
Eshell V5.9.1  (abort with ^G)
(r@renat)1> mnesia:start().
ok 
```

然后在节点上`l@renat`创建一个表并插入一个包含本地（到`l@renat`）pid的条目：

```
(l@renat)6> mnesia:create_table(local, [{attributes,[node,pid]},{ram_copies,[node()|nodes()]}]).
{atomic,ok}
(l@renat)8> mnesia:transaction(fun () -> mnesia:write({local,node(),self()}) end).
{atomic,ok} 
```

请注意，我没有定义记录，而是明确地读取/写入记录元组。您可以这样做，但最好使用记录。现在在节点上`r@renat`我们可以读取相同的记录：

```
(r@renat)10> {atomic,[Lr]} = mnesia:transaction(fun () -> mnesia:read(local, l@renat) end).
{atomic,[{local,l@renat,<5893.37.0>}]}
(r@renat)11> node(element(3, Lr)).
l@renat
(r@renat)12> mnesia:transaction(fun () -> mnesia:write({local,node(),self()}) end).
{atomic,ok} 
```

我们看到 pid 指的是另一个 node() node 上的进程`l@renat`。然后，我们向包含本地（到`r@renat`）pid 的表添加了一条记录。如果我们然后在 node 上读取该记录，`l@renat`我们会看到它包含 node 上进程的 pid `r@renat`：

```
(l@renat)13> {atomic,[Rp]} = mnesia:transaction(fun () -> mnesia:read(local, r@renat) end).
{atomic,[{local,r@renat,<6007.85.0>}]}
(l@renat)14> node(element(3,Rp)).
r@renat 
```

所以我们看到不需要“转换”。

事实上，任何形式的“转换”实际上都是毫无意义的。pid 指的是特定节点上的特定进程，因此尝试转换它没有任何意义。它是一种原子数据类型。即使您可以转换它，您也不知道它实际指的是什么过程（如果有的话）。

# assetic - 在 Symfony 之外使用 Assetic 的 Css Rewriter

> ID：13539529
> 
> 赞同：2
> 
> 时间：2012-11-24T08:13:47.860
> 
> 标签：assetic

首先让我说我完全不知道我*应*该做什么，因为关于 Assetic 的文档和可用信息要么是有限的，要么是面向 Symfony 的。

这是我的文件夹结构。

```
Assetic
   + assets
      + css
         + example.css
   + docs
   + src
   + tests
   + vendor
   + index.php
   + styles.php 
```

现在，我有以下测试代码。基本上我克隆了一份 Assetic 的干净副本并运行了`composer install`. 然后我创建了一个文件，它只是用 HTMLs标签`index.php`链接到我的文件。`styles.php``<link>`

这是我的`styles.php`

```
<?php

require 'vendor/autoload.php';

$assetPath = __DIR__.'/assets/css/example.css';
$assetBasePath = __DIR__.'/assets/css';

$asset = new Assetic\Asset\FileAsset($assetPath, array(), $assetBasePath, 'example.css');

header('Content-Type: text/css');

$asset->setTargetPath(__DIR__);

echo $asset->dump(new Assetic\Filter\CssRewriteFilter); 
```

这是我的`example.css`样式表。

```
body {
    background-image: url('../img/background.png');
} 
```

当我`styles.php`在浏览器中加载时，我得到以下输出。

```
url('../img/background.png'); 
```

这与实际的 CSS 相同。如果我使用来自 Mr. Clay 的 CSS URI Rewriter，我会得到预期的输出。

```
url('/Assetic/assets/img/background.png'); 
```

那么我对 Assetic 做错了什么？我不知道我应该通过什么路径以及去哪里。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:45:30.250

只是很难用它，但最后（在阅读了 webassets 的文档后，assetic 所基于的 python 库）我克服了缺乏文档的问题。

干得好

```
<?php

require 'vendor/autoload.php';

$assetPath = __DIR__.'/assets/css/example.css';

$asset = new Assetic\Asset\FileAsset($assetPath, array(new Assetic\Filter\CssRewriteFilter), dirname($assetPath), '/assets/css');
// I assume the 'assets' directory is at the root of your website

header('Content-Type: text/css');

$asset->setTargetPath('/path/to/dumped/asset');
// As above, it's the path to the generated asset from your http root

echo $asset->dump(); 
```

我不确定是否很清楚，所以请问您是否有不明白的地方。

# openssl - 从 DER 格式的证书中提取公钥

> ID：13539535
> 
> 赞同：19
> 
> 时间：2012-11-24T08:14:47.847
> 
> 标签：openssl, certificate, extract, public-key, der

我有一个 .cer 证书文件，需要提取公钥。我只能提取为 PEM 格式。**“outform”参数什么都不做**。

```
openssl x509 -inform PEM -in certificate.cer -outform DER -pubkey -noout > publickey.der 
```

是否可以提取 DER 格式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T09:12:11.110

解决解码base64 PEM文件：

```
openssl x509 -in certificate.cer -pubkey -noout | openssl enc -base64 -d > publickey.der 
```

欢迎任何其他想法。

# javascript - asp.net mvc 复选框取消选中对 toher 的检查

> ID：13539539
> 
> 赞同：0
> 
> 时间：2012-11-24T08:15:48.977
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-2

我有一个带有两个复选框的 MVC 2 视图，如下所示：

```
 <%: Html.Label("Is Customer")%>
                   <% 
                       accountStatus = Model.AccountStatus == "Customer" ? true : false;
                    %>
                    <%: Html.CheckBox("IsCustomer", accountStatus.Value, new { onclick = "uncheckAll(this);" })%> 
```

我希望如果一个复选框被选中，那么另一个复选框未被选中。我得到这样的ID：

```
function uncheckAll(ID) {
    var search_form = document.getElementById('frmAccountEdit');
    var IsTrialAccount = document.getElementById('IsTrialAccount');  // getElementsByTagName("input");
    var IsCustomer = document.getElementById('IsCustomer'); 
```

如何使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:32:01.153

好吧，试试下面的。它将清除 IsTrialAccount 和 IsCustomer，然后检查选中的复选框。如果您不希望“IsTrialAccount”具有相同的功能，则不要将其添加到其按钮单击事件并删除“|| inputs[j].name == “IsCustomer””部分

```
function uncheckAll(Checkbox)
{
    var inputs = document.getElementsByTagName("input");
    for(var j = 0; j < inputs.length; j++) {
      if(inputs[j].type == "checkbox" && 
        (inputs[j].name == "IsTrialAccount" || inputs[j].name == "IsCustomer"))
      {
         inputs[j].checked = false;
      }     
    }
   // Check the selected checkbox
   Checkbox.checked = true;
 } 
```

# php - .gif 图像未复制

> ID：13539545
> 
> 赞同：0
> 
> 时间：2012-11-24T08:16:39.297
> 
> 标签：php

我在处理 .gif 图像和处理这些图像时遇到问题。这是我的图像处理代码的相关部分。一些 .gif 文件是上传的，而另一些则不是。在扩展方面，我看不出它们之间有什么区别。根据属性，它们都是 .gif，它们在 localhost 的 Internet Explorer 中可以正常播放。

```
 if($fileExt == "jpg" || $fileExt == "jpeg" || $fileExt == "png" || $fileExt == "gif"){
                        $filename = random_filename($alphas).'.'.$fileExt;
                        $destination = 'member/'.$_SESSION['user_id'].'/large/'.$filename;
                        move_uploaded_file($file, $destination); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:30:43.987

首先你应该回显 $filename

```
if($fileExt == "jpg" || $fileExt == "jpeg" || $fileExt == "png" || $fileExt == "gif"){
            $filename = random_filename($alphas).'.'.$fileExt;
            echo $filename . '<br>';
            $destination = 'member/'.$_SESSION['user_id'].'/large/'.$filename;
            move_uploaded_file($file, $destination);
} 
```

只是为了确认您的 if 块在每种情况下都在执行。如果没有回显 $fileExt 以检查您是否获得了 $fileExt 的预期值

因此，如果不是这种情况，请 print_r $_FILES

```
 echo '<pre>'; print_r($_FILES); echo '</pre>'; 
```

如果您在 $_FILES 中看到错误，请检查您的 php.ini 以了解上传限制，尝试找到此行

```
 upload_max_filesize = 10M 
```

通常由于超出上传限制而导致上传失败，请检查文件大小是否符合上传限制。必要时进行调整。

如果您仍然看到一些问题，请不要犹豫。

# android - 如何在android的横向模式下保持相同的状态

> ID：13539548
> 
> 赞同：1
> 
> 时间：2012-11-24T08:17:14.997
> 
> 标签：android, android-emulator

我怎样才能在风景中保持相同的状态。当我在横向模式下腐烂屏幕时，活动重新启动并且我的布局视图显示错误。所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:25:09.803

您可以将您的状态保存在`Bundle`in`onSaveInstanceState()`方法中并将其恢复回 in`onCreate()`或 in `onRestoreInstanceState()`。

或者如果您想禁用方向更改，您可以添加`android:screenOrientation="landscape"`到`Activity`清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:31:34.243

为了在横向模式下保持相同的状态，您必须`android:configChanges="orientation|keyboard"` 在当前活动中添加以处理配置更改，如下所示：

```
<activity
 android:configChanges="orientation|keyboard"
 ...
 /> 
```

或对于更改布局或任何视图，`configChanges`您必须`onConfigurationChanged`将 Activity 覆盖为：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    //Handle config changes here, paying attention to
    //the newConfig.orientation value
    super.onConfigurationChanged(newConfig);
} 
```

如果您想在 Configuration Chnages 上的任何视图上保存状态，那么您必须覆盖`onSaveInstanceState()`以保存视图的状态，如 TextView、EditText、View Layout 的 .. 以及 `onRestoreInstanceState()`在设备模式旋转后恢复状态。

有关我们如何处理运行时更改的更多信息，您还可以查看这个 android 主题：

[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:34:21.307

如果您说您的布局在横向模式下看起来/不合适，那么您将需要一个具有相同名称的新 xml 并将其放在一个名为“layout-land”的新文件夹中。那应该有帮助

# php - 防止执行子目录中的 .htaccess 文件

> ID：13539549
> 
> 赞同：0
> 
> 时间：2012-11-24T08:17:25.213
> 
> 标签：php, .htaccess, file-upload

我有一项服务，允许用户上传他们喜欢的任何内容。我有代码执行和其他禁用，但我找不到阻止他们上传的 .htaccess 文件执行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:26:29.883

您应该**始终**重命名用户上传的文件！如果您不这样做，用户可以轻松上传`hack.php`然后启动它以使您的网站被黑客入侵或滥用。所以这实际上是你的问题。

上传后重命名文件。在数据库中保留原始名称（以及大小、mime 类型等）并通过脚本路由文件下载/查看，该脚本将从数据库中获取原始名称并构建适当的标题，然后`file()`将该文件的内容提供给用户。这将阻止文件在您的服务器上执行

或者，如果这`.htaccess`只是问题（但我敢说它更广泛），那么您可以将 apache 配置为忽略某些目录中的 .htaccess。它需要机器上的root权限，但您可以将`<Directory FOLDER>`块添加到主机配置并放入[`AllowOverride None`](http://httpd.apache.org/docs/current/mod/core.html#allowoverride)其中。

或者，只需在上传时检查目标文件名并拒绝任何`.htaccess`和`.htpassword`. 或者任何以名字开头的东西`.`

# jquery - 无法使用 jQuery 使用垂直滚动新闻自动收录器插件

> ID：13539551
> 
> 赞同：0
> 
> 时间：2012-11-24T08:18:11.980
> 
> 标签：jquery, css, jquery-plugins

我正在尝试在我的页面中使用 jQuery 使用这个垂直滚动[新闻自动收录](http://demos.2lessons.info/newsticker/)器插件。我已经在我的页面中做到了这一点

* * *

*在我的 html 页面中*

```
<div id="newsticker-container">
   <ul>
      <li>
        <div>1) Facebook type vertical navigation menu</div>
      </li> 
      <li>
        <div>2) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>3) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>4) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>5) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>5) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>6) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>7) Facebook type vertical navigation menu</div>
      </li>
   </ul>
</div> 
```

* * *

*在我的头部分中，我包含了 Javascript*

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="js/newsticker.js"></script>
<script type="text/javascript">
$(function(){
    $('#newsticker-container').newsTicker();
});
</script> 
```

* * *

*在css部分，我做了这个*

```
#newsticker-container a{color: #D83B97;text-decoration: none;}
#newsticker-container
{
    width: 200px; 
    margin: auto;
    margin-top: 30px;
    border: 5px solid #eeeeee;
    background-color: red;
}

#newsticker-container ul li div
{
    border-top: 1px solid #e2e2e2;
    background: #ffffff;
    padding: 10px 5px;
} 
```

* * *

但是，css似乎存在一些问题。看看它：

* * *

![在此处输入图像描述](../Images/79f4b56a073644e8dca796ad695fd476.png)

这里有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:45:17.607

请插入此代码

```
<link rel="stylesheet" type="text/css" href="index.css" media="all"> 
```

后

```
<script type="text/javascript" src="newsticker.js"></script> 
```

没有那个：

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="newsticker.js"></script>
<script type="text/javascript">
$(function(){
    $('#newsticker-container').newsTicker();
});
</script>
<style>
body, html { padding: 0px; margin: 0px; }
body { background: none repeat scroll 0% 0% rgb(204, 204, 204); }
#newsticker-container a { color: rgb(216, 59, 151); text-decoration: none; }
#newsticker-container { width: 400px; margin: 30px auto auto; border: 5px solid rgb(238, 238, 238); }
#newsticker-container ul li div { border-top: 1px solid rgb(226, 226, 226); background: none repeat scroll 0% 0% rgb(255, 255, 255); padding: 10px 5px; }
</style>
<div id="newsticker-container">
   <ul>
      <li>
        <div>1) Facebook type vertical navigation menu</div>
      </li> 
      <li>
        <div>2) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>3) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>4) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>5) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>5) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>6) Facebook type vertical navigation menu</div>
      </li>
      <li>
        <div>7) Facebook type vertical navigation menu</div>
      </li>
   </ul>
</div> 
```

# iphone - 我可以更改 iPhone 5 信箱的颜色吗（顶部和底部的黑条

> ID：13539553
> 
> 赞同：-2
> 
> 时间：2012-11-24T08:18:44.437
> 
> 标签：iphone, ios, iphone-5

我有一个应用程序，我无法针对 iPhone 5 的新尺寸进行更新 - 基本上它是围绕我拥有的资产大小构建的，并且无法获取更新的资产。该应用程序仍然可以正常工作，但它具有纯白色背景，并且信箱（顶部和底部的黑条）是黑色的，这真的很难看。

有没有办法将信箱的颜色设置为白色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:31:22.597

好吧，你可以用谷歌搜索它。“你不能！”。但是有一个解决方法。您所要做的就是添加一个“Default-568h@2x.png”文件。您的应用程序将填满显示屏。如果设备是 iPhone5，您现在所要做的就是在顶部和底部添加一个白色图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:31:02.703

不，没有办法这样做 :) 但是，您可以在不使用更新的资产并支持 iPhone 5 屏幕的情况下重新提交您的应用程序。为此，1) 您必须添加 iPhone 5 启动屏幕。2）使您的视图和子视图可调整大小，以便它们出现在它们的位置（无需创建单独的笔尖） 3）使用 iPhone 5（iPhone 5 模拟器）进行测试，您就可以开始了；）祝您好运！

# c# - 不存在数据时防止 XmlSerializer 中的自闭合标签

> ID：13539555
> 
> 赞同：15
> 
> 时间：2012-11-24T08:18:51.063
> 
> 标签：c#, .net, xml

当我序列化值时：如果数据中没有值，那么它就像下面的格式一样。

```
 <Note>
        <Type>Acknowledged by PPS</Type>
        <Data />
  </Note> 
```

**但我想要以下格式的 xml 数据：**

```
 <Note>
        <Type>Acknowledged by PPS</Type>
        <Data></Data>
  </Note> 
```

为此我写了代码：

```
[Serializable]
public class Notes
{
    [XmlElement("Type")]
    public string typeName { get; set; }

    [XmlElement("Data")]
    public string dataValue { get; set; }
} 
```

如果数据没有分配任何值，我无法弄清楚如何以以下格式实现数据。

```
 <Note>
        <Type>Acknowledged by PPS</Type>
        <Data></Data>
  </Note> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T10:47:36.527

您可以通过创建自己的 XmlTextWriter 来传递到序列化过程中来做到这一点。

```
public class MyXmlTextWriter : XmlTextWriter
{
    public MyXmlTextWriter(Stream stream) : base(stream, Encoding.UTF8)
    {

    }

    public override void WriteEndElement()
    {
        base.WriteFullEndElement();
    }
} 
```

您可以使用以下方法测试结果：

```
class Program
{
    static void Main(string[] args)
    {
        using (var stream = new MemoryStream())
        {
            var serializer = new XmlSerializer(typeof(Notes));
            var writer = new MyXmlTextWriter(stream);
            serializer.Serialize(writer, new Notes() { typeName = "Acknowledged by PPS", dataValue="" });
            var result = Encoding.UTF8.GetString(stream.ToArray());
            Console.WriteLine(result);
        }
       Console.ReadKey();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T10:19:34.987

IMO 不可能使用`Serialization`. 但是，您可以`LINQ to XML`像这样使用生成所需的模式 -

```
XDocument xDocument = new XDocument();
XElement rootNode = new XElement(typeof(Notes).Name);
foreach (var property in typeof(Notes).GetProperties())
{
   if (property.GetValue(a, null) == null)
   {
       property.SetValue(a, string.Empty, null);
   }
   XElement childNode = new XElement(property.Name, property.GetValue(a, null));
   rootNode.Add(childNode);
}
xDocument.Add(rootNode);
XmlWriterSettings xws = new XmlWriterSettings() { Indent=true };
using (XmlWriter writer = XmlWriter.Create("D:\\Sample.xml", xws))
{
    xDocument.Save(writer);
} 
```

主要收获是`in case your value is null, you should set it to empty string`。它会`force the closing tag to be generated`。如果值为空，则不创建结束标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:38:01.250

Kludge 时间 - 请参阅[在 HTML 中有效的生成 System.Xml.XmlDocument.OuterXml() 输出](https://stackoverflow.com/questions/1817060/generate-system-xml-xmldocument-outerxml-output-thats-valid-in-html)

基本上在生成 XML 文档后遍历每个节点，如果没有子节点，则添加一个空文本节点

```
// Call with
addSpaceToEmptyNodes(xmlDoc.FirstChild);

private void addSpaceToEmptyNodes(XmlNode node)
{
    if (node.HasChildNodes)
    {
        foreach (XmlNode child in node.ChildNodes)
            addSpaceToEmptyNodes(child);
    }
    else         
        node.AppendChild(node.OwnerDocument.CreateTextNode(""))
} 
```

*（是的，我知道您不应该这样做 - 但如果您将 XML 发送到您无法轻松修复的其他系统，那么您必须对事情务实）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-28T11:12:35.233

原则上，[armen.shimoon 的回答](https://stackoverflow.com/a/13540468/8640292)对我有用。但是，如果您希望在不必使用 XmlWriterSettings 和额外的 Stream 对象（如注释中所述）的情况下漂亮地打印 XML 输出，则可以简单地在 XmlTextWriter 类的构造函数中设置格式。

```
public MyXmlTextWriter(string filename) : base(filename, Encoding.UTF8)
{
    this.Formatting = Formatting.Indented;
} 
```

（会将此作为评论发布，但目前还不允许；-)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-05T11:41:10.600

您可以添加一个虚拟字段来防止自动关闭元素。

```
[XmlText]
public string datavalue= " "; 
```

或者，如果您想要班级的代码，那么您的班级应该是这样的。

```
public class Notes
{
   [XmlElement("Type")]
   public string typeName { get; set; }

   [XmlElement("Data")]
   private string _dataValue;
   public string dataValue {
      get {
          if(string.IsNullOrEmpty(_dataValue))
             return " ";
          else
             return _dataValue;
      }
      set {
          _dataValue = value;
      }
   }
} 
```

# vb.net - Visual Basic 文件中的格式异常

> ID：13539556
> 
> 赞同：0
> 
> 时间：2012-11-24T08:19:19.213
> 
> 标签：vb.net, exception, format

这是一段给出异常[FormatException](https://msdn.microsoft.com/en-us/library/system.formatexception%28v=vs.110%29.aspx)的 Visual Basic 代码。

假设我的十六进制值 variable`hexValue`是 424E0A78。代码工作正常。当`hexValue`得到一个值（比如）424EA78时，就会发生这个异常：

> 提供的十六进制值为空或格式不正确。使用以下格式：00000000

有解决办法吗？

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Try
        Dim hexValue As String = "424E0A78"

        Dim iInputIndex As Integer = 0
        Dim iOutputIndex As Integer = 0
        Dim bArray(3) As Byte 'creating an array
        Dim rnum As Integer
        Dim rArray(3) As Byte
        Dim rSingle As Single
        Dim rSingle1 As Single
        Dim rSingle2 As Single
        Dim rStr As Integer
        Dim rnewArray(3) As Byte ' variables
        Dim rnum2, rnum3 As Integer 'variables
        Dim rstr2, rstr3 As String

        'For iInputIndex = 0 To hexValue.Length - 1 Step 2
        For iInputIndex = 0 To hexValue.Length - 1 Step 2

            'rnum3 = hexValue.Chars(iInputIndex) * 16

            'REjina code starts
            rStr = 0
            rstr2 = hexValue.Chars(iInputIndex)
            If (rstr2 = "A") Then
                rstr2 = 10
            ElseIf (rstr2 = "B") Then
                rstr2 = 11
            ElseIf (rstr2 = "C") Then
                rstr2 = 12
            ElseIf (rstr2 = "D") Then
                rstr2 = 13
            ElseIf (rstr2 = "E") Then
                rstr2 = 14
            ElseIf (rstr2 = "F") Then
                rstr2 = 15
            End If

            rStr = Val(rstr2) * 16

            'Second rejina conversion
            rstr2 = hexValue.Chars(iInputIndex + 1)
            If (rstr2 = "A") Then
                rstr2 = 10
            ElseIf (rstr2 = "B") Then
                rstr2 = 11
            ElseIf (rstr2 = "C") Then
                rstr2 = 12
            ElseIf (rstr2 = "D") Then
                rstr2 = 13
            ElseIf (rstr2 = "E") Then
                rstr2 = 14
            ElseIf (rstr2 = "F") Then
                rstr2 = 15
            End If

            rStr = rStr + Val(rstr2)

            'rstr2 = hexValue.Chars(iInputIndex + 1)
            rnewArray(iOutputIndex) = rStr
            'rejina code ends

            'rArray(iOutputIndex) = Byte.Parse(hexValue.Chars(iInputIndex) & hexValue.Chars(iInputIndex + 1), Globalization.NumberStyles.HexNumber)

            'bArray(iOutputIndex) = Convert.ToByte(hexValue.Chars(iInputIndex))

            iOutputIndex += 1
        Next

        'Array.Reverse(rArray)

        'rejina code starts
        Array.Reverse(rnewArray)
        'rejina code ends

        'Array.Reverse(bArray)

        'rSingle = BitConverter.ToSingle(rArray, 0)
        'rejina code starts
        rSingle1 = BitConverter.ToSingle(rnewArray, 0)
        'rejina code ends
        'rSingle2 = BitConverter.ToSingle(bArray, 0)

        MessageBox.Show(rSingle1)

        'Return BitConverter.ToSingle(rnewArray, 0)
    Catch ex As Exception
        Throw New FormatException("The supplied hex value is either empty or in an incorrect format. Use the following format: 00000000", ex)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:28:26.897

如果输入字符串的长度是奇数（即不是偶数），那么您将在该行上得到一个数组索引越界异常：

```
hexValue.Chars(iInputIndex + 1) 
```

...这很可能是您在这里遇到的情况。

# javascript - Youtube 嵌入延迟解析

> ID：13539557
> 
> 赞同：3
> 
> 时间：2012-11-24T08:19:24.633
> 
> 标签：javascript, performance, youtube

我的 Mediawiki 上有一些嵌入式 youtube 播放列表。

[我在我的网站上用webpagetest](http://www.webpagetest.org)做了一些速度测试， 它建议我推迟解析它们的Javascript。

他们说“JavaScript 在初始页面加载期间被解析。推迟解析 JavaScript 以减少页面呈现的阻塞。”

他们说这样的事情是[有](http://s.ytimg.com/yts/jsbin/www-embed_core_module-vflHovH55.js)问题的。

如何将 youtube 视频嵌入到 Mediawiki，同时将它们的 Javascript 解析推迟到初始页面加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:58:44.230

只需使用 jQuery 插入嵌入代码。

首先为视频创建一个包装器/容器

```
<div id="yt-wrapper"></div> 
```

然后将嵌入代码插入到包装器中

```
$('<iframe width="460" height="234" src="http://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" frameborder="0" allowfullscreen></iframe>').appendTo('#yt-wrapper'); 
```

# casting - 我的 GLSL 隐式转换错误在哪里？

> ID：13539562
> 
> 赞同：1
> 
> 时间：2012-11-24T08:21:07.623
> 
> 标签：casting, compiler-errors, glsl, opengl-3

在似乎是我的片段着色器中，我有这两个错误：

```
0(47) : error C7011: implicit cast from "int" to "vec3"
0(55) : error C7011: implicit cast from "int" to "vec3" 
```

然而，在花了大约 30 分钟查看着色器程序中使用的函数之后，看起来我做得很好，而且我的着色器中的大多数向量都是 vec4 - 基本上，任何 rgba 计算。我想弄清楚为什么我会收到这个错误......

我也检查了我的顶点着色器，只是为了确定，我似乎也找不到任何与之匹配的东西。

错误是什么？

**片段着色器**

```
#version 330 core

in vec2 UV;

in vec3 Position_worldSpace;
in vec3 Normal_cameraSpace;
in vec3 EyeDirection_cameraSpace;
in vec3 LightDirection_cameraSpace;

out vec4 Color;

uniform sampler2D TextureSampler;
uniform mat4 ViewMatrix;
uniform mat4 ModelMatrix;
uniform vec3 LightPosition_worldSpace;

void main() 
{
    // Light emission properties
    // Make them uniforms for flexibility/customization

    vec4 LightColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
    float LightPower = 50.0f;

    // Material properties
    vec4 MaterialDiffuseColor  = texture(TextureSampler, UV).rgba;
    vec4 MaterialAmbientColor  = vec4(0.1f, 0.1f, 0.1f, 1.0f) * MaterialDiffuseColor;
    vec4 MaterialSpecularColor = vec4(0.3f, 0.3f, 0.3f, 1.0f);

    float DistanceToLight = length(LightPosition_worldSpace - Position_worldSpace);     

    // Normal of the computed fragment, in camera space

    vec3 normal = normalize(Normal_cameraSpace);

    // Light Direction, from the fragment to the light itself

    vec3 ld = normalize(LightDirection_cameraSpace);

    // Cosine of the angle between the normal and the light direction,
    // clamped above 0
    //  - light is at the vertical of the triangle -> 1
    //  - light is perpendicular to the triangle   -> 0
    //  - light is behind the triangle             -> 0

    float cosTheta = clamp(dot(normal, 1), 0, 1);

    // Eye vector (towards the camera)

    vec3 norm_EyeDir = normalize(EyeDirection_cameraSpace);

    // direction in which the triangle reflects the light

    vec3 reflection = reflect(-1, normal);

    // Cosine of the angle between the Eye vector and
    // the Reflect vector, clamped to 0
    //  - Looking into the reflection -> 1
    //  - Looking elsewhere           -> less than 1

    float cosAlpha = clamp(dot(norm_EyeDir, reflection), 0, 1);

    float DistSquared = DistanceToLight * DistanceToLight;

    Color = 
        // Ambient : simulates indirect lighting
        MaterialAmbientColor + 
        // Diffuse : "color" of the object
        MaterialDiffuseColor * LightColor * LightPower * cosTheta / DistSquared +
        // Specular : reflective highlight, like a mirror
        MaterialSpecularColor * LightColor * LightPower * pow(cosAlpha, 5) / DistSquared;

} 
```

**顶点着色器**

```
#version 330 core

// Input data, which is different for all executions of this shader

layout(location = 0) in vec3 VertexPosition_modelSpace;
layout(location = 1) in vec2 VertexUV;
layout(location = 2) in vec3 VertexNormal_modelSpace;

// Output data ; will be interpolated for each fragment

out vec2 UV;

out vec3 Position_worldSpace;
out vec3 Normal_cameraSpace;
out vec3 EyeDirection_cameraSpace;
out vec3 LightDirection_cameraSpace;

// Values which stay constant for the whole mesh

uniform mat4 MvpMatrix;
uniform mat4 ViewMatrix;
uniform mat4 ModelMatrix;

uniform vec3 LightPosition_worldSpace;

void main()
{
    vec4 vPos = vec4(VertexPosition_modelSpace, 1.0f);

    // Output position of the vertex, in clip space : MvpMatrix * position
    gl_Position = MvpMatrix * vPos;

    // Position of the vertex, in worldSpace : ModelMatrix * position
    Position_worldSpace = (ModelMatrix * vPos).xyz;

    // Vector that goes from the vertex to the camera, in camera space.
    // In camera space, the camera is at the origin (0, 0, 0).

    vec3 VertexPosition_cameraSpace = (ViewMatrix * ModelMatrix * vPos).xyz;

    EyeDirection_cameraSpace = vec3(0.0f, 0.0f, 0.0f) - VertexPosition_cameraSpace;

    // Vector that goes from the vertex to the light, in camera space.
    // M is identity, thus it's ommitted 
    vec3 LightPosition_cameraSpace = (ViewMatrix * vec4(LightPosition_worldSpace, 1.0f)).xyz;
    LightDirection_cameraSpace = LightPosition_cameraSpace + EyeDirection_cameraSpace;

    // Normal of the vertex, in camera space

    // This is only correct if ModelMatrix does not scale the model; use its transpose if doesn't work properly.
    Normal_cameraSpace = (ViewMatrix * ModelMatrix * vec4(VertexNormal_modelSpace, 0.0f)).xyz; 

    // UV of the vertex.

    UV = VertexUV;
} 
```

**更新**

我追踪的两行如下：

`vec3 reflection = reflect(-1.0f, normal);`

`float cosTheta = clamp( dot(normal, 1.0f), 0.0f, 1.0f);`

奇怪的是，在我传入不带后缀的整数之前`.0f`，由于我已经改变了它，消息现在是`implicit cast from "float" to "vec3"`，而不是`"int"`. 然而，根据 GLSL 规范/手册页，*这两个*函数都返回 GLSL 的`genType`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:24:04.970

我想这是

```
float cosTheta = clamp(dot(normal, 1), 0, 1); 
```

不能`normal`用标量 ( `1`) 为向量 ( ) 加点。

看起来还有另一个，也在片段着色器中：

```
vec3 reflection = reflect(-1, normal); 
```

# java - JSP 程序总是返回空值

> ID：13539567
> 
> 赞同：0
> 
> 时间：2012-11-24T08:21:41.083
> 
> 标签：java, xml, jsp, null

我的jsp代码遇到了一些问题。这是代码 [Get_Values.java]：

```
public class Get_values {

 public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    String msisdn = request.getParameter("msisdn");
    temp = new Test().parseXml();
    out.println("<b><font color='blue'>MSISDN :</font></b>" + "<b>" + temp[0] + "</b>" + "<br>"); 
 }
} 
```

这是 Test.java 的代码

```
public class Test {
 public String [] temp= new String [50];
public String [] parseXml() {
    SAXParser sp = factory.newSAXParser();
    sp.parse("test.xml", handler);
DefaultHandler handler = new DefaultHandler() {
        public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
            if (qName.equalsIgnoreCase("location")) {
                nodeName = attributes.getValue(qName);
            }
        }

        public void endElement(String uri, String localName, String qName) throws SAXException {
            if (qName.equalsIgnoreCase("x")) {
                temp[0] = value;
            } else if (qName.equalsIgnoreCase("y")) {
                temp[1] = value;
            } else if (qName.equalsIgnoreCase("z")) {
                temp[2] = value;
            }
        }

        public void characters(char ch[], int start, int length) throws SAXException {
            value = new String(ch, start, length);
        }
    };
return temp;
}
} 
```

但是当我执行“Get_values.war”文件时，temp 的值总是返回为空。但是当我执行java程序时，它工作正常。我认为当我执行war文件时“test.xml”没有被正确读取。可能是什么原因？我应该在我的jsp程序中明确包含该文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:09:59.823

终于成功了。那是因为路径问题。我不得不给出完整的路径。

```
C:\\xampp\\tomcat\\webapps\\Location_API\\WEB-INF\\classes\\location\\test.xml 
```

它就像魅力一样。感谢大家宝贵的时间。:)

# javascript - 为什么数量等于10的时候算价格不对？

> ID：13539573
> 
> 赞同：0
> 
> 时间：2012-11-24T08:23:09.657
> 
> 标签：javascript, jquery

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

从这个问题： [获取所有输入值并进行加法](https://stackoverflow.com/questions/13486148/get-all-the-input-value-and-make-an-addition)

有一个促销：

买1个价格是14.37，买10个价格是13.28，买20个价格是10.78.....

现在我想做一个柜台。[http://down123.xxmn.com/count.htm](http://down123.xxmn.com/count.htm)

柜台写了整个价格。现在，我的代码有问题。

如果我在一个输入框中填写 5，然后在另一个输入框中填写 5。整个价格不是132.8。为什么？

如果我在输入框中删除一个数字，整个价格不会改变。谢谢你

编码：

```
var $inputs = jQuery('.liste_couleur_qty li input');
$inputs.keyup(function() {
   var result = 0;
   $inputs.each(function(){
     result += parseInt(this.value, 10);
   });
   var JsonData =[{"price_id":"1","website_id":"0","price_qty":1,"price":"14.37"},
 {"price_id":"2","website_id":"0","price_qty":10,"price":"13.28"},
 {"price_id":"3","website_id":"0","price_qty":20,"price":"10.78"}, 
  {"price_id":"3","website_id":"0","price_qty":50,"price":"9.23"},
   {"price_id":"3","website_id":"0","price_qty":100,"price":"7.91"}
 ]
   var sorted = JsonData.sort(function(a,b){return a.price_qty - b.price_qty;});

var i=0;
while(i < sorted.length && sorted[i].price_qty <= result){i++;} 

var price = sorted[i-1].price;

   price= price*result;

   jQuery('#qtyvalue').html("Total price is " + price);    
}); 
```

现在，当数量为 9 时，正确的价格为 9*14.37。但我的计数器不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:43:40.550

您正在寻找的答案是一种名为`.toFixed()`

尝试将设置价格的最后一行更改为

```
jQuery('#qtyvalue').html("Total price is " + price.toFixed(2)); 
```

这应该有效。

* * *

**更新**：

当您清空任何文本框时，您的代码将停止工作，因为该值是`''`而不是`0`，并且无法添加。将代码的第 5 行更新为：

```
result += parseInt((this.value === '' ? 0 : this.value), 10); 
```

# php - PHP 选择查询前 10 名

> ID：13539575
> 
> 赞同：0
> 
> 时间：2012-11-24T08:23:24.610
> 
> 标签：php, hashtag

```
SELECT SUBSTR(message, LOCATE('#', message)) message
FROM t_haps_wall
WHERE message like '%#%' 
```

查询没问题，现在我想设置前 10 个标签。

那么我该如何设置呢？
感谢帮助/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:25:34.610

一切看起来都不错，除了`AS`，我们代表一些东西（在本例中是 a `SUBSTR`），**作为**其他东西。

```
SELECT SUBSTR(`message`, LOCATE('#', `message`)) AS `message`
FROM `t_haps_wall`
WHERE `message` LIKE '%#%'
ORDER BY `YOUR_COLUMN_OF_ORDER` DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:51:42.883

开始了...

```
SELECT SUBSTR(message, LOCATE('#', message)) message FROM t_haps_wall WHERE message like '%#%' LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:29:29.343

这首先取决于前 10 行的标准是什么。如果假设您的排名基于表中的某个列，您可以按它进行排序，然后设置如下限制：

```
SELECT SUBSTR(message, LOCATE('#', message)) message
FROM t_haps_wall
ORDER BY somePopularityColumn DESC
LIMIT 10 
```

# jquery - JQuery mobile - 使用 Popup 编辑 Listview 和计数气泡

> ID：13539580
> 
> 赞同：3
> 
> 时间：2012-11-24T08:25:08.510
> 
> 标签：jquery, mobile, dynamic, count, popup

我想做一个列表，里面有计数气泡，但是计数气泡是动态的，所以我的意思是当单击列表时，会显示弹出窗口并询问值，如果我们输入值并单击“确定”按钮，计数气泡的值会自动改变....这里是代码

* * *

```
<ul id="list" data-role="listview"  data-inset="true"  data-theme="e" data-divider-theme="b">

<li data-filtertext="ayam, goreng"><a href="#popupQTY" data-rel="popup" data-position-to="window" data-inline="true" data-transition="flow">List 1 <span class='ui-li-count'>1</span></a> </li>
<li data-filtertext="ayam, penyet"><a href="#popupQTY" data-rel="popup" data-position-to="window" data-inline="true" data-transition="flow">List 2 <span class='ui-li-count'>2</span></a></li>
<li data-filtertext="ayam, bakar" ><a href="#popupQTY" data-rel="popup" data-position-to="window" data-inline="true" data-transition="flow">List 3 <span class='ui-li-count'>3</span></a></li>
<li data-filtertext="ayam, guling"><a href="#popupQTY" data-rel="popup" data-position-to="window" data-inline="true" data-transition="flow">List 4 <span class='ui-li-count'>4</span></a></li> 
```

* * *

这是弹出的

```
div data-role="popup" id="popupQTY" data-theme="a" class="ui-corner-all">

    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>           

        <form>
            <div style="padding:10px 20px;">
              <h3>Please input the Quantity</h3>
              <label for="un" class="ui-hidden-accessible">Qty :</label>
              <input type="number" name="qty" id="QTY" value="1" placeholder="qty" data-theme="a" />

              <a href="#" id="setQty" data-role="button" data-theme="b" data-transition="flow">Ok</a>
            </div>
        </form>
    </div> 
```

[http://jsfiddle.net/idam/mAdDN/](http://jsfiddle.net/idam/mAdDN/)

* * *

帮助我如何使用 JavaScript 代码或 JQuery 实现它...谢谢之前 ^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-09T02:00:52.597

这是您的 [jsfiddle 示例的修改版本](http://jsfiddle.net/ugdy31hu/)

基本上你应该做的是assgin`id`到每个气泡`<span>`然后以编程方式使用打开弹出窗口`$( "#popup" ).popup( "open", options);`，当单击确定按钮时，`<span>`使用`id`使用更新`$('#id').text(quantity)`

# c# - 尝试使用 DataContractJsonSerializer 反序列化 JSON 时出错

> ID：13539584
> 
> 赞同：1
> 
> 时间：2012-11-24T08:25:34.370
> 
> 标签：c#, .net, json, silverlight, windows-phone-8

这个真的把我难住了。我正在尝试反序列化从 ASP.NET Web 服务获得的以下 JSON 字符串：

```
"{\"d\":{\"__type\":\"KPCServer.LogonResult\",\"User\":{\"UserId\":\"affaa328-5b53-430e-991a-22674ede6faf\",\"Email\":\"test@test.com\",\"Alias\":\"Mike\",\"FullName\":\"Mike Christensen\",\"Password\":\"secret\",\"Location\":\"Redmond, WA\",\"ImageUrl\":null,\"DateOfBirth\":\"\\/Date(-62135568000000)\\/\",\"LastLogon\":\"\\/Date(1350450228000)\\/\",\"UserSince\":\"\\/Date(1197980020000)\\/\",\"MailingList\":true,\"Bio\":\"Test\"},\"NewUser\":false,\"Ticket\":\"FJEjfje87fjef88fe8FAF8fA88fAjk+AFJ9fja9Fa9Ff99aJF9aFjfA99fjaBFJ7zqmlcHn9Dfw=\"}}" 
```

我有以下类型：

```
public class User
{
   public Guid UserId { get; set; }
   public string Email { get; set; }
   public string Alias { get; set; }
   public string FullName { get; set; }
   public string Password { get; set; }
   public string Location { get; set; }
   public string ImageUrl { get; set; }
   public DateTime DateOfBirth { get; set; }
   public DateTime LastLogon { get; set; }
   public DateTime UserSince { get; set; }
   public bool MailingList { get; set; }
   public string Bio { get; set; }
}

[DataContract(Name="KPCServer.LogonResult")]
public class LogonResult
{
   [DataMember] public User User { get; set; }
   [DataMember] public bool NewUser { get; set; }
   [DataMember] public string Ticket { get; set; }
}

[DataContract]
[KnownType(typeof(LogonResult))]
public class Result<T>
{
   [DataMember]
   public T d { get; set; }
} 
```

然后我尝试使用以下方法反序列化字符串：

```
using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(json)))
{
   DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Result<T>));
   Result<T> result = serializer.ReadObject(stream) as Result<T>;

   return result.d;
} 
```

**注意：**在上述方法中，`T`是`LogonResult`.

但是，我得到以下异常`ReadObject`：

```
System.Runtime.Serialization.SerializationException was unhandled by user code
  HResult=-2146233076
  Message=JSON contains a '__type' member specifying the data contract name ':KPCServer.LogonResult'. The deserializer has no knowledge of any type that maps to this contract. Add the type corresponding to 'KPCServer.LogonResult' to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding it to the list of known types passed to DataContractSerializer. You can also often eliminate this error by avoiding the use of derived types where the JSON is produced.
  Source=System.ServiceModel.Web
  InnerException: 
```

如果我运行：

```
json = json.Replace("_type", "_blah"); 
```

然后一切正常。这是在 Windows Phone 8 上使用 Silverlight。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:48:04.523

这是因为：

```
"\"__type\":\"KPCServer.LogonResult\"" 
```

不包含数据协定命名空间。这可以通过修改`DataContractAttribute`on来解决`LogonResult`：

```
[DataContract(Name = "KPCServer.LogonResult", Namespace="")]
public class LogonResult
{
    [DataMember]
    public User User { get; set; }
    [DataMember]
    public bool NewUser { get; set; }
    [DataMember]
    public string Ticket { get; set; }
} 
```

# php - 如何对“n”个列或行求和

> ID：13539585
> 
> 赞同：0
> 
> 时间：2012-11-24T08:25:58.100
> 
> 标签：php

*   每个用户每个月都必须填写一些参数。
*   需要补充的参数数量因用户而异，每个用户都可以添加一个新参数（但如果已经填写了值，则不能删除现有参数）。 **EX** : **user_1**有: param_1, param_2; **user_2**有：param_1、param_3、param_4 等等。

*   我必须在用户级别对这些参数求和。

我有两个问题：

**哪个是表结构的最佳选择？** 考虑：用户 cah 拥有的最大参数数为 12；活跃用户数将达到5000左右（我希望）

*   不同的列

| 用户 ID | 月 | 参数_1 | 参数_2 | ... | 参数_12|

*   不同的行：

    | 用户 ID | 月 | 参数 ID | 参数值 |

    | 001 | 2012 年 11 月 | 参数_1 | 100 |

    | 001 | 2012 年 11 月 | 参数_2 | 125 |

    | 002 | 2012 年 11 月 | 参数_1 | 110 |

    | 002 | 2012 年 11 月 | 参数_3 | 150 |

    | 002 | 2012 年 11 月 | 参数_4 | 175 |

考虑到表结构的最佳选择，我如何计算每个用户的参数总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:42:19.870

我认为第二种方法最适合您的情况，因为在这种情况下您不会浪费任何内存，并且将来如果您必须扩展数据库，那么它也不需要对数据库进行任何重大更改。

现在是对参数求和的第二个问题，然后您可以通过其 user_id 获取特定用户的所有记录，然后添加所有这些值

您可以编写如下查询

```
$query = "SELECT SUM(param_value) FROM table_name WHERE param_id = $id"; 
mysql_query($query); 
```

# php - mysqldump无法通过php工作

> ID：13539590
> 
> 赞同：1
> 
> 时间：2012-11-24T08:27:05.023
> 
> 标签：php, mysql, command-line, mysqldump

我正在尝试通过 php 获取数据库的 mysqldump，我只能通过这种方式通过命令行获取数据库转储。

```
d:
cd "d:\wamp\bin\mysql\mysql5.5.24\bin"
mysqldump.exe
mysqldump --user=user --password=password --host=localhost db_name > "D:\dump\test.sql" 
```

当尝试以这种方式从 php 执行此命令时，我得到一个空的转储文件。

```
$cmd  = 'd: cd "d:/wamp/bin/mysql/mysql5.5.24/bin"mysqldump.exe>mysqldump --user=user --password=password --host=localhost db_name > "D:\dump\test.sql"';
exec($cmd); 
```

或者这样

```
$cmd  = 'd:/wamp/bin/mysql/mysql5.5.24/bin>mysqldump.exe>mysqldump --user=user --password=password --host=localhost db_name > D:\dump\test.sql';
exec($cmd); 
```

或者这样

```
$cmd  = 'd:/wamp/bin/mysql/mysql5.5.24/bin>mysqldump --user=user --password=password --host=localhost db_name > D:\dump\test.sql';
exec($cmd); 
```

我只得到空的转储文件。我在这里遇到了很多这样的问题[，](https://stackoverflow.com/questions/6750531/using-a-php-file-to-generate-a-mysql-dump)还有[更多](https://stackoverflow.com/questions/2061922/mysqldump-create-empty-sql-file-php-mysql-on-windows?rq=1)的问题，但没有一个解决方案对我有用。

请查看并建议任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T08:36:58.630

您似乎使用 Windows，创建多命令行的方法是使用 '&' 运算符（[更多信息](https://superuser.com/questions/62850/execute-multiple-commands-with-1-line-in-windows-commandline)）

例子 ：

```
$cmd  = 'd: & cd "d:/wamp/bin/mysql/mysql5.5.24/bin" & mysqldump.exe --user=user --password=password --host=localhost db_name > "D:\dump\test.sql"';
exec($cmd); 
```

此外，请仔细检查您的路径，因为您正在使用`d:/wamp/...`和更高版本`D:\dump\test.sql`，您的命令似乎使用斜杠和反斜杠，并且只`\`应该工作。

[最后，您可以使用exec](http://fr2.php.net/manual/en/function.exec.php)的第二个参数来调试您的命令：

```
$output = array();
exec($cmd, $output);
var_dump($output); 
```

# php - 如何在打开页面之前打开加载

> ID：13539591
> 
> 赞同：0
> 
> 时间：2012-11-24T08:27:12.563
> 
> 标签：php, jquery, ajax

打开页面时出现问题，我需要在打开页面之前打开加载图像，我该怎么做

```
 <style>
#dvLoading
{
   background:#000 url(images/ajax-loading.gif) no-repeat center center;
   height: 100px;
   width: 100px;
   position: fixed;
   z-index: 1000;
   left: 50%;
   top: 50%;
   margin: -25px 0 0 -25px;
}
</style> 

$(window).load(function(){
  $('#dvLoading').fadeOut(2000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:44:08.907

`window.load`将等待整个内容加载，然后触发它。你最好使用'ready'，即：

```
<style>
#dvLoading{
   background:#000 url(images/ajax-loading.gif) no-repeat center center;
   height: 100px;
   width: 100px;
   position: fixed;
   z-index: 1000;
   left: 50%;
   top: 50%;
   display: none;
   margin: -25px 0 0 -25px;
}
</style> 
```

```
$(function(){
  $('#dvLoading').css('display', 'block');
});

$(window).load(function(){
  $('#dvLoading').fadeOut(2000);
}); 
```

就`<div id="dvLoading"></div>`在收盘前`</body>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:46:43.557

尝试这个：

```
$(window).bind("load", function() {
    $('#dvLoading').hide();
}); 
```

[演示在这里](http://jsfiddle.net/fm8mJ/1/)

# c# - C# 从 TIn 解析通用 TOut

> ID：13539594
> 
> 赞同：0
> 
> 时间：2012-11-24T08:27:37.153
> 
> 标签：c#, .net, generics

> **可能重复：**
> [为什么 C# 不推断我的泛型类型？](https://stackoverflow.com/questions/8511066/why-doesnt-c-sharp-infer-my-generic-types)

假设我们有这样一个方法和一个类：

```
Result<TOut> SendMessage<TIn, TOut>(TIn message)
    where TIn : IMessage<TOut>
{
}

class Message : IMessage<string> 
{
} 
```

为什么当我这样调用它时它不能解析类型：

```
var message = new Message();
var result = SendMessage(message); 
```

我们有 Tin，我们对 Tin 有限制，所以从那里我们可以知道 Tout。但为什么它不起作用？

如果我写

```
var result = SendMessage<Message, string>(message); 
```

它显然有效，但这并不方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:13:52.780

根据[规范](http://en.csharp-online.net/ECMA-334%3a_25.6.4_Inference_of_type_arguments)，类型推断发生在输入参数而不是返回类型上。

您可以通过在参数列表中包含输出泛型类型参数来解决您的问题：

```
 public static Result<TOut> SendMessage<TOut>(IMessage<TOut> message) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-24T08:43:31.483

我认为这是通用方法的语法规则。如果将方法声明为 Generic，则在调用该方法时始终需要提供类型。

# mysql - 如何简化此查询？

> ID：13539595
> 
> 赞同：0
> 
> 时间：2012-11-24T08:27:41.583
> 
> 标签：mysql, sql

查询一：

```
SET @count = 0;
    UPDATE a_daily_copy_copy
    SET a_daily_copy_copy.Cummulative_Target = @count:= target + @count 
    where a_daily_copy_copy.Site_id = 1 
          and a_daily_copy_copy.Year=4 
          and a_daily_copy_copy.Billing_cycle=1
    ORDER BY date 
```

查询2：修改a_daily_copy_copy.Billing_cycle=2

```
 SET @count = 0;
    UPDATE a_daily_copy_copy
    SET a_daily_copy_copy.Cummulative_Target = @count:= target + @count
    where a_daily_copy_copy.Site_id = 1 
          and a_daily_copy_copy.Year=4 
          and a_daily_copy_copy.Billing_cycle=2
    ORDER BY date 
```

我是初学者，到目前为止，我每次都通过编辑查询 1 手动运行查询，并且我知道两个查询都可以合并为一个查询。

我尝试使用 Group by function 解决，但无法提出请帮助我。

已筛选表： ![在此处输入图像描述](../Images/78ba4634056aa23d9a0a76b08506de29.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:42:28.637

在我看来，您可以这样做：

```
SET @count = 0;
    UPDATE a_daily_copy_copy
    SET a_daily_copy_copy.Cummulative_Target = @count:= target + @count where a_daily_copy_copy.Site_id = 1 and a_daily_copy_copy.Year=4 and a_daily_copy_copy.Billing_cycle IN (1, 2)
    ORDER BY date 
```

...除非我错过了除计费周期之外的两个查询之间的差异。

# quartz.net - 在 Quartz.Net 中为 BiWeekly 作业配置 CronString

> ID：13539596
> 
> 赞同：2
> 
> 时间：2012-11-24T08:27:49.023
> 
> 标签：quartz.net, cronexpression

如何为以下作业配置 Quartz.Net 作业调度程序的 CronString：

作业应在周一中午 12:00 在 BiWeekly 上运行。即它应该在每个星期一运行，但在其间跳过一周。

例子：

```
1st Run => 19-Nov-2012 [Monday] 12:00 AM
2nd Run => 03-Dec-2012 [Monday] 12:00 AM
3rd Run => 17-Dec-2012 [Monday] 12:00 AM 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T17:35:30.237

实际上，您可能正在寻找的是 CalenderIntervalTrigger，它能够轻松地做到这一点。

```
var trigger = TriggerBuilder.Create()
    .StartAt(new DateTime(2012, 11, 19, 12, 0, 0).ToUniversalTime())
    .WithCalendarIntervalSchedule(x => x.WithIntervalInWeeks(2))
    .Build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T06:37:05.967

可以为一周中的任何频率创建一个“cron 表达式”，如下所示。

```
int repeatInterval = 2;
int weeklyInterval = repeatInterval*7;
String cronExp="0 0 12 1/ " +weeklyInterval " * ? *"; 
```

创建一个每两周在 12 点重复的 cron 表达式。

希望这可以帮助。

# image - 未在 Tomcat 中调用 Servlet

> ID：13539597
> 
> 赞同：0
> 
> 时间：2012-11-24T08:27:50.563
> 
> 标签：image, mongodb, jsf, tomcat, servlets

我有一个简单的图像 servlet 来提供我存储在 Mongodb GridFS 中的图像。但是，我的 servlet 似乎没有被调用。

下面你可以看到我的 web.xml 的一部分，以及浏览器中的 xhtml 和 html 源代码。jsf 代码似乎工作正常，并且正在提取正确的 id。从我的日志看来，显示页面时没有调用 servlet 的 doGet 方法。

任何关于为什么不的想法将不胜感激。

这是我的 web.xml 片段：

```
<servlet>
    <servlet-name>imageServlet</servlet-name>
    <servlet-class>com.iLearn.view.servlet.ImageServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>imageServlet</servlet-name>
    <url-pattern>/image/*</url-pattern>
</servlet-mapping> 
```

这是来自 xhtml 文件的片段：

```
 <h:panelGrid id="resourcePanel" columns="4">
    <a4j:repeat value="#{resourceUpload.resources}" var="res"
        rowKeyVar="rowKey">
        <h:panelGrid columns="1" style="width:100px; height:150 px;">
                <h:graphicImage
                    value="image?id=#{res.idAsString}"
                    style="width:100px; height:100px;"
                />
                <h:outputText value="#{res.name}" />
                <h:outputText value="#{res.mimeType}" />
                <h:outputText value="#{res.bytes}" />
        </h:panelGrid>
    </a4j:repeat>
</h:panelGrid> 
```

这是我从浏览器获得的来源：

```
<table style="width:100px; height:150 px;">
<tbody>
<tr>
<td><img src="image?id=50ad879f93839043ffc4f156" style="width:100px; height:100px;" /></td>
</tr>
<tr>
<td>headshot.JPG</td>
</tr>
<tr>
<td>image/jpeg</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
<table style="width:100px; height:150 px;">
<tbody>
<tr>
<td><img src="image?id=50add3b09383f7b98d0f6e66" style="width:100px; height:100px;" /></td>
</tr>
<tr>
<td>workon.JPG</td>
</tr>
<tr>
<td>image/jpeg</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table> 
```

这是我的 servlet 中的 doGet 方法。由于它没有命中第一个日志语句，我很确定它永远不会进入这个方法。为什么不？？

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String idString = request.getParameter("id");
getLogger().debug("ImageServlet got request to serve up image id = " + idString);
    if((idString == null) || (idString.isEmpty())) {
        getLogger().debug("Image id was null, so image not displayed");
        return;
    }
    ObjectId id = new ObjectId(idString);
    Resource image = getResourceRecordDao().load(id);
    if(image == null) {
        getLogger().warn("Could not find image with id: " + id);
        return;
    }
    response.reset();
    response.setContentType(image.getMimeType());
    response.setHeader("Content-Length", String.valueOf(image.getSize()));
    response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");
    image.render(response.getOutputStream());
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:03:21.920

in 的相对路径`<h:graphicImage>`是相对于当前请求 URL 的。因此，如果当前请求的页面本身位于 http://examlpe.com/context/folder/page.xhtml 之类的文件夹[中](http://examlpe.com/context/folder/page.xhtml)，则图像将从[http://example.com/context/folder/image下载?id=123](http://example.com/context/folder/image?id=123)，而您想从上下文根中引用它，如[http://example.com/context/image?id=123](http://example.com/context/image?id=123)。

前缀 URL`/`使其成为绝对路径，`<h:graphicImage>`并将呈现相对于上下文根的 URL。

```
<h:graphicImage value="/image?id=#{res.idAsString}" /> 
```

* * *

**与具体问题无关**，您应该在找不到图像时返回 404，而不是空响应。否则会使客户感到困惑。

```
if (image == null) {
    getLogger().warn("Could not find image with id: " + id);
    response.sendError(HttpServletResponse.SC_NOT_FOUND);
    return;
} 
```

*（在您检查参数本身的其他地方也可以这样做）*

# php - 将数据 mysql 分解为所选项目

> ID：13539598
> 
> 赞同：-3
> 
> 时间：2012-11-24T08:28:09.837
> 
> 标签：php, mysql

我在mysql中有数据

## id|merchant_id|card_support|

1 | 000001 | 签证，万事达卡，美国运通|
2 | 000002 | 签证，万事达卡|

php：
我认为这里的 php 有问题：

```
<?php $qryselect = mysql_query("select * from cc_merchant"); ?>
  <span style="font:25px Verdana, Arial, Helvetica, sans-serif; color:#666666; font-weight:bold;">CREDIT CARD TYPE</span>
            <?php 
            $getcard = mysql_fetch_assoc($qryselect);
            $card = $getcard['card_support']; 
            $cctype = explode(',',$card);
            ?>
            <select>
            <option value="">&nbsp;</option>
            <?php for ($a = 0; $a < sizeof($cctype); $a++) {?>
            <option value="<?php echo $cctype[$a]; ?>"><?php echo $cctype[$a]; ?></option>
            <?php } ?>
            </select> 
```

这里有什么问题...我想在爆炸后将数据显示到选定的项目中...但似乎没有任何显示...请帮助..

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-24T08:36:55.677

最好使用[count()](http://php.net/manual/en/function.count.php)而不是[sizeof()](http://php.net/manual/en/function.sizeof.php)，因为 sizeof() 在大多数其他语言中并不意味着同样的事情。此外，建议使用`foreach()`遍历数组：

```
foreach($cctype as $c){
    echo '<option value="'.$c.'">'.$c.'</option>';
} 
```

# sorting - 无键比较排序算法

> ID：13539600
> 
> 赞同：2
> 
> 时间：2012-11-24T08:28:37.043
> 
> 标签：sorting

在这个[网页上](http://www.cprogramming.com/tutorial/computersciencetheory/sortcomp.html)，我可以阅读：

> 一些特殊情况算法（在 Programming Pearls 中提到了一个示例）可以比 O(n*log(n)) 更快地对某些数据集进行排序。这些算法不是基于比较被排序的项目，而是依赖技巧。已经表明，没有任何密钥比较算法可以比 O(n*log(n)) 执行得更好。

这是我第一次听说**非比较算法**。谁能给我一个这些算法的例子，并更好地解释他们如何比 O(nlog(n)) 更快地解决排序问题？该网页的作者在谈论什么样的技巧？

欢迎任何指向论文或其他良好来源的链接。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T08:39:10.200

首先，让我们弄清楚术语：

1.  *关键比较*算法不能比`O(n logn)`.
2.  存在其他 -*非比较*- 算法，给定关于数据的某些假设，可以做得比`O(n logn)`. [桶排序](http://en.wikipedia.org/wiki/Bucket_sort)就是这样一个例子。

举一个第二类的直观示例，假设您知道输入数组完全由零和一组成。您可以遍历数组，计算零和一的数量。让我们称最终计数`n0`和`n1`。然后你遍历输出数组，写出`n0`零和一`n1`。这是一种`O(n)`排序算法。

仅仅因为我们利用了数据的特殊结构，才有可能为这个问题提出一个线性时间算法。这与通用的*关键比较算法形成对比。*这样的算法不需要知道任何关于数据的信息，除了一件事：它们需要知道如何比较任意两个元素的排序键。换句话说，给定任意两个元素，他们需要知道在排序数组中哪个应该排在第一位。

`O(n logn)`仅使用一种算法就能够以任何可以想象的方式对任何事物进行排序的代价是，没有任何一种算法可以比平均水平做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:35:38.010

是的，非比较排序通常需要 O(n) 这些排序算法的一个例子是[桶排序](http://en.wikipedia.org/wiki/Bucket_sort)和[基数排序](http://en.wikipedia.org/wiki/Radix_sort)

# linux - 未为 uart 串行驱动程序创建 /dev/tty* 处的设备节点

> ID：13539604
> 
> 赞同：14
> 
> 时间：2012-11-24T08:29:07.443
> 
> 标签：linux, linux-kernel, serial-port, linux-device-driver, uart

我在嵌入式 Linux 中编写了一个简单的 UART 串​​行驱动程序，使用 mdev 规则运行 busybox。我在我的驱动程序代码中提供`.dev_name`了“ ”。`ttyC2C`

```
static struct uart_driver serial_omap_reg = {
   .owner      = THIS_MODULE,
   .driver_name   = "Omap-C2C-Serial",
   .dev_name   = "ttyC2C",
   .nr      = OMAP_MAX_HSUART_PORTS,
   .cons    = NULL,
}; 
```

但是该节点正在创建

```
./sys/devices/platform/omap_c2c_uart.0/tty/ttyC2C0
./sys/class/tty/ttyC2C0

/ # ls -l ./sys/class/tty/ttyC2C0
lrwxrwxrwx    1 root     0                0 Jan  1 00:14 ./sys/class/tty/ttyC2C0 -> ../../devices/platform/omap_c2c_uart.0/tty/ttyC2C0

/ # ls -l ./sys/devices/platform/omap_c2c_uart.0/tty/ttyC2C0
-r--r--r--    1 root     0             4096 Jan  1 00:14 dev
lrwxrwxrwx    1 root     0                0 Jan  1 00:14 device -> ../../../omap_c2c_uart.0
drwxr-xr-x    2 root     0                0 Jan  1 00:14 power
lrwxrwxrwx    1 root     0                0 Jan  1 00:14 subsystem -> ../../../../../class/tty
-rw-r--r--    1 root     0             4096 Jan  1 00:14 uevent
/ # 
```

tty 的 mdev 规则是：

```
tty 0:5 0666
tty.* 0:0 0620 
```

如何获取设备节点为`/dev/ttyC2C`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T11:51:02.527

你混淆了两件事。您看到的 sysfs 节点确实是由内核基于 kobject 层次结构维护的。然而，设备节点完全是一个用户空间问题，可以存在于任何地方（尽管按照惯例在 /dev 下）。

因此，您将首先手动找到主要：次要数字：

```
cat /sys/class/tty/ttyC2C0/dev 
```

进而：

```
mknod /dev/ttyC2C0 c ${MAJOR} ${MINOR} 
```

但是，正如您已经指出的那样，您正在使用 udev 的分支 mdev 来处理设备节点的用户空间创建。然而，匹配规则对我来说看起来很奇怪。我假设 mdev 具有相当于 udevadm 的功能，它应该可以帮助您编写匹配规则。例如我的 USB tty 驱动可以这样查询：

```
udevadm info -a -p /sys/class/tty/ttyUSB0 
```

查看生成的树，我可以看到可以用来匹配的 udev 属性列表。所以在我的情况下：

```
KERNEL=="ttyUSB0", DRIVERS=="ftdi_sio", NAME="ttyUSB0" 
```

足以匹配（尽管我的发行版有更复杂的匹配规则来处理动态设置）。

我猜，但我怀疑你想要的映射规则看起来更像：

```
KERNEL=="ttyC2C", NAME="ttyC2C" 
```

尽管您可能需要更多的时间来确保为每个端口（次要编号？）创建设备节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:13:21.470

`/etc/mdev.conf`为您的 ttyC2C添加特定的 mdev 规则是否可以解决您的问题？类似于以下之一？

`ttyC2C[0-9]+ root:tty 620`

或者

`ttyC2C[0-9]+ root:tty 620 @/bin/ln -sf $MDEV ttyC2C`

# c++ - Qt C++ 视频库

> ID：13539609
> 
> 赞同：5
> 
> 时间：2012-11-24T08:30:10.383
> 
> 标签：c++, qt

我正在寻找一个用于 Qt 4 (C++/Windows) 的视频库，它具有：

**1) 基本的视频播放功能**

它应该可以播放所有常见的视频格式，例如 DVD VOB 和 MP4/MKV/AVI（h264、xvid、divx）。它还应该能够自动对视频进行去隔行扫描并以显示纵横比显示。

**2) 裁剪**

它应该具有一些基本功能来删除黑条（用户提供的参数）。

**3) 快照**

它应该具有在内存中拍摄快照的功能。

**4）逐帧搜索**

它应该有一些基本的功能来进行逐帧搜索，例如prevFrame()、nextFrame()、jumpTo(frame) 和getNumFrames()。

* * *

我尝试了以下方法，并从中可以找到它们支持的功能：

**Qt声子：**

1.  是的。播放所有需要的格式并正确显示它们。
2.  不。
3.  否。未实施（返回空图像）。
4.  不。

**QtFFmpegWrapper：**

1.  部分的。不去隔行 DVD VOB。不在 DAR 中显示 DVD VOB。
2.  不。
3.  是的。
4.  部分的。MKV (h264) 损坏。

**Qt VLC：**

1.  是的。播放所有需要的格式并正确显示它们。
2.  是的。还没有尝试过是否有效。
3.  部分的。只能到磁盘。**编辑：** QPixmap::grabWindow(player->videoWidget()->winId()) 有效。
4.  不，只有几毫秒。

现在我正在查看 QVision，它似乎具有除裁剪之外的所有这些功能。也许实施裁剪并不是那么困难。但我想知道是否还有其他我应该研究的库？或者也许我错过了一些东西，而这些库之一是可能的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:57:06.143

您可以考虑ViscomSoft 的[Movie Player Gold SDK ActiveX 3.6](http://www.viscomsoft.com/products/movieplayergold/index.html)。我没有在他们的网站上看到裁剪，但内存快照和逐帧步骤是受支持的功能之一。

我在 Windows Qt 软件中使用了他们的 VideoEdit 和 Screen2Video SDK，效果很好。

# css - 在 Rails 3.2.8 中未应用 CSS 样式表

> ID：13539615
> 
> 赞同：0
> 
> 时间：2012-11-24T08:31:04.703
> 
> 标签：css, ruby-on-rails-3, ruby-on-rails-3.2, sass

出于某种原因，我无法将样式表正确应用到我正在阅读“使用 Rails 第四版的敏捷 Web 开发”一书的产品中。在这本书中，产品表内的背景看起来与粉红色和其他颜色交替出现。

我是 Rails 的新手，我对 CSS 或 SCSS 还不太了解。

文件 ../depot/app/assets/stylesheets/products.css.scss 具有以下内容：

```
/* START_HIGHLIGHT */
.products {
  table {
    border-collapse: collapse;
  }

  table tr td {
    padding: 5px;
    vertical-align: top;
  }

  .list_image {
    width:  60px;
    height: 70px;
  }

  .list_description {
    width: 60%;

    dl {
      margin: 0;
    }
dt {
      color:        #244;
      font-weight:  bold;
      font-size:    larger;
    }

    dd {
      margin: 0;
    }
  }

  .list_actions {
    font-size:    x-small;
    text-align:   right;
    padding-left: 1em;
  }

  .list_line_even {
    background:   #e0f8f8;
  }
  .list_line_odd {
    background:   #f8b0f8;
  }
}
/* END_HIGHLIGHT */ 
```

这是 ..app/views/products/index.html.erb

```
<h1>Listing products</h1>

<table>
<% @products.each do |product| %>
  <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">

    <td>
      <%= image_tag(product.image_url, class: 'list_image') %>
    </td>

    <td class="list_description">
      <dl>
        <dt><%= product.title %></dt>
        <dd><%= truncate(strip_tags(product.description),
               length: 80) %></dd>
      </dl>
    </td>

    <td class="list_actions">
      <%= link_to 'Show', product %><br/>
      <%= link_to 'Edit', edit_product_path(product) %><br/>
      <%= link_to 'Destroy', product,
                  confirm: 'Are you sure?' ,
                  method: :delete %>
    </td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New product', new_product_path %> 
```

和 ..app/views/layouts/application.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title>Depot</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<!-- START_HIGHLIGHT -->
<body class'<%= controller.controller_name %>'>
<!-- END_HIGHLIGHT -->

<%= yield %>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:07:14.690

首先

```
<body class'<%= controller.controller_name %>'> 
```

我认为这里缺少 =：

```
<body class='<%= controller.controller_name %>'> 
```

第二个

如果没有清单文件（application.css），很难说您是否需要该样式表，但我想它应该是：

```
/*
 *= require_self
 *= require products
 */ 
```

甚至更好，而不是在清单文件中要求，以这种方式在布局中包含特定控制器的 css：

```
<%= stylesheet_link_tag params[:controller] %> 
```

在您提问之前，为了获得最佳实践，请确保您的浏览器中是否包含特定的 css。使用开发人员工具检查编译的 CSS 或文档结构。

最好的

# google-chrome - 启动 chrome 扩展调试器后无法输入

> ID：13539618
> 
> 赞同：0
> 
> 时间：2012-11-24T08:31:29.107
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我正在尝试调试我的 chrome 扩展，但是一旦我打开调试器，所有键盘扩展都会被调试器或主 chrome 窗口捕获，并且我无法在我的扩展弹出窗口中输入。如果我不打开扩展调试器，它工作正常。任何想法如何解决这个问题？

# php - Centos 6、PHP、apache、CPanel memory_limit 不会增加

> ID：13539626
> 
> 赞同：0
> 
> 时间：2012-11-24T08:32:53.177
> 
> 标签：php, apache, centos, out-of-memory, memory-limit

当运行某个需要大量内存的 PHP 脚本时，我收到“内存不足（已分配 137887744）（试图分配 93 个字节）...”错误。

我试过在我知道的所有地方增加这个..

php.ini，将 php.ini 复制到本地文件夹并在此处增加。ini_set() on 在脚本文件等中。

phpinfo 说内存是 512M。

有什么建议可以增加内存吗？

谢谢，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T21:31:45.730

也许这对某人有帮助。我遇到过同样的问题。我读到的所有内容都表明这是由 Apache 中的 RLimitMEM 设置引起的。这并没有为我解决问题。经过几天的努力，我终于通过发现和编辑 /usr/local/apache/conf/rlimit-config 解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:54:05.133

这不是因为 PHP 本身（正如 Pekka 在评论中所说）。来自 ini 设置的错误消息引用“Allowed Memory”被超出，这是直接的“内存不足”。更改 ini 设置将不起作用。

优先级 1 是检查您的脚本。除非您处理图像或一些非常大的文件，否则您不应该接近该内存要求。只需先仔细检查该位。

选项 2：您需要允许 Apache / PHP 使用内存（假设您无法优化您的脚本。您可能正在运行 VPS 或其他限制您的用户可以使用的内存 - 有一个名为“limits”的文件.conf”（在安全目录中，`man limits.conf`更多信息），还有一个内存管理应用程序 smem，可以限制每个用户。所以去你的主机并增加这些 - 但如果你在共享服务器上，他们会问为什么和可能要你升级！

# xcode - 如何创建一个屏幕，例如在照片库中删除照片时会显示带有 2 个选项的启动画面：删除照片或取消？

> ID：13539629
> 
> 赞同：0
> 
> 时间：2012-11-24T08:33:32.037
> 
> 标签：xcode, photo, splash-screen

如何创建一个屏幕，例如在照片库中删除照片时会显示带有 2 个选项的启动画面：删除照片或取消？

我不知道用什么组件来做到这一点。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:37:41.720

这叫做一个`UIActionSheet`。它的使用非常像`UIAlertView`.

# php - 如何在发送之前或之后从 PHP 获取邮件消息 ID

> ID：13539631
> 
> 赞同：2
> 
> 时间：2012-11-24T08:34:01.003
> 
> 标签：php, email, spam, email-spam, spam-prevention

我想跟踪将电子邮件分配为垃圾邮件的用户，然后将它们从邮件列表中删除，或者只是将通知设置为 0，这样他们就不会再收到电子邮件了。

邮件反馈循环可以帮助您做到这一点，但它们只返回带有邮件 ID 的邮件，不会告诉您它来自哪个电子邮件地址。

[http://www.unlocktheinbox.com/resources/feedbackloops/](http://www.unlocktheinbox.com/resources/feedbackloops/)

所以我想知道，如何从使用 PHP`mail()`函数发送的邮件中检索消息 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:40:40.610

您无法获取通过该`mail()`命令发送的邮件的消息 ID。该消息 ID 由 sendmail 或下游的其他任何内容生成。

您将需要使用其他东西来生成您的邮件，例如[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)或许多其他替代方案之一。

# objective-c - AFNetworking 旧版无弧

> ID：13539633
> 
> 赞同：0
> 
> 时间：2012-11-24T08:34:14.253
> 
> 标签：objective-c, ios, afnetworking

我想下载AFNetwoking的老版本没有arc请指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T08:54:14.690

如果您在项目中不使用 ARC，您可以将 -fobjc-arc 标志添加到所有 AFNetworking 源文件以仅编译 ARC 下的那些。您可以在项目设置的“构建阶段”选项卡的“编译源”部分中设置这些标志。

你也可以去 GitHub[标签](https://github.com/AFNetworking/AFNetworking/tags)下载 0.10.1 版本。

# objective-c - 比 performSelector:onThread:withObject 更轻松的线程间通信方式

> ID：13539635
> 
> 赞同：0
> 
> 时间：2012-11-24T08:34:40.520
> 
> 标签：objective-c, multithreading, real-time, nsthread

我正在按照 Matt Ghallagher 的[教程的推荐测试](http://www.cocoawithlove.com/2009/08/safe-threaded-design-and-inter-thread.html)[performSelector:onThread:withObject:waitUntilDone:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3aonThread%3awithObject%3awaitUntilDone%3a)线程间通信。事实证明，它*非常*慢，对于实时音频应用程序几乎[没有好处。](http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing)有什么建议么？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:57:20.173

在主线程上：

```
AnyClass myObject;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
   // do asynchronous work
   // environment objects and variables will be available
   [myObject doSomething];
}); 
```

真的没有比这更简单的了……*

# git - 合并在 git 存储库中的子项目中增长的基础项目，git 子模块或子树合并方法除外

> ID：13539636
> 
> 赞同：2
> 
> 时间：2012-11-24T08:34:47.730
> 
> 标签：git, combinations, git-submodules, repository

未来还有一些子项目：“项目1”、“项目2”等等。

此外，还有一个名为“基础项目”的项目，它是其他项目的基础。“Base Project”是一个内容管理系统（CMS）。

所有项目都有自己的 git 存储库。

“项目1”、“项目2”等使用“基础项目”发展壮大。

git 中有一些方法，例如 submodule 或 subtreemerge。但似乎不适合这里。“基础项目”不应克隆到子目录中。它在根目录中。它在“项目1”或“项目2”中增长......

当我在子项目中工作时，我必须能够将“基础项目”更改单独推送到它自己的存储库以获取其他子项目。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:49:08.690

子树合并或子模块用于基于**[组件的开发](https://stackoverflow.com/questions/933723/what-is-component-driven-development/933735#933735)**：将两个不同但连贯的文件组合在一起。
每组文件都在自己的目录中，因为它们可以独立地分支或标记（子模块），或者一起（子树合并，同时保持取回它们自己的历史的能力）。
两者都需要一个单独的目录。

但是您所描述的（“ `Base Project`”在根目录中，在“ `project 1`”或“ `project 2`”中增长）是关于一种**[基于系统的方法](https://stackoverflow.com/questions/769786/vendor-branches-in-git/769941#769941)**：所有组件合并为一个大组件：一大组文件将始终一起演变，作为一个单元。
因此，每个项目可以有一个分支：`branch1`for `CMS-projet1`、`branch2`for`CMS-project2`等。

但是，如果您需要将`projectx`特定的修改或特定于 CMS 的修改报告回其原始（和单独的）存储库，则**在专用分支中进行所述特定更改，然后合并这些更改**：

*   `branchp1`将是影响的变化`project1`
*   `branchc1`将是影响的变化`CMS`
*   `branch1`将是从`branchp1`和合并的结果`branchc1`

（同样的事情`branch2`）

然后，您可以将这些更改导出**为补丁**：

*   从`branchp1`到`project1`回购
*   从`branchc1`到`CMS`回购

不方便的是，Git 不会记住已经合并回原始存储库的内容，但这将允许您将在您`CMS-projectx`的文件集中开发的公共历史报告回原始存储库`CMS`和存储`projectx`库。

* * *

注意：如果您不想管理 2 个额外的分支，另一种解决方案是：

*   确保每次提交仅包含 CMS 修改或项目修改
*   留下有助于区分它们的提交消息（“ `[CMS] my CMS modification comment...`”或“ `[Project1] my project1 modification comment...`”
*   使用[脚本`git-extract-patches`](https://github.com/amenk/SelfScripts/blob/master/git-extract-patches)仅将正确的提交导出为补丁。

# java - Android API 16 选项菜单不显示。但在 android 版本 API 10 中显示菜单

> ID：13539641
> 
> 赞同：2
> 
> 时间：2012-11-24T08:35:19.913
> 
> 标签：java, android, menu

> 结果如下
> 
> 1.  HTC 渴望 2.3.3 : 工作
> 2.  HTC 感觉 4.0.3：工作
> 3.  模拟器 3.2：不工作
> 4.  Galaxy Tab 2 10.1：不工作

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case utility.SETTING_ID:
            Intent intentsetting = new Intent(getBaseContext(),
                    actPreferences.class);
            intentsetting.putExtra("Menu", utility.SETTING_ID);
            startActivity(intentsetting);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(Menu.NONE, utility.SETTING_ID, 0, getApplicationContext(),
                getResources().getString(R.string.txt_setting)).setIcon(
                R.drawable.setting);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T15:06:21.320

尝试将 targetSdkVersion 更改为 8。它应该可以修复它。较新的 api 不像旧的那样支持菜单按钮。

# c# - 类前的抽象关键字：to be or not to be

> ID：13539645
> 
> 赞同：0
> 
> 时间：2012-11-24T08:36:00.583
> 
> 标签：c#, .net

`abstract`我是否应该总是用关键字注释一个仅通过设计保护构造函数的类？为什么？

假设该类没有抽象成员。

如果没有，你能举一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:40:54.447

不。只有受保护的构造函数的类型仍然是可创建的——通过该类型的静态工厂方法，或通过反射（包括，作为一种选择，完全跳过构造函数）。

抽象类型**永远不可**创建。

将类型标记为抽象：*如果它是抽象的*。那么：存在该类型的对象（而不是子类）有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T08:39:33.850

不，您不应该按设计这样做，因为这不是`abstract`类的用途。

[MSDN 上的摘要](http://msdn.microsoft.com/en-us/library/sf985hc5%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:57:29.277

在我看来，一个抽象类用于表示一堆在逻辑视图中具有相同类型的类。这意味着这一堆类在属性或行为中都很常见。它不用于表示具有“私有”构造函数的类，并且不能在类本身之外创建。

# apache - 将停止触发 404 的 mod_rewrite 规则

> ID：13539646
> 
> 赞同：0
> 
> 时间：2012-11-24T08:36:05.093
> 
> 标签：apache, mod-rewrite

我有页面

```
www.mydomain.com/cms/index.php 
```

我需要一个 mod_rewrite 规则，当我输入类似的内容时，它将停止触发显示 404 页面

```
www.mydomain.com/cms/keyword1/keyword2/keyword3 
```

或者

```
www.mydomain.com/cms/keyword1/keyword2/999-keyword3.html 
```

等等。我想要的是将 [cms] 之后的所有内容传递给索引文件进行处理

所以

```
[www.mydomain.com/cms/keyword1/keyword2/keyword3] 
```

将返回

```
[keyword1/keyword2/keyword3] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:49:40.140

在你的 .htaccess 文件中试试这个

```
<IfModule mod_rewrite.c>

    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ cms.php?content=$1 [L,QSA]

</IfModule> 
```

这会将用户重定向到您的 cms.php 自定义页面，或者您可以更改名称，并将在 $_GET['content']; 中发送请求的页面；

cms.php 的内容可以是

```
 echo $_GET['content'];
       // should output "cms/keyword1/keyword2/999-keyword3.html" in your case 
```

# matlab - 峰值并降低它们以更符合信号的整体平均值

> ID：13539651
> 
> 赞同：1
> 
> 时间：2012-11-24T08:37:29.467
> 
> 标签：matlab, signal-processing, octave

我有一个产生尖峰的信号。我有没有办法将这些峰值的幅度降低到更符合信号的整体平均值？ [链接到文本文件中的示例数据](http://dl.dropbox.com/u/6576402/questions/example_data_with_peak.txt)

**数据图像** ![在此处输入图像描述](../Images/f384640b64d65f650800733788740237.png)

我正在使用 Octave 3.2.4/Matlab

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:18:34.993

似乎您需要某种方法来稳健地估计您的平均值。我能想到的一种方法是定义异常值的百分比（比如 5%），然后对条目进行排序并丢弃前 5%。取剩下的平均值 - 就是这样！

```
s = sort( abs(signal) );
TopPer = 0.05; % remove top 5% as outliers
n = floor( numel(signal) * ( 1 - TopPer ) );
robustMean = mean( s(1:n) );
% clamped signal
clampedSignal = min( max( signal, -robustMean ), robustMean ); 
```

# sql - 如何在 SQL 中记录日常活动

> ID：13539654
> 
> 赞同：0
> 
> 时间：2012-11-24T08:38:09.550
> 
> 标签：sql, database

我想跟踪我网站上全天发生的某些事情，然后我希望能够编译数据，以便我可以每天查看它。在 SQL 数据库中执行此操作的最佳方法是什么？有没有比每次（可能每天数千次）都保留“日期|动作|数据”更好的方法，然后当我想查看它时，只需拉出“日期 = X”？似乎这会产生很多开销，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:50:32.607

MySql 可能不适合存储大量日志数据，但通过一些优化可以变得更好，这里有一些提示：

*   将 MyISAM 与并发插入一起使用
*   每天轮换表，使用联合查询
*   使用 MySQL 或 Gearman 等作业处理代理的延迟插入

数据的检索在这里可能不是问题，但存储引擎很重要，在这种情况下，MySAM 是您的最佳选择，因为没有事务（它不支持）。

MyISAM 支持的最大行数约为 4.29E+09，每个表最多 64 个索引。我认为这对你很好。

查看这篇关于[使用 MySql 进行高效日志记录的详细文章](http://brian.moonspot.net/logging-with-mysql)

# php - 如何设置回复和退回电子邮件之间的区别

> ID：13539658
> 
> 赞同：-1
> 
> 时间：2012-11-24T08:39:14.323
> 
> 标签：php, email, email-bounces

我正在构建系统，该系统跟踪退回的电子邮件，并且当用户回复消息时，其他用户可以阅读该用户的消息。

到目前为止，我已经阅读了所有问题/答案，退回的电子邮件可以发送到返回路径或回复路径。

我该如何解决这个问题？我应该扫描并查看它是否退回电子邮件，如果不是，则将其视为消息电子邮件或有其他方法吗？

检查退回邮件然后解析消息，这只是额外的开销，当系统从退回邮件或消息中收到大量电子邮件时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:48:56.017

退回邮件应发送回给定的地址，而对于回复，您可以在标题`From`中提供备用地址。`Reply-To`因此，如果您在那里设置两个不同的地址（即`From: bounce@...`和`Reply-To: reply@....`，并处理到达的邮件

# mysql - Mysql获取数据中的意外字段

> ID：13539664
> 
> 赞同：1
> 
> 时间：2012-11-24T08:40:33.057
> 
> 标签：mysql

我有一个查询，其中数据是从数据库中提取的。例如：我将类别作为一个字段，其中包含从数据库中获取的 Doctors、Pathologists 等值。

```
 Category
 --------
 Doctors
 Pathologists
 Pediatrics/Child Specialist --->> Unwanted data 
```

问题是“类别”字段中有一个数据（值）意外显示在我的数据库中没有的列表中。我什至尝试完全删除表格并重新加载它，但该字段仍在显示。

谁能告诉我为什么会这样？

附加信息

```
function  getTierCategory()
{
echo "</br>";
$result = mysql_query("SELECT DISTINCT Category FROM doctors order by Category asc") 
or die(mysql_error());

  while($tier = mysql_fetch_array( $result )) 

    {
       echo '<option value="'.$tier['Category'].'">'.$tier['Category'].'</option>';
    }

} 
```

我已经尝试重命名该字段，但如果这个值甚至不在我的数据库中，我该怎么办。

我的数据库看起来像

```
Category | Qualification | State  | District
-------------------------------------------- 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:11:54.180

在 PHPmyadmin 或类似的工具中登录到您的数据库并检查 mysql 查询的结果。

在一些复杂的查询中，您可以接收冗余字段（当您在 PHP 中有计数变量时在示例索引上）或 NULL 值。

mysql_fetch_array() 以两种方式返回结果：

*   数字索引数组（$array[0] 等）
*   关联数组（$array['field_name'] 等）

尝试使用 mysql_fetch_assoc 或 mysql_fetch_row 代替。还建议将 PDO_MYSQL API 用于 MySQL 查询。它有更方便的形式。

# css - 文本下方的 CSS3 元素类

> ID：13539668
> 
> 赞同：2
> 
> 时间：2012-11-24T08:41:06.177
> 
> 标签：css

我的代码很简单，但我想将 css3 三角形移动到文本“click”的中间。有人可以帮我吗？

```
**HTML**
<li><a href="#" class="arrow">click</a></li>​

**CSS**
li{list-style:none; }
.arrow{
    width: 0px;
    height: 20px;
    border-style: solid;
    display:block;
    border-width: 0 5px 8px 5px;
    border-color: #000 transparent;
}​ 
```

在线代码：http: [//jsfiddle.net/8rRyf/](http://jsfiddle.net/8rRyf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:19:04.907

我不确定是否有办法定位边界，但这样的事情应该可以解决问题。

```
li{list-style:none; }

a {
    display: block;
    width: 40px;            
}

.arrow{
    position: relative;
    width: 0px;
    height: 0px;
    margin: 0 auto;
    border-style: solid;
    display:block;
    border-width: 0px 5px 8px 5px;
    border-color: #000 transparent;
}

<li><a href="#">click<span class="arrow"> </span></a></li> 
```

[http://jsfiddle.net/8rRyf/19/](http://jsfiddle.net/8rRyf/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:30:42.483

我不想添加任何额外的元素，到目前为止，这是唯一可以解决的方法。添加`text-indent`在 li 中成功了！

```
li{list-style:none; margin-left:20px; text-indent: -8px;}

.arrow{
    width: 0px;
    height: 20px;
    border-style: solid;
    display:block;
    border-width: 0 5px 8px 5px;
    border-color: #000 transparent;
}​ 
```

[http://jsfiddle.net/8rRyf/24/](http://jsfiddle.net/8rRyf/24/)

# matlab - 如何在matlab中进行GUI编程

> ID：13539671
> 
> 赞同：1
> 
> 时间：2012-11-24T08:42:17.333
> 
> 标签：matlab, matlab-guide

我正在尝试在 matlab 中学习 GUI 编程，为此我正在尝试创建一个简单的乘法计算器。我在 matlab 中做了一些没有 GUI 的程序，但我很难理解 Matlab 中的 GUI 编程。我已经创建了 GUI，但我不知道如何为此进行编程。

这是我制作的 GUI ![在此处输入图像描述](../Images/89a68f07158b69e859f60bce456a5577.png)

```
EDIT TEXT 1; string= 0
EDIT TEXT 1; tag= edit1
EDIT TEXT 2; string= 0
EDIT TEXT 2; tag= edit2
STATIC TEXT 1; string= X
STATIC TEXT 1; tag= text3
STATIC TEXT 2; string= 0     (for showing results)
STATIC TEXT 2; tag= result
PUSHBUTTON; String= Calculate
PUSHBUTTON; tag=push_calc 
```

我以“add”的名称保存了给定的 GUI 并创建了 add.m 。你能告诉我如何为给定的 gui 进行编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:50:35.780

matlab gui编程的基本思想如下：

1.  设置数字
2.  进入消息循环

这两个步骤都通过使用 matlab gui 编辑器（指南）来处理。重要的是您将程序流的控制权交给了消息循环。为了完成任务，您可以告诉消息循环在发生任何事情时调用一个函数。

在 gui 编辑器中，右键单击您的按钮并选择“查看回调 -> 回调”。这将在您的 .m 文件中自动创建这样一个函数，您可以在其中指定按下按钮时会发生什么。

为了更好地理解，请查看按钮的回调属性。Guide 将输入类似`add('push_calc_Callback',hObject,eventdata,guidata(hObject))`调用主函数 (add) 作为新回调函数的包装器的内容。您可以在属性编辑器中自己完成，也可以在启动代码中以编程方式完成。

我想您希望发生以下情况：

1.  获取edit1和edit2的字符串值
2.  将字符串转换为数值
3.  执行计算
4.  将 text3 的字符串值设置为结果的字符串表示

您可以使用可用的句柄作为第三个函数参数以及 get 和 set 函数来访问 gui 元素的属性。句柄结构由指南创建，元素的名称与您指定的标签相同。

在 matlab 代码中，这可能如下所示：

```
% --- Executes on button press in push_calc.
function push_calc_Callback(hObject, eventdata, handles)
% hObject    handle to push_calc (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
x_string = get( handles.edit1, 'String');
y_string = get( handles.edit2, 'String');

x_numeric = str2num( x_string );
y_numeric = str2num( y_string );

result_numeric = x_numeric * y_numeric;
result_string = num2str( result_numeric );

set( handles.result, 'String', result_string); 
```

**编辑：**问题是handles.edit1 等等。每当您想使用按钮或文本框之类的小部件做某事时，您必须能够准确地告诉 matlab 您的意思是什么小部件。指南在幕后做了一些事情。其中之一是调用[uicontrol](http://www.mathworks.de/de/help/matlab/ref/uicontrol.html)，它创建小部件并返回一个随机但唯一的数字。这有点像银行帐号，因为它是可用于操作它的资源的[句柄。](http://en.wikipedia.org/wiki/Handle_%28computing%29)当您在指南中创建新按钮并在属性编辑器中分配标签“clickme”时，指南将创建按钮并将句柄存储在[结构](http://www.mathworks.de/de/help/matlab/matlab_prog/create-a-structure-array.html) `handles.clickme`中。如果您仍然记得分配给它的标签，那么这为您提供了一种简单的方法来获取您创建的任何小部件的句柄。

让我们看函数的第一行：

```
x_string = get( handles.edit1, 'String'); 
```

只要它与 matlab 与 edit1 小部件关联的数字和属性编辑器中的属性名称（在本例中为“字符串”）相同，就会调用函数[get并使用您不应该关心的某个数字。](http://www.mathworks.de/de/help/matlab/ref/get.html)这与您单击所有窗口元素直到属性编辑器显示“edit1”标记并为该对象找到名为“String”的属性的值相同。

每当您输入新文本、移动滑块、更改窗口大小等时，属性都会自动更新。它也可以反过来工作。如果您使用 修改“位置”属性`set( handles.edit1, 'Position', [20 20 100 30])`，则小部件会自动移动并重新调整大小到指定位置。

# android - IDEA的logcat过滤器可以自动识别正在运行的app吗？

> ID：13539677
> 
> 赞同：3
> 
> 时间：2012-11-24T08:43:12.157
> 
> 标签：android, intellij-idea

要么我找不到这个，要么 IDEA**还没有**像 Eclipse 很久以前那样实现智能过滤器。

当我查看`logcat`IDEA 11 中的选项卡时，我没有看到它会自动识别正在运行的应用程序并将其添加到 下`All Messages`，就像 Eclise 对每个运行的应用程序所做的那样。

我错过了什么吗？

我看到他们在一年前添加了“改进的过滤”功能（[链接](http://blogs.jetbrains.com/idea/2011/11/new-in-intellij-idea-11-improved-filtering-in-android-logcat/)），但我仍然没有找到很好的用途。你？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:24:39.227

此功能尚不可用。我[添加了一个新功能请求](http://youtrack.jetbrains.com/issue/IDEA-95780)，请随时投票。

# linux - 尝试通过 SSH 持久化进程失败

> ID：13539681
> 
> 赞同：0
> 
> 时间：2012-11-24T08:43:40.407
> 
> 标签：linux, unix, ssh, gnu-screen

我有一个长时间运行的 python 程序，我试图在远程服务器上运行。

我看过[“如何在结束 ssh 会话后保持进程运行？”](https://askubuntu.com/questions/8653/how-to-keep-processes-running-after-ending-ssh-session) , [" 如何通过 SSH 启动进程，让它继续运行？"](https://stackoverflow.com/questions/12075642/how-to-start-process-via-ssh-so-it-keeps-running) , ["Run a persistent process via ssh"](https://stackoverflow.com/questions/9237385/run-a-persistent-process-via-ssh)和其他一些主题，但它们似乎没有帮助。

我已经尝试使用`screen`（通过分离`screen`包含后台进程）`nohup`和，因为 python 程序正在创建一些图形），ssh 会话挂起。

即使我重定向`stdin`, `stdout`, `stdout`from/to ，ssh 进程也会挂起`/dev/null`。终止 ssh 会话会终止 python 进程。当我终止 ssh 时，远程服务器上会打印以下错误消息：`g_dbus_connection_real_closed: Remote peer vanished with error: Underlying GIOStream returned 0 bytes on an async read (g-io-error-quark, 0). Exiting.`

此外，我实际上不想重定向`stdout`或`stderr`to `/dev/null`，因为我想将它们重定向到日志文件。所以我没有尝试将python进程作为守护进程运行。（也许日志被发送到 很糟糕`stdout`，我猜......）

我应该怎么做，以便我可以：（1）在注销后保持我的进程运行，（2）重定向`stdout`/`stderr`到日志文件？

（“有效”的一件事是在后台暂停然后重新运行 ssh 进程 [挂起后]，但是如果我想关闭计算机怎么办？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:52:13.523

X11 连接确实是问题所在。Screen 负责保持 stdin/stdout/stderr 连接，它还保护程序免受 HUP 信号的影响。然而，它并没有为它保留一个虚拟 X 服务器来写图形。

所以问题是：你想要什么图形？如果您的程序确实需要输出它们，您需要设置一个（虚拟）X 服务器，即使在连接丢失后它也可以继续访问。您可以使用 vnc 连接到此虚拟服务器，就像您可以连接到屏幕会话一样。

或者你可以让程序更适合在后台运行，这意味着它不能使用 X 服务器。在这种情况下，您可能想要输出一些文件，然后当您想查看它们时，您可以使用单独的程序将其转换为图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:49:19.397

我认为 sshd 为其连接创建新的会话负责人 bash，因此，如果您将程序员置于后台并重定向您的`stdout`/ `stderr`( >log 2>&1 )，那么即使您失去连接，正在运行的 bash 也会控制您的程序。

# php - 如何在PHP中访问数组中的数组值

> ID：13539685
> 
> 赞同：-1
> 
> 时间：2012-11-24T08:44:47.637
> 
> 标签：php, arrays, multidimensional-array

我有这个数组：

```
$array = array(
    array('id' => 'test1', 
          'url' => 'test1url'
    ),

    array('id' => 'test2', 
          'url' => 'test2url'
    )
); 
```

如何在不知道父键但知道相应ID（test1）的情况下访问“test1url”？如果我知道父键，我可以像这样简单地访问它：

```
$array[0]['url']; 
```

那么访问这个值的最简单/最快/最快/最简单的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:00:15.947

在这种情况下，没有比循环所有值更好的解决方案了。

你可以像这样创建一个函数：

```
function findUrl($array,$id) {
    foreach($array as $arr) {
        if($arr['id'] == $id) {
            return $arr['url'];
        }
    }
} 
```

并称之为：

```
echo findUrl($array,"test1"); 
```

或创建数据的另一种表示，但如果你不能这样做，最好的解决方案是这个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T08:47:18.123

```
$array = array(
    array('id' => 'test1', 'url' => 'test1url'),
    array('id' => 'test2', 'url' => 'test2url')
);

$search = 'test1url';
foreach($array as $k=>$a){
    if(is_array($a) && in_array($search,$a)){
        echo "Key:".$k." has responded that the value of ".array_search($search,$a).' = '.$search;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T08:58:33.513

你有什么理由像这样构建你的阵列吗？父数组的作用是什么？

你可以使用：array_search();

[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)

但这只有在您首先循环父数组时才有效。

```
<?php
$array = array(
    array('id' => 'test1', 
          'url' => 'test1url'
    ),

    array('id' => 'test2', 
          'url' => 'test2url'
    )
);

foreach ($array as $valuearray) {
    $key = array_search('test1url', $valuearray);
    echo $key;  // = url
}
?> 
```

或使用 in_array(); 循环父数组时。

# android - 如何在 android Project 中使用 Roboto 字体

> ID：13539688
> 
> 赞同：56
> 
> 时间：2012-11-24T08:45:28.737
> 
> 标签：android, fonts

我开发了一个安卓项目。在这个项目中，文本字体默认为 android:sans。

现在我想将整个项目的默认文本字体替换为机器人字体。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-24T09:03:22.313

您可以从此处下载 Roboto 字体： [https](https://fonts.google.com/specimen/Roboto) ://fonts.google.com/specimen/Roboto 。[2020-01-28 更新]

您可以通过使用以传统方式执行此操作`TypeFace`，如下所示：

```
Typeface typeface = Typeface.createFromAsset(getAssets(), fontName);
textView.setTypeface(typeface); 
```

注意：以上内容必须在每个`Activity`.

或者，例如，如果您想将 Roboto 字体应用于`TextView`应用程序中的所有 s，那么您将需要创建自己的扩展小部件`TextView`。

有一种简单的方法可以做到这一点。按照这个答案中的步骤进行操作：[https](https://stackoverflow.com/a/9199258/450534) ://stackoverflow.com/a/9199258/450534 （[**leocadiotine**](https://stackoverflow.com/users/1054366/leocadiotine)的完整解决方案。我以前用过它，它就像一个魅力）

编辑：将`your_namespace`其视为您选择的名称的标记。例如，在 XML 中集成 Admob 时，我使用`xmlns:ads`. 您可以使用，例如：`xmlns:font`或描述性的东西。

至于*custom.ttf*代表什么，它基本上是您需要复制到`Assets`文件夹中的带有扩展名的字体文件。例如，如果您使用的是**ROBOTO-REGULAR.TTF**，则将*custom.ttf*替换为*ROBOTO-REGULAR.TTF*。使用此示例，整个代码应如下所示：

```
<your.package.widget.TypefacedTextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:font="http://schemas.android.com/apk/res/your.package"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Custom fonts in XML are easy"
    android:textColor="#FFF"
    android:textSize="14dip"
    font:typeface="ROBOTO-REGULAR.TTF" /> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-29T09:56:48.840

1.  [下载](https://material.io/design/typography/the-type-system.html#type-scale)并解压`Roboto`字体 zip 文件

2.  `assets`如果您还没有文件夹，请在您的项目中创建一个文件夹。我假设您正在使用 Android Studio，这是如何做到的。 [![在此处输入图像描述](../Images/93c2e020223a066b6f0118340a2006ae.png)](https://i.stack.imgur.com/pmGd5.png)

3.  在 assets 文件夹中创建一个新目录，将其命名为`font`.

4.  打开您的解压缩文件并复制您选择的字体样式。您的字体文件夹应如下所示：

[![在此处输入图像描述](../Images/fea00304814c1c861c7fca5300c0a74d.png)](https://i.stack.imgur.com/ZUX7P.png)

您现在可以在应用程序的任何位置使用此字体，如下所示：

```
 Typeface roboto = Typeface.createFromAsset(context.getAssets(), 
  "font/Roboto-Bold.ttf"); //use this.getAssets if you are calling from an Activity
   txtView.setTypeface(roboto); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-24T09:09:00.740

```
txtView = (TextView) findViewById(R.id.txtView);

Typeface myTypeface = Typeface.createFromAsset(
                          this.getAssets(),
                          "font/Robot.otf");

txtView.setTypeface(myTypeface); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-14T09:14:33.183

您可以使用[Typerlib](https://github.com/elmargomez/typer)轻松完成此操作。

> 这个库包含了在项目中添加字体资源的复杂性，并回收那些最近创建的字体，以最大限度地提高应用程序的性能。

将此添加到您的`build.gradle`

```
dependencies {
    compile 'com.elmargomez.typer:typerlib:1.0.0'
} 
```

然后你可以使用字体

```
TextView txtView1 = (TextView) findViewById(R.id.yourTxtView1);
TextView txtView2 = (TextView) findViewById(R.id.yourTxtView2);
TextView txtView3 = (TextView) findViewById(R.id.yourTxtView3);
TextView txtView4 = (TextView) findViewById(R.id.yourTxtView4);

txtView1.setTypeface(Typer.set(yourContext).getFont(Font.ROBOTO_REGULAR));
txtView2.setTypeface(Typer.set(yourContext).getFont(Font.ROBOTO_CONDENSED_ITALIC));
txtView3.setTypeface(Typer.set(yourContext).getFont(Font.ROBOTO_THIN));
txtView4.setTypeface(Typer.set(yourContext).getFont(Font.ROBOTO_BOLD)); 
```

它包括 Roboto 中的所有当前字体，例如：

```
 Font.ROBOTO_MEDIUM
    Font.ROBOTO_REGULAR
    etc. 
```

要查看所有可用字体，请在**Font**类之后按`Ctrl`+使用 Android Studio Auto complete `space`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-09T12:20:43.150

对`Typeface.createFromAsset()`函数的使用再说一说。当我接到很多电话时，它显着影响了充气时间。`Typeface`为了克服这个问题，我们创建了一个类似这样的单例实例

```
public static Typeface getTypeFace() {
        if (fromAsset == null) {
            fromAsset = Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Medium.ttf");
        }
        return fromAsset;
    } 
```

# jquery - 删除数据表中的行

> ID：13539689
> 
> 赞同：2
> 
> 时间：2012-11-24T08:45:36.117
> 
> 标签：jquery, database, datatable

我有一个使用数据表插件的表。我正在尝试使用以下方法动态删除一行：

```
$(document).ready(function() {

    var oTable = $("table#demo-dtable-02").dataTable({"aaSorting": []});

    $(".icon-remove").on('click',function(){
        var anSelected = fnGetSelected( oTable );
        deleted=oTable.fnDeleteRow(anSelected[0] );
      });

              }); 
```

我收到以下错误 ReferenceError: fnGetSelected is not defined 我试过使用（从这里：[jQuery Data Tables plugin not remove table row](https://stackoverflow.com/questions/10324875/jquery-data-tables-plugin-not-removing-table-row)）

```
$(this).parent('tr').remove(); 
```

这当然会删除该行，但不会重置页脚中的文本，例如 Showing 1 to 10 of 17 entries。以这种方式删除并不是解决此问题的最佳方法。

我的 DOM 代码如下所示：

```
<?PHP
                                            $count=1;
foreach($ledgers as $row) {?>
    <tr >
    <td><a onClick="viewDetails(<?PHP echo $row['id'];?>)" style="cursor:pointer"><?PHP echo $row['name'];?></a></td>

     <td><?PHP echo $row['email'];?></td>
     <td><?PHP echo $row['contact_number'];?></td>

     <td>
     <i class="icon-remove" rowcount=<?PHP echo $count;?> style="cursor:pointer; margin-right:5px" title="Remove Ledger" id="removeLedgerNow"></i>

    <i class="icon-edit" style="cursor:pointer" title="Edit Ledger" onclick="viewDetails(<?PHP echo $row['id'];?>)"></i>

   </td>
  </tr>
   <?PHP $count++; } ?> 
```

评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:11:26.373

**更新：**

试试这个代码：

```
 $('.icon-remove').on('click', function () {
   // Get the position of the current data from the node
   var aPos = oTable.fnGetPosition( $(this).closest('tr').get(0) );
   // Delete the row
   oTable.fnDeleteRow(aPos);
 } ); 
```

笔记：

1.  API中没有`fnGetSelected`。它可能是 OP 具​​有的自定义功能，但不是在问题中产生的。
2.  `fnGetPosition`是接受`td`, `th`, 或`tr`元素
3.  `.get(0)`就是将元素从jQuery对象中分离出来

# proxy - Web 请求通过代理，其中 ip paddress 将注明 clinet/proxy ip

> ID：13539691
> 
> 赞同：0
> 
> 时间：2012-11-24T08:46:01.490
> 
> 标签：proxy

我设计网站。我在我的网络服务器中做了代理。当客户请求我的网站时。然后我将请求重定向到代理，然后是目标站点。请求将发送到目标网站的 IP 地址（代理/客户端 IP 地址）。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:11:38.387

TCP 连接中的源 IP 当然是代理的。如果您想知道客户端和临时代理使用了哪些 IP，您应该能够在标头`X-Forwarded-For`（客户端 IP）和`Via`标头（临时代理列表）中找到它。

# java - 大多数 JVM 是否为未使用的方法分配内存？

> ID：13539692
> 
> 赞同：10
> 
> 时间：2012-11-24T08:46:02.413
> 
> 标签：java, jvm, jvm-hotspot

假设我们有以下类：

```
class DoubleOhSeven {
  public static void doSomethingClassy();
  public static void neverDoThisClassy();
}

class Dude {
  public void doSomething();
  public void neverDoThis();
}

public class Party {
  public static void main(String[] args){
    DoubleOhSeven.doSomething();
    Dude guy = new Dude;
    guy.doSomething();
  }
} 
```

当然，所有的方法都会被编译成各自`.class`的：未使用的静态/实例方法在运行时会占用内存吗？未使用的继承或导入方法呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T08:50:00.717

未使用的方法仍然作为类/对象的一部分占用内存，即使它们没有被直接调用。

如果它们被优化掉，那么就不可能对这些方法进行反射调用。

有人可能会争辩说，可以生成一种优化，只将方法存根存储在内存中，然后垃圾收集方法内容（如果进行调用，则会从类文件中重新获取这些内容。）但是，我不知道执行此操作的 VM，并且由于在调用此类方法时可能会在内存中获得最小的收益和在速度上进行权衡，因此很难证明其合理性。

未使用的继承方法将完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T09:25:04.923

一个类的实例使用的内存`Abc`不取决于有多少方法`Abc`。

当您添加方法时，生成的字节码显然会增加大小，无论它们是否执行某些操作，但这只会影响类 object 的大小`Abc.class`，无论创建了多少实例，它只加载一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T09:25:30.063

由于类在 Sun Hotspot JVM 的 PermGen 中是安全的（Java 8 会发生变化），因此您可以执行以下操作，首先运行：

```
 MemoryMXBean memoryMXBean = ManagementFactory.getMemoryMXBean();
long before = memoryMXBean.getNonHeapMemoryUsage().getUsed();
new Dude(); // class must not be loaded before
System.out.println("Usage of dude is " + (memoryMXBean.getNonHeapMemoryUsage().getUsed() - before) + " bytes"); 

```

你会看到这样的： *Usage of dude is 6432 bytes*

然后创建一个没有未使用方法的 Dude 类并运行测试：

```
 MemoryMXBean memoryMXBean = ManagementFactory.getMemoryMXBean();
long before = memoryMXBean.getNonHeapMemoryUsage().getUsed();
new DudeWithoutNeverDoThis(); // must not be loaded before
System.out.println("Usage of dude without 'nerverDoThis' is " + (memoryMXBean.getNonHeapMemoryUsage().getUsed() - before) + " bytes"); 

```

你看到了区别（*没有'nerverDoThis'的dude的用法是6176字节*）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T09:21:47.097

未使用的方法增加了类的大小，但类存储在所谓的 PermGen 内存中。存储常规 java 对象的堆内存不受类大小的影响

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T03:00:27.237

该方法可以编译并加载到 PerGen。

但是 JVM 可能会`optimize`使用`method inlining`.

例如：

```
public class Test {

    public void foo(){
        System.out.println("foo");
        bar();
    }

    public void bar(){
        System.out.println("bar");
    }
} 
```

该方法将由 JIT 编译器编译如下：

```
public void foo(){
    System.out.println("foo");
    System.out.println("bar");
} 
```

因此，永远不会调用空方法。

# java - 实现远程 JMS 服务器

> ID：13539694
> 
> 赞同：1
> 
> 时间：2012-11-24T08:46:18.217
> 
> 标签：java, jakarta-ee, jms, weblogic

我正在开发一个 SMS 应用程序，并在其中使用 JMS。这是一个简单的图表，显示了我将如何实现该应用程序：

```
---------------------------                      ---------------------------
|                         |                      |                         |
|                         |                      |                         |
|      [Main Server]      |                      |       [JMS Server]      |
|   (JSPs and Servlets)   | -------------------> |                         |
|                         |                      |     ----------------    |
|                         |        ????          |     |  |  |  |  |  |    |
|                         |                      |     ----------------    |
|                         |                      |         JMS queue       |
|                         |                      |                         |
|                         |                      |            @            |
|                         |                      |  JMS ConnectionFactory  |
---------------------------                      --------------------------- 
```

所以基本上，最终用户通过主服务器发送 SMS 消息。主服务器将消息重定向到 JMS 服务器。JMS 服务器接收到消息并将其放入队列以立即或稍后处理。

关于实现 JMS 的正确方法是什么，我有几个关于设计的问题：

*   将 ConnectionFactory 放在 JMS 服务器上是否正确，还是应该将其移至主服务器？或者可能在两台服务器上部署两次？
*   我应该使用什么将消息从主服务器发送到 JMS 服务器？JMS 桥接器？JMS国外服务器？EJB？RMI？或者也许其他更好的东西？
*   我应该对 JMS 模块使用 JNDI 查找还是资源注入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:22:41.403

> 将 ConnectionFactory 放在 JMS 服务器上是否正确，还是应该将其移至主服务器？或者可能在两台服务器上部署两次？

在 Weblogic 中创建 JMS ConnectionFactory 并在应用程序中使用 JNDI 查找。避免重复connectionFactory。

使用像 MessageBroker 这样的 ActiveMQ。

> 我应该使用什么将消息从主服务器发送到 JMS 服务器？JMS 桥接器？JMS国外服务器？EJB？RMI？或者也许其他更好的东西？

[如何发送 JMS 消息](http://docs.oracle.com/javaee/1.3/jms/tutorial/1_3_1-fcs/doc/jms_tutorialTOC.html)

> 我应该对 JMS 模块使用 JNDI 查找还是资源注入？

当您使用像 Weblogic 这样的应用程序服务器时，通过 JNDI 获取 connectionFactory 是很好的。

# content-management-system - 如何从数据库中检索动态内容？

> ID：13539695
> 
> 赞同：0
> 
> 时间：2012-11-24T08:46:36.263
> 
> 标签：content-management-system, dotcms

我正在评估基于java的cms并选择一个作为我们的cms，现在我正在学习dotcms，我需要知道如何像传统的jsp/bo那样从db中检索内容，我是dotcms的新手，只有官方文档告诉如何添加静态内容和动态内容，比如运行 sql 并获取想要的数据，然后将它们放入页面中。我们正在做一个内部网站，员工可以在其中浏览通过 cms 管理的新闻、事件、同事信息等，这些信息绝对是动态的并定期更新。我们计划在项目中使用spring mvc。关于这个问题的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:22:03.363

要让它工作，你需要做一些事情：

1.  如果要使用不同的数据库，则可以将新资源添加到 conf/Catalina/localhost/ROOT.xml 文件中。如果您想使用 dotCMS 数据库来托管其他表，则可以跳过此步骤。

2.  在您的 java 代码中，您可以使用 DbConnectionFactory 类获得数据库连接。现在您可以从数据库中读取数据。这是一个例子： import java.sql.Connection; 导入java.sql.ResultSet；导入java.sql.SQLException；导入 java.sql.Statement；

    ```
    Connection conn = DbConnectionFactory.getConnection();
    Statement selectStatement;
    try {
      selectStatement = conn.createStatement();
      try {
        selectStatement.execute("SELECT * FROM your_table WHERE your_where_clause etc...");
        ResultSet result = selectStatement.getResultSet();
        if (result.next()) {
          .. do your stuff here...
          // for example:
          // Long dbId = result.getLong("Id");
          // String stringField = result.getString("stringFieldName");
          // int intField = result.getInt("intFieldName");
        } finally  {
          selectStatement.close();
        }
      } catch (SQLException e1) {
         // Log the error here
      } 
    ```

    }

3.  如果你想在速度中使用这些数据，你需要创建一个视图工具。在此处阅读更多相关信息：http: [//dotcms.com/docs/latest/DynamicPluginsViewtool](http://dotcms.com/docs/latest/DynamicPluginsViewtool)

# asp.net - 在脚本标签 src 属性中使用波浪号

> ID：13539705
> 
> 赞同：18
> 
> 时间：2012-11-24T08:48:38.533
> 
> 标签：asp.net, routing, tilde

在我的 asp.net 网站中`MasterPage`，我在 MasterPage 部分的样式表的标记属性中`Routing`使用了波浪号。像这样：`href``link``head`

```
<link href="~/Styles/Main.css" rel="stylesheet" type="text/css" /> 
```

这就像一个魅力。由于网站使用路由，因此 url 将包含越来越多`/`的 ，但样式表的 href 仍然有效，因为波浪号指向 Web 应用程序的根并且使用了样式。

我尝试`src`对标签的属性使用相同的技术`script`，但这似乎没有产生预期的结果。我试过：

```
<script src="~/Scripts/jquery-1.8.2.min.js" type="text/javascript" ></script> 
```

但这只是将波浪字符输出到页面的 HTML，而不是像对`href`属性所做的那样将其替换为 Web 应用程序的根。我的经验是，asp.net 替换了`href`属性中的波浪号，但没有替换属性中的波浪号`src`。

如何使波浪号在`src`脚本标签的属性中起作用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T08:57:40.697

我不确定是否有办法让它在没有一点帮助的情况下正常工作。这应该有效，但不如`link`：

```
<script src="<%=ResolveUrl("~/Scripts/jquery-1.8.2.min.js")%>"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-30T19:53:15.877

不幸的是，你想要的只是不起作用（尽管我同意它应该）。

如果您使用的是脚本管理器，那么您可以做一些相当接近的事情：

```
<asp:ScriptManager>
   <Scripts>
      <asp:ScriptReference Path="~/Scripts/jquery-1.8.2.min.js" />
   </Scripts>
</asp:ScriptManager> 
```

# php - 阵列的低效旋转

> ID：13539713
> 
> 赞同：0
> 
> 时间：2012-11-24T08:49:54.977
> 
> 标签：php, arrays

我正在尝试制作一个能够在数组中旋转给定次数然后返回第一个索引的函数。但我所拥有的真的很慢而且很笨重。看一看：

```
<?php

/**
 * Get the current userid
 * @return integer
 */
public function getCurrentUser( DateTime $startDate, DateInterval $interval, DateTime $endDate, $currentUser, $users, $rotating )
{

    if ($rotating == 0)
    {
        return $currentUser;
    }

    $usrArray = array();
    $dateRange = new DatePeriod( $startDate, $interval, $endDate);

    // Push userIds to an array
    foreach ($users as $user)
    {
        $usrArray[] = $user->id;
    }

    // Get the number of iterations from startDate to endDate
    $steps = iterator_count($dateRange);

    // Find the initial position of the orignal user
    $key = array_search($currentUser, $usrArray);

    // Set up the array so index 0 == currentUser
    $usr = $usrArray;
    array_splice($usr, $key);
    $slice = array_slice($usrArray, $key);
    $startList = array_merge($slice, $usr);

    // Start rotating the array
    for ($i=0; $i < $steps; $i++)
    {
        array_push($startList, array_shift($startList));
    }

    return $startList[0];
} 
```

这是 PHP 脚本超时之前的 Xdebug 配置文件。 [xdebug 配置文件](http://i.imgur.com/ISLz2.png)

有没有更好的方法来确定在 x 次旋转后谁是索引 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:16:41.127

你的数组旋转不是那么慢，但可以改进..我相信这是你的旋转代码

**你的代码**

```
// Start rotating the array
for ($i=0; $i < $steps; $i++)
{
    array_push($startList, array_shift($startList));
}

return $startList[0]; 
```

您可以删除循环将其替换为 mod .. 您仍然可以获得相同结果的方式是解决方案：

**解决方案**

```
return $startList[ $steps % count($startList)]; 
```

你会得到同样的结果。

**简单的基准测试**

```
$steps = 10000; <----------------- 10,000 steps 

set_time_limit(0);
echo "<pre>";
$file = "log.txt";
// Using your current code
function m1($steps) {
    $startList = range("A", "H");
    for($i = 0; $i < $steps; $i ++) {
        array_push($startList, array_shift($startList));
    }
    return $startList[0];
}

// Using InfiniteIterator
function m2($steps) {
    $startList = range("A", "H");
    $n = 0;
    foreach ( new InfiniteIterator(new ArrayIterator($startList)) as $l ) {
        if ($n == $steps) {
            return $l;
            break;
        }
        $n ++;
    }
}

// Simple MOD solution
function m3($steps) {
    $startList = range("A", "H");
    return $startList[ $steps % count($startList)];
}

$result = array('m1' => 0,'m2' => 0,'m3' => 0);

for($i = 0; $i < 1; ++ $i) {
    foreach ( array_keys($result) as $key ) {
        $alpha = microtime(true);
        $key($file);
        $result[$key] += microtime(true) - $alpha;
    }
}

echo '<pre>';
echo "Single Run\n";
print_r($result);
var_dump(m1($steps),m2($steps),m2($steps));
echo '</pre>'; 
```

输出

```
Single Run
Array
(
    [m1] => 0.00012588500976562
    [m2] => 0.00021791458129883
    [m3] => 7.7962875366211E-5   <----------------- Mod solution fastest 
)
string 'A' (length=1)               |
string 'A' (length=1)               |+------------- They all return same result
string 'A' (length=1)               | 
```

# java - Java - 多次从 ArrayList 中删除时出错。（非法状态异常）

> ID：13539716
> 
> 赞同：3
> 
> 时间：2012-11-24T08:50:25.147
> 
> 标签：java, exception, arraylist, minecraft

我已经在谷歌上搜索了很多，似乎无法找到解决方案。我在这里做错了什么？我的问题在标题中。这是我得到的例外：

```
java.lang.IllegalStateException
at java.util.ArrayList$Itr.remove(Unknown Source)
at me.herp.derp.client.Config.updateItem(Config.java:24)
at me.herp.derp.client.Commands.parseCommand(Commands.java:23)
at me.herp.derp.client.ChatCommands.handleChatcommand(ChatCommands.java:29)
at net.minecraft.src.EntityClientPlayerMP.sendChatMessage(EntityClientPlayerMP.java:171)
at net.minecraft.src.GuiChat.keyTyped(GuiChat.java:104)
at net.minecraft.src.GuiScreen.handleKeyboardInput(GuiScreen.java:227)
at net.minecraft.src.GuiScreen.handleInput(GuiScreen.java:176)
at net.minecraft.client.Minecraft.runTick(Minecraft.java:1494)
at net.minecraft.client.Minecraft.runGameLoop(Minecraft.java:843)
at net.minecraft.client.Minecraft.run(Minecraft.java:768)
at java.lang.Thread.run(Unknown Source) 
```

这是我的代码：

```
public static void updateItem(String item, String value)
{
    if (!hasValue(item))
    {
        addItem(item, value);
        return;
    }
    for (ConfigItem c : configItems)
    {
        if (c.ITEM.equals(item))
        {
            configItems.iterator().remove();
            break;
        }
    }
    ConfigFile.saveConfig();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T08:56:06.423

您的迭代器未正确初始化（`next()`未调用）。我建议这样编写代码：

```
Iterator<ConfigItem> it = configItems.iterator();
while(it.hasNext()){
    ConfigItem c = it.next();
    if (c.ITEM.equals(item))
    {
        it.remove();
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T08:54:58.450

您只能在 Iterator.next() 之后调用 Iterator.remove()。试试这个：

```
Iterator<ConfigItem> i = configItems.iterator();
while(i.hasNext()) {
    ConfigItem next = i.next();
    if (next.equals(item))
    {
        i.remove();
        break;
    } 
```

# ruby-on-rails - 如何持久化 gem 模型实例？

> ID：13539720
> 
> 赞同：1
> 
> 时间：2012-11-24T08:51:25.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-plugins

我在 gem (Google::APIClient.new) 中定义了一个模型，并且在我的控制器中创建了该 gem 的实例。

我想在每个用户的控制器操作之间共享实例，所以我需要以某种方式持久化它。我尝试将其存储在会话变量 (session[:client] = Google::APIClient.new) 和我自己的模型 (User.goog_client = Google::APIClient.new) 的一个字段中，但这不起作用. 是否有一种正确的方法可以为每个用户从另一个 gem 中保存一个模型？

提前致谢！

Soln：找到一个更简单的soln，将属性存储在会话中，然后将它们重新加载到模型中：

```
 session[:access_token] = client.authorization.access_token
    session[:refresh_token] = client.authorization.refresh_token
    session[:expires_in] = client.authorization.expires_in
    session[:issued_at] = client.authorization.issued_at

    client.authorization.access_token = session[:access_token] 
    client.authorization.refresh_token = session[:refresh_token]
    client.authorization.expires_in = session[:expires_in]
    client.authorization.issued_at = session[:issued_at] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T08:54:55.580

例如，您可以在控制器中添加过滤器

```
 class YourController < ApplicationConroller
   before_filter :get_instance

   def action1
     #you can use @instance here
   end

   def action2
     #you can use @instance here
   end

   private: # Hide from outside
     def get_instance
       @instance = CreateYourGemInstanceHere
     end
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:17:46.070

听起来您可能想为这些继承自 ActiveRecord::Base 的对象创建一个包装类。

包装器对象上的属性将是通过 gem 实例化对象所需的任何信息。然后，您将创建（或覆盖）一个这样做的 finder 方法。

```
class FooWrapper < ActiveRecord::Base

  attr_accessible :x, :y, :z

  def self.get_real_foo(wrapper_id)
    wrapper_obj = self.find(wrapper_id)
    return FooGem.new(wrapper_obj.x, wrapper_obj.y, wrapper_obj.z)
  end
end 
```

您说您尝试将对象存储在会话和模型中？你到底是怎么做的？这可能不是解决您的问题的最佳方法...如果您发布更多细节，我们将能够更好地帮助您走上正确的道路。

**编辑补充：**

如果您希望 gem 实例绑定到特定用户，那么 make `FooWrapper :belongs_to :user`. 当您实例化真正的 gem 实例时，您可以根据需要使用任何特定于用户的信息。

# xml - 什么是固定格式文件以及 XML 比它们更好的地方？

> ID：13539729
> 
> 赞同：3
> 
> 时间：2012-11-24T08:54:10.543
> 
> 标签：xml

我在谷歌上搜索了固定格式文件（FFF）并得到了这些结果：

*   [pcsupport.about.com/od/fileextensions/f/fixed-file.htm](http://pcsupport.about.com/od/fileextensions/f/fixed-file.htm)
*   [www.softinterface.com/Convert-XLS%5CFeatures%5CFixed-Width-Text-File-Definition.htm](http://www.softinterface.com/Convert-XLS%5CFeatures%5CFixed-Width-Text-File-Definition.htm)

我不确定哪个是固定格式文件。第二个是 FFF 还是其他的？

FFF 解决了哪些问题，XML 如何比 FFF 更好地解决这些问题？与 FFF 相比，XML 格式有什么缺点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T09:40:49.563

FFF 相对于 XML 的最大优势是基于索引的随机访问的内置功能。反面很明显，与 FFF 相比，XML 的最大*缺点*是必须对其进行解析的线性方式。

假设您有一个保存人员记录的数据文件。记录可以包含 ID、姓名、地址和电话号码。

**固定格式**

```
ID          : 8 chars
Surname     : 36 chars
Firstname   : 36 chars
Address     : 100 chars
Phone       : 20 chars
-----------------------
Total Space: 200 chars 
```

**XML 格式**（人为的，可能是多种格式）

```
<Person id="...">
   <Surname>...</>
   <Firstname>...</>
   <Address>...</>
   <Phone>...</>
</Person>

Total Space : Variant 
```

现在，假设这有 1000 条“记录”，让我们看看用两种形式达到第 600 条记录有多困难。

**固定格式**

```
Offset = (600-1)*200 = 119800 bytes
fseek() + fread() = done 
```

**XML 格式**

```
Um..... 
```

**XML 的最大优势是可扩展性**（**X**并非无中生有）。XML 制作了一个很棒的数据片段、RSS 提要、配置文件等。它很容易发出，不需要特殊的库，只有基本的知识，并且在存储空间上是合理的（只要你不`<LoveThoseSuperDuperLongElementNames>`发疯）。它很容易理解，有大量标准支持，几乎每个人的工具包中都有 XML 解析器。通用的“理解”只是一个模式文档（老派的 DTD），验证等也是如此。

但 XML 最大的缺点一直是现在，而且在量子计算飞跃长路之前，一直都是：**速度**。XML 是一种**糟糕**的吞吐量要求存储系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T09:11:10.680

由于您正在与 XML 进行比较，我假设您的意思是一个固定宽度的文本文件（您的示例中的后者）。说哪个“更好”并不容易，这在很大程度上取决于您的用例。

XML的一些优点；

*   灵活（即字段可以更长/更短，甚至可以在不破坏现有代码的情况下添加）
*   有许多实现可供选择。
*   您可以或多或少地完全使用机器可读的模式来定义它。
    （这意味着如果您只有一个定义文件的模式，计算机可以在某种程度上生成代码来读取和验证文件）

固定宽度文件的一些优点；

*   *简单*得多，读取和写入文件都或多或少是微不足道的。
*   可能占用更少的空间，XML 相当“健谈”。

# haskell - Haskell：我想我真的可以在这里使用类似 Lisp 的宏

> ID：13539731
> 
> 赞同：3
> 
> 时间：2012-11-24T08:54:16.643
> 
> 标签：haskell, template-haskell

我的小足球比赛的 AI 代码基本上是这样工作的：有一个函数可以得出描述球场当前情况的事实：

```
deriveFacts :: GameState -> [Fact] 
```

...事实看起来像这样：

```
data Fact =
    FactCanIntercept ObjId ObjId
  | FactBestPosition Team Spot Spot
  | FactKickOff
  | FactBallCarrier ObjId
  | FactBestShootingVector Velocity3
  | FactBestPassingVector Velocity3
  | ... 
```

...并且有些规则看起来像这样：

```
rule_shoot facts = do
    FactBallCarrier ballCarrier <- checkBallCarrier facts
    FactBestShootingVector goalVector <- checkBestShootingVector facts
    return [message (ballCarrier, shoot goalVector)] 
```

然后有一个规则引擎运行所有规则并收集结果消息。

到目前为止还不错，而且效果很好。不过，有什么烦人的：在这种方法中，我需要一个像这样的“访问器”函数来处理每个事实：

```
checkBestShootingVector :: [Fact] -> Maybe Fact
checkBestShootingVector facts = 
   listToMaybe [e | e@(FactBestShootingVector {}) <- facts] 
```

这种方法会导致很多丑陋的样板代码。我的问题：是否有一个优雅的解决方案可以消除手动创建这些访问器函数的需要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:23:35.337

您可以将大部分 Fact 数据重构为记录对象

```
data FactRec = FR {
   canIntercept :: [(ObjId,ObjId)], -- use lists for things you previously had multiple times
   factBestPosition :: [(Team,Spot,Spot)], -- not sure about this one, maybe two entries not one list 
   kickOff :: Bool,
   ballCarrier :: ObjID,
   factBestShootingVector :: Velocity3, 
   factBestPassingVector :: Velocity3,
   .....
   } 
```

它为您提供了内置访问器功能

```
if kickOff fr then something else somethingelse 
```

所以你不需要写所有的检查函数，而是做

```
rule_shoot facts = message (ballCarrier facts, shoot $ goalVector facts) 
```

如果某些事实确实可能存在或可能不存在，则它们可能是 Maybe 类型，如果某些事实可以存在任意次数，则它们可以是列表。

# python - 我想生成连续的日期

> ID：13539734
> 
> 赞同：3
> 
> 时间：2012-11-24T08:54:31.997
> 
> 标签：python, date, datetime

我有这样的代码：

```
import time
from datetime import date
startyear = raw_input("start year: ")
startmonth = raw_input("start month: ")
startday = raw_input("start day: ")
endyear = raw_input("end year: ")
endmonth = raw_input("end month: ")
endday = raw_input("end day: ")

startdate = date(int(startyear), int(startmonth), int(startday))
while startdate < date(int(endyear), int(endmonth), int(endday)):
    print startdate
    startdate = startdate.replace(day=startdate.day + 1) 
```

这段代码的作用是：
1.通过手动输入
获取开始和结束日期 2.生成它们之间的日期列表

但问题是，如果我设置日期，例如，
`startdate: 2012-10-28`
`enddate: 2012-11-4`
输出将是：

```
2012-10-28
2012-10-29
2012-10-30
2012-10-31
ValueError: day is out of range for month 
```

我希望输出如下：

```
2012-10-28
2012-10-29
2012-10-30
2012-10-31
2012-11-01
2012-11-02
2012-11-03
2012-11-04 
```

所以我希望日期通过月份。有什么建议么？任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T09:02:37.143

而不是`startdate.replace()`，您应该使用`timedelta`...

```
from datetime import date, timedelta
# Get input here...
while startdate < date(int(endyear), int(endmonth), int(endday)):
    print startdate
    startdate += timedelta(days=1) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-24T10:38:02.773

有一个名为[python-dateutil](http://labix.org/python-dateutil)的模块对这类事情非常有用：

```
from datetime import datetime
from dateutil.rrule import rrule, DAILY

list(rrule(DAILY, dtstart=datetime(2012, 11, 24), until=datetime(2012,11,30)))
# [datetime.datetime(2012, 11, 24, 0, 0), datetime.datetime(2012, 11, 25, 0, 0), datetime.datetime(2012, 11, 26, 0, 0), datetime.datetime(2012, 11, 27, 0, 0), datetime.datetime(2012, 11, 28, 0, 0), datetime.datetime(2012, 11, 29, 0, 0), datetime.datetime(2012, 11, 30, 0, 0)] 
```

并且有其他选项，例如，按星期几（仅适用于工作周的 MO、TU、WE、TH、FR）：

```
from dateutil.rrule import MO, WE
list(rrule(DAILY, byweekday=[MO, WE], dtstart=datetime(2012, 11, 24), until=datetime(2012,11,30))
# [datetime.datetime(2012, 11, 26, 0, 0), datetime.datetime(2012, 11, 28, 0, 0)] 
```

# python - 如何使用 MPlayerCtrl

> ID：13539740
> 
> 赞同：0
> 
> 时间：2012-11-24T08:55:27.003
> 
> 标签：python, wxpython, media-player, playlist, mplayer

我正在做一个关于制作媒体播放器的学校项目。我正在使用 python 和`wxPython`我的 GUI 和 MPlayerCtrl 作为我的库来控制我的所有按钮。但是我在使用 MPlayerCtrl 时遇到问题。我似乎无法让 MPlayerCtrl 中的功能正常工作。

我可以播放媒体，但是当我尝试使用该功能`"self.mplayer.GetTimeLength()"`时，它返回给我的是“无”，这没什么。我也尝试过使用 MPlayerCtrl 中的其他功能，但仍然遇到同样的问题。谁能告诉我我做错了什么？

# 部分代码：

* * *

```
def on_add_file(self, event):
    """
    Add a Movie and start playing it
    """
    wildcard = "Media Files (*.*)|*.*"
    dlg = wx.FileDialog(
        self, message="Choose a file",
        defaultDir=self.currentFolder, 
        defaultFile="",
        wildcard=wildcard,
        style=wx.OPEN | wx.CHANGE_DIR
        )
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        self.currentFolder = os.path.dirname(path[0])
        trackPath = '"%s"' % path.replace("\\", "/")
        self.mplayer.Loadfile(trackPath)

        t_len = self.mplayer.GetTimeLength()
        print t_len
        #self.playbackSlider.SetRange(0, t_len)
        #self.playbackTimer.Start(100) 
```

* * *

参考： http: [//www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/](http://www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:37:56.207

我假设你已经从[**这里**](http://www.blog.pythonlibrary.org/2010/07/24/wxpython-creating-a-simple-media-player)复制了这个例子。我有同样的问题。从[**这个论坛**](http://www.python-forum.de/viewtopic.php?f=19&t=28137&start=15)（德语）我发现你应该只在解雇`GetTimeLength()`后打电话。`EVT_MEDIA_STARTED`对于您的示例，请移动：

```
 t_len = self.mplayer.GetTimeLength()
    self.playbackSlider.SetRange(0, t_len)
    self.playbackTimer.Start(100) 
```

`from on_add_file()`到`on_media_started()`，并在 末尾`on_add_file()`，放：

```
 self.playbackTimer.Start()
    self.mplayer.Start() 
```

# java - 在 Date 中隐藏字符串值时的小问题

> ID：13539741
> 
> 赞同：0
> 
> 时间：2012-11-24T08:55:34.457
> 
> 标签：java, string, date, datetime, simpledateformat

我无法以 Java.util 日期格式转换字符串值。

这是我的代码

```
String string = "24-Nov-2012 14:21:56";
Date soldate = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss zzz").parse(string); // problem in this line
System.out.println(soldate); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T08:59:00.337

```
new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss zzz") 
```

你的字符串中没有那个`zzz - TimeZone`部分。因此，您的格式无法解析您的字符串。因为它与实际的字符串格式不同。

只需将其删除：-

```
new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:05:48.180

`SimpleDateFormat("dd-MMM-yyyy HH:mm:ss zzz")``zzz`您的日期字符串的时区部分的占位符在哪里。

因此，如果您的日期字符串没有任何时区信息，请删除它并使用它：

`SimpleDateFormat("dd-MMM-yyyy HH:mm:ss")`

有关您可以使用的其他选项，请参阅下面的链接`SimpleDateFormat`

[简单日期格式 javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# ios - RubyMotion 构建：错误！找不到名为“(?-mix:iOS Team Provisioning Profile)”的配置文件

> ID：13539743
> 
> 赞同：9
> 
> 时间：2012-11-24T08:55:50.257
> 
> 标签：ios, ruby, rubymotion

我正在尝试构建一个简单的[RubyMotion](http://www.rubymotion.com)应用程序，以便可以在我的 iPhone 上传输它。

我执行了`rake build:device`

```
 Ankits-MacBook-Pro:hello ankitgupta$ rake build:device
    Build ./build/iPhoneOS-6.0-Development
    Create ./build/iPhoneOS-6.0-Development/hello.app/embedded.mobileprovision
    ERROR! Can't find a provisioning profile named `(?-mix:iOS Team Provisioning Profile)' 
```

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T06:47:28.807

根据@RayHightower 在这里发布的RubyMotion 论坛帖子：

[https://groups.google.com/forum/?fromgroups=#!topic/rubymotion/Nvo8dH_8rkI](https://groups.google.com/forum/?fromgroups=#!topic/rubymotion/Nvo8dH_8rkI)

...你应该做这个：

> 为了在未越狱的 iPhone 3GS 上成功运行 RubyMotion 应用程序（通过“rake 设备”），我必须：
> 
> *   删除 Mac OS X Keychain Access 应用程序中所有过期的配置文件。是的，我的过去充满了许多随机实验:-)
> *   在应用程序的 rakefile 中明确设置我的配置文件的路径（默认设置对我不起作用）。
> *   明确设置我的 codesign_certificate 的名称。
> 
> 默认的“iOS 团队资料”对我不起作用。我必须在我的 rakefile 中为应用程序设置显式值。[这是我在https://github.com/HipByte/RubyMotionSamples](https://github.com/HipByte/RubyMotionSamples)上的“Tweets”示例应用程序的 rakefile ：

```
$:.unshift("/Library/RubyMotion/lib")
require 'motion/project' 
Motion::Project::App.setup do |app| 
  # Use `rake config' to see complete project settings. 
  app.name = 'Tweets' 
  app.provisioning_profile = '/Users/[username]/Library/MobileDevice/Provisioning Profiles/[string-of-numbers].mobileprovision' 
  app.codesign_certificate = 'iPhone Developer: John Q Developer  (A5QZ9QF4Z1)'
 end 
```

> 当然，我的名字不是“John Q Developer”，但你懂的。希望这可以帮助！
> 
> -@RayHightower

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-11T02:07:10.793

一般来说，我发现当 RubyMotion 出现问题时，有一个简单的修复方法，但通常涉及 Xcode 和*magic*。谁知道这是否会为您解决它（这是 Xcode 的神奇部分），但它不需要对您的应用程序进行任何更改！:)

### 怎么修

1.  打开 Xcode
2.  转到“首选项” ![第 2 步截图](../Images/931f7b834ab27eea3f922bbd2cdde6ce.png)

3.  转到“帐户”选项卡，然后单击“查看详细信息” ![步骤 3 截图](../Images/3cdea3a62a887c7f23e2bd3721cd57c6.png)

4.  点击左下角的“刷新”图标 ![在此处输入图像描述](../Images/e66a7210accf9a85c0034eb9123a3b28.png)

等待它刷新......等等！您应该能够在没有错误的情况下进行编译。

**注意**：我第一次单击刷新时，它出错了。我单击“完成”按钮，*然后重复步骤三和四。*

祝你好运，希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-05T19:09:02.940

我也遇到了这个问题，从团队开发的角度来看，指定一个明确的配置文件是不可接受的，因为 Rakefile 被检入 git。

为了解决这个问题，我简单地创建了一个名为“iOS Team Provisioning Profile”的新配置文件，其中包括我想要构建的任何设备。您团队的每个成员都可以做同样的事情，没有人必须像其他答案那样明确指向配置文件路径。

如果您在以下位置浏览 RubyMotion 项目配置的源代码： [https](https://github.com/HipByte/RubyMotion/blob/master/lib/motion/project/config.rb) ://github.com/HipByte/RubyMotion/blob/master/lib/motion/project/config.rb 您会注意到它会寻找默认配置名为“iOS Team Provisioning Profile”的配置文件（扫描该名称的每个配置文件）。因此，只要保持不变，这可能是解决它的最简单方法。

我认为目的是能够在您的 Rakefile 中指定配置文件*名称*，而不是指定整个路径。然后它应该搜索您的每个配置文件，寻找与您传递的相同的配置文件（这更适合从事同一项目的团队）。不幸的是，这不是它目前的工作方式。

# php - 检查托管服务器上的会话

> ID：13539744
> 
> 赞同：-1
> 
> 时间：2012-11-24T08:55:52.150
> 
> 标签：php

需要检查`session`我的托管服务器。`session`当我收到以下错误时，我如何检查in build on not

`Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent`

我把 Session 作为

```
if(!isset($_SESSION)) session_start(); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T09:00:49.573

会话已经在运行。如果再次调用该函数，则会返回警告。您可以避免通过@显示代码行的警告：

```
@session_start(); 
```

不是很好，但为我工作。

或者，您可以使用：

```
if(!session_id()) session_start(); 
```

[http://www.php.net/manual/en/function.session-id.php](http://www.php.net/manual/en/function.session-id.php)

# mysql - 如何有效地存储此语言设置数据？

> ID：13539746
> 
> 赞同：2
> 
> 时间：2012-11-24T08:56:02.253
> 
> 标签：mysql, database, database-design

（在mysql数据库上），我想要一个包含不同语言的不同变量的表，例如文本方向，名称的第一个字母总是大写，我应该对链接进行url编码等等。

人类会这样想：

```
id | lng | text direction | url encode | 1st letter cap |
---------------------------------------------------------
1  | en  | ltr            | 0          | 1              |
2  | he  | rtl            | 1          | 0              |
3  | fr  | ltr            | 1          | 1              | 
```

但是这样我可能会发现我必须添加更多的列，我知道这不是很好的数据库设计。另一种选择是维护一个固定的 2 列“id”和“lng”表，然后是这个表：

```
lng id | var            | val |
-------------------------------
1      | text direction | ltr |
1      | url encode     | 0   |
1      | 1st letter cap | 1   |
2      | text direction | rtl |
(and so on) 
```

甚至可能是三个表：语言名称和 ID、var 名称和 ID 以及上面的表格 - 当用 var id 替换 var text description 时。

我什至可能想忘记存储 var 文本描述，而在查询时直接使用 ids，但这似乎不太人性化。

哪条路要走？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:33:18.900

您的第二个示例是使用[Attribute-Value Model](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。如果（如您所说）您需要经常添加更多列和/或如果您的大多数实体不需要所有列并且否则会留下它们，这可能会很有用`NULL`。

缺点是它使查询编写起来更加复杂，这就是为什么我尽量避免它 - 我认为简单性比担心不得不偶尔添加一列更重要。除非需要非常频繁地添加新列，例如，如果您的最终用户需要在运行时添加新字段，那么我会选择您的第一个选项 - 一个带有语言属性的语言表和一个外键，只要您需要它。您可能甚至不需要该`id`列，只需将其`lng`用作自然键即可。

像 MongoDB 这样的无模式数据库可以更好地处理这个问题。它没有列的概念，因此您可以随时开始存储新数据，如果您有一个不需要所有字段的实体，您只需不指定它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T09:03:33.180

您可以尝试以 JSON 格式对其进行编码，因此您会得到类似的东西

```
id | value
------------------
1  | { "lng":"en" , "text direction":"ltr" , .... } 
```

这将需要最少的列

# javascript - ajax 调用后 getElementById 不起作用

> ID：13539749
> 
> 赞同：3
> 
> 时间：2012-11-24T08:56:26.970
> 
> 标签：javascript, html, ajax

我正在使用 javascript / ajax 开发一个 Web 应用程序。

问题是在我的应用程序（一种社交网络）中，我需要阅读有关用户的信息（数据库中的帖子）。为此，我使用 PHP 专用服务与数据库交互。该服务返回主页格式的 HTML。

现在，我将此服务与 AJAX 调用一起使用，以将 HTML 导入到我的页面中。问题是，当我尝试使用 javascript 从注入的 HTML 中获取元素时：

```
document.getElementById('commentsArea_xxx').innerHTML=xmlhttp.responseText; 
```

`getElementById`返回`null`。

我认为问题是在 AJAX 调用之后浏览器没有更新文档，因此文档中不存在“commentsArea_xxx”！

我该如何解决这个问题？

这是我的代码：

```
function moreComments(id){
        var footerIcon = document.getElementById('footer');
            footerIcon.innerHTML="<div style='text-align:center;'><img src='images/home_selected.png' onClick='loadHome()'/><img id='cameraButton' src='images/camera.png'/><img src='images/list.png' onClick='loadMyVideo()'/></div>";
            pageOld=pageCurrent;
            pageCurrent=0;
            document.getElementById("ajaxContent").innerHTML="<div id='wrapper' style='top:95px;'><div id='scroller'><ul id='thelist'><li style='text-align:center;'><img src='images/loading.gif' style='text-align:center;'></li></ul></div></div>";
            var xmlhttp;
            if (window.XMLHttpRequest){
                xmlhttp=new XMLHttpRequest();
            }
            else{
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function(){
                if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    document.getElementById("commentsArea_"+id).innerHTML=xmlhttp.responseText;
                    loaded();
                    me();
                    setTimeout(function () {myScroll.refresh();}, 0);
                }
            }
            xmlhttp.open("GET","home_more.php?id="+id,true);
            xmlhttp.send();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T09:39:01.257

这应该这样做：

```
$('body').ajaxComplete(function () {
        document.getElementById('commentsArea_xxx').innerHTML=xmlhttp.responseText;
 }); 
```

这将在每次 ajax 调用之后执行。

**更新：** 如果您尚未将元素添加到 DOM，请查看@TJ Crowder 的回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T09:00:11.303

> 我认为问题在于，在 ajax 调用后没有更新文档，因此文档中不存在“commentsArea_xxx”！！！

正确的。ajax 调用所做的只是将数据带到您的代码中，在`xmlhttp.responseText`属性上。您可以将其添加到文档中。您可以通过设置`innerHTML`现有元素的 ，或通过创建元素并通过/ / 等[`document.createElement`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-2141741547)将它们附加到文档来做到这一点。[`Element#appendChild`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107)[`Element#insertBefore`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-952280727)

查看各种[DOM 规范](http://www.w3.org/DOM/DOMTR)以获取详细信息。HTML5 规范也有这方面的[一些信息](http://www.w3.org/TR/html5/webappapis.html#webappapis)。

* * *

FWIW，在像[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)一个好的库中都有**很多**实用程序功能和浏览器差异平滑。利用人们在这些库中投入的辛勤工作，您可以专注于为特定的增值编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T00:36:27.373

正如您所说的那样，问题是：... ajax 调用不会更新文档...相反，在通过 AJAX 检索 php 文件的调用之后的 javascript 发生在 DOM 有机会刷新之前。然而，setTimeout() 表现得很好，因为它给了 DOM 一点时间来刷新，然后你可以将任何尾随的 javascript 代码放在 setTimeout 函数中。至少它适用于 IE 11、FF 28、Chrome 33 和 Opera 11。9 毫秒的延迟对我有用。因此，我建议您将 AJAX 调用之后的任何 javascript 放在 setTimeout() 函数中：

```
setTimeout(function(){
// Your Code here
    var aVariable = document.getElementById("idRenderedFromAJAX");
}, 9); 
```

另一件事是让 xmlhttp.responseText 在进行 AJAX 调用之前将其值返回给已经连接到 DOM 的 javascript 变量。然后，通过调用呈现的任何 HTML 都可以通过刷新的 DOM 访问，例如，使用 setTimeout 函数放置的代码中的 getElementById。只是一个建议，因为这种替代方法不需要 jquery，并且似乎不会在网络上四处流传。

# nhibernate - 使用 NHibernate 执行存储过程

> ID：13539750
> 
> 赞同：3
> 
> 时间：2012-11-24T08:56:34.773
> 
> 标签：nhibernate, c#-4.0, stored-procedures

我在我的数据库中存储了名为“GetListingId”的过程。它需要三个字符串输入参数：`City`, `State`, `PhoneNumber`; 一个输入长参数：`CallId`并返回一个输出长参数：`ListingId`。

我正在尝试在代码中执行它：

```
IQuery query = this.appListingRepository.Session.CreateSQLQuery("exec GetListingId @City=:city, @State=:state, @PhoneNumber=:phoneNumber, @CallId=:callId")
                .SetString("city", "SAN JOSE")
                .SetString("state", "CA")
                .SetString("phoneNumber", "+14084801753")
                .SetInt64("callId", 1);

        long id = query.UniqueResult<long>(); 
```

但是这个抛出异常：`Invalid column name 'ListingId'`

SQL Server Management Studio 中的存储过程执行良好。

存储过程代码：

```
USE [Clickmob_ReportingDb_test]
GO
/****** Object:  StoredProcedure [dbo].[GetListingId]    Script Date: 11/24/2012 10:46:40 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

--CREATE PROCEDURE GetListingId
ALTER PROCEDURE [dbo].[GetListingId]
(
    @City  varchar(255),
    @State varchar(255),
    @PhoneNumber varchar(255),
    @CallId bigint
)
AS
BEGIN
  DECLARE @TotalPrice float;
  DECLARE @TotalCount float;
  DECLARE @DestNumber varchar(255);
  DECLARE @IsCustD    int;
  DECLARE @Result bigint;

-- Check Duplicated Calls for Listings --------------------------------------------------------------------------

  IF EXISTS (SELECT t.name
             FROM   tempdb.sys.tables t
             WHERE  t.name = '##tmp_acc')
    DROP TABLE ##tmp_acc;

  SELECT Li.AppListingId, Li.ListingInfoId INTO ##tmp_acc
  FROM   CALLS c, USERDATAS ud, LISTINGINFOS Li
  WHERE  c.ReportingUserDataId = ud.UserDataId
  AND    Li.CallId = c.CallId
  AND    c.DateTime > DateAdd(mm,-3,getdate())
  AND    Li.DestinationPhoneNumber = (SELECT TOP 1 ud.PhoneNumber
                                      FROM   CALLS c, USERDATAS ud
                                      WHERE  c.ReportingUserDataId = ud.UserDataId
                                      AND    c.CallId = @CallId);
  SELECT @IsCustD = COUNT(*) FROM ##tmp_acc;

-----------------------------------------------------------------------------------------------------------------
-- Check Quota Limits -------------------------------------------------------------------------------------------

  IF EXISTS (SELECT t.name
             FROM   tempdb.sys.tables t
             WHERE  t.name = '##tmp_quots')
    DROP TABLE ##tmp_quots;

  SELECT L.ListingId INTO ##tmp_quots
  FROM  (SELECT L.ListingId, L.MonthlyQuotaLimit, L.MonthlyBudget, L.DailyQuotaLimit, L.DailyBudget,
                L.SortingPrice, L.Status, acl.CityId
         FROM   AppLISTINGS L, AppCityToListing acL
         WHERE  L.ListingId=acL.ListingId) AS L
  LEFT JOIN
        (SELECT m.CityId, m.CampaignId, m.AppSubCategoryId, m.AppListingId, m.MonthlyCallEarning, m.MonthlyCallCount,
                ISNULL(d.DailyCallEarning, 0) AS DailyCallEarning, ISNULL(d.DailyCallCount, 0) AS DailyCallCount
         FROM  (SELECT c.CityId, c.CampaignId, Li.AppSubCategoryId, Li.AppListingId,
                       SUM(Li.CallEarning) AS MonthlyCallEarning, COUNT(c.CallId) AS MonthlyCallCount
                FROM   CALLS c, LISTINGINFOS Li
                WHERE  Li.CallId=c.CallId
                AND    Li.CallStatus=1
                AND    YEAR(c.DateTime)=YEAR(getdate())
                AND    MONTH(c.DateTime)=MONTH(getdate())
                GROUP BY c.CityId, c.CampaignId, Li.AppSubCategoryId, Li.AppListingId) AS m
         LEFT JOIN
               (SELECT c.CityId, c.CampaignId, Li.AppSubCategoryId, Li.AppListingId,
                       SUM(Li.CallEarning) AS DailyCallEarning, COUNT(c.CallId) AS DailyCallCount
                FROM   CALLS c, LISTINGINFOS Li
                WHERE  Li.CallId=c.CallId
                AND    Li.CallStatus=1
                AND    YEAR(c.DateTime)=YEAR(getdate())
                AND    MONTH(c.DateTime)=MONTH(getdate())
                AND    DAY(c.DateTime)=DAY(getdate())
                GROUP BY c.CityId, c.CampaignId, Li.AppSubCategoryId, Li.AppListingId) AS d
         ON (m.CityId=d.CityId AND m.CampaignId=d.CampaignId AND m.AppSubCategoryId=d.AppSubCategoryId AND m.AppListingId=d.AppListingId)) AS s
  ON (L.ListingId=s.AppListingId AND L.CityId=s.CityId)
  WHERE L.MonthlyQuotaLimit<=s.MonthlyCallCount
  OR    L.MonthlyBudget<=s.MonthlyCallEarning
  OR    L.DailyQuotaLimit<=s.DailyCallCount
  OR    L.DailyBudget<=s.DailyCallEarning;

-----------------------------------------------------------------------------------------------------------------
-- Accessible Listings ------------------------------------------------------------------------------------------

  IF EXISTS (SELECT t.name
             FROM   tempdb.sys.tables t
             WHERE  t.name = '##tmp_tbl')
    DROP TABLE ##tmp_tbl;

  SELECT DISTINCT SL.ListingId INTO ##tmp_tbl
  FROM  (SELECT act.CityId
         FROM   AppCities act, AppStates ast
         WHERE  act.StateId=ast.StateId
         AND    UPPER(act.Name)=UPPER(@City)
         AND    UPPER(ast.Name)=UPPER(@State)) AS SC,

        (SELECT aL.ListingId, aLm.MediaId AS ListingMediaId, abm.BrandId, abm.MediaId AS BrandMediaId,
                acm.CustomerId, acm.MediaId AS CustomerMediaId, ascL.SubCategoryId, acL.CityId
         FROM   AppLISTINGS aL, AppCityToListing acL, AppListingToMedia aLm, AppBRANDS ab, AppBrandToMedia abm,
                AppCustomerToMedia acm, AppSubCategoryToListing ascL
         WHERE  aL.ListingId=aLm.ListingId
         AND    aL.ListingId=acL.ListingId
         AND    aL.BrandId=ab.BrandId
         AND    ab.BrandId=abm.BrandId
         AND    ab.CustomerId=acm.CustomerId
         AND    aL.ListingId=ascL.ListingId) AS SL,

        (SELECT m.Number, m.CampaignId, m.MediaId, m.SubCategoryId,
                ISNULL(abc.BrandId, 0) AS ExceptBrandId,
                ISNULL(aLc.ListingId, 0) AS ExceptListingId,
                ISNULL(acc.CustomerId, 0) AS ExceptCustomerId
         FROM  (SELECT ap.Number, ac.CampaignId, ach.MediaId, ascc.SubCategoryId
                FROM   AppPHONENUMBERS ap, AppCAMPAIGNS ac, AppCHANNELS ach, AppSubCategoryToCampaign ascc
                WHERE  ap.CampaignId=ac.CampaignId
                AND    ac.ChannelId=ach.ChannelId
                AND    ap.CampaignId=ascc.CampaignId) AS m
         LEFT JOIN AppBrandToCampaign abc
         ON (m.CampaignId=abc.CampaignId)
         LEFT JOIN AppListingToCampaign aLc
         ON (m.CampaignId=aLc.CampaignId)
         LEFT JOIN AppCustomerToCampaign acc
         ON (m.CampaignId=acc.CampaignId)
         WHERE m.Number=@PhoneNumber) AS SM

  WHERE  SC.CityId=SL.CityId
  AND    SL.SubCategoryId=SM.SubCategoryId
  AND   (SL.ListingMediaId=SM.MediaId
  OR     SL.BrandMediaId=SM.MediaId
  OR     SL.CustomerMediaId=SM.MediaId)
  AND    SL.ListingId <>SM.ExceptListingId
  AND    SL.BrandId <>SM.ExceptBrandId
  AND    SL.CustomerId<>SM.ExceptCustomerId
  AND    SL.ListingId NOT IN (SELECT AppListingId
                              FROM   ##tmp_acc)
  AND    SL.ListingId NOT IN (SELECT ListingId
                              FROM   ##tmp_quots);

  SELECT @Result = COUNT(*) FROM ##tmp_tbl;
-----------------------------------------------------------------------------------------------------------------
  IF @Result > 0
    BEGIN
      SET @IsCustD = 0;

      SELECT @TotalPrice = SUM(sel.Price)
                           FROM (SELECT aL.ListingId, CASE aL.SortingPrice WHEN 0 THEN aL.LeadPrice
                                                      ELSE aL.SortingPrice END AS Price
                                 FROM   AppListings aL) AS sel, ##tmp_tbl t
                           WHERE sel.ListingId=t.ListingId;

      SELECT @TotalCount = SUM(aL.CallCount)
                           FROM  AppListings aL, ##tmp_tbl t
                           WHERE aL.ListingId=t.ListingId;

      SELECT @Result = (SELECT TOP 1 ISNULL(sel.ListingId, 0) AS ListingId
                        FROM  (SELECT L.ListingId, (L.Price/@TotalPrice - L.CallCount/(@TotalCount+1)) AS Rate
                               FROM  (SELECT aL.ListingId, aL.CallCount, CASE aL.SortingPrice WHEN 0 THEN aL.LeadPrice
                                                                         ELSE aL.SortingPrice END AS Price
                                      FROM   AppListings aL) AS L) AS sel, ##tmp_tbl t
                        WHERE  sel.ListingId=t.ListingId
                        ORDER BY sel.Rate DESC);
    END
  ELSE
    BEGIN
      IF @IsCustD > 0             
        BEGIN
          SET @IsCustD = 1;

          SELECT @TotalPrice = SUM(sel.Price)
                               FROM (SELECT aL.ListingId, CASE aL.SortingPrice WHEN 0 THEN aL.LeadPrice
                                                          ELSE aL.SortingPrice END AS Price
                                     FROM   AppListings aL) AS sel, ##tmp_acc t
                               WHERE sel.ListingId=t.ListingId;

          SELECT @TotalCount = SUM(aL.CallCount)
                               FROM  AppListings aL, ##tmp_acc t
                               WHERE aL.ListingId=t.ListingId;

          SELECT @Result = (SELECT TOP 1 ISNULL(sel.ListingId, 0) AS ListingId
                            FROM  (SELECT L.ListingId, (L.Price/@TotalPrice - L.CallCount/(@TotalCount+1)) AS Rate
                                   FROM  (SELECT aL.ListingId, aL.CallCount, CASE aL.SortingPrice WHEN 0 THEN aL.LeadPrice
                                                                             ELSE aL.SortingPrice END AS Price
                                          FROM   AppListings aL) AS L) AS sel, ##tmp_acc t
                            WHERE  sel.ListingId=t.ListingId
                            ORDER BY sel.Rate DESC);
        END
      ELSE
        RETURN 0;        
    END;            

  UPDATE AppLISTINGS
  SET    CallCount=CallCount+1
  WHERE  ListingId=@Result;

  SELECT @DestNumber = (SELECT TOP 1 ISNULL(n.Number, '') AS Number
                        FROM   AppPHONENUMBERS n
                        WHERE  n.PhoneCallListingId=@Result
                        ORDER BY n.PhoneNumberId);

  INSERT INTO LISTINGINFOS (CallStatus, IsCustomerDuplicate, DestinationPhoneNumber, CallId, AppListingId)
  VALUES (5, @IsCustD, @DestNumber, @CallId, @Result);

  RETURN @Result;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:55:07.657

[如Rohit 对此问题的回答](https://stackoverflow.com/questions/928847/how-to-get-the-return-value-from-a-sql-server-stored-procedure-into-nhibernate)`SELECT @Result`所示，将您的存储过程更改为而不是返回它或使用 ADO.NET 。

我使用的另一种方法是创建一个包装存储过程 (GetListintId_return)，它选择 GetListingId 的结果。

# sql - 平均 COUNT 查询

> ID：13539751
> 
> 赞同：1
> 
> 时间：2012-11-24T08:56:57.763
> 
> 标签：sql, dml

我正在尝试进行查询，但我不知道该怎么做。

这些是表格：

```
 Table Hospital         Table Doctor      Table Work

  Hid    Country         ic                Hid     ic
   1     England          1                 1       1
   2     Spain            2                 1       2
   3     France           3                 1       3  
   4     England          4                 2       4
   5     China            5                 4       5 
```

我想要的结果：

```
 Country     Average of Doctors Working on that Hospitals of that Country
  England     2 (the doctor with ic 1, 2, 3, and 4/number of hid)
  Spain       1
  France      0
  China       0 
```

我试过：

```
SELECT DISTINCT H.country, AVG(D.ic) 
FROM Hospital H, Doctor D 
WHERE H.hid IN 
      ( SELECT W.hid 
        FROM Work W 
        WHERE W.ic IN 
              ( SELECT COUNT(D.ic) 
                FROM D Doctor .... 
              ) 
      ) 
GROUP BY(H.country); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:55:20.357

试试这个

```
select H.Country, count(W.ic) / count(distinct H.hid) as [Average]
from Hospital as H
    left outer join Work as W on W.Hid = H.Hid
group by H.Country 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!6/b4224/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:08:47.747

首先获取每家医院的医生人数，然后获取平均值：

```
select country, avg(docs) as avg_doctors_working
from (
      select country, h.hid, count(*) as docs,
      from hospital h
    left join work w on w.hid = h.hid
    group by 1, 2) x
group by 1; 
```

# jquery - jquery 在多个悬停时显示相同的 div

> ID：13539755
> 
> 赞同：0
> 
> 时间：2012-11-24T08:57:43.020
> 
> 标签：jquery

我有几个相同类的 div，我想在它们中的任何一个悬停时显示相同的 div。我只想创建第二个 div 一次。我尝试在文档中创建它，然后在需要时克隆并附加它。这是行不通的。在下面的示例中，我的 main_item 是悬停在上面的类，而 optionbar 是要显示的 div。请注意，当您将鼠标悬停在任何 main_item 类上时，它的 ID 为 9999，而当您将鼠标悬停在其上时，该 ID 将被删除。

```
$(function(){
    $(".main_item").hover(function(){
     $('.optionbar').clone().appendTo("#9999");
    }
    ,function(){
         $("#9999").remove('.optionbar');
    }
);        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:51:42.903

您将在[此处](http://jsfiddle.net/Gajotres/vqkda/)找到工作示例。

代码示例：

```
$("div#test").hover(
   function () {
      $(this).append($("<div> ***</div>"));
    }, function () {
       $(this).find("div:last").remove();
    }
);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:40:47.130

**试试这个**：（[`Demo Here`](http://jsfiddle.net/ePGgF/)）

```
$(".main_item").hover(
   function() {
    $('.optionbar').show().appendTo(this);
}, function() {
    $('.optionbar').hide();
});​ 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:27:52.320

不确定我是否抓住了，但你应该使用`this`你悬停的当前元素

```
$(function(){
    $(".main_item").bind('hover',function(){
     $('.optionbar').clone().appendTo(this);
     $(this).remove('.optionbar');

    });        
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T09:35:10.803

我不明白你为什么需要克隆它，只需移动它并根据需要显示/隐藏

```
$(function(){
    $(".main_item").hover(function()
    {
        $('.optionbar').show().appendTo(this);

    }, function()
    {
        $('.optionbar').hide();
    });
}); 
```

[http://jsfiddle.net/trapper/F94Db/2/](http://jsfiddle.net/trapper/F94Db/2/)

# ajax - 如何在返回视图时通过 Ajax 将控制器中的数据获取到我的视图中？

> ID：13539785
> 
> 赞同：1
> 
> 时间：2012-11-24T09:01:46.537
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我的控制器中有这个动作，它返回一个视图......

```
public ActionResult SaveTimeShift(...)
        {
            try
            {

                if (Request.IsAjaxRequest())
                    return PartialView(....);

                return View(userRecord);
            }
            catch (Exception e)
            {                
                return PartialView(...);
            }
        } 
```

然后这是我的视图页面中的html代码......

```
using (Ajax.BeginForm("SaveTimeShift", new { }, new AjaxOptions { HttpMethod = "Get", UpdateTargetId = "recordList", InsertionMode = InsertionMode.Replace, Confirm = "Do you want to save the new time shift?",  OnSuccess = "partialRequestSuccess(data)", OnFailure = "partialRequestFailure" }, new { @class = "form-inline" }))
        { 
```

现在在我的 AjaxOptions 的 OnSuccess 参数上的 partialRequestSuccess(data) 函数...

```
function partialRequestSuccess(data) {
    if (data == 1)
        alert("New Time Shift has been saved.");
} 
```

现在我的问题是......我试图设置将在我的控制器中设置的“数据”变量的值......我做了一些关于返回 Json 对象的研究不幸的是我在我的控制器中返回了一个视图...现在我的“数据”变量有一个垃圾值...有没有办法从我的客户端知道我在数据库中保存数据是否成功...谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:17:20.720

您可以将数据存储在您的模型或 ViewBag 中的操作方法中：

```
ViewBag.MyVariable = "myValue"; 
```

然后在 JavaScript 中使用

```
var myVariable = @Html.Raw(Json.Encode(ViewBag.MyVariable)) 
```

# vb.net - 如何使用 Visual Basic .NET 从网站下载 PDF 并存储在 %appdata% 中

> ID：13539787
> 
> 赞同：3
> 
> 时间：2012-11-24T09:02:32.113
> 
> 标签：vb.net, file, download, store, appdata

我有一个托管在网站上的 PDF 文件。我希望我的 VB.NET 程序检索文件/下载它并将其存储在`%appdata%`. `%appdata%/my_program`如果您愿意，这可以在它自己的文件夹中。如何在我的 VB.NET 程序中实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:10:14.343

您可以`WebClient.DownloadFile(Url,LocalPath)`用于下载 PDF 文件并保存在 PC 上的本地路径中。班级在`System.Net Assembly`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T11:06:49.290

使用它来下载文件：

```
 Dim WC As New System.Net.WebClient
    WC.DownloadFile(URL, FileName) 
```

或者

```
 My.Computer.Network.DownloadFile(URL, FileName) 
```

要将其保存在 %appdata% 中，只需使用：

```
 My.Computer.FileSystem.SpecialDirectories.AllUsersApplicationData 
```

或者

```
 My.Computer.FileSystem.SpecialDirectories.CurrentUserApplicationData 
```

# video-streaming - NS-3 中的视频传输

> ID：13539799
> 
> 赞同：1
> 
> 时间：2012-11-24T09:03:49.117
> 
> 标签：video-streaming, simulation, ns-3

我正在尝试为我的大师做一个模拟，我需要模拟视频传输和流媒体。我已经有了视频跟踪文件，但我不知道如何将它们编码到 NS-3 脚本中。我刚开始做一个简单的拓扑，只是模拟一个简单的 Wifi（基于教程），但我还没有找到在哪里读取和发送失败。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T18:16:31.903

您可以将 OnOffApplication 数据速率超过 500 kbps 的 UDP 模拟用作视频流数据速率。或者您可以使用 VLC 等软件将真实流量发送到 ns3 模拟

# c - 被动运动检测

> ID：13539800
> 
> 赞同：0
> 
> 时间：2012-11-24T09:03:50.510
> 
> 标签：c, glut

如何使用 opengl 检测鼠标被动运动？换句话说，我如何理解它是向前、向后、向左、向右移动？

我已经做好了

```
glutPassiveMotionFunc ( func ) 

void func ( int x, int y ) {

   // x and y always positive, I wait it should be negative if it goes left 
   //   acc. to  my coordinate system determined in glLookAt.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:14:19.157

从[文档](ftp://ftp.sgi.com/opengl/glut/spec3/node51.html)：

> x 和 y 回调参数指示鼠标在窗口相对坐标中的位置。

如果您对光标如何在两帧之间移动（增量）感兴趣，请存储每帧的光标位置并计算“当前”位置和“最后一次看到”位置之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:14:14.490

你不是用 OpenGL 做的，而是用 GLUT 做的。

存储之前记录的鼠标位置。将新位置与先前位置进行比较，以了解它是向上、向下、向左还是向右。

像这样的东西：

```
int x=0, y=0;
enum { LEFT, RIGHT, UP, DOWN };
int direction;

void func(int mx, int my)
{
     if(mx < x) direction = LEFT;
     else if(mx > x) direction = RIGHT;
     else if(my > y) direction = DOWN;
     else if(my < y) direction = UP;

     x = mx;
     y = my;
} 
```

原点位于左上角。

# eclipse - Mercurial eclipse插件推送不同的服务器

> ID：13539802
> 
> 赞同：0
> 
> 时间：2012-11-24T09:04:13.627
> 
> 标签：eclipse, mercurial, eclipse-plugin, mercurial-hook, mercurialeclipse

我已经安装了 mercurial 并在 .hgrc 文件中进行了如下配置：
default (server-1)
default push (server-2)
这在命令行中可以正常工作，因为它正在使用 .hgrc 文件。

我尝试使用未从.hgrc文件读取的mercurial的eclipse插件（我必须为其提供repo地址和凭据），我已经给出了默认的server-1地址，那么如何配置server-2进行推送操作?

或者

如何让我的 Eclipse 直接从 .hgrc 文件中读取？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:41:39.353

我相信插件正在使用该`.hgrc`文件（例如，我从未手动编辑过它并在其中有`defult`定义）。

尝试在推/拉时打开 URL 文本字段的下拉列表，它将包含*server-1*（可能还有*server-2*），如果您选择它，插件还将填写用户凭据（如果您也救了他们）。

# android - m3u8 流媒体视频文件的 getDuration()

> ID：13539806
> 
> 赞同：1
> 
> 时间：2012-11-24T09:05:02.710
> 
> 标签：android, m3u

我正在使用流媒体视频播放器应用程序。

我能够获得 mp4 格式视频的视频时长

但我无法获得 m3u8 视频格式 url 的视频时长。

```
 Here is the code i have used
vdoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            mp.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

                public void onBufferingUpdate(MediaPlayer arg0, int percent) {
                    tv_BufferingPercent.setText(" " + percent + "%");
                }
            });
            System.out.println("GET DURATION :"+vdoView.get);
            txtTotalTime.setText(formatDuration(vdoView.getDuration()));
            sbVideoProgress.setMax((int) vdoView.getDuration());

        }
    }); 
```

我为 getduration() 方法获得 0 值。

请帮我

# api - RESTful API 设计 OR 谓词

> ID：13539807
> 
> 赞同：0
> 
> 时间：2012-11-24T09:05:04.577
> 
> 标签：api, rest, design-patterns, restful-url, restful-architecture

我正在设计一个 RESTful API，我正在尝试在查询资源时如何用 OR 运算符表示谓词。

例如，如果我有一个具有属性名称的资源 Foo，您将如何搜索名称与“Name1”或“Name2”匹配的所有 Foo 资源？

当它是 AND 运算符时，这是直截了当的，因为我可以执行以下操作： [http ://www.website.com/Foo?Name=Name1&Age=19](http://www.website.com/Foo?Name=Name1&Age=19)

我见过的另一种方法是在正文中发布搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:30:31.947

您将需要选择自己的方法，但我可以列举几个看起来很合乎逻辑的方法（尽管并非没有缺点）：

选项 1.：使用`|`运算符：

```
http://www.website.com/Foo?Name=Name1|Name2 
```

选项 2：使用修改后的查询参数以允许从集合中选择一个值（可能的逗号分隔值列表）：

```
http://www.website.com/Foo?Name_in=Name1,Name2 
```

选项 3：使用类似 PHP 的表示法来提供列表而不是单个字符串：

```
http://www.website.com/Foo?Name[]=Name1&Name[]=Name2 
```

上述所有选项都有一个巨大的优势：它们不会干扰其他查询参数。

但正如我所提到的，选择你自己的方法并在你的 API 中保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:21:42.343

那么解决这个问题的一种快速方法是添加一个额外的参数来识别参数之间的关系，无论它们是一个和或一个或例如：

[http://www.website.com/Foo?Name=Name1&Age=19&or=true](http://www.website.com/Foo?Name=Name1&Age=19&or=true)

或者对于更复杂的查询，只需保留一个参数，并通过组成您自己的小查询语言来包含您的整个查询，在服务器端，您将解析整个字符串并提取信息和语句。

# javascript - getJSON 显示 [object Object] 而不是实际值

> ID：13539811
> 
> 赞同：0
> 
> 时间：2012-11-24T09:06:15.467
> 
> 标签：javascript, jquery, ajax, json, object

我有一个 JSON，我需要获取这个 JSON 并将 html 作为 ul li 列表放入。它将值作为对象获取并在 html 中显示 [object Object]。如果我修改 json，那么它可以工作。所以我的脚本中可能有问题，我无法正确循环遍历 json 文件。有人可以帮忙吗：

我的 JSON 是：

```
[
    {
        "us":"USA"  
    },
    {
        "fr":"FRANCE"
    },
    {
        "es":"Spain"
    },
    {
        "sa":"South Africa"
    }
] 
```

和 JS 是

```
<script>
  $.getJSON('jsonfile', function(data) {
    var items = [];
    $.each(data ,function(key,val) {
      items.push('<li id="'+ key +'">' + val +'</li>');
    });
    $('<ul />' , {
      'class':'new-div',
      html:items.join('')
    }).appendTo('body');
  });
</script> 
```

更新的 JSON：

```
[
{
    "items":
        {
            "item":
                [
                    {
                        "id": "0001",
                        "type": "donut",
                        "name": "Cake",
                        "ppu": 0.55,
                        "batters":
                            {
                                "batter":
                                    [
                                        { "id": "1001", "type": "Regular" },
                                        { "id": "1002", "type": "Chocolate" },
                                        { "id": "1003", "type": "Blueberry" },
                                        { "id": "1004", "type": "Devil's Food" }
                                    ]
                            },
                        "topping":
                            [
                                { "id": "5001", "type": "None" },
                                { "id": "5002", "type": "Glazed" },
                                { "id": "5005", "type": "Sugar" },
                                { "id": "5007", "type": "Powdered Sugar" },
                                { "id": "5006", "type": "Chocolate with Sprinkles" },
                                { "id": "5003", "type": "Chocolate" },
                                { "id": "5004", "type": "Maple" }
                            ]
                    }

                ]
        }
}
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:09:23.047

`data`你循环的是数组，它有对象。因此，您的`key`will 是`0`,`1`等，而 the`val`将是数组中该位置的*对象*。

您的 JSON 结构实际上使输出有点痛苦，因为您的每个对象只有一个属性，但属性名称因对象而异。即使只有其中一个，您*也可以通过循环遍历对象属性来做到这一点：*

```
var items = [];
$.each(data ,function(outerKey, outerVal) { // <== Loops through the array
  $.each(outerVal, function(key, val) {     // <== "Loops" through each object's properties
      items.push('<li id="'+ key +'">' + val +'</li>');
  });
}); 
```

...但我会改为更改 JSON 结构。例如，假设键是唯一的，您的原始代码将使用以下结构：

```
{
    "us":"USA",
    "fr":"FRANCE",
    "es":"Spain",
    "sa":"South Africa"
} 
```

# browser - 如何让浏览器使用 html 代码放大/缩小？

> ID：13539812
> 
> 赞同：1
> 
> 时间：2012-11-24T09:06:38.223
> 
> 标签：browser, zooming

我是编码新手，需要让浏览器放大和缩小，但无法让人们在其他问题中列出的任何代码正常工作！我正在将代码输入到 html 代码编辑器小部件中。我看到的应该可以工作的代码如下：

```
 #iframe{
     zoom: 0.75;
     -moz-transform: scale(0.75);
     -moz-transform-origin: 0 0;
     -o-transform: scale(0.75);
     -o-transform-origin: 0 0;
     -webkit-transform: scale(0.75);
     -webkit-transform-origin: 0 0; } 
```

我如何让它在 html 中工作，如果可能的话，我可以有完整的代码。

# jquery-ui - JQuery 参考资料

> ID：13539813
> 
> 赞同：0
> 
> 时间：2012-11-24T09:06:39.377
> 
> 标签：jquery-ui, jquery

嗨，虽然这不是技术问题，但重要的是要知道在哪里可以从专家那里找到*最好的。我是***JQuery**的新手，我正在使用它`http://jquery.com/`来学习。但是，如果我可以有一些更好的 JQuery 参考学习网站，其中提供视频和演示，那将是非常重要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:13:57.257

[新波士顿 jQuery 视频教程](http://thenewboston.org/list.php?cat=32)

这是一个非常好的网站。我已经阅读了许多教程，它们非常有帮助

只需先尝试几个视频，看看你能从中得到多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:31:55.257

因此，假设您对 jQuery 有点熟悉，我建议您从 JavaScript 开始。

1.  [Code Academy](http://www.codecademy.com/tracks/javascript-combined)贯穿整个过程，您将**了解**JavaScript

2.  jQuery 的官方网站有一个长而全面[的教程列表](http://docs.jquery.com/Tutorials)。选择你认为在你的小巷里的那些，然后跟着它跑。

在那之后，有很多很多很好的网站致力于 jQuery。

您可能喜欢的一些是：

*   [http://www.learningjquery.com/](http://www.learningjquery.com/)
*   [http://jqueryfordesigners.com/](http://jqueryfordesigners.com/)
*   [http://visualjquery.com/1.1.2.html](http://visualjquery.com/1.1.2.html)（不教，只是把它当作框架的视觉文档）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:42:06.620

[http://listic.ru/jQuery_Cookbook.pdf](http://listic.ru/jQuery_Cookbook.pdf)

发现这很有组织和有用。

# java - 从输入流中播放 JavaFx 中的 mp3 文件

> ID：13539814
> 
> 赞同：10
> 
> 时间：2012-11-24T09:06:40.687
> 
> 标签：java, streaming, mp3, javafx-2, javafx

我正在使用 JavaFX 媒体播放器使用以下代码播放 mp3 文件

```
 new MediaPlayer(new Media(FileObject.toURI().toString())).play(); 
```

但是现在我要求我在内存中保存 mp3 字节数据而不是文件对象。原因是 mp3 文件被加密，然后随程序一起提供。因此我需要解密内存或输入流中的 mp3 文件。

我可以将 mp3 文件解密为 temp 目录中的临时文件，但这会产生性能开销并且音频内容不安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:36:12.050

来自[媒体 Javadoc](http://docs.oracle.com/javafx/2/api/javafx/scene/media/Media.html#constructor_detail)

> 仅支持 HTTP、FILE 和 JAR URL。如果提供的 URL 无效，则会引发异常。如果发生异步错误，将设置 error 属性。收听此属性以收到任何此类错误的通知。

我个人对 JavaFX 并不熟悉，但这会告诉我，如果不诉诸讨厌的 hack，您将无法直接从内存中读取媒体。通常对于这种仅 URI 的接口，我建议注册一个自定义[UrlStreamHandler](http://docs.oracle.com/javase/7/docs/api/java/net/URLStreamHandler.html)和一个从内存读取的自定义协议。但是假设 JavaDoc 是正确的，JavaFX 使用它自己的分辨率，所以大概这不起作用。

鉴于此，我怀疑完成这项工作的唯一方法是通过 HTTP 提供对内存中 MP3 的访问。您可以使用[Jetty](http://www.eclipse.org/jetty/)或任何类似的可嵌入 servlet 容器来执行此操作。大致如下：

1) 根据[快速入门指南启动 Jetty](http://www.eclipse.org/jetty/documentation/current/quick-start-configure.html)

2) 注册一个如下所示的 servlet。此 servlet 将公开您的内存中数据：

```
public class MagicAccessServlet extends HttpServlet {
    private static final Map<String, byte[]> mediaMap = new ConcurrentHashMap();

    public static String registerMedia(byte[] media) {
        String key = UUID.randomUUID().toString();
        mediaMap.put(key, media);
        return key;
    }

    public static deregisterMedia(String key) {
        mediaMap.remove(key);
    }

    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        String key = req.get("key");
        byte[] media = mediaMap.get(key);
        resp.setContentLength(media.length);
        resp.getOutputStream().write(media);
    }
} 
```

然后，您可以使用 http url 从您的应用程序中访问。例如像

```
MagicAccessServlet.registerMedia(decodedMp3);
new MediaPlayer(new Media("http://localhost:<port>/<context>/<servlet>?key=" + key)).play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:23:08.890

不幸的是，作为 Media 构造函数，除了临时文件方法之外，我没有其他简单的方法可以做到这一点。请注意，虽然我同意性能会有开销，但如果文件不是太大（大多数 mp3 文件通常不是），那么从这个意义上说开销应该是最小的。从技术上讲，将内容解码到内存也会使其不安全（尽管公认更难提取。）

我确实想到的一种有点疯狂的方法是使用套接字。您可以设置应用程序的一个单独部分来解密未加密的内容，然后通过 localhost 上的某个端口流式传输原始 mp3 字节。然后，您可以将其作为 HTTP URI 提供给 Media 构造函数。

# php - 从多列创建数据集并将其与另一个数据集进行比较

> ID：13539819
> 
> 赞同：0
> 
> 时间：2012-11-24T09:07:57.137
> 
> 标签：php, mysql, database, compare

我在数据库中有 2 个表：`table_1`和`table_2`.

`table_1`包含 3 列即`a_id`, `a_zone`,`a_address`

`table_2`包含 4 列，即`p_id`, `not_use`, `p_zone`,`p_address`

两个表中的行号不同。我需要将来自 table_1 的 ( `a_zone`, )的“数据集”与来自 的 ( , ) 进行比较。`a_address``p_zone``p_address``table_2`

让我给你举个例子：

```
Table1 contains:

a_zone  a_address
=================
1       8
2       9
3       6
4       9
5       2

Table2 contains:

p_zone  p_address
=================
1       8
2       9
3       6
4       9
5       8 
```

现在我需要像这样比较 a_zone, a_address = p_zone, p_address 与否。

我不需要仅将 a_zone 与 only`p_zone`或仅`a_address`与 only进行比较`p_address`。相反，我需要比较整个数据组合。对于我上面的例子，我需要比较 18 和 18 [ `a_zone`, `a_address`WITH `p_zone`, `p_address`]

我被它困住了，真的需要帮助。请建议我.... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:15:34.803

如果我理解正确，你不能像这样做两个嵌套的while循环：

```
$query1 = get a_zone and a_address from table_1;
$query2 = get p_zone and p_address from table_2;

while($row = mysql_fetch_array($query1)) {
    $a_zone = $row['a_zone'];
    $a_address = $row['a_address'];
    while($row = mysql_fetch_array($query2)) {
        if($a_zone == $row['p_zone'] && $a_address == $row['p_address']) {
            do_something;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:15:34.833

您可以从这样的查询开始：

```
SELECT *
FROM table_1 left join table_2
     on table_1.a_zone = table_2.p_zone
        and table_1.a_address = table_2.p_address
UNION
SELECT *
FROM table_1 right join table_2
     on table_1.a_zone = table_2.p_zone
        and table_1.a_address = table_2.p_address 
```

然后你可以添加一些条件，像这样：

```
SELECT *
FROM table_1 left join table_2
     on table_1.a_zone = table_2.p_zone
        and table_1.a_address = table_2.p_address
WHERE table_2.p_id is null or table_1.a_id <> table_2.p_id
UNION
SELECT *
FROM table_1 right join table_2
     on table_1.a_zone = table_2.p_zone
        and table_1.a_address = table_2.p_address
WHERE table_1.p_id is null or table_1.a_id <> table_2.p_id 
```

但这取决于您需要如何比较表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:45:51.367

您还没有指定要返回的数据，所以我假设了一个简单的连接。

除非我误解了您的查询，否则我认为您不需要联合我认为您可以通过单个联接来做到这一点：

```
SELECT *
 FROM table_1 JOIN table_2 
 WHERE (table_1.a_zone = table_2.p_zone) && (table_1.a_address = table_2.p_address); 
```

这将返回：

![在此处输入图像描述](../Images/2c0c306140a1c989ce4d60da6949443b.png)

# google-chrome - Twitter Bootstrap 导航分隔符不适用于谷歌浏览器

> ID：13539821
> 
> 赞同：4
> 
> 时间：2012-11-24T09:08:36.310
> 
> 标签：google-chrome, twitter-bootstrap, navigation

我的导航栏没有显示每个子页面元素的分隔线。这仅发生在 google chrome 中，而不是 IE 或 FF。这是一张图片（[点击这里查看更大尺寸的图片](https://i.stack.imgur.com/vmPi5.png)）：

![在此处输入图像描述](../Images/764e7f82ff905ef813b039ccaa4d1ad7.png)

这是我的 HTML 代码：

```
<li class="dropdown">
  <a href="/jrknet/www/company" class="dropdown-toggle" data-toggle="dropdown" data-target="#">
    Company
    <b class="caret">
    </b>
  </a>
  <ul class="dropdown-menu">
    <li>
      <a href="/jrknet/www/company/about-us">
        About us
      </a>
    </li>
    <li class="divider">
    </li>
    <li>
      <a href="/jrknet/www/company/meet-the-team">
        Meet the Team
      </a>
    </li>
    <li class="divider">
    </li>
    <li>
      <a href="/jrknet/www/company/mission-statement">
        Mission Statement
      </a>
    </li>
    <li class="divider">
    </li>
    <li>
      <a href="/jrknet/www/company/development-methodology">
        Development Methodology
      </a>
    </li>
    <li class="divider">
    </li>
    <li>
      <a href="/jrknet/www/company/quality-management">
        Quality Management
      </a>
    </li>
    <li class="divider">
    </li>
    <li>
      <a href="/jrknet/www/company/business-continuity">
        Business Continuity
      </a>
   </li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T11:25:55.633

出现此类问题时，您可以检查放大和缩小。

我没有发现代码有任何问题..

此外，如果问题仍然存在，您可以尝试更改显示分辨率。

# scala - Unit 和 Nothing 有什么区别？

> ID：13539822
> 
> 赞同：71
> 
> 时间：2012-11-24T09:08:39.667
> 
> 标签：scala

这两种类型都`Unit`表示`Nothing`一个不返回任何内容的函数。他们之间有什么区别？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-24T09:13:36.113

`Unit`是一种只有一个值的类型 - 请参阅[Unit type](https://en.wikipedia.org/wiki/Unit_type)。另一方面，`Nothing`没有*可能的*值 - 请参阅[底部类型](https://en.wikipedia.org/wiki/Bottom_type)。

不返回任何内容的函数必须具有返回类型`Unit`。如果是，`Nothing`则该函数无法返回结果。退出函数的唯一方法是通过异常。

* * *

`Nothing`以不同的方式使用。它具有两个特性：

1.  `Nothing`是所有其他类型（包括`Null`）的子类型。
2.  不存在这种类型的实例。

这什么时候有用？考虑`None`：

```
object None extends Option[Nothing] 
```

因为`Option`它的类型参数是协变的，并且`Nothing`是一切的子类型，是每个类型`Option[Nothing]`的子类型。因此，我们可以创建一个对象，它是for each 的子类型。这是合理的，因为无法实例化，所以总是没有值。相似地`Option[A]``A``None``Option[A]``A``Nothing``Option[Nothing]`

```
object Nil extends List[Nothing] 
```

* * *

`Unit`对应于逻辑真，`Nothing`对应于[Curry-Howard 同构](https://en.wikipedia.org/wiki/Curry-Howard_Isomorphism)下的逻辑假，我们将类型视为命题，将函数视为证明，.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-24T09:22:48.113

`Unit`意味着（a）函数具有输入和输出等副作用，（b）这些副作用是函数的主要目标。当然，即使函数的类型不同于`Unit`.

`Nothing`是 Scala 中的一种特殊类型，因为 (a) 它没有值（Unit 只有一个值 - `()`），所以您不能返回 type 的值`Nothing`，并且 (b) 它是所有其他类型的子类型。这意味着如果某物具有 type `Nothing`，则可以使用它来代替任何其他类型（通过子类型化），但不会产生任何结果。这对于处理异常很有用——`throw`表达式的类型为`Nothing`，因此它可以在程序中的任何地方使用。

简而言之，`Nothing`意味着程序发生错误或终止并且没有返回任何内容，而`Unit`意味着有副作用，但执行正常结束而没有结果。

[Scala 中的编程](http://www.artima.com/shop/programming_in_scala_2ed)对此有很好的解释。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-24T09:22:56.840

在 Petr 的回复中添加一个方面：`Nothing`在类型层次结构中起着重要作用。是底型。这意味着它是所有其他类型的子类型，就像 的对立面一样`Any`，它是一切的超类型。[你可以在这里](http://joelabrahamsson.com/entry/learning-scala-type-hierarchy-and-object-equality)找到一个很好的解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-12T12:46:15.937

**单元**

单位与Java的**void**相同。Java 中的 void 是关键字，但 Unit 在 Kotlin 中是对象。

现在如果一个函数在 Kotlin 中返回 Unit，这意味着它没有返回任何有意义的东西，该函数只是执行了一堆代码并返回了**执行流程**。

**没有什么**

没有什么是完全不同的。您无法将它与 Java 中的任何内容联系起来。**在java中没有什么比如Nothing。**

什么都没有意味着**执行的结束**。如果一个函数返回 Nothing，则意味着它实际上没有返回任何内容。甚至没有**执行流程**。

没有什么比得上黑洞，任何进去的东西都出不来，甚至连光也没有（光在这里是“执行流”）。在 Unit 的情况下，发出的光最少。

因此，如果一个函数返回 Nothing，则代码流到此结束，之后编写的任何内容都是**Unreachable**。

现在看下面的代码，

```
fun main() {
    unitFun()
    println("after unit")
    nothingFun()
    println("after nothing")   //you get warning here saying "unreachable code"
}

fun nothingFun(): Nothing {
    println("inside nothing")
    throw Exception()
}

fun unitFun(): Unit {
    println("inside unit")
} 
```

输出将是

```
inside unit
after unit
inside nothing
Exception in thread "main" java.lang.Exception 
```

**注意：**您一写就收到警告

```
println("after nothing")     UnReachable Code 
```

你知道原因，因为 nothingFun 甚至没有发回执行流程。

在这里要完成的另一件事是，任何返回 Nothing 的函数都必须抛出任何类型的异常。

**原因：**如果您编写一些通用语句（并且不抛出异常），那么该函数将匹配返回类型并且我们没有任何返回 Nothing 的内容，这意味着我们没有任何内容会影响执行流程并且永远不会返回它背部。一切都返回一些东西，甚至 Unit 也是一些东西。

现在，可以说 Nothing 是一个类，因此我们可以将其作为对象并返回它本身。唔唔唔唔？一个大的nohhh？

没有任何类有一个构造函数，但它是私有的，所以你甚至不能为它创建一个对象。

**最后一点**

在后台，Unit在反编译的字节码中被转换为void(small v)，而Nothing被转换为Void(capital V)。

看下面的代码，

```
var user = null               //First
var user : User? =null        //Second 
```

这里，第二条语句显示了 Nullable-User 类型的**用户**。第一条语句的**用户**类型是什么？

有什么猜测吗？

它是**Nullable-Nothing**类型。

尝试将第一个语句视为

```
var user : Nothing? = null 
```

现在引擎盖下发生了什么，

```
Void user = (Void)null;              //First
User user = (User)null;        //Second 
```

# rest - 用于聚合层次结构的 REST Web 服务

> ID：13539827
> 
> 赞同：0
> 
> 时间：2012-11-24T09:09:16.607
> 
> 标签：rest, restful-architecture

我有公司/部门的 REST 服务。包含部门的公司。

我已经为公司和部门编写了 CRUD 服务，但是当我检索具有 id 的公司时，我希望公司对象应该进行嵌套的 REST API 调用并以分层方式显示该公司的所有部门。

像这样的东西：

```
<company>
    <companyId> 1001 </companyId>
    <companyName>company name</companyName>
    <departments>
        <depaId>1111</depId>
        <depName>dep name1</depName>
        <depaId>2222</depId>
        <depName>dep name2</depName>
    </departments> 
</company> 
```

如果有人对 REST 嵌套调用有一些想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:47:33.447

Are departments shared between companies? by that, I mean is one company's marketing department basically the same thing as another company's, or are they seperate concepts? If the former, what you have are simply two resource collections. You should treat them as such, and link from the company to the departments.

```
<company>
    <link rel="department" href="/departments/5" />
    ...
</company> 
```

# android - Android：故事书（动画、声音、图片）

> ID：13539828
> 
> 赞同：-3
> 
> 时间：2012-11-24T09:09:17.417
> 
> 标签：android, animation, mobile, surfaceview

* * *

我正在用 Android 开发一本故事书。关于在布局中插入多个动画 gif 的可能方法，我在网上冲浪了很长一段时间。我的应用程序的功能是：

-10 故事书 - 所以这意味着我不能为每个故事的每个场景都使用一种布局，因为它会导致应用程序具有很大的文件大小..

- 动画（触摸）

- 声音

我的问题是： 1\. 显示多个动画 gif 的最有效方式是什么。我更喜欢只为几个场景使用 1 布局（每个故事最少有 10 个场景） 2\. 如何同时播放动画和声音？

我希望你能帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:14:22.807

我猜这是你的第一个 Android 项目。Android 对动画 GIF 没有很好的支持，也不应该因为动画 GIF 不是处理动画的最佳方式。即使假设你可以让它工作，你仍然会遇到同步声音的问题。但长话短说，您的问题是询问如何构建您的应用程序，这并不是那么简单，因为它需要许多实验步骤。我建议您按照以下教程尝试动画 GIF：

[动画 GIF 教程](http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/)

让一个 GIF 工作后，尝试将其扩展到多个 GIF，然后根据触摸触发它。

# php - 解析错误：语法错误，文件意外结束，期待函数 (T_FUNCTION) inmodule\Album\Module.php 第 25 行

> ID：13539834
> 
> 赞同：10
> 
> 时间：2012-11-24T09:10:17.623
> 
> 标签：php, zend-framework, frameworks

我的 module.php 有错误。

我在[这里](http://framework.zend.com/manual/2.0/en/user-guide/modules.html)得到了代码。

我按照说明进行操作，但我不知道我哪里弄错了。

请在下面查看我的代码：

```
 <?php
namespace Album;

class Module
{
    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-24T09:21:01.817

您的代码末尾缺少右括号。`}`在脚本末尾添加以关闭`class`块

# c# - 使用 Graphviz 和 Quickgraph 时的替代布局

> ID：13539836
> 
> 赞同：1
> 
> 时间：2012-11-24T09:10:31.033
> 
> 标签：c#, graphviz, quickgraph

我已将此页面上可用的示例转换为 Windows 应用程序之一。 [http://www.pedautreppe.com/post/How-to-render-a-finite-state-machine-graph-in-ASPNET-.aspx](http://www.pedautreppe.com/post/How-to-render-a-finite-state-machine-graph-in-ASPNET-.aspx)

该应用程序正在按预期生成图像，但是当我尝试更改布局时，我无法让它工作。我正在尝试使用“Circo”或“Sfdp”而不是“点”。我尝试了以下更改，但生成的图像始终具有与“点”完全相同的布局：

1-我改变了行：

`process.StartInfo.FileName = @"C:\Program Files\Graphviz 2.21\bin\dot.exe";`

至： `process.StartInfo.FileName = @"C:\Program Files\Graphviz 2.21\bin\sfdp.exe";`

或者： `process.StartInfo.FileName = @"C:\Program Files\Graphviz 2.21\bin\circo.exe";`

2-我添加了“-Kspfg”/“-Kcirco”到 `process.StartInfo.Arguments = "-Tgif -Gcharset=latin1";`

3-我尝试结合1和2

以上似乎都不起作用。能否请你帮忙？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:23:30.340

已修复..我的代码中的参数空格有问题。

谢谢你，

# nsstring - UIImageView 数组

> ID：13539849
> 
> 赞同：-1
> 
> 时间：2012-11-24T09:12:00.040
> 
> 标签：nsstring, uiimageview, uiimage, nsarray

如何将四个图像放在 UIImageView 数组中？为什么我的forloop不能运行？

如果我想用四个图像创建四个帧，该怎么做？

```
 NSArray *photos = [NSArray arrayWithObjects:
                    [UIImage imageNamed:@"1.jpg"],
                    [UIImage imageNamed:@"2.jpg"],
                    [UIImage imageNamed:@"3.jpg"],
                    [UIImage imageNamed:@"4.jpg"],nil]; 

    for(int i=0;i<5;i++)
   {
    UIImage *image = [UIImage imageNamed:[photos objectAtIndex:i]];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:23:10.187

```
NSArray *photos = [NSArray arrayWithObjects:
                    [UIImage imageNamed:@"1.jpg"],
                    [UIImage imageNamed:@"2.jpg"],
                    [UIImage imageNamed:@"3.jpg"],
                    [UIImage imageNamed:@"4.jpg"],nil]; 
UIImageView *imgView = [[UIImageView alloc]init];
imgView.animationImages = photos; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T02:25:21.010

`[photos objectAtIndex:i]`这个方法你只能得到 UIImage 对象，你不能得到一个 NSString 对象的`[UIImage imageNamed:]`方法。

# vb6 - 我如何在 vb6.0 中透明表单？

> ID：13539853
> 
> 赞同：0
> 
> 时间：2012-11-24T09:12:55.410
> 
> 标签：vb6

> **可能的重复：**
> [使用 VB6 的半透明表单](https://stackoverflow.com/questions/3621118/semi-transparent-form-using-vb6)

我想创建一个具有多种形式的vb应用程序，这些形式都是透明的，上面有一些文字。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:34:54.267

如果您只想通过透明表单来使用代码。

VB：先声明一下

```
Dim g_nTransparency As Integer
Public Const LWA_COLORKEY = 1
Public Const LWA_ALPHA = 2
Public Const LWA_BOTH = 3
Public Const WS_EX_LAYERED = &H80000
Public Const GWL_EXSTYLE = -20
Public Declare Function SetLayeredWindowAttributes Lib "user32" (ByVal hwnd As Long, ByVal Color As Long, ByVal X As Byte, ByVal alpha As Long) As Boolean

Public Declare Function SetWindowLong Lib "user32" Alias "SetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long, ByVal dwNewLong As Long) As Long
Public Declare Function GetWindowLong Lib "user32" Alias "GetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long) As Long

Public Declare Function ShowWindow Lib "user32" (ByVal hwnd As Long, ByVal nCmdShow As Long) As Long

Sub SetTranslucent(ThehWnd As Long, nTrans As Integer)
'SetWindowLong and SetLayeredWindowAttributes are API functions, see MSDN for details
   Dim attrib As Long
   attrib = GetWindowLong(ThehWnd, GWL_EXSTYLE)
   SetWindowLong ThehWnd, GWL_EXSTYLE, attrib Or WS_EX_LAYERED
   SetLayeredWindowAttributes ThehWnd, RGB(255, 255, 0), nTrans, LWA_ALPHA    
End Sub

Public Function Transparent_Form()
  g_nTransparency = 190
  If g_nTransparency < 0 Then g_nTransparency = 0
  If g_nTransparency > 255 Then g_nTransparency = 255
  SetTranslucent Translucent.hwnd, g_nTransparency
  Translucent.Show
  mintCount = 0 
End Function 
```

# javascript - 为什么地理定位不使用手机GPS

> ID：13539856
> 
> 赞同：0
> 
> 时间：2012-11-24T09:13:26.343
> 
> 标签：javascript, geolocation

我正在使用以下内容来获取手机的位置..

```
 <script src="http://maps.google.com/maps/api/js?sensor=true"></script>

  <script type="text/javascript" >
   $(document).ready(function () {

 // wire up button click
 $('#go').click(function () {
    // test for presence of geolocation
     if (navigator && navigator.geolocation) {
         // make the request for the user's position
         navigator.geolocation.getCurrentPosition(geo_success, geo_error);
     } 
 });
 });

 function geo_success(position) {
  printAddress(position.coords.latitude, position.coords.longitude);
  alert(position.coords.latitude + " " + position.coords.longitude)
 }

  // use Google Maps API to reverse geocode our location
   function printAddress(latitude, longitude) {
 // set up the Geocoder object
  var geocoder = new google.maps.Geocoder();

 // turn coordinates into an object
 var yourLocation = new google.maps.LatLng(latitude, longitude);

 // find out info about our location
 geocoder.geocode({ 'latLng': yourLocation }, function (results, status) {
     if (status == google.maps.GeocoderStatus.OK) {
         if (results[0]) {
             $('body').append('<p>Your Address:<br />' +
                 results[0].formatted_address + '</p>');
         } else {
             error('Google did not return any results.');
         }
     } else {
         error("Reverse Geocoding failed due to: " + status);
     }
 });

 }
 } 
```

结果永远不会来自手机 GPS。它确实要求允许跟踪该位置。它确实返回本地区域周围的随机位置。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T22:21:56.277

简单的回答，没有回答，所有手机都以不同的方式对待这个问题。我发现强制gps的唯一方法是在本机应用程序中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:22:51.840

这取决于设备。您会发现许多设备实际上确实返回了正确的位置。

您可能会注意到，当 GPS 初始化时，它并没有从卫星上得到很好的修复，而是为您提供最后已知的位置、基于网络数据的位置或基于有限卫星数据的位置。

也可以将某些设备配置为仅共享一个“粗略”的位置，这并不像它可能的那样具体或准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:24:58.433

大多数智能手机都有不止一种定位方式，例如用于高精度（精细）定位的 GPS 和用于低精度（粗略）定位的蜂窝塔定位。在您的成功函数中返回的位置上，您应该得到一个准确度的估计值`coords.accuracy`。

进行位置查询时，您可以通过指定请求高精度响应`enableHighAccuracy = true`：

```
 navigator.geolocation.getCurrentPosition(geo_success, geo_error,
       {enableHighAccuracy = true}); 
```

请注意，这可能并不总是有效，因为某些设备不允许您访问高精度定位（出于多种考虑，其中之一是 GPS 定位会影响电池使用）。

# c# - SOA，从数据库中检索 DTO

> ID：13539859
> 
> 赞同：1
> 
> 时间：2012-11-24T09:13:48.483
> 
> 标签：c#, asp.net-mvc, wcf, architecture, soa

我想为我的项目使用 SOA 环境。我有几个要求：
1\. 网站`Asp.Net MVC 4`
2\. 网站的 CMS -`Asp.Net MVC`或`Silverlight`.
3.移动应用- `iOS, Android, WP`
4.另外，必须有`API`外部服务（支付终端，网站等，移动应用也可以使用这个API）

因此，我想使用`SOA`. 我有一个问题。

`DAOs`这些服务通过使用（数据访问对象）到数据库和从数据库中保存和检索业务对象来协调业务对象和数据访问对象之间的交互。而且，我必须将实体转换为`DTO`，反之亦然。例如，我可以`Autommaper`为此使用。但是，我担心性能。

例如，我们在存储库中有返回订单信息的方法。有`Order`很多`FK`其他表。但是，我只需要两张桌子。生成的 sql 包含许多`join`用于所有引用的表。然后我们将此订单实体转换为 DTO。

问题：如何或我需要使用什么来生成查询，它将是轻量级的并且包含仅需要的字段`DTO`？我必须要使用`ExpressionTrees`或其他的东西，有一些例子或库？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:16:51.803

看起来你需要一个 ORM 工具。 [http://www.fluentnhibernate.org/](http://www.fluentnhibernate.org/)很好。如果您想继续使用 .NET，您可以使用实体框架（但我不是这方面的专家）。

# c# - 单击富文本框中的链接后如何打开新的浏览器窗口（C#）

> ID：13539864
> 
> 赞同：2
> 
> 时间：2012-11-24T09:14:08.470
> 
> 标签：c#, .net, winforms, url, richtextbox

我有一个 twitter 应用程序，它检索用户时间线并将其附加到富文本框中。但是，当我单击链接时没有任何反应？

这里的问题是富文本框不会自动处理使用指定链接创建新的浏览器窗口。如果没有，那么我该如何实现这样的功能？

我正在使用winforms。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T09:40:00.163

首先，您已将**DetectUrls 属性**设置为***True***

然后

```
RichTextBox1_LinkClicked(System.Object sender, System.Windows.Forms.LinkClickedEventArgs e)
{
    Process.Start(e.LinkText);
    //open link with default application
} 
```

另请参阅[此](http://social.msdn.microsoft.com/Forums/en-HK/vbpowerpacks/thread/b9433f73-43a9-4f09-aa8b-0d4204b2a9b0)链接了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:23:37.333

什么对我有用：

```
Process.Start("http://www.example.com/"); 
```

这将在用户默认浏览器中打开链接。

# php - 无法联系表格 php 文件不起作用（Jquery 神奇联系表格 - tutsgeek）

> ID：13539865
> 
> 赞同：-1
> 
> 时间：2012-11-24T09:14:09.347
> 
> 标签：php, forms, sendmail, contact-form

我有一个与 jquery 一起使用的表单，这个表单是：

这个下载链接是

[http://www.4shared.com/rar/qkIP2Ulb/magical-contact-form.html](http://www.4shared.com/rar/qkIP2Ulb/magical-contact-form.html)

```
<form class="fcf-contact-form" action="mail.php" method="post">

     <div class="right">

         <input type="text" name="name" id="name" class="input">

         <input type="text" name="email" id="email" class="input">

         <div class="left">           
            <textarea name="message" cols="0" rows="5" class="textarea"></textarea>
            <input type="submit" name="submit" value="Send message !" class="submit"/>
         </div>

     </div>

</form> 
```

和 mail.php 文件代码是该代码：

```
<?php
   $name = $_POST['name'];
   $email = $_POST['email'];
   $phone = $_POST['message'];
   $formcontent=" From: $name \n Phone: $phone \n email: $email \n message: $message";
   $recipient = "milad.esmailzade@yahoo.com";
   $subject = "Contact Form";
   $mailheader = "From: $email \r\n";
   mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
   echo "<a href='your page link here.php' style='text-decoration:none;color:#ff0099;'></a>";
?> 
```

我在主机上上传了这个联系表格，当我点击发送时，我没有收到来自这个表格的电子邮件！问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:20:46.887

您必须询问您的托管技术支持为什么PHP邮件功能不起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:32:21.633

尝试设置 SMTP 和用户参数，如下所示：

```
ini_set("SMTP","mail.mydomain.com" ); // or the IP
ini_set('sendmail_from', 'Me@mydomain.com'); // Account used to deliver the messages. 
```

# python - 使用 sharex=True 绘制日期会导致 ValueError: ordinal must be >= 1

> ID：13539868
> 
> 赞同：13
> 
> 时间：2012-11-24T09:14:34.023
> 
> 标签：python, numpy, matplotlib

在进行一些分析时，我偶然发现了一个 ValueError，我可以将其归结为以下简单示例，该示例可以重现我得到的错误：

```
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

x = np.array([dt.datetime(2012, 10, 19, 10, 0, 0),
              dt.datetime(2012, 10, 19, 10, 0, 1),
              dt.datetime(2012, 10, 19, 10, 0, 2),
              dt.datetime(2012, 10, 19, 10, 0, 3)])

y = np.array([1, 3, 4, 2]) 
```

在尝试绘制这个简单的 x 和 y 数组时，我没有遇到以下问题：

```
fig, ax = plt.subplots()
ax.plot(x, y) 
```

或者

```
fig, (ax1, ax2) = plt.subplots(nrows=2)
ax1.plot(x, y) 
```

但是在添加时`sharex=True`，我得到一个错误：

```
fig, (ax1, ax2) = plt.subplots(nrows=2, sharex=True)
ax1.plot(x, y) 
```

错误信息：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\matplotlib\backend_bases.py", line 2445, in home
    self._update_view()
  File "C:\Python27\lib\site-packages\matplotlib\backend_bases.py", line 2818, in _update_view
    self.draw()
  File "C:\Python27\lib\site-packages\matplotlib\backend_bases.py", line 2796, in draw
    loc.refresh()
  File "C:\Python27\lib\site-packages\matplotlib\dates.py", line 758, in refresh
    dmin, dmax = self.viewlim_to_dt()
  File "C:\Python27\lib\site-packages\matplotlib\dates.py", line 530, in viewlim_to_dt
    return num2date(vmin, self.tz), num2date(vmax, self.tz)
  File "C:\Python27\lib\site-packages\matplotlib\dates.py", line 289, in num2date
    if not cbook.iterable(x): return _from_ordinalf(x, tz)
  File "C:\Python27\lib\site-packages\matplotlib\dates.py", line 203, in _from_ordinalf
    dt = datetime.datetime.fromordinal(ix)
ValueError: ordinal must be >= 1 
```

我从 matplotlib ( [https://github.com/matplotlib/matplotlib/issues/162](https://github.com/matplotlib/matplotlib/issues/162) ) 中发现了一个关于使用`twinx`with dates 给出相同错误的问题。是同一个bug吗？这似乎是一个长期已知的错误，但尚未解决。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T10:33:30.277

如果您在第二个轴上绘制一些东西，则可以避免该错误：

```
import matplotlib.pyplot as plt
import numpy as np
import datetime as dt

x = np.array([dt.datetime(2012, 10, 19, 10, 0, 0),
              dt.datetime(2012, 10, 19, 10, 0, 1),
              dt.datetime(2012, 10, 19, 10, 0, 2),
              dt.datetime(2012, 10, 19, 10, 0, 3)])

y = np.array([1, 3, 4, 2])

fig, (ax1, ax2) = plt.subplots(nrows = 2, sharex = True)
ax1.plot(x, y, 'b-')
ax2.plot(x, 1.0/y, 'r-')
plt.show() 
```

# c# - 串口读取 C# 控制台

> ID：13539869
> 
> 赞同：2
> 
> 时间：2012-11-24T09:14:47.333
> 
> 标签：c#, console, serial-port

大家好，我是新来的，我听说过很多关于这个网站的信息，它真的对你有帮助。希望你能帮助我！

我有一个非常简单的程序，它的唯一目的是从串行端口读取并在 C# 的控制台窗口上打印 2000 次。

我只是在微控制器上打开一个可变电阻，仅此而已

下面是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO.Ports;

namespace Testing_serial_v3._0
{
    class Program
    {
        static void Main(string[] args)
        {

            string buff;

            SerialPort port = new SerialPort("COM4", 9600, Parity.None, 8, StopBits.One);
            port.Open();

            for (int i = 0; i < 2000; i++)
            {

                buff = port.ReadLine();
                Console.WriteLine(buff);
                //Console.ReadLine();
            }
        }
    }
} 
```

但是这段代码中发生了一件有趣的事情。当控制台 readline 被注释时，如上面的代码所示，当我转动可变电阻器的旋钮时，端口的值会发生变化。所以这意味着它运行良好。另一方面，如果我使 readline 发生，以便在每个值之后我必须按下一个键，端口读取当前值，即使我改变旋钮并再次按下 enter，该值仍将保持第一个，就好像它没有重置一样有吗？

您是否必须包含任何其他命令行才能重置端口？

希望您了解我的问题以及您需要了解的任何其他问题，请不要犹豫，我真的需要尽快解决此问题。非常感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:31:58.993

您还可以使用任务在单独的线程中读取它并在那里观察它，就像@Marc Gravel 提到的那样。您只需要等到任务完成或按回车键手动取消它。只是将任务卸载到另一个线程的另一个示例。

这是一个例子：

```
using System;
using System.IO;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ReadStreamAsyncTask
{
    internal class Program
    {
        private static CancellationToken _cancelTaskSignal;
        private static byte[] _serialPortBytes;
        private static MemoryStream _streamOfBytesFromPort;
        private static CancellationTokenSource _cancelTaskSignalSource;

        private static void Main()
        {
            _serialPortBytes = Encoding.ASCII.GetBytes("Mimic a bunch of bytes from the serial port");
            _streamOfBytesFromPort = new MemoryStream(_serialPortBytes);
            _streamOfBytesFromPort.Position = 0;

            _cancelTaskSignalSource = new CancellationTokenSource();
            _cancelTaskSignal = _cancelTaskSignalSource.Token; // Used to request cancel the task if needed.

            var readFromSerialPort = Task.Factory.StartNew(ReadStream, _cancelTaskSignal);
            readFromSerialPort.Wait(3000); // wait until task is complete(or errors) OR 3 seconds

            Console.WriteLine("Press enter to cancel the task");
            _cancelTaskSignalSource.Cancel();
            Console.ReadLine();
        }

        private static void ReadStream()
        {
            // start your loop here to read from the port and print to console

            Console.WriteLine("Port read task started");

            int bytesToReadCount = Buffer.ByteLength(_serialPortBytes);
            var localBuffer = new byte[bytesToReadCount];

            int bytesRead = 0;

            bool finishedReading = false;

            try
            {
                while (!finishedReading)
                {
                    _cancelTaskSignal.ThrowIfCancellationRequested();

                    bytesRead += _streamOfBytesFromPort.Read(localBuffer, 0, bytesToReadCount);

                    finishedReading = (bytesRead - bytesToReadCount == 0);
                }
            }
            catch (TaskCanceledException)
            {
                Console.WriteLine("You cancelled the task");
            }

            Console.WriteLine(Encoding.ASCII.GetString(localBuffer));
            Console.WriteLine("Done reading stream");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T09:30:47.960

通过端口的数据是一个流——当你阅读时，你正在逐渐消耗这个流。您没有看到“最新值”，而是看到“流中的下一个值”。添加读取行时，会添加延迟，这意味着有大量数据积压。并不是说“它保持不变”......只是你还没有读到最后（以及最近的值）。

在许多情况下，最好通过异步回调处理网络 IO，以便从流中读取值不会像人类数据输入那样受到延迟。不过，这可能涉及一些线程知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T10:02:47.530

您正在从微控制器向串口发送数千个数据（例如延迟为 1ms），这使得串口的缓冲区充满了相同的值！如果您按回车键逐个阅读，则您正在阅读第一个收到的...

我认为如果您想通过“Enter”键读取计算机中的数据，您应该通过按钮从微控制器发送日期！这意味着您通过电阻设置值，按下按钮，微型将“一个字节”发送到计算机。你在电脑上按回车，让你的电脑从串口读取“一个字节”！

还对您的代码进行了一些修改：

```
static void Main(string[] args)
{
    int buff;  // string to int

    SerialPort port = new SerialPort("COM4", 9600, Parity.None, 8, StopBits.One);
    port.Open();

    for (int i = 0; i < 2000; i++)
    {
        Console.ReadLine();  // wait for the Enter key
        buff = port.ReadByte();  // read a byte
        Console.WriteLine(buff);
    }
} 
```

我希望这对你有用！:)

# java - 动态将 KB 转换为 MB、GB、TB

> ID：13539871
> 
> 赞同：19
> 
> 时间：2012-11-24T09:15:26.720
> 
> 标签：java, int, double, division, operation

```
public String size(int size){
    String hrSize = "";
    int k = size;
    double m = size/1024;
    double g = size/1048576;
    double t = size/1073741824;

    DecimalFormat dec = new DecimalFormat("0.00");

    if (k>0)
    {

        hrSize = dec.format(k).concat("KB");

    }
    if (m>0)
    {

        hrSize = dec.format(m).concat("MB");
    }
    if (g>0)
    {

        hrSize = dec.format(g).concat("GB");
    }
    if (t>0)
    {

        hrSize = dec.format(t).concat("TB");
    }

    return hrSize;
    } 
```

这是一个应该以 GB、MB、KB 或 TB 为单位返回大小的方法。输入值以 KB 为单位。例如 1245 的结果应该是 1.21MB，但我得到的是 1.00MB。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-12-13T00:05:15.427

修改版。只调用一次格式。包括“字节”。

```
public static String formatFileSize(long size) {
    String hrSize = null;

    double b = size;
    double k = size/1024.0;
    double m = ((size/1024.0)/1024.0);
    double g = (((size/1024.0)/1024.0)/1024.0);
    double t = ((((size/1024.0)/1024.0)/1024.0)/1024.0);

    DecimalFormat dec = new DecimalFormat("0.00");

    if ( t>1 ) {
        hrSize = dec.format(t).concat(" TB");
    } else if ( g>1 ) {
        hrSize = dec.format(g).concat(" GB");
    } else if ( m>1 ) {
        hrSize = dec.format(m).concat(" MB");
    } else if ( k>1 ) {
        hrSize = dec.format(k).concat(" KB");
    } else {
        hrSize = dec.format(b).concat(" Bytes");
    }

    return hrSize;
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-24T09:16:40.153

你在表演`integer division`。所以除法的结果也是`integer`。小数部分被截断。

```
so, 1245 / 1024 = 1 
```

将您的部门更改为`floating point division`： -

```
double m = size/1024.0;
double g = size/1048576.0;
double t = size/1073741824.0; 
```

另外，你的比较是错误的。您应该与 进行比较`1`。

```
if (m > 1), if (t > 1), if (g > 1) 
```

理想情况下，我会将您的比较更改为：-

```
 if (t > 1) {
        hrSize = dec.format(t).concat("TB");
    } else if (g > 1) {
        hrSize = dec.format(g).concat("GB");
    } else if (m > 1) {
        hrSize = dec.format(m).concat("MB");
    } else {
        hrSize = dec.format(size).concat("KB");
    } 
```

您需要先与较高的单位比较，然后再移动到较低的单位。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-27T14:32:58.050

我喜欢这个：

```
public static String getDynamicSpace(long diskSpaceUsed)
{
    if (diskSpaceUsed <= 0) {
        return "0";
    }

    final String[] units = new String[] { "B", "KiB", "MiB", "GiB", "TiB" };
    int digitGroups = (int) (Math.log10(diskSpaceUsed) / Math.log10(1024));
    return new DecimalFormat("#,##0.#").format(diskSpaceUsed / Math.pow(1024, digitGroups))
            + " " + units[digitGroups];
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-24T09:17:33.993

问题是您使用的是整数除法。将您的代码更改为：

```
double m = size/1024.0;
double g = size/1048576.0;
double t = size/1073741824.0; 
```

在您的原始代码中，`double m = size/1024`将整数`size`除以`1024`，将结果截断为整数，然后才将其转换为`double`. 这就是小数部分丢失的原因。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-24T09:17:35.807

您正在执行整数除法，

即，31/15 将导致 2，而不是 2.whatever

只需将数字附加`D`或`d`表示为双精度即可

```
double m = size/1024D;
double g = size/1048576D;
double t = size/1073741824D; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-05T14:06:43.217

要做到这一点并不容易。Rohit Jain 提到了整数运算。舍入也可能是一个问题，因为总是向下舍入可能是不可取的。我建议去寻找一个可用的解决方案，比如在[triava](https://github.com/trivago/triava)库中。

它可以在 3 种不同的系统（SI、IEC、JEDEC）和各种输出选项中以任意精度格式化数字。以下是[triava 单元测试](https://github.com/trivago/triava/blob/master/src/test/java/com/trivago/triava/util/UnitToolsTest.java)中的一些代码示例：

```
UnitFormatter.formatAsUnit(1126, UnitSystem.SI, "B");
// = "1.13kB"
UnitFormatter.formatAsUnit(2094, UnitSystem.IEC, "B");
// = "2.04KiB" 
```

打印精确的公斤、兆值（此处为 W = 瓦特）：

```
UnitFormatter.formatAsUnits(12_000_678, UnitSystem.SI, "W", ", ");
// = "12MW, 678W" 
```

您可以传递 DecimalFormat 来自定义输出：

```
UnitFormatter.formatAsUnit(2085, UnitSystem.IEC, "B", new DecimalFormat("0.0000"));
// = "2.0361KiB" 
```

对于公斤或兆值的任意操作，您可以将它们拆分为组件：

```
UnitComponent uc = new  UnitComponent(123_345_567_789L, UnitSystem.SI);
int kilos = uc.kilo(); // 567
int gigas = uc.giga(); // 123 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-07T13:30:35.747

```
class ConverterUtils{
    public static void main(String[] args) {
        System.out.println(getSize(1234567));
    }
    public static String getSize(long size) {
        String s = "";
        double kb = size / 1024;
        double mb = kb / 1024;
        double gb = mb / 1024;
        double tb = gb / 1024;
        if(size < 1024L) {
            s = size + " Bytes";
        } else if(size >= 1024 && size < (1024L * 1024)) {
            s =  String.format("%.2f", kb) + " KB";
        } else if(size >= (1024L * 1024) && size < (1024L * 1024 * 1024)) {
            s = String.format("%.2f", mb) + " MB";
        } else if(size >= (1024L * 1024 * 1024) && size < (1024L * 1024 * 1024 * 1024)) {
            s = String.format("%.2f", gb) + " GB";
        } else if(size >= (1024L * 1024 * 1024 * 1024)) {
            s = String.format("%.2f", tb) + " TB";
        }
        return s;
    }
} 
```

为了更好地理解 - [https://www.techspot.com/news/68482-quickly-convert-between-storage-size-units-kb-mb.html](https://www.techspot.com/news/68482-quickly-convert-between-storage-size-units-kb-mb.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-20T13:13:22.960

```
public class FileSizeCalculator {

    String[] fileSizeUnits = {"bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"};

    public static void main(String[] args) {
        FileSizeCalculator fs = new FileSizeCalculator();
        String properFileSize = fs.calculateProperFileSize(2362232012l);
        System.out.println("Proper file size: " + properFileSize);
    }

    public String calculateProperFileSize(long noOfBytes){
        String sizeToReturn = "";// = FileUtils.byteCountToDisplaySize(bytes), unit = "";
        double bytes = noOfBytes;
        int index = 0;
        for(index = 0; index < fileSizeUnits.length; index++){
            if(bytes < 1024){
                break;
            }
            bytes = bytes / 1024;
        }
        sizeToReturn = String.valueOf(bytes) + " " + fileSizeUnits[index];
        return sizeToReturn;
    }
} 
```

只需添加更多文件单元（如果缺少），您将看到单元大小达到该单元（如果您的文件有那么长）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-09T18:23:53.837

[比克斯特的答案](https://stackoverflow.com/a/20556766/6181476)工作得很好，但问题是它返回的结果类似于`45.00 Bytes`and `12.00 KB`。我认为，如果最后一个十进制数字为零，则应删除它们。因此，您将得到and 而不是 and `45.00 Bytes`（注意已更改为。这只是为了统一，因为我们有 KB、MB 等，而不是千字节、兆字节等）。`12.00 KB``45 B``12 KB``Bytes``B`

```
private boolean isDouble(double value) {
        if (value % 1 == 0) {
            Log.d(TAG, "value is " + value + " and is not double");
            return false;
        } else {
            Log.d(TAG, "value is " + value + " and is double");
            return true;
        }
    } 
```

上面的方法只是检查值是否有零作为十进制数字。

```
private String formatFileSize(long size) {
        String hrSize = null;
        double b = size;
        double k = size/1024.0;
        double m = ((size/1024.0)/1024.0);
        double g = (((size/1024.0)/1024.0)/1024.0);
        double t = ((((size/1024.0)/1024.0)/1024.0)/1024.0);

        DecimalFormat dec1 = new DecimalFormat("0.00");
        DecimalFormat dec2 = new DecimalFormat("0");
        if (t>1) {
            hrSize = isDouble(t) ? dec1.format(t).concat(" TB") : dec2.format(t).concat(" TB");
        } else if (g>1) {
            hrSize = isDouble(g) ? dec1.format(g).concat(" GB") : dec2.format(g).concat(" GB");
        } else if (m>1) {
            hrSize = isDouble(m) ? dec1.format(m).concat(" MB") : dec2.format(m).concat(" MB");
        } else if (k>1) {
            hrSize = isDouble(k) ? dec1.format(k).concat(" KB") : dec2.format(k).concat(" KB");
        } else {
            hrSize = isDouble(b) ? dec1.format(b).concat(" B") : dec2.format(b).concat(" B");
        }
        return hrSize;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-28T08:37:59.823

我的基本版本（你可以定义一些常量而不是一直计算 POW）：

```
public static String GetFolderSizeHuman(long aBytes)
{
  if (aBytes < 1024 * 1024) 
    return aBytes + " KB";
  else if (aBytes < Math.pow(2, 20) * 1024)
    return (int) aBytes / Math.pow(2, 20) + " MB";
  else if (aBytes < Math.pow(2, 30) * 1024 )
    return kGbTbFormatter.format(aBytes / Math.pow(2, 30)) + " GB";
  else if (aBytes < Math.pow(2, 40) * 1024)
    return kGbTbFormatter.format(aBytes / Math.pow(2, 40)) + " TB";

  else return "N/A (1TB?)";
} 
```

# jquery - 使用 Jquery 在 IE 8 和 7 中“权限被拒绝”

> ID：13539877
> 
> 赞同：4
> 
> 时间：2012-11-24T09:15:56.770
> 
> 标签：jquery, asp.net, internet-explorer, jquery-plugins

我正在创建一个 jquery 插件。这在 chrome、Mozilla 和 IE 9 中运行良好，但在 IE 8/7 中，我在“$ctxObj.control2.val(opt.topicDefaultText);”行出现 Permission denied 错误

![IE控制台](../Images/9c7830b4595a73e4883aa53ea0d8d8de.png)

```
Test.Plugin = function () {
var $ctxObj = {};
var opt = {};
var initEvents = function() {

    $ctxObj.control2.val(opt.topicDefaultText);

    $ctxObj.control2.on('click', function (e) {
        somefunction();
    });

    $ctxObj.control1.on('click',function(){
 anotherfunction();
    });
};
return {
    init: function (options) {
        var defaultOptions = {
            control1: '#control1',
            control2: '#control2',
            topicDefaultText:'test'
        };
        opt = $.extend({}, defaultOptions, options);
        $ctxObj.control1 = $(opt.control1);
        $ctxObj.control2 = $(opt.control2);
        initEvents();
    }
}; 
```

} ();

如果我为每个控件声明一个变量，如下所示：

var $control1 =$('#control1');

var $control2 =$('#control2');

然后使用代码

```
 $control2.val(opt.topicDefaultText);

    $control2.on('click', function (e) {
        somefunction();
    });

    $control1.on('click',function(){
      anotherfunction();
    }); 
```

使用上面的代码我在 IE 中没有收到任何错误，但是在这个插件中我有很多控件，所以我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:26:16.203

IE 对 jQuery 有很大的问题。当我在其上测试 jQuery 时，我的 IE9 总是告诉我启用 ActiveX 控件。尝试告诉您的 IE 用户启用 ActiveX 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:05:47.347

确保设置了所有对象属性，并且您实际上有权访问它们。

# android - 如何通过单击 webview 中加载的 html 页面上的按钮来启动新的 Activity？

> ID：13539878
> 
> 赞同：2
> 
> 时间：2012-11-24T09:16:05.837
> 
> 标签：android

我想通过单击已在 webview 中加载的 html 页面上的按钮来启动 Activity。我尝试使用以下代码使用 html 文件加载 webview 实例并创建一个界面，以便可以使用 html 页面中的 javascript 访问它。

```
public void UpdateWebViewClientWithURL(String url)
{ 
WebView.enablePlatformNotifications();
WebView myWebView = (WebView) findViewById(R.id.webview);

WebSettings webSettings = myWebView.getSettings();
webSetings.setJavaScriptEnabled(true);
myWebView.addJavascriptInterface(new CommonLibrary(this.getApplicationContext()),    "Android"); 

myWebView.loadUrl(url);
} 
```

html 页面中的 Javascript 看起来像这样

```
<script type="text/javascript">
    function showAndroidToast() {
        Android.launchActivity();
    }
</script> 
```

现在在 CommonLibrary 类文件中，我定义了以下函数来午餐新活动

```
public void launchActivity()
{
Intent myIntent = new Intent(mContext, testactivity.class);
mContext.startActivity(myIntent);
} 
```

通过所有这些设置，我每次单击按钮时都会看到应用程序崩溃。我知道有办法，但我搜索了所有可能的方法，谁能帮我理解这里有什么问题，或者我如何通过简单的例子来实现这一点？感谢您的帮助和时间！

# php - 如何获得图像的快速 ajax 响应

> ID：13539879
> 
> 赞同：-1
> 
> 时间：2012-11-24T09:16:06.397
> 
> 标签：php, ajax, image, jquery, optimization

我有一个大数据库来从 Ajax 响应中获取动态图像。我怎样才能让它快如闪电

图像采用逗号分隔形式，例如

**img4.jpg、img3.jpg、img5.jpg、img7.jpg、img11.jpg、img1.jpg、img2.jpg、img3.jpg、img6.jpg、img8.jpg**

我的 php 代码。

```
function childImgsGrid(){

        $parentImgId = $_POST['parentImgId'];

        $query = mysql_query("select child_imgs_id,child_imgs from parent where parent_img_id = $parentImgId") 
                or die(mysql_error());

        $result = mysql_fetch_array($query);
        $arrayOfImages = explode(",", $result['child_imgs']);
        $i=1;
        foreach($arrayOfImages as $nameOfImage){

            echo "<li><a href='#lookbook' ><div class='view'><img src='images/slide/".$nameOfImage."'></a></li>";

        }
    } 
```

对于阿贾克斯

```
var parentImgId = $anchor.attr("id");

                var dataString = 'queryString=childImgsGrid'+'&parentImgId='+parentImgId; 

                var arrayOfImages = new Array();

                $glob.ajax({
                    type: "POST",
                    url: "ajaxtemplate.php",
                    data: dataString,                   
                    cache: false,
                    success: function(response) {
                        $glob('#grid').html(response);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:23:49.237

总的来说，这是一个非常广泛的话题，但我会尝试对此事进行一些说明。

1.  图片的优化版本

    与 Facebook 一样，添加图像后，您可以使用后台作业来创建图像的低质量版本。当请求图像时，会显示此低质量图像，同时在后台加载原始高质量图像。一旦完成加载，只需更换。

2.  预加载

    如果您知道或知道需要显示哪些图像（画廊中的常见情况是预加载接下来的 2 或 3 张图像），您可以在无需用户输入的情况下获取它们。因此，当用户打开图像 #443 时，您会在后台将其与 #444、#445 一起加载。

3.  使用内存存储

    如果数据库记录非常大，并且假设您将图像保存在文件系统中而不是作为数据库中的 blob，并且检索基于唯一键（主键或其他键），您可以实现 memcache 或 redis 之类的东西，以便查询非常快。

4.  节点.js

    如果图像请求的数量变得非常多，请考虑使用像 node.js 这样的异步服务器响应架构。

特定的用例和技术将改变上述每一个的实现，但整体概念应该是可靠的。

# mysql - Mysql查询删除距另一个日期超过30天的DATE

> ID：13539880
> 
> 赞同：2
> 
> 时间：2012-11-24T09:16:24.387
> 
> 标签：mysql, date

您好我正在尝试创建一个查询，以删除所有记录为 2012/11/10 之前 30 天的数据。我不知道该怎么做，因为我能想到的就是

```
DELETE FROM fines
WHERE 
fTime < (2012-11-10, INTERVAL 30 DAY) 
```

但是，这给了我错误 1292 不正确的日期值

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:21:36.307

尝试

```
DELETE FROM fines
WHERE 
fTime < ('2012-11-10' - INTERVAL 30 DAY) 
```

[http://sqlfiddle.com/#!2/d41d8/4099](http://sqlfiddle.com/#!2/d41d8/4099)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T09:21:59.410

尝试这个：

```
 delete from fines where ftime < DATE_SUB("2012-11-10" , INTERVAL 30 DAY) 
```

[http://sqlfiddle.com/#!2/d41d8/4100](http://sqlfiddle.com/#!2/d41d8/4100)

# php - 表格行数混淆 PHP Foreach 数组

> ID：13539885
> 
> 赞同：-1
> 
> 时间：2012-11-24T09:17:05.963
> 
> 标签：php, arrays, multidimensional-array, foreach, html-table

我有这样的数组

```
Array  ([0] => 8 [1] => 8 [2] => 1 [3]=> 7 [4] => 8 ) 
```

我在 PHP 上使用 ForEach 用上面的数组形成了表格行。但是当您查看上面的数组时，将在第 3 行创建 7 个 TD，在第 4 行创建 8 个 TD。我需要在行首移动第三行的空白 TD，而不是在行尾显示它。这可能吗？

```
<table border="1"><tbody>
  <tr align="right">
    <td align="right" colspan="0" rowspan="0" id="td_02">02</td>
    <td align="right" colspan="0" rowspan="0" id="td_06">06</td>
    <td align="right" colspan="0" rowspan="0" id="td_10">10</td>
    <td align="right" colspan="0" rowspan="0" id="td_14">14</td>
    <td align="right" colspan="0" rowspan="0" id="td_18">18</td>
    <td align="right" colspan="0" rowspan="0" id="td_22">22</td>
    <td align="right" colspan="0" rowspan="0" id="td_26">26</td>
    <td align="right" colspan="0" rowspan="0" id="td_30">30</td>
  </tr>
  <tr align="right">
    <td align="right" colspan="0" rowspan="0" id="td_01">01</td>
    <td align="right" colspan="0" rowspan="0" id="td_05">05</td>
    <td align="right" colspan="0" rowspan="0" id="td_09">09</td>
    <td align="right" colspan="0" rowspan="0" id="td_13">13</td>
    <td align="right" colspan="0" rowspan="0" id="td_17">17</td>
    <td align="right" colspan="0" rowspan="0" id="td_21">21</td>
    <td align="right" colspan="0" rowspan="0" id="td_25">25</td>
    <td align="right" colspan="0" rowspan="0" id="td_29">29</td>
  </tr>
  <tr align="right">
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
    <td>XX</td>
  </tr>
  <tr align="right">
    <td align="right" colspan="0" rowspan="0" id="td_03">03</td>
    <td align="right" colspan="0" rowspan="0" id="td_07">07</td>
    <td align="right" colspan="0" rowspan="0" id="td_11">11</td>
    <td align="right" colspan="0" rowspan="0" id="td_15">15</td>
    <td align="right" colspan="0" rowspan="0" id="td_19">19</td>
    <td align="right" colspan="0" rowspan="0" id="td_23">23</td>
    <td align="right" colspan="0" rowspan="0" id="td_27">27</td>
  </tr>
  <tr align="right">
    <td align="right" colspan="0" rowspan="0" id="td_31">31</td>
    <td align="right" colspan="0" rowspan="0" id="td_04">04</td>
    <td align="right" colspan="0" rowspan="0" id="td_08">08</td>
    <td align="right" colspan="0" rowspan="0" id="td_12">12</td>
    <td align="right" colspan="0" rowspan="0" id="td_16">16</td>
    <td align="right" colspan="0" rowspan="0" id="td_20">20</td>
    <td align="right" colspan="0" rowspan="0" id="td_24">24</td>
    <td align="right" colspan="0" rowspan="0" id="td_28">28</td>
  </tr>
</tbody></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:24:52.157

我完全不知道您是如何生成表格的，但是..

避免“空白”td 问题的一种方法是确保所有行都具有相同数量的 td，这可以通过查找`max`数组的值来完成。

例如：

```
<?php
    $row_array = array(8, 8, 1, 7, 8);
    $num_tds = max($row_array);
?>
<table border="1" cellpadding="3" cellspacing="3">
    <?php foreach($row_array as $row) : ?>
    <tr>
        <?php for ($i = 0; $i < $num_tds; $i++) : ?>
        <td>&nbsp;</td>
        <?php endfor; ?>
    </tr>
    <?php endforeach; ?>
</table> 
```

在没有实际看到您的代码的情况下，我只是提供了盲目的解决方案，但我希望它有所帮助。

# jquery - ResponsiveSlides：幻灯片在单击导航按钮时忽略暂停

> ID：13539887
> 
> 赞同：0
> 
> 时间：2012-11-24T09:17:26.357
> 
> 标签：jquery, jquery-plugins, slideshow

我使用[ResponsiveSlides](http://responsive-slides.viljamis.com/)创建幻灯片。当我启用自动滑动 ( `auto: true`)、导航 ( `nav: true`) 和悬停暂停( ) 时，我注意到了一个错误`pause: true`。

我遇到了这个问题：当我在导航按钮（下一个或上一个，放置在幻灯片上）上移动鼠标时，幻灯片停止并且因为 pause:true，所以没关系，但是当我单击按钮时，幻灯片开始滑动所有幻灯片（而不仅仅是一个）。

你有这个问题吗？

# c# - 创建通用 IList 方法

> ID：13539894
> 
> 赞同：1
> 
> 时间：2012-11-24T09:18:48.287
> 
> 标签：c#

是否可以创建一个通用的 IList 方法？这是我希望它的实现方式：

```
List<Entity1> lstEnt1 = _myClass.GenerateListFromXml<Entity1>(@"C\test.xml");
List<Entity2> lstEnt2 = _myClass.GenerateListFromXml<Entity1>(@"C\test.xml"); 
```

这是我到目前为止得到的：

```
 public List<XMLModule> RetrieveListFromXml(string appSetting, string module)
    {
        throw new NotImplementedException();
    } 
```

我想将其更改为`XMLModule`可以在实体中传递的通用的。

在这方面需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:21:37.283

```
public List<T> RetrieveListFromXml<T>(string appSetting, string module)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T09:21:48.313

很简单，只需使用通用 T 类型，然后决定内部行为。

```
public List<T> RetrieveListFromXml<T>(string appSetting, string module)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T09:26:26.267

你可以使用这样的东西（我忽略了你的 appSetting/module 参数，并基于你在顶部使用的 XML 文件路径）

```
 public static List<T> RetrieveListFromXml<T>(string xmlFilePath)
    {
        var serializer = new XmlSerializer(typeof(List<T>));
        object result;
        using (var stream = new FileStream(xmlFilePath, FileMode.Open))
        {
            result = serializer.Deserialize(new FileStream(xmlFilePath, FileMode.Open));
        }
        return (List<T>)result;
    } 
```

# django - 如何更改美味的时间格式

> ID：13539901
> 
> 赞同：3
> 
> 时间：2012-11-24T09:19:45.610
> 
> 标签：django, tastypie

我正在使用 Django 1.4.2 和 Tastypie 0.9.11 编写一个 API 服务器。

对于所有日期时间输出，我使用默认的 iso 8601 格式，例如：“2012-11-20T02:48:19+00:00”。但我想获得“2012-11-20T02:48:19Z”格式。如何在不自定义每个日期时间字段的情况下轻松完成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T02:07:54.320

[此页面http://django-tastypie.readthedocs.org/en/latest/serialization.html](http://django-tastypie.readthedocs.org/en/latest/serialization.html)中有一个名为 TASTYPIE_DATETIME_FORMATTING 的配置。但是，这为您提供了有限的选择（iso-8601 和 rfc-2822）。

您可以做的是为您的资源使用自定义序列化程序，例如

```
# models.py
class MyModel(models.Model):
    class Meta:
        verbose_name = 'my_model'

# api.py
from custom_serializer import MySerializer
class MyResource(ModelResource):
    class Meta:
        queryset = MyModel.objects.all()
        serializer = MySerializer()

#custom_serializer.py
from tastypie.serializers import Serializer
class MySerializer(Serializer):
    def format_datetime(self, data):
        return data.strftime("%Y-%m-%dT%H:%M:%SZ") 
```

这已在此处详细说明 - [http://django-tastypie.readthedocs.org/en/latest/serialization.html](http://django-tastypie.readthedocs.org/en/latest/serialization.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T21:37:36.613

格式化日期可能最好在模板中完成。但是，Tastypie 允许您使用[dehydrate 循环](http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-data-preparation)添加或修改 API 返回的字段。例如：

```
# models.py
class MyModel(models.Model):
    iso8601_date = models.DateTimeField()

    class Meta:
        verbose_name = 'my_model'

# api.py
class MyResource(ModelResource):
    class Meta:
        queryset = MyModel.objects.all()

    def dehydrate(self, bundle):
        # Your original field: bundle.data['iso8601_date']

        # Newly formatted field.
        bundle.data['new_date_format'] = '2012-11-20T02:48:19Z'
        return bundle 
```

现在，如果您发出 HTTP 请求，您应该会看到“new_date_format”的新行。

# mercurial - 如何在 mercurial 中推送到中央存储库？

> ID：13539924
> 
> 赞同：0
> 
> 时间：2012-11-24T09:22:22.540
> 
> 标签：mercurial, push, dvcs, tortoisehg

我在任何地方都找不到相关的线程，但可能这个重要的任务之前必须被问过很多次......

我有一个中央存储库，我从中克隆了一个本地存储库。现在我做了一些更改并提交到本地存储库。现在我需要将最终版本推送/提交到中央仓库。我该怎么做呢？

我使用 TortoiseHg 作为客户端。

当我右键单击时，在乌龟的上下文菜单中，我可以`Update`看到`Synchronize`. 我不确定这些是否适合我的工作。如果我选择`Update`我会看到一个`Update to`组合框`default`，`tip`等等。不确定这些是什么。当我选择 时`Synchronize`，我看到的只是处理远程存储库的（令人困惑的）选项。还是远程回购意味着中央/主服务器回购？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:04:15.680

1.  您可以拥有多个（任意）数量的远程存储库。
2.  Mercurial 是 DVCS（D - 分布式）。Central/Main 只是常规存储库，所有队友都将其用于中间代码存储（根据协议和工作流程）
3.  同步工具栏（在工具栏最右侧，启用后）是您最好的朋友

    *   屏幕截图中的 1 用于数据传输的操作按钮（阅读按钮提示/和 THG 帮助/）
    *   2 是定义的遥控器部分（在您的情况下，克隆后，您将只有*“默认”*别名），将对其执行选定（按按钮）操作

![在此处输入图像描述](../Images/7eb648283d12f559535d85f0cd049a72.png)

PS：从 CLI 来说要快得多：

```
cd REPO_DIR
hg push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:55:53.260

也许这有点晚了，但是......

如果您熟悉 subversion，请将 (mercurial) 更新视为 (subversion) 开关......并且 (mercurial) 将同步视为 (subversion) 签出和/或提交。

# php - 在 Chrome 中工作但在 Firefox 中不工作的代码

> ID：13539926
> 
> 赞同：1
> 
> 时间：2012-11-24T09:22:31.030
> 
> 标签：php

以下代码适用于 Chrome。但在 Firefox 中，提交步骤不起作用

```
<?php
if(!isset($_POST['submit'])){

?>
<form action="" method="post">
<b>ID:</b>
<input name="std_no" type="text" />
<input type="image" width="100" value="submit" name="submit" id="submit" src="images/butup.gif" alt="submit Button">
</form>

<?php 
} 
else {
    $id=$_POST['std_no'];
    echo $id;
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T09:31:57.753

问题是图像提交不发送名称“submit”它发送“submit_x”和“submit_y”

所以你应该检查

```
if (isset($_POST['submit_x']))... 
```

编辑：我对此进行了更多测试，它出现在 Firefox (16) 和 IE(7, 8, 9) 中，只有 x 和 y 被发送，而在 Chrome (23) 和 Safari (5.1) 中它也发送名称也与 x 和 y 一起。

所以最安全的方法是检查值是：`isset($_POST['name_x'])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:32:28.863

```
<?php
if(!isset($_POST['submit'])){
        $id=$_POST['std_no']; // put it here so whenever you click submit button
        echo $id; // $_POST is trigger

?>
<form action="/**input action**/" method="post">
<b>ID:</b>
<input name="std_no" type="text" />
<input type="image" width="100" value="submit" name="submit" id="submit" src="images/butup.gif" alt="submit Button">
</form> 
```

你应该输入`action=""; // the php page of your code or the page where you want to get the data sample page.php`

或试试这个

```
<?php echo htmlentities($_SERVER['PHP_SELF']); ?> // put in action 
```

# notepad++ - Notepad ++：将输入发送到正在运行的程序的脚本？

> ID：13539928
> 
> 赞同：1
> 
> 时间：2012-11-24T09:22:35.070
> 
> 标签：notepad++, nppexec

我使用此代码在 notepad++ 中编译和运行许多 .c 文件

```
NPP_SAVE
g++.exe -g "$(FULL_CURRENT_PATH)" 
a 
```

现在我想要的是每次编译和运行后，也会向程序发送一个输入。像下面的东西

```
NPP_SAVE
g++.exe -g "$(FULL_CURRENT_PATH)" 
a
28 10 1985 //this is the input to the program a 
```

*我有很多 .c 文件来检查它们在提供日期时是否给出正确的输出。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-16T11:02:41.900

使用 nppexec 从文件重定向输入的解决方案是使用 cmd

```
cmd /c g++ -o $(NAME_PART).exe $(FILE_NAME) && $(CURRENT_DIRECTORY)\$(NAME_PART).exe < input.txt 
```

# php - 将日期放入美国格式的临时表中

> ID：13539931
> 
> 赞同：0
> 
> 时间：2012-11-24T09:22:51.640
> 
> 标签：php, mysql

好的，所以我的代码创建了一个带有日期字段的临时表，然后从几个表中获取数据以写入临时表。

Cruises 表中的日期是一个日期时间字段，具有日月年和时间。

我想用美国格式写只有日期的临时表......

```
 $maketemp = "CREATE TEMPORARY TABLE temp(`sailingId` int NOT NULL,
        `live` varchar(1), `ship` varchar(20), `code` varchar(5), `title` varchar(255), 
        `sailDate` date,`fromport` varchar(255), `nights` varchar(3), `type` varchar(30), 
        `fare` varchar(5), `offerFare` varchar(5),`deposit` varchar(5))"; 

mysql_query( $maketemp, $connection ) or die ( "Sql error : " . mysql_error ( ) );

$inserttemp = "INSERT INTO temp SELECT cruises.id AS sailingId, live, cruises.ship AS ship, 
        cruises.code AS code, cruises.title AS title, DATE_FORMAT(cruises.departs, '%m-%d-%y') AS sailDate,
        cruises.fromport AS fromport, cruises.duration AS nights, fares_usa.type AS type,
        fares_usa.fare AS fare, fares_usa.offered AS offerFare, supplements_usa.deposit AS 
        deposit FROM cruises, fares_usa, supplements_usa WHERE live ='Y' AND 
        cruises.id = fares_usa.cruise_id AND fares_usa.cruise_id = supplements_usa.cruise_id";

mysql_query( $inserttemp, $connection ) or die ( "Sql error : " . mysql_error ( ) ); 
```

现在，当它以 CSV 格式出现时，日期字段要么是 0000-00-00，要么是过去的错误日期，例如 2001 年 3 月 13 日

我有点卡住了。。

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:30:45.723

检查[date_format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)文档或仅使用 PHP 对其进行格式化。

# wpf - WPF DataTemplates - 为什么呈现不同？

> ID：13539942
> 
> 赞同：1
> 
> 时间：2012-11-24T09:24:01.983
> 
> 标签：wpf, data-binding, mvvm

我为自己设计的一个非常基本的 WPF 练习遇到了一个奇怪的问题，即从 ViewModel 动态填充菜单。给定以下主窗口标记：

```
<Window x:Class="Demosne.Client.WPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525"
    xmlns:project="clr-namespace:Demosne.Client.WPF">
<Grid>
    <Menu Height="26" Name="menu1" VerticalAlignment="Top" HorizontalAlignment="Stretch" ItemsSource="{Binding MainMenuItems}">
        <Menu.ItemTemplate>                
            <HierarchicalDataTemplate >
                <MenuItem Header="{Binding Text, Mode=OneTime}" ItemsSource="{Binding MenuItems}"/>
            </HierarchicalDataTemplate>
        </Menu.ItemTemplate>
        <!--<MenuItem Header="File" />
        <MenuItem Header="Edit" />-->
    </Menu>
</Grid> 
```

和视图模型：

```
public class MainWindowViewModel
{
    private IList<MenuItemViewModel> _menuItems = new List<MenuItemViewModel>() 
    { 
        new MenuItemViewModel() { Text = "File" }, 
        new MenuItemViewModel() { Text = "Edit" } 
    };

    public IList<MenuItemViewModel> MainMenuItems
    {
        get 
        { 
            return _menuItems; 
        }
    }
}

    public class MenuItemViewModel
{      
    public string Text { get; set; }

    public IList<MenuItemViewModel> MenuItems 
    { 
        get 
        { 
            return _menuItems; 
        } 
    }

    private IList<MenuItemViewModel> _menuItems = new List<MenuItemViewModel>();
} 
```

我希望 GUI 能够*准确地*再现标记中两个注释掉的行的结果 - 两个 MenuItems 称为 File 和 Edit。

但是，绑定版本在鼠标悬停时表现异常：

标记版本：

![在此处输入图像描述](../Images/e01e5968fa9c36bc8dee880de0816108.png)

绑定版本：

![在此处输入图像描述](../Images/91e1efbc52156e45131cb45dda90a929.png)

为什么它们不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:12:41.067

你得到了有趣的结果，因为你并没有真正使用`HierarchicalDataTemplate`正确的方法。

当您在 Menu 上设置 itemssource 时，它​​将为集合中的每个对象创建一个 MenuItem，如果您还提供了`HierarchicalDataTemplate`一个 itemssource 集，它还将为该集合中的每个子对象创建 MenuItems，在等级制度。

在您的情况下，您自己在模板中添加了一个 MenuItem，这不是必需的。框架为您隐式创建这些项目。这导致菜单行为异常。

因此，要获得正确的结果，您应该执行以下操作：

```
<HierarchicalDataTemplate ItemsSource="{Binding MenuItems}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Text}" />
    </StackPanel>
</HierarchicalDataTemplate> 
```

**更新**
通过在某物上设置 DataTemplate，您是在告诉 WPF 您想要控制其每个项目的显示方式。

在这种情况下，使用 a `HierarchicalDataTemplate`，它是用于生成带标题的控件的模板。这种控件包含一个标题和一个项目集合。

当您将此类模板应用于对象时，您在模板中放入的任何内容都将用作标题，并且将通过将模板应用于集合集中的每个子对象作为 ItemsSource 来创建项目集合模板。因此它将递归地将模板应用于层次结构中的所有对象。

在您的示例中，您有一个菜单。您可以通过这样做来创建它：

```
<Menu ItemsSource="{Binding MainMenuItems}" /> 
```

它可以正常工作，但是由于您没有应用模板，因此要告诉它应该如何显示集合中的项目，它只会为 itemssource 中的每个对象创建一个 MenuItem 并调用`ToString()`它。然后，此值将用作 MenuItem 的 Header 属性。

由于这不是您想要的，您必须应用一个模板来告诉 WPF 您希望在隐式生成的 MenuItem 的标题中显示什么内容。

在我的示例中，我只是制作了一个包含 TextBlock 的模板，该模板绑定到 viewmodel 上的 Text 属性。

**更新 2**
如果您现在想在隐式创建的菜单项上设置属性，您必须通过`ItemContainerStyle`在`HierarchicalDataTemplate`. 此处定义的样式将应用于所有生成的菜单项。

因此，要将 MenuItem 的 Command 属性绑定到 viewmodel 上的 Command 属性，您可以执行以下操作：

```
<HierarchicalDataTemplate.ItemContainerStyle>
    <Style TargetType="MenuItem">
        <Setter Property="Command"
                Value="{Binding Command}" />
    </Style>
</HierarchicalDataTemplate.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:45:30.450

试试这个`HierarchicalDataTemplate`：

```
<HierarchicalDataTemplate>
    <MenuItem ItemsSource="{Binding MenuItems}">
        <MenuItem.Template>
             <ControlTemplate>
                    <TextBlock Text="{Binding Text, Mode=OneTime}" />
             </ControlTemplate>
         </MenuItem.Template>
     </MenuItem>
</HierarchicalDataTemplate> 
```

MenuItem ControlTemplate 示例（[msdn 链接](http://msdn.microsoft.com/en-us/library/ms747082%28v=vs.85%29.aspx)）

> Windows Presentation Foundation (WPF) 中的控件有一个 ControlTemplate，其中包含该控件的可视化树。您可以通过修改控件的 ControlTemplate 来更改控件的结构和外观。没有办法只替换控件的可视化树的一部分；要更改控件的可视化树，您必须将控件的 Template 属性设置为其新的完整 ControlTemplate。

好的，现在让我们看看可视化树。

如果我们有这样的事情：

```
<Menu Height="26" Grid.Row="1">
     <MenuItem Header="File" />
     <MenuItem Header="Edit" />
 </Menu> 
```

其可视化树如下所示：

![在此处输入图像描述](../Images/1d14a1f7b2d1b5f8dd4a5a3e036847ac.png)

好的，`MenuItem`与.`ContentPresenter``TextBlock`

如果我们有会发生什么`HierarchicalDataTemplate`？

```
 <Menu.ItemTemplate>                
            <HierarchicalDataTemplate >
                <MenuItem Header="{Binding Text, Mode=OneTime}" ItemsSource="{Binding MenuItems}"/>
            </HierarchicalDataTemplate>
  </Menu.ItemTemplate> 
```

让我们看看可视化树：

![在此处输入图像描述](../Images/35b06c043313272d754b4e05631ed5f1.png)

哇，这是什么？？？

因此，如果您不指定`ControlTemplate`of `MenuItem`，它本身就是`ContentPresenter`of `MenuItem`（您可以在第二个屏幕上看到）。`ControlTemplate`所以，`MenuItem`如果你想在`HierarchicalDataTemplate`（第一个屏幕）中使用它，你必须覆盖它。

下面是我的解决方案的可视化树：

![在此处输入图像描述](../Images/2a397d40a20de010ba9cd7b7e30a668b.png)

# android - 图像不适应屏幕类型

> ID：13539954
> 
> 赞同：0
> 
> 时间：2012-11-24T09:25:55.083
> 
> 标签：android, android-image

我正在开发一款安卓游戏。

我终于在模拟器之外的两台设备上安装了我的应用程序，并意识到即使我在“drawable-hdpi”、“...-mdpi”等文件夹中有不同大小的图像，它们的大小总是相同的。我的小部件（按钮、ImageViews）也是如此。

我想知道是否有另一种方法来适应不同的屏幕尺寸？我的游戏只是在使用图像时将它们作为位图加载，并在完成后卸载它们。

另外，即使我在布局 xml 中使用了“dip”，为什么我的小部件没有调整大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:46:20.963

当您使用 、 、 限定图像时`-hdpi`，`-mdpi`您`-ldpi`支持不同的密度。

如果您想区分屏幕尺寸，您必须使用 、 和 限定您的`-small`可`-normal`绘制`-large`对象`-xlarge`。

在[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)上有一篇关于此问题的文章，描述了屏幕尺寸、屏幕密度和分辨率。

# java - 带有表达式的 JSF 2.0 是一个方法错误

> ID：13539955
> 
> 赞同：4
> 
> 时间：2012-11-24T09:25:58.270
> 
> 标签：java, eclipse, jsf-2

我的 jsf 页面中有这一行

```
<h:dataTable value="#{customer.getCustomerList()}" 
```

在我的豆子里，我有

```
public List<Customer> getCustomerList(){
        return customerBo.findAllCustomer();
    } 
```

我正在将 JSF 2.0 与 Eclipse Helios 与 servlet 2.5 一起使用，当我验证时我得到了

```
Expression must be a value expression but is a method expression 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-26T09:50:00.413

我有一个类似的问题，尽管事实上我做得对，就像 PermGenError 发布的那样。我有这个：

```
<h:commandButton action="#{bean.registry}"></h:commandButton> 
```

我得到了错误：**表达式必须是一个方法表达式，但它是一个值表达式**

在我的 Bean 中，有：

```
class Bean{

    Registry registry = new Registry();

    public Registry getRegistry() {
        return registry;
    }
} 
```

此消息的原因是 Eclipse 无法识别这实际上是以 JSF 方式调用的方法，并且将此消息视为错误。这可以通过这种方式关闭：

**窗口/首选项/Web/JavaServer Faces 工具/验证/类型分配问题/预期方法表达式**

更改为**警告**或**忽略**

我希望这会对某人有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T09:29:47.877

看法：

```
<h:dataTable value="#{customer.customerList}" 
```

您的`value`属性`h:dataTable`需要一个值表达式，而不是方法表达式。您必须创建一个`customerList`在`#{customer}`托管 bean 中调用的属性。

```
@ManagedBean(name="customer")
public class Customer implements Serializable {
    private List<Customer> custormerList= new ArrayList<Customer>();

    public void setCustomerList(List<Customer> cust){
       this.customerList = cust;
    }
    public List<Customer> getCustomerList(){
        return customerBo.findAllCustomer();
    }
} 
```

[参考 h:dataTable 标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/dataTable.html)

# php - CSS背景和表单定位缩放

> ID：13539956
> 
> 赞同：2
> 
> 时间：2012-11-24T09:26:04.020
> 
> 标签：php, html, css, forms

早上好。

我对 CSS 非常陌生，并且一直在阅读一些主题，但是当我试图在 BG 图像上保留表单提交按钮时完全被难住了。一旦我放大页面，按钮就会移出位置。

这是我的 BG 的 CSS 代码：

```
body
{ 
background-image:url('../pics/BGs/FrontBG.jpg');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:center;
background size: auto;
}
.bannerlogin1
{
position: relative;
top: 50;
left: 50;
}

.bannerlogin2
{
position: absolute;
top: 5px;
left: 400px;
}  

.bannerlogin3
{
position: absolute;
top: 5px;
left: 800px;
}

.bannerlogin4
{
position: absolute;
top: 5px;
left: 1250px;
} 
```

我的欢迎页面中的代码：

```
<BODY class="body" bgcolor="black">

<form action="../Nightlife.php">
<input class="bannerlogin1" type="submit" value="" style="width: 250px; height: 100px;    background-color:transparent; border:;" >
</form>

<form action="../Portrait.php">
<input class="bannerlogin2" type="submit" value="" style="width: 250px; height: 100px; background-color:transparent; border:;" >
</form>

<form action="../Contact.php">
<input class="bannerlogin3" type="submit" value="" style="width: 250px; height: 100px; background-color:transparent; border:;" >
</form>

<form action="../Client.php">
<input class="bannerlogin4" type="submit" value="" style="width: 250px; height: 100px; background-color:transparent; border:;" >
</form> 
```

感谢您的任何帮助 ：）。我有一种感觉，我可能在做一些根本上愚蠢的事情，但是从 w3 学校等读过一些东西，似乎无法找到一个简洁的答案来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:36:30.017

`form`需要有相对定位。否则，当您放大时，输入将定位到页面的主体：

```
form{position:relative;} 
```

此外，您应该将提交按钮的内联 CSS 移动到您的样式块：

```
input["submit"]{width: 250px; height: 100px; background-color:transparent;} 
```

注意：["submit"] 是一个仅 CSS3 的属性。

# php - Jquery getJSON php数组到javascript

> ID：13539964
> 
> 赞同：0
> 
> 时间：2012-11-24T09:27:37.887
> 
> 标签：php, javascript, jquery, getjson

我正在使用 php 数组测试 getJSON，但它不起作用，任何人都可以帮我检查一下吗？我觉得问题出在 php 代码上，因为当我使用 getJSON url [https://graph.facebook.com/zombies](https://graph.facebook.com/zombies)测试 html 代码时，它正在工作。

在我的 array.php

```
<?php

 header("Content-type: text/javascript");

 $arr = array(

            "name" => "Tim",
            "age" => "28"     );

echo json_encode($arr);

?> 
```

在我的 test.html 中：

```
 <html>
  <head>
    <script type='text/javascript' src='jquery.js'></script>
  </head>
  <body>

    <script type='text/javascript'>

    $(document).ready(function() {
         $.getJSON('array.php', function(data) {        
            if(data) {
            document.write(data.age);       
            }
            else {
            alert('error');
            }
        });
    }); 
    </script>

   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:32:22.130

改变

`header("Content-type: text/javascript");`

到

```
header('Content-Type: application/json'); 
```

对于 JSONP

```
header('Content-Type: application/javascript'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:32:31.397

> `header("Content-type: text/javascript");`

你告诉浏览器你正在向它发送 JavaScript，而你发送的是 JSON。JSON 的内容类型是`application/json`.

如果你解决了这个问题，它应该可以工作，前提是你没有违反[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。如果您正在发出跨域请求，您的选择是：

*   不要使用 ajax 和 JSON，使用[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)。

*   使用[CORS](http://www.w3.org/TR/access-control/)，但它要求服务器允许您的文档的来源，并且浏览器支持它（大多数现代的支持，旧的不支持）。

*   使用[YQL 作为跨域代理](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T09:34:42.860

尝试将内容类型设置为

```
application/json 
```

所以 jQuery 将作为 json 数据进行解释

# python - 如何在 Python 中找到矩阵的维度？

> ID：13539968
> 
> 赞同：45
> 
> 时间：2012-11-24T09:27:56.240
> 
> 标签：python, matrix

如何在 Python 中找到矩阵的维度。Len(A) 只返回一个变量。

编辑：

```
close = dataobj.get_data(timestamps, symbols, closefield) 
```

是（我假设）生成一个整数矩阵（不太可能是字符串）。我需要找到该矩阵的大小，这样我就可以运行一些测试而不必遍历所有元素。就数据类型而言，我假设它是一个数组数组（或列表列表）。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-24T09:32:48.673

列表列表的行数将是：`len(A)`和列数，`len(A[0])`假设所有行具有相同的列数，即每个索引中的所有列表都具有相同的大小。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-24T11:02:15.347

如果你使用 NumPy 数组，可以使用 shape。例如

```
 >>> a = numpy.array([[[1,2,3],[1,2,3]],[[12,3,4],[2,1,3]]])
  >>> a
  array([[[ 1,  2,  3],
         [ 1,  2,  3]],

         [[12,  3,  4],
         [ 2,  1,  3]]])
 >>> a.shape
 (2, 2, 3) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-14T04:42:14.693

正如 Ayman farhat 所提到的，您可以使用简单的方法 len(matrix) 来获取行的长度并获取第一行的长度来获取编号。使用 len(matrix[0]) 的列数：

```
>>> a=[[1,5,6,8],[1,2,5,9],[7,5,6,2]]
>>> len(a)
3
>>> len(a[0])
4 
```

您还可以使用一个库来帮助您处理矩阵“numpy”：

```
>>> import numpy 
>>> numpy.shape(a)
(3,4) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-05-05T14:51:57.720

要在 NumPy 中获得正确数量的维度：

```
len(a.shape) 
```

在第一种情况下：

```
import numpy as np
a = np.array([[[1,2,3],[1,2,3]],[[12,3,4],[2,1,3]]])
print("shape = ",np.shape(a))
print("dimensions = ",len(a.shape)) 
```

输出将是：

```
shape =  (2, 2, 3)
dimensions =  3 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-04T01:43:15.727

正确答案如下：

```
import numpy 
numpy.shape(a) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-03T01:18:57.117

```
m = [[1, 1, 1, 0],[0, 5, 0, 1],[2, 1, 3, 10]]

print(len(m),len(m[0])) 
```

输出

> (3 4)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-04T06:19:31.033

假设你有一个数组。要获取数组的尺寸，您应该使用 shape.

`import numpy as np a = np.array([[3,20,99],[-13,4.5,26],[0,-1,20],[5,78,-19]])
a.shape`

其输出将是 (4,3)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-21T21:45:56.987

您可以使用以下方法获取 Numpy 数组的高度和重量：

```
int height = arr.shape[0]
int weight = arr.shape[1] 
```

如果您的数组有多个维度，您可以增加索引来访问它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-07T12:38:01.710

您只需使用 Numpy 即可找到矩阵维度：

```
import numpy as np

x = np.arange(24).reshape((6, 4))
x.ndim 
```

输出将是：

```
2 
```

这意味着这个矩阵是一个二维矩阵。

```
x.shape 
```

将显示每个维度的大小。x 的形状等于：

```
(6, 4) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-12T15:20:39.977

我看待它的一种简单方式：示例：

```
h=np.array([[[[1,2,3],[3,4,5]],[[5,6,7],[7,8,9]],[[9,10,11],[12,13,14]]]])

h.ndim 
4

h
array([[[[ 1,  2,  3],
         [ 3,  4,  5]],

        [[ 5,  6,  7],
         [ 7,  8,  9]],

        [[ 9, 10, 11],
         [12, 13, 14]]]]) 
```

如果您仔细观察，开头的方括号的数量决定了数组的维度。在上面要访问 7 的数组中，使用了下面的索引，h[0,1,1,0]

但是，如果我们将数组更改为 3 维，如下所示，

```
h=np.array([[[1,2,3],[3,4,5]],[[5,6,7],[7,8,9]],[[9,10,11],[12,13,14]]])

h.ndim
3

h

array([[[ 1,  2,  3],
        [ 3,  4,  5]],

       [[ 5,  6,  7],
        [ 7,  8,  9]],

       [[ 9, 10, 11],
        [12, 13, 14]]]) 
```

要访问上述数组中的元素 7，索引为 h[1,1,0]

# c# - C# 的随机数生成器是如何工作的？

> ID：13539974
> 
> 赞同：30
> 
> 时间：2012-11-24T09:29:50.823
> 
> 标签：c#, random, numbers, generator

我只是想知道 C# 中的随机数生成器是如何工作的。我也很好奇如何制作一个从 1 到 100 生成随机***整数***的程序。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-24T09:32:14.180

您可以使用[`Random.Next(int maxValue)`](http://msdn.microsoft.com/en-us/library/zd1bc8e5.aspx)：

> **返回**：大于或等于零且小于 maxValue 的 32 位有符号整数；也就是说，返回值的范围通常包括零，但不包括 maxValue。但是，如果 maxValue 等于 0，则返回 maxValue。

```
var r = new Random();
// print random integer >= 0 and  < 100
Console.WriteLine(r.Next(100)); 
```

但是，对于这种情况，您可以使用[`Random.Next(int minValue, int maxValue)`](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)，如下所示：

```
// print random integer >= 1 and < 101
Console.WriteLine(r.Next(1, 101);)
// or perhaps (if you have this specific case)
Console.WriteLine(r.Next(100) + 1); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-24T09:33:04.610

> 我只是想知道 C# 中的随机数生成器是如何工作的。

这是特定于实现的，但[伪随机数生成器的维基百科条目](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)应该会给你一些想法。

> 我也很好奇如何制作一个从 1 到 100 生成随机整数的程序。

您可以使用[`Random.Next(int, int)`](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)：

```
Random rng = new Random();
for (int i = 0; i < 10; i++)
{
    Console.WriteLine(rng.Next(1, 101));
} 
```

请注意，上限是*独占*的——这就是我在这里使用 101 的原因。

您还应该注意一些与之相关的“陷阱” `Random`- 特别是，您不应该在*每次*想要生成随机数时都创建新实例，否则如果您在短时间内生成大量随机数，你会看到很多重复。有关更多详细信息，请参阅[我关于此主题的文章。](http://csharpindepth.com/Articles/Chapter12/Random.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:18:24.770

我已经在互联网上搜索 RNG 有一段时间了。我看到的一切要么太复杂，要么不是我想要的。在阅读了几篇文章后，我能够想出这个简单的代码。

```
{
  Random rnd = new Random(DateTime.Now.Millisecond);
  int[] b = new int[10] { 5, 8, 1, 7, 3, 2, 9, 0, 4, 6 };
  textBox1.Text = Convert.ToString(b[rnd.Next(10)])
} 
```

简单的解释，

1.  创建一个一维整数数组。
2.  用无序数填满数组。
3.  使用 rnd.Next 获取将被选中的号码的位置。

这很好用。

要获得小于 100 的随机数，请使用

```
{
  Random rnd = new Random(DateTime.Now.Millisecond);
  int[] b = new int[10] { 5, 8, 1, 7, 3, 2, 9, 0, 4, 6 };
  int[] d = new int[10] { 9, 4, 7, 2, 8, 0, 5, 1, 3, 4 };
  textBox1.Text = Convert.ToString(b[rnd.Next(10)]) + Convert.ToString(d[rnd.Next(10)]);
} 
```

依此类推，用于 3、4、5 和 6 ... 位随机数。

希望这对某人有积极的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-16T13:56:35.003

所以如果你像这样使用它就很容易了

```
Random random = new Random();

int answer = random.Next(0); 
```

# python - Django 用户 ldap 从组中搜索所有名称

> ID：13539977
> 
> 赞同：0
> 
> 时间：2012-11-24T09:30:24.240
> 
> 标签：python, django, ldap

```
AD_DNS_NAME = xx.xxxxxx.org'
AD_LDAP_URL = 'ldap://%s' % (AD_DNS_NAME)
con = ldap.initialize(AD_LDAP_URL)
    username = 'john'
    password = '123'
    base_dn = 'OU=Domain Users,DC=xx,DC=xxxxx,DC=org'
    filter = '(sAMAccountName=' + username + ')'
    attrs = ['mail']
    dn = '%s@%s' % (username, AD_DNS_NAME)

    try:
        con.simple_bind_s(dn, password)
        my_search = con.search_s(base_dn, ldap.SCOPE_SUBTREE, filter , attrs )
    # my_search return 
   #[('CN=john,OU=x_x_x xx,OU=xxxxxx,OU=CN BU,OU=Domain Users,DC=xx,DC=xxxxxx,DC=org', {'mail': ['john@xxxxxx.com.cn']})] 
```

上面的代码可以搜索某个名为“john”的用户的信息，但是我不知道如何从一个邮件组中获取所有成员的名字，谁知道如何做到这一点？例如，我想搜索一个组命名为“所有的AAA”

我将 attrs 设置为 null 并获取以下所有信息：我删除了一些其他不重要的信息

```
[ 
   ('CN=John,OU=C_E_S XX,OU=Mycity,OU=CN BU,OU=Domain Users,DC=xx,DC=xxxxxx,DC=org', 
     { 
        'mailNickname': ['John'], 
        'primaryGroupID': ['513'],
        'memberOf': [ 'CN=All of AAA,OU=CN BU,OU=Distribution List,OU=Exchange,DC=xx,DC=xxxxxx,DC=org', ], 
     } 
   )
  ] 
```

你能告诉我如何设置过滤器：filter = '(&(objectClass=group)(CN=groupname))' set group='memberOf' and groupname='All of AAA' ???，我试过了这但它没有帮助

我已经解决了这个问题，现在我写下方法：

```
filter = "(&(objectCategory=person)(objectClass=user)(memberOf=CN=All of AAA,OU=CN BU,OU=Distribution List,OU=Exchange,DC=xx,DC=xxxxxx,DC=org))" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:47:47.927

您可以使用这样的过滤器：

```
filter = '(&(objectClass=group)(CN=groupname))' 
```

并将您的 attrs 变量更改为 null 以使其返回所有属性

# asp.net - 将图像与 div 底部对齐

> ID：13539979
> 
> 赞同：0
> 
> 时间：2012-11-24T09:30:27.780
> 
> 标签：asp.net, html

我在面板中有一个 div。我为此添加了一个图像。

我想将图像与 DIV 容器的底部对齐。（在一行中显示图像。）

```
<asp:Repeater ID="product" runat="server">
   <ItemTemplate>
      <div style="float: right; width: 180px; height: 177px; margin: 0 30PX 10px 5px">
         <asp:Panel ID="Panel1" runat="server">
            <font color="white">
            <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label></font>
            <br />
            <div style="height:140px ; overflow:hidden">
               <asp:Image ID="Image1"  runat="server"  Width="120px" ImageUrl='<%#  Eval("Image") %>' ImageAlign="Bottom" />
           </div>
        </asp:Panel>
     </div>
  </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:36:43.627

不要依赖 asp ImageAlign 属性。使用 CSS，例如：

```
<div style="float: right; width: 180px; height: 177px; margin: 0 30px 10px 5px; position:relative">
   <div id="panel"
        <label>Name</label>
        <img id="Image1" src='img-url-goes-here' style="position:absolute;bottom:0px;height:40px;display:block;" />
    </div>
</div>​ 
```

在您的代码中，它将是：

```
<div style="float: right; width: 180px; height: 177px; margin: 0 30px 10px 5px;">
    <asp:Panel ID="Panel1" runat="server">
        <font color="white">
            <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label>    
        </font>
        <div style="overflow:hidden;height:140px; position:relative;">
            <asp:Image ID="Image1"  runat="server"  Width="120px" ImageUrl='<%# Eval("Image") %>' style="position:absolute; bottom:0px; height:40px; display:block;" />
        </div>
    </asp:Panel>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:39:26.660

`vertical-align:bottom`在您的图像 div 中使用

```
<asp:Repeater ID="product" runat="server">
       <ItemTemplate>
          <div style="float: right; width: 180px; height: 177px; margin: 0 30PX 10px 5px">
             <asp:Panel ID="Panel1" runat="server">
                <font color="white">
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label></font>
                <br />
                <div style="height:140px ; overflow:hidden; vertical-align:bottom">
                   <asp:Image ID="Image1"  runat="server"  Width="120px" ImageUrl='<%#  Eval("Image") %>' ImageAlign="Bottom" />
               </div>
            </asp:Panel>
         </div>
      </ItemTemplate>
    </asp:Repeater> 
```

# cakephp - 菜单组件 CakePHP markstory

> ID：13539984
> 
> 赞同：1
> 
> 时间：2012-11-24T09:31:26.540
> 
> 标签：cakephp, components, acl, cakephp-2.2

我编辑了 Mark Story 制作的 CakePHP 菜单组件，使其与 CakePHP 2.2.3 兼容。 [https://github.com/markstory/cakephp_menu_component](https://github.com/markstory/cakephp_menu_component)

问题是我仍然遇到一个我无法弄清楚如何摆脱的错误：

[http://imm.io/MK9J](http://imm.io/MK9J)

[http://imm.io/MK9W](http://imm.io/MK9W)

[http://imm.io/MKa7](http://imm.io/MKa7)

这是修改后的代码：

```
<?php
/**
 * Menu Component
 *
 * Uses ACL to generate Menus.
 *
 * Copyright 2008, Mark Story.
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright Copyright 2008, Mark Story.
 * @link http://mark-story.com
 * @version 1.1
 * @author Mark Story <mark@mark-story.com>
 * @license http://www.opensource.org/licenses/mit-license.php The MIT License
 */
class MenuComponent extends Component {
/**
 * The Default Menu Parent for things that have no parent element defined
 * used a lot by menu items generated by controller folder scrapings
 *
 * @var string
 */
    public $defaultMenuParent = null;
/**
 * Set to false to disable the auto menu generation in startup()
 * Useful if you want your menus generated off of Aro's other than the user in the current session.
 *
 * @var boolean
 */
    public $autoLoad = true;
/**
 * Controller reference
 *
 * @var object
 */ 
    public $Controller = null;
/**
 * Components used by Menu
 *
 * @var array
 */
    public $components = array('Acl', 'Auth');

/**
 * Key for the caching
 *
 * @var string
 */
    public $cacheKey = 'menu_storage';

/**
 * Time to cache menus for.
 *
 * @var string  String compatible with strtotime.
 */
    public $cacheTime = '+1 day';
/**
 * cache config key
 *
 * @var string
 */
    public $cacheConfig = 'menu_component';
/**
 * Separator between controller and action name.
 *
 * @var string
 */
    public $aclSeparator = '/';

/**
 * The Node path to get to the controller listing
 *
 * @var string
 **/
    public $aclPath = 'controllers/';

/**
 * Array of Actions to exclude when making menus.
 * Per controller exclusions can be set with Controller::menuOptions
 *
 * @var array
 **/
    public $excludeActions = array('view', 'edit', 'delete', 'admin_edit', 'admin_delete', 'admin_edit', 'admin_view');

/**
 * Completed list of methods to not include in menus. Includes all of Controller's methods.
 *
 * @var array
 **/
    public $excludedMethods = array();
/**
 * The Completed menu for the current user.
 *
 * @var array
 */
    public $menu = array(); 

/**
 * Raw menus before formatting, either loaded from parsing controllers directory or loading Cache
 *
 * @var array
 */
    public $rawMenus = array();
/**
 * Internal Flag to check if new menus have been added to a cached menu set.  Indicates that new menu items
 * have been added and that menus need to be rebuilt.
 * 
 */
    protected $_rebuildMenus = false;

/**
 * initialize function
 *
 * Takes Settings declared in Controller and assigns them.
 *
 * @return bool
 **/
    public function initialize(Controller $controller) {
        if (!empty($settings)) {
            $this->_set($settings);
        }
        return true;
    }

/**
 * Startup Method
 *
 * Automatically makes menus for all a the controllers based on the current user.
 * If $this->autoLoad = false then you must manually loadCache(), 
 * contstructMenu() and writeCache().
 *
 * @param Object $Controller
 */
    public function startup(Controller $controller) {
        $this->Controller =& $Controller;

        Cache::config($this->cacheConfig, array('engine' => 'File', 'duration' => $this->cacheTime, 'prefix' => $this->cacheKey));

        //no active session, no menu can be generated
        if (!$this->Auth->user()) {
            return;
        }
        if ($this->autoLoad) {
            $this->loadCache();
            $this->constructMenu($this->Auth->user());
            $this->writeCache();
        }
    }

/**
 * Write the current Block Access data to a file.
 *
 * @return boolean on success of writing a file.
 */
    public function writeCache() {
        $data = array(
            'menus' => $this->rawMenus
        );
        if (Cache::write($this->cacheKey, $data, $this->cacheConfig)) {
            return true;
        }
        $this->log('Menu Component - Could not write Menu cache.');
        return false;
    }

/**
 * Load the Cached Permissions and restore them
 *
 * @return boolean true if cache was loaded.
 */
    public function loadCache() {
        if ($data = Cache::read($this->cacheKey, $this->cacheConfig)) {
            $this->rawMenus = $this->_mergeMenuCache($data['menus']);
            return true;
        }
        $this->_rebuildMenus = true;
        return false;
    }

/**
 * Clears the raw Menu Cache, this will in turn force
 * a menu rebuild for each ARO that needs a menu.
 *
 * @return boolean
 **/
    public function clearCache() {
        return Cache::delete($this->cacheKey, $this->cacheConfig);
    }

/**
 * Construct the menus From the Controllers in the Application.  This is an expensive
 * Process Timewise and is cached.
 *
 * @param string $aro  Aro Alias / identification array that a menu is needed for.
 */ 
    public function constructMenu($aro) {
        $aroKey = $aro;
        if (is_array($aro)) {
            $aroKey = key($aro) . $aro[key($aro)];
        }
        $cacheKey = $aroKey . '_' . $this->cacheKey;
        $completeMenu = Cache::read($cacheKey, $this->cacheConfig);
        if (!$completeMenu || $this->_rebuildMenus == true) {
            $this->generateRawMenus();

            $menu = array();
            $size = count($this->rawMenus);
            for ($i = 0; $i < $size; $i++) {
                $item = $this->rawMenus[$i];

                $aco = Inflector::underscore($item['url']['controller']);
                if (isset($item['url']['action'])) {
                    $aco = $this->aclPath . $aco . $this->aclSeparator . $item['url']['action'];
                }
                if ($this->Acl->check($aco, $aro)) {
                    if (!isset($menu[$item['id']])) {
                        $menu[$item['id']] = $this->rawMenus[$i];
                    }
                }
            }
            $completeMenu = $this->_formatMenu($menu);
            Cache::write($cacheKey, $completeMenu, $this->cacheConfig);
        }
        $this->menu = $completeMenu;
    }

/**
 * Generate Raw Menus from Controller in the Application
 * Loads a list of All controllers in the app/controllers, imports the class and gets a method
 * list.  Uses a common exclusion list to remove unwanted methods.  Each Controller can specify a 
 * menuOptions var which allows additional menu configuration.
 * 
 * Menu Options for Controllers:
 *      exclude => actions to exclude from the menu list
 *      parent => Parent link to add a controller / actions underneath
 *      alias => array of action => aliases Allows you to set friendly link names for actions
 *
 * @return void sets $this->rawMenus
 */ 
    public function generateRawMenus() {
        $Controllers = $this->getControllers();
        $cakeAdmin = Configure::read('Routing.admin');
        $this->createExclusions();

        //go through the controllers folder and make an array of every menu that could be used.
        foreach($Controllers as $Controller) {
            if ($Controller == 'App') {
                continue;
            }

            $ctrlName = $Controller;
            App::uses($ctrlName, 'Controller');
            $ctrlclass = $ctrlName;
            $methods = get_class_methods($ctrlclass);
            $classVars = get_class_vars($ctrlclass);

            $menuOptions = $this->setOptions($classVars);
            if ($menuOptions === false) {
                continue;
            }

            $methods = $this->filterMethods($methods, $menuOptions['exclude']);

            $ctrlCamel = Inflector::variable($ctrlName);
            $ctrlHuman = Inflector::humanize(Inflector::underscore($ctrlCamel));
            $methodList = array();
            $adminController = false;
            foreach ($methods as $action) {
                $camelAction = Inflector::variable($action);

                if (empty($menuOptions['alias']) || !isset($menuOptions['alias'][$action])) {
                    $human = Inflector::humanize(Inflector::underscore($action));
                } else {
                    $human = $menuOptions['alias'][$action];
                }
                $url = array(
                    'controller' => $ctrlCamel,
                    'action' => $action
                );
                if ($cakeAdmin) {
                    $url[$cakeAdmin] = false;
                }
                if (strpos($action, $cakeAdmin . '_') !== false && $cakeAdmin) {
                    $url[$cakeAdmin] = true;
                    $adminController = true;
                }

                $parent = $menuOptions['controllerButton'] ? $ctrlCamel : $menuOptions['parent'];
                $this->rawMenus[] = array(
                    'parent' => $parent,
                    'id' => $this->_createId($ctrlCamel, $action),
                    'title' => $human,
                    'url' => $url,
                    'weight' => 0,
                );
            }

            if ($menuOptions['controllerButton']) {
                //If an admin index exists use it.
                $action = $adminController ? $cakeAdmin . '_index' : 'index';
                $url = array(
                    'controller' => $ctrlCamel,
                    'action' => $action,
                    'admin' => $adminController,
                );
                $menuItem = array(
                    'parent' => $menuOptions['parent'],
                    'id' => $ctrlCamel,
                    'title' => $ctrlHuman,
                    'url' => $url,
                    'weight' => 0
                );
                $this->rawMenus[] = $menuItem;
            }
        }
    }

/**
 * Get the Controllers in the Application
 *
 * @access public
 * @return void
 */
    public function getControllers() {
        return App::objects('controller');
    }

/**
 * filter out methods based on $menuOptions.
 * Removes private actions as well.
 *
 * @param array $methods  Array of methods to prepare
 * @param array $remove Array of additional Methods to remove, normally options on the controller.
 * @return array
 **/
    public function filterMethods($methods, $remove = array()) {
        if (!empty($remove)) {
            $remove = array_map('strtolower', $remove);
        }
        $exclusions = array_merge($this->excludedMethods, $remove);
        foreach ($methods as $k => $method) {
            $method = strtolower($method);
            if (strpos($method, '_', 0) === 0) {
                unset($methods[$k]);
            }
            if (in_array($method, $exclusions)) {
                unset($methods[$k]);
            }
        }
        return array_values($methods);
    }

/**
 * Set the Options for the current Controller.
 *
 * @return mixed.  Array of options or false on total exclusion
 **/
    public function setOptions($controllerVars) {
        $cakeAdmin = Configure::read('Routing.admin');
        $menuOptions = isset($controllerVars['menuOptions']) ? $controllerVars['menuOptions'] : array();

        $exclude = array('view', 'edit', 'delete', $cakeAdmin . '_edit', 
            $cakeAdmin . '_delete', $cakeAdmin . '_edit', $cakeAdmin . '_view');

        $defaults = array(
            'exclude' => $exclude, 
            'alias' => array(), 
            'parent' => $this->defaultMenuParent, 
            'controllerButton' => true
        );
        $menuOptions = Set::merge($defaults, $menuOptions);
        if (in_array('*', (array)$menuOptions['exclude'])) {
            return false;
        }
        return $menuOptions;
    }

/**
 * Creates the Exclusions for generating menus.
 *
 * @return void
 **/
    public function createExclusions() {
        $methods = array_merge(get_class_methods('Controller'), $this->excludeActions);
        $this->excludedMethods = array_map('strtolower', $methods);
    }
/**
 * Add a Menu Item.
 * Allows manual Insertion into the menu system.
 * If Added after constructMenu()  It will not be shown
 *
 * @param string $parent
 * @param array $menu
 *      'Menu' Array
 *          'title' => name
 *          'url' => url array of menu, url strings are lame and won't work
 *          'key' => unique name of this menu for parenting purposes.
 *          'controller' => controller Name this action is from
 */
    public function addMenu($menu) {
        $defaults = array(
            'title' => null,
            'url' => null,
            'parent' => null,
            'id' => null,
            'weight' => 0,
        );
        $menu = array_merge($defaults, $menu);
        if (!$menu['id'] && isset($menu['url'])) {
            $menu['id'] = $this->_createId($menu['url']);
        }
        if (!$menu['title'] && isset($menu['url']['action'])) {
            $menu['title'] = Inflector::humanize($menu['url']['action']);
        }
        $this->rawMenus[] = $menu;
    }

/**
 * BeforeRender Callback.
 *
 */
    public function beforeRender(Controller $controller) {
        $this->Controller->set('menu', $this->menu);
    }

/**
 * Make a Unique Menu item key
 *
 * @param array $parts
 * @return string Unique key name
 */
    protected function _createId() {
        $parts = func_get_args();
        if (is_array($parts[0])) {
            $parts = $parts[0];
        }
        $key = Inflector::variable(implode('-', $parts));
        return $key;
    }

/**
 * Recursive function to construct Menu
 *
 * @param unknown_type $menu
 * @param unknown_type $parentId
 */
    protected function _formatMenu($menu) {
        $out = $idMap = array();
        foreach ($menu as $item) {
            $item['children'] = array();
            $id = $item['id'];
            $parentId = $item['parent'];
            if (isset($idMap[$id]['children'])) {
                $idMap[$id] = am($item, $idMap[$id]);
            } else {
                $idMap[$id] = am($item, array('children' => array()));
            }
            if ($parentId) {
                $idMap[$parentId]['children'][] =& $idMap[$id];
            } else {
                $out[] =& $idMap[$id];
            }
        }
        usort($out, array(&$this, '_sortMenu'));
        return $out;
    }

/**
 * Sort the menu before returning it. Used with usort()
 *
 * @return int
 **/
    protected function _sortMenu($one, $two) {
        if ($one['weight'] == $two['weight']) {
            return 1;
        }
        return ($one['weight'] < $two['weight']) ? -1 : 1;
    }
/**
 * Merge the Cached menus with the Menus added in Controller::beforeFilter to ensure they are unique.
 *
 * @param array $cachedMenus
 * @return array Merged Menus
 */
    protected function _mergeMenuCache($cachedMenus) {
        $cacheCount = sizeOf($cachedMenus);
        $currentCount = sizeOf($this->rawMenus);
        $tmp = array();
        for ($i = 0; $i < $currentCount; $i++) {
            $exist = false;
            $addedMenu = $this->rawMenus[$i];
            for ($j =0; $j < $cacheCount; $j++) {
                $cachedItem = $cachedMenus[$j];
                if ($addedMenu['id'] == $cachedItem['id']) {
                    $exist = true;
                    break;
                }
            }
            if ($exist) {
                continue;
            }
            $tmp[] = $addedMenu;
        }
        if (!empty($tmp)) {
            $this->_rebuildMenus = true;
        }
        return array_merge($cachedMenus, $tmp);
    }

}
?> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:55:57.167

虽然我现在没有时间尝试测试所有内容，但我可以告诉您两件事，首先是您在[`AclComponent::check`](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html#checking-permissions-the-acl-component)调用中的参数顺序错误（`MenuComponent`第 217 行），第一个参数应该是`ARO`, 和第二个应该是`ACO`。

另一个问题是您传递给`MenuComponent::constructMenu`（以及因此传递给`AclComponent::check`）的数据格式错误，它应该是一个数组，其中第一项由保存`ARO`数据的字符串（模型名称）索引，即如下所示：

```
array
(
    'User' => array
    (
        'id' => '33',
        'username' => 'user',
        'email' => 'user@user.com',
        ...
    )
) 
```

这是必要的，因为菜单组件正在使用该键进行缓存，以及`AclNode`用于访问`ARO`数据的模型。您传递它将`id`作为键获取的数据的方式，并尝试将该键的数据作为数组访问，这将失败，因为索引的值`id`包含一个字符串（`33`），因此出现`illegal string offset`错误。

所以调用`MenuComponent::constructMenu`应该看起来像这样，`User`你的用户模型的名称应该在哪里：

```
$this->constructMenu(array('User' => $this->Auth->user())); 
```

**但是模型名称不应该是硬编码**的，您应该尝试从`Auth`组件中检索它！例如像这样（未经测试！）：

```
$this->Auth->authenticate[key($this->Auth->authenticate)]['userModel'] 
```

# views - 控制器/模型/视图的 Laravel 命名约定是什么？

> ID：13539999
> 
> 赞同：26
> 
> 时间：2012-11-24T09:34:48.593
> 
> 标签：views, naming-conventions, models, controllers, laravel

我记得听说你应该以一种特殊的方式命名你的控制器、模型和视图。无论是单数还是复数。我不记得要命名哪些，但我在文档中找不到任何关于它的信息。

我猜是这样的：

> *   控制器是复数
> *   视图是复数
> *   模型是单一的

我在正确的轨道上吗？

我知道这只是一个约定，您不必遵循*它们*，但我仍然想知道正确的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:37:07.307

在 ASP.NET MVC 中，我使用您上面提到的约定，期望视图，它们是混合的。如果我有一个显示多个“事物”的视图，例如员工列表，则它是复数。如果我有一个显示单个员工的视图，它是单数的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-26T17:53:22.910

约定是：

*   模型类名称是单数（*照片*类扩展模型）
*   表名是复数（从*照片*中选择 id ）
*   控制器资源名称是单数（*Photo* Controller.php）

我找不到文档中定义的控制器名称的约定，但所有记录的示例都将控制器资源名称放在单数中。

[来自 Laravel 5.5 文档](https://laravel.com/docs/5.5/eloquent#eloquent-model-conventions)：

> 按照约定，“snake case”，类的复数名称将用作表名，除非明确指定另一个名称... Eloquent 将假定 Flight 模型将记录存储在航班表中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T17:20:02.350

你实际上给它们起什么名字并不重要。只要您始终如一地这样做，这只是一个品味问题。有时您甚至别无选择，只能遵循当前项目已经确定的代码样式。

一种好的做法是，如果可以的话，就是遵循[PHP Framework Interop Group](http://www.php-fig.org/)标准。在他们的页面上阅读更多关于他们的信息以了解更多信息。

Laravel 4 将遵循所有标准（[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，[PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)和[PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md)），但 Laravel 3 不是。[例如：对于PSR-1](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md) “要求”的方法，它不使用驼峰式大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T23:57:55.507

这里的答案非常正确，但如果你在谈论 Laravel，你应该以单数形式命名你的 Models 类，因为 Laravel 内置了功能，例如 Eloquent 类足够聪明，它可以检测英语的复数形式。因此，如果我们的对象是单数的，它将使用该名称的复数形式来访问该对象的数据库表。